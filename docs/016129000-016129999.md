# StackOverflow 问答 16129000-16129999

# linux - JFFS2 文件系统立即损坏（魔术位掩码 0x1985 未找到错误）

> ID：16129000
> 
> 赞同：4
> 
> 时间：2013-04-21T07:43:32.477
> 
> 标签：linux, flash, filesystems, embedded-linux, jffs2

我创建了一个使用 squashfs 的 buildroot 根文件系统。它工作正常，现在我想创建一个覆盖 /home 和 /etc 目录的覆盖文件。

为此，我想创建一个包含几个文件的简单 jffs2 文件系统：

```
jlumme@simppa:~/projects/jffs2_home$ ls -la
total 20
drwxrwxr-x 4 jlumme jlumme 4096 Apr 21 16:21 .
drwxrwxr-x 6 jlumme jlumme 4096 Apr 21 16:21 ..
drwxrwxr-x 2 jlumme jlumme 4096 Apr 21 13:45 default
drwxrwxr-x 2 jlumme jlumme 4096 Apr 21 13:45 ftp
-rw-rw-r-- 1 jlumme jlumme   24 Apr 21 15:34 test.txt 
```

我使用的闪存芯片是 SST25VF064C，所以我相信它的擦除块大小是 64 KB，因此我从该文件夹创建了一个文件系统映像：

```
mkfs.jffs2 -r jffs2_home/ -e 64 -o home.jffs2
$ ls -la
-rw-r--r--  1 jlumme jlumme   496 Apr 21 15:42 home.jffs2 
```

（令人惊讶的是，如果我设置 -e 32，甚至 -e 4，则生成的二进制图像根本不会改变？？？）。尽管如此，继续前进，我已将包含 home 的 mtdblock 对齐到 64KB，我的闪存布局如下所示：

```
uboot/<0x00000000 0x40000>
kernel/<0x00040000 0x3D9000>
dtb/<0x00419000 0x10000>
rootfs/<0x00429000 0x1F7000>
home/<0x00620000 0x1E0000> 
```

在我的板上，我可以很好地挂载 mtdblock4，并且可以正确读取文件内容。但是，如果我修改文件并尝试保存它，则会`vi`抱怨：

```
[   77.030000] jffs2: Node totlen on flash (0xffffffff) != totlen from node ref (0x00000044) 
```

现在，如果我卸载文件系统并重新安装它，我会立即开始收到投诉：

```
# mount -t jffs2 /dev/mtdblock4 /home/
[   99.740000] jffs2: jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x001d4070: 0xff0a instead
[   99.760000] jffs2: Empty flash at 0x001d4074 ends at 0x001d412c
[   99.770000] jffs2: jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x001d412c: 0xffff instead
[   99.790000] jffs2: Empty flash at 0x001d4130 ends at 0x001d4194
[   99.790000] jffs2: jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x001d4194: 0xff0a instead 
```

我想现在我的文件系统已经损坏了......我真的不明白它的原因......有什么想法我哪里出错了？谢谢大家的建议。。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-27T07:21:32.327

这就是我为解决问题所做的。

1.  [从http://www.linux-mtd.infradead.org/](http://www.linux-mtd.infradead.org/) 更新了较新的 MTD 驱动程序
    - SST25V064C 芯片有新代码
2.  确保为 JFFS2 保留的区域初始化为 0xFF
3.  （可能是可选的）更准确地指定了 jffs2 文件系统的创建：

    ```
    mkfs.jffs2 -e 64 -l -p -s 4096 -r jffs2_home/ -o home.jffs2 
    ```

通过这些更改，文件系统现在可以按预期读写。

# wordpress - 如何使 Wordpress 帖子仅对作者可见并通过直接链接？

> ID：16129005
> 
> 赞同：0
> 
> 时间：2013-04-21T07:44:26.483
> 
> 标签：wordpress, posts, author

我想创建一个用户可以自行注册的 Wordpress 网站。他们只需要更新个人资料和写帖子的能力。这篇文章应该只对作者可见或通过直接链接可见。

有谁知道我如何使作者的帖子在网站上不可见，但是当作者登录帖子时可见，并且当有人使用帖子的直接链接时，它也是可见的。是否有某种插件可以做到这一点，或者我可以编辑某种代码，这样就可以了。

还有多个作者，每个作者都有自己的帖子。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T11:21:17.487

1.  转到您的帖子

2.  打开想要的。

3.  将帖子可见性设置为不**公开**

您也可以访问此页面： [http ://wordpress.org/support/topic/let-author-only-see-their-posts](http://wordpress.org/support/topic/let-author-only-see-their-posts)

# android - 使用布局xml从其他类获取图像到按钮

> ID：16129006
> 
> 赞同：0
> 
> 时间：2013-04-21T07:44:37.420
> 
> 标签：android, imagebutton

我正在搜索从另一个带有 xml 布局的 java 文件中获取图像的编码返回到一个按钮。然后按钮将显示我选择的图像。任何人都可以帮助我吗？我需要的是我想要按钮'A'从中获取图像`IconGridView.class`？

```
Button A = (Button) findViewById (R.id.a);
A.setOnClickListener(this);

public void onClick(View v) {
    // TODO Auto-generated method stub
startActivity(new Intent(this, IconGridView.class));    

} 
```

IconGridView.java

```
icon = (GridView) findViewById(R.id.icon);

    // Instance of ImageAdapter Class
    icon.setAdapter(new IconAdapter(this)); 
```

IconAdapter.java

```
import android.content.Context;
import android.view.*;
import android.widget.*;

public class IconAdapter extends BaseAdapter {
private Context mContext;

// saving all images in array
public Integer[] mThumbIds = {
        R.drawable.android,R.drawable.w7,
        R.drawable.blogger,R.drawable.google,R.drawable.fb,R.drawable.youtube,R.drawable.msn,R.drawable.gmail,R.drawable.twitter,
        R.drawable.chrome,R.drawable.firefox,R.drawable.instagram,
        R.drawable.emoji1,R.drawable.emoji2,R.drawable.emoji3,R.drawable.emoji4,
        R.drawable.emoji5,R.drawable.emoji6,R.drawable.emoji7,
        R.drawable.love,R.drawable.love1,R.drawable.love2,R.drawable.rose,
        R.drawable.punch,R.drawable.good,R.drawable.peace,
        R.drawable.beer,R.drawable.book,R.drawable.calendar,R.drawable.chat,
        R.drawable.clip,R.drawable.cone,R.drawable.contact,
        R.drawable.cpleset,R.drawable.cross,R.drawable.home,
        R.drawable.laptop,R.drawable.lock,R.drawable.lock1,R.drawable.key,R.drawable.music,R.drawable.nosmoke,R.drawable.note,
        R.drawable.pills,R.drawable.printer,R.drawable.rain,R.drawable.sun,
        R.drawable.recycle,R.drawable.search,R.drawable.shopping,R.drawable.survey,
        R.drawable.sx,R.drawable.teacup,R.drawable.text,R.drawable.toilet,R.drawable.tree,
        R.drawable.up,R.drawable.down,R.drawable.check,R.drawable.qm,

};

// Constructor
public IconAdapter(Context c){
    mContext = c;
}

@Override
public int getCount() {
    return mThumbIds.length;
}

@Override
public Object getItem(int position) {
    return mThumbIds[position];
}

@Override
public long getItemId(int position) {
    return 0;
}

@Override
public View getView(int position, View convertView, ViewGroup parent) {
    ImageView imageView = new ImageView(mContext);
    imageView.setImageResource(mThumbIds[position]);
    imageView.setScaleType(ImageView.ScaleType.CENTER_CROP);
    imageView.setLayoutParams(new GridView.LayoutParams(40, 40));
    return imageView;
}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T08:34:22.623

在您的 GridView 实例上，您可以设置：

```
 gridview.setOnItemClickListener(new OnItemClickListener() {
        public void onItemClick(AdapterView<?> parent, View v, int position, long id) {

        }
    }); 
```

当您单击`GridView`. position 参数是指您单击的适配器内的元素：

所以你可以这样做：

```
 gridview.setOnItemClickListener(new OnItemClickListener() {
        public void onItemClick(AdapterView<?> parent, View v, int position, long id) {
           IconAdapter adapter = (IconAdapter) gridView.getAdapter() ;
           Integer drawableId = (Integer)yourAdapter.getItem(position);
           Intent intent = new Intent();
           intent.putExtra("drawableId", drawabledId); 
            setResult(Activity.RESULT_OK, intent);
    finish();   
        }
    }); 
```

您必须保留对 IconAdapter 的引用，或者您可以尝试使用以下方法检索：

```
IconAdapter adapter = (IconAdapter) gridView.getAdapter() ; 
```

编辑：使用 startActivityForResult 开始`IconGridView`，当调用 gridview 的 onItemClick 时，完成 IconGridView 并将结果设置为附加参数，即您想用作按钮背景的资源 ID。

```
public void onClick(View v) {
    // TODO Auto-generated method stub
startActivityForResult(new Intent(this, IconGridView.class), 100);    

}

  @Override
   protected void onActivityResult(int requestCode, int resultCode, Intent data) {
      super.onActivityResult(requestCode, resultCode, data);
      if (resultCode ==  Activity.RESULT_OK) {
         int drawableId = data.getIntExtra("drawableId", -1);
         if (drawableId != -1) {
             A.setBackgroundResource(drawableId);
         }
      }
   } 
```

# dart - 我如何保证 Dart 中的某个命名构造函数？

> ID：16129007
> 
> 赞同：6
> 
> 时间：2013-04-21T07:44:56.530
> 
> 标签：dart

假设我有 Cat、Dog 和 Parrot 的具体类，以及以下接口：

```
class HasGuid {
  HasGuid.fromId(String id);
} 
```

我的目标是保证 Cat、Dog 和 Parrot 都有一个`fromId`命名构造函数。因此，我可以拨打以下电话：

```
Cat.fromId("Whiskers") =returns> [A Future<Cat> object with id "Whiskers"]
Dog.fromId("Fido")     =returns> [A Future<Dog> object with id "Fido"]
Parrot.fromId("Polly") =returns> [A Future<Parrot> object with id "Poly"] 
```

`fromId`正在通过网络拨打电话，因此我将其作为`Future`. 我基本上想要一个合同，规定任何混合/扩展/实现/无论该类的`HasGuid`类都将具有`fromId`. Where `fromId`on class`T`将采用标识字符串并返回一个`Future<T>`.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2019-05-31T22:56:05.690

简短的回答是，您不能强制子类实现特定的命名构造函数……您所能做的就是强制子类确保子类调用命名构造函数。

举个例子，下面...

```
class Animal {
  String name;

  Animal.fromName(this.name);
}

class Dog extends Animal {

  Dog.withName(String name) : super.fromName(name);
} 
```

注意以下...

1.  `Animal`没有零参数构造函数。
2.  如果你不调用`super.fromName()`构造函数，`Dog`你会得到一个编译错误

```
The superclass 'Animal' doesn't have a zero argument constructor. 
```

3.  虽然`Dog`必须调用`fromName()`构造函数......它不必调用它的命名构造函数。在这种情况下，请注意它被称为`withName()`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-21T15:42:01.300

无法保证构造函数。

实例方法的接口（实现）保证。Super class(extends) 或 Mixins(with) 也保证实例方法，而不是构造函数。

构造函数返回它自己的类型，而不是 Future。

所以他们应该都有一个静态方法或类，但不能保证。

# c# - Math.Atan2 和 FPATAN

> ID：16129014
> 
> 赞同：7
> 
> 时间：2013-04-21T07:46:24.587
> 
> 标签：c#, .net, x86, trigonometry

我正在用 C# 编写一些数学代码，强制它在发布时为 x86 编译，优化，我正在查看 windbg 中的反汇编。它通常非常好，经常写出比我能写的更好的汇编（并不是说我非常擅长汇编，但是你去吧）。

但是，我注意到这个功能：

```
static void TemporaryWork()
{
    double x = 4;
    double y = 3;
    double z = Math.Atan2(x, y);
} 
```

正在生产这个反汇编：

```
001f0078 55              push    ebp
001f0079 8bec            mov     ebp,esp
001f007b dd05a0001f00    fld     qword ptr ds:[1F00A0h]
001f0081 83ec08          sub     esp,8
001f0084 dd1c24          fstp    qword ptr [esp]
001f0087 dd05a8001f00    fld     qword ptr ds:[1F00A8h]
001f008d 83ec08          sub     esp,8
001f0090 dd1c24          fstp    qword ptr [esp]
001f0093 e86e9ba66f      call    clr!GetHashFromBlob+0x94e09 (6fc59c06) (System.Math.Atan2(Double, Double), mdToken: 06000de7)
001f0098 ddd8            fstp    st(0)
001f009a 5d              pop     ebp
001f009b c3              ret 
```

即使您不是 x86 专家，您也会注意到其中有些奇怪的地方：调用了 System.Math.Atan2。就像在函数调用中一样。

但实际上有一个 x86 操作码可以做到这一点：[FPATAN](http://www.website.masmforum.com/tutorials/fptute/fpuchap10.htm#fpatan)

当有实际的汇编指令来执行操作时，为什么 JITer 会调用函数？我认为 System.Math 基本上是本机汇编指令的包装器。那里的大多数操作都有直接汇编操作码。但显然情况并非如此？

有没有人知道为什么 JITer 不能/不能执行这个相当明显的优化？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-21T14:24:02.153

您可以从[这个答案](https://stackoverflow.com/a/8870593/17034)中找出原因，它显示了这些数学函数是如何被抖动映射的。

它将带您进入 clr/src/classlibnative/float/comfloat.cpp、ComDouble::Atan2() 函数。这解释了原因：

```
 // the intrinsic for Atan2 does not produce Nan for Atan2(+-inf,+-inf)
   if (IS_DBL_INFINITY(x) && IS_DBL_INFINITY(y)) {
       return(x / y);      // create a NaN
   }
   return (double) atan2(x, y); 
```

因此，修复不符合 CLI 的 FPU 行为是一种解决方法。

# c++ - C++ pass-by-non-const-reference 方法在 pass-by-const-reference 方法中

> ID：16129018
> 
> 赞同：0
> 
> 时间：2013-04-21T07:46:54.110
> 
> 标签：c++, compiler-errors, constants, const-correctness, pass-by-const-reference

我有这个`pass_by_const(const std::string& s)`想要调用的函数`pass_by_non_const(std::string& s)`。

如果我有这个方法的定义

```
pass_by_const(const std::string& s)
{
    pass_by_non_const(s);
} 
```

编译器会屈服于我吗，有解决方法吗？我担心`pass_by_non_const`在我背后修改 s。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T07:46:54.110

会发生什么

```
pass_by_const(const std::string& s)
{
    pass_by_non_const(s);
} 
```

is：`pass_by_const`有 const 参数`std::string s`，因此不允许修改在封闭范围内定义并作为参数传递给他的字符串 s。但是，`pass_by_non_const`允许修改 s。这会在编译时引发编译器错误。

但是，可以将 s 的本地非常量副本传递给`pass_by_non_const`。然后，可以在 的范围内修改本地副本`pass_by_non_const`，而作为参数传递给的封闭范围的 s`pass_by_const`不会改变。

编写方法的正确方法是

```
pass_by_const(const std::string& s)
{
    std::string local_copy = s;
    pass_by_non_const(local_copy );
} 
```

没有更多的编译时错误，local_copy 可以在大多数内部范围内被修改，而来自封闭范围的 s 不会被修改，这遵守`pass_by_const`方法的 pass-by-const-ref-ness。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-21T07:56:58.997

您甚至不应该*调用*from `pass_by_non_const`，`pass_by_const`因为如果参数是 const 引用，您“承诺”不会修改它。

如果你想*违反*类型系统（这是一件坏事），你可以做一些丑陋的事情，比如

```
 pass_by_const(const std::string& s)
 {
    pass_by_non_const(const_cast<std::string&>(s));
 } 
```

但关键是这样做是错误的，并且可能是[未定义的行为](http://en.wikipedia.org/wiki/Undefined_behavior)。所以任何不好的事情都可能发生（崩溃，甚至程序不小心做了你想做的事）。

如果您想遵守类型系统并避免违反不变量，请按照[antitrust's answer](https://stackoverflow.com/a/16129019/841108)中的建议制作本地副本。当然，制作本地副本可能会很昂贵。

# ajax - 在提交表单之前发送 AJAX 请求

> ID：16129020
> 
> 赞同：0
> 
> 时间：2013-04-21T07:47:05.073
> 
> 标签：ajax, forms, jquery, ajax-forms

问题：我正在尝试发送 ajax 请求，然后提交表单。

方法：1.我解决了这个问题

```
success: function() { 
   document.myform.submit();
} 
```

但我认为这不是最优雅的解决方案。你能解释一下为什么它只有在我放的时候才有效`document.myform.submit(); in success`吗？有没有其他方法可以解决这个问题？

```
<div class="buttons">
  <div class="right">
        <form name="myform" onsubmit="javascript: startAjax(); return false;" action="https://example.com/payment.php" method="get">
                    <input type="hidden" name="merchantId" value="<?php echo $merchantIdKZM; ?>"> 
                    <input type="submit" value="<?php echo $button_confirm; ?>" id="button-confirm2" class="button" name="PayKZM" />
                </form>
    </div>
</div>

<script type="text/javascript">
function startAjax() {
    console.log("dafaaaa");
    $.ajax({ 
                type: 'get',
                url: 'index.php?route=payment/bank_transfer/confirm',
                async: 'false',
                success: function() {

                        // location = '<?php echo $continue; ?>';
                }               
        });

} // Calls ajaxComplete() when finished

function ajaxComplete()
{
    console.log("dafa");
  document.myform.submit();
}
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T08:04:32.077

正如@harsh 指出的那样，在get 请求接收到有效响应时调用success 函数。因此它将在获取请求之后发生。我相信类似于以下内容的事情会按照您的要求进行，尽管我尚未对其进行测试：

```
<script type="text/javascript">
$(function () {
    $("#form").on('submit', function () {
        var $form = $(this);
        $.ajax({
            type: 'GET',
            url: 'index.php?route=payment/bank_transfer/confirm',
            data: $form.serialize(),
            async: 'false',
            success: function () {
                $.ajax({
                    type: 'GET',
                    url: 'https://example.com/payment.php',
                    data: $form.serialize(),
                });
            }

        });
    });
});
</script> 
```

# c# - 如何使用 MVVM Light 从一个页面传递查询字符串参数并在 WP 7 中获取另一个页面

> ID：16129027
> 
> 赞同：3
> 
> 时间：2013-04-21T07:48:09.730
> 
> 标签：c#, windows-phone-7, mvvm, navigation, mvvm-light

我正在 MVVM 架构中的 Windows Phone 7 中开发应用程序。我从未使用过 MVVM Light。但是今天为了将查询字符串参数从第一页的 ViewModel 发送到另一个，我搜索了谷歌，发现我必须使用 MVVMLight。但我找不到任何教程或工作示例。我发现它从一页导航到另一页，但没有参数。

**更新** 如何更改可以从 OrderViewModel 获取参数的解决方案？ [代码可以在这里找到](http://hirenkhirsaria.blogspot.com/2012/04/windows-phone-7-using-page-navigation.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T07:51:30.687

您使用一个称为消息传递的概念。在 Geoff 的博客上阅读更多信息：[MVVM Light - 在导航之前将参数传递给目标 ViewModel](http://geoffwebbercross.blogspot.com/2012/04/mvvm-light-passing-params-to-target.html)。

基本上，您发送某种类型的消息（由 C# 类表示）并且目标 ViewModel 将自己注册为该消息的接收者。广播消息后，将调用另一个视图模型。

# java - 调试帮助 facebook hacakathon 问题集

> ID：16129028
> 
> 赞同：3
> 
> 时间：2013-04-21T07:48:10.907
> 
> 标签：java, algorithm, hashmap

我正在尝试实现 facebook hackathon 2013 http://argote.mx/?p=353"> 上的一个更简单的问题。

摘录： **给定一个字符串 s，小约翰尼将字符串之美定义为其中字母之美的总和。每个字母的美是 1 到 26 之间的整数，包括 1 和 26，没有两个字母具有相同的美。约翰尼不在乎字母是大写还是小写，所以这并不影响字母的美观。你是一名学生，正在写一篇关于这位著名黑客青年的报告。你找到了约翰尼认为最漂亮的绳子。这个字符串的最大可能美是什么？**

我已经实现了基于将单个字母映射到特定数字的自己的解决方案。

这是代码：

```
package samplecodes;

import java.io.BufferedReader;
import java.io.FileReader;
import java.util.ArrayList;
import java.util.HashMap;
import java.util.StringTokenizer;

public class StringBeauty {

    /**
     * @param args
     */
    public static void main(String[] args) {
        // TODO Auto-generated method stub
        ArrayList<String> input= new ArrayList<String>();
        try{

            FileReader f1 = new FileReader(args[0]);
            BufferedReader f = new BufferedReader(f1);
            String newLine;
            while ((newLine=f.readLine()) != null){
                   StringTokenizer st = new StringTokenizer(newLine);
                   while (st.hasMoreTokens()) {
                      String string= st.nextToken(); 
                      input.add(string);

                   }

                   for(String i: input)
                       System.out.println("input "+i);
                   ///printLower(input);

                   calculateStringBeauty(input);
                   input.clear();

}

        }

            catch(Exception e){
                e.printStackTrace();
        }
    }

    public static void calculateStringBeauty(ArrayList<String> input){

        /** mapping based on analysing input string**/

        HashMap<Character,Integer> map= new HashMap<Character,Integer>();
        map.put( Character.valueOf('a'),24);
        map.put( Character.valueOf('b'),25);
        map.put( Character.valueOf('c'),26);
        map.put( Character.valueOf('d'),1);
        map.put( Character.valueOf('e'),2);
        map.put( Character.valueOf('f'),3);
        map.put( Character.valueOf('g'),4);
        map.put( Character.valueOf('h'),5);
        map.put( Character.valueOf('i'),6);
        map.put( Character.valueOf('j'),7);
        map.put( Character.valueOf('k'),8);
        map.put( Character.valueOf('l'),9);
        map.put( Character.valueOf('m'),10);
        map.put( Character.valueOf('n'),11);
        map.put( Character.valueOf('o'),12);
        map.put( Character.valueOf('p'),13);
        map.put( Character.valueOf('q'),14);
        map.put( Character.valueOf('r'),15);
        map.put( Character.valueOf('s'),16);
        map.put( Character.valueOf('t'),17);
        map.put( Character.valueOf('u'),18);
        map.put( Character.valueOf('v'),19);
        map.put( Character.valueOf('w'),20);
        map.put( Character.valueOf('x'),21);
        map.put( Character.valueOf('y'),22);
        map.put( Character.valueOf('z'),23);
        int sum=0;
        for(String i: input){
        i=i.toLowerCase();
        //  System.out.println("i "+i);
        char[] array= i.toCharArray();

        for(char a: array){
        if(map.containsKey(a))
            sum+=map.get(a);
        else
            continue;
        }

        }
        System.out.print(sum);
        System.out.println();

        }
} 
```

我的解决方案似乎非常适合其中一个测试用例，例如 . `ABbCcc`-> `152`，这映射正确但是`So I just go consult Professor Dalves` -> `392`（根据我的代码）。但预计会`646`根据提供的测试用例返回一个美丽值。

任何帮助调试我的代码或改进我的算法的建议将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T09:17:23.327

首先，谢谢你把我的想法搞砸了：P

现在，据我了解的基本前提是，一个角色出现得越多，它就会变得越漂亮。

所以考虑到这一点，你需要找出来计算单个字符出现的次数。我正在考虑尝试一些花哨的正则表达式，但我的正则表达式技能相当差：P

相反，我选择创建一个将字符映射到事件的简单对象。实际上，您实际上并不需要该角色，但我将其用于调试。你可以简单地用一个`Map<Character, Integer>`代替......

您也可以轻松地使用`int[]`26 个元素的数组。每个元素代表一个字符（即`a == 0`和`z == 25`）

```
import java.util.ArrayList;
import java.util.Collections;
import java.util.HashMap;
import java.util.List;
import java.util.Map;

public class Hack {

    public static void main(String[] args) {
        new Hack();
    }

    public Hack() {
        System.out.println("152 = " + getBeauty("ABbCcc"));
        System.out.println("754 = " + getBeauty("Good luck in the Facebook Hacker Cup this year!"));
        System.out.println("491 = " + getBeauty("Ignore punctuation, please :)"));
        System.out.println("729 = " + getBeauty("Sometimes test cases are hard to make up."));
        System.out.println("646 = " + getBeauty("So I just go consult Professor Dalves\t"));
    }

    protected int getBeauty(String value) {

        int sum = 0;
        value = value.toLowerCase();
        char[] values = value.toCharArray();
        Map<Character, Beauty> mapBeauty = new HashMap<>(26);
        for (char c : values) {
            if (Character.isLetter(c)) {
                Beauty beauty = mapBeauty.get(c);
                if (beauty == null) {
                    beauty = new Beauty(c);
                    mapBeauty.put(c, beauty);
                }
                beauty.add();
            }
        }

        List<Beauty> beauties = new ArrayList<>(mapBeauty.values());
        Collections.sort(beauties);
        int weight = 26;
        for (Beauty beauty : beauties) {
            int bweight = weight * beauty.getOccurance();
//            System.out.println(beauty.getValue() + " @ " + beauty.getOccurance() + " x " + weight + " = " + bweight);
            sum += bweight;
            weight--;
        }

        return sum;

    }

    public class Beauty implements Comparable<Beauty> {

        private char value;
        private int occurance;

        public Beauty(char value) {
            this.value = value;
            occurance = 0;
        }

        public char getValue() {
            return value;
        }

        public void add() {
            occurance++;
        }

        public int getOccurance() {
            return occurance;
        }

        @Override
        public int compareTo(Beauty o) {
            return o.getOccurance() - getOccurance();
        }

    }

} 
```

哪个输出...

```
152 = 152
754 = 754
491 = 491
729 = 729
646 = 646 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T09:16:45.633

对于一个我不确定这个哈希表。实际上没有任何理由存储键和值，因为它们在字符串之间不一致。

除此之外，您应该尝试做的是确定字符串中出现最多的字符，与它的大小写或相对字母位置无关。一旦找到出现最多的那个，将其赋值为 26 乘以它出现的次数，然后将值存储在累加器中。继续下一个出现次数第二多的字符，依此类推。

ABbCcc -> c = 26，b = 25，a = 24

->-> 做数学 = 152

所以我就去咨询 Dalves 教授 -> s = 26; o = 25; u,t,r,e,l = 24 - 20; 剩下的得到 19 - 10。

->-> 做数学 = 646

希望能有所帮助！

# c# - 正则表达式不起作用

> ID：16129029
> 
> 赞同：1
> 
> 时间：2013-04-21T07:48:12.883
> 
> 标签：c#, .net, regex

为什么即使“aaa”连续不包含 12 位数字，下面的代码也会向 groupCollection 插入一个项目？

```
var groupCollection = Regex.Match("aaa", "\\d{12}").Groups 
```

我正在尝试检查一个字符串是否连续包含 12 个数字，如下所示：

_def_201208141238_aaaa

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T07:56:21.300

```
var match=Regex.Match("_def_201208141238_aaaa", "\\d{12}");

if(match.Success)
{
    // string contains 12 digits in a row
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T07:58:30.857

该`Match`方法总是需要返回一些东西。`success` 它返回带有value的匹配对象`false`。我猜你想使用`Matches`并获得`MatchCollection`. 在这种情况下，您应该得到 0 个匹配项。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T08:06:33.913

```
 // Option 1
            // If you are sure there could be only one match then you can check this boolean flag.
            var isSuccess = Regex.IsMatch("aaa", "\\d{12}");

            // Option 2
            // There could be multiple matches.
            var matchCollection = Regex.Matches("aaa", "\\d{12}");

            foreach (Match m in matchCollection)
            {
                // Process your code for each match
            } 
```

# html - 如何在 xmlt 中隐藏和显示 html 表的行

> ID：16129033
> 
> 赞同：0
> 
> 时间：2013-04-21T07:49:08.583
> 
> 标签：html, xml, xslt

我想弄清楚如何隐藏我的 xslt 样式表中的行。我创建了一个 XSLT 样式表，显示每一行可用......但我想拥有它，以便在加载 xml 时隐藏一些行。

这就是 xslt（xml 样式表）的样子。

```
<?xml version="1.0" encoding="ISO-8859-1"?>
    <xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

    <xsl:template match="/Catalogue">
     <html>
     <body>
        <xsl:for-each select="Tales">
        <xsl:if test="Talent != ''">
            <table border="0" width="550">
                <tr>
                    <td bgcolor="#A0A0A0" width="80%"><b><xsl:value-of select="Tale"/></b></td>
                    <td bgcolor="#A0A0A0" width="20%" align="center"><xsl:value-of select="Cost"/>
                    <xsl:text>  -  </xsl:text>
                    <xsl:value-of select="Type"/></td>
                 </tr>
                <tr>
                <xsl:if test="Prereq != ''">
                    <td colspan="2" bgcolor="#C0C0C0"><xsl:value-of select="Prereq"/></td>
                </xsl:if>   
                </tr>
                <tr>
                <xsl:if test="Action != ''">
                    <td colspan="2" bgcolor="#E0E0E0"><xsl:value-of select="Action"/></td>
                </xsl:if>
                </tr>
                <tr>
                <xsl:if test="Description != ''">
                    <td colspan="2" bgcolor="#EBEBEB"><xsl:value-of select="Description"/></td>
                </xsl:if>
                </tr>
            </table>
               <br/>  <br/>
        </xsl:if>
     </xsl:for-each>
     </body>
     </html>
    </xsl:template>
    </xsl:stylesheet> 
```

我想知道如何在页面打开时隐藏包含 Prereq、Action 和 description 的表格行，然后通过按下按钮或 + 链接来显示这些行。然后如果再次单击隐藏。

我已经看到一些教程显示正在使用 javascript 完成，但是一旦我尝试添加此代码，xml 数据就不再显示。

任何帮助将不胜感激。

更新：这就是 xml 的样子

```
<?xml version="1.0"?>
    <?xml-stylesheet href="bloodandguts.xsl" type="text/xsl"?>
<Catalogue>
<Tales>
<Talent>Training</Talent>
<Cost>1</Cost>
<Type>Any</Type>
<Prereq></Prereq>
<Action>Passive</Action>
<Description>Confers proficiency of a single type of training</Description>
</Tales>
// then lots more <Tales></Tales>
</Catalogue> 
```

更新：

这就是我添加到我的 xslt 中的方式......但由于某种原因它阻止我的 xml 文件显示任何内容

```
<?xml version="1.0" encoding="ISO-8859-1"?>
    <xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <script type ="text/javascript" src="jquery.js" ></script>
    <xsl:template match="/Catalogue">
     <html>
     <body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T09:32:27.930

只是为了给您一些帮助以继续，或澄清您的问题。

在您的示例中添加一些 javascript 应该没问题。例如，我使用 jQuery，即使对于这样一个简单的示例来说没有必要。

*   `<header>`如有必要，在 html 中添加 javascript 库：

    ```
     <script type ="text/javascript" src="jquery.js" ></script> 
    ```

*   将 id 或类添加到您想要隐藏并稍后显示的行中。

    ```
    <tr id="test1" style="display:none"> 
    ```

*   将 onclick 处理程序添加到标题行。

    ```
    <td bgcolor="#A0A0A0" width="80%">
        <div onclick="$('#test1').show()">+</div>
        <b>
            <xsl:value-of select="Tale"/>
        </b>
    </td> 
    ```

请注意，这仅显示如何将 javascript (jquery) 添加到您的示例中。这只会显示一个隐藏的行，并且只适用于一个 `<Tales>`条目，因为 html 中的 id 应该是唯一的。因此，您可以从 xslt 创建唯一 id，也可以将一个类添加到您的动态行并从您的 javascript 处理程序中搜索它们。

更新：

```
<?xml version="1.0" encoding="iso-8859-1"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:template match="/Catalogue">
        <html>
            <header>
            <script type ="text/javascript" src="jquery.js" ></script>
            </header>
            <body>
                <xsl:for-each select="Tales">
                    <xsl:if test="Talent != ''">
                        <table border="0" width="550">
                            <tr>
        <td bgcolor="#A0A0A0" width="80%">
            <div onclick="$('#test1').show()">+</div>
            <b>
                <xsl:value-of select="Tale"/>
            </b>
        </td>
                                <td bgcolor="#A0A0A0" width="20%" align="center">
                                    <xsl:value-of select="Cost"/>
                                    <xsl:text>  -  </xsl:text>
                                    <xsl:value-of select="Type"/>
                                </td>
                            </tr>
                            <tr >
                                <xsl:if test="Prereq != ''">
                                    <td colspan="2" bgcolor="#C0C0C0">
                                        <xsl:value-of select="Prereq"/>
                                    </td>
                                </xsl:if>
                            </tr>
                            <tr id="test1" style="display:none">
                                <xsl:if test="Action != ''">
                                    <td colspan="2" bgcolor="#E0E0E0">
                                        <xsl:value-of select="Action"/>
                                    </td>
                                </xsl:if>
                            </tr>
                            <tr>
                                <xsl:if test="Description != ''">
                                    <td colspan="2" bgcolor="#EBEBEB">
                                        <xsl:value-of select="Description"/>
                                    </td>
                                </xsl:if>
                            </tr>
                        </table>
                        <br/>
                        <br/>
                    </xsl:if>
                </xsl:for-each>
            </body>
        </html>
    </xsl:template>
</xsl:stylesheet> 
```

# regex - 正则表达式匹配以 A 开头的单词和行中的最后一个单词

> ID：16129037
> 
> 赞同：-1
> 
> 时间：2013-04-21T07:49:51.713
> 
> 标签：regex, dictionary

我想将正则表达式应用于字典文本格式，如下所示：

```
[aidwulf] s zool vrsta hijene (Proteles cristata) Aron's beard

[earanzrod] s bot *ivizma (Ver- bascum Thapsus) Abacca

[a'baid'on] vi biti na pomoći, stajati uz *ok abide with 
```

我需要两个正则表达式。首先，我需要一个正则表达式来匹配以字母 Aa 开头的最后一行之前的单词中的每个字母 Aa。在我的示例中，在第一个示例中将匹配**Aaron's**中的**A**，在第三个示例中匹配**a** in **abide**。

 ******第二个正则表达式将匹配行中的每个最后一个单词（包括连字符的双单词复合词）和以星号开头的单词。在我的示例中，此表达式将匹配单词**beard**、**Abacca**、**,**作为行中的最后一个单词，以及***ok**、***ivizma**作为以星号开头的单词。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T08:00:19.643

第一个正则表达式：

```
\bA(?=\S*[ \t]+\S+$) 
```

（打开“不区分大小写”和“^$ 换行符匹配”选项）

第二个正则表达式：

```
\S+$|(?<=^|[ \t])\*\S+ 
```

（打开“^$ 换行符匹配”选项）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T08:01:53.480

第一个正则表达式：

我猜你想要以最后一个单词开头`a`和**之前**的单词。

如果我是对的，这就是你要找的

```
\b[aA]\w+\s+[^\s]+$ 
```

或者

```
\b[aA](?=\w+\s+[^\s]+$) 
```

或者

```
(?<=\s)[aA](?=\w+\s+[^\s]+$) 
```

或者

```
(?<=^|\s)[aA](?=\w+\s+[^\s]+$) 
```

* * *

第二个正则表达式：

```
 [^\s]+$ 
```******

# java - 为什么当我增加最大堆大小时最大线程数会减少？

> ID：16129038
> 
> 赞同：17
> 
> 时间：2013-04-21T07:50:01.540
> 
> 标签：java, multithreading, memory, heap-memory

该测试显示了可以在 Java 中创建的最大线程数

```
 System.out.println("Max memory  " + Runtime.getRuntime().maxMemory() / 1024 / 1024 + "M");
    for (int i = 0;; i++) {
        Thread t = new Thread() {
            public void run() {
                try {
                    Thread.sleep(10000);
                } catch (InterruptedException e) {
                }
            };
        };
        try {
            t.start();
        } catch (Error e) {
            System.out.println("Max threads " + i);
            e.printStackTrace();
            System.exit(1);
        }
    } 
```

当我使用默认堆大小（256M）运行它时，我得到

```
Max memory  247M
Max threads 2247
java.lang.OutOfMemoryError: unable to create new native thread
    at java.lang.Thread.start0(Native Method)
    at java.lang.Thread.start(Thread.java:691)
    at test.Test1.main(Test1.java:19) 
```

当我将最大堆大小增加到 512M 我得到

```
Max memory  494M
Max threads 1906
... 
```

当我将最大堆大小增加到 1024M 我得到

```
Max memory  989M
Max threads 1162
... 
```

也就是说，更多的堆内存更少的线程。这是为什么？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-21T07:58:03.183

每个线程都需要一个堆栈。分配给堆的内存越多，留给堆栈的内存就越少。

*如果您使用的是 32 位 JVM，这将特别严重，因为该进程对于所有内容*（代码、堆、堆栈等）的地址空间将不超过 4GB 。我无法在我的 64 位机器上重现此行为，其中“最大线程”保持不变，无论我为堆分配多少内存。

值得注意的是，许多操作系统允许您调整堆栈的大小。在 Unix 上，这是使用`ulimit -s`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T07:54:17.947

我猜想增加堆大小（并使用全部）会降低操作系统可用于创建新线程的内存量，因此它不能像以前那样创建尽可能多的线程。

# delphi - 如何移除 MDI 客户端窗口的凹陷内边缘？

> ID：16129042
> 
> 赞同：12
> 
> 时间：2013-04-21T07:50:35.743
> 
> 标签：delphi, mdi, delphi-xe3

前几天，我开始开发我的新项目。应该有一个 MDI 表单，上面有一些子表单。但是当我开始开发时，我遇到了一个问题：当主窗体变成MDI窗体时，它在内部绘制了一个可怕的边框（斜角）。我不能把它拿走。您可以在屏幕截图中看到这种情况：

![http://s18.postimg.org/k3hqpdocp/mdi_problem.png](https://i.stack.imgur.com/Gr8tp.png)

相反，MDI-Child 表格绘制时没有相同的斜面。

该项目包含两个表单，Form1 和 Form2。Form1 是一个主要的 MDI 表单。

Form1源代码：

```
object Form1: TForm1
  Left = 0
  Top = 0
  Caption = 'Form1'
  ClientHeight = 346
  ClientWidth = 439
  Color = clBtnFace
  Font.Charset = DEFAULT_CHARSET
  Font.Color = clWindowText
  Font.Height = -11
  Font.Name = 'Tahoma'
  Font.Style = []
  FormStyle = fsMDIForm
  OldCreateOrder = False
  PixelsPerInch = 96
  TextHeight = 13
end 
```

Form2源代码：

```
object Form2: TForm2
  Left = 0
  Top = 0
  Caption = 'Form2'
  ClientHeight = 202
  ClientWidth = 331
  Color = clBtnFace
  Font.Charset = DEFAULT_CHARSET
  Font.Color = clWindowText
  Font.Height = -11
  Font.Name = 'Tahoma'
  Font.Style = []
  FormStyle = fsMDIChild
  OldCreateOrder = False
  Visible = True
  PixelsPerInch = 96
  TextHeight = 13
end 
```

**请告诉我如何才能使这个斜面远离主窗体。**

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-04-21T08:36:18.143

绘制边框是因为 MDI 客户端窗口具有扩展窗口样式[`WS_EX_CLIENTEDGE`](http://msdn.microsoft.com/en-gb/library/windows/desktop/ff700543.aspx#WS_EX_CLIENTEDGE)。这种风格是这样描述的：

> 窗口有一个边缘凹陷的边框。

但是，我第一次尝试删除该样式的简单尝试失败了。例如，您可以尝试以下代码：

```
procedure TMyMDIForm.CreateWnd;
var
  ExStyle: DWORD;
begin
  inherited;
  ExStyle := GetWindowLongPtr(ClientHandle, GWL_EXSTYLE);
  SetWindowLongPtr(ClientHandle, GWL_EXSTYLE,
    ExStyle and not WS_EX_CLIENTEDGE);
  SetWindowPos(ClientHandle, 0, 0,0,0,0, SWP_FRAMECHANGED or 
    SWP_NOACTIVATE or SWP_NOMOVE or SWP_NOSIZE or SWP_NOZORDER);
end; 
```

这段代码确实删除了`WS_EX_CLIENTEDGE`. 但是您看不到任何视觉变化，如果您使用 Spy++ 之类的工具检查窗口，您将看到 MDI 客户端窗口保留`WS_EX_CLIENTEDGE`.

那么，什么给了？事实证明，MDI 客户端窗口的窗口过程（在 VCL 代码中实现）正在强制显示客户端边缘。这会覆盖您为删除样式所做的任何尝试。

有问题的代码如下所示：

```
procedure ShowMDIClientEdge(ClientHandle: THandle; ShowEdge: Boolean);
var
  Style: Longint;
begin
  if ClientHandle <> 0 then
  begin
    Style := GetWindowLong(ClientHandle, GWL_EXSTYLE);
    if ShowEdge then
      if Style and WS_EX_CLIENTEDGE = 0 then
        Style := Style or WS_EX_CLIENTEDGE
      else
        Exit
    else if Style and WS_EX_CLIENTEDGE <> 0 then
      Style := Style and not WS_EX_CLIENTEDGE
    else
      Exit;
    SetWindowLong(ClientHandle, GWL_EXSTYLE, Style);
    SetWindowPos(ClientHandle, 0, 0,0,0,0, SWP_FRAMECHANGED or 
      SWP_NOACTIVATE or SWP_NOMOVE or SWP_NOSIZE or SWP_NOZORDER);
  end;
end;
....
procedure TCustomForm.ClientWndProc(var Message: TMessage);
....
begin
  with Message do
    case Msg of
      ....
      $3F://!
        begin
          Default;
          if FFormStyle = fsMDIForm then
            ShowMDIClientEdge(ClientHandle, (MDIChildCount = 0) or
              not MaximizedChildren);
        end; 
```

因此，您只需要覆盖此`$3F`消息的处理。

这样做：

```
type
  TMyMDIForm = class(TForm)
  protected
    procedure ClientWndProc(var Message: TMessage); override;
  end;

procedure TMyMDIForm.ClientWndProc(var Message: TMessage);
var
  ExStyle: DWORD;
begin
  case Message.Msg of
  $3F:
    begin
      ExStyle := GetWindowLongPtr(ClientHandle, GWL_EXSTYLE);
      ExStyle := ExStyle and not WS_EX_CLIENTEDGE;
      SetWindowLongPtr(ClientHandle, GWL_EXSTYLE, ExStyle);
      SetWindowPos(ClientHandle, 0, 0,0,0,0, SWP_FRAMECHANGED or 
        SWP_NOACTIVATE or SWP_NOMOVE or SWP_NOSIZE or SWP_NOZORDER);
    end;
  else
    inherited;
  end;
end; 
```

最终结果如下所示：

![在此处输入图像描述](https://i.stack.imgur.com/ZdPaC.png)

注意上面的代码没有调用默认的窗口过程。我不确定这是否会导致其他问题，但其他 MDI 行为很可能会受到影响。因此，您可能需要实施功能更强大的行为补丁。希望这个答案为您提供使您的应用程序按照您希望的方式运行所需的知识。

* * *

我在考虑如何实现一个全面的解决方案，以确保为`$3F`消息调用默认窗口过程，无论该消息是什么。由于默认窗口过程存储在私有字段中，因此实现这一目标并非易事`FDefClientProc`。这使得它很难到达。

我想您可以使用类助手来破解私有成员。但我更喜欢不同的方法。我的方法是让窗口过程保持原样，并将 VCL 代码对`SetWindowLong`. 每当 VCL 尝试`WS_EX_CLIENTEDGE`为 MDI 客户端窗口添加 时，挂钩代码都会阻止该样式。

实现如下所示：

```
type
  TMyMDIForm = class(TForm)
  protected
    procedure CreateWnd; override;
  end;

procedure PatchCode(Address: Pointer; const NewCode; Size: Integer);
var
  OldProtect: DWORD;
begin
  if VirtualProtect(Address, Size, PAGE_EXECUTE_READWRITE, OldProtect) then
  begin
    Move(NewCode, Address^, Size);
    FlushInstructionCache(GetCurrentProcess, Address, Size);
    VirtualProtect(Address, Size, OldProtect, @OldProtect);
  end;
end;

type
  PInstruction = ^TInstruction;
  TInstruction = packed record
    Opcode: Byte;
    Offset: Integer;
  end;

procedure RedirectProcedure(OldAddress, NewAddress: Pointer);
var
  NewCode: TInstruction;
begin
  NewCode.Opcode := $E9;//jump relative
  NewCode.Offset := NativeInt(NewAddress)-NativeInt(OldAddress)-SizeOf(NewCode);
  PatchCode(OldAddress, NewCode, SizeOf(NewCode));
end;

function SetWindowLongPtr(hWnd: HWND; nIndex: Integer; dwNewLong: LONG_PTR): LONG_PTR; stdcall; external user32 name 'SetWindowLongW';

function MySetWindowLongPtr(hWnd: HWND; nIndex: Integer; dwNewLong: LONG_PTR): LONG_PTR; stdcall;
var
  ClassName: array [0..63] of Char;
begin
  if GetClassName(hWnd, ClassName, Length(ClassName))>0 then
    if (ClassName='MDIClient') and (nIndex=GWL_EXSTYLE) then
      dwNewLong := dwNewLong and not WS_EX_CLIENTEDGE;
  Result := SetWindowLongPtr(hWnd, nIndex, dwNewLong);
end;

procedure TMyMDIForm.CreateWnd;
var
  ExStyle: DWORD;
begin
  inherited;
  // unless we remove WS_EX_CLIENTEDGE here, ShowMDIClientEdge never calls SetWindowLong
  ExStyle := GetWindowLongPtr(ClientHandle, GWL_EXSTYLE);
  SetWindowLongPtr(ClientHandle, GWL_EXSTYLE, ExStyle and not WS_EX_CLIENTEDGE);
end;

initialization
  RedirectProcedure(@Winapi.Windows.SetWindowLongPtr, @MySetWindowLongPtr); 
```

* * *

或者，如果您更喜欢使用私有成员类帮助程序破解的版本，看起来像这样：

```
type
  TFormHelper = class helper for TCustomForm
    function DefClientProc: TFarProc;
  end;

function TFormHelper.DefClientProc: TFarProc;
begin
  Result := Self.FDefClientProc;
end;

type
  TMyMDIForm = class(TForm)
  protected
    procedure ClientWndProc(var Message: TMessage); override;
  end;

procedure TMyMDIForm.ClientWndProc(var Message: TMessage);
var
  ExStyle: DWORD;
begin
  case Message.Msg of
  $3F:
    begin
      Message.Result := CallWindowProc(DefClientProc, ClientHandle, Message.Msg, Message.wParam, Message.lParam);
      ExStyle := GetWindowLongPtr(ClientHandle, GWL_EXSTYLE);
      ExStyle := ExStyle and not WS_EX_CLIENTEDGE;
      SetWindowLongPtr(ClientHandle, GWL_EXSTYLE, ExStyle);
      SetWindowPos(ClientHandle, 0, 0,0,0,0, SWP_FRAMECHANGED or
        SWP_NOACTIVATE or SWP_NOMOVE or SWP_NOSIZE or SWP_NOZORDER);
    end;
  else
    inherited;
  end;
end; 
```

最后，我感谢你提出的非常有趣的问题。探索这个问题当然很有趣！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T19:12:23.787

你可以使用我的开源组件[`NLDExtraMDIProps`](http://www.nldelphi.com/forum/showthread.php?t=24700)（可以从[这里](https://github.com/NLDelphi/NLDExtraMDIProps)下载），它有一个`ShowClientEdge`属性。[（代码与大卫的](https://stackoverflow.com/a/16129354/757830)类似，虽然我是拦截`WM_NCCALCSIZE`，而不是`$3F`）。

除此之外，该组件还具有以下方便的 MDI 属性：

*   `BackgroundPicture`：来自磁盘、资源或 DFM 的图像，将在客户端窗口的中心绘制。
*   `CleverMaximizing`：通过双击标题栏重新排列多个 MDI 客户端，从而将其*最大化*到 MDI 表单中的最大可用空间。
*   `ShowScrollBars`：当将客户端拖到 MDI 窗体扩展之外时，打开或关闭 MDI 窗体的滚动条。

# ios - 单击 UICollectionViewCell 按钮并更改单元格上的文本

> ID：16129050
> 
> 赞同：1
> 
> 时间：2013-04-21T07:52:04.697
> 
> 标签：ios, uibutton, uicollectionviewcell

单击按钮时，我想更改按钮（`UIButton`在里面`UICollectionViewCell`）文本。如何获得单元格和按钮？我有一个自定义单元格。

```
[cell.shareButton addTarget:self action:@selector(shareAction:) forControlEvents:UIControlEventTouchUpInside];

-(void)shareAction:(UIButton*)button {
      NSIndexPath *indexPath = [self.collectionView indexPathForItemAtPoint:            [self.collectionView convertPoint:button.center fromView:button.superview]];
      NSLog(@"row %d",indexPath.row);
     NSLog(@"section %d",indexPath.section);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T08:02:38.033

UIButton 是发送者：

```
- (void)shareAction:(UIButton *)button {
    // the 'button' parameter is your required button.
    // now let's get the cell
    UICollectionViewCell *cell = button.superview.superview.
    // this is the cell
} 
```

'cell' 和 'button' 变量是按下的按钮，它是单元格。

# google-app-engine - 安全地删除字段索引

> ID：16129051
> 
> 赞同：2
> 
> 时间：2013-04-21T07:52:09.997
> 
> 标签：google-app-engine, objectify

我正在将应用程序引擎应用程序的数据模型移动到 Objectify，我注意到 Objectify 的实体将实体的所有属性默认指定为未索引，这对我来说很有意义，因为它会更快写入并且更少空间将被用完。

但是 GAE 默认（至少在我编写应用程序时）是默认在所有字段上创建字段结尾，因此我的所有字段都被索引。并且有数十万行。

我真的只需要索引这些字段的一小部分，我想将它们设置为未索引。我想在objectify中将这些字段设置为@Unindexed，但是如何删除数据存储区中已有的索引数据？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T14:20:29.017

要添加或删除单属性索引，请更改元数据（添加/删除 @Index 和 @Unindex），然后加载+保存实体。您可能希望为此使用 map/reduce。

# .htaccess - 在 mod rewrite 的 URL 中添加连字符

> ID：16129057
> 
> 赞同：1
> 
> 时间：2013-04-21T07:52:56.300
> 
> 标签：.htaccess, hyphen

我很好奇为什么它不能工作并寻找解决方案。

以下是在我的 htaccess

```
RewriteRule ^field/category/([a-zA-Z0-9\-]+)&([a-zA-Z0-9\-]+)$ field.php?cat[]=$1&cat[]=$2 
```

这很好用，网址将是 domain.com/field/category/Ball&Drinks

如何将 & 更改为 - 并使其成为 domain.com/field/category/Ball-Drinks

我试试

```
RewriteRule ^field/category/([a-zA-Z0-9\-]+)-([a-zA-Z0-9\-]+)$ field.php?cat[]=$1&cat[]=$2 
```

它不起作用。- 字符不被视为文字。任何人都可以帮忙吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T07:56:42.740

您必须转义 - 字符：

```
RewriteRule ^field/category/([a-zA-Z0-9\-]+)\-([a-zA-Z0-9\-]+)$ field.php?cat[]=$1&cat[]=$2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-27T15:27:02.273

我知道这是一个老问题，但我只花了一个小时才弄清楚，所以我想我应该分享答案：

将连字符替换为`[\-]`以使 RewriteRule 将其视为字符串文字。

所以最终的代码是：`^field/category/([a-zA-Z0-9\-]+)[\-]([a-zA-Z0-9\-]+)$ field.php?cat[]=$1&cat[]=$2`

# winapi - 将指针投射到/来自 LRESULT

> ID：16129059
> 
> 赞同：2
> 
> 时间：2013-04-21T07:53:02.693
> 
> 标签：winapi, casting, lparam

我正在寻找有关此 Windows 编程习语的确认，我认为许多不同类型的“句柄”不仅作为 LRESULT 对象而且作为 lParam 和 wParam 对象传递，这是否正确？

我猜，只要我们知道 LRESULT 或 lParam/wParam 中的“什么”类型的句柄，我们就可以将其转换回它。

例如

```
case WM_CREATE:
   ...
   //create a window
   //lParam is the CREATESTRUCT for new window created here
   ....
   return lParam;
...
...
CREATESTRUCT cStruct = (CREATESTRUCT)SendMessage(hwnd, msg /*WM_CREATE*/);
cStrcut.cx;//this is the width of the new window? 
```

正确的？

这是“正确的”吗？任何人都可以为我和 StaticOverflow 社区提供关于这种技术/习语的简短论文吗？

问题：我们应该只返回 lParam（或只返回 wParam）值吗？有没有应该知道的陷阱？LRESULT 和 LPARAM 都是 LONG_PTR 类型，它们是 32 位或 64 位整数。我不是一个经验丰富的 C 程序员，但似乎这些整数只是被用作“缓冲区”，程序员后来在使用之前将其转换为“真实”类型......听起来准确吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T07:58:25.247

这种编程风格是“糟糕的”，因为在编译时无法知道某些东西到底是什么*。*也就是说，由于 WIN32 API 是一个 C API（而不是说 C++），当一个人想要使用相同的方法签名传递*任何*类型的结构时，没有什么可以做的。

因此，API 设计团队决定使用两个参数来处理这个问题。一个 32 位`LPARAM`和一个 16 位`WPARAM`.

使用 Win32 C API 时，您只需要确保正确阅读文档并确保您正在转换到文档*所说*的正确内容。

因此，要回答您的问题，您是正确的-但这只是因为您别无选择。为了在这里完成，MFC 出现了（针对 C++ 程序员），但这并不被认为是一个好的面向对象的库——它更像是一个包装器。还有其他的做得更好的（例如wxWidgets）。

# html - 如何去除透明色（不透明度）

> ID：16129062
> 
> 赞同：4
> 
> 时间：2013-04-21T07:53:39.340
> 
> 标签：html, css, transparency, opacity

我有以下代码：

html...

```
<div id="solidcolor">
    <div class="transcolor">transcolor
        <div class="notranscolor">some text</div>
    </div>
</div> 
```

css..

```
#solidcolor{
    background: url("http://i45.tinypic.com/o5aycp.gif") repeat; 
    width: 200px; 
    height: 200px;
}
.transcolor{
    background: blue; 
    opacity: 0.4; 
    height: 100px;
}
.notranscolor{
    background: red; /* I want this color to solid color not transparent color*/
} 
```

**[演示](http://jsfiddle.net/m2Eas/2/)**

**编辑说明**我不能使用 rgba() 方法来设置它的背景颜色，因为我必须设置线性渐变颜色。

**编辑1**

即使在应用绝对定位之后，我也无法得到适当的解决方案。但是下一个想法我想用 calc() 方法来做到这一点，但它不会退出。任何想法？

**编辑2**

正如@rokburgar 所说的那样，即使应用绝对位置，我也无法解决我的问题。但我想将不透明度设置为 1.25 我知道这应该是 0 到 1 但他已经声明 0.4 * 1.0 = 0.4 像这样 0.8 * 1.25 = 1 那为什么它不起作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T08:03:11.220

好吧，由于 opactiy 是继承的，因此您必须分别指定不同元素的不透明度。您可以使用的一种方法是在单独的 中仅定义透明彩色文本`span`，如下所示：

HTML

```
<div id="solidcolor">
    <div>
        <span class="transcolor">some transparent text</span>
        <div>some normal text</div>
    </div>
</div> 
```

CSS

```
.transcolor {
    opacity: 0.4;
} 
```

* * *

* * *

您可以使用的另一种方法是单独的 div，如下所示：

HTML

```
<div id="solidcolor">
    <div>
        <div class="transcolor">some transparent text</div>
        <div>some normal text</div>
    </div>
</div> 
```

CSS

```
.transcolor {
    opacity: 0.4;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T08:06:50.337

不透明度是继承的，不能简单地删除。人们会期望您可以重置子元素的透明度。

你在这里所做的意味着：

```
.notranscolor -> opacity: 0.4 * 1.0 = 0.4 
```

解决方案：

绝对定位子div的内容。

[透明技巧](http://css-tricks.com/non-transparent-elements-inside-transparent-elements/)

# javascript - JavaScript - 将随机数/变量插入动态超链接？

> ID：16129063
> 
> 赞同：0
> 
> 时间：2013-04-21T07:53:43.550
> 
> 标签：javascript, html, random, hyperlink

这是我的第一个 HTML JavaScript，我想通过 JavaScript 生成一个包含半随机单词和数字的随机 HTML 链接来搜索随机的知识/神秘文章。

例如：

*   google search "Wiki Born (Random number 1400-1850)" >>> 查找随机发布的黑暗时代传记

*   google 搜索“无法解释的（随机数 1900 1930）”>>> 查找随机无法解释的事件

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T08:50:06.497

如果要[在页面加载时生成带有随机数的随机链接](http://jsfiddle.net/samliew/pyeWK/)：

```
var searches = [
    ['Wiki Born', 1400, 1850, 'post dark ages biography'],
    ['unexplained', 1900, 1930, 'unexplained event']
];
var google = "http://www.google.com/search?q=";

function getRand(min, max) {
    return min + Math.floor(Math.random() * (max-min));
}

window.onload = function() {
    // get random search item
    var item = searches[getRand(0, searches.length)];

    // get random number based on the selected item
    var randnum = getRand(item[1], item[2]);

    // put together the google link, replace spaces with + sign
    var searchlink = (google + item[0] + ' ' + randnum).replace(/\s+/g, '+');
    console.log(searchlink);

    // put together the html tag
    var html = '<a href="'+searchlink+'" target="_blank">Find random '+item[3]+'</a>';
    console.log(html);

    document.body.innerHTML = html;
}; 
```

如果要[在页面加载时显示所有带有自己随机数的链接](http://jsfiddle.net/samliew/Z4f9x/)，请添加一个循环：

```
// for each search item
for(i=0; i<searches.length; i++) {
    var item = searches[i];

.... 
```

如果您希望[每个链接每次点击时生成不同的数字](http://jsfiddle.net/samliew/s8Zjz/)，我们可以采取不同的方法：

```
<script>
function getRand(min, max) {
    return min + Math.floor(Math.random() * (max-min));
}

window.onload = function() {
    // get all links in the #randomlinks div
    var links = document.getElementById('randomlinks').getElementsByTagName('a');

    // for each search item
    for(i=0; i<links.length; i++) {

        // set a click handler
        links[i].onclick = function() {

            // get random number based on data attributes
            var min = parseInt(this.getAttribute('data-min'), 10);
            var max = parseInt(this.getAttribute('data-max'), 10);
            var randnum = getRand(min, max);

            // append random number to end of link
            this.href = this.href.replace(/\+[0-9]*$/, '+'+randnum);
        };
    }
};
</script>
<div id="randomlinks">
    <a href="http://www.google.com/search?q=Wiki+Born+" data-min="1400" data-max="1850" target="_blank">Find random post dark ages biography</a><br>
    <a href="http://www.google.com/search?q=unexplained+" data-min="1900" data-max="1930" target="_blank">Find random unexplained event</a>
</div> 
```

# linux - 在从源代码编译的 Ubuntu 12.04 LTS 64 位上运行的 wkhtmltopdf 上的方形字体问题

> ID：16129066
> 
> 赞同：3
> 
> 时间：2013-04-21T07:54:03.497
> 
> 标签：linux, wkhtmltopdf

我使用 Qt 8.4 从源代码编译 wkhtmltopdf，一切都很好，但 PDF 字体的输出是方形的，
我基本上从网络转换 html 页面，例如：

```
./wkhtmltopdf --page-size A4 --disable-internal-links --disable-external-links 
```

我想我扫描了我在 google 中找到的每个帮助链接，但没有任何结果。我在这里想念什么？也做了这个脚本

```
#!/bin/sh
echo $*
export HOME="$PWD"
export LD_LIBRARY_PATH="$PWD/lib/"
./wkhtmltopdf --page-size A4 --disable-internal-links --disable-external-links $1 $2  2>/$1
#exec $@ 2>/dev/null
#exec $@ 2>&1 # debug mode 
```

# r - 列表的内部实现是什么？

> ID：16129068
> 
> 赞同：19
> 
> 时间：2013-04-21T07:54:10.427
> 
> 标签：r, list

我很好奇一个类型的对象是如何`list`实现的。是吗

1.  一个动态向量，当它满时会自动增加它的大小。
2.  一个链表，其中追加一个项目`O(1)`，但访问一个项目是`O(n)`。
3.  具有`O(log(n))`项目访问权限的树结构。
4.  具有`O(1)`项目访问权限的哈希表。

我很好奇，因为列表可以有键值对，使它们看起来像哈希表，但元素是有序的，看起来像一个向量。

**编辑**：因为`length(list(runif(1e4)))`是 1，所以当将元素附加到列表时，看起来它每次都复制整个列表，这使得它非常慢：

但是访问速度比向量慢得多：

```
z1 <- runif(1e4)
system.time({
  for(i in 1:10000) z1[[1 + i]] <- 1
}) 
```

输出：

```
user  system elapsed 
0.060   0.000   0.062 
```

但：

```
z1 <- list(runif(1e4))
system.time({
  for(i in 1:10000) z1[[1 + i]] <- 1
}) 
```

输出：

```
user  system elapsed 
1.31    0.00    1.31 
```

初始化一个包含 10000 个元素的列表：

```
z1 <- as.list(runif(1e4))
system.time({
  for(i in 1:10000) z1[[1 + i]] <- 1
}) 
```

输出：

```
user  system elapsed 
0.060   0.000   0.065 
```

对于键和值访问：

```
z1 <- list()
for(i in 1:10000){key <- as.character(i); z1[[key]] <- i} 
system.time({
  for(i in 1:10000) x <- z1[["1"]]
})
system.time({
  for(i in 1:10000) x <- z1[["10000"]]
}) 
```

输出是：

```
user  system elapsed 
0.01    0.00    0.01 
user  system elapsed 
1.78    0.00    1.78 
```

它不是`O(1)`访问，所以它不是哈希表。我的结论是它不是一个动态数组，因为附加项目每次都会导致内存访问；它不是哈希表，因为按键访问不是`O(1)`。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-21T08:52:04.533

列表本质上只是 R 对象的数组 ( `SEXP`)。调整大小会导致整个数据的副本，并且名称查找是线性的。

或者，您可以使用在内部使用哈希表的环境。

# python - 使用scrapy进行分页

> ID：16129071
> 
> 赞同：6
> 
> 时间：2013-04-21T07:54:28.870
> 
> 标签：python, request, web-scraping, scrapy

我正在尝试抓取这个网站： [http ://www.aido.com/eshop/cl_2-c_189-p_185/stationery/pens.html](http://www.aido.com/eshop/cl_2-c_189-p_185/stationery/pens.html)

我可以获取此页面中的所有产品，但是如何在页面底部发出“查看更多”链接的请求？

到目前为止，我的代码是：

```
rules = (
    Rule(SgmlLinkExtractor(restrict_xpaths='//li[@class="normalLeft"]/div/a',unique=True)),
    Rule(SgmlLinkExtractor(restrict_xpaths='//div[@id="topParentChilds"]/div/div[@class="clm2"]/a',unique=True)),
    Rule(SgmlLinkExtractor(restrict_xpaths='//p[@class="proHead"]/a',unique=True)),
    Rule(SgmlLinkExtractor(allow=('http://[^/]+/[^/]+/[^/]+/[^/]+$', ), deny=('/about-us/about-us/contact-us', './music.html',  ) ,unique=True),callback='parse_item'),
) 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-21T17:01:49.650

首先，你应该看看这个关于如何处理抓取 ajax 动态加载的内容的线程： [Can scrapy 用于从使用 AJAX 的网站中抓取动态内容？](https://stackoverflow.com/questions/8550114/can-scrapy-be-used-to-scrape-dynamic-content-from-websites-that-are-using-ajax)

因此，单击“查看更多”按钮会触发 XHR 请求：

```
http://www.aido.com/eshop/faces/tiles/category.jsp?q=&categoryID=189&catalogueID=2&parentCategoryID=185&viewType=grid&bnm=&atmSize=&format=&gender=&ageRange=&actor=&director=&author=&region=&compProductType=&compOperatingSystem=&compScreenSize=&compCpuSpeed=&compRam=&compGraphicProcessor=&compDedicatedGraphicMemory=&mobProductType=&mobOperatingSystem=&mobCameraMegapixels=&mobScreenSize=&mobProcessor=&mobRam=&mobInternalStorage=&elecProductType=&elecFeature=&elecPlaybackFormat=&elecOutput=&elecPlatform=&elecMegaPixels=&elecOpticalZoom=&elecCapacity=&elecDisplaySize=&narrowage=&color=&prc=&k1=&k2=&k3=&k4=&k5=&k6=&k7=&k8=&k9=&k10=&k11=&k12=&startPrize=&endPrize=&newArrival=&entityType=&entityId=&brandId=&brandCmsFlag=&boutiqueID=&nmt=&disc=&rat=&cts=empty&isBoutiqueSoldOut=undefined&sort=12&isAjax=true&hstart=24&targetDIV=searchResultDisplay 
```

返回`text/html`接下来的 24 个项目。注意这个`hstart=24`参数：第一次点击“查看更多”它等于 24，第二次 - 48 等等。这应该是你的救命稻草。

现在，您应该在您的蜘蛛中模拟这些请求。推荐的方法是实例化 scrapy 的[Request](http://doc.scrapy.org/en/latest/topics/request-response.html)对象，提供回调，您将在其中提取数据。

希望有帮助。

# visual-studio - “添加现有项目”功能已禁用 - 如何启用/为什么会发生？

> ID：16129072
> 
> 赞同：11
> 
> 时间：2013-04-21T07:54:37.030
> 
> 标签：visual-studio

自 v2008 以来我没有使用 MSVS（但我从来不擅长它）。我说的版本是 2012 年。我主要在 Emacs 中工作，但对于团队来说，我必须创建 MSVS 项目并将它们保持在可工作的状态。现在，一旦我创建了一个文件，MSVS 就不允许我将它添加到解决方案中（单击“解决方案资源管理器”中的“项目”-> 上下文菜单-> 选择“添加”->“添加现有项目”是灰色的。）

这曾经在两天前工作。从那时起，我通过 NuGet 安装了一个插件，该插件允许将自定义 mime 类型添加到用于 ASP.NET 项目的 MSVS 中的 IIS。这就是我所做的所有更改。

我该如何解决这个问题？为什么这可能发生？禁用此功能的可能原因是什么？

**编辑**

抱歉，在“调试”项目时似乎无法做到这一点 - 不知何故，我必须在没有注意到它的情况下进行调试会话。当我重新启动 Studio 时，它提示我打开调试会话。重新启动 Studio 后，功能又恢复了。尽管如此，在调试期间无法添加文件还是很奇怪......或者我可能遗漏了一些东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-08-09T12:03:16.057

我今天遇到了同样的问题。解决方案是在 Visual Studio 中保留调试模式。然后之前灰色的菜单点“添加新项目”项目可用。

顺便说一句：您使用 Shift+F5 离开 Visual Studio (2013) 中的调试模式或单击 gui 中的红色方块。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-10-17T08:15:20.733

当您处于调试模式时，添加现有选项被禁用，请停止调试然后尝试添加现有项目。

# python - 我的文档的 TF-IDF 产量为 0

> ID：16129076
> 
> 赞同：0
> 
> 时间：2013-04-21T07:55:43.363
> 
> 标签：python, tf-idf

我从 yebrahim 那里得到了这个 tfidf，不知何故，我的输出文档为结果产生了所有 0。这有什么问题吗？输出的例子是 hippo 0.0 hipper 0.0 hip 0.0 hint 0.0 后见之明 0.0 hill 0.0 hilarious 0.0

谢谢您的帮助

```
# a list of (words-freq) pairs for each document
global_terms_in_doc = {}
# list to hold occurrences of terms across documents
global_term_freq    = {}
num_docs            = 0
lang        = 'english'
lang_dictionary     = {}
top_k               = -1
supported_langs     = ('english', 'french')
from django.utils.encoding import smart_str, smart_unicode
# support for custom language if needed
def loadLanguageLemmas(filePath):
    print('loading language from file: ' + filePath)
    f = open(filePath)
    for line in f:
        words = line.split()
        if words[1] == '=' or words[0] == words[1]:
            continue
        lang_dictionary[words[0]] = words[1]

def remove_diacritic(words):
    for i in range(len(words)):
        w = unicode(words[i], 'ISO-8859-1')
        w = unicodedata.normalize('NFKD', w).encode('ASCII', 'ignore')
        words[i] = w.lower()
    return words

# function to tokenize text, and put words back to their roots
def tokenize(text):

    text = ' '.join(text)
    tokens = PunktWordTokenizer().tokenize(text)

    # lemmatize words. try both noun and verb lemmatizations
    lmtzr = WordNetLemmatizer()
    for i in range(0,len(tokens)):
    #tokens[i] = tokens[i].strip("'")
        if lang != 'english':
            if tokens[i] in lang_dictionary:
                tokens[i] = lang_dictionary[tokens[i]]
        else:
            res = lmtzr.lemmatize(tokens[i])
            if res == tokens[i]:
                tokens[i] = lmtzr.lemmatize(tokens[i], 'v')
            else:
                tokens[i] = res

    # don't return any single letters
    tokens = [t for t in tokens if len(t) > 1 and not t.isdigit()]
    return tokens

def remove_stopwords(text):

    # remove punctuation
    chars = ['.', '/', "'", '"', '?', '!', '#', '$', '%', '^', '&',
            '*', '(', ')', ' - ', '_', '+' ,'=', '@', ':', '\\', ',',
            ';', '~', '`', '<', '>', '|', '[', ']', '{', '}']
    for c in chars:
        text = smart_str(text.replace(c, ' '))

    text = text.split()

    import nltk
    if lang == 'english':
        stopwords = nltk.corpus.stopwords.words('english')
    else:
        stopwords = open(lang + '_stopwords.txt', 'r').read().split()
    content = [w for w in text if w.lower().strip() not in stopwords]
    return content

# __main__ execution

import sys, re, math, unicodedata
from optparse import OptionParser

parser = OptionParser(usage='usage: %prog [options] input_file')
parser.add_option('-l', '--language', dest='language',
    help='language to use in tokenizing and lemmatizing. supported\
            languages: {english, french}', metavar='LANGUAGE')
parser.add_option('-k', '--top-k', dest='top_k',
    help='output only terms with score no less k')
parser.add_option('-m', '--mode', dest='mode',
    help='display mode. can be either "both" or "term"')
(options, args) = parser.parse_args()

if options.language:
    if options.language not in supported_langs:
        print 'only ', supported_langs, ' are supported in this version.'
        quit()
    if options.language != 'english':
        lang = options.language
        loadLanguageLemmas(options.language + '_lemmas.txt')
if options.top_k:
    top_k = int(options.top_k)
display_mode = 'both'
if options.mode:
    if options.mode == 'both' or options.mode == 'term':
        display_mode = options.mode
else:
    parser.print_help()

if not args:
    parser.print_help()
    quit()
reader = open(args[0])
all_files = reader.read().splitlines()

num_docs  = len(all_files)

from nltk.stem.wordnet import WordNetLemmatizer
from nltk.tokenize.punkt import PunktWordTokenizer

print('initializing..')
for f in all_files:

    # local term frequency map
    terms_in_doc = {}

    doc_words    = open(f).read().lower()
    #print 'words:\n', doc_words
    doc_words    = remove_stopwords(doc_words)
    #print 'after stopwords:\n', doc_words
    doc_words    = tokenize(doc_words)
    #print 'after tokenize:\n', doc_words

    #quit()

    # increment local count
    for word in doc_words:
        if word in terms_in_doc:
            terms_in_doc[word] += 1
        else:
            terms_in_doc[word]  = 1

    # increment global frequency
     for (word,freq) in terms_in_doc.items():
        if word in global_term_freq:
            global_term_freq[word] += 1
        else:
            global_term_freq[word]  = 1

     global_terms_in_doc[f] = terms_in_doc

print('working through documents.. ')
for f in all_files:

    writer = open(f + '_final', 'w')
    result = []
    # iterate over terms in f, calculate their tf-idf, put in new list
    max_freq = 0;
    for (term,freq) in global_terms_in_doc[f].items():
        if freq > max_freq:
            max_freq = freq
    for (term,freq) in global_terms_in_doc[f].items():
        idf = math.log(float(1 + num_docs) / float(1 + global_term_freq[term]))
        tfidf = float(freq) / float(max_freq) * float(idf)
        result.append([tfidf, term])

    # sort result on tfidf and write them in descending order
    result = sorted(result, reverse=True)
    for (tfidf, term) in result[:top_k]:
        if display_mode == 'both':
            writer.write(term + '\t' + str(tfidf) + '\n')
        else:
            writer.write(term + '\n')

print('success, with ' + str(num_docs) + ' documents.') 
```

# python - 我应该如何评论python代码？

> ID：16129077
> 
> 赞同：0
> 
> 时间：2013-04-21T07:55:54.757
> 
> 标签：python, comments

我经常在开源或“专业”python 代码中看到评论——比如 webapp2 或 webob，它们看起来很间隔。评论似乎超过了代码。我注意到个别开发人员也在他们自己的应用程序中这样做。大间距，大量注释，然后每隔一段时间就写几行代码。

我想我喜欢这种风格，它确实感觉更有条理。现在我是 python 中的大型项目，我想知道是否应该像我看到其他人那样组织一个包含代码和注释的大型项目。我认为它可能会使它更具可读性和可维护性，也可能使我成为一个更好的编码器——因为事情会更清晰。

**只是想：这个问题在代码审查上更好吗？*听就是服从***

目前我只是这样评论，例如：

```
 #U - Idempotent. b-atching requests 
    # which can be PUT, DELETE or GET. 
    #@control.access.collector_or_owner        
    def patch(s,*a,**k):
            s.resolve(*a,**k)
            for mod in s.requested_modifications:
                    method = mod.get('method') or 'PUT'
                    point = s.current_point+mod.get('point') or ''
                    body = mod.get('body') or ''
                    s.say('Will execute %s on %s for %s\n' % (method,point,body))
                    # create the in-app request
                    mod_request = webapp2.Request.blank(point)
                    mod_request.body = str(body)
                    mod_request.method = method
                    mod_request.app = s.app
                    # then find the handler and report
                    execute_tuple = s.app.router.match(mod_request)
                    mod_request.route,mod_request.route_args,mod_request.route_kwargs = execute_tuple
                    handler = mod_request.route.handler
                    if handler not in s.app.router.handlers:
                            s.app.router.handlers[handler] = handler = webapp2.import_string(handler)
                    else:
                            handler = s.app.router.handlers[handler]
                    s.say('Will execute %s on %s for %s via %s\n' % (method,point,body,execute_tuple))
                    # then execute
                    in_app_response = webapp2.Response()
                    handler = handler(mod_request,in_app_response)
                    handler.dispatch() 
                    s.say('Response is %s\n' % (in_app_response)) 
```

它只关注“要做什么”，但没有解释其他任何事情。我确信有更好的方法，但我不只是想出我自己更好的方法，我想要圣人的智慧。

我已经阅读了[Style Guide PEP——](http://www.python.org/dev/peps/pep-0008/#comments)*它*很有帮助，但是对于大型复杂的 python 项目来说，提炼评论作者的智慧的东西比“写英语时，Strunk and White apply”更详细一点是必需的.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-21T08:20:18.700

免责声明：我不是圣人。

Python 本身可读性很强，但我经常看到缺少间距会降低其可读性。我主要使用间距/注释来显示代码中的结构，偶尔用于解释棘手的代码块。对于后一种情况，通常最好重组代码，尽可能减少复杂性，而不是深入研究冗长的文档。

鉴于 Google 的编程专业知识，他们的[Python 样式指南（评论）](https://google-styleguide.googlecode.com/svn/trunk/pyguide.html#Comments)通常是一个很好的资源。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-21T09:59:20.710

记录函数应该在[docstring](http://www.python.org/dev/peps/pep-0008/#documentation-strings)中完成。您对函数的评论对我来说是不可理解的。文档字符串可能如下所示：

```
def patch(s,*a,**k):
    """Patch a ...

    Arguments:
    s - A ... object
    Any additional arguments are handed to s.resolve().

    Returns:
    bla

    Raises:
    ValuesError when s is not ...
    """
    s.resolve(*a,**k)
    for mod in s.requested_modifications:
        ... 
```

代码中的内联注释不是很有帮助，因为它们只描述*了*代码的作用，有效地复制了它。

相反，使用注释确实描述*了为什么*代码在不立即显而易见的情况下会做某事。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-21T08:16:12.933

不是直接的答案，但我觉得它与问题有关。

在他的开创性著作*Code Complete*中，Steve McConnell 提倡首先编写粗略的伪代码来解释*您*想要完成的任务，使用来自问题领域的词语（例如“客户”而不是“客户记录列表”）。然后细化伪代码，直到“感觉只写代码比细化它更容易”（从记忆中解释）。

现在注释掉伪代码并在每行伪代码下面填写真实代码，并将伪代码留在原处，因为它现在可以很好地用作解释代码*意图*的注释。

# javascript - 在加载外部图像之前检查浏览器缓存

> ID：16129084
> 
> 赞同：2
> 
> 时间：2013-04-21T07:56:44.210
> 
> 标签：javascript, jquery

我想让 javascript 访问 cilent 的缓存以检查他们是否加载了图像，我可以这样做还是会给我相同的来源错误？

没有的网站也会发生什么

ccess-Control-Allow-Origin 设置为全部？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T08:01:25.207

[您可以使用此功能（从this question](https://stackoverflow.com/questions/7844982/using-image-complete-to-find-if-image-is-cached-on-chrome)复制）来测试图像是否在缓存中。

```
function cached(url) {
    var test = document.createElement("img");
    test.src = url;
    return test.complete || test.width+test.height > 0;
} 
```

事实是，一旦浏览器缓存了图像，您就不需要从缓存中加载图像，因为浏览器会为您做所有事情。

因此，只需插入一个普通的 . 让浏览器完成它的工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T08:01:23.027

不确定您要做什么，但大多数浏览器都会为您解决这个问题。

这意味着在请求完整图像之前，它通常会向服务器发送缓存图像的“最后修改日期”，`304 unmodified`如果缓存资源没有更改，服务器将回复状态。

有关更多信息，请查看此链接：

[http://betterexplained.com/articles/how-to-optimize-your-site-with-http-caching/](http://betterexplained.com/articles/how-to-optimize-your-site-with-http-caching/)

> 1.  浏览器：嘿，给我 logo.png，但前提是它自 2007 年 3 月 16 日以来被修改过。
> 2.  服务器：（查看修改日期）
> 3.  服务员：嘿，你走运了！自该日期以来，它没有被修改过。你有最新版本。
> 4.  浏览器：太好了！我将向用户展示缓存的版本。

# spring - 错误集成jsf +spring +hibernate +managedbean

> ID：16129086
> 
> 赞同：0
> 
> 时间：2013-04-21T07:56:56.387
> 
> 标签：spring, hibernate, jsf, managed-bean

我有使用 jsf 2.0 和 spring 3.0 +hibernate 4 的 web 应用程序问题是：jsf managed beans can't use spring beans using dependency injection 还有我的配置文件：

Rq 当我像 @ManagedBean(name="userMB") @RequestScoped 那样更改 Mybean 并放入 @ManagedProperty(value="#{Service}") 它在 jsf 页面上被识别但有错误

```
package com.ardia.service;
import java.util.List;
import com.ardia.model.Composant;

public interface ComposantService {

    void inserComposant(Composant comp);

    Composant getComposantById(int compId);

    Composant getComposant(String compname);

    List<Composant> getComposants();

} 
```

这是我的服务

```
package com.ardia.service;
import java.util.List;
import org.hibernate.Criteria;
import org.hibernate.SessionFactory;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Service;
import org.springframework.transaction.annotation.Transactional;
import com.ardia.model.Composant;

@Service("compService")
@Transactional
public class ComposantImp implements ComposantService {

    @Autowired
    SessionFactory sessionFactory;

    @Override
    public void inserComposant(Composant comp) {
        // TODO Auto-generated method stub

        sessionFactory.getCurrentSession().saveOrUpdate(comp);
    }

    @Override
    public Composant getComposantById(int compId) {
        // TODO Auto-generated method stub
        return (Composant) sessionFactory.
                  getCurrentSession().
                  get(Composant.class, compId);
    }

    @Override
    public Composant getComposant(String compname) {
        // TODO Auto-generated method stub
        return null;
    }

    @Override
    @SuppressWarnings("unchecked")
    public List<Composant> getComposants() {
        // TODO Auto-generated method stub
        Criteria criteria = sessionFactory.
                  getCurrentSession().
                  createCriteria(Composant.class);
                return criteria.list();
    }

} 
```

这是我的托管 Bean

```
package ardia.beans;
import java.io.Serializable;
import java.util.List;
import javax.annotation.PostConstruct;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.context.annotation.Scope;
import org.springframework.stereotype.Component;
import com.ardia.model.Composant;
import com.ardia.service.ComposantService;

@Component("compBean")
@Scope("session")
public class CoposantBean implements Serializable{

@Autowired
private ComposantService service;

private List<Composant> list;

@PostConstruct
public void init()
{
    list=service.getComposants();

}

public List<Composant> getList() {
    return list;
}

public void setList(List<Composant> list) {
    this.list = list;
}
} 
```

这是我的应用程序上下文春天

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:aop="http://www.springframework.org/schema/aop"
    xmlns:context="http://www.springframework.org/schema/context"
    xmlns:tx="http://www.springframework.org/schema/tx"
    xmlns:p="http://www.springframework.org/schema/p"
    xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
        http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-3.1.xsd
        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.1.xsd
        http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.1.xsd">

   <context:component-scan 
    base-package="ardia.beans" />
  <context:component-scan 
    base-package="com.ardia.service" />
<!-- Data Source Declaration -->
    <bean id="DataSource" class="org.apache.commons.dbcp.BasicDataSource" >
        <property name="driverClassName" value="org.postgresql.Driver" />
        <property name="url" value="jdbc:postgresql:PFE" />
        <property name="username" value="postgres" />
        <property name="password" value="root" />

    </bean>

    <!-- Session Factory Declaration -->
    <bean id="SessionFactory" class="org.springframework.orm.hibernate4.LocalSessionFactoryBean">
        <property name="dataSource" ref="DataSource" />
        <property name="packagesToScan" value="com.ardia.model" />
        <property name="hibernateProperties">
            <props>
                <prop key="hibernate.dialect">org.hibernate.dialect.PostgreSQLDialect</prop>
                <prop key="hibernate.show_sql">true</prop>
            </props>
        </property>

    </bean>

 <tx:annotation-driven transaction-manager="transactionManager"/>

 <bean id="transactionManager"
    class="org.springframework.orm.hibernate4.HibernateTransactionManager" >
    <property name="sessionFactory" ref="SessionFactory"/>
  </bean>

</beans> 
```

这个 web.xml 和 facec.conf.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<faces-config version="2.0" xmlns="http://java.sun.com/xml/ns/javaee"
 xmlns:xi="http://www.w3.org/2001/XInclude"
 xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-facesconfig_2_0.xsd">
 <application>
  <el-resolver>org.springframework.web.jsf.el.SpringBeanFacesELResolver</el-resolver>
 </application>
</faces-config> 
```

人脸配置

```
 xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd">
 <context-param>
  <param-name>contextConfigLocation</param-name>
  <param-value>classpath:application.xml</param-value>
 </context-param>
 <context-param>
  <description>State saving method: 'client' or 'server' (=default). See JSF Specification 2.5.2</description>
  <param-name>javax.faces.STATE_SAVING_METHOD</param-name>
  <param-value>default</param-value>
 </context-param>
 <context-param>
  <param-name>javax.servlet.jsp.jstl.fmt.localizationContext</param-name>
  <param-value>resources.application</param-value>
 </context-param>
 <listener>
  <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
 </listener>
 <listener>
  <listener-class>org.springframework.web.context.request.RequestContextListener</listener-class>
 </listener>
 <listener>
  <listener-class>com.sun.faces.config.ConfigureListener</listener-class>
 </listener>
 <servlet>
  <servlet-name>Faces Servlet</servlet-name>
  <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
  <load-on-startup>1</load-on-startup>
 </servlet>
 <servlet-mapping>
  <servlet-name>Faces Servlet</servlet-name>
  <url-pattern>*.jsf</url-pattern>
 </servlet-mapping>
 <welcome-file-list>
  <welcome-file>/index.jsp</welcome-file>
 </welcome-file-list>
</web-app> 
```

并且当我尝试使用 datatable .the managedbean 列出它时，它无法识别

```
 <p:dataTable id="cars" var="fab" value=***"#{here is not figure*** paginator="true" rows="10"  > 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T08:42:36.490

持有 spring 立体类型 bean 的类（这里你的支持 bean 持有它们）应该通过 Spring 工厂实例化，但支持 bean 是由 JSF 框架创建的。只需使用 Spring EL Resolvers for JSF 来克服这个问题。他是一个相关的[讨论](http://forum.springsource.org/showthread.php?86577-Spring-3-JSF-2)和[文档](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/web-integration.html#jsf-springbeanfaceselresolver)

此外，请确保您在通过 web.xml 加载的 Web 应用程序上下文中配置了 spring bootstrap

```
<!-- Spring Bootstrap -->
<listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener>
<context-param>
    <param-name>contextClass</param-name>
    <param-value>org.springframework.web.context.support.AnnotationConfigWebApplicationContext</param-value>
</context-param>
<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>
        package1.where.springbeans.exist
        package2.where.springbeans.exist
    </param-value>
</context-param> 
```

# c++ - C++ 获取我自己的 dll 的 CLSID

> ID：16129088
> 
> 赞同：3
> 
> 时间：2013-04-21T07:57:36.860
> 
> 标签：c++, dll, clsid

我想从我的 dll 中检索我自己的 dll 的 CSLID。此 CLSID 在我的应用程序的 .rgs 文件中声明。

我正在创建很多 dll，每个 dll 都有不同的 CLSID，对我来说很重要的是我可以轻松地动态检索它。

谁能告诉我该怎么做？

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T14:14:41.507

DLL 没有 CLSID，类有。获取特定类的 guid 的一种简单方法是使用它的名称，它是在您使用向导添加类时自动创建的。假设您添加了一个名为“Example”的类，您可以`CLSID_Example`在代码中使用。另一种方法是使用 __uuidof 关键字，`__uuidof(Example)`在您的代码中编写，当您使用 #import 指令导入类型库时，该关键字也适用于客户端代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T08:04:00.510

1.  用于`GetModuleFileName`获取 dll 的路径 - [运行时获取 DLL 路径](https://stackoverflow.com/questions/6924195/get-dll-path-at-runtime)
2.  然后从 typelib 中获取 CLSID - [给定一个 COM DLL，提取所有类 CLSID 和相应的接口名称](https://stackoverflow.com/questions/4651869/given-a-com-dll-extract-all-classes-clsid-and-corresponding-interface-name)

# python - 如何在龙卷风中创建多个 add_callback？

> ID：16129090
> 
> 赞同：3
> 
> 时间：2013-04-21T07:57:43.260
> 
> 标签：python, tornado, addcallback

我正在尝试在龙卷风主循环中添加多个回调。但是当我运行这段代码时：

```
def task(num):
    print 'task %s' % num

if __name__ == '__main__':
    for i in range(1,5):
        tornado.ioloop.IOLoop.instance().add_callback(callback=lambda: task(num=i))
    tornado.ioloop.IOLoop.instance().start() 
```

我得到输出 5 次：'task 5'，而不是 task 1.. task 5。当我像这样更改**main**时：

```
tornado.ioloop.IOLoop.instance().add_callback(callback=lambda: task(1))
tornado.ioloop.IOLoop.instance().add_callback(callback=lambda: task(2))
tornado.ioloop.IOLoop.instance().add_callback(callback=lambda: task(3))
tornado.ioloop.IOLoop.instance().add_callback(callback=lambda: task(4)) 
```

一切正常（我在输出中得到 task1-task5）。在第一种情况下我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T09:36:23.037

也许在 JS 中也有同样的问题？看看这个答案：[循环内的 JavaScript 闭包——简单实用的例子](https://stackoverflow.com/questions/750486/javascript-closure-inside-loops-simple-practical-example)

“问题是每个匿名函数内的变量 i 都绑定到函数外的同一个变量。”

尝试简单的测试：

```
def task(num):
    print 'task %s' % num

def create_task(num):
    tornado.ioloop.IOLoop.instance().add_callback(callback=lambda: task(num))

if __name__ == '__main__':
    for i in range(1,5):
        create_task(i)
    tornado.ioloop.IOLoop.instance().start() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-04-20T22:19:02.903

将您的 lambda 包装到**functools.partial()**解决“指针问题”的函数中 `IOLoop.instance().add_callback(callback=functools.partial(task, i*10))`

**tl;博士;**

这是一个带有“指针问题”BUG的例子：

```
def task(num):
    print(num)

for i in range(1, 6):
    print ("poop {0}".format(i))
    IOLoop.instance().add_callback(callback=lambda: task(i))
IOLoop.instance().start() 
```

在上面的代码示例中，`i`将是一个指向`range()`当前迭代值的内存指针。它从 1 变为 2，然后变为 3、4、5。

Tornado 的 add_callback() 异步函数立即将控制权返回给主程序，使所有 5`task()`次函数调用几乎同时执行。并且此时`i`已经得到了 的值`5`。

要快速解决此问题，请使用`funtools.partial`函数而不是 lambda 并研究差异；）

这是无 BUG 的示例：

```
IOLoop.instance().add_callback(callback=functools.partial(task, i*10)) 
```

# c# - 均匀随机数组

> ID：16129091
> 
> 赞同：-4
> 
> 时间：2013-04-21T07:57:46.790
> 
> 标签：c#, java, random

人们。我需要生成完全一致的二维数组，例如：

`1 3 2 3 4 6 4 3 2 4`，即邻居之间的差异很小。

```
1 2 1

2 3 2

3 4 2 
```

我怎么能意识到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T08:12:07.117

此 Java 示例适用于从 1 到 6 的数字：

```
int[][] myArray = new int[3][];

for (int a = 0; a < 3; a++) {
    myArray[a] = new int[3];
    for (int b = 0; b < 3; b++) {
        myArray[a][b] = ((int)(Math.random() * 6) + 1);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T08:52:08.993

嗨，如果你想要一点差异（1 行元素之间只有 1 到 3 的差异）。即 1 2 1 2 4 6 1 3 4 等我认为这将是更好的解决方案。

```
int[][] myArray = new int[3][];

for (int a = 0; a < 3; a++) {
    myArray[a] = new int[3];
    int random=(int)Math.random() * 10;
    for (int b = 0; b < 3; b++) {
        int negativecounter=(int)Math.random()*2;
        /*multiplier will decide next number smaller or bigger randomly*/
        int multiplier=1;
        if(negativecounter%2==0){
           multiplier=-1;
        }
        myArray[a][b] = (random +(multiplier) (Math.random()*2 +1));
    }
 } 
```

如果您需要任何澄清，请告诉我

# list - 合金链表中的插入和删除

> ID：16129092
> 
> 赞同：1
> 
> 时间：2013-04-21T07:57:48.587
> 
> 标签：list, alloy

我使用合金创建了一个简单版本的链表。现在我想创建一个可以在其中执行插入和删除的链表。我刚开始用合金编码。现在我在使用函数和实用程序等复杂操作时遇到了麻烦。如果我能得到一些关于如何使用实用程序和函数以及如何在合金中实际执行插入和删除的示例。我会很感激你的帮助。

```
sig node{}

sig linked
{
  ele:set node,
  link:ele->lone ele,   
  head:lone ele
}{
  node = ele
  all x:ele | x in head.*link && head not in x.link && #x.link <=1 
}

fact{
  all  l:linked| all  e:l.ele| e->e not  in l.link //no self loop
}

fact
{
  all  l:linked|no e : l.ele | (e  in e.^(l.link )) //acyclic
}

pred a (l:linked,x:node)
{
  x in l.ele    
}

run a for 6 node,1 linked 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T13:43:05.993

您的方法有点令人困惑，它可能会简单得多。我会这样做

```
sig Node{
    next : lone Node
}

one sig Head in Node {}                     -- head node is still a node

fact{
    all n : Node | n not in n.^next         -- no cycles
    no next.Head                            -- no node points to Head
    all n : Node - Head | some next.n       -- for all other nodes, there has to be someone pointing to them
}

run {} for 10 
```

该模型是静态的，为了使模型动态，您需要了解状态的概念。我建议您阅读由 Alloy 的作者撰写的[Software Abstractions 。](http://softwareabstractions.org/)链表的动态方法对您来说太复杂了，此时您无法理解，您应该做一些更简单的练习。

状态的基本思想是（根据书中的[通讯录](http://en.wikibooks.org/wiki/Modeling_from_A_to_Z/Modeling_principles/A_is_for_Alloy_analyzer#Simple_model_of_the_address_book)例子练习）：

静态示例：

```
sig State {}

abstract sig Target {}

sig Email extends Target {}

abstract sig Name extends Email {
    name : set State,
    addr : Target some -> State
}

sig Group, Alias extends Name {}

fact {
    all a : Alias | lone a.addr
    no n : Name | n in n.^addr
}

run {} 
```

动态的例子，在局部状态成语中（=表达状态的一种方式，还有一个全局状态成语和一个事件成语）。看看谓词

```
open util/ordering[State]
sig State {}

abstract sig Target {}

sig Email extends Target {}

abstract sig Name extends Email {
    name : set State,
    addr : Target -> State
}

sig Group, Alias extends Name {}

fact {
    all s : State {
        all a : Alias & name.s | lone a.addr.s
        no n : name.s | n in n.^(addr.s)
        addr.s in name.s -> Target
        addr.s :> Name in Name -> name.s
    }
}

run {} for 3 but exactly 1 State

-- adding a name n, for a given pre state s and post state s'
pred addName [n : Name, s,s' : State] {

    -- the name must not exist in the pre state
    n not in name.s    

    -- the relation names in the post state is what is was
    -- in the pre state in addition to the new name
    name.s' = name.s + n  

    -- the address relation stays the same    
    addr.s' = addr.s
}

run addName for 3 but 2 State

pred addTarget [n : Name, t : Target, s,s' : State] {
    t not in n.addr.s
    name.s' = name.s
    addr.s' = addr.s + n->t
}

run addTarget for 3 but 2 State 
```

您还可以查看以下[幻灯片](http://alloy.mit.edu/alloy/tutorials/day-course/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T15:11:09.930

您不需要使模型“动态”来模拟插入和删除等操作。查看这个主题（[双向链表在合金中](https://stackoverflow.com/questions/15651231/doubly-linked-list-in-alloy)），我在其中给出了如何为双向链表建模反向操作的答案，然后让我们知道这是否不够有用。您将看到的基本思想是创建一个谓词，该谓词接受前状态和后状态的参数，并断言两者之间的关系。例如，您的插入谓词可能看起来像

```
// l - list in the pre-state
// x - node to be inserted
// l' - list in the post-state
pred insert (l: linked, x: node, l': linked) {
  l'.ele = l.ele + x
  ...
} 
```

# javascript - 尝试将 EJS 与 Node.js 一起使用

> ID：16129093
> 
> 赞同：0
> 
> 时间：2013-04-21T07:57:58.510
> 
> 标签：javascript, node.js, ejs

我正在尝试使用 EJS（通常使用 Jade）设置我的第一个应用程序，并且我已经完成了所有设置并且我的页面正在加载，我按照教程进行操作，这是我的布局

```
<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf8">
        <title> 
            <%= title %>
        </title>
        <link href="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.1/css/bootstrap-combined.min.css" rel="stylesheet">
        <script src="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.1/js/bootstrap.min.js"></script>

         <!-- HTML5 shim, for IE6-8 support of HTML elements -->
         <!--[if lt IE 9]>
             <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
         <![endif]-->

    </head>
    <body>
        <%- body %>

    </body>
</html> 
```

这是我的主页

```
<div class='title'>
    <%= title %>
</div> 
```

但是当我加载主页并查看页面源代码时，我看到的只是主页元素，我看不到`html, body, head, title`任何这些东西。不知道为什么，这是我的 app.js

```
app.set('views', __dirname + '/views');
app.set('view engine', 'ejs'); 
```

我的 2 个文件是`layout.ejs, index.ejs`

提前致谢！

以下：[http ://robdodson.me/blog/2012/05/31/how-to-use-ejs-in-express/](http://robdodson.me/blog/2012/05/31/how-to-use-ejs-in-express/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T08:34:08.807

最新版本的 Express (3.x) 不再支持布局（请参阅此[迁移页面](https://github.com/visionmedia/express/wiki/Migrating-from-2.x-to-3.x#view-system-changes)）。

相反（迁移页面也建议），您可以使用[ejs-locals](https://github.com/RandomEtc/ejs-locals)来取回该功能。的 GitHub 页面`ejs-locals`提供了一些简单的示例，如何让布局与 Express 3 一起使用。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-12-11T16:32:51.737

app.set('视图引擎', 'ejs');

将此添加到 app.js

# django - Django 邮件程序导入

> ID：16129096
> 
> 赞同：0
> 
> 时间：2013-04-21T07:58:12.183
> 
> 标签：django, django-templates, django-email

根据[django-mailer 上的文档](https://github.com/pinax/django-mailer/blob/master/docs/usage.txt)，要对我的所有电子邮件使用 django-mailer，我只需将其放入 settings.py 中：

```
EMAIL_BACKEND = "mailer.backend.DbBackend" 
```

我做到了。

但是当我实际尝试使用`django-templated-email`来发送我的电子邮件时，我收到了这个错误：

```
ImproperlyConfigured: Error importing email backend module mailer.backend: "No module named backend" 
```

我怎样才能解决这个问题？

**编辑**：

看起来邮件程序包内确实没有“后端”模块。这是否意味着文档不正确？我现在该怎么办; 找到另一个要使用的包？

![没有什么](https://i.stack.imgur.com/OBMQc.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T08:05:38.903

`backend.py`实际上， mailer 包中有文件，请参阅[github repo](https://github.com/pinax/django-mailer/tree/master/mailer)。尝试`django-mailer`直接从github重新安装。

# javascript - 当一些函数有几个ajax调用时，按顺序执行几个js函数

> ID：16129098
> 
> 赞同：0
> 
> 时间：2013-04-21T07:58:12.683
> 
> 标签：javascript, jquery, ajax, deferred

我正在尝试创建一组`function`（如下面的 App 对象），它们接受 preInit、Init、Load 函数并按顺序执行它们。例如：

```
var formOperation = App.preInit(function(){
//Some Code ...
})
.init(function(){
//Some Code Here...
})
.load(function(){
//Other Code Here...
}); 
```

问题是我根本不希望用户处理 Deferred 对象，我希望他们使用尽可能多的对象`ajax calls`。我不希望他们使用扩展为`jQuery like ajaxQueue`.

我能想到的唯一方法是`$.ajax calls`在调用它们之前获取它们的列表并在其中设置 Deferred 对象。

您知道如何在调用函数之前获取`ajax calls`in的列表吗？`function`或者你有什么其他建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T04:49:57.277

好吧，我想我已经找到了解决方案。`$.ajaxSetup()`有一个东西叫它`beforeSend`有延迟的对象传递给它！我可以创建一个数组并将延迟对象添加到其中。

```
var ajaxCalls = [{}];
        $.ajaxSetup($.ajaxSettings, {
            beforeSend: function (deferred) {

                ajaxCalls.push(deferred);
            },
            complete: function (xhr, textStatus) {
                if (ajaxCalls.length == 1) {
                    //Do Something...
                }
            }
        }); 
```

# paypal - 实时模式下的 PayPal 个人付款

> ID：16129105
> 
> 赞同：2
> 
> 时间：2013-04-21T07:58:56.717
> 
> 标签：paypal, paypal-adaptive-payments

我们的网站在 Sandbox 中运行良好。我们正在使用自适应支付来实现个人支付（直接从一个人到另一个人），现在我们想在实时模式下测试我们的功能。

但是，当我们阅读要上线的应用程序策略 ( [https://www.x.com/developers/paypal/documentation-tools/paypal-application-policies-and-guidelines](https://www.x.com/developers/paypal/documentation-tools/paypal-application-policies-and-guidelines) ) 时，我们惊讶地发现以下内容：

> 贝宝 - 申请政策
> 
> *   记录在案的商家/卖方必须是付款发件人（买方）和相关付款收件人（卖方）之间进行的每笔 PayPal 交易的主要收款人。

（我们像发件人一样使用一个人，并像主要收件人一样使用该人的朋友）

> *   不要使用 PayPal API 操作调用在印度、墨西哥、马来西亚、新加坡和台湾提供个人付款。

（我们在西班牙）

> *   请勿为通过 PayPal 服务提供的任何交易扩展个人付款或提供汇款服务。

那么，在实时模式下使用自适应支付（个人支付）有什么问题吗？

提前致谢。

# c - Flex“无法识别的错误”

> ID：16129107
> 
> 赞同：0
> 
> 时间：2013-04-21T07:59:02.433
> 
> 标签：c, regex, flex-lexer

在 flex 中编写令牌生成器时，我遇到了这个烦人的错误：“无法识别的规则”

我的代码是：

```
/* Keywords */

TYPE        int|double|bool|char
LOGICAL     if|else|for|foreach|do|while|switch|return
MACROWORD   import|define|ifndef|endif|elseif|udef
MACRO       "#"{MACROWORD}

KEYWORD     {TYPE}|{LOGICAL}|{MACRO}

/* Literals */

DIGIT       [0-9]
DIGITS      {DIGIT}+
OPT_FRAC    ("."{DIGITS})?
OPT_EXP     (E(+|-){DIGITS})?

NUMBER      {DIGITS}{OPT_FRAC}{OPT_EXP}

LETTER      [a-zA-Z]

/* Identifier */

ID          {LETTER}({LETTER}|{DIGIT})*

/* Operators */

OPERATOR    "+"|"-"|"*"|"/"|"^"|"=""="|"<""="|">""="|">"|"<"|"!""=""

%%

{KEYWORD}   printf("(Keyword, %s)\n", yytext);

{NUMBER}    printf("(Numeric Literal, %s)", yytext);

{ID}    printf("(Identifier, %s)", yytext);

{OPERATOR}  printf("(Operator, %s", yytext);

[ \n\t]     /* Ignore Whitespace */

"{"         printf("(L Bracket, %s)", yytext);

"}"         printf("(R Bracket, %s)", yytext);

"("         printf("(L Parens, %s)", yytext);

")"         printf("(R Parens, %s", yytext);

";"         printf("(Semicolon, %s", yytext);

%%

main()
{
    yylex();
} 
```

可悲的是，这只会导致：

"Scanner.lex:39: unrecognized rule" 重复**19 次**后面跟着一个实例：

“Scanner.lex:43：无法识别的规则”

第 39 行是：

```
{NUMBER}    printf("(Numeric Literal, %s)", yytext); 
```

第 43 行是：

```
{OPERATOR}  printf("(Operator, %s", yytext); 
```

我在互联网上搜索并[在 stackoverflow 上找到了这个答案](https://stackoverflow.com/questions/3243011/why-does-flex-say-this-is-an-unrecognized-rule)，其中建议在定义行的开头添加“^”，所以我将第 39 行引用（NUMBER）更改为：

```
NUMBER    ^{DIGITS}{OPT_FRAC}{OPT_EXP} 
```

什么都没做。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T08:26:15.270

吓坏了，因为`+`OPT_EXP 中没有任何内容`+`。（这是一个 RE `+`，而不是文字加号。）

您的 OPERATOR 定义有一个太多的双引号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T09:23:55.337

```
OPT_EXP     ([Ee][-+]{DIGITS})?
OPERATOR1   [-+*/=^><]
OPERATOR2   ==|<=|>=|==|!= 
```

如果我们只对运算符使用一个定义，就会有问题。原因是如果 flex 看到`<=`它会匹配什么？作为一个`<`然后一个`=`或作为一个`<=`整体？我不认为 lex 支持前瞻。出于这个原因，我决定`OPERATOR`分成两个定义`OPERATOR1`和`OPERATOR2`. 然后在规则部分你有**2条规则**

```
{OPERATOR2}  printf("(Operator, %s", yytext);
{OPERATOR1}  printf("(Operator, %s", yytext); 
```

我们知道 lex 会优先匹配最长的规则，所以在规则的情况下`<=`会`{OPERATOR2}`触发

*   注意 1：当我将`-`其作为字符类中的第一个字符时，例如`[-+*/]`，它被视为常规字符，而不是表示范围的特殊字符。`[+-*/]`例如，在 and 之间是错误的，表示and`-`之间的所有字符。`+``*``+``*`
*   注 2：我确定这`^`不是字符类`^`中的第一个字符，因为字符类中的第一个字符表示否定。`[^0-9]`例如，表示匹配除数字之外的所有字符。

# c# - 通过共享内存将 c++ char* 传递给 c#

> ID：16129113
> 
> 赞同：1
> 
> 时间：2013-04-21T07:59:44.150
> 
> 标签：c#, c++, shared-memory

对不起，可能是一个简单的问题，但我是共享内存的新手，并试图通过示例学习如何做事。

在 c++ 方面，我收到这样的一对：`const unsigned char * value, size_t length` 在 c# 方面，我需要有常规的 c# 字符串。使用共享内存最好的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T08:46:09.203

使用字符串并不容易。

如果是我，我会尝试以下方法：

1.只需获取字符串的副本。System.Text.Encoding.Default.GetString 可以从字节数组转换为字符串。

您可以尝试使用不安全的代码块（为此您可以使用指针类型）来执行以下操作：

(1) 创建一个字节数组，大小就是你的“长度”

字节[] buf = 新字节[长度];

(2) 将数据复制到数组

for(int i = 0; i < 长度; ++i) buf[i] = value[i];

(3) 获取字符串

string what_you_want = System.Text.Encoding.Default.GetString(buf);

2.写一个类，有一个属性“string what_you_want”，每次访问都会执行上面的过程。

首先，您应该首先使用 P/Invoke 功能来获取该对的值。

**编辑：这是一个例子。**

C++ 代码：

```
struct Pair {
    int length;
    unsigned char value[1024];
};

#include <windows.h>
#include <stdio.h>
int main()
{
    const char* s = "hahaha";
    HANDLE handle = CreateFileMappingW(INVALID_HANDLE_VALUE, NULL, PAGE_READWRITE, 0, sizeof(Pair), L"MySharedMemory");
    struct Pair* p = (struct Pair*) MapViewOfFile(handle, FILE_MAP_READ|FILE_MAP_WRITE, 0, 0, sizeof(Pair));
    if (p != 0) {
        p->length = lstrlenA(s);
        lstrcpyA((char*)p->value, s);
        puts("plz start c# program");
        getchar();
    } else
        puts("create shared memory error");
    if (handle != NULL)
        CloseHandle(handle);
    return 0;
} 
```

和 C# 代码：使用系统；使用 System.IO.MemoryMappedFiles；

```
class Program
{
    static void Main(string[] args)
    {
        MemoryMappedFile mmf = MemoryMappedFile.OpenExisting("MySharedMemory");
        MemoryMappedViewStream mmfvs = mmf.CreateViewStream();
        byte[] blen = new byte[4];
        mmfvs.Read(blen, 0, 4);
        int len = blen[0] + blen[1] * 256 + blen[2] * 65536 + blen[3] * 16777216;
        byte[] strbuf = new byte[len];
        mmfvs.Read(strbuf, 0, len);
        string s = System.Text.Encoding.Default.GetString(strbuf);
        Console.WriteLine(s);
    }
} 
```

举个例子。

您还可以添加错误检查部分。

# java - 带有括号的标准电话号码的电话号码的正则表达式

> ID：16129115
> 
> 赞同：5
> 
> 时间：2013-04-21T07:59:50.110
> 
> 标签：java, regex, eclipse

这是关于 Java 中 RegEx 的问题。我到处寻找，但找不到与我需要的相似的东西。另外，我花了几个小时自己尝试。

我在用 Java 编码的学校实验室的最后一部分。我使用 Eclipse 作为我的编译器。我已经使用 Swing 组件构建了一个会员应用程序，

我的字段之一是让用户输入 10 位数的电话号码。但是，我必须将此设置为 JFormatted 文本字段，以这种格式屏蔽文本框：“（###）###-####”。所以当程序加载时，那个文本框看起来像这样：“（ **_）****-* ___”*

 *现在，我需要做的就是有一个正则表达式来确保用户输入 10 位数字。但是，我需要它来处理我上面使用的掩码格式。这是我到目前为止所拥有的：

```
pattern = Pattern.compile("\\d{3}\\s\\d{3}-\\d{4}");
    matcher = pattern.matcher(phoneText.getText());
    if (!matcher.find())
    {
        phoneText.requestFocus();
        JOptionPane.showMessageDialog(null, "Phone entered incorrectly.  Phone should be:\n" +
                "10 numeric digits.",
                "A D D   E R R O R",JOptionPane.ERROR_MESSAGE);
        return;
    } 
```

我相信我已将正则表达式写入它接受掩码格式中的空格和破折号的位置，但我不知道如何包含括号。

编辑：根据 Andrew Thomas 的提示以正确的格式添加问题：

我需要在我的正则表达式中添加什么以包含已在格式化文本字段中的括号？

编辑2：问题已回答，但根据波西米亚提示添加示例，以便将来遇到此帖子的学生可以使用它。对不起，我是新手！

需要看起来像：

(123) 456-7890

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-21T08:03:36.153

您必须匹配`(`和`)`（围绕前 3 位数字）

将其更改为：

```
pattern = Pattern.compile("\\(\\d{3}\\)\\s\\d{3}-\\d{4}");
                           ^^^      ^^^ 
```

如您所见，我`\\`在之前添加了`(`和`)`。**为什么**？

有些字符有特殊含义。并且由于正则表达式是 Java 中的字符串，因此您需要将它们转义`\\`（在 Java 中表示单个`\`）。

双反斜杠*转义*特殊字符以抑制其特殊含义，就像告诉：

*“不要`(`当作**特殊**字符，当作普通字符`(`”*。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-21T08:05:00.710

您可以使用`\\(`和`\\)`使用括号，试试这个：

```
Pattern.compile("\\(\\d{3}\\)\\s\\d{3}-\\d{4}"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-28T09:29:36.950

这是一个快速的解决方案，当您需要在文本字段/电话号码字段中添加括号时，请注意这不是正则表达式，它基于 jquery

[http://ashfaqahmed.net/jquery-add-prefix-postfix-on-phone-number-field/](http://ashfaqahmed.net/jquery-add-prefix-postfix-on-phone-number-field/)*

# c# - 从后面的文本框中删除字符串

> ID：16129126
> 
> 赞同：4
> 
> 时间：2013-04-21T08:01:05.567
> 
> 标签：c#, string, textbox, keyboard, windows-phone

我在 C# 中有一个要求，我有一个文本框，其中的数字由`;`例如 分隔`(205)33344455;918845566778;`

现在，当用户按下`← Backspace`（删除数字）时，一次删除一个字符。我想一次删除整个号码。

所以当用户按下`←</kbd> the first time, the number will be highlighted i.e. if text is `(205)33344455;918845566778;`, the `918845566778;` part will be highlighted in say black, and when the user presses `←</kbd> again the whole number i.e. `918845566778;` will be deleted.``

那么是否可以在文本框中突出显示特定部分并删除整个数字？

我使用了一个`for`循环，如：

```
for{back=txtPhone.Text.Length;back<=txtPhone.Text.indexOf(';');back--) 
```

但我无法达到预期的结果。

对此的任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T08:46:22.087

有几种方法可以实现您想要的想法：

*   将文本框订阅到`Control.Keydown`将检查`←</kbd> button and perform the highlight up to the last delimiter (;) using `TextBox.SelectionLength` meaning a `← Backspace` will clear it.`

    ```
     private void textBox1_KeyDown(object sender, KeyEventArgs e)
        {
            if (e.KeyCode != Keys.Left)
                return;

            e.SuppressKeyPress = true;

            //Select up to previous delimeter (;) here
        } 
    ```

*   使用列表框（或类似的东西）在输入时存储分隔数据。这将允许用户选择他们需要的内容，并通过您提供的按钮将其删除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T09:06:02.233

你可以 ：

1.  **选择包含**光标的标记（即以;结尾的数字）（方法selectToken()）
2.  第二次按退格键时将其删除

* * *

示例：您的文本框包含 '(205)33344455; 918845566778；8885554443;'

在 9188455 和 66778 之间用鼠标左键单击；（第二个数字）

然后你按退格键

字符串 918845566778；被选中

您再次按退格键，该字符串将被删除

* * *

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;

namespace Remove_String_from_Text_Box_from_back
{
    public partial class Form1 : Form
    {
    //selects token that contains caret/cursor      
    private void selectToken() {
        string str0 = textBox1.Text;
        int caretPosition = textBox1.SelectionStart;
        int tokenEndsAtIndex = str0.IndexOf(';', caretPosition, (textBox1.Text.Length - caretPosition));
        string prefix = "";
        if (tokenEndsAtIndex == -1)
        {
            tokenEndsAtIndex = str0.IndexOf(';');
        }

        prefix = str0.Substring(0, tokenEndsAtIndex);
        int tokenStartsAtIndex = 0;
        tokenStartsAtIndex = prefix.LastIndexOf(';');
        if (!(tokenStartsAtIndex > -1)) { tokenStartsAtIndex = 0; } else { tokenStartsAtIndex++; }
        textBox1.SelectionStart = tokenStartsAtIndex;
        textBox1.SelectionLength = tokenEndsAtIndex - tokenStartsAtIndex + 1;//may be off by one

    }
 private void selectLastToken(string str0)
        {
            Regex regex = new Regex(@"([\d()]*;)$");
            var capturedGroups = regex.Match(str0);

            int idx0 = 0;
            if (capturedGroups.Captures.Count > 0)
            {
                idx0 = str0.IndexOf(capturedGroups.Captures[0].Value, 0);
                textBox1.Select(idx0, textBox1.Text.Length);
            }
        }
        public Form1()
        {
            InitializeComponent();
        }

        private void Form1_Load(object sender, EventArgs e)
        {
            textBox1.Text = "(205)33344455;918845566778;";
            textBox1.Select(0, 0);
        }

        //selects last token terminated by ;
        private void selectTextOnBackSpace()
        {
            string str0 = textBox1.Text;
            int idx0 = str0.LastIndexOf(';');
            if (idx0<0)
            {
                idx0 = 0;
            }
            string str1 = str0.Remove(idx0);
            int idx1 = str1.LastIndexOf(';');
            if (idx1 < 0)
            {
                idx1 = 0;
            }
            else
            {
                idx1 += 1;
            }
            textBox1.SelectionStart = idx1;
            textBox1.SelectionLength = str0.Length - idx1;
        }

        private void textBox1_KeyPress(object sender, KeyPressEventArgs e)
        {
            if (e.KeyChar == (char)Keys.Back )
            {
                if (textBox1.SelectionLength==0)
                {
                    selectToken();
                    e.Handled = true;
                }
                else
                {
                    e.Handled = false;
                }
            }
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T08:50:30.050

您可以实现您的要求，如下所示

```
private void textBox1_KeyPress(object sender, KeyPressEventArgs e)
{
    if (textBox1.Text.Length == 0) return;

    if ((e.KeyChar == (char)Keys.Back) && (textBox1.SelectionLength == 0))
    {
        textBox1.SelectionStart = Math.Max(0, textBox1.Text.Substring(0,textBox1.Text.Length-1).LastIndexOf(';'));
        if (textBox1.Text.Substring(textBox1.SelectionStart, 1) == ";") textBox1.SelectionStart++;
        textBox1.SelectionLength = textBox1.Text.Length-textBox1.SelectionStart ;
        e.Handled = true;
        return;
    }

    if ((e.KeyChar == (char)Keys.Back) && textBox1.SelectionLength >= 0)
    {
        textBox1.Text = textBox1.Text.Substring(0, textBox1.SelectionStart );
        textBox1.SelectionStart = textBox1.Text.Length;
        e.Handled = true;
    }
} 
```

# objective-c - iPad 上 UIViewController 中的 UITableView

> ID：16129129
> 
> 赞同：0
> 
> 时间：2013-04-21T08:01:23.770
> 
> 标签：objective-c, ipad, uitableview, ios6

我正在尝试开发一个小型应用程序来管理老师的注册表。我的应用程序是这样工作的：

1.  我提出一个`UIViewController`（只有风景）来选择班级。
2.  当我按下按钮（例如：1F）时，我调用一个方法来解析一个`XML`文件，其中我得到了学生的姓名和姓氏。所以我把这个名字和姓氏放到了一个`NSArray`of中（`NSDictionary`由3组成`arrayStudents[0] = dictStudents``dictStudents``key: number, name and surname`)。
3.  在第二个中`UIViewController`，我将 a`UITableView`放在屏幕左侧，将正常视图放在右侧。在`UITableView`我想要学生的姓名和姓氏中，在右侧我想要显示通过点击 选择的学生的考试分数`UITableView`。

这就是我的`viewController`样子：

![视图控制器界面](https://i.stack.imgur.com/HjhBw.jpg)

我的问题是如何填充`UITableView`. 我`tableView`用一个连接`IBOutlet`到我的第二个`viewController`，然后我将委托和数据源连接到第二个`viewController`，但应用程序仍然崩溃。我将在这里发布我的表格视图类和第二个视图控制器的代码，以便您可以帮助我解决这个问题。

在这里您可以看到我的连接选项卡`tableView`：

![连接选项卡](https://i.stack.imgur.com/sbhW1.jpg)

**表视图.h**

```
#import <UIKit/UIKit.h>

@interface tableView : UITableView <UITableViewDelegate,UITableViewDataSource>
@property (nonatomic, strong) NSMutableArray *arrayStudents;
@end 
```

**表视图.m**

```
#import "tableView.h"

@implementation tableView

- (id)initWithFrame:(CGRect)frame {
    self = [super initWithFrame:frame];
    if (self) {
        // Initialization code
    }
    return self;
}

#pragma mark - Table view data source

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
    return self.arrayStudents.count;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier forIndexPath:indexPath];
    cell.textLabel.text = [self.arrayStudents[indexPath.row] objectForKey:@"name"];
    cell.detailTextLabel.text = [self.arrayStudents[indexPath.row] objectForKey:@"surname"];

    return cell;
}

#pragma mark - Table view delegate

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {

}

@end 
```

**详细信息ViewController.h**

```
 #import <UIKit/UIKit.h>

    @interface DetailsViewController : UIViewController <UITableViewDelegate, UITableViewDataSource>
    @property (weak, nonatomic) IBOutlet UITableView *tableViewStudentsNameAndSurname;
    @property (weak, nonatomic) IBOutlet UIView *viewDetails;
    @property (weak, nonatomic) IBOutlet UILabel *labelName;
    @property (weak, nonatomic) IBOutlet UILabel *labelSurname;
    @property (weak, nonatomic) IBOutlet UITextField *textFieldTest1;
    @property (weak, nonatomic) IBOutlet UITextField *textFieldTest2;
    @property (weak, nonatomic) IBOutlet UITextField *textFieldTest3;
    @property (weak, nonatomic) IBOutlet UITextField *textFieldText4;
    @property (weak, nonatomic) IBOutlet UITextView *textViewValutation;
    @property (weak, nonatomic) IBOutlet UILabel *labelTotalScore;
    @property (nonatomic, strong) NSString *fileName;

    - (IBAction)saveDataToPlistFile:(id)sender;
    @end 
```

**详细信息ViewController.m**

```
#import "DetailsViewController.h"
#import "ParserXML.h"
#import "tableView.h"

@interface DetailsViewController () {
    ParserXML *parser;
    tableView *table;
}
@end

@implementation DetailsViewController

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil {
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {

    }
    return self;
}

- (void)viewDidLoad {
    [super viewDidLoad];
    parser = [[ParserXML alloc] init];
    NSLog(@"DetailsViewController: %@", self.fileName);
    parser.fileName = self.fileName;
    [parser parseXML];
    table = [[tableView alloc] init];
    table.arrayStudents = [parser.arrayStudents mutableCopy];
}

- (void)didReceiveMemoryWarning {
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

- (IBAction)saveDataToPlistFile:(id)sender {

}
@end 
```

**解析器XML.h**

```
#import <Foundation/Foundation.h>

@interface ParserXML : NSObject <NSXMLParserDelegate>
@property (nonatomic, strong) NSMutableArray *arrayStudents;
@property (nonatomic, strong) NSDictionary *dictStudents;
@property (nonatomic, strong) NSString *fileName;

- (void) parseXML;
@end 
```

**解析器XML.m**

```
#import "ParserXML.h"

@interface ParserXML() {
    NSXMLParser *nameStudentParser;
    NSString *pathXmlFile;
}
@end

@implementation ParserXML

- (id) init {
    self = [super init];
    if (self) {
        self.arrayStudents = [[NSMutableArray alloc] init];
        pathXmlFile = [[NSBundle mainBundle] pathForResource:self.fileName ofType:@"xml"];
    }
    return self;
}

- (void) parseXML {
    NSURL *xmlUrl = [NSURL URLWithString:pathXmlFile];
    NSString *host = [xmlUrl host];
    if (xmlUrl == nil || host == nil) {
        NSData *data = [[NSData alloc] initWithContentsOfFile:pathXmlFile];
        nameStudentParser = [[NSXMLParser alloc] initWithData:data];
    } else {
        nameStudentParser = [[NSXMLParser alloc] initWithContentsOfURL:xmlUrl];
    }
    [nameStudentParser setDelegate:self];
    [nameStudentParser setShouldProcessNamespaces:NO];
    [nameStudentParser setShouldReportNamespacePrefixes:NO];
    [nameStudentParser setShouldResolveExternalEntities:NO];
    [nameStudentParser parse];
}

- (void)parserDidStartDocument:(NSXMLParser *)parser {
    NSLog(@"File trovato inizio il parsing del documento");
}

- (void)parser:(NSXMLParser *)parser parseErrorOccurred:(NSError *)parseError {
    NSLog(@"Errore Parsing");
}

- (void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName attributes:(NSDictionary *)attributeDict{
    if ([elementName isEqualToString:@"students"]) {
    } else if ([elementName isEqualToString:@"student"]) {
        NSString *numberValue = attributeDict[@"number"];
        NSString *nameValue = attributeDict[@"name"];
        NSString *surnameValue = attributeDict[@"surname"];

        //Inserire dizionario di array
        self.dictStudents = @{@"number": numberValue,
                                @"name": nameValue,
                            @"surname" : surnameValue};

        [self.arrayStudents addObject:self.dictStudents];
        NSLog(@"arrayStudents dim = %d", self.arrayStudents.count);
    }
}

- (void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName {

}

- (void)parserDidEndDocument:(NSXMLParser *)parser {
    NSLog(@"ArrayFuels = %@", self.arrayStudents);
}

@end 
```

当我运行应用程序时，Xcode 说：

> [DetailsViewController tableView:numberOfRowsInSection:]：无法识别的选择器发送到实例 0x751da40

你能帮我解决这个问题吗？我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T08:24:07.797

好的，所以我对目标 C 很陌生，所以这不是专家意见。但据我所知，它正在寻找应该存在于 DetailsViewController 类中的委托方法。您已将表视图委托/数据源连接到 DetailsViewController 类，我认为您应该将该类指定为 UITableView 的委托类。在 DetailsViewController.h 中：

```
@interface DetailsViewController : UIViewController<UITableViewDelegate,UITableViewDataSource> 
```

然后在 DetailsViewController.m 文件中插入 UITableView 委托方法。虽然，我不明白你为什么要使用 2 个表视图类？如果你想使用 tableView 类，为什么不在 DetailsViewController::viewDidLoad 中初始化，简单地说：

```
[self.view addSubView:tableView] 
```

我认为您的班级不需要 tableViewStudentsNameAndSurname。

# asp.net - 在转发器的更新面板中保存评论

> ID：16129131
> 
> 赞同：0
> 
> 时间：2013-04-21T08:01:25.570
> 
> 标签：asp.net, updatepanel, repeater

(Asp.net 4) 我有一个博客，我使用转发器显示所有博客文章和每个博客的评论。我正在尝试更改用户向博客发表评论的方式。我想把评论放在更新面板中的每个博客下，当他们写评论并点击保存按钮时，我想刷新评论，这样他们的新评论就会显示出来。但我很难做到这一点。我在Repeater 的ItemTemplate 中添加了UpdatePanel，并添加了Textboxes 和Button 来保存评论。每个 UpdatePanel 都放在一个带有博客 id 的地方。但我不知道如何创建代码以保存正确博客 ID 的评论，然后刷新该 UpdatePanel。

代码：

```
<asp:Repeater ID="RepeaterBlog" runat="server">
            <ItemTemplate>        
                <article>  
                    <% if (repeaterCounter == 0)
                       {
                           Response.Write("<header class=\"firstArticleInBlog\">");
                       }
                       else
                       {
                           Response.Write("<header class=\"normalArticle\">");
                       }
                    %>  
                    <h2><%# Eval("article_header") %>  &nbsp;<span class="date">
                    <time datetime="<%# GetPubDate(Eval("article_date")) %>"><%# FormatDate(Eval("article_date")) %></time></span></h2></header>

                    <p><%# Eval("article_content") %><p><br />
                    <div class="comments">                
                    <div class="showhidecomments">
                        <!--<a class="iframe-comments" data-fancybox-type="iframe" href='WriteComments.aspx?BlogId=<%# DataBinder.Eval(Container, "DataItem.id") %>'>Skriv kommentar</a> | -->
                        <a href="javascript:void(0);" title="i<%# Eval("id") %>">Vis/Skriv kommentarer (<%# CountComments (DataBinder.Eval(Container, "DataItem.id")) %>)</a> | <a href="javascript:void(0);" title="i<%# Eval("id") %>" >Skjul kommentarer</a>
                    </div>
                    <section>
                    <article>
                    <div id="i<%# Eval("id") %>" style="display: none;">
                        <asp:UpdatePanel ID="upPanel" runat="server">
                            <Triggers>
                                <asp:AsyncPostBackTrigger ControlID="cmdSaveComment" EventName="Click" />
                            </Triggers>
                            <ContentTemplate>
                                <%# GetComments (DataBinder.Eval(Container, "DataItem.id")) %>
                                <asp:TextBox ID="txtName" runat="server" />
                                <asp:TextBox ID="txtComment" runat="server" TextMode="MultiLine" />
                                <asp:Button ID="cmdSaveComment" runat="server" OnClick="cmdSaveComment_Click" />
                            </ContentTemplate>    
                        </asp:UpdatePanel>
                        </div>                   
                    </article>
                    </section>
                    </div>
                    <% repeaterCounter++; %>
                </article>
            </ItemTemplate>            
            </asp:Repeater> 
```

在代码隐藏中：

```
protected void cmdSaveComment_Click(object sender, EventArgs e)
        {
            //simplified code:
            string name = txtName.Text;
            string comment = txtComment.Text;
            int blogId = (int)(Eval("DataItem.id"));

            dataHandler.NewComment(name, comment, blogId);            
        } 
```

我至少接近这里的东西，还是我完全走错了路？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T09:28:36.617

您需要为中继器使用 ItemCommand 属性，为您的按钮使用 CommandName 属性。

首先在您的 aspx.xml 中声明中继器的事件名称和按钮的命令名称。请注意，CommandName 替换了按钮的 OnClick。您还给按钮一个命令参数，这是评论所针对的文章记录的 ID。

```
<asp:Repeater ID="RepeaterBlog" runat="server" OnItemCommand="RepeaterBlog_ItemCommand">

<asp:Button ID="cmdSaveComment" runat="server" CommandName="SaveComment" CommandArgument='<%# Eval("id")%>' /> 
```

现在在后面的代码中添加这个

```
void RepeaterBlog_ItemCommand(Object Sender, RepeaterCommandEventArgs e) {        
  if(e.CommandName == "SaveComment") {
    string name = ((TextBox)e.Item.FindControl("txtName")).Text;
    string comment = ((TextBox)e.Item.FindControl("txtComment")).Text;
    dataHandler.NewComment(name, comment, e.CommandArgument);
  }
} 
```

这应该让你开始

# c++ - 连接到 IPv4 地址时 C++ winsock 连接被拒绝

> ID：16129132
> 
> 赞同：3
> 
> 时间：2013-04-21T08:01:30.113
> 
> 标签：c++, winsock, connect, ipv6, ipv4

我正在使用 winsock2 编写服务器/客户端系统，当我将客户端连接到**服务器名称**或**服务器 IPv6 地址**时它工作得很好。但是，当我使用**服务器 IPv4 地址**时，我在客户端调用 connect() 时收到错误“连接被拒绝”。

此错误发生在我的客户端或使用 telnet。但是，我可以使用 IPv4 或 IPv6 这三个名称中的任何一个成功地 ping 服务器。

我已经尝试在同一台机器上，在不同的机器上同时运行服务器和客户端，并在所有机器上停用防火墙。

这是我的服务器初始化和监听代码的摘录：

```
SOCKET sockfd = INVALID_SOCKET, in_socketID;
struct addrinfo hints;
struct addrinfo *servinfo = NULL;
struct addrinfo *p;
struct addrinfo *ip;
sockaddr_storage incoming_addr;
int addr_size;
int tmp_err;
const char *sPort = "20152";

memset(&hints, 0, sizeof hints);
hints.ai_family = AF_UNSPEC; // either IPv4 or IPv6
hints.ai_socktype = SOCK_STREAM;
hints.ai_flags = AI_PASSIVE;

tmp_err = getaddrinfo(NULL, sPort, &hints, &servinfo);
if (tmp_err != 0)
    throw exception("ERROR: getaddrinfo failed");

// loop through all the results and bind to the first we can
for(p = servinfo; p != NULL && sockfd == INVALID_SOCKET; p = p->ai_next)
{
    ip = p;
    sockfd = socket(p->ai_family, p->ai_socktype, p->ai_protocol);
    if (sockfd == INVALID_SOCKET)
    {
        cerr << "ERROR on socket(): " << WSAGetLastError() << endl;
    } // end if
    else if (bind(sockfd, p->ai_addr, p->ai_addrlen) == SOCKET_ERROR)
    {
        cerr << "ERROR on bind(): " << WSAGetLastError() << endl;
        closesocket(sockfd);
        sockfd = INVALID_SOCKET;
    } // end if
} // end for

if (sockfd == INVALID_SOCKET)
{
    // looped off the end of the list with no successful bind
    throw exception("ERROR: Failed to bind socket");
}

// clean up
if (servinfo)
    freeaddrinfo(servinfo);

if (listen(sockfd, SOMAXCONN ) == SOCKET_ERROR)
    throw exception("Listen failed");

while (true)
{
    memset(&incoming_addr, 0, sizeof(incoming_addr));
    addr_size = sizeof(incoming_addr);
    in_socketID = accept(socketID, (sockaddr *)&incoming_addr, &addr_size);

    // do stuff with incoming connection
} 
```

这是我的客户代码：

```
int sockfd = INVALID_SOCKET;
struct addrinfo hints;
struct addrinfo *servinfo = NULL;
struct addrinfo *p;
struct addrinfo *ip;
int tmp_err;
const char *sHost = "192.168.1.136";
const char *sPort = "20152";

memset(&hints, 0, sizeof hints);
hints.ai_family = AF_UNSPEC; // either IPv4 or IPv6
hints.ai_socktype = SOCK_STREAM; // use TCP

tmp_err = getaddrinfo(sHost,        // web address or ip to connect to
                      sPort,        // port or protocol
                      &hints,       // initialized hints structure
                      &servinfo);   // return structure
if (tmp_err != 0)
    throw exception("ERROR: getaddrinfo failed");

// loop through all the results and connect to the first we can
for(p = servinfo; p != NULL && sockfd == INVALID_SOCKET; p = p->ai_next)
{
    ip = p;
    sockfd = socket(p->ai_family, p->ai_socktype, p->ai_protocol);
    if (sockfd == INVALID_SOCKET)
    {
        cerr << "ERROR on socket(): " << WSAGetLastError() << endl;
        //continue;
    } // end if
    else if (connect(sockfd, p->ai_addr, p->ai_addrlen) < 0)
    {
        cerr << "ERROR on connect(): " << WSAGetLastError() << endl;
        closesocket(sockfd);
        sockfd = INVALID_SOCKET;
        //continue;
    } // end if
} // end for

if (sockfd == INVALID_SOCKET)
    throw exception("ERROR: Failed to connect");

// clean up
if (servinfo)
    freeaddrinfo(servinfo);

// do stuff with new socket 
```

我已经在网站上阅读了几个类似的问题，但没有人回答这个问题。

我怎样才能连接到服务器 IPv4 地址？我需要帮助，请。

谢谢。

## 编辑：

根据用户 Sorayuki 的建议，我做了一些更改，只是为了测试他的理论是否正确。

我能够通过更改服务器连接到 IPv4

```
hints.ai_family = AF_UNSPEC; 
```

到

```
hints.ai_family = AF_INET; 
```

我知道它显然会起作用，但是当我这样做时，当然 IPv6 不起作用。

看来用户 Sorayuki 是对的，我的循环正在连接到 IPv6。

似乎没有简单的方法来统一 IPv6 和 IPv4。您的套接字必须监听一个或另一个，这使得该过程非常烦人。

根据文档，同时监听 IPv4 和 IPv6 的旧样式是为每个创建一个套接字并监听两者。这适用于 Windows Server 2003 和 Windows XP SP1。

首选的现代风格（Windows Vista、7 和 8）是将您的套接字变成双套接字，它将同时侦听 IPv4 和 IPv6。但是，您的客户端还必须能够设置双套接字，因此，如果您的应用程序正在为旧客户端提供服务，那么您就只能使用旧方法。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T20:28:56.123

这是因为绑定到 IPv6 地址并不会神奇地绑定到 IPv4 地址。

在 Linux 上，默认绑定到`[::]`将导致 IPv6 和 IPv4 工作（除非`/proc/sys/net/ipv6/bindv6only`设置为`1`）。

但是，在 Mac OS X 和 Windows 上，绑定到`[::]`仅适用于 IPv6。您还必须绑定到 IPv4 地址（或`0.0.0.0`）才能使其工作。

您在评论中描述的逻辑*“遍历所有结果并绑定到我们可以的第一个​​”*正是这里的问题。您应该同时`[::]`使用`IPV6_V6ONLY`标志（请参阅`setsockopt()`）和`0.0.0.0`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T08:13:50.860

是因为您将服务器套接字绑定到 IPv6 地址吗？在“for”循环中，出现在 IPv4 地址之前的 IPv6 地址似乎会导致服务器的套接字侦听 IPv6 地址。所以你的服务器没有监听任何 IPv4 地址，导致所有与服务器 IPv4 地址的连接都被拒绝。

尝试使用工具或某些命令（例如 netstat）查看所有侦听端口在哪个 IP 地址上

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-21T08:09:14.883

您是否尝试在同一台机器上运行服务器和客户端？

这听起来像是防火墙问题。如果您在同一台机器上成功连接 telnet/您的应用程序，您就会知道这是问题所在。

# iphone - 按下相同按钮时隐藏图像

> ID：16129134
> 
> 赞同：0
> 
> 时间：2013-04-21T08:01:31.803
> 
> 标签：iphone, ios, objective-c

我知道如何在按下按钮时显示图像。但是，一旦第二次按下按钮，你如何再次“隐藏”图像？这是我到目前为止所拥有的一切......

```
-(IBAction)Light
{
    LightLCD.hidden = NO;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-21T08:03:56.963

尝试

```
-(IBAction)Light
{
    LightLCD.hidden = !LightLCD.hidden;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T08:05:51.597

像这样：

```
- (IBAction)Light
{
    LightLCD.hidden = !LightLCD.hidden;
} 
```

这样您就可以切换 imageView 的可见性。

# html - 不存在，但存在的边距导致元素下降到新行，因为组合宽度 >100%

> ID：16129140
> 
> 赞同：0
> 
> 时间：2013-04-21T08:02:49.657
> 
> 标签：html, css

在下面链接的页面中，a 中有两个`<section>`s，`<header>`它们的组合宽度为 100%。左侧 20%，粉红色`<section>`，右侧 80%，绿色`<section>`，没有边框、边距或填充。

除了这两个部分似乎有一个边距导致权利，绿色的一个下降到一个新的行。

我知道这一点，因为当我给左边、粉红色`<section>`和右边、绿色的负边距时，`<section>`它们适合内联线。

这个利润是从哪里来的，我怎样才能摆脱它而不会讨厌地应用负利润？

另外，换句话说，我怎样才能让两个`<section>`s 嵌入一行？

这是发生这种情况的页面：[https ://dl.dropboxusercontent.com/u/270523/help/new.html](https://dl.dropboxusercontent.com/u/270523/help/new.html)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T08:10:17.523

空白。

如果你不是这个：

```
<header id="header">
    <section id="logo">
        <!--<img data-gif="data.gif" data-png="data.png" src="logo.svg" />-->
    </section>
    <section id="input">
        <input id="searchInput" type="text" name="search" autocomplete="off" />
    </section>
</header> 
```

做这个：

```
<header id="header">
    <section id="logo">
        <!--<img data-gif="data.gif" data-png="data.png" src="logo.svg" />-->
    </section><section id="input">
        <input id="searchInput" type="text" name="search" autocomplete="off" />
    </section>
</header> 
```

它并排显示就好了。请参阅[jsfiddle 中的证明](http://jsfiddle.net/8PFAm/1/)。

这种对空格的处理是标准布局和内联内容的副产品 - 如果您改用浮点数，就像在[另一个答案](https://stackoverflow.com/a/16129170/365237)中回答的那样，空格应该不会产生影响。这是 HTML/CSS 的一个特性。也有其他讨论过相同的[线程。](https://stackoverflow.com/questions/1097006/removing-whitespace-between-html-elements-when-using-line-breaks)

所以简而言之，有两种方法可以解决这个问题：

*   摆脱你的内联块元素之间的空白
*   切换到使用 float:left 而不是 inline-block 用于#input、#logo

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T08:07:27.383

`<section>`是一个块元素，如果不使用，将不会并排显示`float`；

试试这个：

```
#logo { float: left; } 
```

# joomla - 如何在没有完全管理员权限的情况下访问 Joomla 自定义组件管理

> ID：16129142
> 
> 赞同：0
> 
> 时间：2013-04-21T08:03:07.960
> 
> 标签：joomla, joomla2.5

我需要为我的组件管理工具实现一个保护区；我想使用管理员登录，让连接的用户看到我的管理工具，而不让他们访问 Joomla 管理员的东西。我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T16:54:49.047

正如 Elin 所说，Joomla 的 ACL 会为您解决这个问题。组和访问级别位于用户配置区域。设置完成后，您需要在全局配置 > 权限设置中设置适当的安全访问设置。这将允许他们进入管理区域，然后对于您不希望他们访问的每个单独的组件/部分/区域，您需要做出适当的选择（在每个区域中查找“选项”） . 权限是继承的，并且您已在上面的权限设置中授予他们对管理区域的访问权限，因此在您关闭它们之前，一切都是打开的。

彻底测试和备份的明显警告，因为您可能会打开您的系统。ACL 很快就会变得非常混乱。

# ruby-on-rails - 使用 Rspec 测试类似字段的 ActiveRecord 验证

> ID：16129145
> 
> 赞同：0
> 
> 时间：2013-04-21T08:03:40.800
> 
> 标签：ruby-on-rails, bdd, rails-activerecord, rspec-rails

我最近开始学习 RoR 和 TDD，并且无法找出处理这种情况的最佳方法。

我有一个 ActiveRecord 模型，其中有两个共享相同验证的字段。

如何编写对相似字段使用相同测试的 RSpec 测试？

在这种情况下，“共享示例”看起来像是一个很有前途的功能，但似乎不起作用，因为我需要测试整个模型，但只是将单个字段传递给共享示例。

以下是我失败的尝试：

```
describe Trip do
  before do
    @trip = trip.new(date: '2013-07-01', city_1: "PORTLAND", 
            city_2: "BOSTON")
  end

  subject { @trip }

  shared_examples "a city" do
    describe "when not uppercase" do
      before { city = city.downcase }
      it { should_not be_valid }
    end
  end

  describe "city_1 must be valid" do
    it_should_behave_like "a city" do
      let!(:city) { @trip.city_1}
    end
  end

  describe "city_2 must be valid" do
    it_behaves_like "a city" do
      let!(:city) { @trip.city_2}
    end
  end
end 
```

这会失败，因为更新城市变量不会更新行程模型。有没有办法将它动态地绑定回模型？

顺便说一句，如果我粘贴在每个字段下，所有测试都会自行运行。它只是在 shared_example 的上下文中不起作用。

任何指导将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T20:56:56.107

您可以在循环中执行断言，并使用一些元编程，但我建议不要这样做。测试应该尽可能简单直接，即使这意味着有一点重复。如果只涉及两个字段，就重复一遍。

# php - 在服务器端收集 CActiveForm 错误

> ID：16129148
> 
> 赞同：0
> 
> 时间：2013-04-21T08:04:05.453
> 
> 标签：php, yii

我有一个`CActiveForm`总结：

```
.
.
.
'id'='email-form',
'enableAjaxValidation`=>true,
'clientOptions' => array('validateOnSubmit'=>true),
.
.
. 
```

现在我打算在服务器端收集表单错误并将其发送`json object`给客户端。在客户端有一个 Jquery 函数来解析`json object(form Errors)`和设置数据到 errorSummary，最后显示表单的 errorSummary。

我已经完成了，没有任何问题，我的问题是以下函数不会收集表单错误：

```
protected function getErrorSummary($model)
{
    if(isset($_POST['ajax']) && $_POST['ajax']==='email-form'){
        $errors=CActiveForm::validate($model);
        if($errors !== '[]')
            Yii::app()->end($errors);
    }
} 
```

但以下收集表单错误：

```
protected function getErrorSummary($model)
{
        $errors=CActiveForm::validate($model);
        if($errors !== '[]')
            Yii::app()->end($errors);
} 
```

请注意，这两个函数都真正作用于`validateOnChange`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T07:31:38.930

我在控制器中使用这样的东西：

```
if(Yii::app()->request->isAjaxRequest)
            {   
            $error=CActiveForm::validate($model);
                if($error!='[]'){
                    echo $error; 
                    Yii::app()->end();
                }
            }
        if(isset($_POST['Lists']))
        {
            $model->attributes=$_POST['Lists'];
            if($model->save())
                {
                    echo CJSON::encode(array(
                                  'status'=>'success',  
                             ));
                    Yii::app()->end();       
                }   
        } 
```

您可以使用 ajaxSubmitButton 代替 jquery 函数。像这样的东西：

```
<?php echo CHtml::ajaxSubmitButton ($model -> isNewRecord ? 'Create' : 'Save' , Yii::app()->request->url, array (
        'dataType' => 'json', 
        'type'=>'post',
        'success' =>
        'js:function (data) {

        if(!$.isEmptyObject(data)) {         
            $.each(data, function(key, val) {                       
                        $("#lists-form #"+key+"_em_").text(val+" ");
                        $("#lists-form #"+key+"_em_").parent(".error_wrapter").addClass("error");
                        $("#lists-form #"+key+"_em_").css(\'display\',\'block\');                                   
                            });//here you show your errors on form fields from JSON object
          };

        if(data.status=="success"){
        //here you can use custom notifications or redirect                           
            }
        else {

            //here you can display errorsummary or notifications
          };
          }',
    ), array (
        'id' => 'lists-form_submit_'.rand(1,255), // Need a unique id or they start to conflict with more than one load.
    ));?> 
```

希望这有帮助。

# c# - 出现错误 107 (net::ERR_SSL_PROTOCOL_ERROR)：SSL 协议错误

> ID：16129151
> 
> 赞同：16
> 
> 时间：2013-04-21T08:05:03.780
> 
> 标签：c#, visual-studio-2010, ssl, windows-xp, httpcfg.exe

我知道在stackoverflow上有很多与相同主题相关的问题，但在这里我有一些不同的问题：

我使用了`installer class`to`reserve a port`和`bind it with hash`on `win7/Winxp`：

```
if (Environment.OSVersion.Version.Major > 5)
{
    startInfo.Arguments = @"/c netsh http add urlacl url=https://127.0.0.1:8083/ user=EVERYONE";
    netsh http add sslcert ipport=127.0.0.1:8083 certhash=df03c4b0b32f3302a3b70abe6b5dfd864d0986a5 appid={00112233-4455-6677-8899-CCBBCCDDEEFF} clientcertnegotiation=enable;
}
else
{
    startInfo.Arguments = @"/c httpcfg set urlacl /u https://127.0.0.1:8083/";
    httpcfg set ssl -i 127.0.0.1:8083 -h df03c4b0b32f3302a3b70abe6b5dfd864d0986a5 -f 2
} 
```

代码和`setup project`. 一切正常，除了以下几点：

*   每当我安装它时`exe`，它都会成功`win7`运行`WCF`web 服务。
*   每当我`WinXP(SP#)`在本地机器上使用时，它都会引发错误：

    错误 107 (net::ERR_SSL_PROTOCOL_ERROR)：SSL 协议错误

*   但是当我使用teamviewer登录任何`WinXp`虚拟机时，它运行成功。

怎么可能，我试了好几次，结果都是一样的。它在 Xp 上运行（在 VM 上运行）但不在真正的 XP 机器上？

我写错了什么来绑定和保留端口吗？防火墙在这里起到一些作用吗？

我还确认了它，`httpcfg query ssl`并且哈希与端口成功绑定。

任何帮助都将是可观的。

IMO此命令不起作用：`netsh http add urlacl url=https://127.0.0.1:8083/ user=EVERYONE`

我试图找出错误，`fiddler`它说：

```
"Failed to secure existing conection for <ipaddress>.  Authentication failed because the remote party has closed the transport stream." 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-14T17:08:35.853

本地 XP 机器的配置可能与虚拟机的配置不同。我能想到的一种情况是，IT 部门会以一种方式配置 XP 机器，然后您自己创建虚拟机，它只是使用默认设置（不同）。我并不是说这是你的场景，只是*一个场景*。另一个是机器已过时/未更新，这与其说是配置问题，不如说是存在错误。

无论如何，我会说[您安装的 XP 错误地确定证书无效](http://support.microsoft.com/kb/314864)，这是 VM 不共享的一个特征。您对防火墙设置的评论也可能是准确的 - 试试 Google。

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-22T16:07:53.117

这可能看起来很愚蠢，但某些应用程序可以使用 SSL 端口，例如 Team Viewer 甚至 Skype。尝试关闭此应用程序，以防您的机器上运行其中一些应用程序！

对不起，这只是一个猜测:) 但我希望它有帮助......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-29T12:26:09.107

执行以下设置 berfoe 调用您的 WCF 服务

```
ServicePointManager.ServerCertificateValidationCallback =
            delegate(object s, X509Certificate certificate, X509Chain chain, SslPolicyErrors sslPolicyErrors) { return true; }; 
```

有关更多详细信息，请参阅： [Using a self-signed certificate with .NET's HttpWebRequest/Response](https://stackoverflow.com/questions/526711/using-a-self-signed-certificate-with-nets-httpwebrequest-response)

# c# - C#“新建”命令

> ID：16129152
> 
> 赞同：0
> 
> 时间：2013-04-21T08:05:07.537
> 
> 标签：c#, location, point

我有一个问题，当我尝试重新定位一个名为 的面板时`pPan`，我有两种不同的方法来做到这一点：

在我写的按钮的点击事件中

```
pPan.Location = new Point (
  pPan.Location.X +10 , pPan.Location.Y ); 
```

或者我可以写：

```
pPan.Location.X += 10; 
```

那么这里有什么区别呢？我为什么要创建这个`new Point`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T08:16:45.167

如果`Point`是`struct`，则必须使用第一个，因为当您调用该属性时，它会返回 的副本`Location`，并且您尝试修改该副本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-21T08:17:50.353

Location 属性的类型是 Point，它是一个结构。你可能会收到类似的错误

> 无法修改“System.Windows.Forms.Control.Location”的返回值，因为它不是变量

当你设置它的 X、Y 值时。

但您可以分配新的 Point 对象：

```
pPan.Location = new Point (
  pPan.Location.X +10 , pPan.Location.Y ); 
```

**[`Control.Location`财产](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.location.aspx)**

> 因为 Point 类是一个值类型（Visual Basic 中的结构，Visual C# 中的结构），所以它是按值返回的，这意味着访问该属性会返回控件左上角点的副本。因此，调整从该属性返回的 Point 的 X 或 Y 属性不会影响控件的 Left、Right、Top 或 Bottom 属性值。要调整这些属性，请单独设置每个属性值，或使用新点设置 Location 属性。如果 Control 是 Form，则 Location 属性值表示 Form 在屏幕坐标中的左上角。

相关 SO 问题：[C# 以编程方式更改对象的位置](https://stackoverflow.com/questions/8369999/c-sharp-change-the-location-of-an-object-programatically)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T08:11:35.793

不同之处在于，在第一种方式中，您为 Point 对象分配新内存。第二种方式你只是改变现有对象的属性。

尽可能多地操作现有对象是一种很好的做法。所以我建议你使用第二种方式来改变位置。

# node.js - “npm install socket.io”错误

> ID：16129155
> 
> 赞同：1
> 
> 时间：2013-04-21T08:05:46.890
> 
> 标签：node.js, socket.io

我正在尝试更新我的 socket.io 版本（当前为 0.9.11），因此我将 package.json 文件编辑为：

```
{
  "name": "aaa",
  "version": "0.0.1",
  "private": true,
  "scripts": {
    "start": "app.js"
  },
  "dependencies": {
    "express": "3.0.3",
    "hjs": "0.0.4",
    "cradle": "0.6.4",
    "socket.io": "0.9.14"
  },
  "subdomain": "aaa",
  "engines": {
    "node": "0.6.x"
  }
} 
```

我收到以下奇怪的错误：

```
gyp ERR! configure error 
gyp ERR! stack Error: Can't find Python executable "python", you can set the PYTHON env variable.
gyp ERR! stack     at failNoPython (C:\Program Files\nodejs\node_modules\npm\node_modules\node-gyp\lib\configure.js:113:14)
gyp ERR! stack     at C:\Program Files\nodejs\node_modules\npm\node_modules\node-gyp\lib\configure.js:81:11
gyp ERR! stack     at Object.oncomplete (fs.js:107:15)
gyp ERR! System Windows_NT 6.1.7601
gyp ERR! command "node" "C:\\Program Files\\nodejs\\node_modules\\npm\\node_modules\\node-gyp\\bin\\node-gyp.js" "rebuild"
gyp ERR! cwd C:\apps\sms - part 2\node_modules\socket.io\node_modules\socket.io-client\node_modules\ws
gyp ERR! node -v v0.10.3
gyp ERR! node-gyp -v v0.9.5
gyp ERR! not ok 
```

所以我有三个问题：

1.  在成功运行我的 node.js 服务器之前，我是如何设法安装 socket.io 的？

2.  Python 与此有何关系？我的 PC 上没有 Python，我不知道我应该有。

3.  如何解决这个问题？

**已编辑** 只是忘了提到 socket.io 模块没有得到更新并保持在 0.9.11 版本

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T09:04:50.837

[`node-gyp`](https://github.com/TooTallNate/node-gyp#installation)编译[本机插件](http://nodejs.org/api/addons.html)需要 Python 。

一个例子是[`ws`](https://npmjs.org/package/ws)，它[`socket.io-client`](https://npmjs.org/package/socket.io-client)取决于：

```
cwd ...\node_modules\socket.io\node_modules\socket.io-client\node_modules\ws 
```

而且，它之前安装的原因可能在`ws`. 该项目指定了一个[`"scripts": { "install": "..." }`](https://github.com/einaros/ws/blob/v0.4.19/package.json#L15)允许在安装时[编译失败的情况。](https://github.com/einaros/ws/blob/v0.4.19/install.js#L18-L24)[这两个似乎都已被删除](https://github.com/einaros/ws)（至少是 v0.4.19）。

* * *

一种可用的修复方法是安装`node-gyp`的依赖项，包括 Python。这可能是最好的，因为它可以让您及时了解错误修复。

另一种方法是指定一个较低版本的`ws`，它仍然[与`socket.io-client`的 dependencies](https://github.com/LearnBoost/socket.io-client/blob/0.9.11/package.json#L22)兼容，方法是将其添加到您的`package.json`:

```
"dependencies": {
    "express": "3.0.3",
    "hjs": "0.0.4",
    "cradle": "0.6.4",
    "socket.io": "0.9.14",
    "ws": "0.4.19"
} 
```

# javascript - 使用 Moment js 的倒数计时器

> ID：16129157
> 
> 赞同：56
> 
> 时间：2013-04-21T08:05:49.633
> 
> 标签：javascript, jquery, countdown, unix-timestamp, momentjs

我正在为事件页面制作倒数计时器，为此我使用了 moment js。

这是[小提琴](http://jsfiddle.net/wt812nfo/)。

我正在计算事件日期和当前日期（时间戳）之间的日期差异，然后使用时刻 js 的“持续时间”方法。但是剩下的时间并没有像预期的那样到来。
**预期**- 00:30m:00s
**实际**- 5h:59m:00s

代码 ：

```
<script>
  $(document).ready(function(){

    var eventTime = '1366549200';
    var currentTime = '1366547400';
    var time = eventTime - currentTime;
    var duration = moment.duration(time*1000, 'milliseconds');
    var interval = 1000;

    setInterval(function(){
      duration = moment.duration(duration.asMilliseconds() - interval, 'milliseconds');
      $('.countdown').text(moment(duration.asMilliseconds()).format('H[h]:mm[m]:ss[s]'));
    }, interval);
  });
  </script> 
```

我阅读了 momentjs 文档以找出问题所在，但没有运气。

谢谢你的时间。

**更新 ：**

我最终这样做：

```
<script>
  $(document).ready(function(){

    var eventTime = '1366549200';
    var currentTime = '1366547400';
    var leftTime = eventTime - currentTime;//Now i am passing the left time from controller itself which handles timezone stuff (UTC), just to simply question i used harcoded values.
    var duration = moment.duration(leftTime, 'seconds');
    var interval = 1000;

    setInterval(function(){
      // Time Out check
      if (duration.asSeconds() <= 0) {
        clearInterval(intervalId);
        window.location.reload(true); #skip the cache and reload the page from the server
      }

      //Otherwise
      duration = moment.duration(duration.asSeconds() - 1, 'seconds');
      $('.countdown').text(duration.days() + 'd:' + duration.hours()+ 'h:' + duration.minutes()+ 'm:' + duration.seconds() + 's');
    }, interval);
  });
  </script> 
```

[JS小提琴](http://jsfiddle.net/arpit/cxyms)。

* * *

## 回答 #1

> 赞同：101
> 
> 时间：2013-04-21T08:32:51.560

在最后一条语句中，您将持续时间转换为时间，这也考虑了时区。我假设你的时区是 +530，所以 5 小时 30 分钟被添加到 30 分钟。您可以按照下面给出的方式进行操作。

```
var eventTime= 1366549200; // Timestamp - Sun, 21 Apr 2013 13:00:00 GMT
var currentTime = 1366547400; // Timestamp - Sun, 21 Apr 2013 12:30:00 GMT
var diffTime = eventTime - currentTime;
var duration = moment.duration(diffTime*1000, 'milliseconds');
var interval = 1000;

setInterval(function(){
  duration = moment.duration(duration - interval, 'milliseconds');
    $('.countdown').text(duration.hours() + ":" + duration.minutes() + ":" + duration.seconds())
}, interval); 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-10-01T15:19:04.577

看看这个插件：

[时刻倒计时](https://github.com/icambron/moment-countdown)

> moment-countdown 是一个与[Countdown.js集成的小](http://countdownjs.org/)[moment.js](http://momentjs.com/)插件 。文件在[这里](https://raw.github.com/icambron/moment-countdown/master/dist/moment-countdown.min.js)。

**这个怎么运作？**

```
//from then until now
moment("1982-5-25").countdown().toString(); //=> '30 years, 10 months, 14 days, 1 hour, 8 minutes, and 14 seconds'

//accepts a moment, JS Date, or anything parsable by the Date constructor
moment("1955-8-21").countdown("1982-5-25").toString(); //=> '26 years, 9 months, and 4 days'

//also works with the args flipped, like diff()
moment("1982-5-25").countdown("1955-8-21").toString(); //=> '26 years, 9 months, and 4 days'

//accepts all of countdown's options
moment().countdown("1982-5-25", countdown.MONTHS|countdown.WEEKS, NaN, 2).toString(); //=> '370 months, and 2.01 weeks' 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2016-06-24T21:38:15.513

虽然我确信这不会被接受为这个非常古老的问题的答案，但我来到这里寻找一种方法来做到这一点，这就是我解决问题的方法。

我[在 codepen.io](http://codepen.io/autoschematic/pen/QEdjyV)创建了一个演示。

### 的HTML：

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.13.0/moment.min.js" type="text/javascript"></script>
<script src="https://cdn.rawgit.com/mckamey/countdownjs/master/countdown.min.js" type="text/javascript"></script>
<script src="https://code.jquery.com/jquery-3.0.0.min.js" type="text/javascript"></script>
<div>
  The time is now: <span class="now"></span>, a timer will go off <span class="duration"></span> at <span class="then"></span>
</div>
<div class="difference">The timer is set to go off <span></span></div>
<div class="countdown"></div> 
```

### Javascript：

```
var now = moment(); // new Date().getTime();
var then = moment().add(60, 'seconds'); // new Date(now + 60 * 1000);

$(".now").text(moment(now).format('h:mm:ss a'));
$(".then").text(moment(then).format('h:mm:ss a'));
$(".duration").text(moment(now).to(then));
(function timerLoop() {
  $(".difference > span").text(moment().to(then));
  $(".countdown").text(countdown(then).toString());
  requestAnimationFrame(timerLoop);
})(); 
```

### 输出：

```
The time is now: 5:29:35 pm, a timer will go off in a minute at 5:30:35 pm
The timer is set to go off in a minute
1 minute 
```

注意：上面的第 2 行根据[momentjs](http://momentjs.com/)更新，上面的第 3 行根据[countdownjs](http://countdownjs.org/)更新，所有这些都以大约 60FPS 的速度进行动画处理，因为[`requestAnimationFrame()`](http://caniuse.com/#feat=requestanimationframe)

* * *

## 代码片段：

或者，您可以只查看以下代码片段：

```
var now = moment(); // new Date().getTime();
var then = moment().add(60, 'seconds'); // new Date(now + 60 * 1000);

$(".now").text(moment(now).format('h:mm:ss a'));
$(".then").text(moment(then).format('h:mm:ss a'));
$(".duration").text(moment(now).to(then));
(function timerLoop() {
  $(".difference > span").text(moment().to(then));
  $(".countdown").text(countdown(then).toString());
  requestAnimationFrame(timerLoop);
})();

// CountdownJS: http://countdownjs.org/
// Rawgit: http://rawgit.com/
// MomentJS: http://momentjs.com/
// jQuery: https://jquery.com/
// Light reading about the requestAnimationFrame pattern:
// http://www.paulirish.com/2011/requestanimationframe-for-smart-animating/
// https://css-tricks.com/using-requestanimationframe/
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.13.0/moment.min.js" type="text/javascript"></script>
<script src="https://cdn.rawgit.com/mckamey/countdownjs/master/countdown.min.js" type="text/javascript"></script>
<script src="https://code.jquery.com/jquery-3.0.0.min.js" type="text/javascript"></script>
<div>
  The time is now: <span class="now"></span>,
</div>
<div>
  a timer will go off <span class="duration"></span> at <span class="then"></span>
</div>
<div class="difference">The timer is set to go off <span></span></div>
<div class="countdown"></div>
```

### 要求：

*   CountdownJS：[http :](http://countdownjs.org/) [//countdownjs.org/](http://rawgit.com/)（以及能够使用 countdownjs 的 Rawgit）
*   MomentJS：[http ://momentjs.com/](http://momentjs.com/)
*   [`requestAnimationFrame()`](http://caniuse.com/#feat=requestanimationframe)- 将其用于动画而不是`setInterval()`.

### 可选要求：

*   jQuery：[https ://jquery.com/](https://jquery.com/)

此外，这里有一些关于`requestAnimationFrame()`模式的简单读物：

*   [http://www.paulirish.com/2011/requestanimationframe-for-smart-animating/](http://www.paulirish.com/2011/requestanimationframe-for-smart-animating/)
*   [https://css-tricks.com/using-requestanimationframe/](https://css-tricks.com/using-requestanimationframe/)

我发现`requestAnimationFrame()`模式是比`setInterval()`模式更优雅的解决方案。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2019-01-04T14:56:52.590

我想我也会把它扔在那里（没有插件）。它倒计时 10 秒到未来。

```
 var countDownDate = moment().add(10, 'seconds');

      var x = setInterval(function() {
        diff = countDownDate.diff(moment());

        if (diff <= 0) {
          clearInterval(x);
           // If the count down is finished, write some text 
          $('.countdown').text("EXPIRED");
        } else
          $('.countdown').text(moment.utc(diff).format("HH:mm:ss"));

      }, 1000);
```

```
<script src="https://momentjs.com/downloads/moment.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<div class="countdown"></div>
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-04-21T08:37:58.477

时区。`getTimezoneOffset()`如果您希望来自世界各地的访问者获得相同的时间，您必须使用它们来处理它们。

试试这个[http://jsfiddle.net/cxyms/2/](http://jsfiddle.net/cxyms/2/)，它适用于我，但我不确定它是否适用于其他时区。

```
var eventTimeStamp = '1366549200'; // Timestamp - Sun, 21 Apr 2013 13:00:00 GMT
var currentTimeStamp = '1366547400'; // Timestamp - Sun, 21 Apr 2013 12:30:00 GMT

var eventTime = new Date();
eventTime.setTime(366549200);

var Offset = new Date(eventTime.getTimezoneOffset()*60000)

var Diff = eventTimeStamp - currentTimeStamp + (Offset.getTime() / 2);
var duration = moment.duration(Diff, 'milliseconds');
var interval = 1000;

setInterval(function(){
  duration = moment.duration(duration.asMilliseconds() - interval, 'milliseconds');
  $('.countdown').text(moment(duration.asMilliseconds()).format('H[h]:mm[m]:ss[s]'));
}, interval); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-10-13T14:15:25.230

这对我来说是上述答案的混合体。

```
const moment = require('moment');
require("moment-countdown");
let timeRemaining = 2330;
console.log('moment', moment(moment().add(timeRemaining, 'seconds')).countdown().toString()); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-07-31T10:36:50.420

这里有一些其他的解决方案。无需使用额外的插件。

下面的片段使用[`.subtract`](https://momentjs.com/docs/#/durations/subtract/)API 并且需要 2.1.0+

片段也可在此处获得[https://jsfiddle.net/traBolic/ku5cyrev/](https://jsfiddle.net/traBolic/ku5cyrev/)

[`.format`](https://momentjs.com/docs/#/displaying/format/)使用API格式化：

```
const duration = moment.duration(9, 's');

const intervalId = setInterval(() => {
  duration.subtract(1, "s");

  const inMilliseconds = duration.asMilliseconds();

  // "mm:ss:SS" will include milliseconds
  console.log(moment.utc(inMilliseconds).format("HH[h]:mm[m]:ss[s]"));

  if (inMilliseconds !== 0) return;

  clearInterval(intervalId);
  console.warn("Times up!");
}, 1000);
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.27.0/moment.min.js"></script>
```

模板字符串中的Manuel格式[`.hours`](https://momentjs.com/docs/#/durations/hours/)和API[`.minutes`](https://momentjs.com/docs/#/durations/minutes/)[`.seconds`](https://momentjs.com/docs/#/durations/seconds/)

```
const duration = moment.duration(9, 's');

const intervalId = setInterval(() => {
  duration.subtract(1, "s");

  console.log(`${duration.hours()}h:${duration.minutes()}m:${duration.seconds()}s`);
  // `:${duration.milliseconds()}` to add milliseconds

  if (duration.asMilliseconds() !== 0) return;

  clearInterval(intervalId);
  console.warn("Times up!");
}, 1000);
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.27.0/moment.min.js"></script>
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2017-04-28T16:17:13.940

以下还需要[moment-duration-format 插件](https://github.com/jsmreese/moment-duration-format)：

```
$.fn.countdown = function ( options ) {
    var $target = $(this);
    var defaults = {
        seconds: 0,
        format: 'hh:mm:ss',
        stopAtZero: true
    };
    var settings = $.extend(defaults, options);
    var eventTime = Date.now() + ( settings.seconds * 1000 );
    var diffTime = eventTime - Date.now();
    var duration = moment.duration( diffTime, 'milliseconds' );
    var interval = 0;
    $target.text( duration.format( settings.format, { trim: false }) );
    var counter = setInterval(function () {
        $target.text( moment.duration( duration.asSeconds() - ++interval, 'seconds' ).format( settings.format, { trim: false }) );
        if( settings.stopAtZero && interval >= settings.seconds ) clearInterval( counter );
    }, 1000);
}; 
```

使用示例：

```
$('#someDiv').countdown({
    seconds: 30*60,
    format: 'mm:ss'
}); 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2019-12-20T17:17:20.947

这是我的 5 分钟计时器：

```
var start = moment("5:00", "m:ss");
var seconds = start.minutes() * 60;
this.interval = setInterval(() => {
    this.timerDisplay = start.subtract(1, "second").format("m:ss");
    seconds--;
    if (seconds === 0) clearInterval(this.interval);
}, 1000); 
```

* * *

## 回答 #10

> 赞同：-2
> 
> 时间：2020-06-26T07:02:26.410

您没有使用本机反应或反应，所以请原谅我这不是您的解决方案。- 因为这是一篇已有 7 年历史的帖子，我很确定你现在已经明白了；）

但是我一直在为 react-native 寻找类似的东西，这让我想到了这个 SO 问题。万一其他人走上同一条路，我想我会分享我的 `use-moment-countdown`钩子以做出反应或反应原生：[https](https://github.com/BrooklinJazz/use-moment-countdown) ://github.com/BrooklinJazz/use-moment-countdown 。

例如，您可以像这样制作一个 10 分钟的计时器：

```
import React from 'react'

import  { useCountdown } from 'use-moment-countdown'

const App = () => {
  const {start, time} = useCountdown({m: 10})
  return (
    <div onClick={start}>
      {time.format("hh:mm:ss")}
    </div>
  )
}

export default App 
```

# jquery - 在 .fail() 之后不调用 jQuery Deferred .then()

> ID：16129166
> 
> 赞同：9
> 
> 时间：2013-04-21T08:07:02.250
> 
> 标签：jquery, jquery-deferred

我正在使用 jQuery.Deferred 并注册`done`,`fail`和`then`处理程序：

```
$.when( some_ajax(url) )
    .done(function(result){})
    .fail(function(){})
    .then(function(){}); //just like that, with a single parameter 
```

我发现当我的 ajax 调用成功`done`并`then`按此顺序调用回调时。但是，当 ajax 失败时，会`fail`调用回调，但我没有得到`then`回调。

我已阅读 jQuery.Deferred 文档，但找不到有关此行为原因的提示。

当使用`always`代替时`then`，它在两种情况下都会被调用——成功和失败（首先`done`/`fail`被调用，然后`always`被调用）。该文档似乎没有表明我所描述的场景之间的预期差异`always`，`then`为什么它们的行为不同？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-04-21T08:10:49.887

的语法`.then()`是[.then(successCallback, failureCallbacl)](http://api.jquery.com/deferred.then/)这就是为什么在成功的情况下都被调用，而在失败的情况下只`fail`被调用。

在您的情况下，您只将一个回调传递给该`.then()`方法，它将被注册为一个成功回调，因此您有两个成功回调，一个注册了`done()`，另一个注册了`.then()`. 但是对于错误情况，您只注册了一个回调`.fail()`

如果您希望无论成功/失败都调用回调，请使用[.always()](http://api.jquery.com/deferred.always/)

# android - 如何在EditText中设置光标可见android但不设置文本框可编辑？

> ID：16129169
> 
> 赞同：0
> 
> 时间：2013-04-21T08:07:26.543
> 
> 标签：android

我知道如何设置光标在 EditText 中可见。但我不希望 EditText 本身在不使用我的应用程序中的按钮的情况下是可点击和可编辑的。

考虑一个有闪烁光标的科学计算器，但我不希望用户能够点击文本框。我怎样才能做到这一点？

在我的主文件中，我确实设置了：

```
 inputText.setCursorVisible(true); 
```

其中 inputText 属于 EditText 类。

```
 <EditText  
    android:id="@+id/textIn"
    android:clickable="false"
    android:editable="false" 
    android:layout_width="fill_parent" 
    android:layout_height="100dp" 
    android:textSize="20sp"
    android:gravity="left"
    android:background="@drawable/inputview1"
    android:textColor="@color/black"
    android:layout_marginLeft = "5sp"
    android:layout_marginRight = "5sp"/> 
```

# javascript - Raphael Paper.setSize 问题

> ID：16129171
> 
> 赞同：2
> 
> 时间：2013-04-21T08:07:36.043
> 
> 标签：javascript, raphael

您好，提前感谢您的帮助。我整天都在用这个键盘敲打我的头，需要一些帮助。我对 JavaScript 和 Raphael 还很陌生，所以希望它不是很明显 - 但我花了很多时间谷歌搜索，检查文档，并在这个网站上搜索答案，但无济于事。

我正在开发一个项目，该项目要求元素可在画布上拖动，其方式与发布到 Raphael 主页的示例大致相同：[http](http://raphaeljs.com/graffle.html) : //raphaeljs.com/graffle.html例外 - 当用户重新调整浏览器窗口大小时，画布大小不会相应更新。相反，尽管画布正确报告了新尺寸（通过输出到控制台），但我无法将任何元素拖过画布的原始 x/y 边界。

以下是相关的代码片段：

CSS：

```
#canvas_container {  
background-color: #696969;
    color: #FFFFFF;
    padding: 15px 25px;
    shadow: 1px 1px #FFFFFF;
    margin-right: 310px;
    margin-top: 75px;
    min-width: 640px;
    min-height: 640px;
    border-radius: 20px;
} 
```

JavaScript/拉斐尔：

```
 //initialize canvas 
    fiddle.paper = new Raphael(document.getElementById("canvas_container"), $('#canvas_container').width(), $('#canvas_container').height()); 

    //resize handler
    $(window).resize(function() {
        if(this.resizeTO) clearTimeout(this.resizeTO);
        this.resizeTO = setTimeout(function() {$(this).trigger('resizeEnd');}, 300);            
    });

    $(window).bind('resizeEnd', function() {
    //resize canvas
    fiddle.paper.setSize($('#canvas_container').width(), $('#canvas_container').height());

    }); 
```

我到底错过了什么？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T09:22:34.890

由于您说您的`$(#canvas_container)`尺寸已正确记录，因此该`setSize`调用应该可以工作。

您可以与我的工作[jsfiddle](http://jsfiddle.net/alexis_tondelier/HGZ4S/)进行比较。您将特别注意`setViewBox`您可能进行的任何调用，这意味着对视口边界的一些限制。如果您有这些限制，您将不得不自己更新您的视图框，因为 Raphael 在`setSize`被调用时对视图框所做的更新并不总是完全一致的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T09:29:18.473

如果您不需要对 IE7-8 的支持，那么自动调整大小可以非常简单：

```
fiddle.paper = new Raphael("canvas_container", '100%','100%'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T21:28:39.473

首先 - 感谢那些做出回应的人！与你们互动帮助我弄清楚发生了什么。

事实证明，问题根本不是 Raphael Canvas，而是我用来处理拖放的插件 (Raphael.FreeTransform)。与本机 Raphael 拖放处理程序不同，FreeTransform 设置边界以防止用户将对象拖出画布。默认边界设置为画布的边界。当您通过 paper.setSize() 调整画布大小时，插件不会更新边界，除非您通过[边界选项](https://github.com/ElbertF/Raphael.FreeTransform/blob/master/README.md#boundary--x-int-y-int-width-int-height-int---false)明确告诉您。这是工作调整大小代码的样子：

```
 //resize handler
    $(window).resize(function() {
        if(this.resizeTO) clearTimeout(this.resizeTO);
        this.resizeTO = setTimeout(function() {$(this).trigger('resizeEnd');}, 300);

    });

    $(window).bind('resizeEnd', function() {
    //resize canvas
        fiddle.paper.setSize($('#canvas_container').width(), $('#canvas_container').height());

        for (var i = 0; i < fiddle.ftArray.length; i ++) {
            fiddle.ftArray[i].setOpts({boundary: {x: 0, y: 0, width: $('#canvas_container').width(), height: $('#canvas_container').height() }});

        }

    }); 
```

（ftArray 是在窗口加载时创建的 FreeTransform 对象数组）

# asp.net-mvc - 为什么我必须将参数作为查询字符串传递给 MVC 中的操作方法？

> ID：16129178
> 
> 赞同：1
> 
> 时间：2013-04-21T08:09:00.310
> 
> 标签：asp.net-mvc, asp.net-mvc-3, razor

我是新手`mvc`。我正在创建一个测试应用程序`mvc`。

[在这里](http://www.asp.net/mvc/tutorials/mvc-4/getting-started-with-aspnet-mvc4/adding-a-controller)，我研究了`mvc`与 url 一起使用的`/[Controller]/[ActionName]/[Parameters]`

但在我的应用程序中，我必须将参数作为`/home/index?name=test`. 我认为它应该作为`/home/index/test`. 但它不能以这种方式工作。

**这是`ActionMethod`在`homeController`**

```
 public ActionResult Index(String name)
    {
        ViewBag.name = name;
        return View();
    } 
```

**路由代码`Global.asax.cs`**

```
public static void RegisterRoutes(RouteCollection routes)
    {
        routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

        routes.MapRoute(
            "Default", // Route name
            "{controller}/{action}/{id}", // URL with parameters
            new { controller = "Home", action = "Index", id = UrlParameter.Optional } // Parameter defaults
        );

    } 
```

**索引.cshtml**

```
@{
ViewBag.Title = "Index";
Layout = "~/Views/Shared/_Layout.cshtml";

 }

  <h2>@ViewBag.name</h2> 
```

谁能帮我找出为什么它不能以`/home/index/test`格式工作。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T08:12:02.307

```
Routes.MapRoute(
        "DefaultWithName", // Route name
        "{controller}/{action}/{name}", // URL with parameters
        new { controller = "Home", action = "Index", name = UrlParameter.Optional } 
```

因为您的可选参数说“id”，而在您的控制器中它是“名称”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T05:33:32.190

正如@Lars & @Joel 所指出的，您的路线将默认参数名称指定为 ID。

宣布

```
routes.MapRoute(
           "DefaultWithName", // Route name
           "{controller}/{action}/{name}", // URL with parameters
           new { controller = "Home", action = "Index", name = UrlParameter.Optional }); 
```

并使用路线使用代码

```
@Url.RouteUrl("DefaultWithName", new { name = "test" }) 
```

代替`@Url.Action`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-22T04:52:19.837

正如 Lars 指出的那样，您的路线将默认参数名称指定为 ID。您的控制器将其指定为“名称”。如果您将控制器参数更改为 int ID，则 home/index/3 将起作用。

# css - 使用 Gridster 插件定位某些 CSS 类

> ID：16129179
> 
> 赞同：3
> 
> 时间：2013-04-21T08:09:01.983
> 
> 标签：css, gridster

我正在使用[Gridster 插件](http://gridster.net/)，其中列宽定义如下：

```
[data-sizex="12"] { width: ... }
[data-sizex="11"] { width: ... }
[data-sizex="10"] { width: ... }
.... 
```

我对此有两个问题；

1.  这些是什么类型的 CSS 类？我从来没有做过/见过这样的事情，尤其是在 CSS 中。
2.  如果我想从 1-12 中选择所有列，我该如何使用代码？通常我使用类似`[class*=".."] this`. 我不认为我可以为上述情况获得这样的格式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T08:48:29.813

1) 这些是[CSS 属性选择器](http://www.w3.org/TR/css3-selectors/#attribute-selectors)，具体来说是**属性存在和值选择器**

2）如果您想选择所有列，您不必使用属性选择器，只需将 CSS 应用于元素。好吧，对于 gridster 插件，可以在演示 jsfiddle 中替换`.grid`为`.gs_w { }`,`.gs_w[data-sizex="12"]{ }`等等。

```
.grid{
    /* Applies to all */
    background: #808080;
    color: #fff;
    border: 1px solid #eee; 
    padding: 5px 10px;
}

.grid[data-sizex="12"]{
    width: 720px;
}
.grid[data-sizex="11"]{
    width: 710px;
}
.grid[data-sizex="10"]{
    width: 700px;
}
.grid[data-sizex="9"]{
    width: 690px;
}
.grid[data-sizex="8"]{
    width: 680px;
}
.grid[data-sizex="7"]{
    width: 670px;
}
.grid[data-sizex="6"]{
    width: 660px;
}
.grid[data-sizex="5"]{
    width: 650px;
}
.grid[data-sizex="4"]{
    width: 640px;
}
.grid[data-sizex="3"]{
    width: 630px;
}
.grid[data-sizex="2"]{
    width: 620px;
}
.grid[data-sizex="1"]{
    width: 610px;
} 
```

[在这里演示](http://jsfiddle.net/6XVVP/)

# mysql - 在 WHERE 子句和 BETWEEN 运算符中使用 CASE 表达式

> ID：16129181
> 
> 赞同：2
> 
> 时间：2013-04-21T08:09:28.267
> 
> 标签：mysql, sql

我正在尝试根据以下某些条件从我的表中获取一些行：

```
SELECT * FROM MyTable WHERE Date BETWEEN 
CASE dayofweek(curdate())
when 1 then curdate() AND adddate(curdate(), interval 6 day)
when 2 then subdate(curdate(), interval 1 day) AND adddate(curdate(), interval 5 day)
when 3 then subdate(curdate(), interval 2 day) AND adddate(curdate(), interval 4 day)
when 4 then subdate(curdate(), interval 3 day) AND adddate(curdate(), interval 3 day)
when 5 then subdate(curdate(), interval 4 day) AND adddate(curdate(), interval 2 day)
when 6 then subdate(curdate(), interval 5 day) AND adddate(curdate(), interval 1 day)
when 7 then subdate(curdate(), interval 6 day) AND curdate()
END 
```

但由于某种原因它不起作用。它给了我一个语法错误。我应该如何完成这样的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T08:12:59.327

试试这个，

```
SELECT * 
FROM MyTable 
WHERE  1 = 
    CASE dayofweek(curdate())
        when 1 then Date BETWEEN curdate() AND adddate(curdate(), interval 6 day)
        when 2 then Date BETWEEN subdate(curdate(), interval 1 day) AND adddate(curdate(), interval 5 day)
        when 3 then Date BETWEEN subdate(curdate(), interval 2 day) AND adddate(curdate(), interval 4 day)
        when 4 then Date BETWEEN subdate(curdate(), interval 3 day) AND adddate(curdate(), interval 3 day)
        when 5 then Date BETWEEN subdate(curdate(), interval 4 day) AND adddate(curdate(), interval 2 day)
        when 6 then Date BETWEEN subdate(curdate(), interval 5 day) AND adddate(curdate(), interval 1 day)
        when 7 then Date BETWEEN subdate(curdate(), interval 6 day) AND curdate()
    END 
```

在这种`CASE()`情况下，语句将只返回两个可能的值：`1`和`0`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T08:12:08.450

CASE 返回一个*值*，而不是*表达式*。您必须对 BETWEEN 的每一侧重复 CASE 语句：

```
SELECT * FROM MyTable
WHERE Date BETWEEN 
  CASE dayofweek(curdate())
    when 1 then curdate()
    when 2 then subdate(curdate(), interval 1 day)
    ... etc
  END
AND -- this is the "AND" for the BETWEEN values
  CASE dayofweek(curdate())
  when 1 then adddate(curdate(), interval 6 day)
  when 2 then adddate(curdate(), interval 5 day)
  ... etc
END 
```

# php - OSM 数据解析以获取具有子节点的节点

> ID：16129184
> 
> 赞同：3
> 
> 时间：2013-04-21T08:09:36.070
> 
> 标签：php, xml, simplexml, openstreetmap

我下载了一个小区域的 Open Street Map 数据，我想过滤数据以获取具有特殊类别的节点。

这是 OSM 数据的示例

```
 <node id="505126369" lat="31.2933856" lon="34.2687443" user="JumpStart International" uid="125156" visible="true" version="1" changeset="2568758" timestamp="2009-09-22T13:05:10Z"/>
 <node id="505126372" lat="31.2682934" lon="34.2745680" user="JumpStart International" uid="125156" visible="true" version="1" changeset="2568758" timestamp="2009-09-22T13:05:10Z"/>
 <node id="505126375" lat="31.2953082" lon="34.3471630" user="JumpStart International" uid="125156" visible="true" version="1" changeset="2568758" timestamp="2009-09-22T13:05:10Z"/>
 <node id="505126378" lat="31.2807872" lon="34.2757999" user="JumpStart International" uid="125156" visible="true" version="1" changeset="2568758" timestamp="2009-09-22T13:05:11Z">
   <tag k="amenity" v="school"/>
   <tag k="name" v="Al Aqqad Basic &amp; Secondary Female School"/>
   <tag k="name:ar" v="مدرسة العقاد الأساسية والثانوية للبنات"/>
  </node> 
```

我想获得整个学校、医院的数据。

如果有人使用 PHP 或 Java 进行过 XML 解析，我将非常感谢与我和所有感兴趣的人分享它。

**编辑** 这是一个简单的开始，我刚刚

```
$dataFile = base_url() . 'media/files/osmdata/map_3.xml';
    //echo ($dataFile);

    $xml = simplexml_load_file($dataFile);

    //    $countTotal = count($xml->node);
    //   echo 'here'.$countTotal;
    foreach ($xml as $key => $val) {
        var_dump($val);
               // can't manage things overs here

    } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-21T12:35:21.653

以下是我编译的一个带有 PHP SimpleXML 的 OSM Overpass API 小示例，因为我们这里没有 PHP 并且我喜欢 OSM，所以让我们展示一些有用的示例。

第一部分展示了如何使用标准 PHP 查询 Overpass Endpoint。您不需要该部分，因为您已经将数据保存在硬盘上：

```
<?php
/**
 * OSM Overpass API with PHP SimpleXML / XPath
 *
 * PHP Version: 5.4 - Can be back-ported to 5.3 by using 5.3 Array-Syntax (not PHP 5.4's square brackets)
 */

//
// 1.) Query an OSM Overpass API Endpoint
//

$query = 'node
  ["amenity"~".*"]
  (38.415938460513274,16.06338500976562,39.52205163048525,17.51220703125);
out;';

$context = stream_context_create(['http' => [
    'method'  => 'POST',
    'header' => ['Content-Type: application/x-www-form-urlencoded'],
    'content' => 'data=' . urlencode($query),
]]);

# please do not stress this service, this example is for demonstration purposes only.
$endpoint = 'http://overpass-api.de/api/interpreter';
libxml_set_streams_context($context);
$start = microtime(true);

$result = simplexml_load_file($endpoint);
printf("Query returned %2\$d node(s) and took %1\$.5f seconds.\n\n", microtime(true) - $start, count($result->node)); 
```

对你来说，第二部分更有趣。那就是查询您已经拥有的 XML 数据。使用 xpath 最容易做到这一点，使用的 PHP XML 库基于 libxml，它支持[XPath 1.0](http://www.w3.org/TR/xpath/)，它很好地涵盖了各种查询需求。

以下示例列出了所有*学校*并尝试获取它们的名称。我还没有涵盖翻译，因为我的示例数据没有这些，但您也可以查找包括翻译在内的所有类型的名称，并且只喜欢特定的名称）：

```
//
// 2.) Work with the XML Result
//

# get all school nodes with xpath
$xpath = '//node[tag[@k = "amenity" and @v = "school"]]';
$schools = $result->xpath($xpath);
printf("%d School(s) found:\n", count($schools));
foreach ($schools as $index => $school)
{
    # Get the name of the school (if any), again with xpath
    list($name) = $school->xpath('tag[@k = "name"]/@v') + ['(unnamed)'];
    printf("#%02d: ID:%' -10s  [%s,%s]  %s\n", $index, $school['id'], $school['lat'], $school['lon'], $name);
} 
```

这里的关键点是 xpath 查询。使用了两个，第一个用于获取具有特定标签的节点。我认为这对你来说是最有趣的：

```
//node[tag[@k = "amenity" and @v = "school"]] 
```

这行说：给我所有的*节点*元素，其中有一个*标签*元素，其中*k*属性值*"amenity"*和*v*属性值*"school"*。这是您必须过滤掉那些标有 amenity school的*节点的条件。*

再次使用 xpath，现在相对于那些学校节点查看是否有名称，如果有，则获取它：

```
tag[@k = "name"]/@v' 
```

这一行说：相对于当前节点，给我来自*标签*元素的*v*属性，作为*k*属性值*"name"*。如您所见，某些部分再次与之前的行相似。我认为你们都可以根据自己的需要采用它们。

 ***因为并非所有*学校*节点都有名称，所以通过将默认字符串添加到（然后为空）结果数组中来提供默认字符串以供显示：

```
list($name) = $school->xpath('tag[@k = "name"]/@v') + ['(unnamed)'];
                                                    ^^^^^^^^^^^^^^^
                                                Provide Default Value 
```

所以这里是我对该代码示例的结果：

```
Query returned 907 node(s) and took 1.10735 seconds.
10 School(s) found:
#00: ID:332534486   [39.5017565,16.2721899]  Scuola Primaria
#01: ID:1428094278  [39.3320912,16.1862820]  (unnamed)
#02: ID:1822746784  [38.9075566,16.5776597]  (unnamed)
#03: ID:1822755951  [38.9120272,16.5713431]  (unnamed)
#04: ID:1903859699  [38.6830409,16.5522243]  Liceo Scientifico Statale A. Guarasci
#05: ID:2002566438  [39.1347698,16.0736924]  (unnamed)
#06: ID:2056891127  [39.4106679,16.8254844]  (unnamed)
#07: ID:2056892999  [39.4124687,16.8286119]  (unnamed)
#08: ID:2272010226  [39.4481717,16.2894353]  SCUOLA DELL'INFANZIA SAN FRANCESCO
#09: ID:2272017152  [39.4502366,16.2807664]  SCUOLA MEDIA 
```

我希望这已经很有用了，如果您有更多澄清问题，请告诉我。

* * *

> （by [rbwilkinson](https://stackoverflow.com/users/2100086/rbwilkinson)）：这是您可以添加其他参数以查找其他值的方式。以下示例查找一公里内的其他属性：

```
$query = 'node
  ["addr:postcode"~"RM12"]
  (51.5557914,0.2118915,51.5673083,0.2369398);
   node
  (around:1000)
  ["amenity"~"fast_food"];
           out;';

$context = stream_context_create(['http' => [
    'method'  => 'POST',
    'header' => ['Content-Type: application/x-www-form-urlencoded'],
    'content' => 'data=' . urlencode($query),
]]);

$endpoint = 'http://overpass-api.de/api/interpreter';
libxml_set_streams_context($context);

$result = simplexml_load_file($endpoint);
printf("Query returned %2\$d node(s) and took %1\$.5f seconds.\n\n", microtime(true) - $start, count($result->node));
} 
```***

# c++ - C++ 类型 const* p 和类型 const* const p

> ID：16129186
> 
> 赞同：0
> 
> 时间：2013-04-21T08:09:41.897
> 
> 标签：c++, pointers, constants, mutators

我有这个`Type const* p`方法。确定 p 的指针`*p`永远不会被修改吗？

与`Type const* const q`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T08:09:41.897

`Type const* p`是一个指向 const 类型的对象的指针`Type`。要从左到右阅读，指针指向由星号之前的所有内容定义的类型。同样的方式，`Type const* const q`是一个指向类型为 const 对象的 const 指针`Type`。

此外，`*p`不能通过 p 进行修改。`p`被定义为 const 指向`*p`并承诺不修改它。但是，`*p`p 的指针可以被任何其他指向它的指针修改。

例如，我们可以有

```
Type t;
Type const* pc = &t;
Type *pnc = &t; 
```

`pc`承诺不改变 t，`pnc`没有。假设类 Type 包含一个 const`inspect() const`方法和一个非常量`mutate()`方法。那么我们可以有

```
pc->inspect();
pnc->inspect();
pnc->mutate(); 
```

而这个会引起编译器的错误：

```
pc->mutate(); 
```

`Type const* const q`是指向 const 对象的 a，`*q`不能通过 q 修改，就像 p 一样。更重要的是，指针`q`不能被修改：它不能被第二次分配指针。

***此外，虽然这听起来很奇怪，但您可以在代码中更改`Type`指针指向的类型的对象`Type const* p`——但不能通过`p`.***

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T09:29:37.163

是的，它不能被修改，但是，它只会保证指针指向的变量是常量，它与`Type const* const q`保证指针是常量的不同

# linux - 从文件系统中查找路由器固件的 linux 内核版本

> ID：16129188
> 
> 赞同：5
> 
> 时间：2013-04-21T08:09:43.123
> 
> 标签：linux, linux-kernel, embedded-linux, router, firmware

我已经下载了一些 D-Link 路由器的固件更新文件`DAP2690-firmware-v101-rc019.bin`（[链接）。](http://ftp.dlink.ru/pub/Wireless/DAP-2690/Firmware/1.01/)

我已经使用`binwalk -e DAP2690-firmware-v101-rc019.bin`(Binwalk v1.2b) 提取了它，现在我在文件夹中有根文件系统`squashfs-root`。

我想仅从提取的文件（最好仅从文件夹`squashfs-root`）中了解此固件的 linux 内核版本。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T20:38:16.760

我会去检查在文件系统上编译的模块。每个模块都有一个`vermagic`编号，该编号必须等于内核 vermagic 才能`insmod`加载模块。

这是一个准确描述如何提取它的[链接。](http://plastilinux.blogspot.co.il/2009/11/how-to-know-version-of-kernel-without.html)它还显示了如何使用`strings`以查找内核版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T14:20:07.917

`squashfs-root`文件夹旁边有一个`A0`文件。

`binwalk A0`透露：

```
 DECIMAL    HEX         DESCRIPTION
    -------------------------------------------------------------------------------------------------------------------
    0           0x0         ELF 64-bit MSB MIPS32 rel2 executable, MIPS, version 1 (SYSV)
    2969600     0x2D5000    Linux kernel version "2.6.16.26-Cavium-Octeon (william@J10) (gcc version 4.1.1 (Cavium@J10) (gcc version 4.1.1 (Cavium Networks Development Build)) "
    2991185     0x2DA451    LZMA compressed data, properties: 0x40, dictionary size: 2097152 bytes, uncompressed size: 2097216 bytes
    3329399     0x32CD77    LZMA compressed data, properties: 0x40, dictionary size: 16777216 bytes, uncompressed size: 1073741824 bytes
    3429479     0x345467    LZMA compressed data, properties: 0x40, dictionary size: 33554432 bytes, uncompressed size: 131072 bytes
    3429503     0x34547F    LZMA compressed data, properties: 0x40, dictionary size: 33554432 bytes, uncompressed size: 131072 bytes
    3429527     0x345497    LZMA compressed data, properties: 0x40, dictionary size: 33554432 bytes, uncompressed size: 131072 bytes
    3504750     0x357A6E    LZMA compressed data, properties: 0x5B, dictionary size: 16777216 bytes, uncompressed size: 88 bytes
    3915776     0x3BC000    gzip compressed data, from Unix, last modified: Thu Mar 11 16:11:03 2010, max compression 
```

# c# - 无法从 List 转换为 EntityCollection

> ID：16129189
> 
> 赞同：2
> 
> 时间：2013-04-21T08:09:52.110
> 
> 标签：c#, asp.net, entity-framework

我正在尝试更新 entityCollection

这是我的 linq：

```
itemFromDb.MamConfigurationToBrowser_V1 = 
                (EntityCollection<MamConfigurationToBrowser_V1>) itemFromDb.MamConfigurationToBrowser_V1
                                             .Select(browserEfItem =>
                                                     FillFromUi(browserEfItem,
                                                                item.MamConfigurationToBrowser_V1
                                                                .Single(browserUiItem => browserUiItem.BrowserVersionId == browserEfItem.BrowserVersionId)))
                                                                .ToList().AsEnumerable(); 
```

但是我得到一个运行时转换错误：

> 无法转换类型为“System.Collections.Generic.List `1[Conduit.Mam.MaMDBEntityFramework.MamConfigurationToBrowser_V1]' to type 'System.Data.Objects.DataClasses.EntityCollection`1 [Conduit.Mam.MaMDBEntityFramework.MamConfigurationToBrowser_V1]”的对象。

这是为什么？当我对实体进行 linq 时，不是吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T08:23:49.953

`List<MamConfigurationToBrowser_V1>`您正在使用 Linq 表达式中的倒数第二个调用创建一个`ToList()`，然后尝试将此列表强制转换为`EntityCollection<MamConfigurationToBrowser_V1`. 我建议创建一个新`EntityCollection`的并将 LINQ 查询的结果添加到此集合中，如下所示：

```
var collection = new EntityCollection<MamConfigurationToBrowser_V1>();
var processedItems = itemFromDb.MamConfigurationToBrowser_V1
                                         .Select(browserEfItem =>
                                                 FillFromUi(browserEfItem,
                                                            item.MamConfigurationToBrowser_V1
                                                            .Single(browserUiItem => browserUiItem.BrowserVersionId == browserEfItem.BrowserVersionId)))
                                                            .ToList();
foreach(var item in processedItems)
{
    collection.Add(item);
} 
```

**重要提示：**您的代码似乎将数据库问题与业务逻辑混合在一起，而且我个人从未`EntityCollect<T>`在我的代码中直接使用过。我不知道您的上下文，但也许您应该考虑使用存储库和工作单元模式。在 Google 上搜索它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T09:02:56.667

ItemFromDB 是一个独特的对象吗？我的意思是，如果 itemFromDB 不是列表，那么您正在尝试将唯一对象转换为列表。

您可以尝试使用 .FirstOrDefault() 而不是 .ToList().AsEnumerable()。

# file - 使用 Hill Cipher 和 Java 加密文件？

> ID：16129195
> 
> 赞同：2
> 
> 时间：2013-04-21T08:10:35.593
> 
> 标签：file, cryptography, encryption

众所周知，希尔密码是密码学中的经典密码，主要用于加密文本。我需要加密文件（例如 .doc、.ppt、.jpeg 等），而不仅仅是文件的内容。我已经在网上搜索过了，但没有找到太多专注于文件加密的研究。
我发现：加密 .txt 中的文本内容不会加密 .txt 文件。
使用 Java 或 .Net 或 Python（选择一个或几个），如何实现 Hill Cipher 来加密文件，如上所述？

请注意，这个问题不适用于我的家庭作业或作业。我只是对如何实现希尔密码来加密文件感到困惑和好奇。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T13:29:55.440

# linux - 测试 SLOB - 如何？

> ID：16129198
> 
> 赞同：1
> 
> 时间：2013-04-21T08:10:56.820
> 
> 标签：linux, linux-kernel, kernel, dynamic-memory-allocation

因此，我编辑了 SLOB 以使用最佳拟合算法，无论是在找到合适的页面还是合适的块时。**但问题是，我该如何测试它？**

我应该只编写执行 malloc 几次的用户级代码吗？我应该让一个模块对 kmalloc 做同样的事情吗？

对你的帮助表示感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T11:32:26.147

[SLOB](http://en.wikipedia.org/wiki/SLOB)是 Linux 内核对象的内存分配器。因此，它与用户模式堆内存管理器不同。要对其进行测试（从 SLOB 分配内存），您需要使用 kmalloc 或 kmem_cache_alloc。

或者，也许，您可以尝试创建 Linux 内核对象，例如从用户空间打开的进程、文件，以从 SLOB 分配内存。如果您的用户模式应用程序创建内核对象（例如打开的文件），那么您应该注意到 SLOB 内存空间的减少。相反，如果您从应用程序中销毁内核对象（例如关闭文件）。

虽然没有针对 Linux 内核的单元测试或自动化测试。- [Linux 内核是如何测试的？](https://stackoverflow.com/questions/3177338/how-is-linux-kernel-tested)

# php - 尽管文件检查为可写，但 PHP fopen 不起作用

> ID：16129199
> 
> 赞同：0
> 
> 时间：2013-04-21T08:11:14.877
> 
> 标签：php, fopen

帮助朋友解决他遇到的问题。他的网站正在使用 fopen 函数打开文件并保存对它的更改，但 fopen 失败并出现“Permission Denied”错误。该文件位于远程服务器上，并且权限似乎是正确的。

他正在使用的代码是...

```
if (isset($_POST['save'])) {
$filepath = "string.txt";
    if (file_exists($filepath)) {
        $file = fopen($filepath, "w+");
        fwrite($file, $_POST['save']);
        fclose($file);
    }
} 
```

我在这里使用了 VolkerK 的代码[php fopen 返回 false 但文件是可读/可写](https://stackoverflow.com/questions/3667466/php-fopen-returns-false-but-file-is-readable-writable)的以确定读/写权限并获得以下内容。

> PHP 版本：5.4.9
> Uname：Windows NT
> {File} 存在
> {File} 可读
> {File} 可写
> 最后错误：array(4){["type']=>int(2)["message"]=>字符串（131“fopen（{file}）：无法打开流：权限被拒绝。

起初我认为这是一个文件权限问题，但我认为如果 PHP 认为该文件是可写的，这不应该是问题，我是否正确阅读？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T00:45:34.297

尝试了FTP并到达那里。不过，必须正确设置 FTP 连接的上下文选项。

感谢您为我指明正确的方向。

```
if (isset($_POST['save'])) {
//Setup FTP connection
$ftp = "ftp://user:password@example.com/filepath/filename.txt";
//Set FTP Options
$stream_options = array('ftp' => array('overwrite' => true));
$stream_context = stream_context_create($stream_options);
//Open file and write changes
if (file_exists($ftp)) {
    $file = fopen($ftp, "w", 0 , $stream_context);
    fwrite($file, $_POST['save']);
    fclose($file);
    }
} 
```

# module - 将模块导入当前范围？

> ID：16129200
> 
> 赞同：2
> 
> 时间：2013-04-21T08:11:20.913
> 
> 标签：module, typescript

模块的名称很长（它们使导入函数的名称比需要的长三倍），例如：`mapconcat`看起来`Project.Utils.mapconcat`有没有办法导入这个函数并使用它而不用模块名称完全限定它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T07:09:31.057

你总是可以这样做：

```
var x = Project.Utils.mapconcat;
// now use x in place of mapconcat 
```

PS：可以使用import语句为模块创建别名

```
import pu = Project.Utils;
// now: 
pu.mapconcat 
```

这是假设 Utils 是一个模块名称（而不是一个类）。

# php - MySQL 内连接表从唯一表中提供重复值

> ID：16129208
> 
> 赞同：1
> 
> 时间：2013-04-21T08:12:33.150
> 
> 标签：php, mysql

你好，我有**两个表**，PK---->InnoDB 引擎中的 FK 关系----> **MySQL&PHP**

关系是**一个---->**第一个表是**“属性”**和第二个表之间有很多关系

表是**'propertyimages'**。第一个表中的每一行都是唯一的，但在第二个表中

第一个表的每一行在第二个表中都有很多行我如何**选择唯一行

第一个表和第二个表中关于第一个表的所有信息是我的查询：

```
SELECT DISTINCT properties.PropertyName, 
                properties.PropertyStatus, 
                propertyimages.PropertyImageID, 
                propertyimages.ImagePath 
FROM properties 
   INNER JOIN propertyimages 
      ON properties.PropertyImageID=propertyimages.PropertyImageID 
     AND propertyimages.PropertyImageID=8; 
```

它给出了结果：

```
PropertyName PropertyStatus Propertyid 属性图像路径
出租公寓 8 upload/hydrangeas.jpg
出租公寓 8 upload/jelsh.jpg
出租公寓 8 upload/penguins.jpg
出租公寓 8 upload/tulips.jpg

```

在这个结果中， **PropertyName**和**PropertyStatus**是重复的，但我想要一个

唯一的，因为它存储在第一个表中的**propertyName**和 **PropertyStatus**

属于第一个表**。Propertyid** 和 **PropertyImagepath**属于第二个表。

 *** * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T08:25:50.707

不幸的是，连接将为表 2 中找到的每个元素创建一条记录，并在第一个表中具有匹配的父元素 (id 8)。

您可以在第一个表字段上使用 GROUP BY id 8，但您可能无法获得所需的所有结果，因为它只会获取第一张图像。

您能否重组您的流程，以便在涉及图像（及其显示）时，您只需运行一个查询即可获取与属性 8 相关的每个图像

您始终可以使用嵌套查询（假设您希望在页面上显示属性的图像等）

```
$query1 = mysql_query("SELECT Propertyid, PropertyName, PropertyStatus FROM properties WHERE (search criteria)");
if (mysql_num_rows($query1) > 0) {
    while ($q1Row = mysql_fetch_array($query1)) {

        // Insert property specific data here before you display the images
        echo $q1Row['PropertyName']."<br>\n";
        echo $q1Row['PropertyStatus']."<br>\n";

        $query2 = "SELECT PropertyImageID, ImagePath FROM propertyimages WHERE PropertyImageID='".$q1Row['Propertyid']."'"
            if (mysql_num_rows($query2) > 0) {
                while ($q2Row = mysql_fetch_array($query2)) {

                    // add code here to do whatever you want with the images
                    echo '<image src="'.$q2Row['ImagePath'].'"><br>\n';

                }
            }
        }
    }
} 
```

了解您的数据库结构也将有所帮助..我想您会想要这样的东西

```
table 1 (properties)
  PropertyID (Primary Key)
  PropertyName
  PropertyStatus

table 2 (propertyImages)
  ImageID (Primary Key)
  PropertyID (many to one reference to PropertyID in table 1)
  ImagePath 
```

我可能对 FK 方法有点忘记，所以如果这里也有适合我的课程，我很想听听你有什么意见。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T08:42:40.957

你离解决方案只有一步之遥，你只需要从第二个表中选择，然后是第一个，这样你就可以得到所有匹配的结果

```
SELECT DISTINCT properties.PropertyName, 
            properties.PropertyStatus, 
            propertyimages.PropertyImageID, 
            propertyimages.ImagePath 
FROM propertyimages 
   INNER JOIN properties  
     ON propertyimages.PropertyImageID = properties.PropertyImageID
     AND propertyimages.PropertyImageID=8; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T08:55:44.283

[您可以使用GROUP_CONCAT](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat)来实现这一点。但我也认为，最好进行两个查询。没有错。

```
SELECT DISTINCT properties.PropertyName, 
                properties.PropertyStatus, 
                propertyimages.PropertyImageID, 
                GROUP_CONCAT(propertyimages.ImagePath) 
FROM properties 
   INNER JOIN propertyimages 
      ON properties.PropertyImageID=propertyimages.PropertyImageID 
      AND propertyimages.PropertyImageID=8;
GROUP BY propertyimages.PropertyImageID 
```**

# android - 键盘启动时禁用特定选项卡的 TabBar

> ID：16129209
> 
> 赞同：2
> 
> 时间：2013-04-21T08:12:53.433
> 
> 标签：android, android-softkeyboard, android-tabactivity

当仅针对特定选项卡时，我需要禁用在键盘上方显示选项卡栏。我已经搜索并尝试了几种方法： `android:windowSoftInputMode="stateVisible|adjustResize|adjustPan"`适用于所有标签。我只需要一个标签

*   我认为应该工作的唯一方法是将广播从选项卡片段发送到 TabActivity，它工作正常，但是在处理（键入/删除）片段中唯一的编辑文本时，选项卡栏中的问题出现在键盘上再次。

广播是：（标签片段）：

```
 Intent intent = new Intent(TabActivityName.ACTION_SET_SOFT_INPUT_MODE);
    intent.putExtra(TabActivityName.SOFT_INPUT_MODE, WindowManager.LayoutParams.SOFT_INPUT_ADJUST_PAN);
    getActivity().sendBroadcast(intent); 
```

并从 TabActivityName 成功调用广播并执行以下操作：

```
getWindow().setSoftInputMode(intent.getIntExtra(SOFT_INPUT_MODE, 0)); 
```

所以我的主要问题是什么会导致选项卡活动禁用/重置/忘记这个 softInputMode

感谢您的帮助

# objective-c - 如何在没有 GPS 的情况下使用 CLLocationManager [self.locationManager startUpdatingHeading]？

> ID：16129214
> 
> 赞同：-2
> 
> 时间：2013-04-21T08:13:25.960
> 
> 标签：objective-c, cocoa-touch

如果我用

```
[self.locationManager startUpdatingHeading]; 
```

状态栏上会出现一个箭头。

做

```
[self.locationManager startUpdatingHeading]; 
```

使用全球定位系统？

如果没有，为什么状态栏上会出现箭头？

注意：我已阅读文档。仅当启用位置时，才能使用真正的航向。我在想的是

1.  启用位置
2.  获得一次航向。
3.  计算真航向和磁航向之间的差异。
4.  将该数字存储在静态变量中。
5.  禁用位置。
6.  每次更新航向，获取磁航向，然后加上真航向和磁航向的差值。

我认为可能有用的另一件事是将位置精度设置得非常宽，以至于根本不需要 GPS。

我想知道这是否可能。例如，我们可以以编程方式禁用位置更新吗？据我所知，调用 stopUpdatingLocation 不会关闭位置更新（不再调用didUpdateToLocation，但状态栏上有一个丑陋的箭头）。

self.locationManager.locationServicesEnabled=false 不起作用，因为该属性是只读的类属性。看起来没有办法关闭 locationServices 并更新标题。我可能错了。我是吗？

基本上我想帮助我的访客在没有过多 GPS 的情况下看到方向。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T08:20:21.803

当然，`startUpdatingHeading`使用GPS。

来自[CLLocationManager 类参考](https://developer.apple.com/library/mac/#documentation/CoreLocation/Reference/CLLocationManager_Class/CLLocationManager/CLLocationManager.html)：

> 在 iOS 中，具有适当硬件的设备也可以报告航向信息。当 headingAvailable 属性中的值为 YES 时，您可以使用位置管理器对象来检索标题信息。要开始传递与航向相关的事件，请将委托分配给位置管理器对象并调用位置管理器的 startUpdatingHeading 方法。如果还启用了位置更新，则位置管理器会返回真实航向和磁航向值。如果未启用位置更新，则位置管理器仅返回磁航向值。这些功能在 OS X 中不可用。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-26T04:08:23.477

定位服务旨在尽可能高效，以最大限度地减少功耗并延长电池寿命。例如，API 允许您向服务声明需要多少测量精度，因为更高的精度需要更多的硬件和功率。如果您只需要低精度（例如约 10 公里），您可以简单地使用手机信号塔获取位置信息，因为无线电已经处于活动状态，这很便宜。如果您需要比这更高的精度（例如几公里），硬件可能会使用 WiFi 热点信息切换到三角测量，这需要中等功率。但为了获得最高精度，系统将启用 GPS 单元，这会消耗更多的电量。

但是，如果您只请求航向信息，则将仅使用磁力计（只要硬件支持它；即 iPhone 4+ IIRC）。在这种情况下，GPS 单元将不会启用。根据[CLLocationManager 参考](https://developer.apple.com/library/mac/#documentation/CoreLocation/Reference/CLLocationManager_Class/CLLocationManager/CLLocationManager.html)：

> 如果未启用位置更新，则位置管理器仅返回磁航向值。

至于状态栏中的箭头指示器，每当任何应用程序使用定位服务时都会显示。如果您打开内置的 Compass 应用程序，您会注意到箭头也显示在那里，即使它只管理航向数据。

Using与您的位置回调`stopUpdatingLocation`是分开的，`stopUpdatingHeading`并且只会停止调用您的位置回调，同时还会酌情关闭硬件资源。

至于`locationServicesEnabled`，这设置为`YES`是否在设备上启用了服务（由用户），这就是该字段为只读的原因。

所以，只要打电话`startUpdatingHeading`，只要你不打电话`startUpdatingLocation`，你就不用担心 GPS。您提到的步骤不是必需的，因为 CL 已经为您完成了艰苦的工作。

这些信息都包含在参考资料中：

*   [CLLocationManager 参考](https://developer.apple.com/library/mac/#documentation/CoreLocation/Reference/CLLocationManager_Class/CLLocationManager/CLLocationManager.html)：

# node.js - 在 express 中使用 dotjs

> ID：16129218
> 
> 赞同：1
> 
> 时间：2013-04-21T08:13:47.537
> 
> 标签：node.js, express, dotjs

我想用[dotjs](http://olado.github.io/doT/index.html)代替 Jade for Express

我变了

```
app.set('view engine', 'jade'); 
```

至

```
app.set('view engine', 'html');    
app.engine('html', dot.compile); 
```

但它没有加载很长时间，我没有得到回应；

它出什么问题了 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-03T09:30:28.573

一个简单的方法是使用 express-dot：

```
npm install express-dot 
```

在你的 app.js 中：

```
var doT = require('express-dot');
// (optional) set globals any thing you want to be exposed by this in {{= }} and in def {{# }}
doT.setGlobals({ ... });
app.set('view engine', 'dot' );
app.engine('dot', doT.__express ); 
```

当然，建议像亨利将军所说的那样自己作曲。
因为如果你这样做，你会更好地理解 express 和 dot。
express-dot 不支持预编译，所以我的Github 仓库中有一个简单的[预编译示例。](https://github.com/albertshaw/Snippets/blob/master/express-dot.js)
祝你好运。

# c# - 在回发 c# 上触发事件处理程序

> ID：16129219
> 
> 赞同：0
> 
> 时间：2013-04-21T08:13:49.487
> 
> 标签：c#, asp.net, gridview, postback, html-select

我对 c# 编程很陌生。我有以下问题：我有一个 Web 表单上的 GridView、一个 DropDownList 和一个标签控件。当我从 DDL 中选择一个值时，网格视图中填充了数据库中等于 DDL 条件的行（在我的情况下，DDL 代表国家，GV 列出了城市）。当我使用内置的 GV 删除功能从 GV 中删除最后一个城市时，我想自动在标签中写入所选国家/地区中没有更多城市的标签。我怎样才能做到这一点？我试着把

```
protected void GridView1_RowDeleted1(object sender, GridViewDeletedEventArgs e)
{
    if (GridView1.Rows.Count == 0)
    {
        LabelGrid.Text = "No more cities.";
    }
} 
```

但它没有用。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T12:47:25.193

考虑使用 PreRender 事件，当该事件运行时 Row.Count 属性包含正确的值。（删除后减少）

```
 protected void GridView1_PreRender(object sender, EventArgs e)
    {
        if (GridView1.Rows.Count == 0)
        {
            LabelGrid.Text = "No more cities.";
        }
    } 
```

# solr - SolrJ 客户端使用的 Solr 服务器 (Solr 4.0) 的默认地址是什么

> ID：16129222
> 
> 赞同：8
> 
> 时间：2013-04-21T08:14:25.883
> 
> 标签：solr, solrj

我正在尝试从 SolrJ 客户端连接 Solr 服务器，但它给出了 HTTPResponse 异常。

这是我的代码：

```
SolrServer server = new HttpSolrServer("http://"localhost":8983/solr/"); 
```

这是一个例外：

> java.lang.NoClassDefFoundError: org/apache/http/NoHttpResponseException:

Solr 有默认地址吗？你在哪里可以找到它？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-21T14:46:06.070

我不熟悉 SolrJ - 但端点似乎缺少我的核心名称。

您需要将 Solr 客户端指向特定的核心。

核心的 URI 看起来像这样（用于重新加载核心命令）

```
http://localhost:8983/solr/{{solrCoreName}} 
```

管理 UI 应该可以在

```
http://localhost:8983/solr 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-03-25T18:19:50.827

默认情况下，Solr 将在 port 上启动`8983`。但这可以改变。例如，您可以使用属性在`solr.in.sh`文件中更改它。`SOLR_PORT`

# r - 关于 igraph 中的介数函数

> ID：16129233
> 
> 赞同：2
> 
> 时间：2013-04-21T08:16:03.343
> 
> 标签：r, igraph

当我们使用 'betweenness' 函数 betweenness(g,weights=NULL,directed = FALSE) 时，如果图具有权重属性，即使我们写成 weights=NULL，该函数仍然会使用权重属性计算介数。但我想计算没有权重属性的介数。所以我觉得这个功能看起来很奇怪。为什么我们写 weights=NULL 的时候还是使用 weight 属性？

```
function (graph, v = V(graph), directed = TRUE, weights = NULL, 
    nobigint = TRUE, normalized = FALSE) 
{
    if (!is.igraph(graph)) {
        stop("Not a graph object")
    }
    v <- as.igraph.vs(graph, v)
    if (is.null(weights) && "weight" %in% list.edge.attributes(graph)) {
        weights <- E(graph)$weight
    }
    if (!is.null(weights) && any(!is.na(weights))) {
        weights <- as.numeric(weights)
    }
    else {
        weights <- NULL
    }
    on.exit(.Call("R_igraph_finalizer", PACKAGE = "igraph"))
    res <- .Call("R_igraph_betweenness", graph, v - 1, as.logical(directed), 
        weights, as.logical(nobigint), PACKAGE = "igraph")
    if (normalized) {
        vc <- vcount(graph)
        res <- 2 * res/(vc * vc - 3 * vc + 2)
    }
    if (getIgraphOpt("add.vertex.names") && is.named(graph)) {
        names(res) <- V(graph)$name[v]
    }
    res
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-21T09:58:12.487

权重选项不是忽略和不使用权重。这是一个关于为用户提供提供他们自己的权重向量的选项。

从[文档](http://igraph.sourceforge.net/doc/R/betweenness.html)

> weight - 用于计算加权介数的可选正权重向量。如果图形具有权重边属性，则默认使用此属性。

因此，如果`weights=NULL`该功能将`E(g)$weight`默认使用。

自己做这件事的方法是删除权重或将它们设置为 1 例如

```
E(g)$weight <- 1 
```

# javascript - 如何在 Javascript 中自动刷新 XML

> ID：16129238
> 
> 赞同：1
> 
> 时间：2013-04-21T08:16:45.667
> 
> 标签：javascript, xml

以下是我遇到问题的代码 -

```
<script type="text/javascript" language="javascript">

    function loadXMLDoc()
    {
        var xmlhttp;
        if (window.XMLHttpRequest)
        {// code for IE7+, Firefox, Chrome, Opera, Safari
            xmlhttp=new XMLHttpRequest();
        }
        else
        {// code for IE6, IE5
            xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
        }
            xmlhttp.onreadystatechange=function()
        {
        if (xmlhttp.readyState==4 && xmlhttp.status==200)
        {
            document.getElementById("myDiv").innerHTML=xmlhttp.responseText;
        }
        }
        xmlhttp.open("GET","<%=StatsURL%>",true);
        xmlhttp.send();
    }

    function timedRefresh(timeoutPeriod) {
        setTimeout(function(){loadXMLDoc(); autoRefresh();},timeoutPeriod);
    }
    </script> 
```

这被称为 -

```
<body onload="JavaScript:timedRefresh(50000);">
<div id="myDiv"></div>
</body> 
```

我想每 5 秒刷新一次页面/加载 XML，但是上面的代码似乎不起作用。我已阅读 ( [http://www.htmlgoodies.com/tutorials/getting_started/article.php/3479551/Reloading-The-Page.htm](http://www.htmlgoodies.com/tutorials/getting_started/article.php/3479551/Reloading-The-Page.htm) )，您也可以使用 META 标签 () 来刷新页面。

任何帮助使此代码正常工作将不胜感激。

**回答**

将代码更改为以下 -

```
window.onload = startInterval();

    function startInterval()
    {
        setInterval("loadXMLDoc();", 5000);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T08:25:40.113

那是因为您每 50 秒（50000 毫秒）刷新一次页面。将其更改为 5000 即可。

# c++ - C++：填充数组的时间太长

> ID：16129242
> 
> 赞同：-3
> 
> 时间：2013-04-21T08:17:28.797
> 
> 标签：c++, arrays, class, pointers, methods

我们正在编写一个将一些数据写入数组的方法（myFunc）。数组必须是类 (MyClass) 的字段。例子：

```
class MyClass {
public:
  MyClass(int dimension);
  ~MyClass();

  void myFunc();

protected:

  float* _nodes;
};

MyClass::MyClass(int dimension){
 _nodes = new float[dimension];
}

void MyClass::myFunc(){
 for (int i = 0; i < _dimension; ++i)
  _nodes[i] = (i % 2 == 0) ? 0 : 1;
} 
```

myFunc 方法被调用了近 10000 次，它需要近 9-10 秒（使用其他方法）。

但是如果我们将 myFunc 定义为：

```
void MyClass::myFunc(){
 float* test = new float[_dimension];
 for (int i = 0; i < _dimension; ++i)
     test[i] = (i % 2 == 0) ? 0 : 1;
} 
```

我们的程序运行得更快 - 它需要将近 2-3 秒（如果它的调用次数接近 10000 次）。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T08:31:05.067

这可能会有所帮助（在任何一种情况下）

```
for (int i = 0; i < _dimension; )
{
    test[i++] = 0.0f;
    test[i++] = 1.0f;
} 
```

我假设`_dimension`是偶数，但如果不是，很容易修复。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T08:27:25.290

如果你想加快调试模式，也许可以帮助编译器，试试

```
void MyClass::myFunc(){
   float* const nodes = _nodes;
   const int dimension = _dimension;
   for (int i = 0; i < dimension; ++i)
       nodes[i] = (i % 2 == 0) ? 0.0f : 1.0f;
} 
```

当然，实际上你应该专注于使用发布模式来处理所有与性能相关的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T08:45:04.657

在您的示例代码中，您没有在构造函数中初始化 _dimension，而是在 MyFunc 中使用它。因此，即使您只分配了几千个条目，您也可能会在数组中填充数百万个条目。在有效的示例中，您使用相同的维度来创建和填充数组，因此在这种情况下您可能会正确初始化它..

只需确保 _dimension 已正确初始化。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-21T09:25:00.687

尝试这个：

```
memset(test, 0, sizeof(float) * _dimension));
for (int i = 1; i < _dimension; i += 2)
{
    test[i] = 1.0f;
} 
```

您也可以运行一次并将数组存储在静态位置。对于每次连续迭代，您无需任何计算即可处理存储的数据。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-21T08:58:57.013

**这在大多数**机器上更快。

```
void MyClass::myFunc(){
    float* const nodes = _nodes;
    const int dimension = _dimension;
    if(dimension < 2){
        if(dimension < 1)
            return;
        nodes[0] = 0.0f;
        return;
    }
    nodes[0] = 0.0f;
    nodes[1] = 1.0f;
    for (int i = 2; ; i <<= 1){
        if( (i << 1) < dimension ){
            memcpy(nodes + i, nodes, i * sizeof(float));
        }else{
            memcpy(nodes + i, nodes, (dimension - i) * sizeof(float));
            break;
        }
    }
} 
```

# android - 是否可以将 Activity 放在已经在 Fragment 中的 TabHost 中？

> ID：16129243
> 
> 赞同：0
> 
> 时间：2013-04-21T08:17:31.483
> 
> 标签：android

我有一个`FragmentActivity`which hosts a `Fragment`which hosts a`TabHost`需要`tabs`用`Activities`. 这真的可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T09:14:59.690

不，活动本身不能包含其他活动。

为此，您使用片段。

但是，您可以将片段与片段一起使用，尽管我觉得它很混乱。

# jquery - 当可拖动元素越过某个 div 时，如何更改它的网格？

> ID：16129246
> 
> 赞同：0
> 
> 时间：2013-04-21T08:17:45.627
> 
> 标签：jquery, jquery-ui, jquery-ui-draggable

所以我正在做一些事情......到目前为止这是我的代码

```
$('.draggableThing').draggable({grid:[20,20]}); 
```

当元素被拖动到某个 div 的顶部时，我希望它将网格更改为 [1,1]。所以它在这个 div 上很平滑，但只在其他任何地方的 [20,20] 网格上移动。这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T08:52:30.977

我想到了。但是让我知道是否有人有更好的解决方案，因为我不太了解 JQuery 是如何工作的。

```
function makeDraggable()
{
    $('.draggableThing').draggable({
        grid:[20,20],
        drag:function(){
            if (
                $(this).position().top>$('.theDivToDragOn').position().top
                &&$(this).position().top<$(".theDivToDragOn").position().top+$(".theDivToDragOn").innerHeight()
                &&$(this).position().left>$('.theDivToDragOn').position().left
                &&$(this).position().left<$(".theDivToDragOn").position().left+$(".theDivToDragOn").innerWidth()
            ){
                $(this).toggleClass('draggableThing').toggleClass('smoothDraggable');
                $('.smoothDraggable').draggable({
                    grid:[1,1],
                    drag:function(){
                        if (
                            $(this).position().top<$('.theDivToDragOn').position().top
                            ||$(this).position().top>$(".theDivToDragOn").position().top+$(".theDivToDragOn").innerHeight()
                            ||$(this).position().left<$('.theDivToDragOn').position().left
                            ||$(this).position().left>$(".theDivToDragOn").position().left+$(".theDivToDragOn").innerWidth()
                        ){ 
                        $(this).toggleClass('draggableThing').toggleClass('smoothDraggable');
                        makeDraggable();
                    }
                });
            }
        }
    })
} 
```

# php - 如何在php的下拉列表中获取所有值

> ID：16129250
> 
> 赞同：0
> 
> 时间：2013-04-21T08:18:36.633
> 
> 标签：php, javascript

我有一个下拉列表，用户在其中选择一些值并按 javascript 的排序顺序移动到其他下拉列表。如何在下一页的第二个下拉列表中将所选值获取到 PHP 变量？

```
<form name="Example" action="next.php" method="post">
<table border="0" cellpadding="3" cellspacing="0">
    <tr>
        <td>
            <select name="Features" size="9" MULTIPLE>
                <option value="2">Row 2</option>
                <option value="4">Row 4</option>
                <option value="5">Row 5</option>
                <option value="6">Row 6</option>
                <option value="7">Row 7</option>
                <option value="8">Row 8</option>
                <option value="9">Row 9</option>
            </select>
        </td>
        <td align="center" valign="middle">
            <input type="Button" value=">>" style="width:100px" onClick="SelectMoveRows(document.Example.Features,document.Example.FeatureCodes)">
            <br>
            <input type="Button" value="<<" style="width:100px" onClick="SelectMoveRows(document.Example.FeatureCodes,document.Example.Features)"><br>

            <input type="Button" value=">>>>" style="width:100px" onClick="selectAll(document.Example.Features);SelectMoveRows(document.Example.Features,document.Example.FeatureCodes)"><br>

            <input type="Button" value="<<<<" style="width:100px" onClick="selectAll(document.Example.FeatureCodes);SelectMoveRows(document.Example.FeatureCodes,document.Example.Features)">
        </td>
        <td>
            <select name="FeatureCodes[]" id="FeatureCodes" size="9" MULTIPLE>
                <option value="1">Row 1</option>
                <option value="3">Row 3</option>
            </select>
        </td>
    </tr>
    <tr>
    <td><input type="submit" value="submit" id="submit" name="submit"></td>
    </tr>

</table> 
```

提前致谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T08:21:49.050

第二个表单字段中选定元素的值应位于：

```
$_POST['FeatureCodes'][0]; 
```

如果页面上只有一个`FeatureCodes`表单，则可以`[]`从 HTML 中删除并使用`$_POST['FeatureCodes'];`

# ubuntu - Pig Apache Local 无法在 Unix Shell 中运行任何试用版

> ID：16129251
> 
> 赞同：0
> 
> 时间：2013-04-21T08:18:38.487
> 
> 标签：ubuntu, apache-pig

我已经设置了`JAVA_HOME`和`PIG_HOME`。

当我尝试`$pig - x - local trial.pig`时，反馈如下：

> 2013-04-21 04:01:30,833 [main] INFO org.apache.pig.Main - Apache Pig 版本 0.11.1 (r1459641) 编译于 2013 年 3 月 22 日，02:13:53
> 
> 2013-04-21 04:01:30,834 [main] INFO org.apache.pig.Main - 将错误消息记录到：/home/tony/pig_1366531290745.log
> 
> 2013-04-21 04:01:32,091 [main] 错误 org.apache.pig.Main - 错误 2997：遇到 IOException。文件 x 不存在。日志文件中的详细信息：/home/tony/pig_1366531290745.log

然后我试`$pig - x - local`了一下，结果几乎一样。

这有什么问题？安装Java？安装猪？还是我导出了错误的路径？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T09:04:03.650

正确的语法是：

```
pig -x local trial.pig 
```

参考：[入门指南](http://pig.apache.org/docs/r0.11.1/start.html#run)

# linux - LINUX中的确定和CLASSPATH安装

> ID：16129255
> 
> 赞同：0
> 
> 时间：2013-04-21T08:19:21.280
> 
> 标签：linux, unix, classpath, environment-variables, solaris

LINUX 中的确定和CLASSPATH 安装 请问一个愚蠢的问题（我要求理解对待，我在linux 中是初学者并根据需要补充知识）但是如何在LINUX 中定义CLASSPATH 以及它在哪里设置。我试图执行一个命令

```
root@one: echo $CLASSPATH 
```

但作为答复只给出了空行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T08:41:52.793

好的，所以为了设置类路径 //临时设置类路径使用 export CLASSPATH=someclass path

在 nano 编辑器中打开你的 bashrc 文件（默认提供的编辑器）

输入纳米 ./.bashrc

并键入如下所述的类

导出 PATH=${PATH}:/usr/java/jdk1.5.0_07/bin

版本可能与您的 java 不同

这是一个可以帮助你的链接

[试试这个链接](http://www.cyberciti.biz/faq/linux-unix-set-java_home-path-variable/)

# jquery - 在不重新插入 DOM 的情况下重新排列/排序 DIV

> ID：16129259
> 
> 赞同：19
> 
> 时间：2013-04-21T08:20:19.233
> 
> 标签：jquery, sorting, dom

我有几个 DIV，其内容具有通过 AJAX 定期更新的数据权重属性。

我在循环中对它们进行排序，在循环中迭代来自 ajax 请求的新值。

因为数据权重可以随时更新为任何值，所以顺序可以从更新到更新完全改变。

我的排序逻辑似乎有缺陷（至少可以说;））因为它只将每个元素与其下一个元素进行比较，`.next()`因此您必须单击“按数据权重排序”最大值。4 个元素 4 次，直到它们被排序（见下面的小提琴）

重要的是要知道要排序的 DIV 包含图像、视频等外部资源，因此重要的是它们被移动而不是重新创建，因为我认为当重新插入 DOM 时，包含的资源会重新加载这对我的用例来说是不可接受的。

由于很难描述和理解，这是我的小提琴：

[http://jsfiddle.net/PdGTK/5/](http://jsfiddle.net/PdGTK/5/)

**更新**

虽然主要问题解决了，但仍然存在一个问题，即当包含 fe Youtube-Videos 时，每次重新排序 DIV 时都会重新加载它们，即使视频在 DOM 中没有改变位置。a) 看起来很奇怪，b) 打断了视频播放。阅读有关该主题的更多信息，在 DOM 中移动 iframe 似乎总是让他们重新加载内容 - 这有多愚蠢？

Fiddle 使用 YT 视频的固定数据权重 1 进行更新，因此它始终保持在顶部。

[http://jsfiddle.net/PdGTK/10/](http://jsfiddle.net/PdGTK/10/)

非常欢迎想法！

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-04-21T08:29:54.837

这是我想到的第一种方法：

```
$("#sortButton").on("click", function () {
    var $wrapper = $('#wrapper'),
        $articles = $wrapper.find('.article');
    [].sort.call($articles, function(a,b) {
        return +$(a).attr('data-weight') - +$(b).attr('data-weight');
    });
    $articles.each(function(){
        $wrapper.append(this);
    });
}); 
```

似乎工作：http: [//jsfiddle.net/PdGTK/6/](http://jsfiddle.net/PdGTK/6/)

基本上，它所做的是创建一个`$articles`包含所有文章的 jQuery 对象 ()。然后它根据它们的`data-weight`属性对 jQuery 对象中的项目进行排序。然后它以新的顺序遍历它们并将它们附加到包装器中 - 请注意，当您`.append()`已经在 DOM 中的项目时，它会被移动。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-21T08:40:28.057

这是您可以对其进行排序的方式：

```
var $wrapper = $('#wrapper'),
    $art = $wrapper.children('.article');

$art.sort(function(a, b) {
    return +$(a).data('weight') - +$(b).data('weight');
})
.each(function() {
    $wrapper.append(this);
}); 
```

[http://jsfiddle.net/dfsq/PdGTK/8/](http://jsfiddle.net/dfsq/PdGTK/8/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-10-19T13:58:49.913

我也需要重新排序元素而不重新插入 DOM。您可以通过修改 CSS 属性来做到这一点。

对于外部容器设置 CSS 属性：

```
display: flex;
flex-direction: column; 
```

对于每个元素集：

```
order: X; 
```

其中X按升序增长。

# java - 在 Java 代码中使用 weka 的规则

> ID：16129276
> 
> 赞同：1
> 
> 时间：2013-04-21T08:24:04.557
> 
> 标签：java, classification, weka

我正在使用由 weka 的分类器生成的规则。这些规则由 Weka 在一个字符串中生成，并且在每种不同的规则情况下，我都必须实现每个规则（即手动，在 Java 中）。我认为也许有更好的方法来完成这个过程，也许是使用 API。

我可以做到的一种方法是处理由表示规则的分类器（ClassifierTree 类）生成的字符串。但我认为这可能有一些最简单的方法。

任何人都可以帮助我吗？

问候，

布鲁诺莫雷诺

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T17:39:51.600

如果您的分类器[支持它](http://weka.sourceforge.net/doc/weka/classifiers/Sourcable.html)，您可能会获得经过训练的分类器的 java 代码。看[下面的答案选项三](https://stackoverflow.com/questions/5319279/how-to-apply-classifier-in-wekas-explorer/10537185#10537185)。以下摘录来自[Weka Wiki 从 WEKA 类生成源代码](http://weka.wikispaces.com/Generating+source+code+from+WEKA+classes)：

```
All classifiers implementing the weka.classifiers.Sourcable interface 
can turn their model into Java source code 
(check the Javadoc of this interface for all the classifiers implementing it). 
```

# ruby-on-rails - 如何检查数据库表中的值？

> ID：16129279
> 
> 赞同：0
> 
> 时间：2013-04-21T08:24:15.593
> 
> 标签：ruby-on-rails

我想从数据库中创建一个简单的检查值。这是我的代码：

```
def check_user_name(name, email)
db_name = Customers.find_by_name(name).to_s
 db_email = Customers.find_by_email(email).to_s
if name == db_name && email == db_email  
  return 'yes'
 else 
  return 'no'   
end
end 
```

但我总是“不”变种....为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T08:30:52.043

因为您正在调用`to_s`您的`Customers`模型，但实际上并没有得到名称。您拥有的两条提取线应该是：

```
Customers.find_by_name(name).name.to_s # to_s probably not necessary if you know this field is a string
Customers.find_by_email(email).email 
```

但是，您正在向数据库发出两个单独的请求。我不知道这样做的目的是什么（因为您可以选择两个不同的客户）但您可以这样做：

```
if Customers.where(name: name, email: email).exists?
  "yes"
else
  "no"
end 
```

但是，由于您是按姓名和电子邮件进行选择 - 我强烈建议您确保对这些字段进行索引，因为带有这些请求的大型表会使服务器陷入困境并使该路线相当缓慢（我实际上建议您追求其他路线这更可行，但我想提一下）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T08:43:36.043

当你给 Customers.find_by_name(name) 时，你不会得到客户的名字。实际上它将返回 activerecord 对象，因此您需要从该对象中获取客户的姓名和电子邮件，如下所示，

```
name = Customers.find_by_name(name).name
email = Customers.find_by_email(email).email 
```

现在您将从 DB 中获得匹配数据的确切名称和电子邮件。

# android - 无需安装地图应用即可在 Android 应用上使用 Google 地图

> ID：16129280
> 
> 赞同：0
> 
> 时间：2013-04-21T08:24:34.957
> 
> 标签：android, google-maps, google-maps-android-api-2

我正在按照 Google Maps Android API v2 中的示例代码来开发应用程序。但是当在设备上启动时它告诉我`Google Maps App is missing`（如果我安装了谷歌地图应用程序，它就可以工作。）

但是，我的设备上有其他使用谷歌地图的应用程序，但没有要求安装谷歌地图应用程序。

如何在设备上不安装 Google 地图的情况下构建支持 Google 地图的应用程序？

谢谢

更新：我发现这篇文章：

[http://discgolfsoftware.wordpress.com/2012/12/09/check-if-google-maps-are-installed-on-android-if-not-direct-user-to-the-play-store/](http://discgolfsoftware.wordpress.com/2012/12/09/check-if-google-maps-are-installed-on-android-if-not-direct-user-to-the-play-store/)

> 您还必须确保用户安装了 Google 地图应用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T08:29:26.523

看看我写的关于如何集成`Google Map API V2`到您的应用程序中的这篇博文：

[谷歌地图 API V2](https://blog-emildesign.rhcloud.com/?p=435)

与您尝试做的事情的处理是您可能会运行以下意图：

```
 Intent navigation = new Intent(Intent.ACTION_VIEW, Uri.parse("http://maps.google.com/maps?saddr=" +
                             String.valueOf(AppObj.getInstance().currentUserLocation.getLatitude())+","+
                             String.valueOf(AppObj.getInstance().currentUserLocation.getLongitude())+"&daddr="+
                             String.valueOf(task.getLatitude()) +","+ String.valueOf(task.getLongtitude())));
                     navigation.setClassName("com.google.android.apps.maps", "com.google.android.maps.MapsActivity");
                     startActivity(navigation); 
```

但此操作将尝试启动本机谷歌地图应用程序。

# python - Python re.split() 行为不端

> ID：16129283
> 
> 赞同：0
> 
> 时间：2013-04-21T08:25:24.260
> 
> 标签：python, regex, git

我正在尝试解析由`git log --numstat`. 它的格式是

```
commit 1234567890123456789012345678901234567890
Author: Joseph Shabadoo
Date: Sun Apr 21 14:34:36 2013 +0300

    fix the thing that was broken

4   0   foo.py
13  7   bar.py

commit aaaaaaaaaabbbbbbbbbbccccccccccdddddddddd
Author: Donald Dont
Date: Fri Apr 19 21:15:00 2012 +0300

    do some stuff

15  6   foo.py

... etc 
```

我将它存储在一个文件中，我想将其拆分为提交以便于解析。我正在使用`re.split()`，但似乎找不到适合该工作的正则表达式。我会认为使用

```
re.split('.*?\n\n.*?\n\n.*?\n\n', myfile.read()) 
```

会工作，但我把所有的第一次提交和第二次提交的前两行都放在一起（`commit aaaaa...`和`Author: ...`）。这尤其令人困惑，因为在该行之后没有两个连续的换行符`Author:`。什么正则表达式可以将其拆分？

编辑：`.`默认情况下显然不匹配换行符。re 需要用 flag 编译`re.DOTALL`。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-21T08:30:38.117

只匹配第一行怎么样，这是相当一致的？

```
'commit [0-9a-f]{40}' 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-21T10:38:44.733

让我们形象化它：

![正则表达式好友截图](https://i.stack.imgur.com/gmAeP.png)

您的正则表达式在匹配结束时需要两个换行符，并且在该行之后只有一个

```
4   0   foo.py 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-21T08:36:57.230

您可以遍历这些行，将行与`commit`. 然后，您可以将当前提交的所有行存储在一个数组中。

```
allCommits = []
currentCommitLines = []
for line in lines:
    if re.match(r'^commit [0-9a-f]{40}') and currentCommitLines:
        allCommits.append(currentCommitLines)
        currentCommitLines = []
     currentCommitLines.append(line) 
```

然后你会将提交存储在数组中，你可以稍后解析/做任何你想做的事情。

# python - 如何计算特定周数之间的周数？

> ID：16129284
> 
> 赞同：1
> 
> 时间：2013-04-21T08:25:25.833
> 
> 标签：python, dictionary, count

我有以下数据格式。它是一个字典，名称为键，周数列表为值。

```
{'Mali': [17, 16, 23, 18, 17, 16, 17, 18, 16],
 'Gooki': [7, 8, 8, 15, 7, 7, 8],
 'Piata': [85],     
 'Goerge': [82],
 'Samoo': [106, 55],
 'Marria: [101,39]} 
```

我想计算周数之间的周数，并用周数而不是周数更改字典的值。这意味着例如在名称“Samoo”中，我有第 55 周和第 106 周。我会就像我的代码计算这两周加上它们之间的周数（等于 52 周）并将其设置为字典的值。

我有以下代码，但我不确定是否将其计算在内。

```
datedict = defaultdict(set)
with open('d:/info.csv', 'r') as csvfile:
    filereader = csv.reader(csvfile, 'excel')

    #passing the header
    read_header = False
    start_date=date(year=2009,month=1,day=1)
    #print((seen_date - start_date).days)
    tdict = {}
    for row in filereader: 
        if not read_header:
            read_header = True
            continue

# reading the rest rows
        name,firstseen = row[0],row[3]
        try:
            seen_date = datetime.datetime.strptime(firstseen, '%d/%m/%Y').date()               
            deltadays = (seen_date-start_date).days
            deltaweeks = deltadays/7 + 1
            key = name
            currentvalue = tdict.get(key, set())
            currentvalue.add(deltaweeks)
            tdict[key] = currentvalue

        except ValueError:
            print('Date value error')
            pass

pprint.pprint(tdict) 
```

谁能帮我这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T08:34:39.463

```
>>> d = {'Mali': [17, 16, 23, 18, 17, 16, 17, 18, 16],
 'Gooki': [7, 8, 8, 15, 7, 7, 8],
 'Piata': [85],
 'Samoo': [47, 63, 48, 58, 49, 48],
 'Goerge': [82],
 'Samoo': [106, 55],
 'Marria': [101,39]}
>>> dict((name, max(weeks) - min(weeks) + 1) for name, weeks in d.iteritems())
{'Samoo': 52, 'Gooki': 9, 'Mali': 8, 'Goerge': 1, 'Piata': 1, 'Marria': 63} 
```

# php - 可以发送到商家帐户的贝宝付款，也可以向商家请求付款

> ID：16129287
> 
> 赞同：1
> 
> 时间：2013-04-21T08:25:48.173
> 
> 标签：php, paypal

我正在开发一个游戏网站，该网站具有用户可以购买硬币等功能，对于购买硬币，他可以使用 PayPal。付款后，硬币将添加到您的帐户中。然后他可以随时要求更换硬币。

所以我的问题是

1.  应该使用哪种 PayPal 付款方式？
2.  如何将付款发送到用户帐户。网站所有者是手动做的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T08:31:18.013

如果我正确理解您的问题，可以通过以下两种方式之一完成：

1.  转销商模式：你收钱到你的账户，然后用PP把钱转到商家账户（减去你的佣金或其他）

2.  商家开设一个 PP 业务帐户并向您提供 API 凭证（不是用户/通行证到他的帐户！API 凭证！）。然后你用他的信用下订单，钱就到了商家的账户里。

# ios - 如何在设置包中添加带有操作的按钮？

> ID：16129289
> 
> 赞同：0
> 
> 时间：2013-04-21T08:26:11.667
> 
> 标签：ios, objective-c

我看到很多答案说您不能在设置包中添加带有操作的按钮，但我看到了

**Nike + iPod**应用程序执行此操作，并且该操作正在打开 url，当它关闭/打开时，他们也在切换视图上执行操作

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-21T08:32:43.363

这就是你所需要的：

```
...
<key>cell</key>
<string>PSButtonCell</string>
<key>action</key>
<string>buttonCellClicked:</string>
... 
```

这将制作一个按钮单元格并`buttonCellClicked:`在首选项视图控制器上发送消息。

# jquery - 如何为这个特定示例在加载 Jquery 中设置超时？

> ID：16129292
> 
> 赞同：1
> 
> 时间：2013-04-21T08:26:16.940
> 
> 标签：jquery, javascript, jquery-load

对于这个使用字符串传递数据的非常特殊的示例，如何设置加载超时？看起来应该从 compare_proc.php api 加载的谷歌图表需要很长时间......因为在点击事件上，我得到一个空白结果，我希望从 compare.php 加载图表......我会感谢我如何为这个特定的 Jquery 操作设置超时。谢谢 ！

```
 jQuery(document).ready(function() {
          $("#opposition a").click(function(e) {
          var first_id  = $(this).attr('id');
          var second_id = $("h1").attr('id');
          $("div#test").load('compare_proc.php','id=' + first_id + '&id2=' + second_id);
          e.preventDefault();
            });
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T08:29:46.553

jQuery`load()`方法不接受任何`settings`参数。所以你必须用更底层的方法[**ajax()**](http://api.jquery.com/jQuery.ajax/)调用来替换它——它可以让你`timeout`为这个特定的请求指定设置。一种可能的方法：

```
$.ajax('compare_proc.php', {
  data: 'id=' + first_id + '&id2=' + second_id,
  timeout: someTimeoutInMs,
  success: function(resp) {
    $('#test').html(resp);
  }
}); 
```

另一种方法是保留您的代码，但使用[**ajaxSetup()**](http://api.jquery.com/jQuery.ajaxSetup/)调用（在调用之前）修改全局 AJAX 设置`load`。请注意，强烈建议不要在其文档页面上使用此 API：

> 此处指定的设置将影响对*所有调用*或基于 AJAX 的派生类的调用，`$.ajax`例如`$.get()`. 这可能会导致不良行为，因为其他调用者（例如插件）可能期望正常的默认设置。因此，我们强烈建议不要使用此 API。相反，请在调用中明确设置选项或定义一个简单的插件来执行此操作。

不过，在您的情况下（仅更改超时设置时）也可以这样做。

# git - 从过去的提交中获取特定文件的更改并将其放入新分支

> ID：16129294
> 
> 赞同：1
> 
> 时间：2013-04-21T08:26:41.420
> 
> 标签：git, commit, git-diff

不久前我更改了一个文件。今天我想将这些更改添加到几个分支。问题是该文件被更改的提交还包括其他文件，我不想在其他分支中更改

有没有办法从特定提交中获取文件的差异并将其放置在新分支中，以便我可以将其与其他分支合并？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T09:26:15.977

```
git checkout master
git checkout pu rtmpdump.c
git commit -m 'rtmpdump.c from pu branch' 
```

如果您愿意，您也可以提交 SHA，而不是分支名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T10:37:51.717

你可以这样做：

```
git diff SHA1^..SHA1 -- path/to/file | git apply 
```

这不会保留原作者、日期等。您也可以[使用`git cherry-pick`](https://stackoverflow.com/questions/5717026/how-to-git-cherry-pick-only-changes-to-certain-files)，但在这种情况下需要做更多的工作。

# windows-phone-8 - 在商店提交应用程序：保存按钮不起作用

> ID：16129299
> 
> 赞同：0
> 
> 时间：2013-04-21T08:28:20.577
> 
> 标签：windows-phone-8

我有一个准备在应用商店提交的 Windows Phone 应用。我上传了所有必要的文件并根据 msdn 指南添加了所有需要的信息。问题是，“上传和描述您的 xap”部分中的“保存”按钮不起作用。它没有向我显示任何错误或任何东西，它简单地不起作用。可能是什么问题呢？我是否遗漏了某些东西，或者它是银光或任何其他问题？请分享您的意见。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T09:02:31.213

WP8 仪表板仅使用 Internet Explorer 10。

# wicket - 使用 AjaxRequestTarget 刷新子面板

> ID：16129306
> 
> 赞同：0
> 
> 时间：2013-04-21T08:30:23.447
> 
> 标签：wicket

我是 wicket 的新手，遇到了 AjaxRequestTarget 的面板刷新问题。我在下面澄清我的情况。

在 UI 中，我有一个面板 (A)，其中包含另一个面板 (B)，B 包含一些按钮和表格。我的面板 A，我有一个事件，它将使用 AjaxRequestTarget 刷新我的面板 B。在事件中，我在 AjaxRequestTarget.add() 中添加了面板 B，但它没有在面板 B 中调用我的初始化方法。因此，面板 B 没有正确刷新。

这是一个现有代码，因此无法将事件移动到面板 B。因此，需要从面板 A 本身做一些事情。

进一步澄清：

经过几次 debgus，我在其他一些地方发现了我的问题。这不是关于刷新面板 B。这完全是关于面板 A 的刷新。面板 A 扩展了**面板**，当我使用 Ajax 计时器刷新面板 A 的组件时，我的面板 B 也出现了混乱。那么，任何人都可以帮助我吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T08:54:38.240

**当您的组件添加到组件层次结构时，会调用**onInitialize 。****onConfigure**对作为请求周期一部分的每个组件的每个请求处理调用一次（如果您将其添加到 Ajax 请求目标，则在 Ajax 期间）。它也被称为不可见的组件。不要忘记调用 super()。**

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T14:24:14.243

我认为您需要将面板 B 的“刷新”代码放入`onConfigure`每个请求调用一次的方法中。

如果您提供代码示例，则可以通过示例改进我的答案。**

# java - Windows 密码和组

> ID：16129307
> 
> 赞同：1
> 
> 时间：2013-04-21T08:30:29.980
> 
> 标签：java, windows

是否可以使用 Java 更改用户密码和/或组。

运行 java 代码的用户具有管理员权限。

并且可以使用java获取windows用户列表。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-07-31T19:40:22.027

更改用户密码的更简单方法是使用`Runtime`该类。

```
Runtime.getRuntime().exec("net user someUsername somePassword"); 
```

`net localgroup`您可以使用windows 命令添加或删除组。

```
Runtime.getRuntime().exec("net localgroup someGroup someUser /add");
Runtime.getRuntime().exec("net localgroup someGroup someUser /delete"); 
```

为了检查命令是否成功，该`exec`方法返回一个`Process`对象。您可以从它的错误和输入流中读取以获取命令输出。

```
Process pro = Runtime.getRuntime().exec("net user someUsername somePassword");
BufferedReader bre = new BufferedReader(new InputStreamReader(pro.getErrorStream()));
BufferedReader bri = new BufferedReader(new InputStreamReader(pro.getInputStream()));
pro.waitFor(); //wait for the command to finish
String line;
while((line = bre.readLine()) != null)
    System.out.println(bre.readLine());
while((line = bri.readLine()) != null)
    System.out.println(bri.readLine()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T08:35:01.713

有一个控制台命令`net user`，可用于更改用户密码。
命令是`net user userName newPassword`。
使用`Desktop.getDesktop().open("file name");`// 找到该`net`命令的路径。
如果可以的话，找到更好的执行方式。

# mysql - 如何在插入时操作 mysql 列字段？

> ID：16129313
> 
> 赞同：2
> 
> 时间：2013-04-21T08:30:59.243
> 
> 标签：mysql

在波斯语中（最好说波斯语），像 32.98 这样的十进制数写成 32/98（使用斜线而不是点）

例如，我有一个表 X 和列 L(varchar 20)。我想定义一个替换 any 的 MySQL 函数`/`。如果在 L 中插入任何值，则在保存之前会替换值。

当然可以在执行查询中实现，但我想在 MySQL 中实现。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-21T08:33:18.967

只需使用`REPLACE()`

```
SELECT L AS origL, REPLACE(L, '/', '.') AS newL 
```

所以在你的`INSERT`声明中，

```
INSERT INTO X (L) VALUES(REPLACE('yourValueHere', '/', '.')) 
```

**更新 1**

使用`Trigger`：

```
DELIMITER $$
CREATE TRIGGER replaceToPeriod
BEFORE INSERT ON X
FOR EACH ROW 
BEGIN
    SET NEW.L = REPLACE(NEW.L, '/', '.');
END $$
DELIMITER ; 
```

执行后`TRIGGER`，您现在可以直接插入一条记录，触发器会自动替换该值。

```
INSERT INTO X (L) VALUES('32/97') 
```

**更新 2**

使用`STORED PROCEDURE`

```
DELIMITER $$
CREATE PROCEDURE InsertRecord(IN _val VARCHAR(20))
BEGIN
    INSERT INTO X (L) VALUES(REPLACE(_val, '/', '.'));
END $$
DELIMITER ; 
```

调用程序：

```
CALL InsertRecord('32/97'); 
```

# java - 如何在 Java 中停止正在运行的音乐线程？

> ID：16129317
> 
> 赞同：3
> 
> 时间：2013-04-21T08:31:23.463
> 
> 标签：java, audio

我有一堂课可以无限循环播放游戏的背景音乐。我希望它在另一个类调用 BackgroundMusic 对象上的 stopPlaying() 方法时停止。根据 Oracle 文档，没有办法停止 Java 中的线程。

它说使用一个变量，当变量为某个值时它会检查并停止。我尝试进行布尔运行，当我调用 stopPlaying() 时将其设置为 false，并尝试使 while 循环作为条件而不是 true 运行，但这没有延迟。（之前编辑的消息）

我会把我的课程放在这里，但是这个网站一直说它的格式不正确，我以前做过（从 Eclipse 粘贴）。我把它放在 PasteBin 上：http: [//pastebin.com/edCH2DXE](http://pastebin.com/edCH2DXE)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T08:40:54.883

这有点像一把大锤子，但你可以通过调用来*中断*`musicThread.interrupt()`线程。这将导致`isInterrupted()`返回`true`音乐线程。如果线程当时正在执行一些阻塞 I/O，这可能会导致`InterruptedException`被抛出，因此您还需要捕获它：

```
 try {
    while (!Thread.currentThread().isInterrupted()) {
       // play music
    }
  } catch (InterruptedException ex) {
    // any cleanup necessary
  } 
```

同样，这是一个大锤子，如果可以的话，最好使用布尔标志方法。

# agda - 尝试对本来应该是荒谬的事物进行模式匹配时键入错误

> ID：16129319
> 
> 赞同：3
> 
> 时间：2013-04-21T08:31:37.077
> 
> 标签：agda

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T12:06:18.743

# javascript - How to limit Tab listener to callback only if the textbox has change

> ID：16129320
> 
> 赞同：2
> 
> 时间：2013-04-21T08:31:38.573
> 
> 标签：javascript, jquery, html

I'm trying to implement a Tab key listener for a textbox.

```
$('#mytextbox').live('keydown', function (e) {
   if (e.keyCode == 9 || e.which == 9) {
      // TO DO SOMETHING
   }
}); 
```

However, for some reason I need to limit the tab listener's callback to invoke only when the textbox has **changed**. Is there anyway to do this?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T08:51:54.597

您也许可以检查输入字段的值以确保它与原始值不同？

例如

```
$('#mytextbox').live('keydown', function (e) {
   if ((e.keyCode == 9 || e.which == 9) && ($('#TextBox').val() != 'Starting Value')) {
      // TO DO SOMETHING
   }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T09:12:36.823

或者不存储/不知道该文本框的值：

```
var changed = false;

$('#mytextbox').on('keydown', function (e) {
    if (e.which == 9 && changed) {
        e.preventDefault();
        // TO DO SOMETHING
        alert("works");
        changed = false;
    } else {
        changed = true;
    }
}); 
```

[http://jsfiddle.net/9a37b/](http://jsfiddle.net/9a37b/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T09:02:41.213

你可以这样做：

```
var data = "";
$('#mytextbox').live('keydown', function (e){
    if(e.which == 9 || e.keyCode == 9){
         if($(this).val() != data){
             alert('changed!');
             data = $(this).val();
         }
    }
}); 
```

[http://jsfiddle.net/DDCZS/1/](http://jsfiddle.net/DDCZS/1/)

# java - how to Pass Object between Portlet (IPC) Liferay portlet

> ID：16129321
> 
> 赞同：1
> 
> 时间：2013-04-21T08:31:47.400
> 
> 标签：java, event-handling, liferay, ipc, portlet

I need help and it's really confusing. I've tried to follow all example on the web about IPC - pass Parameter between portlet using event.

Here's my code if I only want to pass my `attribute` using event:

```
QName qName = new QName("http://liferay.com/events", "ipc.send");
response.setEvent(qName, pitchType); 
```

and then in my getter Event Portlet my code

```
@ProcessEvent(qname = "{http://liferay.com/events}ipc.send")
public void catchBall(EventRequest request, EventResponse response) {
    Event event = request.getEvent();
    String send = (String) event.getValue();
    response.setRenderParameter("send", send);
} 
```

it only passes one parameter with and only String. I've tried passing Object like `Foo` to this parameter but no luck. It won't run. Any idea how to pass Object via event?

please really need help here.. :(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T10:58:40.413

将自定义对象作为事件参数传递可能会很棘手，尤其是当您跨越插件边界时：在这种情况下，该类必须对两个插件都可用，否则自然无法正确接收事件。

一个常见的建议是保持 UI 层（例如，在 portlet 事件中）的通信非常浅，而不是依赖重对象。请记住，这种通信不应该是真正的业务层，因此可以为真实数据传递标识符、主键或其他占位符。假设没有人可能对接收事件感兴趣，那么您首先不应该花费太多精力来构建事件。

或者，您可以将感兴趣的对象缓存在您的业务层上，以便在它确实正在处理时（例如，如果收到事件）可以快速使用

# actionscript-3 - 在 mxmlc 中编译 AS3 时找不到源路径基类定义

> ID：16129326
> 
> 赞同：0
> 
> 时间：2013-04-21T08:32:27.060
> 
> 标签：actionscript-3, apache-flex, mxmlc

由于现在是 Ludum Dare 的热身时间，我想我会确保我刚刚下载的 Flex SDK 工作正常。简短的回答：它没有。

每次我尝试跑步

```
./mxmlc -compiler.source-path=../../../Flixel/org/flixel ../../../Flash/FindTheLight/src/FindTheLight.as 
```

我得到：

```
Config in /Users/jonatannoponen/Developer/Tools/flex_sdk_4.6/frameworks/flex-config.xml loading
/Users/jonatannoponen/Developer/Flash/FindTheLight/src/FindTheLight.as(7): sar.: 36 Error: Baseclass FlxGame definition not found.

public class FindTheLight extends FlxGame
                                  ^` 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T09:32:39.347

显然，SDK 找不到`FlxGame`类。你的位置在哪里`FlxGame.as`？另外，您不认为使用 IDE（例如 FlashDevelop）可以解决您的问题吗？只是好奇。

# javascript - 从 json 对象解析特定记录

> ID：16129327
> 
> 赞同：0
> 
> 时间：2013-04-21T08:32:33.810
> 
> 标签：javascript, json

我有以下 json 对象

```
 var testObj = {
        "CompanyA": [
            { "geography": [ "Europe", "Germany" ], "productLine": "Produce", "revenue": { "2022": 130143, "2021": 172122, "2020": 103716 } },
            { "geography": [ "Europe", "France" ], "productLine": "Clothing", "revenue": { "2022": 85693, "2021": 91790, "2020": 77650 } },
            { "geography": [ "Europe", "France" ], "productLine": "Electronics", "revenue": { "2022": 121987, "2021": 62435, "2020": 65834 } },
            { "geography": [ "Europe", "Germany" ], "productLine": "Produce", "revenue": { "2022": 130143, "2021": 107447, "2020": 145543 } },
            { "geography": [ "Europe", "Germany" ], "productLine": "Clothing", "revenue": { "2022": 77903, "2021": 97139, "2020": 110346 } },
            { "geography": [ "Europe", "Germany" ], "productLine": "Electronics", "revenue": { "2022": 110897, "2021": 155282, "2020": 128696 } },
            { "geography": [ "South America", "Brazil" ], "productLine": "Clothing", "revenue": { "2022": 66217, "2021": 55798, "2020": 66643 } },
            { "geography": [ "South America", "Brazil" ], "productLine": "Electronics", "revenue": { "2022": 94262, "2021": 100560, "2020": 56272 } }
          ],
          "CompanyB": [
            { "geography": [ "Europe", "United Kingdom" ], "productLine": "Produce", "revenue": { "2022": 281110, "2021": 242965, "2020": 221863 } },
            { "geography": [ "Europe", "United Kingdom" ], "productLine": "Clothing", "revenue": { "2022": 168270, "2021": 121161, "2020": 60919 } },
            { "geography": [ "Europe", "United Kingdom" ], "productLine": "Electronics", "revenue": { "2022": 239537, "2021": 131959, "2020": 97047 } },
            { "geography": [ "Europe", "Ireland" ], "productLine": "Produce", "revenue": { "2022": 74963, "2021": 43406, "2020": 54623 } },
            { "geography": [ "Europe", "Ireland" ], "productLine": "Clothing", "revenue": { "2022": 44872, "2021": 24797, "2020": 16010 } },
            { "geography": [ "Europe", "Ireland" ], "productLine": "Electronics", "revenue": { "2022": 63877, "2021": 94185, "2020": 87098 } }
          ],
         .........
       }; 
```

我的页面中有三个下拉菜单，例如 Company、Geography(CountryName2nd element) 和 ProductLine ...

根据选定的下拉值，我需要获取收入..

我能够捕获用户选择的**companyname**、**Geography(countryName)**和**productLine**，但很难获得特定的收入......

我可以得到这样的收入

```
console.log(testObj[company][1].revenue); 
```

但在这里我不确定具体的记录，因为我需要根据国家和产品线进行选择

我得到了解决方案。但我想知道解析json对象的最佳方法是什么……它是根据我们的需要重构还是循环遍历json对象……

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T08:38:14.213

您只需遍历数组，直到找到匹配的数组：

```
var companyArr = testObj[company];
for(var i = 0; i < companyArr.length; i++){
    if(companyArr[i].geography[1] == country && companyArr[i].productLine == productLine)
        break;
}

if(i < companyArr.length){ // Found a match
    console.log(companyArr[i]); // Log the matching object
} 
```

请注意，如果重组您的 json 是一种选择，那么您可以完全避免循环，只需执行以下操作：

```
testObj[company][country][productLine].revenue 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T08:45:58.007

您可以像这样过滤匹配的对象

```
var company = "CompanyA";
var country = "Germany";
var productLine = "Produce";

var res = testObj[company].filter(function(el){
  return el.geography[1] == country && productLine == el.productLine;
});
console.log(res); 
```

# jquery - jQuery Flot time-based axis panning issue

> ID：16129328
> 
> 赞同：2
> 
> 时间：2013-04-21T08:32:43.127
> 
> 标签：jquery, flot, panning

I've been tinkering, making a little chart with Flot and some of it's plugins. The purpose is to provide a chart tracking basal body temperature, with the date per day on the x axis, degrees on the y axis. Panning will shift the x axis, so you can see previous dates etc, clicking will result in a new point, snapped to grid.

The grid on a time based axis when panning does not move. It does when I change the axis type to normal. I really want to have the entire grid move, because now the line series sort of 'floats around' on the grid. Does anyone know how to make that work? Am I missing something in the options?

This is harder to explain than it is to see, so fsfiddle provided: [http://jsfiddle.net/jorgthuijls/caM3q/1/](http://jsfiddle.net/jorgthuijls/caM3q/1/)

Triggering the change in behaviour is the option `mode: 'time'` on the x axis option (line 24 of the fiddle).

The bit of code to pay attention to:

```
 xaxis: {
            show: true,
            min: firstDay,
            max: lastDay,
            ticks: 31,
            mode: 'time',
            timezone: 'browser',
            timeformat: '%d. %m'
        }, 
```

change this to

```
 xaxis: {
            show: true,
            min: firstDay,
            max: lastDay,
            ticks: 31,
        }, 
```

and see what happens moving the graph after adding a few points.

Much appreciated!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T13:24:03.020

这是两件事的结合：

1.  我们刚刚修复了 0.8.0 中的一个错误，因此如果您尝试使用master 的[jquery.flot.time.js](https://github.com/flot/flot/blob/master/jquery.flot.time.js)，您会立即注意到改进。

2.  即使进行了修复，滴答声仍然会跳动一点。那是因为您有足够大的范围，刻度仅每 3 天出现一次。然而，在内部，报价生成器仍将一天视为最小间隔。因此，只要您平移一天，它就会重新计算，即使这只是刻度间隔大小的三分之一。

您通常可以通过分配适当高的 minTickSize 来解决该问题；`[5, 'day']`，例如，让滴答生成器相信它不需要重新计算。当您提前知道绘图的尺寸时，这种方法效果最好。

# mysql - mySQL 中的外键引用

> ID：16129332
> 
> 赞同：0
> 
> 时间：2013-04-21T08:32:56.600
> 
> 标签：mysql

在 mySQL 中，如果我创建了两个表并且表中包含引用到另一个表的外键。我已经在另一个表中输入了数据，并且也在其中输入了定义的外键。有没有办法让外键在第二个表中自动更新而无需输入整个数据？例如，我有一个客户表，其中包含 2 个字段 - customerID 和 customerName。另一个表是一个发票表，它有 3 个字段——invoiceID、cost 和 customerID，其中 customerID 是外键。因此，如果我在客户表和发票表中输入数据，因为客户数量非常多，我不想继续在发票表中输入 customerID。由于 customerID 是另一个表中的外键，我如何让它自动从客户表中引用它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T08:43:45.877

您可以自动添加预定义的编号，例如 1，但这会将所有发票分配给客户#1。

另一方面，您可以在添加发票时自动添加客户。为此，您需要控制 customerID，如果具有给定 ID 的客户不存在，则将一个新客户插入到客户表中，名称为空。在那之后，您仍然需要输入这些客户的名称，但不是一个，这会让事情（也许）更容易。

我认为你在这里有一个误导性的想法。我强烈建议阅读一本书或在线查看教程或检查示例项目的数据库表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T08:43:33.213

如果您在发票数据中包含客户名称并且已经填充了客户数据，您可以这样做

```
INSERT INTO tbl_invoice (invoiceData, invoiceData2, customerID)
  SELECT 'value1', 'value2', customer.customerID
  FROM tbl_customer customer
  WHERE customer.customerName = 'customer name' 
```

因此，您无需直接处理客户 ID。

MySQL 中没有自动功能可以做到这一点。如果需要，可以使用触发器。

# qt - 出队总是失败，队列总是空的

> ID：16129335
> 
> 赞同：0
> 
> 时间：2013-04-21T08:33:51.097
> 
> 标签：qt, qt4

我不知道我的代码到底有什么问题，它从不使队列出队，而是 isEmpty 总是满足 true。

```
class ConcurrentQueue
{
private:
QQueue<QByteArray> dataStore;

public:

void Enqueue(QByteArray value);
QByteArray Dequeue();

bool isEmpty();
private:
QMutex mutex;
};

void ConcurrentQueue::Enqueue(QByteArray value)
{
qDebug() << dataStore.length();
mutex.lock();
dataStore.enqueue(value);
mutex.unlock();
qDebug() << dataStore.length();
}

QByteArray ConcurrentQueue::Dequeue()
{

// mutex.lock();
// return dataStore.dequeue();
// mutex.unlock();

QByteArray tmp;

mutex.lock();

if(!dataStore.isEmpty())
{
tmp = dataStore.dequeue();
}

mutex.unlock();

return tmp;
}

bool ConcurrentQueue::isEmpty()
{
return dataStore.isEmpty();
} 
```

接下来，一个计时器连接到一个插槽，以每隔 10 毫秒将一个数据包排入队列：

```
QByteArray built((char*)data, len) ;
//qDebug() << built.toHex();
qDebug() << "EnQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQ";
queue.Enqueue(built); 
```

一个线程定期检查此队列是否为空，它将队列出列并执行某些操作，但 isEmplty 始终返回 true

```
if(queue.isEmpty())
{
qDebug() << "#####################################";
return;
}
//NEVER COMES HERE
QByteArray rd15Bytes = queue.Dequeue(); 
```

这是线程：

```
Write::Write()
{
}

void Write::run(){
while(1)
{
rs.writeToSerialPort(); // in this function above always isemplty is true

this->msleep(10);
}
} 
```

# multithreading - 为什么在 glibc 的 NPTL 实现中访问 pthread 键的序列号不同步？

> ID：16129336
> 
> 赞同：0
> 
> 时间：2013-04-21T08:33:53.397
> 
> 标签：multithreading, thread-safety, nptl, pthread-key-create

最近研究glibc中线程本地存储是如何实现的，发现如下代码，实现了API`pthread_key_create()`

```
int
__pthread_key_create (key, destr)
      pthread_key_t *key;
      void (*destr) (void *);
{
    /* Find a slot in __pthread_kyes which is unused.  */
    for (size_t cnt = 0; cnt < PTHREAD_KEYS_MAX; ++cnt)
    {
        uintptr_t seq = __pthread_keys[cnt].seq;

        if (KEY_UNUSED (seq) && KEY_USABLE (seq)
            /* We found an unused slot.  Try to allocate it.  */
            && ! atomic_compare_and_exchange_bool_acq (&__pthread_keys[cnt].seq,
                                                       seq + 1, seq))
        {
            /* Remember the destructor.  */
            __pthread_keys[cnt].destr = destr;

            /* Return the key to the caller.  */
            *key = cnt;

            /* The call succeeded.  */
            return 0;
       }
    }

    return EAGAIN;
} 
```

`__pthread_keys`是所有线程访问的全局数组。我不明白为什么其成员的读取`seq`不同步，如下所示：

```
uintptr_t seq = __pthread_keys[cnt].seq; 
```

虽然它在以后修改时是同步的。

仅供参考，`__pthread_keys`是一个类型为 的数组`struct pthread_key_struct`，其定义如下：

```
/* Thread-local data handling.  */
struct pthread_key_struct
{
    /* Sequence numbers.  Even numbers indicated vacant entries.  Note
       that zero is even.  We use uintptr_t to not require padding on
       32- and 64-bit machines.  On 64-bit machines it helps to avoid
       wrapping, too.  */
    uintptr_t seq;

    /* Destructor for the data.  */
    void (*destr) (void *);
}; 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T08:57:43.527

在这种情况下，循环可以避免昂贵的锁获取。稍后完成的原子[比较和交换操作](http://en.wikipedia.org/wiki/Compare-and-swap)( `atomic_compare_and_exchange_bool_acq`) 将确保只有一个线程可以成功增加序列值并将密钥返回给调用者。在第一步中读取相同值的其他线程将继续循环，因为 CAS 只能对单个线程成功。

这是有效的，因为序列值在偶数（空）和奇数（占用）之间交替。将值增加到奇数会阻止其他线程获取插槽。

与 CAS 指令相比，仅读取该值通常需要更少的周期，因此在执行 CAS 之前查看该值是有意义的。

有许多[无等待和无锁算法](http://en.wikipedia.org/wiki/Lock-free_and_wait-free_algorithms)利用 CAS 指令来实现低开销同步。

# javascript - CodeMirror: Catching Enter Key prevents line breaks

> ID：16129338
> 
> 赞同：3
> 
> 时间：2013-04-21T08:34:09.273
> 
> 标签：javascript, codemirror

I used the extraKeys-option of CodeMirror 3.12 to detect when the user starts a new line:

```
extraKeys: {
    "Enter": onNewLine
} 
```

onNewLine() does nothing but a console.log(). Now CodeMirror ignores that key. You can't start a new line anymore. Is there a way to hook up additional functionality on a new-line-event without interfering CodeMirror internals? I just want to analyze the text of the recently closed line.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-21T12:02:06.013

在 onNewLine 函数的末尾添加换行符。这应该工作

```
 function onNewLine(e){
    console.log(e);
    editor.replaceSelection("\n" ,"end");
  } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-11-04T14:31:39.917

我发现返回 CodeMirror.Pass 也可以：

```
function onNewLine(e) {
    console.log("Enter key was pressed!");
    return CodeMirror.Pass;
} 
```

从文档中：

> 密钥处理程序函数可能返回 CodeMirror.Pass 以指示它已决定不处理密钥，并且应该轮到其他处理程序（或默认行为）。

即使处理程序确实执行了操作，这似乎也有效。在我的例子中，当用户按下回车键时，我使用 editor.indentLine 函数来缩进当前行。

# css - CSS Issue - Wrapping

> ID：16129341
> 
> 赞同：0
> 
> 时间：2013-04-21T08:34:31.853
> 
> 标签：css, background, wrapper

I'm trying to wrap my website differently so that the background is divided in 2\. The gray part which is the main background but also a white part which is smaller and wrap the main-content.

Basically I'd like [this](http://frenchegg.com) to look like [this](http://frenchegg.com/images/home.jpg).

I'm not quite sure how to add the images to create that shadow effect and I also don't know how to create that white wrapper.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T08:45:47.220

我不建议使用图像。太大了。这里有两种方法。不要忘记这`rgba()`在 [lte ie 8] 中不起作用（我认为？）。此外，我使用了`:before`伪，以便将其放置在元素之前，但您可能会发现这不是必需的。但是使用伪元素，您可以定位您的效果。

```
#element:before{
    background:-webkit-linear-gradient(top,rgba(0,0,0,1) 0%, rgba(0,0,0,0) 100%);
    background:-moz-linear-gradient(top,rgba(0,0,0,1) 0%, rgba(0,0,0,0) 100%);
    background:-o-linear-gradient(top,rgba(0,0,0,1) 0%, rgba(0,0,0,0) 100%);
    background:-ms-linear-gradient(top,rgba(0,0,0,1) 0%,rgba(0,0,0,0) 100%);
    background:linear-gradient(top,rgba(0,0,0,1) 0%,rgba(0,0,0,0) 100%);
    content:'';
}
#element{
    background:#CCCCCC;
} 
```

而对于 ie（我真的会推荐它。老实说，我不会打扰 ie 哈哈）只使用十六进制颜色，使用身体的背景颜色。

```
#element{
    background:linear-gradient(top,#000000 0%, #CCCCCC 100%);
} 
```

除了 lte ie 9 无论如何都不能使用线性梯度属性！

另一种方法是使用`box-shadow`，但这不会实现您正在寻找的透明渐变。

```
#element{
    box-shadow:0px 0px 3px #000000;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T09:41:19.360

对了看了一眼。让我知道结果。

```
.main-content{
   background:#FFFFFF;
   width:90%;
   margin:0% 4% 0% 5%;
} 
```

简单的解决方法：

```
.main-content{
    -webkit-box-shadow:0px 0px 3px 5px #000000;
    -moz-box-shadow:0px 0px 3px 5px #000000;
    -o-box-shadow:0px 0px 3px 5px #000000;
    box-shadow:0px 0px 3px 5px #0000000;
} 
```

或您要求的渐变：

```
.main-content:before{
    background:-webkit-linear-gradient(top,rgba(0,0,0,1) 0%, rgba(0,0,0,0) 100%);
    background:-moz-linear-gradient(top,rgba(0,0,0,1) 0%, rgba(0,0,0,0) 100%);
    background:-o-linear-gradient(top,rgba(0,0,0,1) 0%, rgba(0,0,0,0) 100%);
    background:-ms-linear-gradient(top,rgba(0,0,0,1) 0%,rgba(0,0,0,0) 100%);
    background:linear-gradient(top,rgba(0,0,0,1) 0%,rgba(0,0,0,0) 100%);
    content:'';
    z-index:98;
    position:relative;
    width:105%;
    height:400px;
    left:-2%;
} 
```

但这种渐变方法仅适用于支持“webkits”及其更新的对应部件的浏览器。但我还没有真正测试过它，所以你可能想玩弄它等等。如果你不喜欢它，试试这个`box-shadow`方法:)

您需要调整元素`div.bann`以纠正一些定位错误。元素中有 a，因为元素比图像高。

```
.bann{
    width:90%;
    height:auto;/*probably can remove this*/
    margin:0% 4% 0% 5%;
    padding:0px;
} 
.bann>img{/*not required if you haven't adjusted the image. You can remove this completely.*/
    width:100%;
    height:auto;
} 
```

# uml - How to add and show server's configuration in node using sparx enterprise architect's deployment diagram

> ID：16129344
> 
> 赞同：1
> 
> 时间：2013-04-21T08:34:56.243
> 
> 标签：uml, enterprise-architect

When I am using Sparx Enterprise Architect to do deployment modeling, How do I add and show the server's configuration? like the following image, the left is from the example model, and got the configuration, but when I create an instance of the same server, nothing is showed up there. Both are instances of **Dell PowerEdge 2650**. ![enter image description here](https://i.stack.imgur.com/ZJvZJ.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T13:40:37.670

我认为您搜索的是[定义 Run-Time Variable](http://www.sparxsystems.com/enterprise_architect_user_guide/modeling_languages/definearuntimevariable.html)。

作为替代方案（或另外），您可以使用[tagged values](http://www.sparxsystems.com/enterprise_architect_user_guide/9.3/modeling_basics/addtaggedvalues.html)。

# css - 3 column, fixed header, sidebars fixed, content scrollable

> ID：16129347
> 
> 赞同：4
> 
> 时间：2013-04-21T08:35:26.607
> 
> 标签：css, html, layout

Can anyone assist me with the following div layout? I have tried a couple of solutions, however, the only way i have been able to accomplish this is using tables.

![site layout](https://i.stack.imgur.com/dsBUz.png)

I had a look at [Holy Grail 3 Column Layout](http://matthewjamestaylor.com/blog/ultimate-3-column-holy-grail-pixels.htm), however, this layoyt is not 100% height, and header is not fixed, i also need only the content to scroll, the sidebars needs to be fixed 100% height

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-07-21T23:15:58.323

似乎这里的答案忽略了您的大部分要求。我偶然发现了这一点，因为我遇到了与您所追求的相同布局的渲染问题。我把上面的小提琴分叉给你看：

[http://jsfiddle.net/RsRf9/2/](http://jsfiddle.net/RsRf9/2/)

主要区别在于整个主体都是可滚动的，而不仅仅是中心的小区域（我认为这就是您所追求的）。

除了清理没有做任何事情的样式（比如位置固定时的浮动），主要的变化是中心 col - 你应该需要的是：

```
.center{margin:100px 200px;} 
```

另一个变化是如何在侧边栏上获得“高度 100%”的效果——我的诀窍是这样做：

```
.left,.right{width:200px;top: 100px; bottom: 0px;position: fixed;} 
```

而不是高度 100%，我只是告诉它从顶部 100（导航底部）延伸到底部 0（页面底部）

这会将内容推到顶部导航下方和两个固定侧栏之间。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-21T09:07:30.570

我根据您的要求创建了一个工作小提琴：

这是[工作小提琴](http://jsfiddle.net/6DA3s/8/)- 更新以包含固定标题只有顶部栏是固定的

需要注意的重要一点是 div 的结构布局......注意 .center 在 .right 之后

```
<div class='wrap'>
    <div class='head'>Header</div>
    <div class='bodywrap'>
        <div class='left'>left</div>
        <div class='right'>right</div>
        <div class='center'>center center center center center center center center center center center center ... blah</div>
    </div>
 </div> 
```

而CSS是：

只是标题固定：

```
html,body{height:100%}
.wrap{width:100%;height:100%;position:relative}
.head{height:100px;position:fixed;top:0;left:0;width:100%} << UPDATED for fixed header
.bodywrap{margin-top:100px;width:102%;margin-left:-1%} << UPDATED - Terrible hack and you may find something more elegant
.left,.right{width:200px;height:100%}
.left,.center,.right,.bodywrap{height:100%}
.left{float:left;}
.center{margin-left:200px; overflow:scroll; overflow-x:hidden;}
.right{float:right;}

.left{background-color:#aaa}
.right{background-color:#ccc}
.center{background-color:#444}
.head{background-color:#777} 
```

已修复标题和侧边栏（还能够修复 .left 和 .right 尺寸过小的脏问题

```
html,body{height:100%}
.wrap{width:100%;height:100%;position:relative}
.head{height:100px;position:fixed;top:0;left:0;width:100%}
.bodywrap{margin-top:100px;margin-left:-8px}
.left,.right{width:200px;height:100%}
.left,.center,.right,.bodywrap{height:100%}
.left{float:left;position:fixed}
.center{margin-left:200px; overflow:scroll; overflow-x:hidden;margin-right:191px}
.right{position:fixed;right:0}

.left{background-color:#aaa}
.right{background-color:#ccc}
.center{background-color:#444}
.head{background-color:#777} 
```

[这是顶部和侧面固定中心滚动液体中心柱](http://jsfiddle.net/6DA3s/9/)（.left 和 .right 上没有间隙）

这是浮动的基本用法，但结构标记布局是关键；）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T09:14:45.200

从基本意义上来说，这实际上很容易做到，您不需要表格（或表格单元格），但混合 px 和 % 大小可能会出现问题。如果你坚持 % 你的页面无论如何都会更好地调整大小。处理跨浏览器问题需要更多的 CSS 调整，但是有很多网格解决方案可以实现经过验证的解决方案，即使对于 IE6 和 twitter 的引导程序等框架也会提供更多。

换句话说，这是一个已解决的问题，但这里有一个快速示例，说明如何手动到达那里；

```
<div class="container">
<div class="header">
    header
</div>

<div class="left">
left
</div>

<div class="main">
    content
</div>

<div class="right">
    right
</div>
</div> 
```

和CSS；

```
html, body, .container
{
height:100%;
}

.container
{
background-color: pink;
}

.header
{
background-color: yellow;
height:50px;
}

.left
{
background-color: red;
float:left;
width:10%;
height:100%;
overflow: hidden;
}

.right
{
background-color: blue;
float:left;
width:10%;
height:100%;
overflow: hidden;
}

.main
{
background-color:#fefefe;
float:left;
height:100%;
width: 80%;
overflow-y:scroll;
} 
```

当然还有[小提琴](http://jsfiddle.net/bMuE9/)

使用 % sizing 还可以让您获得适用于平板电脑和移动设备的更具响应性的设计。同样，许多网格框架在设计上都是“响应式”的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-21T08:42:51.773

对于这种布局，我使用[YUI 网格样式表。](http://developer.yahoo.com/yui/grids/)它经过试验和测试，可在多种浏览器中使用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-07-15T13:57:36.880

您可以使用 scrollToFixed 插件来固定左侧边栏和右侧边栏，并且中心栏内容只能向上和向下滚动。对于演示滚动使用下面的链接 [http://bigspotteddog.github.io/ScrollToFixed/](http://bigspotteddog.github.io/ScrollToFixed/)

还有一件事是使用 Bootstrap 来设计 UI。在页面标题部分包含 Bootstrap CSS 和 JavaScript

```
 <div class="container">
        <div class="col-md-12">
             <div class="col-md-3" id="left-sidebar">
                 left-content
             <div>
             <div class="col-md-6" id="center">
                 center content
             </div>
             <div class="col-md-3" id="right-sidebar">
                 right-content
            </div>
       </div>
    </div> 
```

您可以根据您的要求进行修改。我只是给你一般提示。

只需编写以下脚本即可滚动

```
 $(document).ready(function(){
    $('#right-sidebar').scrollToFixed({
                        marginTop: function() {
                            return 5;
                        },
                        limit: function() {
                            return (
                                 $('#footer-widgets-bg').offset().top - $('#right-sidebar').outerHeight(true)
                            );
                        },
                        zIndex: 1,
                        removeOffsets: true
                    });  
    }); 
```

# php - JconfirmAction 和 ajax 发布

> ID：16129349
> 
> 赞同：0
> 
> 时间：2013-04-21T08:35:44.150
> 
> 标签：php, jquery, ajax

我无法将 JconfirmAction 与此代码进行比较：

```
<script type="text/javascript">
$(function () {
    $(".delbutton").click(function () {
        //Save the link in a variable called element
        var element = $(this);
        //Find the id of the link that was clicked
        var del_id = element.attr("id");

        //Built a url to send
        var info = 'id=' + del_id;
        if (confirm("Sure you want to delete this update? There is NO undo!")) {
            $.ajax({
                type: "GET",
                url: "ajax_delete.php",
                data: info,
                success: function () {

                }
            });
            $(this).parents(".record").animate({
                backgroundColor: "#fbc7c7"
            }, "fast")
                .animate({
                opacity: "hide"
            }, "slow");
        }
        return false;
    });
});
</script> 
```

我尝试使用以下代码将此脚本添加到存在页面：

```
<script type="text/javascript">
    $(document).ready(function() {
        $('.ask-custom').jConfirmAction({question : "Usunąć ?", yesAnswer : "Tak", cancelAnswer : "Nie"});
    });
</script> 
```

链接`class`：

```
<a href="#" id="<?php echo $row['id']; ?>" title="DELETE" class="ask-custom delbutton"> 
```

任何提示？此致。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T11:00:24.653

尝试更改您的`ajax`请求：

```
$.ajax({
                type: "GET",
                url: "ajax_delete.php",
                data: {id:del_id},
                success: function () {

                }
            }); 
```

# string - Evenly distribute repetitive strings

> ID：16129356
> 
> 赞同：9
> 
> 时间：2013-04-21T08:36:44.377
> 
> 标签：string, perl, bash, distribution, evenly

I need to distribute a set of repetitive strings as evenly as possible.

Is there any way to do this better then simple shuffling using [unsort](http://man.cx/unsort(1))? It can't do what I need.

For example if the input is

```
aaa
aaa
aaa
bbb
bbb 
```

The output I need

```
aaa
bbb
aaa
bbb
aaa 
```

The number of repetitive strings doesn't have any limit as well as the number of the reps of any string. The input can be changed to list `string number_of_reps`

```
aaa 3
bbb 2
... .
zzz 5 
```

Is there an existing tool, Perl module or algorithm to do this?

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-21T13:06:57.627

*摘要：*鉴于您对如何确定“均匀分布”的描述，我编写了一个算法，为每个可能的排列计算“权重”。然后可以暴力破解最佳排列。

# 称量物品的排列

> “均匀分布”是指字符串的每两次出现之间的间隔以及字符串的起始点和第一次出现之间的间隔以及最后一次出现和结束点之间的间隔必须尽可能接近相等其中 'interval' 是其他字符串的数量。

计算字符串出现之间的距离是微不足道的。我决定以示例组合的方式计数

```
A B A C B A A 
```

会给计数

```
A: 1 2 3 1 1
B: 2 3 3
C: 4 4 
```

即两个相邻的字符串的距离为 1，并且开头或结尾的字符串与字符串边缘的距离为 1。这些属性使距离更容易计算，但只是一个常数，稍后将被删除。

这是计算距离的代码：

```
sub distances {
    my %distances;
    my %last_seen;

    for my $i (0 .. $#_) {
        my $s = $_[$i];
        push @{ $distances{$s} }, $i - ($last_seen{$s} // -1);
        $last_seen{$s} = $i;
    }

    push @{ $distances{$_} }, @_ - $last_seen{$_} for keys %last_seen;

    return values %distances;
} 
```

接下来，我们计算每组距离的标准方差。一个距离*d的方差描述了它们与平均值**a*相差多远。因为它是平方的，所以大的异常会受到严重的惩罚：

```
variance(d, a) = (a - d)² 
```

我们通过对每个项目的方差求和，然后计算平方根来得到一个数据集的标准方差：

```
svar(items) = sqrt ∑_i variance(items[i], average(items)) 
```

表示为 Perl 代码：

```
use List::Util qw/sum min/;

sub svar (@) {
    my $med = sum(@_) / @_;
    sqrt sum map { ($med - $_) ** 2 } @_;
} 
```

我们现在可以通过计算距离的标准方差来计算排列中一个字符串的出现次数。该值越小，分布越均匀。

现在我们必须将这些权重组合成我们组合的总权重。我们必须考虑以下属性：

*   出现次数多的字符串应该比出现次数少的字符串具有更大的权重。
*   不均匀分布应该比均匀分布具有更大的权重，以强烈惩罚不均匀性。

以下可以通过不同的程序换出，但我决定通过将每个标准方差提高到出现次数的幂来衡量每个标准方差，然后添加所有加权方差：

```
sub weigh_distance {
    return sum map {
        my @distances = @$_; # the distances of one string
        svar(@distances) ** $#distances;
    } distances(@_);
} 
```

事实证明，这更喜欢良好的分布。

我们现在可以通过将给定排列传递给 来计算给定排列的权重`weigh_distance`。因此，我们可以决定两个排列是否均匀分布，或者是否优先选择一个：

# 选择最佳排列

给定一系列排列，我们可以选择那些最佳排列：

```
sub select_best {
    my %sorted;
    for my $strs (@_) {
        my $weight = weigh_distance(@$strs);
        push @{ $sorted{$weight} }, $strs;
    }
    my $min_weight = min keys %sorted;
    @{ $sorted{$min_weight} }
} 
```

这将返回至少一种给定的可能性。如果确切的一个不重要，则可以选择返回数组的任意元素。

**错误：**这依赖于浮点数的字符串化，因此对各种不同的 epsilon 错误都是开放的。

# 创建所有可能的排列

对于给定的多组字符串，我们希望找到最佳排列。我们可以将可用字符串视为将字符串映射到剩余可用事件的哈希。通过一点递归，我们可以构建所有排列，例如

```
use Carp;
# called like make_perms(A => 4, B => 1, C => 1)
sub make_perms {
    my %words = @_;
    my @keys =
        sort  # sorting is important for cache access
        grep { $words{$_} > 0 }
        grep { length or carp "Can't use empty strings as identifiers" }
        keys %words;
    my ($perms, $ok) = _fetch_perm_cache(\@keys, \%words);
    return @$perms if $ok;
    # build perms manually, if it has to be.
    # pushing into @$perms directly updates the cached values
    for my $key (@keys) {
        my @childs = make_perms(%words, $key => $words{$key} - 1);
        push @$perms, (@childs ? map [$key, @$_], @childs : [$key]);
    }
    return @$perms;
} 
```

`_fetch_perm_cache`返回一个对缓存排列数组的引用，以及一个用于测试成功的布尔标志。我使用了以下具有深度嵌套哈希的实现，它将排列存储在叶节点上。为了标记叶节点，我使用了空字符串——因此进行了上述测试。

```
sub _fetch_perm_cache {
    my ($keys, $idxhash) = @_;
    state %perm_cache;
    my $pointer = \%perm_cache;
    my $ok = 1;
    $pointer = $pointer->{$_}[$idxhash->{$_}] //= do { $ok = 0; +{} } for @$keys;
    $pointer = $pointer->{''} //= do { $ok = 0; +[] }; # access empty string key
    return $pointer, $ok;
} 
```

不是所有的字符串都是有效的输入键是没有问题的：每个集合都可以枚举，所以`make_perms`可以给定整数作为键，它们被转换回调用者表示的任何数据。请注意，缓存使此非线程安全（如果`%perm_cache`是共享的）。

# 连接碎片

现在这是一个简单的问题

```
say "@$_" for select_best(make_perms(A => 4, B => 1, C => 1)) 
```

这将产生

```
A A C A B A
A A B A C A
A C A B A A
A B A C A A 
```

根据使用的定义，它们都是最优解。有趣的是，解决方案

```
A B A A C A 
```

不包括在内。这可能是称重过程的不良边缘情况，它强烈倾向于将稀有字符串的出现放在中心。参见*进一步的工作*。

## 完成测试用例

> 首选版本是：AABAA ABAAA, ABABACA ABACBAA(连续两个'A'), ABAC ABCA

我们可以运行这些测试用例

```
use Test::More tests => 3;
my @test_cases = (
  [0 => [qw/A A B A A/], [qw/A B A A A/]],
  [1 => [qw/A B A C B A A/], [qw/A B A B A C A/]],
  [0 => [qw/A B A C/], [qw/A B C A/]],
);
for my $test (@test_cases) {
  my ($correct_index, @cases) = @$test;
  my $best = select_best(@cases);
  ok $best ~~ $cases[$correct_index], "[@{$cases[$correct_index]}]";
} 
```

出于兴趣，我们可以计算这些字母的最佳分布：

```
my @counts = (
  { A => 4, B => 1 },
  { A => 4, B => 2, C => 1},
  { A => 2, B => 1, C => 1},
);
for my $count (@counts) {
  say "Selecting best for...";
  say "  $_: $count->{$_}" for keys %$count;
  say "@$_" for select_best(make_perms(%$count));
} 
```

这给我们带来

```
Selecting best for...
  A: 4
  B: 1
A A B A A
Selecting best for...
  A: 4
  C: 1
  B: 2
A B A C A B A
Selecting best for...
  A: 2
  C: 1
  B: 1
A C A B
A B A C
C A B A
B A C A 
```

# 进一步的工作

*   因为称重对边缘距离的重要性与对字母之间距离的重要性相同，所以首选对称设置。这种情况可以通过减少到边缘的距离值来缓解。
*   ~~置换生成算法有待改进。记忆可能会导致加速。~~完毕！现在，合成基准的排列生成速度提高了 50 倍，并且可以访问*O(n)*中的缓存输入，其中*n*是不同输入字符串的数量。
*   找到一种启发式方法来指导置换生成，而不是评估所有可能性，这将是很棒的。一种可能的启发式方法会考虑是否有足够多的不同字符串可用，以至于没有字符串必须与其自身相邻（即距离 1）。此信息可用于缩小搜索树的宽度。
*   将递归 perm 生成转换为迭代解决方案将允许将搜索与权重计算交织在一起，这将更容易跳过或推迟不利的解决方案。
*   标准方差被提高到出现次数的幂。这可能并不理想，因为大量事件的大偏差比少数事件的小偏差轻，例如

    ```
    weight(svar, occurrences) → weighted_variance
    weight(0.9, 10) → 0.35
    weight(0.5, 1)  → 0.5 
    ```

    这实际上应该反过来。

### 编辑

下面是一个更快的过程，它近似于一个良好的分布。在某些情况下，它会产生正确的解决方案，但通常情况并非如此。输出对于具有许多不同字符串的输入是不好的，其中大多数字符串很少出现，但通常可以接受，只有少数字符串很少出现。它比蛮力解决方案要快得多。

它的工作原理是定期插入字符串，然后分散可避免的重复。

```
sub approximate {
    my %def = @_;
    my ($init, @keys) = sort { $def{$b} <=> $def{$a} or $a cmp $b } keys %def;
    my @out = ($init) x $def{$init};
    while(my $key = shift @keys) {
        my $visited = 0;
        for my $parts_left (reverse 2 .. $def{$key} + 1) {
            my $interrupt = $visited + int((@out - $visited) / $parts_left);
            splice @out, $interrupt, 0, $key;
            $visited = $interrupt + 1;
        }
    }
    # check if strings should be swapped
    for my $i ( 0 .. $#out - 2) {
        @out[$i, $i + 1] = @out[$i + 1, $i]
            if  $out[$i] ne $out[$i + 1]
            and $out[$i + 1] eq $out[$i + 2]
            and (!$i or $out[$i + 1 ] ne $out[$i - 1]);
    }
    return @out;
} 
```

### 编辑 2

我将算法推广到任何对象，而不仅仅是字符串。我通过将输入转换为抽象表示来做到这一点，例如“第一件事中的两个，第二件事中的一个”。这里最大的优势是我只需要整数和数组来表示排列。此外，缓存更小，因为`A => 4, C => 2`和`C => 4, B => 2`表示`$regex => 2, $fh => 4`相同的抽象多集。在外部、内部和缓存表示之间转换数据的必要性所导致的速度损失被递归数量的减少大致平衡。

最大的瓶颈在`select_best`子程序中，我在 Inline::C 中大量重写了它（仍然占用了大约 80% 的执行时间）。

这些问题有点超出了原始问题的范围，所以我不会在这里粘贴代码，但我想一旦我消除了皱纹，我会通过 github 提供该项目。

# javascript - In prototype inheritance program when a property not found in a specified object

> ID：16129365
> 
> 赞同：0
> 
> 时间：2013-04-21T08:38:54.310
> 
> 标签：javascript

All, After reading this [post](https://stackoverflow.com/questions/816071/prototype-based-vs-class-based-inheritance), and did some test based on it .

```
 function Shape() {
            this.x = 0;
            this.y = 0;
        };

        Shape.prototype.move = function(x, y) {
            this.x += x;
            this.y += y;
            console.log("Shape moved.");
        };

        // Rectangle - subclass
        function Rectangle() {
            //Shape.call(this); //call super constructor.
        };

        Rectangle.prototype = Object.create(Shape.prototype);

        var rect = new Rectangle();
                    alert(rect.x); 
```

If I commented the code `Shape.call(this);` in the `Rectangle`, I found the `rect.x` is `underfined` instead of the value `0`.

And What make me confused is that I found in the best answer of the [Post](https://stackoverflow.com/questions/816071/prototype-based-vs-class-based-inheritance) said:

*"In javascript, every object has a secret link to the object which created it,forming a chain. When an object is asked for a property that it does not have,its parent object is asked... continually up the chain until the property is found or until the root object is reached."*

So I can't understand why the `rect` can't found `x` in the prototype chain. The `rect` is already inherited form `Shape`. If the `x` doesn't exist in the `rect`, It supposed be found in his parent. right ? And in my understanding .If using `Shape.call(this);` , It just add a new `x` property to the `rect`, well ,that would not be a code reusing the original `x` from parents. It just like the override property in the classical inheritance . that is add a new property into the sub class which have the same name and type as the one in the base class..I don't know if my understanding is right , if not . please correct me .Or was I missing something I didn't noticed ? thanks.

**Edit**

Below is my understanding based on the Thilo and Arun P Johny 's answers. please correct me if it is not right.

Before inheritance happen.

![enter image description here](https://i.stack.imgur.com/6IDTI.png)

After inheritance executed.

![enter image description here](https://i.stack.imgur.com/y7A0e.png)

So the `x` only belong to the instance constructed by `Shape`. thanks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T08:43:16.433

如果您不调用超级构造函数，则`this.x = 0`不会执行，因此`x`保持未定义。

如果你想让它出现在原型中，你不得不说`Shape.prototype.x = 0`，我想。

> 所以我不明白为什么在原型链中`rect`找不到。`x`

这是因为原型也没有`x`。它只有`move`. 被分配给构造函数中的`x`各个实例（但仅当您调用它时）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T09:00:17.823

Arun P Johny 是对的（你应该阅读他的评论！）

尝试这个：

```
 function Shape() {
        this.x = 0;
        this.y = 0;
    };

    Shape.prototype.move = function(x, y) {
        this.x += x;
        this.y += y;
        console.log("Shape moved.");
    };

    // Rectangle - subclass
    function Rectangle() {            
    };

    Rectangle.prototype = new Shape();
    var rect = new Rectangle();
    alert(rect.x); 
```

您可以`Shape.call(this);`像在代码中那样调用（注释），但这种方式不是“真正的”继承，因为您将无法`move()`在 Rectangle 中使用。

但是上面的代码是“新”和原型的混杂，因此非常混乱。我想你真正想做的是这样的：

```
 var Shape = {
        x: 0,
        y: 0,
        move: function(x, y) {
            this.x += x;
            this.y += y;
            alert("Shape moved: ["+this.x+","+this.y+"]");
        }
    };

    var rect = Object.create(Shape);
    alert(rect.x);
    rect.move(2,3);
    rect.move(1,1); 
```

# git - 如何查看 git rebase 显示的 commit-id 内容？

> ID：16129380
> 
> 赞同：1
> 
> 时间：2013-04-21T08:41:48.443
> 
> 标签：git, version-control

“git rebase”命令显示了一些提交 id 的列表，以便为它们选择操作；问题是所有历史消息都是相同的（空的），我不知道它们如何与 git gui 中显示的 SHA1 ID 相关联。有没有办法通过 git rebase 显示的这个 id 查看提交的内容？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T08:58:02.170

[`git show`](http://kernel.org/pub/software/scm/git/docs/git-show.html) 应该这样做

例子

```
git show 8e222c8 
```

更多信息

```
对于提交，它显示日志消息和文本差异。它还提出
由 git diff-tree --cc 生成的特殊格式的合并提交。

```

# android - 触摸时更改自定义视图的背景

> ID：16129383
> 
> 赞同：0
> 
> 时间：2013-04-21T08:42:11.633
> 
> 标签：android, view

我想在按下时更改 customView 的背景颜色，并在视图失去“按下状态”时稍微“删除”此背景颜色。但是，我用谷歌搜索了这个问题并找到了使用 StateListDrawable 的解决方案。我已经在我的 customView 中尝试过这个（它以编程方式添加到 ListView 中），但是我的视图只设置了“正常颜色”。当我触摸视图时，没有任何反应。怎么了？

选择器 xml 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item 
        android:state_pressed="true" 
        android:drawable="@color/bckgr" />
    <item 
        android:drawable="@color/transparent" />
</selector> 
```

在我的自定义视图的构造函数中：

```
this.setBackgroundResource(R.drawable.list_item_bckgr); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T08:47:41.283

你必须将你的应用`background`到填充（你的 实现正在返回的视图）而不是自我`View``Adapter``getView``ListView`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T08:48:18.210

尝试[`android:descendantFocusability`](http://developer.android.com/reference/android/view/ViewGroup.html#attr_android%3adescendantFocusability)在`ListView`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T08:49:40.860

嘿，您是否使视图可聚焦和可点击，在构造函数中使用：

```
setClickable(true);
setFocusable(true); 
```

可能是你的观点没有得到关注。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-21T08:51:14.443

您需要设置`OnTouchListener`来处理触摸事件。当视图被触摸时，更改背景，当视图“未触摸”时，将背景更改回原来的。

要设置侦听器，请使用您创建的 OnTouchListener 调用自定义视图的 View.setOnTouchListener() 函数来处理这些事件。

这是对 OnTouchListener 的引用：

[http://developer.android.com/reference/android/view/View.OnTouchListener.html](http://developer.android.com/reference/android/view/View.OnTouchListener.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-03-15T03:12:05.790

我想您对该方法有一个覆盖方法`OnTouch()`，我要做的是创建一个`instance variable`（类 var）来保存您想要作为背景的图像，并将其设置在您的`OnTouch()`方法中。然后，覆盖您的`OnDraw()`方法，该方法将为您提供对 的引用`canvas`，并使用`canvas.DrawBitmap()`来绘制您的背景。

此答案向您展示了有关如何`bitmap` [在自定义视图中绘制设置背景图像的更多详细信息](https://stackoverflow.com/questions/11115820/setting-background-image-in-a-custom-view/#11115894)

# c++ - Should I use manual alloc to allow move semantics?

> ID：16129385
> 
> 赞同：6
> 
> 时间：2013-04-21T08:42:32.723
> 
> 标签：c++, c++11

I'm interested to learn when I should start considering using move semantics in favour over copying data depending on the size of that data and the usage of the class. For example for a Matrix4 class we have two options:

```
struct Matrix4{
    float* data;

    Matrix4(){ data = new float[16]; }
    Matrix4(Matrix4&& other){
        *this = std::move(other);
    }
    Matrix4& operator=(Matrix4&& other)
    {
       ... removed for brevity ...
    }
    ~Matrix4(){ delete [] data; }

    ... other operators and class methods ...
};

struct Matrix4{
    float data[16]; // let the compiler do the magic

    Matrix4(){}
    Matrix4(const Matrix4& other){
        std::copy(other.data, other.data+16, data);
    }
    Matrix4& operator=(const Matrix4& other)
    {
       std::copy(other.data, other.data+16, data);
    }

    ... other operators and class methods ...
}; 
```

I believe there is some overhead having to alloc and dealloc memory "by hand", and given the chances of really hitting the move construct when using this class what is the preferred implementations of a class with such small in memory size? Is really always preferred move over copy?

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-21T09:07:33.493

在第一种情况下，分配和释放是昂贵的——因为你是从堆中动态分配内存，即使你的矩阵是在堆栈上构建的——而且移动很便宜（只是复制一个指针）。

在第二种情况下，分配和释放很便宜，但移动很昂贵——因为它们实际上是副本。

因此，如果您正在编写一个*应用程序*并且您只关心*该应用程序的性能，那么“**哪个更好？* ”这个问题的答案可能取决于您创建/销毁矩阵的数量与复制/移动它们的数量 -无论如何，**做你自己的测量**来支持任何猜想。

通过进行测量，您还将检查您的编译器是否在您希望进行移动的地方进行了大量的复制/移动省略 - 结果可能与您的预期相反。

此外，缓存局部性可能会在这里产生影响：如果您在堆上为矩阵的数据分配存储空间，那么在堆栈上创建三个要逐个元素处理的矩阵可能需要相当分散的内存访问模式 - 可能导致更多的缓存未命中。

另一方面，如果您使用在堆栈上为其分配内存的数组，则同一缓存行很可能能够保存所有这些矩阵的数据 - 从而提高缓存命中率。更不用说为了访问堆上的元素，您首先需要读取`data`指针的值，这意味着访问与保存元素的内存区域不同的内存区域。

所以再一次，这个故事的寓意是：**做你自己的测量**。

另一方面，如果您正在编写一个*库，并且您无法预测客户端将执行多少次构造/破坏与移动/复制，那么您可以提供**两个*这样的矩阵类，并将常见行为分解为基类- 可能是一个基类*模板*。

这将为客户提供灵活性，并为您提供足够高的重用程度 - 无需将所有常见成员函数的实现编写两次。

这样，客户可以选择最适合他们正在使用的应用程序的创建/移动配置文件的矩阵类。

* * *

**更新：**

正如[DeadMG](https://stackoverflow.com/users/298661/deadmg)在评论中指出的那样，与动态分配方法相比，基于数组的方法的一个优点是后者通过原始指针、`new`和进行手动资源管理`delete`，这迫使您编写用户定义的析构函数、复制构造函数、移动构造函数、复制赋值运算符和移动赋值运算符。

如果您使用 ，您可以避免所有这些`std::vector`，这将为您执行内存管理任务，并且可以让您免于定义所有这些特殊成员函数的负担。

这就是说，仅仅建议使用`std::vector`而不是进行手动内存管理这一事实 - 尽管它在设计和编程实践方面是一个很好的建议 - 并不能回答这个问题，而我相信原始答案可以。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-21T09:46:33.110

就像编程中的其他一切一样，特别是在性能方面，这是一个复杂的权衡。

在这里，您有两种设计：将数据保存在类中（方法 1）或在堆上分配数据并在类中保存指向它的指针（方法 2）。

据我所知，这些是您正在做出的权衡：

1.  **构造/销毁速度**：天真的实现，方法2在这里会慢一些，因为它需要动态的内存分配和释放。但是，您可以使用自定义内存分配器来帮助解决这种情况，特别是在您的数据大小是可预测和/或固定的情况下。

2.  **大小**：在您的 4x4 矩阵示例中，方法 2 需要存储一个额外的指针，加上内存分配大小开销（通常可以是 4 到 32 字节之间的任何位置。）这可能是一个因素，也可能不是一个因素，但它肯定必须考虑，特别是如果您的类实例很小。

3.  **移动速度**：方法 2 的*移动*操作非常快，因为它只需要设置两个指针。在方法 1 中，您别无选择，只能复制数据。然而，虽然能够依赖快速移动可以使您的代码漂亮、直接、可读和更高效，但编译器非常擅长*复制省略*，这意味着您甚至可以编写漂亮、直接和可读的按值传递接口如果您实现方法 1 并且编译器无论如何都不会生成太多副本。但是您不能确定这一点，因此依赖此编译器优化，特别是如果您的实例较大，则需要测量和检查生成的代码。

4.  **会员访问速度**：在我看来，这是*小班最重要的区别。*每次访问使用方法 2 实现的矩阵中的元素（或访问以这种方式实现的类中的字段，即使用外部数据）时，您都会访问内存两次：一次读取外部内存块的地址，以及一次实际读取您想要的数据。在方法 1 中，您只需直接访问所需的字段或元素。这意味着在方法 2 中，每次访问都可能产生额外的**缓存未命中**，这可能会影响您的性能。如果您的类实例很小（例如 4x4 矩阵）并且您对存储在数组或向量中的许多实例进行操作，这一点尤其重要。

    事实上，这就是为什么您可能希望在复制/移动矩阵实例时实际复制字节，而不是仅仅设置一个指针：*保持数据连续*。这就是为什么扁平数据结构（如值数组）在高性能代码中比指针意大利面条数据结构（如指针数组、链表等）更受青睐*。隔离*，您有时想要复制您的实例以使（或保持）一大堆连续的实例，并使迭代和访问它们的效率更高。

5.  **长度/大小的灵活性**：方法 2 在这方面显然更灵活，因为您可以决定在运行时需要多少数据，无论是 16 字节还是 16777216 字节。

总而言之，这是我建议您用于选择一种实现的算法：

*   如果您需要可变数量的数据，请选择方法 2。
*   如果您的类的每个实例中都有大量数据（例如几千字节），请选择方法 2。
*   如果您需要大量复制您的类的实例（我的意思是很多！）选择方法 2（但尝试测量性能改进并检查生成的代码，特别是在热点区域。）
*   在所有其他情况下，首选方法 1。

简而言之，方法 1 应该是您的默认设置，除非另有证明。证明任何有关性能的方法就是**测量**！因此，除非您已经测量并证明一种方法比另一种更好，否则不要优化任何东西，而且（如其他答案中所述）如果您正在编写库并让用户选择执行。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-21T09:01:30.650

我可能会使用已经实现移动语义的 stdlib 容器（例如 std::vector 或 std::array），然后我会简单地让向量或数组移动。

例如，您可以使用 std::array< std::array, 4 > 或 std::vector< std::vector< float > > 来表示您的矩阵类型。

我认为对于 4x4 矩阵来说这并不重要，但对于 10000x10000 可能会很重要。**所以，是的，矩阵类型的移动构造函数绝对值得**，特别是如果您打算使用大量临时矩阵（当您想用它们进行计算时似乎很可能）。它还将允许有效地返回 Matrix4 对象（而您必须使用 by-ref 调用来绕过复制）。

与此事无关，但可能值得一提：如果您决定使用 std::array，请将 Matrix 设为模板类（而不是将大小嵌入到类名中）。

# java - 从其他程序运行 intellij 时 log4j BLOCKED

> ID：16129391
> 
> 赞同：0
> 
> 时间：2013-04-21T08:43:28.600
> 
> 标签：java, intellij-idea, synchronization, log4j, processbuilder

当 intellij 使用日志时，我使用 ProccessBuilder 从另一个程序（Shell）运行 intellij 时被阻塞。当我关闭外壳程序 Intellij 开始运行。据我了解，shell 正在与 intellij 共享资源，我该如何避免这个块？

> “线程 6”prio=6 tid=0x000000000e01e000 nid=0x1a7c 等待监视器条目 [0x0000000014bce000] java.lang.Thread.State: 在 org.apache.log4j.Category.callAppenders (Category.java: 205) - 等待在 org.apache.log4j.Category.info(Category .java:666) 在 com.intellij.idea.IdeaLogger.info(IdeaLogger.java:176) 在 com.zeroturnaround.javarebel.idea.plugin.logger.RebelLog.info(RebelLog.java:22) 在 com.zeroturnaround。 javarebel.idea.plugin.notifications.LicenseWatcher.checkLicense(LicenseWatcher.java:46) 在 com.zeroturnaround.javarebel.idea.plugin.notifications.LicenseWatcher.run(LicenseWatcher.java:19)

# c# - 使用 C# windows 窗体远程关闭 PC？

> ID：16129395
> 
> 赞同：4
> 
> 时间：2013-04-21T08:43:45.873
> 
> 标签：c#, cmd, shutdown

我正在尝试通过命令提示符使用 c# 以编程方式远程关闭 PC，我已经进行了一些搜索并找到了这种代码。

```
System.Diagnostics.Process.Start("shutdown", "/s"); 
```

而且由于它没有指定要关闭的任何电脑，所以我尝试将这些代码更改为我认为满足我的目标的代码。但事实证明这是行不通的。

```
System.Diagnostics.Process.Start("shutdown", "/s /m \\192.168.1.21 /t 5 /c 'Shutdown in 5 seconds'"); 
```

在 C# 中没有异常它只是不关闭。

我也试试这个，但没有运气。

```
 System.Diagnostics.Process.Start("shutdown /s /m \\192.168.1.21 /t 5 /c 'Shutdown in 5 seconds'"); 
```

C# 异常“系统找不到指定的文件”。

**编辑：**

我忘了告诉你，我已经将我的远程计算机和服务器设置为不会无法相互连接的方式，例如关闭防火墙，配置本地系统策略以及更改网络和共享中心。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2021-04-21T11:39:50.857

// 远程关机

```
 public bool RemoteShutdown(string userName, string password, string ip)
    {
        try
        {
            ConnectionOptions op = new ConnectionOptions();
            op.Username = userName;
            op.Password = password;
            // Make a connection to a remote computer.  
            ManagementScope scope = new ManagementScope("\\\\" + ip + "\\root\\cimv2", op);
            scope.Connect();
            //Query system for Operating System information  
            ObjectQuery oq = new ObjectQuery("SELECT * FROM Win32_OperatingSystem");
            ManagementObjectSearcher query = new ManagementObjectSearcher(scope, oq);
            ManagementObjectCollection queryCollection = query.Get();
            foreach (ManagementObject obj in queryCollection)
            {
                obj.InvokeMethod("ShutDown", null); //shutdown  
            }

            return true;
        }
        catch (Exception)
        {
            return false;
        }
    } 
```

// 远程重启

```
 public bool RemoteReboot(string userName, string password, string ip)
    {
        try
        {
            ConnectionOptions op = new ConnectionOptions();
            op.Username = userName;
            op.Password = password;
            // Make a connection to a remote computer.  
            ManagementScope scope = new ManagementScope("\\\\" + ip + "\\root\\cimv2", op);
            scope.Connect();
            //Query system for Operating System information  
            ObjectQuery oq = new ObjectQuery("SELECT * FROM Win32_OperatingSystem");
            ManagementObjectSearcher query = new ManagementObjectSearcher(scope, oq);
            ManagementObjectCollection queryCollection = query.Get();
            foreach (ManagementObject obj in queryCollection)
            {
                obj.InvokeMethod("Reboot", null); //shutdown  
            }

            return true;
        }
        catch (Exception)
        {
            return false;
        }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T08:53:48.437

在 C# 中，字符串中的 \\ 表示 \

所以参数解释为

/s /m \192.168.1.21 /t 5 /c '5 秒后关机'

您应该使用 \\\\ 来表示 \\

或者像这样在开始引号之前添加一个@标记

System.Diagnostics.Process.Start("shutdown", @"/s /m \\192.168.1.21 /t 5 /c '5秒后关机'");

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-21T09:04:12.283

您可以查看下面的 SO 帖子。它谈论重新启动远程机器。

[WMI 重启远程机器](https://stackoverflow.com/a/2924517/1012641)

如果你看一下[Win32Shutdown](http://msdn.microsoft.com/en-us/library/windows/desktop/aa394058%28v=vs.85%29.aspx)方法

> 关机 => 1 (0x1) & 重启 => 2 (0x2)

所以在上面的 SO 链接中你将不得不改变

```
 // Add the input parameters.
 inParams["Flags"] =  2; //Reboot 
```

至

```
 // Add the input parameters.
 inParams["Flags"] =  1; //Shutdown 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-10-25T18:56:54.263

这应该有效：

```
System.Diagnostics.Process.Start("shutdown", @"-m \\192.168.1.21 -s -f -t 0"); 
```

标志的语法应该像 -m ，而不是 /m。

更好的是创建一个“静默”关机（不显示 cmd-window）：

```
var shutdown = new ProcessStartInfo("shutdown", @"-m \\192.168.1.8 -s -f -t 0");
shutdown.CreateNoWindow = true;
shutdown.UseShellExecute = false;
Process.Start(shutdown); 
```

在win7、.Net framework 4.03中测试

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-04-13T14:43:29.320

这是我用于关闭/重启远程机器的代码：

```
int waitSeconds = 0;
string remoteHostNameOrIp = "192.168.0.1";
ProcessStartInfo processInfo = new ProcessStartInfo();
processInfo.FileName = "shutdown.exe";
processInfo.Arguments = $@"-s -t { waitSeconds } -m \\{ remoteHostNameOrIp }";
processInfo.WindowStyle = ProcessWindowStyle.Hidden;
processInfo.CreateNoWindow = true;

var proc = Process.Start(processInfo);

// Works without WaitForExit(); 
// When using this you can check in "proc" if the shutdown was accepted by 
// the remote machine 
// 
// proc.WaitForExit(); 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-04-21T08:50:03.010

您还必须在目标计算机上启用“远程注册表”服务，并且您必须在远程计算机上具有管理员权限。

[详情请看这里](http://www.howtogeek.com/109655/how-to-remotely-shut-down-or-restart-windows-pcs/)。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2016-10-28T22:00:20.953

感谢createnowindow，如果一切正常，我已经在考虑使用它（但如果你想看看发生了什么，它就没有用了）

没有关于我的破折号解释的评论。只要我知道，您可以选择 - 或 /

自己试试 :-) Start+R (run) 你会看到它有效:)

我认为解决它需要做很多工作。

所以我发现能够使用文件“FILENAME.cmd”

里面有“shutdown -s -m \IP -t 40”

提醒关闭或保存东西的延迟（不是必需的）

-f 对我不起作用

但是使用 cmd 文件我可以调用它并让它从我的应用程序中运行。

所以我的问题解决了，我知道它有点......不完美。但它至少有效。

感谢大家的快速回复

# matlab - 在 MATLAB 中恢复函数依赖关系

> ID：16129397
> 
> 赞同：0
> 
> 时间：2013-04-21T08:43:55.343
> 
> 标签：matlab, curve-fitting, functional-dependencies

我有这样的表（[http://img836.imageshack.us/img836/1418/47709342.png](http://img836.imageshack.us/img836/1418/47709342.png)）。我需要找到RT（RW，WT，PT）的依赖关系。即我必须接收三个变量的函数。我如何使用 MATLAB 或其他程序来做到这一点？

# mysql - MySQL Workbench 无法连接到数据库服务器

> ID：16129399
> 
> 赞同：3
> 
> 时间：2013-04-21T08:44:16.627
> 
> 标签：mysql, mysql-workbench

我遇到的问题与问题[7864276](https://stackoverflow.com/questions/7864276/cannot-connect-to-database-server-mysql-workbench "7864276")中的发帖人完全相同，除了在我的情况下，我已经验证了服务器实际上正在运行，例如，通过右键单击本地实例 MySQL 并选择启动命令行客户端从 MySQL Workbench 中运行。只有当我选择查询数据库或双击本地实例 MySQL 时才会出现错误消息。错误消息中的另一条信息是它说“对于这个平台请求无效（MYSQL_PROTOCOL_SOCKET）”。在我最近将 MySQL Workbench 更新到版本 5.2.47 CE 之前，一切正常。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T22:10:37.477

单击管理连接。选择本地实例 MySQL。将连接方法更改为本地套接字/管道。现在测试连接成功。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2021-04-12T01:52:19.697

终端：

```
sudo mysql -u root ENTER
you password user ENTER
USE mysql; ENTER
UPDATE user SET plugin='mysql_native_password' WHERE User='root'; ENTER
FLUSH PRIVILEGES; ENTER
exit; ENTER
service mysql restart ENTER
you password user again ENTER 
```

完成你的终端，进入Mysql Workbench，在Mysql Connections“key icon”，本地实例3306，和Test connection。

# adsense - 为什么 Adsense 广告不出现在网站首页

> ID：16129402
> 
> 赞同：4
> 
> 时间：2013-04-21T08:45:09.537
> 
> 标签：adsense, ads

我有一个新闻网站。Adsense 广告显示在内部页面上。但广告没有显示在网站主页上。

我已经完成了 Adsense 疑难解答建议。似乎一切都很好......

网址是：[http ://akhbaralalam.com](http://akhbaralalam.com)

也许有用：当我在 URL 末尾添加一个随机参数（如“/？123”）时，广告正在展示。

akhbaralalam.com -> 广告不显示

akhbaralalam.com/?123 -> 广告出现

有什么建议吗？

你能调查一下这个页面吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T14:32:54.827

顺便我意识到问题是什么...

我犯了一个有趣的错误：在超过 3 个广告单元的页面上，可能会导致所有广告消失。

我还在网站的页脚添加了隐私政策。在 google adsense 指南中，他们说有必要制定隐私政策，包括某些特定主题，如 cookie ......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-16T21:06:27.790

就在一周前，我也遇到了这个问题，一些网站说它关于要更新的​​隐私政策。但这对我不起作用。只需单击几下设置，我就找到了修复它的方法。我在博客平台上尝试过，但一旦你看到它，你就会知道如何在 Wordpress 和其他 CMS 中使用。

> 转到 Blogger 设置 ->> 搜索首选项 ->> 启用搜索说明。单击是，然后输入您的站点描述并保存。

来源链接： http: [//www.blogs911.com/2014/06/fixed-adsense-ads-not-showing-in-homepage-of-blogs-and-websites.html](http://www.blogs911.com/2014/06/fixed-adsense-ads-not-showing-in-homepage-of-blogs-and-websites.html)

# bash - Sorting by integer value

> ID：16129403
> 
> 赞同：5
> 
> 时间：2013-04-21T08:45:28.013
> 
> 标签：bash, sorting, integer

I am writing a bash script and I am using

> `ps -e -o %cpu`

command.

I would like to have output of sorted `%cpu` values (descending). How to do that? I know that I should use sort command but I don't know how.

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-21T08:51:04.893

```
 ps -e -o %cpu | sort -nr 
```

`n`对于数字，`r`对于反向。如果您还想删除标题：

```
 ps -e -o %cpu | sed '1d' | sort -nr 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T12:44:05.173

ps 有一个内置选项，可以根据任何选择的字段对其输出进行排序。您可以使用

```
ps k -%cpu -e -o %cpu 
```

在这里，`k`根据提供的字段对输出`-%cpu`进行排序，并按降序对其进行排序。

如果你省略了`-`排序字段前面的，那么它将按升序排序。另请注意，您可以为其提供多个排序字段：

```
ps k -%cpu,-%mem -e -o %cpu,%mem 
```

这首先根据`%cpu`字段对输出进行排序（按降序排列），然后根据`%mem`字段对输出进行排序。

# python - multiple keys in python dictionary, is possible?

> ID：16129405
> 
> 赞同：6
> 
> 时间：2013-04-21T08:45:33.680
> 
> 标签：python, dictionary, key

I'd like to build a dictionary in python in which different keys refer to the same element. I have this dictionary:

```
persons = {"George":'G.MacDonald', "Luke":'G.MacDonald', "Larry":'G.MacDonald'} 
```

the key refer all to an identical string but the strings have different memory location inside the program, I'd like to make a dictionary in which all these keys refer to the same element, is that possible?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-21T08:56:50.683

您可以执行以下操作：

```
import itertools as it

unique_dict = {}
value_key=lambda x: x[1]
sorted_items = sorted(your_current_dict.items(), key=value_key)
for value, group in it.groupby(sorted_items, key=value_key):
    for key in group:
        unique_dict[key] = value 
```

这会将您的字典转换为任何类型（但可比较）的相等值都是唯一的字典。如果您的值不可比较（但可散列），您可以使用临时值`dict`：

```
from collections import defaultdict
unique_dict = {}
tmp_dict = defaultdict(list)

for key, value in your_current_dict.items():
    tmp_dict[value].append(key)

for value, keys in tmp_dict.items():
    unique_dict.update(zip(keys, [value] * len(keys))) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-31T03:40:37.350

如果你碰巧使用的是 python 3，`sys.intern`提供了一个非常优雅的解决方案：

```
for k in persons:
    persons[k] = sys.intern(persons[k]) 
```

在 Python 2.7 中，您可以通过一个额外的步骤来做大致相同的事情：

```
interned = { v:v for v in set(persons.itervalues()) }
for k in persons:
    persons[k] = interned[persons[k]] 
```

`interned = dict( (v, v) for … )`在 2.x (< 2.7) 中，您可以改为编写。

# qt - Check which signal is the calller of the signal

> ID：16129412
> 
> 赞同：1
> 
> 时间：2013-04-21T08:46:10.687
> 
> 标签：qt, signals-slots

Is there any way to know whether `inst1` or `inst2` was the trigger for the slot in the next code?

```
MyClass inst1 ,inst2;

connect (inst1, sigInst1(), this, mySlot());
connect (inst2, sigInst2(), this, mySlot());

void mySlot(){
   // here I want to know if inst1 or inst2 got me into this slot.

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-21T09:00:42.370

只需调用`sender()`即可获得发出信号的对象的指针。

`QObject * QObject::sender() const [protected]`文档中的条目在[这里](http://qt-project.org/doc/qt-5.0/qtcore/qobject.html#sender)。

# google-analytics - 谷歌分析 - 阻止传出链接

> ID：16129416
> 
> 赞同：0
> 
> 时间：2013-04-21T08:46:51.427
> 
> 标签：google-analytics, hyperlink, tracking

我正在构建一个包含外部链接的网站，但是，我不希望我网站上的任何链接出现在另一个网站的 Google Analytics 跟踪中。例如，如果 www.site1.com 链接到 www.site2.com，我不希望来自 www.site1.com 的链接显示为链接引荐或来源。

不确定这是否可能。

我在其他地方找不到这个，但不确定我是否使用了正确的搜索词（？）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T09:00:48.367

您可以通过 utm 参数覆盖流量来源/媒体。

查看[此页面](http://support.google.com/analytics/answer/1033867?hl=en)以获取生成 URL 的帮助。

# php - 将 PHP 匿名函数规范到 5.2

> ID：16129417
> 
> 赞同：0
> 
> 时间：2013-04-21T08:46:55.093
> 
> 标签：php, anonymous-function

在规范匿名功能方面需要帮助。过不了这个..

```
$marks = implode(',', array_map(function() {
                            return '?';
                        }, explode(',', $props))); 
```

如何将其转换为与 php 5.2 兼容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T09:00:35.303

php 5.2 不支持 Lambada：

```
function callback($value)
{
    return '?';
}

$marks = implode(',', array_map('callback', explode(',', $props))); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T20:23:11.623

使用`create_function()`：

```
$marks = implode(',', array_map(create_function('', '
                            return "?";
                        '), explode(',', $props))); 
```

# php - 从 HTML 表单向 MySQL 数据库添加数据

> ID：16129418
> 
> 赞同：5
> 
> 时间：2013-04-21T08:47:06.263
> 
> 标签：php, html, mysql, forms

大家好，我有一个用于将数据放入 mysql 数据库的基本 Web 表单，我创建了代码来报告我是否正确连接到我的数据库，并且在我测试它的表单完成后，它似乎符合我的预期但是当我转到我的数据库时，实际上没有输入任何数据？我已经在本地和服务器上尝试过，两者都做同样的事情。这是我的两个 .php 表单供您查看，我在本地机器上使用 MAMP 进行测试，以防万一我做错了什么：

virtualWalkLog.php

```
<form action="hazardsform.php" method="POST"  />
  <p>ROUTE: <input type="text" name="ROUTE" /></p>
  <p>ADDRESS: <input type="text" name="ADDRESS" /></p>
  <p>LATITUDE: <input type="text" name="LATITUDE" /></p>
  <p>LONGITUDE: <input type="text" name="LONGITUDE" /></p>
  <p>HAZARD: <input type="text" name="HAZARD" /></p>
  <p>RISK: <input type="text" name="RISK" /></p>
  <input type="submit" value="Submit" />
</form> 
```

危险表格.php

```
<?php

define('DB_NAME', 'virtualWalkLog');
define('DB_USER', 'root');
define('DB_PASSWORD', 'root');
define('DB_HOST', 'localhost');

$link = mysql_connect(DB_HOST, DB_USER, DB_PASSWORD);

if (!$link) {
     die('Could not connect: ' . mysql_error());
     }

     $db_selected = mysql_select_db(DB_NAME, $link);

     if (!$db_selected) {
     die('Can\'t use ' . DB_NAME . ': ' . mysql_error());
     }

     $value = $_POST['ROUTE'];
     $value = $_POST['ADDRESS'];
     $value = $_POST['LATITUDE'];
     $value = $_POST['LONGITUTE'];
     $value = $_POST['HAZARD'];
     $value = $_POST['RISK'];

     $sql = "INSERT INTO rmbhazards (ROUTE, ADDRESS, LATITUDE, LONGITUDE, HAZARD, RISK) VALUES ('$value', '$value2', 
     '$value3', '$value4', '$value5', '$value6')";

     mysql_close(); 
```

提前谢谢了

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-21T08:49:42.687

你没有执行你的`query`，这就是为什么没有插入数据。尝试放置后

```
$sql = "INSERT INTO rmbhazards (ROUTE, ADDRESS, LATITUDE, LONGITUDE, HAZARD, RISK) VALUES ('$value', '$value2', '$value3', '$value4', '$value5', '$value6')"; 
```

这个

```
$result = mysql_query($sql); 
```

所有值也都在一个变量`$value`中，因此您最终会在表中得到所有相同的结果，因此请更改为适合您的查询

```
 $value = $_POST['ROUTE'];
 $value2 = $_POST['ADDRESS'];
 $value3 = $_POST['LATITUDE'];
 $value4 = $_POST['LONGITUTE'];
 $value5 = $_POST['HAZARD'];
 $value6 = $_POST['RISK']; 
```

我还建议您停止使用 `mysql_`api，因为它们已被贬低，请切换到[`PDO`](http://php.net/manual/en/book.pdo.php)或[`mysqli`](http://www.php.net/manual/en/book.mysqli.php)

此外，您已经准备好`mysql injection`。这里有一个很好的教程，它向您解释了所有相关内容 ->[如何防止 PHP 中的 SQL 注入？](https://stackoverflow.com/questions/60174/how-to-prevent-sql-injection-in-php)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-21T08:52:16.770

快速浏览你的脚本，你需要在`mysql_query($sql)`之后调用

`$sql = "INSERT INTO rmbhazards (ROUTE, ADDRESS, LATITUDE, LONGITUDE, HAZARD, RISK) VALUES ('$value', '$value2', '$value3', '$value4', '$value5', '$value6')";`

`mysql_sql`query 将实际执行查询。

也`$value`应该是独一无二的

```
 $value = $_POST['ROUTE'];
 $value2 = $_POST['ADDRESS'];
 $value3 = $_POST['LATITUDE'];

 ----- 
```

**建议** 既然你刚刚开始..我建议你尝试 mysql_* 只是概念，但使用`mysqli_*`or `PDO`.. 你也应该知道 sql injection

这里有一些教程可以帮助你

[http://php.net/manual/en/security.database.sql-injection.php](http://php.net/manual/en/security.database.sql-injection.php)

[http://php.net/manual/en/book.pdo.php](http://php.net/manual/en/book.pdo.php)

[http://php.net/manual/en/book.mysqli.php](http://php.net/manual/en/book.mysqli.php)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-21T08:51:43.493

`$value`您在这里只为一个变量赋值

```
 $value = $_POST['ROUTE'];
 $value = $_POST['ADDRESS'];
 $value = $_POST['LATITUDE'];
 $value = $_POST['LONGITUTE'];
 $value = $_POST['HAZARD'];
 $value = $_POST['RISK']; 
```

应该

```
 $value = $_POST['ROUTE'];
 $value2 = $_POST['ADDRESS'];
 $value3 = $_POST['LATITUDE'];
 $value4 = $_POST['LONGITUTE'];
 $value5 = $_POST['HAZARD'];
 $value6 = $_POST['RISK']; 
```

还要求`mysql_query($sql);`运行查询。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-21T08:49:45.683

您正在将所有输入字段值捕获到一个变量中。您需要执行 mysql_query 才能使其工作。改变这个： -

```
 $value = $_POST['ROUTE'];
     $value = $_POST['ADDRESS'];
     $value = $_POST['LATITUDE'];
     $value = $_POST['LONGITUTE'];
     $value = $_POST['HAZARD'];
     $value = $_POST['RISK']; 
```

至：-

```
 $value = $_POST['ROUTE'];
 $value2 = $_POST['ADDRESS'];
 $value3 = $_POST['LATITUDE'];
 $value4 = $_POST['LONGITUTE'];
 $value5 = $_POST['HAZARD'];
 $value6 = $_POST['RISK']; 
```

完成后，您需要调用 mysql_query($sql) 来执行查询。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-04-21T08:51:39.460

只需重命名：

```
$value = $_POST['ROUTE'];
$value2 = $_POST['ADDRESS'];
$value3 = $_POST['LATITUDE'];
$value4 = $_POST['LONGITUTE'];
$value5 = $_POST['HAZARD'];
$value6 = $_POST['RISK']; 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-21T08:50:48.233

您将所有变量保留为同名

```
 $value = $_POST['ROUTE'];
 $value = $_POST['ADDRESS'];
 $value = $_POST['LATITUDE'];
 $value = $_POST['LONGITUTE'];
 $value = $_POST['HAZARD'];
 $value = $_POST['RISK']; 
```

将它们更改为唯一 ID（正如您在 sql 语句中引用的那样）

```
 $value1 = $_POST['ROUTE'];
 $value2 = $_POST['ADDRESS'];
 $value3 = $_POST['LATITUDE'];
 $value4 = $_POST['LONGITUTE'];
 $value5 = $_POST['HAZARD'];
 $value6 = $_POST['RISK']; 
```

并将您的查询语句更改为实际执行

```
 $result = mysql_query("INSERT INTO rmbhazards (ROUTE, ADDRESS, LATITUDE, LONGITUDE, HAZARD, RISK) VALUES ('$value', '$value2', 
 '$value3', '$value4', '$value5', '$value6')"); 
```

# android - 如何将屏幕上显示的像素保存在可变位图中

> ID：16129419
> 
> 赞同：0
> 
> 时间：2013-04-21T08:47:07.170
> 
> 标签：android, bitmap, imageview, pixel, bitmapimage

我正在尝试制作一个 Android 应用程序，您可以在其中拍照。您放大到照片的所需区域，然后将该区域复制到位图中以进行进一步处理。

我试图制作一个新的可变位图以从保存图片的 ImageView 对象复制位图，但我收到内存不足错误。另一个问题是如何只复制所需的区域？我的印象是，如果你一个一个地复制每个像素，你就会复制整个图片。

我使用的是Android 2.2.1 API level 7。我只需要搜索一些提示，直到现在搜索Bitmap文档都没有成功。

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-17T20:03:06.123

我复制了隐藏在缓存中的数据：

```
mImageView1.setDrawingCacheEnabled(true);
mImageView1.buildDrawingCache();
mImageView1.getDrawingCache();//this is the data I need it. 
```

# python - 如果我尝试拆分无法在 python 中拆分的字符串会怎样？

> ID：16129422
> 
> 赞同：1
> 
> 时间：2013-04-21T08:47:57.230
> 
> 标签：python

我正在运行以下代码以从文件中读取图形。文件包含格式的邻接列表：每行将包含：顶点 neighbour1 neighbour2 ... 在这里我试图将它放入字典中。如果一个节点没有邻居 line.split() 会发生什么？该行中只有顶点。

```
 f=open('graph','r')
  for line in f:
      values=line.split()
      for x in values[1:]:
           adjacent[values[0]].append(x) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T08:49:25.700

你得到*一个*元素的列表。您的下一行将遍历一个空切片：

```
>>> 'one_vertex\n'.split()
['one_vertex']
>>> 'one_vertex\n'.split()[1:]
[] 
```

# regex - 正则表达式可读性怀疑数

> ID：16129428
> 
> 赞同：-1
> 
> 时间：2013-04-21T08:48:32.590
> 
> 标签：regex

有人可以告诉我这个正则表达式中的数字吗，其余的对我来说只有 0、1、2 清楚，只是为了确保最后一个块 () * 意味着更多，对吗？

```
^
(?<first>{{0})
\s*:\s*
(?<second>{{1})
(?<third>\s*>>\s*{{2})*
$ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T08:50:17.723

, `{0}`,是参数`{1}`，`{2}`作为字符串传递给正则表达式。

# android - Android Skype 意图

> ID：16129429
> 
> 赞同：0
> 
> 时间：2013-04-21T08:48:34.663
> 
> 标签：android, skype

我目前正在android上开发一个简单的应用程序。我有一个带有 setonclicklistener 的 imageview (Skype Intent)。当有人单击此图像视图时，会出现对话框“使用...完成操作”。该对话框包含所需的 Skype 选项，还包含我在计算机上开发的所有应用程序。当有人点击 imageview 时，我希望可以选择仅使用 Skype 应用程序来完成操作。如果可以完全消失“使用...完成操作”对话框并自动打开Skype，那就更好了。

Skype 意图：

```
final Intent sky = new Intent("android.intent.action.VIEW");
        sky.setData(Uri.parse("skype:" + ""));
        ImageView imSky = (ImageView) findViewById(R.id.imageView2);
        imSky.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                // TODO Auto-generated method stub
                startActivity(sky); 
            }
        }); 
```

带有我拥有的 2 个意图过滤器的 Android Manifest.xml，

```
 <intent-filter>
        <action android:name="android.intent.action.MAIN" />
        <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>

        <intent-filter>
        <action android:name="android.intent.action.VIEW" />
        <category android:name="android.intent.category.DEFAULT" />
        <data android:scheme="skype" />
        </intent-filter> 
```

先感谢您...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T08:59:25.367

此代码将启动 Skype，这是您想要的吗？

```
Intent intent = getActivity().getPackageManager().getLaunchIntentForPackage("com.skype.raider");
if (intent != null)
{
    // start the activity
    intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
    startActivity(intent);
}
else
{
    // bring user to the market
    // or let them choose an app?
    intent = new Intent(Intent.ACTION_VIEW);
    intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
    intent.setData(Uri.parse("market://details?id="+"com.skype.raider"));
    startActivity(intent);
} 
```

# python - 使用python登录特定网站

> ID：16129431
> 
> 赞同：0
> 
> 时间：2013-04-21T08:48:43.690
> 
> 标签：python, login, web

我想在[http://www.ppdai.com/Login.aspx](http://www.ppdai.com/Login.aspx)登录网站 我已经尝试了一些解决方案，例如 request、twill 和 cookie jar，似乎它们都不起作用。用户帐号列表如下：

```
username: zhonghao007
password: zonghao0915 
```

登录成功后，您可以访问另一个网站以查看您的个人信息：[http://www.ppdai.com/account1/lend.aspx](http://www.ppdai.com/account1/lend.aspx)

感谢您的帮助
这里是请求代码

```
from selenium import webdriver
from selenium.common.exceptions import NoSuchElementException
from selenium.webdriver.common.keys import Keys
import time

browser = webdriver.Firefox()# Get local session of firefox
browser.get("http://www.ppdai.com/login.aspx") # Load page
userid = browser.find_element_by_id('txtUserName')
userid.send_keys('zhonghao007')
passw = browser.find_element_by_id('txtPassword')
passw.send_keys('zonghao0915')
signin = browser.find_element_by_id('btnLogin')
signin.click() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T09:27:19.197

查看该页面的源代码，您可以看到表单具有以下结构：

```
<form name="form1" method="post" action="login.aspx" id="form1">
<input type="hidden" name="__VIEWSTATE" id="__VIEWSTATE" value="/wEPDwUKMTM0MDY0ODA1OQ8WAh4LVXJsUmVmZXJyZXIFVGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvMTYxMjk0MzEvbG9naW4tdG8tYS1zcGVjaWZpYy13ZWJzaXRlLXVzaW5nLXB5dGhvbhYCAgEPFgIeBFRleHQF7gE8c2NyaXB0IHNyYz0iaHR0cDovL3d3dy5nb29nbGUtYW5hbHl0aWNzLmNvbS9nYS5qcyIgdHlwZT0idGV4dC9qYXZhc2NyaXB0Ij48L3NjcmlwdD48c2NyaXB0IHR5cGU9InRleHQvamF2YXNjcmlwdCI+dHJ5IHt2YXIgcHQgPSBfZ2F0Ll9nZXRUcmFja2VyKCJVQS0zNjM1NjY0LTEiKTtwdC5fc2V0RG9tYWluTmFtZSgnLnBwZGFpLmNvbScpO3B0Ll90cmFja1BhZ2V2aWV3KCk7fSBjYXRjaChlcnIpIHt9PC9zY3JpcHQ+ZBgBBR5fX0NvbnRyb2xzUmVxdWlyZVBvc3RCYWNrS2V5X18WAQUIYnRuTG9naW7FDjuchG1Ou3OnbNrC9L5mLwpESA==" />

<input type="hidden" name="__EVENTVALIDATION" value="/wEWBQLh9ro4AqXVsrMJArWptJELAoLch4YMApCjwqsN3xZOGR6YaITqg9kNkVxXG+bnVLo=" />

<input name="txtUserName" type="text" >
<input name="txtPassword" type="password" />
<input type="image" name="btnLogin" id="btnLogin"  />
<input type="hidden" name="HiddenField1" id="HiddenField1" value="http://stackoverflow.com/questions/16129431/login-to-a-specific-website-using-python" />
        </form> 
```

因此，您应该能够使用以下数据对[http://www.ppdai.com/login.aspx进行 POST](http://www.ppdai.com/login.aspx)

```
r = requests.post('http://www.ppdai.com/login.aspx', data={
    '__VIEWSTATE': '/wEPDwUKMTM0MDY0ODA1OQ8WAh4LVXJsUmVmZXJyZXIFVGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvMTYxMjk0MzEvbG9naW4tdG8tYS1zcGVjaWZpYy13ZWJzaXRlLXVzaW5nLXB5dGhvbhYCAgEPFgIeBFRleHQF7gE8c2NyaXB0IHNyYz0iaHR0cDovL3d3dy5nb29nbGUtYW5hbHl0aWNzLmNvbS9nYS5qcyIgdHlwZT0idGV4dC9qYXZhc2NyaXB0Ij48L3NjcmlwdD48c2NyaXB0IHR5cGU9InRleHQvamF2YXNjcmlwdCI+dHJ5IHt2YXIgcHQgPSBfZ2F0Ll9nZXRUcmFja2VyKCJVQS0zNjM1NjY0LTEiKTtwdC5fc2V0RG9tYWluTmFtZSgnLnBwZGFpLmNvbScpO3B0Ll90cmFja1BhZ2V2aWV3KCk7fSBjYXRjaChlcnIpIHt9PC9zY3JpcHQ+ZBgBBR5fX0NvbnRyb2xzUmVxdWlyZVBvc3RCYWNrS2V5X18WAQUIYnRuTG9naW7FDjuchG1Ou3OnbNrC9L5mLwpESA==',
    '__EVENTVALIDATION': '/wEWBQLh9ro4AqXVsrMJArWptJELAoLch4YMApCjwqsN3xZOGR6YaITqg9kNkVxXG+bnVLo='
    'txtUserName': 'zhonghao007',
    'txtPassword': 'zonghao0915',
    'HiddenField1': 'http://www.somereferring-url.com'
    }
) 
```

viewstate 和 eventvalidation 看起来像是在每个页面请求中生成的，并且可能用于某种 CSRF 验证。因此，您可能需要首先请求页面，找到这些字段的值，然后使用新生成的字段发出 POST 请求。您还需要确保您正在传递会话 cookie。

或者，您可以使用 Selenium webdriver 直接驱动真正的浏览器。这意味着它肯定会起作用。

# php - 为什么 PDO_MySQL 不返回整数？

> ID：16129432
> 
> 赞同：18
> 
> 时间：2013-04-21T08:49:04.317
> 
> 标签：php, mysql, pdo

我正在将我的 PHP 代码从`mysql`（在 5.5 中弃用）迁移到`PDO_MySQL`. 但是，`mysql_fetch_row`返回整数，而`PDOStatement::fetch`返回数字的字符串。如何使 PDO 表现得像前一个？

结果`mysql_fetch_row`：

```
array(1) {
  ["id"]=>
  int(1)
} 
```

结果`PDOStatement::fetch`：

```
array(1) {
  ["id"]=>
  string(1) "1"
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-21T08:53:24.133

设置`PDO::ATTR_EMULATE_PREPARES`为 false，如果您真的需要使用松散类型的 PHP

如果`mysql_fetch_row`返回 SUM 的 int 或者（我从不关心检查） - 那么它会做一些魔术`if (ctype_digit($val)) $row[$key] = (int)$val;`- 所以你可以在你的 DBAL 中做

据我了解准备语句的工作方式，它使用相同的数据包结构来发送和检索数据，并且该数据包包含数据类型。

看起来该服务器可以返回 2 种格式的数据 - 本机和 mysqlnd，具体取决于请求类型。后一个可以由客户端库解释以转换结果值。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-04-21T08:56:49.197

对于记录，PDO 提供了一个可以改变这一点的功能，`PDO::ATTR_STRINGIFY_FETCHES`：

> 获取时将数值转换为字符串。需要`bool`.

该设置背后的基本原理是数据库引擎可以处理非常大的数字（例如，Oracle 允许 38 位数字）而 PHP 不能。将这些数字作为字符串检索是一种确保安全并防止数据丢失的方法。

不幸[的是，MySQL 驱动程序不支持它](https://bugs.php.net/bug.php?id=44341)：

```
<?php

$pdo = new PDO('mysql:host=localhost;dbname=test', 'test', 'test');
$pdo->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);

$pdo->setAttribute(PDO::ATTR_STRINGIFY_FETCHES, false);
$sql = 'SELECT 1 AS integer_number, 3.14 AS floating_point';
$res = $pdo->query($sql);
while($row = $res->fetch(PDO::FETCH_ASSOC)){
    var_dump($row);
} 
```

```
array(2) {
  ["integer_number"]=>
  string(1) "1"
  ["floating_point"]=>
  string(4) "3.14"
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-09-26T15:02:11.193

您可以使用带有 JSON_NUMERIC_CHECK 选项的 json_encode 和 json_decode 来检索具有数字类型的数组：

```
$my_array = json_decode(json_encode( $my_array, JSON_NUMERIC_CHECK )); 
```

# iphone - 将 NSString 转换为由特定字符分隔的 NSDictionary

> ID：16129433
> 
> 赞同：1
> 
> 时间：2013-04-21T08:49:16.493
> 
> 标签：iphone, ios, objective-c, nsstring, nsdictionary

我需要将此“5?8?519223cef9cee4df999436c5e8f3e96a?EVAL_TIME?60?2013-03-21”字符串转换为字典。用“？”隔开

字典会像

```
{
    sometext1 = "5",
    sometext2 = "8",
    sometext3 = "519223cef9cee4df999436c5e8f3e96a",
    sometext4 = "EVAL_TIME",
    sometext5 = "60",
    sometext6 = "2013-03-21"
} 
```

谢谢你 。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-21T08:56:36.993

将字符串分成更小的字符串并循环它们。这是方法

```
NSArray *objects = [inputString componentsSeparatedByString:@"?"];
NSMutableDictionary *dict = [[NSMutableDictionary alloc] init];
int i = 1;
for (NSString *str in objects)
{
    [dict setObject:str forKey:[NSString stringWithFormat:@"sometext%d", i++]];
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-21T09:01:25.013

尝试

```
NSString *string = @"5?8?3519223cef9cee4df999436c5e8f3e96a?EVAL_TIME?60?2013-03-21";

NSArray *stringComponents = [string componentsSeparatedByString:@"?"];
//This is very risky, your code is at the mercy of the input string
NSArray *keys = @[@"cid",@"avid",@"sid",@"TLicense",@"LLicense",@"date"];

NSMutableDictionary *dictionary = [NSMutableDictionary dictionary];
for (int idx = 0; idx<[stringComponents count]; idx++) {
    NSString *value = stringComponents[idx];
    NSString *key = keys[idx];
    [dictionary setObject:value forKey:key];
} 
```

编辑：更优化

```
NSString *string = @"5?8?3519223cef9cee4df999436c5e8f3e96a?EVAL_TIME?60?2013-03-21";

NSArray *stringComponents = [string componentsSeparatedByString:@"?"];
NSArray *keys = @[@"cid",@"avid",@"sid",@"TLicense",@"LLicense",@"date"];

NSMutableDictionary *dictionary = [NSMutableDictionary dictionaryWithObjects:stringComponents forKeys:keys]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-26T05:40:02.327

首先用'？'将字符串分成几个数组。

然后在你的字典中添加字符串。

像这样的某事：

```
NSString *str = @"5?8?519223cef9cee4df999436c5e8f3e96a?EVAL_TIME?60?2013-03-21";
NSArray *valueArray = [str componentsSeparatedByString:@"?"];
NSMutableArray *keyArray = [[NSMutableArray alloc] init];
for (int i = 0; i <[valueArray count]; i ++) {
    [keyArray addObject:[NSString stringWithFormat:@"sometext%d",i+1]];
}
NSDictionary *dic = [[NSDictionary alloc] initWithObjects:valueArray forKeys:keyArray]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-26T01:32:15.247

面向未来：如果您以 JSON 格式存储数据（无论如何都更接近您所拥有的格式），那么系统之间的处理和传输会容易得多。您可以轻松阅读它...使用 NSJSONSerialization

# javascript - 为什么 jQuery mobile 会自动更改主题？

> ID：16129452
> 
> 赞同：1
> 
> 时间：2013-04-21T08:50:42.427
> 
> 标签：javascript, jquery, css, jquery-mobile

我弹出一个表单，它无法立即在 iPad 上专注于输入。还有一个问题是表单按钮的主题在按下后从e变成了b，而且再也变不回来了！

```
 <div data-role="page" id="addrPage">
       <div id="popupLogin" data-theme="e" class="ui-corner-all"
        style="z-index: 2;position:fixed;display: none;left:10%;top:15%;width: 250px;height: 150px;background-color:#0">
        <form id="OKForm" >
            <input type="text" id="formEdit" value="" placeholder="Input"           data-theme="e" autofocus="autofocus"/>
            <button type="submit" id="btnOK" data-theme="e">
                OK
            </button>
        </form>
        </div>
        <a data-role="button" id="tbProp">show</a>
    </div><!-- /page -->
<script>
$('#tbProp').bind( "click", function(event, ui) {
    $('#popupLogin').show();
        setTimeout(function(){
            $("#formEdit").focus();
        },0);
});

$('#OKForm').submit(function() {
    $("#popupLogin").hide();
    $("btnOK").removeClass("ui-btn-up-b ui-btn-hover-b").addClass("ui-btn-up-e ui-btn-hover-e");
    return false;
});
</script> 
```

演示：http: [//jsfiddle.net/gclsoft/JZgWT/1/](http://jsfiddle.net/gclsoft/JZgWT/1/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T11:37:16.817

> **更新**：要在弹出窗口打开后打开虚拟键盘，请使用以下代码。

```
$('#popupLogin').on('popupafteropen', function () {
 $('#formEdit').trigger('click');
}); 
```

jQuery 中的弹出窗口有一个`data-role="popup"`并且必须放在`data-role="page"`div 中。这是显示/关闭它的正确方法。不推荐使用`.show()`or 。`.hide()`

**标记**

```
<div data-role="page" id="addrPage">
 <div id="popupLogin" data-theme="e" data-role="popup">
  <form id="OKForm">
   <input type="text" id="formEdit" value="" placeholder="Input" data-theme="e"/>
   <button type="submit" id="btnOK" data-theme="e">OK</button>
  </form>
 </div> <!-- /popup -->
 <a data-role="button" id="tbProp">show</a>
</div> <!-- /page --> 
```

**jQuery 移动**

打开弹窗：

```
$('#tbProp').on('click', function () {
 $('#popupLogin').popup('open');
 $('#formEdit').focus();
}); 
```

关闭它并刷新提交按钮：

```
$('#OKForm').submit(function () {
 $('#popupLogin').popup('close');
 $('#btnOK').closest('div').removeClass('ui-btn-active');
}); 
```

或者您可以在弹出窗口关闭后刷新按钮：

```
$('#popupLogin').on('popupafterclose', function () {
 $('#btnOK').closest('div').removeClass('ui-btn-active');
}); 
```

**CSS** -*可选*

```
#popupLogin {
 padding: 10px !important;
} 
```

**[工作演示](http://jsfiddle.net/Palestinian/XsfKL/)**

# ajax - 在同一个域上托管两个网站

> ID：16129454
> 
> 赞同：1
> 
> 时间：2013-04-21T08:50:47.643
> 
> 标签：ajax, tomcat, tomcat7, openshift, appfog

我有两个名为 opentripplanner-webapp 和 opentripplanner-api-webapp 的应用程序。我已经成功地将它们部署在本地 tomcat 服务器上。应用程序的 url 为`http://localhost:8080/opentripplanner-webapp`和`http://localhost:8080/opentripplanner-api-webapp`。当我在 appfog 上部署应用程序时，它们为我提供了两个应用程序的不同域。问题是我的应用程序使用在跨域上不起作用的 ajax 请求和响应。我正在寻找两天以找到任何解决方案，但没有找到任何合适的解决方案。请指导我。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T08:58:17.503

这里有几个选项供您选择：

*   使用[JSONP（带填充的 JSON）](http://en.wikipedia.org/wiki/JSONP)。您必须编写您的 api，以便它支持此协议，但这不应该太难。
*   创建两者`opentripplanner-webapp`，`opentripplanner-api-webapp`因此它们支持[Cross Origin Resource Sharing](http://en.wikipedia.org/wiki/Cross-origin_resource_sharing)。这意味着您的 webapp`Origin`在请求中发送一个标头，服务器以一个`Access-Control-Allow-Origin`标头响应，如果它们匹配，则浏览器接受该请求。然而，[并非所有浏览器都支持](http://caniuse.com/#feat=cors)这一点，尽管大多数现代浏览器都支持。
*   在您的 opentripplanner-webapp 中使用代理 servlet 代理对您的 API 的请求。您可以“挂载”这个 servlet，例如`/api`在 webapp 中，它会在内部将所有请求转发到 opentripplanner-api-webapp。因此，您会将 AJAX 请求发送到`http://webappserver/api`而不是`http://apiserver`. 对于浏览器来说，这看起来就像一个普通的同源请求。这适用于所有浏览器，但可能需要更多设置。

# android - 在gridview中更改给定单元格的颜色

> ID：16129468
> 
> 赞同：0
> 
> 时间：2013-04-21T08:52:14.117
> 
> 标签：android, gridview

我是 android 新手，我正在尝试制作带有事件的日历。我想让给定的单元格改变颜色，我知道我必须制作一个自定义适配器，但我不知道如何选择单元格。非常感谢带有 getView 方法的简短代码和一点解释。

# php - 在模型中实例化对象并在 CakePHP 中返回带有模型值的对象有什么问题吗？

> ID：16129474
> 
> 赞同：0
> 
> 时间：2013-04-21T08:52:43.947
> 
> 标签：php, cakephp, models

比如性能问题什么的？基本上我会有一些视图，它们的数据将来自不同的模型，我只想将数据发送回我需要的数据，并且真的不喜欢 CakePHP 模型发送回来的数组。

所以只需获取聚合数据，对其进行转换并填充对象，然后将其发送回控制器以传递给视图。

是的，这是额外的工作，但如果它不会引起任何问题，我认为这是值得的。

那么这种做事方式有什么问题吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T06:36:43.697

转换为对象的开销很小，但不会在性能方面造成任何重大问题。尽管 burzum 评论说，这可能会使其他人难以维护应用程序。通过增强框架的工作方式，您将失去很多好处。例如。将对象传递给视图意味着助手将无法做任何“魔术”。如果您不喜欢 CakePHP 的模型返回数组这一事实，那么也许您不应该使用 CakePHP。

# python - 如何防止在双引号保护的表达式上用逗号分隔？

> ID：16129476
> 
> 赞同：0
> 
> 时间：2013-04-21T08:53:13.687
> 
> 标签：python, string, csv, split

我有一条线（来自 csv），如下所示：

```
line = 'M1,After.Life,Agnieszka Wojtowicz-Vosloo,Agnieszka Wojtowicz-Vosloo,"Drama, Thriller",2009/10/2/,80' 
```

当我这样做时，`print line.split(',')`我得到：

```
['M1', 'After.Life', 'Agnieszka Wojtowicz-Vosloo', 'Agnieszka Wojtowicz-Vosloo', '"Drama', ' Thriller"', '2009/10/2/', '80'] 
```

这是不可取的，因为它也分裂了“戏剧，惊悚片”。换句话说，我想要的结果是：

```
['M1', 'After.Life', 'Agnieszka Wojtowicz-Vosloo', 'Agnieszka Wojtowicz-Vosloo', '"Drama Thriller"', '2009/10/2/', '80'] 
```

对简单方法有任何想法吗？谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-21T08:54:32.143

您改为使用该[`csv`模块](http://docs.python.org/2/library/csv.html)。您有 CSV 格式，并且该模块知道如何正确处理引用的值。

```
import csv

with open(somefilename, 'rb') as inputfile:
    reader = csv.reader(inputfile)
    for row in reader:
        # row is a list of string values found on each line, ready split, 
        # with qouted values preserved. 
```

您的示例行的快速演示：

```
>>> import csv
>>> inputfile=['M1,After.Life,Agnieszka Wojtowicz-Vosloo,Agnieszka Wojtowicz-Vosloo,"Drama, Thriller",2009/10/2/,80\n']
>>> list(csv.reader(inputfile))
[['M1', 'After.Life', 'Agnieszka Wojtowicz-Vosloo', 'Agnieszka Wojtowicz-Vosloo', 'Drama, Thriller', '2009/10/2/', '80']] 
```

请注意，引号已被删除，但逗号仍作为值的一部分存在。

# ruby - 在方法中调用方法以在 Ruby 中进行 Titleize

> ID：16129479
> 
> 赞同：0
> 
> 时间：2013-04-21T08:53:30.043
> 
> 标签：ruby, capitalize

我正在尝试为编程作业创建一个标题化方法，它将某些单词大写并忽略其他单词。它总是将第一个单词大写。为此，我做了一个查找字符串第一个单词的方法，并尝试在 titleize 方法中调用它。我收到一条错误消息，上面写着“警告：条件中的字符串文字”。我试过改变 if 循环的措辞，但这并没有解决我的错误。谁能向我解释为什么我的代码被破坏了？非常感谢你的帮助！

```
def first_word(str)
    array = str.split(' ')
    return array[0]
end

def titleize(str)
    words = str.split
    words.each do |word| 
        if word != first_word(str)
            word.capitalize!
        elsif word != 'and' or 'the'
            word.capitalize!
        end
        words.join ' '
    end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T09:13:25.830

运算符`!=`的优先级高于`or`。这意味着这条线

```
elsif word != 'and' or 'the' 
```

相当于

```
elsif (word != 'and') or 'the' 
```

而不是

```
elsif word != ('and' or 'the') 
```

正如您可能预期的那样。后一个等价应表示为

```
elsif word != 'and' or word != 'the' 
```

但即使在这种情况下，它也没有多大意义，而且很难阅读。

您可能希望将链接更改为

```
elsif !%w(and the).include?(word) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T09:18:24.850

```
str = 'abc'
p "hi" if str == '1' or '12'
#=> warning: string literal in condition 
```

或者

```
str = 'abc'
p "hi" if (str == '1' or '12')
#=> warning: string literal in condition
p "hi" if '12'
#=> warning: string literal in condition 
```

这发生在 ruby​​ 解释器看到您的代码如下：

```
p "hi" if str == '1' or true 
```

第二个将始终评估为真，因为`'12'`始终存在。警告是说，你有一个字符串文字，而不是一个`boolean`or ，它总是计算为。`test``'12'`*`true`*

所以修复如下：

```
p "hi" if str == '1' or str == '12' #=> "hi"
p "hi" if ['1','12'].include? str #=> "hi" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-21T08:58:46.057

更改以下内容

```
elsif word != 'and' or 'the' 
```

至

```
elsif word != 'and' or word != 'the' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-21T11:59:30.163

不确定它的可读性如何。但是很短！

```
def titleize(str)
  str.capitalize.split.map do |word|
    %w{and the}.include?(word.downcase) ? word : word.capitalize
  end.join(' ')
end 
```

# android - 如何测试声级 rms 算法

> ID：16129480
> 
> 赞同：3
> 
> 时间：2013-04-21T08:53:31.060
> 
> 标签：android, signal-processing, frequency, audio-processing

我的应用程序。正在计算输入声音的噪声级和频率峰值。我使用 FFT 来获取 shorts[] 缓冲区数组，这是代码：bufferSize = 1024, sampleRate = 44100

```
 int bufferSize = AudioRecord.getMinBufferSize(sapleRate,
                channelConfiguration, audioEncoding);
        AudioRecord audioRecord = new AudioRecord(
                MediaRecorder.AudioSource.DEFAULT, sapleRate,
                channelConfiguration, audioEncoding, bufferSize); 
```

这是转换代码：

```
short[] buffer = new short[blockSize];
        try {
            audioRecord.startRecording();
        } catch (IllegalStateException e) {
            Log.e("Recording failed", e.toString());
        }
        while (started) {
            int bufferReadResult = audioRecord.read(buffer, 0, blockSize);

            /*
             * Noise level meter begins here
             */
            // Compute the RMS value. (Note that this does not remove DC).
            double rms = 0;
            for (int i = 0; i < buffer.length; i++) {
                rms += buffer[i] * buffer[i];
            }
            rms = Math.sqrt(rms / buffer.length);
            mAlpha = 0.9;   mGain = 0.0044;
            /*Compute a smoothed version for less flickering of the
            // display.*/
            mRmsSmoothed = mRmsSmoothed * mAlpha + (1 - mAlpha) * rms;
            double rmsdB = 20.0 * Math.log10(mGain * mRmsSmoothed); 
```

现在我想知道这个算法是否正常工作或者我错过了什么？而且我想知道它是否正确，并且我在手机上显示的声音以 dB 为单位，如何测试它？我需要任何帮助，在此先感谢:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T09:05:39.797

代码看起来是正确的，但您可能应该处理缓冲区最初包含零的情况，这可能导致`Math.log10`失败，例如更改：

```
 double rmsdB = 20.0 * Math.log10(mGain * mRmsSmoothed); 
```

至：

```
 double rmsdB = mGain * mRmsSmoothed >.0 0 ?
                           20.0 * Math.log10(mGain * mRmsSmoothed) :
                           -999.99;  // choose some appropriate large negative value here for case where you have no input signal 
```

# java - 在一次 add() 调用中，我可以在 Solr 服务器中索引多少个文档？

> ID：16129481
> 
> 赞同：2
> 
> 时间：2013-04-21T08:53:39.557
> 
> 标签：java, solr, solrj

我在 Solr 服务器上编写了一个应用程序索引文档。当我尝试添加数百个时，一切正常，但是当我尝试在一个`SolrDocument.add()`调用中索引数据库的全部内容（大约 4500 个文档）时，实际上没有任何索引。任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T18:15:05.390

您可以使用 Solr Server add 方法添加尽可能多的文档，这些文档只是添加但不提交到 solr 索引。调用 commit 方法使更改在索引中可用，从而可供搜索者使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T09:06:50.277

> 任何想法？

检查 solr 日志。一次添加太多文档可能会导致 Solr 过度分配内存并触发 OOME。

如果这是问题所在，解决方法很简单。不要这样做。分批索引文档……您知道这是可行的。或者，增加 OOME 的堆大小。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T13:18:56.587

几个列表被添加到核心，其中一些是空的。由于核心上的文档在添加之前被删除，结果是：服务器上没有数据。我完全重写了应用程序的索引，现在它工作正常。

如果在索引文档时清理服务器上的索引数据，请务必小心...

显然，如果您在 Solr 服务器上一次可以广告的文档数量有一些限制，则 4568 低于它。

# c# - 如何在 C# 中更改 LinkBut ton 的前景色？

> ID：16129484
> 
> 赞同：-5
> 
> 时间：2013-04-21T08:54:22.540
> 
> 标签：c#, asp.net

我正在为一家移动公司做项目。
主页将显示所有带有 LinkBut​​ton 的手机，
当我们单击它时，它将带我们进入相应手机的详细信息。
问题是我想使用 C# 编码更改所选链接按钮的前景色。

例如：

ASP.NET：

```
<asp:LinkButton ID="MobileLinkButton" runat="Server" OnClick="MobileDetailslinkButton_Onclick" ForeColor="White" /> 
```

C＃ ：

> protected void MobileDetailslinkBut​​ton_Onclick(object sender, EventArgs e)
> {
> Response.Redirect("~/MobileDetails.aspx");
> MobileLinkBut​​ton.ForeColor = System.Drawing.Color.Yellow;
> 
> ```
> } 
> ```

但是前景色没有改变，但其余的工作良好。

注意：这些链接按钮都在我整个项目的所有页面中使用的 MasterPage 中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T09:14:32.097

我认为您可能希望使用 CSS 而不是在后面的代码中执行此操作。尝试查看 CSS`:visited`选择器。像下面这样的东西应该可以完成这项工作。

```
a:visited
{ 
    color:yellow;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T07:27:12.420

通过使用 CSS，您可以更改前景色

```
 <style>
     .ClassName
      {
       color:Green;
       }
    </style>
   <asp:LinkButton ID="id1" runat="server" CssClass="ClassName"  Text="Link"></asp:LinkButton> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T07:35:08.597

您可以为此创建一个 CSS， .myclass { color:Green; }

# ios - YouTube API 2.0 可恢复上传 - 错误 500

> ID：16129492
> 
> 赞同：0
> 
> 时间：2013-04-21T08:56:10.080
> 
> 标签：ios, upload, youtube-api

我在 iOS 应用程序中使用 YouTube API 2.0，我提出了这样的请求：

```
POST http://uploads.gdata.youtube.com/resumable/feeds/api/users/default/uploads

Authorization = "Bearer <acess_token>";
"Content-Length" = 516;
"Content-Type" = "application/atom+xml; charset=UTF-8";
"GData-Version" = 2;
Slug = "testVideo.mov";
"X-GData-Key" = "key=<api_key>"; 
```

与身体：

```
<?xml version="1.0"?>
<entry xmlns="http://www.w3.org/2005/Atom"
xmlns:media="http://search.yahoo.com/mrss/"
xmlns:yt="http://gdata.youtube.com/schemas/2007">
<media:group>
<media:title type="plain">My title</media:title>
<media:description type="plain">My description</media:description>
<media:category scheme="http://gdata.youtube.com/schemas/2007/categories.cat">Entertainment</media:category>
<media:keywords>mediawork</media:keywords>
</media:group>
</entry> 
```

但是服务器响应出现错误 500，并且没有带有解释的 XML 正文。我应该怎么办？它在一个月前工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T16:47:08.107

感谢您报告此问题。但根据我们的[博客文章](http://apiblog.youtube.com/2012/09/the-youtube-api-on-stack-overflow.html)，Stack Overflow 以成为问题和答案的目的地而自豪，而不是提交错误报告或功能请求的地方。我们要求开发人员不要在 Stack Overflow 上发布此类内容，而是使用我们现有的模板在现有的公共问题跟踪器中[提交错误](https://code.google.com/p/gdata-issues/issues/entry?template=YouTube%20%28Defect%20Report%29)或[提交功能请求](https://code.google.com/p/gdata-issues/issues/entry?template=YouTube%20%28Enhancement%20Request%29)。（在提交副本之前，请务必检查[现有未解决问题的列表。）](https://code.google.com/p/gdata-issues/issues/list?q=label%3aAPI-YouTube)

此问题已报告[https://code.google.com/p/gdata-issues/issues/detail?id=4396](https://code.google.com/p/gdata-issues/issues/detail?id=4396) 您可以从那里跟踪状态。

# jquery - 如何更改徽标和滑块之间的高度

> ID：16129493
> 
> 赞同：0
> 
> 时间：2013-04-21T08:56:15.950
> 
> 标签：jquery, html, css, slider

我想用这个脚本来展示一些产品。该脚本位于：[http ://tympanus.net/Tutorials/ItemSlider/](http://tympanus.net/Tutorials/ItemSlider/)

当您将网络浏览器的大小从最大尺寸调整为较小时，徽标和鞋子之间的高度对我来说太大了。我怎样才能改变它？

样式.css

```
@import url('demo.css');

.mi-slider {
    position: relative;
    margin-top: 30px;
    height: 490px;
}

.mi-slider ul {
    list-style-type: none;
    position: absolute;
    width: 100%;
    left: 0;
    bottom: 140px;
    overflow: hidden;
    text-align: center;
    pointer-events: none;
}

.no-js .mi-slider ul {
    position: relative;
    left: auto;
    bottom: auto;
    margin: 0;
    overflow: visible;
}

.mi-slider ul.mi-current {
    pointer-events: auto;
}

.mi-slider ul li {
    display: inline-block;
    padding: 20px;
    width: 20%;
    max-width: 300px;
    -webkit-transform: translateX(600%);
    -moz-transform: translateX(600%);
    transform: translateX(600%);
    -webkit-transition: opacity 0.2s linear;
    -moz-transition: opacity 0.2s linear;
    transition: opacity 0.2s linear;
}

.no-js .mi-slider ul li {
    -webkit-transform: translateX(0);
    -moz-transform: translateX(0);
    transform: translateX(0);
}

.mi-slider ul li a,
.mi-slider ul li img {
    display: block;
    margin: 0 auto;
}

.mi-slider ul li a {
    outline: none;
    cursor: pointer;
}

.mi-slider ul li img {
    max-width: 100%;
    border: none;
}

.mi-slider ul li h4 {
    display: inline-block;
    font-family: Baskerville, "Baskerville Old Face", "Hoefler Text", Garamond, "Times New Roman", serif;
    font-style: italic;
    font-weight: 400;
    font-size: 18px;
    padding: 20px 10px 0;
}

.mi-slider ul li:hover {
    opacity: 0.7;
} 

.mi-slider nav {
    position: relative;
    top: 400px;
    text-align: center;
    max-width: 800px;
    margin: 0 auto;
    border-top: 5px solid #333;
}

.no-js nav {
    display: none;
}

.mi-slider nav a {
    display: inline-block;
    text-transform: uppercase;
    letter-spacing: 5px;
    padding: 40px 30px 30px 34px;
    position: relative;
    color: #888;
    outline: none;
    -webkit-transition: color 0.2s linear;
    -moz-transition: color 0.2s linear;
    transition: color 0.2s linear;
}

.mi-slider nav a:hover,
.mi-slider nav a.mi-selected {
    color: #000;
}

.mi-slider nav a.mi-selected:after,
.mi-slider nav a.mi-selected:before {
    content: '';
    position: absolute;
    top: -5px;
    border: solid transparent;
    height: 0;
    width: 0;
    position: absolute;
    pointer-events: none;
}

.mi-slider nav a.mi-selected:after {
    border-color: transparent;
    border-top-color: #fff;
    border-width: 20px;
    left: 50%;
    margin-left: -20px;
}

.mi-slider nav a.mi-selected:before {
    border-color: transparent;
    border-top-color: #333;
    border-width: 27px;
    left: 50%;
    margin-left: -27px;
}

/* Move classes and animations */

.mi-slider ul:first-child li,
.no-js .mi-slider ul li {
    -webkit-animation: scaleUp 350ms ease-in-out both;
    -moz-animation: scaleUp 350ms ease-in-out both;
    animation: scaleUp 350ms ease-in-out both;
}

@-webkit-keyframes scaleUp {
    0% { -webkit-transform: translateX(0) scale(0); }
    100% { -webkit-transform: translateX(0) scale(1); }
}

@-moz-keyframes scaleUp {
    0% { -moz-transform: translateX(0) scale(0); }
    100% { -moz-transform: translateX(0) scale(1); }
}

@keyframes scaleUp {
    0% { transform: translateX(0) scale(0); }
    100% { transform: translateX(0) scale(1); }
}

.mi-slider ul:first-child li:first-child {
    -webkit-animation-delay: 90ms;
    -moz-animation-delay: 90ms;
    animation-delay: 90ms;
}

.mi-slider ul:first-child li:nth-child(2) {
    -webkit-animation-delay: 180ms;
    -moz-animation-delay: 180ms;
    animation-delay: 180ms;
}

.mi-slider ul:first-child li:nth-child(3) {
    -webkit-animation-delay: 270ms;
    -moz-animation-delay: 270ms;
    animation-delay: 270ms;
}

.mi-slider ul:first-child li:nth-child(4) {
    -webkit-animation-delay: 360ms;
    -moz-animation-delay: 360ms;
    animation-delay: 360ms;
}

/* moveFromRight */

.mi-slider ul.mi-moveFromRight li {
    -webkit-animation: moveFromRight 350ms ease-in-out both;
    -moz-animation: moveFromRight 350ms ease-in-out both;
    animation: moveFromRight 350ms ease-in-out both;
}

/* moveFromLeft */

.mi-slider ul.mi-moveFromLeft li {
    -webkit-animation: moveFromLeft 350ms ease-in-out both;
    -moz-animation: moveFromLeft 350ms ease-in-out both;
    animation: moveFromLeft 350ms ease-in-out both;
}

/* moveToRight */

.mi-slider ul.mi-moveToRight li {
    -webkit-animation: moveToRight 350ms ease-in-out both;
    -moz-animation: moveToRight 350ms ease-in-out both;
    animation: moveToRight 350ms ease-in-out both;
}

/* moveToLeft */

.mi-slider ul.mi-moveToLeft li {
    -webkit-animation: moveToLeft 350ms ease-in-out both;
    -moz-animation: moveToLeft 350ms ease-in-out both;
    animation: moveToLeft 350ms ease-in-out both;
}

/* Animation Delays */

.mi-slider ul.mi-moveToLeft li:first-child,
.mi-slider ul.mi-moveFromRight li:first-child,
.mi-slider ul.mi-moveToRight li:nth-child(4),
.mi-slider ul.mi-moveFromLeft li:nth-child(4) {
    -webkit-animation-delay: 0ms;
    -moz-animation-delay: 0ms;
    animation-delay: 0ms;
}

.mi-slider ul.mi-moveToLeft li:nth-child(2),
.mi-slider ul.mi-moveFromRight li:nth-child(2),
.mi-slider ul.mi-moveToRight li:nth-child(3),
.mi-slider ul.mi-moveFromLeft li:nth-child(3) {
    -webkit-animation-delay: 90ms;
    -moz-animation-delay: 90ms;
    animation-delay: 90ms;
}

.mi-slider ul.mi-moveToLeft li:nth-child(3),
.mi-slider ul.mi-moveFromRight li:nth-child(3),
.mi-slider ul.mi-moveToRight li:nth-child(2),
.mi-slider ul.mi-moveFromLeft li:nth-child(2) {
    -webkit-animation-delay: 180ms;
    -moz-animation-delay: 180ms;
    animation-delay: 180ms;
}

.mi-slider ul.mi-moveToLeft li:nth-child(4),
.mi-slider ul.mi-moveFromRight li:nth-child(4),
.mi-slider ul.mi-moveToRight li:first-child,
.mi-slider ul.mi-moveFromLeft li:first-child  {
    -webkit-animation-delay: 270ms;
    -moz-animation-delay: 270ms;
    animation-delay: 270ms;
}

/* Animations */

@-webkit-keyframes moveFromRight {
    0% { -webkit-transform: translateX(600%); }
    100% { -webkit-transform: translateX(0%); }
}

@-webkit-keyframes moveFromLeft {
    0% { -webkit-transform: translateX(-600%); }
    100% { -webkit-transform: translateX(0%); }
}

@-webkit-keyframes moveToRight {
    0% { -webkit-transform: translateX(0%); }
    100% { -webkit-transform: translateX(600%); }
}

@-webkit-keyframes moveToLeft {
    0% { -webkit-transform: translateX(0%); }
    100% { -webkit-transform: translateX(-600%); }
}

@-moz-keyframes moveFromRight {
    0% { -moz-transform: translateX(600%); }
    100% { -moz-transform: translateX(0%); }
}

@-moz-keyframes moveFromLeft {
    0% { -moz-transform: translateX(-600%); }
    100% { -moz-transform: translateX(0%); }
}

@-moz-keyframes moveToRight {
    0% { -moz-transform: translateX(0%); }
    100% { -moz-transform: translateX(600%); }
}

@-moz-keyframes moveToLeft {
    0% { -moz-transform: translateX(0%); }
    100% { -moz-transform: translateX(-600%); }
}

@keyframes moveFromRight {
    0% { transform: translateX(600%); }
    100% { transform: translateX(0); }
}

@keyframes moveFromLeft {
    0% { transform: translateX(-600%); }
    100% { transform: translateX(0); }
}

@keyframes moveToRight {
    0% { transform: translateX(0%); }
    100% { transform: translateX(600%); }
}

@keyframes moveToLeft {
    0% { transform: translateX(0%); }
    100% { transform: translateX(-600%); }
}

.mi-slider {
    -webkit-touch-callout: none;
    -webkit-user-select: none;
    -khtml-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
}

/* Media Queries */
@media screen and (max-width: 910px){
    .mi-slider nav {
        max-width: 90%;
    }
    .mi-slider nav a {
        font-size: 12px;
        padding: 40px 10px 30px 14px;
    }
}

@media screen and (max-width: 740px){
    .mi-slider {
        height: 300px;
    }
    .mi-slider nav {
        top: 220px;
    }
}

@media screen and (max-width: 490px){ 
    .mi-slider {
        text-align: center;
        height: auto;
    }

    .mi-slider ul {
        position: relative;
        display: inline;
        bottom: auto;
        pointer-events: auto;
    }

    .mi-slider ul li {
        -webkit-animation: none !important;
        -moz-animation: none !important;
        animation: none !important;
        -webkit-transform: translateX(0) !important;
        -moz-transform: translateX(0) !important;
        transform: translateX(0) !important;
        padding: 10px 3px;
        min-width: 140px;
    }

    .mi-slider nav {
        display: none;
    }
} 
```

演示.css

```
/* General Demo Style */
@import url(http://fonts.googleapis.com/css?family=Lato:400,700,900);

html { height: 100%; }

*,
*:after,
*:before {
    -webkit-box-sizing: border-box;
    -moz-box-sizing: border-box;
    box-sizing: border-box;
    padding: 0;
    margin: 0;
}

/* Clearfix hack by Nicolas Gallagher: http://nicolasgallagher.com/micro-clearfix-hack/ */
.clearfix:before,
.clearfix:after {
    content: " ";
    display: table;
}

.clearfix:after {
    clear: both;
}

.clearfix {
    *zoom: 1;
}

body {
    font-family: 'Lato', Calibri, Arial, sans-serif;
    background: #fff;
    font-weight: 400;
    font-size: 15px;
    color: #333;
    overflow: scroll;
    overflow-x: hidden;
}

a {
    color: #555;
    text-decoration: none;
}

.container {
    width: 100%;
    position: relative;
}

.container > header {
    width: 90%;
    max-width: 1240px;
    margin: 0 auto;
    position: relative;
    padding: 30px;
}

.main {
    padding-bottom: 0px;
}

.container > header h1 {
    font-size: 34px;
    line-height: 38px;
    margin: 0;
    font-weight: 700;
    color: #333;
    float: left;
}

.container > header h1 span {
    display: block;
    font-size: 20px;
    line-height: 26px;
    font-weight: 300;
}

/* Header Style */
.codrops-top {
    line-height: 24px;
    font-size: 11px;
    background: #fff;
    background: rgba(255, 255, 255, 0.5);
    text-transform: uppercase;
    z-index: 9999;
    position: relative;
    box-shadow: 1px 0px 2px rgba(0,0,0,0.2);
}

.codrops-top a {
    padding: 0px 10px;
    letter-spacing: 1px;
    color: #333;
    display: inline-block;
}

.codrops-top a:hover {
    background: rgba(255,255,255,0.8);
    color: #000;
}

.codrops-top span.right {
    float: right;
}

.codrops-top span.right a {
    float: left;
    display: block;
}

/* Demo Buttons Style */
.codrops-demos {
    float: right;
    padding-top: 10px;
}

.codrops-demos a {
    display: inline-block;
    margin: 10px;
    color: #666;
    font-weight: 700;
    line-height: 30px;
    border-bottom: 4px solid transparent;
}

.codrops-demos a:hover {
    color: #000;
    border-color: #000;
}

.codrops-demos a.current-demo,
.codrops-demos a.current-demo:hover {
    color: #aaa;
    border-color: #aaa;
} 
```

和html

```
<div class="container"> 
            <!-- Codrops top bar -->
            <div class="codrops-top clearfix">
                <a href="http://tympanus.net/Development/SliderPagination/"><strong>&laquo; Previous Demo: </strong>Slider Pagination Concept</a>
                <span class="right"><a href="http://tympanus.net/codrops/?p=13218"><strong>Back to the Codrops Article</strong></a></span>
            </div><!--/ Codrops top bar -->
            <header class="clearfix">
                <h1>Simple Multi-Item Slider <span>Category slider with CSS animations</span></h1>
            </header>
            <div class="main">
                <div id="mi-slider" class="mi-slider">
                    <ul>
                        <li><a href="#"><img src="images/1.jpg" alt="img01"><h4>Boots</h4></a></li>
                        <li><a href="#"><img src="images/2.jpg" alt="img02"><h4>Oxfords</h4></a></li>
                        <li><a href="#"><img src="images/3.jpg" alt="img03"><h4>Loafers</h4></a></li>
                        <li><a href="#"><img src="images/4.jpg" alt="img04"><h4>Sneakers</h4></a></li>
                    </ul>
                    <ul>
                        <li><a href="#"><img src="images/5.jpg" alt="img05"><h4>Belts</h4></a></li>
                        <li><a href="#"><img src="images/6.jpg" alt="img06"><h4>Hats &amp; Caps</h4></a></li>
                        <li><a href="#"><img src="images/7.jpg" alt="img07"><h4>Sunglasses</h4></a></li>
                        <li><a href="#"><img src="images/8.jpg" alt="img08"><h4>Scarves</h4></a></li>
                    </ul>
                    <ul>
                        <li><a href="#"><img src="images/9.jpg" alt="img09"><h4>Casual</h4></a></li>
                        <li><a href="#"><img src="images/10.jpg" alt="img10"><h4>Luxury</h4></a></li>
                        <li><a href="#"><img src="images/11.jpg" alt="img11"><h4>Sport</h4></a></li>
                    </ul>
                    <ul>
                        <li><a href="#"><img src="images/12.jpg" alt="img12"><h4>Carry-Ons</h4></a></li>
                        <li><a href="#"><img src="images/13.jpg" alt="img13"><h4>Duffel Bags</h4></a></li>
                        <li><a href="#"><img src="images/14.jpg" alt="img14"><h4>Laptop Bags</h4></a></li>
                        <li><a href="#"><img src="images/15.jpg" alt="img15"><h4>Briefcases</h4></a></li>
                    </ul>
                    <nav>
                        <a href="#">Shoes</a>
                        <a href="#">Accessories</a>
                        <a href="#">Watches</a>
                        <a href="#">Bags</a>
                    </nav>
                </div>
            </div>
        </div><!-- /container -->
        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
        <script src="js/jquery.catslider.js"></script>
        <script>
            $(function() {

                $( '#mi-slider' ).catslider();

            });
        </script>
        <script src="http://tympanus.net/codrops/adpacks/csscustom.js"></script> 
        <script src="http://tympanus.net/codrops/wp-content/plugins/oiopub-direct/js.php?type=banner&align=center&zone=1"></script> 
```

当然我查了一下，但我不知道要修改什么。感谢帮助。

此致！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T08:59:58.680

您可以尝试`.mi-slider ul`通过`top`not对齐`bottom`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T09:03:57.373

使用媒体查询

```
@media only screen and (width:1200px){
    .mi-slider ul li a,.mi-slider ul li h4{
        font-size:10px;
    }
} 
```

类似的东西。[在这里查找它们。](http://css-tricks.com/css-media-queries/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T09:04:11.830

当页面在小宽度/移动设备中时，css 中的媒体查询部分处理样式。位于[328 号线](http://tympanus.net/Tutorials/ItemSlider/css/style.css)

```
/* Media Queries */
@media screen and (max-width: 910px){
    .mi-slider nav {
        max-width: 90%;
    }
    .mi-slider nav a {
        font-size: 12px;
        padding: 40px 10px 30px 14px;
    }
}

@media screen and (max-width: 740px){
    .mi-slider {
        height: 300px;
    }
    .mi-slider nav {
        top: 220px;
    }
}

@media screen and (max-width: 490px){ 
    .mi-slider {
        text-align: center;
        height: auto;
    }

    .mi-slider ul {
        position: relative;
        display: inline;
        bottom: auto;
        pointer-events: auto;
    }

    .mi-slider ul li {
        -webkit-animation: none !important;
        -moz-animation: none !important;
        animation: none !important;
        -webkit-transform: translateX(0) !important;
        -moz-transform: translateX(0) !important;
        transform: translateX(0) !important;
        padding: 10px 3px;
        min-width: 140px;
    }

    .mi-slider nav {
        display: none;
    }
} 
```

# java - JavaFx - 交互式排序应用程序

> ID：16129495
> 
> 赞同：0
> 
> 时间：2013-04-21T08:56:45.183
> 
> 标签：java, user-interface, javafx-2, javafx

我正在开发一个交互式排序应用程序。我必须将数字表示为矩形，例如，在运行排序算法时，当交换两个数字时，必须交换矩形。我想用动画来做到这一点。如何交换矩形？我目前正在使用过渡进行测试，但我遇到了一些问题。我在一个组中有两个矩形。当我尝试交换矩形时，两者都会在中间相遇并停止。这是代码：

```
 Rectangle r1 = rectangles.get(numbers[0]);
    Rectangle r2 = rectangles.get(numbers[1]);

    TranslateTransition translateTransition = new TranslateTransition();

    translateTransition.setNode(r1);
    translateTransition.setDuration(Duration.millis(1000));
    translateTransition.setFromX(r1.getX());
    translateTransition.setToX(r2.getX());

    TranslateTransition translateTransition2 = new TranslateTransition();

    translateTransition2.setNode(r2);
    translateTransition2.setDuration(Duration.millis(1000));
    translateTransition2.setFromX(r2.getX());
    translateTransition2.setToX(r1.getX());
    translateTransition2.play();

    translateTransition.play(); 
```

我需要一个与画布类似的窗格。我需要能够设置矩形坐标。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T00:21:19.897

`TranslateTransition`使用`translateX`节点的属性。因此，如果您使用 或仅使用构造函数参数 TranslateTransition 定位矩形，则`setLayout`对`relocate`您不起作用。

您要么需要开始使用`translateX`坐标，要么使用`Timeline`代替`TranslateTransition`.

您可以阅读有关布局的更多信息并在[JavaDoc 中翻译以进行布局](http://docs.oracle.com/javafx/2/api/javafx/scene/Node.html#layoutXProperty)

这是基于 translateX 的交换示例：

```
public void start(Stage primaryStage) {
    final Rectangle r1 = new Rectangle(50, 50, Color.RED);
    final Rectangle r2 = new Rectangle(50, 50, Color.BLUE);

    // note I use translate to position rectangles
    r1.setTranslateX(50);
    r2.setTranslateX(250);

    Button btn = new Button();
    btn.setText("Move it");
    btn.relocate(100, 100);
    btn.setOnAction(new EventHandler<ActionEvent>() {
        @Override
        public void handle(ActionEvent event) {
            double x1 = r1.getTranslateX();
            double x2 = r2.getTranslateX();

            TranslateTransition translateTransition = new TranslateTransition();
            translateTransition.setNode(r1);
            translateTransition.setDuration(Duration.millis(1000));
            translateTransition.setToX(x2);

            TranslateTransition translateTransition2 = new TranslateTransition();
            translateTransition2.setNode(r2);
            translateTransition2.setDuration(Duration.millis(1000));
            translateTransition2.setToX(x1);

            translateTransition2.play();
            translateTransition.play();
        }
    });

    Pane root = new Pane();
    root.getChildren().addAll(btn, r1, r2);

    Scene scene = new Scene(root, 400, 350);

    primaryStage.setTitle("Hello World!");
    primaryStage.setScene(scene);
    primaryStage.show();
} 
```

# html - HTML & CSS 定位

> ID：16129499
> 
> 赞同：3
> 
> 时间：2013-04-21T08:57:06.383
> 
> 标签：html, css

我已经对下面的布局进行了编码，但是在测试时，“登录或注册”链接没有定位到页面的右侧。任何帮助表示赞赏。

**HTML**

```
<header>
   <h1>Heading</h1>
   <p>A clean, minimal, grid-based layout focusing attention on your work.</p
   <a href="/">Login or Signup</a>
</header> 
```

**CSS**

```
body {
  font-family: 'open sans';
  color: #333;
}

header {
  padding: 20px 20px 20px 50px;
}

a {
  color: #333;
  text-decoration: none;
}

h1, h2 {
  font-weight: 300;
} 
```

**期望的结果**

![http://oi38.tinypic.com/161nqrd.jpg](https://i.stack.imgur.com/m2LxP.jpg)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T09:05:14.517

这是一个有效的解决方案：

## [演示](http://jsfiddle.net/alp82/L8HTx/)

html

```
<header>
   <a href="/">Login or Signup</a>
   <h1>Heading</h1>
   <p>A clean, minimal, grid-based layout focusing attention on your work.</p>
</header> 
```

css

```
body {
  font-family: 'open sans';
  color: #333;
}

header {
  padding: 20px 20px 20px 50px;
}

header a {
  color: #333;
  text-decoration: none;
  float: right;
  padding-top: 30px;
}

h1, h2 {
  font-weight: 300;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-11-20T07:40:22.970

首先，请以正确的方式编写html并使用类名编写css。

这是你的答案：

HTML：

```
<header>
   <h1>Heading</h1>
   <a href="#">Login or Signup</a>
  <p>A clean, minimal, grid-based layout focusing attention on your work</p>     
</header> 
```

CSS：

```
* {
   padding: 0;
   margin: 0;
  }

 body {
   font-family: 'open sans';
   color: #333;
  }

 header {
   padding: 20px;
  }

 a {
   color: #333;
   text-decoration: none;
   float: right;
  }

 h1, h2 {
   font-weight: 300;
   margin :0;
   padding: 0;
 }
 header h1{
   width: 70%;
   display: inline-block;
 }
 header a{
    width: 30%;
    display: inline-block;
    padding-top: 10px;
 } 
```

[演示链接](http://jsfiddle.net/erasad22/346mq7on/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T09:30:54.080

```
 <div class="wrapper" style="margin:auto; width:960px:">
        <div class="header" style="height:80px;">
            <div style="float:left">
                <h1 style="float: left;">Heading</h1>
            </div>
            <div class="login" style="float:right">
                           <a href="/">Login or Signup</a>
            </div>
       </div>
       <div class="DisplayArea" style="float:left;">
           <p>A clean, minimal, grid-based layout focusing attention on your work.</p>
       </div>
   </div> 
```

```
.wrapper{
     margin:auto;
     width:960px;
    } 
```

看看这是否有帮助...

我总是发现使用 .

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-21T09:06:35.107

首先`>`在末尾有一个缺失`<p>...</p>`

然后试试这个：CSS

```
a
{
color: #333;
text-decoration: none;   
display : block;
float : right;
} 
```

HTML

```
<header>
<a href="/">Login or Signup</a>
<h1>Heading</h1>
<p>A clean, minimal, grid-based layout focusing attention on your work.</p>
</header> 
```

和 jsFiddle [http://jsfiddle.net/HxWNh/](http://jsfiddle.net/HxWNh/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-21T09:09:44.550

一些小的变化。H1 和 p 具有全宽，因此 a 必须低于 p。将CSS更改为

```
 a {
  color: #333;
  text-decoration: none;
  float: right;
  margin-right: 70px;
}
p{width: 70%;float: left;}
h1, h2 {
  font-weight: 300;
  width: 70%;
  float: left;
} 
```

会正常工作。

# javascript - bower 安装了几个文件。为什么以及如何更改它？

> ID：16129503
> 
> 赞同：23
> 
> 时间：2013-04-21T08:57:50.703
> 
> 标签：javascript, jquery, bower

我正在使用 bower 为我的项目安装依赖项（我知道有 yeoman 但我正在使用 bower）。设置 component.json 文件后，当我执行 bower install 时，它会将依赖项安装到正确的目录，但它也会安装许多其他不必要的文件。现在我希望 bower 安装例如所需的特定文件，仅此`jquery.js, backbone.js and underscore.js`而已。**我怎样才能用凉亭做到这一点？**

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2014-02-24T15:15:34.427

我最近为这个问题[写了一个可能的解决方案](http://joshbranchaud.com/blog/2014/02/19/Managing-Single-Files-With-Bower.html)，并将强调以下要点。

如果你知道你想要一个特定包中的特定文件，很容易告诉 bower 只获取该文件。例如，`normalize.css`我唯一关心的文件是`normalize.css`. 所以不要输入：

```
bower install --save normalize-css 
```

我可以更具体地告诉 bower 只下载`css`文件：

```
bower install --save https://raw.github.com/necolas/normalize.css/master/normalize.css 
```

当然，当`bower install`为您的项目调用时，它将始终从存储库的主分支中获取最新版本的 normalize。但是，如果我想确保始终获得`3.0.0`normalize 的版本，那么我可以挖掘发布/历史记录以找到适当的 URL 和中提琴：

```
bower install --save http://necolas.github.io/normalize.css/3.0.0/normalize.css 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-02-12T10:36:36.803

您可以查看[bower-installer](https://github.com/blittle/bower-installer)。

`bower list --path`通常会讲述包中的主 js 文件，它可以`bower-installer`方便地仅提取这些文件并将其导出到您的资产目录。然后，您可以改用此目录并忽略该`bower_components`目录。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-04-21T13:11:51.310

由包作者指定使用该[`ignore`](https://github.com/twitter/bower#defining-a-package)属性从包中排除哪些文件。现在只需在您的应用程序/网站中包含您想要的文件，而忽略其余的。

# python - Python2.7 mmap 用正则表达式超过两行

> ID：16129504
> 
> 赞同：0
> 
> 时间：2013-04-21T08:57:56.633
> 
> 标签：python, regex, python-2.7, mmap

这是一个txt文件的内容：

```
Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Donec
egestas, enim et consectetuer ullamcorper, lectus ligula rutrum leo, a
elementum elit tortor eu quam. Duis tincidunt nisi ut ante. Nulla
facilisi. Sed tristique eros eu libero. Pellentesque vel arcu. Vivamus
purus orci, iaculis ac, suscipit sit amet, pulvinar eu,
lacus. Praesent placerat tortor sed nisl. Nunc blandit diam egestas
dui. Pellentesque habitant morbi tristique senectus et netus et
malesuada fames ac turpis egestas. Aliquam viverra fringilla
leo. Nulla feugiat augue eleifend nulla. Vivamus mauris. Vivamus sed
mauris in nibh placerat egestas. Suspendisse potenti. Mauris massa. Ut
eget velit auctor tortor blandit sollicitudin. Suspendisse imperdiet
justo. 
```

这是我的代码：

```
import mmap
import re
import contextlib

pattern = re.compile(r'[\S\s]{5,15}elementum......',
                     re.DOTALL | re.IGNORECASE | re.MULTILINE)

with open('lorem.txt', 'r') as f:
    with contextlib.closing(mmap.mmap(f.fileno(), 0, access=mmap.ACCESS_READ)) as m:
        for match in pattern.findall(m):
            print match.replace('\n', ' ') 
```

打印无法包含前一行中的任何内容，即使我告诉程序删除换行符并且我正在匹配所有内容。如何匹配示例文件前一行的文本？

![输出](https://i.stack.imgur.com/hZxUN.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T09:27:02.570

您的屏幕截图表明您使用的是 Windows。在 Windows 行尾 ( `\r\n`) 中`lorem.txt`，输出变为`" rutrum leo, a\r elementum elit "`. (`\r`回车) 使光标跳回到行首，因此第一部分被第二部分覆盖：

```
$ python foo.py | od -tc
0000000   r   u   t   r   u   m       l   e   o   ,       a  \r       e
0000020   l   e   m   e   n   t   u   m       e   l   i   t      \n
0000037 
```

要使代码与平台无关，请使用`os.linesep`而不是`'\n'`.

另一种选择是使用常规文件读取函数而不是`mmap`, 并指定模式`'r'`（假设平台本地行结尾）或`'rU'`（接受任何`\r`,`\r\n`和`\n`）。这可确保所有行尾都自动转换为`\n`。

# mvvm - 对特定实例使用依赖注入 - MS Unity

> ID：16129513
> 
> 赞同：0
> 
> 时间：2013-04-21T08:58:53.317
> 
> 标签：mvvm, prism, unity-container

我正在编写基于 PRISM 的 MVVM 应用程序。那些天我在学习 PRISM，我有一个关于 UnityContainer 的技术问题。

有没有办法在我使用时注入特定的实例`container.Resolve`？

我将尝试举例说明。

让我们注册下一个类型：

```
var container = new UnityContainer();
container
    .RegisterType(typeof(ISomeClass), typeof(SomeClass))

// with string
container
    .RegisterType(typeof(IExample), typeof(Example), "SpecificExampleInstance") 
// without string
container
    .RegisterType(typeof(IExample), typeof(Example)); 
```

`SomeClass`get的构造函数`IExample`作为输入参数。

现在我想解析实例，`SomeClass`但告诉“容器”将实例注入`SomeClass`构造函数`IExample`- “SpecificExampleInstance”（在上面代码的第 3 行注册的那个）而不是`IExample`- 没有字符串（在第 4 行注册的那个）上面的代码 - 没有字符串）

我希望我的问题足够清楚，如果没有，请告诉我，我会尝试改变公式。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T09:14:30.547

一种选择是使用[Dependency](http://msdn.microsoft.com/en-us/library/ff660875%28v=pandp.20%29.aspx#cnstrctinj_named)属性：

```
public class SomeClass
{
   public SomeClass([Dependency("SpecificExampleInstance")] IExample myExample)
   { 
      // work with the service here
   }
} 
```

# iphone - IOS的Flex移动项目，服务器端代理

> ID：16129527
> 
> 赞同：0
> 
> 时间：2013-04-21T09:00:53.780
> 
> 标签：iphone, ios, apache-flex, actionscript, flash-builder

我正在尝试编写一个 iphone 应用程序，该应用程序从运行相机的内置 Web 服务器加载视频（通过 wifi 连接到 iphone）。

我正在使用 flash builder/flex 移动项目 - 不是特别熟悉，但发现它比 xcode 更容易理解！

来自相机的文件具有错误的文件扩展名，因此无法在 ios 视频应用程序上播放，我可以在 flex mobile 中设置服务器端代理并使用它来更改文件扩展名，然后将此链接传递给 ios 视频应用程序吗？

如果有人可以给我任何帮助（示例等），我将不胜感激，我已经尝试解决这个问题几个星期了。

干杯托比

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T13:23:33.070

我可以从概念上解释服务器端代理在这种情况下会做什么。假设您正在检索一个 URL，如下所示：

```
http://myserver.com/somethingSomething/DarkSide/ 
```

从服务器检索视频流。你说它不会播放，因为没有文件扩展名；因此，本质上，您必须使用带有扩展名的不同 URL。在服务器上设置“搜索引擎友好”的 URL。并做这样的事情：

```
http://myserver.com/myProxy.cfm/streamURL/somethingSomething%5CDarkSide/Name/myProxyVid.mp4 
```

以下是有关如何在 ColdFusion 中处理[搜索引擎友好 URL 的](http://www.coldfusioncookbook.com/entry/104/How-can-I-get-user-and-Search-Engine-Friendly-URLs)一些信息。下面是一些关于如何[在 PHP 中处理搜索引擎友好 URL 的](http://www.phpriot.com/articles/search-engine-urls)信息。我确信其他技术会出现在 Google 搜索中。

在上面的网址中；这就是你所拥有的：

*   **[http://myserver.com/](http://myserver.com/)**：这是您的服务器
*   **myProxy.cfm**：这是您的服务器端文件；那是一个代理
*   **streamURL/somethingSomething%5CDarkSide/Name/myProxyVid.mp4**：这是查询字符串。它由两个名称值对组成。第一个是streamURL。这是您要使用代理检索的 URL。第二个是随机的；但只要它以文件扩展名 .mp4 结尾，URL 就应该被视为“mp4 文件”

myProxy.cfm 背后的代码应该是这样的，在伪代码中：

```
Parse URL Query String
Retrieve Stream.
Set mimeType on return value.
Return stream data 
```

我在 TheFlexShow.com 上使用了类似的方法来跟踪在线观看我们的截屏视频与首先下载它的人数。我还使用相同的方法来跟踪广告商横幅广告的印象。例如，浏览器无法判断这不是 JPG 图像：

> [http://www.theflexshow.com/blog/mediaDisplay.cfm?mediaid=51](http://www.theflexshow.com/blog/mediaDisplay.cfm?mediaid=51)

基于此，以及您之前的一个问题；不过，我不相信这是最好的解决方案。我在这里做了很多假设。我认为播放文件的问题确实与扩展名有关，而不是文件数据。我假设您实际上并没有在客户端和服务器上使用开放连接来流式传输视频来来回发送数据。

# animation - 如何为地图上两点之间的 3D 曲线设置动画？

> ID：16129537
> 
> 赞同：2
> 
> 时间：2013-04-21T09:02:44.513
> 
> 标签：animation, 3d, processing, curve

我正在尝试做一个 twitter 可视化。我使用曲线连接地图上的两个点。 ![在此处输入图像描述](https://i.stack.imgur.com/I4xiH.jpg)

这是我正在使用的代码。它取自处理论坛中的 Chrisir 的一个示例。

```
void setup()
{
  size( 800, 800, P3D );
} // setup

void draw() 
{
  // myCurveTest() ;
  PVector firstpoint = new PVector (120, 320, -30); 
  PVector secondpoint = new PVector (320, 220, -30);
  myCurve (firstpoint, secondpoint ) ;
  firstpoint = new PVector (420, 220, 30); 
  secondpoint = new PVector (620, 120, -30);
  myCurve (firstpoint, secondpoint ) ;
}

void myCurve (
PVector firstpoint, 
PVector secondpoint) {
  PVector beginningcontrolpoint = new PVector (120, firstpoint.y+1200, -30); 
  PVector endingcontrolpoint = new PVector (720, secondpoint.y+1200, -30); 
  myPointPVector(beginningcontrolpoint, color(255, 0, 0));
  myPointPVector(firstpoint, color(0, 0, 255));  
  myPointPVector(secondpoint, color(0, 0, 255));  
  myPointPVector(endingcontrolpoint, color(255, 0, 0));
  stroke (255);
  noFill();
  curve(
  beginningcontrolpoint.x, beginningcontrolpoint.y, beginningcontrolpoint.z, 
  firstpoint.x, firstpoint.y, firstpoint.z, 
  secondpoint.x, secondpoint.y, secondpoint.z, 
  endingcontrolpoint.x, endingcontrolpoint.y, endingcontrolpoint.z);
}

void myPointPVector (PVector test, color col1) {
  MyBox(test.x, test.y, test.z, 
  test.x+3, test.y, test.z, 
  9, 
  col1);
}

void MyBox(float x1, float y1, float z1, float x2, float y2, float z2, float weight, color strokeColour)
// was called drawLine; programmed by James Carruthers
// see http://processing.org/discourse/yabb2/YaBB.pl?num=1262458611/0#9
{
  PVector p1 = new PVector(x1, y1, z1);
  PVector p2 = new PVector(x2, y2, z2);
  PVector v1 = new PVector(x2-x1, y2-y1, z2-z1);
  float rho = sqrt(pow(v1.x, 2)+pow(v1.y, 2)+pow(v1.z, 2));
  float phi = acos(v1.z/rho);
  float the = atan2(v1.y, v1.x);
  v1.mult(0.5);
  pushMatrix();
  translate(x1, y1, z1);
  translate(v1.x, v1.y, v1.z);
  rotateZ(the);
  rotateY(phi);
  noStroke();
  fill(strokeColour);
  box(weight, weight, p1.dist(p2)*1.2);
  popMatrix();
} 
```

我想为这条 3D 曲线制作动画，以便我可以看到它们在地图上绘制。谁能帮我解决这个问题。我已经尝试了从帧数到处理中库的高级动画的所有方法，但还没有运气:(

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T04:55:55.090

您可以逐点计算抛物线，`curveVertex`使用平移和旋转绘制它并在 3D 中环绕它，这里是一个示例（使用 1.5.1/P3D/ `fontMode(SCREEN)`）：

```
float initial_x = -200;
float x =  initial_x;
float y;
float y_offset;
float r = 200;// change this to change the height of the parabola
ArrayList<PVector> pts = new ArrayList<PVector>();
float mx = 70, my = -15, tmx, tmy;
boolean animating = false;
PFont f;

void setup() {
  size( 800, 400, P3D);
  background(255);
  smooth();
  f = createFont("Arial", 15);
  textMode(SCREEN);
}

void draw() {
  //lights();
  background(255);
  fill(100);
  textFont(f, 15);
  text("drag to orbit", width - 10 - textWidth("drag to orbit"), height -30);
  text("any key to redraw parabola", width - 10 - textWidth("any key to redraw parabola"), height -10);

  //rotate 3d
  translate(width/4, height/2);
  rotateY(radians(mx));
  rotateZ(radians(my));

  // to mark origin and help view 3d
  noFill();
  stroke(100);
  box(20);
  pushMatrix();
  translate(100, 5, -100);
  stroke(200);
  fill(0, 20);
  box(600, 2, 600);
  popMatrix();

  //store y offset
  if (x == initial_x) {
    y_offset = (sq(x)+2*x)/r;
  }

  // stop parabola
  if ( x == initial_x ||  x < -initial_x + 2) {
    x+=2;
    animating = true;
     // add to curve storage
    pts.add(new PVector(x, y));
  }
  else {
    animating = false;
  }

  //calc y
  y = (sq(x)+2*x)/r - y_offset;

  stroke(50, 30, 7);
  noFill();
  strokeWeight(1);

  //draw at origin
  translate(-initial_x, 0);

  //draw curve
  beginShape();
  for (PVector p:pts) {
    curveVertex(p.x, p.y);
  }
  endShape();

  //draw a ball
  if (!animating) {
    translate(pts.get(frameCount%pts.size()).x, pts.get(frameCount%pts.size()).y);
    noStroke();
    fill(220, 190, 35);
    sphere(4);
  }
}
void mousePressed() {
  tmx = mouseX;
  tmy = mouseY;
}
void mouseDragged() {
  mx = tmx - mouseX;
  my = tmy - mouseY;
}

void keyPressed() {
  x = -200;
  pts.clear();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T13:10:11.720

您正在使用 curve() 命令（[http://processing.org/reference/curve_.html](http://processing.org/reference/curve_.html)) 绘制 Catmull-Rom 样条曲线。在您的代码中，您只绘制了一个样条曲线部分（两个控制点之间的那个），所以您真正感兴趣的是“我怎样才能只绘制 Catmull-Rom 样条曲线部分的一部分”。我没有那个答案，但是如果您将 curve(control1, first, second, control2) 调用更改为 bezier(first,c1,c2,second) 调用（您现在必须想出控制点 c1 和 c2) 的代码，然后您可以使用 de Casteljau 的算法将一条曲线沿其任意位置切割成两段。如果你每帧向上滑动 where-to-cut-it 点，然后只绘制你从分割操作中得到的第一段，它看起来就像一条从起点到终点绘制自己的曲线。见[http://pomax.github。](http://pomax.github.io/bezierinfo/#splitting)有关如何执行此操作的描述（奖励：源代码甚至在处理中）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-18T22:54:19.817

使用 curvePoint() 方法。这是对类似问题的解决方案：http: [//forum.processing.org/one/topic/animation-with-curve.html](http://forum.processing.org/one/topic/animation-with-curve.html)。

# excel - 如何计算excel中文本实例的数量？

> ID：16129542
> 
> 赞同：4
> 
> 时间：2013-04-21T09:03:22.503
> 
> 标签：excel, excel-2013

我有一张工作日表，我想计算每一行中“工作”一词的实例。我有一张这样的桌子： ![简单的工作表](https://i.stack.imgur.com/eT2tI.png)

我在 J1 单元格中使用了此代码，但它不起作用。

```
=SUM(IF(2:2 = "Sleep",1,0)) 
```

我在微软的网站上找到了这个公式，但它不起作用。是什么导致了这个问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-21T09:12:28.377

您需要使用该`COUNTIF`功能。

```
=COUNTIF(C2:I2,"Sleep") 
```

这在细胞中`J2`

**来自 Excel 的帮助**

> COUNTIF 函数计算范围内满足您指定的单个条件的单元格的数量。例如，您可以对所有以某个字母开头的单元格进行计数，也可以对包含大于或小于您指定的数字的数字的所有单元格进行计数。

如有疑问，请按 Excel 中的神奇按钮`F1`。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-10T12:14:51.417

刚刚在工作表中遇到类似的事情并在我记得为什么它不起作用之前来到谷歌。

上面的 countif 语句非常好，但是给出的原始公式无法以这种方式使用总和，这意味着您必须将其设为数组或 CSE 公式。

因此，如果您遇到此问题，请在编辑栏中单击并按 ctrl + shift + enter ，它应该会整理出所有内容。

# jquery - 如何使固定元素与文档底部保持特定距离？

> ID：16129543
> 
> 赞同：2
> 
> 时间：2013-04-21T09:03:27.027
> 
> 标签：jquery, css, position, fixed

我有一个位置：固定，底部：0px 的元素。当我向下滚动页面时，这个元素应该跟随我，直到它靠近页脚，比如说 100px 高度，我试图让元素保持在底部：0px 直到它到达页脚元素，在那一刻它应该总是让页脚元素在它下面。

这是我的CSS：

```
#backToTop{
    width:80px;
    height:50px;
    background:#333;
    color:#FFF;
    text-align:center;
    border-radius:10px 10px 0 0;
    padding-top:10px;
    position:fixed;
    bottom:0;
    left:50%;
    margin-left:550px;
} 
```

我研究了 Jquery`$(document).height()`并`$(window).scrollTop()`尝试提出某种条件来检测元素的位置何时接近页脚，但没有成功（我的页脚的高度为 120）：

```
$(window).scroll(function(){    
if($(document).height()-($(window).scrollTop()+$(window).height()) <= 120){
    $('#backToTop').css({'bottom':$(document).height()-($(window).scrollTop()+$(window).height())});
}else{
    $('#backToTop').css('bottom',0);
}
}); 
```

我不太确定这些值到底指向哪里，有什么提示吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T11:26:30.330

尝试为#backToTop 元素创建两个类，一个用于固定位置，另一个用于相对位置。当页脚到达视口时，#backToTop 元素将其类更改为“相对”。

HTML：

```
<div id="container">
    <div id="backToTop" class="fixed_pos">Top</div>
    <footer>footer</footer>
</div> 
```

CSS：

```
#container {
width: 100%;
height: 1000px;
float: left;
}

#backToTop {
width:80px;
height:50px;
background:#333;
color:#FFF;
text-align:center;
border-radius:10px 10px 0 0;
padding-top:10px;    
left: 50%;
margin-left: -40px;
}

.fixed_pos {
position:fixed;
bottom:0;    
}

.relative_pos {
position: relative;
top: 100%;
}

footer {
width: 100%;
height: 200px;
float: left;
position: relative;
top: 100%;
background: #333;
color: #fff;
text-align: center;
} 
```

看看这里：

[http://jsfiddle.net/6bZab/](http://jsfiddle.net/6bZab/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T10:17:28.680

您可以使用新`position:sticky`属性来实现类似的结果。

## 演示：http: [//jsfiddle.net/4hznD/](http://jsfiddle.net/4hznD/)

这是 CSS 代码，`<div>`您要放置在固定位置必须放置在距底部 100px 的页面流中：

# CSS

```
div{
    position: -webkit-sticky;
    position: -moz-sticky;
    position: -o-sticky;
    position: -ms-sticky;
    position: sticky;
    bottom: 0px;
    line-height: 30px;
    background: gray;
} 
```

我不知道实际的`position:sticky`支持（我确定它可以在 Chrome 上运行），但你可能会认为在丢失时使用一些 polyfill。

# java - 无法使用以下方式调用 portlet 的方法

> ID：16129546
> 
> 赞同：1
> 
> 时间：2013-04-21T09:03:51.670
> 
> 标签：java, liferay, portlet

我一直在尝试借助这个小教程[使用多个操作开发 Portlet](http://www.liferay.com/documentation/liferay-portal/6.0/development/-/ai/developing-a-portlet-with-multiple-actions)来调用 portlet 的方法“signinAction” 。但是当我尝试这样做时，我得到**Portlet 暂时不可用**错误。我在 Tomcat 的服务器控制台中看不到任何东西。此外，当我使用 processAction() 时，我没有收到错误消息。我不知道出了什么问题。

JSP：

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
    pageEncoding="ISO-8859-1" isELIgnored="false"%>
<%@ taglib uri="http://java.sun.com/portlet_2_0" prefix="portlet" %>

<portlet:actionURL var="signinAction" name="signinAction">
</portlet:actionURL>

<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Login</title>

</head>
<body onload="load()" id="body1">
<form action="<%=signinAction.toString() %>" name="signinForm" method="post" onsubmit="return signin(this)">

<center>

<div class="div-upside-down" id="div-style">    

<table  width="95%">
<tr>
    <td colspan="3"><p class="pp"></p>
    </td>
</tr>
<tr>
    <td id="td1">
        <input type="text"  id="email" name="email"  placeholder="Email" />
        <p id="one"></p>
    </td>

    <td id="td2">
        <input type="password"  id="password" name="password"  placeholder="Password" />
        <p id="one"></p>
    </td>

    <td id="td3">
        <input type= "submit" name= "submit" value="Login"/>
        <p id="one"></p>
    </td>
</tr>
</table>
</div>
</center>
</form>
</html> 
```

小门户：

```
public class HelloWorldPortlet extends GenericPortlet {

ThemeDisplay td;

 public void signinAction(ActionRequest actionRequest, ActionResponse actionResponse) throws PortletException, IOException{
       long companyId=10154;
       String email = actionRequest.getParameter("email");
       String password = actionRequest.getParameter("password");

       try
        {
        int authResult = 0;
        long userId = 0;
        Company company = PortalUtil.getCompany(actionRequest);
        Map headerMap = new HashMap();

        Map parameterMap = actionRequest.getParameterMap();

        authResult = UserLocalServiceUtil.authenticateByEmailAddress(company.getCompanyId(), email, password,headerMap, parameterMap, null);
        userId = UserLocalServiceUtil.getUserIdByEmailAddress(company.getCompanyId(), email);
        User user = UserLocalServiceUtil.getUserByEmailAddress(companyId, email);
        String screenId = user.getScreenName();
        td = (ThemeDisplay) actionRequest.getAttribute(WebKeys.THEME_DISPLAY);  

        MethodKey key = new MethodKey("com.liferay.portlet.login.util.LoginUtil", "login", HttpServletRequest.class, HttpServletResponse.class, String.class, String.class, boolean.class, String.class);
        PortalClassInvoker.invoke(false, key, new Object[] { PortalUtil.getHttpServletRequest(actionRequest), PortalUtil.getHttpServletResponse(actionResponse),screenId, password, true, CompanyConstants.AUTH_TYPE_SN});
        actionResponse.sendRedirect(td.getPathMain());

        }
        catch (Exception e)
        {
        e.printStackTrace();
        }
        }
} 
```

请帮忙。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-21T10:52:50.953

你遇到的一些问题。首先，您的实际问题：

看来您的 portlet 是从 javax.portlet.GenericPortlet 继承的。这意味着您必须添加`@ProcessAction(name="signinAction")`到方法的签名中。如果你不想要这个注解，你需要从 Liferay 的 MVCPortlet 继承，它通过反射找到你似乎期望的方法

您提供的代码的第二个问题：您的 jsp 包含页面级 HTML，例如`<html>`和`<head>`：`<body>`portlet 不得包含此内容，因为它将作为页面的一部分呈现，并且门户有责任将这些项目添加到页面（无论您显示多少个 portlet，它们只会被添加一次）

第三：根据经验，portlet 不应该有成员变量——事实上，将 ThemeDisplay 作为 portlet 类成员会在以后导致随机失败：通常只有一个 portlet 对象处理应用程序获得的所有请求。您*必须*使 ThemeDisplay 成为局部变量而不是成员，以避免并发问题和随机用户数据泄漏到其他用户的请求处理中

# java - 将数据从一个传递到另一个

> ID：16129547
> 
> 赞同：-1
> 
> 时间：2013-04-21T09:03:53.707
> 
> 标签：java, swing, oop

谁能帮我纠正这个Java？

我想将登录 obj 中的数据传递`JFrame`给我的`mainform`班级，但我不知道该怎么做！

这是我的代码：

## 登录.java

```
import javax.swing.*;
import java.awt.event.*;
import java.awt.*;
import java.sql.*;

class Login extends JFrame implements ActionListener{

    private JTextField tfUser;
    private JPasswordField tfPass;
    private JButton btnLogin,btnCancel;
    private JComboBox cbotype;
    private String user,pass;
    private Connection con;
    private Statement stmt;
    private ResultSet rs;
    public Login(){
        super("Login");
        initGUI();
        setLocationRelativeTo(null);
        setVisible(true);
        setResizable(false);
        setDefaultCloseOperation(EXIT_ON_CLOSE);

    }
    public void actionPerformed(ActionEvent e){
        if(e.getSource()==btnLogin) pLogin();
        else if(e.getSource()==btnCancel) cancel();
    }

    public void cancel(){ dispose();
    }
    public void pLogin(){
        if(isLogin())
            setVisible(false);
        System.out.print(user);
    }
    public boolean isLogin(){
        String sms="Welcome!!!",table=cbotype.getSelectedItem().toString();
        pass=tfPass.getText();
        user=tfUser.getText();
        try{
            Class.forName("com.microsoft.sqlserver.jdbc.SQLServerDriver"); 
            String connectionUrl = "jdbc:sqlserver://localhost:1433;" + "databaseName=dbLibrary;user=sa;password=123;";
            Connection con = DriverManager.getConnection(connectionUrl);
            stmt=con.createStatement(ResultSet.TYPE_SCROLL_SENSITIVE,ResultSet.CONCUR_UPDATABLE);
            rs=stmt.executeQuery("SELECT username,password FROM " + table +" Where username='"+ user +"'");     
            if(rs.next ()){
                rs.first();
                if(rs.getString(2).compareTo(pass)==0)
                {   JOptionPane.showMessageDialog(null,sms);
                    return true;
                }else{
                    sms="Incorrect Password! Please, try it again!";
                }
            }else
            {sms="Incorrect User or Password! Please, try again!";}
            JOptionPane.showMessageDialog(null,sms);
        }catch(SQLException e){ e.printStackTrace();
        }catch(ClassNotFoundException e1){e1.printStackTrace();
        }return false;
    }
    public void initGUI(){
        JPanel p1=new JPanel(new FlowLayout());
        p1.add(Interface.title(new JLabel("Login"),"images/login_0.png"));
        //con.add(p1);
        JPanel p2=new JPanel(new GridLayout(3,2));
        p2.add(Interface.label(new JLabel("Type:")));
        p2.add(cbotype=new JComboBox());
        cbotype.addItem("Employee");cbotype.addItem("Patron");
        p2.add(Interface.label(new JLabel("User:")));
        p2.add(tfUser=new JTextField(20));
        p2.add(Interface.label(new JLabel("Password:")));
        p2.add(tfPass=new JPasswordField(20));
        //con.add(p2);

        JPanel p3=new JPanel(new FlowLayout());
        p3.add(Interface.button(btnLogin=new JButton("Login"),"images/login_1.png"));
        p3.add(Interface.button(btnCancel=new JButton("Cancel"),"images/login_2.png"));

        JPanel p=new JPanel(new BorderLayout());
        p.add(p1,"North");
        p.add(p2,"Center");
        p.add(p3,"South");
        add(p);
        pack();

        btnLogin.addActionListener(this);
        btnCancel.addActionListener(this);
    }
    public String getUser(){
        return user;
    }
    public String getPass(){
        return pass;
    }
     public static void main(String[] args) {
        new Login();

    }
} 
```

## MainForm.java

```
import javax.swing.*;
import java.awt.event.*;
import java.awt.*;

public class MainForm extends JFrame implements ActionListener{

private Container con;

    private String user;

    private JButton btnshow;

    public MainForm() {
        initGUI();
        pack();
        setVisible(true);
        setDefaultCloseOperation(EXIT_ON_CLOSE);
    }
    public void initGUI(){
        Login login=new Login();
        user=login.getUser();
        //login.dispose();
        System.out.print(user);
        con=getContentPane();
        con.add(btnshow=new JButton("Show"));
        btnshow.addActionListener(this);
    }
    public void actionPerformed(ActionEvent e){
        if(e.getSource()==btnshow) {System.out.print(user); 
        }
    }
    public static void main(String[] args) {
        new MainForm();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T09:30:52.867

请参阅[使用多个 JFrame，好/坏做法？](https://stackoverflow.com/a/9554657/418556) 登录应该是 modal`JDialog`或`JOptionPane`. 从框架中弹出对话框，然后检查下一行代码中的相关字段。

尝试查看此代码以获取提示。

```
import javax.swing.*;
import java.awt.event.*;
import java.awt.*;
import java.sql.*;

public class MainForm extends JFrame implements ActionListener{

private Container con;

    private String user;

    private JButton btnshow;

    public MainForm() {
        initGUI();
        pack();
        setVisible(true);
        setDefaultCloseOperation(EXIT_ON_CLOSE);
    }

    public void initGUI(){
        Login login=new Login(this);
        user=login.getUser();
        //login.dispose();
        System.out.print(user);
        con=getContentPane();
        con.add(btnshow=new JButton("Show"));
        btnshow.addActionListener(this);
    }
    public void actionPerformed(ActionEvent e){
        if(e.getSource()==btnshow) {System.out.print(user);
        }
    }
    public static void main(String[] args) {
        new MainForm();
    }
}

class Login extends JDialog implements ActionListener{

    private JTextField tfUser;
    private JPasswordField tfPass;
    private JButton btnLogin,btnCancel;
    private JComboBox cbotype;
    private String user,pass;
    private Connection con;
    private Statement stmt;
    private ResultSet rs;
    public Login(Frame f){
        // make it modal
        super(f, true);
        initGUI();
        setLocationRelativeTo(null);
        setVisible(true);
        setResizable(false);
        setDefaultCloseOperation(DISPOSE_ON_CLOSE);

    }
    public void actionPerformed(ActionEvent e){
        if(e.getSource()==btnLogin) pLogin();
        else if(e.getSource()==btnCancel) cancel();
    }

    public void cancel(){ dispose();
    }
    public void pLogin(){
        //if(isLogin())
            setVisible(false);
        System.out.print(user);
    }
    public boolean isLogin(){
        String sms="Welcome!!!",table=cbotype.getSelectedItem().toString();
        // never store passwords as a String, left as an exercise for the user
        pass = new String(tfPass.getPassword());
        user= tfUser.getText();
        try{
            Class.forName("com.microsoft.sqlserver.jdbc.SQLServerDriver");
            String connectionUrl = "jdbc:sqlserver://localhost:1433;" + "databaseName=dbLibrary;user=sa;password=123;";
            Connection con = DriverManager.getConnection(connectionUrl);
            stmt=con.createStatement(ResultSet.TYPE_SCROLL_SENSITIVE,ResultSet.CONCUR_UPDATABLE);
            rs=stmt.executeQuery("SELECT username,password FROM " + table +" Where username='"+ user +"'");
            if(rs.next ()){
                rs.first();
                if(rs.getString(2).compareTo(pass)==0)
                {   JOptionPane.showMessageDialog(null,sms);
                    return true;
                }else{
                    sms="Incorrect Password! Please, try it again!";
                }
            }else
            {sms="Incorrect User or Password! Please, try again!";}
            JOptionPane.showMessageDialog(null,sms);
        }catch(SQLException e){ e.printStackTrace();
        }catch(ClassNotFoundException e1){e1.printStackTrace();
        }return false;
    }
    public void initGUI(){
        JPanel p1=new JPanel(new FlowLayout());
        p1.add(new JLabel("Login"));
        //con.add(p1);
        JPanel p2=new JPanel(new GridLayout(3,2));
        p2.add(new JLabel("Type:"));
        p2.add(cbotype=new JComboBox());
        cbotype.addItem("Employee");cbotype.addItem("Patron");
        p2.add(new JLabel("User:"));
        p2.add(tfUser=new JTextField(20));
        p2.add(new JLabel("Password:"));
        p2.add(tfPass=new JPasswordField(20));
        //con.add(p2);

        JPanel p3=new JPanel(new FlowLayout());
        p3.add(btnLogin =  new JButton("Login"));
        p3.add(btnCancel = new JButton("Cancel"));

        JPanel p=new JPanel(new BorderLayout());
        // Don't use magic numbers!  There are defined constants
        // for these constraints.
        p.add(p1,BorderLayout.NORTH);
        p.add(p2,BorderLayout.CENTER);
        p.add(p3,BorderLayout.SOUTH);
        add(p);
        pack();

        btnLogin.addActionListener(this);
        btnCancel.addActionListener(this);
    }
    public String getUser(){
        return user;
    }
    public String getPass(){
        return pass;
    }
} 
```

## 其他提示

1.  不要扩展框架或对话框，只需使用它们的实例。
2.  Swing 和 AWT GUI 应该在 Event Dispatch Thread 上创建和更新。
3.  对代码块使用一致且合乎逻辑的缩进。代码的缩进是为了帮助人们理解程序流程。
4.  请参阅代码注释中的更多提示。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T09:11:18.120

一种方法：当你调用 Login 构造函数时，就是将 MainForm 实例解析给它。您的 Login 类将保留对 MainForm 的引用，并且当您需要让 MainForm 知道时，从 Login 类中调用 MainForm 上的方法。这与听众的工作方式几乎相同......

在您的 MainForm 课程中

```
Login login=new Login(this); 
```

当您想让 MainForm 知道时，在您的 Login 类中：

```
this.mainForm.someListenerMethod(); 
```

# java - 当点击后退按钮时，Play 是否提供缓存的页面内容？

> ID：16129555
> 
> 赞同：-1
> 
> 时间：2013-04-21T09:04:52.613
> 
> 标签：java, playframework, playframework-1.x

在我的一个基于 Play 的应用程序中，有一个按钮，在成功调用服务器后，单击该按钮会将其文本从“关注”更改为“取消关注”。

我发现如果我转到另一个页面，然后单击后退按钮，按钮的文本会翻转回单击之前的状态，尽管数据已成功存储在服务器上，并且我使用了 JavaScript 成功处理程序更改文本。

如果我完全刷新页面，我会看到页面正确呈现，即按钮具有正确的状态。

这让我得出结论，Play 可能正在做一些页面缓存来处理后退按钮的点击。这个对吗？我怎样才能禁用它？我可以只为那个特定页面做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T21:44:48.870

> 这让我得出结论，Play 可能正在做一些页面缓存来处理后退按钮的点击。这个对吗？

不，您的浏览器会这样做，而不是 Play。

这是所有浏览器的正常和预期行为：“返回”页面从缓存中显示，根本不调用服务器（除非有动态事件 -ajax-，显然）。

# c# - 动态上没有“动作”的定义？

> ID：16129556
> 
> 赞同：1
> 
> 时间：2013-04-21T09:04:57.277
> 
> 标签：c#, exception, dynamic

我在这里有一个事件，它使用包含*动态*对象的参数触发。它是直接在事件调用本身中创建的匿名对象，例如

```
if(MyEvent != null) MyEvent(this, new SensoricDataEventArgs { Data = new { Action = "Start", Team = "Blau" } }); 
```

其中*SensoricDataEventArgs*的签名是这样的：

```
class SensoricDataEventArgs : EventArgs {
  public dynamic Data { get; set; }
} 
```

*当我尝试在处理程序中访问该数据时（在另一个程序集中，如果相关的话），我得到的只是对象*没有*Action*定义的异常，即使我将 Data 属性重新转换为*动态*的。*甚至动态*对象的 DebuggerVisualizer也显示对象上有一个属性*Action*。

但是，我得到了提到的异常。

这是我在事件处理程序中尝试执行的操作的图像，以及来自调试器的信息。在图像中，调试器已在断点处停止。下一步将引发异常。

知道是什么导致了这个异常吗？我究竟做错了什么？ ![MyEvent 处理程序](https://i.stack.imgur.com/mHhtw.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T09:30:29.677

问题是声明了匿名类型`internal`，因此您尝试访问的成员在其他程序集中不可见，并且 DLR 实际上在运行时对成员可访问性进行相同的编译时分析。它不会让您在运行时访问您在编译时无法访问的东西。它看到匿名类型是`internal`并抛出一个`RuntimeBinderException`.

一种解决方案是显式编写反射代码，而不是使用`dynamic`. 一个更易于维护的长期解决方案是`dynamic`从事件参数中删除并更精确地定义您的组件如何相互通信。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T10:13:08.073

另一种解决方案是使用*ExpandoObject*而不是匿名对象。

在我的特殊情况下，并考虑到时间紧迫（截止日期临近）的事实，我将使用此解决方法，而不是重新考虑我的整个架构并冒着与已完成插件不兼容的风险。它可以工作并且保持兼容性。

# php - 如何在php中的子数组中搜索？

> ID：16129557
> 
> 赞同：0
> 
> 时间：2013-04-21T09:05:02.497
> 
> 标签：php, mysql, arrays, loops

我在 php 中有以下数组：

```
Array
(
    [0] => Array
    (
        [city] => London
        [institute_count_per_city] => 10
    )

    [1] => Array
    (
        [city] => Leeds
        [institute_count_per_city] => 10
    )

    [2] => Array
    (
        [city] => Edinburgh
        [institute_count_per_city] => 10
    )

    [3] => Array
    (
        [city] => GrandTotal
        [institute_count_per_city] => 30
    )

) 
```

现在，最后一个子数组将始终具有常量 key=>value ([city]=>GrandTotal)。我想为 [city]=>GrandTotal 获取 [institute_count_per_city] 的值。

实现这一目标的有效方法是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T09:10:14.210

没有比遍历所有元素并检查值是否匹配更好的方法了。

```
$result = null;
foreach($arr as $key => $item) {
    if($item['city'] == 'GrandTotal') {
        $result = $item;
        break;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T09:18:34.553

既然你说它永远是最后的......简单快捷：

```
 $GrandTotal = $array[count($array) -1]['institute_count_per_city']; 
```

# wicket - WIcket 反馈面板上的不同 CSS

> ID：16129558
> 
> 赞同：1
> 
> 时间：2013-04-21T09:05:10.063
> 
> 标签：wicket, feedbackpanel

我有一个 Wicket 应用程序。在应用程序中，用户可以在多个表格中填写多个字段。

我在用户获得反馈的底部有一个特殊的地方（使用反馈面板）。反馈包括成功和错误消息等。

问题是我想为不同的消息使用不同的 CSS 样式。

我已经有了想要实现的 CSS 样式。我可以在 HTML 表单中成功实现它们，但我得到的两条消息的 CSS 样式相同。

我想根据消息的不同严重性在相同的反馈组件上使用不同的 CSS 样式，所以如果消息是“错误”-我希望它具有特定的样式，如果它是“成功”我希望它有不同的风格。

如何根据消息的严重性将 FeedbackPanel 指向特定的 CSS 样式？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-21T11:50:57.353

您可以创建一个继承 FeedbackPanel 并覆盖 getCSSClass 方法的类

```
public class CustomFeedbackPanel extends FeedbackPanel {

    public CustomFeedbackPanel(String id) {
        super(id);
    }

    public CustomFeedbackPanel(String id, IFeedbackMessageFilter filter) {
        super(id, filter);
    }

    @Override
    protected String getCSSClass(FeedbackMessage message) {
        String css;
        switch (message.getLevel()){
            case FeedbackMessage.SUCCESS:
                css = "alert success";
                break;
            case FeedbackMessage.INFO:
                css = "alert info";
                break;
            case FeedbackMessage.ERROR:
                css = "alert error";
                break;
            default:
                css = "alert";
        }

        return css;
    }
} 
```

# php - 匹配来自两个数组的值，如果都为真则插入到 db

> ID：16129561
> 
> 赞同：1
> 
> 时间：2013-04-21T09:05:17.590
> 
> 标签：php, arrays, foreach

我有两个数组，一个命名`$requirements`的可以保存多个值对。例子：

```
array
  'name1' => int 1000 
```

或者：

```
array
  'name1' => int 1000
  'name2' => int 2000
  'name3' => int 3000 
```

我还有第二个数组，命名为`$values`保存必须超过要求的值。例子：

```
array
  'name1' => int 2683 
```

或者：

```
array
  'name1' => int 4552
  'name2' => int 324
  'name3' => int 1718 
```

我想匹配每个值对以确保它们超出要求。如果他们这样做，请运行插入查询。

现在，我已经通过创建一个单独的数组来完成此操作，该数组`$result`为每个匹配项保存真/假，并给出以下结果：

```
array
  'name1' => boolean true 
```

或者：

```
array
  'name1' => boolean true
  'name2' => boolean false
  'name3' => boolean false 
```

然后再次在数组上运行 foreach`$result`以确保在插入之前它们都是正确的。

我想知道是否有更好的方法来做到这一点？最好没有`$result`阵列步骤。

我还想指出，该`$values`数组无法编辑，因为它将被多次使用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T09:28:41.113

您可以根据要求逐一检查值，保留布尔值并在值不满足要求时中断。像这样的东西：

```
$res = true;
foreach ($requirements as $k => $v) {
    $res = $res && ($values[$k] => $v);

    if (!$res) break;
} 
```

最后，您可以检查`$res`以决定是否必须执行查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T09:29:12.027

您可以`array_walk`对每个数组元素使用并执行回调。使用 userdata 参数来比较需求，然后在值无效的地方设置 false。当您循环时，您只需要检查该值是否为假。回到我的电脑后，我将编辑以添加代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T09:35:17.410

好的，这是我在评论中谈到的繁琐代码*示例*（注意：不要将它放在您的生产代码中：D）

```
 $req = array(
     'name1' => 1000,
     'name2' => 2000,
     'name3' => 3000
  );

  $vals = array(
     'name1' => 4552,
     'name2' => 324,
     'name3' => 1718
  );

  $sql = "INSERT INTO `the_table`(`key`,`val`) VALUES";

  $sql .= implode(',', array_map(function ($map_val)
  {
     return "(`$map_val`, 1)";
  }, array_filter(array_keys($vals), function ($key)
  {
     global $req, $vals;
     return isset($req[$key]) && $req[$key] >= $vals[$key];
  })));

  var_dump($sql); 
```

## 输出

```
string 'INSERT INTO `the_table`(`key`,`val`) VALUES(`name2`, 1),(`name3`, 1)' (length=68) 
```

# java - PBE 相对于 DES、3DES 和 AES 的优势

> ID：16129562
> 
> 赞同：3
> 
> 时间：2013-04-21T09:05:30.600
> 
> 标签：java, encryption

除了 DES、3DES 和 AES 加密技术之外，我还实现了 PBE。我需要 PBE 相对于其他三个的一些优势。当我在互联网上搜索时，我只发现缺点。帮我弄清楚使用 PBE 的一些优势？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-21T09:29:14.950

如果我理解您使用的术语，PBE 表示基于密码或密码短语的加密。

根据我看到的消息来源，PBE 是一种“使用”某种加密算法的方式。您无需生成随机密钥，而是使用用户提供的密码或密码短语并将其转换为加密系统所需形式的密钥（使用“密钥派生函数”）。以下是一些参考资料：

*   [基于密码的加密在技术上是如何工作的？](https://stackoverflow.com/questions/4081403/how-does-password-based-encryption-technically-work)
*   [Java 256 位 AES 基于密码的加密](https://stackoverflow.com/questions/992019/java-256-bit-aes-password-based-encryption)
*   [基于密码的加密。](http://www.javamex.com/tutorials/cryptography/pbe_key_derivation.shtml)
*   [使用密码用 DES 加密/解密](http://examples.javacodegeeks.com/core-java/crypto/encrypt-decrypt-with-des-using-pass-phrase/)。

换句话说，如果你比较 PBE 和 DES 或 AES，你就是在比较苹果和橘子。

所以你在这里真正谈论的是比较 PBE 和使用随机密钥。PBE的优势：

*   密码或密码短语比随机密钥更容易记住。（实际上，随机密钥通常非常难以记忆，以至于普通人需要将它们放入“密钥环”或其他东西中......然后使用密码或密码短语进行保护！）

缺点包括：

*   密码或密码短语可能是可猜测的。
*   未加盐的密码或密码短语可能容易受到使用“彩虹表”的攻击。

# java - 查找具有特定距离的第一个元素

> ID：16129563
> 
> 赞同：0
> 
> 时间：2013-04-21T09:05:37.850
> 
> 标签：java, recursion, tree, kdtree

我正在尝试编写一个方法，它将返回最接近 3D 空间中另一个点的点的索引。这些点存储在 KD 树中，我将它们与点 p 进行比较，点 p 是我的方法的一个参数。这是方法：

```
public int NearestPointWithDistance(KDnnTreeNode node, Point p, Double distance){
  int index = -1;
  if(node == null){
     return -1;
  }else{
      double[] point_coordinates = data[node.eltIndex];
      Point q = new Point(point_coordinates[0],point_coordinates[1], point_coordinates[2]);
      if(KDnnTree.distance(p, q) == distance){
             return index;
      }  

      if(node.left != null){
          final int left_child = NearestPointWithDistance(node.left, p, distance);
      }
      if(node.right != null){
          final int right_child = NearestPointWithDistance(node.right, p, distance);
        }
    }
  return index; 
```

}

问题是，可能有多个点具有相同的距离。我得到的结果是一个点索引列表（见下文），但我只想要列表的第一个元素（在下面的示例中，这将是数字 54510）。

```
54510
54511
54512
54514
54518
54526
54543
54577
65355
76175
54482
54416
54278
21929
54001
74323 
```

我知道这不是在 KD 树中搜索两个关闭点的方法，但我想先尝试这种方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T09:56:08.180

不要`java.lang.Double`用作论据。使用`double`.

原因是如果你`KDNTree.distance()`也返回`Double`，你最终会比较对象的引用，而不是它们的值。

你有非常不方便的 API。无论如何，制作一个辅助函数：

```
public Point getNodePoint(Node node)
{
    double[] point_coordinates = data[node.eltIndex];
    return new Point(point_coordinates[0],point_coordinates[1], point_coordinates[2]);
} 
```

使用可用的最佳距离选择：

```
double result = KDnnTree.distance(p, q);
if (result == distance)
{
   return node.eltIndex;
}
index = node.eltIndex; // assume given node is best
if (node.left !=  null)
{
    final int left_child = NearestPointWithDistance(node.left, p, distance);
    double left_distance = KDnnTree.distance(p, getNodePoint(left_child);

    if (Math.abs(distance - result) > Math.abs(distance - left_distance))
    {
        // result given is closer to wanted point
        result = left_distance;
        index = left_child;
    }
}
if (node.right !=  null)
{
    final int right_child = NearestPointWithDistance(node.right, p, distance);
    double right_distance = KDnnTree.distance(p, getNodePoint(right_child);

    if (Math.abs(distance - result) > Math.abs(distance - right_distance))
    {
        // result given is closer to wanted point
        result = right_distance;
        index = right_child;
    }
}
return index; 
```

# oauth - 没有消费者服务的 OAUTH 1.0a

> ID：16129567
> 
> 赞同：0
> 
> 时间：2013-04-21T09:06:29.230
> 
> 标签：oauth, dropbox-api

我想创建一个在 Dropbox 上存储数据的 android 应用程序。不涉及其他服务。只有安卓应用程序和保管箱。

Dropbox API 是否支持此用例？我的理解是 oauth 需要将访问令牌返回到消费者 url，这对我的用例不可用？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T14:43:50.350

获取请求令牌后，您需要让用户访问 Dropbox 授权 url，然后在他们授权您的应用程序后返回您的应用程序并通知您。例如，您对用户的指示可能是：

> 请打开浏览器到 [https://dropbox.com/1/oauth/authorize?oauth_token=mADeuPReq35Tt0Ken](https://dropbox.com/1/oauth/authorize?oauth_token=mADeuPReq35Tt0Ken) 并按允许按钮。然后返回此应用程序并按下面的输入按钮。

显然，将 mDeuPReq35Tt0Ken 替换为您从 Dropbox 请求令牌 url 获得的请求令牌。

通过省略 oauth_callback 参数，Dropbox 不会在用户授权您的应用后将用户重定向到任何地方。一旦用户告诉您的应用程序已获得授权（通过按上述示例中的应用程序中的按钮或类似的方式），您就可以通过调用 Dropbox 访问令牌端点继续获取访问令牌和访问令牌秘密使用您最初获得的 request_token 和 request_token_secret 的签名请求。

详细信息可以在[这里](https://www.dropbox.com/developers/core/api#access-token)找到。

# oracle - SQL*Plus 用户输入异常处理

> ID：16129569
> 
> 赞同：2
> 
> 时间：2013-04-21T09:06:44.487
> 
> 标签：oracle, plsql, oracle11g, sqlplus

我有一个简单的问题。我在代码中声明了两个变量：

```
v_n NUMBER(3) := &sv_n;
v_m NUMBER(3) := &sv_m; 
```

如何防止用户输入不是数字符号？并引发异常，或类似的事情。

我试图找到这样的例子，但没有运气。我还尝试编写一个代码来检测输入是否为数字，但问题是，如果我的输入是例如“a”或“acas”或来自字母的其他符号，则会引发此错误

```
Error report:
ORA-06550: line 4, column 20:
PLS-00201: identifier 'A' must be declared
ORA-06550: line 4, column 7:
PL/SQL: Item ignored 
```

而且我什至无法检查输入是否为数字。

有什么解决方案或建议吗？如果我能处理这个错误并引发自定义异常，那就太好了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T11:50:02.333

一种选择是定义 SQL*Plus 脚本以接受字符串而不是数字，然后定义一个尝试将输入转换为数字的函数。如果你声明一个函数`my_to_number`

```
SQL> ed
Wrote file afiedt.buf

  1  create or replace function my_to_number( p_str in varchar2 )
  2    return number
  3  is
  4    l_num number;
  5  begin
  6    l_num := to_number( p_str );
  7    return l_num;
  8  exception
  9    when others
 10    then
 11      raise_application_error( -20001, p_str || ' is not a number' );
 12* end;
SQL> /

Function created. 
```

然后您的 SQL*Plus 脚本可能看起来像这样。如果用户输入了一个有效的数字，脚本就会按预期工作。如果不是，则会引发函数中定义的自定义错误。

```
SQL> declare
  2    v_n number(3) := my_to_number( '&sv_n' );
  3  begin
  4    dbms_output.put_line( 'The number is ' || v_n );
  5  end;
  6  /
Enter value for sv_n: 123
old   2:   v_n number(3) := my_to_number( '&sv_n' );
new   2:   v_n number(3) := my_to_number( '123' );
The number is 123

PL/SQL procedure successfully completed.

SQL> ed
Wrote file afiedt.buf

  1  declare
  2    v_n number(3) := my_to_number( '&sv_n' );
  3  begin
  4    dbms_output.put_line( 'The number is ' || v_n );
  5* end;
SQL> /
Enter value for sv_n: abc
old   2:   v_n number(3) := my_to_number( '&sv_n' );
new   2:   v_n number(3) := my_to_number( 'abc' );
declare
*
ERROR at line 1:
ORA-20001: abc is not a number
ORA-06512: at "SCOTT.MY_TO_NUMBER", line 11
ORA-06512: at line 2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-27T12:20:29.800

`ACCEPT`效果很好，无需创建存储对象。

```
20:19:22 SYSTEM@sandbox> get s:\test\123.sql
  1   accept n number prompt "enter number value: "
  2   declare
  3    myVar number := &n.;
  4   begin
  5    dbms_output.put_line(myVar);
  6*  end;
20:19:30 SYSTEM@sandbox> @s:\test\123.sql
enter number value: adsfadsf
SP2-0425: "adsfadsf" is not a valid NUMBER
enter number value: 12341324
12341324

PL/SQL procedure successfully completed.

Elapsed: 00:00:00.01 
```

# c# - 异步 WCF 调用未在 Windows Phone 7 中触发

> ID：16129572
> 
> 赞同：0
> 
> 时间：2013-04-21T09:07:28.677
> 
> 标签：c#, windows, windows-phone-7.1, windows-phone, wcf-data-services

基本上，我在我的手机应用程序中使用 WCF 调用来检索密码，但是当我想要它时它不会触发，而且我不确定在哪里拨打电话。

本质上，我希望应用程序像这样调用代码

```
 Client.GetPassWordByNameAsync(user);
        Client.GetPassWordByNameCompleted += new EventHandler<GetPassWordByNameCompletedEventArgs>(Client_GetPassWordByNameCompleted);

        if(EnteredPassword == password)
        {
            isAuthenticated = true;
        } 
```

当用户按下登录按钮时，它应该调用服务，获取密码并进行比较，但是它只是跳过代码并返回 null。

这是完成的方法

```
 void Client_GetPassWordByNameCompleted(object sender, GetPassWordByNameCompletedEventArgs e)
        {
            if (e.Error == null)
            {

            }
            else
            {
                password = e.Result;
            }
        } 
```

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T12:34:33.033

查看您的代码，我看到，一方面，您在调用该方法后订阅了 GetPassWordByNameCompleted 事件。另一方面，您不必等到收到响应后才比较返回值。以下代码应该可以工作：

```
Client.GetPassWordByNameCompleted += ((s, e) =>
{
    if (e.Error == null)
    {

    }
    else
    {
        password = e.Result;
        if(EnteredPassword == password)
        {
                isAuthenticated = true;
        }
    }
});
Client.GetPassWordByNameAsync(user); 
```

或者，如果您希望使用不同的方法使用事件处理程序，请首先订阅该事件：

```
 Client.GetPassWordByNameCompleted += new EventHandler<GetPassWordByNameCompletedEventArgs>(Client_GetPassWordByNameCompleted);
    Client.GetPassWordByNameAsync(user); 
```

一旦你得到它，就可以对结果做任何你想做的事情：

```
void Client_GetPassWordByNameCompleted(object sender, GetPassWordByNameCompletedEventArgs e)
{
    if (e.Error == null)
    {

    }
    else
    {
        password = e.Result;
        if(EnteredPassword == password)
        {
            isAuthenticated = true;
        }
    }
} 
```

# testing - 等价分区，这是书中不正确的例子吗？

> ID：16129577
> 
> 赞同：0
> 
> 时间：2013-04-21T09:07:46.320
> 
> 标签：testing, equivalence-classes

我试图理解这个主题并从非常基本的主题（不是离散域）开始，我认为这是不正确的。

我还不能发布图片，所以描述是这样的：

```
Income is greater than 0 and lesser than 500 = tax 0  
Income is greater than 500 and lesser than 1300 = tax 30  
Income is greater than 1300 and lesser than 5000 = tax 40 
```

他们为负数定义了无效类，对 0-500 和 500 到 1300 有效，对 1300 到 5000 定义无效。
我认为这是一个错误，无效类以 5000 为界并趋于无穷大。我对么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T11:51:09.110

正如你提到的，我很确定有一个错误。有 3 个有效输入类别和两个无效输入类别超出范围，即低于 0 或高于 5 000。

# authentication - 如何将 JSON Web 令牌传输到客户端应用程序？

> ID：16129578
> 
> 赞同：0
> 
> 时间：2013-04-21T09:07:53.127
> 
> 标签：authentication, federated-identity, jwt

假设我有一个需要对用户进行身份验证的 Web 应用程序。它不是自己做，而是将用户重定向到专用的身份验证服务。

在那里，用户登录，并创建一个 JSON Web 令牌 (JWT)，其中包含用户的声明。

现在 - 我如何将 JWT 发送回客户端应用程序？

基本上，我可以再次进行重定向，但是我需要将 JWT 放入 url，并且我想避免这种情况（我想让有权访问浏览器的每个人都可以看到 url 中的令牌并不是最好的主意历史）。

我还能/应该做什么？

我可以想象`POST`回到原始服务器并将 JWT 发送到正文中。然后它将被隐藏，并且原始服务器无论如何都可以访问令牌。

还有其他想法或建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T09:28:30.190

OAuth、CAS、SAML 和 OpenID 是一些解决这种情况的协议。通常很容易部署实现这些的库。

大多数建议将重新实现这些流程:)

Google 的 OAuth2 身份验证指南中的“服务器流程”部分是 3 个实体（浏览器、网站、身份验证器）如何交换令牌的示例：

[https://developers.google.com/accounts/docs/OAuth2Login](https://developers.google.com/accounts/docs/OAuth2Login)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-12-22T00:18:30.900

有几种方法可以做到这一点，具体取决于您拥有的 web 应用程序类型：基于浏览器（javascript）的一种或基于服务器（php、asp 等）的一种。幸运的是，这些问题已经有了深思熟虑的解决方案。对于用户身份验证，请检查 OpenId Connect 规范。它将为您提供问题的确切解决方案。

# web-services - 如何从 Equinox OSGi 应用程序公开和使用 Web 服务？

> ID：16129590
> 
> 赞同：2
> 
> 时间：2013-04-21T09:10:59.470
> 
> 标签：web-services, osgi, cxf, equinox, dosgi

我需要开发一个具有清晰的后端前端分离的 OSGi 应用程序，希望使用 JAX-WS 完成。谷歌结果指向支持 JAX-WS的[Apache-CXF 。](http://cxf.apache.org/)应用程序的后端和前端将在两个具有独立 Equinox OSGi 容器的 JVM 中运行。是否有将 Apache-CXF 与 Equinox 集成的标准方法？这是否也需要嵌入 Equinox 中的 Tomcat 或 Jetty 之类的 servlet 容器？还是有更方便的行之有效的方法来做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-21T14:53:06.283

在 OSGi 中使用 CXF 的最简单且经过验证的最佳方法是使用 Apache Karaf。它是一个基于 Equinox 或 Felix 的 OSGi 服务器，并针对与多个 Apache 框架（如 CXF、Camel、ActiveMQ）的集成进行了优化。

如果你想使用普通的 Equinox，那么上面提到的 DOSGi 发行版是一个很好的起点。它包含运行基于 CXF 的分布式 OSGi 所需的所有包。这意味着它也适用于大多数 CXF JA-XWS 用例。

另一方面，在 Karaf 中，您可以更好地集成所有 CXF 模块。它也经过了更好的测试，因为它用于 Servicemix 和几个商业解决方案，例如来自我工作的 Redhat 和 Talend。

对于您的特殊情况，分布式 OSGi 本身也可能是一个很好的选择。这意味着您不直接提供/消费CXF服务。相反，您发布和使用 OSGi 服务，而 CXF 负责远程处理。

我编写了一个教程系列，展示了如何将 CXF 与 Apache karaf 一起使用：

*   [阿帕奇卡拉夫和 CXF](http://www.liquid-reality.de/display/liquid/2011/12/22/Karaf+Tutorial+Part+4+-+CXF+Services+in+OSGi)
*   [Apache Karaf 和分布式 OSGi](http://www.liquid-reality.de/display/liquid/2013/02/13/Apache+Karaf+Tutorial+Part+8+-+Distributed+OSGi)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-21T09:50:29.583

有一个 CXF 子项目[DOSGi](http://cxf.apache.org/distributed-osgi.html)，它集成了 CXF 和 OSGi

# android - 无法使用 Jsoup android 连接到网站

> ID：16129591
> 
> 赞同：0
> 
> 时间：2013-04-21T09:11:02.243
> 
> 标签：android, web, jsoup

我是 android 新手，我正在尝试使用 jsoup 从网站获取数据，但是当我执行 get() 方法时没有任何反应。这是我的代码：

```
static final String BLOG_URL = "http://xjaphx.wordpress.com/";

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_html_parser);
    // Show the Up button in the action bar.
    setupActionBar();

      // process
    new DownloadFilesTask().execute();
} 
```

私有类 DownloadFilesTask 扩展 AsyncTask {

```
 String result = "";
    @Override
    protected String doInBackground(Void... params) {

            // get html document structure
            Document document=null;
            try {
                document = Jsoup.connect(BLOG_URL).get();

            // selector query
            Elements nodeBlogStats = document.select("div#blog-stats ul li");
            // check results
            if(nodeBlogStats.size() > 0) {
                // get value
                result = nodeBlogStats.get(0).text();
            }
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            // return

            return null;
    }

    protected void onPostExecute()
     {

    TextView article = (TextView)findViewById(R.id.textView1);

    article.setText(result); 
```

}

```
} 
```

这是我的 LogCat 日志：

```
04-21 12:13:24.458: W/System.err(4501): java.net.UnknownHostException: xjaphx.wordpress.com
04-21 12:13:24.458: W/System.err(4501):     at java.net.InetAddress.lookupHostByName(InetAddress.java:506)
04-21 12:13:24.458: W/System.err(4501):     at java.net.InetAddress.getAllByNameImpl(InetAddress.java:294)
04-21 12:13:24.458: W/System.err(4501):     at java.net.InetAddress.getAllByName(InetAddress.java:256)
04-21 12:13:24.458: W/System.err(4501):     at org.apache.harmony.luni.internal.net.www.protocol.http.HttpConnection.<init>(HttpConnection.java:69)
04-21 12:13:24.458: W/System.err(4501):     at org.apache.harmony.luni.internal.net.www.protocol.http.HttpConnection.<init>(HttpConnection.java:48)
04-21 12:13:24.458: W/System.err(4501):     at org.apache.harmony.luni.internal.net.www.protocol.http.HttpConnection$Address.connect(HttpConnection.java:322)
04-21 12:13:24.458: W/System.err(4501):     at org.apache.harmony.luni.internal.net.www.protocol.http.HttpConnectionPool.get(HttpConnectionPool.java:89)
04-21 12:13:24.458: W/System.err(4501):     at org.apache.harmony.luni.internal.net.www.protocol.http.HttpURLConnectionImpl.getHttpConnection(HttpURLConnectionImpl.java:285)
04-21 12:13:24.458: W/System.err(4501):     at org.apache.harmony.luni.internal.net.www.protocol.http.HttpURLConnectionImpl.makeConnection(HttpURLConnectionImpl.java:267)
04-21 12:13:24.458: W/System.err(4501):     at org.apache.harmony.luni.internal.net.www.protocol.http.HttpURLConnectionImpl.connect(HttpURLConnectionImpl.java:205)
04-21 12:13:24.458: W/System.err(4501):     at org.jsoup.helper.HttpConnection$Response.execute(HttpConnection.java:425)
04-21 12:13:24.458: W/System.err(4501):     at org.jsoup.helper.HttpConnection$Response.execute(HttpConnection.java:410)
04-21 12:13:24.458: W/System.err(4501):     at org.jsoup.helper.HttpConnection.execute(HttpConnection.java:164)
04-21 12:13:24.458: W/System.err(4501):     at org.jsoup.helper.HttpConnection.get(HttpConnection.java:153)
04-21 12:13:24.458: W/System.err(4501):     at pdm.ebudget.HtmlParser$DownloadFilesTask.doInBackground(HtmlParser.java:158)
04-21 12:13:24.458: W/System.err(4501):     at pdm.ebudget.HtmlParser$DownloadFilesTask.doInBackground(HtmlParser.java:1)
04-21 12:13:24.468: D/KeyguardViewMediator(1484): setHidden false
04-21 12:13:24.468: W/System.err(4501):     at android.os.AsyncTask$2.call(AsyncTask.java:185)
04-21 12:13:24.478: W/System.err(4501):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:306)
04-21 12:13:24.478: W/System.err(4501):     at java.util.concurrent.FutureTask.run(FutureTask.java:138)
04-21 12:13:24.478: W/System.err(4501):     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1088)
04-21 12:13:24.478: W/System.err(4501):     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:581)
04-21 12:13:24.478: W/System.err(4501):     at java.lang.Thread.run(Thread.java:1019) 
```

我在清单中加入了 Internet 访问行：

```
 <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
    <uses-permission android:name="android.permission.INTERNET" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T09:37:56.050

我的错，我的安卓终端上没有互联网连接^^，对不起！

# css - 盒子不浮动

> ID：16129596
> 
> 赞同：0
> 
> 时间：2013-04-21T09:11:39.997
> 
> 标签：css, css-float

看过，但没有找到合适的答案。

我的问题很简单：试图漂浮，但没有成功。

这是页面：[http ://www.linguashop.com/course/classic.php](http://www.linguashop.com/course/classic.php)

左边的红色框应该向左浮动，灰色框和菜单出现在右边。

![在此处输入图像描述](https://i.stack.imgur.com/ixNQJ.jpg)

我正在使用的 CSS 如下：

```
.logo2013,      
.logo2013 a     {margin:0;width:220px;height:120px;}

.logo2013   {float:left;}

.logo2013   {border:1px solid #f00; border-top-left-radius: 10px; }

.logo2013 a     {display:block;text-indent:-9999px;}

.greybanner2013 {height:91px; line-height:1; background:#f7f6f2 left top;}  
.greybanner2013 {border:1px solid #ddd; border-top-right-radius: 10px;}

.greybanner2013 .fontsize32 h2 {padding-top:5px; font-size:32px;color:#777;font-weight:bold; margin:0; margin-left: 20px; }

.greybanner2013 .foreign {font-size:32px;color:#FF9300;font-weight:bold; display:inline; margin:0; margin-left: 20px; padding:0; }

.greybanner2013 .translation {font-size:28px;color:#AAA;font-weight:normal; display:inline; margin-left:  10px; }

/*menu*/

.nav2013 {height:28px; background-color:#787065; border:1px solid #ccc; }

.nav2013 ul {/*float:right;*/ list-style:none;margin:4px 0;padding:0}

.nav2013 li {float:left;padding:0 24px 0 22px;margin:0; right top no-repeat*/}

.nav2013 li a {font-family:Verdana,Arial,SunSans-Regular,Sans-Serif; display:block;color:#ebeae8;text-decoration:none;font-size:12px; font-weight:bold; }

.nav2013 li:last-child {padding-right:15px;background:none} 
```

任何见解将不胜感激！

大卫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T09:19:22.180

这就是我所看到的 ![在此处输入图像描述](https://i.stack.imgur.com/HD1ev.png)

如果您想将红色框一直浮动到左侧；

然后`logo2013`直接在下添加`banner2013`

它会创建这个

![在此处输入图像描述](https://i.stack.imgur.com/13CCD.png)

**更新**

我认为你的问题是左上角的边界半径。这应该解决它。

将此添加到`.greybanner2013`

`border-top-left-radius:10px;`

您放在那里的具有类似边界半径的徽标可以覆盖那里的灰色区域。要真正将红色框向左浮动并向右休息，同时将它们保持在屏幕中间需要更多的工作，并且可能需要对 html 和 css 进行相当多的更改。

`logo2013`您可以将类的背景颜色设置为`white`，这也会产生类似的效果。

# c# - 我怎样才能创建这个关于这个条件的正则表达式

> ID：16129599
> 
> 赞同：1
> 
> 时间：2013-04-21T09:12:25.500
> 
> 标签：c#, regex, expression

我想通过正则表达式做到这一点：示例： **父亲**今天去拜访他的祖父和他的**父亲**。

如何通过正则表达式选择粗体的两个父亲？多谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T09:33:29.810

我不确定为什么你需要正则表达式，因为你可以简单地“选择”你想要的字符串：

```
String myStr = "father"; 
```

或者，如果您需要替换字符串中的子字符串，您可以执行以下操作：

```
String myStr = "father goes visit his grandfather and and his father today."
myStr = myStr.Replace(" father ", " someOtherString "); 
```

但是，如果你*真的*想使用 RegEx，你可以`MatchCollection`这样做：

```
String myStr = "father goes visit his grandfather and and his father today."
Regex.Mathces(myStr, "\bfather\b"); 
```

这不是一个非常有趣的正则表达式，因为它只是一个明确的字符串文字。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T09:35:30.320

尝试这个

```
var matchs=Regex.matches("father goes visit his grandfather and and his father today.",@"\bfather\b"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-21T10:02:19.220

```
var matchCollection = Regex.Matches("father goes visit his grandfather and and his father today.", "\bfather\b");

foreach (Match m in matchCollection)
{
     // Process your code for each match
} 
```

# parsing - Bison 为每个新文件重置行号

> ID：16129605
> 
> 赞同：1
> 
> 时间：2013-04-21T09:13:15.397
> 
> 标签：parsing, bison, flex-lexer

我有一个使用`GNU bison`and的简单解析器实现`flex`。它工作正常，我可以从命令行解析多个文件

```
./program file1.m file2.m 
```

我以相反的顺序加载文件（这并不重要）。

但是问题是我得到的行号（假设 中存在语法错误`file1.m`）将是中`file1`的行数加上中的行数`file2`。

所以野牛不会在每个文件之后重置行号。怎样才能做到这一点？我用谷歌搜索了一下，发现了`yy_flush_buffer`，但我不确定如何使用它，或者它是否真的是我需要的。

有谁知道如何做到这一点？先感谢您。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T11:14:18.380

行号由`flex`变量中生成的代码维护`yylineno`。这些行号是以一种或另一种方式传递给从`bison`. 可能有其他方法可以重置行号，但老派方法是在调用新文件之前将变量设置`yylineno`为。您将不得不使用let将行号保持在轻微的性能损失，但您可能已经这样做了。`1``yyparse``%option yylineno``flex`

# list - 平方列表列表 - ocaml

> ID：16129606
> 
> 赞同：1
> 
> 时间：2013-04-21T09:13:24.617
> 
> 标签：list, ocaml

我知道如何对列表的元素进行平方，但是如何在列表中平方？

要平方列表的元素，我可以使用，例如：

```
List.map (fun x -> x*x) [1; 2; 3];; 
```

如何在列表列表中执行此操作？

```
[[1; 2]; [2; 3]]  --> [[1; 4]; [4; 9]] 
```

或者

```
[[1; 2; 3]; [4; 2; 0]] --> [[1; 4; 9]; [16; 4; 0]] 
```

例如。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-21T10:21:39.347

```
let square = fun x -> x * x;;
(* val square : int -> int = <fun> *)

List.map square;;
(* - : int list -> int list = <fun> *)

List.map (List.map square);;
(* - : int list list -> int list list = <fun> *)

List.map (List.map (fun x -> x*x)) [[1; 2]; [2; 3]];;
(* - : int list list = [[1; 4]; [4; 9]] *) 
```

# fonts - 如何在phpstorm中设置类名和方法的字体

> ID：16129608
> 
> 赞同：0
> 
> 时间：2013-04-21T09:13:31.533
> 
> 标签：fonts, phpstorm

我想将类名和类方法的字体设置为粗体。仅适用于任何语言的这两项。但似乎每种语言特定的类名都是从“标识符”项继承的，而不是从“语言默认值”类名继承的。因此，它将类名和许多其他标识符设置为粗体。另一方面，我不知道是否可以覆盖每个项目的字体功能。到目前为止我做不到。

我只是尝试制作与默认情况下在 NetBeans 中相同的颜色和字体

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T18:40:14.057

目前的 PhpStorm 版本中缺少此功能，您可以[为它投票](http://youtrack.jetbrains.com/issue/WI-137)。

# c# - 有 System.Net 和没有 System.Net 的区别

> ID：16129612
> 
> 赞同：2
> 
> 时间：2013-04-21T09:14:03.890
> 
> 标签：c#, system.net

像这样添加有什么区别`System.Net`：

```
 CookieContainer globalcontainer = new System.Net.CookieContainer(); 
```

并在声明中使用没有命名空间的类

```
 CookieContainer globalcontainer = new CookieContainer(); 
```

哪个效率更高？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-21T09:20:13.917

两者都不是更有效，一个是显式指定名称空间，另一个是隐式指定。

在 .cs 文件的顶部，using 指令导入命名空间，这意味着这些命名空间中的类型不需要在代码中识别完全限定的路径

例如

`List<T>`出现在`System.Collections.Generic`... 没有此命名空间的 using 指令，您必须使用完全限定名称：

```
System.Collections.Generic.List<int> someList; 
```

而有了它，你不会

```
using System.Collections.Generic;

List<int> someList; 
```

有时可能会出现命名空间冲突 - 想象以下场景：

```
Some.Namespace.Task
Some.Othernamespace.Task 
```

如果您导入两个命名空间：

```
using Some.Namespace;
using Some.Othernamespace;

Task someTask; // <--- this line will cause a compile time error 
```

编译器不知道`Task`您想要哪个，来自 Some.Namespace 或来自 Some.Othernamespace 的那个 - 在这种情况下，您需要具体并提供完整的命名空间（或使用别名）

希望这可以帮助

在此处阅读有关命名空间的所有信息：

[http://msdn.microsoft.com/en-gb/library/z2kcy19k(v=vs.80).aspx](http://msdn.microsoft.com/en-gb/library/z2kcy19k(v=vs.80).aspx)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-21T09:22:47.680

在运行时，两者通常是相同的。

为了可读性，我通常不喜欢在同一个语句中使用命名空间（把它放在`using`文件顶部的指令中），因为它通常可以节省空间，让我的行不会太长，这无疑是一个小好处。

这些是我确实包含命名空间的时候：

*   当我知道类名可能会被误解时，有时 .NET 中的不同命名空间中使用了类型，我希望代码的读者能够更快地理解我的意思

*   当它是来自此命名空间的唯一调用时，有时我会明确包含命名空间。

*   如果我要导入多个包含相同类型的命名空间。这个很明显。

因此，无论这听起来是好是坏，答案都是“视情况而定”。无论什么使代码在更短的时间内更具可读性，都是赢家。

> [http://gurustop.net](http://gurustop.net)

# ruby-on-rails - Rails RSpec MHart 的教程用户删除链接

> ID：16129613
> 
> 赞同：0
> 
> 时间：2013-04-21T09:14:22.727
> 
> 标签：ruby-on-rails, rspec, specifications

我一直在阅读 M.Hart 的 Rails 教程。在其中一个部分中，您为每个不属于您自己的用户在用户索引页面上实现删除链接；假设您是管理员用户。我还想在每个用户的个人资料页面中实现一个删除链接。我将删除链接代码放入部分中，它在索引页面和单个用户显示页面上运行良好，但在将部分添加到显示页面代码后，我仍然遇到 RSpec 失败。我的代码在下面......顺便说一句 - 主用户与管理员用户相同。

用户/show.html.erb

```
<section>
    <%= gravatar_for @user %>
    <h3><%= @user.name %></h3>
    <div id="profile_delete_link"><%= render 'shared/user_delete_link', user: @user %></div>
</section> 
```

共享/user_delete_link（部分 -> _user/delete/link.html.erb）

```
<% if !current_user?(user) && current_user.master? %>
    >> <%= link_to "delete", user, method: :delete, data: { confirm: "You sure?" } %>
<% end %> 
```

user_pages_spec.rb -> 下面的代码是如果将部分（以上）添加到用户/显示代码中的规范。当部分被删除时，这些规格会变回绿色

```
describe "profile page" do
let(:user) { FactoryGirl.create(:user, name: "foo bar") }

let!(:mp1) { FactoryGirl.create(:micropost, user: user, content: "Foo") }
let!(:mp2) { FactoryGirl.create(:micropost, user: user, content: "Bar") }

before { visit user_path(user) }

it { should have_selector('h3',    text: user.name) } 
it { should have_selector('title', content: "F.Bar") }

describe "microposts" do
  it { should have_content(mp1.content) }
  it { should have_content(mp2.content) }
  it { should have_content(user.microposts.count) }
end 
```

结尾

用户.rb

```
# == Schema Information
#
# Table name: users
#
#  id              :integer          primary key
#  name            :string(255)
#  email           :string(255)
#  password_digest :string(255)
#  created_at      :datetime
#  updated_at      :datetime
#  master          :boolean
#

class User < ActiveRecord::Base
has_secure_password 

email_regex = /^[_+a-z0-9-]+(\.[_a-z0-9-]+)*@[a-z0-9-]+(\.[a-z0-9-]+)*(\.[a-z]{2,4})$/i

attr_accessible :name, :email, :password, :password_confirmation
has_many :microposts, dependent: :destroy

    validates :name, :presence => true, :length => { within: 2..40 }
    validates :email, :presence => true, :uniqueness => { case_sensitive: false }, :format  => { with: email_regex }
    validates :password, :presence  => true, :length => { within: 5..50 }
    validates :password_confirmation, :presence => true

def feed
    Micropost.where("user_id = ?", id)
end
end 
```

user_controller.rb 显示和索引操作以及过滤器之前

```
before_filter :authorize,     only: [:index, :edit, :update, :destroy]
before_filter :correct_user,  only: [:edit, :update]
before_filter :master_user,   only: [:destroy]

def index
  @users = User.all
end

def show
  @user = User.find(params[:id])
  @microposts = @user.microposts.paginate(page: params[:page])
  @title = initials_of @user.name
end 
```

如果您希望我发布任何代码或添加更多信息，请让我知道:) 提前谢谢。

更新：RSpec 错误：

```
UserPages profile page microposts
 Failure/Error: before { visit user_path(user) }
 ActionView::Template::Error:
   undefined method `master?' for nil:NilClass
 # ./app/views/shared/_user_delete_link.html.erb:1:in `_app_views_shared__user_delete_link_html_erb__1484829579316662700_70204671481360'
 # ./app/views/users/show.html.erb:6:in `_app_views_users_show_html_erb___32313850444620306_70204671449340'
 # ./spec/features/user_pages_spec.rb:88:in `block (3 levels) in <top (required)>' 
```

会话助手：

```
module SessionsHelper
 ...........
    def current_user
        @current_user ||= User.find(session[:user_id]) if session[:user_id]
    end
 ...........
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T03:50:31.400

这个响应告诉你的是，当它调用 master 时？在 current_user 对象上，current_user 对象为 Nil，表示它不存在。

这意味着 @current_user 当前没有定义，并且 User.find 也没有找到用户。

您将@user 传递给您的部分，所以我认为您的条件应该基于@user。

希望这是有道理的

# model-view-controller - Joomla textarea 用 __（2 个下划线）替换换行符

> ID：16129616
> 
> 赞同：0
> 
> 时间：2013-04-21T09:14:37.360
> 
> 标签：model-view-controller, joomla, textarea, fieldset

祝大家有美好的一天，

我不完全是 Joomla 专家。在网上搜索了几个小时后，我决定在这里尝试一下。

我正在编写一个简单的 Joomla 组件。在视图部分，我有一个名为“信息”的视图。我希望在后端管理员可以添加一些文本。

这是 default.xml 的样子：

```
<?xml version="1.0" encoding="utf-8"?>
<metadata>
    <layout title="Informationform">
        <message>
            <![CDATA[Informationform]]>
        </message>
    </layout>

    <fields name="request">
        <fieldset name="request" label="Contactform Properties">
            <field name="templatename" type="text" label="E-mail-templatename"></field>
            <field name="extracss" type="textarea" rows="8" cols="40" filter="raw" label="Extra CSS"></field>
        </fieldset>
    </fields>
</metadata> 
```

在后端，我可以将联系表单添加为菜单项。在右侧，我可以编辑我的额外字段。在我在 textarea 中输入几行文本并保存菜单项之后。所有换行符都替换为 __（2 个下划线）。

原文：

```
This is an example 
text.
As you can see there 
are multiple lines. 
```

保存文本后：

```
This is an example__text.__As you can see there__are multiple lines. 
```

有谁知道如何解决这个问题？

# arduino - FT232 的 PyUSB 代码仅输出垃圾字符

> ID：16129617
> 
> 赞同：1
> 
> 时间：2013-04-21T09:14:37.430
> 
> 标签：arduino, pyusb

我正在为 Arduino 测试我的 PyUSB 代码，它使用 FT232 作为接口 IC。arduino mcu 只是在 9600 中打印出一些字符。

在努力解决它的文档之后，我可以让它工作。但是我只能从它的 EP 中读取一些垃圾字符。

```
import usb.core, usb.util

dev = usb.core.find(idVendor=0x0403, idProduct=0x6001)

if dev is None:
    raise ValueError("FT232 not found. Have U enable it in LibUSB filter driver?")

dev.ctrl_transfer(0x40, 0x00, 0, 0, '')
dev.ctrl_transfer(0x40, 0x01, 0, 0, '')
dev.ctrl_transfer(0x40, 0x02, 0, 0, '')
dev.ctrl_transfer(0x40, 0x03, 0x4138, 0, '') # libFTDI 9600 bps

cfg = dev.get_active_configuration()
intf = cfg[(0,0)]
ep = intf[0]

while True:
    dat = dev.read(ep.bEndpointAddress, 64, intf, 100)        
    if len(dat)>2:
        print ""
        print ': '+ ''.join([chr(c) for c in dat])[2:len(dat)]
        for i in range(2,len(dat)):
            print '%02X'%dat[i],
        print "" 
```

我不确定 dev.ctrl_transfer 部分，此代码从 libFTDI 声明。0x4138 用于将其设置为 9600bps。

我以前把这四个句子写成：dev.ctrl_transfer(0x40, 0x00, 0, 0, 0) dev.ctrl_transfer(0x40, 0x01, 0, 0, 0) dev.ctrl_transfer(0x40, 0x02, 0, 0, 0 ) dev.ctrl_transfer(0x40, 0x03, 0x4138, 0, 0) # libFTDI 9600bps

但我收到以下错误：

```
Traceback (most recent call last):
  File "C:\Downloads\SemiconDev\Freescale FRDM KL25Z\Software\libUsb\FT232_PyUSB.py", line 83, in <module>
    dev.ctrl_transfer(0x40, 0x00, 0, 0, 0)
  File "C:\Python25\Lib\site-packages\usb\core.py", line 693, in ctrl_transfer
    a = _interop.as_array(data_or_wLength)
  File "C:\Python25\Lib\site-packages\usb\_interop.py", line 135, in as_array
    a.fromstring(data)
TypeError: fromstring() argument 1 must be string or read-only buffer, not int 
```

我仍在寻找 ctrl_transfer() 的正确设置。

# java - java中有两种创建对象的方法吗？

> ID：16129620
> 
> 赞同：1
> 
> 时间：2013-04-21T09:14:57.853
> 
> 标签：java, class, object, initialization

和有什么区别

```
ClassABC objectName = new ClassABC(); 
```

和

```
ClassABC objectName = differentVariable.methodReturnsClassABCTypeValue(); 
```

第二个例子仍然像第一个例子一样启动吗？如果不是，这两种“初始化”有什么区别？

如果这令人困惑，我将给出第二个使用另一个 Java 类的示例。

```
Toolkit toolKitObject = Toolkit.getDefaultToolkit();
Dimension screenSize = new Dimension(); 
```

和

```
Toolkit toolKitObject = Toolkit.getDefaultToolkit();
Dimension screenSize = toolKitObject.getScreenSize(); 
```

请注意，在第一个示例中，我如何创建 Dimension 对象并且没有为其设置任何值。但在第二个示例中，我从未使用过， `new Dimension();`我立即继续执行`toolKitObject.getScreenSize();`

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-21T09:18:18.503

在java中创建对象有[不同的方法：](http://javabeanz.wordpress.com/2007/09/13/different-ways-to-create-objects/)

A. 使用 new 关键字 这是在 java 中创建对象最常用的方法。几乎 99% 的对象都是以这种方式创建的。

```
MyObject object = new MyObject(); 
```

B. 使用 Class.forName() 如果我们知道类的名称并且如果它有一个公共的默认构造函数，我们可以用这种方式创建一个对象。

```
MyObject object = (MyObject) Class.forName("subin.rnd.MyObject").newInstance(); 
```

C. 使用 clone() clone() 可用于创建现有对象的副本。

```
MyObject anotherObject = new MyObject();
MyObject object = anotherObject.clone(); 
```

D. 使用对象反序列化对象反序列化只不过是从其序列化形式创建一个对象。

```
ObjectInputStream inStream = new ObjectInputStream(anInputStream );
MyObject object = (MyObject) inStream.readObject(); 
```

E. 以另一种方式使用反射。

```
this.getClass().getClassLoader().loadClass(“com.abc.myobject”).newInstance(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-21T09:30:52.950

我喜欢 Achintya 的答案，但我觉得答案比问题要先进得多。

在 java 中，变量（不包括原始类型，例如整数）*引用*内存中的对象。

因此，下面的代码片段只创建了一个被两个不同变量引用的对象：

```
Object a = new Object();
Object b = a; 
```

您的示例中也发生了同样的事情，尽管方式更为隐蔽。

以下代码段创建一个`Toolkit`对象。除其他外，该对象包含一个`Dimension`对象。第二行只是创建对那个已经存在的对象的引用。

```
Toolkit toolKitObject = Toolkit.getDefaultToolkit();
Dimension screenSize = toolKitObject.getScreenSize(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-21T09:37:32.537

您的两个示例最终都使用了`new`运算符。

```
Dimension screenSize = toolKitObject.getScreenSize(); 
```

`getScreenSize`这是您在上述行中调用的源代码：

```
// implementation as per SunToolkit.class
public Dimension getScreenSize() {
    return new Dimension(getScreenWidth(), getScreenHeight());
} 
```

你会看到在幕后，它仍然在调用 a `new Dimension`（需要高度和宽度的重载版本）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-21T09:18:09.603

没有。！！

第二个不创建对象。它获取从另一个方法创建的对象。如果该方法创建了一个新对象，那就没问题了。如果该方法使用现有方法，则不会。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-22T05:33:24.037

在下线

```
ClassABC objectName = new ClassABC(); 
```

它在堆上创建新实例并在堆栈上创建新引用，并将这个新对象引用分配给创建的新引用。. 因此，使用此代码，我们肯定会在堆上获取新对象。所以在上面的行之后 objectName 肯定永远不会为空。

但是有了这个

```
ClassABC objectName = differentVariable.methodReturnsClassABCTypeValue() 
```

我们只在堆栈上创建新的引用。并将其指向堆上可能在方法内部创建/引用的现有对象。

所以在这个阶段它肯定会在堆栈上创建引用。但是是否在堆上创建新对象取决于方法的实现。

因此，根据方法返回的内容，在上述行之后 objectName 可以为 null 或不为 null。. 希望它能清除这些东西。

# java - 使用 Web 服务部署 Web 应用程序后出现错误“java.lang.NoSuchMethodError”

> ID：16129624
> 
> 赞同：0
> 
> 时间：2013-04-21T09:15:27.407
> 
> 标签：java, web-services, servlets, oc4j, webproxy

我正面临一个奇怪的问题，我需要你的帮助。我使用 oc4j 1013 作为 java 容器。我有一个简单的 Web 服务“GetDates”，我在 oc4j 上成功地部署了它，并通过调用其中的方法对其进行了测试，它成功地返回了值。然后我使用 wsdl 为我的 Web 服务创建了一个 Web 服务代理，我从 jdeveloper 进行了测试，它也成功返回。最后我创建了一个 Web 应用程序，只是一个普通的 servlet，在其中我使用了我之前刚刚做的 Web 服务代理，并通过从 jdeveloper 运行它来测试它，它成功返回了结果。奇怪的是，当我决定将它部署在外部 oc4j 上时，它是用于 Web 服务的 oc4j，并通过下面的异常调用 servlet。

```
java.lang.NoSuchMethodError: datespackage.runtime.GetDatesWS_getDateHence_ResponseStruct_LiteralSerializer.setSOAPVersion(Loracle/j2ee/ws/common/soap/SOAPVersion;)
at datespackage.runtime.GetDatesWS_getDateHence_ResponseStruct_LiteralSerializer.<init>(GetDatesWS_getDateHence_ResponseStruct_LiteralSerializer.java:37)
at datespackage.runtime.GetDatesService_SerializerRegistry.getRegistry(GetDatesService_SerializerRegistry.java:31)
at datespackage.runtime.GetDatesService_Impl.<init>(GetDatesService_Impl.java:26)
at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
at java.lang.reflect.Constructor.newInstance(Constructor.java:513)
at java.lang.Class.newInstance0(Class.java:355)
at java.lang.Class.newInstance(Class.java:308)
at oracle.j2ee.ws.client.ServiceFactoryImpl.createService(ServiceFactoryImpl.java:92)
at oracle.j2ee.ws.client.ServiceFactoryImpl.loadService(ServiceFactoryImpl.java:121)
at datespackage.GetDatesWSSoapHttpPortClient.<init>(GetDatesWSSoapHttpPortClient.java:22)
at webproject.indexClass.doGet(indexClass.java:27)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:743)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:856)
at com.evermind[Oracle Containers for J2EE 10g (10.1.3.0.0) ].server.http.ServletRequestDispatcher.invoke(ServletRequestDispatcher.java:719)
at com.evermind[Oracle Containers for J2EE 10g (10.1.3.0.0) ].server.http.ServletRequestDispatcher.forwardInternal(ServletRequestDispatcher.java:376)
at com.evermind[Oracle Containers for J2EE 10g (10.1.3.0.0) ].server.http.HttpRequestHandler.doProcessRequest(HttpRequestHandler.java:870)
at com.evermind[Oracle Containers for J2EE 10g (10.1.3.0.0) ].server.http.HttpRequestHandler.processRequest(HttpRequestHandler.java:451)
at com.evermind[Oracle Containers for J2EE 10g (10.1.3.0.0) ].server.http.HttpRequestHandler.serveOneRequest(HttpRequestHandler.java:218)
at com.evermind[Oracle Containers for J2EE 10g (10.1.3.0.0) ].server.http.HttpRequestHandler.run(HttpRequestHandler.java:119)
at com.evermind[Oracle Containers for J2EE 10g (10.1.3.0.0) ].server.http.HttpRequestHandler.run(HttpRequestHandler.java:112)
at oracle.oc4j.network.ServerSocketReadHandler$SafeRunnable.run(ServerSocketReadHandler.java:260)
at com.evermind[Oracle Containers for J2EE 10g (10.1.3.0.0) ].util.ReleasableResourcePooledExecutor$MyWorker.run(ReleasableResourcePooledExecutor.java:303)
at java.lang.Thread.run(Thread.java:619) 
```

我有一种感觉，可能是缺少罐子或其他东西。

我正在使用 JDeveloper 1013 和 oc4j 1013，我正在使用 JDK 1.5

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T09:22:30.243

因为找到了类，所以 JAR 不太可能丢失。它缺少特定的方法或该方法的签名不同。通常，当您具有相同依赖项的不同版本（例如不同的 JAR）时，就会发生这种情况。如果类路径中有两个相同的类，就会发生这种情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T11:28:57.087

确保方法签名相同并检查包名称。客户端和服务器类应该共享同一个包。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T07:55:15.513

最后经过长时间的调查，我改变了调用 Web 服务的方式，我开发了一个通用客户端，使用 RPC Call 调用 Web 服务。它工作得很好:)

# node.js - 运行命令 heroku ps:scale worker=1 时出错

> ID：16129625
> 
> 赞同：0
> 
> 时间：2013-04-21T09:15:39.897
> 
> 标签：node.js, mongodb, heroku, mlab, procfile

我尝试了很多但无法找到原因。需要帮忙。以下是我在 Heroku 中部署我的第一个节点应用程序并且我的数据库位于 MongoLab 后所写的内容

```
heroku ps:scale worker=1 
```

它给了我以下错误。

```
!    No such type as worker. 
```

我的 Procfile 看起来像这样，

```
web: node server/server.js 
```

这是我的日志文件的样子

```
2013-04-20T21:12:31.474207+00:00 app[worker.1]:     at startup (node.js:119:16)
2013-04-20T21:12:31.474207+00:00 app[worker.1]:     at node.js:901:3
2013-04-20T21:12:32.710713+00:00 heroku[worker.1]: Process exited with status 8
2013-04-20T21:12:32.722040+00:00 heroku[worker.1]: State changed from starting to crashed
2013-04-20T21:18:02.281651+00:00 heroku[web.1]: State changed from crashed to starting
2013-04-20T21:18:03.317730+00:00 heroku[web.1]: Starting process with command `node server/server.js`
2013-04-20T21:18:04.034486+00:00 app[web.1]:                               ^
2013-04-20T21:18:04.038104+00:00 app[web.1]:     at Module._compile (module.js:456:26)
2013-04-20T21:18:04.034486+00:00 app[web.1]:     server = module.exports = express();
2013-04-20T21:18:04.038104+00:00 app[web.1]:     at Module.load (module.js:356:32)
2013-04-20T21:18:04.038104+00:00 app[web.1]: TypeError: object is not a function
2013-04-20T21:18:04.038104+00:00 app[web.1]:     at Function.Module._load (module.js:312:12)
2013-04-20T21:18:04.038104+00:00 app[web.1]:     at Object.Module._extensions..js (module.js:474:10)
2013-04-20T21:18:04.034486+00:00 app[web.1]: 
2013-04-20T21:18:04.034486+00:00 app[web.1]: /app/server/server.js:7
2013-04-20T21:18:04.038104+00:00 app[web.1]:     at Object.<anonymous> (/app/server/server.js:7:31)
2013-04-20T21:18:04.038104+00:00 app[web.1]:     at startup (node.js:119:16)
2013-04-20T21:18:04.038104+00:00 app[web.1]:     at Function.Module.runMain (module.js:497:10)
2013-04-20T21:18:04.038104+00:00 app[web.1]:     at node.js:901:3
2013-04-20T21:18:05.153193+00:00 heroku[web.1]: Process exited with status 8
2013-04-20T21:18:05.191971+00:00 heroku[web.1]: State changed from starting to crashed
2013-04-20T21:18:31.948831+00:00 heroku[slugc]: Slug compilation started
2013-04-20T21:19:03.195879+00:00 heroku[worker.1]: State changed from crashed to down
2013-04-20T21:19:03.215823+00:00 heroku[api]: Release v13 created by suchak.maulik179@gmail.com
2013-04-20T21:19:03.254953+00:00 heroku[api]: Deploy 425df46 by suchak.maulik179@gmail.com
2013-04-20T21:19:03.326499+00:00 heroku[web.1]: State changed from crashed to starting
2013-04-20T21:19:04.350726+00:00 heroku[web.1]: Starting process with command `node server/server.js`
2013-04-20T21:19:04.372088+00:00 heroku[slugc]: Slug compilation finished
2013-04-20T21:19:05.332176+00:00 app[web.1]: /app/server/server.js:7
2013-04-20T21:19:05.332477+00:00 app[web.1]:     server = module.exports = express();
2013-04-20T21:19:05.332529+00:00 app[web.1]:                               ^
2013-04-20T21:19:05.339486+00:00 app[web.1]:     at Module.load (module.js:356:32)
2013-04-20T21:19:05.339486+00:00 app[web.1]:     at Module._compile (module.js:456:26)
2013-04-20T21:19:05.339486+00:00 app[web.1]:     at Function.Module.runMain (module.js:497:10)
2013-04-20T21:19:05.339486+00:00 app[web.1]:     at Object.Module._extensions..js (module.js:474:10)
2013-04-20T21:19:05.339486+00:00 app[web.1]:     at startup (node.js:119:16)
2013-04-20T21:19:05.339486+00:00 app[web.1]:     at node.js:901:3
2013-04-20T21:19:05.339486+00:00 app[web.1]: TypeError: object is not a function
2013-04-20T21:19:05.339486+00:00 app[web.1]:     at Object.<anonymous> (/app/server/server.js:7:31)
2013-04-20T21:19:05.332176+00:00 app[web.1]: 
2013-04-20T21:19:05.339486+00:00 app[web.1]:     at Function.Module._load (module.js:312:12)
2013-04-20T21:19:07.836462+00:00 heroku[web.1]: Process exited with status 8
2013-04-20T21:19:07.850902+00:00 heroku[web.1]: State changed from starting to crashed
2013-04-20T21:27:35.413670+00:00 heroku[api]: Add NODE_ENV config by suchak.maulik179@gmail.com
2013-04-20T21:27:35.455828+00:00 heroku[api]: Release v14 created by suchak.maulik179@gmail.com
2013-04-20T21:27:35.590387+00:00 heroku[web.1]: State changed from crashed to starting
2013-04-20T21:27:36.402134+00:00 heroku[web.1]: Starting process with command `node server/server.js`
2013-04-20T21:27:37.096860+00:00 app[web.1]:     server = module.exports = express();
2013-04-20T21:27:37.095996+00:00 app[web.1]: 
2013-04-20T21:27:37.096542+00:00 app[web.1]: /app/server/server.js:7
2013-04-20T21:27:37.101585+00:00 app[web.1]: TypeError: object is not a function
2013-04-20T21:27:37.101585+00:00 app[web.1]:     at Module._compile (module.js:456:26)
2013-04-20T21:27:37.097188+00:00 app[web.1]:                               ^
2013-04-20T21:27:37.101585+00:00 app[web.1]:     at Object.<anonymous> (/app/server/server.js:7:31)
2013-04-20T21:27:37.101585+00:00 app[web.1]:     at Object.Module._extensions..js (module.js:474:10)
2013-04-20T21:27:37.101585+00:00 app[web.1]:     at Module.load (module.js:356:32)
2013-04-20T21:27:37.101585+00:00 app[web.1]:     at Function.Module._load (module.js:312:12)
2013-04-20T21:27:37.101585+00:00 app[web.1]:     at Function.Module.runMain (module.js:497:10)
2013-04-20T21:27:37.101585+00:00 app[web.1]:     at startup (node.js:119:16)
2013-04-20T21:27:37.101585+00:00 app[web.1]:     at node.js:901:3
2013-04-20T21:27:38.325688+00:00 heroku[web.1]: Process exited with status 8
2013-04-20T21:27:38.337228+00:00 heroku[web.1]: State changed from starting to crashed
2013-04-20T21:28:09.438921+00:00 heroku[web.1]: State changed from crashed to starting
2013-04-20T21:28:10.370904+00:00 heroku[web.1]: Starting process with command `node server/server.js`
2013-04-20T21:28:10.983155+00:00 app[web.1]: /app/server/server.js:7
2013-04-20T21:28:10.983538+00:00 app[web.1]:     server = module.exports = express();
2013-04-20T21:28:10.987593+00:00 app[web.1]:     at Object.Module._extensions..js (module.js:474:10)
2013-04-20T21:28:10.987593+00:00 app[web.1]:     at startup (node.js:119:16)
2013-04-20T21:28:10.987593+00:00 app[web.1]: TypeError: object is not a function
2013-04-20T21:28:10.987593+00:00 app[web.1]:     at Function.Module.runMain (module.js:497:10)
2013-04-20T21:28:10.987593+00:00 app[web.1]:     at Object.<anonymous> (/app/server/server.js:7:31)
2013-04-20T21:28:10.987593+00:00 app[web.1]:     at node.js:901:3
2013-04-20T21:28:10.982954+00:00 app[web.1]: 
2013-04-20T21:28:10.987593+00:00 app[web.1]:     at Module._compile (module.js:456:26)
2013-04-20T21:28:10.983538+00:00 app[web.1]:                               ^
2013-04-20T21:28:10.987593+00:00 app[web.1]:     at Module.load (module.js:356:32)
2013-04-20T21:28:10.987593+00:00 app[web.1]:     at Function.Module._load (module.js:312:12)
2013-04-20T21:28:12.065391+00:00 heroku[web.1]: Process exited with status 8
2013-04-20T21:28:12.076681+00:00 heroku[web.1]: State changed from starting to crashed
2013-04-20T21:29:48.836778+00:00 heroku[slugc]: Slug compilation started
2013-04-20T21:29:50.389288+00:00 heroku[slugc]: Slug compilation failed: failed to compile Node.js app
2013-04-20T21:31:17.189885+00:00 heroku[slugc]: Slug compilation started
2013-04-20T21:31:36.095712+00:00 heroku[api]: Release v15 created by suchak.maulik179@gmail.com
2013-04-20T21:31:36.130855+00:00 heroku[api]: Deploy 5c9dcf7 by suchak.maulik179@gmail.com
2013-04-20T21:31:36.321819+00:00 heroku[web.1]: State changed from crashed to starting
2013-04-20T21:31:36.560503+00:00 heroku[slugc]: Slug compilation finished
2013-04-20T21:31:39.217666+00:00 heroku[web.1]: Starting process with command `node server/server.js`
2013-04-20T21:31:39.952499+00:00 app[web.1]: /app/server/server.js:7
2013-04-20T21:31:39.953143+00:00 app[web.1]:                               ^
2013-04-20T21:31:39.955817+00:00 app[web.1]:     at Module._compile (module.js:449:26)
2013-04-20T21:31:39.955817+00:00 app[web.1]:     at process.startup.processNextTick.process._tickCallback (node.js:244:9)
2013-04-20T21:31:39.952499+00:00 app[web.1]: 
2013-04-20T21:31:39.952832+00:00 app[web.1]:     server = module.exports = express();
2013-04-20T21:31:39.955817+00:00 app[web.1]: TypeError: object is not a function
2013-04-20T21:31:39.955817+00:00 app[web.1]:     at Object.Module._extensions..js (module.js:467:10)
2013-04-20T21:31:39.955817+00:00 app[web.1]:     at Module.runMain (module.js:492:10)
2013-04-20T21:31:39.955817+00:00 app[web.1]:     at Object.<anonymous> (/app/server/server.js:7:31)
2013-04-20T21:31:39.955817+00:00 app[web.1]:     at Module.load (module.js:356:32)
2013-04-20T21:31:39.955817+00:00 app[web.1]:     at Function.Module._load (module.js:312:12)
2013-04-20T21:31:41.158365+00:00 heroku[web.1]: Process exited with status 1
2013-04-20T21:31:41.168511+00:00 heroku[web.1]: State changed from starting to crashed 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T16:16:17.503

您正在运行的命令正在尝试将`worker`进程数扩大到 1，但您只声明了一个`web`进程类型。如果您试图扩大您将使用的 Web 进程的数量`heroku ps:scale web=1`。如果您尝试创建一个新的工作进程，则需要在 procfile 中定义一个工作进程并在尝试扩展之前推送到 Heroku（`worker: node server/worker.js`）。[Heroku 关于进程类型](https://devcenter.heroku.com/articles/procfile#process-types-as-templates)的文档也应该有所帮助。

# eclipse - 如何在 Eclipse TextEditor 中获取光标列位置

> ID：16129626
> 
> 赞同：2
> 
> 时间：2013-04-21T09:15:43.550
> 
> 标签：eclipse, eclipse-plugin, jface, text-editor

我想开发一个eclipse插件，需要根据文本编辑器中的光标位置做一些操作。获取光标的行位置似乎很容易，请参阅： [How to get cursor position in an eclipse TextEditor](https://stackoverflow.com/questions/6827797/how-to-get-cursor-position-in-an-eclipse-texteditor)

但是如何获得列位置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T09:41:00.490

以下代码似乎有效：

```
package plugin_test.handlers;

import org.eclipse.core.commands.AbstractHandler;
import org.eclipse.core.commands.ExecutionEvent;
import org.eclipse.core.commands.ExecutionException;
import org.eclipse.jface.dialogs.MessageDialog;
import org.eclipse.jface.text.BadLocationException;
import org.eclipse.jface.text.IDocument;
import org.eclipse.jface.text.ITextSelection;
import org.eclipse.jface.viewers.ISelection;
import org.eclipse.jface.viewers.ISelectionProvider;
import org.eclipse.ui.IEditorPart;
import org.eclipse.ui.IWorkbench;
import org.eclipse.ui.IWorkbenchPage;
import org.eclipse.ui.IWorkbenchWindow;
import org.eclipse.ui.PlatformUI;
import org.eclipse.ui.texteditor.IDocumentProvider;
import org.eclipse.ui.texteditor.ITextEditor;

/**
 * Our sample handler extends AbstractHandler, an IHandler base class.
 * @see org.eclipse.core.commands.IHandler
 * @see org.eclipse.core.commands.AbstractHandler
 */
public class SampleHandler extends AbstractHandler {
    /**
     * The constructor.
     */
    public SampleHandler() {
    }

    /**
     * the command has been executed, so extract extract the needed information
     * from the application context.
     */
    public Object execute(ExecutionEvent event) throws ExecutionException {
        IWorkbench wb = PlatformUI.getWorkbench();
        IWorkbenchWindow win = wb.getActiveWorkbenchWindow();
        IWorkbenchPage page = win.getActivePage();
        IEditorPart editor = page.getActiveEditor();
        if(editor instanceof ITextEditor){
            ISelectionProvider selectionProvider = ((ITextEditor)editor).getSelectionProvider();
            ISelection selection = selectionProvider.getSelection();
            if (selection instanceof ITextSelection) {
                ITextSelection textSelection = (ITextSelection)selection;
                IDocumentProvider provider = ((ITextEditor)editor).getDocumentProvider();
                IDocument document = provider.getDocument(editor.getEditorInput());
                int line = textSelection.getStartLine();
                int column =0;
                try {
                    column = textSelection.getOffset() - document.getLineOffset(line);
                } catch (BadLocationException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }

                MessageDialog.openInformation(
                        win.getShell(),
                        "Plugin_test",
                        "line:"+(line+1) + 
                        " column:"+ (column+1) );
            }
        }

        return null;
    }
} 
```

# android - 应用程序进程在 Eclipse 设备部分不可见

> ID：16129629
> 
> 赞同：0
> 
> 时间：2013-04-21T09:16:27.987
> 
> 标签：android

![在此处输入图像描述](https://i.stack.imgur.com/22NJQ.png)
面临一些问题。当我将设备连接到 USB 时，在设备部分下我的设备可见。但是当我在设备上启动我的应用程序时，我的应用程序进程在设备下不可见。直到昨天才可见。今天它不可见，所以我无法在 Eclipse 中看到我的应用程序日志。

如果我运行另一个应用程序，那么它的进程是可见的。我的应用程序唯一的问题。

这种行为的原因可能是什么？

添加eclipse的截图。我的应用程序进程在 android.process.acore 下不可见。当我运行我的应用程序时。我创建了一个过滤器来仅查看我的应用程序日志，但我现在无法查看日志。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T09:34:28.747

可能是android调试桥不起作用，这对我来说时不时发生。你可以试试这个：

```
adb kill-server
adb start-server 
```

# jsf - 仅显示组件时执行效果

> ID：16129632
> 
> 赞同：0
> 
> 时间：2013-04-21T09:16:45.900
> 
> 标签：jsf, jsf-2, primefaces

我有一个面板，如果它只显示，我想对其执行隐藏效果，如果它被隐藏，效果不应该起作用。

```
 <h:outputLink id="open_link" value="#" styleClass="underline">
            Click To Open   

<p:effect for="blank_panel" type="blind" event="click" speed="2000">
        <f:param name="mode" value="'hide'" />
</p:effect>

<p:effect type="blind" event="click" for="display_tabs" delay="1000">
    <f:param name="mode" value="'show'" />
</p:effect>

</h:outputLink>

    <h:panelGroup id="blank_panel" layout="block">

    </h:panelGroup> 
```

我希望在第二次单击链接时（在这种情况下隐藏了blank_panel），不执行blank_panel的效果

```
 <!-- executed only if the blank_panel is shown -->
     <p:effect for="blank_panel" type="blind" event="click" speed="2000">
        <f:param name="mode" value="'hide'" />
</p:effect> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T09:54:40.910

INMO 你真的最好使用 jQuery 效果，但是...

既然你想使用 p:effect of primefaces 我认为你应该`<h:outputLink`用它们的可见性来玩两个，按下一个应该隐藏它并显示第二个`<h:outputLink`，反之亦然......

```
 <h:outputLink id="open_link" 
    onclick="$('#open_link').hide();$('#open_link2').show();" value="#" 
    styleClass="underline">
            Click To Open   
    <p:effect....
    <p:effect....
 </h:outputLink>

 <h:outputLink id="open_link2"
    onclick="$('#open_link2').hide();$('#open_link').show();" value="#" 
    styleClass="underline">
            Click To Open   
    <p:effect...
 </h:outputLink> 
```

不确定 id...（如果您不使用 prependId="false" 等...）

# php - 领域驱动设计，映射器/存储库值高于/低于

> ID：16129634
> 
> 赞同：0
> 
> 时间：2013-04-21T09:16:51.703
> 
> 标签：php, domain-driven-design, repository-pattern

在我正在进行的一个项目中，我们使用领域驱动设计。有了这个，我们还使用了映射器和存储库模式。映射器只是粗略的操作，而存储库看起来像实体。

所以它看起来像

```
class UserMapper
{
    public function fetch($criteria)
    {
         // magic on the database
    }
}

class UserRepository
{
    public function getByName($name)
    {
        $this->mapper->fetch(array('name' =>  $name));
    }
} 
```

代码不起作用，但它给出了一个大致的想法

现在我遇到了以下问题

假设我想要名称为“john”且性别为“male”的用户。存储库现在是否应该有一个函数 getByNameAndGender($name, $gender)。但是你很快就会得到很多功能，因为你需要性别、年龄和姓名等。

接下来是我发现的所有示例仅实现以下“值 == 值”。但是没有一个例子是像“value < value”或其他东西。所以我的问题是你如何实现这一点。因为我再次看到你可以制作像

```
getWhereHeightIsLowerThan($height)
getWhereHeightIsLowerThanOrEquals($height)
getWhereHeightIs($height)
getWhereHeightIsGreaterThan($height)
getWhereHeightIsGreaterThanOrEquals($height) 
```

同样是 5 个函数，应该类似于 1 个函数。您如何在存储库/映射器模式中实现这一点。为了使事情更加复杂，我没有使用 SQL 数据库。但是 MongoDB，现在这应该不是一个大问题。

--

使用 eulerfx 给出的答案，我附带了以下代码

使用 Application\Specification\AbstractSpecification；

```
class IdIsSpecification extends AbstractSpecification
{
    /** @var  string */
    protected $id;

    /**
     * @param $id
     * @throws \InvalidArgumentException
     */
    function __construct($id)
    {
        if(!is_string($id))
        {
            throw new \InvalidArgumentException('Expects string, given ' . gettype($id));
        }

        $this->id = $id;
    }

    /**
     * @return mixed
     */
    public function getQuery()
    {
        return [
            '_id' => new \MongoId($this->id),
        ];
    }
} 
```

我使用 php，所以我不能使用 AND 和 OR 这两个词，所以将它们重命名为 ALSO 和 OF。

此外，规范模式会查看扔给它的数据集。这对于我的需要不是最好的方法，所以我有方法 getQuery 而不是 isSatisfied。

所有查询逻辑都在规范中找到。存储库使用规范的通用函数构建，例如通过 id 获取。

映射器只是数据集的简单粗加工处理程序（fetch、fetchAll、count、insert 等）。

最后，如果我想更改数据库语言（从 mongo 语法到 sql），我只需要更改 getQuery 方法。希望它可以帮助某人

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T15:21:51.737

您似乎正在尝试解决复杂查询中的复杂性。为此，您可以使用[规范模式](http://lostechies.com/chrismissal/2009/09/11/using-the-specification-pattern-for-querying/)。使用规范模式，您将拥有一个表示查询的对象。该对象将由有关手头实体的谓词组成，例如`WhereHeightIsLowerThan 3`. 然后，存储库将基于此规范对象构建 SQL 查询或 MongoDB 查询。

# c# - 没有名称属性的mvc 3中的Html助手

> ID：16129635
> 
> 赞同：1
> 
> 时间：2013-04-21T09:16:55.440
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3

我正在使用 MVC - 3 开发一个应用程序。我想创建一个`textbox`使用 mvc html 帮助器，例如：

```
@Html.TextBoxFor(model => model.Title) 
```

这将呈现如下内容：

```
<input id="Title" name="Title" type="text" value=""> 
```

我想为没有`name`属性的文本框生成一个标记。是否有任何现有的助手可以生成没有名称属性的标签。我这样做是因为我想从表单提交中排除某些字段。我怎样才能做到这一点 ？

# c# - 从所有网页中删除 .aspx

> ID：16129639
> 
> 赞同：2
> 
> 时间：2013-04-21T09:17:33.670
> 
> 标签：c#, asp.net, routing, webforms

我将如何从网站中的每个 .aspx 网页中删除 .aspx？以下工作，但仅适用于网站的根目录，并且定义长文件夹结构效率低下且混乱。

```
void RegisterRoutes(RouteCollection routes)
{
    routes.MapPageRoute("RemASPx", "{file}", "~/{file}.aspx");
}

void Application_Start(object sender, EventArgs e) 
{
    // Code that runs on application startup
    RegisterRoutes(RouteTable.Routes);
} 
```

下面的作品没有斜杠，但是我将如何强制它有一个斜杠，因为没有什么可以跟随全能的 routeURL？

```
routes.MapPageRoute("RemASPx", "{*file}", "~/{file}.aspx"); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T11:19:46.563

保留此路由设置：

```
void RegisterRoutes(RouteCollection routes)
{
    routes.MapPageRoute("RemoveASPx", "{*file}", "~/{file}.aspx");
}

void Application_Start(object sender, EventArgs e) 
{
    RegisterRoutes(RouteTable.Routes);
} 
```

添加此重写：

```
protected void Application_BeginRequest(object sender, EventArgs e)
{
    string url = HttpContext.Current.Request.Url.AbsolutePath;
    if (string.IsNullOrEmpty(url) ||
        System.IO.Directory.Exists(Server.MapPath(url)))
        return;

    if (url.EndsWith("/"))
    {
        Response.Clear();
        Response.Status = "301 Moved Permanently";
        Response.AddHeader("Location", url.Substring(0, url.Length - 1));
        Response.End();
    }
} 
```

上面的代码块：

1.  出于不言自明的原因检查 url 是否为空或为空
2.  检查 URL 是否为目录，因为您不想重写目录（如果应用程序默认状态中有任何内容，则会导致重定向循环，因为在目录中添加了尾部斜杠）
3.  检查 URL 是否以斜杠结尾，因此是否需要将其删除
4.  使用了 301 响应（最合适的响应——尤其是 SEO）；添加的标头导致重定向

# python - x % 2 ==0 是什么意思？

> ID：16129650
> 
> 赞同：0
> 
> 时间：2013-04-21T09:18:52.243
> 
> 标签：python

我确定这是非常基本的，我应该理解它，但我不明白！

我被赋予这样做：

循环并以接收到的相同顺序打印出数字列表中的所有偶数。不要打印序列中 237 之后的任何数字。

这是我为这些数字准备的程序。

```
numbers = [
    951, 402, 984, 651, 360, 69, 408, 319, 601, 485, 980, 507, 725, 547, 544, 
    615, 83, 165, 141, 501, 263, 617, 865, 575, 219, 390, 984, 592, 236, 105, 942, 941, 
    386, 462, 47, 418, 907, 344, 236, 375, 823, 566, 597, 978, 328, 615, 953, 345, 
    399, 162, 758, 219, 918, 237, 412, 566, 826, 248, 866, 950, 626, 949, 687, 217, 
    815, 67, 104, 58, 512, 24, 892, 894, 767, 553, 81, 379, 843, 831, 445, 742, 717, 
    958, 609, 842, 451, 688, 753, 854, 685, 93, 857, 440, 380, 126, 721, 328, 753, 470, 
    743, 527
]

# your code goes here
for x in numbers:
    if x % 2 == 0:
        print x
    if x == 237:
        break 
```

我得到了正确的解决方案，一切都正确，但我不知道 ==0 有什么用。我使用它的唯一原因是因为它在练习前的课程中用于另一个示例！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-21T09:20:34.783

`x % 2`给出整数除法后的余数（当仅处理整数时，例如在这种情况下，否则为常见类型`x/2`）`%`称为模运算符。当然，当余数为 0 时，这个数是偶数。

[文档](http://docs.python.org/2/reference/expressions.html#binary-arithmetic-operations)：

> (`%`模) 运算符从第一个参数除以第二个参数产生余数。数字参数首先转换为通用类型。零右参数会引发`ZeroDivisionError`异常。参数可以是浮点数，例如，`3.14%0.7`等于`0.34`（因为`3.14`等于`4*0.7 + 0.34`）。模运算符总是产生与它的第二个操作数（或零）具有相同符号的结果。结果的绝对值严格小于第二个操作数的绝对值 [2]。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-21T09:20:37.877

`if x % 2 == 0`检查一个数字是否是偶数。

`x % 2`是`1`奇数`0`时，偶数时。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-21T09:21:09.293

`== 0`意思是“等于 0（零）”。So`if foo == 0:`表示“如果`foo`等于 0，则执行以下操作”，因此`if x % 2 == 0:`意味着“如果等于 0，请执行以下操作`x % 2`”。

# jquery - 如何缩写jquery事件？

> ID：16129651
> 
> 赞同：-2
> 
> 时间：2013-04-21T09:18:57.707
> 
> 标签：jquery, css

我有一个基于 div 的 jquery 操作（我选择 div 并应用操作，但我有 90 个 div）在其 ID 如何缩写此语句：这是代码

```
if ($('#justgarph > p:contains("draggable1")').length > 0) {
    $(".product").animate({
        "top": "0",
        "left": "0"
    }, 500).delay(100);

    $("#draggable1").animate({
        "top": "-300px",
        "left": "200px"
    }, 500);

    setTimeout(function () {
        $("#draggable1").animate({
            "top": "-106px",
            "left": "470px"
        }, 1000);
        $("#draggable1").addClass("activeproduct")
    }, 800);
}

if ($('#justgarph > p:contains("draggable2")').length > 0) {
    $(".product").animate({
        "top": "0",
        "left": "0"
    }, 500).delay(100);

    $("#draggable2").animate({
        "top": "-300px",
        "left": "100px"
    }, 500);

    setTimeout(function () {
        $("#draggable2").animate({
            "top": "-106px",
            "left": "320px"
        }, 1000);

        $("#draggable2").addClass("activeproduct")
    }, 800);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T09:26:18.730

您必须构建一个循环并使 ID 动态化。如果我正确地看到这一点，唯一会改变的是 ID。

```
// make them all draggable 'at once' if they all have the same left values
for (var i=0; i<90; i++) {
  if ($('#justgarph > p:contains("draggable"' + i + ')').length > 0) {
      $(".product").animate({
          "top": "0",
          "left": "0"
      }, 500).delay(100);

      $("#draggable" + i).animate({
          "top": "-300px",
          "left": "200px"
      }, 500);

      setTimeout(function () {
          $("#draggable" + i).animate({
              "top": "-106px",
              "left": "470px"
          }, 1000);
          $("#draggable" + i).addClass("activeproduct")
      }, 800);
  }
} 
```

如果更改`left`值是故意的，最好将整个事物放在一个函数中。您的代码将比上面的代码长一点。但只有在所有内容都相同的情况下，它才能在循环中工作。

所以在这里，你有一个包含三个参数的函数。第一个是`id`带有 a 的 as 文本，`#`第二个和第三个`left`是`px`没有`px`.

```
function makeDraggable(id, l1, l2) {
  if ($('#justgarph > p:contains(' + e + ')').length > 0) {
      $(".product").animate({
          "top": "0",
          "left": "0"
      }, 500).delay(100);

      $(e).animate({
          "top": "-300px",
          "left": l1 + "px"
      }, 500);

      setTimeout(function () {
          $(e).animate({
              "top": "-106px",
              "left": l2 + "px"
          }, 1000);
          $(e).addClass("activeproduct")
      }, 800);
  }
}

// make them all draggable, one at a time
makeDraggable('#draggable1', 100, 470);
makeDraggable('#draggable2', 200, 320); 
```

# python - 访问 JSON 元素

> ID：16129652
> 
> 赞同：91
> 
> 时间：2013-04-21T09:19:05.600
> 
> 标签：python, json

我从 URL 获取天气信息。

```
weather = urllib2.urlopen('url')
wjson = weather.read() 
```

我得到的是：

```
{
  "data": {
     "current_condition": [{
        "cloudcover": "0",
        "humidity": "54",
        "observation_time": "08:49 AM",
        "precipMM": "0.0",
        "pressure": "1025",
        "temp_C": "10",
        "temp_F": "50",
        "visibility": "10",
        "weatherCode": "113",
        "weatherDesc": [{
            "value": "Sunny"
        }],
        "weatherIconUrl": [{
            "value": "http:\/\/www.worldweatheronline.com\/images\/wsymbols01_png_64\/wsymbol_0001_sunny.png"
        }],
        "winddir16Point": "E",
        "winddirDegree": "100",
        "windspeedKmph": "22",
        "windspeedMiles": "14"
    }]        
 }
} 
```

如何访问我想要的任何元素？

如果我这样做：`print wjson['data']['current_condition']['temp_C']`我收到错误消息：

> 字符串索引必须是整数，而不是 str。

* * *

## 回答 #1

> 赞同：137
> 
> 时间：2013-04-21T09:20:50.170

```
import json
weather = urllib2.urlopen('url')
wjson = weather.read()
wjdata = json.loads(wjson)
print wjdata['data']['current_condition'][0]['temp_C'] 
```

你从 url 得到的是一个 json 字符串。而且你不能直接用索引解析它。您应该将其转换为 dict by`json.loads`然后您可以使用 index.html 解析它。

允许直接从文件中加载它，而不是使用`.read()`中间将它保存到内存然后读取它：`json``json`

```
wjdata = json.load(urllib2.urlopen('url')) 
```

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2013-04-21T10:05:57.030

[这是使用requests](http://docs.python-requests.org/en/latest/)的替代解决方案：

```
import requests
wjdata = requests.get('url').json()
print wjdata['data']['current_condition'][0]['temp_C'] 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2017-09-19T17:39:33.597

'temp_C' 是字典内的键，位于字典内的列表内

这种方式有效：

```
wjson['data']['current_condition'][0]['temp_C']
>> '10' 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-02-06T22:26:58.893

你也可以这样做：

```
MYJSON = {
    'username': 'gula_gut',
    'pics': '/0/myfavourite.jpeg',
    'id': '1'
}

#changing username
MYJSON['username'] = 'calixto'
print(MYJSON['username']) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-12-27T08:19:25.830

将 get 方法与请求一起使用的另一种替代方法：

```
import requests
wjdata = requests.get('url').json()
print wjdata.get('data').get('current_condition')[0].get('temp_C') 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-01-09T15:24:08.373

```
import json

# some JSON:
json_str =  '{ "name":"Sarah", "age":25, "city":"Chicago"}'

# parse json_str:
json = json.loads(json_str)

# get tags from json   
tags = []
for tag in json:
    tags.append(tag)

# print each tag name e your content
for i in range(len(tags)):
    print(tags[i] + ': ' + str(json[tags[i]])) 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2021-02-19T10:33:13.880

我做了这个方法来深入导航 Json

```
def filter_dict(data: dict, extract):
    try:
        if isinstance(extract, list):
            while extract:
                if result := filter_dict(data, extract.pop(0)):
                    return result
        shallow_data = data.copy()
        for key in extract.split('.'):
            if str(key).isnumeric():
                key = int(key)
            shallow_data = shallow_data[key]
        return shallow_data
    except (IndexError, KeyError, AttributeError):
        return None

filter_dict(wjdata, 'data.current_condition.0.temp_C')
# 10

Using the multiple fields:
filter_dict(wjdata, ['data.current_condition.0.temp_C', 'data.current_condition.1.temp_C']) This working as a OR when take the first element found

# 10 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-07-20T08:32:44.920

就像其他答案指出的那样，这个问题的公认答案似乎忽略了原始发布者的数据结构误解。

主要问题似乎是原始解决方案将 JSON 纯粹视为字典，而实际上它是...

*列表中的字典，字典中的字典，字典中的字典*

因此， `['data']`需要访问字典的顶级键：值对， `['current_conditions']`访问下一级字典，然后`[0]`必须用于访问列表的第一个元素（只有一个元素）。

只有这样才能`['temp_C']`访问该键的实际值并检索数据。

```
x={
  "data": {
            "current_condition": 
                [{
                    "cloudcover": "0",
                    "humidity": "54",
                    "observation_time": "08:49 AM",
                    "precipMM": "0.0",
                    "pressure": "1025",
                    "temp_C": "10",
                    "temp_F": "50",
                    "visibility": "10",
                    "weatherCode": "113",
                    "weatherDesc": 
                        [{
                            "value": "Sunny"
                        }],

                    "weatherIconUrl": 
                        [{
                            "value": "http:\/\/www.worldweatheronline.com\/images\/wsymbols01_png_64\/wsymbol_0001_sunny.png"
                        }],
                    "winddir16Point": "E",
                    "winddirDegree": "100",
                    "windspeedKmph": "22",
                    "windspeedMiles": "14"
                },
                {
                    "cloudcover": "0",
                    "humidity": "54",
                    "observation_time": "08:49 AM",
                    "precipMM": "0.0",
                    "pressure": "1025",
                    "temp_C": "5",
                    "temp_F": "50",
                    "visibility": "10",
                    "weatherCode": "113",
                    "weatherDesc": 
                        [{
                            "value": "Sunny"
                        }],

                    "weatherIconUrl": 
                        [{
                            "value": "http:\/\/www.worldweatheronline.com\/images\/wsymbols01_png_64\/wsymbol_0001_sunny.png"
                        }],
                    "winddir16Point": "E",
                    "winddirDegree": "100",
                    "windspeedKmph": "22",
                    "windspeedMiles": "14"
                }    ]        
            }
}

print(x['data']['current_condition'][0]['weatherDesc'][0]['value'])

# results in 'Sunny' 
```

在回答评论中的另一个问题时，

> “假设有更多当前条件条目，有没有办法在不知道索引的情况下做到这一点？”

假设有许多`current_condition`条目，您不太可能只想要一个值，或者如果您这样做了，那么您可能会有另一条信息来定位该特定值（即位置或其他东西）。

假设您的数据集名为`x`，即`x = {"data": ...}`。

如果您想要所有`current_condition`条目，您可以使用以下命令遍历列表 (of `current_conditions`)：

```
y = []

for index in range(0,len(x['data']['current_condition']))
   y.append(x['data']['current_condition'][index]['temp_C']) 
```

# html - 在 HTML 中水平放置尽可能多的 div，并填充线宽

> ID：16129657
> 
> 赞同：7
> 
> 时间：2013-04-21T09:19:43.277
> 
> 标签：html, css

我有一堆固定宽度的元素，它们使用显示类型`div`设计为内联流动。`inline-block`这会在行尾留下一个空白空间（下一`div`行无法安装并包裹到下一行）。

我想做的是均匀地扩展行上的所有 div 以填满行，**类似于 text 的“对齐”对齐方式**。

换句话说，我希望`div`元素的最小宽度，并在一行中尽可能多地容纳它们，并填充整行。

这是我的示例 HTML：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<head>
    <style>
        #container { margin: 100px; padding: 10px; border: 1px solid blue; }
        .item { margin: 10px; width: 300px; min-width: 300px; display: inline-block; border: 1px solid red; }
    </style>
</head>
<body>
    <div id="container">
        <div class="item">Item One</div>
        <div class="item">Item Two</div>
        <div class="item">Item Three</div>
        <div class="item">Item Four</div>
    </div>
</body>
</html> 
```

纯 CSS + HTML 有可能吗？还是我必须编写一个脚本才能达到这个结果？

* * *

更新：由于人们一直建议使用百分比宽度来容纳单行中的项目，我必须注意这不是这个问题的意图。我想要类似“Justified”文本，但带有块。项目的数量是可变的，并且可能太多。

块需要具有相同的大小，具有默认（最小）宽度，如果需要，它们将导致它们换行到下一行，并且需要通过扩展它们的宽度来填充容器的宽度。

* * *

更新 2：

当前示例产生如下内容：

```
|--------------------------- Container -----------------------------|
| |------ 1 ------| |------ 2 ------| |------ 3 ------|             |
| |------ 4 ------| |------ 5 ------| |------ 6 ------|             |
| |------ 7 ------|                                                 | 
```

我正在寻找这样的东西：

```
|---------------------------- Container ----------------------------|
| |-------- 1 --------| |-------- 2 --------| |-------- 3 --------| |
| |-------- 4 --------| |-------- 5 --------| |-------- 6 --------| |
| |-------- 7 --------|                                             | 
```

或这个：

```
|---------------------------- Container ----------------------------|
| |-------- 1 --------| |-------- 2 --------| |-------- 3 --------| |
| |-------- 4 --------| |-------- 5 --------| |-------- 6 --------| |
| |------------------------------ 7 ------------------------------| | 
```

每个项目都有一个最小尺寸，因此在上面的示例中，项目 #4 和 #7 将不适合行上的剩余空间，并将换行到下一行。我想要那些已经安装到生产线上的来填满空间。

请注意，容器可能会重新调整大小，因为浏览器可以重新调整大小。所以，如果它变小到只有两个项目可以排成一行，我想看到这样的东西：

```
|----------------- Container -----------------|
| |-------- 1 --------| |-------- 2 --------| |
| |-------- 3 --------| |-------- 4 --------| |
| |-------- 5 --------| |-------- 6 --------| |
| |------------------- 7 -------------------| | 
```

我希望这可以清除问题的意图。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-21T13:08:13.900

您可以使用[flexbox 模型](http://dev.w3.org/csswg/css-flexbox/#intro)来执行此操作，但存在一些问题。

有一个旧的和一个新的 flexbox 模型，这确实使事情变得有点复杂。目前只有[Chrome 和 Opera](http://caniuse.com/flexbox)支持新模型，其他浏览器有“部分支持”，这意味着它们可能支持：

1.  w3 规范的[旧版本](http://www.w3.org/TR/2009/WD-css3-flexbox-20090723/)
2.  较旧的[语法](http://www.w3.org/TR/2012/WD-css3-flexbox-20120322/)
3.  或者他们只是还没有完全实施新的甚至旧的模型

有了今天可用的任何东西，我能够将适用于**Chrome 26**、**Safari 5.1.7**、**IE10**、**IE9 模式下**的 IE10 和**IE8 模式下的 IE10 的**东西放在一起。遗憾的是，我当前的**Firefox 版本 20**不在该列表中。我不确定它是否适用于旧版本的 Firefox（我在帖子底部附近的 jsFiddle 中添加了所需的 CSS，但我的 PC 上没有安装任何旧版本）。

此[链接解释了为什么它在](https://developer.mozilla.org/en-US/docs/CSS/flex-wrap)**Firefox 20**中不起作用。如果您向下滚动到页面底部，它会说明该`flex-wrap`属性：

> Firefox (Gecko) - 不支持。Firefox 仅支持单行 flexbox。

我对此不是 100% 确定的，但在我看来，`flex-wrap`即使在旧版本中，他们也从未支持过该属性。如果我错了，请纠正我，对任何拥有**Firefox 19**版本的人，但我认为如果他们有，只要他们还没有完全实现新的 flexbox 模型， **Firefox 20至少会依赖它。**

这个`flex-wrap`属性是使多行魔术在大多数其他浏览器中发生的一个属性。~~预计**Firefox**将[在 22 版中全面支持新的 flexbox 模型](http://caniuse.com/flexbox)，该模型[计划于 2013 年 6 月 25 日发布](http://en.wikipedia.org/wiki/History_of_Firefox#Version_22)。~~ **更新：** [Firefox 现在支持](https://bugzilla.mozilla.org/show_bug.cgi?id=948654)28 版以上的`flex-wrap`属性[。](http://blog.dholbert.org/2013/12/multi-line-flexbox-support-in-nightly.html) **/更新**

毕竟，根据我最近的研究，这是一个尽可能好地完成工作的[jsFiddle 。](http://jsfiddle.net/4Xr5K/3)在当前浏览器支持下，这似乎是您在纯 CSS + HTML 中可以做到的最好的事情。

**如果你现在**想要更好的东西，你必须想出一个 JS 解决方案。也许看看[flexieJS](https://github.com/doctyper/flexie)的源代码并修改浏览器检测代码，以便它也能处理**Firefox 20**。`box-pack`并且`box-orient`在 FlexieJS 的受支持属性列表中，它们是使这项工作在较旧的**iOS**和**Safari**上工作的属性。

**编辑：**正如@Cimmanon 在评论中指出的那样，要让它在他们需要支持的旧浏览器中工作，他们不需要支持`box-lines: multiple`。所以这不适用于旧版本的**iOS**、**Safari**和**Firefox**。我想这解释了为什么**Firefox 20**没有可以依赖的旧实现。由于 FlexieJS 不支持`box-lines: multiple`两者，因此它的源代码可能对尝试解决此问题没有太大帮助。编写自己的 JS 修复程序似乎是目前唯一**的**解决方案。FlexieJS 的开发者一直在[为新规范开发一个 polyfill](https://github.com/doctyper/reflexie/branches). 这必须包含一些代码来修复旧浏览器中的多行。不过，目前似乎没有。如果你要写点什么，也许你可以联系他以获得一些见解。如果你让它工作，把你的代码传给他。如果你幸运的话，他已经完成了一些尚未出现在 GitHub 上的事情。

CSS：

```
#container {
  margin: 100px;
  padding: 10px;
  border: 1px solid blue;
  display: -webkit-box;     /* iOS 6-, Safari 3.1-6 */
  display: -moz-box;        /* Firefox 19- */
  display: -ms-flexbox;     /* IE 10 */
  display: -webkit-flex;    /* Chrome */
  display: flex;            /* Opera 12.1, Firefox 20+ */

  /* iOS 6-, Safari 3.1-6 */
  -webkit-box-orient: horizontal;
  -webkit-box-pack: justify;
  -webkit-lines: multiple;  /* Only here for informative purpose, this line is what should have made it work, it has never been implemented */ 

  /* Firefox 19- */
  -moz-flex-flow: row wrap;
  -moz-justify-content: space-between;
  -moz-box-lines: multiple; /* Only here for informative purpose, this line is what should have made it work, it has never been implemented */ 

  /* Chrome */
  -webkit-flex-flow: row wrap;
  -webkit-justify-content: space-between;

  /* IE10 */
  -ms-flex-flow: row wrap;
  -ms-justify-content: space-between;

  /* Opera 12.1, Firefox 20+ */
  flex-flow: row wrap;
  justify-content: space-between;
}
.item {
  margin: 10px;
  width: 300px;
  border: 1px solid red;
  -webkit-box-flex: auto;    /* iOS 6-, Safari 3.1-6 */
  -moz-box-flex: 1.0;        /* Firefox 19- */
  -webkit-flex: auto;        /* Chrome */
  -ms-flex: auto;            /* IE10 */
  flex: auto;                /* Opera 12.1, Firefox 20+ */
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T09:37:23.680

您可以通过两种方式执行此操作（如果您知道 .items 有多少）：

**示例一：** 浮动 .items 作品，参见小提琴[http://jsfiddle.net/David_Knowles/wh5bP/](http://jsfiddle.net/David_Knowles/wh5bP/)

```
#container { 
    margin: 100px; 
    overflow:hidden;
    border: 1px solid blue; 
}
.item { 
    width: 23%; /* important: (100% / numberOfItems - margin%) */
    margin: 0 1%; /* important */
    float:left; /* important */
    -moz-box-sizing: border-box; /* only needed to compensate for the border used in your debugging */
    -webkit-box-sizing: border-box; 
    box-sizing: border-box;
    border: 1px solid red; 
```

}

**示例二：**

行内块元素对换行符之间的空白很敏感。注意 .items 之间没有空格。[http://jsfiddle.net/David_Knowles/wh5bP/1/](http://jsfiddle.net/David_Knowles/wh5bP/1/)

```
<div id="container">
    <div class="item">Item One</div><div class="item">Item Two</div><div class="item">Item Three</div><div class="item">Item Four</div>
</div>

.item { 
    width: 23%;
    margin: 0 1%;
    display:inline-block;
    -moz-box-sizing: border-box;
    -webkit-box-sizing: border-box; 
    box-sizing: border-box;
    border: 1px solid red; 
```

}

如果你永远不知道会有多少 .items ，那么你可以看看 flexbox 模型。 [http://css-tricks.com/using-flexbox/](http://css-tricks.com/using-flexbox/) [http://caniuse.com/flexbox](http://caniuse.com/flexbox)

如果您的目标受众使用 IE9 或更低版本，那么您还需要使用 polyfill。 [http://flexiejs.com/](http://flexiejs.com/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-21T13:31:54.260

这是 Flexbox 的工作，但您必须决定如何为非 Flexbox 浏览器布局。将事物与中心对齐可能是您最好的选择。

[http://codepen.io/cimmanon/pen/lBDwu](http://codepen.io/cimmanon/pen/lBDwu)

```
ul {
  display: -webkit-flexbox;
  display: -ms-flexbox;
  display: -webkit-flex;
  -webkit-flex-wrap: wrap;
  -ms-flex-wrap: wrap;
  flex-wrap: wrap;
  list-style: none;
  padding: 0;
  text-align: center;
  /*  text-align: justify;
    -moz-text-align-last: justify;
    text-align-last: justify;*/
}
@supports (flex-wrap: wrap) {
  ul {
    display: flex;
  }
}

li {
  display: inline-block;
  -webkit-flex: 1 0;
  -ms-flex: 1 0;
  flex: 1 0;
  min-width: 10em;
  background: #CCC;
  border: 1px solid;
  margin: .5em;
} 
```

由于需要换行，只有 Chrome、Opera 和 IE10 可以做到这一点。其他所有人都将获得回退体验。

# git - git svn fetch 后修改的文件。这是什么意思以及如何解决

> ID：16129669
> 
> 赞同：0
> 
> 时间：2013-04-21T09:20:59.393
> 
> 标签：git, svn, git-svn

我们将使用 git 而不是 SVN 并且目前正在做一些研究。我尝试基于我们的 SVN 创建 git 存储库。`git svn`是完美的。但是在克隆/获取之后，我在几个存储库中看到了修改过的文件（实际上是 4 个中的 2 个）。

那是什么？如何克服它？

更新：在两个已修改文件的存储库中，我们可以看到相同：已修改的文件名称中包含大写字母。例如：`paid.gif`and`Paid.gif`存在于 SVN 中，也存在于 GIT 中，并且`Paid.gif`以某种方式被修改。不仅图像，而且命名相同（但字母大小写不同）的其他文件也会被修改。

svn repo 也在 Linux 上，但 git 在我的 Mac 上，也许这很重要。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T13:07:52.680

然后很容易。MacOS 文件名[不区分大小写](http://forums.macrumors.com/showthread.php?t=1037142)。所以内容是矛盾的。这不是 git 错误，所以要么在 Linux 上工作，要么重新格式化硬盘，要么重命名文件以避免冲突。或者也许可以在 Mac 上使用另一个文件系统？

# php - php mysql+ 注意：C 中数组到字符串的转换

> ID：16129670
> 
> 赞同：0
> 
> 时间：2013-04-21T09:21:01.783
> 
> 标签：php, mysql, error-handling, explode

当我尝试用逗号爆炸数组时，我不断收到此错误，如何解决此错误任何人都可以帮助我？？？

# 朋友请求.php

```
 <?php

     if(isset($_POST['acceptrequest'.$user_from]))
     {
         //select the friend array  row  from the logged in user
         $get_friend_check = mysql_query("SELECT friend_array FROM user WHERE user_name = '$login_user'") or die(mysql_error());
         $get_friend_row = mysql_fetch_assoc($get_friend_check);
         $friend_array = $get_friend_row['friend_array'];
         $friendArray_explode = explode(",", $friend_array);
         echo $friendArray_explode;
     }
     ?>

The last line of code produce this error how to fix it ?? 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T09:22:29.633

这是一个*通知*（不是错误！） - 您正在尝试打印一个数组，就好像它是一个字符串一样。使用`print_r`or`var_dump`代替`echo`：

```
print_r($friendArray_explode); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T09:28:33.087

这是因为您试图 pinrt 一个数组，因为它是一个仅使用 echo 的字符串。对于数组，您可以同时使用`print_r`或`var_dump`

我还建议您停止使用 `mysql_`api，因为它们已被贬低，请切换到[`PDO`](http://php.net/manual/en/book.pdo.php)或[`mysqli`](http://www.php.net/manual/en/book.mysqli.php)

此外，您已经准备好`mysql injection`。这里有一个很好的教程，它向您解释了所有相关内容 ->[如何防止 PHP 中的 SQL 注入？](https://stackoverflow.com/questions/60174/how-to-prevent-sql-injection-in-php)

# c++ - 优化我的 read() 循环 C（两个循环合二为一）

> ID：16129673
> 
> 赞同：4
> 
> 时间：2013-04-21T09:21:23.447
> 
> 标签：c++, c, linux, unix

我需要读取文件并将它们存储在 mainbuff 和 mainbuff2 中。

我应该只使用`open()`, `read()`,`write()`等系统调用。

我不想将它们存储在堆栈中，如果它会很大怎么办？堆分配更好。

此代码有效：

```
...
    char charbuf;
    char *mainbuff1=malloc(100);
    char *mainbuff2=malloc(100);
    while (read(file1, &charbuf, 1)!=0)
            mainbuff1[len++]=charbuf;
    while (read(file2, &charbuf, 1)!=0)
            mainbuff2[len2++]=charbuf;
... 
```

但 mainbuff 只有 100 个字符。更好的解决方案是在计算文件中的字符后分配 mainbuff，如下所示：

```
...
    char charbuf;
    while (read(file1, &charbuf, 1)!=0)
            len++;
    while (read(file2, &charbuf, 1)!=0)
            len2++;
    char *mainbuff1=malloc(len);
    char *mainbuff2=malloc(len2);
... 
```

然后再次重复`while`循环并将字节读入 mainbuff。

但是 2 个循环（第一个将读取和计数，第二个将读取）对于大文件来说效率低且速度慢。需要以一种或其他更有效的方式来完成。请帮忙！不知道！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-21T09:29:36.103

您可以使用`fstat`来获取文件大小而不是读取两次。

```
#include <sys/stat.h>

int main() {
    struct stat sbuf;
    int fd = open("filename", O_RDWR);
    fstat(fd, &sbuf);
    char *buf = malloc(sbuf.st_size + 1);
} 
```

但是，真的，担心效率的时候是在它*工作*得太慢之后。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-21T09:29:26.603

如果这确实是一个需要优化的地方，那么你真正应该优化的是以下两点：

*   缓冲区分配
*   来电次数`read()`和`write()`

对于 100 到 1000 字节的小缓冲区，没有理由使用`malloc()`之类的，只需在堆栈上分配缓冲区，它会是最快的。当然，除非您想从函数返回指向这些缓冲区的指针，在这种情况下您可能应该使用`malloc()`. 否则，您应该考虑使用全局/静态数组而不是动态分配的数组。

至于 I/O 调用，调用`read()`并`write()`使用整个缓冲区大小。不要调用它们来读取或写入单个字节。转换到内核并返回确实有成本。

此外，如果您希望需要在 RAM 中处理相当大的文件，请考虑使用文件映射。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-21T09:29:01.057

`stat`等。允许您获取文件大小。[http://linux.die.net/man/2/fstat](http://linux.die.net/man/2/fstat)

或者，如果你不能使用， http: `lseek` [//linux.die.net/man/2/lseek](http://linux.die.net/man/2/lseek)（特别注意返回值）

如果你也不能使用它，你可以随时使用`realloc`你的缓冲区。

我把它留给你来实施，因为这显然是一项任务。;)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-21T09:44:43.157

在优化任何东西之前，您必须**分析您的代码**。有很多工具可以做到这一点：

*   瓦尔格林
*   英特尔 VTune
*   时间
*   AMD 代码分析器

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-21T10:04:04.887

定义一个自动直接扩展的数组。像这样

```
#include <stdio.h>
#include <stdlib.h>

typedef struct dynarray {
    size_t size;
    size_t capacity;
    char *array;
} DynArray;

DynArray *da_make(size_t init_size){
    DynArray *da;
    if(NULL==(da=(DynArray*)malloc(sizeof(DynArray)))){
        perror("memory not enough");
        exit(-1);
    }
    if(NULL==(da->array=(char*)malloc(sizeof(char)*init_size))){
        perror("memory not enough");
        exit(-1);
    }
    da->size = 0;
    da->capacity=init_size;
    return da;
}

void da_add(DynArray *da, char value){
    da->array[da->size] = value;
    if(++da->size == da->capacity){
        da->array=(char*)realloc(da->array, sizeof(char)*(da->capacity += 1024));
        if(NULL==da){
            perror("memory not enough");
            exit(-1);
        }
    }
}

void da_free(DynArray *da){
    free(da->array);
    free(da);
}

int main(void) {
    DynArray *da;
    char charbuf;
    int i;

    da = da_make(128);
    while(read(0, &charbuf, 1)!=0)
        da_add(da, charbuf);
    for(i=0;i<da->size;++i)
        putchar(da->array[i]);
    da_free(da);
    return 0;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-21T09:30:27.767

为什么你需要内存中的所有内容？您可以进行大块读取、处理、读取下一个块等，
除非您有足够的内存，否则您无法将所有内容都保留在您的 buff 中。你的目标是什么？

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-21T09:46:55.503

如果，如您所说，您只使用*系统调用*，您可能能够摆脱使用整个堆作为缓冲区。

```
#include <unistd.h>
#include <signal.h>
#include <stdio.h>
#include <sys/types.h>
#include <fcntl.h>

size_t sz;
void fix(x){signal(SIGSEGV,fix);sbrk(sz *= 2);}
int main() {
    sz = getpagesize();
    signal(SIGSEGV,fix);
    char *buf = sbrk(sz);
    int fd = open("filename", O_RDWR);
    read(fd, buf, -1);
} 
```

但是如果你碰巧调用了一个使用 malloc 的库函数，Kablooey！

`brk`and`sbrk`函数使您可以直接访问 malloc 使用的同一堆。但是没有任何 malloc 的“开销”。并且没有任何 malloc 的*功能*，例如`free`, `realloc`。`sbrk`以字节为单位调用并返回一个`void *`. `brk`使用指针值调用（即，您只是*想象*指针存在并以某种方式将其*声明*为`brk`），并返回`void *`.

通过使用`brk`or分配内存，它使用的空间与 malloc 在第一次调用or`sbrk`时尝试设置和使用的空间相同。*并且许多库函数在*后台使用 malloc ，因此有很多方法可以破坏此代码。这是一个非常奇怪和有趣的领域。`malloc``realloc`

 *这里的信号处理器也很危险。它会自动为您提供无限空间，但是当然，如​​果您遇到任何其他类型的分段违规，例如取消引用 NULL 指针，处理程序将无法修复该问题，并且它不会再崩溃。所以这会使程序进入一个讨厌的循环：重试内存访问，分配更多空间，重试内存访问，分配更多空间。*

# c++ - win32按钮一直闪烁

> ID：16129675
> 
> 赞同：0
> 
> 时间：2013-04-21T09:21:40.840
> 
> 标签：c++, visual-studio-2010, winapi, button

我用win32 c++制作了一个小游戏，运行良好，但我有一些按钮闪烁的小问题。我猜这与我经常发送 WN_PAINT 的事实有关。

```
InvalidateRect(hwnd, NULL, false);
UpdateWindow(hwnd); 
```

我像这样用 CreateWindow() 制作了按钮

```
CreateWindow(TEXT("button"),  TEXT(BTN_SAVE), WS_VISIBLE | WS_CHILD, 
            client.right - offset[1] - 170, client.bottom - offset[3], 
            80, 25, hwnd, (HMENU)ID_BTN_SAVE, NULL, NULL); 
```

有人遇到过这个问题吗？有什么办法可以解决吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-21T09:49:46.293

将`WS_CLIPCHILDREN`样式添加到父窗口。

`WS_CLIPCHILDREN`

当在父窗口中进行绘制时，排除子窗口占用的区域。创建父窗口时使用此样式。

[http://msdn.microsoft.com/en-us/library/windows/desktop/ms632600%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms632600%28v=vs.85%29.aspx)

# macos - 适用于 Mac OS X 的 gtkmm-2.4-dev

> ID：16129676
> 
> 赞同：2
> 
> 时间：2013-04-21T09:21:51.533
> 
> 标签：macos, gtkmm, fink

我正在尝试使用 fink 为 Mac OS X 安装 gtkmm-2.4-dev。

`sudo fink install gtkmm-2.4-dev`

但我得到以下回复：

`Failed no package found for specification 'gtkmm-2.4-dev'!`

我知道 gtkmm-2.4-dev 有一个 fink 包（根据[http://www.gtkmm.org/en/download.html](http://www.gtkmm.org/en/download.html)），但我无法安装它。

似乎 fink DB 崩溃了：http: [//fink.thetis.ig42.org/pdb/package.php/gtkmm2.4-dev](http://fink.thetis.ig42.org/pdb/package.php/gtkmm2.4-dev)

还有其他方法可以在 Mac 上安装这些库吗？

我希望你能帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T11:06:58.787

解决方案： `sudo fink install gtkmm2.4-gtk-dev`

# smtp - Telnet 进入 SMTP 端口 25 会出现黑屏

> ID：16129682
> 
> 赞同：1
> 
> 时间：2013-04-21T09:22:40.377
> 
> 标签：smtp, telnet

就在今天早上，外发邮件服务器停止工作。

当我远程登录到 110 时，它完美地连接到 POP3。

当我 telnet 进入 25 时，它只是进入一个没有错误消息的空白屏幕。按任意键终止 Telnet 并返回命令提示符。

看来端口正在工作。服务器也在工作，因为从其他位置发送它工作正常。有些只是办公室受到影响，并且仅针对端口 25。

知道是什么原因造成的吗？互联网似乎运行良好。Internet 提供商没有阻止端口 25 - 因为它可以到达端口 25，只是由于某种原因没有成功建立连接。

# mysql - “service mysql start”启动mysql需要多长时间？

> ID：16129690
> 
> 赞同：2
> 
> 时间：2013-04-21T09:23:34.577
> 
> 标签：mysql, sql, terminal

我运行了一个 service mysql stop 并在它后面跟着一个 service mysql start，但是，这个过程现在已经持续了大约 2 个小时，我不知道终止这个过程是否是一个坏主意。有任何想法吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-11-30T22:07:16.253

我不得不写答案，因为我没有足够的声誉来发表评论。

我正在处理同样的问题。MySQL 版本 5.7.9。我正在处理一些配置设置，我意识到某些配置以某种方式阻止了 MySQL 服务器的启动。它只是不断尝试启动服务器，没有错误。这些是我试图从 URL [https://dba.stackexchange.com/a/41873](https://dba.stackexchange.com/a/41873)配置的配置：

```
innodb_buffer_pool_size=4G
innodb_buffer_pool_instance=2
innodb_read_io_threads=12
innodb_write_io_threads=12
innodb_io_capacity=300
innodb_log_file_size=128M 
```

免责声明：我写这个答案只是因为我认为它可能对某人有用，但我也对 OP 很生气。他/她可能以某种方式解决了问题（重新安装也是一个答案）但没有写下来。

# bash - zsh：动态生成字符串的bash脚本比较

> ID：16129691
> 
> 赞同：3
> 
> 时间：2013-04-21T09:23:51.117
> 
> 标签：bash, zsh

这按预期工作： -

```
x="None of the specified ports are installed"
if [ "$x" = "None of the specified ports are installed" ]; 
    then echo 1; 
    else echo 0; 
fi 
```

我得到`1`了，这是我所期待的。

但这不起作用：-

```
y="`port installed abc`"
if [ "$y" = "None of the specified ports are installed" ]; 
    then echo 1; 
    else echo 0; 
fi 
```

我得到`0`了，这不是我所期望的；虽然

```
echo $y 
```

给`None of the specified ports are installed.`

这里的主要区别是`$y`由`port installed abc`命令动态确定。但是为什么这会影响我的比较呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T09:41:40.150

仔细注意。

```
未安装指定端口

```

不相等

```
未安装任何指定的端口。
                                         ^
                                        /
                          在那里  - 

```

另外的选择

```
y=$(port installed abc)
z='None of the specified ports are installed'
if [[ $y =~ $z ]]
then
  echo 1
else
  echo 0
fi 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T09:51:22.540

另一种方法对诸如遗漏“。”之类的粗心错误不太敏感。

```
y="`port installed abc`"
if [[ "$y" = *"None of the specified ports are installed"* ]]; 
    then echo 1; 
    else echo 0; 
fi 
```

使用`[[ ]]`给出了更强大的比较语句。

也代替使用

```
y="`port installed abc`" 
```

最好写

```
y=$(port installed abc) 
```

只是在 bash irc 频道上与其他开发人员讨论的一些发现。

# php - sql中的换行问题

> ID：16129696
> 
> 赞同：-1
> 
> 时间：2013-04-21T09:24:23.110
> 
> 标签：php, sql, database

我已使用“类型：文本”将文本存储在我的数据库中。

```
-This is a line

-This is a new line

-This is another line. 
```

当我试图检索数据时。这就是我得到的。

```
-This is a line-This is a new line-This is another line. 
```

我如何告诉我的数据库不要忽略换行符。

这就是我打印查询的方式。

```
$query = "SELECT text FROM my_text";

$mysql_query = mysql_query
echo $mysql_result_text = mysql_result($mysql_query, '0', 'text'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T09:52:43.410

首先，这是什么意思：

```
$query = "SELECT text FROM my_text";

$mysql_query = mysql_query
echo $mysql_result_text = mysql_result($mysql_query, '0', 'text'); 
```

我认为，下面的代码就是你的意思：

```
$mysql_query = "SELECT text FROM my_text";
echo $mysql_result_text = mysql_result($mysql_query, '0', 'text'); 
```

您可以检查下面的 PHP 脚本以从源代码中创建换行符：

```
$mysql_query = "SELECT text FROM my_text";
$mysql_result_text = mysql_result($mysql_query);

while($row = mysqli_fetch_array($mysql_result_text)) {
    echo $row['text'] . "\n";
} 
```

或者这个 PHP 脚本，如果你想`<br />`在源代码上有一个标签：

```
$mysql_query = "SELECT text FROM my_text";
$mysql_result_text = mysql_result($mysql_query);

while($row = mysqli_fetch_array($mysql_result_text)) {
    echo $row['text'] . "<br />\n";
} 
```

* * *

现在，如果输出全部来自同一个字段而不是来自不同的行，您可以检查一下是否使用`<pre>`标签有效：

```
$mysql_query = "SELECT text FROM my_text";
echo $mysql_result_text = "<pre>" . mysql_result($mysql_query, '0', 'text') . "</pre>"; 
```

# jquery - 如何获取彩色 JQuery 图标而不是黑色

> ID：16129701
> 
> 赞同：0
> 
> 时间：2013-04-21T09:25:16.973
> 
> 标签：jquery, css, jquery-ui

我在我的页面中使用 jQuery 主题“mint-choc”。小部件内的所有图标都显示为绿色。我可以执行以下操作将图标添加到我自己的 DOM 对象中：

```
<span class="ui-icon ui-icon-triangle-1-n"></span> 
```

虽然图标确实显示得很好，但它们是黑色的——与我使用的主题颜色不同。我应该添加另一个类以将颜色更改为我的主题使用的相同颜色吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T23:11:59.493

默认图标集为`ui-icon`：

```
.ui-icon,.ui-widget-content .ui-icon {
background-image: url(images/ui-icons_222222_256x240.png); 
```

此图像是一组黑色图标。

对于绿色，您要添加此类

```
.ui-state-default .ui-icon {
   background-image: url(images/ui-icons_9bcc60_256x240.png);
} 
```

图标有六种不同的颜色。查看从第 929 行开始的 css 文件以查看所有这些文件。

如果您检查主题页面，您可以看到每个图标的设置如下：

```
<li class="ui-state-default ui-corner-all" title=".ui-icon-carat-1-e">
    <span class="ui-icon ui-icon-carat-1-e"></span>
</li> 
```

将 更改为`ui-state-default`以下任何一项以更改字体颜色。

*   ui-widget 内容
*   ui-widget-header
*   ui-state-focus
*   ui-state-active
*   ui-state-highlight
*   用户界面状态错误

# google-chrome - Popup.html 在 Chrome 扩展程序中不起作用。我怎样才能让它再次工作？

> ID：16129703
> 
> 赞同：1
> 
> 时间：2013-04-21T09:25:43.927
> 
> 标签：google-chrome, google-chrome-extension, popup

当我单击 Chrome 中的扩展程序图标时，没有弹出任何内容。它应该做的是弹出popup.html页面。

我什至尝试了一年多前制作的扩展的旧工作版本。但是它也不起作用，这让我相信 Chrome 一定已经改变了它处理 Chrome 扩展的 popup.html 的方式。

此外，如果我右键单击该图标并选择“检查弹出窗口”，该选项将被禁用（灰显）。

这是我的代码：

**显现**

```
 "browser_action": {
    "default_icon": "images/icon.png",
    "popup": "html/popup.html"
  }, 
```

**弹出文件：`/html/popup.html`**

```
<!doctype html>
  <html>
   <head>
    <style type="text/css">
        body {
            width: 200px;
            height: 200px;
        }
    </style>
   </head>
   <body>
    TEXT TEXT TEXT
   </body>
  </html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-21T09:38:40.807

该领域`default_popup`不是`popup`。尝试更改它，然后它应该可以工作。

# windows-phone-7 - radbusyindicator 工作不正常

> ID：16129707
> 
> 赞同：0
> 
> 时间：2013-04-21T09:26:01.017
> 
> 标签：windows-phone-7, telerik

我在加载数据时使用 radbusyindicator。但它不能正常工作。下面是代码

```
 public MainPage()
       {
          InitializeComponent();
          DataContext = App.Model;   
          this.Dispatcher.BeginInvoke(new Action(() =>
            {
            radbusyIndicator.IsRunning = true;
            SampleData.Data.getInfo();
            SampleData.Data.getData();

        }));

        radbusyIndicator.IsRunning = false;   
    } 
```

如果我这样做会发生什么是指标继续运行。看起来控件在 radbusyIndi​​cator.IsRunning = false 之后转到调度程序；被执行。但是我不知道如何在加载数据后禁用它。尝试了很多方法，但无法使其工作。任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T09:39:56.017

调度程序回调可能 100% 的情况下会在

`radbusyIndicator.IsRunning = false`

线。

请尝试以下操作：

```
public MainPage()
{
    InitializeComponent();
    DataContext = App.Model;   
    this.Dispatcher.BeginInvoke(new Action(() =>
    {
        radbusyIndicator.IsRunning = true;
        SampleData.Data.getInfo();
        SampleData.Data.getData();
        radbusyIndicator.IsRunning = false;   
    }));
} 
```

这是因为编组对 UI 线程的调用的行为需要一些 CPU 周期，而原来`radbusyIndicator.IsRunning = false`的几乎是下一行要运行的。

无论如何都没有关系，因为您要么会得到一个短暂的忙碌指示器闪烁，要么它会永远留在屏幕上，因为你在工作完成*后不隐藏它，你会立即隐藏它*

编辑：

是的，忽略最后一个 - 意识到它不起作用：

如果方法是异步的，指示器将立即隐藏，如果它们不是异步的，UI 线程将在它们工作时被阻塞

如果您的方法是同步的，您需要在另一个线程上完成工作，并使用调度程序将 UI 更新编组到 UI 线程

您可以使用`BackgroundWorker`在另一个线程上工作：

[http://msdn.microsoft.com/en-us/library/cc221403%28v=vs.95%29.aspx](http://msdn.microsoft.com/en-us/library/cc221403%28v=vs.95%29.aspx)

```
BackgroundWorker bw = new BackgroundWorker();

private void bw_DoWork(object sender, DoWorkEventArgs e)
{
    this.Dispatcher.BeginInvoke(new Action(() =>
    {
        radbusyIndicator.IsRunning = true;
    }));

    SampleData.Data.getInfo();
    SampleData.Data.getData();

    this.Dispatcher.BeginInvoke(new Action(() =>
    {
        radbusyIndicator.IsRunning = false;   
    }));
} 
```

然后在你的构造函数中：

```
bw.DoWork += new DoWorkEventHandler(bw_DoWork);
bw.RunWorkerAsync(); 
```

# android - 如何在我的网格视图中添加复选框？

> ID：16129709
> 
> 赞同：0
> 
> 时间：2013-04-21T09:26:07.563
> 
> 标签：android

如何在我的网格视图中添加复选框，我使用的是简单的适配器，我该怎么办？如何在我的网格中添加复选框请帮助我如何在我的代码中添加复选框有人可以帮助我吗？如何在gridview中添加复选框以便用户选择多张图片

```
 SimpleAdapter simpleAdapter;
     GridView gridView;

  public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    File photos = new File(getFilesDir(),"photos");
    photos.mkdirs();

    File root1 = new File("/data/data/com.newsoftwares.folderlock/files/");

    currentParent = root1;
    currentFiles = root1.listFiles();

    currentFilePath = new String[currentFiles.length];
    int count = 0;

    for(File f:currentFiles)
    {   
        currentFilePath[count] = f.getAbsolutePath();
        count++;
    }

    gridView =(GridView)findViewById(R.id.grid);
    gridView.setOnItemClickListener(new OnItemClickListener(){
        public void onItemClick(AdapterView<?> parent, View view, int 
        position,long id) {

        if(currentFiles[position].isDirectory())
        {
            root = new File("/data/data/com.myexample.folderlock
         /files/"+FileName(currentFilePath[position])+"/");

            Log.e("Root first",root+ " ");

            currentFiles = root.listFiles();

            inflateListView(currentFiles);
        }
        else if(currentFiles[position].isFile())
        {
              inflateListView(currentFiles);    
                   }

        private void inflateListView(File[] files){

List<Map<String,Object>> listItems = new ArrayList<Map<String,Object>>();

for(int i=0;i<files.length;i++)
{       
        Map<String, Object> listItem = new HashMap<String, Object>();

        if(files[i].isDirectory())
        {
            listItem.put("icon", R.drawable.folder);
        }
        else
        {
            listItem.put("icon", R.drawable.file);
        }

        listItem.put("fileName", files[i].getName());
        listItems.add(listItem);
    }

    simpleAdapter=new SimpleAdapter(this,listItems,R.layout.line,new String[] 
     {"icon","fileName"},new int[]{R.id.icon,R.id.file_name});
    gridView.setAdapter(simpleAdapter);
     sendBroadcast(new Intent(Intent.ACTION_MEDIA_MOUNTED, Uri.parse("file://" 
        + Environment.getExternalStorageDirectory())));

   } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T09:32:14.350

你不能在gridview中做到，但你可以在listview中做到

这是主要活动

```
package com.example.checkboxingridview;

import android.os.Bundle;
import android.app.Activity;
import android.util.Log;
import android.view.Menu;
import android.view.View;
import android.widget.CheckBox;
import android.widget.ImageButton;
import android.widget.ListView;

public class MainActivity extends Activity {

    ListView checkboxList;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        checkboxList = (ListView) findViewById(R.id.listView1);
        checkboxList.setAdapter(new CustomAdapter(context, resource, textViewResourceId, objects));

    }

    // do what you want if this item checked
    void checkBoxChecked(View v) {
        CheckBox checkbox= (CheckBox)v;
        Object rowObject =checkbox.getTag();
        // here we can do what we want in this checkbox
    }

} 
```

和自定义适配器

```
package com.example.checkboxingridview;

import java.util.List;

import com.example.pos.R;
import com.util.TransactionCustomAdapter.ViewHolder;

import android.annotation.SuppressLint;
import android.content.Context;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ArrayAdapter;
import android.widget.CheckBox;
import android.widget.ImageButton;
import android.widget.TextView;

public class CustomAdapter extends ArrayAdapter {

    Context context;
    int layoutResourceId;
public CustomAdapter(Context context, int resource, int textViewResourceId,
        List objects) {
    super(context, resource, textViewResourceId, objects);
    // TODO Auto-generated constructor stub
}

@SuppressLint("NewApi")
@Override
public View getView(int position, View convertView, ViewGroup parent) {
    View row = convertView;
    ViewHolder holder;

    if (row == null) {
        LayoutInflater inflater = (LayoutInflater) parent.getContext()
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        row = inflater.inflate(R.layout.list_row_item, null);

        holder = new ViewHolder();

        holder.setCheckBox((CheckBox) row.findViewById(R.id.checkBox1));

        row.setTag(holder);
    } else {
        holder = (ViewHolder) row.getTag();
    }

    // set tag by the object of this list item
    holder.voidBtn.setTag(itemListObject);

    // StrictMode.ThreadPolicy policy = new
    // StrictMode.ThreadPolicy.Builder()
    // .permitAll().build();
    // StrictMode.setThreadPolicy(policy);

    return row;
}

static class ViewHolder {

    CheckBox checkBox;

    public CheckBox getCheckBox() {
        return checkBox;
    }

    public void setCheckBox(CheckBox checkBox) {
        this.checkBox = checkBox;
    }

} 
```

}

main_activity.xml

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
tools:context=".MainActivity" >

<ListView
    android:id="@+id/listView1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_centerHorizontal="true" >
</ListView> 
```

# c++ - 模板类在 C++ 中生成错误

> ID：16129710
> 
> 赞同：1
> 
> 时间：2013-04-21T09:26:15.617
> 
> 标签：c++, class, templates

该程序未编译。有什么问题？

```
#include<iostream>
#include<map>
using namespace std;

template<class T>class Data{
    string header;
    T data;
public:
    Data(string h, T d){header = h, data = d;}
    void WriteData()
    {
        cout<<header<<": "<<data<<endl;
    }
};

int main(int argc, _TCHAR* argv[])
{
    Data<int> idata("Roll", 100);

    Data<string>sdata("Name","Jakir");

    idata.WriteData();
    sdata.WriteData();
    return 0;
} 
```

显示以下错误。

> 错误 C2679：二进制“<<”：未找到采用“std::string”类型右侧操作数的运算符（或没有可接受的转换）c:\program files (x86)\microsoft visual studio 10.0\vc \include\ostream(679): 可以是 'std::basic_ostream<_Elem,_Traits> &std::operator <<>(std::basic_ostream<_Elem,_Traits> &,const char *)' 与 [ _Elem=char, _Traits=std::char_traits ]
> 
> 尝试匹配参数列表'(std::ostream, std::string)' .....\maptest\mapt\mapt\mapt.cpp(16)：同时编译类模板成员函数'void Data:: WriteData(void)' 与 [ T=int ]

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-21T09:26:53.450

您似乎忘记了：

```
 #include <string> 
```

您不能指望传递包含所有必要的头文件，因为其他一些头文件`<iostream>`可能会像`#include`它们一样。

如果您使用`std::string`s，您应该明确地`#include`使用适当的标头 ( `<string>`)。

`operator <<`接受 an的重载可能在*不是*d by`std::string`的标头中声明/定义。 *`#include``<iostream>`*

 *此外，避免`using`在全局命名空间范围内使用指令，例如：

```
using namespace std; 
```

它们很容易导致名称冲突，这通常被认为是一种不好的编程习惯。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-21T09:42:02.117

T_char 类型不正确，因为 argv 应该有一个类型，例如 char*

正确的源代码是

```
#include<iostream>
#include<map>
#include<string>
using namespace std;

template<class T>class Data{
    string header;
    T data;
public:
    Data(string h, T d){header = h, data = d;}
    void WriteData()
    {
        cout<<header<<": "<<data<<endl;
    }
};

int main(int argc, char* argv[])
{
    Data<int> idata("Roll", 100);

    Data<string>sdata("Name","Jakir");

    idata.WriteData();
    sdata.WriteData();
    return 0;
} 
```*

# java - 找不到调用应用程序的 URL；得到 404 响应

> ID：16129713
> 
> 赞同：0
> 
> 时间：2013-04-21T09:26:27.010
> 
> 标签：java, http-status-code-404

我部署了一个带有 ear 文件的应用程序，但无法使用以下 URL 调用该应用程序

```
http://localhost:8989/RetailProducts/faces/eBusiness.jsp 
```

我创建了动态项目并为 UI 做了所有的事情。然后我创建了 EJB 项目并完成了 EJB 所需的所有内容。

当我在服务器上独立部署上述模块时，它可以正常使用上述 URL。

当我创建新的企业项目并创建 EAR 文件时，我收到 404 响应。我究竟做错了什么？

下面是包结构的图像。

![在此处输入图像描述](https://i.stack.imgur.com/SLqDd.jpg)

这是控制台上的消息

> 严重：PWC6117：找不到文件“C:\glassfish3\glassfish\domains\retailproduct\docroot\RetailProducts\faces\eBusiness.jsp”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T09:31:16.983

打开 eBussiness.jsp 页面，右键单击它，然后选择`Run`.

现在检查浏览器上的 URL。

希望你能明白。

# ruby-on-rails - 如何将值插入数据库？

> ID：16129714
> 
> 赞同：0
> 
> 时间：2013-04-21T09:26:45.997
> 
> 标签：ruby-on-rails

这是我的迁移

```
create_table :customers do |t|
  t.string "name", :limit => 25 , :null => false
  t.string "email", :limit => 25, :null => false
  t.string "question", :limit => 255 , :null => true
  t.integer "status", :limit => 1, :default => 0, :null => false
  t.timestamps
end 
```

现在，在模型中，我想使用以下代码插入一个值：

```
Customers.new(:name => name, :email => email, :question => question, :status => 1) 
```

但是值没有插入到表中，为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T09:31:10.750

因为你还没有真正**保存**它。

```
customer = Customer.new(:name => name, :email => email, :question => question, :status => 1)
if custom.save
  // Saved succefully
else
  // Failed to save
end 
```

或者只是`create`使用

```
customer = Customer.create!(:name => name, :email => email, :question => question, :status => 1) 
```

使用 bang after `create`，如果失败，它应该会引发错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T09:36:28.780

如果要插入一行，则需要使用如下**创建**方法

```
Customers.create(:name => name, :email => email, :question => question, :status => 1) 
```

否则，您需要创建新对象，然后需要使用 save 方法在 DB 中创建新记录，如下所示

```
customer = Customers.new(:name => name, :email => email, :question => question, :status => 1)
customer.save 
```

如果您需要更多说明，请告诉我。

# python - 两个python的pip安装

> ID：16129720
> 
> 赞同：1
> 
> 时间：2013-04-21T09:27:34.810
> 
> 标签：python, pip

我是 pip 的新手，我已经用它在我的系统上安装了一些模块，比如 pyglet，成功。我有 2 个版本的 python，2.7 和 3。当我使用 python3 时，pyglet 工作正常，但在 python2 中，它告诉我找不到模块 pyglet。

如何 pip 安装到 python2 和 python3？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T09:38:40.227

pip 只会安装到一个 python 环境。

听起来 pip 已安装到您的 python3 环境中，您需要再次安装到 python2。

pip 脚本通过#! 线

要为您的 python 2 获取 pip，您的机器上已经有一个 pip2* 脚本，或者您需要为 python2 安装 pip

有关安装 pip 的详细信息，请参阅此[问题](https://stackoverflow.com/questions/4324558/whats-the-proper-way-to-install-pip-virtualenv-and-distribute-for-python?rq=1)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-21T09:31:26.980

我认为您需要的是 virtualenv [https://pypi.python.org/pypi/virtualenv](https://pypi.python.org/pypi/virtualenv)。virtualenv 是一个创建隔离 Python 环境的工具

# php - 无法将数据从 android 发送到 PHP

> ID：16129721
> 
> 赞同：3
> 
> 时间：2013-04-21T09:27:36.817
> 
> 标签：php, android, mysql

我是开发android应用程序的新手。我需要将 ID 存储在 WAMP 服务器中。当我尝试运行我的代码时，模拟器显示“不幸的是我的应用程序已停止”消息，我无法将数据从 android 发送到 PHP。

在过去的两天里，我正在尝试解决这个问题。我将我的活动添加到清单文件中。这是我的 .java 文件：

```
public class MainActivity extends Activity {
    private ProgressDialog pDialog;

    JSONParser jsonParser = new JSONParser();
    EditText inputid;

    private static String url_sample = "http://localhost/android_connect/sample.php";
    // JSON Node names
    private static final String TAG_SUCCESS = "success";

    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        // Edit Text
        inputid = (EditText) findViewById(R.id.editText1);

        Button button1 = (Button) findViewById(R.id.button1);
        button1.setOnClickListener(new View.OnClickListener() {
            public void onClick(View view) {
                // creating new product in background thread
                new add().execute();
            }
        });
    }

    class add extends AsyncTask<String, String,String> {
      /**
       * Before starting background thread Show Progress Dialog
       * */
       @Override
        protected void onPreExecute() {
            super.onPreExecute();
            pDialog = new ProgressDialog(MainActivity.this);
            pDialog.setMessage("your Registration is processing..wait for few sec..");
            pDialog.setIndeterminate(false);
            pDialog.setCancelable(true);
            pDialog.show();
        }

        protected String doInBackground(String... args) {
            String id = inputid.getText().toString();

            // Building Parameters
            List<NameValuePair> params = new ArrayList<NameValuePair>();
            params.add(new BasicNameValuePair("id",id));

            // getting JSON Object
            // Note that create product url accepts POST method
            JSONObject json = jsonParser.makeHttpRequest(url_sample, "POST", params);
            // check log cat for response
            Log.d("Create Response", json.toString());

            // check for success tag
            try {
                int success = json.getInt(TAG_SUCCESS);

                if (success == 1) {
                    // successfully created product
                    Intent i = getIntent();
                    setResult(100,i);

                    // closing this screen
                    finish();
                } else {
                    // failed to create product
                }
            }
            catch (Exception e) {
                e.printStackTrace();
            }
            return doInBackground();
        }

       /**
        * After completing background task Dismiss the progress dialog
        * **/
        protected void onPostExecute(String file_url) {
            // dismiss the dialog once done
            pDialog.dismiss();
        }
    }
} 
```

PHP代码是：

```
<?php
$response = array();
if (isset($_POST['id']))
{
    $userid = $_POST['id'];
    require_once __DIR__ . '/db_connect.php';
    $db = new DB_CONNECT();
    $result = mysql_query("INSERT INTO id(ID) VALUES('$userid')");
    echo $userid;
    if ($result) 
    {
        $response["success"] = 1;
        $response["message"] = " Registered successfully";
        echo json_encode($response);
    }
    else 
    {
        $response["success"] = 0;
        $response["message"] = "Oops! An error occurred.";
        echo json_encode($response);
    }
}
else 
{
    $response["success"] = 0;
    $response["message"] = "Required field(s) is missing";
    echo json_encode($response);
}
?> 
```

PHP 和 Android 编码都没有错误..logcat 显示错误消息..有些是

```
04-09 17:06:02.552: I/Choreographer(10719): Skipped 40 frames!  The application may be doing too much work on its main thread. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T09:35:40.877

您似乎在递归调用您的代码，`doInBackground(...)`因为您再次调用`doInBackground`，并且也没有参数（可能给您一个`NoSuchMethodException`），根据您的规范，您必须返回一个字符串，但看到您没有使用结果，您不妨返回 null （或将规范更改为`Void`）。

此外，您没有看到堆栈跟踪的原因是您可能正在过滤`log`语句，而 e。`printStackTrace()`不使用日志语句。

**编辑：** 请使用 `Log.e("MyActivityNameHere", e.toString())`而不是`e.prinStackTrace()`查看异常

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T09:38:39.227

由于该行，您收到错误消息

```
 return doInBackground(); 
```

您正在递归调用 doInBackground() 方法，这会给线程带来繁重的工作负载。

尝试返回一些字符串（在你的情况下，只返回null；）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T09:53:51.423

如果您使用的是 localhost，那么您应该像这样调用 url

```
 private static String url_sample = "http://10.0.2.2/android_connect/sample.php"; 
```

# codeigniter - 根据选择的单选按钮使表格可见 - Codeigniter

> ID：16129724
> 
> 赞同：0
> 
> 时间：2013-04-21T09:28:04.020
> 
> 标签：codeigniter, radio-button

我目前有一个带有单选按钮的第一页。我希望第二页为每个不同的单选按钮显示不同的表格。

我的观点：

```
 <?php echo form_open('employee','class="form-inline"'); ?>
    <h3>Select User</h3>

        <?php echo form_dropdown('user-name', $name_list2);?>

    <h3>Select A Shift For Person 2</h3>
        <input type="radio" name="shift-type2" value="5" class="btn" data-toggle="button" <?php echo set_radio('shift-type2', '5'); ?> >Opening Cook</input><br>
            <input type="radio" name="shift-type2" value="6" class="btn" data-toggle="button" <?php echo set_radio('shift-type2', '6'); ?> >Opening Order-Taker</input><br>
            <input type="radio" name="shift-type2" value="7" class="btn" data-toggle="button" <?php echo set_radio('shift-type2', '7'); ?> >Closer</input><br>
            <input type="radio" name="shift-type2" value="8" class="btn" data-toggle="button" <?php echo set_radio('shift-type2', '8'); ?> >Saturday Cook</input><br>
            <input type="radio" name="shift-type2" value="9" class="btn" data-toggle="button" <?php echo set_radio('shift-type2', '9'); ?> >Saturday Order-Taker</input><br>

</form>

</div> 
```

我不知道在我的控制器上放什么。我想它会获取值并使用 if 语句来显示每个表。所以它应该是这样的：“如果值等于 2，则显示表 B。”

有人知道怎么做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T10:35:58.230

您可以制作`switch`并获取帖子值，然后进行比较并显示所需的视图

```
function switcherOnButton()
{
$value = $this->input->post('shift-type2'); 

switch($value)
{
   case '6':
      $this->load->view('view6'); 
   break; 
   case '7':
      $this->load->view('view7'); 
   break; 
   case '8':
      $this->load->view('view8'); 
   break; 
   case '9':
      $this->load->view('view9'); 
   break; 
}
} 
```

我希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T12:01:17.580

在你的模型

```
 function get()
 {
     $value=$_POST['shift-type2']; //get posted data from radio button

     switch($value)
     {
      case '5':
       $table_name="table_name5"; 
      break; 

      case '6':
       $table_name="table_name6"; 
      break; 

     case '7':
      $table_name="table_name7"; 
     break;     
   }

    $query=$this->db->get($table_name);
   return $query->result_array();
  } 
```

# javascript - 有问题的 JavaScript

> ID：16129725
> 
> 赞同：0
> 
> 时间：2013-04-21T09:28:10.507
> 
> 标签：javascript, html

我对网页设计和与之相关的编程非常陌生。我正在使用 JavaScript 制作一个简单的画廊，我知道使用 jQuery 非常容易。但是我不允许使用它（作业）。

这是问题所在的代码：

```
var img = new Array(); //declared globally, accessed by other functions
function displayImage(){

var img_num = document.getElementById('img_num').getAttribute("value");

for(j=0;j<img_num;j++)
  img.push(document.getElementById('h'+j).getAttribute("value"));

var list_width = 0;
for(var i=0;i<img_num;i++) 
{      
   document.getElementById('list_holder').innerHTML += "<img src='" +img[i]+ "'onclick=\"show(this.id);\" height = \"70%;\"id='"+i+"'/>";
   list_width += document.getElementById(i).offsetWidth + 15;
}

document.getElementById('list_holder').style.width = list_width+"px";
return false;
} 
```

ID 为 h0,h1,h2... 的元素是隐藏的输入类型，包含图像的路径，ID 的 0,1,2.. 是标签。

我在 JS 中使用它们来`img`使用`img.push`. 然后我使用数组中的值来创建那么多`<img>`标签（指定高度，并留出宽度以决定纵横比。现在我有必要计算父级的总**宽度**`div`（'list_width'）这些`img`标签，所以我想到了使用`list_width+=document.getElementById(i).offsetWidth`.

但是发生的事情是，当我第一次打开页面时，没有返回实际宽度。它返回`4`，这基本上是我想出的标签的最小宽度。只有在刷新页面时它才能按预期工作。我知道我可以通过在加载页面后刷新一次页面来使用解决方法，但我想知道是否有任何“首选”或“专业”方式来做到这一点。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T10:38:22.617

您必须等到图像加载完毕。您是 Javascript 新手，但您已经不得不面对异步编程。让我们在评论中看到这一点：

```
var img = []; // faster to type, use this syntax if you
              // don't define an initial length
function displayImage() {
    // The attribute value defines the initial value of the input element, and
    // it may differ from the actual value. So use the value property, not the
    // attribute.
    var img_num = document.getElementById('img_num').value;

    for(var j=0; j<img_num; j++) // Watch out, without var j is global!
        img.push(document.getElementById('h'+j).value);

    var list_width = 0,
        // We're referincing this element a lot, better store it
        lholder = document.getElementById('list_holder'),
        htmllist = []; // See the trick
    for(var i=0; i<img_num; i++)
        htmllist.push("<img src='" +img[i]
            + "'onclick=\"show(this.id);\" height = \"70%;\"id='"+i+"'/>");

    // Every time you set innerHTML, using = or +=, the browser has to parse
    // the code and rebuild the content, and it's an expensive task. Set this
    // property only once you already computed all the HTML you need.
    lholder.innerHTML = htmllist.join("");

    var loaded = 0;
    for(var i=0; i<img_num; i++)
        // You don't know when the images will be loaded. But when an image is
        // loaded, it triggers the load event that you can listen setting the
        // onload property (or, in a more modern way, setting an event listener
        // with addEventListener or attachEvent in older IE). Count the images
        // that are loaded, and when they're all loaded do your stuff.
        lholder.childNodes[i].onload = function() {
            if (++loaded < img_num) return;
            for(var i=0; i<img_num; i++)
                list_width += lholder.childNodes[i].offsetWidth;
            lholder.style.width = list_width + "px";
        };

    return false;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-21T11:11:57.453

如前所述，在查询属性之前，您必须等待图像完成加载。这是正在发生的事情的一个例子。

```
img {
    width: 50px;
    height: auto;
    float: left;
    border-style:solid;
    border-width:1px;
}
img:hover {
    width: 300px;
}

<div id="display" class="main"></div>

var display = document.getElementById("display"),
    images = {
        "F12berlinetta": "http://www.ferrari.com/Site_Collection_Image_115x55/f12_thumb_home_115x55.png",
            "458 Spider": "http://www.ferrari.com/Site_Collection_Image_115x55/110823_458_spider_menu.png",
            "FF": "http://www.ferrari.com/Site_Collection_Image_115x55/ff_thumb_home_115x55.png",
            "458 Italia": "http://www.ferrari.com/Site_Collection_Image_115x55/458_italia_menu_1_dx_ok.png",
            "Ferrari California": "http://www.ferrari.com/Site_Collection_Image_115x55/california_menu_3_sx.png"
    },
    keys = Object.keys(images),
    loaded = 0,
    menuWidth = 0,
    noWaitWidth = 0;

function clickedIt(evt) {
    alert("You chose the " + evt.target.title);
}

function onLoaded(evt) {
    loaded += 1;
    menuWidth += evt.target.offsetWidth;
    evt.target.addEventListener("click", clickedIt, false);
    if (loaded === keys.length) {
        console.log("Waited load width", menuWidth);
    }
}

keys.forEach(function (key, index) {
    var newDiv = document.createElement("div"),
        newImg = document.createElement("img");

    newImg.id = "thumb" + index;
    newImg.src = images[key];
    noWaitWidth += newImg.offsetWidth;
    newImg.title = key;
    newImg.addEventListener("load", onLoaded, false);

    newDiv.appendChild(newImg);
    display.appendChild(newDiv);
});

console.log("Didn't wait load width", noWaitWidth); 
```

在[jsfiddle上](http://jsfiddle.net/Xotic750/8JRwM/)

补充：如果这就是您的意思，这将以标准的 javascript 方式将 HTML 图像标记放置在文档中。没有你描述你不理解的东西，任何解释都很难简化；有一个对象包含图像标题及其 URL。我们循环遍历对象并将图像与标题一起放在文档中并获得不正确的图像宽度，在每个图像上我们设置一个等待图像加载的事件侦听器，当它加载时我们得到正确的图像宽度。我们还在每张图片上设置了点击监听器，它会提醒您点击了哪个图片。CSS 演示了它的标准悬停方法，因此当您将移动放在图像上时，它会缩放该图像。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T09:34:23.357

这条线有问题：

```
for(var i=0;i<img_num;i++)       
   document.getElementById('list_holder').innerHTML += "<img src='" +img[i]+ "'onclick=\"show(this.id);\" height = \"70%;\"id='"+i+"'/>";
   list_width += document.getElementById(i).offsetWidth + 15; 
```

因为你没有花括号，它只会运行循环中的第一行，将其更改为：

```
for(var i=0;i<img_num;i++){     
   document.getElementById('list_holder').innerHTML += "<img src='" +img[i]+ "'onclick=\"show(this.id);\" height = \"70%;\"id='"+i+"'/>";
   list_width += document.getElementById(i).offsetWidth + 15;
} 
```

# nhibernate - 向 QueryOver 添加动态 SQL 查询

> ID：16129732
> 
> 赞同：0
> 
> 时间：2013-04-21T09:28:51.740
> 
> 标签：nhibernate, queryover, dynamic-queries

我有以下对我有用的查询：

```
IList<info> result = 
QueryOver<info>()
.Where(row => row.Timestamp >= fromDate)
.And(row => row.Timestamp <= toDate)
.OrderBy(row => row.Timestamp).Asc
.Skip(startRow).Take(count).List(); 
```

我需要通过从客户端获取附加 SQL 查询字符串并将其添加到我的查询中来扩展它，如下所示：

```
 IList<info> result = 
        QueryOver<info>()
        .Where(row => row.Timestamp >= fromDate)
        .And(queryString)
        .And(row => row.Timestamp <= toDate)
        .OrderBy(row => row.Timestamp).Asc
        .Skip(startRow).Take(count).List();

string queryString = "AND name='haim' And number=1" 
```

是否可以添加 QueryOver 动态查询字符串？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-22T16:56:26.530

简短的回答是您可以：

```
string queryString = "name='haim' And number=1";
var query = Session.QueryOver<info>().And(NHibernate.Criterion.Expression.Sql(queryString)); 
```

只要你保持注入的查询字符串简短而简单，你就可以了。如果您希望这个注入的字符串也改变查询语义（例如需要连接），我建议不要这样做；这不值得麻烦。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T10:04:06.310

我怀疑这是开箱即用的。但是通过一些调整你可以做到这一点

1.  从您的`QueryOver<>`. 按照[这个问题的公认答案](https://stackoverflow.com/questions/10704462/how-can-i-have-nhibernate-only-generate-the-sql-without-executing-it)
2.  将它与客户端发送的 sql 连接起来
3.  使用 NH 运行纯 SQL。有关如何执行此操作，请参阅[此问题](https://stackoverflow.com/questions/10510913/nhibernate-execute-sql-to-populate-dto)的已接受答案

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-21T15:58:12.320

我要在这里补充一点，在其他地方生成 sql 并将其发送执行并不是一个好习惯。我知道在类中抽象 WHERE 场景可能很困难，但使用 NET4 处理动态类要快得多。

所以我说这是不好的做法，因为您没有将查询封装在单层中。你应该。

可怕的后果显然是这两个部分之间缺乏牢固的关系，导致这是一个非常脆弱的解决方案。如果其中一个发生更改，您需要知道另一个需要更新，依此类推。一两个开发团队是可以的，但是大团队会因此受到伤害。

只是我的两分钱。

# wicket - Wicket 文本字段验证器事件

> ID：16129738
> 
> 赞同：0
> 
> 时间：2013-04-21T09:29:24.633
> 
> 标签：wicket, feedbackpanel

我有一个包含文本字段的 Wicket 表单。

我希望该文本字段至少包含 3 个字符。

为此，我添加了一个 StringValidator，如下所示：

```
 newPersonName.add(StringValidator.minimumLength(3)); 
```

它可以正常工作，甚至会向我的 FeedbackPanel 组件报告错误。

问题是我希望能够在验证失败时手动执行一些操作（某种日志），所以我想“捕捉”验证失败的事件并在那里添加我自己的函数。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T10:06:51.420

您可以简单地继承`StringValidator`并覆盖`decorate`(Wicket 6) 方法。在您的示例中，它应如下所示：

```
newPersonName.add(new StringValidator(3, null){
    protected ValidationError decorate(ValidationError error, IValidatable<String> validatable){
         ValidationError superError = super.decorate(error, validatable);
         //log logic goes here
         return superError;
    }
}); 
```

# github - 我可以在不丢失链接目标的情况下将 github repo 名称从大写更改为小写吗？

> ID：16129740
> 
> 赞同：6
> 
> 时间：2013-04-21T09:29:32.273
> 
> 标签：github, rename, repository

正如标题所说，是否可以将 github repo 重命名为`fooBar-for-MySQL-and-PHP`，`foobar-for-mysql-and-php`而不会终止指向您的 repo 的链接？常见的 git 工具有什么问题吗？

为了更清楚一点：这个问题不是关于重命名和丢失观察者、starrers 和 fork，而是关于从大写变为小写，这可能会产生“找不到 URL”之类的效果。我有太多的明星和叉子来简单地尝试一下。

Github 的官方帮助部分没有说明这种情况（[https://help.github.com/](https://help.github.com/)）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-21T09:50:22.313

对于repo页面，没问题

```
http://github.com/svnpenn/BM 
```

然而对于“Github Pages”页面，大问题

```
http://svnpenn.github.io/BM 
```

```
404
这里没有 GitHub 页面。
你想发布一个吗？我们会在您的页面完成后向您发送一封电子邮件
建成。您的页面可用最多可能需要十分钟。

```

总而言之，不要这样做。

# git - 无法在 Windows 8 上克隆存储库

> ID：16129743
> 
> 赞同：4
> 
> 时间：2013-04-21T09:29:40.747
> 
> 标签：git, github, git-clone, github-for-windows

我是 Github 和 Git 的新手，所以我下载了适用于 Windows 的 Github 以在我的 Windows 8 计算机上运行。但是，当我尝试克隆我所属组织中的存储库时，它会立即出现以下消息：

```
failed to clone the repository 'foo/bar'
Please check your internet connection. 
```

我可以连接到互联网和 Github。

为什么 Github for Windows 会这样做？是错误还是设置有问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-06T08:41:50.187

我设法通过重新安装 Github for Windows 来解决这个错误。它现在正在工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-06T23:47:49.550

我有同样的问题。你在防火墙后面吗？如果是这样，请设置您的 Windows 环境变量。确保使用小写的变量名。

```
http_proxy=http://yourproxy.com:1234
https_proxy=http://yourproxy.com:1234

```

# android - 布局内的 ListView 和单独的 ListView 有什么区别？

> ID：16129746
> 
> 赞同：0
> 
> 时间：2013-04-21T09:30:31.990
> 
> 标签：android, android-layout

我是 android 编程新手，我只是在学习如何使用`ListView`. 在阅读简单示例时，我遇到了关于使用它的两种不同布局：

1.  使用`ListView`内部 a `LinearLayout`：

    ```
    <?xml version="1.0" encoding="utf-8"?>
    <LinearLayout
      xmlns:android="http://schemas.android.com/apk/res/android"
      android:orientation="vertical"
      android:layout_width="fill_parent"
      android:layout_height="fill_parent"
      android:background="#FFFFFF">

         <ListView
            android:id="@+id/listView1"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent" />

    </LinearLayout> 
    ```

2.  使用`ListView`自身作为布局：

    ```
    <ListView xmlns:android="http://schemas.android.com/apk/res/android"
       android:id="@+id/listview"
       android:layout_width="wrap_content"
       android:layout_height="wrap_content" /> 
    ```

这两个有区别吗？如果是这样，它们中的每一个在哪里使用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T09:34:49.920

简短的回答；不，没有区别。

长答案；第一个布局可以有多个孩子，在绘图和性能方面有点贵。

另一方面，第二种布局更便宜，可以带来更好的性能。

所以底线是如果你只需要`ListView`使用第二种布局方法。

# php - 获取页面标题的标准方法是什么

> ID：16129757
> 
> 赞同：0
> 
> 时间：2013-04-21T09:31:33.363
> 
> 标签：php, url

我的网页网址是这样的

```
url = http://www.example.com/2223/this-is-the-url-text-of-page 
```

在上面的 URL`2223`中是 id `this-is-the-url-text-of-page`，是存储在数据库中不同字段的静态文本。我根据 id 检索网页数据。

但是标题是必须在其他任何东西之前立即显示的东西。因此，如果我从数据库中检索标题，然后将其显示在页面顶部，我认为这不是一种有效的方法。显示页面标题的标准方式是什么。

> 大多数网站是否从数据库中检索标题？

或者

> 大多数网站是否在 URL 中附加标题？

或者

> 还有其他方式存在吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T09:47:10.827

大多数网站是否从数据库中检索标题？： 是的

大多数网站是否在 URL 中附加标题？: 页面的标题和 url 不是一回事。

标题：这是此页面的 URL 文本
url：this-is-the-url-text-of-page

有两种方法可以做到这一点。您可以将标题**和**url 存储在数据库中，或者您可以从标题中以编程方式“构造”url。第一种解决方案更有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T09:43:15.003

一般来说，根据我的经验，有几个因素需要考虑：

1.  实际的页面标题可能包含在友好 url 中丢失的信息 - 例如。标点符号或多余的单词。你真的想要一个应该说“我无法访问互联网”的标题实际上是“我无法访问互联网”。
2.  为了生成页面，我通常希望数据库也需要更多信息。也许是文章内容、关键字、标题图像等。因此无论如何数据库查询都会存在。
3.  友好网址的主要目的是搜索引擎优化。由于您还传递了每个页面的 id，所以数据库会在 id 上查找。只要您的数据库表主键也在 id 上，这将有助于提高您的查找速度。

希望这有助于回答您的一些问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-21T09:58:05.263

> 然后将其显示在页面顶部，我认为这不是一种有效的方式

这取决于。标题嵌入在 HTML 中，靠近顶部。虽然有稍后注入的方法，但在实践中通常不值得这样做。[当启用输出缓冲时，](http://wiki.typo3.org/Performance_tuning#Output_Buffering) PHP/HTTP 性能最佳- 并且内容一次性发送到浏览器 - 因此“有效”的解决方案是在完整内容可用之前不向浏览器发送任何内容。如果您的脚本非常慢（生成时间超过 4 秒），那么根据 DOM 的构造方式，浏览器可能会在 HTML 不完整时开始渲染 - 在这种情况下，强制分块编码可以改善*感知*性能 - 但这是复杂且难以实施的。

此外，响应中发送的第一个信息是请求的行为是否符合预期——用户是否经过身份验证？处理脚本有什么问题吗？内容验证是否正常，或者您是否需要将浏览器重定向回上一页？在身份验证转换中，您还需要在处理请求后删除 cookie（即修改标头）。在您有理由确定您知道答案将是什么之前，您不应该提供状态 - 检查数据库是否正常工作是其中的重要部分。如果您过早开始生成输出，那么您将在响应标头中返回不正确的数据并减少处理错误条件的选项。

因此，从性能和功能的角度来看，延迟生成输出直到您知道输出将是什么更有意义。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-21T09:37:33.207

您的意思是在构建页面时获取标题->然后从数据库的单独字段中获取它。分别存储友好的 url 和标题。

此外，如果用户没有在 URL 中输入标题部分，只需使用 id 重定向到正确的页面。

* * *

不再相关：

我假设：您是否正在尝试动态构建一组链接，数据库中的页面（并且您可能随时有新页面或旧页面被删除），因此只需要获取标题？

为此 -> 您可以运行 20 分钟的 cron 作业并制作静态包含页面。写入新页面，完成后，删除主要包含“links.html”并将新页面重命名为此。

甚至可以在管理部分有一个链接随时运行

请提供更多上下文。没有标准的解决方案。或者更确切地说，根据情况有3-4个。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-21T09:41:52.950

页面的标题在 html 标头中定义如下：

```
<title>php - What is the standard way to get the title of the page - Stack Overflow</title> 
```

这可以是静态的，也可以是动态的，具体取决于页面以及设计者的构建方式。如果您尝试引用数据库，则不确定问题是什么，因为我们在那里看不到完整的组合。

你想达到什么目的？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-21T09:43:32.420

推荐使用数据库检索标题与页面的其余部分。为什么？好吧，检查 id 不再是检查 var 中是否仅包含数字，但另一方面，字符串具有广泛的范围，它可以包含和不能包含的内容，这使得为它创建规则变得更加困难，这反过来打开安全问题。

*换句话说，只需简单地向您的查询添加一个联接，您就可以开始了。*

**其次**，如果您使用 mod_rewrite 创建这些 url，则常规 $_GET 变量仍然可用。

**第三**，如果不是，您可以使用某种功能，例如`end(explode('/', $url));`.

但最后正如我之前所说，数据库是推荐的，它比全局 var 方法更安全，并且比*url 字符串*方法上的“运行函数”更可靠。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-21T09:47:12.433

从数据库中获取标题。URL 应该简短、中肯且易于输入。标题应该是描述性的。这意味着它可以更长，标点符号和更长的时间。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-04-21T09:51:16.340

这个函数可能比爆炸更快，尤其是对于较长的 URL：

```
basename($url); 
```

# asp.net - 为什么不在母版页的 web 表单中呈现 css 属性？

> ID：16129758
> 
> 赞同：0
> 
> 时间：2013-04-21T09:31:54.863
> 
> 标签：asp.net, visual-studio, master-pages, webforms, content-pages

我在 VS 2012 中使用 asp.net。我创建了一个母版页并设计到它的主要部分并在其中使用 CSS 和 JS。现在我添加一个内容页面。但是我有一个问题：
--为什么我在内容页面中看不到我的 css 效果？
母版页名称为“amood.master”，内容页为“aboutUS.aspx”。
更多解释：“我在母版页看到 css 效果，但是当使用内容页面时，所有 css 效果都被禁用！！！为什么？”
网页表单源代码：

```
<%@ Page Title="" Language="C#" MasterPageFile="~/amood.Master" AutoEventWireup="true" CodeBehind="WebForm3.aspx.cs" Inherits="newMetroDesign.WebForm3" %>
<asp:Content ID="Content1" ContentPlaceHolderID="head" runat="server">
</asp:Content>
<asp:Content ID="Content2" ContentPlaceHolderID="ContentPlaceHolder1" runat="server">
</asp:Content> 
```

这是母版页代码：

```
<%@ Master Language="C#" AutoEventWireup="true" CodeBehind="amood.master.cs" Inherits="newMetroDesign.amood" %>

<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
    <asp:ContentPlaceHolder ID="head" runat="server">

         <link href="CSS/Stylesss.css" rel="stylesheet" />
    <script src="js/dw_tooltip_c.js" type="text/javascript"></script>
    <link href="css/ex.css" rel="stylesheet" type="text/css"/>
    <script type="text/javascript" >
        dw_Tooltip.defaultProps = {
            //supportTouch: true, // set false by default
            wrapFn: dw_Tooltip.wrapTextByImage
        }

        dw_Tooltip.content_vars = {
            L2: {
                caption: 'برنامه نويس', // optional caption 

                txt: 'مهدي تحصيلداري<br/>و پايگاه داده  C#.NET برنامه نويس<br/>m.tahsildari@gmail.com',
                w: 200
            },
            L3: {
                caption: 'طراح سايت', // optional caption 

                txt: 'حميد طالبي<BR/>طراح و برنامه نويس سايت<BR/>mr.talebihamid@hotmail.com',
                w: 200
            }
        }

    </script>

    </asp:ContentPlaceHolder>
</head>
<body>
        <div id="MASTERheader">
            <div id="masterlogocontainer">
                <ul>
                    <li class="logo">
                        <a class="headMenu ">
                            <div class="masterlogop"></div>
                        </a>
                    </li>
                    <li>
                        <a>
                            <img src="IMAGES/sadlogo.png" alt="logo" width="80" height="80" />

                        </a>
                    </li>
                </ul>
            </div>
            <div id="masternav">
                <ul>
                    <li >
                        <a href="#">
                        <img src="IMAGES/Telephone.png" /><br />

                        <span>تماس با ما</span>
                             </a>
                    </li>
                    <li >
                        <img src="IMAGES/About.png" /><br />
                        <a href="aboutus.aspx"></a>
                        <span>درباره ما</span>
                    </li>
                    <li >     
                        <a href="default.aspx">
                        <img src="IMAGES/Brush.png" />
                        <span> طراحی</span>

                        </a>
                    </li>
                    <li  >
                         <a href="default.aspx">
                        <img src="IMAGES/Market.png" /><br />

                        <span>محصولات</span>
                         </a>
                    </li>
                </ul>
            </div>
        </div>

    <div style="height:50px;"></div>

        <asp:ContentPlaceHolder ID="ContentPlaceHolder1" runat="server">
        <div id="mastercontent">

        </div>
        </asp:ContentPlaceHolder>
    <a id="return" href="default.aspx">
            <div class="btnreturn">
                بازگشت
            </div>
        </a>
        <%--************************ FOOTER *****************************--%>

     <div id="masterfooter">
            <p>گروه طراحان ساد</p>

            <p>     آدرس دفتر مرکزي : مشهد – خيابان احمدآباد – رضا 16  - پلاک 67 </p>
            <p>All Rights Reserved For SAAD Co.  &nbsp; &copy; 2013</p>
                <p>  <a class="showTip L3 colour" href="#"> طراحي</a> و <a class="showTip L2 colour" href="#"> برنامه نويسي </a></p>

        </div>

</body>
</html> 
```

![没有 Web 表单的母版页](https://i.stack.imgur.com/G9gO5.png)

![带有 Web 表单的母版页](https://i.stack.imgur.com/h694X.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T11:31:03.963

一个可能的原因是 CSS 开始引用路径，以防每个页面都相对于自身。所以你必须确保你的母版页和页面应该遵循相同的相对结构。例子

```
 mysite.css
           Master.master
           MyPage.aspx 
```

另一种方式

```
 mysite.css
          Shared/Master.master
          Admin/MyPage.aspx 
```

# javascript - 在另一个对象中引用一个 javascript 对象

> ID：16129759
> 
> 赞同：0
> 
> 时间：2013-04-21T09:32:09.020
> 
> 标签：javascript, jquery, json, reference

我有两个对象

```
var objA = {name:"company1", caption : "The caption..."}; 
```

我想使用 objA 创建以下对象

```
var company = {company1: "The caption..."}; 
```

像下面这样的东西不起作用。

```
var company = {objA.name : objA.caption}; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T09:33:58.790

```
var company = {};
company[objA.name] = objA.caption; 
```

在对象字面量语法中，冒号左侧的属性名称是一个标识符，它不被视为表达式。因此，您可以如上所述动态访问该属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T09:35:03.777

```
var objA = {name:"company1", caption : "The caption..."};
var company = {};
company[objA.name] = objA.caption; 
```

# javascript - JavaScript 代码不工作

> ID：16129763
> 
> 赞同：-6
> 
> 时间：2013-04-21T09:32:31.820
> 
> 标签：javascript

我想通过将文本转换为 textfield 来使其可编辑。我只是想在我的浏览器中尝试它，所以我将它复制并粘贴到 Dreamweaver 中，但它不起作用：

你可以在这里找到它：http: [//jsfiddle.net/cnuDh/](http://jsfiddle.net/cnuDh/)

但它不工作

代码如下

```
<label id="edit" style="cursor:pointer; color:blue;">
  edit
</label>
<table>
    <tr>
        <td>First Name:</td>
        <td>John</td>
    </tr>
    <tr>
        <td>Last Name:</td>
        <td>Wright</td>
    </tr>
</table>
<script type="text/javascript" charset="utf-8">
$('#edit').click(function () {
    var $table = $('table');
    if ($table.find('input').length) return;
    $table.find('td:nth-child(2)').html(function (i, v) {
        return '<input value=' + v + '>';
    })
})
$('table').on('blur', 'input', function () {
    $('table input').replaceWith(function () {
        return this.value;
    })
})
</script> 
```

请提供任何帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T10:10:18.093

添加 jQuery 库

```
<script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T09:54:38.183

不要忘记将 jQuery 添加到页面中，以便能够使用其选择器以及 `$(document).ready()`在加载 DOM 和加载页面内容之前加载脚本。

```
<!DOCTYPE html>
<html>
  <head>
    <script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
    <script type="text/javascript">
      $(document).ready(function(){  
        $('#edit').click(function() {
          var $table = $('table');
          if ($table.find('input').length) return;
          $table.find('td:nth-child(2)').html(function(i, v) {
            return '<input value=' + v + '>';
          })
        })
        $('table').on('blur', 'input', function() {
          $('table input').replaceWith(function() {
            return this.value;
          })
        })
      });
    </script>
  </head>
  <body>
    <label id="edit" style="cursor:pointer; color:blue;">edit</label>
    <table>
      <tr><td>First Name: </td>
          <td>John</td>
      </tr>
      <tr><td>Last Name: </td>
          <td>Wright</td>
      </tr>
    </table>
  </body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T09:47:50.313

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7/jquery.min.js"></script> 
```

编辑

```
<table>
<tr><td>First Name: </td>
    <td>John</td>
</tr>
<tr><td>Last Name: </td>
    <td>Wright</td>
</tr> 
```

```
$('#edit').click(function() {
   var $table = $('table');
   if ($table.find('input').length) return;
   $table.find('td:nth-child(2)').html(function(i, v) {
     return '<input value=' + v + '>';
  })

  })

$('table').on('blur', 'input', function() {
$('table input').replaceWith(function() {
    return this.value;
})
}) 
```

# c - 如何在c中获取lua参数？

> ID：16129765
> 
> 赞同：0
> 
> 时间：2013-04-21T09:32:48.977
> 
> 标签：c, visual-c++, lua, luabind

我正在使用 Visual C++ 2012 并尝试为 Lua 编写 ac 扩展。目前我正在设计一个功能原型：

```
lib.myfunc(number, {a=1,b=2,c=3},{d=4,e=5,...}) 
```

'myfunc'函数有3个参数，第一个参数是一个整数，第二个和第三个参数是表格类型，我需要通过键访问值（键是'a'，'b'，' C'...）

我已经阅读了 lua 手册并搜索了许多教程，但我仍然无法让它工作。我想要一个示例 C 代码来完成这项工作，谢谢～</p>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T10:34:47.790

我真的不知道 luabind，所以我不确定他们是否提供任何自己的设施来做到这一点，但在 Lua 中你会这样做：

```
int myLuaFunc(lua_State *L)
{
  int arg1 = luaL_toint(L, 1);
  luaL_checktype(L, 2, LUA_TTABLE);    //Throws an error, if it's not a table
  luaL_checktype(L, 3, LUA_TTABLE);

  //Get values for the first table and push it on the stack
  lua_getfield(L, 2, "keyname");   //Or use lua_gettable
  //Assuming it's a string, get it
  const char *tmpstr = lua_tostring(L, -1);

  //..... Similariliy for all the other keys
} 
```

你可能想参考[Lua 参考手册](http://www.lua.org/manual/5.1/manual.html)来了解我使用的函数的描述。

# android - 如何使用 sqlite 在模拟器中显示列表视图？

> ID：16129768
> 
> 赞同：0
> 
> 时间：2013-04-21T09:33:27.713
> 
> 标签：android

我必须创建 sqlite 数据库并且值显示在 logcat 中。我的问题是我想在模拟器中显示 ListView。我在这里附上我的代码，参考它。

公共类 AndroidSQLiteTutorialActivity 扩展 ListActivity{

```
private static final String KEY_ID = "company_id";
private static final String KEY_NAME = "company_name";
private static final String KEY_DESC = "company_desc";

public static ArrayList<String> ArrayofName = new ArrayList<String>();

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    DatabaseHandler db = new DatabaseHandler(this);

    /**
     * CRUD Operations
     * */
    // Inserting Contacts
    Log.d("Insert: ", "Inserting ..");
    db.addContact(new Contact("GNTS Technologies pvt ltd", "Software Company"));
    //db.addContact(new Contact("HCL","Hardware","Inactive"));
   // db.addContact(new Contact("Srinivas", "9199999999"));
    //db.addContact(new Contact("Tommy", "9522222222"));
    //db.addContact(new Contact("Karthik", "9533333333"));

    // Reading all contacts
    Log.d("Reading: ", "Reading all contacts..");
    List<Contact> contacts = db.getAllContacts();       

    for (Contact cn : contacts) {
        String log = "company_id: "+cn.getID()+" ,company_name: " + cn.getName() + " ,company_desc: " + cn.getDesc();
            // Writing Contacts to log
    Log.d("Name: ", log);
    db.getAllContacts();

    }

   ListView lv = (ListView) findViewById(R.id.listView);

    ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
            android.R.layout.activity_list_item, ArrayofName);

    setListAdapter(adapter);

    lv.setOnItemClickListener(new OnItemClickListener() {

       public void onItemClick(AdapterView<?> parent,View view,
           int position, long id) {

            String company_desc = ((TextView) view
                    .findViewById(R.id.company_desc)).getText().toString();
            String company_id = ((TextView) view
                    .findViewById(R.id.company_id)).getText().toString();
            String company_name = ((TextView) view
                    .findViewById(R.id.company_name)).getText().toString();

           Toast.makeText(getApplicationContext(),
            ((TextView) view).getText(), Toast.LENGTH_SHORT).show();
        }

   });
}} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T16:33:37.883

```
Inorder to list values in listview ,

   Step 1: Use Cursor

       eg: Cursor c = db.getContact(): // sample 

     Step 2: Create a custom class extending cursorAdapter

       eg: CustomAdapter adapter = new CustomAdapter(this,cusrsor); // sample

    Step 3: listview.setadapter(adapter);

Note:You should implement cursor adapter. 
```

# ios - 如何在ios中调整通知中心小部件的高度

> ID：16129772
> 
> 赞同：0
> 
> 时间：2013-04-21T09:33:47.223
> 
> 标签：ios, iphone, widget, height, ios-app-extension

我正在 iphone 上开发一个小部件。我想调整小部件的高度。我将其更改如下。但我没有找到刷新机制。它在重新打开 NC 面板后工作。

```
-(void) updateView {
    CGRect widgetRect = _view.frame;
    widgetRect.size.height = widgetHeight;
    _view.frame = widgetRect;
} 
```

你有什么主意吗？问候，幸福

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T18:49:48.487

- 这应该为你做。

```
[myView setNeedsDisplay] 
```

请参阅此链接：[强制 UIView 重绘的最可靠方法是什么？](https://stackoverflow.com/questions/1503761/what-is-the-most-robust-way-to-force-a-uiview-to-redraw)

# jquery - 在哪里放置带有变量的 all() 选择器

> ID：16129776
> 
> 赞同：1
> 
> 时间：2013-04-21T09:34:00.497
> 
> 标签：jquery, variables

我有一个这样的列表：

```
<ul>
  <li id="foo">foo</li>
  <li id="bar">bar</li>
  <li id="baz">baz
      <div>more Text</div>
  </li>
</ul> 
```

我想从除最后一个列表之外的所有内容中删除文本，该列表为零索引为`2`. 因为零索引是一个变量，所以我把这个变量放在一个像这样的范围内：

```
<span>2</span> 
```

Jquery中的变量：

```
var qw = $('li:eq(' + $("span").text() + ')'); 
```

最后是删除功能：

```
$('body *').not(qw).contents().filter(function() {
  return this.nodeType == 3;
}).remove(); 
```

问题是列表中的 div 也被删除了，但我真的很想保留它。我玩过`('*')`选择器，但似乎无法将其放在正确的位置。例如这不起作用：

```
var qw = $('li:eq(' + $("span").text() + ')' + '*'); 
```

[JsFiddle 的示例](http://jsfiddle.net/p83Rg/8/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T09:38:32.873

鉴于您`qw`已经选择（缓存）并且想要使用此缓存元素删除文本节点，请尝试此操作

```
$('body *').not(qw).not($('*', qw)).contents().filter(function () {
    return this.nodeType == 3;
}).remove(); 
```

它过滤掉任何属于`qw`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T09:51:36.007

This should work:

**HTML**

```
<span id="indexToKeep">2</span>

<ul>
    <li id="foo">foo</li>
    <li id="bar">bar</li>
    <li id="baz">baz
        <div>more Text</div>
    </li>
</ul> 
```

**JavaScript**

```
$("li:not(:eq(" + $("#indexToKeep").text() + "))", "ul").remove(); 
```

[JSFiddle](http://jsfiddle.net/AApCR/1/).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T09:46:02.640

这应该可以解决问题

```
var allButLast = $("li").not(":last"); 
```

参考：

*   [http://api.jquery.com/last-selector/](http://api.jquery.com/last-selector/)

*   [http://api.jquery.com/not/](http://api.jquery.com/not/)

Note you could also do:

```
var allButLast = $("li:not(:last)"); 
```

Reference:

*   [http://api.jquery.com/not-selector/](http://api.jquery.com/not-selector/)

**Update:**

As per your comment, you can also do:

```
var qw = $('li:not(:eq(' + $("span").text() + '))'); 
```

> [http://gurustop.net](http://gurustop.net)

# javascript - 处理页面上的多个 AJAX 请求时出错

> ID：16129782
> 
> 赞同：0
> 
> 时间：2013-04-21T09:34:48.047
> 
> 标签：javascript, ajax, jsp

```
<script type="text/javascript">
    function loadXMLDoc() {
        var xmlhttp;
        var k = document.getElementById("usernamesignup").value;
        var urls = "AJAX.jsp?ver=" + k;

        if (window.XMLHttpRequest) {
            xmlhttp = new XMLHttpRequest();
        } else {
            xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
        }
        xmlhttp.onreadystatechange = function () {
            if (xmlhttp.readyState == 4) {
                //document.getElementById("err").style.color="red";
                document.getElementById("err").innerHTML = xmlhttp.responseText;

            }
        }
        xmlhttp.open("GET", urls, true);
        xmlhttp.send();
    }

    function loadXMLDoc1() {
        var xmlhttp;
        var k1 = document.getElementById("emailsignup").value;
        var urls1 = "AJAX1.jsp?ver1=" + k1;

        if (window.XMLHttpRequest) {
            xmlhttp = new XMLHttpRequest();
        } else {
            xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
        }
        xmlhttp.onreadystatechange = function () {
            if (xmlhttp.readyState == 4) {
                //document.getElementById("err1").style.color="red";
                document.getElementById("err1").innerHTML = xmlhttp.responseText;

            }
        }
        xmlhttp.open("GET", urls1, true);
        xmlhttp.send();
    }
</script> 
```

这里是 AJAX.jsp [——AJAX.jsp](http://jsfiddle.net/NZhXn/)

这里是 AJAX1.jsp [——AJAX1.jsp](http://jsfiddle.net/rNP85/)

第一个函数 -`loadXMLDoc()`从数据库中检查用户名的可用性，`AJAX.jsp`并相应地返回消息字符串。

第二个函数 -`loadXMLDoc1()`打算对电子邮件做同样的事情，但不返回任何消息，因为它在检查`USERNAME`.

代码有问题？？？什么解决方案....谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T10:12:55.427

谢谢大家的意见和回应，但这是我错过的地方......我为两个请求声明了相同的 XMLHttpRequest 变量......

```
var xmlhttp;

if (window.XMLHttpRequest)
 {
   xmlhttp=new XMLHttpRequest();
 } 
```

相反，我所做的是为第二个函数 XMLDoc1() 声明一个新变量——

```
var xmlhttp1;
if (window.XMLHttpRequest)
{
    xmlhttp1=new XMLHttpRequest();
} 
```

并在适用的情况下相应地更改变量名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T10:15:02.463

使用 Charles 调试请求和响应

# java - 如何在 Java 2d 射击游戏中将 Timer 设置为 1 分钟？

> ID：16129787
> 
> 赞同：2
> 
> 时间：2013-04-21T09:35:16.000
> 
> 标签：java, multithreading, swing, timer, awt

我需要将其实现到我的程序中的确切代码。我只想能够玩一分钟，然后在一分钟后打印到游戏结束。如果有人能告诉我它应该在我的程序中的确切位置，我也将不胜感激。请我需要任何人的帮助。我的时间真的很短。谢谢

这是我的代码：

```
 import java.awt.Canvas;
import java.awt.Dimension;
import java.awt.Graphics;
import java.awt.event.KeyEvent;
import java.awt.image.BufferStrategy;
import java.awt.image.BufferedImage;
import java.io.IOException;

import javax.swing.JFrame;

public class Game extends Canvas implements Runnable {

    /**
     * 
     */
    private static final long serialVersionUID = 1L;
    public static final int WIDTH = 320;
    public static final int HEIGHT = WIDTH / 12 * 9;
    public static final int SCALE =2;
    public final String TITLE ="2D SPACE GAME";
    public final String NAME ="Sound";

    private boolean running = false;
    private Thread thread;

    private BufferedImage image =
       new BufferedImage(WIDTH,HEIGHT,BufferedImage.TYPE_INT_RGB);

    private BufferedImage spriteSheet= null;
    private BufferedImage background = null;

    private boolean  is_shooting = false; 

    private Player p;
    private Controller c;
    private  Textures tex;

    public void init(){
        //which will let the ship move better
        requestFocus();
        Sound.sound2.play();
        BufferedImageLoader loader= new BufferedImageLoader();
        try{

            spriteSheet = loader.loadImage("/sprite_sheet.png");
            background  = loader.loadImage("/background.png");
        }catch(IOException e){
            e.printStackTrace();
        }
        addKeyListener(new KeyInput(this));
        tex = new Textures(this);
        //we have to initlise the p under the try and catch or it will not work
        //"this" is refering to game from the player class 200 are the coordinates 
        // tex will contain all the images
        p = new Player(200,200,tex);
        c = new Controller(this,tex);
    }

    //if running equals true we just return out of the method
    private synchronized void start(){
        if (running)
            return;

        running=true; 
        thread = new Thread(this);
        thread.start();
    }   

    private synchronized void stop(){
        if (!running)
            return;

        //this will stop the game loop
        running=false;
        try {
            thread.join();
        } catch (InterruptedException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        System.exit(1);

    }

    public void run(){
        init();
        long lastTime = System.nanoTime();
        final double amountOfTicks = 60.0; //game updates 60 times
        double ns = 1000000000 / amountOfTicks;
        double delta =0;
        int updates =0;
        int frames =0;
        long timer = System.currentTimeMillis();

        //fps helps us update.

        while(running){
            //loop for the game the heart of the game.
    long now = System.nanoTime();
    delta += (now-lastTime  ) / ns;
    lastTime = now;
    if (delta >=1){
        tick();
        updates++;

        delta--;

        }
    render();
    frames++;

    //calcuating the fps, we want to do every second.

    if(System.currentTimeMillis() - timer > 1000){
        timer+=1000;
        System.out.println(updates+ "Ticks fps "+ frames);
    updates =0;
    frames=0;

    }

    }
    stop();

    }

    private void tick(){
        p.tick();
        c.tick();
    }

    private void render(){
        //this. referes to the canvas class thats were we are getting this
        BufferStrategy bs = this.getBufferStrategy();

        //we want to intilaze once it from loading billions of times
        //we want to introduce tripple buffering 
        if (bs==null)
        {
            createBufferStrategy(3);
            return;
        }

        Graphics g = bs.getDrawGraphics();
        ///////////////////////////were we draw the image

        g.drawImage(image,0,0, getWidth(), getHeight(), this);

        g.drawImage(background,0,0, null);

        p.render(g);
        c.render(g);

        /////////////////////////

        //disposing the buffered image
        g.dispose();
        bs.show();
    }

    public void keyPressed(KeyEvent e){
        int key = e.getKeyCode();
        if(key==KeyEvent.VK_RIGHT){
            p.setVelX(5);
        }else if (key==KeyEvent.VK_LEFT){
            p.setVelX(-5);
        }else if (key==KeyEvent.VK_DOWN){
            p.setVelY(5);
        }else if (key==KeyEvent.VK_UP){
            p.setVelY(-5);

        }else if (key==KeyEvent.VK_SPACE && !is_shooting  ){
            is_shooting = true;
            c.addBullet(new Bullet(p.getX(),p.getY(), tex ));
            Sound.sound1.play();
        }

    }

    public void keyReleased(KeyEvent e){
int key = e.getKeyCode();

        if(key==KeyEvent.VK_RIGHT){
            p.setVelX(0);
        }else if (key==KeyEvent.VK_LEFT){
            p.setVelX(0);
        }else if (key==KeyEvent.VK_DOWN){
            p.setVelY(0);
        }else if (key==KeyEvent.VK_UP){
            p.setVelY(0);

        }else if (key ==KeyEvent.VK_SPACE){
            is_shooting = false; // this is going to force the player to realise the key in order to be able to shoot another bullet
        }

    }

    public static void main(String args[]){

        Game game = new Game();

        game.setPreferredSize(new Dimension(WIDTH * SCALE, HEIGHT * SCALE ));
        game.setMaximumSize(new Dimension(WIDTH * SCALE, HEIGHT * SCALE ));
        game.setMinimumSize(new Dimension(WIDTH * SCALE, HEIGHT * SCALE ));

        JFrame frame = new JFrame(game.TITLE);
        frame.add(game);
        frame.pack();
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setResizable(false);
        frame.setLocationRelativeTo(null);
        frame.setVisible(true);

        game.start();

    }

        public BufferedImage getSpriteSheet(){
            return spriteSheet;

        }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T09:55:58.853

1.  使用 awt.Canvas 的 JPanel 插入

2.  对于 JPanel 不需要使用 BufferStrategy （对于这个工作）

3.  使用 paintComponent 而不是 render()

4.  使用 Swing Timer 而不是 Runnable#Thread 从 util.Timer 调用

5.  使用 KeyBinding 而不是 KeyListener

6.  否则 AWT 或 Swing 容器必须可用于 KeyEvents (setFocusable())

7.  这是一堆带有动画的线程，带有paintComponent，由Swing Timer调用/延迟，由KeyBindings监听

8.  我不建议混合 AWT 组件和 Swing JComponents

9.  将所需动画的元素添加到 util.List、paintComponent 内部以在此 List 内循环（或移动到/显示所需元素）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-21T09:44:04.053

将此字段添加到您的课程中：

```
private Long startGameTime; 
```

将此添加到您的启动方法中：

```
startGameTime = System.currentTimeMillis(); 
```

将此添加到您的运行方法中：

```
if(System.currentTimeMillis() - startGameTime >= 60 000){
    stop();
} 
```

# ruby-on-rails - 如何使用 simple_format 或视图在模型 after_create 回调中格式化 HTML

> ID：16129789
> 
> 赞同：7
> 
> 时间：2013-04-21T09:35:24.143
> 
> 标签：ruby-on-rails, ruby-on-rails-3, mandrill

我正在使用 mandrill-api（来自 MailChimp）在单个 API 调用中向许多人发送电子邮件。它需要一个 HTML 参数，我希望从视图而不是直接在我无法访问 simple_format 的模型中生成该参数以应用于我保存在数据库中的纯文本 (self.body)。

示例代码：

```
class Request < ActiveRecord::Base

  after_create :attempt_send

  def attempt_send
    require 'mandrill'
    m = Mandrill::API.new
    message = {
     :subject=> "Subject",
     :html => "#{self.body}"
    }
    sending = m.messages.send(message)
    puts sending
  end

end 
```

这种情况让我对 MVC 感到头疼。我的应用程序的其余部分使用 Rails 动作邮件程序，因此电子邮件内容在视图层中被干净地处理。

如果您能告诉我如何以某种方式使用 simple_format，那将是实现我在 self.body 上所需格式的快速修复。我对更优雅的解决方案持开放态度，以使此功能更像 Rails 邮件程序。我考虑过的一个选项是使用控制器方法返回电子邮件 html，但我认为这会导致自引用 http 请求，这不是一种有效的方法。开放的想法！

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-04-21T16:42:52.280

您可以包含模块 ActionView::Helpers::TextHelper

[http://api.rubyonrails.org/classes/ActionView/Helpers/TextHelper.html#method-i-simple_format](http://api.rubyonrails.org/classes/ActionView/Helpers/TextHelper.html#method-i-simple_format)

```
class Request < ActiveRecord::Base
  include ActionView::Helpers::TextHelper

  after_create :attempt_send

  # ...

    :html => "#{simple_format(self.body})" 
```

--

另一个不包括所有 TextHelper 方法的选项，只是您需要的一个选项是使用委托。

```
delegate :simple_format, to: 'ActionController::Base.helpers' 
```

# autohotkey - 为什么两个功能不想同时工作

> ID：16129795
> 
> 赞同：-2
> 
> 时间：2013-04-21T09:35:52.427
> 
> 标签：autohotkey

我的 2 个功能不想同时工作！如何同时运行 2 个或更多功能。在我按下开始按钮一秒钟后，MainF() 函数开始工作，并且在 Damage() 函数启动后，MainF() 停止运行。

怎么解决？？

PS。我不想有 2 个脚本。

感谢帮助。

下面的代码：

```
ButtonStart:

SetTimer, PGD, 1000

MainF()

PGD:

Damage()

return 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T09:48:28.763

您意识到，由于在 MainF() 之后没有返回，Damage() 将在 MainF() 完成后立即运行......并且在 1 秒后一次又一次地运行。但是，由于您没有使脚本持久化，它将在第一次返回后关闭，并且永远不会被计时器触发......

```
#SingleInstance Force
#installKeybdHook
#Persistent
SetTimer, PGD, 2000
MainF()
PGD:
Damage()
Return

MainF()
{
        SoundBeep, 500, 100
}

Damage()
{
        SoundBeep, 2000, 100
}
Return 
```

# android - 在“偏好”活动中加载一次城市列表

> ID：16129796
> 
> 赞同：0
> 
> 时间：2013-04-21T09:35:55.973
> 
> 标签：android, sharedpreferences

我正在使用一项`Preferences`活动来列出一系列城市。例如，这个列表是“硬编码”的`res/values/arrays.xml`：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
   <string-array name="cities">
     <item>Paris</item> 
     <item>London</item> 
     <item>Roma</item> 
     <item>Madrid</item>
   </string-array>
   ...
</resources> 
```

然后在此处调用此列表：

```
<ListPreference
    ...
    android:entries="@array/cities"
    ... 
```

现在，我想从网络服务加载帽子列表：有可能吗？如果是这样，如何仅在加载应用程序而不是每次用户启动首选项活动时才加载该列表？

问候，

米克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T10:20:54.653

使用`onCreate()`活动的功能来填充一些全局变量或 SQL 表，然后在“首选项活动”中访问它。那是你要求的吗？

# c++ - 头文件问题

> ID：16129798
> 
> 赞同：0
> 
> 时间：2013-04-21T09:35:59.947
> 
> 标签：c++, header, compiler-errors

我正在用 C++（学校项目）编写一个多文件程序。昨天我遇到了一个相当奇怪的问题。当我在我的程序中包含一个特定的头文件时，它拒绝编译。它给了我错误“缺少;在*之前”，这表明我在其他头文件中声明的一些类变得未声明或类似的东西。我包含的头文件包括头文件也包括我包含的头文件。另一方面，我使用 #if !defined(FILENAME_H) 来避免双重包含。还值得一提的是，它只是一个导致我的问题的特定头文件，定义/未定义/endif 代码没有任何问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T09:41:30.037

看起来你在有问题的标题中有这样的东西：

```
class A
{

} 
```

没有`;`课后声明。一旦你包含了那个标题，它就会在以后导致错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T09:47:01.323

老兄，每个头文件都应该以

```
#ifndef NAMEOFFILE_H
#define NAMEOFFILE_H

and end with

#endif 
```

这确保了一个头文件不会多次包含在您的程序中。

另外，如果您的班级未申报，我很确定您一定**错过了**

**类定义后的大括号} 末尾的分号**

# c# - 来自标签数组的特定标签的事件动作c#

> ID：16129799
> 
> 赞同：0
> 
> 时间：2013-04-21T09:36:03.443
> 
> 标签：c#, arrays, winforms, events

我正在使用一系列标签，但我真的不知道如何为所有标签添加点击操作。例如，如果用户单击箭头 [i]，则该箭头应显示某些内容。我也在互联网上搜索过，但没有发现任何有用的东西。

这是我的代码：

```
 Label[] _arr = new Label[4];
    private void button1_Click(object sender, EventArgs e)
    {
        for(int i=0;i<4;i++){

    _arr[i ] = new Label();
    _arr[i ].Text = ""+i;
    _arr[i ].Size = new Size(50,50);
    _arr[i ].Location = new Point(i*50,i*50);
    this.Controls.Add(_arr[i]);
} 
```

}

感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T09:50:48.883

定义标签时，请包含这样的事件

```
_arr[i].Click += label1_Click; 
```

然后，如果您使用 Visual Studio，您应该在编写上述行期间通过在某些点单击选项卡来帮助创建实际方法。否则您需要自己创建一个事件方法，例如

```
 void label1_Click(object sender, EventArgs e)
    {
        //do stuff
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T09:46:28.527

_arr[i].Click += delegate { 你想在点击时发生什么 };

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T09:49:31.787

```
 _arr[i] = new Label();   
 _arr[i].Click += (s, e) => MessageBox.Show("Message"); 
```

# c# - 字段永远不会分配给，并且始终具有其默认值 null

> ID：16129800
> 
> 赞同：0
> 
> 时间：2013-04-21T09:36:04.427
> 
> 标签：c#

当我的程序第一次启动时，我在 main 方法中创建了一个新菜单，然后进入菜单类。

```
 private static Shop shop;
    private static Player player;

    public static void Main(string[] args)
    {
        Menu menu = new Menu();

        menu.start(menu, shop, player);
    } 
```

在我的菜单类中，我有一个名为 start() 的方法。打印出用户的选项。

```
 private Menu menu;
    private Shop shop;
    private Player player;

    public void start(Menu menu, Shop shop, Player player)
    {

        this.menu = menu;
        this.shop = shop; 
```

然后当我编译我的程序时，我选择去商店，我得到一个错误“对象引用未设置为对象的实例。”。我想我知道我必须做什么，但我不太确定你在主课上是如何做到的。

我想我必须添加

```
Shop shop 
```

作为 Main 方法中的参数。然后声明

```
this.shop = shop; 
```

就像我在其他课程中一样。

我试过这样做，但它总是会出现错误。既然它是主要方法，我是否必须采取不同的方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-21T09:37:39.183

您实际上还没有分配这些静态引用：

```
private static Shop shop = new Shop();
private static Player player = new Player(); 
```

# java - 如何在没有显式转换的情况下在返回泛型类型的方法上使用 lambdaJ 的 extract()

> ID：16129809
> 
> 赞同：1
> 
> 时间：2013-04-21T09:37:23.497
> 
> 标签：java, generics, collections, extract, lambdaj

我正在使用泛型来存储对任意对象的引用。

```
class Option<TypeT>{
    TypeT o;

    Option(TypeT t){
        this.o = o;
    }
    TypeT getReferencedObject(){
        return o;
    }
} 
```

我想使用 lambdaJ 从集合中提取这些对象。现在我正在使用非常丑陋的双重铸造`(List<TypeT>)(List<?>)`，我正在寻找更好/更清洁的解决方案。问题出在`on( sth ).getReferencedObject()`语句中，不能像这样参数化`on(Option<String>.class).getReferencedObject()`

```
List<Option<String>> options = Arrays.asList(new Option<String>("AAA"), new Option<String>("BBB"));
List<String> string = (List<String>)(List<?>) extract(options, on(Option.class).getReferencedObject()); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T22:45:06.883

这个问题源于语言本身的限制——[具体的参数化类型没有类文字](https://stackoverflow.com/a/2390682/697449)，这是 Java 使用[类型擦除](http://docs.oracle.com/javase/tutorial/java/generics/erasure.html)来实现泛型的结果。

具体参数化类型的示例是`Option<String>`. **没有`Option<String>.class`，只有`Option.class`**。

参数化类型*可以*在运行时由[`ParameterizedType`](http://docs.oracle.com/javase/7/docs/api/java/lang/reflect/ParameterizedType.html)实例表示，可以使用反射来获取。一些库利用这一点来以类型安全的方式表示泛型类型，例如 Guava 的[`TypeToken<T>`](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/reflect/TypeToken.html).

但不幸的是，这在这里没有帮助。原因是 LambdaJ 的[`on`](http://lambdaj.googlecode.com/svn/trunk/html/apidocs/ch/lambdaj/Lambda.html#on%28java.lang.Class%29)方法使用[动态代理](https://www.google.com/search?q=java%20dynamic%20proxy)来表示指定的类型。这是为了调用这样的东西：

```
on(Option.class).getReferencedObject() 
```

可以在幕后发挥其 LambdaJ 的魔力。创建这样的代理最终归结为对 Java API 的调用[`Proxy.newProxyInstance`](http://docs.oracle.com/javase/7/docs/api/java/lang/reflect/Proxy.html#newProxyInstance%28java.lang.ClassLoader,%20java.lang.Class%5B%5D,%20java.lang.reflect.InvocationHandler%29)，或者像[`net.sf.cglib.proxy.Enhancer`](http://grepcode.com/file/repo1.maven.org/maven2/cglib/cglib-nodep/2.2.2/net/sf/cglib/proxy/Enhancer.java/). 在任何一种情况下，`Class`实例都*专门*用于表示代理的接口/类。所以总结起来，**`on`除了冷硬什么都不能接受`Class<T>`**。

你能做什么？你的选择是有限的...

## 1）坚持你所拥有的：

我们知道这很丑陋，而且绝对容易出错，但它确实有效：

```
@SuppressWarnings("unchecked") //okay because options is a List<Option<String>>
List<String> strings =
    (List<String>)(List<?>)extract(options, on(Option.class).getReferencedObject()); 
```

出于好奇，我尝试了这个：

```
@SuppressWarnings("unchecked") //not really okay, but let's see what happens
Class<Option<String>> onWhat = (Class<Option<String>>)(Class<?>)Option.class;
List<String> strings = extract(options, on(onWhat).getReferencedObject()); 
```

但这给了我一个运行时异常：

> `java.lang.ClassCastException`:`net.sf.cglib.empty.Object$$EnhancerByCGLIB$$9d9c54e1`不能转换为`java.lang.String`

## 2）使用[番石榴](http://guava-libraries.googlecode.com)：

```
List<String> strings = Lists.transform(
        options,
        new Function<Option<String>, String>() {
            @Override
            public String apply(Option<String> option) {
                return option.getReferencedObject();
            }
        }
); 
```

这看起来相当嘈杂，但`Function`至少可以抽象出来：

```
class Option<T> {

    ...

    public static final class Functions {

        //Impl note: Effective Java item 27
        private static final Function<?, ?> GET_REFERENCED_OBJECT =
                new Function<Option<?>, Object>() {
                    @Override
                    public Object apply(Option<?> option) {
                        return option.getReferencedObject();
                    }
                };

        private Functions() { }

        public static <T> Function<Option<T>, T> getReferencedObject() {
            //okay for any T, since Option<T>.getReferencedObject must return a T
            @SuppressWarnings("unchecked")
            final Function<Option<T>, T> withNarrowedTypes =
                    (Function<Option<T>, T>)GET_REFERENCED_OBJECT;
            return withNarrowedTypes;
        }
    }
} 
```

这使呼叫站点更清洁：

```
List<String> strings = Lists.transform(
        options,
        Option.Functions.<String>getReferencedObject()
); 
```

请注意，它*会*[`Lists.transform`](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/Lists.html#transform%28java.util.List,%20com.google.common.base.Function%29)返回原始. 如果你想要一份像 LambdaJ 的回报一样的副本，制作一个很容易：*`List``extract`*

 *```
List<String> strings = Lists.newArrayList(Lists.transform(
        options,
        Option.Functions.<String>getReferencedObject()
)); 
```

这一切都更加冗长，但它为您提供了泛型类型安全，并且您可以在幕后放弃动态代理巫术。

## 3）使用Ol'Plain n' Simple（并等待Java 8）：

```
List<String> strings = new ArrayList<>(options.size());
for (Option<String> option : options) {
    strings.add(option.getReferencedObject());
} 
```

一个经常被忽视但令人愉快的可行选择！*

# excel - 将数据从 Excel 表单传递到新电子表格

> ID：16129830
> 
> 赞同：1
> 
> 时间：2013-04-21T09:39:58.067
> 
> 标签：excel, vba

我在 Excel 中尝试一些新的东西。就像我对 VBA 一样陌生，所以请多多包涵。

我有一个表格，上面有很多东西。一个项目是一个打开电子表格的按钮。我想将表单中的信息传递给新打开的电子表格，但我正在碰壁。我做了以下..

在表单顶部声明了一个公共变量

```
Public instno As String 
```

然后在表单的初始化中，我从当前工作表中为该字符串分配一个值。

```
Sub UserForm_Initialize()
instno = Cells(ActiveCell.Row, "J").Value
' other stuff in here too, this is just for this problem...
End Sub 
```

现在是打开新工作簿的按钮的代码，我正在尝试将值传递给。

```
Private Sub CMB2_Click() 
Dim xlApp As Excel.Application 
Set xlApp = CreateObject("Excel.Application") 
xlApp.Visible = True 
xlApp.Workbooks.Open Filename:="G:\tracking.xlsm"
Cells(13, "E").Value = instno 'data should go into cell E13
End Sub 
```

对我不起作用，有什么建议吗？工作簿打开正常，只是无法将数据放入其中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T09:44:35.337

如果您在 Excel 中执行此操作，则不需要`CreateObject`每次都执行此操作。请参阅此示例。此外，当您使用对象时，请完全限定它们。

```
Dim instno As String

Sub UserForm_Initialize()
    Dim ws As Worksheet

    Set ws = ThisWorkbook.Sheets("Sheet1")

    '~~> Though I am not in favor of `ActiveCell`. Use the actual cell address
    instno = ws.Range("J" & ActiveCell.Row).Value
End Sub

Private Sub CMB2_Click()
    Dim wb As Workbook
    Dim ws As Worksheet

    Set wb = Workbooks.Open(Filename:="G:\tracking.xlsm")
    '~~> Change this to the relevant worksheet
    Set ws = wb.Sheets("Sheet1")

    ws.Range("E13").Value = instno
End Sub 
```

**跟进**

如果你想遵循这种`CreateObject`方式，那么试试这个

```
Dim instno As String

Sub UserForm_Initialize()
    Dim wsThis As Workbook
    Set wsThis = ThisWorkbook.Sheets("Sheet1")

    '~~> Though I am not in favor of `ActiveCell`. Use the actual cell address
    instno = ws.Range("J" & ActiveCell.Row)
End Sub

Private Sub CMB2_Click()
    Dim xlApp As Object, xlWb As Object, xlWs As Object

    Set xlApp = CreateObject("Excel.Application")
    xlApp.Visible = True

    Set xlWb = xlApp.Workbooks.Open(Filename:="G:\tracking.xlsm")
    '~~> Change this to the relevant worksheet
    Set xlWs = xlWb.Sheets("Sheet1")

    xlWs.Range("E13").Value = instno
End Sub 
```

# graphics - 参数线和笛卡尔线的交点是什么？

> ID：16129831
> 
> 赞同：0
> 
> 时间：2013-04-21T09:40:08.733
> 
> 标签：graphics, 3d, geometry, linear-algebra

我有两条直线。

参数形式之一：

```
L1 = {
  (x = x1 + t.a1),
  (y = y1 + t.b1),
  (z = z1 + t.c1)
} 
```

另一个是笛卡尔线段：

```
L2 = {
  (px1, py1, pz1),
  (px2, py2, pz2)
} 
```

找到两条线的交点的有效方法是什么？

我能想到的方法是：

*   将 L2 转换为参数形式
*   求解点 P
*   找出 P 是否在 L2 上

但是有没有更有效的方法？这个问题类似于[https://math.stackexchange.com/questions/28503/how-to-find-intersection-of-two-lines-in-3d](https://math.stackexchange.com/questions/28503/how-to-find-intersection-of-two-lines-in-3d)。但是，我对效率而不是解决方案感兴趣。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T14:07:20.523

让我们**d1**是第一行的方向向量，**d2**是第二行的方向向量，**bb**是基点之间的向量（**bb=b2-b1**）。

设**p = (d1 x d2)**（向量积）。如果**p**是零向量，则线是平行的。

然后您需要检查线是否相交： ( **bb * p** ) 应该 = 0 （标量积）。否则这些线是倾斜的。

交点是**i = b1 + d1 * [ (bb x d2) * p / (p * p) ]**

# actionscript-3 - As3：将类作为参数传递并动态调用静态方法

> ID：16129837
> 
> 赞同：0
> 
> 时间：2013-04-21T09:40:30.173
> 
> 标签：actionscript-3

可以说我有一个类**cMenu**，它有一个函数**displayMenu()**。此函数调用子菜单类中的静态函数**init()**，具体取决于传递给 displayMenu() 的内容，如下所示：

```
cMenu.displayMenu('cMenuMain');

public class cMenu
{   
    public static function displayMenu(sMenu:String):void{

        switch(sMenu) {
            case 'cMenuMain':
                cMenuMain.init();
                break;
            case 'cMenuHighscore':
                cMenuHighscore.init();
                break;
        }

    }
}

public class cMenuMain
{   
    public static function init():void{
        trace('cMenuMain');
    }
} 
```

**我的问题：**我能否以某种方式避免切换并根据 sMenu 的设置动态调用子菜单的函数 init()？就像是`eval(sMenu+'.init()');`

感谢提示！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T09:56:55.773

要通过名称字符串获取类，您可以使用`getDefinitionByName`，如下例所示：

```
var ClassReference:Class = getDefinitionByName(sMenu) as Class; 
```

但是你不会确切地知道你`ClassReference`是什么类型，所以不知道它是否有`init`方法。

如果您确实知道类型，则可以调用静态方法：

```
ClassReference.init(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T10:47:29.570

如果你的子菜单类总是实现一个 init 方法（你可以使用一个接口来确保），你可以将目标子菜单类作为参数传递给 displayMenu 方法

```
public static function displayMenu(submenuClass:*):void{
 // if you need to perform something here depending on the submenu class
 if (submenuClass is cMenuMain) {
  // do something
 } 
 submenuClass.init()
}

displayMenu(cMenuMain); 
```

# jquery - 如何在 jQuery Datatables 中添加对逗号分隔的数字排序的支持？

> ID：16129839
> 
> 赞同：2
> 
> 时间：2013-04-21T09:41:03.833
> 
> 标签：jquery, twitter-bootstrap, datatables

如何在 jQuery Datatables 中添加对数字逗号排序的默认支持？

...无需使用 sType 指定列。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T09:41:03.833

**步骤1：**

使用以下代码扩展 dataTableExt.oSort：

```
$.extend($.fn.dataTableExt.oSort, {
  "numeric-pre": function(a) {
    a = (a === "-" || a === "") ? 0 : a.replace(/[^\d\-\.]/g, "");
    return parseFloat(a);
  },
  "numeric-asc": function(a, b) {
    return a - b;
  },
  "numeric-desc": function(a, b) {
    return b - a;
  }
}); 
```

**第 2 步：** 扩展 dataTableExt.aTypes，在 sValidChars 变量中添加逗号：

```
 # Added comma to sValidChars
 $.extend $.fn.dataTableExt.aTypes, [
        /*
         * Function: -
         * Purpose:  Check to see if a string is numeric
         * Returns:  string:'numeric' or null
         * Inputs:   mixed:sText - string to check
         */
        function (sData) {
            /* Allow zero length strings as a number */
            if (typeof sData === 'number') {
                return 'numeric';
            }
            else if (typeof sData !== 'string') {
                return null;
            }

            var sValidFirstChars = "0123456789-";
            var sValidChars = "0123456789.,";
            var Char;
            var bDecimal = false;

            /* Check for a valid first char (no period and allow negatives) */
            Char = sData.charAt(0);
            if (sValidFirstChars.indexOf(Char) == -1) {
                return null;
            }

            /* Check all the other characters are valid */
            for (var i = 1; i < sData.length; i++) {
                Char = sData.charAt(i);
                if (sValidChars.indexOf(Char) == -1) {
                    return null;
                }

                /* Only allowed one decimal place... */
                if (Char == ".") {
                    if (bDecimal) {
                        return null;
                    }
                    bDecimal = true;
                }
            }

            return 'numeric';
        },

        /*
         * Function: -
         * Purpose:  Check to see if a string is actually a formatted date
         * Returns:  string:'date' or null
         * Inputs:   string:sText - string to check
         */
        function (sData) {
            var iParse = Date.parse(sData);
            if ((iParse !== null && !isNaN(iParse)) || (typeof sData === 'string' && sData.length === 0)) {
                return 'date';
            }
            return null;
        },

        /*
         * Function: -
         * Purpose:  Check to see if a string should be treated as an HTML string
         * Returns:  string:'html' or null
         * Inputs:   string:sText - string to check
         */
        function (sData) {
            if (typeof sData === 'string' && sData.indexOf('<') != -1 && sData.indexOf('>') != -1) {
                return 'html';
            }
            return null;
        }
    ]); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-13T20:54:21.077

最新的dataTables版本（1.10.4）处理格式化数字排序，没有任何扩展名，即降序排序时puts `$1,000.00`before ，升序排序时puts before 。`$900.00``$900.00``$1,000.00`

请参阅[http://datatables.net/reference/option/columns.type](http://datatables.net/reference/option/columns.type)`num-fmt`。

# c++ - 从应用程序调用 Gnuplot 时崩溃

> ID：16129842
> 
> 赞同：4
> 
> 时间：2013-04-21T09:41:29.440
> 
> 标签：c++, linux, gnuplot

我想使用 gnuplot 在控制台应用程序（C++、Eclipse CDT、Linux）中绘制我的结果。我创建了一个简单的类来使事情变得更容易（见下面的代码）。我尝试在我的主要中绘制一个测试图：

```
int main() {

    Gnuplot plot;

    plot("plot sin(x)") ;

    cout<<"Press button:";
    cin.get();

    return 0;
} 
```

我的问题是，如果我正常启动我的应用程序，我会收到一条运行时错误消息“无法初始化 wxWidgets。执行线 plot("plot sin(x)") 后出现分段错误（核心转储）'。但是，如果我在调试模式下单步执行这些行，则代码可以正常工作，并且我的绘图窗口按预期显示为正弦。欢迎任何帮助。

```
#ifndef GNUPLOT_H_
#define GNUPLOT_H_

#include <string>
using namespace std;

class Gnuplot {

    public:
        Gnuplot() ;
        ~Gnuplot();
        void operator ()(const string & command); // send any command to gnuplot

    protected:
        FILE *gnuplotpipe;
};
#endif 
```

和来源：

```
#include "gnuplot.h"
#include <iostream>
#include <string>
#include "stdio.h"

Gnuplot::Gnuplot() {

    gnuplotpipe=popen("gnuplot -persist","w");
    if (!gnuplotpipe) {
    cerr<< ("Gnuplot not found !");
    }
}

Gnuplot::~Gnuplot() {

    fprintf(gnuplotpipe,"exit\n");
    pclose(gnuplotpipe);
}

void Gnuplot::operator()(const string & command) {

    fprintf(gnuplotpipe,"%s\n",command.c_str());
    fflush(gnuplotpipe);// flush is neccessary, nothing gets plotted else
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T10:50:31.660

在没有到 X 服务器的链接的情况下执行将导致此问题。通常 ssh 不会为您提供到 X 服务器的链接（但可以配置或切换到这样做）。我发现我可以复制“ssh localhost”引用的错误并输入 gnuplot 和绘图命令，它将假定 wxt 是终端类型并给出失败的初始化 wxWidgets 错误和段错误。

不过，如果我先这样做，我发现它对我有用。

**警告：第一个命令“xhost +”很危险，它会禁用 X 安全性并允许互联网上的任何地方连接到您的屏幕、键盘或鼠标。** 如果机器位于网络地址转换路由器（例如家庭网络中使用的路由器）后面，这可能不是问题。

从外壳：

```
xhost +
export DISPLAY=:0.0 
```

以编程方式启动 gnuplot，然后正常发送 gnuplot 命令。
应该管用。目前在 ssh 登录中为我工作。如果没有，请检查您用于启动新进程的环境，并将“DISPLAY=:0.0”明确放入其中。这意味着连接到本地显示器。主机名可以在 :

在 Linux 下，gnuplot 通常会寻找 X 服务器。它可能找不到它。

如果目标是将图形保存在文件中，则添加：

```
set terminal png
set output 'graph.png' 
```

在“plot”命令之前添加到您的 gnuplot 命令。这甚至应该在无头服务器上工作。

如果您想控制输出文件名，只需发送其他名称而不是 graph.png

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T10:33:26.473

以下代码（在 C 中，而不是 C++ 中）对我来说很好（当从某个 X11 会话中的终端启动时，因此`DISPLAY`设置为`:0.0`）：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <unistd.h>

int main(int argc, char**argv)
{
  FILE *gp = NULL;
  if (!getenv("DISPLAY")) 
    {fprintf(stderr, "no display\n"); exit(EXIT_FAILURE);};
  gp = popen("gnuplot -persist", "w");
  if (!gp) {perror("gnuplot popen"); exit(EXIT_FAILURE);};
  //sleep (1);
  fprintf(gp, "plot sin(x)\n");
  fflush(gp);
  fprintf(gp, "exit\n");
  fflush(gp);
  //sleep (1);
  pclose (gp);
  return 0;
} 
```

^(（使用 gnuplot 4.6 补丁级别 0 在 Debian/Sid x86-64 上工作）)

我想-ing 对于让有足够的时间工作`sleep`实际上很有用。`gnuplot`并且不要忘记`fflush`在每个命令之后。

## 附加物：

你应该有一个`DISPLAY`. 如果您收到`no display`错误消息，则表示您在错误的环境中启动程序。在这种情况下，任何编程技巧都无济于事，因为`gnuplot`需要一些[X11 服务器](http://en.wikipedia.org/wiki/X11)与之通信。

所以你应该更多地解释你是如何开始你的应用程序的。我猜它恰好可以在 Eclipse 中工作，仅仅是因为 Eclipse 使用一些 X11 服务器运行，而没有 Eclipse，你碰巧没有任何可用的 X11 服务器。（我无法解释为什么，这在很大程度上取决于您启动程序的方式。如果使用`ssh`，请不要忘记`ssh -X`并适当地配置您的*ssh*）。

事实上，我的呼吁`sleep`是无用的。但是测试 a 的存在`DISPLAY`是必不可少的。

^(它实际上是一些错误，如果没有;`gnuplot`应该会更好地失败。`DISPLAY`我在他们的错误跟踪器上添加了一张票。您可以使用重现该错误`unset DISPLAY; echo 'plot sin(x); exit' | gnuplot -persist`)

# java - Java 从不声明方法中变量的访问级别，无论是否为静态

> ID：16129855
> 
> 赞同：-7
> 
> 时间：2013-04-21T09:44:34.147
> 
> 标签：java, static, main, public

今天突然意识到，当我尝试为 main 方法声明一个变量时，Java 从来没有为局部变量指定访问级别。我也尝试给它一个访问级别修饰符，但它没有编译。错误是： **参数 t1 的非法修饰符；只允许final**

```
package myThread;

import java.lang.Thread;
import java.lang.String;
import java.lang.System;

public class PrintThread extends Thread{ //extends Thread class

    private long sleepTime;

    public PrintThread(String name)
    {
        super(name);
        this.sleepTime = (long) (java.lang.Math.random() * 5000);

        System.out.println("Thread: " + getName() + ", sleepTime: " + sleepTime);
    }

    public void run() // override run method
    {
        System.out.println(getName() + " go to sleep...");
        try
        {
            sleep(sleepTime);
        } catch (InterruptedException e)
        {
            e.getMessage();
        }
        System.out.println(getName() + " out of sleep!");
    }

    public static void main(String[] args)
    {
        public PrintThread t1 = new PrintThread("T1"); // CANNOT COMPILE
        t1.start(); // start thread by start() method
    }
} 
```

众所周知，我们需要使用**public protected package private static final**等来指定 java 类的成员变量。

但是我们从不为类方法（静态或非静态）变量这样做。

我整天都被这个概念所困扰。以前，我只是照常写java代码，但没有意识到这种现象。

你能给我一些提示吗？我不能仅仅通过消除t1 的**公共**关键字来说服自己。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T09:48:14.703

因为没有意义。方法中声明的变量是方法的局部变量；即它们不能在方法之外访问。为什么以及如何在方法之外修改这些变量？方法之外的代码甚至不知道它们，因此您不需要保护它们免受外部代码的影响。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-21T09:47:06.213

您不能在方法内添加访问修饰符，因为它仅属于您创建变量的方法。所以在方法中添加访问修饰符是没有用的

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T05:17:22.230

方法变量的范围仅限于该方法。当方法启动/变量声明并在方法结束时销毁时，此平均引用会在堆栈上创建。

允许它公开或任何其他访问说明符不会有任何好处，因为该字段不会存在于方法之外。

另一个问题你将如何在方法之外访问它们？

```
class A{
   public String s="test";
   void myMethod(){
     public String s=this.s+"not allowed"; // If allowed how will you access the local s variable outside of method??? 
   } 
```

因此编译器不允许使用这些访问说明符，因为没有使用声明它们。

# java - 如何将 PrimeFaces 的“Wizard”和“PanelGrid”的方向更改为 RTL

> ID：16129863
> 
> 赞同：2
> 
> 时间：2013-04-21T09:46:09.653
> 
> 标签：java, primefaces, arabic, bidirectional

我想知道是否有在以下 PrimeFaces 组件上设置 RTL 方向：

1.  面板网格。
2.  向导

[这篇文章](http://blog.primefaces.org/?p=2283)说 primefaces 已经双向化了：但是这种变化是否包括有问题的两个组件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T10:27:08.230

Primefaces 还没有完全双向化，因为它需要花费大量时间来完成，如果你想要一些东西去 RTL，

第一个应用程序级转换：

```
<context-param>
   <param-name>primefaces.DIR</param-name>
   <param-value>RTL</param-value>
</context-param> 
```

如果这没有帮助，那么您将不得不手动完成。您需要找到生成的组件的类并在 css 中转换它们的浮点和方向，所有类都在 Primefaces 手册中指定[http:// primefaces.org/documentation.html](http://primefaces.org/documentation.html)。

# matrix - 从 Scilab 中的矩阵中获取特定行

> ID：16129868
> 
> 赞同：1
> 
> 时间：2013-04-21T09:46:48.670
> 
> 标签：matrix, scilab

例如，我创建了一个矩阵

```
a = [1, 2, 3; 4, 5, 6; 7, 8, 9] 
```

我想提取变量r中的第二行，所以在那之后

```
r = [4, 5, 6]. 
```

我怎么能这样做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-03-28T12:38:44.660

要获得第二行使用

```
r = a(2,:); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T09:56:00.463

```
r = a(2,$); 
```

一个很好的教程可以在这里找到：http: [//hkumath.hku.hk/~nkt/Scilab/IntroToScilab.html](http://hkumath.hku.hk/~nkt/Scilab/IntroToScilab.html)

# r - ggplot2 每个美学的多个尺度/图例，重新审视

> ID：16129876
> 
> 赞同：19
> 
> 时间：2013-04-21T09:47:52.600
> 
> 标签：r, ggplot2, data-visualization

我有一个例子，我想使用 ggplot 突出显示序列比对的几个属性。我正在使用 geom_tile 并希望为两个分数属性设置两组不同颜色的瓷砖。我只能想象一个。

我知道每种美学只有一个比例（[以及它背后的逻辑](https://stackoverflow.com/questions/11752709/using-two-scale-colour-gradients-on-one-ggplot)），但也许有人知道如何在这样的情况下破解它，在一个“情节”中使用不同的颜色比例是有意义的。

也许手动添加 Grobs，但我不知道从哪里开始......

另一个问题：由于某种原因`override.aes=list(shape = "A")`不起作用，有什么想法吗？

再一个：有什么方法可以根据图块的大小（或相反）按比例缩放文本？

```
library(ggplot2)
library(grid)

pd = data.frame(
  letters = strsplit("AGTGACCGACTATCATAGTGACCCAGAATCATAGTGACCGAGTATGAT", "")[[1]],
  species = rep(c("Human", "Armadillo", "Porcupine"), each=16),
  x       = rep(1:16, 3),
  change  = c(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
              0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,
              0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0),
  score1  = c(0,0,0,0,0,0,1,1,2,2,2,3,3,3,4,3,
              0,0,0,0,0,0,0,0,0,1,1,1,1,0,0,0,
              0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0),
  score2  = c(0,0,0,0,1,1,1,1,0,0,0,0,0,0,0,0,
              0,0,0,0,2,2,2,2,0,0,0,0,0,0,0,0,
              0,0,0,0,3,3,3,3,0,0,0,0,0,0,0,0)
)

ggplot(pd[pd$score1 != 0,], aes(x=x, y=species)) +
  coord_fixed(ratio = 1.5, xlim=c(0.5,16.5), ylim=c(0.5, 3.5)) +
  geom_tile(aes(fill=score1)) +
  scale_fill_gradient2("Score 1", limits=c(0,4),low="#762A83", mid="white", high="#1B7837", guide=guide_colorbar(title.position="top")) +
  geom_text(data=pd, aes(label=letters, color=factor(change)), size=rel(5), family="mono") +
  scale_color_manual("Change", values=c("black", "#F2A11F"), labels=c("None", "Some"), guide=guide_legend(direction="vertical", title.position="top", override.aes=list(shape = "A"))) +
  theme(panel.background=element_rect(fill="white", colour="white"),
        axis.title = element_blank(),
        axis.ticks.y = element_blank(),
        axis.text.y = element_text(family="mono", size=rel(2)),
        axis.text.x = element_text(size=rel(0.7)),
        legend.text = element_text(size=rel(0.7)),
        legend.key.size = unit(0.7, "lines"),
        legend.position = "bottom", legend.box = "horizontal") +
  ggtitle("What about Score2?") 
```

![如何添加另一层不同色阶的瓷砖？](https://i.stack.imgur.com/MDtIt.png)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-06-08T18:35:57.090

通过组合来自两个单独生成的地块的 grobs，我设法获得了令人满意的结果。我确信该解决方案可以更好地推广以适应不同的 grob 指数......

```
library(ggplot2)
library(grid)

pd = data.frame(
  letters = strsplit("AGTGACCGACTATCATAGTGACCCAGAATCATAGTGACCGAGTATGAT", "")[[1]],
  species = rep(c("Human", "Armadillo", "Porcupine"), each=16),
  x       = rep(1:16, 3),
  change  = c(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
              0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,
              0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0),
  score1  = c(0,0,0,0,0,0,1,1,2,2,2,3,3,3,4,3,
              0,0,0,0,0,0,0,0,0,1,1,1,1,0,0,0,
              0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0),
  score2  = c(0,0,0,0,1,1,1,1,0,0,0,0,0,0,0,0,
              0,0,0,0,2,2,2,2,0,0,0,0,0,0,0,0,
              0,0,0,0,3,3,3,3,0,0,0,0,0,0,0,0)
)

p1=ggplot(pd[pd$score1 != 0,], aes(x=x, y=species)) +
  coord_fixed(ratio = 1.5, xlim=c(0.5,16.5), ylim=c(0.5, 3.5)) +
  geom_tile(aes(fill=score1)) +
  scale_fill_gradient2("Score 1", limits=c(0,4),low="#762A83", mid="white", high="#1B7837", guide=guide_colorbar(title.position="top")) +
  geom_text(data=pd, aes(label=letters, color=factor(change)), size=rel(5), family="mono") +
  scale_color_manual("Change", values=c("black", "#F2A11F"), labels=c("None", "Some"), guide=guide_legend(direction="vertical", title.position="top", override.aes=list(shape = "A"))) +
  theme(panel.background=element_rect(fill="white", colour="white"),
        axis.title = element_blank(),
        axis.ticks.y = element_blank(),
        axis.text.y = element_text(family="mono", size=rel(2)),
        axis.text.x = element_text(size=rel(0.7)),
        legend.text = element_text(size=rel(0.7)),
        legend.key.size = unit(0.7, "lines"),
        legend.position = "bottom", legend.box = "horizontal") +
  ggtitle("Voila, the Score2!")

p2=ggplot(pd[pd$score2 != 0,], aes(x=x, y=species)) +
  coord_fixed(ratio = 1.5, xlim=c(0.5,16.5), ylim=c(0.5, 3.5)) +
  geom_tile(aes(fill=score2)) +
  scale_fill_gradient2("Score 2", limits=c(0,3),low="#1B7837", mid="white", high="#762A83", guide=guide_colorbar(title.position="top")) +
  geom_text(data=pd, aes(label=letters, color=factor(change)), size=rel(5), family="mono") +
  scale_color_manual("Change", values=c("black", "#F2A11F"), labels=c("None", "Some"), guide=guide_legend(direction="vertical", title.position="top", override.aes=list(shape = "A"))) +
  theme(panel.background=element_rect(fill="white", colour="white"),
        axis.title = element_blank(),
        axis.ticks.y = element_blank(),
        axis.text.y = element_text(family="mono", size=rel(2)),
        axis.text.x = element_text(size=rel(0.7)),
        legend.text = element_text(size=rel(0.7)),
        legend.key.size = unit(0.7, "lines"),
        legend.position = "bottom", legend.box = "horizontal") +
  ggtitle("What about Score2?")

p1g=ggplotGrob(p1)
p2g=ggplotGrob(p2)

combo.grob = p1g

combo.grob$grobs[[8]] = cbind(p1g$grobs[[8]][,1:4], 
                              p2g$grobs[[8]][,3:5], 
                              size="first")

combo.grob$grobs[[4]] = reorderGrob(
                          addGrob(p1g$grobs[[4]], 
                                  getGrob(p2g$grobs[[4]], 
                                          "geom_rect.rect", 
                                          grep=TRUE)), 
                          c(1,2,5,3,4))
grid.newpage()
grid.draw(combo.grob) 
```

![一个地块中的两个尺度](https://i.stack.imgur.com/mNzSl.png)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-22T00:18:54.360

我会使用文本大小来表示 score2：

```
ggplot(pd[pd$score1 != 0,], aes(x=x, y=species)) +
  coord_fixed(ratio = 1.5, xlim=c(0.5,16.5), ylim=c(0.5, 3.5)) +
  geom_tile(aes(fill=score1)) +
  scale_fill_gradient2("Score 1", limits=c(0,4),low="#762A83", mid="white", high="#1B7837", guide=guide_colorbar(title.position="top")) +
  geom_text(data=pd, aes(label=letters, size = score2, color=factor(change)), family="mono") +
  scale_size_continuous(range = c(4, 8)) +
  scale_color_manual("Change", values=c("black", "#F2A11F"), labels=c("None", "Some"), guide=guide_legend(direction="vertical", title.position="top", override.aes=list(shape = "A"))) +
  theme(panel.background=element_rect(fill="white", colour="white"),
        axis.title = element_blank(),
        axis.ticks.y = element_blank(),
        axis.text.y = element_text(family="mono", size=rel(2)),
        axis.text.x = element_text(size=rel(0.7)),
        legend.text = element_text(size=rel(0.7)),
        legend.key.size = unit(0.7, "lines"),
        legend.position = "bottom", legend.box = "horizontal") +
  ggtitle("What about Score2?") 
```

![在此处输入图像描述](https://i.stack.imgur.com/tmIOj.png)

更新：

这是一个快速的技巧，我不确定这是否容易目视检查......

```
library(ggplot2)
library(grid)
library(proto)

GeomTile2 <- proto(ggplot2:::GeomTile, {
  reparameterise <- function(., df, params) {
    df <- .$.super$reparameterise(df, params)
    if (params$ud == "u") 
      transform(df, ymin = y) 
    else 
        transform(df, ymax = (y-ymin)*0.8 + ymin, ymin = (y-ymin)*0.2 + ymin)
  }
  draw <- function(..., ud) {.$.super$draw(..., ud)}
})
geom_tile2 <- function (mapping = NULL, data = NULL, stat = "identity", position = "identity", ..., ud = "u") { 
  GeomTile2$new(mapping = mapping, data = data, stat = stat, position = position, ..., ud = ud)
}

ggplot(pd, aes(x=x, y=species)) +
  coord_fixed(ratio = 1.5, xlim=c(0.5,16.5), ylim=c(0.5, 3.5)) +
  geom_tile2(aes(fill=score1), ud = "u") +
  geom_tile2(aes(fill = score2), ud = "d") +
  scale_fill_gradient2("Score 1", limits=c(0,4),low="#762A83", mid="white", high="#1B7837", guide=guide_colorbar(title.position="top")) +
  geom_text(data=pd, aes(label=letters, color=factor(change)), size=rel(5), family="mono") +
  scale_color_manual("Change", values=c("black", "#F2A11F"), labels=c("None", "Some"), guide=guide_legend(direction="vertical", title.position="top", override.aes=list(shape = "A"))) +
  theme(panel.background=element_rect(fill="white", colour="white"),
        axis.title = element_blank(),
        axis.ticks.y = element_blank(),
        axis.text.y = element_text(family="mono", size=rel(2)),
        axis.text.x = element_text(size=rel(0.7)),
        legend.text = element_text(size=rel(0.7)),
        legend.key.size = unit(0.7, "lines"),
        legend.position = "bottom", legend.box = "horizontal") +
  ggtitle("What about Score2?") 
```

![在此处输入图像描述](https://i.stack.imgur.com/7x7OF.png)

上半部分表示 score1，下半部分表示 score2。

# jquery - jQuery - 单击时更改图像 src

> ID：16129879
> 
> 赞同：2
> 
> 时间：2013-04-21T09:48:23.057
> 
> 标签：jquery

我希望能够在单击两个不同元素时更改图像的 src，以从一个图像更改为活动图像。

例如，如果单击 .vehicle-desc-wrap 或 .vehicle-pic-wrap ，我希望能够将此 div 中的图像 url 从 更改`images/saloon-outline.png`为`images/saloon-outline-active.png`，并且与所有其他汽车图像相同。

因此，例如，如果我单击轿车图像，则 url 将更改为 saloon-outline-active.png，但如果我随后单击行政轿车图像，它将行政图像的 src 更改为`execsaloon-outline-active.png`，并且所有其他图像都恢复正常状态（没有 -active）。这是HTML：-

```
<div id="div-vehicle-wrap">

    <div id="div-Car" class="vehicle-item ui-corner-all req-wrapper">

    <div class="vehicle-pic-wrap ui-corner-left req-display success">

    <img class="vehicle-pic-ie6-png" height="100" width="120" alt="Standard Saloon" src="images/saloon-outline.png">

    </div>

    <div class="vehicle-desc-wrap req-display success">

    <div class="vehicle-radio-wrap">

    <div class="vehicle-accept-wrap">

</div>

<div id="div-Exec" class="vehicle-item ui-corner-all req-wrapper">

    <div class="vehicle-pic-wrap ui-corner-left req-display success">

    <img class="vehicle-pic-ie6-png" height="100" width="120" alt="Executive Saloon" src="images/execsaloon-outline.png">

    </div>

    <div class="vehicle-desc-wrap req-display success">

    <div class="vehicle-radio-wrap">

    <div class="vehicle-accept-wrap"></div>

</div> 
```

到目前为止，我有以下内容：-

```
 $('img').click(function(){
            var src = this.src;
            this.src = src.indexOf('-active') == -1 ? src.replace('.png','-active.png') : src.replace('-active.png','.png');
        }); 
```

这不会将非活动图像更改回原始 src，只会更改单击实际图像而不是两个包装类的图像；`.vehicle-desc-wrap or .vehicle-pic-wrap`

如果有人可以帮助我，那将不胜感激。

这是网站的链接：[LINK](http://www.marandy.com/onlinebooking_htp/login-guest.php)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T10:09:25.427

尝试

```
$(function(){
    var regexactive = /-active\..*$/;

    var ct = $('#div-vehicle-wrap');
    var imgs = $('.vehicle-pic-wrap img', ct);

    function deactiveImage(imgs){
        imgs.each(function(){
            var img = $(this);
            var src = img.attr('src');
            if( regexactive.test(src) ){
                img.attr('src', src.replace('-active.', '.'))
            }
        });
    }

    function activateImage(imgs){
        imgs.each(function(){
            var img = $(this);
            var src = img.attr('src');
            if( !regexactive.test(src) ){
                img.attr('src', src.replace('.png', '-active.png'))
            }
        });
    }

    ct.on('click', '.vehicle-desc-wrap', function(){
        var item = $(this).closest('.vehicle-item');
        deactiveImage($('.vehicle-pic-wrap img', item));
    });

    ct.on('click', '.vehicle-pic-wrap', function(){
        var item = $(this).closest('.vehicle-item');

        var img = $('.vehicle-pic-wrap img', item);
        deactiveImage(imgs.not(img))
        activateImage(img);
    });
}) 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/R9VYh/4/)

# javascript - 弹性滑块不工作

> ID：16129880
> 
> 赞同：-2
> 
> 时间：2013-04-21T09:48:26.323
> 
> 标签：javascript

这是代码

```
<script type="text/javascript">  
    $(window).load(function() {  
        $('.flexslider').flexslider({  
            animation: "fade"  
       });  
       $().UItoTop({ easingType: 'easeOutQuart' });  
   });    
 </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T13:06:50.400

一切对我来说都很好，请检查是否包含所有必要的资源，在我的示例中是：

1.  显然是 jQuery（1.9.1，但我也尝试过旧版本和新版本）
2.  相关脚本和css
3.  滑块使用的图像的存在

脚本：

```
<script type='text/javascript' src="http://flexslider.woothemes.com/js/jquery.flexslider.js"></script> 
<script type='text/javascript' src="http://flexslider.woothemes.com/js/jquery.easing.js"></script> 
<script type='text/javascript' src="http://flexslider.woothemes.com/js/jquery.mousewheel.js"></script> 
<script type='text/javascript' src="http://lab.mattvarone.com/projects/jquery/totop/js/jquery.ui.totop.js"></script> 
```

CSS：

```
<link rel="stylesheet" type="text/css" href="http://flexslider.woothemes.com/css/flexslider.css"> 
<link rel="stylesheet" type="text/css" href="http://lab.mattvarone.com/projects/jquery/totop/css/ui.totop.css"> 
```

工作小提琴：http: [//jsfiddle.net/IrvinDominin/cusuy/](http://jsfiddle.net/IrvinDominin/cusuy/)

# ios - 在 iOS 5 中安全使用 @{key: object>} 和 @[objects]

> ID：16129882
> 
> 赞同：1
> 
> 时间：2013-04-21T09:48:35.007
> 
> 标签：ios, ios5, ios6

我可以在 iOS 5.0 中使用在 iOS 6.0 中宣布的 NSArray 和 NSDictionary 的较短版本，否则我的应用程序会崩溃吗？

我正在使用 Xcode 4.6.2

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T09:51:52.700

我正在使用它们并且我的应用程序没有崩溃。这是因为它们是编译器功能。因此，只要您拥有正确版本的 Xcode 和 clang（如果 @[objects] 有效，那么您拥有正确的版本]，它就会知道您的意思是创建一个数组或字典并为此创建正确的二进制代码。iOS 5/6 不会知道你的源代码是什么样子的。

# php - ini_set 后无法访问 $_SESSION

> ID：16129883
> 
> 赞同：2
> 
> 时间：2013-04-21T09:48:36.363
> 
> 标签：php, session, ini-set

因为我用 ini_set 更改了一些设置，所以我无法再访问会话信息，但它们存在并且是正确的。
这些是设置：

```
ini_set('session.save_path', '../php/config/session');
ini_set('session.hash_function', 'sha512');
ini_set('session.entropy_file', '/dev/urandom');
ini_set('session.entropy_length', '512');
ini_set('session.gc_probability', '1');
ini_set('session.cookie_httponly', '1');
ini_set('session.cookie_secure', '1');
ini_set('session.use_only_cookies', '1');
ini_set('session.use_trans_sid', '0');
session_name("RazorphynSupport");
session_start(); 
```

php不会抛出任何错误。
谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T06:57:23.300

我发现了问题：`ini_set('session.cookie_secure', '1');`未以“正确的方式”安装 SSL 认证，因此我的服务器无法识别它并检测到打开的会话

# spotify - 具有播放列表偏移的图像视图

> ID：16129884
> 
> 赞同：2
> 
> 时间：2013-04-21T09:49:00.610
> 
> 标签：spotify

当使用 Views API 中的新[图像视图](http://developer.spotify.com/technologies/apps/docs/preview/views/views-image-image.html)创建播放器小部件时，如何让它播放播放列表中的第 n 个曲目？

我正在尝试创建 5 个播放器小部件，每个小部件都映射到播放列表的第一、第二、第三、第四和第五轨道。用户无法访问播放列表，并使用`Playlist.createTemporary()`.

我看过`getContextGroupData`但我没有找到有关如何正确构造 Group 对象的任何信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T14:13:07.733

对我来说，你想要达到的目标有点不清楚。您是否想要同一个播放列表的五个图像，但单击这五个上的播放按钮会播放不同的曲目？或者你想让图像代表五个轨道？

在第一种情况下：目前不可能。也不确定我们是否希望它成为可能，因为如果两个相同的组件以不同的方式工作，它会打破用户的期望。

在第二种情况下：您可以从播放列表中获取曲目对象并为每个曲目创建一个图像。但是，它只会播放该曲目，而不是播放列表作为上下文的曲目。也许我们将来会公开一种提供上下文的方法。

getContextGroupData 选项用于更高级的连接。新的艺术家观点就是一个很好的例子。艺术家视图上的所有专辑都已连接，因此在第一张专辑结束时它将继续播放下一张专辑。这是通过调用列表视图上的 connect() 来连接的。然后，您从一个连接的列表视图中获取上下文组并将其传递给图像视图，以使每个专辑的图像在当前结束时继续播放下一张专辑。您也可以自己创建上下文组（但这并不能解决您的问题）。

# php - 通过 .htaccess 或 PHP 替换、过滤 URL

> ID：16129888
> 
> 赞同：0
> 
> 时间：2013-04-21T09:50:10.693
> 
> 标签：php, .htaccess, replace, filtering, mod-rewrite

寻找通过 .htaccess 或 PHP 替换/过滤 URL 的解决方案：

`www.domain.com/?site=FilteringSite.com`

应该去：

`www.domain.com`

我尝试过：

```
#SEO Friendly 301 Redirects
Redirect 301 http://www.domain.com/?site=FilteringSite.com http://www.domain.com 
```

并且似乎不起作用。

htaccess 文件

```
#### mod_rewrite in use
Options +FollowSymlinks
RewriteEngine On 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T10:15:59.703

很确定 a`301 Redirect`不适用于查询字符串，但您可以尝试 PHP 解决方案，例如：

```
<?php

$badDomains = array("filtersite.com", "filteringsite.com");

if(in_array(strtolower($_GET['site']), $badDomains)) {
    header("Location: http://mydomain.com", true, 301);
    exit;
} 
```

不过，我确实相信重定向仅适用于`?`. ^^

# matlab - MatLab - 比较不同尺寸的矩阵并允许公差，如何？

> ID：16129890
> 
> 赞同：1
> 
> 时间：2013-04-21T09:50:19.057
> 
> 标签：matlab, matrix

比较不同大小的矩阵：ismember(matrix1,matrix2)

找到容差：容差 = 10.1；
指数 = abs(matrix1-matrix2) <= 容差；

我不能让他们一起工作。我如何同时实现两者？

我不仅要比较不同大小的矩阵，还要将它们与允许不精确结果匹配的容差进行比较。

任何帮助或指导将不胜感激，谢谢！

# cordova - localnotification phonegap 插件的工作示例

> ID：16129893
> 
> 赞同：1
> 
> 时间：2013-04-21T09:50:26.007
> 
> 标签：cordova, plugins, localnotification

我花了好几个小时试图让 localnotification phonegap 插件工作。我阅读了许多 stackoverflow 答案并尝试了许多 Cordova、Eclipse、Android 版本，但没有任何成功。识别插件变量、R.drawable.ic_launcher 和 Java 文件中的许多其他内容的问题。我知道一点javascript，但对Java一无所知。

我真的很想构建我的免费呼吸、微笑、放松提醒警报应用程序。我相信这个应用程序可以帮助每个人应对日常挑战。

谁能与我分享一个 Eclipse 本地通知项目的工作示例。我真的很感激。非常感谢！

# c# - EF 代码优先中的关系问题

> ID：16129900
> 
> 赞同：1
> 
> 时间：2013-04-21T09:50:52.267
> 
> 标签：c#, .net, entity-framework

我有两张表要加入游戏和详细信息。游戏有一个细节

问题是我无法正确绑定表格。我得到的错误是

“实体类型‘游戏’和‘详细信息’不能共享表‘详细信息’，因为它们不在同一类型层次结构中，或者它们之间没有有效的一对一外键关系和匹配的主键。”

这是我的实现

```
public class Game
{
    [Key]
    [ForeignKey("GameDetails")]
    public int GameId { get; set; }

    public string GameName { get; set; }

    //Navigation prop
    public virtual Details GameDetails { get; set; }
    public virtual ICollection<Details> DetailsId { get; set; }
}

public class Details
{
    [Key]
    public int DetailsId { get; set; }

    public int GameId { get; set; }
    public int RatingId { get; set; }

    public int Grade { get; set; }

    //Navigation prop
    [ForeignKey("DetailsId")]
    public virtual Game GameDetails { get; set; }
    public virtual RatingCompany RatingCompany { get; set; }
}

    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        modelBuilder.Entity<Game>().HasKey(f => f.GameId);
        modelBuilder.Entity<Game>()
            .Map(m =>
                     {
                         m.Properties(b => new {b.GameId});
                         m.ToTable("Details");
                     });
    } 
```

我怎样才能正确地将它与 1-1 关系绑定？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T10:06:33.200

您不应该使用`Map`来配置一对一的关系。请改用 fluent API 的关系方法。

看看[http://msdn.microsoft.com/en-us/data/jj591620.aspx#RequiredToRequired](http://msdn.microsoft.com/en-us/data/jj591620.aspx#RequiredToRequired)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T11:23:04.960

如果你覆盖 OnModelCreating 你不应该有属性属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-15T17:42:24.193

好的，您也可以使用数据注释属性来做到这一点：

*   首先你不需要在两个实体中指定外键，你只需要在依赖实体中指定它。
*   同样在 Principal 类中，即使您想引用它，也不需要存储依赖实体的 id。
*   此外，由于它是 1-1 关系，因此您不需要此行： public virtual ICollection DetailsId { get; 放; }
    *   从您所说的来看，Game 是主要实体，Detail 是依赖实体。

代码可能如下所示：

```
public class Game
{
    [Key]
    public int GameId { get; set; }

    public string GameName { get; set; }

    //Navigation prop
    public virtual Details GameDetails { get; set; }
}

public class Details
{
   [Key]
   [ForeignKey("Game")]
   public int GameId { get; set; }

   public int RatingId { get; set; }

   public int Grade { get; set; }

   //Navigation prop
   public virtual Game Game{ get; set; }
   public virtual RatingCompany RatingCompany { get; set; }
} 
```

# android - 在 Android 应用程序中创建导览

> ID：16129901
> 
> 赞同：21
> 
> 时间：2013-04-21T09:50:59.320
> 
> 标签：android

我想在我的应用程序中创建交互式旅游，如下所示：

![在此处输入图像描述](https://i.stack.imgur.com/bgSiZ.png)

我怎样才能实现它？你知道图书馆可以使它更容易吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-21T10:35:35.297

[ShowcaseView](https://github.com/Espiandev/ShowcaseView)可能是您最好的选择。它旨在通过独特且吸引人的叠加层向用户突出和展示应用程序的特定部分。该库非常适合指出用户的兴趣点、手势或晦涩但有用的项目。

该库基于 ICS 和 Jelly Bean 的 Launcher 中的“Cling”视图，但已扩展为更易于使用。

GitHub 存储库[ShowcaseView](https://github.com/Espiandev/ShowcaseView)

![在此处输入图像描述](https://i.stack.imgur.com/1FUCi.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T10:05:33.433

你可以检查这个[链接](https://plus.google.com/+RomanNurik/posts/6cVymZvn3f4)。在这里，Roman Nurik 创建了一个向导，可以通过一些修改将其用作您的目的。您可以在[此处](https://code.google.com/p/romannurik-code/source/browse/misc/wizardpager#wizardpager/src/com/example/android/wizardpager/wizard)查看源代码。

但我认为创建自己的导游会更好。使用 Fragments 和 ViewPager 创建它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T10:29:32.477

你可以考虑在你的应用程序中使用这个库：[Showcase View](https://github.com/Espiandev/ShowcaseView)。它基于`View`Android 在您首次启动新设备/恢复出厂设置/闪存时在 ICS 和 JB 中显示的内容，例如 CM 10 / 10.1。首次启动时也是应用程序启动器*。*

*编辑：这就是它的样子*

![在此处输入图像描述](https://i.stack.imgur.com/nfa7d.png)

*正如Warpzit*在他的评论中指出的那样，*理论上*（到目前为止我还没有使用过，但我真的很想很快使用它），您可以使用带有`ViewPager`.

[Github 上有一个名为TweetLanes](https://github.com/chrislacy/TweetLanes)的开源项目，它使用类似的方法（减去上面提到的库）。您可以下载并查看源代码以了解该应用程序是如何实现的。如前所述，它是开源的。;-)

# r - 解释一个懒惰的评估怪癖

> ID：16129902
> 
> 赞同：61
> 
> 时间：2013-04-21T09:51:02.643
> 
> 标签：r, lazy-evaluation

我正在阅读 Hadley Wickhams 在 Github 上的书，尤其[是关于惰性评估的这一部分](http://adv-r.had.co.nz/Functions.html#lazy-evaluation)。`add/adders`在那里，他在函数部分给出了惰性求值后果的例子。让我引用这段话：

> 在使用 lapply 或循环创建闭包时，此 [惰性求值] 很重要：
> 
> ```
> add <- function(x) {
>   function(y) x + y
> }
> adders <- lapply(1:10, add)
> adders[[1]](10)
> adders[[10]](10) 
> ```
> 
> x 在您第一次调用其中一个加法器函数时被懒惰地评估。至此，循环完成，x 的最终值为 10。因此，所有加法器函数都将在其输入上加 10，这可能不是您想要的！手动强制评估解决了这个问题：
> 
> ```
> add <- function(x) {
>   force(x)
>   function(y) x + y
> }
> adders2 <- lapply(1:10, add)
> adders2[[1]](10)
> adders2[[10]](10) 
> ```

我似乎不明白那一点，那里的解释很少。有人可以详细说明那个特定的例子，并解释那里发生了什么吗？我对“此时，循环完成，x的最终值为10”这句话感到特别困惑。什么循环？什么最终值，在哪里？一定是我想念的简单的东西，但我只是看不到它。提前非常感谢。

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2015-04-22T03:01:50.197

从 R 3.2.0 开始，这不再适用！

[更改日志](http://cran.r-project.org/src/base/NEWS)中的相应行显示：

> 高阶函数（例如 apply 函数和 Reduce()）现在强制将参数传递给它们应用的函数，以消除惰性求值和闭包中变量捕获之间的不良交互。

事实上：

```
add <- function(x) {
  function(y) x + y
}
adders <- lapply(1:10, add)
adders[[1]](10)
# [1] 11
adders[[10]](10)
# [1] 20 
```

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2013-04-21T10:11:25.313

目标：

```
adders <- lapply(1:10, function(x)  add(x) ) 
```

是创建一个`add`函数列表，第一个添加 1 到其输入，第二个添加 2，等等。惰性求值导致 R 等待真正创建加法器函数，直到您真正开始调用函数。问题是，在创建第一个加法器函数后，循环`x`增加`lapply`，以 10 的值结束。当您调用第一个加法器函数时，惰性求值现在构建函数，得到 的值`x`。问题是原来`x`的不再等于一，而是`lapply`循环结束时的值，即10。

因此，惰性求值导致所有加法器函数等到`lapply`循环完成后才真正构建函数。然后他们用相同的值（即 10）构建他们的函数。Hadley 建议的解决方案是强制`x`直接评估，避免惰性评估，并获得具有正确`x`值的正确函数。

# java - 如何在 libgdx Stage 中对 Actor 进行排序？

> ID：16129903
> 
> 赞同：9
> 
> 时间：2013-04-21T09:51:16.020
> 
> 标签：java, libgdx

我在对 LibGdx Stage 对象中的 Actor 进行排序时遇到问题。当舞台被渲染时，图像会按照它们添加的顺序被渲染。Stage 使用一个数组来保存 Actor。我已经尝试设置每个 Actor 的 ZIndex，但它仍然没有排序。然后我尝试像这样创建一个比较器对象：

```
public class ActorComparator implements Comparator < Actor > {
    @Override
    public int compare(Actor arg0, Actor arg1) {
        if (arg0.getZIndex() < arg1.getZIndex()) {
            return -1;
        } else if (arg0.getZIndex() == arg1.getZIndex()) {
            return 0;
        } else {
            return 1;
        }
    }
} 
```

然后当我想做实际比较时，我做了：

```
Collections.sort(Stage.getActors(), new ActorComparator()); 
```

它给了我以下错误并且不会编译：

```
The method sort(List<T>, Comparator<? super T>) in the type Collections 
is not applicable for the arguments (Array<Actor>, ActorComparator) 
```

我不知道我做错了什么。谁可以给我解释一下这个？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-07-09T21:07:47.210

而不是接受的答案，我更喜欢准备几个“层”组，然后以我喜欢的任何顺序添加到这些组中。

```
Group bg = new Group();
Group fg = new Group();
// the order is important in the following two lines
stage.addActor(bg); 
stage.addActor(fg); 

bg.addActor(whatever);
fg.addActor(whatever);
bg.addActor(whatever);
fg.addActor(whatever); 
```

（当然，`addActor()`顺序在 的元素之间`bg`和 的元素之间仍然很重要`fg`，但在 的元素`fg`和 的元素之间不重要`bg`。）

此工作流在继承场景中运行良好，其中基类拥有受保护的组层 ( `this.bg`, `this.fg`, ...) 并将它们按顺序添加到阶段。然后派生类可以在不考虑顺序的情况下向这些层添加内容。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-04-21T09:57:31.567

看起来您的代码`Stage.getActors()`返回一个`Array`of`Actors`而不是一个`List`. `Collections.sort()`方法只接受列表。尝试：

```
Collections.sort(Arrays.asList(Stage.getActors().toArray()), new ActorComparator()); 
```

**来自@James Holloway 的排序更新（通过问题中的 z-index）：** z-index 被舞台覆盖，无论数组的内部顺序是什么。因此，设置 Z-Index 没有任何效果，除非您将其设置为高于列表的长度，然后它只是将图像放在列表的顶部（内部 Stage 会这样做）。这可以通过按名称或 ID 排序来解决。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-05-02T20:00:53.067

我让所有演员扩展了一个`DepthActor`包含深度值并实现的类`Comparable<DepthActor>`：

```
import com.badlogic.gdx.scenes.scene2d.Actor;

import java.util.Comparator;

/**
 * @author snd
 * @since May 02, 2017
 */
public class DepthActor extends Actor implements Comparable<DepthActor>
{
  public int depth;

  @Override
  public int compareTo(DepthActor o)
  {
    return depth < o.depth ? -1 : (depth > o.depth ? 1 : 0);
  }
} 
```

然后就地排序是微不足道的：

`com.badlogic.gdx.utils.Sort.instance().sort( stage.getActors() );`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-11T07:22:14.203

可能不适合所有情况，但我使用 LibGdx Actor.userObject 来存储我的 z-index，然后根据它进行自动排序。在您的 Screen 或 Game 类中：

```
class ActorZOrderComparator implements Comparator<Actor> {
    @Override
    public int compare(Actor o1, Actor o2) {
        if (o1 != null && o1.getUserObject() != null && o1.getUserObject() instanceof Integer
                && o2 != null && o2.getUserObject() != null && o2.getUserObject() instanceof Integer) {
            int z1 = (Integer) o1.getUserObject();
            int z2 = (Integer) o2.getUserObject();
            return z1 - z2;
        } else if (o1 != null && o2 != null) {
            return o1.getZIndex() - o2.getZIndex();
        } else if (o1 != null) {
            return -1;
        } else if (o2 != null) {
            return 1;
        } else {
            return 0;
        }
    }
}

protected ActorZOrderComparator zOrderComparator = new ActorZOrderComparator();
private boolean invalidZOrder;

protected void addActor(Actor actor) {
    stage.addActor(actor);
    if (actor.getUserObject() instanceof Integer) {
        invalidZOrder = true;
    }
}

@Override
public void render(float delta) {
    if (invalidZOrder) {
        Arrays.sort(stage.getRoot().getChildren().begin(), zOrderComparator);
        stage.getRoot().getChildren().end();
        invalidZOrder = false;
    }
} 
```

然后使用新的 addActor 方法（不是 stage.addActor）添加演员：

```
Image leftBar = new Image(skin, "leftBar");
    leftBar.setPosition(0, GameSettings.VIEWPORT_HEIGHT * 0.5f, Align.left);
    leftBar.setUserObject(1); // <-- this is the z-index, set it before calling addActor(..)
    addActor(leftBar); 
```

这也将避免在每次渲染调用时对数组进行排序。希望能帮助到你！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-01-03T14:34:31.757

我的解决方案在快速测试中适用于我，但可能仍然存在一些缺陷。如果人们发现任何东西，请大声喊叫，但这对我来说效果很好，而且很轻。

我只在我的卡片上运行它（我正在写一个纸牌游戏）所以它只调整舞台上的卡片类，它们可能总是高于其他东西，比如表格/标签等。

我在`int zIndex`我的类中添加了一个本地，它在 Comparator 中使用，并在 setZIndex 方法的开头设置。

该方法的开始部分是从 Actor 类中的原始部分提取的。

```
@Override
public void setZIndex(int index) {
    this.zIndex = index;
    if (index < 0) throw new IllegalArgumentException("ZIndex cannot be < 0.");
    Group parent = this.getParent();
    if (parent == null) return;
    Array<Actor> children = parent.getChildren();
    if (children.size == 1) return;
    ArrayList<Card> allCards = new ArrayList<Card>();
    for(Actor child : children) {
        if(child instanceof Card) {
            allCards.add((Card)child);
        }
    }
    Collections.sort(allCards, new ZIndexComparator());
    for (Card card : allCards) {
        children.removeValue(card, false);
        children.add(card);
    }
}

class ZIndexComparator implements Comparator<Card> {
    public int compare(Card card1, Card card2) {
        return card1.zIndex - card2.zIndex;
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-08-14T15:08:51.047

不确定这是否是最近添加的，但对我有用的只是调用`sort`演员数组：

```
gameStage.getActors().sort(new ActorRenderComparator()); 
```

然后`ActorRenderComparator`可能看起来像这样：

```
public class ActorRenderComparator implements Comparator<Actor> {
    @Override
    public int compare(Actor a, Actor b) {
        if (a.getY() == b.getY()) {
            return 0;
        }

        if (a.getY() > b.getY()) {
            return -1;
        }

        return 1;
    }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-04-15T19:22:56.867

最简单的解决方案！我很惭愧，我花了这么长时间才想出这个……

创建一个扩展 Stage 的“ZStage”类。覆盖 getActors 方法。根据演员的 Y 指数对演员进行冒泡排序，以获得他们的渲染顺序。

公共类 ZStage 扩展阶段 {

```
public ZStage(Viewport vp){
    super(vp);
}

@Override
/** Returns the root's child actors.
 * @see Group#getChildren() */
public Array<Actor> getActors () {
    SnapshotArray<Actor> children = getRoot().getChildren();

    boolean sorting = true;
    while(sorting){
        sorting=false;
        for(int x=0; x< children.size-1; x++){
            if(children.get(x).getY() < children.get(x+1).getY()){
                children.swap(x,x+1);
                sorting=true;
            }
        }
    }

    return children;
} 
```

}

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-12-31T06:45:13.040

我使用了一些浮点值来对我的玩家进行排序。数值越大，玩家的指数越高。这是我的片段：-

```
 Map<Actor, Float> map = new HashMap<Actor, Float>();
    map.put(playerActor, playerArea);
    for (int i = 0; i < totalEnemies; i++) {
        if (i != playerImageNo) {
            map.put(enemyActor[i], enemyArea[i]);
        }
    }
    int noOfPlayers = map.size();

    // Sort Map based on values(size)
    Set<Entry<Actor, Float>> set = map.entrySet();
    List<Entry<Actor, Float>> list = new ArrayList<Entry<Actor, Float>>(set);
    Collections.sort(list, new Comparator<Map.Entry<Actor, Float>>() {
        @Override
        public int compare(Map.Entry<Actor, Float> o1,
                Map.Entry<Actor, Float> o2) {
            return (o2.getValue()).compareTo(o1.getValue());
        }
    });

    for (Map.Entry<Actor, Float> entry : list) {
        entry.getKey().setZIndex(noOfPlayers);          
        System.out.println("Player: " + entry.getKey() + ", index: " + noOfPlayers);
        noOfPlayers--;
    } 
```

# python - Python + Kivy：时钟不适用于部分（关键字）

> ID：16129906
> 
> 赞同：0
> 
> 时间：2013-04-21T09:51:29.460
> 
> 标签：python, python-2.7, kivy, functools

```
def _procedural_reloading(self,gen=[],*args):
    if len(gen):
        gen.pop().reload()
        Clock.schedule_interval(functools.partial(
            self._procedural_reloading,gen=gen),.5) 
```

在上面的代码中，_procedural_reloading() 是一个类的方法，它获取一个包含一些图像的列表，并尝试一个一个地重新加载（）它们。你猜怎么着，它不起作用，因为它说 _procedural_reloading 为关键字 gen 获得了多个值！

奇怪的是，如果我将 gen 作为参数（而不是关键字参数）传递，它就可以正常工作，在这里：

```
def _procedural_reloading(self,gen=[],*args):
    if len(gen):
        gen.pop().reload()
        Clock.schedule_interval(functools.partial(
            self._procedural_reloading,gen),.5) 
```

为什么 gen=gen 不起作用？

更详细地说，到目前为止，我什至一次都无法使用 Clock 传递任何关键字参数！我总是必须按顺序一个一个地排列参数并传递它们......这是一个已知问题吗？还是我在那里做错了什么？我觉得我好笨！

编辑：

没有默认值的 gen在我的情况下也**不起作用：**

```
def _procedural_reloading(self,gen,*args):
    if len(gen):
        gen.pop().reload()
        Clock.schedule_interval(functools.partial(
            self._procedural_reloading,gen=gen),.5) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T11:19:13.243

当你创建

```
functools.partial(self._procedural_reloading,gen=gen) 
```

`partial`保存`gen=gen`到`kwargs`. `kwargs`可能看起来像`{'gen': gen}`，与位置参数无关，还没有给出。当这个`partial`函数被调用时，你可以通过你的函数定义看到：

```
def _procedural_reloading(self,gen=[],*args): 
```

`gen`是第一个位置参数，所以现在`partial`函数的调用者使用一定数量的参数调用它，其中第一个参数设置为`gen`！因为它是第一个位置参数，所以你设置了两次！（这是不允许的）。像这样定义位置参数（前面有默认参数）是奇怪和有问题的（可以看出），解决方案是：

```
def _procedural_reloading(self,*args, **kwargs): 
```

现在你的处理方式`args`不同`kwargs`，你可以`gen`像`kwargs.get(gen, default)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T11:29:32.730

我正在尝试使用@jamylak 方法，同时在这里我自己解决这个问题：

正如我所料，问题是由于 Kivy 的时钟，它似乎首先将它的参数传递给函数！知道了？不？

当 Clock 调用一个函数时，它会向它传递一个名为 dt 的参数。

因此，如果您有一个函数并想用 Clock 调用它，它应该至少有一个参数：

```
def clock_callback_function(dt):
    ... 
```

就我而言，我总是给我的函数 *args，所以 Kivy 可以用它们做任何想做的事！但似乎 Clock 总是覆盖回调函数的第一个参数。为了很好地包装它，我应该这样写我的代码：

```
def _procedural_reloading(self,dt=0,gen=[]):
        if len(gen):
            gen.pop().reload()
            Clock.schedule_interval(functools.partial(
                self._procedural_reloading,gen=gen),.5) 
```

上面的代码没有例外地工作，但我们已经知道下面的代码不起作用：

```
def _procedural_reloading(self,gen=[],dt=0):
        if len(gen):
            gen.pop().reload()
            Clock.schedule_interval(functools.partial(
                self._procedural_reloading,gen=gen),.5) 
```

# sql - SQL 错误：ORA-00942 表或视图不存在

> ID：16129912
> 
> 赞同：31
> 
> 时间：2013-04-21T09:52:26.153
> 
> 标签：sql, oracle, oracle11g

我使用 SQL 开发人员并与系统用户建立了一个连接，在我创建了一个用户并与该用户建立了另一个具有所有所需权限的连接之后。

但是当我尝试继续执行时，我得到了 SQL 错误

> ORA-00942 表或视图不存在。:

* * *

```
INSERT INTO customer (c_id,name,surname) VALUES ('1','Micheal','Jackson') 
```

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2016-03-22T21:19:34.943

因为这篇文章是在 stackoverflow 上搜索“ORA-00942: table or view does not exist insert”时发现的最上面的帖子，所以我想提一下这个错误的另一个可能原因（至少在 Oracle 12c 中）：a table uses a sequence设置默认值并且执行插入查询的用户对序列没有选择权限。这是我的问题，我花了不必要的时间才弄明白。

要重现该问题，请执行以下 SQL `user1`：

```
create sequence seq_customer_id;

create table customer (
c_id number(10) default seq_customer_id.nextval primary key,
name varchar(100) not null,
surname varchar(100) not null
);

grant select, insert, update, delete on customer to user2; 
```

然后，执行此插入语句`user2`：

```
insert into user1.customer (name,surname) values ('michael','jackson'); 
```

结果将是“ORA-00942：表或视图不存在”，即使`user2`确实对表具有插入和选择权限，`user1.customer`并且正确地为表添加了架构所有者名称的前缀。为避免此问题，您必须授予对序列的选择权限：

```
grant select on seq_customer_id to user2; 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-04-21T09:58:43.483

用户没有查看表所需的权限，表不存在，或者您在错误的模式中运行查询

表存在吗？

```
 select owner, 
           object_name 
    from dba_objects 
    where object_name = any ('CUSTOMER','customer'); 
```

你授予了什么特权？

```
 grant select, insert on customer to user; 
```

您是否从第一个查询中针对所有者运行查询？

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2019-06-06T15:40:30.353

区分大小写的表（使用双引号创建的表名）也可能引发同样的错误。[有关更多信息，请参阅此答案](https://stackoverflow.com/questions/13327223/ora-00904-when-inserting-querying-data-from-tables/13329029#13329029)。

只需将表格用双引号括起来：

```
INSERT INTO "customer" (c_id,name,surname) VALUES ('1','Micheal','Jackson') 
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2013-06-27T16:58:45.753

您不能直接访问名为“客户”的表。它应该是“user1.customer”，或者为指向“user1.customer”的 user2 创建同义词“customer”。希望这可以帮助..

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-07-05T04:52:44.567

这是一个答案：[http ://www.dba-oracle.com/concepts/synonyms.htm](http://www.dba-oracle.com/concepts/synonyms.htm)

Oracle 同义词基本上允许您创建指向存在于其他地方的对象的指针。您需要 Oracle 同义词，因为当您登录到 Oracle 时，它​​会在您的模式（帐户）中查找您正在查询的所有对象。如果它们不存在，它会给你一个错误，告诉你它们不存在。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-10-25T14:54:19.523

我正在使用 Oracle 数据库，我遇到了同样的问题。最终我发现 ORACLE DB 正在将所有元数据（表/sp/view/trigger）转换为大写。

我正在尝试如何在 sql 中编写表名（myTempTable），而它期望它如何将表名存储在数据库（MYTEMPTABLE）中。也同样适用于列名。

对于使用 sql 并且现在跳入 ORACLE DB 的开发人员来说，这是一个很常见的问题。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-12-10T10:04:03.913

就我而言，当我使用 asp.net core 应用程序时，我的 sql 查询出错了。如果您的数据库包含许多模式，则必须在 table_name 之前编写 schema_name，例如： Select * from SCHEMA_NAME.TABLE_NAME... 我希望它会有所帮助。

# php - 使数组与其他数组的长度相同？

> ID：16129913
> 
> 赞同：2
> 
> 时间：2013-04-21T09:52:35.807
> 
> 标签：php, arrays

我有 2 个数组：

```
$array1 = array(1 => '12', 2 => '4', 3 => '54');
$array2 = array(1 => '12', 2 => '4', 3 => '54', 4 => '124'); 
```

我将如何制作`$array2`与 相同数量的键`$array1`，并在最后删除任何键。

所以，我最终会得到：

```
$array2 = array(1 => '12', 2 => '4', 3 => '54'); 
```

注意第一个数组可能包含不同数量的键。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-21T09:55:15.460

使用[array_slice](http://php.net/array_slice)：

```
$array2 = array_slice($array2, 0, count($array1), true); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-21T10:01:28.627

您也可以使用 array_pop 它从数组中删除最后一个元素

[array_pop](http://php.net/manual/en/function.array-pop.php)

# php - 用php获取内部html

> ID：16129915
> 
> 赞同：0
> 
> 时间：2013-04-21T09:52:45.437
> 
> 标签：php, javascript, forms, dom, post

我开始学习 php，我遇到了这个问题。我的表单中有 html 代码：

```
<label for="u">Usability <span id='u_score'>0</span> / 7</label> 
```

我想用 id u_score 获取 span 的内部 html。我如何在 php 中执行此操作？任何帮助，将不胜感激。

我已经试过了

```
$u_score = $_POST["u_score"]; 
```

但这会返回 undefined，因为没有与 span 关联的值。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T10:25:22.243

您可以做的是将跨度文本内容复制到将发布的隐藏输入中：

```
<!DOCTYPE html>
<html>
<head>
<title></title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<script type="text/javascript">
    function copySpanContent() {
    document.getElementById("u_score_value").value =
    document.getElementById("u_score").firstChild.data;
    }
</script>
</head>
<body>
<form method="POST" action="PHPSCRIPT.php" onsubmit="copySpanContent()">
<label for="u">Usability <span id='u_score'>0</span> / 7</label>
<input type="hidden" name="u_score_value" id="u_score_value">
<button type="submit">submit</button>
</form>
</body>
</html> 
```

然后您可以使用 $_POST['u_score_value'] 从 PHP 中获取值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T09:59:31.230

您可以使用[Simple HTML DOM](http://simplehtmldom.sourceforge.net/)，它是 PHP 的 HTML 解析器。下载它然后使用这个片段：

```
include('simple_html_dom.php');
$html = file_get_html('yourHTMLfile.html');
$IDs = $html->find('span #u_score');
foreach($IDs as $id)
{
    echo $id.'<br />';
} 
```

希望这可以帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T09:55:30.587

php 实际上生成 html 并且在页面完成构建后不执行任何工作（除非通过 ajax 之类的方法调用）来影响页面。

Javascript 可以获取 DOM 元素值，但 PHP 不能。

您使用的方法将不起作用，因为该变量不是 $_POST 变量，而只是一个 HTML 元素。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-21T09:57:04.873

请了解客户端（Javascript）和服务器（PHP）之间的分界线。

您可以使用 PHP 来提供您需要的 HTML。

您还可以使用 Javascript 来查看 DOM`getElementById`来做生意。

# c++ - 堆栈上的构造函数/析构函数调用顺序

> ID：16129917
> 
> 赞同：5
> 
> 时间：2013-04-21T09:53:23.960
> 
> 标签：c++, constructor, destructor, assignment-operator

我有以下简单的代码：

```
class A
{
    int a;
public:
    A(int a) : a(a) { cout << "Constructor a=" << a << endl; }
    ~A()            { cout << "Destructor  a=" << a << endl; }
    void print()    { cout << "Print       a=" << a << endl; }
};

void f()
{
    A a(1);
    a.print();
    a = A(2);
    a.print();
}

int main()
{
    f();
    return 0;
} 
```

输出是：

```
Constructor a=1
Print       a=1
Constructor a=2
Destructor  a=2
Print       a=2
Destructor  a=2 
```

我发现有两个析构函数调用，`a=2`而没有一个，`a=1`而每种情况都有一个构造函数调用。那么在这种情况下如何调用构造函数和析构函数呢？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-21T09:55:26.987

```
a = A(2); 
```

将使用 default`operator=`为 分配新值`a`，将其`a::a`成员值设置为 2。

```
void f()
{
    A a(1);//a created with int constructor a.a == 1
    a.print();// print with a.a == 1
    a = A(2);//Another A created with int constructor setting a.a == 2 and immediately assigning that object to a
    //object created with A(2) deleted printing 2 it was created with
    a.print();//a.a==2 after assign
}//a deleted printing 2 it was assigned with 
```

您可能应该阅读有关[“三法则”的](https://stackoverflow.com/questions/4172722/what-is-the-rule-of-three)内容，以更好地了解正在发生的事情。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-21T09:56:23.100

```
void f()
{
    A a(1);
      //  Constructor a=1
    a.print();
      //  Print       a=1
    a = A(2);
      // Constructor a=2
      // also operator=
      // Destructor  a=2
    a.print();
      // Print       a=2
      // Destructor  a=2
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-21T10:02:55.757

这是因为您没有破坏`A(1)`您分配给它的内容，让我们通过添加[分配运算符](http://en.wikipedia.org/wiki/Assignment_operator_%28C++%29)`A(2)`来扩展您的示例：

```
class A
{
    int a;
public:
    A(int a) : a(a) { cout << "Constructor a=" << a << endl; }
    ~A()            { cout << "Destructor  a=" << a << endl; }
    void print()    { cout << "Print       a=" << a << endl; }
    A &operator=(const A &other) {
        cout << "Assign operator old=" << a << " a=" << other.a << endl; 
        a = other.a;
    }
}; 
```

这将导致：

```
[vyktor@grepfruit tmp]$ ./a.out 
Constructor a=1
Print       a=1
Constructor a=2
Assign operator old=1 a=2 <- This line explains why destructor is not called
Destructor  a=2
Print       a=2
Destructor  a=2 
```

如果您实施了其中之一：

*   **Destructor** - 破坏所有对象的成员
*   **复制构造函数**- 从复制构造函数参数中的等效成员构造对象的所有成员
*   **复制赋值运算符**- 从赋值运算符参数中的等效成员中分配对象的所有成员

你应该实现所有这些。这称为[三法则](http://en.wikipedia.org/wiki/Rule_of_three_%28C++_programming%29)。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-21T10:03:42.167

```
void f()
{
    A a(1); // Constructor a=1 (a.a(1) is called)
    a.print(); // Print a=1
    a = A(2); // Constructor a=2 (Temporary unnamed object A(2) is constructed)
              // compiler generated a.operator=(const A&); is called and then
              // Destructor  a=2 (Temporary unnamed object is destroyed.
    a.print(); // Print a=2
              // Destructor  a=2 (a.~a() is called)
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-21T10:01:54.840

首先调用 a=1 的构造函数

其次打印被称为

第三，您创建的新对象 A(2) 调用了它的构造函数。

第四把这个对象赋值给对象a所以对象a的数据成员=2

第五，对象 A(2) 的析构函数被调用

第六，对象 a 的析构函数被调用

# ruby - 你如何让Ruby中的线程将字符串发送回父线程

> ID：16129921
> 
> 赞同：2
> 
> 时间：2013-04-21T05:58:37.793
> 
> 标签：ruby, multithreading

我希望能够调用一个在单独的线程上重复 x 次的方法，该线程每隔几分钟就会向控制台发送诸如“仍在运行”之类的消息，而我可以自由地调用其他执行相同操作的方法。

这在我的测试环境中有效，并且所有内容都通过 rspec 检查 - 但是当我将代码移动到 gem 并从另一个脚本调用它时，代码似乎在其他线程中工作，但字符串永远不会发送到我的控制台（或我能告诉的任何地方）。

我将把代码的重要部分放在下面，但为了更好地理解，重要的是要知道：

1.  该代码将按设定的时间间隔检查股票市场价格，以便在所述股票的价值达到特定价格时通知用户。
2.  代码应向控制台打印一条消息，说明当价格未达到时代码仍在运行。
3.  代码应该告诉用户股票已经达到目标价格，然后停止循环。

这是代码：

```
require "trade_watcher/version"
require "market_beat"

module TradeWatcher

  def self.check_stock_every_x_seconds_for_value(symbol, seconds, value)
    t1 = Thread.new{(self.checker(symbol, seconds, value))} 
  end

  private
      def self.checker(symbol, seconds, value)
        stop_time = get_stop_time
        pp stop_time
        until is_stock_at_or_above_value(symbol, value) || Time.now >= stop_time
          pp "#{Time.now} #{symbol} has not yet met your target of #{value}."
          sleep(seconds)
        end
        if Time.now >= stop_time
          out_of_time(symbol, value)
        else
          reached_target(symbol, value)
        end
      end

      def self.get_stop_time
        Time.now + 3600 # an hour from Time.now
      end

      def self.reached_target(symbol, value)
        pp "#{Time.now} #{symbol} has met or exceeded your target of #{value}."
      end

      def self.out_of_time(symbol, value)
        pp "#{Time.now} The monitoring of #{symbol} with a target of #{value} has expired due to the time limit of 1 hour being rached."
      end

      def self.last_trade(symbol)
        MarketBeat.last_trade_real_time symbol
      end

      def self.is_stock_at_or_above_value(symbol, value)
        last_trade(symbol).to_f >= value
      end
end 
```

以下是测试（全部通过）：

```
require 'spec_helper'

describe  "TradeWatcher" do
  context "when comparing quotes to targets values" do
    it "can report true if a quote is above a target value" do
      TradeWatcher.stub!(:last_trade).and_return(901)
      TradeWatcher.is_stock_at_or_above_value(:AAPL, 900).should == true
    end

    it "can report false if a quote is below a target value" do
      TradeWatcher.stub!(:last_trade).and_return(901)
      TradeWatcher.is_stock_at_or_above_value(:AAPL, 1000).should == false
    end
  end

  it "checks stock value multiple times while stock is not at or above the target value" do
    TradeWatcher.stub!(:last_trade).and_return(200)
    TradeWatcher.should_receive(:is_stock_at_or_above_value).at_least(2).times
    TradeWatcher.check_stock_every_x_seconds_for_value(:AAPL, 1, 400.01)
    sleep(2)
  end

  it "triggers target_value_reahed when the stock has met or surpassed the target value" do
    TradeWatcher.stub!(:last_trade).and_return(200)
    TradeWatcher.should_receive(:reached_target).exactly(1).times
    TradeWatcher.check_stock_every_x_seconds_for_value(:AAPL, 1, 100.01)
    sleep(2)
  end

  it "returns a 'time limit reached' message once a stock has been monitored for the maximum of 1 hour" do
    TradeWatcher.stub!(:last_trade).and_return(200)
    TradeWatcher.stub!(:get_stop_time).and_return(Time.now - 3700)
    TradeWatcher.check_stock_every_x_seconds_for_value(:AAPL, 1, 100.01)
    TradeWatcher.should_receive(:out_of_time).exactly(1).times
    sleep(2)
  end

end 
```

这是一个非常简单的脚本（在我的理解中）应该打印“{Time.now} AAPL 尚未达到您的 800.54 目标。” 每隔 1 秒，该方法仍在运行，并且至少应该可见 20 秒（我在 rspec 中使用 sleep 对此进行了测试，并且能够看到打印到控制台的字符串）：

```
require 'trade_watcher'
TradeWatcher.check_stock_every_x_seconds_for_value(:AAPL, 1, 800.54)
sleep (20) 
```

但是我没有得到任何输出 - 尽管程序确实等待 20 秒才能完成。如果我添加其他行以打印到控制台，它们工作得很好，但我的 TradeWatcher 方法调用触发的线程中没有任何实际工作。

简而言之，我不明白如何让线程相互适当地进行通信 - 或者如何将它们相互同步（我认为 thread.join 在这里不合适，因为它会使主线程挂起并且无法如果我以后选择一次发送一个方法调用，请接受另一个方法调用）。 **我对 Ruby 多线程的理解很薄弱，任何人都能够理解我在这里想要达到的目的并推动我朝着正确的方向前进？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-22T18:05:18.887

当你去打印时，看起来 pp 函数根本还没有被 ruby​​ 加载。通过添加：

```
require 'pp' 
```

到 trade_watcher.rb 的顶部，我能够得到你期望的输出。您可能还需要考虑添加：

```
$stdout.sync = $stderr.sync = true 
```

到你的二进制/可执行脚本，这样你的输出就不会被 IO 类在内部缓冲，而是直接传递给 os.

# php - 允许 html 标签进入 djimageslider 幻灯片标题 joomla 2.5

> ID：16129922
> 
> 赞同：0
> 
> 时间：2013-04-21T09:54:27.613
> 
> 标签：php, javascript, ajax, joomla2.5

我要做的是在 joomla 2.5 中为我的 Djimageslider 的幻灯片标题添加一些 HTML 标签。我需要这样的东西

```
something <b>more</b> 
```

但是当我点击保存或应用时，它会删除所有 HTML 标签。

我检查了管理员/com_content，我认为它应该负责插入数据库数据，但我在那里找不到答案。

谁能帮我解决这个头痛？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T14:16:20.070

默认情况下，表单输入是“清理”的，您想告诉 Joomla 不要触摸其内容。

在 url 中找到您正在使用的组件（option=com_djsomething？）我怀疑它是 com_content。

拥有组件后，您必须找到定义表单的位置。

url 中的任务可能会有所帮助，如果它在那里，视图也会有所帮助。可以通过以下两种方式之一声明表单：

*   通过提供一个 xml 清单，该清单将位于组件的文件夹 /models/forms
*   通过将其插入代码中，该代码可能位于组件的文件夹 /views/view_name 中（默认视图名称将是组件的名称，但这可以在控制器中被覆盖，因此请四处查看）。

在这两种情况下，您都应该能够找到与您的输入相对应的行，并将**format="raw"**指定为过滤器。

检查[http://docs.joomla.org/Text_form_field_type](http://docs.joomla.org/Text_form_field_type) 以获取 xml 清单的语法帮助，或在文档中搜索代码中的正确 JElement

格式参数是可选的，如果不存在就添加它。除了“原始”还有其他可用的过滤选项，请确保在保存到数据库之前过滤掉不需要的输入并清理输入（使用 $db->quote() 在查询中插入字段值）

# php - Zend Framework 清除缓存

> ID：16129925
> 
> 赞同：5
> 
> 时间：2013-04-21T09:54:41.810
> 
> 标签：php, zend-framework, caching

我正在使用此代码在 zend 框架中缓存一个数组：

```
$frontendOptions = array(
    'lifetime' => 24 * 3600 * 7, // cache lifetime of 7 day
    'automatic_serialization' => true
);

$backendOptions = array(
    // Directory where to put the cache files
    'cache_dir' => APPLICATION_PATH .'/../tmp'
);

// getting a Zend_Cache_Core object
$cache = Zend_Cache::factory('Core',
    'File',
    $frontendOptions,
    $backendOptions);

$CacheName = ('VOUCHER_MANAGEMENT');

$CacheResult = $cache->load($CacheName);

if($CacheResult === false)
    //make cache
else 
    //use cache 
```

现在如何手动清除缓存？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-21T10:16:40.863

根据[文档](http://framework.zend.com/manual/1.12/en/zend.cache.theory.html#zend.cache.clean)，该方法的单个调用`remove()`就足够了，即删除特定的缓存项：

```
$cache->remove($CacheName); 
```

如果要清理过时的缓存项，则调用该`clean()`方法：

```
$cache->clean(Zend_Cache::CLEANING_MODE_OLD); 
```

要删除缓存中的所有项目：

```
$cache->clean(Zend_Cache::CLEANING_MODE_ALL); 
```

# jquery - jQuery 仅在页面上显示/隐藏一项

> ID：16129926
> 
> 赞同：2
> 
> 时间：2013-04-21T09:54:49.217
> 
> 标签：jquery, hide, show

我的问题是我有一些表数据通过 PHP while 循环从 MySQL 数据库加载到页面中，它列出了团队结果。在该循环中，默认情况下会隐藏一个表格行，其中包含一类“得分手”，然后有一个显示/隐藏按钮来显示天气以显示或隐藏该行。

但是那个“scorers”类在页面上多次出现，因为有多个结果，所以如果你点击显示/隐藏按钮，它会打开所有带有“scorers”类的单元格。

示例代码在这里：[http ://codepen.io/anthwinter/pen/vLJiy](http://codepen.io/anthwinter/pen/vLJiy)

我需要能够仅显示/隐藏该结果的当前得分手。我这样做的最佳方式是什么？

提前致谢

**HTML：**

```
<table>
    <tr>
        <td><h1>One</h1></td>
    </tr>
    <tr>
        <td><a href="#" class="showHide">show/hide</a></td>
    </tr>
    <tr>
        <td class="scorers">Show or hide this content one</td>
    </tr>
    <tr>
        <td><h1>Two</h1></td>
    </tr>
    <tr>
        <td><a href="#" class="showHide">show/hide</a></td>
    </tr>
    <tr>
        <td class="scorers">Show or hide this content two</td>
    </tr>
</table> 
```

**问：**

```
$(document).ready(function() {
    $(".scorers").hide();

    $(".showHide").click(function(event) {
        event.preventDefault();
        $(".scorers").toggle("fast");
    });
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T09:57:39.637

通过这样做`$('.scorers').toggle("fast");`将针对所有TD 元素，您需要通过使用`.scorers`指向被*点击*`this`的元素，而不是进行一些 DOM 遍历：

```
$(document).ready(function() {
    $(".scorers").hide();

    $(".showHide").click(function(event) {
        event.preventDefault();
        $(this).closest('tr').next().find('.scorers').toggle("fast");
    });
}); 
```

[http://api.jquery.com/closest/](http://api.jquery.com/closest/)
[http://api.jquery.com/next/](http://api.jquery.com/next/)
[http://api.jquery.com/find/](http://api.jquery.com/find/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T10:04:31.633

利用

```
$(this).closest('TR').next().find('.scorers').toggle("fast"); 
```

# python - 在 Django 1.5 中引用方法中的模型方法

> ID：16129927
> 
> 赞同：1
> 
> 时间：2013-04-21T09:55:08.740
> 
> 标签：python, django, templates, methods, model

我有一个模型

```
class ModelName(models.Model):
    field = models.CharField(max_length=200)

    def field1(self):
        return self.field[10:11]

    def field2(self):
        return self.field1 
```

在我的模板中，我在打印时得到了所需的结果`{{ object.field1 }}`，但似乎我无法在模型方法中引用另一个模型方法。打印`{{ object.field2 }}`时失败并显示消息`bound method`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T10:07:46.670

只有当你的方法是 getter 时，最好用`@property`. 然后，您在访问它们时就不需要括号了。罗汉是对的，你缺少括号。

```
class ModelName(models.Model):
    field = models.CharField(max_length=200)

    @property
    def field1(self):
        return self.field[10:11]

    @property
    def field2(self):
        return self.field1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T10:03:24.777

在您的`field2()`方法中，您正在返回对`field1`方法的引用，因此模板的行为方式就是这样。

你可能想打电话然后返回`field1`？`field2`喜欢：

```
def field2(self):
    return self.field1() 
```

# c# - 查看 Windows 8 Metro 应用程序的隔离存储文件

> ID：16129928
> 
> 赞同：5
> 
> 时间：2013-04-21T09:55:09.030
> 
> 标签：c#, microsoft-metro, isolatedstorage

我正在保存一些数据并将一些 xml 文件写入 Windows 8 Metro 应用程序的隔离存储。由于我在 Windows Phone 中制作了一些应用程序，我们可以通过 isotool 和 Windows Phone 电动工具看到这些隔离的存储文件。无论如何我可以在 Windows 8 Metro 应用程序中查看和浏览我的应用程序保存的文件吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-21T13:35:30.937

Windows 8 不使用像 sliverlight/Windows Phone 这样的独立存储 - 相反，写入的文件只是写入分配给应用程序的特殊文件夹（每个用户）。

以机智：

```
C:\Users\[name]\AppData\Local\Packages 
```

查找您的包名称（在清单中），您会在那里找到它 - 该文件夹将是文件所在文件夹的名称。例如

```
C:\Users\[name]\AppData\Local\Packages\91e643e0-f4a2-4e96-99cd-b1f1b13897aa_te6ss58atez9j 
```

# php - 防止 wordpress 计算总帖子数

> ID：16129929
> 
> 赞同：0
> 
> 时间：2013-04-21T09:55:09.117
> 
> 标签：php, wordpress

嗨，我想只在我的首页显示 20 个帖子，所以我创建了一个函数来更改查询，如下所示：

```
if( is_front_page() && $query->is_main_query() ) {
        $query->set('post_type', array('communique-presse', 'info-algerie'));
        $query->set('posts_per_page', '20');
    } 
```

它正在工作，但我想要的是防止 wordpress 在生成分页时计算页数。

我尝试了 $query->set('paged',1), $query->set('paged',-1) 等...但 wordpress 仍在计算页数。

我想阻止 wordpress 计算帖子总数来优化我的网站，因为我有 50 000 多个帖子，我认为通过禁用总帖子计数将优化查询，所以 wordpress 只查询前 20 个帖子而不遍历我的所有帖子50 000 个帖子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T10:02:08.793

您不需要代码来说明您想要在首页上发布多少帖子，这是管理仪表板中的设置，此处：/wp-admin/options-reading.php

并且 WordPress 可能不会遍历所有帖子来计算它们，只会调用`count()`数据库上的函数，所以这里应该没有什么可以优化的。

# javascript - XML 阅读器不工作

> ID：16129935
> 
> 赞同：2
> 
> 时间：2013-04-21T09:55:35.503
> 
> 标签：javascript, extjs, extjs4

我有一个代码，它给了我错误：无法调用未定义的方法'getProxy'

```
var mystore = new Ext.data.Store({
    url: 'http://weather.yahooapis.com/forecastrss?w=2121267&u=c.xml',
    // specify a XmlReader  
    reader: new Ext.data.XmlReader({ 
    record: 'channel', 
    fields:[
            { name: 'title', type: 'string', mapping:'title'}
        ] 
    })
});
mystore.load(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T10:04:13.223

你还没有设置代理，我应该是这样的：

```
var mystore = new Ext.data.Store({
    fields: [{
        name: 'title',
        type: 'string',
        mapping: 'title'
    }],
    proxy: {
        type: 'ajax',
        url: 'http://weather.yahooapis.com/forecastrss?w=2121267&u=c.xml',
        reader: {
            type: 'xml',
            record: 'channel'
        }
    }
});

mystore.load(); 
```

但我想你会有一个跨域问题，所以使用 JSON-P api，并在你的商店中设置一个 JSON-P 代理。

# c# - C#二进制写入返回更大的文件

> ID：16129936
> 
> 赞同：0
> 
> 时间：2013-04-21T09:55:39.563
> 
> 标签：c#, winforms, listview, binarywriter

我在二进制写入器问题上遇到了一点麻烦，我的程序设置为加载 SHIFT-JIS 字符，并以相同的编码写入，但它返回一个更大的文件：s 虽然我删除了几个字符，但[这里是一个示例写入前后的文件](http://www.mediafire.com/?9tuaoafr79smj5l)，这些是打开和保存代码：

```
private void Openbtn_Click(object sender, EventArgs e)
    {
        listView1.Items.Clear();
        textBox1.Text = "";
        menuItem12.Text = "file type is: ";
        OpenFileDialog ofd = new OpenFileDialog();
        ofd.Title = "Open File";
        ofd.Filter = "All Files (*.*)|*.*";
        if (ofd.ShowDialog() == System.Windows.Forms.DialogResult.OK)
        {
            menuItem13.Enabled = true;
            menuItem14.Enabled = true;
            menuItem15.Enabled = true;
            path = ofd.FileName;
            BinaryReader br = new BinaryReader(File.OpenRead(path), Encoding.GetEncoding("SHIFT-JIS"));
            foreach (char mychar in br.ReadChars(4)) menuItem12.Text += mychar;
            if (menuItem12.Text != "file type is: TXTD")
            {
                MessageBox.Show("This is not a TXTD file...", "Sorry", MessageBoxButtons.OK, MessageBoxIcon.Error);
                return;
            }
            else
            {
                    MessageBox.Show("File opened Succesfully!", "Info", MessageBoxButtons.OK, MessageBoxIcon.Information);
                    br.BaseStream.Position = 0x8;
                    int Pntrnum = br.ReadInt16();
                    menuItem11.Visible = true;
                    menuItem11.Text = Pntrnum.ToString();
                    List<int> offsets = new List<int>();
                    br.BaseStream.Position = 0x10;
                    for (int i = 0; i < Pntrnum; i++)
                    {
                        offsets.Add(br.ReadInt32());
                    }
                    Dictionary<int, string> values = new Dictionary<int, string>();
                    for (int i = 0; i < offsets.Count; i++)
                    {
                        int currentOffset = offsets[i];

                        int nextOffset = (i + 1) < offsets.Count ? offsets[i + 1] : (int)br.BaseStream.Length;

                        int stringLength = (nextOffset - currentOffset - 1);

                        br.BaseStream.Position = currentOffset;

                        var chars = br.ReadChars(stringLength);
                        values.Add(currentOffset, new String(chars));
                    }

                    foreach (int offset in offsets)
                    {
                        listView1.Items.Add(offset.ToString("X")).SubItems.Add(values[offset]);
                    }

                    br.Close();
                    br = null;
            }
        }
        ofd.Dispose();
        ofd = null;
    }
private void Savebtn_Click(object sender, EventArgs e)
    {
        BinaryWriter bw = new BinaryWriter(File.OpenWrite(path));

        int number_pointers = Convert.ToInt32(menuItem11.Text);

        Encoding enc = Encoding.GetEncoding("SHIFT-JIS");

        bw.BaseStream.Position = 0x10;
        int curr_pointer = 16 + number_pointers * 4;

        //pointers writing
        for (int i = 0; i < number_pointers; i++)
        {
            bw.Write(curr_pointer);
            curr_pointer += enc.GetByteCount(listView1.Items[i].SubItems[1].Text) + '\0';
        }

        for (int i = 0; i < number_pointers; i++)
        {
            bw.Write(enc.GetBytes(listView1.Items[i].SubItems[1].Text + '\0'));
        }

        bw.Flush();
        bw.Close();
        bw = null;
    } 
```

我真的很感谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T11:38:05.143

查看您提供的 Samples.zip 中的“After”文件似乎表明您正在输出相同的字符串两次，或者什么......

我建议您从较小的文件开始进行测试，并使用调试器介入。

实际上，在我自己尝试过之后，我想我发现了发生了什么：您使用“nextOffset - currentOffset”作为字符串长度，但它实际上是一个字节长度...... char 数组将结束（有一个 '\0 ' 里面）只有这个数字的一​​半，输出时你还会得到下半部分，你还没有读过。

[编辑] 从我的评论中发布代码，以获得更好的格式：

```
int index;
for (index = 0; index < stringLength; ++index) if (chars[index] == '\0') break;
if (index < stringLength) {
    char[] relevantPart = new char[index];
    Array.Copy(chars, relevantPart, index);
    chars = relevantPart;
} 
```

# email - 如何在邮件合并中包含 Excel 图表

> ID：16129943
> 
> 赞同：0
> 
> 时间：2013-04-21T09:56:43.513
> 
> 标签：email, charts, merge

只是我想**将 excel 中的图表包含**到**邮件合并**（ms word）。我可以包含 excel 中的任何字段，但我无法将图表添加到邮件合并中。如何做到这一点是任何其他可能的方式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T10:10:56.700

在 Word 合并文档中嵌入或链接 Excel 图表，就像在普通 Word 文件中一样，例如复制 Excel 图表，并将其作为对象、图像或链接粘贴到 Word 中。根据需要放置您的邮件合并字段并完成合并。

# ruby-on-rails - 添加前缀匹配到 pg_search

> ID：16129946
> 
> 赞同：3
> 
> 时间：2013-04-21T09:57:00.280
> 
> 标签：ruby-on-rails, postgresql, railscasts, pg-search

我正在关注[这个](http://railscasts.com/episodes/343-full-text-search-in-postgresql)Railscasts 插曲。

如果我搜索“Kerber”，它确实会返回正确的文章。但如果我搜索“Ke”，它不会返回同一篇文章。

有办法解决这个问题吗？

```
class Item < ActiveRecord::Base
  include PgSearch
  pg_search_scope :search, against: [:description, :about, :link, :twitterhandle, :builtby],
  using: {tsearch: {dictionary: "english"}}

  def self.text_search(query)
    if query.present?
      search(query)
    else
      scoped
    end
  end 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-23T02:45:38.893

我是 pg_search 的作者和维护者。

您可以添加`prefix: true`到`:tsearch`搜索功能的配置中，以使 pg_search 自动添加`:*`到查询的末尾。

[https://github.com/Casecommons/pg_search#prefix-postgresql-84-and-newer-only](https://github.com/Casecommons/pg_search#prefix-postgresql-84-and-newer-only)

```
class Item < ActiveRecord::Base
  include PgSearch
  pg_search_scope :search, against: [:description, :about, :link, :twitterhandle, :builtby],
  using: {tsearch: {prefix: true, dictionary: "english"}}

  def self.text_search(query)
    if query.present?
      search(query)
    else
      scoped
    end
  end
end 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-21T11:43:00.923

这个结果对我来说很有意义。`Ke`并且`Kerber`是不同的词，因此它们在全文搜索中不匹配。

全文搜索只进行*词干提取*- 删除复数等 - 以便`cats`匹配`cat`. 即使这也不是很聪明 -`dice`不处理非典型复数。它也仅适用于目标语言词典中识别的单词，因此即使`Kerber`是它的复数`Ke`也不会在语言设置为`english`.

请参阅 tsquery 和 tsvectors：

```
regress=> SELECT to_tsvector('Kerber'), to_tsquery('Kerber'), to_tsvector('ke'), to_tsquery('ke');
 to_tsvector | to_tsquery | to_tsvector | to_tsquery 
-------------+------------+-------------+------------
 'kerber':1  | 'kerber'   | 'ke':1      | 'ke'
(1 row) 
```

和比赛：

```
regress=> SELECT to_tsvector('Kerber') @@ to_tsquery('Kerber'), to_tsvector('kerber') @@ to_tsquery('ke');
 ?column? | ?column? 
----------+----------
 t        | f                                                                                                                                                                  
(1 row) 
```

我怀疑你想要一个[tsearch 前缀匹配](http://www.postgresql.org/docs/current/static/textsearch-controls.html#TEXTSEARCH-PARSING-QUERIES)。这用`:*`通配符表示：

```
regress=> SELECT to_tsvector('kerber') @@ to_tsquery('ke:*');
 ?column? 
----------
 t
(1 row) 
```

这*仅*适用于前缀匹配。它可能会对搜索效率产生影响，但我认为这不是主要影响。

# php - Paypal IPN 变量未添加和更新

> ID：16129948
> 
> 赞同：0
> 
> 时间：2013-04-21T09:57:11.857
> 
> 标签：php, mysql

我有一个 Paypal IPN 脚本，它获取成功传输的交易数据并将其存储在 mysql 表中。但我想在我的网站上用会员的当前余额添加这笔交易的贝宝金额。

```
<?php
session_start();
if (!isset($_SESSION['Email'])) {
header('Location: mainerror.php');
}
$Email=$_SESSION['Email'];
  $connn = mysql_connect("localhost","******","*******");
if (!$connn)
  {
  die('Could not connect: ' . mysql_error());
  }

mysql_select_db("********", $connn);
        $result1 = mysql_query("SELECT * from members WHERE Email='$Email' ");
//Use the mysql_fetch_array function on the resource returned by the mysql_query
$row1 = mysql_fetch_assoc($result1);
$old = $row1['balance'];
// STEP 1: Read POST data

// reading posted data from directly from $_POST causes serialization 
// issues with array data in POST
// reading raw POST data from input stream instead. 
$raw_post_data = file_get_contents('php://input');
$raw_post_array = explode('&', $raw_post_data);
$myPost = array();
foreach ($raw_post_array as $keyval) {
  $keyval = explode ('=', $keyval);
  if (count($keyval) == 2)
     $myPost[$keyval[0]] = urldecode($keyval[1]);
}
// read the post from PayPal system and add 'cmd'
$req = 'cmd=_notify-validate';
if(function_exists('get_magic_quotes_gpc')) {
   $get_magic_quotes_exists = true;
} 
foreach ($myPost as $key => $value) {        
   if($get_magic_quotes_exists == true && get_magic_quotes_gpc() == 1) { 
        $value = urlencode(stripslashes($value)); 
   } else {
        $value = urlencode($value);
   }
   $req .= "&$key=$value";
}

// STEP 2: Post IPN data back to paypal to validate

$ch = curl_init('https://www.sandbox.paypal.com/cgi-bin/webscr');
curl_setopt($ch, CURLOPT_HTTP_VERSION, CURL_HTTP_VERSION_1_1);
curl_setopt($ch, CURLOPT_POST, 1);
curl_setopt($ch, CURLOPT_RETURNTRANSFER,1);
curl_setopt($ch, CURLOPT_POSTFIELDS, $req);
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, 1);
curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 2);
curl_setopt($ch, CURLOPT_FORBID_REUSE, 1);
curl_setopt($ch, CURLOPT_HTTPHEADER, array('Connection: Close'));

// In wamp like environments that do not come bundled with root authority certificates,
// please download 'cacert.pem' from "http://curl.haxx.se/docs/caextract.html" and set the directory path 
// of the certificate as shown below.
// curl_setopt($ch, CURLOPT_CAINFO, dirname(__FILE__) . '/cacert.pem');
if( !($res = curl_exec($ch)) ) {
    // error_log("Got " . curl_error($ch) . " when processing IPN data");
    curl_close($ch);
    exit;
}
curl_close($ch);

// STEP 3: Inspect IPN validation result and act accordingly

if (strcmp ($res, "VERIFIED") == 0) {
    // check whether the payment_status is Completed
    // check that txn_id has not been previously processed
    // check that receiver_email is your Primary PayPal email
    // check that payment_amount/payment_currency are correct
    // process payment

    // assign posted variables to local variables
     $payment_currency = $_POST['mc_currency'];
    $txn_id = $_POST['txn_id'];
$address_zip = $_POST['address_zip'];
$address_country = $_POST['address_country_code'];
$payment_date = $_POST['payment_date'];
    $payer_email = $_POST['payer_email'];
    $first_name = $_POST['first_name'];
    $last_name = $_POST['last_name'];
    $item_name = $_POST['item_name'];
    $item_number = $_POST['item_number'];
    $payment_status = $_POST['payment_status'];
    $payment_amount = $_POST['mc_gross'];

$con=mysqli_connect("localhost","******","******","*******");

// Check connection
if (mysqli_connect_errno())
  {
  echo "Failed to connect to MySQL: " . mysqli_connect_error();
  }

mysqli_query($con,"INSERT INTO sales (item_name, item_number, payment_status, mc_gross, mc_currency, txn_id, payer_email, first_name, last_name, payment_date, address_zip, address_country)
VALUES ('$item_name', '$item_number', '$payment_status', '$payment_amount', '$payment_currency', '$txn_id', '$payer_email', '$first_name', '$last_name', '$payment_date', '$address_zip', '$address_country')");

$new = ($old + $payment_amount);
mysqli_query($con,"UPDATE members SET balance='$new'
WHERE Email='$payer_email'");
mysqli_close($con);

} else if (strcmp ($res, "INVALID") == 0) {
    // log for manual investigation
}
?> 
```

我想从交易中添加 $old 金额，即当前会员金额和 $payment_amount。但我终于在成员表中只更新了 $payment_amount。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T10:20:25.317

由于似乎`$old`没有在任何地方定义变量，因此我将采用不同的方法。在您的插入查询之后，我将从`members`表中获取旧金额，然后使用新的金额数据对其进行更新，例如

```
$query = mysqli_query($con,"SELECT balance FROM members WHERE Email='$payer_email'");
if($row = mysqli_fetch_array($query))
{
    $sql = mysqli_query($con, "UPDATE members SET balance = '".$row['balance'] + $payment_amount."' WHERE Email = '$payer_email'");
} 
```

所以代码看起来像这样

```
mysqli_query($con,"INSERT INTO sales (item_name, item_number, payment_status, mc_gross, mc_currency, txn_id, payer_email, first_name, last_name, payment_date, address_zip, address_country) VALUES ('$item_name', '$item_number', '$payment_status', '$payment_amount', '$payment_currency', '$txn_id', '$payer_email', '$first_name', '$last_name', '$payment_date', '$address_zip', '$address_country')");

$query = mysqli_query($con,"SELECT balance FROM members WHERE Email='$payer_email'");
if($row = mysqli_fetch_array($query))
{
    $sql = mysqli_query($con, "UPDATE members SET balance = '".$row['balance'] + $payment_amount."' WHERE Email = '$payer_email'");
}

mysqli_close($con);

} else if (strcmp ($res, "INVALID") == 0) {
    // log for manual investigation
} 
```

# php - PHP获取文本文件的最后xx字节？

> ID：16129950
> 
> 赞同：1
> 
> 时间：2013-04-21T09:57:20.603
> 
> 标签：php, file, search

我有一些非常大的文本文件 - 每个 100MB 包含一个单行字符串（只有 1 行）。我想从它们中提取最后 xx 个字节/字符。我知道如何通过在字符串中读取它们然后通过 strpos() 或 substr() 搜索来做到这一点，但这需要大量 RAM，这对于这么小的操作来说是不可取的。

有没有其他方法可以在执行搜索之前提取 PHP 中文本文件的最后 50 个字节/字符？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-21T10:01:22.997

您可以使用[fseek](http://php.net/manual/en/function.fseek.php)：

```
$fp = fopen('somefile.txt', 'r');
fseek($fp, -50, SEEK_END); // It needs to be negative
$data = fgets($fp, 50); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-01-01T12:09:02.087

您可以[`file_get_contents`](https://www.php.net/manual/en/function.file-get-contents.php)通过使用第四个参数来做到这一点`offset`。

**PHP 7.1.0 及以后版本：**

在 PHP 7.1.0 中，第四个参数`offset`可以是负数。

```
// only negative seek if it "lands" inside the file or false will be returned
if (filesize($filename) > 50) {
    $data = file_get_contents($filename, false, null, -50);
}
else {
    $data = file_get_contents($filename);
} 
```

**PHP 7.1.0 之前：**

```
$fsz = filesize($filename);
// only negative seek if it "lands" inside the file or false will be returned
if ($fsz > 50) {
    $data = file_get_contents($filename, false, null, $fsz - 50);
}
else {
    $data = file_get_contents($filename);
} 
```

# c# - c# 使用 linq 从列表中查找项目到数组

> ID：16129951
> 
> 赞同：0
> 
> 时间：2013-04-21T09:57:23.353
> 
> 标签：c#, arrays, string, linq

只是想知道我将如何让这样的事情起作用？

```
void EditListUpdate(int id)
    {
        string[] editListMod = modules.Where(x => x.Id == id).ToArray();
    } 
```

模块是一个列表。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T10:06:26.773

问题是方法返回的类型。

您可以通过声明显式使用

```
 Module[] editListMod = modules.Where(x => x.Id == id).ToArray(); 
```

或通过魔术词使用超级漂亮的 c# 类型推断：

```
 var editListMod = modules.Where(x => x.Id == id).ToArray(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T10:08:22.863

`modules`是`Module`您的代码中的类型。您`editListMod`是 type `string[]`，因此编译器告诉您它不能将其隐式转换为 type `Module[]`。要解决此问题，请尝试：

```
Module[] editListMod = modules.Where(x => x.Id == id).ToArray(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-21T10:03:51.457

假设您发布的是您的实际代码，那么您在`ToArray`. `ToArray()`是一个方法调用。

```
string[] editListMod = modules.Where(x => x.Id == id).ToArray(); 
```

这应该可以解决您看到的错误 ( `Cannot convert method group 'ToArray' to non-delegate type 'string[]'. Did you intend to invoke the method?`)

**更新**

你是新的错误： `Cannot implicitly convert type 'stageManagement.Module[]' to string[]'`

您需要将`editListMod`from的类型更改`string[]`为`stageManagement.Module[]`。您的 LINQ 语句将选择`stageManagement.Module`具有匹配 ID 的所有对象。

换句话说：

```
Module[] editListMod = modules.Where(x => x.Id == id).ToArray(); 
```

# mysql - 查询列出一家商店的客户，有两个不同的订单表

> ID：16129954
> 
> 赞同：1
> 
> 时间：2013-04-21T09:57:32.270
> 
> 标签：mysql, sql

我需要 sql 帮助进行查询：我想创建一个视图来列出商店的客户。这是已进行 1 次或更多预订（表预订）或已进行 1 次或更多订单（表 shop_orders）的用户表的选择。

```
-------------    --------------
| users:    |    | shops:     |
-------------    --------------
| id (PK)   |    | id (PK)    |
-------------    --------------

------------------    ----------------
| reservations:  |    | shops_orders:|
------------------    ----------------
| id (PK)        |    | id (PK)      |
| user_id (FK)   |    | user_id (FK) |
| shop_id (FK)   |    | shop_id (FK) |
------------------    ---------------- 
```

这是我工作正常的起点：

```
SELECT u.*,
       r.shop_id,
      (SELECT count(*)
       FROM reservations r
       WHERE r.user_id = u.id) AS num_reservations,
      (SELECT count(*)
       FROM shop_orders so
       WHERE so.user_id = u.id) AS num_orders
FROM users u
INNER JOIN (SELECT r.user_id,
                   r.shop_id
            FROM reservations r
            UNION 
            SELECT so.user_id,
                   so.shop_id
            FROM shop_orders so) AS r ON u.id = r.user_id
GROUP BY u.id 
```

此视图的所有查询都将通过 shop_id 过滤，以仅显示具体商店（即商店管理区域）的客户。

并且只选择有预订或订单的客户（num_reservations > 0 OR num_orders > 0）

我发现的问题是性能：整个表中有 2 个计数（*）。也是这两个完整表之间的联合。

你认为我可以测试一个更好的替代方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T10:02:49.420

你可以这样做：

```
SELECT 
    u.*,
    r.shop_id,
    IFNULL(COUNT(DISTINCT r.id), 0) AS num_reservations,
    IFNULL(COUNT(DISTINCT o.id), 0) AS num_orders
FROM users u 
    LEFT JOIN reservarions r ON r.user_id = u.id
    LEFT JOIN shop_orders o ON o.user_id = u.id
GROUP BY u.id
HAVING num_reservations + num_orders > 0 
```

另一种方式，应该更快：

```
SELECT 
    u.*,
    r.shop_id,
    IFNULL(COUNT(DISTINCT r.id), 0) AS num_reservations,
    IFNULL(COUNT(DISTINCT o.id), 0) AS num_orders
FROM users u 
    LEFT JOIN reservarions r ON r.user_id = u.id
    LEFT JOIN shop_orders o ON o.user_id = u.id
WHERE r.id IS NOT NULL OR o.id IS NOT NULL
GROUP BY u.id 
```

如果您需要将其按用户和他们使用过的商店进行拆分，请执行`GROUP BY u.id, r.shop_id`.

# garbage-collection - 尽管 NewRatio=2，年轻一代还是很小

> ID：16129956
> 
> 赞同：4
> 
> 时间：2013-04-21T09:57:35.447
> 
> 标签：garbage-collection, jvm, jvm-arguments

在某些时候，我的应用程序开始创建大量临时数组，这是预期的行为，我想给年轻一代很多空间，所以临时数组不会被提升为 Tenured Generation。

JVM 选项： `java -Xmx240g -XX:+UseConcMarkSweepGC -XX:NewRatio=2 -XX:+PrintGCTimeStamps -verbose:gc -XX:+PrintGCDetails`

在某些时候，我的 GC 日志开始看起来像这样：

```
800.020: [GC 800.020: [ParNew: 559514K->257K(629120K), 0.1486790 secs] 95407039K->94847783K(158690816K), 0.1487540 secs] [Times: user=3.34 sys=0.05, real=0.15 secs] 
800.202: [GC 800.202: [ParNew: 559489K->246K(629120K), 0.1665870 secs] 95407015K->94847777K(158690816K), 0.1666610 secs] [Times: user=3.79 sys=0.00, real=0.17 secs] 
800.402: [GC 800.402: [ParNew: 559478K->257K(629120K), 0.1536610 secs] 95407009K->94847788K(158690816K), 0.1537290 secs] [Times: user=3.48 sys=0.02, real=0.15 secs] 
```

我对年轻一代大小为 629120K (=629M) 的事实感到非常困惑，而我预计它约为。Tenured Generation 大小的 1/2（因为 NewRatio=2），即 158690816K (=158G)。正如预期的那样，Tenured 大小生成对应于 NewRatio 和 Xms，即它是总堆大小的 2/3。

JVM版本： `java version "1.7.0_21" Java(TM) SE Runtime Environment (build 1.7.0_21-b11) Java HotSpot(TM) 64-Bit Server VM (build 23.21-b01, mixed mode)`

更新： ~~我相信此时（800 秒的运行时间）程序的临时数组使用量达到峰值。如果程序没有超过 629M Young generation size，是否意味着我应该增加 NewRatio？假设我计划为程序增加更多工作量，并且我希望临时阵列体积与永久阵列体积的比率相同。~~

我之前用 NewRatio=8 运行了程序，gc log 主要由以下几行组成：

```
800.004: [GC 800.004: [ParNew: 186594K->242K(209664K), 0.1059450 secs] 95345881K->95159529K(126655428K), 0.1060110 secs] [Times: user=2.41 sys=0.00, real=0.10 secs] 
800.122: [GC 800.122: [ParNew: 186610K->221K(209664K), 0.1073210 secs] 95345897K->95159522K(126655428K), 0.1073900 secs] [Times: user=2.37 sys=0.07, real=0.11 secs] 
800.240: [GC 800.240: [ParNew: 186589K->221K(209664K), 0.1026210 secs] 95345890K->95159524K(126655428K), 0.1026870 secs] [Times: user=2.34 sys=0.00, real=0.10 secs] 
800.357: [GC 800.357: [ParNew: 186589K->218K(209664K), 0.1043130 secs] 95345892K->95159527K(126655428K), 0.1043810 secs] [Times: user=2.30 sys=0.07, real=0.10 secs] 
```

这让我觉得 NewRatio 目前对年轻代大小有影响，但不应该因为目前年轻代远远低于堆大小的 1/9。

更新 2：这是一个巨大的科学计算，我的解决方案需要高达 240GB 的内存。这不是内存泄漏，算法是我能想到的最好的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T03:30:41.130

请，您能否尝试在禁用 AdaptiveSizePolicy 的情况下运行，使用：`-XX-UseAdaptiveSizePolicy`？

这应该允许您预设每个堆区域的大小，并将在运行时禁用其大小的动态变化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-29T14:22:17.500

首先，检查[-XX:NewRatio 和 -XX:OldSize JVM 标志的含义是什么？](https://stackoverflow.com/questions/6859683/what-is-the-meaning-of-the-xxnewratio-and-xxoldsize-jvm-flags)

> NewRatio 是年轻代与老年代的比率（例如，值 2 意味着老年代的最大尺寸将是年轻代最大尺寸的两倍，即年轻代可以达到堆的 1/3）。

你会看到你的年轻代大小是正确的。

我建议您也检查一下[Java Heap 中的空间/世代之间的比率是否是常数？](https://stackoverflow.com/questions/15428227/are-ratios-between-spaces-generations-in-the-java-heap-constant)并从一开始就使用

```
-Xms240g -Xmx240g -XX:NewSize=120g -XX:MaxNewSize=120g -XX:-UseAdaptiveSizePolicy 
```

# c# - 取消令牌停止如何继续？

> ID：16129959
> 
> 赞同：1
> 
> 时间：2013-04-21T09:57:41.787
> 
> 标签：c#, winforms, task, cancellationtokensource, cancellation-token

我有一个带有此代码的线程：

```
foreach (string file in allDirectoriesFiles)
{
    if (cancellationToken.IsCancellationRequested)
    {
        return;
    }

    // ... some operation...
}

// ... some operation 2... 
```

请注意，我使用`return`而不是`break`，因为如果我停止线程，则`some operation 2`不能执行。

我还注意到，以这种方式 .ContinueWith 它不会被执行。

好吧，但这只是一个“返回”功能。C# 怎么知道我是因为返回而`tokenSource.Cancel()`不是通常返回而返回？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T11:08:53.600

您不应使用相同的取消令牌创建延续，否则延续也将被取消，即使在执行之前也是如此。使用不同的取消令牌（来自不同的取消源）创建延续，或者如果您始终希望执行取消，则只需创建不带取消令牌的延续。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T10:06:09.023

[CancellationToken](http://msdn.microsoft.com/en-us/library/system.threading.cancellationtoken.aspx)旨在一次将取消传播到整个操作集。一旦你[Cancel()](http://msdn.microsoft.com/en-us/library/dd321955.aspx)它的源，其他的延续将不会被调用。

# c++ - 将地图存储在数组 C++ 中

> ID：16129961
> 
> 赞同：-2
> 
> 时间：2013-04-21T09:57:48.923
> 
> 标签：c++, arrays, map

是否可以将地图存储在数组中？你能帮我怎么做吗？很明显，我可以存储例如 int，但我不知道如何使用地图来做到这一点。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T09:58:45.473

您可以以完全相同的方式进行操作。假设您要映射 from`std::string`到`int`：

```
std::map<std::string, int> array[10]; 
```

这将为您提供 10 个这些地图的数组。您可能更喜欢使用`std::array`封装数组的容器：

```
std::array<std::map<std::string, int>, 10> array; 
```

或者，如果您希望能够添加地图以动态调整数组大小，您可以使用`std::vector`：

```
std::vector<std::map<std::string, int>> array; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T10:00:08.067

我建议你使用`std::vector`这个。然后，您可以使用以下方法轻松创建地图矢量：

```
std::vector<std::map<std::string, int> > maps; 
```

`>`请注意， C++11 中的字符之间不需要额外的空格。

# jquery - 将 DataTables 与来自服务的数据绑定

> ID：16129965
> 
> 赞同：0
> 
> 时间：2013-04-21T09:58:13.520
> 
> 标签：jquery, wcf, datatables

我可以使用 DataTables.net 静态绑定，如下所示：

```
 <script type="text/javascript">

        $(document).ready(function () {
            $('#testDatatable').dataTable({

            "aaData": [
                ["Ibrahim", 55],
                ["Asif", 20],
                ["Shariful", 70],
                ["John", 55],
                ["Doe", 40],
                ["Nazmul", 30],
                ["Jane", 15],
                ["Ershad", 10],
                ["Yusuf", 44],
                ["Bill", 22],
                ["Steve", 18]
            ]
                ,
            "aoColumns": [
                { "sTitle": "Name" },
                { "sTitle": "Age" }
                ]

            });

        });

    </script> 
```

但是对于 prop aaData，我想从 Web 服务中获取数据。如下所示：

```
 <script type="text/javascript">

        $(document).ready(function () {
            $('#testDatatable').dataTable({

                "aaData": $.getJSON('http://localhost:9183/Service.svc/GetCustomer')
                ,
            "aoColumns": [
                { "sTitle": "Name" },
                { "sTitle": "Age" }
                ]

            });
        });

    </script> 
```

我的服务如下所示：

```
 [OperationContract]
    [WebGet(ResponseFormat = WebMessageFormat.Json)]
    public List<Customer> GetCustomer()
    {
        List<Customer> customers = new List<Customer>();
        customers.Add(new Customer { Name = "Ibrahim", Age = 10 });
        customers.Add(new Customer { Name = "John Doe", Age = 20});
        return customers;
    } 
```

这不起作用。它表明没有找到任何记录。有人请告诉我我有哪些选择或哪里出错了。任何建议都受到高度赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T14:18:22.197

您的网络服务正在返回一个对象数组，默认情况下 datatables 需要一个数组数组。您有两个选择，要么更新您的 Web 服务，要么更改您的数据表配置以使用该`mData`属性按名称引用属性：

```
aoColumns": [
    { "sTitle": "Name", "mData": "Name" },
    { "sTitle": "Age", "mData": "Age" }
] 
```

`mData`您可以在数据表[参考页面](http://datatables.net/ref)找到更多信息。只需搜索`mdata`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T10:44:12.430

因此，我终于可以将 Datatable 与我的 Web 服务调用绑定。这是一种迂回的方法，但至少解决了我的主要目标。我从我的服务中获取数据，运行一个循环，将 JSON 格式化为 Datatable 接受的格式 JS 数组，并将“aaData”设置为格式化的 JS 数组：

```
$(document).ready(function () {

            var returnData;
            $.ajax({
                url: "http://localhost:9183/Service.svc/GetCustomer",
                async: false,
                dataType: 'json',
                success: function (data) {
                    returnData = data;
                }
            });

            var arrayReturn = [], results = returnData;
            for (var i = 0, len = results.length; i < len; i++) {
                var result = results[i];
                arrayReturn.push([ result.Age, result.Name]);
            }

            $('#testDatatable').dataTable({

                "aaData": arrayReturn,
                "aoColumns": [
                { "sTitle": "Name" },
                { "sTitle": "Age" }
                ]

            });

        }); 
```

我不必更改服务中的任何内容。 **但是我仍然不知道为什么我上面的第一次尝试行不通，我还有什么更好的选择。因此，请随意推测这一点**。感谢那些至少试图提供帮助的人。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T10:22:35.247

我认为您可以将服务器端的列表转换为 JSON 并返回。有关简单示例，请参见[this](https://stackoverflow.com/questions/5659753/json-to-datatable)和[this](https://stackoverflow.com/questions/546121/datatable-to-json-using-jquery)。

当然，SO 上还有其他可用的示例。

# python - sqlalchemy / google cloud sql api需要与google appengine一起安装什么？

> ID：16129969
> 
> 赞同：1
> 
> 时间：2013-04-21T09:58:45.610
> 
> 标签：python, sqlalchemy, google-cloud-sql

我尝试了[SQLAlchemy 中的建议可以与 Google Cloud SQL 一起使用吗？](https://stackoverflow.com/questions/10763171/can-sqlalchemy-be-used-with-google-cloud-sql)使用 sqlalchemy 建立与谷歌云 sql 的外部连接。

为了让 google appengine 包在我的环境中可见，在安装 google appengine sdk 后，我将 google 目录复制到 site-packages 并创建了一个 google.pth 文件，其中包含带有“./google”的单行。然后可以看到谷歌包。

当我尝试执行 create_engine 调用时，出现以下异常。我的安装中缺少什么吗？我该如何纠正？

```
create_engine('mysql+gaerdbms:///runningdb', connect_args={"fsrcrunning":"fsrcrunningdb"})

C:\Python27\lib\site-packages\sqlalchemy-0.8.0-py2.7-win32.egg\sqlalchemy\engine\__init__.pyc in create_engine(*args, **kwargs)
    330     strategy = kwargs.pop('strategy', default_strategy)
    331     strategy = strategies.strategies[strategy]
--> 332     return strategy.create(*args, **kwargs)
    333
    334

C:\Python27\lib\site-packages\sqlalchemy-0.8.0-py2.7-win32.egg\sqlalchemy\engine\strategies.pyc in create(self, name_or_url, **kwargs)
     62                 if k in kwargs:
     63                     dbapi_args[k] = kwargs.pop(k)
---> 64             dbapi = dialect_cls.dbapi(**dbapi_args)
     65
     66         dialect_args['dbapi'] = dbapi

C:\Python27\lib\site-packages\sqlalchemy-0.8.0-py2.7-win32.egg\sqlalchemy\dialects\mysql\gaerdbms.pyc in dbapi(cls)
     48             return rdbms_apiproxy
     49         else:
---> 50             from google.storage.speckle.python.api import rdbms_googleapi
     51             return rdbms_googleapi
     52

C:\Python27\lib\site-packages\google\storage\speckle\python\api\rdbms_googleapi.py in <module>()
     44         'PYTHONPATH when using this backend.')
     45
---> 46 from apiclient import errors
     47 from apiclient import http
     48 from apiclient import model

ImportError: No module named apiclient 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T18:11:31.383

`apiclient`是[google-api-python-client 的](https://pypi.python.org/pypi/google-api-python-client/)一部分，可以通过 安装，尽管客户端也与[lib 目录](https://code.google.com/p/googleappengine/source/browse/trunk/python/#python%2Flib)`pip install google-api-python-client`中的 App Engine SDK 捆绑在一起，并且是我使用的副本。我从来没有将我的 App Engine 安装移动到站点包，而是将路径添加到里面，就像这样（我正在运行 Mac）：`PYTHONPATH``.bash_profile`

`export PYTHONPATH=/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine:$PYTHONPATH`

还有一个[谷歌云 SDK](https://developers.google.com/cloud/sdk/)，它是几周前刚刚发布的，它包含了所有谷歌云服务，包括 Cloud SQL 和 App Engine。

# php - preg_match(): 没有找到结束分隔符 '^'

> ID：16129972
> 
> 赞同：5
> 
> 时间：2013-04-21T09:59:15.863
> 
> 标签：php, preg-match

警告：preg_match()：在第 29 行的 .../functions/validations.php 中找不到结束分隔符 '^'

编码：

```
 if (preg_match($mail_pat, $email, $components)) { 
```

我在哪里进行编辑？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-21T10:08:21.657

基于 Perl 的正则表达式应该在分隔符内.. `"/your regex here/"`.. 已弃用的 POSIX 正则表达式是不需要任何分隔符的.. 例如 ereg(")

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-21T10:02:11.720

您必须在正则表达式中添加分隔符：

```
if (preg_match('/' . $mail_pat . '/', $email, $components)) { 
```

$mail_pat 以 a 开头`^`但以另一个字符结尾，这会导致错误，因为没有匹配的分隔符。

# wix - WIX 安装程序：如何保持安装相同应用程序的先前版本

> ID：16129977
> 
> 赞同：1
> 
> 时间：2013-04-21T09:59:58.807
> 
> 标签：wix

我在我的系统上安装了 1.0 修订版，一段时间后我做了一些更改并将修订版更改为 1.1；现在，当我安装应用程序的 1.1 版时，它会要求我删除应用程序的先前版本。

我如何指示 WIX 它应该保持安装我的旧版本并安装最新版本而不会出现任何错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T13:58:11.300

只要你使用简单`Upgrade`的逻辑，（例如`MajorUpgrade`元素很棒），你只需要做两件事：

1.  改变你的`Product/@Id`向导。这将告诉 Windows 安装程序您的产品有新问题。
2.  改变你的`Product/@UpgradeCode`向导。这将告诉 Windows 安装程序该产品属于一个新的“系列”。

现在，当您安装 v1.1 时，它将单独保留 v1.0，您最终应该在“添加/删除程序”中获得这两个条目。

# php - [PHP]：从另一个站点的 API 读取文件

> ID：16129978
> 
> 赞同：0
> 
> 时间：2013-04-21T10:00:06.343
> 
> 标签：php, url, external, fopen

我正在尝试将文件[https://gdata.youtube.com/feeds/api/users/testuser](https://gdata.youtube.com/feeds/api/users/testuser)下载到一个字符串（该文件包含来自用户“testuser”的 youtube API 详细信息）。但是当我用 fopen 下载它时，我只得到一个空白文件。我搜索了一下，但没有任何帮助，可能是什么问题？我用来自同一台服务器的文件测试了相同的代码，它工作正常。

另外，我知道这是可能的，因为有些网站完全符合我的要求（例如 SocialBlade）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T10:08:33.570

尝试使用[file_get_contents](http://www.php.net/manual/en/function.file-get-contents.php)。似乎更合适。
当心[allow-url-fopen](http://www.php.net/manual/en/filesystem.configuration.php#ini.allow-url-fopen%22)设置

如果您在共享服务器上的托管服务上，则很有可能无法更改 allow-url-fopen 配置，因为它处于[PHP_INI_SYSTEM](http://www.php.net/manual/en/configuration.changes.modes.php)模式。询问您的托管服务以获取有关此的更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T10:04:50.203

您是否尝试过[file_get_contents](http://php.net/manual/en/function.file-get-contents.php)检查您是否使用此文件获取文件..

# c++ - 如何在 C++ 中压缩相对文件名

> ID：16129984
> 
> 赞同：0
> 
> 时间：2013-04-21T10:00:33.340
> 
> 标签：c++, filenames, gnu

我正在构建自己的脚本语言，只是为了好玩（是的，我知道这样做的困难），在 Linux 上的 C++ 中。这种脚本语言将有一个导入机制，用于在解释器传递阶段包含相关文件名。

所以`/home/michael/foo/bar`可能会加载`../bar/baz`哪个可能会加载`../foo/baz`等等。我得到的问题是我最终不得不加载这样的文件名：（`/home/michael/foo/../bar/../foo/baz`递归地添加到当前目录的相对文件名）。这在错误输出中看起来很傻，我想以后会引起其他问题，更不用说效率很低了。

我如何（除了编写我自己的文件名解析器）“优化”或“压缩”文件名以便我只需要加载`/home/michael/foo/baz`？

我并不反对使用库，但如果可能的话，我更喜欢使用 POSIX/GNU C 库/扩展或 Boost，尽管从初步的角度来看，我在其中任何一个中都找不到任何我想要的东西，虽然也许我只是不知道要搜索什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T10:06:23.880

POSIX 定义了一个名为[realpath](http://linux.die.net/man/3/realpath)的函数，它将为您解析路径名。它会整理`.`s、`..`s、多余的斜线，并且还会解析符号链接。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-21T10:06:01.387

尝试[真实路径](http://www.manpagez.com/man/3/realpath/)：

```
#include <stdlib.h>
#include <stdio.h>
int main()
{
  char resolved_path[100];
  realpath("/home/burgos/foo/../bar/../foo/baz", resolved_path);
  printf("\n%s\n",resolved_path);
  return 0;
} 
```

# ios - iOS >> 拖动视图正在跳回原始位置 >> 自动布局结合 UIPanGestureRecognizer 问题

> ID：16129988
> 
> 赞同：15
> 
> 时间：2013-04-21T10:01:14.260
> 
> 标签：ios, drag-and-drop, uigesturerecognizer, autolayout, subviews

我有几个用户应该能够拖放的 UIView。我使用***UIPanGestureRecognizer***来管理 d&d 操作（参见下面的代码）。d&d 动作工作正常，但是当我开始拖动另一个 UIView 时，我刚刚放下的那个正在跳回原来的位置。

```
- (void)handlePan:(UIPanGestureRecognizer *)recognizer {

    CGPoint translation = [recognizer translationInView:self.view];

    switch (recognizer.state) {
        case UIGestureRecognizerStateBegan:
            for (UIView* checkView in dragAndDropImageViewsArray) {
                if (checkView == recognizer.view) {
                    [checkView.superview bringSubviewToFront:checkView]; //this is done to make sure the currently dragged object is the top one
                }
            }
            break;

        case UIGestureRecognizerStateChanged:
            recognizer.view.center = CGPointMake(recognizer.view.center.x + translation.x, recognizer.view.center.y + translation.y);
            break;

        case UIGestureRecognizerStateEnded:
            NSLog(@"UIGestureRecognizerStateEnded");
            break;

        default:
            break;
    }

    [recognizer setTranslation:CGPointMake(0, 0) inView:self.view];

} 
```

我尝试了一些“解决”问题但导致其他问题的方法：

*   **取消自动布局**：这完全解决了它，但现在我必须开始计算和管理不同设备和方向的对象位置和大小。
*   **使用 layer.zPosition 而不是 bringSubviewToFront**：这使得对象出现在其他对象之上，同时显然避免了“跳回”，但不允许我更改不同可拖动对象之间的层次结构。

我开始加深对自动布局的理解，但是当我觉得我要寻找的东西应该很简单时，它变得非常复杂；我看到了许多处理执行“重新自动布局”的方法，但我不清楚如何使用它们。

**这里有一个简单的解决方案吗？就像调用一个方法来覆盖 IB 自动布局约束并根据 UIView 新位置重新定义它们？**

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-21T19:19:18.747

我认为，如果您使用自动布局并且想要更改视图的位置，则需要更新视图上的约束，而不是手动设置视图的中心。从描述中听起来您正在设置中心，但是当应用程序接下来布置视图（例如，您拖动另一个视图）时，它会将中心重新设置为自动布局所说的任何内容。

我不确定您的应用程序的其余部分是什么样的，但您可能能够找到附近的视图并为其添加约束，或者您可能更喜欢只更新拖动视图的约束并设置前导空间和顶部空间手动到superview。如果您有一个方便的集合，您还可以清除所有约束，然后重新添加它们，因为您希望在视图之间保持填充。

要在代码中设置约束，您可以清除移动视图的约束并重新添加它们，或者如果您在 IB 中有视图，您可以将约束拖到代码中以创建插座。查看 removeConstraints 和 addConstraints 方法以在代码中执行此操作。

最后，如果它在没有自动布局的情况下按您的意愿工作，您可以尝试在移动的视图上设置 translatesAutoresizingMaskIntoConstraints = YES，但请注意这可能会导致其他地方发生冲突。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-03-19T03:33:08.533

这一切都可以使用 Interface Builder。这是我用来执行此操作的代码：

```
@property (weak,nonatomic) IBOutlet NSLayoutConstraint *buttonXConstraint;
@property (weak,nonatomic) IBOutlet NSLayoutConstraint *buttonYConstraint; 
```

然后将这些 IBOutlets 连接到 Interface Builder 中的水平约束（X 位置）和垂直约束（Y 位置）。确保约束连接到基础视图，而不是最近的视图。

连接一个平移手势，然后使用以下代码拖动您的对象：

```
- (IBAction)panPlayButton:(UIPanGestureRecognizer *)sender
{
    if(sender.state == UIGestureRecognizerStateBegan){

    } else if(sender.state == UIGestureRecognizerStateChanged){
        CGPoint translation = [sender translationInView:self.view];

        //Update the constraint's constant
        self.buttonXConstraint.constant += translation.x;
        self.buttonYConstraint.constant += translation.y;

        // Assign the frame's position only for checking it's fully on the screen
        CGRect recognizerFrame = sender.view.frame;
        recognizerFrame.origin.x = self.buttonXConstraint.constant;
        recognizerFrame.origin.y = self.buttonYConstraint.constant;

        // Check if UIImageView is completely inside its superView
        if(!CGRectContainsRect(self.view.bounds, recognizerFrame)) {
            if (self.buttonYConstraint.constant < CGRectGetMinY(self.view.bounds)) {
                self.buttonYConstraint.constant = 0;
            } else if (self.buttonYConstraint.constant + CGRectGetHeight(recognizerFrame) > CGRectGetHeight(self.view.bounds)) {
                self.buttonYConstraint.constant = CGRectGetHeight(self.view.bounds) - CGRectGetHeight(recognizerFrame);
            }

            if (self.buttonXConstraint.constant < CGRectGetMinX(self.view.bounds)) {
                self.buttonXConstraint.constant = 0;
            } else if (self.buttonXConstraint.constant + CGRectGetWidth(recognizerFrame) > CGRectGetWidth(self.view.bounds)) {
                self.buttonXConstraint.constant = CGRectGetWidth(self.view.bounds) - CGRectGetWidth(recognizerFrame);
            }
        }

        //Layout the View
        [self.view layoutIfNeeded];
    } else if(sender.state == UIGestureRecognizerStateEnded){

    }

    [sender setTranslation:CGPointMake(0, 0) inView:self.view];
} 
```

我在那里添加了代码来检查框架并确保它不会超出视图。如果您想让对象部分离开屏幕，请随意将其取出。

我花了一点时间才意识到是使用 AutoLayout 重置了视图，但约束会在这里做你需要的！

# logging - Prestashop Logger::addLog() 在哪里保存日志文件？

> ID：16129993
> 
> 赞同：11
> 
> 时间：2013-04-21T10:01:57.157
> 
> 标签：logging, module, prestashop

我在 Prestashop 模块中遇到了以下行：

```
Logger::addLog('2: md5 string is '.$md5HashData, 1); 
```

日志保存在哪里？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-22T02:46:12.013

日志保存在“日志”表中的数据库中（使用您当前的前缀）；

您可以从[classes/Logger.php中找到 addLogg 函数](https://github.com/PrestaShop/PrestaShop/blob/master/classes/Logger.php)

但是没有文档可以从方法注释中找到有用的东西

```
 /**
* add a log item to the database and send a mail if configured for this $severity
*
* @param string $message the log message
* @param int $severity
* @param int $error_code
* @param string $object_type
* @param int $object_id
* @param boolean $allow_duplicate if set to true, can log several time the same information (not recommended)
* @return boolean true if succeed
*/
public static function addLog($message, $severity = 1, $error_code = null, $object_type = null, $object_id = null, $allow_duplicate = false) 
```

正如我从代码中了解到的，如果第二个参数小于 5（“配置”表中 PS_LOGS_BY_EMAIL 的值），您还应该收到带有警报消息的电子邮件。但它只会被发送和记录一次（如果方法的最后一个参数 $allow_duplicate 不是真的）

**注意：**这在 Prestashop 1.6 中已更改，该类现在称为`PrestaShopLogger`，请`PrestaShopLogger::addLog($message, $severity);`改用。它们显示在后台的`Advanced Settings > Logs`.

# c++ - 通过套接字发送带有向量的 c++ 对象

> ID：16129998
> 
> 赞同：2
> 
> 时间：2013-04-21T10:02:26.513
> 
> 标签：c++, sockets, serialization

很长一段时间以来，我一直试图找到一种通过 tcp 套接字序列化或发送状态对象的好方法。我的问题是我无法使用任何 3\. 方库，如 boost。

我的状态对象包含多个对象。最重要的是它有一些对象和一个对象向量，但没有指针（例如，可能没有深度复制，如果向量不需要这个）。

对于我的问题：由于我不能使用 boost 或任何其他库，那么通过套接字发送带有对象的对象的最佳方法是什么？我一直在想我可能可以创建一个复制构造函数并将其发送到流中，但我不太确定这样做的后果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T10:11:32.357

为您的数据类型定义（反）序列化函数。

例如，如果你有类似的东西：

```
class MyClass
{
public: 
    int field_a;
    int field_b;
    std::string string;
    ...
};
typedef std::vector<MyClass> MyVector; 
```

您可以定义以下内容：

```
void write(int fd, const MyClass &arg)
{
    // either convert arg to byte array and write it, or write field by field
    // here we write it field by field
    write_int(fd, arg.field_a);
    write_int(fd, arg.field_b);
    write_string(fd, arg.string);
}

void write(int fd const MyVector &arg)
{
    size_t size = arg.size();
    ::write(fd, &size, sizeof(size)); // beware: machine-dependent code
    for (MyVector::const_iterator it = arg.begin(); it != arg.end(); it++)
    {
        write(*it);
    }
} 
```

辅助功能：

```
void write_int(int fd, int arg)
{
    write(fd, &arg, sizeof(int));
}

void write_string(int fd, const std::string &str)
{
    size_t len = str.length();

    write(fd, &len, sizeof(len)); // string length go first
    write(fd, str.data(), len); // write string data
} 
```

并阅读：

```
MyClass readMC(int fd)
{
    // read MyClass data from stream, parse it
    int f1, f2;
    std::string str;

    read_int(fd, f1);
    read_int(fd, f2);

    read_string(fd, str)

    return MyClass(f1, f2, str);
}

void read(int fd, MyVector &arg)
{
    size_t size;
    size_t i;

    read(fd, &size, sizeof(size)); // read number of elements;
    arg.reserve(size);
    for (i = 0; i < size; i++)
    {
        arg.push_back(readMC(fd));
    }
} 
```

辅助功能：

```
void read_int(int fd, int &res);
{
    read(fd, &res, sizeof(res));
}

void read_string(int fd, std::string &string)
{
    size_t len;
    char *buf;

    read(fd, &len, sizeof(len));
    buf = new char[len];
    read(fd, buf, len);
    string.asssign(buf, len);
    delete []buf;
} 
```