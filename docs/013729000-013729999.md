# StackOverflow 问答 13729000-13729999

# ios - AVCaptureSession“输出样本缓冲区”读取像素坐标给出了错误的颜色

> ID：13729003
> 
> 赞同：1
> 
> 时间：2012-12-05T17:30:21.820
> 
> 标签：ios, pixel, avcapturesession

我使用 AVCaptureSession 启动视频捕获会话并从视频帧中读取像素颜色。视频设置是这样的。

```
NSDictionary* videoSettings = [NSDictionary dictionaryWithObjectsAndKeys:
                               [NSNumber numberWithUnsignedInt:kCVPixelFormatType_32BGRA],
                               kCVPixelBufferPixelFormatTypeKey,
                               nil]; 
```

使用下面的委托方法来获取样本缓冲区，稍后我将读取像素颜色。

```
- (void)captureOutput:(AVCaptureOutput *)captureOutput // captureOutput is only the AVCaptureVideoDataOutput
didOutputSampleBuffer:(CMSampleBufferRef)sampleBuffer 
       fromConnection:(AVCaptureConnection *)connection 
{ 

    NSAutoreleasePool * pool = [NSAutoreleasePool new]; // instrument tells it leaks

    /*******  START CALCULATION  *******/

    imageBuffer = CMSampleBufferGetImageBuffer(sampleBuffer); 
    CVPixelBufferLockBaseAddress(imageBuffer,0); // lock image buffer
    buffer_baseAddress = (uint8_t *)CVPixelBufferGetBaseAddress(imageBuffer); // raw buffer data BGRA

... 
```

该变量`buffer_baseAddress`是一个存储像素颜色的数组，在其中`kCVPixelFormatType_32BGRA`设置时，数组将排列为 [B][G][R][A][B][G][R][A][B]... [B][G][R][A]。因此，要在某个坐标处获得像素颜色，我必须找出缓冲区中的 3 个索引。所以在 (x,y) = (10,0) 时，BGR 将位于索引 40、41 和 42。

这是问题所在。样本缓冲区的第一行 (y == 0) 似乎始终提供正确的颜色。但是当我向前移动到第二行（y > 0）时，我在某些预设或使用前置/后置摄像头时得到了错误的颜色。**就像缓冲区在特定设置中在每行末尾附加了一些未知的额外数据。**幸运的是，从我的实验中，我发现当我在后置摄像头上使用**AVCaptureSessionPresetHigh 和在前后摄像头上**使用 AVCaptureSessionPresetMedium 时，每行中的样本缓冲区都发生了一定程度的移动。我记得在 AVCaptureSession 类之一中设置一些 rowPadding = 0 也无济于事。（对不起，我忘记了它的确切变量。几个月前。）

是什么导致了这个问题？我能做些什么来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T18:23:08.227

查看Apple Docs 中此页面中的[将 CMSampleBuffer 转换为 UIImage部分。](https://developer.apple.com/library/ios/documentation/AudioVideo/Conceptual/AVFoundationPG/Articles/06_MediaRepresentations.html#//apple_ref/doc/uid/TP40010188-CH2-SW16)我还没有尝试过，但它显示了如何获取`bytesPerRow`- 包括填充 - 缓冲区。

将图像缓冲区填充到最佳值是正常的，无论您使用的是 CoreVideo、CoreImage、Quartz、Quicktime 等。总有办法找出它是什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T17:30:21.820

这是我目前的解决方案。不是最好的，但它可以帮助我克服它。我只是测试每一个`AVCaptureSessionPreset`，看看哪个读取了错误的像素。然后我尝试猜测额外填充的大小并在计算样本缓冲区索引时使用它。**这个神奇的数字是 8**，我花了好几天才知道。因此，希望这至少对某人有所帮助，作为一种解决方法。:-)

```
 // Look like this magic padding is affected by AVCaptureSessionPreset and front/back camera
    if ([[self currentPresetSetting] isEqualToString:AVCaptureSessionPresetHigh] && ![self isUsingFrontFacingCamera]) {
        buffer_rowPixelPadding = 8;
    }
    else if ([[self currentPresetSetting] isEqualToString:AVCaptureSessionPresetMedium]) {
        buffer_rowPixelPadding = 8;
    }
    else {
        buffer_rowPixelPadding = 0; // default
    } 
```

# linux - Linux 上的 UDP 服务器应用程序无法接收来自超过 150 个客户端的数据包

> ID：13729005
> 
> 赞同：2
> 
> 时间：2012-12-05T17:30:30.377
> 
> 标签：linux, sockets, udp

我在 Linux 上编写了一个 UDP C++ 服务器应用程序，现在正在对其进行负载测试以查看它可以处理多少个客户端。我发现它在大约 150 个并发客户端以每秒 2-4 个的速率发送数据包时达到峰值。

之后添加的客户端将导致其他一些客户端的数据包被丢弃。

服务器本身没有压力，使用不到 10% 的 CPU 和内存。网络也完全没有压力，大约 15K 字节/秒。数据包以大约 200 个数据包/秒的速度到达服务器（它使用一个 UDP 套接字进行读取和写入）。在此负载级别，服务器线程本身仍会短时间休眠。

**问题**：
关于这里的瓶颈是什么有什么想法吗？CPU、网络和服务器代码本身似乎都没有压力。操作系统是否无法处理此数量的 UDP 数据包？

硬件功耗非常低 - 相当于 1.5 MHz 的单核 Pentium。NIC 为 100M 位/秒。我正在运行 Ubuntu 11.1。

本文可能与此相关：[Windows Server 2008 上 UDP 性能的上限](https://stackoverflow.com/questions/10544296/upper-limit-to-udp-performance-on-windows-server-2008)

*更新*：服务器设置一个 UDP 套接字，然后创建 3 个线程和 2 个队列。套接字读取的第一个线程块如下所示：

```
while (1)
{
    recvfrom(this->socket, readBuf, BUFSIZE, 0, (sockaddr *)&address, &addressLen);
    pushBack(this->inputQueue, message);
} 
```

第二个线程在 inputQueue 上休眠。它在发出条件信号并处理消息时唤醒。它将处理后的消息发送到 outputQueue：

```
while (1)
{
    sleepOnQ(this->inputQueue);
    popFront(this->inputQueue);
    processMessage();
    pushBack(this->outputQueue, message);
} 
```

第三个线程在 outputQueue 上休眠并将消息从 UDP 套接字发送到目的地。请注意，它与用于读取的套接字相同。

```
while (1)
{
    sleepOnQ(this->outputQueue);
    popFront(this->outputQueue);
    processMessage();
    sendto(this->socket, message, ... );
} 
```

每个客户端和消息的处理量很小。正如我提到的，当服务器每秒处理 200 条消息时，它使用了大约 10% 的非常弱的 CPU。

以下是系统上的一些内核参数：

```
net.core.wmem_max = 114688
net.core.rmem_max = 114688
net.core.wmem_default = 114688
net.core.rmem_default = 114688 
```

**有关数据同步的更多信息**

到目前为止的答案让我认为发生了两件事：

1.  操作系统读取缓冲区已满。但是在低 CPU 的情况下，这不应该发生
2.  但是如果线程正在等待其他事件并且因此没有足够快地读取套接字，则可能会发生＃1。

日志记录可能是一个问题，我会尝试将其关闭并报告结果。然而，可能更重要的是线程之间的队列争用。由于 CPU 较低，线程可能会花费大量时间等待访问队列。

在这个服务器的第一次迭代中，我试图在锁定数据方面变得棘手。服务器非常快，但在达到 800 个数据包/秒时崩溃了。当前版本锁定整个队列。也许我需要一种更好的方法来同步线程。

**已回答问题**

我在这里得到的信息非常有帮助。问题是测试客户端的一个愚蠢的错误，但进行调查帮助我消除了这里建议的原因。

仅供参考，这是我的结果。一旦我解决了客户端的问题，服务器每秒接受大约 800 个数据包，CPU 利用率为 70%。我已将操作系统读/写缓冲区从 128K 增加到 12MB。我没有测试读取缓冲区是否已填满。我怀疑操作系统读取缓冲区是一个问题，因为在最高速度下，服务器读取线程仍然在每 10 次或 20 次读取时在短时间内阻塞读取。

800 个数据包/秒仍然太慢，所以我从服务器中删除了日志记录。这产生了巨大的变化。服务器能够以 70% 的 CPU 利用率从 1400 多个客户端接收 2900 条消息/秒。

我还对读取线程是否正在等待锁定进行了一些测试。即使在最高速度下，我也发现它永远不必等待超过 1 毫秒，因此它不是 2900 条消息/秒的因素。也许它将在更快的 CPU 上。

此时服务器受 CPU 限制，要找到下一个瓶颈，我需要使用更强大的 CPU。谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T09:41:47.847

如果传入的 UDP 数据报不适合 UDP 输入缓冲区（通常缓冲区已满），则内核将丢弃它。

如果在数据包速率仅为 200/s 且 CPU 负载较低时缓冲区已满，那么您的程序会浪费时间等待新数据包之外的其他内容（睡眠结束、某些资源等）。

仔细检查您的代码。并尝试摆脱所有`sleep`,`nanosleep`和类似的睡眠功能。

如果您将大量（调试）输出打印到串行控制台，它可能会开始阻塞您的程序，因为串行端口不是那么快。尝试消除这种瓶颈。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T07:33:36.867

丢失的最可能原因是 UDP 套接字的传入数据包缓冲区在您的第一个线程可以清空它之前填满；在缓冲区已满时接收到的任何传入 UDP 数据包都将被丢弃。

第一个线程无法以足够快的速度清空缓冲区以防止其被填满的最可能原因是其他东西将其与 CPU 隔离太久......核心CPU，很可能就是这种情况。您可能想尝试将您的第二个和第三个线程设置为较低的优先级（这样当出现争用时第一个线程将在 CPU 上获得第一个 dib）并查看是否有帮助。如果这还不够好，您可以将您的进程设置为 SCHED_RR“实时”优先级，以确保操作系统中运行的任何其他进程不会让您的第一个线程远离 CPU。（当然，您仍然可以以较低的优先级运行其他线程，因为它们执行的确切时间并不重要）。

# javascript - 使用 javascript 选择本地 javascript 文件

> ID：13729014
> 
> 赞同：-1
> 
> 时间：2012-12-05T17:30:59.697
> 
> 标签：javascript, jquery, html, forms

我有两个单独的 .js 文件，根据用户在 select 标记中对表单所做的选择，我希望在 html 页面上使用特定于用户请求的 .js 文件。

这是我的代码：

```
<script type="text/javascript"> 
 $(document).ready(function(){
    if (document.getElementById('analyses').value == 'distance'){

 <script src="/static/analysis.js"></script>

    }else{
 <script src="/static/another.js"></script>
    }
   });
</script> 
```

html表单：

```
<form id="eventForm">            
     <select name="event" id="abc">
        <option value="" disabled="disabled" selected="selected">Select Event</option>
        <option value="US">US</option>
        <option value="UK">UK</option>
        <option value="Fr">France</option> 
     </select>             

     <select name="analysis" id="analyses">
        <option value="" disabled="disabled" selected="selected">Select Analysis</option>
        <option value="distance">distance</option>
        <option value="other">other</option>
     </select>

    <input type="submit" id="open" onclick="heading()" value="Start Analysis"/> 
```

目前它只运行 /static/analysis.js 文件，无论用户选择如何。

谢谢

编辑：

```
<script>

function loadScript(path) {
    var head=document.getElementsByTagName('head')[0];
    var script = document.createElement('script');
    script.setAttribute('type', 'text/javascript');
    script.setAttribute('src', path);
    head.appendChild(script);
}

$(document).ready(function(){
if (document.getElementById('analyses').value == 'distance'){

loadScript("/static/analysis.js");

}else{
loadScript("/static/analysisfdfdf.js");
}
});
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T17:41:21.480

可以使用该函数动态加载其他JS文件

```
function loadScript(path) {
    var head=document.getElementsByTagName('head')[0];
    var script = document.createElement('script');
    script.setAttribute('type', 'text/javascript');
    script.setAttribute('src', path);
    head.appendChild(script);
} 
```

用法：

```
loadScript("/static/analysis.js"); 
```

请记住，脚本将被异步加载，因此您不能假设在该行之后加载了脚本。您将需要加载的脚本来执行`callback`准备好的通知

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T17:34:05.863

您可以使用 jQuerys **getScript()** - [http://api.jquery.com/jQuery.getScript/](http://api.jquery.com/jQuery.getScript/)

因此，当用户做出选择时，您只需加载相关的 js 文件

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T17:54:43.420

您是否只需要加载其中一个脚本？您可以创建两个 JavaScript 函数，每个函数都包含来自相关脚本的代码，然后执行对应于用户选择的任何一个。

没有理由不能在两个单独的 .js 文件中定义它们，只要将它们都包含在 html 中即可。

这似乎是一种执行特定代码的更简单方法，而不必担心动态加载代码。

# php - Ajax 在提交按钮中不起作用

> ID：13729019
> 
> 赞同：-1
> 
> 时间：2012-12-05T17:31:21.863
> 
> 标签：php, javascript, jquery, ajax, wordpress

我正在创建这个 wordpress 插件，它运行良好，但在使用 ajax 的 subimt 数据中存在问题。我已经创建了 ajax 代码，但它不起作用。

请帮忙弄清楚

谢谢你

这是代码

```
 <script>
var data = {
    action: 'join_mailinglist',
    email: email
};

jQuery("#mailinglistsubmit").hide();
jQuery(".ajaxsave").show();
jQuery.post("<?php echo admin_url('admin-ajax.php'); ?>", data,
function(response){
    jQuery(".ajaxsave").hide();
    jQuery("#mailinglistsubmit").show();
});     

return false;

</script>

<?php
/*
Plugin Name: MyFirst
Plugin URI: http://zachis.it
Description: ajax form.
Version: 1.0
Author: Zachary Smith
Author URI: http://zachis.it
License: GPL2
*/
?>

<?php
 /* What to do when the plugin is activated? */
register_activation_hook(__FILE__,'my_first_plugin_install');

/* What to do when the plugin is deactivated? */
register_deactivation_hook( __FILE__, 'my_first_plugin_remove' );

function my_first_plugin_install() {
/* Create a new database field */
add_option("my_first_data", 'Testing !! My Plugin is Working Fine.', 'This is my first plugin panel data.', 'yes');
}

function my_first_plugin_remove() {
/* Delete the database field */
delete_option('my_first_data');

} 

add_action('admin_menu', 'my_first_admin_menu');
function my_first_admin_menu() {
add_options_page('Plugin Admin Options', 'My Plugin Settings', 'manage_options',
'my-first', 'plugin_admin_options_page');
}
?>

<?php
function plugin_admin_options_page() {
?>
<div class="wrap">
<?php screen_icon(); ?>
<h2>Plugin Options Admin Page</h2>
</div>
<div class="content">

<div class="output"><p><?php echo get_option('my_first_data'); ?></p></div>
<p>
<form method="post" action="options.php">
<?php wp_nonce_field('update-options'); ?>
<h2>Enter Text: </h2>
<textarea name="my_first_data" id="my_first_data" cols="200" rows="20"></textarea>
<input type="hidden" name="action" value="update" />
<input type="hidden" name="page_options" value="my_first_data" /><br />
<input style="position: fixed; left: 40%;" id="mailinglistsubmit" type="submit" value="Save Changes" /><img src="<?php admin_url(); ?>/wp-admin/images/wpspin_light.gif" alt="" class="ajaxsave" style="display: none;" />
</form>
</p>
</div>
<?php
}
?> 
<?php add_action('wp_ajax_my_action', 'my_action_callback');
add_action('wp_ajax_nopriv_my_action', 'my_action_callback'); 
?>

<?php function join_mailinglist_callback() {
    $email = $_POST['email'];
    if(!empty($email)) {
        $yourEmail = 'c@bavotasan.com';
        $subject = 'Add me to your mailing list';
        $success = mail($yourEmail, $subject, $email);
        if(!empty($success)) {
            echo 'Your email is subscribed to our mailing list.';
        } else {
            echo 'There was a problem. Please try again.';
        }
    }
    die();
} ?>

<style>
.content { padding-left:150px;}
.output p {width:700px; height:auto;}
</style> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T18:22:17.483

我看到你的这个插件有几个问题。

首先，为什么你的 JavaScript 代码会附加到插件的顶部？在 WordPress 中包含 JS 的正确方法是将其放在单独的 .js 文件中，并通过使用 .js 将其加入队列来加载[`wp_enqueue_script()`](http://codex.wordpress.org/Function_Reference/wp_enqueue_script)。底部的样式也是如此。

一个例子如下：

```
function my_scripts_method() {
    wp_enqueue_script(
        'your-script-name',
        plugins_url( 'js/your-script.js' , __FILE__ ),
        array('jquery')
    );
}
add_action('wp_enqueue_scripts', 'my_scripts_method'); 
```

其次，您的 PHP 插件文件**不得**输出任何内容，这意味着您不应`?>`在标题后看到任何标签，因为这会输出一些换行符。

接下来，为了在你的静态 JS 文件中获取 admin-ajax-url，你应该使用这个函数：

```
wp_localize_script( 'ajax_get_permalink', 'ajax_get_permalink', array(
    ajax_url =>  admin_url( 'admin-ajax.php' )  
)); 
```

在您的 JS 文件中，您应该将主代码包装在一个在表单提交时调用的函数中。

```
function mailingListSubmit() {
    var data = {
        action: 'join_mailinglist',
        email: jQuery('#mailingListEmail')
    };

    jQuery("#mailinglistsubmit").hide();
    jQuery(".ajaxsave").show();
    jQuery.post(ajax_get_permalink.ajax_url, data,
    function(response){
        jQuery(".ajaxsave").hide();
        jQuery("#mailinglistsubmit").show();
    });
} 
```

最后，你的动作钩子也是错误的。您从法典（或谁知道在哪里）复制了它，但甚至懒得阅读文档。

```
add_action('wp_ajax_my_action', 'my_action_callback'); 
```

您需要更改`my_action_callback`以反映您的函数名称`join_mailinglist_callback`以及您在 JS 文件中定义的操作`wp_ajax_my_action`。`wp_ajax_join_mailinglist`

上述代码未针对语法错误进行测试，但应为您指明正确的方向。即使您复制并粘贴这些代码，您也不应该期望您的插件能神奇地工作。

在此处阅读有关 WordPress 插件中 AJAX 的更多信息：http: [//codex.wordpress.org/AJAX_in_Plugins](http://codex.wordpress.org/AJAX_in_Plugins)

# ruby - 创建依赖于另一个 Sinatra 扩展的 Sinatra 扩展

> ID：13729021
> 
> 赞同：1
> 
> 时间：2012-12-05T17:31:29.727
> 
> 标签：ruby, dependency-injection, sinatra, modularity

我正在将 sinatra 应用程序中的功能提取到扩展中。我的扩展模块 ( ) 依赖于另一个扩展模块 ( )`ExtensionBar`创建的类级 dsl 扩展的存在。`ExtensionFoo`因此，我的扩展程序在`require`我的主应用程序 d 时死亡。

my_app.rb：

```
require "extension_foo"
require "extension_bar"    

class MyApp < Sinatra::Base
  register ExtensionFoo
  register ExtensionBar
end 
```

extension_foo.rb：

```
module ExtensionFoo
  def with_foo
    yield
  end
end 
```

extension_bar.rb：

```
module ExtensionBar
  with_foo do
    "bar"
  end
end 
```

我的问题：我怎样才能最健壮、最简单地编写一个依赖于另一个扩展的注册表的扩展？我想尽可能避免元编程。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T17:34:19.650

在您给出的示例中，ExtensionBar 不会对任何应用程序执行任何操作。您还需要在您希望在应用程序中使用的扩展中注册依赖扩展。[编写模块](http://www.sinatrarb.com/extensions.html)的说明给出了一个`before`块作为 LinkBlocker DSL 的示例，这两者都会使您的示例更像这样：

```
# extension_foo.rb

require 'sinatra/base'

module Sinatra
  module ExtensionFoo
    def with_foo
      warn "Calling with_foo"
      s = yield
      warn "s = #{s}"
      s
    end
  end
  register ExtensionFoo
end

# extension_bar.rb

require 'sinatra/base'
require_relative 'extension_foo.rb'

module Sinatra
  module ExtensionBar
    before do
      warn "Calling with_foo in before"
      with_foo do
        "bar"
      end
    end
  end
  register ExtensionBar
end

# app.rb

require 'sinatra'
require_relative 'extension_bar.rb'

get "/" do
  with_foo do
    "blah"
  end.inspect
end 
```

当我运行它时，我没有收到错误，并且确实在我的 STDOUT 中看到了警告，并且输出为“blah”。

```
Calling with_foo in before
Calling with_foo
    from /Volumes/RubyProjects/Test/extension_dependency/extension_foo.rb:6:in `with_foo'
s = bar
    from /Volumes/RubyProjects/Test/extension_dependency/extension_foo.rb:8:in `with_foo'
Calling with_foo
    from /Volumes/RubyProjects/Test/extension_dependency/extension_foo.rb:6:in `with_foo'
s = blah
    from /Volumes/RubyProjects/Test/extension_dependency/extension_foo.rb:8:in `with_foo' 
```

# java - Android：SQLite 检查数据是否存在并更新

> ID：13729031
> 
> 赞同：2
> 
> 时间：2012-12-05T17:31:49.710
> 
> 标签：java, android, sqlite, sql-update

我现在确定我做错了什么，因为 java 和 SQLite 对我来说是新的。所以我需要检查用户何时向数据库输入新数据，如果存在这样的“day”和“week_type”的数据需要更新，否则创建新行。

```
 public long creatEntry(int day2, int week_type2,
                String desc2, String place2, String lessnum2) {
            // TODO Auto-generated method stub

            ContentValues cv = new ContentValues() ;    
            String update = "SELECT * FROM info WHERE day="+day2+" AND week_type="+week_type;
            Cursor cr = ourDatabase.rawQuery(update, null);
            if(cr!= null){
                cv.put(day, day2);
                cv.put(week_type, week_type2);
                cv.put(desc, desc2);
                cv.put(place, place2);
                cv.put(lessnum, lessnum2);
                return ourDatabase.update(DATABASE_TABLE,cv, day+ "=" +day2+ " AND "+week_type+ "=" +week_type2, null);
            }
            else{

            cv.put(day, day2);
            cv.put(week_type, week_type2);
            cv.put(desc, desc2);
            cv.put(place, place2);
            cv.put(lessnum, lessnum2);
            return ourDatabase.insert(DATABASE_TABLE, null, cv);
            }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T17:35:52.310

使用替换。它会先尝试插入，如果由于键约束而发生冲突，它将删除并插入这些值。在您的情况下，这两列必须是[唯一的](http://www.sqlite.org/lang_createtable.html)。一探究竟：

[http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html#replace(java.lang.String, java.lang.String, android.content.ContentValues)](http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html#replace%28java.lang.String,%20java.lang.String,%20android.content.ContentValues%29)

# python - 如何使用python修剪MySQLdb中的空白

> ID：13729037
> 
> 赞同：-1
> 
> 时间：2012-12-05T17:32:05.057
> 
> 标签：python, mysql-python, strip

我有一个 Web 表单，获取用户数据并将其放入 mysql 数据库。我需要修剪前导和尾随空格/空格。我目前正在使用 strip() 方法，但它只为字段修剪它们，而不是为 mysql 数据库修剪它们。

我的代码是：

```
first_name = first_name.strip()
last_name = last_name.strip() 
```

等等等等。它对网页来说非常好，但在将它输入 SQL 数据库时却没有。空间仍然存在。如何删除它们？

编辑：

```
 db = MySQLdb.connect("localhost","user","pass","db_name")
        cursor = db.cursor()
                cursor.execute("Select * FROM registrants")
                cursor.execute("INSERT INTO registrants VALUES( " + "'" + first_name + "'" + ", " + "'" + last_name + "'" + ");")
        db.commit()
        db.close() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T18:19:10.760

我认为您应该以不同的方式将值传递给 INSERT

```
cursor.execute("INSERT INTO registrants (fname, lname) VALUES (%s, %s)", (first_name, last_name) 
```

我不确定这是否是你得到空格的地方，但它打开了你的 sql 注入，所以将变量直接放入查询中是不好的形式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T19:07:06.520

这可能是范围问题。

如果剥离发生在不同的范围内（例如：first_name 是一个全局变量，而 strip() 发生在一个函数中），那么您将不会在另一个范围内从中受益（例如，如果插入发生在另一个函数中）。

您是否尝试过此测试：

```
cursor.execute("INSERT INTO registrants VALUES( " + "'" + first_name.strip() + "'" + ", " + "'" + last_name.strip() + "'" + ");") 
```

顺便说一句，你怎么知道数据库中有空间？检索或显示数据的方式可能存在问题。

# php - 无法从mysql PHP显示表格

> ID：13729039
> 
> 赞同：0
> 
> 时间：2012-12-05T17:32:15.453
> 
> 标签：php, mysql, html-table

我刚刚将我的数据库从我的在线网络服务器迁移到本地主机，包括我托管它的所有页面..

问题是表格不会显示哪个是从 mysql 数据库填充的，我为此苦苦挣扎了一天以获得解决方案。我认为问题是我的在线网络服务器与我的本地主机之间的 PHP 版本不同。然后我将数据库和页面移动到我的笔记本电脑上，PHP版本高于在线网络服务器PHP版本，问题仍然出现。

我不知道我的代码有什么问题，该页面在我的网络服务器中运行良好。connection.php 也是正确的。

这是我页面的**代码：**

```
<?php
$hostname_localhost ="localhost";
$database_localhost ="a3647822";
$username_localhost ="root";
$password_localhost ="";
$localhost = mysql_connect($hostname_localhost,$username_localhost,$password_localhost)
or
trigger_error(mysql_error(),E_USER_ERROR);

mysql_select_db($database_localhost, $localhost);
$sql = "select * from paket";
$result = mysql_query($sql);
$count=mysql_num_rows($result);
?>

bla
bla
bla until content

<table cellpadding="5" cellspacing="0" border="1">
  <tr>
   <th>id</th>
   <th>Nama Paket</th>      
   <th>Keterangan Paket</th>
   <th>Harga</th>   
   <th>Set Menu</th>                        
   <th>Edit</th>                
  </tr>
    <?php while($paket = mysql_fetch_array($result)){?>
  <tr>
      <td><?php echo $paket['id_paket'];?></td> 
      <td><?php echo $paket['nama_paket'];?></td>       
      <td><?php echo $paket['keterangan_paket'];?></td>
      <td><?php echo $paket['harga'];?></td>
      <td><input type="checkbox" name="chkDel[]" id="checkboxx" class="aku" value="<?=$paket["id_paket"];?>"></td>
      <td><a href="edit_data_paket.php?nama_paket='.$paket['nama_paket'].'">Edit</a></td>                </tr>
    <?php }?>
</table> 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T17:39:43.117

您是否尝试将结果行 (12) 更改为

```
$result = mysql_query($sql) or die(mysql_error()); 
```

查看查询是否抛出错误

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T17:40:43.930

不知道错误是什么很难说，但我认为问题出在这一行：

```
`<?php while($paket = mysql_fetch_array($result)){?>`
```

你应该使用：

```
`<?php while($paket = mysql_fetch_assoc($result)){?>`
```

这两条线几乎肯定也会引起问题：

```
`<td><input type="checkbox" name="chkDel[]" id="checkboxx" class="aku" value="<?=$paket["id_paket"];?>"></td>
<td><a href="edit_data_paket.php?nama_paket='.$paket['nama_paket'].'">Edit</a></td>`
```

需要是：

```
`<td><input type="checkbox" name="chkDel[]" id="checkboxx" class="aku" value="<?php echo $paket["id_paket"];?>"></td>
<td><a href="edit_data_paket.php?nama_paket=<?php echo $paket['nama_paket'];?>">Edit</a></td>`
```

# powershell - powershell 将文件添加到 zip

> ID：13729040
> 
> 赞同：5
> 
> 时间：2012-12-05T17:32:19.003
> 
> 标签：powershell, zip

我正在尝试使用 powershell 将文件添加到 zip 文件

我可以创建 zip 文件，但不知道如何将我的文件添加到其中

我正在使用

```
$zipfilename = 'c:\cwRsync\backup.zip'
$file = 'c:\cwRsync\backup.log'
set-content $zipfilename ("PK" + [char]5 + [char]6 + ("$([char]0)" * 18))
(dir $zipfilename).IsReadOnly = $false
$zipfile = (New-Object -ComObject shell.application).NameSpace($zipfilename)
$zipfile.MoveHere($file.FullName) 
```

这会创建 zip 文件，但不会添加新文件

我尝试了在stackoverflow上找到的以下代码，该代码有效

```
$zipfilename = "a.zip"
set-content $zipfilename ("PK" + [char]5 + [char]6 + ("$([char]0)" * 18))
$app = new-object -com shell.application
$zip = ( get-item a.zip ).fullname
$folder = $app.namespace( $zip )
$item = new-item file.txt -itemtype file -value "Mooo" -force
$folder.copyhere( $item.fullname ) 
```

但是添加了一个由 powershell 创建的文件，而我想添加一个现有文件

任何帮助将非常感激

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2021-06-22T06:44:17.303

要创建 zip 存档：

```
powershell Compress-Archive %file% %file%.zip 
```

要替换存档（使用不同的文件）：

```
powershell Compress-Archive -force %different_file% %file%.zip 
```

要将文件添加到（现有）存档：

```
powershell Compress-Archive -update %2nd_file% %file%.zip 
```

在 Win 10 CMD Powershell 5.1 上测试

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T20:01:52.543

该`CopyHere`函数只接受一个字符串，它是文件的路径。例如：

```
$folder.copyhere( "c:\PathToYourFile\YourFile" ) 
```

**提示：**

[Powershell Pack 模块](http://archive.msdn.microsoft.com/PowerShellPack)有一些有用的工具，其中之一是一个 zip 实用程序，它将您的代码减少到 1 行：

```
Copy-ToZip "c:\PathToYourFile\YourFile" -ZipFile a.zip 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2017-01-02T22:16:40.883

我从我的笔记中提取了这个。从脚本专家的网站上得到它，也许这会有所帮助......

```
$source = "D:\temp\test"
$destination = "d:\temp\csvdir_Backup.zip"
If(Test-path $destination) {Remove-item $destination}
Add-Type -assembly "system.io.compression.filesystem"
[io.compression.zipfile]::CreateFromDirectory($Source, $destination) 
```

# c# - 字符串，作为引用类型，行为类似于值类型

> ID：13729041
> 
> 赞同：0
> 
> 时间：2012-12-05T17:32:21.017
> 
> 标签：c#, string, reference, equality

```
 string s1 = "hi";
        string s2 = "hi";
        bool x = (s1 == s2);
        Console.WriteLine(bool.Parse(""+x)); //printed as true and my point of interest
        x = s1.Equals(s2);
        Console.WriteLine(bool.Parse("" + x));//printed as true
        s1 = s2;
        x = (s1 == s2);
        Console.WriteLine(bool.Parse("" + x));//printed as true
        x = s1.Equals(s2);
        Console.WriteLine(bool.Parse("" + x));//printed as true 
```

由于`s1==s2`比较引用，它应该返回为 false。但我得到的输出是真的。我仅在字符串的情况下观察到这一点。当对其他类的对象执行此操作时，它正确地评估为 false。为什么在字符串中观察到这种异常行为？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T17:35:13.703

这里有两件事。

首先是字符串类型重载了 == 运算符。== 运算符的引用比较只是*默认*行为。任何类型都可以重载该运算符以获得更好的语义。如果要保证引用相等，请使用该[`ReferenceEquals()`](http://msdn.microsoft.com/en-us/library/system.object.referenceequals.aspx)方法。

第二个是所谓的[interning](http://en.wikipedia.org/wiki/String_interning)，它允许具有相同值的两个不同字符串变量引用同一个对象。实习意味着即使没有重载 == 运算符，如果两个变量都实习了“hi”文字，则 == 和 ReferenceEquals() 比较仍然可以返回 true

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T17:33:48.850

> 由于 s1==s2 比较引用

这是一个错误的假设。你可以重载`==`操作符来做任何你想做的事情。

这是您如何为自己的课程重载它的方法，就像这样`String`做一样。

```
public class Foo
{
    public int Value { get; set; }
    public static bool operator ==(Foo first, Foo second)
    {
        return first.Value == second.Value;
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-05T17:34:20.643

[MSDN 字符串](http://msdn.microsoft.com/en-us/library/362314fe%28v=vs.71%29.aspx)

> 尽管字符串是一种引用类型，但相等运算符（== 和 !=）被定义为比较字符串对象的**值**，而不是引用（7.9.7 字符串相等运算符）。这使得对字符串相等性的测试更加直观。

# java - 接收 channelIdle 超过预期（Netty Socket Server）

> ID：13729045
> 
> 赞同：0
> 
> 时间：2012-12-05T17:32:35.277
> 
> 标签：java, sockets, jboss, netty

我在多人 Java 服务器上遇到问题，我收到的 channelIdle 事件超出预期。它始于 2 天前，我没有更改源代码和服务器配置。这可能是什么原因？在特定的时间间隔之间，许多人从空闲事件中立即退出服务器。我正在使用网络。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T18:35:18.237

看来问题是由于 ISP 错误而发生的。谢谢。

# java - 如果我使用单独的线程进行日志记录，它的性能会更好吗？

> ID：13729049
> 
> 赞同：1
> 
> 时间：2012-12-05T17:32:42.797
> 
> 标签：java, logging, slf4j

如果我以方法（信息、警告、调试......）的方式实现日志类或库，当在单独的线程中执行调用时，我的代码会运行得更快吗？

如果是，slf4j、log4j 或任何其他流行的库会这样做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T19:06:18.733

Log4j 根据 Appender 类型使用单独的线程。大多数情况下使用 FileAppender，它不涉及额外的线程。

而且我不建议您在单独的线程中使用日志记录，除非您对线程问题非常有经验。

# rtmp - RTMFP RTMP too slow on deployment

> ID：13729050
> 
> 赞同：0
> 
> 时间：2012-12-05T17:32:47.470
> 
> 标签：rtmp, flash-media-server, rtmfp

We have developed a 1-1 video conferencing solution using RTMP , RTMFP technologies using Adobe. We are making use of Flash Media Development Server for recording the web streams. We have tested our application locally and it seems to work good.

Thus, We deployed the application to our server but the latency is very high (like 15 seconds). I mean when i talk , the other party gets my voice after 15 - 20 seconds.

Could someone explain me what is the real problem behind this ? Do i have to purchase this [https://secure1.influxis.com/webrootv10/custom_enterprise/index.aspx](https://secure1.influxis.com/webrootv10/custom_enterprise/index.aspx)

**Application.xml** [http://www.2shared.com/document/PfMTpQsJ/Application.html](http://www.2shared.com/document/PfMTpQsJ/Application.html)

Thanks.

# youtube-api - Questions (beta)

> ID：13729053
> 
> 赞同：1
> 
> 时间：2012-12-05T17:32:54.663
> 
> 标签：youtube-api

I'm a professor and want to start making several short micro-lessons with embedded questions for my students to test their knowledge along the way. I've been researching some new Youtube beta features "Questions" and "Linking my Youtube Channel with my website (google site, google+, etc)

1.  I had access to the beta "Questions" option a few days ago and it's gone now. I can edit existing annotation which includes a true/false question I added, but I can no longer see the option to add new question. Can you help me?

2.  Can set up questions within the video that have a definite correct answer vs incorrect, and then sort through analytics to see how viewers did?

3.  Is there a way to have different outcomes for viewers depending on whether they answered correctly (congratulations screen) vs incorrectly(rewind and replay a section of the video, then repeat question)?

4.  Is there a way for viewers who complete the video and answer correctly to forward a "Congratulations screen" to their instructors for possible credit on assignments?

5.  Lastly, Is there a way to integrate Google presentation with YouTube video (e.g.create slideshow in "presentation" for easier conversion to video w/ voice)? Right now I use a three step process: 1) create presentation in PPT, 2) voiceover the slides and make a video in "Captivate", then 3) upload to Youtube. Thank you so much

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T20:31:27.870

我认为您的问题与 YouTube API 无关。

话虽如此，我们确实为一个开源项目准备了这篇博文和教程视频，该项目将 YouTube 视频内容与测验内容集成在一起：http: [//apiblog.youtube.com/2012/06/google-io-tutorials-using- ruby-on-rails.html](http://apiblog.youtube.com/2012/06/google-io-tutorials-using-ruby-on-rails.html)

# javascript - urlrewriting 时 PageMethods 中断

> ID：13729055
> 
> 赞同：0
> 
> 时间：2012-12-05T17:32:58.377
> 
> 标签：javascript, asp.net, pagemethods

我在 javascript 函数中使用 PageMethods 来调用代码隐藏中的方法。如果我不使用 urlrewriting，它会完美运行。如果我使用它，它会破坏此代码

```
PageMethods.myMethod(parameters, onSuccess, onFailed); 
```

这就像只刷新 aspx 页面。它仅调用 page_load。

我使用了类似的重写规则

```
<rewrite url="~/uso/(.+).aspx" to="~/uso/$1.aspx" processing ="stop"/> 
```

如您所见，我重定向到页面本身。但是它仍然打破它。我使用智能重写器。你认为它可能与那个 urlrewriter 模块有关吗？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T15:36:49.270

无论如何，我找到了另一种调用 WebMethod 的方法。我使用了网络服务。

# php - Get url of page (not yours) in a string

> ID：13729059
> 
> 赞同：1
> 
> 时间：2012-12-05T17:33:08.420
> 
> 标签：php, parsing, url

Wikipedia has a feature called Special:Random that when added to the end of "http://en.wikipedia.org/wiki/" will direct to a random page. For a website that I am making, I would like to be able to obtain a 'random' wikipedia article url, and after that, I can just parse the url to get the article name. I don't want the url I receive in a string to have Special:Random in it but the article name. Any ideas on how I may be able to implement this?

# vba - Updating a table in access if there has been an update in another table

> ID：13729063
> 
> 赞同：1
> 
> 时间：2012-12-05T17:33:16.680
> 
> 标签：vba, ms-access, listener

I just want to add a backend listener to my table in access in such a way that, if there is an update in one table, the other table should be automatically updated.

For example, There is a table A, for which a text file is the input data. Every night a new text file will be pushed to the folder, according to which the content in table A will change(ex., for an employee id, the department will be updated through the text file). So whenever there is an update in table A, the department in table B has to be automatically updated. Table A and B are already created without any links. How do I add a backend listener in this case. Please help. P.S: I am new to access, I only have worked with sql server

Thanks in Advance.

# javascript - Load html in div and then remove it

> ID：13729069
> 
> 赞同：0
> 
> 时间：2012-12-05T17:33:33.843
> 
> 标签：javascript, jquery, html, load, webaddress

I'm a beginner in Javascript and I struggle with a problem for a while. I want to open a new content in an existing `div` from another local html document. So in main content I have a simple list of projects and when I click on one project I want it to open in same the `div` '#content' as my projects. For this I use code:

```
$(document).ready(function() {
    $('a.th-link').click(function() {
        var url = $(this).attr('href');
        $('#content').html('<h4>Loading...</h4>').load(url+ '#mynewdiv');
        $.getScript('js/jquery.js'); 
        $.getScript('js/jquery.horizontal.scroll.js'); 
        $.getScript('js/jquery.mousewheel.js'); 
        $(url).remove();
        return false;
    });
 }); 
```

The problem is when I want to go back to my main `div` with projects '#content', with back-button on mouse or with browser, I stuck on other `div` '#mynewdiv', or I get to the previous open site. Can anybody help with the code?

I'm still dealing with this problem. I found a rough example that is similar to mine and I have transformed it, to work like I want, but still doesn't work as it should. To refresh my problem.

I want to open in certain div, a new html page and it will work back button.

I also tried benalman bbq but I can't figure out, what I'm doing wrong.

Here is what I'm doing

```
 <!DOCTYPE html>
<html lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>TEST</title>
    <script src="http://www.google.com/jsapi"></script>
    <script type="text/javascript">
    google.load("jquery", "1.4.1");
    </script>
    <script src="jquery.address-1.1.min.js"></script>

    <script type="text/javascript">
    /*<![CDATA[*/
    $("document").ready(function(){

        function loadURL(url) {
            console.log("loadURL: " + url);
            $("#area").load(url);
        }

        // Event handlers
        $.address.externalChange(function(event) {
console.log("init: " + $('[rel=address:' + event.value + ']').attr('href'));
$("#area").load($('[rel=address:' + event.value + ']').attr('href'));
}).change(function(event) {
console.log("change");
});

        $('a.test').click(function(){
            loadURL($(this).attr('href'));
        });

        });

    /*]]>*/
    </script>

<style type="text/css">
#area {border-style:solid;
border-width:5px;
height:300px;
width:100%;}
</style>

</head>
<body>
<p>Test</p>
    <div id="area">

    <a class='test' href="test1.html" rel="address:/test1">Test 1</a> <br />
    <a class='test' href="test2.html" rel="address:/test2">Test 2</a> <br /> <br /> <br />

</body>
</html> 
```

Thanks for the answer

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T17:43:55.423

`.load()`获取数据并将其显示在同一站点上。浏览器永远不会改变页面。因此，当您单击返回时，浏览器将转到上一个打开的站点。

您可以使用像[jQuery Address](https://github.com/asual/jquery-address)这样的插件来模拟您想要的行为。

# javascript - 尝试对齐不同大小的div的位置，以便它们之间不会有任何空格

> ID：13729070
> 
> 赞同：1
> 
> 时间：2012-12-05T17:33:36.067
> 
> 标签：javascript, html, css, jquery-masonry

请不要将我的问题视为重复。我只是没有成功尝试[使用 CSS 显示不同大小的 div](https://stackoverflow.com/questions/11387625/display-divs-with-different-sizes-with-css)

正如上面帖子中所建议的，我使用了**Masonry**。但未能让它发挥作用。我正在使用代码点火器。

**这是我正在使用的CSS**

```
#container {
    width:90%;
    margin:3% 0px 0px 10%;
}
.item {
    margin:10px 10px 10px 10px;
    float:left;
    width:240px;
    border:5px solid #f0f0f0;
    background-color:#d2dbde;
    border-radius:5px;
} 
```

**Javascript 和 js 文件**

```
<!-- include js files -->
<script type="text/javascript" src="http://www.myappdemo.com/KarmakExpo/js/jquery.min.js"></script>
<script type="text/javascript" src="http://www.myappdemo.com/KarmakExpo/js/jquery.masonry.min.js"></script>
<script type="text/javascript">
    $(function() {
        $('#container').masonry({
        // options
        itemSelector : '.item'
    });
});
</script> 
```

**内容**

```
<div id="container">
    <div class="item">
        <div id="usericon" style="width:240px;height:30px;">
        <!-- content -->
        </div>
        <div id="name">
        <!-- content -->
        </div>
    <div>
    <a href="<?php echo $link; ?>">
        <img src="<?php echo $picture = ($picture == null) ? '' : $picture; ?>" width="240px" height="auto">
    </a>
</div> 
```

我在 div 部分显示图像、名称、日期等

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-11T03:21:01.867

# 动态 div 放在他们的位置

[JsFiddle - 演示](http://jsfiddle.net/FredGandt/nyHfC/)（列数取决于文档*窗口*的宽度）。

因为看起来你有常规宽度的 div，你可以尝试这样的事情：

**注意**：自从第一次回答这个简单的演示脚本以来，我已经大大改变了链接的 jsFiddle 演示。它现在几乎与此代码相似，但基本内容几乎相同。

## CSS有点像这样

```
div.column {
    display:inline-block; /* "Columns" should be only as wide as their setting, */
    vertical-align:top;   /* should sit next to each other horizontally, */
    width:240px;          /* and be vertically aligned. */
    height:auto;
    margin:10px 0px 10px 10px;
}
div.column div.row {
    width:240px;          /* All "row" divs are of the same width, */
    height:auto;          /* but of varying heights */
    margin:0px 0px 10px 0px;
    padding:0px;
    background-color:#00f0f0;
} 
```

## JavaScript 有点像这样

```
(function () {
    var tdw = 240 + 0 + 10; // Div width + margin-left + margin-right
    window.addEventListener("load", function () {
        var ww = window.innerWidth, // how much width to play with?
            cn = Math.floor(ww / tdw), // how many columns will fit?
            cdl = [], // memory
            lc = 0, // alternation
            c = 0, // iteration
            ncd; // element object
        while (c++ < cn) {
            ncd = document.createElement("div"); // create columns
            ncd.setAttribute("class", "column"); // set their class
            document.body.appendChild(ncd); // add to page
            cdl.push(ncd); // remember them
        }
        c = 0;
        while (c++ < 100) { // this for demo // loop until there're no more
            ncd = document.createElement("div"); // create your divs
                // this could be where you add your div content
            ncd.setAttribute("class", "row"); // set their class
            lc = lc < cdl.length ? lc : 0; // alternate column as parent
            cdl[lc++].appendChild(ncd); // add the div to the column
            ncd.style.height = (200 * Math.random()) + "px"; // this for demo
                // or you could add the content via innerHTML
        }
    }, false);
}());​ 
```

这个答案是在假设很多的同时放在一起的。有了问题的更多细节，我本可以提供更完整的答案。

# 自从被要求解释...

据我了解这个问题，它是找到一种方法来获取动态信息（从不相关的地方提取），并用它填充 div。这些 div 中的每一个都将设置在*页面*上的列中（大概在“提要”容器或类似容器中）。由于这些（我们称它们为“infodivs”）infodivs 的宽度是固定的，我们可以创建固定宽度的列来包含它们。现在 div 可以自由地设置它们需要的任何高度（根据它们包含的信息），并且在它们的 parent 内简单地堆叠在一起`div.column`。

在页面上`load`，我们测量可用宽度（在实时版本中考虑偏移等），并计算水平适合多少列，然后创建这些列。为了节省对 DOM 的读取和重新读取，我们可以将列存储到数组中以便以后查找。

创建列后，我们可以自由地将动态创建的 infodiv 添加到列中，循环遍历列查找数组，为每个新的 infodiv 使用每个渐进列（在屏幕上从左到右）。一旦我们到达最后一列，我们将查找计数器设置回零，并继续加载 infodiv。

该方法导致每列填充大致相等数量的信息 div（取决于数学）。然而，没有检查每个 infodiv 的高度，因此任何列的内容都可能比其他列长得多。解决此问题的一种方法是在创建每个新 infodiv 时测量每列的高度，然后将该 infodiv 添加到最短的列中。这将导致列在高度上保持更接近相等。

**注意**：连接到此答案的演示 jsFiddle 现在包含一个基本功能，可在创建 infodiv 时动态测量列高。为了准确读取列高，每个图像都附加了一个临时`onload`侦听器，该侦听器触发下一个 infodiv 的创建。侦听器一完成就被删除，它的工作是释放资源。这种方法会减慢整个页面的加载速度，但还不够不切实际。根据*实际*情况，可能更需要更快的不太准确的加载。在这种情况下，丢弃图像的`onload`侦听器并按需创建 infodiv，而不管先前创建的那些状态如何。

**进一步动态测量**：`onscroll`仅当访问者滚动到结束他们已经看到的。这将有助于减少服务器压力并增加浏览器响应。另外：加载访问者可能永远不会滚动查看的内容是没有意义的。

所以伪术语的代码类似于：

```
屏幕有多宽？
制作（屏幕宽度除以列宽）列。
当我们创建新的 infodiv 时，将它们添加到列中。
不要将它们全部添加到一列中，而是平等地共享它们。
```

最终结果是动态创建的等宽信息 div，但高度不同，以列化方式布局。他们的自然倾向是尽可能地比他们的父母高，所以他们总是坐在他们上方的 infodiv 下方。

由于列的显示属性设置为`inline`，因此它们倾向于并排放置，以便它们有空间。需要注意的是，如果列的父列的宽度减小（在创建初始布局之后），最右边的列将被推到其同伴列的下方。

至于 PHP - 那是另一个故事 :-)

# c# - 在线段 AB 上找一点 C，使得线段 DC 垂直于 AB。D是C#中线段外的一个点

> ID：13729072
> 
> 赞同：1
> 
> 时间：2012-12-05T17:33:42.530
> 
> 标签：c#, geometry

我正在尝试在`C#`. 为此，我有一个点和一个线段。我只需要一个`perpendicular point C`使线段`CD`垂直于`AB`. [http://puu.sh/1xrxQ](http://puu.sh/1xrxQ)这是场景。点在移动，所以我每次都需要计算它。我是 c# 新手，所以我不知道它是如何工作的。

这是我到目前为止所尝试的让它工作。

```
private double DotProduct(Point pointA, Point pointB, Point pointC)
{
    Point AB = new Point();
    Point BC = new Point();
    AB.X = pointB.X - pointA.X;
    AB.Y = pointB.Y - pointA.Y;
    BC.X = pointC.X - pointB.X;
    BC.Y = pointC.Y - pointB.Y;
    double dot = AB.X * BC.X + AB.Y * BC.Y;

    return dot;
}

//Compute the cross product AB x AC
private double CrossProduct(Point pointA, Point pointB, Point pointC)
{
    Point AB = new Point();
    Point AC = new Point();
    AB.X = pointB.X - pointA.X;
    AB.Y = pointB.Y - pointA.Y;
    AC.X = pointC.X - pointA.X;
    AC.Y = pointC.Y - pointA.Y;
    double cross = AB.X * AC.Y - AB.Y * AC.X;
    return cross;
}

//Compute the distance from A to B
double Distance(Point pointA, Point pointB)
{
    double d1 = pointA.X - pointB.X;
    double d2 = pointA.Y - pointB.Y;

    return Math.Sqrt(d1 * d1 + d2 * d2);
}

//Compute the distance from AB to C
//if isSegment is true, AB is a segment, not a line.
double LineToPointDistance2D(Point pointA, Point pointB, Point pointC, bool isSegment)
{
    double dist = CrossProduct(pointA, pointB, pointC) / Distance(pointA, pointB);
    if (isSegment)
    {
        double dot1 = DotProduct(pointA, pointB, pointC);
        if (dot1 > 0)
            return Distance(pointB, pointC);

        double dot2 = DotProduct(pointB, pointA, pointC);
        if (dot2 > 0)
            return Distance(pointA, pointC);

     }
     return Math.Abs(dist);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T18:57:51.290

未经测试，但在数学上这应该有效

```
Point intersectionPoint(Point A, Point B, Point C) {
    //check for slope of 0 or undefined
    if (A.Y == B.Y) return new Point (C.X, A.Y);
    if (A.X == B.X) return new Point (A.X, C.Y);
    //slope = (y1 - y2) / (x1 - x2)
    double slopeAB = (A.Y - B.Y) / (A.X - B.X);
    //perpendicular slope is the negative reciprocal
    double slopeCD = -1 / slopeAB;
    //solve for b in y = mx + b of each line
    //  b = y - mx
    double bAB = A.Y - slopeAB * A.X;
    double bCD = C.Y - slopeCD * C.X;
    double dX, dY;
    //intersection of two lines is m1x + b1 = m2x + b2
    //solve for x: x = (b2 - b1) / (m1 - m2)
    //find y by plugging x into one of the equations
    dX = (bCD - bAB) / (slopeAB - slopeCD);
    dY = slopeAB * dX + bAB;
    return new Point(dX, dY);
} 
```

# sql-server - 根据表参数中的数据更新表的存储过程

> ID：13729073
> 
> 赞同：1
> 
> 时间：2012-12-05T17:33:44.990
> 
> 标签：sql-server, tsql

我想首先声明我是一个 SQL 菜鸟，因此在尝试解决此问题时，我将不胜感激有关我的工作流程和/或心态的任何建议或意见。

我正在做的是收集几个应用程序的使用统计信息，在几个类别中（并非所有类别都一定适用于所有应用程序），并将它们存储在数据库中。

我已经设置了几个表来做到这一点，然后一个表将所有结构链接在一起（从现在开始：**Dtable**）：

```
(column name - details)  
UserID  - foreign key to another table which stores users data  
ApplicationID - foreign key to another table which stores applications data  
CategoryID - foreign key to another table which holds a list of different categories  
Value - the actual data 
```

每个应用程序收集数据，然后使用存储过程将其提交到数据库。由于数据量可能会根据实际使用情况（并不总是发送每个类别）和每个应用程序而有所不同，我正在考虑将数据作为带有*CategoryID*和*Value*列表的 DataTable 发送，因此我不必调用每个单独类别的程序（**Ptable**）。

我需要根据*CategoryID将***Dtable中的每条记录更新为****Ptable**中的正确值，但还要按*UserID*和*ApplicationID*过滤。*UserID*和*ApplicationID*将作为其他两个参数提供给存储过程。**Ptable**仅包含*CategoryID* / *Value*记录的列表。

 *******现在，我读到了游标（为表参数中的每条记录设置数据库表中的相关数据），但共识似乎是“不惜一切代价避免”。

那么，我将如何根据**Ptable**中的不同记录来更新表？

PS
这些表格的结构是这样的，以便在将来添加更多类别/应用程序时保持敏捷性和可扩展性。如果有更好的方法，我会很高兴知道。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T20:18:23.090

我相信更新语句看起来像这样，存储过程的其他参数在哪里`@ApplicationID`以及是：`@UserID`

```
update Dtable
    set Dtable.Value = p.Value
    from Ptable p
    where Dtable.UserID = @UserID
        and Dtable.ApplicationID = @ApplicationID
        and Dtable.CategoryID = p.CategoryID; 
```*******

# java - Java拖放自定义光标

> ID：13729078
> 
> 赞同：2
> 
> 时间：2012-12-05T17:33:57.630
> 
> 标签：java, swing, jpanel, drag-and-drop, java-canvas

我使用 JPanel 定义了一个自定义画布样式组件，它将支持将对象拖到画布上。我似乎无法弄清楚如何使用 TransferHandler 将拖放（DnD）光标更改为自定义光标。例如，我想替换我自己的，而不是 DnD 期间的默认链接光标。有没有办法使用 TransferHandler 做到这一点？

我怀疑我将不得不使用 AWT DnD 支持来执行此操作，但如果可以的话，我希望避免这种情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T20:24:06.307

通过深入研究 TransferHandler 代码，我找到了解决方法。dragOver 方法是我更改光标的地方。我仍然认为我可能会遗漏一些简单的东西，但这暂时可以使用。

这两个静态类以及 exportAsDrag 中的代码是来自 TransferHandler 源代码的轻微修改副本。

*编辑*- 这就是我的工作方式。希望这可以帮助。欢迎提出建议。

```
 public class OverrideIconTransferHandler extends TransferHandler {
    private class MyDragGestureRecognizer extends DragGestureRecognizer {

        private static final long serialVersionUID = 1L;

        MyDragGestureRecognizer(DragGestureListener dgl) {
            super(DragSource.getDefaultDragSource(), null, NONE, dgl);
        }

        void gestured(JComponent c, MouseEvent e, int srcActions, int action) {
            setComponent(c);
            setSourceActions(srcActions);
            appendEvent(e);
            fireDragGestureRecognized(action, e.getPoint());
        }

        @Override
        protected void registerListeners() {
        }

        @Override
        protected void unregisterListeners() {
        }

    }

    private class MyDragHandler implements DragGestureListener, DragSourceListener {

        private boolean scrolls;

        @Override
        public void dragDropEnd(DragSourceDropEvent dsde) {
            DragSourceContext dsc = dsde.getDragSourceContext();
            JComponent c = (JComponent) dsc.getComponent();
            if (c.getTransferHandler() instanceof OverrideIconTransferHandler) {
                OverrideIconTransferHandler t = (OverrideIconTransferHandler) c.getTransferHandler();
                if (dsde.getDropSuccess()) {
                    t.exportDone(c, dsc.getTransferable(), dsde.getDropAction());
                } else {
                    t.exportDone(c, dsc.getTransferable(), NONE);
                }
            }
            c.setAutoscrolls(scrolls);
        }

        @Override
        public void dragEnter(DragSourceDragEvent dsde) {
        }

        @Override
        public void dragExit(DragSourceEvent dsde) {
        }

        @Override
        public void dragGestureRecognized(DragGestureEvent dge) {
            JComponent c = (JComponent) dge.getComponent();
            if (c.getTransferHandler() instanceof OverrideIconTransferHandler) {
                OverrideIconTransferHandler th = (OverrideIconTransferHandler) c.getTransferHandler();
                Transferable t = th.createTransferable(c);
                if (t != null) {
                    scrolls = c.getAutoscrolls();
                    c.setAutoscrolls(false);
                    try {
                        Image im = th.getDragImage();
                        if (im == null) {
                            dge.startDrag(null, t, this);
                        } else {
                            dge.startDrag(null, im, th.getDragImageOffset(), t, this);
                        }
                        return;
                    } catch (RuntimeException re) {
                        c.setAutoscrolls(scrolls);
                    }
                }

                th.exportDone(c, t, NONE);
            }
        }

        @Override
        public void dragOver(DragSourceDragEvent dsde) {
            if (dropCursorOverrides.containsKey(dsde.getDropAction())) {
                dsde.getDragSourceContext().setCursor(dropCursorOverrides.get(dsde.getDropAction()));
            } else {
                dsde.getDragSourceContext().setCursor(null);
            }
        }

        @Override
        public void dropActionChanged(DragSourceDragEvent dsde) {
        }
    }

    private static final long serialVersionUID = 1L;
    private MyDragGestureRecognizer myRecognizer = null;
    private final Map<Integer, Cursor> dropCursorOverrides = new HashMap<>();

    public void addDropCursorOverride(final int action, final Cursor cursor) throws IllegalArgumentException {
        if (!(action == COPY || action == MOVE || action == LINK || action == NONE)) {
            throw new IllegalArgumentException("Unknown Action Type");
        }
        dropCursorOverrides.put(action, cursor);
    }

    @Override
    public void exportAsDrag(JComponent comp, InputEvent e, int action) {
        if (comp.getTransferHandler() instanceof OverrideIconTransferHandler) {
            int srcActions = getSourceActions(comp);

            if (!(e instanceof MouseEvent) || !(action == COPY || action == MOVE || action == LINK) || (srcActions & action) == 0) {

                action = NONE;
            }

            if (action != NONE && !GraphicsEnvironment.isHeadless()) {
                if (myRecognizer == null) {
                    myRecognizer = new MyDragGestureRecognizer(new MyDragHandler());
                }
                myRecognizer.gestured(comp, (MouseEvent) e, srcActions, action);
            } else {
                exportDone(comp, null, NONE);
            }
        } else {
            super.exportAsDrag(comp, e, action);
        }
    }

    public void removeDropCursorOverride(final int action) throws IllegalArgumentException {
        if (!(action == COPY || action == MOVE || action == LINK || action == NONE)) {
            throw new IllegalArgumentException("Unknown Action Type");
        }
        dropCursorOverrides.remove(action);
    }
} 
```

# ruby-on-rails - 带有 CSS 和 javascript 的 Rails gem

> ID：13729081
> 
> 赞同：2
> 
> 时间：2012-12-05T17:34:05.587
> 
> 标签：ruby-on-rails, ruby, rubygems

我有一个简单的 rails gem（使用 bundler 创建），我想通过添加一些 CSS 和 javascript 功能来扩展它。但是，我不确定如何去做以及在哪里添加文件。特别是，我需要更多信息，了解一旦它被包含在另一个项目中，它如何与资产管道结合在一起。

谁能告诉我这是如何工作的，或者提供一些简单的例子或者链接到教程？从字面上看，我希望包含 1 个 css 和 1 个 js 文件。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T17:39:51.917

您可以将 gem 编写为引擎。这允许您`app`在 gem 中拥有一个文件夹，就像任何 Rails 应用程序一样。您可以添加模型、视图、控制器、资产等。

一旦你设置好它，它就会非常直观，如果你习惯于创建 Rails 应用程序，这是一种创建 gem 的熟悉方法。

这应该让你开始： [http ://coding.smashingmagazine.com/2011/06/23/a-guide-to-starting-your-own-rails-engine-gem/](http://coding.smashingmagazine.com/2011/06/23/a-guide-to-starting-your-own-rails-engine-gem/)

# php - strpos() Returning wrong result

> ID：13729086
> 
> 赞同：-4
> 
> 时间：2012-12-05T17:34:28.303
> 
> 标签：php, strpos

My issue is I have two numbers in the array 5,12 my issue is the code below is returning "1" as true because of the "1" in number 12- it sees the number 1 in 12\. How do I tell it to read the ENTIRE number.

```
<?php 
$pos = strpos($foo,"1");

if($pos === false) {
    // do this if its false
    echo "<img src='../PICS/no.png' width='20' height='20' />"; 
}
else {
    echo "<img src='../PICS/yes.png' width='20' height='20' />"; 
} 
?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T17:46:06.063

这是您正在使用的函数的签名：

> int strpos (**字符串**$haystack , 混合 $needle [, int $offset = 0 ] )

如果你用一个数组作为第一个参数来喂它......

```
<?php
$foo = array(5,12);
$pos = strpos($foo,"1"); 
```

...数组将被转换为字符串，您会收到通知...

> 警告：strpos() 期望参数 1 是字符串，给定数组

结果字符串将包含“Array”，字面意思是：

```
var_dump( @(string)array(5,12) ); // string(5) "Array" 
```

而且您的搜索`1`将始终失败，因为`Array`不包含它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-05T17:38:54.517

利用**[`in_array()`](http://php.net/manual/en/function.in-array.php)**

```
if (in_array(1,$myarray)){
    // found in the array
} 
```

# android - ANDROID - 在 android 手机/平板电脑中更改语言时清除数据库/缓存

> ID：13729088
> 
> 赞同：0
> 
> 时间：2012-12-05T17:34:39.970
> 
> 标签：android

我开发了一个支持法语和英语的应用程序。应用程序正在从 API 获取数据。

我正在使用以下代码来存储同步的最后更新时间。

```
 public static long getLastUpdatedTime(Context ctx) {
    SharedPreferences sharedPref = PreferenceManager.getDefaultSharedPreferences(ctx);
    return sharedPref.getLong(PREF_LAST_UPDATED_TIME, 0);
}

public static void updateLastUpdatedTime(Context ctx, Long time) {
    SharedPreferences sharedPref = PreferenceManager.getDefaultSharedPreferences(ctx);
    SharedPreferences.Editor ed = sharedPref.edit();
    ed.putLong(PREF_LAST_UPDATED_TIME, time);
    ed.commit();
} 
```

应用程序运行良好，但如果用户更改手机/平板电脑中的语言，则上述存储值不会被清除。当用户从一种语言切换到另一种语言时，我想清除缓存。

是否可以？

我想这样做是因为我在同步时将上次更新的服务器时间附加到 URL。

```
timefromcache = getLastUpdatedTime(context);
synchurl = www.xyz.com/data/customers/?time=timefromcache 
```

我想在更改手机/平板电脑语言的同时从服务器获取语言特定的数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T17:59:45.107

好吧，您可以通过以下方式简单地检查设备的语言：

```
Locale.getDefault().getLanguage(); 
```

这应该返回例如“DE”或“PL”。然后可以将这个保存在`SharedPreferences`. 每次您的应用程序启动（或者甚至可能`onResume()`在您的所有活动中）时，您都应该检查当前设备语言是否等于来自`SharedPreferences`. 如果不是，你应该清除你的缓存/数据库/任何东西。

# c# - SerializationException：类型未解析成员“...”

> ID：13729089
> 
> 赞同：16
> 
> 时间：2012-12-05T17:34:43.667
> 
> 标签：c#, appdomain

我一直在尝试将程序集动态加载到 AppDomain。我需要这样做，因为我想动态调用一个方法，但不要在我的应用程序运行时保留 DLL 的句柄，以便在需要时可以替换它。但我收到了这个 SerializationException 异常：类型未解析成员“...”

这是我的代码：

```
AppDomain domain = AppDomain.CreateDomain("Temp AppDomain", null, AppDomain.CurrentDomain.SetupInformation);
try {
    object obj = domain.CreateInstanceFromAndUnwrap(dllPath, typeName);
    IMyInterface myObj = (IMyInterface) obj;
    result = myObj.MyMethod(something);
} 
finally {
    AppDomain.Unload(domain);
} 
```

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-12-11T15:14:32.467

答：类型必须扩展`MarshalByRefObject`。

# c# - How to draw attention to the current mouse location?

> ID：13729092
> 
> 赞同：0
> 
> 时间：2012-12-05T17:34:58.627
> 
> 标签：c#, .net, input, mouse

We have an app that hides the desktop icons when the keyboard/mouse are idle for longer than 15 seconds. When the user starts using either of these devices again, we would like to draw their attention to the location of their mouse, much akin to how the CTRL key can be enabled to circle the mouse in Windows.

Are there any similar functions or suggestions I could use to perform such a task? I find working with the mouse in a global fashion (Anywhere on the desktop, not just on our app) very difficult.

Thanks very much for the suggestions!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T17:49:38.747

1) 使用间隔为 15 秒的计时器；

2）在屏幕上保存当前鼠标位置： [Getting mouse position in c#](https://stackoverflow.com/questions/1316681/getting-mouse-position-in-c-sharp)

3) 当计时器达到 15 秒时，再次检查鼠标位置。如果已更改，请更新当前鼠标位置。如果它没有改变，在鼠标位置在屏幕上画一些东西（你也需要清理它）： [How do I draw graphics in C# without a form](https://stackoverflow.com/questions/7897307/how-do-i-draw-graphics-in-c-sharp-without-a-form)

这不是最佳选择，但如果鼠标在 15 秒内移动，它不太可能在 15 秒内回到原来的位置。

# java - Keeping track of scores in Java

> ID：13729093
> 
> 赞同：0
> 
> 时间：2012-12-05T17:35:04.263
> 
> 标签：java

I'm new to Java and I'm currently writing a program for an assignment that represents a 'sports league' (classes to represent player/club/match/league)

My main problems are occurring in the league class. Here are the relevant variables to give you an idea how I'm storing things:

```
public class League 
{
    private String leagueName;
    private ArrayList<Club> clubs;
    private ArrayList<Match> fixtures;
    private ArrayList<String> results2;
    private TreeMap<Match, String> results;
    private String topTeam;
    private String goldenBoot;

} 
```

Currently trying to write a method in the League class which will print a 'league table' - i.e. a list of Clubs sorted by their points tally (held as variable in Club class) and I'm drawing a blank on it.

Further to this, I need to write two methods to find the top scorer (golden boot) and find the top team in the league; again I am drawing a blank. Perhaps I am overcomplicating things?

**Would be very grateful for suggestions/sample methods**

EDIT:

Ok, so that method I'm trying to write is something beginning with:

```
public void getLeagueTable() {
    for(Club c : clubs) {
        c.getTally();
    }
} 
```

which would give the tally value for each Club object - but how to sort these results, and how to associate the highest with one Club is what's really troubling.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T17:43:07.107

要打印联赛表，您需要对俱乐部数组进行排序，然后遍历每个项目并打印俱乐部名称。

要对俱乐部数组进行排序，请尝试使用 Collections.sort [http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Collections.html](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Collections.html)

..这是假设您没有被告知要实现自己的算法

同样，要获得最佳球队和最佳射手，需要进行更多排序，然后您需要从排序列表中选择最上面的项目。

希望有帮助...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T17:45:25.463

你最好使用`Set`而不是`ArrayList`. 这是您问题的一个良好开端：

```
void printLeagueTable(){

    i = 0 ;
    while( i != clubs.size() ){
         Club club = clubs.get(i);
         System.out.println("club: "+i+ "points: " club.points() );  
    }

} 
```

# java - Initializing ArrayList in a test driver

> ID：13729094
> 
> 赞同：0
> 
> 时间：2012-12-05T17:35:04.997
> 
> 标签：java, enums, arraylist, playing-cards

I'm trying to initialize a new instance of the ArrayList defined in my playingCard.java file:

```
import java.util.ArrayList;

public class PlayingCard 
{

    public enum Value { Two, Three, Four, Five, Six, Seven, Eight, Nine, Ten,
        Jack, Queen, King, Ace}

    public enum Suit { Spades, Diamonds, Hearts, Clubs }

    private final Value value;

    private final Suit suit;

    /**
    * Constructs a card with specified initial value and suit
    * @param value
    * @param suit 
    */

    public PlayingCard(Value value, Suit suit) 
    {
        this.value = value;
        this.suit = suit;
    }

    /**
     * Retrieves the value of a card
     * @return value
     */

    public Value getValue() 
    { 
        return value; 
    }

    /**
     * Retrieves the suit of the card
     * @return suit
     */

    public Suit getSuit() 
    { 
    return suit; 
    }

    /**
    * Custom toString
    *@return value and suit as a string.
    */

    @Override
    public String toString() 
    { 
        return "PlayingCard[value=" + value + ", suit=" + suit + "]"; 
    }

    /**
     * Format method to print out the value and suit of a card.
     * @return value and suit as a string.
     */

    public String format()
    {
        return value + " of " + suit + ", ";
    }

    /*private static final List<PlayingCard> deck = new ArrayList<PlayingCard>();

    // Initialize deck
    static 
    {
        for (Suit suit : Suit.values())
        {
            for (Value value : Value.values())
            {
                 deck.add(new PlayingCard(value, suit));
            }
        }
    }*/
} 
```

If the last 12 or so lines aren't commented out, there is no problem with the code. However I want to initialize the deck in a separate test driver and receive 2 errors when copying the code over. The test driver currently looks like this:

```
import java.util.ArrayList;

public class PlayingCardTester 
{
public static void main (String[] args)
{
    static  List<PlayingCard> deck = 
        new ArrayList<PlayingCard>();

    // Initialize deck
    static 
    {
        //for ea PlayingCard.Suit suit in PlayingCard.Suit.values()
        for (PlayingCard.Suit suit : PlayingCard.Suit.values())
        {
            for (PlayingCard.Value value : PlayingCard.Value.values())
            {
                deck.add(new PlayingCard(value, suit));
            }
        }

    }
}
} 
```

I have an error on line 14 of the test driver

```
static  List<PlayingCard> deck = new ArrayList<PlayingCard>(); 
```

saying it's an illegal start of expression. I've tried using different keywords in front of the statement and the error stays the same. The second error is the last bracket which just says "null". I am new to using enums, so it could be something very simple which I've over looked...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T17:38:12.297

您不需要`static`在静态方法中声明。

```
List<PlayingCard> deck = new ArrayList<PlayingCard>(); 
```

`Static Block`由于您已经处于静态上下文中，因此也不需要。

* * *

参考：

1.  [`Static Initialization Blocks`](http://docs.oracle.com/javase/tutorial/java/javaOO/initial.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T17:41:17.760

在 PlayingCardTester 你应该定义

```
static  List<PlayingCard> deck = 
```

主方法之外：“public static void main”上方的一行

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T17:38:53.143

> 注意：没有必要在类定义的开头声明字段，尽管这是最常见的做法。只需要在使用它们之前声明和初始化它们。

[关联](http://docs.oracle.com/javase/tutorial/java/javaOO/initial.html)

你不能把`static variable or block`里面的方法。两者都应该在`main`方法之外。

```
public class PlayingCardTester 
{
    static  List<PlayingCard> deck = new ArrayList<PlayingCard>();

    // Initialize deck
    static 
    {
        //for ea PlayingCard.Suit suit in PlayingCard.Suit.values()
        for (PlayingCard.Suit suit : PlayingCard.Suit.values())
        {
            for (PlayingCard.Value value : PlayingCard.Value.values())
            {
                deck.add(new PlayingCard(value, suit));
            }
        }

    }
    public static void main (String[] args)
    {
        ...
    }
} 
```

# ruby-on-rails - Ajax 不适用于 Rails3.2

> ID：13729098
> 
> 赞同：0
> 
> 时间：2012-12-05T17:35:20.390
> 
> 标签：ruby-on-rails, ajax, ruby-on-rails-3

我想要在单击时更改为取消关注的关注按钮。但是当它提交表单时，它根本不做任何事情。为什么？

我的代码是这样的

-----动作（users_controller.rb）-----

```
 def set_follow
   friend = User.find_by_username(params[:username])
   if f = Friendship.find(:first, :conditions => { :user_id => current_user.id, :friend_id => friend.id})

     f.destroy
     flash[:notice] = "Now added to follow list"
     respond_to do |format|
       format.html { redirect_to set_follow }
       format.js
     end
     #redirect_to :back
   else
     Friendship.create(:user_id => current_user.id, :friend_id => friend.id)
     flash[:error] = "Now deleted from follow list"
     respond_to do |format|
       format.html { redirect_to set_follow }
       format.js
     end
     #redirect_to :back
   end
end 
```

-----表单（用户/index.html.erb）-----

```
<div id="follow_status">
   <% if user_signed_in? && current_user.friends.find_by_id(user.id) %>
     <%= link_to sanitize('<i class="icon-remove icon-white"></i> ') + 'Un-Follow', follow_user_path(user.username), :class => 'btn', remote: true %>
   <% elsif current_user != user %>
     <%= link_to sanitize('<i class="icon-ok icon-white"></i> ') + 'Follow', follow_user_path(user.username), :class => 'btn btn-primary', remote: true %>
   <% end %>
 </div> 
```

-----JS 视图(set_follow.js.erb)--

```
$("#follow_status").html("<%= escape_javascript(render f) %>"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T18:01:10.350

有点不同的方法，但我会用 JQuery 做到这一点

```
$('.btn').click( function() {
    if( $('.btn').html() == 'Follow') {
        $('.btn').html('Unfollow');
    }
    else if( $('.btn').html() == 'Unfollow') {
        $('.btn').html('Follow');
    }

}); 
```

​这只是你如何做到这一点的一个例子。您可能希望在 jquery 中使用更具体的类链

# php - Facebook 喜欢按钮未链接到正确的 URL

> ID：13729105
> 
> 赞同：1
> 
> 时间：2012-12-05T17:35:46.087
> 
> 标签：php, facebook, button, iframe, facebook-like

我有一个带有以下 opengraph 元标记的网页：

```
<meta property="fb:admins" content="myid" />
<meta property="og:title" content="myurl.com" />
<meta property="og:url" content="http://www.myurl.com/" />
<meta property="og:description" content="My description" />
<meta property="og:type" content="website" />
<meta property="og:image" content="http://www.myurl.com/images/image.jpg"/> 
```

我试图使用此代码为每个帖子获取 Facebook Like 按钮：

```
echo '<iframe src="//www.facebook.com/plugins/like.php?href=http%3A%2F%2Fwww.myurl.com%2Fnews.php%3Fid%3D'.$postid.'&amp;send=false&amp;layout=button_count&amp;width=100&amp;show_faces=false&amp;action=like&amp;colorscheme=light&amp;font=trebuchet+ms&amp;height=21" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:100px; height:21px;" allowTransparency="true"></iframe>'; 
```

显然每个点赞按钮都使用不同的 $postid 值，但是当我访问我的网页并点赞帖子编号 1 时，我会重新加载页面，帖子 3 和 4 也有新的点赞。我不喜欢，它是一样的。真的很奇怪也很烦人。这就像在没有相同 URL 的情况下连接的帖子。你知道我该如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T17:47:37.797

通过设置`og:url`您网站的基地址，您是在*告诉*Facebook 这是您希望被喜欢的 URL。

在每种情况下都使用特定帖子的 URL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T20:25:02.580

我解决了这个问题，而是在每个帖子的详细信息中放置了一个 Like 按钮，这将解决同一页面中有很多 Like 按钮相互链接的问题。

在详细信息页面（我只使用一个 news.php）中，每次更改 URL（具有不同的 id）时，og:url 参数都会以相同的方式更改。

```
news.php?id=1 has an og:url content="http://www.mysite.com/news.php?id=1"
news.php?id=2 has an og:url content="http://www.mysite.com/news.php?id=2"
and so on... 
```

此外，我会根据每个帖子相应地更改标题和描述，因此当人们在 Facebook 上分享它时，它会有正确的数据，而不是通用的。

如果您想在同一页面上出现多个“喜欢”按钮，我不知道如何...

# php - 使用 PHP 和 Bash 通过 SSH 登录到外部服务器

> ID：13729110
> 
> 赞同：0
> 
> 时间：2012-12-05T17:36:12.063
> 
> 标签：php, bash, ssh, amazon-ec2

我正在尝试建立一个中央服务器，负责监控我的其他服务器。该集中式服务器需要能够收集有关特定服务器的特定信息/指标（例如`df -h`和`service httpd status`）；但如果需要，它还需要能够重新启动 Apache。

如果不是为了重启 Apache，我可以编写一个监听脚本来提供一种方法，让集中式服务器无需 SSH 即可获得所需的数据。但因为我也希望它能够重启 Apache，所以它需要能够通过 PHP 和 Bash 的组合登录和启动脚本。

目前，我正在使用 PHP[`shell_exec`](http://php.net/manual/en/function.shell-exec.php)来执行这个（非常简单的）Bash 脚本：

```
#!/bin/sh
ssh -i /path/to/keyFile.pem ec2-user@x.x.x.x; 
```

我正在通过私有 IP 访问外部服务器（这是一个 EC2 实例）。如果我启动这个脚本，我可以毫无问题地登录 - 但是，当我想发回上面列出的命令的输出时，问题就来了。

在 Bash 脚本中，如何`df -h`在 SSH 连接到另一台服务器后输出命令？这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T17:43:01.823

你可以使用：

```
ssh -i /path/to/keyFile.pem ec2-user@x.x.x.x 'df -h' 
```

或多个命令：

```
ssh -i /path/to/keyFile.pem ec2-user@x.x.x.x 'ls -al ; df -h' 
```

这可以从命令行工作，但我没有通过 php 尝试过`exec`（老实说，在亚马逊上也没有......）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T17:59:49.243

SSH有一个[PECL 扩展](http://php.net/manual/en/book.ssh2.php)。

除此之外，您可能希望使用`&$output`参数 of`exec()`来获取输出：

```
$output = array();
exec('bash myscript.sh', $output);
print_r($output); 
```

或者使用输出重定向

```
$output = '/path/to/output.txt';
exec("bash myscript.sh > $output");
if( file_exists($output) && is_readable($output) ) {
    $mydata = file_get_contents($output);
} 
```

而且，当然，这一切都假设您的脚本看起来像 jeroen 在他的回答中的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T23:00:44.043

如果您正在使用 ssh，我建议您使用[phpseclib，一个纯 PHP SSH 实现](http://phpseclib.sourceforge.net/)。它比 PECL SSH 扩展更便携，也更可靠。

# asp.net - 限制视频文件下载

> ID：13729111
> 
> 赞同：0
> 
> 时间：2012-12-05T17:36:12.957
> 
> 标签：asp.net, video-streaming, hosting

我正在尝试为一家公司建立一个精神网站，他们正计划`embed`在他们的网站上放一些视频。

他们要求我将其`videos`设为私有，因为他们不希望用户下载它们，因为他们正在为课程收取一些费用，并且他们希望在网站上的特定时间为注册用户提供这些视频。

如果我们进行直播，它的成本很高，因此我们计划将其托管在同一个网站上，并在一段时间后将其删除。

所以我想知道最好的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T17:42:53.210

可以使用流式下载或渐进式下载来在网站上提供视频。后者在技术上类似于任何其他下载，即如果用户找到视频的 URL，他们就可以下载它。

您可以编写客户端代码来对一次性令牌进行哈希处理，以尝试混淆视频文件的 URL，但本质上，忠诚的用户可以侵入下载 URL。

您的另一个选择是使用 DRM，即使下载了文件，您也可以限制播放。但这实际上可能比流媒体花费更多。（它还将为您的视频提供更好的保护，因为流式视频也可以保存在用户的计算机上，如果他们知道如何保存）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T18:24:25.330

考虑结合使用 PayPal 订阅和表单身份验证。使用 PayPal IPN 获取用户状态（无论他们是否已付款）并将其与交易 ID 和用户 ID 相关联。

只有经过身份验证，他们才能访问视频课程页面。此时，您可以从数据库中检索他们的订阅状态，并在他们付清时授予他们访问权限。如果没有，请提供友好的消息并链接到 PayPal。

[ASP.NET PayPal 订阅 IPN](http://www.codersbarn.com/post/2008/07/10/ASPNET-PayPal-Subscriptions-IPN.aspx) [警告：自己的博客]

[如何设置 Paypal 订阅](http://youtu.be/JFADJVtXfTc)

您可能必须使用配置文件来存储每个用户的额外信息。如果是这种情况并且您使用的是 ASP.NET WAP (2.0+)，请使用以下信息进行设置：

[Web 应用程序项目中的 ASP.NET 配置文件](http://leedumond.com/blog/asp-net-profiles-in-web-application-projects/)

# arrays - 如何添加到数组 - Arduino

> ID：13729113
> 
> 赞同：1
> 
> 时间：2012-12-05T17:36:15.333
> 
> 标签：arrays, arduino

我试图从一个空数组开始，然后使用以下代码生成一个随机数模式，但我似乎无法让它工作。

```
 int sequence = {};

 random(1, 4);

 for (int i=0; i <= 7; i++){
 sequence[i] = random(1, 4);
 } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T17:40:38.717

Arduino 基于 C++。

```
int sequence[8];

// You must initialize the pseudo-random number generator
// You can get a "random seed" using analogRead(0) if this
// pin isn't been used and unplugged.
randomSeed(analogRead(0));

for (int i=0; i <= 7; i++){
    sequence[i] = random(1, 4); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T17:38:58.590

那不是数组。
*这*是一个数组，`int sequence[7];`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-04-25T00:45:38.110

我就是这样做的，它在我的 arduino IDE 上编译得很好。我认为没有必要播种 rand 函数，除非您的应用程序需要一个真正的随机数（不可重复）。

[https://www.arduino.cc/en/reference/random](https://www.arduino.cc/en/reference/random)应该可以帮助您

```
void loop() {
 int sequence[8]; // this is an array

 for (int i=0; i <= 7; i++){
 // use modulo to get remainder, add 1 to make it a range of 1-4
 sequence[i] = rand() % 4 + 1;
 }
} 
```

# asp.net-mvc-3 - 树 jQGrid 不显示图标以查看第二级

> ID：13729117
> 
> 赞同：0
> 
> 时间：2012-12-05T17:36:31.247
> 
> 标签：asp.net-mvc-3, jqgrid, treegrid

我的 Tree Grid 出现问题，我只能扩展第一级，它的子级带有一个不允许再扩展的图标，我做错了什么？看法

网格加载完成，我认为错误在这里......

```
loadComplete: function () {
    $(this).find("tr.jqgrow").each(function (tr) {
        var idLinha = $(this).attr('id');
        var level = this.cells[4].childNodes[0].data;
        $(this).find("div.treeclick").bind("click", function (e) {
            var classes = $(this).attr('class');
            if (classes.indexOf('-minus') != -1) {
                if (!$(this).hasClass('expanded')) {
                    $(this).addClass('expanded');
                    $.ajax({
                        type: 'post',
                        url: '@Url.Action("AddFilhos")',
                        data: { p_PaiID: idLinha, p_Level: level },
                        dataType: "json",
                        success: function (result) {
                            for(var c_Area = 0; c_Area < result.rows.length; c_Area++)
                            {
$('#listaRelatorioFormulario').addChildNode(result.rows[c_Area].id, result.rows[c_Area].parent, result.rows[c_Area]);
                            }
                        }
                    });
                }
            }
            else if (classes.indexOf('-plus') != -1) {
            }
        });
    });
}, 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T17:51:06.567

要在加载 TreeGrid 期间扩展节点，您只需要包含`expanded: true`. 例如，请参阅[答案](https://stackoverflow.com/a/5333199/315935)以获取更多信息。

请注意答案中描述[的](https://stackoverflow.com/a/13196560/315935)另一个错误（答案中也描述了解决方法）。

**更新**：您应该另外阅读可能对您来说也很有趣[的答案。](https://stackoverflow.com/a/9244023/315935)

# php - Wordpress 自定义帖子未将图像保存在自定义元框中

> ID：13729118
> 
> 赞同：2
> 
> 时间：2012-12-05T17:36:58.603
> 
> 标签：php, wordpress, file-upload, custom-post-type

我试图创建一个只有 4 张图片的自定义帖子类型，但我遇到了一些麻烦。它正在节省，但我做了一些改变，现在我认为它甚至没有这样做。（不，它根本不是上传/保存。）

另一个问题是，即使我存储了 url，它也只接收文件名。我一直在广泛搜索（除了一些其他基本信息，这是我今天所做的所有工作），我找到的大多数答案都是不同的，无论如何都不起作用。

我已经查阅了法典中的所有功能，并且全部理解了它们，但我终其一生都无法找出问题所在。如果您愿意，请给我发消息，我很乐意将 wp 用户名和密码发送给您，以便您查看管理员。（目前在临时站点上）

非常感谢，比利

```
<?php add_action( 'init', 'create_post_type' );
function create_post_type() {
    register_post_type( 'bwd_project',
        array(
            'labels' => array(
                'name' => __( 'Projects' ),
                'singular_name' => __( 'Project' ),
                'add_new' => 'Add new Project',
                'add_new_item' => 'Add New Project',
                'edit' => 'Edit',
                'edit_item' => 'Edit Project',
                'new_item' => 'New Project',
                'view' => 'View',
                'view_item' => 'View Project',
                'search_items' => 'Search Projects',
                'not_found' => 'No Projects found',
                'not_found_in_trash' => 'No Projects found in Trash',
                'parent' => 'Parent Project'
            ),
        'public' => true,
        'has_archive' => true,
        'rewrite' => array('slug' => 'projects'),
        'menu_position' => 20,
        'supports' => array('title','thumbnail'),
        )
    );
}
add_action( 'admin_init' , 'my_admin' );

function my_admin(){
    add_meta_box( 'project_meta_box',
        'New Project',
        'display_project_meta_box',
        'bwd_project',
        'normal','high' 
    );
}

function display_project_meta_box() {
    global $post;  
    if ( defined('DOING_AUTOSAVE') && DOING_AUTOSAVE ) return $post_id;  
    $project = get_post_custom($post->ID);  
    $logo = $project["logo"][0];  
    $img1 = $project["img1"][0];  
    $img2 = $project["img2"][0];  
    $img3 = $project["img3"][0];

    ?>
    <table>
        <tr>
        <?php print_r($project); ?>
        </tr>
        <tr>
            <td><strong>Project logo</strong></td>
        </tr>
        <tr>
            <td><img src="<?php echo $logo; ?>" /></td>
        </tr>
        <tr>
            <td><input type="file" name="logo" value="<?php echo $logo; ?>"/></td>
        </tr>
        <tr></tr>
        <tr>
            <td><strong>Image 1</strong></td>
            <td><strong>Image 2</strong></td>
            <td><strong>Image 3</strong></td>
        </tr>       

        <tr>
            <td><img src="<?php echo $img1; ?>" /></td>
            <td><img src="<?php echo $img2; ?>" /></td>
            <td><img src="<?php echo $img3; ?>" /></td>
        </tr>
        <tr>
            <td><input type="file" name="img2" value="<?php echo $img2; ?>"/></td>
            <td><input type="file" name="img1" value="<?php echo $img1; ?>"/></td>
            <td><input type="file" name="img3" value="<?php echo $img3; ?>"/></td>
        </tr>

    </table> <?php

}

add_action('save_post', 'save_project_link');  
function save_project_link(){  
    global $post;  
    if ( defined('DOING_AUTOSAVE') && DOING_AUTOSAVE ){  
        return $post_id;  
    }else{   

        if (!empty($_FILES['logo']['name'])) {
            $upload_overrides = array( 'test_form' => false );
            $upload = wp_handle_upload($_FILES['logo'], $upload_overrides);
            if (!isset($upload['error'])) {

                update_post_meta($post->ID, "logo", $upload['url']);
            }
        }
    }
} 

?> 
```

编辑：在我的代码中更改了一些不重要的东西。

另外，对于额外的爱，谁能告诉我一个简单的方法来保存图像（4次）还是我必须单独做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T18:29:50.887

有几件事我觉得这是缺乏的。首先，您需要为要显示的字段添加一个隐藏的输入类型，或多或少像这样：

```
 echo '<input type="hidden" name="custom_meta_box_nonce" value="'.wp_create_nonce(basename(__FILE__)).'" />'; 
```

如果我是你并且如果你在 PHP 5.3 上运行，我会使用 Jeffrey Way 的自定义帖子，其中包含已经内置的元框和分类法，你只需为每个自定义帖子创建实例变量。它可以更快地部署站点。试试这个：

[https://github.com/JeffreyWay/Easy-WordPress-Custom-Post-Types](https://github.com/JeffreyWay/Easy-WordPress-Custom-Post-Types)

# sql - Oracle SQL 计算列和按日期分组

> ID：13729120
> 
> 赞同：1
> 
> 时间：2012-12-05T17:37:15.117
> 
> 标签：sql, oracle, count

嗨，我有一张像这样的桌子

```
C_DATE     SOURCE
11/21/2012  A
11/22/2012  A
11/22/2012  A
11/22/2012  A
11/23/2012  A
11/23/2012  A
11/25/2012  A
11/26/2012  A
11/26/2012  B
11/26/2012  B
11/26/2012  B
11/21/2012  B
11/22/2012  B
11/22/2012  B
11/23/2012  B
11/23/2012  C
11/24/2012  C
11/24/2012  C
11/24/2012  C
11/24/2012  C
11/25/2012  C 
```

如何按来源和日期计算如下：
`c_date`来源 a 来源 b 来源 c

```
11/21/2012 1 4 0 
11/22/2012 1 1 1 
11/23/2012 0 0 1
11/24/2012 and so on.. 
```

我得到的最接近的是

```
 select trunc(c_date)  XDATE,  
        (select count(**) from TABLE where source='A') A, 
        (select count(**) from TABLE where source='B') B, 
        (select count(*) from TABLE where source='C') C
 from TABLE
group by trunc(C_DATE) 
order by trunc(C_DATE) asc 
```

但它重复每一行的总计数我找不到如何将计数列与日期联系起来。

非常感谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T17:55:47.417

```
select trunc(c_date)  XDATE,  
       sum(case source when 'A' then 1 else 0 end) cnt_a,      
       sum(case source when 'B' then 1 else 0 end) cnt_b,
       sum(case source when 'C' then 1 else 0 end) cnt_c,
  from TABLE
 group by trunc(C_DATE) 
 order by trunc(C_DATE) asc 
```

**更新**只要你用11g，就可以用现代pivot子句：）

```
select xdate, a, b, c
  from 
(select trunc(c_date) XDATE, source, count(*) 
   from tab 
  group by trunc(c_date), source )     
   pivot 
( count(*) for source in ('A' a, 'B' b, 'C' c) )
order by 1; 
```

[http://sqlfiddle.com/#!4/d0269/16](http://sqlfiddle.com/#!4/d0269/16)

# format - 读取本机格式的 bcp 数据文件

> ID：13729125
> 
> 赞同：3
> 
> 时间：2012-12-05T17:37:39.467
> 
> 标签：format, bcp

使用 Unix shell 脚本，我使用 NATIVE 格式从 Server1 中的表执行 bcp 到文件 - XXXX.bcpdat，然后将文件中的 bcp 到 Server2 中相同结构的表。我们的 bcp 命令是 bcp "$dbname".."$tablename" out XXXX.bcpdat -n bcp "$dbname".."$tablename" in XXXX.bcpdat -n -b10000

此 bcp_out 和 bcp in 按预期从/到表中工作。但是我想在这里进行紧急更改- **我想获取 bcp 数据文件 (XXXX.bcpdat) 中的总行数（一行可能有 120 或 30 或 40 条记录）** 但是使用本机格式的文件我不能区分每一行及其分离方式。如果我通过 head -10 XXXX.bcpdat 或 tail -10 XXXX.bcpdat 它会打印文件中的所有内容。“wc -l”或“awk”或“cut”没有帮助我从文件中获取行数。一行结束的地方没有区别，就像它在 bcp 的字符加载中一样。如果有人最早帮助我，那真的很棒，我如何获得 bcpdat 文件中的总行数（不是记录）。提前感谢战利品。

# c - 两个位置之间的人口数

> ID：13729127
> 
> 赞同：2
> 
> 时间：2012-12-05T17:37:55.483
> 
> 标签：c, performance, algorithm, bit-manipulation, bioinformatics

我正在寻找在两个位置之间的位串中查找弹出计数的解决方案，例如：

```
popcnt( 10(0101), 0, 3) = 1
popcnt( 100101(), 0, 0) = 0
popcnt( 10010(1), 0, 1) = 0 
```

** 我假设开放范围并假设从右到左顺序

使用标准位运算符，可能还有 popcnt 或等效的。

如果有区别，我希望找到两个字符串之间的差异。假设我有字符串`b`并且我在两个位置交换位，例如`0101110 -> 1101100 => 3`- 我需要改变的位之间的popcnt - 在两者*之间*的位的情况下，所以 popcnt 是 3`0101110 -> 1101100``10110`

您是否看到了一些巧妙的方式来使用 bithacks？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-05T17:50:17.530

首先屏蔽该值以仅获取相关位：

```
relevant = (value >> startBit) & ((1 << numOfBits) - 1); 
```

* * *

**编辑：**

以上将调用未定义的行为 when `numOfBits == 32`（或更准确地说， when `numOfBits == CHAR_BIT * sizeof(int)`）。要解决此问题，您需要对这种情况进行特殊处理（设置`relevant = value`）。

* * *

然后使用此问题中提出的方法之一找到这些位的总体计数：[Best algorithm to count the number of set bits in a 32-bit integer](https://stackoverflow.com/questions/109023/best-algorithm-to-count-the-number-of-set-bits-in-a-32-bit-integer)。

总结答案，您可以使用特定于平台的函数，例如 GCC's `__builtin_popcount`，或者如果您需要可移植的解决方案，您可以使用并行前缀算法，例如 Matt Howells 的答案：

```
int NumberOfSetBits(int i)
{
    i = i - ((i >> 1) & 0x55555555);
    i = (i & 0x33333333) + ((i >> 2) & 0x33333333);
    return (((i + (i >> 4)) & 0x0F0F0F0F) * 0x01010101) >> 24;
} 
```

# python - Bool Logic + while bool 和对象：

> ID：13729129
> 
> 赞同：1
> 
> 时间：2012-12-05T17:38:03.320
> 
> 标签：python, while-loop

```
a = True
obj = {some object}

while a and obj:
    doSomething()
    certain if statements:
    ^ some of these will turn a False or obj to None 
```

^这会在 a = True 且 obj 存在时继续运行吗？

如果两者同时为假怎么办 - 将 False 和 None -> 评估为 True 以便它继续运行或退出 while 循环

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T17:39:42.970

> 如果两者同时为假怎么办 - 将 False 和 None -> 评估为 True 以便它继续运行或退出 while 循环

只要*至少*一个`and`操作数的计算结果为`False`，循环就会停止。因此，如果*两者都*评估为`False`，则循环也将停止。

重要的是要注意，`False`并且`None`不是唯一评估为`False`. 有关详细信息，请参阅[文档](http://docs.python.org/2/library/stdtypes.html#truth-value-testing)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T17:39:42.270

是的，它会在 'a' 保持真实并且 obj 存在时运行

如果两者都为 False，它将评估为 False

如果只有一个为 False，它将评估为 False

试着写：

> （错误和无）

在您的 python 解释器中，它将评估为 False

# javascript - jQuery .is(":hover") 在 IE8 中

> ID：13729136
> 
> 赞同：9
> 
> 时间：2012-12-05T17:38:31.003
> 
> 标签：javascript, jquery, jquery-hover

我在检查 IE8 中 div 的状态时遇到问题。我想检查鼠标当前是否悬停在某些 div 上。目前在 IE8 中，我收到以下错误： `Syntax error, unrecognized expression: hover`. 下面是导致错误的jQuery：

```
// This function will close the slideout of widgets
function CloseWidgetPanel()
{
    if (!$("#widgets").is(":hover") && !$(".widgetPanel").is(":hover"))
    {
        if ($("#widgets").is(":animated"))
        {
            $("#widgets").stop(true, true);
        }
        $("#widgets").hide("slide", { direction: "right" }, 300);
    }
    else
    {
        // We are currently hovering over a panel, so check back in 2 seconds.
        setTimeout(CloseWidgetPanel, 2000);
    }
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-05T17:45:06.167

替代方式：

```
$(".widgetPanel, #widgets").hover(function() {
    $(this).toggleClass('hover')
}); 
```

然后：

```
if (!$("#widgets").is(":hover") && !$(".widgetPanel").is(":hover"))

change to

if (!$("#widgets").hasClass('hover') && !$(".widgetPanel").hasClass('hover')) 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-05T17:41:38.873

jQuery 没有实现`:hover`选择器并且 IE8 不支持`queryselectorall`，因此它失败了。您必须找到另一种方法来检测元素当前是否悬停在上面，例如设置全局（或父范围）变量或将状态类/属性应用于元素的 mouseenter 和 leave 事件。

# python - 再次 Python 帮助

> ID：13729143
> 
> 赞同：-3
> 
> 时间：2012-12-05T17:38:48.770
> 
> 标签：python

我正在使用 Python 3.2 只是为了让您知道我在做什么，这是分配： ~ random 模块中的函数 random.randint 可用于从一系列值中生成整数。例如，random.randint(1,6) 以相等的概率产生值 1 到 6。一个简单的辅导程序可能会随机选择 0 到 12 之间的两个数字并提出如下问题：6 乘以 8 是多少？收到用户回复后，计算机会检查答案是否正确并给出鼓励性的评论。编写一个程序，循环 10 次产生这种形式的问题，并在最后给用户打分。

这是我的程序中的内容：

```
 print ("Hello. Let's begin")
    for i in range (1,10):
        from random import randint
        x=randint (0,12)
        y=randint (0,12)
        print (x,"*" y,"=?")
        product= int(input ("What is the product?")
        if (product==x*y):
           print ("Awesome! That is correct!")
        else:
           print ("Sorry, that is not correct, but let's try another one!") 
```

我拥有所有这一切。它向用户询问一个随机乘法问题并回答十次。我不明白该怎么做是最后给用户一个分数。我正在集思广益，但真正奏效的并不多。我想我必须做类似的事情：

```
 score= 
```

但我不知道如何告诉程序计算正确答案的数量......我说 score=number of if 吗？

然后当我打印分数时，我可以说：

```
 if (score>5) :
       print: ("Great job! You scored a",score,"out of ten!")
    else:
       print: ("Not the best score, but you can try again! You scored a",score,"out of ten.") 
```

或者有没有更简单的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T17:44:43.780

似乎最简单的方法是创建一个新变量（“score”或类似的）并在循环之前将其初始化为 0。然后，当您检查用户是否正确时，如果正确则将其加一，如果错误则不理会它。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T17:51:53.150

首先，将分数设置为 0

```
score = 0 
```

然后在循环中，尝试类似

```
 if (product==x*y):
       print ("Awesome! That is correct!")
       score += 1
    else:
       print ("Sorry, that is not correct, but let's try another one!") 
```

重要的是，`score += 1`当您得到正确答案时，分数会增加一分。您可以在`score > 5`循环之后放入。

# jquery - 全局变量在第二个回调中变得未定义

> ID：13729148
> 
> 赞同：0
> 
> 时间：2012-12-05T17:38:59.187
> 
> 标签：jquery

我在 $(document).ready() 之前声明了几个变量。这些变量存在于回调函数中，如果时间被调用 x 量，但在第一个回调函数之后我遇到了一些问题变量变得未定义。

```
 var file_count = 0;
    var permission_state = [ [] ];
    var rate_info = [ [] ];
    var is_rated = [];
    $(document).ready(function(){

    ...

    onComplete: function(id, fileName, responseJSON) {
        if($("input[name=voteit"+id+"]").prop("checked")){
            is_rated.push(1);
            rate_info[id].push($("#title-textarea"+id).val());
            rate_info[id].push($("select[name=category"+id+"]").val());
            rate_info[id].push($("select[name=subcategory"+id+"]").val());
        } else {
            is_rated.push(0);
            permission_state[id].push($(".permission-level"+id).val());
            permission_state[id].push($("#title-textarea"+id).val());
        }
    ... 
```

控制台给了我：

“在 'onValidate' 回调中捕获异常 - TypeError：permission_state[id] 未定义”

在这种情况下，id 是一个整数，在回调函数的每次迭代中都会递增，并且我已经检查过它是否正常工作。另外，为什么控制台没有说明 is_rated 变量未定义，只有 rate_info 或 permission_state？

编辑：感谢我所做的建议：

```
 onComplete: function(id, fileName, responseJSON) {
        if($("input[name=voteit"+id+"]").prop("checked")){
            rate_info[id] = [];
            is_rated.push(1);
            rate_info[id].push($("#title-textarea"+id).val());
            rate_info[id].push($("select[name=category"+id+"]").val());
            rate_info[id].push($("select[name=subcategory"+id+"]").val());
        } else {
            permission_state[id] = [];
            is_rated.push(0);
            permission_state[id].push($(".permission-level"+id).val());
            permission_state[id].push($("#title-textarea"+id).val());
        }
    ... 
```

它奏效了。

# ios - 使用 restkit 播种预加载的数据库

> ID：13729150
> 
> 赞同：0
> 
> 时间：2012-12-05T17:39:12.423
> 
> 标签：ios, restkit

我正在尝试使用大约 500 MB 的种子数据库创建对象存储。这是我的做法：

```
self.restObjectStore = [RKManagedObjectStore objectStoreWithStoreFilename:@"DB.sqlite"
                                                                            usingSeedDatabaseName:@"SEED-DB.sqlite"
                                                                                  managedObjectModel:self.managedObjectModel
                                                                                                     delegate:nil]; 
```

但是，每当我进行临时部署时，应用程序都会因“未能及时启动”错误而崩溃。（注意：当我用 XCode 尝试这个时没有问题发生）

有没有办法提高这个操作的性能？我能做些什么来避免这个错误？它是一个太大的种子数据库吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T21:18:43.533

这是一个非常庞大的种子数据库！我建议首先尝试使用较小的，以确保它不是由它的巨大尺寸引起的。RKTwitterCoreData 示例有一个很好的示例来说明如何为初始存储设置种子：

[https://github.com/RestKit/RestKit/blob/master/Examples/RKTwitterCoreData/Classes/RKTwitterAppDelegate.m](https://github.com/RestKit/RestKit/blob/master/Examples/RKTwitterCoreData/Classes/RKTwitterAppDelegate.m)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-10T00:53:56.590

如果您没有`application:didFinishLaunchingWithOptions:`在合理的时间内返回，“未能及时启动”错误是您得到的错误。一般来说，为了避免这种情况，你应该尽可能多地离开主线程。这种特殊情况没有什么不同，您应该在后台执行对象存储创建。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-11T11:43:34.073

当我的种子数据库大约 60Mb 时，我面临同样的问题。我已经把数据库夹起来了

# mongodb - 如果我将 bson ID 放在 url 中，我是否会暴露敏感数据？

> ID：13729151
> 
> 赞同：12
> 
> 时间：2012-12-05T17:39:19.327
> 
> 标签：mongodb, url, bson

假设我的 Mongodb 中有一个 Products 数组。我希望用户能够在自己的页面上看到每个产品：`http://www.mysite.com/product/12345/Widget-Wodget`. 由于每个产品都没有增量整数 ID (12345)，而是具有 BSON ID (5063a36bdeb13f7505000630)，因此我需要添加整数 ID 或使用 BSON ID。

由于 BSON ID 包含 PID：

*   4字节时间戳，
*   3 字节机器标识符，
*   2 字节进程 ID，
*   3 字节计数器。

如果我在我的网址中使用 BSON ID，我是否会将安全信息暴露给外界？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-06T09:01:08.740

我想不出任何用于在您的机器上获得特权的用途，但是在任何地方使用 ObjectIds 仍然会泄露很多信息。

通过抓取您的网站，您可以：

*   找到一些隐藏的对象：例如，如果计数器部分在时间 t1 和 t2 之间从 0x....b1 变为 0x....b9，则可以在这些倒数中猜测 ObjectIds。但是，如果您强制执行访问权限，猜测 id 很可能没有用
*   知道每个用户的注册日期（不是非常敏感的信息，但总比没有好）
*   从员工创建的对象的时间戳中推断出实际（而不是公开可用的）营业时间
*   根据用户生成对象的时间戳推断您的受众生活在哪个时区：如果您的网站是人们在午餐时间最常使用的网站，那么可以测量 ObjectIds 的峰值并推断 UTC 晚上 8 点的峰值意味着受众在美国西海岸
*   更一般地说，通过抓取您的大部分网站，您可以建立您的服务成功的时间表，在任何给定的时间内了解：您的用户数量，用户参与度，您拥有多少台服务器，多久一次您的服务器已重新启动。周末发生的 PID 更改更有可能发生崩溃，而工作日发生的那些更可能发生崩溃 + 软件修订
*   并且可能会找到特定于您的业务流程和领域的其他信息

公平地说，即使使用随机 ID，也可以推断出很多东西。主要问题是您需要防止任何人抓取您网站的具有统计意义的部分。但如果有人下定决心，他们最终会成功，这就是为什么向他们提供所有这些额外的时间戳信息似乎是错误的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T21:03:45.573

共享[ObjectID](http://docs.mongodb.org/manual/core/object-id/)中的信息不会危及您的安全。有人可以推断出诸如 ObjectID 的创建时间（时间戳）之类的次要细节，但任何 ObjectID 组件都不应与身份验证或授权相关联。

如果您正在构建电子商务网站，SEO 通常是公共 URL 的重要考虑因素。在这种情况下，您通常希望使用比 ObjectID 更友好的 URL，其路径组件更短且语义更多。

请注意，您不必为您的`_id`字段使用默认的 ObjectID .. 因此可以始终生成与您的应用程序更相关的内容。默认的 ObjectID 确实提供了唯一性的合理保证，因此如果您实现自己的`_id`分配，则必须考虑到这一点。

也可以看看：

*   [创建自动递增序列字段](http://docs.mongodb.org/manual/tutorial/create-an-auto-incrementing-field/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-05T21:12:43.583

正如@Stennie 所说，并非如此。

让我们从 pid 开始，大多数黑客不会费心寻找 pid，比如说 Linux，他们会这样做：

```
ps aux | grep mongod 
```

或类似的东西。当然，这需要黑客实际入侵了您的服务器，我知道仅基于 pid 没有可用的公共黑客攻击。考虑到 pid 会在您重新启动机器或 时发生变化`mongod`，因此这些信息对于任何试图进行间谍活动的人来说都是毫无用处的。

机器 ID 是另一种公开无用的数据，老实说，他们会更好地了解您的网络，`ping`或者`digg`比单独通过机器 ID 更好地了解您的网络。

所以回答这个问题：不，没有真正的安全威胁，而且你显示的信息对除了 MongoDB 之外的任何人都没有用。

我也同意@Stennie 关于使用 SEO 友好 URL 的观点，我常用于电子商务的一个示例是`/product/product_title_`使用较小的随机 id（可能是 base 64 编码`_id`）或最后使用自动递增的 id `.html`。

# sql - 哪些 ALTER TABLE 命令需要或不需要表锁？

> ID：13729152
> 
> 赞同：0
> 
> 时间：2012-12-05T17:39:27.353
> 
> 标签：sql, postgresql

在 postgres 9.1 中，此查询是否需要表锁？（禁止其他客户端写入，或写入和读取）

```
ALTER TABLE "foos" ADD COLUMN "bar" boolean DEFAULT 'f' 
```

在某些情况下会，在某些情况下不会？

默认值会使其变慢吗？

如果它确实锁定了表，它是否也必须对表中的每一行进行操作？或者锁定只会保持一瞬间？

我在哪里可以了解更多关于哪些类型的查询可以锁定表和不锁定表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T17:50:58.093

是的，它会在进行修改时锁定表。

*   如果表很大，有很多行数据，这可能需要相当长的时间。
*   如果另一个连接当前对表有更高优先级的锁，这个动作将等待锁被清除

要了解有关 PostgreSQL 9.1 的更多信息，请查看优秀的[在线文档](http://www.postgresql.org/docs/9.1/static)，尤其是[ALTER TABLE部分](http://www.postgresql.org/docs/9.1/static/sql-altertable.html)

此外，[这](https://stackoverflow.com/questions/463677/alter-table-without-locking-the-table)是一个相关的问题，尽管是针对 MySQL 的。它提供了一些可以应用于 PostgreSQL 的提示和技巧

# c# - 通过 Unity 依赖注入的 WPF 参数

> ID：13729154
> 
> 赞同：0
> 
> 时间：2012-12-05T17:39:33.400
> 
> 标签：c#, wpf, mvvm, dependency-injection, unity-container

我正在通过 , 实例化一个，这有一个`View`as参数。但是，这还有其他三个参数，其中两个已经在 Unity 上配置，最后一个参数我需要从打开. （疯了，嗯？）`Unity``View``ViewModel``ViewModel``MainView``SecondView`

单击按钮时，从我的 MainView（第一个视图）调用此方法：

```
private void ShowAddVersionViewExecute()
{
    Window view = UnityServiceConfigurator.Instance.GetUnityContainer().Resolve<AddVersionView>() as Window;
    view.ShowDialog();
} 
```

这是我的 AddVersionView（第二个视图），它的 ViewModel 作为参数。

```
public partial class AddVersionView
{
    public AddVersionView(AddVersionViewModel viewModel)
    {
        //InicializeComponents and set the viewModel to DataContext.
    }
} 
```

这是 AddVersionViewModel 的构造函数

```
public AddVersionViewModel(IDialogService dialog, AbstractRepository repository, string versionNumber)
{
    //Some code here.
} 
```

和`IDialogService`由`AbstractRepository`解决`Unity`。**但**我想`"versionNumber"`从 MainView 接收。

1.  我该怎么做/我应该怎么做？
2.  有没有其他方法可以做到这一点？

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T19:06:06.910

You can use parameter overrides to supply parameters at resolve time. There are several examples available at [http://msdn.microsoft.com/en-us/library/ff660920(v=pandp.20).aspx](http://msdn.microsoft.com/en-us/library/ff660920(v=pandp.20).aspx).

# java - 如何在 Jtable 中单击显示 jDialog？

> ID：13729155
> 
> 赞同：0
> 
> 时间：2012-12-05T17:39:32.843
> 
> 标签：java, swing, jtable, jdialog, mouseclick-event

我尝试`JDialog`在单击时显示，`JTable`但我的对话框没有显示。

这是我的代码：

```
private void jTable1MouseClicked(java.awt.event.MouseEvent evt) {                                     
    if (evt.getButton() == MouseEvent.BUTTON1 && evt.getClickCount() == 2) {
       dlgCoba dlg = new dlgCoba();
       dlg.setVisible(true);
    }
} 
```

# android - 如何增加 GridView 中的图像大小？

> ID：13729156
> 
> 赞同：2
> 
> 时间：2012-12-05T17:39:35.050
> 
> 标签：android, android-gridview

我有一个数组可以成功地将 15 个图像放入 GridView。但是，在网格中显示时，图像都非常小。我该如何改变它们的大小？我试图将 GridView.LayoutParams 更改为 (100, 100) 但似乎没有变化。

```
public View getView(int position, View convertView, ViewGroup parent) {
    ImageView imageView = new ImageView(mContext);
    imageView.setImageResource(mThumbIds[position]);
    imageView.setScaleType(ImageView.ScaleType.CENTER_CROP);
    imageView.setLayoutParams(new GridView.LayoutParams(85, 85));
    return imageView; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T17:45:26.353

您可以尝试根据设备或模拟器的像素密度进行调整

```
DisplayMetrics metrics = new DisplayMetrics();
getWindowManager().getDefaultDisplay().getMetrics(metrics);
switch(metrics.densityDpi){
     case DisplayMetrics.DENSITY_LOW:
                imageView.setLayoutParams(new GridView.LayoutParams(lowVal, lowVal));
                break;
     case DisplayMetrics.DENSITY_MEDIUM:
                imageView.setLayoutParams(new GridView.LayoutParams(medVal, medVal));
                break;
     case DisplayMetrics.DENSITY_HIGH:
                 imageView.setLayoutParams(new GridView.LayoutParams(highVal, highVal));
                 break;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T17:44:40.470

尝试改变这一点：

```
imageView.setScaleType(ImageView.ScaleType.CENTER_CROP); 
```

对此：

```
imageView.setScaleType(ImageView.ScaleType.CENTER_INSIDE); 
```

您也可以将其设置为 FIT_XY，但它会引入失真。

希望有帮助

# java - Tomcat AD 身份验证 - 允许所有 AD 用户

> ID：13729157
> 
> 赞同：0
> 
> 时间：2012-12-05T17:39:40.527
> 
> 标签：java, tomcat, active-directory, ldap

如何允许 AD 中的所有用户登录我的应用程序（强制他们登录）？不只是按组定义。

这是我的 web.xml。

```
<security-constraint>
    <web-resource-collection>
        <web-resource-name>MyApplication</web-resource-name>
        <url-pattern>/*</url-pattern>
    </web-resource-collection>

</security-constraint>

<security-role>
  <role-name>some-ad-role</role-name>
</security-role>
<security-role>
  <role-name>another-ad-role</role-name>
</security-role>

<!-- Basic Authentication using a JNDIRealm -->
<login-config>
    <auth-method>BASIC</auth-method>
    <realm-name>Login</realm-name>
</login-config> 
```

我仍然想使用 AD 组在我的应用程序中使用 request.isUserInRole() 进行授权，但最初每个人都可以登录到应用程序，以便我拥有他们的用户名以进行检查。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T18:49:55.443

所以我找不到任何文档，但我似乎已经通过使用通配符作为角色名称解决了这个问题。

```
<security-constraint>
    <web-resource-collection>
        <web-resource-name>MyApplication</web-resource-name>
        <url-pattern>/*</url-pattern>
    </web-resource-collection>

    <auth-constraint> 
        <role-name>*</role-name>
    </auth-constraint>

</security-constraint>

<security-role>
  <role-name>some-ad-role</role-name>
</security-role>
<security-role>
  <role-name>another-ad-role</role-name>
</security-role>
<security-role> 
    <role-name>*</role-name>
</security-role> 
```

# coverage.py - 如何配置 tox 以便它将在单个环境而不是全部环境上运行 pytest 覆盖？

> ID：13729162
> 
> 赞同：6
> 
> 时间：2012-12-05T17:39:43.423
> 
> 标签：coverage.py, tox, pytest

我确实有一个复杂的 tox.ini 配置，其中包含不同版本的 python 的多个环境。

我想知道如何告诉 tox 只在默认的 python 解释器上运行覆盖。

问题之一是默认的 Python 环境可能因平台而异。

我确实有一个包装脚本，它调用`tox -e py25,py26,docs`其中 -e 参数是检测到的 python 版本。

```
[tox]
     ...
[testenv:docs]
     ...
[testenv]
     commands=py.test --cov-report xml --cov scripts
     ...
[testenv:py26]
     ...
[testenv:py25]
     ... 
```

期望的行为：运行 pytest 覆盖单个环境（这应该与 jenkins 集成运行）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-06T23:13:15.960

我认为您可以使用并包含`[testenv:py]`使用 python 解释器的环境，通过该解释器本身调用 tox。如果你在那里定义覆盖运行，你应该得到你想要的。

# database - 使用 ModelForm 时强制某些字段的值

> ID：13729165
> 
> 赞同：3
> 
> 时间：2012-12-05T17:39:51.133
> 
> 标签：database, django, security, modelform

我有一个 Django 应用程序，用户可以在其中提交付款订单。显然，安全很重要。我想尽量减少我必须编写的代码量，以避免引入任何安全漏洞，并简化维护。

模型很简单：

```
class Order(models.Model):
    user = models.ForeignKey(User)
    created = models.DateTimeField()
    paid = models.DateTimeField(null=True, blank=True)
    items = models.ManyToManyField(Item) 
```

我正在使用[CreateView](https://docs.djangoproject.com/en/dev/ref/class-based-views/generic-editing/#createview)创建 Order 实例：

```
class OrderView(CreateView):
    model = Order
    form_class = OrderForm 
```

我想在这些实例中强制执行某些字段的值。例如，我希望将实例`user`字段设置为当前登录用户。我不希望用户可以更改此字段的值，因此我根本不希望它出现在表单中。因此，我使用自定义[ModelForm](https://docs.djangoproject.com/en/dev/topics/forms/modelforms/)从表单中删除这些字段：

```
class OrderForm(forms.ModelForm):
    class Meta:
        model = Order
        # For security, we control exactly which fields are placed
        # in the form, rather than excluding some:
        fields = ('items',) 
```

现在我希望新创建的 Order 实例将该`user`字段设置为当前登录用户。我找不到任何有关执行此操作的*最佳*方法的文档。

**(A)**我可以在保存之前重写表单的`save()`方法来修改对象，但是感觉这段代码不属于表单，对`user`字段一无所知。我也无权访问`request`此处，我需要确定当前用户。但它可能看起来像这样：

```
class OrderForm(forms.ModelForm):
    def save(self, commit=True):
        instance = super(OrderForm, self).save(commit=False)
        instance.user = get_request_magic().user
        if commit:
            instance.save()
        return instance 
```

**(B)**我可以用 commit=False[覆盖视图的`form_valid`方法](https://stackoverflow.com/questions/13239976)来保存对象，就像[这个 question](https://stackoverflow.com/questions/8466768)的基于类的版本一样。但是我不能直接调用超类方法，因为它保存了对象没有办法禁用提交，所以我必须手动跳过`form_valid`其中讨厌的一代。除了那个抱怨之外，这看起来确实是我迄今为止发现的最好的方法：

```
class OrderView(CreateView):
    def form_valid(self, form):
        self.object = form.save(commit=False)
        self.object.user = self.request.user
        self.object.save()
        return super(ModelFormMixin, self).form_valid(form) 
```

**(C)**我可以写一个替换`CreateView`它添加一个钩子来允许在保存对象之前对其进行更改。但这感觉像是更多的样板和重复。

**(D)**我不能[提供`initial`值](https://stackoverflow.com/questions/2988548)，因为没有表单域可以放入，所以会被忽略。

还有其他想法吗？如果（B）是最好的选择，有什么办法可以绕过手动指定`form_valid`我想调用哪个超类的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T11:45:30.840

Django 用户*Charettes为我* [回答了这个问题](https://code.djangoproject.com/ticket/19553#comment:2)：

> 您可以通过覆盖 form_valid 来实现：

```
class OrderCreateViewMixin(CreateView):
    def form_valid(self, form):
        form.instance.user = request.user
        return super(OrderCreateViewMixin, self).form_valid(form) 
```

这使我指向[了文档的正确部分](https://docs.djangoproject.com/en/dev/topics/class-based-views/generic-editing/#models-and-request-user)：

```
class AuthorCreate(CreateView):
    form_class = AuthorForm
    model = Author

    def form_valid(self, form):
        form.instance.created_by = self.request.user
        return super(AuthorCreate, self).form_valid(form) 
```

This is definitely the simplest and cleanest answer I've found so far. It doesn't require modifying the form in any way, although it does directly access its `instance` member which is a bit ugly. However, at least it's officially documented, so it's unlikely to break.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T17:49:24.533

对此可能有多种方法。我会这样做：

在您的表单中创建一个接受请求的构造函数：

```
def __init__(self, *args, **kwargs):
        request = kwargs.pop('request', None)
        super(OrderForm, self).__init__(*args, **kwargs)
        self.request = request 
```

在为 POST 处理创建表单时，将其实例化如下：

```
form = OrderForm(data=request.POST, request=request) 
```

现在，在您的 save() 方法中，您可以通过引用访问请求中的用户，`self.request.user`并可以在您的模型上相应地设置它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T01:14:39.720

我用 CBV 处理这种情况的方法是将模型的未保存实例传递给表单。这就是我的做法：

```
class OrderView(CreateView):
    def get_form_kwargs(self):
        self.object = Order(user=self.request.user)
        return super(OrderView, self).get_form_kwargs() 
```

两者`CreateView`和`UpdateView`都将添加`instance`到表单 kwargs 中，将其设置为`self.object`.

除了您已经提到的之外，唯一的另一种方法是从相同的元素构造您的视图类`CreateView`，然后更改 get 和 post 方法以填充`self.object`那里。*当我在项目中需要大量*创建视图时，我已经这样做了：

```
class OrderView(SingleObjectTemplateResponseMixin, ModelFormMixin, ProcessFormView):
    template_name_suffix = '_form'

    def get(self, request, *args, **kwargs):
        self.object = Order(user=request.user)
        return super(OrderView, self).get(request, *args, **kwargs)

    def post(self, request, *args, **kwargs):
        self.object = Order(user=request.user)
        return super(OrderView, self).post(request, *args, **kwargs) 
```

这是一个更通用的版本，可以重用：[https ://gist.github.com/4439975](https://gist.github.com/4439975)

# regex - 需要帮助创建一个简单的正则表达式

> ID：13729166
> 
> 赞同：0
> 
> 时间：2012-12-05T17:39:53.083
> 
> 标签：regex

我需要一个验证字符串（字母、数字、空格或特殊字符）但不能包含大于 35 个字符的单词的正则表达式，例如：

有效：这是一个测试字符串

无效：这是一个 testtttttttttttttttttttttttttttttttttttttttttttt 字符串

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T17:44:05.637

```
[a-zA-Z0-9~@#\^\$&\*\(\)-_\+=\[\]\{\}\|\\,\.\?\s]{,35} 
```

您可以根据需要添加其他`special characters` 。

# ruby-on-rails - Rails - 仅在满足某些条件时显示循环

> ID：13729171
> 
> 赞同：0
> 
> 时间：2012-12-05T17:40:14.473
> 
> 标签：ruby-on-rails, loops

我有一个带有布尔属性“状态”的 project_todo 模型。如何在索引页面上显示一个仅列出状态为 false 的项目待办事项的循环？

列出所有项目待办事项的常规循环如下所示：

```
<% @project.project_todos.each do |todo|%>
    <li data-id="<%= todo.id %>">
        <%= todo.title %>
    </li>
<% end %> 
```

我正在玩一个循环，如果状态为假，则只显示待办事项：

```
<% @project.project_todos {status = "f"}.each do |todo|%>
    <li data-id="<%= todo.id %>">
        <%= todo.title %>
    </li>
<% end %> 
```

我在附近吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T17:47:03.417

如果可以的话，不要在你的观点中加入太多的逻辑。在这种情况下，您可以创建一个范围`ProjectTodo`以根据`status`字段进行过滤。

```
class ProjectTodo < ActiveRecord::Base
  scope :inactive, where(status: false)
  #...
end 
```

然后在你看来，你可以做

```
<% @project.project_todos.inactive.each do |todo|%>
    <li data-id="<%= todo.id %>">
        <%= todo.title %>
    </li>
<% end %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T17:46:19.443

这将仅在具有以下内容的 project_todos 上循环`status == false`：

```
<% @project.project_todos.select{|project_todos| project_todos.status == false}.each do |todo|%>
    <li data-id="<%= todo.id %>">
        <%= todo.title %>
    </li>
<% end %> 
```

或者，**更好的解决方案**：您可以执行以下操作，并让 ActiveRecord 过滤`project_todos`自身：

```
<% @project.project_todos.where(status: false).each do |todo|%>
    <li data-id="<%= todo.id %>">
        <%= todo.title %>
    </li>
<% end %> 
```

**在扩展中**：

您可以创建如下范围：

```
class ProjectTodo < ActiveRecord::Base
  #...
  scope :with_status, lambda{ |status| where(status: status) }
  #...
end 
```

并像这样使用它：

```
@project.project_todos.with_status(status: false) # Returns the project_todos with a status == false and belonging to the @project 
```

# javascript - 只允许绘制矩形 - Google Maps API

> ID：13729172
> 
> 赞同：0
> 
> 时间：2012-12-05T17:40:17.470
> 
> 标签：javascript, jquery, google-maps-api-3

我发现这个很棒的[脚本](http://geojason.info/demos/line-length-polygon-area-google-maps-v3/)你可以“线长和多边形区域”，但我需要它让用户只绘制矩形（90º角）。

我已经将其更改为让用户仅添加 4 分，但这还不够。

原始脚本允许您更改标记位置。我也需要它，但如果用户将标记的位置更改为更大或更小，它应该保持矩形形状。

我正在使用 jQuery / javascript。

任何人都可以帮助我吗？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T17:52:20.327

只让用户添加 2 个点，将它们用作矩形的对角（或使用[可编辑的 google.maps.Rectange](https://developers.google.com/maps/documentation/javascript/reference#RectangleOptions)，将其可编辑属性设置为 true，{editable:true}）

# c# - .NET 复杂的音乐 API

> ID：13729175
> 
> 赞同：1
> 
> 时间：2012-12-05T17:40:29.357
> 
> 标签：c#, api

我正在寻找一些可以播放 mp3 和 flac 文件以及流式在线广播的声音 API。

目前我正在使用 libZPlay，但它没有播放流媒体 mp3。

我在看 NAudio 但我不明白如何通过这个库播放流，它的 API 有点复杂。

我正在使用 C#。

感谢您的回答。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T17:44:42.267

我已经成功使用了[BASS Audio](http://www.un4seen.com/ "低音音频")（单击左侧的 BASS），并且可以流式传输大多数文件。我相信有一个 BASS 插件可以让它播放 FLAC 内容。它可免费用于非商业用途，并且还具有 .Net API。

# sql - SQL：递归查询

> ID：13729179
> 
> 赞同：0
> 
> 时间：2012-12-05T17:40:41.963
> 
> 标签：sql, recursion

我一直试图弄清楚如何确定在一个名为 Blake 的特定员工之后雇用了多少员工。我想使用递归查询。我尝试了以下查询无济于事：

```
Select E.Ename, E.Hiredate
From EMPLOYEES E, EMPLOYEES B
Where e.Hiredate = b.Hiredate
and e.Hiredate > b.Hiredate
and b.Ename = 'blake'; 
```

我的想法是我通过'e.Hiredate = b.Hiredate'将Employees表加入到自身中，我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T17:58:35.403

如果您两者都没有，您的查询将有效

```
 e.Hiredate = b.Hiredate
  and e.Hiredate > b.Hiredate 
```

我希望你能看到这两个值是如何不能 ̲*s̲i̲m̲u̲l̲t̲a̲n̲e̲o̲u̲s̲l̲y̲* 相等和不相等的！！

```
Select E.Ename, E.Hiredate
From EMPLOYEES E, EMPLOYEES B
Where e.Hiredate > b.Hiredate
and b.Ename = 'blake'; 
```

当然，由于您问的是一个相当基本的 101 问题，我假设只有一名员工可以被命名为“布莱克”（即`Ename`是一个唯一标识符），否则还有其他逻辑漏洞可供选择。

由于您从 SQL 开始，我还建议您使用 ANSI 联接而不是表列表（逗号）形式，如下所示：

```
Select E.Ename, E.Hiredate
  From EMPLOYEES E
  JOIN EMPLOYEES B on e.Hiredate > b.Hiredate
 WHERE b.Ename = 'blake'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T17:48:44.127

又快又脏：

```
SELECT Ename, Hiredate
FROM employees
WHERE hiredate > (SELECT TOP 1 hiredate FROM employees WHERE ename = 'blake') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T17:48:53.923

```
select e.*
from employees e
where hiredate > (select max(hiredate)
                  from employees
                  where ename = 'blake'); 
```

内部`max()`查询中的 是必要的，以确保仅返回一行，即使有更多具有该名称的员工

# internet-explorer - IE 和 Firefox 中 google webfont 的特殊字符

> ID：13729184
> 
> 赞同：3
> 
> 时间：2012-12-05T17:41:08.183
> 
> 标签：internet-explorer, firefox, character-encoding, explorer, google-webfonts

我正在尝试用斯洛伐克语创建页面，但在 Firefox 和 IE 中我仍然遇到 Google Webfont Oswald 的问题。问题仅在于斯洛伐克语的特殊字符。在 Chrome 中它看起来不错。[http://pagina.chalupakoseckerovne.sk/](http://pagina.chalupakoseckerovne.sk/) 我尝试更改字符集但没有。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T18:38:40.047

选择 Google 字体时，您需要在字符集选项中选择“拉丁扩展”。否则，仅包含 Latin-1（“西方”拉丁字母）。

它在 Chrome 上看起来也不对；只是 Chrome 安装中使用的备用字体（浏览器的默认无衬线字体）与所选的 Web 字体非常接近，以至于您不会轻易注意到差异。（在我的 Chrome 上，“Š”比其他字母小得多。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T17:45:39.353

您需要指定编码。你要

```
 <meta http-equiv="content-type" content="text/html; charset=iso-8859-2" /> 
```

因为没有指定字符集，这会导致你的 mojibake。

# python - 是否可以腌制 QSettings 对象？

> ID：13729189
> 
> 赞同：3
> 
> 时间：2012-12-05T17:41:19.280
> 
> 标签：python, pyqt, pyqt4, pickle

我意识到这听起来非常多余，因为 pickle 和 QSettings 基本上实现了相同的目标，但让我解释一下。

我有一个由可以停靠、调整大小或以其他方式修改的小部件组成的程序。用户希望能够将各种状态保存为布局并在这些布局之间进行更改。布局保存为 QSettings 文件。

要保存布局列表，我想腌制格式的字典`{'layoutName':qSettingsFile, 'anotherName':anotherFile}`，但是当我尝试腌制 QSettings 文件时，我得到`TypeError: the sip.wrapper type cannot be instantiated or sub-classed`.

有没有办法使这项工作？我可以将 QSettings 文件的内容放入字典中而忘记 QSettings，但我希望有一种更简单/更短的方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T20:13:28.800

使用**一个**设置文件，并为每个布局创建单独的组。

QSettings[语法](https://qt-project.org/doc/qt-4.8/qsettings.html#section-and-key-syntax)支持分层键，因此只需使用[beginGroup](https://qt-project.org/doc/qt-4.8/qsettings.html#beginGroup)和[endGroup](https://qt-project.org/doc/qt-4.8/qsettings.html#endGroup)来创建命名布局部分：

```
settings.beginGroup('layouts')
settings.beginGroup('layoutname1')
# set various layout values...
settings.endGroup()
settings.beginGroup('layoutname2')
# set various layout values...
settings.endGroup()
settings.endGroup() 
```

这将输出一个如下所示的文件：

```
layouts/layoutname1/value1=true
layouts/layoutname1/value2=true
...
layouts/layoutname2/value1=false
layouts/layoutname2/value2=false
... 
```

或者，您可以使用[QSettings 数组](https://qt-project.org/doc/qt-4.8/qsettings.html#beginWriteArray)来创建布局的索引列表。

# audio - 轨道音频标签

> ID：13729194
> 
> 赞同：0
> 
> 时间：2012-12-05T17:41:31.040
> 
> 标签：audio, tags

大家好，我正在尝试让音频标签在 Rails 中工作。我正在使用语法 <%= audio_tag "somesong.mp3", :controls => true %>

但是，当我使用这种格式时，它会引发错误。

这是由音频标签创建的输出文件。

这是在我的歌曲文件夹中引发的错误

# 路由错误

```
没有路线匹配 [GET] "/audios/sunshine.ogg"
```

尝试跑步`rake routes`以获取有关可用路线的更多信息。

这是我的路由表，显示了我正在使用的路由。

> eric@ubuntu:~/Desktop/Musicband/musicband_app$ rake 路由联系人 GET /contacts(.:format) contacts#index new_contact GET /contacts/new(.:format) contacts#new contact PUT /contacts/:id(.:格式）联系人#更新歌曲 GET /songs(.:format) 歌曲#index POST /songs(.:format) 歌曲#create new_song GET /songs/new(.:format) 歌曲#new edit_song GET /songs/:id/编辑(.:format) 歌曲#编辑歌曲 GET /songs/:id(.:format) 歌曲#show PUT /songs/:id(.:format) 歌曲#update DELETE /songs/:id(.:format) 歌曲#destroy groupees GET /groupees(.:format) groupees#index POST /groupees(.:格式) groupees#create new_groupee GET /groupees/new(.:format) groupees#new edit_groupee GET /groupees/:id/edit(.:format) groupees#edit groupee GET /groupees/:id(.:format) groupees#显示 PUT /groupees/:id(.:format) groupees#update DELETE /groupees/:id(.:format) groupees#destroy audio /audio(.:format) login_pages#music /contact(.:format) contacts#new关于 /about(.:format) 着陆页#关于根 / 着陆页#home格式）groupees#update DELETE /groupees/:id(.:format) groupees#destroy audio /audio(.:format)landing_pages#music /contact(.:format) contacts#new about /about(.:format)landing_pages#关于根/landing_pages#home格式）groupees#update DELETE /groupees/:id(.:format) groupees#destroy audio /audio(.:format)landing_pages#music /contact(.:format) contacts#new about /about(.:format)landing_pages#关于根/landing_pages#home

我不知道如何解决此音频问题并使其正常工作。音频文件默认存储在哪里？这对于我试图很快完成的课堂项目来说是一种很好的选择。

因此，如果有人知道如何解决此问题，我将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T18:05:41.813

您尚未在`routes.rb`文件中设置适当的路由。

您需要添加`resources :audios`并设置一个音频控制器来处理请求，或者如果`audios`是另一个控制器的别名，请相应地进行设置。

- 编辑 -

如果您想通过控制器提供音频文件，您将需要`send_file`，但实际上我建议您只从资产文件夹提供静态资产，而不是通过控制器，这只会增加开销。如果您要添加/更改声音，您只需要控制器。

阅读资产管道： http: [//guides.rubyonrails.org/asset_pipeline.html](http://guides.rubyonrails.org/asset_pipeline.html)

# python - Python - 将列表中的项目与另一个列表中的项目连接起来

> ID：13729198
> 
> 赞同：-1
> 
> 时间：2012-12-05T17:41:52.143
> 
> 标签：python, list

我需要将列表中的项目与另一个列表中的项目连接起来。在我的情况下，该项目是一个字符串（更准确地说是路径）。在连接之后，我想获得一个包含连接产生的所有可能项目的列表。

例子：

```
list1 = ['Library/FolderA/', 'Library/FolderB/', 'Library/FolderC/']

list2 = ['FileA', 'FileB'] 
```

我想获得这样的列表：

```
[
    'Library/FolderA/FileA', 
    'Library/FolderA/FileB', 
    'Library/FolderB/FileA', 
    'Library/FolderB/FileB', 
    'Library/FolderC/FileA', 
    'Library/FolderC/FileB'
] 
```

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T17:45:18.573

```
In [11]: [d+f for (d,f) in itertools.product(list1, list2)]
Out[11]: 
['Library/FolderA/FileA',
 'Library/FolderA/FileB',
 'Library/FolderB/FileA',
 'Library/FolderB/FileB',
 'Library/FolderC/FileA',
 'Library/FolderC/FileB'] 
```

或者，更便携（也许更健壮）：

```
In [16]: [os.path.join(*p) for p in itertools.product(list1, list2)]
Out[16]: 
['Library/FolderA/FileA',
 'Library/FolderA/FileB',
 'Library/FolderB/FileA',
 'Library/FolderB/FileB',
 'Library/FolderC/FileA',
 'Library/FolderC/FileB'] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T17:44:21.490

您可以使用列表推导：

```
>>> [d + f for d in list1 for f in list2]
['Library/FolderA/FileA', 'Library/FolderA/FileB', 'Library/FolderB/FileA', 'Library/FolderB/FileB', 'Library/FolderC/FileA', 'Library/FolderC/FileB'] 
```

不过，您可能希望使用`os.path.join()`而不是简单的串联。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T17:45:47.077

内置[`itertools`](http://docs.python.org/2/library/itertools.html#itertools.product)模块`product()`为此定义了一个函数：

```
import itertools
result = itertools.product(list1, list2) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T18:23:29.520

`for`循环可以很容易地做到这一点：

```
my_list, combo = [], ''
list1 = ['Library/FolderA/', 'Library/FolderB/', 'Library/FolderC/']
list2 = ['FileA', 'FileB']
for x in list1:
   for y in list2:
      combo = x + y
      my_list.append(combo)
return my_list 
```

您也可以只打印它们：

```
list1 = ['Library/FolderA/', 'Library/FolderB/', 'Library/FolderC/']
list2 = ['FileA', 'FileB']
for x in list1:
   for y in list2:
      print str(x + y) 
```

# jquery - 滑动切换；新的网络开发人员在这里

> ID：13729199
> 
> 赞同：0
> 
> 时间：2012-12-05T17:41:56.403
> 
> 标签：jquery, toggle, slide, slidetoggle

这里是新的网络开发人员，所以请多多包涵……

我正在我们的网站上创建一个常见问题解答页面，其中包含 10-15 个问题，我想在单击问题后显示答案。

例子：

问：你叫什么名字？

（点击问题后，答案会向下滑动显示文字）

亚当

我还希望您能够在查看者阅读后再次单击问题以隐藏答案。

感谢您的时间！

HTML：

```
<p>Q. WHO IS REQUIRED TO PARTICIPATE? </p> 
<p>Everyone must participate. </p> 
```

JS：

```
$(document).ready(function() { 
    $("p").click(function() { 
        $("p").slideToggle(200); 
    }); 
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T17:53:34.603

最好将问题和相应答案包含在单独的 div 中。

**HTML**

```
 <div>
        <p class="question">Q. WHO IS REQUIRED TO PARTICIPATE?</p> 
        <p class="answer">Everyone must participate. </p>
    </div>
    <div>
        <p class="question">Q. MINIMUM AGE OF THE PARTICIPANT ?</p> 
        <p class="answer">26\. </p>
    </div> 
```

**JS**

```
$('.question').on('click', function(){
    $(this).next('.answer').slideToggle(200);
}); 
```

**[检查小提琴](http://jsfiddle.net/sushanth009/dBG6E/)** </p>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T17:53:43.330

### 尝试使用此代码。

即使您是初学者，使用语义标签，如，`UL`和`LI`是语义和好的。给出问题`H3`和`P`答案很有用，因为即使没有 CSS，它也可以工作。

**HTML：**

```
<ul class="faq">
    <li>
        <h3><a href="#">Question 1</a></h3>
        <p>Answer</p>
    </li>
    <li>
        <h3><a href="#">Question 2</a></h3>
        <p>Answer</p>
    </li>
</ul> 
```

**JavaScript**

```
$('.faq > li > h3 > a').click(function(){
    $(this.parentNode).next().slideToggle(200);
    return false;
}); 
```

### 小提琴：http: [//jsfiddle.net/bhvZx/](http://jsfiddle.net/bhvZx/)

# asp.net-mvc - Asp.net MVC 空 ViewResultBase.Model

> ID：13729201
> 
> 赞同：1
> 
> 时间：2012-12-05T17:42:00.630
> 
> 标签：asp.net-mvc, unit-testing

我读了一本书 Pro ASP.NET MVC 3 Framework。我对单元测试有一点问题。当我运行这个测试时，它没有通过，因为结果变量为空。

```
 // Arrange
            // - create the mock repository
            Mock<IProductRepository> mock = new Mock<IProductRepository>();
            mock.Setup(m => m.Products).Returns(new Product[] {
                new Product {ProductID = 1, Name = "P1"},
                new Product {ProductID = 2, Name = "P2"},
                new Product {ProductID = 3, Name = "P3"},
                new Product {ProductID = 4, Name = "P4"},
                new Product {ProductID = 5, Name = "P5"}
            }.AsQueryable());

            // Arrange - create a controller and make the page size 3 items
            ProductController controller = new ProductController(mock.Object);
            controller.PageSize = 3;
            // Action
            ProductsListViewModel result = (ProductsListViewModel)controller.List(2).Model;
            // Assert
            PagingInfo pageInfo = result.PagingInfo; 
```

产品控制器：

```
 public ViewResult List(int page = 1)
        {
            ProductsListViewModel viewModel = new ProductsListViewModel
            {
                Products = repository.Products
                .OrderBy(p => p.ProductID)
                .Skip((page - 1) * PageSize)
                .Take(PageSize),
                PagingInfo = new PagingInfo
                {
                    CurrentPage = page,
                    ItemsPerPage = PageSize,
                    TotalItems = repository.Products.Count()
                }
            };

            return View(viewModel);
        } 
```

我是 mvc 的新手，但对我来说奇怪的是，在 WebUI 项目中一切都很好。产品列表显示没有任何问题。

# windows - 如何允许用户选择要复制的目录？

> ID：13729202
> 
> 赞同：2
> 
> 时间：2012-12-05T17:41:59.853
> 
> 标签：windows, batch-file

我正在尝试编写一个基本上用于复制目标的批处理文件。现在，我想把它放到其他人可以使用它的地方，而无需进入并编辑目录和目的地。有没有办法让我将批处理文件写入提示的位置，询问用户想要复制的目录，并询问用户想要将其复制到的驱动器？

这是我已经使用了一段时间了。

```
@echo off
:: variable
set backupdir="Destination"
set backupcmd=xcopy /e /h /f /y /v /c /i /r /g /k /d
echo.
echo +++ Backing Up Data +++
echo.
echo.
%backupcmd% "Directory\*.*" "%backupdir%\Data"
timeout /t 2
cls
echo Backup Complete
echo.
echo.
timeout /t 2
cls
echo.
echo +++ Now taking hidden and system attributes off of folders +++
echo.
echo.
echo.
attrib -s -h "Destination\Data"
echo.
echo.
timeout /t 3 
```

有什么方法可以通过使用 xcopy 来改善这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T18:03:07.830

你可以使用：

```
SET /P variable=[promptString] 
```

从文档：

> /P 开关允许您将变量的值设置为用户输入的一行输入。在读取输入行之前显示指定的 promptString。promptString 可以为空。

你像这样使用它：

```
set /p backupdir=Enter Destination Directory: 
```

和：

```
set /p sourcedir=Enter Source Directory: 
```

然后将您的复制命令更改为：

```
%backupcmd% "%sourcedir%\*.*" "%backupdir%\Data" 
```

并且不要忘记您的`attrib`命令（应该已经在使用`%backupdir%`）：

```
attrib -s -h "%backupdir%\Data" 
```

作为替代方案，考虑允许可选的命令行参数：

```
dobackup Destination BackupDir 
```

通过这些更改实现：

```
if "%1" == "" (
    set /p backupdir=Enter Destination Directory: 
) else (
    set backupdir=%~1
)

if "%2" == "" (
    set /p sourcedir=Enter Source Directory: 
) else (
    set sourcedir=%~2
) 
```

最后，在后面添加`SETLOCAL`一行`@echo off`将使您的命名变量远离全局环境空间。

# msmq - NServiceBus 分发器无法在群集 MSMQ 上创建队列

> ID：13729203
> 
> 赞同：1
> 
> 时间：2012-12-05T17:42:04.243
> 
> 标签：msmq, nservicebus, windows-server-2008-r2, failover

我正在尝试在 Windows 故障转移群集上设置 NServiceBus 分发服务器。我已经成功地遵循了“官方”指南，并且大多数事情似乎都运行良好。除了在集群上实际启动分发器。当它启动时，它会尝试在群集 MSMQ 上创建它的队列，但被拒绝权限：

> 未处理的异常：Magnum.StateMachine.StateMachineException：状态期间 Topshelf.Internal.ServiceController`1[[NServiceBus.Hosting.Windows.WindowsHost, NServiceBus.Host, Version=3.2.0.0, Culture=neutral, PublicKeyToken=9fc386479f8a226c]] 中发生异常Initial while processing OnStart ---> System.Exception：启动端点时出现异常，已记录错误。原因：队列不存在或您没有足够的权限执行该操作。---> System.Messaging.MessageQueueException:**队列不存在或您没有足够的权限来执行操作。**

打开群集 MSMQ 管理器时，我能够创建队列，但即使我使用自己的帐户运行分发器，它也会收到此错误。

可能相关的是，我无法更改群集 MSMQ 管理器中消息队列对象的属性。例如，我尝试更改消息存储限制，我收到此错误：

> 无法设置 TEST-CLU-MSMQ 的属性
> 
> 错误：在工作组模式下安装的消息队列不支持此操作

但是，我可以在节点的 MSMQ 设置上更改此设置，并且这些设置也安装在工作组模式下。

有任何想法吗？我已经尝试重新安装集群和服务以及几乎所有内容，但无济于事。环境是Windows Server 2008R2

# xaml - ViewModel 触发 CollectionChanged 来跟踪 ID 值

> ID：13729210
> 
> 赞同：0
> 
> 时间：2012-12-05T17:42:32.667
> 
> 标签：xaml, mvvm, windows-runtime

我在一个新的 WinRT 应用程序中遇到了一种情况，我需要管理对象集合上的 ID 属性。本质上，我持有每个对象的唯一 ID，我需要为每个添加的新对象递增。这是因为我将序列化为 XML 以保存数据，因此需要自己管理此 ID。如果我使用 SQL，它将是一个自动递增字段。

我能想出的最好方法是使用从构造函数调用的方法来设置它，然后让集合更改处理程序帮助我每次更新值。

这是视图模型类：

```
using MM.Models;
using System.Collections.ObjectModel;
using System.Collections.Specialized;
using System.ComponentModel;
using System.Linq;

namespace MM.ViewModels
{
    public class VehiclesViewModel : INotifyPropertyChanged
    {
        public event PropertyChangedEventHandler PropertyChanged = delegate { };

        public VehiclesViewModel()
        {
            Vehicles = new ObservableCollection<Vehicle>();
            NewVehicle = new Vehicle();
            NextVehicleID = CalculateHighestID(Vehicles.AsQueryable()) + 1;
            Vehicles.CollectionChanged += new NotifyCollectionChangedEventHandler(VehicleCollectionChanged);
        }

        private ObservableCollection<Vehicle> _vehicles;
        public ObservableCollection<Vehicle> Vehicles
        {
            get 
            { 
                return _vehicles; 
            }
            set
            {
                if (_vehicles != value)
                {
                    _vehicles = value;
                    PropertyChanged(this, new PropertyChangedEventArgs("Vehicles"));
                }
            }
        }

        void VehicleCollectionChanged(object sender, NotifyCollectionChangedEventArgs e)
        {
            if (e.Action == NotifyCollectionChangedAction.Add)
            {
                NextVehicleID += 1;
            }
        }

        public Vehicle NewVehicle { get; set; }

        private int _nextVehicleID;
        public int NextVehicleID 
        { 
            get 
            { 
                return _nextVehicleID; 
            }
            private set
            {
                _nextVehicleID = value;
                PropertyChanged(this, new PropertyChangedEventArgs("NextVehicleID"));
            }
        }

        private int CalculateHighestID(IQueryable<Vehicle> vehicles)
        {
            var query = vehicles.OrderByDescending(v => v.VehicleID).FirstOrDefault();
            if (query != null)
            {
                return query.VehicleID;
            }
            else
            {
                return 1;
            }
        }

    }
} 
```

这是我在xaml页面上添加的文本按钮单击方法以添加项目。

```
private void Button_Click_1(object sender, Windows.UI.Xaml.RoutedEventArgs e)
{
    vm.Vehicles.Add(new Vehicle { VehicleID = vm.NextVehicleID });
} 
```

但是，永远不会调用 VehicleCollectionChanged。作为测试，我使用相同的代码从构造函数方法添加车辆，并且确实有效。

谁能解释为什么通过单击 xaml 按钮添加车辆时不会调用该方法？

此外，是否有更好的整体方法来跟踪下一条记录的 ID 值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T19:01:49.607

在您的车辆类中保留一个计数器怎么样？

```
public class Vehicle
{
    static int NextId = 1;
    static object IdLock = new Object();

    public int VehicleId { get; set; }
    ...

    public Vehicle(int nextId = 0)
    {
         // can probably use interlocked increment instead
         // of keeping a separate lock object
         lock (IdLock)
         {
             if (nextId == 0)
             {
                 VehicleId = NextId++;
             }
             else
             {
                 NextId = nextId;
                 VehicleId = nextId;
             }
         }
    }
    ...
} 
```

您可能希望根据保存的 XML 文件中的内容来设置它，而不是设置 NextId = 1。这样，它并不总是从 1 开始。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T20:52:33.320

您的 ID 是否必须是一个`int`（或增量）？它可能是一个 GUID 吗？至少那时你可以把创作留给`Vehicle`班级。至于为什么没有调用事件，您是否曾经在视图模型上重新分配“车辆”属性？您是否有理由为该属性设置公共“设置”？您可能会将新的 ObservableCollection 设置为“Vehicles”，而不是 1）从旧事件中取消挂钩，以及 2）将 CollectionChanged 事件连接到新集合。

# jquery-mobile - jQuery 移动弹出窗口未出现在中心

> ID：13729212
> 
> 赞同：10
> 
> 时间：2012-12-05T17:42:41.790
> 
> 标签：jquery-mobile

我正在使用 jQuery mobile 并尝试在页面加载时显示 jQuery pop。但是当页面加载时，弹出窗口没有出现在中心，而是弹出窗口的左上角出现在中心。

但是，一旦浏览器窗口大小发生变化，弹出窗口就会自动切换到中心（即使我按 F12 使用开发人员工具）。然后所有频繁调用 $('#popupBasic').popup("open"); 让它出现在屏幕中央。

但第一次出现在中心的弹出框的左上角。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-06-14T11:59:44.580

试试这个：data-position-to="window"。

[这是来源](http://api.jquerymobile.com/popup/)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-05-05T09:42:52.410

您可以尝试在 pageshow 上重新定位弹出窗口：

```
$( '#popupLogin' ).popup( 'reposition', 'positionTo: window' ); 
```

我认为您遇到的情况取决于浏览器完全绘制页面之前发生的定位。您可以通过像这样重新定位弹出窗口来克服这个问题：

```
$(document).on('pageshow', '.selector', function(){
  $('#popupBasic').popup('reposition', 'positionTo: window');
}); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-06-18T07:09:26.700

```
$(document).on("popupafteropen", function() {
    $('#popup').popup('reposition', 'positionTo: window');
}); 
```

您可以在打开后使用自定义弹出事件重新定位它

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-12T05:09:17.763

我遇到了同样的错误。您只想在绘制页面后显示弹出窗口。

添加您的代码来监听 pageshow 事件而不是 pageinit 事件可能会解决您的问题。它为我修好了。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-05T19:40:08.683

这是一个非常模糊的问题。

您应该提供的一些项目：

*   您正在测试什么浏览器以及什么版本？
*   什么版本的JQM？
*   是否有任何自定义 CSS 与 JQM 交互？

从 JQM 1.2 开始，可用的弹出选项：

默认值：“原点”

设置相对于弹出窗口居中的元素。它具有以下值：

“原点” 当弹出窗口打开时，将坐标集中在传递给 open() 调用的坐标上（参见方法页面）。

“窗口” 当弹出窗口打开时，位于窗口的中心。

jQuery 选择器 当弹出窗口打开时，基于选择器创建一个 jQuery 对象，并将其居中。选择器被过滤为使用 ":visible" 可见的元素。如果结果为空，则弹出窗口将在窗口中居中。

[资源](http://jquerymobile.com/demos/1.2.0-alpha.1/docs/pages/popup/#/demos/1.2.0-alpha.1/docs/pages/popup/options.html)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-02-26T15:27:37.930

当我`div`手动设置弹出窗口的宽度时，它对我有用；尝试：

```
$("#popupBasic").css("width","200px"); 
```

# c# - 通过另一个线程将局部变量修改为null，这怎么可能

> ID：13729213
> 
> 赞同：6
> 
> 时间：2012-12-05T17:42:44.507
> 
> 标签：c#, multithreading, task-parallel-library, plinq

当我在处理我们的框架的并行性时，我遇到了一个奇怪的情况，我无法想象这是为什么！我简化了情况以简单地描述它。考虑这段代码：

```
foreach(var person in personList)
{
    if (person.Name == "Mehran")
        break;
} 
```

它`personList`在多个线程之间共享。

在什么情况下有可能`person`是`null`并且我得到了`NullReferenceException`for `person.Name`？

据我所知，这个人在这里被认为是一个局部变量，如果我们进入`foreach`块，那么我们已经`personList`成功地迭代了，所以`person`在任何情况下或任何并行情况下都不应该为空。

即使`personList`被另一个线程更改，或者被引用`person`的被释放，`person`变量也应该有一个值。因为没有人可以更改`person`引用的位置。

有什么场景可以解释这种情况吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-05T17:46:23.883

> 据我所知，这个人在这里被认为是一个局部变量，如果我们进入 foreach 块，那么我们已经成功地迭代了 personList，所以 person 在任何情况下或任何并行情况下都不应该为空。

仅仅因为您`personList`成功迭代并不意味着它不包含任何空值。例如：

```
List<Person> personList = new List<Person>();
personList.Add(null);

foreach (var person in personList)
{
   // Here, person will be null
} 
```

（此外，如果*有任何东西*正在修改列表，那么您通常会遇到麻烦 - 在编写者面前它们不是线程安全的 - 但我认为这不需要成为问题的一部分。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-05T17:48:46.190

变量未修改。用于实现`foreach`构造的迭代器不是线程安全的：

从[此处](http://msdn.microsoft.com/en-us/library/cc673062.aspx)`List<T>.IEnumerable<T>.GetEnumerator()`找到的文档中：

> 只要集合保持不变，枚举数就保持有效。如果对集合进行了更改，例如添加、修改或删除元素，则枚举器将不可恢复地失效，并且其行为未定义。
> 
> 枚举器没有对集合的独占访问权；因此，通过集合进行枚举本质上不是线程安全的过程。为了保证枚举过程中的线程安全，可以在整个枚举过程中锁定集合。要允许集合被多个线程访问以进行读写，您必须实现自己的同步。
> 
> 命名空间中集合的默认实现`System.Collections.Generic`不同步。

如果存在另一个线程可能修改列表的可能性，您应该在迭代列表时始终锁定列表。

# javascript - 正则表达式匹配带引号的字符串或空格

> ID：13729224
> 
> 赞同：0
> 
> 时间：2012-12-05T17:43:01.550
> 
> 标签：javascript, regex

给定以下字符串，我想生成一个包含每个键/值的数组。

这是我的测试字符串：

```
key1:value1 key2: value2 key3:"value3" key4: "value4" key5:'value5' key6: 'value6' 
```

预期结果：

```
params[key1] == 'value1'
params[key2] == 'value2'
params[key3] == 'value3'
params[key4] == 'value4'
params[key5] == 'value5'
params[key6] == 'value6' 
```

这是我到目前为止所拥有的，但它不适用于冒号后的 " 或 ' 引号字符串或空格。

```
var re = /([^ ]*):([^ ]*)/g

while (match = re.exec(subject)) {
  params[match[1]] = match[2];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T17:50:34.613

你很近。

```
 /([^ ]+):\s*(['"]?[^ '"]+['"]?)/g 
```

那应该这样做。请注意，这不会提供验证，因此`key1: value1"`or`key1: 'value1"`仍将通过。验证需要更复杂的模式。

# java - 关于 JPA 规范 jar (javax.persistence.jar) 的问题

> ID：13729229
> 
> 赞同：3
> 
> 时间：2012-12-05T17:43:22.243
> 
> 标签：java, hibernate, jpa, websphere, eclipselink

[我对官方 JPA 2.0 规范 jar](http://download.oracle.com/otndocs/jcp/persistence-2.0-fr-eval-oth-JSpec/) ( `javax.persistence.jar`)的 jar 有一些疑问
（通常还与 JPA 实现或应用程序服务器捆绑在一起，有时名称略有不同）：

**问题：**

1.  **我在哪里**可以找到这个 jar的*官方* **来源？**

2.  这个jar似乎有2.0和2.0.1版本。是否有任何**变更日志**/发行说明？

3.  我意识到**IBM WebSphere**似乎使用了这个 jar 的**修改版本**。这是这个 jar/JPA 规范的常规方法吗？有什么不同吗？

***更新：***

只是为了澄清：我不是在**询问****实际的 JPA 实现**`javax.persistence`，而是在询问作为二进制形式的 JSR/JPA 规范的一部分的官方类。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T05:13:32.560

WebSphere 使用的是 OpenJPA 的修改版本，它基本上是 OpenJPA 的代码，但在 IBM 中编码了增强功能。

1.  您无法获取源代码，但它们大多与 OpenJPA 相同，因此对于大多数事情，您可以查看 OpenJPA 源代码
2.  IBM 没有为此提供变更日志，您可以查看 WebSphere 修复包中的更改以尝试了解发生了什么变化，并将其与 OpenJPA 的官方变更日志结合起来
3.  这是标准的，IBM 添加代码以使 OpenJPA 与 WebSphere 紧密合作，因此他们添加了代码，这仍然符合规范，所以没有问题。

关于规格罐：

WebSphere 不使用 Oracle 制定的规范 Jar，它们使用 Apache 制定的规范实现（Apache Geronimo JSR-317 JPA 2.0）。这就是罐子不同的原因。该规范不要求您使用 Oracle 实现的 jar。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T13:25:04.787

EclipseLink 是 JPA 的参考实现。当您查看 jar 的内容时，它显然来自 eclipselink。

[您可以在此处](http://www.eclipse.org/eclipselink/downloads/ri.php)下载 eclipselink 。最小的捆绑包包含一个 jar，提供 javax.persistence 的源（除其他外）。

# html - 可以一个 元素只包含一个 没有图像？

> ID：13729232
> 
> 赞同：9
> 
> 时间：2012-12-05T17:43:40.763
> 
> 标签：html, semantic-web, w3c-validation, semantic-markup, figure

`<figure>`一个元素只包含a 是语义的`<figcaption>`吗？它确实[验证](http://validator.w3.org)...

```
<figure>
  <img src="example.jpg">
  <figcaption>Image and caption</figcaption>
</figure>

<figure>
  <figcaption>Caption only</figcaption>
</figure> 
```

在这种情况下，它会对 CSS 样式产生影响：

```
figure figcaption { color: red; } 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-05T19:26:54.067

An`img`在元素中不是必需的`figure`，它恰好是常见的，并且大多数使用的示例`figcaption`也有图像。

> [http://dev.w3.org/html5/spec/single-page.html#the-figure-element](http://dev.w3.org/html5/spec/single-page.html#the-figure-element)
> 
> 因此，该`<figure>`元素可用于注释插图、图表、照片、代码列表等，这些是从文档的主要内容中引用的，但可以在不影响文档流程的情况下从该主要内容中移开，例如页面的一侧、专用页面或附录。
> 
> [http://dev.w3.org/html5/spec/single-page.html#the-figcaption-element](http://dev.w3.org/html5/spec/single-page.html#the-figcaption-element)
> 
> 该元素表示 figcaption 元素的父图形元素（**如果有**`<figcaption>`）的其余内容的标题或图例。

 **请注意“**如果有**”部分，这使我相信除 之外的内容`figcaption`可能不存在并且仍然有效。然而，正如 Alochi 所指出的，它暗示了对元素的滥用，因为没有内容可供标题描述。

*在当前*的规范示例中有一个示例，即非图像内容伴随着 figcaption，所以我认为可以公平地假设没有图像是完全可以的：

> 在这里，一首诗的一部分是用图形标记的。
> 
> ```
> <figure>
>   <p>'Twas brillig, and the slithy toves<br>
>   Did gyre and gimble in the wabe;<br>
>   All mimsy were the borogoves,<br>
>   And the mome raths outgrabe.</p>
>   <figcaption>
>     <cite>Jabberwocky</cite> (first verse).
>     Lewis Carroll, 1832->  98
>   </figcaption>
> </figure> 
> ```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-05T19:28:42.483

正如 Michael Malinovskij 回答的那样，图形元素应该包含“流内容”以及 figcaption。

[HTML5 规范对流内容有这样的说法](http://dev.w3.org/html5/spec/content-models.html#palpable-content)

> 作为一般规则，其内容模型允许任何流式内容或短语内容的元素应具有至少一个子节点，该子节点是可触知的内容并且不具有指定的隐藏属性。
> 
> 但是，此要求不是硬性要求，因为在许多情况下元素可以合法地为空，例如，当它用作稍后将由脚本填充的占位符时，或者当元素是模板，并且会在大多数页面上填写，但在某些页面上不相关。

因此，除了 figcaption 之外没有任何其他内容**是有效**的，但是除非您打算稍后填写内容，否则它可能无法传达有用或正确的含义，这可能被描述**为非语义**。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-05T17:49:11.433

**图允许的内容：**

*   一个 figcaption 元素，后跟流内容
*   流内容后跟可选的 figcaption 元素

[(c) w3c/图](http://dev.w3.org/html5/markup/figure.html)**

# android - 解析具有多个对象的json字符串

> ID：13729233
> 
> 赞同：0
> 
> 时间：2012-12-05T17:43:46.827
> 
> 标签：android, json

如何解析以下内容以检索以下内容。

```
{"docs": [
    "SolrDocument[{content_type=[text/plain], description=/mnt/sdcard/A.txt, id=4df6fa43-1a99-4475-bc5b-80dd0ab6d114, name=uploadedfile}]",
    "SolrDocument[{content_type=[text/plain], description=asdf.png, id=9fb20d5d-cf39-4635-9a22-64560124809e, name=uploadedfile}]"]
} 
```

我需要将描述检索到一个字符串数组中，并将 id 检索到另一个字符串数组中。我试过

```
a="docs"
JSONObject jobj = new JSONObject(line);
JSONArray IDS = (JSONArray) jobj.get(a); 
```

这有效，但它返回一个字符串数组

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T18:04:45.403

您尝试解析的数据不是有效的 JSON，因此您现在处于 RegEx 领域。因此，从 JSONArray 中读取每一行，您可以像这样提取您所追求的内容：

```
String data = "SolrDocument[{content_type=[text/plain], description=/mnt/sdcard/A.txt, id=4df6fa43-1a99-4475-bc5b-80dd0ab6d114, name=uploadedfile}]";
Pattern values = Pattern.compile("(description|id)=([\\S]+),", Pattern.CASE_INSENSITIVE);
Matcher matches = values.matcher(data);
while(matches.find()) {
  System.out.println(matches.group(1) + "=" + matches.group(2));
} 
```

这将打印出：

```
description=/mnt/sdcard/A.txt
id=4df6fa43-1a99-4475-bc5b-80dd0ab6d114 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T18:08:01.910

JSONArray“文档”中的元素不是有效的 JSON 对象。您必须具有“键”：“值”对才能有效。

例如：

```
{
    "docs": [
        {
            "id": 912345678901,
            "text": "How do I read JSON on Android?",
            "geo": null,
            "user": {
                "name": "android_newb",
                "followers_count": 41
            }
        },
        {
            "id": 912345678902,
            "text": "@android_newb just use android.util.JsonReader!",
            "geo": [
                50.454722,
                -104.606667
            ],
            "user": {
                "name": "jesse",
                "followers_count": 2
            }
        }
    ]
} 
```

有很多网站可以验证您的 JSON，例如[JSONLint](http://www.jsonlint.com)

在我们回答您的问题之前，请先修复您的 JSON。

# php - 用 php 加载图像并显示在画廊上

> ID：13729234
> 
> 赞同：1
> 
> 时间：2012-12-05T17:43:47.940
> 
> 标签：php, jquery, galleryview

我制作了一个javascript代码，可以在目录（php）中加载动态图像，然后使用jquery galery插件显示它们。

客户端加载所有图片后，我无法运行galleryView。唯一的方法是使用延迟命令。

我不必说这种方法的缺点。有谁知道如何“纠正”脚本，以便在加载所有图像后调用图库插件？

```
<script type="text/javascript">
    $("document").ready(function() {
         $('#aa').load('get_fotos.php').delay(2000).queue(function() {
              $('#aa').galleryView({
                     panel_width: 800,
                     panel_height: 400,
                     show_filmstrip_nav: false,
                     enable_slideshow: false,
                     panel_animation: 'crossfade',
                     frame_opacity: 1,
                     show_infobar: false,
                     frame_width: 80,
                     frame_height: 40,
                     // frame_scale: 'fit',
                });
        });
    });
</script> 
```

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T11:15:19.073

您可以通过以下方式检查：

它对我有用，希望它有所帮助。

```
imageArray = new Array();

imageArray[0] = 'image1.jpg'; // your image path
imageArray[1] = 'image2.jpg'; // your image path
htmldata='';
count = 0;
imgArray = new Array();

$.each(imageArray, function(i,item){
    var image=new Image();
    $(image).bind("load", {}, function(event) {
        count++;
        imageArray[i] =  $(image).attr("src");
        if(count==2){
            $("#imageHolder").empty();
            $.each(imageArray, function(j,item){
                htmldata = '<img id="image'+j+'" src="' + imageArray[j] +'" />';    //create ur image tag u need to call
                $("#imageHolder").append(htmldata);
            });

            $('#aa').galleryView({//call your bind method for plug in
            });
        }
    });
    image.src = imageArray[i]; 
```

# java - 如何生成具有特定概率密度函数的随机数？

> ID：13729243
> 
> 赞同：3
> 
> 时间：2012-12-05T17:44:11.050
> 
> 标签：java, random, probability-theory

我正在尝试为移动无线网络建模阴影和快速衰落。对于快速衰落，瑞利衰落是一个合理的使用模型。信道响应的包络将是瑞利分布的。调用这个随机变量 R，它的概率密度函数 (PDF) 为

PR(r) = ((2r)/Ω)*exp(-r^2/Ω), r >= 0, Ω = 2σ^2

[http://en.wikipedia.org/wiki/Rayleigh_fading](http://en.wikipedia.org/wiki/Rayleigh_fading)查看写得很好的方程。

所以，我有 PDF，现在我只是想知道如何从中获取随机变量？

我看过这些问题：

[在 Ruby 中生成符合概率分布的数字数组？](https://stackoverflow.com/questions/4550758/generate-array-of-numbers-that-fit-to-a-probability-distribution-in-ruby)

[生成具有概率分布的随机数](https://stackoverflow.com/questions/3109670/generate-random-numbers-with-probabilistic-distribution)

但我仍然不确定该怎么做。我花了很长时间才理解 PDF，所以如果有人知道在 Java 中使用特定 PDF 获取随机变量的方法，那将不胜感激！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T17:53:05.337

[瑞利分布是威布尔分布](http://en.wikipedia.org/wiki/Weibull_distribution)的一个特例。如果你用谷歌搜索，有很多用 Java 编写的 Weibull 生成器，例如：

*   [http://commons.apache.org/math/apidocs/org/apache/commons/math3/distribution/WeibullDistribution.html](http://commons.apache.org/math/apidocs/org/apache/commons/math3/distribution/WeibullDistribution.html)
*   [http://www.iro.umontreal.ca/~simardr/ssj/doc/html/umontreal/iro/lecuyer/randvar/WeibullGen.html](http://www.iro.umontreal.ca/~simardr/ssj/doc/html/umontreal/iro/lecuyer/randvar/WeibullGen.html)
*   [http://www.icsa.inf.ed.ac.uk/research/groups/hase/simjava/distributions/doc/eduni/distributions/Weibull.html](http://www.icsa.inf.ed.ac.uk/research/groups/hase/simjava/distributions/doc/eduni/distributions/Weibull.html)
*   [http://www.ee.ucl.ac.uk/~mflanaga/java/PsRandom.html](http://www.ee.ucl.ac.uk/~mflanaga/java/PsRandom.html)

从给定分布生成随机数的一种方法是生成均匀分布在 0 和 1 之间的随机数，并将目标分布的逆[CDF](http://en.wikipedia.org/wiki/Cumulative_distribution_function)应用于该随机数。参见[维基百科](http://en.wikipedia.org/wiki/Inverse_transform_sampling)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T18:10:18.683

对于您的情况，如下所示：

```
 Random generator = new Random();
 double r = Math.sqrt(-Omega*Math.log(1-generator.nextDouble())); 
```

# asp.net - ASP.NET 4 路由文件扩展

> ID：13729245
> 
> 赞同：1
> 
> 时间：2012-12-05T17:44:21.390
> 
> 标签：asp.net, routing

无论位置如何，如何使用 ASP.NET 4 路由将 *.x2 路由到 *2.jpg？

gfx/test.x2 => gfx/test2.jpg

图片/sample.x2 => 图片/sample2.jpg

# javascript - 乘法中的 NaN

> ID：13729247
> 
> 赞同：6
> 
> 时间：2012-12-05T17:44:30.583
> 
> 标签：javascript

我正在尝试这段代码，但我得到的是 NaN

```
a = unidade.val();
b = unitario.val();
//alert(a);5
//alert(b);50,00
$(total).val(a * b); //NaN 
```

为什么？因为是一个`int*float`？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-05T17:45:15.090

您必须在乘法之前解析字符串，因为[val](http://api.jquery.com/val/)总是返回一个字符串并且`"50,00"`不能自动转换为数字。

`parseFloat("50,1")`给你`50`。如果这里的逗号是小数点分隔符，则必须用点代替。

所以你可能需要

```
a = parseFloat(unidade.val().replace(",", ".");
b = parseFloat(unitario.val().replace(",", "."); 
```

**编辑 ：**

如果您想允许格式为 的数字`2.500,00`，那么我建议使用以下代码：

```
function vf(str) {
   return parseFloat(str.replace(".", "").replace(",", "."));
}
a = vf(unidade.val());
b = vf(unitario.val()); 
```

但是，如果您的用户喜欢（或期望）美式表示法，那就很危险了。如果字段包含逗号，我可能会坚持使用美式表示法并显示错误。

请注意，HTML5 建议`<input type=number>`强制用户输入数字并让您直接获取数字。请参阅[参考资料](http://www.w3.org/TR/html-markup/input.number.html)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-05T17:48:26.123

看起来你从`val()`函数中获取字符串。

您可以使用`Number`, 或`parseInt`, or`parseFloat`来转换类型

```
$(total).val(Number(a) * Number(b)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T17:48:54.017

您必须在乘法之前解析字符串！

注意：如果操作数是数字，则执行常规算术乘法，这意味着两个正数或两个负数等于一个正数，而具有不同符号的操作数产生一个负数。如果结果太高或太低，则结果为 Infinity 或 –Infinity。

如果任一操作数为 NaN，则结果为 NaN。

如果 Infinity 乘以 0，则结​​果为 NaN。

如果 Infinity 乘以除 0 以外的任何数字，则结果为 Infinity 或 –Infinity，具体取决于第二个操作数的符号。

如果 Infinity 乘以 Infinity，则结果为 Infinity。

# osgi - 如何将自定义 osgi 包添加为新依赖项？

> ID：13729259
> 
> 赞同：5
> 
> 时间：2012-12-05T17:45:09.120
> 
> 标签：osgi, openxml, osgi-bundle, apache-servicemix

我需要处理`xlsx`OSGi 包中的 Excel 文档，但`org.apache.servicemix.bundles.poi`缺少使用 2007 和更早格式的类。

我创建了一个带有完整 apache poi 的 OSGi 包（jar 文件）（包括`ooxml`官方 apache poi 包中不存在的类）。我用[了这个pom。](http://servicemix.396122.n5.nabble.com/file/n5009396/pom.xml)

所以，经过一些努力，我得到了我想要的捆绑包。现在的问题是如何将它与我现有的捆绑包一起使用？我如何告诉它导入我需要的东西？从理论上讲，这个 pom 文件`<servicemix.osgi.export>`列出了要导出的命名空间，我应该能够将它们导入我的包中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-07-28T02:14:58.940

如果您所做的只是用 OSGI 捆绑清单信息包装 Apache POI，请考虑使用预打包且免费提供的 Eclipse Orbit 项目输出：http: [//download.eclipse.org/tools/orbit/downloads/](http://download.eclipse.org/tools/orbit/downloads/)

该站点包括多个版本的 Apache POI 以及许多其他 OSS 项目作为 OSGI 捆绑包。除了您之外，还有人维护、构建它们，还有许多其他人也在使用它们。

# ios - 我应该如何设置带有 UIControls 的 UITableViewCell 子类？

> ID：13729260
> 
> 赞同：0
> 
> 时间：2012-12-05T17:45:11.937
> 
> 标签：ios, uitableview, subclass

我有一个动态生成的 UITableView（所以我必须使用原型单元，而不是静态单元），上面有很多单元。每个单元格上都会有一个 UILabel。此外，每个单元格还将至少有一个 UIControl（截至目前，它可能是 UITextfield 或 UISegmentedControl，但我希望保持它的灵活性，以防将来添加其他内容）。

用户将通过并将所有控件设置为他们想要的状态，然后在最后按下“计算”按钮。单击该按钮时，我将需要能够获取有关用户对每个控件所做的操作的信息（用户在每个文本字段中输入了什么文本，他们在每个控件中选择了哪个段等） .

设置它的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T20:47:53.877

您应该从填充表格的模型对象中获取这些值，而不是从表格本身。如果不了解更多有关数据源的信息以及用户单击按钮时需要哪些值，就很难知道应该如何执行此操作——您需要来自所有行的值吗？仅从其单元格具有标签 cellLabel 的行（如果是，您如何知道将哪个 cellLabel 传递给该方法）？

可以清理多少在很大程度上取决于数据的结构。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T17:45:11.937

现在，我有几个 UICell 子类，一个用于迄今为止我需要的每个组合（所以我有一个 LabelTextboxCell、LabelSegmentCell、LabelSegmentTextboxCell、LabelTextTextCell 等）。当我调用以获取该单元格的信息时，调用中的代码如下所示：

```
-(NSString *) getValueFor:(NSString *)cellLabel fromControl:(NSInteger *)controlCount inTable:(UITableView *)table
{
    if ([cellLabel isEqualToString:@"Label1"] || [cellLabel isEqualToString:@"Label3"])
    {
        for (LabelTextboxSegmentCell *cell in table.visibleCells)
        {
             if ([cell.label.text isEqualToString:cellLabel])
             {
                 if (controlCount == 1)
                 {
                     return cell.textfield.text;
                 }
                 else if (controlCount == 2)
                 {
                     return [cell.segment titleForSegmentAtIndex:[cell.segment selectedSegmentIndex]];
                 }
             }
             //else {continue - this is not the cell I want)
         }
    }
    else if ([cellLabel isEqualToString:@"Label2"])
    {
        //...same for loop structure and such as before except specific to LabelTextTextCell
    }
    //.... couple more else ifs and their loops
} 
```

这真糟糕。它有效，但它很混乱，容易出错，将来很难添加，并且完全违背最佳实践。但这是迄今为止我想出的最好的。一定有更好的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T17:01:53.390

单元格在 tableView 中动态地来来去去。使用它们来存储值会让你发疯。我建议使用可变数组来存储数据并为单元格提供所需的内容。

这是一个简单的 3 个步骤的解决方案。

1，子类化一个 UITableCell 并将其用于所有原型单元格。在单元格子类中您所要做的就是设置单元格中任何元素的所有属性（并在 .m 文件中合成它们）

2，在 IB 中，将所有单元格的类设置为您刚刚创建的 UITableCell 子类，这是关键部分，在 IB 中，控制从单元格拖动到您想要链接到的任何元素（在该单元格中） . 这对于第三步的工作是必不可少的。

3，在您的 UITableViewController 中，在 cellForRowAtIndexPath: 方法中，使用您的单元格子类并使用 tableView 的索引（您在该方法调用单元格中获得）标记您想要的任何内容。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellOneID = @"CellOne";
    MySubclassTableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    // Configure the cell...

    cell.textFieldOne.tag = indexPath.row;
    cell.textFieldOne.delegate = self;

    cell.labelTwo.text = [myMutableArray objectForIndex:indexPath.row];
    cell.labelTwo.tag = indexPath.row;

    return cell;
} 
```

您可以通过更改数组中的相应对象然后调用来更改标签文本：

```
[self.tableView reloadData]; 
```

然后，当您的 textField 调用说它正在发生事情时，您可以检查它的标签并知道它是哪一个。（当然是通过在 VC 中实现 UITextField 委托方法）

# zend-framework - 编辑对象的表格

> ID：13729268
> 
> 赞同：-1
> 
> 时间：2012-12-05T17:45:29.667
> 
> 标签：zend-framework

我需要创建一个显示对象属性的表单来编辑它们。

上个月我使用了 symfony，我不得不在控制器中这样做：

```
// retrieve the object $user from the database and then
$this->form = new UserForm($user); 
```

我应该在 zf 1 中做什么？创建一个构造函数？是否已经对此有所了解？

另一个问题：通常如何调用该操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T19:01:41.737

在 ZF 中，您将构建一个[Zend_Form](http://framework.zend.com/manual/1.12/en/zend.form.html)，它以您的 User 对象为模型。称之为用户表单。然后，当您需要在 CRUD 操作中使用该表单时，您将从控制器实例化该表单，检索您的 User 对象，然后使用该对象填充表单的值。

您可以在控制器上内联构建用户表单......`$form = new Zend_Form...`或者，正如我通常喜欢的那样，编写一个扩展 Zend_Form 的类 User_Form。使您的表单更易于管理和重用。

这是一些示例代码...

我假设您可以编写 User_Form 类，文档应​​该解释所有这些......让我们说它是一个包含名字和姓氏的几个文本元素的表单。

在您的控制器上...

```
$user = new User::Factory(array('id' => 1));

$form = new User_Form('myUserForm');

//keys would be the name of the form elements on the User Form
$formValues = array( 'firstName' => $user->getFirstName(), 
                     'lastName' => $user->getLastName());

$form->populate($formValues); 
```

然后你只需将 $form 传递给视图并渲染它。显然需要在控制器上编写更多逻辑来处理首次加载/提交场景。希望这至少能让你开始。如果您正在寻找可以从您传递的对象自动生成表单的东西，那么您就不走运了。

不知道你在搜索什么词。也许是“实例化”或“声明”？

# wcf - 使用安全模式 =“TransportWithMessageCredential”测试 WCF 服务 wsHttpBinding

> ID：13729270
> 
> 赞同：2
> 
> 时间：2012-12-05T17:45:39.230
> 
> 标签：wcf, ws-security, wshttpbinding

我尝试使用soapUI进行测试，但是启用安全性时它不支持wsHttpBinding。使用 wsHttpBinding 并且没有安全性时，soapUI 确实有效。

我们还尝试了 WCF Storm，它确实有效，我们可以加载我们的客户端配置文件，但是我们正在寻找 WCF Storm 的其他替代品。

是否有任何其他类似于soapUI的工具，SO推荐并且可以与上述配置一起使用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T11:55:09.443

`wsHttpBinding`只是微软对一些 WS-* 相关配置的晦涩命名。SOAPUI 支持一些与安全相关的配置，如果您使用`TransportWithMessageCredential`安全模式，您应该没有问题。您只需要连接到正确安全的 HTTPS 端点并为您的请求 [提供凭据（用户名） （可能还包括时间戳）。](http://www.soapui.org/SOAP-and-WSDL/applying-ws-security.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-08-31T14:57:57.137

我的解决方案是使用传出 WS-Security 配置，我将解释这些步骤：

*   “显示项目视图”（右键单击 Proyect 文件夹）
*   转到“WS-Security 配置”选项卡
*   在顶部添加图标并指定“用户”或其他内容。
*   然后转到第二个添加图标（底部面板）并在“PasswordText”中输入用户名、密码和 PasswordType（留下其他 2 个复选框）。
*   最后转到soap 请求，选择基本授权和“传出WSS：”用户或您创建的其他用户。

添加传出 WSS 后请记住关闭所有请求窗口。

希望有帮助，加油。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T07:07:39.717

尝试使用 wsHttpBinding 和 TransportWithMessageCredential 安全设置测试 wcf 服务时，我遇到了类似的问题。

每次调用 SoapUI 都会收到一条错误消息，说明：

> 无法处理该消息。这很可能是因为操作“ [http://www.mysite.com/ISomeService/SomeMethod](http://www.mysite.com/ISomeService/SomeMethod) ”不正确，或者因为消息包含无效或过期的安全上下文令牌，或者因为绑定之间存在不匹配。如果服务由于不活动而中止通道，则安全上下文令牌将无效。为了防止服务过早中止空闲会话，请增加服务端点绑定的接收超时。

经过多次试验和错误并浏览了网络上的大量文章后，我需要启用 WS-A 寻址并启用 wsa:To 元素。

这让我更进一步，但我仍然收到相同的错误消息。

那么这个安全上下文的东西呢，是否需要呢？我的客户在每次通话后都会进行处理，因此不需要 SCT ref: [SO post](https://stackoverflow.com/questions/1683724/what-are-the-impacts-of-setting-establishsecuritycontext-false-if-i-use-https)。

设置 setupSecurityContext="false" 让我摆脱了安全上下文令牌错误，事实证明一切都准备好了。

但是，如果您确实禁用了安全上下文，并且没有启用 wsa:To 元素，那么您将收到如下错误消息：

> 由于 EndpointDispatcher 的 AddressFilter 不匹配，接收方无法处理带有 To '' 的消息。检查发送方和接收方的 EndpointAddresses 是否一致。

但请注意参考帖子。如果您没有在每次调用后处理客户端，那么添加另一个单独的绑定并将建立安全上下文设置为 false 可能是明智之举。

换句话说：据我目前所知，SoapUI 似乎不支持安全上下文。

# assembly - MIPS 汇编分支如果小于

> ID：13729275
> 
> 赞同：3
> 
> 时间：2012-12-05T17:46:10.270
> 
> 标签：assembly, mips

我一直在研究一个非常基本的 MIPS 程序，它计算一些关于门票销售的东西。我已经实现了所有功能，但是当我执行我的 IF 语句（blt --> branch if less than）时，我遇到了一些错误。我将以下数据存储在临时寄存器中：

```
- $t0 = # of VIP tickets.
- $t1 = # of General Admission tickets.
- $t2 = # of Box Office tickets.
- $t4 = Average ticket sales. 
```

我检查了值是否已相应存储，如果条件为 FALSE，代码确实有效，但如果满足条件，它将分支并仍然在分支之前打印代码。这是我的代码的一部分：

```
 blt $t0, $t4, VIP_LESS  # if $t0 < $t4 then VIP
  b VIP_GREAT
  VIP_LESS:
    li $v0, 4
    la $a0, less_avg_vip
    syscall 
  VIP_GREAT:
    li $v0, 4
    la $a0, great_avg_vip
    syscall 
  blt $t1, $t4, GEN_LESS # if $t1 < $t4 then GEN
  b GEN_GREAT
  GEN_LESS:
    li $v0, 4
    la $a0, less_avg_general
    syscall
  GEN_GREAT:
    li $v0, 4
    la $a0, great_avg_general
    syscall 
  blt $t2, $t4, BOX_LESS  # if $t2 < $t4 then BOX_LESS
  b BOX_GREAT
  BOX_LESS:
    li $v0, 4
    la $a0, less_avg_box
    syscall 
  BOX_GREAT:
    li $v0, 4
    la $a0, great_avg_box
    syscall 
  li $v0, 4
  la $a0, endl
  syscall 
```

谁能明白我为什么会遇到这个问题？我的程序的输出如下所示：

```
VIP: 1349 tickets
General: 5278 tickets
Box: 4367 tickets

Average: 3215 tickets

VIP: Less than average.
General: Greater than average.
General: Less than average.
Box: Greater than average.
Box: Less than average. 
```

编辑：工作代码。

```
 blt $t0, $t4, VIP_LESS  # if $t0 < $t4 then VIP
  li $v0, 4
  la $a0, great_avg_vip
  syscall
  j GENERAL_IF
  VIP_LESS:
    li $v0, 4
    la $a0, less_avg_vip
    syscall 
  GENERAL_IF: 
    blt $t1, $t4, GEN_LESS # if $t1 < $t4 then GEN
    li $v0, 4
    la $a0, great_avg_general
    syscall 
    j BOX_IF
    GEN_LESS:
      li $v0, 4
      la $a0, less_avg_general
      syscall
  BOX_IF:
    blt $t2, $t4, BOX_LESS  # if $t2 < $t4 then BOX_LESS
    li $v0, 4
    la $a0, great_avg_box
    syscall 
    j END_IF
    BOX_LESS:
      li $v0, 4
      la $a0, less_avg_box
      syscall 
  END_IF:
    li $v0, 4
    la $a0, endl
    syscall 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T17:56:25.230

您只需要一些无条件分支，这样您就不会同时执行“大于”和“小于”代码路径，例如

```
 blt $t0, $t4, VIP_LESS  # if $t0 < $t4 then VIP
  li $v0, 4
  la $a0, great_avg_vip
  syscall 
                <<< you need an unconditional branch here to VIP_GE
  VIP_LESS:
    li $v0, 4
    la $a0, less_avg_vip
    syscall 
    xor $a0, $a0, $a0
  VIP_GE:       <<< label here so that you can skip previous block
  ... 
```

您需要为三个 if/else 块中的每一个执行此操作。

# jquery - 如果所有元素具有相同的 ID，则使它们可拖动

> ID：13729279
> 
> 赞同：2
> 
> 时间：2012-12-05T17:46:16.117
> 
> 标签：jquery

使用 JQuery，当元素都具有相同的 ID 时，我试图使多个元素可拖动。是否可以使用 JQuery 做到这一点？

（这里，有两个 id 为“可拖动”的 div，我想让它们都可拖动。）

相关代码在这里：http: [//jsfiddle.net/zcJwu/](http://jsfiddle.net/zcJwu/)

```
<!doctype html>

<html lang="en">
<head>
    <meta charset="utf-8" />
    <title>jQuery UI Draggable - Default functionality</title>
    <link rel="stylesheet" href="http://code.jquery.com/ui/1.9.2/themes/base/jquery-ui.css" />
    <script src="http://code.jquery.com/jquery-1.8.3.js"></script>
    <script src="http://code.jquery.com/ui/1.9.2/jquery-ui.js"></script>
    <link rel="stylesheet" href="/resources/demos/style.css" />
    <style>
    #draggable { width: 150px; height: 150px; padding: 0.5em; }
    </style>
    <script>
    $(function() {
        $( "#draggable" ).draggable();
    });
    </script>
</head>
<body>

<div id="draggable" class="ui-widget-content">
    <p>Drag me around</p>
</div>
<div id="draggable" class="ui-widget-content">
    <p>Drag me around</p>
</div>

</body>
</html>​ 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-05T17:47:57.390

****HTML**页面中的**ID**应该是唯一的。**

 **如果您提供重复**的 Id**并将其用作选择器，它将始终选择它遇到的第一个元素。`So it will never work.`

尝试改用一个**类**。

您可以将调用的类提供给`draggable`您要拖动的所有元素。

```
$( ".draggable" ).draggable(); 
```

**[检查小提琴](http://jsfiddle.net/sushanth009/zcJwu/3/)**

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-05T17:47:49.777

你必须使用一个类。ID 只能使用一次。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-05T17:49:39.290

**您的标记无效，因为 ID 必须是唯一的，但是您可以使用此（不推荐。** ）强行使其工作：

```
$("[id=draggable]").draggable() 
```

要选择所有具有可拖动类的元素，请按照与 css 样式表中相同的方式进行操作。

```
$(".draggable").draggable(); 
```

jQuery 选择器几乎完全模仿了 css 选择器样式。如果您知道如何使用 CSS 选择元素，那么您就会知道如何使用 jQuery 选择元素。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-05T17:53:13.017

你应该使用classees，而不是复制ID。

```
<style>
.draggable { width: 150px; height: 150px; padding: 0.5em; }
</style>
<script>
$(function() {
    $( ".draggable" ).draggable();
});
</script>
<div id="draggable1" class="ui-widget-content draggable">
    <p>Drag me around</p>
</div>
<div id="draggable2" class="ui-widget-content draggable">
    <p>Drag me around</p>
</div> 
```

检查更新的小提琴 [http://jsfiddle.net/zcJwu/2/](http://jsfiddle.net/zcJwu/2/)**

# razor - 使用 ASP.NET MVC4 和 Razor 设计 HTML5 页面

> ID：13729288
> 
> 赞同：1
> 
> 时间：2012-12-05T17:47:16.530
> 
> 标签：razor, asp.net-mvc-4, expression-web

我正在使用 Razor 引擎开发 ASP.NET MVC4 站点。我发现让我慢下来的一件事是网站的设计和样式。目前，我编辑视图、加载站点、转储 HTML 源代码，然后使用 Expression Web 对其进行编辑。

这是相当痛苦的。它需要使用所有正确的 css 文件创建一个临时位置，创建“假”html 页面，然后将它们加载到编辑器中以获得我想要的外观，然后编辑我的 razor 视图以复制该外观。

我觉得我做错了。但我还没有看到任何其他选择。我梦想有一些类似 WPF 的设计视图，但我认为这不存在。除此之外，人们如何使用 MVC 和 Razor 设计富互联网应用程序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T17:59:34.130

我建议使用 Visual Studio 来打造非常高效的开发环境。 [点击这里下载VS 2012](http://www.microsoft.com/visualstudio/eng/downloads)

它非常有效，因为可以通过此工具访问和更改所有文件类型，无需转储文件。这是微软的宝贝，他们投入了大量的时间和精力使其成为.NET 开发人员的终极工具。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T23:27:15.543

VS 的页面检查器功能是否解决了您的一些问题？[http://msdn.microsoft.com/en-us/vs11trainingcourse_pageinspector.aspx](http://msdn.microsoft.com/en-us/vs11trainingcourse_pageinspector.aspx)

# c# - 循环触发插入语句两次

> ID：13729289
> 
> 赞同：4
> 
> 时间：2012-12-05T17:47:27.697
> 
> 标签：c#, asp.net, checkboxlist

我有一个循环遍历复选框列表中的选择。问题是循环为每个选择触发两次插入语句。因此，如果用户选中一个框，它会插入 2 行。如果用户选择 3 个框，则插入 6 行，依此类推。如何确保每次选择只触发一次插入？

```
protected void btn_test_Click(object sender, EventArgs e) {
    SqlCommand cmd = new SqlCommand();
    cmd.CommandText = "Insert into t_ap_line_setup  (line,date) values (@line,getdate())";
    cmd.Connection = this.sqlConnection1;
    this.sqlConnection1.Open();
    foreach ( ListItem li in lines_list.Items ) {
        if (li.Selected == true) {
            cmd.Parameters.Clear();
            cmd.Parameters.AddWithValue("@line", li.Text);
            cmd.ExecuteNonQuery();
        }
    }
    this.sqlConnection1.Close();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T18:08:08.767

看起来循环没有运行两次。我怀疑您的点击处理程序由于重复的事​​件订阅而触发了两次。

# java - Java.Util.Scanner 的 NoSuchElementException

> ID：13729294
> 
> 赞同：20
> 
> 时间：2012-12-05T17:47:38.440
> 
> 标签：java, java.util.scanner

我对 Java 很陌生，但正在阅读 Java：如何编程（第 9 版）一书，并且已经达到了一个示例，在我的一生中我无法弄清楚问题是什么。

这是教科书中源代码示例的（略微）增强版本：

```
import java.util.Scanner;
public class Addition {
  public static void main(String[] args) {
    // creates a scanner to obtain input from a command window

    Scanner input = new Scanner(System.in);

    int number1; // first number to add
    int number2; // second number to add
    int sum; // sum of 1 & 2

    System.out.print("Enter First Integer: "); // prompt
    number1 = input.nextInt(); // reads first number inputted by user

    System.out.print("Enter Second Integer: "); // prompt 2 
    number2 = input.nextInt(); // reads second number from user

    sum = number1 + number2; // addition takes place, then stores the total of the two numbers in sum

    System.out.printf( "Sum is %d\n", sum ); // displays the sum on screen
  } // end method main
} // end class Addition 
```

我收到“NoSuchElementException”错误：

```
Exception in thread "main" java.util.NoSuchElementException
at java.util.Scanner.throwFor(Scanner.java:838)
at java.util.Scanner.next(Scanner.java:1461)
at java.util.Scanner.nextInt(Scanner.java:2091)
at java.util.Scanner.nextInt(Scanner.java:2050)
at Addition.main(Addition.java:16)
Enter First Integer: 
```

我知道这可能是由于源代码中的某些内容`Scanner`与`java.util`.

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-05T17:54:21.673

`NoSuchElementException` *由 Enumeration 的方法抛出，`nextElement`表示枚举中没有更多元素。*

[http://docs.oracle.com/javase/7/docs/api/java/util/NoSuchElementException.html](http://docs.oracle.com/javase/7/docs/api/java/util/NoSuchElementException.html)

这个怎么样 ：

```
if(input.hasNextInt() )
     number1 = input.nextInt(); // if there is another number  
else 
     number1 = 0; // nothing added in the input 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T17:53:24.733

您应该`hasNextInt()`在为变量赋值之前使用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-05T18:04:24.217

`NoSuchElementException`[如果没有更多的令牌可用](http://docs.oracle.com/javase/6/docs/api/java/util/Scanner.html#next%28%29)，将被抛出。这是由于调用`nextInt()`时没有检查[是否有任何可用的整数](http://docs.oracle.com/javase/6/docs/api/java/util/Iterator.html#hasNext%28%29)。为了防止这种情况发生，您可以考虑使用`hasNextInt()`来检查是否有更多可用的令牌。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2021-03-09T09:54:50.297

当我输入诸如 5.3、23.8 之类的数字时，我在 nextDouble() 中遇到了这个错误 ...扫描仪 = 新扫描仪（System.in）.useLocale（Locale.US）；

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-01-13T08:42:41.313

您必须在最后添加 input.close() ...

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-04-01T08:18:37.117

此错误主要发生在您正在测试代码的 0nline IDE 的情况下。它没有正确配置，就像您在任何其他 IDE/记事本上运行相同的代码一样，它可以正常工作，因为在线 IDE 的设计方式不是它会调整您格式的输入代码，因此您必须将输入作为Online IDE 支持。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-10-07T23:17:09.487

如果可以的话，我今天解决了这个问题，因为我意识到我有多个函数，每个函数都使用了一个 Scanner 的实例。所以基本上，尝试重构，以便您只**打开一个实例，然后最终关闭**- 这应该可行。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-12-05T17:57:26.267

`Integer#nextInt`throws `NoSuchElementException`- 如果输入用尽

您应该检查是否有下一行`Integer#hasNextLine`

```
if(sc.hasNextLine()){
    number1=sc.nextInt();
} 
```

# javascript - HTML5 File API：如何查看 readAsText() 的结果

> ID：13729301
> 
> 赞同：40
> 
> 时间：2012-12-05T17:48:17.030
> 
> 标签：javascript, html, fileapi

当`readAsText()`函数完成时，结果存储在`.result`

如何查看读取的文件内容是否正确`.result`？

```
 fr = new FileReader();
 fr.readAsText(file);
 var x = fr.result;
 console.log(x); //does not display anything on console 
```

现在如何显示`.result`对象以验证内容？

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2012-12-05T17:53:03.063

`readAsText`是异步的，因此您需要使用`onload`回调来查看结果。

试试这样的，

```
var fr = new FileReader();
fr.onload = function(e) {
    // e.target.result should contain the text
};
fr.readAsText(file); 
```

更多信息在这里，

[https://developer.mozilla.org/en-US/docs/DOM/FileReader](https://developer.mozilla.org/en-US/docs/DOM/FileReader)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2020-07-03T02:53:22.987

即使在在线阅读了文档和示例之后，我也花了 300 个小时才弄清楚......

**这是一些实际的工作代码：**

```
let fileReader = new FileReader();
fileReader.onload = function(event) {
    alert(fileReader.result);
};
inputElement.onchange = function(event) {
    fileReader.readAsText(event.target.files[0]);
}; 
```

* * *

另外，[仅供参考](https://developer.mozilla.org/en-US/docs/Web/API/FileReader)：

> **FileReader.onabort**事件 的处理程序`abort`。每次中止读取操作时都会触发此事件。
> 
> **FileReader.onerror**事件 的处理程序`error`。每次读取操作遇到错误时都会触发此事件。
> 
> **FileReader.onload**事件 的处理程序`load`。每次成功完成读取操作时都会触发此事件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-12-07T06:42:53.987

这是一个完整的 html 和 vanilla javascript 示例，它创建一个简单的文件输入和一个文件阅读器，它读取文件，`FileReader.readAsText()`然后将该文件的文本内容写入控制台。这适用于 .txt 或 .csv 等文件。

还有`FileReader.readAsArrayBuffer()`,`FileReader.readAsBinaryString()`和`FileReader.readAsDataURL()`, 可能更适合其他用例。我还建议阅读[https://developer.mozilla.org/en-US/docs/Web/API/FileReader](https://developer.mozilla.org/en-US/docs/Web/API/FileReader)

注意：用户可以选择要包含在输入中的多个文件，此代码将仅读取这些文件中的第一个（如您在`event.target.files`.

```
<html>
  <head>
    <script>
      window.onload = function(event) {
        document.getElementById('fileInput').addEventListener('change', handleFileSelect, false);
      }

      function handleFileSelect(event) {
        var fileReader = new FileReader();
        fileReader.onload = function(event) {
          console.log(event.target.result);
        }
        var file = event.target.files[0];
        fileReader.readAsText(file);
      }
    </script>
  </head>
  <body>
    <input type="file" id="fileInput">
  </body>
</html> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-10-29T09:50:30.853

是的，文件 API 的文档记录很差。该`readAsText`方法在之前被调用`onload`。

```
let onFileChange = (event) => {
  let file = event.target.files[0];

  let fileReader = new FileReader();
  fileReader.readAsText(file);

  fileReader.onload = (event) => {
    let fileAsText = event.target.result;
    console.log(fileAsText);
  };
}; 
```

```
<form>
  <input type="file" onChange={onFileChange} />
</form> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-03-19T05:28:49.383

```
async FileUploadHandler(e){
  let readInputFile = await inputFileReader(e);
}

async inputFileReader(event){
  return new Promise((res,rej)=>{
    let input = event.target;
    let reader = new FileReader();
    reader.onload = function(){
      res(reader.result)
    };
    reader.readAsText(input.files[0]);
  });
},
```

```
<input type="file" on-change="FileUploadHandler" />
```

# php - 如何使用 php 在 mysql 数据库中添加照片？

> ID：13729308
> 
> 赞同：2
> 
> 时间：2012-12-05T17:48:49.060
> 
> 标签：php, mysql

我对 PHP 很陌生，我需要你的帮助。

这是插入所有记录的insert.php文件。``这里也添加了文件浏览字段。此字段浏览照片。Temp_File 存储在缩略图文件夹中。我的问题是如何将这张照片保存在 MySQL 数据库中，以及如何从 dB 中检索这张照片以在 view.php 中显示。

//这是insert.php

```
 <?php require_once('Connections/db_sms.php'); ?>
    <?php if (!isset($_SESSION)) {

    session_start();
    }
    $MM_authorizedUsers = "";
    $MM_donotCheckaccess = "true";

    // *** Restrict Access To Page: Grant or deny access to this page
    function isAuthorized($strUsers, $strGroups, $UserName, $UserGroup) { 
      // For security, start by assuming the visitor is NOT authorized. 
      $isValid = False; 

      // When a visitor has logged into this site, the Session variable MM_Username set equal to their username. 
      // Therefore, we know that a user is NOT logged in if that Session variable is blank. 
      if (!empty($UserName)) { 
        // Besides being logged in, you may restrict access to only certain users based on an ID established when they login. 
        // Parse the strings into arrays. 
        $arrUsers = Explode(",", $strUsers); 
        $arrGroups = Explode(",", $strGroups); 
        if (in_array($UserName, $arrUsers)) { 
          $isValid = true; 
        } 
        // Or, you may restrict access to only certain users based on their username. 
        if (in_array($UserGroup, $arrGroups)) { 
          $isValid = true; 
        } 
        if (($strUsers == "") && true) { 
          $isValid = true; 
        } 
      } 
      return $isValid; 
    }

    $MM_restrictGoTo = "login.php";
    if (!((isset($_SESSION['MM_Username'])) && (isAuthorized("",$MM_authorizedUsers,      $_SESSION['MM_Username'], $_SESSION['MM_UserGroup'])))) {   
      $MM_qsChar = "?";
      $MM_referrer = $_SERVER['PHP_SELF'];
      if (strpos($MM_restrictGoTo, "?")) $MM_qsChar = "&";
      if (isset($_SERVER['QUERY_STRING']) && strlen($_SERVER['QUERY_STRING']) > 0) 
      $MM_referrer .= "?" . $_SERVER['QUERY_STRING'];
      $MM_restrictGoTo = $MM_restrictGoTo. $MM_qsChar . "accesscheck=" . urlencode($MM_referrer);
      header("Location: ". $MM_restrictGoTo); 
      exit;
    }
    ?>
    <?php
    if (!function_exists("GetSQLValueString")) {
    function GetSQLValueString($theValue, $theType, $theDefinedValue = "", $theNotDefinedValue = "") 
    {
      if (PHP_VERSION < 6) {
        $theValue = get_magic_quotes_gpc() ? stripslashes($theValue) : $theValue;
      }

      $theValue = function_exists("mysql_real_escape_string") ? mysql_real_escape_string($theValue) : mysql_escape_string($theValue);

      switch ($theType) {
        case "text":
          $theValue = ($theValue != "") ? "'" . $theValue . "'" : "NULL";
          break;    
        case "long":
        case "int":
          $theValue = ($theValue != "") ? intval($theValue) : "NULL";
          break;
        case "double":
          $theValue = ($theValue != "") ? doubleval($theValue) : "NULL";
          break;
        case "date":
          $theValue = ($theValue != "") ? "'" . $theValue . "'" : "NULL";
          break;
        case "defined":
          $theValue = ($theValue != "") ? $theDefinedValue : $theNotDefinedValue;
          break;
      }
      return $theValue;
    }
    }

    $editFormAction = $_SERVER['PHP_SELF'];
    if (isset($_SERVER['QUERY_STRING'])) {
      $editFormAction .= "?" . htmlentities($_SERVER['QUERY_STRING']);
    }

    if ((isset($_POST["MM_insert"])) && ($_POST["MM_insert"] == "regform")) {
      $insertSQL = sprintf("INSERT INTO tbl_student (s_id, first_name, last_name, gender, dob, father_name, email, address, city) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s)",
                           GetSQLValueString($_POST['student_photo'], "text"),
                           GetSQLValueString($_POST['first_name'], "text"),
                           GetSQLValueString($_POST['last_name'], "text"),
                           GetSQLValueString($_POST['gender'], "text"),
                           GetSQLValueString($_POST['dob'], "date"),
                           GetSQLValueString($_POST['father_name'], "text"),
                           GetSQLValueString($_POST['email'], "text"),
                           GetSQLValueString($_POST['address'], "text"),
                           GetSQLValueString($_POST['city'], "text"));

      mysql_select_db($database_db_sms, $db_sms);
      $Result1 = mysql_query($insertSQL, $db_sms) or die(mysql_error());

      $insertGoTo = "view.php";
      if (isset($_SERVER['QUERY_STRING'])) {
        $insertGoTo .= (strpos($insertGoTo, '?')) ? "&" : "?";
        $insertGoTo .= $_SERVER['QUERY_STRING'];
      }
      header(sprintf("Location: %s", $insertGoTo));
    }
    ?>
    <?php require_once('Zend/Date.php'); ?>
    <?php $username = "root";
    $password = "";
    $host = "localhost";
    $database = "db_sms";

    // Make the connect to MySQL or die
    // and display an error.
    $link = mysql_connect($host, $username, $password);
    if (!$link) {
            die('Could not connect: ' . mysql_error());
    }

    // Select your database
    mysql_select_db ($database);?>

    <?php if (isset($_FILES['student_photo']) && $_FILES['student_photo']['size'] > 0) { 

              // Temporary file name stored on the server
              $tmpName  = $_FILES['student_photo']['tmp_name'];  
              // Create the query and insert
              // into our database.
              $i=rand(0,8888);
               $info=pathinfo($_FILES['student_photo']['name']);
                $ext=$info['extension'];
                $i++;
                $newname="pic_".$i.".".$ext;
                $target='thumbnails/'.$newname;
              move_uploaded_file($_FILES['student_photo']['tmp_name'], $target );
              $query = "INSERT INTO tbl_students ";
              $query .= "(student_photo) VALUES ('$data')";
              $results = mysql_query($query, $link);

              // Print results
              print "Thank you, your file has been uploaded.";

    }
    else {
       print "No image selected/uploaded";
    }

    mysql_close($link);
    ?>

    <?php
    if (!function_exists("GetSQLValueString")) {
    function GetSQLValueString($theValue, $theType, $theDefinedValue = "", $theNotDefinedValue = "") 

    {
      if (PHP_VERSION < 6) {
        $theValue = get_magic_quotes_gpc() ? stripslashes($theValue) : $theValue;
      }

      $theValue = function_exists("mysql_real_escape_string") ? mysql_real_escape_string($theValue) : mysql_escape_string($theValue);

      switch ($theType) {
        case "text":
          $theValue = ($theValue != "") ? "'" . $theValue . "'" : "NULL";
          break;    
        case "long":
        case "int":
          $theValue = ($theValue != "") ? intval($theValue) : "NULL";
          break;
        case "double":
          $theValue = ($theValue != "") ? doubleval($theValue) : "NULL";
          break;
        case "date":
           if ($theValue == "")
          {
              $theValue = "NULL";
          }
          else
          {
              $zendDate = new Zend_Date($theValue, "d/M/yyyy");
              $theValue = "'" . $zendDate->toString("dd-MM-yyyy") . "'";
          }
          break;
        case "defined":
          $theValue = ($theValue != "") ? $theDefinedValue : $theNotDefinedValue;
          break;
      }
      return $theValue;
    }
    }

    mysql_select_db($database_db_sms, $db_sms);
    $query_rsStudent = "SELECT s_id, first_name, last_name, gender, dob, father_name, email, address, city, student_photo FROM tbl_student ORDER BY first_name ASC";
    $rsStudent = mysql_query($query_rsStudent, $db_sms) or die(mysql_error());
    $row_rsStudent = mysql_fetch_assoc($rsStudent);
    $totalRows_rsStudent = mysql_num_rows($rsStudent);

    $query_rsStudent = "SELECT first_name, last_name, gender, dob, father_name, email, address, city FROM tbl_student ORDER BY first_name ASC";
    $rsStudent = mysql_query($query_rsStudent, $db_sms) or die(mysql_error());
    $row_rsStudent = mysql_fetch_assoc($rsStudent);
    $totalRows_rsStudent = mysql_num_rows($rsStudent);
    ?>
    <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
    <html xmlns="http://www.w3.org/1999/xhtml">
    <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Registration</title>

    <script src="SpryAssets/SpryValidationTextField.js" type="text/javascript"></script>
    <script src="SpryAssets/SpryValidationRadio.js" type="text/javascript"></script>
    <link href="SpryAssets/SpryValidationTextField.css" rel="stylesheet" type="text/css" />
    <link href="SpryAssets/SpryValidationRadio.css" rel="stylesheet" type="text/css" />
    <style type="text/css">
    body,td,th {
        font-family: "Times New Roman", Times, serif;
        font-size: 18px;
        color: #FFFFFF;
    }
    body {
        background-color: #636;
        margin-left: 400px;
        margin-top: 100px;
        margin-right: 400px;
    }
    </style>
    </head>

    <body>
    <?php /* include('include/header.php');*/ ?>
    <form action="<?php echo $editFormAction; ?>" name="regform" id="regform" enctype="multipart/form-data" method="POST">

    <table width="1495" border="0">
      <tr>
        <td width="115">First Name</td>
        <td width="1370"><span id="spryfirstname">
        <input name="first_name" type="text"    maxlength="50" />
        <span class="textfieldRequiredMsg">A value is required.</span><span class="textfieldMaxCharsMsg">Exceeded maximum number of characters.</span></span></td>
      </tr>
      <tr>
        <td>Last Name</td>
        <td><span id="sprylastname">
        <input name="last_name" type="text"    maxlength="50" />
        <span class="textfieldRequiredMsg">A value is required.</span><span class="textfieldMaxCharsMsg">Exceeded maximum number of characters.</span></span></td>
      </tr>
      <tr>
        <td>Gender</td>
        <td><label>
        <span id="spryrggender">
        <input  type="radio" name="gender" value="Male" id="male" />
    Male<br />
    <input type="radio" name="gender" value="Female" id="female" />
    Female<br />
    <span class="radioRequiredMsg">Required.</span></span></label></td>
      </tr>
      <tr>
        <td>Date Of Birth</td>
        <td><span id="sprydob">
        <input name="dob" type="text"   />
        <span class="textfieldRequiredMsg">Date of Birth is required.</span><span class="textfieldInvalidFormatMsg">Invalid format.</span></span></td>
      </tr>
      <tr>
        <td>Father's Name</td>
        <td><span id="spryfathername">
        <input name="father_name" type="text"  maxlength="50" />
        <span class="textfieldRequiredMsg">A value is required.</span><span class="textfieldMaxCharsMsg">Exceeded maximum number of characters.</span></span></td>
      </tr>
      <tr>
        <td>E-mail Address</td>
        <td><span id="spryemail">
        <input name="email" type="text"   />
        <span class="textfieldRequiredMsg">A value is required.</span><span class="textfieldInvalidFormatMsg">Invalid format.</span><span class="textfieldMaxCharsMsg">Exceeded maximum number of characters.</span></span></td>
      </tr>
      <tr>
        <td>Address</td>
        <td><span id="spryaddress">
        <input name="address" type="text"  />
        <span class="textfieldRequiredMsg">A value is required.</span><span class="textfieldMaxCharsMsg">Exceeded maximum number of characters.</span></span></td>
      </tr>
      <tr>
        <td>City</td>
        <td><span id="sprycity">
          <input name="city" type="text"  />
          <span class="textfieldRequiredMsg">A value is required.</span><span class="textfieldMaxCharsMsg">Exceeded maximum number of characters.</span></span></td>
      </tr>
      <tr>
        <td>Upload image</td>
        <td>
          <input type="file" name="student_photo" id="student_photo" />
          </td>
      </tr>
      <tr>
      <td></td>
      <td><input name="insert" type="submit" value="Insert Record" /></td>
      </tr>

    </table>
    <input type="hidden" name="MM_insert" value="regform" />
    </form>

    <p>&nbsp;</p>
    <script type="text/javascript">
    var sprytextfield1 = new Spry.Widget.ValidationTextField("spryfirstname", "none", {validateOn:["blur"], maxChars:50});
    var sprytextfield2 = new Spry.Widget.ValidationTextField("sprylastname", "none", {validateOn:["blur"], maxChars:50});
    var spryradio1 = new Spry.Widget.ValidationRadio("spryrggender", {validateOn:["blur"]});
    var sprytextfield3 = new Spry.Widget.ValidationTextField("sprydob", "date", {format:"dd/mm/yyyy", validateOn:["blur"], hint:"dd/mm/yyyy"});
    var sprytextfield4 = new Spry.Widget.ValidationTextField("spryfathername", "none", {validateOn:["blur"], maxChars:50});
    var sprytextfield5 = new Spry.Widget.ValidationTextField("spryemail", "email", {maxChars:50, validateOn:["blur"]});
    var sprytextfield6 = new Spry.Widget.ValidationTextField("spryaddress", "none", {maxChars:50, validateOn:["blur"]});
    var sprytextfield7 = new Spry.Widget.ValidationTextField("sprycity", "none", {maxChars:50, validateOn:["blur"]});
    var sprytextfield8 = new Spry.Widget.ValidationTextField("sprytextfield8");
    </script>
    </body>
    </html>
    <?php
    mysql_free_result($rsStudent);
    ?>

-----------------------------------------------------
//Image should be displayed in view.php

<?php require_once('Connections/db_sms.php'); ?>
<?php
if (!isset($_SESSION)) {
  session_start();
}
$MM_authorizedUsers = "";
$MM_donotCheckaccess = "true";

// *** Restrict Access To Page: Grant or deny access to this page
function isAuthorized($strUsers, $strGroups, $UserName, $UserGroup) { 
  // For security, start by assuming the visitor is NOT authorized. 
  $isValid = False; 

  // When a visitor has logged into this site, the Session variable MM_Username set equal to their username. 
  // Therefore, we know that a user is NOT logged in if that Session variable is blank. 
  if (!empty($UserName)) { 
    // Besides being logged in, you may restrict access to only certain users based on an ID established when they login. 
    // Parse the strings into arrays. 
    $arrUsers = Explode(",", $strUsers); 
    $arrGroups = Explode(",", $strGroups); 
    if (in_array($UserName, $arrUsers)) { 
      $isValid = true; 
    } 
    // Or, you may restrict access to only certain users based on their username. 
    if (in_array($UserGroup, $arrGroups)) { 
      $isValid = true; 
    } 
    if (($strUsers == "") && true) { 
      $isValid = true; 
    } 
  } 
  return $isValid; 
}

$MM_restrictGoTo = "login.php";
if (!((isset($_SESSION['MM_Username'])) && (isAuthorized("",$MM_authorizedUsers, $_SESSION['MM_Username'], $_SESSION['MM_UserGroup'])))) {   
  $MM_qsChar = "?";
  $MM_referrer = $_SERVER['PHP_SELF'];
  if (strpos($MM_restrictGoTo, "?")) $MM_qsChar = "&";
  if (isset($_SERVER['QUERY_STRING']) && strlen($_SERVER['QUERY_STRING']) > 0) 
  $MM_referrer .= "?" . $_SERVER['QUERY_STRING'];
  $MM_restrictGoTo = $MM_restrictGoTo. $MM_qsChar . "accesscheck=" . urlencode($MM_referrer);
  header("Location: ". $MM_restrictGoTo); 
  exit;
}
?>
<?php require_once('Zend/Date.php');?>
<?php
if (!function_exists("GetSQLValueString")) {
function GetSQLValueString($theValue, $theType, $theDefinedValue = "", $theNotDefinedValue = "") 
{
  if (PHP_VERSION < 6) {
    $theValue = get_magic_quotes_gpc() ? stripslashes($theValue) : $theValue;
  }

  $theValue = function_exists("mysql_real_escape_string") ? mysql_real_escape_string($theValue) : mysql_escape_string($theValue);

  switch ($theType) {
    case "text":
      $theValue = ($theValue != "") ? "'" . $theValue . "'" : "NULL";
      break;    
    case "long":
    case "int":
      $theValue = ($theValue != "") ? intval($theValue) : "NULL";
      break;
    case "double":
      $theValue = ($theValue != "") ? doubleval($theValue) : "NULL";
      break;
    case "date":
      $theValue = ($theValue != "") ? "'" . $theValue . "'" : "NULL";
      break;
    case "defined":
      $theValue = ($theValue != "") ? $theDefinedValue : $theNotDefinedValue;
      break;
  }
  return $theValue;
}
}

$currentPage = $_SERVER["PHP_SELF"];

$maxRows_rsStudent = 3;
$pageNum_rsStudent = 0;
if (isset($_GET['pageNum_rsStudent'])) {
  $pageNum_rsStudent = $_GET['pageNum_rsStudent'];
}
$startRow_rsStudent = $pageNum_rsStudent * $maxRows_rsStudent;

mysql_select_db($database_db_sms, $db_sms);
$query_rsStudent = "SELECT s_id, first_name, last_name, gender, dob, father_name, email, address, city, student_photo FROM tbl_student ORDER BY first_name ASC";
$query_limit_rsStudent = sprintf("%s LIMIT %d, %d", $query_rsStudent, $startRow_rsStudent, $maxRows_rsStudent);
$rsStudent = mysql_query($query_limit_rsStudent, $db_sms) or die(mysql_error());
$row_rsStudent = mysql_fetch_assoc($rsStudent);

if (isset($_GET['totalRows_rsStudent'])) {
  $totalRows_rsStudent = $_GET['totalRows_rsStudent'];
} else {
  $all_rsStudent = mysql_query($query_rsStudent);
  $totalRows_rsStudent = mysql_num_rows($all_rsStudent);
}
$totalPages_rsStudent = ceil($totalRows_rsStudent/$maxRows_rsStudent)-1;

$queryString_rsStudent = "";
if (!empty($_SERVER['QUERY_STRING'])) {
  $params = explode("&", $_SERVER['QUERY_STRING']);
  $newParams = array();
  foreach ($params as $param) {
    if (stristr($param, "pageNum_rsStudent") == false && 
        stristr($param, "totalRows_rsStudent") == false) {
      array_push($newParams, $param);
    }
  }
  if (count($newParams) != 0) {
    $queryString_rsStudent = "&" . htmlentities(implode("&", $newParams));
  }
}
$queryString_rsStudent = sprintf("&totalRows_rsStudent=%d%s", $totalRows_rsStudent, $queryString_rsStudent);
?>

<?php

if (!function_exists("GetSQLValueString")) {
function GetSQLValueString($theValue, $theType, $theDefinedValue = "", $theNotDefinedValue = "") 
{
  if (PHP_VERSION < 6) {
    $theValue = get_magic_quotes_gpc() ? stripslashes($theValue) : $theValue;
  }

  $theValue = function_exists("mysql_real_escape_string") ? mysql_real_escape_string($theValue) : mysql_escape_string($theValue);

  switch ($theType) {
    case "text":
      $theValue = ($theValue != "") ? "'" . $theValue . "'" : "NULL";
      break;    
    case "long":
    case "int":
      $theValue = ($theValue != "") ? intval($theValue) : "NULL";
      break;
    case "double":
      $theValue = ($theValue != "") ? doubleval($theValue) : "NULL";
      break;
    case "date":
       if ($theValue == "")
      {
          $theValue = "NULL";
      }
      else
      {
          $zendDate = new Zend_Date($theValue, "M/d/yyyy");
          $theValue = "'" . $zendDate->toString("yyyy-MM-dd") . "'";
      }
        break;

    case "defined":
      $theValue = ($theValue != "") ? $theDefinedValue : $theNotDefinedValue;
      break;
  }
  return $theValue;
}
}
?>
<style type="text/css">
body,td,th {
    color: #000;
    font-family: "Courier New", Courier, monospace;
    font-size: 18px;
}
body {
    background-color: #FFF;
}
a:link {
    text-decoration: none;
}
a:visited {
    text-decoration: none;
    color: #606;
}
a:hover {
    text-decoration: underline;
    color: #066;
}
a:active {
    text-decoration: none;
    color: #600;
}
</style>

<body bgcolor="#D6D6D6" text="#FFFFFF" link="#330000" vlink="#006666" alink="#660000"><h1>
  <style type="text/css">
#header {
    font-family: "Times New Roman", Times, serif;
    font-size: 24px;
    font-style: normal;
    line-height: normal;
    font-weight: normal;
    text-transform: none;
    color: #066;
    background-color: #FFF;
    background-image: url(../images/contest.jpg);
    background-repeat: no-repeat;
    background-size: auto;
    box-sizing: content-box;
    margin-bottom: 400px;
}
body,td,th {
    font-family: "Courier New", Courier, monospace;
    color: #000;
}
body {
    background-color: #FFF;
}
  </style>
</h1>
 <?php /* include('include/header.php');*/?> 

<h3>&nbsp;</h3>
<h3>There are <?php echo $totalRows_rsStudent ?> Students.</h3>
<p>&nbsp;
  <?php if ($pageNum_rsStudent > 0) { // Show if not first page ?>
    <a href="<?php printf("%s?pageNum_rsStudent=%d%s", $currentPage, 0, $queryString_rsStudent); ?>">First</a> <a href="<?php printf("%s?pageNum_rsStudent=%d%s", $currentPage, max(0, $pageNum_rsStudent - 1), $queryString_rsStudent); ?>">Previous</a>
    <?php } // Show if not first page ?>
  <?php if ($pageNum_rsStudent < $totalPages_rsStudent) { // Show if not last page ?>
  <a href="<?php printf("%s?pageNum_rsStudent=%d%s", $currentPage, min($totalPages_rsStudent, $pageNum_rsStudent + 1), $queryString_rsStudent); ?>">Next</a> <a href="<?php printf("%s?pageNum_rsStudent=%d%s", $currentPage, $totalPages_rsStudent, $queryString_rsStudent); ?>">Last</a>
  <?php } // Show if not last page ?>
</p>
<table width="400" border="0">

</table>
<form id="form1" name="form1" method="post" action="" enctype="multipart/form-data">
<table width="2139" border="0">

    <tr>
      <th width="326" bgcolor="#009999" scope="col"><strong>First Name</strong></th>
      <th width="315" bgcolor="#009999" scope="col"><strong>Last Name</strong></th>
      <th width="282" bgcolor="#009999" scope="col"><strong>Gender</strong></th>
      <th width="183" bgcolor="#009999" scope="col"><blockquote>
        <p> <strong>BirthDate</strong></p>
      </blockquote></th>
      <th width="337" bgcolor="#009999" scope="col"><strong>Father's Name</strong></th>
      <th width="271" bgcolor="#009999" scope="col"><strong>Email</strong></th>
      <th width="95" bgcolor="#009999" scope="col"><strong>Address</strong></th>
      <th width="150" bgcolor="#009999" scope="col"><strong>City</strong></th>
      <th width="150" bgcolor="#009999" scope="col"><blockquote>
        <p>Photo</p>
      </blockquote></th>
      <th width="150" bgcolor="#009999" scope="col">&nbsp;</th>
      <th width="7" bgcolor="#009999" scope="col">&nbsp;</th>
      <th width="131" scope="col">&nbsp;</th>
    </tr>
     <?php do { ?>
   <?php 
            $zendDate = new Zend_Date($row_rsStudent['dob']);
          ?>

    <tr>
      <td bgcolor="#333333"><blockquote>
        <p><a href="update.php?s_id=<?php echo $row_rsStudent['s_id']; ?>"><?php echo $row_rsStudent['first_name']; ?></a></p>
      </blockquote></td>
      <td bgcolor="#333333"><blockquote>
        <p><?php echo $row_rsStudent['last_name']; ?></p>
      </blockquote></td>
      <td bgcolor="#333333"><blockquote>
        <p><?php echo $row_rsStudent['gender']; ?></p>
      </blockquote></td>
      <td bgcolor="#333333"> 
          <?php echo $zendDate->toString("d/M/yyyy"); ?></td>
      <td bgcolor="#333333"><blockquote>
        <p><?php echo $row_rsStudent['father_name']; ?></p>
      </blockquote></td>
      <td bgcolor="#333333"><blockquote>
        <p><?php echo $row_rsStudent['email']; ?></p>
      </blockquote></td>

      <td bgcolor="#333333"><blockquote>
        <p><em><strong><a href="delete.php?s_id=<?php echo $row_rsStudent['s_id']; ?>"></a></strong></em><?php echo $row_rsStudent['address']; ?></p>
      </blockquote></td>
      <td bgcolor="#333333"><blockquote>
        <p><em><strong><a href="delete.php?s_id=<?php echo $row_rsStudent['s_id']; ?>"></a></strong></em><?php echo $row_rsStudent['city']; ?></p>
      </blockquote></td>
      <td bgcolor="#333333"><blockquote>
        <p><img src="<?php echo "thumbnails/".$row_rsStudent['student_photo']; ?>"/> </p>
      </blockquote></td>
      <td bgcolor="#FFFFFF"><blockquote>
        <p><em><strong><a href="delete.php?s_id=<?php echo $row_rsStudent['s_id']; ?>">Delete</a></strong></em></p>
      </blockquote></td>
    </tr>
    <?php } while ($row_rsStudent = mysql_fetch_assoc($rsStudent)); ?>
  </table>
  <p><strong><a href="insert.php">Insert New Record</a></strong></p>
  <p>&nbsp;</p>
</form>
<?php
mysql_free_result($rsStudent);
?> 
```

* * *

//tbl_student 包含一个字段名称“std_photo”，类型为 VarChar(255)。

* * *

//这是我的db_sms连接文件

```
<?php
# FileName="Connection_php_mysql.htm"
# Type="MYSQL"
# HTTP="true"
$hostname_db_sms = "localhost";
$database_db_sms = "db_sms";
$username_db_sms = "root";
$password_db_sms = "";
$db_sms = mysql_pconnect($hostname_db_sms, $username_db_sms, $password_db_sms) or trigger_error(mysql_error(),E_USER_ERROR); 
?> 
```

* * *

请帮帮我！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T17:58:55.870

没有理由将图像保存在数据库中。最好的方法是在一个简单的文本字段中记录图像路径。要显示它，只需执行一个简单的查询即可获取图像路径并将其打印到标签中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T17:54:10.737

如果你真的需要在 MySQL 中存储图像（这可能不是一个好主意），你应该使用 BLOB 列类型。这是一个例子[http://www.phpriot.com/articles/images-in-mysql](http://www.phpriot.com/articles/images-in-mysql)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T18:00:32.270

与其将图像本身存储在 d/b 中，不如将图像作为文件存储在磁盘上。将 $target (from $target='thumbnails/'.$newname;) 存储为字符串 - 并在查看它时使用检索到的 $target 来构造图像标签

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T18:06:29.903

```
 $tmpName  = $_FILES['student_photo']['tmp_name'];  
              // Create the query and insert
              // into our database.
              $i=rand(0,8888);
               $info=pathinfo($_FILES['student_photo']['name']);
                $ext=$info['extension'];
                $i++;
                $newname="pic_".$i.".".$ext;
                $target='thumbnails/'.$newname;
              move_uploaded_file($_FILES['student_photo']['tmp_name'], $target );
              $query = "INSERT INTO tbl_students ";
              $query .= "(student_photo) VALUES ('$data')";
              $results = mysql_query($query, $link); 
```

// 在这两行之间，您应该将图像名称和路径保存到数据库中。

例如：`mysql_query("UPDATE from SET image_path='$image' WHERE id='12')")` 您也可以使用，`INSERT`但是 $name 应该包含路径，就像 `$name = thumbnails/$newname`id 应该是相对的，与您在数据库中创建的帖子的行一样。

```
 // Print results
          print "Thank you, your file has been uploaded."; 
```

在 view.php 中，您可以在同时显示帖子/文章时简单地显示图像。前任：

```
$query = "SELECT * FROM students";
$result = mysql_query();
while($row = mysql_fetch_array($result)) {
`echo "
Student Name: $row['student_name'] <br/>
Student Photo: $row['image_path']
"`
} 
```

以上将从数据库中搜索，沿着图像的学生。

# installation - Inno 安装 RegAsm.exe 错误

> ID：13729309
> 
> 赞同：7
> 
> 时间：2012-12-05T17:48:52.760
> 
> 标签：installation, inno-setup

我正在尝试构建一个 32/64 位的安装程序。在 32 位和 64 位机器上唯一不同的是调用 RegAsm.exe。对于 64 位机器，代码必须查看 64 位框架，而对于 32 位机器，代码必须查看标准框架。

32 位：“C:\windows\microsoft.net\framework” 64 位：“C:\windows\microsoft.net\framework64”；

我有我的包设置来运行安装操作。对于我的 64 位操作，我启用了 IsWin64 的检查。

文件名：{dotnet4064}\Regasm.exe；参数：“”“mydll.dll”“/codebase”；工作目录：{app}；StatusMsg: "注册插件"; 标志：运行隐藏；检查：IsWin64；

报错前的几行日志文件

```
2012-12-05 14:58:53.233   Installing the file.
2012-12-05 14:58:53.281   Successfully installed the file.
2012-12-05 14:58:53.281   -- Icon entry --
2012-12-05 14:58:53.281   Filename: C:\Documents and Settings\All Users\Start Menu\Programs\myprogram\my program\Uninstall  myprogram.lnk
2012-12-05 14:58:53.281   Creating directory: C:\Documents and Settings\All Users\Start Menu\Programs\myprogram\my program
2012-12-05 14:58:53.483   -- Icon entry --
2012-12-05 14:58:53.483   Filename: C:\Documents and Settings\All Users\Start Menu\Programs\myprogram\my program\myprogram.lnk
2012-12-05 14:58:54.224   -- Icon entry --
2012-12-05 14:58:54.224   Filename: C:\Documents and Settings\All Users\Desktop\myprogram.lnk
2012-12-05 14:58:54.281   Fatal exception during installation process (Exception):
                          Internal error: Cannot run files in 64-bit locations on this version of Windows.
2012-12-05 14:58:54.281   Exception message:
2012-12-05 14:58:54.281   Message box (OK):
                          Internal error: Cannot run files in 64-bit locations on this version of Windows.
2012-12-05 14:58:54.926   User chose OK.
2012-12-05 14:58:54.926   Message box (OK):
                          Setup was not completed.

                          Please correct the problem and run Setup again.
2012-12-05 14:59:00.222   User chose OK.
2012-12-05 14:59:00.222   Rolling back changes. 
```

这一切在 64 位机器上运行良好。在 32 位机器上出现错误：

**内部错误：无法在此版本的 Windows 上运行 64 位位置的文件**

我一直在查看帮助文档和谷歌，无法确定发生这种情况的原因。任何帮助表示赞赏。

```
[Run]
Filename: "{dotnet40}\Regasm.exe"; Parameters: "My.TaskPane.dll"; WorkingDir: "{app}"; Flags: runhidden; StatusMsg: "Registering MyTaskPane Add-In"
Filename: "{dotnet4064}\Regasm.exe"; Parameters: "My.TaskPane.dll"; WorkingDir: "{app}"; Flags: runhidden; StatusMsg: "Registering My TaskPane Add-In"; Check: IsWin64
Filename: "{dotnet40}\Regasm.exe"; Parameters: "My.TaskPane.dll /codebase"; WorkingDir: "{app}"; Flags: runhidden; StatusMsg: "Registering My TaskPane Add-In"
Filename: "{dotnet4064}\Regasm.exe"; Parameters: "My.TaskPane.dll /codebase"; WorkingDir: "{app}"; Flags: runhidden; StatusMsg: "Registering My TaskPane Add-In"; Check: IsWin64
Filename: "{app}\My Software Suite.exe"; Parameters: "/register"; WorkingDir: "{app}"; Flags: PostInstall; Description: "Register the My Software Suite" 
```

我通过添加解决了这个问题： ArchitecturesInstallIn64BitMode=x64 然后使用 Check: Is64BitInstallMode

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T15:21:59.633

我通过添加解决了这个问题： ArchitecturesInstallIn64BitMode=x64 然后使用 Check: Is64BitInstallMode

# java - Java - 使用 RSA 密钥加密

> ID：13729316
> 
> 赞同：2
> 
> 时间：2012-12-05T17:49:10.217
> 
> 标签：java, cryptography, jce

我一直在与这个问题斗争一段时间。问题是我必须将 PEM 字符串发送到服务器，该服务器需要以下最后一步：

*   3DES o AES-256 类型的加密密钥。
*   该密钥使用 RSA 密钥加密。
*   该输出以 Base64 和 PEM 格式编码。

这是我到目前为止得到的：

*   根据我从服务器获得的 RSA 密钥，我创建了一个密码：

    ```
     Cipher rsa = Cipher.getInstance("RSA");

     rsa.init(Cipher.ENCRYPT_MODE, (RSAPublicKey) obj); 
    ```

*   稍后，我创建了一个 AES 密钥：

    ```
    //IV. 
    byte[] bytes = new byte[16];
    SecureRandom random = new SecureRandom();
    random.nextBytes(bytes);

    Map<String, byte[]> aes = new HashMap<String, byte[]>();

    aes.put("IV", ConversionUtil.toHex(bytes, 8).getBytes());

    KeyGenerator keyGen = KeyGenerator.getInstance("AES");

    keyGen.init(256);
    Key encryptionKey = keyGen.generateKey();

    Cipher cipher = Cipher.getInstance("AES/CBC/PKCS5Padding"); 

    cipher.init(Cipher.ENCRYPT_MODE, encryptionKey, new IvParameterSpec(ConversionUtil.toHex(bytes, 8).getBytes()));

    aes.put("key", cipher.doFinal(encryptionKey.getEncoded())); 
    ```

使用所有这些来创建 PEM 字符串：

```
 StringBuilder sb = new StringBuilder();
            sb.append(StringUtils.repeat("-", 5));
            sb.append("BEGIN PEM file");
            sb.append(StringUtils.repeat("-", 5));
            sb.append("\n");

            sb.append("Proc-Type: 4,ENCRYPTED\n");
            sb.append("DEK-Info: " + "AES-256-CBC" + "," + new String(aes.get("IV")) + "\n");
            sb.append("");
            sb.append(Base64.encode(rsa.doFinal(aes.get("key"))));

            sb.append("\n");
            sb.append(StringUtils.repeat("-", 5));
            sb.append("END PEM file");
            sb.append(StringUtils.repeat("-", 5)); 
```

然后将其发送到服务器，这会引发以下错误：

3936：错误：0906D06C：PEM 例程：PEM_read_bio：没有起始行：.\crypto\pem\pem_lib.c:698：

我对错误没有更多的可见性，但我想检查在此过程中是否有任何错误，因为似乎错误与无法识别 PEM 有关。

如果您有任何问题，请告诉我。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T21:34:56.057

`BEGIN`报告具体错误是因为破折号和语句之间不应有空格。我不知道其他问题，但您似乎还有一些工作要做，以匹配确切的输入要求。确保您*准确*了解预期的内容，否则您可能不得不尝试不同的格式“令人作呕”。

# java - protobuf 2.4.1 - 从 c++ 向 Java 发送数据

> ID：13729319
> 
> 赞同：4
> 
> 时间：2012-12-05T17:49:15.737
> 
> 标签：java, c++, qt, protocol-buffers

我试图在 c++ 和 java 之间交换消息，反之亦然，但没有成功。我用联合类型定义了两条消息（一条从 c++ 发送到 java，另一条从另一个方向发送）（见附件 .proto）。

c++代码如下：

```
operational_gui::OperationalMessage message; 
message.set_type(operational_gui::OperationalMessage::OWNPOSITIONREPORT); 
message.mutable_oprep()->set_latitude(38.5); 
message.mutable_oprep()->set_longitude(-9.8); 
message.mutable_oprep()->set_heading(25); 
message.mutable_oprep()->set_validity(0); 

message.SerializeToArray(buf, message.ByteSize()); 
m_pNamedPipeSocket->write(buf, message.ByteSize()); 
m_pNamedPipeSocket->flush(); 
```

java代码如下：

```
int bytes = pipe.read(buffer);

MessagesProtos.OperationalMessage message = MessagesProtos.OperationalMessage.parseFrom(buffer);

switch(message.getType()){
    case OWNPOSITIONREPORT:
        System.out.println("Response is OwnPositionReport");
        break;
    case FRIENDPOSITIONREPORT:
        System.out.println("Response is FriendPositionReport");
        break;
    case COMMSTATUSREPORT:
        System.out.println("Response is CommStatusReport");
        break;
 } 
```

通过管道进行通信（c++ 上的 QLocalSocket，java 端的 FileInputStream）

C++ 发送了 33 个字节，java 收到了它们，但出现异常 InvalidProtocolBufferException：协议消息包含无效标记（零）。

有什么提示吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T13:07:40.763

在 Linux 系统上，您还可以考虑使用[gobjects](http://developer.gnome.org/gobject/unstable/gobject-The-Base-Object-Type.html)或使用[DBUS](http://www.freedesktop.org/wiki/Software/dbus)（也有 Windows 端口）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T11:51:39.680

您可以尝试 Qt Jambi：“[...] 此外，Qt Jambi 还使 C++ 程序员能够通过提供 Qt Jambi 生成器轻松地将其 Qt 代码与 Java 集成。”

[http://qt-jambi.org/](http://qt-jambi.org/)

# coldfusion - 设计建议：多用户多设备提交站点

> ID：13729320
> 
> 赞同：1
> 
> 时间：2012-12-05T17:49:21.677
> 
> 标签：coldfusion

（**编辑：这是对上一个**[问题](https://stackoverflow.com/questions/13711089/coldfusion-sql-insert-loop)的跟进）

我正在对一个网站进行彻底的重新设计，该网站允许用户为多个用户签出多台机器。

这是我到目前为止所拥有的。

输出两个 cfqueries 的首页。

一个查询是活动机器（即，已经签出）。它是一个基本的cfoutput 查询，并根据查询的值显示信息。我使用 cfif 语句仅过滤活动机器（如果在 SQL 中活动，则值 = 1）

它还输出 MAC、IP OS 等内容。

另一个查询是用户可以签出的非活动机器。它还根据是否处于活动状态进行过滤，这次通过 cfif query.active eq 0 进行过滤。此查询有几个表单字段，以便用户可以选中要签入的设备的复选框，在要求字段中输入（userID和评论，基本上）并提交。

此页面底部有一个下拉菜单，可让您选择操作，表单传入一个操作编号 (form.choose_action)，告诉 cfc 它应该做什么。IE 如果操作编号为 4，则告诉 cfc 将人员发送到编辑页面并将设备 ID 连同它一起传递。

所以基本上我在每种情况下都传递了 DeviceID，只有当机器处于活动状态时才传递 UserID。

当用户单击提交时，它会直接进入一个调用 cfc 的页面，该页面完成了大部分繁重的工作。

总而言之，这是一个极差的解决方案，因为它只有在一次签入或签出一台机器时才真正有效。

这是一张图片，可以更好地解释发生了什么。

![例子](../Images/a87ccb0ddb9ba4c2172e09c47c29ed3b.png)

这就是我想要的：

可以选择多个设备并签入/签出，希望以某种方式使用复选框。

如果为用户检查机器，则必须以某种方式将 UserID 附加到输入表单（非活动输出查询）中的相应设备，并且如果可能的话，应与 deviceID 一起在单个插入中输入。

我希望能够签入多个设备，但也阻止人们签出处于活动状态的机器（因为它们已经被签出）。非活动机器也是如此，我想阻止用户签入尚未签出的机器。截至目前我只是使用数字（即如果字段大于 0 ）

一些注意事项：一次只有一个用户会使用它，所以我不必担心会话内容或有很多人尝试签入同一设备。

目前我目前将变量推送到页面，然后将表单数据传递到 CFC，这可能不是最好的方法。

从设计的角度来看，我真正遇到的最大问题是，我的逻辑非常复杂且效率低下。目前我唯一能想到的就是通过数组传递设备值。但不确定我是否可以在复选框中执行此操作。

感谢您的时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T20:08:45.850

由于设备可能分配给*不同*的用户，您需要一个命名约定，允许您将每个设备ID 与其相关字段（即用户ID、评论等）相关联。一种选择是将“deviceID”作为后缀添加到每组字段：

```
 <cfoutput query="yourQuery">
      Device ID <input type="checkbox" name="deviceID" value="#deviceID#">
      UserID:<input type="text" name="userID_#deviceID#" ...>
      Comment:<input type="text" name="comment_#deviceID#" ...>
  </cfoutput> 
```

假设您的查询包含三个设备 ID，即`35,48,52`生成的字段名称将如下所示。请注意，每组字段共享*相同*的设备 ID。

```
 <input type="checkbox" name="deviceID" value="35">
 <input type="text" name="userID_35" ...>
 <input type="text" name="comment_35" ...>

 <input type="checkbox" name="deviceID" value="48">
 <input type="text" name="userID_48" ...>
 <input type="text" name="comment_48" ...>

 <input type="checkbox" name="deviceID" value="52">
 <input type="text" name="userID_52" ...>
 <input type="text" name="comment_52" ...> 
```

然后在提交表单时，`form.deviceID`将包含一个逗号分隔的已检查设备列表。您可以遍历该列表并使用当前 ID 来获取关联的用户 ID 和评论值。一旦你有了这些值，就可以使用该`action`类型来运行 INSERT、UPDATE 或任何你需要做的事情。

*请注意，由于每个设备都可能分配给不同的用户，因此您不能在单个语句中执行 INSERT*

```
 <cfparam value="form.deviceID" default="">

  <!--- for each device id .. --->
  <cfloop list="#form.deviceID#" index="currDeviceID">

      <!--- grab the associated user and comment --->
      <cfset userID = FORM["userID_"& currDeviceID]>
      <cfset comment = FORM["comment_"& currDeviceID]>

      ... validate ...

      <cfquery ...>
           run your query
      </cfquery>

  </cfloop> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T19:21:53.593

**问：**目前我唯一能想到的就是通过数组传递设备值。但不确定我是否可以在复选框中执行此操作。

**答：**当检查多个复选框时，ColdFusion将它们视为值列表。所以你会得到类似的东西

```
checkedout=4312,5231,51 
```

如果三个复选框被选中

```
checkedin=31,9876 
```

如果检查了两个项目。

# python - 与空的 numpy 数组连接

> ID：13729322
> 
> 赞同：2
> 
> 时间：2012-12-05T17:49:25.703
> 
> 标签：python, numpy

在 Python 中连接数组时遇到错误：

```
x = np.array([])
while condition:
    % some processing 
    x = np.concatenate([x + new_x]) 
```

我得到的错误是：

```
----> 1 x = np.concatenate([x + new_x])

ValueError: operands could not be broadcast together with shapes (0) (6) 
```

附带说明一下，这是在 Python 中增长`numpy`数组的有效方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T17:52:21.210

看起来你想打电话

```
x = np.concatenate((x, new_x)) 
```

根据[文档](http://docs.scipy.org/doc/numpy/reference/generated/numpy.concatenate.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T18:56:20.000

或者：

```
x = np.append(x,new_x) 
```

关于您的旁注，请看这里：[如何在 Numpy 中就地扩展数组？](https://stackoverflow.com/questions/13215525/how-to-extend-an-array-in-place-in-numpy)

# facebook - 当我在 Facebook 上分享网址时，标题不显示

> ID：13729324
> 
> 赞同：1
> 
> 时间：2012-12-05T17:49:28.667
> 
> 标签：facebook

我尝试在 facebook 上分享带有标题的 url。我愿意

```
http://www.facebook.com/sharer/sharer.php?u=http://domain.com/win-a-hot-date/&t=Now this is awesome 
```

但标题不显示。怎么了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-30T13:38:26.667

't' url 参数以及 sharer.php 已被弃用

附上一个适合您的示例链接（始终对参数值进行编码）：

```
https://www.facebook.com/sharer/sharer.php?s=100&p[url]=http%3A%2F%2Fdomain.com%2Fwin-a-hot-date%2F&p[title]=Now+this+is+awesome 
```

您可以将这些参数添加到末尾以显示缩略图或摘要：

```
&p[images][0]=*URL_TO_IMAGE*
&p[summary]=Some+urlencoded+summary 
```

（通常建议用 HTML 的 & 等效替换所有 & 符号）

不过，如上所述，它是一种已弃用的 api 方法，使用上述方法会产生各种结果，即有时图像不支持它。

有些人报告了标题或图像不合适的问题，因此不得不在 HTML 代码的文档头部标签中实现 OG 标签：

```
<meta property="og:title" content="The Rock"/>
<meta property="og:type" content="movie"/>
<meta property="og:url" content="http://www.imdb.com/title/tt0117500/"/>
<meta property="og:image" content="http://ia.media-imdb.com/rock.jpg"/>
<meta property="og:site_name" content="IMDb"/>
<meta property="fb:admins" content="USER_ID"/>
<meta property="og:description" content="Some descrioton"/> 
```

**注意：Facebook 建议的一种新方法是使用[此处](https://developers.facebook.com/docs/reference/dialogs/feed/)描述的 Feed 和 Share Dialogs 。对于调试使用[这个](https://developers.facebook.com/tools/debug)。**

# java - javascript 文件在 Maven webapp 原型中的位置在哪里？

> ID：13729326
> 
> 赞同：4
> 
> 时间：2012-12-05T17:49:31.710
> 
> 标签：java, javascript, maven, spring-mvc

我有一个具有以下目录结构的 java Spring MVC Web 应用程序：

```
src/
    main/
        java/
        resources/
        webapp/ 
```

在我的 webapp 文件夹中，我有许多带有 javascript 脚本的 html 文件。我不想将 javascript 嵌入到 html 中，我希望它外部化。我应该将 javascript 文件放在上述文件结构中的什么位置，我必须将哪些配置添加到我的 pom.xml 和/或 servlet-context.xml (spring) 文件中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T21:08:44.053

好的，在阅读了上述答案和其他一些 SO 帖子后，我得出了两个解决方案：

我正在使用 Spring MVC 并且我`DispatcherServlet`的被映射到 root `/`。这意味着对任何东西的任何请求都将通过它，但我没有控制器来提供资源文件。您可以做的是将 映射`DispatcherServlet`到类似`/app/*`. 然后所有常规网址都喜欢

`http:\\localhost:8080\ContextRoot\users`

将在

`http:\\localhost:8080\ContextRoot\app\users`.

然后你可以去

`http:\\localhost:8080\ContextRoot\static\js\file.js`

并且您将获得 Apache 服务器（或您正在使用的任何东西）的资源文件。

`DispatcherServlet`Spring 的人可能认为这是一个问题，并使用仍然映射的 at制定了自己的解决方案`/`。在您的`servlet.xml`文件中，您必须添加

`<mvc:resources location = "/static/" mapping = "/static/**" />`

您的文件夹位于文件夹`static`下`webapp`。这个标签告诉 Spring MVC 有一个特殊的处理程序来处理`/static/`. 你还需要

`<mvc:annotation-driven>`

否则，您的 Controllers 处理程序方法将与前一个标记中的处理程序混淆，并且没有任何效果（至少它不适合我）。

我尝试了这两种方法，它们都有效，但我选择了第二种方法，因为我的视图中的锚点已映射到根目录，我不想全部修复。使您的链接相对，人！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T17:55:40.937

常见的方法是将它们放在新创建的静态目录下

```
webapp/static/js 
```

并参考它`/webcontext/static/js/somefile.js`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T19:14:11.357

我认为在您创建了一个普通的 Maven 项目之后，您只需创建一个新文件夹（通过 STS\Eclipse），例如：

```
webapp/static/js 
```

因为 Maven 不处理 javascript（您使用 Maven 添加新的 Java 依赖项并编译它......Javascript 是运行时脚本，在您的视图代码中并且没有编译代码）

您可以创建一个这样的文件夹，因为静态的东西更像其他东西，如应用程序中使用的 jpg 图像，.properties 文件......是您拥有并且在您的视图中使用但您没有由 Maven 处理的东西。

啊...可能要正常工作，您必须在项目的类路径中添加这个新文件夹。在 STS\Eclipse 中：右键单击项目名称 ---> 属性 ---> Java 构建路径 ---> 选项卡源 ---> 单击文件夹 ---> 并添加您拥有的新文件夹创建

# c# - C# LINQ SPROC 从页码获取结果

> ID：13729330
> 
> 赞同：0
> 
> 时间：2012-12-05T17:49:46.580
> 
> 标签：c#, linq, asp.net-mvc-2

我在 ASP.NET MVC 应用程序中使用 LINQ TO SQL，我的代码看起来像这样

```
ISingleResult<proc_get_dataResult> sproc_result = db.proc_get_data();
return sproc_result .AsEnumerable().Cast<proc_get_dataResult>().ToList(); 
```

我上面的代码将整个结果集作为列表返回。但是，有问题的查询可能会返回大量数据，因此我想限制正在创建的对象的数量。因此，我现在将页码传递给此方法，例如，如果我传入第 2 页，如果每页常量设置为 25，我只想返回条目 26-50。

有没有办法做到这一点？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T17:58:48.677

好吧，它的效率值得怀疑，但它似乎是您查询并带回所有结果的要求的一部分。从那里你可以使用 LINQ 中的 Skip() 和 Take() 扩展方法来获得你想要的：

```
 return sproc_result.AsEnumerable().Cast<proc_get_dataResult>().ToList().OrderBy(r=>r.WhateverField).Skip(25).Take(25); 
```

编辑：我忘了你必须先订购才能跳过或接受。只需替换任何有序字段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T17:54:21.987

[看到这个线程。](https://stackoverflow.com/questions/4358253/sql-server-2008-paging-methods/4359183#4359183)

这不是*完全*重复的，因为您是在 LINQ 的上下文中询问的。您需要修改存储过程以使用该线程中的一种分页方法。CTE /`Row_Number() over...`方法是为结果集分配索引的一种非常有效的方法，然后可用于对结果进行排序/分页。

# c# - C#5 异步方法完成事件。

> ID：13729331
> 
> 赞同：3
> 
> 时间：2012-12-05T17:49:49.403
> 
> 标签：c#, asynchronous, .net-4.5, async-await, c#-5.0

我有一个像这样的异步方法

```
public async void Method()
{
    await // Long run method
} 
```

当我调用这个方法时，我可以在这个方法完成时有一个事件吗？

```
public void CallMethod()
{
    Method();
    // Here I need an event once the Method() finished its process and returned.
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-05T18:12:37.303

你为什么需要那个？需要等待完成吗？像这样工作：

```
public async Task Method() //returns Task
{
    await // Long run method
}

public void CallMethod()
{
    var task = Method();

    //here you can set up an "event handler" for the task completion
    task.ContinueWith(...);

    await task; //or await directly
} 
```

如果您不能使用 await 并且确实需要使用类似事件的模式，请使用`ContinueWith`. 您可以将其视为为任务完成添加事件处理程序。

# python - 删除特殊目录 Python 的内容 (Windows)

> ID：13729332
> 
> 赞同：2
> 
> 时间：2012-12-05T17:49:48.780
> 
> 标签：python, windows

我有相当基本的 Python 知识，不幸的是它太基础了，以至于我不知道如何去做我想做的事。我做了一些搜索，找到了问题的一半答案。

计划是删除文件夹的内容，但由于用户名，系统之间的目录不同。假设目录是*“C:\Users\USER\Documents\VideoEditor\JunkFiles”*，但我希望它尝试删除所有不同版本的文件。这是一个示例列表： *'C:\Users\USER\Documents\VideoEditor09\JunkFiles' 'C:\Users\USER\Documents\VideoEditor10\JunkFiles' 'C:\Users\USER\Documents\VideoEditor11\JunkFiles'*

所以基本上，

无论用户名是什么，我如何告诉它目录在哪里？如何告诉它删除指定目录的内容，但将文件夹保留在那里（如果可能）？

**谢谢！**

**西奥。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-22T14:05:21.473

[os.path.expanduser](http://docs.python.org/2/library/os.path.html#os.path.expanduser)

```
>>> os.path.expanduser('~')
'C:\\Users\\falsetru' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T18:10:17.907

您可以像这样访问用户的文档目录：

```
>>> import os
>>> documents = os.path.join(os.environ['USERPROFILE'], 'Documents')
>>> documents
'C:\\Users\\poke\\Documents'
>>> directories = [os.path.join(documents, 'VideoEditor{0}\\JunkFiles'.format(y)) for y in ('09', '10', '11')]
>>> directories
['C:\\Users\\poke\\Documents\\VideoEditor09\\JunkFiles', 'C:\\Users\\poke\\Documents\\VideoEditor10\\JunkFiles', 'C:\\Users\\poke\\Documents\\VideoEditor11\\JunkFiles'] 
```

然后，您可以循环浏览目录的文件以删除它们，或者如果删除文件夹也可以（之后您可以再次创建它们），您也可以使用[`shutil.rmtree`](http://docs.python.org/3/library/shutil.html#shutil.rmtree)：

```
>>> import shutil
>>> for directory in directories:
        shutil.rmtree(directory) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T17:59:38.920

您可以尝试以下方法：

```
import os
user = 'some_user_name'
videoEditors = ['VideoEditor09','VideoEditor10','VideoEditor11']
for i in videoEditors:
    os.chdir('C:\Users\%s\Documents\%s\JunkFiles'%(user,i))
    files = os.listdir('.')
    for file in files:
        os.remove(file) 
```

我在这里使用的主要内容是[Python os 包](http://docs.python.org/2/library/os.html)和要浏览的所需文件夹列表。'%s' 也是 Python[字符串格式化](http://docs.python.org/2/library/stdtypes.html#string-formatting)的一部分。

希望这可以帮助！

# visual-studio-2012 - 项目创建失败（vs2012中的InstallShield）

> ID：13729334
> 
> 赞同：10
> 
> 时间：2012-12-05T17:49:53.397
> 
> 标签：visual-studio-2012, installation, installshield-le

我无法在 Visual Studio 2012 专业版中创建安装项目（启用 installshield 限量版）我收到以下错误：

“.. 项目创建失败”，没有更多细节

已经检查了文件夹权限并重置了 Visual Studio 的设置，我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-10T10:13:37.037

它包含在VS中，但不起作用，然后重新安装..我在这里解决了它的问题：

> 适用于 Visual Studio 的
> InstallShield 限量版 适用于 Visual Studio* 的 InstallShield® 限量版使您能够：
> 
> 为使用 Visual Studio 构建的应用程序构建灵活的安装项目 使用简单的设计环境和 Project Assistant 启动项目 利用安装先决条件和自定义操作 对安装程序进行数字签名
> 
> Visual Studio 的 InstallShield Limited Edition 替换了 Visual Studio 安装程序提供的功能。将现有的 Visual Studio 部署项目导入 InstallShield Limited Edition 以开始使用。
> 
> 如何获得适用于 Visual Studio 的 InstallShield 限量版
> 
> 第 1 步：验证您的计算机是否有网络连接。
> 第 2 步：转到下载网站。 [http://go.microsoft.com/fwlink/?LinkID=239620&lang=1033&ver=pro](http://go.microsoft.com/fwlink/?LinkID=239620&lang=1033&ver=pro)
> 第 3 步：注册以下载解决方案，然后安装或保存它以部署到 Team Foundation Server。
> 第 4 步：安装后，您需要重新启动 Visual Studio 才能访问 Setup and Deployment 类别下的 InstallShield Limited Edition 项目类型。
> 
> *   InstallShield Limited Edition 包含在 Visual Studio 2010 和更高版本中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-06T08:25:50.097

我尝试了上述所有解决方案，但下面提到的步骤最终帮助了我。如果以上解决方案都不适合您，请尝试一下。

*   转到库\文档文件夹
*   右键单击文件夹 IISExpress，然后单击属性
*   转到高级选项
*   在压缩或加密属性下，请取消选中“加密内容以保护数据”复选框
*   单击确定并应用。

现在尝试创建一个项目，希望您不会再次遇到错误。

# jquery - 扩展 jQuery 阅读更多/阅读更少功能

> ID：13729336
> 
> 赞同：0
> 
> 时间：2012-12-05T17:49:59.773
> 
> 标签：jquery

尝试为文章创建“阅读更多/阅读更少”功能（代码见下文）。我正在使用的代码正是我需要的......但是，我无法为这个函数的更多和更少部分添加图像。当它位于“阅读更多”位置时，它应该是一个向下箭头。当处于“阅读少”位置时，它应该有向上箭头。

我怎么能做到这一点？

```
$(document).ready(function() {

// The height of the content block when it's not expanded
var adjustheight = 80;
// The "more" link text
var moreText = "More";
// The "less" link text
var lessText = "Less";

// Sets the .more-block div to the specified height and hides any content that overflows
$(".more-less .more-block").css('height', adjustheight).css('overflow', 'hidden');

// The section added to the bottom of the "more-less" div
$(".more-less").append('<a href="#" class="adjust is-more"></a>');

$("a.adjust").text(moreText);

$(".adjust").toggle(function() {
    $(this).parents("div:first").find(".more-block").css('height', 'auto').css('overflow', 'visible');
    $(this).text(lessText);
  }, function() {
    $(this).parents("div:first").find(".more-block").css('height', adjustheight).css('overflow', 'hidden');
    $(this).text(moreText);
});

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T17:55:15.883

```
$("a.adjust").addClass('more-text').text(moreText);    
$(".adjust").toggle(function() {
    $(this).parents("div:first").find(".more-block").css('height', 'auto').css('overflow', 'visible');
    $(this).addClass('less-text').removeClass('more-text').text(lessText);
  }, function() {
    $(this).parents("div:first").find(".more-block").css('height', adjustheight).css('overflow', 'hidden');
    $(this).addClass('more-text').removeClass('less-text').text(moreText);
}); 
```

现在样式 css 类`.more-text`和`.less-text`.

# javascript - 在 Chrome 的 URL 栏中用 Javascript 设置文本框的值只是将值写入屏幕

> ID：13729343
> 
> 赞同：2
> 
> 时间：2012-12-05T17:50:20.853
> 
> 标签：javascript, html, getelementbyid

我正在尝试通过在 url 栏中输入以下内容来将网页中文本框的值设置为某个值：

```
javascript:document.getElementById("textboxID").value = "Value"; 
```

但是，每当我这样做时，它只会返回一个空白屏幕，其中包含我试图在角落里设置的任何值。

我正在使用谷歌浏览器，我知道这个问题不会出现在一个网站上，因为我在很多网站上都试过，这让我相信问题出在浏览器上，而不是网站上。

有谁知道为什么会发生这种情况，或者我可以使用 URL 栏中的 javascript 在页面上设置文本框的值的方法？

谢谢，-p0iz0n

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T17:55:00.283

将 void 0 放在末尾不会清除网页的内容。

```
javascript:document.getElementById("textboxID").value = "Value";void 0 
```

undefined 有效，但 void 0 更受欢迎

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-05T17:52:40.123

在控制台中输入：

*   右键单击页面
*   选择'检查元素*
*   在新面板中，选择“控制台”
*   输入您的命令并按回车键

# html - file:// 协议在 ssl 下不起作用？

> ID：13729345
> 
> 赞同：0
> 
> 时间：2012-12-05T17:50:33.347
> 
> 标签：html, browser, ssl, hyperlink

我有一个指向共享映射驱动器的链接，我可以确认该链接是好的，但浏览器忽略了点击。有人可以确认浏览器`file:///`在出现在安全页面上时会忽略 href 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T18:10:52.903

file:// 伪协议用于依赖系统访问本地系统上的文件。它与 SSL 无关。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T13:04:31.700

好的，所以问题是它被明确拒绝了。规则是：不能从通过 http[s]:// 接收的页面通过 file:// 访问资源。这是安全领域的分离。它也由[mozilla 插件](http://locallink.mozdev.org/)更清楚地定义。

# javascript - jQuery需要双击并悬停事件

> ID：13729350
> 
> 赞同：0
> 
> 时间：2012-12-05T17:50:56.483
> 
> 标签：javascript, jquery, frontend

目前在我的订单页面上，我有“订单状态：待处理”。如果订单状态需要更改，我想双击文本并出现一个下拉菜单。

所以，我打算隐藏下拉菜单，双击显示下拉菜单并隐藏文本。

我的问题是，如果用户没有从下拉列表中选择新项目，我希望它返回到文本......所以我认为你必须双击并悬停该元素才能使其工作。

我这样做只是为了测试：

```
 $(".offerStatus").bind('click', function() {
    $(".offerStatus").hover(function(){
        $(".offerStatus").html("YES");
    }, function(){
        $(".offerStatus").html("NO");
    });
}); 
```

它可以工作，但只有在您单击并将鼠标悬停在元素之外然后将鼠标悬停返回时才会显示。所以，如果我点击 .offerStatus 并且因为我悬停它，我应该看到“是”，但我没有。然后，当我将光标从元素上移开时，我应该会看到它转到“否”，它可以正常工作。我唯一想弄清楚的是，一旦用户点击离开或类似的东西，让元素返回。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T18:06:09.257

您可以在元素中使用保持悬停状态吗

```
$(".offerStatus").hover(function(){
    $(".offerStatus").data('isHover', true);
}, function(){
    $(".offerStatus").data('isHover', false);
});

$(".offerStatus").click(function() {
    var status = 'NO';
    if($(this).data('isHover')) {
        status = 'YES';
    }
    $(this).html(status);
}); 
```

# ssl - 有效的证书链长度可以为 1 吗？

> ID：13729353
> 
> 赞同：1
> 
> 时间：2012-12-05T17:50:59.273
> 
> 标签：ssl, openssl, ssl-certificate

我正在尝试一个简单的 Java 代码来检索远程服务器的证书链。一些网站返回证书链（2,3,4..），而一些只有 1。我的问题是：当我获得长度为 1 的证书链时有什么问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T18:33:24.060

可能有以下三种情况：

1.  他们提供自签名证书
2.  他们提供由根证书（罕见情况）签名的证书，您被认为是受信任的
3.  他们提供由 CA 证书签名的证书，他们希望您拥有该证书（很常见的情况，因为在 Windows 中也存储了中间 CA 证书，因此您可以构建完整的链）

您可以轻松检查案例 1，但默认情况下此类证书不受信任（除非用户信任它们）。在情况 2 和 3 中，您需要使用本地证书存储作为帮助器来重建链。

# android - 在 Activity 和 Service 之间共享大量数据

> ID：13729357
> 
> 赞同：2
> 
> 时间：2012-12-05T17:51:05.903
> 
> 标签：android, multithreading, service

好的，一段时间以来，我一直在研究解决此问题的最佳方法，所以让我为您分解一下我的需求和发现。

需求：

*   一个活动 [SendMsg] 组成一个消息正文，其中可能包括最多 5MB 的图像附件。
*   当用户发送此消息时，消息必须上传到我的服务器
*   此上传必须同步发生，因为我阻止用户使用该应用程序，直到它完成或失败
*   完成后，如果发送成功，则 SendMsg Activity 将被销毁 - 否则会显示错误对话框
*   考虑到任何手机旋转或主页按钮按下/电话等，上传和用户体验必须保持不变

这里的最后一个子弹原来是最难的。

发现：

我想过只在静态 AsyncTask 中完成工作，但我认为这对我不起作用 - 状态变得非常混乱，似乎我无法保证当应用程序在后台时操作系统不会杀死线程.

我决定使用一个服务，在该服务中创建它并从 Activity 绑定/取消绑定。该服务生成一个 AsyncTask，完成工作，然后根据其结果 (SUCCEED/FAIL) 向 Activity 发出信号。除了我的大消息之外，这个范例似乎工作正常。服务/活动通信消息通信不适用于编组如此大的有效负载。*注意：如果不清楚，当用户点击发送时，此表单数据和文件必须提供给服务。在某些情况下，这是从相机拍摄的图像，出于应用程序的目的，它不存在也不可能存在于磁盘上。

很明显，我想要的是某种共享内存存储，我可以在其中保存来自 Activity 的数据。然后 Activity 可以向 Service 发出信号，表明它可以继续并上传该数据。

这样的共享区域可以存在内存中吗？我可以从服务中获取应用程序对象并将数据存储在那里吗？

另一个问题出现在上传完成但没有活动绑定到服务时，但我想我可能已经解决了这个问题。请让我知道以下是否有意义：

1.  服务完成上传
2.  服务检查当前是否绑定了 Activity
3.  如果是，则返回 Activity 通过其消息队列处理的错误消息
4.  如果不是，则将返回代码存储在该共享内存区域中，并在那里标记一个布尔值
5.  当一个客户端活动被创建/恢复时，它应该首先检查这个布尔值，看看这个过程是否已经完成。如果是这样，将 Message 发送到它自己的处理程序并像以前一样处理代码

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T18:15:22.943

为了处理您的内存要求，我可能会使用`Map`UUID 到具有您所有消息详细信息的持有者类。将其存储`Map`为子类中的成员变量`Application`或静态变量。 确保在您的任务完成或失败时**清除它。**如果您确定不会同时有多个此类请求，也许您可​​以只使用单个类而不是 Map 或列表。

然后，您可以在 WakeLock 的帮助下使用 IntentService 完成[您](http://developer.android.com/reference/android/os/PowerManager.WakeLock.html)的[要求](http://developer.android.com/reference/android/app/IntentService.html)。我倾向于避免在 Android 中绑定服务，因为它们由于屏幕旋转而难以使用。只需在启动.`IntentService`

在我看来，从您的 Service 与您的 Activity 进行通信的最佳方式是使用`PendingIntent`. 基本上，您从 Activity 启动服务，并传入`PendingIntent`启动服务的 Intent。当您的服务完成其工作或失败时，您将调用`send()`PendingIntent。`onActivityResult()`然后，您的 Activity 将在其方法中获得回调。

这样做有几个好处：

*   它是微不足道的线程安全的。您在 中的一个单独线程中完成了一项长时间运行的任务`IntentService`，并且当它完成时您会在 UI 线程上收到通知。
*   这支持屏幕旋转！你可以随心所欲地旋转你的活动，你仍然会得到回调`onActivityResult()`。相反，即使您`finish()`的 Activity 并在 PendingIntent 发送之前启动一个新的，它也不会被传递，这几乎总是您想要的。

我有一个[演示应用程序](https://github.com/wsanville/RotationDemo)来展示这种方法。基本上，您有一个[Activity](https://github.com/wsanville/RotationDemo/blob/master/src/co/touchlab/rotationdemo/ServiceActivity.java)为一些工作加注星标，并使用进度对话框阻止 UI。如果屏幕旋转，此对话框将再次显示。工作在[Service](https://github.com/wsanville/RotationDemo/blob/master/src/co/touchlab/rotationdemo/WeatherIntentService.java)中完成，Service将`PendingIntent`返回给 Activity。

您工作的最后一部分是确保在上传运行时设备不会进入睡眠状态。Mark Murphy 编写了一个[很好的示例](https://github.com/commonsguy/cwac-wakeful/)和[服务实现](https://github.com/commonsguy/cwac-wakeful/blob/master/src/com/commonsware/cwac/wakeful/WakefulIntentService.java)，它使用 a`WakeLock`来确保不间断地完成工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T18:01:43.987

首先，您还应该将您的服务切换到您通过`startService()`调用触发的前台服务（而不是绑定到服务）。这将确保服务尽可能长时间地保持活动状态。一旦您的 Activity 完成（可能在用户离开您的应用时发生），绑定到服务将停止服务。

我还将利用与前台服务一起使用的通知来让用户知道他们上传的状态。

要将信息从服务传递回您的活动，您可以查看 ResultReceiver 类。具体来说，查看 Google 在其 IO 应用程序之一中实现的 DetachableResultReceiver 范例。

由于除了通信需求外，您还有大量内存需求，您可能只想创建一个单例对象来在活动和服务之间共享数据和状态。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T18:01:14.610

使用静态变量创建一个类，并让您的活动将所有值设置为该类。然后启动一个 IntentService 并让该服务查看上面的类。一旦 IntentService 处理完消息，它将广播消息，如果有任何活动等待广播，它们将收到消息。

# iphone - UIScrollview contentOffset 从窗口中移除时发生变化

> ID：13729359
> 
> 赞同：4
> 
> 时间：2012-12-05T17:51:12.230
> 
> 标签：iphone, ios, cocoa-touch, uiscrollview, uikit

我有一个关于 UIScrollView 的奇怪错误。此视图工作正常，直到我将其从窗口中删除（间接地，它是已删除视图的子视图）。

然后我执行一些不相关的动画；当我将视图放在它们所在的位置时，scrollView 的 contentOffset 发生了变化。

我在 setContentOffset: 函数中放置了一个断点，并得到了以下堆栈：

```
#0  -[TestScrollView setContentOffset:] (self=0x915fbd0, _cmd=0x7fb34cd, contentOffset={x = 80, y = -0}) at /Users/../TestScrollView.m:19
#1  0x008670ea in -[UIScrollView(Static) _adjustContentOffsetIfNecessary] ()
#2  0x0085db55 in -[UIScrollView(UIScrollViewInternal) _stopScrollingNotify:dealloc:pin:] ()
#3  0x0084e6ff in -[UIScrollView _didMoveFromWindow:toWindow:] ()
#4  0x008444bb in -[UIView(Internal) _didMoveFromWindow:toWindow:] ()
#5  0x008444bb in -[UIView(Internal) _didMoveFromWindow:toWindow:] ()
#6  0x008444bb in -[UIView(Internal) _didMoveFromWindow:toWindow:] ()
#7  0x008444bb in -[UIView(Internal) _didMoveFromWindow:toWindow:] ()
#8  0x00840c72 in -[UIView(Hierarchy) _postMovedFromSuperview:] ()
#9  0x0083f4c6 in __UIViewWasRemovedFromSuperview ()
#10 0x0083f141 in -[UIView(Hierarchy) removeFromSuperview] ()
#11 0x00166573 in __98+[App MyAnimationLaunchingMethod]_block_invoke_0 ... 
```

当滚动视图将其自己的 contentOffset 从调用 _adjustContentOffsetIfNecessary （例如在 setFrame 之后）更改时，我看到了其他问题。然而，它在这里似乎没有任何意义，因为它的大小没有改变：它只是从屏幕上取下来（稍后放回）。所以它没有理由改变它的偏移量。

对此有什么解释吗？有什么方法可以防止这种变化？

我可以手动阻止（或恢复）偏移更改，但是我正在寻找一个“干净”的解决方案（如果可用）：它是从窗口中删除的一整组视图。有时这个特定的滚动视图存在于视图树中，通常不存在。所以动画类不应该知道滚动视图。

任何的想法 ？

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T18:04:02.197

有点 hack，但是`setContentOffset:`如果它已经从它的 superview 中删除，你可以在你的中进行测试并简单地返回。

# function - 在游标中调用函数 for 循环

> ID：13729362
> 
> 赞同：0
> 
> 时间：2012-12-05T17:51:26.280
> 
> 标签：function, for-loop, plsql, cursor

我创建了一个过程，它可以找到一些需要填充的缺少日期的记录。我编写了一个游标，它使用 select 语句来查找这些记录，并打算使用 for 循环来更新它们。

应用程序中有一个现有的公共函数，如果我将记录的 ID 传递给它，它将返回我需要的日期。我的问题实际上是一个语法问题，我如何在游标 for 循环中调用这个公共函数并将我需要的变量传递给它以获取日期，然后更新我在游标选择语句中找到的记录。

我写的程序看起来有点像这样：

```
CREATE OR REPLACE PROCEDURE PRO_POPMISSINGDATE IS

CURSOR cur_FindMissingDate IS
 SELECT fieldID,
        field2,
        field3
 FROM table1
      table2
      table3
 WHERE CONDITION 1
       CONDITION 2
       CONDITION 3

BEGIN

FOR rec_cur_FindMissingDate IN cur_FindMissingDate
LOOP

BEGIN

        UPDATE TABLE2
        SET    missingdate = fnc_get_date(fieldID);

        WHERE  field2 = field4

        COMMIT;

    EXCEPTION
        WHEN OTHERS THEN

            dbms_output.put_line('Error updating record ' || SUBSTR(SQLERRM, 1, 250));
            ROLLBACK;
    END;
END LOOP;
END PRO_POPMISSINGDATE; 
```

我在更新语句中收到 ORA-00904 无效标识符错误，因为它无法识别 fieldID。我显然在这里做了一些完全错误的事情，但我遇到了精神障碍，任何建议将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T17:55:19.147

我想你的意思是：

```
SET    missingdate = fnc_get_date(rec_cur_FindMissingDate.fieldID); 
```

# cassandra - Hector BatchInserts 和 BatchSizeHint

> ID：13729364
> 
> 赞同：0
> 
> 时间：2012-12-05T17:51:31.730
> 
> 标签：cassandra, hector

我目前正在将几个行键中的 2000 列批量插入到 cassandra。我这样做的方法是使用 addinsertion

```
while( cond... ){
myMutator.addInsertion(keyId, columnfamilyName,compositeColumn);
totalCount++;

    if(totalCount % 2000 == 0){
       myMutator.execute();
    }
} 
```

有没有办法在不使用 totalCount 变量的情况下获取添加到批处理中的列数。BatchMutation.getSize() 返回在批处理中添加更新的键的数量。我想知道在创建 mutator 时 sizeHint 的用途是什么。通过查看 hector 的源代码，我无法获得很多细节。我所能看到的是它分别为行数和列数创建内部mutationMap 和mutList。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T19:02:33.827

`BatchMutation`有一个 getSize() 方法可以做你想做的事：

```
/**
   * Return the current size of the underlying map
   * @return
   */

public int getSize() {
    return mutationMap.size();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T05:38:10.680

看起来赫克托不跟踪列数。所以我将使用我之前使用的 totalcount 方法。

# objective-c - 从快照中恢复 Xcode 项目

> ID：13729366
> 
> 赞同：1
> 
> 时间：2012-12-05T17:51:32.050
> 
> 标签：objective-c, xcode

我只是搞砸了我的整个项目，试图重构它以包含 ARC。现在我一直试图从创建的快照弧重构中恢复，但它造成了更大的混乱。在这种情况下我能做什么？有没有办法将快照清理干净，而不是尝试将其用作参考点来将项目修改为以前的状态？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T18:23:21.473

好的，我在网上找到了如何通过进入管理器/项目，选择我要恢复的快照，然后单击底部的“导出快照”来恢复快照。经过一番拼凑后，我终于把我的项目恢复到了混乱之前的状态！感谢所有回复的人！我希望这对其他人有帮助。干杯!

# c# - C#如何在不使用大量内存的情况下裁剪图像？

> ID：13729368
> 
> 赞同：7
> 
> 时间：2012-12-05T17:51:38.127
> 
> 标签：c#, memory, image-processing, out-of-memory

> **可能重复：**
> [如何裁剪大图像](https://stackoverflow.com/questions/1018401/how-to-crop-huge-image)

有一个问题询问如何在[此处裁剪图像](https://stackoverflow.com/questions/734930/how-to-crop-an-image-using-c)

我已经阅读并使用了答案。但它们似乎都需要将图像加载到 a`Bitmap`或`Image`.

这给我造成了记忆问题。当我试图将 5 张图像 (8000 x 8000) 裁剪成图块时。一次一个。

如果我错了，请纠正我，但那是 8000x8000x4 字节 = 244 MB。每张图片。

我随机出现内存不足的问题。

如何从另一个图像中获取 1000x1000 图像，同时减少内存消耗。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T19:59:42.457

所以，这绝对是一件非常重要的事情——基本上，你必须为给定的图像格式重新实现图像解码器。这**不简单**。

对于“简单”的 Windows BMP 格式，有这些野兽需要对付：

*   [BMP 文件格式](http://en.wikipedia.org/wiki/BMP_file_format)
*   [DIB头结构](http://msdn.microsoft.com/en-us/library/windows/desktop/dd183381%28v=vs.85%29.aspx)

也就是说，我不得不在午休时间试一试……这就是我能想到的，在一个漂亮的 LINQPad 就绪脚本中。

（注意：仅限 Windows BMP！）

```
void Main()
{
    // Carve out a 100x100 chunk
    var top = 100;
    var left = 100;
    var bottom = 300;
    var right = 300;

    // For BMP only - open input
    var fs = File.OpenRead(@"c:\temp\testbmp.bmp");

    // Open output
    if(File.Exists(@"c:\temp\testbmp.cropped.bmp")) File.Delete(@"c:\temp\testbmp.cropped.bmp");
    var output = File.Open(@"c:\temp\testbmp.cropped.bmp", FileMode.CreateNew);
    var bw = new BinaryWriter(output);

    // Read out the BMP header fields
    var br = new BinaryReader(fs);
    var headerField = br.ReadInt16();
    var bmpSize = br.ReadInt32();
    var reserved1 = br.ReadInt16();
    var reserved2 = br.ReadInt16();
    var startOfData = br.ReadInt32();   

    // Read out the BMP DIB header
    var header = new BITMAPV5Header();  
    var headerBlob = br.ReadBytes(Marshal.SizeOf(header));
    var tempMemory = Marshal.AllocHGlobal(Marshal.SizeOf(header));
    Marshal.Copy(headerBlob, 0, tempMemory, headerBlob.Length);
    header = (BITMAPV5Header)Marshal.PtrToStructure(tempMemory, typeof(BITMAPV5Header));
    Marshal.FreeHGlobal(tempMemory);

    // This file is a 24bpp rgb bmp, 
    var format = PixelFormats.Bgr24;
    var bytesPerPixel = (int)(format.BitsPerPixel / 8);
    Console.WriteLine("Bytes/pixel:{0}", bytesPerPixel);

    // And now I know its dimensions
    var imageWidth = header.ImageWidth;
    var imageHeight = header.ImageHeight;
    Console.WriteLine("Input image is:{0}x{1}", imageWidth, imageHeight);

    var fromX = left;
    var toX = right;
    var fromY = imageHeight - top;
    var toY = imageHeight - bottom;

    // How "long" a horizontal line is
    var strideInBytes = imageWidth * bytesPerPixel;
    Console.WriteLine("Stride size is:0x{0:x}", strideInBytes);

    // new size
    var newWidth = Math.Abs(toX - fromX);
    var newHeight = Math.Abs(toY - fromY);
    Console.WriteLine("New slice dimensions:{0}x{1}", newWidth, newHeight);

    // Write out headers to output file 
    {
        // header = "BM" = "Windows Bitmap"
        bw.Write(Encoding.ASCII.GetBytes("BM"));    
        var newSize = 14 + Marshal.SizeOf(header) + (newWidth * newHeight * bytesPerPixel);
        Console.WriteLine("New File size: 0x{0:x} bytes", newSize);
        bw.Write((uint)newSize);    
        // 2 reserved shorts
        bw.Write((ushort)0);    
        bw.Write((ushort)0);            
        // offset to "data"
        bw.Write(header.HeaderSize + 14);

        // Tweak size in header to cropped size
        header.ImageWidth = newWidth;
        header.ImageHeight = newHeight;

        // Write updated DIB header to output
        tempMemory = Marshal.AllocHGlobal(Marshal.SizeOf(header));
        Marshal.StructureToPtr(header, tempMemory, true);
        byte[] asBytes = new byte[Marshal.SizeOf(header)];
        Marshal.Copy(tempMemory, asBytes, 0, asBytes.Length);
        Marshal.FreeHGlobal(tempMemory);
        bw.Write(asBytes);
        asBytes.Dump();
    }

    // Jump to where the pixel data is located (on input side)
    Console.WriteLine("seeking to position: 0x{0:x}", startOfData);
    fs.Seek(startOfData, SeekOrigin.Begin);

    var sY = Math.Min(fromY, toY);
    var eY = Math.Max(fromY, toY);
    for(int currY = sY; currY < eY; currY++)
    {
        long offset =  startOfData + ((currY * strideInBytes) + (fromX * bytesPerPixel));
        fs.Seek(offset, SeekOrigin.Begin);      

        // Blast in each horizontal line of our chunk
        var lineBuffer = new byte[newWidth * bytesPerPixel];
        int bytesRead = fs.Read(lineBuffer, 0, lineBuffer.Length);
        output.Write(lineBuffer, 0, lineBuffer.Length);
    }

    fs.Close();
    output.Close();
}

[StructLayout(LayoutKind.Sequential, Pack=0)]
public struct BITMAPV5Header 
{
    public uint HeaderSize;
    public int ImageWidth;
    public int ImageHeight;
    public ushort Planes;
    public ushort BitCount;

    [MarshalAs(UnmanagedType.ByValArray, SizeConst=36)]
    public byte[] DontCare;
} 
```

# oracle - 一次使用 TOAD 为 oracle 数据库生成创建和插入脚本

> ID：13729372
> 
> 赞同：1
> 
> 时间：2012-12-05T17:52:00.273
> 
> 标签：oracle, toad

我们有一个数据库，其中包含许多与我们的应用程序（不是全部）、视图、触发器、函数、过程等相关的表。

有没有办法生成脚本来在另一个 DB + insert 语句中创建这些对象。

我们不想进行数据库备份，因为它还有很多其他的东西。

请建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T20:36:45.207

您可以使用 DBMS_METADATA 来提取 DDL

或者你可以使用 SQL Developer Tools->Database Export

在 Toad 中，您可以使用 Database->Export->Export DDL

# bash - 命令“jobs”在终端上不起作用（shell，bash）

> ID：13729376
> 
> 赞同：0
> 
> 时间：2012-12-05T17:52:28.323
> 
> 标签：bash, shell, command, jobs

我只是想制作一个涉及命令“jobs”的简单脚本，但它似乎不起作用，它甚至没有被“man”识别......不知道发生了什么：S。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T18:14:55.990

`jobs`是一个 bash 内置函数（如果你想到它，拥有一个控制从 shell 启动的作业进程的系统命令实际上并没有什么意义）。您可以通过以下方式找到有关该命令的更多信息：

*   `help jobs`在您的终端发行
*   阅读 bash 参考手册中的[相应部分](http://www.gnu.org/software/bash/manual/bashref.html#Job-Control)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T18:09:32.957

您需要运行交互式 shell 才能使`jobs`命令工作 - 以这种方式进行的作业控制由用户使用，而不是由脚本使用。

您应该能够使用该`jobs -p`命令来获取正在运行的后台任务（作业）的 pid，这可能会完成您正在尝试做的事情。这应该显示子进程的所有 pid，可以单独检查/监控。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T18:18:23.087

`jobs`只会报告`jobs`正在运行的 shell 实例产生的后台和/或挂起的进程。因此，在脚本中使用它的用处有限（但对于仅向脚本用户报告正在发生的事情应该没问题），因为只有在脚本中较早产生并且以某种其他方式被后台或暂停的东西才会被知道到运行脚本的 shell 实例。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T17:56:00.237

安装 POSIX 手册页。该软件包应命名为“manpages-posix-dev”或类似名称。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-05T17:56:58.090

我不认为有一个名为`jobs`.

在 ubuntu 上都找不到任何`which jobs`东西。`sudo apt-get jobs`

如果它是本地二进制文件，请检查`$PATH`以确保它被包含在内。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-05T18:29:55.293

使用 ps 命令从 shell 脚本中查找您的进程

# asp.net - 如何在 app.config 文件中设置绑定重定向？

> ID：13729377
> 
> 赞同：2
> 
> 时间：2012-12-05T17:52:28.773
> 
> 标签：asp.net, asp.net-mvc, app-config

如果任何引用的程序集使用的是早期版本，我希望我的单元测试项目始终使用 System.Web.MVC 版本 4.0.0.0。

我知道我们如何在 web.config 中做到这一点。

但是当我在我的单元测试项目的 app.config 中执行以下操作时，它仍然不起作用：

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T03:43:42.413

程序集绑定与您的 web.config 中的相同。问题在于它是否正确命名 .config 文件并将其复制到输出路径。

检查输出路径以查看它是否正在转换`App.config`并`YourDllNameHere.dll.config`复制到那里。如果没有，您可能需要`YourDllNameHere.dll.config`在项目中将文件重命名为，并在属性中将“复制到输出目录”设置为“始终”。

# ruby-on-rails - CanCan vs. Rails 协会

> ID：13729387
> 
> 赞同：0
> 
> 时间：2012-12-05T17:53:03.297
> 
> 标签：ruby-on-rails, associations, cancan

我想我已经对 CanCan 的力量感到困惑。

我在这里问了一个更长的问题[-Rails has_many :through、null belongs_to、多个 belongs_to 和删除 belongs_to？](https://stackoverflow.com/questions/13717456/rails-has-many-through-null-belongs-to-multiple-belongs-to-and-deletion-of-be). 但在其中一位成员的建议下，我用我认为最终的问题简化了我的问题。

简而言之， a`User`在 a`Role`中有 a `Network`。A`User`也可以创建`Events`，但是，`Events`他们可以看到/编辑的都是基于那个`Role`。如果 a`User`丢失了他们`Role`，他们将无法再访问`Event`.

此外，如果创建的`User`和/或被删除，则遗嘱仍然存在于 中，并且对所有具有足够高权限（管理员、经理等）的.`Role``Event``Event``Network``Users``Role`

我可以使用 CanCan`User`通过`Event`测试他们的`Role`. 那部分工作正常。

但从概念上讲，如果我使用 CanCan 来控制对控制器操作的访问`Events`以及是否`Event`甚至显示在基于 的视图中`can :read`，是否需要在和`has_many :through`之间建立 rails 关联？由于技术上仅通过 a连接到a ，我可以将它留给 CanCan 来控制访问，还是我需要一个关联。有这样的方法会很好：`Users``Events``User``Event``Role``Network`

```
def events
  ... # info for grabbing all events user has access to?
end 
```

或者这也没有必要？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T18:51:27.733

您不需要使用 has_many :through

看看：[https ://github.com/ryanb/cancan/wiki/defining-abilities](https://github.com/ryanb/cancan/wiki/defining-abilities)

您可以为用户分配不同的角色并使用他们在我刚刚发布的 wiki 中所说的内容检查权限

# email - 如何设置退回邮件的主题？

> ID：13729391
> 
> 赞同：0
> 
> 时间：2012-12-05T17:53:13.433
> 
> 标签：email, mail-server, email-bounces

发送电子邮件时，有没有一种方法可以控制退回电子邮件的主题（如果退回且无法送达）。

基本上，我可以使用 Return-Path 标头控制退回的电子邮件的去向，我想知道是否有办法设置退回的电子邮件的主题行。

因此，如果我发送了一封带有主题的电子邮件：

*帐户 #123456 有更新*

如果它被退回，我希望退回到邮件服务器的退回电子邮件具有以下主题：

“帐户 #123456 出现反弹”

可能的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T17:55:30.380

不可能。不同的服务器会使用它们的反弹格式做不同的事情。有些可能会完整发送主题，有些可能会完全覆盖它——没有标准。您可以保证的唯一信息是（正如您已经发现的）返回路径地址。

编辑：如果您试图确定反弹的对象，您可以在返回路径中对其进行编码。例如：

```
Return-Path: bounce+123456@mydomain.com 
```

然后将您的电子邮件服务器配置为接受所有退回+地址并将它们发送到您的处理脚本。更好的是，对地址进行编码：

```
Return-Path: bounce-<some obfuscated string>@mydomain.com 
```

这将允许您提取字符串、查找关联的帐号，然后将帐户标记为无效。（或无论您做什么。）理想情况下，您不希望在地址中包含原始的可猜测 ID，或者任何人都可以通过向该容易猜测的地址发送电子邮件来禁用帐户。

# javascript - 使用 bottle.py 加载 CSS 和 JavaScript

> ID：13729394
> 
> 赞同：2
> 
> 时间：2012-12-05T17:53:27.817
> 
> 标签：javascript, python, css, bottle

我正在尝试用[Bottle.py编写一个应用程序](http://bottlepy.org/docs/dev/)

```
<link href="bootstrap.min.css" rel="stylesheet" media="screen">
<script src="http://d3js.org/d3.v2.js"></script>  
<script src="http://code.jquery.com/jquery-latest.js"></script>
<script src="bootstrap.min.js"></script> 
```

我的观点是复制这些 import 语句，而没有实际导入 css + js 文件本身。

[正如教程](http://bottlepy.org/docs/dev/tutorial.html#routing-static-files)建议的那样，我已经包含了一个`static`模板

```
@route('/static/<filename>')
def server_static(filename):
    return static_file(filename, root='/static/') 
```

如何修改 HTML 以便我的浏览器读取`*.js , *.css`文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T18:07:34.593

我用过（例如）

```
... href="/arch/favicon.ico" 
```

我有

```
@route('/arch/<filename>')
def fileget(filename): 
```

对于静态文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T02:28:41.200

使用`:path`过滤器允许匹配诸如`/bootstrap.min.js`或之类的 URL `/js/bootstrap.min.js`。在第一种情况下，Bottle 返回文件`/usr/home/project/client/bootstrap.min.js`，在第二种情况下`/usr/home/project/client/js/bootstrap.min.js`。

```
@route('<path:path>')
def server_static(path):
    return static_file(path, root='/usr/home/project/client') 
```

> :path 以非贪婪方式匹配包括斜线字符在内的所有字符，可用于匹配多个路径段。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-08-14T14:48:40.823

使用正则表达式匹配来提供`.css`&`.js`文件：

```
@route('/<file:re:.*\.(css|js)>')
def serve_cssjs_suffixed_file(file):
    return static_file(file) 
```

'static_file' 函数的一些值得注意的选项是：

`root='target_dir'`指向包含文件的目录

`mimetype='text/css'`如果瓶子猜错了，手动传递 MIME 类型

# javascript - clearInterval 不会停止 setInterval

> ID：13729395
> 
> 赞同：2
> 
> 时间：2012-12-05T17:53:29.600
> 
> 标签：javascript, setinterval, clearinterval

我有 1 个可以打开和关闭的按钮： button on -> onrepeat = true button off -> onrepeat = false

如果 onrepeat 为真，setinterval to 启动它就可以了。如果 onrepeat 为假，我希望它清除间隔。

我的明确间隔并没有停止间隔，它只是继续：

```
 function checkRepeat() {

      var int = setInterval(repeat, 6000);

      if (onrepeat === false) {
          $("#repeat_toggle").attr("class", "repeat_button");

          repeat();
          int;

          onrepeat = true;

      }

      else {

          clearInterval(int);
          $("#repeat_toggle").attr("class", "repeat_off_button");
          onrepeat = false;

       }

  } 
```

知道有什么问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T17:55:02.547

`int`作用于函数。每次打电话都会重置`checkRepeat`

您需要将其范围限定在函数之上。

# javascript - 从一组数字中计算出一个百分比

> ID：13729396
> 
> 赞同：1
> 
> 时间：2012-12-05T17:53:31.450
> 
> 标签：javascript, math, percentage

我需要根据值（在 html 中设置）更改 li 的不透明度。

所以，这里是一个html的例子：

```
<ul>
    <li class="test">3</li>
    <li class="test">23</li>
    <li class="test">6</li>
    <li class="test">9</li>
    <li class="test">11</li>
    <li class="test">16</li>
    <li class="test">19</li>
</ul> 
```

因此，最高值 (23) 将具有 100% 的不透明度，而下一个最高值 (19) 将具有较低的百分比，依此类推。

最低值应为 10%。

我可以做所有我只是在计算中苦苦挣扎的 JavaScript。有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-05T18:02:19.123

If the highest opacity is 100% and the lowest is 10%, then here's what you want:

1.  Determine the maximum value. Call it max.
2.  Determine the minimum value. Call it min.
3.  To each value, assign opacity `(10 + ((value - min) / (max - min)) * 90)` percent.

More generally, if the highest opacity is `X` and the lowest is `Y`, then the formula is `(Y + ((value - min) / (max - min)) * (X - Y))`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-05T18:02:04.330

这是公式：

```
percentage = 10 + (number - min)/(max - min)*90 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-05T18:12:23.227

获取最小值和最大值，然后您可以将不透明度计算为：

```
0.1 + 0.9 * (value - min) / (max - min) 
```

演示：http: [//jsfiddle.net/Guffa/FBTBw/](http://jsfiddle.net/Guffa/FBTBw/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-10-07T04:34:25.617

我遇到了同样的问题并以这种方式解决了它：

```
Array.prototype.toPercentage = function() {
  var arr = this
  return arr.map(function(d, i) {
    return (100 * d / arr.reduce((a, b) => a + b, 0)) | 0;
})} 
```

用法：给定一个数组，计算数组中每个元素的百分比。

```
var nums = [23, 3, 19, 16, 10, 15]
// the percentage
var numsPercent = nums.toPercentage() 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-05T18:13:37.693

我可以想象一种简单的方法。假设您想要设置从 20% 到 100% 不透明度的所有样式（您可以稍后将其更改为由函数参数确定，但现在让其保持简单）。第一个目标是从列表中获取最大值和最小值：

```
var list = document.getElementsByTagName("ul")[0].children;
var min = Infinity, max = -Infinity;

for (var i = 0; i < list.length; i++) {
   var val = parseInt(list[i].innerText, 10);
   min = Math.min(min, val);
   max = Math.max(max, val);
} 
```

现在，您应该线性缩放每个的不透明度值，就像这样 -

```
var min_opacity = 20, max_opacity = 100;
for (var i = 0; i < list.length; i++) {
  var val = parseInt(list[i].innerText, 10);
  list[i].style.opacity = (min_opacity + ((val - min) / (max - min)) * (max_opacity - min_opacity)  + "%";
} 
```

稍微扩展一下数学：这里的大部分工作都是在 [0,1] 的区间上获取一个数字，其中 0 代表最低值，1 代表最高值。“（val - min）/（max - min）”执行此缩放：一旦从中减去min，任何数字都不会大于“max - min”，并且一旦从中减去min，就不会小于零。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-09-21T14:17:53.270

```
const percentage = () => {
    let arr = [50, 3, 11.5, 25, 10, 15] 
    return arr.map((number) => ((number) / (50) * 100).toFixed())
  } 
```

```
50 highest value 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-12-05T18:08:01.613

Percentage_value = (value/highest_value)*100

在这种情况下，不透明度与值成比例，而不是等间距。换句话说，如果您的值是 1、2 和 10，那么在这种情况下，1 和 2 的不透明性都将远低于 10。

如果您可以获得列表中的最高值，那么您可以迭代列表中的所有值，每次将“value”和“highest_value”替换为实际数字。

需要注意的事项：

*   您可能必须通过将highest_value 乘以1.0 来强制浮点除法

*   您可能还必须将列表值从字符串转换为整数或浮点数

# asp.net - 尝试使用 AD 身份验证 ASP.Net 时已经登录并且注销永远不会起作用

> ID：13729397
> 
> 赞同：1
> 
> 时间：2012-12-05T17:53:31.093
> 
> 标签：asp.net, c#-4.0, iis-7, active-directory, login-control

我正在使用表单进行 AD 身份验证。我面临的问题是，由于我已经在计算机上登录了网络，所以网页显示我已经登录。即使我单击注销按钮，也保持登录状态。

仅当我在 IIS 7 中部署网站时才会发生这种情况。当我在调试模式下测试代码时，登录/注销按钮似乎工作正常。

IIS 7 设置中是否需要更改某些内容，或者只是代码不正确？

任何帮助表示赞赏。

这是 AD 的 web.config 部分

```
<connectionStrings>
 <add name="ADService" connectionString="LDAP://Dcxxx.xxxx.local"/>
</connectionStrings>

<membership defaultProvider="AspNetActiveDirectoryMembershipProvider">
      <providers>
        <add name="AspNetActiveDirectoryMembershipProvider" type="System.Web.Security.ActiveDirectoryMembershipProvider,  System.Web, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a" attributeMapUsername="sAMAccountName" connectionStringName="ADService" enableSearchMethods="true"/>
      </providers> 
```

然后表单身份验证标准是

```
<authentication mode="Forms">
      <forms loginUrl="~/Account/Login.aspx" name=".ADAuthCookie" timeout="15" slidingExpiration="false" protection="All"/>
    </authentication>
    <authorization>
      <deny users="?" />
      <allow users="*" />
    </authorization> 
```

在 sitemaster.aspx.cs 我添加了以下代码以强制注销

```
protected void Unnamed2_LoggingOut(object sender, LoginCancelEventArgs e)
        {
            HttpContext.Current.Session.Clear();
            HttpContext.Current.Session.Abandon();
            ViewState.Clear();
            FormsAuthentication.SignOut();
            Response.Redirect("~/Account/Login.aspx"); 

        } 
```

# svn - 复制文件到svn

> ID：13729399
> 
> 赞同：1
> 
> 时间：2012-12-05T17:53:34.327
> 
> 标签：svn

我的桌面上有一个文件。我想把它复制到 Svn 系统上的目录中。我有个问题

*   如何将文件从桌面复制到 svn ？
*   如何将文件移动到 svn 上的目录中？

每当我使用 cp 时，它都会出错。“这不是一个可行的目录”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T18:22:36.337

> [svn 导入](http://svnbook.red-bean.com/en/1.7/svn.ref.svn.c.import.html)路径 URL

递归提交 PATH 的副本到 URL

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T17:59:14.903

SVN 使用**工作副本**和**存储库**。

您通过在**存储库**上执行创建一个**工作副本**，然后您可以将文件或目录添加到您的**工作副本**，最后您对**存储库**进行更改以使其持久化。`checkout`**`add`**`commit`****

 ******* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T18:01:00.663

一个文件可以存在于一个 SVN 存储库中而不是它的一部分。

为了将文件放入 SVN，您需要使用：

svn 添加文件名

或图形界面中的等效项。

您的终端给您的错误与 SVN 无关，这是因为您尝试将文件移动到的目录不是目录或不存在（可能拼写错误！？）。尝试在使用 CP 时使用制表键自动完成路径，或使用图形界面将文件移动到 SVN 存储库中。******

# ftp - 如何使用 SSIS 在 ftp 目录之间传输文件？

> ID：13729405
> 
> 赞同：1
> 
> 时间：2012-12-05T17:53:54.450
> 
> 标签：ftp, ssis

如何使用 SSIS 在 ftp 目录之间传输文件？

我知道我可以删除并重新上传文件，但有更简单的方法吗？

我想将完成的文件传输到“存档”文件夹。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T19:54:36.297

理论上的答案是您将使用命令 RNFR（重命名自）/RNTO（重命名为）的组合来重命名（移动）文件。在您的 FTP 会话中，您会发出类似的命令

```
ftp> rnfr /src/test/done.txt
ftp> rnto /src/test/Archive/done.txt 
```

我说理论上是因为我使用连接到 z/OS ftp 服务器的 Windows 命令行 FTP 客户端 (system32\ftp.exe) 进行的测试会导致客户端指示 RNFR/RNTO 是`Invalid command`

Windows 客户端*确实*实现了**重命名**方法，该方法在工作表下似乎发出 RNFR/RNTO。

一个简单的重命名看起来像

```
ftp> rename empty.txt e.txt
350 RNFR accepted. Please supply new name for RNTO.
250 /src/test/empty.txt renamed to /src/test/e.txt 
```

但是，我无法让它在目录下移动

```
ftp> rename empty.txt Archive
350 RNFR accepted. Please supply new name for RNTO.
550 RNTO fails: /src/test/Archive is a directory.

ftp> rename empty.txt Archive/
350 RNFR accepted. Please supply new name for RNTO.
550 RNTO fails: /src/test/Archive/ is a directory.

ftp> rename empty.txt Archive/emp.txt
350 RNFR accepted. Please supply new name for RNTO.
550 Renaming attempt failed. Rc was 111 
```

我不知道这是客户端实现还是服务器（或两者）的失败。或者，它可能只是我的凭据的[权限集不足。](http://ktomiak.biz/ORG/STUFF/tips/UNIX008.html)

## 这如何适用于 SSIS？

无论您采取什么步骤在命令行中进行重命名，都将是您想要发出的同一组命令。如果您使用的是内置的`FTP Task`，您会看到没有可用的重命名。您可能还会发现它是工具箱中最麻烦的任务之一。相反，我强烈主张使用 Windows [FTP 客户端](http://support.microsoft.com/kb/96269)的命令文件或使用 .NET [FTP 库](http://msdn.microsoft.com/en-us/library/system.net.ftpwebrequest.aspx)

## 参考

*   FTP 上的 RFC 描述了应该分页的标准命令（第 31 页）[https://www.rfc-editor.org/rfc/rfc959](https://www.rfc-editor.org/rfc/rfc959)
*   常见 FTP 命令示例[http://www.hiteksoftware.com/help/English/FtpCommands.htm](http://www.hiteksoftware.com/help/English/FtpCommands.htm)
*   RNFR/RNTO 应该如何工作的示例[http://trac.filezilla-project.org/ticket/2218](http://trac.filezilla-project.org/ticket/2218)

# javascript - d3.js 工具提示中的链接不适用于 MobileSafari (iOS)

> ID：13729409
> 
> 赞同：1
> 
> 时间：2012-12-05T17:54:08.260
> 
> 标签：javascript, ios, mobile-safari, d3.js, treemap

我已经尝试了一切来获得在 MobileSafari 的 d3.js 工具提示中工作的简单链接。我正在使用树形图，我的代码如下所示：

```
if (iOS == true)  {
      html += "<div style='z-index:50;'><a href='" + data.TearsheetLink + "'>Go to tearsheet</a></div>"; 
        } 
```

这会导致链接仅在检测到 iOS 浏览器时出现（显然），但单击链接除了使工具提示消失之外什么也不做。我也尝试过使用 onclick。

这很奇怪，因为如果我在 MobileSafari 中按住链接，我可以选择“在新页面中打开”，它会起作用。但只需单击链接什么都不会。我也尝试过添加 target='_blank'，但这也不起作用。

谢谢你的帮助。

# jquery - jQuery最接近（）不抓取元素

> ID：13729412
> 
> 赞同：0
> 
> 时间：2012-12-05T17:54:16.697
> 
> 标签：jquery

好的 .closest() 函数没有正确或根本没有抓取元素，因此没有将类添加到 div 中。这里有什么问题？

HTML：

```
<div class="half control-group">
        <div class="form-status"></div>
        <?php
        echo form_label('Username', 'username');
        echo form_input(array('name' => 'username', 'maxlength' => 25, 'value' => set_value('username') ));
        ?>
    </div> 
```

查询：

```
success: function(label) {
    $(label).text('');
    $(label).closest('div[class="form-status"]').addClass('success');
    //label.text('OK!').addClass('valid').closest('.control-group').addClass('success');
} 
```

它使文本正确地变为空白，但它并没有改变最接近的表单状态 div 类......我什至尝试了最接近的（'.form-status'），但它仍然不会抓住它。我正在使用验证 jQuery 插件。当您开始输入时，它会在输入栏下方添加此 HTML：

```
<label for=​"name" generated=​"true" class=​"error valid" style>​​&lt;/label>​ 
```

对于任何寻找正确答案的人来说，这行得通：

```
label.closest('.control-group').find('div.form-status').addClass('success'); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T17:56:41.997

[最接近](http://api.jquery.com/closest/)的只上升 dom 树，它不选择兄弟姐妹。

你需要

```
$(label).prev('div.form-status').addClass('success'); 
```

或者

```
$('.half.control-group label').prev('div.form-status').addClass('success'); 
```

取决于您获得的标签变量是否是 jQuery 选择器。

请注意，正如我之前评论过的，jQuery 和 CSS 中的类都有一个直接选择器，所以你应该更`'div.form-status'`喜欢`'div[class="form-status"]'`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T19:26:45.677

问题已经解释了一半，你应该使用`$.prev()`因为`$.closest()`不看兄弟姐妹。

然而，问题的第二部分就在这里

```
// What type is label? Is it a string indicating what's in the 
// for="name"? Is it a jQuery object? a DOM object
success: function(label) {
    $(label).text('');
    $(label).closest('div[class="form-status"]').addClass('success');
    //label.text('OK!').addClass('valid').closest('.control-group').addClass('success');
} 
```

如果它被传递一个 jQuery 或 HTMLElement 对象，以下将工作[http://jsfiddle.net/Rdpu7/1/](http://jsfiddle.net/Rdpu7/1/)

```
success: function(label) {
    $(label).prev('div.form-status').addClass('success');
    $(label).text('OK!').addClass('valid').closest('.control-group').addClass('success');        
} 
```

如果它正在被传递`name`，则`form_label`可以使用以下[http://jsfiddle.net/Rdpu7/3/](http://jsfiddle.net/Rdpu7/3/)

```
success: function(label) {
    var label = $("label[for='"+label+"']");
    label.prev('div.form-status').addClass('success');
    label.text('OK!').addClass('valid').closest('.control-group').addClass('success');  
} 
```

如果是别的，你应该改进你的文档，我特别不能忍受没有记录参数的函数，我相信这是你困惑的原因。

关于为什么以下行有效

```
$('label').prev('div.form-status').addClass('success') 
```

这将完成您页面上的所有标签，这可能不是您想要的。它仅适用于带有单个标签的示例。您的主要问题是您不知道`label`成功函数中的对象类型

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T18:16:54.733

我已经测试过这个并且工作得很好：

```
$('label').text(''); 
$('label').prev('div[class="form-status"]').addClass('success');
// ---------^---------use this if you want to add class to just previous div at 
//--------------------same level 
```

如果您想将类添加到同一级别的所有 div，请使用此选项

```
$('label').siblings('div[class="form-status"]').addClass('success'); 
```

# c++ - Python-C++ 接口中的内存泄漏？

> ID：13729423
> 
> 赞同：4
> 
> 时间：2012-12-05T17:54:57.057
> 
> 标签：c++, python, memory-leaks

我有一段带有 python-C++ 接口的 C++ 代码，需要使用 python 列表作为其输入重复调用。我什至发现以下虚拟进程会导致内存泄漏：

在蟒蛇中：

```
a = [1.0]*1000
for c in range(1000):
    dummy(a, 1) 
```

在 C++ 中：

```
static PyObject* dummy(PyObject* self, PyObject* args) {
    Py_RETURN_NONE;
} 
```

我在这里错过了什么，所以它会引入内存泄漏吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T18:17:19.543

不，这很好，您传递给您的 c 方法的对象只是借用的，即您不必在返回之前减少对象的引用计数（事实上，这将是一个糟糕的错误）。

[例如，参见文档](http://docs.python.org/dev/c-api/arg.html)的这一部分：

> 请注意，提供给调用者的任何 Python 对象引用都是借用的引用；不要减少他们的引用计数！

您甚至如何确定您有内存泄漏？这很可能是你的问题。

# android - 如何从两个 mySQL 表结果中修改此数据提取

> ID：13729427
> 
> 赞同：1
> 
> 时间：2012-12-05T17:55:02.563
> 
> 标签：android, mysql

我之前问了一个关于从两个表中提取数据的问题，得到了一个完美的答案，我之前问了一个关于从两个表中提取数据的问题，得到了一个很好的答案，奥利琼斯完美地工作

这是我想通过添加 WHERE 从第一个表中获取某些数据的新情况，但现在它失败了，似乎它不应该

执行此功能时，此查询效果很好

```
table 1       table 2

product 1     product 4
product 2     product 2
product 3
product 4

SELECT ifnull( b.number >0, 0 ) purchased
FROM 1androidProducts a
LEFT JOIN (
   SELECT count( * ) number, product
   FROM 1androidSales 
   WHERE udid = '' 
   GROUP BY product
) b 
ON a.appTitle = b.product
ORDER BY a.appTitle
LIMIT 0 , 30 
```

产生这个结果

```
result 

0
1
0
1 
```

简而言之，表 1 中的每个项目都显示了这一点

如果 table-1-item 没有出现在表 2 中，则为 0 --OR-- 如果 table-1-item 确实出现在表 2 中，则为 1

现在当我添加这一行

```
SELECT ifnull( b.number >0, 0 ) purchased
FROM 1androidProducts a
WHERE a.accountID = 2        <<---------- I added this line 
LEFT JOIN (
   SELECT count( * ) number, product
   FROM 1androidSales 
   WHERE udid = ''
   AND accountID = 2          <<---------- I added this line
   GROUP BY product
) b 
ON a.appTitle = b.product
ORDER BY a.appTitle
LIMIT 0 , 30 
```

现在它给出了一个错误

# 1064 - 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 4 行的 'LEFT JOIN ( SELECT count( * ) number, product FROM 1androidSales ' 附近使用正确的语法

我只是想根据 accountID 获取表 1 的子集，以与第二个表进行比较。

所以如果我有这个

```
 table 1            table 2

accountid =1  product 1     accountid =2  product 4
accountid =1  product 2     accountid =2  product 2
accountid =1  product 3     accountid =2  product 5
accountid =1  product 4
accountid =2  product 1     
accountid =2  product 2
accountid =2  product 3
accountid =2  product 4
accountid =2  product 5 
```

会产生这个结果

```
result 

0
1
0
1
1 
```

所以结果记录总数与表一中满足 accountID 值 2 的记录数量相匹配

我认为这将是一个简单的改变，但它把我搞砸了

谢谢你的时间

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T18:19:29.823

我相信你的第一个 where 子句在错误的位置，把它放在 join 之后：

```
SELECT ifnull( b.number >0, 0 ) purchased
FROM 1androidProducts a
LEFT JOIN (
   SELECT count( * ) number, product
   FROM 1androidSales 
   WHERE udid = ''
   AND accountID = 2 
   GROUP BY product
) b 
ON a.appTitle = b.product
WHERE a.accountID = 2 --Moved the first where clause
ORDER BY a.appTitle
LIMIT 0 , 30 
```

# jquery - jQuery - 限制视频重播次数

> ID：13729428
> 
> 赞同：1
> 
> 时间：2012-12-05T17:55:08.993
> 
> 标签：jquery, html, video

我有一个视频（HTML5）所需的控件的工作示例。我想弄清楚的是如何让它可以重播一次，而不是更多。每次视频结束时，我现在拥有的代码都会带回重播按钮。我希望它出现在第一场比赛之后，而不是第二场。谢谢。

HTML：

```
<video id="erbVid" width="320" height="240" autoplay="autoplay">
<source src="Question_2_Video.mp4" type="video/mp4"></source>
</video> 
```

jQuery：

```
$(document).ready(function() {
    $("#replayButton").hide();    
    $("video").bind("ended", function() {
        $("#replayButton").show();
    });
    $("#replayButton").click(function() {
        $("video")[0].play();
        $("#replayButton").hide();
    });    
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T18:02:16.987

您可以只添加一个变量来检查视频是否已被重播并基于该变量执行某些操作，例如。

```
$(document).ready(function() {
    // Create your boolean variable showing the video has not yet been replayed
    var replayed = false;

    $("#replayButton").hide();

    $("video").bind("ended", function() {
        // Check if the video has been replayed
        if(!replayed){
            // If not, do something and set replayed to true
            $("#replayButton").show();
            replayed = true;
        }
    });
    $("#replayButton").click(function() {
        $("video")[0].play();
        $("#replayButton").hide();
    });    
}); 
```

重播视频后，重播按钮将不再显示。您还可以执行以下操作以允许多次重播：

```
var replayed = 0;
var replayed_max = 5;

$("video").bind("ended", function() {
    // Check if the video has been replayed the max number of times
    if(replayed < replayed_max){
        // If not, do something and add 1 to replayed
        $("#replayButton").show();
        replayed++;
    }
}); 
```

# perl - 在特定字节范围后插入逗号

> ID：13729429
> 
> 赞同：1
> 
> 时间：2012-12-05T17:55:12.017
> 
> 标签：perl, bash, csv, awk

我正在尝试将大量数据列表转换为 CSV。它基本上是一个没有空格的巨大列表，并且行由换行符分隔。我制作了一个 bash 脚本，该脚本基本上循环遍历文档，退出行，剪切字节范围，然后添加一个逗号并将其附加到行尾。它看起来像这样：

```
awk -v n=$x 'NR==n { print;exit}' PROP.txt | cut -c 1-12      | tr -d '\n' >> $x.tmp
awk -v n=$x 'NR==n { print;exit}' PROP.txt | cut -c 13-17     | tr -d '\n' | xargs -I {} sed -i '' -e 's~$~,{}~' $x.tmp
awk -v n=$x 'NR==n { print;exit}' PROP.txt | cut -c 18-22     | tr -d '\n' | xargs -I {} sed -i '' -e 's~$~,{}~' $x.tmp
awk -v n=$x 'NR==n { print;exit}' PROP.txt | cut -c 23-34     | tr -d '\n' | xargs -I {} sed -i '' -e 's~$~,{}~' $x.tmp 
```

问题是这非常慢，并且数据有大约 400k 行。我知道必须有更好的方法来实现这一点。基本上我只需要在一行的每个 12/17/22/34 等字符之后添加一个逗号。

任何帮助表示赞赏，谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T18:09:58.790

使用 Perl 有很多方法可以做到这一点。这是一种方法：

```
perl -pe 's/(.{12})(.{5})(.{5})(.{12})/$1,$2,$3,$4,/' < input-file > output-file 
```

替换中的匹配模式从每行的开头捕获四组文本，其中包含 12、5、5 和 12 个任意字符。替换模式在每个组之后放置一个逗号。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T19:07:03.743

使用 GNU awk，您可以编写

```
gawk 'BEGIN {FIELDWIDTHS="12 5 5 12"; OFS=","} {$1=$1; print}' 
```

`$1=$1`部分是强制 awk 重写之类的，合并输出字段分隔符，而不更改任何内容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T23:57:36.117

这是非常适合的工作[`substr`](http://perldoc.perl.org/functions/substr.html)。

```
use strict;
use warnings;

my @widths = (12, 5, 5, 12);
my $offset;

while (my $line = <DATA>) {
  for my $width (@widths) {
    $offset += $width;
    substr $line, $offset, 0, ',';
    ++$offset;
  }
  print $line;
}

__DATA__
1234567890123456789012345678901234567890 
```

**输出**

```
123456789012,34567,89012,345678901234,567890 
```

# forms - PowerShell v3 Invoke-WebRequest：表单问题

> ID：13729434
> 
> 赞同：15
> 
> 时间：2012-12-05T17:55:28.710
> 
> 标签：forms, powershell, web, webrequest

由于我升级到 Windows 8，很多依赖于启动不可见 IE 的 PowerShell 脚本将不再工作，所以我尝试切换到*Invoke-WebRequest*命令。我做了很多谷歌搜索，但仍然无法让我的脚本正常工作。

这是它应该做的：

1.  使用简单的表单（用户名、密码、提交按钮）加载网站，
2.  输入凭据
3.  并提交。

Microsoft tech-net的[示例](http://technet.microsoft.com/en-us/library/hh849901.aspx)对我来说不是很有帮助，这是我拼凑起来的：

```
$myUrl = "http://some.url"  

$response = Invoke-WebRequest -Uri $myUrl -Method Default -SessionVariable $rb
$form = $response.Forms[0]
$form.Fields["user"]     = "username"
$form.Fields["password"] = "password"

$response = Invoke-WebRequest -Uri $form.Action -WebSession $rb -Method POST 
$response.StatusDescriptionOK 
```

我收到两个错误，第一个是在尝试写入该`user`字段时：

```
Cannot index into a null array.

$form.Fields["user"]     = "username"

    + CategoryInfo          : InvalidOperation: (:) [], RuntimeException
    + FullyQualifiedErrorId : NullArray 
```

第二个与`$form.Action`我不知道应该读什么有关：

```
Invoke-WebRequest : Cannot validate argument on parameter 'Uri'. The argument is  null or empty. Supply an argument that is not null or empty and then try the command  again. 
```

同样，我严重依赖[Microsoft 的示例 #2](http://technet.microsoft.com/en-us/library/hh849901.aspx)。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-05T21:17:38.307

尝试直接发帖，例如：

```
$formFields = @{username='john doe';password='123'}
Invoke-WebRequest -Uri $myUrl -Method Post -Body $formFields -ContentType "application/x-www-form-urlencoded" 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-09-08T19:47:03.307

要解决未签名/不受信任证书的问题，请添加以下行

```
[System.Net.ServicePointManager]::ServerCertificateValidationCallback = {$true} 
```

在 Invoke-WebRequest 语句之前

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-06-09T15:00:50.453

问题中的示例有效，但您必须使用`rb`而不是`$rb`在第一行：

```
$response = Invoke-WebRequest -Uri $myUrl -Method Default -SessionVariable rb 
```

我也必须使用`($myUrl + '/login')`，因为这是我的登录地址。

$response = Invoke-WebRequest -Uri ($myUrl + '/login') - 方法默认值 -SessionVariable rb

在最后一行使用`($myUrl + $form.Action)`：

```
$response = Invoke-WebRequest -Uri ($myUrl + $form.Action) -WebSession $rb -Method POST 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-02-12T19:30:13.843

如果您是我，并且一直在对错误的 Web 请求进行故障排除，在我的情况下`-Body`，这是`null`在我的 API 中出现的问题，那么您将想知道关于将行延续与注释交错的问题。这个

```
$r = iwr -uri $url `
    -method 'POST' `
    -headers $headers `
    # -contenttype 'application/x-www-form-urlencoded' ` # default
    -Body $body 
```

注意注释掉的行`# -contenttype 'application/x-www-form-urlencoded' # default`

放置注释会截断剩余的反引号续行。因此，在我的情况下，我的 Web 请求以具有 0 字节有效负载的请求结束。

# php - FQL 位置发布 json 输出

> ID：13729438
> 
> 赞同：2
> 
> 时间：2012-12-05T17:55:39.193
> 
> 标签：php, arrays, json, facebook-fql

我有一个问题（我认为这是一个简单的问题，但我不知道如何）。我在 Facebook Query Languagr 中使用位置帖子，`print_r`输出是

`Array ( [data] => Array ( [0] => Array ( [id] => some id [message] => some message )`

`[1] => Array ( [id] => some id [message] => some message )`

问题是我怎样才能只输出 id 或只输出消息？

我试过了：

```
foreach($test as $test2) {
$test2['id'];
} 
```

和3个`foreach`循环，但它不起作用，我希望有人能帮助我。

谢谢！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T17:57:17.393

您可以使用以下 foreach 循环来获取您的所有 id 和消息

```
foreach($test['data'] as $data) {
    $id = $data['id'];
    $message = $data['message'];

} 
```

# xsd2code - XSD2Code，是否可以序列化从父抽象类继承的属性？

> ID：13729441
> 
> 赞同：1
> 
> 时间：2012-12-05T17:55:52.233
> 
> 标签：xsd2code

我有一个 XSD2Code 生成的类，一切正常。但是，我想在所有复杂类类型（即 Order、OrderItem 等）上生成 ID 并将其存储为 GUID，以促进对象层次结构中的 CRUD。因此，我没有向 XML 模式中的每个“记录”样式数据集添加一个 ID 元素，而是创建了一个父抽象类，我的 XSD2Code 类从中继承。我的代码可以看到 ID，它会生成 ID，但是 XSD2Code 似乎没有看到 ID，因此 ID 没有被序列化。

我的父类代码：

```
namespace OrderSystem
{
public abstract class Master
{
    private string IdField;

    [System.Xml.Serialization.XmlElementAttribute(Form = System.Xml.Schema.XmlSchemaForm.Unqualified, Order = 999)]
    public String ID
    {
        get 
        { 
            if (IdField == null)
            {
                IdField = Guid.NewGuid().ToString();
            }
            return IdField;
        } 
    }

  }
} 
```

我的 XSD 生成的代码使用了它：

```
public partial class Product : Master
{ 
```

我的直觉是 ID 没有被序列化，因为它不在生成的类中，即“产品”，这有点奇怪，因为其余代码可以看到它，因为它是继承的。

请问有什么想法吗？

编辑：

```
public class Master
{
    private string IdField;

    [System.Xml.Serialization.XmlAttributeAttribute()]
    public String ID
    {
        get 
        { 
            //if (IdField == null)
            //{
            //    IdField = Guid.NewGuid().ToString();
            //}
            return IdField;
        }
        set
        {
            if (value == null)
            {
                IdField = Guid.NewGuid().ToString();
            }
            else
            {
                IdField = value;
            }
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T18:37:36.887

这是我自己整理的。证明是代码错误。我还删除了“摘要”，不确定是否有必要。见上面的编辑。

# java - java-如何在查询 SQL Server 数据库时获取/使用当前日期+时间

> ID：13729444
> 
> 赞同：0
> 
> 时间：2012-12-05T17:56:06.060
> 
> 标签：java, sql, sql-server

我想将当前日期+时间存储到 SQL Server 中的表中。

另外，我还想查询表（其中存储了日期+时间），然后以格式 YYYYMMDDHHMMSS 的字符串值形式获取日期+时间。

我的程序是用 Java 编写的，我基本上使用的是 SQL Azure 数据库。

我四处寻找与我自己类似的其他问题——但在 SO 上最接近的匹配只处理日期+时间的一部分（不是日期和时间）

# javascript - 是否添加具有相等运算符的 javascript 事件侦听器，替换所有以前的事件侦听器

> ID：13729445
> 
> 赞同：1
> 
> 时间：2012-12-05T17:56:16.670
> 
> 标签：javascript, html, dom

我在 javascript 中有一个图像对象，我添加了 onload 监听器，如下所示。

```
img.onload=function1; 
```

在稍后的地方，我这样做：

```
img.onload=function2; 
```

现在 onload，函数 1 和函数 2 都会被调用，或者只是函数 2 会被调用。还请提及它是否依赖于浏览器？

# android - 从 FragmentActivity 中的对话框更新片段中的 ListView（使用 ViewPager）

> ID：13729451
> 
> 赞同：1
> 
> 时间：2012-12-05T17:56:24.900
> 
> 标签：android, android-listview, android-fragments, android-viewpager

我有一个`FragmentActivity`（主）创建 3`Fragments`和一个菜单。非常简单，来自 Android SDK 中的示例。

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    dbh = new DBHelper(this);

    // Create the adapter that will return a fragment for each of the
    // primary sections of the app.
    mSectionsPagerAdapter = new SectionsPagerAdapter(getSupportFragmentManager());

    // Set up the ViewPager with the sections adapter.
    mViewPager = (ViewPager) findViewById(R.id.pager);
    mViewPager.setAdapter(mSectionsPagerAdapter);
}

// code //

@Override
    public Fragment getItem(int position) {
        Fragment fragment = null;
        switch(position){
            case 0:
                fragment = new DaySectionFragment(Main.this, dbh);
                break;
            case 1:
                fragment = new WeekSectionFragment(Main.this, dbh);
                break;
            case 2:
                fragment = new FoodListSectionFragment(Main.this, dbh);
                break;
            case 3:
                fragment = new AboutSectionFragment();
                break;
        }

        return fragment;
    }
//more code 
```

从主要活动的菜单中，我有一个带有editText的对话框。假设该文本字段的值存储在数据库中，该数据库运行良好，并且还会在片段的列表视图中弹出（不是我的 ListFragment，而是其中包含列表视图的片段）。简单的方法是在 ListView 适配器上调用 notifyDataSetChanged()。但是我不能那样做。

这是带有 ListView 的片段：

```
public class FoodListSectionFragment extends Fragment {
private Context context;
private DBHelper dbh;
private ArrayList<FoodData> listItems = new ArrayList<FoodData>();
private FoodAdapter adapterFoodList;
private AdapterView.AdapterContextMenuInfo adapterInfo;
private ListView lvItems;

public FoodListSectionFragment() {
}
public FoodListSectionFragment(Context context, DBHelper dbh) {
    this.context = context;
    this.dbh = dbh;
    //setTag("FoodListFragment");
}
public void updateList(){
    adapterFoodList.notifyDataSetChanged();
}

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
    View myView = getLayoutInflater(null).inflate(R.layout.food_list, null);

    listItems.clear();
    listItems = (ArrayList<FoodData>) dbh.selectAllFood();

    adapterFoodList = new FoodAdapter(context, R.layout.list_row_food, listItems);

    lvItems = (ListView)myView.findViewById(R.id.listFood);
    lvItems.setAdapter(adapterFoodList);
    adapterFoodList.notifyDataSetChanged();

    return myView;
}
} 
```

这是我尝试更新 ListView 的地方，尽管这不起作用。

```
dialogAddFood = new Dialog(Main.this);
            dialogAddFood.setContentView(R.layout.dialog_add_food);
            dialogAddFood.setTitle(R.string.menu_add_food);
            dialogAddFood.setCancelable(true);

            Button btnSave = (Button) dialogAddFood.findViewById(R.id.btnSave);
            btnSave.setOnClickListener(new OnClickListener() {
                @Override
                public void onClick(View v) {
                    EditText edtFood = (EditText)dialogAddFood.findViewById(R.id.edtFood);
                    RatingBar ratingGrade = (RatingBar)dialogAddFood.findViewById(R.id.ratingGrade);
                    RatingBar ratingDiff = (RatingBar)dialogAddFood.findViewById(R.id.ratingDiff);

                    if(edtFood.getText().toString().length() > 0){
                        dbh.insertFood(edtFood.getText().toString(), (int)ratingGrade.getRating(), (int)ratingDiff.getRating());
                        Toast.makeText(Main.this, "Maträtt tillagd", Toast.LENGTH_LONG).show();

                        //FoodListSectionFragment f = (FoodListSectionFragment)Main.this.getSupportFragmentManager().findFragmentByTag("FoodList");
                        //f.updateList();

                        ListView l = (ListView)mSectionsPagerAdapter.getItem(2).getView().findViewById(R.id.listFood);
                        FoodAdapter a = (FoodAdapter)l.getAdapter();
                        a.notifyDataSetChanged();

                    }

                    dialogAddFood.cancel();
                }
            });
            Button btnCancel = (Button) dialogAddFood.findViewById(R.id.btnCancel);
            btnCancel.setOnClickListener(new OnClickListener() {
                @Override
                public void onClick(View v) {
                    dialogAddFood.cancel();
                }
            });
            dialogAddFood.show(); 
```

请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T18:31:32.977

您的代码不起作用，因为该行：

```
mSectionsPagerAdapter.getItem(2) 
```

不会`Fragment`从 2 返回 at 位置`ViewPager`，它会为该位置**创建**一个新的，并且在此实例上调用 update 方法显然不会进行任何更改，因为它没有附加到您的（不是可见的）。`Fragment``Fragment``Fragment``Activity`

尝试`Fragment`使用`FragmentManager`下面的方法查找它，看看它是如何进行的：

```
// ...
Toast.makeText(Main.this, "Maträtt tillagd", Toast.LENGTH_LONG).show();

//FoodListSectionFragment f = (FoodListSectionFragment)Main.this.getSupportFragmentManager().findFragmentByTag("FoodList");
//f.updateList();
FoodListSectionFragment fr = getSupportFragmentManager().findFragmentByTag("android:switcher:" + R.id.theIdOfTheViewPager + ":2");
if (fr != null && fr.getView() != null) {
    fr.updateList();
} 
```

# javascript - 使用 javascript 重音字符解析 xml

> ID：13729453
> 
> 赞同：0
> 
> 时间：2012-12-05T17:56:28.737
> 
> 标签：javascript, xml, parsing

在调用我无法控制的网络服务器后，我收到了这个所谓的 XML。

```
<?xml version="1.0"?>
<sfx_menu>
<ctx_obj_set>&lt;ctx_object_1&gt;&lt;perldata&gt;
&lt;hash&gt;
&lt;item key="@rft.auinit"&gt;
&lt;array&gt;
&lt;item key="48"&gt;R O&lt;/item&gt;
&lt;item key="55"&gt;W S&lt;/item&gt;
&lt;/array&gt;
&lt;/item&gt;
&lt;item key="rft.issn"&gt;0066-782X&lt;/item&gt;
&lt;item key="_stash"&gt;
&lt;hash&gt;
&lt;item key="@rft_id"&gt;
&lt;array&gt;
&lt;item key="0"&gt;info:pmid/22286365&lt;/item&gt;
&lt;/array&gt;
&lt;/item&gt;
&lt;/hash&gt;
&lt;/item&gt;
&lt;item key="rft.year"&gt;2011&lt;/item&gt;
&lt;item key="rft.eissn"&gt;1678-4170&lt;/item&gt;
&lt;item key="rft.place"&gt;São Paulo,&lt;/item&gt;
&lt;item key="@sfx.subcategory"&gt;
&lt;array&gt;
&lt;item key="0"&gt;Clinical Medicine&lt;/item&gt;
&lt;item key="1"&gt;General and Others&lt;/item&gt;
&lt;/array&gt;
&lt;/item&gt;
&lt;item key="@rft.auinitm"&gt;
&lt;array&gt;
&lt;item key="0"&gt;C&lt;/item&gt;
&lt;item key="55"&gt;S&lt;/item&gt;
&lt;/array&gt;
&lt;/item&gt;
&lt;item key="svc.fulltext"&gt;yes&lt;/item&gt;
&lt;item key="@rft_id"&gt;
&lt;array&gt;
&lt;item key="0"&gt;info:pmid/22286365&lt;/item&gt;
&lt;/array&gt;
&lt;/item&gt;
&lt;item key="rft.atitle"&gt;[In Process Citation].&lt;/item&gt;
&lt;item key="sfx.response_type"&gt;simplexml&lt;/item&gt;
&lt;item key="sfx.ignore_char_set"&gt;1&lt;/item&gt;
&lt;item key="req.session_id"&gt;s96D99C8A-3E41-11E2-9D07-B659D85E6AE8&lt;/item&gt;
&lt;item key="ctx_enc"&gt;UTF-8&lt;/item&gt;
&lt;item key="rft.object_type"&gt;JOURNAL&lt;/item&gt;
&lt;item key="rft.issue_start"&gt;5&lt;/item&gt;
&lt;item key="rft.language"&gt;eng&lt;/item&gt;
&lt;item key="sfx.has_full_text"&gt;yes&lt;/item&gt;
&lt;item key="rft.object_id"&gt;954927591345&lt;/item&gt;
&lt;item key="rft.volume_start"&gt;97&lt;/item&gt;
&lt;item key="rft.volume"&gt;97&lt;/item&gt;
&lt;item key="sfx.request_id"&gt;21652172&lt;/item&gt;
&lt;item key="rft.genre"&gt;article&lt;/item&gt;
&lt;item key="rft.pub"&gt;Sociedade Brasileira de Cardiologia.&lt;/item&gt;
&lt;item key="rft.issue"&gt;5 Suppl 1&lt;/item&gt;
&lt;item key="sfx.openurl"&gt;http://sfxhosted.exlibrisgroup.com/epo?    rft.genre=article%2Cchapter%2Cbookitem&amp;amp;svc.fulltext=yes&amp;amp;sfx.response_type=simplexml&amp;amp;id=pmid%3A22286365&lt;/item&gt;
&lt;item key="rft.issue_alphastart"&gt; Suppl 1&lt;/item&gt;
&lt;item key="rft.title"&gt;Arquivos brasileiros de cardiologia&lt;/item&gt;
&lt;item key="@rft.stitle"&gt;
&lt;array&gt;
&lt;item key="0"&gt;ARQ BRAS CARDIOL&lt;/item&gt;
&lt;/array&gt;
&lt;/item&gt;
&lt;item key="@rfe_id"&gt;
&lt;array&gt;
&lt;/array&gt;
&lt;/item&gt;
&lt;item key="@rft.aufirst"&gt;
&lt;array&gt;
&lt;item key="0"&gt;Antonio&lt;/item&gt;
&lt;item key="1"&gt;Antonio S�rgio de Santis Andrade&lt;/item&gt;
&lt;item key="2"&gt;Jo�o Ricardo Cordeiro&lt;/item&gt;
&lt;item key="3"&gt;Lucas Jos� Tachotti&lt;/item&gt;
&lt;item key="4"&gt;Ricardo Casalino Sanches&lt;/item&gt;
&lt;item key="5"&gt;Tarso Augusto Duenhas&lt;/item&gt;
&lt;item key="6"&gt;Alexandre&lt;/item&gt;
&lt;item key="7"&gt;Alberto&lt;/item&gt;
&lt;item key="8"&gt;Alfredo&lt;/item&gt;
&lt;item key="9"&gt;Auristela Isabel de Oliveira&lt;/item&gt;
&lt;item key="10"&gt;Bertha&lt;/item&gt;
&lt;item key="11"&gt;Camilo&lt;/item&gt;
&lt;item key="12"&gt;Carlos R Mart�nez&lt;/item&gt;
&lt;item key="13"&gt;Cesar&lt;/item&gt;
&lt;item key="14"&gt;Clara&lt;/item&gt;
&lt;item key="15"&gt;Daniel&lt;/item&gt;
&lt;item key="16"&gt;Dany&lt;/item&gt;
&lt;item key="17"&gt;Eduardo&lt;/item&gt;
&lt;item key="18"&gt;Evandro&lt;/item&gt;
&lt;item key="19"&gt;Fabio S�ndoli&lt;/item&gt;
&lt;item key="20"&gt;Fernando&lt;/item&gt;
&lt;item key="21"&gt;Fernando&lt;/item&gt;
&lt;item key="22"&gt;Fernando&lt;/item&gt;
&lt;item key="23"&gt;Fernando&lt;/item&gt;
&lt;item key="24"&gt;Flvio&lt;/item&gt;
&lt;item key="25"&gt;Francisco Diniz Affonso&lt;/item&gt;
&lt;item key="26"&gt;Gilberto&lt;/item&gt;
&lt;item key="27"&gt;Guilherme&lt;/item&gt;
&lt;item key="28"&gt;Henrique&lt;/item&gt;
&lt;item key="29"&gt;Humberto&lt;/item&gt;
&lt;item key="30"&gt;Jos&lt;/item&gt;
&lt;item key="31"&gt;Jos� Carlos Raimundo&lt;/item&gt;
&lt;item key="32"&gt;Jos� Roberto Maldonado&lt;/item&gt;
&lt;item key="33"&gt;Juan&lt;/item&gt;
&lt;item key="34"&gt;Juan&lt;/item&gt;
&lt;item key="35"&gt;Juan&lt;/item&gt;
&lt;item key="36"&gt;L�dia Ana Zytynski&lt;/item&gt;
&lt;item key="37"&gt;Luiz Antonio Ferreira&lt;/item&gt;
&lt;item key="38"&gt;Luiz&lt;/item&gt;
&lt;item key="39"&gt;Marcelo&lt;/item&gt;
&lt;item key="40"&gt;Marcelo Luiz Campos&lt;/item&gt;
&lt;item key="41"&gt;Marcelo&lt;/item&gt;
&lt;item key="42"&gt;Mauricio de Rezende&lt;/item&gt;
&lt;item key="43"&gt;Max&lt;/item&gt;
&lt;item key="44"&gt;Omar&lt;/item&gt;
&lt;item key="45"&gt;Pablo Maria A&lt;/item&gt;
&lt;item key="46"&gt;Paulo de Lara&lt;/item&gt;
&lt;item key="47"&gt;Rog�rio Eduardo Gomes Sarmento&lt;/item&gt;
&lt;item key="48"&gt;Roney&lt;/item&gt;
&lt;item key="49"&gt;Srgio&lt;/item&gt;
&lt;item key="50"&gt;Silvia&lt;/item&gt;
&lt;item key="51"&gt;Solange&lt;/item&gt;
&lt;item key="52"&gt;Tirone&lt;/item&gt;
&lt;item key="53"&gt;Vctor&lt;/item&gt;
&lt;item key="54"&gt;Victor&lt;/item&gt;
&lt;item key="55"&gt;Walkiria&lt;/item&gt;
&lt;/array&gt;
&lt;/item&gt;
&lt;item key="@rft.aulast"&gt;
&lt;array&gt;
&lt;item key="0"&gt;Bacelar&lt;/item&gt;
&lt;item key="27"&gt;Spina&lt;/item&gt;
&lt;item key="28"&gt;Murad&lt;/item&gt;
&lt;item key="29"&gt;Hernández&lt;/item&gt;
&lt;item key="30"&gt;Mangione&lt;/item&gt;
&lt;item key="31"&gt;Brito&lt;/item&gt;
&lt;item key="32"&gt;Murillo&lt;/item&gt;
&lt;item key="33"&gt;Plana&lt;/item&gt;
&lt;item key="34"&gt;Paganini&lt;/item&gt;
&lt;item key="35"&gt;Krauss&lt;/item&gt;
&lt;item key="36"&gt;Moura&lt;/item&gt;
&lt;item key="37"&gt;Carvalho&lt;/item&gt;
&lt;item key="38"&gt;Cardoso&lt;/item&gt;
&lt;item key="39"&gt;Katz&lt;/item&gt;
&lt;item key="40"&gt;Vieira&lt;/item&gt;
&lt;item key="41"&gt;Montera&lt;/item&gt;
&lt;item key="42"&gt;Barbosa&lt;/item&gt;
&lt;item key="43"&gt;Grinberg&lt;/item&gt;
&lt;item key="44"&gt;Villagrán&lt;/item&gt;
&lt;item key="45"&gt;Pomerantzeff&lt;/item&gt;
&lt;item key="46"&gt;Lavitola&lt;/item&gt;
&lt;item key="47"&gt;Leite&lt;/item&gt;
&lt;item key="48"&gt;Sampaio&lt;/item&gt;
&lt;item key="49"&gt;Franco&lt;/item&gt;
&lt;item key="50"&gt;Martins&lt;/item&gt;
&lt;item key="51"&gt;Bordignon&lt;/item&gt;
&lt;item key="52"&gt;David&lt;/item&gt;
&lt;item key="53"&gt;Duré&lt;/item&gt;
&lt;item key="54"&gt;Rossei&lt;/item&gt;
&lt;item key="55"&gt;Ávila&lt;/item&gt;
&lt;/array&gt;
&lt;/item&gt;
&lt;item key="sfx.sourcename"&gt;PUBMED&lt;/item&gt;
&lt;item key="rft.jtitle"&gt;Arquivos brasileiros de cardiologia&lt;/item&gt;
&lt;item key="rft.coden"&gt;ABCAAJ&lt;/item&gt;
&lt;item key="existing_ts_ids"&gt;
&lt;array&gt;
&lt;item key="0"&gt;110976638852341&lt;/item&gt;
&lt;/array&gt;
&lt;/item&gt;
&lt;item key="sfx.sid"&gt;pmid&lt;/item&gt;
&lt;item key="@rft.au"&gt;
&lt;array&gt;
&lt;item key="0"&gt;Bacelar, Antonio Carlos&lt;/item&gt;
&lt;item key="1"&gt;Lopes, Antonio S�rgio de Santis Andrade&lt;/item&gt;
&lt;item key="2"&gt;Fernandes, Jo�o Ricardo Cordeiro&lt;/item&gt;
&lt;item key="3"&gt;Pires, Lucas Jos� Tachotti&lt;/item&gt;
&lt;item key="4"&gt;de Moraes, Ricardo Casalino Sanches&lt;/item&gt;
&lt;item key="5"&gt;Accorsi, Tarso Augusto Duenhas&lt;/item&gt;
&lt;item key="10"&gt;Boer, Bertha Napchan&lt;/item&gt;
&lt;item key="11"&gt;Abdulmassih Neto, Camilo&lt;/item&gt;
&lt;item key="12"&gt;Sánchez, Carlos R Mart�nez&lt;/item&gt;
&lt;item key="13"&gt;Esteves, Cesar Augusto&lt;/item&gt;
&lt;item key="14"&gt;Weksler, Clara&lt;/item&gt;
&lt;item key="15"&gt;Piñeiro, Daniel J&lt;/item&gt;
&lt;item key="16"&gt;Kruczan, Dany David&lt;/item&gt;
&lt;item key="17"&gt;Rossi, Eduardo Giusti&lt;/item&gt;
&lt;item key="18"&gt;Mesquita, Evandro Tinoco&lt;/item&gt;
&lt;item key="19"&gt;de Brito Junior, Fabio S�ndoli&lt;/item&gt;
&lt;item key="20"&gt;Bacal, Fernando&lt;/item&gt;
&lt;item key="21"&gt;Bosh, Fernando&lt;/item&gt;
&lt;item key="29"&gt;Hernández, Humberto Martnez&lt;/item&gt;
&lt;item key="30"&gt;Mangione, Jos Armando&lt;/item&gt;
&lt;item key="31"&gt;Brito, Jos� Carlos Raimundo&lt;/item&gt;
&lt;item key="32"&gt;Murillo, Jos� Roberto Maldonado&lt;/item&gt;
&lt;item key="33"&gt;Plana, Juan Carlos&lt;/item&gt;
&lt;item key="34"&gt;Paganini, Juan Jos&lt;/item&gt;
&lt;item key="35"&gt;Krauss, Juan&lt;/item&gt;
&lt;item key="36"&gt;Moura, L�dia Ana Zytynski&lt;/item&gt;
&lt;item key="37"&gt;Carvalho, Luiz Antonio Ferreira&lt;/item&gt;
&lt;item key="38"&gt;Cardoso, Luiz Francisco&lt;/item&gt;
&lt;item key="39"&gt;Katz, Marcelo&lt;/item&gt;
&lt;item key="40"&gt;Vieira, Marcelo Luiz Campos&lt;/item&gt;
&lt;item key="41"&gt;Montera, Marcelo Westerlund&lt;/item&gt;
&lt;item key="42"&gt;Barbosa, Mauricio de Rezende&lt;/item&gt;
&lt;item key="43"&gt;Grinberg, Max&lt;/item&gt;
&lt;item key="44"&gt;Villagrán, Omar Alonzo&lt;/item&gt;
&lt;item key="45"&gt;Pomerantzeff, Pablo Maria A&lt;/item&gt;
&lt;item key="46"&gt;Lavitola, Paulo de Lara&lt;/item&gt;
&lt;item key="47"&gt;Leite, Rog�rio Eduardo Gomes Sarmento&lt;/item&gt;
&lt;item key="48"&gt;Sampaio, Roney Orismar&lt;/item&gt;
&lt;item key="49"&gt;Franco, Srgio&lt;/item&gt;
&lt;item key="50"&gt;Martins, Silvia Marinho&lt;/item&gt;
&lt;item key="51"&gt;Bordignon, Solange&lt;/item&gt;
&lt;item key="52"&gt;David, Tirone E&lt;/item&gt;
&lt;item key="53"&gt;Duré, Vctor Rojas&lt;/item&gt;
&lt;item key="54"&gt;Rossei, Victor&lt;/item&gt;
&lt;item key="55"&gt;Ávila, Walkiria Samuel&lt;/item&gt;
&lt;/array&gt;
&lt;/item&gt;
&lt;item key="@sfx.category"&gt;
&lt;array&gt;
&lt;item key="0"&gt;Health Sciences&lt;/item&gt;
&lt;item key="1"&gt;Health Sciences&lt;/item&gt;
&lt;/array&gt;
&lt;/item&gt;
&lt;item key="rft.epage"&gt;67&lt;/item&gt;
&lt;item key="fetchid"&gt;/entrez/eutils/efetch.fcgi?db=PubMed&amp;amp;id=22286365&amp;amp;retmode=xml&lt;/item&gt;
&lt;item key="rft.spage"&gt;1&lt;/item&gt;
&lt;item key="@rft.auinit1"&gt;
&lt;array&gt;
&lt;item key="0"&gt;A&lt;/item&gt;
&lt;item key="51"&gt;S&lt;/item&gt;
&lt;item key="52"&gt;T&lt;/item&gt;
&lt;item key="55"&gt;W&lt;/item&gt;
&lt;/array&gt;
&lt;/item&gt;
&lt;item key="@svc.constraints"&gt;
&lt;array&gt;
&lt;item key="0"&gt;getFullTxt&lt;/item&gt;
&lt;/array&gt;
&lt;/item&gt;
&lt;item key="rft.pmid"&gt;22286365&lt;/item&gt;
&lt;/hash&gt;
&lt;/perldata&gt;
&lt;/ctx_object_1&gt;</ctx_obj_set>
<targets>
<target>
<target_name>MISCELLANEOUS_FREE_EJOURNALS</target_name>
<target_public_name>Free E- Journals</target_public_name>
<target_service_id>110976638852341</target_service_id>
<service_type>getFullTxt</service_type>
<parser>Bulk::BULK</parser>
<parse_param>jkey=http://www.arquivosonline.com.br/</parse_param>
<proxy>no</proxy>
<crossref>no</crossref>
<note></note>
<authentication></authentication>
<char_set>iso-8859-1</char_set>
<displayer>FT::NO_FILL_IN</displayer>
<target_url>http://www.arquivosonline.com.br/</target_url>
</target>
</targets>
</sfx_menu> 
```

在某些地方，强调的字符变得无法解析。我知道使用 java SAX 解析器可以解析它。我只需要帮助就可以在 javascript 中进行操作。

有任何想法吗？

提前谢谢你=）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T18:09:41.833

尝试这个，

```
var parser = new DOMParser();
var doc = parser.parseFromString(xmlString, "application/xml");
var ctx_obj_set = doc.getElementsByTagName('ctx_obj_set')[0];

var subdoc = parser.parseFromString(ctx_obj_set.firstChild.nodeValue,"application/xml"); 
```

它以字符串的形式读取 的内容`<ctx_obj_set>`并将其解析为另一个子 XML 文档

JSFiddle在这里：http: [//jsfiddle.net/TKa9R/](http://jsfiddle.net/TKa9R/)（看控制台F12）

# jquery - jquery确定浏览器中是否可以使用css缩放

> ID：13729454
> 
> 赞同：0
> 
> 时间：2012-12-05T17:56:30.460
> 
> 标签：jquery, zooming, modernizr, fallback

```
$(button).click(function(){
    if (Modernizr.zoom()) $('body').animate({ zoom: '200%'; }, 1000);
    else $('body').alternative();
}); 
```

正如你在上面看到的......我想在点击时放大我的页面。

顺便说一句：使用'zoom'（css）好吗？我不确定，因为我没有找到“缩放”（css）的任何好的描述。还是使用“缩放”（css）制作动画更好？

主要问题：有什么方法可以检测浏览器是否支持这个 css-'zoom'（或其他）功能？我正在使用 Modernizr，但在 Modernizr 中，无法检测“缩放”是否可用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-07-02T18:28:11.403

如果有人需要...

我用[modernzr](http://modernizr.com/)看浏览器是否支持zoom属性

```
 if (Modernizr.testProp('zoom') === true) {
    someStuff()
  } 
```

但为什么不使用`transform`？因为在这个特定的项目中，我需要缩放所有网站，制作类似于浏览器原生缩放的东西，并且当你`transform`在网站上使用 chrome 时会模糊所有字体，但你可以使用`zoom`它，它做得很好。

但是 Firefox 无法识别缩放属性，所以如果缩放可用，我使用缩放，如果不是，我使用`transform`缩放。

```
if (Modernizr.testProp('zoom') === true) {
  zoomWithCSS()
}
else {  
 zoomWithTransformScale()
} 
```

[codepen 上的工作示例](http://codepen.io/eduruiz/pen/rVJvvB)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T17:37:45.083

好的。我发现，使用 css zoom-property 并不好，因为它只适用于 IE 和一些较新版本的“真实”浏览器。如果我有一个带有百分比值的布局，它不会缩放，除非我也改变了宽度或高度的值，这不是很好。

但它确实适用于 css3 scale-property！因此我找到了`Modernizr.csstransforms()`特征检测（用于js）！

就是这样了！

# wpf - 在全屏 WPF 上隐藏任务栏

> ID：13729461
> 
> 赞同：4
> 
> 时间：2012-12-05T17:56:45.260
> 
> 标签：wpf, window, hide, taskbar, maximize

最近我试图让任务栏在最大化模式下不可见，但不幸的是没有任何效果。
我对 MSDN 和堆栈溢出进行了一些研究，其中大多数人说让窗口边框等于无并最大化窗口。但它没有用。
顺便说一句：我正在使用 Metro-window，它本身具有隐藏任务栏功能。但它也没有工作。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-05-28T19:17:26.363

我在 Windows 8.1 上的经验是设置`WindowStyle="None" WindowState="Maximized"`（正如大多数人所说）是不够的。

要隐藏任务栏，我必须设置`ResizeMode="NoResize"`

# javascript - 是否可以选择告诉爬虫/机器人：“不要使用 javascript”？

> ID：13729466
> 
> 赞同：1
> 
> 时间：2012-12-05T17:57:16.270
> 
> 标签：javascript, seo, bots

我正在搜索这个主题但没有任何结果，所以我考虑提出一个问题。我知道有一个选项可以使用 www.example.com/#!somecontent 使 AJAX 加载的页面“可抓取”。但是是否有一个选项（即 Meta 标记或 robots.txt 变量）说：“嘿，机器人，禁用 javascipt！”？

它可以在示例中使用：

1) 在线 javascript 游戏，其中包含大量 javascript，对于 SEO 和机器人抓取没什么特别的（机器人内存和节省时间）

2) 使用 PHP、HTML、CSS（元标记更改等）为机器人构建站点。然后使用 AJAX 添加一些额外的功能（例如仅重新加载内容，但不更改元标记），爬虫和机器人不需要分析。在这种情况下，机器人会看到元标记和内容，并且您会阻止锚点的默认操作，并且用户只能通过 AJAX 重新加载内容，在这种情况下，元标记是标准的。

PS）问题不在于：您可以做得更好，或者您可以以其他方式重建应用程序。它是关于：我们可以建议机器人禁用 javascript。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-08T04:52:30.963

快速回答是**否定的，你不能**。

长答案是，如果您有多个版本的内容，请在一个使用 javascript 的链接中使用**[规范链接元素](http://en.wikipedia.org/wiki/Canonical_link_element)**，该链接指向未启用 javascript 的页面。您可以将一个参数附加到 url，例如`no_js=1`并通过服务器端删除使用 Javascript 的 HTML 的所有部分。

所以，是的，通过一些工作你可以做到。

# c# - 媒体引擎错误，在本地机器上听不到声音

> ID：13729468
> 
> 赞同：2
> 
> 时间：2012-12-05T17:57:16.837
> 
> 标签：c#, xaml, windows-8, windows-store-apps

当我尝试在本地机器上播放带有媒体元素的声音时，我听不到任何声音。但是当我在那里测试时，我可以在模拟器和我的表面上听到声音（几乎是一样的东西？）。它也不适用于我的所有页面，而不仅仅是本地机器上的一个。

load 事件在模拟器中消失，但在本地机器中没有。流也不为空。

```
StorageFile file = await StorageFile.GetFileFromApplicationUriAsync(new Uri("ms-appx:///Assets/Sound/" +selectedCharacterSets[currentCharacterSet].character[currentCharacter].romaji + ".mp3", UriKind.Absolute));
var stream = await file.OpenAsync(FileAccessMode.Read);
mdeSound.SetSource(stream, file.ContentType); 
```

媒体失败事件正在发生。`Error: MF_MEDIA_ENGINE_ERR_SRC_NOT_SUPPORTED : HRESULT 0x8000FFFF`. 有谁知道如何解决这个问题以及为什么它只在本地机器上？

编辑：将 mp3 转换为 wma ......仍然无法加载。将它转换为 wmv 现在它可以在本地机器上播放......为什么？我仍然很困惑。在音乐应用程序中打开 mp3 也会引发错误，Windows 媒体播放器可以正常播放。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T19:22:16.327

您尝试播放的文件存在问题。这可能是因为 DRM 或比特率太高，等等。Windows 8 Pro 可以播放比 Windows 8 RT 更多的编解码器，但你说它在你的 Surface 上工作，这很有趣。尝试使用 Audacity 或其他程序将其保存为较低比特率的 MP3 甚至是基本的 .WAV 文件。

有趣的是，您不能将其播放为 WMA，但您可以将其播放为 WMV。WMV 是视频，而 WMA 是音频。您的机器上可能有损坏的媒体堆栈。

PS 模拟器本质上使用远程桌面，因此音频的播放方式有所不同*。*

# ruby - Ruby 的打包和解包说明

> ID：13729475
> 
> 赞同：12
> 
> 时间：2012-12-05T17:57:50.520
> 
> 标签：ruby, pack

即使在阅读了标准文档之后，我仍然无法理解 Ruby 的具体[`Array#pack`](http://ruby-doc.org/core-2.2.2/Array.html#method-i-pack)工作[`String#unpack`](http://ruby-doc.org/core-2.2.2/String.html#method-i-unpack)原理。这是给我带来最大麻烦的示例：

```
irb(main):001:0> chars = ["61","62","63"]
=> ["61", "62", "63"]
irb(main):002:0> chars.pack("H*")
=> "a"
irb(main):003:0> chars.pack("HHH")
=> "```" 
```

我希望这两个操作都返回相同的输出：“abc”。他们每个人都以不同的方式“失败”（并不是真正的失败，因为我可能期待错误的事情）。所以两个问题：

1.  这些输出背后的逻辑是什么？
2.  怎样才能达到我想要的效果，即将一串十六进制数转换成对应的字符串。更好的是 - 给定一个整数 n，如何将其转换为与文本文件相同的字符串，当被视为数字时（例如，在十六进制编辑器中）等于 n？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-05T18:41:42.247

今天早上我们正在研究一个类似的问题。如果数组大小未知，可以使用：

```
ary = ["61", "62", "63"]
ary.pack('H2' * ary.size)
=> "abc" 
```

您可以使用以下方法反转它：

```
str = "abc"
str.unpack('H2' * str.size)
=> ["61", "62", "63"] 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2015-01-29T14:16:45.077

`'H'`String 指令`Array#pack`表示数组内容应该被解释为十六进制字符串的半字节。

在您提供的第一个示例中：

```
irb(main):002:0> chars.pack("H*")
=> "a" 
```

您要打包数组的第一个元素，就好像它是十六进制字符串的半字节（半字节）序列：`0x61`在这种情况下，它对应于`'a'`ASCII 字符。

在第二个例子中：

```
irb(main):003:0> chars.pack("HHH")
=> "```" 
```

您要打包数组的 3 个元素，就好像它们是半字节一样（本例中的高部分）：`0x60`对应于`'`'`ASCII 字符。`0x01`由于缺少“aTemplateString”的“2”或“*”修饰符，低位或第二个半字节 ( ) “丢失”。

你需要的是：

```
chars.pack('H*' * chars.size) 
```

为了打包数组中所有元素的所有半字节，就好像它们是十六进制字符串一样。

`'H2' * char.size`仅当数组元素仅表示 1 个字节的十六进制字符串时，这种情况才能正常工作。

这意味着类似`chars = ["6161", "6262", "6363"]`的东西将是不完整的：

```
2.1.5 :047 > chars = ["6161", "6262", "6363"]
 => ["6161", "6262", "6363"] 
2.1.5 :048 > chars.pack('H2' * chars.size)
 => "abc" 
```

尽管：

```
2.1.5 :049 > chars.pack('H*' * chars.size)
 => "aabbcc" 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-12-05T18:11:22.067

该`Array#pack`方法非常神秘。解决问题（2），我可以通过这样做让你的例子起作用：

```
> ["61", "62", "63"].pack("H2H2H2")
=> "abc" 
```

有关类似示例，请参阅[Ruby 文档。](http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-pack)这是一种更通用的方法：

```
["61", "62", "63"].map {|s| [s].pack("H2") }.join 
```

这可能不是解决问题的最有效方法；我怀疑有更好的方法，但它有助于了解您开始使用哪种输入。

该`#pack`方法在其他语言中很常见，例如 Perl。如果 Ruby 的文档没有帮助，您可以在别处查阅类似的文档。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-10-01T09:00:55.860

> *我希望这两个操作都返回相同的输出：“abc”。*

了解您的方法为何不起作用的最简单方法是简单地从您的期望开始：

```
"abc".unpack("H*")
# => ["616263"]

["616263"].pack("H*")
# => "abc" 
```

因此，Ruby 似乎希望您的十六进制字节在一个长字符串中，而不是数组的单独元素。所以对你原来的问题最简单的答案是：

```
chars = ["61", "62", "63"]
[chars.join].pack("H*")
# => "abc" 
```

对于大输入，这种方法似乎也表现得相当好：

```
require 'benchmark'

chars = ["61", "62", "63"] * 100000

Benchmark.bmbm do |bm|
  bm.report("join pack") do [chars.join].pack("H*") end
  bm.report("big pack") do chars.pack("H2" * chars.size) end
  bm.report("map pack") do chars.map{ |s| [s].pack("H2") }.join end
end

#                 user     system      total        real
# join pack   0.030000   0.000000   0.030000 (  0.025558)
# big pack    0.030000   0.000000   0.030000 (  0.027773)
# map pack    0.230000   0.010000   0.240000 (  0.241117) 
```

# objective-c - 每个国家/语言的 Localizable.strings

> ID：13729477
> 
> 赞同：0
> 
> 时间：2012-12-05T17:58:06.817
> 
> 标签：objective-c

我使用 localizable.strings 文件设置了一个测试应用程序。在项目设置中，我添加了 English-United Kingdom、french 和 french-france

“法语”字符串文件在应用程序中工作。当我选择语言“法国”时，我看到了本地化版本

但是，当我将语言设置为英语并将区域形式设置为“英国”时，我希望看到来自 en-GB 字符串文件的字符串。我看的是英文版。我显然在这里遗漏了一些东西。当我使用“法语 - 法国”时也是如此。我希望它使用字符串文件的 fr-FR 版本。

我有法国 - 法国，法国 - 瑞士等。我如何实施这些？

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-19T06:49:50.573

我通过明确设置从中获取字符串的本地化目录（我的问题链接和下面的文本）解决了一个问题。

[未从 BASE 文件中检索 iOS Localizable.strings](https://stackoverflow.com/questions/25680874/ios-localizable-strings-not-being-retrieved-from-base-file/25927392#25927392)

```
NSString *path = [[NSBundle mainBundle] pathForResource:[[NSLocale preferredLanguages] objectAtIndex:0] ofType:@"lproj"];
if (path == nil)
{
    path = [[NSBundle mainBundle] pathForResource:@"Base" ofType:@"lproj"];
}

NSLocalizedStringFromTableInBundle(@"TAB_TITLE_Camera", @"Localizable", [NSBundle bundleWithPath:path], @""); 
```

如果您有要从中检索字符串的特定本地化目录，则可以替换

```
pathForResource: 
```

使用**en-GB**、**fr-FR**或您需要的任何其他目录名称。

我相信它应该或者至少应该选择正确的本地化目录，但它似乎没有这样做，这就是我想出这个解决方案的原因。

# eclipse - 将 cmake 与 eclipse 集成时缺少源和包含文件夹

> ID：13729478
> 
> 赞同：0
> 
> 时间：2012-12-05T17:58:17.513
> 
> 标签：eclipse, cmake

我是 CMake 的新手，我正在尝试将 CMake 与 Eclipse 集成。

下面是我拥有的文件结构的示例。

项目

*   构建/Linux
*   build/linux/Release（应该包含发布库和文件）
*   build/linux/Debug（应该包含文件的调试版本）

*   SRC

    1.  subProject_1
        .cpp（所有源文件）和 CMakeLists.txt 1 用于此文件夹（创建静态库）
    2.  subproject_2
        .cpp（所有源文件）和 CMakeLists.txt 2 用于此文件夹（创建静态库）
    3.  subproject_3
        .cpp（所有源文件）和 CMakeLists.txt 3 用于此文件夹（创建可执行文件）
*   包括

    1.  subProject_1
        .h（所有头文件）
    2.  subProject_2
        .h（所有头文件）
    3.  subProject_3
        .h（所有头文件）

您能否让我知道如何将 CMake 集成到 Eclipse。我想做一个源代码构建，以便我可以对我的代码进行子版本。

我尝试了将主 CMakelist 放置在项目文件夹、项目/构建/linux 文件夹等中的不同选项。我可以让项目工作，但我看不到源文件夹以及 eclipse 上的包含文件夹。

我已经尝试了[http://www.vtk.org/Wiki/CMake:Eclipse_UNIX_Tutorial#CMake_with_Eclipse中指定的第一个和第二个选项](http://www.vtk.org/Wiki/CMake:Eclipse_UNIX_Tutorial#CMake_with_Eclipse)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-08-04T13:04:53.213

通常很简单：**从一个干净的构建目录**中，使用 Eclipse 作为生成器配置 cmake（如果使用 cmake-gui 会更容易），然后**将构建目录**导入 Eclipse（文件、导入、常规、现有项目到工作区） .

# ffmpeg - 在视频流之间切换

> ID：13729481
> 
> 赞同：6
> 
> 时间：2012-12-05T17:58:25.307
> 
> 标签：ffmpeg, video-streaming, vlc, http-streaming, sharpffmpeg

我正在努力在多个直播流之间切换。例如，我有五个实时流媒体服务器流式传输（HTTP 或 RTSP），我想在这（五个）流式传输源和目标之间放置一些代理，以便输出到目标将是一个视频流（稍后我可能会更改流式传输源再次使用开关）。Broker扮演switcher的角色，我的问题是，有这样的开源“switcher”吗？或者这项技术是如何工作的？

这里是类似问题的链接，但我想要一些开源或一些关于如何实现它的简要指导：[http ://forums.creativecow.net/thread/117/858680](http://forums.creativecow.net/thread/117/858680)

先感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-06-23T12:35:15.973

**这个答案可以成为研究人员的档案**

* * *

**第一个建议或解决方案（组播路由器）**

* * *

您可以使用支持 IGMP 协议的路由器或 L3 交换机。该路由器或 L3 交换机必须支持 IGMP 协议，您才能构建多播 IP 地址。您可以配置 L3 以切换所有流。多播 IP 地址在 224.0.0.0 到 239.255.255.255 范围内工作，并基于设备的 mac 地址工作。您可以为不同类型的交换场景创建不同的组播 IP 地址。完成路由器或 L3 交换机配置后，您只需更改 IP 地址即可将流媒体切换到您的程序中。（我没有提到广播。广播将数据发送到所有点。组播将数据发送到某些点。）

[![多播示例](../Images/dfe6873a119c7c5f85728485702d99b5.png)](https://i.stack.imgur.com/Jq190.gif)

* * *

**第二个建议或解决方案（编程）**

我正在使用**Vlc.Dotnet**包装器来使用 Vlc 和 libvlc 库。它是开源的。RTSP 流基于 IP 地址和端口号。我不知道任何开源开关，但您可以使用 Vlc.dotnet 包装器为您编写其中一个。您构建 5 个流媒体服务器和 1 个控制服务器。Streaming Server 的目的地应该是 Control Server 的 IP。您可以使用基本的开关程序控制来自控制服务器的所有数据。

5 个流服务器：将数据发送到控制服务器
1 个控制服务器：控制和切换数据

* * *

我更喜欢使用路由器或 L3 交换机来实现。因为它更容易。

# javascript - foreach() 循环中的倒数计时器

> ID：13729482
> 
> 赞同：1
> 
> 时间：2012-12-05T17:58:27.650
> 
> 标签：javascript

我有以下代码：

```
<script>
    var interval;
    var minutes = 0;
    var seconds = 5;

   function countdown(element) {
        interval = setInterval(function() {
            var el = document.getElementById(element);
            if(seconds == 0) {
                if(minutes == 0) {
                    el.innerHTML = "<a href=http://www.parkho.ir/phpvms/admin/index.php/aircraftmanager/update>Hello</a>";                    
                    clearInterval(interval);
                    return;
                } else {
                    minutes--;
                    seconds = 60;
                }
            }
            if(minutes > 0) {
                var minute_text = minutes + (minutes > 1 ? ' minutes' : ' minute');
            } else {
                var minute_text = '';
            }
            var second_text = seconds > 1 ? 'seconds' : 'second';
            el.innerHTML = minute_text + ' ' + seconds + ' ' + second_text + ' remaining';
            seconds--;
        }, 1000);
    }
    </script>
<h3><?php echo $title ;?></h3>
<head>
    <link rel="stylesheet" href="./css/style.css" type="text/css" />
    <script type="text/javascript" src="<?php echo fileurl('lib/js/jquery-1.3.1.min.js');?>"></script>
    <script type="text/javascript" src="<?php echo fileurl('lib/js/jquery.tablesorter.js');?>"></script>
    <script type="text/javascript" src="<?php echo fileurl('lib/js/jquery.tablesorter.pager1.js');?>"></script>
</head>
<body>
<div align="left" id="pager" class="pager">
    <table width="50%" align="center">
    <form>
        <tr>
            <td align="center"><img src="<?php echo fileurl('lib/images/first.png');?>" class="first"/>
            <img src="<?php echo fileurl('lib/images/prev.png');?>" class="prev"/></td>
            <td align="center"><input width="5" valign="top" type="text" class="pagedisplay"/></td>
            <td align="center"><img src="<?php echo fileurl('lib/images/next.png');?>" class="next"/>
            <img src="<?php echo fileurl('lib/images/last.png');?>" class="last"/></td>
            <td align="center"><select class="pagesize">
                                <option value="10">5 per page</option>
                                <option value="20">10 per page</option>         
                                <option value="50">25 per page</option>         
                               </select>
            </td>
        </tr>
    </form>
    </table>
</div>
<script defer="defer">
    $(document).ready(function() 
    { 
        $("#insured_list")
        .tablesorter({widthFixed: true, widgets: ['zebra']})
        .tablesorterPager({container: $("#pager")}); 
    } 
    ); 
</script>
<table id="insured_list" align="center" border="1" width="100%" cellpadding="0" cellspacing="0">
<thead>
    <th align="center" colspan="10"><font color="black" size="6"><b>Aircraft Manager</b></font></th>
        <tr>
            <td align="left" colspan="0"><a href="<?php echo adminurl('/aircraftmanager/allac?available=0') ;?>"><input type="button" value="Inactive All Aircraft"></a></td>
            <td align="left" colspan="0"><a href="<?php echo adminurl('/aircraftmanager/allac?available=1') ;?>"><input type="button" value="Active All Aircraft"></a></td>
            <td align="left" colspan="0"><a href="<?php echo adminurl('/aircraftmanager/update') ;?>"><input type="button" value="Update Status"></a></td>
            <td align="left" colspan="0"><a href="<?php echo adminurl('/aircraftmanager/status?available=100') ;?>"><input type="button" value="Reset Status"></a></td>
        </tr>
        <tr>
            <td align="center"><b>ID</b></td>
            <td align="center"><b>Name</b></td>
            <td align="center"><b>Registration</b></td>
            <td align="center"><b>Location</b></td>
            <td align="center"><b>Status</b></td> 
            <td align="center"><b>Time</b></td> 
            <td align="center" colspan="2"><b>Options</b></td>          
        </tr>
</thead>
<tbody)
<?php
$i=0;
foreach($aircrafts as $aircraft)
{
$air = AManagerData::getaircraftdetail($aircraft->id);
?>
    <tr>
            <td align="center"><?php echo $aircraft->id ;?></td>
            <td align="center"><?php echo $aircraft->fullname ;?></td>
            <td align="center"><?php echo $aircraft->registration ;?></td>
            <td align="center">
            <?php 
            $location = AManagerData::getaircraftlocation($aircraft->id);
            echo $location->arricao;
            ?>
            </td>
            <td align="center">
            <?php
            $param = AManagerData::getaircraftparam($aircraft->id);
            $stat = $param->start;
            echo $stat.'%';
            ?>
            </td>
            <td align="center">
            <div id='countdown'></div>
            </td>           
            <td align="center">
            <a class="{button:{icons:{primary:'ui-icon-arrowthick-1-s'}}}" href="#" onclick="$('#details_dialog_<?php echo $aircraft->id;?>').toggle()"><input type="button" Value="Parameters"></a>
            </form>
            </td>
            <td align="center">
            <?php
            if(PilotGroups::group_has_perm(Auth::$usergroups, FULL_ADMIN)) 
                {
                    $pilotid = $pilot->pilotid;
            ?>
            <form id="deletepilot" method="get" action="<?php echo adminurl('/pilotmanager/deletePilot');?>">
            <input type="hidden" name="pilotid" value="<?php echo $pilotid ;?>" />
            <input type="submit" name="submit" value="Delete" onclick="return doublecheck()" ;?>
            </form>
            <?php
                }
            ?>
            </td>

        </tr>
        <tr>
            <td colspan="10">
                <form action="<?php echo adminaction('/aircraftmanager/param');?>" method="GET">
                <table align="center" border="0" id="details_dialog_<?php echo $aircraft->id;?>" style="display:none"  width="100%">
                    <tr>
                        <th align="center" bgcolor="black" colspan="0"><font color="white">Aircraft Parameter Setting</font></th>
                    </tr>
                    <tr>
                        <td><b>&nbsp;Start:</b></td>
                        <td><input type="radio" name="perstart" value="100" checked="checked" >100%
                        <input type="radio" name="perstart" value="75" >75%
                        <input type="radio" name="perstart" value="50" >50%</td>

                        <td><b>&nbsp;Hard Landing:</b></td>
                        <td><input type="radio" name="perhard" value="30" checked="checked" >30%
                        <input type="radio" name="perhard" value="20" >20%
                        <input type="radio" name="perhard" value="15" >15%</td>
                    </tr>
                    <tr>
                        <td><b>&nbsp;Smooth Landing:</b></td>
                        <td><input type="radio" name="persoft" value="2" checked="checked" >2%
                        <input type="radio" name="persoft" value="4" >4%
                        <input type="radio" name="persoft" value="10" >10%</td>

                        <td><b>&nbsp;Before Inactivity:</b></td>
                        <td><input type="radio" name="perhour" value="800" checked="checked" >800 hrs
                        <input type="radio" name="perhour" value="600" >600 hrs
                        <input type="radio" name="perhour" value="400" >400 hrs</td>
                    </tr>
                    <tr>
                        <td><b>&nbsp;Maintenance Period:</b></td>
                        <td><input type="radio" name="mhours" value="12" checked="checked" >12 hrs
                        <input type="radio" name="mhours" value="24" >24 hrs
                        <input type="radio" name="mhours" value="36" >36 hrs</td>

                        <td><b>&nbsp;Maximum Landing Rate:</b></td>
                        <td><input type="radio" name="maxlr" value="-600" checked="checked" >600 ft/m
                        <input type="radio" name="maxlr" value="-450" >450 ft/m
                        <input type="radio" name="maxlr" value="-300" >300 ft/m</td>
                    </tr>
                    <tr><td colspan="4"><hr></td></tr>
                    <tr>
                    <td colspan="0" align="center"><input type="hidden" name ="aircraft" value="<?php echo $aircraft->id ;?>"><input type="submit" value="Apply Settings"></td>
                    </tr>
                </table>
                </form>
            </td>
        </tr>

<?php
}

?>

<script type="text/javascript">
function doublecheck()
{
    var answer = confirm("Are you sure you want to delete the aircraft?")
    if (answer) {
        return true;
    }

    return false;
}
</script>
</tbody>
</table>
</body> 
```

我要做的是在 foreach() 循环中显示倒数计时器，但只有第一条记录显示计时器，其余记录显示为空白。这是我显示计时器的行：

```
<td align="center">
            <div id='countdown'></div>
            </td> 
```

请告诉我我错在哪里，或者以这种方式可行。谢谢

# javascript - 尝试将 SVG 签名转换为光栅图像

> ID：13729485
> 
> 赞同：3
> 
> 时间：2012-12-05T17:58:41.457
> 
> 标签：javascript, jquery, html, dom

我一直在尝试将 SVG 图像转换为光栅图像。格式无关紧要，不过 png 或 jpg 会很好。

我正在使用[jSignature](http://willowsystems.github.com/jSignature/#/about/)来尝试完成此操作。jSignature 的 API 没有为我点击，但我可以绘制签名并将其发布到`<img src="data:" />`标签中。

我一直在阅读关于 SO 讨论这个问题的其他线程，并且我一直在尝试[这种方法。](https://stackoverflow.com/questions/923885/capture-html-canvas-as-gif-jpg-png-pdf/3514404#3514404)但是，我不断从控制台收到“Object [object Object] has no method 'getContext'”错误。

我将使用 PHP 将其传递给数据库。

```
<!DOCTYPE html>
<html>
  <head>
    <title></title>
    <link rel="stylesheet" type="text/css" href="sigStyle.css">
    <script type="text/javascript" src="jquery-1.7.2.min.js"></script>
    <script type="text/javascript" src="jSignature.min.js"></script>
    <script type="text/javascript">
      $(document).ready(function(){
        var sigdiv = $("#signature").jSignature({'UndoButton':true});

        $("#lock").click(function(){
          //Lock the canvas, stop user input
        });

        $("#save").click(function(){
          var datapair = sigdiv.jSignature("getData", "svgbase64");
          var i = new Image();
          i.src = "data:" + datapair[0] + "," + datapair[1];
          $(i).appendTo($("#outputSvg"));
        });

        $("#clear").click(function(){
          sigdiv.jSignature("reset");
          $("#outputSvg, #outputRaster").empty();
        });

        $("#raster").click(function(){
          var canvas = $("canvas").getContext("2d");
          var img = canvas.toDataURL("image/png");
          $("#outputRaster").append('<img src="'+img+'"/>');
        });
      })
    </script>
  </head>  
  <body>

    <div id="signature"></div>
    <br />
    <button id="lock">Lock</button>
    <button id="save">Save</button>
    <button id="clear">Clear</button>
    <button id="raster">Raster</button>
    <br /><br />
    <fieldset id="outputSvg" style="float:left">
      <legend>SVG</legend>
    </fieldset>
    <fieldset id="outputRaster" style="float:left">
      <legend>Raster</legend>
    </fieldset>
  </body>
</html> 
```

任何帮助、建议或提示将不胜感激！谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T19:38:36.693

我已经想通了！

[Canvg](http://code.google.com/p/canvg/)允许您将 svg 绘制到画布上。我在我的页面上制作了一个隐藏的画布元素。我将我的 jSignature 保存为 SVG/XML 字符串，将其传递给 canvg 进行渲染，然后最后利用隐藏画布的 .toDataURL() 方法。

```
 <head>
    <script type="text/javascript" src="jquery-1.7.2.min.js"></script>
    <script type="text/javascript" src="jSignature.min.js"></script>
    <script type="text/javascript" src="canvg.js"></script>
    <script>
     $(document).ready(function(){
        var sigdiv = $("#signature").jSignature({'UndoButton':true});

        $("#save").click(function(){
          var datapair = sigdiv.jSignature("getData", "svg");
          var i = new Image();
          i.src = "data:" + datapair[0] + "," + datapair[1];
          $(i).appendTo($("#outputSvg"));

          var canvas = document.getElementById("canvas");

          canvg(canvas, datapair[1]);

          var img = canvas.toDataURL("image/png");
          $("#outputRaster").append("<img src='"+img+"'/>");
        });
      });
    </script>
  </head>  
  <body>
    <div id="signature"></div>
    <canvas id="canvas" hidden="hidden"></canvas>
    <br />
    <button id="lock">Lock</button>
    <button id="save">Save</button>
    <button id="clear">Clear</button>
    <button id="raster">Raster</button>
    <br /><br />
    <fieldset id="outputSvg" style="float:left">
      <legend>SVG</legend>
    </fieldset>
    <fieldset id="outputRaster" style="float:left">
      <legend>Raster</legend>
    </fieldset>
  </body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T19:30:23.577

这段代码：

```
$("canvas") 
```

返回一个 jQuery 对象（甚至可能是一个 jQuery 对象列表），jQuery 对象没有`getContext()`方法。尝试做这样的事情来获得一个实际的`canvas`元素：

```
$("canvas")[0].getContext("2d") 
```

另一件需要注意的事情：您似乎没有`canvas`元素。

# mysql - delphi dxExpress MySQL：LAST_INSERT_ID 值无效

> ID：13729486
> 
> 赞同：2
> 
> 时间：2012-12-05T17:58:42.383
> 
> 标签：mysql, delphi, dbexpress

我正在用 Delphi 开发一个应用程序，并想将记录插入到 Mysql 的表中。然后我想知道插入记录的标识值。所以我写了下面的代码。
在运行时，插入完成并添加记录，但标识的返回值为零！！我的错误是什么？！

```
-- MySql  table create
CREATE TABLE Sample_Table (
  id bigint(20) unsigned NOT NULL AUTO_INCREMENT,
  mobile_number varchar(20) DEFAULT NULL,
  message_body text,
 PRIMARY KEY (id)
);

--- Delphi code

SQLCon := TSQLConnection.Create(self);
  with SQLCon do begin
   Close;
   DriverName := 'MySQL';
   GetDriverFunc := 'getSQLDriverMYSQL';
   LibraryName := 'dbxmys.dll';
   VendorLib := 'LIBMYSQL.dll';
   LoginPrompt := false;
   Params.Values['HostName'] := '127.0.0.1';
   Params.Values['Database'] := 'sms_test';
   Params.Values['User_Name'] := 'root';
   Params.Values['Password'] := 'root';
   Open;
end;

SQLQry := TSQLQuery.Create(self);
with SQLQry do begin
  Close;
  SQLConnection := SQLCon;

  SQL.Clear;
  SQL.Add('INSERT INTO Sample_Table ');
  SQL.Add('(mobile_number, message_body) VALUES');
  SQL.Add(format('(%s, %s);',[QuotedStr('989121011689'), QuotedStr('Text1')]));
  ExecSQL();
  Close;

  SQL.Clear;
  SQL.Add('SELECT LAST_INSERT_ID() EngineRefNo;');
  Open;
  First;
  ListBox1.items.Add(FieldByName('EngineRefNo').AsString);
  Close;
end;

SQLCon.Close; 
```

有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T23:38:16.177

你应该一口气拿到身份证

```
SQLQry := TSQLQuery.Create(self);
with SQLQry do begin
  SQLConnection := SQLCon;

  SQL.Add('INSERT INTO Sample_Table ');
  SQL.Add('(mobile_number, message_body) VALUES');
  SQL.Add(format('(%s, %s);',[QuotedStr('989121011689'), QuotedStr('Text1')]));

  SQL.Add('SELECT LAST_INSERT_ID() EngineRefNo;');

  Open;
  ListBox1.items.Add(FieldByName('EngineRefNo').AsString);
  Close;
end;

SQLCon.Close; 
```

你应该考虑使用参数来防止sql注入

```
SQLQry := TSQLQuery.Create(self);
with SQLQry do begin
  SQLConnection := SQLCon;

  SQL.Add('INSERT INTO Sample_Table ');
  SQL.Add('( mobile_number, message_body ) VALUES');
  SQL.Add('( :mobile_number, :message_body );');

  SQL.Add('SELECT LAST_INSERT_ID() EngineRefNo;');

  ParamByName( 'mobile_number' ).Value := '989121011689';
  ParamByName( 'message_body' ).Value := 'Text1';

  Open;
  ListBox1.items.Add(FieldByName('EngineRefNo').AsString);
  Close;
end;

SQLCon.Close; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T22:13:25.070

显然[这是 delphi 已知的问题](http://dev.mysql.com/doc/connector-odbc/en/connector-odbc-usagenotes-functionality-last-insert-id.html)。

引用上面的链接：

> 某些 ODBC 应用程序（包括 Delphi 和 Access）可能无法使用前面的示例获取自动增量值。在这种情况下，请尝试以下语句作为替代：
> 
> SELECT * FROM tbl WHERE auto IS NULL;
> 
> 此替代方法要求 sql_auto_is_null 变量未设置为 0。请参阅服务器系统变量

所以在你的情况下（未经测试）：

```
SQLCon := TSQLConnection.Create(self);
  with SQLCon do begin
   Close;
   DriverName := 'MySQL';
   GetDriverFunc := 'getSQLDriverMYSQL';
   LibraryName := 'dbxmys.dll';
   VendorLib := 'LIBMYSQL.dll';
   LoginPrompt := false;
   Params.Values['HostName'] := '127.0.0.1';
   Params.Values['Database'] := 'sms_test';
   Params.Values['User_Name'] := 'root';
   Params.Values['Password'] := 'root';
   Open;
end;
SQLQry := TSQLQuery.Create(self);
with SQLQry do begin
  Close;
  SQLConnection := SQLCon;

  SQL.Clear;
  SQL.Add('INSERT INTO Sample_Table ');
  SQL.Add('(mobile_number, message_body) VALUES');
  SQL.Add(format('(%s, %s);',[QuotedStr('989121011689'), QuotedStr('Text1')]));
  ExecSQL();
  Close;

  SQL.Clear;
  SQL.Add('SELECT id FROM Sample_Table WHERE id IS NULL');
  Open;
  First;
  ListBox1.items.Add(FieldByName('Id').AsString);
  Close;
end;

SQLCon.Close; 
```

# awk - 使用 awk 删除带有特定字段的不需要的记录

> ID：13729488
> 
> 赞同：0
> 
> 时间：2012-12-05T17:58:46.653
> 
> 标签：awk, multiline

如何查看没有特定字段的记录...首先，我的输入需要特定的记录和字段分隔符

```
BEGIN {
  RS="";
  FS="\n";
} 
```

这是我的输入：

```
 <Row>
    <Cell><Data ss:Type="String">Networks menu (disabled)</Data></Cell>
    <Cell><Data ss:Type="String">Networks</Data></Cell>
    <Cell ss:Index="4"><Data ss:Type="String">Select</Data></Cell>
    <Cell><Data ss:Type="Boolean">0</Data></Cell>
    <Cell><Data ss:Type="String">Back</Data></Cell>
    <Cell ss:Index="8"><Data ss:Type="String" x:Ticked="1">1</Data></Cell>
    <Cell><Data ss:Type="String">&quot;Networks Sel&quot;,&quot;GPRC Mode&quot;</Data></Cell>
    <Cell ss:StyleID="s73"/>
    <Cell ss:StyleID="s73"/>
    <Cell ss:StyleID="s73"/>
   </Row>

   <Row>
    <Cell ss:StyleID="s93"><Data ss:Type="String">New Code?</Data></Cell>
    <Cell ss:StyleID="s62"/>
    <Cell ss:StyleID="s62"/>
    <Cell ss:StyleID="s62"/>
    <Cell ss:StyleID="s62"><Data ss:Type="Boolean">0</Data></Cell>
    <Cell ss:StyleID="s62"><Data ss:Type="String">Cancel</Data></Cell>
    <Cell ss:StyleID="s62"><Data ss:Type="Boolean">0</Data></Cell>
    <Cell ss:StyleID="s62"><Data ss:Type="String" x:Ticked="1">-1</Data></Cell>
    <Cell ss:StyleID="s62"><Data ss:Type="String">&quot;?|New Code?&quot;</Data></Cell>
    <Cell ss:StyleID="s95"/>
    <Cell ss:StyleID="s95"/>
    <Cell ss:StyleID="s95"/>
   </Row>

   <Row>
    <Cell ss:StyleID="s156"><Data ss:Type="String">New Message Arrived</Data></Cell>
    <Cell ss:Index="3"><Data ss:Type="String">ANIMATION_REC_MAIL</Data></Cell>
    <Cell><Data ss:Type="String">Read</Data></Cell>
    <Cell><Data ss:Type="Boolean">0</Data></Cell>
    <Cell><Data ss:Type="String">Back</Data></Cell>
    <Cell><Data ss:Type="Boolean">0</Data></Cell>
    <Cell ss:StyleID="s117"><Data ss:Type="String">-1</Data></Cell>
    <Cell><Data ss:Type="String">NOT EXIST </Data></Cell>
    <Cell ss:StyleID="s73"/>
    <Cell ss:StyleID="s73"/>
    <Cell ss:StyleID="s73"/>
   </Row> 
```

如何查看所有输入，除了一个记录，第二个字段是“新代码”？（这里会有一些正则表达式）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T19:03:14.520

如果要在记录之间保留空行，还需要设置`ORS`变量。您想`~`在第二个字段上使用 awk 的匹配运算符。

```
awk '
    BEGIN {RS=""; FS="\n"; ORS="\n\n"} 
    $2 ~ /New Code\?/ {next} 
    {print}
' 
```

正如@EdMorton 提到的，这可以写得更简洁：

```
awk 'BEGIN {RS=""; FS="\n"; ORS="\n\n"} $2 !~ /New Code\?/' 
```

# rally - api2.0p5 cardbard.card 没有 BuildHeader 或 BuildContent

> ID：13729499
> 
> 赞同：3
> 
> 时间：2012-12-05T17:59:37.167
> 
> 标签：rally

全部，

在弄乱 2.0p5 中的新卡片时，我注意到不再有可用于更改标题或实际卡片内容的模板。

有人可以确认这是不可用的，只是想确保我不会在任何地方错过它......

真的没有办法改变卡的显示吗？

只是为了清楚起见，在 2.0p2 中，您可以在 Card 的 Ext.define 中执行 buildContent 函数或 buildHeader 函数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T23:24:54.850

卡片不再有可以直接修改的模板，但是您可以创建自定义 CardContent 插件来显示自定义 html：

```
Ext.define('Rally.ui.cardboard.plugin.MyCardContent', {
    alias: 'plugin.rallymycardcontent',
    extend: 'Rally.ui.cardboard.plugin.CardContent',
    getHtml: function() {
        var html = this.callParent(arguments);
        return html + '<span>mycontent</span>';
    }
}); 
```

然后配置您的 CardBoard 以使用自定义插件：

```
Ext.create('Rally.ui.cardboard.CardBoard', {
    types: ['User Story', 'Defect'],
    attribute: "ScheduleState",
    fieldNames: ['Tasks'], // display task information inline on card
    cardConfig: {
        // overriding plugins to add the custom plugin
        // be sure to include the default plugins.
        plugins: [
            {ptype: 'rallycardheader'},
            {ptype: 'rallymycardcontent'},
            {ptype: 'rallycardpopover'}
        ]
    }
}); 
```

# ios - UIViewController 透明背景

> ID：13729501
> 
> 赞同：4
> 
> 时间：2012-12-05T17:59:43.237
> 
> 标签：ios, xcode

我正在以这种方式创建视图控制器：

```
 UIStoryboard *sb = [UIStoryboard storyboardWithName:@"PhotoViewControlleriPhone" bundle:nil];
                                UIViewController *vc = [sb instantiateInitialViewController];

                               vc.view.backgroundColor = [UIColor clearColor];
                               self.modalPresentationStyle = UIModalPresentationCurrentContext;

                               [self presentModalViewController:vc animated:NO];

                               vc.view.frame = CGRectMake(imageView.frame.origin.x, imageView.frame.origin.y + 64, imageView.frame.size.width, 200.000000);

                               vc.view.layer.cornerRadius = 10; // this value vary as per your desire
                               vc.view.clipsToBounds = YES; 
```

viewcontroller 不是全屏的，所以还是可以看到之前的。我希望能够看到它，但锁定它。就像你在使用 ios facebook 分享时，你会看到背景，但它会变暗，你无法与之互动。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T18:08:26.933

我相信问题在于您使用`-presentModalViewController:animated:`. 使用该方法会附带一些关于您托管的视图控制器的假设；它所做的假设之一（至少在 iPhone 类型的设备上）是视图控制器占据了整个屏幕并且是不透明的。

要解决此问题，请尝试手动将模态视图控制器的视图添加到当前视图控制器的视图中。您需要设置视图控制器层次结构以匹配视图层次结构，因此您的代码如下所示：

```
[self addChildViewController:vc];
[self.view addSubview:vc.view]; 
```

您需要调整传入视图的框架以将其定位在其新的超级视图中，但这应该会给您更多的自由。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-12-04T15:06:01.723

我的解决方法是[使用代码截取屏幕截图](https://stackoverflow.com/questions/2200736/how-to-take-a-screenshot-programmatically)，将 UIImage 作为参数传递给新的 UIViewController，并将其显示为背景图像。这样，它看起来是透明的，您不必禁用可能可访问/可访问的底层控件。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-01-11T07:40:58.550

**iOS8+**

您可以使用下面的 iOS8+ 代码片段，它对我有用

```
SecondViewController *secondViewController = [[SecondViewController alloc] init];
secondViewController.modalPresentationStyle = UIModalPresentationOverCurrentContext;           
[self presentViewController:secondViewController animated:YES completion:nil]; 
```

# apache - Solr/Lucene 结果字段术语计数

> ID：13729504
> 
> 赞同：0
> 
> 时间：2012-12-05T17:59:50.973
> 
> 标签：apache, solr, lucene, term

我正在使用 solr 进行搜索。结果我得到了一组字段。其中一个字段是“域”。域字段在我的数据库中是多对多关系，因此我的文档包含链接到的“域”数组。

我想要做的是，对于结果集中的每个域，计算在全局结果集中找到这个“域术语”的次数。

我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T18:02:35.427

您需要查看[字段折叠](http://wiki.apache.org/solr/FieldCollapsing)功能。

# pointers - 具有按顺序访问成员的指针的数组结构

> ID：13729505
> 
> 赞同：1
> 
> 时间：2012-12-05T17:59:51.643
> 
> 标签：pointers, struct, typedef, members

我仍在学习指针和结构，但我希望有人知道是否可以通过使用指针顺序访问单个成员？

```
 Typedef record_data {  
     float a;  
     float b;  
     float c;  
     }records,*Sptr;  

    records lists[5];  
    Sptr ptr; 
```

示例：为 5 个列表的所有成员分配 float 1.0 的值

```
 // instead of this      
    (void)testworks(void){     
    int i;
    float j=1.0;  
    ptr = &lists[i]  
    ptr->lists[0].a = j;  
    ptr->lists[0].b = j;  
    ptr->lists[0].c = j;  
    ptr->lists[1].a = j;  
    // ... and so on  
    ptr->lists[4].c = j;  
    }  

    // want to do this
    (void)testwannado(void){  
    int a,i;
    float j=1.0;  
    ptr = &lists[i]   
    for (a=0;a<5;a++){  // step through typedef structs   
        for (i=0;i<3;i++){  // step through members   
        ???    
        }  
    } 
```

请原谅我在下面这个例子中的错误，但它代表了我能想到的最接近我想要完成的事情。

```
 int *mptr;  
    mptr = &(ptr->lists[0].a)   // want to assign a pointer to members so all 3 members can be used...  
    *mptr++ = j;  // so I can do something like this. 
```

这不是编译的，所以任何其他错误都是无意的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T18:03:28.800

你通常不想这样做。结构成员应该单独访问。通过假设多个连续结构成员如何放置在内存中的内存布局，您可能会遇到很多可移植性问题。而且大多数（类C）语言都没有给你一种通过结构成员“内省”的方法。

# php - 在 WordPress 中记录用户操作的数据库设计

> ID：13729508
> 
> 赞同：1
> 
> 时间：2012-12-05T18:00:01.643
> 
> 标签：php, mysql, database, wordpress, database-design

我需要一个表格来记录用户在 WordPress 中所做的某些操作。

到目前为止，这是我已经准备好的数据库模式：

```
id bigint(20) NOT NULL AUTO_INCREMENT,
uid bigint(20) NOT NULL,
type VARCHAR(256) NOT NULL,
data1 TEXT NOT NULL,
data2 TEXT NOT NULL,
data3 TEXT NOT NULL,
timestamp bigint(20) NOT NULL,
UNIQUE KEY id (id) 
```

让我澄清一下：

```
uid: User ID of the wordpress user
type: Type of action the user made (can be 'comment', 'new_post', 'login', etc)
data1/2/3: additional data (for example, ID of comment or post made) 
```

要显示日志，我会查询数据库并运行某个过滤器以获取要为该特定日志显示的文本。所以它的工作原理是这样的：

```
if( $type == 'comment') {
    $comment = get_comment( $data1 );
    $user = get_user($uid);
    echo "User {$user->name} has made a <a href='{$comment->permalink}'>comment</a>";
} 
```

这是最有效的做事方式吗？这对我来说似乎很好，因为我不想只将 HTML 存储在要输出的日志表中。

但是，问题出现在我想在满足某些条件时隐藏特定日志条目的地方。例如，如果评论不再存在，我想隐藏该条目。这会给分页带来一些问题。关于如何克服这个问题的任何建议？

谢谢！

编辑：

```
myplugin_transactions
id bigint(20) NOT NULL AUTO_INCREMENT,
user_id bigint(20) NOT NULL,
type VARCHAR(256) NOT NULL,
timestamp bigint(20) NOT NULL,
UNIQUE KEY id (id)

myplugin_meta
id bigint(20) NOT NULL AUTO_INCREMENT,
txn_id bigint(20) NOT NULL,
key VARCHAR(256) NOT NULL,
data TEXT NOT NULL,
UNIQUE KEY id (id) 
```

Lets say I want to select * from myplugin_transactions where data1 would usually have had been 'x' and data2 been 'y'. How should I do it in this case?

```
SELECT * FROM myplugin_transactions LEFT JOIN myplugin_meta ON myplugin_transactions.id = myplugin_meta.txn_id WHERE ( ... ? ) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T18:15:44.550

This answer is going to be very generic as it doesn't provide any code, but it's also too long for a comment.

Firstly, you shouldn't be storing additional data in those `data1`, `data2`, `data3` fields. You're using MySQL, so you've got the power of relational databases. Use them.

You should simply have another table, which has an ID field (the ID of the action), and a data field. That way you can store 0 to as-many-items-as-you-want pieces of metadata. I mean, wordpress already does this with metadata right?

Secondly, if a comment is deleted, do you simply want to delete the action related to it? If so, simply hook into the API. I believe there is a hook for `delete_comment`: [http://codex.wordpress.org/Plugin_API/Action_Reference#Comment.2C_Ping.2C_and_Trackback_Actions](http://codex.wordpress.org/Plugin_API/Action_Reference#Comment.2C_Ping.2C_and_Trackback_Actions)

Otherwise if you want to keep the action, you can either add an extra field or piece of metadata called, say, `deleted`. When a comment is deleted, as above: hook into the `delete_comment` call and update the action to `deleted = true`. Then when you run your query on all the actions, exclude the deleted statements, eg `... WHERE deleted = NULL ...` etc.

EDIT2:

To answer your select statement, something like this could work:

```
SELECT * FROM myplugin_transactions 
LEFT JOIN myplugin_meta AS data1 
ON ( myplugin_transactions.id = data1.txn_id AND data1.key = 'data1' )
LEFT JOIN myplugin_meta AS data2 
ON ( myplugin_transactions.id = data2.txn_id AND data2.key = 'data2' )
WHERE data1.data = 'x'
AND data2.data = 'y' 
```

Obviously replacing the `data1` and `data2` keywords with meaningful descriptions.

# hadoop - SafeModeException : 名称节点处于安全模式

> ID：13729510
> 
> 赞同：12
> 
> 时间：2012-12-05T18:00:10.413
> 
> 标签：hadoop

我尝试将文件从本地磁盘复制到`hdfs`. 起初它给了`SafeModeException`. 在寻找解决方案时，我读到如果再次执行相同的命令，问题不会出现。所以我再次尝试，它没有给出异常。

```
hduser@saket:/usr/local/hadoop$ bin/hadoop dfs -copyFromLocal /tmp/gutenberg/ /user/hduser/gutenberg
copyFromLocal: org.apache.hadoop.hdfs.server.namenode.SafeModeException: Cannot create directory /user/hduser/gutenberg. Name node is in safe mode.
hduser@saket:/usr/local/hadoop$ bin/hadoop dfs -copyFromLocal /tmp/gutenberg/ /user/hduser/gutenberg 
```

为什么会这样？。我应该使用此代码关闭安全模式吗？

```
hadoop dfs -safemode leave 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-06T07:54:48.733

*NameNode*处于**安全模式**，直到配置的数据节点报告为在线的块百分比。可以通过参数`dfs.namenode.safemode.threshold-pct`配置`hdfs-site.xml`

对于小型/开发集群，您的块很少 - 将此参数设置为低于其默认值是有意义的`0.9999f`。否则 1 个缺失块可能导致系统在安全模式下挂起。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2014-07-09T08:49:59.280

进入（在我的系统中）的`hadoop`路径，`bin``/usr/local/hadoop/bin/`

```
cd /usr/local/hadoop/bin/ 
```

检查是否有文件`hadoop`，

```
hadoopuser@arul-PC:/usr/local/hadoop/bin$ ls 
```

o/p 将是，

```
hadoop            hadoop-daemons.sh  start-all.sh       start-jobhistoryserver.sh  stop-balancer.sh          stop-mapred.sh
hadoop-config.sh  rcc                start-balancer.sh  start-mapred.sh            stop-dfs.sh               task-controller
hadoop-daemon.sh  slaves.sh          start-dfs.sh       stop-all.sh                stop-jobhistoryserver.sh 
```

然后你必须使用命令关闭安全模式`./hadoop dfsadmin -safemode leave`，

```
hadoopuser@arul-PC:/usr/local/hadoop/bin$ ./hadoop dfsadmin -safemode leave 
```

你会得到回应，

```
Safe mode is OFF 
```

注意：我创建的 Hadoop 用户名为`hadoopuser`.

# intellij-idea - IDEA，将项目导入新版本的 IDE

> ID：13729514
> 
> 赞同：0
> 
> 时间：2012-12-05T18:00:22.597
> 
> 标签：intellij-idea

我正在将代码从 IntelliJ 11C 移动到 12Ultimate。

我最终在我喜欢的新位置（有意）创建了一个新项目，现在想将所有现有模块导入其中。

现在..当我这样做时，它会尝试修改现有的 xml 配置文件，如果可能的话，我想避免。

简单来说，我想在 12 的一个新项目下使用 CE11 的配置将所有模块从 CE11 移动到 12。

进口是正确的做法吗？我应该创建新的吗？

解决这个问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T18:11:58.657

如果您的团队使用不同的 IntelliJ IDEA 版本，建议有 2 个项目/模块文件的副本，因为格式可能不向后兼容（IDEA 12 添加到配置中的新选项将被旧版本从 XML 中剥离）。

通常你只需在 IDEA 12 中打开 IDEA 11 项目，它就会自动转换。如果格式有任何重大更改，则会自动创建项目/模块文件的备份。

导入单个模块也可以，但建议只打开项目。

# python - 子类化 numpy 标量类型

> ID：13729521
> 
> 赞同：7
> 
> 时间：2012-12-05T18:00:41.380
> 
> 标签：python, numpy, subclass, user-defined-types

我正在尝试子类`numpy.complex64`化以利用 numpy 存储数据的方式（连续的、交替的实部和虚部），但使用我自己的`__add__`, `__sub__`, ... 例程。

我的问题是，当我进行 a `numpy.ndarray`, setting时`dtype=mysubclass`，我得到 a `numpy.ndarray`with `dtype='numpy.complex64'`，这导致 numpy 不使用我自己的函数进行加法、减法等。

例子：

```
import numpy as np
class mysubclass(np.complex64):
    pass

a = mysubclass(1+1j)
A = np.empty(2, dtype=mysubclass)

print type(a)
print repr(A) 
```

输出：

```
<class '__main__.mysubclass'>
array([ -2.07782988e-20 +4.58546896e-41j,  -2.07782988e-20 +4.58546896e-41j], dtype=complex64)' 
```

有谁知道如何做到这一点？

提前致谢 - 索伦

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T18:29:04.943

NumPy 类型系统仅设计为通过[`PyArray_RegisterDataType`](http://docs.scipy.org/doc/numpy/reference/c-api.array.html#PyArray_RegisterDataType)函数从 C 扩展。*可能*可以使用 ctypes 从 Python 访问此功能，但我不推荐它；最好用 C 或 Cython 或`ndarray`@seberg 描述的子类编写扩展。

NumPy 源代码树中有一个简单的示例 dtype：[newdtype_example/floatint.c](http://projects.scipy.org/numpy/browser/trunk/numpy/doc/newdtype_example/floatint.c?rev=4848)。如果你喜欢 Pyrex， pytables 源代码中的[reference.pyx](http://www.pytables.org/svn/pytables/branches/dimension-scales2/tables/reference.pyx)可能值得一看。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-05T18:32:31.403

请注意，标量和数组在 numpy 中是完全不同的。`np.complex64`（这是 32 位浮点数，请注意，不是双精度）。您将无法像那样更改数组，您需要对数组进行子类化，然后覆盖它的`__add__`and `__sub__`。

如果这就是您想要做的，它应该只是工作，否则请查看[http://docs.scipy.org/doc/numpy/user/basics.subclassing.html](http://docs.scipy.org/doc/numpy/user/basics.subclassing.html)因为子类化数组并不是那么简单。

但是，如果您想将此类型也用作标量。例如，您想索引标量，至少目前它变得更加困难。您可以通过定义`__array_wrap__`将一些reduce函数转换为您自己的标量类型来进一步了解索引，以便在所有情况下都可以使用索引，在我看来，您`__getitem__`目前可能已经定义了自己的。

在使用这种方法的所有情况下，您仍然使用 complex 数据类型，并且所有未显式重写的函数的行为仍然相同。@ecatmur 提到您可以从 C 端创建新的数据类型，如果这确实是您想要的。

# python - 使用python的嵌套ifs中的索引错误

> ID：13729523
> 
> 赞同：0
> 
> 时间：2012-12-05T18:00:51.077
> 
> 标签：python, if-statement, indexing

运行我正在使用海龟图形绘制的程序，我输入了一个退出命令，但是现在每当我输入任何单字命令时，我都会在“返回”的 elif 处得到一个 indexerror（IndexError：list index out of range）命令：

```
def parse_line(line):
    global items_in_line
    items_in_line = line.split(" ",1)
    if items_in_line[0] == "forward":
        if isinstance(items_in_line[1], int):
                return items_in_line
    elif items_in_line[0] == "back" or "backward":
        if isinstance(items_in_line[1], int):
             return items_in_line
    ...
    elif items_in_line[0] == "exit":
        sys.exit()

line=input("Enter a turtle command or enter 'file' to load commands from a file")

x = parse_line(line) 
```

为什么？我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T18:04:53.397

```
elif items_in_line[0] == "back" or "backward": 
```

上述条件相当于：-

```
elif (items_in_line[0] == "back") or "backward": 
```

它将始终被评估为 true，因此如果您将“exit”作为输入传递也将被执行，因此`items_in_line[1]`将抛出`IndexError`.

您需要将条件更改为： -

```
elif items_in_line[0] in ("back", "backward"): 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T18:04:53.147

那`elif`应该是：

```
elif items_in_line[0] in ("back", "backward"): 
```

您当前的版本被解释为

```
elif (items_in_line[0] == "back") or bool("backward"): 
```

总是评估为`True`，因为`bool("backward")`是`True`。

# c# - 两害相权取其轻？ViewModel 中的标记还是视图中的逻辑？

> ID：13729524
> 
> 赞同：2
> 
> 时间：2012-12-05T18:00:51.837
> 
> 标签：c#, asp.net-mvc, razor, markup, wcag

我正在开发一个符合 WCAG AA 标准的网站。这意味着如果输入表单不为 null 或为空，则输入表单应具有以下属性：

```
required='required'
value='{the value}' 
```

如果它们为 null 或为空，则不应存在这些属性。因此，以下将在两个帐户上失败 WCAG。

```
<input type='date' required='false' value='' /> 
```

我从剃刀视图中的 if 语句开始：

```
@if (Model.HasValue) 
{
<input type="date" id="@Model.Name" name="@Model.Name" min="1990-01-01" max="2100-01-01" value="@Model.CoercedValue" />
}
else { 
<input type="date" id="@Model.Name" name="@Model.Name" min="1990-01-01" max="2100-01-01" />
} 
```

但是当添加其他可选属性时，这开始变得非常难看。添加必需属性后变为四个语句。

* * *

我觉得有两种方法可以做到这一点，或者将逻辑推送到 ViewModel，以便它返回一个属性字符串：

```
public string this[string key]
{
    get { 
        switch (key){
            case "Required":
                return IsRequired?"required='required'":String.Empty;
            case "Value": 
                return HasValue ? String.Format("value='{0}'", CoercedValue) : String.Empty;
            default: 
            return String.Empty;
        }
    }
} 
```

然后视图如下所示：

```
<input type='date' @Model["Required"] @Model["Value"] /> 
```

* * *

另一种方法是将此逻辑放在视图中的代码块中

```
@{
   RequiredAttr = IsRequired?"required='required'":String.Empty;
   ValueAttr = HasValue ? String.Format("value='{0}'", CoercedValue) : String.Empty;
} 
```

和视图标记的其余部分：

```
<input type='date' @RequiredAttr @ValueAttr /> 
```

* * *

我倾向于 ViewModel 中的标记，但这是最适合它的地方吗？我错过了可以解决这个问题的模式吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T18:07:43.620

我个人的看法是“视图中没有代码”是一个强有力的指导方针，但不是绝对的福音。我在我的视图中使用了代码在逻辑的情况下

1.  简单的
2.  旨在*仅*影响View 中的 HTML，不直接影响模型的状态。

我认为 Matthew 的评论是扩展以制作符合 WCAG 的自定义输入字段会很好用。它是可重复的、一致的，并且清晰地封装了关注点。

# ruby-on-rails - 范围引发 MySQL 错误：排序规则的非法混合

> ID：13729531
> 
> 赞同：0
> 
> 时间：2012-12-05T18:01:11.897
> 
> 标签：ruby-on-rails

很奇怪：我的示波器运行良好：

```
scope :starting_at, lambda {|start_date|
    where("CAST(starts_at AS TIME) = ?", Event.db_time(start_date))
}

(rdb:1) sd1 => 2012-12-16 10:00:00 +0100
Event.starting_at(sd1)
[#<Event id: 1, account_id: 1, place_id: 1, slug: "my-new-.... 
```

我有另一个类似的范围，它引发了一个错误：

```
scope :starting_at_between, lambda {|start_time, end_time|
    where( "? <= CAST(starts_at AS TIME) <= ?", Event.db_time(start_time), Event.db_time(end_time) )
}
(rdb:1) sd2  =>  2012-12-15 08:00:00 +0100
(rdb:1) ed2  =>  2012-12-19 23:00:00 +0100
Event.starting_at_between(ed2, sd2)
INTERNAL ERROR!!! Mysql2::Error: Illegal mix of collations (utf8_general_ci,COERCIBLE) and (latin1_swedish_ci,NUMERIC) for operation '<=': SELECT `events`.* FROM `events`  WHERE ('23:00:00' <= CAST(starts_at AS TIME) <= '08:00:00') 
```

使用这个有什么问题...？不是因为 2 个参数.. 我有一个类似的范围，其中 CAST 是 AS DATE 并且运行良好...

```
scope :starting_on_between, lambda { |start_date, end_date|
    where( "? <= CAST(starts_at AS DATE) <= ?", Event.db_date(start_date), Event.db_date(end_date) )
}
Event.starting_on_between(ed2, sd2)
[#<Event id: 1, account_id: 1, place_id: 1, slug:... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T18:23:16.453

错误的 CAST .. 应该在过滤器值上完成......而不是在 db 记录属性上......

范围：starting_at_between, lambda {|start_time, end_time| 其中（“CAST（？AS TIME）<= starts_at <= CAST（？AS TIME）”，Event.db_time（start_time），Event.db_time（end_time））}

# http - HTTP 语言表示

> ID：13729534
> 
> 赞同：0
> 
> 时间：2012-12-05T18:01:40.400
> 
> 标签：http, rest, web

在 HTTP 语言中，以下几行表示对文章集合的 GET 请求：

```
GET /articles HTTP/1.1
Accept: application/json; level=1
Host: example.com 
```

但是，在这种语言中，我们如何通过带有数据的 POST 来表达请求呢？有官方规格吗？谢谢你。

**编辑**

使用`curl`，这样的请求可能是：

```
curl  -H 'Accept: application/json; level=1' \
      -X POST \
      -d '<json>' \
      http://example.com/articles 
```

...`<json>`可能在哪里：

```
{
  "article": {
    "title": "foo"
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T18:07:05.210

此示例可以是`POST`一个空正文，因为您的请求仅由 HTTP 标头组成。但我不推荐这个。[您可以在RFC](http://www.w3.org/Protocols/rfc2616/rfc2616.html)
中阅读有关 HTTP 的信息

# iphone - UITableView 在点击时并不总是触发委托方法

> ID：13729535
> 
> 赞同：0
> 
> 时间：2012-12-05T18:01:41.463
> 
> 标签：iphone, objective-c, ios, uitableview, ios6

我有一个 UITableView 设置了一些自定义单元格。

我打开了单元格突出显示只是为了测试目的，这样我就可以看到单元格正在响应我的触摸。

单元格将突出显示，但表格视图不会触发`didSelectRowAtIndexPath`或`willSelectRowAtIndexPath`除非我长时间点击并按住单元格（> 3 秒）。

知道为什么代表不按正常水龙头开火吗？

我在想这可能是由于复杂的视图层次结构，但我的层次结构并不是很疯狂。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T18:16:07.893

从评论中......

延迟似乎是由多个手势处理程序的交互引起的。这个概念是，如果轻击可能是一个简单的手势或更复杂的手势的开始，则操作系统必须等到复杂的手势不再可能（超时）才能确定简单的手势是正确的并且应该交付。

# html - 将简单的 HTML 转换为 RichTextBlock

> ID：13729540
> 
> 赞同：8
> 
> 时间：2012-12-05T18:02:07.010
> 
> 标签：html, wpf, xaml, windows-8, richtextblock

我从 Windows 8 开始，我正在尝试将 HTML 转换为`RichTextBlock`.

我[读过](https://stackoverflow.com/questions/11491134/how-to-show-basic-html-windows8-metro-style-textblock)我可以使用这个函数： `HtmlUtilities.ConvertToText`在 a`TextBlock`但我找不到在 a 中使用这个函数的方法`RichTextBlock`！

根据我的理解和尝试，[我无法扩展](http://geoffwebbercross.blogspot.pt/2011/09/richtextblock-xaml-bindable-rich-text.html)，`RichTextBlock`因此每次调用 a 时我都无法应用此功能`RichTextBlock`。

此外，我找不到任何方法将文本绑定到 a`RichTextBlock`并且仅为简单的 HTML[构建解析器](https://stackoverflow.com/questions/13088034/showing-html-in-winrt-with-richtextblock-or-other-component)（我只想要段落和斜体/粗体）似乎有点矫枉过正。另外，我不知道应该在哪里进行解析，因为我`RichTextBlock`似乎无法扩展。

我不能使用，`WebView`因为我**需要**透明度（从我读过的内容来看， [WebView 没有](http://social.msdn.microsoft.com/Forums/nl-BE/winappswithcsharp/thread/c47c0f2e-b2c7-4691-8a20-929174504877)）。

**编辑**

@mydogisbox 让我看到我的研究走得太远了。

我可以`HtmlUtilities.ConvertToText`在可以绑定到`RichTextBlock`. 我无法绑定它，因为我试图在 `<Run Text="{Binding TextHTML}" />`没有`<Paragraph>`标签的情况下进行。

但是`HtmlUtilities.ConvertToText`不保留斜体或粗体。只有段落：/。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T12:19:34.103

我最终使用了[gitHub 上的一个包，它将](https://github.com/MacawNL/WinRT-RichTextBlock.Html2Xaml)HTML 转换为 RickTextBlock。

基本上您只需要打开包管理器控制台（工具 > 库包管理器 > 包管理器控制台）并[安装](http://nuget.org/packages/RichTextBlock.Html2Xaml)运行的包`Install-Package RichTextBlock.Html2Xaml`。

然后你打开 RichTextBlockProperties.cs 并且你有你需要复制的行。就我而言，我必须添加命名空间：

```
xmlns:rtbx="using:EventTests.Common" 
```

然后您可以使用以下方法绑定具有 HTML 的属性：

```
<RichTextBlock rtbx:Properties.Html="{Binding ...}"/> 
```

**一些问题和一些解决方案**

我发现这个库的一个问题是它如何处理没有 div 的简单 html。像：

```
<p>Testing <i>italic</i> and something more.</p>
<p>More testing </p> 
```

这打印：

> 测试*斜体*等等。
> 更多测试

但是，我想要这样的东西：

> 测试*斜体*等等。
> 
> 更多测试

所以我不得不将第二段包装在一个 div 中（并且除了第一段之外的所有段落都可以包装）。

```
<p>Testing <i>italic</i> and something more.</p>
<div><p>More testing </p></div> 
```

If you wrap the first paragraph then you will have an extra new line.

So far this is the best solution I have found. If you find better I apreciate it since I am testing and learning. If you find a better solution I will accept yours.

**Be carefull**

This approach will crash if you have symbols like "<" or "&" in your html. I suggest that you replace those chars before you try to use this library.

# regex - 结合所有搜索模式 -TCL regexp

> ID：13729543
> 
> 赞同：0
> 
> 时间：2012-12-05T18:02:17.630
> 
> 标签：regex, tcl

如何在一个正则表达式命令中组合所有模式？有办法吗？

示例：如果我的变量是“a”并且如果我需要检查“a”是否有多个模式，如何在单个命令中执行此操作？我尝试了类似的东西

```
 set a abc
    regexp ".abc | abc. | .abc." $a 
```

This returned 1 as output. But it should be zero as all my patterns has a "." and not matching with $a

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T07:21:16.457

您失败了，因为空格字符代表正则表达式中的空格字符。所以你的正则表达式：

```
regexp ".abc | abc. | .abc." $a 
```

在寻找：

```
"anything" followed by "a" then "b" then "c" then " "
OR
" " followed by "a" then "b" then "c" then "anything" then " "
OR
" " followed by "anything" then "a" then "b" then "c" then "anything" 
```

显然，字符串“abc”不匹配上述任何模式，原因如下：

1.  它不包含所有 3 个条件所需的任何空格字符（在正确的位置）。
2.  “a”之前没有字符来匹配模式 1 和 2，“c”之后没有字符来匹配模式 2 和 3

你可能想要的是这样的：

```
regexp ".abc|abc.|.abc." $a 
```

但上面仍然不匹配“abc”。它将匹配“abcd”，因为“c”之后有一个额外的字符。要匹配“abc”，您还需要：

```
regexp ".abc|abc.|.abc.|abc" $a 
```

但我怀疑这是一个小问题。您问题的核心是您没有意识到正则表达式还将空格解释为要搜索的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T05:39:00.703

我可以推荐 OpenBSD 的[re_format(7)](http://www.openbsd.org/cgi-bin/man.cgi?query=re_format&apropos=0&sektion=0&manpath=OpenBSD%20Current&arch=i386&format=html)手册页，以获得非常紧凑和正确的 POSIX 正则表达式参考。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T18:39:57.697

如果我为每个搜索模式使用括号，它就可以工作

```
 regexp "(.abc)|(abc.)|(.abc.)" $a 
```

# r - R与自身合并

> ID：13729545
> 
> 赞同：4
> 
> 时间：2012-12-05T18:02:21.040
> 
> 标签：r, data-manipulation

我可以合并数据吗

```
name,#797,"Stachy, Poland"
at_rank,#797,1
to_center,#797,4.70
predicted,#797,4.70 
```

根据第二列并取第一列作为列名？

```
 name             at_rank to_center predicted
#797 "Stachy, Poland" 1       4.70      4.70 
```

根据要求，整套数据：[http ://sprunge.us/cYSJ](http://sprunge.us/cYSJ)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T18:35:01.710

如果您的带逗号的字符串被引用（它们似乎是），则读取数据的第一个问题应该不是问题。使用`read.csv`with`header=FALSE`参数可以解决您共享的数据的问题。（当然，如果数据文件有标题，请删除该参数。）

从那里，你有几个选择。这里有两个。

1.  `reshape`(base R) 适用于此：

    ```
    myDF <- read.csv("http://sprunge.us/cYSJ", header=FALSE)
    myDF2 <- reshape(myDF, direction="wide", idvar="V2", timevar="V1")
    head(myDF2)
    #    V2                V3.name V3.at_rank V3.to_center V3.predicted
    # 1  #1                Kitoman          1         2.41         2.41
    # 5  #2                Hosaena          2         4.23         9.25
    # 9  #3 Vinzelles, Puy-de-Dôme          1         5.20         5.20
    # 13 #4     Whitelee Wind Farm          6         3.29         8.07
    # 17 #5    Steveville, Alberta          1         9.59         9.59
    # 21 #6        Rocher, Ardèche          1         0.13         0.13 
    ```

2.  该`reshape2`软件包在这些情况下也很有用。它的语法更简单，输出也更“干净”（至少在变量名方面）。

    ```
    library(reshape2)
    myDFw_2 <- dcast(myDF, V2 ~ V1)
    # Using V3 as value column: use value.var to override.
    head(myDFw_2)
    #       V2 at_rank                                       name predicted to_center
    # 1     #1       1                                    Kitoman      2.41      2.41
    # 2    #10       4                            Icaraí de Minas      6.07      8.19
    # 3   #100       2        Scranton High School (Pennsylvania)      5.78      7.63
    # 4  #1000       1                  Bat & Ball Inn, Clanfield      2.17      2.17
    # 5 #10000       3                                     Tăuteu      1.87      5.87
    # 6 #10001       1 Oak Grove, Northumberland County, Virginia      5.84      5.84 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T18:20:26.680

看看`reshape`哈德利的包裹。如果我理解正确，您只是将数据从长转向宽。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T18:27:14.140

我认为在这种情况下，您真正​​需要做的就是转置，转换为 data.frame，将 colnames 设置为第一行，然后删除第一行。可能可以通过 data.frame 的某些参数组合跳过最后一步，但我不知道它们现在是什么。

# java - 在多维数组中实现 Rook 逻辑

> ID：13729546
> 
> 赞同：3
> 
> 时间：2012-12-05T18:02:24.980
> 
> 标签：java, multidimensional-array

我有一个问题一直想弄清楚，但我被困住了。基本上，我一直在尝试在不是国际象棋的游戏中实现车的移动逻辑，但我坚持下去。我给你详细的：

*   棋盘是一个 5x5 多维数组，其中每个玩家只有棋子和车
*   目标是夺取对手的所有棋子，夺取所有棋子的一方将赢得比赛。
*   Rooks 可以向一个方向任意移动，直到撞到挡住他们去路的东西。

我的车现在做的事情是它可以向一个方向行驶，但它可以在那条线上的任何地方行驶。我需要帮助来尝试弄清楚如何添加更多逻辑以确保它只能在路径清晰的情况下运行。这是一个例子：

小“p”和“r”是玩家2的棋子，大“P”和“R”是玩家一的棋子。现在右上方的R（车）只能向右移动，但如果你这样做，它将超越棋子，然后可以尽可能地向下移动。

```
* R R R *
* P P P *
* * * * *
* p p p *
* r r r * 
```

这是我为车准备的代码：

```
public boolean isLegalMove(Location from,Location to)
{
  // Row is XPosition (Up/Down)
  // Column is YPosition(Left/Right)

  int fromRow = from.getXPosition();
  int fromColumn = from.getYPosition();
  int toRow = to.getXPosition();
  int toColumn = to.getYPosition();

  // higher row or column or both
  if(((fromColumn >= toColumn) || (fromColumn <= toColumn)) && ((fromRow == toRow))) {
    return true;
  }
  if(((fromRow >= toRow) || (fromRow <= toRow)) && ((fromColumn == toColumn))) {
    return true;
  }
  return false; 
} 
```

我想我会做另一种方法来检查逻辑是否有任何东西在路径中，调用它`isPathClear()`

编辑：
这是其余的代码：

```
 public class Board
  {
    // The depth and width of the field.
    public static final int ROW = 5;
    public static final int COLUMN = 5;
    public static final String EMPTYPIECE = " * ";

     //Storage for the game pieces
     private GamePiece [] [] gameBoard;
     //Makes the balls and torches for player1
     private Pawn1 p1Pawn1,p1Pawn2,p1Pawn3;
     private Rook1 p1Rook1,p1Rook2,p1Rook3;

     //Makes the ball and torchers for player2
     private Pawn2 p2Pawn1,p2Pawn2,p2Pawn3;
     private Rook2 p2Rook1,p2Rook2,p1Rook3;

/**
 * Makes a 5x5 Gameboard
 */
public Board()
{
    // initialise instance variables
    gameBoard = new GamePiece [ROW][COLUMN];

    //Makes pieces for player1
    p1Pawn1 = new Pawn1();
    p1Pawn2 = new Pawn1();
    p1Pawn3 = new Pawn1();
    p1Rook1 = new Rook1();
    p1Rook2 = new Rook1();
    p1Rook3 = new Rook1();

    //Makes pieces for player2
    p2Pawn1 = new Pawn2();
    p2Pawn2 = new Pawn2();
    p2Pawn3 = new Pawn2();
    p2Rook1 = new Rook2();
    p2Rook2 = new Rook2();
    p2Rook3 = new Rook2();
}

/**
 * Makes new games
 */
public void newGame()
{  
    // Assigns the piece of the board for player1
    gameBoard[0][1] = p1Rook1;
    gameBoard[0][2] = p1Rook2;
    gameBoard[0][3] = p1Rook3;
    gameBoard[1][1] = p1Pawn1;
    gameBoard[1][2] = p1Pawn2;
    gameBoard[1][3] = p1Pawn3;

    // Assigns the pieces of the board for player2
    gameBoard[4][1] = p2Rook1;
    gameBoard[4][2] = p2Rook2;
    gameBoard[4][3] = p2Rook3;
    gameBoard[3][1] = p2Pawn1;
    gameBoard[3][2] = p2Pawn2;
    gameBoard[3][3] = p2Pawn3;
}

/**
 * Displays the content of the board
 */
public void displayBoard()
{
    System.out.println("  a  b  c  d  e");
    int counter = 1;
    for (int i = 0; i < gameBoard.length; i++){
       System.out.print(counter);
       for (int j = 0; j < gameBoard[i].length; j++) {
           if (gameBoard[i][j] == null) {
              System.out.print(EMPTYPIECE);
           } else {
               System.out.print(" " + gameBoard[i][j] + " ");
           }
       }
       counter++;
       System.out.println();
    }
}

/**
 * Moves the movepiece from one locatin to another
 * @param from - where the location was from
 * @param to - Where the location is going to
 */
public void movePiece(Location from,Location to) throws InvalidMoveException
{
    int fromRow     = from.getXPosition();
    int fromColumn  = from.getYPosition();
    int toRow       = to.getXPosition();
    int toColumn    = to.getYPosition();

    if (gameBoard[fromRow][fromColumn] == null) {
        throw new InvalidMoveException("Invalid input for source location.");
    }
    if (! checkBounds(from, to)) {
        throw new InvalidMoveException("Invalid input for destination location.");
    }
    if (isSameLocation(from, to)){
        throw new InvalidMoveException("Invalid move, source and destination cannot    bethe same.");
    }
    if (! gameBoard[fromRow][fromColumn].isLegalMove(from, to)) {
        throw new InvalidMoveException("Invalid move for this piece.");
    }
       gameBoard[toRow][toColumn] = gameBoard[fromRow][fromColumn];
       gameBoard[fromRow][fromColumn] = null;

   displayBoard();
}

/**
 * Checks a proposed move to ensure it is within the bounds of the board.
 * @param source location, destination location
 * @return true if both source and destination are within bounds
 */
private boolean checkBounds(Location from, Location to)
{
    int fromRow     = from.getXPosition();
    int fromColumn  = from.getYPosition();
    int toRow       = to.getXPosition();
    int toColumn    = to.getYPosition();

    boolean testFrom = (fromRow >= 0) && (fromColumn >= 0) && (fromRow < gameBoard.length) && (fromColumn < gameBoard[0].length);
    boolean testTo = (toRow >= 0) && (toColumn >= 0) && (toRow < gameBoard.length) && (toColumn < gameBoard[0].length);
    return testFrom && testTo;
}

/**
 * Checks a proposed move to ensure source and destination are different.
 * @param source location, destination location
 * @return true if source and destination are the same
 */
private boolean isSameLocation(Location from, Location to)
{
    int fromRow     = from.getXPosition();
    int fromColumn  = from.getYPosition();
    int toRow       = to.getXPosition();
    int toColumn    = to.getYPosition();
    return fromRow == toRow && fromColumn == toColumn;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T18:07:43.730

如果不知道板上还有什么，您就无法知道路径是否清晰。但是，您的方法签名不会让此函数访问电路板的布局。如果你通过了整个棋盘，你可以使用一个循环来检查中间的所有方块是否有其他棋子。

* * *

来自托加姆斯勋爵：

> 您不会检查板是否为空。您必须检查车的源位置和目标位置之间的各个空间。

* * *

现在我知道了板子的样子，下面是一些代码：

```
public boolean isLegalMove(Location from,Location to)
{
  // Row is XPosition (Up/Down)
  // Column is YPosition(Left/Right)

  int fromRow = from.getXPosition();
  int fromColumn = from.getYPosition();
  int toRow = to.getXPosition();
  int toColumn = to.getYPosition();

  // Has to be same row or column
  if(fromRow != toRow || fromColumn != toColumn) return false;
  // Can't move to the same square
  if(fromRow == toRow && fromColumn == toColumn) return false;

  // Rows are the same
  if(fromRow - toRow == 0) {
    // this will hold the column of the we're going to check next
    int newPos = fromColumn;
    // Should we go up or down?
    int amount = (toColumn - fromColumn < 0) ? -1 : 1;
    while(newPos != toColumn) {
      newPos += amount;
      // if it's not null, we found a different piece
      if(gameBoard[fromRow][newPos] != null) return false;
    }
    if(gameBoard[toRow][toColumn] != null) {
      // return false if it's your own piece, true if it's not
    }
  // Columns are the same
  } else {
    // this will hold the row of the we're going to check next
    int newPos = fromRow;
    // Should we go up or down?
    int amount = (toRow - fromRow < 0) ? -1 : 1;
    while(newPos != toRow) {
      newPos += amount;
      // if it's not null, we found a different piece
      if(gameBoard[newPos][fromColumn] != null) return false;
    }
    if(gameBoard[toRow][toColumn] != null) {
      // return false if it's your own piece, true if it's not
    }
  }

  return true;
} 
```

* * *

针对您希望能够捕获对手的棋子的情况进行了编辑......但我没有输入最后一点代码，因为您必须再次更改方法签名。寻找我的评论。还要注意它`while`现在是一个循环，而不是`do-while`.

# html - crossbrowser css cursor for ondrag (dragdrop allowed) event?

> ID：13729547
> 
> 赞同：0
> 
> 时间：2012-12-05T18:02:27.163
> 
> 标签：html, css, drag-and-drop, cursor

In win32 there is system cursor (see below)

![this is system cursor for ondrag event taken from delphi IDE](../Images/f61145ce65e8fe2994348291b18e117f.png)

Is there any way to use this cursor in opera, IE and other browsers, using css?

I've tried everything, the closest is CSS's "cursor:copy", but that is not that what I need.

PS can't use url() fo cursor style, cause it's completely unsupported by opera browser.

# javascript - 带有 modalbox jQuery UI 的异步代码

> ID：13729548
> 
> 赞同：0
> 
> 时间：2012-12-05T18:02:27.970
> 
> 标签：javascript, jquery, jquery-ui

我正在打开一个 jQuery 模态框，如下所示：

```
jQuery ("myDialog").dialog ({
  open: function () {
     jQuery(this).load('loadDataFromServer.htm');
  }
}); 
```

复杂的部分是其中`loadDataFromServer.htm`也有一些 ajax 调用。因此，对话框每次都会打开，但是对话框内的内容（来自`loadDataFromServer.htm`）只是间歇性地显示。

我怀疑这是因为 ajax 调用的异步特性。是否有最佳实践来很好地管理这一点？

# linq - 使用 LINQ 进行子选择

> ID：13729550
> 
> 赞同：0
> 
> 时间：2012-12-05T18:02:45.380
> 
> 标签：linq

我想用 LINQ 做一个子选择

**我有什么，但不正确**

```
var diretores = from item in db.San_PropostaConversa
                join sc in db.San_Credenciada
                    on (item.Credenciada_Id) equals sc.Credenciada_Id
                join sp in db.San_Proposta
                    on (item.Proposta_Id) equals sp.Proposta_Id
                join si in db.San_Imovel
                    on (sp.Imovel_Id) equals si.Imovel_Id
                join su in db.San_Usuario
                    on (item.Usuario_Id) equals su.Usuario_Id
                where item.Proposta_Id == proposta
                orderby item.DataHora descending
                select new
                {
                    sc.Apelido,
                    su.NomeCompleto,
                    su.DescricaoCargo1,
                    item.Comentario,
                    item.DataHora,
                    sp.Imovel_Id,
                    CredenciadaCaptadora_Id = si.Credenciada_Id,
                    item.Credenciada_Id,
                    (from item2 in db.San_Usuario
                     where item2.Cargo_Id == 9
                        && item2.Excluido == 0
                        && item2.Credenciada_Id == item.Credenciada_Id
                     select item2.Email)
                }; 
```

在我的`SELECT`声明中，我想在我的`WHERE`条款中指定的一些条件之后恢复一个电子邮件列。

**错误**

> 无效的匿名类型成员声明符。必须使用成员分配、简单名称或成员访问来声明匿名类型成员

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-29T14:53:31.770

您的 linq 表达式中有 2 个问题：

1.  您需要将子查询的结果分配给新匿名类型的成员。
2.  我认为您只想使用子查询选择 1 封电子邮件，因此您需要使用`Single()`/`SingleOrDefault()`或`First()`/ `FirstOrDefault()`。

试试这个：

```
var diretores = from item in db.San_PropostaConversa
                join sc in db.San_Credenciada
                    on item.Credenciada_Id equals sc.Credenciada_Id
                join sp in db.San_Proposta
                    on (item.Proposta_Id) equals sp.Proposta_Id
                join si in db.San_Imovel
                    on sp.Imovel_Id equals si.Imovel_Id
                join su in db.San_Usuario
                    on item.Usuario_Id equals su.Usuario_Id
                where item.Proposta_Id == proposta
                orderby item.DataHora descending
                select new
                {
                    Apelido = sc.Apelido,
                    NomeCompleto = su.NomeCompleto,
                    DescricaoCargo1 = su.DescricaoCargo1,
                    Comentario = item.Comentario,
                    DataHora = item.DataHora,
                    Imovel_Id = sp.Imovel_Id,
                    CredenciadaCaptadora_Id = si.Credenciada_Id,
                    Credenciada_Id = item.Credenciada_Id,
                    Email = (from item2 in db.San_Usuario
                             where item2.Cargo_Id == 9
                                && item2.Excluido == 0
                                && item2.Credenciada_Id == item.Credenciada_Id
                             select item2.Email).FirstOrDefault()
                }; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-29T14:18:21.413

主要是由于分配变量不可用而发生此错误，请尝试此操作对您有帮助

```
var diretores = from item in db.San_PropostaConversa
                        join sc in db.San_Credenciada
                        on (item.Credenciada_Id) equals sc.Credenciada_Id
                        join sp in db.San_Proposta
                        on (item.Proposta_Id) equals sp.Proposta_Id
                        join si in db.San_Imovel
                        on (sp.Imovel_Id) equals si.Imovel_Id
                        join su in db.San_Usuario
                        on (item.Usuario_Id) equals su.Usuario_Id
                        where item.Proposta_Id == proposta
                        orderby item.DataHora descending
                        select new
                        {
                        Apelido=sc.Apelido,
                        NomeCompleto=su.NomeCompleto,
                        DescricaoCargo1=su.DescricaoCargo1,
                        Comentario=item.Comentario,
                        DataHora=item.DataHora,
                        Imovel_Id=sp.Imovel_Id,
                            CredenciadaCaptadora_Id = si.Credenciada_Id,
                        Credenciada_Id= item.Credenciada_Id,
                          result=  (from item2 in db.San_Usuario
                                 where item2.Cargo_Id == 9
                                 && item2.Excluido == 0
                                 && item2.Credenciada_Id == item.Credenciada_Id
                                 select item2.Email)
                        }; 
```

# ksoap2 - 使用 KSOAP2 Android 绑定嵌套的复杂对象

> ID：13729552
> 
> 赞同：0
> 
> 时间：2012-12-05T18:02:52.057
> 
> 标签：ksoap2, android-ksoap2

我正在尝试使用 ksoap2-android 将来自 WS 的 XML 响应绑定到一组 POJO 类。
互联网上的许多示例都处理了[像这样](http://seesharpgears.blogspot.fr/2010/10/ksoap-android-web-service-tutorial-with.html)的非常简单的响应。
然而，就我而言，我有很多自定义类，它们保持相互引用，有时甚至在数组列表中。

这就是我想要做的，我想绑定这种响应：

```
<Car number="35">
    <Engine>
        [...]
    </Engine>
    <Passenger id="1">
        [...]
    </Passenger>
    <Passenger id="2">
        [...]
    </Passenger>
</Car> 
```

对于这种类：

```
public class Car {

    private int number;
    private Engine engine;
    private ArrayList<Passenger> passengers;

} 
```

如果可能的话，只修改 POJO 文件（简单 XML 注释系统非常优雅，可惜在 ksoap 中没有与此等效的功能）。

我查看了 KVMSerializable 接口，但是当我尝试覆盖 getPropertyInfo() 方法时，我不知道应该在 PropertyInfo.type 中返回什么以及 ksoap 将如何处理 ArrayLists。

我现在很头疼，请帮帮我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T10:06:48.390

请访问以下 URL 并阅读。 [http://www.c-sharpcorner.com/UploadFile/88b6e5/how-to-call-web-service-in-android-using-soap/](http://www.c-sharpcorner.com/UploadFile/88b6e5/how-to-call-web-service-in-android-using-soap/)

感谢 Ashok Parmar Traction Software Co.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T16:44:53.387

您应该阅读ksoap 2[中的文档](http://code.google.com/p/ksoap2-android/w/list)，其中有许多有用的示例。
要获取复杂类型的数组，您可以[在此处查看](http://code.google.com/p/ksoap2-android/wiki/CodingTipsAndTricks#sending/receiving_array_of_complex_types_or_primitives)
并且我已经使用[这种方法](https://stackoverflow.com/a/12912334/719212)来解析复杂对象。
如果它们都不起作用，您必须逐个字段从肥皂对象映射到您的 pojo。
**更新**：

> 非常感谢第三个链接，它非常有用，我现在可以映射自定义对象。但是，在您提供的 wiki 页面中，作者正在解析一组自定义类，包装在父元素中。有没有办法像我的示例中那样使用内联列表来做到这一点？

我以前从未尝试过，但我认为您可以将我的答案和维基结合起来。首先，您可以尝试 wiki 中的示例来实现您的乘客列表（扩展 Vector）。然后你可以使用我的方法来创建一个里面有arraylist的复杂对象。重要的是您必须使用来自 Web 服务的响应注册您的对象。像这样的东西：

```
 public class PassengerVector extends Vector<Passenger> implements KvmSerializable {    

 }

 envelope.addMapping(NAMESPACE, "Car", Car.class);
 envelope.addMapping(NAMESPACE, "Passenger", PassengerVector.class); 
```

但我不确定这种方式是否可行。对于像您的示例这样非常复杂的对象，我建议您应该按名称逐个字段获取数据，就像[wiki](http://code.google.com/p/ksoap2-android/wiki/CodingTipsAndTricks#Manual_Parsing_of_an_Array_of_into_an_POJO_array)

# algorithm - 基于非文字比较的快速搜索方法

> ID：13729553
> 
> 赞同：1
> 
> 时间：2012-12-05T18:03:03.280
> 
> 标签：algorithm, search-engine, string-comparison, levenshtein-distance, text-analysis

基于非文字比较的快速搜索方法

我正在对相当大的数据集（基本上所有字符串）进行小型搜索。表字段之间的关系很简单，尽管比较不能是字面的。即它应该能够关联“filippo”、“philippo”、“filipo”等等。

我找到了一些可以做到的方法，经常绊倒莱文斯坦距离（[this](http://en.wikipedia.org/wiki/Levenshtein_distance)、[here](https://stackoverflow.com/questions/11675034/string-similarity-levenshtein-distance)和[here](https://stackoverflow.com/questions/4588541/hamming-distance-vs-levenshtein-distance)），尽管我不确定它在我的具体情况下是否实用。

简而言之，我有两个表，一个带有“搜索键”的小表和一个更大的表，应该在其中执行搜索。两个表具有相同的字段，并且它们都具有相同的“含义”。例如

```
KEYS_TABLE
# | NAME  | MIDNAME | SURNAME | ADDRESS         | PHONE
1 | John  | Fake    | Doe     | Sesame St.      | 333-12-32
2 | Ralph | Stue    | Michel  | Bart. Ghost St. | 778-13000
... 
```

和

```
SEARCH_TABLE
#   | NAME     | MIDNAME | SURNAME | ADDRESS         | PHONE
...
532 | Jhon     | F.      | Doe     | Sesame Street   | 3331232
...
999 | Richard  | Dalas   | Doe     | Sesame St.      | 333-12-32 
```

我想要做的就是获取某种度量，或者为每个给定记录的排名`KEYS_TABLE`，报告来自`SEARCH_TABLE`某个相关性以上的所有记录（由度量或简单的一些“KNN”之类的方法定义）。

我说莱文斯坦距离可能不实用，因为它需要计算`KEYS_TABLE`x中每一行中的每个字段`SEARCH_TABLE`。考虑到它`SEARCH_TABLE`有大约 4 亿条记录并且`KEYS_TABLE`从 100k 到 100 万不等，结果数字太大了。

我希望有一些方法可以让我以前丰富这两个表，或者一些更简单（更便宜）的方法来执行搜索。

值得一提的是，我可以随意转换数据。例如规范化`St.`到`st`，`Street`到`st`，删除特殊字符等等。

我的选择是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T01:04:03.540

根据可能的拼写错误，您可以使用 Soundex 或 Metaphone 进行搜索。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T18:29:16.657

我能想到的一种方法（启发式！）是：

除了表中的原始字段外，每个字段还存储其通过某种[词干](http://en.wikipedia.org/wiki/Stemming)算法获得的*规范化形式。*如果您使用的是 java，lucene可能会帮助您完成这一步。[`EnglishAnalyzer`](http://lucene.apache.org/core/old_versioned_docs/versions/3_1_0/api/all/org/apache/lucene/analysis/en/EnglishAnalyzer.html)

使用标准方法进行*精确比较*`table1`，以查找候选人列表中的每个条目。如果一个条目有一些通用字段，其中规范化形式与常规形式相匹配，则`e2`该条目`table2`将是一个候选条目`e1`。`table1`这可以使用一些允许快速字符串搜索的数据结构有效地完成 - 有很多这样的。

对于每个条目`e1`- 使用您选择的确切指标（例如您建议的 leneshtein 距离）在列表中找到它的“最佳”候选者

如果这是一个问题，您可能需要进行一些后处理以确保没有两个元素`table1`映射到 中的同一个元素。`table2`

# logging - 如何在 AWK 中将花费在任务上的小时数和分钟数相加？

> ID：13729555
> 
> 赞同：0
> 
> 时间：2012-12-05T18:03:06.680
> 
> 标签：logging, awk, timestamp, gawk, time-tracking

时间跟踪工具[打](http://code.google.com/p/punch-time-tracking/)孔生成一个包含任务和时间戳的时间日志，如“yyyymmddThhmmss”：

```
task    started         ended
---------------------------------------
task1   20121107T114348 20121107T120921
task2   20121107T121349 20121107T121430
task2   20121107T121658 20121107T124255
task1   20121107T140935 20121107T144153
task2   20121107T163449 20121107T180431 
```

我如何总结**在正则表达式中指定的**每项任务上花费的总小时数和分钟数？例如，将花费在包含`my-regex`、`awk`or`gawk`命令的任务上的时间加起来是这样的：

```
awk '/my-regex/ { summing-of-corresponding-timestamps }' logfile.log 
```

这是对[我之前的问题](https://stackoverflow.com/questions/13547138/how-to-analyze-time-tracking-reports-with-awk)的补充——我意识到我需要一个更“强大”、基于正则表达式的解决方案。但我不是编码员，所以在 AWK 中总结分钟和小时让我非常困惑。谢谢你的帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T21:26:29.307

用 GNU awk 试试这个，我没有检查过数学：

```
$ cat tst.awk
NR<3{ next }
{
   start = mktime(gensub(/(....)(..)(..).(..)(..)(..)/,"\\1 \\2 \\3 \\4 \\5 \\6","",$2))
   end   = mktime(gensub(/(....)(..)(..).(..)(..)(..)/,"\\1 \\2 \\3 \\4 \\5 \\6","",$3))
   dur[$1] += end - start
}
END {
   for (task in dur)
      print task, dur[task]
}
$
$ gawk -f tst.awk file
task1 3471
task2 6980 
```

几秒钟内的输​​出，按摩以适应...

编辑：要获得满足某些 RE 的所有任务的总持续时间是：

```
NR<3{ next }
$1 ~ re {
   start = mktime(gensub(/(....)(..)(..).(..)(..)(..)/,"\\1 \\2 \\3 \\4 \\5 \\6","",$2))
   end   = mktime(gensub(/(....)(..)(..).(..)(..)(..)/,"\\1 \\2 \\3 \\4 \\5 \\6","",$3))
   dur += end - start
}
END {
   print dur
}

$ gawk -v re='<specify your RE>' -f tst.awk file 
```

***史蒂夫的编辑：***

这个答案几乎就在那里。我做了一些小改动，结合了上面/下面评论中的信息。您可以根据需要更改正则表达式，例如：

```
awk '/task/ { a = "(....)(..)(..).(..)(..)(..)"; b = "\\1 \\2 \\3 \\4 \\5 \\6"; t += mktime(gensub(a, b, "", $NF)) - mktime(gensub(a, b, "", $(NF-1))) } END { print t }' file 
```

结果：

```
10451 
```

# vba - 我需要结合 MS Access 和 MS Outlooks 数据收集功能创建自定义（邮件合并）电子邮件

> ID：13729556
> 
> 赞同：2
> 
> 时间：2012-12-05T18:03:07.833
> 
> 标签：vba, ms-access, outlook, outlook-2007

我正在使用 Microsoft Access 2007 和 Microsoft Outlook 2007 提供的数据收集功能来发送电子邮件并从收件人那里收集数据。然后将数据存储在访问表中。

我正在使用的功能在这里解释得很好： [使用电子邮件收集数据](http://office.microsoft.com/en-us/access-help/collect-data-by-using-e-mail-messages-HA010015427.aspx)

我遇到的问题是，除了电子邮件地址之外，没有办法自定义正在分发的电子邮件。我希望完成的是能够基本上进行各种邮件合并以个性化电子邮件。使用随附文章中描述的向导似乎无法做到这一点。这是我可以通过 Visual Basic 或 MS Office 中的其他方式完成的事情吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T13:37:04.257

如果您选择了 HTML 选项，您将只获得文本框，并且如果直接从 Access 发送，则无法自定义电子邮件。如果您未指定电子邮件地址，Access 将生成电子邮件，以便您可以输入收件人 - 您可以在此时自定义电子邮件。

如果您确实想要所有花哨的东西（即自定义电子邮件、使用下拉菜单、是/否按钮、验证等），那么您需要使用 InfoPath 作为源（同样，如果使用 Access）。这是您可以使用验证和控件构建表单的应用程序。缺点是收件人需要在他们的机器上安装 InfoPath。

您当然可以创建一个应用程序来遍历您的记录，然后您可以随意自定义 HTML，

# asp.net - 设置为 false 时 ASP.net response.buffer 不起作用

> ID：13729557
> 
> 赞同：1
> 
> 时间：2012-12-05T18:03:09.403
> 
> 标签：asp.net, iis, windows-server-2008

从 IIS 6 升级到 IIS 7 后，我在 Web 浏览器中收到以下错误（Safari 和其他浏览器中的类似错误）：“无法解码原始数据”。通过更改暂时修复此错误：

```
response.buffer = false 
```

至

```
response.buffer = true 
```

我需要将其设置为“false”，以便在生成文件时显示文件，而不是一次全部显示（经过相当长的时间）。

我尝试增加 ApplicationHost.config 文件中的 bufferingLimit，但当 response.buffer 设置为“false”时，我仍然收到此错误。有谁知道这个问题可能来自哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-07-12T05:37:29.783

是的，这个问题是真的，我也遇到过这种问题，但想不出办法。'Response.Buffer= false' 不起作用的原因是微软在他们的更高版本 IIS 中修改了他们的代码，即 IIS 5.0-7.5，在这些版本的 IIS 中，Response.Buffer 正在按义务处理 true。所以这对 IIS 来说是一个误报设置，无论你设置 buffer OFF 还是 buffer.limit = 0。我认为微软把客户搞砸了，因为他们希望客户购买他们最新的软件。Response.buffer = false 可以使 Web 应用程序更强大，因此他们确实希望您在旧应用程序中再使用它。所以让我们说这是商业把戏。

# c - realloc 和缓冲区溢出

> ID：13729559
> 
> 赞同：5
> 
> 时间：2012-12-05T18:03:17.580
> 
> 标签：c

为什么`result`似乎没有重新分配？

```
 while (loc) {
    char nextLine[MAX_PATH_LEN + 30];
    sprintf(nextLine, "%s:%d\n", loc->item.pathname, loc->item.offset);
    DPRINTF('h', ("got next line\n"));
    while (spaceUsedUp + strlen(nextLine) > allocatedSize) {
      allocatedSize *= 2;
    }
    if (realloc(result, allocatedSize) == NULL) {
      perror("realloc");
    }
    DPRINTF('h', ("Next line length is %d\n", strlen(nextLine)));
    DPRINTF('h', ("Allocated size is %d\n", allocatedSize));
    DPRINTF('h', ("The size of the result is %d\n", strlen(result)));

    strcat(result, nextLine); // THIS LINE CAUSES THE BUFFER OVERFLOW                         

    spaceUsedUp += strlen(nextLine);
    DPRINTF('h', ("SpaceUsedUp is %d\n", spaceUsedUp));
    loc = loc->nextLocation;
  } 
```

输出是：

```
got next line
Next line length is 21
Allocated size is 100
The size of the result is 0
SpaceUsedUp is 21
got next line
Next line length is 21
Allocated size is 100
The size of the result is 21
SpaceUsedUp is 42
got next line
Next line length is 21
Allocated size is 100
The size of the result is 42
SpaceUsedUp is 63
got next line
Next line length is 21
Allocated size is 100
The size of the result is 63
SpaceUsedUp is 84
got next line
Next line length is 21
Allocated size is 200
The size of the result is 84
*** buffer overflow detected ***: ./proj3/disksearch terminated 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-05T18:05:06.797

您正在丢弃 realloc 返回的结果。您需要将该值分配给`result`. 典型用法如下所示：

```
if ((tmp = realloc(result, allocatedSize)) == NULL) {
      perror("realloc");
      /* more error handling here, including (usually) freeing result or exiting */
} else {
      result = tmp;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-05T18:05:30.810

[realloc](http://linux.die.net/man/3/realloc)返回一个指向重新分配的缓冲区的指针，并且可以释放原始缓冲区。这意味着

```
if (realloc(result, allocatedSize) == NULL) 
```

是错误的，因为它有效地丢弃了缓冲区，让您使用旧的、现在可能已释放的缓冲区。您看到的问题不是缓冲区溢出；相反，它是由于尝试写入您不再分配的内存而导致的未定义行为导致的崩溃。

您可以将代码更改为

```
void* tmp = realloc(result, allocatedSize);
if (tmp != NULL)
    result = tmp;
else    
    perror("realloc"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T18:18:59.590

realloc() 返回类型为 void*，它被强制转换为需求。并且这个指针指向大小为allocatedSize 的新内存。理想情况下 realloc 做四个操作，

1.  它创建指定大小的新内存。
2.  将旧内存中的内容复制到新内存。
3.  释放旧记忆
4.  返回新内存的地址

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T18:30:19.163

一定要喜欢[手册页](http://linux.die.net/man/3/realloc)，所有生命的答案都在那里……无论如何，重要的答案。

> **返回值**
> malloc() 和 calloc() 函数返回一个指向已分配内存的指针，该指针适合任何类型的变量对齐。出错时，这些函数返回 NULL。NULL 也可以通过成功调用 malloc() 且大小为零，或成功调用 calloc() 且 nmemb 或大小等于 0 来返回。free() 函数不返回任何值。
> 
> realloc() 函数返回一个指向新分配内存的指针，该指针适合任何类型的变量对齐，**并且可能与 ptr 不同**，如果请求失败，则返回 NULL。如果 size 等于 0，则返回 NULL 或适合传递给 free() 的指针。如果 realloc() 失败，原始块保持不变；它没有被释放或移动。

正如您所看到的，由于突出显示的部分，`malloc()`朋友在手册页中获得了唯一的条目，从返回的值可能与您传入的对内存的引用不同。这是一个重要的注意事项。`realloc()``realloc()`

所以在你的代码中：

```
if (realloc(result, allocatedSize) == NULL) {
  perror("realloc");
} 
```

你忽略了你真正关心的结果。检查`NULL`是好的，但您需要分配一些临时变量然后检查。
（请注意分配给临时变量的原因也在手册页中，如果`realloc()`失败`result`，只要您不覆盖它，您的缓冲区仍然会很好）

# c# - 获取运行 Sap 登录 vb6 到 c# 的 GuiApplication

> ID：13729561
> 
> 赞同：7
> 
> 时间：2012-12-05T18:03:23.060
> 
> 标签：c#, vb6, sap

我必须将 vb6 程序迁移到 C# .net 3.5 用户启动 SAP 登录并进行身份验证，然后他可以使用该工具使用该工具获取和插入数据问题：我可以使用反射创建一个新的 GuiApplication，但我可以't fetch 当前打开的 GuiSessions :/ 这是当前打开的 GuiApplication 和所有打开的 GuiSessions 的代码的 vb6 部分

```
Dim obj As Object
    Set obj = CreateObject("SAPGUI")
    Set obj = obj.GetScriptingEngine

    If TypeName(obj) = "GuiApplication" Then
        Set SapAutomationObject = obj
        SapAutomationObject.AllowSystemMessages = False

        Debug.Print "SAP Automation OK"
    End If 
```

我用反射试了一下：

```
 GuiApplication Application = (GuiApplication)System.Activator.CreateInstance(Type.GetTypeFromProgID("SapGui.S‌​criptingCtrl.1")); 
```

我有一个实例，但没有现有会话

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-02-24T20:37:18.567

```
public static void testConnection()
        {
            SapROTWr.CSapROTWrapper sapROTWrapper = new SapROTWr.CSapROTWrapper();
            object SapGuilRot = sapROTWrapper.GetROTEntry("SAPGUI");
            object engine = SapGuilRot.GetType().InvokeMember("GetSCriptingEngine", System.Reflection.BindingFlags.InvokeMethod,
                null, SapGuilRot, null);
            SAPconnection.sapGuiApp = engine as GuiApplication;
            GuiConnection connection = sapGuiApp.Connections.ElementAt(0) as GuiConnection;
            GuiSession session = connection.Children.ElementAt(0) as GuiSession;
            MessageBox.Show(session.Info.User + " !!||!! " + session.Info.Transaction);

        } 
```

使用此方法，您必须引用 SAP 安装的 sapgui 文件夹中的 SapROTWr.DLL。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-03-13T17:01:43.463

这对我有用（SAP 730 / Win7）：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using SAPFEWSELib;
using SapROTWr;

namespace FIT.SapHelper
{
    public static class stcSapHelper
    {
        public static void testConnection()
        {
            SapROTWr.CSapROTWrapper sapROTWrapper = new SapROTWr.CSapROTWrapper();
            object SapGuilRot = sapROTWrapper.GetROTEntry("SAPGUI");
            object engine = SapGuilRot.GetType().InvokeMember("GetScriptingEngine", System.Reflection.BindingFlags.InvokeMethod, null, SapGuilRot, null);
            GuiConnection connection = (engine as GuiApplication).OpenConnection("BOX DESCRIPTION");
            GuiSession session = connection.Children.ElementAt(0) as GuiSession;
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-10T15:42:25.453

假设 SAPGUI 是一个 COM 对象，那么您应该能够对其进行引用并将其创建为新对象，而无需使用反射。即使用早期绑定而不是后期绑定，即使原始 VB6 代码使用“后期绑定”

其次，假设后期绑定，`Type.GetTypeFromProgID("SapGui.S‌criptingCtrl.1")`片段不应该`Type.GetTypeFromProgID("SapGui")`与原始的 VB6 匹配吗？您可能需要检查 SAPGUI 的对象模型，以确保您引用了正确的对象。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-14T06:20:56.127

我发现使用运行会话的唯一解决方案是将代码加载到 dll 中并通过 c# 访问它

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-14T06:35:05.177

SAP 发布了 SAP .NET 连接器，以提供从 .NET 应用程序内部与 SAP 系统交互的标准化方式。查看[http://service.sap.com/connectors](http://service.sap.com/connectors)，您必须是 SAP 合作伙伴才能访问该页面

# javascript - javascript中的数字格式（不能是函数）

> ID：13729563
> 
> 赞同：0
> 
> 时间：2012-12-05T18:03:27.283
> 
> 标签：javascript, number-formatting

我在尝试在我的代码中格式化数字时遇到问题，我不能让它看起来像“1.000,00”，我搜索了一些代码，但我只找到了函数，我不能使用函数，因为我的变量（valor）已经是在一个函数里面。

那么，有人可以帮我做一个代码（不是函数）来格式化我的变量（valor）从 1000 到 1.000,00 吗？

非常感谢你的耐心

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T18:10:31.523

即使您的变量已经在函数中，您仍然可以使用函数。相信我，如果您对任何功能的要求是它不能成为功能，那么您将无法开发任何软件。

# mysql - 如何在使用 SET 设置的 where 条件下获得变量的结果

> ID：13729566
> 
> 赞同：2
> 
> 时间：2012-12-05T18:03:37.523
> 
> 标签：mysql

我在获取以下查询的结果时遇到问题：

```
SELECT setting_value FROM system_settings WHERE setting_key='hold_series' INTO @Current; 
```

其中 'setting_value' 是文本数据类型，其值为

```
50472949,15804527,13613881,13607299,16226328,15774405,14416070.

SELECT * from users where Id in (@Current) [and some left joins]; 
```

结果只有一条记录，我确定我在 users 表中拥有所有记录。

如果我使用

```
SELECT * from users where Id in (50472949,15804527,13613881,13607299,16226328,15774405,14416070) 
```

使用左连接，结果是所有 7 行。:(

请让我知道我做错了什么......

谢谢，-乔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T19:38:48.810

尝试使用[FIND_IN_SET](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_find-in-set)

```
SELECT * from users where (FIND_IN_SET(id,@Current)>0) 
```

# javascript - 如何获取图像的实际宽度和高度

> ID：13729567
> 
> 赞同：1
> 
> 时间：2012-12-05T18:03:40.853
> 
> 标签：javascript, jquery

> **可能重复：**
> [在 Safari/Chrome 中使用 JavaScript 获取真实的图像宽度和高度？](https://stackoverflow.com/questions/318630/get-real-image-width-and-height-with-javascript-in-safari-chrome)

当图像在css中按比例缩小时，有没有办法使用jQuery知道图像的真实宽度和高度 - 没有任何额外的尺寸数据 - 任何链接或代码示例都会有所帮助，谢谢

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-05T18:06:36.730

尝试使用`naturalWidth`和`naturalHeight`。

```
var domElement = $('yourImage')[0]; // or document.getElementById('yourImageId');
domElement.naturalWidth
domElement.naturalHeight 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-05T18:10:04.767

尝试这样的事情：

```
$("<img/>").attr("src", imgSrc).load(function() {
        pic_real_width = this.width;   
        pic_real_height = this.height;          
    }); 
```

问题是，您只能在加载图像时访问图像的真实宽度和高度，您也可以在没有任何容器的情况下将图像加载到您看不到的地方并要求 ("img").css('width ')，但我认为这是一种更优雅的方式。希望这会有所帮助。

# .htaccess - 重写，以便您可以仅从文件夹名称访问页面

> ID：13729569
> 
> 赞同：1
> 
> 时间：2012-12-05T18:03:51.780
> 
> 标签：.htaccess

我需要为我的 .htaccess 创建一个重写规则

我需要访问这个页面：mydomain.com/activa/activa.php

通过输入：mydomain.com/activa

谢谢，安德鲁

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T18:13:50.860

```
RewriteEngine on
RewriteBase /
RewriteRule ^activa/?$ activa/activa.php 
```

应该管用。

# windows-phone-8 - 无法持久存储 IsolatedStorageSettings 数据 (C#)

> ID：13729574
> 
> 赞同：3
> 
> 时间：2012-12-05T18:04:34.670
> 
> 标签：windows-phone-8

我正在开发一个 windows phone 8 应用程序，它依赖于 IsolatedStorageSettings 来保存应用程序设置。我没有真正的设备，所以我使用模拟器来测试应用程序。应用程序设置在整个应用程序生命周期内正确保持，即使您通过导航到 Windows Phone 8 开始页面并重新运行它来退出应用程序也是如此。如果我关闭模拟器并重新运行应用程序，应用程序设置不会持续存在。

问题是：应用程序设置在关闭后是否会在真实设备中正确保留？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T18:33:57.477

是的。隔离存储在设备的电源开/关周期中保持不变。仅当用户从设备中删除（卸载）应用程序时，才会清除应用程序设置或独立存储。

# javascript - 响应式文本——未使用 FitText 和 FlexSlider 初始化的函数

> ID：13729577
> 
> 赞同：5
> 
> 时间：2012-12-05T18:04:44.863
> 
> 标签：javascript, jquery, html, css, responsive-design

我有一个使用 FlexSlider 的响应式滑块。我还希望每个滑块下的文本调整大小。FitText 不会在除第一张幻灯片之外的任何幻灯片上初始化，或者如果我调整窗口大小。我怎样才能使这项工作（没有 FOUC）？应该在 IE 8 和现代浏览器中工作。

[http://jsfiddle.net/simply_simpy/adtVP/11/](http://jsfiddle.net/simply_simpy/adtVP/11/)

**HTML**

```
 <div class="flexslider">
      <ul class="slides">
        <li>
            <figure>
              <img src="http://lorempixel.com/400/200/animals/" alt="" />
              <figcaption>
                <h1>Lorem ipsum dolor sit amet</h1>
                <p>consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco </p>
              </figcaption>
            </figure>
        </li>
        <li>
            <figure>
              <img src="http://lorempixel.com/400/200/sports/" alt="" />
              <figcaption>
                <h1>uis nostrud exercitation ullamco </h1>
                <p>Ut enim ad minim veniam, quis nostrud exercitation ullamco </p>
              </figcaption>
            </figure>
        </li>
        <li>
            <figure>
              <img src="http://lorempixel.com/400/200/people/" alt="" />
              <figcaption>
                <h1>ncididunt ut labore et dolore magna aliqua.</h1>
                <p>abore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco </p>
              </figcaption>
            </figure>
        </li>
      </ul>
    </div>​ 
```

**CSS**

```
 .flex-control-nav, .flex-control-paging {
        clear: both;
    }

    .flexslider {
        width: 100%;
    }

    .flexslider img {
      min-width: 100%;
    }
    h1 {
        font-size: 23px;
        width: 100%;
    }
    p {
        font-size: 16px;
        width: 100%;
    }
    .slides li {display: none} 
```

**JS**

```
$('.flexslider').flexslider();

$(".slides h1, .slides p").fitText();  ​ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T23:59:42.803

希望这会有所帮助[http://jsfiddle.net/adtVP/40/](http://jsfiddle.net/adtVP/40/)

路线图：

1.  阅读关于[`fitText`](http://css-tricks.com/fittext/)插件的 CSS 技巧的简短说明
2.  采用 Paul Irish 的跨浏览器实现来修复`resize`不同浏览器中的事件
3.  仅在此处从字体大小切换`px`到`em`（或任何其他相对值，如 %）：

    ```
    ...
    h1 {
        font-size: .5em;
        width: 100%;
    }
    p {
       font-size: .2em;
       width: 100%;
    }
    ... 
    ```

    对合适文本的调用方式进行了一些修改

    ```
    $(".slides").fitText(); 
    ```

这基本上会更新父级元素上的字体大小，这将对`em`基于子级的字体产生影响，这就是整个想法。

每次使用 Paul 的代码段调整窗口大小时，也会调用 fit Text。

就是这样，编码很粗糙，需要清理和浏览，但可以工作。

UPD：来自 fitText 的 github 源代码由于 mime 类型不匹配而在 IE 中被阻止，这导致了问题。作为替代解决方案，您可以只在 js 文件中包含正确类型的源代码，这样就可以了。

旧的**IE 不工作**的例子在这里[http://jsfiddle.net/adtVP/35/](http://jsfiddle.net/adtVP/35/)在这里记录一下，上面的新的用 IE 调试工具栏测试到 7 版本，肯定和真正的不一样浏览器，但到目前为止还不错。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-17T12:09:16.807

The CSS for Flexslider hides all the `li` elements which are then shown by `flexslider()`, so the text the `fitText()` is targeting can't be evaluated, unless it is in the first, initially visible slide. I tried working around this by running this before Flexslider:

```
var slider = $('.flexslider'),
    hiddenSlides = slider.find('.slides > li:not(".slides > li.flex-active-slide")'),
    text = hiddenSlide.find('.text');

hiddenSlide.show();

text.fitText();

hiddenSlide.hide(); 
```

This solved the issue on `load`. I also tried wrapping this in a function and calling it on the `resize` event, however this didn't work for me. If anyone can fill in the blanks, that would be great.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-09T19:54:17.300

```
$('.flexslider').flexslider({
before: function(slider) {
    $(".slides h1, .slides p").css("color","#ffffff"); 

  },

after: function(slider) {
    $(".slides h1, .slides p").css("color","#000000"); 
    $(".slides h1, .slides p").fitText(); 

  }
});

 $(".slides h1, .slides p").fitText(); 
```

# javascript - 简单的 AJAX responseText 不起作用

> ID：13729584
> 
> 赞同：0
> 
> 时间：2012-12-05T18:05:04.790
> 
> 标签：javascript, ajax, asp-classic

我有一个使用 AJAX 的 ASP（经典）页面，我正在尝试发送一条短信，然后收到一条回复说该消息已发送的消息，该短信已发送并且这有效，但该页面应该说该消息已发送但未发送。

编码：

```
 <%
    dim strURLinfo
    strURLinfo = "http://1.1.1.10:9187/sendsms?phone=" & Request.QueryString("phone") & "&password=TESTPASS&text=" & Request.QueryString("text")
'// EXAMPLE URL: http://1.1.1.10:9187/sendsms?phone=4041230207&password=TESTPASS&text=test
    %>
    <html>
    <meta http-equiv="PRAGMA" value="NO-CACHE">
    <head>
    <script type="text/javascript">
    //This is to AUTO resend every 20 seconds DISABLED ---> var int=self.setInterval("loadXMLDoc()",20000);
    function loadXMLDoc()
    {
    if (window.XMLHttpRequest)
      {// code for IE7+, Firefox, Chrome, Opera, Safari
      xmlhttp=new XMLHttpRequest();
      }
    else
      {// code for IE6, IE5
      xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
      }
    xmlhttp.onreadystatechange=function()
      {
      if (xmlhttp.readyState==4 && xmlhttp.status==200)
        {
        document.getElementById("myDiv").innerHTML=xmlhttp.responseText;
        }
      }
    xmlhttp.open("GET","<%=strURLinfo%>",true);
    xmlhttp.send();
    }
    </script>
    </head>
    <body onload="loadXMLDoc();">
    <div id="myDiv" style="width: 100%">
    <h3><center>Sending Message....... Please wait....</center></h3>
    <button type="button" onclick="loadXMLDoc()">Resend Message</button>
    </div>
    </body>
    </html> 
```

现在，如果我要在浏览器的地址栏中输入 URL：---> strURLinfo ( `Example: "http://1.1.1.10:9187/sendsms?phone=4041230207&password=TESTPASS&text=test"`)，页面将加载并发送 sms 消息，它会说：“消息已发送！” 但它不会通过 AJAX/xmlhttp 来实现

消息发送页面的 HTML 是：

```
<html>
<body>
Mesage SENT!<br/>
</body>
</html> 
```

有人可以告诉我如何使这项工作。我从[http://www.w3schools.com/ajax/tryit.asp?filename=tryajax_first得到这个例子](http://www.w3schools.com/ajax/tryit.asp?filename=tryajax_first)

我没有收到任何错误，只是说：正在发送消息......请稍候...... responseText 永远不会更改 div 消息。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T19:39:39.200

我能够使用以下代码使用 ASP（经典）完成这项工作：

```
Dim objXML
Function objXML_onreadystatechange()
    If (objXML.readyState = 4) Then
        If (objXML.status = 200) Then
            Response.Write(objXML.responseText)
            Set objXML = Nothing
        End If
    End If
End Function

Set objXML = Server.CreateObject("MSXML2.ServerXMLHTTP")
    objXML.Open "GET", strURLinfo, false 
    objXML.Send("")
    Response.Write objXML.responseText 
```

进行一些更改我相信人们也可以让它在 javascript 中工作。

# security - 我的 Symfony2 应用程序中的重复安全日志：'security.WARNING: Username "" could not be found.'

> ID：13729586
> 
> 赞同：2
> 
> 时间：2012-12-05T18:05:11.433
> 
> 标签：security, logging, symfony

我有一个 Symfony2 ( `2.0.19`) 应用程序，`FOSUserBundle`它使用自定义`UserManager`类扩展，因为它必须从暂时无法迁移的旧数据库加载数据。`prod.log`一切正常，用户可以登录，访问他们的仪表板，断开连接......但我在日志文件中有这个反复出现的警告：

```
[2012-12-05 18:16:45] security.WARNING: Username "" could not be found. [] [] 
```

这是在尝试使用无法找到的用户名登录时引起的。所以错误是“*正常*的”。

由于未记录用户名，因此此警告不是很有用。所以，我想在不改变`prod`环境的错误报告级别的情况下删除它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-20T21:27:24.997

当我们提交我们的供应商时（不是一个好的做法，但我们被要求这样做）我已经删除了这个无用的日志。

# c# - 为 QA/DEV 调用单独的 C# 类？

> ID：13729588
> 
> 赞同：2
> 
> 时间：2012-12-05T18:05:17.310
> 
> 标签：c#, .net, code-behind

我在一个使用 C# 并允许在中心类中添加单独代码的内容管理系统中工作。出现的一个问题是我们希望为 QA 和站点的其余部分提供单独的代码库，目前我们使用文件夹结构将调用从一个类切换到另一个类

```
if (AssetPath == "Websites QA")
{
    InputHelperQA.Navigation();//Calling Navigation Section From Helper Class
}
else
{
    InputHelper.Navigation();
} 
```

但我觉得这是完成这项任务的一种非常乏味的方式。有没有更好的方法来实现这一点？显然只是附加 InputHelper + "QA" 是行不通的，但有些事情我们只需要调用一次方法，而不必在调用周围包装 if else。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T19:15:58.520

你可以做得比：

1）有一个接口（你可能已经有，说实话）

```
public interface IInputHelper
{
    void Navigation();
} 
```

2）派生您已经拥有的两个实例：

```
public class InputHelper : IInputHelper { }
public class InputHelperQA : IInputHelper { } 
```

3）创建某种调度管理器：

```
public sealed class InputDispatch
{
    private Dictionary<string, IInputHelper> dispatch_ = new Dictionary<string, IInputHelper>(StringComparer.OrdinalIgnoreCase);

    public InputDispatch()
    {
        dispatch_["Websites QA"] = new InputDispatchQA();
        dispatch_["Default"] = new InputDispatch();
    }

    public void Dispatch(string type)
    {
        Debug.Assert(dispatch_.ContainsKey(type));
        dispatch_[type].Navigation();
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T18:08:18.557

除了代表您的环境的分支之外，您真的不应该为不同的环境使用单独的代码。

您确实应该将配置存储在配置文件或数据库中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T19:34:20.580

我会使用依赖注入。StructureMap（仅作为一个示例）将允许您通过配置文件指定为接口提供哪种具体类型。

[http://docs.structuremap.net/XmlConfiguration.htm](http://docs.structuremap.net/XmlConfiguration.htm)

# android - 通过 contentResolver 更新交换两个联系人的照片

> ID：13729589
> 
> 赞同：0
> 
> 时间：2012-12-05T18:05:25.953
> 
> 标签：android, set, contacts, photo, android-contentresolver

**我想在不写任何字节流**的情况下交换两个联系人的个人资料图片！我想知道是否可以使用 contentResolver 更新 PHOTO_FILE_ID、PHOTO_ID、PHOTO_THUMBNAIL_URI 和 PHOTO_URI。甚至可能吗？

这是我尝试过的代码（不可运行，我只是复制了总代码的某些部分）：这就是我阅读信息的方式：

```
String[] projection = new String[]{ ContactsContract.Data._ID,
        ContactsContract.CommonDataKinds.StructuredName.PHOTO_FILE_ID,
        ContactsContract.CommonDataKinds.StructuredName.PHOTO_ID,
        ContactsContract.CommonDataKinds.StructuredName.PHOTO_THUMBNAIL_URI,
        ContactsContract.CommonDataKinds.StructuredName.PHOTO_URI};

Cursor cursor = this.contentResolver.query(ContactsContract.Data.CONTENT_URI, projection, ContactsContract.Data.MIMETYPE + " LIKE ?",
           new String[] { ContactsContract.CommonDataKinds.StructuredName.CONTENT_ITEM_TYPE }, null);

if( cursor.moveToFirst() ){
    long ID = cursor.getLong( cursor.getColumnIndex(
            ContactsContract.Data._ID) );
    Integer photoFileID = cursor.getInt( cursor.getColumnIndex(
            ContactsContract.CommonDataKinds.StructuredName.PHOTO_FILE_ID) );
    Integer photoID = cursor.getInt( cursor.getColumnIndex(
            ContactsContract.CommonDataKinds.StructuredName.PHOTO_ID) );
    String photoThumbnailURI = cursor.getString( cursor.getColumnIndex(
            ContactsContract.CommonDataKinds.StructuredName.PHOTO_THUMBNAIL_URI) );
    String photoURI = cursor.getString( cursor.getColumnIndex(
            ContactsContract.CommonDataKinds.StructuredName.PHOTO_URI) );
}
cursor.close(); 
```

这就是我尝试在另一个联系人中写入信息的方式：

```
ContentValues contentValues =  new ContentValues();
contentValues.put(ContactsContract.CommonDataKinds.StructuredName.PHOTO_FILE_ID, photoFileID);
contentValues.put(ContactsContract.CommonDataKinds.StructuredName.PHOTO_ID, photoID);
contentValues.put(ContactsContract.CommonDataKinds.StructuredName.PHOTO_THUMBNAIL_URI, photoThumbnailURI);
contentValues.put(ContactsContract.CommonDataKinds.StructuredName.PHOTO_URI, photoURI);

String where = ContactsContract.Data._ID + " = ? AND " + ContactsContract.Data.MIMETYPE + " LIKE ?";
String[] params = new String[] { String.valueOf(ID), 
                                ContactsContract.CommonDataKinds.StructuredName.CONTENT_ITEM_TYPE };

this.contentResolver.update(ContactsContract.Data.CONTENT_URI, contentValues, where, params); 
```

如果我运行这个脚本，调试器会告诉我这些列是无效的......任何想法如何以另一种方式更新照片细节？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T19:37:42.293

是的，这是联系人数据库中令人困惑的部分。

即使“照片”列*名称*由 ContactsContract.CommonDataKinds.StructuredName 继承，这些*列*也无法识别为 StructuredNames 行。

如果您将使用要交换的 ContactsContract.Contacts 列更新您的帖子，我会推荐交换照片的首选方式。

# c# - 如果我在 C# winform 应用程序中重定向用 Delphi 编写的控制台应用程序，则进程立即退出

> ID：13729590
> 
> 赞同：1
> 
> 时间：2012-12-05T18:05:26.623
> 
> 标签：c#, delphi, console, io-redirection

我有一个用 Delphi 编写的控制台应用程序 (Host.exe)。我想在 C# 应用程序（WinForm）中重定向控制台应用程序的输出。

如果我使用以下内容，则调用（Host.exe）没有问题，但由于它作为（show-window，非常独立）运行，因此无法获得输出。

```
 ProcessStartInfo pp = new ProcessStartInfo();
                pp.WorkingDirectory = Path.GetDirectoryName(Application.ExecutablePath);
                pp.FileName = Path.Combine(pp.WorkingDirectory, "Host.exe");
                pp.CreateNoWindow = false;
                pp.WindowStyle = ProcessWindowStyle.Normal;
                pp.UseShellExecute = true;
                using (Process pProcess = Process.Start(pp))
                {
                    while ((pProcess != null) && (!pProcess.HasExited))
                    {
                        Application.DoEvents();
                        Thread.Sleep(updatefreq);
                    }
                } 
```

但是，如果我尝试捕获输出（重定向），进程将立即退出（HasExited = true，循环中断，调试器显示“仅完成了 ReadProcessMemory 或 WriteProcessMemory 请求的一部分”。

```
 ProcessStartInfo pp = new ProcessStartInfo();
                pp.WorkingDirectory = Path.GetDirectoryName(Application.ExecutablePath);
                pp.FileName = Path.Combine(pp.WorkingDirectory, "Host.exe");
                pp.UseShellExecute = false;
                pp.RedirectStandardOutput = true;
                pp.RedirectStandardInput = true;
                pp.RedirectStandardError = true;
                pp.CreateNoWindow = true;
                pp.WindowStyle = ProcessWindowStyle.Hidden;
                StreamReader outputReader = null;
                using (Process pProcess = Process.Start(pp))
                {
                    if (pProcess != null)
                    {
                        //StreamWriter inputWriter = pProcess.StandardInput;
                        //StreamReader errorReader = pProcess.StandardError;
                        outputReader = pProcess.StandardOutput;
                    }
                    while ((pProcess != null) && (!pProcess.HasExited))
                    {
                        string ss = null;
                        if (outputReader != null)
                        {
                            ss = outputReader.ReadLine();
                        }
                        if ((ss != null) && (2 < ss.Length))
                        {
                            string[] s = ss.Split('|');
                            if (3 == s.Length)
                            {
                                float global;
                                //float.TryParse(s[0], out local);
                                float.TryParse(s[1], out global);
                                RadioTracer.SetCurrentMsg(s[2]);
                                RadioTracer.SetCurrentStep((int)global);
                            }
                        }
                        Application.DoEvents();
                        Thread.Sleep(updatefreq);
                    }
                } 
```

我用谷歌搜索了很多，但没有得到解决方案。以下页面出现了类似的问题，我已经尝试了建议的解决方案，但没有任何效果。

[https://connect.microsoft.com/VisualStudio/feedback/details/609801/unable-to-redirect-only-the-standard-input-of-process-cmd-exe-or-batch-file-from-windows-表格申请](https://connect.microsoft.com/VisualStudio/feedback/details/609801/unable-to-redirect-only-the-standard-input-of-process-cmd-exe-or-batch-file-from-windows-form-application)

[http://go4answers.webhost4life.com/Example/redirectstandardinput-a-32-bit-114440.aspx](http://go4answers.webhost4life.com/Example/redirectstandardinput-a-32-bit-114440.aspx)

[http://social.msdn.microsoft.com/Forums/en/csharpgeneral/thread/4f946750-6c47-406c-810c-21a2b103b5c4](http://social.msdn.microsoft.com/Forums/en/csharpgeneral/thread/4f946750-6c47-406c-810c-21a2b103b5c4)

非常感谢......这已经浪费了我很多时间......我希望我能在这里得到解决方案。

**编辑：**即使我不使用任何 ReadLine() 或 ReadToEnd() 方法，问题仍然存在。当“UseShellExecute”设置为 false 时，Host.exe 将立即退出。Host.exe 应该进行一些大计算（大约需要 2 分钟，并且每隔几秒通过控制台 WriteLine 报告进度）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T15:02:29.667

我发现如果您在 C# 中重定向输出，以下几行将导致错误。我在 Delphi 中使用 Console.pas 单元，在该单元的初始化中，它调用 InitScreenMode 过程。

```
 Reset(Input);
  Rewrite(Output);
  StdIn := TTextRec(Input).Handle;
  StdOut := TTextRec(Output).Handle; 
```

我猜当 C# 中的“UseShellExecute”设置为 false 时，“重置”或“重写”控制台标准输入/标准输出会导致问题

# c# - 如何有条件地使用 Linq 将属性从一个列表复制到另一个列表

> ID：13729592
> 
> 赞同：0
> 
> 时间：2012-12-05T18:05:35.973
> 
> 标签：c#, linq

我有两个自定义对象列表。
两者都有`DivisionId`共同的属性。我想复制两个参数，`PlanType`和`CoverageType`，从`List<Divisions>`使用`List<Members>`Linq，无论何时`Member.DivisionId = Divisions.DivisionId`。

成员和部门对象如下：

```
public class Members
{
  public string FirstName;
  public string LastName;
  public string DivisionId;
}

Public Class Divisions
{
  public string PlanType;
  public string CoverageType,
  public string DivisionId;
} 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T18:12:30.290

你描述的是**加入**

```
 var query = from m in members
                join d in divisions on m.DivisionId equals d.DivisionId
                select new { m.FirstName,
                            m.LastName,
                            m.DivisionId,
                            d.CoverageType,
                            d.PlanType
                        }; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T18:12:50.673

如果要将项目从第一个列表中的索引 0 复制到第二个列表中的索引 0，以此类推，对于所有其他索引，您可以这样做：

```
var pairs = members.Zip(divisions, (a, b) => new
{
    Member = a,
    Division = b,
});

foreach (var pair in pairs)
{
    Copy(pair.Member, pair.Division);
} 
```

如果索引不匹配，您需要进行连接：

```
var pairs = members.Join(divisions
    , member => member.DivisionId
    , division => division.DivisionId
    , (a, b) => new
    {
        Member = a,
        Division = b,
    });

foreach (var pair in pairs)
{
    Copy(pair.Member, pair.Division);
} 
```

请注意`Zip`，如果项目已经按正确的顺序排列，将会更快。加入将比 Zip 慢，但会比手动重新排序项目以允许`Zip`.

# python - 如何从 mysql 查询运行 python 脚本？

> ID：13729594
> 
> 赞同：3
> 
> 时间：2012-12-05T18:05:41.157
> 
> 标签：python, mysql, sql

我想从 mysql 查询中调用 python 脚本。

就像我们在 mysql 中调用过程一样： call procedurename();

就像上面一样，mysql中有什么方法可以调用外部脚本，例如，

```
 call script(somefile.py) 
```

我写了上面的东西来解释我想要什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T20:54:24.263

出于安全原因，这在 MySQL 中似乎是不可能的。你可以看看这个相关的问题[Executing shell command from MySQL](https://stackoverflow.com/q/289914/1699750)。但是，您可以在 oracle 等其他数据库中执行此操作。在 Postgresql 中还支持[在数据库中创建 python 存储过程](http://www.postgresql.org/docs/8.1/static/plpython.html)。您可以使用此技术让您的数据库触发器运行 python 代码。

# java - 将值从 string.xml 从一个活动传递到另一个活动？

> ID：13729596
> 
> 赞同：0
> 
> 时间：2012-12-05T18:05:56.510
> 
> 标签：java, android

string.xml 文件中的值...

```
 <string name="bangla_history_2ndpoint">SOME VALUE </string> 
```

从这个活动中，我试图将价值传递给另一个活动......通过使用 putextra

```
Intent ptwo=new Intent("com.powergroupbd.victoryday.of.bangladesh.HISTORYDESCRIPTION");
            ptwo.putExtra("header", R.string.bangla_history_2ndpoint);

            startActivity(ptwo); 
```

然后获取此活动中的值...

但它没有从 string.xml 文件中获取值......

```
text_point = getIntent().getStringExtra("header");
Toast.makeText(getApplicationContext(), text_point, Toast.LENGTH_LONG).show(); 
```

但它是烤空白....

请给出解决方案...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T18:25:28.600

那是因为您正在尝试检索 a `String`，但您作为 extra 传入的实际上是它的资源标识符 an `int`。要么把一个实际的字符串作为额外的，要么在接收端检索一个 int 来解决这个问题。

```
// put:
ptwo.putExtra("header", R.string.bangla_history_2ndpoint);
// get:
int extraResourceId = getIntent().getIntExtra("header");
text_point = getString(extraResourceId); 
```

或者：

```
// put:
ptwo.putExtra("header", getString(R.string.bangla_history_2ndpoint));
// get:
text_point = getIntent().getStringExtra("header"); 
```

# python - 列表项不能成倍增加

> ID：13729597
> 
> 赞同：1
> 
> 时间：2012-12-05T18:05:55.553
> 
> 标签：python, list

我有一个基本问题：
有两个名为`a1`和的列表`b1`。如果我打印出每个列表的一项，它将是 a `float number`，但是当我`a1[i]*b1[i]`在循环中使用时，它会给出一个错误：

```
TypeError: can't multiply sequence by non-int of type 'float' 
```

这是为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T18:15:31.243

要么`a1`不是`b1`浮动列表，而是浮动列表列表。

```
a1=[1.234, 1.234];
a2=[1.234, 1.234];
>>> a1[0]*a2[0]
1.522756

a3=[[1.234], [1.234]];

>>> a1[0]*a3[0]
Traceback (most recent call last):
File "<stdin>", line 1, in <module>
TypeError: can't multiply sequence by non-int of type 'float' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T18:29:46.177

想想@Gille 可能有你的错误。

如果您想要在循环中做的只是将条目相乘，那么快速的方法是使用 numpy 数组：

```
import numpy as np
result = np.multiply(a1,b1) 
```

如有必要，转换回列表：

```
result = list(result) 
```

# visual-studio - Visual Studio 2012 Pro Power Tools 类/方法名称悬停工具提示

> ID：13729598
> 
> 赞同：12
> 
> 时间：2012-12-05T18:06:08.247
> 
> 标签：visual-studio, visual-studio-2012, productivity-power-tools

我为 Visual Studio 2012 安装了 Productivity Power Tools，我猜想其中一项功能要么丢失，要么被关闭。我的意思是在类名和方法名上出现的工具提示。这是我的意思的屏幕。这是来自VS 2010。

![名称悬停](../Images/6b8a697b1cf2c9199e521b3d53d87507.png) ![展开](../Images/8d0624cf6084b1c9a03de2a0dbef9dfc.png)

如何在 Visual Studio 2012 中打开相同的功能，或者它只是从这个版本的 IDE 中删除？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-26T15:14:21.740

解决方案导航器已合并到 Visual Studio 2012 中，不再是 Productivity Power Tools 扩展的一部分。似乎也没有任何方法可以启用交互式工具提示。

# three.js - three.js 相机，例如 biodigitalhuman.com 相机

> ID：13729601
> 
> 赞同：0
> 
> 时间：2012-12-05T18:06:10.443
> 
> 标签：three.js

我是一名新开发人员，使用 Three.js 创建 3D 屏幕。我的问题是，我想围绕 3D 对象旋转相机，[就像这个网站控制它的相机一样](https://www.biodigitalhuman.com/)

这个脚本是我在对象周围平滑旋转相机的努力之一。

```
 <!DOCTYPE html>
<html lang="en">
<head>
    <title>three.js webgl - materials - cube reflection / refraction [Walt]</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
</head>

<body>
<script src="js/libs/three.js-r50/three.js"></script>
<script src="js/libs/Detector.js"></script>
<script src="js/libs/stats.min.js"></script>

<button  onclick="rotateCameraDown();">Down</button>
<button  onclick="rotateCameraUp();">UP</button>
<button  onclick="rotateCameraRight();">Right</button>
<button  onclick="rotateCameraLeft();">Left</button>
<script>
    var  r , phi , theta;
    var camera, scene, renderer;
    var geometry, material, redCube, greenCube;
    init();
    animate();

    function updateAngles(){
        var vec = new THREE.Vector3();
        vec.z =r * Math.sin(theta) * Math.cos(phi) +redCube.position.z;
        vec.x =r * Math.sin(theta) * Math.sin(phi) + redCube.position.x;
        vec.y =r * Math.cos(theta) + redCube.position.y;
        console.log("vec.x "+vec.x+" : "+vec.y+" : "+vec.z+" theta:"+theta+" phi:"+phi);
        return vec;

    }
    function rotateCameraRight(){
        phi +=  Math.PI/40 ;
        camera.position = updateAngles();
        camera.lookAt(redCube.position);
    }
    function rotateCameraLeft(){
        phi -=  Math.PI/40 ;
        camera.position = updateAngles();
        camera.lookAt(redCube.position);
    }
    function rotateCameraDown() {
        theta +=  Math.PI/40 ;
        camera.position = updateAngles();
        camera.lookAt(redCube.position);
    };
    function rotateCameraUp() {

        theta -=  Math.PI/40 ;
        camera.position = updateAngles();
        camera.lookAt(redCube.position);

    };

    function init() {
        r = 5;
        phi = 0;
        theta = Math.PI/4;
        camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 1, 10000);

        scene = new THREE.Scene();

        renderer = new THREE.CanvasRenderer();
        renderer.setSize(window.innerWidth, window.innerHeight);

        document.body.appendChild(renderer.domElement);

        geometry = new THREE.CubeGeometry(2, 2, 2);
        material = new THREE.MeshBasicMaterial({ color:0xff0000,wireframe:true });
        redCube = new THREE.Mesh(geometry, material);
        redCube.position.z = 5;
        redCube.position.y = 5;
        redCube.position.x = 5;
        camera.lookAt(redCube.position);
        scene.add(redCube);
        scene.add(camera);

    }

    function animate() {
        requestAnimationFrame(animate);
        renderer.render(scene, camera);
    }

</script>
</body>
</html> 
```

# iphone - 客观 c 类方法返回值，分配给弱/强属性

> ID：13729603
> 
> 赞同：3
> 
> 时间：2012-12-05T18:06:23.837
> 
> 标签：iphone, objective-c, cocoa-touch, ios6, xcode4.5

我面临一些涉及弱属性和强属性的困惑。为简洁起见，我不会包含整个代码。

我创建了一个返回 UIView 对象的类便捷方法，并在 UIView 类别中实现它作为子类化的替代方法。

```
@implementation UIView (CSMonthView)    

+ (UIView *)monthViewFromDateArray:(NSArray *)arrayOfAllShiftsAndEvents withNibOwner:(id)owner selectedDate:(NSDate *)selectedDate withCompletionHandler:(void(^)(CSCalendarButton *selectedButton))block
{   // .. do some stuff
    // Create an instance of UIView
    UIView *monthView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 320.0, 200.0)];

    // Create UIButtons and set the passed down 'owner' value, as the target for an
    // action event.

    // Add UIButton as subviews to monthView....

    return monthView;
} 
```

我应该注意，在方法内部我没有任何指向monthView的东西。

现在在“所有者”的实现中，这是一个名为 CSCalendarViewController 的类，我通过调用类便利方法创建上述 UIView 并将其分配给名为 _monthView 的 UIView 属性。

```
@interface CSCalendarViewController : UIViewController 

@property (weak, nonatomic) UIView *monthView;

@end

@implementation CSCalendarViewController

     __weak CSCalendarViewController *capturedSelf = self;
    // Create the current month buttons and populate with values.
    _monthView = [UIView monthViewFromDateArray:_arrayOfAllShiftsAndEvents withNibOwner:self selectedDate:_selectedDate withCompletionHandler:^(CSCalendarButton *selectedButton) {

            capturedSelf.selectedButton = selectedButton;
            [capturedSelf.selectedButton setSelected:YES];
        } 
```

现在我的困惑是这样的。即使我将属性“monthView”定义为弱，“monthView”仍然保留返回的 UIView 的值。

如果我继续做这样的事情：

```
 _monthView = [[UIView alloc] initWithFrame:CGRectMake(0.0, 0.0, 320.0, 200.0)]; 
```

编译器发出警告（应该如此）说“将保留对象分配给弱变量”。

当我将“monthView”分配给从类方法返回的 UIView 时，为什么我没有收到相同的错误消息？

在 ARC 之前的内存管理方面，我没有深入的了解，而且我认为我遗漏了一些明显的东西。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T18:58:10.977

> 'monthView' 仍然保留返回的 UIView 的值。

不会长久。这个问题演示了 ARC 的基本工作原理，以及它如何转换为传统的保留/释放方法，而不是一个全新的内存管理系统。

## 弧前

在ARC之前，没有弱或强的概念，而是指保留和分配。分配给变量对引用计数没有任何作用，由开发人员来管理它。

现在，关于内存管理策略，名称以“alloc”、“new”、“copy”或“mutableCopy”开头的方法将返回一个保留对象（[文档](https://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/MemoryMgmt/Articles/mmRules.html)）。这意味着，在分配给变量时，开发人员不需要显式保留（他们必须显式释放或自动释放）：

```
// Will have a retain count of 1 here 
var = [NSString alloc] initWithString:@"Test"];

// Will have a retain count of 2 here 
var = [[NSString alloc] initWithString:@"Test"] retain]

// Will have a retain count of 1 here, but will be released later on automatically
var = [[NSString alloc] initWithString:@"Test"] autorelease];

// Will have a retain count of 0 here, and will be released before it reaches the variable!
var = [[NSString alloc] initWithString:@"Test"] release]; 
```

没有该命名约定的方法建议它们返回一个自动释放的对象。开发人员需要明确说明，以使对象保持更长的时间：

```
// Will have a retain count of 1 here, but will be released later on automatically
var = [NSString stringWithString:@"Test"];

// Will have a retain count of 1 here 
var = [[NSString alloc] initWithString:@"Test"] retain]

// Will have a retain count of 1 here, but will be released twice later on (Over-released!)
var = [[NSString alloc] initWithString:@"Test"] autorelease];

// Will have a retain count of 0 here, and will be released again later on (Over-released!)
var = [[NSString stringWithString:@"Test"] release]; 
```

## ARC + MRC

ARC 消除了这种不必要的释放和保留需求，而是根据将分配给的变量类型来决定如何处理内存管理。这并不意味着内存管理模型发生了变化。它仍然是引擎盖下的所有保留和释放。因此，这对您有何影响？为简洁起见，此答案仅考虑弱变量。

**分配给弱变量不会对对象的保留计数做任何事情。**让我们看一个实际的例子来解释：

```
__weak UIView* monthView = [[UIView alloc] initWithFrame:CGRectMake(0.0, 0.0, 320.0, 200.0)]; 
```

因为（实际上，在 ARC 的背后）这是返回一个保留对象，但弱变量不会影响保留计数，所以编译器已经找到了释放对象的最早点，以防止内存泄漏；关于分配！因此，它将被翻译成以下内容，并导致错误：

```
UIView* monthView = [[[UIView alloc] initWithFrame:CGRectMake(0.0, 0.0, 320.0, 200.0)] release]; 
```

现在，关于`monthViewFromDateArray:`，这是向编译器建议（由于其名称），它将返回一个自动释放的对象（[Documentation](https://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/MemoryMgmt/Articles/mmRules.html)）。因为编译器知道自动释放的对象将在稍后的运行循环中自动释放（当自动释放池耗尽时），它不会`release`像以前那样插入调用。因此，对弱变量的赋值不是问题，但它只在使用它的范围内才真正有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T19:23:09.923

说我们有方法

```
+(UIView*) create {
    return [[UIView alloc] init];
} 
```

编译的时候转成这个

```
+(UIView*) create {
    return [[[UIView alloc] init] autorelease];
} 
```

现在在这里：

```
UIView* __weak view;

//warning here
view = [[UIView alloc] init]; //1

view = [AppDelegate create];  //2 
```

第一行转换为：

```
tempVar = [[UIView alloc] init];
storeWeak(tempVar, &view); //view = tempVar and marked as weak
[view release]; //view is nil after this because retain count == 0 (assignment to nil is done in release internally) 
```

第二行：

```
tempVar = [MyClass create];
[tempVar retainAutoreleasedReturnValue];
storeWeak(tempVar, &view); //view = tempVar and marked as weak
[release tempVar]; //view is not nil because tempVar is autoreleased later 
```

如果我们有这样的代码：

```
@autoreleasepool {
    view = [[UIView alloc] init];
    //view is nil here

    view = [AppDelegate create];
    //view equals to the return value
}
//view becomes nil here because [AppDelegate create] return value is released 
```

您可以通过查看代码反汇编来了解所有这些。

# javascript - 通过 AJAX 加载后图像不可点击

> ID：13729612
> 
> 赞同：-1
> 
> 时间：2012-12-05T18:06:58.527
> 
> 标签：javascript, jquery, html, twitter-bootstrap, dom

我有一组通过 jQuery AJAX 加载的图像。出于某种原因，我的点击处理程序在被点击时不会触发。

JavaScript：

```
$(document).ready(function()
{
    $('img.delete_related_sub').click(function()
    {
    alert('testing');
    });

    //I added this part to test, because the above wasn't working...
    $(document).click(function(event)
    {
    alert(event.target.tagName+' '+event.target.className);
    });
}); 
```

HTML：

```
<img data-rsid="2" class="delete_related_sub" src="image.png" /> 
```

所以我的第二次点击处理程序用“IMG delete_related_sub”提醒我。但是第一个没有被触发。它实际上在一个表中，该表实际上位于由引导选项卡运行的窗格中，但不确定这是否真的有帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T18:08:13.120

像这样试试

```
$(document).on('click', 'img.delete_related_sub', function() {
    alert('testing');
}); 
```

只需替换`document`为图像的静态父级即可。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T18:09:08.657

### 用这个：

```
$("body").on('click', 'img.delete_related_sub', function() {
    alert('testing');
}); 
```

### 或者，在`success:`给出这个：

```
$('img.delete_related_sub').click(function() {
    alert('testing');
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T18:10:05.423

因为绑定事件的行在添加元素之前运行，所以尝试使用

```
$(parent).on('click', 'img.delete_related_sub', function() {}); 
```

其中`parent`是一个肯定会存在的静态元素。这是有效的，因为事件绑定到实际存在的元素，然后检查以匹配您的选择器。有关[`.on()`](http://api.jquery.com/on/)更多详细信息，请参阅。

就像是

```
$(document).on('click', 'img.delete_related_sub', function() {}); 
```

可以正常工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T18:23:49.650

```
$('.delete_related_sub').live("click", function()
{
    alert('testing');
}); 
```

使用实时事件监听点击

# matlab - Matlab中的精确矩阵乘法

> ID：13729613
> 
> 赞同：0
> 
> 时间：2012-12-05T18:07:04.110
> 
> 标签：matlab, matrix-multiplication

有2个矩阵：

**甲**：（6×78）`max=22.2953324329113, min=0`
**乙**：（6×6） `max=2187.9013214004 , min=-377.886378385521`

**B**是对称的，因此，**C = A' * B * A**必须是对称矩阵（理论上），但是当我在 Matlab 中计算它们时，情况并非如此。实际上：

`max(max(abs(C - C'))) = 2.3283064365386963e-010`

如何将它们相乘并获得准确的结果？
或者
什么是舍入 C 元素的安全方法？

我读了这个问题：[efficient-multiplication-of-very-large-matrices-in-matlab](https://stackoverflow.com/questions/4420235/efficient-multiplication-of-very-large-matrices-in-matlab)，但我的问题不是速度或内存。我需要一个*准确*的结果

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T18:24:46.513

您可以考虑 cholesky 分解，`B`因为它是对称的

```
 B = R'R
  R = chol(A)   % // in matlab 
```

那么`C = A'R'R A =D'D`，在哪里`D = RA`。

尽管由于`C=D'D`分解的准确性而引入了可能的错误，但您应该具有机器 epsilon 精度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T08:05:00.903

你需要阅读“每个计算机科学家应该知道的关于浮点运算的知识”：

[http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html](http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html)

意识到计算机永远无法给出完美的浮点结果，这给您留下了几个选择：

*   做尽可能少的操作，即选择操作的顺序以使舍入误差最小
*   固定小数点算术 - 或整数算术 - 这并不总是适用于所有应用程序，但在某些应用程序中，您可以摆脱它。金融应用是最常被引用的例子（乘以 100 就可以赚到钱！完成后除以 100！）。
*   这么晚了我还想不到其他的技巧。

我将不得不让你的操作在我的机器上进行一次旋转，`eps`给我`2.2204e-16`，这比你得到的要低六个数量级。看看`eps`你的机器上有什么 - 它应该是相似的 - 如果它是类似的东西`1e-12`，我会说你的结果正是你对这些操作的期望。

当我使用随机数执行此操作时，我得到

```
a = rand(6, 78);
b = rand(6, 6);
b = b + b';   % To make b symmetric
c = a' * b * a;
max(max(abs(c - c')))

ans =

   7.1054e-15 
```

经过这么多操作后，这与我对舍入错误的预期更接近，但我不确定你的输入，你的机器，我不知道还有什么可能会影响事情。

干杯， -

# mongodb - Mongo 在单个查询中组合和或

> ID：13729615
> 
> 赞同：4
> 
> 时间：2012-12-05T18:07:10.983
> 
> 标签：mongodb, mongoid, mongoid3

我正在尝试找出查询 mongo 的最佳方法。我正在使用 Mongoid 和最新的 mongo 版本

我想要做的是这样的查询

user_id => [id 数组] 和 user_type => "some_type" 或 user_id => [id 数组] 和 user_type => "some_type"

我怎样才能在 Mongo/Mongoid 中做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-05T18:55:45.267

在 mongo shell 中，它会是这样的，

```
db.yourcollection.find({$or: [
    {user_id: {$in: [array_of_ids]}, user_type: "some_type"},
    {user_id: {$in: [array_of_ids2]}, user_type: "some_type2"}
]}); 
```

# java - 在java中覆盖txt文件

> ID：13729625
> 
> 赞同：34
> 
> 时间：2012-12-05T18:08:04.133
> 
> 标签：java, overwrite, filewriter

我编写的代码应该覆盖所选文本文件的内容，但它正在附加它。我到底在做什么错？

```
File fnew=new File("../playlist/"+existingPlaylist.getText()+".txt");
String source = textArea.getText();
System.out.println(source);
FileWriter f2;

try {
    f2 = new FileWriter(fnew,false);
    f2.write(source);
    /*for (int i=0; i<source.length();i++)
    {
        if(source.charAt(i)=='\n')
            f2.append(System.getProperty("line.separator"));
        f2.append(source.charAt(i));
    }*/
    f2.close();
} catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
} 
```

**编辑**

我尝试制作一个新的 temp.txt 文件并将新内容写入其中，删除此文本文件并将 temp.txt 重命名为该文件。问题是，删除总是不成功。我认为我不必为此更改用户权限吗？

另外，我的程序的一部分列出了该目录中的所有文件，所以我猜测它们正在被程序使用，因此无法删除。但是为什么不覆盖呢？

**解决了**

我最大的“D'oh”时刻！我一直在 Eclipse 上编译它，而不是在我执行它的 cmd 上。所以我新编译的类进入 bin 文件夹，通过命令提示符编译的类文件在我的 src 文件夹中保持不变。我用我的新代码重新编译，它就像一个魅力。

```
File fold=new File("../playlist/"+existingPlaylist.getText()+".txt");
fold.delete();
File fnew=new File("../playlist/"+existingPlaylist.getText()+".txt");
String source = textArea.getText();
System.out.println(source);

try {
    FileWriter f2 = new FileWriter(fnew, false);
    f2.write(source);
    f2.close();
} catch (IOException e) {
    e.printStackTrace();
} 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-12-05T18:22:07.557

你的代码对我来说很好。它按预期替换了文件中的文本并且没有附加。

如果要追加，则将第二个参数设置为

```
new FileWriter(fnew,false); 
```

为真；

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-12-06T00:48:03.973

**解决了**

我最大的“D'oh”时刻！我一直在 Eclipse 上编译它，而不是在我执行它的 cmd 上。所以我新编译的类进入 bin 文件夹，通过命令提示符编译的类文件在我的 src 文件夹中保持不变。我用我的新代码重新编译，它就像一个魅力。

```
File fold = new File("../playlist/" + existingPlaylist.getText() + ".txt");
fold.delete();

File fnew = new File("../playlist/" + existingPlaylist.getText() + ".txt");

String source = textArea.getText();
System.out.println(source);

try {
    FileWriter f2 = new FileWriter(fnew, false);
    f2.write(source);
    f2.close();

} catch (IOException e) {
    e.printStackTrace();
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-12-05T18:14:15.570

初始化文件对象后再添加一行

```
File fnew = new File("../playlist/" + existingPlaylist.getText() + ".txt");
fnew.createNewFile(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-05T18:19:54.800

这稍微简化了它，它的行为就像你想要的那样。

```
FileWriter f = new FileWriter("../playlist/"+existingPlaylist.getText()+".txt");

try {
 f.write(source);
 ...
} catch(...) {
} finally {
 //close it here
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-01-26T01:06:39.233

覆盖文本文件的最简单方法是使用公共静态字段。

这将每次都覆盖文件，因为您第一次只使用 false。`

```
public static boolean appendFile; 
```

使用它只允许写入序列的一次写入代码的附加字段为假。

```
// use your field before processing the write code

appendFile = False;

File fnew=new File("../playlist/"+existingPlaylist.getText()+".txt");
String source = textArea.getText();
System.out.println(source);
FileWriter f2;

try {
     //change this line to read this

    // f2 = new FileWriter(fnew,false);

    // to read this
    f2 = new FileWriter(fnew,appendFile); // important part
    f2.write(source);

    // change field back to true so the rest of the new data will
    // append to the new file.

    appendFile = true;

    f2.close();
 } catch (IOException e) {
       // TODO Auto-generated catch block
       e.printStackTrace();
 } 
```

# spring - 如何通过 SSL 为 activemq 5 配置 Spring 3 使用者

> ID：13729630
> 
> 赞同：1
> 
> 时间：2012-12-05T18:08:12.347
> 
> 标签：spring, activemq, apache-camel

我正在尝试创建与 activemq 的 SSL 连接（使用 Spring 3.1、ActiveMQ 5.5 和 Camel 10.0）。我遇到了可怕的 SSL 握手异常。我可以使用 jks 中的证书与 openssl s_client 连接。因此，我试图弄清楚我的密钥库是否有问题（这似乎在其他情况下也可以工作 - 例如使用 tomcat）或我的 XML 配置有问题。有没有人有一个很好的例子，关于其他测试方法的想法，或者看看我做错了什么？

请注意，我的配置通过了验证（以防您看到错字）。

谢谢-J

```
<bean id="myJmsRedeliverPolicy" class="org.apache.activemq.RedeliverPolicy">
    <property name="maximumRedeliveries" value="500"/>
</bean>

<bean id="jmsSecureConnectionFactory" class="org.apache.activemq.ActiveMQSslConnectionFactory">
    <property name="brokerURL" value="ssl://test.com:8100"/>
    <property name="redeliverPolicy" ref="myJmsRedeliverPolicy"/>
    <property name="keyStore" value="/usr/lib/mykeystore.jks"/>
    <property name="keyStorePassword" value="mypass"/>
    <property name="trustStore" value="/usr/lib/mycacerts"/>
    <property name="trustStorePassword" value="changeit"/>
 </bean>

 <bean id="pooledSecureConnectionFactory" class="org.apache.activemq.pool.PooledConnectionFactory">
    <property name="maxConnections" value="10"/>
    <property name="connectionFactory" ref="jmsSecureConnectionFactory"/>
 </bean>

 <bean id="txSecureManager" class="org.springframework.jms.connection.JmsTransactionManager">
    <property name="connectionFactory" ref="pooledSecureConnectionFactory" />
 </bean>

 <bean id="jmsSecureConfig" class="org.apache.camel.component.jms.JmsConfiguration">
    <property name="connectionFactory" ref="pooledSecureConnectionFactory" />
    <property name="testConnectionOnStartup" value="true"/>
    <property name="transacted" value="true"/>
    <property name="transactionManager" ref="txSecureManager"/>
 </bean>

 <bean id="activemqs" class="org.apache.activemq.camel.component.ActiveMQComponent">
    <property name="configuration" ref="jmsSecureConfig" />
 </bean> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T12:27:33.610

启动您的应用程序： `-Djavax.net.debug=ssl`

进一步了解您的故障排除。通常，该命令提供的打印输出几乎可以准确地说明问题所在。

# android - 防止 Facebook 在 SDK 测试期间冻结帐户？

> ID：13729633
> 
> 赞同：-3
> 
> 时间：2012-12-05T18:08:17.910
> 
> 标签：android, facebook

我通过其 SDK 实现了一个小型 Facebook 应用程序。

我正在广泛测试将消息发布到我的墙上，今天我看到 Facebook 冻结了我的帐户 1 个月。

我现在正在开设另一个 FB 测试帐户。

我怎样才能防止他们再次冻结这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T20:30:00.467

尽量不要超过 Facebook API 调用限制。取自[Facebook 平台政策](https://developers.facebook.com/policy/#policies)：

> 如果您超过或计划超过以下任何阈值，请联系 [Facebook]，因为您可能会受到附加条款的约束：（>5M MAU）或（>100M API 调用/天）或（>50M 印象/天） .

另请参阅此问题：[Facebook 的 Graph API 调用限制是什么？](https://stackoverflow.com/questions/8713241/whats-the-facebooks-graph-api-call-limit)

# javascript - 加载下一页并等待点击

> ID：13729634
> 
> 赞同：0
> 
> 时间：2012-12-05T18:08:24.313
> 
> 标签：javascript, jquery, jquery-load

我只是在构建一个小游戏，所以我加载了第一页（介绍）然后，我需要立即开始加载第二页（游戏的第一级，**但只是加载**，不显示它），**然后等待用户单击**以显示它..

**这是我现在的代码：**

在我的 html 页面中：

```
<body id="loadlevel"> 
```

在我的 JS 页面中：

```
var level1 = "level1.html";
$("#loadlevel").load(level1).fadeIn("slow"); 
```

但它会立即显示加载的页面！..

**如何加载下一页然后等待用户输入显示加载的页面？..**

我虽然使用 JQuery hide() 和 show()，但是 hide() 会隐藏整个页面（也是当前页面）；）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T18:23:06.750

创建一些不可见的字段并加载数据。

```
<div id="temp" style="display:none;"></div> 
```

然后在 JS

```
var level1 = "level1.html";
$("#temp").load(level1); 
```

和

```
$('#start').click(function(){
   $('#main').html($('#temp').html());
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T18:24:05.280

您最好的选择是拥有一个最初用 css 或 jquery 隐藏的主 div，然后将内容加载到那里并淡入。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T18:33:24.573

`.load()`- 从服务器加载数据并将返回的 HTML 放入匹配的元素中。

每当要发送 Ajax 请求时，jQuery 都会检查是否还有其他未完成的 Ajax 请求。如果没有进行中，jQuery 会触发 ajaxStart 事件。此时会执行已使用 .ajaxStart() 方法注册的所有处理程序。

CSS：

```
.get-in{
   background:white;
   position:absolute; // or fixed
   left:0;
   top:0;
   width:100%;
   height:100%;
} 
```

jQuery：

```
$('#loadlevel').ajaxStart(function() {
  $('<div/>').appendTo('body').addClass('get-in');
});

$('.get-in').on('click', function(){
   $(this).fadeOut("slow");
}); 
```

# date - 查找时间序列中的最后 7 天

> ID：13729637
> 
> 赞同：0
> 
> 时间：2012-12-05T18:08:40.770
> 
> 标签：date, google-sheets, google-sheets-api, google-sheets-query

我有一个`A`包含时间戳并每天更新的列的电子表格。列`B`保存一个值。如下所示：

```
+--------------------+---------+
| 11/24/2012 1:14:21 | $487.20 |
| 11/25/2012 1:14:03 | $487.20 |
| 11/26/2012 1:14:14 | $487.20 |
| 11/27/2012 1:14:05 | $487.20 |
| 11/28/2012 1:13:56 | $487.20 |
| 11/29/2012 1:13:57 | $487.20 |
| 11/30/2012 1:13:53 | $487.20 |
| 12/1/2012 1:13:54  | $492.60 |
+--------------------+---------+ 
```

我想做的是获得过去 7、14、30 天的平均值。

我一直在使用`GoogleClock()`函数来过滤列中的日期，`A`但我似乎找不到减去的方法`TODAY - 7 days`。我怀疑`FILTER`也会有所帮助，但我有点迷茫。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T22:29:18.933

有几种方法可以解决这个问题；一种方法是使用 QUERY 函数返回一个值数组（假设第 1 行中有一个标题行，并且您想要最后 7 个日期）：

`=QUERY(A2:B;"select B order by A desc limit 7";0)`

您可以将其包装在您喜欢的任何聚合函数中：

`=AVERAGE(QUERY(A2:B;"select B order by A desc limit 7";0))`

# python - 如何从我的输入中过滤表情符号字符，以便我可以保存在 MySQL <5.5 中？

> ID：13729638
> 
> 赞同：14
> 
> 时间：2012-12-05T18:08:40.087
> 
> 标签：python, mysql, django, utf-8, character-encoding

我有一个 Django 应用程序，它从 Twitter 的 API 获取推文数据并将其保存在 MySQL 数据库中。据我所知（我仍然对字符编码的细节有所了解）我在所有地方都使用 UTF-8，包括 MySQL 编码和整理，除非推文包含**表情符号**字符，否则它工作正常，我理解使用四字节编码。尝试保存它们会从 Django 产生以下警告：

> /home/biggleszx/.virtualenvs/myvirtualenv/lib/python2.6/site-packages/django/db/backends/mysql/base.py:86：警告：不正确的字符串值：'\xF0\x9F\x98\xAD I ...' 对于第 1 行的列 'text' 返回 self.cursor.execute(query, args)

我正在使用 MySQL 5.1，因此除非我升级到 5.5，否则我不希望使用[utf8mb4](http://dev.mysql.com/doc/refman/5.5/en/charset-unicode-utf8mb4.html)（也从我读过的内容来看，Django 对此的支持还没有完全准备好生产，尽管这可能不再准确）。我还看到[有人](https://stackoverflow.com/questions/8676005/in-php-how-to-remove-emoji-code)建议在受影响的列上使用 BLOB 而不是 TEXT，我也不想这样做，因为我认为这会损害性能。

那么，我的问题是，假设我不太担心 100% 保留推文内容，有没有办法可以过滤掉所有表情符号字符并用非多字节字符替换它们，例如 venerable `WHITE MEDIUM SMALL SQUARE (U+25FD)`？我认为这是根据我当前的设置保存数据的最简单方法，但如果我缺少另一个明显的解决方案，我很想听听！

仅供参考，我在 Ubuntu 10.04.4 LTS 上使用现有的 Python 2.6.5。`sys.maxunicode`是 1114111，所以它是 UCS-4 版本。

谢谢阅读。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-12-06T21:11:01.130

所以事实证明这已经被回答了几次，我只是没有完全找到正确的 Google-fu 来找到现有的问题。

*   [Python，转换 4 字节字符以避免 MySQL 错误“不正确的字符串值：”](https://stackoverflow.com/questions/12636489/python-convert-4-byte-char-to-avoid-mysql-error-incorrect-string-value)
*   [向 mysql 插入 4 字节 unicode 引发的警告](https://stackoverflow.com/questions/10798605/warning-raised-by-inserting-4-byte-unicode-to-mysql)

感谢[Martijn Pieters](https://stackoverflow.com/users/100297/martijn-pieters)，解决方案来自正则表达式的世界，特别是这段代码（基于他对上面第一个链接的回答）：

```
import re
try:
    # UCS-4
    highpoints = re.compile(u'[\U00010000-\U0010ffff]')
except re.error:
    # UCS-2
    highpoints = re.compile(u'[\uD800-\uDBFF][\uDC00-\uDFFF]')
# mytext = u'<some string containing 4-byte chars>'
mytext = highpoints.sub(u'\u25FD', mytext) 
```

我要替换的角色是`WHITE MEDIUM SMALL SQUARE (U+25FD)`，仅供参考，但可以是任何东西。

对于像我这样不熟悉 UCS 的人来说，这是一个用于 Unicode 转换的系统，给定的 Python 版本将包括对 UCS-2 或 UCS-4 变体的支持，每个变体都有不同的字符支持上限。

添加此代码后，字符串似乎可以很好地保留在 MySQL 5.1 中。

希望这可以帮助其他处于相同情况的人！

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2014-11-04T16:57:32.160

我尝试了 BigglesZX 的解决方案，但在阅读了 [emoji's wikipedia article][1] 之后，它并没有适用于心脏的表情符号 (❤)不是表情符号的 unicode 范围。

以下代码创建了涵盖标准中 5 个表情符号块的 5 个正则表达式：

```
emoji_symbols_pictograms = re.compile(u'[\U0001f300-\U0001f5fF]')
emoji_emoticons = re.compile(u'[\U0001f600-\U0001f64F]')
emoji_transport_maps = re.compile(u'[\U0001f680-\U0001f6FF]')
emoji_symbols = re.compile(u'[\U00002600-\U000026FF]')
emoji_dingbats = re.compile(u'[\U00002700-\U000027BF]') 
```

这些块可以合并为三个块（UCS-4）：

```
emoji_block0 = re.compile(u'[\U00002600-\U000027BF]')
emoji_block1 = re.compile(u'[\U0001f300-\U0001f64F]')
emoji_block2 = re.compile(u'[\U0001f680-\U0001f6FF]') 
```

它们在 UCS-2 中的等价物是：

```
emoji_block0 = re.compile(u'[\u2600-\u27BF]')
emoji_block1 = compile(u'[\uD83C][\uDF00-\uDFFF]')
emoji_block1b = compile(u'[\uD83D][\uDC00-\uDE4F]')
emoji_block2 = re.compile(u'[\uD83D][\uDE80-\uDEFF]') 
```

所以最后我们可以定义一个包含所有情况的正则表达式：

```
import re
try:
    # UCS-4
    highpoints = re.compile(u'([\U00002600-\U000027BF])|([\U0001f300-\U0001f64F])|([\U0001f680-\U0001f6FF])')
except re.error:
    # UCS-2
    highpoints = re.compile(u'([\u2600-\u27BF])|([\uD83C][\uDF00-\uDFFF])|([\uD83D][\uDC00-\uDE4F])|([\uD83D][\uDE80-\uDEFF])')
# mytext = u'<some string containing 4-byte chars>'
mytext = highpoints.sub(u'\u25FD', mytext) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-29T08:47:36.467

我发现了另一种能够识别表情符号的常规表达式。这个正则表达式由 instagram-engineering 博客上的团队提供

```
u"(?<!&)#(\w|(?:[\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u2388\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u261D\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2648-\u2653\u2660\u2663\u2665\u2666\u2668\u267B\u267F\u2692-\u2694\u2696\u2697\u2699\u269B\u269C\u26A0\u26A1\u26AA\u26AB\u26B0\u26B1\u26BD\u26BE\u26C4\u26C5\u26C8\u26CE\u26CF\u26D1\u26D3\u26D4\u26E9\u26EA\u26F0-\u26F5\u26F7-\u26FA\u26FD\u2702\u2705\u2708-\u270D\u270F\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763\u2764\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC04\uDCCF\uDD70\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDE01\uDE02\uDE1A\uDE2F\uDE32-\uDE3A\uDE50\uDE51\uDF00-\uDF21\uDF24-\uDF93\uDF96\uDF97\uDF99-\uDF9B\uDF9E-\uDFF0\uDFF3-\uDFF5\uDFF7-\uDFFF]|\uD83D[\uDC00-\uDCFD\uDCFF-\uDD3D\uDD49-\uDD4E\uDD50-\uDD67\uDD6F\uDD70\uDD73-\uDD79\uDD87\uDD8A-\uDD8D\uDD90\uDD95\uDD96\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDEF\uDDF3\uDDFA-\uDE4F\uDE80-\uDEC5\uDECB-\uDED0\uDEE0-\uDEE5\uDEE9\uDEEB\uDEEC\uDEF0\uDEF3]|\uD83E[\uDD10-\uDD18\uDD80-\uDD84\uDDC0]|(?:0\u20E3|1\u20E3|2\u20E3|3\u20E3|4\u20E3|5\u20E3|6\u20E3|7\u20E3|8\u20E3|9\u20E3|#\u20E3|\\*\u20E3|\uD83C(?:\uDDE6\uD83C(?:\uDDEB|\uDDFD|\uDDF1|\uDDF8|\uDDE9|\uDDF4|\uDDEE|\uDDF6|\uDDEC|\uDDF7|\uDDF2|\uDDFC|\uDDE8|\uDDFA|\uDDF9|\uDDFF|\uDDEA)|\uDDE7\uD83C(?:\uDDF8|\uDDED|\uDDE9|\uDDE7|\uDDFE|\uDDEA|\uDDFF|\uDDEF|\uDDF2|\uDDF9|\uDDF4|\uDDE6|\uDDFC|\uDDFB|\uDDF7|\uDDF3|\uDDEC|\uDDEB|\uDDEE|\uDDF6|\uDDF1)|\uDDE8\uD83C(?:\uDDF2|\uDDE6|\uDDFB|\uDDEB|\uDDF1|\uDDF3|\uDDFD|\uDDF5|\uDDE8|\uDDF4|\uDDEC|\uDDE9|\uDDF0|\uDDF7|\uDDEE|\uDDFA|\uDDFC|\uDDFE|\uDDFF|\uDDED)|\uDDE9\uD83C(?:\uDDFF|\uDDF0|\uDDEC|\uDDEF|\uDDF2|\uDDF4|\uDDEA)|\uDDEA\uD83C(?:\uDDE6|\uDDE8|\uDDEC|\uDDF7|\uDDEA|\uDDF9|\uDDFA|\uDDF8|\uDDED)|\uDDEB\uD83C(?:\uDDF0|\uDDF4|\uDDEF|\uDDEE|\uDDF7|\uDDF2)|\uDDEC\uD83C(?:\uDDF6|\uDDEB|\uDDE6|\uDDF2|\uDDEA|\uDDED|\uDDEE|\uDDF7|\uDDF1|\uDDE9|\uDDF5|\uDDFA|\uDDF9|\uDDEC|\uDDF3|\uDDFC|\uDDFE|\uDDF8|\uDDE7)|\uDDED\uD83C(?:\uDDF7|\uDDF9|\uDDF2|\uDDF3|\uDDF0|\uDDFA)|\uDDEE\uD83C(?:\uDDF4|\uDDE8|\uDDF8|\uDDF3|\uDDE9|\uDDF7|\uDDF6|\uDDEA|\uDDF2|\uDDF1|\uDDF9)|\uDDEF\uD83C(?:\uDDF2|\uDDF5|\uDDEA|\uDDF4)|\uDDF0\uD83C(?:\uDDED|\uDDFE|\uDDF2|\uDDFF|\uDDEA|\uDDEE|\uDDFC|\uDDEC|\uDDF5|\uDDF7|\uDDF3)|\uDDF1\uD83C(?:\uDDE6|\uDDFB|\uDDE7|\uDDF8|\uDDF7|\uDDFE|\uDDEE|\uDDF9|\uDDFA|\uDDF0|\uDDE8)|\uDDF2\uD83C(?:\uDDF4|\uDDF0|\uDDEC|\uDDFC|\uDDFE|\uDDFB|\uDDF1|\uDDF9|\uDDED|\uDDF6|\uDDF7|\uDDFA|\uDDFD|\uDDE9|\uDDE8|\uDDF3|\uDDEA|\uDDF8|\uDDE6|\uDDFF|\uDDF2|\uDDF5|\uDDEB)|\uDDF3\uD83C(?:\uDDE6|\uDDF7|\uDDF5|\uDDF1|\uDDE8|\uDDFF|\uDDEE|\uDDEA|\uDDEC|\uDDFA|\uDDEB|\uDDF4)|\uDDF4\uD83C\uDDF2|\uDDF5\uD83C(?:\uDDEB|\uDDF0|\uDDFC|\uDDF8|\uDDE6|\uDDEC|\uDDFE|\uDDEA|\uDDED|\uDDF3|\uDDF1|\uDDF9|\uDDF7|\uDDF2)|\uDDF6\uD83C\uDDE6|\uDDF7\uD83C(?:\uDDEA|\uDDF4|\uDDFA|\uDDFC|\uDDF8)|\uDDF8\uD83C(?:\uDDFB|\uDDF2|\uDDF9|\uDDE6|\uDDF3|\uDDE8|\uDDF1|\uDDEC|\uDDFD|\uDDF0|\uDDEE|\uDDE7|\uDDF4|\uDDF8|\uDDED|\uDDE9|\uDDF7|\uDDEF|\uDDFF|\uDDEA|\uDDFE)|\uDDF9\uD83C(?:\uDDE9|\uDDEB|\uDDFC|\uDDEF|\uDDFF|\uDDED|\uDDF1|\uDDEC|\uDDF0|\uDDF4|\uDDF9|\uDDE6|\uDDF3|\uDDF7|\uDDF2|\uDDE8|\uDDFB)|\uDDFA\uD83C(?:\uDDEC|\uDDE6|\uDDF8|\uDDFE|\uDDF2|\uDDFF)|\uDDFB\uD83C(?:\uDDEC|\uDDE8|\uDDEE|\uDDFA|\uDDE6|\uDDEA|\uDDF3)|\uDDFC\uD83C(?:\uDDF8|\uDDEB)|\uDDFD\uD83C\uDDF0|\uDDFE\uD83C(?:\uDDF9|\uDDEA)|\uDDFF\uD83C(?:\uDDE6|\uDDF2|\uDDFC))))[\ufe00-\ufe0f\u200d]?)+ 
```

来源：http: [//instagram-engineering.tumblr.com/post/118304328152/emojineering-part-2-implementing-hashtag-emoji](http://instagram-engineering.tumblr.com/post/118304328152/emojineering-part-2-implementing-hashtag-emoji)

注意：我添加了另一个答案，因为这个答案与我之前的答案不互补。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-04-19T08:57:50.760

我正在使用对输入进行编码的 json 编码器函数。

此函数用于 json.dumps 上的 dict 编码（将其转换为字符串）。（所以我们需要对响应进行一些编辑 - 删除'“'）

这使我能够将表情符号保存到 mysql，并展示它（在网络上）：

```
# encode input 
from json.encoder import py_encode_basestring_ascii
name = py_encode_basestring_ascii(name)[1:-1]

# save
YourModel.name = name
name.save() 
```

# java - 使用 jar 命令更新特定目录中 JAR 中的文件

> ID：13729647
> 
> 赞同：34
> 
> 时间：2012-12-05T18:09:16.277
> 
> 标签：java, jar

所以我一直在寻找这个答案的高低，显然还没有找到一个令人满意的答案。

问题是我想更新 JAR 中的 JAR（或任何文件），但所述文件位于文件夹结构内，我想避免在 JAR 外部复制，以便我可以更新它。

例子：

```
Foo.jar (root directory)
/
|->/folder1
|
|->/folder2
|
|->/foo
    |
    |-->/bar
         |
         |---->/baz
               |
               |------>file_to_update.jar 
```

所以，如果我想使用*jar*命令更新它，我必须首先在 JAR 之外创建相同的文件夹结构，然后执行

```
jar -uf Foo.jar -C foo/bar/baz/file_to_update.jar 
```

但是我想避免创建这个文件夹结构，因为对于某些文件它可能很深，而且我可能需要更新整个容器 JAR 中的选定文件，所以我不想创建这么多具有​​特定结构的文件夹所以*jar*命令可以更新它们。

换句话说，我想告诉*jar*命令使用特定源目录中的特定源文件更新特定目标目录中的特定目标文件。

即类似的东西

```
jar -uf Foo.jar -sourceFile /x/y/z/filetoupdate -destFile /a/b/c/filetoupdate 
```

（我知道这种语法不起作用，它只是为了举例说明我需要什么）。

这可以做到吗？*当jar*命令可以找到它的匹配项或其他东西时，我绝对需要模仿整个文件夹结构，这让我感到非常奇怪，因为我可能需要更新 100 个文件夹深的文件夹结构中的文件. 仅仅为了更新文件而重现过于复杂。

另外，我知道可以使用常规的 ZIP 实用程序，但是我在 Linux 中可用的那个没有更新文件，即使它说它更新了（重新打开 jar 后，它的旧版本完好无损），现在我不能去寻找另一个（公司政策，没有时间，测试问题，你的名字）。

最后，如果我可以从命令行执行此操作，这意味着我可以创建一个批处理文件来更新大量特定文件，而无需创建文件夹结构。

我忘了说我也想避免解压缩、更新、重新压缩整个东西，因为这个 JAR 可以上升到 2GB，所以这样做需要一段时间，基本上，添加一个小资源文件到我的巨大的罐子。

非常感谢您对此的任何帮助！

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2013-01-09T19:03:36.220

正如公认的答案已经指出的那样，您既不能使用 the`zip`也不能使用`jar`命令将文件系统上的**特定文件**插入到压缩文件内的特定目录中。

但是有一个**解决方法**，简而言之，它首先在压缩文件中提取特定文件，您可以对其进行更新，然后将其放回压缩文件中：

**1.提取单个文件：**
考虑一个具有以下内容的jar

```
$ jar tvf foo.jar 
 0 Thu Jan 10 00:05:06 IST 2013 META-INF/
68 Thu Jan 10 00:05:06 IST 2013 META-INF/MANIFEST.MF
 0 Thu Jan 10 00:04:30 IST 2013 x/
 0 Thu Jan 10 00:07:36 IST 2013 x/b/
 9 Thu Jan 10 00:07:36 IST 2013 x/b/hello.txt
 0 Thu Jan 10 00:04:30 IST 2013 x/a/ 
```

要仅提取 hello.txt，您必须提供要提取的文件的完全限定路径。Jar 也会创建适当的文件夹。

*例子 ：*

```
$ jar xvf foo.jar x/b/hello.txt
inflated: x/b/hello.txt

$ tree x/
x
└── b
    └── hello.txt  
1 directory, 1 file 
```

**2.更新单个文件**

1.  修改解压文件
2.  使用 'u' 标志更新 jar。提供展开的目录 root 和 jar 应更新其下的所有路径元素。

*例子：*

```
$ jar vfu foo.jar x/
adding: x/(in = 0) (out= 0)(stored 0%)
adding: x/b/(in = 0) (out= 0)(stored 0%)
adding: x/b/hello.txt(in = 23) (out= 11)(deflated 52%) 
```

**3\. 我用的是哪个版本的 jar？**

我`jar`在 Fedora 17 上与 JDK 7 捆绑使用。

* * *

我已经验证了这里提到的所有步骤。希望这可以帮助。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-13T20:43:53.410

[4129445：用于增量更新](http://bugs.sun.com/bugdatabase/view_bug.do;jsessionid=313c4381e5a47920fbef7c4de1a16?bug_id=4129445)Sun/Oracle 错误数据库中的 ZIP 文件的 API 要求在 java api 中实现此功能。

从评价：

“很容易同情那些希望修复这个错误的人。同情那些无意中覆盖了已经被正在运行的 JVM 使用的 JAR 文件的人也许更容易同情。”

和

“如果 jar 和 zip API 从一开始就允许可变的 zip 文件，那就太好了。但是在这一点上，从 Java 中为 jar 和 zip 文件增加可变性（或者更确切地说，增加改变它们的便利性）似乎可能会引入更难调试的问题。”

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-09T03:23:40.637

[前面的讨论](https://stackoverflow.com/questions/7548900/updating-jars-contents-from-code)显示了一些用于更新 zip（或 jar）文件的 Java 源代码。

我并不完全清楚这是否真的比 using 更快`jar -u`，但至少您应该能够调整该代码，这样您就不必在磁盘上重新创建文件结构。

编辑：[这是](http://docs.oracle.com/javase/1.4.2/docs/tooldocs/windows/jar.html)关于“jar”实用程序的文档 - 您可以自己查看您正在寻找的特定行为，虽然它很有用，但不存在。

我认为原因是命令行界面基本上是 Unix/Linux 'tar' 命令的克隆。当然，它生成的是 zip 格式，而不是 tar。

编辑 #2 - 我想到要将文件添加到 zip，您只需从文件末尾剥离中央目录，附加新条目，然后重新写入中央目录。更新将是同样的事情，除了将条目添加到目录之外，您将更新现有目录条目以指向新的 zip 条目。

在探索这种可能性时，我发现 Java 7 包含一个[zip 文件系统提供程序](http://docs.oracle.com/javase/7/docs/technotes/guides/io/fsp/zipfilesystemprovider.html)，看起来它可以做到这一点，并且可以构成您想要做的解决方案的基础。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-13T19:54:23.013

我认为这是由于 java.util.zip 包中的类是如何工作的。他们坐在溪流之上。

[ZipFile](http://www.docjar.com/html/api/java/util/zip/ZipFile.java.html)类建立在 ZipFileInputStream 之上。编写 zipfile 是通过将 ZipEntries 逐个提供给 ZipOutputStream 来完成的。

我假设 jar 可执行文件是建立在这些类之上的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-09-08T14:35:35.850

我也试图在不复制 jar 外部的 jar 文件结构的情况下更新 jar，并且由于某种原因[jar uf jarFileName -C ... 命令](https://docs.oracle.com/javase/tutorial/deployment/jar/update.html)永远不会让我将文件复制到 jar 中的子目录。然后我尝试使用 ubuntu 14.04 的内置存档管理器将文件剪切并粘贴到 jar 中（即右键单击 jar 文件并选择“使用存档管理器打开”，然后将文件粘贴到 jar 文件结构中的任何位置），它工作. 这不是一个 cli 解决方案，但它可以工作。希望这可以节省其他人一些时间。

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2017-07-20T06:04:06.647

它有效，但它不是您正在查看的确切解决方案。

我要求提及整个路径，而不是手动创建文件夹结构，因此 mkdir 也会创建文件夹和子目录。希望这会有所帮助....

```
set /p Folder=where you want to move inside jar 
set /p File=Mention path of file to be moved 
set /p Jarfile=Where is your jar file
mkdir %Folder%
copy %File% %Folder%
jar -uvf %Jarfile% %File%
rd /s /q %Folder%
rmdir %Folder% 
```

# sql - 树的迭代深度

> ID：13729648
> 
> 赞同：0
> 
> 时间：2012-12-05T18:09:23.167
> 
> 标签：sql, postgresql, plpgsql

有问题的代码：

```
CREATE OR REPLACE FUNCTION foo(searchid INTEGER)
RETURNS INTEGER AS
$$
DECLARE
    level INTEGER := 0;
    mid INTEGER := searchid;
BEGIN
    WHILE EXISTS(SELECT id INTO mid FROM tbl1 WHERE parent_id=mid) LOOP
        level := level + 1;
    END LOOP;
    RETURN level;
END;
$$
LANGUAGE 'plpgsql' IMMUTABLE; 
```

我需要找到 id 元素的树深度`searchid`，我编写了一个与上面略有不同的函数，它`mid NOTNULL`用作 while 循环的条件并且它可以工作。

但是，当我尝试`EXISTS`直接在 WHILE 条件下使用**上面发布的代码**时，postgresql 说：

```
SQL error:

ERROR:  syntax error at or near "$1"
LINE 1: SELECT  EXISTS(SELECT id INTO  $1  FROM tbl1 WHERE ... 
```

所以它对我的代码做了一些奇怪的转换，这使得它在语法上是错误的。

如何解决？

它在 postgresql 8.3.17 上运行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T21:18:37.917

仅作记录：

如果您使用的是最新版本的 Postgres，则可以使用一条语句更有效地执行此操作：

```
with recursive tree as (
   select id, parent, 1 as level
   from tbl1
   where id = 1
   union all
   select c.id, c.parent, p.level + 1
   from tbl1 c
     join tree p on c.parent = p.id
)
select max(level)
from tree 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T20:47:40.897

关键错误是您不能在构造`SELECT INTO`内部分配变量`EXISTS`。`SELECT`结构内的`EXISTS`项目被忽略。

我重写了函数以简化并使其更安全：

```
CREATE OR REPLACE FUNCTION foo(_searchid int, OUT _level int)
  RETURNS int
  LANGUAGE plpgsql STABLE AS
$func$
BEGIN
   _level := 0;
   LOOP
      SELECT INTO _level, _searchid
                  _level + 1, t.id
      FROM   tbl1 t
      WHERE  t.parent_id = _searchid;

      EXIT WHEN NOT FOUND;
   END LOOP;
END
$func$; 
```

称呼：

```
SELECT foo(1); 
```

### 要点

*   防止循环无限是您的责任。

*   参数的`_`前缀是为了避免与使用表的潜在列发生命名冲突。

*   我使用在某些 SQL 语句（如）找到一行之后（并且仅在之后）[`FOUND`](https://www.postgresql.org/docs/current/plpgsql-statements.html#PLPGSQL-STATEMENTS-DIAGNOSTICS)设置的特殊变量。`TRUE``SELECT INTO`

*   [`EXIT`](https://www.postgresql.org/docs/current/plpgsql-control-structures.html#PLPGSQL-CONTROL-STRUCTURES-LOOPS)当没有找到行时，使用该命令退出循环。

*   `_level`内增量`SELECT`。（或者在循环体中，它只是一个小小的简化。）

*   从 PostgreSQL **9.1**开始，您可以分配给`IN`参数，所以我（ab）使用`_searchid`并且不需要 DECLARE 任何其他变量。如果您稍后在函数中需要原始参数值，请不要这样做。

*   该函数不应该被声明`IMMUTABLE`，因为它访问一个表。我做到了`STABLE`。您*可以*使该函数`IMMUTABLE`“作弊”并能够在索引创建中使用它（例如）-但是如果在基础表更改后此类索引中断，则由您自己决定。

### 递归 CTE

使用现代 PostgreSQL，您还可以使用[递归 CTE](https://www.postgresql.org/docs/current/queries-with.html)来完成这项工作。这就是@a_horse 在[他的评论](https://stackoverflow.com/questions/13729648/iterative-depth-of-tree#comment18866745_13729648)中暗示的- 哦，以及他现在作为[answer](https://stackoverflow.com/a/13732632/939860)发布的内容。
另一个例子（SO 上的许多例子）[在这里](https://stackoverflow.com/q/13391457/939860)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T12:07:39.880

也许您不想编写自己的函数，而是将 postgres 扩展与创建用于呈现存储在表中的分层数据的函数一起使用？它被称为 connectby，它是 tablefunc 扩展的一部分。如何使用您可以在[此处找到的功能。](http://www.postgresql.org/docs/current/static/tablefunc.html)

要安装扩展：

```
 CREATE EXTENSION tablefunc; 
```

您可以选择许多可能性：开始行的键值，下降到的最大深度，或零表示无限深度，或字符串以在分支输出中分隔键。

# resharper - 从命令行重新锐化

> ID：13729649
> 
> 赞同：5
> 
> 时间：2012-12-05T18:09:23.847
> 
> 标签：resharper

我想在许多解决方案上使用 ReSharper Adjust Namespaces 功能。我想通过创建一个使用 ReSharper API 的命令行应用程序来自动化这个过程。

我查看了 ReSharper OpenAPI，但它似乎适合在活动的 Visual Studio 会话中使用 ReSharper API。我希望能够从命令行使用 ReSharper API。

这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T09:12:45.657

你是对的：开放 API 通常适合在 VS 中使用。虽然理论上可以在 VS 之外使用它，但它在技术上具有挑战性，并且可能会或可能不会工作，具体取决于您的使用场景。

但是，没有理由不能直接在 Visual Studio 中跨多个解决方案调整命名空间 - 当然，这需要在执行操作之前将每个解决方案实际加​​载到 shell 中。就目前情况而言，这种方法是您最好的选择。

# java - Runtime.maxMemory() 和 -Xmx

> ID：13729652
> 
> 赞同：10
> 
> 时间：2012-12-05T18:09:35.763
> 
> 标签：java, jvm

我期待 Runtime.maxMemory() 准确地返回 -Xmx 但它返回一个较低的值。那么它返回了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T18:14:20.750

> -Xmx 标志的解释取决于 VM。包括 HotSpot 在内的一些 VM 会对该选项的有效值实施一个下限。CCC 提案不应该以这种方式提到 -Xmx 标志。

[参考](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=4391499)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-05T18:11:20.150

**返回 Java 虚拟机将尝试使用**的最大内存量，jvm 可能不会使用您定义`-Xmx`为仅堆参数的所有内存。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T18:18:42.310

[-Xmxn](http://docs.oracle.com/javase/1.3/docs/tooldocs/solaris/java.html#nonstandard)

> 指定内存分配池的最大大小（以字节为单位）。此值必须是大于 2MB 的 1024 的倍数。附加字母 k 或 K 表示千字节，或附加 m 或 M 表示兆字节。默认值为 64MB。此值的上限在 Solaris 7 和 Solaris 8 SPARC 平台上约为 4000m，在 Solaris 2.6 和 x86 平台上约为 2000m，减去开销。例子：
> 
> ```
>  -Xmx83886080
>        -Xmx81920k
>        -Xmx80m 
> ```

[最大内存（）](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Runtime.html#maxMemory%28%29)

> 返回 Java 虚拟机将尝试使用的最大内存量。如果没有固有限制，则返回 Long.MAX_VALUE 值。

# python - Python下载没有页眉和页脚的HTML电子邮件

> ID：13729655
> 
> 赞同：0
> 
> 时间：2012-12-05T18:09:47.800
> 
> 标签：python, email, imap, html-email

是否可以在不附加页眉和页脚的情况下使用 Python 获取电子邮件正文？我目前的代码是

```
import imaplib
username = "username"
password = "password"
imap_server = imaplib.IMAP4_SSL("imap.gmail.com",993)
imap_server.login(username, password)
imap_server.select('INBOX')

def get_emails(email_ids):
    """
    Takes in an array of email id's as input eg: ['1','7']
    Returns an array of html strings corresponding to the given email id's"""
    data = []
    for e_id in email_ids:
        status, response = imap_server.fetch(e_id, '(UID BODY[TEXT])')
        data.append(response[0][1])
    return data 
```

一个输出的 HTML 字符串是这样的：

```
--0016e6d9770b63df7104cebab205 Content-Type: text/plain; charset=ISO-8859-1
This is some html code

--0016e6d9770b63df7104cebab205 Content-Type: text/html; charset=ISO-8859-1 <html>
    <body>
<p>This is some html code</p>
</body>
</html>
--0016e6d9770b63df7104cebab205-- 
```

是否可以只使用没有标题的 HTML？例：我想看看

```
<html>
    <body>
<p>This is some html code</p>
</body>
</html> 
```

作为输出。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T19:27:30.697

您应该使用 Python 的电子邮件支持类，例如[email.parser](http://docs.python.org/2/library/email.parser.html)来解析您收到的消息，然后获取适当的 MIME 部分。或者，您可以使用 IMAP 的 BODYSTRUCTURE 响应并使用它来确定您要下载的电子邮件的确切内容。

# javascript - 下划线 _.debounce() ：如何仅在最后一次收到时执行方法？

> ID：13729656
> 
> 赞同：4
> 
> 时间：2012-12-05T18:09:47.903
> 
> 标签：javascript, underscore.js

`_.debounce()`最多每 x 毫秒触发`_.debounce(function,x`) .. 我想调整它以仅在**最后**`x`一个之后执行一个方法 millis 。 **`_.debounce()`**

 **我该怎么做？（我已经读过`$.debounce`，顺便说一句。）

我试过这样做，但它不是防弹的（更不用说对接丑陋了）

```
var timeout;
$(window).on("resize",_.debounce(function(){
  if(timeout){
    clearTimeout(timeout);
  }
  //when debounce comes in we cancel it.. this means only the latest debounce actually fires.
  //not bullet proof
  timeout = setTimeout(resizeMap,100);
},50)); 
```

如何优雅地做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T19:37:53.660

阅读您的评论后，现在更清楚了。

> 好吧，也许是我的浏览器（不频繁的调整大小事件，导致调用 _debounce？在 Chrome 上进行测试），但是在调整大小时，我不断收到对去抖动函数主体的多次调用。好像它的行为与 _.throttle 完全一样，现在我想起来了.. 奇怪的东西。

50ms 是一个相当短的去抖时间。我打赌它按预期工作，你只需要更长的去抖动时间。50ms 是 1/20 秒。我不确定窗口调整大小事件会这么快触发。但即使是这样，在调整大小时鼠标移动中最微小的停顿也可能会触发这种情况。

在你的 debounced 函数中删除所有这些`setTimeout`废话并将 debounce 时间设置为更像的东西`250`，我敢打赌它会像你想要的那样工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T18:20:42.257

来自[http://underscorejs.org/#debounce](http://underscorejs.org/#debounce)：

> `_.debounce(function, wait, [immediate])`
> 
> 传递参数以在`true`等待 间隔的前沿而不是后沿触发函数*。*在防止意外双击“提交”按钮再次触发等情况下很有用。`immediate``debounce`

 *所以，`$(window).on("resize",_.debounce(resizeMap,100))`应该只是工作。***

# c++ - 未命名对象和临时对象是否等效？

> ID：13729657
> 
> 赞同：7
> 
> 时间：2012-12-05T18:09:51.357
> 
> 标签：c++

在我努力理解右值引用的过程中，我一直在思考编译器何时会确定特定的函数参数是右值引用，以及何时会确定它是左值引用。

（此问题与参考折叠有关；请参阅[要求的参考折叠规则的简明解释：(1) A& & -> A& 、(2) A& && -> A& 、(3) A&& & -> A& 和 (4) A&& && -> A&&](https://stackoverflow.com/questions/13725747/concise-explanation-of-reference-collapsing-rules-requested-1-a-a-2) )。

特别是，我一直在考虑编译器是否*总是*将未命名的对象视为右值引用和/或编译器是否*总是*将临时对象视为右值引用。

反过来，这让我质疑未命名对象是否等同于临时对象。

我的问题是：未命名的对象总是临时的吗？临时对象总是未命名吗？

换句话说：未命名对象和临时对象是否*等效*？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T18:40:17.410

可以命名临时对象。

非常常见的情况 - 作为参数传递给函数时。另一种不太常见的情况 - 将 const 引用绑定到函数的右值结果。

```
int f(int i) { return i + 1; }
int g() { const int &j = f(1); return j; } 
```

未命名的对象通常是临时的，但并非总是如此。例如 - 匿名联合对象：

```
struct S
{
   union { int x; char y; };
} s; 
```

当然，任何由`operator new`.

也许还有其他情况，但即使只有这些也可以作为假设的反例:)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-05T18:31:27.500

I might be wrong, since I'm not sure what the definition of "unnamed object" is. But consider the argument of the foo() function below:

```
void foo(int)
{ /* ... */ }

int main()
{ foo(5); } 
```

foo()'s argument is unnamed, but it's not a temporary. Therefore, unnamed objects and temporary objects are not equivalent.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-05T19:00:16.333

> 我一直在思考什么时候编译器会确定一个特定的函数参数是一个右值引用，什么时候它会确定它是一个左值引用。

我假设您正在谈论具有通用参考**参数**的函数模板，像这样？

```
template<typename T>
void foo(T&& t)
{
} 
```

规则非常简单。如果参数是类型的右值`X`，那么`T`将被推断为是`X`，因此`T&&`意味着`X&&`。如果参数是类型的左值`X`，那么将推`T`导出为`X&`，因此`T&&`意味着`X& &&`，它被折叠成`X&`。

如果你真的在问**arguments**，那么这个问题没有多大意义，因为 arguments 从来都不是左值引用或右值引用，因为 type 的表达式`X&`会立即转换为 type 的表达式`X`，它表示引用的对象。

但是，如果您实际上的意思是“编译器如何区分左值参数和右值参数？” （注意缺少的**参考**），那么答案很简单：编译器知道每个表达式的值类别，因为标准为每个可能的表达式指定了它的值类别是什么。例如，函数的调用是可以属于以下三个值类别之一的表达式：

```
X   foo();   // the expression foo() is a prvalue
X&  bar();   // the expression bar() is an lvalue
X&& baz();   // the expression baz() is an xvalue 
```

（当然，前提是它`X`本身不是引用类型。）

如果这些都不能回答您的问题，请澄清问题。此外，[有些相关的常见问题解答](https://stackoverflow.com/a/11540204/252000)。

# android - 对于 Android 上的应用内购买，是否必须从 Google Play 安装该应用？

> ID：13729664
> 
> 赞同：1
> 
> 时间：2012-12-05T18:10:06.193
> 
> 标签：android, in-app-purchase, google-play

为了在 Android 上购买应用程序，该应用程序是否必须通过 Google Play 分发？为了澄清，有两个问题：

*   如果我`com.my.app`通过 Google Play 商店和我自己的方法创建和分发它，无论以哪种方式安装的应用程序都可以在应用程序购买中购买吗？

*   如果我创建`com.my.app`并仅通过我自己的方法分发它，人们是否能够进行应用内购买？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T18:41:35.720

如果您在 Google Play 内部和外部分发具有相同签名的相同 APK，那么应用购买应该可以工作。应用购买仅适用于等于或低于 Play 商店的 APK 版本。

请记住，应在手机上安装 Google Play apk 以进行应用购买工作。

# java - 可运行的 JAR 文件导出

> ID：13729669
> 
> 赞同：1
> 
> 时间：2012-12-05T18:10:27.060
> 
> 标签：java, file, export

我有一个 java 项目。我想将它导出到可运行的 jar 文件。

我使用eclipse来做到这一点。

但是当我运行创建的 jar 文件时，我收到`Error ~ file not found : config\file.xml`了（系统找不到指定的路径）。

如何导出文件夹以在任何地方运行成功的 jar 文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T18:42:07.477

如果您不需要在 jar 之外配置配置，只需将其包含在其中并使用 getClass().getClassLoader().getResourceAsStream("config.xml") 之类的东西（如果它位于“root”级别） " 装在罐子里

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T18:17:46.923

听起来您的应用程序正在使用文件系统中的相对路径查找配置文件。为了使 jar 完全自给自足，必须修改代码以在类路径中查找配置文件，并且该文件必须包含在 jar 中。

为此，必须将打开文件的代码更改为使用 `Class#getResourceAsStream()`而不是使用`File`对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T18:21:12.817

如果您的项目目录中有一个配置文件夹，并且有一个要从中读取的文件，您也必须将此文件夹复制到您的 jar 文件的目录中

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T18:15:42.260

我建议您使用 ant 或其他构建系统。这是一个关于 ant 的简短教程：

[http://ant.apache.org/manual/tutorial-HelloWorldWithAnt.html](http://ant.apache.org/manual/tutorial-HelloWorldWithAnt.html)

在 ant 构建脚本中使用 xml 创建 jar 文件非常容易。我已经做过很多次了：

```
<target name="jar" depends="compile">
    <mkdir dir="${jar.dir}"/>
    <jar destfile="${jar.dir}/${ant.project.name}.jar" basedir="${classes.dir}">
        <manifest>
            <attribute name="Main-Class" value="${main-class}"/>
        </manifest>
    </jar>
</target> 
```

其他人可能会建议maven之类的，但实际上它们都是不错的选择。从 Eclipse 等 IDE 导出确实不是一个可行的长期解决方案。

# java - setBackgroundDrawable() 和 setBackground() 的区别

> ID：13729675
> 
> 赞同：4
> 
> 时间：2012-12-05T18:10:50.857
> 
> 标签：java, android

我刚刚将我的 Android 项目的构建目标升级到 API 17，我现在收到关于 setBackgroundDrawable 被弃用的警告。答案似乎是使用 setBackground，但这在旧版本中不可用。

使用新方法是否有任何实际优势，或者 Google 只是想更改名称？如果两者工作相同，我认为将我的代码与平台版本检查或反射复杂化没有任何意义。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-05T18:14:33.167

> 使用新方法是否有任何实际优势，或者 Google 只是想更改名称？

他们似乎只想更改名称，请查看[源代码](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.1.1_r1/android/view/View.java#View.setBackground%28android.graphics.drawable.Drawable%29)：

```
public void setBackground(Drawable background) {
    //noinspection deprecation
    setBackgroundDrawable(background);
}

@Deprecated
public void setBackgroundDrawable(Drawable background) { ... } 
```

所有的工作仍然在`setBackgroundDrawable()`. 目前，您可以忽略弃用警告，但要了解将来某些 API`setBackgroundDrawable()`将被删除。

* * *

如果您好奇，[`setBackgroundResource(int resid)`](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.1.1_r1/android/view/View.java#View.setBackgroundResource%28int%29)只需从资源 ID 创建一个可绘制对象并调用`setBackground()`（再次调用`setBackgroundDrawable()`）...

# jquery - jQuery - 使用可拖动项目预填充可放置空间

> ID：13729677
> 
> 赞同：0
> 
> 时间：2012-12-05T18:10:58.277
> 
> 标签：jquery, jquery-ui-draggable, jquery-ui-droppable

我正在使用拖放的jQuery功能。

有没有用可拖动项目预先填充可放置空间？

谢谢，

H。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T16:13:43.317

出于提供信息的目的，我最终结合使用 PHP 和 HTML 来实现所需的结果。

# sql-server-2005 - 通过 table-id 或 table-index 访问 Altering & querying Sql Server 2005 Table

> ID：13729679
> 
> 赞同：0
> 
> 时间：2012-12-05T18:11:00.910
> 
> 标签：sql-server-2005, asp.net-4.0, database-schema

有没有办法通过它`Unique Index`而不是它来寻址/引用 SQL SERVER 表`TableName` **？**

我的应用程序正在使用多个`html`表格，这些表格实际上都在一个表格中，

对于现有表的`CRUD`机会，（`R/U`多于`Create`或）。`delete``SQL`

现在...我需要以**相同的更新形式混合****两个**单独的表（这是我的第一个“混合”）

 **因为我`Jquery`用来将参数传递给 `C#`后面的代码，所以它会处理更新操作，并且能够区分更新发布/请求的来源

我知道，我可以通过它来解决这个问题`TableName`，

我只是想确定一下，当我在网上搜索一些信息时，

我已经遇到了条款的结果`sql server 2005`......`table` `index`或者`id`，

尽管所有结果似乎都与我可以称之为某种“操纵”有关，以便**创建**一些索引系统/模式（我认为它就像`hdd`s has a `FAT table`）

并且我强调“创建”，因为我实际上是在寻找“TableID”的现有/内置数值，就像`Table`有行一样，每一行都有它的行`IDENTITY`- 列。

所以在这一点上，我要回到顶部的真正问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T04:34:33.147

所以这就是我最终想到的：一个简单的结构+一个类来保存数据库的值

```
 public class DBMetaDetails
            {
                public struct DbTable
                {
                    public DbTable(string tableName, int tableId): this()
                    {
                        this.Name = tableName;
                        this.ID = tableId;
                    }
                    public string HtmlOutput;
                    public string Name { get; private set; }
                    public int ID { get; private  set; }
                }
            }

public sealed class tblsIDs
{
    public const int firstTbl= 1, SecondTbl = 2;

} 
```

另一个类应该是表名

```
public sealed class tblsNames
{
    public const string  firstTbl= "firstTbl", SecondTbl = "SecondTbl";

} 
```

另一个将保存表列名称...等**

# jquery - jquery rebind() 在特定时间禁用事件，然后重新绑定它们

> ID：13729681
> 
> 赞同：1
> 
> 时间：2012-12-05T18:11:05.537
> 
> 标签：jquery, bind, unbind

单击按钮后，我的脚本会加载新内容。只要它正在加载，我不希望元素列表是可点击的。

有没有办法解除这些元素的点击事件，加载内容，然后正确地“重新绑定”事件？

我要防止的是每个点击功能/元素中的 if 语句。

这是我尝试过的：

```
$(load_button).click(function(){
    $('a').each(function(){
        var dis_e = $(this).data('events');
        $(this).data('disabled-events', dis_e);
    }).unbind('click');

    $(some_content).load(function(){
        $('a').each(function(){
            var dis_e = $(this).data('disabled-events');
            $(this).removeData('disabled-events');
            $(this).bind('click', dis_e);
        });
    });
}); 
```

更新：

它还应该防止元素（在这种情况下）警告“点击”：

```
$('a').click(function(){
   alert('click');
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T18:15:02.330

您可以为您的元素临时绑定一个具有特定命名空间的新点击事件，这将阻止点击事件传播，并且当您的内容加载时，您可以取消绑定事件。

```
$("a").bind("click.disabled", function(e) {
    e.stopImmediatePropagation();
    return false;
}); 
```

后来：

```
$("a").unbind("click.disabled"); 
```

编辑：正如 Yoshi 所指出的，这期望您的单击事件处理程序在您的自定义事件之前附加到元素。所以我可以看到两种解决方法：

1.  要么在创建元素时始终将此事件处理程序绑定到每个元素，以便始终在自定义单击事件处理程序之前调用它们。`stopImmediatePropagation()`而且您仅`return false`在加载数据时才这样做。
2.  或者您检查这个[其他问题](https://stackoverflow.com/questions/2360655/jquery-event-handlers-always-execute-in-order-they-were-bound-any-way-around-t)，以便您的新事件处理程序位于列表的第一位。

如果您选择第一种方法，您的事件将是这样的：

```
var clicDisabled = false;
$("a").bind("click.disabled", function(e) {
    if (true == clicDisabled) {
        e.stopImmediatePropagation();
        return false;
    }
}); 
```

然后在加载内容时将变量`clicDisabled`临时设置为 true。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T08:23:56.583

根据您的回答，我编写了以下插件：

```
(function($){
    $.fn.rebind = function(){
        var init = 'init-rebind';
        return this.each(function() {
            var is_init = $(this).data(init);
            if (!is_init){
                $(this).data(init, true);
                $(this).bind('click.rebind mouseenter.rebind mouseleave.rebind', function(e){
                    if ($(this).hasClass('disabled')){
                        e.stopImmediatePropagation();
                        e.preventDefault();
                    }
                });
            }
        });
    };
})(jQuery); 
```

我决定添加/删除“禁用”类，而不是使用全局变量，以便在 css 中也有控制权。

查看[演示](http://jsfiddle.net/Mtscx/)！

THX 给大家！

* * *

**更新：**看看[这个](https://stackoverflow.com/questions/13940591/how-to-bind-unbind-and-rebind-click-events-in-jquery)！！

# android - Robolectric getResources() 抛出 RuntimeException (Android)

> ID：13729682
> 
> 赞同：5
> 
> 时间：2012-12-05T18:11:06.627
> 
> 标签：android, unit-testing, robolectric

我正在尝试使用 Robolectric 框架为我的 android 项目创建单元测试。我从 eclipse android 项目向导创建的一个空的 Android 项目开始。

在另一个 java 项目中，我使用此代码尝试运行基本测试：

```
@RunWith(RobolectricTestRunner.class)
public class ApiTest {

    @Before
    public void setUp() throws Exception {
    }

    @After
    public void tearDown() throws Exception {
    }

    @Test
    public void shouldHaveApplicationName() throws Exception {
        String appName = new RobolectricActivity().getResources().getString(R.string.app_name);
        assertEquals(appName, "TestDemo");
    }

    @Test
    public void testSomethingMeaningfulToMyApp() {
        fail("not implemented");
    }

} 
```

我已经按照[Robolectric 快速入门指南](http://pivotal.github.com/robolectric/eclipse-quick-start.html)中的说明配置了所有内容。

但是，当我尝试运行此测试类时，我在访问 getResources() 函数的行中出现以下异常：

```
java.lang.RuntimeException: Did your shadow implementation of a method throw an exception? Refer to the bottom of this stack trace.
at com.xtremelabs.robolectric.ShadowWrangler.methodInvoked(ShadowWrangler.java:86)
at com.xtremelabs.robolectric.RobolectricInternals.methodInvoked(RobolectricInternals.java:50)
at android.content.ContextWrapper.getResources(ContextWrapper.java)
at com.xtremelabs.robolectric.shadows.ShadowContextWrapper.getResources(ShadowContextWrapper.java:40)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:616)
at com.xtremelabs.robolectric.ShadowWrangler.methodInvoked(ShadowWrangler.java:78)
at com.xtremelabs.robolectric.RobolectricInternals.methodInvoked(RobolectricInternals.java:50)
at android.content.ContextWrapper.getResources(ContextWrapper.java)
at ApiTest.shouldHaveApplicationName(ApiTest.java:28)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:616)
at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:44)
at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:41)
at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)
at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:28)
at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:31)
at com.xtremelabs.robolectric.RobolectricTestRunner$1.evaluate(RobolectricTestRunner.java:164)
at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:76)
at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50)
at org.junit.runners.ParentRunner$3.run(ParentRunner.java:193)
at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:52)
at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:191)
at org.junit.runners.ParentRunner.access$000(ParentRunner.java:42)
at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:184)
at org.junit.runners.ParentRunner.run(ParentRunner.java:236)
at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:49)
at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)
Caused by: java.lang.reflect.InvocationTargetException
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
at  sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:616)
at com.xtremelabs.robolectric.ShadowWrangler.methodInvoked(ShadowWrangler.java:78)
... 36 more
Caused by: java.lang.ExceptionInInitializerError
at android.os.Build$VERSION.<clinit>(Build.java:95)
at android.content.res.Resources.<clinit>(Resources.java:57)
at com.xtremelabs.robolectric.shadows.ShadowApplication.getResources(ShadowApplication.java:74)
... 41 more
Caused by: java.lang.NullPointerException
at android.os.SystemProperties.<clinit>(SystemProperties.java:35)
... 44 more 
```

似乎影子类设置不正确，我没有在 google 或 stackoverflow 上找到解决此问题的方法。

你对我有什么建议吗？非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-13T20:29:22.110

您是否尝试过为调用您要测试的 Activity 的测试类创建一个构造函数？例如：

```
public class ApiTest {

    public ApiTest() {
        super(MainActivity.class);
    }

    //...the rest of your test class
} 
```

我自己还在学习如何在 Android 中进行单元测试和模拟，所以如果这对你不起作用，我提前道歉。

# c++ - 在 C/C++ 中 x[i] * y[i++] 总是等于 x[i] * y[i]

> ID：13729683
> 
> 赞同：11
> 
> 时间：2012-12-05T18:11:08.810
> 
> 标签：c++, performance, compiler-optimization

> **可能重复：**
> [谁能解释这些未定义的行为（i = i++ + ++i，i = i++ 等）](https://stackoverflow.com/questions/949433/could-anyone-explain-these-undefined-behaviors-i-i-i-i-i-etc)
> [在 printf 中增加值](https://stackoverflow.com/questions/13492043/increment-values-in-printf)

我有两个双精度数组`x`和`y`整数`i`。我的问题是声明是否：

```
double res = x[i] * y[i++]; 
```

总是等于语句：

```
double res = x[i] * y[i];
i++; 
```

是否有可能某些编译器会`x[i] * y[i++]`变成`y[i++] * x[i]`，这显然会产生不同的结果？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-05T18:17:45.983

否 -`x[i] + y[i++]`具有未定义的行为。您正在修改 1 的值`i`并使用该值`i`而没有中间序列点，这会产生未定义的行为¹。

* * *

1.  在 C++11 中，该标准消除了“序列点”术语，但效果保持不变——两者相对于彼此是无序的。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-05T18:12:47.537

不，当增量发生时它是未定义的。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-12-05T18:16:06.833

代码修改`i`并使用它的值而没有中间的序列点，因此行为是未定义的。语言定义在这里没有强加任何要求。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-05T18:14:49.470

不，

i++ + i++ 的值 在和中[未定义](http://www.stroustrup.com/bs_faq2.html#evaluation-order)。 `C``C++`

如果您在同时写入变量的表达式中读取变量两次，则结果未定义。不要那样做。另一个例子是：

```
v[i] = i++; 
```

未定义意味着它的编译器依赖。
由于评估顺序，一些编译器可能也会警告您未定义。非常好的C++[参考资料](http://www.stroustrup.com/bs_faq2.html#evaluation-order)

[1](http://www.stroustrup.com/bs_faq2.html#evaluation-order) [http://www.stroustrup.com/bs_faq2.html#evaluation-order](http://www.stroustrup.com/bs_faq2.html#evaluation-order)

# actionscript-3 - 使用变量替换部分代码？AS3

> ID：13729684
> 
> 赞同：0
> 
> 时间：2012-12-05T18:11:17.843
> 
> 标签：actionscript-3

如何在下面的代码中让 var sliderthumb 替换 [sliderthumb]？谢谢你的帮助。

```
var sliderthumb:String = "foo";

function natureThumb(){

Sprite(naturepage.sliders.[sliderthumb].getChildAt(1)).height = Sprite(naturepage.sliders.[sliderthumb].getChildAt(1)).width = 65;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T18:26:12.350

只需删除点。

```
Sprite(naturepage.sliders[sliderthumb].getChildAt(1)).height 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T18:27:49.950

有一种方法call允许通过其名称访问子显示对象`displayObjectContainer`。`getChildByName`希望这可以帮助！

```
var sliderthumb:String = "foo";

function natureThumb(){

Sprite(naturepage.sliders.getChildByName(sliderthumb).getChildAt(1)).height = Sprite(naturepage.sliders.getChildByName(sliderthumb).getChildAt(1)).width = 65;

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T20:27:03.230

好吧，提供的两个答案都可能是正确的，具体取决于 OP 的设置方式，但想添加一些说明。首先，我将代码修改为：

```
var sliderthumb:String = "foo";

function natureThumb(){
    var sp:Sprite = naturepage.sliders.[sliderthumb].getChildAt(1) as Sprite;
    sp.height = sp.width = 65;
} 
```

如果您像这样设置对象

```
var mySprite:Sprite = new Sprite();
mySprite.id = "foo"; 
```

那么这将起作用（假设您想要对象 foo 的第二个子对象，它是滑块的子对象）

```
function natureThumb(){
    var sp:Sprite = naturepage.sliders[sliderthumb].getChildAt(1) as Sprite;
    sp.height = sp.width = 65;
} 
```

如果你改为设置你的对象

```
var mySprite:Sprite = new Sprite();
mySprite.name = "foo"; 
```

那么这将起作用

```
function natureThumb(){
    var sp:Sprite = naturepage.sliders.getChildByName(sliderthumb).getChildAt(1) as Sprite;
    sp.height = sp.width = 65;
} 
```

# html - 其他元素后面的粘性导航元素

> ID：13729693
> 
> 赞同：0
> 
> 时间：2012-12-05T18:12:02.197
> 
> 标签：html, navigation, positioning, sticky

我在我的页面上放置了一个粘性导航，它应该始终在前面可见。当您在我的网站的第 2 页上向下滚动时，您会发现导航位于其他一些按钮的后面。

有人可以帮我把它放在前面吗？

这是我网站第 2 页的网址：`http://kmnew.kadushimarketing.com/index.php#targetAnchorPage2`

只需向下滚动，您就会明白我的意思。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T15:01:21.483

解决了！我将 z-index 设置为 999999。

# php - 在 php 查询中省略空值

> ID：13729694
> 
> 赞同：0
> 
> 时间：2012-12-05T18:12:02.807
> 
> 标签：php, mysql, joomla

我有一个 from 将变量列表输出到 Joomla 中的编码 URL，然后当模型运行 mySQL 查询时应该返回结果。

问题是，用户可能会在搜索查询中输入一个空值，这会导致表单返回：`mysite.com/index.php?option=com_mycom&view=myview&price=1000&city=&state=`

我想我需要让我的表单运行一个不`POST/GET`输入没有价值的脚本。

但是，将 mySQL 查询放在一起时，我遇到了一些语法问题。

这是我到目前为止所拥有的：

```
$query = "
        SELECT *
            FROM ".$db->nameQuote('#__mls')."
            WHERE "
                .if ($zip > 0)
                    {.$db->nameQuote('MSTZIP')." = ".$db->quote($zip)."}
                else {
                }.
                .if ($city != null)
                    { AND ".$db->nameQuote('MSTCITY')." LIKE ".$db->quote($city)."}
                else {
                }.
                .if ($bdrms != null)
                    { AND ".$db->nameQuote('MSTBDRMS')." > ".$db->quote($bdrms)."}
                else {
                }.
                .if ($bths != null)
                    { AND ".$db->nameQuote('MSTBATHS')." > ".$db->quote($bths)."}
                else {  
                }.
                .if ($lprice != null, $hprice != null)
                    { AND ".$db->nameQuote('MSTLISTPRC')." BETWEEN ".$db->quote($lprice)." AND ".$db->quote($hprice)."}
                else {
                }.
        ; 
"; 
```

`IF`语句之间的运算符我错了吗？我只是在语法中遗漏了一些东西吗？

此外，如果您有关于如何调试 PHP 的参考资料，我们将不胜感激。像 JSfiddle 这样的东西，但对于 PHP。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T18:33:43.747

除了你的逻辑流程之外的语法是有缺陷的，如果用户省略了 zip，则语句将读取`WHERE AND...`哪个将失败。这个问题可以通过使用`WHERE 1=1`然后在有条件的前面加上前缀来解决`AND`。

如果它们是空白的，您的`if`陈述也可以没有以下内容。`else`这不是一个错误，只是不需要。

另外，最后一条`if`语句有两个条件，我假设它们是`AND`. 你应该使用`&&`符号。IE`if(this==true && that==true)`

最后，除了我注意到的顺序之外，没有任何顺序。你连接你的`if`陈述，这是不需要的。我认为在这种情况下也不是错误。只是不需要。实际上它可能会导致错误。考虑以下：

```
$query = "
    SELECT *
        FROM ".$db->nameQuote('#__mls')."
        WHERE 1 = 1 "
            .if ($zip > 0){."
                AND ".$db->nameQuote('MSTZIP')." = ".$db->quote($zip)
            }
            if ($city != null){."
                AND ".$db->nameQuote('MSTCITY')." LIKE ".$db->quote($city)
            }
            // on and on like this perhaps

        ."; 
    "; // closes the string 
```

我绝不赞同这种类型的流程，它很快就会变得复杂。

调试可能会显示您收到的错误。

# php - .htaccess 重写规则参数

> ID：13729695
> 
> 赞同：3
> 
> 时间：2012-12-05T18:12:05.013
> 
> 标签：php, .htaccess, mod-rewrite

我有一个简单的 .htaccess 文件：

```
RewriteEngine on
RewriteRule ^(.+)-([0-9]+)\.html$ book.php?title=$1&id=$2
RewriteRule ^(.+)\.html$ search.php?search=$1 
```

如果用户输入“ **php-for-dumies-10.html** ”，它将被用作“ **book.php?title=php-for-dummies&id=10** ”。这很好用。

如果用户输入“ **phpbook.html** ”，它将被用作“ **search.php?search=phpbook** ”。这也很好。

问题是如果用户输入“ **directory/php-for-dumies-10.html** ”（在 URL 中添加一个目录）按预期获取“ **book.php?title=directory/php-for-dumies&id=10** ” ，我得到“ **search.php?search=book.php/php-for-dumies-10** ”

为什么执行第二个 RewriteRule 而不是第一个？是因为我要添加斜线吗？更重要的是，“ **book.php** /php-for-dummies-10”参数从何而来？

感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T18:16:46.923

```
RewriteEngine on
RewriteRule ^(.+)-([0-9]+)\.html$ book.php?title=$1&id=$2 [L]
RewriteRule ^(.+)\.html$ search.php?search=$1 [L] 
```

实际上，两个重写都在执行。通过添加 [L] 标志，它可以防止执行后续规则。如果匹配，这应该只强制执行第一条规则。

# jquery - jQuery替换a的内容

> ID：13729698
> 
> 赞同：0
> 
> 时间：2012-12-05T18:12:22.820
> 
> 标签：jquery, replacewith

我有一个连接到 jQuery 函数的链接。它在一个`<li>`带有另一个链接的内部。代码在这里：

```
<li id="aps_pdf1">
   <a target="_blank"" href="....">1testpdf.pdf</a>
      <span style="padding-left:40px">
           <a id="delete-aps_pdf1" class="delete_pdf" title="Delete this PDF." href="#">Delete</a>
      </span>
</li> 
```

`delete-aps_pdf1`当通过用 jQuery 替换 html 来单击时，我试图用文件上传控件替换第一个链接。这是我到目前为止的代码：

```
jQuery(document).ready(function($) {
    $('.delete_pdf').each(function(i,e) { //grab the link class delete-pdf
        var id = $(this).attr('id').replace(/delete-/, '');
        var li = $(this).closest('li').attr('id');
        $(this).click(function(){
            //alert('Clicked! '+ id);//$(this).attr('id'));  //THIS WORKS WHEN CLICKED
            //alert(li);
            $(li).replaceWith('<input type="file" style="width: 700px;" name="' + id + '" id="' + id + '" />');

        });
    }); 
```

我的 replaceWith 似乎根本不起作用。我对 jquery 比较陌生，我已经完成了这个阅读文档，所以我确定我在某处遗漏了一些东西。

朝着正确方向迈出的一步将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T18:14:41.883

您正在尝试替换字符串。改为传递 jQuery 对象：

```
jQuery(document).ready(function($) {
$('.delete_pdf').each(function(i,e) { //grab the link class delete-pdf
    var id = $(this).attr('id').replace(/delete-/, '');
    var li = $(this).closest('li');
    $(this).click(function(){
        //alert('Clicked! '+ id);//$(this).attr('id'));  //THIS WORKS WHEN CLICKED
        //alert(li);
        $(li).replaceWith('<input type="file" style="width: 700px;" name="' + id + '" id="' + id + '" />');

    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T18:15:15.143

您正在获取 li id (.attr("id")) 这意味着您需要在其他查询的前面连接一个 #

```
$('#'+li).replaceWith('<input type="file" style="width: 700px;" name="' + id + '" id="' + id + '" />'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T18:17:43.270

你能不能抓住父母李：

```
var li = $(this).parent('li'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T18:23:00.067

您在以下行中有错误

```
var li = $(this).closest('li').attr('id'); 
```

它应该是

```
var li = $(this).closest('li'); 
```

或者

```
var li = $(this).closest('li#' + id); 
```

# mysql - 将一对多关系视为列标题

> ID：13729702
> 
> 赞同：0
> 
> 时间：2012-12-05T18:12:39.407
> 
> 标签：mysql, sql, pivot

我正在做以下查询

```
 SELECT 
        p.id
        ,q.name
        ,pa.result
    FROM
        postulant_answers as pa
    LEFT OUTER JOIN postulants as p ON (p.id = pa.postulant_id)
    LEFT OUTER JOIN questions as q ON (q.id = pa.question_id); 
```

这向我展示了以下结果：

```
 +------+--------------+--------+
    | id   | name         | result |
    +------+--------------+--------+
    |    9 | Question 1   |     15 |
    |    9 | Question 2   |     70 |
    |    9 | Question 3   |     75 |
    |  591 | Question 1   |     15 |
    |  591 | Question 2   |     70 |
    |  591 | Question 3   |     75 | 
```

但我需要更多类似的东西：

```
 +------+------------+------------+------------+
    | id   | Question 1 | Question 2 | Question 3 |
    +------+------------+------------+------------+
    |    9 |         15 |         70 |         75 |
    |  591 |         15 |         70 |         75 | 
```

我可以在一个查询中做到这一点吗？
任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T18:17:00.960

这被称为枢轴，但 MySQL 没有枢轴函数，因此您可以使用聚合函数和 a 来实现它`CASE`：

```
SELECT p.id,
  max(case when q.name = 'Question 1' then pa.result end) Question1,
  max(case when q.name = 'Question 2' then pa.result end) Question2,
  max(case when q.name = 'Question 3' then pa.result end) Question3
FROM postulant_answers as pa
LEFT OUTER JOIN postulants as p 
  ON (p.id = pa.postulant_id)
LEFT OUTER JOIN questions as q 
  ON (q.id = pa.question_id)
group by p.id 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/e4071/2)

结果：

```
|  ID | QUESTION1 | QUESTION2 | QUESTION3 |
-------------------------------------------
|   9 |        15 |        70 |        75 |
| 591 |        15 |        70 |        75 | 
```

如果您有已知数量的问题，上述方法非常有用，但如果问题数量未知，那么您可以使用准备好的语句，类似于以下内容：

```
SET @sql = NULL;
SELECT
  GROUP_CONCAT(DISTINCT
    CONCAT(
      'max(case when q.name = ''',
      q.name,
      ''' then pa.result end) AS ',
      replace(name, ' ', '')
    )
  ) INTO @sql
FROM questions;

SET @sql = CONCAT('SELECT p.id, ', @sql, ' 
                  FROM postulant_answers as pa
                  LEFT OUTER JOIN postulants as p 
                    ON (p.id = pa.postulant_id)
                  LEFT OUTER JOIN questions as q 
                    ON (q.id = pa.question_id)
                  group by p.id');

PREPARE stmt FROM @sql;
EXECUTE stmt;
DEALLOCATE PREPARE stmt; 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/e4071/3)

# android - 如何在android中缩放TextView并将其保持在中心

> ID：13729708
> 
> 赞同：0
> 
> 时间：2012-12-05T18:12:54.180
> 
> 标签：android, android-layout

我正在尝试使用测试视图的动态缩放进行布局。布局看起来像![以下](../Images/fe90371ddd91f852e1ab3ec8b0833eb3.png)- 见左下角。

现在该部分是一个复合控件。圆圈缩放得很好，但我不知道如何在正确缩放的同时使文本完美地定位在中间。我希望文本位于容器大小的 50% 处，并完美定位在中心。RelativeLayout 只允许使用绝对值，而且我似乎无法使用文本视图来使用文本视图进行线性布局的权重。

复合控制：

```
<RelativeLayout
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <ImageView
        android:id="@+id/VarioCircle"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_centerInParent="true"
        android:contentDescription="Vario Circle"

        android:scaleType="fitCenter"
        android:src="@drawable/circle" />

    <LinearLayout
        android:gravity="center"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" android:weightSum="1.0"
        android:orientation="vertical"
                        android:layout_centerHorizontal="true"
            android:layout_centerVertical="true"

        >

        <TextView
            android:id="@+id/VarioText"
            android:layout_width="wrap_content"
            android:layout_height="0dp"

            android:text="200"
            android:textColor="#FF0000"
            android:textSize="60dp"
            android:layout_weight="0.7"
            android:textStyle="bold"
            android:typeface="monospace" />

    </LinearLayout>
</RelativeLayout> 
```

整体布局：

```
 <com.proflite.VarioView
     android:id="@+id/Vario"
         android:layout_width="100dp"
    android:layout_height="100dp"
    android:layout_alignParentBottom="true"
 /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T19:01:53.077

我建议您制作一个 Button 小部件并将图像设置为具有 .png 格式的背景，具有透明背景。

像这样： ![在此处输入图像描述](../Images/1b108ef6eadf26f8fa2386648e8a472f.png)

之后确保将其保存为 .png

1）然后去你的 xml 布局创建一个 Button 或 ImageButton 小部件。
2) 将此图片设置为背景图像 ( `android:background="@drawable/yourcircle"`)
3) 然后最后您可以将任何文本放入 ( `android:text="blabla"`) + 您可以从代码中更改它，确保使用`Button.setText("blablabla")`
4) 您还需要使用 Button.setTextSize 更改字体大小(49) 例如。
5）最后让它在中心，`android:gravity="center"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T18:17:57.903

将 TextView 放在容器内。并将重力（视图属性）设置为中心。将 TextViews 的宽度和高度设置为 wrap_content。这将使 TextView 在它的容器中居中。

```
<?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="200dp"
    android:layout_height="200dp" >
    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:text="Medium Text"
        android:textAppearance="?android:attr/textAppearanceMedium"
        android:textSize="20sp" />
</FrameLayout> 
```

这将使 TextView 在 FrameLayout 内居中

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T18:32:12.023

尝试这个

```
<RelativeLayout
android:layout_width="match_parent"
android:layout_height="match_parent" >

<RelativeLayout
android:layout_width="wrap_content"
android:layout_height="wrap_content" >

<ImageView
    android:id="@+id/VarioCircle"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerInParent="true"
    android:contentDescription="Vario Circle"
    android:scaleType="fitCenter"
    android:src="@drawable/circle" />

    <TextView
        android:id="@+id/VarioText"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerInParent="true"
        android:text="200"
        android:textColor="#FF0000"
        android:textSize="60dp"
        android:layout_weight="0.7"
        android:textStyle="bold"
        android:typeface="monospace" />
    </RelativeLayout>

    </RelativeLayout> 
```

# c - 如何在c中处理输入缓冲区

> ID：13729710
> 
> 赞同：4
> 
> 时间：2012-12-05T18:12:54.083
> 
> 标签：c, getchar, input-buffer

我是 c 编程新手，我的程序面临这个问题
我有一个循环，从输入缓冲区获取一个字符

```
while(c = getchar()){
    if(c == '\n') break;
    if(c == '1') Add();
    if(c == '2') getInput(); // this is where the headache starts
    ....
} 
```

这是 getInput() 函数

```
void getInput()
{ 
    char ch = getchar();
    if(ch == '1') doSomething();
    ....
} 
```

但是当从 getInput() 函数调用 getchar() 时，它只获取上次调用 getchar() 后留在输入缓冲区中的字符。我想要它做的是获取新输入的字符。

我已经在谷歌上搜索了两个小时，以寻找一种清除输入缓冲区的好方法，但没有任何帮助。因此，非常感谢教程或文章或其他内容的链接，如果有其他方法可以实现，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T18:17:00.090

这应该有效：（清除输入缓冲区的示例）

```
#include <stdio.h> 

int main(void)
{
  int   ch;
  char  buf[BUFSIZ];

  puts("Flushing input");

  while ((ch = getchar()) != '\n' && ch != EOF);

  printf ("Enter some text: ");

  if (fgets(buf, sizeof(buf), stdin))
  {
    printf ("You entered: %s", buf);
  }

  return 0;
}

/*
 * Program output:
 *
 Flushing input
 blah blah blah blah
 Enter some text: hello there
 You entered: hello there
 *
 */ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T18:20:17.060

首先在这段代码的条件中会有`==`比较运算符而不是`=`赋值运算符。`if`

```
while(c = getchar()){
    if(c = '\n') break;
    if(c = '1') Add();
    if(c = '2') getInput(); // this is where the headache starts
    ....
} 
```

并且为了停止输入`EOF`，可以通过 prssing 来尝试从键盘输入`CTRL+D`。

编辑：问题在于当您按下键盘上的键`\n`时实际将其作为输入。`ENTER`所以只改变一行代码。

`if (c ==`\n`) break;`到`if (c == EOF ) break;`，正如我所说`EOF`的是输入的结束。

然后你的代码就可以正常工作了。

代码流程：

```
step 1: suppose `2` is input 
step 2: getInput() is called
step 3: suppose `1` as input  // in getInput
step 4: doSomething() is called  // from getInput
step 5: After completion of doSomething again come back to while loop , 

but in your case you have already given `\n` character as an input 

when you pressed `1` and `ENTER`.And thus loop terminates. 
```

但是按照我所说的更改代码后，这应该可以工作。

注意：为了理解代码流和调试目的，最好`printf()`在函数的不同位置放置并查看输出，哪些行正在执行，哪些行没有执行。

# android - 清除视频视图android

> ID：13729713
> 
> 赞同：2
> 
> 时间：2012-12-05T18:13:07.350
> 
> 标签：android

嗨，我的应用程序中有一个视频视图，我将路径设置为：-

```
videoView.setVideoPath(Environment.getExternalStorageDirectory()+/"thepath.mp4" 
```

现在我面临一个独特的情况，在单击按钮时我不希望它显示任何视频，我的意思是它应该像在 VideoView 中一样变成空白，没有任何路径。

需要帮忙！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-02-28T23:14:24.867

我有一个类似的问题。每当我导航回此活动时，视频就会自动开始播放。最终对我有用的是：

```
 mVideoView.setVideoURI(null); 
```

这是我的全部功能，这可能是矫枉过正：

```
private void cleanupVideo(){
        if(mVideoView.getVisibility() == View.VISIBLE){
            mVideoView.stopPlayback();
            mVideoView.clearAnimation();
            mVideoView.suspend(); // clears media player
            mVideoView.setVideoURI(null);
            mVideoViewButton.setVisibility(View.VISIBLE);
        }
    } 
```

我在 onStop() 中调用它，当用户单击 mVideoViewBUtton 时，它将重新设置视频视图。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-05T18:42:01.783

只需调用 videoView.clearAnimation()

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-05T18:28:01.867

试着打电话`videoView.stopPlayback();`

# cakephp - cakephp 通过用户 ID 进行身份验证

> ID：13729714
> 
> 赞同：0
> 
> 时间：2012-12-05T18:13:14.730
> 
> 标签：cakephp, authentication

**在 CakePHP 1.3 中是否可以通过在users**表中指示用户的 id 来登录用户？

现在，要进行“手动”登录，我这样做（有效）：

```
$this->data['User']['username'] = username;
$this->data['User']['password'] = password;
$this->Auth->login($this->data); 
```

我希望能够指示特定用户，例如在 login() 函数之前添加**$this->data['User']['user_id'] 。**（我已经尝试过了，但它不起作用）。

我想这样做的原因是因为在**users**表中有不同的用户记录，这些用户具有相同的**用户名**和**密码**。这看起来很奇怪，但在我的情况下是有道理的，因为同一个用户可能会出于不同的原因创建多个帐户，并且他可能会选择相同的用户名/密码。

任何想法将不胜感激！

**编辑：**

我将给出一个具体的例子来说明我正在尝试做的事情，也许它有助于带来一些想法。

假设我在 users 表中有这 2 条记录（字段是**user_id** / **username** / **password** / **account_id**）：

*   记录 1：1 / johndoe / password1 / 10
*   记录 2：2 / johndoe / password1 / 15

所以这 2 条记录有相同的用户名和密码，但不同的 user_id 和 account_id。处理登录时，我知道用户选择了哪个**account_id 。**所以我想登录相应的用户。因此，如果用户选择帐户 15，那么日志就是，我应该使用 id 2 登录用户。

但是，cake 的登录方式是，它总是检索与用户名/密码匹配的第一条记录。在此示例中，cake 将使用 id 1 登录用户。

有什么办法可以做我想做的事吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T01:38:02.350

对我来说这听起来不是一个好主意，但如果你真的想要/必须这样做，那么看看[`AuthComponent::userScope`](http://book.cakephp.org/1.3/en/The-Manual/Core-Components/Authentication.html#userscope). 您可以使用它来定义身份验证查找的附加条件，例如：

```
$this->Auth->userScope = array('User.account_id' => 15); 
```

`account_id`这样，只有当用户名和密码匹配并且用户匹配时，身份验证才会成功`15`，即生成的查询看起来像这样

```
User.username = 'abc' AND User.password = 'xyz' AND User.account_id = 15 
```

# selenium - xpath - 如何在给定的表行中找到删除链接？

> ID：13729715
> 
> 赞同：1
> 
> 时间：2012-12-05T18:13:14.927
> 
> 标签：selenium, xpath

鉴于下面的 HTML，我如何找到删除链接？

我已经能够选择行：

```
//td[contains(text(),'DeleteMe')]/../../tr 
```

但我似乎找不到选择删除按钮的方法。

例如我试过：
`//td[contains(text(),'DeleteMe')]/../../tr//a[@class='delete_link']`但它没有选择链接。

我不能使用 ID 的 403、113、112 等，我需要一个没有实际 ID 的脚本来重新测试。

```
<tr class="odd" id="activity_403">
  <td class="name">DeleteMe</td>
  <td class="direct">false</td>
  <td class="">
    <ul>
      <li><a href="/admin/roles/113/edit">Language Therapist</a></li>
      <li><a href="/admin/roles/112/edit">Speech Therapist</a></li>
    </ul>
  </td>
  <td class="">
    <a href="/admin/activities/403" class="member_link view_link">View</a>
    <a href="/admin/activities/403/edit" class="member_link edit_link">Edit</a>
    <a href="/admin/activities/403" class="member_link delete_link" data-confirm="Are you sure you want to delete this?" data-method="delete" rel="nofollow">Delete</a>
  </td>
</tr> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T18:15:14.633

找到了：

```
//td[contains(text(),'DeleteMe')]/../../tr//a[contains(@class,'delete_link')] 
```

# android - Android（在 ARM 上）是否有硬件性能计数器？

> ID：13729717
> 
> 赞同：6
> 
> 时间：2012-12-05T18:13:19.013
> 
> 标签：android, performance, monitor

因此，就像在英特尔处理器上的 Linux 中一样，我们有大量的硬件性能计数器可供访问。像以前一样，使用名为[perfmon2](http://perfmon2.sourceforge.net/)的用户空间软件，我可以获得缓存未命中率、由于某种原因导致的 CPU 停顿周期（例如，L1 缓存未命中）等值。

我的问题是，我们在 Android 中有这些东西吗？由于它基于 ARM，我认为我们没有像 x86 那样强大的性能监视器计数器支持，对吧？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-10T22:05:22.130

ARM11 和 Cortex-A/R 确实有硬件性能计数器。您可以在此页面上的官方 ARM 网站上查看：http: //infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.faqs/ [ka4237.html](http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.faqs/ka4237.html)

由于 Android 也在 Linux 之上运行，因此您可以通过“Perf Events”子系统通过用户空间软件访问性能计数器。但是，您需要编写本机 C 代码，其中包括“perf_event.h”并使用 Android NDK 构建它。在你开始写代码之前，我建议你先看看这个项目：platform/external/linux-tools-perf ( [https://android.googlesource.com/platform/external/linux-tools-perf/](https://android.googlesource.com/platform/external/linux-tools-perf/) )，它可能正是您正在寻找的。我不知道任何允许直接从 Java 代码执行此操作的替代方法。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-11-09T13:17:08.643

除了本尼的回答，我将添加以下内容：

1.  linux-tools-perf 项目与 AOSP 集成（我使用的是 4.2）。它位于 $AOSP/external/linux-tools-perf 下。./linux-tools-perf/Documentation 包含大量关于如何运行所有内容的信息。perf 工具作为 AOSP 的一部分内置在 $PRODUCT_OUT/system/bin/perf 中，但未打包；您需要将其显式推送到目标。

2.  检查 Android (linux) 内核以确认它支持 PM：PERF_EVENTS。谷歌如何获取 .config 但最简单的是运行“extract-ikconfig zImage”。

3.  需要对目标具有 root 访问权限，然后运行“./perf stat -- testprog1”之类的东西来查看结果。记录/检索不同 PM 计数器的命令有很多参数。

4.  请记住，大多数 ARM 实现都有多个内核和大量流水线。Cortex-A9 有乱序执行。所以这些数字可能有点怪异——有时几乎毫无意义。

5.  我偶尔会使用 ARM PMCCNTR 寄存器（ARM PM Cycle Counter）来测试代码性能。PMUSERENR.EN 和 PMINTENCLR.C 必须设置为 PL1+ 级别，然后 PMCCNTR 可以在 PL0 级别进行管理。请参阅 ARM ARM 了解这一切的含义以及 perf 子系统的用法示例！

注意：所有的 shell 变量都在 $AOSP/build/envsetup.sh 中设置

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-09-26T07:10:23.970

我认为您可以尝试使用[ARM® HWCPipe Exporter](https://github.com/ylz-at/arm-hwcpipe-exporter)。

[ARM® HWCPipe Exporter](https://github.com/ylz-at/arm-hwcpipe-exporter)是一个用 Java 和 C++ 编写的 Prometheus 导出器，它从运行在 ARM® 硬件组件上的 Android 设备检索指标并将其导出到 Prometheus 监控系统。

免责声明：我是 ARM HWCPipe Exporter 的作者。

# c# - ByteArray 到 asp 图像

> ID：13729719
> 
> 赞同：0
> 
> 时间：2012-12-05T18:13:32.100
> 
> 标签：c#, asp.net, image

> **可能重复：**
> [如何在 Asp.net 的图像控件中显示数据库中的图像？](https://stackoverflow.com/questions/2482104/how-to-show-a-image-in-database-in-the-image-control-of-asp-net)

我正在从数据库中返回产品列表。在这个列表中，我将数据库图像保存为字节数组。目前我在一个页面上显示大约 30 种产品，我想在产品信息旁边添加它们的图像。解决这个问题的最简单方法是什么？

我有的：

```
public Image PopulatePicture()
{
    Image newImage;
    //Read image data into a memory stream
    using (MemoryStream ms = new MemoryStream(ImageByteArray, 0, ImageByteArray.Length))
    {
        ms.Write(ImageByteArray, 0, ImageByteArray.Length);

        //Set image variable value using memory stream.
        newImage = Image.FromStream(ms, true);
    }
    return newImage;
} 
```

Image.FromStream 出现错误（System.Web.UI.WebControls 不包含 FromStream 的定义）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T18:31:14.147

If your using Mvc its rather simple

Simply write an action such as the following

```
public FileContentResult Image()
{
   //Get the Byte Array for your image
   byte[] image = FilesBLL.GetImage();

   //Return a jpg
   //Note the second parameter is the files mime type
   return File(image, "image/jpeg");
} 
```

See This Link For Mime types

[http://www.webmaster-toolkit.com/mime-types.shtml](http://www.webmaster-toolkit.com/mime-types.shtml)

I highly suggest adding a column to your files table to store mime types (determine this on upload)

And in your view put down an image like this

```
<img src='@Url.Action("GalleryMediumThumb")'/> 
```

for webforms see

[How to show a image in database in the image control of Asp.net?](https://stackoverflow.com/questions/2482104/how-to-show-a-image-in-database-in-the-image-control-of-asp-net)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T18:48:44.820

您可能在这里遇到一些问题：

1.  您正在引用一个 asp.net Image 对象 ( `System.Web.UI.WebControls.Image`) 而不是您想要的 GDI+`System.Drawing.Image`对象。澄清你的命名空间。

2.  您不能在图像上处理流。删除 using 块。[https://stackoverflow.com/a/13696705/64262](https://stackoverflow.com/a/13696705/64262)

3.  您需要将结果流写入响应流（首先不需要将其转换为图像），然后从`<img>`标记中引用该端点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T18:27:44.893

通用 ASP.NET 处理程序 (*.ashx) 可以从数据库加载图像并将其作为普通图像流式传输到浏览器。

愿此[http://coffeedrivendevelopment.net/2012/10/26/sharing-image-resources-between-wpf-and-asp-net/](http://coffeedrivendevelopment.net/2012/10/26/sharing-image-resources-between-wpf-and-asp-net/)对您有所帮助。它是关于资源中的图像，但方法是相同的。

# c# - 事件处理程序多次快速命中似乎“短路”

> ID：13729723
> 
> 赞同：2
> 
> 时间：2012-12-05T18:13:54.120
> 
> 标签：c#, .net, event-handling

我有一个从第三方库引发的事件，它在后台线程上执行。此事件主要通知侦听器库正在监视的系统中的状态更新。如果 InvokeRequired 为 true，则处理程序在 UI 线程上调用自身，然后在任何一种情况下继续将状态更改条目附加到文本框中的文本，并在托盘中弹出通知。

现在，问题是这些状态更新可以非常迅速地到来。被监控的系统可以在几毫秒内从其“空闲”状态通过几个中间体进入“就绪”状态。我需要知道系统已经过渡到所有这些中间状态；但是，并非所有状态更改都进入日志。设置断点并单步执行处理程序会显示最奇怪的行为；处理程序将单步执行前几行代码，然后跳回方法的入口。就好像事件或 Windows 消息泵正在中止方法调用，因为对同一方法的另一个调用即将到来。将方法体放在锁块中并不能解决它。

我以前在其他不使用此第三方库的项目中看到过这种情况。我并不担心，因为快速事件只是触发窗口重绘。如果它们都发生了，那就太好了，但是如果其中一个短路了，那么管道中还有另一个会通过。然而，这是一项对应用程序更为关键的任务，必须在每次引发事件时按顺序执行（它不必像状态实际变化那样快；绝对不会发生这种情况）。

这种短路行为的原因是什么，我该如何阻止它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T18:22:55.093

您看到的很可能是从后台线程对事件处理程序的新调用，而您第一次开始单步执行的调用仍在运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T18:24:45.683

而不是在线程中同步完成所有工作，事件处理程序在其中触发可能会在另一个线程中完成工作是有益的。

只需将您在当前事件处理程序中所做的一切包装在 中`Task.Factory.StartNew`，或用于`BeginInvoke`编组到 UI 线程而不是`Invoke`.

我无法确定，因为我对该库一无所知，但可能是它无法触发更多事件，直到它完成执行前一个事件的所有事件处理程序。

您可能需要做的另一个选择是解决这个问题，或者防止您的 UI 因如此多的更新而对您生气，是将状态更改作为进来并将它们转储到集合中，然后只需定期检查该集合并批量处理所有更改。这在第 3 方对象的事件处理程序上会更容易，因为它只需要将项目添加到集合中，并且在 UI 上也会更容易，因为它不需要在监视器甚至可以的时间跨度内更新多次呈现更改。

# c# - 如果我需要启动的exe文件在机器上不存在，常见的抛出异常的方法是什么

> ID：13729727
> 
> 赞同：0
> 
> 时间：2012-12-05T18:14:12.247
> 
> 标签：c#

在我的应用程序中，我启动 capinfos.exe，它是 Wireshark 的一部分。在构造函数中，我检查机器上是否安装了 Wireshark：

```
private string _filePath = "";

public Capinfos(string capturePath)
{
    if (Directory.Exists(@"C:\Program Files (x86)\Wireshark"))
    {
        _capInfos = @"C:\Program Files (x86)\Wireshark\capinfos.exe";
    }
    else if (Directory.Exists(@"C:\Program Files\Wireshark"))
    {
        _capInfos = @"C:\Program Files\Wireshark\capinfos.exe";
    }

    _filePath = capturePath;
} 
```

如果机器上不存在该文件，最好的方法是什么并抛出异常：请安装 Wireshark

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T18:26:04.750

```
private string _filePath = "";

public Capinfos(string capturePath) throws FileNotFoundException
{
    if (Directory.Exists(@"C:\Program Files (x86)\Wireshark"))
    {
        _capInfos = @"C:\Program Files (x86)\Wireshark\capinfos.exe";
    }
    else if (Directory.Exists(@"C:\Program Files\Wireshark"))
    {
        _capInfos = @"C:\Program Files\Wireshark\capinfos.exe";
    } else
    {
       throw new FileNotFoundException(@"Wireshark installation not found");
    } 

    _filePath = capturePath;
} 
```

然后，您可以使用以下代码捕获异常：

```
 try
    {
        Capinfos("path");
    }
    catch (FileNotFoundException ex)
    {
        Messagebox.Show("Please install wireshark.");
    } 
```

我没有安装 C#，这是手写的。希望没事！这是学习异常的绝佳资源：http: [//msdn.microsoft.com/en-us/library/0yd65esw (v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/0yd65esw(v=vs.80).aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T18:23:56.697

就像是：

```
throw new FileNotFoundException("Could not find " + _capInfos, _capInfos); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T18:25:19.087

不确定这是否是您想要的，但请尝试使用[try-catch](http://msdn.microsoft.com/en-us/library/0yd65esw%28v=vs.80%29.aspx)块。您可以尝试在 try 块中启动 .exe，如果失败，则抛出[FileNotFoundException](http://msdn.microsoft.com/en-us/library/system.io.filenotfoundexception.aspx)并在 catch 块中创建一个弹出框，提醒用户他们需要做什么。

# .net - 如何合并两个 EF 查询？

> ID：13729736
> 
> 赞同：0
> 
> 时间：2012-12-05T18:14:45.487
> 
> 标签：.net, vb.net, entity-framework

我必须查询并且需要将两者合并为一个结果，我已经尝试过使用 Union 和 Concat，但没有成功：

```
 Dim PayPalPurchases = (From p In ctx.PayPalAPI Where p.Users.Email = userEmail Select
                           KeyPay = p.pay_key,
                           PurchaseDate = p.payment_request_date,
                           Result = p.status,
                           item_sku = p.memo,
                           price = p.transaction_amount).ToList

        Dim licenze = (From lic In ctx.Licenses Where lic.Users.Email = userEmail
                           Select KeyPay = lic.Note,
                           PurchaseDate = lic.Date,
                           Result = "Free",
                           item_sku = lic.Sku,
                           price = 0) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T18:33:16.087

创建一个类，每个查询将结果存储到：

```
Public Class ResultData

  Public KeyPay As String
  Public PurchaseDate As String
  Public Result As String
  Public item_sku As String
  Public price As String

End Class 
```

然后创建一个包含两个结果的列表

```
Dim PayPalPurchases = (From p In ctx.PayPalAPI
                       Where p.Users.Email = userEmail
                       Select New ResultData With
                        {
                          .KeyPay = p.pay_key,
                          .PurchaseDate = p.payment_request_date,
                          .Result = p.status,
                          .item_sku = p.memo,
                          .price = p.transaction_amount
                        }).ToList

Dim licenze = (From lic In ctx.Licenses
               Where lic.Users.Email = userEmail
               Select New ResultData With
                {
                  .KeyPay = lic.Note,
                  .PurchaseDate = lic.Date,
                  .Result = "Free",
                  .item_sku = lic.Sku,
                  .price = 0
                }).toList

Dim combinedList As List(Of ResultData)

combinedList.AddRange(PayPalPurchases)
combinedList.AddRange(licenze) 
```

# django - 为本地开发设置 django 和 dj-database-url

> ID：13729738
> 
> 赞同：6
> 
> 时间：2012-12-05T18:14:49.577
> 
> 标签：django, postgresql, heroku

[在对答案的评论中](https://stackoverflow.com/questions/10868040/how-to-use-dj-database-url-while-connecting-with-postgresql-in-heroku-using-pyth?answertab=votes#tab-top)，有人问了这个问题。但答案对我来说仍然不清楚。

我在 Heruku 中运行我的 django 站点，它需要*dj-database-url*模块才能与 Postgresql 一起使用。如何在本地计算机上的*settings.py中使用****DATABASES = dj-database-url()运行 django？***在推送到 Heroku 之前更改代码是一种非常丑陋的方式。

 ** * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-12-06T04:16:37.820

有很多方法可以处理不同的生产/开发环境。

一种是在您的设置文件底部导入一个本地设置文件，该文件不在版本控制中，因此不在heroku中。

另一种方法是将heroku环境与本地环境区分开来。例如，任意环境变量。

另一个，是`default`传递给它的参数，`dj_database_url`它基本上`if`为你做了这个简单的陈述。

```
import dj_database_url
DATABASES['default'] = dj_database_url.config(
    default='sqlite:////path-to-my/database.sqlite') 
```

请记住，此设置文件只是 python。例如，您可以让它在星期二使用一个数据库。您可以提出的任何 if 语句都可以使用。*

# python - 检查脚本活动的代码（python）

> ID：13729740
> 
> 赞同：1
> 
> 时间：2012-12-05T18:14:59.580
> 
> 标签：python

简单的问题：

是否有一些代码或函数可以添加到大多数脚本中，让我知道它的“运行”？

所以在你执行之后，`foo.py`大多数人会看到一个闪烁的光标。我目前正在运行一个新的大型脚本，它似乎正在运行，但在抛出错误或完成（可能无法完成）之前我不会知道。

我假设您可以`print "foo-bar"`在脚本中每个 for 循环的末尾放一个简单的？

还有其他简洁的视觉读出技巧吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T18:19:12.927

我喜欢[clint.progress.bar](http://www.nicosphere.net/clint-command-line-library-for-python/)。对于日志记录，您可以检查[Lggr](https://github.com/peterldowns/lggr)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T18:17:32.107

您可以将内容[记录](http://docs.python.org/2/library/logging.html)到文件中。您可以打印出点，例如`print "."`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T18:30:41.887

# http - cookie“安全”标志如何工作？

> ID：13729749
> 
> 赞同：108
> 
> 时间：2012-12-05T18:15:38.173
> 
> 标签：http, cookies, session-cookies

我知道带有`secure`标志的 cookie 不会通过未加密的连接发送。我想知道这是如何深入工作的。

谁负责确定是否发送 cookie？

* * *

## 回答 #1

> 赞同：96
> 
> 时间：2012-12-05T18:43:12.570

客户端仅为加密连接设置此设置，这在[RFC 6265](https://www.rfc-editor.org/rfc/rfc6265#section-4.1.2.5)中定义：

> Secure 属性将 cookie 的范围限制为“安全”通道（其中“安全”由用户代理定义）。当 cookie 具有 Secure 属性时，只有当请求通过安全通道（通常是 HTTP over Transport Layer Security (TLS) [RFC2818]）传输时，用户代理才会在 HTTP 请求中包含 cookie。
> 
> 虽然看起来对于保护 cookie 免受网络攻击者的攻击很有用，但 Secure 属性只保护 cookie 的机密性。活跃的网络攻击者可以覆盖来自不安全通道的安全 cookie，从而破坏它们的完整性（有关详细信息，请参阅第 8.6 节）。

* * *

## 回答 #2

> 赞同：52
> 
> 时间：2016-11-18T16:55:14.883

关于这个主题的另一个词：

`secure`因为您的网站完全是 https 而省略`example.com`是不够的。

如果您的用户明确到达`http://example.com`，他们将被重定向到，`https://example.com`但这已经太晚了；第一个请求包含 cookie。

# php - cURL 会员跟踪像素

> ID：13729752
> 
> 赞同：-1
> 
> 时间：2012-12-05T18:15:41.917
> 
> 标签：php, curl, tracking, pixel, affiliate

我在尝试让我的会员跟踪像素使用 cURL 请求标记转化时遇到问题。对于每个请求，我都会收到 200 的响应。因此，我不知道为什么它没有进行转换。我在网上做了一些研究，但在谷歌上没有找到太多关于此的内容。

```
 function pixel($row) {

$i = 0;
$pixelArray = array("https://path.tosite.com/pixel/","https://path.tosite.com/pixel/2");
$count = sizeof($pixelArray);

    while ($i < $count) {

        $line   = $pixelArray[$i];
        //echo "<br/> line = ".$line;
        // replace [afid], [sid], [c1], [c2], [c3], or [t] with the corresponding value in $_SESSION
        $line   = preg_replace_callback(
            '/\[(afid|sid|c1|c2|c3|t)\]/',
            function($matches) { return $_SESSION[$matches[1]]; },
            $line
        );
        //echo "<br/>".$i.": ".$line;
        firePixels($line, $row);
        $i++;
    }
    //echo "Done";
}
function firePixels($url, $row) 
{ 

    $ch = curl_init(); 
        curl_setopt($ch, CURLOPT_URL, $url);
    curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, FALSE);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt($ch, CURLOPT_FOLLOWLOCATION, TRUE);
    curl_setopt($ch, CURLOPT_FRESH_CONNECT, TRUE);
    curl_setopt($ch, CURLOPT_FORBID_REUSE, TRUE);
    curl_setopt($ch, CURLOPT_VERBOSE, TRUE);
    //curl_setopt($ch, CURLOPT_POST, TRUE);
    curl_setopt($ch, CURLOPT_USERAGENT, 'Mozilla/5.0 (Windows; U; Windows NT 6.1; en-US; rv:1.9.1.2) Gecko/20090729 Firefox/3.5.2 GTB5');

    $head = curl_exec($ch); 
    $httpCode = curl_getinfo($ch, CURLINFO_HTTP_CODE); 
    $error = curl_error($ch);
    curl_close($ch); 

    if(!$head) 
    { 

        logPixel($url, $row, $httpCode);
        //die('Pixel Execution Failed: '.$error." | ".$url);
        return FALSE; 
    } 

    logPixel($url, $row, $httpCode);

    if($httpCode === 200) 
    {   
        return TRUE; 
    } 
    else 
    { 
        return FALSE; 
    } 

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T18:24:41.570

很可能是因为以下情况之一：

1.  您的 cURL 会话最终会丢失您的会员所期望的一些 cookie，并被忽略。

2.  您的会员检测到来自您服务器 IP 的请求数量异常，并已将其阻止。

3.  您的会员在您的请求中检测到其他一些违规行为，并已将其阻止。

Affiliate tracking pixels are intended to be requested by the customer's browser, not by your server. Unless you have made arrangements with your affiliate to do otherwise, you should not attempt this.

# c# - 如何验证 C# 代码？

> ID：13729757
> 
> 赞同：2
> 
> 时间：2012-12-05T18:16:06.397
> 
> 标签：c#, .net, .net-4.0, cil

我正在开发一个 WPF 应用程序来验证文件中的 C# 代码。

我能够获取该文件，并根据不同的需要实例化它的类型。

现在我需要的是根据我设置的一些标准验证该代码。我是什么意思？

假设我有一个文件“Test.cs”，这个文件有以下代码：

```
using xpto;
using abcd;

public class Test
{
    public static void Testing()
    {
        Iqueryable<XYZ> var1 = ctx.Where(c => c.IdSomething == number);
        var1 = var1.Where(v => v.Count(x => x.ValZ) > 0);
    }
} 
```

在我的应用程序中，我会实例化这个文件（已经完成），然后根据一些规则对其进行验证。例如，在这一行中：

```
var1 = var1.Where(v => v.Count(x => x.ValZ) > 0); 
```

我想告诉该文件正在使用`Count(...) > 0`而不是`Any()`. 我知道这可以通过文本读取文件来完成，但我想知道是否可以使用反射或任何其他不需要这种硬编码的方式。这就是我实例化文件的方法（这是一个工作示例）：

```
CompilerResults cr = provider.CompileAssemblyFromFile(cp, sourceFile.FullName);
Type instanceType = cr.CompiledAssembly.GetExportedTypes()
    .FirstOrDefault(e => e.Name.Equals(className)); 
```

如果不清楚，请告诉我，以便我尝试详细说明。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-05T18:18:40.620

好吧，即使问题过于笼统，您也可以使用[Microsoft Roslyn](http://msdn.microsoft.com/en-us/vstudio/roslyn.aspx)来解决。*编译器作为一种服务*，您可以使用它`AST`从提供的代码中获取并接收您需要的所有必要信息。

由于这是一件大事，因此很难在这里给出一些简短且不言自明的答案。*查看“如何运行东西”的具体*示例更容易，例如这里：

[Roslyn CTP：三个介绍性项目](http://www.codeproject.com/Articles/302595/Roslyn-CTP-Three-Introductory-Projects)

# delphi - 在 Delphi 上计算平方根

> ID：13729761
> 
> 赞同：0
> 
> 时间：2012-12-05T18:16:51.880
> 
> 标签：delphi, math, delphi-7

我需要使用设置的精度（浮点后最多 50 个符号）计算大数的平方根（最多 10^100）。为了这个目标，我决定使用[逐位计算方法](http://en.wikipedia.org/wiki/Methods_of_computing_square_roots#Digit-by-digit_calculation "逐位计算方法")。但是当我在 Delphi 7 上实现它时，我遇到了很多麻烦并且对我的代码感到困惑。你能展示一下你将如何实现这个任务吗？谢谢这里是我的代码

```
program sqrtCalc;

{$APPTYPE CONSOLE}
{$Q+}  {$R+}

uses
  SysUtils,math;

const
  signCount=50; 

var
  inputString:String;
  root:String;
  intString,realString:String;
  intArray,realArray:array of Integer;
  intRootArray,realRootArray:Integer;
  i,j,dotPosition:Integer;
  a,b,c,d:Integer;

Procedure input();
  begin
    WriteLn('x=');
    try
      readln(inputString)
    except
      Writeln('Invalid input data, please try again');
      input(); 
    end;
  end;

begin
  input();
  dotPosition:=pos('.',inputString);
  if dotPosition<>0 then
  begin
    realString:=copy(inputString,dotPosition+1,Length(inputString)-1);
    intString:=copy(inputString,0,dotPosition-1);
    if odd(Length(realString)) then Insert('0',realString,Length(realString)+1);
    i:=1;
    while i<Length(realString) do
    begin
      SetLength(realArray,length(realArray)+1);
      realArray[length(realArray)-1]:=StrToInt(copy(realString,i,2));
      i:=i+2;
     end;
  end
  else
    intString:=inputString;

  if odd(Length(intString)) then Insert('0',intString,1);

  i:=1;
  while i<Length(intString) do
  begin
    SetLength(intArray,length(intArray)+1);
    intArray[length(intArray)-1]:=StrToInt(copy(intString,i,2));
    i:=i+2;
  end;

  //Here must be implementation of mathematic actions
 //But i got confused
  a:=trunc(sqrt(intArray[0])); root:=IntToStr(a);
  b:=intArray[0]-a*a;

  c:=StrToInt(root)*20;
  d:=

  Write(b);
  Readln;
end. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T05:52:04.437

使用大整数算术而不是字符串，无论是我的[TForge](https://bitbucket.org/sergworks/tforge)还是 Alex Ciobanu 的[DeHL](http://code.google.com/p/delphilhlplib/)。

如果需要小数点后 50 位，则参数应乘以 10^100（指数值应为偶数）以使用大基数类型。

您需要在字符串表示中将小数点向右移动 100 位，将获得的字符串的整数部分转换为大基数，使用二进制算法从大基数中提取平方根，将根转换为字符串并将小数点向左移动 50 位得到最终结果。

# git - SSH [server] 的真实性无法建立

> ID：13729768
> 
> 赞同：3
> 
> 时间：2012-12-05T18:17:11.717
> 
> 标签：git, ssh, ssh-keys, assembla

我无法控制服务器，因此无法执行[此答案](https://stackoverflow.com/questions/3663895/ssh-the-authenticity-of-host-hostname-cant-be-established)的建议。我已经遵循了[这个问题/答案](https://stackoverflow.com/questions/7540234/ssh-troubles-pushing-with-git)对已经推荐的内容。

我的简单`ssh`尝试因“主机密钥验证失败”而失败：

```
$ ssh -v git@git.assembla.com
OpenSSH_5.9p1 Debian-5ubuntu1, OpenSSL 1.0.1 14 Mar 2012
debug1: Reading configuration data /home/josvic/.ssh/config
debug1: Reading configuration data /etc/ssh/ssh_config
debug1: /etc/ssh/ssh_config line 19: Applying options for *
debug1: Connecting to git.assembla.com [64.250.188.42] port 22.
debug1: Connection established.
debug1: identity file /home/josvic/.ssh/id_rsa type 1
debug1: Checking blacklist file /usr/share/ssh/blacklist.RSA-2048
debug1: Checking blacklist file /etc/ssh/blacklist.RSA-2048
debug1: identity file /home/josvic/.ssh/id_rsa-cert type -1
debug1: identity file /home/josvic/.ssh/id_dsa type -1
debug1: identity file /home/josvic/.ssh/id_dsa-cert type -1
debug1: identity file /home/josvic/.ssh/id_ecdsa type -1
debug1: identity file /home/josvic/.ssh/id_ecdsa-cert type -1
debug1: Remote protocol version 2.0, remote software version OpenSSH_5.9p1 Debian-5-assembla
debug1: match: OpenSSH_5.9p1 Debian-5-assembla pat OpenSSH*
debug1: Enabling compatibility mode for protocol 2.0
debug1: Local version string SSH-2.0-OpenSSH_5.9p1 Debian-5ubuntu1
debug1: SSH2_MSG_KEXINIT sent
debug1: SSH2_MSG_KEXINIT received
debug1: kex: server->client aes128-ctr hmac-md5 none
debug1: kex: client->server aes128-ctr hmac-md5 none
debug1: sending SSH2_MSG_KEX_ECDH_INIT
debug1: expecting SSH2_MSG_KEX_ECDH_REPLY
debug1: Server host key: ECDSA b7:7a:ad:9f:57:6f:ec:19:56:60:62:18:32:7a:8c:1b
The authenticity of host 'git.assembla.com (64.250.188.42)' can't be established.
ECDSA key fingerprint is b7:7a:ad:9f:57:6f:ec:19:56:60:62:18:32:7a:8c:1b.
Are you sure you want to continue connecting (yes/no)? 
Host key verification failed 
```

任何想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T18:46:26.970

您需要将服务器的密钥指纹添加到受信任的密钥文件中。只需使用 ssh 客户端连接到该服务器并在它询问密钥时键入“是”。或者，手动编辑trusted_keys 文件。

# ruby-on-rails - 未定义的局部变量或方法“toggle_follow_path”

> ID：13729771
> 
> 赞同：0
> 
> 时间：2012-12-05T18:17:34.240
> 
> 标签：ruby-on-rails, ruby-on-rails-3, routes

我`undefined local variable or method`在视图文件夹中收到此错误 toggle_follow_path'`。我可能对方法有问题，或者使用 off form_tag + toggle_follow_path 任何帮助都将受到欢迎，谢谢。顺便说一下，切换关注的目标是关注或取消关注某个人。

**在路由文件中**

```
 match '/:username/toggle_follow',       to: 'home#toggle_follow' 
```

**家庭控制器**

```
def toggle_follow
     @user =  User.find_by_username(params[:username])
     if current_user.is_friend? @user
       flash[:notice] = "You are no longer following @#{@user.username}"
       current_user.remove_friend(@user)
     else
       flash[:notice] = "You are now following @#{@user.username}"
       current_user.add_friend(@user)
     end
     redirect_to user_flits_path(@user)

  end 
```

**看法**

```
<h1><%= image_tag @user.gravatar_url, :align => "top" %> <%= @user.username %></h1>

<%= form_tag  toggle_follow_path, :method => :post do  %>
  <% if current_user.is_friend? @user %>
     <%=h submit_tag "Following"  , :class => "button" %>
  <% else %>
     <%=h submit_tag "Follow"  , :class => "button" %>
  <% end %>
<% end %>
<%=h render :partial => "flits_list", :locals => {:flits => @flits }%> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T18:27:41.507

使用`:as`选项`match`指定所需助手的名称：

```
match '/:username/toggle_follow', to: 'home#toggle_follow', as: 'toggle_follow' 
```

这样，两者都`toggle_follow_path`将`toggle_follow_url`被创建。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T18:30:24.930

它需要接受一个`:username`参数。

试试这个：

```
toggle_follow_path(:username => "johndoe") # fill in the correct username. 
```

# maven - 如何让 Maven 部署 src/main/resources？

> ID：13729772
> 
> 赞同：1
> 
> 时间：2012-12-05T18:17:34.300
> 
> 标签：maven, deployment, resources

我有一个 Maven 项目。它正在成功部署 jar 文件。我还希望它部署**src/main/resources**的内容。

mvn deploy 不部署资源。

我怎样才能让它做到这一点？

我阅读了有关使用复制文件任务和其他解决方法的信息，但我想使用 Maven 的默认行为进行部署，我认为这将包括资源。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T18:19:06.517

文件夹 src/main/resources 包含将被打包到 jar 文件中的资源，这意味着它已经部署在创建的 jar 文件中。

# image - 来自相关产品的 Magento 自定义图像属性

> ID：13729773
> 
> 赞同：1
> 
> 时间：2012-12-05T18:17:36.577
> 
> 标签：image, magento

因此，从产品视图来看，我正在展示相关产品。由于我不会进入的原因，我需要显示相关产品的图像，但它必须是自定义图像属性。所以我创建了一个名为 colour_swatch 的自定义图像属性，我需要访问它并将其显示在屏幕上。我已经对该问题进行了一些阅读，但未能找到满足我需求的解决方案。

所以这是我的代码：

```
<?php foreach($this->getItems() as $_item): ?>
    <div class="eachProductRelated">
        <a href="<?php echo $_item->getProductUrl() ?>" title="<?php echo $this->htmlEscape($_item->getName()) ?>" class="product-image">
            <img src="<?php echo $this->helper('catalog/image')->init($_item, 'colour_swatch') ?>"
                 width="20px" alt="<?php echo $this->htmlEscape($_item->getName()) ?>"/>
        </a>
    </div>
<?php endforeach ?> 
```

如果我们用小图像替换 colour_swatch ，那当然可以。我已经读过，如果您不直接从产品视图中调用自定义图像属性，您将无法访问它。而且我见过的很多解决方案似乎都过大了，当然有更简单的解决方案？？？

可能值得告诉您我收到以下错误消息：

> a:5:{i:0;s:25:"找不到图像文件。";i:1;s:4015:"#0 /Users/Frank/Sites/bosideng/app/code/core/Mage/目录/Helper/Image.php(163): Mage_Catalog_Model_Product_Image->setBaseFile(NULL)

是否有可能我必须做某种 if no_selected 检查？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T10:14:21.953

我已经弄清楚了这个问题并原谅了我的法语，但这是 Magento 的一个荒谬和愚蠢的疏忽。

设置新的自定义图像属性时，您必须在下拉菜单中将“在产品列表中使用”设置为“**是”，然后再选择属性类型“媒体图像”，因为猜猜看！？**当您选择媒体图像时，Magento 会隐藏该选项。

归功于这个人，我在经过多年的搜索后发现了他的帖子：http: [//thedistance.co.uk/journal/2011-10/missing-magento-media-images](http://thedistance.co.uk/journal/2011-10/missing-magento-media-images)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T05:25:28.640

您好，我认为您在自定义图像属性中添加了新的图像 url，然后调用可能会对您有所帮助

```
<img src="<?php echo Mage::getModel('catalog/product')->load($product)->getData('colour_swatch'); ?>" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-13T14:49:34.027

对于那些使用安装程序创建自定义图像类型的人，请添加以下内容以使图像在列表和查看页面上可见：

```
$this->addAttribute(Mage_Catalog_Model_Product::ENTITY, 'colour_swatch', array(
    'group'             => 'Images',
    'type'              => 'varchar',
    'frontend'          => 'catalog/product_attribute_frontend_image',
    'label'             => 'Color Swatch',
    'input'             => 'media_image',
    'class'             => '',
    'source'            => '',
    'global'            => Mage_Catalog_Model_Resource_Eav_Attribute::SCOPE_STORE,
    'visible'           => true,
    'required'          => false,
    'default'           => '',
    'used_in_product_listing' => true,
)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-04-25T07:27:55.650

如果平面目录类别和使用平面目录产品设置为是，那么您可以将特定属性添加到集合中

喜欢

```
$collection = Mage::getResourceModel('catalog/product_collection');
$collection->addAttributeToSelect('*');
$collection->addAttributeToSelect('attributes_name'); 
```

这对我来说很完美

# html - CSS 在标题中设置背景图片

> ID：13729774
> 
> 赞同：0
> 
> 时间：2012-12-05T18:17:38.073
> 
> 标签：html, css

我想将图像设置为标题的背景，但仅限于空白区域。我不想显示标题文本所在的任何背景。所以，我有以下 HTML 标题：

```
<h2><span>Some text</span></h2>

h2{
    background: url("image.png");
} 
```

问题是，我不想在跨度中显示此标题背景，而是希望跨度适应页面的背景图像（父元素）。我无法为跨度设置特定的特定背景，因为它与页面背景不匹配。那么我该如何解决呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T18:34:43.047

您可以使用伪元素来实现这一点，

```
 h1:before 
 {
 content:url(your_img.jpg);
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T18:29:03.350

您需要将图像的背景位置与文本协调。我不确定您的确切布局是什么，因此请相应地调整您的值。

单独的 CSS 无法检测您的文本在哪里，或者它有多少位。你需要使用 JavaScript 来做到这一点。

```
h2 {
    background: url(image.png);
    background-repeat:no-repeat;
    background-position:5px 5px;
    padding-left:30px;
} 
```

# java - 将顶点着色器计算转换/移植到 java

> ID：13729775
> 
> 赞同：2
> 
> 时间：2012-12-05T18:17:38.247
> 
> 标签：java, opengl-es, vector, matrix, shader

我想通过骨骼为网格设置动画。但是，由于我的 android Galaxy s2 仅支持 304 个顶点着色器变量，我想我需要计算缺失的骨骼变换矩阵和 Java 中已经存在的新顶点位置。

无论如何，我怎样才能将它转换为等效的？（我实际上只是想将其排除为错误源）

```
uniform mat4  u_BoneTransform[128];
in  vec3  in_Position;
in  vec4  in_BoneID;
in  vec4  in_Weights;

vec3 position = (in_Weights[0] * (u_BoneTransform[ int(in_BoneID[0]) ] * vec4(in_Position, 1.0)).xyz)
      + (in_Weights[1] * (u_BoneTransform[ int(in_BoneID[1]) ] * vec4(in_Position, 1.0)).xyz)
      + (in_Weights[2] * (u_BoneTransform[ int(in_BoneID[2]) ] * vec4(in_Position, 1.0)).xyz)
      + (in_Weights[3] * (u_BoneTransform[ int(in_BoneID[3]) ] * vec4(in_Position, 1.0)).xyz); 
```

这就是我到目前为止所拥有的。自然，它会比让着色器来做这件事要慢，这是一种耻辱。不过，我很乐意提出任何建议。

```
public void update() {
  // ...
  Vector3 position = marryBonesWithVector(weights, boneTransformations,currentPosition,1.0f);
  // ...
}

/**
 * Marry Bones with Vector
 *
 * @param w weights
 * @param i influences
 * @param m bone transformation matrices
 * @param t target vector (like position or normal)
 * @param f flag for position or directional vector
 */
public static void marryBonesWithVector(float[] w, int[] i, Matrix4[] m, Vector3 t, float f) {

  Vector3 influence1 = getSingleBoneInfluence(m[i[0]],t,f).mulInPlace(w[0]);
  Vector3 influence2 = getSingleBoneInfluence(m[i[1]],t,f).mulInPlace(w[1]);
  Vector3 influence3 = getSingleBoneInfluence(m[i[2]],t,f).mulInPlace(w[2]);
  Vector3 influence4 = getSingleBoneInfluence(m[i[3]],t,f).mulInPlace(w[3]);

  t.addInPlace(influence1).addInPlace(influence2).addInPlace(influence3).addInPlace(influence4);
}

/**
 * computes single bone influence
 *
 * @param m current bone transformation Matrix
 * @param t taret position vector
 * @param f flag: 1 position, 0 direction
 * @return Vector3 single bone influence
 */
private static Vector3 getSingleBoneInfluence(Matrix4 m, Vector3 t, float f) {
  float [] pI = new float[4];
  pI[0] = m.values[0]  * t.x + m.values[1]  * t.y + m.values[2]  * t.z + m.values[3]  * f;
  pI[1] = m.values[4]  * t.x + m.values[5]  * t.y + m.values[6]  * t.z + m.values[7]  * f;
  pI[2] = m.values[8]  * t.x + m.values[9]  * t.y + m.values[10] * t.z + m.values[11] * f;
  //      pI[3] = m.values[12] * t.x + m.values[13] * t.y + m.values[14] * t.z + m.values[15] * f; // not needed
  return Vector3.createNew(pI[0],pI[1],pI[2]);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T10:59:39.263

原来着色器使用转置矩阵。

所以当我以这种方式计算时，我的代码可以工作：

```
/**
 * computes single bone influence
 *
 * @param m current bone transformation Matrix
 * @param t position vector
 * @param f flag: 1 position, 0 direction
 * @return Vector3 single bone influence
 */
private static Vector3 getSingleBoneInfluence(Matrix4 m, Vector3 t, float f) {
    float[] pI = new float[4];
    pI[0] = m.values[0]  * t.x + m.values[4]  * t.y + m.values[8]  * t.z + m.values[12]  * f;
    pI[1] = m.values[1]  * t.x + m.values[5]  * t.y + m.values[9]  * t.z + m.values[13]  * f;
    pI[2] = m.values[2]  * t.x + m.values[6]  * t.y + m.values[10] * t.z + m.values[14]  * f;

    return Vector3.createNew(pI[0], pI[1], pI[2]);
} 
```

*编辑：[了解着色器 mat4 * vec4 计算](https://stackoverflow.com/questions/13745334/understanding-shader-mat4-vec4-calculation)

# magento - 上传 Magento 扩展时出错

> ID：13729787
> 
> 赞同：1
> 
> 时间：2012-12-05T18:18:00.290
> 
> 标签：magento

经过几次尝试，我已经成功地使用此 PDF 中的说明打包了一个扩展 - [http://info.magento.com/rs/magentocommerce/images/packagingmagentoconnectextensions6%200.pdf](http://info.magento.com/rs/magentocommerce/images/packagingmagentoconnectextensions6%200.pdf)

一切看起来都很好，但是当我尝试上传扩展名时，它会抛出一个错误，说文件名应该是`XXXXXX-1.0.0`没有扩展名的格式格式，其中 xxxxxxxxx 是我的表单键，但是当我尝试上传重命名的副本时打包文件（Magento 连接管理器扩展生成的文件），它会引发以下 2 个错误：

> 上传到频道 MagentoConnect 1.0 时出错：无法上传新版本`XXXXXXXXXXXXXXX-1.0.0.tgz`
> 
> 上传到通道 MagentoConnect 2.0 时出错： `AnattaDesign_AbandonedCarts`找不到包

我对该错误进行了一些研究，并了解到这在过去是 Magento 的一个问题，人们也面临着完全相同的问题。在其中一些问题上，我发现@rondata 回复了那个时候谁是社区经理，但不确定他是否仍然是。

那么有什么线索可以解决这个问题吗？是否也可能是我如何打包扩展的问题？或者可能是谁是当前的社区经理，我可以在哪里寻求升级他们的上传错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T17:22:32.457

所以我想我知道原因是什么。当在 上创建新扩展时要求您提供扩展密钥时`magentocommerce.com`，请不要在此处添加表单密钥作为您的扩展密钥。它的意思是像`Namespace_Module`.

当你这样做时，错误应该消失，你应该一切都好！

# javascript - 非常大的单页应用程序设计问题

> ID：13729788
> 
> 赞同：9
> 
> 时间：2012-12-05T18:18:01.157
> 
> 标签：javascript, jquery, asp.net-mvc-4, angularjs, singlepage

我目前正在编写一个非常非常大的单页 web/javascript 应用程序。

我使用的技术是 ASP.NET MVC4、jquery、knockout.js 和 amplify.js。

我遇到的问题是，大多数（如果不是全部）单页应用程序示例都适用于较小的应用程序，其中所有脚本模板（无论是 jquery、handlbars 等）都与其余的都在同一个文件中的html代码。这对于较小的应用程序来说很好，但我正在构建的应用程序是一个完整的维护物流应用程序，有很多很多屏幕。

到目前为止，我采用的方法是我有一个外壳（我的主 index.cshtml 文件），并且我使用 jquery 的 load() 方法来加载或更确切地说是在用户进行特定选择时注入我需要的特定文件。

例子：

```
function handleLoginClick(){

    App.mainContentContainer.delegate('#btnLogin', 'click', function() {

        App.loadModule('Home/ProductionControlMenu', App.MainMenuView.render());

    });

} 
```

这是 App.loadModule 函数的代码：

```
App.loadModule = function(path, callback){

    App.mainContentContainer.load(App.siteRoot + path, callback);

}; 
```

一切都很顺利，直到我需要真正开始与新加载的屏幕上的各种表单元素进行交互。jquery 似乎无法直接处理它们。我不能使用 .live() 或 .delegate() 因为它们不是事件，它们是文本框和按钮，有时我需要更改它们的 css 类。

我发现他们唯一的方法是从外壳中获取一个元素的句柄（不是通过 .load() 加载的东西）并使用 jquery 的 .find() 方法，如下所示：

```
 App.mainContentContainer.find('#btnLogin').addClass('disabled'); 
```

显然，每次我需要与表单元素交互甚至从表单元素中检索值时，我都不想做这样的事情。

是否有人对我如何创建一个可维护的非常大的单页应用程序有任何想法，其中可能包含数百个 .html 文件，而不必将所有 html 代码放在一个文件中，并且仍然可以解决这个 .load() 问题有？

任何想法将不胜感激。:-)

视听/视听

克里斯

**更新**

我想我会发布一个更新，以及事情的进展和效果。经过大量研究后，我决定使用 Google 的 AngularJS Javascript 框架。它成倍地简化了考验，我肯定会建议所有正在考虑制作大型 SPA 的人来看看。

链接：

主站 [http://angularjs.org/](http://angularjs.org/)

Angular 上很棒的免费短视频： [http ://www.egghead.io/](http://www.egghead.io/)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-05T18:54:27.427

这实际上是一个非常复杂的问题，因为它真正涉及到您的架构设计。

对于大型单页应用程序，最好使用某种前端 MV* 风格的框架，例如，[backbone.js](http://backbonejs.org)，它与 jQuery 非常有用。您还应该考虑使用某种依赖管理框架（例如[require.js](http://requirejs.org/)）来异步加载您的脚本和依赖关系，甚至更好——在您的应用程序设计中使用 AMD 模式来使您的架构模块化并且更易于管理。

至于这与您的 MVC4 项目的关系，您有一些选择：

1.  您是否想将 MVC 用作某种“服务层”，它只返回 JSON 对象，允许您的前端创建标记/模板（想想[handlebars.js](http://handlebarsjs.com/)），或者
2.  您是否希望您的 MVC 项目返回部分视图 (HTML) 作为响应，利用 Razor 模板系统并简单地使用前端来显示从服务器返回的内容？

无论哪种方式，您都必须设计一种方法来处理前端事件和导航（当与 jQuery 结合时，backbone 提供了这两种功能）。更复杂的是您选择将另一个视图的活动通知一个视图的模式（有很多方法可以做到这一点）——例如发布/订阅模式。

我希望我有所帮助，我知道我没有完全回答这个问题，但答案可能会很长！

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-05T18:50:15.713

你的方法有很多问题。我建议观看一些关于人们如何构建单页应用程序以及最常用的工具的演示。

这似乎是合理的：[http ://singlepageappbook.com/](http://singlepageappbook.com/)

你至少会想要

*   某种模块系统（我推荐 AMD – <a href="http://requirejs.org">http://requirejs.org）
*   一个 MV* 框架（Backbone、Ember.js 等）
*   DOM/AJAX 框架（jQuery、Mootools 等）。一些框架提供了这些以及以上所有功能（Dojo、YUI、Sencha）
*   构建解决方案（在开发/生产中有不同的环境）

几个很好的链接：

1.  [http://nerds.airbnb.com/slides-and-video-from-spike-brehms-tech-talk](http://nerds.airbnb.com/slides-and-video-from-spike-brehms-tech-talk)
2.  [http://video.copenhagenjs.dk/video/3413395/simon-hjberg-swipely-building](http://video.copenhagenjs.dk/video/3413395/simon-hjberg-swipely-building)
3.  [http://backstage.soundcloud.com/2012/06/building-the-next-soundcloud/](http://backstage.soundcloud.com/2012/06/building-the-next-soundcloud/)
4.  [http://www.youtube.com/watch?v=vXjVFPosQHw](http://www.youtube.com/watch?v=vXjVFPosQHw)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-06T18:39:00.150

如果您不需要复杂的真正[SOFEA](https://stackoverflow.com/questions/817617/what-is-sofea)单页应用程序，那么我建议您走[**PJAX**](https://github.com/defunkt/jquery-pjax)路线。

然后，您只需将您的应用程序编写为具有单页加载性能优势的普通 Web 1.0 应用程序。我敦促您考虑这是一个选项，因为它允许您在服务器端完成大部分验证工作。

这个想法对于您发送整个页面减去页眉和页脚（包含 javascript 和 css 包括）的每个响应非常简单。这些天，DOM 渲染时间快得令人难以置信......不是整个页面重新加载，所以不要担心返回的 HTML 的大小。

此外，“PJAX 方式”更**容易缓存**，**Google SEO 友好**，而且实际上是[新 Basecamp 所做](http://37signals.com/svn/posts/3112-how-basecamp-next-got-to-be-so-damn-fast-without-using-much-client-side-ui)的。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-03-22T14:44:16.153

*注意：希望这是评论而不是答案，但没有足够的经验来发表评论；（
[欢迎社区成员的任何更正！]*

单页应用程序需要考虑的要点：

*   [**延迟加载**](http://en.wikipedia.org/wiki/Lazy_loading)至关重要，因为您不希望在用户首次加载页面时立即加载数百个 js 文件（加载时间非常慢）。
*   **良好的文件组织**- 有助于使更改更容易，降低复杂性并促进可重用组件。使组件的测试更容易。
*   **测试**，- 由于单页应用程序在后台运行大量 javascript，因此您需要一个测试框架来自动测试组件。此测试是您用来确认是否呈现某些用户控件等的测试之上的，因为您不希望无视图组件在不应该的情况下对服务器进行 ajax 调用等。

+1 表示 gryzzly 关于使用框架的观点。

Sencha 为他们的 ExtJs 产品提供了一个很好的类似 MVC 的框架。他们将数据存储、ajax、延迟加载、类层次结构和更多捆绑到包中。他们还有一个[很好的 api 页面](http://docs.sencha.com/ext-js/4-1/)来查找对象属性和方法（很方便，因为 javascript :/ 似乎没有任何智能感知）。他们的api页面是；据我所知，单页应用程序的示例。我知道 ExtJs 所做的很多事情，你可以找到一个开源替代方案，但我喜欢它只是一个库，我不必下载几个不同的框架来执行各种操作。[注意：除了作为他们的客户并且喜欢他们的东西之外，我与 Sencha 没有任何关系。]

**结论：**

我想说如果不使用某些客户端框架，管理大型单页应用程序将非常困难；无论是否开源，并且不使用诸如客户端 MVC 之类的架构模式。

我认为单页应用程序更复杂，因此您的团队需要非常方便地理解单页应用程序的概念以及如何实现它。如果您将其从网站上撤下，那么在用户体验方面将是惊人的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-05T18:40:58.930

我建议使用 Sammy.js 并将淘汰赛中的各种视图模型拆分为单独的 url。如果您使用的是 asp.net mvc 4，请使用部分视图（用户控件），以便将所有代码放在一个文件中。并以有意义的方式命名所有并拆分所有js代码，js中的文件名和命名空间。从长远来看，这将对可维护性和您自己的理智有很大帮助。并使用*常识*！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-05T18:47:30.253

我这样做的方法是将与模板相关的 javascript 代码与模板本身一起包含在内。然后使用 ajax 加载整个模板+脚本。如果您想尝试这样做，请注意大多数浏览器不会执行`<script>`注入页面的标签。特别是如果使用`innerHTML`. 因此，您应该`eval`自己标记脚本（或者您可以使用 document.createElement 来注入脚本，但这与 eval 相比并没有提供任何额外的优势，因为浏览器无论如何都会盲目地执行脚本）。

就我而言，为了更容易获取模板的 html 和脚本部分，我将模板存储在 XML 文件中，而不是普通的旧 HTML。这样我就可以简单地使用`.responseXML`ajax 请求来解析模板。我的模板具有以下基本结构：

```
<template options...>
    <title>Optional</title>
    <html><![CDATA[

        Template body

    ]]></html>
    <init><![CDATA[

        // code that only needs to execute once

    ]]></init>
    <script><![CDATA[

        // code that needs to run every time
        // the template loads

    ]]></script>
</template> 
```

您还需要记住将服务器配置为使用模板的正确内容类型进行回复。否则`resultXML`行不通。当然，这不是实施该系统的唯一方法。您可以简单地将模板保存为 HTML，然后解析该 HTML 以提取要执行的脚本。

代码的主要部分、函数、构造函数、对象等可以包含在 js 文件中。模板脚本只需要调用这些函数来告诉页面的其余部分如何使用模板。

如果您进一步将数据与模板分开，并且仅在页面上使用数据填充模板或对 JSON 数据发出单独的 ajax 请求，那么您可以配置服务器以使浏览器缓存您的模板。这对于经常使用的模板（例如对话框模板）特别有用。这允许浏览器只下载一次模板，并在下次调用模板时使用缓存的版本。

反正我上次就是这么干的。它的扩展性足以为 facebook 用户提供服务（网络应用程序是 facebook 应用程序）。只是分享我的经验。希望能帮助到你。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-06T06:18:22.903

我已经使用 Dojo Toolkit 编写了一些巨大的单页应用程序。我很确定您选择的任何 JavaScript 框架都可能适合您。我使用 Dojo 是因为它为我提供了使大型单页应用程序开发更易于管理的特性。

您可以使用 Dojo 的小部件系统来帮助您将所有屏幕和表单定义为小部件，然后当您需要它们时，您可以将它们实例化并插入到任何您需要的地方。当你想摆脱它时，你可以简单地调用`destroy`或`destroyRecursive`在那个特定的小部件上，它就消失了。Dojo 的小部件系统还可以帮助您将 HTML 与 JavaScript 分开，但仍将它们保持在一起，这样它们就不会遍布各处。

我已经为登录表单包含了一个简单的小部件定义。

这是 HTML 模板。

```
/* mine/forms/Login.html */
<div>
    ${form_name}
    <label>Username</label>
    <input data-dojo-type="dijit.form.TextBox"
           data-dojo-attach-point="_usrfld" />
    <br />
    <label>Password</label>
    <input data-dojo-type="dijit.form.TextBox"
           data-dojo-props="type: 'password'"
           data-dojo-attach-point="_pwdfld" />
    <br />
    <input data-dojo-type="dijit.form.Button"
           data-dojo-props="label: 'Login'"
           data-dojo-attach-event="onClick:_handleLogin" />
</div> 
```

这是小部件的 JavaScript 部分。

```
/* mine/forms/Login.js */
define([
    "dojo/_base/declare",
    "dijit/_Widget",
    "dijit/_Templated",
    "dijit/_WidgetsInTemplateMixin",
    "dijit/form/Button",
    "dijit/form/TextBox",
    "dojo/text!./Login.html"
], function(
    declare,
    _Widget,
    _Templated,
    _WidgetsInTemplateMixin,
    Button,
    TextBox,
    template
) {

return declare("mine.forms.Login", [_Widget, _Templated, _WidgetsInTemplateMixin], {
    // assign the template
    templateString: template,

    // signal that we will have widgets within our template and the parser should 
    // locate them and instantiate them
    widgetsInTemplate: true,

    form_name: "My Login Form",

    // place holders that will be referencing the corresponding widgets
    // that I have placed a data-dojo-attach-point on
    _usrfld: null,
    _pwdfld: null,
    _lgbtn: null,

    // a call back function that will be trigger when the Login button is clicked
    _handleLogin: function() {
        var usr = this._usrfld.get('value');
        var pwd = this._pwdfld.get('value');

        // now you have the username & password
        // you can use it to login
    }
});

}); 
```

小部件系统提供了一些好处：

1.  将在需要时为您加载 HTML 模板
2.  您可以在小部件中包含小部件。Dojo 负责为您实例化甚至销毁这些小部件
3.  您可以使用 dojo 的简单模板语言来帮助插入字符串。上面的示例使用`${form_name}`. 如果你想使用更复杂的工具，dojo 还支持一种类似于 Django 的语法模板语言。这将允许您使用 Django 中可用的大多数标签，例如 for、if-then-else 等。
4.  `data-dojo-attach-point`很有帮助。如果您使用它，您将不再需要将 id 分配给 DOM 元素。您无需在 HTML DOM 树中定位元素。您命名的变量`data-dojo-attach-point`将自动分配以引用您在模板中定义的小部件或 DOM 元素。上面的示例使用`_usrfld`、`_pwdfld`和`_lgbtn`。
5.  `data-dojo-attach-event`也很有帮助。如果您使用它，您将不必手动向按钮添加事件挂钩，Dojo 的小部件系统会为您挂钩，并且还会在您的小部件被销毁时清除挂钩。
6.  如果您使用 Dojo 的构建系统，这是一个获取所有 JavaScript 代码并对其进行压缩的系统，Dojo 将用实际的 HTML 替换您的模板，这样当您在生产模式下加载小部件时，Dojo 就不必制作另一个 AJAX请求获取您的模板。

这些只是我在开发项目时每天使用的一些功能。希望它能为您提供一些见解，您可以在为您的项目选择合适的 JavaScript 框架时做出决定。作为旁注，我不提倡 Dojo 或任何东西，只是想分享对我有用的东西。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-05-24T22:01:20.937

要处理大型单页应用程序，建议将单个模块分解为不同的应用程序。
**示例**：搜索页面应用和结果页面应用等应用。

# jqgrid - 不要在 JQGrid 中对单行进行分组

> ID：13729790
> 
> 赞同：2
> 
> 时间：2012-12-05T18:18:13.803
> 
> 标签：jqgrid

我有一个 JQGrid 将某些行组合在一起。我`group`用来定义应该将哪些行分组在一起，例如，如果有三个`2`s，它将所有`2`s 分组在一起。但是，可能只有一个`2`，在这种情况下，我不希望将它分组，即将行放在一个组下。

**我的问题是**，是否可以将分组仅应用于某些行而让其他行不理会？

以下是我目前拥有的：

```
colNames:['group', 'Description', 'File Sent to Customer', 'Date/Time', 'ATS', '# of Bib Records', '# of Items', 'Customer DB', 'Customer ID'],
    colModel:[
        {name:'group', index:'group'},
        {name:'description', index:'description'},
        {name:'fileSent', index:'fileSent', width:150},
        {name:'date', index:'date', width:160},
        {name:'ats', index:'ats', width:100},
        {name:'bibRecords', index:'bibRecords', width:100},
        {name:'items', index:'items', width:100},
        {name:'customerDB', index:'customerDB', width:240},
        {name:'customerID', index:'customerID', width:150}
    ],
    grouping:true,
    groupingView : {
        groupField : ['group'],
        groupColumnShow : [false],
        groupText : [''],
        groupCollapse : true,
        groupOrder: ['desc']
    }, 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T20:25:31.987

我觉得你的问题很有趣。所以我编写了显示而不是标准分组的解决方案（参见[开始演示](http://www.ok-soft-gmbh.com/jqGrid/HideSomeGroupingHeaders0.htm)）

![在此处输入图像描述](../Images/1a09ff384c624cea4c3e704b3d2b53f2.png)

以下：

![在此处输入图像描述](../Images/fa252edba4b1a1d7c47219f6fd6e29d0.png)

对应的代码没有那么复杂：

```
loadComplete: function () {
    var i, groups = $(this).jqGrid("getGridParam", "groupingView").groups,
        l = groups.length,
        idSelectorPrefix = "#" + this.id + "ghead_0_";
    for (i = 0; i < l; i++) {
        if (groups[i].cnt === 1) {
            // hide the grouping row
            $(idSelectorPrefix + i).hide();
        }
    }
} 
```

它使用一级分组，但可以以与多级分组相同的方式更改。

关于生成的网格的一个警告：您应该小心网格的排序。问题是 jqGrid 仅对*组内*的行进行排序。因此，上述带有隐藏分组标题的行似乎超出了排序过程。

# android - 多色边框 EditText

> ID：13729793
> 
> 赞同：2
> 
> 时间：2012-12-05T18:18:29.497
> 
> 标签：android, android-layout, android-edittext

我试图弄清楚如何制作一个自定义的 EditText，它的左右两侧都有黑色边框，顶部有绿色边框，底部有蓝色边框。见下文： ![在此处输入图像描述](../Images/4979352d9a15db0e0988302093988513.png)

我对 Android 开发相当陌生，我花了很多时间阅读他们的文档，但没有找到任何关于这种定制的任何东西。我知道在 CSS 中你可以只使用border-right、border-left等属性，但不确定它在Android开发中是否那么简单。我正在寻找最兼容的解决方案，最好是 2.3 版（姜饼）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T18:22:18.273

您必须制作自定义图像以用作背景。它相对简单，您需要使用[2D 图形指南](http://developer.android.com/guide/topics/graphics/2d-graphics.html#nine-patch)中描述的 9-patch 。

一旦你有了它，你将把它放在你项目的 res/drawable 文件夹中，然后将它与 XML 中的 EditText 一起使用

```
<EditText
    android:background="@drawable/my_custom_background"
    ...
/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T18:26:00.803

创建一个[`LayerList`](http://developer.android.com/guide/topics/resources/drawable-resource.html#LayerList)带有所需渐变颜色的正方形，并在其上方创建一个带有一些边框的白色正方形。然后使用这个drawable作为你的`TextView`背景。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-25T11:14:16.693

您可以使用 9-patch 或在 xml 中`<layer-list>` 创建多色边框 EditText，我正在以编程方式创建多色边框 EditText。

```
public class MainActivity extends AppCompatActivity {
 private TextView mTextView;

 @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

      customTextViewWithBorder();

}

private void customTextViewWithBorder(){
mTextView = (TextView) findViewById(R.id.tv);
         // Initialize some new ColorDrawable objects
                        ColorDrawable leftBorder = new ColorDrawable(Color.RED);
                        ColorDrawable topBorder = new ColorDrawable(Color.GREEN);
                        ColorDrawable rightBorder = new ColorDrawable(Color.BLUE);
                        ColorDrawable bottomBorder = new ColorDrawable(Color.YELLOW);
                        ColorDrawable background = new ColorDrawable(Color.WHITE);

                        // Initialize an array of Drawable objects
                        Drawable[] layers = new Drawable[]{
                                leftBorder, // Red color
                                topBorder, // Green color
                                rightBorder, // Blue color
                                bottomBorder, // Yellow color
                                background // White background
                        };
     // Initialize a new LayerDrawable
    LayerDrawable layerDrawable = new LayerDrawable(layers);
    // Red layer padding, draw left border
                    layerDrawable.setLayerInset(0,0,0,15,0);

                    // Green layer padding, draw top border
                    layerDrawable.setLayerInset(1,15,0,0,15);

                    // Blue layer padding, draw right border
                    layerDrawable.setLayerInset(2,15,15,0,0);

                    // Yellow layer padding, draw bottom border
                    layerDrawable.setLayerInset(3,15,15,15,0);

                    // White layer, draw the background
                    layerDrawable.setLayerInset(4,15,15,15,15);
     mTextView.setBackground(layerDrawable);

                    // Set the TextView padding
                    mTextView.setPadding(25,25,25,25);

} 
```

源码[安卓——代码](http://android--code.blogspot.in/2015/11/android-how-to-create-layerdrawable.html)

# javascript - 制作 Javascript 变量...不是变量

> ID：13729795
> 
> 赞同：-3
> 
> 时间：2012-12-05T18:18:32.197
> 
> 标签：javascript

可能是一个愚蠢的问题，我不知道如何表达它。

我在函数中有一个数组，我想通过循环打印文本，而不是变量。我刚刚开始对此有所了解，但真正让我感动的是如何只打印让我们说“类别”和值，如果值不为空。这是要显示的示例，我正在寻找的结果是“u = 1 and x = 1 AND z = 3”。如果有人能指出我的写作方向，那将是最有帮助的。

```
(categories called from multiple selection menus in text)
s=
t=
u=1
v=
w=
x=1
y=
z=3
function example(s,t,u,v,w,x,y,z) {

    selection=[s,t,u,v,w,x,y,z];
    for (var i=0;;i++)
    {
        if (!selection[i]) {
            selection="";
        }
        else
        {
            selection= selection + 
        };
    }
} 
```

我正在寻找的结果是“u = 1 and x = 1 AND z = 3”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T18:26:07.653

如果要手动枚举所有字段，可以使用字段构造对象，然后遍历它的键：

```
function example(s,t,u,v,w,x,y,z){
    var selection = {
        s: s,
        t: t,
        u: u,
        v: v,
        w: w,
        x: x,
        y: y,
        z: z
    };
    var out = "";
    for(var i in selection){
        if(selection[i]){
        if(!out){
            out += " "; // insert space between values
        }
        out += i + '=' + selection[i];
        }
    }
    return out;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T18:25:33.550

由于我不在办公桌前，我将提供半功能代码。假设您的变量在某处被声明为参数或普通变量。您可以将变量的名称声明为数组，遍历数组并使用 eval 函数来评估它们的值

```
selection=["s","t","u","v","w","x","y","z"];
output = "";
    for (var i=0; i < selection.length; i++)
    {
        value = eval(selection[i]);
        if (value==""){
           //nothing to do
         }
        else
        {
          output += selection[i] + "=" + value; 
        };
     } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T18:26:01.537

您需要一个索引数组（又名对象）来打印带有名称的值。

```
var selection = {"s": s, "t": t, "u": u, "v": v, "w": w, "x": x, "y": y, "z": z};
for (var i in selection)
    document.write(i + " = " + selection[i]); 
```

# erlang - 分布式应用程序配置对通过 net_adm:ping/0 发现节点的影响

> ID：13729797
> 
> 赞同：1
> 
> 时间：2012-12-05T18:18:39.690
> 
> 标签：erlang, distributed, distributed-system

在分布式应用程序的上下文中完成时，我遇到了关于 net_adm:ping/1 的不同行为。

我有一个应用程序，它在启动时 ping 一个众所周知的节点，并以这种方式发现连接节点网格中的所有节点。

当我在单个节点（非分布式配置）上启动此应用程序时，net_adm:ping/1 后跟节点/0 报告 4 个其他节点（这是正确的）。4个节点在2个不同的物理机上，所以返回的是下面的n1@machine_1, n2@machine_2, n3@machine_2, n4@machine_1（实际返回的是ip地址，不是machine_x）。

当属于双节点分布式应用程序时，在应用程序启动的节点上，net_adm:ping/1 后跟一个节点/0 报告 2 个节点，每台机器一个（n1@machine1，n2@machine2）。在大约 750 毫秒延迟后再次调用 nodes/0 会导致找到正确的 5 个节点。我的应用程序需要三个缺失节点中的两个才能正常工作，因此，如果找不到它们，应用程序就会死掉。

我正在使用 R15B02

当网格中的一些节点参与分布式应用程序配置时，关于传递节点发现过程的延迟是否已知不同？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T00:32:12.920

`kernel`应用程序[文档](http://www.erlang.org/doc/man/kernel_app.html)提到了同步节点的方法，以便停止启动阶段，直到准备好继续前进并且一切就绪。以下是选项：

> `sync_nodes_mandatory = [NodeName]`
> 
> 指定哪些其他节点必须处于活动状态才能使该节点正确启动。如果列表中的某个节点在指定时间内没有启动，该节点也不会启动。如果此参数未定义，则默认为 []。
> 
> `sync_nodes_optional = [NodeName]`
> 
> 指定哪些其他节点可以处于活动状态，以便该节点正确启动。如果此列表中的某个节点未在指定时间内启动，则该节点无论如何都会启动。如果此参数未定义，则默认为空列表。

使用它们的文件可能如下所示：

```
[{kernel,
  [{sync_nodes_mandatory, [b@ferdmbp, c@ferdmbp]},
   {sync_nodes_timeout, 30000}]
}]. 
```

`a@ferdmbp`通过调用启动节点`erl -sname a -config config-file-above`。这种方法的缺点是每个节点都需要自己的配置文件。

# ruby-on-rails-3 - 长时间任务后Rails考拉“错误不支持获取请求” - 调用FB图形API

> ID：13729802
> 
> 赞同：1
> 
> 时间：2012-12-05T18:18:45.503
> 
> 标签：ruby-on-rails-3, facebook-opengraph, koala, koala-gem

经过长时间的任务（14 秒并且可能超过 600 次对 Facebook 的调用）后，我的应用程序返回 500 内部服务器错误，并具有以下描述：

```
Koala::Facebook::APIError (GraphMethodException: Unsupported get request.) 
```

我所做的是这样的：

```
@FBGraph = Koala::Facebook::API.new
tud = MyUsers.all
tud.each do |user|

    graph = @FBGraph.get_object(user.fb_user_id)
    picture = @FBGraph.get_picture(user.fb_user_id)
    thisTud = MyUsers.find(user.id)
    thisTud.name = graph["name"]
    thisTud.url = graph["link"]
    thisTud.url_pic = picture

    if thisTud.save
        puts "Saved!"
    else
        puts "Error"
    end
end 
```

我收到（在终端上）所有的`"Saved!"`，但是在检索数据后，它会自动执行 mysql 操作并且它失败了。并且数据没有保存在数据库中。

正如[这篇文章](https://stackoverflow.com/questions/11007616/put-connections-to-facebook-graph-in-koala-fails-after-a-very-long-delay)中所建议的，我已将其放置`@FBGraph = Koala::Facebook::API.new`在一个新线程中，但没有任何变化。

*注意：*当我用更少的用户做同样的操作时，一切都很好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T22:21:02.853

hellvinz 的说法是一个 facebook 错误。

我现在找到了一个似乎可行的解决方法：

改变这个

```
graph = @FBGraph.get_object(user.fb_user_id) 
```

对此

```
graph = @FBGraph.get_object("#{user.fb_user_id}?fields=id,name,username,picture,link") 
```

明确声明字段似乎可以解决问题。

如果这还不够，还有 2 个技巧可以解决问题：

1.  延迟一段时间后（例如一个小时后）再次调用，并且只调用不完整的请求
2.  创建多个 fb 应用程序 ID 和帐户以区分请求与帐户

# iphone - awakeFromNib 没有调用但显示 xib

> ID：13729814
> 
> 赞同：6
> 
> 时间：2012-12-05T18:19:23.850
> 
> 标签：iphone, objective-c, ios, nib, awakefromnib

我在 xcode 4.5 中创建了一个新项目，并通过以下方式调用了我的视图控制器

-(id)initWithNibName:bundle:

来自 appdelegate，因为它在默认项目模板中调用，我没有使用故事板，但没有调用 awakeFromNib 我也搜索过，但无法理解为什么**awakeFromNib** 没有调用。

苹果文档中的`-(void)awakeFromNib` “在从 Interface Builder 存档或 nib 文件加载接收器后准备服务”。“符合`NSCoding`协议的对象（包括 UIView 和 UIViewController 的所有子类）使用它们的 initWithCoder: 方法进行初始化。所有不符合 NSCoding 协议的对象都使用它们的 init 方法进行初始化。所有对象都被实例化和初始化后， nib 加载代码为所有这些对象重新建立出口和操作连接。然后它调用对象的 awakeFromNib 方法。

我的问题是为什么 awakeFromNib 在加载 xib 文件时没有调用？我做错了吗？请详细说明

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-05T18:39:25.693

awakeFromNib: 仅当**视图控制器**位于 nib 文件中时才调用。
在这种情况下，您使用 init initWithNibName:bundle 初始化视图控制器，因此**视图控制器的内容位于 nib 内部，而不是视图控制器本身**。
如果您打开 xib 文件，在 xib 中拖动一个对象并将类设置为您的视图控制器类名，然后将调用 awakeFromNib（这种情况下您不需要手动初始化视图控制器）。
因此，请记住在 xib 文件中拥有视图控制器与不在 xib 文件中拥有视图控制器之间的区别，但它的所有内容都是从 xib 文件中加载的。

**PS：** *我交替使用nib和xib。*

**编辑**
我忘了告诉你如何解决这个问题。覆盖 viewDidLoad 来处理初始化的插座。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T19:21:26.680

为什么不直接将 -(id)initWithNibName:bundle: 方法添加到您的子类而不是 -(void)awakeFromNib？

我的“awakeFromNib”方法被调用得很好，但我加载了我的视图控制器：

```
myViewController *vc = [[[NSBundle mainBundle] loadNibNamed:@"myViewController" owner:self options:nil] objectAtIndex:0]; 
```

所以我想知道是否因为您使用的是 initWithNibName 而没有调用您的 awakeFromNib ？

编辑：我刚刚看到您将 awakeFromNib 添加到由 XCode 创建的默认项目的 ViewController 的评论。您在创建项目时是否取消选中“使用 StoryBoard”框？如果您的笔尖位于项目的主情节提要中，则可能需要跳过一些额外的箍。

# mysql - SQL 选择集/第 1-10 年的结果

> ID：13729819
> 
> 赞同：0
> 
> 时间：2012-12-05T18:19:43.473
> 
> 标签：mysql, sql, where, set

我总是只需要结果集中最近 10 年的数据。这些年总会有多个记录，所以我不能只提取前 10 条记录。我怎样才能：选择集 1，选择集 2... 到集 10，并且只显示这 10 年的数据而不提取前几年的数据？

```
Year    Quarter    Quarterly_yield
2012    1         8.41
2012    2        -0.71
2011    3         0.03
2011    4         3.43
2010    1         8.41
2010    2        -0.71
2009    3         0.03
2009    4         3.43
2008    1         8.41
2008    2        -0.71
2007    3         0.03
2007    4         3.43
2006    1         8.41
2006    2        -0.71
2005    3         0.03
2005    4         3.43
2004    1         8.41
2004    2        -0.71
2003    3         0.03
2003    4         3.43
2002    1         8.41
2002    2        -0.71
2001    3         0.03
2001    4         3.43
2000    1         8.41
2000    2        -0.71 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T18:25:29.867

你可以这样做：

```
SELECT * FROM table WHERE year IN 
                     (SELECT year FROM table ORDER BY year DESC LIMIT 10); 
```

这个查询可以这样解释：

1.  内部查询 - 选择过去 10 年`table`
2.  外部查询 - 选择`table`内部查询结果中年份的所有列

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T18:27:38.570

怎么样

```
SELECT *
FROM table
WHERE year IN 
  (
   SELECT year
   FROM table
   ORDER BY Year DESC
   LIMIT 10
  ) 
```

这选择了最近 10 年

```
SELECT year
FROM table
ORDER BY Year DESC
LIMIT 10 
```

然后你选择那些年份的每条记录

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T19:11:02.203

```
select * from t 
where
(year>(select max(year) from t)-10)
order by year desc, quarter desc 
```

# c# - 在c#中使用索引数组反序列化JSON

> ID：13729820
> 
> 赞同：7
> 
> 时间：2012-12-05T18:19:45.080
> 
> 标签：c#, asp.net-mvc, json, deserialization

我对使用 JSON 非常陌生，并且正在处理来自我无法更改其格式的 API 的返回。返回示例为：（实际网址已被删除）

```
{
"body":
    {
    "link":
        {"linkurl": ["www.google.com"]}
    },
"error": null,
"message": "Data Retrieved successfully",
"status": true
} 
```

我在 VS2010 中使用带有 MVC 3 的 Newtonsoft.Json 库。

我的课是：

```
[JsonObject(MemberSerialization.OptIn)]
    public class LinksJSON
    {
        [JsonProperty]
        public string link{ get; set; }

        [JsonProperty]
        public string message { get; set; }

        [JsonProperty]
        public string error { get; set; }

        [JsonProperty]
        public bool status { get; set; }
    } 
```

我正在反序列化它：

```
private static T _download_serialized_json_data<T>(string url) where T : new()
    {
        using (var w = new WebClient())
        {
            var json_data = string.Empty;
            // attempt to download JSON data as a string
            try
            {
                json_data = w.DownloadString(url);
            }
            catch (Exception) { }
            // if string with JSON data is not empty, deserialize it to class and return its instance 
            return !string.IsNullOrEmpty(json_data) ? JsonConvert.DeserializeObject<T>(json_data) : new T();
        }
    }

    public string CheckJSONLink()
    {

        var url = "<api url-removed for security>";

        var outObj = _download_serialized_json_data<LinksJSON>(url);

        return outObj.Link;
    } 
```

但是我正在尝试获取 的值`linkurl`，它是 中的索引数组`Link`。

我将如何访问这些信息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T18:25:41.257

你没有设置你的类来匹配 JSON，你的类说这`link`是一个简单的字符串，你的示例将它显示为一个复杂类型。

为了按照您的预期正确反序列化它，您必须修改您的类以匹配 JSON。具体`link`应该是一个类的实例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T18:48:56.047

您应该使用以下类：

```
[JsonObject(MemberSerialization.OptIn)]
public class LinksJSON
{
    [JsonProperty]
    public body body { get; set; }

    [JsonProperty]
    public string message { get; set; }

    [JsonProperty]
    public string error { get; set; }

    [JsonProperty]
    public bool status { get; set; }
}

[JsonObject(MemberSerialization.OptIn)]
public class body
{
    [JsonProperty]
    public link link { get; set; }
}

[JsonObject(MemberSerialization.OptIn)]
public class link
{
    [JsonProperty]
    public string[] linkurl { get; set; }
} 
```

# javascript - iPhone IOS 6.0.1“拍照”图像在 Canvas HTML5 中损坏

> ID：13729824
> 
> 赞同：1
> 
> 时间：2012-12-05T18:19:52.373
> 
> 标签：javascript, iphone, ios, html, canvas

我目前有一个 canvas html5 元素设置来接收上传的图像，调整它的大小，并将其数据 uri 传递给一个表单值，然后将其提交给服务器。这在计算机上运行良好，但当我通过 Safari 在我的 iPhone 上对其进行测试时遇到了问题。

在上传图像时使用新的 IOS 6.0.1 更新，我可以选择“拍照或录像”，但是在 iPhone 上这样做时会出现两个问题（我没有方便测试的 iPad :()...

1) 图像要么看起来被压扁，要么“未完成”，因为图像的顶部 1/3 仅剩

*   我删除了 context.scale() 函数，这些问题没有出现。在 iphone 设备上缩放是否有一些处理限制？一个简单的 context.scale(0.5, 0.5) 似乎不起作用。

2）图像被旋转（当 context.scale() 被移除时，这个问题仍然存在）。

*   我读过该图像可能会保留其一些方向数据，但是如何删除它呢？

只有当我“拍照”或使用我的 iPhone 拍摄的图像时，这些问题才显得孤立。当使用从我的计算机下载到我的 iPhone 上的图像时，问题 1) 或 2) 似乎都没有问题。同样，当使用我的 iPhone 拍摄的照片，发送到我的电脑，然后从电脑上传时，似乎也没有问题。

对于问题 1），因为我的计算机（没有问题）和 iPhone（问题）使用了同一张图片，我冒昧地猜测这是 context.scale() 的 iPhone 限制，除非通过电子邮件发送图像时我的 iPhone 以某种方式压缩它并删除我的计算机使用时也没有问题的方向数据。如您所见，我很困惑！谢谢你的帮助！

我的画布大小调整代码...

```
 reader.onload = function(e) {
      preview.html('<img id="scream" src="' + e.target.result + '" ' + (preview.css('max-height') != 'none' ? 'style="max-height: ' + preview.css('max-height') + ';"' : '') + ' />')
      element.addClass('fileupload-exists').removeClass('fileupload-new')

      var canvas = document.createElement("canvas"),
          context = canvas.getContext("2d"),
          image = new Image();

      image.onload = function () {
          var img = this,
              width = img.width,
              height = img.height;

          canvas.width = 300;
          canvas.height = 300;

          context.scale(0.25, 0.25);
          context.drawImage(img, 0, 0);
          var base64 = canvas.toDataURL();
          //console.log(base64);

          //$('form_6').val(base64);

          document.body.appendChild(canvas);
      };
      image.src = e.target.result;

    } 
```

# java - jetty servlet 映射 uri 到文件

> ID：13729826
> 
> 赞同：1
> 
> 时间：2012-12-05T18:19:54.097
> 
> 标签：java, servlets, jetty

通过`HttpServletRequest.getRequestURI`我们可以获取用户在访问 servlet 时输入的路径。

如何编写将这些 URI 映射到我的主目录中的文件的 servlet。例如，如果用户输入 servlet 的 URL

> “http://localhost:8080/webbtechnologies/html/index.html”

发送文件

> C:\Users\User\My Documents\Web Technologies\html\index.html

给用户。

到目前为止，这是我的代码：

```
public class SimpleFileManagerServlet extends HttpServlet {
private String location;

@Override
protected void doGet(HttpServletRequest req, HttpServletResponse resp)
throws ServletException, IOException {
resp.setContentType("text/html; charset=UTF-8");
resp.setStatus(HttpServletResponse.SC_OK);
PrintWriter out = resp.getWriter();
location = req.getRequestURI(); 
}

public static void main(String... args) throws Exception {
ServletContextHandler context = new ServletContextHandler(ServletContextHandler.SESSIONS);
context.addServlet(SimpleFileManagerServlet.class, "/");

Server server = new Server(8080);
server.setHandler(context);
server.start();
server.join();
}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T09:06:54.730

看看码头的 DefaultServlet ，它完全符合您的要求。如果您想做其他事情，您可以使用 DefaultServlet 中的代码并对其进行扩展。

但是，对您的用例 DefaultServlet 进行描述对您来说就足够了。

这是javadoc：http: [//download.eclipse.org/jetty/stable-9/apidocs/org/eclipse/jetty/servlet/DefaultServlet.html](http://download.eclipse.org/jetty/stable-9/apidocs/org/eclipse/jetty/servlet/DefaultServlet.html)

查看分发版提供的测试 webapp，了解如何在 web.xml 等中配置它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-06T14:31:53.703

Jetty's`DefaultServlet`会为你做这件事。你真正需要做的就是告诉它在你的服务器上从哪里提供文件。

尝试这个：

```
import org.eclipse.jetty.servlet.DefaultServlet;

public static void main(String... args) throws Exception {

    ServletContextHandler context = new ServletContextHandler(ServletContextHandler.SESSIONS);

    context.setResourceBase("file:///C:/Users/User/My Documents/Web Technologies");
    context.setContextPath("/");
    context.addServlet(new ServletHolder("default", DefaultServlet.class), "/*");

    Server server = new Server(8080);
    server.setHandler(context);
    server.start();
    server.join();
} 
```

# codeigniter - Codeigniter 不记录

> ID：13729828
> 
> 赞同：12
> 
> 时间：2012-12-05T18:20:00.913
> 
> 标签：codeigniter, logging, error-handling, message

我似乎无法弄清楚为什么 codeigniter 没有记录我的 log_messages

在配置中：

```
$config['log_threshold'] = 4;
$config['log_path'] = '/var/log/mydlp.log'; 
```

在脚本中：

```
log_message('error','here'); 
```

文件位置：

```
-rw-rw-rw- 1 root  root    0 2012-12-05 13:10 mydlp.log 
```

当我收到日志消息时，我什么也没得到。

这是我的 /var 和 /var/log 的目录结构

```
 drwxr-xr-x  6 root root  4096 2012-12-05 13:10 log
 drwxr-xr-x  14 root root  4096 2012-01-04 14:38 var 
```

我在这里做错了吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-05T18:27:09.277

`$config['log_path']`应该是目录的路径，而不是文件。CI 以`log-2012-12-05.php`. 尝试一个目录的路径，并确保包含一个斜杠。

```
/*
|--------------------------------------------------------------------------
| Error Logging Directory Path
|--------------------------------------------------------------------------
|
| Leave this BLANK unless you would like to set something other than the default
| application/logs/ folder. Use a full server path with trailing slash.
|
*/
$config['log_path'] = '/var/log/ci_logs/'; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-02-18T20:39:47.613

问题是 SELinux 检查这篇文章。

你试试这个：

```
# Ownership
sudo chown apache:apache -R /data/www/html/sites/mysite
cd /data/www/html/sites/mysite

# File permissions, recursive
find . -type f -exec chmod 0644 {} \;

# Dir permissions, recursive
find . -type d -exec chmod 0755 {} \;

# SELinux serve files off Apache, resursive
sudo chcon -t httpd_sys_content_t /data/www/html/sites/mysite -R

# Allow write only to specific dirs
sudo chcon -t httpd_sys_rw_content_t /data/www/html/sites/mysite/logs -R
sudo chcon -t httpd_sys_rw_content_t /data/www/html/sites/mysite/uploads -R 
```

[https://blog.lysender.com/2015/07/centos-7-selinux-php-apache-cannot-writeaccess-file-no-matter-what/](https://blog.lysender.com/2015/07/centos-7-selinux-php-apache-cannot-writeaccess-file-no-matter-what/)

# ant - 为什么我不能使用 蚂蚁上的选择器 ?

> ID：13729829
> 
> 赞同：4
> 
> 时间：2012-12-05T18:20:03.270
> 
> 标签：ant

我在一个目录中有三个文件和三个目录，日期不同。

```
$ cd mydir
$ ls -ltr
-rw-rw-r-- 1 skiphoppy users    0 Nov 14 00:00 file.old.20121114
drwxrwxrwx 2 skiphoppy users 4096 Nov 14 00:00 dir.old.20121114
drwxrwxrwx 2 skiphoppy users 4096 Dec  5 12:05 dir.old.20121205
drwxrwxrwx 2 skiphoppy users 4096 Dec  5 12:05 dir
-rw-rw-r-- 1 skiphoppy users    0 Dec  5 12:16 file.old.20121205
-rw-rw-r-- 1 skiphoppy users    0 Dec  5 12:16 file 
```

我想构建一个包含所有早于 2012-12-01 的目录的目录集。如果我没看错，选择器可用于限制返回的文件。但似乎这不适用于 dirset，即使 dirset 文档说您可以使用嵌套模式集和选择器。

如果我在文件集上使用**日期**选择器，我只会得到一个我期望的旧文件；但是在目录集上使用相同的语法，我得到了所有目录：

```
<fileset id="old.files" dir="mydir">
  <date datetime="12/01/2012 12:00 AM" when="before"/>
</fileset>
<echo message="Files: ${toString:old.files}"/>
<dirset id="old.dirs" dir="mydir">
  <date datetime="12/01/2012 12:00 AM" when="before"/>
</dirset>
<echo message="Dirs: ${toString:old.dirs}"/> 
```

输出：

```
 [echo] Files: file.old.20121114
 [echo] Dirs: ;dir;dir.old.20121114;dir.old.20121205 
```

日期选择器不起作用是怎么回事？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T18:35:25.000

您可能需要为[日期选择器](http://ant.apache.org/manual/Types/selectors.html#dateselect)`checkdirs`设置属性。默认值为'false'，即选择所有内容。

```
<date datetime="12/01/2012 12:00 AM" when="before" checkdirs="true" /> 
```

# foursquare - 签入 apifoursquare

> ID：13729836
> 
> 赞同：0
> 
> 时间：2012-12-05T18:20:56.360
> 
> 标签：foursquare, checkin

我想找出曼哈顿某些地区（例如，每个邮政编码）在 2 周内的签到次数，并且我希望将其分类为一天 24 小时。有谁知道这是否可能，如果可以，我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T11:31:54.773

只有场地管理者（如果您拥有场地）可以通过商户平台 API 获得优质的入住信息：[https ://developer.foursquare.com/overview/merchants](https://developer.foursquare.com/overview/merchants)

API 调用/示例：[https ://developer.foursquare.com/docs/venues/stats](https://developer.foursquare.com/docs/venues/stats)

阿曼苏在这里问了同样的问题：[https ://groups.google.com/forum/?fromgroups=#!topic/foursquare-api/5k6lzRwJFjA](https://groups.google.com/forum/?fromgroups=#!topic/foursquare-api/5k6lzRwJFjA)

# event-handling - 单击“提交”按钮时jQuery停止.blur（）事件

> ID：13729837
> 
> 赞同：13
> 
> 时间：2012-12-05T18:20:57.673
> 
> 标签：event-handling, focus, jquery, blur

我正在构建一个带有简单演示电子邮件注册表单的小型登录页面。我希望在聚焦时打开表单字段，然后在模糊时缩小。

但是我面临的问题是，当您单击提交按钮时，这会引发模糊功能，隐藏按钮并缩小表单。只有当用户单击以关注提交按钮时，我才需要找到一种方法来停止 .blur() 方法。有什么好的解决方法吗？

将不胜感激我能得到的任何帮助！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-11-07T15:34:02.717

我知道这个问题很老，但最简单的方法是检查 event.relatedTarget。if 语句的第一部分是防止在 relatedTarget 为 null 时抛出错误（IF 会短路，因为 null 相当于 false 并且浏览器知道如果第一个条件为 false 则不必检查第二个条件在 && 语句中）。

所以：

```
if(event.relatedTarget && event.relatedTarget.type!="submit"){
     //do your animation 
} 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-12-05T18:30:37.567

这不是最漂亮的解决方案，但它确实有效。试试这个：

```
$("#submitbtn").mousedown(function() {
    mousedownHappened = true;
});

$("#email").blur(function() {
    if (mousedownHappened) // cancel the blur event
    {
        mousedownHappened = false;
    }
    else // blur event is okay
    {
        $("#email").animate({
            opacity: 0.75,
            width: '-=240px'
        }, 500, function() {
        });

        // hide submit button
        $("#submitbtn").fadeOut(400);
    }
});​ 
```

[**在这里演示**](http://jsfiddle.net/cvCJm/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-05T18:31:54.790

在 .blur 处理程序中试试这个：

```
if ($(':focus').is('#submitbtn')) { return false; } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-05T18:35:34.750

为什么不依赖`submit`事件而不是`click`？[http://jsbin.com/ehujup/5/edit](http://jsbin.com/ehujup/5/edit)

只需对 html 和 js 进行一些更改

将输入包装到`form`并添加`required`电子邮件，因为它显然假设是

```
<form id="form">
 <div id="signup">
   <input type="email" name="email" id="email" placeholder="me@email.com" tabindex="1" required="required">
   <input type="submit" name="submit" id="submitbtn" value="Signup" class="submit-btn" tabindex="2">
 </div>
</form> 
```

在 js 中，删除监听的处理程序`#submitbtn`

```
$("#submitbtn").on("click", function(e){
  e.stopImmediatePropagation();
  $("#signup").fadeOut(220);
}); 
```

并使用提交表单列表器

```
$("#form").on("submit", function(e){
  $("#signup").fadeOut(220);
  return false;
}); 
```

你可以用[`$.ajax()`](http://api.jquery.com/jQuery.ajax/)它来让它变得更好。

这样做可以在验证方面获得优势，并且本机浏览器的 HTML5 验证器将检查支持的电子邮件格式。

# image - 距离图像到matlab中的对象

> ID：13729839
> 
> 赞同：3
> 
> 时间：2012-12-05T18:21:13.020
> 
> 标签：image, matlab, object, image-processing

我有一个包含一些点（或对象）的图像。我想基于此图像创建另一个图像，以显示与这些对象的距离。例如，这个新图像应该在对象位置处具有最大值。matlab有什么解决办法吗？

![在此处输入图像描述](../Images/27199a0c640221053aac65bd343c1575.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-05T19:13:18.413

您可以使用`bwdist`它来计算二进制图像中每个像素与信号的距离。

```
%# read the image
img = imread('http://i.stack.imgur.com/Hc7ay.png');
%# convert to grayscale
gs = im2bw(img);
%# segment the objects
sig = gs~=1;
%# remove the border
sig = sig(5:end-4,5:end-4);

%# calculate the distance
distFromObjects = -bwdist(sig); 
```

![在此处输入图像描述](../Images/352170facbc826a0a240cc8a98cf3f65.png)

# java - javac 忽略 @SuppressWarnings("all")

> ID：13729840
> 
> 赞同：6
> 
> 时间：2012-12-05T18:21:21.627
> 
> 标签：java, annotations, compiler-warnings

我目前有一个 Enum，它有一个可以采用 null 并包含以下 SuppressWarning 注释的构造函数：

```
@SuppressWarnings("all")
public enum TheEnum {
...
AN_ENUM_VALUE(null),
...
...
private TheEnum(TheEnum ... args) {
    if (args != null){
        ...
        ...
    }
...
} 
```

我目前正在使用 MyEclipse 工作台 10.6，它似乎可以很好地获取注释。然而，在开发机器上编译期间，我收到与“TheEnum”类相关的警告。

奇怪的是，在项目中，到处都有@SuppressWarnings("unchecked")，编译器设法把它们捡起来并忽略它们就好了。

由于遗留问题，我们必须使用 JDK 1.5.0_17 进行编译，但看起来它应该选择“全部”抑制：

```
[root@xxx]:/opt/jdk1.5.0_17/bin# ./javac -X
  ...
  -Xlint:{all,deprecation,unchecked,fallthrough,path,serial,finally,-deprecation,-   unchecked,-fallthrough,-path,-serial,-finally}Enable or disable specific warnings 
```

关于我应该在哪里查看为什么“所有”被忽略的任何建议？

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-12-05T19:00:08.373

不要一开始就使用它。

```
@SuppressWarnings("all") 
```

说，**你做错了什么**。我会尽快取消与任何开发此类代码的开发人员的合同。警告是有原因的，一揽子忽略说“我不在乎我的代码是否真的有效”，就像别的什么都没有。这与编写单元测试完全相反：全面禁用编译器检查。

从[http://docs.oracle.com/javase/6/docs/technotes/tools/solaris/javac.html#options](http://docs.oracle.com/javase/6/docs/technotes/tools/solaris/javac.html#options)判断， “all”可能是一个 Eclipse 扩展。Sun/Oracle Java 6 编译器可能只支持以下值：`unchecked`、`path`、`serial`、`finally`和。`fallthrough``deprecation`

# android - Phonegap Cordova 2.0 onActivityResult 未调用

> ID：13729841
> 
> 赞同：4
> 
> 时间：2012-12-05T18:21:24.987
> 
> 标签：android, cordova, android-intent

我正在 Phonegap 2.0 中构建一个应用程序，该应用程序使用修改后的 WebIntent 插件将 Intent 调用到表单应用程序。我可以使用成功地将用户发送到表单应用程序，`this.cordova.getActivity().startActivityForResult(intCanvas, 0);`但是一旦用户完成活动，他们就会被转储到主屏幕而不是返回到我的应用程序。

这是我正在使用的代码。

WebIntent.java

```
package com.borismus.webintent;

import java.util.HashMap;
import java.util.Map;

import org.apache.cordova.DroidGap;
import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import android.app.Activity;
import android.content.Intent;
import android.net.Uri;
import android.util.Log;
import android.text.Html;

import org.apache.cordova.api.Plugin;
import org.apache.cordova.api.PluginResult;

/**
 * WebIntent is a PhoneGap plugin that bridges Android intents and web
 * applications:
 * 
 * 1\. web apps can spawn intents that call native Android applications. 2.
 * (after setting up correct intent filters for PhoneGap applications), Android
 * intents can be handled by PhoneGap web applications.
 * 
 * @author boris@borismus.com
 * 
 */
public class WebIntent extends Plugin {

private String onNewIntentCallback = null;
private String callback;
public static final int REQUEST_CODE = 0;
/**
 * Executes the request and returns PluginResult.
 * 
 * @param action
 *            The action to execute.
 * @param args
 *            JSONArray of arguments for the plugin.
 * @param callbackId
 *            The callback id used when calling back into JavaScript.
 * @return A PluginResult object with a status and message.
 */
public PluginResult execute(String action, JSONArray args, String callbackId) {
    try {
        if (action.equals("startActivity")) {
            if (args.length() != 1) {
                return new PluginResult(PluginResult.Status.INVALID_ACTION);
            }

            // Parse the arguments
            JSONObject obj = args.getJSONObject(0);
            String type = obj.has("type") ? obj.getString("type") : null;
            Uri uri = obj.has("url") ? Uri.parse(obj.getString("url")) : null;
            JSONObject extras = obj.has("extras") ? obj.getJSONObject("extras") : null;
            Map<String, String> extrasMap = new HashMap<String, String>();

            // Populate the extras if any exist
            if (extras != null) {
                JSONArray extraNames = extras.names();
                for (int i = 0; i < extraNames.length(); i++) {
                    String key = extraNames.getString(i);
                    String value = extras.getString(key);
                    extrasMap.put(key, value);
                }
            }

            startActivity(obj.getString("action"), uri, type, extrasMap);
            return new PluginResult(PluginResult.Status.OK);

        } else if(action.equals("startActivityForResult")) {
            if (args.length() != 1) {
                return new PluginResult(PluginResult.Status.INVALID_ACTION);
            }
            this.callback = callbackId;
            // Parse the arguments
            JSONObject obj = args.getJSONObject(0);
            String type = obj.has("type") ? obj.getString("type") : null;
            Uri uri = obj.has("url") ? Uri.parse(obj.getString("url")) : null;
            JSONObject extras = obj.has("extras") ? obj.getJSONObject("extras") : null;
            Map<String, String> extrasMap = new HashMap<String, String>();

            // Populate the extras if any exist
            if (extras != null) {
                JSONArray extraNames = extras.names();
                for (int i = 0; i < extraNames.length(); i++) {
                    String key = extraNames.getString(i);
                    String value = extras.getString(key);
                    extrasMap.put(key, value);
                }
            }

            this.startActivityForResult(obj.getString("action"), uri, type, extrasMap);
            PluginResult result = new PluginResult(PluginResult.Status.OK);
            result.setKeepCallback(true);
            return result;

        } else if (action.equals("hasExtra")) {
            if (args.length() != 1) {
                return new PluginResult(PluginResult.Status.INVALID_ACTION);
            }
            Intent i = ((DroidGap)this.cordova.getContext()).getIntent();
            String extraName = args.getString(0);
            return new PluginResult(PluginResult.Status.OK, i.hasExtra(extraName));

        } else if (action.equals("getExtra")) {
            if (args.length() != 1) {
                return new PluginResult(PluginResult.Status.INVALID_ACTION);
            }
            Intent i = ((DroidGap)this.cordova.getContext()).getIntent();
            String extraName = args.getString(0);
            if (i.hasExtra(extraName)) {
                return new PluginResult(PluginResult.Status.OK, i.getStringExtra(extraName));
            } else {
                return new PluginResult(PluginResult.Status.ERROR);
            }
        } else if (action.equals("getUri")) {
            if (args.length() != 0) {
                return new PluginResult(PluginResult.Status.INVALID_ACTION);
            }

            Intent i = ((DroidGap)this.cordova.getContext()).getIntent();
            String uri = i.getDataString();
            return new PluginResult(PluginResult.Status.OK, uri);
        } else if (action.equals("onNewIntent")) {
            if (args.length() != 0) {
                return new PluginResult(PluginResult.Status.INVALID_ACTION);
            }

            this.onNewIntentCallback = callbackId;
            PluginResult result = new PluginResult(PluginResult.Status.NO_RESULT);
            result.setKeepCallback(true);
            return result;
        } else if (action.equals("sendBroadcast")) 
        {
            if (args.length() != 1) {
                return new PluginResult(PluginResult.Status.INVALID_ACTION);
            }

            // Parse the arguments
            JSONObject obj = args.getJSONObject(0);

            JSONObject extras = obj.has("extras") ? obj.getJSONObject("extras") : null;
            Map<String, String> extrasMap = new HashMap<String, String>();

            // Populate the extras if any exist
            if (extras != null) {
                JSONArray extraNames = extras.names();
                for (int i = 0; i < extraNames.length(); i++) {
                    String key = extraNames.getString(i);
                    String value = extras.getString(key);
                    extrasMap.put(key, value);
                }
            }

            sendBroadcast(obj.getString("action"), extrasMap);
            return new PluginResult(PluginResult.Status.OK);
        }
        return new PluginResult(PluginResult.Status.INVALID_ACTION);
    } catch (JSONException e) {
        e.printStackTrace();
        return new PluginResult(PluginResult.Status.JSON_EXCEPTION);
    }
}

@Override
public void onNewIntent(Intent intent) {
    if (this.onNewIntentCallback != null) {
        PluginResult result = new PluginResult(PluginResult.Status.OK, intent.getDataString());
        result.setKeepCallback(true);
        this.success(result, this.onNewIntentCallback);
    }
}

void startActivity(String action, Uri uri, String type, Map<String, String> extras) {
    Intent i = (uri != null ? new Intent(action, uri) : new Intent(action));

    if (type != null && uri != null) {
        i.setDataAndType(uri, type); //Fix the crash problem with android 2.3.6
    } else {
        if (type != null) {
            i.setType(type);
        }
    }

    for (String key : extras.keySet()) {
        String value = extras.get(key);
        // If type is text html, the extra text must sent as HTML
        if (key.equals(Intent.EXTRA_TEXT) && type.equals("text/html")) {
            i.putExtra(key, Html.fromHtml(value));
        } else if (key.equals(Intent.EXTRA_STREAM)) {
            // allowes sharing of images as attachments.
            // value in this case should be a URI of a file
            i.putExtra(key, Uri.parse(value));
        } else if (key.equals(Intent.EXTRA_EMAIL)) {
            // allows to add the email address of the receiver
            i.putExtra(Intent.EXTRA_EMAIL, new String[] { value });
        } else {
            i.putExtra(key, value);
        }
    }
    this.cordova.getActivity().startActivity(i);
}
void startActivityForResult(String action, Uri uri, String type, Map<String, String> extras) {
    System.out.println("startActivityForResult invoked");
    /*Intent i = (uri != null ? new Intent(action, uri) : new Intent(action));

    if (type != null && uri != null) {
        i.setDataAndType(uri, type); //Fix the crash problem with android 2.3.6
    } else {
        if (type != null) {
            i.setType(type);
        }
    }

    for (String key : extras.keySet()) {
        String value = extras.get(key);
        // If type is text html, the extra text must sent as HTML
        if (key.equals(Intent.EXTRA_TEXT) && type.equals("text/html")) {
            i.putExtra(key, Html.fromHtml(value));
        } else if (key.equals(Intent.EXTRA_STREAM)) {
            // allowes sharing of images as attachments.
            // value in this case should be a URI of a file
            i.putExtra(key, Uri.parse(value));
        } else if (key.equals(Intent.EXTRA_EMAIL)) {
            // allows to add the email address of the receiver
            i.putExtra(Intent.EXTRA_EMAIL, new String[] { value });
        } else {
            i.putExtra(key, value);
        }
    }*/
    //this.cordova.getActivity().startActivityForResult(i, REQUEST_CODE);
    //this.cordova.startActivityForResult(this, i, REQUEST_CODE);
    Intent intCanvas = new Intent("com.gocanvas.launchApp");
    intCanvas.setPackage("com.gocanvas");
    intCanvas.putExtra("Appname", "appname");
    intCanvas.putExtra("Username", "username");
    //System.out.println("intent call " + intCanvas);
    this.cordova.getActivity().startActivityForResult(intCanvas, 0);
}

void sendBroadcast(String action, Map<String, String> extras) {
    Intent intent = new Intent();
    intent.setAction(action);
    for (String key : extras.keySet()) {
        String value = extras.get(key);
        intent.putExtra(key, value);
    }

    ((DroidGap)this.cordova.getContext()).sendBroadcast(intent);
}

/**
 * Called when the activity exits
 *
 * @param requestCode       The request code originally supplied to startActivityForResult(),
 *                          allowing you to identify who this result came from.
 * @param resultCode        The integer result code returned by the child activity through its setResult().
 * @param intent            An Intent, which can return result data to the caller (various data can be attached to Intent "extras").
 */
public void onActivityResult(int requestCode, int resultCode, Intent intent) {
    if (requestCode == REQUEST_CODE) {
        if (resultCode == Activity.RESULT_OK) {
            this.success(new PluginResult(PluginResult.Status.OK), this.callback);
        } else {
            this.error(new PluginResult(PluginResult.Status.ERROR), this.callback);
        }
    }

}

} 
```

显现：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="app.ivn"
android:versionCode="1"
android:versionName="1.0" >
<uses-sdk android:minSdkVersion="7" ></uses-sdk>
<supports-screens 
android:largeScreens="true" 
android:normalScreens="true" 
android:smallScreens="true" 
android:resizeable="false"
android:anyDensity="true" />
<uses-permission android:name="android.permission.VIBRATE" />
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_LOCATION_EXTRA_COMMANDS" />
<uses-permission android:name="android.permission.READ_PHONE_STATE" />
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.RECEIVE_SMS" />
<uses-permission android:name="android.permission.RECORD_AUDIO" />
<uses-permission android:name="android.permission.MODIFY_AUDIO_SETTINGS" />
<uses-permission android:name="android.permission.READ_CONTACTS" />
<uses-permission android:name="android.permission.WRITE_CONTACTS" />
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" /> 
<uses-permission android:name="android.permission.GET_ACCOUNTS" />
<uses-permission android:name="android.permission.BROADCAST_STICKY" />
<application
    android:icon="@drawable/icon"
    android:label="@string/app_name" >
    <activity
        android:name=".IVNActivity"
        android:label="@string/app_name"
        android:windowSoftInputMode="adjustResize"
        android:screenOrientation="landscape"
        android:alwaysRetainTaskState="true"
        android:launchMode="standard">
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application>

</manifest> 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T16:38:19.200

```
this.cordova.getActivity().startActivityForResult(intCanvas, 0) 
```

看到了你对你的问题的回答.. 但是一些需要连接到 PhoneGap 的 Native Android 人可能想知道你可以让你的 Activity 回到你的插件的方法是确保：

```
this.cordova.setActivityResultCallback(MyActivity.this); 
```

在您进行呼叫之前被`startActivityForResult()`呼叫。一件真正困扰我但似乎没有人回答的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T16:49:34.043

所以这是重新加载应用程序的屏幕旋转问题。我只需要添加 `android:configChanges="orientation"` 到清单中。不幸的是，如果每个人都没有列出此选项，就好像您可以在 configChanges 选项中有多个值一样，这会很快解决。

每次都会出错。 `android:configChanges="orientation|keyboard"`

# javascript - Google Map API v3 多标记信息窗口 - 悬停 html 垃圾

> ID：13729842
> 
> 赞同：0
> 
> 时间：2012-12-05T18:21:25.890
> 
> 标签：javascript, google-maps, google-maps-api-3, google-maps-markers

首先要说我是一个javascript新手....

我从 stackoverflow.com 上的以下问题中借用了一些代码示例：

[Google Maps JS API v3 - 带有自定义标记的简单多标记示例](https://stackoverflow.com/questions/5666173/google-maps-js-api-v3-simple-multiple-marker-example-with-custom-markers)

问题是，当我在 infoWindow 中添加一些样式时，悬停显示所有 html 垃圾：我太新了，无法上传图像，但这里有一个可以显示问题的工作链接。

链接： http: [//www.conleym.com/map/google_maps_code_10_zoom_working.html](http://www.conleym.com/map/google_maps_code_10_zoom_working.html)

所以我的问题是 - 是否有一种简单的方法可以消除悬停时的样式信息，或者是否有一种方法可以禁用悬停以使用户看不到它？

这是我使用过的示例：

```
['<a style="font-family: Arial" href="http://www.mfah.org/" target="_blank"><b>The Holocaust Museum</b></a><br><span style="font-size: 12px; font-family: Arial;">1001 Bissonnet Street<br> Houston, TX 77005<br>(713) 639-7300<br></span>', 29.725472,-95.386033, 4, 'http://www.conleym.com/map/icons/star-3.png'], 
```

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T18:47:10.083

该`createMarker`功能实际上是为带有纯文本标题的标记而设计的。我建议修改该函数以容纳您拥有的其他信息，即：**链接**（URL）、**地址**和**电话**。

您应该根据提供的标题、链接、地址和电话在函数内创建 HTML 标记，而不是对信息窗口和悬停文本（标题）使用相同`myTitle`的标记。函数变为`contentString`：`createMarker`

```
function createMarker(latlng, myTitle, myLink, myAddress, myPhone, myNum, myIcon) {
    var contentString = '<a style="font-family: Arial" href="' +
        myLink + '" target="_blank">' + myTitle +
        '</a><br><span style="font-size: 12px; font-family: Arial;">ADDRESS<br> ' +
        myAddress + '<br>PHONE<br>' + myPhone + '</span>';

    var marker = new google.maps.Marker({
        position: latlng,
        map: map,
        icon: myIcon,
        zIndex: Math.round(latlng.lat() * -100000) << 5,
        title: myTitle,
    });

    // ... 
```

您必须更新对函数的调用以传递正确的参数：

```
createMarker(new google.maps.LatLng(locations[i][4], locations[i][5]), locations[i][0], locations[i][1], locations[i][2], locations[i][3], locations[i][6], locations[i][7]); 
```

*   `location[i][0]`是位置的名称/标题
*   `location[i][1]`是链接
*   `location[i][2]`是地址
*   `location[i][3]`是电话号码
*   `location[i][4]`是位置的纬度
*   `location[i][5]`是位置的经度
*   `location[i][6]`是`myNum`（实际上并没有在任何地方使用）
*   `location[i][7]`是标记图标的 URL

现在，您可以更干净地对数据源进行编码。例如：

```
var locations = [    

//====================== ZONE 1 MUSEUMS  ==========================
//THE MENIL COLLECTION  
    ['The Menil Collection', 'http://www.mfah.org/', 'Houston TX 77006', '(713) 639-7300', 29.737593,-95.398525, 1, 'http://www.conleym.com/map/icons/world.png'],

//ROTHKO CHAPEL 
    ['Rothko Chapel', 'http://www.mfah.org/', 'Houston, TX 77006', '(713) 639-7300', 29.737822,-95.395725, 2, 'http://www.conleym.com/map/icons/world.png'],

//HOUSTON CENTER for PHOTOGRAPY 
    ['Houston Center for Photography', 'http://www.mfah.org/', 'Houston, TX 77006', '(713) 639-7300', 29.738606,-95.397179, 3, 'http://www.conleym.com/map/icons/world.png'],

// and so on...

]; 
```

**演示：** [之前](http://jsfiddle.net/WAFKS/)和[之后](http://jsfiddle.net/WAFKS/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T18:49:16.393

HTML 元素（或标记）的 title 属性不支持 HTML 标记。您不应该对标题和 InfoWindow HTML 内容使用相同的字符串。将另一个元素添加到您的数组中，将标题放入其中以用于标记的标题属性，然后将您当前拥有的 HTML 放入 InfoWindow 中。

```
function createMarker(latlng, myTitle, myNum, myIcon) {
  var contentString = myTitle;        <-------------------- this appears in the InfoWindow
  var marker = new google.maps.Marker({
    position: latlng,
    map: map,
    icon: myIcon,
    zIndex: Math.round(latlng.lat() * -100000) << 5,
    title: myTitle,    <------------------------------------------- this is the tooltip
                                                                    appears on mouseover
  });

  google.maps.event.addListener(marker, 'click', function() {
    infowindow.setContent(contentString);
    infowindow.open(map, marker);
  });

  markerArray.push(marker); //push local var marker into global array
}  <---------------------------------------------------------this close "}" is missing 
```

您的 createMarker 函数中似乎包含一堆垃圾（多边形定义），您真的只想添加一次，而不是每次添加标记。

# haskell - 在 Haskell 中实现一个简单的关联映射

> ID：13729843
> 
> 赞同：1
> 
> 时间：2012-12-05T18:21:28.603
> 
> 标签：haskell, dictionary, map, constructor, associative

在此期间，我正在学习 Haskell，但我在解决一个简单的练习时遇到了问题。

我想写一个简单的关联地图数据结构来锻炼自己。

这是我到目前为止写的代码：

```
-- It represents a simple ordered couple in the form (key, value)
data Element a b = Element (a, b)
    deriving (Show)

-- It represents a (unordered) list of elements in the form (key, value)
data Dictionary a b = Dictionary [Element a b]
    deriving (Show)

-- It represents a simple dictionary which will be used for my tests
t :: Dictionary Char Int
t = Dictionary [Element ('a', 1), Element ('b', 2), Element ('a', 3)] 
```

现在我正在尝试编写一个简单的方法以 (a, b) 的形式返回情侣列表。我这样做是为了锻炼自己并提供一个对其他方法（查找等）有用的简单功能。

我已经写了这段代码，但我知道这是错误的：

```
couples :: Dictionary a b -> [(a, b)]
couples (Dictionary t) = [(k , v) | (k, v) <- t] 
```

问题是显然“t”不是一对列表：它是由一个元素列表组成的，这些元素由类型构造函数“Element”和一个有序的一对组成。

我怎样才能“摆脱”“元素”类型的构造函数？我不知道...

先感谢您。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T18:25:40.820

只需在模式匹配中添加 Element 构造函数。

```
couples :: Dictionary a b -> [(a, b)]
couples (Dictionary t) = [(k , v) | (Element (k, v)) <- t] 
```

# r - 有没有办法在 J 中“自动命名”表达式

> ID：13729856
> 
> 赞同：0
> 
> 时间：2012-12-05T18:22:44.673
> 
> 标签：r, data.table

我有一些关于[data.table](http://datatable.r-forge.r-project.org/)的问题/建议。

* * *

```
R)  X = data.table(x=c("q","q","q","w","w","e"),y=1:6,z=10:15)
R) X[,list(sum(y)),by=list(x)]
   x V1
1: q  6
2: w  9
3: e  6 
```

我觉得不得不写太糟糕了

```
R) X[,list(y=sum(y)),by=list(x)]
   x y
1: q 6
2: w 9
3: e 6 
```

它应该默认保持相同的列名（即：y），其中函数只调用一列，这在大多数情况下将是一个巨大的收益，通常在金融中，因为我们通常将其视为加权和或上次或.. . => 有没有我可以设置为默认此行为的变量？

* * *

在进行选择时，我可能想对几列进行微积分，并对所有其他列应用另一个操作。我的意思是太糟糕了，当我想要这个时：

```
R)  X = data.table(x=c("q","q","q","w","w","e"),y=1:6,z=10:15,t=20:25,u=30:35)
R) X
   x y  z  t  u
1: q 1 10 20 30
2: q 2 11 21 31
3: q 3 12 22 32
4: w 4 13 23 33
5: w 5 14 24 34
6: e 6 15 25 35
R) X[,list(y=sum(y),z=last(z),t=last(t),u=last(u)),by=list(x)] #LOOOOOOOOOOONGGGG 
#EXPR
   x y  z  t  u
1: q 6 12 22 32
2: w 9 14 24 34
3: e 6 15 25 35 
```

我不能像这样写...

```
R) X[,list(sum(y)),by=list(x),defaultFn=last] #defaultFn would be 
applied to all remaniing columns 
```

=> 我能以某种方式做到这一点（可能正在设置一个选项）吗？

* * *

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T21:06:02.633

在第 1 部分，这不是一个坏主意。我们已经对 中的表达式这样做了`by`，并且已经在列表中列出了一些接近的内容`j`：

[FR#2286 推断的命名可能适用于 j=colname[...]](https://r-forge.r-project.org/tracker/index.php?func=detail&aid=2286&group_id=240&atid=978)
[查找每个组的最大值并返回另一列](https://stackoverflow.com/a/12612725/403310)

但如果我们这样做了，它可能需要通过一个选项打开，以保持向后兼容性。我在那个 FR 中添加了一个链接，返回到这个问题。

* * *

在第二部分怎么样：

```
X[,c(y=sum(y),lapply(.SD,last)[-1]),by=x]
   x y  z  t  u
1: q 6 12 22 32
2: w 9 14 24 34
3: e 6 15 25 35 
```

不过，请分别提出多个问题。SO上的每个问题都应该是一个问题。

# java - 具有域和业务类的 UML 类图

> ID：13729857
> 
> 赞同：1
> 
> 时间：2012-12-05T18:22:50.523
> 
> 标签：java, oop, uml

当我们要求绘制类图时，大多数示例识别系统的域类并显示它们之间的关系。但它也显示了这些领域类中的业务方法。通常域类在应用程序中充当 DTO，并且应该只有字段并且 getter 和 setter 知道。

例如`Doctor`是一个域类。如果是这样，我们不能有正确的方法`createPrescription()`吗？该方法应该在使用域类的其他一些业务实现类中，`Doctor`对吗？

检查下面的链接以获取绘制的类图。

[http://umldiagramtutorial.blogspot.com/2012/10/hospital-management-system-class-diagram.html](http://umldiagramtutorial.blogspot.com/2012/10/hospital-management-system-class-diagram.html)

我要说的是`Doctor`域类不应该有这些方法，而是应该在`DoctorMgtImpl`课堂上。这是对的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-21T09:02:22.440

我同意@vainolo，您的问题仅与实施有关。我参与了一个项目，其实体与这个[医院管理系统](http://app.genmymodel.com/uml/examples/Hospital-Management-System)非常相似。您可以看到我们使用的主要实体，我们没有将所有的 DTO、DAO 放在顶层类图中。关于实现，我们采用的架构是：持久域模型类（例如 Doctor.java），DAO 使用对编码器友好的 CRUD 操作来处理这些持久类，使用带有接口和实现的 DAO 的无状态业务层（“管理器”） , 控制器使用管理器。为所有这些类建模需要几天时间。我们决定您的 UML 类图的目的不是表示代码。我推荐这种方式:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T08:26:57.337

这更像是一个设计/OOP 问题而不是 UML 问题。如果您遵守[SOLID](http://en.wikipedia.org/wiki/SOLID_%28object-oriented_design%29)原则，那么您的观点是正确的：它们赋予一个对象（医生）不同的职责。此外，`Doctor`它不是抽象的，而是非常具体的东西。

另一方面，这个类模型为您提供了系统中活动实体的高级概述，它们的功能是什么以及它们如何交互。然后可以使用不同的类（使用 MVC、添加接口等）来实现该图。UML 图是实现的初始点，但实现并不（而且大多数时候）不应该完全如图所示（因为那为什么要实现？只是从图中生成）。

# scala - 理解函数字面量类型

> ID：13729858
> 
> 赞同：2
> 
> 时间：2012-12-05T18:22:52.827
> 
> 标签：scala, compiler-construction, functional-programming

假设这段代码：

```
 def main(args: Array[String]) {
    val func = (x: String, y :String) => x + ", " + y
    println(myFunc(func))
  }

  def myFunc(f: (String, String) => String) = {
    f("Hey","how are you?")
  } 
```

此代码的第二行由编译器替换为：

```
val func = new Function2[String, String, String] {
             def apply(x: String, y: String): String = x + ", " + y
           } 
```

我可以推断出`func`这种情况下的类型也对应于`(String, String) => String)`类型，如`myFunc`签名所示；表示与 .`Function2[String, String, String]`相同的类型`(String, String) => String`。

为什么不同的符号？为什么 Scala 编译器没有将函数字面量转换为某种概念性的：`new ((String, String) => String)`没有无聊的`Function2[String, String, String]`类型？或相反亦然。

一种解释是类名不能是多部分的：`(T1, T2) => R`. 但为什么不呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-05T18:26:33.300

> 为什么 Scala 编译器没有将函数文字转换为某种概念：`new (String, String) => String`

请记住，Scala 编译为 JVM 字节码。JVM中没有“*概念”之类的东西。`new (String, String) => String`*只有对象和方法（至少在 Java 8 之前）。`Callable<T>`在 Java 语言中，您必须使用无聊`Runnable`或 Guava 和 Apache Commons 中的各种`Function`抽象。没有其他办法了。从这个角度来看，Scala 基本上通过在匿名`FunctionX[...]`类上添加语法糖来隐藏 Java 样板。

这也是为什么 Scala 编译器在使用预期函数的方法（所谓的*eta 扩展*）时必须做这么多摆弄的原因之一。

# c++ - 从 C++ 中的两个类继承并插入到列表中

> ID：13729860
> 
> 赞同：3
> 
> 时间：2012-12-05T18:22:57.140
> 
> 标签：c++

关于将继承自两个类的对象插入列表的以下代码是否存在问题？

```
class A
{
}

class B
{
}

class C : public A, public B
{

}

C *myObj = new C();
std::list<A*> myList;
myList.push_front(myObj); 
```

创建类型 A 的列表并插入属于类型 B 的类型 C 的对象是否有问题？我知道这段代码可以编译，但我很担心内存问题。如果这是一个问题，我还有什么其他选择来解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T18:25:35.110

只要列表通过引用或指针存储数据并且析构函数是虚拟的，就可以了。

基本问题是不允许将 C 存储到 的变量中`A`，但可以将其存储到`A&`or`A*`中。所以`A a = C()`就像将 C 存储到`list<A>`or中一样糟糕`vector<A>`。这将导致[切片](https://stackoverflow.com/questions/274626/what-is-the-slicing-problem-in-c)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T18:43:51.840

从技术上讲，只要您将对象的引用或指针添加到列表中以避免切片并具有虚拟析构函数，您就应该是安全的。

您可以将`A`and`B`视为多态类型的接口。看看这个例子：

```
class Drawable
{
    public:
        virtual ~Drawable() { }
        virtual void draw();
};

class Circle : public Drawable
{
    public:
        void draw() { std::cout << "Drawing a circle\n"; }
}

class Square : public Drawable
{
    public:
        void draw() { std::cout << "Drawing a square\n"; }
}

int main()
{
    std::list<Drawable*> shapeList { new Square(), new Circle(), new Square() };
} 
```

# jquery - 使用 jQuery 使用从外部页面检索到的值更改页面标题

> ID：13729868
> 
> 赞同：0
> 
> 时间：2012-12-05T18:23:27.023
> 
> 标签：jquery

我正在尝试使用从外部页面上的 div 检索到的值来更改页面标题。所有文件都是本地的，在同一个文件夹中，或者一旦上传就会在同一个域下。

这是外部页面 (settings.html) 上的 html：

```
<div id="clientName">Some Company</div> 
```

我正在使用`.load`函数从不同的页面（index.html）获取该 div 的内容：

```
$('title').load('settings.html #clientName'); 
```

一旦执行，页面标题将更改为 settings.html 页面 (file://blahblah) 的文件路径，而不是“Some Company”。但是，如果我尝试将相同的内容加载到 div 中，一切正常，如下所示：

```
$('div.test').load('settings.html #clientName'); 
```

我做错了什么？

谢谢， 克里科科

**编辑：**为了澄清，我不想开始讨论上面代码的实用性。我知道有更好的方法可以做到这一点，但是，这是一个演示/测试项目，很可能在没有本地服务器运行的情况下从本地机器运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T18:28:45.817

不要使用`$('title')`IE 不太支持它。而是使用`document.title = 'whatever';`以下内容将起作用

```
document.title = $('<div/>').load('settings.html #clientName'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T18:29:28.420

我认为您不能为此使用 jQuery。只要用好

```
document.title = $('<div/>').load('settings.html #clientName'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T18:40:43.380

我希望这需要通过回调异步完成。

```
$('<div/>').load('settings.html #clientName', function(response, status, xhr) {
    $("title").text($(this).text());
    //or
    //document.title = $(this).text();
}); 
```

`document.title = $('<div/>'). ...`在星期天的一个月内不会工作。您不能像分配文本一样分配 jQuery 对象。

如果@Magicmarkker 关于 IE 不玩 . 的说法是正确的`$("title")...`，那么请使用`document.title = $(this).text()`.

# c# - 为什么“int”可以被视为“ushort”，但在作为扩展方法中的参数传递时却不能，什么是优雅的解决方案？

> ID：13729869
> 
> 赞同：4
> 
> 时间：2012-12-05T18:23:26.540
> 
> 标签：c#, .net, extension-methods, parameter-passing, ushort

我有这个扩展方法：

```
public static bool In<T>(this T source, params T[] list)
{
    return list.Contains(source);
} 
```

现在我需要将上述方法用于`ushort`. 当我尝试

```
ushort p = 3;
if (p.In(1, 2, 3, 4, 5))
   return; 
```

第一行投到`3`一口井里`ushort`。但是当`3`作为参数传递时，我得到了错误

> 'ushort' 不包含 'In' 的定义，并且最佳扩展方法重载 'Extensions.In(T, params T[])' 有一些无效参数。

但这有效：

```
ushort p = 3;
if (Extensions.In(p, 1, 2, 3, 4, 5))
   return; 
```

这很奇怪。

1.  为什么它适用于第二个示例，而不适用于第一个示例？

2.  有什么好的选择可以在这里帮助我？由于没有文字，`short`或者`ushort`我找不到比手动转换每个整数更简单的替代方法，如下所示：

    ```
    ushort p = 3;
    if (p.In((ushort)1, (ushort)2, (ushort)3, (ushort)4, (ushort)5))
       return; 
    ```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T18:29:42.687

好吧，你定义了一个泛型函数，所以你必须定义它必须处理*的确切类型。*因为如果您只给函数提供数字（`1`、`2`、`3`、`4`等）。它们可以是**任何东西**: `short`, `ushort`, `integer`...

所以你可以这样做：

或者

```
ushort p = 3;
if (p.In<ushort>(1, 2, 3, 4, 5))
   return; 
```

或者就像您在第二个示例中所做的那样，将每个参数转换为所需的类型：

```
ushort p = 3;
if (p.In((ushort)1, (ushort)2, (ushort)3, (ushort)4, (ushort)5))
   return; 
```

我个人更喜欢第*一种*情况。

**编辑**

为什么它在这种情况下有效：

```
ushort p = 3;
if (Extensions.In(p, 1, 2, 3, 4, 5))
   return; 
```

是因为您像（第一个参数）一样*显式*传递编译器的**已知类型**，所以它*可以*推断它。`this``p`

 ***的**默认**`1, 2, 3, 4, etc.`类型是`int`。所以当你打电话

```
p.In(1, 2, 3, 4, 5) 
```

`T`被视为（或倾向于）被视为`integer`价值。由于编译器**不能保证**不会丢失任何数据（当您使用`ushort`整数时），它会给出一条错误消息。它强制你显式定义一个*更小的类型*。

请注意：函数参数的定义类似于`T[]`，因此您传递整数（至少编译器是这样认为的）但假装它是`ushort`（当您从 调用 ext-method 时`p`）。

为了证明，尝试运行

```
int p = 3;
if (p.In(1, 2, 3, 4, 5))
   return; 
```

这完美地工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T22:39:40.623

> 为什么它适用于第二个示例，而不适用于第一个示例？

首先，让我们弄清楚编译器会推断出什么`T`。有些参数是`ushort`，有些是`int`。 `ushort`有到 的隐式转换`int`并且`int`没有到 的隐式转换`ushort`，所以`T`是`int`。

这里的关键在 C# 4 规范的第 7.6.5.2 节（强调我的）：

> **如果满足以下条件，则扩展方法 Ci.Mj 是合格的：**
> 
> *   Ci 是一个非泛型、非嵌套类
> *   Mj 的名字是标识符
> *   Mj 在作为静态方法应用于参数时是可访问和适用的，如上所示
> *   **从 expr 到 Mj 的第一个参数的类型存在隐式*标识、引用或装箱转换。***

存在从to的*隐式*转换，但没有*标识、引用或装箱*转换！ `ushort``int`

 *因此，以下是合法的：

```
Extensions.In<ushort>(p, 1, 2, 3, 4, 5);
Extensions.In<int>(p, 1, 2, 3, 4, 5); // implicit conversion allowed
Extensions.In(p, 1, 2, 3, 4, 5); // T is int
p.In<ushort>(1, 2, 3, 4, 5); 
```

但以下不是：

```
p.In<int>(1, 2, 3, 4, 5); // implicit conversion not allowed
p.In(1, 2, 3, 4, 5); // T is int 
```

请注意，如果您定义`In`为

```
public static bool In(this int source, params int[] list)
{
    return list.Contains(source);
} 
```****

# c# - 使用反射从字符串中获取实体对象

> ID：13729873
> 
> 赞同：1
> 
> 时间：2012-12-05T18:23:53.517
> 
> 标签：c#, entity-framework, entityobject

我可以使用以下代码获取对象集：

```
string tableName = "States";
var test = db.GetType().GetProperty(tableName).GetValue(db, null);

//this returns {System.Data.Objects.ObjectSet<FmlaModel.State>} 
```

但是，我想先找到**EntityObject** `FmlaModel.State`，这样我就可以明确地命名我的变量类型（比如`ObjectSet<EntityObject>`代替`var`），这样我就可以用它来告诉我的表单（TableEditor，见下文）我们正在使用什么类型的 EntityObject .

有没有办法使用反射来做到这一点？我已经搜索了很多，但还没有找到任何有效的东西......

**编辑：** 我的目标是能够拥有一个包含我们将能够编辑的实体对象名称的数据库表。这些名称将被加载到一个组合框中，当一个被选中时，我将创建一个我的“表格编辑器”表单的实例，其中包含类似

```
TableEditor<myEntityObject> tableEditor 
     = new TableEditor<myEntityObject>(myEntitySet<myEntityObject>); 
```

我的“表格编辑器”类如下所示：

```
public partial class TableEditor<TEntity> : Form
    where TEntity : EntityObject
{
    public TableEditor(ObjectSet<TEntity> something)
    {
    ... 
```

# c# - xml 作为我班级的一个属性

> ID：13729874
> 
> 赞同：1
> 
> 时间：2012-12-05T18:23:54.823
> 
> 标签：c#, xml

我有一个类有一些属性，其中一个属性想要获取或设置 XML 文本，如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<Root>
  <SaveCode>QuiddityVer</SaveCode>
  <IsMainProject>fals</IsMainProject>
  <DesignerItems>
    <DesignerItem>
      <Quiddity>Play</Quiddity>
      <Name>Node_Play1</Name>            
      <LoopBodyInDesignerCanvas />
    </DesignerItem>   
</Root> 
```

设置和获取此 xml 表达式的正确变量类型是什么？

我班级的财产是这样的：

```
privte String _myxmlExpresion;
public String myxmlExpresion
        {
            get
            {
                return _myxmlExpresion;
            }
            set
            {
                _myxmlExpresion= value;
            }
        } 
```

我的项目是 multiTab，每个选项卡都有 DesignerItems 来显示其中的一些节点（比如 Visual DialPlan 或 Visual VXML 设计器），并且一些节点具有在我单击它时打开一个新选项卡的属性，我保存并在 XML 文件中打开这个选项卡，但在这里我不希望这个新选项卡到额外的 xml 文件，我想将它保存在我的属性中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T18:26:02.567

您可以只使用纯字符串或[XDocument](http://msdn.microsoft.com/en-us/library/system.xml.linq.xdocument.aspx)。

或者，您也可以使用[XmlDocument](http://msdn.microsoft.com/en-us/library/system.xml.xmldocument.aspx)。（感谢 msmucker0527）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T10:35:08.280

one of the appropriate way is to save all new tab as a separate file and have new tabs address in our property to open and save XML document.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T18:47:06.223

创建用于保存 xml 数据的类：

```
public class Foo
{
    public string SaveCode { get; set; }
    public bool IsMainProject { get; set; }
    public List<DesignerItem> DesignerItems { get; set; }
}

public class DesignerItem
{
    public string Quiddity { get; set; }
    public string Name { get; set; }
    public string LoopBodyInDesignerCanvas { get; set; }
} 
```

并解析你的 xml：

```
XElement root = XElement.Parse(xml);
var foo = new Foo()
{
    SaveCode = (string)root.Element("SaveCode"),
    IsMainProject = (bool)root.Element("IsMainProject"),
    DesignerItems = root.Element("DesignerItems")
                        .Elements("DesignerItem")
                        .Select(di => new DesignerItem()
                        {
                            Quiddity = (string)di.Element("Quiddity"),
                            Name = (string)di.Element("Name"),
                            LoopBodyInDesignerCanvas = (string)di.Element("LoopBodyInDesignerCanvas")
                        }).ToList()
}; 
```

将解析的对象存储为类型的属性`Foo`（当然，我认为数据有一个更好的名称，您的 xml 包含该名称）。这将为您提供强类型语言的所有优势：

```
if (yourObject.Foo.IsMainProject)
    // ... 
```

*顺便说一句*`DesignerItems`，您在 xml 中有拼写错误 -元素没有结束标记。并且值有错别字`false`。

# php - 打印多维数组PHP

> ID：13729878
> 
> 赞同：0
> 
> 时间：2012-12-05T18:23:58.463
> 
> 标签：php, mysql, sql, xls

我正在尝试将 .xls excel 上的 DB 字段打印为：

```
$sql="select * from bill ";

$result=mysql_query($sql);
while($row = mysql_fetch_array($result)){
    $ARP=$row['ARP_name'] ;
    $nam=$row['student_name'] ;

    $doc=array("ARP name"=>array('ARPname'=>($ARP),'name'=>$nam));
}
$xls->addArray ( $doc ); 
```

但打印结果只是 DB 的最后一条记录，我希望所有记录都被打印

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T18:25:32.877

因为你的大括号是错误的：

```
$doc=array("ARP name"=>array('ARPname'=>($ARP),'name'=>$nam));}
                                                              ^ 
```

大括号必须在此行之后：

```
$xls->addArray ( $doc ); 
```

因此，完整的代码将是：

```
$result=mysql_query($sql);
while($row = mysql_fetch_array($result)){
    $ARP=$row['ARP_name'] ;
    $nam=$row['student_name'] ;

    $doc=array("ARP name"=>array('ARPname'=>($ARP),'name'=>$nam));
    $xls->addArray ( $doc );
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T18:25:42.787

将最后一行移到 while 循环中：

```
while($row = mysql_fetch_array($result)){
    $ARP=$row['ARP_name'] ;
    $nam=$row['student_name'] ;

    $doc=array("ARP name"=>array('ARPname'=>($ARP),'name'=>$nam));
    $xls->addArray ( $doc );
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T18:25:38.317

你有`$xls->addArray`你的while循环之外的调用，你需要把它移到里面：

```
$result=mysql_query($sql);
while($row = mysql_fetch_array($result)){
    $ARP=$row['ARP_name'] ;
    $nam=$row['student_name'] ;

    $doc=array("ARP name"=>array('ARPname'=>($ARP),'name'=>$nam));
    $xls->addArray ( $doc );
} 
```

# macos - NetFSMountURLSync 无法使用自定义挂载点？

> ID：13729880
> 
> 赞同：3
> 
> 时间：2012-12-05T18:24:09.163
> 
> 标签：macos, osx-mountain-lion

我正在尝试以编程方式挂载一些 WebDAV 和 SMB 共享，并且我想为卷指定默认名称以外的特定名称。例如，如果我安装

> [https://my.sharepoint.school.edu/personal/grigutis](https://my.sharepoint.school.edu/personal/grigutis)

我希望它在 Finder 中显示为

> /Volumes/My SharePoint Site
> 或
> ~/Desktop/My SharePoint Site

代替

> /Volumes/grigutis
> 或
> ~/Desktop/grigutis

我可以用 mount_webdav 命令做到这一点：

```
$ mkdir /Volumes/My\ SharePoint\ Site
$ mount_webdav -s -i https://my.sharepoint.school.edu/personal/grigutis /Volumes/My\ SharePoint\ Site
or
$ mkdir ~/Desktop/My\ SharePoint\ Site
$ mount_webdav -s -i https://my.sharepoint.school.edu/personal/grigutis ~/Desktop/My\ SharePoint\ Site 
```

但我无法使用 NetFSMountURLSync 进行此操作（假设我已经创建了目录）：

```
NSURL *url = [NSURL URLWithString:@"https://my.sharepoint.school.edu/personal/grigutis"];

NSURL *mountpath = [NSURL fileURLWithPath:@"/Volumes/My SharePoint Site" isDirectory:YES];
or
NSURL *mountpath = [NSURL fileURLWithPath:[@"~/Desktop/My SharePoint Site" stringByExpandingTildeInPath] isDirectory:YES];

CFArrayRef mountpoints = NULL;
int result = 0;
result = NetFSMountURLSync((__bridge CFURLRef)url,
    (__bridge CFURLRef)mountpath,
    CFSTR("Kerberos"),
    CFSTR("NoPassword"),
    NULL,
    NULL,
    &mountpoints); 
```

如果我尝试安装到 /Volumes/My SharePoint Site，我会看到 Finder 对话框：

> '连接到服务器“my.sharepoint.school.edu”时出现问题。您没有访问此服务器的权限。

并且函数返回结果 13（权限被拒绝）。

如果我尝试安装到 ~/Desktop/My SharePoint Site，那么它会像这样安装

> ~/桌面/我的 SharePoint 站点/grigutis

这不是我想要的。我已经提交[了一个关于这个的错误报告](http://openradar.appspot.com/12788358)。有任何想法吗？如果可能的话，我想避免使用 NSTask 。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-09-23T20:03:48.443

预先创建挂载点，并`kNetFSMountAtMountDirKey`在挂载选项中启用：

```
CFMutableDictionaryRef mountOpts = CFDictionaryCreateMutable(NULL, 0, &kCFTypeDictionaryKeyCallBacks, &kCFTypeDictionaryValueCallBacks);
CFDictionarySetValue(mountOpts, kNetFSMountAtMountDirKey, CFSTR("true"));
int ret = NetFSMountURLSync(
    (__bridge CFURLRef) url,
    (__bridge CFURLRef) mountPath,
    NULL,
    NULL,
    0,
    mountOpts,
    &mountPoints
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-11T08:13:54.003

作为答案：

“*另外，你从哪里得知错误代码的含义*？” –[马特 2014 年 8 月 13 日 21:15]

可以从文件中读取错误代码：/usr/include/sys/errno.h

即，如果您打开终端并运行以下命令：

```
$ cat /usr/include/sys/errno.h | less 
```

这将输出 errno.h 文件并将其发送到 less 以便您可以使用 pgup 和 pgdwn 键导航结果。

# javascript - 使用带有 Handlebars .js 的多个预编译模板（多个 HTTP 请求）？

> ID：13729882
> 
> 赞同：4
> 
> 时间：2012-12-05T18:24:11.550
> 
> 标签：javascript, handlebars.js

我认为这个问题会给我更多的背景信息：

[使用 Handlebars.js 的预编译模板（jQuery Mobile 环境）](https://stackoverflow.com/questions/8659787/using-pre-compiled-templates-with-handlebars-js-jquery-mobile-environment)

基本上我正在尝试学习预编译的东西，这样我就可以节省加载时间并保持我的 html 文档整洁。我还没有开始，但是根据上面的链接，每个模板都需要有自己的文件。那不是要加载很多链接吗？如果不需要，我不想发出多个 HTTP 请求。

因此，如果有人能解释一下，也许可以提供一个替代方案，让我可以从我的 html 中获取模板，但不必加载 100 个不同的模板文件。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-06T13:57:12.560

Grunt.js 之类的工具允许您拥有模板并使用它们。例如，此文件编译模板，然后将它们连接到一个文件中：

```
module.exports = function(grunt) {
  grunt.loadNpmTasks("grunt-contrib-handlebars");

  // Project configuration.
  grunt.initConfig({
    // Project metadata, used by the <banner> directive.
    meta: {},

    handlebars: {
      dist: {
        options: {
          namespace: "JST",
          wrapped: "true"
        },
        files: {
          "templates.js": [
            "./fileA.tmpl",
            "./fileB.tmpl"
          ]
        }
      }
    }
  });

  // Default task.
  grunt.registerTask("default", "handlebars");
}; 
```

自从我刚刚开始使用预编译模板以来，我还没有解决的是工作流程。我希望在运行应用程序的已部署版本时能够编译模板，但在进行开发和调试时，我更愿意将原始的单个文件以未编译的形式保存，这样我就可以编辑它们并重新加载页面。

**跟进：**

在解决了一些如何在可用时拥有我的预编译模板并使用可以在人们进行开发和调试工作并希望快速编辑时即时编辑的单个模板之后，我想回到这个问题-reload-test 循环而不进行 Grunt 构建。

我想出的答案是检查 JST[] 数据结构的存在，然后进一步测试并查看该结构中是否存在特定的预编译模板。如果是，则无需做任何进一步的事情。如果它不存在，则加载模板（我们使用 RequireJS 来执行此操作）并编译并放入同一个 JST[] 数组中，如果已经加载了预编译的模板，它将具有相同的名称。

这样，当实际使用模板时，代码只会在一个地方查找它，而且总是一样的。

在不久的将来，我认为我们可能会有 RequireJS 插件来执行测试和加载/编译代码，同时让开发人员保持简单。

# hibernate - Grails“分配”ID生成策略和beforeSave

> ID：13729885
> 
> 赞同：1
> 
> 时间：2012-12-05T18:24:21.740
> 
> 标签：hibernate, grails

在域类中，我使用“分配的”ID 生成器：

```
static mapping = {
    id(generator: 'assigned')
} 
```

在保存实体之前，我想确保它有一个 id 集。

```
def beforeSave() {
    if (!id) {
        id = DomainUtil.newId();
    }
} 
```

不幸的是，这不起作用：

```
org.hibernate.id.IdentifierGenerationException: ids for this class must be manually assigned before calling save(): was.Product 
```

“beforeSave”钩子似乎是在检查 id 之后被调用的。有没有办法解决这个问题？我使用 Grails 2.1.1。

**编辑：**

这似乎可行，但它很hacky：在属性声明中，我添加了：

```
String id = DomainUtil.newId(); 
```

这将使用“默认”初始化 id，然后可以在调用之前对其进行修改`save()`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T18:50:46.833

`beforeSave`不是受支持的 GORM 事件。你想用`beforeInsert`.

[相关文档在这里](http://grails.org/doc/latest/guide/GORM.html#eventsAutoTimestamping)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T01:44:50.447

你可以试试`beforeValidate`。它可能是最接近您正在寻找的东西。不过，我不确定它是否适用于您的具体情况。它将在插入或更新时执行，因为`save()`调用`validate()`.

# php - 动态检查类名是否是php中XYZ的子类

> ID：13729890
> 
> 赞同：0
> 
> 时间：2012-12-05T18:24:39.260
> 
> 标签：php, class

```
class A {}
class B extends A {}
class C extends A {}
class D extends C {}

$class="C";
if ($class instanceof A) {  //This is just for demonstration - I know instanceof won't work!!!
   $object=new $class("","",1)
} 
```

如何检查字符串“C”以检查该类名是否是 A 的子级？

我调查过`is_a()`，但没有帮助。

我特别要求“C”，因为我正在动态获取类名，并且在不知道要传递给构造函数的参数的情况下无法实例化！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T18:28:17.253

看[`is_a()`](http://php.net/is_a),[`is_subclass_of()`](http://php.net/manual/en/function.is-subclass-of.php)或[`get_parent_class()`](http://php.net/manual/en/function.get-parent-class.php).

**注意：**这些函数需要相关对象的实例，而不仅仅是字符串。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T18:35:02.313

您可以使用 PHP 的反射类来查看给定字符串名称的类继承。例如，您可以像这样轻松构建所有父类的数组：

```
$class = new ReflectionClass('whatever');

$parents = array();
$current_class = $class;
while ($current_class = $current_class->getParentClass()) {
    $parents[] = $current_class->getName();
}
var_dump($parents); 
```

当然，您可能会发现这比使用 using 实例化对象更麻烦`instanceof`。

也有许多其他有趣的`ReflectionClass`方法可能会对您有所帮助，因为您似乎有兴趣找出刚刚给定名称的类的属性。

检查链接以获取更多信息：

[http://php.net/manual/en/class.reflectionclass.php](http://php.net/manual/en/class.reflectionclass.php)

例如，您可以获得当前类的构造函数所需的参数信息，如下所示：

```
$class = new ReflectionClass('whatever');
$const_params = $class->getConstructor()->getParameters();
var_dump($const_params); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T18:30:57.797

您需要 Object 的实例才能使用`instanceof`它应该是：[PHP DOC on instanceOF](http://php.net/manual/en/language.operators.type.php)

```
$class =  "C";
if (new $class instanceof A) {
    var_dump("Ok");
} 
```

或者简单地说

```
$class = new ReflectionClass("C");
if ($class->getParentClass()->name == "A") {
    echo "OK";
} 
```

# ios - ViewDidLoad 加载 4 张图片

> ID：13729893
> 
> 赞同：1
> 
> 时间：2012-12-05T18:24:42.253
> 
> 标签：ios, objective-c, iphone, xcode, version-control

我在我的 ViewDidLoad 中试过这个：

```
 NSString *myGrabbedImage = @"myGrabbedImage.png";
NSString *myGrabbedImage2 = @"myGrabbedImage2.png";
NSString *myGrabbedImage3 = @"myGrabbedImage3.png";
NSString *myGrabbedImage4 = @"myGrabbedImage4.png";

NSArray *path = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSArray *path2 = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSArray *path3 = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSArray *path4 = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentDirectory = [path objectAtIndex:0];
NSString *documentDirectory2 = [path2 objectAtIndex:0];
NSString *documentDirectory3 = [path3 objectAtIndex:0];
NSString *documentDirectory4 = [path4 objectAtIndex:0];

NSString *fullPath = [documentDirectory stringByAppendingPathComponent:myGrabbedImage];
NSString *fullPath2 = [documentDirectory2 stringByAppendingPathComponent:myGrabbedImage2];
NSString *fullPath3 = [documentDirectory3 stringByAppendingPathComponent:myGrabbedImage3];
NSString *fullPath4 = [documentDirectory4 stringByAppendingPathComponent:myGrabbedImage3];

NSData *data = [NSData dataWithContentsOfFile:fullPath];
NSData *data2 = [NSData dataWithContentsOfFile:fullPath2];
NSData *data3 = [NSData dataWithContentsOfFile:fullPath3];
NSData *data4 = [NSData dataWithContentsOfFile:fullPath4];

if ([myGrabbedImage isEqualToString:@"myGrabbedImage.png"])
{
[[self firstImageView]setImage:[UIImage imageWithData:data]];
}
else if ([myGrabbedImage2 isEqualToString:@"myGrabbedImage2.png"])
{
    [[self secondImageView]setImage:[UIImage imageWithData:data2]];
}
else if ([myGrabbedImage3 isEqualToString:@"myGrabbedImage3.png"])
{
    [[self thirdImageView]setImage:[UIImage imageWithData:data3]];
}
else
{
    [[self fourthImageView]setImage:[UIImage imageWithData:data4]];
} 
```

然后我在我的 UIImagePickerController 方法中有这个：

```
- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info
{
UIImage *image1 = [info objectForKey:UIImagePickerControllerOriginalImage];

NSData *data = UIImagePNGRepresentation(image1);
NSString *myGrabbedImage = @"myGrabbedImage.png";
NSArray *path = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentDirectory = [path objectAtIndex:0];
NSString *fullPathToFile = [documentDirectory stringByAppendingPathComponent:myGrabbedImage];

[data writeToFile:fullPathToFile atomically:YES];
if (picker == imagePickerController)
{
    [[self firstImageView]setImage:image1];
}
else if (picker == imagePickerController2)
{
    [[self secondImageView]setImage:image1];
}
else if (picker == imagePickerController3)
{
    [[self thirdImageView]setImage:image1];
}
else if (picker == imagePickerController4)
{
    [[self fourthImageView]setImage:image1];
}
[self dismissViewControllerAnimated:YES completion:nil];
} 
```

粗略地说，ViewDidLoad 只显示一张图像。但是我怎样才能让它加载所有 4 UIImageView´s。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T18:42:59.897

```
#import <UIKit/UIKit.h>

@interface PickerController: UIViewController <UIPickerViewDelegate,     UIPickerViewDataSource> {
NSArray *titleStrings;
UIPickerView *picker;
UIImage *imageView;
}
@end

@implementation PickerController

- (id) init {
if (self = [super init]) {
    titleStrings = [[NSArray alloc] initWithObjects:@"A", @"B", NULL];
    picker = [[UIPickerView alloc] initWithFrame:CGRectMake(0, 100, 320, 100)];
    picker.showsSelectionIndicator = YES;
    picker.delegate = self;
    picker.dataSource = self;
    [self.view addSubview:picker];
    imageView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"empty.png"]];
    imageView.frame = CGRectMake(0, 200, imageView.frame.size.width, imageView.frame.size.height);
    [self.view addSubview:imageView];
    [imageView release];
    [picker release];
}
return self;
}

- (void) dealloc {
[titleStrings release];
[super dealloc];
}

/* UIPickerViewDataSource */

- (NSInteger)numberOfComponentsInPickerView:(UIPickerView *)pickerView {
return 2;
}

- (NSInteger)pickerView:(UIPickerView *)pickerView numberOfRowsInComponent:     (NSInteger)component {
return 2;
}

/* UIPickerViewDelegate */

- (NSString *)pickerView:(UIPickerView *)pickerView titleForRow:(NSInteger)row forComponent:(NSInteger)component {
return [titleStrings objectAtIndex:row];
}

- (void)pickerView:(UIPickerView *)pickerView didSelectRow:(NSInteger)row inComponent:(  NSInteger)component {
NSString *first = [titleStrings objectAtIndex:[pickerView selectedRowInComponent:0]];
NSString *second = [titleStrings objectAtIndex:[pickerView selectedRowInComponent:1]]; 
NSString *imageName = [[NSString alloc] initWithFormat:@"%@%@", first, second];
imageView.image = [UIImage imageNamed:imageName];
[imageName release];
[imageView sizeToFit];
}

@end 
```

# javascript - 如何为 raphael.js 动画设置旋转原点？

> ID：13729899
> 
> 赞同：1
> 
> 时间：2012-12-05T18:25:19.307
> 
> 标签：javascript, jquery, animation, raphael

因此，我生成了 8 条路径：

```
for (i = 0 ; i<8; i++){
    slices[i] = card.path("M320 120 L320 215").attr({"stroke" : "#00A5Df",
            "stroke-width" : 10});
} 
```

我希望它们从 M320 的原点 120（线的起点）以顺时针方向旋转以产生“馅饼”效果：

```
for (i = 0 ; i<8; i++){
    slices[i].animate({transform :"r"+45*(i+1)+""},(200*i));
} 
```

相反，使用的原点位于线的中心。我试过像这样格式化字符串

```
"r45 cx320 cy120" 
```

和其他组合，但这些值总是被忽略。

编辑：这是一个更清楚地突出我的问题的小提琴：http: [//jsfiddle.net/vMRdj/](http://jsfiddle.net/vMRdj/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T18:53:14.367

你几乎成功了。重要的是使用旋转指令的绝对版本（“R”而不是“r”）并明确指定原点，使用格式“R(degree) (origin-x),(origin-y)” .

这是代码：

```
for (i = 0 ; i<8; i++){
    slices[i].animate({transform : ["R", 45*(i+1), 320, 120 ] }, i * 125 );
} 
```

还有小提琴：http: [//jsfiddle.net/kevindivdbyzero/F4xhh/](http://jsfiddle.net/kevindivdbyzero/F4xhh/)

不要忘记您可以将转换和路径作为数组传递——如果您不必担心在参数之间连接逗号分隔符，那么可以很容易地构造参数。

# ienumerable - 在 C# 中，如何使用 LINQ 从 IEnumerable 中获取不同的值？

> ID：13729900
> 
> 赞同：0
> 
> 时间：2012-12-05T18:25:24.263
> 
> 标签：ienumerable

我有一个 IEnumerable 变量，我想从中提取一个不同的值。我知道列表行中的所有条目都具有相同的值，我只需要获取该值。

该方法返回一个 IEnumerable。

IEnumerable 中的行定义为： QuoteCovId AdditionalInterestId AdditionalInterestsAffiliateId AdditionalInterestsLastName AdditionalInterestsBusinessAddrLine1 AdditionalInterestsBusinessCity AdditionalInterestsBusinessState AdditionalInterestsBusinessZip

代码示例：

```
 IadditionalInterestData = AdditionalInterestData.GetAdditionalInterests(MasterPkgID, Requestor);

          // Using linq.
          var quotes = from ai in IadditionalInterestData
                       select Distinct(ai.QuoteCovId);

          // Iterate thru to get the 1 value.
          foreach (int QuoteCovId in quotes)
          {
              quoteID = QuoteCovId;
          } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T18:27:55.243

```
 var quoteId = AdditionalInterestData.GetAdditionalInterests(MasterPkgID, Requestor)
                  .FirstOrDefault().Select(f => f.QuoteCovId); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T20:30:09.797

但是那个方法：

AdditionalInterestData.GetAdditionalInterests(MasterPkgID, Requestor); 返回我一个 IEnumerable，我将在我的应用程序中进一步使用它。这就是我需要的。

那么您的建议如何仍然给我那个 IEnumerable 并给我在集合中恰好相同的报价值？

var quoteId = AdditionalInterestData.GetAdditionalInterests(MasterPkgID, Requestor).FirstOrDefault().Select(f => f.QuoteCovId);

另外，我只是按原样添加了您的代码行，并且收到了错误声明。

# objective-c - 在循环中为 UIView 设置动画

> ID：13729906
> 
> 赞同：0
> 
> 时间：2012-12-05T18:25:34.980
> 
> 标签：objective-c, ios, animation, bubble-sort

我正在创建一个应用程序来展示冒泡排序的工作原理。我遇到的一个问题是动画。它似乎正在跳过，动画正在一次全部触发。在我的 if 语句中，我想交换两个图像并为交换设置动画。然后我想要一个延迟，所以一旦他们交换它就会返回循环并交换接下来的两个图像。下面是我的代码。我尝试了很多类似 sleep() 的方法，但似乎没有用。这些图像是四个盒子，我从左到右，从最小到最大交换它们。

```
for (int i = 0; i < 3; i++)
{
    UIImageView *temp1 =   [imagesArray objectAtIndex:i];
    UIImageView *temp2 =  [imagesArray objectAtIndex:i+1];
    temp1Width = temp1.frame.size.width;
    temp2Width = temp2.frame.size.width;
    if (temp1Width > temp2Width)
    {
        CGPoint tempPoint = temp1.center;

        [UIView animateWithDuration:1.0
                              delay: 1.0
                            options: nil
                         animations:^{
                            temp1.center = temp2.center;

                         }
                         completion:^(BOOL finished){
                             [UIView animateWithDuration:1.0
                                                   delay: 0.0
                                                 options: nil
                                              animations:^{
                                                  temp2.center = tempPoint;
                                              }
                                              completion:^(BOOL finished){
                                              }];
                         }];
        [imagesArray exchangeObjectAtIndex:i+1 withObjectAtIndex:i];
    }
} 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T05:32:36.990

如果您将动画应用于已设置动画的视图，则新动画将替换现有动画。它不只是坚持到最后。这就是为什么您的版本不能按您想要的方式工作的原因。

即使您在新动画上设置了延迟，也会发生这种情况。现有动画将被移除，新动画将在指定延迟后开始。这会阻止 k20 的简单答案起作用。（太糟糕了，因为那将是一个非常简单的解决方案。）

因此，一个非常简单的替代方案是完全推迟添加每个附加动画。使用该`dispatch_after`功能非常容易。首先，让我们分解出将视图的 Y 原点交换为辅助函数的代码：

```
static void swapViewYOrigins(UIView *a, UIView *b) {
    CGRect aFrame = a.frame;
    CGRect bFrame = b.frame;
    CGFloat t = aFrame.origin.y;
    aFrame.origin.y = bFrame.origin.y;
    bFrame.origin.y = t;
    a.frame = aFrame;
    b.frame = bFrame;
} 
```

现在我们可以编写 sort 函数，使其`dispatch_after`用于推迟每个连续的动画：

```
- (IBAction)sortButtonWasTapped {
    NSTimeInterval duration = 1;
    dispatch_time_t time = DISPATCH_TIME_NOW;
    for (int i = imagesArray.count - 1; i > 0; --i) {
        for (int j = 0; j < i; ++j) {
            UIView *a = imagesArray[j];
            UIView *b = imagesArray[j+1];
            if (a.frame.size.width > b.frame.size.width) {
                imagesArray[j] = b;
                imagesArray[j+1] = a;
                dispatch_after(time, dispatch_get_main_queue(), ^{
                    [UIView animateWithDuration:duration delay:0 options:UIViewAnimationOptionBeginFromCurrentState animations:^{
                        swapViewYOrigins(a, b);
                    } completion:nil];
                });
                time = dispatch_time(time, duration * NSEC_PER_SEC);
            }
        }
    }
} 
```

所以这是一个不错的解决方案，但它确实有一个缺点。添加取消动画的按钮并不容易，因为没有 API 可以`dispatch_after`从队列中删除待处理的块。

如果要支持取消，最好显式管理挂起操作的队列。我们可以通过添加一个实例变量来保存队列来做到这一点：

```
@implementation ViewController {
    IBOutletCollection(UIView) NSMutableArray *imagesArray;
    NSMutableArray *pendingSwaps;
} 
```

然后，我们修改`sortButtonWasTapped`为在队列中添加一个块而不是调用`dispatch_after`，并使其在完成排序后开始运行队列：

```
- (IBAction)sortButtonWasTapped {
    pendingSwaps = [NSMutableArray array];
    for (int i = imagesArray.count - 1; i > 0; --i) {
        for (int j = 0; j < i; ++j) {
            UIView *a = imagesArray[j];
            UIView *b = imagesArray[j+1];
            if (a.frame.size.width > b.frame.size.width) {
                imagesArray[j] = b;
                imagesArray[j+1] = a;
                [pendingSwaps addObject:^{
                    swapViewYOrigins(a, b);
                }];
            }
        }
    }

    [self runPendingSwaps];
} 
```

我们使用与`swapViewYOrigins`以前相同的功能。我们像这样运行挂起的交换：

```
- (void)runPendingSwaps {
    if (pendingSwaps.count == 0)
        return;

    void (^swapBlock)(void) = pendingSwaps[0];
    [pendingSwaps removeObjectAtIndex:0];
    [UIView animateWithDuration:1 animations:swapBlock completion:^(BOOL finished) {
        [self runPendingSwaps];
    }];
} 
```

因此，如果队列为空，我们就停止。否则，我们从队列中取出第一个块，并将其用作动画的动画块`UIView`。我们给动画一个完成块，`runPendingSwaps`它会再次调用，在当前动画完成后开始下一个待处理的动画（如果有的话）。

要取消，我们可以设置`pendingSwaps`为 nil：

```
- (IBAction)cancelButtonWasTapped {
    pendingSwaps = nil;
} 
```

请注意，如果用户点击取消，则视图在屏幕上的顺序不一定与它们在屏幕上的顺序相同`imagesArray`，因为返回`imagesArray`时已完全排序`sortButtonWasTapped`。我们可以通过`imagesArray`在开始冒泡排序之前按 Y 原点排序（使用内置排序）来解决这个问题：

```
- (IBAction)sortButtonWasTapped {
    [self sortImagesArrayByY];
    // etc. same as previous version
}

- (void)sortImagesArrayByY {
    [imagesArray sortUsingComparator:^NSComparisonResult(id obj1, id obj2) {
        CGFloat d = [obj1 frame].origin.y - [obj2 frame].origin.y;
        return
        d < 0 ? NSOrderedAscending
        : d > 0 ? NSOrderedDescending
        : NSOrderedSame;
    }];
} 
```

完成此操作后，您可以单击“排序”按钮，然后在视图在屏幕上完全排序之前单击“取消”，然后再次单击“排序”，它将恢复（通过再次执行冒泡排序）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T19:14:13.970

尝试使用计时器隐式执行此操作，而不是使用循环和延迟。例如，您可以使用`NSTimer`持续时间等于或大于动画时间的计划来触发此方法：

```
- (void)performNextAnimation:(NSTimer *)timer
{
    BOOL didSwap = NO;

    for(NSInteger i = 0; i < [self.imageViews count] - 1; ++i)
    {
        UIImageView *image1 = [self.imageViews objectAtIndex:i];
        UIImageView *image2 = [self.imageViews objectAtIndex:(i + 1)];

        if(image1.frame.size.width <= image2.frame.size.width)
            continue;

        CGPoint center1 = image1.center;
        CGPoint center2 = image2.center;

        [UIView animateWithDuration:AnimationDuration
                              delay:0
                            options:UIViewAnimationOptionCurveEaseInOut
                         animations:^
        {
            image1.center = center2;
            image2.center = center1;
        }
                         completion:nil];

        [self.imageViews exchangeObjectAtIndex:(i + 1) withObjectAtIndex:i];

        didSwap = YES;
        break;
    }

    if(!didSwap)
    {
        [self.animationTimer invalidate];
        self.animationTimer = nil;
        NSLog(@"Done!");
    }
} 
```

这只是找到前两个无序的视图并将它们交换，同时将它们移动到彼此的中心点。当然，您可以为每个乱序对选择任何类型的动画来执行。

为了完整起见，这是我首先设置计时器和视图的方式：

```
self.animationTimer = [NSTimer scheduledTimerWithTimeInterval:AnimationDuration
                                                       target:self
                                                     selector:@selector(performNextAnimation:)
                                                     userInfo:nil
                                                      repeats:YES];

CGFloat viewCenterX = self.view.center.x;
self.imageViews = [NSMutableArray array];

const CGFloat imageHeight = 35;
const CGFloat imageMargin = 10;

for(size_t i = 0; i < 10; ++i)
{
    CGFloat imageWidth = arc4random_uniform(250) + 30;
    CGRect imageFrame = CGRectMake(viewCenterX - imageWidth * 0.5, i * (imageHeight + imageMargin) + imageMargin,
                                   imageWidth, imageHeight);
    UIImageView *imageView = [[UIImageView alloc] initWithFrame:imageFrame];

    imageView.backgroundColor = [UIColor redColor];
    [self.view addSubview:imageView];
    [self.imageViews addObject:imageView];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T20:33:25.593

即使您调用 animateWithDuration:delay: 不同的时间，它们也几乎同时被调用（“for”时间）。由于它们都具有相同的延迟，因此您看不到动画。

一个简单的解决方法是使用动态延迟：

```
 [UIView animateWithDuration:AnimationDuration
                              delay:i
                            ... 
```

# mysql - 优化多行计数

> ID：13729907
> 
> 赞同：1
> 
> 时间：2012-12-05T18:25:36.420
> 
> 标签：mysql, join, count

有两个表：`question`和`answer`。在`answer`我持有`user_id`和`question_id`。我想计算每个选项被选中的次数。

下面是一个有效的查询，但不是将同一个表加入 4 次，而是一种更快的方法，即只加入一次答案表。

```
SELECT question.question_id,
    question.correct_choice,
    COUNT(DISTINCT a.user_id) as num_of_a,
    COUNT(DISTINCT b.user_id) as num_of_b,
    COUNT(DISTINCT c.user_id) as num_of_c,
    COUNT(DISTINCT d.user_id) as num_of_d
FROM answer a,
    answer b, 
    answer c, 
    answer d,
    question 
WHERE a.question_id = question.question_id 
    AND b.question_id = question.question_id
    AND c.question_id = question.question_id 
    AND d.question_id = question.question_id 
    AND a.choice = 'A' 
    AND b.choice = 'B'
    AND c.choice = 'C' 
    AND d.choice = 'D'  
GROUP BY question.question_id 
ORDER BY question.question_id asc; 
```

返回

```
273, D, 5, 2, 8, 39
274, C, 2, 14, 50, 2
277, C, 3, 5, 41, 17
278, C, 16, 9, 34, 9
279, C, 8, 30, 24, 12
280, B, 17, 21, 20, 3
284, C, 2, 3, 19, 1
286, A, 16, 3, 2, 2
287, D, 1, 2, 1, 18
289, B, 3, 18, 2, 2
290, D, 6, 9, 8, 6 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T19:15:05.373

此解决方案仅进行一次连接...此外，我将您的隐式连接转换为显式连接，并完善了您的`GROUP BY`：

```
SELECT 
    q.question_id,
    q.correct_choice,
    COUNT(DISTINCT CASE WHEN a.choice = 'A' THEN a.user_id END) as num_of_a,
    COUNT(DISTINCT CASE WHEN a.choice = 'B' THEN a.user_id END) as num_of_b,
    COUNT(DISTINCT CASE WHEN a.choice = 'C' THEN a.user_id END) as num_of_c,
    COUNT(DISTINCT CASE WHEN a.choice = 'D' THEN a.user_id END) as num_of_d
FROM 
    answer a
    JOIN question q ON a.question_id = q.question_id
GROUP BY q.question_id, q.correct_choice
ORDER BY q.question_id asc; 
```

这是有效的，因为当`CASE`语句的计算结果不为 true 时，它​​会返回`NULL`，它不会包含在`COUNT DISTINCT`用户 ID 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T18:39:35.780

如果您关心性能，您可以考虑使用 SELECT... UNION SELECT 样式。

尽管我同意@benjam 的观点，您应该解释结果以查看优化器在说什么，因为您没有依赖查询。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T18:45:49.153

确保您在`question.question_id`、 和 、 和 上有索引`answer.question_id`，`answer.choice`并且`answer.user_id`您的查询应该与不加入每个选择答案的任何其他查询一样快。然后使用以下查询：

```
SELECT `question`.`question_id`,
    `question`.`correct_choice`,
    COUNT(DISTINCT `a`.`user_id`) as `num_of_a`,
    COUNT(DISTINCT `b`.`user_id`) as `num_of_b`,
    COUNT(DISTINCT `c`.`user_id`) as `num_of_c`,
    COUNT(DISTINCT `d`.`user_id`) as `num_of_d`
FROM `question`
    LEFT JOIN `answer` AS `a`
        USING(`a`.`question_id` = `question`.`question_id`
            AND `a`.`choice` = 'A'),
    LEFT JOIN `answer` AS `b`
        USING(`b`.`question_id` = `question`.`question_id`
            AND `b`.`choice` = 'B'),
    LEFT JOIN `answer` AS `c`
        USING(`c`.`question_id` = `question`.`question_id`
            AND `c`.`choice` = 'C'),
    LEFT JOIN `answer` AS `d`
        USING(`d`.`question_id` = `question`.`question_id`
            AND `d`.`choice` = 'D')
GROUP BY `question`.`question_id` ; 
```

ORDER BY 子句不需要并且从 GROUP BY 子句中隐含。

# .net - 随机缓慢的页面加载

> ID：13729913
> 
> 赞同：1
> 
> 时间：2012-12-05T18:25:44.183
> 
> 标签：.net, sql-server, asp.net-mvc-3, performance

解释真正的问题并不容易，但我尝试;-)。

这里有一些数据：

*   带有 IIS7（不是 RC2）的 Microsoft 服务器
*   3GB 内存
*   此服务器上只有此应用程序
*   SQL 2008 速成版
*   存储库模式
*   简单注射器
*   MVC站点地​​图提供者

好的，现在解决问题。这不是启动，因为该站点在 2 秒内加载。应用程序池回收后。启动后，页面在 200 毫秒或更短（或更长）内加载，但有时（我不能说何时，因为它是随机的，而不是在回收之后）它们需要长达 2 分钟或更长时间。

我试图瞥见问题。它显示如下：

*   ASP.NET 开始请求：121456ms（这是随机的）
*   过滤器：2ms
*   控制器：26ms
*   观看次数：298 毫秒
*   ASP.NET 结束请求：0ms

这就像一个请求堆叠，我不知道。

**编辑：**

所以我已经删除了整个 MVC SiteMap Provider，但幻影性能问题仍然存在。

然后我检查了 IIS 配置并注意到 AppPool 是一个 NetworkService 而不是 ApplicationPoolIdentity（其他 MVC 解决方案在 ApplicationPoolIdentity 上运行），现在它似乎比以前更快（页面加载 < 50 毫秒）！如果问题仍然存在，我会写在这个线程中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T18:49:30.343

我在一个 MVC3 项目上遇到了一个非常相似的问题，它的架构与你上面描述的有点相似。我们的问题原来与 MVSitemapProvider 相关。我会寻找关于具体问题的注释，但我们发现如果我们禁用创建菜单的站点地图，就像测试一样，一切都快如闪电，然后当我们重新打开它时它会变慢。

我建议将其作为调试问题的下一步。

好的，我与该项目的一位同事交谈过，我现在想起来了。有几个问题。首先，MVC Sitemap Provider 吞下了它所有的异常；这并不完全是坏事，但确实使故障排除变得困难。我们发现了两种不同的场景，它们导致了两个略有不同的问题，都导致了减速。首先，我假设在您的 _Layout.cshtml 或任何布局文件中，您正在调用提供程序以生成您的菜单，也许还有面包屑。

1.  如果您有一个未在站点地图中定义的控制器操作，那么无论何时您转到该页面，生成菜单和面包屑的尝试都会在异常之后引发异常，并且您永远看不到它们；这是非常昂贵的，并且会减慢该页面的速度。
2.  如果您在站点地图中定义了一个节点，该节点指向拼写错误或根本不存在的控制器操作，则每次站点地图尝试呈现菜单和/或面包屑时，它都会抛出并吞下许多异常，对于每个单页。

由于我们在站点地图上遇到的这两个问题和其他问题，我真的建议您仔细检查您的站点地图文件并确保您在其中代表所有控制器操作，并且您没有错误定义任何节点。如果您不能完全确定，您甚至可能希望在站点地图代码中放置一些断点并逐步检查它是否为您抛出异常，然后从那里向后追溯。

# jquery - 选择元素在 jquery-ui dlalog 标题（Firefox）中不起作用

> ID：13729914
> 
> 赞同：2
> 
> 时间：2012-12-05T18:25:44.890
> 
> 标签：jquery, jquery-ui, firefox, jquery-ui-dialog

**设置**

我使用 jquery-ui 创建一个对话框并为包含 <select> 元素的所述对话框设置标题。

```
$(".dialog").dialog()
$(".dialog").dialog("option", "draggable", false)    
$(".dialog").dialog("option", "title", "<select><option>option 1</option><option>option 2</option></select>") 
```

**问题（仅限 firefox / [在 Win7/OpenSuse 12.2 上使用 Firefox 17/16 测试））**

对话框标题栏包含我无法通过左键单击使用的选择元素。如果右键单击它或使用快捷方式选择它，它将打开，但左键单击不会这样做。

通过 Jsfiddle ( [http://jsfiddle.net/cma4X/2/](http://jsfiddle.net/cma4X/2/) )给出的示例

任何想法如何解决它或至少是什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T19:44:09.703

似乎 jQuery 禁用了标题栏中的任何输入，但您可以通过在绘制对话框后添加选择元素并将其与 CSS 定位回标题中来规避这一点。

**[jsFiddle 示例](http://jsfiddle.net/cma4X/8/)**

```
$(".dialog").dialog({
    draggable: false,
    open: function(event, ui) {
        $('.ui-dialog-titlebar').after('<select style="position:absolute;top:12px;left:25px;"><option>option 1</option><option>option 2</option></select>');
    }
}); 
```

# javascript - .apply 不改变范围

> ID：13729918
> 
> 赞同：6
> 
> 时间：2012-12-05T18:25:57.637
> 
> 标签：javascript, node.js, scope

我想将 JavaScript .apply 方法用于为 Node.js 编译的节俭的函数。thrift .js 文件的代码如下：

```
...
var NimbusClient = exports.Client = function(output, pClass) {
    this.output = output;
    this.pClass = pClass;
    this.seqid = 0;
    this._reqs = {};
};
NimbusClient.prototype = {};
NimbusClient.prototype.getClusterInfo = function(callback) {
    this.seqid += 1; // line where error is thrown [0]
    this._reqs[this.seqid] = callback;
    this.send_getClusterInfo();
};
... 
```

我的服务器文件如下所示：

```
var thrift = require('thrift')
    , nimbus = require('./Nimbus')
    , connection = thrift.createConnection('127.0.0.1', 6627)
    , client = thrift.createClient(nimbus, connection)
    , ... // server initiation etc

app.get('/nimbus/:command', function(req, res, next) {
    client[req.params.command](console.log); // direct call [1]
    client[req.params.command].apply(this, [console.log]); // apply call [2]
});

... 
```

直接调用 [1] 按预期返回值，但应用调用 [2] 总是在行 [0] 中产生以下错误：

```
TypeError: Cannot set property 'NaN' of undefined 
```

我在 [2] 中尝试了其他几个范围参数：`null`、`nimbus`、`nimbus.Client`、和`nimbus.Client.prototype`，均未成功。`nimbus.Client.prototype[req.params.command]``client[req.params.command]`

如何在不更改被调用函数的实际范围的情况下调用 apply 方法，使其行为与直接调用时完全相同？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-05T18:44:15.580

`apply`像这样将函数指向同一个函数应该保留原始范围。

```
client[req.params.command].apply(client, [console.log]); 
```

# oracle - 在过程中调用函数

> ID：13729925
> 
> 赞同：1
> 
> 时间：2012-12-05T18:26:09.820
> 
> 标签：oracle, oracle10g

对于可能是基本问题，我提前道歉。我是学生，现在是关键时刻！

我正在使用 Oracle 10g Express。

我创建了一个函数：

```
create or replace FUNCTION test_glaccounts_description
(
account_description_param VARCHAR2
) 
RETURN NUMBER
AS
  description_dup_var NUMBER;
BEGIN
  SELECT 1
  INTO description_dup_var
  FROM general_ledger_accounts
  WHERE account_description = account_description_param;

  RETURN description_dup_var;  
  EXCEPTION 
    WHEN NO_DATA_FOUND THEN
    RETURN 0;
END; 
```

并想在程序中使用该功能。我试过了：

```
PROCEDURE insert_gla_with_test
(
  account_number_param  NUMBER,
  account_description_param VARCHAR2
)
 AS
BEGIN 
  IF test_glaccounts_description = 1 THEN
  INSERT INTO  general_ledger_accounts
  VALUES (account_number_param, account_description_param);
  ELSE raise_application_error (-20001, 'Duplicate account description');
  END IF;
END; 
```

但它不喜欢“test_gla_accounts”行.....我做错了什么？据我了解，函数返回值1或0，在程序中，如果函数返回1，我希望将param字段添加到表中。如果函数返回 0，我希望该过程引发错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T18:30:00.807

`test_glaccounts_description`接受一个参数 ( `account_description_param`) 并返回一个`NUMBER`. 因此，为了调用该函数，您需要传入一个参数。假设您要传入`account_description_param`传递给`insert_gla_with_test`过程的

```
CREATE OR REPLACE PROCEDURE insert_gla_with_test
(
  account_number_param  NUMBER,
  account_description_param VARCHAR2
)
 AS
BEGIN 
  IF test_glaccounts_description( account_description_param ) = 1 THEN
    INSERT INTO  general_ledger_accounts
      VALUES (account_number_param, account_description_param);
  ELSE 
    raise_application_error (-20001, 'Duplicate account description');
  END IF;
END; 
```

# c++ - C ++为什么setWindowText不显示任何文本？

> ID：13729928
> 
> 赞同：0
> 
> 时间：2012-12-05T18:26:32.410
> 
> 标签：c++, winapi

我有如下代码，我的问题是为什么在单元格 A[0][0] setWindowText 中什么都不放？

```
if(LOWORD( wParam ) == 104){
    int td;
    int td_width=80;
    int tr = 0;
    int tr_height=20; 

    for (tr=0;tr<2;tr++) {
        for (td=0;td<10;td++) {
            HWND A[tr][td];

            A[tr][td] = CreateWindowEx( 0, "EDIT", NULL, WS_CHILD | WS_VISIBLE | WS_BORDER | ES_MULTILINE | ES_AUTOVSCROLL,
td*td_width, tr*tr_height+50, td_width+1, tr_height+1, hwnd, NULL, hInstance, NULL );
        }
        SetWindowText(A[0][0], "MK" );
    }

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T18:42:10.300

您在最里面的循环中定义 A[tr][td] 。这将其范围限制为该循环。换句话说，在每次迭代中，您都在创建一个全新的数组并只分配其中一个元素。

这甚至可以编译，这有点令人惊讶。我猜您在其他地方定义了*另一个A 数组，这就是您在 SetWindowText 调用中引用的数组。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T19:25:26.717

正如彼得所说，您在错误的位置声明了您的数组。但更重要的是，您还将数组声明为固定长度，但使用运行时值来指定其边界。那是行不通的，甚至不应该编译。固定长度数组的边界必须在编译时知道，而不是在运行时知道。

试试这个：

```
if (LOWORD(wParam) == 104)
{
    const int td_width = 80;
    const int tr_height = 20; 

    HWND A[2][10];

    for (int tr = 0; tr < 2; ++tr)
    {
        for (int td = 0; td < 10; ++td)
        {
            A[tr][td] = CreateWindowEx( 0, TEXT("EDIT"), NULL, WS_CHILD | WS_VISIBLE | WS_BORDER | ES_MULTILINE | ES_AUTOVSCROLL, td*td_width, tr*tr_height+50, td_width+1, tr_height+1, hwnd, NULL, hInstance, NULL );
        }
    }

    SetWindowText(A[0][0], TEXT("MK") );
} 
```

# java - 如何以给定角度旋转多边形

> ID：13729929
> 
> 赞同：1
> 
> 时间：2012-12-05T18:26:34.503
> 
> 标签：java, graphics, affinetransform

我正在创建一个指南针，它绘制在`JPanel`. 我将坐标系的中心平移到`JPanel`. 现在我想将这个点上的针旋转一个给定的角度，这个角度来自程序的另一部分。我试过了`AffineTransform`，但我不明白如何让它正确。当我尝试时，针被画在圆圈外面。

```
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Font;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.Point;
import java.awt.RenderingHints;
import java.awt.Toolkit;
import java.awt.geom.AffineTransform;

import javax.swing.JFrame;
import javax.swing.JPanel;

public class TestFrame extends JFrame {

    public TestFrame() {
        initComponents();
    }

    public void initComponents() {
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setLocation(new Point((int) (Toolkit.getDefaultToolkit().getScreenSize().width / 2) - 400, (int) (Toolkit
                .getDefaultToolkit().getScreenSize().height / 2) - 250));
        setSize(500, 500);
        setVisible(true);

        CompassPanel c = new CompassPanel();
        add(c, BorderLayout.CENTER);

    }

    public class CompassPanel extends JPanel {

        private int circleX, circleY, circleRadius;
        private int[] xPoints, yPoints;

        public CompassPanel() {
            setVisible(true);
        }

        @Override
        public void paint(Graphics g) {
            super.paint(g);
            Graphics2D g2d = (Graphics2D) g;

            AffineTransform a = new AffineTransform();
            a.translate(getWidth() / 2.0, getHeight() / 2.0);
            g2d.transform(a);
            g2d.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);
            circleRadius = (int) (getWidth() * 0.7);
            circleX = (int) (-circleRadius * 0.5);
            circleY = (int) (-circleRadius * 0.5);

            g2d.setColor(Color.BLACK);
            for (int angle = -45; angle <= 315; angle += 5) {
                double sin = Math.sin(Math.toRadians(angle));
                double cos = Math.cos(Math.toRadians(angle));
                int x1 = (int) ((circleX + circleRadius / 2) - cos * (circleRadius * 0.37) - sin
                        * (circleRadius * 0.37));
                int y1 = (int) ((circleY + circleRadius / 2) + sin * (circleRadius * 0.37) - cos
                        * (circleRadius * 0.37));
                g.setColor(Color.BLACK);
                g.drawLine(x1, y1, (circleX + circleRadius / 2), (circleY + circleRadius / 2));
            }

            g2d.setFont(new Font("Arial", Font.BOLD, 11));
            g2d.drawString("WEST", circleX - 40, circleY + circleRadius / 2 + 4);
            g2d.drawString("EAST", circleX + circleRadius + 13, circleY + circleRadius / 2 + 4);
            g2d.drawString("NORTH", circleX + circleRadius / 2 - 14, circleY - 15);
            g2d.drawString("SOUTH", circleX + circleRadius / 2 - 14, circleY + circleRadius + 25);
            g2d.setColor(Color.WHITE);
            g2d.fillOval(circleX, circleY, circleRadius, circleRadius);
            g2d.setColor(Color.BLACK);
            g2d.drawOval(circleX, circleY, circleRadius, circleRadius);

            xPoints = new int[] { (int) (circleX + circleRadius / 2), (int) (circleX + circleRadius * 0.25),
                    (int) (circleX + circleRadius / 2), (int) (circleX + circleRadius * 0.75) };
            yPoints = new int[] { (int) (circleY + 30), (int) (circleY + circleRadius * 0.85),
                    (int) (circleY + circleRadius * 0.6), (int) (circleY + circleRadius * 0.85) };

            g2d.setColor(Color.RED);
            g2d.fillPolygon(xPoints, yPoints, 4);
            g2d.setColor(Color.black);
            g2d.drawPolygon(xPoints, yPoints, 4);

            g2d.setColor(Color.GREEN);
            g2d.fillOval(-3, -3, 6, 6);

        }
    }

    public static void main(String[] args) {
        new TestFrame();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T19:36:30.290

我对您的代码进行了一些修改，并添加了一些旋转功能，但不是完全工作状态，只是为了给您一个提示，它可能是如何工作的。在代码中尝试`angle`从 0 更改为 30 它会起作用，但并不完美祝你好运:)

```
package com.src;

import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Font;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.Point;
import java.awt.Polygon;
import java.awt.RenderingHints;
import java.awt.Toolkit;
import java.awt.geom.AffineTransform;

import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.vecmath.Matrix3d;

public class TestFrame extends JFrame {

    /**
     * 
     */
    private static final long serialVersionUID = 1L;

    public TestFrame() {
        initComponents();
    }

    public void initComponents() {
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setLocation(new Point((int) (Toolkit.getDefaultToolkit().getScreenSize().width / 2) - 400, (int) (Toolkit.getDefaultToolkit().getScreenSize().height / 2) - 250));
        setSize(500, 500);
        setVisible(true);

        CompassPanel c = new CompassPanel();
        add(c, BorderLayout.CENTER);

    }

    public class CompassPanel extends JPanel {

        /**
         * 
         */
        private static final long serialVersionUID = 1L;
        private int circleX, circleY, circleRadius;
        private int[] xPoints, yPoints;

        public CompassPanel() {
            setVisible(true);
        }

        @Override
        public void paint(Graphics g) {
            super.paint(g);
            Graphics2D g2d = (Graphics2D) g;

            AffineTransform a = new AffineTransform();
            a.translate(getWidth() / 2.0, getHeight() / 2.0);
            g2d.transform(a);
            g2d.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);
            circleRadius = (int) (getWidth() * 0.7);
            circleX = (int) (-circleRadius * 0.5);
            circleY = (int) (-circleRadius * 0.5);

            g2d.setColor(Color.BLACK);
            for (int angle = -45; angle <= 315; angle += 5) {
                double sin = Math.sin(Math.toRadians(angle));
                double cos = Math.cos(Math.toRadians(angle));
                int x1 = (int) ((circleX + circleRadius / 2) - cos * (circleRadius * 0.37) - sin * (circleRadius * 0.37));
                int y1 = (int) ((circleY + circleRadius / 2) + sin * (circleRadius * 0.37) - cos * (circleRadius * 0.37));
                g.setColor(Color.BLACK);
                g.drawLine(x1, y1, (circleX + circleRadius / 2), (circleY + circleRadius / 2));
            }

            g2d.setFont(new Font("Arial", Font.BOLD, 11));
            g2d.drawString("WEST", circleX - 40, circleY + circleRadius / 2 + 4);
            g2d.drawString("EAST", circleX + circleRadius + 13, circleY + circleRadius / 2 + 4);
            g2d.drawString("NORTH", circleX + circleRadius / 2 - 14, circleY - 15);
            g2d.drawString("SOUTH", circleX + circleRadius / 2 - 14, circleY + circleRadius + 25);
            g2d.setColor(Color.WHITE);
            g2d.fillOval(circleX, circleY, circleRadius, circleRadius);
            g2d.setColor(Color.BLACK);
            g2d.drawOval(circleX, circleY, circleRadius, circleRadius);

            xPoints = new int[] { (int) (circleX + circleRadius / 2), (int) (circleX + circleRadius * 0.25), (int) (circleX + circleRadius / 2), (int) (circleX + circleRadius * 0.75) };
            yPoints = new int[] { (int) (circleY + 30), (int) (circleY + circleRadius * 0.85), (int) (circleY + circleRadius * 0.6), (int) (circleY + circleRadius * 0.85) };
            int angle =30;
            xPoints = rotateXPoints(xPoints, yPoints, angle);
            yPoints = rotateYPoints(xPoints, yPoints, angle);

            g2d.setColor(Color.RED);
            g2d.fillPolygon(xPoints, yPoints, 4);
            g2d.setColor(Color.black);
            Polygon p = new Polygon(xPoints, yPoints, 4);

            // g2d.drawPolygon(xPoints, yPoints, 4);
            g2d.draw(p);

            g2d.setColor(Color.GREEN);
            g2d.fillOval(-3, -3, 6, 6);

        }
        public int[] rotateXPoints(int[] xPoints,int[] yPoints,int angle) {
            for (int i = 0; i < xPoints.length; i++) {
                Point p = new Point(xPoints[i], yPoints[i]);
                p = rotatePoint(p, new Point(0, 0), angle);
                xPoints[i] = p.x;
            }
            return xPoints;

        }
        public int[] rotateYPoints(int[] xPoints,int[] yPoints,int angle) {
            for (int i = 0; i < yPoints.length; i++) {
                Point p = new Point(xPoints[i], yPoints[i]);
                p = rotatePoint(p, new Point(0, 0), angle);
                yPoints[i] = p.y;
            }
            return yPoints;

        }
        public Point rotatePoint(Point pt, Point center, double angle)
        {
            angle = ((angle/180)*Math.PI);
            double cosAngle = Math.cos(angle);
            double sinAngle = Math.sin(angle);

            pt.x = center.x + (int) ((pt.x-center.x)*cosAngle-(pt.y-center.y)*sinAngle);
            pt.y = center.y + (int) ((pt.x-center.x)*sinAngle+(pt.y-center.y)*cosAngle);
            return pt;
        }
    }

    public static void main(String[] args) {
        new TestFrame();
    }
} 
```

# iphone - UIViewControllers 的 IBOutletCollection

> ID：13729933
> 
> 赞同：0
> 
> 时间：2012-12-05T18:27:11.223
> 
> 标签：iphone, ios, cocoa-touch, uiviewcontroller, interface-builder

我想做类似的事情`UITabBarController`。`UITabBarController`具有我可以在 IB`viewControllers`中添加实例的属性。`UIViewController *`我正在尝试用我自己的 VC 做同样的想法：

```
@property (nonatomic, copy) IBOutletCollection(UIViewController) NSArray *viewControllers; 
```

但这不起作用。对我们来说甚至可能吗？

**编辑 1。**

Ramshad 发布了正确的示例，但使用的是 XIB。我想使用故事板来实现它。

**编辑 2\. - 在赏金结束时...**

我质疑 vaderkvarn 的帖子，因为如果`UITabBarController`它有效。同样正如 Ramshad 发布的那样，在 NIB 中是可能的。到目前为止，dasblinkenlight 的帖子是最正确的，但没有回答问题。我保留这个问题是因为我们将找出它是否对我们有限制或有什么方法。

PS：为什么会有这些反对票？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T14:18:46.293

出口收集方案不起作用的原因是视图控制器不是出口。从[文档](https://developer.apple.com/library/mac/#documentation/General/Conceptual/Devpedia-CocoaApp/Outlet.html)中：

> 出口是用符号 IBOutlet 注释的属性，您可以在 nib 文件或情节提要中以图形方式设置其值。

视图控制器不是图形对象。

如果你想使用 IBOutletCollection，你应该只使用一个视图控制器，并将视图放入集合中。

但是，如果您希望每个视图都使用一个控制器，则需要采用更加程序化的方法。带有视图控制器的数组可能是一个好的开始，但我不能说，因为我不知道你想用它们做什么。

**编辑：**

为了更清楚，因为你似乎没有明白我的意思：

不，它不一定是一种方式。Storyboard 不是 API，它是用于绘制场景和转场的图形工具。它专为基于标签栏的应用程序而设计。

如果您右键单击 Storyboard 文件并选择*open as -> Source Code*，您将看到 Tab Bar Controller 具有其他 View Controller 所没有的特殊元素。在 Storyboard 文件中弄乱 XML 超出了我的范围。

如果您想使用 Nib 文件，请使用 Ramshads 答案。

如果您想尽可能接近故事板，请使用 dasblinkenlights 答案。

但是你的问题的答案（据我所知）是否定的，没有办法用故事板来完成这个。如果是，它会被记录在案，但事实并非如此。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T17:17:27.260

尽管看起来您不能将`UIViewController`s 连接到`IBOutletCollection`s（或者使用它们时有太多限制），但是当您使用情节提要时，有一个简单的解决方案可以工作。此代码进入您的`viewDidLoad`方法：

```
_viewControllers = [NSArray arrayWithObjects: 
,   [self.storyboard instantiateViewControllerWithIdentifier:@"Controller1"]
,   [self.storyboard instantiateViewControllerWithIdentifier:@"Controller2"]
,   [self.storyboard instantiateViewControllerWithIdentifier:@"Controller3"]
,   nil]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-10T10:03:49.470

我已经使用 **`UISegmentedControl + IBOutletCollection + presentViewController`**.

您可以使用任何控件代替**`UISegmentedControl`**您的意愿。

我添加了 3 个不同**`UIViewControllers`**并**`Xib`**标记为**`ViewController1,2,3.`**

我还添加了 2 个额外的方法。一个用于呈现相应的视图，另一个用于关闭先前填充的视图。

我附上了**`Xib`**下面的设置屏幕截图。

您可以只使用一个**`UIViewController`**而不是 3 个，并通过一些逻辑重用它:)

**方法如下：**

```
@property (strong, nonatomic) IBOutletCollection(UIViewController) NSArray *ViewCollection;

//dismissing the earlier populated view
- (IBAction)dismiss:(id)sender {

    [self dismissViewControllerAnimated:YES completion:nil];
}

//presenting the corresponding view.
- (IBAction)resetAction:(id)sender {      

    UISegmentedControl *mySegment = (UISegmentedControl *)sender;

    int index = 0;          
    for (UIViewController *viewItem in _ViewCollection) {

        if (index == mySegment.selectedSegmentIndex) {

            [self presentViewController:viewItem animated:YES completion:nil];
        }
        index++;
    }
} 
```

[**您可以从这里**](http://www.filedropper.com/iboutletcollection)下载我的示例应用程序[](http://www.filedropper.com/iboutletcollection)

 ****Xib 设置截图**

![在此处输入图像描述](../Images/05f0263d47feadbfab725c821befd0a9.png)**

# python - 海龟图形不是从函数中绘制的

> ID：13729935
> 
> 赞同：0
> 
> 时间：2012-12-05T18:27:19.737
> 
> 标签：python, function, python-3.x, turtle-graphics

使用下面的函数，输入在空间上分割（即向前 20），turtle 将执行颜色和写入函数，但使用 forward、back、right 或 left 什么都不做，只会打开一个空白的海龟窗口

这是我的函数和代码的精简版本，用于前进和后退命令：

```
import sys
import turtle

def parse_line(line):
    global items_in_line
    items_in_line = line.split(" ",1)
    if items_in_line[0] == "forward":
        if isinstance(items_in_line[1], int):
                return items_in_line
    elif items_in_line[0] == ("back" or "backward"):
        if isinstance(items_in_line[1], int):
            return items_in_line
    return items_in_line

def comm(items_in_line):
    m = items_in_line[1]
    if items_in_line[0] == "forward":
        if isinstance(m,int) == True:
            turtle.forward(m)
    if items_in_line[0] == ("backward" or"back"):
        if isinstance(m,int) == True:
            turtle.back(m)

line=input("Enter a turtle command or enter 'file' to load commands from a file")

x = parse_line(line)

y=comm(items_in_line) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T18:31:49.863

列表中的元素永远不会是`int`; 如果您希望它们成为`int`s 那么您需要将它们传递给`int()`构造函数，以捕获发生的任何异常。

```
>>> '3'
'3'
>>> int('3')
3 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T18:41:30.447

这里有两个问题：

```
elif items_in_line[0] == ("back" or "backward"): 
```

这意味着`"backward"`永远不会奏效。尝试在交互式窗口中输入：

```
>>> ("back" or "backward")
'back' 
```

因此，检查某事物是否等于`("back" or "backward")`与检查它是否等于 相同`"back"`。

你要这个：

```
elif items_in_line[0] in ("back", "backward"): 
```

或者，如果你坚持，这个：

```
elif items_in_line[0] == "back" or items_in_line[0] == "backward": 
```

然后，还有另一个问题：

```
if isinstance(m,int) == True:
    turtle.forward(m) 
```

因为`items_in_line`是`split`调用的结果，所以每个元素都必须是一个字符串，所以它不可能是一个`int`. （另外，你不应该`== True`在 Python 中这样做，除非你特别想与`True`其他真值区分开来。）

你可能想要的是这样的：

```
try:
    amount_to_move = int(m)
except ValueError as e:
    print(<some message about the error>)
else:
    turtle.forward(amount_to_move) 
```

您的代码的结构方式，您在函数的两个分支中进行相同的检查，最好将其向上移动，所以：

```
def comm(items_in_line):
    try:
        m = int(items_in_line[1])
    except ValueError:
        print(<some message>)
        return
    if items_in_line[0] == "forward":
        turtle.forward(m)
    if items_in_line[0] in ("backward", "back"):
        turtle.back(m) 
```

或者你甚至不需要这里的`try`/ `except`，因为你可以在更高的层次上处理它——毕竟，如果`items_in_line`只有 1 个元素，它会引发一个`IndexError`你没有捕捉到的元素，所以为什么不`"forward foo"`以同样的方式处理你对待`"forward"`并让它涓涓细流到调用者？

```
def comm(items_in_line):
    m = int(items_in_line[1])
    if items_in_line[0] == "forward":
        turtle.forward(m)
    if items_in_line[0] in("backward", "back"):
        turtle.back(m) 
```

# javascript - Ajax+eval 比脚本标签更有害？

> ID：13729941
> 
> 赞同：0
> 
> 时间：2012-12-05T18:27:43.443
> 
> 标签：javascript, eval

我正在构建一个应用程序，我可以在其中加载脚本：

```
var newScript=document.createElement("script");
newScript.src="script.js";
document.head.appendChild(newScript); 
```

这些脚本在同一个域中，因此我考虑使用 ajax+eval 而不是使用脚本标记，因为它给了我更多的灵活性（特别是与其他脚本同步）。两个选项是等效的，还是在使用 eval 时有任何额外的风险？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T18:48:01.650

唯一合法用途之一`eval`是当您的 AJAX 调用返回 JavaScript 时。虽然这确实提供了额外的灵活性。我不确定您的特定应用程序，但这些是主要问题：

*   用户可以通过 AJAX 发送他们想要的任何数据。确保您的服务器端代码是干净的。
*   AJAXing 脚本意味着浏览器无法缓存它们。这将导致较慢的用户体验。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T18:57:57.873

就风险而言，两者是等价的。

两种方法都盲目地执行下载的脚本（不检查）。唯一的区别是您不能使用 ajax 从其他域执行脚本。

另一方面，通过在评估之前将脚本下载为文本，您有机会对其进行一些文本处理，例如检查已知的恶意攻击、对其进行 linting 等。因此，理论上，您可以构建一个安全的和/或使用 ajax+eval 限制执行环境。但是弄清楚什么是恶意的，什么是良性的并不容易。

# r - gtable结构元素说明

> ID：13729944
> 
> 赞同：5
> 
> 时间：2012-12-05T18:27:46.087
> 
> 标签：r, ggplot2, gtable

如果我创建一个 gtable 并查看一些元素，我会看到例如：

```
test<-data.frame(x=1:20, y=21:40, facet.a=rep(c(1,2),10), facet.b=rep(c(1,2), each=20))
p <- qplot(data=test, x=x, y=y, facets=facet.b~facet.a)
# get gtable object
z <- ggplot_gtable(ggplot_build(p))
> names(z)

[1] "grobs"    "layout"   "widths"   "heights"  "respect"  "colnames" "name"    
[8] "gp"       "vp"  
    > z$widths
[1] 0.5lines            1grobwidth+0.5lines 0.620416666666666cm
[4] 1null               0.25lines           1null              
[7] 0.545041666666667cm 1lines 
```

是否有任何详细文档说明这些元素的值相对于创建的绘图意味着什么？gtable 文档只记录了创建和修改 gtables 的功能。数据来自 7 月 5 日发布的帖子。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-06-21T19:51:04.233

[此 wiki 页面](https://github.com/baptiste/gtable/wiki/Description)中描述了一些组件。基本上，

*   grobs：与 gtable 关联的图形元素列表，并在布局定义的单元格中绘制

*   布局：data.frame 描述每个 grob 在表格布局中的位置

*   宽度，高度：行和列的大小

*   方面：参数，指示尺寸是否链接（固定纵横比）

*   colnames, name：用于标识行/列

*   gp：全局网格参数集，grobs 可以从中继承

*   vp：视口定义在设备上绘制 gtable 的位置

# scala - Scala Stream Off By One

> ID：13729945
> 
> 赞同：1
> 
> 时间：2012-12-05T18:27:46.277
> 
> 标签：scala, map, stream

有人可以解释一下 REPL 的以下输出吗？

我正在定义 2 个（无限）流，它们在其他方面的定义相同，除了*map*前面是*.* （句点）在一个定义中，而 _ _（空格）在另一个定义中。

我可以看到这会导致*map*以不同的方式绑定，但是第二个定义的输出中的*1会发生什么？*

谢谢。

```
scala> lazy val infinite: Stream[Int] = 1 #:: infinite.map(_+1)
infinite: Stream[Int] = <lazy>

scala> val l = infinite.take(10).toList.mkString(",")
l: String = 1,2,3,4,5,6,7,8,9,10

scala> lazy val infinite2: Stream[Int] = 1 #:: infinite2 map(_+1)
infinite2: Stream[Int] = <lazy>

scala> val l2 = infinite2.take(10).toList.mkString(",")
l2: String = 2,3,4,5,6,7,8,9,10,11 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-05T18:31:34.720

这是关于[方法关联性](https://stackoverflow.com/questions/1162924)的。这：

```
1 #:: infinite.map(_+1) 
```

很简单，而这：

```
1 #:: infinite2 map(_+1) 
```

编译器将其解释为：

```
(1 #:: infinite2) map(_+1) 
```

`1 #:: infinite2`是您想要的流，但在您返回它之前，您应用惰性转换为每个项目添加一个。这就解释了为什么`1`从来没有作为结果出现——在转换之后它变成了`2`。

有关更多详细信息，请参阅：[Scala 中的运算符优先级](https://stackoverflow.com/questions/2922347)。由于`#`不是特殊字符，因此与 同等对待`map`，因此方法从左到右进行评估。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T18:39:17.880

在infinite2 的情况下，您所表达的内容等同于以下内容：

```
lazy val infinite2: Stream[Int] = (1 #:: infinite2) map(_ + 1) 
```

由于流以 1 开头，因此 map 会将 1 添加到第一个元素。

# dll - 使用 Open Watcom for Win32 控制台应用程序编译和链接 libxml2

> ID：13729948
> 
> 赞同：1
> 
> 时间：2012-12-05T18:27:52.403
> 
> 标签：dll, libxml2, watcom

我们有一个用 C 语言编写并使用 Open Watcom 编译的 Windows 32 位控制台应用程序。我们想在我们的应用程序中使用 libxml2 库。我们找到了 Win32 DLL 二进制文件，我们可以使用 Watcom 编译器将它们与我们的应用程序代码链接吗？

# c# - 索引一小部分值的正确方法

> ID：13729954
> 
> 赞同：3
> 
> 时间：2012-12-05T18:28:24.507
> 
> 标签：c#

在将 id 传递给方法的情况下，执行以下操作的最佳方法是什么。案例陈述可以还是像哈希表这样的某种集合更好？

```
private string GetCurrencySymbol(string code)
    {
        switch (code)
        {
            case "USD":
            case "AUD":
            case "CAD":
            case "NAD":
            case "NZD":
            case "SGD":
            case "HKD":
                return "$";
            case "GBP":
                return "£";
            case "NOK":
            case "DKK":
            case "SEK":
                return "kr";
            case "ZAR":
                return "R";
            case "JPY":
                return "¥";
            case "CHF":
                return "CHF";
            case "EUR":
                return "€";
            case "GHS":
                return "¢";
            case "BWP":
                return "P";
            case "INR":
                return "₹";
            case "KES":
                return "KSh";
            case "LSL":
                return "L";
            case "MUR":
                return "Rs";
            case "NGN":
                return "₦";
            case "MWK":
                return "MK";
            case "MZM":
                return "MT";
            case "PKR":
                return "Rs";
            case "PLN":
                return "zł";
            case "SZL":
                return "L";
            case "TZS":
                return "Sh";
            case "UGX":
                return "Sh";
            case "ZMK":
                return "ZK";
            default:
                return "";
        }
    } 
```

这个好像有点味道？它并不经常访问，但似乎有点冗长。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T18:32:06.830

声明最终将`switch`被翻译成`Dictionary`最终。对于更复杂的示例（例如这个），直接进入该示例通常是有意义的。

```
Dictionary<string, string> currencyLookup = new Dictionary<string, string>();
currencyLookup["USD"] = "$";
//...

string currency = currencyLookup["INR"]; 
```

使用字典的一些优点：

1.  如果您想将所有选项定义为文字，它可能需要更少的代码。（特别是如果使用集合初始化器。）
2.  您可以根据文件、数据库或其他外部源中的信息填充字典，这样您*就*无需在代码中定义所有映射。除了使代码更简洁之外，这还允许您添加/删除/更改货币，而无需重新编译您的程序。
3.  您可以访问诸如`ContainsKey`了解特定键是否存在的操作，而不是在未找到时仅返回空字符串（您仍然可以这样做）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T18:31:03.850

案例陈述在您的情况下是完美的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T18:31:06.880

你可以使用一个

```
Dictionary<String, char> 
```

但是您仍然需要设置看起来相似的映射。

如果这一系列的键/值永远不会改变，那么使用你在那里的 case 语句没有任何问题。如果偶尔从其他类访问它，请将其粘贴在某个静态实用程序类中。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-05T18:31:30.653

除非您想要动态查找，否则 a`switch`通常至少会击败 a `Dictionary`（因为编译器会生成 a`Dictionary`如果它认为它会更高效）

然而，最重要的指标是可用性，你认为代码在当前格式下是否可读？

或者作为旁注，您是否可以使用其他人的全球化方法为您完成这项特定的繁重工作？

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-05T18:31:44.730

字典类更好。你可以把它放在助手中。但是，由于它不经常使用，因此开关还不错。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-12-05T18:33:12.420

除非您希望用户能够配置货币（在这种情况下，我建议使用-class） ，否则对于这样的简单应用程序，使用`List<>`or将是完全过大的。`Dictionary<,>``Dictionary<,>`

即使看起来很粗糙，您的开关柜也可以很好地完成像这样的简单功能。

# ios - IOS：uilabel 言而无信

> ID：13729957
> 
> 赞同：0
> 
> 时间：2012-12-05T18:28:48.343
> 
> 标签：ios, uilabel

我的标签有问题，我不明白解决方案在哪里。我用“自动换行”和 3 行设置了我的标签，但是当文本换行时它会剪掉一个单词……为什么？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T23:41:27.253

可能界限太小了？尽可能多地拉伸 UILabel（高度方向），将行设置为 999 并查看它是否仍然切割它。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-05T18:59:37.580

**编辑**：不知何故，这仍然得到意见。较新版本的 iOS 不再存在与 UILabel 一样多的问题，因此不再适用。（尤其是自动布局）

在尝试使用多行 UILabel 时，这是一个非常常见的问题。如果您想要多行文本，简短的回答是使用 UITextField。作为奖励，您可以更好地控制文本周围的填充。

（是的，您可以“修复” UILabel，但有时更简单的解决方案会更好）

# directory - 记住用户选择的文件夹并在 Sandbox 下通过 NSOpenPanel 重新打开它

> ID：13729958
> 
> 赞同：1
> 
> 时间：2012-12-05T18:28:48.367
> 
> 标签：directory, sandbox, nsopenpanel

Apple 审查要求我的应用记住用户上次选择的文件夹。但我无法在沙盒下制作它。-setDirectoryURL 似乎在沙盒下不起作用。我该怎么办？感谢您的帮助！

```
// read string saveFolder from NSUserDefaults
NSOpenPanel * myPanel = [NSOpenPanel openPanel];
[myPanel setTitle:@"Select Output Folder"];
[myPanel setCanChooseDirectories:YES];
[myPanel setCanCreateDirectories:YES];
[myPanel setAllowsMultipleSelection:NO];
[myPanel setCanChooseFiles:NO];

NSLog(@"before openpanel:folder=%@",saveFolder); // <== return normal
[myPanel setDirectoryURL:[NSURL URLWithString:saveFolder.stringValue]];
NSLog(@"readback:folder=%@",[[myPanel URL] path]); // <== return nil here

if ([myPanel runModal] == NSOKButton)
{
    //  
    saveFolder = [[myPanel URL] path]];
    // then save the saveFolder string to NSUserDefaults
    //
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T23:09:22.540

看来我们应该添加并使用此权利：

com.apple.security.files.bookmarks.app-scope

保存网址：

```
NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
NSError *error = nil;
NSData *bookmarkData = [[myPanel URL] bookmarkDataWithOptions:NSURLBookmarkCreationWithSecurityScope includingResourceValuesForKeys:nil relativeToURL:nil error:&error];
if (!error)
{
    [defaults setObject:bookmarkData forKey:@"iData"];
    [defaults synchronize];
} 
```

回过头再读：

```
NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
bookmarkFileURL = nil;
NSData *bookmarkData = [defaults objectForKey:@"iData"];
if (bookmarkData != nil)
{
    NSError *error=nil;
    bookmarkFileURL = [NSURL URLByResolvingBookmarkData:bookmarkData options:NSURLBookmarkResolutionWithSecurityScope relativeToURL:nil bookmarkDataIsStale:nil error:&error];
    if (error != nil) bookmarkFileURL = nil;
}
if (bookmarkFileURL)
{
    [bookmarkFileURL startAccessingSecurityScopedResource];
}
//
//
[bookmarkFileURL stopAccessingSecurityScopedResource]; 
```

# twitter-bootstrap - 无法使用 twitter bootstrap 在同一页面中插入 2 个日历元素

> ID：13729960
> 
> 赞同：1
> 
> 时间：2012-12-05T18:28:55.303
> 
> 标签：twitter-bootstrap

我正在使用 Bootstrap v2.1.1，我无法在同一页面 ( `<input type="text" class="span8" id="dp1" />`) 上插入两个 datepicker 对象。第一个对象有效，但第二个无效....日历对象也发生过这种情况...

关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T18:42:08.717

你需要有两个不同`id=""`的 s。这样，日历 UI 将知道将自己附加到哪个字段

# sql - sql server强制没有关系的约束

> ID：13729963
> 
> 赞同：2
> 
> 时间：2012-12-05T18:29:06.967
> 
> 标签：sql, sql-server, foreign-keys, relational-database

我想基于[这个模型](http://img23.imageshack.us/img23/5489/querylan.png)实现一个简单的翻译。我知道有几种方法可以做到这一点，但我想保持简单。

我的问题是关于约束...显然我无法创建 FK 关系，因为我只会在订单表中保存 PN 值，并且产品 PK 是复合的（id + 语言）

为了保持某种完整性（级联删除或避免删除使用过的产品）我该怎么办？我正在考虑我的应用程序代码中的触发器和/或业务逻辑规则。

想给点意见，谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T18:43:53.723

模型在关系方面没有意义，你必须规范化才能接近例如

产品（ProductID(K)、描述）

ProductVersions(ProductVersionID (K),ProductID (FK), Language,(FK?)) 在 ProductID 和 Language 上具有唯一的复合键。

他们到底在订购什么产品或产品/语言？

# php - 使用 MYSQL 在同一部电影中插入多个演员

> ID：13729964
> 
> 赞同：5
> 
> 时间：2012-12-05T18:29:06.957
> 
> 标签：php, mysql, sql

伙计们，我不知道怎么问这个问题，我刚开始学习 PHP 和 Mysql，我在做一些我认为很容易的事情时遇到了很多麻烦。

可以说我在 Mysql Actors 和 Movies 中有两个表。

演员有 ID 和 NAME，电影也有相同的 ID 和 NAME。

在这个例子中，假设我们的演员是 1 Brad Pitt、2 Edward Norton 和 3 Jack Nicholson

电影是 1 Fight Club 和 2 Ocean's 13。

布拉德皮特和爱德华诺顿在搏击俱乐部，布拉德皮特在海洋十三号，杰克尼科尔森不在这些电影中。

如何将演员链接到 Mysql 数据库中的电影，以及如何使用 PHP 显示它们。

我真的很感谢任何帮助，我真的迷失了这个！感谢关注！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T18:32:10.877

### You can use `JOINS` for this.

In a brief intro, lets have another table, `relations`. In that, the movies and the actors are related. The `PRIMARY KEY` will be the combination of the both `ID`s.

```
Actors Table
+----+----------------+
| ID |           NAME |
+----+----------------+
|  1 |      Brad Pitt |
|  2 |  Edward Norton |
|  3 | Jack Nicholson |
+----+----------------+

Movies Table
+----+--------------------+
| ID |               NAME |
+----+--------------------+
|  1 |         Fight Club |
|  2 | Ocean''s Thirteen. |
+----+--------------------+ 
```

Now we can have a relationship table with these two IDs.

```
+-------+-------+
| MOVIE | ACTOR |
+-------+-------+
|     1 |     1 |
|     1 |     2 |
|     2 |     1 |
+-------+-------+ 
```

This way, Movie 1 will have both actors 1 and 2.

### SQL Queries

```
CREATE TABLE Actors (`id` int, `name` varchar(255));

INSERT INTO Actors (`id`, `name`) VALUES
(1, 'Brad Pitt'),
(2, 'Edward Norton'),
(3, 'Jack Nicholson');

CREATE TABLE Movies (`id` int, `name` varchar(255));

INSERT INTO Movies (`id`, `name`) VALUES
(1, 'Fight Club'),
(2, 'Ocean''''s Thirteen.');

CREATE TABLE stars (`movie` int, `actor` int);

INSERT INTO RelationShip (`movie`, `actor`) VALUES
(1, 1),
(1, 2),
(2, 1); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T18:35:42.133

在这种情况下，你有一个多对多的关系，这意味着，一个演员可能在很多电影中，而一部电影可能有很多演员。

在这种情况下，您要做的是生成一个中间表，比如说“MOVIE_ACTOR”，它应该有 2 列 MOVIE_ID 和 ACTOR_ID

这是一个很好的起点

因此，例如，您想知道某个演员的所有电影，您可以进行如下查询：

```
SELECT movies.name FROM movie_actor LEFT JOIN movies ON movie_actor.movie_id = movies.id
WHERE movie_actor.actor_id = (SELECT id FROM actors WHERE name = 'brad pitt') 
```

这里是你如何创建表 CREATE TABLE MOVIE_ACTOR ( `movie_id`int, `actor_id`int);

```
INSERT INTO MOVIE_ACTOR (`movie`, `actor`) VALUES
(1, 1),
(1, 2),
(2, 1),
(2, 2); 
```

祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T18:33:08.693

你需要一个连接表，`ActorMovieMatch`

该表将有两个字段`ActorID`和`MovieID`，它们是其他表中主键 ID 的外键。

更新数据库时，您将独立于其他表更新此表。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T18:33:14.200

首先，您需要设置表结构。这是一个可能对你有用的。为了便于阅读，我以图表的形式提供它们；您必须为所有这些创建 MySQL 语句。

首先，您的表格类型：

```
Movie = ID,Title
Actor = ID,FirstName,LastName
StarredIn = ActorID,MovieID 
```

接下来是表的值：

```
Movie
------------------
1|Fight Club
2|Ocean's Thirteen

Actor
-------------------
1|Brad|Pitt
2|Edward|Norton
3|Jack|Nicholson

StarredIn
---------
1|1
2|1 
```

请注意您如何简单地插入在 StarredIn 中连接的实体的 ID。这是关系系统的核心和灵魂。跨表分布的数据，通过 ID 连接。这使您可以根据需要多次放置任何演员。它还可以保护您免受诸如名称更改之类的事情的影响，如果有一天 Bradd Pitt 决定要更改他的名字，该 ID 仍然指向同一个实体（您只需修改演员表）。

此外，虽然不是必需的，但您希望主键确保您不添加任何重复项。我推荐电影和演员的 ID 主键和 StarredIn 的复合主键 (ActorID,MovieID)。

至于PHP部分；我建议阅读 mysqli 或 PDO，因为它们会告诉您如何将 PHP 连接到 MySQL。以下是一些帮助您入门的链接：

Mysqli：[http ://php.net/manual/en/book.mysqli.php](http://php.net/manual/en/book.mysqli.php)

PDO： http: [//php.net/manual/en/book.pdo.php](http://php.net/manual/en/book.pdo.php)

# python-2.7 - 抓取所需的表格和数据有什么问题？

> ID：13729969
> 
> 赞同：1
> 
> 时间：2012-12-05T18:29:26.650
> 
> 标签：python-2.7, web-scraping, beautifulsoup

[我正在尝试从http://www.scoresandodds.com/grid_20111225.html](http://www.scoresandodds.com/grid_20111225.html)的表格中获取迈阿密热火队及其对手的数据。我遇到的问题是 NBA 和 NFL 以及其他运动的表格都标记相同，我得到的所有数据都来自 NFL 表格。另一个问题是我想抓取整个赛季的数据以及不同表格的数量变化以及迈阿密在表格中的位置变化。到目前为止，这是我用于不同表格的代码；

那么为什么这没有完成工作呢？谢谢你的耐心；我是一个真正的初学者，我已经尝试解决这个问题几天了，但没有效果。

```
def tableSnO(htmlSnO):
gameSections = soup.findAll('div', 'gameSection')
for gameSection in gameSections:
    header = gameSection.find('div', 'header')
    if header.get('id') == 'nba':
        rows = gameSections.findAll('tr')
        def parse_string(el):
            text = ''.join(el.findAll(text=True))
            return text.strip()
        for row in rows:
            data = map(parse_string, row.findAll('td'))
            return data 
```

最近我决定尝试一种不同的方法。如果我抓取整个页面并获取相关数据的索引（这是它停止的地方：）我可以从列表中获取下一组数据，因为表的结构永远不会改变。我也可以像获得 htmlSnO 一样获得对手的球队名称。感觉这是如此基本的东西，它让我无法做到正确。

```
def tableSnO(htmlSnO):
oddslist = soupSnO.find('table', {"width" : "100%", "cellspacing" : "0", "cellpadding" : "0"})
rows = oddslist.findAll('tr',)
def parse_string(el):
    text = ''.join(el.findAll(text=True))
    return text.strip()
for row in rows:
    data = map(parse_string, row.findAll('td'))

    for teamName in data:
        if re.match("(.*)MIAMI HEAT(.*)", teamName):
            return teamName
            return data.index(teamName) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T18:36:30.223

## 带有工作代码的新的和最终的答案：

你想要的页面部分有这个：

```
<div class="gameSection">
    <div class="header" id="nba"> 
```

这应该可以让你进入 NBA 表：

```
def tableSnO(htmlSnO):
    gameSections = soup.findAll('div', 'gameSection')
    for gameSection in gameSections:
        header = gameSection.find('div', 'header')
        if header.get('id') == 'nba':
            # process this gameSection
            print gameSection.prettify() 
```

作为一个完整的例子，这是我用来测试的完整代码：

```
import sys
import urllib2
from bs4 import BeautifulSoup

f = urllib2.urlopen('http://www.scoresandodds.com/grid_20111225.html')
html = f.read()
soup = BeautifulSoup(html)

gameSections = soup.findAll('div', 'gameSection')
for gameSection in gameSections:
    header = gameSection.find('div', 'header')
    if header.get('id') == 'nba':
        table = gameSection.find('table', 'data')
        print table.prettify() 
```

这将打印 NBA 数据表。

# c# - 在调度之前更改 Quartz.NET 作业或触发器的名称

> ID：13729971
> 
> 赞同：0
> 
> 时间：2012-12-05T18:29:29.780
> 
> 标签：c#, scheduled-tasks, quartz.net

这可能是一个简单的问题，但我对使用 Quartz.NET 还是很陌生，但是如何在调度之前更改作业或触发器的名称？我基本上是在支持类中制作模板作业，然后在处理调度的主程序中使用它。

由于我需要每个作业/触发器的唯一名称，因此当我将模板作业的名称（例如“SomeJob”）复制到主程序进行调度时，我基本上会将其命名为“SomeJob01”。

这看起来很简单，但是当我搜索时，我发现的只是人们说您在安排工作后无法更改工作详细信息，我正在更改名称以便安排他们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T01:38:47.613

在 Quartz 中，作业与其调度触发器是分开的。您可以添加具有多个触发器的相同作业。

我不完全确定我理解你在做什么，但是要将它添加到 Quartz，你可以这样做：

```
private const string DEFAULT_GROUP = "MyDefaultGroup";

Trigger trigger = TriggerUtils.MakeHourlyTrigger();

JobDetail jobDetail = new JobDetail("YourUniqueJobName", DEFAULT_GROUP, typeof(YourJobClass));

// now add the job to Quartz
scheduler.ScheduleJob(jobDetail, trigger); 
```

通过这种方式，您可以添加具有唯一名称的新作业并为其分配新触发器，也可以将新触发器分配给现有作业。

但一般来说，要修改 Quartz 中的某些内容，您必须删除它，更改您的对象，然后重新添加它。

以下是作业/触发器的概述：http: [//quartznet.sourceforge.net/tutorial/lesson_2.html](http://quartznet.sourceforge.net/tutorial/lesson_2.html)

以下是有关触发器如何工作的更多信息：http: [//quartznet.sourceforge.net/tutorial/lesson_4.html](http://quartznet.sourceforge.net/tutorial/lesson_4.html)

以下是有关工作如何工作的更多信息：http: [//quartznet.sourceforge.net/tutorial/lesson_3.html](http://quartznet.sourceforge.net/tutorial/lesson_3.html)

# java - Snowball search_analyzer 不适用于 multi_match 查询

> ID：13729973
> 
> 赞同：1
> 
> 时间：2012-12-05T18:29:35.350
> 
> 标签：java, scala, elasticsearch

我正在尝试使用雪球分析器对索引进行查询。它似乎无法正常工作。如果我输入“starbucks”，它将返回 0 个结果，但是如果我输入“starbuck”，它会返回名称中带有“Starbucks”的所有数据。

我知道在进行正常搜索时，您必须明确指定该字段才能使用 search_analyzer。

_mapping 说我使用的是雪球 index_analyzer 但没有提到雪球 search_analyzer，这很奇怪吗？

映射片段：

```
name: {
            type: "string",
            search_analyzer : "snowball", 
            index_analyzer : "snowball",
            boost : 1
      },
tags: {
            type: "string",
            search_analyzer : "snowball", 
            index_analyzer : "snowball",
            boost : 4
      } 
```

来自 /businesses/business/_mapping 的片段

```
name: {type: "string",analyzer: "snowball"},
tags: {type: "string",boost: 4,analyzer: "snowball"} 
```

用于搜索的 Java 代码：

```
val response = client.prepareSearch("businesses")
        .setSearchType(SearchType.DFS_QUERY_THEN_FETCH)
        .setQuery(termQuery("name", term))
        .setFrom(0).setSize(100).setExplain(true)
        .execute()
        .actionGet(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T00:33:30.803

中指定的术语`termQuery`未按原样分析和使用。由于该单词`Starbucks`被索引为术语`starbuck`，因此您可以获得一些结果。当您搜索该`Starbucks`术语时，索引中没有此类术语，并且您没有得到任何结果。我建议改用`text`查询，它将对您的术语进行分析。

```
val response = client.prepareSearch("businesses")
    .setSearchType(SearchType.DFS_QUERY_THEN_FETCH)
    .setQuery(text("name", term))
    .setFrom(0).setSize(100).setExplain(true)
    .execute()
    .actionGet(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T15:50:01.800

我还通过执行 multi_match 查询来解决它。这似乎已经正确地执行了搜索分析器。

```
val customQuery = customScoreQuery(
        filteredQuery(
            multiMatchQuery("Gamestop".toLowerCase())
                .field("tags")
                .field("name"), 
            geoDistanceFilter("location")
            .point(40.76405282025, -73.972994269042)
            .distance(10, DistanceUnit.KILOMETERS)
        )
     )
     .script("customscript")
     .lang("native")
     .param("lat",40.76405282025)
     .param("lon",-73.972994269042)

    val response = client.prepareSearch("businesses")
        .setSearchType(SearchType.QUERY_AND_FETCH)
        .setQuery(customQuery)
        .setFrom(0).setSize(100).setExplain(true)
        .execute()
        .actionGet(); 
```

这也是使用地理距离过滤器将自定义分数查询与过滤后的多匹配查询相结合的一个很好的例子。

# ios - iOS 继承问题 - 未能通过子类化来扩展类

> ID：13729983
> 
> 赞同：1
> 
> 时间：2012-12-05T18:30:06.657
> 
> 标签：ios, xcode, oop

我创建了一个类 Queue 和一个子类 QueueNumbers。

当我尝试初始化 QueueNumbers 时，一切都按预期工作。

```
QueueNumbers *queue = [[QueueNumbers alloc]init]; 
```

但是当我尝试调用两者的特定方法时：

*   在 .h 文件中定义
*   在 .m 文件中实现

queueNumbers 实例无法找到它们并尝试在 Queue 基类中找到它们。

队列.h

```
@interface Queue : NSObject{
    NSMutableArray *items;
    int maxSize;
}

-(id)init;
-(void)addItems:(id)_item; 
```

队列编号.h

```
@interface QueueNumbers : Queue
-(void)addNumbers:(int)_num;
@end 
```

当我尝试调用 addNumbers: of QueueNumbers 时，它找不到该方法。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T20:31:38.180

它应该工作。

唯一不匹配的原因是方法签名不匹配。这包括参数。如果它不是一个`int`（例如，如果你通过一个`NSNumber`例子），那么它就行不通了。

我看不出您是如何调用该方法的，但很可能就是问题所在。

# ravendb - RavenDB 轮询的替代方案（推送通知）

> ID：13729985
> 
> 赞同：2
> 
> 时间：2012-12-05T18:30:13.703
> 
> 标签：ravendb

我有一个使用 RavenDB 的应用程序。它有一个 WPF 前端 GUI 应用程序。我希望通知该应用程序某些类型的新文档。例如，如果我的应用加载了最新的 50 个 Foo 以供显示，而其他人稍后又添加了 10 个 Foo，我希望应用了解这些新的 10 个并更新 UI。

我可以每隔几秒钟轮询一次数据库以检查新文档，但如果有来自 RavenDB 的实时双向回调通知，那就太好了。这个功能存在吗？

我的搜索以走私者和听众结束，但我不知道两者都是为此目的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T19:10:22.303

[RavenDB V2 将支持推送通知](http://ayende.com/blog/160129/what-is-up-with-ravendb-2-0)：

```
store.Changes()
    .ForDocument("users/1")
    .Subscribe(notification => {
        using(var session = store.OpenSession())
        {
            var user = session.Load<User>(notification.Name);
            Console.WriteLine("Wow! " + notification.Name + " changed. New name: " + user.Name);
        }
    }); 
```

# machine-learning - 将验证集与交叉验证方法一起使用是否有意义？

> ID：13729986
> 
> 赞同：0
> 
> 时间：2012-12-05T18:30:16.333
> 
> 标签：machine-learning, neural-network, weka

我想使用具有约 200 个样本和 6 个属性的 Weka 训练 MultiLayerPerceptron。我正在考虑分成火车和测试，在火车上，指定一定百分比的火车作为验证集。但后来我考虑使用折叠交叉验证来更好地利用我的样本集。

我的问题是：在进行交叉验证方法时指定验证集是否有意义？

而且，考虑到样本的大小，你能建议我为这两种方法提供一些数字吗？（例如，2/3 用于训练，1/3 测试和 20% 验证......而对于 CV：10 倍、2 倍或 LOOCV 代替......）

先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T18:37:28.060

您的问题听起来好像您对交叉验证并不完全熟悉。就像您注意到的那样，有一个用于运行折叠次数的参数。对于简单的交叉验证，该参数定义了从您的原始集合中创建的子集的数量。设该参数为k。您的原始集合被分成 k 个大小相等的子集。然后对于每次运行，在 k-1 个子集上运行训练，并在剩余的第 k 个子集上完成验证。然后将 k 个子集的 k-1 个子集的另一个排列用于训练，以此类推。所以你运行这个过程的 k 次迭代。

对于您的数据集大小，k=10 听起来不错，但基本上一切都值得测试，只要您考虑所有结果并且不要选择最好的结果。

对于非常简单的评估，您只需使用 2/3 作为训练集，而 1/3“测试集”实际上是您的验证集。尽管有更复杂的方法使用测试集作为终止标准，使用另一个验证集作为最终评估（因为您的结果也可能过度拟合到测试集，因为它定义了终止）。对于这种方法，您显然需要以不同的方式拆分集合（例如 2/3 训练、3/12 测试和 1/12 验证）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T08:51:36.853

你应该小心，因为你没有太多的样本。另一方面，如果你想检查你的模型准确性，你应该为你的模型划分一个测试集。交叉验证将您的数据拆分为训练数据和验证数据。然后，当我们认为您没有太多样本并且您的验证集非常小时，您可以看看这种方法：

> 5×2 交叉验证，使用相同大小的训练交叉验证和验证集（Dietterich (1998)）

你可以在 Ethem Alpaydin 的机器学习一书中找到更多信息。

不要记住数据，也不要在少量样本上进行测试，这看起来像是两难选择，但具体决定取决于您的数据集。

# c# - 从 Instagram API 检索的 JSON 字符串中检索“图像”

> ID：13729997
> 
> 赞同：2
> 
> 时间：2012-12-05T18:30:59.783
> 
> 标签：c#, json, instagram, json.net

使用 C# 和 Visual Studio 2010（Windows 窗体项目）、InstaSharp 和 Newtonsoft.Json 库。

当我请求特定主题标签时，我想从**Endpoint** Instagram API返回给我的 JSON 字符串中获取**图像 url 。**

 **到目前为止，我可以检索 JSON 字符串。

我正在尝试使用**Newtonsoft.Json**使用示例反序列化对象，但我可能无法正确理解对象的 JSON 字符串表示。

下面是我从他们的文档`response`中的 api 调用中获得的简化示例。[来源这里](http://instagram.com/developer/endpoints/tags/)`tags/tag-name/media/recent`

```
{
    "data": [{
        "type": "image",
        "filter": "Earlybird",
        "tags": ["snow"],
        "comments": {
        }
        "caption": {
        },
        "likes": {
        },
        "created_time": "1296703536",
        "images": {
            "low_resolution": {
                "url": "http://distillery.s3.amazonaws.com/media/2011/02/02/f9443f3443484c40b4792fa7c76214d5_6.jpg",
                "width": 306,
                "height": 306
            },
            "thumbnail": {
                "url": "http://distillery.s3.amazonaws.com/media/2011/02/02/f9443f3443484c40b4792fa7c76214d5_5.jpg",
                "width": 150,
                "height": 150
            },
            "standard_resolution": {
                "url": "http://distillery.s3.amazonaws.com/media/2011/02/02/f9443f3443484c40b4792fa7c76214d5_7.jpg",
                "width": 612,
                "height": 612
            }
        },
        "id": "22699663",
        "location": null
    },
    ...
    ]
} 
```

我想特别了解其中`standard_resolution`的`images`一部分。

这是我目前拥有的相关代码。

```
//Create the Client Configuration object using Instasharp
var config = new InstaSharp.Endpoints.Tags.Unauthenticated(config);

//Get the recent pictures of a particular hashtag (tagName)
var pictures = config.Recent(tagName);

//Deserialize the object to get the "images" part
var pictureResultObject = JsonConvert.DeserializeObject<dynamic>(pictureResult.Json);
            consoleTextBox.Text = pictureResult.Json;
            var imageUrl = pictureResultObject.Data.Images;
            Console.WriteLine(imageUrl); 
```

我得到错误：`Additional information: Cannot perform runtime binding on a null reference`

所以`imageUrl`当我调试时确实为空，因此表明我没有以正确的方式访问它。

任何人都可以向我解释如何使用**Newtonsoft.Json**访问这个 JSON 字符串的不同部分？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T18:39:01.033

使用 *Newtonsoft.Json*

```
dynamic dyn = JsonConvert.DeserializeObject(json);
foreach (var data in dyn.data)
{
    Console.WriteLine("{0} - {1}",
            data.filter,
            data.images.standard_resolution.url);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-30T14:27:22.647

我为 .net 编写了一个插件，负责反序列化 json 字符串并返回数据表。它仍在开发中，但看看它是否有帮助。[Github 上的 Instagram.NET](https://github.com/michaeldegli/dot-net-instagram)**

# javascript - 将 css 添加到具有现有 css 的元素

> ID：13729998
> 
> 赞同：0
> 
> 时间：2012-12-05T18:31:01.410
> 
> 标签：javascript, css

如果我有一个带有预定义 css 样式的 html 元素

```
<h1 style="color:blue;">This is a header</h1> 
```

现在，如果我想添加一个名为`text-align:center`h1 元素的新样式。

如何在不覆盖现有样式的情况下将新样式属性添加到样式属性的末尾？

所以结果看起来像

```
<h1 style="color:blue;text-align:center">This is a header</h1> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T18:57:39.230

这是执行此操作的*三种*方法：

[jsfiddle 示例](http://jsfiddle.net/j9JbT/2/)

**1 - 设置元素样式属性**- 动态 JavaScript 样式，但可以说打破[了关注点分离](http://en.wikipedia.org/wiki/Separation_of_concerns#HTML.2C_CSS.2C_JavaScript_and_PHP)

HTML：

```
<h1 id="headerExample1" style="color:blue;">This is a header</h1> 
```

JavaScript：

```
var ex1 = document.getElementById('headerExample1');

if (someLogic) {
    ex1.style.textAlign = "center";
} 
```

**2 - 设置样式属性**- 这是三个属性中最脏的，但确实让您了解如何`style`使用 JavaScript 直接访问/更改属性

HTML：

```
<h1 id="headerExample2" style="color:blue;">This is a header</h1> 
```

JavaScript：

```
var ex2 = document.getElementById('headerExample2');

if (someLogic) {
    ex2.setAttribute('style', ex2.getAttribute('style') + ";text-align:center");
} 
```

**3 - CSS 和类- 这是关于**[关注点分离](http://en.wikipedia.org/wiki/Separation_of_concerns)的标题样式最简洁的方法

HTML：

```
<h1 id="headerExample3">This is a header</h1> 
```

CSS：

```
#headerExample3 {color:blue;}
.centered {text-align:center;} 
```

​ JavaScript：

```
var ex3 = document.getElementById('headerExample3');

if (someLogic) {
    ex3.className = "centered";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T18:33:13.870

使用内联样式是个坏主意，因为很难覆盖它们，并且保持内容和布局的分离在 Web 开发中很重要。

最好使用样式表：

```
h1 {
    color:blue;
    text-align:center
} 
```

使用 JavaScript：

```
document.getElementsByTagName('h1').style.textAlign="center"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T18:38:41.163

使用 javascript: document.getElementById("h1id").style.textAlign = "center";

将上面的 h1id 替换为您将在 html 中提供的 id。