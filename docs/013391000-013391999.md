# StackOverflow 问答 13391000-13391999

# python - Python 帮助：查找重复

> ID：13391001
> 
> 赞同：-1
> 
> 时间：2012-11-15T03:09:26.940
> 
> 标签：python, arrays, list, matrix, repeat

我在下面有这些函数，我将字母“b”放在矩阵内的某个位置。（我正在制作扫雷，这些“b”代表炸弹在矩阵中的位置）。我必须将“z”炸弹放入函数中，但放置炸弹的位置不能多次出现。我知道如何将它们放在函数中，但是我无法弄清楚它们是否在重复

```
from random import*

mat1 = []
mat2 = []
def makemat(x):
    for y in range(x):
        list1 = []
        list2 = []
        for z in range(x):
            list1.append(0)
            list2.append("-")
        mat1.append(list1)
        mat2.append(list2)
makemat(2)

def printmat(mat):
    for a in range(len(mat)):
        for b in range(len(mat)):
            print(str(mat[a][b]) + "\t",end="")  
        print("\t")

def addmines(z):
    for a in range(z):
        x = randrange(0,len(mat1))
        y = randrange(0,len(mat1))   
        mat1[y][x] = "b"            
addmines(4) 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T03:14:55.810

也许我不明白这个问题，但为什么不检查“b”是否已经存在呢？

```
def addmines(z):
for a in range(z):
    x = randrange(0,len(mat1))
    y = randrange(0,len(mat1))
    if mat1[y][x] == "b":
        addmines(1)
    else:
        mat1[y][x] = "b"
addmines(4) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T03:30:04.090

您正在尝试做的是无需更换的样品。尝试使用[`random.sample`](http://docs.python.org/3/library/random.html?highlight=random#random.sample)

```
import random

...

def addmines(countMines):
    countRows = len(mat1)
    countCols = len(mat1[0])
    countCells = countRows * countCols

    indices = random.sample(range(countCells), countMines)

    rowColIndices = [(i // countRows, i % countRows) for i in indices]

    for rowIndex, colIndex in rowColIndices:
        mat1[rowIndex][colIndex] = 'b' 
```

# c# - 如何从一种方法到另一种方法获取会话的值？

> ID：13391002
> 
> 赞同：0
> 
> 时间：2012-11-15T03:09:35.397
> 
> 标签：c#, asp.net, sql, sql-server

这是我写的代码

```
private void ViewUsers()
{
    con.Open();
    SqlCommand com = new SqlCommand();
    com.Connection = con;
    com.CommandText =
        "SELECT FirstName + ' ' + LastName AS Name FROM Clients WHERE UserID=" + Session["userid"];

    SqlDataReader data = com.ExecuteReader();

    while (data.Read())
    {
        lblName.Text = data["Name"].ToString();
    }
    data.Close();
    con.Close();
}

private void GetUserType()
{
    con.Open();
    SqlCommand com = new SqlCommand();
    com.Connection = con;
    com.CommandText =
        "SELECT UserTypeID FROM Users WHERE UserID=" + Session["userid"];

    SqlDataReader d2 = com.ExecuteReader();
    if (d2["UserTypeID"].ToString() != "4")
    {
        Response.Redirect("ContactUS.aspx");
    }
} 
```

我怎样才能从`Session["userid"]`其中`ViewUsers()`获得价值`GetUserType`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T03:29:17.613

关于您的评论，Session 与表格无关。当用户访问您的站点并且您设置`Session["userid"] = "bob"`然后稍后从其他位置访问它时`Session["userid"]`，它将始终提供值“bob”。因此，您`Session["userid"]`在两种方法中访问的代码都应该在这两种情况下都为您提供价值。

Session["userid"] 与表无关。它只是名称/值对的列表。上面的“userid”是会话值“bob”的名称。

当您说“它无法读取”时，您是否遇到异常？还是 ExecuteReader 成功但不返回任何记录？ **我注意到你`d2.Read()`在尝试之前没有打电话`d2["UserTypeId"]`**

通常您还会在调用 .Read 之前检查 d2.HasRows ，因为如果没有行，您不想尝试检索数据。

当您在方法中设置断点时，使用调试器查看`Session["userid"]`在监视窗口中生成的值。突出显示，右键单击，添加手表。这将帮助您确定这是否是问题所在。

您也可以添加 d2.HasRows 来观看，在您跳过**ExecuteReader**之后，您可以看到它的值是什么。如果它没有产生任何结果，那么表中可能没有该用户的行。

由于看起来您只需要单行的单个值，因此 ExecuteScalar 可能更适合： [https ://stackoverflow.com/a/5794595/84206](https://stackoverflow.com/a/5794595/84206)

# jquery - 将 jQuery UI 复选框选择限制为一个并在选择复选框值时更新文本框

> ID：13391003
> 
> 赞同：2
> 
> 时间：2012-11-15T03:09:45.827
> 
> 标签：jquery

有没有办法将 jQuery UI 复选框选择限制为一个？

其次，一旦复选框选择被限制为一个，有没有办法用用户选择的任何值来更新复选框的内容？

目前我的复选框允许多选，这是我到目前为止的代码：http: [//jsfiddle.net/wDbUF/1/](http://jsfiddle.net/wDbUF/1/)

**HTML**

```
<input type="text" style="border: 0; color: #000; background-color: #fff; font-size: 12px;" disabled="disabled" value="None" class="check"/>
<div id="format">
    <input type="checkbox" id="check1"/><label for="check1">1</label>
    <input type="checkbox" id="check2" /><label for="check2">2</label>
    <input type="checkbox" id="check3" /><label for="check3">3</label>
    <input type="checkbox" id="check4" /><label for="check4">4</label>
    <input type="checkbox" id="check5" /><label for="check5">5</label>
    <input type="checkbox" id="check6" /><label for="check6">6</label>
</div> 
```

**JS**

```
$(function() {
    $( "#check" ).button();
    $( "#format" ).buttonset();
});​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T03:16:55.923

将输入类型从 更改`checkbox`为`radio`。那应该可以解决您的问题。还要给出一个所有输入`name`都应该相同的属性，`radio`

```
<input type="text" style="border: 0; color: #000; background-color: #fff; font-size: 12px;" disabled="disabled" value="None" class="check"/>

<div id="format">
    <input type="radio" name="check" id="check1"/><label for="check1">1</label>
    <input type="radio" name="check" id="check2" /><label for="check2">2</label>
    <input type="radio" name="check" id="check3" /><label for="check3">3</label>
    <input type="radio" name="check" id="check4" /><label for="check4">4</label>
    <input type="radio" name="check" id="check5" /><label for="check5">5</label>
    <input type="radio" name="check" id="check6" /><label for="check6">6</label>
</div>
 ​ 
```

演示：http: [//jsfiddle.net/wDbUF/4/](http://jsfiddle.net/wDbUF/4/)

# android - 将带有 xml 布局的片段动态添加到 GridLayout 不起作用

> ID：13391010
> 
> 赞同：8
> 
> 时间：2012-11-15T03:10:10.107
> 
> 标签：android, android-layout, android-fragments, android-gridlayout

在我们的应用程序中，我们尝试将片段动态添加到 GridLayout。空网格布局在 XML 中定义，片段的布局也是如此。在运行时，我们检查一些数据，并从中确定要添加到布局的片段数量以及每个片段使用的布局。当我们让片段为其生成的视图分配大小时，一切正常，但是如果我们在布局文件中为片段指定大小，则网格布局中不会显示任何内容。显然，我们可以在创建视图时简单地指定大小，但我们更愿意在片段的 xml 布局中执行它，因为这将允许我们利用 Android 的内置系统为每个设备选择正确的布局。

我正在使用支持库片段。我不使用支持库 GridLayout 如果这有所作为

相关代码和xml如下：

**网格布局 XML：**

```
<?xml version="1.0" encoding="utf-8"?>
<merge xmlns:android="http://schemas.android.com/apk/res/android">
    <ScrollView
        android:id="@+id/grid_scroll"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_above="@+id/bottom_fragment"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:layout_marginRight="8dp"
        android:layout_marginTop="?android:attr/actionBarSize"
        android:overScrollMode="ifContentScrolls" >

        <GridLayout
            android:id="@+id/grid"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:alignmentMode="alignMargins"
            android:animateLayoutChanges="true"
            android:columnCount="3"
            android:columnOrderPreserved="true"
            android:orientation="horizontal"
            android:overScrollMode="ifContentScrolls"
            android:rowOrderPreserved="true" >
        </GridLayout>
    </ScrollView>
</merge> 
```

**片段 XML 的示例**

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="200dp"
    android:layout_height="100dp"
    android:alpha="1" >

    <Button
        android:id="@+id/button1"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:alpha="1.0" />
</RelativeLayout> 
```

**片段 onCreateView() 方法**

```
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
    super.onCreateView(inflater, container, savedInstanceState);
    View view;
    GridLayout.Spec rowSpec = GridLayout.spec(mRowStart, mRowSpan);
    GridLayout.Spec columnSpec;
    GridLayout.LayoutParams childParams;
    if (large) {;
        view = inflater.inflate(R.layout.my_place_large, container, false);
        columnSpec = GridLayout.spec(mColumnStart, 2);
        childParams = new GridLayout.LayoutParams(rowSpec, columnSpec);
        //childParams.width = 200; //If I do this everything works regardless of the layout size
    } else {
        view = inflater.inflate(R.layout.my_place_small, container, false);
        columnSpec = GridLayout.spec(mColumnStart, 1);
        childParams = new GridLayout.LayoutParams(rowSpec, columnSpec);
        //childParams.width = 100; //If I do this everything works regardless of the layout size
    }
    childParams.setMargins(0, 0, 0, 0);
    //childParams.height = 100; //If I do this everything works regardless of the layout size
    view.setLayoutParams(childParams);
    view.setId(ID);
    return view;
} 
```

**将片段添加到布局**

```
private void populateGrid() {
    RelativeLayout gridParent = (RelativeLayout) mParentActivity.findViewById(R.id.locations);
    mLocationsGrid = (GridLayout) gridParent.findViewById(R.id.grid);
    nColumns = mLocationsGrid.getColumnCount();
    mAdapter = new MyAdapter(mContext, this, mResolver); //This is how I keep track of the various fragments depending on my app's state
    int nCards = mAdapter.getNumberOfCards();
    FragmentManager fragmentManager = mParentActivity.getSupportFragmentManager();
    FragmentTransaction fragmentTransaction = fragmentManager.beginTransaction();
    for (int i = 0; i < nCards; ++i) {
        fragmentTransaction.add(mLocationsGrid.getId(), mAdapter.getFragmentAtIndex(i), String.valueOf(i));
    }
    fragmentTransaction.commit();
    mPopulated = true;
} 
```

我认为应该涵盖它。重申一下，如果我取消注释在 onCreateView() 中明确设置维度的行，它们会正确显示在 GridLayout 中，因此我知道跟踪片段和此类工作的所有内容，片段事务也是如此。当我尝试在片段的 xml 中指定大小时出现问题，在这种情况下我得到一个空白屏幕。

感谢您的想法，建议和沉思。谢谢，贾里德

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-19T17:11:57.917

这来得太晚了，但如果有机会，这可能仍然有用。问题是您在动态设置新的 LayoutParams 时覆盖了 XML 布局参数。IE，当你这样做时：

```
 view.setLayoutParams(childParams); 
```

这将删除 XML 的原始高度和宽度设置。仅仅因为您在代码中将 childParams 宽度/高度留空并不意味着未设置值。在 GridLayout 的情况下，它们被设置为`undefined`.

修复方法是首先保存视图现有的 LayoutParam 的高度/宽度，并在动态创建新的 LayoutParam 时使用它。例子：

```
if (large) {;
    view = inflater.inflate(R.layout.my_place_large, container, false);
    ViewGroup.LayoutParams oldParams = view.getLayoutParams();
    columnSpec = GridLayout.spec(mColumnStart, 2);
    childParams = new GridLayout.LayoutParams(rowSpec, columnSpec);
    childParams.width = oldParams.width;
} 
```

这将允许您在应用代码中的行/列规范时保持 XML 中的宽度/高度。

# ios - NSFileManager Attributesforitem 失败并返回 null

> ID：13391011
> 
> 赞同：4
> 
> 时间：2012-11-15T03:10:10.670
> 
> 标签：ios, objective-c, filesystems, nsfilemanager, filepicker.io

现在我正在开发一个需要的 iOS 应用程序，`NSFileManager`但是当我执行该`attributesOfItemAtPath:`方法时，它返回 null。这在 NSData 和`dataWithContentsOfFile:`方法上也失败了。我不明白为什么会这样。我使用的文件 URL 看起来像这样：`file://localhost/private/var/mobile/Applications/597DE145-33D7-4F92-AE95-029D5CF15291/tmp/Kv7DWqtRWH7WnN47HdDW`。我怀疑它可能与 URL 有关，但我不确定。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-15T03:24:24.883

您需要将 转换`NSURL`为路径，以便与任何`NSFileManager`采用字符串的方法一起使用。通过调用`path`URL 上的方法来执行此操作。

```
NSURL *someURL = ... // some file URL
NSString *path = [someURL path]; // convert the file:// URL to a file path
NSDictionary *info = [[NSFileManager defaultManager] attributesOfItemAtPath:path]; 
```

# callback - PayPal MECL 重定向失败并出现回调

> ID：13391021
> 
> 赞同：0
> 
> 时间：2012-11-15T03:11:45.470
> 
> 标签：callback, paypal, express-checkout

[https://www.x.com/developers/community/blogs/ppmacole/using-callback-api](https://www.x.com/developers/community/blogs/ppmacole/using-callback-api)

我正在尝试将 PayPal MECL 与参考上述网址的即时更新集成。

当我使用回调设置快速结帐时，出现问题。设置结帐后我得到了一个令牌。但是，我使用令牌加载沙箱登录页面构建的 url 如下屏幕截图所示。

[http://i.stack.imgur.com/8I7Aa.png](http://i.stack.imgur.com/8I7Aa.png)

我在下面设置请求

```
•   ADDROVERRIDE=0
•   ALLOWNOTE=0
•   ALLOWPUSHFUNDING=
•   BANKTXNPENDINGURL=
•   BRANDNAME=
•   BUTTONSOURCE=AngellEYE_PHPClass
•   BUYEREMAILOPTIONENABLE=
•   BUYERID=
•   BUYERREGISTRATIONDATE=
•   BUYERUSERNAME=
•   CALLBACK=http://ip/en/index.php/api/paypal/eccallback
•   CALLBACKTIMEOUT=3
•   CALLBACKVERSION=85.0
•   CANCELURL=http://cancelUrl
•   CHANNELTYPE=Merchant
•   CUSTOMERSERVICENUMBER=
•   EMAIL=
•   GIFTMESSAGEENABLE=
•   GIFTRECEIPTENABLE=
•   GIFTWRAPAMOUNT=
•   GIFTWRAPENABLE=
•   GIFTWRAPNAME=
•   GIROPAYCANCELURL=
•   GIROPAYSUCCESSURL=
•   HDRBACKCOLOR=
•   HDRBORDERCOLOR=
•   HDRIMG=
•   LANDINGPAGE=Billing
•   LOCALECODE=US
•   L_PAYMENTREQUEST_0_AMT0=28.00
•   L_PAYMENTREQUEST_0_ITEMCATEGORY0=Physical
•   L_PAYMENTREQUEST_0_NAME0=METALICPUNCHBLACK
•   L_PAYMENTREQUEST_0_NUMBER0=lm011
•   L_PAYMENTREQUEST_0_QTY0=3
•   L_PAYMENTREQUEST_0_TAXAMT0=0
•   L_SHIPPINGOPTIONAMOUNT0=6.99
•   L_SHIPPINGOPTIONAMOUNT1=12.89
•   L_SHIPPINGOPTIONISDEFAULT0=1
•   L_SHIPPINGOPTIONISDEFAULT1=0
•   L_SHIPPINGOPTIONLABEL0=normal
•   L_SHIPPINGOPTIONLABEL1=express
•   L_SHIPPINGOPTIONNAME0=normal
•   L_SHIPPINGOPTIONNAME1=express
•   L_SURVEYCHOICE0=Choice1
•   L_SURVEYCHOICE1=Choice2
•   L_SURVEYCHOICE2=Choice3
•   L_SURVEYCHOICE3=etc
•   MAXAMT=140.99
•   METHOD=SetExpressCheckout
•   NOSHIPPING=0
•   NOTETOBUYER=
•   PAGESTYLE=button
•   PAYFLOWCOLOR=
•   PAYMENTREQUEST_0_ALLOWEDPAYMENTMETHOD=InstantPaymentOnly
•   PAYMENTREQUEST_0_ALLOWPUSHFUNDING=
•   PAYMENTREQUEST_0_AMT=90.99
•   PAYMENTREQUEST_0_CURRENCYCODE=USD
•   PAYMENTREQUEST_0_CUSTOM=
•   PAYMENTREQUEST_0_DESC=
•   PAYMENTREQUEST_0_HANDLINGAMT=0
•   PAYMENTREQUEST_0_INSURANCEOPTIONOFFERED=
•   PAYMENTREQUEST_0_INVNUM=
•   PAYMENTREQUEST_0_ITEMAMT=84.00
•   PAYMENTREQUEST_0_NOTETEXT=
•   PAYMENTREQUEST_0_NOTIFYURL=
•   PAYMENTREQUEST_0_PAYMENTACTION=
•   PAYMENTREQUEST_0_PAYMENTREQUESTID=
•   PAYMENTREQUEST_0_SELLERID=
•   PAYMENTREQUEST_0_SELLERPAYPALACCOUNTID=
•   PAYMENTREQUEST_0_SELLERUSERNAME=YongnamsStore
•   PAYMENTREQUEST_0_SHIPDISCAMT=
•   PAYMENTREQUEST_0_SHIPPINGAMT=6.99
•   PAYMENTREQUEST_0_SHIPTOCITY=
•   PAYMENTREQUEST_0_SHIPTOCOUNTRYCODE=
•   PAYMENTREQUEST_0_SHIPTONAME=
•   PAYMENTREQUEST_0_SHIPTOPHONENUM=
•   PAYMENTREQUEST_0_SHIPTOSTATE=
•   PAYMENTREQUEST_0_SHIPTOSTREET=
•   PAYMENTREQUEST_0_SHIPTOSTREET2=
•   PAYMENTREQUEST_0_SHIPTOZIP=
•   PAYMENTREQUEST_0_TAXAMT=
•   PWD=xxxx
•   REQCONFIRMSHIPPING=0
•   RETURNURL=http://returnUrl
•   SIGNATURE=AJFQuv....
•   SOLUTIONTYPE=Mark
•   SURVEYENABLE=
•   SURVEYQUESTION=
•   TOKEN=
•   TOTALTYPE=Total
•   USER=z8_135...om
•   VERSION=85.0 
```

如果我删除回调 url，一切都很好。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T06:20:58.583

您需要确保在另一个选项卡中登录到您的[http://developer.paypal.com](http://developer.paypal.com)帐户，以便在沙箱中测试 Express Checkout。否则，您看到的这个窗口就是您所得到的。

# rss - Google Feeds API 跳过条目的功能？

> ID：13391027
> 
> 赞同：1
> 
> 时间：2012-11-15T03:12:12.187
> 
> 标签：rss, google-api, google-feed-api

有没有办法调用 Google Feed API 以跳过 Feed 中的 X 个条目？

解释上下文：

我想从特定的提要中按需加载额外的条目。因此，用户可以单击“加载更多”类型的按钮，然后触发一个 ajax 函数来检索其他条目。只是在场景中添加一些数字，假设我默认加载 10 个条目，并且希望每次用户单击“加载更多”按钮时再加载 10 个条目。

使用历史条目/numEntries API 函数，我基本上可以通过检索 10 +（已加载的条目数）来解决我的问题，并且只输出最后 10 个。但这很丑陋，因为每次用户加载另外 10 个条目时，他们还必须加载所有以前的条目，因此每次加载更多条目时负载都会变大。似乎效率很低！

检查 Google 的 API 文档，我找不到任何对“跳过条目”或“从 X 条目开始”类型的 API 方法/变量的引用，所以我可以让我的 ajax 调用变得漂亮和精简，只得到 10条目，从（已加载的条目数）开始。

有人对我有任何经验/建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T16:14:06.577

我认为您必须先加载所有项目，但首先只显示 10 个。如果他们单击“显示更多”，那么您将向他们显示接下来的 10 个（您必须在项目列表中保留您的位置的内部指针）。所以本质上，你不是“加载”了 10 个，而是“显示”了 10 个。

# apache - 安全 cookie 和路径长度约束

> ID：13391031
> 
> 赞同：1
> 
> 时间：2012-11-15T03:12:52.253
> 
> 标签：apache, cookies, setcookie

在 oracle 企业 Linux 上使用 apache 2.2.3。

在 httpd.conf 中设置以下设置时：**Header edit Set-Cookie ^(.*)$ $1;Secure**，cookie 生成（发生在我们的注册页面上）停止。

在证书中，我们设置了“路径长度约束=无”。它是一个 L1C 委托证书。可能是它的原因吗？

# drupal - Drupal，如何在节点的“内容”中呈现块？

> ID：13391033
> 
> 赞同：0
> 
> 时间：2012-11-15T03:13:06.043
> 
> 标签：drupal, drupal-7

我在几页中有一个共同的内容。我想将内容包含在节点的“内容”中。

我认为是使用块，但我不知道如何在节点的“内容”中使用块。还有一些其他不同的“div”包装了块，我不能在模板文件中写块。我应该怎么办？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T10:46:44.773

我会避免直接在页面内容中呈现块。

而是在内容的正上方或下方[创建一个新区域](http://drupal.org/node/171205#regions)（取决于您希望块出现的位置），然后将块放在新区域中。

也可以使用直接在模板文件中渲染你的块

```
$block = module_invoke('modulename', 'block_view', 'block_name');
print render($block); 
```

这篇文章讨论了这两种方法的优点：http: [//drupal.org/node/345361](http://drupal.org/node/345361)

# python - 如何使用 mechanize 下载生成的验证码？

> ID：13391034
> 
> 赞同：1
> 
> 时间：2012-11-15T03:13:09.157
> 
> 标签：python, mechanize

我正在尝试在我的国家建立一个博客平台，但博客平台有一个内部构建的验证码生成。

问题是 CAPTCHA 是这样构建的，因此每次有 GET 请求时都会生成一个新图像。所以假设验证码图像 URL 是这样的：[http ://example.com/randomcaptcha.aspx?someparams-that-are-always-the-same](http://example.com/randomcaptcha.aspx?someparams-that-are-always-the-same)

即使我在 Firefox 中打开上述链接并点击刷新（仅显示 JPG 图像），每次刷新时都会看到不同的图像。

出现问题是因为 mechanize 下载整个网页时，它也在该请求期间下载图像（或者更确切地说，它遵循 randomcaptcha.aspx 链接）。因此，当我再次尝试下载图像时，我需要发出另一个 GET 请求来抓取图像并下载它——此时图像已经改变。

我将如何解决这个问题？

谢谢你。

编辑当前的代码是这样的：

```
browser.open("http://www.example.com/registration.aspx") #this contains the randomcaptcha.aspx url in img src
#then we have a regex to find the url of the image, say the variable is url
with open("captcha.jpg", "wb") as file:
    file.write(browser.open_novisit(url).read()) 
```

此时下载的 captcha.jpg 文件已经与注册页面显示的不同。`randomcaptcha.aspx`我使用名为 Fiddler 的软件来查看 - 肯定有 2 个 GET 请求针对该url发出。

编辑#2 已解决：我的错。验证码 URL 不正确。

# facebook - 通过 Omniauth（Rails 3）从 Devise 成功登录后，用户不存储在数据库中

> ID：13391039
> 
> 赞同：3
> 
> 时间：2012-11-15T03:14:35.920
> 
> 标签：facebook, ruby-on-rails-3, devise, omniauth

即使omniauth控制器确认登录成功，我似乎也无法从我的数据库中保存用户。我遵循了omniauth wiki的说明：[https ://github.com/plataformatec/devise/wiki/OmniAuth%3A-Overview](https://github.com/plataformatec/devise/wiki/OmniAuth%3A-Overview)

用户.rb：

```
class User < ActiveRecord::Base
# Include default devise modules. Others available are:
# :token_authenticatable, :confirmable,
# :lockable, :timeoutable and :omniauthable
  devise :database_authenticatable, :registerable, :recoverable, :rememberable, :trackable, :validatable, :omniauthable
# Setup accessible (or protected) attributes for your model
attr_accessible :email, :encrypted_password, :provider, :uid
attr_accessor :email, :password, :password_confirmation, :remember_me, :provider,   :uid, :name

def self.from_omniauth(auth)
where(auth.slice(:provider, :uid)).first_or_initialize.tap do |user|
user.provider = auth.provider
user.uid = auth.uid
user.email = auth.info.email
user.encrypted_password = Devise.friendly_token[0,20]
user.save!
end
end

def self.find_for_facebook_oauth(auth, signed_in_resource=nil)
  user = User.where(:provider => auth.provider, :uid => auth.uid).first
  unless user
    user = User.create(
                         provider:auth.provider,
                         uid:auth.uid,
                         email:auth.info.email,
                         encrypted_password:Devise.friendly_token[0,20]
                         )
  #user.ensure_authentication_token!
  #added extra to create authentication for user
  user.save
  end
  user
end

def self.new_with_session(params, session)
super.tap do |user|
  if data = session["devise.facebook_data"] && session["devise.facebook_data"]["extra"]["raw_info"]
    user.email = data["email"] if user.email.blank?
  end
end
end
end 
```

omn​​iauth_callback_controller.rb：

```
class Users::OmniauthCallbacksController < Devise::OmniauthCallbacksController

def passthru
render :file => "#{Rails.root}/public/404.html", :status => 404, :layout => false
# Or alternatively,
# raise ActionController::RoutingError.new('Not Found')
end

def facebook
# You need to implement the method below in your model (e.g. app/models/user.rb)
@user = User.find_for_facebook_oauth(request.env["omniauth.auth"], current_user)
#@user = User.from_omniauth(request.env["omniauth.auth"])

if @user.persisted?
  sign_in_and_redirect @user, :event => :authentication #this will throw if @user is not activated
  set_flash_message(:notice, :success, :kind => "Facebook") if is_navigational_format?
else
  session["devise.facebook_data"] = request.env["omniauth.auth"]
  #redirect_to new_user_registration_url
  redirect_to messages_url
end
end
end 
```

我尝试使用默认设计控制器登录，它通过用户数据库。由于我无法存储到数据库，我也无法获取 uid。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T11:39:14.193

通过从不同的方法创建一个新的应用程序：http: [//supriya-surve.blogspot.com/2012/06/rails-3-devise-omniauth-facebook.html](http://supriya-surve.blogspot.com/2012/06/rails-3-devise-omniauth-facebook.html)，我找到了解决方案。

更新 user.rb find_for_facebook_auth：

```
 def self.find_for_facebook_oauth(auth, signed_in_resource=nil)
  user = User.where(:provider => auth.provider, :uid => auth.uid).first
  unless user
    user = User.create(
                         provider:auth.provider,
                         uid:auth.uid,
                         email:auth.info.email,
                         password:Devise.friendly_token[0,20]
                         )

  end
  user
end 
```

然后user.rb的attr_accessible：

```
 attr_accessible :email, :password, :password_confirmation, :remember_me, :provider, :uid, :oauth_token, :oauth_expires_at 
```

成功登录后，用户被保存到数据库中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-12T14:21:04.867

当我决定将 Tumblr 身份验证添加到现有的 Devise 用户模型时，我也[遇到了同样的问题。](https://stackoverflow.com/questions/18177962/cant-persist-devise-user-with-rails-4-omniauth-tumblr/)事实证明，Devise 在`index_users_on_email`数据库索引上抛出了一个错误。

网上没有人有这个问题，所以我想我会把它扔在那里。我花了很长时间试图弄清楚。很高兴你解决了:)

# git - Capistrano + Git - “找不到” [提交 SHA]

> ID：13391040
> 
> 赞同：3
> 
> 时间：2012-11-15T03:14:36.953
> 
> 标签：git, github, ssh, capistrano

我在设置工作站以使用 Capistrano 部署项目时遇到困难。这是我之前在内部为客户工作的一个项目。我们在这个 PHP 项目上使用 Capistrano + Git 没有任何困难。

现在我正在尝试重新访问该项目并设置一个工作站，以便能够通过 github 访问代码并通过 Capistrano 将其部署到客户端服务器。

我在我的工作站或客户端服务器上连接到 github 没有任何困难。我可以在我的工作站上执行 SSH -vT git@github.com 并获得预期的成功结果。

同样，我可以进入服务器并执行命令来验证服务器是否可以访问 github.com。

在工作站端，我可以毫不费力地克隆、拉取和推送代码。

但是，当我尝试运行 capistrano 部署脚本时，该脚本会尝试执行第一次提取（或克隆）并出现“无法找到 [commit SHA hash]”错误。

自从我上次从客户办公室部署以来，部署脚本没有改变。

这是 cap deploy 的输出：

```
 * 2012-11-14 18:52:34 executing `dev'
  * 2012-11-14 18:52:34 executing `setbranch'
  * 2012-11-14 18:52:34 executing `deploy'
  * 2012-11-14 18:52:34 executing `deploy:update'
 ** transaction: start
  * 2012-11-14 18:52:34 executing `deploy:update_code'
    updating the cached checkout on all servers
    executing locally: "git ls-remote git@github.com:XXX123/reponame.git master"
    command finished in 2490ms
  * executing "if [ -d /home/serverusername/dev.site.com/code/shared/cached-copy ]; then cd /home/serverusername/dev.site.com/code/shared/cached-copy && git fetch -q origin && git fetch --tags -q origin && git reset -q --hard 8d28f09e2b85ebac6da912-github-commit-sha && git clean -q -d -x -f; else git clone -q git@github.com:XXX123/reponame.git /home/serverusername/dev.site.com/code/shared/cached-copy && cd /home/serverusername/dev.site.com/code/shared/cached-copy && git checkout -q -b deploy 8d28f09e2b85ebac6da912-github-commit-sha; fi"
    servers: ["server.alias"]
    [server.alias] executing command
 ** [server.alias :: out] error: unable to find 8d28f09e2b85ebac6da912-github-commit-sha
 ** fatal: object 8d28f09e2b85ebac6da912-github-commit-sha not found
    command finished in 1681ms
 *** [deploy:update_code] rolling back
  * executing "rm -rf /home/serverusername/dev.site.com/code/releases/20121115025239; true"
    servers: ["server.alias"]
    [server.alias] executing command
    command finished in 293ms
failed: "sh -c 'if [ -d /home/serverusername/dev.site.com/code/shared/cached-copy ]; then cd /home/serverusername/dev.site.com/code/shared/cached-copy && git fetch -q origin && git fetch --tags -q origin && git reset -q --hard 8d28f09e2b85ebac6da912-github-commit-sha && git clean -q -d -x -f; else git clone -q git@github.com:XXX123/reponame.git /home/serverusername/dev.site.com/code/shared/cached-copy && cd /home/serverusername/dev.site.com/code/shared/cached-copy && git checkout -q -b deploy 8d28f09e2b85ebac6da912-github-commit-sha; fi'" on server.alias 
```

（我已经更改了输出代码中的一些名称来投影客户端。）

我最初在努力在 Windows Vista PC 上进行设置时遇到了这个问题。认为 Windows 是问题所在，然后我设置了一个 Ubuntu 虚拟机，让它快速启动并运行，并且得到了相同的结果。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T02:11:30.770

我同意 berkes 的观点，即您的上限配方可能正在寻找错误的 SHA，但由于您报告它没有改变，我将排除这种可能性，因为它最近发生在我身上：

确保 SHA 仍然存在于分支上。

我们重写了我们的一些历史，以前的 SHA 不再在 repo 中。我会寻找`git log`SHA。只创建一个一次性分支并重置为 SHA `git checkout -b lost_sha`&&可能会更快`git reset --hard 8d28f09e2b85ebac6da912`。如果找不到 SHA，Git 会抱怨。

您的脚本可能没有改变，但 repo 改变了。

# xml - 如何转换 XML 空标签

> ID：13391042
> 
> 赞同：3
> 
> 时间：2012-11-15T03:14:49.503
> 
> 标签：xml, xslt, xpath

这听起来可能很奇怪，但我需要将所有空标签转换为一对打开和关闭标签，中间有一个carrage return。提前致谢。

从

```
<OBR>
<OBR_31_Lab_Ins_Typ_Id>L</OBR_31_Lab_Ins_Typ_Id>
<OBX>
<OBX_3_Ltt_Cd>N877</OBX_3_Ltt_Cd>
<OBX_5_1_Lbr_No>0</OBX_5_1_Lbr_No>
<OBX_5_2_Lbr_Tx/>
<OBX_6_Lbr_Unt_Tx/>
</OBX>
<OBX>
<OBX_3_Ltt_Cd>N878</OBX_3_Ltt_Cd>
<OBX_5_1_Lbr_No>-15</OBX_5_1_Lbr_No>
<OBX_5_2_Lbr_Tx/>
<OBX_6_Lbr_Unt_Tx/>
</OBX>
<OBR> 
```

到

```
<OBR>
<OBR_31_Lab_Ins_Typ_Id>L</OBR_31_Lab_Ins_Typ_Id>
<OBX>
<OBX_3_Ltt_Cd>N877</OBX_3_Ltt_Cd>
<OBX_5_1_Lbr_No>0</OBX_5_1_Lbr_No>
<OBX_5_2_Lbr_Tx>

</OBX_5_2_Lbr_Tx>
<OBX_6_Lbr_Unt_Tx>

</OBX_6_Lbr_Unt_Tx>
</OBX>
<OBX>
<OBX_3_Ltt_Cd>N878</OBX_3_Ltt_Cd>
<OBX_5_1_Lbr_No>-15</OBX_5_1_Lbr_No>
<OBX_5_2_Lbr_Tx>

</OBX_5_2_Lbr_Tx>
<OBX_6_Lbr_Unt_Tx>

</OBX_6_Lbr_Unt_Tx>
</OBX>
<OBR> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T03:24:01.447

采用：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="xml" omit-xml-declaration="yes" indent="yes"/>

  <xsl:template match="@* | node()">
    <xsl:copy>
      <xsl:apply-templates select="@* | node()"/>
    </xsl:copy>
  </xsl:template>

  <xsl:template match="*[not(node())]">
    <xsl:copy>
      <xsl:text>&#13;&#10;</xsl:text>
    </xsl:copy>
  </xsl:template>

</xsl:stylesheet> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T03:23:42.903

你可以使用这样的正则表达式：

```
s/\<([a-zA-z0-9-_]+(\s+[a-zA-z0-9-_]+=".*?")*?\s*\/\>/<$1>\n\n<\/$1>/g 
```

# jsf - t:selectOneRadio 与 a4j:ajax 没有 javascript 呈现

> ID：13391043
> 
> 赞同：2
> 
> 时间：2012-11-15T03:14:53.333
> 
> 标签：jsf, jsf-2, richfaces, ajax4jsf, tomahawk

我正在创建一个动态表单，并在选择其他行时需要更新购物车的每个行前面的无线电按钮：

```
<t:inputText id="test">
    <f:ajax event="click" onevent="alert('3');" />
</t:inputText>

<t:selectOneRadio id="rbtnQuantity" value="#{orderActions.selectedQuantity}" layout="spread">
    <f:selectItems value="#{orderActions.quantities}" var="item" />
    <f:converter converterId="integerConverter" />
    <a4j:ajax event="click" oncomplete="renderPrices();" />
</t:selectOneRadio>

<rich:dataTable id="tblQuantities" styleClass="quantities" value="#{orderActions.formatQuantityPrices}" var="item" rowKeyVar="row">
    <h:column>
        <t:radio id="rbtnQuantity" for=":form:rbtnQuantity" index="#{row}" />
    </h:column>

    <h:column>
        <h:outputText value="#{item.quantity}" />
    </h:column>

    <h:column>
        <h:outputText value="#{item.price}">
            <f:convertNumber type="currency" currencySymbol="$" />
        </h:outputText>
    </h:column>

    <h:column>
        <h:outputText value="#{item.price / item.quantity}">
            <f:convertNumber type="currency" currencySymbol="$" />
        </h:outputText>/u
    </h:column>
</rich:dataTable> 
```

问题是没有单选按钮触发 ajax 事件，即使在结果代码中也没有呈现 javascript 代码：

```
<table id="form:tblQuantities" class="rf-dt quantities">
    <colgroup span="4">
    </colgroup>
    <tbody id="form:tblQuantities:tb" class="rf-dt-b">
        <tr id="form:tblQuantities:0" class="rf-dt-r rf-dt-fst-r">
            <td id="form:tblQuantities:0:j_idt296" class="rf-dt-c">
                <label><input id="form:tblQuantities:0:rbtnQuantity" type="radio" name="form:rbtnQuantity" checked="checked" value="25" />&#160;25</label>
            </td>
            <td id="form:tblQuantities:0:j_idt297" class="rf-dt-c">25</td>
            <td id="form:tblQuantities:0:j_idt309" class="rf-dt-c">118,75 $</td>
            <td id="form:tblQuantities:0:j_idt310" class="rf-dt-c">4,75 $/u</td>
        </tr>
[more similar rows...] 
```

我还在顶部添加了一个 t:inputText，看看是不是 t:selectOneRadio 的使用才是问题所在，但不是。

我正在使用 Mojarra、RichFaces 4.2.1、Tomahawk 1.1.14。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T22:35:34.360

由于我无法将 a4j:ajax 或 f:ajax 与 t:selectOneRadio 一起使用，因此我使用了以下解决方法：

```
<a4j:jsFunction name="changeQuantity" oncomplete="renderPrices();">
    <a4j:param assignTo="#{orderActions.selectedQuantity}" name="quantity" />
</a4j:jsFunction>

<t:selectOneRadio onclick="quantity = jQuery(this).val();changeQuantity(quantity);" id="rbtnQuantity" value="#{orderActions.selectedQuantity}" layout="spread">
    <f:selectItems value="#{orderActions.quantities}" var="item" />
    <f:converter converterId="integerConverter" />
</t:selectOneRadio> 
```

它工作正常，但如果有人找到正确的解决方案或我，我宁愿解决问题。

编辑 ：

这是最终使用的代码：

```
<a4j:jsFunction name="changeQuantity" oncomplete="renderPrices();">
    <a4j:param assignTo="#{orderActions.selectedQuantity}" name="quantity" />
</a4j:jsFunction>

# Each row of the table :

<input type="radio" name="quantity" value="#{item.quantity}" checked="#{orderActions.selectedQuantity eq item.quantity ? 'checked' : ''}" onclick="changeQuantity(#{item.quantity});" /> 
```

# android - 在浏览器中交换片段

> ID：13391048
> 
> 赞同：0
> 
> 时间：2012-11-15T03:15:33.633
> 
> 标签：android, android-fragments, android-viewpager, android-support-library

我有一个带有 3 个片段的 ViewPager 和我的 FragmentPagerAdapter：

```
private class test_pager extends FragmentPagerAdapter {
    public test_pager(FragmentManager fm) {
        super(fm);
    }

    @Override
    public Fragment getItem(int i) {
        return fragments[i];
    }

    @Override
    public long getItemId(int position) {
        if (position == 1) {
            long res = fragments[position].hashCode()+fragment1_state.hashCode();
            Log.d(TAG, "getItemId for position 1: "+res);
            return res;
        } else
            return fragments[position].hashCode();
    }

    @Override
    public int getCount() {
        return fragments[2] == null ? 2 : 3;
    }

    @Override
    public int getItemPosition(Object object) {
        Fragment fragment = (Fragment) object;
        for (int i=0; i<3; i++)
            if (fragment.equals(fragments[i])){
                if (i==1) {
                    return 1; // not sure if that makes a difference
                }
                return POSITION_UNCHANGED;
            }

        return POSITION_NONE;
    }
} 
```

在其中一页（#1）中，我不断更改要显示的片段。我删除旧片段的方式是这样的：

```
FragmentManager fm = getSupportFragmentManager();
fm.beginTransaction().remove(old_fragment1).commit(); 
```

然后只是改变价值`fragments[1]`

我发现我真的不能`add`或`replace`新的，否则它会抱怨 ViewPager 也试图用另一个标签添加它......（我在这里做错了吗？）

我展示的所有片段都有`setRetainInstance(true);`其`onCreate`功能。

我的问题是这通常适用于前几次替换，但是当我尝试重用一个片段时，有时（我还没有真正弄清楚模式，在这种情况发生之前，同一个片段可能会显示多次）它只会显示空白页。

这是我在问题发生时尝试显示的片段的回调函数中发现的情况：

*   `onAttach`被调用（但当时getView还是null）
*   `onCreateView`不被调用（这是预期的）
*   `onViewStateRestored`不叫（为什么不呢？）
*   `onResume`不叫（我真的以为会...）

如果它改变了任何东西，我正在使用支持包，我的活动是`SherlockFragmentActivity`

**编辑**（回答马可的评论）：

片段在 Activity 的 onCreate 函数中实例化，我用这些片段填充 ArrayList：

```
char_tests = new ArrayList<Fragment>(Arrays.asList(
            new FragmentOptionA(), new FragmentOptionB(), new FragmentOptionC())); 
```

我从该列表中选择进行设置`fragments[1]`（这一切都在 UI 线程中完成）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T03:13:07.920

I fixed this by changing test_pager to extends [FragmentStatePagerAdapter](http://developer.android.com/reference/android/support/v4/app/FragmentStatePagerAdapter.html) instead.

I am still confused as to what `PagerAdapter` should be used depending on the usage. The only thing I can find in the documentation says that `FragmentPagerAdapter` is better for smaller number of pages that would be kept in memory and `FragmentPagerStateAdapter` better for a larger number of pages where they would be destroyed and save memory...

When trying to do (fancy?) things with Fragments, I found `FragmentStatePagerAdapter` is better when pages are removed and re-inserted like in this case. And FragmentPagerAdapter is better when pages move position (see [bug 37990](http://code.google.com/p/android/issues/detail?id=37990))

# android - 关于一个android组件的生命周期

> ID：13391052
> 
> 赞同：1
> 
> 时间：2012-11-15T03:15:46.553
> 
> 标签：android, service, android-activity, lifecycle

首先，我是 android 开发的新手......我已经阅读了 android API 指南中的一些文章，并且对托管过程的组件生命周期感到困惑。

以下是我的理解：

1.  Android系统可能会在内存不足的情况下杀死一个进程中的一些Activity**或**整个进程，这意味着有可能一个启动的Activity可能会死掉，但进程仍然活着。

2.  如果一个服务启动后没有调用任何停止方法，在内存极低的情况下，该服务被系统**及其宿主进程**杀死，而不仅仅是服务本身，意味着这种情况不应该发生：服务被系统杀死，而是宿主过程还活着。

3.  当应用程序启动时，用户导航 activity1 -> activity2 -> activity3，并且没有一个调用 finish()。接下来，用户导航到另一个应用程序的活动并使用它很长时间，以至于前一个应用程序进程被系统杀死。现在用户导航回回溯堆栈中的activity3，会发生什么？前一个应用程序进程**仅**重新创建 activity3 重新启动？

哪里不对了 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T05:36:04.367

无需切换到另一个应用程序的Activity：从您离开第一个Activity的那一刻开始进入第二个Activity；很明显，当您从第二个活动（回溯）返回第一个活动时，第一个活动可能已被破坏，当您转到第三个活动时，第一个、第二个或两者都可能是同时被摧毁。事实上，你甚至不会让一个活动看到它被破坏；因为只要您通过旋转设备从纵向模式切换到横向模式，这将自动发生，反之亦然。

当您返回一个活动时，如果活动尚未被销毁，则将调用 onRestart() 函数。如果有，则将调用“onCreate(Bundle savedInstanceState)”，但如果您采取了保存的预防措施，则参数“savedInstanceState”设置为非空值（即，它将指向一个有效的 Bundle 对象）当activity进入被系统销毁的过程时，在“onSaveInstanteState(Bundle outState)”函数中activity的当前状态。当需要稍后恢复该活动以进行回溯时，系统将始终在销毁活动之前调用此函数。当然，它不会在调用 finish() 之后被调用，因为这也会从回溯堆栈中删除活动。

最后，在 Android 中，同一应用程序中的活动之间的耦合非常松散。在资源的使用方面，从同一个应用程序或从另一个应用程序切换到活动之间没有太大区别。在许多方面，活动的行为就像所有完全独立的应用程序在运行时一样。这就是为什么您总是需要使用意图来启动活动的原因；即使它来自同一个应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T03:29:12.273

根据我的理解...

1.  在低内存情况下的 android 中，第一个活动将从调用 onDestroy 方法的内存中删除。

2.  情况并非总是如此。这取决于服务的启动方式，即是从 onStart 启动还是通过将服务与组件绑定。

3.  一旦前一个应用程序进程被杀死，那么当用户启动应用程序时，他将被带到活动 1。在相同任务或不同任务中启动活动取决于使用的启动模式（单个任务等）

# process - Robotium：如何使用指定的不同进程启动应用程序

> ID：13391055
> 
> 赞同：1
> 
> 时间：2012-11-15T03:16:03.347
> 
> 标签：process, robotium

现在，我想编写一个测试项目，它可以启动一个具有以下 AndroidManifest（包和活动的关键内容）的应用程序。

> ```
> </package="com.mobitest.app"
> android:multiprocess="false" android:authorities="com.mobitest.app.search"
> provider android:name="com.mobitest.app.mail.provider.AttachmentProvider" 
> ```
> 
> android:label="@string/app_name" android:name="com.mobtest.app.FileBrowser" android:taskAffinity="com.mobtest.app.filebrowser" android:value="com.mobtest.app.search.FileSearchActivity " />

## 我的测试项目中的信息如下：

```
 public class TestApk extends ActivityInstrumentationTestCase2{
        private static final String TARGET_PACKAGE_ID="com.mobitest.app";
        private static final String LAUNCHER_ACTIVITY_FULL_CLASSNAME="com.mobitest.app.FileBrowser";
} 
```

* * *

我还更改了清单中的目标包，如下所示：

```
</android:targetPackage="com.mobitest.app" /> 
```

当我运行测试时，它总是说它们处于不同的进程中。我可以知道经过测试的应用程序在浏览器进程中运行。但是对于这样的应用程序，我该如何编写测试用例以使其可以使用 Rbitium 进行测试？

任何帮助表示赞赏！

# ruby-on-rails - Capybara 返回正确的 URL 但幽灵页面

> ID：13391061
> 
> 赞同：0
> 
> 时间：2012-11-15T03:17:11.977
> 
> 标签：ruby-on-rails, rspec, cucumber, capybara

这是我所拥有的：

```
visit "..."

fill_in "Email", with: user.email
fill_in "Password", with: user.password
click_button "Sign in"

p current_url
p page.body    
save_and_open_page

fill_in "Email", with: "lol@lol.com"
click_button "Update" 
```

current_url 是正确的

但是 page.body 给出了一个只有 DOCTYPE 的空页面，它是一个旧的 HTML4 DOCTYPE，在应用程序的任何地方都不存在！

save_and_open_page 也给出空页。

有什么线索吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T07:31:16.617

不知道什么访问“...”但是，当试图可视化测试在哪里时，我喜欢将其作为参数添加到测试方法中：js => true 然后在你想暂停的任何地方睡 10 或多长时间执行时， :js => true 将加载 selenium，您可以观看物理运行的测试并检查页面是否休眠。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T15:21:29.823

您是否尝试访问特定页面而不是使用`"..."`? 所以试试`visit '/'`

另外，水豚`visit`在其他测试中是否为您工作？一般来说，它可能没有加载/正常工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T22:22:51.810

看起来这将被搁置....架构已更改，不再需要...感谢您的帮助...

# internet-explorer - iframe 中的表格在 IE7 中呈现更大

> ID：13391063
> 
> 赞同：1
> 
> 时间：2012-11-15T03:17:40.743
> 
> 标签：internet-explorer, iframe, html-table

`<iframe>`在包含表格的奇怪情况下寻求帮助。

[http://past.as/stack](http://past.as/stack)上的实时示例

在所有的 webkit+Firefox 浏览器中，表格都显示得非常好。

![所需外观 - 在 WebKit 和 FF 上](../Images/28294e28baf7a49418ae9be71266d661.png)

但是在 IE7 上，表格在宽度和高度上都更大了，iframe 周围有一个浮雕边框。`<td>`边框之间也有间距。

![在此处输入图像描述](../Images/f7135c14f166561c3466dfad3718aca3.png)

在 IE8 上，我仍然得到奇怪的浮雕边框，但大小还可以。由于某种原因，我也失去了渐变背景。

![IE 8 大小合适，渐变丢失](../Images/de80ee5475eb02d9a32bf8cdf81d597c.png)

我在 IE 上缺少什么让它看起来与 WebKit 和 Firefox 版本完全一样？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T05:40:20.387

我认为旧版本的 IE 需要`frameborder="0"`设置`IFRAME`来摆脱凹陷的边框。他们还`cellspacing`为`TABLE`. 要解决这个问题，您需要设置`TD {border-collapse: collapse; margin: 0px;}`或设置`cellspacing="0"`为`TABLE`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-20T11:50:42.757

就我而言，IE 还为所有图像元素添加了边框。通过删除它并使用 Teemu 的反馈，我解决了这个问题。

# javascript - 错误的参数被传递给函数

> ID：13391064
> 
> 赞同：0
> 
> 时间：2012-11-15T03:17:48.053
> 
> 标签：javascript

我有以下代码将`onmouseover`事件添加到项目符号`onload`

```
for (var i = 0; i <= 3; i++) {
    document.getElementById('menu').getElementsByTagName('li')[i].onmouseover = function () { addBarOnHover(i); };
} 
```

这是它正在调用的函数。当鼠标移到菜单项上时，它应该向菜单项添加一个 css 类。

```
function addBarOnHover(node) {
    document.getElementById('menu').getElementsByTagName('li')[node].className = "current_page_item"; } 
```

调用该函数时，我不断收到错误消息：

> "document.getElementById("menu").getElementsByTagName("li")[node] 未定义"

让我难过的是我在`addBarOnHover`函数中添加了一个 alert(node) 语句来查看参数的值是什么。警报说正在传递的参数的值为 4。我不确定我设置的循环如何发生这种情况。

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T03:22:14.403

当您关闭迭代变量时，这是一个常见问题。将主体包裹`for`在一个额外的方法中以捕获迭代变量的值：

```
for (var i = 0; i <= 3; i++) {
  (function(i){ //here
    document.getElementById('menu').getElementsByTagName('li')[i].onmouseover = function () { addBarOnHover(i); };
  })(i); //here
} 
```

每次进入循环时都会创建一个匿名函数，并将迭代变量的当前值传递给它。`i`匿名函数内部指的是这个函数的参数，而不是`i`外部作用域中的。

为了清楚起见，您还可以重命名内部变量：

```
for(var i=0; i<=3; i++){
  (function(ii){
    //use ii as i
  })(i)
} 
```

在不捕获迭代变量的情况下，`i`最终在匿名处理程序中使用时的值已经更改为`4`. 在外部范围内只有一个`i`，在处理程序的所有实例之间共享。如果您通过匿名函数捕获值，则使用该函数的参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T03:21:34.040

`i`正在作为引用传递（而不是按值传递），因此一旦`onmouseover`调用回调， 的值`i`就已经变为`4`.

您必须使用另一个函数创建回调函数：

```
var menu = document.getElementById('menu');
var items = menu.getElementsByTagName('li');

for (var i = 0; i <= 3; i++) {
    items[i].onmouseover = (function(i) {
        return function() {
            addBarOnHover(i);
        };
    })(i);
} 
```

您可以通过创建一个辅助函数使其更具可读性：

```
var createCallback = function(i) {
    return function() {
        addBarOnHover(i);
    };
};

for (var i = 0; i <= 3; i++) {
    items[i].onmouseover = createCallback(i);
} 
```

# javascript - 如何对主干模型/视图进行排序？

> ID：13391067
> 
> 赞同：2
> 
> 时间：2012-11-15T03:18:00.187
> 
> 标签：javascript, backbone.js

使用 Backbone 保持模型任何视图有序的基本方法是什么？我有一些想法，但并不完全清楚。

我想通过一个名为“created_at”的字段来保持它们的顺序。我知道可以在集合中提供比较器功能，但我不确定它是如何工作的。

我还希望集合中的这个顺序始终反映在视图中（在列表中）。不过，我不确定我在哪里与模型联系在一起。我猜我在索引属性中寻找变化，然后更新 a 以匹配？

非常感谢任何帮助或解释！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T03:58:48.610

当你定义你的集合时，你也定义了比较器。我最近是这样做的：

```
 comparators: {
            id: function(animal) {
              return Number(animal.get("id"));
            },

            d_id: function(animal) {
              return -Number(animal.get("id")); // descending
            },

            name: function(animal) {
              return animal.get("name");
            },

            d_name: function(animal) {
              return String.fromCharCode.apply(String, _.map(animal.get("name").split(""), function (c) {
                    return 0xffff - c.charCodeAt();
                    })
              );
            },
        } 
```

这些我在我的收藏代码中定义。

然后，在渲染我的集合视图时，我只是这样做了（这是在我的视图中呈现整个集合，在`initialize()`：

```
this.collection = new MyCollection();
this.collection.comparator = Collection.comparators[// here I put 'id' or 'd_id' etc. ];
this.collection.sort(); 
```

由于此代码在视图的初始化中，因此您可以在初始化视图时定义比较器，并将比较器的名称传递给它，如下所示：

```
var directory = new pageView("d_id"); 
```

而不是通过`initialize(comparator_id)`你可以在初始化时将它传递给你的代码：

```
this.collection = new MyCollection();
this.collection.comparator = Collection.comparators[comparator_id];
this.collection.sort(); 
```

然后我可以在渲染和重新渲染视图/页面时使用该集合

编辑：

这是[Backbone 的 collection.comarator](http://documentcloud.github.com/backbone/#Collection-comparator)文档，下面是对`sort()`

基本上，比较器可以是模型的属性或返回属性的函数，或者是负属性，如果它是数字，则用于降序排列，或者是字符串或其反向值，用于降序排列，就像我在这里给你的示例一样。

因此，比较器返回一个属性，如“id”或“name”，或“-id”，“-name”等（对于​​字符串，您不能只将其设为“负数”，您需要应用更复杂的函数，正如我所写。）

# silverstripe - 银条。在 modeladmin 中修改 gridfieldconfig 以添加可排序的标题

> ID：13391071
> 
> 赞同：1
> 
> 时间：2012-11-15T03:18:31.903
> 
> 标签：silverstripe

我正在使用 modeladmin 来显示一些事件数据对象。

我在汇总字段中添加了一些列，客户希望能够按照这些列进行排序。目前，默认情况下只有标题是可排序的。是否可以在 modeladmin 中修改 gridfieldconfig？特别是向 GridFieldSortableHeader 添加字段？

这是我的事件数据对象，其中包含我需要能够在模型管理中排序的汇总字段：

```
......
static $summary_fields = array('Title', 'DescriptionSummary', 'EventStartDate', 'EventEndDate', 'EventVenue');

static $field_labels = array('DescriptionSummary' => 'Description', 'EventStartDate' => 'Start Date', 'EventEndDate' => 'End Date', 'EventVenue' => 'Venue');

private $widget;
//TO GET THE SUMMARY FIELD VALUES
public function getEventVenue(){
    if ($eventVenue = $this->Venue()->Title) return $eventVenue;
    return "No Venue specified";
}

public function getEventStartDate(){
    if ($startDate = DataObject::get_one('CalendarDateTime', 'EventID = '.$this->ID)) return $startDate->StartDate;
    return "No start dates specified";
}

public function getEventEndDate(){
    if ($startDate = DataObject::get_one('CalendarDateTime', 'EventID = '.$this->ID)) return $startDate->EndDate;
    return "No end dates specified";
}
.... 
```

和我的活动管理员：

```
class EventAdmin extends ModelAdmin {

    public static $managed_models = array('CalendarEvent', 'Venue', 'EventCategory');
    static $url_segment = 'events';
    static $menu_title = 'Events';

} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-15T21:30:46.900

我刚刚向 doc.silverstripe.org 添加了一些关于如何覆盖编辑表单和访问（[链接](http://doc.silverstripe.org/framework/en/reference/modeladmin#results-customization)）内的 GridField 的信息。相关位（适用于您的用例）：

```
class EventAdmin extends ModelAdmin {
  // ...

  public function getEditForm($id = null, $fields = null) {
    $form = parent::getEditForm($id, $fields);
    $gridField = $form->Fields()->fieldByName($this->sanitiseClassName($this->modelClass));
    $gridField->getConfig()->getComponentByType('GridFieldSortableHeader')
      ->setFieldSorting(array(...));
    return $form;
  }

} 
```

如果您尝试按`CalendarDate`关系和`EventStartDate`字段排序，通常必须覆盖 ModelAdmin 中的结果列表，请参阅[docs](http://doc.silverstripe.org/framework/en/reference/modeladmin#results-customization)。虽然您可以在此处添加必要的连接 ( `DataQuery->leftJoin`)，但无法在查询中选择其他列。因此，默认情况下只允许您排序 `EventStartDate`，而不是通过 UI 重新排序 GridField。它是一个缺失的功能，我们应该真正支持`DataList->sort()`开箱即用的“点符号”。

# image-processing - 模糊图像的自适应阈值

> ID：13391073
> 
> 赞同：17
> 
> 时间：2012-11-15T03:18:59.400
> 
> 标签：image-processing, opencv, threshold

我有一个相当模糊的 432x432 数独拼图图像，它不能很好地自适应阈值（取 5x5 像素块大小的平均值，然后减去 2）：

![在此处输入图像描述](../Images/9f48871e57c9d33eca8ba019b5cc6fe7.png)

可以看到，数字有点扭曲，里面有很多破损，有几个5融合成6，6融合成8。此外，还有大量的噪音。为了修复噪点，我必须使用高斯模糊使图像更加模糊。然而，即使是相当大的高斯核和自适应阈值块大小（21x21，减去 2）也无法消除所有破损并将数字更加融合在一起：

![在此处输入图像描述](../Images/eb91bdc274a49f338d4f8160c5bb12a6.png)

我还尝试在阈值处理后对图像进行扩张，这与增加块大小的效果类似；和[锐化图像](https://stackoverflow.com/questions/4993082/how-to-sharpen-an-image-in-opencv)，这在一种或另一种方式上没有多大作用。我还应该尝试什么？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-12-08T22:41:45.980

一个很好的解决方案是使用形态闭合使亮度均匀，然后使用常规（非自适应）Otsu 阈值：

```
// Divide the image by its morphologically closed counterpart
Mat kernel = Imgproc.getStructuringElement(Imgproc.MORPH_ELLIPSE, new Size(19,19));
Mat closed = new Mat();
Imgproc.morphologyEx(image, closed, Imgproc.MORPH_CLOSE, kernel);

image.convertTo(image, CvType.CV_32F); // divide requires floating-point
Core.divide(image, closed, image, 1, CvType.CV_32F);
Core.normalize(image, image, 0, 255, Core.NORM_MINMAX);
image.convertTo(image, CvType.CV_8UC1); // convert back to unsigned int

// Threshold each block (3x3 grid) of the image separately to
// correct for minor differences in contrast across the image.
for (int i = 0; i < 3; i++) {
    for (int j = 0; j < 3; j++) {
        Mat block = image.rowRange(144*i, 144*(i+1)).colRange(144*j, 144*(j+1));
        Imgproc.threshold(block, block, -1, 255, Imgproc.THRESH_BINARY_INV+Imgproc.THRESH_OTSU);
    }
} 
```

结果：

![在此处输入图像描述](../Images/c229b61c6d2d6124b8512b736238d7fb.png)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-15T10:08:16.277

看看[平滑图像 OpenCV 教程](http://docs.opencv.org/doc/tutorials/imgproc/gausian_median_blur_bilateral_filter/gausian_median_blur_bilateral_filter.html)。除了 GaussianBlur 还有你`medianBlur`也`bilateralFilter`可以用它来减少噪音。我从您的源图像中获得了这张图片（右上角）：

![结果图像](../Images/c4cf0aff00196be723b873f01280906a.png)

**更新：**删除小轮廓后得到以下图像：

![在此处输入图像描述](../Images/ba825a2bdcf2b7d1489b44651411ad56.png)

**更新：**您也可以锐化图像（例如，使用`Laplacian`）。看看[这个讨论](http://answers.opencv.org/question/2934/single-image-depth-map-sharpness-map/)。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-07-31T18:09:15.187

始终应用高斯以获得更好的结果。

```
cvAdaptiveThreshold(original_image, thresh_image, 255,
            CV_ADAPTIVE_THRESH_GAUSSIAN_C, CV_THRESH_BINARY, 11, 2); 
```

# php - codeigniter 获取所有声明的路由

> ID：13391075
> 
> 赞同：10
> 
> 时间：2012-11-15T03:19:33.880
> 
> 标签：php, codeigniter, routes

如何在codeigniter中获取所有声明的路由？像前。print_r($路由)

因为这是问题所在，如果客户将他的用户名注册为“facebook”，他将被路由到 account/facebook_login 而不是他的个人资料，如果我更改了路线的顺序，所有链接都将被路由到客户/个人资料，这是不不不！

所以基本上，我不想列出我声明的所有路由并将其放入另一个数组或数据库表中，而是想循环进入路由数组并检查是否已经声明了一个单词，以便我可以阻止它们注册那个词作为他们的用户名。

这是我的示例路线：

```
// Account routes
$route['login'] = 'account/login';
$route['logout'] = 'account/logout';
$route['register'] = 'account/register';
$route['facebook'] = 'account/facebook_login';
$route['twitter'] = 'account/twitter_login';
$route['settings'] = 'account/settings';

$route['validate/(:any)'] = 'validate/$1';

// Dynamic routes
$route['(:any)'] = 'customer/profile/$1'; 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-11-15T03:39:47.897

从控制器你可以做到这一点

```
print_r($this->router->routes); 
```

它将显示在 routes.php 中定义的所有路由。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T03:53:40.943

首先，我为我的英语感到抱歉，因为“我不是学校”。我没有得到太多你想要指出的东西。也许你想用这个[http://www.hirepinoy.com/born2code](http://www.hirepinoy.com/born2code)做类似的事情。但根据我使用 CodeIgniter 的经验，`$route['(:any)'] = 'customer/profile/$1';`在你的路由中声明是个坏主意。

我认为您可以做的最好的选择是创建一个类以使用 HOOK 检查用户表中是否存在用户名，请参见[http://codeigniter.com/user_guide/general/hooks.html](http://codeigniter.com/user_guide/general/hooks.html)。因此，因此当用户名（唯一字段）返回时，您可以将其修改`$_SERVER['REQUEST_URI']`为这样

```
$_SERVER['REQUEST_URI'] = '/customer/profile/'.$username; 
```

所以基本上它会在codeigniter核心进程之前修改SERVER REQUEST，它是核心处理。

现在，问题可能是，当用户注册的用户名与您的控制器相同时，肯定不会被处理，因为它被修改为 route on `costumer/profile/blahblah`。您需要做的就是创建一个自定义验证来检查用户名是否已存在于数据库和/或您的控制器名称中。

你可以这样做

```
if (file_exists(APPPATH."controllers/{$value}.php")) {
    $this->CI->form_validation->set_message('is_unique', 'Username is already taken');  
    return FALSE;
} 
```

# android - Android ConcurrentModification onDraw()

> ID：13391077
> 
> 赞同：2
> 
> 时间：2012-11-15T03:19:50.233
> 
> 标签：android, concurrency, android-canvas, concurrentmodification

我在使用 android 应用程序时遇到问题。

我有一个线程不断迭代列表或形状，更新它们的位置，有时从列表中删除一个项目。在线程的 while 循环结束时，它调用 postInvalidate() 来提示重绘。

这是对 ArrayList 进行修改的代码。

```
Iterator<Shape> iterator = this.myList.iterator();
while (iterator.hasNext()) {
     Shape nextShape = iterator.next();
     nextShape.move();
     if(condition) {
         iterator.remove()
     }
} 
```

onDraw 方法使用 for each 循环来绘制每个项目。尽管仅通过迭代器修改列表，但我在 onDraw 方法中得到并发修改。我尝试过 CopyOnWriteArrayList 和 Collections.synchronized，结果相同。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T04:32:22.853

有几种方法可以解决这个问题。一种是在线程和 onDraw 中使用同步块，但这会阻止第二个线程与 UI 线程同时运行。

我认为最好的方法是让你使用两个集合。您的代码应如下所示

```
onDraw(){
    synchronized(myList){
        //Do your draw code.  Get the iterator inside this block
    }
}

threadFunction(){
    List threadList;
    while(1){
        //Update threadList, which holds all the objects
        synchronized(myList){
            myList = threadList.copy();  //Do a deep copy, don't just copy over the reference
        }
        postInvalidate();
    }
} 
```

这将使您的绘图函数对迭代结束时创建的列表副本进行操作。如果您正在处理深层副本，则不会遇到任何同步问题，因为线程不会更改同一个列表。同步块将阻止线程在绘制期间覆盖绘制函数的副本。唯一剩下的问题是线程中列表的覆盖将挂起，直到绘制完成，但由于更新它的频率高于屏幕上无论如何都不会显示，我猜这是可以接受的。

# .net - 点之间的笛卡尔XY轴承.Net

> ID：13391079
> 
> 赞同：3
> 
> 时间：2012-11-15T03:20:03.197
> 
> 标签：.net, gis, cartesian, bearing, azimuth

我正在寻找一种方法来计算一个绘图点、像素或屏幕坐标到另一个的方位角或方位角（0-360°）。

我目前有它的距离部分，并且在我上学的时候数学不是最喜欢的科目，我正在寻求帮助。

我见过很多计算纬度和经度的距离和方位的例子，但我只想计算屏幕坐标。稍后，我会将这些转换为纬度/经度。

屏幕坐标起源于（0,0）的顶部/左侧，所以我知道这一点。我还需要能够用鼠标移动“原点”。这是我已经可以轻松做到的事情。部分问题是我是否必须将这些点转换为适当的笛卡尔点（即，点“南”和“西”或“下”和“左”的原点为负值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T03:27:37.927

它类似于 arctan( (x2-x1)/(y2-y1) )

# wpf - 如何在 WPF 中创建一个通用的 IconButton

> ID：13391083
> 
> 赞同：2
> 
> 时间：2012-11-15T03:20:22.770
> 
> 标签：wpf, wpf-controls

这是我的例子，创建一个通用图标按钮，可以在任何地方与不同的图标一起使用。

这是我的步骤：

1）。创建一个从 Button 派生的自定义 IconButton，它具有 DefaultImageSource 依赖属性。这里是：

```
public class IconButton : Button
{
    public static readonly DependencyProperty DefaultImageSourceProperty =
       DependencyProperty.Register("DefaultImageSource", typeof(ImageSource), typeof(IconButton), new FrameworkPropertyMetadata(null));//, new FrameworkPropertyMetadata(OnImageSourceChanged));

    public ImageSource DefaultImageSource
    {
        get { return (ImageSource)GetValue(DefaultImageSourceProperty); }
        set { SetValue(DefaultImageSourceProperty, value); }
    }
} 
```

2）。在项目资源中为 IconButton 创建一个样式，假设将此 IconButton 与此样式一起使用，

```
 <Style x:Key="IconButtonTemplate" TargetType="{x:Type WpfApplication3:IconButton}">                
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type WpfApplication3:IconButton}">
                        <Grid>
                            <Image Source="{Binding RelativeSource={RelativeSource Self}, Path=DefaultImageSource}"  Stretch="Uniform" Width="Auto" Height="Auto" x:Name="imageArt"/>
                            <Ellipse x:Name="focusEllipse" Fill="Transparent"/>
                        </Grid>
                        <ControlTemplate.Triggers>                                
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="focusEllipse" Property="Fill" Value="#AAFFFFFF"/>
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter TargetName="focusEllipse" Property="Fill" Value="#AA808080"/>
                            </Trigger>
                            <Trigger Property="IsEnabled" Value="False">
                                <Setter TargetName="focusEllipse" Property="Fill" Value="#80808080"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style> 
```

3）。在我的 WPF 窗口中创建多个 IconButton，并将它们绑定到不同的图标，但没有运气；打开此窗口时图标不显示，

```
<Grid>

    <DockPanel>

        <WpfApplication3:IconButton Width="30" Height="30" DefaultImageSource="{DynamicResource RefreshIcon}" Style="{DynamicResource IconButtonTemplate}"></WpfApplication3:IconButton>

        <WpfApplication3:IconButton Width="30" Height="30" DefaultImageSource="{DynamicResource RunIcon}" Style="{DynamicResource IconButtonTemplate}"></WpfApplication3:IconButton>
    </DockPanel>
</Grid> 
```

这可能是图像资源绑定错误的问题，但多次尝试无法弄清楚。有什么建议吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T05:51:14.443

我可以在 Binding 中看到问题。使用

```
 <Image Source="{Binding RelativeSource={RelativeSource Self}, Path=DefaultImageSource}"  Stretch="Uniform" Width="Auto" Height="Auto" x:Name="imageArt"/> 
```

使用**自我**模式，您试图将**源**绑定到**图像**控件的**DefaultImageSource**属性。并且**Image**没有任何这样的属性。

 ****试试这个

```
 <Image Source="{TemplateBinding DefaultImageSource}"  Stretch="Uniform" Width="Auto" Height="Auto" x:Name="imageArt"/> 
```

这将尝试将 Image 的Source**绑定****到**Button**的****DefaultImageSource**属性。

 ******我希望这将有所帮助。**********

# c++ - 在make中将库名称作为包含路径的一部分？

> ID：13391085
> 
> 赞同：0
> 
> 时间：2012-11-15T03:20:35.610
> 
> 标签：c++, c, gcc, makefile, gnu-make

假设我在图书馆工作，foo。在我的库源文件中，我想以与我的库用户相同的方式包含标题：

```
#include <foo/bar.hpp>

// code defining bar methods here 
```

例如，在 boost 中，boost 中的其他标头的包含以这种方式完成，例如`<boost/shared_ptr.hpp>`，而不是相对引用的`"../shared_ptr.hpp"`样式。我查看了其他一些库是如何做到这一点的，似乎他们在文件布局中添加了一个冗余目录来实现这一点，例如，boost 代码位于“boost_1_4_1/boost”中，而不仅仅是“boost_1_4_1/”。

如果您已经使用现有布局进行源代码控制，则切换到该方案很烦人。使用 GNU make 进行分层的最佳方式是什么？我唯一的想法是添加一个所有构建目标所依赖的目标，该目标在我的源树中创建一个带有符号链接的隐藏文件夹，并将该隐藏文件夹添加到包含路径中。也许有一种不太容易混淆的方式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T07:41:25.447

你不能为你的 Makefile 使用 INC 选项的 -I gcc 键吗？

海湾合作委员会：

> gcc -c -I/home/joseph/dev/foo/headers

生成文件：

```
INC=-I/home/joseph/dev/foo/headers 
```

在这种情况下，您将只有一个地方可以进行此更改，即 Makefile。

# asp.net-mvc - .OTF 字体未部署到 Azure

> ID：13391086
> 
> 赞同：24
> 
> 时间：2012-11-15T03:20:42.680
> 
> 标签：asp.net-mvc, azure

我在 /images 文件夹中有一个带有 .otf 字体的 MVC 4 应用程序。它可以在我的桌面上运行，但是当我部署到天蓝色时，我在尝试访问 /images/myfont.otf 时得到 404

该字体已将 Build Action 属性设置为“Content”

我怎样才能强制 Azure 接受这个？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2014-01-20T13:08:24.103

您可能需要配置 IIS 以正确处理此文件类型。您可以通过将以下内容添加到 in 中的`<system.webServer>`元素来执行此操作`Web.config`：

```
<staticContent>
    <mimeMap fileExtension=".otf" mimeType="font/otf" />
</staticContent> 
```

更多信息 [http://www.big.info/2013/06/how-to-use-otf-opentype-format-fonts-on.html](http://www.big.info/2013/06/how-to-use-otf-opentype-format-fonts-on.html)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-04-17T14:13:34.290

将以下内容放入`web.config`配置中`system.webServer`：

```
<system.webServer>    
   <staticContent>
       <remove fileExtension=".otf" />
       <mimeMap fileExtension=".otf" mimeType="font/otf" />
    </staticContent>
</system.webServer> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-16T19:30:20.050

HTTP 错误 404 表示在服务器上找不到内容。这确实意味着当您将应用程序部署到 Windows Azure 时，内容不在包中。

正如您在上面建议的那样，您确实将 .OTF 设置为内容，这意味着您要求编译器将其视为静态文件并且不构建它，但是特定文件不会被复制到最终输出文件夹中作为最终文件的一部分CSPKG。您需要将“复制到输出目录”设置为“始终复制”，以便它可以成为 CSPKG 的一部分并部署到 Azure 云服务。

正确设置文件属性并构建应用程序后，您可以手动访问输出文件夹以验证文件是否存在以及您的 CSPKG 是否存在，只需解压缩即可。

![在此处输入图像描述](../Images/3f59161f9ccb8db6957ee6bc84dd9a82.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-12-02T16:35:18.273

对我来说问题是这些文件没有包含在项目中。它们位于正确的文件路径 ( `(project)/Content/fonts/*`) 中，但不被视为项目的一部分（即`*.csproj`文件引用）。解决方案是右键单击字体文件夹并选择该`Include in Project`选项。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2014-04-29T08:34:34.350

我最好的选择是你的 css 中有字体文件的相对路径。

你得到了 403 Forbidden 吗？这可能表明您的文件路径已关闭。

尝试将路径从 ../filename.otf 更改为 /Styles/filename.otf （或任何路径）

# xslt - xslt 排序列表并分配唯一编号

> ID：13391087
> 
> 赞同：1
> 
> 时间：2012-11-15T03:20:44.267
> 
> 标签：xslt, sorting, numbers, unique, assign

XSLT 排序并为每个组分配一个唯一编号：我想在排序后对每个组进行排序并分配一个唯一编号。基于`<Type>`&`<Location>`使用 xslt 进行排序。请参阅下面的预期输入和输出。

输入 XML：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<ns1:Payload xmlns:ns1="http://abcd.ef.com" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
    <ns1:Detail>
        <ns1:ID>141414</ns1:ID>
        <ns1:Type>SS</ns1:Type>
        <ns1:Location>1214</ns1:Location>
    </ns1:Detail>
    <ns1:Detail>
        <ns1:ID>151515</ns1:ID>
        <ns1:Type>MT</ns1:Type>
        <ns1:Location>1215</ns1:Location>
    </ns1:Detail>
    <ns1:Detail>
        <ns1:ID>313131</ns1:ID>
        <ns1:Type>SS</ns1:Type>
        <ns1:Location>1213</ns1:Location>
    </ns1:Detail>
    <ns1:Detail>
        <ns1:ID>123123</ns1:ID>
        <ns1:Type>SS</ns1:Type>
        <ns1:Location>1213</ns1:Location>
    </ns1:Detail>
    <ns1:Detail>
        <ns1:ID>123123</ns1:ID>
        <ns1:Type>MM</ns1:Type>
        <ns1:Location>1213</ns1:Location>
    </ns1:Detail>
    <ns1:Detail>
        <ns1:ID>112233</ns1:ID>
        <ns1:Type>SS</ns1:Type>
        <ns1:Location>1211</ns1:Location>
    </ns1:Detail>
    <ns1:Detail>
        <ns1:ID>112334</ns1:ID>
        <ns1:Type>SS</ns1:Type>
        <ns1:Location>1211</ns1:Location>
    </ns1:Detail>
</ns1:Payload> 
```

输出 XML：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<ns1:Payload xmlns:ns1="http://abcd.ef.com" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
    <ns1:Detail>
        <ns1:ID>112233</ns1:ID>
        <ns1:Type>SS</ns1:Type>
        <ns1:Location>1211</ns1:Location>
        <ns1:MsgGroup>1</ns1:MsgGroup>
    </ns1:Detail>
    <ns1:Detail>
        <ns1:ID>112334</ns1:ID>
        <ns1:Type>SS</ns1:Type>
        <ns1:Location>1211</ns1:Location>
        <ns1:MsgGroup>1</ns1:MsgGroup>
    </ns1:Detail>
    <ns1:Detail>
        <ns1:ID>313131</ns1:ID>
        <ns1:Type>SS</ns1:Type>
        <ns1:Location>1213</ns1:Location>
        <ns1:MsgGroup>2</ns1:MsgGroup>
    </ns1:Detail>
    <ns1:Detail>
        <ns1:ID>123123</ns1:ID>
        <ns1:Type>SS</ns1:Type>
        <ns1:Location>1213</ns1:Location>
        <ns1:MsgGroup>2</ns1:MsgGroup>
    </ns1:Detail>
    <ns1:Detail>
        <ns1:ID>123123</ns1:ID>
        <ns1:Type>MM</ns1:Type>
        <ns1:Location>1213</ns1:Location>
        <ns1:MsgGroup>3</ns1:MsgGroup>
    </ns1:Detail>
    <ns1:Detail>
        <ns1:ID>141414</ns1:ID>
        <ns1:Type>MT</ns1:Type>
        <ns1:Location>1214</ns1:Location>
        <ns1:MsgGroup>4</ns1:MsgGroup>
    </ns1:Detail>
    <ns1:Detail>
        <ns1:ID>151515</ns1:ID>
        <ns1:Type>MT</ns1:Type>
        <ns1:Location>1214</ns1:Location>
        <ns1:MsgGroup>4</ns1:MsgGroup>
    </ns1:Detail>
</ns1:Payload> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T04:02:56.907

即使您的输入 XML 和预期输出之间存在不一致，我也会对此进行尝试。:) 如果我制作的内容不正确，您可以告诉我。

**当这个 XSLT：**

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns:ns1="http://abcd.ef.com" version="1.0">
  <xsl:output omit-xml-declaration="no" indent="yes" />
  <xsl:strip-space elements="*" />

  <xsl:key
    name="kDetail"
    match="ns1:Detail"
    use="concat(ns1:Type, '+', ns1:Location)" />

  <xsl:template match="@*|node()">
    <xsl:copy>
      <xsl:apply-templates select="@*|node()" />
    </xsl:copy>
  </xsl:template>

  <xsl:template match="/*">
    <xsl:copy>
      <xsl:apply-templates
        select="ns1:Detail[
          generate-id() = 
          generate-id(
            key('
              kDetail',
              concat(ns1:Type, '+', ns1:Location)
            )[1]
          )
        ]">    
        <xsl:sort select="ns1:Location" />
      </xsl:apply-templates>
    </xsl:copy>
  </xsl:template>

  <xsl:template match="ns1:Detail">
    <xsl:variable name="vPos" select="position()" />
    <xsl:for-each select="key('kDetail', concat(ns1:Type, '+', ns1:Location))">
      <xsl:copy>
        <xsl:apply-templates />
        <ns1:MsgGroup>
          <xsl:value-of select="$vPos" />
        </ns1:MsgGroup>
      </xsl:copy>
    </xsl:for-each>
  </xsl:template>

</xsl:stylesheet> 
```

**...针对提供的 XML 运行（*我认为*已更正以消除不一致）：**

```
<?xml version="1.0" encoding="UTF-8"?>
<ns1:Payload
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xmlns:ns1="http://abcd.ef.com">
  <ns1:Detail>
    <ns1:ID>141414</ns1:ID>
    <ns1:Type>MT</ns1:Type>
    <ns1:Location>1214</ns1:Location>
  </ns1:Detail>
  <ns1:Detail>
    <ns1:ID>151515</ns1:ID>
    <ns1:Type>MT</ns1:Type>
    <ns1:Location>1214</ns1:Location>
  </ns1:Detail>
  <ns1:Detail>
    <ns1:ID>313131</ns1:ID>
    <ns1:Type>SS</ns1:Type>
    <ns1:Location>1213</ns1:Location>
  </ns1:Detail>
  <ns1:Detail>
    <ns1:ID>123123</ns1:ID>
    <ns1:Type>SS</ns1:Type>
    <ns1:Location>1213</ns1:Location>
  </ns1:Detail>
  <ns1:Detail>
    <ns1:ID>123123</ns1:ID>
    <ns1:Type>MM</ns1:Type>
    <ns1:Location>1213</ns1:Location>
  </ns1:Detail>
  <ns1:Detail>
    <ns1:ID>112233</ns1:ID>
    <ns1:Type>SS</ns1:Type>
    <ns1:Location>1211</ns1:Location>
  </ns1:Detail>
  <ns1:Detail>
    <ns1:ID>112334</ns1:ID>
    <ns1:Type>SS</ns1:Type>
    <ns1:Location>1211</ns1:Location>
  </ns1:Detail>
</ns1:Payload> 
```

**...想要的结果是（我认为）产生：**

```
<?xml version="1.0"?>
<ns1:Payload
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xmlns:ns1="http://abcd.ef.com">
  <ns1:Detail>
    <ns1:ID>112233</ns1:ID>
    <ns1:Type>SS</ns1:Type>
    <ns1:Location>1211</ns1:Location>
    <ns1:MsgGroup>1</ns1:MsgGroup>
  </ns1:Detail>
  <ns1:Detail>
    <ns1:ID>112334</ns1:ID>
    <ns1:Type>SS</ns1:Type>
    <ns1:Location>1211</ns1:Location>
    <ns1:MsgGroup>1</ns1:MsgGroup>
  </ns1:Detail>
  <ns1:Detail>
    <ns1:ID>313131</ns1:ID>
    <ns1:Type>SS</ns1:Type>
    <ns1:Location>1213</ns1:Location>
    <ns1:MsgGroup>2</ns1:MsgGroup>
  </ns1:Detail>
  <ns1:Detail>
    <ns1:ID>123123</ns1:ID>
    <ns1:Type>SS</ns1:Type>
    <ns1:Location>1213</ns1:Location>
    <ns1:MsgGroup>2</ns1:MsgGroup>
  </ns1:Detail>
  <ns1:Detail>
    <ns1:ID>123123</ns1:ID>
    <ns1:Type>MM</ns1:Type>
    <ns1:Location>1213</ns1:Location>
    <ns1:MsgGroup>3</ns1:MsgGroup>
  </ns1:Detail>
  <ns1:Detail>
    <ns1:ID>141414</ns1:ID>
    <ns1:Type>MT</ns1:Type>
    <ns1:Location>1214</ns1:Location>
    <ns1:MsgGroup>4</ns1:MsgGroup>
  </ns1:Detail>
  <ns1:Detail>
    <ns1:ID>151515</ns1:ID>
    <ns1:Type>MT</ns1:Type>
    <ns1:Location>1214</ns1:Location>
    <ns1:MsgGroup>4</ns1:MsgGroup>
  </ns1:Detail>
</ns1:Payload> 
```

# ruby-on-rails - 在 Rails 模型中调用方法提供搜索参数

> ID：13391089
> 
> 赞同：0
> 
> 时间：2012-11-15T03:21:05.250
> 
> 标签：ruby-on-rails, activerecord, model, controller

我有一个带有以下部分的 Rails 控制器：

```
def search
  ...
  @player_to_team_histories = @player_to_team_histories.order(sort_column + " " + sort_direction)
  ... 
```

`sort_column`并且`sort_direction`被定义为 (`@player_to_team_histories`是一个`ActiveRecordAssociation`:

```
private

  def sort_column
    params[:sort] || "players.LastName"
  end

  def sort_direction
    params[:direction] || "asc"
  end 
```

所以从这两个函数返回的文本被插入`order`到`@player_to_team_histories`.

我需要在另一个控制器中复制此搜索功能，因此我已将搜索逻辑移至`PlayerToTeamHistories`模型并将`params`散列作为参数传递给`search`函数。骨架代码：

```
def self.search_results(params)
 ...
  @player_to_team_histories = @player_to_team_histories.order(sort_column(params) + " " + sort_direction(params))
 ... 
```

我尝试在模块中定义`sort_column(params)`and`sort_direction(params)`并不断收到`undefined method or variable sort_columns`错误，因此我将实现移至模型的底部

```
def sort_column(params)
  params[:sort] || "players.LastName"
end

def sort_direction(params)
  params[:direction] || "asc"
end 
```

并且仍然得到未定义的方法错误。我尝试将其简化为：

```
def sort_column
  "players.LastName"
end

def sort_direction
  "asc"
end 
```

但这仍然不起作用（我将对函数的调用更新为没有`params`）。

知道为什么我不能从模型的另一个函数中调用辅助函数吗？

导轨 3.2.1，红宝石 1.9.2

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T03:36:34.983

如果方法在模型中 - 它们是实例方法。您应该将它们称为：

```
def self.search_results(params)
 ...
  @player_to_team_histories = @player_to_team_histories.order(@player_to_team_histories.sort_column + " " + @player_to_team_histories.sort_direction)
 ...
end 
```

# mysql - 更新日期

> ID：13391099
> 
> 赞同：3
> 
> 时间：2012-11-15T03:22:09.567
> 
> 标签：mysql, sql

我有一个 select 语句，它在列中查找该月 9 日的所有日期，无论月份和年份如何：

```
SELECT *
FROM tblhosting
WHERE DAY( nextduedate ) =09 
```

我想将 DAY 更新为 10，但不考虑月份和年份。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T03:23:57.640

```
UPDATE tableName
SET nextduedate = DATE_ADD(nextduedate,INTERVAL 1 DAY) 
WHERE DAY(nextduedate) = 9 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!2/8ad90/1)

资源：

*   [DATE_ADD](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_date-add)
*   [DATE_ADD](http://www.w3schools.com/sql/func_date_add.asp)

# jruby - jruby中的语言环境感知排序规则

> ID：13391100
> 
> 赞同：0
> 
> 时间：2012-11-15T03:22:13.407
> 
> 标签：jruby

我在 ruby​​rep 复制库中找到了一个错误，该错误是由于 Ruby 的排序规则不支持语言环境而导致的。它认为排序时“-”在“a”之前，这是不正确的，至少对于 en_US.UTF-8 语言环境（和 C 语言环境）。

现在数据库正在以适当的语言环境感知方式对这些字符串进行排序，但 ruby​​ 不是。

对于 jruby 新手来说，让语言环境感知字符串比较工作的最简单方法是什么，以便我可以修补此代码？如果有必要，我可以将我想要的语言环境硬编码到代码中。

（如果没有简单的方法，我会放弃 jruby 并使用[这个](https://github.com/k3rni/ffi-locale)库，但我希望有一个 jruby 方法，这样我就可以保持速度优势）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T05:22:03.827

请原谅我的问题，但您认为应该如何*在*UTF-8 中`-`排序？在这个 ASCII 兼容的块中，至少，我希望在. *`a``-``a`*

 *JRuby 力求与 MRI 的行为方式兼容，因此无论 MRI 的行为方式如何，这都是 JRuby 的行为方式。

此外，JRuby 内置了 FFI，因此您可以自由使用您提到的库。*

# data-binding - Bing Maps MapItemsControl 抛出 E_FAIL 异常设置图钉位置

> ID：13391102
> 
> 赞同：0
> 
> 时间：2012-11-15T03:22:43.807
> 
> 标签：data-binding, windows-store-apps, bing-maps

我正在尝试使用 Bing Map SDK 和控件将地图添加到 Windows 8 Store 应用程序。使用这组 Xaml：

```
<Page.Resources>
    <DataTemplate x:Key="LogoTemplate">
        <m:Pushpin m:MapLayer.Position="{Binding Item2}" Text="{Binding Item1}"/>
    </DataTemplate>
</Page.Resources>
...
<m:Map Credentials="{StaticResource BingMapsApiKey}" ZoomLevel="12" HomeRegion="US" Heading="2">
    <m:MapItemsControl x:Name="ListOfItems"
        ItemTemplate="{StaticResource LogoTemplate}"
        ItemsSource="{Binding LocationList}">
    </m:MapItemsControl>
</m:Map> 
```

绑定到视图模型的这个属性：

```
public IEnumerable<Tuple<string, Bing.Maps.Location>> LocationList
{
    get
    {
        if (MapLocation != null)
        {
            return new List<Tuple<string, Bing.Maps.Location>>
            {
                new Tuple<string, Bing.Maps.Location>("1", new Bing.Maps.Location(MapLocation.lat, MapLocation.lng))
            };
        }

        return Enumerable.Empty<Tuple<string, Bing.Maps.Location>>();
    }
} 
```

`HResult`它始终与Bing 地图中的 COM 组件中的 E_FAIL 不同。在调试器输出窗口中显示此消息：

```
WinRT information: Failed to assign to property 'Bing.Maps.MapLayer.Position' 
```

纬度和经度是有效点。我很难过，看不出有什么不同的做法。互联网上关于 Bing Maps 控件的 App Store 版本的信息非常少，所以我希望有人能让它工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T21:28:55.510

以防万一其他人遇到此问题（或者在将此控件的 Windows 存储版本集成到 MVVM 模型时遇到困难），看起来解决方案是将控件包装在可绑定版本中。到目前为止，我使用[了这个代码形式的 codeplex](http://bindablemaprt.codeplex.com/)并取得了一些成功。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-26T10:36:30.290

根本不可能将数据绑定`MapLayer.Position`到`Location`对象，但您可以数据绑定`Latitude`和`Longitude`：

```
<m:Pushpin Text="{Binding Item1}"/>
    <m:MapLayer.Position>
        <m:Location Latitude="{Binding Item2.Latitude}" Longitude="{Binding Item2.Longitude}" />
    </m:MapLayer.Position>
</m:Pushpin> 
```

# javascript - 使用JS计算div高度

> ID：13391114
> 
> 赞同：1
> 
> 时间：2012-11-15T03:24:10.930
> 
> 标签：javascript, jquery, css

我正在使用一些 javascript 来计算页面的高度，然后在 div 上设置最小高度。这样做的原因是将页脚推到页面底部的内容不足的页面。我的问题是最小高度大约是 30-40 像素，从而导致滚动条。（注意：由于各种原因，我没有使用像粘页脚这样的解决方案，我更喜欢这个解决方案。）

这是我的代码：

***JS***

```
$(function() {
  var height = $(window).height() - ($("header").outerHeight() + $("footer").outerHeight() );
 $("#page-content").css("min-height",height+"px");
}); 
```

***HTML***

```
 <header class="container">
 <div id="menu" class="row">
   <!-- Content -->
 </div>
</header>

<div id="page-content">
  <!-- Content --> 
</div>

<footer>
  <!-- Content --> 
</footer> 
```

我相信问题出在我的 CSS 上。例如，我在标题中有一个边距，如下所示：

```
#menu{
 margin: 5px auto 10px;
} 
```

如果我删除该代码，它将稍微减少滚动条。（我在页面上设置了其他边距，因此仅更改这一边距将无法解决）。

我将如何重写 JS 代码以考虑页眉和其他部分的边距？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T03:42:15.603

盒子的`<header>`高度不反映 child`#menu`的边距，因为它们都是普通的盒子元素，如果`#page-content`有边距，它们将与 的`#menu`边距重叠，在这种情况下，标题的高度将包括内容高度的一部分，这没有意义。

问题是边距折叠：[http ://www.w3.org/TR/css3-box/#collapsing-margins](http://www.w3.org/TR/css3-box/#collapsing-margins)

正如该页面所解释的，您可以通过以下几种方式告诉浏览器不要折叠边距：

*   添加`display: inline-block;`到您的`#menu { }`规则中（我的第一个建议）
*   添加`overflow: hidden;`到您的`header { }`（如果您遇到对齐问题，可能是更好的建议）
*   使您的`<header>`绝对定位，或浮动它。或者对`#menu`内部进行。

或者，如果您想进行黑客攻击，您可以手动计算标题高度：

```
var header_height = $("header").outerHeight() +
   parseInt($("header").children().css('margin-top'), 10) +
   parseInt($("header").children().css('margin-bottom'), 10); 
```

现在我想起来了，这是有道理的，我认为 css 规范正在做正确的事情。

更新：http: [//jsfiddle.net/HzBSz/2/](http://jsfiddle.net/HzBSz/2/)

另请参阅：[外部元素边距不等于内部元素边距](https://stackoverflow.com/questions/12431434/outer-element-margin-not-equal-to-inner-element-margin)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T00:38:51.173

由于某种原因，JS 没有计算边距。我添加了页眉和页脚中的边距，它们总计 45 像素。因此脚本现在看起来像这样：

```
$(function() {
  var height = $(window).height() - ($("header").outerHeight() + 
               $("footer").outerHeight() + 45   ); 
  $("#page-content").css("min-height",height+"px"); 
}); 
```

我添加了 45px，脚本现在可以正常运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T03:37:37.950

为什么不手动将页脚放在底部？我的意思是，我知道你说过你不愿意，但为什么呢？如果您希望它始终存在，请执行

```
position:relative;
bottom:0; 
```

如果您希望它与页面的其余部分一起滚动（听起来像是），请使用

```
position:absolute; 
```

反而。这是一种比动态插入虚拟内容来推动页脚更好的方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-15T04:17:40.620

也许你看看这个 [http://matthewjamestaylor.com/blog/keeping-footers-at-the-bottom-of-the-page](http://matthewjamestaylor.com/blog/keeping-footers-at-the-bottom-of-the-page) 可能会解决你的问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-15T05:32:17.103

**为所有元素尝试 .outerHeight(true) 而不是 .height() 或 .outerHeight()：**

```
$(function() {
  var height = $(window).outerHeight(true) - ($("header").outerHeight(true) + $("footer").outerHeight(true) );
 $("#page-content").css("min-height",height+"px");
}); 
```

.height() - 返回元素的高度，不包括内边距、边框和边距。

.innerHeight() - 返回元素的高度，包括填充但不包括边框和边距。

.outerHeight() - 返回 div 的高度，包括边框但不包括边距。

.outerHeight(true) - 返回 div 的高度，包括边距。

# mysql - Mysql查询不同+多个

> ID：13391115
> 
> 赞同：0
> 
> 时间：2012-11-15T03:24:13.007
> 
> 标签：mysql, sql, join

我想做这个查询：

```
SELECT * 
   FROM user k
   INNER JOIN (
      SELECT id, tagName, b.guid, name, owner, publicKey
         FROM noteTags a
         INNER JOIN (
            SELECT * 
            FROM note
            ORDER BY guid
            LIMIT 0 , 12
         )b ON a.guid = b.guid ORDER BY b.id DESC
   )l ON k.owner = l.owner 
```

但我希望它返回 DISTINCT b.guids。

表结构：

```
note
|
|=id
|=name
|=guid
|=owner
|=publicKey

noteTags
|
|=guid
|=tagName

user
|
|=owner
|=username
|=auth 
```

基本上我想选择所有数据（对更深的内部连接有限制）并返回 DISTINCT guid

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T05:32:25.113

怎么样：

SELECT *
FROM user k
INNER JOIN (
SELECT id, tagName, b.guid, name, owner, publicKey
FROM noteTags a
INNER JOIN (
select id, name, MIN(guid) as guid, owner, publicKey
FROM note
GROUP BY guid
LIMIT 0 , 12 )b ON a.guid = b.guid ORDER BY b.id DESC
)l ON k.owner = l.owner

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T03:49:56.033

这是我最初的回答，

```
SELECT  *
FROM    note a
        INNER JOIN user b
            ON a.owner = b.owner
        INNER JOIN notetags c
            ON a.guid = b.guid
        INNER JOIN
        (
            SELECT guid, MAX(tagName) maxTag
            FROM notetags
            GROUP BY guid
        ) d ON c.guid = d.guid AND
                c.tagName = d.maxTag 
```

# css - IE9 损坏的视频标签

> ID：13391117
> 
> 赞同：2
> 
> 时间：2012-11-15T03:24:30.900
> 
> 标签：css, html

这是我使用的代码。

```
<video width="320" height="240" controls="controls">
    <source src="something.mp4" type="video/mp4">
    Your browser does not support the video tag.

</video> 
```

它显示了一个中间有红色 X 的黑框。有人建议简单地将以下行添加到我的 .htaccess 以使 .MP4 在 IE9 中工作：AddType video/mp4 .mp4 唯一的问题是我不知道 .htaccess 是什么而且我不认为我的页面在（或者我没有一）。

请帮帮我谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T03:48:49.513

有关 HTML5 视频的信息，请参阅[此页面](http://www.w3schools.com/html/html5_video.asp)。请注意，除了您已有的视频格式之外，Internet Explorer 还需要其他视频格式。此外，单击那里的“检查”按钮 - 这将告诉您 IE9 是否支持视频标签 - 很可能它不支持。

关于 .htaccess - 现在忽略它。奇怪的是，如果你不知道它是什么，你没有覆盖默认值，你应该没事。

最后，文件是否存在于 './something.mp4' 中？如果是这样，您是否有一个您知道有效的视频播放器插件？这也可能是问题所在。

# macos - 如何使代理在系统会话中工作？

> ID：13391118
> 
> 赞同：0
> 
> 时间：2012-11-15T03:24:31.477
> 
> 标签：macos, daemon, agent

我正在尝试一个需要连接到窗口服务器的后台程序，这在守护程序中是不允许的。但是可能工作非常适合在守护进程执行的 [System] 会话中完成。

我试图设置代理的会话。（默认为 Aqua）

```
LimitLoadToSessionType: System 
```

但它没有用..是错的吗？我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T03:25:27.713

可能是 [LoginWindow] + [Aqua] 可以匹配正确的会话。但是在两个会话之间，程序需要关闭并重新启动。

# nhibernate - NHibernate CreateCriteria with Restrictions 无法按预期工作

> ID：13391124
> 
> 赞同：0
> 
> 时间：2012-11-15T03:25:20.293
> 
> 标签：nhibernate, fluent-nhibernate, hibernate-onetomany, createcriteria

下面给出的代码示例是检索所有活动记录。

```
session.CreateCriteria<VesselMasterData>()
                        .CreateAlias("BasicInfo", "bsInfo")
                        .CreateAlias("DimentionInfo", "diInfo")
                        .Add(Restrictions.Eq("IsActive", 1))
                        .Add(Restrictions.Eq("diInfo.IsActive", 1))
                        .Add(Restrictions.Eq("MasterDataID", masterDataID))
                        .Add(Restrictions.Eq("bsInfo.IsActive", 1))
                        .List<VesselMasterData>() 
```

父表 VesselMasterData 和子表是 BasicInfo 和 DimentionInfo。基于查询的预期值应该是 BasicInfo 和 DimentionInfo 的所有活动记录。

但在输出中，我从 BasicInfo 和 DimentionInfo 中获取所有记录。可能是什么问题。

这是 VesselMasterData 表的映射。

```
public class VesselMasterDataMap : ClassMap<VesselMasterData>
    {
        public VesselMasterDataMap()
        {
Table("VPD_VESSEL_MASTER_DATA");
            Schema("APPLN1");
            Id(x => x.MasterDataID).Column("MASTER_DATA_ID").GeneratedBy.Sequence("VPD_VESSEL_MASTER_DATA_SEQ");
            Map(x => x.VesselCode).Column("VESSEL_CODE");
            Map(x => x.IsActive).Column("IS_ACTIVE");
HasMany<VesselBasicInfo>(prop => prop.BasicInfo)
                    .KeyColumns.Add("MASTER_DATA_ID").Cascade.SaveUpdate().Inverse().Not.LazyLoad();
            HasMany<VesselDimension>(prop => prop.DimentionInfo)
                    .KeyColumns.Add("MASTER_DATA_ID").Cascade.SaveUpdate().Inverse().Not.LazyLoad();
        }
   } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T03:31:52.010

用于`Restrictions.And`将连接条件添加为：

```
 session.CreateCriteria<VesselMasterData>()
              .CreateAlias("BasicInfo", "bsInfo")
              .CreateAlias("DimentionInfo", "diInfo")
              .Add(Restrictions.And(
                     Restrictions.Eq("IsActive", 1),
                     Restrictions.And(
                         Restrictions.Eq("diInfo.IsActive", 1),
                         Restrictions.And(
                              Restrictions.Eq("MasterDataID", masterDataID),
                              Restrictions.Eq("bsInfo.IsActive", 1)
                         )
                     )
                  )
               ).List<VesselMasterData>() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T04:08:14.700

这按预期的方式工作，但期待获得等效的 CreateCriteria 代码。

```
 session.CreateQuery(string.Format("from VesselMasterData vm inner join fetch 
vm.AcquisitionInfo acq inner join fetch vm.BasicInfo bi inner join fetch 
vm.DimentionInfo di inner join fetch vm.SaleInfo si 
where vm.MasterDataID={0}  and bi.IsActive = 1 and di.IsActive = 1 ", masterDataID)).Future<VesselMasterData>(); 
```

# java - 为什么 InputMap 方法不直接将击键对象映射到动作对象？

> ID：13391126
> 
> 赞同：2
> 
> 时间：2012-11-15T03:25:27.807
> 
> 标签：java, swing, event-handling, key-bindings

为什么我们必须使用额外的对象`ActionMap`？
什么意思？

以此为例：

```
imap.put(KeyStroke.getKeyStroke("ctrl Y"), "panel.yellow");

ActionMap amap = panel.getActionMap();

amap.put("panel.yellow", yellowAction); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T04:11:15.957

如本[例](https://stackoverflow.com/a/13366367/230513)所示，an 将`InputMap`a与标识对应`KeyStroke`的抽象*名称*`Action`相关联。使用该`ActionMap`名称作为调用特定`Action`实例`actionPerformed()`方法的键。作为一个具体的例子，这[`ScrollTimer`](https://stackoverflow.com/a/7203419/230513)使用`ActionMap`a`JScrollPane`按名称查找操作并在不直接访问实现的情况下使用它们。

附录：抽象旨在支持[此处描述的](http://docs.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html)[“可插拔外观”](http://docs.oracle.com/javase/7/docs/api/javax/swing/JComponent.html)（L&F）架构。

# java - Java中范围有限的类型变量

> ID：13391135
> 
> 赞同：3
> 
> 时间：2012-11-15T03:27:09.380
> 
> 标签：java, generics

我想知道是否可以在 Java 的方法范围内引入类型变量。也就是说，将它们的范围限制在方法主体内。

但是，与其试图抽象地描述问题，不如让我用我的具体问题来说明。我有几个看起来有点像这样的类：

```
public class Settings {
    public static abstract class Setting<T> {
        public T value;
        public abstract T fallbackvalue();
    }

    private final List<Setting<?>> settings;
} 
```

我现在想编写一个函数 in `Settings`，用于将所有设置的值设置为抽象方法提供的备用值。我的第一个想法是这样做：

```
public void reset() {
    for(Setting<?> setting : settings)
        setting.value = setting.fallbackvalue();
} 
```

然而，再想一想，为什么这不起作用是相当明显的。for setting.value的捕获与`<?>`for 的捕获不同`setting.fallbackvalue()`。因此，我需要一些方法来统一捕获。可以*这样*解决：

```
private static <T> void reset1(Setting<T> s) {
    s.value = setting.fallbackvalue();
}

public void reset() {
    for(Setting<?> setting : settings)
        reset1(setting);
} 
```

显式类型变量`<T>`for`reset1`方便地统一捕获，但仅仅为了满足类型系统，引入这个函数，污染命名空间，混乱屏幕，降低代码可读性，显然是世界上最丑陋的事情。

有没有办法我可以在体内做到这一点`reset`？我想做的就是这样：

```
public void reset() {
    for(Setting<?> setting : settings) {
        <T> {
            Setting<T> foo = setting;
            foo.value = foo.fallbackvalue();
        }
    }
} 
```

这不是世界上最漂亮的东西，但至少在我看来，它远没有上面的变体那么紧张。唉，这是不可能的；但是有什么可能呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T03:47:56.123

如果不更改代码的其他方面，就无法按照您的要求进行操作。但是（为了解决您的特定问题），您可以`reset`在内部`Setting`类中编写一个方法：

```
public void reset() {
    value = fallbackvalue();
} 
```

那么你的循环（在类的`reset`方法中`Settings`）将只是：

```
for (Setting<?> setting : settings)
    setting.reset(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T04:13:04.817

不...

尽管通配符捕获确实引入了新的类型变量，但它们仅对编译器可用；程序员无法直接访问它们。

目前，只有类/方法可以引入类型变量。因此，将带通配符的表达式类型转换为不带通配符的类型的唯一方法是通过方法（或具有菱形推断的构造函数，`new Foo<>(setting)`其本质上是相同的机制）传递表达式

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-15T09:43:38.003

你`reset1`的事情是普遍接受的方式。它被称为“捕获助手”，是泛型中经常引用的模式。它通常出现在以下情况：

```
public void swap(List<?> list, int i, int j) { // swap elements i and j of the list
    // how to write?
} 
```

在这种情况下，您既需要从参数化类型中获取一些东西，又需要将一些东西放回该类型。通配符不会让你这样做。这就像您的情况一样，因为您也需要取出一些东西并放入一些东西。我们知道类型必须相同，但通配符太弱而无法强制执行。只有显式类型变量才能让我们这样做：

```
public <T> void swap(List<T> list, int i, int j) {
    T tmp = list.get(i);
    list.set(i, list.get(j));
    list.set(j, tmp);
} 
```

但是，我们不希望`<T>`只在参数列表中的一个地方使用这种无关紧要的东西。对外界来说，`swap(List<?> list, int i, int j)`应该工作得很好。我们需要使用这个`<T>`类型参数是一个没有人需要知道的实现细节。因此，为了隐藏它，我们用带有通配符的函数包装了通用函数：

```
private <T> void swap_private(List<T> list, int i, int j) { ... }
public void swap(List<?> list, int i, int j) {
    swap_private(list, i, j);
} 
```

这似乎是一种浪费，但事实就是如此。

鉴于您的情况与此情况相似，并且捕获助手是这种情况下的规范解决方案这一事实，我可以自信地告诉您，不，没有更好的方法可以做到这一点。

# php - 将 MySQL 查询结果合并到单个记录中

> ID：13391138
> 
> 赞同：1
> 
> 时间：2012-11-15T03:27:34.200
> 
> 标签：php, mysql, wordpress

我正在尝试找到一种构建 SQL 查询的方法。我需要的数据在两个表中，包含 3 条记录，但我需要以某种方式返回它，以便以后可以将其作为 1 条记录插入到表中。该查询将在 PHP 中使用，因此我也愿意使用它。这是我所拥有的：

```
SELECT ID, meta_key, meta_value
FROM wp_posts
INNER JOIN wp_postmeta
    ON wp_posts.ID = wp_postmeta.post_id
WHERE post_status = 'publish'
AND post_date >= CURDATE()
AND post_type IN ('tribe_events', 'tribe_organizer', 'tribe_venue')
AND meta_key IN ('_EventStartDate', '_EventEndDate', '_OrganizerOrganizer', '_OrganizerWebsite', '_VenueAddress', '_VenueCity', '_VenueState', '_VenueZip') 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T04:04:56.893

尝试使用单个匹配进行自联接，即，而不是使用

```
 WHERE post_type IN (val1, val2, val3) 
```

请执行下列操作

```
 INNER JOIN
       ... ON table2.post_type = val2
 INNER JOIN
       ... ON table3.post_type = val3
 etc.
 WHERE table1.post_type = val1 
```

或任何工作。你明白了。我不知道你的架构，也不能给你一个更具体的例子。

# java - 在 Java 中调用超类的构造函数中的抽象方法

> ID：13391140
> 
> 赞同：4
> 
> 时间：2012-11-15T03:27:37.800
> 
> 标签：java, inheritance, abstract-class

既然子类还没有构造，那么在超类构造函数中调用抽象方法是不是不安全呢？

但是，如果方法的行为不依赖于子类的构造，例如只返回一个关于子类的常量，它是否仍然不安全或者它会可靠地工作？

此外，如果它有效，如果我不想使超类抽象怎么办？

**更新：最后一个问题**

```
public class SuperClass {
      public SuperClass() {
          System.out.println(getValue());
      }   

      public String getValue() {
          return "superclass";
      }   

      public static void main(String[] args) {
           new SubClass();
      }

}

class SubClass extends SuperClass {
      public SubClass() {
           super(); // Comment out this or not  will not affect the result
      }   

      public String getValue() {
           return "subclass";
       }   
} 
```

我写了一个测试，并弄清楚：结果是：`subclass` 感谢@Tim Pote的例子。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T03:31:21.130

它通常（尽管不一定）被认为是不安全的。正如您所说，超类可能没有完全构造，因此不会准备好处理子类可能在其重写方法中进行的所有调用。

但是，如果*所有*子类都简单地返回一个不依赖于任何其他方法的常量，那么它应该没问题。唯一的缺点是您不能保证子类会以适当的方式覆盖该方法。

关于您的最后一个问题：这不是抽象与具体超类的问题。这是在构造函数中调用可覆盖方法的问题。抽象与具体是无关紧要的。

* * *

**根据OP的评论进行编辑**

我不确定您所说的“多态”是什么意思。调用虚方法总是调用最底层的实现。唯一一次调用超类实现是通过`super`关键字。例如：

```
public class SuperClass {
  public SuperClass() {
    System.out.println(getValue());
  }   

  public String getValue() {
    return "superclass";
  }   

  public static void main(String[] args) {
    new SubClass();
  }   

  public static class SubClass extends SuperClass {
    public String getValue() {
      return "subclass";
    }   
  }   
} 
```

打印`subclass`。

还有这个：

```
public class SuperClass {
  public SuperClass() {
    System.out.println(getValue());
  }   

  public String getValue() {
    return "superclass";
  }   

  public static void main(String[] args) {
    new SubClass();
  }   

  public static class SubClass extends SuperClass {
    public String getValue() {
      return super.getValue() + " subclass";
    }   
  }   
} 
```

印刷`superclass subclass`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T03:34:45.670

正如其他人所解释的那样，在超类构造函数中调用抽象方法存在固有风险。

我发现的一个例外是当子类提供一些“恒定”信息时，例如`getId()`，`getHandledMessages()`等等。

# url - mod_rewrite 多变量

> ID：13391142
> 
> 赞同：0
> 
> 时间：2012-11-15T03:27:47.227
> 
> 标签：url, variables, mod-rewrite

目前我的网址正在`mysite.com/content`使用：

```
RewriteRule ^page.php/([A-Za-z0-9]+)/?$ page.php?a=b&content=$1 [L] 
```

我想让我的网址成为`mysite.com/content/page`内容和页面都是变量的地方。我认为这样的事情可以工作，但显然这是错误的：

```
RewriteRule ^page.php/([A-Za-z0-9]+)/?$/([A-Za-z0-9]+)/?$ page.php?a=b&content=$1&page=$2 [L] 
```

实现这一目标的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T05:26:42.553

```
RewriteRule ^page.php/([A-Za-z0-9]+)/([A-Za-z0-9]+)/?$ page.php?a=b&content=$1&page=$2 [L] 
```

试试这个，让我知道这是否是你想要做的。

# ruby-on-rails - rails rake routes 他们从哪里来

> ID：13391143
> 
> 赞同：12
> 
> 时间：2012-11-15T03:27:47.217
> 
> 标签：ruby-on-rails, routes, ruby-on-rails-3.1

当您键入

```
 rake routes 
```

一堆路由出来了，但是它们在哪里定义？？？

我知道有些是默认的，而其他的呢？

例如，这是来自控制器的脚本，我试图从 do_something 中删除“s”，但无法使其工作......它们是否也在其他地方定义？另外，他们什么时候接受参数，什么时候不接受，我怎么知道？谢谢！

```
def hello
  redirect_to do_things_shop_path(shop)
end

def do_things
end 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-11-15T03:48:40.137

Rails 路由配置保存在`config/routes.rb`文件中。

取参数取决于很多事情。`rake routes`将显示带有参数的路由。成员操作将采用参数。

```
posts    GET        /posts(.:format)          posts#index
         POST       /posts(.:format)          posts#create
edit_post GET       /posts/:id/edit(.:format) posts#edit 
```

在最后一行，你会像`posts/:id/edit`. 此路径需要`:id`参数。您可以通过多种方式调用此路线。其中之一是：

```
edit_post_path(@post) 
```

如果你想创建一个自定义动作，（比如在帖子控制器下），你可以声明它如下：

```
match `/posts/:id/things_with_id`, :to => 'posts#do_things_with_id', :as => 'do_things_with_id
match `/posts/things_without_id`, :to => 'posts#do_things_without_id', :as => 'do_things_without_id 
```

第一个需要身份证，第二个不需要。相应地调用它们：

```
do_things_with_id_path(@post)

do_things_without_id() 
```

对于资源，您可以使用成员和集合操作轻松创建这些资源。成员操作需要 id 而收集操作不需要。

```
resources :posts do 
  member { get 'do_thing' }
  collection { get do_things' }
end 
```

希望你明白了。

顺便说一句，如果您想清楚地理解这些内容，则必须阅读以下指南。 [http://guides.rubyonrails.org/routing.html](http://guides.rubyonrails.org/routing.html)

# objective-c - 5种Magical Record设置方法有什么区别？

> ID：13391146
> 
> 赞同：18
> 
> 时间：2012-11-15T03:28:11.537
> 
> 标签：objective-c, ios, database, core-data, magicalrecord

任何人都可以对 5 种设置方法中的每一种进行描述吗？

```
(void) setupCoreDataStack;
(void) setupAutoMigratingDefaultCoreDataStack;
(void) setupCoreDataStackWithInMemoryStore;
(void) setupCoreDataStackWithStoreNamed:(NSString *)storeName;
(void) setupCoreDataStackWithAutoMigratingSqliteStoreNamed:(NSString *)storeName; 
```

他们每个人都做什么，每个人的用例是什么？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-11-15T03:41:36.730

```
setupCoreDataStack 
```

当您刚开始使用 MagicalRecord 时使用它。正如方法所述，这将设置您的默认核心数据堆栈。堆栈的各个部分是众所周知的，包括：NSPersistentStore、NSPersistentStoreCoordinate、NSManagedObjectModel 和一个默认的 NSManagedObjectContext。为了使 Core Data 正常工作，必须至少对其中的每一个进行实例化和配置。MagicalRecord 提供了这种单一方法来使用位于 /Library/Application Support//.sqlite 中的 SQLite 持久存储来配置堆栈

```
setupAutoMigratingDefaultCoreDataStack 
```

当您对模型进行版本化时，您将需要迁移数据。此方法将与之前的（以上）方法执行相同的操作，但也会启用自动迁移。

```
setupCoreDataStackWithInMemoryStore; 
```

有时，例如当您编写单元测试时，您希望您的数据在应用程序终止时消失。此方法还将设置一个 CoreData 堆栈（如上所述），但它不是 SQLite 存储，而是在系统内存 (RAM) 中创建一个持久存储。

```
setupCoreDataStackWithStoreNamed:(NSString *)storeName 
```

有时您想自定义数据所在的文件名。此方法与第一种方法相同，即设置核心数据堆栈，并在特定位置放置一个 SQLite 存储，但存储名为 storeName.sqlite，而不是 .sqlite

```
setupCoreDataStackWithAutoMigratingSqliteStoreNamed:(NSString *)storeName 
```

这与上述方法相同，但也启用了自动迁移。当您对模型进行版本化并进行简单的迁移时，您需要执行此操作，只需启用即可。

[您可以在Apple 的核心数据参考文档](http://developer.apple.com/library/mac/#documentation/cocoa/conceptual/CoreDataVersioning/Articles/Introduction.html)中阅读有关核心数据迁移的更多信息

# android - 当我单击一个列表视图项目并更改其背景时，为什么它不起作用？

> ID：13391147
> 
> 赞同：0
> 
> 时间：2012-11-15T03:28:24.383
> 
> 标签：android, android-listview

以下是我的源代码，

我也试过了`isPressed`，`isClicked`但是还是不行。

```
public View getView(int position, View convertView, ViewGroup parent) {
    if (convertView == null) {
        // This a new view we inflate the new layout
        LayoutInflater inflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        convertView = inflater.inflate(R.layout.my_item_layout, parent, false);
    }
    MyItem myItem = getItem(position);

    TextView direction = (TextView) convertView.findViewById(R.id.direction);
    direction.setText(myItem .getDirection());

    if(convertView.isSelected()){
        convertView.setBackgroundResource(R.drawable.list_select_bar);
        setTextColor(convertView, textIDs , R.color.white);
    }else{
        convertView.setBackgroundResource(R.color.light_white);
        setTextColor(convertView, textIDs , R.color.black);
    }

    return convertView;
} 
```

实际上，如果我删除了 convertView 检查块，我只需要在 listview 上注册一个 onItemClickListener ......但如果我这样做，似乎会使 getView 方法毫无意义。我在这个问题上很挣扎。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T04:02:52.903

`getView`仅在呈现列表视图时调用。选择或单击项目时不会调用它。

可能你需要的是使用`convertView.setOnFocusChangeListener`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T04:10:55.110

`getView()`创建（或重新创建）一个不可见的视图。因此，无法选择、按下或单击像这样的新视图。

我相信你想要一个[Color State Selector](http://developer.android.com/guide/topics/resources/color-list-resource.html)。

* * *

（来自上面的链接）XML 文件保存在`res/color/button_text.xml`：

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_pressed="true"
          android:color="#ffff0000"/> <!-- pressed -->
    <item android:state_focused="true"
          android:color="#ff0000ff"/> <!-- focused -->
    <item android:color="#ff000000"/> <!-- default -->
</selector> 
```

此布局 XML 会将颜色列表应用于视图：

```
<Button
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="@string/button_text"
    android:textColor="@color/button_text" /> 
```

或者您可以对 ListViews、GridViews 等使用类似的方法和[ListView 状态选择器。](http://developer.android.com/guide/topics/resources/drawable-resource.html#StateList)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T06:49:28.827

我假设您希望仅当您将手指放在行上时才更改背景颜色并在您松开时更改回来？为此，只需将 OnTouchListener 添加到您的行项目。

```
convertView.setOnTouchListener(new OnTouchListener() {
    @Override
    public boolean onTouch(View v, MotionEvent event) {
        if (event.getAction() == MotionEvent.ACTION_DOWN) {
            convertView.setBackgroundResource(R.drawable.list_select_bar);
        } else if (event.getAction() == MotionEvent.ACTION_UP 
                || event.getAction() == MotionEvent.ACTION_CANCEL) {
            convertView.setBackgroundResource(R.color.light_white);
        }
        return false;
    }
); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-15T10:53:44.840

首先，我很感激 Sam 给了我这么有用的提示。以下是我的解决程序。

编写一个选择器文件，下面是它的内容。然后将此 list_background.xml 放入可绘制文件夹

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">
<item android:drawable="@drawable/list_select_bar" android:state_pressed="true"/><!--pressed -->
<item android:drawable="@color/light_white"/><!-- default --></selector> 
```

然后在您的项目布局 xml 中，使用这样的 list_background ：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android" 
```

... android:background="@drawable/list_background" ... >

就是这样。源代码中没有调用点击监听器或其他方法。

# android - 无法均匀缩放 9patch 图像

> ID：13391150
> 
> 赞同：2
> 
> 时间：2012-11-15T03:28:36.753
> 
> 标签：android, android-layout, android-widget, png, nine-patch

我正在尝试制作一些简单的 9patch PNG 照片以用于`ImageButton`视图，但是它们没有正确缩放。例如，这是我正在使用的 9patch PNG 图像：

![在此处输入图像描述](../Images/f8a1f644bf44557e5a07bfdc4d72b98b.png)

**然而，这是它的扩展方式：**

![在此处输入图像描述](../Images/0427715cc81b0e447844ac372913b540.png)

**这是我的按钮 XML：**

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="wrap_content"
android:orientation="horizontal"  >

<ImageButton
    android:id="@+id/add_challenge1"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_weight="1"
    android:background="@drawable/lockedbutton1"
    android:onClick="add1" />

<ImageButton
    android:id="@+id/add_challenge2"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_weight="1"
    android:background="@drawable/lockedbutton1"
    android:onClick="add2" />

<ImageButton
    android:id="@+id/add_challenge3"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_weight="1"
    android:background="@drawable/lockedbutton1"
    android:onClick="add3" />

<ImageButton
    android:id="@+id/add_challenge4"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_weight="1"
    android:background="@drawable/lockedbutton1"
    android:onClick="add4" />

<ImageButton
    android:id="@+id/add_challenge5"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_weight="1"
    android:background="@drawable/lockedbutton1"
    android:onClick="add5" />                          
</LinearLayout> 
```

我真的不确定为什么图像会随着内容（锁）的缩放而向右比向左更远，而不是均匀地拉伸并将锁保持在中心。关于为什么会发生这种情况的任何想法？谢谢一堆任何人都可以提供一些帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T03:38:03.963

将锁定图像从 9-patch 中取出，用 lock 制作一个单独的 PNG，然后用它`android:src`来定义它。居中按钮使用`android:layout_gravity=center`。

# html - ASM x86 整数溢出

> ID：13391152
> 
> 赞同：2
> 
> 时间：2012-11-15T03:29:05.810
> 
> 标签：html, assembly, x86

```
GetLCM PROC
tryAgain:
   mov bx, 0
   inc Multiple
   mov ax, UserInputNum1              ;Move UserInputNum1 to the 16 bit Register
   mov bx, Multiple
   div bx                             ;<-------Error here
   cmp dx,0                           ;If dx is not zero then there is a remainder
   jne tryAgain                       ;If not equal jump
ret
GetLCM ENDP 
```

尝试对这两个数字进行除法时，我不断收到整数溢出错误。当我尝试使用 div 时它会中断。

我试图找到用户输入的两个数字的最小公倍数。我决定尝试将每个数字除以首先找到素数，然后将每次找到一个与用户输入的另一个数字进行比较。当然，我会同时做这两个数字，但到目前为止，我正试图克服这个错误。

这只是我在 ASM 的第五周，所以我有点困惑为什么会这样。另外我想补充一点，我也想让这项工作也适用于 32 位数字。我的想法是使用指针。这是一个好方法吗？谢谢你的帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-15T03:37:38.917

`xor dx, dx`在你之前的某个地方`div`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T03:37:49.253

再次阅读`div`说明。什么被什么划分？您缺少将其中一个操作数设置为某个合理的值。

# ruby-on-rails - Mongoid 中是否有可用的 Mongo Admin fsync + lock 命令？

> ID：13391157
> 
> 赞同：0
> 
> 时间：2012-11-15T03:29:23.320
> 
> 标签：ruby-on-rails, ruby, mongodb, mongoid, rake-task

如果我想在我的数据库上调用 fsync + lock 方法，有没有办法在 Rails 应用程序中使用 Mongoid 来做到这一点？还有一种方法可以只指定我想要执行此操作的副本节点吗？

我正在尝试创建一个 rake 任务以使用 cron 每晚执行备份。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T20:56:24.690

Mongoid 2 使用 10gen 支持的驱动程序。Mongoid::Config.master.connection 对应于类 Mongo::MongoClient 的连接对象（原为 Mongo::Connection）。这个类有一个实例方法锁！执行 fsyncLock 命令，然后解锁！是它的伴侣。

[http://api.mongodb.org/ruby/current/Mongo/MongoClient.html#lock!-instance_method](http://api.mongodb.org/ruby/current/Mongo/MongoClient.html#lock!-instance_method)

[http://api.mongodb.org/ruby/current/Mongo/MongoClient.html#unlock!-instance_method](http://api.mongodb.org/ruby/current/Mongo/MongoClient.html#unlock!-instance_method)

这些方法没有选项来指定副本集的成员，只能通过基本上供内部使用的套接字。因此，如果您需要 fsyncLock 特定的副本集成员，我建议您通过显式连接显式连接到它，例如 Mongo::MongoClient.new(host, port)。

```
client = Mongo::MongoClient.new(host, port)
client.lock!
# ...
client.unlock!
client.close 
```

Mongoid 3 使用 Moped 而不是 10gen 驱动程序。但是即使您迁移到 Mongoid 3，您仍然可以独立使用 10gen 驱动程序来执行您的 rake 任务。

我对您的结果和任何后续问题感兴趣。

# asp.net-mvc - 如何删除 SimpleMembership 用户？

> ID：13391166
> 
> 赞同：10
> 
> 时间：2012-11-15T03:30:33.183
> 
> 标签：asp.net-mvc, security

在使用表单身份验证（通过 SimpleMembership）的 ASP.NET MVC 应用程序中，如何删除用户/帐户？

WebSecurity 类不公开 DeleteUser。在云雀上，我尝试了：

```
WebSecurity.InitializeDatabaseConnection(
  "MyDbConnection", "Users", "Id", "UserName", autoCreateTables: true);

new SimpleMembershipProvider().DeleteUser(userName, true); 
```

但这抱怨我没有初始化 SimpleMembership 提供程序。无论如何，我将非常感谢一些显示如何删除用户的示例代码。谢谢！

鲍勃

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-02-27T13:41:14.793

PussInBoots 是绝对正确的，尽管如果已将删除的用户添加到任何角色，这总是会为我抛出外键约束冲突。我确信这是由 PussInBoots 的“//TODO：在此处添加删除逻辑”评论推断的，但我通常会先清理角色成员身份，如下所示：

```
[HttpPost]
public ActionResult Delete(string userName, FormCollection collection)
{
    try
    {
        // TODO: Add delete logic here
        if (Roles.GetRolesForUser(userName).Count() > 0)
        {
            Roles.RemoveUserFromRoles(userName, Roles.GetRolesForUser(userName));
        }
        ((SimpleMembershipProvider)Membership.Provider).DeleteAccount(userName); // deletes record from webpages_Membership table
        ((SimpleMembershipProvider)Membership.Provider).DeleteUser(userName, true); // deletes record from UserProfile table

        return RedirectToAction("Index");
    }
    catch
    {
        return View(userName);
    }
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-11-24T17:58:14.300

你可能需要这样的东西：

```
 //
    // GET: /Members/Delete?userName=someuser

    public ActionResult Delete(string userName)
    {
        var user = context.UserProfiles.SingleOrDefault(u => u.UserName == userName);
        return View(user);
    }

    //
    // POST: /Members/Delete?userName=someuser

    [HttpPost]
    public ActionResult Delete(string userName, FormCollection collection)
    {
        try
        {
            // TODO: Add delete logic here
            ((SimpleMembershipProvider)Membership.Provider).DeleteAccount(userName); // deletes record from webpages_Membership table
            ((SimpleMembershipProvider)Membership.Provider).DeleteUser(userName, true); // deletes record from UserProfile table

            return RedirectToAction("Index");
        }
        catch
        {
            return View(userName);
        }
    } 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-11-15T03:37:27.030

如果你只是这样做会发生什么`Membership.DeleteUser(username,true)`。您可能会收到一点提示，要求您在`Membership`. 如果配置正确，则不需要创建新的 SimpleMembershipProvider 实例。

如果您像这样动态创建它，则需要在该对象上设置连接并以编程方式对其进行配置（它不知道您在上面创建的连接）。通常人们在 web.config 中执行此操作，但如果您使用表单身份验证模板创建应用程序，那么您应该自动处理该问题。

您的提供商我有这个错误，在这里讨论和解决：[Membership.DeleteUser 没有删除用户的所有相关行](https://stackoverflow.com/questions/15232995/membership-deleteuser-is-not-deleting-all-related-rows-of-the-user/15234347#comment21504314_15234347)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-23T23:45:10.793

运行单元测试时，我从 Membership.DeleteUser收到异常**System.NotSupportedException 。**问题是 app.config 将“DefaultProvider”设置为“ClientAuthenticationMembershipProvider”，正如您[在此处](http://msdn.microsoft.com/en-us/library/system.web.clientservices.providers.clientformsauthenticationmembershipprovider_methods.aspx)看到的那样，“此类未使用”。

修复是更新我的 app.config 以匹配我的 web.config 并正确配置默认提供程序：

```
<membership>
    <providers>
        <clear />
            <add name="AspNetSqlMembershipProvider" type="System.Web.Security.SqlMembershipProvider" connectionStringName="Crelate.Properties.Settings.DatabaseMembershipServicesConnection" enablePasswordRetrieval="false" enablePasswordReset="true" requiresQuestionAndAnswer="false" requiresUniqueEmail="true" maxInvalidPasswordAttempts="5" minRequiredPasswordLength="6" minRequiredNonalphanumericCharacters="0" passwordAttemptWindow="10" applicationName="/" />
        </providers>
    </membership> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-01T22:30:58.843

嘿只是想在遵循 PussInBoots 示例之后为遇到 ObjectContext 状态问题的任何人发布此信息，因为我遇到了同样的问题......

如果您正在访问其他用户数据，则需要使用以下方法从数据上下文中删除该用户：

```
context.Users.Remove(user); 
```

而不是：

```
((SimpleMembershipProvider)Membership.Provider).DeleteUser(userName, true); 
```

这将使您的 EF 上下文保持最新并从数据库中删除用户。

# javascript - 使用jQuery序列化DIV属性并发送到AJAX POST

> ID：13391168
> 
> 赞同：1
> 
> 时间：2012-11-15T03:31:09.457
> 
> 标签：javascript, jquery, ajax, serialization

我知道 serialize 可以使用，`<FORM>`但它也可以用于 DIV 吗？

```
<div class="row" shortname="1"></div>
<div class="row" shortname="2"></div>
<div class="row" shortname="3"></div>
<div class="row" shortname="4"></div> 
```

如何获取所有 DIV 及其短名称属性并将所有内容传递给 AJAX 帖子？

比如**短名=1&短名=2&短名=3**

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T03:46:20.503

您可以创建一个数组并将其作为 JSON 传递，

```
 var data=new Array();
    $('div.row').each(function(){
      data.push($(this).attr('shortname'))
    })
   var jsonString=JSON.stringify(data); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T03:43:38.117

不，它不能与 div 一起使用，因此您必须创建一个解决方案。如果我可以假设这些 div 包装在父 div 中，那么这段代码将起作用

```
var queryString = '';
var x = 0;
$('#parentdiv div').each(function(){
    if(x) queryString += '&';
    else x = 1;
    queryString += 'shortname[]=' + $(this).attr("shortname");
}); 
```

如果它们没有包含在 div 中，并且您想查找所有具有 shortname 属性的 div，请将循环更改为 this。

```
$('div').find('[shortname]').each(function(){
    // same stuff
}); 
```

注意：我认为您希望短名称是一个数组。如果您在没有括号的情况下进行构造，您可能会一遍又一遍地覆盖“shortname”的值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-15T03:52:58.257

您可以使用这些值构建一个数组，并将该数组作为对象的一部分传递给 $.ajax 数据选项。

```
var shortnames = $('[shortname]').map(function(){
    return $(this).attr('shortname');
}).get();
ajax({
    ....
    data:{shortname:shortnames},
    ....
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-15T03:53:30.647

你可以做这样的事情......

[**小提琴**](http://jsfiddle.net/videsignz/xFzpG/)

```
var serialized = '';

$('#serializeme div').each(function(){

    serialized = serialized + 'shortname=' + $(this).attr('shortname') + '&';

 }); 
```

# objective-c - objectAtIndexedSubscript 在 IOS5 中可用吗？

> ID：13391169
> 
> 赞同：3
> 
> 时间：2012-11-15T03:31:13.873
> 
> 标签：objective-c, xcode

文档说它在 MacOS 1.08 中可用。

那么故事是什么？iOS5 怎么样？

这是一个非常重要的选择器，因为 self[5] 实际上会变成 [self objectAtIndexedSubscript:5] ，除非我遗漏了什么。

在 NSOrderedSet 中不起作用，但在 NSArray 中起作用。

我错过了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-16T00:41:35.137

虽然`objectAtIndexedSubscript:`在 iOS 6 之前不可用，但可以**使用**`NSArray`下`NSDictionary`标。这意味着您可以使用如下语法：

 **```
myArray[2] = @"thingie";
myDictionary[@"roger"] = @"barry"; 
```

[它将部署回 iOS](https://developer.apple.com/library/ios/releasenotes/ObjectiveC/ObjCAvailabilityIndex/) 4 。

但是，`NSOrderedSet`下标在 iOS 5 及之前的版本中不起作用**。**为此，您需要提供一个将`objectAtIndexedSubscript:`调用重定向到`objectAtIndex:`.

附录：Apple 的文档`NSMutableOrderedSet`也不正确。它指出索引下标是插入，而实际上是替换（正如人们所期望的那样）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-15T03:34:03.867

**不**，不幸的是，仅从 iOS 6 开始。

Apple 为 OS X 和 iOS API 提供了单独的文档。您必须检查正确的：[`objectAtIndexedSubscript:`](http://developer.apple.com/library/ios/documentation/cocoa/reference/foundation/Classes/NSArray_Class/NSArray.html#//apple_ref/occ/instm/NSArray/objectAtIndexedSubscript%3a)。

> **可用性**
> 适用于 iOS 6.0 及更高版本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-17T19:32:30.670

如果你需要你的代码在 iOS 5 上运行，你需要替换

```
myOrderedSetOfHilariousAcronyms[2] = @"ROFL"; 
```

和

```
[myOrderedSetOfHilariousAcronyms setObject:@"ROFL" atIndex:2]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-15T03:37:17.117

我查看了 NSOrderedSet.h 文件，我看到了这个：

```
- (id)objectAtIndexedSubscript:(NSUInteger)idx NS_AVAILABLE(10_8, 6_0); 
```

所以它不适用于IOS5。**

# android-tabhost - 如何使用标签主机检查图像值

> ID：13391175
> 
> 赞同：1
> 
> 时间：2012-11-15T03:31:50.367
> 
> 标签：android-tabhost

好的，所以我将尝试通过示例尽可能清楚地解释我试图做什么。

我有一个带有 5 个标签（引擎、正文、照片、规格、颜色）的标签主机。xml 布局（car.xml）的上部有一个 imageView1。并且布局 car.xml 的下部包含选项卡。每个选项卡调用一个意图。如 "" car.this.coupe_specs = new Intent(this, coupe_tab.class); “”

并且 coupe_tab.xml 布局有 1 个 textView。

现在我要做的是在检查 id: 后更改 coupe_tab.xml 中 textView 字段中的文本： car.xml 上的 imageView1。

所以基本上我想从 car.java 检查 car.java 中 ImageView 的值，如果真的更改 coupe_tab.java 中 TextView 中的文本，我似乎遇到的问题是在 onItemSelected 函数中执行所有这些操作。

非功能性示例只是为了帮助您理解我想要的示例：

```
 import com.myexample._coupe_tab;

public void onItemSelected(AdapterView<?> example int view) {

 if ("car.png").equals imageView1 {     
 textView1 = "example text 1";
        }

else if ("car2.png).equals imageView1 {
textView1 = "example text 2"; 
        }

else {  
     // do something else
   } 
```

# silverstripe - Silverstripe TimeField - 隐藏秒数

> ID：13391176
> 
> 赞同：4
> 
> 时间：2012-11-15T03:31:54.043
> 
> 标签：silverstripe

有没有办法在 silverstripe CMS 中的 TimeField 中隐藏秒数？

```
static $db = array (        

        'StartTime' => 'Time',
        'EndTime' => 'Time',

    );

public function getCMSFields() {
        $f = new FieldList(
            new TimeField('StartTime', _t('CalendarDateTime.STARTTIME','Start time')),
            new TimeField('EndTime', _t('CalendarDateTime.ENDTIME','End time')),
        return $f;
    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-15T22:36:00.920

`$myTimeField->setConfig('timeformat', 'HH:mm');`- 请参阅[TimeField API 文档](http://api.silverstripe.org/3.0/forms/fields-datetime/TimeField.html)。

# iphone - 核心数据：对实体中对象的多次引用问题

> ID：13391180
> 
> 赞同：1
> 
> 时间：2012-11-15T03:32:06.777
> 
> 标签：iphone, objective-c, xcode, core-data

我有一个问题，我试图解决我需要让一个对象与另一个对象多次相关的地方。目前，我在“序列”和“姿势”之间有一对多的关系。创建序列时，您一次将一批姿势添加到序列中。代码看起来像这样：

```
- (void)doneAddingItems {
NSMutableOrderedSet *saveSet = [NSMutableOrderedSet orderedSetWithOrderedSet:self.sequence.poses];
[saveSet addObjectsFromArray:self.posesToAdd];
self.sequence.poses = [NSOrderedSet orderedSetWithOrderedSet:saveSet];
[self.managedObjectContext save:nil];
[self.navigationController dismissViewControllerAnimated:YES completion:nil];
} 
```

这对于独特的“姿势”列表非常有用，但显然你不能与同一个对象 TWICE 有关系，所以我不能制作如下序列：

```
PoseA -> PoseB -> PoseC -> PoseA -> PoseD 
```

其他人如何处理这个问题？我正在考虑创建一个动态实体，该实体将检查序列中是否存在选定的姿势，如果存在，则复制该姿势，以便我们可以“引用它两次”。它们都将包含相同的信息，但将位于不同的索引处。我认为这可以解决我的问题，并且只需要我添加一个动态实体和一些代码来验证重复项并在删除序列时清理实体。

有人有更好的主意吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T03:37:39.523

我认为 Index 类型的新 NSManagedObject 类可以解决您的问题。在 Sequence 和 Pose 之间没有关系，而是在 Sequence 和 Index 之间建立了 1:many 关系，然后在 Index 和 Pose 之间建立了 many:1 关系。您可以通过检索按“order”属性排序的索引来恢复完整的姿势序列。每个索引指的是一个特定的姿势，而每个姿势可以在多个索引中使用。Index 是一个非常轻量级的对象，只有“order”属性和关系。

副作用是您不再需要使用有序集，因为 Index 的“顺序”值捕获了该信息。

（编舞应用程序？摄影？）

# gpuimage - GPUImage: GPUImageGaussianSelectiveBlur 应用于大尺寸图像会在被排除模糊的区域变黑

> ID：13391181
> 
> 赞同：0
> 
> 时间：2012-11-15T03:32:13.873
> 
> 标签：gpuimage

我正在尝试将 GPUImageGaussianSelectiveBlurFilter 应用于 GPUImagePicture。但是好像有问题。

初始 GPUImagePicture 为“[[GPUImagePicture alloc] initWithImage:image smoothScaleOutput:NO]”。并且，当图像尺寸较大（可能宽度 > 1024px）时，图像上被排除在模糊之外的区域可能会变成黑色，将任何东西遮住（由 GPUImageGaussianSelectiveBlurFilter 中的 excludeCircleRadius 属性定义）！

如果我缩小图像尺寸（例如：640 * 960 px），则不会存在此问题。

有人可以告诉我什么可能导致这个问题吗？非常感谢！谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T05:42:59.520

我似乎解决了这个问题。关键是GPUImagePicture会得到conserveMemoryForNextFrame use "if (MAX(pixelSizeOfImage.width, pixelSizeOfImage.height) > 1000.0)" 这意味着图片不能超过1000px大小。

# ruby-on-rails - 指定 { response.should redirect_to(signin_path) } = 非法指令：

> ID：13391182
> 
> 赞同：0
> 
> 时间：2012-11-15T03:32:18.383
> 
> 标签：ruby-on-rails, rspec

我在规范中有以下代码：

```
 describe "using the update action" do
    before { put user_path(user) }    
    specify { response.should redirect_to(login_path) }
  end 
```

运行测试的结果是：

```
Illegal instruction: 4 
```

不清楚我在这里做错了什么。有任何想法吗？

# jquery - 未捕获的类型错误：对象 # 没有方法 'getData'

> ID：13391184
> 
> 赞同：0
> 
> 时间：2012-11-15T03:32:28.960
> 
> 标签：jquery, coffeescript

我是 CoffeeScript 的新手，我想从 Flickr 站点获取 JSON。

```
class Photo
  json = null

  getData = (successCallback) ->
    $.getJSON(
      'http://www.flickr.com/services/rest/?jsoncallback=?'
        format : 'json'
        method : 'flickr.photos.search'
        api_key : '7965a8bc5a2a88908e8321f3f56c80ea'
        user_id : '29242822@N00'
        per_page : '100'
      (data) =>
        @json = data.photos.photo;
        typeof successCallback == 'function' && successCallback())

photo = new Photo();
photo.getData successCallback = ->
  console.log('Data loaded', photo.json) 
```

（相同的代码在这里：http: [//jsbin.com/eqoduv/3/edit](http://jsbin.com/eqoduv/3/edit)）

但是会返回**“Uncaught TypeError: Object # has no method 'getData'”**。

感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T04:03:04.970

这定义`getData`为类私有的函数（甚至不是方法），甚至对实例`Photo`不可见：`Photo`

```
class Photo
  getData = (successCallback) -> ... 
```

同样， your`json`是一个私有类变量，将由`Photo`. 这意味着`json`in`json = null`与您`json`的`@json`回调中的不同。

你想`getData`成为一种`Photo`方法。您根本不需要`@json`在`Photo`级别定义，您可以将其留给您的`$.getJSON`回调。[并且您可以使用存在运算符](http://coffeescript.org/#operators)的“这是一个函数”版本来清理您的“`successCallback`如果它是一个函数则运行”测试：

```
class Photo
  getData: (successCallback) ->
    $.getJSON(
      #...
      (data) =>
        @json = data.photos.photo
        successCallback?()
    ) 
```

请注意`?`in ，在尝试调用它之前`successCallback?()`检查它是一个函数。`successCallback`

# javascript - 使用javascript在div标签中移动鼠标时无法运行onmousemove？

> ID：13391187
> 
> 赞同：0
> 
> 时间：2012-11-15T03:33:42.390
> 
> 标签：javascript

我有一个示例代码：

javascript:

```
function bootstrap(id) {
   this.id = id;
   this.init = function() {
      document.getElementById(this.id).onmousemove = positionButton;
   }
   function positionButton(e) {
      e = e || window.event;
      var cursor = {x:0, y:0};
      if (e.pageX || e.pageY) {
         cursor.x = e.pageX;
         cursor.y = e.pageY;
      } else {
         cursor.x = e.clientX + (document.documentElement.scrollLeft || document.body.scrollLeft) - document.documentElement.clientLeft;
         cursor.y = e.clientY + (document.documentElement.scrollTop || document.body.scrollTop) - document.documentElement.clientTop;
      }
      var elem = document.getElementById(this.id);
      elem.style.position = 'absolute';
      elem.style.top = cursor.y - 10 + 'px';
      elem.style.left = cursor.x - 30 + 'px';
   }
} 
```

在 html 中：

```
<div id="button" style="position: absolute; opacity: 1; z-index: 100; width:27px; height:20px; overflow:hidden">
test test
</div>
<script type="text/javascript" src="script.js"></script>
<script>
var bootstrap = new bootstrap('button');
bootstrap.init();
</script> 
```

当我运行代码时，结果没有运行事件 mousemove，如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T03:41:47.707

按钮的样式。你的代码：

```
width:27px;height:20px; 
```

我改为

```
width:60px;height:50px; 
```

我在 IE9 上试了一下，效果很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T03:47:20.797

运行我通过稍微修改您的代码创建的这个[jsFiddle ：](http://jsfiddle.net/antoninor/U9G78/6)

```
 function bootstrap(id) {
        this.id = id;
        this.init = function() {
            document.getElementById(this.id).onmousemove = positionButton;
        };

        function positionButton(e) {
            e = e || window.event;
            var cursor = {
                x: 0,
                y: 0
            };
            if (e.pageX || e.pageY) {
                cursor.x = e.pageX;
                cursor.y = e.pageY;
            } else {
                cursor.x = e.clientX + (document.documentElement.scrollLeft || document.body.scrollLeft) - document.documentElement.clientLeft;
                cursor.y = e.clientY + (document.documentElement.scrollTop || document.body.scrollTop) - document.documentElement.clientTop;
            }
            var elem = document.getElementById(this.id);
            elem.style.position = 'absolute';
            elem.style.top = cursor.y - 10 + 'px';
            elem.style.left = cursor.x - 30 + 'px';
        }
    }

var bootstrap = new bootstrap('button');
bootstrap.init();​ 
```

它适用于 Chrome、Safari 和 FFX。

您的浏览器控制台有任何错误吗？

script.js 是否正确下载？

你使用的是什么浏览器？

# objective-c - 两个导航控制器（在情节提要中）

> ID：13391191
> 
> 赞同：4
> 
> 时间：2012-11-15T03:34:07.500
> 
> 标签：objective-c, xcode, ios5, ios6

所以我是 Objective C/iOS 的新手等等......我想做一些非常简单的事情。我想要一个登录视图，一旦完成，我就会到达我的应用程序的“主”[图像中的主页]。在那个主页中，我想要一个“全新的”导航控制器，并将主页作为根。

现在，如果我想从登录转到主页，我必须在登录控制器的左侧有一个导航控制器。如果我这样做，主页将有一个返回按钮到登录屏幕，我不想要那个。如果可能，我想删除该登录视图。除非用户单击“注销”，否则我将不再需要它。

我的问题基本上有两个步骤： ![在此处输入图像描述](../Images/2a3a5de5ac0ad070302c5ccba532ce56.png) 1）如何为新的视图控制器/视图流设置导航控制器并删除现在无法访问的旧集。

2) 由于没有 .xib 文件（因为 Storyboard），如何在视图之间进行切换？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T03:38:51.183

你不需要`Navigation Controller`在之前有一个 on `Login ViewController`。你可以这样做：

```
Login ViewController
    |
    |  (segue type = modal)
    | 
   \|/
Navigation Controller
    Main ViewController 
```

# url - 将由页面名称形成的 URL 映射到单个不同的 URL

> ID：13391194
> 
> 赞同：0
> 
> 时间：2012-11-15T03:34:51.593
> 
> 标签：url, jsf-1.2

我的应用程序中有许多 xhtml 页面。用户看到的第一页名为 index.xhtml，当要求用户更新他的个人资料时，它将是 updateProfile.xhtml 等。当我点击我的应用程序时，我的页面名称显示在`URL`. 当用户更新配置文件时，`URL`将为 http:/myDomain/myServlet/updateProfile.jsf。

我很想知道是否可以将我所有的 xhtml 页面名称映射`URL`到其他名称。例如，在上述情况下，我希望将所有`URLs`匹配 *.jsf 模式的内容作为 http:/myDomain/myServlet/myAccount 显示给用户。

如果最终用户知道我的页面名称，我看不到可能的威胁，但我仍然对安全/黑客了解不多，所以至少我不想在我的 .js 文件中显示 *.jsf `URL`。因为，用户可以知道正在使用 JSF。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T03:41:00.040

在 JavaServer Faces 中重写 URL 基本上需要一个过滤器。在你的情况下，你的重写可以通过 PrettyFaces [http://ocpsoft.org/prettyfaces/](http://ocpsoft.org/prettyfaces/)之类的东西来完成。

使用 PrettyFaces，您将能够配置重写模式和您需要的一切。

**编辑：**创建自己的过滤器以重定向 URL 时，您还需要创建一个 ViewHandler 并覆盖 getActionURL() 函数，以便操作将转到新 URL。

# android - 如何让多个 RelativeLayouts 分别占据屏幕的一部分？

> ID：13391196
> 
> 赞同：1
> 
> 时间：2012-11-15T03:35:32.673
> 
> 标签：android, android-layout

我想在另一个全屏相对布局内有一个相对布局，占据全宽但占其父级高度的 50%，最好用 XML 而不是 java 代码完成。

我已经弄清楚如何对齐父母的中心，以及如何填充宽度，但是有没有办法获得父母身高的 50%？30%呢？6.2834%？

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent" android:layout_height="fill_parent">

    <RelativeLayout
        android:layout_width="fill_parent"
        android:layout_height="??????????"
        android:layout_centerInParent="true" > 
```

我试图做百分比的原因是，如果我用“dip”指定它，虽然对象将保持相同的大小，但布局在不同的屏幕尺寸（例如手机和平板电脑）上看起来会有很大不同。

**编辑：**

感谢您提供有关使用 LinearLayout 和权重的所有答案。我以前也看过。我觉得我可能过度简化了这个问题。说我需要这样的东西：

![在此处输入图像描述](../Images/406279f47f9421f577a714f2265ad349.png)

我想我可以使用复杂的 LinearLayout 和 weighting 来勾勒中心正方形，然后将中心正方形设置为`fill_parent`，如下所示：

![在此处输入图像描述](../Images/def7ea4ec3f2a44fc7fd83177259c5b1.png)

但是那我应该如何处理其他 3 个方格（布局）？我可以为另一个正方形设置另一个“层”LinearLayout 吗？或者我应该把整个屏幕分成很多很多的小单元，让这些子布局跨越多个单元（不确定这是否可能）？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-15T03:48:19.483

尝试`LinearLayout`使用`weightSum`

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:weightSum="2"
    android:gravity="center_vertical"
    android:orientation="vertical" >

    <RelativeLayout 
        android:layout_width="match_parent"
        android:layout_height="0dp"
        android:layout_weight="1"
        android:background="#FF0000">

    </RelativeLayout>

</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-15T04:11:34.467

如果您不是绝对需要将它嵌套在一个 RelativeLayout 中，您可以在 LinearLayout 中使用权重，正如其他人所指出的那样。我刚刚在上方和下方添加了一个额外的 RelativeLayout，以便您可以在尝试时使用屏幕的其余部分。如果没有，只需删除其他RelativeLayouts。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:id="@+id/ParentLinearLayout"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical"
android:weightSum="10" >

<RelativeLayout
    android:id="@+id/RelativeLayoutTop"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_weight="2.5"
    android:background="@color/torange" >
</RelativeLayout>

<RelativeLayout
    android:id="@+id/RelativeLayoutMid"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_weight="5"
    android:background="@color/tpurple"
    android:padding="8dp" >

    <TextView
        android:id="@+id/description"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_centerVertical="true"
        android:text="@string/describe"
        android:textAppearance="?android:attr/textAppearanceLarge" />

</RelativeLayout>

<RelativeLayout
    android:id="@+id/RelativeLayoutBottom"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_weight="2.5"
    android:background="@color/torange" >
</RelativeLayout> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-15T03:49:51.977

我通常为此使用 LinearLayout 并将权重设置为某个百分比：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent" 
    android:layout_height="fill_parent"
    android:orientation="vertical">

    <View
        android:layout_width="fill_parent"
        android:layout_height="0dp"
        android:layout_weight="25"/>

    <RelativeLayout
        android:layout_width="fill_parent"
        android:layout_height="0dp"
        android:layout_weight="50">
     </RelativeLayout>

     <View
         android:layout_width="fill_parent"
         android:layout_height="0dp"
         android:layout_weight="25"/>

</LinearLayout> 
```

对您的编辑：

在某些时候，您需要确定布局。从分组布局开始。寻找模式。在您的简单解释中，我们设计了一种使用线性布局将 3 个对象分组的方法，其中一个对象位于中间。使用您的新布局，您可以以任何方式对这些项目进行分组吗？

一旦你设置了简单的布局模式，也许可以通过定义权重来添加你正在寻找的特定间距。然后，您可能想要添加相对布局并开始将视图锚定到特定视图。问问自己它们是否重叠？一个视图是否始终位于其他视图的顶部或侧面。什么定义了视图的边界，然后使用线性布局、权重、相对布局、toLeftOf、toRightOf、bellow、above、margin 和 padding 从那里获取它。

这是我将类似对象分组的意思的示例。这绝不是最好的解决方案，但这一切都取决于您如何定义定位参数。

黄色 = 垂直线性布局

绿色 = 水平线性布局

您有 1 个大型垂直布局和两个水平布局，其中包含多个对象。从那里您可以将其分解为更易于管理的部分，以了解如何在该布局中安排和项目。现在使用相对布局，您可以相对于另一个对象定位项目，您可以删除线性布局处理的一些工作，但是您将定义它们相对于其他对象的距离，并且可能不得不摆弄以使布局正确调整在不同的屏幕尺寸上（不使用静态定位的原因）。

![布局](../Images/1d3d93bf145f74a9c1ff7529dcd40e43.png)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-15T03:46:12.853

也许尝试`LinearLayout`在内部使用 3 个布局，并将其`android:layout_weight`设置为 1、2、1。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <RelativeLayout
        android:background="#FF0000"
        android:layout_weight="1"
        android:layout_width="match_parent"
        android:layout_height="0dip" >
    </RelativeLayout>

    <RelativeLayout
        android:background="#00FF00"
        android:layout_weight="2"
        android:layout_width="match_parent"
        android:layout_height="0dip" >
    </RelativeLayout>

    <RelativeLayout
        android:background="#FF0000"
        android:layout_weight="1"
        android:layout_width="match_parent"
        android:layout_height="0dip" >
    </RelativeLayout>

</LinearLayout> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-15T03:47:17.527

`RelativeLayout`不支持儿童的宽度和高度百分比。`LinearLayout`与`android:layout_weight`属性一起使用。

# iphone - UI 页面控制器调整为横向模式 XCODE

> ID：13391203
> 
> 赞同：0
> 
> 时间：2012-11-15T03:36:32.070
> 
> 标签：iphone, xcode, uiscrollview, landscape, uipageviewcontroller

最近我发现了一个带有我非常喜欢的页面视图控制器的项目，并决定在我自己的项目中使用它。

[http://www.wannabegeek.com/?p=168](http://www.wannabegeek.com/?p=168)

问题是，页面控制器以纵向开始，并具有自动旋转到横向的功能。出于我的目的，我不需要任何自动旋转功能，我只想能够在横向模式下的视图之间来回滑动。

我尝试更改代码，但仅将其设置为横向没有成功，如果有人可以帮助编辑代码以不自动旋转，从横向开始并保持横向，那就太好了！

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T03:39:18.257

您必须执行 2 项更改：

1.  将初始方向设置为横向（主页按钮左/右）
2.  设置`- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation`返回`NO`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T04:07:07.873

让我为 Shivan 的回答添加更多细节：

1.  在目标中选择横向左和横向右。点击项目以访问此页面。

![在此处输入图像描述](../Images/2700fca3c59a9c5ef17ee8ee7b65428f.png) 2.在ViewController.m中寻找shouldAutorotateToInterfaceOrientation，让它返回NO。请参阅以下代码。

`- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation { return NO; }`

# python - 无法正确生成 HTML 代码

> ID：13391204
> 
> 赞同：0
> 
> 时间：2012-11-15T03:36:32.150
> 
> 标签：python, html

我正在尝试读取一个列表，值可以是单个值，也可以有多个用逗号分隔的条目，我的目标是为列表中的第一个值附加 href 链接，即 col[0]，我遇到以下编译错误

```
INPUT:-
cols=['409452,  12345', '', '', 'This a test python script']

EXPECTED OUTPUT:-
 <tr>
<td><a href=http://data/409452>409452,<a href=http://data/12345>12345</a></td>
<td></td>
<td></td>
<td>This a test python script</td> 
```

Python代码：-

```
 cols=cols=['409452,  12345', '', '', 'This a test python script']

TEMPLATE = ['  <tr>']
for col in cols:
    value = col.split(",")  
    TEMPLATE.append(
        '    <td><a href=http://data/{}> {}</a></td>'.format(value)
TEMPLATE.append('  </tr>')
TEMPLATE = '\n'.join(TEMPLATE)
print TEMPLATE

Output I am getting:-

TEMPLATE.append('  </tr>')
       ^
SyntaxError: invalid syntax 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T03:42:40.967

您没有向我们展示您的实际代码（因为该示例中没有 13 行，但您的错误消息在第 13 行显示了错误）。但是，在这种情况下，我认为答案相当简单......仔细看看这一行：

```
TEMPLATE.append(
    '    <td><a href=http://data/{}> {}</a></td>'.format(value) 
```

删除字符串以使其更明显：

```
TEMPLATE.append(''.format(value) 
```

如您所见，您缺少一个关闭的`)`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T03:48:55.380

除了`)`其他人提到的缺失之外，您对格式的使用不正确（[需要使用`*value`它来查找数组中的项目](https://stackoverflow.com/a/3161594/462117)）。（您对 cols 的定义也有错误的缩进并且有一个额外的`cols=`。）

此代码有效：

```
cols=['409452,  12345', '', '', 'This a test python script']

TEMPLATE = ['  <tr>']
for col in cols:
    if "," in col:
        value = col.split(",")
        value[:] = ['<a href=http://data/{0}>{0}</a>'.format(id.strip()) for id in value]
        col = ','.join(value)
    TEMPLATE.append('    <td>{}</td>'.format(col))
TEMPLATE.append('  </tr>')
TEMPLATE = '\n'.join(TEMPLATE)
print TEMPLATE 
```

输出：

```
 <tr>
    <td><a href=http://data/409452>409452</a>,<a href=http://data/12345>12345</a></td>
    <td></td>
    <td></td>
    <td>This a test python script</td>
 </tr> 
```

# unit-testing - 如何使用 JMock 制作“漂亮的模拟”？

> ID：13391217
> 
> 赞同：0
> 
> 时间：2012-11-15T03:38:57.260
> 
> 标签：unit-testing, mocking, mockito, jmock

有没有使用 JMock制作**漂亮模拟**的最佳方法？

例如：

```
public interface Dependency {
    void someSetUp();
    void interactionUnderTest();
    void someCleaningAfterWork();
}

public class CUT {
    private Dependency dependency;

    public void methodUnderTest() {
        dependency.someSetUp();
        dependency.interactionUnderTest();
        dependency.someCleaningAfterWork();
    }

    public void setDepencency(Dependency dependency) {
        this.dependency = dependency;
    }
} 
```

对于 Mockito，解决方案很简单：

```
@Test
public void mockitoExample() throws Exception {
    Dependency dependency = mock(Dependency.class);
    classUnderTest.setDepencency(dependency);
    classUnderTest.methodUnderTest();
    verify(dependency).interactionUnderTest();
} 
```

但是对于 JMock，我只找到了这个解决方案：

```
@Test
public void jMockExample() throws Exception {
    JUnit4Mockery ctx = new JUnit4Mockery();
    final Dependency dependency = ctx.mock(Dependency.class);
    classUnderTest.setDepencency(dependency);
    ctx.checking(new Expectations() {{
        allowing(dependency).someSetUp();
        one(dependency).interactionUnderTest();
        allowing(dependency).someCleaningAfterWork();
    }});

    classUnderTest.methodUnderTest();
} 
```

问题出在以下几行：

```
allowing(dependency).someSetUp();
and
allowing(dependency).someCleaningAfterWork(); 
```

如果 methodUnderTest 发生变化，例如通过从 Dependency 调用另一个方法，我将不得不手动修改测试以防使用 JMock。有没有办法避免呢？

PS对不起我的英语

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T09:21:59.343

如果你真的想要，你可以使用`allowing(dependency)`which 将允许对象上的所有内容。

我们不支持“漂亮”的模拟是有原因的，那就是我们不希望在没有从单元测试中驱动的情况下在我们的代码中任意发生一些事情。总的来说，我们发现这种脆弱性来自我们设计的弱点，我们使用测试反馈来帮助我们发现这一点。

在这个例子中，我会对不同依赖方法之间的关系、“协议”感兴趣。我想将其隔离，以便实现一次，这意味着我只需要在一次地方测试它，因此“漂亮”的模拟不会那么有用。

# python - 循环可变长度的变量数

> ID：13391227
> 
> 赞同：0
> 
> 时间：2012-11-15T03:39:59.807
> 
> 标签：python, loops, for-loop

> **可能重复：**
> [在 Python 中获取一系列列表的笛卡尔积](https://stackoverflow.com/questions/533905/get-the-cartesian-product-of-a-series-of-lists-in-python)

假设我有一个长度为 n 的数组，代表 n 个变量，以及一个包含 n 个变量的函数 f。我想对应用于某个有限集合（即 {0,1}）中 n 个变量的所有值的 f 求和。从概念上讲，它会类似于

```
for x[1] in {0,1}:
  for x[2] in {0,1}:
     ... 
       sum += f(x[1], ..., x[n]) 
```

但显然你不能写这个。

有没有一种很好的方法来做到这一点，比如在 Python 中？（对于 {0,1} 中值的特殊情况，我可以循环从 0 到 2^n-1 的整数的二进制表示，但我想要一个更通用的解决方案）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T07:23:55.177

```
# f is a function
# K is a list of possible values your variable may take
# n is number of args that f takes
import itertools

def sum_of_f_over_K_n(f,K,n):
    K_to_the_n = [K for i in xrange(n)]
    return sum(map(lambda(x):f(*x),itertools.product(*K_to_the_n)))

some_list = [0,1] # where your variables come from
def sample_func(a,b,c,d,e):
    return a or b or c or d or e
sum_of_f_over_K_n(sample_func, some_list, 5) == 2**5 -1 
```

# jquery - 将元素宽度乘以数据角色值

> ID：13391233
> 
> 赞同：0
> 
> 时间：2012-11-15T03:41:33.763
> 
> 标签：jquery

我正在尝试从对象中获取数据角色值，并将该对象的宽度和高度与该值相乘。

这是我迄今为止所拥有的小提琴[http://jsfiddle.net/kq7mA/](http://jsfiddle.net/kq7mA/)

如果可以的话请帮忙 ：）

```
var cssStyle = {
'background-color' : '#ddd',
'font-weight' : 'bold',
'width' : ('100px' * data-role),
'height' : ('150px' * data-role),
'color' : 'white'
}
$(document).ready(function() {
       $('li').css(cssStyle);
 });​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T03:43:41.600

将您的代码更改为

```
$(document).ready(function() {
    var cssStyle
    $('li').each(function(){
       cssStyle = {
         'background-color' : '#ddd',
         'font-weight' : 'bold',
         'width' : ('100' *     $(this).attr("data-role")),
         'height' : ('150' * $(this).attr("data-role")),
         'color' : 'white'
       }
       $(this).css(cssStyle);
    });                 
 }); 
```

我们有多个 li 具有不同的数据角色值。因此，我们需要循环遍历每个 li 的每个 li 具有不同的宽度和高度。我们也不能直接在 jQuery 中访问 data-role 属性。上面的代码将解决您的问题。

检查工作示例：http: [//jsfiddle.net/kq7mA/6/](http://jsfiddle.net/kq7mA/6/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T03:46:11.183

[http://jsfiddle.net/kq7mA/2/](http://jsfiddle.net/kq7mA/2/)

```
$('li').each(function() {
    var dataRole = $(this).data('role');
    $(this).css({
        'background-color' : '#ddd',
        'font-weight' : 'bold',
        'width' : (100 * dataRole) + 'px',
        'height' : (150 * dataRole) + 'px',
        'color' : 'white'
    });        
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-15T03:47:06.747

首先是显而易见的事情： `data-role`没有定义，并且您不能将这样的字符串与数字相乘（假设`data-role`将包含一个数字）。

由于您想`data-role`从每个元素中获取，您必须计算`width`并`height`通过迭代元素：

```
var cssStyle = {
    'background-color': '#ddd',
    'font-weight': 'bold',
    'color': 'white'
};

$('li')
  .css(cssStyle)
  .css('width', function() {
      return 100 * $(this).data('role');
  })
  .css('height', function() {
      return 150 * $(this).data('role');
  }); 
```

# python - Mongo：结合 AND 和 OR

> ID：13391238
> 
> 赞同：2
> 
> 时间：2012-11-15T03:42:01.370
> 
> 标签：python, mongodb, pymongo, database

我想返回那些必须同时满足 AND 和 OR 条件的记录。AND 条件检查该值是否与集合之外的外部值匹配，然后我检查它是否匹配 OR 条件中的一个或两个。

这是我使用 pymongo 的查询：

```
 cursor = coll.find(
                { "$and" : [
                        {"term" : 1} == events, 
                        { "$or" : [
                                {"coordinates.type" : "Point"}, 
                                {"place.full_name" : {"$ne" : None}}
                        ]}
                    ]}, 
                           {"coordinates" : 1, "place.full_name" : 1}, 
                            tailable = True, timeout  = False ) 
```

我可以自己运行查询的 OR 部分。相反，我收到一条错误消息：

```
OperationFailure: database error: $and/$or elements must be objects 
```

我是 Mongo 和 Python 的新手。

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T03:54:05.350

此行无效：

```
{"term" : 1} == events 
```

不知道这里的意图是什么，但如果你删除 '== events' 它应该是一个有效的查询参数

# objective-c - someArray[5] 为什么以及如何在 Objective-c 中工作？

> ID：13391251
> 
> 赞同：3
> 
> 时间：2012-11-15T03:44:33.333
> 
> 标签：objective-c

我认为新的符号是这样工作的：

someArray[5] 变成

someArray[5] 实际上会变成 [someArray objectAtIndexedSubscript:5]

然而，在 NSArray.h 和 NSOrderedSet.h 我看到了这个：

```
- (id)objectAtIndexedSubscript:(NSUInteger)idx NS_AVAILABLE(10_8, 6_0); 
```

因此，objectAtIndexedSubscript 仅适用于 IOS6。

我尝试制作这个简单的代码：

```
NSArray * someArray =@[@"hello",@"World",@"World"];
NSOrderedSet * someOS = [NSOrderedSet orderedSetWithArray:someArray];
PO(someArray);
PO(someOS);
PO(someArray[0]);
PO(someOS[0]); //Exception thrown here 
```

someOS[0] 的代码中断

```
-[__NSOrderedSetI objectAtIndexedSubscript:]: unrecognized selector sent to instance 0x8b1fac0 
```

在 NSArray 和 NSOrderedSet 中，都有一个文本 NS_AVAILABLE(10_8, 6_0);

然而它并没有在 NSArray 上中断，但在 NSOrderedSet 上没有中断。为什么？

奖励：如何使它也适用于 NSOrderedSet 类别（需要检查它是否尚未定义）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T20:26:02.820

深入研究一下，看起来 NSOrderSet 在 iOS 6 中只有 -objectAtIndexedSubscript: ，但 NSArray 在 iOS 5 和 iOS 6 中都有 -objectAtIndexedSubscript: 。

我的测试显示如下。

```
- (void)testNSOrderedSetObjectAtIndexedSubscript
{
    NSString *systemVersion = [UIDevice currentDevice].systemVersion;
    NSString *message = @"NSOrderedSet for %@ does not respond to -objectAtIndexedSubscript:";

    NSOrderedSet *orderedSet = [NSOrderedSet orderedSet];
    STAssertTrue([orderedSet respondsToSelector:@selector(objectAtIndexedSubscript:)], message, systemVersion);
}

- (void)testNSArrayObjectAtIndexedSubscript
{
    NSString *systemVersion = [UIDevice currentDevice].systemVersion;
    NSString *message = @"NSArray for %@ does not respond to -objectAtIndexedSubscript:";

    NSArray *array = [NSArray array];
    STAssertTrue([array respondsToSelector:@selector(objectAtIndexedSubscript:)], message, systemVersion);
} 
```

iOS 5.0 模拟器

```
Test Case '-[SIObjectTests testNSArrayObjectAtIndexedSubscript]' started.
Test Case '-[SIObjectTests testNSArrayObjectAtIndexedSubscript]' passed (0.000 seconds).
Test Case '-[SIObjectTests testNSOrderedSetObjectAtIndexedSubscript]' started.
/Users/jthomas/workspaces/si-catalog-order-ios/SICatalogOrderTests/SIObjectTests.m:20: error: -[SIObjectTests testNSOrderedSetObjectAtIndexedSubscript] : "[orderedSet respondsToSelector:@selector(objectAtIndexedSubscript:)]" should be true. NSOrderedSet for 5.0 does not respond to -objectAtIndexedSubscript:
Test Case '-[SIObjectTests testNSOrderedSetObjectAtIndexedSubscript]' failed (0.000 seconds). 
```

iOS 6.0 模拟器

```
Test Case '-[SIObjectTests testNSArrayObjectAtIndexedSubscript]' started.
Test Case '-[SIObjectTests testNSArrayObjectAtIndexedSubscript]' passed (0.000 seconds).
Test Case '-[SIObjectTests testNSOrderedSetObjectAtIndexedSubscript]' started.
Test Case '-[SIObjectTests testNSOrderedSetObjectAtIndexedSubscript]' passed (0.000 seconds). 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-16T22:19:45.953

我有更好的答案！

此代码将为`NSOrderedSet`不支持`-objectAtIndexedSubscript:`.

```
#import <Foundation/Foundation.h>
#import <objc/runtime.h>

id PatchedObjectAtIndexedSubscript(id self_, SEL cmd_, NSUInteger index)
{
    return [self_ objectAtIndex:index];
}

void PatchedSetObjectAtIndexedSubscript(id self_, SEL cmd_, id object, NSUInteger index)
{
    return [self_ replaceObjectAtIndex:index withObject:object];
}

void SIPatchNSOrderedSet()
{
    char types[6];

    if (!class_getInstanceMethod([NSOrderedSet class], @selector(objectAtIndexedSubscript:))) {
        sprintf(types, "@@:%s", @encode(NSUInteger));
        class_addMethod([NSOrderedSet class],
                        @selector(objectAtIndexedSubscript:),
                        (IMP)PatchedObjectAtIndexedSubscript,
                        types);
    }

    if (!class_getInstanceMethod([NSMutableOrderedSet class], @selector(setObject:atIndexedSubscript:))) {
        sprintf(types, "v@:@%s", @encode(NSUInteger));
        class_addMethod([NSMutableOrderedSet class],
                        @selector(setObject:atIndexedSubscript:),
                        (IMP)PatchedSetObjectAtIndexedSubscript,
                        types);
    }
} 
```

在您的应用程序开始时（`-application:didFinishLaunchingWithOptions:`可能）调用`SIPatchNSOrderedSet()`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T10:20:19.703

Jeffry 的回答很棒，并提供了有关声明选择器如何工作的见解。

作为替代方案，我只是这样做：

```
self.businessDetailed.Phones.array[0]; 
```

然后我会告诉我未来的孙子们把它改成

```
self.businessDetailed.Phones[0]; 
```

当 iPhone 15 上架时。

与 Jeffry 的解决方案相比，工作量要少得多，但代价是边际成本略有增加。

# c++ - 如何在 Windows 上正确地将拉丁字符打印到 C++ 控制台？

> ID：13391252
> 
> 赞同：6
> 
> 时间：2012-11-15T03:44:56.940
> 
> 标签：c++, windows, unicode, console, latin

我在用 C++ 将法语字符写入控制台时遇到问题。该字符串是使用从文件中加载的`std::ifstream`，`std::getline`然后使用`std::cout`. 这是文件中的字符串：

> La chaîne qui 对应 au 代码 "TEST_CODE" n'a pas été trouvée à l'aide locale "fr"。

这是字符串的打印方式：

> La cha¯ne qui 对应 au 代码 "TEST_CODE" n'a pas ÚtÚ trouvÚe Ó l'aide locale "fr"。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-15T03:55:52.123

问题是控制台使用的代码页与系统的其余部分不同。例如，通常为美洲和西欧设置的 Windows 系统使用 CP1252，但这些地区的控制台使用 CP437 或 CP850。

您可以设置控制台输出代码页以匹配您正在使用的编码，也可以转换字符串以匹配控制台的输出代码页。

设置控制台输出代码页：

```
SetConsoleOutputCP(GetACP()); // GetACP() returns the system codepage.
std::cout << "La chaîne qui correspond au code \"TEST_CODE\" n'a pas été trouvée à l'aide locale \"fr\"."; 
```

或在编码之间转换的多种方法之一（此方法需要 VS2010 或更高版本）：

```
#include <codecvt> // for wstring_convert
#include <locale>  // for codecvt_byname
#include <iostream>

int main() {
    typedef std::codecvt_byname<wchar_t,char,std::mbstate_t> codecvt;

    // the following relies on non-standard behavior, codecvt destructors are supposed to be protected and unusable here, but VC++ doesn't complain.
    std::wstring_convert<codecvt> cp1252(new codecvt(".1252"));
    std::wstring_convert<codecvt> cp850(new codecvt(".850"));

    std::cout << cp850.to_bytes(cp1252.from_bytes("...été trouvée à...\n")).c_str();
} 
```

后一个示例假设您确实需要在 1252 和 850 之间进行转换。您可能应该使用函数 GetOEMCP() 来找出实际的目标代码页，而源代码页实际上取决于您用于源代码的内容，而不是在运行程序的机器上 GetACP() 的结果。

另请注意，该程序依赖于标准不保证的东西：wchar_t 编码在语言环境之间共享。在大多数平台上都是如此——通常在所有语言环境中某些 Unicode 编码用于 wchar_t——但不是全部。

* * *

理想情况下，您可以在任何地方使用 UTF-8，并且以下内容可以正常工作，就像现在在其他平台上一样：

```
#include <iostream>

int main() {
    std::cout << "La chaîne qui correspond au code \"TEST_CODE\" n'a pas été trouvée à l'aide locale \"fr\".\n";
} 
```

不幸的是，如果不放弃 UTF-16 作为 wchar_t 编码并采用 4 字节 wchar_t，或者违反标准的要求并破坏符合标准的程序，Windows 就无法以这种方式支持 UTF-8。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-15T08:03:56.417

如果要在控制台中写入 Unicode 字符，则必须进行一些**初始化**：

```
_setmode(_fileno(stdout), _O_U16TEXT); 
```

然后您的法语字符会正确显示（我已经使用`Consolas`控制台字体对其进行了测试）：

```
#include <fcntl.h>
#include <io.h>

#include <iostream>
#include <ostream>
#include <string>

using namespace std;

int main() 
{
    // Prepare console output in Unicode
    _setmode(_fileno(stdout), _O_U16TEXT);

    //
    // Build Unicode UTF-16 string with French characters
    //

    // 0x00EE - LATIN SMALL LETTER I WITH CIRCUMFLEX
    // 0x00E9 - LATIN SMALL LETTER E WITH ACUTE
    // 0x00E0 - LATIN SMALL LETTER A WITH GRAVE

    wstring str(L"La cha");
    str += L'\x00EE';
    str += L"ne qui correspond au code \"TEST_CODE\" ";
    str += L"n'a pas ";
    str += L'\x00E9';
    str += L't';
    str += L'\x00E9';
    str += L" trouv";
    str += L'\x00E9';
    str += L"e ";
    str += L'\x00E0';
    str += L" l'aide locale \"fr\".";

    // Print the string to the console
    wcout << str << endl;  
} 
```

考虑阅读 Michael Kaplan 的以下博客文章：

*   [神话在控制台中破灭](http://www.siao2.com/2010/10/07/10072032.aspx)
*   [传统智慧是迟钝的，也就是 @#%&* 是什么 _O_U16TEXT？](http://www.siao2.com/2008/03/18/8306597.aspx)

此外，如果您正在从文件中读取一些文本，您必须知道使用哪种**编码**：UTF-8？UTF-16LE？UTF-16BE？一些特定的代码页？然后，您可以从特定编码转换为 Unicode UTF-16 并在 Windows 应用程序中使用 UTF-16。要从某些代码页（或从 UTF-8）转换为 UTF-16，您可以使用[`MultiByteToWideChar()`API](http://msdn.microsoft.com/en-us/library/windows/desktop/dd319072%28v=vs.85%29.aspx)或[ATL 转换助手类`CA2W`](http://msdn.microsoft.com/en-us/library/87zae4a3%28v=vs.80%29.aspx)。

# php - 当我刷新网页时，评论被保存在一个文件上两次

> ID：13391254
> 
> 赞同：1
> 
> 时间：2012-11-15T03:45:10.490
> 
> 标签：php, html

我正在我的网站上写一个评论块。我将评论保存在文件中并在网页上打印内容。但问题是当我刷新网页时，最后一条评论会显示两次。

这是我的代码：我正在我的网站上写一个评论块。我将评论保存在文件中并将内容打印在

网页。但问题是当我最后一次刷新网页时

评论显示两次。

这是我的代码：

```
<html>

<body>

<form   method="GET">

<textarea rows="15" cols="50" name="comments" >
</textarea>

<input type="submit" value="submit" >

</form>

</body>
</html>

<?php

if(!($_GET["comments"]==null)){
$comments = "Anonymous said:<br>".$_GET

["comments"]."<br><br><br><br>";
$file_comments = fopen("comments.txt","a");
fwrite($file_comments,$comments);
fclose($file_comments);

$_GET["comments"] = null;
$comments = null;

}

$comments = file_get_contents("comments.txt");
echo $comments;

$_GET["comments"] = null;
$comments = null;

?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T03:50:17.933

以下是快速解决方案：

1.  保存表单后或者如果它有错误，请将它们重定向到同一页面，但`GET`在 uri 中使用变量，例如`process.php?action=save`. 使用标头函数进行重定向。

2.  您还使用 cookie 来保存提交表单的人的 IP，并限制他在一段时间内能够再次提交表单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T05:34:54.447

解决方案是重定向到同一页面。例如，这将起作用。尝试一下。

```
<html>
<body>
<form method="POST">
  <textarea rows="15" cols="50" name="comments"></textarea>
  <input type="submit" value="submit" name="submit">
</form>
</body>
</html>

<?php
if ( isset( $_POST[ 'submit' ] ) ) {
  $TextArea      = $_POST[ "comments" ];
  $comments      = "Anonymous said:<br>" . $TextArea . "<br><br><br><br>\n\n"; // Add \n\n to write the comments in a different paragraph inside the file.
  $file_comments = file_put_contents( "comments.txt", $comments, FILE_APPEND );
  echo '<script type="text/javascript">window.location ="";</script>';
}
$comments = file_get_contents( "comments.txt" );
echo $comments;
?> 
```

不过需要更多时间来刷新。最好的方法是将 PHP 脚本放在另一个文件中。

# objective-c - 使用 addObject 到 NSMutableArray 时出现段错误

> ID：13391255
> 
> 赞同：0
> 
> 时间：2012-11-15T03:45:18.510
> 
> 标签：objective-c, nsmutablearray, segmentation-fault

我似乎遇到了 NSMutableArray 的问题。

这是我的代码：

```
NSMutableArray *returnArray = [[NSMutableArray alloc] init];

while(condition) {
    NSInteger temp = someNumber;
    [returnArray addObject: temp];

} 
```

但是一旦它遇到 addObject 消息，程序段就会出错。有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T03:49:13.030

您不能将整数之类的原语添加到数组中，只能添加对象（因此名称为 addObject:)。如果要添加数字，则必须将它们转换为 NSNumber 或相关类之一。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T04:03:16.627

您只能将对象添加到数组中，并且 NSInteger 不是数组。

```
NSMutableArray *returnArray = [[NSMutableArray alloc] init];

while(condition) {
    [returnArray addObject: [NSNumber numberWithInt: someNumber]];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T04:09:07.627

您需要将原语包装`NSInteger`到一个`NSNumber`类中。您可以执行以下操作：

```
while(condition)
{
    NSInteger temp = someNumber;
    [returnArray addObject:@(temp)];
} 
```

或者，如果您的编译器不支持该语法：

```
while(condition)
{
    NSInteger temp = someNumber;
    [returnArray addObject:[NSNumber numberWithInteger:temp]];
} 
```

# eclipse - 在尝试实现 Facebook 登录时构建路径错误

> ID：13391258
> 
> 赞同：1
> 
> 时间：2012-11-15T03:45:31.833
> 
> 标签：eclipse, facebook-login, facebook-android-sdk, buildpath

我正在尝试使用 Eclipse 在我的应用程序中实现 Facebook 登录，所以我开始阅读 Facebook Developers 上的教程。但是，我在构建路径中遇到错误，因此将不胜感激。

在 Android Dependencies 中，它指出 'facebooksdk.jar - "Directory\facebook-android-sdk-3.0.1.b\bin (missing)"'

如果我遗漏了任何可能很重要的信息，请告诉我。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T22:29:15.720

好吧，设法让它工作。只需删除 Build Path 的 Projects 选项卡中的项目，然后再次导入，但这一次，我只导入了*facebook*文件夹而不是整个 facebook-android-sdk-3.0.1.b 文件夹，并更新了项目构建小路。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-25T03:47:52.450

我解决 android 依赖问题的方法是右键单击 FacebookSDK 项目，转到 Properties>Android 并检查 Google APIs 的 Build Target 并检查下面的 isLibrary。按 OK 后，我转到 Project>Clean... 并清理了所有项目。之后，给 Eclipse 几秒钟，它应该更新所有项目以消除构建错误。

# fortran - forrtl：严重（157）：程序异常 - 访问冲突

> ID：13391267
> 
> 赞同：4
> 
> 时间：2012-11-15T03:46:16.423
> 
> 标签：fortran

我正在使用 BLUPF90 系列程序之一的“thrgibbs1f90b”，它基于“fortran”并用于 gibbs 采样以估计二进制数据的方差分量。每次我尝试运行 thrgibbs1f90b 时，都会收到以下错误消息：

forrtl：严重（157）：程序异常 - 访问冲突

```
Image               PC                Routine            Line        Source

thrgibbs1f90b.exe    0000000140021961    Unknown    Unknown    Unknown
thrgibbs1f90b.exe    000000014000BB5B    Unknown    Unknown    Unknown
thrgibbs1f90b.exe    000000014026B41C    Unknown    Unknown    Unknown
thrgibbs1f90b.exe    000000014024F4E3    Unknown    Unknown    Unknown
kernel32.dll         0000000076E2652D    Unknown    Unknown    Unknown
ntdll.dll            0000000076F5C521    Unknown    Unknown    Unknown 
```

知道为什么我会收到此消息吗？

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-15T09:32:52.507

两个有根据的猜测

1.  程序试图读取或写入不存在的数组元素，例如 25 元素数组的第 26 个元素。
2.  为过程指定的虚拟参数与调用过程中的实际参数不匹配；例如，当期望 8 字节值时传递 4 字节实值（*反之亦然*）

其中任何一个都可能导致尝试访问程序进程无权访问的内存位置。还有许多其他可能的原因，但根据我的经验，这些是导致此类错误消息的 Fortran 程序中最常见的错误。

这两者都很容易发现，您需要（重新）编译您的程序并设置编译器选项以检查这些条件

# ruby-on-rails - 在rails中编辑时如何默认选项列表

> ID：13391270
> 
> 赞同：0
> 
> 时间：2012-11-15T03:46:49.200
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我有一个标准的 Rails 控制器，我想编辑它并能够保持当前选项列表处于选中状态。

所以我有一个用户填写的表格。
示例：名称（文本字段）和状态（选项列表）

当用户单击编辑按钮时，它会转到生成的编辑页面。用户先前已经选择了名称和状态。名称文本字段返回填充，但状态默认为列表中的第一个。
如何在控制器中获取我的编辑方法以将用户选择的状态传递给编辑视图页面？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T04:25:19.670

我不确定您是如何定义选项列表的，但使用[options_from_collection_for_select](http://apidock.com/rails/ActionView/Helpers/FormOptionsHelper/options_from_collection_for_select)并将 proc 传递给它以有条件地选择您的选项将起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T04:58:05.207

您可能无法批量分配与状态下拉列表关联的字段。确保在模型中正确设置了该属性，否则在使用 、或等`attr_accessible`方法时，您将忽略该属性分配。`new``create``attributes=``update_attributes`

如果不是这种情况，那么您的选项中的字符串键和模型中的整数值之间可能存在冲突。请记住，这`2`不是一回事，`"2"`因此您应该确定下拉菜单的键与相关类型匹配。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T04:37:12.170

这应该做的工作

```
<%= f.select :project_id, @list, :selected => "user_selected_value"] %> 
```

# monodevelop - UnityScript 是否支持 Object Literal 语法？

> ID：13391271
> 
> 赞同：4
> 
> 时间：2012-11-15T03:47:01.330
> 
> 标签：monodevelop, unity3d

我听说 UnityScript 非常接近 JavaScript。UnityScript 是否支持 JavaScript 的 Object Literal 语法？

例如

```
var x = {
    y: 12
}; 
```

奇怪的是，在 google 上搜索并`UnityScript "Object Literal"`没有产生有用的结果。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-15T04:55:20.577

[UnityScript 与 JavaScript](http://wiki.unity3d.com/index.php?title=UnityScript_versus_JavaScript)具有非常不同的语义。

使用此语法在 Unity 中创建新的 JavaScript 文件将无法编译。

```
#pragma strict

var x = {
    y: 12 // error: BCE0005
};

function Start () {
   Debug.Log (x.y); // error: BCE0019
} 
```

这将产生构建错误：

> NewBehaviourScript(4,5)：BCE0005：未知标识符：'y'。
> NewBehaviourScript(8,17)：BCE0019：“y”不是“Boo.Lang.Hash”的成员。

但是，您可以实现`Hashtable`：

```
#pragma strict

var x:Hashtable = new Hashtable();
x["y"] = 12;

function Start () {
   Debug.Log (x["y"]);
} 
```

# .net - DLL 参考不起作用。

> ID：13391281
> 
> 赞同：1
> 
> 时间：2012-11-15T03:48:38.423
> 
> 标签：.net, c#-4.0

我使用 C# 代码为不同的功能创建了一个 .dll 名称 CSSupport2010。当我将它添加到另一个项目（Windows 应用程序）作为参考时，它允许它这样做，并且当我在.cs 文件显示在 intellisense 中。但问题是当我构建项目时，它显示错误“找不到类型或命名空间名称“CSSuport2010””。任何人都可以帮我解决这个问题?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T03:58:23.147

如果这里没有错字——“找不到类型或命名空间名称“CSSuport2010””，那么问题是 CSSuport2010 缺少 ap，应该是 CSSupport2010。

否则，当您遇到此问题时，请检查以下几件事；1) 检查 dll 的属性，确保引用路径正确，如果您希望它在 bin 中，请确保将 copy-local 设置为“if newer”或“always”。2) 确保 dll 是最新的。3) 确保`using`在所有使用`CSSupport2010`.

# drupal - 如何自定义订购 Drupal Views 的组并为每个组包含自定义 HTML？

> ID：13391284
> 
> 赞同：0
> 
> 时间：2012-11-15T03:48:48.733
> 
> 标签：drupal, drupal-6, drupal-views

我有 6 种自定义内容类型和一个按节点类型显示 6 种类型和分组结果的视图。

示例：自定义内容类型是计算机、汽车、食品等。视图按这些类型对节点进行分组：

```
[exposed filters here]

Computers
 - HP P6500
 - Leveno HQ3112

Cars
 - Ford F150
 - GM Silverado

Food
 - Apple
 - Banana 
```

如何以任意方式对组进行排序？即食品、汽车、电脑。另外，如何为每个组和自定义 HTML 指定自定义标题？我想在每个组标题旁边放一张图片，标题上的自定义颜色等。我尝试使用 viewfield、views_field_view 和 viewreference 模块完成此操作，并为每种内容类型制作单独的子视图，以及一个主视图来显示它们，但我遇到了暴露的过滤器和分页工作的问题。我可能会以错误的方式解决这个问题。我们欢迎所有的建议！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-09T21:50:38.610

我在 Drupal 7 中使用 Views 3.x，所以我不确定这是否完全适用。但是我想提一下，因为我遇到了完全相同的问题（对您的问题进行排序）。

为了以任意方式对组进行排序，我想出的最快解决方案是使用 Global: PHP 排序（在 Views UI 中）。如果食物、汽车和计算机是内容类型，那么这样的东西应该可以工作......

```
switch ($row1->type) {
  case 'food':
    return -1;
    break;
  case 'computers':
    return 1;
    break;
  case 'cars':
    if ($row2->type == 'computers') {
      return -1;
    }
    elseif ($row2->type == 'food') {
      return 1;
    }
    else {
      return 0;
    }
    break;
  default:
    return 0;
  break;
} 
```

我还使用了[Views Grouping Row Limit](http://drupal.org/project/views_limit_grouping "视图分组行限制")模块，它可以更好地控制组。使用该模块，您可以通过模板和 CSS（组的唯一 ID）修改组输出，这将允许您为该组名称添加图像。

要重命名组标题，您可以使用 jQuery，但我最终使用了其中一个视图挂钩 hook_views_post_render：

```
function MODULE_views_post_render(&$view, &$output, &$cache) {
  $output = str_replace('<h3>Original Title</h3>', '<h3>' . t('New Title') . '</h3>', $output);
} 
```

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T08:23:57.517

为了完全控制您的视图输出，我建议您尝试查看 modules/views/theme 文件夹中的视图模板。不要直接编辑这些，而是​​将它们复制到您的主题文件夹并在那里进行编辑。（您需要清除缓存，以便 drupal 获取您的副本）。

要找出您应该编辑哪个模板，一个非常好的工具是[http://drupal.org/project/devel_themer](http://drupal.org/project/devel_themer)。

对于较小的更改，使用主题挂钩可能更容易，但如果您想做很多更改，直接在模板上工作可能是明智的。

# c++ - C++ 问题对 2D 字符数组进行冒泡排序

> ID：13391289
> 
> 赞同：3
> 
> 时间：2012-11-15T03:49:23.147
> 
> 标签：c++, arrays, multidimensional-array, bubble-sort, alphabetical

这个问题是关于我为作业编写的代码，所以是的，我必须使用冒泡排序，是的，我必须使用数组。

好的，所以我对一维数组进行了很好的冒泡排序，但尝试对两个数组进行排序让我很伤心。

我要做的是将姓名列表（即乔、鲍勃、贝蒂、杰克）按字母顺序排序。使用以下代码，程序尝试对事物进行排序（名称移动），但通常只是部分正确。

```
#include <iostream>
#include <fstream>
using namespace std;
void AlphaSort(char [][50]);
void GetInput(char [][50]);
void PrintArray(char [][50]);

int main()
{
    char name[4][50];
    cout << "Please enter 4 names:\n";
    GetInput(name);
    cout << endl << "The following names were received:\n";
    PrintArray(name);
    cout << endl << "The names will now be sorted.\n\n"
        << "Calling Sort Function....\n";
    AlphaSort(name);
    cout << endl << "The sorted name order is now:\n";
    PrintArray(name);

    return 0;
}

void GetInput(char name[][50])
{
    int i;

    for(i=0; i<4; i++)
        cin.getline(name[i], 50);
}

void PrintArray(char name[][50])
{
    int i;

    for(i=0; i<4; i++)
        cout << name[i] << endl;
}

void AlphaSort(char name[][50]) //I'm pretty sure the problem is in here.
{
    int Nnames = 4, pass, column, row, letter, sorted;
    char temp[50];

    cout << "Sorting Function Successfully Called...\n"
        << endl << "Names recieved by sort function:\n";

    PrintArray(name);

    //Specifically in this attempt at a bubble sort.
    for(pass=0; pass<(Nnames-1); pass++)
    {
        for(row=0; row<(Nnames-pass-1); row++)
        {
            for(column=0, sorted=0; sorted==0; column++)
            {
                if(name[row][column]>name[row+1][column])
                {
                    for(letter=0; letter<50; letter++)
                        temp[letter] = name[row][letter];
                    for(letter=0; letter<50; letter++)
                        name[row][letter]= name[row+1][letter];
                    for(letter=0; letter<50; letter++)
                        name[row+1][letter] = temp[letter];
                    sorted = 1;
                }
                else if (name[row][column] == name[row+1][column]);
            }
        }
    }    

    cout << endl << "Name order post sort:\n";

    PrintArray(name);
} 
```

当前运行它通常看起来像这样。

> 请输入 4 个名字： Hammy Harry Ashe Aaron
> 
> 收到以下姓名： Hammy Harry Ashe Aaron
> 
> 现在将对名称进行排序。
> 
> 调用排序函数....排序函数调用成功...
> 
> 排序函数收到的名字：Hammy Harry Ashe Aaron
> 
> 姓名排序后排序：Aaron Ashe Harry Hammy
> 
> 排序后的名称顺序现在是：Aaron Ashe Harry Hammy

我一直在寻找类似的问题，但我无法弄清楚为什么它很愚蠢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T04:48:17.857

看来我的问题在于我的 if 语句如何没有解决它已经处于正确顺序的可能性，这使它循环，直到它后来找到一个它想要切换的字母。固定代码如下所示：

```
void AlphaSort(char name[][50])
{
     int Nnames = 4, pass, column, row, letter, sorted;
     char temp[50];

     cout << "Sorting Function Successfully Called...\n"
          << endl << "Names recieved by sort function:\n";

     PrintArray(name);

     for(pass=0; pass<(Nnames-1); pass++)
     {
                 for(row=0; row<(Nnames-pass-1); row++)
                 {
                            for(column=0, sorted=0; sorted==0; column++)
                            {
                                          if(name[row][column]>name[row+1][column])
                                          {
                                                                     for(letter=0; letter<50; letter++)
                                                                              temp[letter] = name[row][letter];
                                                                     for(letter=0; letter<50; letter++)
                                                                              name[row][letter]= name[row+1][letter];
                                                                     for(letter=0; letter<50; letter++)
                                                                              name[row+1][letter] = temp[letter];
                                                                     sorted = 1;
                                          }
                                          else if (name[row][column]<name[row+1][column])//This is the fix.
                                               sorted = 1;
                            }
                 }
     }    

     cout << endl << "Name order post sort:\n";

     PrintArray(name);
} 
```

# php - 编写 PHP 函数并将其传递给字符串

> ID：13391301
> 
> 赞同：-2
> 
> 时间：2012-11-15T03:51:19.577
> 
> 标签：php, wordpress, function

我正在构建一个 Wordpress 主题，并正在显示自定义帖子类型的自定义字段。而不是写很多次：

```
<?php if(get_post_meta($post->ID, 'custom_item', true)){ echo $post_meta_data['custom_item'][0]; } ?> 
```

我不能写一个函数来缩短这个过程吗？我将传递给它一个变量的东西，它可以插入到函数中。这是我到目前为止没有运气的情况：

```
<?php 
    function display_meta($custom_meta) {
    if(get_post_meta($post->ID, $custom_meta, true)){ echo $post_meta_data[$custom_meta][0]; }} 
?> 
```

然后我希望能够为每个字段做这样的事情：

```
<?php echo display_meta('custom_item') ?> 
```

我对 PHP 还比较陌生，这是我第一次尝试编写这样的函数。任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T04:04:29.803

看起来您还需要将 $post 和 $post_meta_data 传递给函数。

```
<?php 
function display_meta($custom_meta, $post, $post_meta_data) {
    if(get_post_meta($post->ID, $custom_meta, true)){ 
        echo $post_meta_data[$custom_meta][0]; 
    }
} 
?> 
```

并且您正在尝试（错误地）进行两次回声。像这样的东西会更好

```
<?php display_meta('custom_item', $post, $post_meta_data) ?> 
```

您应该做一些简单的 php 教程并了解函数和范围。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T03:55:53.303

我相信你在谈论 php5.3 上可用的闭包

```
$myFunc = function()
{
  return 1;
};

function test($callback)
{
   if(is_callable($callback))
   {
      $callback();
   }
}

test($myFunc); 
```

# c# - 将列表视图中的图像保存到文件夹

> ID：13391306
> 
> 赞同：1
> 
> 时间：2012-11-15T03:51:56.057
> 
> 标签：c#

我有这个列表视图和一个按钮。列表视图中还有几个图像。当按下按钮时，我想从文件夹内的列表视图中保存图像。而且我不知道该怎么做。你能帮帮我吗？谢谢。这是我用来将图像插入列表视图的代码。

```
OpenFileDialog opend1 = new OpenFileDialog();

        opend1.Filter = "Image Files(*.BMP;*.JPG;*.GIF)|*.BMP;*.JPG;*.GIF|All files (*.*)|*.*";

        opend1.Multiselect = true;

        if (opend1.ShowDialog() == DialogResult.OK)
        {                

            listView1.View = View.LargeIcon;

            imageList.ImageSize = new Size(100, 100);

            for (int c = 0; c < opend1.FileNames.Length; c++)
            {
                Image i = Image.FromFile(opend1.FileNames[c].ToString());

                Image img = i.GetThumbnailImage(100, 100, null, new IntPtr());

                imageList.Images.Add(img);

            }

            listView1.LargeImageList = imageList;
            ListViewItem lstItem = new ListViewItem();
            lstItem.ImageIndex = imageList.Images.Count-1;
            listView1.Items.Add(lstItem);

            listView1.Refresh();

        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T04:27:06.910

对于图像列表 (imageList.Images) 中的每个图像，调用它（使用您自己提供的目录和文件名）：

```
img.Save(@"C:\MyImage.jpg", ImageFormat.Jpeg); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T04:27:38.360

```
foreach (Image image in listView1.LargeImageList.Images)
{
    string filename = ""; // make this whatever you need...
    image.Save(filename);
} 
```

# facebook - Facebook Graph API 返回专辑的部分结果

> ID：13391308
> 
> 赞同：0
> 
> 时间：2012-11-15T03:52:46.283
> 
> 标签：facebook, facebook-graph-api

通过图形 API 从 Facebook 相册中提取照片时，即

```
https://graph.facebook.com/<albumid>/photos?access_token=<token>&limit=999&fields=name,source 
```

对于某些专辑，它只提供部分结果。例如，包含 15 张照片的相册可能只返回 13 张照片。这个电话：

```
https://graph.facebook.com/<albumid>?access_token=<token>&fields=count 
```

...确实返回了 15 的正确计数。我的第一个想法是，也许这 2 张“丢失”的照片有更多的限制隐私设置，但整个相册中的每张照片（顺便说一下，由令牌的所有者拥有）都有相同的“对朋友可见”隐私设置。正如预期的那样，大多数相册确实会返回所有照片。

关于可能导致这种行为的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-28T03:40:23.473

我的一张相册丢失了 4 张 33 的照片。我在权限中添加了“user_status”，它突然起作用了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T09:21:33.423

而不是它发生的原因，我建议你一个解决方法。Graph api 以返回部分结果而闻名。（你可以搜索一下，你会遇到很多这样的问题。）

为什么不走 FQL 的方式呢？

结帐：https://developers.facebook.com/docs/reference/fql/photo/

您可以在单个查询中获取相册中图片的 id 或直接图像链接。

```
Sample : SELECT src_big FROM photo WHERE aid="20531316728_324257" 
```

这将返回相册中图片的最大版本的 url。

只要您使用的是`user access_token`而不是应用程序 access_token，这应该可以解决您的问题。

# iphone - 录制时如何隐藏iOS状态下的红条？

> ID：13391311
> 
> 赞同：3
> 
> 时间：2012-11-15T03:53:00.843
> 
> 标签：iphone, objective-c, ios, ios4, avaudiorecorder

我用AVAudioRecorder录制声音。我发现当我分配它并开始录制时，有时会在状态栏下出现一个红色的条（就像你在后台调用时的条）。如何隐藏它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T06:32:06.697

你不能那样做。每个应用程序，包括股票语音备忘录应用程序，在使用麦克风时都会有条形图。

# backbone.js - 扩展 BackBone.js 网站应用程序 - 呈现新视图的问题

> ID：13391313
> 
> 赞同：0
> 
> 时间：2012-11-15T03:53:19.017
> 
> 标签：backbone.js

我目前正在尝试使用backbone.js，我认为最好的方法是进入在线教程和文档。在线教程和示例应用程序非常好，但为了通过知识构建，我正在尝试构建我自己的示例网站 CRUD 应用程序。对于示例，基本上我想要做的是合并两个当前的在线示例/教程。试图更好地理解使用多个模型、集合和视图。

不幸的是我被卡住了......我为冗长的解释道歉，但作为一个新手，我试图尽可能地解释这个问题......

我的网站应用程序示例基于以下教程：

[https://github.com/ccoenraets/backbone-cellar/tree/master/bootstrap](https://github.com/ccoenraets/backbone-cellar/tree/master/bootstrap)

查看在线示例：

[http://coenraets.org/backbone-cellar/bootstrap/](http://coenraets.org/backbone-cellar/bootstrap/)

我能够遵循本教程并拥有该站点的工作版本。现在我希望扩展应用程序以包含更多适合应用程序（backbone.js）结构的页面。如果您查看教程，您会注意到有一个“关于”页面，它只是将静态 html 模板加载到应用程序中。我想做的是添加一个显示联系人管理器的新页面。联系人管理器被剥夺了以下教程：

[http://net.tutsplus.com/tutorials/javascript-ajax/build-a-contacts-manager-using-backbone-js-part-1/](http://net.tutsplus.com/tutorials/javascript-ajax/build-a-contacts-manager-using-backbone-js-part-1/)

*请注意：为简单起见，此时我仅使用本教程的第 1 部分。*

好的，现在解释一下我遇到的问题......首先，我将概述我所做的事情。在应用程序上，我在 headerView 中添加了一个名为 Directory 的新链接。在 main.js 页面（原始示例：[https](https://github.com/ccoenraets/backbone-cellar/blob/master/bootstrap/js/main.js) ://github.com/ccoenraets/backbone-cellar/blob/master/bootstrap/js/main.js ）我添加了如下代码：

```
var AppRouter = Backbone.Router.extend({

routes: {
    ""                  : "list",
    "wines/page/:page"  : "list",
    "wines/add"         : "addWine",
    "wines/:id"         : "wineDetails",
    "about"             : "about",
    "directory"         : "directory"
},

initialize: function () {
    this.headerView = new HeaderView();
    $('.header').html(this.headerView.el);
},

list: function(page) {
    var p = page ? parseInt(page, 10) : 1;
    var wineList = new WineCollection();
    wineList.fetch({success: function(){
        $("#content").html(new WineListView({model: wineList, page: p}).el);
    }});
    this.headerView.selectMenuItem('home-menu');
},

wineDetails: function (id) {
    var wine = new Wine({id: id});
    wine.fetch({success: function(){
        $("#content").html(new WineView({model: wine}).el);
    }});
    this.headerView.selectMenuItem();
},

addWine: function() {
    var wine = new Wine();
    $('#content').html(new WineView({model: wine}).el);
    this.headerView.selectMenuItem('add-menu');
},

about: function () {
    if (!this.aboutView) {
        this.aboutView = new AboutView();
    }
    $('#content').html(this.aboutView.el);
    this.headerView.selectMenuItem('about-menu');
},

directory: function () {
    if (!this.directoryView) {
        this.directorytView = new DirectoryView();
    }
    $('#content').html(this.directoryView.el);
    this.headerView.selectMenuItem('directory-menu');
} 
```

});

utils.loadTemplate(['HeaderView', 'WineView', 'WineListItemView', 'AboutView', 'DirectoryView'], function() { app = new AppRouter(); Backbone.history.start(); });

现在对于目录（联系人管理器）页面，为了解释起见，我按照教程将模型视图和集合留在了单个 .js 文件中 - 我当然希望将文件分开（分成模型和视图) 一旦我让它工作。根据教程，联系人管理器（目录）的代码如下：

```
//demo data
window.contacts = [
    { name: "Contact 1", address: "1, a street, a town, a city, AB12 3CD", tel: "0123456789", email: "anemail@me.com", type: "family" },
    { name: "Contact 2", address: "1, a street, a town, a city, AB12 3CD", tel: "0123456789", email: "anemail@me.com", type: "family" },
    { name: "Contact 3", address: "1, a street, a town, a city, AB12 3CD", tel: "0123456789", email: "anemail@me.com", type: "friend" },
    { name: "Contact 4", address: "1, a street, a town, a city, AB12 3CD", tel: "0123456789", email: "anemail@me.com", type: "colleague" },
    { name: "Contact 5", address: "1, a street, a town, a city, AB12 3CD", tel: "0123456789", email: "anemail@me.com", type: "family" },
    { name: "Contact 6", address: "1, a street, a town, a city, AB12 3CD", tel: "0123456789", email: "anemail@me.com", type: "colleague" },
    { name: "Contact 7", address: "1, a street, a town, a city, AB12 3CD", tel: "0123456789", email: "anemail@me.com", type: "friend" },
    { name: "Contact 8", address: "1, a street, a town, a city, AB12 3CD", tel: "0123456789", email: "anemail@me.com", type: "family" }
];

//define product model
window.Contact = Backbone.Model.extend({
    defaults: {
        photo: "/img/placeholder.png"
    }
});

//define directory collection
window.Directory = Backbone.Collection.extend({
    model: Contact
});

//define individual contact view
window.ContactView = Backbone.View.extend({
    tagName: "article",
    className: "contact-container",
    template: $("#contactTemplate").html(),

    render: function () {
        var tmpl = _.template(this.template);

        $(this.el).html(tmpl(this.model.toJSON()));
        //alert('this model: ' + this.model.toJSON().name);

        return this;
    }
});

//define master view
window.DirectoryView = Backbone.View.extend({
    el: $("#contacts"),

    initialize: function () {
        this.collection = new Directory(contacts);
        this.render();
    },

    render: function () {
        var that = this;
        _.each(this.collection.models, function (item) {
            that.renderContact(item);
        }, this);
    },

    renderContact: function (item) {
        var contactView = new ContactView({
            model: item
        });         

        this.$el.append(contactView.render().el);
    }
}); 
```

我所做的更改只是删除“var”并替换为“window”。以适应应用程序的现有结构。例如：

var DirectoryView = Backbone.View.extend({

变成：

window.DirectoryView = Backbone.View.extend({

现在到我遇到的问题。我能够获取代码以输出（呈现）html 代码以显示模板。

我相信问题在于

```
//define individual contact view
window.ContactView = Backbone.View.extend({
    tagName: "article",
    className: "contact-container",
    template: $("#contactTemplate").html(),

    render: function () {
        var tmpl = _.template(this.template);

    $(this.el).html(tmpl(this.model.toJSON()));
    alert('this model: ' + this.model.toJSON().name);

    return this;
    }
}); 
```

现在我知道数据正在被正确解析，因为“警报”正在正确输出名称。我遇到的问题是以下代码行：

```
var tmpl = _.template(this.template); 
```

正在引发以下错误：“未捕获的 TypeError：无法调用 null 的方法 'replace'”。

我对如何解决这个问题一无所知:(

DirectoryView.html 模板代码是：

```
<div class="row">
<div class="span12">
    <div id="contact"></div>
    <script id="contactTemplate" type="text/template">
        <img src="<%= photo %>" alt="<%= name %>" />
        <h1><%= name %><span><%= type %></span></h1>
        <div><%= address %></div>
        <dl>
            <dt>Tel:</dt><dd><%= tel %></dd>
            <dt>Email:</dt><dd><a href="mailto:<%= email %>"><%= email %></a></dd>
        </dl>
    </script>
</div> 
```

我希望我提供了足够的信息。如果需要更多信息，请告诉我。

谢谢你看:)

杰克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T20:20:24.573

> 无法调用 null 的方法“替换”

这意味着在`_.template`方法内部你试图调用`replace`一个空值，大概是一个字符串。undecore 方法看起来像这样（来自[带注释的源](http://underscorejs.org/docs/underscore.html#section-130)）

```
_.template = function(text, data, settings) {
  settings = _.defaults({}, settings, _.templateSettings);

  var matcher = new RegExp([
    (settings.escape || noMatch).source,
    (settings.interpolate || noMatch).source,
    (settings.evaluate || noMatch).source
  ].join('|') + '|$', 'g');

  // This is the only place where replace is used
  var index = 0;
  var source = "__p+='";
  // Replace used on variable text
  text.replace(matcher, function(match, escape, interpolate, evaluate, offset) {
    // replace used on source that can't be null
    source += text.slice(index, offset)
      .replace(escaper, function(match) { return '\\' + escapes[match]; });
    source +=
      escape ? "'+\n((__t=(" + escape + "))==null?'':_.escape(__t))+\n'" :
      interpolate ? "'+\n((__t=(" + interpolate + "))==null?'':__t)+\n'" :
      evaluate ? "';\n" + evaluate + "\n__p+='" : '';
    index = offset + match.length;
  });
  source += "';\n"; 
```

所以变量`text`必须为空。在您的代码`text`中是`this.template`，因此在初始化时它必须为 null 。

您确定当您扩展`View`为 create`ContactView`时，该`#contactTemplate`元素已加载到 DOM 中吗？问题一定在那里。尝试控制台记录 this.template 以查看它是否真的为空。如果您想确保在运行任何 javascript 之前加载 DOM，请将它们包装在 jQuery[就绪函数](http://api.jquery.com/ready/)中。

# c++ - C++ for 范围循环

> ID：13391318
> 
> 赞同：3
> 
> 时间：2012-11-15T03:54:03.870
> 
> 标签：c++

我在玩范围循环，例如：

```
for (auto i : range) { 
```

这相当于

```
auto it = range.begin();
auto i = *it; 
```

但我想要的是：

```
for (auto it : range) {
    *it; // the it var is not derefernced by range loop 
```

有没有办法做到这一点？也许是这样的：

```
for (auto it : make_range(range)) {
    *it; // the it var is not derefernced by range loop 
```

……

到目前为止，我发现的一种解决方案是使用 boost::irange，例如：

```
for (auto it : irange(range.begin(), range.end())) { 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T04:07:58.483

for-range 循环的全部目的是遍历容器的内容。所以不，没有本地方法可以访问循环使用的迭代器。如果你需要，你不应该一开始就使用 for-range 循环。在 for-range 循环中访问容器迭代器的唯一选择是编写一个自定义适配器类，该类包装容器并公开其自己的迭代器，这些迭代器在取消引用时返回容器迭代器。然后你直接遍历适配器而不是容器。

# c# - 使用 SWIG 获取 C 结构以记住 C# 更改？

> ID：13391321
> 
> 赞同：0
> 
> 时间：2012-11-15T03:54:18.090
> 
> 标签：c#, c, swig

所以我试图在Linux（MonoDevelop）上使用带有SWIG的C#中的C库。一切编译和运行都很好，但是当我调用 MsgBus_UseString 时，控制台输出显示乱码而不是“HappyHappyJoyJoy”。

这是我在 C# 中的主要内容：

```
 public static void Main (string[] args)
        {               
            SWIGTYPE_p_msgbus msgBusObj = msgbus_client.MsgBus_Create();

            ret = msgbus_client.MsgBus_setString(msgBusObj, "HappyHappyJoyJoy");
            Console.WriteLine ("Set setString ret = "+ret);

            ret = msgbus_client.MsgBus_UseString(msgBusObj);
            Console.WriteLine ("UseString ret = "+ret);
        } 
```

下面是函数 MsgBus_UseString 在 C 库中的样子：

```
static int MsgBus_UseString( msgbus_t * pObj )
{
    if ( pObj ){
        printf("The String = %s", pObj->TheString);
        return Connect(pObj->TheString);
    }
} 
```

C 库中的 MsgBus_setString 函数：

```
int MsgBus_setString( msgbus_t * pObj, const char * theStringIn )
{
  int status = 2;  // invalid msgbus_t pointer

  if( pObj ) {
    pObj->TheString = (char*)theStringIn;
    status = 0;
  }

  printf(fp, "pObj->TheString = %s \n", pObj->TheString);

  return status;
} 
```

这是我的 SWIG 界面的样子：

```
/* Creates wrappers so that msgbus_client can be used in C# */
%module msgbus_client
%{
#include "msgbus_client.h"
#include "msgbus_var.h"
%}

%inline %{
typedef signed char     int8_t;
typedef short int       int16_t;
typedef int         int32_t;
typedef long long int       int64_t;
typedef unsigned char       uint8_t;
typedef unsigned short int  uint16_t;
typedef unsigned int        uint32_t;
typedef unsigned long long int  uint64_t;
typedef long int _time_t;
%}

%include "msgbus_client.h"
%include "msgbus_var.h" 
```

这是 msgbus_client.h 文件中的 typedef：

```
typedef struct msgbus msgbus_t; 
```

我已经为此苦苦挣扎了一段时间。MsgBus_setString 函数中的 printf 返回“HappyHappyJoyJoy”，但由于某种原因，调用 MsgBus_UseString 函数时该数据丢失。正如你所看到的，我一个接一个地调用它们，“set”函数返回 0（无错误），而“use”函数返回 -1（错误）。这是有道理的，因为 printf 显示 TheString 是一堆随机/不可读的字符。msgbus 结构非常大，所以我想避免包装整个东西，但如果没有其他方法，我会这样做。

不确定是否需要，但以防万一，这里是 C lib 中的 create 函数：

```
msgbus_t * MsgBus_Create()
{
    struct msgbus * pObj = NULL;

    pObj = (struct msgbus*)calloc(1, sizeof(struct msgbus));
    if ( pObj ){

        pObj->TheString = NULL;

    }

    return pObj;
} 
```

如果不是很明显我是 SWIG 新手，但根据文档，这应该可以工作。我显然错过了一些东西，但我似乎无法弄清楚它是什么。任何帮助是极大的赞赏。

**编辑：** 感谢您的快速回复。

下面是 msgbus 结构的定义：

```
struct msgbus{
    int             fd;             
    int             run;            
    pthread_t       thread;        
    //.           
    //.   More Stuff
    //.     
    tlv_buffer_t *  pSend;          
    tlv_buffer_t *  pResp;          

    char *          TheString;        /*!< The String */
}; 
```

msgbus 结构的定义在 msgbus_client.c 和 msgbus_client.h 中，typedef 如下：

```
typedef struct msgbus msgbus_t; 
```

这是上面提到的。这是执行 SWIGing 的脚本：

```
 # Begin Swiggin! #
    echo "Starting to SWIG! ... " 
    swig -csharp -outdir msgbus_swig msgbus_client.i

    Switches="-c -I/home/includes "\
"-Wall -Wundef -Wstrict-prototypes -Wno-trigraphs  -g -Wall -D__linux__ "\

    # Build binaries #
    g++ $Switches -o "$msgbusBin/msgbus_client_wrap.o" "msgbus_client_wrap.c"

    # Generate Shared Lib #
    g++ -isystem /home/include \
-isystem /home/another/include  \
-D__packed__= -DIMAGE_APPS_PROC -DFEATURE_Q_SINGLE_LINK -DFEATURE_Q_NO_SELF_QPTR \
-DFEATURE_LINUX -DFEATURE_NATIVELINUX -DFEATURE_DSM_DUP_ITEMS -DTARGET_desktop \
-I/home/more/include -Wall -Wundef \
-Wstrict-prototypes -Wno-trigraphs  -g -Wall -D__linux__ -fpic -shared \
-L/home/lib \
-Wl,-soname,libmsgbus_client.so -o "libmsgbus_client.so" \
"$msgbusBin/msgbus_client.o" "$msgbusBin/msgbus_var.o" "$msgbusBin/msgbus_client_wrap.o" -lmificommon -lc -lrt -lpthread 

    echo "SWIG complete!" 
```

所以我从 make 日志中复制了很多 g++ 调用，所以那里有一些我不完全理解的开关。如果我需要显示其他内容，请告诉我。再次感谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T02:25:13.230

For your `string` issue the problem is that you try to marshal a C# string directly to a `char *`. But please note `char *` stores a pointer and not the `string` itself. What you need to do is to copy the `string`. For that you probably also need to allocate/reserve memory.

# asp.net-mvc - 重新安装 Windows 后 Azure ASP.NET MVC 3 应用程序不会显示 css/js

> ID：13391322
> 
> 赞同：1
> 
> 时间：2012-11-15T03:54:45.280
> 
> 标签：asp.net-mvc, asp.net-mvc-3, iis, azure

我不得不在周末重新安装 Windows（win 7 Ultimate 64 位），并重新安装了 Visual Studio，特别是 VS 2010 Ultimate，以及 Azure SDK、EntityFramework 和其他一些框架。

这样做之后，我在尝试测试我的 Azure 应用程序时遇到了一些问题，在我手动启用 IIS 并运行 aspnet_regiis 之前，该角色不会启动。此时应用程序将运行，并按预期拉出登录页面，但现在 css 和 javascript 文件都不会拉出。出于某种原因，只加载了基本的 html，我可以登录到我的应用程序并继续到下一页，但仅此而已；由于我的应用程序严重依赖 ajax，因此我无法走得更远。

如果我尝试直接（在我的浏览器中）拉出 Content/Site.css 文件，我只会得到一个空白文件，与我们使用的 js 文件相同。（服务器响应 200 OK，但只是一个空白文件）

我不太确定该怎么做，但我会指出这个项目/解决方案在重新安装之前确实构建并运行良好，所以它不应该是任何代码方面的错误；环境中的东西。我确实注意到，如果我通过在 IIS 管理器中的部署在资源管理器中拉出我的 Content 文件夹，那么 Site.css 文件就在那里..所以我不确定为什么它不会被提供？

我很想尝试重新安装 Azure SDK，但我使用 Web Platform Installer v4.0 安装了它，我看不到任何使用此工具卸载的方法。

有什么建议么？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T08:32:35.763

事实证明，问题再次出现在 Windows 功能中，尽管我启用了 IIS/Asp.Net（它自动启用了许多其他功能），但显然我仍然必须手动启用选项“IIS/万维网服务/常见的 HTTP 功能/静态内容”。

这允许 IIS 提供这些静态文件。

谢谢你们的帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T21:18:02.003

如果您在主 web.config 中拒绝授权，则 css 将不会显示

```
 <system.web>
    <authorization>
      <deny users="?"/>
    </authorization>
  </system.web> 
```

# node.js - 如何将'0'和'1'一致的字符串（如01001001）解析为Node.js中的base64代码？

> ID：13391325
> 
> 赞同：0
> 
> 时间：2012-11-15T03:55:20.363
> 
> 标签：node.js

[11 月 11 日](http://segmentfault.com/game/)有 一款 中国 程序员 中 流行 的游戏. 第 9 个问题非常难（抱歉，那个 url 包含 MD5 和 session，我可以把它贴在这里）。有一些用英文关键字写的中文[指南。](http://wangjstu.diandian.com/post/2012-11-11/40042873665)甚至有人试图[用一行 Haskell 来解决这个问题](http://weibo.com/1684815495/z4If9oRIP)......

所以，问题：

给定一个字符串看起来像这样，并得到下一个问题的关键：

```
01001000 00110100 01110011 01001001 01000001 01000011 01001010 01001011
01101110 01101100 01000001 01000001 01000001 00101011 00110001 01011010
01000010 00110001 
```

我在这里将整个二进制字符串复制到一个要点中：[https ://gist.github.com/4054140](https://gist.github.com/4054140)

根据指南，二进制代码可以读取为base64代码，然后可以显示为图像..

我的问题是：如何将这些二进制字符串解析为 base64 代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T11:48:10.453

我尽力解析它并得到一个 tarball ......只有一步到我的目的地但是......

我在 LiveScript 中的解决方案，希望对您有所帮助...

```
require! \fs
require! \buffer
require! \path
require! \zlib
{exec} = require \child_process

show = console.log 

fs.read-file \string.txt \utf8 (err, file) ->
  # throw err if err?
  res = file
    .replace /\_/g, '1'
    .replace /\n/g, ' '
    .split ' '
    .map -> parse-int it, 2
    .map -> String.from-char-code it
    .join ''

  b = new Buffer res, \base64

  zlib.gunzip b, (err, data) ->
    fs.write-file \c.tar data 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T05:16:42.343

这些看起来像以 2 为底的数字。如果是这种情况，您可以从第一组（“01001000”）中取出每个数字的前 6 位，例如“010010”并获取这 6 位的十进制值。对于第一个数字，您将得到 18 base 10：

```
 base10 = parseInt("010010", 2) -> 18 
```

下一步是获取该十进制数的 base64。根据此表[http://en.wikipedia.org/wiki/Base64](http://en.wikipedia.org/wiki/Base64) 18 将被映射到“S”

然后你取下一组 6 位，这将是第一组 8 位（“00”）中的剩余 2 位加上下一段（“0011”）中的 4 位，并执行相同的操作：

```
 base10 = parseInt("000011", 2) -> 3 
```

同样，根据 Wikipedia 链接，十进制 3 映射到“D”。

你会继续前进，直到你处理完所有的比特。

此页面包含有关如何将基数 2 转换为基数 10 的信息：http: [//www.name-generators.com/javascript-2/how-to-make-binary-decimal-conversion-in-javascript。 htm](http://www.name-generators.com/javascript-2/how-to-make-binary-decimal-conversion-in-javascript.htm)

# iphone - sqlite在多列中搜索

> ID：13391326
> 
> 赞同：1
> 
> 时间：2012-11-15T03:55:24.980
> 
> 标签：iphone, ipad, sqlite, search

我在 iPad 应用程序中有一个简单的数据库，其中包含几个表。

UI 在主从视图控制器中正确显示表数据。我想添加一个搜索功能，它将在所有表的所有字段/列中搜索给定的文本并给出结果。

一种粗略的方法是为每列使用 where 子句编写选择查询。但我相信会有一些适当的方法。

或者是否可以搜索 UITableView 本身并刷新数据？

问候，

尼拉夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T04:38:43.133

在表中搜索的代码

```
 - (void) searchTableView {

NSString *searchText = searchBar.text;

if([searchText length] == 0)

{
    [searchArr addObjectsFromArray:userArr];

}

NSMutableArray *searchArray = [[NSMutableArray alloc] init];

for (int i=0; i<[userArr count]; i++) {

    NSString *sTemp =  [[userArr objectAtIndex:i] objectForKey:@"name"];

         NSRange titleResultsRange = [[sTemp lowercaseString] rangeOfString:[searchText lowercaseString]];

        if(titleResultsRange.location != NSNotFound && titleResultsRange.location == 0)
    { 

        [searchArr addObject:[userArr objectAtIndex:i]];
    }

}
searchArray = nil;
   } 
```

# python - 如何重新排列这样的列表（python）？

> ID：13391334
> 
> 赞同：3
> 
> 时间：2012-11-15T03:55:56.260
> 
> 标签：python, algorithm, list

例如，列表`to_be`包括：3 of `"a"`, 4 of `"b"`, 3 of `"c"`, 5 of `"d"`...

```
to_be = ["a", "a", "a", "b", "b", "b", "b", "c", "c", "c", "d", "d", "d", "d", "d", ...] 
```

现在我希望它是这样的：

```
done = ["a", "b", "c", "d", ... , "a", "b", "c", "d", ... , "b", "d", ...] (notice: some items are more than others as in amounts, but they need to be still in a pre-defined order, alphabetically for example) 
```

最快的方法是什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-15T04:05:44.163

假设我理解你想要什么，它可以通过结合[`itertools.zip_longest`](http://docs.python.org/3/library/itertools.html#itertools.zip_longest),[`itertools.groupby`](http://docs.python.org/3/library/itertools.html#itertools.groupby)和相对容易地完成[`itertools.chain.from_iterable()`](http://docs.python.org/3/library/itertools.html#itertools.chain.from_iterable)：

我们首先将项目分组（`"a"`s、`"b"`s 等），我们将它们压缩以按照您想要的顺序获取它们（每组一个），使用链生成单个列表，然后删除`None`压缩引入的值。

```
>>> [item for item in itertools.chain.from_iterable(itertools.zip_longest(*[list(x) for _, x in itertools.groupby(to_be)])) if item]
['a', 'b', 'c', 'd', 'a', 'b', 'c', 'd', 'a', 'b', 'c', 'd', 'b', 'd', 'd'] 
```

但是，您可能希望分离出一些[列表推导](http://www.youtube.com/watch?v=pShL9DCSIUw)以使其更具可读性：

```
>>> groups = itertools.zip_longest(*[list(x) for _, x in itertools.groupby(to_be)])
>>> [item for item in itertools.chain.from_iterable(groups) if item]
['a', 'b', 'c', 'd', 'a', 'b', 'c', 'd', 'a', 'b', 'c', 'd', 'b', 'd', 'd'] 
```

（给定的版本是 3.x，对于 2.x，你会想要[`izip_longest()`](http://docs.python.org/2/library/itertools.html#itertools.izip_longest)。）

与往常一样，如果您期望空字符串、0 等......那么您将想要这样做`if item is not None`，并且如果您需要保持`None`值的完整，请创建一个哨兵对象并检查其身份。

您还可以使用文档中给出[的`roundrobin()`配方](http://docs.python.org/3/library/itertools.html#itertools-recipes)，作为压缩的替代方法，这使得它变得如此简单：

```
>>> list(roundrobin(*[list(x) for _, x in itertools.groupby(to_be)]))
['a', 'b', 'c', 'd', 'a', 'b', 'c', 'd', 'a', 'b', 'c', 'd', 'b', 'd', 'd'] 
```

最后一点，观察者可能会注意到我从`groupby()`生成器中制作列表，这可能看起来很浪费，原因来自[文档](http://docs.python.org/3/library/itertools.html#itertools.groupby)：

> 返回的组本身就是一个迭代器，它与 groupby() 共享底层迭代。因为源是共享的，所以当 groupby() 对象前进时，之前的组不再可见。因此，如果以后需要该数据，则应将其存储为列表。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T04:07:39.463

```
to_be = ["a", "a", "a", "b", "b", "b", "b", "c", "c", "c", "d", "d", "d", "d", "d"]
counts = collections.Counter(to_be)
answer = []
while counts:
    answer.extend(sorted(counts))
    for k in counts:
        counts[k] -= 1
    counts = {k:v for k,v in counts.iteritems() if v>0} 
```

现在，`answer`看起来像这样：

```
['a', 'b', 'c', 'd', 'a', 'b', 'c', 'd', 'a', 'b', 'c', 'd', 'b', 'd', 'd'] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-15T04:07:45.227

我不确定这是否最快，但这是我的尝试：

```
>>> d = defaultdict(int)
>>> def sort_key(a):
...     d[a] += 1
...     return d[a],a
...

>>> sorted(to_be,key=sort_key)
['a', 'b', 'c', 'd', 'a', 'b', 'c', 'd', 'a', 'b', 'c', 'd', 'b', 'd', 'd'] 
```

包裹在一个函数中：

```
def weird_sort(x):
    d = defaultdict(int)
    def sort_key(a):
        d[a] += 1
        return (d[a],a)
    return sorted(x,key=sort_key) 
```

当然，这要求迭代中的元素是可散列的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-15T04:08:03.643

比 Lattyware 的优雅一点：

```
import collections
def rearrange(l):
    counts = collections.Counter(l)
    output = []
    while (sum([v for k,v in counts.items()]) > 0):
        output.extend(sorted([k for k, v in counts.items() if v > 0))
        for k in counts:
            counts[k] = counts[k] - 1 if counts[k] > 0 else 0
    return counts 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-15T04:08:07.590

“手动和状态机”执行此操作应该更有效 - 但对于相对较小的列表（<5000），您应该毫无问题地利用 Python 的优势来执行此操作：

```
to_be = ["a", "a", "a", "b", "b", "b", "b", "c", "c", "c", "d", "d", "d", "d", "d","e", "e"]

def do_it(lst):
    lst = lst[:]
    result = []

    while True:
        group = set(lst)
        result.extend(sorted(group))
        for element in group:
            del lst[lst.index(element)]
        if not lst:
            break
    return result

done = do_it(to_be) 
```

上述函数的“大 O”复杂度应该非常大。我还没有想弄清楚。

# objective-c - “此类不符合键的键值编码”

> ID：13391338
> 
> 赞同：3
> 
> 时间：2012-11-15T03:56:14.583
> 
> 标签：objective-c, ios

我觉得我在这里遗漏了一些明显的东西，但我是 obj-c 的新手，所以也许这只是我不知道的东西。

我在运行时收到异常错误...

> NSDictionaryI 0x9d384d0> setValue:forUndefinedKey:]: 这个类不是 key overObject 的 key value coding-compliant。

在此代码的第 4 行...

```
NSDictionary *tempDictionary = [[NSDictionary alloc] init];

    Boolean overObjectYES = NO;
    Boolean overObjectNo = NO;

    [tempDictionary setValue:[NSNumber numberWithBool:overObjectYES] forKey:@"overObject"]; 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-15T04:03:02.453

我认为这是使用`NSDictionary`when you mean`NSMutableDictionary`和在通常认为更合适的`setValue`时候发送消息的组合。`setObject`有关详细信息，请参阅此问题：

[NSDictionary setValue:forKey: -- getting "this class is not key value coding-compliant for the key"](https://stackoverflow.com/questions/8023829/nsdictionary-setvalueforkey-getting-this-class-is-not-key-value-coding-com)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-15T04:01:50.567

你的意思`tempDictionary`是成为一个*可变*字典吗？如果是这样，请将其声明为：

```
NSMutableDictionary *tempDictionary = [[NSMutableDictionary alloc] init]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-15T04:00:02.490

使用`NSMutableDictionary`. `NSDictionary`不可编辑。

```
NSMutableDictionary *tempDictionary = [[NSMutableDictionary alloc] init];
Boolean overObjectYES = NO;
Boolean overObjectNo = NO;

[tempDictionary setValue:[NSNumber numberWithBool:overObjectYES] forKey:@"overObject"]; 
```

# powershell - 如何在 NSIS 中调用 PowerShell

> ID：13391340
> 
> 赞同：4
> 
> 时间：2012-11-15T03:56:46.097
> 
> 标签：powershell, nsis, windows-server-2008-r2

我正在尝试在 NSIS 中运行 PowerShell。当我运行 NSIS 脚本时：

```
!include "x64.nsh"

Name "nsExec Test"

OutFile "nsExecTest.exe"

ShowInstDetails show

Section "Output to variable"

    nsExec::ExecToStack 'powershell -Command "& {Import-Module }" ServerManager'
    Pop $0 # return value/error/timeout
    Pop $1 # printed text, up to ${NSIS_MAX_STRLEN}
    DetailPrint '"ImportModules" printed: $1'
    DetailPrint "       Return value: $0"

    nsExec::ExecToStack 'powershell -Command "& {Get-WindowsFeature}" Desktop-Experience'
    Pop $0 # return value/error/timeout
    Pop $1 # printed text, up to ${NSIS_MAX_STRLEN}
    DetailPrint '"GetWindowsFeature" printed: $1'
    DetailPrint "       Return value: $0"
SectionEnd 
```

当它执行到“Import-Module ServerManager”时，PowerShell 已启动（可以在 TaskManager 进程中看到）。但 nsExecTest.exe 悬而未决。

我用谷歌搜索了这个问题，并找到了 Java 的解决方法。 [https://blogs.oracle.com/vaibhav/entry/not_as_easy_as_we](https://blogs.oracle.com/vaibhav/entry/not_as_easy_as_we)

有人对 NSIS 中的这个问题有想法吗？

更新：我简化了我的测试脚本。

```
!include "x64.nsh"

Name "nsExec Test"
OutFile "nsExecTest.exe"
ShowInstDetails show

Section "Output to variable"
${If} ${RunningX64}
    ${DisableX64FSRedirection}

    nsExec::ExecToStack 'powershell.exe "& "Import-Module ServerManager"'
    Pop $0 # return value/error/timeout
    Pop $1 # printed text, up to ${NSIS_MAX_STRLEN}
    DetailPrint '"ImportModules" printed: $1'
    DetailPrint " Return value: $0"
    DetailPrint ""

    ${EnableX64FSRedirection}
${Else}
${EndIf}
SectionEnd 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T04:02:45.877

自从我使用 NSIS 以来已经有一段时间了，所以我只是根据我在其他地方看到的语法进行猜测：

```
nsExec::ExecToStack 'powershell.exe "& "Import-Module ServerManager"' 
```

取出第二个命令，然后使用第一个命令进行测试并首先使其正常工作，然后您可以确定第一个命令是正确的。

还可以尝试添加`< NUL`到您和/或我的命令行的末尾：

```
nsExec::ExecToStack 'powershell -Command "& {Import-Module }" ServerManager < NUL'
nsExec::ExecToStack 'powershell.exe "& "Import-Module ServerManager" < NUL' 
```

我不确定它是否需要在双引号内。如果它正在等待您完成提供输入，就像您以交互方式运行它一样，它可能会挂起：

[http://epeleg.blogspot.com/2010/06/solution-to-powershell-never-exists.html](http://epeleg.blogspot.com/2010/06/solution-to-powershell-never-exists.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-06T16:01:34.063

据我发现，AaronLS 的回答对我不起作用，我发现了两个解决此问题的方法，与[此处报告](https://connect.microsoft.com/PowerShell/feedback/details/572313/powershell-exe-can-hang-if-stdin-is-redirected#)的 PowerShell v2 中的错误有关（但从未修复）：

*   [升级到 PowerShell v3](http://technet.microsoft.com/en-us/library/hh847837.aspx#BKMK_InstallingOnWindows7andWindowsServer2008R2)
*   从 NSIS 中的文件运行脚本，并指定`inputformat none`. 出于一个非常奇怪的原因，您必须在最后一个引号之前留*两个*`nsExec::ExecToStack`空格：

    ```
    SetOutPath "$pluginsdir\NSISTemp"
    File script.ps1
    nsExec::ExecToStack 'powershell -inputformat none -ExecutionPolicy RemoteSigned -File "$pluginsdir\NSISTemp\script.ps1"  ' 
    ```

[使用我在此处编写](http://nsis.sourceforge.net/PowerShell_support)的宏，只需`${PowerShellExec} "echo 'hello powershell'"`.

# ruby-on-rails - 为 HABTM 生成多个选择 - simple_form 和 RoR

> ID：13391341
> 
> 赞同：1
> 
> 时间：2012-11-15T03:56:47.710
> 
> 标签：ruby-on-rails, simple-form

当使用 simple_form 并为 HABTM 关联模型创建字段时，我们会获得一个接受多个选项的选择框。

有没有办法让多个选择框接受一个选项？

如果我们有类别，例如：

```
Category1 => <select>options...</select>
Category2 => <select>options...</select>
Category3 => <select>options...</select>
etc... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T17:05:13.773

假设以下模型：

```
class Business < ActiveRecord::Base
    has_and_belongs_to_many :categories

class Category < ActiveRecord::Base
    has_and_belongts_to_many :businesses 
```

您可以使用以下 rails helper 为每个类别显示一个选择框。

```
- @business.categories.each do |c|
      = f.collection_select :category_ids, Category.all, :id, :name, {:selected => c.id}, {:name => 'business[category_ids][]'} 
```

然后您可以使用 javascript 动态创建新的选择框。[这个 railscast 解释了基础知识。](http://railscasts.com/episodes/197-nested-model-form-part-2)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-01T20:59:14.410

在 simple_form_for 例如州/地区内

```
class State < ActiveRecord::Base
  has_and_belongs_to_many :regions 
```

（为了清楚起见，省略了不必要的表单元素）

```
<%= simple_form_for @state do |f| %>
    <%= f.association :regions, as: :check_boxes, collection: Region.all.sort, :selected => @state.regions, :label => false %>
<% end %> 
```

这会将所有区域（显然您可以过滤它）显示为复选框列表，并选择那些已录制的区域

# java - 将变量访问到方法声明中

> ID：13391343
> 
> 赞同：4
> 
> 时间：2012-11-15T03:57:08.823
> 
> 标签：java, gwt, servlets

我在 GWT 中编写一个 servlet，但我真的不明白函数中声明为全局的数据变量发生了什么。也许这是一个与在动态函数声明中使用变量相关的更普遍的 Java 问题，但我找不到答案。

这是我的代码：

```
private AbstractDataTable fetchDataFromServer() {

    final DataTable data = DataTable.create();
    System.out.println("1 Table has " + data.getNumberOfColumns() + " columns");
    System.out.println("1 Table has " + data.getNumberOfRows() + " rows");

    try {

        RequestBuilder rb = new RequestBuilder(RequestBuilder.GET, "/mongo.json");

        rb.setCallback(new RequestCallback() {
            @Override
            public void onResponseReceived(Request request, Response response) {
                JSONValue value = JSONParser.parse(response.getText());
                JSONObject productsObj = value.isObject();          
                JSONArray radiation = productsObj.get("ShortWave_Rad").isArray();

                if (radiation != null) {

                    data.addColumn(ColumnType.NUMBER, "Horizon");
                    data.addColumn(ColumnType.NUMBER, "Value");

                    System.out.println("Values " + radiation.size());

                    for (int i=0; i<=radiation.size()-1; i++) {

                        JSONObject productObj = radiation.get(i).isObject();
                        data.addRows(radiation.size());
                        data.setValue(i, 0, productObj.get("horizon").isNumber().doubleValue());
                        data.setValue(i, 1, productObj.get("value").isNumber().doubleValue());      
                    }

                    System.out.println("2 Table has " + data.getNumberOfColumns() + " columns");
                    System.out.println("2 Table has " + data.getNumberOfRows() + " rows");      

                }
            }
            @Override
            public void onError(Request request, Throwable exception) {
                Window.alert("Error occurred" + exception.getMessage());
            }
        });
        rb.send();

    } 
    catch (RequestException e) {
        Window.alert("Error occurred" + e.getMessage());
    }

    System.out.println("3 Table has " + data.getNumberOfColumns() + " columns");
    System.out.println("3 Table has " + data.getNumberOfRows() + " rows");

    return data;
} 
```

这是我得到的输出：

1 表有 0 列

1 表有 0 行

2 表有 2 列

2 表有 10 行

3 表有 0 列

3 表有 0 行

onResponseReceived 声明使用后数据的内容去了哪里？

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T04:08:32.140

您在**异步调用响应**`onResponseReceived`之后被调用。以下语句很可能在收到响应之前执行。

 **```
System.out.println("3Table has colums " + data.getNumberOfColumns());
System.out.println("3Table has rows " + data.getNumberOfRows()); 
```

在最后打印尺寸之前，使用一些状态标志来检查回调的状态。**

# mysql - 使用连接查询

> ID：13391349
> 
> 赞同：0
> 
> 时间：2012-11-15T03:58:17.137
> 
> 标签：mysql, sql, join, group-by

我正在运行一个查询：

```
select course.course,iars.id, 
        students.rollno,
        students.name as name,
        teachers.name as tname, 
        students.studentid, 
        attndata.studentid ,sum(attndata.obt) as obt
        sum(attndata.benefits) as ben , (sum(attndata.max)) as abc  
from  groups, students
        left join iars 
           on iars.id
        left join str 
           on str.studentid=students.studentid
        left join course
           on course.c_id=students.course
        left join teachers
           on teachers.id=iars.teacherid
        join sgm 
           on sgm.studentid=students.studentid
        left join attndata 
           on attndata.studentid=students.studentid and iars.id=attndata.iarsid
        left join sps 
           on sps.studentid=students.studentid and iars.paperid=sps.paperid
        left join semdef 
           on semdef.semesterid=str.semesterid 
        where students.course='1' 
           and students.status='regular' 
           and sps.paperid='5'
           and  iars.courseid=students.course 
           and iars.semester=str.semesterid 
           and semdef.month=9
           and iars.paperid='5'
           and str.semesterid='1'
           and str.sessionid='12'
           and groups.id=sgm.groupid 
        group by sps.studentid,
           teachers.id,
           semdef.month
        order by
           students.name 
```

在此查询中，每当我离开加入时`semdef.id=attndata.mon`，当 的值但我想要所有结果时，我得到零结果`semdef.id=null`，而不管`semdef`，但我想使用它。如果值为空，它应该获取结果。你能帮帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T04:21:23.523

这可能是因为你的 where 子句在说

```
and semdef.month=9 
```

你可能想要

```
and (semdef.month=9 OR semdef.id IS NULL) 
```

或类似的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T04:20:32.293

这是因为您的 where 子句具有与 semdef 表相关的语句。将这些添加到 join 子句中，因为将它们放在 where 意味着内部连接。

例如：

```
Left join semdef on xxx and semdef.id = attndata.min 
```

# python - 在python中的一行中读取三个或更多单独的值

> ID：13391351
> 
> 赞同：0
> 
> 时间：2012-11-15T03:58:19.793
> 
> 标签：python, turtle-graphics

> **可能重复：**
> [在 python 的一行中读取两个单独的值](https://stackoverflow.com/questions/13390264/reading-two-separate-values-in-one-line-in-python)

所以这是我到目前为止的程序：

```
import turtle
turtle.showturtle()
def turtle_commands():
    while True :
          n = 0
          instructions = input().split()
          i = instructions[0]
          if len(instructions) > 1:
              n = int(instructions[1])
              if i == 'forward' :
                  turtle.forward(n)
              elif i == 'backward' :
                  turtle.backward(n)
              elif i == 'left' :
                  turtle.left(n)
              elif i == 'right' :
                  turtle.right(n)
              else :
                  continue
          elif i == 'new' :
              turtle.reset()
              print("\n" * 50)
          elif i == 'penup' :
              turtle.penup()
          elif i == 'pendown' :
              turtle.pendown()
print('Control the turtle!')
turtle_interface() 
```

但我还需要实现turtle.goto、turtle.write 和turtle.color 命令，这需要另一个字符串或整数变量。我应该在代码的哪一部分定义这些变量？

# c++ - 为什么MessageBox在我创建的桌面显示窗口，而AllocConsole在前面显示？

> ID：13391354
> 
> 赞同：1
> 
> 时间：2012-11-15T03:58:22.843
> 
> 标签：c++, winapi, console

当线程更改为不同的桌面时，使用 AllocConsole() 创建的新控制台会出现在原始桌面中。如预期的那样，创建的消息框和其他窗口会出现在新桌面中，但控制台窗口不会。以下代码是一个 windows 应用程序示例，但是无论它是否是控制台应用程序，结果仍然是相同的。

```
#include <Windows.h>

HDESK hDesk;

DWORD WINAPI Testing(void *)
{
    SetThreadDesktop(hDesk);
    AllocConsole();
    MessageBox(NULL, TEXT("Test"), NULL, MB_OK); //This will show on the new desktop
    FreeConsole();
    return 0;
}

int WINAPI WinMain(HINSTANCE hInstance, HINSTANCE hPrevInstance, LPSTR lpCmdLine, int nShowCmd)
{
    hDesk=CreateDesktop(TEXT("Testing"),NULL,NULL,NULL,GENERIC_ALL,NULL);
    SwitchDesktop(hDesk);

    DWORD thr;
    HANDLE thread = CreateThread (0, 0, Testing, 0, 0, &thr);

    WaitForSingleObject (thread, 10000); //Wait 10 seconds before automatically exiting.

    SwitchDesktop(GetThreadDesktop(GetCurrentThreadId())); //Return to previous desktop
    CloseDesktop(hDesk);
    return 0;
} 
```

如何在第二个桌面中创建控制台窗口？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T06:13:37.003

这种行为是可以理解的，因为附加到进程的一个控制台由该进程的所有线程共享，并且将该控制台放在启动该进程的桌面上而不是像控制台那样动态地将控制台从桌面移动到桌面是有意义的由连接到不同桌面的线程分配和释放。如果允许控制台窗口的这种移动，那么当控制台在进程之间共享时，行为将更难理解。

要回答有关如何与不同桌面上的控制台关联的问题，我建议在目标桌面上启动一个空白控制台应用程序窗口，其主要职责是保持控制台窗口处于活动状态。所要做的就是做

```
int _tmain(int argc, _TCHAR* argv[])
{
Sleep(INFINITE);
return 0;
} 
```

And instead of calling AllocConsole, call AttachConsole with the process id of the newly launched process, and then call GetStdHandle to get handle to the console buffer for further calls to WriteConsole.

To launch a new process in a target desktop different from the one the process (at first) is connected to you will have to set the desktop name in the STARTUPINFO structure that would be passed to CreateProcess call.

# gps - 加速度计没有被调用

> ID：13391355
> 
> 赞同：1
> 
> 时间：2012-11-15T03:58:48.173
> 
> 标签：gps, accelerometer, restart, cmmotionmanager

我正在做一个有点奇怪的实现。我的应用程序连续使用 GPS 数据，并使用它来完成一些任务。我还实现了加速度计的东西来检测设备是静止的还是移动的。当设备静止时，我通过调用停止 GPS 获取`stopUpdatingLocation`，当设备移动时，我调用`startUpdatingLocation`。这在前台和后台都可以正常工作。

但是我希望我的应用程序在设备重新启动时在后台启动。这工作正常。我在 plist 中添加了“voip”键，并`applicationDidFinishLaunch`开始 GPS 获取代码并启动加速度计。

但我发现一旦设备保持静止（`stopUpdatingLocation`），加速度计就不会被调用。因此，我无法检测到设备移动。加速度计回调没有被调用。这是我正在使用的代码示例：

```
 mMotionManager = [[CMMotionManager alloc] init];
    if (mMotionManager.accelerometerAvailable) {
        mMotionManager.accelerometerUpdateInterval = 1.0/10.0;
       mOperationQueue = [[NSOperationQueue alloc] init];
        [mMotionManager startAccelerometerUpdatesToQueue:mOperationQueue withHandler:^(CMAccelerometerData *data, NSError *error){
            dispatch_async(dispatch_get_main_queue(), ^{
                //[self onDeviceMotion];
                [mAccelerometerReadings addObject:  data];
                [self updateViewsWithFilteredAcceleration:data.acceleration];
            });
        }]; 
```

有人可以帮我解决这个问题吗？可能吗？

# cakephp - 如何在 cakephp 2.0 中删除视图中的会话？

> ID：13391358
> 
> 赞同：3
> 
> 时间：2012-11-15T03:58:58.257
> 
> 标签：cakephp

我在蛋糕书中读到 Session in view 使用 SessionHelper，但是那个助手没有删除会话的方法。真的是这样吗，有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-15T04:03:29.550

要[删除会话数据](http://book.cakephp.org/2.0/en/core-libraries/components/sessions.html#SessionComponent%3a%3adelete)，请使用控制器中的[会话组件](http://book.cakephp.org/2.0/en/core-libraries/components/sessions.html#sessions)，而不是视图。

```
//example from the CakePHP book (linked above)
$this->Session->delete('Person'); 
```

或者：

> destroy 方法将删除会话 cookie 和存储在临时文件系统中的所有会话数据。然后它将销毁 PHP 会话，然后创建一个新会话：

```
$this->Session->destroy(); 
```

虽然在技术上可以删除视图中的会话数据（毕竟它只是一个 PHP 文件），但 CakePHP 框架在构建时考虑了 MVC 结构。“V”（代表“视图”）应该只与显示控制器提供的数据（从模型中检索）有关。

模型处理访问数据/数据库，控制器处理应用程序逻辑。所以 - 会话组件（组件用于控制器）被赋予了删除会话数据的方法，但会话助手（助手用于视图）没有。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-08-17T13:40:07.543

根据情况，可以使用自定义 Flash 消息。使用自定义键设置 Flash 消息，如下所示

`$this->Session->setFlash('my_value', 'default', array(), 'my_key');`

并使用 flash 方法在视图中读取它（它会自动删除它）

`$value = $this->Session->flash('my_key');`

这篇文章中的更多详细信息[http://hashmode.com/cakephp-delete-session-in-view/81](http://hashmode.com/cakephp-delete-session-in-view/81)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-30T12:26:01.700

在你看来试试`unset($_SESSION['YOUR_SESSION_KEY']);`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-15T07:23:56.900

要删除会话变量，您可以使用以下代码（**在 Controller 中**）。

```
// same as unset($_SESSION['your_session_varable'])
$this->Session->delete('your_session_varable'); 
```

您可以调用以下命令销毁所有会话变量：

```
$this->Session->destroy(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-06-24T12:35:42.047

如果会话数据是一个数组，并且您想像 setFlash 一样只访问它一次，您可以将数组设置为 setFlash，不带模板 = false。

```
$this->Session->setFlash($arrayData,false,array(),'formData'); 
```

然后在视图中访问它

```
$data = $this->Session->flash('formData');
pr($data); 
```

# java - JDBC MySQL连接故障转移节点非常慢

> ID：13391360
> 
> 赞同：0
> 
> 时间：2012-11-15T03:59:45.627
> 
> 标签：java, mysql, performance, jdbc, failover

我的环境有 2 个 MySQL 服务器（INS1 和 INS2），当我测试故障转移模式时 INS1 和驱动程序创建与 INS2 的连接时，它的连接速度非常慢（它也发生在 Glassfish 连接池上。）

```
final String connstr = "jdbc:mysql://INS1,INS2:3306/mysql";
Properties props = new Properties();
props.put("user", "xxx");
props.put("password", "xxx");
props.put("failOverReadOnly", "false");
props.put("roundRobinLoadBalance", "false");

return DriverManager.getConnection(connstr, props); 
```

如何调整 jdbc 属性？

> 运行：INS1 运行时。信息：在 350 毫秒内连接
> 
> 信息：在 16 毫秒内连接
> 
> 信息：在 15 毫秒内连接
> 
> 信息：在 17 毫秒内连接
> 
> 信息：在 15 毫秒内连接
> 
> 信息：在 16 毫秒内建立成功（总时间：0 秒）
> 
> 运行：当 INS1 关闭时。信息：在 1,380 毫秒内连接
> 
> 信息：在 1,060 毫秒内连接
> 
> 信息：在 1,058 毫秒内连接
> 
> 信息：在 1,060 毫秒内连接
> 
> 信息：在 1,055 毫秒内连接
> 
> 信息：在 1,041 毫秒内建立成功（总时间：6 秒）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T04:38:33.350

//socket连接超时时间（毫秒），0表示无超时。仅适用于 JDK-1.4 或更高版本。默认为“0”。props.put("connectTimeout", "100");

# php - 在php中比较两次

> ID：13391362
> 
> 赞同：0
> 
> 时间：2012-11-15T04:00:22.600
> 
> 标签：php, time, strtotime

> **可能重复：**
> [如何在 PHP 中比较两次时间](https://stackoverflow.com/questions/3403858/how-to-compare-two-time-in-php)

嗨，我是 php 中的新时间函数，我有，

```
@$download_time = date('d-m-Y H:i:s', $dec_time);
$current_time = date('d-m-Y H:i:s');    
$diff = abs(strtotime($current_time) - strtotime($download_time));    
$time=65 // $time is in seconds 
```

现在我想比较 if ($diff < $time) 如何与这两个值进行比较。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T04:19:15.773

如果`$dec_time`是**unix timestamp**，那么简单地：

```
if (time() - $dec_time < $time) {/* ... */} 
```

否则，如果它是文本表示：

```
if (time() - strtotime($dec_time) < $time) {/* ... */} 
```

如果以后不需要，请注意使用不必要的变量，因为如果注意这一点，您可以节省大量内存。如果服务器的 PHP 版本高于 5.2，那么您可以使用[DateTime](http://php.net/manual/en/class.datetime.php)类，它为您提供了很多扩展功能。

我不明白为什么是`abs()`因为下载时间应该是过去的。

**注意：** 让`@`' 远离你的代码，因为 PHP 解释器会花费大量额外的计算，可能键入时间更长，但测试变量是否存在，例如：

```
if (!empty($dec_time) && time() - strtotime($dec_time) < $time) {/* ... */} 
```

# php - php : 查找多维数组中的最后一个元素索引

> ID：13391363
> 
> 赞同：-1
> 
> 时间：2012-11-15T04:00:31.010
> 
> 标签：php, multidimensional-array, indexing

如前所述，我如何获得最后一个元素索引，例如 $a 中 11 的位置？

```
$a[0][0] = 0; 
$a[0][1] = 1; 
$a[0][2] = 2; 
$a[1][0] = 3; 
$a[1][1] = 4; 
$a[1][2] = 5; 
$a[2][3] = 6; 
$a[2][4] = 7; 
$a[2][5] = 8; 
$a[3][0] = 9; 
$a[4][0] = 10; 
$a[4][1] = 11;
enter code here 
```

我想收到 x = 1, y = 4

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T04:12:44.853

如果要获取最后一个数组值，`11`则可以简单地使用`end()`数组函数

```
echo end(end($a)); 
```

**演示：** [http ://codepad.org/fSsHJYTI](http://codepad.org/fSsHJYTI)

**完整代码：**

```
 <?php

    $a[0][0] = 0; 
    $a[0][1] = 1; 
    $a[0][2] = 2; 
    $a[1][0] = 3; 
    $a[1][1] = 4; 
    $a[1][2] = 5; 
    $a[2][3] = 6; 
    $a[2][4] = 7; 
    $a[2][5] = 8; 
    $a[3][0] = 9; 
    $a[4][0] = 10; 
    $a[4][1] = 11;

    echo end(end($a));

 ?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T04:07:38.767

```
<?php
$a = array(
    array(0,1,2),
    array(3,4,5,6,7,8),
    array(9),
    array(10,11),
);
var_dump($a[count($a)-1][count($a[count($a)-1])-1]); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T04:26:00.737

```
$a=array(0=>array(),1=>array(),2=>array(),3=>array(),4=>array());
$a[0][0] = 0; 
$a[0][1] = 1; 
$a[0][2] = 2; 
$a[1][0] = 3; 
$a[1][1] = 4; 
$a[1][2] = 5; 
$a[2][3] = 6; 
$a[2][4] = 7; 
$a[2][5] = 8; 
$a[3][0] = 9; 
$a[4][0] = 10; 
$a[4][1] = 11;
end($a);
$x=key($a);
echo "x=$x ";
end($a[$x]);
echo "y=".key($a[$x]); 
```

这将输出：

```
x=4 y=1 
```

键盘：[http ://codepad.org/YfBFWznR](http://codepad.org/YfBFWznR)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-15T04:31:10.730

您将不得不遍历数组，找到最高条目，然后将当前循环计数器存储为`$highest_i`or `$highest_j`。

更懒惰的是先转换数组：

```
foreach ($array as $i=>$sub) {
   foreach ($sub as $j=>$value) {
      $by_value[$value] = array($i, $j);
   }
} 
```

然后排序：

```
ksort($by_value); 
```

这将为您提供第一个条目中的坐标：

```
print_r(reset($by_value)); 
```

作为：

```
Array
(
    [0] => 4
    [1] => 1
) 
```

# javascript - Jquery javascript 使用 $this 折叠

> ID：13391364
> 
> 赞同：1
> 
> 时间：2012-11-15T04:00:37.287
> 
> 标签：javascript, jquery

我有四个按标题切换的 div（如下所示，我展示了一组）。每个标题链接类与文本字段类之前的类匹配。我希望使用 $this 编写一些干燥器来针对当前类，然后将当前类作为类文本，而不是四次单独编写 javascipt。

**important_info_header**类将是每个 div 的动态类 。

这种写作不是很好，所以欢迎任何帮助

**尝试失败**

```
 $(this).click(function() {
    $(this+'.text').slideToggle('slow', function() {
     //ani complete.

    });
  }); 
```

**工作标记**

**HTML 开始**

```
 <h4><a href="javascript:void(0)"  class="important_info_header"><%= t("catalog_items.show_lot.important_info_header")%></a></h4>
          <div class="important_info_header text">
              <p><%= t("catalog_items.show_lot.important_info") %></p>
          </div><!-- /text -->

 <h4><a href="javascript:void(0)"  class="important_info_header"><%= t("catalog_items.show_lot.important_info_header")%></a></h4>
          <div class="important_info_header text">
              <p><%= t("catalog_items.show_lot.important_info") %></p>
          </div><!-- /text -->

 <h4><a href="javascript:void(0)"  class="rules"><%= t("catalog_items.show_lot.important_info_header")%></a></h4>
          <div class="rules text">
              <p><%= t("catalog_items.show_lot.important_info") %></p>
          </div><!-- /text -->

 <h4><a href="javascript:void(0)"  class="shipping"><%= t("catalog_items.show_lot.important_info_header")%></a></h4>
          <div class="shipping text">
              <p><%= t("catalog_items.show_lot.important_info") %></p>
          </div><!-- /text --> 
```

**HTML 结束**

```
 $('.important_info_header').click(function() {
    $('.important_info_header.text').slideToggle('slow', function() {
     //ani complete.

    });
  }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T04:03:02.243

您需要在选择器中获取类，

```
 $(($this).attr('class')+'.text').slideToggle('slow', function() {
     //ani complete.

    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T04:05:20.137

这是一个例子>>> [**FIDDLE**](http://jsfiddle.net/videsignz/88bW4/)

添加一个类以实现.. 'collapsable' 到四个主要链接的效果

```
<a href='' class="important_info_header collapsable"> //link 1
<a href='' class="rules collapsable"> //link 2
<a href='' class="shipping collapsable"> //link 3
 ....and so on 
```

紧随其后的 div 必须是您要切换的那个。

然后你的通用点击功能将是这样的（注意 e.preventDefault() ，在你的链接中使用它而不是 javascript:void() ..

```
$('.collapsable').click(function(e) {
    e.preventDefault();
    $(this).next().slideToggle( function() { //ani complete.
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T04:50:39.817

这个怎么样？

```
$("h4 a").click(function() {
   $("div." + $(this).attr("class") ).slideToggle('slow', function() {
      // function..
   });
}); 
```

如果你可以重组你的 HTML，我发现这也很好用

HTML

```
<a href="#sec1" class="expandable">Go to Sec1</a>
<a href="#sec2" class="expandable">Go to Sec2</a>
<a href="#sec3" class="expandable">Go to Sec3</a>

<div id="sec1">Sec 1 content</div>
<div id="sec2">Sec 2 content</div>
<div id="sec3">Sec 3 content</div> 
```

jQuery

```
$(".expandable").click(function(){
    $( $(this).attr("href") ).slideToggle("slow");
    // add callback/etc as needed
}); 
```

它运行良好，因为它`href`包含`#`CSS id 选择器所需的。这样，如果您的用户没有启用 JS，link#sec1 仍会将页面滚动到页面上的该 id 标记。

# ios - UIView 大小和情节提要

> ID：13391365
> 
> 赞同：3
> 
> 时间：2012-11-15T04:00:44.020
> 
> 标签：ios, uiview, xcode-storyboard

我在情节提要中有一个使用自动布局的自定义 UIView，所以我不知道 UIView 的确切高度。我需要它在视图中绘制单个项目，因此较大的 UIView 将有更多行。

我在哪里可以确定高度？我想基于此初始化一个数据结构，但到目前为止，我唯一获得非零 UIView 高度/宽度的地方是在 drawRect 中，我想在点击该方法之前进行设置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T07:11:58.923

`viewDidLayoutSubviews`在您的视图控制器中放置它是一个明智的选择，尽管基于视图大小的数据结构听起来不是很 MVC，但我假设您知道自己在做什么。

这也将在旋转后被调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T07:02:32.530

尝试从 viewDidAppear 中检查视图框架的大小：此时，视图应该计算出它的最终尺寸，并且您应该能够做您想做的事情。

当您说更多行时，您是什么意思？您只是在视图中使用表格视图吗？

# android - 表记录更改时更新sqlite游标？

> ID：13391366
> 
> 赞同：2
> 
> 时间：2012-11-15T04:00:56.357
> 
> 标签：android, database, cursor, broadcastreceiver

我有一个广播接收器，它在收到短信时将信息插入表中。在主要活动中，我有一个来自该表查询的游标。每次BR对表进行更改时，我是否可以将游标设置为重新查询，以便它可以反映在游标中。

我目前没有使用 OpenHelper，只是在 Activity 中打开数据库并进行查询以获取游标。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T04:21:12.120

是的，这是可能的，而且可能很容易。

*   如果您使用的是 Cursor，则应该使用 CursorAdapter。只需请求一个新的光标并将其传递给您的适配器`swapCursor()`。
*   如果您使用的是其他形式的适配器，例如 ArrayAdapter，请调用`add()`或`insert()`.

这些方法中的任何一种都会导致绑定到适配器的视图自动刷新。

# struts - 无法检索操作错误的映射

> ID：13391369
> 
> 赞同：1
> 
> 时间：2012-11-15T04:02:03.460
> 
> 标签：struts

我正在使用 struts 1.2 并尝试使用代码在 jsp 页面中创建链接

```
<html:link href="AdminModule/UserCreation.jsp" >
Create User </html:link> ` 
```

以便链接将移动到存在此类代码的页面 UserCreation

```
<html:form action="/adminUserCreation">
        AdminName : <html:text property="username"/><html:errors property="username"/><br/>
        Password : <html:password property="password"/><html:errors property="password"/><br/>
        <html:submit/>
    </html:form> 
```

struts-config 文件包含这样的代码

```
<form-beans>
<form-bean name="adminUserCreationForm" type="Admin.Form.AdminUserCreationForm" />
</form-beans>
<action-mappings>
<action
  attribute="adminUserCreationForm"
  input="/AdminModule/AdminHomePage.jsp"
  name="adminUserCreationForm"
  path="/adminUserCreation"
  scope="request"
  type="Admin.Action.AdminUserCreationAction"
  validate="false">
  <set-property property="cancellable" value="true" />
  <forward name="failure" path="/AdminModule/AdminErrorPage.jsp" />
  <forward name="success" path="/AdminSuccessPage.jsp" />
</action>
</action-mappings> 
```

我得到异常

```
 An exception occurred processing JSP page /AdminModule/UserCreation.jsp at line 30

30:         <html:form action="/adminUserCreation">
31:             AdminName : <html:text property="username"/><html:errors   property="username"/><br/>
32:             Password : <html:password property="password"/><html:errors property="password"/><br/>
33:             <html:submit/> 
```

根本原因是

```
javax.servlet.ServletException: javax.servlet.jsp.JspException: Cannot retrieve mapping for action /adminUserCreation 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T04:50:42.573

[如何通过struts从另一个打开一个jsp](https://stackoverflow.com/questions/4015579/how-to-open-one-jsp-from-another-through-struts)

这帮助我解决了它。也许它会对其他有同样问题的人有所帮助。

# jquery - jquery 隐藏/显示两个 div 不起作用，可能与 jqueryui 手风琴冲突？

> ID：13391370
> 
> 赞同：4
> 
> 时间：2012-11-15T04:02:12.410
> 
> 标签：jquery, jquery-ui, html, hide, show

我有一个页面，其中有两个相同尺寸的 div 恰好一个放在另一个上方，每个都包含一个 jqueryui 手风琴。一个 div 是可见的，另一个是隐藏的。还有两个href。第一个 href 应该显示第一个 div 并隐藏第二个（这是默认状态），第二个 href 应该显示第二个 div 并隐藏第一个。这样，用户可以单击任一链接并查看一个或另一个手风琴。

这是相关的html：

```
<html><head>

<link href="jquery/css/vp/jquery-ui-1.9.1.custom.min.css" rel="stylesheet" type="text/css" />
<script src="jquery/js/jquery-1.8.2.js"></script>
<script src="jquery/js/jquery-ui-1.9.1.custom.min.js"></script>
<script src="jquery/development-bundle/external/jquery.bgiframe-2.1.2.js"></script>

</head>
<body>

<div id="pagewrapper" >

  <div id="mainteam" >

   <!-- First DIV with an accordion inside -->
   <div id="vpteamcontainer"> 
       <div id="accordion">
         <h3>Section 1</h3>
         <div><p>Section 1 Content</p></div>
         <h3>Section 2</h3>
         <div><p>Section 2 Content</p></div>
     </div>
   </div>

   <!-- Second DIV with another accordion inside -->
   <div id="vpadvisorscontainer"> 
       <div id="accordion2">
         <h3>Section 1-2</h3>
         <div><p>Section 1-2 Content</p></div>
         <h3>Section 2-2</h3>
         <div><p>Section 2-2 Content</p></div>
     </div>
   </div>

<!-- Div containing the two href links to show/hide the above divs -->

    <div id="somediv">
      <ul class = "someULclass">
        <li ><a href="#" id="vpteam" class="somelinkclass">Show First div and Hide Second div</a></li>
        <li ><a href="#" id="vpadvisors" class="somelinkclass">Show Second div and Hide First div</a></li>
      </ul>
    </div>
  </div>
</div>

</body>
</html> 
```

这是我包含的上述 DIVS（去除宽度、高度、边框等）的相关 CSS，因为父 div 的 css 参数之一可能会影响我无法显示/隐藏的 div：

```
#pagewrapper {
    position:relative;
    float:none;
    margin-left:auto;
    margin-right:auto;
    display:block;
}

#mainteam {
    position:relative;
    float: left;
}

#vpteamcontainer {
    display:block;
}

#vpadvisorscontainer {
    display:none;
} 
```

所以我有调用两个手风琴的javascript（#accordion和#accordion2，效果很好，然后是javascript在单击链接时尝试显示和隐藏两个div：（编辑代码以保持简短） ：

```
<!-- START JQUERY accordions -->
<script type="text/javascript">
    $(function() {
        $( "#accordion" ).accordion({
            collapsible: true,
    heightStyle: "fill"
        });
    });
</script>

<script type="text/javascript">
    $(function() {
        $( "#accordion2" ).accordion({
            collapsible: true,
    heightStyle: "fill"
        });
    });
</script>

<!-- END JQUERY accordions -->

<!-- START JQUERY SHOW HIDE -->

<script type="text/javascript">
$( "#vpteam" ).click(function(){
    $( "#vpteamcontainer" ).show();
    $( "#vpadvisorscontainer" ).hide();
});

$( "#vpadvisors" ).click(function(){
    $( "#vpteamcontainer" ).hide();
    $( "#vpadvisorscontainer" ).show();
});
</script>
<!-- END JQUERY SHOW HIDE --> 
```

注意：我还有 javascript 来显示两个模式对话框，这些对话框在从两个单独的 href 链接调用的对话框（jqueryui 对话框）内的 iframe 中显示 html 页面。我将其保留在此处，因为它似乎不相关，除了在这里的某个地方我看到一个项目讨论了淡入淡出效果（用于显示和关闭对话框）如何与显示/隐藏有一些问题）。

结果： 1- 手风琴生成到其相应的 div 中并按预期工作。2-显示/隐藏链接什么都不做。3-我尝试使用`.css("display, none")`and `.css("display. block")`，以及`.css("visibility, visible")`and`.css("visibility, hidden")`代替`show()`and `hide()`，无论我做什么，我都无法使用任何选项。

也许我的解释也过于明确或冗长，如果是这样，我深表歉意。

在我写这篇文章时，我想知道问题是否与包含的手风琴有关，或者是否与 href 链接有关，以及我如何尝试执行显示和隐藏 div 的 javascript？

感谢所有给我一些建议的人

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T05:26:17.883

你的代码应该是这样的

```
 $(function() {
    $( "#vpteam" ).click(function(){
       $( "#vpteamcontainer" ).show();
       $( "#vpadvisorscontainer" ).hide();
    });

    $( "#vpadvisors" ).click(function(){
       $( "#vpteamcontainer" ).hide();
       $( "#vpadvisorscontainer" ).show();
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T04:38:32.070

我让它与这个javascript代码一起工作。我用`on.("click")`而不是`click`.

[http://jsfiddle.net/JDJpe/1/](http://jsfiddle.net/JDJpe/1/)

```
$(function() {
        $( "#accordion" ).accordion({
            collapsible: true,
    heightStyle: "fill"
        });
});

$(function() {
        $( "#accordion2" ).accordion({
            collapsible: true,
            heightStyle: "fill"
        });
});

$(document).on("click","#vpteam",function(){

    $( "#vpteamcontainer" ).show();
    $( "#vpadvisorscontainer" ).hide();
});

$(document).on("click","#vpadvisors",function(){

    $( "#vpteamcontainer" ).hide();
    $( "#vpadvisorscontainer" ).show();
})); 
```

# c - 将整数和字符数组写入文件

> ID：13391372
> 
> 赞同：-1
> 
> 时间：2012-11-15T04:02:34.440
> 
> 标签：c

我有三个数组，两个整数，另一个是字符，我试图将它们写入文件。

我的方法如下：

```
FILE *file;
char *allinfo=NULL;
int intArrayOne[7];
int *intArrayTwo=malloc(10*sizeof(int));
char *charArray=malloc(5*sizeof(char));
.....
write into the arrays
.....

if((file=fopen("filename", "a+"))==NULL)
     printf("something went wrong\n");
else
{
     asprintf(&allinfo, "%d%d%s", intArrayOne, intArrayTwo, charArray);
     fprintf(file, "%s", allinfo);
     fclose(file);
} 
```

这个问题似乎是 int 数组不写入 allinfo 字符串。（顺便说一句，asprintf 函数会自行分配内存，如果有人想知道的话）。那么，我想知道如何以有效的方式做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T04:12:39.887

`%d`将打印单个整数值，而不是整数数组。没有可以打印数组的格式代码，您必须分别传入每个数组元素。

```
asprintf(&allinfo, "%d%d%d%d%d%d%d%d%d%d%d%d%d%d%d%d%d%s",
    intArrayOne[0], ... intArrayOne[6], intArrayTwo[0], ... intArrayTwo[9], charArray); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T04:13:10.407

您的格式字符串是`"%d%d%s"`，它用于单个整数，后跟一个整数，后跟一个以 NUL 结尾的字符串。-style 函数无法`printf()`知道整数数组的长度，也无法知道字符串的结束位置。

所以你需要`%d`为一个七整数数组提供七个标志。在实践中，您需要循环遍历数组的元素并调用`asprintf()`.

至于字符串，您需要确保它`'\0'`在传递给之前以`asprintf()`.

# java - 允许java程序自动更新自身的小类

> ID：13391374
> 
> 赞同：1
> 
> 时间：2012-11-15T04:02:46.443
> 
> 标签：java, jar, reload, urlclassloader, automatic-updates

**目标是让一个简单的 Java 类启动一个 jar 主类。当主类完成时，可以查询它是否要重新加载。通过这种方法，它可以自己热更新并重新运行自己。**

Launcher 是通过 URLClassloader 加载 jar，然后卸载/重新加载更改后的 jar。jar 可以通过修改 Launcher 或通过提供的 dos/unix 脚本来更改，该脚本被调用以将新 jar 替换为旧 jar。

整个程序如下。经过测试，它似乎可以顺利工作。

**java Launcher -jar [path_to_jar] -run [yourbatchfile] [-runonce]？选修的]**

1) Launcher 在你的 jar 文件中查找“Main-Class”属性，这样就不需要给它实际的类来运行。

2) 它将调用 'public static void main(String[] args)' 并将您在命令行中提供的剩余参数传递给它

3) 当您的程序完成时，启动器将调用您的程序方法“public static boolean reload()”，如果结果为“真”，这将触发重新加载。

4) 如果你指定了-runonce，那么程序将永远不会重新加载。

5) 如果您指定了 -run [batchfile]，那么批处理文件将在重新加载之前运行。

我希望这对某些人有所帮助。

快乐编码！

```
import java.io.File;
import java.io.IOException;
import java.lang.ProcessBuilder.Redirect;
import java.lang.reflect.Method;
import java.net.URL;
import java.net.URLClassLoader;
import java.util.ArrayList;
import java.util.Arrays;
import java.util.List;
import java.util.concurrent.atomic.AtomicBoolean;
import java.util.jar.Attributes;
import java.util.jar.Manifest;

public class Launcher {

    public static void main(String[] args) {
        new Launcher().run(new ArrayList<>(Arrays.asList(args)));
    }

    private void run(List<String> list) {
        final String jar = removeArgPairOrNull("-jar", list);
        final boolean runonce = removeArgSingle("-runonce", list);
        final String batchfile = removeArgPairOrNull("-run", list);

        if (jar == null) {
            System.out.println("Please add -jar [jarfile]");
            System.out.println("All other arguments will be passed to the jar main class.");
            System.out.println("To prevent reloading, add the argument to -runonce");
            System.out.println("To provide another program that runs before a reload, add -run [file]");
        }

        boolean reload;

        do {
            reload = launch(list.toArray(new String[0]), new String(jar), new String(batchfile), new Boolean(runonce));
            System.out.println("Launcher: reload is: " + reload);

            gc();

            if (reload && batchfile != null) {
                try {
                    System.err.println("Launcher: will attempt to reload jar: " + jar);
                    runBatchFile(batchfile);
                } catch (IOException | InterruptedException ex) {
                    ex.printStackTrace(System.err);
                    System.err.println("Launcher: reload batchfile had exception:" + ex);
                    reload = false;
                }
            }

        } while (reload);

    }

    private boolean launch(String[] args, String jar, String batchfile, boolean runonce) {

        Class<?> clazz = null;
        URLClassLoader urlClassLoader = null;
        boolean reload = false;

        try {
            urlClassLoader = new URLClassLoader(new URL[]{new File(jar).toURI().toURL()});

            String mainClass = findMainClass(urlClassLoader);
            clazz = Class.forName(mainClass, true, urlClassLoader);

            Method main = clazz.getMethod("main", String[].class);
            System.err.println("Launcher: have method: " + main);

            Method reloadMethod;

            if (runonce) {
                // invoke main method using reflection.
                main.invoke(null, (Object) args);
            } else {
                // find main and reload methods and invoke using reflection.
                reloadMethod = clazz.getMethod("reload");

                main.invoke(null, (Object) args);
                System.err.println("Launcher: invoked: " + main);

                reload = (Boolean) reloadMethod.invoke(null, new Object[0]);
            }
        } catch (final Exception ex) {
            ex.printStackTrace(System.err);
            System.err.println("Launcher: can not launch and reload this class:" + ex);
            System.err.println("> " + clazz);
            reload = false;
        } finally {
            if (urlClassLoader != null) {
                try {
                    urlClassLoader.close();
                } catch (IOException ex) {
                    ex.printStackTrace(System.err);
                    System.err.println("Launcher: error closing classloader: " + ex);
                }
            }
        }

        return reload ? true : false;
    }

    private static String findMainClass(URLClassLoader urlClassLoader) throws IOException {
        URL url = urlClassLoader.findResource("META-INF/MANIFEST.MF");
        Manifest manifest = new Manifest(url.openStream());
        Attributes attr = manifest.getMainAttributes();
        return attr.getValue("Main-Class");
    }

    private static void runBatchFile(String batchfile) throws IOException, InterruptedException {
        System.out.println("Launcher: executng batchfile: " + batchfile);
        ProcessBuilder pb = new ProcessBuilder("cmd", "/C", batchfile);
        pb.redirectErrorStream(true);
        pb.redirectInput(Redirect.INHERIT);
        pb.redirectOutput(Redirect.INHERIT);
        Process p = pb.start();
        p.waitFor();
    }

    private static String removeArgPairOrNull(String arg, List<String> list) {
        if (list.contains(arg)) {
            int index = list.indexOf(arg);
            list.remove(index);
            return list.remove(index);
        }
        return null;
    }

    private static boolean removeArgSingle(String arg, List<String> list) {
        if (list.contains(arg)) {
            list.remove(list.indexOf(arg));
            return true;
        }
        return false;
    }

    private void gc() {
        for (int i = 0; i < 10; i++) {
            byte[] bytes = new byte[1024];
            Arrays.fill(bytes, (byte) 1);
            bytes = null;
            System.gc();
            System.runFinalization();
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T09:50:59.537

经过调试，我确定原来的困难是Launcher没有隔离UrlClassloader。

通过将启动类加载器的程序部分放在单独的方法中，我能够让所有系统确定不再存在引用。

修改代码后，现在一切正常:)

# objective-c - 为“无法识别的选择器”异常设置默认处理程序

> ID：13391375
> 
> 赞同：5
> 
> 时间：2012-11-15T04:02:49.767
> 
> 标签：objective-c, cocoa, nsstring, unrecognized-selector

在 Objective-C 中，有没有办法设置默认处理程序以避免`unrecognizedselector`异常？我想做`NSNULL`and`NSNumber`来响应`NSString`.

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T04:22:23.183

您可以使用类别将方法添加到`NSNull`和`NSNumber`类。阅读[*The Objective-C Programming Language*](http://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/ObjectiveC/Chapters/ocCategories.html#//apple_ref/doc/uid/TP30001163-CH20-SW1)中的类别。

您可以实现`methodSignatureForSelector:`和`forwardInvocation:`处理任何消息，而无需明确定义要处理的所有消息。[*在NSObject 类参考*](http://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSObject_Class/Reference/Reference.html)中阅读它们。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-15T06:01:18.807

要处理“无法识别的选择器”异常，我们应该重写两个方法：

```
- (void)forwardInvocation:(NSInvocation *)anInvocation;
- (NSMethodSignature*)methodSignatureForSelector:(SEL)selector; 
```

在这种情况下，如果我们希望 NSNull 在发生“无法识别的选择器”异常时执行 NSSString 方法，我们应该这样做：

```
@interface NSNull (InternalNullExtention)
@end

@implementation NSNull (InternalNullExtention)

- (NSMethodSignature*)methodSignatureForSelector:(SEL)selector
{
    NSMethodSignature* signature = [super methodSignatureForSelector:selector];
    if (!signature) {
        signature = [@"" methodSignatureForSelector:selector];
    }
    return signature;
}

- (void)forwardInvocation:(NSInvocation *)anInvocation
{
    SEL aSelector = [anInvocation selector];

    if ([@"" respondsToSelector:aSelector])
        [anInvocation invokeWithTarget:@""];
    else
        [self doesNotRecognizeSelector:aSelector];
}
@end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-15T04:21:21.573

有。查看 forwardInvocation 的示例：在此处的 NSObject 文档中： [https ://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSObject_Class/Reference/Reference.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSObject_Class/Reference/Reference.html)

基本上，您覆盖 forwardInvocation 并且当对象没有与某些给定选择器匹配的方法时调用它。

# forecasting - 如何从 ME、MAD、MSE、SDE 中确定预测方法？

> ID：13391376
> 
> 赞同：2
> 
> 时间：2012-11-15T04:02:51.263
> 
> 标签：forecasting

如何从 ME、MAD、MSE、SDE 中确定预测方法？例如，将决定 4 种方法。但是，在彼此的误差中，该值并不总是更大或更小。那么，我怎样才能决定那种预测方法的方法呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T08:49:56.167

这更适合[stats.stackoverflow.com](http://stats.stackoverflow.com)。

不要使用 ME（平均误差），因为它不能衡量准确性，只能衡量偏差。

如果您想要以过去观察为条件的未来分布中位数的预测，请使用 MAD（平均绝对偏差）。

如果您希望预测是未来分布的均值，以过去的观察为条件，请使用 MSE（均方误差）。

SDE（误差标准差）只是 MSE 的平方根。

# objective-c - 创建单色 CGImageRef（每像素位图 1 位）

> ID：13391379
> 
> 赞同：4
> 
> 时间：2012-11-15T04:03:00.887
> 
> 标签：objective-c, c, macos, core-graphics, core-image

我正在尝试以 1 位单色显示图像的预览，例如，不是灰度，而是黑白双色。它应该指示图像在传真后的外观。[低至每像素 1 位的格式在 OS X 上不可用](https://developer.apple.com/library/mac/documentation/graphicsimaging/Conceptual/drawingwithquartz2d/dq_context/dq_context.html#//apple_ref/doc/uid/TP30001066-CH203-BCIBHHBB)，只有 8 位灰度。有没有办法使用 Core Graphics 或其他框架（理想情况下使用抖动）来实现这种效果？

我知道有一个名为 CIColorMonochrome 的过滤器，但这只会将图像转换为灰度。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T21:27:44.383

AFAIK 不支持创建 1 位深度的 NSImageRep（以及在 CG 世界中），因此我们必须手动进行。使用 CIImage 完成此任务可能很有用。在这里，我采用经典（您可以称之为老式）方式。这是一个代码，显示了我们如何做到这一点。首先从 NSImageRep 创建一个灰色图像，因此无论源图像将被格式化（也可以是 PDF 文件），我们都有一个定义明确且简单的格式。生成的灰度图像是双色调图像的来源。这是创建灰度图像的代码：（不`size / resolution`考虑源图像，只计算像素！）：

```
- (NSBitmapImageRep *) grayRepresentationOf:(NSImageRep *)aRep
{
    NSBitmapImageRep *newRep =
     [[NSBitmapImageRep alloc] initWithBitmapDataPlanes:NULL
                                        pixelsWide:[aRep pixelsWide]
                                        pixelsHigh:[aRep pixelsHigh]
                                     bitsPerSample:8
                                   samplesPerPixel:1
                                          hasAlpha:NO   //must be NO !
                                          isPlanar:NO
                                    colorSpaceName:NSCalibratedWhiteColorSpace
                                       bytesPerRow:0
                                      bitsPerPixel:0 ];
    // this new imagerep has (as default) a resolution of 72 dpi

    [NSGraphicsContext saveGraphicsState];
    NSGraphicsContext *context = [NSGraphicsContext graphicsContextWithBitmapImageRep:newRep];
    if( context==nil ){
        NSLog( @"***  %s context is nil", __FUNCTION__ );
        return nil;
    }

    [NSGraphicsContext setCurrentContext:context];
    [aRep drawInRect:NSMakeRect( 0, 0, [newRep pixelsWide], [newRep pixelsHigh] )];

    [NSGraphicsContext restoreGraphicsState];

    return [newRep autorelease];
} 
```

在下一个方法中，我们从给定的 NSImageRep（它的一个子类）创建一个 NXBitmapImageRep（每像素位数=1，每像素样本=1），并将使用刚刚给出的方法：

```
- (NSBitmapImageRep *) binaryRepresentationOf:(NSImageRep *)aRep
{
    NSBitmapImageRep *grayRep = [aRep grayRepresentation];
    if( grayRep==nil ) return nil;

    NSInteger numberOfRows = [grayRep pixelsHigh];
    NSInteger numberOfCols = [grayRep pixelsWide];

    NSBitmapImageRep *newRep =
      [[NSBitmapImageRep alloc] initWithBitmapDataPlanes:NULL
                                        pixelsWide:numberOfCols
                                        pixelsHigh:numberOfRows
                                     bitsPerSample:1
                                   samplesPerPixel:1
                                          hasAlpha:NO
                                          isPlanar:NO
                                    colorSpaceName:NSCalibratedWhiteColorSpace
                                      bitmapFormat:0 
                                       bytesPerRow:0
                                      bitsPerPixel:0 ];

    unsigned char *bitmapDataSource = [grayRep bitmapData];
    unsigned char *bitmapDataDest = [newRep bitmapData];

    // here is the place to use dithering or error diffusion (code below)

    // iterate over all pixels
    NSInteger grayBPR = [grayRep bytesPerRow];
    NSInteger binBPR = [newRep bytesPerRow];
    NSInteger pWide = [newRep pixelsWide];

    for( NSInteger row=0; row<numberOfRows; row++ ){
      unsigned char *rowDataSource = bitmapDataSource + row*grayBPR;
      unsigned char *rowDataDest = bitmapDataDest + row*binBPR;

      NSInteger destCol = 0;
      unsigned char bw = 0;
      for( NSInteger col = 0; col<pWide; ){
        unsigned char gray = rowDataSource[col];
        if( gray>127 ) {bw |= (1<<(7-col%8)); };
        col++;
        if( (col%8 == 0) || (col==pWide) ){
            rowDataDest[destCol] = bw;
            bw = 0;
            destCol++;
        }
    }
}

// save as PNG for testing and return
    [[newRep representationUsingType:NSPNGFileType properties:nil] writeToFile:@"/tmp/bin_1.png" atomically:YES];
    return [newRep autorelease];
} 
```

对于误差扩散，我使用以下代码直接更改灰度图像的位图。这是允许的，因为不再使用灰色图像本身。

```
// change bitmapDataSource : use Error-Diffusion
for( NSInteger row=0; row<numberOfRows-1; row++ ){
    unsigned char *currentRowData = bitmapDataSource + row*grayBPR;
    unsigned char *nextRowData = currentRowData + grayBPR;
    for( NSInteger col = 1; col<numberOfCols; col++ ){
        NSInteger origValue = currentRowData[col];
        NSInteger newValue = (origValue>127) ? 255 : 0;
        NSInteger error = -(newValue - origValue);
        currentRowData[col] = newValue;

        currentRowData[col+1] = clamp(currentRowData[col+1] + (7*error/16));
        nextRowData[col-1] = clamp( nextRowData[col-1] + (3*error/16) );
        nextRowData[col] = clamp( nextRowData[col] + (5*error/16) );
        nextRowData[col+1] = clamp( nextRowData[col+1] + (error/16) );
    }
} 
```

钳位是在方法之前定义的宏

```
#define clamp(z) ( (z>255)?255 : ((z<0)?0:z) ) 
```

这使得 unsigned char 字节具有有效值 (0<=z<=255)

# c# - 用于登录 ASP.NET 网站的控制台应用程序

> ID：13391383
> 
> 赞同：6
> 
> 时间：2012-11-15T04:03:05.220
> 
> 标签：c#, asp.net, console-application, web-crawler, webclient

首先，请原谅我对这个问题的天真。我是一名退休的程序员，在 DOS 出现之前就开始了。我不是 ASP.NET 方面的专家。我需要知道的部分是我需要知道的。（如果你关注我...）

所以我想登录一个网站并抓取一些内容。在使用记事本和 fiddler2 查看 HTML 源代码后，我很清楚该站点是使用 ASP.NET 技术实现的。

我开始做很多谷歌搜索并阅读我能找到的关于用 C# 编写屏幕刮板的所有内容。经过一番调查和多次尝试，我想我得出的结论是，这并不容易。

问题的关键（正如我现在所看到的）是 ASP 为程序员提供了许多维护状态的方法。Cookie、视图状态、会话变量、页面变量、获取和发布参数等。另外，程序员可以在服务器和客户端脚本之间划分工作。IE、Safari、Chrome 或 Firefox 等富 Web 客户端知道如何处理程序员编写的任何内容（以及 ASP 框架在幕后实现的内容）。

WebClient 不是富 Web 客户端。它甚至不知道如何实现 cookie。

所以我陷入了僵局。一种方法是尝试对 ASP 应用程序所期望的富客户端的所有功能进行逆向工程，并在类固醇类上编写一个 WebClient，该类可以很好地模仿富客户端以进行登录。

或者我可以尝试将 IE（或其他一些富客户端）嵌入到我的应用程序中，并希望暴露的界面足够丰富，以便我可以以编程方式填写用户名和密码字段并将表单返回。（并访问响应流，以便我可以解析 HTML 以刮出我所追求的数据......）

或者我可以寻找一些比 WebClient 更丰富的 3rd 方控件。

谁能对我应该把注意力集中在哪里有一些敏锐的洞察力？

这既是一个项目，也是一次学习经历。也就是说，我真的很想从目标站点自动登录和信息检索。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T07:30:32.633

这是我用来登录网站并获取我的 cookie 的示例函数

```
string loginSite(string url, string username, string password)
        {
            HttpWebRequest req = (HttpWebRequest)WebRequest.Create(url);
            string cookie = "";

            //this values will change depending on the website
            string values = "vb_login_username=" + username + "&vb_login_password=" + password
                                + "&securitytoken=guest&"
                                + "cookieuser=checked&"
                                + "do=login";
            req.Method = "POST";
            req.ContentType = "application/x-www-form-urlencoded";
            req.ContentLength = values.Length;
            CookieContainer a = new CookieContainer();
            req.CookieContainer = a;
            System.Net.ServicePointManager.Expect100Continue = false; // prevents 417 error
            using (StreamWriter writer = new StreamWriter(req.GetRequestStream(), System.Text.Encoding.ASCII)) { writer.Write(values); }
            HttpWebResponse c = (HttpWebResponse)req.GetResponse();
            Stream ResponseStream = c.GetResponseStream();
            StreamReader LeerResult = new StreamReader(ResponseStream);
            string Source = LeerResult.ReadToEnd();

            foreach (Cookie cook in c.Cookies) { cookie = cookie + cook.ToString() + ";"; }
            return cookie;
        } 
```

这里有一个调用示例：

```
string Cookie = loginSite("http://theurl.comlogin.php?s=c29cea718f052eae2c6ed105df2b7172&do=login", "user", "passwd");

            HttpWebRequest req = (HttpWebRequest)HttpWebRequest.Create("http://www.theurl.com");
            //once you got the cookie you add it to the header.

            req.Headers.Add("cookie", Cookie);
            HttpWebResponse response = (HttpWebResponse)req.GetResponse();
            using (Stream respStream = response.GetResponseStream())
            {
                using (StreamReader sr = new StreamReader(respStream))
                {
                    string s = sr.ReadToEnd();
                    HtmlReturn = s;
                  //  System.Diagnostics.Debugger.Break();
                }
            } 
```

使用 Firefox，您可以使用扩展 HTTP-Headers 来了解 post 设置的参数并修改变量值：

```
 string values = "vb_login_username=" + username + "&vb_login_password=" + password
                                + "&securitytoken=guest&"
                                + "cookieuser=checked&"
                                + "do=login"; 
```

与目标网站上的参数相匹配。

如果您决定为 firefox 使用 Live-HTTP-HEaders，当您登录网站时，您将从标题中获取帖子信息，如下所示：

> GET / HTTP/1.1 主机：www.microsoft.com 用户代理：Mozilla/5.0 (Windows NT 6.1; rv:15.0) Gecko/20100101 Firefox/15.0.1 接受：text/html,application/xhtml+xml,application/ xml;q=0.9, */* ;q=0.8 Accept-Language: es-es,es;q=0.8,en-us;q=0.5,en;q=0.3 Accept-Encoding: gzip, deflate 连接: keep-alive Cookie：WT_FPC=id=82.144.112.152-154450144.30258861:lv=1351580394112:ss=1351575867559；WT_NVR_RU=0=msdn:1=:2=; omn​​iID=0d2276c2_bbdd_4386_a11d_f8da1dbc5489；MUID=349E06C547426937362B02CC434269B9；MC1=GUID=47b2ed8aeea0de4797d3a40cf549dcbb&HASH=8aed&LV=201210&V=4&LU=1351608258765; A=I&I=AxUFAAAAAAALBwAAukh4HjpMmS4eKtKpWV0ljg!!&V=4; msdn=L=en-US

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T07:39:28.633

我怀疑您可能能够构建一个可以为您执行此操作的 Chrome 扩展程序。

顺便说一句，您不是“安全专家”吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T07:58:43.983

你为什么不使用 IE，在 Windows 窗体中自动化 IE 非常简单，而且你也可以轻松处理代理。

# java - JPA 找不到命名参数

> ID：13391384
> 
> 赞同：8
> 
> 时间：2012-11-15T04:03:14.177
> 
> 标签：java, hibernate, jpa

我不断收到以下错误：“*无法找到命名参数 [articleCommentId]* ”，但这对我来说没有意义，因为对我来说，命名参数非常到位。

```
public ArticleCommentForDisplay getCommentByArticleCommentId(BigInteger articleCommentId) {

    String queryString = "select c.article_comment_id,  "
            + "       c.article_id,  "
            + "       c.parent_comment_id, "
            + "       p.nickname, "
            + "       c.title,  "
            + "       c.comment, "
            + "       c.person_id, "
            + "       c.confirmed_user, "
            + "       c.comment_depth, "
            + "       c.moderation_rank, "
            + "       c.moderation_reason, "
            + "       c.hide, "
            + "       c.hide_reason, "
            + "       c.session_id, "
            + "       c.confirmation_uuid, "
            + "       c.created_timestamp, "
            + "       c.created_by_id, "
            + "       c.updated_timestamp, "
            + "       c.updated_by_id, "
            + "       c.update_action, "
            + "       null as comment_path "
            + "from article_comment c "
            + "   join person p "
            + "       on p.person_id = c.person_id "
            + "where c.article_comment_id = :articleCommentId; ";

    Query query = em.createNativeQuery(queryString, "ArticleCommentMap");
    query.setParameter("articleCommentId", articleCommentId);

    List <ArticleCommentForDisplay> articleComments = new ArrayList<>();
    articleComments = query.getResultList();
    ArticleCommentForDisplay theComment = articleComments.get(0);

    return (theComment);

} 
```

这是带有相关错误的堆栈跟踪的摘录：

```
Caused by: java.lang.IllegalArgumentException: org.hibernate.QueryParameterException: could not locate named parameter [articleCommentId]
    at org.hibernate.ejb.QueryImpl.setParameter(QueryImpl.java:379)
    at org.hibernate.ejb.QueryImpl.setParameter(QueryImpl.java:72)
    at com.extremelatitudesoftware.content.ArticleCommentFacade.getCommentByArticleCommentId(ArticleCommentFacade.java:293) 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-11-15T04:07:39.540

我敢打赌这是由于`;`您的查询字符串中的额外内容。

SQL/HQL 不需要以分号结束

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-15T06:03:13.603

命名参数没有为`JPA Specification`.

代替

```
where c.article_comment_id = :articleCommentId; 
```

和

```
where c.article_comment_id = ?1;
....
query.setParameter(1, articleCommentId) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-09-04T07:27:47.083

`'`我的是sql 查询中的一个额外的。哦，我的天哪，一直看，直到我的眼睛差点漏出来`-)

因此，请确保您的查询中没有任何“*额外*”，确保您的 (, ", ' 等...具有匹配对，因为这种情况下的错误消息*不相关*并且与你的命名参数！JPA 是正确的，因为它找不到它，但那是因为你的查询中的其他东西搞砸了......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-02-15T11:07:48.837

你也可以这样使用

其中 c.article_comment_id = ?, 和 c.any_other_field = ?; .... query.setParameter(1, articleCommentId) query.setParameter(2, anyOtherValue)

它将按顺序进行。

你也可以给出像这样的数字

其中 c.article_comment_id = ?1，c.any_other_field = ?2；.... query.setParameter(1, articleCommentId) query.setParameter(2, anyOtherValue)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-04-06T06:55:06.543

如果您在查询结束时使用命名参数，请删除 ; 根据您的查询

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-10-25T14:37:29.847

就我而言，我没有在命名参数之后添加额外的空格。

例子：

```
 + "WHERE\n" + "    s.something = 'SOME'\n" + "START WITH\n"
                                        + "    s.country_type = :countryName" + "CONNECT BY\n"

changed to (notice the space after named parameter :countryName 

  + "WHERE\n" + "    s.something = 'SOME'\n" + "START WITH\n"
                                        + "    s.country_type = :countryName " + "CONNECT BY\n" 
```

# jquery - 如何在第一次单击时更改 href 并在第二次单击时转到它？

> ID：13391389
> 
> 赞同：1
> 
> 时间：2012-11-15T04:03:27.817
> 
> 标签：jquery, onclick, href

我正在尝试在第一次单击时更改列表项的文本和 href。在第二次单击时，它应该转到新的 url。这些是我尝试过的几种方法：

**HTML**

```
<ul class="nav">
  <li><a href="#">Click me</a></li>
</ul> 
```

**jQuery**

这种方式会更改文本，然后立即转到新的 url。

```
$('ul.nav li:nth-child(1) a[href="#"]').click(function() {
  $(this).text('New Text');
  $(this).attr('href', 'http://www.website.com');
}); 
```

第二种方法切换 text 和 href 但 preventDefault() 仍然阻止我转到新 URL，尽管在选择器中指定了 a[href="#"]。

```
$('ul.nav li:nth-child(1) a[href="#"]').click(function(e) {
  $(this).text('New Text');
  e.preventDefault();
  $(this).attr('href', 'http://www.website.com');
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T04:09:09.597

改用 .one('click') 只绑定一次点击

```
$('ul.nav li:nth-child(1) a[href="#"]').one('click', function(e) {
  e.preventDefault();
  $(this).text('New Text').attr('href', 'http://www.website.com');
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T04:14:41.667

```
$('ul.nav li:nth-child(1) a[href="#"]').click(function(e) {
  var elem = $(this);
  if(!elem.hasClass("changed")){
    elem.addClass("changed");
    $(this).text('New Text');
    $(this).attr('href', 'http://www.website.com');
    e.preventDefault();
  }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T04:09:34.737

您有几个选项，包括在第一次单击后删除单击处理程序（使用像您使用的非委托事件处理程序只会影响刚刚单击的元素）：

```
$('ul.nav li:nth-child(1) a[href="#"]').click(function(e) {
  $(this).text('New Text')
         .attr('href', 'http://www.website.com')
         .off('click'); // remove click handler
  e.preventDefault();
}); 
```

...或设置一个标志，以便您可以判断它是否已被更改：

```
$('ul.nav li:nth-child(1) a[href="#"]').click(function(e) {
   var $this = $(this);
   if (!$this.data("urlChanged")) {
      $this.text('New Text')
           .attr('href', 'http://www.website.com')
           .data("urlChanged", true);
      e.preventDefault();
   }
}); 
```

# asp.net - 登录控件的记住我复选框在选中时不会对用户进行身份验证

> ID：13391395
> 
> 赞同：0
> 
> 时间：2012-11-15T04:04:13.050
> 
> 标签：asp.net, session-cookies, asp.net-authentication

我已经在我的 web.config 中设置了 cookie。.

```
<authentication mode="Forms">
  <forms loginUrl="~/Account/Login.aspx" timeout="360" requireSSL="false" cookieless="UseCookies" name=".Mordevayne" slidingExpiration="true"/>
</authentication> 
```

以及机器钥匙。

```
 <machineKey validationKey="80B18E7CF458B1F8A7C91E656AA89CD49904C693C5F2A90926C43E970A2B0350E7B76507BB8F1F99597F595DD64D2934A2A8B192A013E9EFA8C79046931AB6EA"
decryptionKey="3B35B60055DB752582304CB98E3B560BE39BC063BB9AF8C50F4A58DC3D612472"
validation="SHA1" decryption="AES"/> 
```

. . 但是，当我将用户上传到托管站点时，只要选中了记住我复选框，用户就没有经过身份验证；但是当在 localhost 中运行时，tt 工作正常。我想知道为什么？

顺便说一下，这是我的登录代码：

```
Private Sub myLogin_Authenticate(ByVal sender As Object, ByVal e As 
System.Web.UI.WebControls.AuthenticateEventArgs) Handles myLogin.Authenticate

If Membership.ValidateUser(myLogin.UserName, myLogin.Password.Trim) Then

        Dim conString = ConfigurationManager.ConnectionStrings("ApplicationServices")
        Dim strConnString As String = conString.ConnectionString
        Dim loginswitch As Int16 = 0
        Dim loginswitch2 As Int16 = 0
        'check first if banned
        Dim con7 As SqlConnection = New SqlConnection(strConnString)
        Dim query7 As String = "SELECT * from xBanUsers WHERE username=@username"
        Dim cmd7 As SqlCommand = New SqlCommand(query7, con7)
        cmd7.Parameters.AddWithValue("@username", myLogin.UserName)
        con7.Open()
        Dim rd7 As SqlDataReader = cmd7.ExecuteReader
        rd7.Read()
        If rd7("isBanned") = "yes" Then
            'then check if banEnd is over
            Dim banEnd As DateTime = rd7("banEnd")
            If banEnd > DateTime.Now Then
                Session("banDetails") = "You have been banned by <font color='red'><b>" + rd7("punisher") + "</b></font> from <i>" + rd7("dateBanned") + "</i> up to <i>" + rd7("banEnd") + "</i>.<br/><br/>"
                Session("banDetails") += "<b>Ban Reason</b>: " + rd7("banReason") + ".<br/><br />"
                Session("banDetails") += "<b>Additional Details</b>:<br/>" + rd7("banNote")
                Response.Redirect("/BanReason.aspx")
            Else
                loginswitch2 = 1
            End If

        ElseIf rd7("isBanned") = "no" Then
            loginswitch = 1
        End If
        rd7.Close()
        con7.Close()

        'read addminutes         
        Dim conInterval As SqlConnection = New SqlConnection(strConnString)
        Dim queryInterval = "SELECT * FROM settime"
        Dim cmdInterval = New SqlCommand(queryInterval, conInterval)
        conInterval.Open()
        Dim rdInterval As SqlDataReader = cmdInterval.ExecuteReader
        rdInterval.Read()
        Dim addminutes As Integer = rdInterval("addminutes")
        rdInterval.Close()
        conInterval.Close()

        'proceed log in
        If loginswitch = 1 Or loginswitch2 = 1 Then
            'MsgBox(loginswitch2)
            Dim con As SqlConnection = New SqlConnection(strConnString)
            con.Open()
            Dim query As String = "INSERT INTO loginusers(username,date,time,month,year,datetime,day,IPAddress) VALUES(@usernameX,@dateX,@timeX,@monthX,@yearX,@datetimeX,@dayX,@IPAddress)"
            Dim cmd As SqlCommand = New SqlCommand(query, con)
            cmd.Parameters.AddWithValue("@usernameX", myLogin.UserName)
            Dim xxap As DateTime = DateTime.Now()
            xxap = xxap.AddMinutes(addminutes)
            cmd.Parameters.AddWithValue("@dateX", xxap.ToString("MM/dd/yyyy"))
            cmd.Parameters.AddWithValue("@timeX", xxap.ToString("HH:mm:ss"))
            cmd.Parameters.AddWithValue("@monthX", xxap.ToString("MM"))
            cmd.Parameters.AddWithValue("@yearX", xxap.ToString("yyyy"))
            cmd.Parameters.AddWithValue("@datetimeX", xxap.ToString("MM/dd/yyyy HH:mm:ss"))
            cmd.Parameters.AddWithValue("@dayX", xxap.ToString("dd"))
            Dim strHostName As String = System.Net.Dns.GetHostName()
            Dim clientIPAddress As String = System.Net.Dns.GetHostAddresses(strHostName).GetValue(0).ToString()
            cmd.Parameters.AddWithValue("@IPAddress", clientIPAddress)
            cmd.ExecuteNonQuery()
            con.Close()
            e.Authenticated = True
        End If

    Else
        e.Authenticated = False
    End If

End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T04:30:22.550

当用户选中复选框时，密码将保存在 cookie 中。下次当它返回时，它会通过在浏览器内存中准备就绪的 cookie 进行身份验证。
在您的情况下，这可能是 cookie 的问题。你是在指定cookies的时间还是什么？

这是一个可能对您有所帮助的问题 [ASP.Net Cookieless 是如何工作的？](https://stackoverflow.com/questions/5027653/how-asp-net-cookieless-is-work)

# playframework - 在 Play Framework 1.2.5 中带有 https 请求的 http.nonProxyHosts

> ID：13391397
> 
> 赞同：4
> 
> 时间：2012-11-15T04:04:22.123
> 
> 标签：playframework

我希望有人以前遇到过这种情况并可以指出我正确的方向。我们正在使用 application.conf 中的代理设置（http.proxyHost、http.proxyPort 和 http.nonProxyHosts），只要请求的 url 是 http，它们似乎就可以正常工作。如果我们将主机添加到 nonProxyHosts 列表，并使用 https 向该主机发出请求，它就不起作用（示例代码和堆栈跟踪）。如果我们删除 nonProxyHosts 列表，请求就可以正常工作，只是它随后会通过代理。无论主机是否在 nonProxyHosts 列表中，使用 http 的请求都可以正常工作。

任何帮助，将不胜感激。

示例代码

```
public static void google()
{
    try
    {
        renderHtml(WS.url("https://www.google.com").get().getString());
    }
    catch (Exception e)
    {
        e.printStackTrace();
    }
} 
```

当 http.nonProxyHosts=www.google.com 并且请求为 https 时发生的堆栈跟踪：java.lang.RuntimeException: java.util.concurrent.ExecutionException: java.io.IOException: Remotely Closed [id: 0x01f42269, /10.0.1.100 :56663 :> www.google.com/74.125.129.104:443] at play.libs.ws.WSAsync$WSAsyncRequest.get(WSAsync.java:223) at controllers.api.ContentAPI.google(ContentAPI.java:86)在 sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 在 sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) 在 sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) 在 java.lang.reflect.Method .invoke(Method.java:597) 在 play.mvc.ActionInvoker.invokeWithContinuation(ActionInvoker.java:557) 在 play.mvc.ActionInvoker.invoke(ActionInvoker.java:508) 在 play.mvc。在 play.mvc.ActionInvoker.invokeControllerMethod(ActionInvoker.java:479) 在 play.mvc.ActionInvoker.invoke(ActionInvoker.java:161) 在 play.server.PlayHandler$NettyInvocation.execute 的 ActionInvoker.invokeControllerMethod(ActionInvoker.java:484) (PlayHandler.java:251) 在 play.Invoker$Invocation.run(Invoker.java:278) 在 play.server.PlayHandler$NettyInvocation.run(PlayHandler.java:229) 在 java.util.concurrent.Executors$RunnableAdapter。在 java.util.concurrent.FutureTask.run(FutureTask.java:138) 在 java.util.concurrent 调用 (Executors.java:439) 在 java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303) .ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:98) at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:206) 在 java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886) 在 java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908) 在 java.lang.Thread.run(Thread .java:680) 引起：java.util.concurrent.ExecutionException: java.io.IOException: Remotely Closed [id: 0x01f42269, /10.0.1.100:56663 :> www.google.com/74.125.129.104:443] 在com.ning.http.client.providers.netty.NettyResponseFuture.abort(NettyResponseFuture.java:297) 在 com.ning.http.client.providers.netty.NettyAsyncHttpProvider.abort(NettyAsyncHttpProvider.java:1321) 在 com.ning。 http.client.providers.netty.NettyAsyncHttpProvider.channelClosed(NettyAsyncHttpProvider.java:1384) 在 org.jboss.netty.channel.SimpleChannelUpstreamHandler.handleUpstream(SimpleChannelUpstreamHandler.java:93) 在 org.jboss.netty.channel。DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline.java:564) at org.jboss.netty.channel.DefaultChannelPipeline$DefaultChannelHandlerContext.sendUpstream(DefaultChannelPipeline.java:792) at org.jboss.netty.handler.stream.ChunkedWriteHandler.handleUpstream(ChunkedWriteHandler.java: 145) 在 org.jboss.netty.channel.DefaultChannelPipeline$DefaultChannelHandlerContext.sendUpstream(DefaultChannelPipeline.java:792) 在 org.jboss.netty.handler 的 org.jboss.netty.channel.DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline.java:564) .codec.replay.ReplayingDecoder.cleanup(ReplayingDecoder.java:636) at org.jboss.netty.handler.codec.replay.ReplayingDecoder.channelClosed(ReplayingDecoder.java:533) at org.jboss.netty.handler.codec.http .HttpClientCodec$Decoder.channelClosed(HttpClientCodec.java:218) 在 org.jboss.netty。channel.SimpleChannelUpstreamHandler.handleUpstream(SimpleChannelUpstreamHandler.java:93) at org.jboss.netty.handler.codec.http.HttpClientCodec.handleUpstream(HttpClientCodec.java:92) at org.jboss.netty.channel.DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline. java:564) 在 org.jboss.netty.channel.DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline.java:559) 在 org.jboss.netty.channel.Channels.fireChannelClosed(Channels.java:476) 在 org.jboss.netty.channel .socket.nio.AbstractNioWorker.close(AbstractNioWorker.java:631) 在 org.jboss.netty.channel.socket.nio.NioWorker.read(NioWorker.java:101) 在 org.jboss.netty.channel.socket.nio .AbstractNioWorker.processSelectedKeys(AbstractNioWorker.java:372) 在 org.jboss.netty.channel.socket.nio.AbstractNioWorker.run(AbstractNioWorker.java:246) 在 org.jboss.netty。channel.socket.nio.NioWorker.run(NioWorker.java:38) at org.jboss.netty.util.ThreadRenamingRunnable.run(ThreadRenamingRunnable.java:102) at org.jboss.netty.util.internal.DeadLockProofWorker$1.run (DeadLockProofWorker.java:42) ... 3 更多原因：java.io.IOException: 远程关闭 [id: 0x01f42269, /10.0.1.100:56663 :> www.google.com/74.125.129.104:443] .. . 25 更多

# awk - 在 AWK 中，是否可以指定字段的“范围”？

> ID：13391400
> 
> 赞同：49
> 
> 时间：2012-11-15T04:04:36.480
> 
> 标签：awk

在 AWK 中，是否可以指定字段的“范围”？

例子。给定一个制表符分隔的文件“foo”，每行有 100 个字段，我只想打印每行的字段 32 到 57，并将结果保存在文件“bar”中。我现在应该做什么：

```
awk 'BEGIN{OFS="\t"}{print $32, $33, $34, $35, $36, $37, $38, $39, $40, $41, $42, $43, $44, $45, $46, $47, $48, $49, $50, $51, $52, $53, $54, $55, $56, $57}' foo > bar 
```

这样做的问题是打字很乏味并且容易出错。

是否有某种句法形式可以让我以更简洁、更不容易出错的方式说同样的话（比如“$32..$57”）？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-11-15T04:36:56.163

除了@Jerry 的`awk` [回答](https://stackoverflow.com/a/13391461/614005)，还有其他选择：

使用`cut`（默认采用制表符分隔符）：

```
cut -f32-58 foo >bar 
```

使用`perl`：

```
perl -nle '@a=split;print join "\t", @a[31..57]' foo >bar 
```

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2012-11-15T04:12:10.970

轻度修改版：

```
BEGIN { s = 32; e = 57; }

      { for (i=s; i<=e; i++) printf("%s%s", $(i), i<e ? OFS : "\n"); } 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-11-15T05:17:21.987

您可以使用 RE 间隔在 awk 中执行此操作。例如，要打印此文件中记录的字段 3-6：

```
$ cat file
1 2 3 4 5 6 7 8 9
a b c d e f g h i 
```

将会：

```
$ gawk 'BEGIN{f="([^ ]+ )"} {print gensub("("f"{2})("f"{4}).*","\\3","")}' file
3 4 5 6
c d e f 
```

我正在创建一个 RE 段 f 来表示每个字段加上它的后续字段分隔符（为方便起见），然后我在 gensub 中使用它来删除其中的 2 个（即前 2 个字段），记住接下来的 4 个以供参考稍后使用 \3，然后删除它们之后的内容。对于要打印字段 32-57（即前 31 个之后的 26 个字段）的制表符分隔文件，您可以使用：

```
gawk 'BEGIN{f="([^\t]+\t)"} {print gensub("("f"{31})("f"{26}).*","\\3","")}' file 
```

上面使用 GNU awk 作为它的 gensub() 函数。对于其他 awk，您将使用 sub() 或 match() 和 substr()。

编辑：这是编写函数来完成这项工作的方法：

```
gawk '
function subflds(s,e,   f) {
   f="([^" FS "]+" FS ")"
   return gensub( "(" f "{" s-1 "})(" f "{" e-s+1 "}).*","\\3","")
}
{ print subflds(3,6) }
' file
3 4 5 6
c d e f 
```

只需根据需要设置 FS。请注意，如果您的输入文件可以以空格开头和/或在字段之间有多个空格，并且仅当您的 FS 是单个字符时，这将需要对默认 FS 进行调整。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2017-08-16T09:12:45.503

我迟到了，但这很快就说到点子上了，所以我把它留在这里。在这种情况下，我通常只使用 gsub 删除不需要的字段并打印。快速而肮脏的例子，因为您知道您的文件由制表符分隔，您可以删除前 31 个字段：

```
awk '{gsub(/^(\w\t){31}/,"");print}' 
```

由于懒惰而删除 4 个字段的示例：

```
printf "a\tb\tc\td\te\tf\n" | awk '{gsub(/^(\w\t){4}/,"");print}' 
```

输出：

```
e   f 
```

与可怕的循环相比，这写起来更短、更容易记住并且使用更少的 CPU 周期。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-11-15T04:16:05.367

`printf`您可以在 awk中使用循环和 for 的组合：

```
#!/bin/bash

start_field=32
end_field=58

awk -v start=$start_field -v end=$end_field 'BEGIN{OFS="\t"}
{for (i=start; i<=end; i++) {
    printf "%s" $i;
    if (i < end) {
        printf "%s", OFS;
    } else {
        printf "\n";
    }
}}' 
```

但是，这看起来有点 hacky：

*   它根据指定的正确分隔您的输出`OFS`，并且
*   它确保在文件中的每个输入行的末尾打印一个新行。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-15T13:15:44.380

我不知道在 awk 中进行字段范围选择的方法。我知道如何在输入的末尾删除字段（见下文），但在开始时并不容易。贝娄，一开始就放弃字段的艰难方法。

如果您知道`c`输入中未包含的字符，则可以使用以下 awk 脚本：

```
BEGIN { s = 32; e = 57; c = "#"; }
{ NF = e            # Drop the fields after e.
  $s = c $s         # Put a c in front of the s field.
  sub(".*"c, "")    # Drop the chars before c.
  print             # Print the edited line.
} 
```

**编辑**：

而且我只是认为您总是可以找到输入中没有的字符：使用`\n`。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-05-22T14:11:47.770

不幸的是，似乎无法再访问我的帐户，但也没有 50 个代表来添加评论。

Bob 的答案可以使用 'seq' 简化很多：

```
echo $(seq -s ,\$ 5 9| cut -d, -f2-)
$6,$7,$8,$9 
```

次要的缺点是您必须将第一个字段编号指定为低一个。因此，要获取字段 3 到 7，我将 2 指定为第一个参数。

*seq -s ,\$ 2 7*在 ',$' 处为 seq 设置字段分隔符并产生**2,$3,$4,$5,$6,$7**

*cut -d, -f2-*将字段分隔符设置为 ',' 并且基本上通过显示从第二个字段开始的所有内容来剪切第一个逗号之前的所有内容。因此导致**$3,$4,$5,$6,$7**

结合 Bob 的答案，我们得到：

```
 $ cat awk.txt

    1 2 3 4 5 6 7 8 9

    a b c d e f g h i

    $ awk "{print $(seq -s ,\$ 2 7| cut -d, -f2-)}" awk.txt

    3 4 5 6 7

    c d e f g

    $ 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-07-06T10:26:33.990

我使用这个简单的函数，它不检查字段范围是否存在于行中。

```
function subby(f,l, s) {
  s = $f
  for(i=f+1;i<=l;i++)
    s = sprintf("%s %s",s,$i)

  return s
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-01-31T10:32:20.463

（我知道 OP 要求“在 AWK 中”但是......）

在命令行使用 bash 扩展生成参数列表；

```
$ cat awk.txt

1 2 3 4 5 6 7 8 9

a b c d e f g h i

$ awk "{print $(c="" ;for i in {3..7}; do c=$c\$$i, ; done ; c=${c%%,} ; echo $c ;)}" awk.txt

3 4 5 6 7
c d e f g 
```

解释 ;

```
c="" # var to hold args list
for i in {3..7} # the required variable range 3 - 7
do 
   # replace c's value with concatenation of existing value, literal $, i value and a comma
   c=$c\$$i, 
done 
c=${c%%,} # remove trailing/final comma
echo $c #return the list string 
```

使用分号放置在单行上，在内部`$()`进行评估/扩展。

# objective-c - UIButton UIButtonTypeCustom error.Unrecognized selector sent to class

> ID：13391402
> 
> 赞同：0
> 
> 时间：2012-11-15T04:04:42.863
> 
> 标签：objective-c, ios, checkbox, uibutton, invalid-argument

我的代码有这个错误。我正在设计一个自定义`checkbox`。为此，我有一个`UIView`我定制的看起来像一个`Checkbox`. 我有我的项目的另一个副本，我在其中使用了代码，它工作得非常好。我将代码复制到另一台mac，它不会工作。它是相同的代码。

```
 My.m file
- (void)defaultInit
{
btn_CheckBox = [UIButton buttonWithType:UIButtonTypeCustom];
btn_CheckBox.frame = CGRectMake(0, 0, kImageWidth, kImageHeight);
btn_CheckBox.adjustsImageWhenHighlighted = NO;
[btn_CheckBox setImage:[UIImage imageNamed:@"CheckBox_Deselected.png"] forState:UIControlStateNormal];
[btn_CheckBox setImage:[UIImage imageNamed:@"CheckBox_Selected.png"] forState:UIControlStateSelected];
[btn_CheckBox addTarget:self action:@selector(handleTap) forControlEvents:UIControlEventTouchUpInside];
[self addSubview:btn_CheckBox];

lbl_CheckBox = [[UILabel alloc] initWithFrame:CGRectMake(35, 0, self.bounds.size.width-35, 30)];
lbl_CheckBox.backgroundColor = [UIColor clearColor];
lbl_CheckBox.font = [UIFont systemFontOfSize:[UIFont smallSystemFontSize]];
[self addSubview:lbl_CheckBox];
 }
 - (void)setID:(NSUInteger)index andSelected:(BOOL)state andTitle:(NSString *)title
{
    nID = index;
    [btn_CheckBox setSelected:state];
    lbl_CheckBox.text = title;
}

- (void)handleTap
{
btn_CheckBox.selected = !btn_CheckBox.selected;

[delegate stateChangedForID:nID withCurrentState:btn_CheckBox.selected];
}
- (BOOL)currentState
{
    return btn_CheckBox.selected;
} 
```

我在第一行收到错误，`method.btn_CheckBox = [UIButton buttonWithType:UIButtonTypeCustom];`一旦我的断点到达这一行，它就会抛出这个错误

```
Terminating app due to uncaught exception 'NSInvalidArgumentException' reason :'+[UIButton buttonWithType:]:unrecognized selector sent to class 0x3a88'. 
```

我的 .h 文件

```
@protocol CheckBoxDelegate <NSObject>
- (void)stateChangedForID:(NSUInteger)index withCurrentState:(BOOL)currentState;
@end
@interface Checkbox : UIView
{
NSUInteger  nID;
UIButton    *btn_CheckBox;
UILabel     *lbl_CheckBox;

id <CheckBoxDelegate> delegate;
}
 @property (strong, nonatomic) UIButton *btn_CheckBox; 
```

为什么我会收到此错误？任何帮助都会很棒。如果您需要更多信息，请询问。谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T06:11:21.400

在行中：

```
[btn_CheckBox addTarget:self action:@selector(handleTap) forControlEvents:UIControlEventTouchUpInside]; 
```

该方法的`handleTap`状态是`- (void)handleTap { }`还是`- (void)handleTap:(id)sender`？如果是后者，您的行应更新为：

```
[btn_CheckBox addTarget:self action:@selector(handleTap:) forControlEvents:UIControlEventTouchUpInside]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T04:27:06.787

您需要`#import <UIKit/UIKit.h>`在 .h 文件的顶部。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T05:29:44.697

你能重新看看你的错误，为什么它说

**由于未捕获的异常“NSInvalidArgumentException”原因而终止应用程序：“+[UIBUtton buttonWithType:]:unrecognized selector sent to class 0x3a88”。**这个？？

原因：'+[* *UIBU* *tton buttonWithType:]

它说 UIBU，所以我相信 UIButton 有拼写错误。

希望能帮助到你。

# java - 从 2D 颜色阵列创建图像

> ID：13391404
> 
> 赞同：3
> 
> 时间：2012-11-15T04:05:03.080
> 
> 标签：java, image, colors, bufferedimage

我有一个名为 image[][] 的数组，我想用它创建一个 BufferedImage，这样我就可以让播放器将它存储在一个文件中。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-15T04:10:37.823

```
// Initialize Color[][] however you were already doing so.
Color[][] image;

// Initialize BufferedImage, assuming Color[][] is already properly populated.
BufferedImage bufferedImage = new BufferedImage(image.length, image[0].length,
        BufferedImage.TYPE_INT_RGB);

// Set each pixel of the BufferedImage to the color from the Color[][].
for (int x = 0; x < image.length; x++) {
    for (int y = 0; y < image[x].length; y++) {
        bufferedImage.setRGB(x, y, image[x][y].getRGB());
    }
} 
```

这是一种创建（并可能存储）图像的简单方法，如果这是您想要达到的。然而，这无论如何都不是有效的。尝试使用更大的图像，您会看到明显的速度差异。

# c# - 层次结构数据的 LINQ 递归

> ID：13391406
> 
> 赞同：2
> 
> 时间：2012-11-15T04:05:28.967
> 
> 标签：c#, linq, entity-framework, .net-4.0, linq-to-entities

我有一个这样的数据结构：

```
Category: ID, Name
Manufacturer: ID, Name
Product: ID, CategoryID, ManufacturerID, Name 
```

我正在使用 EF 调用返回数据的存储过程，如下所示：

```
CategoryID   CategoryName  ManufacturerID  ManufacturerName ProductID ProductName
=================================================================================
1            C1            1               M1               1         P1
1            C1            1               M1               2         P2
1            C1            2               M2               3         P3
2            C2            1               M1               4         P4
2            C2            3               M3               5         P5 
```

EF 生成映射上述数据的数据类型（MyFlatDataType）。

我想使用 LINQ resursion 来构造可以在树视图中显示的对象：

```
C1
  \_ M1
       \_ P1
       \_ P2
  \_ M2
       \_ P3
C2
  \_ M1
       \_ P4
  \_ M3
       \_ P5 
```

请注意，我还需要保留每个节点的 ID（可以是 CategoryID、ManufacturerID 或 ProductID，因此它不像 ParentID，因为这些 ID 可能具有相同的种子值）。这是可行的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T07:58:05.643

这应该可以解决问题。

```
//The data rows you're getting from the stored procedure:
IEnumerable<MyFlatDataType> rows = ...;
//The tree structure you requested:
var categories = rows
    .GroupBy(row => new { row.CategoryID, row.CategoryName })
    .Select(categoryGroup => new
    {
        categoryGroup.Key.CategoryID,
        categoryGroup.Key.CategoryName,
        Manufacturers = categoryGroup
            .GroupBy(row => new { row.ManufacturerID, row.ManufacturerName })
            .Select(manufacturerGroup => new
            {
                manufacturerGroup.Key.ManufacturerID,
                manufacturerGroup.Key.ManufacturerName,
                Products = manufacturerGroup
                    .Select(row => new
                    {
                        row.ProductID,
                        row.ProductName
                    })
                    .ToList()
            })
            .ToList()
    })
    .ToList(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T05:15:25.917

假设所有集合都已经在内存中（您对任何 orm 只字未提），那么您所要做的就是加入：

```
products
  .Join(cats, x => x.catId, x => x.id, (x, y) => new Projection(){cat = y, p = x})
  .Join(mans, x => x.p.manId, x => x.id, (x, y) => { x.man = y; return x; })
  ; 
```

代码示例：

```
public class Product
{
    public int id;
    public int catId;
    public int manId;
    public string name;
}

public class Man
{
    public int id;
    public string name;
}

public class Cat
{
    public int id;
    public string name;
}

public class Projection
{
    public Cat cat;
    public Man man;
    public Product p;
}

[Fact]
public void Do()
{
    var products = new List<Product>()
       {
           new Product{id=1, catId=1, manId=1, name="1"},
           new Product{id=2, catId=1, manId=1, name="2"},
           new Product{id=3, catId=1, manId=2, name="3"},
           new Product{id=4, catId=2, manId=1, name="4"},
           new Product{id=5, catId=2, manId=3, name="5"},
       };

    var cats = new List<Cat>()
       {
           new Cat() {id = 1, name = "1c"},
           new Cat() {id = 2, name = "2c"}
       };

    var mans = new List<Man>()
       {
           new Man() {id = 1, name = "1m"},
           new Man() {id = 2, name = "2m"},
           new Man() {id = 3, name = "3m"}
       };

    var results = products
        .Join(cats, x => x.catId, x => x.id, (x, y) => new Projection(){cat = y, p = x})
        .Join(mans, x => x.p.manId, x => x.id, (x, y) => { x.man = y; return x; })
        ;

    foreach (var x in results)
    {
        Console.WriteLine("{0} {1} {2} {3} {4} {5}", x.cat.id, x.cat.name, x.man.id, x.man.name, x.p.id, x.p.name);
    }
} 
```

# c# - FFT算法得到错误的声音频率值

> ID：13391408
> 
> 赞同：2
> 
> 时间：2012-11-15T04:05:41.753
> 
> 标签：c#, audio, fft, wav, frequency

我在一个~~[440Hz 的音频文件](http://www.speedyshare.com/R6d9g/440.wav)~~[上运行了这个FFT 算法](https://gerrybeauregard.wordpress.com/2011/04/01/an-fft-in-c/)。但我得到了一个意想不到的声音频率：510Hz。

1.  包含的 .wav是否`byteArray`正确转换为 2 个双精度数组（Re & Im 部分）？虚数数组只包含 0。
2.  我假设最高的声音频率是`xRe`数组的最大值：请看`run()`函数的最后？也许这是我的错误：它是平均的还是类似的？

那有什么问题呢？

**更新：**最大和 Re+Im 位于索引 = 0，所以我得到频率 = 0；

**~~[整个项目](http://speedy.sh/W5kAm/FFT3.zip)~~：包含 .wav -> 只需打开并运行。**

```
using System;
using System.Net;
using System.IO;

namespace FFT {
    /**
     * Performs an in-place complex FFT.
     *
     * Released under the MIT License
     *
     * Copyright (c) 2010 Gerald T. Beauregard
     *
     * Permission is hereby granted, free of charge, to any person obtaining a copy
     * of this software and associated documentation files (the "Software"), to
     * deal in the Software without restriction, including without limitation the
     * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
     * sell copies of the Software, and to permit persons to whom the Software is
     * furnished to do so, subject to the following conditions:
     *
     * The above copyright notice and this permission notice shall be included in
     * all copies or substantial portions of the Software.
     *
     * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
     * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
     * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
     * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
     * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
     * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
     * IN THE SOFTWARE.
     */
    public class FFT2 {
        // Element for linked list in which we store the
        // input/output data. We use a linked list because
        // for sequential access it's faster than array index.
        class FFTElement {
            public double re = 0.0;     // Real component
            public double im = 0.0;     // Imaginary component
            public FFTElement next;     // Next element in linked list
            public uint revTgt;         // Target position post bit-reversal
        }
        private static int sampleRate;
        private uint m_logN = 0;        // log2 of FFT size
        private uint m_N = 0;           // FFT size
        private FFTElement[] m_X;       // Vector of linked list elements

        /**
         *
         */
        public FFT2() {
        }

        /**
         * Initialize class to perform FFT of specified size.
         *
         * @param   logN    Log2 of FFT length. e.g. for 512 pt FFT, logN = 9.
         */
        public void init(uint logN) {
            m_logN = logN;
            m_N = (uint)(1 << (int)m_logN);

            // Allocate elements for linked list of complex numbers.
            m_X = new FFTElement[m_N];
            for (uint k = 0; k < m_N; k++)
                m_X[k] = new FFTElement();

            // Set up "next" pointers.
            for (uint k = 0; k < m_N - 1; k++)
                m_X[k].next = m_X[k + 1];

            // Specify target for bit reversal re-ordering.
            for (uint k = 0; k < m_N; k++)
                m_X[k].revTgt = BitReverse(k, logN);
        }

        /**
         * Performs in-place complex FFT.
         *
         * @param   xRe     Real part of input/output
         * @param   xIm     Imaginary part of input/output
         * @param   inverse If true, do an inverse FFT
         */
        public void run(double[] xRe, double[] xIm, bool inverse = false) {
            uint numFlies = m_N >> 1;   // Number of butterflies per sub-FFT
            uint span = m_N >> 1;       // Width of the butterfly
            uint spacing = m_N;         // Distance between start of sub-FFTs
            uint wIndexStep = 1;        // Increment for twiddle table index

            // Copy data into linked complex number objects
            // If it's an IFFT, we divide by N while we're at it
            FFTElement x = m_X[0];
            uint k = 0;
            double scale = inverse ? 1.0 / m_N : 1.0;
            while (x != null) {
                x.re = scale * xRe[k];
                x.im = scale * xIm[k];
                x = x.next;
                k++;
            }

            // For each stage of the FFT
            for (uint stage = 0; stage < m_logN; stage++) {
                // Compute a multiplier factor for the "twiddle factors".
                // The twiddle factors are complex unit vectors spaced at
                // regular angular intervals. The angle by which the twiddle
                // factor advances depends on the FFT stage. In many FFT
                // implementations the twiddle factors are cached, but because
                // array lookup is relatively slow in C#, it's just
                // as fast to compute them on the fly.
                double wAngleInc = wIndexStep * 2.0 * Math.PI / m_N;
                if (inverse == false)
                    wAngleInc *= -1;
                double wMulRe = Math.Cos(wAngleInc);
                double wMulIm = Math.Sin(wAngleInc);

                for (uint start = 0; start < m_N; start += spacing) {
                    FFTElement xTop = m_X[start];
                    FFTElement xBot = m_X[start + span];

                    double wRe = 1.0;
                    double wIm = 0.0;

                    // For each butterfly in this stage
                    for (uint flyCount = 0; flyCount < numFlies; ++flyCount) {
                        // Get the top & bottom values
                        double xTopRe = xTop.re;
                        double xTopIm = xTop.im;
                        double xBotRe = xBot.re;
                        double xBotIm = xBot.im;

                        // Top branch of butterfly has addition
                        xTop.re = xTopRe + xBotRe;
                        xTop.im = xTopIm + xBotIm;

                        // Bottom branch of butterly has subtraction,
                        // followed by multiplication by twiddle factor
                        xBotRe = xTopRe - xBotRe;
                        xBotIm = xTopIm - xBotIm;
                        xBot.re = xBotRe * wRe - xBotIm * wIm;
                        xBot.im = xBotRe * wIm + xBotIm * wRe;

                        // Advance butterfly to next top & bottom positions
                        xTop = xTop.next;
                        xBot = xBot.next;

                        // Update the twiddle factor, via complex multiply
                        // by unit vector with the appropriate angle
                        // (wRe + j wIm) = (wRe + j wIm) x (wMulRe + j wMulIm)
                        double tRe = wRe;
                        wRe = wRe * wMulRe - wIm * wMulIm;
                        wIm = tRe * wMulIm + wIm * wMulRe;
                    }
                }

                numFlies >>= 1;     // Divide by 2 by right shift
                span >>= 1;
                spacing >>= 1;
                wIndexStep <<= 1;   // Multiply by 2 by left shift
            }

            // The algorithm leaves the result in a scrambled order.
            // Unscramble while copying values from the complex
            // linked list elements back to the input/output vectors.
            x = m_X[0];
            while (x != null) {
                uint target = x.revTgt;
                xRe[target] = x.re;
                xIm[target] = x.im;
                x = x.next;
            }

            //looking for max  IS THIS IS FREQUENCY
            double max = 0, index = 0;
            for (int i = 0; i < xRe.Length; i++) {
                if (xRe[i] + xIm[i] > max) {
                    max = xRe[i]*xRe[i] + xIm[i]*xIm[i];
                    index = i;
                }
            }
            max = Math.Sqrt(max);
         /*   if the peak is at bin index i then the corresponding
            frequency will be i * Fs / N whe Fs is the sample rate in Hz and N is the FFT size.*/

            //DONT KNOW WHY THE BIGGEST VALUE IS IN THE BEGINNING
            Console.WriteLine("max "+ max+" index " + index + " m_logN" + m_logN + " " + xRe[0]);
            max = index * sampleRate / m_logN;
            Console.WriteLine("max " + max);
        }

        /**
         * Do bit reversal of specified number of places of an int
         * For example, 1101 bit-reversed is 1011
         *
         * @param   x       Number to be bit-reverse.
         * @param   numBits Number of bits in the number.
         */
        private uint BitReverse(
            uint x,
            uint numBits) {
            uint y = 0;
            for (uint i = 0; i < numBits; i++) {
                y <<= 1;
                y |= x & 0x0001;
                x >>= 1;
            }
            return y;
        }
        public static void Main(String[] args) {
            // BinaryReader reader = new BinaryReader(System.IO.File.OpenRead(@"C:\Users\Duke\Desktop\e.wav"));
            BinaryReader reader = new BinaryReader(File.Open(@"440.wav", FileMode.Open));
            //Read the wave file header from the buffer. 

            int chunkID = reader.ReadInt32();
            int fileSize = reader.ReadInt32();
            int riffType = reader.ReadInt32();
            int fmtID = reader.ReadInt32();
            int fmtSize = reader.ReadInt32();
            int fmtCode = reader.ReadInt16();
            int channels = reader.ReadInt16();
            sampleRate = reader.ReadInt32();
            int fmtAvgBPS = reader.ReadInt32();
            int fmtBlockAlign = reader.ReadInt16();
            int bitDepth = reader.ReadInt16();

            if (fmtSize == 18) {
                // Read any extra values
                int fmtExtraSize = reader.ReadInt16();
                reader.ReadBytes(fmtExtraSize);
            }

            int dataID = reader.ReadInt32();
            int dataSize = reader.ReadInt32();

            // Store the audio data of the wave file to a byte array. 

            byte[] byteArray = reader.ReadBytes(dataSize);
            /*    for (int i = 0; i < byteArray.Length; i++) {
                    Console.Write(byteArray[i] + " ");
                }*/

            byte[] data = byteArray;
            double[] arrRe = new double[data.Length];
            for (int i = 0; i < arrRe.Length; i++) {
                arrRe[i] = data[i] / 32768.0;
            }
            double[] arrI = new double[data.Length];
            for (int i = 0; i < arrRe.Length; i++) {
                arrI[i] = 0;
            }

            /**
       * Initialize class to perform FFT of specified size.
       *
       * @param logN    Log2 of FFT length. e.g. for 512 pt FFT, logN = 9.
       */
            Console.WriteLine();
            FFT2 fft2 = new FFT2();
            uint logN = (uint)Math.Log(data.Length, 2);
            fft2.init(logN);

            fft2.run(arrRe, arrI);
            // After this you have to split that byte array for each channel (Left,Right)
            // Wav supports many channels, so you have to read channel from header
            Console.ReadLine();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-15T06:47:50.173

您需要解决一些问题：

*   您没有在 FFT 之前应用[窗函数](http://en.wikipedia.org/wiki/Window_function)- 这在一般情况下会导致[频谱泄漏](http://en.wikipedia.org/wiki/Spectral_leakage)，并且您可能会得到误导性结果，尤其是在寻找峰值时，因为会有频谱“拖尾”。

*   在寻找峰值时，您应该查看 FFT 输出箱的*大小*，而不是单个实部和虚部 - （尽管如果您只是在寻找峰值，则`magnitude = sqrt(re^2 +im^2)`无需担心）。`sqrt`

*   确定了一个峰值后，您需要将 bin 索引转换为频率 - 如果峰值位于 bin 索引 i 处，则相应的频率将`i * Fs / N`是`Fs`采样率 (Hz) 和`N`FFT 大小。

*   对于实数到复数 FFT，您可以忽略第二个 N / 2 个输出箱，因为它们只是前 N / 2 个箱的复共轭镜像

（有关上述内容的更全面解释，另请参阅[此答案](https://stackoverflow.com/a/4371627/253056)。）

# image - 在图像单击时设置 div 可见性

> ID：13391412
> 
> 赞同：0
> 
> 时间：2012-11-15T04:06:55.587
> 
> 标签：image, html, onclick

所以我有一个标签内的图像，我还有一个位于屏幕中间的 div。

在单击图像之前，如何使此 div 不可见？

div 可见时的页面预览：![http://i.stack.imgur.com/P8XZe.jpg](../Images/31b5d63203e1fa2e1d167dddc408bead.png)

所以添加到购物车的是屏幕中间的一个 div。我希望仅在单击“添加到购物车”按钮时显示。

我希望 div 在 2 秒后再次消失。过渡会很好（例如淡入可见），但我不介意。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T11:43:31.403

css

```
.hide{
display:none;
} 
```

html

```
<div class="hide">
// put content here
</div>
<img class="hide-show" src="site.com/image.png" alt=""/> 
```

js

```
$(function(){
 $('.hide-show').bind('click',function(){
    $('.hide').fadeIn(500).delay(2000).fadeOut(500);

    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T05:58:45.767

将 div 的显示设置为 none 并为图像执行 onclick 事件，将 div 的显示设置为阻止。我建议使用 JQuery 添加任何过渡或动画。

类似的东西（没有动画）：

```
<div id="cart" style="display:none">

</div>
<img src="imgsource" onClick="document.getElementById('cart').style.display = 'block'"/> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T11:37:32.417

解决了。不得不使用jQuery。

在 <head> 中：

```
<script>
$(document).ready(function(){
  $(".addtocart").click(function(){
    $(".addedcartbg").fadeIn(500);
    $(".addedcartbg").delay(1000);
    $(".addedcartbg").fadeOut(500);
  });
});
</script> 
```

在 <body> 中：

```
<div class="addedcartbg" style="display:none"><div class="addedcart"> Successfully added to cart. </div></div> 
```

# python - 无法在 Sublime Text 2 .py 文件中执行构建（Ctrl + B）

> ID：13391413
> 
> 赞同：2
> 
> 时间：2012-11-15T04:07:04.277
> 
> 标签：python, linux, build, sublimetext2, xubuntu

我会尽力解释，因为我的英语不是很好。我正在使用 Python 和 Sublime Text 2。一切正常，我可以毫无问题地构建所有 .py 文件。我在我的 Linux 发行版（Ubuntu 12.04.1）中使用了默认编译器，即 Python 2.7。

1 周前，我发现我可以毫无问题地安装 Python 3，并决定安装它。在 shell 中一切正常，如果我编写命令 python 它执行 2.7 版本，对于 3.0 我必须编写命令 Python 3。我为 Python 2 和 3 做了一个新的构建并且它工作。

但是一两天后，我发现我只能构建位于本地驱动器上的文件，而我在另一个分区（/media/Data/..）中的文件却不能。我只需按 Ctrl+B 或单击命令，构建结果控制台甚至都不会出现。我删除了我为 Python 3 构建的版本，但它停止了工作。

有人知道如何解决吗？因为我的所有项目都在另一个分区中，以这种方式工作有点疯狂。

谢谢你。

# css - 如何使用 CSS 获取 Jelly Bean 样式的文本字段？

> ID：13391416
> 
> 赞同：1
> 
> 时间：2012-11-15T04:07:10.390
> 
> 标签：css, border

看看这个截图：

![在此处输入图像描述](../Images/f6fec8676071c72cdba3a646306531a5.png)

是否有可能仅使用 css(3) 在文本字段周围设置边框，该边框仅部分包裹每一侧？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T04:50:31.017

这有点令人费解，但似乎有效：http: [//jsfiddle.net/3hrNp/2/](http://jsfiddle.net/3hrNp/2/)

但是，使用背景图像可能会更好 - 更简单。

```
<div class="container">       
    <div class="parent">
        <input type="textbox" value="Username or email" />
        <div class="inner"></div>
    </div>
    <br />
    <div class="parent">
        <input type="textbox" value="Password" />
        <div class="inner"></div>
    </div>
</div> 
```

CSS：

```
.container {
    width: 210px;
    background-color: #F1F0EE;
    padding: 10px;
}

.parent {
    border: none;
    width: 200px;
    position: relative;
}

.inner {
    position: absolute;
    width: 200px;
    height: 3px;
    bottom: 5px;
    left: 0;
    border: solid 2px #CCCBCA;
    border-top: none;
}

input:focus + div.inner {
    border: solid 2px #57B8D6;
    border-top: none;
}

input {
    margin: 5px;
    width: 190px;
    padding: 5px;
    border: none;
    color: #6E6F6F;
    background-color: #F1F0EE;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T05:00:41.860

查看代码笔：[这里](http://codepen.io/anon/pen/FBslm)

```
<div class="wrapper">
  <input type="text" placeholder="text field">
</div>

<div class="wrapper">
 <input type="text" placeholder="Another one">
</div> 
```

使用以下 CSS：

```
* {

   box-sizing: border-box;

}

body {

  background: #dfdfdf;

}

input {

  width: 250px;
  text-transform: uppercase;
  position: relative;
  background: #dfdfdf;
  color: #444;
  padding: 5px;
  border: 0;
  outlne: none;
  display: block;

}

input:focus {

    outline:none;

}

.wrapper {

  position: relative;
  left: 50%;
  margin-left: -125px;
  margin-top: 50px;
  width: 250px;
  border-bottom: 1px solid #888;

}

.wrapper:before {

  width: 1px;
  height: 5px;
  background-color: #888;
  content: " ";
  display: block;
  position: absolute;
  bottom: 0px;
  left: -1px;

}

.wrapper:after {

  width: 1px;
  height: 5px;
  background-color: #888;
  content: " ";
  display: block;
  position: absolute;
  bottom: 0px;
  right: 0px;

}

.wrapper:hover::after, .wrapper:hover::before {

    background: #57B8D6;
    width: 2px;

}

.wrapper:hover::after {

    right: 0px;

}

.wrapper:hover::before {

    left: 0px;

}

.wrapper:before {

    left: 0px;
    z-index: 100;

}

.wrapper:hover {

    border-bottom: 2px solid #57B8D6;
    margin-top: 50px;
    margin-left: -125px;

} 
```

# ios - 使用 GPS 开发 iPhone 应用程序

> ID：13391428
> 
> 赞同：-1
> 
> 时间：2012-11-15T04:08:09.910
> 
> 标签：ios, gps

嗨，我正在为我的大学从事这个项目，其基本思想是追踪用户的位置，安装应用程序后，您可以拥有朋友，并且用户可以在授权后在地图上追踪他或她的朋友的位置。类似找到我的朋友应用程序。我是这个发展的新手，但我渴望学习和发展，所以如果你们能以任何形式帮助我，我会非常感谢你们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T06:06:23.110

您应该查看[位置感知编程指南](http://developer.apple.com/library/ios/documentation/userexperience/conceptual/LocationAwarenessPG/CoreLocation/CoreLocation.html#//apple_ref/doc/uid/TP40009497-CH2-SW1)，其中讨论了如何在 iOS 应用程序中确定一个人的位置。指南的其他部分也讨论了显示地图的过程。

然后获取该位置信息，然后识别您附近区域的其他人会增加另一个层次的复杂性，您可能需要开发一个服务器来协调 (a) 接收从应用程序提交的有关特定用户所在位置的信息；(b) 向应用报告用户的哪些朋友在用户特定位置的合理距离内。对于新开发人员来说，这让我觉得这是一个非常复杂的项目。专注于开发没有这种服务器复杂性的应用程序可能更谨慎。当已经存在大量现有应用程序以允许朋友彼此共享其位置时，尤其如此。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T06:05:13.350

您可以参考[此处](https://stackoverflow.com/questions/4152003/how-can-i-get-current-location-from-user-in-ios)了解有关获取用户当前位置的信息。

```
- (void)locationManager:(CLLocationManager *)manager didUpdateToLocation:(CLLocation *)newLocation fromLocation:(CLLocation *)oldLocation {
    NSLog(@"OldLocation %f %f", oldLocation.coordinate.latitude, oldLocation.coordinate.longitude);
    NSLog(@"NewLocation %f %f", newLocation.coordinate.latitude, newLocation.coordinate.longitude);
} 
```

当应用程序运行时，您必须需要一个网络服务来存储每个设备的位置，然后从您的应用程序向网络服务发送查询，从那里您将找到使用该应用程序的设备列表。

这不是一个非常优雅的解决方案，因为用户总是在轮询服务器，并且 Web 请求失败的频率可能比您想要的要高。我听说过套接字编程，用户与服务器保持实时连接，当服务器发生变化时，用户会收到通知，这听起来更像是正确的方法，但听起来更难：P

[在此处](https://stackoverflow.com/questions/12155753/any-demo-example-multiple-map-annotation-using-plist/12156477#12156477)查看我的答案以在 MAP 上显示多个注释。

# asp.net-mvc - Linux 上的 mono 返回不同的 cookie 集

> ID：13391435
> 
> 赞同：4
> 
> 时间：2012-11-15T04:08:55.113
> 
> 标签：asp.net-mvc, apache, cookies, mono, mod-mono

我有一个 MVC 站点在 apache2 undo ubuntu 上的 mono 2.10.8.1 上运行。如果一切正常，我有一项服务可以检查凭据并设置 cookie。在 Windows 中我没有问题，只有一个 cookie `.ASPXAUTH`：。但是，当我部署到 linux 服务器时，它会设置两个 cookie`ASP.NET_SessionId`和`.MONOAUTH`.

我的问题是为什么它是 linux 中的两个 cookie 和 windows 中的一个，我怎样才能摆脱`ASP.NET_SessionId`cookie？

我正在设置这样的cookie：

```
 Response.AppendCookie(BuildAuthenticationCookie(login, data));

    public static HttpCookie BuildAuthenticationCookie(string login, string ticketData)
    {
        var authTicket = new FormsAuthenticationTicket(2, login, DateTime.Now,
            DateTime.Now.AddMinutes(500), false, ticketData);
        var authCookie = new HttpCookie( FormsAuthentication.FormsCookieName, FormsAuthentication.Encrypt(authTicket))
        {
            HttpOnly = true,
            Secure = SiteSettings.CookiesSslOnly,
            Expires = DateTime.Now.AddMinutes(SiteSettings.AuthCookieExpirationTime)
        };
        return authCookie;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T15:09:51.447

我认为 Mono 没有任何问题。实际上，您提到的两个 cookie`ASP.NET_SessionId`是`.MONOAUTH`会话*和*表单*授权*cookie，它们确实不同。
要摆脱`ASP.NET_SessionId`，您可以根本不使用 Sessions 或拥有无 cookie 会话（[MSDN 上的 <sessionSate>](http://msdn.microsoft.com/en-us/library/h6bb9cz9%28v=vs.100%29.aspx)）。

**注意**：您还应该在 Windows 上获得两个 cookie。如果不是，则可能意味着您没有点击任何在 SessionState 中设置某些值的 MVC 操作。如果您设法找到这样的操作，您也会在 Windows 上获得两个 cookie。

# ruby-on-rails-3 - Rails：查找以字符串开头且不以另一个字符串结尾的匹配项

> ID：13391436
> 
> 赞同：1
> 
> 时间：2012-11-15T04:09:02.930
> 
> 标签：ruby-on-rails-3, match

我这里有这个小东西：

```
def get_articles
  @articles = []
  Doc.column_names.each do |a|
    if a.match(/^article/)
      @articles << a
    end
  end
end 
```

但它会返回很多不需要的结果。我将如何丢弃它以特定字符串（例如，`_body`）返回的结果？

干杯!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T04:12:43.147

怎么样：

```
if a.match(/^article/) and !a.match(/_body$/) 
```

顺便说一句，您的方法可以重写（[更紧凑](http://ruby-doc.org/core-1.9.3/Enumerable.html#method-i-find_all)）为：

```
def get_articles
  @articles = Doc.column_names.select { |a| a.match(/^article/) && !a.match(/_body$/) }
end 
```

您还可以将双重匹配替换为包含[零宽度否定后向断言](http://www.ruby-doc.org/core-1.9.3/Regexp.html)的单个匹配，但对于大多数人来说，它的可读性较差（尽管在快速和肮脏的测试中速度大约是 2 倍）：

```
def get_articles
  @articles = Doc.column_names.select { |a| a.match(/^article.*(?<!_body)$/) }
end 
```

# python - Python - 使用 API 获取响应标题

> ID：13391438
> 
> 赞同：0
> 
> 时间：2012-11-15T04:09:06.393
> 
> 标签：python, rest

我正在尝试修改一些现有代码以从 API 调用的“标题”返回值。想知道它是否可能？

示例 API 网址：[http ://domain.com/rest/getSong.view?u=username&p=password&v=1.8.0&id=11452](http://domain.com/rest/getSong.view?u=username&p=password&v=1.8.0&id=11452)

上面的 URL 返回：

```
<domain-response xmlns="http://domain.org/restapi" status="ok" version="1.8.0">
<song id="11452" parent="11044" title="The Title" album="The Album"/>
</domain-response> 
```

如果我知道 id，现在有没有办法使用 python 来获取 'title' 值？

在名为 domain.py 的文件中使用 REST API 的当前代码示例

```
def get_playlist(self, playlist_id):
    Addon.log('get_playlist: ' + playlist_id)
    payload = self.__get_json('getPlaylist.view', {'id': playlist_id})
    if payload:
        songs = self.listify(payload['playlist']['entry'])
        self.display_music_directory(songs) 
```

来自另一个名为 default.py 的文件中的其余引用代码

```
elif Addon.plugin_queries['mode'] == 'playlist': 
    subsonic.get_playlist(Addon.plugin_queries['playlist_id']) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T05:57:00.607

由于您的响应采用 XML 格式，因此是使用 XML 解析器的直观方式。以下是如何使用它`lxml`来解析您的响应并获取 ID 为 11452 的歌曲的标题：

```
from lxml import etree

s = """<domain-response xmlns="http://domain.org/restapi" status="ok" version="1.8.0">
<song id="11452" parent="11044" title="The Title" album="The Album"/>
</domain-response>"""

tree = etree.fromstring(s)
song = tree.xpath("//ns:song[@id=\'11452\']",namespaces={'ns':'http://domain.org/restapi'})
print song[0].get('title') 
```

值得一提的是，如果你不关心其余内容，使用正则表达式还有一种肮脏的方式来获取标题：

```
import re
print re.compile("song id=\"11452\".*?title=\"(.*?)\"").search(s).group(1) 
```

# python - mac osx上的pyside导入错误

> ID：13391444
> 
> 赞同：5
> 
> 时间：2012-11-15T04:10:16.647
> 
> 标签：python, qt, pyside

我正在尝试使用[PySide](http://qt-project.org/wiki/PySideDocumentation)，所以我做了一个`brew install pyside pyside-tools`. 但是，我收到以下错误：

```
>>> from PySide.QtGui import QApplication
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
ImportError: dlopen(/Library/Python/2.7/site-packages/PySide/QtGui.so, 2): Library not loaded: QtGui.framework/Versions/4/QtGui
  Referenced from: /Library/Python/2.7/site-packages/PySide/QtGui.so
  Reason: image not found 
```

[这个](https://stackoverflow.com/questions/6970319/installing-pyside-on-osx-10-6-8)SO question 说要安装 python 27，然后重新安装 pyside，但我在 mac osx 10.8 上使用本机 python，它已经是 2.7.2。

PySide的[Homebrew](https://github.com/mxcl/homebrew/issues/15450)配方似乎表明这应该已经修复，但我仍然收到错误。我确保也安装了 libpng。

查看路径，我知道QtGui.so文件在那里。由于我是 Python、PySide 和 Qt 的新手，因此很难使用 Google 进行进一步的故障排除。

如果有人知道原因并能提供指导，我将不胜感激。它可能涉及卸载一堆东西并重新安装。请给出详细说明。我确实卸载并尝试重新安装并得到相同的结果。

谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-23T18:49:07.153

我遇到了同样的错误，我正在使用通过 Homebrew 安装的 Python。我在 /Library/Python/2.7/site-packages/ 中找到了两个 PySide 库。将它们移开，并通过 Homebrew 重新构建/安装 PySide 是可行的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T14:01:52.957

我尝试了您提供的导入 - 我使用的是相同的系统环境。它工作得很好。尝试：brew更新并重新安装。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-08-12T03:58:43.237

运行时出现相同的错误`ipython qtconsole`，它将导入 PySide 以提供 Qt 控制台。

最后我认为PySide安装后可能有问题。所以我`pyside_postinstall.py -install`手动运行它应该在安装 PySide 后自动运行，这解决了我的问题。希望也为你工作！

# python - 在离散数据点的点处找到切向量

> ID：13391449
> 
> 赞同：0
> 
> 时间：2012-11-15T04:10:53.073
> 
> 标签：python, vector, numpy, scipy

我有一个空间中至少有两个点的向量，例如：

```
A = np.array([-1452.18133319  3285.44737438 -7075.49516676])
B = np.array([-1452.20175668  3285.29632734 -7075.49110863]) 
```

我想在曲线的离散点处找到向量的切线，gg 曲线的起点和终点。我知道如何在 Matlab 中做到这一点，但我想在 Python 中做到这一点。这是 Matlab 中的代码：

```
A = [-1452.18133319  3285.44737438 -7075.49516676];
B = [-1452.20175668  3285.29632734 -7075.49110863];
points = [A; B];
distance = [0.; 0.1667];
pp = interp1(distance, points,'pchip','pp');
[breaks,coefs,l,k,d] = unmkpp(pp);
dpp = mkpp(breaks,repmat(k-1:-1:1,d*l,1).*coefs(:,1:k-1),d);
ntangent=zeros(length(distance),3);
for j=1:length(distance)
    ntangent(j,:) = ppval(dpp, distance(j));
end

%The solution would be at beginning and end:
%ntangent =
%   -0.1225   -0.9061    0.0243
%   -0.1225   -0.9061    0.0243 
```

有任何想法吗？我尝试使用多种方法使用 numpy 和 scipy 找到解决方案，例如

```
tck, u= scipy.interpolate.splprep(data) 
```

但没有一种方法似乎满足我想要的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-16T15:32:43.780

给`der=1`splev 得到样条的导数：

```
from scipy import interpolate
import numpy as np
t=np.linspace(0,1,200)
x=np.cos(5*t)
y=np.sin(7*t)
tck, u = interpolate.splprep([x,y])

ti = np.linspace(0, 1, 200)
dxdt, dydt = interpolate.splev(ti,tck,der=1) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T05:01:36.030

好的，我找到了对上面的“pv”稍作修改的解决方案（请注意，splev 仅适用于一维向量）我最初遇到的一个问题是“tck, u= scipy.interpolate.splprep(data)”是它至少需要 4 个点才能工作（Matlab 需要两个点）。我用了两点。增加数据点后，它可以按我的意愿工作。

这是完整性的解决方案：

```
import numpy as np
import matplotlib.pyplot as plt
from scipy import interpolate
data = np.array([[-1452.18133319 , 3285.44737438, -7075.49516676],
                 [-1452.20175668 , 3285.29632734, -7075.49110863],
                 [-1452.32645025 , 3284.37412457, -7075.46633213],
                 [-1452.38226151 , 3283.96135828, -7075.45524248]])

distance=np.array([0., 0.15247556, 1.0834, 1.50007])

data = data.T
tck,u = interpolate.splprep(data, u=distance, s=0)
yderv = interpolate.splev(u,tck,der=1) 
```

并且切线是（如果使用相同的数据，则与 Matlab 结果匹配）：

```
(-0.13394599723751408, -0.99063114953803189, 0.026614957159932656)
(-0.13394598523149195, -0.99063115868512985, 0.026614950816003666)
(-0.13394595055068903, -0.99063117647357712, 0.026614941718878599)
(-0.13394595652952143, -0.9906311632471152, 0.026614954146007865) 
```

# eclipse - Solr4.0使用eclipse测试EmbeddedSolrServer

> ID：13391451
> 
> 赞同：1
> 
> 时间：2012-11-15T04:10:58.050
> 
> 标签：eclipse, solr, lucene

我无法测试 EmbeddedSOlrServer 并且遇到以下异常

> org.apache.solr.core.SolrResourceLoader.reloadLuceneSPI(SolrResourceLoader.java:179) 处的线程主 java.lang.NoClassDEfFOundError:org/apache/lucene/codecs/PostingFormat 中的异常

代码 -

> System.setProperty("solr.solr.home", "c:/apps/solr4/example/solr");
> CoreContainer.Initializer 初始化器 = new CoreContainer.Initializer();
> CoreContainer coreContainer = initializer.initialize();
> EmbeddedSolrServer server = new EmbeddedSolrServer(coreContainer, "");

我相信我在类路径中有所有 jar，并且`solr.solr.home`设置也已更新。请指教

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-11T10:50:19.663

我解决了将 lucene-core 依赖项添加到测试范围的问题：

```
 <dependency>
        <groupId>org.apache.lucene</groupId>
        <artifactId>lucene-core</artifactId>
        <version>4.3.0</version>
        <scope>test</scope>
    </dependency> 
```

# regex - 日志中行的匹配范围

> ID：13391453
> 
> 赞同：1
> 
> 时间：2012-11-15T04:11:11.487
> 
> 标签：regex, bash, sed, timestamp, logparser

我试图弄清楚如何获取一天中有数百万行的日志，并轻松地将一系列行（基于开始和结束时间戳）转储到另一个文件中。这是日志的摘录，以显示它是如何构建的：

```
00:04:59.703: <abcxyz,v1 from YYY::Process at 14 Nov 2012 07:04:59>
00:04:59.703: 20121114070459 - XXX - 7028429950500220900257201211131000000003536
00:04:59.703: </abcxyz,v1>
00:04:59.711: <abcxyz,v1 from YYY::Process at 14 Nov 2012 07:04:59>
00:04:59.711: 20121114070459 - XXX - 7028690080500220900257201211131000000003538
00:04:59.711: </abcxyz,v1>
00:04:59.723: <abcxyz,v1 from YYY::Process at 14 Nov 2012 07:04:59>
00:04:59.723: 20121114070459 - XXX - 7028395150500220900257201211131000000003540
00:04:59.723: </abcxyz,v1>
00:04:59.744: <abcxyz,v1 from YYY::Process at 14 Nov 2012 07:04:59> 
```

如您所见，每毫秒有多行。我想做的是能够提供一个开始和结束时间戳作为输入，例如 `begin=11:00:`and`end=11:45:`并让它转储该范围内的所有行。

我一直在绞尽脑汁想弄清楚这一点，但到目前为止还没有得出令人满意的结果。

**更新：**当然，我发布问题后尝试的第一件事似乎有效。这是我所拥有的：

```
sed -n '/^06:25/,/^08:25:/p' logFile > newLogFile 
```

如果有更好的方法，非常乐意接受建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T10:48:19.397

您可以使用以下 oneliner：

```
awk -v start='00:04:59.000' -v end='00:04:59.900' \
  '{if(start <= $1 && end >= $1) print $0}' < your.log > reduced.log 
```

`start`注意和范围的完整格式`end`- 这是为了保持简单并且不会造成太大问题 IMO

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T20:18:57.070

我认为您的 sed oneliner 可以胜任这项任务。

*此外*，您可以优化速度（考虑到文件有数百万行），在打印所需块时退出 sed 脚本（假设文件中没有重复的时间块）。

```
sed -n '/^06:25/,/^08:25/{p;/^08:25/q}' logFile > newLogFile 
```

这告诉 sed 在找到块的最后一行时退出。

# sql - 将递归函数转换为视图

> ID：13391457
> 
> 赞同：6
> 
> 时间：2012-11-15T04:11:29.163
> 
> 标签：sql, postgresql, recursion, tree, common-table-expression

我正在尝试将 Postgres 中的函数转换为`select`我打算用作视图的查询。原因是我想通过`select`带有`where`子句的查询从客户端访问它，而不是像函数一样使用参数。该表代表一棵树（和邻接表），定义如下：

```
CREATE TABLE tree (
  id serial primary key,
  parent_id int references tree(id)
);

INSERT INTO tree (id, parent_id) VALUES
  (1,null)
, (2,1), (3,2), (4,3), (5,3)
, (6,5), (7,6), (8,4), (9,8)
, (10,9), (11,9), (12,7)
, (13,12), (14,12), (15,11)
, (16,15), (17,16), (18,14)
, (19,13), (20,19), (21,20);

SELECT setval ('tree_id_seq', 21); -- reset sequence

-- This produces a tree like:
--                                                   +-- <10>
--                                                  /
--                         +-- <4> -- <8> --- <9> -+- <11> --- <15> --- <16> --- <17>
--                        /                                        
--  <1> --- <2> --- <3> -+                                       
--                        \                                  
--                         +-- <5> --- <6> --- <7> --- <12> -+- <14> --- <18>
--                                                            \               
--                                                             \            
--                                                              \                
--                                                               \                   
--                                                                +-- <13> --- <19> --- <20> --- <21>
-- 
```

为了按顺序获取从树中的任何节点到根的路径，我使用了这个函数：

```
create or replace function _tree(rev int)
  returns table(id int, parent_id int, depth int) as $$
declare
  sql text;
begin
  sql = 'WITH RECURSIVE tree_list(id, parent_id, depth) AS (
          SELECT id, parent_id, 1 FROM tree  WHERE id = ' || rev || 
          'UNION 
           SELECT p.id, p.parent_id, r.depth + 1
           FROM tree p, tree_list r
           WHERE p.id = r.parent_id
         )
         SELECT id, parent_id, depth FROM tree_list order by id;';
  return query execute sql;
end;
$$ language plpgsql; 
```

查询看起来像`select * from _tree(15)`. 问题是我将如何将此函数转换为视图，所以我可以调用`select * from tree where id <= 15`. 此外，视图是否会以与函数相同的速度执行（即执行查询*时*是否会考虑 where 子句）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T08:35:25.983

### 更简单的功能

首先，您可以**大大简化**您的功能。这个更简单的 SQL 函数也是如此：

```
CREATE OR REPLACE FUNCTION f_tree(_rev int)
 RETURNS TABLE(id int, parent_id int, depth int) AS
$func$
   WITH RECURSIVE tree_list AS (
      SELECT t.id, t.parent_id, 1 -- AS depth
      FROM   tree t
      WHERE  t.id = $1

      UNION ALL  -- no point using UNION
      SELECT t.id, t.parent_id, r.depth + 1
      FROM   tree_list r
      JOIN   tree t ON t.id = r.parent_id
      )
   SELECT t.id, t.parent_id, t.depth
   FROM   tree_list t
   ORDER  BY t.id;
$func$ LANGUAGE sql; 
```

称呼：

```
select * from f_tree(15); 
```

*   您*可以*使用 plpgsql，这可能对在 PostgreSQL 9.2 之前的版本中兑现查询计划*略有*帮助。但是，您无需使用动态 SQL，就取消了唯一的理论上的好处。这根本没有意义。简化为纯 SQL。

*   使用`UNION ALL`而不是`UNION`，更便宜，因为设计上不可能有欺骗性。

### 只是 SQL

显然，您可以用普通 SQL 替换它：

```
WITH RECURSIVE tree_list AS (
   SELECT t.id, t.parent_id, 1 AS depth
   FROM   tree t
   WHERE  t.id = 15  -- enter parameter here

   UNION ALL
   SELECT t.id, t.parent_id, r.depth + 1
   FROM   tree_list r
   JOIN   tree t ON t.id = r.parent_id
   )
SELECT t.id, t.parent_id, t.depth
FROM   tree_list t
ORDER  BY t.id; 
```

做同样的事情。

### 看法

现在，这`VIEW`是一件小事：

```
CREATE OR REPLACE VIEW v_tree15 AS
WITH RECURSIVE tree_list AS (
   SELECT t.id, t.parent_id, 1 AS depth
   FROM   tree t
   WHERE  t.id <= 15   -- only detail to change

   UNION ALL
   SELECT t.id, t.parent_id, r.depth + 1
   FROM   tree_list r
   JOIN   tree t ON t.id = r.parent_id
   )
SELECT t.id, t.parent_id, t.depth
FROM   tree_list t
ORDER  BY t.id; 
```

结果对我来说没有多大意义，但这个问题并没有定义任何更明智的东西..

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T15:50:00.017

你可以使用这样的东西：

```
CREATE OR REPLACE VIEW v_tree AS
SELECT tr.id as start,
       (_tree(tr.id)).id, 
       (_tree(tr.id)).parent_id, 
       (_tree(tr.id)).depth
FROM tree tr; 
```

它是从所有节点到根节点的路径视图。

然后使用类似的东西：

```
SELECT * 
FROM v_tree
WHERE start = 15; 
```

获得所需的路径。

它适用于您的示例数据，但我尚未对其性能进行测试。

更新查询只调用`_tree`一次：

```
CREATE OR REPLACE VIEW v_tree AS
SELECT t_tree.start,
       (t_tree.node).id, 
       (t_tree.node).parent_id, 
       (t_tree.node).depth
FROM (SELECT tr.id as start,
            _tree(tr.id) as node
      FROM tree tr) t_tree; 
```

# c# - 如何显示 StringLabelValue？

> ID：13391458
> 
> 赞同：2
> 
> 时间：2012-11-15T04:11:31.927
> 
> 标签：c#, .net, teechart

我正在使用`Teechart`版本`.Net & VS2005`。

`X-axis`日期和时间的图形类型，`Y-axis`已添加到点系列中。

我想展示`StringLabelValue`.

**我的代码：**

```
private void GridPoint()
{
    datatable dt_point = new datatable();

    Steema.TeeChart.Styles.Points Pinpoint = new Steema.TeeChart.Styles.Points();
    TChart1.Series.Add(Pinpoint);

    Pinpoint.Pointer.Visible = false;
    Pinpoint.Pointer.InflateMargins = false;
    Pinpoint.Pointer.Transparency = 100;
    Pinpoint.Pointer.Pen.Visible = false;
    Pinpoint.Marks.Color = Color.White;
    Pinpoint.Marks.Pen.Color = Color.White;
    Pinpoint.Marks.Shadow.Visible = false;
    Pinpoint.Marks.Visible = true;

    Steema.TeeChart.Axis axis = new Steema.TeeChart.Axis();
    TChart1.Axes.Custom.Add(axis);

    axis.StartPosition = 9;
    axis.EndPosition = 9;

    axis.Labels.Items.Add(0, " ");
    axis.Labels.Items.Add(2000, " ");
    axis.Labels.Items[0].Visible = false;
    axis.Labels.Items[1].Visible = false;

    axis.Title.Caption = "";
    axis.Title.Font.Color = Color.Black;

    TChart1.Series[0].CustomVertAxis = axis;
    TChart1.Series[0].Clear();

    if (dt_Point.Columns.Count == 0)
    {
        dt_Point.Columns.Add("SetTime", typeof(DateTime));
        dt_Point.Columns.Add("Value", typeof(int));
        dt_Point.Columns.Add("Label", typeof(string));
    }

    DataRow row;
    row = dt_Point.NewRow();
    row["SetTime"] = "2012-08-02 18:14:24";
    row["Value"] = 100;
    row["Label"] = "Point";
    dt_Point.Rows.Add(row);

    TChart1.Series[0].XValues.DataMember = "SetTime";
    TChart1.Series[0].YValues.DataMember = "Value";
    TChart1.Series[0].DataMember = "Label";
    TChart1.Series[0].DataSource = dt_Point;
} 
```

**显示图表：**

![](../Images/df203abb673b56f7a3fca10dd183ce83.png)

**我想显示图表：** ![](../Images/3a8d2adeb535971ab3b9b093541e9b5c.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T16:04:39.427

我建议您设置`XValues.DateTime`并`true`更改底部轴标签的`DateTimeFormat`and`Style`以获得您想要的结果：

```
//XValues as DateTimeValues.
Pinpoint.XValues.DateTime = true;

//Labels axes style and format 
tChart1.Axes.Bottom.Labels.DateTimeFormat = "hh:mm:ss";
tChart1.Axes.Bottom.Labels.Style = AxisLabelStyle.Value; 
```

# javascript - Javascript Array Object 属性的迭代

> ID：13391462
> 
> 赞同：0
> 
> 时间：2012-11-15T04:12:17.493
> 
> 标签：javascript, jquery, json

在阅读了许多 Stackoverflow 问题、博客和文档之后，我仍然无法弄清楚为什么这个对任何数组的特定迭代都不起作用。

我正在使用 jQuery 和 javascript（显然）来提取[GeoJSON 文件](http://www.geojson.org/geojson-spec.html)，然后检查结果对象的属性以提取所需的键/值对。当我找到那些我想插入到另一个数组对象中的对时。该对象按我的预期创建，但是当我尝试遍历新创建的对象时没有任何反应，如果我尝试找到它的长度，它返回的长度为 0。

这是我提取记录的地方：

```
_recordsFromGeoJSON: function(inputText) {
    var retRecords = {},

    $.getJSON(this.GeoJSONUrl, function(data) {
        var geoJSONdata = data;

        $.each(geoJSONdata.features, function(fkey, fvalue) {
            $.each(fvalue.properties, function(pkey, pvalue) {
                var re = new RegExp(inputText, "i");
                var retest = re.test(pvalue);
                if (retest) {
                    retRecords[pvalue] = fvalue.geometry.coordinates;
                    return;
                }
            });
        });
    }); 
    return retRecords;
}, 
```

这是对新对象进行交互的代码：

```
for(var key in this._retRecords) {
        //this function will never run
        var always = foo(bar);
    } 
```

一些示例 GeoJSON：

```
{
"type": "FeatureCollection",                                                                           
"features": [
{ "type": "Feature", "id": 0, "properties": { "NAME": "14 PARK PLACE PH 4", "AREAID":      3.0, "STR12M": 0.0, "CLS12M": 6.0, "STR4M": 0.0, "CLS4M": 0.0, "TOTAL": 164.0, "OCC": 112.0, "NFU": 0.0, "UNC": 3.0, "DVL": 49.0, "UDVL": 0.0 }, "geometry": { "type": "Point", "coordinates": [ -93.27512816536759, 37.044305883435001 ] } }
,
{ "type": "Feature", "id": 1, "properties": { "NAME": "ALPHA MEADOWS NORTH", "AREAID": 8.0, "STR12M": 0.0, "CLS12M": 0.0, "STR4M": 0.0, "CLS4M": 0.0, "TOTAL": 12.0, "OCC": 0.0, "NFU": 0.0, "UNC": 0.0, "DVL": 0.0, "UDVL": 0.0 }, "geometry": { "type": "Point", "coordinates": [ -92.839131163095786, 37.119205483765143 ] } }
]
} 
```

当我`console.log(this._retRecords);`Chrome 报告显示具有我期望从数据集中获得的所有属性的对象时：

```
Object
    14 PARK PLACE PH 4: Array[2]
        0: -93.27512816536759
        1: 37.044305883435
        length: 2
        __proto__: Array[0]
    ALPHA MEADOWS NORTH: Array[2]
        0: -92.839131163095786
        1: 37.119205483765143
        length: 2
        __proto__: Array[0] 
```

使用此[问题](https://stackoverflow.com/questions/5223/length-of-javascript-object-ie-associative-array)上给出的两种方法报告 0 长度。

我很确定我错过了一些基本的东西，但我找不到它是什么。任何帮助、批评、替代方法都会很棒！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T04:22:20.127

您似乎不明白您的`getJSON()`函数会立即启动（例如发送请求），然后在 getJSON 函数完成它的工作之前很久就立即返回。它的工作将在稍后调用完成函数时完成。因此，当函数返回`retRecords`时尚未填充。`_recordsFromGeoJSON()`

这是异步编程。getJSON 的完成函数将在稍后的某个时间调用，在`_recordsFromGeoJSON()`返回很久之后。因此，您不能将其视为同步、串行编程。

相反，`retRecords`仅在完成函数或您将数据传递到该完成函数并从该完成函数调用的任何函数中知道。这就是异步编程在 javascript 中的工作方式。您必须启动`getJSON()`对完成函数结果的所有进一步处理。而且，您无法返回结果，`_recordsFromGeoJSON()`因为该函数何时返回结果未知。这是一种不同的编码方式，有点痛苦，但它是您必须在 javascript 中处理异步操作的方式。

# jquery - 弹出新对话框而不重定向到另一个页面，如 IMDb 登录

> ID：13391463
> 
> 赞同：0
> 
> 时间：2012-11-15T04:12:18.600
> 
> 标签：jquery, html, css

我编写了一个 Web 应用程序，它从数据库中提取数据并以表格的形式显示。现在，当人们想要编辑这些值时，他们会被重定向到不同的页面。我收到了 CR，用于在单个页面中实现所有内容，而无需将用户重定向到任何其他页面。

我的问题是，如果我想在新窗口中为他们提供编辑选项（例如，当我们单击 IMDb 的登录链接时，在同一窗口中会弹出一个新对话框，模糊背景），我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T08:58:42.323

您可以将 jquery impromptu ( [http://trentrichardson.com/Impromptu/](http://trentrichardson.com/Impromptu/) ) 用于简单的模态框，它可以设置样式并用于各种事物，例如带有可编辑框的表格，用于要编辑的行。

否则，您也可以使用 jquery 可编辑（演示： http: [//www.appelsiini.net/projects/jeditable/default.html](http://www.appelsiini.net/projects/jeditable/default.html)）

# scala - 在 Scala 中类型匹配未参数化的 Java 列表

> ID：13391466
> 
> 赞同：0
> 
> 时间：2012-11-15T04:12:31.757
> 
> 标签：scala, generics

我试图在 Scala 的测试中设置一个模拟期望。模拟在 Hibernate Query 对象上。它有以下方法：

```
List list() throws HibernateException; 
```

列表未参数化。

当我尝试模拟这个时，我无法正确输入类型。例如

```
when(query.list).thenReturn(new ArrayList)
when(query.list).thenReturn(new ArrayList[Any])
// and other variations 
```

报告：

```
overloaded method value thenReturn with alternatives: 
(java.util.List[?0],<repeated...>[java.util.List[?0]])org.mockito.stubbing.OngoingStubbing[java.util.List[?0]] <and> 
(java.util.List[?0])org.mockito.stubbing.OngoingStubbing[java.util.List[?0]] 
cannot be applied to (java.util.ArrayList[java.lang.Object]) 
```

我的 Scala 模拟期望应该是什么样的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T03:28:55.533

您可以使用`asInstanceOf`演员表并编写：

```
when(query.list.asInstanceOf[ArrayList[Any]]).thenReturn(new ArrayList[Any]) 
```

# php - 在 index.php 中设置主页保留

> ID：13391470
> 
> 赞同：0
> 
> 时间：2012-11-15T04:12:47.373
> 
> 标签：php

我在index.php中有一个PHP函数登录，现在我要做的是登录成功后我希望页面保持重定向到index.php，因为我已经在index.php中设置了主页。

这就像一个推特和脸书。

```
$login=mysql_query("SELECT username, email, password FROM t_users WHERE (username='$username' OR email='$username') AND password='$password'");
        $found=mysql_num_rows($login);
        $r=mysql_fetch_array($login);

        if ($found > 0)
        {
            session_register("username");
            session_register("password");

            $_SESSION[username]     = $r[username];
            $_SESSION[password]     = $r[password];

            date_default_timezone_set("Asia/Jakarta");
            $date_log = date("j-F-Y, G:i ");

            mysql_query("update t_users set date_logged_in='$date_log' WHERE username='$_SESSION[username]'");
            header('location:index.php');
        }
        else
        {
            echo "<div class='error_log'><p class='error'>Invalid username/email and password.</p></div>";
        } 
```

任何想法 ？感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T04:23:48.960

您可以在登录过程后使用 header("location:../index.php"); 重定向。

请记住，您必须使用正确的路径，在此示例中，我假设您有一个具有此登录过程的文件夹，并且您的索引位于另一个子文件夹中，如果您的文件位于同一目录/文件夹中，则不需要.. / 只需将 index.php 放在位置之后：

# ruby-on-rails - 有没有办法在没有迁移的情况下修改新的 Rails 模型？

> ID：13391474
> 
> 赞同：0
> 
> 时间：2012-11-15T04:13:12.853
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord, scaffolding

所以我正在制作一个 Rails 应用程序来学习如何使用该框架。

我使用以下方法创建了一个用户：

```
rails g model User name:string 
```

然后我意识到我的用户还需要另一个属性以及与另一个名为 user_role 的资源的关系。假设我的 UserRole 模型类似于：

```
rails g model userRole roleName:string 
```

到目前为止，我发现我只能使用迁移来实现更改，但这对我来说相当不方便且不清楚，因为我没有任何旧数据，我只是在调整我的模型。

对菜鸟有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T04:23:29.430

迁移非常有帮助。它跟踪您的架构更改。但是，如果您发现在创建迁移后立即忘记添加字段，您可以编辑旧迁移而不创建新迁移。如果您已经迁移了数据库（使用`rake db:migrate`），您可以回滚。

```
rake db:rollback 
```

现在，编辑迁移文件并添加/删除您的字段。完成后，再次迁移

```
rake db:migrate 
```

当你创建一个单独的模型时，你应该创建一个单独的迁移。否则，日后你自己也会糊涂。顺便说一句，在创建子模型时，您不需要对父迁移进行任何更改。您需要在子表中添加外键。你可以使用这样的东西：

```
rails g model Comment post:references 
```

这将添加`post_id`到评论表中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T04:47:54.413

您可以尝试使用非数据库支持的类似 ActiveModel 的模型。例如，Mongoid 或 Datamapper。许多 NoSQL 解决方案不需要迁移来更改模型。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-10T06:30:25.933

尝试这个：

```
rails g model ModelName --migration=false 
```

# c# - 从父控件接收 MouseMove 事件

> ID：13391477
> 
> 赞同：2
> 
> 时间：2012-11-15T04:13:33.207
> 
> 标签：c#, winforms, mousemove

我有一个 WinForm 应用程序，它有一个面板和面板内的两个按钮。我在面板上添加了一个 mousemove 事件，当我在面板内移动鼠标时调用 mousemove 函数，就像预期的那样。

问题是，如果我在一个按钮上按下鼠标按钮，按钮就会按下，如果我在按住按钮的同时将鼠标移动到面板中，则在释放鼠标按钮之前永远不会调用 Panel mousemove 函数。

有解决办法吗？如果我不清楚，我可以尝试更清楚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T04:56:40.143

因此，当按下按钮并且鼠标移回底层面板时，似乎不会触发面板的 MouseMove 事件。

此时您可以通过钩入按钮的 MouseMove 来捕获指针位置。但是，指针的位置将相对于按钮，而不是面板，因此您需要将这些坐标添加到按钮的位置坐标：

```
Point mousePoint;

private void panel1_MouseMove(object sender, MouseEventArgs e)
{
    mousePoint = e.Location;
}

private void button1_MouseMove(object sender, MouseEventArgs e)
{
    mousePoint = new Point(button1.Location.X + e.Location.X, button1.Location.Y + e.Location.Y);
} 
```

# sql - 如何优化多个内连接

> ID：13391478
> 
> 赞同：1
> 
> 时间：2012-11-15T04:13:38.927
> 
> 标签：sql, sql-server, sql-server-2008, tsql, inner-join

我有 2 个表（SQL Server 2008）：文档和字段。

**文件：**

```
Id  (PK)
Some-Others-Columns 
```

**领域：**

```
Id  (PK) 
DocumentId  (FK to Documents) 
Name
Value 
```

每个文档都分配了 80 多个字段。我必须选择一个表，其中每一行都是一个文档 + 一些特定字段（不是 80+，只有一些字段）。

我的 T-SQL 代码对大表运行速度极慢，我该如何优化它？

```
SELECT f1.Value AS 'f1', f2.Value AS 'f2', f3.Value AS 'f3', f4.Value AS 'f4', f5.Value AS 'f5', f6.Value AS 'f6', d.PartyId, d.CreationDate
FROM dbo.Fields AS f WITH (NOLOCK) 
  INNER JOIN dbo.Fields AS f1 ON f.Id = f1.Id 
  INNER JOIN dbo.Documents AS d ON f1.DocumentId = d.Id 
  INNER JOIN dbo.Fields AS f2 ON d.Id = f2.DocumentId
  INNER JOIN dbo.Fields AS f3 ON d.Id = f3.DocumentId
  INNER JOIN dbo.Fields AS f4 ON d.Id = f4.DocumentId
  INNER JOIN dbo.Fields AS f5 ON d.Id = f5.DocumentId
  INNER JOIN dbo.Fields AS f6 ON d.Id = f6.DocumentId

WHERE
    (f1.Name = 'Some-Name-1')
AND (f2.Name = 'Some-Name-2')
AND (f3.Name = 'Some-Name-3')
AND (f4.Name = 'Some-Name-4')
AND (f5.Name = 'Some-Name-5')
AND (f6.Name = 'Some-Name-6') 
```

请帮我优化这个查询

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T04:29:16.547

不确定枢轴是否会表现得更好，然后您需要将其与文档结合起来以获取其他文档字段。我的语法可能有点偏离（如果您希望我修复它，您可以设置一个带有两个表和插入示例行的 SQL Fiddle：http: [//sqlfiddle.com/](http://sqlfiddle.com/)）

```
SELECT DocumentId, 
[Some-Name-1], [Some-Name-2], [Some-Name-3], [Some-Name-4], [Some-Name-5],[Some-Name-6]
FROM (
  Select f.DocumentId, f.Name, f.Value
  FROM dbo.Fields AS f 
  INNER JOIN dbo.Documents AS d ON f.DocumentId = d.Id ) as SourceTable
PIVOT
(
  SUM(Value)
  FOR Name IN ([Some-Name-1], [Some-Name-2], [Some-Name-3], [Some-Name-4], [Some-Name-5],[Some-Name-6])
) AS PivotTable; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T04:16:56.077

您可以使用 ctrl+l 查看执行计划以及执行时间最长的内容。您很可能需要字段表的 ID 和名称以及文档表上的 ID 索引

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-15T04:57:58.373

高性能成本来自于拥有如此多的连接。为什么不获取所需文档的“字段”记录集？可能我没看对...

```
SELECT value 
FROM Documents AS d 
INNER JOIN Fields as f ON d.Id=f.DocumentId 
WHERE (f.Name="Name1" or f.Name="Name2" or.. etc); 
```

在那里，您应该有文档字段中所有“值”列的记录集

如果您需要形成列的值，则应在第一次查询后执行

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-15T14:41:32.450

尝试这个：

```
SELECT f1.Value AS 'f1', f2.Value AS 'f2', f3.Value AS 'f3', f4.Value AS 'f4', f5.Value AS 'f5', f6.Value AS 'f6', d.PartyId, d.CreationDate
FROM dbo.Fields AS f WITH (NOLOCK) 
INNER JOIN (SELECT Id, DocumentId, Value FROM dbo.Fields WHERE Name='Some-Name-1') AS f1 
    ON f.Id = f1.Id 
INNER JOIN (SELECT Id, CreationDate, PartyId  FROM dbo.Documents) AS d
    ON f1.DocumentId = d.Id 
INNER JOIN (SELECT Id, DocumentId, Value FROM dbo.Fields WHERE Name='Some-Name-2') AS f2
    ON d.Id = f2.DocumentId
INNER JOIN (SELECT Id, DocumentId, Value FROM dbo.Fields WHERE Name='Some-Name-3') AS f3
    ON d.Id = f3.DocumentId
INNER JOIN (SELECT Id, DocumentId, Value FROM dbo.Fields WHERE Name='Some-Name-4') AS f4
    ON d.Id = f4.DocumentId
INNER JOIN (SELECT Id, DocumentId, Value FROM dbo.Fields WHERE Name='Some-Name-5') AS f5
    ON d.Id = f5.DocumentId
INNER JOIN (SELECT Id, DocumentId, Value FROM dbo.Fields WHERE Name='Some-Name-6') AS f6
    ON d.Id = f6.DocumentId 
```

# c++ - #define 宏中的嵌入 if 语句

> ID：13391487
> 
> 赞同：0
> 
> 时间：2012-11-15T04:15:09.897
> 
> 标签：c++, c-preprocessor

我正在阅读一篇文章，其中 #define 宏是这样制作的：

```
#define TEST(level) if (level > 2) ; else std::cout 
```

然后可以在这样的代码中使用它：

```
Test(1) << 3;
Test(3) << 4; 
```

我的印象是，如果你写

```
TEST(1) 
```

它将替换为：

```
std::cout 
```

和

```
TEST(3) 
```

将被替换为空字符串（在代码文件中）。但是，如果它以这种方式工作，那么它应该抛出一个错误，因为

```
<< 3; 
```

是无效的。

这个宏实际上是如何工作的？以及预处理器如何变化

```
TEST(3) << 3; 
```

使其不输出任何东西（即代码不运行）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-15T04:18:41.027

我相信你错了：

对于`TEST(3) << 3`，替换后的形式为：

```
if (3 > 2) ; else std::cout << 3 
```

它仍然是一个有效的表达式

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T04:19:20.210

它正在替换`TEST(x)`为;

```
 if (x > 2)
    // do nothing
 else
    std::cout << x 
```

预处理器替换所有文本，这意味着你得到了整个 if-else

这也可以写成

```
#define TEST(x) if (!x > 2) std::cout 
```

# plsql - 比较 PL/SQL 中的列

> ID：13391488
> 
> 赞同：0
> 
> 时间：2012-11-15T04:15:30.647
> 
> 标签：plsql, oracle11g

我有 2 个表，Driver 和 Mechanic，并且在这两个表中它们都有相同的列 Employee#

如何使用 PL/SQL 检查两个表，以便通过比较员工#，Driver 表中的员工不能出现在 Mechanic 表中。如果发生这种情况，它会显示一条消息“员工#不能既是司机又是机械师！”

我知道我可以简单地使用以下方法比较两个表：

```
SELECT Employee#
FROM Driver
INTERSECT
SELECT Employee#
FROM Mechanic 
```

但它要求我使用 PL/SQL。

我试过使用游标，但我似乎无法让它贯穿整个专栏。这是我的代码：

```
declare
cursor c1 is select employee# from driver;
cursor c2 is select employee# from mechanic;
driverenum number(30);
mechanicenum number(30);
begin
open c1;
fetch c1 into driverenum;
close c1;
open c2;
fetch c2 into mechanicenum;
close c2;
if driverenum in (mechanicenum) then
dbms_output.put_line(driverenum);
end if;
end;
/ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T04:24:14.173

如果唯一的要求是您使用 PL/SQL

```
DECLARE
  TYPE emp_nt IS TABLE OF driver.employee#%type;

  l_drivers   emp_nt;
  l_mechanics emp_nt;
  l_both      emp_nt;
BEGIN
  SELECT employee#
    BULK COLLECT INTO l_drivers
    FROM driver;

  SELECT employee#
    BULK COLLECT INTO l_mechanics
    FROM mechanic;

  l_both := l_drivers MULTISET INTERSECT l_mechanics;

  FOR i IN 1 .. l_both.count
  LOOP
    dbms_output.put_line( 'Employee ' || l_both(i) || 
                            ' is employed as both a driver and a mechanic' );
  END LOOP;
END; 
```

如果任一表中有大量行，这种方法可能会在 PGA 中占用相当多的空间。但通常它几乎与 SQL 解决方案一样有效。

# c++ - 在 C++ 中使用 libtiff 写入图像时出现问题，TIFFScanlineSize 中的整数溢出

> ID：13391498
> 
> 赞同：2
> 
> 时间：2012-11-15T04:17:06.933
> 
> 标签：c++, templates, libtiff

我正在使用 libtiff 编写一个加载和编写 tiff 图像的图像类。但是，使用它们非常困难，我不断收到错误，我的代码是：

```
 TIFF *out = TIFFOpen(filename.c_str(),"w") ;
    if (out)
    {
        uint32 imagelength, imagewidth;
        uint8 * buf;
        uint32 row, col, n;
        uint16 config, nsamples;
        imagewidth = dims[0] ;
        imagelength = dims[1] ;
        config = PLANARCONFIG_CONTIG ;
        nsamples = cn ;

        TIFFSetField(out, TIFFTAG_IMAGELENGTH, &imagelength);
        TIFFSetField(out, TIFFTAG_IMAGEWIDTH, &imagewidth);
        TIFFSetField(out, TIFFTAG_PLANARCONFIG, PLANARCONFIG_CONTIG);
        TIFFSetField(out, TIFFTAG_SAMPLESPERPIXEL, &nsamples);
        TIFFSetField(out, TIFFTAG_COMPRESSION, COMPRESSION_LZW) ;
        TIFFSetField(out, TIFFTAG_BITSPERSAMPLE, 8) ;
        TIFFSetField(out, TIFFTAG_ROWSPERSTRIP, TIFFDefaultStripSize(out, imagewidth*nsamples));

        std::cout <<nsamples << std::endl ;

        buf = new uint8 [imagewidth*nsamples] ;

        for (row = 0; row < imagelength; row++){

               for(col=0; col < imagewidth; col++){

                   for(n = 0 ; n < nsamples ; ++n)
                   {
                       Vec<T,cn>* temp = image_data[imagewidth*row+col] ;
                       buf[col*nsamples+n] = static_cast<uint8> ((*temp)[n]) ;
                   }
               }
               if (TIFFWriteScanline(out, buf, row) != 1 ) 
               {
                   std::cout << "Unable to write a row." <<std::endl ;
                   break ;
               }  
        }

        _TIFFfree(buf);
        TIFFClose(out);
    } ... 
```

错误信息是：

```
test_write.tiff: Integer overflow in TIFFScanlineSize.
test_write.tiff: Integer overflow in TIFFScanlineSize. 
```

我的调用代码是这样的：

```
Image<unsigned char,3> testimg ; //uint8 is unsigned char
testimg.read_image("test.tiff") ;
testimg.write_image("test_write.tiff") ; 
```

我可以编写 test_write.tiff，但我无法用任何图像浏览器打开它，并且文件大小与以前不同。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-15T04:29:56.873

我想我刚刚解决了自己的问题，因为我在 stackoverflow 上找不到类似的问题，也许这会对其他人有所帮助。

原因是 TIFFSetField 接受值而不是原始变量的引用。

因此，更改后一切正常，如下所示：

```
TIFFSetField(out, TIFFTAG_IMAGELENGTH, imagelength);
TIFFSetField(out, TIFFTAG_IMAGEWIDTH, imagewidth);
TIFFSetField(out, TIFFTAG_SAMPLESPERPIXEL, nsamples); 
```

我从使用 imagej 打开写入的文件中得到了提示，它表明该文件每个像素的样本错误。

# php - 在Mysql中比较一行以查看其他表中不存在哪些值的最快方法

> ID：13391500
> 
> 赞同：1
> 
> 时间：2012-11-15T04:17:38.587
> 
> 标签：php, mysql, sql, database

我有两张表，一张是 300 万行，另一张是 200,000 行，我想检查较小的一个特定行中的所有值是否存在于较大的一个中，如果不存在，那么我想标记它们以便我可以识别它们和对它们做一些工作。

到目前为止尝试过，

1) `SELECT EXISTS(SELECT 1 FROM table_bigger WHERE some_condition in table_smaller)`;

2)`$something = SELECT somthing FROM 'table_smaller'`

然后在 PHP`$something`中使用 " 检查是否存在于更大的表中`select count(*) from bigger_table where something="$something";`

这两种方法至少需要 1 天才能完成，我需要像这样比较表格，这让我等待得到结果并重新开始工作，我想知道这样比较的最佳方法和最快方法是什么。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T04:37:46.940

您可以做的是直接比较表，但这样做会导致对两个表进行全表扫描。确保您在要比较的特定列上有索引，以最大限度地减少扫描表所花费的时间。

下面的查询将包含不存在的行。（也许在 Redis 中缓存？）在 PHP 中进行必要的处理，然后根据结果构造一个满足您需求的查询/过程。

**从 table_large 中检索不具有与 table_small 匹配的值的行**

```
SELECT field_large FROM table_large WHERE field_large NOT IN (SELECT field_small FROM table_small) 
```

结果值为 2 和 3。

**上述示例的示例表结构**

```
CREATE TABLE IF NOT EXISTS `table_large` (
    `field_large` int(1) unsigned NOT NULL AUTO_INCREMENT,
    PRIMARY KEY (`field_large`)
) ENGINE=MyISAM  DEFAULT CHARSET=utf8 AUTO_INCREMENT=4 ;

CREATE TABLE IF NOT EXISTS `table_small` (
    `field_small` int(1) unsigned NOT NULL AUTO_INCREMENT,
    PRIMARY KEY (`field_small`)
) ENGINE=MyISAM  DEFAULT CHARSET=utf8 AUTO_INCREMENT=2 ;

INSERT INTO `table_large` (`field_large`) VALUES (1), (2), (3);
INSERT INTO `table_small` (`field_small`) VALUES (1); 
```

# php - 两个表的下拉列表，php mysql

> ID：13391510
> 
> 赞同：0
> 
> 时间：2012-11-15T04:18:57.327
> 
> 标签：php, mysql, drop-down-menu

假设我有以下两个表格：

国家表：

```
---------------------------------
|ID|country_code|country_name   |
|01|CA          |Canada         |
|02|US          |United States  |
--------------------------------- 
```

用户表：

```
----------------------------------------------
|id|user_id|country_code|email_address       |
|01|oswalsh|CA          |blah@hotmail.com    |
|02|jlong  |US          |blah2@hotmail.com   |
---------------------------------------------- 
```

我正在创建我的用户注册/编辑帐户表单，并有一个国家/地区下拉菜单。最初我只是将 country_name 存储在 user_table 中，而不是使用 country_code，但是我还决定实现一个地图脚本……这是一大堆使用 country_code 的 javascript 文件。

因此，我创建了 country_table，以便可以匹配 country_code 和 country_name，以便映射用户交互...但是我不确定如何为下拉菜单创建 sql 语句。

到目前为止我所拥有的：

```
<?php
    include ('../../connect.php');

    $account_panel = mysql_query("SELECT * FROM user_table WHERE id=1")
            or die(mysql_error());

            while($row1 = mysql_fetch_array( $account_panel )) 
    {
?>
<select name="event_country" id="event_country"  required />
        <option selected="selected" value="<?php echo $row1['user_country']; ?>"><?php echo $row1['user_country']; ?></option>

        <?php           
            $countries = mysql_query("SELECT * FROM country_table")
            or die(mysql_error());

            while($row = mysql_fetch_array( $countries )) 
            {
                echo "<option value='". $row['value'] ."'>". $row['name'] ."</option>";
            }   
                echo "</select>";
        ?>

        <?php
        }
        mysql_close($connection);
        ?> 
```

因此，您应该能够从上面看到正在发生的事情，该列表是从 country_table 填充的，但我正在尝试从 user 表中获取选定的值。这似乎确实有效，但我的问题是国家代码是存储和显示的内容。所以说我正在获取 oswalsh 的信息……我……返回的国家是 CA，我希望它显示加拿大。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T11:34:30.300

如果我理解正确，您需要熟悉[SQL 连接](http://www.w3schools.com/sql/sql_join.asp)

要连接这两个表并从 中获取`country_name`用户数据`user_table`，您需要这样的 SQL 语句：

```
SELECT ut.*, ct.country_name
FROM user_table ut
INNER JOIN country_table ct
ON ut.country_code = ct.country_code 
```

在您的情况下，这将导致以下结果：

```
1   oswalsh CA  blah@hotmail.com    Canada
2   jlong   US  blah2@hotmail.com   United States 
```

此外，您应该考虑使用`mysqli_`和停止使用`mysql_`函数。这是关于 SA 的有关此主题的[讨论。](https://stackoverflow.com/questions/548986/mysql-vs-mysqli-in-php)

# .net - 使用 7z 和 vb2010 将文件提取到 %temp%

> ID：13391512
> 
> 赞同：0
> 
> 时间：2012-11-15T04:19:04.510
> 
> 标签：.net, vb.net, visual-studio-2010, 7zip

这是我尝试过的修订之一。我不太明白 7zipsharp 的事情。

```
 Dim Arg1 As String = "x"
    Dim Zip As String = "apps\dat\sb.7z"
    Dim path As String = "-o%TEMP%\Updates\sb"
    Process.Start(
"apps\dat\7z.exe",
Arg1 + path + Zip) 
```

我还希望它等到提取完成后再执行代码。

这是当前使用的脚本。

```
@setlocal enableextensions
@pushd "%~dp0"   ::This is so the script doesn't default to %windir%
@start "" /wait 7z.exe X -o%temp%\dat\sb -y sb.7z
::@pause
@start "" /wait /D"%temp%\dat\sb" "setup.exe" %~dp0
@rd /s/q %temp%\dat 
```

目前我正在使用 button_click 来访问这个脚本，但我想摆脱这个脚本。最好将其提取到临时目录。

****** *** ** *** ** ***更新****** ****** *** ********* ***** ******** ***** ************这*** 是我使用的有效的结束代码**。*******

 ****```
 Dim temp As String = System.Environment.GetEnvironmentVariable("TEMP")
    Dim Arg1 As String = "x -o"
    Dim Zip As String = "apps\dat\sb.7z -y"
    Dim path As String = temp + "\Updates\sb"
    Process.Start("apps\dat\7z.exe", Arg1 + path + " " + Zip) 
```

我将 -o 移至 Arg1 并删除了空间，以便将 -o%temp%\Updates\SB 读取到系统。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T10:39:11.717

重写你的代码：

```
Dim Arg1 As String = "x"
Dim Zip As String = "apps\dat\sb.7z"
Dim path As String = "-o%TEMP%\Updates\sb"
Process.Start("apps\dat\7z.exe",Arg1 + " " + path + " " + Zip)
p.WaitForExit(); 
```

*   您忘记在参数之间包含空格
*   您可以调用 WaitForExit() 函数来等待进程完成
*   解压后可以像7zip一样启动setup.exe****

# svn - Netbeans 中的“无法确定所选上下文的 repositoryRootUrl”错误

> ID：13391513
> 
> 赞同：1
> 
> 时间：2012-11-15T04:19:05.183
> 
> 标签：svn, netbeans

在 Netbeans 7.2 for Mac 中，当我单击 Subversion 面板中的“刷新状态”图标时，出现以下错误：

> 无法确定所选上下文的 repositoryRootUrl：

然后错误消息列出了我的用户目录中的路径。有趣的是，路径是指向与开放项目无关的网站。

自从我第一次设置这台 Mac 以来，我就遇到了这个问题。我以前使用 Windows 机器来开发我的 PHP 网站。我想知道错误是否开始是因为我将所有项目目录复制到我的 Mac 上并以某种方式损坏了我的 Subversion 设置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-03T13:58:28.323

尝试在 Projects 视图中选择项目，然后从上下文菜单中调用 Subversion -> Show changes。

那应该清除错误。

# jquery - jQuery - :not :else?

> ID：13391516
> 
> 赞同：0
> 
> 时间：2012-11-15T04:19:15.730
> 
> 标签：jquery, click, show

为糟糕的标题道歉，但我想不出一个简单的方法来描述这个问题。我正在使用以下简单的 jQuery：-

```
$("a:not(.havechild)").click(function () {
    $('#nowloading').show();
}); 
```

每当单击页面上的任何链接时，它都会显示“正在加载”微调器，除非单击的链接使用“havechild”类，它会打开另一个级别的手风琴菜单。

我的问题是手风琴菜单的子级别也使用“havechild”类但不触发手风琴（故意），但这也意味着加载微调器在我想要的时候没有显示。

我确信这是可能的，但不知道如何去做。基本上我需要这样的东西： -

```
$("a:not(.havechild):else(.havechild .havechild)").click(function () {
    $('#nowloading').show();
}); 
```

这可能吗？:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T04:24:38.260

与其尝试编写 else 条件，不如使用“and”（选择器中的逗号）：

```
$("a:not(.havechild), a.havechild a.havechild").click(function () {
    $('#nowloading').show();
}); 
```

这将同时选择：

*   所有没有类的锚元素`havechild`
*   所有具有该类`havechild`并且具有该类的祖先锚元素的所有锚元素`havechild`

# version-control - 如何向 Bazaar 提供我的密码，以便它可以从我的远程服务器获取我的代码？

> ID：13391522
> 
> 赞同：0
> 
> 时间：2012-11-15T04:20:17.670
> 
> 标签：version-control, bazaar

我在远程 Linux 服务器上有一个代码库（在我的私人主目录中）。我正在旅行，我的互联网连接不稳定，所以我想在本地下载代码，处理它，然后将更改推送到服务器。由于我已经在使用 Bazaar 管理代码库，因此这似乎也是用于此任务的逻辑工具。我下载了 Bazaar for Windows，并尝试创建一个分支，但无法确定在“发件人”字段中输入的位置。我的第一个猜测是按照我的方式来做`scp`，我输入：

```
username@host.com/subfolder-with-code 
```

但这没有用。另外，我在哪里输入我的密码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T23:14:00.217

我认为您只需要将协议添加到您的网址：

```
bzr branch bzr+ssh://username@host.com/subfolder-with-code 
```

应该做的伎俩。

有关`bzr help urlspec`更多信息，请参阅。

# ruby-on-rails - 在 Rails 中将分片表组合成单个 ActiveRecord 模型

> ID：13391525
> 
> 赞同：2
> 
> 时间：2012-11-15T04:21:07.173
> 
> 标签：ruby-on-rails, activerecord

我是 Ruby on Rails 的新手（这可能很快就会很明显），我正在尝试为以下数据场景找出一个模型。我已经阅读了几篇文章并详细搜索了谷歌，但我仍然感到困惑。

我有 5 个具有相同列的不同表，但`value`列具有**不同的数据类型**。出于各种充分的原因，他们的数据位于 5 个单独的表中，但可以将其视为跨多个表分片的数据。

```
logbook_strings (user_id, entry_id, field_id, value) 
logbook_booleans (user_id, entry_id, field_id, value)  
logbook_integers (user_id, entry_id, field_id, value)  
logbook_decimals (user_id, entry_id, field_id, value)  
logbook_datetimes (user_id, entry_id, field_id, value) 
```

所以这就是数据的样子：

```
------------------------------------------------
| user_id | entry_id | field_id | value        |
------------------------------------------------
| 1       | alpha1   | date     | 2012-11-14   |
| 1       | alpha1   | duration | 1.2          |
| 1       | alpha1   | remarks  | Nice job.    |
------------------------------------------------
| 1       | alpha2   | date     | 2012-11-13   |
| 1       | alpha2   | duration | 2.7          |
| 1       | alpha2   | remarks  | Bad job.     |
------------------------------------------------ 
```

**条目 alpha1：**
2012 年 11 月 14 日，1.2，干得好。

**条目 alpha2：**
2012 年 11 月 13 日，2.7，糟糕的工作。

等等

我这样做的原因是我可以拥有一个无限灵活的数据库。我可以`field_id`随时添加一个新字段/功能来为我的应用程序添加一个新字段/功能，而不是进行架构更新以将另一列添加到宽日志表中。

所以我想知道，有没有一种方法可以让我拥有一个可以引用所有 5 个表的 ActiveRecord 模型？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T06:02:29.997

在花了几分钟试图将它硬塞进一个 ActiveRecord 类之后，我认为将 ActiveRecord 用于这样的事情并不是一个好主意。我看到几个选项：

*   滚动你自己的模型。这种方法的极端缺点是您失去了所有 ActiveRecord 的许多不错的功能。但是，如果您的数据相对简单（不是很多关联等），那么这可能是一个可行的选择。
*   重构您的数据。如果此架构/数据是预先存在的，或者出于某种原因必须与移动应用程序的架构匹配，那么这可能不是一个选项。但是，如果您刚开始，Rails 的迁移可以让您随心所欲地添加/删除列非常容易且非常安全，因此我可能会考虑使用更传统的方法。虽然这可能看起来并不理想，但为了获得 ActiveRecord 的许多好处，这是需要认真考虑的事情。

如果您必须保留您的架构，那么为每个日志表创建一个单独的模型可能是您的最佳选择。

```
# Migrations
create_table :logbook do |t|
  # Default fields, nothing special
end

create_table :logbook_integers do |t|
  t.integer :logbook_id  # You'd probably want to index this as well
  t.string :name
  t.integer :value
end

create_table :logbook_strings do |t|
  t.integer :logbook_id   # You'd probably want to index this as well
  t.string :name
  t.string :value
end

# etc...

# Models
class Logbook < ActiveRecord::Base
  has_many :logbook_integers
  has_many :logbook_strings
  # etc...

  def remarks
    self.logbook_strings.find_by_name("remarks").value
  end

  def remarks= newValue
    remark = self.logbook_strings.find_or_create_by_name("remarks")
    remark.value = newValue
    remark.save
  end

  # etc...
end

class LogbookInteger < ActiveRecord::Base
  belongs_to :logbook
end

class LogbookString < ActiveRecord::Base
  belongs_to :logbook
end

# etc...

# Usage

logbook = Logbook.new
logbook.remarks = "Hi"
logbook.duration = 2

logbook.remarks         # => Hi
logbook.duration        # => 2 
```

如果您可以稍微更改您的架构，这里有一个选项：

您可以使用[此处描述](http://api.rubyonrails.org/classes/ActiveRecord/Base.html)`serialize`的类方法（cmd+f for 'serialize'）来存储您的条目，这样您就不必拥有许多模型，而只有两个：和. 它可能看起来像这样：`Logbook``LogbookField`

```
# Migration for logbook_fields
create_table :logbook_fields do |t|
  t.string :name
  t.string :value
end

# Models
class Logbook
  has_many :logbook_fields

  def self.build_with_default_fields
    self.logbook_fields.create name: "date"
    self.logbook_fields.create name: "duration"
    # etc...
  end

  # You could probably do some cool Ruby metaprogramming to create all these
  # accessors/setters for you, btw.
  def date
    self.logbook_fields.find_by_name "date"
  end

  def date= newValue
    field = self.logbook_fields.find_by_name "date"
    field.value = newValue
    field.save
  end

  def duration
    self.logbook_fields.find_by_name "duration"
  end

  def duration= newValue
    field = self.logbook_fields.find_by_name "duration"
    field.value = newValue
    field.save
  end

  # etc...

end

class LogbookField
  serialize :value

  belongs_to :logbook
end

# Usage

logbook = Logbook.build_with_default_fields
logbook.date = DateTime.now
logbook.duration = 2.7 
```

有这样的效果。这样，您就可以保留大部分 ActiveRecord 的细节，同时仍然保持架构设计的一些“无限性”。但是，使用迁移在单个表上添加/删除列可能会比这更容易。同样，这取决于您是否可以灵活地使用架构。希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T09:32:31.337

我认为您可能应该有一个带有类型列的表。

前任：

```
logbook(user_id, entry_id, field_id, value, value_type) 
```

值类型将是

```
strings

booleans  

integers 

decimals 

datetimes 
```

例子是

```
-----------------------------------------------------------
| user_id | entry_id | field_id | value        |value_type |
-----------------------------------------------------------
| 1       | alpha1   | date     | 2012-11-14   | datetime 
| 1       | alpha1   | duration | 1.2          | decimal
| 1       | alpha1   | remarks  | Nice job.    | string 
```

所以基本上值列将是字符串，并且从模型中你可以决定你想要的值类型，你的模型将是

```
class Logbook < ActiveRecord::Base

   #sample method
   #just to give an idea how you could use the same value
   #with different times
   def multiple_duration_by_two
     self.value * 2  if self.value_type == "decimal"
   end

end 
```

但是，根据您的要求，此实现可能需要 tweeks，但我想您明白了

高温高压

# vba - VBA getElementById 不起作用

> ID：13391526
> 
> 赞同：1
> 
> 时间：2012-11-15T04:21:09.023
> 
> 标签：vba

我以前多次使用过这个语句，但最近我遇到了几个页面，我试图将值分配给不存在的字段。

我试图评估价值的领域是：

```
<div id="userName" class="logon_input"> 
```

用户名：

我尝试使用诸如

```
 Document.getElementById("username").Value = "cde" 
```

我可以成功编辑一些页面，但我在特定的几个网站上遇到了问题

这可能与以下任何一项有关：

```
IFRAME 
align="center" width="80%" SRC="jsp/listing/blank.jsp"
onload='resizeFrameToContent("infoView_home")' FRAMEBORDER="0"
name="infoView_home" id="infoView_home" title="Log On</IFRAME> 
```

```
ml>
<head>

<body onload="logonPageLoad()">

<div class="logonContainer">
<div class="logonBanner">
<div class="logonSection">
<div class="logonIFrame">
<iframe id="infoView_home" width="80%" frameborder="0" align="middle" title="Log On"     name="infoView_home" onload="resizeFrameToContent("infoView_home")"     src="jsp/listing/blank.jsp" style="height: 257px;">
<html class="logon_body">
<head>
<body class 
```

=

# html - 基础 (3) Navigation Stretch 100% 宽度

> ID：13391529
> 
> 赞同：2
> 
> 时间：2012-11-15T04:21:13.517
> 
> 标签：html, css, zurb-foundation

我想知道当导航栏一直延伸到屏幕上时，是否可以让 Foundation 3 by Zurb 导航栏项目居中。我在导航上有 6 个项目，它们都在右侧。

```
<ul class="nav-bar">
   <!-- nav items... ect --> 
</ul> 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T18:40:42.647

我什至无法制作物品，但我设法让它看起来好多了，试试这个 CSS for Foundation：

```
.nav-bar {  background: inherit; }
.nav-bar > li { background: #4d4d4d; border: 1px solid #333333; }
.nav-bar li {
    float: left;
}
.nav-bar > li > a:first-child {  padding: 0 12px; font-size: 14px; }
.nav-bar > li:last-child { border-right: 0px; -webkit-box-shadow: none; -moz-box-shadow: 1px 0 0 rgba(255, 255, 255, 0.2) inset; box-shadow: 1px 0 0 rgba(255, 255, 255, 0.2) inset; }

.nav-bar > li:hover { background: #666; } 
```

# android - 在哪里可以找到有关 RenderScript 的一些基本信息？

> ID：13391532
> 
> 赞同：0
> 
> 时间：2012-11-15T04:21:28.627
> 
> 标签：android, renderscript

我正在寻找有关 renderscript 的一些信息？

我已经知道 display 的部分已弃用，所以我想专注于计算部分。

有什么有用的信息可以给我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T04:31:03.737

从谷歌文档[这里](http://developer.android.com/guide/topics/renderscript/index.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T04:31:06.193

[渲染脚本](http://www.google.co.in/url?sa=t&rct=j&q=renderscript%20android&source=web&cd=1&cad=rja&ved=0CB8QFjAA&url=http://developer.android.com/reference/android/renderscript/package-summary.html&ei=3G-kUNTIAsrDswaV2IDwCg&usg=AFQjCNFA1kFx9SqPOIXpcLj7RfbmVqKJQw)

[开始使用 RenderScript](http://www.google.co.in/url?sa=t&rct=j&q=renderscript%20android&source=web&cd=3&cad=rja&ved=0CC0QFjAC&url=http://mobile.tutsplus.com/tutorials/android/getting-started-with-renderscript-on-android/&ei=3G-kUNTIAsrDswaV2IDwCg&usg=AFQjCNEgJMwdmKbEivzPwhs3p42e1zWb7g)

如果您只是谷歌，许多其他链接将可用:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T03:28:38.133

[https://developers.google.com/events/io/sessions/gooio2012/103/](https://developers.google.com/events/io/sessions/gooio2012/103/)有一个很好的易于遵循的演示，将计算内核添加到应用程序以进行图像处理。

# python - 为什么我的 wxPython 小部件的格式被弄乱了？

> ID：13391533
> 
> 赞同：1
> 
> 时间：2012-11-15T04:21:32.483
> 
> 标签：python, widget, wxpython

我已经编写了一个 wxPython 应用程序（遵循文档），它几乎可以完成我想要的一切。它有我想要的所有方式的复选框和文本行等。唯一的问题是我把它作为我的应用程序的主要框架。

我真正想要的是把它变成一个小部件，这样我就可以在我的最终应用程序框架中实例化其中的一些。然而，当我试图让我的小部件从 wx.Panel 而不是 wx.Frame 继承，然后将一个小部件实例化到我的 Frame 类中时，它像中子星一样自行塌陷。

请看一下我的两个代码示例，看看你是否知道出了什么问题。

这是我的小部件直接在从 wx.Frame 继承的类中构建的版本：

```
#!/usr/bin/env python

"""
This demo attempts to override the C++ MainLoop and implement it
in Python.
"""

import time
import wx
import serial                
from serial.tools.list_ports import comports

#str1 = '[12:28:14]fxn_name() ***ISCFLAGS***1***0***0***0***3.19***00-1C-FA-F1-00-09-F1-EE***\r\n'
logAll = 1

"""lowBat1 = 0
pir1 = 0
batVolt1 = 0
tamp1 = 0
supervise1 = 0
mac1 = 0"""
######################################################################################
class ETL_test(wx.Frame):
    def __init__(self, parent, id, title):
        wx.Frame.__init__(self, parent, id, title, size=(275, 200))
        self.initGUI()
        self.Bind(wx.EVT_CLOSE, self.OnCloseWindow)
        self.Show()

    def initGUI(self):
        #main container panel for all of the ISC status information
        self.checkBoxPanel = wx.Panel(self,-1,size=(100,200),style= wx.SUNKEN_BORDER)

        self.checkBoxVbox = wx.BoxSizer(wx.VERTICAL)

        #make the three individual checkboxes
        self.superviseCheck = wx.CheckBox(self.checkBoxPanel,-1,'Supervisory Trouble')
        self.pirCheck = wx.CheckBox(self.checkBoxPanel,-1,'PIR Activity')
        self.tamperCheck = wx.CheckBox(self.checkBoxPanel,-1,'Tamper Tripped')

        #make the MAC hbox section
        self.macHbox = wx.BoxSizer(wx.HORIZONTAL)
        self.macLabel = wx.StaticText(self.checkBoxPanel,-1,'MAC ADDR: ')
        macFont1 = wx.Font(10, wx.FONTFAMILY_DEFAULT,wx.FONTSTYLE_NORMAL,wx.FONTWEIGHT_BOLD)
        self.macLabel.SetFont(macFont1)
        macFont2 = wx.Font(10, wx.FONTFAMILY_DEFAULT,wx.FONTSTYLE_NORMAL,wx.FONTWEIGHT_NORMAL)
        self.macAddr = wx.StaticText(self.checkBoxPanel,-1,'001CFAF10009F1EE')
        self.macAddr.SetFont(macFont2)
        self.macHbox.Add(self.macLabel,0,wx.RIGHT,5)
        self.macHbox.Add(self.macAddr,0,0,0)

        #make the low battery hbox section
        self.lowBatCheck = wx.CheckBox(self.checkBoxPanel,-1,'Low Battery Voltage')
        self.batVoltText = wx.StaticText(self.checkBoxPanel,-1, '9.9V')
        self.lowBatHbox = wx.BoxSizer(wx.HORIZONTAL)
        self.lowBatHbox.Add(self.lowBatCheck, 0,wx.RIGHT,20)
        self.lowBatHbox.Add(self.batVoltText, 0,wx.ALL,0)

        #make the pirCount hbox section
        self.pirCountHbox = wx.BoxSizer(wx.HORIZONTAL)
        self.pirCountNumber = 3
        self.pirLabel = wx.StaticText(self.checkBoxPanel,-1,'PIR Count: ')
        self.pirCount = wx.StaticText(self.checkBoxPanel,-1,str(self.pirCountNumber))
        self.pirReset = wx.Button(self.checkBoxPanel,-1,label='Reset PIR Count')
        self.pirCountHbox.Add(self.pirLabel,0,wx.RIGHT,3)
        self.pirCountHbox.Add(self.pirCount,0,wx.RIGHT, 40)
        self.pirCountHbox.Add(self.pirReset,0,wx.ALIGN_RIGHT,0)
        self.pirReset.Bind(wx.EVT_BUTTON,self.resetPIR)

        #add all the parts to the main vbox
        self.checkBoxVbox.Add(self.macHbox,0,wx.ALL,5)
        self.checkBoxVbox.Add(self.superviseCheck,0,wx.ALL,5)
        self.checkBoxVbox.Add(self.lowBatHbox,0,wx.ALL,5)
        self.checkBoxVbox.Add(self.tamperCheck,0,wx.ALL,5)
        self.checkBoxVbox.Add(self.pirCheck,0,wx.ALL,5)
        self.checkBoxVbox.Add(self.pirCountHbox,0,wx.ALL,5)
        self.checkBoxPanel.SetSizer(self.checkBoxVbox)

        #setup the 1 sec timer to update all the data based on the global data
        #self.updateTimer = wx.Timer(self)
        #self.Bind(wx.EVT_TIMER,self.updateData,self.updateTimer)
        #self.updateTimer.Start(500)

    #The event handler for pushing the PIR reset button
    def resetPIR(self,event):
        self.pirCountNumber = 0
        self.pirCount.SetLabel(str(self.pirCountNumber))
        self.Show()

    #The event handler for the 1 sec timer to update the data fields based on last flags msg
##    def updateData(self,event):
##        global batVolt1
##        self.pirCountNumber += 1;
##        self.pirCount.SetLabel(str(self.pirCountNumber))
##        self.batVoltText.SetLabel(str(batVolt1)+'V')

    #The event handler for closing the window
    def OnCloseWindow(self, event):
        app.keepGoing = False
        self.Destroy()
        logFile.close()

    def updateOnSerial(self,flags):
        self.superviseCheck.SetValue(flags[0] == 1)
        self.pirCheck.SetValue(flags[1] == 1)
        if flags[1] == 1:
            self.pirCountNumber += 1
        self.pirCount.SetLabel(str(self.pirCountNumber))
        self.tamperCheck.SetValue(flags[2] == 1)
        self.lowBatCheck.SetValue(flags[3] == 1)
        self.batVoltText.SetLabel(str(flags[4])+'V')
        self.macAddr.SetLabel(str(flags[5]))

#####################################################################################

class MyApp(wx.App):
    def MainLoop(self):
        # Create an event loop and make it active
        evtloop = wx.EventLoop()
        old = wx.EventLoop.GetActive()
        wx.EventLoop.SetActive(evtloop)

        # This outer loop determines when to exit the application
        while self.keepGoing:
            # call_my_code_here()
            line = ser.readline()
            parsedLines = line.split('***')
            global logAll
            if len(parsedLines) > 4 and parsedLines[1] == 'ISCFLAGS': #got a flags msg
                print('Now parsing a ISCFLAGS msg!')
                self.parseFlagsMsg(parsedLines)
                logFile.write(str(line))
            elif logAll > 0 and len(parsedLines) < 2: #logAll is on and it's not a flags msg
                logFile.write(str(line))
            # This inner loop will process any GUI events
            # until there are no more waiting.
            while evtloop.Pending():
                evtloop.Dispatch()

            # Send idle events to idle handlers. 
            # I'll just snooze a little...
            time.sleep(0.10)
            self.ProcessIdle()

        wx.EventLoop.SetActive(old)

    def parseFlagsMsg(self):
        global lowBat1
        global pir1
        global batVolt1
        global tamp1
        global supervise1
        global mac1
        if len(parsedLines) != 10:
            print('ERROR: not enough flag tokens!!')
            return False
        else:
            camID = parsedLines[2];#1,2, or 3
        # TODO: array of testApps... testApp[camID].updateOnSerial()
        # This passes the 4th element through the 8th element
        testApp.updateOnSerial(parsedLines[3:8]) 

    def OnInit(self):
        testApp = ETL_test(None, -1, "Alarm.com 2GIG Image Sensor ETL Test Application")
        testApp.Show(True)
        self.SetTopWindow(testApp)

        self.keepGoing = True
        return True

app = MyApp(False)
logFile = open('C:/Python26/temp/test.txt', 'w')
ser = serial.Serial('com5',115200,timeout=0.01)
app.MainLoop() 
```

然后这是我尝试将其设为自定义小部件的版本，然后在我的 wx.Frame 类中实例化其中一个：

```
#!/usr/bin/env python

"""
This demo attempts to override the C++ MainLoop and implement it
in Python.
"""

import time
import wx
import serial                
from serial.tools.list_ports import comports

str1 = '[12:28:14]fxn_name() ***ISCFLAGS***1***0***0***0***3.19***00-1C-FA-F1-00-09-F1-EE***\r\n'
logAll = 1

"""lowBat1 = 0
pir1 = 0
batVolt1 = 0
tamp1 = 0
supervise1 = 0
mac1 = 0"""
#---------------------------------------------------------------------------       
class ISC_status(wx.Panel):
    def __init__(self, parent, id):
        wx.Panel.__init__(self, parent, id, size=(275, 200))
        self.initGUI()
        #self.Bind(wx.EVT_CLOSE, self.OnCloseWindow)
        self.Show()

    def initGUI(self):
        #main container panel for all of the ISC status information
        self.checkBoxPanel = wx.Panel(self,-1,size=(100,200),style= wx.SUNKEN_BORDER)

        self.checkBoxVbox = wx.BoxSizer(wx.VERTICAL)

        #make the three individual checkboxes
        self.superviseCheck = wx.CheckBox(self.checkBoxPanel,-1,'Supervisory Trouble')
        self.pirCheck = wx.CheckBox(self.checkBoxPanel,-1,'PIR Activity')
        self.tamperCheck = wx.CheckBox(self.checkBoxPanel,-1,'Tamper Tripped')

        #make the MAC hbox section
        self.macHbox = wx.BoxSizer(wx.HORIZONTAL)
        self.macLabel = wx.StaticText(self.checkBoxPanel,-1,'MAC ADDR: ')
        macFont1 = wx.Font(10, wx.FONTFAMILY_DEFAULT,wx.FONTSTYLE_NORMAL,wx.FONTWEIGHT_BOLD)
        self.macLabel.SetFont(macFont1)
        macFont2 = wx.Font(10, wx.FONTFAMILY_DEFAULT,wx.FONTSTYLE_NORMAL,wx.FONTWEIGHT_NORMAL)
        self.macAddr = wx.StaticText(self.checkBoxPanel,-1,'001CFAF10009F1EE')
        self.macAddr.SetFont(macFont2)
        self.macHbox.Add(self.macLabel,0,wx.RIGHT,5)
        self.macHbox.Add(self.macAddr,0,0,0)

        #make the low battery hbox section
        self.lowBatCheck = wx.CheckBox(self.checkBoxPanel,-1,'Low Battery Voltage')
        self.batVoltText = wx.StaticText(self.checkBoxPanel,-1, '9.9V')
        self.lowBatHbox = wx.BoxSizer(wx.HORIZONTAL)
        self.lowBatHbox.Add(self.lowBatCheck, 0,wx.RIGHT,20)
        self.lowBatHbox.Add(self.batVoltText, 0,wx.ALL,0)

        #make the pirCount hbox section
        self.pirCountHbox = wx.BoxSizer(wx.HORIZONTAL)
        self.pirCountNumber = 3
        self.pirLabel = wx.StaticText(self.checkBoxPanel,-1,'PIR Count: ')
        self.pirCount = wx.StaticText(self.checkBoxPanel,-1,str(self.pirCountNumber))
        self.pirReset = wx.Button(self.checkBoxPanel,-1,label='Reset PIR Count')
        self.pirCountHbox.Add(self.pirLabel,0,wx.RIGHT,3)
        self.pirCountHbox.Add(self.pirCount,0,wx.RIGHT, 40)
        self.pirCountHbox.Add(self.pirReset,0,wx.ALIGN_RIGHT,0)
        self.pirReset.Bind(wx.EVT_BUTTON,self.resetPIR)

        #add all the parts to the main vbox
        self.checkBoxVbox.Add(self.macHbox,0,wx.ALL,5)
        self.checkBoxVbox.Add(self.superviseCheck,0,wx.ALL,5)
        self.checkBoxVbox.Add(self.lowBatHbox,0,wx.ALL,5)
        self.checkBoxVbox.Add(self.tamperCheck,0,wx.ALL,5)
        self.checkBoxVbox.Add(self.pirCheck,0,wx.ALL,5)
        self.checkBoxVbox.Add(self.pirCountHbox,0,wx.ALL,5)
        self.checkBoxPanel.SetSizer(self.checkBoxVbox)

        #setup the 1 sec timer to update all the data based on the global data
        #self.updateTimer = wx.Timer(self)
        #self.Bind(wx.EVT_TIMER,self.updateData,self.updateTimer)
        #self.updateTimer.Start(500)

    #The event handler for pushing the PIR reset button
    def resetPIR(self,event):
        self.pirCountNumber = 0
        self.pirCount.SetLabel(str(self.pirCountNumber))
        self.Show()

    #The event handler for the 1 sec timer to update the data fields based on last flags msg
##    def updateData(self,event):
##        global batVolt1
##        self.pirCountNumber += 1;
##        self.pirCount.SetLabel(str(self.pirCountNumber))
##        self.batVoltText.SetLabel(str(batVolt1)+'V')

    def updateOnSerial(self,flags):
        self.superviseCheck.SetValue(flags[0] == 1)
        self.pirCheck.SetValue(flags[1] == 1)
        if flags[1] == 1:
            self.pirCountNumber += 1
        self.pirCount.SetLabel(str(self.pirCountNumber))
        self.tamperCheck.SetValue(flags[2] == 1)
        self.lowBatCheck.SetValue(flags[3] == 1)
        self.batVoltText.SetLabel(str(flags[4])+'V')
        self.macAddr.SetLabel(str(flags[5]))
#---------------------------------------------------------------------------
class ETL_test(wx.Frame):
    def __init__(self, parent, id, title):
        wx.Frame.__init__(self, parent, id, title, size=(275, 200))
        self.initGUI()
        self.Bind(wx.EVT_CLOSE, self.OnCloseWindow)
        self.Show()

    def initGUI(self):
        panel = wx.Panel(self)
        ISC1 = ISC_status(self,-1)
        sizer = wx.BoxSizer(wx.VERTICAL)
        sizer.Add(ISC1,1,wx.ALL|wx.EXPAND,5)
        panel.SetSizer(sizer)
        self.Layout()
        self.Show()

    #The event handler for closing the window
    def OnCloseWindow(self, event):
        app.keepGoing = False
        self.Destroy()
        logFile.close()
#---------------------------------------------------------------------------

class MyApp(wx.App):
    def MainLoop(self):
        # Create an event loop and make it active
        evtloop = wx.EventLoop()
        old = wx.EventLoop.GetActive()
        wx.EventLoop.SetActive(evtloop)

        # This outer loop determines when to exit the application
        while self.keepGoing:
            # call_my_code_here()
            line = ser.readline()
            parsedLines = line.split('***')
            global logAll
            if len(parsedLines) > 4 and parsedLines[1] == 'ISCFLAGS': #got a flags msg
                print('Now parsing a ISCFLAGS msg!')
                self.parseFlagsMsg(parsedLines)
                logFile.write(str(line))
            elif logAll > 0 and len(parsedLines) < 2: #logAll is on and it's not a flags msg
                logFile.write(str(line))
            # This inner loop will process any GUI events
            # until there are no more waiting.
            while evtloop.Pending():
                evtloop.Dispatch()

            # Send idle events to idle handlers. 
            # I'll just snooze a little...
            time.sleep(0.10)
            self.ProcessIdle()

        wx.EventLoop.SetActive(old)

    def parseFlagsMsg(self):
        global lowBat1
        global pir1
        global batVolt1
        global tamp1
        global supervise1
        global mac1
        if len(parsedLines) != 10:
            print('ERROR: not enough flag tokens!!')
            return False
        else:
            camID = parsedLines[2];#1,2, or 3
        # TODO: array of testApps... testApp[camID].updateOnSerial()
        # This passes the 4th element through the 8th element
        testApp.updateOnSerial(parsedLines[3:8]) 

    def OnInit(self):
        testApp = ETL_test(None, -1, "Alarm.com 2GIG Image Sensor ETL Test Application")
        testApp.Show(True)
        self.SetTopWindow(testApp)

        self.keepGoing = True
        return True

app = MyApp(False)
logFile = open('C:/Python26/temp/test.txt', 'w')
ser = serial.Serial('com5',115200,timeout=0.01)
app.MainLoop() 
```

重申一下：第一个代码示例基本上可以按我的意愿工作，但这需要是我最终程序中的一个小部件。为什么当我尝试在从 wx.Frame 继承的类中实例化它时，格式会消失并且所有内容都位于彼此之上？

在此先感谢您的帮助。如果我需要提供任何其他信息，请告诉我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T06:43:02.463

当您将代码从框架转换为自定义面板时，您忘记删除额外的面板；`ISC_status`（a wx.Panel）在内部创建了另一个面板，由于缺少额外的尺寸器，布局被忽略（当主框架重新计算布局时，它无法到达内部面板）。

我已经移除了那个内部面板（以及一些使它保持小的功能，抱歉），现在它应该可以按照你想要的方式工作：

```
import wx

class ISC_status(wx.Panel):
    def __init__(self, parent, id=wx.ID_ANY):
        wx.Panel.__init__(self, parent, id, style=wx.SUNKEN_BORDER)
        self.initGUI()
# NOTE: remove next line for 'best fit' instead of 275x200
        self.SetMinSize((275, 200))
        self.Layout()
        self.Show()

    def initGUI(self):
# NOTE: here you created an additional (inner) panel
        #main container panel for all of the ISC status information
        sizer = wx.BoxSizer(wx.VERTICAL)
        #make the three individual checkboxes
        self.superviseCheck = wx.CheckBox(self,-1,'Supervisory Trouble')
        self.pirCheck = wx.CheckBox(self,-1,'PIR Activity')
        self.tamperCheck = wx.CheckBox(self,-1,'Tamper Tripped')
        #make the MAC hbox section
        self.macHbox = wx.BoxSizer(wx.HORIZONTAL)
        self.macLabel = wx.StaticText(self,-1,'MAC ADDR: ')
        macFont1 = wx.Font(10, wx.FONTFAMILY_DEFAULT,wx.FONTSTYLE_NORMAL,wx.FONTWEIGHT_BOLD)
        self.macLabel.SetFont(macFont1)
        macFont2 = wx.Font(10, wx.FONTFAMILY_DEFAULT,wx.FONTSTYLE_NORMAL,wx.FONTWEIGHT_NORMAL)
        self.macAddr = wx.StaticText(self,-1,'001CFAF10009F1EE')
        self.macAddr.SetFont(macFont2)
        self.macHbox.Add(self.macLabel,0,wx.RIGHT,5)
        self.macHbox.Add(self.macAddr,0,0,0)
        #make the low battery hbox section
        self.lowBatCheck = wx.CheckBox(self,-1,'Low Battery Voltage')
        self.batVoltText = wx.StaticText(self,-1, '9.9V')
        self.lowBatHbox = wx.BoxSizer(wx.HORIZONTAL)
        self.lowBatHbox.Add(self.lowBatCheck, 0,wx.RIGHT,20)
        self.lowBatHbox.Add(self.batVoltText, 0,wx.ALL,0)
        #make the pirCount hbox section
        self.pirCountHbox = wx.BoxSizer(wx.HORIZONTAL)
        self.pirCountNumber = 3
        self.pirLabel = wx.StaticText(self,-1,'PIR Count: ')
        self.pirCount = wx.StaticText(self,-1,str(self.pirCountNumber))
        self.pirReset = wx.Button(self,-1,label='Reset PIR Count')
        self.pirCountHbox.Add(self.pirLabel,0,wx.RIGHT,3)
        self.pirCountHbox.Add(self.pirCount,0,wx.RIGHT, 40)
        self.pirCountHbox.Add(self.pirReset,0,wx.ALIGN_RIGHT,0)
        self.pirReset.Bind(wx.EVT_BUTTON,self.resetPIR)
        #add all the parts to the main vbox
        sizer.Add(self.macHbox,0,wx.ALL,5)
        sizer.Add(self.superviseCheck,0,wx.ALL,5)
        sizer.Add(self.lowBatHbox,0,wx.ALL,5)
        sizer.Add(self.tamperCheck,0,wx.ALL,5)
        sizer.Add(self.pirCheck,0,wx.ALL,5)
        sizer.Add(self.pirCountHbox,0,wx.ALL,5)
# NOTE: here you set the sizer to the inner panel but there was
#       no sizer to connect it to ISC_status itself so it was
#       unreachable for the main frame and the layout was ignored
        self.SetSizer(sizer)

    def resetPIR(self,event):
        pass

    def updateOnSerial(self,flags):
        pass

class TestFrame(wx.Frame):
    def __init__(self):
        wx.Frame.__init__(self, None)
        sizer = wx.BoxSizer(wx.VERTICAL)
        row = wx.BoxSizer(wx.HORIZONTAL)
# NOTE: set proportion to 0 if you want them 'fixed size'
        row.Add(ISC_status(self),1,wx.ALL,5)
        row.Add(ISC_status(self),1,wx.ALL,5)
        sizer.Add(row,0,wx.EXPAND)
        self.SetSizerAndFit(sizer)

app = wx.PySimpleApp()
frame = TestFrame().Show()
app.MainLoop() 
```

# android - 访问已安装应用程序列表

> ID：13391534
> 
> 赞同：-2
> 
> 时间：2012-11-15T04:21:33.933
> 
> 标签：android

> **可能重复：**
> [如何获取已安装的应用程序权限](https://stackoverflow.com/questions/7937794/how-to-get-installed-applications-permissions)

有什么方法可以访问 Android 上已安装应用程序的列表吗？他们在安装时使用了什么权限/或他们现在拥有什么权限？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T04:37:32.320

```
final List<PackageInfo> list = getPackageManager().getInstalledPackages(0);
for (final PackageInfo pack : list)
{
    Log.i("Packages", pack.packageName);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T04:37:39.217

```
 final PackageManager pm = context.getPackageManager();
        List<PackageInfo> packageInfo = pm.getInstalledPackages(PackageManager.GET_PERMISSIONS);

        for (PackageInfo info : packageInfo) {
            String[] requestedPermissions = info.requestedPermissions;
            if (requestedPermissions != null) {
                for (String permission : requestedPermissions) {
            if ("your_manifest_permission".equals(permission)) {
                        Do Something

}
}
}
        } 
```

# jquery - CSS 位置帮助（动画内容结束时显示的水平侧边栏）

> ID：13391535
> 
> 赞同：1
> 
> 时间：2012-11-15T04:21:43.617
> 
> 标签：jquery, css, jquery-animate, position, scrollbar

让我尽我所能解释我想要发生的事情，向你展示我的代码，希望我能得到一些帮助。

所以，我正在尝试从屏幕左侧（就像很多移动应用程序一样）做一个滑动导航 UI。主要内容滑过，在下方显示导航菜单。

现在浏览器认为屏幕变宽并引入了水平滚动条。不过，我不希望这样的事情发生……

如何让 div 在屏幕外设置动画但不放大屏幕宽度（即部分保持在屏幕外）？

无论如何，这是我的小提琴：http: [//jsfiddle.net/2vP67/6/](http://jsfiddle.net/2vP67/6/)

这是帖子中的代码：

**HTML**

```
<div id='wrapper'>
    <div id='navWide'> </div>
    <div id='containerWide'> </div>
    <div id='containerTall'>
        <div id='container'>
            <div id='nav'>
                <div id='navNavigate'> Open Menu </div>
                <div id='navNavigateHide'> Close Menu </div>
            </div>
        </div>
    </div>
    <div id='sideContainerTall'>
        <div id='sideContainer'>
            <div id='sideNav'>Side Navigation </div>
        </div>
    </div>
</div> 
```

**CSS**

```
#wrapper {
    width:100%;
    min-width:1000px;
    height:100%;
    min-height:100%;
    position:relative;
    top:0;
    left:0;
    z-index:0;
}
#navWide {
    color: #ffffff;
    background:#222222;
    width:100%;
    min-width:1000px;
    height:45px;
    position:fixed;
    top:0;
    left:0;
    z-index:100;
}
#containerWide {
    width:100%;
    min-width:1000px;
    min-height:100%;
    position:absolute;
    top:45px;
    z-index:100;
}
#containerTall {
    color: #000000;
    background:#dadada;
    width:960px;
    min-height:100%;
    margin-left:-480px;
    position:absolute;
    top:0;
    left:50%;
    z-index:1000;
}
/***** main container *****/

#container {
    width:960px;
    min-height:585px;
}
#nav {
    color: #ffffff;
    background:#222222;
    width:960px;
    height:45px;
    position:fixed;
    top:0;
    z-index:10000;
}
#navNavigate {
    background:yellow;
    font-size:10px;
    color:#888888;
    width:32px;
    height:32px;
    padding:7px 6px 6px 6px;
    float:left;
    cursor:pointer;
}
#navNavigateHide {
    background:yellow;
    font-size:10px;
    color:#888888;
    width:32px;
    height:32px;
    padding:7px 6px 6px 6px;
    float:left;
    cursor:pointer;
    display:none;
}
#sideContainerTall {
    background:#888888;
    width:264px;
    min-height:100%;
    margin-left:-480px;
    position:absolute;
    top:0;
    left:50%;
    z-index:500;
}
#sideContainer {
    width:264px;
    min-height:585px;
    display:none;
}
#sideContainerTall {
    background:#888888;
    width:264px;
    min-height:100%;
    margin-left:-480px;
    position:absolute;
    top:0;
    left:50%;
    z-index:500;
}
#sideContainer {
    width:264px;
    min-height:585px;
    display:none;
}
#sideNav {
    width:264px;
    height:648px;
    float:left;
} 
```

**Javascript**

```
$(document).ready(function() {

    $('div#navNavigate').click(function() {

        $('div#navNavigate').hide();

        $('div#navNavigateHide').show();

        $('div#sideContainer').show();

        $('div#containerTall').animate({
            'left': '+=264px'
        });
    });

    $('div#navNavigateHide').click(function() {

        $('div#navNavigate').show();

        $('div#navNavigateHide').hide();
        $('div#containerTall').animate({
            'left': '-=264px'
        }, function() {
            $('div#sideContainer').hide();
        });
    });

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T18:17:13.213

因此，一个真正的快速解决方法是将 hidden 溢出应用到您的 html/body （您还需要像这样定义高度和宽度）：

```
html, body{
    width:100%;
    height:100%;
    min-height:100%;
    overflow:hidden;
} 
```

查看更新的 jsFiddle：http: [//jsfiddle.net/2vP67/9/](http://jsfiddle.net/2vP67/9/)

**- 编辑 -**

如果您想要 Facebook 或 Path 等应用程序的侧面板视图效果，那么您可以使用更简单的布局/css 来实现它。

在此处查看关于 jsFiddle 的示例：http: [//jsfiddle.net/2vP67/11/](http://jsfiddle.net/2vP67/11/)

这里的示例是基于 iPhone 的宽度，但您可以检测屏幕大小并根据需要显示内容。

# java - 虽然循环不能正常工作

> ID：13391536
> 
> 赞同：0
> 
> 时间：2012-11-15T04:22:00.107
> 
> 标签：java, while-loop

对象应该根据经过的时间（在追逐或分散之间切换）改变模式（运动算法）。我创建了一个while循环，但对象仅以一种模式（追逐）移动，这很奇怪，因为我最初将它设置为分散。

```
private static int seconds=0;
private static boolean ghostalive;

protected static final int chaseMode = 0;
protected static final int scatterMode = 1;
protected static final int frightenedMode = 2;

static int mode; //initially ghost start in scatterMode

public Ghost(int x, int y, Maze maze){
    super(x, y, maze);
    futureDirection = 0;
    timer = 0;
    mode = getMode();
}     

public static int getMode(){
    mode=setMode();
    return mode;
}

//LEVEL 1
//scatter for 7s 
//chase for 20s 
//scatter for 7s 
//chase for 20s 
//scatter for 5s 
//chase for 20s
//scatter for 5s 
//chase indefinite

public static int setMode(){

while(ghostalive){

    mode = scatterMode;
    if(seconds>7)
        mode = chaseMode;//chaseMode=true;
    if(seconds>27)
        mode = scatterMode;
    if(seconds>34)
        mode = chaseMode;
    if(seconds>54) 
        mode = scatterMode;
    if(seconds>59) 
        mode = chaseMode;
    if(seconds>79)
        mode = scatterMode;
    if(seconds>84)
        mode = chaseMode;

    seconds++;      
   }    
       return mode;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T04:42:12.573

您的评论说它从 开始`scatterMode`，但是在声明它时您没有将模式设置为任何东西。因此，它实际上默认为`chaseMode`. 因为您没有初始化 boolean `ghostAlive`，所以它默认为 false ，这意味着您的循环永远不会发生，这意味着模式不会设置为`scatterMode`，这意味着它始终保持在`chaseMode`.

要开始解决此问题，您应该初始化`ghostAlive`为 true。然后，对于所有的 if，您可以放置​​一个`ghostAlive = false`语句来结束循环。我不确定您在整个项目的上下文中使用这种方法的目标是什么，但是这点知识应该可以帮助您解决任何问题。您必须以`ghostAlive`某种方式在循环内使 false 退出循环。

不过，不确定为什么要使用所有这些静态方法和字段。您发布的内容似乎没有必要。

此外，最好将 if 语句（甚至是单语句）放在大括号中。如果您必须稍后添加一些错误，这将有助于遏制任何错误（看起来您必须在这里）。

# java - 过滤一组数据、选择查询或循环哪个更快？

> ID：13391538
> 
> 赞同：2
> 
> 时间：2012-11-15T04:22:13.020
> 
> 标签：java, mysql, select

假设我在 MySql 数据库中有大约 10000 行，我想计算多个值（总和。中位数，平均值......）。

*   哪个更快，使用简单的 SQL 查询获取所有 10000 并使用 Java 对其进行迭代并进行计算或直接执行 SQL 查询 (select sum(..); select count(*)...) ？是否可以只执行一个返回所需值的查询？

**编辑**

*   是否有关于该主题的任何指标/统计数据？
*   可以通过连接 2 或 3 个表来获取数据

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T04:25:49.137

使用**MySQL**函数比用**Java**编写代码**更好更快**。**这是因为 MySQL 函数将比 Java 更接近数据。**数据库（MySQL）功能也针对此类功能进行了极其优化。

 ****如果您使用 java，那么您将在应用任何逻辑之前先在内存中加载那么多数据。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-15T04:34:26.840

这取决于

这里的大多数人说它更快，因为它更接近数据等。

然而，这不一定是真的。

例如，如果过滤条件很复杂，如果结果数接近记录总数，如果 DB 机器不是超级快而您的应用程序超级慢，在这种情况下让 DB 做简单的工作（获取所有记录）并在您的应用程序中执行工作可以更快。（我什至没有提到 DB 的可扩展性低，有更多的场景可能导致 DB 中的过滤比应用中慢）

所以，没有经验法则。

我的建议是，将简单直接的过滤/聚合放在 DB 中，让 DB 做它擅长的工作。如果您需要额外的复杂计算来进行过滤，请在应用程序代码中执行（并在 DB 过滤结果上执行）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-15T04:27:19.983

MySql 查询会更快，也可以节省大量内存和 CPU 时间。它的一般逻辑。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-15T04:30:22.420

当然会有例外，但通常最好让数据库引擎进行数据过滤、聚合、排序等。数据库旨在处理这些事情。****

# mysql - 高流量登录页面（gmail、facebook、twitter）使用的数据库架构有哪些特征？

> ID：13391539
> 
> 赞同：1
> 
> 时间：2012-11-15T04:22:18.700
> 
> 标签：mysql, sql

对于小型公开网站`UNIQUE`，在字段上使用索引`email_address`将有助于加快查询速度。

```
SELECT * FROM users
  WHERE email_address = ?
  AND hash_password = ? 
```

对于一个面向公众的大型网站来说，这似乎过于简单了。

大型、高流量网站用于唯一电子邮件身份验证的特定任务的数据库架构有哪些特征？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T04:51:44.353

您面临的问题是什么？

无论您有多少行/查询，您都应该有索引和键。如果你有 - 你应该没问题的常规页面/应用程序。

监控性能。当您的用户群增长并且您开始遇到性能问题时 - 识别它们并处理让您放慢速度的事情。

通常，降低性能的不是数量，而是复杂性。或者更像`volume*complexity`. 所以如果你有简单的系统 - 你应该没问题。

# java - 以编程方式读取网页并提取一些信息

> ID：13391543
> 
> 赞同：0
> 
> 时间：2012-11-15T04:23:00.803
> 
> 标签：java, web-scraping, bufferedreader

我想以编程方式访问网页并从中提取一些信息。

我想通过`Java`代码登录到某个网站，让服务器感觉请求实际上是来自一个真实的浏览器。

尽管存在一个问题，但我几乎遇到了：该网站需要`parameter - "sessid"`与每个请求一起传递，而每个请求都会随着每个请求而不断变化。

例如，当我第一次访问该页面时`sessid=90334`，在下一页它就像`sessid=78204`。

因此，`url`我通过应该包含的值，`sessid`否则身份验证失败：`www.somesite.com/somepage.php?sessid=75749`。

该网页包含一个`<input>`标签，其中包含的值，`sessid`我必须检索该标签的值。

我怎样才能做到这一点？标签是这样的：

`<input type="hidden" name="sessid" value="69529">`

我可以使用以下代码成功阅读整个网页：

```
 BufferedReader rd = new BufferedReader(new InputStreamReader(conn.getInputStream()));

    StringBuilder response = new StringBuilder();
    String line;
    while ((line = rd.readLine()) != null) {
        response.append(line);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T04:38:49.387

您可以使用类`indexOf`的方法`StringBuilder`：

```
 String startInputFragment = "<input type=\"hidden\" name=\"sessid\" value=\"";
    int startIdx = response.indexOf(startInputFragment);
    if (startIdx >= 0) {
        int endIdx = response.indexOf("\">", startIdx);
        String val = response.substring(startIdx + startInputFragment.length(),
                endIdx);
        System.out.println("-->" + val + "<--");
    } else {
        //tag not found: you may throw an ex or do something else
    } 
```

# java - WindowBuilder Pro 是否已经安装在 Eclipse 中？

> ID：13391544
> 
> 赞同：13
> 
> 时间：2012-11-15T04:23:01.190
> 
> 标签：java, eclipse, windowbuilder, gui-designer

在此页面：[https://developers.google.com/java-dev-tools/download-wbpro](https://developers.google.com/java-dev-tools/download-wbpro)，没有将 WindowBuilder Pro 安装到 Eclipse Juno (4.2) 的选项。

WindowBuilder Pro 是否已经与 Eclipse Juno 一起安装？

另外，有没有比 WindowBuilder Pro 更好的免费替代品？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-12-02T17:49:58.517

## UPDATE 2019

Again WindowBuilder Pro is no longer included in any of the latest Eclipse versions. So you need to add it as was shown in the initial answer below.

It is also strange, that WindowBuilder Pro is not available when searching Eclipse Market place (checked with the latest as of now version of Eclipse For Enterprise Java Developers ***version 2019-09***) despite the fact that the product's [website](https://www.eclipse.org/windowbuilder/) is available.

But at least the related repository URL for the latest version of WindowBuilder Pro is now much compact and intuitive:

> [http://download.eclipse.org/windowbuilder/latest/](http://download.eclipse.org/windowbuilder/latest/)

[![enter image description here](../Images/38ab1ec2b0f4f0ea3a170ce5b97fa032.png)](https://i.stack.imgur.com/4nsp7.png)

* * *

## UPDATE 2014

As Sean Lynch noted in [his answer](https://stackoverflow.com/a/22322724/814702) WindowBuilder is included in [Eclipse IDE for Java](http://www.eclipse.org/downloads/packages/eclipse-ide-java-developers/lunar). Actually, it was already included there since version 3.7 ([Eclipse Indigo](http://www.eclipse.org/downloads/packages/eclipse-ide-java-developers/indigosr2)), which was released in year 2011.

Note that currently, it is included by default **only** in the version for *Java Developers*, **NOT** in the version for [*Java **EE** Developers*](http://www.eclipse.org/downloads/packages/eclipse-ide-java-ee-developers/lunar), which is the most downloaded and wanted version. So for the Eclipse IDE for Java EE Developers you still need to install it yourself.

* * *

# Old answer

It is not installed by default in Eclipse.

The new WindowBuilder Pro home page is here: [http://www.eclipse.org/windowbuilder/](http://www.eclipse.org/windowbuilder/)
On that page, in the "Current Status" section on the right, it says (emphasis mine):

> "Welcome to the **new** WindowBuilder homepage!"

* * *

## How to install WindowBuilder in Eclipse.

1) Copy the correct *link* for your version of Eclipse from the **Update Site** column (**Release Version**) on the [download page](http://www.eclipse.org/windowbuilder/download.php):

![enter image description here](../Images/181ab30d8fd9cb9af5c97530424d14b4.png)

2) In the Eclipse main menu choose **Help > Install new Software...**

![enter image description here](../Images/f568c683a5d22881d1ab1f07a9982120.png)

3) In the appeared window click **Add...** button:

![enter image description here](../Images/ff3f57a7f3cdb550ecc87113441caa5e.png)

4) In the appeared dialog box, in the **Name** field write some descriptive name (like "WindowBuilder Pro") and paste the correct link (see step 1) in the **Location** field. After that click the **OK** button:

![enter image description here](../Images/f5ba105f2de593793048a36ddac2a023.png)

5) Select all the checkboxes that are going to appear, then click **Next** button and install WindowBuilder:

![enter image description here](../Images/72639791560b05f6d76beb575a1493d7.png)

* * *

Another way to add a link to the list of available Software Sites:
in the Eclipse main menu choose **Window > Preferences**, in the preferences window choose **Install/Update > [Available Software Sites](http://help.eclipse.org/juno/topic/org.eclipse.platform.doc.user/reference/ref-p2-siteprefs.htm?cp=0_4_1_10)**, click **Add...** button and go on as described above.

* * *

As for the better alternative, well, seems like WindowBuilder Pro is the most preferred: [Best GUI designer for Eclipse?](https://stackoverflow.com/questions/29426/best-gui-designer-for-eclipse)

Hope this helps.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-24T23:08:34.857

WindowBuilder 似乎是目前最好的 gui 设计器，因为它可以解析和处理任何手动编写的代码，它不需要任何额外的文件（xmls 等）。它总是试图对代码进行最小的更改。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-11T10:18:50.413

WindowBuilder 现在包含在面向 Java 开发人员的 Eclipse IDE 中。

[eclipse-java-kepler-SR2-win32.zip](https://www.eclipse.org/downloads/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-02-06T06:13:35.993

**2017 年 2 月更新**

从 Neon 开始，不再包含它：http: [//www.eclipse.org/downloads/packages/eclipse-ide-java-developers/neon2](http://www.eclipse.org/downloads/packages/eclipse-ide-java-developers/neon2)。

请检查该网站是否有任何未来更新，因为它可能随时更改。

请注意，您还可以从 Eclipse Marketplace 轻松获取 WindowBuilder。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-07-14T21:15:30.017

如果您需要在连接到 Internet 的计算机上获取 WindowBuilder，这很容易。“[使用 Eclipse 市场。](http://download.eclipse.org/windowbuilder/WB/integration/4.6/) ”

如果您的计算机未连接到 Internet（无法访问 Eclipse Marketplace），您将不得不为 Neon 和 Oxygen 做一些不同的事情：

使用旧答案中的第一个链接，您将单击您感兴趣的版本（4.6、4.7 等）的“集成版本”“链接”。在该页面上，您会被告知“您已经接近了！此 URL 是一个 Eclipse 软件存储库；您必须在 Eclipse 中使用它（看看如何）。”

但是，您可以通过单击“显示目录内容”（稍往左下）自行完成。

单击“repository.zip”并下载它。解压它。

在 Eclipse 中，选择“Help->Install New Software...” 在“Install”对话框中单击“Add...”。单击“添加存储库”对话框中的“本地...”，然后在“浏览文件夹”对话框中选择解压缩的存储库文件夹。在这两个对话框中单击“确定”，您会发现自己回到了“安装”窗口。

您应该在大空白处看到“WindowBuilder”。单击“全选”和“下一步>”。SWT 可能存在一些问题。您最终可能会看到一个名为“安装修复页面”的页面。单击“下一步>”。

在“安装详细信息”页面上，单击“下一步 >”。

同意许可（单击“我接受...”），然后单击“完成”。

您需要重新启动 Eclipse。

完毕。

# c# - 我有一个游戏的攻击链系统，但它很快变得非常复杂

> ID：13391545
> 
> 赞同：2
> 
> 时间：2012-11-15T04:23:02.613
> 
> 标签：c#, algorithm, if-statement, xna

我正在为我的 compsci 学士开设游戏开发课程，我们的项目是制作 XNA 游戏。我们正在制作一款 jrpg 风格的游戏，并为战斗提出了一个很酷的想法：每回合你排队 3 个技能，根据技能和选择的顺序，可以应用各种奖励效果。我们制作[了一个具有 2 个技能的基本技能：攻击和射击](http://i.imgur.com/DhHOF.png)。

您从第一个技能开始，然后箭头显示选择的第二个和第三个技能。第二层和第三层的方框显示了此时添加的效果。

基础：攻击+攻击=第二次攻击的暴击率更高。Fire+Attack = 在攻击的原始伤害上增加一些火焰伤害。Fire+Fire = 应用燃烧状态

更难的部分是当你连续击中 3 个时，因为它们会进行某种特殊攻击。攻击造成 1/4 几率暴击，火焰造成双倍伤害火焰攻击（称为火球）。

在 if 语句中实现这一点可能会因更多的技能而变得痛苦。if 语句的数量等于 n^n 从 1 到 n 的总和，所以如果我们想要 6 个技能，我们需要编写 6+36+216=258 个 if 语句！其中许多也是多余的！这很容易出错，因为我们必须煞费苦心地制作每个 if 语句，以便在我们编写流程图时它们处于正确的位置。

这就是为什么我们认为我们应该有一些具有静态效果的通用组合，如果可以累积的话，可能会增加一个计数器，然后当我们连续 3 个时调用具有该技能特殊攻击的函数。

首先想到的是有限状态机。除了我认为的特殊情况外，它可以处理所有情况。也许是下推式自动机？我的主要问题是我不知道如何在代码中实现它们。我学的课是理论课。

还有其他更有效或更容易编写/编码的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T05:04:20.690

我会想出某种递归模型：

```
enum Outcomes { Crit, DoubleCrit, FireDMG, Burn, NoEffect }

abstract class Attack 
{ 
    public Attack() { Child = null; }

    List<Outcomes> GetOutcomes(); 
    protected virtual Attack Child; 
}
class Melee : Attack 
{ 
    public Melee() : base() { }
    public Melee(Attack child) : base() { Child = child; }

    List<Outcomes> GetOutcomes()
    {
        List<Outcomes> ret = new List<Outcomes>();
        if(Child != null) ret.Add(Child.GetOutcomes());

        if(ret.Contains(Outcomes.Crit))
            ret.Add(Outcomes.DoubleCrit);
        else
            ret.Add(Outcomes.Crit);

        return ret;
    }
}
class Fire : Attack 
{ 
    public Fire() : base() { }
    public Fire(Attack child) : base() { Child = child; }

    List<Outcomes> GetOutcomes()
    {
        List<Outcomes> ret = new List<Outcomes>();
        if(Child != null) ret.Add(Child.GetOutcomes());

        List<Outcomes> PossibleOutcomes = new List<Outcomes>();        

        PossibleOutcomes.Add(Outcomes.FireDMG);
        PossibleOutcomes.Add(Outcomes.Burn);

        if(ret.Contains(Outcomes.Burn)) PossibleOutcomes.Add(Outcomes.Fireball)
        if(ret.Contains(Outcomes.FireDMG)) PossibleOutcomes.Add(Outcomes.NoEffect);

        // Use some randomization method to select an item from PossibleOutcomes
        int rnd = 2; // Totally random number.
        ret.Add(PossibleOutcomes[rnd]);

        return ret;
    }
} 
```

然后链式攻击只需使用：

```
Attack ChosenAttack = new Melee(new Fire(new Melee())); 
```

或者假设用户选择了每个分支，您只需要保留最后一个分支并不断将其作为子分支添加到他们选择的下一个攻击中。

```
Attack ChosenAttack = new Melee();

// Some events occur...

ChosenAttack = new Fire(ChosenAttack);

// Some more...

ChosenAttack = new Melee(ChosenAttack); 
```

如果我不太了解问题并且我的建议不起作用，我深表歉意。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T05:18:14.883

听起来您确实希望仍然能够自定义不同选择将对玩家产生的影响，同时避免编写所有代码。

做到这一点的一种方法是创建一个数据结构，它将处理任何组合的**结果**，并使创建新组合的任务更容易处理潜在的大量可能性，而不是你必须重新编译的代码更容易更改的东西在 XML 中并根据用户的选择查询结果。

您可能有一个类似于以下的类来存储结果。

```
public class AttackResult
{
    public int ChanceToCrit { get;set; }
    public int ChanceToBurn { get;set; }
    public int FireDmg { get;set; }
} 
```

至于 XML，你可能会有类似的东西，

```
<Options>
    <Attack>
        <AttackResult>
            <ChanceToCrit>5</ChanceToCrit>
        </AttackResult>
        <Attack>
            <AttackResult>
                <ChanceTCrit>10</ChanceToCrit>
            </AttackResult>
        </Attack>
    </Attack>
    <Fire>
    </Fire>
</Options> 
```

你明白了。例如，在处理您的用户选择时（我只是在这里猜测），您可能会将他们所做的事情存储在 Enum 中。因此，要使用 XML，您可能会做一些类似的事情

```
public enum ActionType
{
    Attack,
    Fire,
    None
} 
```

allActions 必须是为了让这个例子与你的游戏想法一起工作，我认为。

```
public ActionResult ProcessActions(List<ActionType> allActions)
{
    string xpathquery = "Options";

    foreach(var playerAction in allActions)
    {
        if(playerAction == ActionType.None)
           break;
        xpathquery += "/" + playerAction.ToString();
    }

    //Query xmldocument of all options
    var result = Singleton.ActionsDoc.SelectSingleNode(xpathquery);
    string attackRes = result.InnerXml;
    XmlSerializer serializer = new XmlSerializer(typeof(ActionResult))
    //Might need to prepend something to attackRes before deserializing, none of this is tested
    byte[] allBytes = Encoding.UTF8.GetBytes(attackRes);
    MemoryStream ms = new MemoryStream(allBytes);

    ActionResult result = (ActionResult)serializer.Deserialize(ms);

    return result;
} 
```

此选项有其缺点，例如 XmlSerializer 非常慢，但这意味着您可以创建一个简单的工具来帮助生成所有选项所需的 xml，并非常简单地调整值以平衡游戏。

桌上的一个选项。希望有帮助。

# python - 如何在 OpenERP 模块中使用 win32print？

> ID：13391549
> 
> 赞同：2
> 
> 时间：2012-11-15T04:23:38.203
> 
> 标签：python, openerp

我尝试在 Windows 7 上使用带有 OE 的 Bixolon 收据打印机。我成功地使用 win32print（py32win 随附）从一个小型 python 模块直接打印，代码如下：

win32print 不是原生在 OE 中，所以我将 win32print.pyd 粘贴到 OE 服务器目录中，并将代码放入我的 OE 模块的向导中。我可以看到我的向导，启动它没有错误，但没有任何反应：没有打印，没有错误消息。

有任何想法吗 ？谢谢

```
import win32print

printer=OpenPrinter(win32print.GetDefaultPrinter())
hJob = win32print.StartDocPrinter (printer, 1, ("RVGI Print", None, "RAW"))
g=open('test3.txt','r')
raw_data = bytes ( open( 'test3.txt' , 'r').read ())
try:
    win32print.StartPagePrinter (printer)
    win32print.WritePrinter (printer, raw_data)
    win32print.EndPagePrinter (printer)
finally:
    win32print.EndDocPrinter (printer)
win32print.ClosePrinter (printer) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T08:35:57.340

请记住，python 代码在服务器上运行。您的打印机是否连接到服务器？

此外，您`except`的`try`. 这使得错误无声无息地过去。尝试删除`try`块，以便引发错误。看看它们，您可能会发现问题所在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T17:33:17.750

好吧，我不知道您是否在此处输入错误，但是您导入`win32print`模块的方式会强制您将其附加到模块函数调用中，而您还没有在第一行中执行此操作：

```
printer = OpenPrinter(win32print.GetDefaultPrinter()) 
```

应该

```
printer = win32print.OpenPrinter(win32print.GetDefaultPrinter()) 
```

还有一点我不太明白，但[Tim Golden](http://timgolden.me.uk/python/win32_how_do_i/print.html)在他的教程中提出了问题，可能是你的问题：

```
raw_data = bytes('your_text') 
```

可能只是：

```
raw_data = 'your_text' 
```

取决于您的系统版本。您也没有指定编码，但是由于您没有错误可能不是问题。

对于 Tim Golden 发布的版本：

```
import sys
if sys.version_info >= (3,):
  raw_data = bytes ("This is a test", "utf-8")
else:
  raw_data = "This is a test" 
```

希望能帮助到你！

# mysql - 带有外键的 Django 数据库设计

> ID：13391550
> 
> 赞同：1
> 
> 时间：2012-11-15T04:23:42.270
> 
> 标签：mysql, django, database-design, foreign-keys

我有一个显示股票数据分析的 Django 应用程序。我想在我的分析中展示的一件事是标普 500 股票的*当前*回报（y 轴）和风险（x 轴）图

有一张股票数据表，每 2.5 分钟更新一次。它有主键符号和时间。该表目前有约 500 万行

目前，我有另一个名为 current_quotes 的表，它始终有 500 行。当前报价仅包含股票数据表中 500 个最新数据点的外键，其中包含 500 只股票当前回报的信息。本质上，该表是指向我要使用的 stock_data 子集的指针表。该表在插入新股票数据的同时每 2.5 分钟更新一次

我访问 500 只股票的最新数据点的方法是遍历 current_quotes 中的行，并通过查找外键检索 stock_data 中的数据。这很慢，大约需要 4 分钟才能检索所有最近的数据。

在不使用外键的情况下，是否有另一种方法可以做到这一点？

# javascript - 如何使用 Greasemonkey 脚本在纯文本文档中制作交互式目录？

> ID：13391551
> 
> 赞同：1
> 
> 时间：2012-11-15T04:23:44.127
> 
> 标签：javascript, browser, greasemonkey, plaintext, tableofcontents

我遇到了一个关于“文本/纯媒体类型的 URI 片段标识符”的相当新的[RFC](http://tools.ietf.org/rfc/rfc5147.txt)。我在 Chrome 和 IE 中对 URL 本身进行了一些测试，但无济于事。例如：

[https://stackoverflow.com/robots.txt#line=50](https://stackoverflow.com/robots.txt#line=50)

应该类似于：

[https://stackoverflow.com/about#footer](https://stackoverflow.com/about#footer)

如何编写 Greasemonkey 脚本来执行以下操作：

*   将目录映射到它引用的行，并为每个目录列表添加一个超链接，该列表映射到相应的行号？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T20:40:08.400

最接近的是[addrable](https://github.com/mhausenblas/addrable)项目。它以`text/csv`MIME 类型为目标，并具有 jQuery 和 NodeJS 实现。在浏览器领域之外， ePub 的[规范片段标识符](http://epub.anfengde.com/tag/epub-cfi/)将成为纯文本和标记之间的桥梁。

**参考**

*   [addrable-core.js](https://github.com/mhausenblas/addrable/blob/master/addrable-core.js)

*   [readium-cfi.js](https://github.com/readium/readium-cfi-js)

*   [Chromium 问题 77024：RFC 5147 纯文本位置片段](https://code.google.com/p/chromium/issues/detail?id=77024)

*   [Microsoft Connect 问题 652715：RFC 5147 纯文本位置作为 URI 片段给出](https://connect.microsoft.com/IE/feedback/details/652715/rfc-5147-plain-text-line-positions-given-as-uri-fragment)

*   [W3C 现有技术调查：现有 URI 片段方案](http://www.w3.org/2008/WebVideo/Fragments/wiki/Existing_Technologies_Survey)

*   [在协作混搭中聚合媒体片段 (pdf)](http://www.w3.org/2013/04/odw/ODW13-CrossLinks-Pres.pdf)

*   [RFC 编程 RFC 的存储库，具有直接链接部分甚至行的能力？](https://stackoverflow.com/questions/2819935/1113772)

# python - python排序键是否保证只被调用一次？

> ID：13391553
> 
> 赞同：12
> 
> 时间：2012-11-15T04:23:52.477
> 
> 标签：python, sorting

在回答[另一个问题](https://stackoverflow.com/a/13391422/748858)时，我最终创建了一个 sortkey 函数，该函数修改了字典以保存状态，然后该状态将用于排序中的后续项目。

虽然我的回答*似乎*有效，但我的问题是：在 python 文档中实际上是否定义了每个对象只能调用一次排序键？这是 Cpython 的实现细节吗？还是排序键实际上不止一次被调用，而我得到正确答案只是出于运气？

国家的文件[`sorted`](http://docs.python.org/2/library/functions.html#sorted)：

> key 指定一个参数的函数，用于从每个列表元素中提取比较键：key=str.lower。默认值为None（直接比较元素）

我不认为这意味着`key`每个元素只会调用一次......但它可以在其他地方说明。

显然我问，因为这会对任何有副作用的排序键产生影响。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-15T04:30:47.987

从您链接的文档部分：

> 通常，密钥和反向转换过程比指定等效 cmp 函数要快得多。这是因为 cmp 为每个列表元素调用多次，而**key 和 reverse 只触摸每个元素一次**。

这似乎是一个“是”......

# php - PHP 如何用于解析主题和插件的注释/标题？

> ID：13391556
> 
> 赞同：6
> 
> 时间：2012-11-15T04:24:08.717
> 
> 标签：php, wordpress, parsing, documentation, comments

Wordpress 插件和主题在顶部有这样的评论：

```
/**
 * @package Akismet
 */
/*
Plugin Name: Akismet
Plugin URI: http://akismet.com/?return=true
Description: Used by millions, Akismet is quite possibly the best way in the world to <strong>protect your blog from comment and trackback spam</strong>. It keeps your site protected from spam even while you sleep. To get started: 1) Click the "Activate" link to the left of this description, 2) <a href="http://akismet.com/get/?return=true">Sign up for an Akismet API key</a>, and 3) Go to your <a href="admin.php?page=akismet-key-config">Akismet configuration</a> page, and save your API key.
Version: 2.5.6
Author: Automattic
Author URI: http://automattic.com/wordpress-plugins/
License: GPLv2 or later
*/ 
```

当您访问管理界面中的插件页面时，插件列表如下：

[screenshot-with-shadow.png http://img854.imageshack.us/img854/4526/screenshotwithshadow.png](http://img854.imageshack.us/img854/4526/screenshotwithshadow.png)

这是文档的标准语法吗？我假设它对`file_get_contents`插件文件进行了读取以读取它们，但是 Wordpress 如何将其解析为可在 PHP 中使用的可操作的标准化信息？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-15T04:57:45.470

请参阅WordPress 解析器[`get_plugin_data()`](http://codex.wordpress.org/Function_Reference/get_plugin_data)。`wp-admin/includes/plugin.php`更具体地说，提取发生[`get_file_data()`](http://codex.wordpress.org/Function_Reference/get_file_data)在`wp-includes/functions.php`：

```
function get_file_data( $file, $default_headers, $context = '' ) {
        // We don't need to write to the file, so just open for reading.
        $fp = fopen( $file, 'r' );

        // Pull only the first 8kiB of the file in.
        $file_data = fread( $fp, 8192 );

        // PHP will close file handle, but we are good citizens.
        fclose( $fp );

        // Make sure we catch CR-only line endings.
        $file_data = str_replace( "\r", "\n", $file_data );

        if ( $context && $extra_headers = apply_filters( "extra_{$context}_headers", array() ) ) {
                $extra_headers = array_combine( $extra_headers, $extra_headers ); // keys equal values
                $all_headers = array_merge( $extra_headers, (array) $default_headers );
        } else {
                $all_headers = $default_headers;
        }

        foreach ( $all_headers as $field => $regex ) {
                if ( preg_match( '/^[ \t\/*#@]*' . preg_quote( $regex, '/' ) . ':(.*)$/mi', $file_data, $match ) && $ma
                        $all_headers[ $field ] = _cleanup_header_comment( $match[1] );
                else
                        $all_headers[ $field ] = '';
        } 
```

在 WP 之外也有类似的实现。请参阅 [如何设计插件系统，以免浪费太多资源？](https://stackoverflow.com/questions/8954773/how-can-plugin-systems-be-designed-so-they-dont-waste-so-many-resources/8958463#8958463)例如。

# c# - 可以在 lambda 表达式上映射到属性的列吗？

> ID：13391558
> 
> 赞同：0
> 
> 时间：2012-11-15T04:24:19.527
> 
> 标签：c#, .net

我用价格解析表，我创建了配置列映射的类 IConfig，因为它与价格文件不同，并且需要将列映射到对象属性

```
CsvParserConfig config = new CsvParserConfig();
config.MapColumn("col1", x => x.Sku); 
```

lambda表达式可以吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T05:16:14.183

如果我理解正确 - 您需要将列名映射到某个属性。您可以使用反射来做到这一点。

周围有很多例子（谷歌第一次点击：[.Net Get property name](https://stackoverflow.com/questions/3341666/net-get-property-name)），它们允许您从 lambda 函数获取属性的名称。代替返回字符串，您可以将其配置为返回一个实例，`PropertyInfo`以便您可以从运行时确定的属性中提取值。

# c# - 来自 CakePHP 家伙的 ASP.NET MVC 4 / SimpleMembership 问题

> ID：13391560
> 
> 赞同：1
> 
> 时间：2012-11-15T04:24:42.567
> 
> 标签：c#, entity-framework, asp.net-mvc-4, simplemembership

我对 ASP.NET MVC（和一般的 .NET）非常陌生。我正在尝试将一个具有一些 CRUD 功能的基本网站组合在一起，但我被 EF 和 SimpleMembership 绊倒了。我花了几个小时寻找好的入门信息，但似乎 MVC 4 太新了，没有成熟的内容（我能理解）。

现在提问！

如果我想添加一些模型，例如 Jobs 和 Applications，我应该将它们全部集中在一个单一的整体文件中，还是将每个模型分解为自己的文件？

我应该有多少数据库上下文？会是这个样子吗？

```
public class MyContext : DbContext
{
    public DbSet<Job> Jobs { get; set; }
    public DbSet<Application> Applications { get; set; }
} 
```

UsersContext（来自 SimpleMembership）是否应该与我为模型创建的上下文分开？

如果我想拥有从工作到用户（例如海报和接受者）的多个“导航属性”（正确使用？），我会这样做吗？

```
public class Job
{
    public int JobId { get; set; }

    public virtual User Poster { get; set; }
    public virtual User Taker { get; set; }
} 
```

与上一个问题相关，如果我使用 SimpleMembership 并将我的模型和 UsersContext 的上下文分开（我认为我应该，如果我错了，请纠正我），我如何跨上下文边界进行引用？

回答这些问题真的会帮助我起步！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T04:46:15.757

每个类都应该有自己的 cs 文件，其名称与类的名称匹配：

作业.cs

应用程序.cs

MyContext.cs

每个数据库都应该有一个 DbContext。因此，如果您希望所有这些表都在同一个数据库中，那么您需要一个 DbContext。

跨上下文的任何引用 AFAIK 都不会得到支持。您可以添加 int 外键属性，并使用属性 [NotMapped] 创建引用，并在从每个数据库中分别获取两个实体时手动分配它们。即 `if(someJob.PosterKey == someUser.UserKey) { someJob.Poster = someUser }`。不过会有点痛。

编辑：我可能要做的第一件事就是将 UsersContext 类从 AccountsModel 文件中取出，并使其成为自己的文件。通常我以我的应用程序命名上下文。因此，如果我的应用程序名为 Jobs Manager，我将调用上下文 JobsManagerContext 并将其放入 JobsManagerContext.cs 文件中（我还将更改连接字符串以命名我的 db JobsManager）。您可以将所有帐户模型类保留在第一个文件意义上，它们都是一起生成的。但是为每个新模型类创建一个新文件。

# python - 无法使用我创建的用户登录 django 的管理页面

> ID：13391561
> 
> 赞同：1
> 
> 时间：2012-11-15T04:24:45.763
> 
> 标签：python, django

我按照 django 教程所说的做了，但我仍然无法使用我创建的用户登录 localhost:8000/admin/。我检查了数据库，没有用户名'admin'。我通过以下方式创建了用户：

```
from django.contrib.auth.models import User
u = User.objects.get(username__exact='john')
u.set_password('new password')
u.save() 
```

任何人都可以帮助我吗？请。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T15:18:48.530

syncdb 通常创建/更新数据库，因此从您的声明中：

> 我检查数据库，没有用户名'admin'

我知道您一定以某种方式创建了您的数据库。第一次运行 syncdb 时，系统会要求您创建一个超级用户。在那里，您应该插入您的凭据。

但是，如果您丢失了这部分，您可以稍后使用 django shell：

```
python manage.py shell 
```

这将打开一个加载了 django 环境的 python shell。在该 shell 中创建管理员用户，如下所示：

```
from django.contrib.auth.models import User
u = User(username='admin', is_superuser=True, is_staff=True)
u.set_password('admin')
u.save() 
```

请注意，*is_staff* 必须为真，您的新用户才能登录管理区域，*is_superuser* 也必须为真，用户才能拥有所有权限。

然后转到 localhost:8000/admin/ 并使用新的“管理员”用户登录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T04:38:22.430

从[教程的第二部分开始](https://docs.djangoproject.com/en/dev/intro/tutorial02/#activate-the-admin-site)，您需要执行以下三件事来启用管理站点。你有没有想念他们中的任何一个？

1.  在 INSTALLED_APPS 设置中取消注释“django.contrib.admin”。

2.  运行 python manage.py syncdb。由于您已将新应用程序添加到 INSTALLED_APPS，因此需要更新数据库表。

3.  编辑您的 mysite/urls.py 文件并取消注释引用管理员的行 - 总共有三行需要取消注释。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T04:35:14.827

我建议你再次完成整个过程，因为你显然错过了一些东西。只是从头开始。你会看到你错过了什么。

PS 如果您有用户名 john，则不能有与用户名 admin 相同的用户。

我想你可能已经忽略了运行**python manage.py syncdb**

# jquery - 如何在 jQuery 中为 getJSON 设置缓存 false？

> ID：13391563
> 
> 赞同：82
> 
> 时间：2012-11-15T04:25:22.723
> 
> 标签：jquery, jquery-ui, getjson, browser-cache

我正在使用`getJSON`从服务器端获取结果但面临浏览器缓存问题。我希望缓存为假。我在`getJSON`打电话之前尝试使用它。

```
 $.ajaxSetup({
                cache: false
            }) 
```

但我没有得到预期的结果。它仍然显示旧的结果。

我还确定了一些其他解决方案，例如使用`.ajax`，但我真的不想使用它。

* * *

## 回答 #1

> 赞同：131
> 
> 时间：2012-12-03T08:25:48.310

您的代码只需要一个触发器即可启用它。

这将允许您在以后的所有 ajax 中禁用缓存

```
$(document).ready(function() {
  $.ajaxSetup({ cache: false });
}); 
```

希望能帮助到你 ：）

* * *

## 回答 #2

> 赞同：86
> 
> 时间：2013-09-18T18:54:49.613

您可以使用任何一个，这将全局禁用缓存：

```
$(document).ready(function() {
  $.ajaxSetup({ cache: false });
}); 
```

或者，而不是`$.getJSON`，仅为此类请求禁用缓存：

```
$.ajax({
    cache: false,
    url: "/path/to.json",
    dataType: "json",
    success: function(data) {
        ...
    }
}); 
```

* * *

## 回答 #3

> 赞同：51
> 
> 时间：2015-08-11T17:52:29.463

semente 和 bonenatch 的答案是正确的，但如果你想使用 $.getJSON 和其他地方利用它的缓存（你不想为所有调用将缓存设置为 false），但你想破坏缓存只是为了单次调用，您可以将时间戳注入到 $.getJSON() 的数据属性中。通过向请求的查询字符串添加唯一值，请求将始终是唯一的，不会被浏览器缓存——您将始终获得最新数据。

长版：

```
var ts = new Date().getTime();
var data = {_: ts};
var url = '/some/path.json';

$.getJSON(url, data); 
```

多合一版本：

```
$.getJSON('/some/path', {_: new Date().getTime()}); 
```

两者都会导致以下请求：

```
/some/path.json?_=1439315011130 
```

其中末尾的数字是调用代码时的时间戳，因此始终是唯一的。

# twitter-bootstrap - Twitter Bootstrap轮播不同高度图像导致弹跳箭头

> ID：13391566
> 
> 赞同：68
> 
> 时间：2012-11-15T04:25:38.653
> 
> 标签：twitter-bootstrap, carousel

我一直在使用 Bootstrap 的轮播类，到目前为止它一直很简单，但是我遇到的一个问题是不同高度的图像会导致箭头上下反弹以适应新的高度。

这是我用于轮播的代码：

```
<div id="myCarousel" class="carousel slide">
    <div class="carousel-inner">
        <div class="item active">
            <img src="image_url_300height"/>
            <div class="carousel-caption">
                <h4>...</h4>
                <p>...</p>
            </div>
        </div>
        <div class="item">
            <img src="image_url_700height" />
        </div>
    </div>
    <!-- Carousel nav -->
    <a class="carousel-control left" href="#myCarousel" data-slide="prev">&lsaquo;</a>
    <a class="carousel-control right" href="#myCarousel" data-slide="next">&rsaquo;</a>
</div> 
```

这个[jsfiddle](http://jsfiddle.net/dsummersl/5BMr8/5/)也说明了这个问题（诚然不是我的，我在尝试解决这个问题时在一个单独的问题上发现了这个！）

我的问题是：如何强制轮播保持在固定高度（小提琴中的第二个缩略图）并将较小的图像居中，同时将标题和箭头保持在相对于轮播的静态位置？

* * *

## 回答 #1

> 赞同：92
> 
> 时间：2012-11-21T16:10:12.217

看起来像 bootstrap less/CSS 强制自动高度以避免在宽度必须更改以响应时拉伸图像。我切换它以使宽度自动并固定高度。

```
<div class="item peopleCarouselImg">
  <img src="http://upload.wikimedia.org/...">
  ...
</div> 
```

然后我用这样的类定义 img `peopleCarouselImg`：

```
.peopleCarouselImg img {
  width: auto;
  height: 225px;
  max-height: 225px;
} 
```

我将高度固定为 225 像素。我让宽度自动调整以保持纵横比正确。

这似乎对我有用。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2014-02-12T07:45:23.117

试试这个（我正在使用[SASS](http://sass-lang.com/)）：

```
/* SASS */
.carousel {
  max-height: 700px;
  overflow: hidden;

  .item img {
    width: 100%;
    height: auto;
  }
} 
```

如果您愿意，可以将其包装`.carousel`成 a 。`.container`

```
/* CSS */
.carousel {
  max-height: 700px;
  overflow: hidden;
}

.carousel .item img {
  width: 100%;
  height: auto;
} 
```

关键是要保持高度一致。这就是`max-height`限制更大图像的地方。

或者，您可以将图像设置为背景图像，让您在高度和图像位置上更加灵活（例如`background-size`、`background-position`等）

为了响应，您需要使用媒体查询。

编辑：谢谢大家，不知道这仍在搜索中。投票帮助其他开发者！

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2017-01-25T21:49:30.620

尝试使用规范化引导轮播幻灯片高度的 jQuery 代码

```
function carouselNormalization() {
  var items = $('#carousel-example-generic .item'), //grab all slides
    heights = [], //create empty array to store height values
    tallest; //create variable to make note of the tallest slide

  if (items.length) {
    function normalizeHeights() {
      items.each(function() { //add heights to array
        heights.push($(this).height());
      });
      tallest = Math.max.apply(null, heights); //cache largest value
      items.each(function() {
        $(this).css('min-height', tallest + 'px');
      });
    };
    normalizeHeights();

    $(window).on('resize orientationchange', function() {
      tallest = 0, heights.length = 0; //reset vars
      items.each(function() {
        $(this).css('min-height', '0'); //reset min-height
      });
      normalizeHeights(); //run it again 
    });
  }
}

/**
 * Wait until all the assets have been loaded so a maximum height 
 * can be calculated correctly.
 */
window.onload = function() {
  carouselNormalization();
}
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2019-04-28T21:27:58.167

您还可以使用此代码调整所有轮播图像。

```
.carousel-item{
    width: 100%; /*width you want*/
    height: 500px; /*height you want*/
    overflow: hidden;
}
.carousel-item img{
    width: 100%;
    height: 100%;
    object-fit: cover;
} 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2017-03-09T14:06:15.353

这是对我有用的解决方案；我这样做是因为轮播中的内容是从用户提交的内容动态生成的（所以我们不能在样式表中使用静态高度）——这个解决方案也应该适用于不同大小的屏幕：

```
function updateCarouselSizes(){
  jQuery(".carousel").each(function(){
    // I wanted an absolute minimum of 10 pixels
    var maxheight=10; 
    if(jQuery(this).find('.item,.carousel-item').length) {
      // We've found one or more item within the Carousel...
      jQuery(this).carousel(); // Initialise the carousel (include options as appropriate)
      // Now we iterate through each item within the carousel...
      jQuery(this).find('.item,.carousel-item').each(function(k,v){ 
        if(jQuery(this).outerHeight()>maxheight) {
          // This item is the tallest we've found so far, so store the result...
          maxheight=jQuery(this).outerHeight();
        }
      });
      // Finally we set the carousel's min-height to the value we've found to be the tallest...
      jQuery(this).css("min-height",maxheight+"px");
    }
  });
}

jQuery(function(){
  jQuery(window).on("resize",updateCarouselSizes);
  updateCarouselSizes();
} 
```

从技术上讲，这不是响应式的，但出于我的目的，这`on window resize`使得它具有响应性。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2017-05-03T17:57:56.980

如果有人正在狂热地谷歌搜索以解决弹跳图像轮播问题，这对我有帮助：

```
.fusion-carousel .fusion-carousel-item img {
    width: auto;
    height: 146px;
    max-height: 146px;
    object-fit: contain;
} 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2014-01-08T09:35:36.393

前面给出的解决方案导致图像对于轮播框来说可能太小了。控制碰撞问题的正确解决方案是覆盖 Bootstraps CSS。

原始代码：

```
.carousel-control {
top: 40%;
} 
```

在您自己的样式表中使用固定值覆盖变量（在我的设计中使用了 300px）：

```
.carousel-control {
top: 300px;
} 
```

希望这能解决您的问题。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2016-12-20T09:49:37.307

在你的页脚中包含这个 JavaScript（加载 jQuery 之后）：

```
$('.item').css('min-height',$('.item').height()); 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2015-01-22T21:17:09.817

如果您想在不固定高度的情况下使用任何高度的图像，只需执行以下操作：

```
$('#myCarousel').on("slide.bs.carousel", function(){
     $(".carousel-control",this).css('top',($(".active img",this).height()*0.46)+'px');
     $(this).off("slide.bs.carousel");
}); 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2015-07-28T18:07:10.927

最近我正在为 Bootstrap 轮播测试这个 CSS 源

设置为 380 的高度应设置为等于正在显示的最大/最高图像...

```
/* CUSTOMIZE THE CAROUSEL
-------------------------------------------------- */

/* Carousel base class */
.carousel {
  max-height: 100%;
  max-height: 380px;
  margin-bottom: 60px;
  height:auto;
}
/* Since positioning the image, we need to help out the caption */
.carousel-caption {
  z-index: 10;
    background: rgba(0, 0, 0, 0.45);
}

/* Declare heights because of positioning of img element */
.carousel .item {
  max-height: 100%;
  max-height: 380px;
  background-color: #777;
}
.carousel-inner > .item > img {
 /*  position: absolute;*/
  top: 0;
  left: 0;
  min-width: 40%;
  max-width: 100%;
  max-height: 380px;
  width: auto;
  margin-right:auto;
  margin-left:auto;
  height:auto;

} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2019-12-30T18:14:58.313

请注意，此处标准化高度的 jQuery 解决方案可能会与 IE 冲突。

经过一些测试（使用 Bootstrap 3）后，看起来 IE 不会费心调整图像大小，除非它们实际上正在被渲染。如果您使窗口变小，则活动项目的图像会调整大小，但背景图像会保留它们的高度，因此“最高”高度保持不变。

在我的例子中，我们只在这些项目上渲染图像，并且图像只有几个像素。所以我选择使用活动图像的高度来设置所有图像的样式。其他所有内容都会调整大小以适应高度，因此如果您的纵横比变化很大，请记住这一点。

```
 function carouselNormalization() {
        var items = $('.carousel .item');

        if (items.length) {
            function normalizeHeights() {
                let activeImageHeight = items.filter('.active').find('img').height();
                items.each(function() {
                    $(this).find('img').css('height',  activeImageHeight + 'px');
                });
            };
            normalizeHeights();

            $(window).on('resize orientationchange', function() {
                items.each(function() {
                    $(this).find('img').removeAttr('style');
                });
                normalizeHeights();
            });
        }
    }
    $(window).on('load', carouselNormalization); 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2016-07-18T22:43:03.710

您可以在 css 文件中使用以下行：

```
ul[rn-carousel] {
 > li {
 position: relative;
 margin-left: -100%;

 &:first-child {
   margin-left: 0;
   }
  }
} 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2018-08-28T19:44:59.633

这个 jQuery 函数对我来说效果最好。我在 WordPress 主题中使用 bootstrap 4，并且使用了完整的 jQuery 而不是 jQuery slim。

```
// Set all carousel items to the same height
function carouselNormalization() {

    window.heights = [], //create empty array to store height values
    window.tallest; //create variable to make note of the tallest slide

    function normalizeHeights() {
        jQuery('#latest-blog-posts .carousel-item').each(function() { //add heights to array
            window.heights.push(jQuery(this).outerHeight());
        });
        window.tallest = Math.max.apply(null, window.heights); //cache largest value
        jQuery('#latest-blog-posts .carousel-item').each(function() {
            jQuery(this).css('min-height',tallest + 'px');
        });
    }
    normalizeHeights();

    jQuery(window).on('resize orientationchange', function () {

        window.tallest = 0, window.heights.length = 0; //reset vars
        jQuery('.sc_slides .item').each(function() {
            jQuery(this).css('min-height','0'); //reset min-height
        }); 

        normalizeHeights(); //run it again 

    });

}

jQuery( document ).ready(function() {
    carouselNormalization();
}); 
```

资源：

[https://gist.github.com/mbacon40/eff3015fe96582806da5](https://gist.github.com/mbacon40/eff3015fe96582806da5)

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2017-10-18T05:28:02.397

```
 .className{
 width: auto;
  height: 200px;
  max-height: 200px;
   max-width:200px
   object-fit: contain;
} 
```

# html - 奇怪的 URL 行为

> ID：13391575
> 
> 赞同：0
> 
> 时间：2012-11-15T04:27:06.887
> 
> 标签：html, ajax, url, url-rewriting

我想知道这些天网站如何管理他们的内容和 AJAX 调用。

Facebook 怎么会有这样的 URL：http: [//www.facebook.com/zuck](http://www.facebook.com/zuck)

[像http://www.facebook.com/zuck/](http://www.facebook.com/zuck/)这样在 zuck 的末尾没有 /

这显然非常方便，因为他们实际上不需要创建名为 zuck 的子目录。

我也注意到像[http://hypem.com/popular](http://hypem.com/popular)这样的地方也在这样做。对他们来说很方便，因为他们能够不间断地运行他们的媒体播放器，并且他们不需要在 URL 中包含 #。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T04:47:18.407

**它被称为 nice-url 或 URL-Rewrite。**

*您可以遍历对index.php*的所有请求，然后您可以`$_SERVER['REQUEST_URI']`在 PHP中处理它。

您需要在站点的根目录下创建一个名为*.htaccess的文件。*这是我正在使用的代码，它将图像、图标和其他一些资源排除在范围之外：

```
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteBase /
    RewriteCond %{REQUEST_URI} !^/phpmyadmin/
    RewriteRule !\.(ico|gif|jp?g|png|pdf|doc?|xls?|ppt?)$ index.php [L]
</IfModule> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T04:32:15.197

这种 URL 主要使用 .htaccess 文件中的 Apache 重定向规则，您会看到类似 domain.com/example 的内容，但在后端它实际上意味着将其重定向到类似

domain.com/subdirectory/maybe-anotherone/example.php

所以他们不希望用户看到他们系统的确切模式。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-15T04:35:11.410

这是[URL 重写](http://en.wikipedia.org/wiki/Rewrite_engine)功能。

可能有各种实现，但基本上它是由网络服务器完成的，获取请求路径（例如`/zuck/`or `/popular/songs/whatever`），而不是在该路径中查找文件，而是将其解析为参数（可能在 HTTP 堆栈中或以后定义了规则）。

因此`http://www.facebook.com/zuck`，在服务器内部就相当于`http://www.facebook.com/profile.php?id=zuck`（或类似的东西）。

# r - For-loops：如何处理 R 中的三个迭代变量？

> ID：13391578
> 
> 赞同：0
> 
> 时间：2012-11-15T04:27:23.663
> 
> 标签：r, for-loop, iteration

这是问题的最小表示。假设我有一个矩阵`Y`，并且我试图`X`根据我对 中的元素执行的操作来填充矩阵`Y`。因为`Y`是一个大矩阵，我想`X`在一个 for 循环中填充相同的矩阵（为了节省时间和更少的数据结构来处理）。这是我到目前为止所拥有的。假设我的第一个 for 循环的条件是正确且必要的。

```
Y<- matrix(nrow= 109, ncol = 10064)
X<- matrix(nrow= 109, ncol = 10058)
k<- 1

# I want to start at the 7th column of Y and skip every other column
for (j in seq(7, 10058, 2)){ # this is how I want it to loop; this loops 5029 times

# assign new_values based on the column pairs in Y; ie look in each column pairf of Y 
# and create new values based on the columns pairs in Y: Y[,j] and Y[,j+1]

 for (i in 1:109){
    #if (Y[i,j] == new_value_1){
    #   X[i,k]<- 0
    #}
    #else if (Y[i,j] == new_value_2){
    #   X[i,k]<- 1
    #}
    #else if (Y[i,j] == new_value_3){
    #   X[i,k]<- 2
    #}
  }
 k<- k + 1
} 
```

矩阵中的内容`X`并不`Y`重要。`new_values`不重要。这是我需要帮助的矩阵中的**索引。**`X`如果您运行上面的代码，您会注意到循环结束时`i`is `109`（这是正确的）但`k`仅迭代到`5027`or `5028`。换句话说，代码只填充了矩阵的*一半*。我希望 k 迭代到，`10058`以便我可以`X`正确填充矩阵。有人可以帮我解决这个问题吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T05:02:22.237

虽然我不知道如何应用于`ifelse`这个问题，但这似乎可以解决问题。

```
Y<- matrix(nrow= 109, ncol = 10064)
X<- matrix(nrow= 109, ncol = 10058)
k<- 1

for (j in seq(7, 10058, 2)){
    for (o in 1:2){
        for (i in 1:109){

        }
     }
   k<- k+1
   }
 } 
```

在循环结束时`k`现在`10058`就像我想要的那样。而且`i`还在`109`。

# json - 如何重命名 JSON 密钥

> ID：13391579
> 
> 赞同：89
> 
> 时间：2012-11-15T04:27:28.953
> 
> 标签：json

我有一个包含以下内容的 JSON 对象：

```
[
  {
    "_id":"5078c3a803ff4197dc81fbfb",
    "email":"user1@gmail.com",
    "image":"some_image_url",
    "name":"Name 1"
  },
  {
    "_id":"5078c3a803ff4197dc81fbfc",
    "email":"user2@gmail.com",
    "image":"some_image_url",
    "name":"Name 2"
  }
] 
```

我想将“_id”键更改为“id”，这样它就会变成

```
[
  {
    "id":"5078c3a803ff4197dc81fbfb",
    "email":"user1@gmail.com",
    "image":"some_image_url",
    "name":"Name 1"
  },
  {
    "id":"5078c3a803ff4197dc81fbfc",
    "email":"user2@gmail.com",
    "image":"some_image_url",
    "name":"Name 2"
  }
] 
```

我将如何使用 Javascript、jQuery 或 Ruby、Rails 来做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：109
> 
> 时间：2012-11-15T04:32:57.470

1.  解析 JSON

```
const arr = JSON.parse(json); 
```

2.  对于 JSON 中的每个对象，重命名键：

```
obj.id = obj._id;
delete obj._id; 
```

3.  将结果字符串化

全部一起：

```
function renameKey ( obj, oldKey, newKey ) {
  obj[newKey] = obj[oldKey];
  delete obj[oldKey];
}

const json = `
  [
    {
      "_id":"5078c3a803ff4197dc81fbfb",
      "email":"user1@gmail.com",
      "image":"some_image_url",
      "name":"Name 1"
    },
    {
      "_id":"5078c3a803ff4197dc81fbfc",
      "email":"user2@gmail.com",
      "image":"some_image_url",
      "name":"Name 2"
    }
  ]
`;

const arr = JSON.parse(json);
arr.forEach( obj => renameKey( obj, '_id', 'id' ) );
const updatedJson = JSON.stringify( arr );

console.log( updatedJson );
```

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2012-11-15T04:31:57.607

在这种情况下，最容易使用字符串替换。序列化 JSON 将无法正常工作，因为 _id 将成为对象的属性名称，并且更改属性名称并非易事（至少在大多数语言中不是这样，在 javascript 中并没有那么糟糕）。而是做；

```
jsonString = jsonString.replace("\"_id\":", "\"id\":"); 
```

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2016-03-16T08:11:06.447

正如[evanmcdonnal](https://stackoverflow.com/users/763585/evanmcdonnal)所提到的，最简单的解决方案是将其处理为字符串而不是 JSON，

```
var json = [{"_id":"5078c3a803ff4197dc81fbfb","email":"user1@gmail.com","image":"some_image_url","name":"Name 1"},{"_id":"5078c3a803ff4197dc81fbfc","email":"user2@gmail.com","image":"some_image_url","name":"Name 2"}];

json = JSON.parse(JSON.stringify(json).split('"_id":').join('"id":'));

document.write(JSON.stringify(json));
```

这会将给定的 JSON 数据转换为字符串，并将“_id”替换为“id”，然后将其转换回所需的 JSON 格式。但我使用`split`and`join`而不是`replace`, 因为`replace`只会替换第一次出现的字符串。

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2019-06-24T16:52:45.240

试试这个：

```
let jsonArr = [
    {
        "_id":"5078c3a803ff4197dc81fbfb",
        "email":"user1@gmail.com",
        "image":"some_image_url",
        "name":"Name 1"
    },
    {
        "_id":"5078c3a803ff4197dc81fbfc",
        "email":"user2@gmail.com",
        "image":"some_image_url",
        "name":"Name 2"
    }
]

let idModified = jsonArr.map(
    obj => {
        return {
            "id" : obj._id,
            "email":obj.email,
            "image":obj.image,
            "name":obj.name
        }
    }
);
console.log(idModified); 
```

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2019-12-04T12:19:14.827

`JSON.parse`有两个参数。第二个参数reviver是一个transform函数，可以格式化我们想要的输出格式。[请参阅此处](http://www.ecma-international.org/ecma-262/6.0/index.html#sec-json.parse)的ECMA 规范。

在复活功能中：

*   如果我们返回 undefined，原始属性将被删除。
*   `this`是包含作为此函数处理的属性的对象，属性名称为字符串，属性值作为此函数的参数。

```
const json = '[{"_id":"5078c3a803ff4197dc81fbfb","email":"user1@gmail.com","image":"some_image_url","name":"Name 1"},{"_id":"5078c3a803ff4197dc81fbfc","email":"user2@gmail.com","image":"some_image_url","name":"Name 2"}]';

const obj = JSON.parse(json, function(k, v) {
    if (k === "_id") {
        this.id = v;
        return; # if return  undefined, orignal property will be removed
    }
    return v;
});

const res = JSON.stringify(obj);
console.log(res) 
```

输出：

```
[{"email":"user1@gmail.com","image":"some_image_url","name":"Name 1","id":"5078c3a803ff4197dc81fbfb"},{"email":"user2@gmail.com","image":"some_image_url","name":"Name 2","id":"5078c3a803ff4197dc81fbfc"}] 
```

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2017-07-03T13:51:30.897

如果要重命名某个键的**所有出现**，可以使用带有 g 选项的正则表达式。例如：

```
var json = [{"_id":"1","email":"user1@gmail.com","image":"some_image_url","name":"Name 1"},{"_id":"2","email":"user2@gmail.com","image":"some_image_url","name":"Name 2"}];

str = JSON.stringify(json); 
```

现在我们在 str 中有字符串格式的 json。

**使用带有g**选项的正则表达式将所有出现的“_id”替换为“id” ：

```
str = str.replace(/\"_id\":/g, "\"id\":"); 
```

并返回json格式：

```
json = JSON.parse(str); 
```

现在我们有了带有所需键名的 json。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2019-05-23T13:36:34.590

通过使用地图功能，您可以做到这一点。请参考下面的代码。

```
var userDetails = [{
  "_id":"5078c3a803ff4197dc81fbfb",
  "email":"user1@gmail.com",
  "image":"some_image_url",
  "name":"Name 1"
},{
  "_id":"5078c3a803ff4197dc81fbfc",
  "email":"user2@gmail.com",
  "image":"some_image_url",
  "name":"Name 2"
}];

var formattedUserDetails = userDetails.map(({ _id:id, email, image, name }) => ({
  id,
  email,
  image,
  name
}));
console.log(formattedUserDetails); 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2018-04-03T09:54:50.607

如果您的对象如下所示：

```
obj = {
    "_id":"5078c3a803ff4197dc81fbfb",
    "email":"user1@gmail.com",
    "image":"some_image_url",
    "name":"Name 1"
   } 
```

JavaScript 中最简单的方法可能是：

```
obj.id = obj._id
del object['_id'] 
```

结果，您将获得：

```
obj = {
    "id":"5078c3a803ff4197dc81fbfb",
    "email":"user1@gmail.com",
    "image":"some_image_url",
    "name":"Name 1"
   } 
```

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2019-04-29T15:09:32.987

可以，使用 typeScript

```
function renameJson(json,oldkey,newkey) {    
 return Object.keys(json).reduce((s,item) => 
      item == oldkey ? ({...s,[newkey]:json[oldkey]}) : ({...s,[item]:json[item]}),{})   
} 
```

示例：[https ://codepen.io/lelogualda/pen/BeNwWJ](https://codepen.io/lelogualda/pen/BeNwWJ)

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2020-04-08T09:16:49.767

如果有人需要动态执行此操作：

```
const keys = Object.keys(jsonObject);

keys.forEach((key) => {

      // CREATE A NEW KEY HERE
      var newKey = key.replace(' ', '_');

      jsonObject[newKey] = jsonObject[key];
      delete jsonObject[key];
   }); 
```

`jsonObject`现在将拥有新密钥。

重要的：

如果您的密钥没有被`replace`函数更改，它只会将其从数组中取出。您可能想在`if`其中放置一些语句。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2021-06-14T05:11:20.537

如果要替换 JSON 对象的键，请使用以下逻辑

```
const student= {
  "key": "b9ed-9c1a04247482",
  "name": "Devaraju",
  "DOB" : "01/02/2000",
  "score" : "A+"
}
let {key, ...new_student} = {...student}
new_student.id= key

console.log(new_student)
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2017-11-23T11:21:41.257

例如，如果您想动态地执行此操作，您有一个数组，您想将其用作 JSON 对象的键：

你的数组会像：

```
var keys = ["id", "name","Address","Phone"] // The array size should be same as JSON Object keys size 
```

现在你有一个 JSON 数组，如：

```
var jArray = [
  {
    "_id": 1,
    "_name": "Asna",
    "Address": "NY",
    "Phone": 123
  },
  {
    "_id": 2,
    "_name": "Euphoria",
    "Address": "Monaco",
    "Phone": 124
  },
  {
    "_id": 3,
    "_name": "Ahmed",
    "Address": "Mumbai",
    "Phone": 125
  }
]

$.each(jArray ,function(pos,obj){
    var counter = 0;
    $.each(obj,function(key,value){
        jArray [pos][keys[counter]] = value;
        delete jArray [pos][key];
        counter++;
    })  
}) 
```

您生成的 JSON 数组将如下所示：

```
[
  {
    "id": 1,
    "name": "Asna",
    "Address": "NY",
    "Phone": 123
  },
  {
    "id": 2,
    "name": "Euphoria",
    "Address": "Monaco",
    "Phone": 124
  },
  {
    "id": 3,
    "name": "Ahmed",
    "Address": "Mumbai",
    "Phone": 125
  }
] 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2021-08-17T11:08:02.043

试试这个

```
function renameKey ( obj, oldKey, newKey ) {
  obj[newKey] = obj[oldKey];
  delete obj[oldKey];
} 
```

# facebook - 对不同的对象类型使用 Like 操作

> ID：13391582
> 
> 赞同：0
> 
> 时间：2012-11-15T04:28:01.353
> 
> 标签：facebook, facebook-graph-api, facebook-like, facebook-opengraph

我们在用户可以喜欢文章的内容消费门户上使用 Open Graph Actions。我们还希望将自定义点赞操作与点赞按钮相关联。问题在于，根据新的 FB 指南，我们不应为构建它的任何操作创建自定义操作，并且内置操作与对象类型“对象”相关联。我们如何将它与作为我们的自定义对象的“文章”相关联，我们如何调用 Post API 以便故事像“XYZ 喜欢一篇文章”而不是“XYZ 喜欢一个对象”

请帮忙

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T09:20:14.487

内置喜欢正是您正在寻找的：[https ://developers.facebook.com/docs/opengraph/actions/builtin/likes/](https://developers.facebook.com/docs/opengraph/actions/builtin/likes/)

您创建一个 Like 动作，然后将其与您选择的对象相关联！

# ftp - 与其他 ip（地点）中的 sftp 连接是错误的？

> ID：13391583
> 
> 赞同：1
> 
> 时间：2012-11-15T04:28:29.373
> 
> 标签：ftp, amazon-web-services, amazon-ec2, sftp

在 aws ubuntu 中，我经常在家中连接 sftp，连接良好，但我尝试在校园中使用同一台笔记本电脑连接 sftp。连接因套接字错误而中断（#10053 软件导致连接中止）你能帮帮我吗？请。

# php - 全文搜索不起作用

> ID：13391584
> 
> 赞同：0
> 
> 时间：2012-11-15T04:28:32.210
> 
> 标签：php, mysql, full-text-search

我正在尝试实现全文搜索，因为我希望允许用户输入一串文本并找到最匹配的结果。我使用在线教程制作了一个，但它们似乎不起作用。

这是数据库创建语句：分隔符 $$

```
CREATE TABLE `word_list` (
  `item_id` int(11) NOT NULL,
  `item_name` text,
  `item_tags` text,
  `item_description` varchar(255) NOT NULL DEFAULT 'none',
  `item_added_by` varchar(45) NOT NULL DEFAULT 'system',
  `item_display` int(1) NOT NULL DEFAULT '1',
  PRIMARY KEY (`item_id`),
  FULLTEXT KEY `word_list` (`item_name`,`item_tags`),
  FULLTEXT KEY `item_name` (`item_name`,`item_tags`)
) ENGINE=MyISAM DEFAULT CHARSET=latin1$$ 
```

这是我的代码：

```
<?php
error_reporting(E_ALL ^ E_NOTICE);

$_POST['search'] = 'red';
//if we got something through $_POST
if (isset($_POST['search'])) {
$searchQ = $_POST['search'];
$link = mysql_connect('localhost', '', '');
mysql_select_db("", $link);
$res = mysql_query("SELECT * from word_list WHERE MATCH (item_name, item_tags) AGAINST('$searchQ')", $link);
echo mysql_errno($link) . ": " . mysql_error($link) . "\n";

$ant = mysql_num_rows($res);
    if ($ant > 0) { // query provided results – display results
    echo ("<br/><h2>Search results for \"$searchQ\":</h2>");
        while ($result = mysql_fetch_array($res)) {
            echo ("<h3>{$result['name']} ({$result['score']})</h3>{$result['description']}<br/><br/>");
        }
    } else { // query provided 0 results – display 0 hit message
    echo ("Sorry... Searching for \"$searchQ\" gave no results");
    }
}
?> 
```

请让我知道我做错了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T05:14:34.197

我认为问题是 - MySQL Ignoring Small Words in Full-Text Search Using MATCH AGAINST，看看这个博客 [http://biostall.com/mysql-ignoring-small-words-in-full-text-search-using - 对战](http://biostall.com/mysql-ignoring-small-words-in-full-text-search-using-match-against)。

# php - 在 codeigniter 中调用 load 函数时出现问题

> ID：13391585
> 
> 赞同：0
> 
> 时间：2012-11-15T04:29:03.967
> 
> 标签：php, codeigniter

我在 codeigniter 中加载视图并`$this->load->view('login');`在我的控制器中调用。但它给了我以下错误

```
 Severity: Notice

 Message: Undefined property: Login::$load

 Filename: controllers/login.php

 Line Number: 6

 Fatal error: Call to a member function view() on a non-object in /Applications/XAMPP/xamppfiles/htdocs/membership_system/application/controllers/login.php on line 6 
```

这是我的控制器

```
 class Login extends CI_Controller {

public function index() {
    $this->load->view('login'); //<-- error is on this line
}

public function login() {

}

public function register() {

}
} 
```

我怎么解决这个问题？

**更新**

当我将类名从更改为时`Login`，`Something_login`这有效，但只有`Login`它给了我以上错误。为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T04:41:43.910

函数的名称必须与您的类名称不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T10:11:05.427

这是 PHP 的“限制”——它是 PHP 4 的向后兼容性功能，您没有，`__construct()`并且与类名匹配的方法名作为类构造函数执行。

如果你把一个 PHP5 风格的构造函数改为调用，你可能可以绕过这个问题，只要确保在其中调用父构造函数：

```
public function __construct()
{
     parent::__construct();
} 
```

此外，如果您在命名空间内，情况也不会如此，但 CodeIgniter 目前不使用这些来与旧 PHP 版本兼容。

# android - 安卓手机到手机通讯离线模式

> ID：13391590
> 
> 赞同：1
> 
> 时间：2012-11-15T04:29:57.627
> 
> 标签：android

一般问题。我正在考虑编写一个 Android 应用程序，它的通信方式很像国际象棋游戏。玩家一打开他的国际象棋应用程序，将他的“移动”发送给第二个玩家。第二个玩家可能会断电或其他任何情况（即他离线），所以这不是实时交换。玩家 2 最终上线并接收玩家 1 的“移动”。现在不使用需要第三方服务器的 GCM，有没有办法进行移动到移动通信交换。我正在考虑只使用带有附件的电子邮件。但也许有更好的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T04:40:01.177

对此的正常答案是使用服务器——将招式发送到服务器，并从中下载招式。让客户端每隔几分钟 ping 服务器以检查移动。没有服务器，我唯一能想到的就是短信。问题是 SMS 可能会大大延迟或无序发送。

那么为什么不想使用服务器呢？这确实是正确的答案，无论是使用 GCM 还是标准的 Web 服务。

# jquery - 根据打印时间是否早于今天以及其他 td 的值为空来更改 td 的 css

> ID：13391591
> 
> 赞同：0
> 
> 时间：2012-11-15T04:30:03.487
> 
> 标签：jquery, parsing, date

我有两件不同的事情要做。我需要根据以下条件更改 td 的 CSS：

1.  打印日期是否早于今天，并且
2.  这个旁边的td是否为空

这是我的表：

```
<table><tr>
<td>October 27, 2012</td>
<td id="assigned">Yes</td>
</tr>
<tr>
<td>November 14, 2012</td>
<td id="assigned"></td>
</tr>
</table> 
```

我知道我可以`<td>`使用 jQuery 检查是否为空。我也知道我可以解析屏幕上的日期。但我似乎无法让 jQuery 遍历表中的每一行。这是我拥有的代码：

```
$(document).ready(function () {
$('#myTable tr').each(function(i){
var today = new Date();
var d = Date.parse($("#dueDate").text());
if(d < today && $("td#assigned").text()==""){
$("#dueDate").css("background-color","red");
}});
}); 
```

我是不是摇摆不定？我看着这个，我想，它看起来应该可以工作，但事实并非如此。任何帮助，将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T04:35:30.503

看起来问题似乎是由于您的 HTML 中的重复**ID**引起的。HTML 页面中的 ID 应该是唯一的。

相反，您可以使用`.eq()`and`$(this)`来搜索 td

```
$(document).ready(function() {
    $('#myTable tr').each(function(i) {
        var $this = $(this);
        var $dueDate = $this.find('td:eq(0)');
        var $assigned = $this.find('td:eq(1)');
        var today = new Date();
        var d = Date.parse( $dueDate.text());
        if (d < today && $assigned.text() == "") {
            $duedate.css("background-color", "red");
        }
    });
});​ 
```

**[小提琴](http://jsfiddle.net/sushanth009/wsJML/)**

# spring - Spring JUnit 测试问题

> ID：13391603
> 
> 赞同：1
> 
> 时间：2012-11-15T04:31:43.653
> 
> 标签：spring, exception, junit, datasource

我有我的 AbstractResourceTest 类

```
@ContextConfiguration(locations = { "classpath*:betty/spring/dataSourceContextTest.xml", "classpath*:betty/spring/persistentContextTest.xml", "classpath*:betty/spring/applicationContextTest.xml" })
public class AbstractResourceTest extends AbstractTransactionalJUnit4SpringContextTests {
     @Autowired
     protected HibernateTemplate hibernateTemplate;
     protected long mpId, t1, t2, t3, t4, r1, r2, r3, r4, otuId, ofpId, ponId, teId, mp1, mp2, mp3, md1;
     protected int validationRuleCount;

     private static final SimpleDateFormat dateFormatter = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");

  and so on... 
```

和 dataSourceContextTest.xml 如下

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://www.springframework.org/schema/beans
                    http://www.springframework.org/schema/beans/spring-beans-2.5.xsd">

<bean id="dataSource" class="com.mchange.v2.c3p0.ComboPooledDataSource" destroy-method="close">
    <property name="driverClass" value="com.mysql.jdbc.Driver" />
    <property name="jdbcUrl" value="jdbc:mysql://localhost:3386/betty_junit" />
    <property name="user" value="root" />
    <property name="password" value="admin" />

    <property name="acquireIncrement" value="1"></property>
    <property name="minPoolSize" value="10"></property>
    <property name="maxPoolSize" value="100"></property>
    <property name="acquireRetryAttempts" value="10"></property>
    <property name="preferredTestQuery" value="SELECT 1 FROM DUAL"></property>
    <property name="testConnectionOnCheckin" value="true"></property>
    <property name="testConnectionOnCheckout" value="false"></property>
    <property name="maxIdleTime" value="50"></property>
    <property name="idleConnectionTestPeriod" value="30"></property>
</bean> 
```

但是当我运行测试时，我遇到了错误

```
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'be.belgacom.rosy.betty.dbaccess.repositoryImpl.MeasurementRepositoryImplTest': Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire method: public void org.springframework.test.context.junit4.AbstractTransactionalJUnit4SpringContextTests.setDataSource(javax.sql.DataSource); nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No matching bean of type [javax.sql.DataSource] found for dependency: expected at least 1 bean which qualifies as autowire candidate for this dependency. Dependency annotations: {}
at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:285)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1074)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireBeanProperties(AbstractAutowireCapableBeanFactory.java:374)
at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:110)
at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:75)
at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:321)
at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.createTest(SpringJUnit4ClassRunner.java:220)
at org.springframework.test.context.junit4.SpringJUnit4ClassRunner$1.runReflectiveCall(SpringJUnit4ClassRunner.java:301)
at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.methodBlock(SpringJUnit4ClassRunner.java:303)
at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:240)
at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:49)
at org.junit.runners.ParentRunner$3.run(ParentRunner.java:193)
at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:52)
at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:191)
at org.junit.runners.ParentRunner.access$000(ParentRunner.java:42)
at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:184)
at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)
at org.junit.runners.ParentRunner.run(ParentRunner.java:236)
at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:180)
at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)
 Caused by: org.springframework.beans.factory.BeanCreationException: Could not autowire method: public void org.springframework.test.context.junit4.AbstractTransactionalJUnit4SpringContextTests.setDataSource(javax.sql.DataSource); nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No matching bean of type [javax.sql.DataSource] found for dependency: expected at least 1 bean which qualifies as autowire candidate for this dependency. Dependency annotations: {}
at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredMethodElement.inject(AutowiredAnnotationBeanPostProcessor.java:589)
at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:84)
at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:282)
... 26 more
 Caused by: org.springframework.beans.factory.NoSuchBeanDefinitionException: No matching bean of type [javax.sql.DataSource] found for dependency: expected at least 1 bean which qualifies as autowire candidate for this dependency. Dependency annotations: {}
at org.springframework.beans.factory.support.DefaultListableBeanFactory.raiseNoSuchBeanDefinitionException(DefaultListableBeanFactory.java:920)
at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:789)
at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:703)
at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredMethodElement.inject(AutowiredAnnotationBeanPostProcessor.java:547)
... 28 more 
```

我的 xml 被加载到 [src\test\resources\betty\spring]

有人可以帮忙吗？我验证了 mysql 连接属性，它们完全正确。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T04:51:11.853

这不是解决方案，但由于您使用的是 spring 3，请更改此：

```
http://www.springframework.org/schema/beans/spring-beans-2.5.xsd 
```

至：

```
http://www.springframework.org/schema/beans/spring-beans.xsd 
```

或者：

```
http://www.springframework.org/schema/beans/spring-beans-3.0.xsd 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T05:43:08.503

您是否在 config.xml 文件中定义了您的 bean？

# android - 在所有应用程序之上绘制一个 Android 画布？

> ID：13391604
> 
> 赞同：6
> 
> 时间：2012-11-15T04:31:43.803
> 
> 标签：android, android-service, android-view

我怀疑这是不可能的，考虑到 Android 的性质，但有没有办法创建显示在所有应用程序之上的各种视图（可能使用 Canvas 对象？）？

我对这个项目的意图不是恶意的。我为 Windows 创建了一些[简单的滤色器软件](http://www.musatcha.com/software/ColorFilter/)，它只是在所有窗口的顶部添加一个窗口，该窗口填充了用户选择的颜色，并且不透明度低。这会在屏幕上添加浅色，帮助患有 Scoptopic Sensitivity Syndrome 的用户长时间使用电脑。我想做这个软件的安卓版本。例如：

![适用于 Android 的滤色器示例](../Images/c7fca5aa29a30541a0aecc425b7445de.png)

左边的图像是原图，右边的图像是我想要实现的。

有什么办法可以用Android做到这一点吗？我知道该应用程序必须作为系统服务运行，以便它不会意外停止，但据我所知，一般无法在其他应用程序之上的屏幕上进行绘制。如果可能，您能否建议研究哪些 API？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-15T05:24:57.433

以下是我认为可能有效的方法：

您将需要以下值：

> 红色、绿色、蓝色、Alpha 和对比度 (r,g,b,a,c)

使用滑块后将它们存储在首选项中：

```
 private SharedPreferences pref;
  //In onCreate..
  this.pref = getSharedPreferences("pref", 0);
  //Method to save the values in Preferences
  private void save()
  {
    SharedPreferences.Editor localEditor = this.pref.edit();
    localEditor.putInt("a", this.a);
    localEditor.putInt("r", this.r);
    localEditor.putInt("g", this.g);
    localEditor.putInt("b", this.b);
    localEditor.putInt("c", this.c);
    localEditor.commit();
  } 
```

定义一个扩展视图并用于在画布上绘制应用值的层类。

```
import android.view.View;
import android.graphics.Canvas;
import android.content.Context;

public class Layer extends View
{
  private int a;
  private int b;
  private int g;
  private int r;

  public Layer(Context context){
    super(context)
  }

  protected void onDraw(Canvas canvas){
    super.onDraw(canvas);
    canvas.drawARGB(this.a, this.r, this.g, this.b);
  }

  public void setColor(int a, int r, int g, int b){
    this.a = a;
    this.r = r;
    this.g = g;
    this.b = b;
    invalidate();
  }
} 
```

接下来编写一个服务来处理这些值的变化并将它们应用到窗口。

```
public class ScreenAdjustService extends Service
{
     //Handle everything here
} 
```

//声明用于应用存储在 Prefs 私有静态层视图中的值的视图；... 公共静态 int r; 公共静态int b；公共静态int g；公共静态int a；公共静态int c；

在 onCreate 方法中，

获取先前存储在首选项中的值，

```
SharedPreferences localSharedPreferences = getSharedPreferences("pref", 0);
a = localSharedPreferences.getInt("a", 0);
r = localSharedPreferences.getInt("r", 0);
g = localSharedPreferences.getInt("g", 0);
b = localSharedPreferences.getInt("b", 0);
c = localSharedPreferences.getInt("c", 0); 
```

设置用于设置检索值的视图，

```
view = new Layer(this);
redView = new Layer(this);
... 
```

将这些视图添加到窗口

```
//Pass the necessary values for localLayoutParams
WindowManager.LayoutParams localLayoutParams = new WindowManager.LayoutParams(...);
WindowManager localWindowManager = (WindowManager)getSystemService("window");
localWindowManager.addView(view, localLayoutParams);
localWindowManager.addView(redView, localLayoutParams);
localWindowManager.addView(greenView, localLayoutParams); 
```

编写可重用的方法

```
public static void setAlpha(int alpha){
        //Handle all conditions
        view.setColor(alpha, 0, 0, 0);
}
public static void setContrast(int contrast){
    //Handle all conditions
    view.setColor(c, 100, 100, 100);
}

public static void setRGB(int r, int g, int b){
    //Handle all conditions
    redView.setColor(r, 255, 0, 0);
    greenView.setColor(g, 0, 255, 0);
    blueView.setColor(b, 0, 0, 255);
} 
```

使用服务类在必要时调用这些方法

```
ScreenAdjustService.setRGB(MyActivity.this.r, MyActivity.this.g, MyActivity.this.b);
ScreenAdjustService.setAlpha(MyActivity.this.a);
ScreenAdjustService.setContrast(MyActivity.this.c); 
```

不要忘记在 Manifest xml 文件中声明您的服务

```
<service android:name=".ScreenAdjustService " /> 
```

当我在飞行中做这件事时，我可能错过了一两件事，但我认为应该这样做。

# grails - “grails 控制台”和“grails”之间的区别，然后是“控制台”

> ID：13391605
> 
> 赞同：4
> 
> 时间：2012-11-15T04:31:47.383
> 
> 标签：grails, groovy, grails-orm, grails-2.0, groovy-console

我刚开始学习 Grails，我正在尝试使用 grails 控制台来玩数据库，但我注意到 running`grails console`和 running之间存在差异`grails`，然后`console`：

`grails console`直接从终端启动时：

```
~/Desktop/Grails-lab/racetrack $ grails console
| Compiling 1 source files..... 
```

在`console`：

```
groovy> import racetrack.* 
groovy> def z = new User(userName:"bangkuangwang",fullName:"noge noge",website:"noge.com",email:"email@email.com",bio:"hello world",password:"123123") 
groovy> z.save() 
groovy> println(z.errors) 
groovy> User.count 

grails.validation.ValidationErrors: 0 errors

Result: 1 
```

* * *

使用 启动时`grails`，然后`console`：

```
~/Desktop/Grails-lab/racetrack $ grails
| Enter a script name to run. Use TAB for completion: 
grails> console
| Compiling 1 source files..... 
```

在`console`：

```
groovy> import racetrack.* 
groovy> def z = new User(userName:"bangkuangwang",fullName:"noge noge",website:"noge.com",email:"email@email.com",bio:"hello world",password:"123123") 
groovy> z.save() 
groovy> println(z.errors) 
groovy> User.count 

Exception thrown

groovy.lang.MissingMethodException: No signature of method: racetrack.User.save() is applicable for argument types: () values: []
Possible solutions: save(), save(boolean), save(java.util.Map), wait(), last(), any()
at com.springsource.loaded.ri.ReflectiveInterceptor.jlrConstructorNewInstance(ReflectiveInterceptor.java:963)
at racetrack.User.save(User.groovy)
at racetrack.User$save.call(Unknown Source)
at ConsoleScript0.run(ConsoleScript0:3)
at com.springsource.loaded.ri.ReflectiveInterceptor.jlrMethodInvoke(ReflectiveInterceptor.java:1231)
at com.springsource.loaded.ri.ReflectiveInterceptor.jlrMethodInvoke(ReflectiveInterceptor.java:1231) 
```

谁能向我解释为什么启动 grails 控制台的两种方法的行为不同？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T02:34:05.393

看起来像一个错误。我建议您坚持使用“grails 控制台”。

# excel - COUNTIFS 和二维数组

> ID：13391611
> 
> 赞同：2
> 
> 时间：2012-11-15T04:32:46.483
> 
> 标签：excel, excel-formula

我有一个表格，里面有以下格式的信息：

![](../Images/e5a2fb0f935de0551360bd17657ab67f.png)

我制作了一个表格，试图在列之间建立关系；例如，支持中的人数也在安全中（应该返回 2）

作为一个公式，我写了以下内容

> COUNTIFS($A$2:$AA$49,$A53,$A$2:$AA$49,D$52)

其中*$A$2:$AA$49*是整个数据的范围，*$A53*和*D$52*是它应该等同的条件。

然而，无论我尝试什么，我总是产生 0，说明我指的是一个空白单元格。

以下是我要放置的格式。假设*$A53*和*D$52*分别是 Support 和 Implementation。

![](../Images/ce8d0d3241767a8446b32d20cfa6d3c4.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T12:49:49.263

您必须指定列，您可以使用 INDEX/MATCH 来执行此操作，即

`=COUNTIFS(INDEX($A$2:$AA$49,0,MATCH($A53,$A$1:$AA$1,0)),$A53,INDEX($A$2:$AA$49,0,MATCH(D$52,$A$1:$AA$1,0)),D$52)`

注意：标题必须等于单元格内容，因此“其他成员”标题需要变为“其他”以匹配内容（反之亦然）

# c# - 树视图上下文菜单 Wpf

> ID：13391612
> 
> 赞同：1
> 
> 时间：2012-11-15T04:32:50.710
> 
> 标签：c#, wpf, mvvm

我正在尝试将上下文菜单放在树视图项目上。我可以这样实现

```
 <TreeView.ItemTemplate>
                <HierarchicalDataTemplate  ItemsSource="{Binding Path=Nodes}">
                    <DockPanel LastChildFill="True">
                        <TextBlock  Padding="15,0,30,0" Text="{Binding Path=numitems}" TextAlignment="Right"  DockPanel.Dock="Right"/>
                        <TextBlock  Text="{Binding Path=Text}" DockPanel.Dock="Left" TextAlignment="Left">
                             <TextBlock.ContextMenu>
                          <ContextMenu>
                            <MenuItem Header="Rename" />
                            <MenuItem Header="Exlcude"/>

                          </ContextMenu>
    </TextBlock.ContextMenu>
                        </TextBlock> 
                    </DockPanel>
                </HierarchicalDataTemplate> 
```

我想要实现的是 1）当他们单击重命名时，我们应该能够重命名树视图项 2）当他们单击排除时，应该会在排除时打开一个带有树视图项值的新上下文菜单。每个树视图项目都是一个逗号分隔值，例如：Rav4,corolla,Camry,.. 所以当他们点击排除时，这应该会打开一个包含三个项目的上下文。我正在使用 MVVM。那么如何将此值传递给我的视图模型。第二件事是我想将枚举或数组绑定到上下文菜单而不是硬编码任何想法或代码示例，而不是硬编码值

图示：

```
Toyota,Corolla,Camry---->Rename
                        Exclude---> Toyota
                                    corolla
                                    Camry 
```

# c# - 在 wpf 中将新页面居中

> ID：13391614
> 
> 赞同：2
> 
> 时间：2012-11-15T04:33:18.153
> 
> 标签：c#, wpf

我正在尝试使我的程序居中，以便当它更改页面时它将保持居中。就目前而言，它开始居中，但是当我更改页面时，它不再居中。

我尝试使用以下代码，但它不适用于页面。谢谢！

```
this.Left = (SystemParameters.PrimaryScreenWidth / 2) - (this.ActualWidth / 2);

this.Top = (SystemParameters.PrimaryScreenHeight / 2) - (this.ActualHeight / 2); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T05:30:21.437

我对 Page 不太了解，但 Window 确实有属性 WindowStartupLocation ，此属性可以具有三个枚举值之一 1)CenterScreen ，2) Manual ，3) CenterOwner ，因此，如果您希望 MainWindow 位于屏幕中心然后只需将属性设置为

```
<myWindow:CustomPage x:Class="WpfApplication4.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:myWindow="clr-namespace:WpfApplication4"
    Title="MainWindow" Height="800" Width="800" WindowStartupLocation="CenterScreen">
<Grid>

</Grid> 
```

我希望这将有所帮助。

# iphone - 不需要的表格单元格显示

> ID：13391615
> 
> 赞同：1
> 
> 时间：2012-11-15T04:33:20.553
> 
> 标签：iphone, xcode, tablecell

我正在尝试删除这些我没有使用但不知道如何删除的表格单元。我已经指定了我想要多少个单元格，但是这些不需要的单元格一直显示，就像这样；

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
 return 3;
} 
```

![在此处输入图像描述](../Images/93c243dba450500116038c926d41b8bc.png)

有谁知道如何解决这个问题？提前致谢

```
- (UIView *)tableView:(UITableView *)tableView viewForFooterInSection:(NSInteger)section {
if ([self numberOfSectionsInTableView:tableView] == (section+1))
{
    return [UIView new];
}
return nil; 
```

但无济于事，因为我收到一个 sigabrt 错误..这是为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T10:56:22.173

我个人使用以下方法解决了它：

```
- (CGFloat)tableView:(UITableView *)tableView heightForFooterInSection:(NSInteger)section {
    return 0.1;
} 
```

而不是`viewForFooterInSection:`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T04:50:02.137

试试这个

```
 - (void) addFooter
 {
UIView *v = [[UIView alloc] initWithFrame:CGRectZero];

[self.myTableView setTableFooterView:v];

[v release];
} 
```

您可以尝试不同的选项

[消除 UITableView 下面多余的分隔符](https://stackoverflow.com/questions/1369831/eliminate-extra-separators-below-uitableview-in-iphone-sdk)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T05:15:34.513

你有两个选择来做到这一点。

1.  将 tableView 样式设置为`Grouped`( `UITableViewStyleGrouped`)
2.  `tableViewHeight/number of cells`像from`heightForRowAtIndexPath:`方法一样返回单元格高度：

    ```
    - (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
     {
       int tableViewHeght = 720;
        return tableViewHeght * 3;
     } 
    ```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-15T07:26:48.930

你也可以这样做

1.创建一个一对一的 UITableCell 类并将该类附加到 UITableView。2.你的UITableView属性改变BackGroundColour是ClearColour

然后你可以运行并显示

供您参考，您也可以使用背景图像

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-07T10:48:44.260

我已经看到有关使用页眉/页脚或尝试使用分组表视图的答案，一切似乎都很好，而且解决方案也更干净。但我宁愿选择另一个。将您的表格视图分隔符样式指定为无。在你的 cellForRowAtIndexPath 方法中声明一个 UIImageView 实例。制作一个高1px，宽320px的图像，将其设置为image view的图像，并将其添加为cell的子视图，y位置为cell的高度。请记住自动释放图像视图实例。由于完成了相同的自动发布，不会有任何内存问题，而且您可以决定必须在哪些单元格中显示它，从而使其更加灵活。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-12-11T11:11:55.323

我能够通过在我的代码中解决这个问题；

```
 - (float)tableView:(UITableView *)tableView heightForFooterInSection:(NSInteger)section {
// This will create a "invisible" footer
return 0.01f;
 } 
```

希望这对某人有所帮助，和平！

# c - 使用灵活的数组成员释放动态分配的结构

> ID：13391617
> 
> 赞同：3
> 
> 时间：2012-11-15T04:33:43.307
> 
> 标签：c, malloc, dynamic-allocation

我有一个定义如下的数据结构：

```
struct varr {
    int n; //length of data array
    double data[];
}; 
```

数据数组的初始大小必须为 1，但允许增加。

为`struct varr *`我使用的分配空间时

```
struct varr *p = malloc(sizeof(struct varr) + sizeof(double)); 
```

当重新分配空间以增加我使用的数据数组的大小时

```
p = realloc(p, sizeof(struct varr) + p->n * sizeof(double));//p->n having already been set 
```

我的问题是“我应该如何释放分配给这个结构的内存？”

我尝试了一个简单的`free(p);`方法，但这会根据 memcheck 导致内存泄漏。我为此目的构建数据的方式或分配内存的方式是否存在根本性错误？

**==注意==**

我通过使用指针而不是显式声明的数组解决了这个问题。但是，我仍然会对为什么这不起作用的简明答案感兴趣。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-03-01T10:04:10.973

您可能知道，每次调用`malloc`make OS 都会给您一些内存并记住它的大小和属性。因此，如果您调用`free`，您可以清除数组或指针。

例子：

```
char* array = malloc(16 * sizeof(char));
char* single = malloc(sizeof(char));

free(array);
free(single); 
```

如您所见，您总是`free`一对一`malloc`。那是因为操作系统知道您分配了多少字节，它并不关心它是什么类型以及创建了多少个实例。（注意：这就是C++`delete`和`delete[]`C++ 之间存在差异的原因，因为应用程序需要知道要运行哪些析构函数，清理的控制权不仅仅留给操作系统......）

从这里开始，我们可以假设如果我们使用 single 将结构分配为一个块`malloc`，则可以使用单个`free`调用来释放它。

这个例子对我有用，没有任何泄漏：

```
#include <stdlib.h>

typedef struct Array_t
{
    int Length;
    double Data[];
} Array;

Array* create_array(int length)
{
    Array* array = malloc(sizeof(Array) + length * sizeof(double));
    if (array != NULL)
        array->Length = length;

    return array;
}

void delete_array(Array* array)
{
    free(array);
}

int main()
{
    Array* array = create_array(100);
    if (array == NULL)
        return EXIT_FAILURE;

    for (int i = 0; i < array->Length; ++i)
    {
        array->Data[i] = 1.7 * (i + 3);
    }

    delete_array(array);

    return EXIT_SUCCESS;
} 
```

当然，如果您遇到更复杂的事情，例如 John Findlay 示例

```
struct SomeStruct
{
    int Size;
    int* ArrayOfPointers[];
} 
```

你仍然可以在一个结构中创建这个结构`malloc`，例如

```
// *s* contains an array of 14 int pointers (int*)
struct SomeStruct* s = malloc(sizeof(SomeStruct) + 14 * sizeof(int*));
s->Size = 14; 
```

核心问题是虽然这`int* ArrayOfPointers`是一个指针数组，因此要正确初始化它，您还需要

```
// each of the *s*'s int pointers is actually a decayed array of 25 ints
for (int i = 0; i < s->Size; ++i)
    s->ArrayOfPointers[i] = malloc(25 * sizeof(int)); 
```

释放时：

```
for (int i = 0; i < s->Size; ++i)
    free(s->ArrayOfPointers[i]);

free(s); 
```

但关键是，带有 FAM 的结构仍然在一次`free`调用中被释放。该循环正在释放分配的指针数据，相当于释放一个动态分配的二维数组。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-15T04:36:56.800

这看起来完全不对。我认为它应该是这样的：

```
// step 1: Allocate n items:

struct varr * p = malloc(sizeof *p + n * sizeof(double));
if (p) { p->n = n; } 
```

```
// step 2: Reallocate to hold m items:

struct varr * tmp = realloc(p, sizeof *tmp + m * sizeof(double));
if (tmp) { p = tmp;  p->n = m; } 
```

完成后，别忘了说`free(p);`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-26T12:14:53.530

我昨晚遇到了同样的问题。经过几个小时的谷歌搜索后，我在教程中找到了这个非常简单但聪明的答案：

```
void free_struct( THESTRUCT * ts )
{
// free all memory accoiated with our structure
if(ts){
    for(int i = 0; i<ts->count; i++)
        free(ts->str[i]);
    free(ts);
    }
} 
```

[http://www.johnfindlay.plus.com/lcc-win32/Tuts/FlexArrs.htm](http://www.johnfindlay.plus.com/lcc-win32/Tuts/FlexArrs.htm)

# java - Java：如何在一定次数的迭代后暂停输出，直到按下一个键

> ID：13391618
> 
> 赞同：2
> 
> 时间：2012-11-15T04:33:47.800
> 
> 标签：java

我正在为我的一门大学课程学习 Java，我需要知道如何在每 12 次 for 循环迭代后暂停程序的输出。我有一个迭代 360 次的循环，我希望每 12 个项目循环输出输出停止，直到按下一个键。我做了很多搜索，但我发现的所有内容都在更高级的上下文中，我不太明白代码中还发生了什么。这个程序没有 GUI，它非常简单，我可以在这里粘贴所有代码：

```
public class MyMain

{      
    static double principal = 200000.00;
    static double interest = .0575;
    static int term = 360;
    static DecimalFormat currency = new DecimalFormat("###,###.##");

    public static void main(String[] args)
    {

        MortgageCalculator mortgageWeek2 = new MortgageCalculator(principal, interest, term);
        double monthlyPayment = mortgageWeek2.calculate();
        System.out.println("Welcome to my Mortgage Calculator.");
        System.out.println("The principal on this loan is $" + currency.format(principal) + ".");
        System.out.println("The interest on this loan is " + (interest * 100) + "%.");
        System.out.println("The term on this loan is " + term + " months (" + term / 12 + " years).");
        System.out.println("Payments on this loan will be $" + currency.format(monthlyPayment));

        double balanceRemaining = 200000.0;

        for (int i = 0; i < 30 * 12; i++)
        {
            double interestPaid = balanceRemaining * .0575 / 12;
            double principalPaid = monthlyPayment - interestPaid;
            balanceRemaining = balanceRemaining - principalPaid;
            System.out.println("Month " + (i + 1) + " \tPayment Amount: $" + currency.format(monthlyPayment) + 
                    "\tInterest Paid: $" + currency.format(interestPaid) + 
                    " \tPrincipal Paid: $" + currency.format(principalPaid) + 
                    "    \tBalance Remaining: $" + currency.format(balanceRemaining));
        }
      }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T04:43:18.390

将`for`循环分成两段并`input`在外循环中添加一条语句，如下所示：

```
 Scanner input = new Scanner(System.in);
    String userInput = null;
    for (int i = 0; i < 30; i++)
    {
      for (int j = 0; j < 12; j++)
      {
        double interestPaid = balanceRemaining * .0575 / 12;
        double principalPaid = monthlyPayment - interestPaid;
        balanceRemaining = balanceRemaining - principalPaid;
        System.out.println("Month " + (i*12+j + 1) + 
                 " \tPayment Amount: $" + currency.format(monthlyPayment) + 
                "\tInterest Paid: $" + currency.format(interestPaid) + 
                " \tPrincipal Paid: $" + currency.format(principalPaid) + 
                "    \tBalance Remaining: $" + currency.format(balanceRemaining));
      }
      userInput = input.nextLine();
    }
    input.close(); 
```

一旦它停止，您需要按任意字符和返回键或只按返回键。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T04:44:13.397

最好的方法是创建一个执行打印的内部循环（有 12 次迭代），并用一个等待输入的循环包装它。所以你有了

```
Scanner input = new Scanner(System.in);
String in = null;  

for (int j = 0; j < 30; j++) {
      for (int i = 0; i < 12; i++)
      {
        double interestPaid = balanceRemaining * .0575 / 12;
        double principalPaid = monthlyPayment - interestPaid;
        balanceRemaining = balanceRemaining - principalPaid;
        System.out.println("Month " + (i + 1) + " \tPayment Amount: $" + currency.format(monthlyPayment) + 
                "\tInterest Paid: $" + currency.format(interestPaid) + 
                " \tPrincipal Paid: $" + currency.format(principalPaid) + 
                "    \tBalance Remaining: $" + currency.format(balanceRemaining));
    }

    System.out.println("Press any key.");
    in = input.next();

 }
 input.Close(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T04:45:30.777

您可以使用“KeyPress”事件来检查是否按下某个键的天气。您还可以找出按下了哪个键然后您“中断”以停止循环迭代......希望有帮助

这是一个例子

```
public void keyPressed(KeyEvent e) {
    int keyCode = e.getKeyCode();
    switch( keyCode ) { 
        case KeyEvent.VK_UP:
            // handle up 
            break;
        case KeyEvent.VK_DOWN:
            // handle down 
            break;
        case KeyEvent.VK_LEFT:
            // handle left
            break;
        case KeyEvent.VK_RIGHT :
            // handle right
            break;
     }
} 
```

您可以轻松地从互联网上获取任何键的键码。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-15T04:44:29.570

你只需要使用 System.in.read(); 读取用户输入。干杯!

# objective-c - 使用 AutoComplete 时如何防止 NSTextField 或 NSTextView 自动选择第一项

> ID：13391619
> 
> 赞同：1
> 
> 时间：2012-11-15T04:33:54.850
> 
> 标签：objective-c, xcode, osx-mountain-lion

我正在尝试使用自动完成实现一个简单的 NSTextField，它的行为更像是 JQuery UI 自动完成（[http://jqueryui.com/autocomplete/](http://jqueryui.com/autocomplete/)），而不是 NSSearchField 的默认行为。两者之间的区别在于，使用 JQuery UI 时，用户必须手动选择其中一个建议，然后它才会在文本字段中激活，而使用 NS 方法时，会自动选择第一个建议。

原因是我将提供给用户的建议列表与文本不匹配，而是相关的。例如，如果用户输入“app”，而不是建议“apple”，我会建议“fruit”。不幸的是，使用默认行为，如果第一项被自动选择，那么文本字段将在建议后立即更改为“fruit”，这不是所需的行为（我希望它保持为“app”直到用户自己选择“水果”。

是否可以防止自动选择第一项？下面列出了我找到的最接近的解决方案。虽然它确实可以防止文本被覆盖，但我宁愿根本不选择任何项目，因为该列表是有效条目的列表，并且通过显示用户作为第一个项目键入的内容，它会错误地指示输入始终有效。因此，换句话说，我正在尝试使用自动完成功能来加快输入速度并将输入限制为有效条目。

迄今为止找到的最接近的解决方案： [如何防止 NSSearchField 使用第一个自动完成列表条目覆盖输入的字符串？](https://stackoverflow.com/questions/3981439/how-to-prevent-nssearchfield-from-overwriting-entered-strings-using-the-first-au?s=10e576be-a710-41fa-bcc2-42ee6eb64f73)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T05:41:56.780

我想通了。首先在...

```
control:textView:completions:forPartialWordRange:indexOfSelectedItem: 
```

我补充说：

```
*index = -1; 
```

这告诉自动完成不选择任何东西（如此处所述：[NSTextView Class Reference](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/NSTextView_Class/Reference/Reference.html)）

> *指数*
> 
> 输入时，默认值为 0 的整数变量。输出时，您可以将此值设置为返回数组中的索引，指示最初应选择哪个项目。将该值设置为 -1 以指示不应有初始选择。

然后，我遇到的下一个问题是，如果您在搜索字段中输入多个单词，那么自动完成只会替换最后一个单词，而所需的行为是替换整个搜索字符串。为了解决这个问题，我将 NSTextView 子类化并添加了以下方法：

```
-(NSRange) rangeForUserCompletion {
    return NSMakeRange (0, 1);
} 
```

这样可以确保替换整个搜索字符串，而不仅仅是最后一个单词。

# python - 检查行是否存在 _app_ctx Flask SQLite

> ID：13391620
> 
> 赞同：0
> 
> 时间：2012-11-15T04:33:58.977
> 
> 标签：python, api, sqlite, rest, flask

我有以下`get_db()`函数用于获取我的 SQLite 数据库：

```
def get_db():
    top = _app_ctx_stack.top
    if not hasattr(top, 'sqlite_db'):
        top.sqlite_db = sqlite3.connect(app.config['DATABASE'])
    return top.sqlite_db 
```

我相信我不会在这里使用 Python SQLite 游标。如果我执行以下操作：

```
db = get_db()
db.execute('DELETE FROM table_name WHERE id=3')
db.commit() 
```

如何检查 DELETE 中传递的 ID 是否存在？我尝试在 sqlite3.Cursor 中使用 rowcount，但这不适用于我在这里检索数据库的方式。

我将如何检查？如果传递的 ID 不存在，我需要它返回 404。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T18:03:10.157

为什么不先查询ID，如果不存在则抛出404。就像是：

```
cur = g.db.query('select * from table_name where id=3')
if cur.rowcount <= 0:
*    abort(404)
''Run delete command here'' 
```

# algorithm - HMM 前向算法中的下溢

> ID：13391625
> 
> 赞同：5
> 
> 时间：2012-11-15T04:35:05.373
> 
> 标签：algorithm, probability, underflow

我正在为 HMM 实现前向算法来计算给定 HMM 发出给定观察序列的概率。我希望我的算法对下溢具有鲁棒性。我不能在对数空间中工作，因为前向算法需要概率的乘法和加法。避免下溢的最佳方法是什么？

我已经阅读了一些关于此的资料，但我得到的最佳建议是在每个时间步[第 6 节 Here](http://digital.cs.usu.edu/~cyan/CS7960/hmm-tutorial.pdf)缩放概率。在算法结束时，您将不会得到您想要的（观察序列的）确切概率。此外，除非我弄错了，如果您按照上述参考文献中的建议在每个时间步缩放概率，则无法对给定观察序列来自两个不同 HMM 的概率进行有意义的比较（找出哪个一个更有可能输出序列）。有什么建议么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-15T05:33:49.190

在参考末尾的等式 32 中，您将每个概率值 alpha_t(i) 乘以 C_t。所以最后你将最终概率乘以所有 C_t 的乘积。您可以通过跟踪 log(C_t) 的总和来跟踪所有这些。然后最后你可以计算出 log(alpha_t(i)) - SUM_(j <= t)log(C_j) 这会给你最终 alpha_t(i) 的对数概率，或者 log(SUM_t alpha_t(i) ) - SUM_(j <= t)log(C_j) 这将为您提供整个序列的对数概率。

# common-lisp - lisp，递归求和函数

> ID：13391639
> 
> 赞同：-3
> 
> 时间：2012-11-15T04:37:27.400
> 
> 标签：common-lisp

```
(defun recursive-sum (L)
  (if (null L)
  0
  (+ (first L) (recursive-sum L)))) 
```

我的代码有什么问题？

我收到此错误消息：

```
*** - SYSTEM::READ-EVAL-PRINT: variable SUM.LISP has no value
The following restarts are available:
USE-VALUE      :R1      Input a value to be used instead of SUM.LISP.
STORE-VALUE    :R2      Input a new value for SUM.LISP.
ABORT          :R3      Abort debug loop
ABORT          :R4      Abort debug loop
ABORT          :R5      Abort main loop
Break 3 [5]> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T02:11:07.437

考虑到您提供的错误代码，您似乎正在使用一个名为的变量，该变量`SUM.LISP`没有实际值/未在某个点定义。在您的代码中搜索该变量名称，并确保它始终被正确定义并在范围内。如需更多信息，需要更多源代码。

* * *

由于您引用的功能很可能无法正常工作，因此我实现了一个固定版本：

```
(defun recursive-sum (L)
   (if L
      (+ (car L) (recursive-sum (cdr L))) 
      0)) 
```

如评论中所述，您将每次调用的给定列表减少一个元素。

# jquery - jQuery手风琴不起作用

> ID：13391642
> 
> 赞同：1
> 
> 时间：2012-11-15T04:37:38.720
> 
> 标签：jquery, jquery-ui

我很难让 jqueryui 手风琴发挥作用。即使将示例从 jquery 网站复制到 jsfiddle 中，它似乎仍然不起作用。

HTML

```
<div id="accordion">
    <h3><a href="#">First header</a></h3>
    <div>First content</div>
    <h3><a href="#">Second header</a></h3>
    <div>Second content</div>
</div> 
```

js

```
$(document).ready(function() {
    $("#accordion").accordion();
}); 
```

[可在http://jsfiddle.net/FYrBS/103/](http://jsfiddle.net/FYrBS/103/)的 jsfiddle 中查看

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T04:47:03.040

把这个加在头上。它在这里工作。

```
<link rel="stylesheet" href="http://code.jquery.com/ui/1.9.1/themes/base/jquery-ui.css" />
    <script src="http://code.jquery.com/jquery-1.8.2.js"></script>
    <script src="http://code.jquery.com/ui/1.9.1/jquery-ui.js"></script>
    <link rel="stylesheet" href="/resources/demos/style.css" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T04:42:43.747

包括 JQuery UI。下面是CDN

```
<script type="text/javascript" src="http://code.jquery.com/ui/1.9.1/jquery-ui.js"> </script>​ 
```

# android - 如何在 Amazon SDK for android 中运行示例代码？

> ID：13391644
> 
> 赞同：2
> 
> 时间：2012-11-15T04:38:01.110
> 
> 标签：android, amazon-web-services

我已经下载了 aws-android-sdk-1.4.4。我尝试运行 sdk 中提供的示例代码。但我无法运行代码。它甚至没有加载。日食卡住并显示以下错误：

> 无法执行 dex：Java 堆空间
> Java 堆空间

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T04:42:13.290

这是一个日食问题。在您的 eclipse 文件夹中，在文本编辑器中编辑 eclipse.ini。你会看到一条线

-XmsZZZm -XmxZZZm

ZZZ 是 eclipse 将用于不同目的的内存量。增加它直到它起作用。每次更改时都需要重新启动 eclipse。

# asp.net-mvc-4 - AppHarbor 上的 Twilio.MVC ValidateRequest

> ID：13391645
> 
> 赞同：2
> 
> 时间：2012-11-15T04:38:02.947
> 
> 标签：asp.net-mvc-4, appharbor, twilio

我试图让 twilio.MVC 帮助器属性 ValidateRequest 在 AppHarbor 中运行的 MVC 4 控制器上工作。我似乎无法让它工作，我认为这是因为我的应用程序在负载均衡器后面运行。我尝试在调用中提供 UrlOverride 参数，但似乎无法正确设置。假设我的 appharbor 应用程序 url = myapp.apphb.com，我的控制器 = callhandler，我的操作 = handlecall，我应该如何调用 ValidateRequest 属性？

```
ValidateRequest[("MYAUTHTOKEN","myapp.apphb.com")] 
```

似乎不起作用，我经常收到 403 Forbidden 错误。

仅供参考——此时我正在装饰单个 MVC 动作，而不是整个控制器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T03:00:51.667

万一有人遇到同样的问题，我通过将 UrlOverride 指定为命名参数以及控制器和操作来实现这一点，如下所示：

```
ValidateRequest[("MYAUTHTOKEN", UrlOverride="http://myapp.apphb.com/controller/action")] 
```

# selenium - 在 Selenium 中定位选择元素

> ID：13391647
> 
> 赞同：0
> 
> 时间：2012-11-15T04:38:19.310
> 
> 标签：selenium, selenium-rc, selenium-webdriver, selenium-ide

下面是组合框：

```
<TD ALIGN="left" id="oldcontent">
<select name="status" style="width=150" id="newcontentformat"><option value="14" selected="selected">text1</option>
<option value="15">text2</option>
<option value="16">text3</option></select>
</TD> 
```

我需要在组合框/下拉菜单中选择 text2。我使用了以下内容：

```
selenium.select("//select[starts-with(@name,status)","text2"); 
```

我面临的问题是，它给了我一个错误text2 not found。因为在这个同名状态上方可能有其他选择框。所以我需要选择2个下拉/组合框的第二个元素。

请给我解决方案。它很紧急。在此先感谢

另一个td

```
<TD align="left" WIDTH="18%"><FONT ID="oldContent">
<select name="status" onchange="selectTime(this.options[this.selectedIndex].value)" id="newcontentformat">
<option value="" selected="selected"></option>
<option value="1">text100</option>
<option value="2">text200<</option>
<option value="3">text300<</option>
</TD> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T08:35:49.453

您是否尝试过选择标签的 id。

```
selenium.select("//select[@id='newcontentformat']","label=text2");

                               or

selenium.select("//td[@id='oldContent']/select[@id='newcontentformat']","label=text2"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T04:51:12.443

我希望这应该工作

```
selenium.select("//td[@id='oldcontent']/select","label=text2") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T15:41:15.833

出色地。我会尝试使用 css 选择器解决方案：

```
String cssDropdown="select[id='newcontentformat']";
String csstext200="select[id='newcontentformat']>option[value='2']";
driver.findElement(By.cssSelector(cssDropdown)).click();
driver.manage().timeouts().implicitlyWait(1,TimeUnit.SECONDS);
//Thread.sleep(1000);
driver.findElement(By.cssSelector(csstext200)).click(); 
```

第二种方法：如果支持 jQuery，您可以使用以下内容：

```
 JavascriptExecutor js = (JavascriptExecutor) driver;
        StringBuilder stringBuilder = new StringBuilder();
        stringBuilder.append("var x=$(\'"+csstext200+"\');");
        stringBuilder.append("return x.click()");
        (String) js.executeScript(stringBuilder.toString()); 
```

希望能帮助到你

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-16T07:39:35.330

虽然这个解决方案不是绝对的，但它会起作用。您可以使用以下方法找到此下拉列表： //select[@name='Status']/following::select[@name='Status'] 您可以根据下拉列表的数量添加更多关注。你也可以在它之前使用你想倒着开始。请通过 Selenium.1.0.Testing.Tools.Beginners.Guide Ebbok 。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-19T08:58:33.660

WebDriver driver = new InternetExplorerDriver(); driver.get("http://agra.quikr.com/"); driver.findElement(By.xpath("//select[@id='alertcatSelectBox']")).sendKeys("Jobs");

// 对于您的示例 driver.findElement(By.xpath("//select[@name='status']")).sendKeys("text2");

# java - 将一种类型的数组转换为子类型的数组

> ID：13391651
> 
> 赞同：4
> 
> 时间：2012-11-15T04:38:40.697
> 
> 标签：java, oop

我想将数组从一种类型转换为另一种类型。如下所示，我遍历第一个数组中的所有对象并将它们转换为第二个数组类型。

但这是最好的方法吗？有没有一种不需要循环和投射每个项目的方法？

```
public MySubtype[] convertType(MyObject[] myObjectArray){
   MySubtype[] subtypeArray = new MySubtype[myObjectArray.length];

   for(int x=0; x < myObjectArray.length; x++){
      subtypeArray[x] = (MySubtype)myObjectArray[x];
   }

   return subtypeArray;
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-15T04:52:32.427

你应该能够使用这样的东西：

```
Arrays.copyOf(myObjectArray, myObjectArray.length, MySubtype[].class); 
```

然而，这可能只是在引擎盖下循环和投射。

见[这里](https://stackoverflow.com/questions/1115230/casting-object-array-to-integer-array-error)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T04:55:42.140

如果可能的话，我建议与`List`而不是一起工作`Array`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T05:03:01.827

这是如何做到的：

```
public class MainTest {

class Employee {
    private int id;
    public Employee(int id) {
        super();
        this.id = id;
    }
}

class TechEmployee extends Employee{

    public TechEmployee(int id) {
        super(id);
    }

}

public static void main(String[] args) {
    MainTest test = new MainTest();
    test.runTest();
}

private void runTest(){
    TechEmployee[] temps = new TechEmployee[3];
    temps[0] = new TechEmployee(0);
    temps[1] = new TechEmployee(1);
    temps[2] = new TechEmployee(2);
    Employee[] emps = Arrays.copyOf(temps, temps.length, Employee[].class);
    System.out.println(Arrays.toString(emps));
}
} 
```

请记住，您不能反过来做，即您不能将 Employee[] 转换为 TechEmployee[]。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-15T05:03:07.603

如果你喜欢，这样的事情是可能的

```
public MySubtype[] convertType(MyObject[] myObjectArray){
   MySubtype[] subtypeArray = new MySubtype[myObjectArray.length];
   List<MyObject> subs = Arrays.asList(myObjectArray);   
   return subs.toArray(subtypeArray);
} 
```

# python - 正则表达式查询 Python

> ID：13391654
> 
> 赞同：1
> 
> 时间：2012-11-15T04:38:58.370
> 
> 标签：python, regex, screen-scraping

我正在尝试编写一个脚本来抓取一个网站，并且正在使用这个（http://www.theericwang.com/scripts/eBayRead.py）。

但是，我想用它来抓取 ebay 以外的网站，并根据我的需要进行定制。

我对python相当陌生，并且经验有限。

我不确定这条线能实现什么。

```
for url, title in re.findall(r'href="([^"]+).*class="vip" title=\'([^\']+)', lines): 
```

有人可以给我一些指示吗？

如果我将它移植到其他网站，还有什么需要考虑的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T04:45:31.553

我不确定这是否会回答你的问题。但是你可以考虑***使用scrapy*** : [http://scrapy.org](http://scrapy.org)来抓取各种网站。这是一个很好的基础设施，提供了很大的灵活性，并且很容易根据某些特定需求进行定制。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-15T05:08:09.863

一般来说，解析 HTML 最好使用 BeautifulSoup 之类的库，它几乎可以为您处理所有繁重的工作，为您留下更直观的代码。另外，请阅读下面的@Tadeck 链接 - 如果可以避免正则表达式和 HTML，则不应混合使用（轻描淡写）。

至于您的问题，该行使用称为“正则表达式”的东西来查找文本中的匹配模式（在本例中为 HTML）。`re.findall()`是一个返回列表的方法，所以如果我们只关注它：

```
re.findall(r'href="([^"]+).*class="vip" title=\'([^\']+)', lines): 
```

`r`表示以下内容将被解释为“原始”，这意味着反斜杠等字符将按字面意思解释。

```
href="([^"]+) 
```

括号表示一个组（我们在匹配中关心的内容），`[^"]+`意思是“匹配任何不是引用的东西”。正如您可能猜到的那样，该组将返回链接的 URL。

```
.*class="vip" 
```

匹配任何东西（嗯，`.*`几乎任何东西）0 次或更多次（这里可能包括其他标签、链接的结束引号、空格等）。没什么特别的`class="vip"`——它只需要出现。

```
title=\'([^\']+)', lines): 
```

在这里，您会看到一个转义的引用，然后是我们在上面看到的另一个组。这一次，我们将捕获`title`标记后两个撇号之间的任何内容。

这样做的最终结果是您正在遍历所有匹配项的列表，这些匹配项看起来像`(my_matched_link, my_matched_title)`，被传递到`for url, title`，之后进行进一步处理。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-15T05:14:28.260

## 正则表达式不利于解析 HTML

以上是我想与您交流的主要思想。*为什么*，请看这个问题：[RegEx match open tags except XHTML self-contained tags](https://stackoverflow.com/q/1732348/548696)。

简而言之，HTML 可以作为文本进行更改（例如，可以添加新属性，可以更改属性顺序，或者可能会引入一些其他更改），但它会产生与 Web 浏览器解释完全相同的 HTML，而完全破坏你的剧本。

HTML 应该使用专门的 HTML 解析器或网络爬虫来解析。当差异变得重要时，他们知道差异。

## 刮痧用什么？

有多种解决方案，但最值得注意的解决方案之一是：[ScraPy](http://scrapy.org/)。试试看，你可能会开始爱上它。

# jquery - JQuery如何遍历到 从与后代之间

> ID：13391656
> 
> 赞同：1
> 
> 时间：2012-11-15T04:39:28.307
> 
> 标签：jquery, forms, button, traversal, descendant

我想知道，在 JQuery 中，如何在不使用 id 的情况下从选择器获取元素`$('button')`？`<form>`我知道如何使用 id 来获取它，但不知何故我需要上面的方法。

我试过`alert($('button').parent().prev().get(0).nodeName)`弹出窗口`FORM`，这意味着我到了那里。但是当我使用`$('button').parent().prev().get(0).submit()`or`.serialize()`甚至`.attr('name')`时，它不起作用。

结构如下，我有 10 行`<tr>......</tr>`.

```
<table>
    <tr><form name='form' method='POST' autocomplete='on'>
    <td id='df'><button type='button'>Go</button></td>
    <td><input type='reset' value='Clear'/></td>
    <td><input name='date'</td>
    <td><input name='customer'</td>
    .......
    </tr>
</table> 
```

有没有高手可以教教我？？谢谢你=)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T04:54:31.590

你有这个 HTML：

```
<table>
<tr><form name='form' method='POST' autocomplete='on'>
<td id='df'><button type='button'>Go</button></td>
.......
</tr>
</table> 
```

这就是你认为它会产生的结果：

```
<table>
  <tr>
    <form>
      <td>
        <button/>
      </td>
    </form>
  </tr>
</table> 
```

然后`$(...).closest('form')`可能是所需的遍历方法。

这就是谷歌浏览器产生的；它将表单视为行标题（[http://jsfiddle.net/UULtc/](http://jsfiddle.net/UULtc/)）：

```
<table>
  <tr>
    <form/>
    <td>
      <button/>
    </td>
  </tr>
</table> 
```

然后您可以访问表单，`$(...).closest('tr').find('form:first')`但表单不会包含其预期的输入，所以要小心。

您需要更改您的 HTML（如果只有一行，只需将表格包裹在表格周围）。如果您要坚持使用表格，您可能还需要更改 javascript。这是一个想法（未经打磨，未经测试）：

```
$('table button').click(function(){
  $(this)
    .closest('table')
    .find('tr')
    .not($(this).closest('tr'))
    .find('input')
    .attr('disabled', 'disabled')
  ;
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T04:55:26.460

将您的 html 更改为这个，然后尝试。

```
<form name='form' method='POST' autocomplete='on'>
<table>
    <tr>
       <td id='df'><button type='button'>Go</button></td>
       <td><input type='reset' value='Clear'/></td>
       <td><input name='date'</td>
       <td><input name='customer'</td>
    .......
   </tr>
</table>
</form> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T05:00:43.860

我认为这是因为该`.get()`方法返回一个节点，因此您不能在其上调用 jQuery 方法，例如`.submit()`or `.attr()`。

由于您只获得一个元素，因此我认为您不需要`.get()`在提交或获取 name 属性之前使用该方法。

`$('button').parent().prev().attr('name')`实际上给了我你的表格的名字。

# python - 在 Python 中实现中值选择算法的中值

> ID：13391662
> 
> 赞同：0
> 
> 时间：2012-11-15T04:40:20.977
> 
> 标签：python, algorithm, sorting

好的。我放弃。我一直在尝试实现中位数算法的中位数，但我不断得到错误的结果。我知道下面有很多代码，但是找不到我的错误，而且每一块代码都有相当的流程设计。快速排序是我用来对从中位数枢轴选择中获得的中位数进行排序的方法。应该是一个简单的快速排序实现。getMean 只返回给定列表的平均值。

getPivot 是我用来选择枢轴的。它遍历列表，一次取 5 个整数，找到这些整数的平均值，将该平均值放入列表 c，然后找到 c 的中值。这是我用于 dSelect 算法的枢轴。

dSelect 算法在理论上很简单。当列表长度为 1 时，基本案例返回一个项目。否则，就像在快速排序中一样，我遍历列表。如果我当前所在的数字 j 小于枢轴，我将其移动到列表 i 的左侧，并增加 i。如果它更大，我将它移动到列表的右侧，i + 1，并且不增加 i。在遍历整个列表之后，我应该在其正确的索引中拥有枢轴，并且打印语句表明我这样做了。在这一点上，我根据枢轴是否大于或小于我试图找到的位置向左或向右递归。

我不确定此时要测试哪些其他打印语句，所以我正在求助于任何有足够奉献精神来测试这段代码的人。我知道有相关的主题，我知道我可以做更多的打印声明，但相信我，我已经尝试过了。应该是一个简单的算法让我很困惑。

```
def quickSort(m, left, right):
    if right - left <= 1:
        return m
    pivot = m[left]
    i = left + 1
    j = left + 1
    for j in range(j, right):
        if m[j] < pivot:
            m[j], m[i] = m[i], m[j]
            i += 1
        elif m[j] == pivot:
            m[j], m[i] = m[i], m[j]
    print m
    m[left], m[i-1] = m[i-1], m[left]
    m = quickSort(m, left, i-1)
    m = quickSort(m, i, right)
    print m
    return m
def getMedian(list):
    length = len(list)
    if length <= 1:
        return list[0]
    elif length % 2 == 0:
        i = length/2
        return list[i]
    else:
        i = (length + 1)/2
        return list[i]
def getPivot(m):
    c = []
    i = 0
    while i <= len(m) - 1:
        tempList = []
        j = 0
        while j < 5 and i <= len(m) - 1:
            tempList.append(m[i])
            i = i + 1
            j = j + 1
        tempList = quickSort(tempList, 0, len(tempList) - 1)
        c.append(getMedian(tempList))
    c = quickSort(c, 0, len(c) - 1)
    medianOfMedians = getMedian(c)
    return medianOfMedians

def dSelect(m, position):
    pivot = getPivot(m)
    i = 0
    j = 0
    if len(m) <= 1:
        return m[0]
    for j in range(0, len(m)):
        if m[j] < pivot:
            m[j], m[i] = m[i], m[j]
            i += 1
        elif m[j] == pivot:
            m[j], m[i] = m[i], m[j]
        print "i: " + str(i)
        print "j: " + str(j)
    print "index of pivot: " + str(m.index(pivot))
    print "pivot: " + str(pivot) + " list: " + str(m)
    if m.index(pivot) == position:
        return pivot
    elif m.index(pivot) > position: 
        return dSelect(m[0:i], position)
    else:
        return dSelect(m[i:], position - i) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T05:24:40.123

最大的问题是这里的这条线：

```
i = (length + 1)/2 
```

如果 list = [1, 2, 3, 4, 5, 6, 7]，答案应该是 4，即 list[3]。您的版本如下所示：

```
i = (7 + 1) / 2 
```

所以 i 等于 4 而不是 3。偶数长度列表部分的类似问题，尽管这不应该是一个大问题。

# c++ - c++ 整数除法

> ID：13391664
> 
> 赞同：0
> 
> 时间：2012-11-15T04:41:18.110
> 
> 标签：c++, sdl

说我有

```
SDL_Rect rect;
rect.x = 5; // rect.x is of type "Uint16"
int y = 11; 
```

我想执行操作`rect.x/y`。

我想将结果作为浮点数，然后四舍五入到最近的`int`.

像这样的东西：

```
float result = rect.x/y;
int rounded = ceil(result); 
```

我该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T04:42:56.300

投要么要么`rect.x`浮动`y`，然后做除法。这将强制整个除法运算在浮点中进行。

```
float result = rect.x/(float)y;
int rounded = ceil(result); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T04:43:21.153

你需要转换你的变量。

```
float result = (float)rect.x / (float)y;
int rounded = ceil(result); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T04:48:42.793

您可以在没有任何浮点类型的情况下执行此操作。如果`x`和`y`是正整数，则 x 除以 y，四舍五入为`(x+y-1)/y`。

# iphone - 多线程数据库获取xcode

> ID：13391669
> 
> 赞同：1
> 
> 时间：2012-11-15T04:42:09.637
> 
> 标签：iphone, ios, xcode

您好，感谢您提前提供的帮助，

我看过一些帖子，我对多线程有点困惑。看起来这可能很容易，但是我对编程很陌生，所以我仍在努力掌握这一点。

这是从数据库中提取数据的两个调用，它们需要永远保持原样......所以我正在考虑对这些进行多线程处理，直到我可以学习如何为此构建核心数据。现在我正在使用 sqllite 并且数据库涉及 10,000 多个食谱......所以不像我想要的那样快如闪电......

请让我知道您的想法，以及我如何使这些可能同时发生？（如果可能的话）

先感谢您。

```
requestCount++;
[[DataPuller sharedDataPuller] getAllDeletedRecipeList];
[DataPuller sharedDataPuller].target = self;

requestCount++;
[[DataPuller sharedDataPuller] getAllRecipesList];
[DataPuller sharedDataPuller].target = self; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T06:29:09.423

如果您正在使用 SQLite，您可能需要考虑使用[FMDB](https://github.com/ccgus/fmdb)，它 (a) 让您摆脱`sqlite3`调用的麻烦；并且 (b) 提供一个`FMDatabaseQueue`允许您协调来自多个队列的查询，以便数据操作不会相互绊倒。

话虽如此，您建议您遇到重大的性能问题，您希望通过转向 Core Data 或使用 SQLite 进行多线程来解决这些问题。这不太可能。本地数据库操作的性能不佳通常更多地取决于您的应用程序设计（例如，尝试检索所有 10,000 个配方的全部详细信息不太可能是明智的……您可能只想检索唯一标识符，也许只检索那些给定屏幕所需的，然后仅在以后需要时检索给定食谱的详细信息）。对于本地数据库交互，您很少需要考虑多线程实现，而只需设计系统以在演示所需的任何给定点检索尽可能少的信息。

如果您的食谱应用程序出现性能问题，我建议您提交一个更详细的问题，并附上代码示例，以阐明您的特定性能问题。如果多线程不是解决方案的一部分，我也不会感到惊讶。可能，在任何给定点适当使用索引和更明智地检索信息可能更为关键。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T04:54:45.253

以页面的形式从数据库中获取记录；即每页 20 或 50 个食谱。看看 YouTube 应用程序。在 iPhone 上或查看我的应用程序。[HCC助手](http://itunes.apple.com/us/app/hcc-helper/id316131072?mt=8)

# python - Django 投票：按投票排序列表时没有默认管理器错误

> ID：13391674
> 
> 赞同：1
> 
> 时间：2012-11-15T04:42:27.337
> 
> 标签：python, html, django, django-voting

我正在建立一个问答网站并在模板上列出问题。我正在使用 django-voting 对列表中的每个问题进行上/下投票，并且我想按票数从高到低的顺序显示问题。

我将 Django Generic Aggregation 添加到我的应用程序中，并收到此错误：

```
'GenericForeignKey' object has no attribute '_default_manager' 
```

怎么了？

这是我的模型：

```
#models.py
    class Question(models.Model):
        movie           = models.ForeignKey(Movie, blank=True, null=True)
        question_text   = models.CharField(verbose_name = "Question", max_length = 100)
        q_pub_date      = models.DateTimeField(auto_now_add = True)
        q_author        = models.ForeignKey(User) 
```

风景：

```
#views.py
    def questions(request, movie_id):
        p     = Movie.objects.get(pk=movie_id)
        k     = Question.objects.filter(movie = p).order_by('-q_pub_date')
        top   = generic_annotate(k, Vote.object, Sum('vote'))
        return render_to_response('qanda/questions.html', 
                            {'the_question':top} 
                            context_instance = RequestContext(request)) 
```

还有我的模板（没有投票表格就删掉了）：

```
#questions.html
{% for question in the_question %}
    <p>{{ question.question_text }}
{% endfor %} 
```

如何摆脱此错误并以正确的顺序显示问题？

# ruby - 如何仅迭代红宝石哈希中的特定值位置？

> ID：13391685
> 
> 赞同：-3
> 
> 时间：2012-11-15T04:45:21.297
> 
> 标签：ruby, hashmap

我知道所有键的第一个值都`@@logHash`包含 IP 地址。如果它不是重复的键，我想只迭代那个位置来为新的哈希创建键。

这是我所拥有的，但我知道它不可能是正确的......

```
def ipaddresses(@@logHash)
    @@ipHash = Hash.new
    @@logHash[1].each_value do | value |
       if @@ipHash.has_key?(value)
          @@ipHash[value] += "#"
       else
          @@ipHash[value] = "#"
       end
       puts ""
       @@ipHash.sort.each { |key,value| puts "The frequency of #{key} is |#{value}"}
    end
end 
```

任何帮助表示赞赏，谢谢！

丽莎

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T04:53:49.780

这是一个可能更接近您想要的重新设计的版本：

```
def ipaddresses(logHash)
  ipHash = Hash.new(0)

  logHash[1].each_value do | value |
    ipHash[value] += 1
    puts ""
  end

  ipHash.sort.each { |key,value| puts "The frequency of #{key} is |#{value}"}
end 
```

目前尚不清楚为什么要`@@`在这样的方法中使用类变量。在任何情况下使用它们都是非常不寻常的。对于临时变量或方法参数，不需要前缀。

这里`Hash.new(0)`创建一个默认值为 的新哈希`0`。这避免了在使用它们之前必须预先初始化键，因为在 Ruby 中添加任何东西都`nil`被认为是无效的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T05:03:09.383

您不能将类变量（或局部变量以外的任何变量）作为参数。这样做没有意义。参数是与方法调用一起传递的东西。如果你想在方法定义中引用一个类变量，你可以直接引用它。通过参数传递它是多余的，因此在设计上是不可能的。

# html - 文本超出 曾在 标签？

> ID：13391690
> 
> 赞同：2
> 
> 时间：2012-11-15T04:45:42.943
> 
> 标签：html, css

我正在尝试做一些非常简单的事情。我希望我的文本保留在我的 `<div>`. 我之前在使用两个浮动`div`s 时遇到了这个问题。我尝试清除它们，并使用自动换行，但这并没有解决问题。所以我把它搁置了，然后转向新的东西。

在创建另一个`div`不浮动的内容时，我注意到一旦将文本放在`<p></p>`标签内，文本就会延伸到标签之外`div`。我知道这一点是因为最初我忘记将文本放在`<p>`标签中，而文本留在了框中。一旦我更正它，文本又延长了。请帮忙。我正在拔头发，因为我知道应该很简单。

旁注：我不想使用`overflow:scroll;`. 我没有足够的文字。

```
#topNews {
    width: 625px;
    height: 220px;
    position: relative;
    font-family: Arial Arial, Helvetica, sans-serif;
    font-size: 14px;
    border-bottom: solid #7e7d7d thin;
    float: left;
    margin-left: -30px;
    margin-top: -15px;
}

#about {
    width: 320px;
    height: 180px;
    position: relative;
    margin-right: 3px;
    margin-left: 3px;
    margin-top: 7px;
    border: dashed red thin;
} 
```

```
<div id="topNews">
    <div id="about">
        <p>Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Suspendisse et turpis sed metus fermentum pellentesque. Vestibulum auctor neque ac nunc elementum malesuada. Praesent non est sed libero vestibulum consectetuer. Sed vehicula. Vivamus quis tellus sit amet erat ultrices luctus. Fusce a ligula. Fusce viverra libero vitae velit.
        </p>              
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T04:57:59.753

它消失了，`div`因为

```
#topNews {  
    width: 625px;  
    height: 220px;  
    position: relative;  
    font-family: Arial Arial, Helvetica, sans-serif;  
    font-size: 14px;  
    border-bottom: solid #7e7d7d thin;   
    float: left;  
    margin-left: -30px;  
    margin-top: -15px;  
} 
```

在您的代码中，您使用 -ve 值指定边距。所以它的起始位置可能在 -ve x 轴上。

使用 +ve x 轴值...比如

```
 margin-left: 0px;  
 margin-top: 0px; 
```

[小提琴链接](http://jsfiddle.net/StXNK/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T05:00:50.927

文本在 div 内，它只是 div 位于您的视图之外，因为您使用了：

```
margin-left: -30px;
margin-top: -15px; 
```

查看此图片：[单击](https://dl.dropbox.com/u/26827941/Screenshot%20from%202012-11-15%2006:02:28.png)（我将 -30 和 -15 编辑为 0 和 0）

为了让您以后的工作更轻松，请使用开发人员工具（默认为 f12）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T04:55:02.840

我刚刚试用了您的示例代码，文本正确包含在 DIV 中..

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-15T05:06:59.160

我认为这会对你有所帮助。

**HTML**

```
<div id="topNews">
    <div id="about">
        <p>Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Suspendisse et turpis sed metus fermentum pellentesque. Vestibulum auctor neque ac nunc elementum malesuada. Praesent non est sed libero vestibulum consectetuer. Sed vehicula. Vivamus quis tellus sit amet erat ultrices luctus. Fusce a ligula. Fusce viverra libero vitae velit.
        </p>              
    </div>

    <div id="about">
        <p>Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Suspendisse et turpis sed metus fermentum pellentesque. Vestibulum auctor neque ac nunc elementum malesuada. Praesent non est sed libero vestibulum consectetuer. Sed vehicula. Vivamus quis tellus sit amet erat ultrices luctus. Fusce a ligula. Fusce viverra libero vitae velit.
        </p>              
    </div>
</div> 
```

**CSS**

```
#topNews{
    width:625px;
    height:220px;
    position:relative;
    font-family:Arial Arial, Helvetica, sans-serif;
    font-size: 14px;
    border-bottom:solid #7e7d7d thin;
}

#about{
    width:200px;
    float:left;
    margin-right:3px;
    margin-left:3px;
    margin-top:7px;
    padding:5px;
    border: dashed red thin;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-15T05:07:52.593

也许你在某处有 css 之后会改变你的 p 标签的大小。此外，如果你有任何宽度为 100%（即：）的东西`width: 100%;`，它总是 100% 加上你的边距/填充的大小，这会使元素突出。

# java - Geotools NAVCONTransform 构造函数

> ID：13391692
> 
> 赞同：2
> 
> 时间：2012-11-15T04:45:53.920
> 
> 标签：java, navigation, transform, geotools

我无法让 NADCONTransform 与 GeoTools-9-SNAPSHOT 一起使用。

我的示例如下所示：

```
String latGridFile = "C:/NADCON/Grids/conus.las"; <BR>
String longGridFile = "C:/NADCON/Grids/conus.los";

NADCONTransform transform = getNadconTransform(latGridFile, longGridFile); 
```

ETC...

我的 getNadconTransform 方法如下所示：

```
public NADCONTransform getNadconTransform(String latGridFile, String longGridFile) {<BR>
        File fLat = new File(latGridFile);<BR>
        File fLong = new File(longGridFile);

        if (!fLat.exists()) {
            throw new IllegalArgumentException(latGridFile +" does not exist");
        }
        if (!fLong.exists()) {
            throw new IllegalArgumentException(longGridFile+" does not exist");
        }

        URI uriLat = fLat.toURI();
        URI uriLong = fLong.toURI();

        NADCONTransform transform = new NADCONTransform(uriLat, uriLong);
                return transform;

    } 
```

conus las 和 los 文件存在，但是当我运行此代码时，出现以下异常：

```
org.opengis.referencing.FactoryException: Could not locate grid file file:/C:/NADCON/Grids/conus.las
    at org.geotools.referencing.operation.transform.NADCONTransform.locateGrid(NADCONTransform.java:248)
    at org.geotools.referencing.operation.transform.NADCONTransform.<init>(NADCONTransform.java:232) 
```

我曾经使用 GeoTools 2.6.4 很好地运行此代码。在那个版本中，代码直接处理 las 和 los 文件的字符串。这个新版本适用于 URI，但似乎不起作用。

有任何想法吗？

# c++ - Sorting an array by increasing frequency of element

> ID：13391695
> 
> 赞同：4
> 
> 时间：2012-11-15T04:46:19.447
> 
> 标签：c++, algorithm, sorting

I would like to sort an array by increasing order of frequency. For example, if I had an array

```
int arr[] = { 3, 3, 10, 2, 5, 10, 10, 2, 2, 2 }; 
```

or another array would have the following sequence in it:

```
int arr[] = {5, 3, 3, 10, 10, 10, 2, 2, 2, 2}; 
```

However, I cannot use hashing or maps – I can only use arrays. What I have thought of is sorting the array using a quick sort algorithm, scanning the sorted array and performing the count in a 2d array so that for each element, there is a count associated with it, and then sorting by count. If two counts are same then I would merely print out the one with the lower value first. I'm having trouble implementing the last two steps. I'm not sure how to "map" a count to an index in the 2d array, nor am I sure on how to sort the 2d array by a count. Could anyone help me out? Thanks!

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T04:52:45.547

Scan your array (sort first to optimize, but not needed), and generate an array of the struct below. Now sort the array of these structs, then regenerate your original array.

```
struct ElemCount {
    int Elem;
    int count;
    bool operator<(const ElemCount& other) {
        if (count!=other.count)
            return count<other.count;

        return Elem<other.Elem;
    }
}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T07:02:59.267

That's how I'd code it without STL (requires additional O(n) memory):

```
// Represents a bunch of equal numbers in an array
struct Bunch
{
  int x;  // value of numbers
  int n;  // count of numbers
};

int cmp_int(const void *x, const void *y)
{
  return *static_cast<const int*>(x) - *static_cast<const int*>(y);
}

int cmp_bunch(const void *x, const void *y)
{
  const Bunch* bx = static_cast<const Bunch*>(x);
  const Bunch* by = static_cast<const Bunch*>(y);
  return (bx->n != by->n) ? bx->n - by->n : bx->x - by->x;
}

void sort_by_freq(int arr[], int arr_size)
{
  // Buffer array to store counted bunches of numbers
  Bunch* buf = new Bunch [arr_size];
  int buf_size = 0;

  // Sort input array
  qsort(arr, arr_size, sizeof(int), cmp_int);

  // Compute bunches
  Bunch bunch;
  bunch.x = arr[0];
  bunch.n = 1;
  for (int i = 1; i < arr_size; ++i)
  {
    if (arr[i] > bunch.x)
    {
      buf[buf_size++] = bunch;
      bunch.x = arr[i];
      bunch.n = 1;
    }
    else
    {
      ++bunch.n;
    }
  }
  buf[buf_size++] = bunch;  // Don't forget the last one!

  // Sort bunches
  qsort(buf, buf_size, sizeof(Bunch), cmp_bunch);

  // Populate bunches to the input array
  int i = 0;
  for (int k = 0; k < buf_size; ++k)
    for (int j = 0; j < buf[k].n; ++j) arr[i++] = buf[k].x;

  // Don't forget to deallocate buffer, since we cannot rely on std::vector...
  delete [] buf;
} 
```

# javascript - 如何使用phonegap localnotification插件清除通知栏上的项目

> ID：13391696
> 
> 赞同：2
> 
> 时间：2012-11-15T04:46:20.320
> 
> 标签：javascript, android, cordova, localnotification

作为标题，我使用的是 android localnotification phonegap 插件。现在我可以在该栏上强制通知，如果我触摸那个，应用程序将重新打开，但该通知仍在通知栏上。

所以这里的问题是，一旦重新打开应用程序，如何清除通知栏上的通知？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T14:37:22.127

在`AlarmReceiver.java`看`AlarmReceiver::onReceive(Context context, Intent intent)`。您必须`AutoCancel`为`Notification`.

根据您使用的 API 版本，这可能看起来不同。对于版本 17，它可能如下所示：

```
final Notification notification = new NotificationCompat.Builder(context)
    .setTicker(tickerText)
    .setSmallIcon( context.getResources().getIdentifier("myicon" , 
                                "drawable", context.getPackageName()) )
    .setWhen(System.currentTimeMillis())
    .setContentTitle(notificationTitle)
    .setContentText(notificationSubText)
    .setContentIntent(contentIntent)
//    .setVibrate(new long[] { 0, 100, 200, 300 })
    .setAutoCancel(true) // <------- here you remove the message 
    .build();

notificationMgr.notify(notificationId, notification); 
```

# java - 如何在android中制作SVG地图？（并在地图上放置标记）

> ID：13391697
> 
> 赞同：1
> 
> 时间：2012-11-15T04:46:35.657
> 
> 标签：java, android, android-layout, svg

我正在为现实生活中的游戏制作应用程序。该应用程序需要使用使用标量矢量图形 (SVG) 的自定义地图。我使用的地图提供了非常准确的细节，例如建筑物内的门位置；这就是为什么我使用 SVG 而不是 maps api。现在我知道有一个 svg 的 api (http://code.google.com/p/svg-android/)，所以我需要帮助：

1）图像必须是可缩放的。使用 SVG 图形的唯一原因是为了干净的缩放。

2) 我需要在 SVG 图像上放置动态标记（图像或带有数字的按钮）。SQL 表有一个图像和一个位置。该表将被更新、添加和删除。我需要将所述图像放置在 SVG 图像之上，并且可能彼此放置。除了坐标和数学，我如何将图像放在彼此之上（不能使用 XML，因为它们不是静态的）。

我需要使用安卓 2.2

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T05:34:28.860

2.2 中的默认浏览器不支持 SVG。您可以定位 Opera Mobile，它对 SVG 和其他新技术的支持要好得多，但它不会是*原生*应用程序。

我尝试的第一步是在 Inkscape 中设计界面，然后您可以从 HTML 引用 .svg 文件并使用 javascript 移动元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-06T05:46:02.143

飞猪，

如果我理解您的问题，您想在手机上显示[这样的 SVG 吗？](http://bienvenue.chateauversailles.fr/fr/chateau/bienvenue#!panel-0-subpanel-15)因此，您可以在该地图上显示用户位置。

我在这里描述了一个可行的解决方案：[添加 SVG Tile Provider](https://stackoverflow.com/questions/23580235/googlemaps-tileprovider-using-a-single-svg-map#_=_)

如果您对 GG 地图还有其他问题，请告诉我

# c++ - 继承错误：“{”标记之前的预期类名

> ID：13391706
> 
> 赞同：2
> 
> 时间：2012-11-15T04:48:24.917
> 
> 标签：c++, class, inheritance

我已经尝试了所有`#include`我能想到的语句组合，但没有任何效果。我正在尝试编写一个基本的继承程序，但我不断收到错误`error: expected class-name before '}' token`，我只是不知道该怎么办了。我试过让我`main()`包含`.cpp`Executive类的文件，但是出现了这个错误。该程序包括 5 种类型的员工都继承自`Employee`该类，我假设它们都是相同的错误：

```
#include <iostream>
#include <string>

#include "Employee.cpp"
#include "Manager.cpp"
#include "Executive.cpp"
#include "Technical.cpp"
#include "Software.cpp"
#include "Test.cpp"

using namespace std;

int main()
{
    Employee emp[3];

    Executive emp0("John", "Doe", "VP", 100000.0, 1000000.0, 2000.0);
    Software emp1("Vincent", "Giuliana", "Project Leader", 150000.0, 200000.0, 1000.0);
    Test emp2("Lauren", "Wallis", "Overseer of Testing", 95000, 115000);

    emp[0] = emp0;
    emp[1] = emp1;
    emp[2] = emp2;

    for(int i=0; i<3; i++)
        emp[i].displayInformation();

    emp0.displayInformation();
    emp1.displayInformation();
    emp2.displayInformation();

    return 0;
} 
```

我的`Employee.h`头文件如下：

```
#ifndef EMPLOYEE_H_INCLUDED
#define EMPLOYEE_H_INCLUDED

#include <string>
#include <iostream>

using namespace std;

class Employee
{
private:
    string fName, lName, jobTitle;
    double baseSalary, salary;

public:
    Employee();
    Employee(string fName, string lName, string jobTitle, double baseSalary);
    void calculateSalary(double baseSalary);
    void displayName();
    void displayBSalary();
    void displayJobTitle();
    void displayInformation();

...
getters
...

...
setters
...
};

#endif // EMPLOYEE_H_INCLUDED 
```

我`Employee.cpp`的是：

```
#include <string>
#include <iostream>

#include "Employee.h"

using namespace std;

Employee::Employee()
{
    fName = "";
    lName = "";
    jobTitle = "";
    baseSalary = 000000;
}

...

void Employee::setBSalary(double bs) //sets base salary as parameter
{
    baseSalary = bs;
} 
```

`Executive.h`头文件类的顶部：

```
#ifndef EXECUTIVE_H_INCLUDED
#define EXECUTIVE_H_INCLUDED

#include <string>
#include <iostream>

//#include "Employee.h"

using namespace std;

class Executive : public Employee
{
private:
    string fName, lName, jobTitle;
    double baseSalary, salary, bonus, stockOption;

public:
...
};

#endif // Executive_H_INCLUDED 
```

最后但并非最不重要的一点是`Executive.cpp`文件... #include #include

```
#include "Executive.h"

using namespace std;

Executive::Executive()
{
    fName = fN;
    lName = lN;
    jobTitle = jt;
    baseSalary = bs;
    bonus = b;
    stockOption = so;
}

...

void Executive::setSO(double so) //sets stock option as parameter
{
    stockOption = so;
} 
```

我想我已经尝试在每个文件中包含每个标题，但仍然没有。任何帮助将不胜感激，我提前非常感谢任何人！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T06:03:15.803

你必须

```
#include "Employee.h" 
```

在 中，因为当一个类从它继承时，`Executive.h`编译器必须看到 的声明。`Employee`因此，只需从`#include`

# javascript - 如何使用 Javascript 提交 2 个表单，其中 1 个提交？1 表单使用“GET”，其他使用“POST”

> ID：13391707
> 
> 赞同：2
> 
> 时间：2012-11-15T04:48:28.660
> 
> 标签：javascript, forms, post, get, form-submit

如果 1 个表单使用“GET”方法而另一个使用“POST”，我如何提交位于同一页面上的 2 个表单。每个表单都有相同的操作并转到相同的下一页。需要帮忙。感谢大家的帮助。

## 我怎样才能得到下面这两种使用不同方法的表单，通过一个按钮提交？

```
<form method="POST" id="Form1" action="nextpage.html">

<input type="text" size="50" name="text_input">

<input type="submit" value="Submit">

<form method="GET" id="Form2" action="nextppage.html">

<input type="text" size="50" name="text_input">

<input type="submit" value="Submit"> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T05:04:00.857

一种方法是为每个表单添加一个隐藏字段。例如，

```
<form action="action.php" method="get">
    <input type="hidden" name="id"  value="form1">
    Username: <input type="text" name="user">
    <input type="submit" value="Submit">
</form>

<form action="action.php" method="post">
    <input type="hidden" name="id" value="form2">
    Username: <input type="text" name="user">
    <input type="submit" value="Submit">
</form> 
```

在您的脚本中，您只需检查一下 id 的值是多少。另一种方法是检查发送到服务器的请求是 post 还是 get。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T05:14:31.707

**递归地使用 AJAX 或将所有数据收集到一个表单中并提交该表单。**

一个简单的表单提交将在第一个实例中重定向您的页面，而第二个实例中的数据将丢失。如果您可以完全控制服务器端，那么您可以只提交带有 POST 数据的表单（在我的示例中），并且您可以在提交之前将`form2`GET 应用于*action属性。*

**我是说：**

```
<form name="form1" id="form1" action="index.php" method="GET">
    <input type="text" name="foo" value="bar" />
    <input type="submit" value="Submit" />
</form>

<form name="form2" id="form2" action="index.php" method="POST">
    <input type="text" name="foo" value="bar" />
</form>

<script type="text/javascript">
    var f = document.getElementById('form1');
    f.onsubmit = function() {
        var t = f.getElementsByTagName('input'),
            l = t.length,
            i = 0,
            r = [];
        for (i = 0; i < l; i++) {
            if (!t[i].name) continue;
            r.push(t[i].name + '=' + encodeURIComponent(t[i].value));
        }
        var p = document.getElementById('form2');
        if (r.length) p.action += '?' + r.join('&');
        p.submit();
        return false;
    }
</script> 
```

但是 AJAX 是一个更好、更优雅的解决方案，它可以在需要时使用新功能轻松扩展，所以我投票支持异步方式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-15T05:16:15.727

用一个按钮使用两个表单真的没有意义，它也不是有效的 html。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-15T05:29:51.883

我会，使用您的 POST 表单提交，发布到页面，但不是发布到页面 nextpage.html，而是发布到类似“nextpage.html?var1=value&var2=value”之类的页面，
您将使用 javascript 的方式：

```
<form method="POST" id="Form1" action="nextpage.html">
<input type="text" size="50" name="text_input">
<input type="button" value="Submit" onclick="push();">
</form>

<form method="GET" id="Form2" action="nextpage.html">
<input type="text" size="50" name="text_input" id="name_input">
<input type="button" value="Submit" onclick="push();">
</form>

<script>
function push() {
    document.getElementById('Form1').action = "nextpage.html?text_input="+document.getElementById('name_input').value;
    document.getElementById('Form1').submit();
}
</script> 
```

这应该可以工作，虽然很混乱，并且要小心有人将 ?、&、= 或其他非字母数字字符放入您要发送到 URL 栏的任何内容中。GET 和 POST 变量将被发送到页面。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-15T05:02:25.263

您应该了解一下 HTTP 的工作原理。浏览器执行一个“请求”，通常是 GET 或 POST，响应正文被解析为 HTML 并显示在 Web 浏览器中。

同时发布两个表单没有任何意义，因为这会启动两个 HTTP 请求。哪一个应该用作浏览器中的新位置？

# jquery - 与 jquery 滑块同步的动画 gif

> ID：13391710
> 
> 赞同：1
> 
> 时间：2012-11-15T04:48:49.363
> 
> 标签：jquery, animated-gif

首先，我是 javascript 和 jquery 编码的初学者，所以请耐心等待我尝试阐明对我来说仍然陌生的概念。

我试图弄清楚如何放置一个将 2 个 gif 组合在一起以与 jquery 文本滑块同步的动画 gif，以便在动画 gif 的第二部分呈现文本（提示和技巧）时会淡入或滑入？

如何定位动画 gif，使其与滑块左对齐？

到目前为止，我已经查看了 simpleslider 和 bxslider 并且我可能忽略了答案，所以任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T05:04:02.273

“如何将动画 gif 定位为与滑块左对齐？”

```
<img src="youanimatedgif.gif" class"left" />
<div id="yourSlider" class="right" ></div> 
```

然后在你的 CSS

```
.left{
  position: relative;
  display:inline-block;
  }

.right{
  position: relative;
  display: inline-block;
  } 
```

将 display 设置为 inline-block 将使两个元素并排

# knockout.js - 在没有绑定的情况下使用 beforeMove/afterMove？

> ID：13391711
> 
> 赞同：1
> 
> 时间：2012-11-15T04:49:07.177
> 
> 标签：knockout.js, knockout-2.0

我需要检测何时在[observableArray](http://knockoutjs.com/documentation/observableArrays.html)中移动项目。在我当前的版本（2.1.0）中，我通过调用`setTimeout`所有删除事件并等待查看添加事件是否紧随其后来完成此操作：

```
 var delayed = [];
  var key; /* obtained by comparing original observableArray with updated list and iterating all differences */

  if( /** record exists in original list but not new list ) {
     // it was deleted, we don't immediately fire a notification (it may get re-inserted in a moment)
     delayed[key] = setTimeout(function() { sendDeleteNotification(key); }, 0);
  }
  else if( /** record exists in new list but not original */ ) {
     if( delayed[key] ) { 
        // it was deleted and immediately re-added (it's a move)
        clearTimeout(delayed[key]); 
        sendMoveNotification( key );
     }
     else {
        // it was added
        sendAddedNotification( key );
     }
  } 
```

在淘汰赛 2.2 中，我看到[了 beforeMove 和 afterMove 的新事件](https://github.com/SteveSanderson/knockout/pull/259)。但是，我找不到任何以编程方式使用它们的方法。

最终目标是能够立即镜像数据库中的客户端更改，但不显示添加/删除来代替移动事件。在列表中向上或向下移动的记录不应标记为已删除然后新添加。

可以在 JavaScript 中直接使用新的 beforeMove/afterMove 绑定（例如事件模型？）来改进这一点吗？

干杯，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T18:49:07.440

我使用的答案是基于[这个问题](https://stackoverflow.com/questions/12166982/determine-which-element-was-added-or-removed-with-a-knockoutjs-observablearray)和[这个 jsfiddle](http://jsfiddle.net/mbest/Jq3ru/)。

和函数可以通过一个简单的订阅来访问`beforeMove`：`afterMove`

```
var obs = ko.observableArray();
obs.subscribe(function( arrayOfValues ) {
   console.log('moving', arrayOfValues);
}, undefined, 'beforeMove');

obs.subscribe(function( arrayOfValues ) {
   console.log('moved', arrayOfValues);
}, undefined, 'afterMove'); 
```

然而，事实证明这并不是特别有用，因为它返回数组中更改索引的所有元素。例如，如果我从列表中删除一条记录，我会为删除后的每条记录获得一个移动事件。

所以我会坚持超时，直到我找到更好的东西。

# php - 在 MySQL 双日期转换时遇到问题

> ID：13391714
> 
> 赞同：0
> 
> 时间：2012-11-15T04:49:20.453
> 
> 标签：php, mysql, date, datetime, datetime-format

我已经搜索并搜索了执行此操作的方法，但发现的信息非常有限。

我有一个 MySQL 表“msgdb”，其中包含一个格式为 double(25,8) 的字段“ttime”（示例行 = 1352899856.95249200）。

我需要通过删除字段“ttime”<=今天的日期-5天的任何行来定期清理表格。

这些是我能找到的与双时间转换相关的仅有的两行代码，但其中任何一个都无法工作。

```
SELECT ADDDATE(ADDDATE(ADDDATE('1899-12-31 00:00:00',FLOOR(ttime)), INTERVAL -1 DAY),INTERVAL(MOD(ttime,1)*86400)SECOND) AS TrueDate FROM msgdb

select date('1899-12-31 00:00:00'+ INTERVAL ttime * 24*3600 SECOND) as date from msgdb 
```

在我开始使用 DELETE FROM 以确保我得到正确的结果之前，我首先尝试使用下面的代码显示任何符合条件的行。

```
 $query = "select date('1899-12-31 00:00:00'+ INTERVAL ttime * 24*3600 SECOND) as date from msgdb";
 $result = mysql_db_query ($dbname, $query, $link);
 while($row = mysql_fetch_array($result)) {
   echo $row['date'];
   echo '<br>';
 } 
```

并且

```
 $query = "SELECT ADDDATE(ADDDATE(ADDDATE('1899-12-31 00:00:00',FLOOR(ttime)), INTERVAL -1 DAY),INTERVAL(MOD(ttime,1)*86400)SECOND) AS TrueDate FROM msgdb";
 $result = mysql_db_query ($dbname, $query, $link);
 while($row = mysql_fetch_array($result)) {
   echo $row['TrueDate'];
   echo '<br>';
 } 
```

但两者都没有返回。

更新：好的，通过使用此代码：

```
$query = "select ttime from msgdb";
$result = mysql_db_query ($dbname, $query, $link);
while($row = mysql_fetch_array($result)) {
        echo date('m-j-Y, H:i:s', $row[0]);
    echo '<br>';
} 
```

我可以看到它将 'ttime' 字段从 1352899856.95249200 的存储值转换为 11-14-2012, 07:30:56。

那么我将如何从表中删除 ttime <=now - 5 天的所有行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T05:06:14.543

找出哪些记录的日期早于某个时间点应该很容易：

```
DELETE FROM table WHERE ttime <= DATE_SUB(NOW(), INTERVAL 5 DAY); 
```

`UTC_TIMESTAMP()`如果您将所有时间都存储在 UTC 中，那么使用它可能会更好，这是唯一明智的方法。

# c++ - 如何将命令从 C++ 应用程序返回到父终端？

> ID：13391715
> 
> 赞同：0
> 
> 时间：2012-11-15T04:49:29.340
> 
> 标签：c++, bash, qt, path, environment-variables

是否可以从终端运行 c++ 应用程序并在某些条件下将命令返回到调用它的终端？例如，如果我要在我的终端中并在我的选择之后运行一个应用程序；我的应用程序需要通过运行导出命令来更改我的 PATH，例如：

*（使用 BASH）*

```
export PATH=.:/home/User/application/bin:$PATH 
```

完成后，在我的应用程序完全关闭之前，我可以让应用程序使用上述命令更改我的终端本地环境变量吗？Qt 是否提供了这样做的方法？提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T05:44:50.387

不，您不能更改父应用程序环境。

为什么？当您的父应用程序启动您的应用程序时（可能使用`system()`），它实际上是`fork()`ed - 子进程诞生为几乎完全复制父进程，然后该子进程使用`execve()`调用，它将该进程的可执行映像完全替换为您的应用程序的可执行映像（对于脚本，它将是解释器（如 bash）的图像）。

除此之外，这个过程还准备了更多的东西。一个是打开文件的列表，从文件句柄 0、1、2（stdin、stdout、stderr）开始。此外，它创建了包含环境变量（作为键=值对）的内存块（属于子进程地址空间）。

因为环境块属于你的进程，你可以随意改变你自己的环境。但是，您的进程不可能更改父进程（或任何其他进程）的环境内存块。可能实现这一点的唯一方法是使用 IPC（进程间通信）并温和地要求父级在其中执行此任务，但父级必须积极监听（在本地或网络套接字上）并愿意满足此类请求来自某人，并且在这方面与任何其他过程相比，孩子并没有什么特别之处。

这也是为什么您可以使用一些 shell 脚本更改 bash 环境的原因，但只能使用`source`or `.`bash 宏 - 因为它是由 bash 本身处理的，而不启动任何外部进程。

但是，由于上述原因，您不能通过执行任何其他程序或脚本来更改环境。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T06:04:15.500

常见的解决方案是让您的应用程序将结果打印到标准输出，然后让调用者将其传递给它的环境。一个教科书示例是`ssh-agent`打印环境变量分配；你通常调用它`eval $(ssh-agent)`

# php - 仅考虑一个字段从 mysql 中选择唯一记录

> ID：13391716
> 
> 赞同：0
> 
> 时间：2012-11-15T04:49:38.793
> 
> 标签：php, mysql, select

我的问题可能没有反映我的问题，起初很抱歉。我有一个问题，我需要从表中选择不同的电影名称，同时选择它的 id 和其他记录。但由于每部电影的 id 不同，因此选择了所有电影（具有相同的名称）。这是查询：

```
 $sql = "
            SELECT DISTINCT
                movie_id,movie_name
            FROM
                tbl_current_movies as cm, tbl_movie_hall as mh
            WHERE
                movie_active = 'active'
            AND
                cm.hall_id = mh.hall_id
        ";

$res = $this->db->returnArrayOfObject($sql,$pgin = 'no');

    var_dump($res); 
```

并`var_dump($res)`说：

```
array
  0 => 
    object(stdClass)[48]
      public 'movie_id' => string '1' (length=1)
      public 'movie_name' => string 'MIB' (length=12)
  1 => 
    object(stdClass)[49]
      public 'movie_id' => string '2' (length=1)
      public 'movie_name' => string 'Jetuka Pator Dare' (length=17)
  2 => 
    object(stdClass)[50]
      public 'movie_id' => string '3' (length=1)
      public 'movie_name' => string 'MIB' (length=12) 
```

所以你可以看到电影 MIB 放映了两次，但我只想得到电影 MIB 的结果！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T04:59:33.390

将您的查询更改为：

```
 $sql = "SELECT movie_id , movie_name
         FROM tbl_current_movies as cm 
         LEFT JOIN  tbl_movie_hall mh ON cm.hall_id = mh.hall_id
         WHERE movie_active = 'active'
         GROUP BY movie_name
        "; 
```

你不应该在 WHERE 子句中加入你的表，如果你对 JOIN 不满意，你可以阅读一些文档：[http](http://dev.mysql.com/doc/refman/5.0/en/join.html) ://dev.mysql.com/doc/refman/5.0/en/join.html 这应该可以帮助您了解它们的用途。

# php - 语法错误，意外的“fwrite”（T_STRING）

> ID：13391720
> 
> 赞同：-1
> 
> 时间：2012-11-15T04:49:59.220
> 
> 标签：php, fwrite

有人可以检查我的代码，我不知道它有什么问题。每当我执行代码时，标题中都会出现该错误。

```
<?php
$file = "newfile.txt";

$text = "This is a text line. ";

$handle = fopen($file, "w");

fwrite($handle, $text);
fclose($handle);

$handle = fopen($file, "a");

$text = "Here are more text lines to insert."
fwrite($handle, $text);
fclose($handle);

include ($file);

?> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-15T04:54:23.060

你忘了一个；在这一行之后：

```
$text = "Here are more text lines to insert." 
```

这将解决您的问题。

# android - 不幸的是，启动器已在 android 模拟器中停止

> ID：13391722
> 
> 赞同：3
> 
> 时间：2012-11-15T04:50:02.697
> 
> 标签：android

当我尝试更改我的模拟器分辨率 720X1280 和屏幕尺寸 4 英寸和密度 213 之后当我尝试启动模拟器时，它显示**不幸的是启动器已停止**注意：我的模拟器正在运行 android 4.0 .plz 帮助。

提前致谢

```
11-15 10:36:52.238: W/PackageManager(90): Unknown permission com.google.android.googleapps.permission.GOOGLE_AUTH.mail in package com.android.contacts
11-15 10:36:52.259: W/PackageManager(90): Unknown permission android.permission.ADD_SYSTEM_SERVICE in package com.android.phone
11-15 10:36:52.278: W/PackageManager(90): Unknown permission com.android.smspush.WAPPUSH_MANAGER_BIND in package com.android.phone
11-15 10:36:52.278: W/PackageManager(90): Unknown permission com.google.android.googleapps.permission.GOOGLE_AUTH in package com.android.providers.calendar
11-15 10:36:52.278: W/PackageManager(90): Unknown permission com.google.android.googleapps.permission.GOOGLE_AUTH.cl in package com.android.providers.calendar
11-15 10:36:52.331: W/PackageManager(90): Unknown permission com.google.android.googleapps.permission.GOOGLE_AUTH.mail in package com.android.calendar
11-15 10:36:52.338: W/PackageManager(90): Not granting permission android.permission.SEND_DOWNLOAD_COMPLETED_INTENTS to package com.android.browser (protectionLevel=2 flags=0x9be45)
11-15 10:36:52.358: D/dalvikvm(234): GC_CONCURRENT freed 221K, 11% free 9063K/10119K, paused 3ms+5ms
11-15 10:36:52.420: W/PackageManager(90): Not granting permission android.permission.BIND_APPWIDGET to package com.android.widgetpreview (protectionLevel=3 flags=0x28be44)
11-15 10:36:52.438: W/PackageManager(90): Unknown permission com.google.android.googleapps.permission.GOOGLE_AUTH in package com.android.settings
11-15 10:36:52.469: W/PackageManager(90): Unknown permission com.google.android.googleapps.permission.GOOGLE_AUTH in package com.android.providers.contacts
11-15 10:36:52.469: W/PackageManager(90): Unknown permission com.google.android.googleapps.permission.GOOGLE_AUTH.cp in package com.android.providers.contacts
11-15 10:36:52.498: W/PackageManager(90): Unknown permission com.google.android.googleapps.permission.ACCESS_GOOGLE_PASSWORD in package com.android.development
11-15 10:36:52.498: W/PackageManager(90): Unknown permission com.google.android.googleapps.permission.GOOGLE_AUTH in package com.android.development
11-15 10:36:52.498: W/PackageManager(90): Unknown permission com.google.android.googleapps.permission.GOOGLE_AUTH.ALL_SERVICES in package com.android.development
11-15 10:36:52.498: W/PackageManager(90): Unknown permission com.google.android.googleapps.permission.GOOGLE_AUTH.YouTubeUser in package com.android.development
11-15 10:36:52.518: W/PackageManager(90): Not granting permission android.permission.DEVICE_POWER to package com.android.deskclock (protectionLevel=2 flags=0x8be45)
11-15 10:36:53.128: D/MediaScannerReceiver(299): action: android.intent.action.MEDIA_MOUNTED path: /mnt/sdcard
11-15 10:36:53.679: D/dalvikvm(299): GC_CONCURRENT freed 235K, 11% free 8877K/9927K, paused 4ms+4ms
11-15 10:36:53.908: W/MediaScanner(299): Error opening directory '/mnt/sdcard/.android_secure/', skipping: Permission denied.
11-15 10:36:53.929: V/MediaScanner(299): pruneDeadThumbnailFiles... android.database.sqlite.SQLiteCursor@413210b0
11-15 10:36:53.929: V/MediaScanner(299): /pruneDeadThumbnailFiles... android.database.sqlite.SQLiteCursor@413210b0
11-15 10:36:54.039: D/Tethering(90): Tethering got CONNECTIVITY_ACTION
11-15 10:36:54.039: D/Tethering(90): MasterInitialState.processMessage what=3
11-15 10:36:54.478: D/dalvikvm(90): GC_CONCURRENT freed 605K, 12% free 11396K/12807K, paused 10ms+10ms
11-15 10:37:56.488: W/ThrottleService(90): unable to find stats for iface rmnet0 
```

这里我附上了截图

# html - 棘手的 CSS / 图像背景

> ID：13391724
> 
> 赞同：0
> 
> 时间：2012-11-15T04:50:30.247
> 
> 标签：html, css, background

有这个问题让背景工作......它需要3部分的图像......（顶部，中心，底部）

我已经接近了......我确定我错过了一些简单的东西......请查看这个jsfiddle，看看它是否可以拨入！

[http://jsfiddle.net/bb6hZ/](http://jsfiddle.net/bb6hZ/)

谢谢！！

是）我有的：

```
<article>
<div class="bg1">
    <div class="bg2">
        <h2>post name title here yo</h2>
        <span class="meta">September 10, 2012</span>
        <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
        <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
    </div>
</div>
</article> 
```

我正在使用两个额外的 bg div 来尝试实现这一点...我已经创建了图像文件，它位于此处： http: [//www.pacificcheese.com/img/int/bg_article.png](http://www.pacificcheese.com/img/int/bg_article.png)

过去我已经做过很多次了，我只是不记得到底是怎么做到的......多年来不需要使用这种方法。

帮助将不胜感激！！！谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T05:27:33.050

知道了！

诀窍是浮动所有元素......见js fiddle：

[http://jsfiddle.net/bb6hZ/2/](http://jsfiddle.net/bb6hZ/2/)

```
article,.bg1,.bg2 {background:url("http://www.pacificcheese.com/img/int/bg_article.png") -556px 0 no-repeat; float:left;}
article {display:block; width:556px; background-position:0 0; padding-top:130px;}
.bg1 {background-repeat:repeat-y;}
.bg2 {background-position:-1112px 100%; margin:-130px 0; padding:30px 20px 45px;} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T10:52:33.260

试试这个：

```
.bg1 {background-repeat:repeat-y; border:transparent 1px solid; } 
```

# sql - 如何在 sql 命令中使用单引号？

> ID：13391730
> 
> 赞同：3
> 
> 时间：2012-11-15T04:50:55.567
> 
> 标签：sql, sql-server

> **可能重复：**
> [如何在 sqlserver 中转义单引号？](https://stackoverflow.com/questions/1586560/how-do-i-escape-a-single-quote-in-sqlserver)

[我在下面有一个脚本，可以从此链接](http://alagad.com/2008/09/18/delete-almost-everything-from-your-mssql-database/)删除数据库中的所有内容。当我在这条线上执行时它会出错。

```
SET @statement = '
IF(@type = 'F') or (@type = 'C') or (@type = 'D') or (@type='F') or (@type='K') 
```

原因是因为单引号。我想知道如何解决这个错误？

```
/*** drop (pretty much) everything before rebuilding the database ***/
DECLARE
    OBJECTS CURSOR FOR SELECT
        so.name,
        so.type,
        so.type_desc,
        p.name AS parentName
    FROM
        sys.objects AS so
    LEFT JOIN sys.objects AS p ON so.parent_object_id = p.object_id
    WHERE
        so.schema_id = 1
    ORDER BY
        CASE
    WHEN so.type = 'F' THEN
        0
    WHEN so.type = 'TR' THEN
        1
    WHEN so.type = 'U' THEN
        2
    WHEN so.type = 'F' THEN
        3
    ELSE
        4
    END OPEN OBJECTS DECLARE
        @name AS nvarchar (MAX) DECLARE
            @type AS nvarchar (2) DECLARE
                @type_desc AS nvarchar DECLARE
                    @parentName AS nvarchar (MAX) DECLARE
                        @statement AS nvarchar (MAX) FETCH NEXT
                    FROM
                        OBJECTS INTO @name,
                        @type,
                        @type_desc,
                        @parentName
                    WHILE @@FETCH_STATUS = 0
                    BEGIN

                    SET @statement = '    IF(@type = ' F ')
BEGIN
PRINT ' DROPING FK : ' + @name + ' OF type ' + @type + ' (' + @type_desc + ') '
SET @statement = ' ALTER TABLE ' + @parentName + ' DROP CONSTRAINT ' + @name
EXECUTE(@statement)
END
ELSE IF (@type = ' TR ')
BEGIN
PRINT ' DROPING TRIGGER : ' + @name + ' OF type ' + @type + ' (' + @type_desc + ') '
SET @statement = ' DROP TRIGGER ' + @name
EXECUTE(@statement)
END
ELSE IF (@type = ' U ')
BEGIN
PRINT ' DROPING TABLE : ' + @name + ' OF type ' + @type + ' (' + @type_desc + ') '
SET @statement = ' DROP TABLE ' + @name
EXECUTE(@statement)
END
ELSE IF (@type = ' FN ')
BEGIN
PRINT ' DROPING FUNCTION : ' + @name + ' OF type ' + @type + ' (' + @type_desc + ') '
SET @statement = ' DROP FUNCTION ' + @name
EXECUTE(@statement)
END
ELSE
PRINT ' Didn 't drop object ' + @name + ' of type ' + @type + ' (' + @type_desc + ')'    FETCH NEXT
                    FROM
                        OBJECTS INTO @name,
                        @type,
                        @type_desc,
                        @parentName
                    END CLOSE OBJECTS DEALLOCATE OBJECTS 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-15T04:53:01.440

如果您想在准备好的语句中使用单引号，请使用另一个单引号将其转义，例如，

```
SET @statement = 'world''s view';
SET @statement2 = 'world''s view'; 
```

从你上面的例子

```
SET @statement = '
                IF(@type = ''F'') or (@type = ''C'')  or
                  (@type = ''D'') or (@type=''F'') or
                  (@type=''K'')'

-- the strings are all red. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T04:53:47.807

单引号用于表示 SQL 中的字符串文字。如果需要显式插入单引号，则应使用**双单引号 ('')**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T04:58:19.077

它应该是这样的：

```
SET @statement = 'IF(@type = ''F'') or (@type = ''C'') or (@type = ''D'') or (@type=''F'') or (@type=''K'')' 
```

拉吉

# c++ - 函数原型混淆

> ID：13391731
> 
> 赞同：0
> 
> 时间：2012-11-15T04:51:07.820
> 
> 标签：c++, function-prototypes

我学习 C++ 已经有一段时间了，唯一让我无法理解的是函数原型、函数调用和函数定义的东西。我读过各种各样的东西，但仍然不知道它的含义或作用。我只是希望能够理解和识别其中的每一个。我很确定这些对于我所读到的编程很重要。我对函数原型有一个粗略的了解，我相信这是一个返回某物值的语句。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T05:09:31.827

让我看看我是否可以用一些类比来解释

**功能原型**- 就像产品的广告 - 它说有一个产品 X，你可以从位置 Y 获得它。这对于作为消费者的你来说已经足够了，但没有说明幕后发生的事情。 X 到 Y 和你。

**类似地**，函数原型是一个声明，它只是说有一个名为 X 的函数，接受参数 Y 并返回值 Z。对于任何调用者来说已经足够了，但它自己不能做任何事情。
例如`int DoSomething(int arg);`

**函数调用**- 这是消费者在位置 Y 去询问产品 X。

这是实际调用函数代码的时间。但是为了能够调用你需要知道它存在的函数，所以你需要（至少）在调用上方的函数的原型。
例如`int a = DoSomething(1);`

**功能定义**- 这是制造产品 X 并将其运输到位置 Y 的实际过程。

本质上这是函数本身的代码。
例如
`int DoSomething(int arg){
return arg+2;
}`

C 中需要函数原型（也称为前向声明）和 C++ 中的自由函数（不属于类的函数）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T05:10:19.907

函数原型是 C 独有的——在 C++ 中不使用。AC 函数原型大多等价于一个 C++ 函数声明，例如：

```
int f(int);
int g(double); 
```

它们的不同之处在于如果您不在括号中添加任何内容：

```
int f(); 
```

在 C++ 中， this 声明`f`为一个接受参数的函数。在 C 中，它声明`f`为一个函数*，而没有*指定任何关于参数¹的内容。要获得与 C 声明等效的 C 原型，您需要在括号之间放置*一些内容：*

```
int f(void); 
```

后者在 C++ 中也是允许的，但*大多数*C++ 程序员更愿意避免它。

函数定义是您拥有函数的标头*和*主体的位置：

```
int f(int x) {
    return x+4;
} 
```

函数调用是您*使用*已定义的函数的地方：

```
int y = 2;

int x = f(y); // using the f() above, this is equivalent to int x = 6; 
```

* * *

¹在过去（大约 1985 年左右之前）C 根本没有函数原型，所以这是唯一受支持的函数声明。它在新代码中通常不受欢迎。

# javascript - 如何使用 javascript 将 html blob 转换为图像？

> ID：13391734
> 
> 赞同：2
> 
> 时间：2012-11-15T04:51:26.030
> 
> 标签：javascript, blob

尝试使用 javascript 创建 HTML 页面的图像（屏幕截图）。能够使用以下代码生成 html blob 并在新选项卡中显示与只读 HTML 页面相同的内容。

```
var scr = document.documentElement.cloneNode(true);
var blob = new Blob([scr.outerHTML], {type: 'text/html'});
window.open(window.URL.createObjectURL(blob)); 
```

请任何人都可以告诉我如何保存与图像相同的内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T05:14:57.043

看看 FileSaver.js，

```
var bb = new BlobBuilder();
bb.append((new XMLSerializer).serializeToString(document));
var blob = bb.getBlob("application/xhtml+xml;charset=" + document.characterSet);
saveAs(blob, "document.xhtml"); 
```

[一些文档](http://updates.html5rocks.com/2011/08/Saving-generated-files-on-the-client-side)

[API](https://github.com/eligrey/FileSaver.js)

# php - 使用区域设置 pt_BR 的 PHP Yii 日期

> ID：13391738
> 
> 赞同：0
> 
> 时间：2012-11-15T04:52:07.940
> 
> 标签：php, yii

我正在尝试使用 Yii 框架制作 php，显示`date()`在 pt_br 中。

```
setlocale(LC_TIME,"pt_BR") 
```

我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T13:58:30.273

尝试在 index.php 中添加以下行，以便它在任何其他 php 代码之前首先执行。

```
date_default_timezone_set('Asia/Calcutta'); 
```

# c - 检查页面是否被锁定？

> ID：13391741
> 
> 赞同：3
> 
> 时间：2012-11-15T04:52:56.917
> 
> 标签：c, linux, posix

在 Linux 中，是否有任何方法可以检查页面（或页面范围）是否已被`mlock`“d”？的 POSIX 描述`munlock`表明，无论`mlock`调用多少次（这似乎包括零次），它都会成功分配有效的内存。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-24T04:42:36.017

我从未尝试过，但我认为如果您使用 and 标志分配内存[`mmap(2)`](http://man7.org/linux/man-pages/man2/mmap.2.html)，`MAP_ANONYMOUS`它**`MAP_LOCKED`**类似于执行 a`malloc`和 an `mlock`。

**如果****启用了内核配置选项，**您将获得一个入口。[`/proc/[pid]/smaps`](http://man7.org/linux/man-pages/man5/proc.5.html) **`CONFIG_PROC_PAGE_MONITOR`**

`/proc/[pid]/smaps`然后您可以检查映射条目的行，这将`Locked`允许您确定映射是否被锁定（`mlock`等效）。

# javascript - 在 javascript 中定义函数的不同语法

> ID：13391750
> 
> 赞同：-1
> 
> 时间：2012-11-15T04:54:01.113
> 
> 标签：javascript, function, object

我正在阅读一本关于 javascript 的书，在其中一个示例中，他们显示了要在示例中使用的这两个代码块：

```
 showTipListener: function(event)
    {
        Tooltips.showTip(this);
        Core.preventDefault(event);
    }
    hideTipListener: function(event)
    {
        Tooltips.hideTip(this);
    } 
```

和

```
 var Tooltips = 
    {
        init: function()
        {
            var links = document.getElementsByTagName("a");

            for (var i = 0; i < links.length; i++)
            {
                //Every link is going to need a title attribute in the HTML
                var title = links[i].getAttribute("title");

                if (title && title.length > 0)
                {
                    Core.addEventListener(links[i], "mouseover", Tooltips.showTipListener);
                    Core.addEventListener(links[i], "focus", Tooltips.showTipListener);
                    Core.addEventListener(links[i], "mouseout", Tooltips.showTipListener);
                    Core.addEventListener(links[i], "blur", Tooltips.showTipListener);

                }
            }
        }}//I also had to add this extra closing bracket to avoid errors? Don't understand why
    } 
```

我担心的是第一个代码示例参考第二个代码示例在哪里？

我以前从未使用过这种语法（如第二个代码示例所示）来定义 javascript 函数：

```
 functionName: function(passedParam)
    {
        //function body
    } 
```

以上只是一个例子，不是我的代码的一部分。

也许这些功能将在 Tooltips 对象内？这是我的一个想法，所以我做到了，将两个函数放在 ToolTips 对象的括号内。现在，我在 FireBug 中收到此错误： ![我的 FireBug 错误](../Images/77af12afe473bf4f43b183f05718229a.png)

我只是在寻找任何人必须提供的帮助和指导。我对 javascript 并不陌生，但对以这种方式定义函数很陌生。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T04:57:22.680

看一看：

```
var whatever = {                  //object
    add: function(a, b){            //function 1
        return a + b;
    },
    minus: function(a, b){          //function 2
        return a - b;
    }
}

whatever.add(1,1); //returns 2
whatever.minus(1,1); //returns 0 
```

这*不是*定义函数的新方法。这只是将对象的属性（或任何你称之为的）设置为函数，类似于：

```
var whatever = {
    city: "NYC",
    date: +new Date()
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T04:58:06.887

嘿，我会看看这两个资源。他们有一些关于如何更好地编写 javascript 的很棒的技巧

[https://github.com/rwldrn/idiomatic.js/](https://github.com/rwldrn/idiomatic.js/)

[http://shichuan.github.com/javascript-patterns/](http://shichuan.github.com/javascript-patterns/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T04:57:37.970

两个顶级函数显然是`Tooltips`对象的成员，因为这就是它们在第二个片段中的调用方式。看

```
Core.addEventListener(links[i], "mouseover", Tooltips.showTipListener); 
```

你的第一个片段会更有意义

```
var Tooltips = {
    showTipListener: function(event)
    {
        Tooltips.showTip(this);
        Core.preventDefault(event);
    }
    hideTipListener: function(event)
    {
        Tooltips.hideTip(this);
    }
}; 
```

# java - 制作 Math.pow() 方法的副本

> ID：13391753
> 
> 赞同：2
> 
> 时间：2012-11-15T04:54:28.883
> 
> 标签：java, loops, math, pow

我正在制作一个应该与 Math.pow() 执行相同操作的方法，但我只是不知道如何使 y 使用双精度值并获得带小数的双精度值结果......有什么想法（最好使用 for 循环）？在下面的方法中，我使用“x”作为底数，使用“y”作为指数。

```
public static double power(double x, double y) {
    double result = 1;
    if (y <= 0)
        return 0;
    for (int count = 0; count < (int)y; count++)
        result *= x;
    return result;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T05:06:56.287

您可以使用 Math.log 和 Math.exp 来实现这一点。

```
public static void main(String[] args) throws InterruptedException {

         System.out.println(power(2,2.5));

    }

  public static double power(double x, double y) {

    double val = y *  Math.log(x);

    double result = Math.exp(val);

            return result;
    } 
```

输出是

```
5.65685424949238 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-31T18:51:06.550

创建不使用其他数学函数的 math.pow 副本需要对按位运算有基本的了解。我不使用java，但这里是c#中的代码

```
 public int ReturnPower(int firstNum, int secondNum)
    {

        int finalNum = 1;

        while (secondNum != 0)
        {

            //Use the bitwise operator & to check both strings
            if ((secondNum & 1) == 1)
            {
                finalNum = finalNum * firstNum;
            }

       //increment firstNum for the next iteration
            firstNum = firstNum * firstNum;

       //Bitwise operator righshift '>>' is used to reconfigure secondNum
            secondNum = secondNum >> 1;
        }

        //return((int)Math.Pow(firstNum, secondNum));
        return (finalNum);

    } 
```

**旁注最后两行将返回相同的输出。'(int)' 放置在 Math.pow 之前以对其进行类型转换，以允许传递类型 'int' 而不是 'double'。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-10-23T13:06:49.470

这是一个有效/详细的实现：

```
public static double pow(double x, double y)
{
  // Special cases first.
  if (y == 0)
    return 1;
  if (y == 1)
    return x;
  if (y == -1)
    return 1 / x;
  if (x != x || y != y)
    return Double.NaN;

  // When x < 0, yisint tells if y is not an integer (0), even(1),
  // or odd (2).
  int yisint = 0;
  if (x < 0 && floor(y) == y)
    yisint = (y % 2 == 0) ? 2 : 1;
  double ax = abs(x);
  double ay = abs(y);

  // More special cases, of y.
  if (ay == Double.POSITIVE_INFINITY)
    {
      if (ax == 1)
        return Double.NaN;
      if (ax > 1)
        return y > 0 ? y : 0;
      return y < 0 ? -y : 0;
    }
  if (y == 2)
    return x * x;
  if (y == 0.5)
    return sqrt(x);

  // More special cases, of x.
  if (x == 0 || ax == Double.POSITIVE_INFINITY || ax == 1)
    {
      if (y < 0)
        ax = 1 / ax;
      if (x < 0)
        {
          if (x == -1 && yisint == 0)
            ax = Double.NaN;
          else if (yisint == 1)
            ax = -ax;
        }
      return ax;
    }
  if (x < 0 && yisint == 0)
    return Double.NaN;

  // Now we can start!
  double t;
  double t1;
  double t2;
  double u;
  double v;
  double w;
  if (ay > TWO_31)
    {
      if (ay > TWO_64) // Automatic over/underflow.
        return ((ax < 1) ? y < 0 : y > 0) ? Double.POSITIVE_INFINITY : 0;
      // Over/underflow if x is not close to one.
      if (ax < 0.9999995231628418)
        return y < 0 ? Double.POSITIVE_INFINITY : 0;
      if (ax >= 1.0000009536743164)
        return y > 0 ? Double.POSITIVE_INFINITY : 0;
      // Now |1-x| is <= 2**-20, sufficient to compute
      // log(x) by x-x^2/2+x^3/3-x^4/4.
      t = x - 1;
      w = t * t * (0.5 - t * (1 / 3.0 - t * 0.25));
      u = INV_LN2_H * t;
      v = t * INV_LN2_L - w * INV_LN2;
      t1 = (float) (u + v);
      t2 = v - (t1 - u);
    }
  else
  {
    long bits = Double.doubleToLongBits(ax);
    int exp = (int) (bits >> 52);
    if (exp == 0) // Subnormal x.
      {
        ax *= TWO_54;
        bits = Double.doubleToLongBits(ax);
        exp = (int) (bits >> 52) - 54;
      }
    exp -= 1023; // Unbias exponent.
    ax = Double.longBitsToDouble((bits & 0x000fffffffffffffL)
                                 | 0x3ff0000000000000L);
    boolean k;
    if (ax < SQRT_1_5)  // |x|<sqrt(3/2).
      k = false;
    else if (ax < SQRT_3) // |x|<sqrt(3).
      k = true;
    else
      {
        k = false;
        ax *= 0.5;
        exp++;
      }

    // Compute s = s_h+s_l = (x-1)/(x+1) or (x-1.5)/(x+1.5).
    u = ax - (k ? 1.5 : 1);
    v = 1 / (ax + (k ? 1.5 : 1));
    double s = u * v;
    double s_h = (float) s;
    double t_h = (float) (ax + (k ? 1.5 : 1));
    double t_l = ax - (t_h - (k ? 1.5 : 1));
    double s_l = v * ((u - s_h * t_h) - s_h * t_l);
    // Compute log(ax).
    double s2 = s * s;
    double r = s_l * (s_h + s) + s2 * s2
      * (L1 + s2 * (L2 + s2 * (L3 + s2 * (L4 + s2 * (L5 + s2 * L6)))));
    s2 = s_h * s_h;
    t_h = (float) (3.0 + s2 + r);
    t_l = r - (t_h - 3.0 - s2);
    // u+v = s*(1+...).
    u = s_h * t_h;
    v = s_l * t_h + t_l * s;
    // 2/(3log2)*(s+...).
    double p_h = (float) (u + v);
    double p_l = v - (p_h - u);
    double z_h = CP_H * p_h;
    double z_l = CP_L * p_h + p_l * CP + (k ? DP_L : 0);
    // log2(ax) = (s+..)*2/(3*log2) = exp + dp_h + z_h + z_l.
    t = exp;
    t1 = (float) (z_h + z_l + (k ? DP_H : 0) + t);
    t2 = z_l - (t1 - t - (k ? DP_H : 0) - z_h);
  }

  // Split up y into y1+y2 and compute (y1+y2)*(t1+t2).
  boolean negative = x < 0 && yisint == 1;
  double y1 = (float) y;
  double p_l = (y - y1) * t1 + y * t2;
  double p_h = y1 * t1;
  double z = p_l + p_h;
  if (z >= 1024) // Detect overflow.
    {
      if (z > 1024 || p_l + OVT > z - p_h)
        return negative ? Double.NEGATIVE_INFINITY
          : Double.POSITIVE_INFINITY;
    }
  else if (z <= -1075) // Detect underflow.
    {
      if (z < -1075 || p_l <= z - p_h)
        return negative ? -0.0 : 0;
    }

  // Compute 2**(p_h+p_l).
  int n = round((float) z);
  p_h -= n;
  t = (float) (p_l + p_h);
  u = t * LN2_H;
  v = (p_l - (t - p_h)) * LN2 + t * LN2_L;
  z = u + v;
  w = v - (z - u);
  t = z * z;
  t1 = z - t * (P1 + t * (P2 + t * (P3 + t * (P4 + t * P5))));
  double r = (z * t1) / (t1 - 2) - (w + z * w);
  z = scale(1 - (r - z), n);
  return negative ? -z : z;
} 
```

从这里复制[http://developer.classpath.org/doc/java/lang/StrictMath-source.html](http://developer.classpath.org/doc/java/lang/StrictMath-source.html)

# ios - iOS中可折叠表格样式的水平条形图

> ID：13391755
> 
> 赞同：2
> 
> 时间：2012-11-15T04:54:37.980
> 
> 标签：ios, core-plot, expandable

我需要以可折叠的表格样式开发水平条形图。我目前正在使用核心情节框架。它支持这样的动画吗？我是否需要使用其他 API。我需要图表与可折叠/可扩展表格视图完全相同。

我相信我们可以使用嵌入在自定义单元格中的图形视图来做到这一点，有人尝试过吗？

请帮忙。谢谢

如下图所示。 ![在此处输入图像描述](../Images/b974f09d0cb5335bb832c49a81842ff6.png)

# asp.net - 如何在 .NET 2.0 项目中为 Passbook 创建 Pass？

> ID：13391763
> 
> 赞同：0
> 
> 时间：2012-11-15T04:55:33.723
> 
> 标签：asp.net, soap, ios6, .net-2.0

我们有一个餐厅预订 iPhone 应用程序，它使用 SOAP Web 服务来交换数据。现在我们要公开一个新服务，它会根据请求创建 Pass 并将其发送到 iPhone。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-15T05:59:33.940

在您现有的服务中再添加一种网络方法，该方法将创建随机密码并发送该密码。您需要处理调用 web 方法的字符串中的返回。供参考检查以下链接以获取返回值的服务。

[http://www.c-sharpcorner.com/UploadFile/1d42da/web-service-basics/](http://www.c-sharpcorner.com/UploadFile/1d42da/web-service-basics/)

# xml - 有什么方法可以仅针对模式服务器端验证 XML 结构的一部分吗？

> ID：13391766
> 
> 赞同：0
> 
> 时间：2012-11-15T04:55:40.067
> 
> 标签：xml, web-services, xml-parsing, jaxb, xsd

有什么方法可以仅针对模式服务器端验证 XML 结构的一部分吗？

我有一个 XSD - 使用这个 XSD，我可以创建 XML。如果没有客户端验证，则会针对不正确的 XML 引发编组错误。我需要通过对 XML 的某些部分启用服务器端模式验证来防止这种情况。由于 XML 太通用，我无法将验证应用于整个 XML。

例如 ： -

```
@WebMethod
    @WebResult(name="cartStatus")
    @RequestWrapper(localName="addToCart", className="addToCart")
    @ResponseWrapper(localName="addToCartResponse", className="addToCartResponse")
    public OperationStatus addToCart(  
                            @WebParam(name="cart", targetNamespace="")
                            @XmlElement(required=true)
                            Cart cos, 
                            @WebParam(name="cartoptions", targetNamespace="")
                            @XmlElement(required=false)
                            CartOptions options) throws OrderServiceException ; 
```

如果我想执行服务器端验证 CartOptions 对象如何实现这部分，而不是编组错误我的用户定义的异常被抛出

# google-sheets - 指向特定工作表的超链接

> ID：13391768
> 
> 赞同：12
> 
> 时间：2012-11-15T04:55:55.227
> 
> 标签：google-sheets, hyperlink, google-api, google-sheets-api

我想从另一个电子表格中的超链接打开 Google 表格的特定工作表。

我的主电子表格中有不同的链接，每个链接都应该有一个指向同一个从电子表格但指向不同工作表的超链接。

我知道超链接功能，但它不会转到特定的工作表。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-08-29T18:45:42.913

您可以使用此自定义脚本（工具 > 脚本编辑器）功能并将其与自定义绘图连接（插入 > 绘图... > 保存并关闭，然后右键单击新绘图> 分配脚本... > “goToSheet2”）

```
function goToSheet2() {
  goToSheet("Sheet2");
}

function goToSheet(sheetName) {
  var sheet = SpreadsheetApp.getActive().getSheetByName(sheetName);
  SpreadsheetApp.setActiveSheet(sheet);
} 
```

**更新：**
在最新版本中，您可以选择单元格并添加链接（插入>链接）并直接选择指向特定工作表的链接：
[![插入工作表的链接。](../Images/f644e8eca8e78bf1f66c183dd4ebb71e.png)](https://i.stack.imgur.com/ig8sk.png)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-11-15T05:05:19.730

该`HYPERLINK`功能*可以*链接到同一工作簿中的另一张工作表；如果您观察电子表格的 URL，在它的末尾会有`#gid=x`每个`x`工作表的唯一位置。

问题是，它将在另一个选项卡中将工作表作为电子表格的新实例打开，这可能是不可取的。解决方法是将图像或绘图作为按钮插入，并为其分配脚本以激活特定工作表。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-08-15T12:37:28.780

我个人根据@rejthy 所说的做了这个：在脚本中我创建了这个函数：

```
/**
 * Return the id of the sheet. (by name)
 *
 * @return The ID of the sheet
 * @customfunction
 */
function GET_SHEET_ID(sheetName) {
    var sheetId = SpreadsheetApp.getActive().getSheetByName(sheetName).getSheetId();
    return sheetId;
} 
```

然后在我需要链接的工作表中，我这样做了：`=HYPERLINK("#gid="&GET_SHEET_ID("Factures - "&$B$1);"Année en cours")`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-09-20T00:12:20.113

或者，您可以尝试创建自定义函数。打开电子表格后，单击**工具**菜单，然后单击**脚本编辑器**...。将代码粘贴到编辑器中：

```
/**
 * Gets the Sheet ID from Sheet Name
 *
 * @param {string} input The Sheet Name
 * @return The Sheet ID
 * @customfunction
 */
function SHEETID(input) {
  var ss = SpreadsheetApp.getActiveSpreadsheet();
  var tab = ss.getSheetByName(input);
  return tab.getSheetId();
} 
```

保存，刷新电子表格，然后输入您的自定义函数

```
=SHEETID("Your Custom Sheet Name")

=SHEETID(A1) 
```

瞧！输出选项卡的唯一 ID（在当前电子表格中）。您可以使用以下公式超链接到它：

```
=HYPERLINK("#gid="&SHEETID(A1),"Link") 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-03-06T02:19:16.637

因此，我从 OP 了解到的是，您有一个主电子表格，您希望拥有指向各个工作表的链接，其中一个或多个工作表可能位于单个或多个电子表格文件中。

该`HYPERLINK`函数仅将 URL 转换为超链接，并且仅在您想要超文本而不仅仅是链接时才真正有用。如果您输入原始 URL 作为数据，它会自动变成超链接，因此无需额外工作。

如其他答案所述，解决方案是让电子表格的 URL 然后使用该`gid`值来计算指向电子表格中所需工作表的链接。您可以编写一个简单的应用程序来收集所有单个工作表的链接并将它们写入主文件。

下面是一些可以帮助您入门的伪代码 (Python) 片段。我省略了所有样板身份验证代码，但如果您需要它，请参阅[此博客文章](http://wescpy.blogspot.com/2014/11/authorized-google-api-access-from-python.html)和[此视频](http://youtu.be/Z5G0luBohCg?list=PLOU2XLYxmsILOIxBRPPhgYbuSslr50KVq&index=4)。下面的代码假设您的 API 服务端点是`SHEETS`.

这会读取一个目标电子表格来为其每个工作表建立链接：

```
# open target Sheet, get all sheets & Sheet URL
SHEET_ID = TARGET_SHEET_DRIVE_FILE_ID
res = SHEETS.spreadsheets().get(spreadsheetId=SHEET_ID,
        fields='sheets,spreadsheetUrl').execute()
sheets = res.get('sheets', [])
url = res['spreadsheetUrl']

# for each sheet, dump out its name & full URL
for sheet in sheets:
    data = sheet['properties']
    print('** Sheet title: %r' % data['title'])
    print(' - Link: %s#gid=%s' % (url, data['sheetId'])) 
```

假设您将它们存储在`(name, URL)`应用程序中的 2 元组数组中，而不是打印到屏幕上，所以最重要的是，它看起来类似于以下列表`sheet_data`：

```
sheet_data = [
    ('Intro', 'https://docs.google.com/spreadsheets/d/SHEET_ID/edit#gid=5'),
    ('XData', 'https://docs.google.com/spreadsheets/d/SHEET_ID/edit#gid=3'),
    ('YData', 'https://docs.google.com/spreadsheets/d/SHEET_ID/edit#gid=7')
] 
```

然后你可以像这样将它们写到master（从左上角开始， cell `A1`）：

```
SHEET_ID = MASTER_SHEET_DRIVE_FILE_ID
SHEETS.spreadsheets().values().update(
    spreadsheetId=SHEET_ID, range='A1',
    body={'values': sheet_data},
    valueInputOption='USER_ENTERED'
).execute() 
```

使用时的一些注意事项`gid`：

*   为您创建的第一个默认工作表 (Sheet1) 始终具有`gid=0`.
*   之后添加的任何工作表都会有一个随机的`gid`.
*   不要`gid=0`为电子表格中的第一张工作表存钱，因为您或其他人可能已经删除了原始默认工作表，就像我上面的示例一样。

如果您想查看更多使用 Sheets API 的示例，请查看我制作的更多视频（以及深入研究每个代码示例的帖子）：

*   [将 SQL 数据迁移到工作表](http://gsuite-developers.googleblog.com/2016/06/introducing-google-sheets-api-v4.html)加代码深入研究[帖子](http://wescpy.blogspot.com/2016/06/using-new-google-sheets-api.html)
*   [使用 Sheets API](http://gsuite-developers.googleblog.com/2016/11/formatting-cells-with-the-google-sheets-api.html)和代码深潜[帖子格式化文本](http://wescpy.blogspot.com/2016/09/formatting-cells-in-google-sheets-with.html)
*   从电子表格数据和代码深入研究生[成](http://wescpy.blogspot.com/2016/11/generating-slides-from-spreadsheet-data.html)[幻灯片](https://gsuite-developers.googleblog.com/2016/11/generating-slides-from-spreadsheet-data.html)

然后，当您在表格 UI 中打开主表格时，您可以点击进入任何单独的表格，无论它们位于哪个电子表格文件中。如果您希望它们由另一个应用程序或脚本自动打开，大多数编程语言为开发人员提供了一个在给定目标 URL 的情况下启动 Web 浏览器的方法。在 Python 中，它将是`webbrowser`模块（[docs](http://docs.python.org/library/webbrowser)）：

```
import webbrowser
webbrowser.open_new(url) # or webbrowser.open_new_tab(url) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-06-17T01:31:41.747

如果您想创建指向另一个工作表的链接，该工作表将在**同一**浏览器选项卡中打开工作表，您需要执行以下操作： 1\. 获取工作表的 id。检查浏览器中的链接，您将看到工作表 id 2`#gid=x`在哪里`x`。然后您要将公式（超链接）设置到单元格并使其显示为超链接 `SpreadsheetApp.getActiveSheet().getRange("A1").setFormula('=HYPERLINK("#gid=X","test")').setShowHyperlink(true)`；如果您不使用`setShowHyperlink(true)`，它将显示为常规文本。

这基本上是上面@rejthy 提供的更新的代码版本

# rally - LookbackAPI：等待架构更改多长时间？

> ID：13391770
> 
> 赞同：0
> 
> 时间：2012-11-15T04:56:22.167
> 
> 标签：rally, lookbackapi

我们昨天在 UserStories 中添加了一个新字段。当我使用 LookbackAPI 查询故事并设置 fields = true 时，我看到了我们的旧自定义字段，但没有看到我们刚刚添加的新字段。

通常需要等待多长时间才能看到新的架构更改出现在回溯 API 中？

当然，我无法查询这个我真正想要在这里完成的新领域。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T15:33:33.993

您是否专门关注您设置领域的故事？添加新字段不会自动将该字段添加到 LBAPI 中的所有故事 - 新字段只会显示在那些更新为包含新字段值的故事上。

# user-interface - 尝试使用 JScrollPane 显示字符串数组，但我不断收到错误消息

> ID：13391780
> 
> 赞同：1
> 
> 时间：2012-11-15T04:57:23.990
> 
> 标签：user-interface, jscrollpane, numberformatexception

```
import java.awt.BorderLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JList;
import javax.swing.JScrollPane;
import javax.swing.JTextArea;
import javax.swing.JTextField;

public class SavingAccountFrame extends JFrame {
private static final int FRAME_WIDTH = 300;
private static final int FRAME_LENGTH = 500;
private static final double INITIAL_BALANCE = 0.0;
private static final double ANNUAL_RATE = 0.0;
private static final int YEARS = 0;
String[] result;
private JLabel initialLabel;
private JLabel rate;
private JLabel years;
private JTextField initialBal;
private JTextField annualRate;
private JTextField numOfYears;
private JButton calculate;
private JPanel panel;
private JList box;
private JScrollPane scroll;

SavingAccountFrame(){
    createTextField();
    createButton();
    createScrollPane();
    createPanel();
    setSize(FRAME_WIDTH, FRAME_LENGTH);
}
private void createTextField(){
    final int FIELD_WIDTH = 10;
    initialLabel = new JLabel("Initial Balance");
    initialBal = new JTextField(FIELD_WIDTH);
    rate = new JLabel("Annual Rate");
    annualRate = new JTextField(FIELD_WIDTH);
    years = new JLabel("Number of Years");
    numOfYears = new JTextField(FIELD_WIDTH);
}
private void createButton(){
      calculate = new JButton("Calculate");
      class CalcListener implements ActionListener
      {
         public void actionPerformed(ActionEvent event)
         {
            double iB = Double.parseDouble(initialBal.getText());
            double r = Double.parseDouble(rate.getText());
            int y = Integer.parseInt(years.getText());
            r = r / 100;

            for (int i = 0; i < y; i++) {
                double newbalance = iB * r;
                iB += newbalance;
                String test = String.valueOf(iB);
                result[i] = test;
            }
            box = new JList(result);
            scroll = new JScrollPane(box);
            getContentPane().add(scroll);
         }            
      }
      ActionListener d = new CalcListener();
      calculate.addActionListener(d);
}
private void createScrollPane(){
    scroll = new JScrollPane();
}
private void createPanel()
   {
      panel = new JPanel();
      panel = new JPanel();
      panel.add(initialLabel);
      panel.add(initialBal);
      panel.add(rate);
      panel.add(annualRate);
      panel.add(years);
      panel.add(numOfYears);
      panel.add(calculate);
      panel.add(scroll);
      add(panel);
   }
}

import javax.swing.JFrame;
public class SavingAccount {

    public static void main(String[] args) {
    JFrame frame = new SavingAccountFrame();
    frame.setTitle("Savings Account");
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.setVisible(true);
}

} 
```

我在做作业时遇到了一些麻烦，当我按下计算按钮时，我的代码一直在吐出这个错误。

```
Exception in thread "AWT-EventQueue-0" java.lang.NumberFormatException: For input string: "Annual Rate"
at sun.misc.FloatingDecimal.readJavaFormatString(FloatingDecimal.java:1242)
at java.lang.Double.parseDouble(Double.java:527)
at SavingAccountFrame$1CalcListener.actionPerformed(SavingAccountFrame.java:54)
at javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:2012)
at javax.swing.AbstractButton$Handler.actionPerformed(AbstractButton.java:2335)
at javax.swing.DefaultButtonModel.fireActionPerformed(DefaultButtonModel.java:404)
at javax.swing.DefaultButtonModel.setPressed(DefaultButtonModel.java:259)
at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(BasicButtonListener.java:252)
at java.awt.Component.processMouseEvent(Component.java:6268)
at javax.swing.JComponent.processMouseEvent(JComponent.java:3267)
at java.awt.Component.processEvent(Component.java:6033)
at java.awt.Container.processEvent(Container.java:2045)
at java.awt.Component.dispatchEventImpl(Component.java:4629)
at java.awt.Container.dispatchEventImpl(Container.java:2103)
at java.awt.Component.dispatchEvent(Component.java:4455)
at java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4633)
at java.awt.LightweightDispatcher.processMouseEvent(Container.java:4297)
at java.awt.LightweightDispatcher.dispatchEvent(Container.java:4227)
at java.awt.Container.dispatchEventImpl(Container.java:2089)
at java.awt.Window.dispatchEventImpl(Window.java:2517)
at java.awt.Component.dispatchEvent(Component.java:4455)
at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:649)
at java.awt.EventQueue.access$000(EventQueue.java:96)
at java.awt.EventQueue$1.run(EventQueue.java:608)
at java.awt.EventQueue$1.run(EventQueue.java:606)
at java.security.AccessController.doPrivileged(Native Method)
at java.security.AccessControlContext$1.doIntersectionPrivilege(AccessControlContext.java:105)
at java.security.AccessControlContext$1.doIntersectionPrivilege(AccessControlContext.java:116)
at java.awt.EventQueue$2.run(EventQueue.java:622)
at java.awt.EventQueue$2.run(EventQueue.java:620)
at java.security.AccessController.doPrivileged(Native Method)
at java.security.AccessControlContext$1.doIntersectionPrivilege(AccessControlContext.java:105)
at java.awt.EventQueue.dispatchEvent(EventQueue.java:619)
at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:275)
at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:200)
at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:190)
at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:185)
at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:177)
at java.awt.EventDispatchThread.run(EventDispatchThread.java:138) 
```

有人可以为我澄清一下这个异常是什么以及如何解决它。我无法确定似乎指向 null 的位置或格式不正确的位置。谢谢，麻烦您了

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T06:13:43.497

错误在这里

```
double r = Double.parseDouble(rate.getText()); 
```

在创建按钮中。相反，您应该使用 yearRate.parseDouble。因为 rate 是 JLabel 但不是文本字段。

```
rate = new JLabel("Annual Rate"); 
```

当您尝试将“年利率”解析为数字时，它会给您 java.lang.NumberFormatException

# php - 使列与 id 相同

> ID：13391790
> 
> 赞同：1
> 
> 时间：2012-11-15T04:58:11.457
> 
> 标签：php, mysql, database, phpmyadmin

我需要你的帮助，我有一个包含两列的表，一个 id 和 numpos，我希望 id 和 numops 具有相同的结果。

例子：

```
$cnx = mysql_connect( "localhost", "root", "" );
$db = mysql_select_db( "maincourante" );

$sql = mysql_query("INSERT INTO ops (id) values('')");

$req = mysql_query("SELECT LAST_INSERT_ID() as id FROM ops");
$data = mysql_fetch_array($req);

$upd = mysql_query("UPDATE `ops` SET `numops`=`idops` WHERE `idops`=$data");

mysql_query($upd, $cnx) or die(mysql_error());
mysql_close();` 
```

感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T05:16:34.973

试试这个：
这适用于mysql：

```
 INSERT INTO ops (`numops`) VALUES ((SELECT LAST_INSERT_ID())+1); 
```

这适用于 php：

```
mysql_query("INSERT INTO ops (`numops`) VALUES (0)");
mysql_query("UPDATE ops `numops` ='".mysql_insert_id()."' WHERE `id` = '".mysql_insert_id()."'"); 
```

或者

```
 mysql_query("INSERT INTO ops (`numops`) VALUES ('".mysql_insert_id()."')"); 
// this will only works if there is the same query executed before this. 
```

# regex - 验证 FQDN

> ID：13391792
> 
> 赞同：3
> 
> 时间：2012-11-15T04:58:27.033
> 
> 标签：regex, dns, fqdn

我在[http://gskinner.com/RegExr/](http://gskinner.com/RegExr/)找到了这个正则表达式来验证 FQDN 域：

```
(?=^.{1,254}$)(^(?:(?!\d+\.|-)[a-zA-Z0-9_\-]{1,63}(?<!-)\.?)+(?:[a-zA-Z]{2,})$) 
```

它基本上可以工作，但我想修改它以不允许三个或更多字符的主机名并且没有域。例如，目前这是有效的：

万维网

这不是：

万维网

这也是：

www.test.com

我想修改它以不允许第一个示例。换句话说，检查是否始终存在域。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T15:38:26.197

试试这个：

```
(?=^.{1,254}$)(^(?:(?!\d+\.|-)[a-zA-Z0-9_\-]{1,63}(?<!-)\.)+(?:[a-zA-Z]{2,})$) 
```

结束正则表达式的“子域”部分的句点之后的问号已被删除，使其成为强制性而不是可选的。

# php - 在 php myadmin 中增加 .sql 文件的最大大小限制

> ID：13391794
> 
> 赞同：0
> 
> 时间：2012-11-15T04:58:43.350
> 
> 标签：php

我想知道有没有办法增加 php myadmin 中导入选项的最大文件大小限制。在我的情况下，显示最大文件大小限制为 2mb。但我下载了一个大约 40 mb 的大型数据库的示例 .sql 文件。现在我该怎么做才能导入该数据库？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T05:07:37.083

打开 php.ini

寻找：

```
post_max_size = 8M 
upload_max_filesize = 2M 
max_execution_time = 30 
max_input_time = 60 
memory_limit = 8M 
```

代替：

```
post_max_size = 750M 
upload_max_filesize = 750M 
max_execution_time = 5000 
max_input_time = 5000 
memory_limit = 1000M 
```

保存文件并重新启动服务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T05:05:24.893

这很可能是 php.ini 的问题，并且您的最大上传量是有限的。在 php.ini 中搜索 upload_max_filesize - 我敢打赌它是 2MB。更改为 50，您应该可以导入。

# c# - TextBox 的 textChanged 事件的正则表达式

> ID：13391796
> 
> 赞同：0
> 
> 时间：2012-11-15T04:58:59.247
> 
> 标签：c#, .net, regex, winforms

在我的项目中，有很多`TextBoxes`里面`TabControl`我给同样的事件是这样的：（*工作*）

在我的表单构造函数中：

```
 SetProperty(this); 
```

* * *

```
private void SetProperty(Control ctr)
{
    foreach (Control control in ctr.Controls)
    {
        if (control is TextBox)  
        {
            control.TextChanged += new EventHandler(ValidateText);
        }
        else
        {
           if (control.HasChildren) 
           {
               SetProperty(control);  //Recursive function if the control is nested
           }
        }
    }
} 
```

现在我正在尝试将 TextChanged 事件提供给所有 TextBoxes。像这样的东西：

```
 private void ValidateText(object sender,EventArgs e)
    {
        String strpattern = @"^[a-zA-Z][a-zA-Z0-9\'\' ']{1,20}$"; //Pattern is Ok
        Regex regex = new Regex(strpattern);  
        //What should I write here?             
    } 
```

我不知道在上述方法中要写什么，因为没有一个要考虑的文本框。请建议。

编辑：我提到的模式不应该被允许进入文本框，即文本应该自动转换为匹配的字符串。（应该禁止我在模式中提到的字符）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T05:05:43.767

您应该首先获取调用的引用，`TextBox`然后您可以匹配*正则表达式*进行验证以做出您想要的任何决定。

```
private void ValidateText(object sender, EventArgs e)
{
    TextBox txtBox = sender as TextBox;
    String strpattern = @"^[a-zA-Z][a-zA-Z0-9\'\' ']{1,20}$"; //Pattern is Ok
    Regex regex = new Regex(strpattern);
    if (!regex.Match(txtBox.Text).Success)
    {
        // passed
    }
} 
```

**ADDED**，更好的是挂钩`Validating`事件，您可以随时调用此事件，以便`TextBoxes`一次执行所有验证。

```
private void SetProperty(Control ctr)
{
    foreach (Control control in ctr.Controls)
    {
        if (control is TextBox)
        {
            control.Validating += ValidateText;
        }
        else
        {
            if (control.HasChildren)
            {
                SetProperty(control);  //Recursive function if the control is nested
            }
        }
    }
}

private void ValidateText(object sender, CancelEventArgs e)
{
    TextBox txtBox = sender as TextBox;
    String strpattern = @"^[a-zA-Z][a-zA-Z0-9\'\' ']{1,20}$"; //Pattern is Ok
    Regex regex = new Regex(strpattern);
    //What should I write here?
    if (!regex.Match(txtBox.Text).Success)
    {
        e.Cancel = true;
    }
    e.Cancel = false;
} 
```

要执行验证，请调用此方法：

```
bool isValid = !this.ValidateChildren(ValidationConstraints.Enabled); 
```

参考：

1.  [扩展文本框控件以针对正则表达式进行验证](http://www.codeproject.com/Articles/17423/Extend-the-Textbox-Control-to-Validate-Against-Reg)
2.  [Windows 窗体中的验证](http://blog.scosby.com/post/2010/02/11/Validation-in-Windows-Forms.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T17:52:31.607

您还可以将文本框控件说 this.textbox1 发送到事件处理程序方法，并使用事件处理程序内的正则表达式检查该控件的输入文本。

# android - 将变量从 AsyncTask 传回调用 Activity

> ID：13391797
> 
> 赞同：0
> 
> 时间：2012-11-15T04:59:27.027
> 
> 标签：android, android-activity, android-asynctask

我是 Android 开发的新手并且有一个问题（可能会显示我的新手状态）。我正在从自定义活动中调用 asynchtask。一旦异步任务在PostExecute上完成，我想回调我的活动并设置一个pojo（Map（））。我知道 onPostExecute 似乎在 UI 线程上运行，但我不确定如何获得调用活动的可见性。

目标是能够在我的活动中设置一些变量，理想情况下，网络服务调用已经完成。

谢谢，克雷格

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T05:05:39.257

如果 AsyncTask 是活动的子类，则它可以访问超类的所有公共、受保护和私有变量。如果不是，则需要在Activity类中编写一个公共函数来设置变量，并从AsyncTask中调用它。这可能需要您通过构造函数将活动传递给 AsyncTask 并将其保存在任务的成员变量中。

# sql-server - SQL Server：openquery 插入链接服务器

> ID：13391800
> 
> 赞同：1
> 
> 时间：2012-11-15T05:00:39.100
> 
> 标签：sql-server, linked-server

如何在行不存在的情况下将数据插入链接服务器（oracle）？

`employee`如果`employeecode`该表中尚不存在，我想插入该表

```
INSERT INTO OPENQUERY(ORACLEX,
  'SELECT EMPCODE, EMPNAME FROM AX.EMPLOYEE') -- I want a where clause here

Select EID, ENAME FROM EMPDATA 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T11:44:29.560

您实际上可能需要从表中读取两次

```
 INSERT INTO OPENQUERY(ORACLEX,
  'SELECT EMPCODE, EMPNAME FROM AX.EMPLOYEE') -- I want a where clause here
   Select D.EID, D.ENAME
     FROM EMPDATA D
LEFT JOIN OPENQUERY(ORACLEX,
  'SELECT EMPCODE, EMPNAME FROM AX.EMPLOYEE') OQ ON OQ.EMPCODE = D.EID
    WHERE QQ.EMPCODE IS NULL; 
```

# eclipse - Eclipse - 运行/调试快捷键不起作用

> ID：13391804
> 
> 赞同：35
> 
> 时间：2012-11-15T05:01:06.890
> 
> 标签：eclipse, keyboard-shortcuts

在 Eclipse 中，我只能使用其中一个菜单按钮来运行/调试我的项目。按`F11`或`Ctrl`+`F11`什么也不做。我已将 Debug Last Launched 映射到各种不同的键盘快捷键，以查看后台运行的另一个程序是否拦截了按键，但似乎并非如此。其他所有键盘快捷键似乎都可以正常工作，例如`Ctrl`+ `Shift`+`T`或`Ctrl`+ `G`。

有什么帮助吗？快捷键在我的另一台电脑上工作，我一直本能地试图按下它，这大大降低了我的工作效率。

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-07-01T22:49:06.973

唯一的解决方案对我有用；

打开 Key mappings ( `CTRL`+ `SHIFT`+`L`两次) 找到调试快捷键 ( `F5`, `F6`, `F7`...) 并选择

然后将**When**操作值从“ **Debugging** ”更改为“ **In Window** ”

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-09-16T13:54:03.823

转到 Window -> Preferences -> General -> Keys 对于每个不起作用的键：将绑定设置为您想要的任何内容。- 我只是复制命令，然后**将“When”从“Debugging”更改为“Editing Java Source”**。祝你好运。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-02-06T14:15:00.617

我与一台新的戴尔笔记本电脑进行了战斗，以防万一它节省了某人的时间....

默认情况下，F 键优先级设置为声音、亮度和音乐，例如 `F9`打开 Windows 搜索。-->这是没有按`Fn`预期的键和所需的Fkey。

要切换优先级，请查找`Fn`+ `Esc`。这允许`F5`, `F6`etc 按预期工作。您可以按`Fn`+`F6`跳过音乐曲目

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-02-11T15:55:26.210

如果您的计算机具有在 fn 和 f1-f12 键之间切换的 fn 锁定/切换，请确保您没有意外切换其他模式。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-08-21T12:43:08.260

试试`F11`。它对我有用。我在 ADT 中使用 Eclipse。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-05-22T13:12:17.430

如果您使用**默认键映射**，则恢复默认值可能会起作用。

`Window`| `Preferences`| `General`| `Keys`（或`Ctrl`++ then `Shift`），然后点击and 。`L``L``Restore Defaults``OK`

对于**自定义映射**，我推荐[这个答案](https://stackoverflow.com/a/17414891/1845976)。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-01-15T09:35:36.477

请检查是否有其他程序正在尝试挂钩键盘消息。也许该程序会阻止 Eclipse 接收一些击键，包括`Ctrl`+ `F11`。我遇到了这个问题，最后我发现问题出在我的字典应用程序上，它使用`Ctrl`+`F11`来弹出。在字典应用程序中禁用热键后，Eclipse 开始正确处理`Ctrl`+ `F11`！

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-08-04T14:51:57.107

**编辑**：我的帖子没有直接反应最初的故障-F11-行为问题。但是我遇到的问题似乎非常相似，并且肯定与其他一些（投票率很高的）答案有关。

* * *

当我升级到 Eclipse 4.7 Oxygen 并且需要从头开始安装几个插件时，我也遇到了类似的问题。即使正确配置了适当的键绑定，F* 键在调试透视图中也不起作用。

不幸的是，重置视角和重置键绑定（如此处的一些评论中所建议的）都没有帮助。

为我解决这个问题的诀窍是：

> 首选项 > 运行/调试 > 透视图 > 恢复默认值

从我的调试角度来看，这恢复了 F* 键的功能。我不认为这是恢复行为的通用方式，但在其他“重置为默认值”中，在某些情况下，这可能是正确的，所以值得一试。

# c# - Hirearchial 数据模板 RadTreeView 问题

> ID：13391805
> 
> 赞同：0
> 
> 时间：2012-11-15T05:01:17.023
> 
> 标签：c#, wpf, mvvm

我想通过 Hireachical 数据模板将数据绑定到 radtreeview。使用 Wpf 树视图它的工作。我们想将其更改为 Radtreeview。当我试图实现同样的目标时，我没有得到。

```
<TreeView  Name="treeview2" 

  Grid.RowSpan="2" Tag=""
    Grid.ColumnSpan="2"
    ItemContainerStyle="{StaticResource StretchTreeViewItemStyle}" ItemsSource="{Binding Path=Cluster}" Width="250" Height="251" Margin="0,0,0,0" DockPanel.Dock="Bottom">
    <TreeView.ItemTemplate>
        <HierarchicalDataTemplate  ItemsSource="{Binding Path=Nodes}">
            <DockPanel LastChildFill="True">
                <TextBlock  Padding="15,0,30,0" Text="{Binding Path=numitems}" TextAlignment="Right"  DockPanel.Dock="Right"/>
                <TextBlock  Text="{Binding Path=Text}" DockPanel.Dock="Left" TextAlignment="Left">
                     <TextBlock.ContextMenu>
                  <ContextMenu>
                    <MenuItem Header="Rename" />
                    <MenuItem Header="Exlcude"/>

                   </ContextMenu>
</TextBlock.ContextMenu>
                </TextBlock> 
            </DockPanel>
        </HierarchicalDataTemplate>
    </TreeView.ItemTemplate> 
```

我正在寻找一个显示绑定属性的示例。Cluster 是类类型的 observablecollection 属性。Nodes 是其中的一个子集合。我正在寻找将相同的代码转换为 radtreeview - 谢谢

# visual-studio - 在 Visual Studio TFS 源代码管理历史记录中更改用户列格式

> ID：13391808
> 
> 赞同：0
> 
> 时间：2012-11-15T05:01:53.437
> 
> 标签：visual-studio, tfs

我的公司为活动目录中的用户名分配数值，Visual Studio 中的历史记录窗口（用于 TFS 源代码控制）以 [域][数字] 格式显示用户。

有没有办法改变它以显示完整的用户名或别名？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T06:45:39.083

这是 TFS 2012 中的新行为。遗憾的是，它在早期版本中不可配置，我不知道有任何 Visual Studio 插件可以做到这一点，尽管在技术上可以编写一个。

# android - 在android中显示带有sqllite数据库值的表？

> ID：13391810
> 
> 赞同：0
> 
> 时间：2012-11-15T05:02:12.073
> 
> 标签：android, database, sqlite

我想在 ui 中显示表，数据来自 sqllite 数据库表。我怎样才能在Android中实现？通过以下内容，我正在创建具有静态内容的表：

```
<?xml version="1.0" encoding="utf-8"?>  
<TableLayout  
    xmlns:android="http://schemas.android.com/apk/res/android"  
    android:id="@+id/tableLayout1"  
    android:layout_width="match_parent"  
    android:layout_height="match_parent"  
    android:shrinkColumns="*"  
    android:stretchColumns="*">  
    <TableRow  
        android:id="@+id/tableRow4"  
        android:layout_height="wrap_content"  
        android:layout_width="match_parent"  
        android:gravity="center_horizontal">  
        <TextView  
            android:id="@+id/textView9"  
            android:layout_width="match_parent"  
            android:layout_height="wrap_content"  
            android:textStyle="bold"  
            android:typeface="serif"  
            android:textSize="18dp"  
            android:text="Weather Table"  
            android:gravity="center"  
            android:layout_span="6"></TextView>  
    </TableRow>  
    <TableRow  
        android:id="@+id/tableRow1"  
        android:layout_height="wrap_content"  
        android:layout_width="match_parent">  
        <TextView  
            android:id="@+id/TextView04"  
            android:text=""></TextView>  
        <TextView  
            android:id="@+id/TextView04"  
            android:text="Feb 7"  
            android:textStyle="bold"  
            android:typeface="serif"></TextView>  
        <TextView  
            android:id="@+id/TextView03"  
            android:text="Feb 8"  
            android:textStyle="bold"  
            android:typeface="serif"></TextView>  
        <TextView  
            android:id="@+id/TextView02"  
            android:text="Feb 9"  
            android:textStyle="bold"  
            android:typeface="serif"></TextView>  
        <TextView  
            android:id="@+id/TextView01"  
            android:text="Feb 10"  
            android:textStyle="bold"  
            android:typeface="serif"></TextView>  
        <TextView  
            android:text="Feb 11"  
            android:id="@+id/textView1"  
            android:textStyle="bold"  
            android:typeface="serif"></TextView>  
    </TableRow>  
    <TableRow  
        android:layout_height="wrap_content"  
        android:id="@+id/tableRow2"  
        android:layout_width="match_parent">  
        <TextView  
            android:text="Day High"  
            android:id="@+id/textView2"  
            android:textStyle="bold"></TextView>  
        <TextView  
            android:id="@+id/textView3"  
            android:text="28°F"  
            android:gravity="center_horizontal"></TextView>  
        <TextView  
            android:text="26°F"  
            android:id="@+id/textView4"  
            android:gravity="center_horizontal"></TextView>  
        <TextView  
            android:text="23°F"  
            android:id="@+id/textView5"  
            android:gravity="center_horizontal"></TextView>  
        <TextView  
            android:text="17°F"  
            android:id="@+id/textView6"  
            android:gravity="center_horizontal"></TextView>  
        <TextView  
            android:text="19°F"  
            android:id="@+id/textView7"  
            android:gravity="center_horizontal"></TextView>  
    </TableRow>  
    <TableRow  
        android:layout_height="wrap_content"  
        android:id="@+id/tableRow2"  
        android:layout_width="match_parent">  
        <TextView  
            android:text="Day Low"  
            android:id="@+id/textView2"  
            android:textStyle="bold"></TextView>  
        <TextView  
            android:text="15°F"  
            android:id="@+id/textView3"  
            android:gravity="center_horizontal"></TextView>  
        <TextView  
            android:text="14°F"  
            android:id="@+id/textView4"  
            android:gravity="center_horizontal"></TextView>  
        <TextView  
            android:text="3°F"  
            android:id="@+id/textView5"  
            android:gravity="center_horizontal"></TextView>  
        <TextView  
            android:text="5°F"  
            android:id="@+id/textView6"  
            android:gravity="center_horizontal"></TextView>  
        <TextView  
            android:text="6°F"  
            android:id="@+id/textView7"  
            android:gravity="center_horizontal"></TextView>  
    </TableRow>  
    <TableRow  
        android:id="@+id/tableRow3"  
        android:layout_height="wrap_content"  
        android:layout_width="match_parent"  
        android:gravity="center">  
        <TextView  
            android:id="@+id/textView8"  
            android:text="Conditions"  
            android:textStyle="bold"></TextView>  
        <ImageView  
            android:id="@+id/imageView1"  
            android:src="@drawable/hot"></ImageView>  
        <ImageView  
            android:id="@+id/imageView2"  
            android:src="@drawable/pt_cloud"></ImageView>  
        <ImageView  
            android:id="@+id/imageView3"  
            android:src="@drawable/snow"></ImageView>  
        <ImageView  
            android:id="@+id/imageView4"  
            android:src="@drawable/lt_snow"></ImageView>  
        <ImageView  
            android:id="@+id/imageView5"  
            android:src="@drawable/pt_sun"></ImageView>  
    </TableRow>  
</TableLayout> 
```

请查看一次如何将动态值附加到 Android 中的该行并在 Android 前端应用程序中显示表格。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T06:09:55.460

您必须在 xml 中创建如下表，

```
<TableLayout
android:id="@+id/rows_table"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:layout_marginBottom="10dip"
android:layout_marginTop="10dip"
android:padding="10dp"
android:background="color or drawable"
android:shrinkColumns="*"  
android:stretchColumns="*"/> 
```

并在您的代码中声明该表，

```
RowsTable = (TableLayout) findViewById(R.id.rows_table); 
```

您可以在`AsyncTask PostExcute`您希望的地方或其他地方执行以下操作，

```
// entries are the no.of that you decided to print dynamically.
    int rows;
                    for (rows=0;rows<entries.length();rows++)
                {

                    TableRow trTwo = new TableRow(Activity.this);
                    trTwo.setLayoutParams(new LayoutParams(LayoutParams.MATCH_PARENT,
                            LayoutParams.FILL_PARENT));
// Here you can get the cursor data , which is going to be displayed in the coloumns.
//entriesVar is the coloumn data.
                    for(int coloumn = 2; coloumn < entriesVar.length; coloumn++)
                    {
                    //Your database values
                    if (coloumn == 1)
                    {

                        //Any Header options, If you wish to show any table headers

                    }

                    String questionable = "sometext";
                TextView txtTwo = new TextView(ReportsActivity.this);

                txtTwo.setText(questionable);
                txtTwo.setLayoutParams(new LayoutParams(
            LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT));
            txtTwo.setTextColor(Color.BLACK);
            txtTwo.setGravity(Gravity.CENTER);
            txtTwo.setBackgroundResource(R.drawable.table_border_new);
            txtTwo.setPadding(3, 3, 3, 3);
            trTwo.addView(txtTwo);// Binding Text To Row
            }
           // Adding View To Table
           RowsTable.addView(trTwo, new TableLayout.LayoutParams(
           LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT));
          } 
```

# mysql - MySQL - 一个子查询和一个 WHERE IN

> ID：13391813
> 
> 赞同：5
> 
> 时间：2012-11-15T05:02:32.967
> 
> 标签：mysql, sql

我有一个项目属性表和一个 user_favorites 表，其结构如下：

*   ID
*   item_id
*   用户身份
*   最喜欢的（布尔）

当用户“收藏”一个项目时，它会使用项目 ID、用户 ID 在此表中添加一行，并将收藏属性设置为 1（如果他们“不喜欢”，则将其更改为 0）。

我试图弄清楚如何在用户查看产品列表时显示他们的收藏夹。

我目前根据用户搜索输入进行查询并获得一组产品 ID。现在我想在这些产品中进行查询以创建产品信息表 - 我希望它包括该项目是否是用户最喜欢的。

我试过这样的事情：

```
select i.tid, i.name as name, i.image as image,  (SELECT favorite FROM user_favorites WHERE user_id=77 ) as favorite
    FROM items i 

    left join user_favorites ufav on (ufav.item_id = i.tid)
    WHERE i.tid IN (79, 98, 105 . . .) 
    order by favorite DESC, name ASC 
```

..但当然我得到一个*子查询返回超过 1 行*错误

我也尝试过这样的事情：

```
 select i.tid, i.name as name, i.image as image,  ufav.favorite as favorite
    FROM items i 
    left join user_favorites ufav on (ufav.item_id = i.tid)
    WHERE i.tid IN (79, 98, 105 . . .) AND ufav.user_id=77
    order by favorite DESC, name ASC 
```

. . . 但这只会返回收藏的项目（如您所料）。我想返回ID 列表中的*所有*项目，但我也想知道哪些项目没有被“收藏”。

我可以在一个查询中执行此操作，还是我最好的选择是运行两个单独的查询？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T05:23:22.727

试试这个 ：：

```
select 
i.tid, 
i.name as name, 
i.image as image,  
ifnull(favorite,false) as isFavorite

FROM items i 
left join user_favorites ufav on (ufav.item_id = i.tid)
WHERE i.tid IN (79, 98, 105 . . .)  and ufav.user_id=77
    order by favorite DESC, name ASC 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T05:24:58.253

我认为您需要在`CROSS JOIN`这里使用，因为您想向所有用户显示所有项目，例如

```
SELECT  d.item_ID, d.Itemname, d.user_ID, 
        COALESCE(c.`favorite`, 0) Favorite
FROM
        (
          SELECT   a.item_ID, a.Itemname, b.user_ID
          FROM     items a CROSS JOIN 
                   (
                       SELECT DISTINCT user_ID
                       FROM user_favorites
                   ) b
        ) d LEFT JOIN user_favorites c
            ON c.item_ID = d.item_ID AND
              c.user_ID = d.user_ID
-- WHERE d.user_ID = 1        -- this is you condition
ORDER BY d.user_ID, d.Item_ID 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!2/1ffb4/15)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T05:01:51.307

这是我最终采用的方法：

```
(
    SELECT i.tid, i.name as name, i.image, 1 AS favorite
    FROM items i
    LEFT JOIN user_favorites ufav on (ufav.item_id = i.tid)
    WHERE ufav.user_id = //the user id
    AND i.tid IN (79, 98, 105 . . .) 
 )

UNION DISTINCT

 (
     SELECT i.tid, i.name as name, i.image as image, 0 AS favorite
     FROM items i 
     WHERE NOT EXISTS (SELECT *
                       FROM user_favorites ufav
                       WHERE ufav.item_id = i.tid
                       AND ufav.user_id = //the user id
                       AND ufav.favorite=1
                       )
     AND i.tid IN (79, 98, 105 . . .)  
  ) 
  ORDER BY favorite DESC , i.name ASC 
```

这有什么问题吗？到目前为止，它似乎像我希望的那样工作......

# c++ - 从整数中删除前导 %

> ID：13391814
> 
> 赞同：3
> 
> 时间：2012-11-15T05:02:43.460
> 
> 标签：c++

这里只是一个简单的问题：我有一个 char** argv[] 包含我的所有参数...在其中一个参数中，我得到一个以 % 开头的整数

例如：

背景 %2

我真的只想要整数....有没有简单的方法来得到这个？

这是家庭作业，所以如果有人能在正确的方向上刺激我，我愿意做更多的挖掘。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T05:25:57.947

这是一种使用 c++ 方法的方法：

让我们假设您`char*`在列表中有一个`char** argv[]`

```
std::string tempString(argv[the one with the %]);
int position = tempString.find_first_of('%');
int = atoi(tempString.substr(position, tempString.size()-position).c_str()); 
```

快速说明，第一行将`char*`a 转换为 a `std::string`，第二行获取 的位置`%`，第三行获取数字的子字符串（假设它在 的末尾结束`char*`），将其转换回 a`char*`并通过它通过`atoi`得到`int`.

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T05:05:13.313

这是一种使用方法[`atoi`](http://www.cplusplus.com/reference/clibrary/cstdlib/atoi/)：

```
for (int i = 0 ; i != argc ; i++) {
    if (argv[i][0] == '%') {
        int num = atoi(&argv[i][1]);
        printf("Got a number: %d\n", num);
    }
} 
```

# python - BadFilterError：无效过滤器：每个查询只有一个属性可能有不等式过滤器（<=、>=、<、>）

> ID：13391818
> 
> 赞同：3
> 
> 时间：2012-11-15T05:03:28.787
> 
> 标签：python, google-app-engine, google-cloud-datastore

我正在尝试对两个不同的属性应用过滤器，但是 GAE 不允许我这样做，那么解决方案就是，代码片段如下：

```
if searchParentX :
    que.filter("parentX >=", searchParentX).filter("parentX <=", unicode(searchParentX) + u"\ufffd") 
    que.order('parentX')   

if searchParentY :
    que.filter("parentY >=", searchParentY).filter("parentY <=", unicode(searchParentY) + u"\ufffd") 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T14:53:41.833

解决方案是进行内存过滤：

1.  您可以运行两个查询（每个过滤一个属性）并对结果进行交集（根据数据的大小，您可能需要限制一个查询的结果，而不是另一个查询，以便它可以放入内存中）
2.  运行一个查询并过滤掉内存中的另一个属性（在这种情况下，如果您知道哪个属性会返回更多过滤列表，这将是有益的）

或者，如果您的数据以这样一种方式构建，您可以将数据分成多个集合，您可以在该集合上执行相等过滤器并在内存中完成过滤。例如，如果您正在搜索字符串，但您知道字符串的长度是固定的（比如 6 个字符），则可以创建一个包含 3/4 个字符的“查找”字段。然后当你需要在这个字段上搜索时，你可以通过匹配前几个字符来完成，并在内存中完成搜索。另一个例子：在搜索整数范围时，如果您可以定义常见的范围分组（比如一年的几十年或价格范围），那么您可以定义一个“范围”字段来进行相等搜索并继续在内存中进行过滤

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T05:20:13.163

不等式过滤器最多只能使用一个属性，我认为这种限制是因为 bigtable 中的数据以词法排序形式存储，因此一次只能执行一次搜索

[https://developers.google.com/appengine/docs/python/datastore/queries#Restrictions_on_Queries](https://developers.google.com/appengine/docs/python/datastore/queries#Restrictions_on_Queries)

# jsf - 导航规则有多重要？

> ID：13391819
> 
> 赞同：-1
> 
> 时间：2012-11-15T05:03:43.760
> 
> 标签：jsf, primefaces, navigation, rules

我一直在研究 JSF 2.1/Primefaces 3.4.1 并且我的 bean 遇到了一些问题，就像它们从未实例化但它们运行它们的一些功能然后它们就停止工作，有谁知道会发生什么这是什么原因？我检查了一段时间，得出的结论可能是因为我没有使用任何导航规则，对吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T05:23:21.107

在 jsf 2 中，您不需要 xml 中的导航规则。相反，您也可以选择直接在 EL 代码中指定导航结果。

```
<h:commandButton value="submit" type="submit" action="#{myBean.view}" /> 
```

myBean.view 的返回值是用户单击按钮时将导航到的视图的名称

在 jsf 1.x 中，您必须在 xml 中指定导航规则

```
faces-config.xml 
```

如果您对如何以“旧”方式完成导航感兴趣，可以在此处查看一些示例：http: [//www.jsftutorials.net/jsf-navigation-by-examples.html](http://www.jsftutorials.net/jsf-navigation-by-examples.html)

并在此处阅读有关差异的更多信息：[http ://www.mkyong.com/jsf2/implicit-navigation-in-jsf-2-0/](http://www.mkyong.com/jsf2/implicit-navigation-in-jsf-2-0/)

# iphone - Xcode：TextView仅快速滚动到顶部或底部

> ID：13391820
> 
> 赞同：1
> 
> 时间：2012-11-15T05:03:47.007
> 
> 标签：iphone, xcode, uitextview

如果问题太琐碎，我很抱歉，但我对 xcode 完全陌生。我在视图中添加了一个文本视图，其中包含很多文本。当我运行项目时，我无法正确滚动它——只要我用鼠标/手指按住它，当我松开鼠标/手指时，它就会移动 textview 并返回顶部。当我尝试快速移动它时，它会快速移动到文本视图的最底部。看起来顶部和底部就像强磁铁一样。我怎样才能使它在我稍微滚动文本视图时停止工作？我检查了一些属性，如反弹和其他，但我没有让它按我想要的那样工作。我不确定这是否是重要信息，但我将 textview 定义为插座，分配 @property 并合成它。

我试图浏览论坛，但找不到答案。谢谢你的帮助。在 touchesBegan 方法中，我有：

```
- (void)touchesBegan:(NSSet *)touches WithEvent:(UIEvent *)event{
if (text1.editing) {
[text1 resignFirstResponder];
}
[super touchesBegan:touches WithEvent:event];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T05:44:39.263

`UITextView`在这里，您需要检查您是否编写了一些移动`Moving`手指的代码，我猜是这样。您需要检查您的`TouchEvents`方法...，如果是这样，那么您需要修复该代码

这些是`TouchEvents`方法，请检查这些方法。

```
 - (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event;
 - (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event;
 - (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event; 
```

好的，如果您在这些方法中没有写任何与 相关的内容`UITextView`，我会说您应该查看其属性，`UITextView`如下图所示。

请再看看这个。

![在此处输入图像描述](../Images/be3e50c4a50e9decd165c5edf7ad3a33.png)

**编辑**：请确保您已经创建了`UITextView`With `Sufficient Size`。

我希望它会帮助你老兄..!!!!!!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T05:50:34.477

尝试设置：

```
yourTextView.pagingEnabled = TRUE; 
```

或在您的 xib 中检查 Paging Enabled 属性。

# asp.net-mvc - 将 BAL 中的自定义异常绑定到 MVC 中控制器的 ModelState

> ID：13391822
> 
> 赞同：0
> 
> 时间：2012-11-15T05:04:01.327
> 
> 标签：asp.net-mvc, validation, modelbinders

发生某些验证错误时，MY Business 服务返回带有键/值字典的自定义规则异常。

对于我想在我的 MVC 项目中处理并与 ModelState 绑定的此类验证错误，这些错误将自动填充到视图中。

但是因为它会在发生任何异常时自动重定向到错误页面。是否可以处理错误并在同一视图上显示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T07:01:12.180

```
try
{
    BusinessService.SomeOperation(model);

    return RedirectToAction("Index"); //success
}
catch(RulesException ex)
{
    foreach(var validationResult in ex.Result)
    {
          ModelState.Add(validationResult.Key, validationResult.Value)
    } //populate modelstate

    return View(model); //redisplay view with errors
} 
```

# google-maps - 使用 KML 在 Google 地图上显示多边形或圆形及其名称

> ID：13391825
> 
> 赞同：1
> 
> 时间：2012-11-15T05:04:31.530
> 
> 标签：google-maps, google-maps-api-3, kml

我可以在 Google 地球上显示 KML。现在我想在地图上显示相同的内容。这怎么可能？这是我的 KML 附件...

```
<?xml version="1.0" encoding="UTF-8"?> <kml xmlns="http://www.opengis.net/kml/2.2">
  <Document>
    <name>Hide and show labels</name>
    <Style id="sn_hide">
      <IconStyle>
        <scale>0</scale>
      </IconStyle>
    </Style>

    <StyleMap id="msn_hide">
      <Pair>
        <key>normal</key>
        <styleUrl>#sn_hide</styleUrl>
      </Pair>      
    </StyleMap>
    <Placemark>
      <name>Placemark 1</name>
      <description>Label hidding</description>
      <styleUrl>#sn_hide</styleUrl>
      <Point>
        <coordinates>-119.232195,36.016021</coordinates>
      </Point>
    </Placemark>
    <Placemark>
      <name>Placemark 2</name>
      <description>Label hidding</description>
      <styleUrl>#sn_hide</styleUrl>
      <Point>
        <coordinates>-119.232195,36.0162</coordinates>
      </Point>
    </Placemark>

  </Document>
</kml> 
```

提前谢谢..​</p>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T05:57:36.383

要在 Google 地图上显示 KML，它需要位于可公开访问的网络服务器上。

然后使用 Google Maps API v3 [KmlLayer](https://developers.google.com/maps/documentation/javascript/reference#KmlLayer)或[Google Maps](http://maps.google.com)

[文档中的 Google Maps API v3 KmlLayer 示例](https://google-developers.appspot.com/maps/documentation/javascript/examples/layer-kml)

显示 KML 文件的代码：

```
 var chicago = new google.maps.LatLng(41.875696,-87.624207);
    var mapOptions = {
      zoom: 11,
      center: chicago,
      mapTypeId: google.maps.MapTypeId.ROADMAP
    }

    var map = new google.maps.Map(document.getElementById('map_canvas'), mapOptions);

    var ctaLayer = new google.maps.KmlLayer('http://gmaps-samples.googlecode.com/svn/trunk/ggeoxml/cta.kml');
    ctaLayer.setMap(map); 
```

[这](https://maps.google.com/maps?q=http%3a%2F%2Fgmaps-samples.googlecode.com%2Fsvn%2Ftrunk%2Fggeoxml%2Fcta.kml&hl=en&sll=32.824552,-117.108978&sspn=0.691256,0.883026&t=h&z=10)是 Google 地图上显示的同一个 KML 文件。

更新：

http://www.geocodezip.com/geoxml3_test/Point_Placemarks.Descriptive_HTML_kml.xml">这是您使用 Google Maps API v3 geoxml3 第三方解析器显示的评论中文件的本地副本（KmlLayer 似乎认为它是无效的文档）

[这是谷歌地图上显示的 KML](https://maps.google.com/maps?q=http%3a%2F%2Fwww.geocodezip.com%2Fgeoxml3_test%2FPoint_Placemarks.Descriptive_HTML_kml.xml&hl=en&sll=32.824552,-117.108978&sspn=0.691256,0.883026&t=h&z=19)

# php - 为 wp_nav_menu 设置类

> ID：13391826
> 
> 赞同：2
> 
> 时间：2012-11-15T05:05:02.957
> 
> 标签：php, css, wordpress, navigation, html-lists

如何转换：

```
<ul class="ulStyle">
<li class="liStyle">
<div class="first">
<div class="second">
menu1
</div>
</div>
</li>
</ul> 
```

到 wp_nav_menu

里面的 div 和 class 太多了，谁能帮我解决这个问题？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T05:23:28.107

这可以使用`nth-child()`css中的选择器来完成

[在此处](http://codepen.io/anon/pen/qilKp)查看代码笔

使用这个 CSS：

```
.wp_nav_menu div:nth-child(1) {

  background: blue;

}

.wp_nav_menu div:nth-child(2) {

  background: red;

} 
```

带有以下标记：

```
<ul class="wp_nav_menu">
  <li>
    <div>
      Foo
    </div>
    <div>
      Bar
    </div>  
  </li>
</ul> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T05:22:48.363

如我所见，您正在使用可能具有 Walker 的自定义主题。在 WordPress 中，您可以使用 Walker 来修改由 wp_nav_menu 呈现的 HTML。

[http://codex.wordpress.org/Function_Reference/Walker_Class](http://codex.wordpress.org/Function_Reference/Walker_Class)

先看看有没有，一般在theme/functions.php

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T08:08:11.947

在开始使用自定义步行器之前，请使用选项`before`、`after`、`link_before`和。请参阅[http://codex.wordpress.org/Function_Reference/wp_nav_menu](http://codex.wordpress.org/Function_Reference/wp_nav_menu)`link_after``items_wrap`

它将允许您更改菜单项的封装。

# php - 无法连接到mysql服务器

> ID：13391827
> 
> 赞同：0
> 
> 时间：2012-11-15T05:05:05.500
> 
> 标签：php, mysql, phpmyadmin

我正在创建一个 php 页面（在 godaddy 服务器上），它需要连接到 mysql 服务器并从数据库中检索数据。当我运行该页面时，我收到一条错误消息，说明了这一点。

**警告：mysql_connect() [function.mysql-connect]：无法连接到 ** 上的 MySQL 服务器**

它说错误在下面一行，

**$conn=mysql_connect($dbhost,$username,$password);**

我的疑问是，

需要提供什么来代替用户名和密码？现在我已经给出了在 mysql 中创建新数据库时使用的用户名和密码。我究竟做错了什么？

提前致谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T05:08:33.387

在共享的 go daddy DB 上，您不能将 localhost 用于 $dbhost

您将需要使用您的 godaddy mysql cp 中指定的位置

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T18:51:26.640

不要使用“localhost”作为数据库驱动网站的主机名。成功创建数据库后，您的主机名将显示在主机控制面板的数据库信息页面上。

查找数据库的主机名

1.  登录您的客户经理。
2.  单击虚拟主机。
3.  在您要使用的主机帐户旁边，单击启动。
4.  在主机控制面板的数据库部分中，根据您想要主机名的数据库类型，单击 MySQL 或 MSSQL。
5.  从您的数据库列表中，单击要使用的数据库旁边的操作，然后单击详细信息。

您的数据库主机名显示在主机名字段中。

# c# - 需要使用不同的记录 ID 更改最近修改日期的查询

> ID：13391835
> 
> 赞同：1
> 
> 时间：2012-11-15T05:06:04.453
> 
> 标签：c#, linq, c#-4.0, linq-to-sql, asp.net-mvc-4

代码：

```
public IList<TestGridModel> GetRecords()
{
    return _TestRepository.GetAll()
           .Select(x => new TestGridModel
           {
               IdName = x.IdName,
               LName = x.LastName,
               FName = x.FirstName,
               IdRecord = x.RecordId,
               LastModifiedDate = x.LMDate
           }).ToList();
} 
```

> 我需要根据以下条件更改上述查询。
> 
> 我想获取具有不同 IdRecords(IdRecord) 的最近修改日期 (LastModifiedDate) 的记录。

**注意**：记录 ID 可能重复，但我需要获取具有不同记录 ID 的最近修改日期的记录。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T05:25:04.520

您可以使用`GroupBy`然后按修改日期从组订单中取出第一个项目。

```
_TestRepository.GetAll()
               .GroupBy(x => x.RecordId)
               .Select(g => g.OrderByDesceding(i => i.LMDate).First()})                                                      
               .Select(x => new TestGridModel
                {
                   IdName = x.Itemx.IdName,
                   LName = x.LastName,
                   FName = x.FirstName,
                   IdRecord = x.RecordId,
                   LastModifiedDate = x.LMDate
                }); 
```

# java - java中的链表

> ID：13391836
> 
> 赞同：0
> 
> 时间：2012-11-15T05:06:07.493
> 
> 标签：java, linked-list

我正在为一个作业编写一个 LinkedList 类，我正在编写我的插入方法，并且想知道是否可以查看它。

```
private Node first;     // start of the list

private class Node {
    private Item item;
    private Node next;
}

public boolean insert(Item item) {
    // add item to list if it doesn't already exist
    // return true if a new Node is created, otherwise false
    if ( first.next == null && first.item == item) {
        return false;
    }
    Node ptr = first;
    while (ptr.next != null) {
        if (ptr.item == item) {
            return false;
        }
        ptr = ptr.next;
    }
    Node oldFirst = first;
    first = new Node();
    first.item = item;
    first.next = oldFirst;
    return true;
} 
```

在大多数情况下，我认为这没关系，但每次我尝试跟踪插入方法时，我最终都会让自己感到困惑并弄乱所有参考更改。有人可以告诉我我做得对吗？任何其他改进也将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T06:48:13.057

我会考虑编写一个额外的函数来检查项目是否已经在列表中。这将使插入功能更加清晰，整个参考变化只会在那里。还有你的第一个测试：

```
if ( first.next == null && first.item == item) {
    return false;
} 
```

除了 while 循环的第一次迭代之外什么都不做。

您绝对应该首先初始化，以免像@threenplusone 所说的那样抛出 NullPointerExcpetion 或检查是否：`first == null`。（如果 first 为空，则 while 循环中的第一个 ptr.next 会引发 NPE）此外，您应该按照 @Thilo 所说的那样比较您的项目。

其余的我认为是正确的。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-15T05:12:09.353

您的 insert 方法不是 OO - 您正在使用`while`循环遍历列表，因此此方法可能是一种`static`方法（如果您还传入了第一个节点）。

更优雅的方式是：

在伪代码中：

```
insert(item) {
    if (next == null)
        add item to "this" // we are at end of list
    else
        next.insert(item) // hand item to the next node
} 
```

# javascript - 强制员工使用 Firefox + 公司内网指定版本

> ID：13391841
> 
> 赞同：-2
> 
> 时间：2012-11-15T05:06:41.647
> 
> 标签：javascript, jquery, firefox, user-agent, browser-detection

**请不要将其变成关于哪种浏览器更好以及强制浏览器的道德规范的讨论。这是一个内网，这是我必须做的，所以每个人都冷静下来=o）**

我需要防止员工试图绕过检查以不使用他们喜欢的浏览器而不是公司强制的一个 + 版本。该决定是基于安全性、兼容性、成本和使用公司制造的 Firefox 扩展。

我遇到了[强制用户使用 Chrome/FireFox 而不是 IE](https://stackoverflow.com/questions/10245417/force-users-to-use-chrome-firefox-instead-of-ie)，我可以在 PHP 中轻松地强制使用 Firefox，但是它依赖于用户代理，可以在众多浏览器中轻松更改并使用插件。

是否有一个我可以使用的 JavaScript 解决方案，它不检查用户代理或任何可以被用户/插件“轻松”修改的值？它需要检测浏览器是否是 Firefox 以及它是什么版本。站点使用 jQuery，所以如果可以使用它来完成，但不是必需的，那么绝对是的。我只是不知道有什么方法可以检测浏览器及其版本，而无需检查用户代理。

我记得以前检测 Netscape 或使用某些浏览器检查 document.all 而不是 useragent，所以我猜测类似的东西，只有 Firefox 才有。

非常感谢您！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T05:13:46.430

试试这个：http: [//jsfiddle.net/DerekL/62exH/](http://jsfiddle.net/DerekL/62exH/)

由于[Firefox 的处理`onpopstate`方式](https://developer.mozilla.org/en-US/docs/DOM/window.onpopstate)与其他浏览器不同，因此您可以使用它来检测它是否是 Firefox。这不能由用户或脚本更改。但缺点是只能通过做得到版本号`navigator.appVersion`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T05:13:19.260

您只能尝试但不能成功强制浏览器。话虽如此，您可以在其他浏览器中删除 CSS，这可能会使您的网站在其他浏览器中几乎无法使用。

要使您的 CSS 仅适用于 Firefox，您可以尝试给定的方法 @ [Targeting only Firefox with CSS](https://stackoverflow.com/q/952861/30594)

# android - 标签主机图像悬停不工作Android

> ID：13391845
> 
> 赞同：0
> 
> 时间：2012-11-15T05:07:17.660
> 
> 标签：android, android-xml

我正在使用 xml 文件在我的选项卡主机中设置图像悬停。但它对我不起作用。请查看下面的代码，看看我是否忘记了什么或者我的代码有什么问题。

主要活动课

```
public class MainActivity extends TabActivity {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        TabHost tabHost = getTabHost();

        // Tab for Photos
        TabSpec photospec = tabHost.newTabSpec("Photos");
        // setting Title and Icon for the Tab
        photospec.setIndicator("Photos", getResources().getDrawable(R.drawable.icon_photos_tab));
        Intent photosIntent = new Intent(this, PhotosActivity.class);
        photospec.setContent(photosIntent);

        // Tab for Songs
        TabSpec songspec = tabHost.newTabSpec("Songs");
        songspec.setIndicator("Songs", getResources().getDrawable(R.drawable.icon_songs_tab));
        Intent songsIntent = new Intent(this, SongsActivity.class);
        songspec.setContent(songsIntent);

        // Tab for Videos
        TabSpec videospec = tabHost.newTabSpec("Videos");
        videospec.setIndicator("Videos", getResources().getDrawable(R.drawable.icon_videos_tab));
        Intent videosIntent = new Intent(this, VideosActivity.class);
        videospec.setContent(videosIntent);

        // Adding all TabSpec to TabHost
        tabHost.addTab(photospec); // Adding photos tab
        tabHost.addTab(songspec); // Adding songs tab
        tabHost.addTab(videospec); // Adding videos tab

    }

} 
```

我的悬停 XML 文件

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android" >
    <!-- When selected, use grey -->
    <item android:drawable="@drawable/photohover"
          android:state_selected="true" />
    <!-- When not selected, use white-->
    <item android:drawable="@drawable/photo" />

</selector> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T06:52:41.293

我检查了你的代码，它工作正常。我不知道你有什么问题。请检查此链接。它将帮助您理解 Tabwidget 概念。[http://www.rdcworld-android.blogspot.in/2011/11/tabwidget-in-android-advance.html](http://www.rdcworld-android.blogspot.in/2011/11/tabwidget-in-android-advance.html)

让我知道您仍然面临 tabwiget 的问题，并提供明确的信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T08:03:11.380

问题解决了。我只是将 getResources() 更改为 context.getResources() ，它工作正常。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-28T04:54:02.863

试试这个 ：-

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <!-- selected state -->
    <item android:drawable="@drawable/normal_pressed"
          android:state_selected="true"
          android:state_pressed="false" />
    <!-- unselected state (default) -->
    <item android:drawable="@drawable/normal" />
</selector> 
```

# standards - foo 和 bar 以外的标准术语

> ID：13391847
> 
> 赞同：1
> 
> 时间：2012-11-15T05:07:51.253
> 
> 标签：standards, sample

在提供示例代码时，“foo”和“bar”通常用于表示“任意值”，以至于它们几乎是标准符号。

当您想显示两个以上的任意值时，是否有更多“标准”术语？

IE。是否有前两个是“foo”和“bar”的术语的标准列表？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-15T05:12:12.627

这些被称为“元合成变量”。我不会认为它们中的任何一个是标准的，但 Wikipedia 提供了以下在美国很常见的内容：

```
foo
bar
baz
qux
quux
corge
grault
garply
waldo
fred
plugh
xyzzy
thud 
```

来源：[http ://en.wikipedia.org/wiki/Metasyntactic_variable](http://en.wikipedia.org/wiki/Metasyntactic_variable)

就个人而言，我只看到列表中使用了 foo、bar、baz 和 xyzzy。该列表引用自[RFC 3092](http://www.faqs.org/rfcs/rfc3092.html)。

# android - startActivity 方法不会在真实设备中启动新活动

> ID：13391851
> 
> 赞同：0
> 
> 时间：2012-11-15T05:08:18.613
> 
> 标签：android, android-intent, android-activity, start-activity

我是Android的初学者。我正在尝试通过 onclick 事件中的意图开始一个新活动。这在模拟器中运行良好。但是当我在真实设备中尝试它时它不起作用并且应用程序再次进入主屏幕。logcat 中没有显示错误。

这就是我调用该`startActivity`方法的地方。

```
relativeAbout.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub
            try {
                Class OurClass = Class
                        .forName("com.wad.tourismguide.AboutCity");
                Intent newIntent = new Intent(getApplicationContext(),
                        OurClass);

                newIntent.putExtra("name", name);
                newIntent.putExtra("detail", detail);
                newIntent.putExtra("image", main);
                startActivity(newIntent);

                System.out.println("intent starting");
            } catch (ClassNotFoundException e) {
                // TODO: handle exception
                e.printStackTrace();
            }
        }
    }); 
```

新活动如下所示。

```
 public class AboutCity extends Activity {
    TextView cityName;
    ImageView image;
    TextView detailText;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);

        setContentView(R.layout.aboutcity);

        cityName = (TextView)findViewById(R.id.tvDetailCityName);
        image = (ImageView)findViewById(R.id.ivDetailImage);
        detailText = (TextView)findViewById(R.id.tvDetailText);

        String name = getIntent().getStringExtra("name");
        System.out.println("city name"+ name);
        String detail = getIntent().getStringExtra("detail");
        System.out.println("city detail"+ detail);
        Bitmap b= (Bitmap)getIntent().getParcelableExtra("image");
        System.out.println(detail);
        cityName.setText(name);
        detailText.setText(detail);
        image.setImageBitmap(b);
    }

} 
```

正如我之前解释的，这在模拟器中运行良好。但它在真实设备中不起作用。我找不到哪里出错了。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T05:21:34.217

除非有特定原因使用`Class OurClass = Class.forName("com.wad.tourismguide.AboutCity");`来设置 target `Class`，否则通过 Intent (with `Extras`) 调用另一个活动的传统方式将像宣传的那样工作。

```
Intent newIntent = new Intent(getApplicationContext(), AboutCity.class);
newIntent.putExtra("name", name);
newIntent.putExtra("detail", detail);
newIntent.putExtra("image", main);
startActivity(newIntent); 
```

您还可以尝试另一种变体，它基本上可以像上面的代码一样工作：

```
Intent newIntent = new Intent();
newIntent.setClass(getApplicationContext(), AboutCity.class);
newIntent.putExtra("name", name);
newIntent.putExtra("detail", detail);
newIntent.putExtra("image", main);
startActivity(newIntent); 
```

**编辑：**阅读此内容后：[http](http://www.xyzws.com/Javafaq/what-does-classforname-method-do/17) ://www.xyzws.com/Javafaq/what-does-classforname-method-do/17 ，我倾向于认为`Class OurClass = Class.forName("com.wad.tourismguide.AboutCity");`根本不需要。如果我在这方面错了，有人可以纠正我。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T01:43:16.847

我认为您的代码没有错，但是您可以在调用新 Intent 时对其进行简单化：

```
Intent newIntent = new Intent(CurrentActivity.this, AboutCity.class);
newIntent.putExtra("name", name);
newIntent.putExtra("detail", detail);
newIntent.putExtra("image", main);
startActivity(newIntent); 
```

毕竟你的代码会更清晰，你不需要看到异常（更少的错误机会）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T05:43:41.000

只需将您当前的活动类和要启动的活动类传递给构造函数：

```
Intent intent = new Intent(CurrentActivity.this, AboutCity.class);
// put extra
startActivity(intent); 
```

# syntax - 在 fontspring 防弹@font-face 语法上...... # 之后是什么？

> ID：13391854
> 
> 赞同：1
> 
> 时间：2012-11-15T05:08:55.930
> 
> 标签：syntax, font-face

我见过几个防弹语法的例子。我从 fontspring 的原始文章中获取了这个：

```
@font-face {
font-family: 'MyFontFamily';
src: url('myfont-webfont.eot?#iefix') format('embedded-opentype'), 
     url('myfont-webfont.woff') format('woff'), 
     url('myfont-webfont.ttf')  format('truetype'),
     url('myfont-webfont.svg#svgFontName') format('svg');
} 
```

**在svg#**之后到底应该做什么？“svg font name”是关于文件名的？字体系列声明？如果我的字体系列有空格怎么办？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T06:46:11.377

#svgFontName 引用嵌入在 svg 字体文件中的字体 ID。因此，例如，您的 svg 文档中可能有这样的内容：

```
<font id="example-font-name" horiz-adv-x="512"> 
```

应该在 CSS @font-face 中引用“example-font-name”，如下所示*：*

```
url('myfont-webfont.svg#example-font-name') format('svg'); 
```

SVG 字体增加了对 Legacy iOS 的支持，所以它不是很重要。通过在任何文本编辑器中打开 SVG 字体文件来查看它，然后在文档顶部查找字体 ID。如果您有任何问题，请告诉我！

# python - 在 SQL Server 中插入点？

> ID：13391857
> 
> 赞同：4
> 
> 时间：2012-11-15T05:09:23.540
> 
> 标签：python, sql-server, spatial-query, pymssql

全新的 python 并喜欢它，我想这可能是一个简单的。
我目前在[pymssql](http://code.google.com/p/pymssql/wiki/PymssqlExamples)的帮助下通过 Python 脚本将点插入 SQL Server 2008 。

```
var1 = "hi"
lat = "55.92"
lon = "-3.29"

cursor.execute("INSERT INTO table (field1, x, y) VALUES(%s, %s, %s)", 
(var1 , lat, lon)) 
```

这一切都很好。我还需要将这些坐标插入到[GEOGRAPHY 类型](http://msdn.microsoft.com/en-us/library/bb933834.aspx)字段（称为 geog）中。

```
geog_type = "geography::STGeomFromText('POINT(%s %s)',4326))" % (lat, lon)

cursor.execute("INSERT INTO table (field1, x, y, geog) VALUES(%s, %s, %s, %s)", 
(var1 , lat, lon, geog_type)) 
```

这会引发以下异常：

> 输入知名文本 (WKT) 中的标签 geography::STGeomFro 无效。有效标签为 POINT、LINESTRING、POLYGON、MULTIPOINT、MULTILINESTRING、MULTIPOLYGON、GEOMETRYCOLLECTION、CIRCULARSTRING、COMPOUNDCURVE、CURVEPOLYGON 和 FULLGLOBE（仅限地理数据类型）。

从 SSMS 我可以在表上运行插入语句来插入一个点。

```
USE [nosde]
INSERT INTO tweets (geog) 
    VALUES(
        geography::STGeomFromText(
        'POINT(55.9271035250276 -3.29431266523898)',4326)) 
```

如果您需要更多详细信息，请在评论中告诉我。

[我在 pastebin 上](http://pastebin.com/zSNG9u50)的一些工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T11:53:36.080

几个问题 - 首先，您以错误的顺序提供坐标 - STPointFromText() 方法首先需要经度，然后是纬度。

其次，使用 Point() 方法可能比 STPointFromText() 方法更容易，后者不需要任何字符串操作 - 只需直接提供两个数字坐标参数。[http://technet.microsoft.com/en-us/library/bb933811.aspx](http://technet.microsoft.com/en-us/library/bb933811.aspx)

但是，从错误消息来看，您发送的值似乎正试图被解析为 WKT 字符串。如果是这种情况，您无论如何都不希望额外的 geography::STGeomFromText 和 SRID - 这些都是假设的。所以尝试只提供：

```
geog_type = "'POINT(%s %s)'" % (lon, lat)

cursor.execute("INSERT INTO table (field1, x, y, geog) VALUES(%s, %s, %s, %s)", 
(var1 , lat, lon, geog_type)) 
```

我不确定您是否需要在第一行添加额外的单引号，但目前还没有可以测试的系统。

# iphone - 如何在自定义滑动（而不是滑动删除）单元格（滑动到邮件/短信）中点击一个单元格时删除在其他 TableView 单元格中添加的子视图

> ID：13391863
> 
> 赞同：0
> 
> 时间：2012-11-15T05:09:51.437
> 
> 标签：iphone, objective-c, uitableview

在我的**iPhone UITable 视图**应用程序中

**当用户在表格视图单元格/行上滑动时，我需要添加两个按钮。**

一个用于**撰写邮件按钮**，一个用于向联系人**发送短信按钮。**

*我现在实现了以下代码来添加发送邮件**（蓝色云按钮**）*

```
//Add a left swipe gesture recognizer in view Did load
      UISwipeGestureRecognizer *recognizer = [[UISwipeGestureRecognizer alloc] initWithTarget:self 
                                                                                       action:@selector(swipeRow:)];

      [recognizer setDirection:(UISwipeGestureRecognizerDirectionRight)];
      [contactsTable addGestureRecognizer:recognizer];
      [recognizer release];    

- (void)swipeRow:(UISwipeGestureRecognizer *)gestureRecognizer
{
      //Get location of the swipe
      CGPoint location = [gestureRecognizer locationInView:contactsTable];
      NSIndexPath *indexPath = [contactsTable indexPathForRowAtPoint:location];
       UITableViewCell *cell = [contactsTable cellForRowAtIndexPath:indexPath];

       UIButton *MailButton = [UIButton buttonWithType:UIButtonTypeCustom];
                  [MailButton setBackgroundImage:[UIImage imageNamed:@"sendData.png"]         forState:UIControlStateNormal];
                MailButton.frame=CGRectMake(150, 0, 40.0, 30.0);
         [MailButton addTarget:self action:@selector(SendMail)   forControlEvents:UIControlEventTouchUpInside];

      //Add mail button if index path is valid
      if(indexPath)
      {

            [cell addSubview:MailButton];

      }

} 
```

*当我们在单元格上滑动时，它执行良好并将按钮添加到选定的单元格/行。*

**`But when we swipe another cell the buttons on the previous cell are does not hide / removed`重复如下**

**我不想在其他单元格上显示（删除）按钮，同时在另一个单元格上轻扫，一次只有一个云按钮..**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T12:24:24.273

为什么不可以将按钮保留在 XIb 中并将其添加到相应的单元格中？它是整个类的单个对象，因此以前的单元格中不会有重复的按钮。请试试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T12:07:47.373

您需要的是一个 ivar，用于存储添加云按钮的 lastIndexPath。每次添加新按钮时，您都必须从先前添加的 indexPath 中删除该按钮并将新的 indexPath 分配给 ivar。

您的代码可能看起来像这样（未经测试）。

在属性的 .h 文件中

```
@property (strong, nonatomic) NSIndexPath *lastIndexPath; 
```

并在 .m 文件中合成它。

现在代码将如下所示

```
UISwipeGestureRecognizer *recognizer = [[UISwipeGestureRecognizer alloc] initWithTarget:self 
                                                                                       action:@selector(swipeRow:)];

      [recognizer setDirection:(UISwipeGestureRecognizerDirectionRight)];
      [contactsTable addGestureRecognizer:recognizer];
      [recognizer release];    

- (void)swipeRow:(UISwipeGestureRecognizer *)gestureRecognizer
{
      //Get location of the swipe
      CGPoint location = [gestureRecognizer locationInView:contactsTable];
      NSIndexPath *indexPath = [contactsTable indexPathForRowAtPoint:location];
      //New Code 
      UITableViewCell *cell = [contactsTable cellForRowAtIndexPath:indexPath];
      if(lastIndexPath != nil)
           UITableViewCell *last = [contactsTable cellForRowAtIndexPath:lastIndexPath];
      //End 
       UIButton *MailButton = [UIButton buttonWithType:UIButtonTypeCustom];
                  [MailButton setBackgroundImage:[UIImage imageNamed:@"sendData.png"]         forState:UIControlStateNormal];
                MailButton.frame=CGRectMake(150, 0, 40.0, 30.0);
         [MailButton addTarget:self action:@selector(SendMail)   forControlEvents:UIControlEventTouchUpInside];
MailButton.tag = 1111;// New code

      //Add mail button if index path is valid
      if(indexPath)
      {
            //New Code
            UIButton *mb = (UIButton *) [cell viewWithTag:1111];
            [mb removeFromSuperview];
            //End 
            [cell addSubview:MailButton];
            lastIndexPath = indexPath;// New Code
      }

} 
```

# objective-c - 如何获取 NSTextView 的行距？

> ID：13391868
> 
> 赞同：0
> 
> 时间：2012-11-15T05:10:47.263
> 
> 标签：objective-c, cocoa, nstextview

如何获取 NSTextView 的行距？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T10:41:27.437

你必须得到`defaultParagraphStyle`你的 NSTextView。

```
myTextView.defaultParagraphStyle.lineSpacing 
```

# php - 用下划线替换多维数组中的数组键空间

> ID：13391869
> 
> 赞同：2
> 
> 时间：2012-11-15T05:11:01.257
> 
> 标签：php, arrays, multidimensional-array

我有一个数组，整个键都有空格。这使得在其他无法定位空格的程序中定位成为问题，并且在键中有空格是不好的做法。

我正在寻找可以删除键空间并用多维数组中的下划线替换的东西。很可能必须是递归函数？

在另一个问题中发现了类似的东西，但是关于替换值。

```
foreach ($all_regions as $key => $value){
 $all_regions[$key] = strtolower(str_replace(' ', '_', $value));
} 
```

几乎需要这个复制，但对于密钥。我遇到的问题是我可以考虑如何引用键本身，因为如果您尝试像上述方法一样推送，它只会重新创建另一个带有下划线的键。

数组的一个片段，这是尽可能深的。

```
Array
(
    [0] => Array
        (
            [Line Identifier] => PID
            [Set ID] => 1
            [User ID] => 
            [Requests] => Array
                (
                    [0] => Array
                        (
                            [Line Identifier] => OBR
                            [Set ID] => 1
                            [Placer Order Number] => 021120091525
                            [Results] => Array
                                (
                                    [0] => Array
                                        (
                                            [Line Identifier] => OBX
                                            [Set ID] => 1
                                    [1] => Array
                                        (
                                            [Line Identifier] => OBX
                                            [Set ID] => 2 
```

我已经尝试过以下方法，但是`Key element cannot be a reference`

```
private function fixArrayKeys($array){
    if(is_array($array)){
        foreach($array as &$key => $value){
            if(!is_array($key))
                $array[strtolower(str_replace(' ', '_', $key))] = $value;
            else
                fixArrayKeys($array);
        }
    } else {
        return $array;
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-15T10:59:09.987

```
function fixArrayKey(&$arr)
{
    $arr=array_combine(array_map(function($str){return str_replace(" ","_",$str);},array_keys($arr)),array_values($arr));
    foreach($arr as $key=>$val)
    {
        if(is_array($val)) fixArrayKey($arr[$key]);
    }
} 
```

测试如下：

```
$data=array("key 1"=>"abc","key 2"=>array("sub 1"=>"abc","sub 2"=>"def"),"key 3"=>"ghi");
print_r($data);
fixArrayKey($data);
print_r($data); 
```

这输出：

```
Array
(
    [key 1] => abc
    [key 2] => Array
        (
            [sub 1] => abc
            [sub 2] => def
        )

    [key 3] => ghi
)
Array
(
    [key_1] => abc
    [key_2] => Array
        (
            [sub_1] => abc
            [sub_2] => def
        )

    [key_3] => ghi
) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T05:20:20.663

你为什么不首先从键中删除空格

```
foreach ($all_regions as $key => $value){
      $key = strtolower(str_replace(' ', '_', $key));
      $all_regions[$key] = strtolower(str_replace(' ', '_', $value));
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T05:25:52.197

试试下面，没有测试过，但看看关键的区别

```
function fixArrayKeys(&$array)
{
    if(is_array($array)){
        foreach($array as &$key => $value){
            if(!is_array($value))
                $array[strtolower(str_replace(' ', '_', $key))] = $value;
            else
                fixArrayKeys(&$value);
        }
    } else {
        return $array;
    }
} 
```

# android - 如何正确将 addTextChangedListener 添加到 listView 中？

> ID：13391872
> 
> 赞同：0
> 
> 时间：2012-11-15T05:11:43.443
> 
> 标签：android, listview, android-edittext

我喜欢将 addTextChangedListener 添加到我的 listView 中，但运行它后，它不会在屏幕上显示任何内容，只是一个空白屏幕。logcat 也没有给出任何内容，只是显示了一个选项卡，即“ActivityThread.performLaunchAcitvity(ActivityThread$ActivityClientRecord,Intent)line:2205”，其下方显示“未找到源”和一个按钮（编辑源查找路径）。我有尝试了某种方法，但到目前为止找不到使它起作用的方法..

这是主要活动：

```
public class MainActivity extends ListActivity {

ListView lv;
EditText inputSearch;
DefaultHttpClient httpclient;
HttpPost httppost;
HttpResponse response;
InputStream is;
BufferedReader reader;
StringBuilder sb;
String line,result;
String[] people;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);          

    getList();

    lv= (ListView) findViewById(R.id.list_view);
    inputSearch= (EditText) findViewById(R.id.inputSearch);

    inputSearch.addTextChangedListener(new TextWatcher() {
        public void afterTextChanged(Editable s) {
            if(s.length()==0){
                lv.clearTextFilter();
            }
        }
        public void beforeTextChanged(CharSequence s, int start, int count, int after){
        }
        public void onTextChanged(CharSequence s, int start, int before, int count)
        {
            lv.setTextFilterEnabled(true);
            lv.setFilterText(s.toString());
        }

    });
}

public void getList(){
    new Thread(){
        public void run(){
            try{
                 httpclient = new DefaultHttpClient();
                 httppost = new HttpPost("http://www.kryptoquest.com/testing/testList.php");
                 response = httpclient.execute(httppost);
                 is = response.getEntity().getContent();
            }catch(Exception e){
                Log.e("log_tag", "Error:"+e.toString());
            }

            //convert response to string
            try{
                    reader = new BufferedReader(new InputStreamReader(is,"iso-8859-1"),8);
                    sb = new StringBuilder();
                    line = null;
                    while ((line = reader.readLine()) != null) {

                            sb.append(line + "\n");

                    }
                    Log.d("test",sb.toString());
                    is.close();

                    result = sb.toString();

                    people = result.split("[*]");

                    runOnUiThread(new Runnable()
                    {
                        public void run(){
                            ArrayAdapter<String> list = new ArrayAdapter<String>(MainActivity.this,R.layout.list_item, R.id.user_name,people);
                            lv.setAdapter(list); 
                        }
                    });

            }catch(Exception e){
                    Log.e("log_tag", "Error converting result "+e.toString());
            }
        }
    }.start();
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}
} 
```

活动主.xml：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical">

 <!--Editext for Search -->
<EditText android:id="@+id/inputSearch"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:hint="Search.."
    android:inputType="textVisiblePassword"/>

<!--List View -->
<ListView
    android:id="@+id/list_view"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" />

</LinearLayout> 
```

list_item.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<!--Single ListItem -->

<!--User Name -->
<TextView android:id="@+id/user_name"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:padding="10dip"
    android:textSize="16dip"
    android:textStyle="bold"/>   

</LinearLayout> 
```

此外，我在其 Manifest 中添加了 uses-permission android:name="android.permission.INTERNET">。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T17:41:28.273

从您的 LogCat 中：

```
Your content must have a ListView whose id attribute is 'android.R.id.list' 
```

这意味着将`id`您的 ListView 更改为：

```
<!--List View -->
<ListView
    android:id="@android:id/list"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" /> 
```

ListActivities 需要布局中具有此确切 ID 的 ListView。

# css - 你能用 CSS 修改加载的 SVG 背景图像吗？

> ID：13391873
> 
> 赞同：3
> 
> 时间：2012-11-15T05:12:03.177
> 
> 标签：css, svg, background-image

我们第一次将 SVG 用于我们基于 HTML5 的移动应用精灵文件（它们使处理视网膜和其他屏幕尺寸差异变得容易）。

我知道生成的 SVG 可以直接操作（因为它们是文本文件），但是可以通过 CSS 或脚本修改 SVG 资产（在这种情况下，是通过 CSS 加载的背景图像）吗？

例如，我们可以加载一个全黑的 SVG 对象，然后将其更改为白色吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-15T05:19:36.067

`img`如果 SVG 文件作为图像加载（通过或`background-image`），您将无法访问 DOM 。您也不能通过 CSS 对其进行样式设置。

如果您打算进行此类操作，则应将 SVG 附加到`div`. 您仍然应该能够对该 div 执行类似精灵的操作。您将能够通过 CSS 或 javascript 对其进行样式设置。

* * *

SVG 应该是内联的。`background-image`您可以通过 ajax 请求将 SVG 复制并粘贴到用于包含或加载它的 div 中。

`background-position`您可以使用`left`或来代替动画`-webkit-transform: translate(...)`。

# switch-statement - 在函数“Calculate_Duty”中：错误：嵌套函数被禁用，使用 -fnested-functions 重新启用

> ID：13391877
> 
> 赞同：1
> 
> 时间：2012-11-15T05:12:35.390
> 
> 标签：switch-statement

# 包括

/* 声明函数原型 */

float Calculate_Duty (int, int);

无效 Print_Duty（浮点数）；

int 主要（无效）

{

/* 声明程序中要使用的所有变量 */

char more_to_process;

int 原产地、类别、数量、num_ship=0；

浮动单位价格；

浮动成本，关税，total_ship=0；

浮动total_duty=0，tax_rate=0；

/* 开始执行程序 */

printf("您还有更多海关表格要处理吗？输入：Y 表示是或 N 表示否 \n");

scanf("%c", &more_to_process);

而 ((more_to_process =='Y') && (more_to_process!='N'))

{

printf("货物的原产地是什么？类型：1代表美国，2代表中国，3代表巴西\n");

scanf ("%d", &origin);

printf("什么类别的商品？类型：1食品，2衣服，3木材\n");

scanf ("%d", &category);

printf("数量是多少？\n");

scanf ("%d", &quantity);

printf("单价是多少？\n");

scanf ("%f", &unit_price);

total_ship=数量*单价；

/* 计算货物的关税 */

tax_rate=Calculate_Duty（来源，类别）；

关税= tax_rate * total_ship；

总职责+=职责；

/* 打印货物的关税 */

printf("产地\t类别\t数量\t单价\t出货\t税率\t关税\t\n");

printf ("%d \t %d \t \t %d \t \t %02.f \t \t %0.2f \t %0.2f \t \t %0.2f \t \n", 原点,

类别、数量、单价、总船、税率、关税）；

Print_Duty（职责）；

printf ("您还有更多的海关表格要处理吗？类型：Y 表示是，N 表示否\n");

scanf (" %c", &more_to_process);

++num_ship;

}

printf("事务摘要：\n");

printf ("处理的货件数量 = %d \n", num_ship);

printf ("收集的总职责 = $ %0.2f \n", total_duty);

返回0；

}

/* 执行函数Calculate_Duty */

float Calculate_Duty (int origin, int category)

{

浮动税；

开关（原点）

{

/* 案例 1 适用于美国 */

情况1：

开关（类别）

{

情况1：

职责=0；

休息;

案例2：

职责= 0；

休息;

案例3：

职责= .05；

休息;

}

休息;

/* 案例 2 适用于中国 */

案例2：

开关（类别）

{

情况1：

职责= .02;

休息;

案例2：

职责= .03；

休息;

案例3：

职责= .04；

休息;

}

休息;

/* 案例 3 适用于巴西 */

案例3：

开关（类别）

{

情况1：

职责= .01；

休息;

案例2：

职责= .02;

休息;

案例3：

职责= .08;

休息;

}

退货税；

}

/* 执行 Print_Duty 函数 */

void Print_Duty（浮动税）

{

printf ("应付金额为 $ %0.2f \n", duty);

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T05:32:23.490

正如我所看到的，在返回值班之前，开关（原点）中缺少一个 }。

# c# - 将查询转换为 Lambda 表达式

> ID：13391878
> 
> 赞同：2
> 
> 时间：2012-11-15T05:12:47.293
> 
> 标签：c#, lambda

在 mysql 中，

```
select distinct(trim(containerType)) from productIn where containerType <> '' group by containerNo 
```

如何使用 Lambda 表达该查询？

前任）

```
List<string> containerTypes = new List<string>();
containerTypes = productInRepository.GroupBy(x=> x.containerNo).Select(?????).ToList(); 
```

![在此处输入图像描述](../Images/774e81a63a9d09932061c5f59c33aca4.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T05:15:35.853

```
List<string> containerTypes = productInRepository
    .Where(x => x.containerType != string.Empty)
    .GroupBy(x=> x.containerNo)
    .Select(x => x.containerType.Trim())
    .ToList(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T05:30:13.077

我认为不在结果选择中的 groupby 字段与 orderby 该字段的含义相同。

```
List<string> containerTypes = productInRepository
                .Where(x => x.containerType != string.Empty)
                .OrderBy(x => x.containerNo)
                .Select(x => x.containerType.Trim())
                .Distinct(); 
```

# perl - 使用 perl 到框图的层次结构

> ID：13391880
> 
> 赞同：-1
> 
> 时间：2012-11-15T05:13:09.760
> 
> 标签：perl

我有不同文件和子文件的结构化层次结构。我想将其转换为框图。

现在的问题是——perl 是直接还是间接支持这种想法？

如果您知道任何其他解决方案/解决方法，请分享。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T05:26:36.960

您可以查看[GraphViz](http://www.graphviz.org)。这是[介绍](http://www.linuxjournal.com/node/7275/print)和[CPAN 链接](http://search.cpan.org/dist/GraphViz/)。以及来自我不知道的某些来源的示例代码：

```
use strict;
use warnings;
use IO::Dir;
use GraphViz;
use GraphViz::Small;
use GraphViz::No;

my $directory = './';

my $graph = GraphViz::No->new(directed => 0, layout => 'twopi');

walk($directory);

sub walk {
  my($dir, $parent) = @_;
  $graph->add_node($dir) unless defined $parent;
  my $d = IO::Dir->new($dir);
  foreach my $file ($d->read) {
    next if $file =~ /^\./;
    if (-f $dir . $file) {
      $graph->add_node($dir . $file, label => $file);
      $graph->add_edge($dir => $dir . $file);
    } elsif (-d $dir . $file) {
      $graph->add_node($dir . $file . '/', label => $file . '/');
      $graph->add_edge($dir => $dir . $file . '/');
      walk($dir . $file . '/', $dir);
    }
  }
}

$graph->as_png("directories.png"); 
```

# c# - 检查用户是否从站点主文件登录

> ID：13391883
> 
> 赞同：0
> 
> 时间：2012-11-15T05:13:35.703
> 
> 标签：c#, asp.net, master-pages

当用户登录时，他们的会话设置如下：

```
HttpContext.Current.Session["LoggedIn"] = true;
HttpContext.Current.Session["FullName"] = (string)Reader["FirstName"] + " " + (string)Reader["LastName"]; 
```

我的`Site.master`文件包含一个站点范围的导航菜单，我想根据用户是否登录来更改它以显示不同的链接。

像这样的东西`Site.master`：

```
<div id="navigation">
    <ul>
    <% 
        if (HttpContext.Current.Session["LoggedIn"] != null)
        {
            %><li><a href="/user74/aspnet/Logout.aspx">Log out</a></li><%
        }
        else
        {
            %>
                <li><a href="/user74/aspnet/Register.aspx">Register</a></li>
                <li><a href="/user74/aspnet/Login.aspx">Log in</a></li>
            <%
        }
    %>
    </ul>
</div> 
```

但是，这似乎不起作用。看起来你不能像 PHP 标签一样使用 ASP 标签。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T05:28:01.070

首先，我建议您使用[ASP.NET 身份验证](http://msdn.microsoft.com/en-us/library/aa291347%28v=vs.71%29.aspx)来对用户进行身份验证，而不是使用 Session。这带来了许多好处，例如基于角色的安全性等。

您可以对用户进行身份验证

*   窗户（默认）
*   形式
*   护照

使用其中一种身份验证方法后，您可以使用`LoginView`控件为不同的用户集呈现不同的 HTML。有关详细信息，您可以查看[ASP.NET 提示：使用 LoginView 控件](http://www.codeguru.com/csharp/csharp/cs_misc/security/article.php/c13127/ASPNET-Tip-Using-the-LoginView-Control.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T05:34:43.743

似乎您更喜欢 PHP，对于初学者，我建议您使用普通的 .NET 进程

1.在aspx页面中写入HTML，用asp：linkbutton替换HTML'a'，likr

```
<div id="navigation">
 <ul>
  <li><asp:LinkButton ID="LinkButton2" runat="server" PostBackUrl="/user74/aspnet/Logout.aspx">Log out</asp:LinkButton></li>
 </ul>
</div> 
```

2.在 pagename.aspx.cs 页面中编写代码，在您的情况下，在 page_load 事件中编写会话检查

```
protected void Page_Load(object sender, EventArgs e)
{
    if (HttpContext.Current.Session["LoggedIn"] != null)
    {
        LinkButton1.Visible = true;
    }
} 
```

# css - 浮动 CSS 开始看起来像一个谜题

> ID：13391889
> 
> 赞同：0
> 
> 时间：2012-11-15T02:18:48.597
> 
> 标签：css, xhtml

我正在为学校编写一个基本站点，所有对象都漂浮在各处。这很令人沮丧，我很累。不，今晚不到期。但是，我想在路上给我一些指示。我应该删除我的 CSS 代码并重新开始确保我仔细检查所有内容，还是我的边距都错了？

**截屏**

[http://i.imgur.com/37zsQ.png](http://i.imgur.com/37zsQ.png)

**XHTML**

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">    

<head> 
<link rel="stylesheet" type="text/css" href="sitestyle.css"/> 
</head>

<body id="home"> 

<div id="site"> 

<ul id ="nav_bar"> 
    <li><a href="index.html">Home</a></li> 
    <li><a href="nutrition.html">Nutrition</a></li> 
    <li><a href="grooming.html">Grooming</a></li> 
    <li><a href="about.html">About</li> 
</ul> 

<div id="header">  
    <h1> Cat Site!</h1> 
    <h2>By: XXX XXX</h2>   
</div>

<address class="info">
<a href='mailto:&#116;&#109;&#107;&#114;&#97;&#117;&#115;&#53;&#64;&#99;&#99;&#46;&#117;&#109;&#66;&#666;&#666;&#666;&#666;&#666;&#666;&#46;&#666;&#66;'>&#69;&#109;&#97;&#105;&#108</a></br>
Developed with: Firefox 16.0.2\.  
</address>  

</div> 
<!-- End of info and header objects-->

<div id="col1"> 

    <img src="kitty.png" </> 
    Source: Shitty_Watercolour <a href="http://www.reddit.com/r/funny/comments/12zcnm/excuse_my_derp_face_but_i_think_i_just_accidently/c6zh53e"</a> 

</div>
<!--End of Col1-->

<div id="col2">  

<h2>Welcome!</h2> 

<h3 class ="subheading">What is this Cat site about?</h3> 
<p class = "sitetext"> Everyone loves cats. Yes, even you! This website should help you educate yourself about our feline friends briefly. 
That is to say, you won't waste a lot of unnecessary time here.</p> 

<!--End of col2 div-->
</div> 

<div style="text-align:center;color:black">     
     <script type="text/javascript">
        document.write("Last update: " + document.lastModified); 
     </script>      
 </div> 

<!--End of site-->
</div> 

</body> 
</html> 
```

**CSS**

```
#header { 
color: black;  
float: center;

}

ul#nav_bar {  
list-style-type: none;  
margin: 0;  
margin-left:0px;
font-size: 125%; 
color: pink; 
width: 25%; 
float: justified;
} 

#nav_bar li {   
float: left; 
}

#nav_bar a { 
display: block; background: pink; 
color: white; 
padding: 4px 6px; 
border: 1px solid; 
text-decoration: none; 
}

div#col2 { 
width: 50%; 
float: right; 
padding-left: 2.5%;
padding-right: 2.5%; 
background: grey; 
} 

#col1 { 
float: left; 
clear: left; 
font-size: 75%; 
text-align: center; 
margin: 1em 0 1.5em 1.5em; 
display: block; 

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T10:52:40.727

你想要做的是给你的页脚（你把上次修改日期的javascript放在哪里）样式“clear：both;”。这种样式防止元素与浮动元素内联混合，将其移动到它们正下方的位置。这应该可以解决大多数布局问题。

我还注意到您的代码中的一些内容，值得一提：

*   在html中，属性中不能有空格，即：`class="foo"`，不是`class = "foo"`
*   在 css 中，`float: justify`并且`float:center`不是有效的属性。它是右还是左。

# c# - C# - 订阅 ETW 事件频道？

> ID：13391893
> 
> 赞同：1
> 
> 时间：2012-11-15T05:14:45.077
> 
> 标签：c#, events, subscription, subscribe, etw

我可以使用 C# 的 EventLogReader 检索在特定操作通道中记录的所有 ETW 事件，使用类似于本页示例的代码：

[http://msdn.microsoft.com/en-us/library/bb671197(v=vs.90).aspx](http://msdn.microsoft.com/en-us/library/bb671197(v=vs.90).aspx)

我需要做的就是修改日志名称字符串以指向我感兴趣的操作通道（例如“Microsoft-Windows-RemoteAssistance/Operational”），然后我会看到所有输出到控制台的事件。

但是，我必须不断轮询/检查频道以查看是否有任何新事件，这并不理想。每当有新事件记录到频道时，我希望找到一种订阅（或以其他方式接收回调/通知）的方法。我确信必须有一种方法可以在回调中接收事件，但我在 MSDN 上没有发现任何明显的东西。

有谁知道如何从 C# 做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-15T05:30:45.547

你看过 EventLogWatcher 类吗？

[http://msdn.microsoft.com/en-us/library/system.diagnostics.eventing.reader.eventlogwatcher(v=vs.90).aspx](http://msdn.microsoft.com/en-us/library/system.diagnostics.eventing.reader.eventlogwatcher(v=vs.90).aspx)

允许您指定条件并在满足时引发 EventRecordWritten 事件。

# python - 返回频率如何分布为整数

> ID：13391900
> 
> 赞同：0
> 
> 时间：2012-11-15T05:15:46.137
> 
> 标签：python, nltk

我正在使用 FreqDist 来让单词出现在语料库中的次数非常快。问题是 ftable 没有将答案作为我需要对其进行一些基本操作的整数返回。

```
words = brown.words()
content = [w for w in words if w.lower()]
ftable = nltk.FreqDist(content) 
```

例如：

```
percent = ftable[sing]/ftable[s])*100 
```

我已经尝试过类似 ftable.N[sing] 但没有运气。

谢谢！

编辑：也在评论中。w.lower() 用于将语料库中的单词小写，这样当我对它们运行 for 循环时，我只比较小写值，因为 ftable 与字符串完全匹配。as Hello != hello 如果使用 Counter 是否一样快？有没有一种简单的方法可以降低正在搜索的语料库/单词表的大小写？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T05:30:24.370

似乎您正在寻找`collections.Counter`，而不是频率分布：

```
>>> from collections import Counter
>>> words = ['a', 'a', 'a', 'b']
>>> Counter(words)
Counter({'a': 3, 'b': 1}) 
```

另外，`[w for w in words if w.lower()]`可能有点慢。您可以使用`filter(None, words)`.

# python - 如何在python脚本中的终端之间切换脚本执行的动作？

> ID：13391901
> 
> 赞同：2
> 
> 时间：2012-11-15T05:15:48.717
> 
> 标签：python, unix, vi

我想运行一个脚本，其中包含一些要执行的命令，例如：pwd、xterm home、日期、时间在这里我想运行在第一个终端中执行 pwd 的脚本，然后在我想要的 xterm home 终端中创建一个 xterm home运行日期和时间命令，然后我想在主终端再次运行 pwd。“如何在 python 脚本中的终端之间切换？”

谢谢n问候

瓦桑库马尔·R·纳古尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T05:21:21.173

让您的脚本`myscript.py`采用可选参数，例如`other_term`. 产卵`xterm -e myscript.py other_term`。当第二个实例`myscript.py`启动时，检查可选参数`other_term`；如果存在，执行第二组命令。使用环境变量或文件或命令行参数或管道在第一个（初始）和第二个 ( `other_term`) 实例之间传输任何所需的状态。当`other_term`实例完成时，第二个实例`xterm`将自动关闭并将控制权返回给第一个（初始）实例，然后它可以继续执行其命令。如果您不希望第二个`xterm`关闭，则`xterm -e`异步生成并且不要让您的`other_term`脚本退出；让它发出信号（例如，通过信号量文件，或者，如果你知道怎么做，通过管道——`xterm`不会关闭文件句柄）到第一个实例可以恢复的第一个实例，例如，在退出两个脚本之前等待用户确认。

# java - 如何从堆栈中删除某些项目

> ID：13391904
> 
> 赞同：1
> 
> 时间：2012-11-15T05:16:02.863
> 
> 标签：java, linked-list, stack

我有一个作业问题，我需要从堆栈中删除所有绿色项目。

这是我的代码：

```
import java.util.*;
import java.io.*;

public class Pex
{
public static void main(String[] args)
{
Stack stack1 = new Stack(); 

addPez(stack1);
removeGreen(stack1);
System.out.println(printStack(stack2));
}

public void addPez(Stack stack1)
{
    stack1.push("yellow");
    stack1.push("red");
    stack1.push("green");
    stack1.push("green");
    stack1.push("yellow");
    stack1.push("yellow");
    stack1.push("red");
    stack1.push("green");
}

public static void removeGreen(Stack stack1)
{
Stack temp = new Stack();
while (!stack1.isEmpty()){
  String check = (String)(stack1.pop());
    if(check.equals("green")){
    stack1.pop();}
    else{
    temp.push(check);}
}
Stack stack2 = new Stack();
while (!temp.isEmpty()){
  String tmp = stack1.pop();
  stack2.push(tmp);}
}

public static void printStack(Stack stack2)
{
Stack xerox = stack2.clone();
while (!xerox.isEmpty()){
  System.out.println(xerox.pop());}
}
} 
```

有人可以指出我正确的方向吗？我想我快到了。

我还需要弄清楚为什么会出现一些错误。

以下是错误：

```
Pex.java:10: non-static method addPez(Stack) cannot be referenced from a static context
addPez(stack1);
^
Pex.java:12: cannot find symbol
symbol  : variable stack2
location: class Pex
System.out.println(printStack(stack2));
                              ^

Pex.java:39: incompatible types
found   : java.lang.Object
required: java.lang.String
  String tmp = stack1.pop();
                         ^

Pex.java:45: incompatible types
found   : java.lang.Object
required: Stack
Stack xerox = stack2.clone();
                          ^

./Stack.java:69: cannot find symbol
symbol  : variable stack1
location: class Stack
    stack2 = (Stack)(stack1.clone());
                     ^

5 errors 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T05:31:51.073

public static void main(String[] args) { Stack stack1 = new Stack();

```
 addPez(stack1);
    removeGreen(stack1);
    printStack(stack1); //stack2 is not defined and remove println statement
}

public static void addPez(Stack stack1) {//make addPez as static
    stack1.push("yellow");
    stack1.push("red");
    stack1.push("green");
    stack1.push("green");
    stack1.push("yellow");
    stack1.push("yellow");
    stack1.push("red");
    stack1.push("green");
}

public static void removeGreen(Stack stack1) {
    Stack temp = new Stack();
    while (!stack1.isEmpty()) {
        String check = (String) (stack1.pop());
        if (check.equals("green")) {
            //stack1.pop();
        } else {
            temp.push(check);
        }
    }
    //Stack stack2 = new Stack();
    while (!temp.isEmpty()) {
        String tmp = (String)temp.pop();
        stack1.push(tmp);
    }
}

public static void printStack(Stack stack1) {
    Stack xerox = (Stack)stack1.clone();
    while (!xerox.isEmpty()) {
        System.out.println(xerox.pop());
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T05:21:50.110

**1)**您在静态方法中调用非静态方法 addPez(...)。将 addPez() 更改为静态或在任何非静态方法中调用它
**2)** `System.out.println(printStack(stack2));`什么是 stack2？我在你的代码中没有找到它
**3)** `stack1.pop();` pop() 方法返回类型是 Object.所以你应该这样做
`String tmp = (String)stack1.pop();`
这是对象到 String 的类型转换（在你的情况下可以，但不推荐）
**4）& 5）** 施乐=（堆栈）stack2.clone（）；你需要这样做

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-15T05:24:28.153

> ```
> Pex.java:10: non-static method addPez(Stack) cannot be referenced 
> from a static context addPez(stack1); 
> ```

似乎您使用不正确，需要构造一个要使用的对象`addPez`，或者添加`static`到方法头以不以这种`objectName.methodName();`方式使用它。

**编辑：**哇，stackOverflow 很快。我得在比赛中振作起来。我认为其他人提供了您的答案。干杯!

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-15T05:22:57.867

`public void addPez(Stack stack1)`应该`public static void addPez(Stack stack1)`

您的主要方法中没有调用变量`stack2`，您的意思是`stack1`？

`System.out.println(printStack(stack2));`应该是`System.out.println(printStack(stack1));`？

这实际上会导致另一个错误，因为`printStack`它被清除为返回`void`，它`System.out.println()`不会喜欢。相反，只需直接调用 print 方法`printStack(stack1);`，因为它会以任何方式将结果转储到屏幕上......

您应该转换堆栈的返回类型，`String tmp = stack1.pop();`应该是`String tmp = (String)stack1.pop();`

`Stack xerox = stack2.clone();`和上一个是同一个问题，本质上应该是`Stack xerox = (Stack)stack2.clone();`

**想法**...

盲投通常是个坏主意（`(String)stack1.pop()`）。现在在您的简单程序中，这可能没什么大不了的，但会鼓励不良做法。

您应该利用[Java 的泛型](http://docs.oracle.com/javase/tutorial/java/generics/)支持

所以，而不是`Stack stack1 = new Stack();`你应该使用`Stack<String> stack1 = new Stack<String>();`

而不是`public static void addPez(Stack stack1)`你应该使用`public static void addPez(Stack<String> stack1)`

而不是`public static void removeGreen(Stack stack1)`你应该使用`public static void removeGreen(Stack<String> stack1)`

而不是`Stack temp = new Stack();`and`Stack stack2 = new Stack();`你应该使用`Stack temp = new Stack<String>();`and`Stack stack2 = new Stack<String>();`

而不是`public static void printStack(Stack stack2)`你应该使用`public static void printStack(Stack<String> stack2)`

这意味着您不再需要 remove 方法 ( `String check = (String) (stack1.pop())`) 中的 case，它变成`String check = stack1.pop();`

这基本上意味着您`Stack`只能包含`String`对象，并消除任何人将错误类型的堆栈传递给您的可能性。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-15T05:24:00.273

如果元素为“绿色”，则不应再次弹出。

```
while (!stack1.isEmpty()){
    String check = (String)(stack1.pop());
    if(!check.equals("green")) {
        temp.push(check);
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-15T05:28:24.433

我可以看到您应该解决这些问题以更正您的程序：

1.  `public void addPez(Stack stack1)`应该`static`

    ```
    public static void addPez(Stack stack1) 
    ```

2.  `System.out.println(printStack(stack2));`--方法`stack2`范围内没有定义变量`main`。

3.  在方法`removeGreen(Stack stack1)`中，您没有将结果`pop`转换为`String`

    ```
    String tmp = (String)stack1.pop(); 
    ```

4.  在方法`printStack(Stack stack2)`中，您没有将结果`clone`转换为`Stack`

    ```
    Stack xerox = (Stack)stack2.clone(); 
    ```

* * *

这些更正将使程序可编译，但您可以通过更多更改来使您的程序更好，这将提高时间和空间性能以及它的逻辑。

将您的方法更改`removeGreen`为以下内容：

```
public static Stack removeGreen(Stack stack1)
{
    Stack temp = new Stack();
    while (!stack1.isEmpty())
    {
        String check = (String)(stack1.pop());
        if( ! check.equals("green"))
        {
            temp.push(check);
        }
    }

    return temp;
} 
```

在`main`方法中将此行更改`removeGreen(stack1);`为以下内容：

```
stack1 = removeGreen(stack1); 
```

而且，还有一个

使用[泛型](http://en.wikipedia.org/wiki/Generics_in_Java)。IE

```
Stack<String> aStack = new Stack<String>(); 
```

比

```
Stack aStack = new Stack(); 
```

# android - 为什么 insertWithOnConflict(..., CONFLICT_IGNORE) 返回 -1（错误）？

> ID：13391915
> 
> 赞同：22
> 
> 时间：2012-11-15T05:17:27.297
> 
> 标签：android, android-sqlite

我有一个 SQLite 表：

```
CREATE TABLE regions (_id INTEGER PRIMARY KEY, name TEXT, UNIQUE(name)); 
```

还有一些安卓代码：

```
Validate.notBlank(region);
ContentValues cv = new ContentValues();
cv.put(Columns.REGION_NAME, region);
long regionId = 
    db.insertWithOnConflict("regions", null, cv, SQLiteDatabase.CONFLICT_IGNORE);
Validate.isTrue(regionId > -1,
    "INSERT ON CONFLICT IGNORE returned -1 for region name '%s'", region); 
```

在重复行上 insertWithOnConflict() 返回 -1，表示错误，然后[Validate](http://commons.apache.org/lang/api/org/apache/commons/lang3/Validate.html#isTrue%28boolean,%20java.lang.String,%20java.lang.Object...%29)抛出：

```
INSERT ON CONFLICT IGNORE returned -1 for region name 'Overseas' 
```

[SQLite ON CONFLICT 文档](http://sqlite.org/lang_conflict.html)（重点是我的）指出：

> 当发生适用的约束违例时，IGNORE 解析算法会跳过包含约束违例的一行并继续处理 SQL 语句的后续行，就好像没有出错一样。包含违反约束的行之前和之后的其他行被正常插入或更新。*使用 IGNORE 冲突解决算法时不返回错误。*

Android insertWithOnConflict [() 文档](http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html#insertWithOnConflict%28java.lang.String,%20java.lang.String,%20android.content.ContentValues,%20int%29)指出：

> 如果输入参数 'conflictAlgorithm' = CONFLICT_IGNORE，则返回新插入行的行 ID 或现有行的主键，如果有任何错误，则返回 -1

CONFLICT_REPLACE 不是一个选项，因为替换行将更改它们的主键，而不仅仅是返回现有键：

```
sqlite> INSERT INTO regions (name) VALUES ("Southern");
sqlite> INSERT INTO regions (name) VALUES ("Overseas");
sqlite> SELECT * FROM regions;
1|Southern
2|Overseas
sqlite> INSERT OR REPLACE INTO regions (name) VALUES ("Overseas");
sqlite> SELECT * FROM regions;
1|Southern
3|Overseas
sqlite> INSERT OR REPLACE INTO regions (name) VALUES ("Overseas");
sqlite> SELECT * FROM regions;
1|Southern
4|Overseas 
```

我认为 insertWithOnConflict() 应该在重复行上返回我重复行的主键（_id 列）——所以我不应该*收到*这个插入的错误。为什么 insertWithOnConflict() 会抛出错误？我需要调用什么函数才能始终获得有效的行 ID？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-02-25T10:26:25.180

不幸的是，您的问题的答案是文档完全错误并且没有这样的功能。

从 2010 年开始，有[一个开放的错误](https://code.google.com/p/android/issues/detail?id=13045)正好解决了这个问题，尽管 80 多人已经为它加注了星标，但 Android 团队没有官方回应。

这个问题[也在 SO here 上进行了讨论](https://stackoverflow.com/a/11424150/219293)。

如果您的用例冲突严重（即大多数时候您希望找到现有记录并希望返回该 ID），那么您建议的解决方法似乎是可行的方法。另一方面，如果您的用例大多数情况下您希望没有现有记录，那么以下解决方法可能更合适：

```
try {
  insertOrThrow(...)
} catch(SQLException e) {
  // Select the required record and get primary key from it
} 
```

这是此解决方法的独立实现：

```
public static long insertIgnoringConflict(SQLiteDatabase db,
                                          String table,
                                          String idColumn,
                                          ContentValues values) {
    try {
        return db.insertOrThrow(table, null, values);
    } catch (SQLException e) {
        StringBuilder sql = new StringBuilder();
        sql.append("SELECT ");
        sql.append(idColumn);
        sql.append(" FROM ");
        sql.append(table);
        sql.append(" WHERE ");

        Object[] bindArgs = new Object[values.size()];
        int i = 0;
        for (Map.Entry<String, Object> entry: values.valueSet()) {
            sql.append((i > 0) ? " AND " : "");
            sql.append(entry.getKey());
            sql.append(" = ?");
            bindArgs[i++] = entry.getValue();
        }

        SQLiteStatement stmt = db.compileStatement(sql.toString());
        for (i = 0; i < bindArgs.length; i++) {
            DatabaseUtils.bindObjectToProgram(stmt, i + 1, bindArgs[i]);
        }

        try {
            return stmt.simpleQueryForLong();
        } finally {
            stmt.close();
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-22T16:02:32.903

虽然您对 insertWithOnConflict 行为的期望似乎完全合理（您应该获得碰撞行的 pk），但这不是它的工作原理。实际发生的情况是您：尝试插入，插入行失败但未发出错误信号，框架计算插入的行数，发现数字为 0，并明确返回 -1。

**编辑添加：**

顺便说一句，这个答案基于最终实现 insertWithOnConflict 的代码：

```
int err = executeNonQuery(env, connection, statement);
return err == SQLITE_DONE && sqlite3_changes(connection->db) > 0
        ? sqlite3_last_insert_rowid(connection->db) : -1; 
```

`SQLITE_DONE`状态良好；`sqlite3_changes`是最后一次调用中的插入次数，并且`sqlite3_last_insert_rowid`是新插入行的 rowid（如果有）。

**编辑回答第二个问题：**

重新阅读问题后，我认为您正在寻找的是一种方法：

*   如果可能的话，在数据库中插入一个新行
*   如果它无法插入行，则失败并返回冲突的现有行的 rowid（不更改该 rowid）

对替换的整个讨论似乎是红鲱鱼。

那么，第二个问题的答案是没有这样的功能。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-09-30T05:35:46.487

问题已经解决了，但这可能是解决我问题的一个选项。只需将最后一个参数更改为 CONFLICT_REPLACE。

```
long regionId = 
db.insertWithOnConflict("regions", null, cv, SQLiteDatabase.CONFLICT_REPLACE); 
```

希望能帮助到你。

# c# - 单击WP7时列表框项目更改

> ID：13391920
> 
> 赞同：1
> 
> 时间：2012-11-15T05:18:07.220
> 
> 标签：c#, windows-phone-7, xaml

我在 WP7 中有一个绑定的列表框，每个部分都包含一组项目，我想在单击时更改图标的路径，以便更改单击的图标。这是我的 XAML 数据，需要在单击按钮上更改斜体和粗体的 Stackpanel。

```
 <ListBox Height="768" HorizontalAlignment="Left" Name="listBox1" Margin="0,0,0,0" 
            VerticalAlignment="Top" Width="480" Grid.RowSpan="2" >
        <ListBox.ItemTemplate>
            <DataTemplate>
                <Button BorderBrush="Black" Width="460" Height="100">
                    <Button.Content>
                        <StackPanel Orientation="Horizontal" Height="80" Width="400">
                            <Image Source="{Binding Image}" Width="80" Height="50"/>
                            <StackPanel Orientation="Vertical" Height="80">
                                <StackPanel Orientation="Horizontal" Height="40">
                                    <TextBlock Width="200" FontSize="28" Text="{Binding Name}" Height="50"/>
                                    <StackPanel Orientation="Horizontal">
                                        ***<Image Source="{Binding OnOff}" Width="100" Height="40" Tap="Image_Tap"/>***
                                        </StackPanel>
                                </StackPanel>
                            </StackPanel>
                        </StackPanel>
                    </Button.Content>
                </Button>
            </DataTemplate>
        </ListBox.ItemTemplate>
    </ListBox> 
```

我以这种方式填写了这个列表框

```
 void MainPage_Loaded(object sender, RoutedEventArgs e)
     {
        List<settings> settingsData = new List<settings>();

        settingsData.Add(new settings("Administrator","Images/ad.png",""));
        settingsData.Add(new settings("Wi-Fi","Images/wifi.png","Images/off.png"));
        settingsData.Add(new settings("Bluetooth", "Images/BlueTooth.png", "Images/On.png"));
        settingsData.Add(new settings("Airplane Mode", "Images/747.png", "Images/off.png"));
        settingsData.Add(new settings("VPN", "", ""));
        settingsData.Add(new settings("Hotspot", "", "Images/unchecked.png"));
        settingsData.Add(new settings("NFC", "", "Images/checked.png"));
        settingsData.Add(new settings("Sound","Images/sound.png",""));
        settingsData.Add(new settings("Display","Images/display.png",""));

        listBox1.ItemsSource = settingsData;
    } 
```

请帮忙..！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T05:37:49.750

由于您已将 绑定`Image`到对象的`Image`属性，因此`settings`只需更改那里的路径 ( `settings.Image = "Images/newImage.png"`)，列表应该会获取对图像路径的更改。

为此，请订阅`OnMouseLeftButtonDown`or`OnMouseLeftButtonUp`事件。

**编辑** 您也可以将 OnOff 属性设置为 bool 类型并为此提供转换器。通常，所有项目的开和关图标都是相同的（提供 UI 一致性）。这是转换器类：

```
public class OnOffImageConverter : IValueConverter
    {
    public object Convert (object value, Type targetType, object parameter, CultureInfo culture)
        {
        if ((bool)value)
            {
            return new BitmapImage (new Uri ("Images/On.png", UriKind.Relative));
            }
        else
            {
            return new BitmapImage (new Uri ("Images/Off.png", UriKind.Relative));
            }
        }

    public object ConvertBack (object value, Type targetType, object parameter, CultureInfo culture)
        {
        throw new NotImplementedException ();
        }
    } 
```

在您的 xaml 中为转换器定义静态资源：

```
<UserControl.Resources>
    <instance:OnOffImageConverter x:Key="OnOff" />
</UserControl.Resources> 
```

你如何使用它：

```
 <Image Source="{Binding OnOff, Converter={StaticResource OnOff}}" Width="100" Height="40" /> 
```

您的设置类：

```
public class Settings : INotifyPropertyChanged  
{
    public Settings(string name, string image, bool onOff)
    {
        Name = name;
        Image = new BitmapImage (new Uri(image, UriKind.Absolute));
        OnOff = onOff;
    }

    public string Name { get; set; }
    public ImageSource Image { get; set; }

    private bool m_onOff;
    public bool OnOff 
        {
        get { return m_onOff; }
        set { 
            m_onOff = value;
            if (PropertyChanged != null)
                {
                PropertyChanged (this, new PropertyChangedEventArgs ("OnOff"));
                }
            } 
        }

    public event PropertyChangedEventHandler PropertyChanged;
} 
```

我认为您需要实现 INotifyPropertyChanged 接口来通知列表有关基础类实例中更改的属性的信息。此外，如果您打算在绑定后将其他元素添加到列表中，则应该将其作为 ObservableCollection。

我已经通过订阅 SelectionChanged 事件进行了测试。但是，由于我没有在移动设备上开发，所以我不知道任何点击选项，也许您可​​以使用 Image_Tap 事件。

```
 listBox1.SelectionChanged += new SelectionChangedEventHandler (listBox1_SelectionChanged);

void listBox1_SelectionChanged (object sender, SelectionChangedEventArgs e)
    {
        foreach (Settings item in e.AddedItems)
        {
            item.OnOff = !item.OnOff;
        }
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T06:24:57.530

一个快速的解决方案是，

```
private void Image_Tap(object sender, System.Windows.Input.GestureEventArgs e)
    {
        var imageSource = ((sender as Image).Source as BitmapImage).UriSource.OriginalString;
        if (imageSource.Contains("On"))
        {
            (sender as Image).Source = new BitmapImage(new Uri("Images/Off.png", UriKind.Relative));
        }
        else
        {
            (sender as Image).Source = new BitmapImage(new Uri("Images/On.png", UriKind.Relative));
        }
    } 
```

# java - 与http客户端或httpurlconnection通信后如何保留会话？

> ID：13391922
> 
> 赞同：1
> 
> 时间：2012-11-15T05:18:20.097
> 
> 标签：java, struts

我有一个独立的应用程序，我使用 httpclient 与另一个 Web 应用程序进行通信以进行用户身份验证，并在 Web 应用程序的会话中设置用户详细信息，返回到独立应用程序后，我有一些逻辑要运行，然后我' m 转发到 Web 应用程序成功页面（在成功页面中，我无法检索 m 获取会话对象值为 null 的会话。）。那么我如何保存会话？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T05:24:29.720

**会话仅在 Web 应用程序和客户端浏览器上可用！**

因此，您需要询问管理员或查找公共 API 如何获取它，因为您无法直接从远程计算机访问它。

客户端只是将会话的 id 保存在 cookie 中，不要在本地存储数据，您需要的一切都在 Web 应用程序的范围内。

# powershell-remoting - 是否可以从远程主机使用 SSH 运行 powershell？

> ID：13391924
> 
> 赞同：1
> 
> 时间：2012-11-15T05:18:28.297
> 
> 标签：powershell-remoting, powershell-3.0

是否可以使用“ssh”或远程主机（Linux）的任何协议运行powershell脚本？

遵循以下步骤：

1.  安装运行 ssh/telnet 服务的“freeSHd”。
2.  能够通过 SSH 连接 Windows 2008R2 主机。
3.  能够运行（powershell.exe）并进入powershell环境。
4.  在运行 powershell 脚本之前，将执行策略设置为“受限”（Set-ExecutionPolicy Unrestricted）。
5.  运行脚本和“C:\Scripts\setUp.ps1”
6.  收到以下错误：

术语“Add-ADFSRelyingPartyTrust”未被识别为 cmdlet、函数、脚本文件或可运行程序的名称。检查名称的拼写，或者如果包含路径，请验证路径是否正确并重试。t C:\Scripts\setUp.ps1:1 char:26 + Add-ADFSRelyingPartyTrust <<<< -Name 'RP' -MetadataURL 'https://rphost:443/fed/sp/metadata'; + CategoryInfo : ObjectNotFound: (Add-ADFSRelyingPartyTrust:String) [], CommandNotFoundException + FullyQualifiedErrorId : CommandNotFoundException

也尝试像这样运行并导致相同的错误： C:\Windows\System32\WindowsPowerShell\v1.0\PowerShell.exe -ExecutionPolicy ByPass -command ".'C:\Scripts\setUp.ps1'"

请让我知道如何解决这个问题。

谢谢 GKS

# javascript - jQuery 在不同的虚拟主机上不起作用

> ID：13391926
> 
> 赞同：0
> 
> 时间：2012-11-15T05:19:01.993
> 
> 标签：javascript, jquery, fancybox, slider, nivo-slider

我刚刚完成了一个网站并将其上传到客户的主机，这与我用于个人网站的主机相同。当我将该站点作为附加组件上传到他的域并测试了 jQuery 函数时，它没有运行。我通过以下方式从 Google 加载 jQuery：

```
<!--/ jQuery Inclusion-->
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script> 
```

它在我的个人主机设置上完美运行，它在新主机上根本不起作用。我打电话并没有得到技术支持的解决方案，希望你们能帮助我。

**Nivo Slider & Fancybox 在我的个人网站上工作：**

[http://tinyurl.com/d3zley7](http://tinyurl.com/d3zley7)

**Nivo Slider & Fancybox 不在客户的网站上工作：**

[http://tinyurl.com/d2egv2v](http://tinyurl.com/d2egv2v)

考虑到不需要将 js 托管在服务器上，可能导致这种情况的原因是什么？非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T05:28:09.673

不是 jQuery 问题或其他问题，是因为您的所有脚本引用都返回 404“找不到页面”

您的引用从**根** `/`文件开始

```
<script src="/nivo-slider/jquery.nivo.slider.js" type="text/javascript"></script>
<script src="/nivo-slider/jquery.nivo.slider.pack.js" type="text/javascript"></script>

<!--/ Fancybox Script-->
<script type="text/javascript" src="/fancybox/jquery.fancybox-1.3.4.pack.js"></script>
<script type="text/javascript" src="/fancybox/jquery.easing-1.4.pack.js"></script>

...etc 
```

....但它们应该与目录`nd/`相关

```
<script src="nd/nivo-slider/jquery.nivo.slider.js" type="text/javascript"></script>

... etc 
```

...路径问题也是如此；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T05:23:23.043

您的客户网站上不存在 nivoslider javascript：

[http://greencertifier.com/nivo-slider/jquery.nivo.slider.js](http://greencertifier.com/nivo-slider/jquery.nivo.slider.js)

但它存在于您的网站上：

[http://helmblanc.com/nivo-slider/jquery.nivo.slider.js](http://helmblanc.com/nivo-slider/jquery.nivo.slider.js)

# c# - 从位图转换为 JPEG 并保留原始位图分辨率

> ID：13391927
> 
> 赞同：3
> 
> 时间：2012-11-15T05:19:05.457
> 
> 标签：c#, .net, bitmap, jpeg, dpi

我正在使用下面的代码将位图转换为 jpeg。位图以 300 dpi（水平/垂直分辨率）传递，但 CreateBitmapSourcefromHBitmap 方法总是将后续 jpeg 更改为以 96dpi 保存。

有没有办法设置源保留原来的300dpi？dpiX 和 dpiY 值是只读的。

提前致谢。

```
public static MemoryStream GetJpgMemoryStream(Bitmap bitMap, int jpgQuality)
{
    IntPtr hBitmap = bitMap.GetHbitmap();

    try
    {      

        BitmapSource source = System.Windows.Interop.Imaging.CreateBitmapSourceFromHBitmap(hBitmap, IntPtr.Zero, Int32Rect.Empty, BitmapSizeOptions.FromEmptyOptions());

        var jpegBitmapEncoder = new JpegBitmapEncoder();

        jpegBitmapEncoder.QualityLevel = jpgQuality;
        jpegBitmapEncoder.Frames.Add(BitmapFrame.Create(source));

        var jpegStream = new MemoryStream();

        jpegBitmapEncoder.Save(jpegStream);

        jpegStream.Flush();

        return jpegStream;

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T18:57:31.820

[MSDN 论坛](http://social.msdn.microsoft.com/forums/en-US/wpf/thread/29936562-3fa5-45e9-a76a-626f8a212a00)有一个与您的问题类似的讨论。推荐的答案是不使用 Interop，而是使用 a`WriteableBitmap`作为`BitmapSource`JPEG。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-11-11T16:55:22.540

您必须更改用于生成`BitmapSource`. 您可以使用[快速将 Bitmap 转换为 BitmapSource wpf](https://stackoverflow.com/questions/30727343/fast-converting-bitmap-to-bitmapsource-wpf)中所述的方法生成`BitmapSource`. 这是更新的代码。

```
 BitmapData data = bitMap.LockBits( 
                         new System.Drawing.Rectangle(0,0,bitMap.Width,bitMap.Height), 
                         System.Drawing.Imaging.ImageLockMode.ReadOnly, 
                         bitMap.PixelFormat);

    BitmapSource source = BitmapSource.Create(bitMap.Width, bitMap.Height, 
                                 bitMap.HorizontalResolution, bitMap.VerticalResolution, 
                                 System.Windows.Media.PixelFormats.Bgr24, null,
                                 data.Scan0, data.Stride*bitMap.Height, data.Stride);

    bitMap.UnlockBits(data);

    var jpegBitmapEncoder = new JpegBitmapEncoder();

    jpegBitmapEncoder.QualityLevel = jpgQuality;
    jpegBitmapEncoder.Frames.Add(BitmapFrame.Create(source));

    var jpegStream = new MemoryStream();

    jpegBitmapEncoder.Save(jpegStream); 
```

# drupal-7 - drupal 中的移动开关、移动工具模块在 localhost 中有效吗？

> ID：13391929
> 
> 赞同：1
> 
> 时间：2012-11-15T05:19:26.050
> 
> 标签：drupal-7

我在本地机器的 drupal7 中安装并配置了移动交换机、移动工具模块和移动主题。我在 android 模拟器中看到了该站点。它没有更改为移动主题。请帮帮我

# c++ - 通过添加用于远程运行命令的函数来扩展 libvirt

> ID：13391933
> 
> 赞同：1
> 
> 时间：2012-11-15T05:19:55.790
> 
> 标签：c++, linux, virtualization, qemu, libvirt

我在 libvirt 的远程驱动程序中实现了一个功能。

我像这样运行命令：

```
virCommandPtr cmd = NULL;
cmd=virCommandNewArgList("touch","/tmp/try.txt",NULL);
   if (virCommandRun(cmd, NULL) < 0)
       goto cleanup;
cleanup:
  virCommandFree(cmd);
  return 0; 
```

当我执行此代码片段时，它会在`touch`我调用此函数的同一主机上运行该命令。它不依赖于连接指针。

我想知道如何在与之建立连接的主机上运行命令。谁能帮我？

# iphone - 核心数据：[NSFetchedResultsController -fetchedObjects]，这个方法会反映对象的变化吗？

> ID：13391934
> 
> 赞同：6
> 
> 时间：2012-11-15T05:20:02.633
> 
> 标签：iphone, ios, core-data

首先，我创建一个`NSFetchedResultsController`用于`NSFetchRequest`获取实体“Entity”的所有对象的 a。

然后我插入一个新的 NSManagedObject A ，它是“Entity”的一个实例，以及 Edit B，它也是“Entity”的一个实例。

然后我打电话`NSArray *result = [fetchedResultsController -fetchedObjects]`，结果会是A和B吗？

在整个项目中，我**只使用了一个**NSManagedObjectContext。

如果我这样做了，这在其[Document](http://developer.apple.com/library/ios/#documentation/CoreData/Reference/NSFetchedResultsController_Class/Reference/Reference.html)中意味着什么？

> fetchedObjects 提取的结果。
> 
> @property (nonatomic, readonly) NSArray *fetchedObjects Discussion 如果 performFetch: 没有被调用，该属性的值为 nil。
> 
> 结果数组仅包含由获取请求 (fetchRequest) 指定且与其谓词匹配的实体的实例。（如果获取请求没有谓词，则结果数组包括获取请求指定的实体的所有实例。）
> 
> 结果数组反映了控制器托管对象上下文中托管对象的内存状态，而不是它们在持久存储中的状态。但是，返回的数组不会随着托管对象的插入、修改或删除而更新。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-15T10:43:19.933

最后一句话的意思

> ...但是，返回的数组不会随着托管对象的插入、修改或删除而更新。

是（基于我的实验）：如果您存储对获取的对象的引用

```
NSArray *result = [fetchedResultsController fetchedObjects]; 
```

那么如果插入、修改或删除对象，则*引用的这个数组将不会更新。* `result`所以重点是“***返回的数组***不......”。

但是如果你打电话

```
[fetchedResultsController fetchedObjects] 
```

稍后，返回值是一个新的对象列表，包括更改。

*更准确地说：*如果您设置了委托，FRC 会跟踪托管对象上下文的更改并调用 FRC 委托函数。插入/修改/删除对象时，不会立即调用委托函数，而是

*   当上下文被显式保存时，或者
*   在运行循环中处理更改通知时。

一旦`controllerDidChangeContent:`被调用，一个新的调用`[fetchedResultsController fetchedObjects]`返回更新的对象列表。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-08-08T10:16:24.867

@Dwayne`[fetchedResultsController.managedObjectContext processPendingChanges]`如果您想在您的委托对象上即时更新，则在您的插入/删除/更新之后使用，通常在运行循环结束时调用它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-12T19:33:20.410

我也只是对此做了一个实验。似乎在此调用中更新了 fetchedObjects 的计数：

```
- (void)controller:(NSFetchedResultsController *)controller didChangeObject:(id)anObject
       atIndexPath:(NSIndexPath *)indexPath forChangeType:(NSFetchedResultsChangeType)type
      newIndexPath:(NSIndexPath *)newIndexPath{
} 
```

这是否意味着每次调用它都是一种增量行为？`controllerDidChangeContent:`由于所有更改都已执行，因此在调用时是否准备好整个列表？

@Maciek Czarnik 感谢您的解释。但是，如果我们每次都能得到更改，`[fetchedResultsController.managedObjectContext processPendingChanges]`就没有必要再在这里调用了。

如果可能的话，我希望我可以让其他人确认这种行为。

谢谢。

# eclipse - 使用 Scala 的工作表，需要澄清

> ID：13391935
> 
> 赞同：3
> 
> 时间：2012-11-15T05:20:07.943
> 
> 标签：eclipse, scala, worksheet

以下代码段编译并运行良好

![在此处输入图像描述](../Images/0ab0e12a4cc863c6510944a986145d33.png)

作为工作表的一部分使用时，我看到错误

![在此处输入图像描述](../Images/de05d186f9eb3e2b777e834ec394e3da.png)

请问这是为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T05:52:28.777

这可能只是一个错误/缺失的功能。

顺便说一句，您可以像下面的代码一样编写连接器来获得相同的行为，它也可以避免工作表问题。

```
def joiner(strings: List[String], separator: String = " ") = 
  strings.mkString(separator) 
```

# java - 将变量传递给不同的类

> ID：13391937
> 
> 赞同：1
> 
> 时间：2012-11-15T05:20:16.280
> 
> 标签：java, class, variables

我确信有一个非常简单的解决方案，但我正在拼命寻找答案。我正在尝试将主类中的值设置为 classA，然后在 classB 中检索该值并对其执行其他操作，然后在 Main 中返回答案：

例子：

```
public class Main {
    public static void main(String[] args) {
        Scanner input = new Scanner(System.in);
        ClassA classA = new ClassA();
        ClassB classB = new ClassB();

        System.out.println("Number: ");
        classA.setX(input.nextInt());

        System.out.println("Total: " + classB.printTotal());

    } // main
} // class 
```

A类：

```
public class ClassA {
    int x;

    public int getX() {
        return x;
    }

    public void setX(int x) {
        this.x = x;
    }
} // class 
```

B类：

```
public class ClassB {
    ClassA classA;

    public int printTotal() {
        int y = classA.getX() * 5;
        return y;
    }
} // class 
```

无论我输入什么都返回 null。我明白为什么会这样，但我不知道解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T05:24:11.617

您应该通过构造函数或（setter）方法`ClassB`定义对依赖项：`ClassA`

```
public ClassB(ClassA classA) {
    this.classA = classA;
}

//or/and

public void setClassA(ClassA classA) {
    this.classA = classA;
} 
```

并将依赖项注入`main`如下：

```
ClassB classB = new ClassB(classA); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T05:23:31.297

与其在 ClassB 中拥有 ClassA 的实例，不如将 ClassA 对象作为参数传递给 printTotal：

```
public class ClassB {
    public int printTotal(ClassA classA) {
        int y = classA.getX() * 5;
        return y;
    }
} // class
...

System.out.println("Total: " + classB.printTotal(classA)); 
```

希望有帮助！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-15T05:24:24.423

**在 main 中，用 classA 对象设置 classB 的 classA 变量，休息应该没问题。**

如果你的两个类都在**同一个包**中，那么你可以简单地分配对象如下，你就完成了。

```
 ClassA classA = new ClassA();
    ClassB classB = new ClassB();
    classB.classA = classA;//assign classA to ClassB's classA attribute 
```

* * *

**除此以外：**

```
 ClassA classA = new ClassA();
    ClassB classB = new ClassB();
    classB.setClassA(classA);//assign classA to ClassB's classA attribute 
```

在 ClassB 中，添加一个 setter 方法：

```
 public void setClassA(ClassA classA){
        this.classA = classA;
     } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-15T05:22:22.720

您的 ClassB 没有引用 ClassA 的实例。因此，您可以再次使用 setter，或者更好地使用构造函数设置 ClassA 的实例：

```
public ClassB(ClassA instance) {
   this.classA = instance;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-15T05:25:21.730

在`class B`中，`classA`应该指的是 的对象`A`。

包含一个构造函数`class B`

```
public B(A a) {
    this.classA = a;
} 
```

在 main 方法中，使用`classB`初始化`classB = new B(classA);`。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-15T05:26:37.183

您需要在打印值之前添加到您的 main 中。

```
 classB.classA = classA; 
```

因此在您的 classb 中初始化的 classA 可以具有您在 main 中设置的 x 值。希望这有帮助，祝你好运！

# jquery - Chosen (chzn) 与 iPad 3：触摸 chzn 选择时短页面闪烁/弹跳

> ID：13391939
> 
> 赞同：1
> 
> 时间：2012-11-15T05:20:30.197
> 
> 标签：jquery, ipad, jquery-chosen, ipad-3, visual-glitch

这很难说清楚，我想知道是否有其他人遇到过这个问题。

**在 iPad3 上查看[此预览。](http://jsbin.com/awinil/1)**

**1)**单击任何 CHZN 下拉菜单。（选择）

-- 你会注意到屏幕闪烁.. 或弹跳.. 无论你想怎么称呼它。

**2)**现在尝试单击显示“更多页面”的按钮（为了测试，我将此按钮添加到页脚的底部填充 3000 像素）然后尝试再次使用 CHZN 下拉列表之一。

-- 现在没有闪烁了！只是一个流畅的滚动动画。

**所以......**似乎页面很短并且当 CHZN 控件之一获得焦点或被触摸时。就好像它想滚动到对象，但如果对象已经接近顶部并且在“折叠”下方没有任何可用的垂直滚动，它会反弹！它非常丑陋和暴力，你可以想象它破坏了任何带有 chzn 控件的简单主页的流畅性。

关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-03T20:02:18.967

一年前的 ios 更新修复了这个问题，仅供参考。

# java - 为什么 Google Drive getExportLinks 返回 null？

> ID：13391942
> 
> 赞同：4
> 
> 时间：2012-11-15T05:21:21.420
> 
> 标签：java, ms-word

我正在上传一个 Word 文档：

```
 com.google.api.services.drive.model.File body = new com.google.api.services.drive.model.File();
    body.setTitle(file.getName());
    body.setMimeType(mimeType);

    FileContent mediaContent = new FileContent(mimeType, file);

    com.google.api.services.drive.model.File uploadedFile = service.files()
            .insert(body, mediaContent).execute();

    String downloadUrl = file.getExportLinks().get(mimeType); 
```

上传顺利。但是，对 file.getExportLinks() 的调用返回 null，因此，这一行是一个空指针。有人知道为什么 getExportLinks() 返回 null 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T01:33:20.410

获取文档密钥并创建如下链接：

```
Drive driveService = new Drive.Builder(TRANSPORT, JSON_FACTORY, credential).build();
File file = driveService.files().get(this.spreadsheetKey).execute();
String downloadUrl = file.getExportLinks().get("application/pdf"); 
```

示例下载网址： [https: //docs.google.com/feeds/download/spreadsheets/Export?key=](https://docs.google.com/feeds/download/spreadsheets/Export?key=) **somekey** &exportFormat=pdf

注意：您可以将上面的网址粘贴到浏览器中，只要您登录谷歌驱动器就会下载。

不知道您是否可以在没有文档密钥的情况下创建链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-16T14:05:27.953

您需要设置正确`Scope`才能访问链接。

[https://developers.google.com/drive/web/scopes](https://developers.google.com/drive/web/scopes)

# jquery - 为什么在主干同步中返回一个 jquery 延迟对象？

> ID：13391944
> 
> 赞同：3
> 
> 时间：2012-11-15T05:21:46.777
> 
> 标签：jquery, backbone.js

我正在检查来自 Backbone JQuery 移动示例应用程序 [http://jquerymobile.com/test/docs/pages/backbone-require.html的代码](http://jquerymobile.com/test/docs/pages/backbone-require.html)

并在集合对象中找到以下内容

```
// 覆盖 Backbone.sync 方法（Backbone.fetch 方法在尝试获取数据时调用 sync 方法）
同步：函数（方法、模型、选项）{

            // 局部变量
            // ===============

            // 实例化一个空数组
            var 类别 = [],

                // 将 this 上下文存储在 self 变量中
                自我=这个，

                // 创建一个 jQuery 延迟对象
                延迟 = $.Deferred();

            // 使用 setTimeout 模拟一个异步检索数据的真实世界应用程序
            设置超时（函数（）{

                // 过滤上述示例 JSON 数据以返回仅包含正确类别类型的数组
                类别= _.filter（self.jsonArray，函数（行）{

                    返回 row.category === self.type;

                });

                // 调用 options.success 方法并传递一个对象数组（内部将这些对象作为模型保存到当前集合中）
                options.success（类别）；

                // 触发自定义的 `adding` 方法（Category View 监听）
                self.trigger("添加");

                // 解析延迟对象（这会触发类别路由器内部的 changePage 方法）
                deferred.resolve();

            }, 1000);

            // 返回延迟对象
            延期退货；

        }

```

我只是想了解 deferred 被声明和返回的部分，为什么我们甚至需要那个？没有附加回调。而且我真的不明白为什么我们使用 setTimeout 并在其中解析延迟对象。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T05:32:55.593

deferred 对象用于管理异步方法——它对于设置成功/错误回调而不创建令人困惑的嵌套回调块很有用。它也非常适合处理需要等待多个异步操作完成的场景。Deferred 与 JQuery AJAX 方法是分开的，但由 JQuery AJAX 方法实现。

作为如何在 Backbone 中使用它的一个示例，请考虑需要从服务器加载一些 JSON 数据和 HTML 模板的情况。在渲染视图之前，您可能需要完成两次异步调用。使用 Deferred 是一种方便的处理方式，因为您可以将多个 Promise 对象传递给`when`，它们将在所有完成后被调用。

有关 deferred 的信息，值得探索[JQuery 站点上的文档](http://api.jquery.com/category/deferred-object/)。

* * *

（请注意，虽然那里的代码中没有可见回调，但可以附加成功/错误回调，例如，`Backbone.Model.fetch`。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T05:28:14.697

只需阅读代码:)

```
// Uses a setTimeout to mimic a real world application that retrieves data asynchronously 
```

延迟对象在创建时不需要附加回调，这就是它们的全部意义所在。你应该[阅读它们](http://api.jquery.com/category/deferred-object/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T05:31:52.493

为了可扩展性，如果我正在使用它，我可以在 Deferred 对象上连接处理程序，而无需修改此实现。

setTimeout 纯粹是“展示和讲述”，它在模仿某种服务调用。所以人们可能会像这样消费它：

```
var myDeferred = myCollection.sync();
myDeferred.error(function() {
     /* error handling */
})
.done(function() { /* clean up state */ }); 
```

# php - php日期+时间转换

> ID：13391946
> 
> 赞同：0
> 
> 时间：2012-11-15T05:21:58.940
> 
> 标签：php, date, datetime

我想知道如何将我们从日期时间选择器中选择的日期和时间解析为标准`date('YmdHis')`类型的结果？

```
$datetime = date('YmdHis); 
```

![在此处输入图像描述](../Images/fe6c27f3fb0b94cc245d762c639236a8.png)

例如日期选择器返回结果 `11/13/2012`和时间选择器结果是`2.30 AM`，现在我需要知道如何将它们连接在一起并将其转换为`20121113023000`格式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T05:25:07.860

这应该工作

```
 $datatime = date('YmdHis',strtotime($_POST['datepickerfield'])); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T05:25:15.533

```
echo date("Y-m-d H:i:s",strtotime("11/13/2012 2.30 AM")); 
```

输出

```
2012-11-13 02:30:00 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-15T05:32:04.950

```
echo date("YmdHis",strtotime('11/13/2012 2.30 AM')); 
```

或者

```
 $data = $_POST['date_picker']." ".$_POST['time_picker'];
    echo date("YmdHis",strtotime($data)); 
```

这将以所需的格式输出

输出

```
20121113023000 
```

# ruby-on-rails - Rails I18n：从 HTTP_ACCEPT_LANGUAGE 设置初始语言环境

> ID：13391948
> 
> 赞同：4
> 
> 时间：2012-11-15T05:22:16.637
> 
> 标签：ruby-on-rails, internationalization, routes, http-accept-language

感谢大家的帮助。

**我在做什么：** 我正在设计一个必须支持多种语言的公司网站

**我做了什么：** 一个带有几个静态页面的 rails 应用程序。我使用 Ryan Bates 示例在 rails 中使用 I18n 功能，特别是使用路由来设置语言环境：

```
MyApp::Application.routes.draw do

  scope ":locale", locale: /#{I18n.available_locales.join("|")}/ do
    root to: 'static_pages#home'

    match '/about', to: 'static_pages#about'
    match '/contact', to: 'static_pages#contact'
  end

  match '*path', to: redirect("/#{I18n.locale}/%{path}")  
  match '', to: redirect("/#{I18n.locale}") 
```

我的 ApplicationController 如下所示：

```
class ApplicationController < ActionController::Base
  protect_from_forgery
  before_filter :set_locale

  private
    def set_locale      
        I18n.locale = params[:locale] || I18n.default_locale
    end    

    def default_url_options(options = {})
        {locale: I18n.locale}
    end       
end 
```

我在服务器启动时的日志显示以下内容：

```
Started GET "/en" for 127.0.0.1 at 2012-11-14 22:41:01 +0400
Processing by StaticPagesController#home as HTML
  Parameters: {"locale"=>"en"}
  Rendered static_pages/home.en.html.erb within layouts/application (1.0ms)
Compiled custom.css  (5905ms)  (pid 9864)
Compiled application.css  (15ms)  (pid 9864)
  Rendered layouts/_shim.html.erb (0.0ms)
  Rendered layouts/_header.html.erb (12.0ms)
  Rendered layouts/_footer.html.erb (2.0ms)
Completed 200 OK in 6741ms (Views: 6740.4ms | ActiveRecord: 0.0ms) 
```

**我正在尝试做什么：** 我希望当用户没有在 url 中指定语言环境（例如，仅键入 www.example.com）时，rails 会从中获取接受的语言环境`request.env['HTTP_ACCEPT_LANGUAGE'].scan(/^[a-z]{2}/).first` 并将访问者重定向到他的首选语言。在这一点上，我无法弄清楚我的 I18n.locale 首先是在哪里设置的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-12T22:54:31.290

这很神奇[HTTP_ACCEPT_LANGUAGE](https://github.com/iain/http_accept_language/tree/master)

另一个要考虑的[Locale Setter](https://github.com/jcasimir/locale_setter)

后一个允许您检查用户偏好、http_accept_lang 代码等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T11:27:34.590

I am working on exactly the same case as yours! perhaps you should [try this](http://guides.rubyonrails.org/i18n.html#setting-the-locale-from-the-client-supplied-information)

Also refer to [my question](https://stackoverflow.com/questions/13310812/set-locale-automatically-in-ruby-on-rails) where there are useful answers.

Once I get this working I will post an answer

# sql - 将行转换为一列sql server

> ID：13391950
> 
> 赞同：2
> 
> 时间：2012-11-15T05:22:24.183
> 
> 标签：sql, sql-server-2008

我正在使用以下查询将行转换为列

```
SELECT STUFF((SELECT NAME + ',' FROM TABLE1
FOR XML PATH('')),1,0,'') AS [ACCOUNT NAMES] 
```

该表具有以下数据

```
NAME 
-------------------
GURPREET & CO.
SIMRAN TRADERS
LABOUR & WELFARE
------------------- 
```

我想要像这样的输出

> GURPREET & CO., SIMRAN TRADERS, LABOR & WELFARE,

但是sql给出了输出

> GURPREET & CO., SIMRAN TRADERS, LABOR & WELFARE,

我怎样才能删除&？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-15T05:24:15.770

由于您在示例中保留了最后一个逗号，因此您不需要 STUFF，特别是如果您将它与`,1,0,''`无操作的参数一起使用时。

```
SELECT
    (SELECT NAME + ','
       FROM TABLE1
        FOR XML PATH(''),type).value('.','nvarchar(max)') AS [ACCOUNT NAMES] 
```

如果您**确实**想删除最后一个逗号，那么它应该是这样的：

```
SELECT STUFF(
    (SELECT ',' + NAME
       FROM TABLE1
        FOR XML PATH(''),type).value('.','nvarchar(max)'),1,1,'') AS [ACCOUNT NAMES] 
```

注意：问题在于您使用的通用模式几乎与 Internet 一样古老，它没有考虑 XML 实体化。使用说明`FOR XML TYPE`符在通过 . 再次提取时保留原始文本`.value, varchar(max)`。

# ajax - ajax中的django csrf不起作用

> ID：13391952
> 
> 赞同：0
> 
> 时间：2012-11-15T05:22:44.433
> 
> 标签：ajax, django, csrf

我有一个表单并使用 json 数据将其发布到服务器，服务器将其保存在数据库中。这是我的代码

```
function saveChanges() {
    var items = [];
    $('ol.item_list > li.item').each(function(){
        items.push(getItemData($(this)));
    });

    var csrftoken = $.cookie('csrftoken');
    $.ajax({
        url : '',
        type: 'POST',
        headers : {"X-CSRFToken": csrftoken},
        data : $.toJSON(items),
        success: function(data, textStatus, jqXHR){
            console.log(data);
        },
        error: function(jqXHR, textStatus, errorThrown){
            alert(textStatus);
        },
    });

} 
```

问题是，我两次调用 saveChanges（通过按钮），都返回 200 http ok。所以我在数据库中得到了重复的数据。csrf 令牌是否应该防止重复 sumbit？我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T08:19:11.700

您应该通过注意正确布置脚本执行流程和脚本结构来防止重复提交，以防止这种情况发生。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T08:10:53.303

不，CSRF 令牌不会阻止任何形式的重复提交。它的目的是防止[跨站请求伪造](http://en.wikipedia.org/wiki/Cross-site_request_forgery)，仅此而已。它创建了一个令牌，因此没有人可以欺骗您提交您不打算执行的请求。

如果要防止重复提交，一种方法是在单击一次后禁用提交按钮。然而，这绝不是一个好的解决方案，因为 JavaScript 在客户端运行并且很容易被操纵（例如通过 Firebug）。所以重复提交仍然是可能的，只是不那么明显。

更好的方法是在服务器端 Python 代码中进行验证。您可以检查提交的数据是否已经在数据库中，如果是，则忽略请求或可选地返回错误消息。这确保即使通过摆弄 JavaScript，恶意用户也无法保存数据两次。

我会使用这两种方法，第一种方法只是告诉用户他不应该尝试两次提交相同的数据 - 这只是一个界面特权。

# django - 建模 django 模型统计

> ID：13391954
> 
> 赞同：2
> 
> 时间：2012-11-15T05:22:52.290
> 
> 标签：django, django-models, dynamically-generated, django-statistics

我正在为 django 开发一个问卷模型，该模型应该可以由没有编程经验的人维护，所以我花了很多时间制作模型来弥补小细节。现在我想释放 SQL 数据库的潜力查询能够生成有关给出的响应和反馈的统计信息。

我的问题类型之一是 5 星评级，因此我希望能够收集有关该问题的统计数据，例如：

*   问题 q 有多少个回答是 5 星（、4 星、3 星等）？
*   平均评分反应是多少？

理想情况下，我想在模型中记录这些统计问题，并创建一个视图来显示所有询问的统计数据并保持整个事情的程序化。

这应该是一个精心设计的模型或一组模型，如反馈，还是已经有一些框架或模块可以为我处理这些情况？

我的问卷/models.py：

```
class QuestionType(models.Model):
    name = models.CharField(max_length=256, blank=True, default="")

class Question(models.Model):
    text = models.TextField()
    type = models.ForeignKey(QuestionType)

class Response(models.Model):
    question = models.ForeignKey(Question)
    answer = models.TextField()

class Feedback(models.Model):
    user = models.ForeignKey(User)
    responses = models.ManyToManyField(Response)
    response_time = models.DateTimeField(auto_now_add=True) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T15:37:32.910

这将满足您的要求：

```
class QuestionType(models.Model):
    name = models.CharField(max_length=256, blank=True, default="")

class Question(models.Model):
    text = models.TextField()
    type = models.ForeignKey(QuestionType)

    def how_many_ratings_where_x_stars(self, stars):
        return self.rating_set.filter(stars=stars).count()

    def average_rating(self, stars):
        return self.rating_set.aggregate(models.Avg('stars'))['stars__avg']

class Response(models.Model):
    question = models.ForeignKey(Question)
    answer = models.TextField()
    user = models.ForeignKey(User)
    timestamp = models.DateTimeField(auto_now_add=True)

class Rating(models.Model):
    question = models.ForeignKey(Question)
    stars = models.PositiveIntegerField(min_value=1, max_value=5)
    user = models.ForeignKey(User)
    timestamp = models.DateTimeField(auto_now_add=True)

    class Meta:
        unique_together = [('question', 'user')] 
```

# c - C中的所有数组长度方法都不起作用

> ID：13391965
> 
> 赞同：1
> 
> 时间：2012-11-15T05:23:46.057
> 
> 标签：c, arrays, methods

我试过了`(sizeof(array)/sizeof(array[0]))`。没用。我写了一个简单的函数：

```
int length(int array[]){
    int i=0;
    while(array[i]) i++;
    return i;
} 
```

前一分钟工作，下一分钟没有工作。

有人请帮忙！我使用 Xcode 作为 IDE

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T05:41:38.360

数组的长度不是 C 中数组的一部分，因此在将数组作为参数传递给函数时，您也应该将其长度作为参数传递。这是一个例子：

```
#define ARRLEN(a) (sizeof(a)/sizeof (a)[0]) /* a must be an array, not a pointer */

void printarray(int* a, int alen)
{
    int i;
    for (i = 0; i < alen; i++)
        printf("%d\n", a[i]);
}

main()
{
    int a[] = { 3, 4, 5 };
    printarray(a, ARRLEN(a));
    return 0;
} 
```

但是，**如果**您的数组被定义为始终以非正常数据的哨兵结尾，**那么**您可以遍历元素直到遇到哨兵。例如，

```
void printstrings(char** a)
{
    int i;
    for (i = 0; a[i]; i++)
        printf("%s\n", a[i]);
}

main()
{
    char* a[] = { "This", "should", "work.", NULL };
    printstrings(a);
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T05:34:40.087

将数组传递给函数与将指针传递给数组相同。所以`sizeof(array)/sizeof(array[0])`不起作用。

您可以定义一个全局宏：

```
#define A_LEN(a) (sizeof(a)/sizeof(a[0])) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T06:15:40.023

请参阅[当数组是函数的参数时，为什么 sizeof 不能正确报告数组的大小？](http://c-faq.com/aryptr/aryparmsize.html)从 comp.lang.c FAQ 了解为什么该`sizeof`方法不起作用。您可能应该阅读[有关数组的整个部分](http://c-faq.com/aryptr/index.html)。

关于您的`length`函数，您的“简单”函数*只有*在您的数组碰巧具有以`0`. 它不适用于任意数组。当一个数组已经衰减为 C 中的一个指针时，没有办法恢复数组的大小，*必须*传递数组长度。（即使是 C 标准库中的函数也不能幸免；`gets`不接受指定其目标缓冲区长度的参数，因此众所周知它是不安全的。它*不可能*确定目标缓冲区的大小，因此无法防止缓冲区溢出。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-15T06:02:05.747

**尝试这个**

```
main()
{
int a[10] ;
printf("%d\n", sizeof(a)/sizeof(int) ) ;
}

output : 10 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-15T05:55:57.783

有几种方法可以获取函数内部数组的长度（可以在同一个文件中，也可以在不同的源文件中）

1.  将数组长度作为单独的参数传递。
2.  将数组长度设为全局`extern`，以便函数可以直接访问全局数据

# javascript - 为什么 console.log() 和 document.write() 在 JavaScript 中对二维数组输出不同的结果？

> ID：13391966
> 
> 赞同：0
> 
> 时间：2012-11-15T05:23:49.437
> 
> 标签：javascript

我试图了解 JavaScript 中二维数组的来龙去脉。在调试时，我注意到使用 console.log() 和 document.write() 输出时的值有所不同。

我知道我应该使用 console.log()，但似乎我只能让 document.write() 输出我所期望的。

```
var x = [];
  for (var i = 0; i < 5; i++) {
    x[i] = new Array(1);           
  }
    x[0][0] = "A";
    x[0][1] = "Apple";
    x[1][0] = "B";
    x[1][1] = "Banana";
    x[2][0] = "C";
    x[2][1] = "Cumquats";
    x[3][0] = "D";
    x[3][1] = "Dewberry";
    x[4][0] = "E";
    x[4][1] = "Elderberry";

document.write(x);
console.log(x); 
```

**我从document.write(x)**看到以下内容：

```
A,Apple,B,Banana,C,Cumquats,D,Dewberry,E,Elderberry 
```

**我从console.log(x)**看到以下内容：

```
[Array[2], Array[2], Array[2], Array[2], Array[2]] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T05:28:48.000

据我了解，控制台因浏览器的供应商而异。登录 Firefox 会得到与使用 Chrome 不同的结果。Document.write 是一种 Javascript 方法，它在所有浏览器中都有特定的实现，例如 trim() 或任何其他方法。

因为 log() 用于开发目的，所以数据如何输出并不重要，只要它对开发人员有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T05:30:55.270

答案非常简单：Chrome 将数组最小化，每个数组都是一个包含两个项目的数组。单击它以显示内容。

# vb.net - Windows CE 中的日期格式

> ID：13391969
> 
> 赞同：0
> 
> 时间：2012-11-15T05:24:04.863
> 
> 标签：vb.net, visual-studio-2008, windows-ce, globalization, date-format

我正在尝试使用下面的代码将日期字符串转换为“dd/MM/yyyy”格式

```
m_dEDate = Format(CDate(strExpiry), "dd/MM/yyyy") 
```

但是系统出现异常错误-“参数不正确”。如果区域短日期为“dd-MMM-yy”，则没有异常错误。

如果不手动设置区域，我们如何通过编码进行转换？

我们应该使用`System.Globalization`吗？如果是这样，请分享我的样本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T05:37:09.300

利用**[`Date.ParseExact`](http://msdn.microsoft.com/en-us/library/w2sa9yss.aspx?cs-save-lang=1&cs-lang=vb#code-snippet-1)**

```
 Dim dateString As String = "06/15/2008"
  Dim format As String = "MM/dd/yyyy"
  Dim provider As CultureInfo = CultureInfo.InvariantCulture
  Dim _NewDate As Date = Date.ParseExact(dateString, format, provider) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T07:09:37.910

看起来您正在尝试更改日期表示的格式，但您还没有告诉我们您要转换*的*格式是什么。John 的代码正确地显示了如何解析一个值——但看起来这就是你想要的*目标值。*假设您的输入类似于“2012-11-15”，即 yyyy-MM-dd。然后你会想要：

```
Dim inputText = "2012-11-15"
Dim inputFormat = "yyyy-MM-dd"
Dim outputFormat = "MM/dd/yyyy"
Dim provider = CultureInfo.InvariantCulture
Dim parsedDate = Date.ParseExact(inputText, inputFormat, provider)
Dim outputDate = parsedDate.ToString(outputFormat, provider) 
```

请注意，此处使用不变的文化将您*完全*与文化敏感性隔离开来。这实际上是您想要的，还是您可能想根据用户文化来对待您的*输入，而不是输出？*

# java - 为 Maven 项目创建一个可执行的 .bat 文件

> ID：13391971
> 
> 赞同：2
> 
> 时间：2012-11-15T05:24:13.990
> 
> 标签：java

我有一个通过运行脚本在命令行上运行的 Maven 项目。我想在 Windows 和 Linux 上分发它。我已经搜索了所有相关的帖子，但我并不完全理解如何为 Windows 创建一个 .bat 文件。

我所有的依赖项都被复制到一个名为 mavenLib 的文件夹中，并使用以下命令在 ubuntu 的目标文件夹中创建一个 jar 文件：

```
export CLASSPATH=`ls -1 target/mavenLib/* | tr '\n' ':'`target/ClientPortfolioCreator-0.0.1-SNAPSHOT.jar 
```

Windows中的替代方案是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-15T06:24:06.173

我建议你使用一个叫做**appassembler-maven-plugin 的 maven 插件**。该插件生成 Unix 和 Windows 脚本，并将所有必要的依赖项复制到本地文件夹中。

该插件的基本用法如下：

在 的 build 部分，`pom.xml`根据您的要求添加以下配置。

```
<build>  
  <plugins>  
    <plugin> 
      <groupId>org.codehaus.mojo</groupId>  
      <artifactId>appassembler-maven-plugin</artifactId>  
      <configuration>
       <programs>  
         <program>  
            <mainClass>your.package.YourMainClass</mainClass>
            <name>TheScriptName</name>
         </program>
       </programs>   
      </configuration>  
    </plugin>  
 </plugins> 
```

然后执行：

```
mvn package appassembler:assemble 
```

就是这样，插件输出默认位于*target/appassembler*

更多详细信息，请访问插件[主页](http://www.mojohaus.org/appassembler/appassembler-maven-plugin/)。

# jquery - 如何重置 jquery 数据表 bStateSave 以进行下一条记录搜索

> ID：13391973
> 
> 赞同：5
> 
> 时间：2012-11-15T05:24:22.147
> 
> 标签：jquery, jquery-ui, datatables

我正在使用 jquery 数据表来显示记录列表。

这个问题的工作流程如下：

1.  用户在搜索框中输入“测试”。它将返回客户名称列表。
2.  单击数据表的下一个按钮后，它会显示下一个 10 条记录。
3.  当我单击客户名称时，它会显示客户详细信息。
4.  单击浏览器后退按钮后，它会返回客户列表。但它返回到 1 页而不是 2 页。对于这个问题，我使用了“bStateSave=true”（大概是为重新加载保存状态），它使用户保持在 2 秒页面上。这可以。

这是我们的问题：

但是当用户在搜索框中进行另一个搜索并输入文本时，它会显示第 2 页。但是，用户希望首先查看第 1 页，因为他已经发布了一个新查询。

我尝试使用“iCookieDuration=60”来清除 bStateSave。但60秒后就清楚了。

是否有任何替代方法可以实现这两件事？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T14:10:31.397

您的用例适用于我使用 jQuery DataTables 版本 1.7.6。今天我刚刚开始使用与您相同的选项将表状态保存在 cookie 中。我不使用任何其他初始化参数，如下所示。

```
 $(document).ready(function() {
        $('#charts').dataTable( {
            "bStateSave": true
        });
    }); 
```

# java - 如何清理我的世界（有 Java 错误代码）

> ID：13391978
> 
> 赞同：0
> 
> 时间：2012-11-15T05:24:32.930
> 
> 标签：java

我在我最喜欢的世界上使用局域网服务器，当我保存并退出世界时，一切正常。后来我试图进入这个世界，它在加载屏幕上有点小故障，当我进入这个世界时，它非常没有反应，我的意思是我会打破一个块并且什么都不会发生，块就消失了，当我尝试访问箱子时，需要两分钟才能看到内容。过了一会儿它崩溃了，我得到这个错误代码：

```
 Minecraft has crashed!      
  ----------------------      

Minecraft has stopped running because it encountered a problem; Exception in server tick loop

A full error report has been saved to C:\Users\SovietOnion\AppData\Roaming\.minecraft\crash-reports\crash-2012-11-15_00.11.55-server.txt - Please include a copy of that file (Not this screen!) if you report this crash to anyone; without it, they will not be able to help fix the crash :(

--- BEGIN ERROR REPORT 1e5074f8 --------
Full report at:
C:\Users\SovietOnion\AppData\Roaming\.minecraft\crash-reports\crash-2012-11-  15_00.11.55-server.txt
Please show that file to Mojang, NOT just this screen!

Generated 11/15/12 12:12 AM

-- System Details --
Details:
Minecraft Version: 1.4.4
Operating System: Windows 7 (amd64) version 6.1
Java Version: 1.7.0_05, Oracle Corporation
Java VM Version: Java HotSpot(TM) 64-Bit Server VM (mixed mode), Oracle Corporation
Memory: 318267992 bytes (303 MB) / 534249472 bytes (509 MB) up to 954466304 bytes (910 MB)
JVM Flags: 2 total; -Xms512m -Xmx1024m
AABB Pool Size: 23258 (1302448 bytes; 1 MB) allocated, 23258 (1302448 bytes; 1 MB) used
Suspicious classes: No suspicious classes found.
IntCache: cache: 15, tcache: 0, allocated: 3, tallocated: 63
Profiler Position: N/A (disabled)
Vec3 Pool Size: 149614 (8378384 bytes; 7 MB) allocated, 149614 (8378384 bytes; 7 MB) used
Player Count: 0 / 8; []
Type: Integrated Server (map_client.txt)
Is Modded: Probably not. Jar signature remains and both client + server brands are untouched.

java.lang.NullPointerException
at cf.b(SourceFile:103)
at cf.a(SourceFile:35)
at iv.b(SourceFile:437)
at gm.a(SourceFile:72)
at bdr.b(SourceFile:73)
at net.minecraft.server.MinecraftServer.r(SourceFile:769)
at net.minecraft.server.MinecraftServer.q(SourceFile:686)
at bdo.q(SourceFile:117)
at net.minecraft.server.MinecraftServer.run(SourceFile:620)
at fy.run(SourceFile:856)
--- END ERROR REPORT 8eb5620c ---------- 
```

当它说完整的错误报告位于“”时，它说：

```
---- Minecraft Crash Report ----
// I'm sorry, Dave.

Time: 11/15/12 12:18 AM
Description: Exception in server tick loop

java.lang.NullPointerException
at cf.b(SourceFile:103)
at cf.a(SourceFile:35)
at iv.b(SourceFile:437)
at gm.a(SourceFile:72)
at bdr.b(SourceFile:73)
at net.minecraft.server.MinecraftServer.r(SourceFile:769)
at net.minecraft.server.MinecraftServer.q(SourceFile:686)
at bdo.q(SourceFile:117)
at net.minecraft.server.MinecraftServer.run(SourceFile:620)
at fy.run(SourceFile:856)

-- System Details --
Details:
Minecraft Version: 1.4.4
Operating System: Windows 7 (amd64) version 6.1
Java Version: 1.7.0_05, Oracle Corporation
Java VM Version: Java HotSpot(TM) 64-Bit Server VM (mixed mode), Oracle Corporation
Memory: 190459000 bytes (181 MB) / 536018944 bytes (511 MB) up to 954466304 bytes (910 MB)
JVM Flags: 2 total; -Xms512m -Xmx1024m
AABB Pool Size: 23208 (1299648 bytes; 1 MB) allocated, 23208 (1299648 bytes; 1 MB) used
Suspicious classes: No suspicious classes found.
IntCache: cache: 15, tcache: 0, allocated: 3, tallocated: 63
Profiler Position: N/A (disabled)
Vec3 Pool Size: 149633 (8379448 bytes; 7 MB) allocated, 149633 (8379448 bytes; 7 MB) used
Player Count: 0 / 8; []
Type: Integrated Server (map_client.txt)
Is Modded: Probably not. Jar signature remains and both client + server brands are untouched. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T05:33:54.870

一个`NullPointerException`应用程序中的一个已经被混淆了（就像这个很明显），只能由供应商/供应商调试。

我建议您提交错误报告....并向您喜欢的神祈祷。

您还可以在 Minecraft 论坛上获得帮助。

但基本上，这不是我们可以在这里为您提供帮助的事情......因为您正在使用的应用程序的封闭/混淆性质。

# php - Jquery Sortable wit undefined number of lists

> ID：13391982
> 
> 赞同：1
> 
> 时间：2012-11-15T05:24:58.407
> 
> 标签：php, javascript, jquery, jquery-ui-sortable

我有一个正在从数据库中检索的列表。列表的数量未定义，因为它们来自数据库。这些列表可以拖到其他列表中。这是代码

```
<?php while(..condition..){ ?>
<ul id="test-list-sub<?=$x?>" class="connectedSortable2" style="padding-bottom:10px;">
  <li id="listItemSub_<?=$row['id']?>">
    <table>...content here...</table>
  </li>
</ul>
<?php $x++; } //end while ?> 
```

Javascript

```
for(var y=0; y<<?=$x?>; y++){

    $("#test-list-sub"+y).sortable({
      handle : '.handle',
      connectWith: ".connectedSortable2",
      update : function () {
          var order = $("#test-list-sub"+y).sortable('serialize');
          alert(order);
        //$("#info2").load("process-sortable.php?"+order+"&panel=2");
      }
    });

} 
```

这个过程有效，但问题是当我尝试获取列表项时，我得到 [Object][object] 但是当我尝试更改

```
var order = $("#test-list-sub"+y).sortable('serialize'); 
```

到

```
var order = $("#test-list-sub0").sortable('serialize'); //or any number 0-number of lists 
```

我得到了价值。似乎在 sortable 的“更新”部分中传递的“值 y”是 y 的最后一个值。我应该怎么做才能从列表中获取值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T06:00:31.240

找到了答案

```
$('.connectedSortable2').each(function() {
        var pid = $(this).attr('id').split('_')[1];
        $("#test-list-sub_"+pid).sortable({
          handle : '.handle',
          connectWith: ".connectedSortable2",
          update : function () {
              var order = $("#test-list-sub_"+pid).sortable('serialize');
              alert(order);
            //$("#info2").load("process-sortable.php?"+order+"&panel=2");
          }
        });
    }); 
```

我使用 each 函数来获取它们。因为他们上的是同一堂课。答案来自[jquery sortable > nested uls](https://stackoverflow.com/questions/958204/jquery-sortable-nested-uls?rq=1)

# java - 如果选择结构

> ID：13391988
> 
> 赞同：0
> 
> 时间：2012-11-15T05:25:21.607
> 
> 标签：java, if-statement, recursion

我在使用递归 Java 程序时遇到了问题，目前的问题是我不明白为什么 base case1 if 正在执行。在对 findPath 的初始方法调用中，传递了值 2 和 0。exitRow = 4 和 cols-1 = 11。所以，我的理解是这个基本情况不应该首先进入 if 语句，因为 maze[][] 中的两个位置不一样（maze[4][11] ！ =迷宫[2][0]）。但这正是它正在做的事情。我显然在对 if 结构的理解中遗漏了一些东西，或者我在其他地方有错误，希望能得到一些帮助。

注意：我也试过

```
if (row == exitRow && col == cols-1) 
```

但这最终给了我一个堆栈溢出。从我对此知之甚少的情况来看，这意味着要么我的递归没有让我更接近基本案例，要么基本案例由于其编写方式而无法访问。根据我一直在使用的本指南[http://www.cs.bu.edu/teaching/alg/maze/](http://www.cs.bu.edu/teaching/alg/maze/) ，我假设我的递归是正确的。这使我相信基本情况是问题所在。

非常感谢。

```
private Boolean findPath(int row, int col)
{
    //base case 1
    if (maze[exitRow][cols-1]==maze[row][col])
    {
        System.out.println("test");//for debugging
        return true;
    }
    //base case 2
    if (maze[row][col] == '#')
    {
        return false;
    }

        maze[row][col] = 'O';
        System.out.println("test1");//for debugging
        steps++;

        //check north
        if (findPath(row+1,col)==true )
        {
        return true;
        }
        //check east
        if (findPath(row,col+1)==true  )
        {
            System.out.println("test2");
        return true;
        }    
        //check south
         if (findPath(row-1,col)== true)
        {
        return true;
        } 
        //check west 
        if (findPath(row,col-1)== true)
        {
        return true;
        }

        System.out.println(steps);
        maze[row][col] = '.';//unmark location

    return false;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T05:47:11.283

```
if( maze[exitRow][cols-1]==maze[row][col] ) 
```

如果当前 tile 与退出 tile 的类型相同，则返回 true。由于起点和出口都是楼层（`.`），因此函数立即返回。坚持这一点：

```
if (row == exitRow && col == cols-1) 
```

看看你有没有找到出口才是正确的测试。现在溢出：

您将输入的瓷砖标记为`O`，但如果标记存在，则从不测试该标记，因此您走北-南-北（此时您备注）-南...。由于您已经测试了墙壁 ( `if (maze[row][col] == '#')`)，因此请测试任一

*   除了无标记的地板：`if (maze[row][col] != '.')`
*   墙壁或标记：`if (maze[row][col] == '#' || maze[row][col] == 'O')`

请注意，您可以对这两种情况进行相同的处理，因为效果是相同的——不要去那里。

# php - 如何在 PHP 中复制 SQL 结果变量？

> ID：13391990
> 
> 赞同：1
> 
> 时间：2012-11-15T05:25:44.003
> 
> 标签：php, html, sql, database, web

我有以下代码将数据检索到变量中：

```
$result = mysql_query("SELECT ............ 
```

然后我尝试复制所述变量：

```
if (!$result) {......}
else{
        $ref =& $result;
        $resultCopy = $ref;
        echo '</br></br>SQL STMT EXECUTED CORRECLTY</br></br>';
    } 
```

然后我使用 $result 打印出一个表格：

```
....
while ($row = mysql_fetch_assoc($result)) {
 echo '<tr>';
 echo '<td>';
 echo $row['name'];
 ....
 } 
```

然后我尝试使用 $resultCopy 打印出一个表格：

```
while ($row1 = mysql_fetch_assoc($resultCopy)) {
 echo '<tr>';
 echo '<td>';
 echo $row['name'];
 ....
 } 
```

但是第二个表格没有将任何数据打印到屏幕上，只是我在表格上方声明的表格标题。

感谢您提供任何帮助/php 编码指南/建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T05:35:00.700

这个怎么样？

```
function MakeCopy($result,&$c1,&$c2){ 
    while($row = mysql_fetch_assoc($result)){
        foreach($row as $key=>$value){         
             $c1[$key]=$value; 
             $c2[$key]=$value; 
       }
   }
}
//call the function like this
$copy1=array();
$copy2=array();
MakeCopy($result,$copy1,$copy2); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T05:31:54.457

第一个循环通过捕获数组中的每一行：

```
$names = array();
while ($row = mysql_fetch_assoc($result)) {
 $names[] = $row;
 echo '<tr>';
 echo '<td>';
 echo $row['name'];
 ....
} 
```

现在只需遍历您创建的数组：

```
foreach( $names as $v ) {
 echo '<tr>';
 echo '<td>';
 echo $v['name'];
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-15T05:44:34.643

@jordan.peoples

如果`$row`是`array(key => value)`这样`array('iam' => 'vknyvz')`_ `foreach($row as $key => value) echo $key . ' ' . $value //iam vknyvz`

它打印出两个键然后它的值

# multithreading - 如何在嵌入式开发工具包中强制上下文切换

> ID：13391993
> 
> 赞同：0
> 
> 时间：2012-11-15T05:26:00.910
> 
> 标签：multithreading, embedded, multiprocessing, context-switch

这些天我学习了多处理器的嵌入式开发，我想问是否可以在调试模式下强制进行上下文切换，以访问我想要的特定线程？如果可能的话，有没有办法通过调试器做到这一点？我使用的调试器是 gdb 来调试系统。

我已经阅读了发布在这里的帖子，但没有真正帮助我解决这些问题。

ps，我知道这可能不是安全的行动，但对我来说是必要的。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T11:58:21.027

这是否可能或可取可能取决于您的操作系统和应用程序的性质。在典型的基于 RTOS 的应用程序中，这样的操作通常是不合适的。通常在 RTOS 中，线程使用某些阻塞函数等待某个事件。当预期的偶数没有发生时，切换到该线程将需要“解除阻塞”，因此后续处理可能会失败。

RTOS 中的大多数阻塞函数都有一个超时选项，这将导致函数在没有事件发生的情况下返回。在线程被阻塞的函数之后设置断点并等待超时或事件将允许您开始单步执行线程。

# clojure - 带有可选键的 defrecord

> ID：13391994
> 
> 赞同：8
> 
> 时间：2012-11-15T05:26:08.063
> 
> 标签：clojure

我是 clojure 的新手，基本上是在尝试学习一些教程。我有一个关于`defrecord`s 的问题。

这是我想做的事情：

```
(defrecord somemap [key1 key2 key3 key4])

(defn give-me-map [m1 m2]
  (somemap. m1 m2)) 
```

在上面的代码中，我希望有`key3`和作为可选的，这样我就不需要在每次创建对象`key4`时给它们赋值。`somemap`

[这里](https://stackoverflow.com/questions/4580606/create-optional-fields-on-clojure-record)有一个类似的问题，但它与我在这里尝试做的相反。

那么是否可以`defrecord`使用可选字段进行定义？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-15T07:22:26.950

使用 时`(defrecord T [...])`，会创建两个工厂函数：`->T`和`map->T`.

第一个使用位置参数作为键。第二个将任意映射应用于记录。

您可以在构造函数中保留`key3`and`key4`并使用`map->somemap`.

```
(defrecord somemap [key1 key2 key3 key4])

(defn give-me-map
  [key1 key2]
  (map->somemap {:key1 key1 :key2 key2})) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-15T05:36:45.550

由于 Clojure 中的记录实现了 map 接口，因此除了构造函数中指定的字段之外的所有字段都是可选的。

因此，使用 only `key1`and声明您的记录`key2`是正确的：only `key1`and`key2`将在构造函数中是必需的，但是您可以通过将它们的值关联到记录上来轻松设置`key3`or （或任何其他键，就此而言），就像任何其他地图一样。`key4`

# c# - 将货币添加到数组元素

> ID：13391995
> 
> 赞同：0
> 
> 时间：2012-11-15T05:26:17.357
> 
> 标签：c#, arrays, currency

我有一个数组，当我打印数组时，我需要在输出上加上 $ 符号。我见过 ValueType 但它不适用于我的数组。请帮帮我，该怎么办？

这是我的代码

```
string[,] Pizza = new string[5, 5]
        {
            {"Name of Pizza \t",   "Small",        "Medium",       "Large",        "XLarge"},
            {"Plain \t \t",           "8.80",       "12.80",    "16.80",    "20.80"},
            {"Hawaian \t",         "10.90",      "15.90",       "20.90",        "25.90"},
            {"Beefy \t \t",           "10.90",      "16.90",        "21.90",        "26.90"},
            {"Vegetarian \t",       "10.90",      "14.90",      "19.90",        "24.90"}
        };

        //print the array
        Console.WriteLine("what type of Pizza do you want?");
        for (int i = 0; i < Pizza.GetLength (0); i++)
        {
            Console.WriteLine();
            for (int j = 0; j < Pizza.GetLength (1); j++)
                Console.Write(Pizza[i, j]+'\t');
        } 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T06:07:32.347

这应该可以帮助你

```
string[,] Pizza = new string[5, 5]
{
    {"Name of Pizza \t",   "Small",        "Medium",       "Large",        "XLarge"},
    {"Plain \t \t",           "8.80",       "12.80",    "16.80",    "20.80"},
    {"Hawaian \t",         "10.90",      "15.90",       "20.90",        "25.90"},
    {"Beefy \t \t",           "10.90",      "16.90",        "21.90",        "26.90"},
    {"Vegetarian \t",       "10.90",      "14.90",      "19.90",        "24.90"}
};

//print the array
Console.WriteLine("what type of Pizza do you want?");
for (int i = 0; i < Pizza.GetLength (0); i++)
{
    Console.WriteLine();

    for (int j = 0; j < Pizza.GetLength (1); j++)

        if(j > 0 && i > 0){
            Console.Write("$" + Pizza[i, j] + '\t');
        }
        else{
            Console.Write(Pizza[i, j] + '\t');
        }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T06:08:21.297

重写。

我对您的问题的解决方案背后的核心思想是我使用十进制数据类型来表示价格，并且我使用标准的“C”格式以便使用适当的货币符号输出它们。

```
enum PizzaSize
{
    Small,
    Medium,
    Large,
    XLarge
}

class Program
{
    static void Main(string[] args)
    {
        var pizzas = new[] {
            new {
                Name = "Plain",
                Prices = new [] {
                    new { Size = PizzaSize.Small, Price = 8.80M },
                    new { Size = PizzaSize.Medium, Price = 12.80M },
                    new { Size = PizzaSize.Large, Price = 16.80M },
                    new { Size = PizzaSize.XLarge, Price = 20.80M },
                }.ToDictionary(item => item.Size, item => item.Price)
            },
            new {
                Name = "Hawaian",
                Prices = new [] {
                    new { Size = PizzaSize.Small, Price = 10.90M },
                    new { Size = PizzaSize.Medium, Price = 15.90M },
                    new { Size = PizzaSize.Large, Price = 20.90M },
                    new { Size = PizzaSize.XLarge, Price = 25.90M },
                }.ToDictionary(item => item.Size, item => item.Price)
            },
            new {
                Name = "Beefy",
                Prices = new [] {
                    new { Size = PizzaSize.Small, Price = 10.90M },
                    new { Size = PizzaSize.Medium, Price = 16.90M },
                    new { Size = PizzaSize.Large, Price = 21.90M },
                    new { Size = PizzaSize.XLarge, Price = 26.90M },
                }.ToDictionary(item => item.Size, item => item.Price)
            },
            new {
                Name = "Vegetarian",
                Prices = new [] {
                    new { Size = PizzaSize.Small, Price = 10.90M },
                    new { Size = PizzaSize.Medium, Price = 14.90M },
                    new { Size = PizzaSize.Large, Price = 19.90M },
                    new { Size = PizzaSize.XLarge, Price = 24.90M },
                }.ToDictionary(item => item.Size, item => item.Price)
            },
        };

        int maxNameWidth = pizzas.Max(item => item.Name.Length);

        const string nameOfPizzaLabel = "Name of Pizza";

        if (maxNameWidth < nameOfPizzaLabel.Length)
        {
            maxNameWidth = nameOfPizzaLabel.Length;
        }

        Console.WriteLine("what type of Pizza do you want?");

        Console.WriteLine("{0} \t{1}\t{2}\t{3}\t{4}",
            nameOfPizzaLabel.PadLeft(maxNameWidth),
            PizzaSize.Small,
            PizzaSize.Medium,
            PizzaSize.Large,
            PizzaSize.XLarge);

        foreach (var pizza in pizzas)
        {
            Console.WriteLine("{0}:\t{1:C}\t{2:C}\t{3:C}\t{4:C}",
                pizza.Name.PadLeft(maxNameWidth),
                pizza.Prices[PizzaSize.Small],
                pizza.Prices[PizzaSize.Medium],
                pizza.Prices[PizzaSize.Large],
                pizza.Prices[PizzaSize.XLarge]);
        }
    }
} 
```

# objective-c - iOS 的 Objective C 中的属性反射

> ID：13391997
> 
> 赞同：5
> 
> 时间：2012-11-15T05:26:20.770
> 
> 标签：objective-c, ios

我希望能够在 Objective C 中的类上使用反射来确定运行时可用的属性。

我现在使用为类做类似的事情

```
NSString *str = NSStringFromClass([object class]); 
```

我想要做的是使用这个结果返回类并查看哪些属性可用以及这些属性是什么类型。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-15T05:30:02.947

可能这会有所帮助：

您可以使用 class_copyPropertyList 获取类中的属性列表

```
objc_property_t * class_copyPropertyList(Class cls, unsigned int *outCount) 
```

然后从每个属性中，您可以使用函数获取属性名称，使用`property_getName`函数获取属性属性`property_getAttributes`（如果需要过滤读写属性）。