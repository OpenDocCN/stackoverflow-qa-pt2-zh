# StackOverflow 问答 15557000-15557999

# asp.net-mvc - Microsoft MVC4 ~ 扩展不一致

> ID：15557003
> 
> 赞同：0
> 
> 时间：2013-03-21T20:05:38.860
> 
> 标签：asp.net-mvc, root, tilde

在 MVC 中，服务器端目录引用顶部的 ~ 应转换为网站的根目录。

我的 cshtml 文件顶部有以下几行：

```
<link rel="STYLESHEET" type="text/css" href="~/codebase/dhtmlxgrid.css">
<script src="~/codebase/dhtmlxcommon.js"></script>
<script src="~/codebase/dhtmlxgrid.js"></script>
<script src="~/codebase/dhtmlxgridcell.js"></script>
<script src ="~/IactexScripts/WorkOrderAdd.js"></script> 
```

运行代码时，我在发送到浏览器的输出中收到以下内容：

```
<link rel="STYLESHEET" type="text/css" href="/codebase/dhtmlxgrid.css">
<script src="/codebase/dhtmlxcommon.js"></script>
<script src="/codebase/dhtmlxgrid.js"></script>
<script src="/codebase/dhtmlxgridcell.js"></script>
<script src ="~/IactexScripts/WorkOrderAdd.js"></script> 
```

请注意，~ 被正确翻译为空，因为它在根目录下运行，而在最后一行，它没有被翻译，因此找不到文件。

这很重要，因为此页面并不总是从网站的根目录运行。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T15:21:46.013

特雷什科是对的！领先的空间是失败的原因。非常感谢！

# ruby-on-rails - 格式化来自参数的日期

> ID：15557004
> 
> 赞同：1
> 
> 时间：2013-03-21T20:05:41.397
> 
> 标签：ruby-on-rails, ruby-on-rails-3

在 Grails 中，如果我定义一个语言环境，并在 i18n 文件上以特定格式设置日期，例如 (dd/mm/AAAA)，如果调用一个请求，例如：

```
http://myapp/myaction?object.date=10/12/2013 
```

当我得到 print:params.date 时，我想到了一个日期对象。

我怎样才能在rails上做同样的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T23:50:41.183

通常，Rails 会为您处理这个问题。例如，表单助手`datetime_select`与一些[activerecord 魔术](https://github.com/rails/rails/blob/d90b4e2/activerecord/lib/active_record/base.rb#L1811)一起工作， 以确保时间/日期类型在往返过程中仍然存在。标准日期选择器有多种替代方案。

如果这对您不起作用，例如 rails 没有生成表单，那么（至少）有几个选项。

一种选择，略带 evi，是猴子补丁`HashWithIndifferentAccess`（由请求参数使用）根据键名进行类型转换。它可能看起来像：

```
module AddTypedKeys

  def [](key)
    key?(key) ? super : find_candidate(key.to_s)
  end

private

  # look for key with a type extension  
  def find_candidate(key)
    keys.each do |k|
      name, type = k.split('.', 2)
      return typify_param(self[k], type) if name == key
    end
    nil
  end

  def typify_param(value, type)
    case type
      when 'date'
        value.to_date rescue nil
      else
        value
    end
  end   
end

HashWithIndifferentAccess.send(:include, AddTypedKeys) 
```

这将以您描述的方式扩展 params[] 。要在 rais 中使用它，您可以将其放入初始化程序中，例如`confg/initializers/typed_params.rb`

要查看它的工作原理，您可以使用

```
params = HashWithIndifferentAccess.new({'a' => 'hello', 'b.date' => '10/1/2013', 'c.date' => 'bob'})
puts params['b.date'] # returns string 
puts params['b'] # returns timestamp
puts params['a'] # returns string
puts params['c'] # nil (invalid date parsed) 
```

但是......我不确定这是否值得，它可能不适用于 Rails 4 / StrongParameters。

更好的解决方案是在模型中使用*虚拟属性*。有关使用慢性的一个非常好的示例，请参阅[此 SO 帖子](https://stackoverflow.com/questions/3296995/how-to-use-chronic-to-parse-dates-in-a-datetime-text-field)。

# c# - 表单关闭时计时器不停止

> ID：15557007
> 
> 赞同：0
> 
> 时间：2013-03-21T20:05:47.467
> 
> 标签：c#, multithreading, asynchronous, timer, ping

我有一个非常奇怪的错误，我似乎无法弄清楚。我会尽我所能把这个布置好。

上下文：我有一个应用程序，它会不断地对一组位于不同位置的 IP 进行 ping 操作。（我们需要查看每个设备是否在给定时间启动）

错误：当 ping 主机时，他们的互联网已关闭，应用程序显示所有设备都已关闭（应该如此）。但是当关闭应用程序时，进程（主应用程序 exe）仍在运行，我们的路由器流量显示持续 ping 仍在运行。（相同的时间间隔）。所以它就像计时器一直在走。

但是当应用程序关闭并且组启动时，进程会正常关闭，并且所有 ping 都会停止。

我可以提供你们想看的任何代码。先介绍一下基本情况：

我有一个名为 EquipmentObj 的类。在构造函数内部，启动了一个连续的 ping（异步）*注意，这一切都是在单独的表单上完成的，而不是在主表单上完成的。构造函数和属性：

```
System.Timers.Timer TimerObj { get; set; }
public EquipmentObj(string ipAddress)
        {
                this.IP_Address = ipAddress;
                this.TimerObj = new System.Timers.Timer();
                this.TimerObj.Interval = 2000;
                this.TimerObj.Elapsed += TimerObj_Elapsed;
                this.TimerObj.AutoReset = true;
                this.start();
        } 
```

开始和经过的方法：

```
private void start()
        {
            this._requestStop = false;
            this.TimerObj.Start();
        }

        private void TimerObj_Elapsed(object sender, System.Timers.ElapsedEventArgs     e)
            {
                if(!_requestStop)
                    base.start_Ping(this.Ip_Address);
            } 
```

基类：

```
public void start_Ping(string ipAddress)
        {
            try
            {
                Ping pingSender = new Ping();

                // Create the event Handler 
                pingSender.PingCompleted += pingSender_PingCompleted;

                // Create the buffer
                // Reference buff size: "aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa"
                byte[] packetData = Encoding.ASCII.GetBytes("aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa");
                // Create the pingOptions object
                PingOptions packetOptions = new PingOptions();
                // Parse the passed ip address to a proper ipaddress object
                IPAddress ip = System.Net.IPAddress.Parse(ipAddress);

                // Send async
                pingSender.SendAsync(ip, 1050, packetData, ip);
            }
            catch (Exception ex)
            {
                Error_Log.write_log(ex);
            }
        }

        public virtual void pingSender_PingCompleted(object sender, PingCompletedEventArgs e)
        {
            throw new NotImplementedException();
        } 
```

实现 Ping 完成：

```
 public override void pingSender_PingCompleted(object sender, PingCompletedEventArgs e)
        {
            if (e.Reply.Status == IPStatus.Success)
                this.status = "On Line";
            else
            {
                this.status = "Off Line";
                this.setBounced = ++this.setBounced  ?? 1;
            }
            this.setResponse = e.Reply.RoundtripTime.ToString();
        } 
```

最后我的清理在表单关闭时调用：

```
 foreach (EquipmentObj obj in this.objectListView1.Objects)
                {
                    obj.Stop();
                } 
```

这里是停靠点：

```
public void Stop()
       {
           this._requestStop = true; 
           this.TimerObj.Stop();
       } 
```

我试过的：

*   将清理（上图）添加到结束事件中。
*   将我的计时器从 system.threading 计时器移至 system.timer 计时器。
*   我试过实现一次性的。
*   在表单关闭事件中将 Timers 设置为 null。
*   在它自己的计时器上调用 dispose。

这些都没有奏效。我希望我没有用太多的代码和写作压倒你们所有人。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T20:29:39.317

My best bet is you have an exception being thrown prior to the Stop being called. I will put some more `try { } catch` statements in there so you can handle errors.

You may have some threading issues where you are trying to access objects not created on the same thread.

I would check if you need to Invoke anytime you mess with the timer object.

```
void Stop()
{
    if (objectListView1.InvokeRequired)
    {
         objectListView1.BeginInvoke(new Action(Stop));
         return;
    }

    foreach (EquipmentObj obj in this.objectListView1.Objects)
    {
        obj.Stop();
    }
} 
```

# javascript - 使用 createElement() 创建输入列表

> ID：15557015
> 
> 赞同：1
> 
> 时间：2013-03-21T20:05:55.740
> 
> 标签：javascript, createelement

我将如何使用创建用户输入的列表`createElement()`？这样当有人在`prompt("enter text")`框中添加文本时，它会显示在屏幕上。我试过研究`createElement()`，但我仍然只能使用变量显示最新的输入。

编辑：

```
<script>

function myFunction()
{
var user =prompt("Enter your name:")
var text =prompt("Hello " + user + ". Enter some text:")
count++;
document.getElementById("count").innerHTML=count;
document.getElementById("latest").innerHTML=text;
}

</script>

<p>Total: <span id="count">0</span></p>
<p>Latest blocked term: <span id="latest"></span></p>
<button onclick="myFunction()">Click</button> 
```

我已经切断了不相关的部分，所以我希望这可行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T20:09:28.837

每次用户在提示中输入文本时，您都需要创建输入框

```
function addInput(){
    var text = prompt("");
    var input = document.createElement('input');
    input.value = text;
    document.body.appendChild(input);

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T20:17:08.463

超短方式：

```
function renderInput(){
    document.getElementById("latest").innerHTML += prompt("What is your name?") + "<br />";
} 
```

使用您的示例：

```
<script>
    function myFunction() {
        document.getElementById("latest").innerHTML += prompt("Enter some text:") + "<br />";
    }
</script>

<p>Latest text: <span id="latest"></span></p> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T20:27:01.617

您在这里有两个选择。

# DOM 方式

这是您使用 搜索的方式`createElement`。从某种意义上说，这是最好的方式，因为它允许您与已经存在的 DOM 进行交互。但是，您*不需要* `createElement`：您应该真正使用[`createTextNode`](https://developer.mozilla.org/en-US/docs/DOM/document.createTextNode)，它会按照锡上的说明进行操作：

```
function myFunction() {
    var name = prompt("Enter some text:"),
        node = document.createTextNode(name);
    document.getElementById('latest').appendChild(node);
} 
```

[jsFiddle 示例](http://jsfiddle.net/9ySJD/)

（这导致将文本添加到元素的末尾：它不会删除已经存在的内容。）

# 现实的方式

虽然使用 DOM 函数很好，但它并不是真正地道的 Javascript。实际上，`innerHTML`是您可能应该使用的属性。浏览器*非常*擅长解析 HTML（毕竟这是它们的目的！）所以这几乎肯定会比 DOM 方法更快。

```
function myFunction() {
    var name = prompt("Enter some text:");
    document.getElementById('latest').innerHTML = name; // to overwrite the existing contents
    document.getElementById('latest').innerHTML += name; // to add to the existing contents
} 
```

[jsFiddle 示例](http://jsfiddle.net/9ySJD/1/)

还有其他方法，例如 using `createDocumentFragment`，但几乎可以肯定第二种方法是您要走的路。

# java - 异步任务中的 getInputStream

> ID：15557019
> 
> 赞同：0
> 
> 时间：2013-03-21T20:06:14.500
> 
> 标签：java, android, sockets, android-asynctask, socketserver

我有一个 Activity，它调用异步任务以通过预定义的 InetAddress 接受套接字连接。

Async 任务调用另一个 Async 任务来监听消息。但它挂在 get 输入流上

我已经绞尽脑汁好几个小时了，无法弄清楚它为什么会挂起……请帮忙。

```
public void startSocketListener(InetAddress groupOwnerAddress) {
    // TODO Auto-generated method stub
    AcceptClientThread accept;
    try {
        accept = new AcceptClientThread();
        accept.execute();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

}

public class AcceptClientThread extends AsyncTask<Void, String, String>{

    public AcceptClientThread() throws IOException{

    }

    @Override
    protected void onCancelled() {
        // TODO Auto-generated method stub
        try {
            serverSocket.close();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            Log.e("CONNECTION ERR", "Could not close serverSocket " + e.toString());
        }
        super.onCancelled();
    }

    @Override
    protected String doInBackground(Void... params) {

        try {
            serverSocket = new ServerSocket(port);
        } catch (IOException e) {
            Log.e("CONNECTION ERR","Could not listen on port: " + port);
            onCancelled();
        }

        while (listening){
            try {
                Log.i("CONNECTION", "AWAITING CONNECTION TO CLIENT");
                Socket newSocket = serverSocket.accept();
                Log.i("CONNECTION", "CONNECTED TO CLIENT");
                ListenerThread lThread = new ListenerThread(newSocket);
                lThread.execute("Do it");
                Log.i("CONNECTION", "ACCEPTED CLIENT");
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
                onProgressUpdate("could not accept client");
            }

        }
        Log.i("CONNECTION", "close socket");
        try {
            serverSocket.close();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        return "table connected";
    }

    @Override
    protected void onProgressUpdate(String... values) {
        super.onProgressUpdate(values);
        // received data is first element in the String
        //Toast.makeText(KitchenActivity.this, values[0], Toast.LENGTH_SHORT).show();
    }

}

public class ListenerThread extends AsyncTask<String, Order, Void> {

    private Socket socket;
    ObjectInputStream ois;

    public ListenerThread(Socket socket){
        this.socket = socket;
        try {
            ois = new ObjectInputStream(this.socket.getInputStream()); //hangs here
        } catch (StreamCorruptedException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T20:31:43.487

根据**[文档](http://developer.android.com/reference/android/os/AsyncTask.html)**

> **线程规则**
> 
> 要使此类正常工作，必须遵循一些线程规则：
> 
> AsyncTask 类必须在 UI 线程上加载。这是从 JELLY_BEAN 自动完成的。任务实例必须在 UI 线程上创建。

您可以通过在您成功后在`Thread`您`onPostExecute()`的第一个中调用您的 new 来处理此问题，因为在`AsyncTask``accept()``onPostExecute()``UI`

另外，不用多看它，我相信你会想`while loop`在它接受请求后的第一个任务中突破你的。然后，当您需要建立另一个连接时，您会在您的`UI`和`execute`它中再次创建此任务的新实例。如果不看更长时间，我对最后一部分并不乐观，但这似乎是正确的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T20:10:57.073

我不确定，但我猜你只能从 UI 线程调用 AsyncTask.execute()，而你正试图从在单独线程中运行的 doInBackground() 中调用它。

# python - Python：解析包含特定字符的行的网页内容并存储到文件中

> ID：15557020
> 
> 赞同：0
> 
> 时间：2013-03-21T20:06:17.103
> 
> 标签：python, xml, python-2.7

我是 python 新手。我有包含以下内容的网页：

```
<Response>
<Value type="ABC">107544</Value>
<Value type="EFG">10544</Value>
<Value type="ABC">77544</Value> 
```

我想解析包含 ABC 的行并仅将数字存储在临时文本文件中。我怎样才能做到这一点？

目前我有

```
htmlpage = urllib2.urlopen(<URL>)
result = htmlpage.read() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T20:08:33.387

将您的结果放入`BeautifulSoup`中，您将能够非常轻松地提取任何数据而无需正则表达式

# 更新：

```
from bs4 import BeautifulSoup

result = '''<div class="test">
             <a href="example">Result 1</a>
            </div>

            <div class="test">
             <a href="example2">Result 2</a>
            </div>'''

soup = BeautifulSoup(result)

for div in soup.findAll('div', attrs={'class':'test'}):
    print div.find('a').text

Result 1
Result 2 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T20:14:07.243

我将支持使用 BeutifulSoup 解析 HTML 的建议，但如果您坚持使用正则表达式，您可以尝试以下操作：

```
re.findall('(?<=type="ABC">).+?(?=<\/)', text, re.S) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T21:13:36.623

或者 lxml 和 xpaths

```
>>>from lxml import html

>>>result = html.fromstring('''<Response>
<Value type="ABC">107544</Value>
<Value type="EFG">10544</Value>
<Value type="ABC">77544</Value></Response>''')

>>>result.xpath('//value[@type="ABC"]/text()')
...['107544', '77544'] 
```

# c# - 在 WP7 和 WP8 应用程序之间共享 dll

> ID：15557022
> 
> 赞同：0
> 
> 时间：2013-03-21T20:06:23.043
> 
> 标签：c#, windows-phone-7, windows-phone-8

通常[建议](http://www.developer.nokia.com/Community/Wiki/Maintaining_a_WP7_and_WP8_version_of_a_same_application)为 wp7 和 wp8 平台有两个项目。Wp7 项目包含 .cs 和 .xaml 文件，而 WP8 项目包含指向这些文件的链接。

我认为没有理由将非平台特定的业务逻辑代码编译两次，因为它可以引用到 WP8 项目。

我正在考虑以下解决方案结构：

*   为 wp7 编译的业务逻辑 dll（不是 PCL）
*   为 wp8 编译的 UI
*   为 wp7 编译的 UI

这样的应用程序可以编译，我可以将它部署到设备/模拟器。

问题是：这个应用程序会通过 Windows 手机商店的认证吗？还是需要重新编译共享dll？

**UPD：** 我的疯狂想法是在以下步骤之后诞生的：

1.  创建新的 WP7 应用程序 ( **WindowsPhoneApplication1** )
2.  创建针对 WP7 的类库 ( **WindowsPhoneClassLibrary1 ) 在****WindowsPhoneApplication1**中使用它
***   使用升级到 WP8 菜单。**WindowsPhoneApplication1**将更新为 WP8，但引用的项目仍将针对 WP7！*   这样的应用程序可以部署到 WP8 设备。**

 *** * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T20:26:51.200

除非您使用可移植类库，否则您需要拥有单独的项目文件，并为 WP7 和 WP8 分别编译。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T13:24:56.823

感谢克劳斯，我做了一些研究，看起来答案是——你可以使用这样的解决方案。

我没有在文档中找到相关信息，但这是来自 MSFT 技术之一的证明。来自荷兰的福音传道者：[链接到博文](http://blog.rajenki.com/2012/12/how-to-add-windows-phone-8-builds-to-your-existing-apps/)

> 基本想法是将我们现有的 Windows Phone 7 应用程序以及我们将很快添加的 Windows Phone 8 构建中可以使用的所有代码移动到解决方案中的 Common 项目。这种方法的坏处是我们必须将 Common 项目创建为 Windows Phone 7 类库，它将在我们的 Windows Phone 8 构建中使用。我没有真正注意到这个决定对我现有的应用程序有任何负面影响，但请注意，您将在 Windows Phone 8 构建中引用 Windows Phone 7 库。

所以这是可能的，但不是最好的解决方案。**

# c# - 应该如何在数据库中保存没有实体的对象

> ID：15557031
> 
> 赞同：0
> 
> 时间：2013-03-21T20:06:46.897
> 
> 标签：c#, entities, value-objects

实体“学年”具有可配置的可见工作日，这些工作日在时间计划器中可见或不可见。

我现在看到 2 个可能来保存可见的工作日。

要么我建立一个 N:M 关系：N 个学年有 M 个 VisibleWeekDays

或者我将可见的星期天放在逗号分隔的字段中：“0,2,5”

这些数字是来自 DayOfWeek 枚举的枚举值。

我真的应该采用这种开销方式创建另外 2 个表（junction + VisibleWeekDay 表），只是为了在一个字段中保存一天的索引吗？

您将如何保存可见的工作日？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-21T20:11:00.797

数据库字段中的逗号分隔伤害了我的感受。考虑一个位掩码：

```
[Flags]
public enum DayOfWeek
{
   Undefined = 0,
   Mon = 1,
   Tue = 2,
   Wed = 4,
   Thu = 8,
   Fri = 16,
   Sat = 32,
   Sun = 64
}

DayOfWeek bitmask = DayOfWeek.Mon | DayOfWeek.Wed | DayOfWeek.Sat; 
```

这样你就可以保持理智和查询能力。

要在 SQL 中查询：

```
DECLARE @bitmast INT;
SET @bitmask = 64 | 1 | 16; -- sun, mon, fri

SELECT * FROM tbl
WHERE DayOfWeekBitMask & @bitmask = @bitmask; 
```

要使用 LINQ to Entities 进行查询：

```
int bitmask = DayOfWeek.Sun | DayOfWeek.Mon |DayOfWeek.Fri;
var query = Context.tbl.Where(r => (r.DayOfWeekBitMask & bitmask) == bitmask); 
```

坚持：

```
int bitmask = DayOfWeek.Sun | DayOfWeek.Mon |DayOfWeek.Fri;
var item = Context.tbl.First();

item.DayOfWeekBitMask = bitmask;
Context.SaveChanges(); 
```

# css - 当我在某个点向下滚动或刷新时，CSS固定定位的div消失

> ID：15557033
> 
> 赞同：0
> 
> 时间：2013-03-21T20:06:53.187
> 
> 标签：css, html, scroll, fixed

我有一个 jquery 插件，所以我不知道问题出在哪里，我试图再做一次，但是当我到达固定部分时，它又发生了，我真的不知道该怎么做，我必须完成这项工作明天前

//这是我的css

```
@media only screen and (max-width:360px) {
#menu a:link {
color : #FFF;
}
#menu a:visited {
color : #FFF;
}
#menu a:hover {
color : red;
}
#menu {
position : relative;
left : 0;
padding : 0;
margin : 0;
}
#logo {
width : 100%;
}
#menu ul {
position : relative;
left : 0;
height : auto;
top : 0;
margin : 0;
padding : 0;
width : 100%;
margin : 0;
}
}

#menu{
font-family : 'Roboto Condensed', sans-serif;
font-size : 15px;
position : relative;
left: 0;
top: 0;
border: rgba(73, 73, 73, 0.3) solid 1px;
width: 100%;
background-image: url(grain.png);
background-color: rgba(0, 0, 0, 0.53);
padding: 0;
margin: 0;
text-align: center;
display: inline-block;

}
#menu ul {
list-style : none;
}
#menu li {
position : relative;
top : 69px;
line-height : 18px;
float : left;
}

@media only screen and (min-width:641px) {
#menu ul {
display : inline-block;
text-align : center;
height : 104px;
width: 980px;
margin : 0;
padding : 0;
}
#menu ul li a {
padding : 2px 0;
margin : 8px;
}
#menu ul li a:link {
-webkit-transition-duration: 0.2s;
-moz-transition-duration: 0.2s;
transition-duration: 0.2s;
background : transparent;
width : 100%;
color : rgb(255, 255, 255);
text-decoration : none;
transition-duration : 0.2s;
}
#menu ul li a:visited {
width : 100%;
height : 104px;
color : rgb(255, 255, 255);
text-decoration : none;
background : transparent;
}
#menu ul li a:active {
width : 100%;
color : rgb(255, 255, 255);
text-decoration : none;
}
#menu ul li a:hover {
background : transparent;
border-bottom : 3px solid #fff;
color : #f4f4f4;
text-decoration : none;
}
}

@media only screen and (max-width:641px) {
#menu ul {
height : auto;
width : 100%;
}
#registro {
display : none;
}
}

#barra_arriba {
z-index : 30;
position : fixed;
left : 0;
top:0;
border : rgba(73, 73, 73, 0.3) solid 1px;
width : 100%;
background-image : url(grain.png);
background-color : rgba(0, 0, 0, 0.53);
padding : 0;
margin : 0;
text-align : center;
display : inline-block;
-webkit-transition-duration: 0.4s;
-moz-transition-duration: 0.4s;
transition-duration: 0.4s;
}

#barra_arriba img {
width: 238px;
float: left;
}

//AND THIS IS MY HTML

<div id="barra_arriba">
<div id="logo"></div>
<div id="menu">
<ul>
<li style="position:relative;top:0px;" ><img     src="http://www.imichproducciones.com/imagen/imich_producciones.png" alt="IMICH" class="logotipo"/>    </li>
<li id="tit"><a href="/" style="color:rgb(245, 0, 51);">IMICH</a></li>
<li><a href="/inscripciones/">INSCRIPCIONES</a></li>
<li><a href="/licenciatura/">LICENCIATURA</a></li>
<li><a href="/maestrias/">MAESTR&Iacute;AS</a></li>
<li><a href="/doctorado/">DOCTORADO</a></li>
<li><a href="/diplomados/">DIPLOMADOS</a></li>
<li><a href="/contacto/">CONTACTO</a></li>
</ul>
</div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-18T20:51:17.813

我在 Chrome 上遇到了同样的问题，这似乎是当页面内部发生太多事情时发生的错误，我能够通过将以下转换代码添加到固定位置元素来修复它，（`transform: translateZ(0);-webkit-transform: translateZ(0);`）强制浏览器使用硬件加速来访问设备的图形处理单元 (GPU) 以使像素飞起来。另一方面，Web 应用程序在浏览器的上下文中运行，这使软件可以完成大部分（如果不是全部）渲染，从而减少了转换的动力。但是 Web 一直在迎头赶上，现在大多数浏览器供应商都通过特定的 CSS 规则提供图形硬件加速。

使用-webkit-transform: translate3d(0,0,0); 将为 CSS 过渡启动 GPU，使它们更平滑（更高的 FPS）。

**注意：** translate3d(0,0,0) 对您看到的内容没有任何作用。它在 x、y 和 z 轴上将对象移动 0px。这只是一种强制硬件加速的技术。

```
#barra_arriba {
    position: fixed;
    z-index...
    /* MAGIC HAPPENS HERE */
    transform: translateZ(0);
    -webkit-transform: translateZ(0);
} 
```

# c++ - Visual Studio 2010 LibTomCrypt 构建或库链接错误

> ID：15557035
> 
> 赞同：3
> 
> 时间：2013-03-21T20:07:04.140
> 
> 标签：c++, c, static-libraries, linker-errors

使用整个 LibTomCrypt 源，我用 Visual Studio 2010 构建了一个库文件，它可以毫无问题地编译。但是，当创建一个简单的测试控制台应用程序链接 TomCrypt 库时，我收到以下代码的链接器错误：

***测试代码***：

```
#include <stdio.h>
#include <tomcrypt.h>

int main()
{
    int Cipher;

    register_cipher( &aes_desc );
    Cipher = find_cipher( "aes" );
    if( Cipher != CRYPT_OK )
        return 0;

    printf( "Cipher name: %s\n", cipher_descriptor[ Cipher ].name );
    unregister_cipher( &aes_desc );

    return 0;
} 
```

***链接器错误***：

```
error LNK1120: 1 unresolved externals
error LNK2001: unresolved external symbol _aes_desc 
```

有趣的是，*调试*库构建与测试代码完美配合。似乎缺少一些符号的是*tomcrypt.lib*的*发布*版本。

 *现在我对构建和使用库文件并不陌生，但我想知道，是否有一些特定的编译器标志或预防措施可以在发布模式下构建库并让它在我的测试程序中正确链接？是否可能是在 LibTomCrypt 代码中定义的静态 aes_desc 结构通过一些编译器优化从库的发布版本中丢失？

我希望有人可以为我自己和遇到此问题的其他人提供一些见解。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-08T22:34:12.427

我今天刚刚遇到了一个相关的问题。Visual Studio 的项目配置包括构建 aes.c 的自定义步骤，但仅涵盖调试构建。一旦我为发布版本做出了类似的规定，一切都很好。

在文本编辑器中打开 Visual Studio 2010 项目并将自定义构建步骤替换为以下步骤。这也将修复 Debug 构建的一些警告：

```
 <CustomBuild Include="src\ciphers\aes\aes.c">
      <Command Condition="'$(Configuration)|$(Platform)'=='Debug|Win32'">cl /nologo /MTd /W3 /Gm /EHsc /ZI /Od /I "src\headers" /I "..\libtommath" /D "_DEBUG" /D "LTM_DESC" /D "WIN32" /D "_MBCS" /D "_LIB" /D "LTC_SOURCE" /D "USE_LTM" /Fp"Debug/libtomcrypt.pch" /Fo"Debug/" /Fd"Debug/" /FD /RTC1 /c %(FullPath)  
cl /nologo /DENCRYPT_ONLY /MTd /W3 /Gm /EHsc /ZI /Od /I "src\headers" /I "..\libtommath" /D "_DEBUG" /D "LTM_DESC" /D "WIN32" /D "_MBCS" /D "_LIB" /D "LTC_SOURCE" /D "USE_LTM" /Fp"Debug/libtomcrypt.pch" /Fo"Debug/aes_enc.obj" /Fd"Debug/" /FD /RTC1 /c %(FullPath)</Command>
      <Outputs Condition="'$(Configuration)|$(Platform)'=='Debug|Win32'">Debug/aes.obj;Debug/aes_enc.obj;%(Outputs)</Outputs>
    </CustomBuild>
    <CustomBuild Include="src\ciphers\aes\aes.c">
      <Command Condition="'$(Configuration)|$(Platform)'=='Release|Win32'">cl /nologo /MT /W3 /O2 /I "src\headers" /I "..\libtommath" /D "NDEBUG" /D "LTM_DESC" /D "WIN32" /D "_MBCS" /D "_LIB" /D "LTC_SOURCE" /D "USE_LTM" /Fp"Release/libtomcrypt.pch" /Fo"Release/" /Fd"Release/" /FD /c %(FullPath)  
cl /nologo /DENCRYPT_ONLY /MT /W3 /O2 /I "src\headers" /I "..\libtommath" /D "NDEBUG" /D "LTM_DESC" /D "WIN32" /D "_MBCS" /D "_LIB" /D "LTC_SOURCE" /D "USE_LTM" /Fp"Release/libtomcrypt.pch" /Fo"Release/aes_enc.obj" /Fd"Release/" /FD /c %(FullPath)</Command>
      <Outputs Condition="'$(Configuration)|$(Platform)'=='Release|Win32'">Release/aes.obj;Release/aes_enc.obj;%(Outputs)</Outputs>
    </CustomBuild> 
```*

# javascript - 使用 preventDefault 后，为什么我不能用 jquery 选中一个框？

> ID：15557038
> 
> 赞同：2
> 
> 时间：2013-03-21T20:07:20.180
> 
> 标签：javascript, jquery

为什么下面的代码不起作用。我阻止对事件的默认操作。然后我还是想选中该框。

**html**

```
<input type="checkbox" class="checkbox" /> 
```

**javsacript**

```
$('.checkbox').click( function(e) {
    e.preventDefault();
    // some logic happens... now i may decide to check the box (in this case we want to check it for testing)
    $('.checkbox').prop('checked',true);
}); 
```

您会认为单击复选框仍会选中该框..但事实并非如此。检查小提琴以了解我的意思。

[http://jsfiddle.net/5KDH8/](http://jsfiddle.net/5KDH8/)

我也尝试过使用该`attr`功能，但没有任何运气。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T20:10:51.850

您必须将设置“已检查”属性的代码放在单独的事件循环中：

```
setTimeout(function() { $('.checkbox').prop('checked', true); }, 1); 
```

在事件处理程序返回后，浏览器或库必须取消设置复选框，因为它在调用处理程序*之前*设置它以响应单击。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T20:43:09.520

```
$('.checkbox').click( function(e) {
    // do some logic that returns true or false
    if (!mylogic) {
        return false;
        // returning false will prevent the checkbox to be checked.
    }
}); 
```

# html - Galaxy s3浏览器屏幕宽度

> ID：15557047
> 
> 赞同：1
> 
> 时间：2013-03-21T20:07:59.320
> 
> 标签：html, mobile, amazon-s3, galaxy

Galaxy s3 有默认浏览器和 chrome。两种浏览器都警告宽度为 964。规格上说它的宽度是 720 怎么可能？

```
<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<!--<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.5;">-->
<title>Test mobile</title>
<link href="style.css" rel="stylesheet" type="text/css"/>
<script>
function alertDimension()
{
    alert( "w: " + document.body.offsetWidth + ", h: " + document.body.offsetHeight );  
}
</script>
</head>
<body onload="alertDimension();">
<div class="wrapper">
    <p>Hello World
    </p>    
</div>
</body>
</html> 
```

# php - 对来自数据库的数据使用 javascript 函数的解决方案

> ID：15557057
> 
> 赞同：0
> 
> 时间：2013-03-21T20:08:38.270
> 
> 标签：php, javascript, google-maps

我想知道是否有一种解决方案可以将 javascript 函数与我从数据库中获取的 PHP 变量一起使用。我知道 PHP 是一种服务器语言，而 javascript 是一种客户端语言，但我实际上面临着这个问题。也许有人可以帮助我？

我有点的 GPS 坐标：“纬度”和“经度”保存在我的数据库中，我通过 PHP 中的一个函数获取它们，该函数返回一个 PHP 选项卡，其中包含数据。

然后我想用这个javascript函数在谷歌地图中插入不同的点：

```
function afficherPoint(latitude, longitude) {
    var point = new google.maps.LatLng(latitude,longitude); 
    var optionsMarqueur = { position: point, map: map, title: "test" }
    var marqueur = new google.maps.Marker(optionsMarqueur); 
} 
```

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T20:11:05.667

只需使用 PHP 输出变量。

```
<?php
    $myVar = 'I am a variable';

    echo '<script>
            var stuff = "'.$myVar.'"
        </script>'; 
```

然后你可以在javascript中使用变量

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T20:11:43.727

1.  您可以使用 PHP 呈现您的 javascript。

2.  您可以让 php 定义全局 JS 变量，然后您可以在单独的文件中使用 javascript 访问它们，

3.  您可以让您的 javascript 从您的网络服务器异步加载数据

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T20:11:55.213

您可以将变量直接发布到 JavaScript（而不是相反），例如：

```
<?php
$name = "John";
?>
<script>alert("My name is <?php echo $name; ?>");</script> 
```

或者如果它是一个动态的东西，你可以使用 AJAX。
如果您使用的是 jQuery，请查看以下文档：[jQuery AJAX](http://api.jquery.com/jQuery.ajax/)
您可以调用 PHP 脚本，获取新变量并对它们进行任何操作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T20:12:33.063

是的，您可以在 javascript 函数中使用 php。一个非常基本的例子

`var aVar = "<?php echo $aVar; ?>"`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-22T08:21:53.817

你可以在这个项目中使用 ajax：

[本教程来自谷歌](https://developers.google.com/maps/articles/phpsqlinfo_v3)

你可以试试

[https://developers.google.com/maps/articles/phpsqlinfo_v3](https://developers.google.com/maps/articles/phpsqlinfo_v3)

# cobol - 字帖字段起始位置

> ID：15557062
> 
> 赞同：2
> 
> 时间：2013-03-21T20:08:52.190
> 
> 标签：cobol, copybook

有没有人有一种快速的方法来查找字段的 COBOL 字帖起始位置？例如：

```
000100 01  BGG-FILE-REC.                                                        
000200     03  BGG-RCD-KEY.                                                     
000300         05  BGG-DUDENAME            PIC XXXX. 
000400         05  BGG-DUDEADDR            PIC XX.   
000500         05  BGG-HAIRCOLOR           PIC X(71). 
000600         05  BGG-EYECOLOR            PIC X(8). 
```

BGG-HAIRCOLOR 列从第 7 列开始。但是，我正在处理的实际文件有大约 250 个变量，总计 3400 字节。用手动计算器浏览并添加 PIC 值是可怕的，在我的有生之年不会发生。当我检查系统的输出时，在 vi 中有这个数字会很好；即，BGG-EYECOLOR 值是否落在正确的列中？

我可以编写一个 perl 脚本来注释这样的字帖，但在我这样做之前，我想知道是否有人有更流畅的方法来获得相同的值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T12:32:54.357

如果是用于大型机，您可以使用[cb2xml](http://cb2xml.sourceforge.net/)将字帖转换为 xml（带有字段 Start）。

或者，您可以使用[RecordEditor](http://record-editor.sourceforge.net/)。将 Cobol Copybook 导入 RecordEditor（请参阅[RecordEditor-Cobol Notes](http://record-editor.sourceforge.net/Cobol.html)）。RecordEditor 将计算字段位置。您可以将记录编辑器布局中的字段复制并粘贴到 Excel 或文本编辑器中，或者您可以将记录布局导出为 Xml

RecordEdityor 可用于多种 Cobol 方言（大型机、OpenCobol）。

如果您正在阅读 java 中的文件，您应该查看[JRecord](http://jrecord.sourceforge.net/)。JRecord 将允许您使用 Cobol Copybook 读取 Java 中的 Cobol 数据文件。

Legstar也[值得一看](http://www.legsem.com/legstar/)。Legstar 最初是从在线数据传输的 dealloy 开始的，但他们一直在扩展。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-07-02T11:11:26.343

免责声明：我维护[https://www.cobolcopybook.co.in](https://www.cobolcopybook.co.in)

您好，请查看网站[https://www.cobolcopybook.co.in](https://www.cobolcopybook.co.in)，该网站专为分析 COBOL 字帖而设计。

例如。您的输入字帖是（如问题所述）：

```
000100 01  BGG-FILE-REC.
000200     03  BGG-RCD-KEY.
000300         05  BGG-DUDENAME            PIC XXXX.
000400         05  BGG-DUDEADDR            PIC XX.
000500         05  BGG-HAIRCOLOR           PIC X(71).
000600         05  BGG-EYECOLOR            PIC X(8). 
```

然后输出将是：

```
SR#  LEVEL   FIELD NAME                 PICTURE   TYPE      START      END   LENGTH

0  1  BGG-FILE-REC.                 @         AN            1       85       85
1  3  BGG-RCD-KEY.                  @         AN            1       85       85
2  5  BGG-DUDENAME                  XXXX.     AN            1        4        4
3  5  BGG-DUDEADDR                  XX.       AN            5        6        2
4  5  BGG-HAIRCOLOR                 X(71).    AN            7       77       71
5  5  BGG-EYECOLOR                  X(8).     AN           78       85        8 
```

我希望这能解决你的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T04:29:25.130

You are worried about how hard it is to line up the PIC clauses in the same column?

Open it in one of the many Eclipse variants and control-shift-F or whatever.

You know it compiles nicely regardless of columns, and has for almost 30 years, they really don't matter any more.

The low rent way would be to compile it and cut&paste your cross reference listing over your copybook.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T13:21:38.933

如果您在大型机上，请使用 FileAid 的选项 8。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-03-15T14:46:31.483

如果您使用的是大型机，您可以使用**“文件帮助 - 视图”**。从 ISPF 主选项菜单转到

`G ==> General Utility F ==> File-Aid Products 1 ==> File-AID 8 ==> VIEW`

在屏幕中将出现以下选项：

```
Specify Record Layout Dataset to View:                                 

   Dataset name  ===> 'XXXXXX.XXX.XXXX'                
   Member name   ===> COPYZXY   (Blank or pattern for member list) 
```

提供您的“数据集名称”和“成员名称”（数据集名称：您的 PDS 和成员名称：您的副本名称）

按下回车后，您将看到一个 VIEW LAYOUT 屏幕，其中描述了该副本中存在的每个变量的变量名称、子句、编号、开始、结束和长度。

# binary - 位与运算符

> ID：15557063
> 
> 赞同：0
> 
> 时间：2013-03-21T20:09:03.927
> 
> 标签：binary

有人可以用更简单的术语解释一下吗？

170 的二进制表示是`0000 0000 1010 1010`. 75 的二进制表示是`0000 0000 0100 1011`. 对这两个值执行按位与运算会产生二进制结果`0000 0000 0000 1010`，即十进制 10。

```
0000 0000 1010 1010
0000 0000 0100 1011
-------------------
0000 0000 0000 1010 
```

一旦我知道正在做什么，这将使我点击。我对二进制有一个基本的了解，并且知道一些我的头顶......就像二进制中表示的 1 将是`00000001`2 会是`00000010`3 会是`00000011`4 会是`00000100`5 会是`00000101`6 会是`00000110`。所以我明白当你每次上升一个数字时发生了什么。

我也理解这个 sql 开发人员在减去时发生了什么，但是当她使用 t-sql 代码来查找她的答案时，并没有遗漏什么......关于这个链接中所说的内容。

[http://sqlfool.com/2009/02/bitwise-operations/](http://sqlfool.com/2009/02/bitwise-operations/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T20:15:05.323

将示例中的各个二进制数字视为列。如果特定列的*两个输入行*中都有 1，则该列的输出为 1。否则为0。

AND 运算符可用于“屏蔽”值。因此，如果您只想要一个数字的前四个低位，您可以将其与 15 相加，如下所示：

```
0010 1101 1110 1100
0000 0000 0000 1111
-------------------
0000 0000 0000 1100  <-- the value of the first four bits in the top number 
```

这就是您链接的 SQL 示例中发生的情况。

```
freq_interval is one or more of the following:
1 = Sunday
2 = Monday
4 = Tuesday
8 = Wednesday
16 = Thursday
32 = Friday
64 = Saturday 
```

对应于位掩码：

```
0000 0001 = Sunday
0000 0010 = Monday
0000 0100 = Tuesday
0000 1000 = Wednesday
0001 0000 = Thursday
0010 0000 = Friday
0100 0000 = Saturday 
```

# javascript - 打开页面时Javascript jQuery隐藏字段

> ID：15557064
> 
> 赞同：0
> 
> 时间：2013-03-21T20:09:07.537
> 
> 标签：javascript, jquery, forms, input

我有以下代码：

```
<script>
    $('#advert').live('change', function () {
        if ($(this).is(':checked')) {
            $(":text").show();
        } else {
            $(":text").hide();
        }
    });
</script> 
```

此代码在选中复选框时显示和隐藏文本字段。它工作得很好，但我希望在页面打开时隐藏文本字段。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-21T20:12:13.100

隐藏文档准备好的文本字段。
文档就绪事件显示“加载完成后，执行此代码”。因此，在页面加载时，它会在您的文本字段上触发 .hide()。它非常强大！

```
$(document).ready( function () {
  $(":text").hide();
}); 
```

另一种方法是将样式设置为“display: none;” 在这些中的每一个上。然后他们开始隐藏

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-21T20:11:49.803

```
<script>
$(function() {
    $('#advert').live('change', function(){
    if($(this).is(':checked')){
    $(":text").show();
    } else {
    $(":text").hide();
    }
    }).trigger('change');
});
</script> 
```

这也将处理用户单击框、转到另一个页面、单击后退按钮并让浏览器自动检查框的情况。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-21T20:14:26.883

给你的文本字段一个可能是 .text 的类，然后像这样使用 css：

`.text{ display: none; }`

或像这样的jquery：

```
$(document).ready( function () {
  $(":text").hide();
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T20:11:13.420

交换

```
.show(); 
```

和

```
.hide(); 
```

# html - 具有伪元素的 div 宽度 100% :after :before 和绝对位置

> ID：15557066
> 
> 赞同：0
> 
> 时间：2013-03-21T20:09:25.240
> 
> 标签：html, css, width, absolute, pseudo-element

看看这个例子[——http://jsfiddle.net/5esgD/2/](http://jsfiddle.net/5esgD/2/)

我需要使用 :after 和 :before 伪元素来定位绝对位置，但背景有错误:(

如何修复不与红色背景重叠的蓝色背景？

```
<div class="button_box">
    <div class="blue_button"></div>
</div>
<br />
<div style="width: 200px; background: green;">i am 200px</div> 
```

和CSS

```
.button_box {
    width: 200px;
    height: 29px;
    position: relative;
}
.blue_button:after {
    background: none repeat scroll 0 0 red;
    border-radius: 0 12px 12px 0;
    content: "";
    display: block;
    height: 29px;
    position: absolute;
    right: 0;
    top: 0;
    width: 12px;
}
.blue_button:before {
    background: none repeat scroll 0 0 red;
    border-radius: 12px 0 0 12px;
    content: "";
    display: block;
    height: 29px;
    left: 0;
    position: absolute;
    top: 0;
    width: 12px;
}
.blue_button {
    background: none repeat scroll 0 0 blue;
    cursor: pointer;
    height: 29px;
    position: absolute;
    width: 100%;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T20:11:26.130

[http://jsfiddle.net/5esgD/3/](http://jsfiddle.net/5esgD/3/)

如果我正确理解您想要的内容，只需将边框半径添加到`.blue-button`

```
.blue_button {
    background: none repeat scroll 0 0 blue;

    border-radius: 12px 12px 12px 12px;
    cursor: pointer;
    height: 29px;
    position: absolute;
    width: 100%;
} 
```

# javascript - responseText 上的 eval 失败并出现 SyntaxError

> ID：15557070
> 
> 赞同：0
> 
> 时间：2013-03-21T20:09:31.337
> 
> 标签：javascript, xml, eval, domparser, responsetext

我试图找到一种从 responseText 创建 XML 文档的正确方法。我们将如何在这里使用“eval”。XML 上的 eval 抛出 SyntaxError。

```
eval("<p>This is test</p>"); --> Will fail

sometimes responseText = "<DATA><static-route><route>0.0.0.0/0</route<nexthop>10.204.247.254</nexthop></static-route></DATA>"
or 
responseText = "testing"

parseData(resonseText)

/*create XML Document from the data response */
function parseData (dataSources) {
   try {
        var values = dataSources;

        if (window.ActiveXObject)
            IE = true;
        else if(document.implementation && document.implementation.createDocument)
            IE = false;

              if (IE)
              {
                var xmlDoc = new ActiveXObject("Microsoft.XMLDOM");
                xmlDoc.async = "false";
                xmlDoc.loadXML(values);
                //Do more things
              }
              else
              {   
                  **//values = eval('('+values+')');**  //Throws SyntaxError
                  var rpcParser = new DOMParser();
                  rpcDocument=rpcParser.parseFromString(values,"text/xml");
                  //Do more things
               }
        }   
        catch (e) {
            //Reaches here if use eval function.
        } 
```

};

谢谢，维尼

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T20:11:57.837

Eval 将只接受有效的 JavaScript。`<p>This is test</p>`无效的 JS

# c# - 将文件附加到 MailMessage C# 时文件已损坏

> ID：15557075
> 
> 赞同：5
> 
> 时间：2013-03-21T20:09:36.947
> 
> 标签：c#, .net, attachment, smtpclient

我在工作中创建了一个应用程序，它从一些数据库数据生成 exel 文件。生成文件后，它们会自动发送给相关客户。我的问题是当我运行已发布的应用程序时它工作正常。但是有些用户在运行应用程序时会完美地生成文件，因为它们保存在 HDD 上，我可以看到它们。但是，当它们附加到 MailMessage 对象时，它们就会损坏。这是损坏文件的图像。这些文件应该是 Excel 文件。

![在此处输入图像描述](../Images/ec08a411d6d55dedcc07bdc9399f7a65.png)

这是我发送带有附件的邮件的代码：

```
public void SendMailedFilesDK()
        {
            string[] sentFiles = Directory.GetFiles(sentFilesDK);
            if (sentFiles.Count() > 0)
            {
                using (System.Net.Mail.SmtpClient client = new System.Net.Mail.SmtpClient("ares"))
                {
                    using (System.Net.Mail.MailMessage msg = new System.Net.Mail.MailMessage())
                    {
                        msg.From = new MailAddress("system@mail.dk");
                        msg.To.Add(new MailAddress("operation@mail.dk"));
                        msg.To.Add(new MailAddress("bl@mail.dk"));
                        msg.CC.Add("lmy@mail.dk");
                        msg.CC.Add("ltr@mail.dk");
                        msg.Subject = "IBM PUDO";
                        msg.Body = sentFiles.Count() + " attached file(s) has been sent to the customer(s) in question ";
                        msg.IsBodyHtml = true;
                        foreach (string file in sentFiles)
                        {
                            Attachment attachment = new Attachment(file);
                            msg.Attachments.Add(attachment);
                        }

                        client.Send(msg);
                    }
                }
            }
        } 
```

为什么其他人运行应用程序时文件会损坏？我们都在使用office 2010。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T20:23:29.023

您应该确保将附件的内容类型设置为适当的值。

`application/vnd.openxmlformats-officedocument.spreadsheetml.sheet`对于 xlsx 文件，或

`application/vnd.ms-excel`对于 xls 文件。

例如，您的循环应该看起来像这样。

```
ContentType xlsxContent = new ContentType("application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"
foreach (string file in sentFiles)
{
    Attachment attachment = new Attachment(file, xlsxContent);
    msg.Attachments.Add(attachment);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T20:29:56.863

我们在 Attachment 构造函数中使用它，并且在附加 Excel 和 PDF 时没有问题。

附件数据=新附件（sFileName，MediaTypeNames.Application.Octet）；

还要检查运行它的用户是否有权访问*sentFilesDK*指定的任何位置的文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T20:19:14.953

您可能想要指定作为 Attachment 类的构造函数之一的一部分的 mimetype。

*公共附件（字符串文件名，内容类型内容类型）；*

您还可以读取 memorystream 中的文件并将其作为以下构造函数的一部分传递。

*公共附件（流内容流，字符串名称，字符串媒体类型）；*

# android - 语音识别 API 示例更改

> ID：15557078
> 
> 赞同：0
> 
> 时间：2013-03-21T20:09:52.780
> 
> 标签：android, voice, voice-recognition

我正在使用 API 示例中已经提供的代码使用语音识别 API，我在同一个活动示例中想要的功能是：

A）即使我的手机没有使用，也就是屏幕锁定时，它也能正常工作。B）如果 googleAPI 没有找到这个词，它会显示一个对话框，说取消/再次说话，然后代码会自行选择再次说话，如何进行。

这是代码：

```
package com.wwwww.and;

import android.app.Activity;
import android.content.Intent;
import android.content.pm.PackageManager;
import android.content.pm.ResolveInfo;
import android.os.Bundle;
import android.speech.RecognizerIntent;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.ArrayAdapter;
import android.widget.Button;
import android.widget.ListView;

import java.util.ArrayList;
import java.util.List;

/**
 * Sample code that invokes the speech recognition intent API.
 */
public class VoiceRecognition extends Activity implements OnClickListener {

    private static final int VOICE_RECOGNITION_REQUEST_CODE = 1234;

    private ListView mList;

    /**
     * Called with the activity is first created.
     */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        // Inflate our UI from its XML layout description.
        setContentView(R.layout.voice_recognition);

        // Get display items for later interaction
        Button speakButton = (Button) findViewById(R.id.btn_speak);

        mList = (ListView) findViewById(R.id.list);

        // Check to see if a recognition activity is present
        PackageManager pm = getPackageManager();
        List<ResolveInfo> activities = pm.queryIntentActivities(
                new Intent(RecognizerIntent.ACTION_RECOGNIZE_SPEECH), 0);
        if (activities.size() != 0) {
            speakButton.setOnClickListener(this);
        } else {
            speakButton.setEnabled(false);
            speakButton.setText("Recognizer not present");
        }
        startVoiceRecognitionActivity();
    }

    /**
     * Handle the click on the start recognition button.
     */
    public void onClick(View v) {
        if (v.getId() == R.id.btn_speak) {
            //startVoiceRecognitionActivity();
        }
    }

    /**
     * Fire an intent to start the speech recognition activity.
     */
    private void startVoiceRecognitionActivity() {
        Intent intent = new Intent(RecognizerIntent.ACTION_RECOGNIZE_SPEECH);
        intent.putExtra(RecognizerIntent.EXTRA_LANGUAGE_MODEL,
                RecognizerIntent.LANGUAGE_MODEL_FREE_FORM);
        intent.putExtra(RecognizerIntent.EXTRA_PROMPT, " VoiceRecognition Service");
        startActivityForResult(intent, VOICE_RECOGNITION_REQUEST_CODE);
    }

    /**
     * Handle the results from the recognition activity.
     */
    @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        if (requestCode == VOICE_RECOGNITION_REQUEST_CODE && resultCode == RESULT_OK) {
            // Fill the list view with the strings the recognizer thought it could have heard
            ArrayList<String> matches = data.getStringArrayListExtra(
                    RecognizerIntent.EXTRA_RESULTS);
            mList.setAdapter(new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1,
                    matches));
        }

        super.onActivityResult(requestCode, resultCode, data);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T06:04:46.407

```
A) that it works even when my phone is not used that is when the screen is locked. 
```

您需要在服务中实现语音识别。

```
B) If the googleAPI doesn't find the word it shows a dialog saying cancel/speak again then code selects speak again by itself ,how to go about. 
```

将您的更改`onActivityResult`为下面的

```
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) 
{
    if (requestCode == VOICE_RECOGNITION_REQUEST_CODE) 
    {
      if (resultCode == RESULT_OK)
      {
        // Fill the list view with the strings the recognizer thought it could have heard
        ArrayList<String> matches;
        if (data != null)
        {
              matches = data.getStringArrayListExtra(
                RecognizerIntent.EXTRA_RESULTS);
        }

        if (data == null || matches.size() == 0)
        {
             startVoiceRecognitionActivity();
        }
        else
        {
             mList.setAdapter(new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1,
                matches));
        }
     }
     else
     {
         startVoiceRecognitionActivity();
     }
   }

    super.onActivityResult(requestCode, resultCode, data);
} 
```

# vb.net - 两个启动对象而不是一个

> ID：15557079
> 
> 赞同：1
> 
> 时间：2013-03-21T20:09:52.727
> 
> 标签：vb.net

我已经使用 .NET 创建了一个控制台应用程序。请看下面的屏幕截图：

![在此处输入图像描述](../Images/c9eef8c68fdc12fb759c9f7065dd4de3.png) 为什么有两个条目：“启动对象”。SubMain 是代码中类 c1 的一部分。我不明白为什么有两个条目而不是一个。

我花了一些时间在谷歌上搜索这个，我在这里遇到了一些类似的问题，但是我还没有找到我的问题的答案。代码是：

```
Class class1

    Public Shared Sub Main()
        MsgBox("Test")
    End Sub

End Class 
```

无论我从下拉列表中选择哪个选项，“测试”都会显示在屏幕上。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T20:14:24.437

选择 sub main 将扫描所有模块以查找`Public Sub Main`. 选择类`c1`将限制对 Sub Main 的搜索到该类。

# javascript - 动态分配数据角色属性

> ID：15557081
> 
> 赞同：0
> 
> 时间：2013-03-21T20:09:57.787
> 
> 标签：javascript, jquery-mobile

我想我可以在调用 jQuery Mobile 的 JavaScript 之前添加这个：

```
$('section').data('role','page');
$('article').data('role','content'); 
```

这样我就可以简单地在我的 HTML 中使用`<section>`and`<article>`标记，而不是指定`<div data-role="page">`and `<div data-role="content">`。

但我认为它不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T20:15:00.403

你可以这样做：

```
$('section').attr('data-role','page');
$('article').attr('data-role','content'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T20:45:18.347

为什么需要“数据-”属性？[http://api.jquery.com/data/](http://api.jquery.com/data/) 它们可能会导致内存泄漏以及其他问题。jQuery 已经有一个内置的“数据”，它正在工作。它不设置数据属性，它使用更好、更有效的方式来存储与 JavaScript 的 DOM 选择器关联的数据。

如果由于某种原因没有内置“数据”，则应该更新 jQuery。这是一个垫片，主要是为了让您了解它是如何工作的。它不是一个完整的填充程序，它只是一种使用数据键元素的选择器存储数据的非常简单的方法。删除元素时我不删除数据，所以我的实现可能会导致内存泄漏。不过，这只是一个例子。

```
if ($(window).data === undefined) {
    $.fn.data = (function () {
        var storage = {};
        return function data (name, val) {
            var id = $(this).selector;
            storage[id] = storage[id] || {};   
            if (val === void 0) {
                return storage[id][name];
            }
            storage[id][name] = val;
            return $(this);
        }
    }());
}

var foo = $('section').data('role','page');
var bar = $('article').data('role','content');
foo.text(foo.data('role'));
bar.text(bar.data('role')); 
```

[http://jsfiddle.net/dETuh/1/](http://jsfiddle.net/dETuh/1/)

请注意警报没有运行，所以我的垫片甚至没有被使用..

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T20:19:38.277

尝试这个：

**头：**

```
<script src="jquery.js"></script>
<script src="YOUR-SCRIPT.js"></script>
<script src="jquery-mobile.js"></script> 
```

**你的脚本 JS：**

```
$(document).bind("mobileinit", function(){
    $('section').data('role','page');
    $('article').data('role','content');
    /* OR */
    $('section').attr('data-role','page');
    $('article').attr('data-role','content');
}); 
```

参考：http: [//jquerymobile.com/demos/1.2.1/docs/api/globalconfig.html](http://jquerymobile.com/demos/1.2.1/docs/api/globalconfig.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-05-22T05:43:36.027

```
if ($(window).data === undefined) {
    $.fn.data = (function () {
        var storage = {};
        return function data (name, val) {
            var id = $(this).selector;
            storage[id] = storage[id] || {};   
            if (val === void 0) {
                return storage[id][name];
            }
            storage[id][name] = val;
            return $(this);
        }
    }());
}

var foo = $('section').data('role','page');
var bar = $('article').data('role','content');
foo.text(foo.data('role'));
bar.text(bar.data('role')); 
```

# sas - 填写日期范围的月份和年份？

> ID：15557084
> 
> 赞同：1
> 
> 时间：2013-03-21T20:10:14.937
> 
> 标签：sas, time-series

我是 SAS 新手，想知道如何最有效地列出开始日期和结束日期之间的月份和年份，以及开始日期和结束日期本身。我已经阅读了有关 INTCK 和 INTNX 函数、时间序列数据的 EXPAND 函数，甚至 CALENDAR FILL 的信息，但我不确定如何将它们用于此特定目的。由于具有下拉自动填充功能，此任务很容易在 Excel 中使用小型数据集手动完成，但由于数据集的大小，我需要在 SAS 中找到一种方法来执行此操作。任何建议将不胜感激。谢谢！

数据集在一个大文本文件中，现在组织如下：

```
ID          Start               End
1000        08/01/2012          12/31/2012
1001        07/01/2010          05/31/2011
1002        04/01/1990          10/31/1991 
```

但最终的输出应该是这样的：

```
ID      MonthYear
1000    08/12
1000    09/12
1000    10/12
1000    11/12
1000    12/12
1001    07/10
1001    08/10
1001    09/10
1001    10/10
1001    11/10
1001    12/10
1001    01/11
1001    02/11
1001    03/11
1001    04/11
1001    05/11
1002    04/90
1002    05/90
1002    06/90
1002    07/90
1002    08/90
1002    09/90
1002    10/90
1002    11/90
1002    12/90
1002    01/91
1002    02/91
1002    03/91
1002    04/91
1002    05/91
1002    06/91
1002    07/91
1002    08/91
1002    09/91
1002    10/91 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-21T21:44:18.203

```
data want2;
  set have;
  do i = 0 to intck('month',start,end);
      monthyear=intnx('month',start,i,'b');
      output;
      end;
   format monthyear monyy.;
   keep id monthyear;
   run; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T20:18:53.940

这会成功的。PROC EXPAND 可能更有效，尽管我认为它需要一些所需的观察而不是开始/结束组合（尽管你可以得到，我想）。

```
data have;
informat start end MMDDYY10.;
input ID          Start               End;
datalines;
1000        08/01/2012          12/31/2012
1001        07/01/2010          05/31/2011
1002        04/01/1990          10/31/1991
;;;;
run;

data want;
set have;
format monthyear MMYYS5.;    *formats the numeric monthyear variable with your desired format;
monthyear=start;             *start with the initial observation;
output;                      *output it;
do _t = 1 by 1 until (month(monthyear)=month(end)); *iterate until end;
  monthyear = intnx('month',monthyear,1,'b');       *go to the next start of month;
  output;                                           *output it;
end;
run; 
```

# python - 如何将按钮排成一排？

> ID：15557085
> 
> 赞同：1
> 
> 时间：2013-03-21T20:10:17.523
> 
> 标签：python, user-interface, tkinter

我已经定义了单独的功能，并且有一个`main()`功能。在`main()`函数中，我有几个按钮，单击它们会调用其他函数。例如。

```
def main():
    global root
    global tkinter
    global canvas
    root = Tk()
    root.title("Shapes Quiz - Flow Computing")
    Button(root, text ="1", bg="Grey", width=10, command=pentagon).pack()
    Button(root, text ="2", bg="Grey", width=10, command=circle).pack()
    Button(root, text ="3", bg="Grey", width=10, command=diamond).pack()
    Button(root, text ="4", bg="Grey", width=10, command=hexagon).pack()
    Button(root, text ="5", bg="Grey", width=10, command=triangle).pack()
    Button(root, text ="6", bg="Grey", width=10, command=square).pack()
    Button(root, text ="7", bg="Grey", width=10, command=rectangle).pack()
    Button(root, text ="8", bg="Grey", width=10, command=heptagon).pack()
    Button(root, text ="9", bg="Grey", width=10, command=octagon).pack()
    Button(root, text ="10", bg="Grey", width=10, command=oval).pack()
    Button(root, text ="Help", bg="Grey", width=10, command=help).pack()
    Button(root, text ="Clear", bg="Red", width=10, command=clearshapes).pack()
    Button(root, text ="QUIT", bg="Red", width=10, command=quit).pack() 
```

我确信必须有一种更简单的方法来组织这些按钮。我听说过使用框架和网格，甚至坐标；但我仍然不确定如何做到这一点。

我想组织按钮，使它们是*水平*的，而不是当前出现的*垂直。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T20:21:49.600

当然，使用网格几何管理器有一种更简单的方法（链接已经在评论中）：

```
# ...
root.title("Shapes Quiz - Flow Computing")
BUTTONS = [{"text":"1", "bg":"Grey", "width":10, "command":pentagon},
           {"text":"2", "bg":"Grey", "width":10, "command":circle},
           # Rest of the buttons
           {"text":"QUIT", "bg":"Red", "width":10, "command":quit}]
for i, options in enumerate(BUTTONS):
    Button(root, **options).grid(row=0, column=i) 
```

请注意，您总是使用几乎相同的代码，因此如果您使用 for 循环并提前声明小部件的选项，它可能看起来更简洁。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T20:23:12.960

更改`pack()`为[`pack(side='left')`](http://effbot.org/tkinterbook/pack.htm#Tkinter.Pack.pack-method)。

# php - 如何内爆并将此项目更新到数据库

> ID：15557087
> 
> 赞同：0
> 
> 时间：2013-03-21T20:10:27.570
> 
> 标签：php, sql, implode

我有这样的表项：

```
id_item       color           stock
1         red,green,yellow   10,20,30 
```

这里有一个餐桌推车：

```
id id_trans     id_item    color    qty
1     123          1           red      5   
2     123          1           green    2 
```

我想要实现的是更新表项变成这样：

```
id_item       color           stock
1         red,green,yellow   5,18,30 
```

我要做的是：

```
$query = mysql_query("select a.color as color, a.stock as stock, b.id_item as id_item,b.color as colors,b.qty as qty from item as a, cart as b where a.id_item = b.id_item and b.id_trans = '123' ");
while($result = mysql_fetch_array($query)){

$colors = $result['colors'];
$color = explode(",",$result['color']);
$stock = explode(",",$result['stock']);
$flag = array_search($colors,$color);
$stock[$flag] = $stock[$flag] - $result['qty'];
$stock = implode(',',$stock);

mysql_query("update item set stock = '$stock' where id_item = '$result[id_item]'"); 
```

}

从我上面写的代码，我有一些问题。我的问题是，结果是这样的：5,20,30 & 10,18,30。所以，当我更新到表格项目时，它只是像这样改变：

```
id_item       color           stock
1         red,green,yellow   10,18,30 
```

我想要实现的是将股票内爆为 5、18、30。谁能告诉我如何实现这一目标，或者谁能告诉我我的代码有问题？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T20:22:18.880

现在它比您之前的尝试更清晰；）试试这个，看看它是否有效：

```
unset($color);unset($stock);
$query = mysql_query("select a.color as color, a.stock as stock, b.id_item as id_item,b.color as colors,b.qty as qty from item as a, cart as b where a.id_item = b.id_item and b.id_trans = '123' ");
while($result = mysql_fetch_array($query)){

    $colors = $result['colors'];
    $id = $result[id_item];
    if(!isset($color))
    {
        $color = explode(",",$result['color']);
    }
    if(!isset($stock))
    {
    $stock = explode(",",$result['stock']);
    }

    $flag = array_search($colors,$color);
    $stock[$flag] = $stock[$flag] - $result['qty'];
}

$stock = implode(',',$stock);
mysql_query("update item set stock = '".$stock."' where id_item = ".$id); 
```

不过老实说，您使用数据库的方式很糟糕。这不是应该使用数据库的方式。

# java - 匿名内部类：声明为实例变量与动态创建

> ID：15557088
> 
> 赞同：0
> 
> 时间：2013-03-21T20:10:43.047
> 
> 标签：java, anonymous-class, anonymous-inner-class

我正在重构一个具有面向公众的接口的类，并且考虑到用法让我问：

在一些较大的类（作为实例变量）中声明以下内容有什么区别：

```
private final OnClickListener mButtonOnClickListener = new OnClickListener() {
    @Override
    public void onClick(View view) {            
        //some codes
    }
}; 
```

vs 声明为匿名内部类如下（即时）：

```
private void someFunctionInClass() {
    someOtherFunctionThatTakesAnOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View view) {            
            //some codes
        }
    });
} 
```

更具体地说，前者是否仍被视为匿名内部类？[我在这个答案](https://stackoverflow.com/a/12058422/822005)中读到一个匿名内部类

> 是在另一个类的方法体内创建和定义的

我给出的第一个示例是在另一个类的主体中创建和定义的，但不像第二个那样在另一个类的方法中创建和定义。它仍然是一个匿名内部类吗？此外，一个人与另一个人的公认做法是什么？将匿名内部类声明为实例变量（我认为仍然如此）是否更有效，因为不需要重新创建新对象？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T20:19:21.507

这两个都是匿名类。除了范围没有太大区别。但下面是一个链接，可用于决定从本地类中使用哪个：匿名类：嵌套类：Lambda 表达式： [http ://docs.oracle.com/javase/tutorial/java/javaOO/whentouse.html](http://docs.oracle.com/javase/tutorial/java/javaOO/whentouse.html)

我希望它有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T20:14:27.673

这些都是匿名类。在第一个中，您可以重用它，但两者都只是创建的对象。匿名类必然是内部类，并且可以访问封闭类的任何字段。

[我认为您可能会将匿名类与内部类和静态嵌套类](http://docs.oracle.com/javase/tutorial/java/javaOO/nested.html)混淆，它们有明显的区别。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T20:15:48.310

在您的示例中，在这两种情况下，您都创建了匿名内部类。它“new OnClickListener() {”我认为它没有开销，因为它在编译时得到解决。人们一直在使用它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T20:13:57.387

两者都是匿名类。以侦听器为例，如果您打算为两个组件使用相同的侦听器，则可以为其创建一个实例变量，否则您可以直接将其附加到组件上。所以这取决于需求。

但主要是一种一次性使用，也就是说，您避免为此创建实例。如果您打算重用它，最好为此创建一个单独的类。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-21T20:14:19.567

两者都是匿名类。匿名类是一个构造函数 ( `new ClassName()`) 后跟一个类主体 ( `{...}`)。

# php - Symfony 如何检查 checkox 没有表格检查

> ID：15557089
> 
> 赞同：1
> 
> 时间：2013-03-21T20:10:44.820
> 
> 标签：php, post, symfony

可以使用 POST 发送数据而无需表单。我的视图中有这样的元素列表

```
<li><p>{{contents.1}}</p>
    <a href="{{ path('set_visit', {'start': contents.0  }) }}">Zapisz wizyte</a>
    <input type="checkbox" name="vehicle" value="Car">
    I have a car 
</li> 
```

单击标签后，我转到控制器。我可以在我的控制器中检查复选框是否被选中？我使用 Symfony2

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T21:56:27.430

关键是只有检查过的值会发送到您的控制器，而其他值则不会。您需要在控制器方法中构建所有可能选项的列表，然后减去提交的选项以获得所有未选中选项的列表，**或者**使用提交的列表来确定它是否被选中...

我没看错你的问题吗？

# deployment - 在同一 weblogic 服务器域的不同集群中部署不同的 ear 文件

> ID：15557090
> 
> 赞同：0
> 
> 时间：2013-03-21T20:10:45.893
> 
> 标签：deployment, ear, weblogic12c

嗨，我是这个论坛和 weblogic 服务器的新手。我的要求是我有一个在集群上运行的应用程序，该集群有一个管理服务器和三个托管服务器 MS1、MS2、MS3。目前我的应用程序有两个部分（或逻辑） ，两者都在一个耳朵文件中。part1总是占用一个服务器，比如MS1，其余两个MS2和MS3。我想将我的代码分成两个不同的ear part1和part2，par1_ear部署在MS1中，part2_ear部署在 MS2 和 MS3 中都在同一个管理服务器下运行

ear1 部署在 ----->MS1

ear2 部署在 ----->MS2 &MS3 都在同一个托管服务器下运行。

如果不欢迎其他建议，是否可以这样做，但我只能有一个管理服务器和 3 个集群

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T22:37:43.503

是的，当您部署 .ear 文件时，您可以针对集群中的特定机器。您的部署不必转到集群中的所有机器。

此外，如果您真的只希望集群中的一台服务器来处理某些特定事件，您可能需要查看 Singleton Services。

您以前有在 Weblogic 中部署应用程序的经验吗？

# iphone - 横幅视图如何工作？

> ID：15557099
> 
> 赞同：-1
> 
> 时间：2013-03-21T20:11:01.533
> 
> 标签：iphone, ios

大家好，我刚开始开发 ios 应用程序，遇到了 iAd、admob 和此类网络。我想知道他们如何在核心应用程序上方打开横幅（我认为这是一个视图）。如果你能指出我正确的方向，那将有很大帮助

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T20:21:20.633

你是对的，它是一个视图子类。它可以在您的 xib 文件中声明或以编程方式创建。苹果甚至有专门针对 iAd 的看法。您可以根据是否有广告来“显示”或“隐藏”视图。您还可以制作各种动画以将其滑入。有几个很好的教程解释了如何实现它。Ray Wenderlich 总是一个很好的来源......

[http://www.raywenderlich.com/1371/how-to-integrate-iad-into-your-iphone-app](http://www.raywenderlich.com/1371/how-to-integrate-iad-into-your-iphone-app)

如果未填充，您甚至可以创建一个显示 AdMob 广告的视图来代替 iAd 视图。

# java - 有效地将有序数据添加到 TreeMap？

> ID：15557103
> 
> 赞同：0
> 
> 时间：2013-03-21T20:11:09.333
> 
> 标签：java, sorting, treemap

我有一个关于 Java 的基本树/算法问题：

假设我正在构建一个新的 TreeMap：

```
TreeMap<KeyType,ValType> myTreeMap = new TreeMap<>(); 
```

而且我还有一个现有的数据数组，这些数据已经按比较顺序排列：

```
KeyType myArray[] = new KeyType[]{.......}; 
```

有没有办法在 O(n) 时间内用这些数据填充 TreeMap？即，这是最有效的方法：

```
for (int i = 0; i < myArray.length; i++){
    myTreeMap.put(myArray[i],"blah");
} 
```

或者有没有办法利用数据已经存在的事实来避免可能的 O(lg n) 插入/树平衡？

# android - 你能直接与亚行联系吗？

> ID：15557106
> 
> 赞同：0
> 
> 时间：2013-03-21T20:11:17.757
> 
> 标签：android, adb, windows-7-x64, interfacing

我没有找到适用于我的 HTC Desire 手机（不是 X、S 或其他什么，而是第一款 HTC Desire）的驱动程序，而且我无法让它与我的笔记本电脑一起用于 Android 应用程序测试。

我想知道是否有可能以某种方式直接与 ADB 交互并让它意识到我的手机在那里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T20:14:33.337

通常最简单的方法是将手机连接到 PC，不是为了充电或开发，而是作为媒体存储。Windows 将尝试自行安装驱动程序。之后，您也可以连接您的设备进行开发。这 - 至少 - 对我有用。

还可以更改默认驱动程序之一。但我更喜欢第一个。第二个作品如下所述：[http ://www.waxinlyrical.com/node/10](http://www.waxinlyrical.com/node/10)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T20:33:54.397

我有一个类似的问题。由于某种原因，Windows 无法识别 Google 驱动程序，您必须手动安装它。

1.  打开设备管理器并找到您的设备，它应该在其他设备下，并且上面有一个黄色感叹号。
2.  右键单击并选择“属性”打开驱动程序选项卡并选择“更新驱动程序”。
3.  选择“浏览我的计算机以查找驱动程序软件”，然后选择“让我从计算机上的设备驱动程序列表中选择”。
4.  选择“从磁盘安装”现在浏览到您从 Google 下载的文件。我在工作，所以我不能告诉你它的确切位置，但它应该类似于 C:\Program Files (x86)\Android\sdk\extras\google\usb_driver

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T20:17:27.417

您可以为您的手机 (adb) 安装 Google USB 驱动程序。通过下载[http://developer.android.com/sdk/index.html](http://developer.android.com/sdk/index.html) (android sdk, ..) 您可以下载 USB 驱动程序和 adb。（sdk/platform-tools中的adb，下载后sdk\extras\google\usb_driver中的驱动）

在设备管理器中，尝试更新驱动程序，并设置在此文件夹中查找。或者尝试查找驱动程序@windows update。

测试： adb wait-for-device 命令阻塞，直到您的设备出现。

在您的手机上检查是否启用了 USB 调试。

# java - “推迟”任务（或“等待空闲”）真的那么难吗？

> ID：15557109
> 
> 赞同：3
> 
> 时间：2013-03-21T20:11:25.803
> 
> 标签：java, timer, scheduled-tasks

如何使用以下属性完成“等待空闲”模型：

*   当一个方法`do()`被调用时，经过X延迟，一个`close()`方法会被调用。
*   如果我在X 时间过去**之前**`do()`再次调用该方法，则必须推迟调用 to。**`close()`**

 ****例子**

场景 1：（超时 = 10 秒）：

1.  `do()`用户按时打电话`0`。
2.  在 time `10`，该`close()`方法被调用是因为用户没有`do()`再次调用。

场景 2：（也超时 = 10 秒）：

1.  `do()`用户按时打电话`0`。（所以应该调用`10`该方法）。`close()`
2.  时`8`，用户再次呼叫`do()`。
3.  在`10`什么都没有发生的时候，因为`close()`被推迟了 10 秒。
4.  在 时间`18`，该`close()`方法被调用，因为用户`do()`自 以来没有再次调用`8`。

**我试过的：**

```
private static final long delay = 10000;
private Timer t;
private TimerTask tt;

public void do() {

    ...

    // check old timer first:
    if (t != null) t.cancel();

    // create new timer
    t = new Timer();
    tt = new TimerTask() {
        @Override
        public void run() {
            close();
        }
    }
    // run it
    t.schedule(tt, System.currentTimeMillis() + delay);
}
private void close() {
    // do some cleanup here
} 
```

这段代码非常难看。它也非常低效且消耗内存，因为该 `do()`函数每秒被调用大约 50 次。

我应该怎么做才能以一种高效而整洁的方式工作？（真的有那么难吗？）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T20:19:12.287

你走在正确的道路上，这并不难。

这就是我想给你的建议。只创建一次计时器。使其成为班级成员。在构造函数中创建它的实例。

当方法被调用时，就像你现在已经做的那样创建一个任务。但是，您可以创建单独的类，甚至可以提前创建它的实例，并且在`do()`调用方法时只需安排它，因此`close()`将根据您的时间表调用。

何时`do()`调用取消先前创建的关闭任务。这将确保在`do()`再次调用方法时不会关闭任何内容。

顺便说一句，因为`do`它是 java 中的保留字，所以您不能以这种方式调用方法。这意味着您的代码甚至无法编译。更改名称。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T20:26:59.293

设置一个 10 秒的定时器任务，当你`open()`

保留一个变量，该变量`long lastCall`设置为`System.currentTimeMillis()`from`doIt()`

在时间任务体中，检查是否`lastCall`在 10 秒内。如果是这样，重新安排定时器任务的剩余时间。如果没有，请致电`close()`

`synchronize`当你阅读或写作时，不要忘记在某事上`lastCall`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T21:08:54.107

我找到了一个合适的解决方案：

```
public class TimerExample {

    private TimerTask tt;
    ScheduledFuture<?> future;
    private ScheduledThreadPoolExecutor s;

    public TimerExample() {
        s = new ScheduledThreadPoolExecutor(1);
        tt = new TimerTask() {

            @Override
            public void run() {
                close();
            }
        };
        doSomething();
    }

    public void doSomething() {
        if (future != null) future.cancel(true);
        future = s.schedule(tt, 3000, TimeUnit.MILLISECONDS);
        System.out.println("do");
    }

    public void close() {
        System.out.println("Close");
    }

} 
```**

# java - 需要澄清最终的 StringBuffer 对象

> ID：15557113
> 
> 赞同：4
> 
> 时间：2013-03-21T20:11:47.177
> 
> 标签：java, final, stringbuffer

一般来说，如果一个变量被声明为 final，我们不能覆盖该变量的值，但是当我们使用字符串缓冲区时，这并不适用。有人可以告诉我为什么吗？

下面的代码有效！！！！！！

```
 public static void main(String args[]) {
        final StringBuffer a=new StringBuffer("Hello");
        a.append("Welcome");
        System.out.println(a);
    } 
```

输出：

你好，欢迎

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-21T20:16:24.653

来自[Java 语言规范](http://docs.oracle.com/javase/specs/jls/se7/html/jls-4.html#jls-4.12.4)（强调我的）：

> 一旦分配了最终变量，它总是包含相同的值。***如果最终变量持有对对象的引用，则对象的状态可能会通过对对象的操作而改变，但变量将始终引用同一个对象。***

所以可以操作指向的对象的状态`a`

```
a.append("Welcome"); //is OK 
```

但不能`a`用另一个对象重新分配

```
final StringBuffer a = new StringBuffer("Hello");
a = new StringBuffer("World"); //this wont compile 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-21T20:13:01.137

您不能对最终变量执行的操作是将其更改为引用另一个对象（或原始值）或 null。

在那里，您总是引用同一个对象，并且与字符串相反，字符串缓冲区不是不可变的。

您必须得到的是变量的值是对字符串缓冲区的引用，而不是该对象的实际内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T20:25:15.977

您应该阅读[Mutable 和 Immutable objects](http://www.javaranch.com/journal/2003/04/immutable.htm)。

不可变类示例：String、Integer、Long 可变类示例：StringBuffer、Date

在可变对象中，您可以在其构造后更改状态，例如

```
final StringBuffer a=new StringBuffer("Hello");
a.append("Welcome"); 
```

在 immutable 中，您不能在对象构造后更改其状态。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T01:15:25.490

> 如果一个变量被声明为final，我们不能覆盖该变量的值

正确的。一旦分配了最终变量，就不能重新分配它。编译器不允许这样做。

> 但是当我们使用字符串缓冲区时，这并不适用。

是的，它确实。

> 下面的代码有效！！！！！！

该代码没有出现您描述的问题。它表明引用为 final 的对象仍然可以变异。那是完全不同的事情。

# xml-rpc - OpenERP - 如何通过 XMLRPC 创建新的销售订单时获取序列号

> ID：15557114
> 
> 赞同：0
> 
> 时间：2013-03-21T20:11:48.130
> 
> 标签：xml-rpc, openerp, sequences

我正在为 OpenERP 制作一个 Android 应用程序，并且正在尝试创建新的销售订单。然而，必填字段之一是订单参考，它通常是从序列中生成的。

有没有办法通过 xmlrpc 获得这个序列？

还是我必须在应用程序中制作自己的序列？...但是我如何确保它不会与通过 Web 客户端生成的订单引用发生冲突？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T08:36:15.843

您不需要做任何特别的事情：只需使用您的销售订单的内容调用`sale.order`'方法。`create`正如您在使用 Web 界面创建销售订单时注意到的那样，参考字段会自动填写正确的序列号。

发生这种情况是因为引用字段（技术上是'字段）`sale.order`有一个默认值。默认值的工作方式如下：`sale.order``name`

*   它们由客户端 UI 获取以预填充创建表单。客户端通过调用[`default_get`](http://doc.openerp.com/trunk/developers/server/api_models/#openerp.osv.orm.BaseModel.default_get)相应的模型（将从`_defaults`字典中获取值）来获取这些值。
*   当调用[create](http://doc.openerp.com/trunk/developers/server/api_models/#openerp.osv.orm.BaseModel.create)方法创建新记录时，系统将再次调用[default_get](http://doc.openerp.com/trunk/developers/server/api_models/#openerp.osv.orm.BaseModel.default_get)以完成所有具有默认值且未显式传递给[create的字段的值](http://doc.openerp.com/trunk/developers/server/api_models/#openerp.osv.orm.BaseModel.create)

因此，您无需执行任何操作：只需调用`create`而不为`name`字段提供值，系统将自动将其值设置为有效的序列号，就像在 UI 中一样。或者，如果您想预处理默认值或精确模仿 UI 所做的事情，那么您应该`default_get`通过 XML-RPC 调用自己并使用返回的值来准备您将传递给的参数`create`。

**版本说明：**您没有提及任何特定的 OpenERP 版本，实际行为可能会因版本而有所不同。在 OpenERP 6.1 中，该`sale.order`模型完全按照我上面描述的方式进行，您可以在[源代码](http://bazaar.launchpad.net/~openerp/openobject-addons/6.1/view/7189/sale/sale.py#L273)中看到。然而，在 OpenERP 7.0 中，逻辑被稍微修改以避免消耗可能永远不会使用的序列号（如果用户在保存之前取消）：而不是在 中生成新数字`default_get`，该字段[默认](http://bazaar.launchpad.net/~openerp/openobject-addons/7.0/view/8912/sale/sale.py#L254)`name`初始化为`'/'`，并且该方法将其替换为一个新号码，正如您在[源代码](http://bazaar.launchpad.net/~openerp/openobject-addons/7.0/view/8912/sale/sale.py#L338)中看到的那样。净效果是一样的。`create`

# service - karaf osgi getServiceReference 返回 null

> ID：15557129
> 
> 赞同：1
> 
> 时间：2013-03-21T20:12:34.837
> 
> 标签：service, osgi, bundle, apache-karaf, osgi-bundle

有没有人有任何似乎没有理由`getServiceReference`返回的经验？`null`

以下包注册服务，然后继续确认它已注册（无论这是否是来自同一包的有效测试，idk）。

```
package db.connector;
...
public class Activator implements BundleActivator {
    private static ServiceRegistration registration;
    ...
    public void start(BundleContext _context) throws Exception {
        DatabaseConnector dbc = new DatabaseConnectorImpl();
        registration = context.registerService(
                DatabaseConnector.class.getName(),
                dbc, null);

        checkServiceRegistered();
    }
    ...
    public void checkServiceRegistered() {
        System.out.println("Printing all entries:");
        ServiceReference sr = context.getServiceReference(DatabaseConnector.class.getName());
        DatabaseConnector dbc = (DatabaseConnector) context.getService(sr);
        List<Protocol> result = dbc.getAllProtocols();
        for(int i=0; i<result.size(); i++) {
            Protocol p = result.get(i);
            System.out.println("\t" + p.getId()+": "+p.getName()+"("+p.getOwner()+")");
        }
    }
} 
```

输出运行成功，一切正常。检查 karaf webconsole，该服务似乎已正确注册：

```
267 [db.connector.DatabaseConnector]    database-connector (144) 
```

获取注册服务的代码如下：

```
import db.connector.DatabaseConnector;
    ...
    public List<Protocol> printAllEntries() {
        ServiceReference sr = Activator.getContext().getServiceReference(DatabaseConnector.class.getName());
        DatabaseConnector dbc = (DatabaseConnector) Activator.getContext().getService(sr);
        return dbc.getAllProtocols();
    }
    ... 
```

DatabaseConnector 包导出正确的包，使用该服务的包导入相同的包。

这里可能出了什么问题？我完全不知所措。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T22:50:59.500

看起来不错。

想到什么：订购好吗？您确定在检查参考之前完成了注册吗？您签入 printAllEntries 的方式是检查该服务是否在那一刻存在。由于 OSGi 包可以来来去去，因此这不是一种可靠的检查方式。您应该使用 ServiceTracker，或者更好的是像声明式服务或蓝图这样的东西。

您可以将 ServiceListener 添加到 BundleContext，然后您可以按顺序打印出正在发生的事情。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T21:57:50.950

原来，只是我没有刷新 OSGi 包。我的 servlet 指向一个现已过时的捆绑包 ID，因此服务查找当然失败了。

# performance - 在我的 App Engine 应用中查找最昂贵的查询的最简单方法是什么？

> ID：15557130
> 
> 赞同：0
> 
> 时间：2013-03-21T20:12:38.790
> 
> 标签：performance, google-app-engine

我不熟悉除 Google Analytics 之外的任何分析软件。我真的不想进入 BigQuery 或为此编写太多代码。

我正在寻找一个电子表格，显示过去 7 天内每个 URL 花费了我多少。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T21:33:01.443

应用统计！

[https://developers.google.com/appengine/docs/python/tools/appstats](https://developers.google.com/appengine/docs/python/tools/appstats)

> 为了让您的应用程序保持快速，您需要知道：
> 
> 您的应用程序是否在进行不必要的 RPC 调用？是否应该缓存数据而不是重复 RPC 调用来获取相同的数据？如果多个请求并行执行而不是串行执行，您的应用程序性能会更好吗？Appstats 库允许您分析 RPC 调用，从而帮助您回答这些问题并验证您的应用程序是否以最有效的方式使用 RPC 调用。Appstats 允许您跟踪给定请求的所有 RPC 调用，并 **报告每个调用的时间和成本。**

# c++ - char 数组的奇数输出

> ID：15557138
> 
> 赞同：1
> 
> 时间：2013-03-21T20:13:15.630
> 
> 标签：c++, arrays, char

可以这么说，我目前正在编写一个命令行“解析器”，到目前为止它一直在工作，直到我尝试了几种添加选项/参数的方法。

```
void parser::nextCom() {

    cout << parser::prompt; // parser::prompt = "> "
    string com;
    getline(cin, com);

    char the_command[5]; //  i want this to store the command e.g. "go" given that go is a command
    for (int i = 0; i < com.size(); i++) {
        if (com[i] == ' ') break;
        else the_command[i] = com[i];
    }

    cout << the_command << endl;
} 
```

`the_command`该命令已复制，但在打印到控制台时会显示一些非常不需要的字符。

如果我将“向北”作为命令传递，这就是我得到的：

`goÌÌÌÌÌÌÌÌÌÌÌÌÌÌØNi`

我不太确定 C++ 中的 char 数组，但我不知道我是如何得到这个输出的。任何帮助都将不胜感激。有关代码的任何问题，或者如果您需要更多我的代码，请发表评论，在此先感谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T20:19:33.377

```
cout << the_command << endl; 
```

当您打印这样的`char`数组时，会继续插入字符，直到`\0`在字符串中找到空字符。

在开始将字符从 复制`com`到之前`the_command`，该数组完全未初始化。我将用问号表示这些未知字符（当然，它们实际上可能不是问号）：

```
? ? ? ? ? 
```

这意味着您不知道`char`数组中 s 的值是什么。然后，您只复制字符`g`和`o`from `the_command`into `com`，因此您的数组现在包含：

```
g o ? ? ? 
```

因此，当您尝试输出此数组时，输出流不知道何时停止。您需要确保`\0`在`o`. 一种方法是：

```
for (int i = 0; i < com.size(); i++) {
    if (com[i] == ' ') {
      the_command[i] = '\0';
      break;
    }
    else the_command[i] = com[i];
} 
```

这将使数组像这样：

```
g o \0 ? ? 
```

但是，您最好坚持使用`std::string`. 我不想去想你在使用这个数组时会遇到的问题，而这些问题是可以避免的。这是我编写函数的方式：

```
void parser::nextCom() {
    std::cout << parser::prompt;

    std::string command_line, command;
    std::getline(cin, command_line);

    std::stringstream command_line_stream(command_line);
    command_line_stream >> command;

    if (command == "go") {
      std::string direction;
      command_line_stream >> direction;
      go(direction);
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-21T20:18:09.523

`the_command`读取最后一个字符后，您不会以空值终止。或进行*任何*边界检查。

请`std::string`改用。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-21T20:18:25.787

将代码更改为：

```
if (com[i] == ' ')
{
   com[i] = '\0';
   break;
} 
```

这将确保您的 char 数组末尾有一个空终止符。您看到垃圾的原因是因为`std::cout`会愉快地打印字符，直到它看到一个空终止符。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-21T20:15:21.097

这是因为您的代码中有缓冲区溢出。您将不确定长度的字符串复制到 char[5] 缓冲区中...基本上，您的循环将输入字符串确定的字节数复制到 char[5] 数组的末尾，该数组不再以 null 结尾，所以“cout”只是读取，直到找到空字节。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-21T20:18:59.447

基本上`the_command[5]`包含垃圾，因为未初始化且不包含字符终止符。你可以先清除它，你会没事的

```
for (i = 0; i < 5; i++)  {
    the_command[i] = 0; 
} 
```

# css - 控制 CSS3 分栏符

> ID：15557139
> 
> 赞同：4
> 
> 时间：2013-03-21T20:13:22.623
> 
> 标签：css, less, multiple-columns

我正在尝试使用 CSS3 控制分栏符并遇到一些布局问题。

我使用较少的预处理器来编译 CSS。

我的 less 代码创建了一个名为“details”的类，该类应用于 div。

```
.details {
    .column-count;
    .column-gap(50px);
    .column-rule(1px dotted @bodybackground);
    h3 {
        -webkit-column-span: all;
        -moz-column-span: all;
        column-span: all;
        padding-bottom: 25px;
    }
    h4 {
        &.breakbefore {
            -webkit-break-before: always;
            -moz-break-before: always;
            break-before: always;
        }
        &.breakafter {
            -webkit-break-after: always;
            -moz-break-after: always;
            break-after: always;
        }
    }
    ol li, ul li, table {
    -webkit-column-break-inside: avoid;
    -moz-column-break-inside: avoid;
    column-break-inside: avoid;
    }
} 
```

但是，分栏符似乎不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T20:28:03.820

如[caniuse.com 所述](http://caniuse.com/#feat=multicolumn)：

> 部分支持是指不支持break-before、break-after、break-inside属性。Webkit 浏览器对非标准的 -webkit-column-break-* 属性有同等的支持。

IE10 和 Opera 12（只是希望他们在切换到新的渲染引擎时将代码提供给 WebKit……）可能有更好的支持（我没有测试它）。

金融时报实验室发布了**[columnflow](http://labs.ft.com/articles/ft-columnflow/)**，一个非常高级的脚本（可能对你来说太高级了？）：

*   可配置的列宽、间距和边距
*   固定位置元素
*   跨列的元素
*   Keep-with-next 类以避免列底部的标题
*   无包装类以避免跨列破坏标记的元素
*   将列分组到页面中
*   将文本基线与网格对齐的标准化行高
*   快速重排字体大小更改

或者也许**[columnizer](http://welcome.totheinter.net/columnizer-jquery-plugin/)**可以帮助你

# python - scipy.stats.kde 和 scipy.stats.kstest

> ID：15557142
> 
> 赞同：-1
> 
> 时间：2013-03-21T20:13:47.417
> 
> 标签：python, statistics, scipy, probability-theory

如何以保形方式使用`scipy.stats.kde.gaussian_kde`和？`scipy.stats.kstest`

例如，代码：

```
from numpy import inf
import scipy.stat
my_pdf = scipy.stats.kde.gaussian_kde(sample)
scipy.stats.kstest(sample, lambda x: my_pdf.integrate_box_1d(-inf, x)) 
```

给出以下答案： `(0.5396735893479544, 0.0)`

这是不正确的，因为样本显然属于在该样本上构建的分布。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T21:07:35.470

首先，用于测试两个样本是否来自同一分布的正确测试是在 中实现的[双样本 KS 测试](http://en.wikipedia.org/wiki/Kolmogorov%E2%80%93Smirnov_test#Two-sample_Kolmogorov.E2.80.93Smirnov_test)[`scipy.stats.ks_2samp`](http://docs.scipy.org/doc/scipy/reference/generated/scipy.stats.ks_2samp.html#scipy.stats.ks_2samp)，它直接比较经验 CDF。KDE 是*密度*估计，它可以平滑 CDF，因此是一堆不必要的工作，从统计上讲，这也会使你的估计变得更糟。

但是您看到此问题的原因是您的 CDF 参数的签名不太正确。`kstest`调用`cdf(vals)` [(source)](https://github.com/scipy/scipy/blob/master/scipy/stats/stats.py#L3414)，其中`vals`是排序的样本，以获取每个样本的 CDF 值。在您的代码中，这最终调用`my_pdf.integrate_box_1d(-np.inf, samps)`，但`integrate_box_1d`希望两个参数都是标量。签名是错误的，如果你用大多数数组尝试这个，它会崩溃`ValueError`：

```
>>> my_pdf.integrate_box_1d(-np.inf, samp[:10])
---------------------------------------------------------------------------
ValueError                                Traceback (most recent call last)
<ipython-input-38-81d0253a33bf> in <module>()
----> 1 my_pdf.integrate_box_1d(-np.inf, samp[:10])

/Library/Python/2.7/site-packages/scipy-0.12.0.dev_ddd617d_20120725-py2.7-macosx-10.8-x86_64.egg/scipy/stats/kde.pyc in integrate_box_1d(self, low, high)
    311 
    312         normalized_low = ravel((low - self.dataset) / stdev)
--> 313         normalized_high = ravel((high - self.dataset) / stdev)
    314 
    315         value = np.mean(special.ndtr(normalized_high) - \

ValueError: operands could not be broadcast together with shapes (10) (1,1000) 
```

但不幸的是，当第二个参数是 时`samp`，它可以很好地广播，因为数组是相同的形状，然后一切都陷入困境。大概`integrate_box_1d`应该检查其参数的形状，但这是正确执行此操作的一种方法：

```
>>> my_cdf = lambda ary: np.array([my_pdf.integrate_box_1d(-np.inf, x) for x in ary])
>>> scipy.stats.kstest(sample, my_cdf)
(0.015597917205996903, 0.96809912578616597) 
```

如果您愿意，也可以使用[`np.vectorize`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.vectorize.html)它。

（但同样，您可能实际上想要使用`ks_2samp`.）

# c++ - 以固定数量将数据写入文件，导致它重复文件c ++中的数据

> ID：15557147
> 
> 赞同：0
> 
> 时间：2013-03-21T20:14:17.200
> 
> 标签：c++, read-write

我有这个程序，我想以每个 2 kb 的小部分读取数据，然后将其写入文件，但是当我尝试这样做时，它会读取和写入我的文件四次。这是我的代码：

```
#include<fstream>
#include<iostream>

using namespace std;

ifstream::pos_type size; // use if file is larger than 2 gb

int main()
{
   char *memblock=0;    
   ifstream in("file.txt", ios::in | ios::binary | ios::ate);
   ofstream in1("file1.txt", ios::out | ios::binary | ios::ate);
   size = in.tellg();
   cout << "Size of file "<< size << endl;
   float sz= size/2048.0;
   int sizechck = ceil(sz);
   cout<< "size is "<<sizechck;
   if(in.is_open())
   {
      memblock = new char [2048];
      for (j=0;j<=sizechck;j++)
      {
         in.seekg (j*2048,ios::beg);
         in.read (memblock, 2048);
         in1.write(memblock,2048);
      }

   }
   system("pause");
   return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T20:20:30.383

您正在读取和写入 4096 个字节，但您正在寻找 2048 个字节。（顺便说一句，您正在写入未分配的内存）。

你根本不需要寻找。读写相应地移动文件指针。

# angularjs - 带有破折号的 ngClass 样式

> ID：15557151
> 
> 赞同：167
> 
> 时间：2013-03-21T20:14:24.530
> 
> 标签：angularjs

我希望这可以让人们对使用破折号的样式感到头疼，尤其是在 bootstrap 变得如此流行的情况下。

我正在使用 angular 1.0.5

```
<script src="//ajax.googleapis.com/ajax/libs/angularjs/1.0.5/angular.js"></script> 
```

在[ngClass 文档](http://docs.angularjs.org/api/ng.directive:ngClass)中，示例很简单，但它也提到表达式可以是类名到布尔值的映射。我试图在我的图标上使用“icon-white”样式，如[引导文档](http://twitter.github.com/bootstrap/base-css.html#icons)中所示，具体取决于布尔变量。

```
<i class="icon-home" ng-class="{icon-white: someBooleanValue}"> 
```

上面的行不起作用。该类未附加`icon-white`when`someBooleanValue`为 true。但是，如果我将键更改为`iconWhite`，它会成功添加到类值列表中。如何用破折号添加值？

* * *

## 回答 #1

> 赞同：369
> 
> 时间：2013-03-23T01:39:37.550

经过几个小时的修改，结果是破折号被插值了！需要报价。

```
<i class="icon-home" ng-class="{'icon-white': someBooleanValue}"> 
```

更新：

在旧版本的 Angular 中，使用反斜杠也可以解决问题，但在新版本中则不行。

```
<i class="icon-home" ng-class="{icon\-white: someBooleanValue}"> 
```

前者可能是首选，因为您可以更轻松地在您喜欢的编辑器中搜索它。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-02-17T17:02:24.957

`\'icon-white\'`也可以（使用 AngularJS 1.2.7）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-02T14:30:25.200

替代使用 ng-class ：

```
 .menu-disabled-true{
color: red;
}
    .menu-disabled-false{
color: green;
}

<div ng-controller="DeathrayMenuController">
<p class=menu-disabled-{{status}}>shanam</p>
 <button ng-click="action()">click me</button>
</div>

<script>

function DeathrayMenuController($scope) {
    $scope.status=true
    $scope.action= function(){
      $scope.status=!$scope.status
    }
}
</script> 
```

# jquery - jquery捕获点击iframe

> ID：15557155
> 
> 赞同：4
> 
> 时间：2013-03-21T20:14:31.953
> 
> 标签：jquery, iframe

所以我的页面上有一个 iframe

```
<iframe width="640" height="360" frameborder="0" allowfullscreen="" src="http://www.youtube.com/xxxxxx"> 
```

我想知道如何在此捕获点击事件。Iframe 上没有设置 id 或类

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-01-29T18:02:05.403

我遇到了一种情况，我必须跟踪通过 iframe 拉入的社交媒体按钮的点击次数。单击按钮时将打开一个新窗口。这是我的解决方案：

```
var iframeClick = function () {
    var isOverIframe = false,
    windowLostBlur = function () {
        if (isOverIframe === true) {
            // DO STUFF
            isOverIframe = false;
        }
    };
    jQuery(window).focus();
    jQuery('#iframe').mouseenter(function(){
        isOverIframe = true;
        console.log(isOverIframe);
    });
    jQuery('#iframe').mouseleave(function(){
        isOverIframe = false;
        console.log(isOverIframe);
    });
    jQuery(window).blur(function () {
        windowLostBlur();
    });
};
iframeClick(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T20:16:53.753

您不能与不在同一域下的 iframe 进行交互。这总是被浏览器的策略所阻止。

请参阅[使用 JavaScript 检测点击进入 iframe](https://stackoverflow.com/questions/2381336/detect-click-into-iframe-using-javascript)

# c - 如何在 C 中使用 getchar() 函数？

> ID：15557157
> 
> 赞同：0
> 
> 时间：2013-03-21T20:14:33.173
> 
> 标签：c, linux-kernel, operating-system

我正在尝试`getchar`在操作系统的 linux 内核上使用修改后的函数，从终端给出的字符串中获取字符，然后打印它，但每隔一次我调用它，它似乎基本上返回一个空字符串。

内核级空间：

```
int sys_readchar(userptr_t chptr, it *retval) {
    char ch;
    int result;
    ch = getch();
    copyout(&ch, chptr, sizeof(ch));
    *retval=1;
    return 0;
} 
```

用户级别：

```
int getchar(void) {
    char ch;
    int len;
    len = readchar(&ch);
    return (int)(unsigned char)ch;
} 
```

有谁知道出了什么问题？

谢谢。

# salesforce - 重复表单并传递自定义对象

> ID：15557159
> 
> 赞同：0
> 
> 时间：2013-03-21T20:14:34.710
> 
> 标签：salesforce, visualforce

在我的 VF 页面中，我有一个表单，它使用硬编码自定义对象的映射进行某些操作（Schema.Sobjecttype.object1_c.fields.getMap()）。

现在我想在每次使用不同的自定义对象时在同一页面中重复相同的表单三次。

```
<apex:page>
<apex:repeat .... give the 3 custom objects in a loop>
<apex: form>
//form code
</apex:form>
</apex:repeat>
</apex:page> 
```

表单代码在控制器内部完成。所以我想知道我是否可以提供一个要循环的对象列表，如果可以，那么如何？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-17T07:34:40.363

为什么不将表单设置为 visualforce 组件并使用对象名称作为组件的参数。然后在组件控制器中，加载该对象的 getMap() 并在组件中显示。

# ruby-on-rails - 谷歌图表的 Heroku 应用程序错误

> ID：15557165
> 
> 赞同：0
> 
> 时间：2013-03-21T20:14:58.927
> 
> 标签：ruby-on-rails, heroku

我有带有谷歌图表的 Rails 应用程序。在 localhost 上一切都很顺利，但在 Heroku 上却没有。这是一个heroku日志：

```
$ heroku logs
2013-03-16T13:37:16+00:00 heroku[web.1]: Process exited with status 1
2013-03-16T13:37:16+00:00 heroku[web.1]: State changed from starting to crashed
2013-03-16T13:47:42+00:00 heroku[web.1]: State changed from crashed to starting
2013-03-16T13:47:43+00:00 heroku[web.1]: Starting process with command `bundle exec rails server -p 35505`
2013-03-16T13:47:45+00:00 app[web.1]:   from /app/config/boot.rb:2:in `<top (required)>'
2013-03-16T13:47:45+00:00 app[web.1]:   from script/rails:5:in `require'
2013-03-16T13:47:45+00:00 app[web.1]:   from script/rails:5:in `<main>'
2013-03-16T13:47:45+00:00 app[web.1]: /app/config/boot.rb:2:in `require': no such file to load -- google_chart (LoadError)
2013-03-16T13:47:47+00:00 heroku[web.1]: State changed from starting to crashed
2013-03-16T13:47:47+00:00 heroku[web.1]: Process exited with status 1
2013-03-16T13:57:51+00:00 heroku[web.1]: State changed from crashed to starting
2013-03-16T13:57:53+00:00 heroku[web.1]: Starting process with command `bundle exec rails server -p 14631`
2013-03-16T13:57:57+00:00 app[web.1]: /app/config/boot.rb:2:in `require': no such file to load -- google_chart (LoadError)
2013-03-16T13:57:57+00:00 app[web.1]:   from /app/config/boot.rb:2:in `<top (required)>'
2013-03-16T13:57:57+00:00 app[web.1]:   from script/rails:5:in `require'
2013-03-16T13:57:57+00:00 app[web.1]:   from script/rails:5:in `<main>'
2013-03-16T13:57:58+00:00 heroku[web.1]: Process exited with status 1
2013-03-16T13:57:58+00:00 heroku[web.1]: State changed from starting to crashed
2013-03-16T14:07:55+00:00 heroku[web.1]: State changed from crashed to starting
2013-03-16T14:07:58+00:00 heroku[web.1]: Starting process with command `bundle exec rails server -p 40304`
2013-03-16T14:08:00+00:00 app[web.1]: /app/config/boot.rb:2:in `require': no such file to load -- google_chart (LoadError)
2013-03-16T14:08:00+00:00 app[web.1]:   from script/rails:5:in `<main>'
2013-03-16T14:08:00+00:00 app[web.1]:   from /app/config/boot.rb:2:in `<top (required)>'
2013-03-16T14:08:00+00:00 app[web.1]:   from script/rails:5:in `require'
2013-03-16T14:08:01+00:00 heroku[web.1]: Process exited with status 1
2013-03-16T14:08:01+00:00 heroku[web.1]: State changed from starting to crashed
2013-03-16T14:18:01+00:00 heroku[web.1]: State changed from crashed to starting
2013-03-16T14:18:03+00:00 heroku[web.1]: Starting process with command `bundle exec rails server -p 46534`
2013-03-16T14:18:05+00:00 app[web.1]: /app/config/boot.rb:2:in `require': no such file to load -- google_chart (LoadError)
2013-03-16T14:18:05+00:00 app[web.1]:   from /app/config/boot.rb:2:in `<top (required)>'
2013-03-16T14:18:05+00:00 app[web.1]:   from script/rails:5:in `require'
2013-03-16T14:18:05+00:00 app[web.1]:   from script/rails:5:in `<main>'
2013-03-16T14:18:07+00:00 heroku[web.1]: State changed from starting to crashed
2013-03-16T14:18:07+00:00 heroku[web.1]: Process exited with status 1
2013-03-16T14:28:11+00:00 heroku[web.1]: State changed from crashed to starting
2013-03-16T14:28:12+00:00 heroku[web.1]: Starting process with command `bundle exec rails server -p 12019`
2013-03-16T14:28:16+00:00 app[web.1]: /app/config/boot.rb:2:in `require': no such file to load -- google_chart (LoadError)
2013-03-16T14:28:16+00:00 app[web.1]:   from /app/config/boot.rb:2:in `<top (required)>'
2013-03-16T14:28:16+00:00 app[web.1]:   from script/rails:5:in `require'
2013-03-16T14:28:16+00:00 app[web.1]:   from script/rails:5:in `<main>'
2013-03-16T14:28:17+00:00 heroku[web.1]: Process exited with status 1
2013-03-16T14:28:17+00:00 heroku[web.1]: State changed from starting to crashed
2013-03-16T14:38:18+00:00 heroku[web.1]: State changed from crashed to starting
2013-03-16T14:38:20+00:00 heroku[web.1]: Starting process with command `bundle exec rails server -p 26652`
2013-03-16T14:38:22+00:00 app[web.1]: /app/config/boot.rb:2:in `require': no such file to load -- google_chart (LoadError)
2013-03-16T14:38:22+00:00 app[web.1]:   from /app/config/boot.rb:2:in `<top (required)>'
2013-03-16T14:38:22+00:00 app[web.1]:   from script/rails:5:in `<main>'
2013-03-16T14:38:22+00:00 app[web.1]:   from script/rails:5:in `require'
2013-03-16T14:38:23+00:00 heroku[web.1]: Process exited with status 1
2013-03-16T14:38:23+00:00 heroku[web.1]: State changed from starting to crashed
2013-03-16T14:48:53+00:00 heroku[web.1]: State changed from crashed to starting
2013-03-16T14:48:55+00:00 heroku[web.1]: Starting process with command `bundle exec rails server -p 22351`
2013-03-16T14:48:57+00:00 app[web.1]: /app/config/boot.rb:2:in `require': no such file to load -- google_chart (LoadError)
2013-03-16T14:48:57+00:00 app[web.1]:   from /app/config/boot.rb:2:in `<top (required)>'
2013-03-16T14:48:57+00:00 app[web.1]:   from script/rails:5:in `<main>'
2013-03-16T14:48:57+00:00 app[web.1]:   from script/rails:5:in `require'
2013-03-16T14:48:58+00:00 heroku[web.1]: Process exited with status 1
2013-03-16T14:48:58+00:00 heroku[web.1]: State changed from starting to crashed
2013-03-16T14:58:59+00:00 heroku[web.1]: State changed from crashed to starting
2013-03-16T14:59:01+00:00 heroku[web.1]: Starting process with command `bundle exec rails server -p 25792`
2013-03-16T14:59:04+00:00 app[web.1]: /app/config/boot.rb:2:in `require': no such file to load -- google_chart (LoadError)
2013-03-16T14:59:04+00:00 app[web.1]:   from /app/config/boot.rb:2:in `<top (required)>'
2013-03-16T14:59:04+00:00 app[web.1]:   from script/rails:5:in `require'
2013-03-16T14:59:04+00:00 app[web.1]:   from script/rails:5:in `<main>'
2013-03-16T14:59:06+00:00 heroku[web.1]: State changed from starting to crashed
2013-03-16T14:59:06+00:00 heroku[web.1]: Process exited with status 1
2013-03-16T15:09:13+00:00 heroku[web.1]: State changed from crashed to starting
2013-03-16T15:09:14+00:00 heroku[web.1]: Starting process with command `bundle exec rails server -p 37918`
2013-03-16T15:09:16+00:00 app[web.1]: /app/config/boot.rb:2:in `require': no such file to load -- google_chart (LoadError)
2013-03-16T15:09:16+00:00 app[web.1]:   from /app/config/boot.rb:2:in `<top (required)>'
2013-03-16T15:09:16+00:00 app[web.1]:   from script/rails:5:in `require'
2013-03-16T15:09:16+00:00 app[web.1]:   from script/rails:5:in `<main>'
2013-03-16T15:09:17+00:00 heroku[web.1]: Process exited with status 1
2013-03-16T15:09:17+00:00 heroku[web.1]: State changed from starting to crashed
2013-03-16T15:19:51+00:00 heroku[web.1]: Starting process with command `bundle exec rails server -p 32881`
2013-03-16T15:19:54+00:00 app[web.1]: /app/config/boot.rb:2:in `require': no such file to load -- google_chart (LoadError)
2013-03-16T15:19:54+00:00 app[web.1]:   from /app/config/boot.rb:2:in `<top (required)>'
2013-03-16T15:19:54+00:00 app[web.1]:   from script/rails:5:in `require'
2013-03-16T15:19:54+00:00 app[web.1]:   from script/rails:5:in `<main>'
2013-03-16T15:19:55+00:00 heroku[web.1]: Process exited with status 1
2013-03-16T15:30:16+00:00 heroku[web.1]: State changed from crashed to starting
2013-03-16T15:32:31+00:00 heroku[web.1]: State changed from starting to down
2013-03-21T19:57:52+00:00 heroku[web.1]: Unidling
2013-03-21T19:57:52+00:00 heroku[web.1]: State changed from down to starting
2013-03-21T19:57:54+00:00 heroku[web.1]: Starting process with command `bundle exec rails server -p 20966`
2013-03-21T19:57:56+00:00 app[web.1]:   from script/rails:5:in `<main>'
2013-03-21T19:57:56+00:00 app[web.1]: /app/config/boot.rb:2:in `require': no such file to load -- google_chart (LoadError)
2013-03-21T19:57:56+00:00 app[web.1]:   from /app/config/boot.rb:2:in `<top (required)>'
2013-03-21T19:57:56+00:00 app[web.1]:   from script/rails:5:in `require'
2013-03-21T19:57:57+00:00 heroku[web.1]: Process exited with status 1
2013-03-21T19:57:57+00:00 heroku[web.1]: State changed from crashed to starting
2013-03-21T19:57:57+00:00 heroku[web.1]: State changed from starting to crashed
2013-03-21T19:57:59+00:00 heroku[web.1]: Starting process with command `bundle exec rails server -p 58819`
2013-03-21T19:58:01+00:00 app[web.1]: /app/config/boot.rb:2:in `require': no such file to load -- google_chart (LoadError)
2013-03-21T19:58:01+00:00 app[web.1]:   from /app/config/boot.rb:2:in `<top (required)>'
2013-03-21T19:58:01+00:00 app[web.1]:   from script/rails:5:in `require'
2013-03-21T19:58:01+00:00 app[web.1]:   from script/rails:5:in `<main>'
2013-03-21T19:58:02+00:00 heroku[web.1]: Process exited with status 1
2013-03-21T19:58:02+00:00 heroku[web.1]: State changed from starting to crashed
2013-03-21T19:58:04+00:00 heroku[router]: at=error code=H10 desc="App crashed" method=GET path=/ host=cvut-project-manager.herokuapp.com fwd="5.102.48.3" dyno= queue= wait= connect= service= status=503 bytes=
2013-03-21T19:58:06+00:00 heroku[router]: at=error code=H10 desc="App crashed" method=GET path=/favicon.ico host=cvut-project-manager.herokuapp.com fwd="5.102.48.3" dyno= queue= wait= connect= service= status=503 bytes= 
```

我正在使用**gem "google_charts", "~> 1.2.0"**我有

```
require 'google_chart' 
```

在**boot.rb**中。

在项目控制器中：

```
.
.
#some minor logic
.
.
GoogleChart::PieChart.new('320x200', "Burndown pie chart",false) do |pc| 
  pc.data "Remain", @remain_points.to_i
  pc.data "Done", @done_points.to_i
  @chart =  pc.to_url
end
respond_to do |format|
  format.html # show.html.erb
  format.json { render :json => @project }
end
end 
```

引导.rb：

```
require 'rubygems'
require 'google_chart'

# Set up gems listed in the Gemfile.
ENV['BUNDLE_GEMFILE'] ||= File.expand_path('../../Gemfile', __FILE__)

require 'bundler/setup' if File.exists?(ENV['BUNDLE_GEMFILE']) 
```

该宝石的链接是：

```
 https://github.com/rudionrails/google_charts 
```

**带有**Ruby 1.8.7的****Rails 版本 3.2.8****

 ****所以，拜托，你能告诉我，为什么这在 localhost 上有效，但在 heroku 上无效？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-04T15:06:20.013

最后，我用

```
gem "googlecharts" 
```

效果很好。****

# html - 如何垂直居中一个div？

> ID：15557170
> 
> 赞同：1
> 
> 时间：2013-03-21T20:15:05.400
> 
> 标签：html, css, twitter-bootstrap

我`div { float: left; }`在 Bootstrap 结构中有两列（您可能知道）。问题是让一个里面的内容`div`居中（垂直）。所以，第二列的高度无关紧要，第二列总是在中间。

它不是一行文本。在我的情况下，将是一个图像和一个标题。两个元素块。

这是示例：http: [//jsfiddle.net/almino_melo/L4rK5/](http://jsfiddle.net/almino_melo/L4rK5/)。

我试着用rule把另一个`div`放在里面，然后用and把另一个放在里面。但它没有用。`display: table;``display: table-cell;``vertical-align: middle;`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T22:20:47.940

这是我更新的小提琴[http://jsfiddle.net/L4rK5/9/](http://jsfiddle.net/L4rK5/9/)，它可以满足您的要求，但看起来确实很粗糙，请注意 html div 结构的更改以及以下 css 规则。

```
.text-center{
    width: 100%;
    position: absolute;
    top: 50%;
} 
```

# php - 我需要使用 PHP 来制作这种税务计算器吗？

> ID：15557171
> 
> 赞同：-6
> 
> 时间：2013-03-21T20:15:12.660
> 
> 标签：php, database

我这里有一个示例税计算器：

[http://birtaxcalculator.com/calculators/bir_withholding_tax_computation_2009](http://birtaxcalculator.com/calculators/bir_withholding_tax_computation_2009)

作为一名经验丰富的 Web 开发人员并且即将复制相同的精确计算器，您是否需要使用数据库来存储所有所得税税率？见下图。

**税率** ![在此处输入图像描述](../Images/f4edac2b718b0164072ed8892ebc046c.png)

专家的任何建议.. 谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T20:17:09.440

这当然不是必需的。它不是一张很大的桌子，也不会经常更换，所以我认为没有理由构建任何重量级的东西。您可以将其存储在 PHP 数组或 JSON 或 XML 等平面文件中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T20:17:46.313

你可以使用任何你觉得舒服的语言。您可以在 JS 中对费率进行硬编码，而永远不要使用数据库。不过，您可以非常轻松地创建一个数据库，该数据库可以跟踪一段时间内的历史汇率。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T20:22:40.793

最简单的方法是在 JavaScript 上实现此功能。您可以将此数据直接存储在数组或对象中。这将是更快的解决方案，所有数据都将在客户端计算。

如果您必须为此数据管理提供管理界面或从用户那里保护此表中的数据，您必须使用带有一些服务器脚本语言（例如 Php 和 MySQL）的数据库。它会比 JS 方法慢得多。

# .htaccess - FollowSymlinks .htaccess 重写规则 404 错误

> ID：15557173
> 
> 赞同：0
> 
> 时间：2013-03-21T20:15:17.600
> 
> 标签：.htaccess, mod-rewrite, http-status-code-404

我的真实网址是：

www.mysite.com/site/index.php

我需要：

www.mysite.com/home.html

我在 .htaccess 中写道：

```
 Options +FollowSymlinks
  RewriteEngine On
  RewriteRule (.*)/home.html$ /site/index.php 
```

但是转到 404 错误

有什么帮助吗？

TK。

更新：

域实际上是：www.my-site.com 有什么影响？

更新：

我保存在 www.my-site.com 并为此进行更改：

```
<IfModule mod_rewrite.c>
  Options +FollowSymlinks
  RewriteEngine On
  RewriteBase /
  RewriteRule ^home\.html$ site/index.php
</IfModule> 
```

但没有工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T21:35:54.910

[RewriteRule](https://httpd.apache.org/docs/current/mod/mod_rewrite.html#rewriterule)指令的*模式*部分匹配请求的*路径*（例如 /my/request/），不包括主机和查询字符串。另请注意，在*.htaccess*上下文中，前导斜杠不包含在*模式*中。

 ***```
 Options +FollowSymlinks
  RewriteEngine On
  RewriteBase /
  RewriteRule ^home\.html$ site/index.php 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-27T22:20:37.303

在我的服务器中，我`httpd.conf`在 Apache 中进行了更改

`AllowOverride None`到`AllowOverride All`

工作吧！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T09:47:51.143

你在评论中说：

> .htaccess 文件保存在 www.mysite.com/site/

这意味着，您可以使用当前模式访问`www.mysite.com/site/anything/home.html`该模式，该模式将被重写为`www.mysite.com/site/site/index.php`

您应该将 放在`.htaccess`文档根目录中，并且如前所述，从模式中删除此部分：`(.*)/`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-27T19:26:36.917

该站点由 godaddy.com 托管，服务器通过 IIS 在 Windows 中运行，因此，必须将规则写入 web.config 文件。

```
<configuration>
 <system.webServer>
   <rewrite>
  <rules>
    <rule name="Imported Rule 1">
      <match url="^home\.html$" ignoreCase="false" />
      <action type="Rewrite" url="site/index.php" />
    </rule>
  </rules>
</rewrite>
 </system.webServer>
</configuration> 
```

逆天！！***

# mysql - 如何在 MySQL 中的某些条件下为对字符串生成唯一 ID

> ID：15557184
> 
> 赞同：3
> 
> 时间：2013-03-21T20:16:02.180
> 
> 标签：mysql, sql, database

我是SQL新手，请帮我解决问题。

我有一个用于站点私人消息的表，这是我在引擎之间迁移后得到的（phpbb 到 drupal）

可以说，它有 3 列：

*   **mid** - 用于消息 ID
*   **线程**- 用于线程 ID
*   **收件人**- 用户 ID，谁将收到消息。

每条消息都显示在收件人和作者的邮箱中，所以每条消息我都有 2 个字符串。

*问题*是消息的**线程**ID 不正确（基本上，它们等于**mid**），因此 2 个用户之间的对应关系显示为一百个单独的线程。

例如：

```
user 100 wrote message to user 101 
user 101 replied       to user 100
user 102 wrote message to user 100 
```

该表如下所示：

```
 ________________________________
| mid    | thread    | recipient |
|        |           |           |
| 1      | 1         | 101       |  ← message 1 in recipient's mailbox    
| 1      | 1         | 100       |  ← message 1 in author's mailbox
| 2      | 2         | 100       |    ...
| 2      | 2         | 101       |
| 3      | 3         | 100       |
| 3      | 3         | 102       |
|________|___________|___________| 
```

**我的目标**是为具有相同接收者对的每组对行提供相同的线程 ID：

```
 ________________________________
| mid    | thread    | recipient |
|        |           |           |
| 1      | 1         | 101       |  }
| 1      | 1         | 100       |  }    Correspondence between 100 and 101 must
| 2      | 1         | 100       |  }    have the same thread id (1)
| 2      | 1         | 101       |  }
| 3      | 2         | 100       |
| 3      | 2         | 102       |
|________|___________|___________| 
```

## 更新：

对于同一收件人对之间的所有当前对话，线程 ID 必须相同。（不用担心进一步的对话，用户可以选择在写消息时打开新线程，这将生成新线程 id，或者在现有线程中回复，这将使用现有线程 id 标记消息。我想要的只是收集线程中每 2 个用户之间的现有消息吨数）。

我想像某种循环一样，它将搜索每个中间的所有收件人 ID，并在升序排序后将它们合并到数组中：

*   中间 1: (100, 101)
*   中间 2: (100, 101)
*   中间 3: (100, 102)

然后为相同的数组提供相同的 id，这将是我想要的线程 id：

*   (100, 101) = 1
*   (100, 101) = 1
*   (100, 102) = 2

不确定，如果我的算法仅适用于 SQL 查询

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T20:23:22.830

这种更正应该从您的应用程序中更好地处理，因为在那里处理逻辑比在这种功能样式的 Sql 中更容易。

这是完成它的一种方法（**这假设所有相关（线程）对话一个接一个，正如您所确认的那样**）：

```
SELECT   mid, 
         thread, 
         recipient 
FROM     (  
          SELECT row, 
                 mid, 
                 recipient,
                 IF(row % 2 = 0, @evenThread := thread, NULL) AS tempThread,
                 IF(row % 2 = 1, @evenThread, thread) AS thread
          FROM   (
                  SELECT   @row := @row + 1 as row, 
                           mid, 
                           IF(@row = 1, @thread := thread, NULL) AS tempThread,                
                           IF(@row % 2 = 1, IF(@row = 1, @rec1 := recipient, @rec1 := @rec3), NULL) AS tempOddRow,
                           IF(@row % 2 = 1, @rec3 := recipient, recipient) AS recipient,         
                           IF(@row % 2 = 0 AND @row > 2, IF((recipient != @rec1 OR @rec3 != @rec2) AND (recipient != @rec2 OR @rec3 != @rec1), @isDifferent := true, @isDifferent := false), NULL) AS isDifferent,
                           IF(@row % 2 = 0, @rec2 := recipient, NULL) AS tempEvenRow,
                           IF(@row % 2 = 0, IF(@isDifferent, @thread := @thread + 1, @thread), @thread) AS thread
                  FROM     (SELECT @row := 0) AS r, 
                           (SELECT @thread := 0) as t,
                           (SELECT @isDifferent := false) as d,
                           (SELECT @rec1 := 0) AS r1,
                           (SELECT @rec2 := 0) AS r2, 
                           (SELECT @rec3 := 0) AS r3, 
                           messages --your table name
                  ORDER BY row DESC
                 ) AS temp, 
                 (SELECT @evenThread := 0) AS t
         ) AS corrected 
ORDER BY row 
```

**这只是选择查询**。在这里测试它[http://sqlfiddle.com/#!9/61247/2](http://sqlfiddle.com/#!9/61247/2)。您可以将其复制到临时表中，并首先确认所有数据是否正确，而不是更新原始表，这会使调试更加困难。类似于以下内容：

```
CREATE TABLE messages_new LIKE messages; --new table name given
INSERT INTO  messages_new (mid, thread, recipient)
SELECT       mid, 
             thread, 
             recipient 
FROM         (  
              SELECT row, 
                     mid, 
                     recipient,
                     IF(row % 2 = 0, @evenThread := thread, NULL) AS tempThread,
                     IF(row % 2 = 1, @evenThread, thread) AS thread
              FROM   (
                      SELECT   @row := @row + 1 as row, 
                               mid, 
                               IF(@row = 1, @thread := thread, NULL) AS tempThread,                
                               IF(@row % 2 = 1, IF(@row = 1, @rec1 := recipient, @rec1 := @rec3), NULL) AS tempOddRow,
                               IF(@row % 2 = 1, @rec3 := recipient, recipient) AS recipient,         
                               IF(@row % 2 = 0 AND @row > 2, IF((recipient != @rec1 OR @rec3 != @rec2) AND (recipient != @rec2 OR @rec3 != @rec1), @isDifferent := true, @isDifferent := false), NULL) AS isDifferent,
                               IF(@row % 2 = 0, @rec2 := recipient, NULL) AS tempEvenRow,
                               IF(@row % 2 = 0, IF(@isDifferent, @thread := @thread + 1, @thread), @thread) AS thread
                      FROM     (SELECT @row := 0) AS r, 
                               (SELECT @thread := 0) as t,
                               (SELECT @isDifferent := false) as d,
                               (SELECT @rec1 := 0) AS r1,
                               (SELECT @rec2 := 0) AS r2, 
                               (SELECT @rec3 := 0) AS r3, 
                               messages
                      ORDER BY row DESC
                     ) AS temp, 
                     (SELECT @evenThread := 0) AS t
             ) AS corrected 
ORDER BY     row;
DROP TABLE   messages;
ALTER TABLE  messages_new RENAME TO messages; --back to old name 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T22:52:09.730

我在这里把它放到一个 SQL Fiddle 中：[http ://sqlfiddle.com/#!2/83bdc/25](http://sqlfiddle.com/#!2/83bdc/25)

假设你的表名是`messages`我会做的：

```
Select messages.*, FirstThread 
From messages

Inner Join

(
-- Find a pair of dudes for each message and show the earliest thread of each
Select ThreadsForPairs.*, FirstThread From

(

Select mid
, Min(recipient) AS FirstDude
, Max(recipient) AS SecondDude
, thread

From messages

Group By mid, thread

) ThreadsForPairs

Left Join

(
-- Find the earliest thread for every pair of dudes
Select FirstDude, SecondDude, Min(thread) AS FirstThread

From

-- For every message, get the dudes involved
(
Select mid
, Min(recipient) AS FirstDude
, Max(recipient) AS SecondDude
, thread

From messages

Group By mid, thread
) PairsForMessages

Group By FirstDude, SecondDude

) FirstThreadForPairs

ON ThreadsForPairs.FirstDude = FirstThreadForPairs.FirstDude
AND ThreadsForPairs.SecondDude = FirstThreadForPairs.SecondDude

) FirstThreadForEveryMessage

On messages.mid = FirstThreadForEveryMessage.mid 
```

正如您将看到的，我与您的输出不完全匹配，因为消息 ID 3 将具有线程 3 而不是 2，但我认为这是相同的想法......

# knockout.js - Knockout + jQuery DataTables 搜索过滤器

> ID：15557186
> 
> 赞同：1
> 
> 时间：2013-03-21T20:16:13.480
> 
> 标签：knockout.js, datatables

我有一个场景，我有一个由敲除管理的 javascript 对象列表，我想让 jQuery 数据表处理向用户显示列表（为了保持一致性，因为我使用数据表在其他地方显示静态内容）。

所以我有这样的东西：http: [//jsfiddle.net/MLfcs/](http://jsfiddle.net/MLfcs/)

在搜索功能之外，一切都很好：它没有获取输入的值。如果您尝试小提琴并搜索任何输入的内容，所有行都将被过滤掉。

有没有一种简单的方法来创建自定义过滤器来处理这个问题？还是自定义淘汰赛绑定？我宁愿不必诉诸于做这样的事情：

从：

```
 <td><input type="text" data-bind="value: partA" /></td> 
```

到：

```
 <td><input type="text" data-bind="value: partA" /><span data-bind="text: partA" style="display: none" /></td> 
```

我知道数据表搜索对于输入应该可以正常工作，但我只是不确定数据绑定中缺少什么敲除以使其正常工作。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T17:49:44.327

尝试将 value 属性也与实际`attr`绑定绑定。

```
<td><input type="text" data-bind="value: item.partA, attr: {'value': item.partA}" /></td> 
```

[http://jsfiddle.net/billpull/ZBCvD/1/](http://jsfiddle.net/billpull/ZBCvD/1/)

不要认为仅使用值绑定就可以做到这一点。

# c# - 将值返回给客户端，然后进行一些回调

> ID：15557191
> 
> 赞同：0
> 
> 时间：2013-03-21T20:16:23.987
> 
> 标签：c#, wcf, wcf-binding

在下面的代码中，我想做的是允许我的客户端在服务器上调用 wcf 方法，返回成功，然后对当前进度进行回调，即完成百分比。客户端可以在 10% 后断开连接，该方法将继续。

但在下面的代码中 - 返回“成功”行会导致函数退出。我想要返回的原因是客户端阻塞，直到他知道服务完成了一些重要的处理。

这可能吗？

```
namespace WCFService
{
    [ServiceBehavior(InstanceContextMode = InstanceContextMode.PerCall)]
    public class WCFJobsLibrary : IWCFJobsLibrary
    {
        public String ChatToServer(string texttoServer) // send some text to the server
        {
            Logging.Write_To_Log_File("Entry", MethodBase.GetCurrentMethod().Name, "", "", "", 1);

            try
            {
                // Some extemely important prechecks .....
                //........
                return "success";

                // Dont care now if client disconnects but lets give them some updates as progress happens if they are still connected

                IMyContractCallBack callback = OperationContext.Current.GetCallbackChannel<IMyContractCallBack>();
                // Some processing .....
                callbackmethod("20% complete", callback);
                // Some processing .....
                callbackmethod("40% complete", callback);
                // Some processing .....
                callbackmethod("60% complete", callback);
                // Some processing .....
                callbackmethod("80% complete", callback);
                // Some processing .....
                callbackmethod("100% complete", callback);

            }
            catch (Exception ex)
            {
                return "error";
            }
        }

        public void callbackmethod(string text, IMyContractCallBack somecallback)
        {
            try
            {
                somecallback.callbacktoServer(text);
            }    
            catch (Exception)
            {

            }    
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T20:18:46.610

当您`return`在一个函数中时，它将停在该行。您在返回之后放置的任何内容都不会执行。实际上，您的编译器应该警告您有关无法访问的代码。

编辑：

我建议在调用 return 之前启动一个线程，该线程将运行 continue 工作并发送更新调用。

```
public String ChatToServer(string texttoServer) // send some text to the server
        {

            try
            {
                Logging.Write_To_Log_File("Entry", MethodBase.GetCurrentMethod().Name, "", "", "", 1);
                // Some extemely important prechecks .....
                System.Threading.Thread thread = new System.Threading.Thread(DoWork);
                thread.Start();
                //........
                return "success";

                // Dont care now if client disconnects but lets give them some updates as progress happens if they are still connected

            }
            catch (Exception ex)
            {
                return "error";
            }
        }

        void DoWork()
        {
            IMyContractCallBack callback = OperationContext.Current.GetCallbackChannel<IMyContractCallBack>();
            // Some processing .....
            callbackmethod("20% complete", callback);
            // Some processing .....
            callbackmethod("40% complete", callback);
            // Some processing .....
            callbackmethod("60% complete", callback);
            // Some processing .....
            callbackmethod("80% complete", callback);
            // Some processing .....
            callbackmethod("100% complete", callback);

        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T20:22:14.433

您可以使回调异步并且它们将触发，并且该方法将返回，但是您必须在`return`调用回调之后放置该行。

如果出现错误，WCF 内置了自动异常处理，因此您可以只`Throw`处理异常，不需要返回它......然后可以在客户端捕获它。并且将有更多的信息，而不仅仅是“错误”。

使用 TPL 的示例：（使用`System.Threading.Tasks`命名空间，.net 4+）

```
 string yourMethod() 
    {
        // Logging

        try 
        {   
            // prechecks 
        } 
        catch (Exception ex)
        {
            return "failed" // ok as you have now if no more information is needed
            // throw; // Can also throw exception which WCF client on other end can catch
        }     

        Task.Factory.StartNew(() => {
            IMyContractCallBack callback = OperationContext.Current.GetCallbackChannel<IMyContractCallBack>();
            // Some processing .....
            callbackmethod("20% complete", callback);
            // Some processing .....
            callbackmethod("40% complete", callback);
            // Some processing .....
            callbackmethod("60% complete", callback);
            // Some processing .....
            callbackmethod("80% complete", callback);
            // Some processing .....
            callbackmethod("100% complete", callback);
        });
        return "success";
   } 
```

# python - authenticate() 总是返回无

> ID：15557196
> 
> 赞同：0
> 
> 时间：2013-03-21T20:16:28.780
> 
> 标签：python, django, authentication

*   蟒蛇 3
*   姜戈 1.5

我已经成功创建了一个用户`create_user()`，该用户可以登录到管理部分。但是，在我的views.py 中编写代码以便用户可以在其他任何地方登录，这是行不通的。这是我正在使用的代码，即使用户名和密码绝对正确，`authenticate()`仍然返回`None`.

```
def dologin(request):
    usrnym = request.POST['usrnym']
    psswrd = request.POST['usrpass']
    usr = authenticate(user=usrnym,password=psswrd)
    if usr is not None:
        if usr.is_active:
            login(request, usr)
            # redirect to success page
        else:
            pass
            # redirect to a 'disabled account' error message
    else:
        # return an 'invalid login' error message
        errmsg = "Invalid login. Password and username did not match."
        template = loader.get_template('fsr/loginform.html')
        context = RequestContext(request, {
            'title': "Login Page",
            'error': errmsg,
            'usr': usrnym,
            'pwd': psswrd,
            'usra': usr,
        })
        return HttpResponse(template.render(context)) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T20:22:51.153

我可能错了，但不应该是吗？

`usr = authenticate(username=usrnym,password=psswrd)`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T20:23:33.063

它应该是用户名而不是用户它的语法错误

```
usr = authenticate(username = usrnym, password = psswrd) 
```

# python - Python，列表索引超出范围错误

> ID：15557198
> 
> 赞同：1
> 
> 时间：2013-03-21T20:16:46.827
> 
> 标签：python, list, indexing

我正在尝试在 python 中测试一个简单的二维地图坐标生成器。它使用 x 和 y 数组创建一个 Tile 对象，以便我可以访问坐标并修改它们的属性。

这将创建地图对象并用 2D 坐标平面中的图块填充它

```
map = [[ Tile(True)
    for y in range(MAP_HEIGHT) ]
        for x in range(MAP_WIDTH) ] 
```

瓷砖类：

```
class Tile:
    #a tile of the map and its properties
    def __init__(self, blocked, type, owner, block_sight = None):
        self.blocked = blocked
        self.type = type
        self.owner = owner 
        if block_sight is None: block_sight = blocked
        self.block_sight = block_sight 
```

我试图让程序逐字符读取文本文件以创建地图。它将在 mapx 和 mapy 提供的坐标处插入一个对象到地图中。

```
mapx = 0
mapy = 0
filename = str(mapn) + '.txt'
new_map = [[ Tile(True, 0, 0)
         for y in range(MAP_HEIGHT) ]
       for x in range(MAP_WIDTH) ]
with open(filename) as f:
    while True:
        c = f.read(1)
        if not c:
            return new_map
        elif (c == '#'):
            new_map[mapx][mapy].blocked = False
            new_map[mapx][mapy].block_sight = True
            new_map[mapx][mapy].type = 0
            new_map[mapx][mapy].owner = 0 
```

（经过几次 elifs 后）

```
if(mapx < MAP_WIDTH):
    mapx += 1
elif(mapy < MAP_HEIGHT):
    mapy += 1
    mapx = 0 
```

运行此程序时，我收到此错误：IndexError: list index out of range。它说这条线

```
 new_map[mapx][mapy].blocked = False 
```

是错的。知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T20:29:57.460

初始化后，外部列表将`MAP_WIDTH`包含索引从 0 到 的元素`MAP_WIDTH-1`。同样，每个内部列表都有从 0 到 的索引`MAP_HEIGHT-1`。

考虑一下会发生什么`mapx = MAP_WIDTH-1`；即使用您的代码在列表的末尾：

```
if(mapx < MAP_WIDTH):
    mapx += 1
.... 
```

的值`mapx`将变得大于列表的上限。

测试应该是`mapx < MAP_WIDTH-1`为了解决这个问题。elif 中的测试也需要做相应的更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T20:45:20.427

如果您首先读取文件并创建一个列表 [ ... (xi, yi) ... ] 然后在 (xi,yi) 上创建一个循环以实例化 Tile 对象，那将会更加pythonic。这样，您就不必考虑列表索引。

只是我的 2 cts...

# linux - sed 在特定行号替换特定列号值

> ID：15557206
> 
> 赞同：5
> 
> 时间：2013-03-21T20:17:14.143
> 
> 标签：linux, shell, sed

我有一个 5 列的 csv 文件（空格分隔），如下所示：

```
username1 20130310 enabled 20130310 enabled
username2 20130310 enabled 20130321 disabled
username3 20130320 disabled 20130321 enabled
username4 20130310 disabled 20130310 disabled 
```

我正在尝试更改第 4 列的值`username4`。

我的脚本已经获取了要存储的行号和新值`username4`：所以我想用`$newValue`at line number替换第 4 列的值`$lineNumber`。

在我的示例中：

```
newValue=anything
lineNumber=4 
```

这样它将呈现：

```
username1 20130310 enabled 20130310 enabled
username2 20130310 enabled 20130321 disabled
username3 20130320 disabled 20130321 enabled
username4 20130310 disabled anything disabled 
```

我打算使用`sed`而不是`awk`因为`sed`我们可以使用`-i`

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-21T20:20:15.567

这是一种方法：

```
$ sed '/^username4/{s/ [^ ]*/ anything/3}' file
username1 20130310 enabled 20130310 enabled
username2 20130310 enabled 20130321 disabled
username3 20130320 disabled 20130321 enabled
username4 20130310 disabled anything disabled

# store changes back to the file 
$ sed -i '/^username4/{s/ [^ ]*/ anything/3}' file 
```

但是`awk`因为`sed`有`-i`选择权而避免并不是一个好的理由。`awk`更适合处理这类问题。

```
$ awk '$1=="username4"{$4="anything"}1' file
username1 20130310 enabled 20130310 enabled
username2 20130310 enabled 20130321 disabled
username3 20130320 disabled 20130321 enabled
username4 20130310 disabled anything disabled

# store changes back to the file
$ awk '$1=="username4"{$4="anything"}1' file > tmp && mv tmp file 
```

有了`awk`你可以轻松地进行字段比较和编辑，使用 shell 变量不是引用噩梦，理解你昨天才写的脚本也不是和问题不同`sed`：

```
$ linenumber=4

$ newvalue=anything 

$ awk 'NR==n{$4=a}1' n=$linenumber a=$newvalue file 
username1 20130310 enabled 20130310 enabled
username2 20130310 enabled 20130321 disabled
username3 20130320 disabled 20130321 enabled
username4 20130310 disabled anything disabled

$ awk 'NR==n{$4=a}1' n=$linenumber a=$newvalue file > tmp && mv tmp file 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T11:36:51.370

这可能对您有用（GNU sed 和 Bash）：

```
lineNumber=4 newValue=xxxx sed -i ${lineNumber}'s/\S\+/'"${newValue}"'/4' file 
```

不过要小心。如果`newValue`包含 a`/`您将需要将替代命令分隔符更改为其他内容，例如`s@\S\+@${newValue}@4`

# java - 让窗口跟踪组件在屏幕上的位置

> ID：15557207
> 
> 赞同：1
> 
> 时间：2013-03-21T20:17:18.260
> 
> 标签：java, swing

在 Java Swing 中，我希望在组件旁边显示一个窗口——因此它将浮动在 GUI 之上。但我需要它始终保持在该特定组件旁边，无论它移动到哪里，用户是否移动窗口，滚动组件所在的滚动窗格，调整大小等。有没有一种简单的方法可以做到这一点？

我已经知道如何让它出现在正确的位置开始。因此，例如，如果组件在屏幕上的位置发生更改时触发某个事件，那将起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T20:26:46.243

看一眼[`Componet#getLocationOnScreen`](http://docs.oracle.com/javase/7/docs/api/java/awt/Component.html#getLocationOnScreen%28%29)

您将不得不考虑组件的大小以及窗口可以在当前屏幕范围之外打开的可能性，但让我们从小步骤开始

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T21:32:20.707

我想我找到了。java.awt.Component.addHierarchyBoundsListener 在滚动条移动、窗口移动或调整大小时触发事件。我认为这会做我需要的。

# java - 如何将 DatePicker 时间存储在 SQLite 数据库中？我的老是闪退

> ID：15557209
> 
> 赞同：0
> 
> 时间：2013-03-21T20:17:24.270
> 
> 标签：java, android, eclipse, sqlite, timepicker

我使用互联网上的各种资源创建了一个简单的记录保存应用程序。我能够成功存储文本数据 - 但是当我尝试合并时，`TimePicker`我最终会崩溃我的整个应用程序。我在上一篇文章中被告知如何添加此功能 - 但是当我尝试为时间选择器数据添加字段时，整个应用程序将关闭（当然不会保存数据）

[如何在我的简单记录保存应用程序中存储 TimePicker 数据？](https://stackoverflow.com/questions/15540395/how-do-i-store-timepicker-data-in-my-simple-record-keeping-app)

我被指示（上面的用户）使用以下内容：

```
CREATE TABLE ...... dtField date, tmpName Text..... 
```

使用以下将日期保存为文本

//示例日期格式 - 2013-03-21 13:12:00

```
android.text.format.DateFormat.format("yyyy-MM-dd hh:mm:ss", dtDate.getTime()) 
```

我已经实施的前半部分（我相信）。后半部分我不太确定如何正确实施（我需要帮助的第一件事），并且在进行这些更改后我的应用程序也强制关闭（我需要帮助的第二件事。）

非常感谢解决此问题的任何帮助！（我有点菜鸟——所以说明越详细——越好！）

提前致谢，

阿曼尼·斯旺

附言

我用 Robby Pond 的建议更新了下面的源代码：

代替

EditText timeEt 与

时间选择器时间Et

但我仍然无法运行下面显示的代码。

有人可以看看 logcat 或问题日志，让我知道您是否能说出此时导致问题的原因？Robby Pond 的建议很有帮助，但我对下面的（当前）源代码有更深层次的问题。

附言

我知道错误无法解析为类型通常表明缺少类或可能存在 XML 问题，但错误表明“TimePicker 无法解析为类型”但是我没有 TimePicker.Java - 我只是想使用下面 XML 中编码的时间选择器按钮。

XML：数据输入

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent" 
android:layout_height="wrap_content" android:layout_weight="1">

<LinearLayout android:id="@+id/linearLayout"
  android:layout_width="fill_parent"
  android:layout_height="wrap_content"
  android:orientation="vertical" 
  android:padding="5dp">

  <EditText android:id="@+id/nameEdit"
     android:layout_width="fill_parent"
     android:layout_height="wrap_content" 
     android:imeOptions="actionNext" 
     android:hint="@string/name_hint"
     android:inputType="textPersonName|textCapWords"/>

  <EditText android:id="@+id/capEdit"
     android:layout_width="fill_parent" 
     android:layout_height="wrap_content" 
     android:imeOptions="actionNext" 
     android:hint="@string/cap_hint"
     android:inputType="textPersonName|textCapWords"/>

<TextView
    android:id="@+id/textView3"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Data Limit"
    android:textColor="#ffffff"
    android:textAppearance="?android:textAppearanceMedium" />

<SeekBar
    android:id="@+id/seekBar1"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" />

<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal" >

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="1.0"
        android:gravity="left"
        android:textColor="#ffffff"
        android:text="10MB" />

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="1.0"
        android:gravity="right"
        android:textColor="#ffffff"
        android:text="Unlimited Data" />
</LinearLayout>

<TextView
    android:id="@+id/textView3"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Bandwidth Limit"
    android:textColor="#ffffff"
    android:textAppearance="?android:textAppearanceMedium" />

<SeekBar
    android:id="@+id/seekBar1"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" />

<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal" >

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="1.0"
        android:gravity="left"
        android:textColor="#ffffff"
        android:text="10kbs" />

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="1.0"
        android:textColor="#ffffff"
        android:gravity="right"
        android:text="Unlimited Bandwidth" />
</LinearLayout>

 <TextView
    android:id="@+id/TextView02"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:textAppearance="?android:textAppearanceSmall" />

 <TextView
    android:id="@+id/TextView02"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="WiFi Time Limit"
    android:textColor="#ffffff"
    android:textAppearance="?android:textAppearanceMedium" />

 <TimePicker
    android:id="@+id/timeEdit"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="center"
    android:gravity="center"
    android:layout_weight="1.0" />

<EditText
    android:id="@+id/codeEdit"
    android:inputType="textUri"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:ems="10"
    android:lines="1"
    android:hint="@string/code_hint"
    android:imeOptions="actionNext" />

  <Button android:id="@+id/saveBtn" 
     android:layout_width="wrap_content"
     android:layout_height="wrap_content"
     android:layout_marginTop="15dp"
     android:layout_gravity="center_horizontal"
     android:text="@string/save_btn"/>
 </LinearLayout>
 </ScrollView> 
```

JAVA：数据输入

```
package com.nfc.linkingmanager;

import android.app.Activity;
import android.app.AlertDialog;
import android.os.AsyncTask;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;

public class AddEditCountry extends Activity {

 private long rowID; 
 private EditText nameEt;
 private EditText capEt;
 private EditText codeEt;
 private TimePicker timeEt;

   @Override
   public void onCreate(Bundle savedInstanceState) 
   {
      super.onCreate(savedInstanceState); 
      setContentView(R.layout.add_country);

      nameEt = (EditText) findViewById(R.id.nameEdit);
      capEt = (EditText) findViewById(R.id.capEdit);
      codeEt = (EditText) findViewById(R.id.codeEdit);
      timeEt = (TimePicker) findViewById(R.id.timeEdit);

      Bundle extras = getIntent().getExtras(); 

      if (extras != null)
      {
         rowID = extras.getLong("row_id");
         nameEt.setText(extras.getString("name"));  
         capEt.setText(extras.getString("cap"));  
         codeEt.setText(extras.getString("code"));  
         timeEt.setText(extras.getString("time"));  
      }

      Button saveButton =(Button) findViewById(R.id.saveBtn);
      saveButton.setOnClickListener(new OnClickListener() {

          public void onClick(View v) 
          {
             if (nameEt.getText().length() != 0)
             {
                AsyncTask<Object, Object, Object> saveContactTask = 
                   new AsyncTask<Object, Object, Object>() 
                   {
                      @Override
                      protected Object doInBackground(Object... params) 
                      {
                         saveContact();
                         return null;
                      }

                      @Override
                      protected void onPostExecute(Object result) 
                      {
                         finish();
                      }
                   }; 

                saveContactTask.execute((Object[]) null); 
             }

             else
             {
                AlertDialog.Builder alert = new AlertDialog.Builder(AddEditCountry.this);
                alert.setTitle(R.string.errorTitle); 
                alert.setMessage(R.string.errorMessage);
                alert.setPositiveButton(R.string.errorButton, null); 
                alert.show();
             }
          } 
     });
   }

   private void saveContact() 
   {
      DatabaseConnector dbConnector = new DatabaseConnector(this);

      if (getIntent().getExtras() == null)
      {
          dbConnector.insertContact(nameEt.getText().toString(),
                  capEt.getText().toString(),
                  timeEt.getText().toString(),
                  codeEt.getText().toString());
      }
      else
      {
         dbConnector.updateContact(rowID,
            nameEt.getText().toString(),
            capEt.getText().toString(),
            timeEt.getText().toString(),
            codeEt.getText().toString());
      }
   }
} 
```

XML：数据输出

```
<?xml version="1.0" encoding="utf-8"?>

<TableLayout xmlns:android="http://schemas.android.com/apk/res/android"
  android:layout_width="fill_parent" 
  android:layout_height="wrap_content"
  android:stretchColumns="1" 
  android:layout_margin="5dp">

   <TableRow>         
     <TextView 
        style="@style/StyleLabel"
        android:text="@string/name_lbl"/>
     <TextView 
        android:id="@+id/nameText" 
        style="@style/StyleText"/>         
  </TableRow>

  <TableRow>         
     <TextView 
        style="@style/StyleLabel"
        android:text="@string/cap_lbl"/>         
     <TextView 
        android:id="@+id/capText"
        style="@style/StyleText"/>         
  </TableRow>

  <TableRow>         
     <TextView 
        style="@style/StyleLabel"
        android:text="@string/code_lbl"/>         
     <TextView 
        android:id="@+id/codeText"
        style="@style/StyleText"/>         
  </TableRow>
  <TableRow>         
     <TextView 
        style="@style/StyleLabel"
        android:text="Linked Users"/>         
     <TextView 
        android:id="@+id/codeText"
        style="@style/StyleText"/>         
  </TableRow>
   <TableRow>         
     <TextView 
        style="@style/StyleLabel"
        android:text="Time Limit"/>         
     <TextView 
        android:id="@+id/timeText"
        style="@style/StyleText"/>         
  </TableRow>
</TableLayout> 
```

数据输出：JAVA

```
import android.app.Activity;
import android.app.AlertDialog;
import android.content.DialogInterface;
import android.content.Intent;
import android.database.Cursor;
import android.os.AsyncTask;
import android.os.Bundle;
import android.view.Menu;
import android.view.MenuInflater;
import android.view.MenuItem;
import android.widget.TextView;

public class ViewCountry extends Activity {

   private long rowID;
   private TextView nameTv;
   private TextView capTv;
   private TextView codeTv; 
   private TextView timeTv; 

   @Override
   public void onCreate(Bundle savedInstanceState) 
   {
      super.onCreate(savedInstanceState);
      setContentView(R.layout.view_country);

      setUpViews();
      Bundle extras = getIntent().getExtras();
      rowID = extras.getLong(CountryList.ROW_ID); 
   }

   private void setUpViews() {
       nameTv = (TextView) findViewById(R.id.nameText);
       capTv = (TextView) findViewById(R.id.capText);
       timeTv = (TextView) findViewById(R.id.timeText);
       codeTv = (TextView) findViewById(R.id.codeText);
   }

   @Override
   protected void onResume()
   {
      super.onResume();
      new LoadContacts().execute(rowID);
   } 

   private class LoadContacts extends AsyncTask<Long, Object, Cursor> 
   {
      DatabaseConnector dbConnector = new DatabaseConnector(ViewCountry.this);

      @Override
      protected Cursor doInBackground(Long... params)
      {
         dbConnector.open();
         return dbConnector.getOneContact(params[0]);
      } 

      @Override
      protected void onPostExecute(Cursor result)
      {
         super.onPostExecute(result);

         result.moveToFirst();
         // get the column index for each data item
         int nameIndex = result.getColumnIndex("name");
         int capIndex = result.getColumnIndex("cap");
         int codeIndex = result.getColumnIndex("code");
         int timeIndex = result.getColumnIndex("time");

         nameTv.setText(result.getString(nameIndex));
         capTv.setText(result.getString(capIndex));
         timeTv.setText(result.getString(timeIndex));
         codeTv.setText(result.getString(codeIndex));

         result.close();
         dbConnector.close();
      }
   } 

   @Override
   public boolean onCreateOptionsMenu(Menu menu) 
   {
      super.onCreateOptionsMenu(menu);
      MenuInflater inflater = getMenuInflater();
      inflater.inflate(R.menu.view_country_menu, menu);
      return true;
   }

   @Override
   public boolean onOptionsItemSelected(MenuItem item) 
   {
      switch (item.getItemId())
      {
         case R.id.editItem:
            Intent addEditContact =
               new Intent(this, AddEditCountry.class);

            addEditContact.putExtra(CountryList.ROW_ID, rowID);
            addEditContact.putExtra("name", nameTv.getText());
            addEditContact.putExtra("cap", capTv.getText());
            addEditContact.putExtra("time", timeTv.getText());
            addEditContact.putExtra("code", codeTv.getText());
            startActivity(addEditContact); 
            return true;

         case R.id.deleteItem:
            deleteContact();
            return true;

         default:
            return super.onOptionsItemSelected(item);
      } 
   }

   private void deleteContact()
   {

      AlertDialog.Builder alert = new AlertDialog.Builder(ViewCountry.this);

      alert.setTitle(R.string.confirmTitle); 
      alert.setMessage(R.string.confirmMessage); 

      alert.setPositiveButton(R.string.delete_btn,
         new DialogInterface.OnClickListener()
         {
            public void onClick(DialogInterface dialog, int button)
            {
               final DatabaseConnector dbConnector = 
                  new DatabaseConnector(ViewCountry.this);

               AsyncTask<Long, Object, Object> deleteTask =
                  new AsyncTask<Long, Object, Object>()
                  {
                     @Override
                     protected Object doInBackground(Long... params)
                     {
                        dbConnector.deleteContact(params[0]); 
                        return null;
                     } 

                     @Override
                     protected void onPostExecute(Object result)
                     {
                        finish(); 
                     }
                  };

               deleteTask.execute(new Long[] { rowID });               
            }
         }
      );

      alert.setNegativeButton(R.string.cancel_btn, null).show();
   }
} 
```

数据库连接器 JAVA：

```
import android.content.ContentValues;
import android.content.Context;
import android.database.Cursor;
import android.database.SQLException;
import android.database.sqlite.SQLiteDatabase;

public class DatabaseConnector {

private static final String DB_NAME = "WorldCountries";
private SQLiteDatabase database;
private DatabaseOpenHelper dbOpenHelper;

public DatabaseConnector(Context context) {
    dbOpenHelper = new DatabaseOpenHelper(context, DB_NAME, null, 1);
}

   public void open() throws SQLException 
   {
      //open database in reading/writing mode
      database = dbOpenHelper.getWritableDatabase();
   } 

   public void close() 
   {
      if (database != null)
         database.close();
   }       

   public void insertContact(String name, String cap, String code, String time) 
           {
              ContentValues newCon = new ContentValues();
              newCon.put("name", name);
              newCon.put("cap", cap);
              newCon.put("time", time);
              newCon.put("code", code);

              open();
              database.insert("country", null, newCon);
              close();
           }

           public void updateContact(long id, String name, String cap,String code, String time) 
           {
              ContentValues editCon = new ContentValues();
              editCon.put("name", name);
              editCon.put("cap", cap);
              editCon.put("time", time);
              editCon.put("code", code);

              open();
              database.update("country", editCon, "_id=" + id, null);
              close();
           }

           public Cursor getAllContacts() 
           {
              return database.query("country", new String[] {"_id", "name"}, 
                 null, null, null, null, "name");
           }

           public Cursor getOneContact(long id) 
           {
              return database.query("country", null, "_id=" + id, null, null, null, null);
           }

           public void deleteContact(long id) 
           {
              open(); 
              database.delete("country", "_id=" + id, null);
              close();
           }
} 
```

数据库助手 Java：

```
import android.content.Context;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteDatabase.CursorFactory;
import android.database.sqlite.SQLiteOpenHelper;

public class DatabaseOpenHelper extends SQLiteOpenHelper {

public DatabaseOpenHelper(Context context, String name,
        CursorFactory factory, int version) {
    super(context, name, factory, version);
}

@Override
public void onCreate(SQLiteDatabase db) {
    String createQuery = "CREATE TABLE country (_id integer primary key autoincrement,name, cap, code, time);";                 
    db.execSQL(createQuery);        
}

@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {

}

} 
```

日志数据：

```
03-21 17:17:24.276: I/Adreno200-EGLSUB(8655): <ConfigWindowMatch:2165>: Format RGBA_8888.
03-21 17:17:24.276: D/memalloc(8655): ion: Mapped buffer base:0x5ca41000 size:614400 offset:0 fd:57
03-21 17:17:24.276: E/(8655): Can't open file for reading
03-21 17:17:24.276: E/(8655): Can't open file for reading
03-21 17:17:24.376: D/memalloc(8655): ion: Mapped buffer base:0x5d12e000 size:614400 offset:0 fd:61
03-21 17:17:26.188: D/Activity(8655): Activity.onPause(), editTextTapSensorList size: 0
03-21 17:17:26.268: I/Adreno200-EGLSUB(8655): <ConfigWindowMatch:2165>: Format  RGBA_8888.
03-21 17:17:26.278: D/memalloc(8655): ion: Mapped buffer base:0x5d4ce000 size:614400  offset:0 fd:68
03-21 17:17:26.318: D/memalloc(8655): ion: Mapped buffer base:0x5d937000 size:614400 offset:0 fd:72
03-21 17:17:26.328: D/memalloc(8655): ion: Unmapping buffer  base:0x5ca41000 size:614400
03-21 17:17:26.328: D/memalloc(8655): ion: Unmapping buffer  base:0x5d12e000 size:614400
03-21 17:17:26.468: D/Activity(8655): Activity.onPause(), editTextTapSensorList size: 0
03-21 17:17:26.549: D/memalloc(8655): ion: Mapped buffer base:0x5c929000 size:614400 offset:0 fd:54
03-21 17:17:26.619: W/IInputConnectionWrapper(8655): getExtractedText on inactive  InputConnection
03-21 17:17:26.639: W/IInputConnectionWrapper(8655): getExtractedText on inactive InputConnection
03-21 17:17:48.322: D/Activity(8655): Activity.onPause(), editTextTapSensorList size: 0
03-21 17:17:48.342: W/dalvikvm(8655): threadid=1: thread exiting with uncaught exception (group=0x410889d8)
03-21 17:17:48.352: E/AndroidRuntime(8655): FATAL EXCEPTION: main
03-21 17:17:48.352: E/AndroidRuntime(8655): java.lang.Error: Unresolved compilation  problems: 
03-21 17:17:48.352: E/AndroidRuntime(8655):     TimePicker cannot be resolved to a type
03-21 17:17:48.352: E/AndroidRuntime(8655):     TimePicker cannot be resolved to a type
03-21 17:17:48.352: E/AndroidRuntime(8655):     TimePicker cannot be resolved to a type
03-21 17:17:48.352: E/AndroidRuntime(8655):     timeEdit cannot be resolved or is not a field
03-21 17:17:48.352: E/AndroidRuntime(8655):     TimePicker cannot be resolved to a  type
03-21 17:17:48.352: E/AndroidRuntime(8655):     TimePicker cannot be resolved to a  type
03-21 17:17:48.352: E/AndroidRuntime(8655):     TimePicker cannot be resolved to a  type
03-21 17:17:48.352: E/AndroidRuntime(8655):     at  com.nfc.linkingmanager.AddEditCountry.<init>(AddEditCountry.java:19)
03-21 17:17:48.352: E/AndroidRuntime(8655):     at java.lang.Class.newInstanceImpl(Native Method)
03-21 17:17:48.352: E/AndroidRuntime(8655):     at  java.lang.Class.newInstance(Class.java:1319)
03-21 17:17:48.352: E/AndroidRuntime(8655):     at  android.app.Instrumentation.newActivity(Instrumentation.java:1025)
03-21 17:17:48.352: E/AndroidRuntime(8655):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1875)
03-21 17:17:48.352: E/AndroidRuntime(8655):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1985)
03-21 17:17:48.352: E/AndroidRuntime(8655):     at android.app.ActivityThread.access$600(ActivityThread.java:127)
03-21 17:17:48.352: E/AndroidRuntime(8655):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1151)
03-21 17:17:48.352: E/AndroidRuntime(8655):     at android.os.Handler.dispatchMessage(Handler.java:99)
03-21 17:17:48.352: E/AndroidRuntime(8655):     at android.os.Looper.loop(Looper.java:137)
03-21 17:17:48.352: E/AndroidRuntime(8655):     at android.app.ActivityThread.main(ActivityThread.java:4477)
03-21 17:17:48.352: E/AndroidRuntime(8655):     at  java.lang.reflect.Method.invokeNative(Native Method)
03-21 17:17:48.352: E/AndroidRuntime(8655):     at java.lang.reflect.Method.invoke(Method.java:511)
03-21 17:17:48.352: E/AndroidRuntime(8655):     at  com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:788)
03-21 17:17:48.352: E/AndroidRuntime(8655):     at   com.android.internal.os.ZygoteInit.main(ZygoteInit.java:555)
03-21 17:17:48.352: E/AndroidRuntime(8655):     at  dalvik.system.NativeStart.main(Native Method) 
```

问题：

```
 Description Resource    Path    Location    Type
user3SettingsSave cannot be resolved or is not a field  User3Settings.java  /NFC Linking Manager/src/com/nfc/linkingmanager line 35 Java Problem
The import android.content.Context is never used    AppActivity.java    /NFC Linking Manager/src/com/nfc/linkingmanager line 5  Java Problem
The import android.view.View.OnClickListener is never used  AppActivity.java    /NFC Linking Manager/src/com/nfc/linkingmanager line 13 Java Problem
The value of the field AppActivity.button1 is not used  AppActivity.java    /NFC Linking Manager/src/com/nfc/linkingmanager line 18 Java Problem
The value of the field AppActivity.button2 is not used  AppActivity.java    /NFC Linking Manager/src/com/nfc/linkingmanager line 18 Java Problem
user3Tap cannot be resolved to a type   User3Settings.java  /NFC Linking Manager/src/com/nfc/linkingmanager line 40 Java Problem
The value of the field AppActivity.button3 is not used  AppActivity.java    /NFC Linking Manager/src/com/nfc/linkingmanager line 18 Java Problem
TimePicker cannot be resolved to a type AddEditCountry.java /NFC Linking Manager/src/com/nfc/linkingmanager line 19 Java Problem
TimePicker cannot be resolved to a type AddEditCountry.java /NFC Linking Manager/src/com/nfc/linkingmanager line 30 Java Problem
TimePicker cannot be resolved to a type AddEditCountry.java /NFC Linking Manager/src/com/nfc/linkingmanager line 30 Java Problem
The method deactivate() from the type Cursor is deprecated  CountryList.java    /NFC Linking Manager/src/com/nfc/linkingmanager line 52 Java Problem
The constructor SimpleCursorAdapter(Context, int, Cursor, String[], int[]) is deprecated    CountryList.java    /NFC Linking Manager/src/com/nfc/linkingmanager line 33 Java Problem
The import android.app.AlertDialog is never used    User1.java  /NFC Linking Manager/src/com/nfc/linkingmanager line 4  Java Problem
The import android.view.View.OnClickListener is never used  User1.java  /NFC Linking Manager/src/com/nfc/linkingmanager line 12 Java Problem
The method deactivate() from the type Cursor is deprecated  NewCore.java    /NFC Linking Manager/src/com/nfc/linkingmanager line 54 Java Problem
The constructor SimpleCursorAdapter(Context, int, Cursor, String[], int[]) is deprecated    NewCore.java    /NFC Linking Manager/src/com/nfc/linkingmanager line 35 Java Problem
The import android.content.DialogInterface is never used    User1.java  /NFC Linking Manager/src/com/nfc/linkingmanager line 6  Java Problem
The import android.widget.Button is never used  Link.java   /NFC Linking Manager/src/com/nfc/linkingmanager line 5  Java Problem
The import android.content.Intent is never used Link.java   /NFC Linking Manager/src/com/nfc/linkingmanager line 6  Java Problem
The import android.view.View.OnClickListener is never used  User1Settings.java  /NFC Linking Manager/src/com/nfc/linkingmanager line 10 Java Problem
The import android.view.View is never used  Link.java   /NFC Linking Manager/src/com/nfc/linkingmanager line 7  Java Problem
The import android.view.View.OnClickListener is never used  Link.java   /NFC Linking Manager/src/com/nfc/linkingmanager line 8  Java Problem
TimePicker cannot be resolved to a type AddEditCountry.java /NFC Linking Manager/src/com/nfc/linkingmanager line 99 Java Problem
TimePicker cannot be resolved to a type AddEditCountry.java /NFC Linking Manager/src/com/nfc/linkingmanager line 91 Java Problem
TimePicker cannot be resolved to a type AddEditCountry.java /NFC Linking Manager/src/com/nfc/linkingmanager line 41 Java Problem
timeEdit cannot be resolved or is not a field   AddEditCountry.java /NFC Linking Manager/src/com/nfc/linkingmanager line 30 Java Problem
The method showDialog(int) from the type Activity is deprecated User2Settings.java   /NFC Linking Manager/src/com/nfc/linkingmanager    line 37 Java Problem 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T20:21:57.370

timeEt 字段应该是 TimePicker。您收到 ClassCastException 是因为在您的活动中您将其声明为 EditText。

代替

```
EditText timeEt 
```

和

```
TimePicker timeEt 
```

# django - 如何设置 from_email var

> ID：15557219
> 
> 赞同：3
> 
> 时间：2013-03-21T20:17:48.260
> 
> 标签：django, amazon-ses

我正在尝试使用亚马逊的 SES 和 Django-ses 应用程序来发送电子邮件。它在本地工作，但在服务器上失败，返回 SESAddressNotVerifiedError。

检查跟踪发现它失败了，因为 from_email 变量设置为 webmaster@localhost。我到处寻找我在 AWS-SES 中将这个变量设置为我经过验证的电子邮件地址的位置。

有谁知道我应该如何将 from_email var 从 webmaster@localhost 更改为 myemail@myemail.com？

谢谢，

安东尼

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-22T13:23:20.570

所以事实证明我需要改变的是这个设置：

DEFAULT_FROM_EMAIL = '我的域 < myEmail@myEmail.com >'

对于使用[Django-Registrations](https://bitbucket.org/ubernostrum/django-registration/)的每个人来说，这是默认设置，但是如果你想更改它，它的引用在 registration/models.py 的第 264 行（最后一行）中，除非它中断，否则我可能会这样做，在这种情况下，我会回来报告的。

[Django default_from_email 名称](https://stackoverflow.com/questions/3744680/django-default-from-email-name)

感谢[Ashok](https://stackoverflow.com/users/223892/ashok)的解决方案

# c - 尝试使用文件中的信息在 C 中创建条形图

> ID：15557220
> 
> 赞同：0
> 
> 时间：2013-03-21T20:17:48.623
> 
> 标签：c, graph, codeblocks

我正在尝试使用基本的 c 构造和循环创建一个程序，该程序从文件中读取数学测验分数并将分数打印为星形（如条形图）。该程序将尝试读取文件并直观地描绘学生在不同数学领域（加法、减法、乘法和除法）中的表现。

输入文件如下所示：

```
2 
Bobby 
6 10 
70 80
50 60 
4 5 
Joel
7 12
20 25
4 5
3 10 
```

第一行代表文件中的学生总数。在此之后，每个学生将有 5 行个人数据。这些行中的第一行是学生姓名，接下来的 4 行是各个数学领域的分数（6 分中的 5 分，80 分中的 70 分等）

我试图接收类似于此示例的输出：

```
Bobby
+: ******** 
-: ****** 
*: ***** 
/: **** 
Joel
+: **** 
-: ******** 
*: *** 
/: ******* 
```

我知道我需要使用循环和 ifp（内部文件指针）来实现这一点，但我不太确定如何实现它们来读取程序的各个行，因为这是我第一次在 C 中使用输入文件。

** 第四次编辑 - 目标完成！

```
#include<stdio.h>
#include<stdlib.h>
#include<string.h>

//int main
int main() {

    FILE * ifp;
    ifp = fopen("input.txt", "r");

    FILE * ofp;
    ofp = fopen("output.txt", "w");

    int students = 0, i, j;
    int sum = 0;
    int perc;
    int score1,score2;
    char name [10];

    //read the first line for # of students
    fscanf(ifp, "%d", &students);

    //Loop for both students
    for (i=0; i<students; i++) {

                fscanf(ifp, "%s", &name);
                fprintf(ofp, "%s:", name);

                fscanf(ifp, "%d %d", &score1, &score2);
                perc = (10 * score1/score2);
                fprintf(ofp, "\n +:");
                for(j=0; j<perc; j++){
                    fprintf(ofp, "*");
                }
                fscanf(ifp, "%d %d", &score1, &score2);
                perc = (10 * score1/score2);
                fprintf(ofp, "\n -:");
                for(j=0; j<perc; j++){
                    fprintf(ofp, "*");
                }

                fscanf(ifp, "%d %d", &score1, &score2);
                perc = (10 * score1/score2);
                fprintf(ofp, "\n *:");
                for(j=0; j<perc; j++){
                    fprintf(ofp, "*");
                }
                fscanf(ifp, "%d %d", &score1, &score2);
                perc = (10 * score1/score2);
                fprintf(ofp, "\n /:");
                for(j=0; j<perc; j++){
                    fprintf(ofp, "*");
                }
                    fprintf(ofp, "\n");
    }
    fclose(ifp);
    fclose(ofp);

return 0;
} 
```

我之前的图表错误似乎是我的一个简单的操作顺序错误。感谢您的所有帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T01:20:29.713

如果您可以指望您的输入文件始终按照您描述的方式进行格式化，那么您不必担心格式检查（尽管它始终是一个好主意）。仍然在适当的地方检查错误（文件操作、fgets 等）。我认为您不需要使用 switch case 语句。for 循环就足够了，因为您可以完成处理一个学生记录所需的步骤，然后让 for 循环为任何剩余的学生重复这些步骤。我会做以下事情：

```
/* declare variables */
int num_students    // the number of students on the first line
char name[50], line[100]    // student name, a line from the input file
int addition_score, addition_max    // student's addition score, max addition score possible
int subtraction_score, subtraction max
/* ints for multiply and divide scores as well */
float percent   // used for _score / _max (re-use for + - * and /)
FILE input_file, output_file

// open input file for reading
// open output file for writing
// fgets line from input file
// sscanf to extract num_students
// for(c=0; c<num_students; ++c) {

    //fgets name

    //fgets the line containing the addition scores
    //sscanf line for addition_score and addition_max
    //same two commands for -, *, and /

    //percent = (float)addition_score / addition_max 
    //output the student's name to output file
    //figure out how to represent the float in stars (I'll leave this up to you)
    //output a line containing "+:" and your stars to the output file

    //repeat that procedure for -, *, and /
   } // end for loop
// close input file
// close output file
return 0; 
```

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T20:37:30.453

好吧，我会做什么，在用数学找到分数的平均值之后，我会创建一个 for 循环，并将循环变量（i 或 j 或其他）更改为平均值，并在 for 循环中打印星号。

```
//Here is an example of a for loop that loops 20 times
    for ( n=0; n < 20; n++ )
{
   // whatever here...
} 
```

那有意义吗？

# java - SAX 查找结束标记

> ID：15557225
> 
> 赞同：0
> 
> 时间：2013-03-21T20:18:22.617
> 
> 标签：java, xml, parsing, xml-parsing, sax

使用默认处理程序类查找相应的 XML 标记是否可行？例如...

```
<Object class="my class">
  <Property>
    <Value>1</Value>
  </Property>
</Object>
<Object class="my next class">
  <Property>
    <Value>1</Value>
  </Property>
</Object> 
```

我想使用 startElement() 和 endElement() 方法，但无法从高层次上弄清楚。我能想到的就是使用计数器，想看看是否有人听说过更简单的方法。我想根据它们的启动和关闭时间将这两个 Object 类拆分为 2 个单独的字符串。有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T20:24:01.327

您需要继承默认处理程序类（无论如何您都需要在`startElement`and期间进行任何处理`endElement`）。当`startElement`为`Object`标签调用时，创建一个对象并将对它的引用存储在处理程序的实例变量中。调用时`endElement`，将对象保存在某处并将引用设置为`null`. 同时，当您收到其他`startElement`和`endElement`事件（对于`Property`and`Value`标签）时，对引用的对象进行操作。

重复第二个对象。最后，您将保存对象的两个不同实例。

# php - 从 Magento 集合中提取数据。我将它分解为一个数组，但试图调用它会破坏页面

> ID：15557226
> 
> 赞同：0
> 
> 时间：2013-03-21T20:18:25.847
> 
> 标签：php, arrays, magento

我正在编写一个脚本，该脚本将在选择仓库取货（插件选项）后为 Magento 用户提供指导。我已经建立了其余的。我只是缺少一个我需要在success.phtml（仓库ID）上调用的变量。该变量通过 stock_id 与订单相关联。

**这会产生一个数组：**我成功地使用 $order 来提取脚本所需的其余信息。

```
$order = Mage::getModel('sales/order')->loadByIncrementId($this->getOrderId());
$items = $order->getItemsCollection(); 
```

**此数组的简化版本：**可以使用 print_r($items->getData()); 打印

```
Array
(
    [0] => Array
        (
            [item_id] => 223
            [stock_id] => 15
            [base_discount_refunded] => 
        )

) 
```

当我尝试提取我想要的数据时：

```
echo $items[0]['stock_id']; //the page breaks here and stops the page abruptly... 
```

分页符和应该发生的任何逻辑都将被忽略。什么会导致这个？我尝试了在其他类似数组中调用的制动变量。我的测试都没有复制分页。为什么这个特定的页面会破坏页面而不是返回 15？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T20:40:13.913

您可以尝试在页面中使用 var_export 而不是 print_r 枚举 $items ，这样您就可以看到它们真实存在的样子：

```
foreach ($items as $item)
{
   var_export($item->debug());
} 
```

这将为您提供结果。Items 是一个填充了更多对象的对象，而不是一个数组，应该这样对待。尝试使用

```
$itemId = $item->getStockId(); 
```

或者

```
$itemId = $item->getData('stock_id'); 
```

两者都完成同样的事情。

仅供参考.. debug() 函数显示相关信息，并且它内置于 magento 中，可与所有 mage 对象一起使用。

编辑：试试这个：

```
echo $items[0]->getData('stock_id'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T21:02:04.210

嗯，`$items`不是一个数组，它是一个对象`Mage_Sales_Model_Resource_Order_Item_Collection`。这应该有效：

```
$data = $items->getData();
echo $data[0]['stock_id']; 
```

但是使用集合的枚举接口，就像已经提到的那样，会更干净。看看[http://alanstorm.com/magento_collections](http://alanstorm.com/magento_collections)。

您还应该检查您的 PHP 配置，以获取有关此类错误的更多信息。看看[http://alanstorm.com/magento_exception_handling_developer_mode](http://alanstorm.com/magento_exception_handling_developer_mode)。

# html - XMLhttp 请求未加载

> ID：15557228
> 
> 赞同：0
> 
> 时间：2013-03-21T20:18:26.600
> 
> 标签：html, xml, xmlhttprequest

您好，我是 XML HTTP 请求的新手。我正在尝试加载 XML 文件的代码，但没有得到预期的结果。

```
code is :

`<script>
            if (window.XMLHttpRequest)
        {
            var xhttp=new XMLHttpRequest();
        }
        var url="../src/employee.xml";
        xhttp.open('GET',url,true);
        xhttp.send();
        xmlDoc=xhttp.responseXML;
        document.write("XML document loaded into an XML DOM Object.");
</script>
</body>
</html>` 
```

employee 是 src 文件夹中的一个 xml 文件， `<?xml version="1.0" encoding="utf-8"?> <employee> <branch="cse"> <name>Rahul</name> <age>21</age> </branch> </employee>`
提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T16:08:09.257

```
var xmlhttp=new XMLHttpRequest();
xmlhttp.open("GET","/css/normalize.css?ThereIsNoSpring",false);
xmlhttp.send(); 
```

我认为问题在于您将其设置为异步操作，然后需要您指定回调。

打开（方法，URL，**异步**，用户名，密码）

*如果在异步请求的第三个参数设置为 true 的情况下调用 XMLHttpRequest 对象的 open 方法，则将为以下每个更改 XMLHttpRequest 对象的 readyState 属性的操作自动调用 onreadystatechange 事件侦听器。*

因此，只需将第三个参数设置为 false，如果您需要它是异步的，则将其设置为 true 并指定回调，如下所示：

```
 xmlhttp.onreadystatechange = function() {
    if (xmlhttp.readyState === 4){
        alert(xmlhttp.responseXML);
    } 
```

# php - 变量在 PHP 中不可访问

> ID：15557229
> 
> 赞同：1
> 
> 时间：2013-03-21T20:18:29.650
> 
> 标签：php, variables

我有一个名为 的文件`file_with_data_from_server.php`，它`$_POST['data]`从一个`AJAX`电话中接收。我设法制作了一个新数组来包含来自服务器的数据。然后`file_with_data_from_server.php`将其包含在另一个`.php`文件中。自然地，`file_with_data_from_server.php`可以在包含它的文件上访问所有存在的变量，但在我的情况下，我无法访问其值取自`json_decoded`数据的变量。这是上的代码`file_with_data_from_server.php`，

```
 $data_for_reports = $_POST['data']; // data from server

        $rrow = json_decode($data_for_reports);
        $dates_for_reports = array();
        foreach($rrow as $rr){
            $dates_for_reports[] = $rr->time_period;
        }
        $current_date_with_data = end($dates_for_reports);      // this contains data like '201301' 
```

在我`.php`包含的文件中`file_with_data_from_server.php`，我有这个代码，

```
 include('file_with_data_from_server.php');
        echo '<pre>';
            print_r('test'.$current_date_with_data);
        echo '</pre>'; 
```

我正在尝试打印`$current_date_with_data`变量的值，但它什么也没显示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T20:39:28.437

据我所知，您将包含`file_with_data_from_server.php`在另一个 PHP 脚本（以下称为`other.php`）中并发布到`file_with_data_from_server.php`，期望变量打印在`other.php`. 这是行不通的，因为`other.php`实际上根本没有调用。

考虑一下：

**一个.php**

```
$myVar = $_POST; 
```

**b.php**

```
include('a.php');
var_dump($myVar); 
```

如果你 POST 到`a.php`-`b.php`永远不会被调用！它`include`和`var_dump`在这种情况下永远不会被执行，因为只有`a.php`被调用过。

但是，根据上述情况，如果您要发布到`b.php`（包括`a.php`），这将按您的预期工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T20:40:29.717

`print_r()`通话输出吗`"test"`？它可能`$current_date_with_data`包含 a`null`或不字符串化任何东西的东西。

这是检查您定义的每个变量的简单方法：

```
echo "<pre>";
echo HtmlSpecialChars(print_r($GLOBALS, true));
echo "</pre>"; 
```

**更新**

听起来juco找到了您的解决方案。您实际上并未将数据发布到您的第二个 php 文件中。数据将仅`file_with_data_from_server.php`在初始帖子中可用，而不是后续请求。

如果您需要在一个请求中发送数据并稍后在另一个请求中访问它，您需要将数据存储在某个地方，例如会话变量或数据库中。

PHP 中的每个请求都是新的，并且不包含来自先前请求的数据。这被称为“无状态”。谷歌有很多解释网络应用程序无状态的结果。

[http://www.phpfreaks.com/tutorial/sessions-and-cookies-adding-state-to-a-stateless-protocol](http://www.phpfreaks.com/tutorial/sessions-and-cookies-adding-state-to-a-stateless-protocol)

# vb.net - 使用 GDI+ 生成位图的更快方法

> ID：15557230
> 
> 赞同：1
> 
> 时间：2013-03-21T20:18:36.343
> 
> 标签：vb.net, gdi+

我正在使用 GDI+ 类在我正在尝试编程的游戏的表单上绘制一些位图。我想加快我的游戏速度，所以我想防止多次绘制一个像素。

例如：

我将在 (10,10) 处绘制一个 100x100 的图像，在 (20,20) 处绘制另一个 100x100 的图像。

我想防止在旧图像的区域（从（10,10）到（110,100））绘制，并且只绘制空白像素（从（110,110）到（120,120））。

我正在尝试加快绘图事件，就好像有一个背景和几个图像一样。然后我想绘制背景，其余没有着色的像素。

我正在使用 VB.NET 2005

帮助图像：- [http://www.mediafire.com/view/?myfiles#82i5t1w99v7mdf1](http://www.mediafire.com/view/?myfiles#82i5t1w99v7mdf1) [http://www.mediafire.com/view/?myfiles#p7d4fpdcoap51nd](http://www.mediafire.com/view/?myfiles#p7d4fpdcoap51nd)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T20:22:02.440

您可以使用[Graphics.DrawImage](http://msdn.microsoft.com/en-us/library/ms142040.aspx)重载来绘制图像，它允许您为`Rectangle`要绘制的图像部分指定 a。这将允许您每次仅绘制图像的 10x10 像素部分。

# java - 图像加载实际上是如何工作的？

> ID：15557233
> 
> 赞同：0
> 
> 时间：2013-03-21T20:18:39.270
> 
> 标签：java, netbeans

我正在使用 NetBeans 并将图像加载到我的程序中，到目前为止，我一直将所有图像存储在 src/images/ 中，这很好。但是我想把我所有的包名都大写，所以我把它们都重构了，所以它们都是大写的。所以“图像”变成了“图像”。我更改了所有文件路径字符串以反映这一点，但是当我下次运行我的程序时，没有任何图像会加载。我在项目的构建部分中找到了另一个名为 images 的文件夹，其中包含一些我需要的图像，因此我将 src 图像文件夹中的所有内容复制到 /build/classes/images 文件夹中，然后奇迹般地它又开始工作了。到目前为止，我一直将所有图像放在 src/images/ 部分。

**那么实际发生了什么？我是否需要开始将程序所需的所有新图像保存在 /build/classes/images 或旧位置？图像加载代码现在决定在一个完全不同的地方查看是怎么回事？为什么有两个版本的图像文件夹？这是 NetBeans 生成的一些奇怪的东西吗？**

```
ImageIO.read(myClass.class.getResource("/images/myClassImg.png"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T20:23:19.397

资源文件可以与 jar 中的所有 .class 文件一起打包。然后它不是文件系统上的文件。因此，路径名区分大小写并使用“/”作为路径分隔符。通常，资源 URL 区分大小写。

上面应该是“/Images/myClassImg.png”。

然而，使用大写的包名与非常普遍的约定背道而驰。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T13:49:59.490

该`GetClass()`功能应该可以工作。您也可以使用`getAbsolutePath()`.

```
Image I = ImageIO.read(getClass().getResource("/images/myClassImg.png")); 
```

# google-maps - 绑定到标记的圆圈 - 需要：可调整大小，但不可拖动

> ID：15557235
> 
> 赞同：0
> 
> 时间：2013-03-21T20:18:42.797
> 
> 标签：google-maps, google-maps-markers

希望是一个简单的...

我的地图上有一个 myMarkers[] 的集合。我可以成功地将 Circle 绑定到当前/单击的标记。使用“可编辑：真”，圆圈可以根据需要重新调整大小，但是当圆圈被拖动时，它也会将我的制作者拖出位置（嗯，呃，它绑定到标记） - 不是所需的功能。

问题：

1.  设置“可编辑：真”和“可拖动：假” - 仍然可以拖动。这样的组合可能吗？

2.  我可以忍受一个可拖动的圆圈，如果我可以将它与当前标记解除绑定，那将是理想的。这可能吗？也许在与当前标记相同的位置创建一个虚拟标记并绑定到那个？（不可见的图标，或在当前标记后面）。

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T12:42:47.477

事实证明，使用虚拟标记很容易！

 ````
 function addCircle() {

      center: new google.maps.LatLng(mapMarkers[currentMarker])
      postion: new google.maps.LatLng(mapMarkers[currentMarker])
      myPosition = mapMarkers[currentMarker].getPosition();
      map.panTo(myPosition);
      map.setZoom(9);

      circle = new google.maps.Circle({
           map: map,
           editable: true,
           fillColor: '#ffffff',
           fillOpacity: 0.3,
           strokeColor: '#ff0000',
           strokeOpacity: 1.0,
           strokeWeight: 1.5,
           radius: 80467.2         // 50 MILES in meters
      });

      var dummyMarker = new google.maps.Marker({
          position: myPosition,
          visible: false,
          map: map,
      });

      circle.bindTo('center', dummyMarker, 'position');

   } 
````

# jquery - CarouFredSel：显示隐藏 div 问题

> ID：15557236
> 
> 赞同：3
> 
> 时间：2013-03-21T20:18:45.687
> 
> 标签：jquery, html, hide, show, caroufredsel

我正在尝试使用 CarouFredSel 在 div 中显示不同的图像，这些图像需要在开始时隐藏并在稍后单击某个按钮时可见。但它没有像我预期的那样工作。但是当我在开始时将 div 设置为可见时，我可以毫无问题地隐藏和显示这个 div。所以我正在寻找是否有人可以帮助我解决隐藏和显示 CarouFredSel div 的问题。

## CSS：

```
.wrapper {
    background-color: white;
    width: 92%;
    margin: 10px auto;
    padding: 50px;
    box-shadow: 0 0 5px #999;
    display:none;
}
.list_carousel {
    background-color: #ccc;
    margin: 0 0 30px 30px;
    width: 95%;
}
.list_carousel ul {
    margin: 0;
    padding: 0;
    list-style: none;
    display: block;
}
.list_carousel li {
    font-size: 40px;
    color: #999;
    text-align: center;
    width: 140px;
    height: 42px;
    padding: 0;
    margin-left: 3px;
    margin-right: 3px;
    margin-top: 6px;
    margin-bottom: 6px;
    display: block;
    float: left;
}
.clearfix {
    float: none;
    clear: both;
}
.prev {
    float: left;
    margin-left: 10px;
}
.next {
    float: right;
    margin-right: 10px;
} 
```

## 显示 CarouFredSel 的 html 是这样的：

```
<body>
    <div class="wrapper">
        <div class="list_carousel">
            <ul id="foo2">
                <li>
                    <img src="images/itcells.png" s alt="" />
                </li>
                <li>
                    <img src="images/itcells.png" alt="" />
                </li>
                <li>
                    <img src="images/itcells.png" alt="" />
                </li>
                <li>
                    <img src="images/itcells.png" alt="" />
                </li>
                <li>
                    <img src="images/itcells.png" alt="" />
                </li>
            </ul>
            <div class="clearfix"></div>    <a id="prev2" class="prev" href="#">&lt;</a>
    <a id="next2" class="next"
            href="#">&gt;</a>

        </div>
        <br />
    </div>
    <input type="button" id="hide" />
    <input type="button" id="show" />
</body> 
```

## jquery调用如下：

```
$(document).ready(function () {    
    $('#show').click(function () {    
        $(".wrapper").animate({
            "opacity": "show"
        }, 1000);    
    });
    $('#hide').click(function () {    
        $(".wrapper").animate({
            "opacity": "hide"
        }, 1000);    
    });    
});
$(function () {    
    //Scrolled by user interaction
    $('#foo2').carouFredSel({
        auto: false,
        prev: '#prev2',
        next: '#next2',
        pagination: "#pager2",
        mousewheel: true,
        swipe: {
            onMouse: true,
            onTouch: true
        }
    });    
}); 
```

请帮我显示和隐藏 div。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T11:57:45.453

为了完成这项工作，我改变了一些东西（使用工作 jsFiddle 示例，教程后的链接）：

1.  删除未使用的 DIV
2.  更新和清理 CSS 样式
3.  改进的轮播设置：项目、可见和滚动
4.  在函数中转换 Carousel
5.  为按钮添加了值
6.  为视觉示例添加了 Placehold.it 图像
7.  更新了显示和隐藏功能以显示轮播

这就是结果。

## HTML

```
<div class="wrapper">         
      <ul id="foo2">
           <li><img src="http://placehold.it/100x100"/></li>               
           <li><img src="http://placehold.it/100x100"/></li>  
           <li><img src="http://placehold.it/100x100"/></li>  
           <li><img src="http://placehold.it/100x100"/></li>  
           <li><img src="http://placehold.it/100x100"/></li>  
           <li><img src="http://placehold.it/100x100"/></li>  
           <li><img src="http://placehold.it/100x100"/></li>  
           <li><img src="http://placehold.it/100x100"/></li>  
       </ul>
       <a id="prev2" class="prev" href="#">&lt;</a>
       <a id="next2" class="next" href="#">&gt;</a>
 </div>         
 <input type="button" id="hide" value="hide" />
 <input type="button" id="show" value="show" /> 
```

# CSS

```
.wrapper {
    height: 100px;
    position: relative;
    background - color: white;
    margin: 10px auto;
    padding: 50px;
    box - shadow: 0 0 5px #999;display:none;}
.clearfix {float: none;clear: both;}
.prev {position: absolute;z-index: 9;top: 50%;left:10px;}
.next {position: absolute;z-index: 9;top: 50%;right:10px;}
# foo2 {margin: 0;padding: 0;}
#foo2 li {
        display: block;
        float: left;
        height: 100px;
        text - align: center;
        width: 100px;
        color: #8cabbf;display: block;}
# foo2 li img {border: 1px solid#dfe9ee;} 
```

## JAVASCRIPT

```
$(document).ready(function () {
    $('#show').click(function () {
        $(".wrapper").animate({
            "opacity": "show"
        }, 1000);
        generateCarousel();
    });
    $('#hide').click(function () {
        $(".wrapper").animate({
            "opacity": "hide"
        }, 1000);
    });

    function generateCarousel() {
        //  Scrolled by user interaction
        $('#foo2').carouFredSel({
            auto: false,
            responsive: false,
            items: {
                visible: 3,
                width: 100
            },
            width: 600,
            prev: '#prev2',
            next: '#next2',
            pagination: "#pager2",
            swipe: {
                onMouse: true,
                onTouch: true
            }
        });
    }
}); 
```

**`[Here is a working demo.](http://jsfiddle.net/ignaciocorreia/aDG4S/)`**

# java - 试图创建一个充满 JButtons 的框架，但我的 JButtons 不会加载

> ID：15557239
> 
> 赞同：0
> 
> 时间：2013-03-21T20:18:55.077
> 
> 标签：java, arrays, swing, chess

我正在为一个项目制作国际象棋游戏，我想做的第一件事是创建一个框架，然后用 64 个 JButton（组织为 8x8）填充它，每个 JButton 将充当棋盘上的方格。我对 Java 还是很陌生，但我仍然认为我不应该得到我得到的错误，它不是在不久前发生的，但是当框架之前确实加载时，没有一个 JButtons做过。

在使用 3D 数组向我的 JButtons 添加坐标时，我似乎遇到了问题，我不断收到错误消息“方法 add(ChessSquare) 未针对 ChessBoard 类型定义”，此外 Eclipse 一直在为我提供帮助我的错误，但我认为接受它们可能会使事情变得更糟。

另一个问题是当我尝试从 ChessSquare 中的 3D 数组中保存正方形的坐标时。

我目前有 2 个课程，ChessBoard 和 ChessSquare，我正在尝试让 ChessBoard 使用 ChessSquare 来制作棋子。

对不起，如果我不是很清楚，我非常累。

提前感谢您的帮助。

这是我的代码：

木板：

```
import java.awt.GridLayout;
import java.io.IOException;
import javax.swing.JFrame;
import Logic.ChessSquare;

public class ChessBoard {

    //chess board constructor
    public ChessBoard() throws IOException {

        //create grid and grid dimensions
        GridLayout grid = new GridLayout(8,8);

        //create frame and set specifications of frame
        JFrame frame = new JFrame();
        frame.setVisible(true);
        frame.setSize(458, 458);
        frame.setTitle("I'm starting to prefer C");

        //initialise 3D array
        ChessSquare[][] square = new ChessSquare[8][8];

        //create 64 instances of ChessSquare and assign each square as an element in the 3D array
        for (int i = 0; i < 8; i++){
            for(int l = 0; l < 8; l++){
                square[i][l] = new ChessSquare();
                this.squarePos(square[i][l]); //this is where my main gripe is
            }
        }

    }

    public static void main(String[] args) throws IOException{
        new ChessBoard();
    }

} 
```

正方形：

```
package Logic;

import java.awt.image.BufferedImage;
import java.io.File;
import java.io.IOException;

import javax.imageio.ImageIO;
import javax.swing.ImageIcon;
import javax.swing.JButton;

//chess square class, 1 instance of which for each square in the grid
public class ChessSquare extends JButton {

    /**
     * 
     */
    private static final long serialVersionUID = 1L;
    //instance variables for position and piece
    public int squarePos;
    public String selectedPiece;

    //accessor method for position
    public void squarePos(){
        int squarePos = ChessBoard.square;
    }

    //constructor for chess squares
    public ChessSquare() throws IOException {
                BufferedImage buttonIcon = ImageIO.read(new File("E:\\Eclipse\\ChessF\\src\\Images\\EmptySquare.jpg"));
                JButton button = new JButton(new ImageIcon(buttonIcon));
                }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T21:02:57.393

有多个问题：

首先也是至关重要的是，您根本没有添加`ChessSquare`按钮。所以从框架调用`add()`方法来添加按钮。

第二：在构造函数的末尾调用`setVisible(true)`你的框架。

第三：为您的框架设置布局 -`frame.setLayout(grid);`

第四：设置默认关闭操作——`frame.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);`

PS 也`pack()`改为调用`setSize()`框架。

祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T20:36:31.197

“*另一个问题是当我尝试从 ChessSquare 中的 3D 数组中保存正方形的坐标时*”

将`x`和`y`作为 ChessSquare 的属性，并在 ChessSquare 的构造函数中接收值：

```
public class ChessSquare extends JButton {
    private int x, y;

    /**
     * 
     */
    private static final long serialVersionUID = 1L;
    //instance variables for position and piece
    public int squarePos;
    public String selectedPiece;

    public ChessSquare(int x, int y){
        this.x = x;
        this.y = y;
    }
... 
```

`ChessBoard`要初始化正方形并渲染它们，请修改的构造函数中的循环。您需要将新创建的添加`ChessSquare`到框架中。

```
 for (int i = 0; i < 8; i++){
        for(int l = 0; l < 8; l++){
            ChessSquare square = new ChessSquare(i, l);
            square[i][l] = square;
            frame.add(square);
        }
    } 
```

之后，每个人都`ChessSquare`知道自己的`x`位置`y`。

Oracle 有一些很棒的教程：[http](http://docs.oracle.com/javase/tutorial/java/TOC.html) ://docs.oracle.com/javase/tutorial/java/TOC.html 。

此外，在您掌握了基础知识之后，请阅读 Swing：[http ://docs.oracle.com/javase/tutorial/uiswing/components/index.html](http://docs.oracle.com/javase/tutorial/uiswing/components/index.html)

# python - 为什么窗口'程序仍在运行！你想在调试期间杀死它吗？

> ID：15557242
> 
> 赞同：0
> 
> 时间：2013-03-21T20:18:59.453
> 
> 标签：python, pandas, scikit-learn

在调试python代码的过程中，当我输入`rf.fit(aa,bb1)`并按下“输入”按钮后，窗口就会出现。我使用的python版本是python2.7，系统是UBUNTU12.10。

这里 'rf = RandomForestClassifier(n_estimators=50, verbose=2, compute_importances=True, n_jobs=-1)' 是来自 sklearn 的函数。和变量'aa，bb1'如图所示。'aa' 是一个 DataFrame，它是 Pandas 库的数据结构。'bb1' 是一个列表。

![在此处输入图像描述](../Images/f05e4165fc982b8f1069fd0a388e43c8.png)

你能告诉我有什么问题吗？为什么会出现警告窗口？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-11-02T03:06:26.583

警告消息是“你的程序仍在运行！\n 你想杀死它吗？” 并且来自`lib\pythonX.X\idlelib\PyShell.py`。

因为您在`Python IDEL Shell`Env 中运行程序并且您的脚本现在正在运行但您想关闭窗口。

`IDEL`是 Python GUI Shell 的别称。

# python - 如何从子类中的父表单中删除字段？

> ID：15557257
> 
> 赞同：44
> 
> 时间：2013-03-21T20:19:52.527
> 
> 标签：python, django, forms, inheritance, field

```
class LoginForm(forms.Form):
    nickname = forms.CharField(max_length=100)
    username = forms.CharField(max_length=100)
    password = forms.CharField(widget=forms.PasswordInput)

class LoginFormWithoutNickname(LoginForm):
    # i don't want the field nickname here
    nickname = None #?? 
```

**有没有办法做到这一点？**

注意：我没有 a `ModelForm`，所以`Meta`带有的类`exclude`不起作用。

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2013-03-21T20:23:38.343

您可以通过覆盖**init**方法来更改子类中的字段：

```
class LoginFormWithoutNickname(LoginForm):
    def __init__(self, *args, **kwargs):
        super(LoginFormWithoutNickname, self).__init__(*args, **kwargs)
        self.fields.pop('nickname') 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-12-11T09:32:13.057

Django 1.7 在提交[b16dd1fe019](https://github.com/django/django/commit/b16dd1fe019b38d0dcdf4a400e9377fb06b33178)的票证[#8620](https://code.djangoproject.com/ticket/8620)中解决了这个问题。在 Django 1.7 中，可以`nickname = None`按照 OP 的建议在子类中进行操作。从提交中的文档更改：

> `Field`可以通过遮蔽从父类继承来选择退出。虽然任何非`Field`值都适用于此目的，但建议使用`None`它来明确表示字段正在被无效。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-02-11T12:28:53.497

我找到了，如果有兴趣请评论。

（在 Django 1.7.4 中）扩展表单，代码如下：

```
class MyForm(forms.ModelForm):

    def __init__(self, *args, **kwargs):
        super(MyForm, self).__init__(*args, **kwargs)

        for key, field in self.fields.iteritems():
            self.fields[key].required = False

    class Meta:
        model = MyModel
        exclude = []

    field_1 = forms.CharField(label="field_1_label")
    field_2 = forms.CharField(label="field_2_label", widget=forms.Textarea(attrs={'class': 'width100 h4em'}),)
    field_3 = forms.CharField(label="field_3_label", widget=forms.TextInput(attrs={'class': 'width100'}),)
    field_4 = forms.ModelChoiceField(label='field_4_label', queryset=AnotherModel.objects.all().order_by("order") )

class MyForm_Extended_1(MyForm):
    field_1 = None

class MyForm_Extended_2(MyForm):
    class Meta:
        model = MyModel
        exclude =[
                    'field_1',
                ] 
```

MyForm_Extended_1 将 field_1 设置为 None，（db 中的列更新为 Null）

MyForm_Extended_2 忽略字段（保存期间忽略db中的列）

因此，出于我的目的，我使用第二种方法。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-05-09T06:45:55.567

我不喜欢这样一个事实（或者我理解），使用“class Meta：”排除第二类中的字段仍然会导致未使用的字段在数据库中。

也许最简单的方法是定义一个具有两个类共享字段的抽象类。然后上面的两个原始类成为这个新类的子类。因此，在该线程开头给出的示例可能如下所示。这是更多的代码，但是这样你扩展了一个子类，而不是从一个超类中做一个（不完整的）排除。

```
class LoginForm_Common(forms.Form):
    username = forms.CharField(max_length=100)
    password = forms.CharField(widget=forms.PasswordInput)
    class Meta:
        abstract = True

class LoginForm(LoginForm_Common):
    nickname = forms.CharField(max_length=100)

class LoginFormWithoutNickname(LoginForm_Common):
    pass 
```

# javascript - JQuery在Select中获取动态生成的选项的值

> ID：15557260
> 
> 赞同：0
> 
> 时间：2013-03-21T20:19:55.913
> 
> 标签：javascript, jquery, dynamic-content

我试图在动态生成的选择中获取用户在动态生成的选项上选择的选项的值。现在，我只是想让警报弹出，但完全没有成功。

我已经尝试在一个文档中使用 .change 活页夹。准备好但这没有用，我认为这可能是因为它不存在要绑定的元素。.change 的代码

```
$(document).ready(function () {
    $(".lowerSerialSelect").change(function () {
        alert("red")
    });
}); 
```

这是我用来动态生成选择的代码：

```
if (_interface == "network" && _deviceName == "Not in Use")
    {
        var lowerSerialTd = document.createElement("td");
        lowerSerialTd.className = "lowerSerial";
        trTag.appendChild(lowerSerialTd);
        var lowerSerialSelect = document.createElement("select");
        lowerSerialSelect.className = "lowerSerialSelect";
        lowerSerialSelect.name = "lowerSerial" + identifier;
        lowerSerialSelect.id = _interface + "lowerSerial" + identifier;

        var lowerSerialOption = document.createElement("option");
        lowerSerialSelect.appendChild(lowerSerialOption)

        for (newDevice in newNetworkDevices)
        {
            alert(newNetworkDevices[0]);
            var lowerSerialOption = document.createElement("option");
            lowerSerialOption.innerHTML = newNetworkDevices[newDevice][0];
            lowerSerialOption.className = "networkMacOption";
            lowerSerialOption.id = _interface + "lowerSerial" + identifier;
            lowerSerialOption.value = newNetworkDevices[newDevice];
            lowerSerialSelect.appendChild(lowerSerialOption)
        }

        lowerSerialTd.appendChild(lowerSerialSelect);
        alert("Maybe");
    } 
```

那么 .change 不会绑定到尚未创建的元素吗？

如果是这样，我可以通过每次创建新选择时重新绑定来解决这个问题吗？（用户将触发新的选择，因此不会一次全部完成）

我也试过 $("select".on("change", "option", function() {alert("red");}); 但无济于事。任何帮助或解释将不胜感激。

这是在配置页面上，所以代码很长，有 800 行，所以我不想发布整个内容。

谢谢

** 编辑 **

动态生成的html最后是这样的：

```
 <select class="lowerSerialSelect" name="lowerSerial2" id="networklowerSerial2">
        <option></option>
        <option class="networkMacOption" id="networklowerSerial2"    value="0080A39166BA,192.168.1.59,47331,1363895658.22">0080A39166BA</option>
  </select> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T20:21:39.147

是的，你是正确的，`.change()`不是一个委托的处理者。尝试`.on()`

```
$('body').on('change', '.lowerSerialSelect', function() {
  // code here
}); 
```

# node.js - 以多种内容类型响应单个请求

> ID：15557264
> 
> 赞同：0
> 
> 时间：2013-03-21T20:20:09.447
> 
> 标签：node.js

有没有办法用请求的文档和来自 http.Server 请求回调的 JSON 对象来响应单个 GET 请求？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T20:35:21.773

如果您想`Content-Type`从同一页面提供两个不同的 HTTP ，由于协议的限制，这是不可能的。但是，您可以在页面上创建另一个 iFrame，让主框架为一种类型提供服务，而 iFrame 为另一种提供服务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T20:39:01.320

如果您想在单个响应中使用两种不同的类型，我认为[多部分 MIME](http://www.w3.org/Protocols/rfc1341/7_2_Multipart.html)响应是您最好的选择。

# c - C 中嵌套 printf 和 scanf 的输出

> ID：15557266
> 
> 赞同：-3
> 
> 时间：2013-03-21T20:20:15.000
> 
> 标签：c, printf, scanf

请帮我处理这个程序的输出。为什么它显示输入 3 4 的结果 o/p PRINT 2 8
我认为输出可能因机器而异，但这是怎么回事。

```
#include<stdio.h>
int main() {
    int i,a;
    printf("%d",printf("PRINT %d\t",scanf("%d%d,",&i,&a)));  
    return 1;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T20:23:11.977

`printf()`执行立即输出。它不会“返回”您刚刚打印的字符串。它返回输出了多少个字符（你的`7`）。如果您希望将内部打印件送入外部打印件，则需要`sprintf()`改用。“字符串打印”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T20:27:41.913

任何好的 C 参考资料，例如 Linux`printf`和`scanf`手册页，都将记录标准函数的返回值，这些函数将解释您在打印出它们的返回值时会看到什么。

在这种特定情况下，返回值`scanf`是成功匹配的输入项数。每个“输入项”对应`%`于字符串中的一个模式，因此在这种情况下，如果两个模式的输入都有效`scanf`，它将返回 2 。`scanf`然后，`printf`返回它输出的字符数。（在这种情况下，报告的输出令人惊讶，因为我希望 8:`strlen("PRINT ") == 6`加上一个用于返回的字符`scanf`加上一个用于制表符的字符。）

我看不出为什么这些值中的任何一个会从一个系统到另一个系统发生变化，尽管如果`scanf`不能匹配它的两个输入项，它当然会发生变化。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T20:58:39.460

我认为您缺少的是，您的嵌套函数调用的一行与此代码基本相同：

```
int scanf_result = scanf("%d%d,",&i,&a);
int printf_result = printf("PRINT %d\t", scanf_result));
printf("%d", printf_result); 
```

`scanf`如果您输入了有效输入， call 应该返回 2，但也可以返回 -1 表示实际错误，或者如果未能扫描 2 个整数，则返回 0 或 1。然后`printf`按照您的预期首先打印它，它应该返回 8（如果`scanf`返回 -1，则返回 9），因此 7 可能意味着您实际执行的代码与您粘贴的代码之间的差异......然后 2nd`printf`打印该数字在同一行（没有任何地方打印换行符），为您提供最终输出。

没有歧义，编译器不能在这里以不同的顺序做事。当您将函数的返回值作为参数传递给另一个函数时，必须首先调用第一个函数才能获取返回值。因此，任何“副作用”（例如从标准输入读取或打印到标准输出）也会按此顺序发生。

获得歧义的方法是在同一参数列表中的同一变量上多次使用赋值运算符或`++`或运算符。`--`然后，当变量值实际发生变化时，当您在同一个参数列表中多次使用同一个变量时，它是未定义的，因此传递了哪些值。

# sql - 从 PostgreSQL 表中选择第 N 个值并在查询中使用

> ID：15557268
> 
> 赞同：2
> 
> 时间：2013-03-21T20:20:24.323
> 
> 标签：sql, postgresql

我想将表的第 N 行中的列的值应用于表中的所有行。仅在 PostgreSQL 中这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T20:21:58.870

```
select *   
from <<TABLE>>  
limit 1 offset <N> 
```

编辑：对不起，误读了您的信息。我没有意识到你也需要更新。

```
UPDATE <<TABLE1>> 
SET <<COLUMN1> = (SELECT <<COLUMN2>> FROM <<TABLE2>> limit 1 offset <<N>>) 
```

[Postgres 文档](http://www.postgresql.org/docs/7.3/static/queries-limit.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T00:25:39.150

如果你没有写权限，你可以用窗口函数做一些事情。这可能会被简化或扩展（特别是它如何抓取“n”，具体取决于用例）。不幸的是，窗口函数中不能有窗口函数。

```
create temp table test(val numeric);
insert into test select * from generate_series(101,200,1);

select max(case when rn = n then val else null end) over () as nthvalue, val
from(
select row_number() over (order by val) as rn, val, n 
from (select val, 9 as n from test) as added_n) as obtained_rownum; 
```

# extjs - 测试 Sencha 触控应用

> ID：15557269
> 
> 赞同：1
> 
> 时间：2013-03-21T20:20:28.500
> 
> 标签：extjs, sencha-touch-2

谁能告诉我如何在包装或生产之前在移动设备（android）上测试 sencha touch 应用程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T06:18:15.123

为此，您可以使用[Phonegap/Apache Cordova](http://cordova.apache.org/)。在我们公司，我们使用 sencha build 构建我们的 sencha 应用程序，使用 cordova 将其打包为原生应用程序，将其安装在设备（iPhone/iPad/Android 手机/Android 平板电脑）中，然后进行测试。

要开始使用 Android，您可以使用此[官方入门指南](http://cordova.apache.org/docs/en/2.5.0/guide_getting-started_android_index.md.html#Getting%20Started%20with%20Android)。

# php - 高度不起作用

> ID：15557272
> 
> 赞同：1
> 
> 时间：2013-03-21T20:20:41.987
> 
> 标签：php, html, css, height

我有这个文件：

索引.php：

```
<body>
    <div id="page">
        <div id="header"><h1>BANNER</h1></div>
        <div id="pmenu"><?php include 'template/pmenu.php' ?></div><br>
        <div id="text">
            <div id="left">Menu<br>menuMenu<br>menuMenu<br>menu</div>
            <div id="center">ccsal<br>saccsal<br>saccsal<br>sa</div>
            <div id="right">rright<br>rirright<br>rirright<br>ri</div><br>
        </div></div><br>
    </body> 
```

pmenu.php

```
<nav>
<div id="pmenuli">HOME</div> 
<div id="pmenuli">HTML</div> 
<div id="pmenuli">CSS</div> 
<div id="pmenuli">PHP</div> 
<div id="pmenuli">JAVA SCRIPT</div> 
</nav> 
```

和 style.css：

```
body{text-align: center; background-color: rgb(185, 185, 185);}
#page{ background-color: rgb(225, 225, 225); width:1124px; height: auto; margin:auto;
border-left:2px solid blue;
border-right:2px solid blue;
border-top:2px solid blue;
border-bottom:2px solid rgb(25, 25, 25);}
#pmenu{height: 30px;
background-image: -webkit-gradient(linear,0% 0%,0% 70%,from(#6a6a6a),to(#222));
background-image: -moz-linear-gradient(0% 22px 90deg,#222,#6a6a6a);
-moz-border-radius: 4px;
-webkit-border-radius: 4px;
border-radius: 4px;
display: block;
margin: 0 auto 20px;
border: 1px solid #222;
position: relative;
background-color: #6a6a6a;
color: white;
vertical-align: middle;
box-shadow: 2px 2px 2px rgba(0,0,0,.75);
width: 1118px;}
#pmenuli:hover
{height: 30px;
background-image: -webkit-gradient(linear,0% 0%,0% 70%,from(#222),to(#6a6a6a));
background-image: -moz-linear-gradient(0% 22px 90deg,#6a6a6a,#222);
-moz-border-radius: 4px;
-webkit-border-radius: 4px;
border-radius: 4px;
display: block;
margin: 0 auto 20px;
border: 1px solid #222;
position: relative;}
#pmenuli{
border: 1px solid black;
float: left;
width: 150px;
height: 29px;
font: 20px Times new roman,Sans-serif;}
a:link{color: white;}
v:link{color: white;}
#left,#center,#right{float: left;}
#left{width: 155px}
#center{width: 555px}
#right{width: 155px} 
```

但是如果我在 id 为“text”的 div 中添加文本，#page 的高度是相同的。截图： [http ://artur99.hostyd.com/Untitled.png](http://artur99.hostyd.com/Untitled.png)

我试过：

```
height: auto;
height: max-content;
height: content-box;
height: border-box; 
```

但仍然无法正常工作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T20:22:59.317

添加`overflow:auto`到`#page`.

**[jsFiddle 示例](http://jsfiddle.net/j08691/WWz3m/)**

当您浮动 div 的子元素时，为了让 div 扩展以覆盖它们，您需要将溢出设置为自动或隐藏。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T20:25:31.503

清除你的浮动.. 使用[clearfix](http://css-tricks.com/snippets/css/clear-fix/)

当浮动元素从正常的文档流中移除时，带有浮动子元素的父级会失去高度。您需要将 clearfix 应用于此类父元素

示例：具有“nav”和“content”类的元素正在浮动（从正常文档流中删除），因此父“容器”需要 clearfix

```
<div class="container group"> <!-- Applying clearfix to the parent with floated elemets -->
   <div class="nav">
     Some nav items
   </div>
   <div class="content">
     Some content
   </div>       
</div> 
```

CSS：

```
.nav{
   width: 40%;
   float: left;
 }
 .content{
   width: 60%;
   float: left;
 }
.group:before,
.group:after {
   content: "";
   display: table;
} 
.group:after {
   clear: both;
}
.group {
   zoom: 1; /* For IE 6/7 (trigger hasLayout) */
} 
```

# php - php select下拉列表无法显示数据库中的某些数据

> ID：15557273
> 
> 赞同：0
> 
> 时间：2013-03-21T20:20:47.983
> 
> 标签：php, mysql, select

我创建了一个选择下拉列表，其目的包括按时间顺序加载从我的数据库中提取的关联名称列表

每当我从下拉列表中选择一个协会名称时，我希望能够在文本字段中显示该协会的相应地址、邮政编码和城市。

使用下面的代码，我可以从下拉列表中检索选定的关联名称以及关联的 ID 号，但之后，我不知道如何提取其他信息（即地址、邮政编码、.. .)。

任何想法将不胜感激和/或示例将不胜感激，在此先感谢

```
<?php
$entry_array_ass = array ();
$entry_array_ass[0]['denomination'] = "";  // default value

$sql = "select id_association, denomination, adresse, numero, localite from association     
ORDER BY denomination";

$rs = mysql_query($sql) or die("Erreur de requ&ecirc;te : $sql");;

while($row=mysql_fetch_array($rs))
{
 extract($row);
 $entry_array_ass[$row[0]] = array ('denomination' => $row[1], 'adresse' => $row[2]);                         
}

$return_select = '<select name="list_ass" style="font-family : Verdana; font-size : 
10pt;  width:50" onchange="list_ass_handler()">';

if ( is_array ( $entry_array_ass ) ) 
{
// $K contains the key pointing to the id_association number
// $V is the array containing the denomination of each association

foreach ( $entry_array_ass as $K => $V ) 
{                             
      $return_select .= '<option value="' . $K . '"';

      // $return_select contains the list of all associations
         $return_select .= ">{$V['denomination']}</option>";              
}
}

$return_select .= "</select>";

// Display the association name
echo '<input type="hidden" name="location" id="entry_location">' . $return_select; 

// Display the ID number of the association
echo '<input type="hidden" name="id_location" id="entry_id_location">';                     
?> 
```

# highcharts - HighStock 打印设置以隐藏范围选择器

> ID：15557274
> 
> 赞同：1
> 
> 时间：2013-03-21T20:20:48.287
> 
> 标签：highcharts, highstock

使用 HighStock，我们希望为用户提供打印选项，但我们希望`rangeSelector`在导出时从图像中删除。以下代码执行此操作以导出到文件，但在使用 print 时似乎被忽略：

```
exporting: {
    chartOptions: {
        rangeSelector: {
            enabled: false
        }
    },
    buttons: {
        enabled: false
    },
    filename: 'UnempRate',
    width: 590
} 
```

请注意，我们禁用了导出按钮，因为我们从不同的 HTML 元素调用。即使我们使用内置按钮，它仍然会显示`rangeSelector`打印。

这与我关于导航器系列和导出图表标题问题的其他问题有关：[HighStock Export Renders Incorrect Title and Navigator Series](https://stackoverflow.com/questions/15549641/highstock-export-renders-incorrect-title-and-navigator-series)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T18:01:40.147

我认为这会有所帮助：[jsFiddle](http://jsfiddle.net/Crystall/jyfs8/)。

这很困难，但我终于明白了。如果您还需要隐藏`exporting`按钮，请尝试自己实现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T15:16:03.147

请看这个例子：

```
http://jsfiddle.net/4ZMNg/ 
```

没有范围选择器的导出图像：

```
 exporting:{
            chartOptions:{
                rangeSelector:{
                    enabled:false
                }
            }

        }, 
```

# rally - 投资组合时间线来源

> ID：15557278
> 
> 赞同：0
> 
> 时间：2013-03-21T20:20:53.157
> 
> 标签：rally

看起来 Portfolio Timeline 应用程序的源不在 github 上，尽管其他应用程序（如 Portfolio Kanban）已发布在那里。

是否有计划发布 Portfolio Timeline 的源代码？如果不是，那有什么阻碍？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T21:03:49.277

投资组合项目时间线围绕甘特图使用一些 JS 库/功能，这些库/功能对 AppSDK2 框架（使用 Highcharts）不可用/公开。将来可能会发布该应用程序的纯基于 SDK 的版本并可以访问源代码，这并非不可想象，但是，我不知道何时或是否会发生这种情况-目前尚未积压.

# c# - 该名称不存在。在 if 中设置变量

> ID：15557288
> 
> 赞同：0
> 
> 时间：2013-03-21T20:21:27.007
> 
> 标签：c#

我是 C# 的初学者，我正在制作一个简单的应用程序。但我仍然不明白如何从这个函数返回这个名为“newsy”的数组。我不能在数组中设置这个变量。我有这个错误：

当前上下文中不存在名称“newsy”。

请帮我。

```
private string[] get_news(string URL)
    {
        XmlTextReader textReader = new XmlTextReader(URL);
        while (textReader.Read())
        {

            if (textReader.NodeType == XmlNodeType.Element)
            {
                if (textReader.Name == "news") {
                    string News = textReader.ReadElementContentAsString();
                    string[] newsy = { News };
                }
                if (textReader.Name == "link")
                {
                    string Link = textReader.ReadElementContentAsString();
                    string[] newsy = { Link };
                }
            }
        }
        return newsy;
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T20:23:11.643

您需要了解[范围](http://msdn.microsoft.com/en-us/library/aa691132.aspx)- 特别是块范围。

`newsy`在语句的内部范围内`return`声明，在该范围内不可用。

在外部范围内声明它，你会没事的：

```
private string[] get_news(string URL)
{
    XmlTextReader textReader = new XmlTextReader(URL);
    string[] newsy = null;
    while (textReader.Read())
    {
        if (textReader.NodeType == XmlNodeType.Element)
        {
            if (textReader.Name == "news") {
                string News = textReader.ReadElementContentAsString();
                newsy = new string[] { News };
            }
            if (textReader.Name == "link")
            {
                string Link = textReader.ReadElementContentAsString();
                newsy = new string[] { Link };
            }
        }
    }
    return newsy;
} 
```

请注意如何在块`newsy`外声明（但未分配给） 。`while`另请参阅在 内部`while`，有对 的分配`newsy`，但没有新的声明（这是不合法的）。

值得注意的是，如果`Name`两者都不是`"news"`or `"link"`，`newsy`将会是`null`- 它可能是也可能不是您想要的 - 您始终可以在声明期间分配一个空字符串数组：

```
string[] newsy = new string[] {}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T20:22:47.573

您需要在块之外创建新闻`if`（只需一次）。

这里的重要概念是变量的“范围”。当你在 C# 中声明一个变量时，它只存在于包含声明的*最里面*`{`的...集合之间。`}`

因此，在您的代码中，如果名称是`"news"`，您将创建一个名为`newsy`- 的新字符串变量，但该变量位于`{`...`}`之后的集合中`if`，并且一旦程序退出它们就消失了。如果名称是`"link"`，您将创建一个（不同的！）名为 的新字符串变量`newsy`，但它也会在它的末尾消失`if`。无论哪种方式，当你得到`return`声明时，仍然没有`newsy`。

因此，您需要在与语句`newsy`相同的级别`return`声明 - 在函数体周围的大括号内，但不在函数体周围的大括号内`while`或任何`if`s 内：

```
 XmlTextReader textReader = new XmlTextReader(URL);
    string[] newsy;
    while (textReader.Read())
    { 
```

...

现在，您还必须更改分配，因为如果您`string[] newsy`在其中一个内部块中执行此操作，您仍将创建一个仅存在于该块内并隐藏外部块的新变量。因此，不要声明它（用`string[]`），只需分配给现有的，没有类型声明：

```
 if (textReader.Name == "news") {
                string News = textReader.ReadElementContentAsString();
                newsy = { News };
            } 
```

这应该有效。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-21T20:24:06.273

您需要在循环`newsy`之外声明：`while`

```
private string[] get_news(string URL)
    {
        string [] newsy;
        XmlTextReader textReader = new XmlTextReader(URL);
        while (textReader.Read())
        {

            if (textReader.NodeType == XmlNodeType.Element)
            {
                if (textReader.Name == "news") {
                    string News = textReader.ReadElementContentAsString();
                    newsy = { News };
                }
                if (textReader.Name == "link")
                {
                    string Link = textReader.ReadElementContentAsString();
                    newsy = { Link };
                }
            }
        }
        return newsy;
    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-21T20:23:30.253

试试这个：

```
private string[] get_news(string URL)
        {
            XmlTextReader textReader = new XmlTextReader(URL);
            string[] newsy=null;
            while (textReader.Read())
            {

                if (textReader.NodeType == XmlNodeType.Element)
                {
                    if (textReader.Name == "news") {
                        string News = textReader.ReadElementContentAsString();
                         newsy = { News };
                    }
                    if (textReader.Name == "link")
                    {
                        string Link = textReader.ReadElementContentAsString();
                         newsy = { Link };
                    }
                }
            }
            return newsy;
        } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-21T20:25:18.847

当你在一个块（即使是一个 if 块）中声明一个变量时，它的作用域仍然在那个级别：

```
if (textReader.Name == "news") {
    string News = textReader.ReadElementContentAsString();
    string[] newsy = { News };
}

// newsy no longer exists 
```

为了返回 newsy，您要么需要在外部范围内声明，要么立即返回它。

```
 XmlTextReader textReader = new XmlTextReader(URL);
    string[] newsy;

    while (textReader.Read())
    {

        if (textReader.NodeType == XmlNodeType.Element)
        {
            if (textReader.Name == "news") {
                string News = textReader.ReadElementContentAsString();
                newsy = { News };
            }
            if (textReader.Name == "link")
            {
                string Link = textReader.ReadElementContentAsString();
                newsy = { Link };
            }
        }
    }
    return newsy; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-21T20:24:36.660

在 while 语句之前声明`string[] newsy;`，然后像这样使用 newsy: `newsy = {Link}`，这将解决您的问题。

# c++ - 在 sfml 中使用 vertexArray 的正确方法是什么？

> ID：15557293
> 
> 赞同：0
> 
> 时间：2013-03-21T20:21:42.493
> 
> 标签：c++, sfml

在做了一些研究之后，似乎使用 vertexArrays 以最有效的方式一次将许多精灵绘制到屏幕上，但我正在努力如何做到这一点。我尝试使用 sfml 论坛，但我看到的每个示例都来自过时的代码，到目前为止我有这个。

```
int main() 
{
    sf::VertexArray lines(sf::LinesStrip, 4);
    lines.append(sf::Vertex(sf::Vector2f(0, 0),sf::Vector2f(0, 0)));
    lines.append(sf::Vector2f(0, 50));
    lines.append(sf::Vector2f(250, 50));
    lines.append(sf::Vector2f(250, 0));

    sf::Texture text;
    text.loadFromFile("Content/StartGame.png");

    sf::RenderStates rend(&text);

    sf::RenderWindow App(sf::VideoMode(800, 600, 32), "SFML Graphics");

    // Start game loop
    while (App.isOpen())
    {
        // Process events
        sf::Event Event;
        while (App.pollEvent(Event))
        {
            // Close window : exit
            if (Event.type == sf::Event::Closed)
                App.close();
        }
        App.clear();
        App.draw(lines, &text);
        App.display();
    }
} 
```

我有形状图，但是当我尝试将它应用到纹理时，什么也没有画出来。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T21:03:46.053

像这样使用：

```
 sf::VertexArray lines(sf::LinesStrip, 4);
 lines[0].position = sf::Vector2f(10, 0);
 lines[1].position = sf::Vector2f(20, 0);
 lines[2].position = sf::Vector2f(30, 5);
 lines[3].position = sf::Vector2f(40, 2);

 window.draw(lines); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T21:09:54.297

构建 sf::Vector2f; 时不提供任何纹理坐标；传入一些纹理坐标作为第三个参数，例如：

```
lines.append(sf::Vertex(sf::Vector2f(0, 0),sf::Vector2f(0, 0), sf::Vector2f(0,0))); 
```

纹理坐标应该类似于`0,0`、`0,1`、`1,0`和`1,1`。

您可能还必须将形状类型更改为`sf::Quads`（我使用 SFML 已经有一段时间了，所以这可能是也可能不是真的）。

# sql - oracle number 数据类型问题

> ID：15557294
> 
> 赞同：0
> 
> 时间：2013-03-21T20:21:43.463
> 
> 标签：sql, oracle, oracle11g, rdbms

我试图在我的 oracle 11g 数据库中保存一些特定的字符（比如说 4 个）。当我说数据时，我的数字有一个前导零，例如 0100 0101 等。为什么 oracle 会截断前导零。有没有可能避免这种情况。我真的希望前导零得到保存。请帮忙。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-21T20:23:31.190

如果要显示带有前导零的数字，请使用：

```
to_char(my_number,'fm0000') 
```

如果您*确实*需要使用前导零存储数字，请将其存储为 varchar2，因为您所拥有的是一个仅由数字组成的字符串，而不是数字。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-21T20:50:02.510

上面的`TO_CHAR`答案是最好的，但它们需要调整，因为`TO_CHAR(number, '0000')`会添加前导零*和*前导空格，这是一个占位符，以防出现负号：

```
SELECT '[' || TO_CHAR(123, '0000') || ']' "Format" FROM DUAL;

Format
-------
[ 0123] <-- note the leading space 
```

要消除空格，请使用 LTRIM 或在格式字符串中使用 FM 限定符：

```
SELECT '[' || TO_CHAR(123, 'FM0000') || ']' "Format" FROM DUAL;

Format
-------
[0123] <-- no more leading space 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T20:23:49.070

如果要存储前导零，则将数字存储`char()`为固定长度值的 a 或`varchar()`（或`varchar2()`）可变长度值。

数字以二进制格式存储，没有前导零的概念。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-03-21T20:36:34.433

获得8位数字的简单技巧：

```
substr(your_number + power(10,8), 2) 
```

# c# - c# 关闭表单更改值打开新表单

> ID：15557295
> 
> 赞同：1
> 
> 时间：2013-03-21T20:21:48.167
> 
> 标签：c#, winforms

我正在编写一个应用程序，要求从 ComboBox 中选择一个输入，然后要求从另一个 ComboBox 中选择第二个输入（基于第一个，每个第一个输入都有不同的可能性。）当两个输入都设置时，用户点击一个按钮，将这些输入传递给第二个表单并使用 a`form2.show()`打开它（输入通过属性传递）。我想要的是能够关闭这个新表单（这个功能已经完成），然后选择新的输入并让它再次打开第二个表单，这次使用新的输入。输入会更改在新表单上调用的信息。现在，当我在更改输入后点击按钮打开新表单时，我的程序崩溃了。

有什么建议么？！

谢谢！

**更新**

这是我得到的错误： System.ObjectDisposedException：无法访问已处置的对象。对象名称：'Form2'。

和代码。

从主要形式：

```
private void button1_Click(object sender, EventArgs e)
    {
        report_form.TypeSelected = type_selected;
        report_form.LoadSelected = load_selected;
        report_form.Show();
    } 
```

从子窗体：

```
public string TypeSelected { get; set; }
public string LoadSelected { get; set; }
private void Form2_Load(object sender, EventArgs e)
    {
        this.Text = "Report for " + TypeSelected + " load " + LoadSelected;
        label1.Text = "Type: " + TypeSelected;
        label2.Text = "Load: " + LoadSelected;

        dataGridView1.DataSource = bindingSource1;
        GetData();
    }

    private void button1_Click(object sender, EventArgs e)
    {
        this.Close();
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T20:24:49.483

从您的代码看来，您可能多次显示子表单。当您调用 close 时，表单将被释放，并且再次调用 show 而不重新实例化它会导致该异常。你要么只需要隐藏你的子窗体而不是关闭它，要么如果你关闭它，每次你想显示它时重新创建它。（[隐藏](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.hide.aspx)而不是关闭。）

此外，您可以考虑将[ShowDialog](http://msdn.microsoft.com/en-us/library/c7ykbedk.aspx)用于您的子表单。如果您不希望或不需要用户使用父表单，这是收集数据的首选方法......它极大地简化了您与子表单的交互方式。

高马：您应该尝试将您的应用程序重构为[MVC（模型、视图控制器）](http://www.codeproject.com/Articles/383153/The-Model-View-Controller-MVC-Pattern-with-Csharp)。控制器类将决定打开哪些表单以及何时加载，并在它们之间传递模型（数据）。这种关注点分离将极大地帮助您组织您的应用程序并摆脱您的问题。或者 MVP：（[模型视图演示者](http://www.cerquit.com/blogs/post/MVP-Part-I-e28093-Building-it-from-Scratch.aspx)）

# matlab - 在matlab中没有'ans ='的命令行窗口打印？

> ID：15557309
> 
> 赞同：7
> 
> 时间：2013-03-21T20:22:40.817
> 
> 标签：matlab, printf, command-window

当我使用 sprintf 时，结果显示如下：

```
sprintf('number=%d %d %d',a,b,c)
sprintf('or %d',h)  

ans = 

number= 5 4 2

ans =

or 2 
```

如何在不`ans =`阻碍结果的情况下显示结果？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-21T20:26:57.133

您可以使用`fprintf`而不是`sprintf`. `\n`请记住在字符串末尾添加换行符。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-11-29T19:56:19.963

# 概括

**选项 1**：`disp(['A string: ' s ' and a number: ' num2str(x)])`

**选项 2**：`disp(sprintf('A string: %s and a number %d', s, x))`

**选项 3**：`fprintf('A string: %s and a number %d\n', s, x)`

# 细节

引用[http://www.mathworks.com/help/matlab/ref/disp.html](http://www.mathworks.com/help/matlab/ref/disp.html)（在同一行显示多个变量）

在命令行窗口的同一行中显示多个变量有三种方法。

**(1)**使用 [] 运算符将多个字符串连接在一起。使用 num2str 函数将任何数值转换为字符。然后，使用 disp 显示字符串。

```
name = 'Alice';   
age = 12;
X = [name,' will be ',num2str(age),' this year.'];
disp(X) 
```

`Alice will be 12 this year.`

**(2)**您也可以使用 sprintf 创建字符串。使用分号终止 sprintf 命令以防止显示“X =”。然后，使用 disp 显示字符串。

```
name = 'Alice';   
age = 12;
X = sprintf('%s will be %d this year.',name,age);
disp(X) 
```

`Alice will be 12 this year.`

**(3)**或者，使用 fprintf 创建和显示字符串。与 sprintf 函数不同，fprintf 不显示“X =”文本。但是，您需要以换行符 (\n) 元字符结束字符串以正确终止其显示。

```
name = 'Alice';   
age = 12;
X = fprintf('%s will be %d this year.\n',name,age); 
```

`Alice will be 12 this year.`

# c++ - 头文件中定义的线程函数给 出类型转换错误

> ID：15557312
> 
> 赞同：0
> 
> 时间：2013-03-21T20:22:49.717
> 
> 标签：c++, multithreading, visual-studio-2010

请看下面的代码

**服务器.h**

```
#pragma once
class Server
{
public:
    Server(void);
    ~Server(void);

    DWORD WINAPI serverThread(LPVOID param);

private:
    SOCKADDR_STORAGE from;
    int retval, fromlen, socket_type;
    char servstr[NI_MAXSERV],hoststr[NI_MAXHOST];
    SOCKET serverSocket, acceptSocket;
}; 
```

**服务器.cpp**

*这里展示了一小部分。*

```
Server:Server()
{
//Code

//Passing data to thread
        DWORD threadId;
        HANDLE hdl;

        hdl = CreateThread(NULL,NULL,(LPTHREAD_START_ROUTINE) serverThread,(LPVOID)acceptSocket,0,&threadId);

//Code
}

DWORD WINAPI Server::serverThread(LPVOID param)
{
//code
} 
```

此代码正在生成错误

```
 error C2440: 'type cast' : cannot convert from 'overloaded-function' to 'LPTHREAD_START_ROUTINE' 
```

那是从线

```
hdl = CreateThread(NULL,NULL,(LPTHREAD_START_ROUTINE) serverThread,(LPVOID)acceptSocket,0,&threadId); 
```

为什么是这样？请帮忙！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-21T20:38:41.413

非静态方法具有与静态或全局方法不同的类型。请记住，*非静态*成员函数有一个*隐藏*参数，即`this`指针，因此您的`serverThread`函数本质上具有如下签名：

```
DWORD WINAPI serverThread(Server *this, LPVOID param); 
```

所以你可以明白为什么这不起作用（*即使*有演员表也不起作用 - 会发生奇怪的可怕事情）。

为了使其与 LPTHREAD_START_ROUTINE 兼容，您需要将其设为静态，因为静态成员函数不对类的特定实例进行操作，因此不需要`this`指针：

```
static DWORD WINAPI serverThread(LPVOID param); 
```

而不是将 acceptSocket 作为 lpParameter 传递给 CreateThread，而是传递**这个**：

```
hdl = CreateThread(NULL,NULL,(LPTHREAD_START_ROUTINE)serverThread, this,0,&threadId); 
```

在 serverThread 内部，您仍然可以通过 Server 对象访问 acceptSocket 成员。

# .net - 使用没有这些功能的 API 会导致我的应用程序终止还是抛出异常？

> ID：15557322
> 
> 赞同：0
> 
> 时间：2013-03-21T20:23:16.543
> 
> 标签：.net, exception, windows-phone-8, windows-phone

我正在编写一段代码，试图从 Windows Phone 8 上的用户设备中获取尽可能多的信息。我在认证指南中注意到了这句话

> 如果您的应用程序尝试访问它不具备使用安全功能的 API，它可能会意外关闭。有关如何使用安全功能的详细信息，请参阅如何确定应用功能。

那么，这到底是什么意思呢？例如这段代码：

```
try
{
  SomeInfo=SomeFunctionThatRequiresACapability();
}
catch
{
 //oh well, I guess we can't get that piece of info. ignore it
} 
```

这可能会证明吗？还是我需要先检查我们是否有能力？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T20:24:36.410

如果您不添加功能，它将在运行时引发异常。但是，它不会进行认证，因为 XapValidation 工具会检查您的编译代码，而不是 xml 文件中的功能列表。

# java - 我应该使用什么jdk？

> ID：15557325
> 
> 赞同：4
> 
> 时间：2013-03-21T20:23:25.090
> 
> 标签：java, version

现在有更多的消费者使用 Java 6 还是 Java 7？

我想开发一个能够覆盖最多用户的应用程序。但是，我担心如果我使用 JDK 7，它将无法在许多人的计算机上运行，​​因为他们将拥有过时的 JRE。

有没有关于使用每个 JRE 的人数百分比的数据？就像在这里找到的（过时的）数据一样： [浏览器上通常安装哪些 Java 版本，假设 1.4 是否安全？](https://stackoverflow.com/questions/650582/what-java-versions-are-commonly-installed-on-browsers-is-it-safe-to-assume-1-4)

这将是一个独立的桌面应用程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T20:28:39.203

取决于您正在构建什么样的应用程序。如果您正在创建小程序，您可能需要重新考虑使用小程序。使用 HTML5/Javascript，applet 可以做的几乎所有事情都更快、更安全。许多安全问题都来自 JRE 浏览器插件，因此现在越来越多地被禁用。如果您正在构建桌面应用程序，我应该始终使用最新的 JRE。服务器端 Java 也是如此。

此外，Java 6 自今年 2 月起停产，因此您不应再使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T20:27:55.200

你并没有真正告诉我们你打算做什么。

您想编写独立应用程序、Web 应用程序还是小程序？

对于独立应用程序，我可能会选择 java 6 并确保它也可以与 java 7 一起使用。

对于 Web 应用程序，Java 运行在服务器端，因此您可以忽略用户拥有的内容。

如果不是真的必要，我不会写小程序。出于安全原因，用户目前倾向于禁用他们的浏览器插件，而且它们似乎有点过时了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T20:29:36.017

根据[stat owl](http://www.statowl.com/java.php)的说法，大多数在浏览器中有 Java 插件的用户都*没有*JVM7。如果它是桌面应用程序，您可以将 JVM7 与您的应用程序一起提供。

如果您正在为桌面构建，则不必担心这一点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T20:29:57.363

如果您正在构建桌面应用程序，则可以随应用程序一起交付 JDK，而构建基于浏览器的 Java 应用程序无论是什么版本，现在都可能不是一个好的选择。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-21T20:30:52.427

如果您编写客户端应用程序，我会使用 java 5，因为您与大多数 JVM 兼容并且具有来自 java 的良好功能集。Java 5 引入了泛型和注释，这使得编程更容易，代码更安全。Java6 和 Java7 引入了一些小特性。当 Java8 出现时，由于 lambda、新的日期 api 等，它将大受欢迎。

If you develop a server-side/enterprise application i would go with the latest stable java release because it will make your application faster, easier maintainable and you can use the latest frameworks.

# c# - 委托：在自定义服务器控件中指定要调用的方法（或其名称）

> ID：15557331
> 
> 赞同：0
> 
> 时间：2013-03-21T20:23:35.717
> 
> 标签：c#, events, delegates, custom-controls, asp.net-customcontrol

我正在开发一个带有 jquery、WCF 和其他东西的 ASP.net 自定义服务器控件。我想为使用它的开发人员提供在控件的公开公开属性之一中指定成功函数（在控件成功完成任务时调用）的灵活性。我是活动和代表的新手，有人可以告诉我应该怎么做吗？指定公共财产的类型？在属性中设置函数名称（在标记或/和代码中，作为字符串或任何其他类型）？从控件调用函数/委托？

一些示例代码将是首选（如果我说一些愚蠢的话，请备用）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T20:36:35.997

这是事件的标准模式：

```
class YourControl {
    public event EventHandler Success;

    protected void OnSuccess() {
        if(this.Success != null)
            this.Success(this, EventArgs.Empty);
    }
} 
```

Success 是 EventHandler 类型，可以很好地与其他事件集成，从而允许通用事件处理程序（例如通用日志记录工具）订阅。通过调用 OnSuccess()，可以轻松地在控件及其子控件中的任何位置触发该事件。

您还可以自定义事件添加更多信息：

```
class YourControl {
    public class YourControlEventArgs: EventArgs {
        public TimeSpan Elapsed;
        public YourControlEventArgs(TimeSpan t) {
            this.Elapsed = t;
        }
    }

    public event EventHandler<YourControlEventArgs> Success;

    protected void OnSuccess(TimeSpan t) {
        if(this.Success != null)
            this.Success(this, new YourControlEventArgs(t));
    }
} 
```

如上所述，一个特定的类包含扩展简单 EventArgs 以与 .NET 的其余部分集成的事件的详细信息。

# android - OSMdroid pathoverlay 段的不同颜色

> ID：15557334
> 
> 赞同：2
> 
> 时间：2013-03-21T20:23:37.813
> 
> 标签：android, osmdroid

我正在使用 OSMdroid pathoverlay 在 OSM 地图上绘制路径。我想要的是为路径段赋予不同的颜色。例如第一点和第二点之间的绿色，第二点和第三点之间的红色等。有没有一种简单的方法可以做到这一点，或者我只需要为每两个点绘制路径。这是我的代码：

```
Paint paint = new Paint();
paint.setColor(Color.RED);
paint.setAlpha(90);
paint.setStyle(Paint.Style.STROKE);
paint.setStrokeWidth(10); 

final PathOverlay myPath = new PathOverlay(Color.RED, this);
myPath.setPaint(paint);

GeoPoint pt0 = new GeoPoint(55.50751471753, 37.573947718445);
GeoPoint pt1 = new GeoPoint(55.515894950325, 37.576943422821);
GeoPoint pt2 = new GeoPoint(55.558540269411, 37.589379590206);
GeoPoint pt3 = new GeoPoint(55.560980447657, 37.58950603316);
GeoPoint pt4 = new GeoPoint(55.563488028278, 37.583155265129);
GeoPoint pt5 = new GeoPoint(55.566675052453, 37.574270957266);

myPath.addPoint(pt0);
myPath.addPoint(pt1);
myPath.addPoint(pt2);
myPath.addPoint(pt3);
myPath.addPoint(pt4);
myPath.addPoint(pt5);
mMapView.getOverlays().add(myPath); 
```

# c# - 在 C# 中为 windows phone 创建 xml 解析器的问题

> ID：15557337
> 
> 赞同：0
> 
> 时间：2013-03-21T20:23:44.573
> 
> 标签：c#, windows-phone-7, xml-parsing

我不是专业的程序员，主要是自学成才。目前我的项目是为我用 C# 为 Windows 手机编写的应用程序创建一个 XML 解析器。要了解这一点，我正在尝试此处发布的演示：http: [//www.developer.nokia.com/Community/Wiki/Parse_Local_XML_file_in_Windows_Phone](http://www.developer.nokia.com/Community/Wiki/Parse_Local_XML_file_in_Windows_Phone)

一切都很好，直到我进入以下部分：

```
 private void btnparse_Click(object sender, RoutedEventArgs e) 
    {
             this._parser = XMLParser.Instance;        
             StreamResourceInfo strm = Application.GetResourceStream(new Uri("/LocalXmlParsing;component/States.xml",UriKind.Relative));
     //needs to be done only once
             StreamReader reader = new StreamReader(strm.Stream);
             string data = reader.ReadToEnd();
             _parser.DataToParse = data;
             _parser.ParseStateData();
             lstStates.ItemsSource = _parser.StateCollection; 
} 
```

我收到错误：“错误 2 当前上下文中不存在名称 '_parser'” 我会接受你们可以给我的任何建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T20:26:18.893

`this`始终是对当前对象（其成员函数正在对其执行）的引用。因此`this._parser`称为[“字段”](http://msdn.microsoft.com/en-us/library/ms173118.aspx)或“成员变量”。这些字段必须在类定义中定义。您没有向我们展示完整的类定义，但它肯定不存在。这就是编译器所抱怨的。

它应该看起来像这样：

```
class Foo {
    private XMLParser _parser;

    // your functions, like btnparse_Click
} 
```

或者，如果您只想在该函数的上下文中使用解析器，只需将其设为[局部变量](http://msdn.microsoft.com/en-us/library/aa664742.aspx)：

```
private void btnparse_Click(object sender, RoutedEventArgs e) 
{
    XMLParser parser = XMLParser.Instance;
    ... 
```

您还可以使用[隐式类型的局部变量](http://msdn.microsoft.com/en-us/library/bb384061.aspx)：

```
private void btnparse_Click(object sender, RoutedEventArgs e) 
{
    var parser = XMLParser.Instance;
    ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T20:27:04.793

检查 _parser 是否定义为类变量或者它是否是父类中的变量（如果您的类继承了基类）。我没有查看整个代码，但这就是错误所暗示的。

# ruby-on-rails - 在rails中查询7个随机产品，遍历它们，并收到未定义的方法'each'字符串错误

> ID：15557339
> 
> 赞同：0
> 
> 时间：2013-03-21T20:24:00.797
> 
> 标签：ruby-on-rails, ruby

在我的 taxons_controller 我有以下内容：

```
 @taxon = Taxon.find_by_permalink(params[:id])
 @related_products = @taxon.products.offset(rand(Spree::Product.count)).limit(7).name 
```

我已经测试了这种形式，它正在拉一个随机对象，但是当我把它放在我的显示视图中时：

```
 <ul>
      <%= @related_products.each do |related_product| %>
      <li><%= related_product.name %></li>
      <% end %>
    </ul> 
```

我在 Spree/taxons#show 中收到 NoMethodError

"Spree::Product" 的未定义方法 `each':String 提取的源代码（第 41 行附近）：

```
 <ul>
    41\.   <%= @related_products.each do |related_product| %>
       <li><%= related_product.name %></li>
       <% end %>
    </ul> 
```

我一直在使用 .each 变体，我不明白我做错了什么。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T20:27:17.873

您正在尝试迭代 a `string`，而您应该迭代 a `array`。

```
# Remove the .name at the end
@related_products = @taxon.products.offset(rand(Spree::Product.count)).limit(7).name
@related_products = @taxon.products.offset(rand(Spree::Product.count)).limit(7) 
```

# javascript - 比较时间戳

> ID：15557348
> 
> 赞同：0
> 
> 时间：2013-03-21T20:24:31.710
> 
> 标签：javascript, jquery

如果两个时间戳都采用 mysql 2013-03-21 18:16:50 格式，这段代码会起作用吗？

```
$.get('current.php', { lastTime: time, current: true, Cla: Class }, function(html) {
                var Date1 = Date.parse($(html).find("#timestamp").val());
                var Date2 = Date.parse($("#timestamp").val());
                if (Date.parse(Date1) < Date.parse(Date2)) {$(html).find("#timestamp").remove();}else {$("#timestamp").remove();}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T22:14:46.977

我想你想要这样的东西：

```
$.get('current.php', { lastTime: time, current: true, Cla: Class }, function(html) {
  var $dateInput1 = $(html).find('#timestamp'),
      $dateInput2 = $("#timestamp");
  if ($dateInput1.val() < $dateInput1.val()) {
    $dateInput1.remove();
  } else {
    $dateInput2.remove();
  }
  // ... add $html somewhere to the DOM ...
}); 
```

由于您的日期已经采用词法可比的格式，因此根本不需要使用`Date.parse()`。此外，您只需为每个元素创建一个 jQuery 对象，因此这种方式也更有效率。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T20:27:51.430

Date.parse 返回时间（以毫秒为单位），您可以使用它进行比较。

```
if (Date1 < Date2) {
          $(html).find("#timestamp").remove();
   }else {
       $("#timestamp").remove();
  } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T20:33:16.673

您`Date.parse`对这些值调用了两次，并且`Date.parse`不接受上一次调用返回的毫秒数作为有效日期。

```
if (Date1 < Date2) 
```

足以比较它们。请注意，如果其中任何一个都无法解析，您将与`NaN`.

# visual-studio-2010 - VS 2010 在未进行任何更改时更新 Designer.cs

> ID：15557352
> 
> 赞同：2
> 
> 时间：2013-03-21T20:24:44.443
> 
> 标签：visual-studio-2010, windows-forms-designer

当我在设计器视图中打开表单时，VS 2010 似乎正在更新我的表单的 Designer.cs 文件。

例如，假设我有一个带有 System.Windows.Forms.Label 类型标签的表单，并且我创建了标签，以便设计器文件具有（自动生成的代码）

```
this.myLabel.AutoSize = true;
this.myLabel.Font = new System.Drawing.Font("Tahoma", 8.25F,
System.Drawing.FontStyle.Bold, System.Drawing.GraphicsUnit.Point, ((byte)(0)));
this.myLabel.Location = new System.Drawing.Point(**25, 63**);
this.myLabel.Name = "myLabel";
this.myLabel.Size = new System.Drawing.Size(**101, 13**);
this.myLabel.TabIndex = 1;
this.myLabel.Text = "A simple windows label."; 
```

当我关闭设计器视图并再次打开它时，VS 2010*有时会将*其更改为

```
this.myLabel.AutoSize = true;
this.myLabel.Font = new System.Drawing.Font("Tahoma", 8.25F,
System.Drawing.FontStyle.Bold, System.Drawing.GraphicsUnit.Point, ((byte)(0)));
this.myLabel.Location = new System.Drawing.Point(**29, 78**);
this.myLabel.Name = "myLabel";
this.myLabel.Size = new System.Drawing.Size(**124, 17**);
this.myLabel.TabIndex = 1;
this.myLabel.Text = "A simple windows label."; 
```

当我除了打开文件之外什么都没做。

有谁知道为什么会这样？有没有其他人经历过这样的事情？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-21T22:44:00.773

功能，而不是错误。该表单最初是在其视频适配器每英寸点数设置为 96 的机器上设计的。您的机器具有不同的 DPI，120。在现代版本的 Windows 上很容易更改，您选择了 125%（中）设置在控制面板 + 显示中。

不同的 dpi 设置会影响您使用的字体的大小。在您的代码片段中有一个可见的，它是 8.25 点。一点是 1/72 英寸。所以文本最初是 8.25 * 1/72 = 0.114583 英寸高。dpi 为 96，即 0.114583 x 96 = 11 像素。请注意，这也解释了为什么将额外的 0.25 添加到磅值上，它是一个很好的整数。

但是现在你的 dpi 是 120，文本将是 8.25 x 1/72 x 120 = 14 像素。文本变大了，你的控件也需要变大，否则它会剪切文本，剪掉下降部分。

这是在您加载表单时自动完成的。基本属性是 AutoScaleMode，默认设置为 Font。还有 AutoScaleDimensions，您会发现它分配在 InitializeComponent() 方法的顶部。那是记住原始DPI设置的那个。

这也将发生在您用户的机器上。请确保表单正确自动缩放。如果您的控件具有不同的字体大小，您可能会遇到一些麻烦。只需将表单重新检查到源代码管理中，这样就不会再次发生这种重新缩放。

# android - Android HttpUrlConnection getInputStream 抛出 NullPointerException

> ID：15557355
> 
> 赞同：3
> 
> 时间：2013-03-21T20:24:52.110
> 
> 标签：android, nullpointerexception, inputstream, httpurlconnection

我正在尝试从此网址下载图像：

[https://hme_player_pictures.s3.amazonaws.com/test-512813ed3b83286c72f376c7-thumb100.jpg](https://hme_player_pictures.s3.amazonaws.com/test-512813ed3b83286c72f376c7-thumb100.jpg)

这是堆栈跟踪：

```
03-21 12:58:04.040: W/System.err(7084): java.lang.NullPointerException
03-21 12:58:04.040: W/System.err(7084):     at libcore.net.http.HttpConnection$Address.hashCode(HttpConnection.java:343)
03-21 12:58:04.045: W/System.err(7084):     at java.util.HashMap.get(HashMap.java:298)
03-21 12:58:04.050: W/System.err(7084):     at libcore.net.http.HttpConnectionPool.get(HttpConnectionPool.java:67)
03-21 12:58:04.050: W/System.err(7084):     at libcore.net.http.HttpConnection.connect(HttpConnection.java:128)
03-21 12:58:04.050: W/System.err(7084):     at libcore.net.http.HttpEngine.openSocketConnection(HttpEngine.java:308)
03-21 12:58:04.055: W/System.err(7084):     at libcore.net.http.HttpsURLConnectionImpl$HttpsEngine.makeSslConnection(HttpsURLConnectionImpl.java:460)
03-21 12:58:04.055: W/System.err(7084):     at libcore.net.http.HttpsURLConnectionImpl$HttpsEngine.connect(HttpsURLConnectionImpl.java:432)
03-21 12:58:04.055: W/System.err(7084):     at libcore.net.http.HttpEngine.sendSocketRequest(HttpEngine.java:282)
03-21 12:58:04.060: W/System.err(7084):     at libcore.net.http.HttpEngine.sendRequest(HttpEngine.java:232)
03-21 12:58:04.065: W/System.err(7084):     at libcore.net.http.HttpURLConnectionImpl.getResponse(HttpURLConnectionImpl.java:273)
03-21 12:58:04.065: W/System.err(7084):     at libcore.net.http.HttpURLConnectionImpl.getInputStream(HttpURLConnectionImpl.java:168)
03-21 12:58:04.070: W/System.err(7084):     at libcore.net.http.HttpsURLConnectionImpl.getInputStream(HttpsURLConnectionImpl.java:270)
03-21 12:58:04.070: W/System.err(7084): ... 
```

代码：

```
URL imageUrl = new URL(url);
HttpURLConnection c = (HttpURLConnection)imageUrl.openConnection();
InputStream in = c.getInputStream(); // Nullpointer exception on this line, c is definitely not null, I debugged 
```

无法弄清楚为什么它会抛出 NullPointerException。上面的网址在浏览器中确实有效。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T20:36:14.680

对于它的价值，我从 Android HTTP 库中看到了很多错误。从条形码扫描仪中，我得到了大约 3500 万人的堆栈跟踪，所以我想我已经看到了一切。下面是我们在应用程序中捕获和吞下的所有奇怪的东西。我建议您将其作为平台错误来解决，并优雅地失败。

[https://code.google.com/p/zxing/source/browse/trunk/android/src/com/google/zxing/client/android/HttpHelper.java](https://code.google.com/p/zxing/source/browse/trunk/android/src/com/google/zxing/client/android/HttpHelper.java)

```
 private static int safelyConnect(String uri, HttpURLConnection connection) throws IOException {
    try {
      connection.connect();
    } catch (NullPointerException npe) {
      // this is an Android bug: http://code.google.com/p/android/issues/detail?id=16895
      Log.w(TAG, "Bad URI? " + uri);
      throw new IOException(npe.toString());
    } catch (IllegalArgumentException iae) {
      // Also seen this in the wild, not sure what to make of it. Probably a bad URL
      Log.w(TAG, "Bad URI? " + uri);
      throw new IOException(iae.toString());
    } catch (SecurityException se) {
      // due to bad VPN settings?
      Log.w(TAG, "Restricted URI? " + uri);
      throw new IOException(se.toString());
    } catch (IndexOutOfBoundsException ioobe) {
      // Another Android problem? https://groups.google.com/forum/?fromgroups#!topic/google-admob-ads-sdk/U-WfmYa9or0
      Log.w(TAG, "Bad URI? " + uri);
      throw new IOException(ioobe.toString());
    }
    try {
      return connection.getResponseCode();
    } catch (NullPointerException npe) {
      // this is maybe this Android bug: http://code.google.com/p/android/issues/detail?id=15554
      Log.w(TAG, "Bad URI? " + uri);
      throw new IOException(npe.toString());
    } catch (NumberFormatException nfe) {
      // Again seen this in the wild for bad header fields in the server response!
      Log.w(TAG, "Bad server status? " + uri);
      throw new IOException(nfe.toString());
    }
  } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T21:29:29.693

疑似问题与亚马逊 s3 的 url 的主机名有关。

所以我改变了

[https://hme_player_pictures.s3.amazonaws.com/test-512813ed3b83286c72f376c7-thumb100.jpg](https://hme_player_pictures.s3.amazonaws.com/test-512813ed3b83286c72f376c7-thumb100.jpg)

到

[https://s3.amazonaws.com/hme_player_pictures/test-512813ed3b83286c72f376c7-thumb100.jpg](https://s3.amazonaws.com/hme_player_pictures/test-512813ed3b83286c72f376c7-thumb100.jpg)

它奏效了。我的 Java 代码现在很开心！

# android - Facebook Javascript SDK - Cordova 2.5 - iOS 没有在 acc 中返回 userId

> ID：15557356
> 
> 赞同：0
> 
> 时间：2013-03-21T20:24:53.000
> 
> 标签：android, ios, cordova, facebook-javascript-sdk

我正在开发我的第一个 Facebook 应用程序，使用 Phonegap 2.5 和 Phonegap Facbook 连接器插件。

在 Android 上一切正常，下面的代码显示响应，并且用户 ID 包含在响应中。

在 iOS 上，完全相同的代码也可以工作，返回一个 authtoken，但结果中的 userId 为空。

你知道问题可能是什么吗？

谢谢你的帮助！

```
 FB.init({
                appId : "xxxx",
                nativeInterface : CDV.FB,
                useCachedDialogs : false
            });
    //Some code later, Init is already called
        FB.login(function(response) {
            console.log(JSON.stringify(response));
                            //response.authResponse.userId is empty on iOS, not on Android
        }, {
            scope : "email"
        }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T06:40:10.300

我已经通过在 facebook api 调用 /me url 解决了这个问题。不过谢谢！

# scala - 为什么Scalac类型不匹配期望Int？

> ID：15557357
> 
> 赞同：3
> 
> 时间：2013-03-21T20:24:53.317
> 
> 标签：scala, type-inference, typechecking, scalac

我昨晚正在做一个项目，并且有一些这样的代码：

```
/* fixes warnings in 2.10 */
import scala.language.implicitConversions

/* had some kind of case class with some members */
case class Wrapper[A](x: A)

/* for convenience's sake */
implicit def aToWrapper[A](x: A) = Wrapper(x)

/* had some kind of Seq */
val xs: List[Wrapper[String]] =  List("hello", "world", "this", "is", "a", "test") 
```

然后我不小心写道：

```
xs foldLeft("") { (a, x) => a + x } 
```

遗漏了和`.`之间的内容。`xs``foldLeft`

有问题的类型有点复杂，它要求我注释 lambda 的参数类型，所以我很快就做了，认为这是我错误的根源。我最终得到了这样的结果：

```
xs foldLeft("") { (a: String, x: Wrapper[String]) => a + x } 
```

此时我收到错误：

```
<console>:13: error: type mismatch;
found   : (String, Wrapper[String]) => String
required: Int
           xs foldLeft("") { (a: String, x: Wrapper[String]) => a + x }
                                                            ^ 
```

显然修复是`xs.foldLeft("") ...`，但我一直想知道为什么编译器在这种情况下需要一个 Int 。谁能阐明这是如何解析的？这整天都在唠叨我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T21:41:48.707

当您省略点和括号时，您使用所谓的中缀表示法。它允许您编写`a + b`而不是`a.+(b)`. 这里的一个重要规则是，仅当调用具有以下形式时才允许这样做`object method paramlist`（请参阅[SLS 6.12.3](http://iainmcgin.github.com/scala-ref-markdown/ScalaReferenceWebTeX.html#infix-operations)）：

> 左结合运算符的右手操作数可能由括号括起来的几个参数组成，例如`e op (e 1 , ... , e n )`. 然后将该表达式解释为`e.op(e 1 , ... , e n )`。

`foldLeft`不适合这种形式，它使用`object method paramlist1 paramlist2`. 因此，如果您用运算符表示法编写此代码，编译器会将其视为`object.method(paramlist1).paramlist2`（如[SLS 6.12.2](http://iainmcgin.github.com/scala-ref-markdown/ScalaReferenceWebTeX.html#postfix-operations)中所述）：

> 后缀运算符可以是任意标识符。后缀操作`e op`被解释为`e.op`.

但这里应用了另一条规则：函数应用程序（[SLS 6.6](http://iainmcgin.github.com/scala-ref-markdown/ScalaReferenceWebTeX.html#function-applications)）。

> 应用程序`f(e 1 , ... , e m)`将该函数应用于`f`参数表达式 `e 1 , ... , e m`。
> 
> [...]
> 
> 如果`f`具有某种值类型，则应用程序被视为等效于`f.apply(e 1 , ... , e m)`，即由 定义的应用方法的应用程序`f`。

开始了：

```
scala> { (a, x) => a + x }
<console>:12: error: missing parameter type
              { (a, x) => a + x }
                 ^
<console>:12: error: missing parameter type
              { (a, x) => a + x }
                    ^ 
```

这只是一个缺少类型参数的函数文字。如果我们添加它们，一切都编译得很好：

```
scala> { (a: String, x: Wrapper[String]) => a + x }
res6: (String, Wrapper[String]) => String = <function2> 
```

编译器只是应用上述关于函数应用的规则：

```
scala> "" { (a: String, x: Wrapper[String]) => a + x }
<console>:13: error: type mismatch;
 found   : (String, Wrapper[String]) => String
 required: Int
              "" { (a: String, x: Wrapper[String]) => a + x }
                                                   ^

scala> "" apply { (a: String, x: Wrapper[String]) => a + x }
<console>:13: error: type mismatch;
 found   : (String, Wrapper[String]) => String
 required: Int
              "" apply { (a: String, x: Wrapper[String]) => a + x }
                                                         ^ 
```

因此，您的代码被解释为

```
scala> xs foldLeft ("").apply{ (a: String, x: Wrapper[String]) => a + x }
<console>:14: error: type mismatch;
 found   : (String, Wrapper[String]) => String
 required: Int
              xs foldLeft ("").apply{ (a: String, x: Wrapper[String]) => a + x }
                                                                      ^ 
```

但是为什么它会应用函数应用程序规则呢？也可以将函数文字用作后缀运算符。要找出我们收到显示的错误消息的原因，我们需要查看[SLS Scala Syntax Summary](http://iainmcgin.github.com/scala-ref-markdown/ScalaReferenceWebTeX.html#scala-syntax-summary)。在那里我们可以看到以下内容：

```
 InfixExpr         ::=  PrefixExpr
                      |  InfixExpr id [nl] InfixExpr
  PrefixExpr        ::=  [‘-’ | ‘+’ | ‘~’ | ‘!’] SimpleExpr 
  SimpleExpr        ::=  ‘new’ (ClassTemplate | TemplateBody)
                      |  BlockExpr
                      |  SimpleExpr1 [‘_’]
  SimpleExpr1       ::=  Literal
                      |  Path
                      |  ‘_’
                      |  ‘(’ [Exprs] ‘)’
                      |  SimpleExpr ‘.’ id 
                      |  SimpleExpr TypeArgs
                      |  SimpleExpr1 ArgumentExprs
                      |  XmlExpr
  Exprs             ::=  Expr {‘,’ Expr}
  ArgumentExprs     ::=  ‘(’ [Exprs] ‘)’
                      |  ‘(’ [Exprs ‘,’] PostfixExpr ‘:’ ‘_’ ‘*’ ‘)’
                      |  [nl] BlockExpr 
```

从上面描述的部分我们知道`ArgumentExprs`描述函数应用程序同时`InfixExpr`描述中缀表达式。由于[EBNF](http://en.wikipedia.org/wiki/Extended_Backus%E2%80%93Naur_Form)的规则，最高的规则具有最低的优先级。并且因为前一个规则被后一个规则调用，这意味着函数字面量是在中缀表达式之前应用的，因此会出现错误消息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T20:38:47.213

我相信你只能使用**二元运算符**作为中缀表示法。我认为您也可以使用括号来补救这种情况：(xs foldLeft ("")) { (a: String, x: Wrapper[String]) => a + x }。可能，它将您的原始代码解析为`xs.foldLeft("").{ (a: String, x: Wrapper[String]) => a + x }`. 看看这个答案：[When to use parenthesis in Scala infix notation](https://stackoverflow.com/questions/5592642/when-to-use-parenthesis-in-scala-infix-notation)

# jquery - 使用 for 循环或 $.each 分别检索 div 内的值

> ID：15557358
> 
> 赞同：-1
> 
> 时间：2013-03-21T20:24:57.287
> 
> 标签：jquery, html

```
<div class="head-text">
    <div class="body-text">
        <div class="line1">
            This is line one1
        </div>
        <div class="line2">
            This is line one1
        </div>
    </div>

    <div class="body-text">
        <div class="line1">
            This is line one2
        </div>
        <div class="line2">
            This is line one2
        </div>
    </div>

    <div class="body-text">
        <div class="line1">
            This is line one3
        </div>
        <div class="line2">
            This is line one3
        </div>
    </div>
</div> 
```

问题是我想单独检索文本。我尝试过使用循环，但我要么得到全部，要么只得到第一件事。

例如：如果我需要在循环中检索文本“This is line one2”，那么我应该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T20:28:10.670

Use

```
$("div[class^=line]").each(function(){
    alert($(this).text());
}); 
```

And if you need all of them in an array :

```
var arr = $("div[class^=line]").map(function(){
            return $(this).text();
          }).get(); 
```

If you need the alert on click: [http://jsfiddle.net/mzZR8/](http://jsfiddle.net/mzZR8/)

```
$("div[class^=line]").click(function(){
   alert($(this).text());
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T20:53:52.200

尝试这个！

```
$(".body-text").click(function(evt){
   alert($(evt.target).text());
}); 
```

“evt”参数允许您访问您直接单击的“目标”。

这是一个[小提琴](http://jsfiddle.net/Dtwigs/38QuN/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T20:27:21.433

```
$('body-text').each(function() {
    $(this).children('div').each(function() {
        myText = $(this).text();
    }
} 
```

更新：根据您的评论，听起来您根本不想要一个循环。您可能只是想要，例如：

```
$('.body-text:nth-child(3)').children('.line2').text(); 
```

# three.js - 在没有 FPS 下降的情况下有效地生成块/体素地形？

> ID：15557362
> 
> 赞同：0
> 
> 时间：2013-03-21T20:25:17.363
> 
> 标签：three.js, terrain, physijs

我在使用 Three.JS 生成/显示地形时遇到了一点问题，而没有主要的 FPS 下降。这是我为创建每个块并设置正确位置而编写的代码：

```
var TO_METERS = 10;
var testOb = [];

var blockGeometry = new THREE.CubeGeometry(TO_METERS, TO_METERS, TO_METERS);
var blockMat = new THREE.MeshLambertMaterial({color: 0xFFFFFF, wrapAround: true, side: THREE.FrontSide, shading: THREE.FlatShading});

function loadChunk(startX, startY, startZ) {
    var yVar = 0;
    var zVar = 0;
    var blockCo = 0;
    var combinedGeometry = new THREE.CubeGeometry(0, 0, 0);

    for (var x = 0; x <= 4999; x++) {
        testOb[x] = new THREE.Mesh();
            testOb[x].geometry = blockGeometry;

        if (blockCo == 10) {
            blockCo = 0;

            if (zVar == 90) {
                yVar += TO_METERS;
                zVar = 0;
            }
            else {
                zVar += TO_METERS;
            }
        }

        testOb[x].position.x = (blockCo * TO_METERS) + startX;
        testOb[x].position.y = (yVar - 500) + startY;
        testOb[x].position.z = zVar + startZ;

        testOb[x].castShadow = true;
        blockCo++;

        THREE.GeometryUtils.merge(combinedGeometry, testOb[x]);
    }

    var cMesh = new Physijs.BoxMesh(combinedGeometry, blockMat, 0);
    scene.add(cMesh);
} 
```

基本上，它创建每个块，设置位置并将它们合并在一起`THREE.GeometryUtils.merge`以构成“块”（矩形）MineCraft 样式。

我很确定构成每个块的大量单个块导致低 FPS。[只有 10 个块，FPS 很好](http://braddodi.com/game/test2.php)。如果我再添加，FPS 会急剧下降。

我的一个想法是使用 WebWorker 进行处理，但由于我无法添加块甚至在其中使用 Three.JS，这是不可能的。这也只会有助于加载时间，而不是我遇到的 FPS 问题。

如果有人对我将如何解决此问题有任何想法，我将不胜感激。:) 也许可以隐藏相机看不到的块？或者我可能只是完全以错误的方式做事。谢谢！

# asp.net - 会话状态只能在 enableSessionState 设置为 true asp.net 时使用

> ID：15557369
> 
> 赞同：0
> 
> 时间：2013-03-21T20:25:32.557
> 
> 标签：asp.net

我有点困惑......我的 web.config 中有以下内容，但我仍然收到错误消息。此错误仅在我登录时发生，因为用户信息在会话中。在未登录模式下，我只是得到空用户。

错误：

```
Session state can only be used when enableSessionState is set to true, 
either in a configuration file or in the Page directive. Please also
make sure that System.Web.SessionStateModule or a custom session state
module is included in the <configuration>\<system.web>\<httpModules> 
section in the application configuration. 
```

网络配置：

```
<sessionState mode="SQLServer" allowCustomSqlDatabase="true" sqlConnectionString="data source=MyServer;Initial Catalog=MyDatabase;user id=user;password=password" cookieless="false" timeout="20" /> 
```

我在这里想念什么？

# asp.net-mvc - 匹配不包含该参数的路由时，ActionLinks 恢复为查询字符串参数

> ID：15557371
> 
> 赞同：2
> 
> 时间：2013-03-21T20:25:37.053
> 
> 标签：asp.net-mvc, razor, asp.net-mvc-4, asp.net-mvc-routing

我正在努力实现[将](https://stackoverflow.com/questions/8314148/how-can-my-route-use-optional-parameters-in-the-middle-of-the-url-using-asp-mvc3)我的应用程序路由更改为如下所示的目标：

`hxxp://host/MyController/Widgets/3/AddWhatsit`

此路线的视图将帮助用户将 Whatsit 添加到 Widget 3。

同样，我希望创建新 Widget 的路线是：

`hxxp://host/MyController/Widgets/Create`

我已经创建了单独的路线来尝试和促进这一点。他们是：

```
 routes.MapRoute("DefaultAction",
                            "{controller}/{action}",
                            new {controller = "Home", action = "Index"});

           routes.MapRoute("Default",
                            "{controller}/{id}/{action}",
                            new {controller = "Home", action = "Index", id = UrlParameter.Optional}); 
```

我遇到的问题是，当我浏览到小部件的索引页面（/MyController/Widgets，匹配“DefaultAction”路由）时，任何会引入不属于该路由的新 url 参数的 ActionLinks 都会变成查询字符串价值。因此，例如，Widget 3 的编辑链接将呈现为： `Widget/Edit?id=3 instead of (what I would prefer):` Widget/3/Edit

我想我知道我没有把我的（可选）id 参数放在路线的末尾，这把事情搞砸了。

我应该把它吸起来，然后在路线的尽头留下 id 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T20:41:51.717

有可能实现这一点。要获得看起来像 /Home/1/Index 的锚链接，请设置如下路由：

```
public static void RegisterRoutes(RouteCollection routes)
{
    routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

    routes.MapRoute(
        name: "Custom",
        url: "{controller}/{id}/{action}"
        );

    routes.MapRoute(
        name: "Default",
        url: "{controller}/{action}/{id}",
        defaults: new { controller = "Home", action = "Index", id = UrlParameter.Optional }
    );
} 
```

然后，在视图中：

```
@Html.ActionLink("Here", "Index", "Home", new { id = 5 }, null) 
```

你会得到这样的链接：

```
<a href="/Home/5/Index">Here</a> 
```

怪癖是限制自定义路线。在这种情况下，我删除了默认值，它们没有意义。当然还有路线的顺序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T20:42:02.190

我相信您需要更改路线的顺序。请记住，MVC 查看路由列表并选择第**一个**匹配的路由。带有 ID 参数的第二条路由更具体，因此应该在路由表中排在第一位。

即使您在 ActionLink 中指定了 ID 参数，您也指定了控制器和操作。因此，第一个路由是由 RoutingEngine 选择的。

最后，删除 ID 属性的可选参数。由于您希望在拥有 Id 时选择该路由，因此您不希望它成为可选参数，您希望它必须与该路由匹配。

```
routes.MapRoute("Default","{controller}/{id}/{action}", 
   new {controller = "Home", action = "Index"});

routes.MapRoute("DefaultAction", "{controller}/{action}", 
  new {controller = "Home", action = "Index"}); 
```

# php - PHP按日期值排序数组

> ID：15557373
> 
> 赞同：8
> 
> 时间：2013-03-21T20:25:40.640
> 
> 标签：php, arrays, date, sorting

我的 php 代码中有以下数组格式：

```
foreach ($events as $info) {
    $events_array[] = array(
        'title' => $info->Name,
        'date'  => $info->Date
    );
}
function cb($a, $b) {
    return strtotime($a['date']) - strtotime($b['date']);
}
usort($events_array, 'cb'); 
```

编辑：日期值的格式为：YYYY-MM-DD

实际上，当我执行 print_r 时，我得到了

```
[title] => SimpleXMLElement Object ( ) [date] => SimpleXMLElement Object ( ) 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-21T20:29:33.503

您必须创建自己的多列排序函数（因为您的数组是二维的）：

```
array_sort_by_column($events_array, 'date');

var_dump($events_array); 
```

排序功能：

```
function array_sort_by_column(&$array, $column, $direction = SORT_ASC) {
    $reference_array = array();

    foreach($array as $key => $row) {
        $reference_array[$key] = $row[$column];
    }

    array_multisort($reference_array, $direction, $array);
} 
```

# android - 长时间不活动后在交换光标上获取空指针

> ID：15557376
> 
> 赞同：1
> 
> 时间：2013-03-21T20:26:07.197
> 
> 标签：android, android-fragments, android-loadermanager

我的加载器、片段和内容提供程序工作正常。我的所有列表都可以更新，但是在长时间不活动（主要活动暂停）之后，如果我重新激活应用程序，我会在 swapsursor 调用上得到一个空指针

```
public class ListeFragment extends ListFragment implements LoaderManager.LoaderCallbacks<Cursor> {
    private ListItemSelectListener listeSelectListener;

    @Override
    public void onAttach(Activity activity) {
        super.onAttach(activity);
        try {
            listeSelectListener = (ListItemSelectListener) activity;
        } catch (ClassCastException e) {
            throw new ClassCastException(activity.toString()
            + " doit implementer ListItemSelectListener");
        }
    }

    // public void onSaveInstanceState (Bundle outState) {
    // super.onSaveInstanceState(outState);
    // int scroll = this.getSelectedItemPosition();
    // outState.putInt("POS", scroll); }

    @Override
    public void onListItemClick(ListView l, View v, int position, long id) {
        super.onListItemClick(l, v, position, id);
        Log.e ("Resto", "pos="+position+" Rowid= "+id);
        listeSelectListener.onItemSelected(position, id);      
    }

    private static final int RESTO_RECENT_LOADER = 0x01;
    private static final int RESTO_ALPHA_LOADER = 0x02;
    private static final int RESTO_HIGH_LOADER = 0x03;
    private static final int RESTO_SEARCH_LOADER = 0x04;
    // private static final String AUTHORITY = "ca.usimage.resto.RestoProvider";
    // private static final String RESTOS_BASE_PATH = "restos";

    private SimpleCursorAdapter adapter;

    public void afficheList(int loader_id, String query) {
        Log.e ("Resto", "loader_id= "+loader_id);
        Bundle mBundle = new Bundle();
        mBundle.putString("search_query", query);
        getLoaderManager().restartLoader(loader_id, mBundle, this);
    }

    @Override
    public void onActivityCreated(Bundle savedInstanceState) {
        super.onActivityCreated(savedInstanceState);
        setRetainInstance(true);
        if (savedInstanceState == null) {
            String[] uiBindFrom = { RestoDatabase.COL_ETAB, RestoDatabase.COL_MONTANT };
            int[] uiBindTo = { R.id.TextView01, R.id.Montant };
            // default loader on startup is RECENT_LOADER
            LoaderManager lm = getLoaderManager();
            if (lm.getLoader(RESTO_RECENT_LOADER) != null) {
                lm.initLoader(RESTO_RECENT_LOADER, null, this);
            }

            // if (adapter == null) {
            adapter = new SimpleCursorAdapter(
                getActivity().getApplicationContext(), R.layout.row,
                null, uiBindFrom, uiBindTo,
                CursorAdapter.FLAG_REGISTER_CONTENT_OBSERVER);
            setListAdapter(adapter);
            // }
            // this.setSelection(savedInstanceState.getInt("POS"));
        }
    }

    public Loader<Cursor> onCreateLoader(int id, Bundle args) {
        String[] projection = { RestoDatabase.ID, RestoDatabase.COL_ETAB,  RestoDatabase.COL_MONTANT };
        switch (id){
        case RESTO_RECENT_LOADER:
            return new CursorLoader(getActivity(),
                RestoProvider.CONTENT_URI, projection, null, null, "date_infraction DESC");

        case RESTO_ALPHA_LOADER:
            return new CursorLoader(getActivity(),
                RestoProvider.CONTENT_URI_GROUPBY, projection, null, null,"etablissement ASC");

        case RESTO_HIGH_LOADER:
            return new CursorLoader(getActivity(),
                RestoProvider.CONTENT_URI, projection, null, null, "montant DESC");

        case RESTO_SEARCH_LOADER:
            return new CursorLoader(getActivity(),
                RestoProvider.CONTENT_URI, projection, "etablissement like \"%" + args.getString("search_query") + "%\"", null, "etablissement ASC");

        default: return null;
        }
    }

    public void onLoadFinished(Loader<Cursor> loader, Cursor cursor) {
        adapter.swapCursor(cursor);
        // position cursor at top of list
        // this.setSelection(0);
    }

    public void onLoaderReset(Loader<Cursor> loader) {
        adapter.swapCursor(null);
    } 
```

似乎操作栏有问题，因为我试图有一个默认选择的选项卡，它在启动时调用加载程序。

```
 /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
  ;
        setContentView(R.layout.liste);
        final ActionBar ab = getActionBar();

        ab.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);
        ab.setDisplayOptions(0, ActionBar.DISPLAY_SHOW_TITLE);

        if (savedInstanceState != null){
            tab_pos = savedInstanceState.getInt("tabState");               
            ab.addTab(ab.newTab().setText(R.string.tab_recente).setTabListener(this),0,false);
            ab.addTab(ab.newTab().setText(R.string.tab_alpha).setTabListener(this),1,false);
            ab.addTab(ab.newTab().setText(R.string.tab_fortes).setTabListener(this),2,false);
            ab.setSelectedNavigationItem(tab_pos);       
        } else {       
            ab.addTab(ab.newTab().setText(R.string.tab_recente).setTabListener(this),0,true);
            ab.addTab(ab.newTab().setText(R.string.tab_alpha).setTabListener(this),1,false);
            ab.addTab(ab.newTab().setText(R.string.tab_fortes).setTabListener(this),2,false);
        }

    public void onTabReselected(Tab tab, FragmentTransaction ft) {
        // position cursor at top of list if user retaps a tab
        ListeFragment listeFrg =  (ListeFragment)getFragmentManager().findFragmentById(R.id.listeFragment);
        listeFrg.setSelection(0);
    }

    public void onTabSelected(Tab tab, FragmentTransaction ft) {
        // TODO Auto-generated method stub

        ListeFragment listeFrg = (ListeFragment)getFragmentManager().findFragmentById(R.id.listeFragment);

        int position = tab.getPosition();
        Log.e ("resto", "pos= "+position);
        switch (position) {
        case 0:        
            listeFrg.afficheList(RESTO_RECENT_LOADER, null);
            break;
        case 1:
            listeFrg.afficheList(RESTO_ALPHA_LOADER, null);
            break;
        case 2:
            listeFrg.afficheList(RESTO_HIGH_LOADER, null);
            break;
        }           
    }

    public void onTabUnselected(Tab tab, FragmentTransaction ft) {
        // TODO Auto-generated method stub    
    }

    @Override
    protected void onSaveInstanceState(Bundle outState) {
        super.onSaveInstanceState(outState);
        outState.putInt("tabState", getActionBar().getSelectedTab().getPosition());
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T14:23:23.180

您的问题很可能出现在`onActivityCreated`.

长时间不活动后，操作系统会破坏您的活动。当您尝试返回您的活动时，它会重新创建。在`onCreated`调用活动之后，调用`onActivityCreated`片段，但是您有一个条件，即创建`adapter`唯一的 if`savedInstanceState`为 null。如果它不为空，则不创建`adapter`，这会在稍后访问它时导致空指针异常。

# c# - 通过连接到 RavenDb。用户名和密码

> ID：15557379
> 
> 赞同：0
> 
> 时间：2013-03-21T20:26:14.923
> 
> 标签：c#, .net, authentication, ravendb

如何在不使用连接字符串的情况下使用用户名和密码连接到 RavenDb。我想在代码中传递值。我已经看到了一些在配置文件中设置用户名/密码的示例，但这不是我想要的。

这不是 Windows 用户，我只想要一个普通的 ua/pwd 挑战，仅此而已。

另外，我将如何在服务器端添加 ravendb 用户？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T00:34:49.357

阿尔文，

```
new DocumentStore
{
   Url = "http://your-server:8080",
   DefaultDatabase = "your-db",
   Credentials = new NetworkCredentials("foo", "bar");
} 
```

# android - 导入无法解决

> ID：15557380
> 
> 赞同：5
> 
> 时间：2013-03-21T20:26:18.360
> 
> 标签：android

我有一个包含多个导入的活动类，但其中一些在 Eclipse 中无法识别。我看到错误导入类名无法解析。

那是我的代码：

```
package com.ap.mapa;

import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import com.google.android.gms.maps.CameraUpdateFactory;
import com.google.android.gms.maps.GoogleMap;
import com.google.android.gms.maps.MapFragment;
import com.google.android.gms.maps.model.BitmapDescriptorFactory;
import com.google.android.gms.maps.model.LatLng;
import com.google.android.gms.maps.model.Marker;
import com.google.android.gms.maps.model.MarkerOptions;

public class MapaLugaresActivity extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_mapa_lugares);

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.mapa_lugares, menu);
    return true;
}

} 
```

错误出现在每个导入 com.google.android.gms.maps 中。如果我输入另一个类作为 import android.content.Context; 没有错误。

我该如何修复它们？

谢谢。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-03-21T21:18:57.703

确保您使用的 api 版本是 Google API 以及安装了 google play 服务

**谷歌播放服务**

*   打开SDK Manager，滚动到底部，展开“Extras”，选择“Google Play Services”，接受并下载。

*   安装完成后，将其导入工作区

    *   Import -> Project -> Android -> Existing Android Code into Workspace ，选中 copy to workspace 并浏览到您的 android sdk 文件夹所在的位置：<android sdk 文件夹>/extras/google/google_play_services/libproject/google-play-services_lib
    *   点击完成

**项目**

*   转到项目属性，点击 Android，点击 Google APIs
*   修改构建路径以包含最近添加的 jar (google-play-services-lib.jar) [位于 google-play-service-lib 项目的 bin 目录下]
*   您需要确保您的应用已在 Google 注册
    *   记下此应用程序的包名称
    *   为了让这个在谷歌注册，你需要在 <android_sdk>.android 下验证你的 SHA1 证书指纹作为*debug.keystore*
    *   打开一个 cmd 窗口（我假设您在 Windows 上工作）浏览到 C:\Program Files\Java\<JDK version> 或安装了 java 的位置，输入以下命令以获取 SHA1 指纹：
    *   keytool -list -v -keystore "C:\Program Files (x86)\Android\android-sdk.android\debug.keystore" -alias androiddebugkey -storepass android -keypass android
        *   引用路径（需要引号）是您的密钥库的路径
        *   右键单击“标记”突出显示“SHA1：”后的文本按回车键复制

**Google API 控制台** 因此，复制 SHA1 指纹后，您需要转到 https:\code.google.com/apis/console

*   在“Google apis”下，单击下拉菜单并点击“创建”，将 API 项目命名为您想要的任何名称。
    *   现在应该会弹出服务，向下滚动到“Google Maps API v2 或 v3”和“Google Maps Android API v2”，单击其中一个的开关
    *   单击左侧的 API Access，将您带到“创建新的 Android 密钥”屏幕
    *   还记得你复制的 SHA1：指纹吗？将其粘贴到出现的两者中然后 <SHA1 指纹文本>;< package_name as described before>

返回项目

**回到项目**

*   转到 AndroidManifest.xml

    *   将这些权限添加到您的清单中：

    *   确保你匹配你自己的包名而不是 com.example.androidmapsv2 `<permission android:name="com.example.androidmapsv2.permission.MAPS_RECEIVE" android:protectionLevel="signature"></permission> <uses-permission android:name="com.example.androidmapsv2.permission.MAPS_RECEIVE"/> <uses-permission android:name="com.google.android.providers.gsf.permission.READ_GSERVICES"/> <uses-permission android:name="android.permission.INTERNET"/> <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/> <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/> <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/> <uses-feature android:glEsVersion="0x00020000" android:required="true"/>`

    *   在`<application >`标签下，在它下面添加：

    *   `<meta-data android:name="com.google.android.maps.v2.API_KEY" android:value="PASTE YOUR SHA1 CERTIFICATE KEY HERE"/>`

        *   值来自 SHA1 指纹上方的 api 控制台

很多，我意识到了，但这就是我使用地图的方式

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-26T06:38:57.697

试试这个答案：

[导入 com.google.android.gms 无法解析](https://stackoverflow.com/questions/15990075/the-import-com-google-android-gms-cannot-be-resolved)

1.  使用 Google Play jar 制作一个库项目（在上面的答案中它使用 maps.jar）。我使用了与@Vnge 的回复中使用的相同的 jar，即 <android sdk 文件夹>/extras/google/google_play_services/libproject/google-play-services_lib

2.  在该库项目进入工作区后，请从您当前的项目中引用该项目，即出现错误的项目。我的答案中的链接提供了执行此操作的方法。还有@Alex在链接中的回答。

希望它可以帮助你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T20:42:50.707

@axmug。您需要使用 Android SDK Manager 添加 Google Maps API。

1.  打开 Android SDK 管理器。
2.  检查项目中使用的特定 Android 版本的 Google Map API：
3.  安装并重启eclipse。

希望这可以帮助！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-29T11:29:52.253

在项目属性 - Android 检查库 google-play-services_lib.jar 是否具有正确的路径。

# c# - LINQ to Entities 查询不投影子集合

> ID：15557382
> 
> 赞同：1
> 
> 时间：2013-03-21T20:26:18.707
> 
> 标签：c#, entity-framework

什么会导致这个查询。仅开始投影`c`而不填充其子集合`ParcelValues`。

```
var result = (from c in _context.Parcels.Include("ParcelValues")
where c.STRAP == strap
select c); 
```

我正在运行我的应用程序，上面将返回一个`result`类型的对象，`IQueryable<Parcel>`其中的属性`Request.ParcelValues`填充了正确的记录。现在，出于某种原因，无论我如何尝试使用包含，都只会投影 Parcel 字段。

**生成的 SQL**

```
exec sp_executesql N'SELECT 
[Project2].[LAND_AREA] AS [LAND_AREA], 
[Project2].[STRAP] AS [STRAP], 
[Project2].[SITUS] AS [SITUS], 
[Project2].[ZIP_CODE] AS [ZIP_CODE], 
[Project2].[MAILING_ADDRESS] AS [MAILING_ADDRESS], 
[Project2].[PROPERTY_USE] AS [PROPERTY_USE], 
[Project2].[SUBDIVISION] AS [SUBDIVISION], 
[Project2].[DSCR] AS [DSCR], 
[Project2].[INCORPORATION] AS [INCORPORATION], 
[Project2].[SEC_TWP_RGE] AS [SEC_TWP_RGE], 
[Project2].[CENSUS] AS [CENSUS], 
[Project2].[WATERFRONT] AS [WATERFRONT], 
[Project2].[C1] AS [C1], 
[Project2].[ID] AS [ID], 
[Project2].[STRAP1] AS [STRAP1], 
[Project2].[YEAR] AS [YEAR], 
[Project2].[LAND] AS [LAND], 
[Project2].[IMPROVEMENT] AS [IMPROVEMENT], 
[Project2].[JUST] AS [JUST], 
[Project2].[ASSESSED] AS [ASSESSED], 
[Project2].[TAXABLE] AS [TAXABLE]
FROM ( SELECT 
    [Limit1].[STRAP] AS [STRAP], 
    [Limit1].[SITUS] AS [SITUS], 
    [Limit1].[ZIP_CODE] AS [ZIP_CODE], 
    [Limit1].[MAILING_ADDRESS] AS [MAILING_ADDRESS], 
    [Limit1].[PROPERTY_USE] AS [PROPERTY_USE], 
    [Limit1].[SUBDIVISION] AS [SUBDIVISION], 
    [Limit1].[DSCR] AS [DSCR], 
    [Limit1].[LAND_AREA] AS [LAND_AREA], 
    [Limit1].[INCORPORATION] AS [INCORPORATION], 
    [Limit1].[SEC_TWP_RGE] AS [SEC_TWP_RGE], 
    [Limit1].[CENSUS] AS [CENSUS], 
    [Limit1].[WATERFRONT] AS [WATERFRONT], 
    [Extent2].[ID] AS [ID], 
    [Extent2].[STRAP] AS [STRAP1], 
    [Extent2].[YEAR] AS [YEAR], 
    [Extent2].[LAND] AS [LAND], 
    [Extent2].[IMPROVEMENT] AS [IMPROVEMENT], 
    [Extent2].[JUST] AS [JUST], 
    [Extent2].[ASSESSED] AS [ASSESSED], 
    [Extent2].[TAXABLE] AS [TAXABLE], 
    CASE WHEN ([Extent2].[ID] IS NULL) THEN CAST(NULL AS int) ELSE 1 END AS [C1]
    FROM   (SELECT TOP (1) 
        [Extent1].[STRAP] AS [STRAP], 
        [Extent1].[SITUS] AS [SITUS], 
        [Extent1].[ZIP_CODE] AS [ZIP_CODE], 
        [Extent1].[MAILING_ADDRESS] AS [MAILING_ADDRESS], 
        [Extent1].[PROPERTY_USE] AS [PROPERTY_USE], 
        [Extent1].[SUBDIVISION] AS [SUBDIVISION], 
        [Extent1].[DSCR] AS [DSCR], 
        [Extent1].[LAND_AREA] AS [LAND_AREA], 
        [Extent1].[INCORPORATION] AS [INCORPORATION], 
        [Extent1].[SEC_TWP_RGE] AS [SEC_TWP_RGE], 
        [Extent1].[CENSUS] AS [CENSUS], 
        [Extent1].[WATERFRONT] AS [WATERFRONT]
        FROM [dbo].[PARCELS] AS [Extent1]
        WHERE [Extent1].[STRAP] = @p__linq__0 ) AS [Limit1]
    LEFT OUTER JOIN [dbo].[PARCEL_VALUES] AS [Extent2] ON [Limit1].[STRAP] = [Extent2].[STRAP]
)  AS [Project2]
ORDER BY [Project2].[STRAP] ASC, [Project2].[C1] ASC',N'@p__linq__0 nvarchar(4000)',@p__linq__0=N'0001020003' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T13:34:30.213

**了解您的数据**

因此，最终我的整个问题是由实体框架的已知设计功能/错误（取决于您如何看待它）和我的数据引起的。我正在使用 nchar(25) 将我的密钥从表中导入到我的 varchar(16) 表中大多数表我在填充我的目标之前修剪密钥。我忘记修剪似乎永远不会加载的表上的键，除非单独查询。因此，事实证明 EF 不能延迟加载相关表，其中一些在键中有尾随空格（空格也必须匹配）。

一旦我更新了我的脚本以加载我所有的目标无空格。问题解决了。

# json - 使用 drakma:http-request POST JSON 数据

> ID：15557383
> 
> 赞同：3
> 
> 时间：2013-03-21T20:26:19.527
> 
> 标签：json, post, lisp, common-lisp, drakma

我正在尝试使用[drakma](http://weitz.de/drakma/)将一些 JSON 数据发布到 Web 服务。

```
 (ql:quickload :st-json)
    (ql:quickload :cl-json)
    (ql:quickload :drakma)

    (defvar *rc* (merge-pathnames (user-homedir-pathname) ".apirc"))

    (defvar *user*
      (with-open-file (s *rc*)
        (st-json:read-json s)))

    (defvar api-url (st-json:getjso "url" *user*))
    (defvar api-key (st-json:getjso "key" *user*))
    (defvar api-email (st-json:getjso "email" *user*))

    (setf drakma:*header-stream* *standard-output*)

    (defvar *req* '(("date" . "20071001") ("time" . "00") ("origin" . "all")))

    (format t "json:~S~%" (json:encode-json-to-string *req*))

    (defun retrieve (api request)
      (let* ((cookie-jar (make-instance 'drakma:cookie-jar))
             (extra-headers (list (cons "From" api-email)
                                  (cons "X-API-KEY" api-key)))
             (url (concatenate 'string api-url api "/requests"))
             (stream (drakma:http-request url
                           :additional-headers extra-headers
                           :accept "application/json"
                           :method :post
                           :content-type "application/json"
                           :external-format-out :utf-8
                           :external-format-in :utf-8
                           :redirect 100
                           :cookie-jar cookie-jar
                   :content (json:encode-json-to-string request)
                           :want-stream t)))
          (st-json:read-json stream)))

 (retrieve "/datasets/tigge" *req*) 
```

不幸的是，我收到了一个错误，尽管我认为数据似乎可以正确编码为 JSON 以及 drakma 生成的标头。显然有问题`:content`（错误消息中的整数列表只是 JSON 编码数据的 ASCII 代码列表）。

```
json:"{\"date\":\"20071001\",\"time\":\"00\",\"origin\":\"all\",\"type\":\"pf\",\"param\":\"tp\",\"area\":\"70\\/-130\\/30\\/-60\",\"grid\":\"2\\/2\",\"target\":\"data.grib\"}"

POST /v1/datasets/tigge/requests HTTP/1.1
Host: api.service.int
User-Agent: Drakma/1.3.0 (SBCL 1.1.5; Darwin; 12.2.0; http://weitz.de/drakma/)
Accept: application/json
Connection: close
From: me@gmail.com
X-API-KEY: 19a0edb6d8d8dda1e6a3b21223e4f86a
Content-Type: application/json
Content-Length: 193

debugger invoked on a SIMPLE-TYPE-ERROR:
  The value of CL+SSL::THING is #(123 34 100 97 116 97 115 101 116 34 58 34
                              ...), which is not of type (SIMPLE-ARRAY
                                                          (UNSIGNED-BYTE 8)
                                                          (*)). 
```

知道这段代码有什么问题吗？提前谢谢了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T09:58:03.130

感谢 Drakma 和 Chunga drakma-devel 的一般兴趣列表中的 Kevin 和 Hans 帮助我 - 原来问题是由最近版本的 cl+ssl 中的错误引起的，该版本已在开发分支中修复。我使用[quicklisp](http://www.quicklisp.org/)，这是 Hans Hübner 建议我更新我的 cl+ssl 安装的方法，它有效：

> 您可以查看最新的 cl+ssl - 其中包含对该问题的修复：
> 
> ```
> cd ~/quicklisp/local-projects/
> git clone git://gitorious.org/cl-plus-ssl/cl-plus-ssl.git 
> ```
> 
> Quicklisp 会自动从那个位置找到 cl+ssl。请记住在您升级到将来会修复的较新的 quicklisp 版本后删除该结帐。

# windows - MS Word 与其他进程之间的通信

> ID：15557385
> 
> 赞同：0
> 
> 时间：2013-03-21T20:26:23.993
> 
> 标签：windows, ms-word, jscript

我在桌面上打开了一个 Word 文档。我希望能够获取有关 Word 文档状态的信息，例如文档 url 或内容。实现它的手段是什么？

目前，我正在使用 JScript。但是，下一行只给出了一个新的 Word 实例，而不是当前打开的 Word 文档。

```
var word = WScript.CreateObject("Word.Application"); 
```

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T20:58:47.420

要使用的功能是`GetObject()`. 它将返回一个指向打开的第一个 Word 实例的指针。

# c# - 拆解、查询和重组泛型

> ID：15557391
> 
> 赞同：1
> 
> 时间：2013-03-21T20:26:40.143
> 
> 标签：c#, generics

我有一个方法

```
T Get<T>(string key)
{..
} 
```

如果来电者打电话给我，`T = IEnumerable<V>`我需要做：

```
return GetEnum<V>(key) 
```

因此我需要

*   测试 T 是否为`IEnumerable<X>`
*   获取 X 并将其塞入 GetEnum 方法

我怀疑我不能做第二个

显然我可以编写不同的方法，但这不是我与现有代码库的合同。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T20:39:06.957

你可以通过一点反思来做到这一点，但它不会特别快：

```
static class TheClass
{
   public static T Get<T>(string key)
   {
      // Adjust these as required:
      const BindingFlags flags = BindingFlags.Static | BindingFlags.NonPublic;

      if (typeof(T).IsGenericType && typeof(IEnumerable<>) == typeof(T).GetGenericTypeDefinition())
      {
         Type v = typeof(T).GetGenericArguments()[0];
         var baseMethod = typeof(TheClass).GetMethod("GetEnum", flags);
         var realMethod = baseMethod.MakeGenericMethod(v);
         return (T)(object)realMethod.Invoke(null, new[] { key });
      }

      // TODO: Handle other types...
   }

   private static IEnumerable<T> GetEnum<T>(string key)
   {
      // TODO: Return an enumerable...
   }
} 
```

* * *

**编辑**
如果要检查所需的返回类型是否*实现* `IEnumerable<>`，可以使用：

```
Type enumerable = typeof(T).GetInterface("System.Collections.Generic.IEnumerable`1");
if (enumerable != null)
{
   Type v = enumerable.GetGenericArguments()[0];
   var baseMethod = typeof(TheClass).GetMethod("GetEnum", flags);
   var realMethod = baseMethod.MakeGenericMethod(v);
   return (T)(object)realMethod.Invoke(null, new[] { key });
} 
```

但是，您的`GetEnum<V>`方法必须返回一个可以转换为 的值`T`，否则您将得到一个无效的转换异常。

例如，如果您的`GetEnum<V>`方法返回`new List<T>(...)`，那么您的`Get<T>`方法仅在`T`is`List<T>`或由 实现的接口时才有效`List<T>`。如果你打电话`Get<HashSet<int>>`，它会失败。

# google-drive-api - 如何在网站上显示来自 Google Drive 的图像？

> ID：15557392
> 
> 赞同：107
> 
> 时间：2013-03-21T20:26:43.353
> 
> 标签：google-drive-api

我的一个客户已将一些照片上传到他们的[Google Drive](https://docs.google.com/folder/d/0B4QTOLODWzqaRFpxcWk3TjgtTEk/edit?pli=1)，并希望我在他们公司的网站上显示他们的照片。我查看了在网页上显示 Google Drive 内容的[文档](https://developers.google.com/drive/publish-site)，但似乎这只是在网页上显示内容的说明，它已经这样做了。

我的问题是，如何直接在客户端的网页上显示内容？

* * *

## 回答 #1

> 赞同：114
> 
> 时间：2016-01-25T14:01:36.913

使用 Google Drive 中的“获取链接”选项获取 URL。

在 HTML 中使用`<img>`标签并将链接粘贴到那里。

将 URL更改`Open?`为`uc?`.

* * *

## 回答 #2

> 赞同：80
> 
> 时间：2018-08-28T22:36:50.467

# 嵌入 Google Drive 图像的示例

原文网址：https: **//drive.google.com/file/d/0B6wwyazyzml-OGQ3VUo0Z2thdmc** /view

您需要从原始 URL 中复制 ID（和 之间的字符`/d/`）`/view`，并在此 URL 中使用它：

https://drive.google.com/uc?export=view&id=0B6wwyazyzml-OGQ3VUo0Z2thdmc **_**

下图是使用这种方法嵌入的：

![](../Images/f3223950a3b9106fec4f0b0ae7006768.png)

[保拉·博罗斯卡摄](https://unsplash.com/pborowska)

```
<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Google Drive</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
</head>

<body>
    <img src="https://drive.google.com/uc?export=view&id=0B6wwyazyzml-OGQ3VUo0Z2thdmc">
</body>

</html>
```

谢谢[https://codepen.io/jackplug/pen/OPmMJB](https://codepen.io/jackplug/pen/OPmMJB)

* * *

## 回答 #3

> 赞同：68
> 
> 时间：2017-03-14T12:51:32.127

我找到了一种不使用外部站点的方法。

```
<img src="https://drive.google.com/uc?export=view&id=XXX"> 
```

[https://gist.github.com/evansims/f23e2f49e3d4be793038](https://gist.github.com/evansims/f23e2f49e3d4be793038)

```
<a href="https://drive.google.com/uc?export=view&id=XXX">
    <img src="https://drive.google.com/uc?export=view&id=XXX"
    style="width: 500px; max-width: 100%; height: auto"
    title="Click for the larger version." />
</a> 
```

您需要获取图像的 ID：单击“在新窗口中打开”并从 URL 中获取 ID。

![点击“在新窗口中打开”"></p>     </div>
    <div class=](../Images/672e7ad41f6a74ca459b0fa1dad0f347.png)

于 2017-03-14T12:51:32.127 回答

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2013-04-02T21:00:02.703

如果您有一些图像文件，只需将它们上传到您的 Google Drive 上的**公共**文件夹，从地址栏中复制其**文件夹 ID （例如***0B0Gi4v5omoZUVXhCT2kta1l0ZG8*）并将其粘贴到[GDrives](http://gdriv.es)的表单中以选择您自己的别名（例如*myimgs*） - 和瞧！[您可以使用例如http://gdriv.es/myimgs/myimage.jpg](http://gdriv.es/myimgs/myimage.jpg)一张一张地访问图像。

如果您想在您的网站上嵌入整个文件夹（在一个框架中），您可以使用以下 URL 之一，将 [folderID] 替换为您自己的 ID：

*   [http://gdriv.es/myimgs/](http://gdriv.es/myimgs/)
*   [https://docs.google.com/folder/d/[folderID]/preview?rm=minimal](https://docs.google.com/folder/d/%5BfolderID%5D/preview?rm=minimal)
*   [https://drive.google.com/folderview?id=[folderID]](https://drive.google.com/folderview?id=%5BfolderID%5D)

如果您更喜欢以 XML 或 JSON 格式获取文件列表，则可以使用[YQL](http://developer.yahoo.com/yql/console/?q=select%20%2a%20from%20html%20where%20url%3D%22https%3A//googledrive.com/host/0B_p1jUoXa8fqVG9sd0dXdFl5R2c/%22%20and%20xpath%3D%27//div%5b@class%3D%22folder-cell%22%5d/a%27)。

注意：您也可以使用**Google + 照片**来托管和嵌入您的图片。

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2017-02-18T07:32:03.977

**更新 2017**年 2 月 18 日谷歌已经贬低了谷歌驱动器上的免费托管功能，现在你不能在谷歌驱动器上免费托管你的静态网站。

但是，如果您想在 Google 驱动器上托管您的 JavaScript、CSS 和图像文件，那么您仍然可以这样做。您只需要获取文件的永久链接。遵循更新的教程（2017）。

[http://www.bloggerseolab.com/2017/02/host-images-javascript-and-css-on-google-drive.html](http://www.bloggerseolab.com/2017/02/host-images-javascript-and-css-on-google-drive.html)

* * *

## 回答 #6

> 赞同：10
> 
> 时间：2015-06-20T19:01:07.580

从[谷歌驱动器帮助页面](https://support.google.com/drive/answer/2881970?hl=en)：

> 要使用云端硬盘托管网页：
> 
> 1.  在 drive.google.com 打开云端硬盘并选择一个文件。
> 2.  单击页面顶部的共享按钮。
> 3.  单击共享框右下角的高级。
> 4.  单击更改...。
> 5.  选择开 - 在网络上公开，然后单击保存。
> 6.  在关闭共享框之前，从“共享链接”下方字段中的 URL 中复制文档 ID。文档 ID 是 URL 中斜线之间的大小写字母和数字字符串。
> 7.  共享类似于“www.googledrive.com/host/[doc id]”的 URL，其中 [doc id] 替换为您在第 6 步中复制的文档 ID。
> 
> 现在任何人都可以查看您的网页。

如果您想在网站中查看您的图片，请像往常一样在您的 html 中嵌入图片链接：

```
<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>Example image from Google Drive</title>
    </head>
    <body>
        <h1>Example image from Google Drive</h1>

        <img src="https://www.googledrive.com/host/[doc id]" alt="whatever">

    </body>
</html> 
```

笔记：

> 从 2015 年 8 月 31 日开始，Google 云端硬盘中面向用户和开发者的网络托管服务将被弃用。在 2016 年 8 月 31 日之前，您可以继续使用此功能一年，届时我们将停止通过 googledrive.com/host/[doc id] 提供内容。[更多信息](https://gsuite-developers.googleblog.com/2015/08/deprecating-web-hosting-support-in.html?utm_source=feedburner&utm_medium=feed&utm_campaign=Feed:%20GoogleAppsDeveloperBlog%20(Google%20Apps%20Developer%20Blog))

* * *

## 回答 #7

> 赞同：9
> 
> 时间：2020-01-05T20:45:26.820

扩展上述答案。我编写了一个 UNIX 命令，因此我可以在我的工作流程中轻松完成它。

1.  复制需要转换的 Google Drive 照片 URL。例如

复制 Google 云端硬盘图片网址

```
https://drive.google.com/file/d/XXXX/view?usp=sharing 
```

2.  打开终端并执行此命令。

命令：

```
echo https://drive.google.com/uc\?export\=view\&id\=`echo $(pbpaste) | cut -d '/' -f 6` 
```

输出：

```
https://drive.google.com/uc?export=view&id=XXXX 
```

*PS如果你从这里复制命令。确保再次复制 Google Drive 图片 URL。:P*

> 无需像从剪贴板那样更改步骤 2 命令中的任何内容。确保它以正确的格式复制，例如 `https://drive.google.com/file/d/XXXX/view?usp=sharing`

* * *

## 回答 #8

> 赞同：9
> 
> 时间：2020-10-29T13:52:22.833

我现在有同样的问题，但这篇文章对我有帮助。2020年更新！

我从这篇文章中得到了解决方案：
[https ://dev.to/imamcu07/embed-or-display-image-to-html-page-from-google-drive-3ign](https://dev.to/imamcu07/embed-or-display-image-to-html-page-from-google-drive-3ign)

这些是文章中的步骤：

1.  将您的图像上传到谷歌驱动器。
2.  从共享选项共享您的图像。
3.  复制您的共享链接（示例：[https](https://drive.google.com/file/d/14hz3ySPn-zBd4Tu3NtY1F05LSGdFfWvp/view?usp=sharing) ://drive.google.com/file/d/14hz3ySPn-zBd4Tu3NtY1F05LSGdFfWvp/view?usp=sharing ）
4.  从你的链接复制id，在上面的链接中，id是：**14hz3ySPn-zBd4Tu3NtY1F05LSGdFfWvp**
5.  查看下面的链接并替换 ID。 [https://drive.google.com/thumbnail?id=1jNWSPr_BOSbm7iIJQTTbl7lXX06NH9_r](https://drive.google.com/thumbnail?id=1jNWSPr_BOSbm7iIJQTTbl7lXX06NH9_r)

替换 ID 后：[https ://drive.google.com/thumbnail?id=14hz3ySPn-zBd4Tu3NtY1F05LSGdFfWvp](https://drive.google.com/thumbnail?id=14hz3ySPn-zBd4Tu3NtY1F05LSGdFfWvp)

6.  现在将链接插入到您的`<img>`标签。

现在它应该可以工作了。

* * *

## 回答 #9

> 赞同：8
> 
> 时间：2019-09-13T17:58:50.850

如果您想在您的博客或任何网站中嵌入 Google 驱动器图像，那么只需按照说明进行操作：-

**博主**

1.  将图像上传到谷歌驱动器
2.  点击图片并与公众分享
3.  `<img src='https://drive.google.com/uc?export=view&amp;id=1OCx6mUEMbWcwCQbDePA5PeeOh'/>`

* * *

## 回答 #10

> 赞同：6
> 
> 时间：2020-07-22T20:12:41.070

此方法允许您以所需的任何大小或分辨率嵌入图像：

1.  在您的 Google 云端硬盘中创建一个文件夹

2.  通过“共享”按钮公开文件夹（或图像本身）

3.  复制 URL 并提取 ID。它应该看起来像
    `https://drive.google.com/file/d/ID-HERE/view?usp=sharing`

4.  使用这样的东西作为你的图像 src：
    `https://drive.google.com/thumbnail?id=${imageId}&sz=w${width || 200}-h${height || 200}`

    例子：
    `https://drive.google.com/thumbnail?id=ID-HERE&sz=w200-h200`

您可以修改之后的数字`w`并`h`获得所需的任何大小。图像将被缩小以适应这些尺寸。

* * *

## 回答 #11

> 赞同：5
> 
> 时间：2013-12-11T06:40:36.367

Google Drive Hosting 现已弃用。它从 2016 年 8 月 31 日起停止工作。

[在 Google Drive 上托管 - 弃用时间表](https://support.google.com/drive/answer/2881970?hl=en)

我已经删除了有关如何以前在 Google Drive 上托管图像的说明。

* * *

## 回答 #12

> 赞同：5
> 
> 时间：2015-09-08T20:06:17.823

列表显示

`<iframe src="https://drive.google.com/embeddedfolderview?id=YOURID#list" width="700" height="500" frameborder="0"></iframe>`

网格视图

`<iframe src="https://drive.google.com/embeddedfolderview?id=YOURID#grid" width="700" height="500" frameborder="0"></iframe>`

阅读更多： [https ://thomas.vanhoutte.be/miniblog/embed-add-google-drive-folder-file-website/](https://thomas.vanhoutte.be/miniblog/embed-add-google-drive-folder-file-website/)

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2018-05-25T11:05:01.037

```
<img src="https://drive.google.com/uc?export=view&id=Your_Image_ID" alt=""> 
```

我在我的 wordpress 网站上使用，因为在本地主机上存储图像文件会占用大量空间并减慢我的网站速度

我使用 textmate，因为使用“alt/option”按钮可以轻松同时编辑多个 URL

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2021-07-18T18:37:04.643

正如[这个西班牙语博客](https://clasicwebtools.com/articulos/programacion/host-fotos-GDrive.html)所解释并提供了一个链接转换器。

1.  在您的谷歌驱动器中上传您的图像。
2.  与网络上的任何人分享。
3.  复制分享链接。

然后您可以使用[ClasicWebTools](https://clasicwebtools.com/articulos/programacion/host-fotos-GDrive.html)提供的转换器在您的网络上使用它。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2015-08-23T19:43:03.367

我不知道更好的方法，但您可以使用 php 对页面进行数据挖掘。例如，如果您去谷歌并共享一个文件夹，然后转到该文件夹​​，它看起来像

[https://drive.google.com/folderview?id=0B8TT0olkjsdkfji9jekbFF4LWc&usp=sharing](https://drive.google.com/folderview?id=0B8TT0olkjsdkfji9jekbFF4LWc&usp=sharing)

^^^ 不是真正的链接

您正在寻找的是此页面源代码中的单个图像

然后使用 php 获取源代码

```
<? $f = fopen ("http://www.example.com/f", r);
echo $f;
?> 
```

现在 $f 有了源代码，您可以使用其他 php 命令仅将 URLS 与您想要的图像分开。这将需要一些工作，但非常可行。

一旦你有这些图像链接显示你想要的方式，只需将它们构建到 div 或 table 结构中以显示在画廊上，甚至可能添加一个 graybox 元素以获得效果

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2019-02-07T22:31:07.457

在 Drive 上公开托管图像的几个有趣的替代方案（已弃用）：

**1.谷歌照片**

如果您将图片上传到 Google 相册而不是云端硬盘，则会获得一个公共网络链接。

这种行为让我有点意外，但链接很长而且很随机，所以他们显然是在实践“默默无闻的隐私”。

**2.谷歌绘图**

如果您使用[“Google 绘图”程序](https://docs.google.com/drawing)（内置于云端硬盘）*创建*图像，您可以按下以获取公共链接。`File > Publish to Web`

[![在此处输入图像描述](../Images/c4ca889187da269afc645dc401d2a733.png)](https://i.stack.imgur.com/lX4Cj.png)

注意：如果您尝试共享现有图像，这*可能*`file > Page Setup`是一种解决方案——将图像粘贴到编辑器中并将画布裁剪为图像 ( )——但这有点麻烦。但是，如果您需要进行一些基本的图像编辑，或者如果您正在尝试创建一个简单的图标/图形，我认为这很不错。

* * *

## 回答 #17

> 赞同：-2
> 
> 时间：2013-03-24T00:34:15.760

如果文件在公共文件夹中，您可以使用[Google Drive 网站托管](https://developers.google.com/drive/publish-site)。

* * *

## 回答 #18

> 赞同：-3
> 
> 时间：2020-11-02T17:39:39.220

我想你把你的照片上传到你的驱动器中你需要做的就是当你打开你的谷歌驱动器时，只需在 chrome 中打开你的开发工具并前往你的 img 标签并复制 src 属性旁边的链接并使用它

# ios - UICollectionView 的 cellForItemAtIndexPath 无法识别单个单元格帧

> ID：15557405
> 
> 赞同：0
> 
> 时间：2013-03-21T20:27:30.700
> 
> 标签：ios, xcode, uicollectionview

我在向 UICollectionView 中的单个单元格添加标签时遇到问题。使用下面显示的代码，标签仅添加到集合中的第一个单元格，而不会添加到其他单元格。但是，如果我将第三行到最后一行中的 cell.contentView 更改为 collectionView，标签都会添加到正确的位置，这意味着我至少要处理正确的框架，但我需要将标签添加到细胞本身。

```
- (UICollectionViewCell *)collectionView:(UICollectionView *)collectionView cellForItemAtIndexPath:(NSIndexPath *)indexPath
    {
    UICollectionViewCell* cell = [collectionView dequeueReusableCellWithReuseIdentifier:@"CalendarItem"
                                                                                                      forIndexPath:indexPath];
    UILabel* dayLabel = [[UILabel alloc] initWithFrame:cell.frame];
    [dayLabel setFont:[UIFont fontWithName:@"Helvetica-Bold" size:15]];
    [dayLabel setBackgroundColor:[UIColor clearColor]];
    [dayLabel setTextAlignment:NSTextAlignmentCenter];
    [dayLabel setText:@"!"];

    [cell.contentView addSubview:dayLabel];
    [cell setBackgroundColor:[UIColor whiteColor]];

    return cell;
} 
```

我正在以编程方式完成这一切，所以这是我正在使用的集合的初始化代码：

```
frame.origin.y = self.view.frame.origin.y + ROW_SIZE;
frame.size.height = self.view.frame.size.height/2 - 2 * ROW_SIZE;
UICollectionViewFlowLayout *flow = [[UICollectionViewFlowLayout alloc] init];   
CGSize size = CGSizeMake(frame.size.width/7 - 2 * CALENDAR_EDGE_SPACING,
                                 frame.size.height/5 - 2 * CALENDAR_EDGE_SPACING);
[flow setItemSize:size];
[flow setScrollDirection:UICollectionViewScrollDirectionVertical];
calendarView = [[UICollectionView alloc] initWithFrame:frame collectionViewLayout:flow];

[calendarView registerClass:[UICollectionViewCell class] forCellWithReuseIdentifier:@"CalendarItem"]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T20:41:49.793

您永远不应该引用单元格的框架。集合视图移动它们，删除它们，并且通常对您不想考虑的单元格做意想不到的事情。

如果您希望标签占据整个单元格，则要将标签的框架设置为单元格的`contentView`框架。如果你这样做，一切都应该开始完美运行。

使用`collectionView`works 代替的原因`cell.contentView`是，实际上，单元格位于集合视图中的某个任意位置，例如 (150, 1024)。因此，当您在原点 (150, 1024) 向内容视图添加标签时，它实际上远低于您正在查看的视图；但是当您将标签直接添加到集合视图时，它与单元格位于同一位置。

# c++ - 三法则的例外？

> ID：15557406
> 
> 赞同：16
> 
> 时间：2013-03-21T20:27:31.937
> 
> 标签：c++, copy-constructor, circular-dependency, rule-of-three

我已经阅读了很多关于 C++[规则三的](https://stackoverflow.com/questions/4172722/what-is-the-rule-of-three)内容。许多人对此发誓。但是当规定规则时，它几乎总是包含“通常”、“可能”或“可能”这样的词，表示存在例外情况。我还没有看到太多关于这些例外情况可能是什么的讨论——三法则不成立的情况，或者至少坚持三法则没有任何优势的情况。

**我的问题是我的情况是否是三原则的合法例外。**我相信在我下面描述的情况下，显式定义的复制构造函数和复制赋值运算符是必要的，但默认的（隐式生成的）析构函数可以正常工作。这是我的情况：

我有两个类，A 和 B。这里有问题的是 A。B 是 A 的朋友。A 包含一个 B 对象。B 包含一个 A 指针，该指针旨在指向拥有 B 对象的 A 对象。B 使用此指针来操作 A 对象的私有成员。除了在 A 构造函数中之外，B 永远不会被实例化。像这样：

```
// A.h

#include "B.h"

class A
{
private:
    B b;
    int x;
public:
    friend class B;
    A( int i = 0 )
    : b( this ) {
        x = i;
    };
}; 
```

和...

```
// B.h

#ifndef B_H // preprocessor escape to avoid infinite #include loop
#define B_H

class A; // forward declaration

class B
{
private:
    A * ap;
    int y;
public:
    B( A * a_ptr = 0 ) {
        ap = a_ptr;
        y = 1;
    };
    void init( A * a_ptr ) {
        ap = a_ptr;
    };
    void f();
    // this method has to be defined below
    // because members of A can't be accessed here
};

#include "A.h"

void B::f() {
    ap->x += y;
    y++;
}

#endif 
```

我为什么要这样设置我的课程？我保证，我有充分的理由。这些类实际上比我在这里所包含的要多得多。

所以剩下的很简单，对吧？没有资源管理，没有三巨头，没问题。错误的！A 的默认（隐式）复制构造函数是不够的。如果我们这样做：

```
A a1;
A a2(a1); 
```

我们得到一个新的 A 对象`a2`，它与 相同`a1`，意思`a2.b`是相同的`a1.b`，意思`a2.b.ap`是仍然指向`a1`！这不是我们想要的。我们必须为 A 定义一个复制构造函数，它复制默认复制构造函数的功能，然后将 new 设置`A::b.ap`为指向新的 A 对象。我们将此代码添加到`class A`：

```
public:
    A( const A & other )
    {
        // first we duplicate the functionality of a default copy constructor
        x = other.x;
        b = other.b;
        // b.y has been copied over correctly
        // b.ap has been copied over and therefore points to 'other'
        b.init( this ); // this extra step is necessary
    }; 
```

出于同样的原因，复制赋值运算符是必要的，并且将使用复制默认复制赋值运算符的功能然后调用`b.init( this );`.

但是不需要显式的析构函数；因此，这种情况是三法则的一个例外。我对吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-21T21:33:33.750

不要太担心“三法则”。规则不是盲目遵守的；他们在那里让你思考。你想过。你已经得出结论，析构函数不会这样做。所以就不写了。规则的存在是为了不要*忘记*编写析构函数，从而泄漏资源。

尽管如此，这种设计为 B::ap 创造了错误的可能性。这是一整类潜在的错误，如果它们是一个类，或者以更健壮的方式捆绑在一起，则可以消除它们。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-21T20:42:09.470

似乎与`B`强耦合`A`，并且总是应该使用`A`包含它的实例？那`A`总是包含一个`B`实例？他们通过友谊访问彼此的私人成员。

因此，人们想知道为什么它们是单独的类。

但是假设您出于其他原因需要两个类，这是一个简单的修复程序，可以消除所有构造函数/析构函数的混淆：

```
class A;
class B
{
     A* findMyA(); // replaces B::ap
};

class A : /* private */ B
{
    friend class B;
};

A* B::findMyA() { return static_cast<A*>(this); } 
```

您仍然可以使用包含，并使用宏找到`A`from`B`的`this`指针的实例。`offsetof`但这比使用`static_cast`编译器并将其加入到指针数学中更麻烦。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-21T22:41:18.317

我和@dspeyer 一起去。你思考，你决定。实际上有人已经得出结论，通常三法则（如果您在设计期间做出正确的选择）归结为二法则：使您的资源由库对象管理（如上面提到的智能指针），您通常可以摆脱析构函数。如果你足够幸运，你可以摆脱所有这些并依靠编译器为你生成代码。

附带说明：您的复制构造函数不会复制编译器生成的一个。您在其中使用复制赋值，而编译器将使用复制构造函数。摆脱构造函数主体中的分配并使用初始化列表。它会更快更干净。

很好的问题，来自 Ben 的很好的回答（另一个在工作中让我的同事感到困惑的技巧），我很高兴给你们两个投票。

# php - 如何在 64 位安装的 PHP 上使用 32 位整数？

> ID：15557407
> 
> 赞同：5
> 
> 时间：2013-03-21T20:27:32.967
> 
> 标签：php, int

转移到生产环境时，我的代码出现问题，因为生产服务器是 32 位，而我的开发机器是 64 位（我正在运行 Kubuntu 12.04 64 位）。我的问题是。是否可以在不安装 23 位版本的 PHP 的情况下强制 int 为 32 位？那个或允许我选择最大 int 值的库

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-21T20:34:38.190

整数是该平台上指针的大小。（32 位 PHP --> 32 位整数。64 位 PHP --> 64 位整数）。

请注意，当整数运算溢出时，变量变为浮点数。[PHP 文档](http://php.net/manual/en/language.types.integer.php)很好地解释了这一切。

我不确定您在代码中所做的事情会导致您关心整数的大小。但是，如果您只关心值的 32 位，则始终可以屏蔽低 32 位：

```
$val = $something & 0xFFFFFFFF; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-03-09T15:51:15.637

```
$r = $r & 0xFFFFFFFF;
if ($r & 0x80000000)
{
    $r = $r & ~0x80000000;
    $r = -2147483648 + $r;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-08-12T14:48:47.093

> ```
> $r = $r & 0xFFFFFFFF;
> if ($r & 0x80000000)
> {
>     $r = $r & ~0x80000000;
>     $r = -2147483648 + $r;
> } 
> ```

试图解释是谁要求的。

取你的 $r 大数字变量（假设在 64 位上传播），只让最右边的 32 位通过。

```
$r = $r & 0xFFFFFFFF; //aka 0x00000000FFFFFFFF 
```

现在 64 位 $r 变量有 32 个零和 32 位。请注意，通常最左边的位是符号，在 64 位和 32 位表示中：加号 (0) 或减号 (1)，因此 PHP 现在将 64 位 $r 视为正数。

```
if ($r & 0x80000000) { 
```

“ **32 个零，你的 32 位**”与“ **32 个零，1 和 31 个零**”进行与运算：如果这是真的，意味着至少（最多）一个 1，这再次意味着：“在 32 位世界中，这是一个负数”，在这种情况下，我们还需要告诉 PHP 这是一个负数，因为 64 位 $r 变量的最左边的位仍然是 0，PHP 仍然认为是一个正数。

因此，让我们告诉 PHP 这实际上是一个负数并重新设置该数字。第一步，将 32 位的最左边设置为零，以强制 32 位为正。

```
$r = $r & ~0x80000000; 
```

~0x80000000 确实可以重写为 0xFFFFFFFF7FFFFFFF：32 个，1 个零，31 个。

现在你在一个 64 位变量中有一个正的 32 位数字表示，它是它相关的 32 位负表示的补充：例如，如果你一开始有 64 个（十进制的 -1），此时 $r 是 32 个零，1您刚刚设置的零，31 个（十进制的 2147483647）。

您现在应该明白这一点：

```
$r = -2147483648 + $r; 
```

最小可表示的 32 位数字 + 我们的互补正数。

此时，$r 变量仍然是一个 64 位变量，但它现在正确地表示了您在开始时选择的最右边 32 位的负值。

整个问题是，在 64 位 PHP 中，如果您提取最右边的 32 位并填充另一个 64 位变量，该值仍然是正数，因为 64 位的最左边是 0。我们想要实现的是：制作 64 位变量负数，如果提取的 32 位表示负数；如果提取的 32 位表示正数，则 64 位变量为正数。

# objective-c - 如何分发可可框架的多个变体

> ID：15557410
> 
> 赞同：0
> 
> 时间：2013-03-21T20:27:37.013
> 
> 标签：objective-c, xcode, cocoa, frameworks

我有一个想要分发的 Cocoa 框架。对于不想将其作为子模块引入并自己构建的人，我想提供一个预构建版本：ECLogging.framework。

问题在于该框架具有具有不同行为的 Debug/Release 变体（不仅仅是不同的编译器选项，还可能实际执行不同的代码）。

分发这个以及人们设置他们的 Xcode 项目的最惯用的方式是什么？

我希望人们能够做到 #import ，所以我不能将框架的调试版本重命名为 ECLoggingDebug.framework （例如）。

所以我可以在这样的文件夹中给他们框架：ECLogging/Debug/ECLogging.framework Release/ECLogging.framework

然后，人们很容易设置一个框架搜索路径 ECLogging/$(CONFIGURATION)/，它将选择正确的路径。

这在编译和链接期间工作正常，但您还需要将正确的版本嵌入到构建的应用程序中。

在 Copy Files 阶段（进行嵌入的正常方式），Xcode 想知道它到底在哪里，我认为我无法以某种方式使用环境变量来告诉它。

当然，我可以编写一个脚本，它只是复制它。我对此很好，但必须要求框架的用户这样做似乎很笨拙。

有没有更好的办法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T15:20:39.647

假设我正确理解了场景，这就是我要做的。我只会制作一个版本的框架。我不会让框架的行为依赖于编译时调试/发布配置（大概使用#ifdefs 等），而是使用（框架）全局变量来指示调试与发布模式。我会添加一个简单的方法来打开调试模式（例如`[ECLogging setDebugModeEnabled:YES]`），用户可以在启动时调用它来更改框架的行为。然后，对他们来说很容易：

```
#if DEBUG
[ECLogging setDebugModeEnabled:YES];
#endif 
```

# ios - Can't get my custom UITableViewCell to show

> ID：15557422
> 
> 赞同：2
> 
> 时间：2013-03-21T20:27:55.800
> 
> 标签：ios, objective-c, uitableview

I am using a TableView xib and all the delegates and datasource seem to be running fine. If I set `self.textLabel.text`, it displays the generic number of tableviews correctly, but I need to have my custom TableViewCell showing.

I created a HistoryCell.xib that has just a tableviewcell in it. I created a UITableViewCell class "HistoryCell.h/HistoryCell.m" and it is set as the file owner of HistoryCell.xib. I connected the UILabels to the HistoryCell.h `UILabel statusLabel` `UILabel nameLabel` `UILabel timeLabel`

In my main ViewController class int he `cellForRowAtIndexPath`

I am putting in

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

static NSString *CellIdentifier = @"historyCellType";
HistoryCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil) {
    cell = [[HistoryCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
}

cell.nameLabel.text = @"Donald Duck";

return cell;

} 
```

What am I doing wrong?

Thanks!

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-21T21:21:43.170

您应该像这样注册笔尖（可能在 viewDidLoad 中）：

```
[self.tableView registerNib:[UINib nibWithNibName:@"HistoryCell" bundle:nil ] forCellReuseIdentifier:@"historyCellType"]; 
```

然后在您的 cellForRowAtIndexPath 方法中，使用这种不需要 if cell == nil 子句的新方法：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

HistoryCell *cell = [tableView dequeueReusableCellWithIdentifier:@"historyCellType" forIndexPath:indexPath];

cell.nameLabel.text = @"Donald Duck";

return cell; 
```

}

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-21T20:33:10.470

您需要反序列化实际的 XIB 数据：

```
HistoryCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil) {
    NSArray *cellnib = [[NSBundle mainBundle] loadNibNamed:@"HistoryXIBName" owner:self options:nil];
    cell = (HistoryCell *)[cellnib objectAtIndex:0];
} 
```

否则，它只是使用“默认”单元格。

**编辑**：此外，如果您使用情节提要，动态单元原型消除了从 NIB 文件创建单元的需要（如果您可以选择的话。）

**编辑第二个：** 你也可以试试这个（假设你使用的是 ARC）：

```
HistoryCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil) {
    HistoryCell *aNewCell = [[HistoryCell alloc] initWithNibName:@"HistoryXIBName" bundle:nil];
    cell = (HistoryCell *)*aNewCell.view;
} 
```

在包含视图的 XIB 文件中，还有另一种方法使用您的单元格的插座，这比我在 iOS4 最新版本时使用的涉及更多。如果编辑后的版本不适合你，我会挖掘一个旧项目并记住我是如何做到的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T20:35:17.820

当您将 tableViewCell 与 xib 一起使用时，同时从 xib 加载实例化。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
    {

    static NSString *CellIdentifier = @"historyCellType";
    HistoryCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[[NSBundle mainBundle]loadNibNamed:@"HistoryCell"
                                         owner:nil
                                       options:nil]lastObject];
    }

    cell.nameLabel.text = @"Donald Duck";

    return cell;

    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-27T13:34:35.873

```
- (UITableViewCell *)tableView:(UITableView *)tableView 
       cellForRowAtIndexPath:(NSIndexPath *)indexPath { 
    static NSString *cellidentifier=@"cell1"; 
    customcell *cell =
      (customcell*)[tableView dequeueReusableCellWithIdentifier:cellidentifier];

    if (cell==nil)  {

    [tableView registerNib:[UINib nibWithNibName:@"Customcell" bundle:nil] 
               forCellReuseIdentifier:cellidentifier]; 

    cell =
     (customcell*)[tableView dequeueReusableCellWithIdentifier:cellidentifier 
                 forIndexPath:[NSIndexPath indexPathForItem:indexPath.row 
                                                  inSection:indexPath.section]];   
    }   

    return cell; 
} 
```

# java - how to look for items in one list from another list in java

> ID：15557423
> 
> 赞同：0
> 
> 时间：2013-03-21T20:27:59.160
> 
> 标签：java, list, iteration

I have 2 lists, i'm iterating list1.. if the current item in list1 exists in list2 then i need to make a change in the property of list1.

The lists are just list of objects:

```
list1 = [ObjectVO, ObjectVO]
list2 = ['w', 'x', 'y', 'z'] 
```

where ObjectVO.getId() would return a string such as 'w', ...'z'

My code is as follows:

```
Iterator it = list1.iterator();
while(it.hasNext()){
    objVO = (ObjectVO) it.next();
    if(list2.contains(objVO.getId()){
        objVO.setFlag(true);  
    }
} 
```

The problem here is that the the objVO.setFlag(true) is being executed always! like list2 contains all items in list 1 but that's not true, list 2 is only a subset of list1 so it shouldn't evaluate to true for all of them.

How do I fix this or is there a better way to accomplish this?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T20:30:47.607

为什么不只迭代第二个列表？

```
for(ObjectVO objVO : list2){
    objVO.setFlag(list1.contains(objVO.getId()));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T20:47:46.423

您可以将第二个列表转换为相同的数据类型，使其具有可比性，并使用 Apache Commons 集合来查找交集。只需将所有 ObjectVO.getId() 放入一个列表中。

```
Collection intersection = CollectionUtils.intersection(a, b); 
```

# android - AlertDialog doesn't want to be displayed

> ID：15557436
> 
> 赞同：0
> 
> 时间：2013-03-21T20:28:59.267
> 
> 标签：android, android-alertdialog

I have good working code when I asked the user to delete item ot not.

```
case R.id.item_Delete:
        Log.d("TAG","Deletion ...");
        AlertDialog.Builder delAllDialog = new AlertDialog.Builder(this);
        delAllDialog.setTitle("Confirm deletion");
        TextView dialogTxt_id = new TextView(this);
        LayoutParams dialogTxt_idLayoutParams = new LayoutParams(LayoutParams.WRAP_CONTENT,
                LayoutParams.WRAP_CONTENT);
        dialogTxt_id.setLayoutParams(dialogTxt_idLayoutParams);
        dialogTxt_id.setText("Delete?");
        LinearLayout layout = new LinearLayout(this);
        layout.setOrientation(LinearLayout.VERTICAL);
        layout.addView(dialogTxt_id); 
        delAllDialog.setView(layout);
        delAllDialog.setPositiveButton("OK", new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface arg0, int arg1) {
                delete();
            }
        });
        break; 
... 
```

It works great! I just **copy** this peace of code and place it to another similar activity in right the same menu code. And I have got `Deletion..` in my log and then **nothing happened**. LogCat it clear, no errors.

I search and find several other same questions (for example [Android - AlertDialog doesn't show when called from Main-Method](https://stackoverflow.com/questions/14444064/android-alertdialog-doesnt-show-when-called-from-main-method) ) but nor cleaning the project nor other things doesn't solve my problem.. Any ideas?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T20:54:34.147

您需要调用`delAllDialog.show()`以显示警报对话框。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T20:55:05.697

你需要打电话

```
 delAllDialog.show(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T20:37:59.983

@Foenix，尝试替换`this`为 `YourActivityName.this`

例如

```
AlertDialog.Builder alertDialogBuilder = new AlertDialog.Builder(SampleActivity.this); 
```

# c++ - Working with timers

> ID：15557437
> 
> 赞同：0
> 
> 时间：2013-03-21T20:29:02.320
> 
> 标签：c++, windows

I am trying to create a timer where it begins with a certain value and ends with another value like.

```
int pktctr = (unsigned char)unpkt[0];

if(pktctr == 2)
{
    cout << "timer-begin" << endl;
    //start timer here

}

if(pktctr == 255)
{
    cout << "timer-end" << endl;
    //stop timer here
    //timer display total time then reset.

}

cout << "displays total time it took from 1 to 255 here" << endl; 
```

Any idea on how to achieve this?

```
void WINAPI MyUCPackets(char* unpkt, int packetlen, int iR, int arg)
{
int pktctr = (unsigned char)unpkt[0];

if(pktctr == 2)
{
    cout << "timer-begin" << endl;

}

if(pktctr == 255)
{
    cout << "timer-end" << endl;

}

return MyUC2Packets(unpkt,packetlen,iR,arg);
} 
```

Everytime this function is called unpkt starts from 2 then reaches max of 255 then goes back to 1\. And I want to compute how long it took for every revolution?

This will happen alot of times. But I just wanted to check how many seconds it took for this to happen because it won't be the same everytime.

Note: This is done with MSDetours 3.0...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T20:37:46.047

如果您想使用 Windows-API，请使用`GetSystemTime()`. 提供一个 struct `SYSTEMTIME`，正确初始化它并将其传递给`GetSystemTime()`：

```
#include <Windows.h>

 ...
 SYSTEMTIME sysTime;
 GetFileTime(&sysTime);
 // use sysTime and create differences 
```

看[这里](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724390%28v=vs.85%29.aspx)，`GetSystemTime()`那里也有链接`SYSTEMTIME`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T20:39:28.613

我假设您使用的是 Windows（来自`WINAPI`代码中的），在这种情况下您可以使用[`GetTickCount`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724408%28v=vs.85%29.aspx)：

```
/* or you could have this elsewhere, e.g. as a class member or
 * in global scope (yuck!) As it stands, this isn't thread safe!
 */
static DWORD dwStartTicks = 0;

int pktctr = (unsigned char)unpkt[0];

if(pktctr == 2)
{
    cout << "timer-begin" << endl;
    dwStartTicks = GetTickCount();
}

if(pktctr == 255)
{
    cout << "timer-end" << endl;

    DWORD dwDuration = GetTickCount() - dwStartTicks;

    /* use dwDuration - it's in milliseconds, so divide by 1000 to get
     * seconds if you so desire.
     */
} 
```

需要注意的事情：溢出`GetTickCount`是可能的（它大约每 47 天重置为 0，因此如果您在接近翻转时间时启动计时器，它可能会在翻转后结束）。您可以通过两种方式解决这个问题，或者使用[`GetTickCount64`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724411%28v=vs.85%29.aspx)或简单地注意何时`dwStartTicks > GetTickCount`以及如果是，计算从多少毫秒`dwStartTicks`到翻转，以及从多少毫秒`0`到结果`GetTickCount()`并将这些数字加在一起（如果你能做到这一点，则加分以更聪明的方式）。

或者，您可以使用该`clock`功能。[您可以在http://msdn.microsoft.com/en-us/library/4e2ess30(v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/4e2ess30(v=vs.71).aspx)找到更多相关信息，包括如何使用它的示例，并且应该相当容易适应并集成到您的代码中。

最后，如果您对更“标准”的解决方案感兴趣，可以使用`<chrono>`C++ 标准库中的内容。查看[http://en.cppreference.com/w/cpp/chrono](http://en.cppreference.com/w/cpp/chrono)以获取示例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T20:40:02.290

我认为[增强计时器](http://www.boost.org/doc/libs/1_53_0/libs/timer/doc/index.html)是您的最佳解决方案。

您可以像这样检查经过的时间：

```
#include <boost/timer.hpp>
int main() {   
boost::timer t; // start timing
 ...
 double elapsed_time = t.elapsed();
 ...
} 
```

# java - Principle of Least Surprise

> ID：15557438
> 
> 赞同：3
> 
> 时间：2013-03-21T20:29:05.660
> 
> 标签：java

```
double d = 0.0;
    for (int i = 0; i < 10; i++)
    {
        d = d+0.1;
    }
    System.out.println(d); 
```

This is an example I read somewhere on "Principle of Least Surprise"

I was just curious on why the code would return a 0.999999999 and if I change the datatype of d to float, i get a 1.0000001\. What is the reason behind such behavior.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-21T20:32:13.210

这是浮点数不精确的典型案例。由于 0.1 不能用二进制干净地表示（它是一个重复的数字），因此随着数字一遍又一遍地添加到自身，存在舍入误差。当我们更改为浮点数时的行为差异归结为在更多位存储过程中实际保持 0.1 的方式的差异。

如果您需要真正准确地表示十进制数，BigDecimal 类将很快成为您最好的朋友。基于它如何在不损失精度的情况下在内部存储小数的细节，计算保持其完整性。

# c++ - how to call a Fortran90 function included in a module in c++ code?

> ID：15557439
> 
> 赞同：7
> 
> 时间：2013-03-21T20:29:07.733
> 
> 标签：c++, module, fortran, fortran90

I m including a fortran90 program that is not mine in my C++ project .

In the first stept I try to call the function by their name_() and i get the error "undefined reference to mp_mpi_cartesian_init_ "by dispalying the symbol of the obj file (using nm) i found that the function are called by their module as module_function_ so i add the module name and i Get the same problem but between fortran obj such as "Constants.f90:(.text+0x36): undefined reference to __powi4i4"

here is the c++ code :

```
 #include <iostream>
 #include <complex>

 using namespace std;

 extern"C" {

        void  mod_save_wave_mp_read_it_psi_(int * it,complex<double>*  psi_E1E2 );
        void  mod_mpi_cartesian_mp_mpi_cartesian_init_( );
        extern int mod_mpl_h_mp_iproc_ ;
 }

 int  main(){
     complex<double>  psi_local[512*24*512*24];
     int it ;
     mod_mpi_cartesian_mp_mpi_cartesian_init_();
     cout << "proc  :" << mod_mpl_h_mp_iproc_ << "avant lecture\n";
     mod_save_wave_mp_read_it_psi_(&it,psi_local);
     cout << "psi ="<< psi_local[0] << "poiur le proc "<<mod_mpl_h_mp_iproc_ <<"\n";
   } 
```

and this is an exemple of a module :

```
MODULE mod_save_wave

USE mod_constants
USE mod_MPI_CARTESIAN

    USE mod_time_mesure,    ONLY : tempsEcoule
    USE mod_input_data, ONLY : Nt_laserPsansLaser
    USE mod_input_data, ONLY : n_phi, n_rho1_seg, n_rho2_seg
    USE mod_input_data, ONLY : Nt_periode, save_periodique

    !////////////////////////////////////////////////////////////////
    IMPLICIT NONE                           !
    REAL(kind=d_t)      :: prog_start_time, time_max_second !
    character(len=80)   :: IntermedWaveDir
    !================================================================

CONTAINS

SUBROUTINE begin_count_time()
    IMPLICIT NONE

    prog_start_time = tempsEcoule()                 !

END SUBROUTINE begin_count_time

SUBROUTINE READ_IT_PSI( it,  psi_E1E2 )
    IMPLICIT NONE
    !////////////////////////////////////////////////////////////////////////////////
    INTEGER                             :: it       !
    COMPLEX(kind=d_t), DIMENSION(n_phi,n_rho1_seg,n_phi,n_rho2_seg) :: psi_E1E2 !
    !================================================================================

    integer :: c

    do c = 0, c_max-1
        if( mod(iproc,c_max)==c ) then

            !////////////////////////////////////////////////////////////////////////////////
            OPEN( unit=11,file=concat(trim(IntermedWaveDir),concat(concat('BACK/wave_',str_iproc),'_2p2p2')),&
                            status='old', form='unformatted', MODE='READ'       )
                READ(11) it                             !
                READ(11) psi_E1E2                           !
            CLOSE(11)                                   !
            print*,'iproc,readed it=',iproc, it

        endif

        CALL MPI_BARRIER(MPI_COMM_WORLD,infompi)                    !
        !================================================================================
    enddo
    !================================================================================

END SUBROUTINE READ_IT_PSI

SUBROUTINE WRITE_IT_PSI( it, psi_E1E2 )
    IMPLICIT NONE
    !////////////////////////////////////////////////////////////////////////////////
    INTEGER                             :: it       !
    COMPLEX(kind=d_t), DIMENSION(n_phi,n_rho1_seg,n_phi,n_rho2_seg) :: psi_E1E2 !
    !================================================================================

    integer :: c

    do c = 0, c_max-1
        if( mod(iproc,c_max)==c ) then
            !////////////////////////////////////////////////////////////////////////////////
            OPEN( unit=11,file=concat(trim(IntermedWaveDir),concat(concat('wave_',str_iproc),'_2p2p2')),&
                                        form='unformatted') !
                WRITE(11) it+1          !---- recommence a partir de la prochaine iterat!
                write(11) psi_E1E2                          !
            CLOSE(11)                                   !
        endif

        CALL MPI_BARRIER(MPI_COMM_WORLD,infompi)                    !
        !================================================================================
    enddo

END SUBROUTINE WRITE_IT_PSI

END MODULE mod_save_wave 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-23T12:09:47.670

我假设您使用的是 g++、gfortran、mpif90 工具链。如果你有一个模块

```
module rocker
contains
subroutine bye_baby
...
end subroutine 
```

在 C++ 中它的外部 C 声明是

```
extern "C"
{
    //          ,-- 2 Leading underscores to start
    //          | ,-- then the module name
    //          | |     ,-- then _MOD_
    //          | |     |    ,-- then the subroutine name
    //          V V     V    V
    extern void __rocker_MOD_bye_baby();
} 
```

您可能还需要在 extern 之后添加**属性**((stdcall))。默认情况下，C 假定 cdecl 以不同方式堆叠参数。

如果您不想要 __rocker_MOD 部分，则不应在模块中声明子例程/函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T06:55:32.590

首先，在 Fortran 方面，我强烈建议使用 C 绑定的 Fortran 2003 特性，尤其是`iso_c_binding`模块。您可以在 SO 上看到许多示例，其中包括[这篇文章](https://stackoverflow.com/a/14503508/1859258)。然后，您以透明且独立于编译器的方式摆脱了“我的 fortran 编译器如何命名我的程序”的问题。

链接问题出现了，因为我猜你缺少一些 Fortran 编译器库。您可以尝试使用 Fortran 编译器链接您的目标文件，或者找出缺少哪个库并手动链接它。一些 Fortran 编译器还具有用于创建自动链接编译器相关库的库的选项。

# jasper-reports - Hide or show Subreport

> ID：15557440
> 
> 赞同：3
> 
> 时间：2013-03-21T20:29:09.803
> 
> 标签：jasper-reports, subreport

I have a requirement where i need to show or hide *subreport* based on user selection.

Say I have a Main report and two sub reports: *sub1* and *sub2*.

User selects to show only *sub1*. The boolean value will be sent through *Java*.

I need to show main report with *sub1* in it and hide *sub2*.

I tried `<printwhenexpression>` but no matter what it shows only main report.

```
<subreport>
    <reportElement uuid="25895ea2-ed3d-49d2-997b-f0e4e6e304a3" mode="Transparent" x="0" y="0" width="555" height="38">
        <printWhenExpression><![CDATA[($P{flag}==Boolean.TRUE)]]></printWhenExpression>
    </reportElement>
    <connectionExpression><![CDATA[$P{REPORT_CONNECTION}]]></connectionExpression>
    <subreportExpression><![CDATA[$P{SUBREPORT_DIR} + "subreport1.jasper"]]></subreportExpression>
</subreport> 
```

# c# - How to get mysql char column type from C# Entity Framework Code First Model

> ID：15557441
> 
> 赞同：2
> 
> 时间：2013-03-21T20:29:11.223
> 
> 标签：c#, mysql, entity-framework-4, key

I have just done the equivalent of Hello World by creating an Entity Framework Code First model (I have written other C# programs but not with Entity Framework). I created a model like this:

```
class Preferences
{
    [Key]
    public string StationName { get; set; }
    [MaxLength(30)]
    public string MainDatabase { get; set; }
    [MaxLength(30)]
    public string DefaultSequence { get; set; }
} 
```

and then had a little routine to add a record

```
var newPrefs = new Preferences
{
    StationName = "MATT",
    DefaultSequence = "NONE",
    MainDatabase = "NONE"
};
Preferences prefs = foo.Preferences.Add(newPrefs); 
```

which then tries to create the database and fails when adding the primary key with the error

```
"BLOB/TEXT column 'StationName' used in key specification without a key length" 
```

because it uses the data type "mediumtext" instead of CHAR or VARCHAR and MySQL can't use that type for a key.

Is there a method that is still more-or-less database agnostic that will tell MySQL to use the preferred type for the key column? Or do I just have to give up and make an integer key?

I also tried variations of the design like this but nothing worked.

```
class Preferences
{
    [Key,DataType("CHAR"),StringLength(30)]
    public string StationName { get; set; }
    [MaxLength(30)]
    public string MainDatabase { get; set; }
    [MaxLength(30)]
    public string DefaultSequence { get; set; }
} 
```

Thanks for your help.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-21T21:06:35.443

尝试流畅的映射列类型可能：

```
modelBuilder.Entity<Preferences>()
    .Property(p => p.Id)
    .HasColumnType("CHAR(30)"); 
```

我认为这是等效的，`[Column(TypeName = "CHAR(30)")]`但不确定是否相同。

**编辑：**根据 Matt 的测试，长度是单独的，并且“char”可能区分大小写（MySQL 和其他与标识符区分大小写相关的设置有很多，操作系统有时可以发挥作用，因此可能会有所不同） ：`[Column(TypeName="char")][MaxLength(30)]`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T20:47:08.593

我建议您在关系数据库设计中应用一种普遍接受的做法，即使用无意义的主键。对业务领域毫无意义。

```
class Preferences
{
    [Key]
    [DatabaseGenerated(DatabaseGeneratedOption.Identity)]  
    public int Id { get; set; }

    [MaxLength(30)]
    public string StationName { get; set; }
    [MaxLength(30)]
    public string MainDatabase { get; set; }
    [MaxLength(30)]
    public string DefaultSequence { get; set; }
} 
```

额外的好处：现在您可以在必要时随意更改 StationName。

# javascript - Auto resize iframe no matter what page loads

> ID：15557443
> 
> 赞同：4
> 
> 时间：2013-03-21T20:29:13.307
> 
> 标签：javascript, iframe

I have a page that has an iframe within. In iframe people can navigate separately (to submit form, my account, etc ). While doing so, iframe size changes on every new iframe page. The problem is I have set a single iframe ID to auto resize. One another issue is that after some iframes load, for example registering form, it has some option to upload photo for example, option that when is clicked it extends the length of the iframe, so a general auto size will not work -anyway my script can handle this - . I can insert my script for iframe in all iframe pages but how the parent page will recognize each iframe in order to auto-resize it ?

Code in parent page(auto resizes one single iframe page by ID):

```
<script>
function alertsize(pixels){
pixels+=0;
document.getElementById('myiframe').style.height=pixels+"px";
}
</script> 
```

Above script can be modified in order to apply on whatever iframe page loads in iframe ?

Iframe script:

```
<script type="text/javascript">
var myHeight = 0;

setInterval(function(){
if(myHeight != document.body.scrollHeight){
    myHeight = document.body.scrollHeight;
    parent.alertsize(myHeight);
}
},500);
</script> 
```

Iframe:

```
<iframe id="myiframe" src="../../data/my-account" name="myiframe" width="100%" height="100%" scrolling="no" frameborder="0"></iframe> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-06T18:02:03.153

您可以使用`top`来引用父框架，它将引用顶部窗口对象。

`top.alertsize(myHeight)`

```
 +-----------------------+
 | top                   |
 |                       |
 | +------------------+  |
 | | iframe           |  |
 | +------------------+  |
 |                       |
 | +------------------+  |
 | | iframe           |  |
 | +------------------+  |
 +-----------------------+ 
```

# angularjs - Karma (AKA Testacular) rely on ng-app directive?

> ID：15557447
> 
> 赞同：4
> 
> 时间：2013-03-21T20:29:37.093
> 
> 标签：angularjs, karma-runner

After spending a day and a half of code battles, i've realized that the e2e tests hanged because i've bootstraped manually and not using ng-app directive

first, FYI.

second, any idea why? How can it be fixed?

thanks

Lior

-- EDIT: here're two plunks that show it, using phone-cat tutorial example:

works in both browser and e2e: [http://plnkr.co/edit/AfLsug1LRi0euKf7TWJa](http://plnkr.co/edit/AfLsug1LRi0euKf7TWJa)

works interactively in browser, doesnt work in e2e runner: [http://plnkr.co/edit/20OeZ5eV2ZbzgS1qDYfr](http://plnkr.co/edit/20OeZ5eV2ZbzgS1qDYfr)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-13T14:24:45.933

场景跑步者似乎需要掌握 ng-app（对于 $injector）。我调整[了 Vojta Jína 在此处确定的修复程序](https://groups.google.com/forum/#!msg/angular/yslVnZh9Yjk/MLi3VGXZLeMJ)，它对我有用。

```
$(function() {
   var myApp = $('#appId'); // Use whatever selector is appropriate here. 
   angular.bootstrap(myApp, [modules]); // modules is optional - see http://docs.angularjs.org/api/angular.bootstrap
   myApp.addClass('ng-app'); // Adds the required ng-app
}); 
```

此外，您可能需要在您的中放置一个`pause`或，以便有足够的时间来完成手动引导，例如，`wait``beforeAll`

```
beforeEach(function() {
   browser().navigateTo('../../index.html');
   pause();
}); 
```

此修复程序有效，但恕我直言并不令人满意。有什么办法可以摆脱暂停/等待？

# iis - 用户“NT AUTHORITY\ANONYMOUS LOGON”登录失败 可能的连接字符串问题？

> ID：15557450
> 
> 赞同：6
> 
> 时间：2013-03-21T20:29:44.677
> 
> 标签：iis, asp.net-mvc-4, ef-code-first, sql-server-2012, web-deployment

我正在尝试部署我的第一个 MVC 应用程序，但我一直遇到围绕连接到我的 sql server 数据库的问题。我当前的问题是，当我尝试发布该站点时，我收到了以下信息：SqlException (0x80131904): Login failed for user 'NT AUTHORITY\ANONYMOUS LOGON'。但是，我不确定这是我的主要问题还是只是不同问题的症状。我认为这个问题与我的连接字符串有关（尽管我当然可能是错的），我已经调整了大约 20 种不同的方式。我最近尝试让它工作看起来像这样：

```
<add name="DefaultConnection" 
     connectionString="Data Source=*ip address*;AttachDbFilename=C:\*full path*\aspnet-SourceMvc-20130301025953.mdf;Initial Catalog=aspnet-SourceMvc-20130301025953;Integrated Security=True"
     providerName="System.Data.SqlClient" />

<add name="StqmContext"
     connectionString="Data Source=*ip address*;AttachDbFilename=C:\*full path*\Quotes.mdf;Initial Catalog=Quotes;Integrated Security=True"
     providerName="System.Data.SqlClient" /> 
```

我花了一整天的时间研究这个问题，这似乎很常见，但它们似乎都提供了不同的解决方案……到目前为止，这些解决方案都没有奏效。

有关该应用程序的一些附加信息：它是一个 ASP.NET MVC 4 应用程序。该数据库是使用 Entity Framework Code-First 方法构建的，我正在运行 SQl Server 2012，Enterprise ed。在 Windows Server 2008 R2 上。该应用程序最初是在我的 Windows 8 机器上使用 Visual Studio 2012 Ultimate 开发的，一旦我完成它，我就将它移动到使用 Windows Server 2008 R2 的工作机器上，并尝试在 Visual Studio Express 2012 Web Developer ed 中发布它。

附带说明一下，如何打开首先在 sql server management studio 中使用代码创建的数据库？

提前感谢任何可以提供帮助的人。

```
Stack Trace: 

[SqlException (0x80131904): Login failed for user 'NT AUTHORITY\ANONYMOUS LOGON'.]
   System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction) +6676046
   System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose) +810
   System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady) +4403
   System.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj) +84
   System.Data.SqlClient.SqlInternalConnectionTds.CompleteLogin(Boolean enlistOK) +55
   System.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover) +368
   System.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout) +6704814
   System.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance) +6705315
   System.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions) +610
   System.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions) +1049
   System.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions) +74
   System.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnectionOptions userOptions) +6707883
   System.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnectionOptions userOptions) +78
   System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection) +2192
   System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection) +116
   System.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection) +1012
   System.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions) +6712511
   System.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry) +152
   System.Data.SqlClient.SqlConnection.Open() +229
   System.Data.SqlClient.SqlProviderServices.UsingConnection(SqlConnection sqlConnection, Action`1 act) +134
   System.Data.SqlClient.SqlProviderServices.UsingMasterConnection(SqlConnection sqlConnection, Action`1 act) +3805003
   System.Data.SqlClient.SqlProviderServices.GetDbProviderManifestToken(DbConnection connection) +10955690
   System.Data.Common.DbProviderServices.GetProviderManifestToken(DbConnection connection) +91

[ProviderIncompatibleException: The provider did not return a ProviderManifestToken string.]
   System.Data.Common.DbProviderServices.GetProviderManifestToken(DbConnection connection) +10955761
   System.Data.Entity.ModelConfiguration.Utilities.DbProviderServicesExtensions.GetProviderManifestTokenChecked(DbProviderServices providerServices, DbConnection connection) +48

[ProviderIncompatibleException: An error occurred while getting provider information from the database. This can be caused by Entity Framework using an incorrect connection string. Check the inner exceptions for details and ensure that the connection string is correct.]
   System.Data.Entity.ModelConfiguration.Utilities.DbProviderServicesExtensions.GetProviderManifestTokenChecked(DbProviderServices providerServices, DbConnection connection) +242
   System.Data.Entity.DbModelBuilder.Build(DbConnection providerConnection) +82
   System.Data.Entity.Internal.LazyInternalContext.CreateModel(LazyInternalContext internalContext) +88
   System.Data.Entity.Internal.RetryLazy`2.GetValue(TInput input) +248
   System.Data.Entity.Internal.LazyInternalContext.InitializeContext() +524
   System.Data.Entity.Internal.InternalContext.CreateObjectContextForDdlOps() +23
   System.Data.Entity.Database.Exists() +40
   SourceMvc.Filters.SimpleMembershipInitializer..ctor() +128

[InvalidOperationException: The ASP.NET Simple Membership database could not be initialized. For more information, please see http://go.microsoft.com/fwlink/?LinkId=256588]
   SourceMvc.Filters.SimpleMembershipInitializer..ctor() +461

[TargetInvocationException: Exception has been thrown by the target of an invocation.]
   System.RuntimeTypeHandle.CreateInstance(RuntimeType type, Boolean publicOnly, Boolean noCheck, Boolean& canBeCached, RuntimeMethodHandleInternal& ctor, Boolean& bNeedSecurityCheck) +0
   System.RuntimeType.CreateInstanceSlow(Boolean publicOnly, Boolean skipCheckThis, Boolean fillCache, StackCrawlMark& stackMark) +159
   System.RuntimeType.CreateInstanceDefaultCtor(Boolean publicOnly, Boolean skipCheckThis, Boolean fillCache, StackCrawlMark& stackMark) +256
   System.Activator.CreateInstance(Type type, Boolean nonPublic) +127
   System.Activator.CreateInstance(Type type) +11
   System.Threading.LazyHelpers`1.ActivatorFactorySelector() +72
   System.Threading.LazyInitializer.EnsureInitializedCore(T& target, Boolean& initialized, Object& syncLock, Func`1 valueFactory) +241
   System.Threading.LazyInitializer.EnsureInitialized(T& target, Boolean& initialized, Object& syncLock) +139
   System.Web.Mvc.Async.AsyncControllerActionInvoker.InvokeActionMethodFilterAsynchronously(IActionFilter filter, ActionExecutingContext preContext, Func`1 nextInChain) +145
   System.Web.Mvc.Async.AsyncControllerActionInvoker.InvokeActionMethodFilterAsynchronously(IActionFilter filter, ActionExecutingContext preContext, Func`1 nextInChain) +840201
   System.Web.Mvc.Async.<>c__DisplayClass37.<BeginInvokeActionMethodWithFilters>b__31(AsyncCallback asyncCallback, Object asyncState) +266
   System.Web.Mvc.Async.WrappedAsyncResult`1.Begin(AsyncCallback callback, Object state, Int32 timeout) +146
   System.Web.Mvc.Async.AsyncResultWrapper.Begin(AsyncCallback callback, Object state, BeginInvokeDelegate beginDelegate, EndInvokeDelegate`1 endDelegate, Object tag, Int32 timeout) +202
   System.Web.Mvc.Async.AsyncResultWrapper.Begin(AsyncCallback callback, Object state, BeginInvokeDelegate beginDelegate, EndInvokeDelegate`1 endDelegate, Object tag) +112
   System.Web.Mvc.Async.<>c__DisplayClass25.<BeginInvokeAction>b__1e(AsyncCallback asyncCallback, Object asyncState) +839055
   System.Web.Mvc.Async.WrappedAsyncResult`1.Begin(AsyncCallback callback, Object state, Int32 timeout) +146
   System.Web.Mvc.Async.AsyncResultWrapper.Begin(AsyncCallback callback, Object state, BeginInvokeDelegate beginDelegate, EndInvokeDelegate`1 endDelegate, Object tag, Int32 timeout) +166
   System.Web.Mvc.Async.AsyncResultWrapper.Begin(AsyncCallback callback, Object state, BeginInvokeDelegate beginDelegate, EndInvokeDelegate`1 endDelegate, Object tag) +27
   System.Web.Mvc.<>c__DisplayClass1d.<BeginExecuteCore>b__17(AsyncCallback asyncCallback, Object asyncState) +50
   System.Web.Mvc.Async.WrappedAsyncResult`1.Begin(AsyncCallback callback, Object state, Int32 timeout) +146
   System.Web.Mvc.Async.AsyncResultWrapper.Begin(AsyncCallback callback, Object state, BeginInvokeDelegate beginDelegate, EndInvokeDelegate`1 endDelegate, Object tag, Int32 timeout) +166
   System.Web.Mvc.Controller.BeginExecuteCore(AsyncCallback callback, Object state) +826145
   System.Web.Mvc.Async.WrappedAsyncResult`1.Begin(AsyncCallback callback, Object state, Int32 timeout) +146
   System.Web.Mvc.Async.AsyncResultWrapper.Begin(AsyncCallback callback, Object state, BeginInvokeDelegate beginDelegate, EndInvokeDelegate`1 endDelegate, Object tag, Int32 timeout) +166
   System.Web.Mvc.Async.AsyncResultWrapper.Begin(AsyncCallback callback, Object state, BeginInvokeDelegate beginDelegate, EndInvokeDelegate endDelegate, Object tag) +27
   System.Web.Mvc.Controller.BeginExecute(RequestContext requestContext, AsyncCallback callback, Object state) +401
   System.Web.Mvc.<>c__DisplayClass8.<BeginProcessRequest>b__2(AsyncCallback asyncCallback, Object asyncState) +786250
   System.Web.Mvc.Async.WrappedAsyncResult`1.Begin(AsyncCallback callback, Object state, Int32 timeout) +146
   System.Web.Mvc.Async.AsyncResultWrapper.Begin(AsyncCallback callback, Object state, BeginInvokeDelegate beginDelegate, EndInvokeDelegate`1 endDelegate, Object tag, Int32 timeout) +166
   System.Web.Mvc.Async.AsyncResultWrapper.Begin(AsyncCallback callback, Object state, BeginInvokeDelegate beginDelegate, EndInvokeDelegate endDelegate, Object tag) +27
   System.Web.Mvc.MvcHandler.BeginProcessRequest(HttpContextBase httpContext, AsyncCallback callback, Object state) +343
   System.Web.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +12550291
   System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) +288 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-21T20:32:14.577

如果您打算使用集成安全性，则需要打开[模拟](http://msdn.microsoft.com/en-us/library/72wdk8cc%28v=vs.71%29.aspx)：

```
<identity impersonate="true" /> 
```

否则将用户名和密码添加到[连接字符串](http://connectionstrings.com/sql-server-2012)：

```
Data Source=myServerAddress;Initial Catalog=myDataBase;User ID=xxx;Password=yyy; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-07-09T18:17:29.837

集成测试正在通过，但在调试模式下，用户“NT AUTHORITY\ANONYMOUS LOGON”的登录失败，然后我将向Web.config添加[身份验证：](https://docs.microsoft.com/en-us/previous-versions/dotnet/netframework-1.1/532aee0e(v=vs.71))

```
<system.web>
    <authentication mode="Windows"></authentication> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-07-20T16:30:40.183

如果您在设置计划任务时收到此错误消息，请务必取消选中： **不存储密码。该任务将只能访问本地计算机资源。**

如果您设置了一个需要密码的帐户，但您还选中了该框，它*显然*会默认返回匿名登录。

# ruby-on-rails - 设计：RoutingError 阻止新用户注册

> ID：15557455
> 
> 赞同：0
> 
> 时间：2013-03-21T20:29:57.223
> 
> 标签：ruby-on-rails, devise

我在我的 Devise 应用程序中输入新的电子邮件、密码和密码确认。当我去实际进行注册时，我收到以下错误：

> *路由错误*
> 
> `No route matches [POST] "/users/sign_up"`
> 
> 尝试跑步`rake routes`以获取有关可用路线的更多信息。

它看起来像`new_registration_path`带你去`users/sign_up`，它不知道（至少在获得 POST 时）。我如何让它认识到这一点？

下面是一些相关的代码。

* * *

这是（可能）相关的`routes.rb`：

```
devise_for :users
resources :users 
```

这是输出`rake routes`：

```
 new_user_session GET    /users/sign_in(.:format)       devise/sessions#new
            user_session POST   /users/sign_in(.:format)       devise/sessions#create
    destroy_user_session DELETE /users/sign_out(.:format)      devise/sessions#destroy
           user_password POST   /users/password(.:format)      devise/passwords#create
       new_user_password GET    /users/password/new(.:format)  devise/passwords#new
      edit_user_password GET    /users/password/edit(.:format) devise/passwords#edit
                         PUT    /users/password(.:format)      devise/passwords#update
cancel_user_registration GET    /users/cancel(.:format)        devise/registrations#cancel
       user_registration POST   /users(.:format)               devise/registrations#create
   new_user_registration GET    /users/sign_up(.:format)       devise/registrations#new
  edit_user_registration GET    /users/edit(.:format)          devise/registrations#edit
                         PUT    /users(.:format)               devise/registrations#update
                         DELETE /users(.:format)               devise/registrations#destroy
       static_pages_home GET    /static_pages/home(.:format)   static_pages#home
                   users GET    /users(.:format)               users#index
                         POST   /users(.:format)               users#create
                new_user GET    /users/new(.:format)           users#new
               edit_user GET    /users/:id/edit(.:format)      users#edit
                    user GET    /users/:id(.:format)           users#show
                         PUT    /users/:id(.:format)           users#update
                         DELETE /users/:id(.:format)           users#destroy
              businesses GET    /businesses(.:format)          businesses#index
                         POST   /businesses(.:format)          businesses#create
            new_business GET    /businesses/new(.:format)      businesses#new
         ed  it_business GET    /businesses/:id/edit(.:format) businesses#edit
                business GET    /businesses/:id(.:format)      businesses#show
                         PUT    /businesses/:id(.:format)      businesses#update
                         DELETE /businesses/:id(.:format)      businesses#destroy
                    root        /                              static_pages#home 
```

这是registrations/new.html.erb中的表格：

```
<%= form_for(resource, :as => resource_name, :url => new_registration_path(resource_name)) do |f| %>
    ...
<% end %> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T20:44:07.293

我认为您应该使用`registration_path`，而不是`new_registration_path`因为注册是通过`POST`对`/users`.

```
<%= form_for(resource, :as => resource_name, :url => registration_path(resource_name)) do |f| %>
   ...
<% end %> 
```

# php - 多个数组值差异的PHP运行平均值

> ID：15557461
> 
> 赞同：0
> 
> 时间：2013-03-21T20:30:27.677
> 
> 标签：php

首先，我已经用 PHP 编程了整整两个星期。所以，请原谅我的无知。

这是我的问题。我试图找到一个数组中多个差值的运行平均值。我想我已经想出了如何得到我想要的东西，但是代码效率真的很低，并且在一个小的测试数组（n = 20）中需要几秒钟。我的生产数组将在 n = 1000 左右。我怀疑有一种更有效的方法可以得到我想要的东西。这是我在概念上尝试做的事情：

```
array = (20, 19, 18, 17, 16, 15, 14, 13, 12, 11, 10, 9, 8, 7, 6, 5, 4, 3, 2, 1);
newarray = (20-19, 19-18, 18-17, 17-16, 16-15, ...  2-1);
newarray2 = (20-18, 19-17, 18-16, 17-15, 16-14 ... 3-1);
newarray3 = (20-17, 19-16, 18-15, 17-14, ... 4-1);
differenceaverage = (sum of (20-19, 20-18, 20-17)/3, sum of (19-18, 19-17, 19-16)/3, etc.) 
```

这是我用来生成平均值的代码：

```
$n=count($appArrayqb);

for($i = 1; $i<=($n-1); $i++){

    $diff[]= $appArrayqb[$i-1]-$appArrayqb[$i];
}
for($i = 1; $i<=($n-2); $i++){
    $diff2[]= $appArrayqb[$i-1]-$appArrayqb[$i+1];
}
for($i = 1; $i<=($n-3); $i++){
    $diff3[]= $appArrayqb[$i-1]-$appArrayqb[$i+2];
}

$VOcomb = array($diff,$diff2,$diff3)

$sumVO = array_map ("sum", $VOcomb[0], $VOcomb[1], $VOcomb[2])
function sum ($arr1, $arr2, $arr3){
return($arr1+$arr2+$arr3);
}

$counts = array();
foreach($VOcomb as $item){
    foreach($item as $k=>$v){
      if(isset($item[$k])){
        $counts[$k]++;
      }
    }
}

$VOarray=array($sumVO,$counts);
$VO = array_map("VO", $VOarray[0],$VOarray[1]);
function VO($arr1, $arr2) {
    return($arr1/$arr2);
} 
```

顺便说一句，当代码工作时，我在运行计数循环时收到未定义的偏移通知，因为它试图计算 $item 数组中不存在的值。所以我有三个相关的问题：1.）有没有更好的方法来计算差异？2.）有没有更好的方法来计算差异，这样我就不会得到一个未定义的偏移量？3.) array_map 函数是用来获得总和和平均值的最佳函数吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T22:18:55.890

试试这个看起来和你的结果相同的简化代码：

它的工作原理是逐个元素地构建结果数组，根据需要计算差异和平均值，而不是创建差异数组并对其进行映射。

```
// Calculate average differences between E(n) and E(n+1), E(n+2), and E(n+3)
// in an array 
function diffaverages($appArrayqb) {
  $n = count($appArrayqb);
  $diffAvg = array();
  for($i = 0; $i+1 < $n; $i++){
    $diffsum = 0;
    $count = 0;
    for($j = 1; $j <= 3 && $i+$j < $n; $j++){
      $diffsum += $appArrayqb[$i] - $appArrayqb[$i+$j];
      $count++;
    }
    $diffAvg[] = $diffsum / $count;
  }
  return $diffAvg;
} 
```

# bash - 无法使用 shell 脚本执行 ls

> ID：15557463
> 
> 赞同：2
> 
> 时间：2013-03-21T20:30:36.847
> 
> 标签：bash, shell

我正在尝试解析 vsftpd 日志以对成功上传的文件进行一些额外的处理。

`username`将是用户，所以我创建主目录 `filename`是日志中的文件名：它给出了一个不稳定的结果，即“/foo.txt”但这没关系

```
#!/bin/sh
sudo tail -F /var/log/vsftpd.log | while read line; do
  if sudo echo "$line" | grep -q 'OK UPLOAD:'; then
    username=$(echo "$line" | cut -d" " -f8 | sed 's/\[\(.*\)\]/\1/')
    filename=$(echo "$line" | cut -d, -f2 | sed 's/^[ \t]*//')
    home="/home/vsftpd/$username"
    if sudo ls "$home$filename" &> /dev/null; then
      # do something with $filename
        echo "some text"
    fi
  fi
done 
```

上传文件时，我期望文本“一些文本”。我从来没有得到，而是我可以看到它报告：

`ls: cannot access /home/vsftpd/user1"/foo.txt": No such file or directory`

虽然我可以在 shell 中运行命令：

```
$ sudo ls /home/vsftpd/user1"/foo.txt"
/home/vsftpd/user1/foo.txt 
```

我猜测权限相关，但我已将其作为 sudo 运行，并且我已授予目录完全访问权限。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T20:36:11.433

您的问题是您需要删除文件名组件周围的一组额外引号。vsftpd 日志中的文件名（刚刚为我自己验证过）用引号括起来，与用户名不同，您不会删除这些引号。

这意味着`$filename`最终被设置为，从字面上看，`"/foo.txt"`包括引号。`ls`当您为with构造文件名时`"$home$filename"`，会插入变量，但 shell 不会再剥离*另一层*引号。引号保留在最终文件名中，并且`/home/vsftpd/user1"`带有尾随引号的目录不存在。

这在您从 shell 输入命令时有效，因为您没有引用文件名，因此 shell 会执行*另一*轮引号插值并删除双引号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T20:32:54.987

如果 sudo 从 shell 工作，则 sudo 可能`NOEXEC`设置了标志，这会阻止它执行脚本。`NOEXEC` [您可以在此处](http://www.sudo.ws/sudo/sudoers.man.html)阅读更多信息。

# frama-c - 我是否在 Frama-c 中获得 3 地址代码

> ID：15557464
> 
> 赞同：3
> 
> 时间：2013-03-21T20:30:41.420
> 
> 标签：frama-c

我刚开始开发一个进行某种别名分析的 frama-c 插件。我正在使用 Dataflow.Backwards 分析，现在我必须通过不同的赋值语句并收集一些关于左值的东西。

frama-c 是否为我提供 3 地址代码？我对左值的形状（或任何内存访问）有一些保证吗？我的意思是，就像在 soot 或 wala 中一样，对于 a->b->c，最多有一个字段访问，st，会有一个临时变量，比如 tmp=a->b; tmp->c;? 我查看了手册，但找不到与此相关的任何内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T08:54:20.410

不，Frama-C 中没有这样的标准化。如果您确实需要它，您可以先使用访问者来规范代码，使其适合您的插件的要求。它会是这样的：

```
class normalize prj: Visitor.frama_c_visitor =
object
  inherit Visitor.frama_c_copy prj

  method vinstr i =
    match i with
      | Set (lv,e) -> ...
      ....
end

let analyze () = ...

let run () =
  let my_prj = File.create_project_from_visitor "my_project" (fun prj -> new normalize prj) in
  Project.on my_prj analyze () 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T20:41:05.027

Cil 的以下模块可能满足您的需求： [http](http://www.cs.berkeley.edu/~necula/cil/ext.html#toc26) ://www.cs.berkeley.edu/~necula/cil/ext.html#toc26 。请注意，生成的 AST 的类型是标准 Cil 类型。您不会从 OCaml 编译器获得关于哪些结构可以存在于简化的 AST 中，哪些不能存在的任何帮助。

另请注意，到目前为止，此模块尚未移植到 Frama-C。您需要进行一些小的调整才能使其在 Frama-C 中工作。

# c# - 判断一个字符串是否大于另一个字符串

> ID：15557465
> 
> 赞同：4
> 
> 时间：2013-03-21T20:30:46.323
> 
> 标签：c#, string, integer

我有两个字符串

```
 string A = "1.0.0.0";
 string B = "1.0.0.1"; 
```

我需要以某种方式评估 B 是否大于 A （版本方面）或者将这两个字符串转换为整数或小数或其他东西。

我尝试了以下

```
Decimal S = Convert.ToDecimal(A);
int S = Convert.ToInt32(A); 
```

但不断收到以下错误，“输入字符串的格式不正确。”

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-21T20:32:36.553

请参阅[版本类](http://msdn.microsoft.com/en-us/library/system.version.aspx)。

你可以做这样的事情：

```
Version a = new Version("1.0.0.0");
Version b = new Version("1.0.0.1");

if (b>a) //evaluates to true
    blah blah blah 
```

我没有亲自测试过这个确切的场景，但是这个`Version`类允许你使用我在这里展示的比较运算符。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-21T20:31:59.583

如果您的字符串最多有 4 个数字部分（由 分隔`.`），您可以使用[`Version`](http://msdn.microsoft.com/en-us/library/system.version.aspx)该类来获取与这些字符串对应的强类型实体。`Version`以预期的方式实现不同的比较运算符（`==`,`>`等`<`...），因此您可以找出哪个更大：

```
var a = new Version(A);
var b = new Version(B);

if(a > b)
  // a is larger
else if (a < b)
  // b is larger
else
  // they are identical 
```

如果有超过 4 个部分，则需要将每个字符串拆分为其数字组件，将每个部分转换为等效的数字并比较两个结果集合。

就像是：

```
var aParts = A.Split('.');
var bParts = B.Split('.');

// assumes the string have the same number of parts
for(int i = 0; i < aParts.Length; i++)
{
  var currA = int.Parse(aParts[i]);
  var currB = int.Parse(bParts[i]);

  if(currA == currB)
    continue;

  if(currA > currB)
    // A is greater than B      
  else
    // B is greater than A
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-21T20:32:27.077

你可以看看`System.Version`类。如果字符串是这种格式或者可以转换成一个版本。

版本有比较器

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-21T20:32:31.290

如果要比较 .NET 中的版本字符串，则可以使用[Version](http://msdn.microsoft.com/en-us/library/system.version.aspx)类。

```
Version version = new Version("1.0.0.0");
Version otherVersion = new Version(""1.0.0.1"); 
```

该类提供运算符来检查版本是否大于或小于另一个版本。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-21T20:32:35.593

在“。”上拆分。然后将每个部分转换为 int。从左开始：如果A的fragment较低，则报告A在前。如果 B 的片段较低，则报告 B 是第一个。否则，移动到下一个片段。如果您已经在最后一个片段中，请报告它们是相等的。

如果您的字符串最多有四个部分（如版本号），那么正如其他人所建议的那样，使用[System.Version](http://msdn.microsoft.com/en-us/library/system.version.aspx)类会更容易。

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2013-04-30T18:39:49.387

代替使用 VersionClass 的快速方法将是这样的。

```
string A = "1.0.0.0";
string B = "1.0.0.1";

int versionA = Convert.ToInt32(A.Replace(".", string.Empty));
int versionB = Convert.ToInt32(B.Replace(".", string.Empty));

if (b>a)
//something will happen here 
```

**在这种情况下，替换**将第一个字符串更改为第二个字符串。空等于“”。

# gtk - gtk 中的分组列表视图

> ID：15557468
> 
> 赞同：1
> 
> 时间：2013-03-21T20:30:52.833
> 
> 标签：gtk

有没有办法在 Gtk 的以下屏幕截图中实现视图？

我已经尝试过树视图，但它不会自动过滤掉该组。

KDELibs 等价于 KCategorizedView。

![例子](../Images/498973ae49b54a0626726b4b370dfa05.png)

编辑：我的用例是这样的：例如屏幕截图，如果我输入神话，AOE 和 AOE III 将不会显示，因为该组下没有匹配项。

如果我尝试使用树视图，则不能轻易过滤父节点，因为过滤器模型不能轻易依赖于过滤结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T19:41:02.583

您可以将 a`GtkTreeView`与 a 一起使用`GtkTreeStore`，但没有具有 KDE 小部件外观的库存小部件。

或者，您可以有不同`GtkTreeView`的实例，每个实例都在 a 中`GtkFrame`，并且每个实例都使用 a`GtkTreeModelFilter`将过滤器应用于相同的`GtkListStore`or `GtkTreeStore`，以便您可以将该数据保存在单个存储中。

布局看起来像：

```
GtkBox
+---- GtkFrame
|     +---- GtkTreeView
|
+---- GtkFrame
|     +---- GtkTreeView
|
+---- GtkFrame
|     +---- GtkTreeView
|
... 
```

`GtkTreeModelFilter`可以设置为过滤源中的所有行或`GtkListStore`与`GtkTreeStore`您想要的“类别”匹配的所有行。

# c# - 组合框下拉箭头颜色

> ID：15557469
> 
> 赞同：0
> 
> 时间：2013-03-21T20:30:53.730
> 
> 标签：c#, winforms

有没有办法我可以更改 winforms 组合框控件的下拉箭头背景色

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T20:38:33.897

不幸的是，这个问题的答案是一个简单的“不”。最简单的方法是创建一个自定义 ComboBox 控件。有关更多信息，请参阅[此 MSDN 社交线程](http://social.msdn.microsoft.com/Forums/en-US/winforms/thread/59a23d23-55ef-4037-8b46-3ade58d2ae69)。

# mysql - mysql字符串不像列

> ID：15557471
> 
> 赞同：1
> 
> 时间：2013-03-21T20:30:56.343
> 
> 标签：mysql

在 mysql 查询中执行以下操作的正确方法是什么？：

```
$string="apple banana orange"; 
```

mysql 专栏`A = "banana"`

mysql查询：列`A`未包含在`$string`

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T20:55:18.800

如果每一行都有一个名为`A`以空格分隔的标记的列，则可以运行以下命令：

```
SELECT * FROM table_name
WHERE LOCATE(CONCAT(' ',A,' '),'apple banana orange') = 0; 
```

我在两边都填充空白的原因是为了涵盖这样的情况：

```
SELECT * FROM table_name
WHERE LOCATE(CONCAT(' ',A,' '),'pineapple banana orange') = 0; 
```

作为字符串

*   `apple`在`apple banana orange`
*   `apple`在`pineapple banana orange`

在语义方面

*   `apple`在`apple banana orange`
*   `apple`不在`pineapple banana orange`

如果你正在寻找`grape`呢？

作为字符串

*   `grape`在`apple banana orange grape`
*   `grape`在`apple banana orange grapefruit`

在语义方面

*   `grape`在`apple banana orange grape`
*   `grape`不在`apple banana orange grapefruit`

试试看 ！！！

# 警告

查询本身会产生全表扫描。

您应该考虑做 FULLTEXT 索引。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T20:34:19.527

```
SELECT * FROM table_name 
WHERE A NOT IN ('apple', 'banana', 'orange'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T20:47:10.777

也许是这样的？（虽然我没有测试过，但我认为它会工作）

```
<?php
$string = "apple banana orange";

//Make an array of each fruit in string (with delimiter space)
$items = explode(" " , $string);

//None of the fruits in $string would be listed in resultset
$query = "SELECT * FROM fruits WHERE columnA NOT IN ($items)";
//db-handling...
?> 
```

更新：不要制作数组... ..改为...！$items = str_replace(" ", ",", $string);

# html - 选择每个第一个和第四个（最后一个）div

> ID：15557475
> 
> 赞同：0
> 
> 时间：2013-03-21T20:31:16.400
> 
> 标签：html, css, css-selectors

如何使用选择器选择每个第一个和第四个`div`以`:nth-child`添加特定样式？

```
.main{
  width:460px;
  height:240px;
}
.box{
  width:100px;
  height:100px;
  background:red;
  float:left;
  margin:10px;
}

/*I tried */

.box:nth-child(n+4),.box:first-child{
  margin:10px 10px 10px 0;
}

.box:nth-child(4n){
  margin:10px 0px 10px 10px;
}
```

```
<div class="main">
  <div class="box"></div> <!-- margin-left:0px -->
  <div class="box"></div>
  <div class="box"></div>
  <div class="box"></div> <!-- margin-right:0px -->
  <div class="box"></div> <!-- margin-left:0px -->
  <div class="box"></div>
  <div class="box"></div>
  <div class="box"></div> <!-- margin-right:0px -->
</div>
```

第二个代码有效，但第一个代码有问题吗？

如何选择行中的每个**第一个**和**最后一个**div（行包含**四个 div**）？

[JSF](http://jsfiddle.net/jnQZU/)中。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-21T20:35:04.300

尝试这个：

```
.box:nth-child(4n+1) 
```

这应该包括第一个 ( `+1`) 元素，然后是每四个 ( ) 元素`4n`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-21T20:35:12.697

[JSFIDDLE](http://jsfiddle.net/jnQZU/1/)

4n 将选择 4, 8, 12 ....

4n+1 将选择 1, 5, 9, 13, ...

使用公式 (an + b)。说明：a代表一个周期大小，n是一个计数器（从0开始），b是一个偏移值。

```
.box:nth-child(4n){
    margin:10px 0px 10px 10px;
}

.box:nth-child(4n+1){
   margin:10px 10px 10px 0;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-21T20:36:16.933

[http://jsfiddle.net/jnQZU/2/](http://jsfiddle.net/jnQZU/2/)

```
.box:nth-child(4n){
    background: blue;
}

.box:nth-child(4n+1){
    background: orange;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-21T20:38:53.540

尝试这个：

[http://jsfiddle.net/cJwVc/](http://jsfiddle.net/cJwVc/)

```
.box:nth-child(4n+1){
   background-color:yellow;
   margin-left:0;
}

.box:nth-child(4n){
   background-color:blue;
    margin-right:0;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-05-22T17:02:15.277

如果您需要 IE8 或更低版本的支持，那么您应该使用 Jquery 中的选择器。使用您的示例：

```
$('.box:nth-child(4n+1)').css('background-color', 'yellow'); 
```

# linux - 使用 Express 提供网页时，带有“path.join”的 Node JS TypeError

> ID：15557480
> 
> 赞同：7
> 
> 时间：2013-03-21T20:31:28.900
> 
> 标签：linux, node.js, express, socket.io

我刚刚在运行 Linux Peppermint 3 的上网本上安装了 Node JS (v0.10.0)。我有一个文件要运行，顶部有以下内容：

```
var app = require('express').createServer(),
    io = require('socket.io').listen(app);

app.listen(8080);

// routing
app.get('/', function (req, res) {
  res.sendfile(__dirname + '/index.html');
}); 
```

问题是，当我访问时，`localhost:8080`我得到以下信息：

```
TypeError: Arguments to path.join must be strings
    at path.js:360:15
    at Array.filter (native)
    at exports.join (path.js:358:36)
    at exports.send (/home/guy/Dropbox/Node/socket_io echo test/node_modules/express/node_modules/connect/lib/middleware/static.js:129:20)
    at ServerResponse.res.sendfile (/home/guy/Dropbox/Node/socket_io echo test/node_modules/express/lib/response.js:186:3)
    at usernames (/home/guy/Dropbox/Node/socket_io echo test/med.js:11:7)
    at callbacks (/home/guy/Dropbox/Node/socket_io echo test/node_modules/express/lib/router/index.js:272:11)
    at param (/home/guy/Dropbox/Node/socket_io echo test/node_modules/express/lib/router/index.js:246:11)
    at pass (/home/guy/Dropbox/Node/socket_io echo test/node_modules/express/lib/router/index.js:253:5)
    at Router._dispatch (/home/guy/Dropbox/Node/socket_io echo test/node_modules/express/lib/router/index.js:280:5) 
```

完全相同的文件适用于我的 Windows XP 笔记本电脑，但我还没有更新 Node（仍在运行 v0.8.15）。所以我不知道是我在 Linux 上安装 Node （我是新手）的问题还是版本之间的差异。显然，如果它会导致同样的问题，我不想在 Windows 上更新 Node。

我已经检查过 Express 应该在哪里，这似乎还可以。我尝试通过 npm 重新安装它。我查看了错误（通过搜索上面的第一行）并发现提到[here](https://stackoverflow.com/questions/15382662/grunt-fail-build-arguments-to-path-join-must-be-strings-error)、[here](https://github.com/1602/compound/issues/462)和[here](https://github.com/balupton/bal-util/issues/8)，似乎都在说它已解决。

有什么想法（如果有的话）我可以尝试让我的简单页面服务器正常工作吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-03T17:33:43.523

我在节点 v0.10.2 上也遇到过这种情况，同时尝试从 0.6.14 升级。问题在于连接静态中间件，以及它如何处理路径以及 path.join 如何处理其参数的可能回归。

这是来自连接的有问题的代码

```
 // setup
  var maxAge = options.maxAge || 0
    , ranges = req.headers.range
    , head = 'HEAD' == req.method
    , get = 'GET' == req.method
    , root = options.root ? normalize(options.root) : null //<!-- should be ''
    , redirect = false === options.redirect ? false : true
    , getOnly = options.getOnly
    , fn = options.callback
    , hidden = options.hidden
    , done; 
```

后来在加入路径的时候，你最终得到一个null，导致v0.10.2下的错误

```
 // join / normalize from optional root dir
  path = normalize(join(root, path)); 
```

在节点 0.8.21 下，你会得到这个

```
> require('path').join(null, 'file.txt');
'file.txt' 
```

在节点 0.10.2 下，你会得到这个

```
> require('path').join(null, 'file.txt');
TypeError: Arguments to path.join must be strings
    at path.js:360:15
    at Array.filter (native)
    at Object.exports.join (path.js:358:36)
    at repl:1:17
    at REPLServer.self.eval (repl.js:110:21)
    at repl.js:249:20
    at REPLServer.self.eval (repl.js:122:7)
    at Interface.<anonymous> (repl.js:239:12)
    at Interface.EventEmitter.emit (events.js:95:17)
    at Interface._onLine (readline.js:202:10) 
```

**TL;博士**

您可以同时修补您的代码以解决此问题。

**绝对路径**

```
var filepath = '/some/absolute/path/to/file.ext';
res.sendfile(path.basename(filepath), {root: path.dirname(filepath)}); 
```

或者

**相对路径**

```
res.sendfile('file.ext', {root: __dirname}) 
```

设置`{root: ''}`将无法通过静态中间件中的真实测试。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-24T18:44:00.317

问题似乎是与新版本的 Node.js 不兼容。我必须将 Express 更新到 v3.1.0，将 Socket.IO 更新到 v9.1.13。然后，我还必须将 Windows 笔记本电脑上的 NodeJS 更新到安装在我的 Linux 上网本 v0.10.1 上的最新版本。

随着两台计算机上的所有内容都是最新的，代码（如上所述）然后需要更改为以下内容：

```
var app = require('express')(),
    server = require('http').createServer(app),
    io = require('socket.io').listen(server);

server.listen(8080);

// routing
app.get('/', function (req, res) {
    res.sendfile(__dirname + '/index.html');
}); 
```

注意这里直接调用 Express 模块，而不是之前使用的方法调用。另请注意，IO 必须侦听`server`围绕 Express 调用创建的（即，不像`app`我以前那样）；这解决了让 Socket.IO 脚本在客户端启动的一些问题。在撰写本文时，我仍然[不完全了解如何访问脚本，因为页面是从哪里提供的](https://stackoverflow.com/questions/15309531/node-js-connect-file-server-not-serving-as-expected)。当我知道更多时，我会尝试回来更新。

PS。我很感谢[@robertklep](https://stackoverflow.com/users/893780/robertklep)，他指导我完成了这件事，正如您可能在上面的评论中看到的那样。谢谢！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-14T14:31:08.763

快速解决

```
sed -i bak -e  's/\/\/.join/if(root\ ==\ null){root="";}\/\//g' node_modules/express/node_modules/connect/lib/middleware/static.js 
```

# c# - 算法方法建议 - 按顺序合并两个数组

> ID：15557481
> 
> 赞同：0
> 
> 时间：2013-03-21T20:31:32.550
> 
> 标签：c#

我在一次与 C# 相关的采访中被问到这个问题。有 2 个数组 - 从最低到最高预先排序。我需要将所有这些组合在第三个数组中，并且它们应该以排序方式插入（因为它们正在进入）。

我提到的解决方案如下：

1.  为了论证起见，假设`Array 1`具有以下元素 -`1,2,3,4,5`并且`Array 2`具有以下元素 -`6,7,8,9,10`

2.  由于 2 个数组是预先排序的 - 您可以将 的第一个元素与`Array 1`的第一个元素进行比较`Array 2`，并将较低的元素插入`Array 3`.

3.  然后你会为`Element 2`of`Array 1`和`Element 1`of做同样的事情`Array 2`并弹出下一个最小的数字

我提到的方法应该有效 - 但我的问题如下：

1.  这是最有效的方法吗？
2.  是否有可以描述此过程的技术术语（如二进制搜索算法等）？
3.  解决此问题的任何其他指示？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T20:34:00.043

是的，这是最有效的方法。

它在`O(n)`（其中 n 是两个数组的大小）上运行，这意味着遍历数组一次。

为了创建第三个数组，无论如何您都必须遍历每个元素（即使只是以正确的顺序将其添加到第三个数组）。

这个过程通常被称为[合并排序](http://en.wikipedia.org/wiki/Merge_sort)算法`merge`的一部分。

[这是](https://stackoverflow.com/questions/12148712/c-sharp-merge-sort-performance)Stack Overflow 中的一个实现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T20:36:33.760

1) 这是最有效的方法，O(n+m)。其中 n - 第一个数组的大小，m - 第二个数组的大小。2) 称为归并排序算法的归并程序。

实际上你可以合并超过 2 个数组，通常它用于[外部排序](http://en.wikipedia.org/wiki/External_sorting)或者当你有空间限制时。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T20:37:20.980

1.  如果您知道输入数组已排序，则*合并*算法将是线性的（大 O 表示法中的 O(n)）。但是，如果您还知道其中一个数组的最大值低于另一个数组的最小值，则可以使用`Array.Copy`而不是比较单个元素以获得更好的性能。

2.  是的，这是一个[合并算法](http://en.wikipedia.org/wiki/Merge_algorithm)。

3.  熟能生巧。我喜欢为了好玩而解决[Project Euler](http://projecteuler.net/)问题——它们很“小”，但是一旦你克服了前几个问题，它们就会真正让你思考如何解决它。

    编辑天赋：![无意义](../Images/2555debcd39946ed15b0a69ab4064ac9.png)

# linux - 关于 linux shell 脚本需要一点帮助

> ID：15557482
> 
> 赞同：1
> 
> 时间：2013-03-21T20:31:36.050
> 
> 标签：linux, shell, scripting

实际上这个脚本是众所周知的，[DDos Deflate](http://deflate.medialayer.com/)。

但使用后，我注意到我收到了一些没有 ip 的电子邮件

```
Banned the following ip addresses on Thu Mar 21 21:19:01 CET 2013

138 with 138 connections 
```

从[源代码](http://codepad.org/YUziwU8O#line-1)和“netstat -ntu | awk '{print $5}' | cut -d: -f1 | sort | uniq -c | sort -nr” 命令，我注意到也许我们需要避免第一行，因为看起来像第一行只是打开的连接总数。

![命令](../Images/98b8012ed2568a2c9c04636f323e4987.png)

知道这种脚本语言的人可以检查我是否正确并修复它吗？也许一些额外的基本检查，比如如果 ip == 连接数，中断？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T20:35:32.327

如果你想做你所要求的：

```
netstat -ntu |
    awk 'NR>1{sub(/:.*/, "", $5); print $5}' |
    sort |
    uniq -c |
    sort -nr 
```

# c# - Exchange EWS 托管 API 2.0 按日期获取

> ID：15557485
> 
> 赞同：1
> 
> 时间：2013-03-21T20:31:49.380
> 
> 标签：c#, exchange-server, ews-managed-api

我使用 EWS 托管 API 在我的 c# 项目和我们的 Exchange 2010 服务器之间进行通信。从现在到三天后，我使用此代码获取收件箱中的所有邮件。

```
 var ews = new ExchangeService(ExchangeVersion.Exchange2010_SP1);
    ews.Credentials = new NetworkCredential(usr, psw, dmn);
    ews.AutodiscoverUrl(url);

    PropertySet itempropertyset = new PropertySet(BasePropertySet.FirstClassProperties);
    itempropertyset.RequestedBodyType = BodyType.Text;

    ItemView view = new ItemView(int.MaxValue);
    FindItemsResults<Item> findResults;
    view.PropertySet = itempropertyset;

    do
    {
        findResults = ews.FindItems(WellKnownFolderName.Inbox, view);

        foreach (Item item in findResults.Items)
        {
            if (item.DateTimeCreated < DateTime.Now.AddDays(-3)) continue;

            item.Load(itempropertyset);

            var message = EmailMessage.Bind(ews, item.Id,
                new PropertySet(BasePropertySet.FirstClassProperties, ItemSchema.Attachments));

            string to = message.ToRecipients[0].Address.ToLower();
            string body = item.Body;
        }

        view.Offset += findResults.TotalCount;
    } while (findResults.MoreAvailable); 
```

现在的问题。我想改进这条线 `if (item.DateTimeCreated < DateTime.Now.AddDays(-3)) continue;`，因为当我使用它时，api会从收件箱中获取所有消息，如果它超过三天就继续。我想在代码的前面指定这个过滤器，所以 api 不必处理所有消息。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-21T21:49:01.950

If I understand the problem correctly, this should work. You can see all search filters available here: [EWS Search Filters](http://msdn.microsoft.com/en-us/library/exchange/dd633659%28v=exchg.80%29.aspx)

```
ItemView view = new ItemView(int.MaxValue);
FindItemsResults<Item> findResults;
view.PropertySet = itempropertyset;

SearchFilter searchFilter = 
   new SearchFilter.IsGreaterThan(ItemSchema.DateTimeReceived, DateTime.Now.AddDays(-3));

findResults = service.FindItems(WellKnownFolderName.Inbox, searchFilter, view); 
```

# javascript - 新 ECMA5 Javascript 标准中的 argument.callee.name 替代方案

> ID：15557487
> 
> 赞同：6
> 
> 时间：2013-03-21T20:31:56.450
> 
> 标签：javascript, ecmascript-5

我正在将一些旧代码移植到“严格模式”，在 ECMA5 标准中，argument.callee 和类似的 argument.caller 等的替代品是什么？

* * *

附加信息：我没有说明为什么我需要 argument.caller/callee。

我正在移植的代码正在使用

```
assert.ok(elemNode, arguments.callee.name + ": Entity - " + entityId + " has been found"); 
```

如果它是简单的递归，我可以使用函数名（）{...函数（）...}，但我似乎无法找到如何处理上面的代码。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-21T20:38:38.890

从 ECMAScript 3 开始，您可以拥有命名函数表达式。在此之前，函数表达式是匿名的，这是`arguments.callee`必要的。命名函数表达式使其变得不必要。所以这是推荐的替代方案。

查看[被调用者的 MDN 文档](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Functions_and_function_scope/arguments/callee)

### 例子：

```
[1,2,3,4,5].map(function factorial (n) {
    return !(n > 1) ? 1 : factorial(n-1)*n;
}); 
```

### 命名函数的好处（来自 MDN 文档）：

*   可以像从代码内部调用任何其他函数一样调用该函数
*   它不会污染命名空间
*   this 的值不会改变
*   它的性能更高（访问参数对象很昂贵）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-21T20:38:13.393

并不真地。

没有办法模仿或“*填充*”该属性，出于*安全原因*`arguments.caller`已将其删除，因此您无法在代码中爬上作用域链。

 *最好的替代方法`arguments.callee`是只使用命名函数表达式，而不是匿名函数表达式，例如

```
setTimeout(function loop() {
    if( /* condition */ ) {
        loop();  // instead of arguments.callee();
    }
}, 1000); 
```

这在几乎所有实现中也更快（访问`arguments`对象通常有点慢）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T20:36:37.877

您需要命名您的函数，然后只需按该名称引用该函数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T20:41:30.163

严格来说，没有等价物。正如 John Resig[指出的那样](http://ejohn.org/blog/ecmascript-5-strict-mode-json-and-more/)，您需要在 ECMAScript 5 的严格模式下命名您的“匿名”函数，然后您可以直接调用它们。他的例子是：

```
setTimeout(function later(){
  // do stuff...
  setTimeout( later, 1000 );
}, 1000 ); 
```*

# ios - IAP 和第三方购买

> ID：15557488
> 
> 赞同：0
> 
> 时间：2013-03-21T20:31:56.707
> 
> 标签：ios, app-store, in-app-purchase

我有一个关于应用内购买的问题。我公司向客户收取访问我们软件系统的费用。他们需要付费使用该系统（订阅费），然后可以选择使用更高质量的数据（卫星图像）。我们有多个图像来源，但其中一个提供更好的图像（5 米分辨率对 30 米分辨率）收费（质量较差的图像由政府提供且免费），我们以积分的形式将成本转嫁给用户。我们要求用户每次购买积分以“激活”边界（前提是该位置有可用的图像）。

Apple 允许我们“激活”并对客户的信用收费（至少还没有基于此拒绝该应用程序）。

我的问题是我们是否可以使用我们自己的购买系统在应用程序中添加积分？它不会解锁应用程序中的功能。您可以使用更高质量的数据执行任何操作，也可以使用其他免费数据执行任何操作。

> 在 App Store 审核指南 ( [https://developer.apple.com/appstore/resources/approval/guidelines.html#purchasing-currencies](https://developer.apple.com/appstore/resources/approval/guidelines.html#purchasing-currencies) ) 中，第 11.3 节规定：
> 
> 使用 IAP 购买实体商品或在应用程序之外使用的商品和服务的应用程序将被拒绝

这是否意味着我们可以使用自己的采购系统来处理在应用程序外使用的商品和服务的付款？这些积分可以通过我们提供的其他软件以及第三方软件（我们通过我们的 API 提供第三方支持）来使用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T19:34:33.230

我需要以几个警告作为开头

*   仔细阅读您所有的 Apple 合同
*   什么都不能保证——苹果的审稿人在这方面可能很敏感，而且众所周知苹果会改变这方面的规则
*   在您构建并提交之前，我怀疑任何人都可以给出权威的答案 - 所有这些都是意见。

我相信 Apple 会允许这样做，但不会允许您以任何方式鼓励用户在应用程序内使用（包括链接或文本引用）替代付款方式。规则是他们希望从应用程序产生的任何收入中分得 30%。只有在其他地方产生的收入才能被削减。亚马逊 Kindle 应用已经打了这场仗。另请注意，一旦他们认为这笔收入在某种程度上是“他们的”，那么就很难说服他们。在第一次提交时要非常小心。

# sql - 如何从 base-2 字符串（例如 '001011'）转换为二进制数据类型？

> ID：15557490
> 
> 赞同：3
> 
> 时间：2013-03-21T20:32:03.413
> 
> 标签：sql, sql-server, binary

我有一个小的二进制数作为字符串`001011`，我希望将其转换为`binary`或`varbinary`（即`0xB`）。我将如何在 MS SQL Server 中执行此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T23:10:47.770

```
CREATE FUNCTION dbo.fnConvertToBinary
    (@str VARCHAR(32), @base TINYINT)
RETURNS VARBINARY(32)
AS
BEGIN
DECLARE @bytes INT = 0
DECLARE @i INT = 0
DECLARE @l INT = LEN(@str)

IF (@base = 2)
BEGIN
    WHILE @i <= @l
    BEGIN   
        SET @bytes = @bytes * 2 + CAST(SUBSTRING(@str, @i, 1) AS TINYINT)
        SET @i = @i + 1
    END
END

IF (@base = 8)
BEGIN
    WHILE @i <= @l
    BEGIN   
        SET @bytes = (CAST(SUBSTRING(@str, @i, 1) AS TINYINT) 
                            * POWER(8, @l-@i)) 
                            + @bytes
        SET @i = @i + 1
    END
END

IF (@base = 10)
    SET @bytes = CAST(@str AS INT)

IF (@base = 16)
BEGIN
    SET @i = @l
    WHILE @i > 0
    BEGIN       
        DECLARE @bit INT = (CASE SUBSTRING(@str, @i, 1)
                            WHEN '0' THEN 0 WHEN '1' THEN 1
                            WHEN '2' THEN 2 WHEN '3' THEN 3
                            WHEN '4' THEN 4 WHEN '5' THEN 5
                            WHEN '6' THEN 6 WHEN '7' THEN 7
                            WHEN '8' THEN 8 WHEN '9' THEN 9
                            WHEN 'A' THEN 10 WHEN 'B' THEN 11
                            WHEN 'C' THEN 12 WHEN 'D' THEN 13
                            WHEN 'E' THEN 14 WHEN 'F' THEN 15 END) 

        SET @bytes = @bit * POWER(16, @l-@i) + @bytes

        SET @i = @i - 1
    END
END

RETURN CAST(@bytes AS VARBINARY(32))
END
GO 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T20:55:55.070

这是我对最多六位数的字符串的解决方案：

```
select cast((POWER(2, 5)*(ascii(substring(val, 6-5, 1)) - ASCII('0')) +
             POWER(2, 4)*(ascii(substring(val, 6-4, 1)) - ASCII('0')) +
             POWER(2, 3)*(ascii(substring(val, 6-3, 1)) - ASCII('0')) +
             POWER(2, 2)*(ascii(substring(val, 6-2, 1)) - ASCII('0')) +
             POWER(2, 1)*(ascii(substring(val, 6-1, 1)) - ASCII('0')) +
             POWER(2, 0)*(ascii(substring(val, 6-0, 1)) - ASCII('0'))
            ) as BINARY(2))
from (select '001011' as val) t 
```

我是这样写的，所以很明显如何将它推广到更长的字符串。如果超过 15，则增加`binary()`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T20:56:20.663

```
CREATE FUNCTION [dbo].[BinaryToDecimal]
(
    @Input varchar(255)
)
RETURNS bigint
AS
BEGIN

    DECLARE @Cnt tinyint = 1
    DECLARE @Len tinyint = LEN(@Input)
    DECLARE @Output bigint = CAST(SUBSTRING(@Input, @Len, 1) AS bigint)

    WHILE(@Cnt < @Len) BEGIN
        SET @Output = @Output + POWER(CAST(SUBSTRING(@Input, @Len - @Cnt, 1) * 2 AS bigint), @Cnt)

        SET @Cnt = @Cnt + 1
    END

    RETURN @Output  

END

SELECT CAST(dbo.BinaryToDecimal('001011') AS binary(1)) 
```

Fiddle here（注意它以整数形式输出二进制数据（11 = 0xB））：
[http ://sqlfiddle.com/#!6/c64ad/8](http://sqlfiddle.com/#!6/c64ad/8)

我以前在这里写过关于 BinaryToDecimal 函数的博客：http:
[//improve.dk/converting-between-base-2-10-and-16-in-t-sql/](http://improve.dk/converting-between-base-2-10-and-16-in-t-sql/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T20:38:27.533

更新：没有考虑字符串的“二进制”部分。

一种方法，使用数字表：

```
 with c(a) as (
 select 1
 union
 select 2
 union 
 select 3
 union
 select 4
 union
 select 5
  union
 select 6
 )

select cast( sum ( substring('001011', a, 1) * power(2, len('001011') - a) ) as varbinary(10)) from c 
```

# java - Apache POI - 以整数形式获取数字

> ID：15557495
> 
> 赞同：15
> 
> 时间：2013-03-21T20:32:14.657
> 
> 标签：java, apache-poi

数字都以 Double 形式从 Apache POI 单元格值返回。

当我这样做时`getCell(...).toString()`，在 Excel 中显示为“123”的数字将转换为“123.0”。

我怎么知道数字应该显示为整数？我需要在 Java 中应用一些魔法来复制 Excel 对“常规”格式所做的事情吗？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-03-21T20:39:54.827

Excel 将文件格式中的几乎所有数字都存储为浮点值，这就是为什么 POI 会为您返回一个数字单元格的双精度值，因为这才是真正存在的

我相信，虽然你的问题不太清楚，但你想要做的是在 Java 中获取一个 String 对象，其中包含它在 Excel 中看起来的数字？即将应用于单元格的格式化规则应用到原始数字，并返回格式化字符串？

[如果是这样，您想做与我在此处的回答](https://stackoverflow.com/a/7100727/685641)完全相同的事情。去引用：

> 您要做的是使用[DataFormatter 类](http://poi.apache.org/apidocs/org/apache/poi/ss/usermodel/DataFormatter.html)。您将此单元格传递给它，它会尽力返回一个字符串，其中包含 Excel 会为您显示该单元格的内容。如果你给它传递一个字符串单元格，你会得到这个字符串。如果您传递一个应用了格式规则的数字单元格，它将根据它们格式化数字并返回字符串。
> 
> 对于您的情况，我假设数字单元格应用了整数格式规则。如果您要求 DataFormatter 格式化这些单元格，它会返回一个包含整数字符串的字符串。

*编辑*对于那些显然发现[点击 JavaDocs 的工作量太大的](http://poi.apache.org/apidocs/org/apache/poi/ss/usermodel/DataFormatter.html#formatCellValue%28org.apache.poi.ss.usermodel.Cell%29)人来说，您需要使用[DataFormatter.formatCellValue(Cell)](http://poi.apache.org/apidocs/org/apache/poi/ss/usermodel/DataFormatter.html#formatCellValue%28org.apache.poi.ss.usermodel.Cell%29)方法。如果进行迭代，您将执行以下操作：

```
Workbook workbook = WorkbookFactory.create(new File("input.xlsx"));
DataFormatter formatter = new DataFormatter();
Sheet s = workbook.getSheetAt(0);
for (Row r : s) {
  for (Cell c : r) {
     System.out.println(formatter.formatCellValue(c));
  }
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-12-08T16:13:40.060

```
// We create a variable of type Workbook and load the excel for reading the fields.    

HSSFWorkbook workbook = new HSSFWorkbook(new FileInputStream("LIST.xls"));

// Getting the working sheet

HSSFSheet sheet = workbook.getSheetAt(0);

// Getting the working row

HSSFRow row = sheet.getRow(0);

// Store the numeric value on Int var 

int d = (int) row.getCell(0).getNumericCellValue();

// Printing the result

System.out.println(d0);

// Close the current workbook 

workbook.close(); 
```

# facebook - 如何在不点击请求的情况下知道用户是否有待处理的应用请求？

> ID：15557497
> 
> 赞同：0
> 
> 时间：2013-03-21T20:32:22.290
> 
> 标签：facebook, notifications, apprequests

如果用户单击我的应用程序的通知，他将被重定向到相应的画布页面，其中 $_REQUEST["request_ids"] 被处理，然后用户再次被重定向到“接受”“礼物”，bla bla bla。

但是：如果用户进入我的应用程序，而不点击通知（1），我应该找到一种方法来向用户显示一条消息“强迫”他点击通知（2）之前！

如果用户有待处理的“未处理”通知，有什么办法可以得到？

请看@图片。谢谢

![在此处输入图像描述](../Images/5040750acc210140a81fc26b6fbc0dc0.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T22:58:18.233

我发现在使用 Facebook PHP SDK 时，你可以这样做

```
$pendingReqs = $facebook->api("/me/apprequests"); 
```

通过检查返回的信息，您可以了解用户有多少待处理的请求并遍历它们

希望这对某人有用

信息：http: [//developers.facebook.com/docs/reference/api/user/#apprequests](http://developers.facebook.com/docs/reference/api/user/#apprequests)

# c# - asp.net 没有在 html 中显示我想要的字符串

> ID：15557504
> 
> 赞同：2
> 
> 时间：2013-03-21T20:32:47.330
> 
> 标签：c#, asp.net, string

我需要在两行中显示字符串中的前 24 个字符。我试图展示一个图表来解释我想要的字符串如下。

```
--------------
|month has th|
|irthy days  | 
```

如您所见，也有空格。

我的问题是当我尝试显示字符串时，它显示如下。

```
--------------
|month has   |
|thirty days | 
```

如何显示在第一个图表中？

这是我尝试做的方式

```
for (int j = 0; j <= 12; j++)
     if(temp_name[j].ToString() != Environment.NewLine)
         name += temp_name[j];

     name += Environment.NewLine;

for (int j = 13; j <= 24; j++)
     if (temp_name[j].ToString() != Environment.NewLine)
         name += temp_name[j]; 
```

我正在写前 12 个字符并换行，然后是接下来的 12 个字符

这是我需要此功能的图片。

![在此处输入图像描述](../Images/81960a5f49b13eda6b1db49bb890e932.png) 如您所见，我的主屏幕无法正确显示项目。我用粗体短横线显示差异

这是aspx标记，

```
s += "<span class='th radius'><div id='" + ds.Tables[0].Rows[i].ItemArray[0].ToString() + "' class='div_product_id two mobile-one columns' style='cursor:pointer;'>" +
                                         "<img src='images/galvaniz_boru.jpg'>" +
                                         "<div class='panel'><span style='font-size:11px'>" + ds.Tables[0].Rows[i].ItemArray[2].ToString() + "<br />" + name + "</span>" +
                                         "<p class='subheader'>" + ds.Tables[0].Rows[i].ItemArray[3].ToString() + " " + ds.Tables[0].Rows[i].ItemArray[4].ToString() + "</p></div></div></span>"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T21:03:17.493

您没有输出 12 个字符；

```
for (int j = 0; j <= 12; j++)
    if(temp_name[j].ToString() != Environment.NewLine)
     name += temp_name[j];

 name += Environment.NewLine; 
```

这会导致 name 获取前*13 个*字符（因为您也在使用第 12 个索引元素）。

```
for (int j = 13; j <= 24; j++)
     if (temp_name[j].ToString() != Environment.NewLine)
         name += temp_name[j]; 
```

这确实消耗了 12 个字符，但它从错误的索引开始；循环应该是这样的：

```
for(int j = 12; j < 24; j++)
    //etc 
```

你也可以使用类似的东西：

```
name += temp_name.Substring(0, 12); // do some checking by the way on length of temp_name!
name += "<br />";
name += temp_name.Substring(12, 12); //again, do some checking 
```

此外，将您的更改`Environment.NewLine`为，`"<br />"`因为这将使用 HTML 显示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T21:04:02.467

```
Dim str As String = "bu bir dübel, hem de gömlekli"
Dim str1 As String = Mid(str, 0, 12) ' bu bir dübel,
Dim str2 As String = Mid(str, 12, str.Length) ' hem de gömlekli 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T20:55:35.750

你可以这样做：

```
<pre id="MyPre" runat="server">
</pre>

protected void ButtonServer_Click1(object sender, EventArgs e)
{
    String MyString = "month has thirty days";

    MyString = MyString.Insert(12, "\n");

    MyPre.InnerText = MyString;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T20:38:30.763

HTML 无法识别`Environment.NewLine`. 您需要改用换行标记`<br />`。

第 5 行变为：

```
name += "<br />"; 
```

# google-maps - 自定义 google maps api 以在下拉列表中获取全球城镇的独家列表，而不是所有可用的地方

> ID：15557508
> 
> 赞同：0
> 
> 时间：2013-03-21T20:33:08.703
> 
> 标签：google-maps, google-maps-api-3, geolocation, google-maps-markers

自定义 google maps api 以在下拉列表中获取全球城镇的独家列表，而不是所有可用的地方

嗨，有没有办法摆弄 googlemap api 来限制我们搜索时自动完成菜单中可用的感兴趣区域。

我希望我的用户获得城镇、城市、村庄和兴趣点的列表，但仅此而已。没有商店，没有营业地点，没有机构

我应该能够将我的标记放在那些地方并在这些标记上附加一些照片..我可以这样做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T23:19:23.940

不可以。您只能将结果限制为**地理编码**或**场所**。

[**您需要使用Place Searches**](https://developers.google.com/maps/documentation/javascript/places#place_searches)（Google Places API 的一部分）编写自己的自动完成功能

然后，您可以将结果限制为[**THIS LIST**](https://developers.google.com/places/documentation/supported_types)中的任何类型。

# r - 作为数据框或矩阵的 R 对象的泛化

> ID：15557513
> 
> 赞同：2
> 
> 时间：2013-03-21T20:33:18.963
> 
> 标签：r, matrix, dataframe

我有一些关于编写一个可以在矩阵和 data.frames 上工作的函数的问题。例如想象一下：

```
DoubleThatThing <- function(thing) {
   stopifnot(is.matrix(thing) | is.data.frame(thing))
   2 * thing
} 
```

我的问题是：

1.  是否有一个通用术语来表示矩阵或 data.frame 的对象？中要替换`Thing`的东西`DoubleThatThing`。

2.  是否有普遍接受或广泛使用的变量名称`thing`？

3.  `is.matrix(thing) | is.data.frame(thing)`测试此类物体的最佳方法是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-21T21:24:24.840

我不确定这是否会对您有所帮助，或者这是否可以满足您的需求。但是为什么不声明 a并为and`generic method`定义方法呢？这是一个虚拟/愚蠢的例子：`matrix``data.frame`

```
# generic method
my_fun <- function(x, ...) {
    UseMethod("my_fun", x)
}

# default action
my_fun.default <- function(x, ...) {
    cx <- class(x)
    stop(paste("No method defined for class", cx))
}

# method for object of class data.frame
my_fun.data.frame <- function(x, ...) {
    print("in data.frame")
    tapply(x[,1], x[,2], sum)
}

# method for object of class matrix
my_fun.matrix <- function(x, ...) {
    print("in matrix")
    my_fun(as.data.frame(x))
}

# dummy example
df <- data.frame(x=1:5, y=c(1,1,1,2,2))
mm <- as.matrix(df)

> my_fun(df)
# [1] "in data.frame"
# 1 2 
# 6 9 

> my_fun(mm)
# [1] "in matrix"
# [1] "in data.frame"
# 1 2 
# 6 9 

> my_fun(as.list(df))
# Error in my_fun.default(as.list(df)) : No method defined for class list 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-21T20:41:38.857

Matrix 和 data.frame 在下面真的很不一样。它们的共同点是它们有两个维度。因此，您可以测试该公共属性：

```
DoubleThatThing <- function(thing) {
   stopifnot(length(dim(thing)) == 2)
   2 * thing
} 
```

但我不确定为什么这会比`is.matrix(thing) | is.data.frame(thing)`.

# objective-c - 将给定编码中的字节序列附加到 CFMutableString

> ID：15557516
> 
> 赞同：0
> 
> 时间：2013-03-21T20:33:29.393
> 
> 标签：objective-c, macos

我有一个 CFMutableString 对象，我想在给定编码（UTF-8、UTF-16、UTF-16LE、UTF-16BE 等）中附加一个字节序列

我拥有的最有效的方法是：

```
CFStringRef tmp = CFStringCreateWithBytesNoCopy(kCFAllocatorDefault, bytes, numBytes, encoding, NO, kCFAllocatorNull);
CFStringAppend(myMutableString, tmp);
CFRelease(tmp); 
```

有没有更好的方法呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T01:14:29.757

我假设您实际上是在询问效率（如 CPU 时间），并且您实际上确实在构建字符串时遇到了瓶颈。我将按照有用的可能性降序提出一些想法。

通常你将一堆东西附加到一个大字符串中，你可以使用`CFStringCreateByCombiningStrings`/将时间缩短 20-50% `-[NSArray componentsJoinedByString:]`。

```
CFStringRef tmp = CFStringCreateWithBytesNoCopy(kCFAllocatorDefault, bytes, numBytes, encoding, NO, kCFAllocatorNull);
CFStringAppend(myMutableString, tmp);
CFRelease(tmp); 
```

…做这个：

```
CFStringRef tmp = CFStringCreateWithBytesNoCopy(kCFAllocatorDefault, bytes, numBytes, encoding, NO, kCFAllocatorNull);
CFArrayAppendValue(myMutableArray, tmp);
CFRelease(tmp);
// ... after you've finished accumulating everything
CFString *myString = CFStringCreateByCombiningStrings(kCFAllocatorDefault, myMutableArray, kEmptyString); 
```

有时您知道最终要得到的字符串的大小，并且可以通过在对`CFStringCreateMutable`/ 的初始调用中使用正确的容量来缩短时间`-[NSMutableString stringWithCapacity:]`。当然，这种优化与数组连接不兼容。

您可以避免一些转换成本，如果您不使用数组连接，则可以避免一些临时`CFString`创建成本。

显然，右端 UTF-16 与`CFString`“字符”是一样的，所以你可以使用`CFStringCreateWithCharactersNoCopy`. 或`CFStringAppendCharacters`。

对于错误字节序的 UTF-16，“NoCopy”没有帮助，甚至可能有点伤害。此外，您可以比仅通过字节交换转换为右端 UTF-16 的通用转换更快地执行某些操作，特别是如果您可以就地执行此操作。我不会*认为*这会更快（尤其是在大字符串上），但如果这确实是一个瓶颈，那么绝对值得尝试和计时。

将指针移动 2 个字节后，以 BOM 为前缀的 UTF-16 就是其中之一。

对于 UTF-8，“NoCopy”同样没有帮助，而且可能会受到一点伤害。但是您显然确实需要进行转换。虽然您可能能够找到/编写比 CF 更快的解码器，但它似乎比使用错误字节序的 UTF-16 的可能性要小得多。但是您仍然可以使用 跳过临时字符串`CFStringAppendCString`。

也有可能，尽管不太可能，其他一些 Unicode 库喜欢`iconv`或`icu`可以以足够大的优势击败 CF，这是值得的。如果是这样，首先将所有内容都转换为右端 UTF-16，然后`CFStringCreateWithCharacters`（如果使用数组连接）或`CFStringAppendCharacters`（如果不是）。

然后总是有分配器和引用计数的技巧。如果你为字符串和数组存储创建一个区域分配器，以及一个不做任何事情的 CFArrayCallbacks，你可以只用几个 malloc 调用和几乎没有引用计数来构建所有东西，只需将所有东西放在区域的地板上，然后释放它们一次你这样做`componentsJoinedByString:`（当然，它使用默认分配器）。

当然，有了一些额外的应用知识，各种事情都是可能的。举一个非常明显的例子，假设您要附加一堆字符串，这些字符串都是 16 字节值的十六进制编码。在这种情况下，只需分配一大块 32*n+1 `unichar`，通过复制（右端 UTF-16）、从指针偏移 1 个字节（错误端 UTF-16）复制来“解码”您的 UTF，或用 0 交替字节（UTF-8），然后做一个大`CFStringCreateWithCharactersNoCopy`的 .

# java - 我不能按单行打印我的数组，只有一个长字符串

> ID：15557517
> 
> 赞同：0
> 
> 时间：2013-03-21T20:33:36.170
> 
> 标签：java, arrays

当我运行这段代码时，我只会得到一长串这样的名字：

```
Jones, Jon BS, Wells, Lisa HS, Ryes, Ric DR 
```

但我想要的是单独打印每一个

```
Jones, Jon BS
Wells, Lisa HS
Ryes, Ric DR 
```

我正在为这个程序使用两个类，我的主要是

```
import javax.swing.*;
import java.util.List;
import java.util.ArrayList; 
import java.util.Arrays;

public class someName
{
public static void main (String[] args)
    {
....//set all my variables and prompted user for number of Inputs
        {
        fName = JOptionPane.showInputDialog(null,"Enter "+i+" First Name: ");
        lName = JOptionPane.showInputDialog(null,"Enter "+i+" Last Name: ");
        level = JOptionPane.showInputDialog(null,"Enter "+i+" Highest Level of Degree: "); 
        someClass t = new someClass(fName,lName,level);
        listOfName[i] = t;
        }
    for(int i = 0; i<numPerson; i++)
        {
        System.out.println(Arrays.toString(listOfName));
        }
    }       
} 
```

当我改变

```
System.out.println(Arrays.toString(listOfName)); 
```

到

```
System.out.println(Arrays.toString(listOfName[i])); 
```

我收到一个错误说明

```
java:29: error: no suitable method found for toString(someClass) 
```

非常感谢任何和所有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T20:36:01.280

改变这个：

```
 for(int i = 0; i<numTutor; i++)
        {
        System.out.println(Arrays.toString(listOfTutor));
        } 
```

对此：

```
 for(int i = 0; i<numTutor; i++)
    {
        System.out.println(listOfTutor[i]);
    } 
```

换句话说，不是`listOfTutor` `numTutor`每次都打印，而是将每个元素打印一次。

或者，更好的是，使用增强的 for 循环：

```
 for(final Tutor tutor : listOfTutor)
    {
        System.out.println(tutor);
    } 
```

（它做同样的事情，但不需要`i`and `numTutor`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T20:36:10.200

这样做...

```
for(int i=0; i<listOfTutor.length; i++) {
    System.out.println(listOfTutor[i]);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T20:36:48.947

```
 for(int i = 0; i<numTutor; i++)
        {
        System.out.println(listOfTutor[i]);
        }
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T20:38:33.573

你试过吗？

```
System.out.println(listOfTutor[i]); 
```

或者

```
System.out.println(listOfTutor[i].toString()); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-21T20:40:02.323

使用以下代码

```
import javax.swing.*;
import java.util.List;
import java.util.ArrayList; 
import java.util.Arrays;

public class Stipend
{
public static void main (String[] args)
    {
    String fName = "";
    String lName = "";
    String level= "";
    String ans;
    String numStud;
    ans = JOptionPane.showInputDialog(null,"Enter the number of Tutor's: ");
    int numTutor = Integer.parseInt(ans);
    Tutor [] listOfTutor = new Tutor [numTutor];
    for (int i = 0; i<numTutor; i++)
        {
        fName = JOptionPane.showInputDialog(null,"Enter Tutor "+i+" First Name: ");
        lName = JOptionPane.showInputDialog(null,"Enter Tutor "+i+" Last Name: ");
        level = JOptionPane.showInputDialog(null,"Enter Tutor "+i+" Highest Level of Degree: "); 
        Tutor t = new Tutor(fName,lName,level);
        listOfTutor[i] = t;
        }
    for(int i = 0; i<numTutor; i++)
        {
            System.out.println(listOfTutor[i].toString());
        }
    }       
}

import java.util.Arrays;

public class Tutor
{
String firstName;
String lastName;
String degreeLevel;
String numStudents;
String FormalName;
public Tutor(String firstName, String lastName, String degreeLevel)
    {
    this.firstName = firstName;
    this.lastName = lastName;
    this.degreeLevel = degreeLevel;
    this.numStudents = numStudents;
    this.FormalName = lastName +", "+ firstName +" "+ degreeLevel;
    }   
public String toString()
    {
    return(FormalName);
    }   
} 
```

我希望这有帮助。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-21T20:47:01.813

认为这应该可以正常工作。：） 希望能帮助到你。

```
for(int i=0; i<listOfTutor.length; i++){ 
   System.out.println(listOfTutor[i].FormalName);
} 
```

# ruby - 转换二维数组的元素

> ID：15557518
> 
> 赞同：0
> 
> 时间：2013-03-21T20:33:41.437
> 
> 标签：ruby, arrays, type-conversion

我有以下 3x3 数组：

```
grid = [["1","2","3"],["4","5","6"],["7","8","9"]] 
```

我想将每个数字从 String 转换为 Fixnum。我试过了：

```
grid.each{ |thing| thing.each { |subthing| subthing = subthing.to_i }} 
```

但是，`puts grid[0][0].class`仍然输出`String`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T20:38:54.433

`each`只是迭代每个值，它不会改变内容。尝试使用`map`.

```
foo = grid.map{ |a| a.map(&:to_i) }  # foo => [[1,2,3,],[4,5,6],[7,8,9]], but grid is still the original 
```

如果要就地更新网格：

```
grid.each { |a| a.map!(&:to_i) } 
```

# java - Envers 拉回大量数据

> ID：15557522
> 
> 赞同：0
> 
> 时间：2013-03-21T20:33:51.403
> 
> 标签：java, hibernate, hibernate-envers

我目前正在用 envers 审核我的数据库，它做得很好。我已经解析了各种实体并在 UI 中显示结果，效果也很好。

我现在遇到了性能问题。我正在查询一个实体以获取记录，这个查询大约需要 5 秒！执行 SQL 似乎有许多简单的 SQL。查询似乎拉回了很多！

最好用一个例子来解释

我正在查询的实体是`House`

`Room`这与（是奇怪的例子;）一对一

我的`House`有一个字段，其中引用了`Room`. 房间不知道数据库级别的房屋，但在休眠时确实有一个 mappedBy 字段。

现在 Room 还具有其他参数，例如家具列表、窗户和门。

当我查询 house 并调用`House.getRoom().getId()`它时，envers 似乎也在查询 Room 内的所有参数。它将拉回所有家具信息、所有窗户信息等。我要审核的是房间，所以我只会比较房间中的简单参数，比如 wallColor 等，它们是基本的字符串或整数。

我的休眠配置根据参数进行了快速且延迟的获取，但看起来 Envers 正在拉取所有内容。

有趣的是，我发现如果关系颠倒了（房间实体有 House id），那么当我调用 room.getHouse().getId() 时，它不会提取所有内容。

这是休眠的怪癖还是我如何使用它？

我怎样才能让 envers 只阅读 Room 中的内容，然后如果我调用 getFurnitureList() 将尝试懒惰地加载而不是快速加载？

提前致谢

**编辑** 我一直在看预测，想知道我是否可以使用它来从这个对象返回特定的变量。有谁知道这是否可以解决我的问题？我仍在调查他们，但任何建议将不胜感激

谢谢

# android - Android 自定义默认标题栏未在 4.x 设备中显示

> ID：15557526
> 
> 赞同：1
> 
> 时间：2013-03-21T20:33:59.153
> 
> 标签：android, custom-titlebar

我已经自定义了默认标题栏，它在 2.x、3.x 设备中按预期显示，但在 4.x 设备中没有显示。

在设备 2.2 上：
![在此处输入图像描述](../Images/d98a0277deeaa92d8ee0ec75b1fabb3f.png)

在设备 4.1.2 上：
![在此处输入图像描述](../Images/66dbc7f3ecb1a8daf98ce3985a8aa05d.png)

这是onCreate里面的代码：

```
public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        TextView localTextView = (TextView) getWindow().findViewById(
                android.R.id.title);
        if (localTextView != null) {
            ViewParent localViewParent = localTextView.getParent();
            if ((localViewParent != null)
                    && ((localViewParent instanceof FrameLayout))) {
                View localView = ((LayoutInflater) getSystemService("layout_inflater"))
                        .inflate(R.layout.logout_button, null);
                UIImageButton localUIImageButton = (UIImageButton) localView
                        .findViewById(R.id.logoutButton);
                Rect localRect = new Rect();
                Window localWindow = getWindow();
                localWindow.getDecorView().getWindowVisibleDisplayFrame(
                        localRect);
                int i = localRect.top;
                int j = localWindow.findViewById(android.R.id.title).getTop() - i;
                PrintStream localPrintStream = System.out;
                Object[] arrayOfObject = new Object[1];
                arrayOfObject[0] = Integer.valueOf(j);
                localPrintStream.printf("%d", arrayOfObject);
                localUIImageButton.setMaxHeight(j);
                ((FrameLayout) localViewParent).addView(localView);
            }
        }
    } 
```

这是清单代码：

```
<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="15" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >
    <activity
        android:name=".MainActivity"
        android:label="@string/title_activity_main" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application> 
```

我希望 4.x 设备中的标题栏与 2.x 中的类似。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T21:29:48.183

对于 Android 4.0 及更高版本，您需要自定义操作栏。见：http: [//developer.android.com/guide/topics/ui/actionbar.html](http://developer.android.com/guide/topics/ui/actionbar.html)

与此类似的东西。

```
ActionBar actionBar = getSupportActionBar();

LayoutInflater inflator = (LayoutInflater).getSystemService(Context.LAYOUT_INFLATER_SERVICE);
View v = inflator.inflate(R.layout.logout_button, null); // your logout button
actionBar.setCustomView(v); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T20:16:21.663

花了几个小时后，我解决了我的问题。将此`android:theme=@android:style/Theme.Light`主题添加到活动是已解决的问题，现在与设备 2.2 屏幕截图相同的自定义标题栏可以正确显示在所有版本中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T21:19:22.970

解决此问题的一种快速方法是将 android:targetSdkVersion 更改回预蜂窝版本。然后应用程序将使用兼容模式呈现，并且标题栏应与旧设备匹配。

# node.js - 为什么我的自定义错误对象被 Express 路由器转换为字符串？

> ID：15557529
> 
> 赞同：3
> 
> 时间：2013-03-21T20:34:07.907
> 
> 标签：node.js, express, url-routing

我在 node.js (0.8.12) 和 express (2.5.8) 中使用自定义错误对象。当错误发生时，我想将它们路由到我的自定义错误处理程序，但是我的自定义错误对象被转换为字符串，而原生错误对象保持不变。

* * *

这是一个简单的例子：

```
var express = require('express');

var APIError = function(type) {
    this.type = type;
}
APIError.prototype = new Error();

var app = express.createServer();

app.use(app.router);
app.use(apiErrorHandler);

function log(source, err) {
  console.log(
    source, 
    typeof err, 
    err.constructor.name, 
    err instanceof APIError, 
    err instanceof Error
  );
}

function apiErrorHandler(err, req, res, next) {
  log("error handler:", err);
}

app.get('/', function(req, res, next) {
  var err = new APIError("notAllowed");
  log("router:", err);
  next(err);
});

app.listen(80); 
```

此示例的控制台输出如下：

```
router: object Error true true
error handler: string String false false 
```

如果我替换`new APIError("notAllowed")`为`new Error("notAllowed")`，则保留该对象，并且请求会产生以下输出：

```
router: object Error false true
error handler: object Error false true 
```

* * *

为什么我的自定义 Error 对象会被转换，尽管它是 Error 的一个实例？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T22:56:09.257

事实上，出现的字符串根本不是你的错误对象——这是在 Express 内部抛出的另一个错误（“非法访问”异常）。当 Express 将错误对象与字符串进行比较时，就会发生错误。

根本原因显然是在您的自定义错误对象上设置“类型”属性。这显然是 V8 的禁忌——它导致 toString() 抛出“非法访问”异常。更多详细信息：[https ://code.google.com/p/v8/issues/detail?id=2397](https://code.google.com/p/v8/issues/detail?id=2397)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T21:22:25.513

试试这个。请注意，`APIError`现在是一个命名函数：

```
var util = require('util');

函数 APIError（类型）{
    错误调用（这个，{
        消息：类型，
        构造函数选项：APIError
    });
    this.name = 'APIError';
}
util.inherits(APIError, 错误);
APIError.prototype.name = 'APIError';

```

另外，看看[这里](http://mcavage.github.com/node-restify/#Error-handling)。

# angularjs - 将其他指令添加到 angular.js 中的同一元素的指令

> ID：15557533
> 
> 赞同：6
> 
> 时间：2013-03-21T20:34:18.923
> 
> 标签：angularjs

如何创建将其他指令添加到元素的指令？

例如，我想要：

```
<input tag/> 
```

链接为：

```
<input ng-pattern='/[\\w\\d]+/' ng-maxlength='10'/> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T21:02:10.117

我不认为`$compile()`，链接功能，或者`terminal`是必要的。Angular 会自动`telement`为我们编译。

```
.directive('tag', [function() {
  return {
    priority: 1000,
    compile: function(telement, attrs) {
      attrs.$set('tag', null);
      attrs.$set('ngMaxlength', '10');
      attrs.$set('ngPattern', '/[\\w\\d]+/');
    }
  };
}]); 
```

用这个 HTML 测试过：

```
<input ng-model="test" ng-init="test=2" tag>
{{test}} 
```

[笨蛋](http://plnkr.co/edit/xNuDowy9lgkGB7ySAEF0?p=preview)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T20:44:56.783

我想出了一个似乎可行的解决方案：

```
.directive('tag', ['$compile', function($compile) {
  return {
    priority: 1000,
    terminal: true,
    compile: function(telement, attrs) {
      attrs.$set('tag', null);
      attrs.$set('ngMaxlength', '10');
      attrs.$set('ngPattern', '/[\\w\\d]+/');

      var link = $compile(telement);

      return function($scope, $element) {
        link($scope, function(clonedElement) {
         $element.replaceWith(clonedElement);
        });
      }
    }
  }
}]); 
```

关键是确保指令的优先级高于元素上的所有其他指令并终止，以便其他指令不会编译和链接。

# ios - 如何存储两个对象的数组

> ID：15557535
> 
> 赞同：3
> 
> 时间：2013-03-21T20:34:20.033
> 
> 标签：ios, xml, nsdictionary

我有两个 NSDictionary 对象，它们是我从服务器返回的一些 xml 数据中主元素的子元素。

xml 看起来像这样：

```
<Car>
  <first element1="1" element2="2">
    <second/>
  </first>
  <first element1="1" element2="2">
    <second/>
  </first>
  <first element1="1" element2="2">
    <second/>
  </first>
</Car> 
```

我将包含键值的第一个和第二个保存到他们自己的 NSDictionary 对象中。

问题是我可以有几个汽车元素，所以我需要保存一个包含第一个和第二个 NSDictionaries 的汽车元素数组，但我不太确定如何执行此操作。

任何帮助将不胜感激。

这是完整的 XML 示意图：

```
<Eng>
    <Result         >
        <Series         >
            <Link/>
            <FMF/>
                <AlsoLink/>
                <Plugins/>
            </FMF>
            <Sheet          >
                <Car>
                    <first            >
                    <second/>
                    </first>
                    <second            >
                    <first/>
                    </second>
                </Car>
            </Sheet>
        </Series>
    </Result>
</Eng> 
```

更新问题：

```
this is what my NSXMLParser methods are currently looking like
- (void)startTheParsingProcess:(NSData *)parserData
    {
        NSXMLParser *parser = [[NSXMLParser alloc] initWithData:parserData]; //parserData passed to NSXMLParser delegate which starts the parsing process
        [parser setDelegate:self];
        [parser parse]; // starts the event-driven parsing operation.
    }

    - (void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName attributes:(NSDictionary *)attributeDict
    {
        if ([elementName isEqualToString:@"first"]) {
            parsedFirstMutableDictionary = [[NSMutableDictionary alloc] initWithDictionary:attributeDict];
        }
        if ([elementName isEqualToString:@"second"]) {
            parsedSecondMutableDictionary = [[NSMutableDictionary alloc] initWithDictionary:attributeDict];
        }
        if ([elementName isEqualToString:@"Car"]) {
            self.parsedDataArrayOfDictionaries = [NSMutableArray arrayWithCapacity:8];
        }
    }

    - (void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName
    {

        if ([elementName isEqualToString:@"first"]) {
            [parsedDataArrayOfDictionaries addObject:parsedFirstMutableDictionary];
            [parsedDataArrayOfDictionaries addObject:parsedSecondMutableDictionary];
        }
    }

    //etc 
```

一切正常但是如果有几个第一个和第二个节点，当我向所有节点添加断点时，所有内容都以正确的顺序访问，然后转到 didEndElement 方法跳转到第一个节点将 NSDictionaries 正确添加到数组然后它跳转备份以开始解析，从那时起，刚刚添加的 parsedDataArrayOfDictionaries 中的旧值将丢失..

对此的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T18:49:02.870

我不确定这是否需要重写您的实现，但您不能定义 3 个 NSMutableArray 来将您的数据存储在其中吗？

```
 NSMutableArray * _fullCarList;
 NSMutableArray * _parsedFirstMutableDictionary;
 NSMutableArray * _parsedFirstMutableDictionary 
```

;

然后将您的 XML 数据从它们各自的可变字典添加到相应的 MutableArray，然后将两个字典添加到 fullCarList 数组？

```
_fullCarList = [[NSMutableArray alloc] initWithObjects: _parsedFirstMutableDictionary, _parsedFirstMutableDictionary, nil]; 
```

**一个数组数组。**

然后你可以遍历 _fullCarlist _fullCarList 中的每一行都会有一个对应的第一个和第二个可变字典项。

这样，您的所有数据都在一个巨大的阵列中，并且更易于访问。我个人觉得 Array 比 XML 更容易解析。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T19:54:24.860

不是 100% 确定我理解您的要求，但如果您只想保存*遇到*的第一个和第二个元素，请尝试：

```
- (void)startTheParsingProcess:(NSData *)parserData
{
    NSXMLParser *parser = [[NSXMLParser alloc] initWithData:parserData]; //parserData passed to NSXMLParser delegate which starts the parsing process
    [parser setDelegate:self];
    [parser parse]; // starts the event-driven parsing operation.
    self.carArray = [NSMutableArray array];     // array of car dictionaries
}

- (void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName attributes:(NSDictionary *)attributeDict
{
    if ([elementName isEqualToString:@"first"]) {
        if ([carDictionary objectForKey: @"first"] == nil)
            [carDictionary setObject: attributeDict forKey: @"first"];
    }
    if ([elementName isEqualToString:@"second"]) {
        if ([carDictionary objectForKey: @"second"] == nil)
            [carDictionary setObject: attributeDict forKey: @"second"];
    }
    if ([elementName isEqualToString:@"Car"]) {
        carDictionary = [NSMutableArray dictionary];
    }
}

- (void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName
{

    if ([elementName isEqualToString:@"Car"]) {
        [self.carArray addObject: carDictionary];
    }
} 
```

这将为您提供一系列汽车（字典），其中包含“第一”和“第二”的一组属性。

但是，如果您想保留*所有*第一个和第二个元素，那么您可以创建一个汽车字典数组，其中“first”和“second”是指向属性字典数组的指针。

```
- (void)startTheParsingProcess:(NSData *)parserData
{
    NSXMLParser *parser = [[NSXMLParser alloc] initWithData:parserData]; //parserData passed to NSXMLParser delegate which starts the parsing process
    [parser setDelegate:self];
    [parser parse]; // starts the event-driven parsing operation.
    self.carArray = [NSMutableArray array];     // array of car dictionaries
}

- (void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName attributes:(NSDictionary *)attributeDict
{
    if ([elementName isEqualToString:@"first"]) {
        [firstArray addObject: attributeDict];
    }
    if ([elementName isEqualToString:@"second"]) {
        [secondArray addObject: attributeDict];
    }
    if ([elementName isEqualToString:@"Car"]) {
        firstArray = [NSMutableArray array];
        secondArray = [NSMutableArray array];
        carDictionary = [NSMutableDictionary dictionary];
        [carDictionary setObject: firstArray forKey: @"first"];
        [carDictionary setObject: secondArray forKey: @"second"];
   }
}

- (void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName
{

    if ([elementName isEqualToString:@"Car"]) {
        [self.carArray addObject: carDictionary];
    }
} 
```

哦，最后，当 didEndElement 中的 elementName 为“Car”时，您可能想要添加这些内容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T01:39:07.580

好吧，只是为了澄清一下，我的代码的一切都很好，只是我两次初始化 parsedDataArrayOfDictionaries 所以它们是它的两个对象。当我在玩弄代码工作时，我漏掉了一段代码，我然后忘记了……后来又重新发现了。

我知道没用...但已修复，感谢您的帮助。

# python - 重新索引数据帧

> ID：15557542
> 
> 赞同：23
> 
> 时间：2013-03-21T20:34:43.270
> 
> 标签：python, pandas, dataframe

我有一个数据框。然后我有一个逻辑条件，我使用它通过删除一些行来创建另一个数据框。但是，新数据框会跳过已删除行的索引。我怎样才能让它在不跳过的情况下按顺序重新索引？这是一个示例编码以澄清

```
import pandas as pd
import numpy as np

jjarray = np.array(range(5))
eq2 = jjarray == 2
neq2 = np.logical_not(eq2)

jjdf = pd.DataFrame(jjarray)
jjdfno2 = jjdf[neq2]

jjdfno2 
```

出去：

```
 0
0 0
1 1
3 3
4 4 
```

我希望它看起来像这样：

```
 0
0 0
1 1
2 3
3 4 
```

谢谢。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-03-21T20:41:07.893

一种方法是使用`reset_index`：

```
>>> df = pd.DataFrame(range(5))
>>> eq2 = df[0] == 2
>>> df_no_2 = df[~eq2]
>>> df_no_2
   0
0  0
1  1
3  3
4  4
>>> df_no_2.reset_index(drop=True)
   0
0  0
1  1
2  3
3  4 
```

# html - 垂直对齐图像的底部和某些文本的顶部

> ID：15557544
> 
> 赞同：0
> 
> 时间：2013-03-21T20:34:46.113
> 
> 标签：html, css

我想将多张图片与每张图片下方的一些文字对齐。文本可以有多行并居中对齐。图像可以具有不同的高度，但始终具有相同的宽度。图像的底部应处于相同的高度，文本框的顶部应处于相同的高度。

为了更好地说明这一点：

![在此处输入图像描述](../Images/afd517367ca3ae9180b1781b2cd8dce3.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T20:55:28.767

您可以使用**CSS**表格布局来实现此目的：（更新为简化版本）[工作示例](http://jsfiddle.net/xWA6d/4/embedded/result/)

诀窍是坚持`baseline`垂直对齐。这将创建一个（视觉）基线，在该基线上方将显示每个图像。兼容性同`display: table`，即IE8+。

CSS：

```
.row {
    display: table;
    table-layout: fixed;
    border: 1px solid grey;
}
.pic {
    display: table-cell;
    padding-left: 20px;
    vertical-align: baseline;
}
.pic:first-child {
    padding-left: 0;
}
.pic img {
    vertical-align: bottom; /* only needed for removing a few pixel gap between image and paragraph */
    border: 1px solid red;
}
.pic p {
    margin: 0;
    text-align: center;
    border: 1px solid #000;
} 
```

HTML：

```
<div class="row">
    <div class="pic">
        <img src="http://dummyimage.com/100x60/000/fff" alt="ALT">
        <p>Lorem<br>ipsum</p>
    </div>
    <div class="pic">
        <img src="http://dummyimage.com/100x80/000/fff" alt="ALT">
        <p>Lorem</p>
    </div>
    <div class="pic">
        <img src="http://dummyimage.com/100x20/000/fff" alt="ALT">
        <p>Lorem<br>ipsum<br>trying to break<br>everything</p>
    </div>
    <div class="pic">
        <img src="http://dummyimage.com/100x40/000/fff" alt="ALT">
        <p>Lorem<br>ipsum</p>
    </div>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T20:39:18.887

制作包装 div `position: relative;`，然后给图像这个 CSS：

```
#wrapper .img_class {
    position: absolute;
    bottom: 0px;
    left: 20px; /* variable value */
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T22:06:04.407

这对我有用... [JsFiddle](http://jsfiddle.net/guitarmanmike/HQB5P/12/)它不会在 jsfiddle 中运行 js，但如果你将它复制到 html 文件中它就可以工作。

```
 <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>images</title>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<link type="text/css" rel="stylesheet" href="css/site.css"/>
<script type="text/javascript">
var maxHeight;

function getMaxHeight(){
    var imgs=document.getElementsByClassName("bottomAlignedImage");

    if(imgs.length>0){
        maxHeight=imgs[0].height;
        for( var i=1; i<imgs.length; i++){
         var currImg = imgs[i];
            if(currImg.height>maxHeight)
              maxHeight = currImg.height;
              }
        }

}

function applyMarginToImages(){

    var imgs=document.getElementsByClassName("bottomAlignedImage");

    for( var i=0; i<imgs.length; i++){
        var currImg = imgs[i];
        currImg.style.marginTop = maxHeight-currImg.height;
        }
}

</script>
</head>

<body onLoad="getMaxHeight();applyMarginToImages();">
<table>
<tr id="imgRow">
    <td><img class="bottomAlignedImage" style="" src="http://dummyimage.com/100x300/000/fff"/></td>
    <td><img class="bottomAlignedImage" style="" src="http://dummyimage.com/100x100/000/fff"/></td>
    <td><img class="bottomAlignedImage" style="" src="http://dummyimage.com/100x150/000/fff"/></td>
</tr>
<tr id="imgTextRow">
<td class="center"><p>Big</p></td>
<td class="center"><p>Small</p></td>
<td class="center"><p>Medium</p></td>
</tr>
</table>
</body>
</html> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T22:13:01.660

您的终极解决方案就在这里。它完全适应。

[http://jsfiddle.net/v99yf/1/](http://jsfiddle.net/v99yf/1/)

在这个例子中我使用了`<p>`，但你可以使用`<div>`

# ruby-on-rails - 用于 phusion 的 dispatch.fcgi 和 rails

> ID：15557545
> 
> 赞同：0
> 
> 时间：2013-03-21T20:34:46.110
> 
> 标签：ruby-on-rails, passenger

我遇到了以下问题：在我的主机 (www.site5.com) 上，ruby 相当旧 - 1.8.7，服务器在 Apache 下运行，Phusion Passenger 用于部署。支持团队安装了一个 RVM，这样我就可以使用 ruby​​ 1.9.3。然而，即使安装一个最简单的 rails 应用程序，服务器报告

```
Internal Server Error

The server encountered an internal error or misconfiguration and was unable to complete your request.

More information about this error may be available in the server error log.

Additionally, a 500 Internal Server Error error was encountered while trying to use an ErrorDocument to handle the request. 
```

问题在于配置我在这里展示的 dispatch.fcgi 和 .htaccess 文件：

调度.fcgi

```
 #!/home/foo/.rvm/rubies/ruby-1.9.3-p392/bin/ruby
    ENV['RAILS_ENV'] ||= 'production'
    ENV['HOME'] ||= `echo ~`.strip
    ENV['GEM_HOME'] = File.expand_path('~/.rvm/gems/ruby-1.9.3-p392')
    ENV['GEM_PATH'] = File.expand_path('~/.rvm/gems/ruby-1.9.3-p392') + ":" +
        File.expand_path('~/.rvm/gems/ruby-1.9.3-p392@global')
    require 'fcgi' 
    require File.join(File.dirname(__FILE__), '../config/environment.rb')
    class Rack::PathInfoRewriter
     def initialize(app)
       @app = app
     end
     def call(env)
       env.delete('SCRIPT_NAME')
       parts = env['REQUEST_URI'].split('?')
       env['PATH_INFO'] = parts[0]
       env['QUERY_STRING'] = parts[1].to_s
       @app.call(env)
     end
    end
Rack::Handler::FastCGI.run  Rack::PathInfoRewriter.new(try::Application) 
```

.htaccess

```
AddHandler application/x-httpd-php52 .php
<IfModule mod_fastcgi.c>
AddHandler fastcgi-script .fcgi
</IfModule>
<IfModule mod_fcgid.c>
AddHandler fcgid-script .fcgi
</IfModule>

Options +FollowSymLinks +ExecCGI 
#Change to your environment
RailsEnv production
RewriteEngine On
 RewriteCond %{REQUEST_URI} ^/stats/(.*)$ [OR]
 RewriteCond %{REQUEST_URI} ^/failed_auth.html$
 RewriteRule .* - [L]
 RewriteRule ^$ index.html [QSA]
 RewriteRule ^([^.]+)$ $1.html [QSA]
 RewriteCond %{REQUEST_FILENAME} !-f
 RewriteRule ^(.*)$ dispatch.fcgi [QSA,L] 
```

支持团队努力，但到目前为止我们还没有找到出路……

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-22T21:50:46.147

检查您是否确实获得了您认为运行 dispatch.fcgi 的 ruby​​ 版本，例如通过添加

提高 RUBY_VERSION

首先在文件中查看使用 Web 浏览器访问该站点时它产生的输出（希望回溯出现在那里，就我而言。）

我刚刚在 fsdata.se 网络酒店遇到了类似的情况。即使使用像您这样的 #!/ shebang 行，该文件实际上也是由 ruby​​ 1.8.7 执行的！解决方法是制作一个 dispatch.fcgi，它只执行正确的 ruby​​ 版本执行真正的调度脚本，如下所示（修改为您的路径）：

> exec("/usr/bin/env /home/foo/.rvm/rubies/ruby-1.9.3-p392/bin/ruby /home/foo/[rails 应用的路径]/public/realdispatch.fcgi")

realdispatch.fcgi 的内容看起来与您的 dispatch.fcgi 相似。我从[dreamhost](http://wiki.dreamhost.com/Rails_3)得到它，这是一个很好的资源页面。

我的 .htaccess（由 fsdata 生成）如下所示：

```
RewriteEngine   On 
RewriteBase     / 
RewriteRule     ^$ index.html [QSA] 
RewriteRule     ^([^.]+)$ $1.html [QSA] 
RewriteCond    %{REQUEST_FILENAME} !-f 
RewriteRule     ^(.*)$ dispatch.fcgi [QSA,L] 
```

现在，除了我的资产 url 没有正确加载之外，一切正常 - 仍在处理那个。）

# ios - 在横向启动时 UIView 大小变糟

> ID：15557548
> 
> 赞同：1
> 
> 时间：2013-03-21T20:34:52.827
> 
> 标签：ios, objective-c, uiview, uiviewcontroller

我有一个容器`UIViewController`，在我的`viewDidLoad`方法中我从情节提要加载它的子视图控制器。然后我将子视图控制器视图添加为子视图并尝试设置这个新的视图大小：

```
 childVC.view.frame=CGRectMake(0,0,768,1004); 
```

发生的情况是，当您以横向模式启动应用程序时，左侧（物理设备的底部）会出现 20 像素的“间隙”。如果我在代码中获取设备方向并使用，我可以避免这种情况

```
 CGRectMake(0,0,748,1024); 
```

当检测到景观时，改为使用 frame 属性。但是，我认为必须有不同的解决方案。

在问题出现之前：我设置了框架而不是边界属性，因为一旦解决了这个问题，我需要将视图定位在 0,0 以外的位置。据我所知，没有其他方法可以做到这一点，对吧？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T20:50:11.240

根据父视图的边界设置子视图的框架。然后确保子视图的自动调整大小掩码设置为“灵活宽度”和“灵活高度”。不要像你一样对尺寸进行硬编码。

```
childVC.view.frame = parentVC.view.bounds;
childVC.view.autoresizingMask = UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight; 
```

一旦这工作，您可以根据需要调整子视图的框架。但它仍然应该基于父视图的边界。

# java - Log4j 嵌套诊断上下文 NDC

> ID：15557549
> 
> 赞同：2
> 
> 时间：2013-03-21T20:34:55.463
> 
> 标签：java, web-applications, log4j, ndc

当用户向我的 Web 应用程序发送请求时，会将用户会话 ID 添加到 NDC 堆栈中以在 log4j 日志文件中使用，但由于某种原因，当我调用另一个方法时，会话 ID 似乎不是在该方法内的日志调用中。尽管该方法完成了其余过程，但仍会在日志文件中保留会话 ID。

我不太确定为什么会发生这种情况，并且想知道是否有人知道这可能是为什么，或者对丢失会话 ID 的原因有任何理论？

感谢您提供的任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T15:03:40.730

NDC 是基于每个线程进行管理的——这意味着如果您在一个线程中将会话 ID 推送到堆栈上，然后在另一个线程中调用方法，您的会话 ID 将不存在。

如果没有你的代码上下文，我很难回答......如果你发布你的代码，我可能会提供一个具体的答案。

# asp.net - 用户表不存在

> ID：15557550
> 
> 赞同：1
> 
> 时间：2013-03-21T20:34:56.227
> 
> 标签：asp.net, dotnetnuke

我制作了一个使用`Users`DNN 表的模块。
但是今天我收到`Users`表不存在的有线错误。
当我查看数据库时，我看到`Users`表名实际上是`dbo_Users`.
我认为 DNN`Users`表总是具有相同的名称，但它似乎不是。

dnn 将该前缀添加到表（所有 DNN 表）的原因是什么，我如何知道表是否具有该前缀？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T21:02:03.373

DotNetNuke 允许为数据库（以及自定义模式/数据库所有者）设置带有“[对象限定符”的站点。](http://www.dotnetnuke.com/Resources/Wiki/Page/objectQualifier.aspx)这样可以提高安全性，并有可能在同一数据库中托管多个应用程序，同时避免命名冲突。这些原因都不是很好，很少有人使用该功能，但是您仍然不时遇到它。

您可以使用`DotNetNuke.Common.Utilities.Config.GetObjectQualifer()`来获取当前站点的对象限定符。

在作为包安装的一部分运行的任何脚本中，DNN 将自动替换`{databaseOwner}`并`{objectQualifier}`使用正确的值标记。

如果您使用[Entity Framework](http://blogs.law.harvard.edu/brandonhaynes/2009/09/08/dotnetnuke-entity-framework-model-adapter/)或[LINQ to SQL](http://blogs.law.harvard.edu/brandonhaynes/2008/10/14/using-the-linq-to-sql-adapter-in-a-dotnetnuke-module/)，则有由 Brandon Haynes 组合在一起的模型适配器，它们会自动将这些考虑在内。

# web-services - MVC4 从 URL 获取请求变量

> ID：15557556
> 
> 赞同：0
> 
> 时间：2013-03-21T20:35:25.010
> 
> 标签：web-services, asp.net-mvc-4

我第一次使用 MVC4，我正在尝试创建一个 WebService。但是，当我尝试这样做时：`http://localhost:****/api/mycontroller/?number=1&id=7` 我无法从 URL 中检索数据。

我怎样才能得到这两个变量？ `Request.QueryString["ParameterName"]`导致错误，它无法识别此功能。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T02:53:25.103

我假设您指的是允许我们构建 RESTful 应用程序的 WebApi。如果是，那么`Request`在 an 中甚至没有对象，`ApiController`因为`System.Web.Mvc`没有导入。Controller 方法在 ApiController 中的工作方式与 MVC 控制器的不同之处在于 api 方法被用作或调用为 HTTP 方法。因此，如果您有：

```
[HttpGet]        
public int Count(int id)
{            
    return 50;
}

public string Get(int id)
{
    return "value";
} 
```

默认情况下，如果不添加自定义路由，这将不起作用，因为框架将这两种方法视为相同。关于你的问题，如果你想在 GET 中捕获查询字符串而不是默认值`Get(int id)`，你应该将它们定义为 Dave A 提到的方法参数，如下所示：

```
public string GetByNumberAndId(int number, int id) {
   return "somevalue";
} 
```

您可以像现在一样调用该方法：

```
http://localhost:****/api/mycontroller/?number=1&id=7 
```

[您可以在其官方网站](http://www.asp.net/web-api)上阅读有关 WebApi 的更多信息。[这个教程](http://www.asp.net/web-api/overview/getting-started-with-aspnet-web-api/tutorial-your-first-web-api)可以给你一个很好的推动，虽然它是在一年前写的，但它仍然是一个很好的资源。

# jquery - 如何使用单击列表项中“a”标记的单击事件切换多个 li 元素

> ID：15557560
> 
> 赞同：0
> 
> 时间：2013-03-21T20:35:38.477
> 
> 标签：jquery, html

当从其标记元素接收到事件时，我想使用类切换所有列表项上的`checkedList`和`selectedList`类，最后将带有类元素的相应范围内的文本放入带有类的 div 中。`privListItem``a``privLabel``privLabel_textHere`

```
 <div class="privLabel_textHere"></div>

    <div class="psSelectDD dn">
      <ul class="psSelectUl">
         <li class="privListItem checkedList selectedList">
           <a href="/pp" class="psLink">
             <span class="privLabel">PP</span>
           </a>
         </li>
         <li class="privListItem">
           <a href="/pf" class="psLink">
             <span class="privLabel">PF</span>
           </a>
         </li>
         <li class="privListItem">
           <a href="/po" class="psLink">
             <span class="privLabel">PO</span>
           </a>
         </li>
      </ul>
    </div> 
```

这是下面的JS

```
 $(".psSelectDD li").find("a").on("click", function(e) {
            var $this = $(this);
            e.preventDefault();
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T20:40:10.217

```
$(".psSelectDD li a").click(function(e) {
   e.preventDefault();
   $(".privListItem").toggleClass("checkedList selectedList");
   var text = $(this).find(".privLabel").html();
   $(".privLabel_textHere").html(text);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T21:05:46.703

在遵循@nnnnnn 的建议后，我终于得到了自己问题的答案。哈哈哈……很奇怪吧？？

```
 $(".psSelectDD li").find("a").on("click", function(e) {
            var $this = $(this);
            e.preventDefault();

            $(".privListItem").removeClass("checkedList selectedList");

            $this.parent("li").toggleClass('selectedList checkedList');
    }); 
```

# smart-mobile-studio - 使用 Smart Mobile Studio 1.1 从外部文件加载备忘录控件

> ID：15557571
> 
> 赞同：2
> 
> 时间：2013-03-21T20:36:21.233
> 
> 标签：smart-mobile-studio

我如何从外部文件加载备忘录控件

示例：\res\info.txt

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T21:08:50.767

看起来 SMS 的人已经想出了一个快速而肮脏的解决方案，直到他们可以在 TStringList 中添加一个 LoadFromUrl 方法

[http://smartmobilestudio.com/forums/topic/loading-memo-from-file-resinfo-txt/](http://smartmobilestudio.com/forums/topic/loading-memo-from-file-resinfo-txt/)

他们的解决方案`LoadFromURL`通过帮助对象向 TStringList 类添加方法来工作。下面的代码是从 Smart Mobile Studio 论坛复制的，并经过调整以与 Smart Mobile Studio 1.1 一起使用。您可以使用它 unitil`TStringList.LoadFromUrl`出现在 RTL 中。

```
type
  TStringlistHelper = class helper for TStringList
    procedure LoadFromUrl(aUrl:String;Callback: TProcedureRef = nil);
  end;

procedure TStringlistHelper.LoadFromUrl(aUrl:String;
            Callback:TProcedureRef);
var
  mRequest: TW3HttpRequest;
begin
  mRequest:=TW3HttpRequest.Create;
  mRequest.OnDataReady:=procedure (Sender:TW3HttpRequest)
  begin
    self.text:=Sender.ResponseText;
    if assigned(Callback) then Callback;
    w3_callback(sender.free,100);
  end;
  mRequest.Get(aUrl);
end; 
```

只需将此代码添加到某个单元，然后在您的项目中使用该单元。

# c#-4.0 - 如何在 Excel 选项中添加我们自己的组？

> ID：15557572
> 
> 赞同：0
> 
> 时间：2013-03-21T20:36:25.097
> 
> 标签：c#-4.0, excel-2010

对于我的项目，我想在 Excel-> 选项中添加我自己的组（如常规、校对、公式），我将在其中显示与我的项目相关的所有选项，如日志选项等...我尝试使用后台视图，但我不是能够使用它来编辑这个对话框。

有人可以帮我解决这个问题吗？

问候， 阿迪思

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T16:55:39.230

据我所知（如果我错了，请纠正我），您无法更改`Excel --> Options`. 您可以做的最好的事情（如您之前提到的）是修改`Backstage View`. [这个网站有一个令人难以置信的后台视图编辑教程](http://www.rondebruin.nl/backstage.htm)。

我在他们的**将自定义选项卡添加到后台视图**部分中获取了代码，并使用它来修改工作簿以向您展示输出的样子。修改后，我的工作簿会打开新选项卡`MyTab`和一堆新的分组和选项：

![在此处输入图像描述](../Images/d7038fd37df01d57c3af0bdfb6055836.png)

# linux - 如何使用“catdoc”显示以 utf-8 编码的停靠文件

> ID：15557573
> 
> 赞同：0
> 
> 时间：2013-03-21T20:36:28.780
> 
> 标签：linux, unix, terminal

我有很多 docx 文件，我想在终端上阅读它们。我找到了 catdoc [http://www.wagner.pp.ru/~vitus/software/catdoc/](http://www.wagner.pp.ru/~vitus/software/catdoc/)

当我使用它时，输出只是不可读的字符。我的 docx 文件以 utf-8 编码。我尝试了“catdoc -u my_file.docx”但不起作用。

请帮忙。非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2018-07-18T10:18:26.243

docx 是压缩的 XML 文件。

要提取和剥离 XML，请尝试基于

```
unzip -p "*.docx" word/document.xml | sed -e 's/<[^>]\{1,\}>//g; s/[^[:print:]]\{1,\}//g' 
```

从命令行[fu](http://g33kinfo.com/info/wp-content/uploads/2010/04/comfu1.txt)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-11T09:37:16.107

我天真的理解`catdoc`通常只能用于`DOC`文件。`DOCX`文件就像一个压缩容器，里面有一堆信息；您可以在其中找到某种 XML 格式的原始文档。

话虽如此，我使用[doc2txt](http://docx2txt.sourceforge.net/#code "http://docx2txt.sourceforge.net/#code")工具或[unoconv](http://dag.wieers.com/home-made/unoconv/#download "http://dag.wieers.com/home-made/unoconv/#download")工具（后者需要安装 OpenOffice 或 LibreOffice 套件）提取文件的内容`DOCX`，甚至是文件内容，取得了令人愉快的成功。`DOTX`

以下是我过去成功使用的一些示例工作流程：

```
# This one, contrary to the unoconv case, does not fire up an instance
# of either LibreOffice or OpenOffice.
docx2txt.pl < ./pesky-word-doc.docx > ./pesky-word-doc.txt

# This one, however, does fire up a rather heavy 'headless' OpenOffice
# or LibreOffice instance process per conversion. You can get around this
# using the next approach below.
unoconv -f txt -o ./pesky-word-doc.txt ./pesky-word-doc.docx

# If you need to convert a couple of dozens such documents, you might want
# to run it via a service port (you get the idea):
unoconv --listener --port=2002 &
unoconv -f txt -o outdir *.docx
unoconv -f pdf -o outdir *.docx && open ./outdir/*.pdf # Convenient, if you run MacOSX
kill -15 %-

# Kind of introducing catdoc: The sed was needed for German documents where
# somehow I couldn't find the proper encoding settings.
unoconv -f doc -o ./pesky-word-doc.doc ./pesky-word-doc.docx && \
          catdoc -u ./pesky-word-doc.doc | sed 's/ь/ü/g;s/д/ä/g;s/ц/ö/g' 
```

还有其他选项，例如使用一些可用的 java 解析器，可以在[此处](https://github.com/plutext/docx4j/blob/master/src/main/java/org/docx4j/TextUtils.java "这个我还没试过")和[此处](http://sourceforge.net/projects/docxtoany/?source=navbar "这个我也没试过")找到。输出质量不同，根据您的预期用途，您需要选择其中一种方法。

# javascript - 在 Javascript 中通过多个 if 语句运行 While 循环

> ID：15557574
> 
> 赞同：1
> 
> 时间：2013-03-21T20:36:29.533
> 
> 标签：javascript, loops, if-statement, while-loop

我目前正在学习 Javascript 并想问如何通过几个 if 语句运行一个 while 循环，以便我将 12 个月显示在列表中，我想我想使用类似的计数器

```
while(monthName < 10){ 
```

但我不确定如何将其合并到我的函数中：

```
window.onload = function() {
document.getElementById("months").innerHTML = getMonth(0);
};

function getMonth(month) {
var monthName;
if (month == 0) {
    monthName = "January";
}
if (month == 1) {
    monthName = "February";
}
if (month == 2) {
    monthName = "March";
}
if (month == 3) {
    monthName = "April";
}
if (month == 4) {
    monthName = "May";
}
if (month == 5) {
    monthName = "June";
}
if (month == 6) {
    monthName = "July";
}
if (month == 7) {
    monthName = "August";
}
if (month == 8) {
    monthName = "September";
}
if (month == 9) {
    monthName = "October";
}  
if (month == 10) {
    monthName = "November";
}
if (month == 11) {
    monthName = "December";
}
return monthName;
} 
```

[http://jsfiddle.net/priswiz/rUpsb/](http://jsfiddle.net/priswiz/rUpsb/)

我知道有更有效的方法可以做到这一点，例如使用数组，但出于教育目的要求使用 while 循环/计数器。

谢谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T20:41:34.403

我建议一个数组：

```
var months = ['January','February','March'...]; 
```

然后您将能够使用索引返回：

```
for(var i=0, max=months.length; i<max; i++){

     // You could have an if statement in here to do any checks...
     console.log(months[i]); // Just prints to console
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T20:42:40.270

这将是一个更短的解决方案

```
var months = ["jannuary", ..., "Dezember"];

function getMonth(monthNumber){
    return months[monthNumber];
}

function getAllMonthsNames(){
    return months.join(", ");
} 
```

我希望它有帮助

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T20:43:47.740

```
window.onload = function() {
  var current = 0;
    var html = '';
    while(current < 12){
      html += getMonth(current++) + '<br />';        
    }
  document.getElementById("months").innerHTML = html;
};

function getMonth(month) {
var monthName;
if (month == 0) {
    monthName = "January";
}
if (month == 1) {
    monthName = "February";
}
if (month == 2) {
    monthName = "March";
}
if (month == 3) {
    monthName = "April";
}
if (month == 4) {
    monthName = "May";
}
if (month == 5) {
    monthName = "June";
}
if (month == 6) {
    monthName = "July";
}
if (month == 7) {
    monthName = "August";
}
if (month == 8) {
    monthName = "September";
}
if (month == 9) {
    monthName = "October";
}
if (month == 10) {
    monthName = "November";
}
if (month == 11) {
    monthName = "December";
}
return monthName;
} 
```

[http://jsfiddle.net/rUpsb/1/](http://jsfiddle.net/rUpsb/1/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-21T21:02:50.193

我会给你一些先进的解决方案，但是如果你理解它，你会从中学到很多东西......

1.  创建一个月份数组 = `var months['January','February',....]`
2.  现在得到一个元素：**var month = months[x];**
3.  以有效的方式返回所有元素：

    在这里，我们克隆了months数组，以便我们拥有原始的副本

    **var clonedArray = 月.clone();**

    接下来我们要反转我们的数组，所以我们首先有最后一个元素

    **clonedArray.reverse();**

    接下来我们一次简单地弹出一个元素（pop 首先获取最后一个元素，这就是我们反转数组的原因，以便我们使用 pop 获得的第一个元素是一月而不是十二月

    **`while(clonedArray){`
    `var month = clonedArray.pop();`
    `// Do your stuff with month`
    `$('#yourListId').append($('<li/>').html(month));`
    `}`**

在最后一行中，我使用的是[jQuery](http://jquery.com/)，它只是意味着... getElementById('yourListId') 并添加一个新的列表项，其值为月份

# windows-store-apps - 纯文本缩放

> ID：15557583
> 
> 赞同：0
> 
> 时间：2013-03-21T20:36:47.763
> 
> 标签：windows-store-apps

是否可以放大和缩小纯文本？我现在正在开发一个应用程序，并希望我的用户能够捏住文本以便放大，就像在 IE 中查看网页时一样。我尝试将 CSS 属性 -ms-content-zooming 设置为缩放，但这不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T22:27:58.897

我刚刚用一些文本对此进行了测试，下面的工作正常。

取自 Jeremy 的很棒的 CodeShow 应用程序，来自[http://codeshow.codeplex.com](http://codeshow.codeplex.com)

```
<div id="容器">
    在这输入文字
    <img src="oceanrocks.jpg" />
</div>

```

```
.zoom #container {
    宽度：1000px；
    高度：600px；
    溢出：滚动；
    -ms-内容缩放：缩放；
    -ms-content-zoom-limit-max:1000%；
    -ms-content-zoom-limit-min:20%；
}

.zoom #container img {
    }

```

# bash - 我应该如何制作一个 bash 脚本来运行 C++ 程序？

> ID：15557585
> 
> 赞同：0
> 
> 时间：2013-03-21T20:36:48.613
> 
> 标签：bash

我有一个 C++ 程序，它在 linux 终端中运行的命令是：

```
./executable file input.txt parameter output.txt 
```

我想为它制作一个 bash 脚本，但我做不到。我试过这个：

```
#!/bin/bash
file_name=$(echo $1|sed 's/\(.*\)\.cpp/\1/')
g++ -o $file_name.out $1
if [[ $? -eq 0 ]]; then
    ./$file_name.out
fi 
```

但这是不对的，因为它没有输入，也没有数字参数。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T20:47:47.863

此脚本假定第一个参数是源文件名并且它是一个 .cpp 文件。为简洁起见发出错误处理。

```
#!/bin/bash
#set -x
CC=g++
CFLAGS=-O
input_file=$1
shift # pull off first arg
args="$*"
filename=${input_file%%.cpp}

$CC -o $filename.out $CFLAGS $input_file
rc=$?

if [[ $rc -eq 0 ]]; then
   ./$filename.out $args
   exit $?
fi

exit $rc 
```

因此，例如使用参数“myprogram.cpp input.txt parameter output.txt”运行脚本“doit”，我们看到：

```
% bash -x ./doit myprogram.cpp input.txt parameter output.txt
+ set -x
+ CC=g++
+ CFLAGS=-O
+ input_file=myprogram.cpp
+ shift
+ args='input.txt parameter output.txt'
+ filename=myprogram
+ g++ -o myprogram.out -O myprogram.cpp
+ rc=0
+ [[ 0 -eq 0 ]]
+ ./myprogram.out input.txt parameter output.txt
+ exit 0 
```

# php - 从 MySQL 查询结果中仅检索一列

> ID：15557587
> 
> 赞同：0
> 
> 时间：2013-03-21T20:36:54.510
> 
> 标签：php, mysql

我正在尝试从从数据库中提取的数据创建一系列链接。

这是我正在运行的查询：

```
<?php
$result = $db->query("SELECT imageurl FROM products WHERE name LIKE '%$id%' OR title LIKE '%$id%' OR category LIKE '%$id%' LIMIT 0, 15");
while($row = $result->fetch_row())
{
echo '<a href="'.print_r($row).'">'.$row.'</a>'.'<br />';
} ?> 
```

“imageurl”列包含图像的完整 URL。请注意，我使用的是 ProcessWire CMS，这是唯一查询引用的来源。

结果输出从数据库返回正确的条目。搜索有效。然而，它们实际上是一系列这样的行：

```
Array ( [0] => http://imagesource.net/graphics/product_images/pACE3-8573838t212.jpg ) Array 
```

末尾的“数组”一词包含一个超链接，但它没有链接到正确的 URL。

我确定这是一个明显的错误。谁能指出什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T20:39:47.950

试试这个：

```
echo '<a href="'.$row[0].'">'.$row[0].'</a>'.'<br />'; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T20:40:31.757

改变：

```
echo '<a href="'.print_r($row).'">'.$row.'</a>'.'<br />'; 
```

到：

```
echo '<a href="'.$row['imageurl'].'">'.$row['imageurl'].'</a>'.'<br />'; 
```

或者：

```
echo '<a href="'.$row['imageurl'].'">'.basename($row['imageurl']).'</a>'.'<br />'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T20:39:24.083

```
while($row = $result->fetch_row())
{
  echo '<a href="'.print_r($row[0]).'">'.$row[0].'</a>'.'<br />';
} ?> 
```

# c# - 删除除一个标签外的所有html标签

> ID：15557591
> 
> 赞同：4
> 
> 时间：2013-03-21T20:37:18.500
> 
> 标签：c#, regex

我有一些代码可以删除所有 html 标签，但我想删除所有 html，但`</td>`标签除外`</tr>`。

如何才能做到这一点？

```
public string HtmlStrip( string input)
{
    input = Regex.Replace(input, "<input>(.|\n)*?</input>", "*");
    input = Regex.Replace(input, @"<xml>(.|\n)*?</xml>", "*"); // remove all <xml></xml> tags and anything inbetween.  
    return Regex.Replace(input, @"<(.|\n)*?>", "*"); // remove any tags but not there content "<p>bob<span> johnson</span></p>" becomes "bob johnson"
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-21T20:41:34.460

正则表达式不适用于解析 XML 或 HTML。看看 HTML 敏捷包

[HTML 敏捷包](http://htmlagilitypack.codeplex.com/wikipage?title=Examples)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-10-23T08:54:54.303

删除所有标签 html，但标签 td 和 tr 除外

input = Regex.Replace(input, @"<(?!td|/td|tr|/tr).*?>", "");

# c++ - c++的事件系统

> ID：15557596
> 
> 赞同：0
> 
> 时间：2013-03-21T20:37:45.563
> 
> 标签：c++

我正在基于搅拌机的 GHOST 系统创建简单的 GUI 系统，我认为在这个问题中不是很重要。GHOST 本身有简单的事件系统。

我的事件系统应该是灵活的，允许某种 MVC 模式的实现，智能内存释放，应该跨平台工作，应该用 c++0x 编写

以下示例显示了从 GHOST 继承的处理事件的方法。

```
bool Application::processEvent(GHOST_IEvent *event)
{
    GHOST_IWindow *window = event->getWindow();
    bool handled = true;

    switch (event->getType()) {

        case GHOST_kEventWheel:
        {
            mouseDriver->handleWheel((GHOST_TEventWheelData *) event->getData());
        }
        break;  
        case GHOST_kEventButtonDown:
        {
            mouseDriver->handleButtonDown((GHOST_TEventButtonData *) event->getData());
        }
        break;  
        case GHOST_kEventButtonUp:
        {
            mouseDriver->handleButtonUp((GHOST_TEventButtonData *) event->getData());
        }
        break;

        case GHOST_kEventCursorMove:
        {
              mouseDriver->handleCursorMove((GHOST_TEventCursorData *) event->getData());
        } 
        break;

        case GHOST_kEventKeyUp:
        {
            keyDriver->handleKeyUp((GHOST_TEventKeyData *) event->getData());       
        }
        break;
        case GHOST_kEventKeyDown:
        {
            keyDriver->handleKeyDown((GHOST_TEventKeyData *) event->getData()); 
        }
        break;
    }
    return true;//currently not used while experimenting`
} 
```

我编写了两个类 KeyDriver 和 MouseDriver，它们应该处理 GHOST 事件并通知那些对事件感兴趣的人。现在真正的问题是从驱动程序类实现进一步事件分发的最佳实践是什么，我已经阅读了几篇文章和解决方案，事件系统如何工作，如[http://accu.org/index.php/journals/464](http://accu.org/index.php/journals/464)或**[C++ 事件系统设计](https://stackoverflow.com/questions/4130755/c-event-system-design)**，但我不知道该选择哪个以及为什么一个比另一个更好。

我曾想过像 Java 中的 Swing 那样做。在哪里创建并注册了监听器类来监听组件事件，并且监听器类必须从某个类继承。

为什么这种方法比使用回调函数的仿函数更糟糕？您会选择哪种实现方式，为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T22:10:40.657

我使用 Boost.Signals2（这是您已经引用过[的 StackOverflow 问题的公认答案）。](https://stackoverflow.com/questions/4130755/c-event-system-design)三四年前我第一次学习 Boost 库时就开始使用它，事实证明它简单、灵活、优雅且可靠；我没有理由寻找另一种解决方案。

自从我使用 Swing 以来已经有一段时间了，所以我无法真正深入评论。使用 Signals2，您仍然“创建”一个“监听器类”（通过定义信号类型；监听器是结果槽类型）；`connect()`并且您通过该方法将侦听器“注册”到给定的信号实例。

使用 Signals2，每个信号都可以接受多个参数，如果需要，可以将结果返回给信号器。连接维护有很大的灵活性。

# sql-server - 将 where 条件存储在表中以用于动态 sql 语句

> ID：15557604
> 
> 赞同：0
> 
> 时间：2013-03-21T20:38:11.620
> 
> 标签：sql-server, tsql

我有一个有条件的表。如何在 t-sql 条件表中连接

```
SAL
sal >100
sal < 100
sal=500

SELECT SAL  into #sal from condtbl
Select Top 1 @sal = event From #sal

`select * from emp where @sal` 
```

我怎样才能完成这样的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T20:52:12.480

如果您的条件作为有效 tsql 存储在表中，那么动态 tsql 方法是最好的方法。

不确定它是否适合您，但如果您可以重新评估该方法，可能会有比存储这样的条件更好的方法。例如：

```
select * from emp where [sal] BETWEEN @minSAL AND @maxSAL 
```

如您所见，这将需要您有 2 个输入变量——但它会覆盖所有 3 个基础`(>,<,=)`，具体取决于您传递的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T20:43:28.237

我认为这不是一个好主意，除了您需要处理[动态 sql](http://www.sommarskog.se/dynamic_sql.html)之外，还有很多因素会破坏您的查询，在条件表上有正确的列。无论如何，这是您想要的一种方法：

```
DECLARE @sal NVARCHAR(MAX), @sql NVARCHAR(MAX)

SELECT @sal = SAL
FROM condtbl
WHERE IdCondition = 1 -- an example, don't rely on TOP 1 without ORDER BY

SET @sql = 'SELECT * FROM emp WHERE ' + @sal

EXEC(@sql) 
```

# python - 无法使用 rotate_around() 围绕特定点旋转 matplotlib 补丁对象

> ID：15557608
> 
> 赞同：5
> 
> 时间：2013-03-21T20:38:27.267
> 
> 标签：python, matplotlib

我正在尝试使用 rotate_around() 和 rotate_deg_around() 函数围绕特定点旋转 matplotlib 矩形补丁对象。但是，补丁始终围绕原点旋转。我不确定如何确保补丁对象围绕特定点旋转。

这里的代码如下：

```
import numpy as np
import matplotlib.pyplot as plt
import matplotlib.patches as patches
import matplotlib as mpl
fig = plt.figure()
ax = fig.add_subplot(111)
ax.set_xlim(-0.05,1);ax.set_ylim(-0.05,1);
grid('on');

#Rotate rectangle patch object
ts = ax.transData
tr = mpl.transforms.Affine2D().rotate_deg_around(0.2,0.5,10)
t= ts + tr

rec0 = patches.Rectangle((0.2,0.5),0.25,0.2,alpha=0.5)
ax.add_patch(rec0)

#Rotated rectangle patch
rect1 = patches.Rectangle((0.2,0.5),0.25,0.2,color='blue',alpha=0.5,transform=t)
ax.add_patch(rect1);

#The (desired) point of rotation
ax.scatter([0.0,0.2],[0.0,0.5],c=['g','r'],zorder=10)
txt = ax.annotate('Desired point of rotation',xy=(0.2,0.5),fontsize=16,\
xytext=(0.25,0.35),arrowprops=dict(arrowstyle="->",connectionstyle="arc3,rad=-.2"))
txt2 = ax.annotate('Actual point of rotation',xy=(0.0,0.0),fontsize=16,\
xytext=(0.15,0.15),arrowprops=dict(arrowstyle="->",connectionstyle="arc3,rad=.2"))

plt.show() 
```

以下是上述代码的输出：

![在此处输入图像描述](../Images/c5dcc7035ff3406a4dc5b9a3dc0236f6.png)

我也尝试过翻译、rotate_about_origin 和 translate_back。但是，翻译转换也不起作用。任何简单翻译的帮助/示例也将非常有用。

谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-22T08:40:58.813

您旋转的坐标不是数据坐标。你必须先转换它们，即

```
import numpy as np
import matplotlib.pyplot as plt
import matplotlib.patches as patches
import matplotlib as mpl
fig = plt.figure()
ax = fig.add_subplot(111)
ax.set_xlim(-0.05,1);ax.set_ylim(-0.05,1);
plt.grid('on');

#Rotate rectangle patch object
ts = ax.transData
coords = ts.transform([0.2, 0.5])
tr = mpl.transforms.Affine2D().rotate_deg_around(coords[0], coords[1], 10)
t= ts + tr

rec0 = patches.Rectangle((0.2,0.5),0.25,0.2,alpha=0.5)
ax.add_patch(rec0)

#Rotated rectangle patch
rect1 = patches.Rectangle((0.2,0.5),0.25,0.2,color='blue',alpha=0.5,transform=t)
ax.add_patch(rect1);

#The (desired) point of rotation
ax.scatter([0.0,0.2],[0.0,0.5],c=['g','r'],zorder=10)
txt = ax.annotate('Desired point of rotation',xy=(0.2,0.5),fontsize=16,\
xytext=(0.25,0.35),arrowprops=dict(arrowstyle="->",connectionstyle="arc3,rad=-.2"))
txt2 = ax.annotate('Actual point of rotation',xy=(0.0,0.0),fontsize=16,\
xytext=(0.15,0.15),arrowprops=dict(arrowstyle="->",connectionstyle="arc3,rad=.2"))

plt.show() 
```

编辑：

显然，该代码仅适用于交互式显示，但不适用于调整窗口大小或保存图形时。比较这两个图像：

![互动展示](../Images/8c73c4ebcb510a463dd9f5f72286ee5c.png) ![保存的图](../Images/7bd1709a8cde4576615a0e9e24bcb928.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T21:23:22.527

@David Zwicker，感谢您为我指出正确的方向。以下代码在交互模式下正常工作（即可以重新调整图形窗口的大小），独立执行或在 Ipython QtConsole 环境中执行。请参阅下面的嵌入图。但是，它仍然不能在 Ipython webnotebook 环境中工作！任何帮助/想法都会很棒。谢谢你。

```
#Imports
import matplotlib.pyplot as plt
import matplotlib as mpl
mpl.rcParams['figure.dpi'] = 80   # default = 80
mpl.rcParams['savefig.dpi'] = 80  # default = 100
import matplotlib.patches as patches
import numpy as np

#Need to ensure that the figure.dpi (for displaying figure window) and 
#savefig.dpi are consistent.

def redraw(event):
    """Redraw the plot on a resize event"""
    if  np.size(plt.get_figlabels()):
        #Need to check if figure is closed or not and only then do the following
        #operations. Else, the following operations will create a new figure
        ax.clear()
        drawRectangles(ax)
        fig.canvas.draw()
    else:
        pass

def drawRectangles(ax):
    """Function to draw the normal and rotated patch in the transformed domain"""
    #Transform for data coordinates to display coordinates
    td2dis = ax.transData
    coords = td2dis.transform([0.2, 0.5])
    #rotate transform
    tr = mpl.transforms.Affine2D().rotate_deg_around(coords[0], coords[1], 10)
    t = td2dis + tr
    rec0 = patches.Rectangle((0.2,0.5),0.25,0.2,color='blue',alpha=0.5)
    ax.add_patch(rec0)
    #Rotated rectangle patch
    rect1 = patches.Rectangle((0.2,0.5),0.25,0.2,color='blue',alpha=0.5,transform=t)
    ax.add_patch(rect1);
    plt.grid()

figSize = (8,6)
fig = plt.figure("Patch rotate",figsize=figSize)

ax = fig.add_subplot(111)
ax.set_xlim(0,1);ax.set_ylim(0,1);
fig.canvas.mpl_connect('resize_event', redraw)
drawRectangles(ax)

plt.savefig("myfigure.png")
plt.show() 
```

以下是上述代码中的一些示例：

使用代码中的 savefig( ) 函数保存的图像： ![在此处输入图像描述](../Images/4d080088307731d97a58d6fc3c090b3b.png)

使用导航面板中的保存按钮保存的图像： ![在此处输入图像描述](../Images/efaaf79182548bc45e9bf9bd2d2c6ce0.png)

调整大小后使用导航面板中的保存按钮保存的图像： ![在此处输入图像描述](../Images/6e8e518be5832baa4f252f272277a889.png) ![在此处输入图像描述](../Images/22ebbc5fac82c41fbeeedb7ff2d70af6.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-29T11:40:14.330

似乎在保存时，Ipython 将图层更改了。旋转矩形的变换取决于显示坐标，当缩放或更改图层时可以更改显示坐标，例如在交互式窗口中缩放。

我们可以在数据坐标中旋转矩形。请参阅[旋转图形（补丁）并在 python 中应用颜色](https://stackoverflow.com/questions/7467631/rotating-a-patch-and-applying-colors)

而我们需要“ax.set_aspect('equal')”来避免旋转的矩形变形。

# java - 更改二维数组中的值

> ID：15557613
> 
> 赞同：0
> 
> 时间：2013-03-21T20:38:35.567
> 
> 标签：java

好吧，基本上，我有一个多维数组 Board[8][8]。我试图在数组中取随机值并使它们成为不同的值。我正在更改的值必须已经是某个值。我正在运行的代码不断产生这些结果：

```
java.lang.ArrayIndexOutOfBoundsException: 8
       at checkers.init(checkers.java:32)
       at sun.applet.AppletPanel.run(Unknown Source)
       at java.lang.Thread.run(Unknown Source) 
```

这是导致问题的代码。请注意，第 8 行是一个变量声明：

诠释黑色 = 1;

```
 Random generator = new Random();
    int checkersCount_B = 0, checkersCount_W = 0, x, y;

    while(checkersCount_B < 9){
        x = generator.nextInt(9);
        y = generator.nextInt(9);

        if(Board[x][y] == BLACK){
            Board[x][y] = BLACK_CHECKER;
        //  System.out.println(x + " " + y);
            checkersCount_B ++;
        } else{
            //nothing
        }
    } 
```

第 32 行是 if 语句。

该代码适用于几个通过while循环运行的代码，但从未超过两三个，有什么建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T20:40:53.167

数组的索引从 0 到 7。迭代 while (index<9)，将采用第 9 个元素（由索引 8 给出）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T20:41:21.640

您将用完其中一个数组的末尾，因为最终`nextInt`将返回 8，但数组的索引是 0-7（长度为 8）。

用于`generator.nextInt(8)`返回 0 到 7 之间的随机数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T21:30:17.377

复制粘贴解决方案：

```
Random generator = new Random();
int checkersCount_B = 0, checkersCount_W = 0, x, y;

while(checkersCount_B < 8){
    x = generator.nextInt(8);
    y = generator.nextInt(8);

    if(Board[x][y] == BLACK){
        Board[x][y] = BLACK_CHECKER;
    //  System.out.println(x + " " + y);
        checkersCount_B ++;
    } else{
        //nothing
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T20:41:13.700

您正在使用 0 到 8 生成数字`generator.nextInt(9)`。由于板的宽度和高度是 8，您应该生成范围从 0 到 7 的索引。在`nextInt`调用中将 9 更改为 8。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-21T20:41:14.490

在数组中，索引从 0（不是 1）开始，因此对于 8 个元素的数组，您必须使用从 0 到 7 的索引。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-21T20:42:14.970

指数从 0 到 7；因此，您必须在该范围内生成一个值。但是，长度为 8。

# c - 是否可以直接执行 gcc .ssa 文件？如果没有，如何编译？

> ID：15557616
> 
> 赞同：1
> 
> 时间：2013-03-21T20:38:45.347
> 
> 标签：c, gcc, compiler-construction, intermediate-language

这个问题有点古怪，但我很难在[手册的这一部分](http://gcc.gnu.org/onlinedocs/gccint/Tree-SSA.html#Tree-SSA)找到答案。

如果我将 C 程序的 SSA 转储到文件中，例如：

`~$ gcc -fdump-tree-ssa program_name.c`

**如何直接从 ssa 中间表示执行？** *如果这不能通过 完成`gcc`，那么我会很好奇如何编译`.ssa`转储。我认为它无法完成，`LLVM`因为`gcc`使用了不同的 IR。*

* * *

作为比较，它可以在 clang/llvm 中简单地完成：

`~$ lli program_name_clangbit`

*...假设一个编译如下：*

`~$ clang program_name.c -S -emit-llvm -o program_name_clangbit`

# html - 两侧有水平线的航向

> ID：15557627
> 
> 赞同：60
> 
> 时间：2013-03-21T20:39:24.430
> 
> 标签：html, css, pseudo-class

我正在研究一些 CSS，其中设计要求页面标题（标题）以水平线为中心，水平线在两侧垂直居中。此外，页面上有一个背景图像，因此标题的背景需要是透明的。

我已将标题居中，我可以使用伪类来创建行。但是当它穿过标题的文本时，我需要这条线消失。

我考虑使用在单词所在的位置透明的背景渐变，但由于每个标题的长度可能不同，我不知道在哪里放置停止点。

这是到目前为止的CSS：

```
h1 {  
    text-align: center;  
    position: relative;  
    font-size: 30px;  
    z-index: 1;  
}  

h1:after {  
    content: '';  
    background-color: red;  
    height: 1px;  
    display: block;  
    position: absolute;  
    top: 18px;  
    left: 0;  
    width: 100%;  
} 
```

这是我所在的位置：http: [//jsfiddle.net/XWVxk/1/](http://jsfiddle.net/XWVxk/1/)

这可以在不添加任何额外 HTML 的情况下使用 CSS 完成吗？

* * *

## 回答 #1

> 赞同：94
> 
> 时间：2013-03-21T20:42:49.520

看看这个[http://blog.goetter.fr/post/36084887039/tes-pas-cap-premiere-edition](http://blog.goetter.fr/post/36084887039/tes-pas-cap-premiere-edition)，这就是你的答案。

这是您修改的原始代码

```
h1 {
    position: relative;
    font-size: 30px;
    z-index: 1;
    overflow: hidden;
    text-align: center;
}
h1:before, h1:after {
    position: absolute;
    top: 51%;
    overflow: hidden;
    width: 50%;
    height: 1px;
    content: '\a0';
    background-color: red;
}
h1:before {
    margin-left: -50%;
    text-align: right;
}
.color {
    background-color: #ccc;
}
```

```
<h1>This is my Title</h1>
<h1>Another Similar Title</h1>
<div class="color"><h1>Just Title</h1></div>
```

注意：文章不再在线，这是最后一个好的存档版本： [http ://web.archive.org/web/20140213165403/http://blog.goetter.fr/post/36084887039/tes-pas-cap - 首映版](http://web.archive.org/web/20140213165403/http://blog.goetter.fr/post/36084887039/tes-pas-cap-premiere-edition)

* * *

## 回答 #2

> 赞同：61
> 
> 时间：2014-04-18T13:42:46.733

几天前需要这个，但接受的答案在 IE 中不起作用。

这就是我想出的：适用于所有主要浏览器（> ie8）

jsfiddle：http: [//jsfiddle.net/gKve7/](http://jsfiddle.net/gKve7/)

```
/* headlines with lines */
.decorated{
     overflow: hidden;
     text-align: center;
 }
.decorated > span{
    position: relative;
    display: inline-block;
}
.decorated > span:before, .decorated > span:after{
    content: '';
    position: absolute;
    top: 50%;
    border-bottom: 2px solid;
    width: 100vw;
    margin: 0 20px;
}
.decorated > span:before{
    right: 100%;
}
.decorated > span:after{
    left: 100%;
}
```

```
<h2 class="decorated"><span>My Title</span></h2>
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T20:58:33.427

这可能有效：

```
.floatClear {
  clear: both;
}
#wrapper {
  text-align: center;
  position: relative;
}
#wrapper .line {
  border-bottom: 2px solid red;
  position: absolute;
  width: 100%;
  top: 15px;
}
#wrapper .textbox {
  position: absolute;
  width: 100%;
}
#wrapper .textbox .text {
  background-color: white;
  margin: 0px auto;
  padding: 0px 10px;
  text-align: center;
  display: inline;
  font-size: 24px;
}
```

```
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <title>HTML</title>
  <link rel="stylesheet" href="main.css" type="text/css" />
</head>

<body>
  <div id="wrapper">
    <div class="line"></div>
    <div class="textbox">
      <div class="text">This is my Title</div>
    </div>
  </div>
</body>

</html>
```

这里发生的情况是您将文本设置在背景线上，并使用背景颜色加上侧边距，这样它将隐藏文本块后面的线。

# tomcat - 我使用 Spring MVC 的 DeferredResult 类导致 Tomcat 静默崩溃

> ID：15557643
> 
> 赞同：1
> 
> 时间：2013-03-21T20:40:20.277
> 
> 标签：tomcat, servlets, spring-mvc, asynchronous

我有以下 Spring MVC 3.2 代码（它使用[DeferredResult 类](http://static.springsource.org/spring/docs/3.2.2.RELEASE/javadoc-api/org/springframework/web/context/request/async/DeferredResult.html)）：

```
@RequestMapping(value = "getMessages", method = RequestMethod.GET, produces = "application/json")
    @ResponseBody
    public DeferredResult<List<Message>> getMessages(@RequestParam final Long senderId) {
        final Long recipientId = memberService.retrieveCurrentMember().getId();
        final String messageRequestKey = new StringBuilder().append(senderId).append(":").append(recipientId).toString();
        final DeferredResult<List<Message>> deferredResult = new DeferredResult<List<Message>>(null, Collections.emptyList());
        messageRequests.put(messageRequestKey, deferredResult);

        deferredResult.onCompletion(new Runnable() {
            @Override
            public void run() {
                messageRequests.remove(messageRequestKey);
            }
        });

        List<Message> unReadMessages = messageService.findUnreadMessages(senderId, recipientId);
        if (!unReadMessages.isEmpty()) {
            deferredResult.setResult(unReadMessages);
        }
        return deferredResult;
    } 
```

此方法由 ajax 调用连续轮询，它系统地**导致 Tomcat 在第 9 次方法调用时崩溃**。请注意，Tomcat 崩溃时没有任何错误消息。

**如果有人可以帮助我确定此代码表现出这种行为的原因，我将非常感激，或许可以通过给我有关如何调试应用程序/tomcat 的提示。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T22:48:13.653

我试过你修改过的[mvc-chat 代码](http://forum.springsource.org/showthread.php?135927-Unknown-threading-issue-causes-async-Spring-controller-method-to-leak-db-connections)。

有了它，我一登录就发出了一个 GET 请求，由于超时为 3 秒，它超时并且 GET 响应带有一个空的消息列表。客户端立即发出另一个 GET 请求作为响应，第二个 GET 挂在“myService.someTransactionalMethod();”中 在对“messageRepository.findAll();”的调用中 ！

如果我增加超时并让 GET 请求“完成”，那么后续的 GET 请求能够正确调用启用 Tx 的方法。但是，如果请求“超时”，则后续 GET 请求（来自同一聊天客户端）在启用 Tx 的方法中被阻止。（即清理问题）。

同样，当 GET 未完成并发出并行 GET（例如，从另一个浏览器窗口）时，第二个 GET 在启用 Tx 的方法中被阻止。

这似乎是 DeferredResult 与 OEMIV 过滤器语义交互的问题。通过在 Spring 论坛中提出此问题，您做了正确的事情！

Edit1：为了确认上述声明，我从 xml 中删除了 OEMIV 过滤器（并保留了所有其他代码，包括 Tx 方法和 DeferredResult，保持不变）并且它没有任何问题地工作。

Edit2：Rossen Stoyanchev 在 Spring 论坛上评论说：

```
"On the initial request thread, the OEMIV filter acquires an EM instance, then the 
 controller is invoked, which in turn invokes the tx method. The tx method re-uses the 
 same EM instance. Then the controller method returns and the Servlet container thread 
 is exited, but OEMIV filter doesn't release the EM instance because it is aware of the 
 async processing.
 When the DeferredResult is set, a dispatch is made back to the container, hitting the 
 OEMIV filter and the DispatcherServlet once again. When that thread completes, OEMIV 
 filter will release the EM instance. Note that this is true even if the DeferredResult
 is set in the controller method.". 
```

从上面可以看出，当异步请求超时时，OEMIV 过滤器要么不参与，要么即使参与，也没有机会释放它持有的 EM 实例。

# c - Windows 从 cygwin root 获取类似 Unix 的路径

> ID：15557644
> 
> 赞同：0
> 
> 时间：2013-03-21T20:40:22.293
> 
> 标签：c, winapi, filesystems, cygwin

我想`pwd`从 cygwin 根目录以 unix 样式获取当前目录 ( ) 的路径，但是当我使用`GetCurrentDirectory`它时，它会以 Windows 路径样式打印来自 C 的路径。

windows api还有什么其他功能来完成这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T20:52:28.157

您可能需要 Cygwin 版本的[getcwd](http://linux.die.net/man/3/getcwd)。Windows API 函数，例如`GetCurrentDirectory`使用 Windows 路径，而不是 Cygwin 路径。

# c# - 为抽象类中的集合设置值时遇到问题

> ID：15557646
> 
> 赞同：2
> 
> 时间：2013-03-21T20:40:26.043
> 
> 标签：c#, generics, reflection

我正在对一个抽象类进行反射，并遇到了一个问题，即我无法使用 PropertyInfo.SetValue 方法将值分配给现有的 List 对象。

这是一些（非常）缩短的类声明。

```
public abstract class User { }
public class Subscriber : User
{
    public string Name { get; set; }
    public List<string> AttributeList { get; set; }
} 
```

现在在 User 内部，我有一个方法可以从包含未知数量元素的 XML 中提取数据。我解析这些元素，如果它们被识别为 User（或其任何子项）的属性，我会填充该属性。

```
private void ExtractElement(XElement inner)
{
    // Uses reflection to get the correct Derived class (Initiate, Member, Subscriber)
    Type tUser = this.GetType();

    var prop = tUser.GetProperty("AttributeList"); // hard-coded for brevity
    object value = "Random Value" // same

    var nullableType = Nullable.GetUnderlyingType(prop.PropertyType);
    if (nullableType == null)
        nullableType = prop.PropertyType;

    if (nullableType == typeof(int))
    {
        prop.SetValue(this, int.Parse(value as string), null);
    }
    else if (nullableType == typeof(List<string>))
    {
        var myList = (List<string>)(prop.GetValue(this, null));
        myList.Add(value as string);
        prop.SetValue(this, myList, null); // <- This doesn't save changes.
    }
    else
    {
        prop.SetValue(this, value as string, null);
    } 
```

当它进入最后一部分时，myList 被正确填充。但是当我尝试将 AttributeList 的值设置为 myList 时，更改不会“坚持”。从其他关于反射的帖子来看，我最好的猜测是我正在提取 AttributeList 的副本（因为装箱/拆箱？），并影响它而不是原来的。有没有办法在这种情况下直接影响原作？如果未保存更改，为什么我的代码的最后一行不会引发错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T21:56:24.190

按照要求：

```
if (nullableType == typeof(List<string>))
{
    ((List<string>)(prop.GetValue(this, null))).Add(value as string);
} 
```

# android - Android：无法在非 Gmail 客户端中将文件附加到电子邮件

> ID：15557651
> 
> 赞同：0
> 
> 时间：2013-03-21T20:40:38.297
> 
> 标签：android, email, gmail, attachment, email-client

使用下面的代码，我可以毫无问题地将文件附加到我的应用程序的电子邮件中 ​​- 如果我使用 Gmail 应用程序作为我的电子邮件客户端。但是，任何其他电子邮件客户端都会忽略我发送给它的附件。

这是我的代码：

```
public static void sendEmail(Context context, String toAddress, String subject, String body, String attachmentPath) throws Exception{
        try {
            Intent intent = new Intent(Intent.ACTION_SENDTO, Uri.fromParts("mailto", toAddress, null));
            intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
            intent.putExtra(Intent.EXTRA_SUBJECT, subject);
            intent.putExtra(Intent.EXTRA_TEXT, body);

            File file = new File(attachmentPath);
            Uri uri = Uri.fromFile(file);

            intent.putExtra(Intent.EXTRA_STREAM, uri);

            context.startActivity(intent);
        }
        catch(Exception ex) {
            ex.printStackTrace();
            throw ex;
        }
} 
```

有谁知道如何设置 Intent 以使任何非 Gmail 电子邮件客户端都能识别并接受附件？

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T23:12:05.190

这是一些有效的代码。为什么它应该有任何区别，我不知道，但它有效。

```
public static void sendEmail(Context context, String toAddress, String subject, String body, String attachmentPath, String attachmentMimeType) throws Exception{
        try {
            Intent intent = new Intent(Intent.ACTION_SEND);
                intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
                intent.putExtra(Intent.EXTRA_EMAIL, new String[]{toAddress});
                intent.putExtra(Intent.EXTRA_SUBJECT, subject);
                intent.putExtra(Intent.EXTRA_TEXT, body);

                File file = new File(attachmentPath);
                Uri uri = Uri.fromFile(file);

                intent.putExtra(Intent.EXTRA_STREAM, uri);
                intent.setType(attachmentMimeType);

                context.startActivity(Intent.createChooser(intent, "Choose an email application..."));
        }
        catch(Exception ex) {
            ex.printStackTrace();
            throw ex;
        }
} 
```

注意使用 ACTION_SEND 而不是 ACTION_SENDTO，以及对 setType(...) 的调用。它似乎有效，但它没有过滤掉作为发送选项呈现的非电子邮件应用程序列表。现在对我来说已经足够好了 - 除非有人对如何使这项工作有任何想法并且仍然过滤掉目标应用程序列表。

感谢那些提供建议的人。希望这对其他人也有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T20:55:54.127

通常，这只有在应用程序供应商提供有关您可以传入的参数的规范或您查看源代码时才有可能。您需要首先找出电子邮件客户端使用哪个`activity`/ `intent`，然后`extra`在该活动中处理哪个 / 。

如果幸运的话，您可能会找到一个类似[http://developer.android.com/guide/appendix/g-app-intents.html](http://developer.android.com/guide/appendix/g-app-intents.html)的列表，或者[在哪里找到 Android 中可用意图的列表？](https://stackoverflow.com/questions/1705728/where-is-a-list-of-available-intents-in-android)或应用程序的作者帮助您实现正确的意图调用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T20:52:51.803

您是否有特定的电子邮件客户端？他们中的许多人甚至不处理意图中的附件或期望以不同方式填充意图。

# ruby - 在 ruby 中创建两个日期之间的月份范围

> ID：15557652
> 
> 赞同：13
> 
> 时间：2013-03-21T20:40:41.157
> 
> 标签：ruby, date, range, loops

我需要在几个月的范围内每月创建日志文件。因此我需要给定范围内的所有 [year,month] 元组

你如何迭代日期？

如果我每天都需要迭代，怎么办？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-03-22T00:23:29.903

例如：

```
((Date.today - 90)..Date.today).map{|d| [d.year, d.month]}.uniq
#=> [[2012, 12], [2013, 1], [2013, 2], [2013, 3]] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-21T21:28:13.213

Ruby[`Date`](http://ruby-doc.org/stdlib-2.0/libdoc/date/rdoc/Date.html)支持连续几天的生产，并提供了[`next_month`](http://ruby-doc.org/stdlib-2.0/libdoc/date/rdoc/Date.html#method-i-next_month)一种可用于在几个月内有效迭代的方法。

这是一种适应输入精度的通用方法：

```
require 'date'

def date_tuples(from,to)
  prec   = from.size
  start  = Date.new(*from)
  finish = Date.new(*to)

  filter_on = [:day,:mon].first(3-prec)
  filter = ->(d) { filter_on.all? {|attr| d.send(attr) == 1 } }

  (start..finish)
    .select(&filter)
    .map { |d| [d.year,d.mon,d.day].first(prec) }
end

[7] pry(main)> date_tuples([2012],[2015])
=> [[2012], [2013], [2014], [2015]]
[8] pry(main)> date_tuples([2012,10],[2013,3])
=> [[2012, 10], [2012, 11], [2012, 12], [2013, 1], [2013, 2], [2013, 3]]
[9] pry(main)> date_tuples([2012,10,25],[2012,11,6])
=> [[2012, 10, 25],
 [2012, 10, 26],
 [2012, 10, 27],
 [2012, 10, 28],
 [2012, 10, 29],
 [2012, 10, 30],
 [2012, 10, 31],
 [2012, 11, 1],
 [2012, 11, 2],
 [2012, 11, 3],
 [2012, 11, 4],
 [2012, 11, 5],
 [2012, 11, 6]] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T20:40:41.157

我想出了这个解决方案来生成范围内所有 [year,month] 元组的列表：

```
first=[2012,10]
last=[2013,03]
(first[0]..last[0]).to_a.product((1..12).to_a).select{|ym|(first..last).cover?(ym)}
=> [[2012, 10], [2012, 11], [2012, 12], [2013, 1], [2013, 2], [2013, 3]] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-09-20T18:05:30.887

```
 start_date = 1.year.ago.to_date
  end_date = Date.current.yesterday
  monthly = [Date.new(start_date.year, start_date.beginning_of_month.month, 1)]
  (start_date..end_date).each do |d|
    month_date = Date.new(d.year, d.next_month.beginning_of_month.month, 1)
    monthly << month_date if monthly.exclude?(month_date) && month_date < end_date - 1.month
  end
  monthly 
```

`=> [Fri, 01 Sep 2017, Sun, 01 Oct 2017, Wed, 01 Nov 2017, Fri, 01 Dec 2017, Sun, 01 Jan 2017, Thu, 01 Feb 2018, Thu, 01 Mar 2018, Sun, 01 Apr 2018, Tue, 01 May 2018, Fri, 01 Jun 2018, Sun, 01 Jul 2018, Wed, 01 Aug 2018]`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-09-21T04:24:42.097

这是我为解决此问题而写的一种方法。这是为处理哈希数据而设计的，例如：{Sun, 01 Jan 2012=>58, Wed, 01 Feb 2012=>0, Thu, 01 Mar 2012=>0} 但可以很容易地修改为数组数据。

请参阅：[https](https://github.com/StephenOTT/add_missing_dates_ruby) ://github.com/StephenOTT/add_missing_dates_ruby我提供了一个工作代码示例

但关键的代码是：

```
def addMissingMonths (datesHash)
    count = 0
    result = {}

    datesHash.keys.each do |x|
        if x != datesHash.keys.last
            (x+1.month).upto(datesHash.keys[count+1]-1.month) do |a|
                result[a.at_beginning_of_month] = 0
            end
        end

        count += 1
    end

    return result.merge!(datesHash)
end 
```

要看的关键内容是：`(x+1.month).upto(datesHash.keys[count+1]-1.month)`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-21T21:10:04.837

```
require 'date'
Time.new(2011).to_date.upto(Time.now.to_date) do |a|
    puts ""+a.day.to_s+","+a.month.to_s+","+a.year.to_s
end 
```

或获取您的月/年元组：

```
require 'date'
result = []
Time.new(2002).to_date.upto(Time.now.to_date) do |a|
    result << [a.month,a.year]
end
result.uniq! 
```

从日期开始使用 upto 方法：[http ://ruby-doc.org/stdlib-2.0/libdoc/date/rdoc/Date.html#method-i-upto](http://ruby-doc.org/stdlib-2.0/libdoc/date/rdoc/Date.html#method-i-upto)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-01-15T11:25:33.767

这里的大多数答案都需要在该范围内的每一天进行迭代。这意味着如果您在几年内这样做，您可能会有一个包含数千次迭代的循环。

此代码段创建了一个循环，其步骤数与该范围内的月份数一样多，这样效率更高：

```
require 'date'

start_date = Date.new(2010, 10)
end_date = Date.new(2011, 4)

current_month = start_date

date_tuples = []

while current_month <= end_date
  date_tuples << [current_month.year, current_month.month]
  current_month = current_month.next_month
end

pp date_tuples 
# => [[2010, 10], [2010, 11], [2010, 12], [2011, 1], [2011, 2], [2011, 3], [2011, 4]] 
```

这种方法的一个怪癖是它只适用于当月第一天的日期。因此，如果您有这样的日期`Date.new(2020, 10, 12)`，则需要将其转换为该月的第一天

# vb.net - Visual Basic 最少 5 个字符验证

> ID：15557656
> 
> 赞同：0
> 
> 时间：2013-03-21T20:40:52.117
> 
> 标签：vb.net, validation, character

我将如何确保当用户在输入框中输入他的“组合”时，它必须至少有 5 个字符？

这是我到目前为止的代码：

```
If (tboxStatus.Text) = "Combination Not Set" Or (tboxStatus.Text) = "UnLocked" Then
  Combination = CInt(InputBox("Set the Combination First"))
  tboxStatus.Text = "Locked"
ElseIf (tboxStatus.Text) = "Locked" Then
  MsgBox("You must first UnLock the safe before trying to change the combination.")
End If 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T21:25:26.707

对于初学者...

```
Dim value as String = InputBox("Set the Combination First")
If (value.Trim.Length < 5) Then
    MsgBox ("Combination must be at least 5 characters")
Else
    Combination = CInt(value)
End If 
```

除其他外，您需要在执行 CInt() 之前检查它是否为数字

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T21:34:31.713

```
If tboxStatus.Text = "Combination Not Set" OrElse tboxStatus.Text = "UnLocked" Then
    Dim result As String = ""

    While String.IsNullOrWhiteSpace(result) OrElse Not Integer.TryParse(result, Combination)
       result= InputBox("Set a Combination Number First")
    End While

    tboxStatus.Text = "Locked"

ElseIf tboxStatus.Text = "Locked" Then
    MsgBox("You must first UnLock the safe before trying to change the combination.")
End If 
```

# python - Python 和 Gtk+ 3 的导入错误

> ID：15557658
> 
> 赞同：3
> 
> 时间：2013-03-21T20:40:56.237
> 
> 标签：python, gtk3, pygobject

我正在编写一个用**Gtk+ 3**和**Python**编写的程序。我问我的程序的一个相关问题是[here](https://stackoverflow.com/questions/15440088/how-to-show-a-png-image-in-gtk3-with-python)。

现在，我进步了一点，我有以下导入：

```
import aplpy
import montage
import subprocess
from gi.repository import Gtk, GdkPixbuf 
```

当我运行它时，我得到了这个错误：

```
$ ./makeRGB-frame.py 
Traceback (most recent call last):
  File "./makeRGB-frame.py", line 34, in <module>
    from gi.repository import Gtk, GdkPixbuf
  File "/usr/lib64/python2.7/site-packages/gi/__init__.py", line 27, in <module>
    from ._gi import _API, Repository
ImportError: could not import gobject (error was: ImportError('When using gi.repository you must not import static modules like "gobject". Please change all occurrences of "import gobject" to "from gi.repository import GObject".',)) 
```

如果我更改导入的顺序：

```
from gi.repository import Gtk, GdkPixbuf
import aplpy
import montage
import subprocess 
```

我也收到一个错误：

```
$ ./makeRGB-frame.py 
/usr/lib64/python2.7/site-packages/gobject/constants.py:24: Warning: g_boxed_type_register_static: assertion `g_type_from_name (name) == 0' failed
  import gobject._gobject
/usr/lib64/python2.7/site-packages/gtk-2.0/gtk/__init__.py:40: Warning: specified class size for type `PyGtkGenericCellRenderer' is smaller than the parent type's `GtkCellRenderer' class size
  from gtk import _gtk
/usr/lib64/python2.7/site-packages/gtk-2.0/gtk/__init__.py:40: Warning: g_type_get_qdata: assertion `node != NULL' failed
  from gtk import _gtk
Segmentation fault (core dumped) 
```

导入的模块是：[APLpy](http://aplpy.github.com/)和[python-montage](https://github.com/astrofrog/python-montage)。

请帮助我解决这些错误。任何帮助表示赞赏！

德语。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T11:34:49.210

您的一些模块正在使用静态 Gtk+ 2.0 绑定“PyGtk”：[http](http://www.pygtk.org/) ://www.pygtk.org/ 您正在使用动态 Gtk+ 3.0 绑定“PyGObject”：[https ://live.gnome.org/PyGObject](https://live.gnome.org/PyGObject)

您不能同时加载这两个库，如果这样做，您将遇到导入错误和分段错误。

我的客人是负责 APLpy 模块，您应该检查源代码以查找 PyGtk 导入，或者询问开发人员是否支持 PyGObject。

# php - 从 foreach 中取出我的 sql 以获得我的代码

> ID：15557659
> 
> 赞同：-1
> 
> 时间：2013-03-21T20:41:00.960
> 
> 标签：php, sql

我有这样的php代码：

```
$q = $db->query("SELECT * FROM tabe1_data WHERE status='1' ORDER BY id DESC LIMIT 10");
$cr_onr = array();
while($row = $db->fetchAll($q))
{
    $cr_onr[] = $row;
}

?>

<?php foreach($cr_onr as $new_cr_onr):?>

<?php $crinfo = $db->fetchOne("SELECT * FROM tabe2_data WHERE id ='".$new_cr_onr['op_id']."'");?>

<p><?=$new_cr_onr['username'];?> has been complete <?=$crinfo['op_amount'];?></p>

<?php endforeach;?> 
```

我需要在`$crinfo = $db->`“foreach”之前取出“foreach”

请问我该怎么做？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T20:51:41.933

单连接查询？

```
SELECT tabe2_data.*
FROM tabe2_data
LEFT JOIN tabe1_data ON tabe1_data.op_id = tabe2_data.id
WHERE tabe1_data.status='1' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T20:49:41.393

您可以加入表而不是进行许多查询：

```
$q = $db->query("

    SELECT
        *
    FROM
        tabe1_data
    INNER JOIN
        tabe2_data ON tabe1_data.op_id = tabe2_data.id
    WHERE
        tabe1_data.status='1'
    ORDER BY
        tabe1_data.id DESC
    LIMIT 10

");

$cr_onr = array();

while($row = $db->fetchAll($q))
{
    $cr_onr[] = $row;
}

?>

<?php foreach($cr_onr as $new_cr_onr):?>

<p><?=$new_cr_onr['username'];?> has been complete <?=$new_cr_onr['op_amount'];?></p>

<?php endforeach;?> 
```

# c# - 使用 C# 将图像文件插入 Filemaker 容器

> ID：15557660
> 
> 赞同：1
> 
> 时间：2013-03-21T20:41:04.997
> 
> 标签：c#, sql, odbc, filemaker

我正在尝试将图片 (.bmp) 插入 Filemaker 的容器字段中。我设法让它插入正常，但它将它保存为 .dat 文件。我想知道是否有办法指定将其保存为什么文件类型？

```
 try
        {
            Bitmap tempImage = new Bitmap("C:\\temp\\black.bmp");
            System.IO.MemoryStream stream = new System.IO.MemoryStream();
            tempImage.Save(stream, System.Drawing.Imaging.ImageFormat.Jpeg);
            byte[] image = stream.ToArray();

            OdbcConnection connection = new OdbcConnection("DSN=Filemaker;UID=admin");
            connection.Open();

            OdbcCommand command = new OdbcCommand("INSERT INTO TestDatabase (LocatorNum, FileName, SampleSet, Image) VALUES (" + 
                                                                                                                        "'003'" + ", " + 
                                                                                                                        "'003'" + ", " + 
                                                                                                                        "'003'" + ", " +
                                                                                                                        "?" + ")");

            command.Connection = connection;
            command.Parameters.AddWithValue("?", OdbcType.VarBinary).Value = image;
            command.ExecuteNonQuery();
        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.Message);
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T10:10:34.260

FileMaker 容器有多个流。每个流由四个字符的标识符标识：`'FNAM'`是文件名、`'SIZE'`是图像尺寸、`'FILE'`是文件数据。如果您希望容器显示为图像，您可以有一个支持的图像流，例如`'JPEG'`，`'PDF '`（注意尾随空格）等等。

在您的情况下，您需要将数据放入其中一个流中。我不知道 FileMaker 是否支持 BMP 作为图像格式，至少我找不到它的流代码，但至少你把它作为`'FILE'`. FileMaker 文档说您需要使用该`PutAs()`功能：

```
PutAs( column, type ) 
```

我不确定它是如何使用的，现在无法测试，但据我了解，它必须在列名中：

```
INSERT INTO TestDatabase
       (LocatorNum, FileName, SampleSet, PutAs(Image, 'FILE'))
VALUES ('003', '003', '003', ?) 
```

也许您可以通过这种方式编辑多个流，即：

```
INSERT INTO TestDatabase
       (..., PutAs(Image, 'FILE'), PutAs(Image, 'JPEG'), ...) 
```

`'FILE'`，`'JPEG'`而其他类似的流是二进制的，因此您需要声明一个`?`占位符，然后按照您现在执行此操作的方式将查询与参数绑定。不过，我不确定`'FNAM'`流；我怀疑它可以简单地设置为一个字符串。我不知道如何通过`'SIZE'`，但我认为 FileMaker 可以自己计算这一点。

**更新：** BMP 流代码是`'BMPf'`.

# jquery - 我如何手动使用 jquery 验证插件...例如。响应按钮单击而不是表单帖子？

> ID：15557661
> 
> 赞同：0
> 
> 时间：2013-03-21T20:41:07.197
> 
> 标签：jquery, jquery-validate

我是验证插件的新手。我正在尝试验证将在 $.post 调用中使用的几个输入字段，但我被困在第一步。我如何验证这组元素，它们不在表单中，只是一个普通的 div。

在此尝试中，我收到此异常：无法调用未定义的方法“元素”

```
<script src="~/Scripts/jquery-1.7.1.js"></script>
<script src="~/Scripts/jquery.validate.js"></script>
<script>
  $(function () {
    var validator = $('.formulario').validate({
    rules : {
      nombre: "required",
      password: "required"
    },
      messages: {
      nombre: "Este campo es requerido",
      password: "Este campo es requerido"
      }
    });

    $('[name=procesar]').click(function () {
      if ($('.formulario').valid()) {
        alert('valid');

      } else {
        validator.showErrors();
      }
    });
  })

</script>

<div class="formulario">
  <input type="text" name="nombre" id="nombre"/>
  <input type="password" name="password" />
  <input type="button" name="procesar" value="click"/>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T21:36:28.930

我们可以使用各种事件和按钮元素触发验证测试......在 a 的内部和外部，`form`并且所有这些都不*需要*.`form`

但是，您*绝对不能*附加到元素`.validate()`以外的任何容器。`<form></form>`

没有解决方法。

**文档： [http ://docs.jquery.com/Plugins/Validation](http://docs.jquery.com/Plugins/Validation)**

# ios - 动态调整 UITextView 的宽度和高度

> ID：15557662
> 
> 赞同：1
> 
> 时间：2013-03-21T20:41:07.183
> 
> 标签：ios, uitextview, uitextviewdelegate

我的代码根据文本动态调整。当我们按下回车键时它会增加高度并增加宽度，除非我们按下回车键。

但是我该怎么做

```
- (BOOL)textView:(UITextView *)textView shouldChangeTextInRange:(NSRange)range replacementText:(NSString *)text
{
CGFloat height = [textView.text sizeWithFont:textView.font].height;
CGFloat width =  [textView.text sizeWithFont:textView.font].width;
 if ([[NSCharacterSet newlineCharacterSet] characterIsMember:[text characterAtIndex:text.length-1]])
 {
     self.textViewHeight += height;

     [textView setFrame:CGRectMake(self.contentView.frame.origin.x, self.contentView.frame.origin.y, width, self.textViewHeight)];
     self.contentView.frame = textView.frame;
     self.frame = textView.frame;
     [_editButton setFrame:CGRectMake(self.contentView.frame.size.width - 14, 0, 28, 28)];
   }
    else{

    int charsAsInt = (int)(textView.text.length);
    CGFloat charWidth = width / charsAsInt;

    [textView setFrame:CGRectMake(self.contentView.frame.origin.x, self.contentView.frame.origin.y, width+ charWidth, self.textViewHeight)];
     self.contentView.frame = textView.frame;
     self.frame = textView.frame;
     [_editButton setFrame:CGRectMake(self.contentView.frame.size.width - 14, 0, 28, 28)];

} 
```

但即使我按下回车它也会增加宽度。如何防止这种情况。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T21:00:17.853

好的，宽度是所有行中整个文本的宽度。所以必须找到最大线长。

```
- (BOOL)textView:(UITextView *)textView shouldChangeTextInRange:(NSRange)range replacementText:(NSString *)text
{
CGFloat height = [textView.text sizeWithFont:textView.font].height;
//CGFloat lineWidth;

int charsAsInt;
 if ([[NSCharacterSet newlineCharacterSet] characterIsMember:[text characterAtIndex:text.length-1]])
 {
     self.lineWidth = 0;
     newLine = @"";
     self.textViewHeight += height;
     NSLog(@"height: %f, width: %f, new Height: %f", height, self.textViewWidth, self.textViewHeight);
     [textView setFrame:CGRectMake(self.contentView.frame.origin.x, self.contentView.frame.origin.y, self.textViewWidth, self.textViewHeight)];
     self.contentView.frame = textView.frame;
     self.frame = textView.frame;
     [_editButton setFrame:CGRectMake(self.contentView.frame.size.width - 14, 0, 28, 28)];

     [super setFrame:textView.frame];
 }
 else{
     newLine = [newLine stringByAppendingString:text];
     self.lineWidth = [newLine sizeWithFont:textView.font].width;
     charsAsInt = (int)(newLine.length);
     CGFloat charWidth = self.lineWidth / charsAsInt;

     if(self.lineWidth >= self.textViewWidth){
         self.textViewWidth = self.lineWidth;
         [textView setFrame:CGRectMake(self.contentView.frame.origin.x, self.contentView.frame.origin.y, self.lineWidth, self.textViewHeight)];
     }

     else{
         [textView setFrame:CGRectMake(self.contentView.frame.origin.x, self.contentView.frame.origin.y, self.textViewWidth, self.textViewHeight)];
     }
     self.contentView.frame = textView.frame;
     self.frame = textView.frame;
     [_editButton setFrame:CGRectMake(self.contentView.frame.size.width - 14, 0, 28, 28)];
     //[super setContentView:self.contentView];
     [super setFrame:textView.frame];
}

return YES;
} 
```

发生的事情是我们有一个多行 UITextView 贴纸，所以当你在键盘上按回车键时，你有一个新行。我现在将其存储在一个新变量中。只有当新行的宽度大于旧行的宽度时，整个 textVIew 的宽度才会增加（`self.textViewWidth`）

# html - 创建可滚动元素并设置大小以匹配窗口

> ID：15557666
> 
> 赞同：0
> 
> 时间：2013-03-21T20:41:16.160
> 
> 标签：html, css

我有一个带有标题的页面，然后是左侧的侧栏和右侧的主要内容区域。我希望右侧的主要内容区域独立于左侧的侧栏滚动。

```
-----------------------------------
| Header                          |
|---------------------------------|
|         |                       |
|         |                       |
| Left    | Main                  |
| Sidebar | Content               |
|         |                       |
|         |                       |
----------------------------------- 
```

我知道我可以用 设置主要内容的样式`{ height: 500px; overflow-y: auto; }`，但是我设置的高度并不总是与窗口的剩余高度相匹配。

有没有办法做到这一点，让我的主要内容像往常一样用完所有可用的窗口空间？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T20:50:56.123

您可以使用绝对定位来实现，请参见：http: [//jsfiddle.net/KpJgd/](http://jsfiddle.net/KpJgd/)

```
#content{
    position:absolute;
    top:200px;
    right:0;
    bottom:0; /*this is the trick where the <div> goes til the bottom of the window*/
    width:70%;    
    overflow:auto;
    background-color:#008800;        
} 
```

请注意，您必须在 CSS 中指定：

```
html, body{
    width:100%;
    height:100%;
    overflow:hidden;
} 
```

# bit-shift - 位移的平方根

> ID：15557667
> 
> 赞同：5
> 
> 时间：2013-03-21T20:41:16.470
> 
> 标签：bit-shift, square-root

我正在通过位移研究快速平方根算法。我被维基百科的代码困住了。

```
short isqrt(short num) {
    short res = 0;
    short bit = 1 << 14; // The second-to-top bit is set: 1L<<30 for long

    // "bit" starts at the highest power of four <= the argument.
    while (bit > num)
        bit >>= 2;

    while (bit != 0) {
        if (num >= res + bit) {
            num -= res + bit;
            res = (res >> 1) + bit;
        }
        else
            res >>= 1;
        bit >>= 2;
    }
    return res;
} 
```

我知道它可以产生正确的结果，但它是如何产生的呢？我对这句话特别困惑，res = (res >> 1) + bit; 为什么 res 应该在这里除以 2？任何人都可以对此有所了解吗？感谢！

# python - scrapy 无法抓取 https 网站

> ID：15557668
> 
> 赞同：2
> 
> 时间：2013-03-21T20:41:18.813
> 
> 标签：python, scrapy

我是scrapy的新手，所以这个问题可能看起来太简单了。我从 http 站点下载没有问题。但是当我尝试对[这个 url](https://www.bundesanzeiger.de/ebanzwww/wexsservlet?page.navid=to_nlp_start)做同样的事情时，我得到了以下错误。

代码：

```
from scrapy.spider import BaseSpider

class Bundspider(BaseSpider):
name="bund"
allowed_domains=["www.bundesanzeiger.de"]
start_urls=[
    "https://www.bundesanzeiger.de/ebanzwww/wexsservlet?page.navid=to_nlp_start"
    ]
def parse(self, response):
    filename = response.url.split("/")[-2]
    open(filename, 'wb').write(response.body) 
```

错误：

```
2013-03-20 01:20:54-0400 [scrapy] INFO: Scrapy 0.16.4 started (bot: tutorial)
2013-03-20 01:20:54-0400 [scrapy] DEBUG: Enabled extensions: LogStats, TelnetConsole,       CloseSpider, WebService, CoreStats, SpiderState
2013-03-20 01:20:54-0400 [scrapy] DEBUG: Enabled downloader middlewares:   HttpAuthMiddleware, DownloadTimeoutMiddleware, UserAgentMiddleware, RetryMiddleware, DefaultHeadersMiddleware, RedirectMiddleware, CookiesMiddleware, HttpProxyMiddleware, HttpCompressionMiddleware, ChunkedTransferMiddleware, DownloaderStats
2013-03-20 01:20:54-0400 [scrapy] DEBUG: Enabled spider middlewares: HttpErrorMiddleware, OffsiteMiddleware, RefererMiddleware, UrlLengthMiddleware, DepthMiddleware
2013-03-20 01:20:54-0400 [scrapy] DEBUG: Enabled item pipelines: 
2013-03-20 01:20:54-0400 [bund] INFO: Spider opened
2013-03-20 01:20:54-0400 [bund] INFO: Crawled 0 pages (at 0 pages/min), scraped 0 items    (at 0 items/min)
2013-03-20 01:20:54-0400 [scrapy] DEBUG: Telnet console listening on 0.0.0.0:6023
2013-03-20 01:20:54-0400 [scrapy] DEBUG: Web service listening on 0.0.0.0:6080
2013-03-20 01:20:54-0400 [bund] ERROR: Error downloading <GET https://www.bundesanzeiger.de/ebanzwww/wexsservlet?page.navid=to_nlp_start>: [('SSL routines', 'SSL23_GET_SERVER_HELLO', 'unknown protocol')]
2013-03-20 01:20:54-0400 [bund] INFO: Closing spider (finished)
2013-03-20 01:20:54-0400 [bund] INFO: Dumping Scrapy stats:
{'downloader/exception_count': 1,
 'downloader/exception_type_count/OpenSSL.SSL.Error': 1,
 'downloader/request_bytes': 271,
 'downloader/request_count': 1,
 'downloader/request_method_count/GET': 1,
 'finish_reason': 'finished',
 'finish_time': datetime.datetime(2013, 3, 20, 5, 20, 54, 814159),
 'log_count/DEBUG': 6,
 'log_count/ERROR': 1,
 'log_count/INFO': 4,
 'scheduler/dequeued': 1,
 'scheduler/dequeued/memory': 1,
 'scheduler/enqueued': 1,
 'scheduler/enqueued/memory': 1,
 'start_time': datetime.datetime(2013, 3, 20, 5, 20, 54, 796438)}
2013-03-20 01:20:54-0400 [bund] INFO: Spider closed (finished) 
```

# c++ - 递归函数的运行时间T(n)

> ID：15557670
> 
> 赞同：2
> 
> 时间：2013-03-21T20:41:22.097
> 
> 标签：c++, recursion, time, time-complexity, fibonacci

我正在尝试计算此函数的 T(n)，而我想出的是 T(n) = T(n) + T(n) + O(1)。我有两个 T(n) 用于对函数 g() 的 2 次递归调用，然后是 O(1) 用于所有恒定时间操作，例如加法。我觉得我很遥远，所以任何帮助将不胜感激，我的数学背景不太好。

```
int g(int y) {
 if (y <= 0) {
  return 1;
 }
 else {
  return g(y - 1) + g(y - 2);
 }
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-21T21:04:50.310

计算[斐波那契数](http://en.wikipedia.org/wiki/Fibonacci_number)的[时间复杂度](https://en.wikipedia.org/wiki/Time_complexity)取决于所使用的算法。至少有 4 种算法可以计算它们（具有不同的时间复杂度）：

# O( [\phi](http://en.wikipedia.org/wiki/Golden_ratio) ^n)

首先我们提到我们可以通过查看递归斐波那契函数的[调用图来解决这个问题。](http://en.wikipedia.org/wiki/Call_graph)

调用图实际上是一棵树。

![在此处输入图像描述](../Images/e21a706a49f4fd02c0fd4f24abe8629d.png)

我们可以将所有内容简化为找出这棵树有多少个节点。

F(n) 的调用图中的节点数具有根和 F(n-1) 的调用图中的节点数 + F(n-2) 的调用图中的节点数。

我们将用 L(n) 表示 F(n) 中的节点数（您会看到字母 L 并非偶然）。

如上所述，L(n) = L(n-1) + L(n-2) + 1。

但是等等，还有更多！事实证明，这些**正是** [莱昂纳多数](http://en.wikipedia.org/wiki/Leonardo_number)，它们具有一般封闭形式：

![在此处输入图像描述](../Images/12185565f4a20c736086bb6c268c823a.png)

( `"a(n) is the number of nodes in the Fibonacci tree of order n."` [A001595](https://oeis.org/A001595) )

# 在）

还有另一种涉及[记忆](http://en.wikipedia.org/wiki/Memoization)的算法，其复杂度为 O(n)（[这是一个示例](https://stackoverflow.com/questions/9628174/fibonacci-numbers-with-memoization-runs-slow-in-python)，[另一个](http://en.wikipedia.org/wiki/Dynamic_programming#Fibonacci_sequence)示例）。这涉及将 T(n) 的结果存储在一个向量中，并逐渐计算 n=1 的 T(n) 直到所需的 n。

如果你想真正正确，这也不是 O(n)，因为假设加法的数量成本是 O(1)，但是......随着 F(n) 变大，加法的成本两个斐波那契数是 O(n)。你可以[在这里阅读更多关于这个](http://www.catonmat.net/blog/on-the-linear-time-algorithm-for-finding-fibonacci-numbers/)的信息，这是一个很好的阐述。因此，这个实现的实际复杂度是 O(n^2)。

# O(1)

[考虑到您使用任意精度算术](http://en.wikipedia.org/wiki/Jacques_Philippe_Marie_Binet)或[一些智能舍入](http://en.wikipedia.org/wiki/Fibonacci_number#Computation_by_rounding)，还有另一种复杂度为 O(1) 的算法。它来自[比奈公式](http://en.wikipedia.org/wiki/Jacques_Philippe_Marie_Binet)。对于 Binet 公式的证明，请参见第 13[页](https://www.math.upenn.edu/~wilf/gfologyLinked2.pdf#page=13)的第 1.3 节，使用生成函数，或者，您可以找到[矩阵](https://en.wikipedia.org/wiki/Eigendecomposition_of_a_matrix)的特征分解，然后使用它来[计算 n 次方](https://en.wikibooks.org/wiki/Linear_Algebra/Eigenvalues_and_eigenvectors#Matrix_powers)。完成此操作后，您的封闭式公式将位于第 n 次幂矩阵的单元格之一中。

如果你想非常精确，它实际上是 O(log(n))，因为这是你用来计算 Binet 公式[的平方取幂](http://en.wikipedia.org/wiki/Exponentiation_by_squaring)（也称为[重复平方、二进制幂算法或二进制取幂）。](http://www.algorithmist.com/index.php/Repeated_Squaring)

通常我们假设 的取幂`x^n`是 O(1)，但它不是，它的乘法次数是 O(log(n))。确切地说，您必须考虑乘法的成本，这取决于所使用的[乘法算法](https://en.wikipedia.org/wiki/Computational_complexity_of_mathematical_operations#Arithmetic_functions)。

这是Binet的公式顺便说一句：

![在此处输入图像描述](../Images/98b3d5fbbf404d56be839f9d5bef52d1.png)

以下是[斐波那契数列在矩阵形式中的样子](http://en.wikipedia.org/wiki/Fibonacci_sequence#Matrix_form)：

![在此处输入图像描述](../Images/68cb8ead4a3121bb6116987ffa1aaf1d.png)

这是通过平方取幂：

![在此处输入图像描述](../Images/efe7e481e7097028ab75d5af0aaa5839.png)

**更新 2015-06-29**：

# O(log(n))

在 O(log(n)) 中还有另一种计算斐波那契数的方法。有两个身份被使用

![](../Images/1b95841676fc714cf99fc953e6c344ee.png)

它们允许基于**F(n),F(n+1)**和 **F(2*n)**基于**F(n-1),F(n),F(n)计算****F(2*n+1)** **+1）**。该算法找到**n的**[最高有效位](https://en.wikipedia.org/wiki/Most_significant_bit)并向下迭代到最低有效位，同时使用沿途的恒等式来计算斐波那契数。这里有[算法](https://stackoverflow.com/a/9648086/827519)的实现。这两个恒等式既可以在[二次域](https://en.wikipedia.org/wiki/Quadratic_irrational) ℚ(√5) 中导出（如上一个链接），也可以从上述矩阵的 n 次和 2n 次方导出（参见第 2.5 节标题为“矩阵方法” ”第[23 页](http://ir.library.oregonstate.edu/xmlui/bitstream/handle/1957/39942/HollowayJamesL1989.pdf#page=23)*********JL Holloway 的*“快速计算斐波那契数的算法” ）。**********

 ******** * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T21:32:45.727

递推关系如下：

T(n) = T(n-1) + T(n-2) + O(1)

这不适合主定理下的任何情况，因为您的方程式中没有 T(n/b) 形式的项。

因此，我们不得不采取一种有点奇怪的方法：

由于根据上述定义，T(n-1) 将等于 T(n-3) + T(n-2) + O(1)，因此您可以将 T(n) 写为：

T(n) = 2T(n-2) + T(n-3) + 2*O(1)

因为，T(n-2) = T(n-3) + T(n-4) + O(1)，我们可以进一步简化 T(n) 为：

T(n) = 3T(n-3) + 2T(n-4) + 3*O(1)

到目前为止，我们应该开始看到一种模式，但让我们更进一步了解它。由于 T(n-3) = T(n-4) + T(n-5) + O(1)：

T(n) = 5T(n-4) + 3T(n-5) + 4*O(1)

第一项的系数遵循斐波那契数列的模式。在下一轮中，我们将以 8T(n-5) 作为前导项。第二项也遵循斐波那契数列，因为在下一轮我们将有 5T(n-6)。第三项就像 n 一样增长。

所以，由于 T(1) 只是 O(1)，你最终会得到：

T(n) = x*O(1) + y*O(1) + n*O(1) 其中 x 是斐波那契数列中的第 n 项，y 是斐波那契数列中的第 (n-1) 项.

查看前面的术语，您可以看到我们的大 O 分析基本上就是基于 n 计算 x 的公式。

你可以在这里看到这个公式：[http ://www.askamathematician.com/2011/04/q-is-there-a-formula-to-find-the-nth-term-in-the-fibonacci-sequence/](http://www.askamathematician.com/2011/04/q-is-there-a-formula-to-find-the-nth-term-in-the-fibonacci-sequence/)

当您应用大 O 分析时，这将归结为以下内容：O(1.6^n)*******

# python - UNIX时间太长

> ID：15557672
> 
> 赞同：0
> 
> 时间：2013-03-21T20:41:28.767
> 
> 标签：python, unix, cookies, time

我有这个号码**13008365973607952**我知道它对应于**Thursday, 21 March 2013 19:59:33**。但是，对我来说，这个数字似乎太长了。当我使用 Python 的`time.time()`函数时，我只得到**1363901872.498432**，如果你放下点，只要前面提到过，但它变得太大（值）。

谁能告诉我如何获得这样一个有效的号码？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T20:45:25.067

```
secsAfterADEpoch = float(your_weird_time) / 10000000.0 # seconds since jan 1st 1601
ADToUnixConvertor = ((1970-1601) * 365.242190) * 86400 # unix epoch - AD epoch * number of tropical days * seconds in a day
unixified = (secsAfterADEpoch-ADToUnixConvertor)+31800 # unix Timestamp version of AD timestamp + correction time 
```

呃试试这个？

注意：`+31800`是我必须添加到方程中最有可能出现在我的时区或之前计算中的一些数学问题的东西。所以如果你的不起作用，请记住我是 +1 GMT（或 CET）所以删除它或如果您获得接近的结果但没有发现，相应地更改它可能是一个好主意:)

# wordpress - 具有特定分类的页面上的元框

> ID：15557679
> 
> 赞同：0
> 
> 时间：2013-03-21T20:41:44.500
> 
> 标签：wordpress, plugins, custom-post-type, custom-taxonomy, meta-boxes

使用 Meta Boxes 插件，有没有办法限制元框只显示在具有特定分类的页面上？

```
$meta_boxes[] = array(
    'id' => 'sponsor_list',                 
    'title' => 'Sponsors',              
    'pages' => array( 'page' ),             
    'context' => 'normal',                  
    'priority' => 'high',                   

    'fields' => array( 
        array(
            'name' => 'Sponsor Logos',
            'desc' => 'Upload sponsor logos here',
            'id' => $prefix . 'sponsor_logos',
            'type' => 'image' 
        )
    )
); 
```

哪个有效，但显示在所有页面上。我希望元框只显示在具有特定分类的页面上。这是可能的，还是意味着创建一个带有 post_type 页面的新 CPT，然后将元框附加到它？

**更新**

这是分类法

```
// Location taxononomy
function create_artists_sites() 
{
  $labels = array(
    'name' => _x( 'Festival Sites', 'taxonomy general name' ),
    'singular_name' => _x( 'Festival Site', 'taxonomy singular name' ),
    'search_items' =>  __( 'Search Festival Sites' ),
    'all_items' => __( 'All Festival Sites' ),
    'parent_item' => __( 'Parent Festival Sites' ),
    'parent_item_colon' => __( 'Parent Festival Sites:' ),
    'edit_item' => __( 'Edit Festival Site' ), 
    'update_item' => __( 'Update Festival Site' ),
    'add_new_item' => __( 'Add New Festival Site' ),
    'new_item_name' => __( 'New Festival Site Name' ),
    'menu_name' => __( 'Festival Sites' ),
  );    

  register_taxonomy('artists_sites', array('page'), array(
    'hierarchical' => true,
    'labels' => $labels,
    'show_ui' => true,
    'query_var' => true,
    'rewrite' => array( 'slug' => 'artists-sites' ),
  ));
} 
```

元框已添加到所有页面

```
$meta_boxes[] = array(
...
'pages' => array( 'page' ), 
```

我需要一个声明元的条件

```
 if(any festival taxonomy is checked) { 
   show meta box 
} else {
   don't show meta
} 
```

最终目标是我没有与 CMS 中特定页面无关的元框。

进一步考虑这一点，它也可能是页面模板的一个条件。

假设我有一个带有模板的页面：登陆

那么条件可能是：

```
if(page has landing template) {
   show meta box
} else {
   don't show meta
} 
```

# php - Zend.DB：如何对“orWhere()”子句进行分组？

> ID：15557686
> 
> 赞同：1
> 
> 时间：2013-03-21T20:42:08.050
> 
> 标签：php, sql, zend-db

我有一个小任务要处理，虽然我*可以*使用该`query()`函数手动写出 SQL，但我***真的***有兴趣了解这一点。

**注意：**我在 ZF 上很绿色（尤其是作为*框架*）。我只是将 DB 用作库。

**期望的结果：**
我希望我的 sql 看起来像这样：

```
SELECT name, phone, email 
FROM company 
WHERE name = 'Acme Anvil Corp' 
AND ( category1 = 'abc' 
      OR category3 = 'klm'
      OR category8 = 'xyz'
    ) 
```

**到目前为止我已经到达的地方：**

```
$select = $db 
            ->select() 
            ->from('company, array('name', 'phone', 'email'))
            ->where('name = ?', 'Acme Anvil Corp')
            ->limit(1); 
```

在那之后，我被搞砸了。
添加一整套`orWhere()`'s 突起不会产生预期的结果。
如何`orWhere()`在集体分组中添加一堆 's `()`？

**或者**，我想过尝试让我的 SQL 看起来更像：

```
SELECT c.name, c.phone, c.email 
FROM  (
        SELECT name, phone, email 
        FROM company
        WHERE category1 = 'abc' 
        OR category3 = 'klm'
        OR category8 = 'xyz'
      ) AS c
WHERE c.name = 'Acme Anvil Corp' 
```

（我不是 SQL 专家，所以如果这两者之间存在显着差异，请不要对反馈感到害羞：）

同样，只是不确定如何解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T20:47:14.667

```
use Zend\Db\Sql\Predicate;

$select->where(array(
    // ...
    new Predicate\PredicateSet(
        array(
            new Predicate\Like('content', '%'.$searchstring.'%'),
            new Predicate\Like('title', '%'.$searchstring.'%'),
        ),
        Predicate\PredicateSet::COMBINED_BY_OR
    ),
    // ...
)); 
```

还，

```
$predicate = new  \Zend\Db\Sql\Where();
$sql->where($predicate->greaterThan('filterColumn', '20'));
$sql->where($predicate->greaterThan('filterColumn', '30'), 'OR'); 
```

# jsf-2 - 从数据库生成 outputLink 动作

> ID：15557688
> 
> 赞同：2
> 
> 时间：2013-03-21T20:42:10.287
> 
> 标签：jsf-2, primefaces, prettyfaces

我有许多 outputLink 菜单，我从数据库 mysql 生成它们，例如：

```
<ui:repeat value="#{loginAction.subMenusBeans.subMenusBeansList}" 
var="subMenusBeansList">
<ui:fragment rendered="#{menusBeansList.menuId == subMenusBeansList.menuId}" >   

<h:commandLink id="circlLink" value="#{subMenusBeansList.subMenuName}"  
action="{subMenusBeansList.subMenuLink}" />
</ui:fragment>
</ui:repeat> 
```

我从数据库中获取操作值并将其设置为“subMenusBeansList.subMenuLink”

**输出：**

```
head quarter
main offices
offices
and so on.. 
```

当我点击上述任何链接时

异常： `action="#{subMenusBeansList.subMenuLink}":`找不到方法：

我想从数据库设置操作方法名称，因为我有很多超链接，并且想从数据库设置所有链接操作并使用 ui:repeat 将它们生成为 xhtml 但是当我单击从`#{subMenusBeansList.subMenuLink}'`抛出异常生成的任何超链接操作时

```
 javax.servlet.ServletException: javax.el.MethodNotFoundException: /template/
    templateslider.xhtml @36,135 action="#{subMenusBeansList.subMenuLink}":
 Method not found: com.ss.managedbeans.SubMenusBeans@552edddd.subMenuLink() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T19:35:54.203

您在这里遇到的问题是它`<h:outputLink action="XXXX">`实际上需要一个 MethodExpression，这就是为什么它没有尝试为您的属性“subMenuLink”解析 getter。

正如 BalusC 建议的那样，您可能想要的是使用 ` 代替。此属性需要一个 ValueExpression，并且应该能够解析您的属性及其 getter。

# android - 使用 PHP MySQL（Android 应用程序）的复选框/列表视图戏剧

> ID：15557696
> 
> 赞同：0
> 
> 时间：2013-03-21T20:42:54.693
> 
> 标签：android, mysql, listview

好像结合复选框和列表视图还不够困难。我遇到了这个愚蠢的问题：“我的列表项应该是从 HTTP 请求中下载的（完成），但我现在不知道应该将复选框放在代码的哪个位置，所以每个列表项都有自己的复选框以及如何我可以记住每个项目被检查“。以下是用于 HTTP 请求的代码：

```
package com.example.androidhive;

import java.util.ArrayList;
import java.util.HashMap;
import java.util.List;

import org.apache.http.NameValuePair;
import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import android.app.ListActivity;
import android.app.ProgressDialog;
import android.content.Intent;
import android.os.AsyncTask;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.ListAdapter;
import android.widget.ListView;
import android.widget.SimpleAdapter;
import android.widget.TextView;

public class AllProductsActivity extends ListActivity {

    // Progress Dialog
    private ProgressDialog pDialog;

    // Creating JSON Parser object
    JSONParser jParser = new JSONParser();

    ArrayList<HashMap<String, String>> productsList;

    // url to get all products list
    private static String url_all_products = "http://10.0.2.2:8080/android_connect/get_all_products.php";

    // JSON Node names
    private static final String TAG_SUCCESS = "success";
    private static final String TAG_PID= "name";
    private static final String TAG_CATEGORY = "category";
    /*private static final String TAG_UNIT = "unit";
    private static final String TAG_CALORY = "calory";
    private static final String TAG_CARBOHYDRATE = "carbohydrate";
    private static final String TAG_CATEGORY = "category";*/
    // the array was defined in PHP file
    private static final String TAG_PRODUCT = "product";

    // products JSONArray
    JSONArray products = null;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.all_products);

        // Hashmap for ListView
        productsList = new ArrayList<HashMap<String, String>>();

        // Loading products in Background Thread
        new LoadAllProducts().execute();

        // Get listview
        ListView lv = getListView();

        // on seleting single product
        // launching Edit Product Screen
        lv.setOnItemClickListener(new OnItemClickListener() {

            @Override
            public void onItemClick(AdapterView<?> parent, View view,
                    int position, long id) {
                // getting values from selected ListItem
                String pid = ((TextView) view.findViewById(R.id.pid)).getText()
                        .toString();

                // Starting new intent
                Intent in = new Intent(getApplicationContext(),
                        EditProductActivity.class);
                // sending pid to next activity
                in.putExtra(TAG_PID, pid);

                // starting new activity and expecting some response back
                startActivityForResult(in, 100);
            }
        });

    }

    // Response from Edit Product Activity
    @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        super.onActivityResult(requestCode, resultCode, data);
        // if result code 100
        if (resultCode == 100) {
            // if result code 100 is received 
            // means user edited/deleted product
            // reload this screen again
            Intent intent = getIntent();
            finish();
            startActivity(intent);
            Log.d("NUN complete","tyt");
        }

    }

    /**
     * Background Async Task to Load all product by making HTTP Request
     * */
    class LoadAllProducts extends AsyncTask<String, String, String> {

        /**
         * Before starting background thread Show Progress Dialog
         * */
        @Override
        protected void onPreExecute() {
            super.onPreExecute();
            pDialog = new ProgressDialog(AllProductsActivity.this);
            pDialog.setMessage("Loading items. Please wait...");
            pDialog.setIndeterminate(false);
            pDialog.setCancelable(false);
            pDialog.show();
        }

        /**
         * getting All products from url
         * */
        protected String doInBackground(String... Args) {
            // Building Parameters
            List<NameValuePair> params = new ArrayList<NameValuePair>();
            // getting JSON string from URL
            JSONObject json = jParser.makeHttpRequest(url_all_products, "GET", params);

            // Check your log cat for JSON reponse
            Log.d("All Products: ", json.toString());

            try {
                // Checking for SUCCESS TAG
                int success = json.getInt(TAG_SUCCESS);

                if (success == 1) {
                    // products found
                    // Getting Array of Products
                    Log.d("All Products: ", json.toString());
                    products = json.getJSONArray(TAG_PRODUCT);

                    // looping through All Products
                    for (int i = 0; i < products.length(); i++) {
                        JSONObject c = products.getJSONObject(i);

                        // Storing each json item in variable
                        String id = c.getString(TAG_PID); // also name
                        String category = c.getString(TAG_CATEGORY );
                        // NO NEED FOR THEM !!
                        /*
                        String unit = c.getString(TAG_UNIT );
                        String category = c.getString(TAG_CATEGORY );
                        String calory = c.getString(TAG_CALORY );
                        String carbohydrate = c.getString(TAG_CARBOHYDRATE ); */

                        // creating new HashMap
                        HashMap<String, String> map = new HashMap<String, String>();

                        // adding each child node to HashMap key => value
                        map.put(TAG_PID, id);
                        map.put(TAG_CATEGORY, category);
                        //map.put(TAG_NAME, name);

                        // adding HashList to ArrayList
                        productsList.add(map);
                        Log.d("All Products: ", json.toString());
                    }
                } else {
                    // no products found
                    // Launch Add New product Activity
                    Intent i = new Intent(getApplicationContext(),
                            NewProductActivity.class);
                    // Closing all previous activities
                    i.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                    startActivity(i);
                }
            } catch (JSONException e) {
                e.printStackTrace();
            }

            return null;
        }

        /**
         * After completing background task Dismiss the progress dialog
         * **/
        protected void onPostExecute(String file_url) {
            // dismiss the dialog after getting all products
            pDialog.dismiss();
            // updating UI from Background Thread
            runOnUiThread(new Runnable() {
                public void run() {
                    /**
                     * Updating parsed JSON data into ListView
                     * */
                    ListAdapter adapter = new SimpleAdapter(
                            AllProductsActivity.this, productsList,
                            R.layout.list_item, new String[] { TAG_PID,
                                    TAG_CATEGORY},
                            new int[] { R.id.pid, R.id.category});
                    // updating listview
                    setListAdapter(adapter);
                }
            });

        }

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T20:55:20.067

您可以创建一个自定义适配器，在其中放置从 HTTP 请求中获得的所有项目。每个项目都有一个复选框，您可以使用[BaseAdapter](http://developer.android.com/reference/android/widget/BaseAdapter.html)而不是`SimpleAdapter`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T20:59:09.500

`TextView`使用您用来显示产品的 xml 创建一个 xml，`CheckBox`然后将为您的`list`. 请务必使用`ListView with the`android:id`

```
<ListView
android:id=@android:id/list
.../> 
```

否则你会得到一个错误。

此外，你不应该需要它`runOnUiThread()`，`onPostExecute()`因为它已经在`UI`线程上运行

# iphone - objective-c 记录音频会话输出

> ID：15557699
> 
> 赞同：3
> 
> 时间：2013-03-21T20:42:58.690
> 
> 标签：iphone, ios, core-audio, audiounit

我正在编写一个生成音乐的应用程序。我正在使用 OpenAL 来： 修改增益；修改音高；混合音频；并播放生成的音频。我现在需要录制正在播放的音频。我了解 OpenAL 不允许您录制输出音频。我发现的其他选择是使用音频单元。但是，因为我需要混合/音高/增益音频并录制它，所以我似乎需要编写所有音频处理，以便可以访问输出缓冲区。它是否正确？或者我可以使用不同的 iOS API 来执行此操作。如果没有，那么是否已经有第 3 方解决方案可以让我记录输出（付费解决方案很好）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T03:49:41.773

你是对的。

Audio Units 是唯一允许应用程序处理和录制音频的 iOS 公共 API。

试图记录 OpenAL 输出很可能违反了 Apple 禁止使用非公共 API 的规则。

另一种方法可能是完全重写在 RemoteIO 音频单元之上运行的您需要的 OpenAL 部分（某些部分可能是开源的）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T23:11:08.373

最好的方法可能是 Core Audio，因为它可以为您提供所需的灵活性。查看[扩展音频文件服务](http://developer.apple.com/library/ios/#documentation/MusicAudio/Reference/ExtendedAudioFileServicesReference/Reference/reference.html)参考页面。

使用扩展音频文件，您应该能够设置文件格式和音频流缓冲区以将最终混合输出发送到，然后使用该`ExtAudioFileWrite()`函数将样本写入文件。

# c++ - c++ 中类似 Java 的 lastIndexOf

> ID：15557700
> 
> 赞同：2
> 
> 时间：2013-03-21T20:43:05.770
> 
> 标签：c++, boost, c++11, lastindexof

我对 boost 和 c++ 进行了一些研究，但找不到与我的问题相关的任何内容。是否有实现[lastIndexOf](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#lastIndexOf(int))的 boost 库或 STL 函数？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-21T20:50:14.953

看起来你可能想要[`std::string::find_last_of`](http://en.cppreference.com/w/cpp/string/basic_string/find_last_of)。

> 查找与给定字符序列中的一个字符相等的最后一个字符。如果没有找到这样的字符，则返回找到的字符或 npos 的位置。

编辑：

另请参阅 hmjd 的答案。根据您是在搜索单个字符、多个可能字符之一还是子字符串，它们之间存在差异`find_last_of`，`rfind`具体取决于您。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-21T20:44:41.963

`std::string`具有从末尾开始搜索的成员函数[`rfind()`](http://en.cppreference.com/w/cpp/string/basic_string/rfind)，如果找到或未找到则返回索引`std::string::npos`。从链接的参考页面：

> 查找等于给定字符序列的最后一个子字符串。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-21T20:44:58.987

当然，您可以使用`std::find`with `reverse_iterator`s。例如，您有一个整数向量，并且您想找到其中的最后 5 个。你做

```
auto it = std::find(v.rbegin(), v.rend(), 5); 
```

如果你想要索引本身，那么你可以从迭代器中得到它

```
int index = std::distance(v.begin(), (it+1).base()); 
```

# css - 调整顶部，同时使用 CSS 保持底部位置

> ID：15557703
> 
> 赞同：0
> 
> 时间：2013-03-21T20:43:18.800
> 
> 标签：css, word-processor

我现在正在开发的网站旨在复制您可以打印的文档。有页眉、正文和页脚。这三个元素都使用 CSS 来调整每个元素的边距和高度。

页脚高度为 0.5 英寸，并且必须在距页面底部至少 0.5 英寸的位置结束，但不能超过该高度。根据其他文字处理器，如果页脚大于 0.5 英寸，页脚会在页面上向上移动，以保持 0.5 英寸的边框。

这意味着身体会缩小，所以我已经设置（我认为）这样更大的页脚会缩小身体，这是预期的行为。

但是，我想要的是一种让页脚调整其在页面上的位置的方法，使其始终距离页面底部至少 0.5 英寸。

注意我希望该解决方案适用于一个文档的任意数量的页面，因此我不能使用固定位置。

我包含了我的演示代码，只要高度足够小，它就可以工作。

```
<div style="height: 9in;
padding-left: 1in;
padding-right: 1in;
padding-top: 0.5in;
padding-bottom: 0.5in;
background-color: #eee;
margin-top: -0.08in;
margin-left: -0.08in;">
            <div style="height: 0.5in"> Nick 1 </div>
            <div style="max-height: 9in; height: 9in;">I love stuff.</div>
            <div style="min-height: 0.5in; height: 0.5in; margin-top: 0.5in;">Footer</div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T03:49:32.253

我不认为你正在寻找的东西只能用 CSS 来完成，至少在 flexbox 模型得到更广泛的支持之前不能。[如果您使用的是 Chrome 24 或更高版本，您可以在http://jsfiddle.net/2late2die/bNJZG/1/](http://jsfiddle.net/2late2die/bNJZG/1/)看到下面的代码

```
.page {
  width:8in;
  height:10.5in;
  background:#fff;
  position:relative;
  margin:.5in auto;
  box-shadow:rgba(0,0,0,.2) 0 0 .1in;
  display: -webkit-flex;
  display: -moz-flex;
  display: -ms-flex;
  display: flex;
  -webkit-flex-flow: column;
  -moz-flex-flow: column;
  -ms-flex-flow: column;
  -ms-flex-direction: column;
  flex-flow: column;
}
.page .body {
  -webkit-flex: 1 0 auto;
  -moz-flex: 1 0 auto;
  -ms-flex: 1 0 auto;
  flex: 1 0 auto;
} 
```

它基本上将页面的主体设置为一个 flexbox 项目，它可以伸展以占据页眉和页脚之间的整个垂直空间。但是，您仍然需要自己管理正文的高度，因为如果它超过页眉和页脚之间的剩余空间，它将溢出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T20:48:15.223

研究[CSS 粘性页脚](http://www.cssstickyfooter.com/)技术。

原理是这样的：

*   内容的底部填充等于页脚的高度
*   页脚使用相对定位
*   页脚的上边距等于它自己的（否定的）高度

结果是页脚与内容的填充重叠。由于大小匹配重叠使得页脚“粘”到内容结束的地方。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T21:10:52.227

我建议您使用本机 javascript 或 jquery CSS 不是一种编程语言，但 javascript 将为您提供更多功能来测试所需条件 ﻿</p>

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T21:00:08.727

这本质上是一个粘性页脚。

CSS

```
.wrap { 
  min-height:100%;
  margin-bottom: -.4in; /* same as footer */
}
.push, #footer {
  height:.4in;
} 
```

的HTML

```
<div class="wrap">
 <div></div>
 <div></div>
 <div class="push"></div>
</div>
<div id="footer"> 
```

# wordpress - 如何将 HighCharts 交互式图表嵌入到 wordpress 3.5.1 页面中？

> ID：15557709
> 
> 赞同：0
> 
> 时间：2013-03-21T20:43:57.637
> 
> 标签：wordpress, highcharts

我的名字是乔希，我在一家社区大学报纸工作。我最近才发现 Highcharts 并试图将交互式图表嵌入到我们网站的帖子中，但没有成功。实际上，这是一次彻底的失败。

我已经阅读并尝试这篇文章无济于事： [highcharts and wordpress](https://stackoverflow.com/questions/15403702/highcharts-and-wordpress)

没有人知道我可以向谁提出这个问题，即使我觉得我已经尝试了所有建议的解决方案，但不幸的是，我在 html 和代码方面相当文盲。任何帮助将不胜感激。

我正在使用 Wordpress 3.5.1 这是我目前所处的位置：我正在运行：在帖子和页面插件和交互式 Javascript 和 CSS 中允许 PHP。

对于帖子的标题选项，我有：

```
<script type="text/javascript" src="http://code.jquery.com/ui/1.9.2/jquery-ui.js">    </script>
<script src="http://www.domain.com/wp-content/uploads/2013/03/highcharts1.js"    type="text/javascript"></script> 
```

在一些网站（包括这个）中，我看到提到将 Highcharts 库上传到您的 wordpress 服务器。我已经通过媒体库上传了 highcharts.js 文件，但我觉得我做错了？

在帖子本身中，我放置了：

```
[php]
$(function () {
var chart;
$(document).ready(function() {
    chart = new Highcharts.Chart({
        chart: {
            renderTo: 'container',
            type: 'line',
            marginRight: 130,
            marginBottom: 25
        },
        title: {
            text: 'State Funding of DSPS Services',
            x: -20 //center
        },
        subtitle: {
            text: 'Source:MPR Associates Report',
            x: -20
        },
        xAxis: {
            categories: ['2003-04', '2004-05', '2005-06', '2006-07', '2007-08',
                '2008-09', '2009-10', '2010-11', '2011-2012', '2012-13']
        },
        yAxis: {
            title: {
                text: '$ Million'
            },
            plotLines: [{
                value: 0,
                width: 1,
                color: '#808080'
            }]
        },
        tooltip: {
            formatter: function() {
                    return '<b>'+ this.series.name +'</b><br/>'+
                    this.x +': '+ this.y +' Million';
            }
        },
        legend: {
            layout: 'vertical',
            align: 'right',
            verticalAlign: 'top',
            x: -10,
            y: 100,
            borderWidth: 0
        },
        series: [{
            name: 'College Total Funding',
            data: [77.8, 81.8, 86.2, 102.1, 109.3, 108.9, 64.9, 64.8, 64.6, 65.7]

        }]
    });
});

});
[/php]
<div id="container" style="width: 100%; height: 400px"></div> 
```

* * *

该页面出现空白，就像过去一百次左右的尝试一样。如果这是张贴在错误的位置或不受欢迎的地方，我深表歉意。非常感谢任何建议或解决方案。

谢谢你，J

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T08:58:45.127

为了使图表呈现，您需要准备好几件事：

1.  包括 highcharts.js - 完成
2.  包括一些定义和创建图表的 javascript - 完成
3.  给 highcharts 一个放置图表的地方 - ?

我认为您可能缺少最后一个元素。这是通过在您的帖子中某处包含一个标签来完成的。可以使用 'id' 属性命名 div，如下所示：

```
<div id='container'>mydiv</div> 
```

你已经告诉 highcharts 你想'renderTo'一个叫做'container'的地方，所以这应该是你所需要的。

要在 wordpress 中添加此内容，请进入帖子编辑器并确保您处于“html”模式。在我的 wordpress 版本中，这是一个位于帖子编辑窗格右上角的选项卡，带有“visual”和“html”选项。

在 html 模式下，只需在您希望图表出现的位置添加我的 div 代码即可。希望这能解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-03T18:22:45.413

图表未显示可能有多种原因。

1）脚本（jquery 和 highcharts）需要加载到您的页面上，这在 wordpress 中并不明显。有几种方法 - 如果您不是编码员，那么最简单的方法是转到主题的 header.php。（外观-> 编辑器）并在右侧查找 header.php 文件。在 head 部分，您需要注册 highcharts 库...

```
 wp_register_script('myHighchartsHandle','highcharts/js/highstock.js',array('jquery'),'1.0a');
    wp_enqueue_script('myHighchartsHandle'); 
```

high stock/highcharts 库的路径当然会根据它在服务器上的位置而改变。

2) 代码是 javascript - 您提供的代码有 php 标签。我认为您可以对其进行编辑以在方括号中添加 js 标签并安装“允许在帖子和页面中使用 javascript”插件。请注意，插件需要您在代码中的任何方括号前加上反斜杠，因此您需要这样做才能正确格式化数据系列。

3）看起来您的代码之外有一个 div 容器，这很好。但是正如另一个答案所暗示的那样，您将需要它，并且 id 必须与代码中的 renderTo 匹配。

4）如果在这 3 个步骤之后它不起作用，那么你可能会遇到 jQuery noConflict.Wordpress 默认情况下在此模式下设置 jquery。而不是你的 js 代码中的 $ 你可能不得不用 jQuery 替换。highcharts 库在您使用的代码中是可以的。

如果需要，很乐意提供更多帮助。从那以后，我已经将其中的大部分内容构建到一个更清洁的插件中......

# python - 如何使用 dtype 在 numpy 中构造一维数组

> ID：15557715
> 
> 赞同：2
> 
> 时间：2013-03-21T20:44:09.283
> 
> 标签：python, arrays, data-structures, numpy, scipy

我需要将 ndarray 解析为固定形状。我在使用 dtype 时需要帮助，因此它解析整个数组，而不仅仅是第一个匹配项。

```
a
Out[193]: '1\t2\t3\t4\t5\t6\t'

ar = np.loadtxt(StringIO(a),dtype={'names':('x','y'),'formats':('f8','f8')}).view(np.recarray)

ar.x
Out[195]: array(1.0)

ar.y
Out[196]: array(2.0) 
```

成为我想要的：

```
ar.x
Out[195]: array(1.0,3.0,5.0)

ar.y
Out[196]: array(2.0,4.0,6.0) 
```

如果有人可以解释 dtype 中使其发生的设置将非常好 =)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T21:10:47.617

问题不在于您的 dtype，而在于您使用了错误形状的数组（一维而不是二维）。有很多方法可以用来重塑数据，但这是我能想到的最简单的方法，假设您确实需要像这样使用 loadtxt：

```
raw = np.loadtxt(StringIO(a), dtype='f8')
resh = raw.reshape(-1,2) # This will work for any (even) length initial data
rec = resh.view([('x', 'f8'), ('y', 'f8')], np.recarray) 
```

请注意 -1 形状的意思是，“无论什么使事情顺利进行，其他维度都是正确的”。

# jquery - 在具有 id 的表中选择一个具有类的按钮

> ID：15557716
> 
> 赞同：3
> 
> 时间：2013-03-21T20:44:16.560
> 
> 标签：jquery, html

我有以下代码：

```
<table id="my_table">
<tr>
    <td>
        <button class="btn_save" value="1">Save</button>
    </td>
</tr>
</table> 
```

我想选择那个按钮

我试过了：

```
$('#my_table .btn_save').click......
$('table#my_table .btn_save').click......
$('table td .btn_save').click......
$('table td :button.btn_save').click...... 
```

似乎没有任何效果，我错过了什么？

顺便说一句，我不能在按钮上放一个 id，因为这将是一个带有很多按钮的动态生成表，这就是我选择课堂方式的原因。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T20:47:02.327

你所有的选择器看起来都不错。（[这是一个工作的jsFiddle](http://jsfiddle.net/g5GTV/)）

我看到两个可能的问题：

您的数据是动态添加的，在这种情况下，您需要使用事件延迟[`.on()`](http://api.jquery.com/on/)：

```
$(document).on("click",'#my_table .btn_save',function(){
   //what you're doing
}); 
```

另一种可能性是选择器添加在数据之前，在这种情况下，您需要将语句放在`$(document).ready`子句中

```
$(function(){
    $('#my_table .btn_save').click......
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-21T20:46:56.637

由于您正在动态生成表格和内容，因此请使用`.on()`. 尝试

```
$(document).on('click', '#my_table .btn_save', function(){...... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T20:46:15.070

确保在运行代码时表和按钮存在于 dom 中。

```
$(function(){
      var button = jQuery("#my_table button.btn_save")
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T20:46:37.397

您点击这些按钮的频率无关紧要。不保证他们会提交您的表格！您将不得不将它们更改`type="submit"`为`type="button"`

# php - 迁移 WordPress 网站后，我无法访问管理员（白页）

> ID：15557718
> 
> 赞同：16
> 
> 时间：2013-03-21T20:44:25.343
> 
> 标签：php, wordpress, content-management-system

我正在尝试将 WordPress 站点从我的本地服务器移动到在线服务器。

问题是，在迁移之后，如果我尝试打开管理页面 (wp-admin)，我只会获得一个白页，如您在此处看到的：http: [//scorejava.com/wordpress/wp-admin/](http://scorejava.com/wordpress/wp-admin/)。主页上的其他所有内容似乎都运行良好：http: [//scorejava.com/wordpress/](http://scorejava.com/wordpress/)。

在我的本地 Web 服务器中，我将 WP 站点放入文件夹中：`/var/www/wordpress`. 我已经将它移到了一个**wordpress**文件夹中，该文件夹位于我的在线 Web 服务器的根目录中。

我还使用 MySql 将本地数据库导入到 onlyne 数据库中，然后我使用**搜索和替换 WordPress 数据库脚本**自动将所有出现更改为具有[http://scorejava.com/wordpress/](http://scorejava.com/wordpress/)`http://localhost/wordpress`的数据库表。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2015-02-11T17:02:01.743

您的网站出现错误，您需要了解发生了什么。

## WordPress 网址

在迁移 URL 更改的 WordPress 站点时，您需要告诉 WordPress 新 URL。WordPress 将该信息存储在数据库中，因此如果您对此感到满意，您可以`wp_options`在数据库的表中找到正确的条目并更新其值。

我将展示一些针对标准 WordPress 安装（站点 URL 是 WordPress 根目录）的修复，但如果您有不同的设置，您可能需要*使用*不同的值。`home``siteurl`

### 通过 SQL 修复 URL

您将需要更新数据库中的相关字段，这些字段是`wp_options`where或. 您可以使用 phpmyadmin、mysql-workbench 或其他数据库管理工具找到这些字段，或者您可以使用以下查询，将 URL 更改为您自己的。`option_name``siteurl``home`

```
UPDATE `wp_options` SET `option_value`='http://www.myurl.com' WHERE `option_name` IN ('siteurl', 'home'); 
```

### 通过修复 URL`wp-config.php`

但是，您也可以通过 来执行此操作`wp-config.php`，我觉得这样做更舒服。只需打开`wp-config.php`并添加以下行：

```
// Site URLS (override DB settings)
define('WP_HOME','http://www.myurl.com');     //<-- NO TRAILING /
define('WP_SITEURL','http://www.myurl.com');  //<-- NO TRAILING / 
```

显然，您需要提供正确的 URL。

这可能是您遇到的唯一错误，将这些行添加到 后`wp-config.php`，您将能够正常登录并使用您的网站。

## 调试 WordPress 错误

但是，如果您继续遇到问题，并且在您开发网站的任何时候，您都会希望看到错误输出。您可以检查您的服务器日志以获取有关错误的信息，但您可能会发现 WordPress 更方便地在页面中简单地显示错误。要启用错误显示，请将以下设置更改为`true`in `wp-config.php`。

```
define('WP_DEBUG', true); 
```

现在 WordPress 将直接在网页中显示它遇到的任何错误。请务必将设置更改`false`为在生产站点上使用。

## 与`wp-config.php`

该文件将位于您的 wordpress 安装的根目录中。要进行此处提到的任何更改，您可以直接在服务器上编辑文件（`ssh`例如通过），或者使用 FTP 客户端下载文件，使用文本编辑器进行更改，然后再次上传文件。

在进行任何更改之前保留备份副本也是一个好主意，以防您在工作时破坏某些东西。

## 参考

[您可以在文档页面](http://codex.wordpress.org/Changing_The_Site_URL)上阅读有关更改 WordPress 站点 URL 的所有内容。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-06-09T08:08:05.380

迟到了，我最近遇到了这个问题，我设法解决了这个问题。这是我所做的。

**第 1 步：**从文件中设置`WP_DEBUG`为`true``wp-config.php`

**第2步：**我尝试`domain.com/wp-login.php`而不是`domain.com/wp-admin`通过这个我能够获得至少登录表单和一些错误`Warning: Cannot modify header information - headers already sent by`

**第3步：**我在第一行之后添加`ob_start();`了`wp-login.php`文件`<?php`，当然是为了让我进入一段时间。

**第4步：**这个技巧奏效了。我已经禁用了所有插件，并且错误消失了。

**第5步：**一一激活所有插件以查找导致错误的插件，以便我可以修复特定插件的错误。就像之前有一个插件添加样式一样，`wp_enqueque_style`所以我将它设置为一个函数并正确挂钩。

也有一些小错误，比如`deprecated`函数。是否要更正它或使用备用插件取决于您。

并且不要忘记`ob_start`从`wp_login.php`文件中删除。不应更改核心文件。

希望这可以帮助像我这样的人。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-21T22:32:48.750

在您的 WordPress 仪表板设置中，有两个字段名为“WordPress 地址 (URL)”和“站点地址 (URL)”。这些也称为您网站的“主页”和“站点 URL”设置。这些值需要与您实际运行的服务器相匹配。

**如果您无法访问管理员，您可以使用 phpmyadmin，进入您的数据库，找到 wp_options 表中的字段，并确保它们反映您的域。**

在大多数情况下应该足够了。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-03-21T21:59:16.947

我自己已经与可怕的“死亡白屏”战斗了几次。您可以浏览[Wordpress 支持站点](http://wordpress.org/tags/white-screen-of-death)上的主题以收集一些建议，或者在 Google 上搜索很多人的故事和处理这些问题的建议。我不能为此推荐一个单一的权威参考。

在我的大多数情况下，它是由`?>`在我的开发服务器和生产服务器之间的换行方案更改（通常在插件中）引入的结束标记后的空格引起的。

您也可以尝试将 Wordpress 置于[调试模式](http://codex.wordpress.org/Debugging_in_WordPress)或添加`error_reporting(E_ALL);`到站点文件的第一行，`/wp-admin/admin.php`看看这些是否给您任何提示。

[通过使用XCloner 插件](http://wordpress.org/extend/plugins/xcloner-backup-and-restore/)在我的 Win 开发机器和 *nix 生产服务器之间进行传输，我个人能够避免这些（触摸木头） 。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-04-27T10:21:58.713

编辑 wp-content/themes/active-theme-folder/function.php 并在之前添加此代码：

```
<?php
define('WP_HOME','http://www.myurl.com');     //<-- NO TRAILING /
define('WP_SITEURL','http://www.myurl.com'); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-05-13T11:19:35.403

在停止编辑行上方的 wp-config.php 文件中，添加以下行：

```
define('RELOCATE',true);
/* That's all, stop editing! Happy blogging. */ 
```

然后转到您的登录 URL，刷新页面并登录。重要提示：**如果您可以登录，则在进一步之前删除 RELOCATE 行。**然后导航到：

```
Settings > General 
```

将您的 Wordpress URL 和站点地址设置为正确的位置：

```
WordPress Address (URL): http://example.com/wordpress

Site Address (URL): http://example.com/myblog 
```

按“保存”。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-04-19T11:46:55.873

将以下行添加到`wp-config.php`文件中：

```
define('WP_HOME', 'http://' . $_SERVER['SERVER_NAME']);

define('WP_SITEURL', WP_HOME . '/'); 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2018-11-19T11:26:04.353

在许多情况下，当将文件迁移到不同的服务器时，这个问题的出现仅仅是因为您的一个 PHP 文件中的一个小错误。错误是关闭后的附加字符？> 文件中的 PHP 标记。这些可能只是简单的空白或返回，但它们通常可能是白屏死机的原因。

罪魁祸首是 WordPress 主题中的 functions.php 文件。在纯文本文件编辑器中查看它（大多数主机帐户通常都可用），并确保删除结束标记后的所有行。

如果它不在此文件中，请使用错误报告来识别罪魁祸首文件，它可能位于插件或主题中的其他文件中。

正如 Jon Surrell 提到的启用错误显示，在 wp-config.php 中将以下设置更改为 true。

```
define('WP_DEBUG', true); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-02-20T13:42:38.977

迁移到本地服务器后，我遇到了同样的问题。第一次尝试失败，因为数据库中有许多硬编码的文件路径。所以我再次尝试并注意创建与实时服务器上相同的路径以及相同的主机名和数据库名。现在网站很好，但是 wp-login 出现了白屏。

使用 wp-debug 我发现问题是由 wp-super-cache 插件引起的，该插件在 config.php 中有一个硬编码的完整文件路径 将此路径更改为完整的本地路径就可以了。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-10-03T07:51:18.930

每个人。几天前，我通过 BlogVault 移植了 WordPress 多站点实例。过程进展顺利，站点按需要工作。但是我无法进入控制台，总是收到错误“您的浏览器不支持cookie，请启用它们并重试”。我花了几天时间研究并发现错误是由于页面“wp_options”的代码中的条目而发生的。

原网站使用线路

```
define ('COOKIE_DOMAIN', strtolower (stripslashes ($ _SERVER ['HTTP_HOST']))); 
```

但是新服务器使用该行

```
define ('COOKIE_DOMAIN', mydomain.com);" 
```

替换代码行解决了这个问题。希望这对某人有帮助）

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2019-05-09T17:08:47.567

我将这个答案添加到战斗中，希望它可以帮助其他人。我按照上面的所有建议都无济于事。实际上，我不得不破解 PHP 文件以强制我的管理员访问面板。通过面板，我发现我的管理员帐户没有被分配管理员角色。

这是我对“wp-includes/capabilities.php”的破解

```
function current_user_can( $capability ) {
    $current_user = wp_get_current_user();

    if ( empty( $current_user ) ) {
        return false;
    }

return true;  // HACK to get superuser power to any logged in user

    $args = array_slice( func_get_args(), 1 );
    $args = array_merge( array( $capability ), $args );

    return call_user_func_array( array( $current_user, 'has_cap' ), $args );
} 
```

这允许管理员面板出现，可以访问[https://example.com/wp-admin/users.php](https://example.com/wp-admin/users.php)，然后我可以分配角色。然后我破解了capabilities.php，以确保所有用户都拥有正确的权限，因为我已经分配了“管理员”。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2018-05-13T12:07:04.283

这些是我通常遵循的步骤。

1.  上传文件和数据库。
2.  设置正确的文件权限。
3.  更新 wp-config.php 文件中的数据库配置以匹配服务器数据库登录。
4.  更新`wp_options`用于更新站点 url 和主页 url 的表。
5.  如果一切顺利，您应该能够使用`wp-login.php`url 登录到管理员。
6.  接下来要做的第一件事是转到永久链接并单击保存，它将自动更新`.htaccess`文件。如果没有写入权限，它将显示您可以复制它并通过 ftp 编辑文件。
7.  接下来，您可以使用名为`velvet urls`. 使用了很多年。它将更新数据库中的所有其他 url。

如果一切顺利，所有这些步骤就足够了。

如果你得到一个空白页或其他东西，你可以打开错误报告并从 wp 配置文件本身写入日志。您可以尝试其中一些进行调试。

1.  只需从文件夹中一一删除插件。
2.  删除您正在使用的自定义主题。

除非您主要编辑核心文件，否则它将解决问题。只有其他机会是 php 或 mysql 的版本不匹配，这也是迁移时需要注意的非常重要的事情。希望这可以帮助某人。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2021-11-08T15:58:13.080

这可能是一个较晚的重播，但希望它可以帮助其他人。

就我而言，这是我用来解决问题的步骤。

1.  从您的 WordPress 项目根目录编辑`wp-config.php`文件并更改`define('WP_DEBUG', true);`而不是 false。
2.  将相同的文件上传到新服务器的项目根目录。
3.  尝试像以前一样登录[www.yourDomain.com/wp-admin](http://www.yourDomain.com/wp-admin) - 希望现在您能够登录后端管理员
4.  转到设置->永久链接-在常用设置下-选择单选按钮`plan`然后单击保存按钮，然后再次选择`day and name`保存，不要忘记单击保存，取回您的域并检查您的站点，内页应该工作得很好。
5.  返回`wp-config.php`并将值恢复为 false 并再次上传。
6.  而已。

我不是 wordpress 开发人员，但上述解决方案对我来说非常好，并且没有找到任何正确解释的地方。

# sql - 在Access中查询未在列中输入的计数值

> ID：15557719
> 
> 赞同：0
> 
> 时间：2013-03-21T20:44:28.210
> 
> 标签：sql, ms-access

这是桌子

```
CREATE TABLE STUDENT
(
School_ID char(3), 
St_LastName char(15), 
St_FirstName char(15), 
St_DOB char(15), 
St_SS# char(15), 
St_Address char(15),
St_City char(15), 
St_State char(2),
st_Zip char(5), 
st_phone char(15)
); 
```

我必须编写查询：**确定有多少学生没有电话。**

我在 ACCESS 中写了以下查询

```
SELECT STUDENT.School_ID
FROM STUDENT
WHERE STUDENT.st_phone NOT IN( SELECT STUDENT.st_phone, Count(STUDENT.st_phone) AS StudentWithNoPhone FROM STUDENT
GROUP BY STUDENT.st_phone); 
```

但它不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T20:48:46.800

```
SELECT STUDENT.School_ID
FROM STUDENT
WHERE STUDENT.st_phone IS NULL OR STUDENT.st_phone = '' 
```

还是我误解了你的问题？

# visual-studio-2012 - VS2012 Shader Designer 算法坏了？

> ID：15557722
> 
> 赞同：2
> 
> 时间：2013-03-21T20:44:47.590
> 
> 标签：visual-studio-2012, xna, pixel-shader

VS2012 中的着色器设计器发出的这个函数给我带来了无穷无尽的麻烦。如果您查看下面的代码，您可以看到 VS 版本和 MY 版本之间的区别。

在 VS 版本中，它们不考虑纹理，因此任何仅由环境光照亮的对象的“阴影”侧都只是灰色。在我的版本中，您可以看到我添加了像素颜色（来自纹理），然后效果很好。由于他们将像素颜色考虑到漫反射照明，我无法弄清楚为什么他们不会考虑环境光。

因为我对 3D 很陌生，所以我不想假设我很聪明，而且 VS 团队从未对此进行过测试。而且由于它如此基础，我想知道我是否只是错过了一些东西。想法？

```
float3 LambertLighting(
float3 lightNormal,
float3 surfaceNormal,
float3 materialAmbient,
float3 lightAmbient,
float3 lightColor,
float3 pixelColor
 )
{
    // compute amount of contribution per light
    float diffuseAmount = saturate(dot(lightNormal, surfaceNormal));
    float3 diffuse = diffuseAmount * lightColor * pixelColor;

    // combine ambient with diffuse

   // VS Version:
   return saturate((materialAmbient * lightAmbient) + diffuse);

   // MY Version:
   return saturate((materialAmbient * lightAmbient * pixelColor) + diffuse);

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-12T09:56:52.153

这条线应该已经考虑了纹理的颜色：

```
float3 diffuse = diffuseAmount * lightColor * pixelColor; 
```

稍后将其与环境照明混合以获得正确的结果。在您的版本中，您添加了两次纹理颜色（一次在漫反射中，一次在环境中）。VS 版本对应于我看到的各种在线朗伯光照示例，所以这绝对是正确的。

可能出问题的是，在您的测试设置中，漫反射颜色是黑色或灰色，这会使像素颜色也看起来是灰色的。

# php - mysql滚动选框工作，但我有一个错误

> ID：15557729
> 
> 赞同：-1
> 
> 时间：2013-03-21T20:45:20.817
> 
> 标签：php, mysql, marquee

我有一个显示 mysql 数据的选框。选框工作完美，但我得到：

注意：未定义的变量：在 include() 中继续（第 51 行）

这是我正在使用的代码。

```
 while($row = mysql_fetch_array($result))
    {

    $fundid=$row['Fund_ID'];
    $fundname=$row['Fund_Name'];
    $mostrecentnav=$row['Most_Recent_Nav'];
    $lastdaychange=$row['Last_Day_Change'];
    $lastdayyield=$row['Last_Day_Yield'];

        $cont.= "<a style='color:#0066CC;' href=\"fund-?id=$fundid\">$fundname</a>&nbsp;<b>NAV:</b>$mostrecentnav, <b>Cambio del nav en el dia:</b>$lastdaychange, $lastdayyield% &nbsp;&nbsp; ";
}
    echo "<marquee scrollamount='3' scrolldelay='1' onmouseover='this.stop();' onmouseout='this.start();'>$cont</marquee>";

mysql_close($con); 
```

需要改变什么来摆脱错误。该变量已定义，否则查询将不起作用。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T20:47:38.573

`$cont = '';`在 while() 循环将解决该问题之前。您在第一次执行之前就隐含地使用了 $cont：

```
$cont .= ...; 
```

这相当于

```
$cont = $cont . ....;
        ^^^^^---undefined on first iteration. 
```

# python - 如何使用 python 阅读 yahoo 电子邮件

> ID：15557735
> 
> 赞同：1
> 
> 时间：2013-03-21T20:45:39.473
> 
> 标签：python

尝试使用以下代码阅读雅虎电子邮件。错误消息显示“注意：邮箱已被服务器从此处锁定到 'quit()'”

Q> 如何解决这个问题？

```
import poplib
from email import parser

pop_conn = poplib.POP3_SSL('pop.mail.yahoo.com')
pop_conn.user('xxxx@yahoo.com')
pop_conn.pass_('xxxx')

#Get messages from server:
iMessageCount = len(pop_conn.list()[1])
messages = [pop_conn.retr(i) for i in range(1, iMessageCount + 1)]

# Concat message pieces:
messages = ["\n".join(mssg[1]) for mssg in messages]

#Parse message intom an email object:
messages = [parser.Parser().parsestr(mssg) for mssg in messages]
for message in messages:
    print message['subject']

13 #Get messages from server:

/usr/lib/python2.7/poplib.pyc in pass_(self, pswd)
    187         NB: mailbox is locked by server from here to 'quit()'
    188         """
--> 189         return self._shortcmd('PASS %s' % pswd) 
```

# ms-access - 参数不是可选的吗？

> ID：15557739
> 
> 赞同：1
> 
> 时间：2013-03-21T20:46:29.230
> 
> 标签：ms-access, vba

```
Private Sub cmdAdd_Click()
'add data to table
CurrentDb.Execute = "INSERT INTO jscbb_dir2(ID,Lastname,FirstName, PrimA, Artea,LubNum,OfficeNum,OfficePhone,Email,LabPhone,stats)" & _
" VALUES(" & Me.Textid & ",'" & Me.TextLast & "','" & Me.TextFirst & "','" & Me.Textprima & "','" & Me.Textarea & "','" & Me.Textlabnum & _
"','" & Me.Textofficenum & "','" & Me.Textofficephone & "','" & Me.Textemail & "','" & Me.Textlabphone & "','" & Me.Textstatus & "')"

'refresh data is list on focus
jscbb_dirsub.Form.Requery

End Sub 
```

为什么我在最后一个 (Me.Textstatus) 上出现错误？我知道这是一个低级的问题，但我需要另一双眼睛，我已经看了一个多小时了。错误是“编译错误：参数不是可选的”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T20:53:59.720

考虑参数，它们会更容易调试。

```
Dim qdf As QueryDef
ssql = "INSERT INTO jscbb_dir2(ID,Lastname,FirstName,PrimA,Artea," _
     & "LubNum,OfficeNum,OfficePhone,Email,LabPhone,stats) " _
     & "VALUES([id],[last],[first],[prima],[area],[lab]," _
     & "[office],[phone],[email],[stat])"
Set qdf = CurrentDb.CreateQueryDef("", ssql)
qdf.Parameters("id") = Me.TextID
qdf.Parameters("last") = Me.Textlast
qdf.Parameters("first") = Me.Textfirst
qdf.Parameters("prima") = Me.Textprima
qdf.Parameters("area") = Me.Textarea
qdf.Parameters("lab") = Me.Textlabnum
qdf.Parameters("office") = Me.Textofficenumbet
qdf.Parameters("phone") = Me.Textofficephone
qdf.Parameters("email") = Me.Textemail
qdf.Parameters("stat") = Me.Textstatus

qdf.Execute dbFailOnError 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-20T18:15:02.030

[`Execute`](http://msdn.microsoft.com/en-us/library/bb243015%28v=office.12%29.aspx)是一种方法，而不是一种属性。您不要`=`在方法及其参数之间使用，所以

```
CurrentDb.Execute = "..." 
```

应该

```
CurrentDb.Execute "..." 
```

# c# - 在代码运行时从头开始创建数组

> ID：15557743
> 
> 赞同：0
> 
> 时间：2013-03-21T20:46:37.993
> 
> 标签：c#, asp.net, arrays, dataset

我正在尝试通过这样的数组创建一个列表：

```
private Application[] GetApps()
{
DataSet ds = new Dataset();
string query = "query";
ds = GetData(query);

var appList = new Application[ds.Tables[0].Rows.Count];

for(var i = 0; i <= ds.Tables[0].Rows.Count - 1; i++)
{
                DataRow item = ds.Tables[0].Rows[i];

                appList[i].Name = item["Name"].ToString();
                appList[i].Confidentiality = int.Parse(item["Conf"].ToString());
                appList[i].Id = item["ID"].ToString();
}
return appList;
} 
```

我不断收到一个对象空错误，我知道我必须遗漏一些我没有看到的完全明显的东西。我是否需要以其他方式声明新数组？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-21T20:49:19.480

当您创建时`appList`，您只是在创建数组本身。.NET 不会自动使用 Application 对象填充数组以供您操作。您需要创建一个新的 Application 对象，并在该对象上设置属性，然后您可以将该对象分配给数组。

`Application`.NET 框架中有多个类，似乎没有一个与您的代码匹配，因此下面的示例将简单地假设这`Application`是您自己设计的自定义类型。

```
for(var i = 0; i < ds.Tables[0].Rows.Count; i++)
{
    DataRow item = ds.Tables[0].Rows[i];

    Appliction app = new Application();
    app.Name = item["Name"].ToString();
    app.Confidentiality = int.Parse(item["Conf"].ToString());
    app.Id = item["ID"].ToString();
    appList[i] = app
} 
```

顺便说一句，请注意您可以替换`i <= x - 1`为`i < x`并且行为完全相同。

最后，如果有可能返回 null，您应该对所有访问器进行检查。例如，如果`item["Name"]`返回 null，则调用`item["Name"].ToString()`等同于调用`null.ToString()`，这也将导致`NullReferenceException`.

# java - 打印完成的百分比

> ID：15557746
> 
> 赞同：0
> 
> 时间：2013-03-21T20:46:58.830
> 
> 标签：java, double, long-integer

我试图除以 2 Long 以找到百分比。但是，我只得到`0.0%`or 当它们相等时，`100.0%`. 这就是我正在做的

```
long size =
long mem = 

double avg = (double)(size / mem) * 100; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-21T20:47:35.207

你正在做`long`除法，它会截断数字的小数部分。至少有一个操作数必须是 a`double`才能产生非零`double`，您可以这样做：

```
double avg = (double)size / mem * 100; 
```

分子现在变为 a `double`，因为强制转换[的优先级](http://www.cis.upenn.edu/~palsetia/java/precedenceTable.html)高于除法运算符`/`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T23:09:11.247

如果你想避免长十进制数，你可以使用。

```
long percentage = 100 * size / mem; // as an integer. 
```

如果你想要一位小数，你可以做

```
double percentage = (1000 * size / mem) / 10.0; 
```

# mysql - 复合排序

> ID：15557747
> 
> 赞同：0
> 
> 时间：2013-03-21T20:46:59.877
> 
> 标签：mysql, sorting

进行了快速研究，似乎对我的问题没有很好的解决方案。

这是交易。

想象表：

```
type|filter1|filter2|filter3|filter4|filter5
3   |1      |0      |1      |1      |0
... 
```

type - 可能的值：1 或 2 或 3；过滤器 1 - 5 - 布尔值；

我需要的排序（从上到下降序）：

1.  类型 = 3，过滤器1 = 1；
2.  类型 = 2，过滤器1 = 1；
3.  类型 = 1，过滤器1 = 1；
4.  类型 = 3，过滤器2 = 1；
5.  类型 = 2，过滤器2 = 1；
6.  类型 = 1，过滤器2 = 1；
7.  类型 = 2，过滤器 3 = 1 和过滤器 4 = 1；
8.  类型 = 3，过滤器 3 = 1 和过滤器 4 = 1；
9.  类型 = 1，过滤器 3 = 1 和过滤器 4 = 1；
10.  类型 = 2，过滤器 3 = 1 和过滤器 5 = 1；
11.  类型 = 3，过滤器 3 = 1 和过滤器 5 = 1；
12.  类型 = 1，过滤器 3 = 1 和过滤器 5 = 1；
13.  输入 (3,2), filter4 = 1;
14.  类型 = 1，过滤器4 = 1；
15.  输入 (3,2), filter5 = 1;
16.  类型 = 1，过滤器5 = 1；

因此，结果的顶部将是满足条件号 1\. 的行，然后是满足条件号 2 的行，依此类推。

希望这是对问题的明确解释。

谢谢。

ps当前的工作解决方案是拥有一堆IF。...

```
SELECT
IF(@type = 3 and @filter1 = 1, 16
 ,IF(@type=2 and @filter1 = 1, 15
...
)) AS wieght, t.*
FROM table t
ORDER BY weight DESC 
```

但这似乎需要优化

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T18:49:45.727

@埃尔罗伊弗林

不知道这个查询应该如何工作。这是我得到的：

```
select concat(filter1, filter2, filter3, filter4, filter5)  as mysort,
t.type, t.filter1, t.filter2, t.filter3, t.filter4, t.filter5 
from complex_sort t 
order by mysort, type desc

mysort|type|filter1|filter2|filter3|filter4|filter5
00110|1|0|0|1|1|0
00110|1|0|0|1|1|0
01000|3|0|1|0|0|0
01000|2|0|1|0|0|0
01000|2|0|1|0|0|0
01000|1|0|1|0|0|0
01001|2|0|1|0|0|1
01001|2|0|1|0|0|1
01001|1|0|1|0|0|1
01010|3|0|1|0|1|0
01110|3|0|1|1|1|0
01111|3|0|1|1|1|1
10000|3|1|0|0|0|0
10000|3|1|0|0|0|0
10000|2|1|0|0|0|0
10001|3|1|0|0|0|1
10010|2|1|0|0|1|0
10100|1|1|0|1|0|0
10110|1|1|0|1|1|0
11000|2|1|1|0|0|0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T20:57:22.750

```
select concat(filter1, filter2, filter3, filter4, filter5)  as mysort,t.* 
from t 
order by mysort, type desc 
```

如果 mysql 的 concat 运算符不自动将 bool 转换为 0/1 的字符串，则您需要使用内部表达式将它们转换。

我最初错过了您在 (3,2) 中进行排序的条件。您可以使用类似于原始方法的二级排序，但由于它仅涉及类型字段，因此应该不那么复杂。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T21:11:22.610

一个想法可能只是在表上放置一个触发器，该触发器设置一个权重字段，然后可以对其进行索引并用于排序。然后 ORDER BY 将非常有效，并且权重的丑陋将隐藏在独立于任何 SELECT 语句的触发器中。这样做的缺点是如果表更新很多，那么在它上面有一个触发器可能会减慢速度。

# ios - Google Analytics SDK iOS 2.0b4 未发送任何事件

> ID：15557750
> 
> 赞同：2
> 
> 时间：2013-03-21T20:47:02.267
> 
> 标签：ios, google-analytics

看来我的 GATracker 基本配置正在运行，因为我**能够**在实时部分看到我的设备。然而，即使经过一天左右的触发事件，通过：

```
- (BOOL)send:(NSString *)trackType params:(NSDictionary *)parameters 
```

我没有在参与 > 活动 > 概览下看到任何活动。

我已经验证：

*   我可以在实时窗格中看到流量，确保基本功能
*   使用上述方法时，跟踪器对象非零
*   返回值`YES`用于上述方法（即它认为它在某个时间点成功排队发送）
*   我什至将`dispatch`调用`[GAI sharedInstance]`作为健全性检查来确保事件被刷新

我听说 2.0 SDK 的 b3/b4 版本在发送事件时遇到问题，但根本看不到任何事件似乎很不寻常。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T22:40:42.740

我遇到了同样的问题。

当我使用：

```
[[GAI sharedInstance].defaultTracker sendEventWithCategory:message
                                                withAction:nil
                                                 withLabel:nil
                                                 withValue:nil]; 
```

结果立即记录下来。

但是，当我使用：

```
[[GAI sharedInstance].defaultTracker send:message params:eventParams]; 
```

根本没有记录任何结果

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T14:25:40.333

Google Analytics 和 Mixpanel 是不同的工具，有不同的数据发送方式。

对于 Google Analytics，事件只有 4 个字段：

*   类别（字符串）
*   动作（字符串）
*   标签（字符串）
*   值（数）

同样，Pageviews 是另一种类型的点击，但它们只有一个字段，即页面 url。在移动应用程序上，它被重命名为查看，但它的工作方式几乎相同。

这些字段具有供参考的名称，但您实际上可以将它们用于任何您想要的。您将能够在界面中从一个向下钻取到另一个。

您还可以使用[自定义维度/指标](https://developers.google.com/analytics/devguides/collection/ios/v2/customdimsmets)“添加”更多字段。如果您在事件之前设置页面类型自定义维度，则该自定义维度/指标将绑定到事件。

请注意，了解和使用每个自定义维度的正确范围很重要。例如，如果您设置会话范围，您将在 GA 中看到的唯一值是该特定会话的最后一个设置，它会覆盖以前的值。您必须通过界面配置这些。

# php - Https 重定向块

> ID：15557758
> 
> 赞同：0
> 
> 时间：2013-03-21T20:47:26.410
> 
> 标签：php, redirect, https, block

我有一个重定向到外部 https 页面的 php 脚本，但不幸的是，firefox（可能还有其他浏览器尚未尝试）阻止 https 重定向，并为最缺乏经验的用户提供一个非常“可怕”的消息。

有没有办法绕过这个问题而不要求用户处理他们的浏览器偏好？

对于重定向，我使用了一个简单的`header ("Location: $url");`

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T21:00:42.983

简而言之，没有。

如果用户将他们的 Firefox 首选项设置为在重定向发生时显示警告，那么您将无法绕过它。

您可以通过显示一个用户可以手动单击链接的插页式页面来避免这种情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-27T14:29:27.223

```
RewriteCond %{HTTPS} off
RewriteRule ^(.*)$ https://%{HTTP_HOST}%{REQUEST_URI} [L,R=301] 
```

# html - 将 html 图形宽度设置为与其包含的图像宽度相同

> ID：15557769
> 
> 赞同：4
> 
> 时间：2013-03-21T20:47:55.397
> 
> 标签：html, css, image

当图形标签内有图像时，图形宽度为 100%。如何使图形始终与图像具有相同的宽度？这是我当前的代码：

HTML：

```
<figure>
    <img src="http://www.google.com/images/srpr/logo3w.png" alt="" />
</figure> 
```

CSS：

```
* {
    margin: 0;
    padding: 0;
}

figure {
    border: 1px solid red;
}

img {
    border: 1px solid blue;
    vertical-align: top;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-21T20:50:22.310

像这样添加`display:table`到`figure`css

```
figure 
{
    display:table;
    border: 1px solid red;
} 
```

[JS 小提琴演示](http://jsfiddle.net/XLQuF/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T20:51:08.147

事件虽然您没有要求任何 JS 解决方案。这是我为您的问题提供的解决方案。

在图像加载时改变图形的宽度和高度

假设 figure 是 img 的父级

```
 $(document).ready(function(){
         $("img").load(function(){

              $(this).parent().width( $(this).width());

           });   
    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T20:53:25.003

您也可以使用 jquery 来执行此操作，即使它有点 hack：

```
var imgWidth = $("figure img").width();
     $("figure").width(imgWidth); 
```

如果由于某种原因 display: table 在您的 css 堆栈中不适合您，或者您需要该元素是不同的显示类型，这是一个修复。

# python - rpy2 / R问题通过Python的黄土函数？

> ID：15557770
> 
> 赞同：2
> 
> 时间：2013-03-21T20:48:03.740
> 
> 标签：python, r, statistics, pandas, rpy2

我正在尝试`loess`通过 Python 中的 Rpy2 在此数据文件上调用 R 函数：http: [//filebin.ca/azuz9Piv0z8/test.data](http://filebin.ca/azuz9Piv0z8/test.data)

当我使用数据的一个子集（前 1000 个点）时它可以工作，但是当我尝试使用整个文件时，我得到一个错误。我的代码：

```
import pandas
from rpy2.robjects import r
import rpy2.robjects as robjects
data = pandas.read_table(os.path.expanduser("~/test2.data"), sep="\t").values
small_data = data[0:1000, :]
print "small data loess:"
a, b = robjects.FloatVector(list(small_data[:, 0])), \
       robjects.FloatVector(list(small_data[:, 1]))
df = robjects.DataFrame({"a": a, "b": b})
loess_fit = r.loess("b ~ a", data=df)
print loess_fit

print "large data loess:"
a, b = robjects.FloatVector(list(data[:, 0])), \
       robjects.FloatVector(list(data[:, 1]))
df = robjects.DataFrame({"a": a, "b": b})
loess_fit = r.loess("b ~ a", data=df)
print loess_fit 
```

适合`small_data`工作但不是`data`。我得到错误：

```
Error in simpleLoess(y, x, w, span, degree, parametric, drop.square, normalize,  : 
  NA/NaN/Inf in foreign function call (arg 1)
    loess_fit = r.loess("b ~ a", data=df)
  File "/usr/local/lib/python2.7/dist-packages/rpy2-2.3.3-py2.7-linux-x86_64.egg/rpy2/robjects/functions.py", line 86, in __call__
    return super(SignatureTranslatedFunction, self).__call__(*args, **kwargs)
  File "/usr/local/lib/python2.7/dist-packages/rpy2-2.3.3-py2.7-linux-x86_64.egg/rpy2/robjects/functions.py", line 35, in __call__
    res = super(Function, self).__call__(*new_args, **new_kwargs)
rpy2.rinterface.RRuntimeError: Error in simpleLoess(y, x, w, span, degree, parametric, drop.square, normalize,  : 
  NA/NaN/Inf in foreign function call (arg 1) 
```

如何解决这个问题？我不确定这是R函数`loess`还是Rpy2接口的问题？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T20:58:15.940

问题是`-Inf`数据中的值：

```
DF <- read.table('http://filebin.ca/azuz9Piv0z8/test.data')
DF[!is.finite(DF[,1]) | !is.finite(DF[,2]),]
#        V1   V2
# 5952 -Inf -Inf 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-10T16:22:03.553

[当您可以使用Python 中的 statsmodels 包进行低平滑处理](http://statsmodels.sourceforge.net/devel/generated/statsmodels.nonparametric.smoothers_lowess.lowess.html)时，为什么要调用 R ？

还有一个用于 lowess 的 Bio.Statistics 包，但它似乎不那么准确，对于[这个 lowess 示例](http://www.itl.nist.gov/div898/handbook/pmd/section1/dep/dep144.htm)，我无法让它收敛。

# c - 信号量并发

> ID：15557773
> 
> 赞同：1
> 
> 时间：2013-03-21T20:48:10.500
> 
> 标签：c, linux, concurrency, synchronization, semaphore

在下面的代码中，不会在孩子中创建互斥锁作为其父级的副本吗？因此，现在有两个互斥锁副本——一个在子级，一个在父级。怎样才能同步？据我所知，您需要一个由多个进程共享的副本才能使其同步。

```
 #include <semaphore.h>
  #include <stdio.h>
  #include <errno.h>
  #include <stdlib.h>
  #include <unistd.h>
  #include <sys/types.h>
  #include <sys/stat.h>
  #include <fcntl.h>
  #include <sys/mman.h>

  int main(int argc, char **argv)
  {
    int fd, i,count=0,nloop=10,zero=0,*ptr;
    sem_t mutex;

    //open a file and map it into memory

    fd = open("log.txt",O_RDWR|O_CREAT,S_IRWXU);
    write(fd,&zero,sizeof(int));

    ptr = mmap(NULL,sizeof(int), PROT_READ|PROT_WRITE,MAP_SHARED,fd,0);

    close(fd);

    /* create, initialize semaphore */
    if( sem_init(&mutex,1,1) < 0)
      {
        perror("semaphore initilization");
        exit(0);
      }
    if (fork() == 0) { /* child process*/
      for (i = 0; i < nloop; i++) {
        sem_wait(&mutex);
        printf("child: %d\n", (*ptr)++);
        sem_post(&mutex);
      }
      exit(0);
    }
    /* back to parent process */
    for (i = 0; i < nloop; i++) {
      sem_wait(&mutex);
      printf("parent: %d\n", (*ptr)++);
      sem_post(&mutex);
    }
    exit(0);
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T20:56:56.380

不得将 a`mutex`与 a混淆`semaphore`。A`semaphore`可能允许多个线程/进程访问资源，a`mutex`只允许**一个**并发访问资源。
如此处所述[，](https://stackoverflow.com/questions/7325423/how-to-synchronize-processes-through-a-static-library-on-linux)您需要创建一个`named semaphore`以使跨进程同步成为可能。`semaphore`您必须在父进程中创建一个并且`sem_open`在子进程中使用访问以实现同步。

# javascript - 更改请求标头的 Javascript：accept-language 参数

> ID：15557774
> 
> 赞同：0
> 
> 时间：2013-03-21T20:48:13.930
> 
> 标签：javascript, ruby-on-rails, ajax, request-headers

我有一个按名称返回地点列表的 AJAX 调用。我希望这些名称严格使用英文，但 API 以请求标头的接受语言参数的语言返回名称。一些用户将浏览器的默认语言设置为英语以外的语言。

我对此不熟悉，所以我想知道是否可以（在 javascript 或 ruby​​ 中）更改请求标头的接受语言参数，使其始终为英语？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T20:51:49.097

是的，有可能。

```
xhr.setRequestHeader("Accept-Language", "en-US,fr-CA"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T21:01:51.583

```
xhr.setRequestHeader('Accept-Language','en-US') 
```

# bash - Cron 作业没有获得在 .bashrc 中设置的环境变量

> ID：15557777
> 
> 赞同：31
> 
> 时间：2013-03-21T20:48:19.300
> 
> 标签：bash, cron, environment-variables

这是我的 cron 工作：

```
plee@dragon:~$ crontab -l
* * * * * /bin/bash -l -c 'source ~/.bashrc; echo $EDITOR > /tmp/cronjob.test' 
```

和里面的`~/.bashrc`文件，我有`export EDITOR=vim`，但在最终的`/tmp/cronjob.test`文件中，它仍然是空的？

那么如何获取环境变量（在`.bashrc`文件中设置）并在我的 cron 作业中使用它？

```
plee@dragon:~$ lsb_release -a
No LSB modules are available.
Distributor ID: Ubuntu
Description:    Ubuntu 12.04 LTS
Release:        12.04
Codename:       precise
plee@dragon:~$ uname -a
Linux dragon 3.2.0-26-generic-pae #41-Ubuntu SMP Thu Jun 14 16:45:14 UTC 2012 i686 i686 i386 GNU/Linux 
```

如果使用这个：

```
* * * * * /bin/bash -l -c -x 'source ~/.bashrc; echo $EDITOR > /tmp/cronjob.test' 2> /tmp/cron.debug.res 
```

在`/tmp/cron.debug.res`：

```
...
++ return 0
+ source /home/plee/.bashrc
++ '[' -z '' ']'
++ return
+ echo 
```

顺便说一句，该`.bashrc`文件是 Ubuntu 12.04 附带的默认文件，除了我添加了一行`export EDITOR=vim`.

如果我不使用 cron 作业，则直接在命令行上执行此操作：

```
source .bashrc; echo $EDITOR # Output: vim 
```

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2013-03-22T15:27:47.483

`source ~/.bashrc`不工作的原因是你的内容`~/.bashrc`（默认来自 Ubuntu 12.04）。如果您查看它，您将在第 5 行和第 6 行看到以下内容：

```
# If not running interactively, don't do anything
[ -z "$PS1" ] && return 
```

`PS1`变量是为交互式 shell 设置的，因此在运行时它不存在 via `cron`，即使您将其作为登录 shell 执行。由以下文件生成的文件内容证实了这一点`/bin/bash -l -c -x 'source ~/.bashrc; echo $EDITOR > /tmp/cronjob.test'`：

```
+ source /home/plee/.bashrc
++ '[' -z '' ']'
++ return 
```

要进行`source ~/.bashrc`工作，请注释掉检查`PS1`变量是否存在的行`~/.bashrc`：

```
#[ -z "$PS1" ] && return 
```

这将`bash`执行`~/.bashrc`via的全部内容`cron`

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-12-08T10:28:56.543

@alex 提供的答案是正确的，但在 Ubuntu 13.10 中，代码已稍作修改。没有 $PS1 变量，但在第 6-9 行有一个代码

```
case $- in 
   *i*) ;;       
   *) return;; 
esac 
```

只需注释掉返回工作的行。即下面的代码有效

```
case $- in 
   *i*) ;;       
#   *) return;; 
esac 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T21:52:53.330

我刚刚尝试了一个`.env_setup_rc`只有一行的文件文件`export EDITOR=vim`，令人惊讶的是它正在工作。

所以我猜这`.bashrc`与 cron job bash 命令有冲突。

# rdf - 如何获取链接到耶拿资源的资源列表？

> ID：15557778
> 
> 赞同：1
> 
> 时间：2013-03-21T20:48:41.327
> 
> 标签：rdf, jena

我使用 Jena API 创建了一个模型：

```
public static void main(String[] args) {
    Model model = ModelFactory.createDefaultModel();

    Resource alice = ResourceFactory.createResource("http://example.org/alice");

    Resource bob = ResourceFactory.createResource("http://example.org/bob");

    Resource charlie = ResourceFactory.createResource("http://example.org/charlie");

    model.add (alice, RDF.type, FOAF.Person);
    model.add (alice, FOAF.name, "Alice");
    model.add (alice, FOAF.mbox, ResourceFactory.createResource("mailto:alice@example.org"));
    model.add (alice, FOAF.knows, bob);
    model.add (alice, FOAF.knows, charlie);

    model.write(System.out, "RDF/XML-ABBREV");
} 
```

该程序的输出是：

```
<rdf:RDF xmlns:rdf="w3.org/1999/02/22-rdf-syntax-ns#"
         xmlns:j.0="xmlns.com/foaf/0.1/">
    <j.0:Person rdf:about="example.org/alice">
        <j.0:knows rdf:resource="example.org/charlie"/>
        <j.0:knows rdf:resource="example.org/bob"/>
        <j.0:mbox rdf:resource="mailto:alice@example.org"/>
        <j.0:name>Alice</j.0:name>
    </j.0:Person>
</rdf:RDF> 
```

现在如何获取链接到某个资源的资源列表？

例如：Alice 认识 Bob 和 Charlie。Alice、Bob 和 Charlie 是资源，资源 Alice 知道其他两个资源。现在如何获得名字 [Bob, Charlie]？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T23:45:27.633

Jena 的 Java API 文档显示[有一种方法](http://jena.apache.org/documentation/javadoc/jena/com/hp/hpl/jena/rdf/model/Model.html#listObjectsOfProperty%28com.hp.hpl.jena.rdf.model.Resource,%20com.hp.hpl.jena.rdf.model.Property%29)可以做到这一点：

```
NodeIterator listObjectsOfProperty(Resource s, Property p) 
```

这应该适用于您的示例：

```
NodeIterator friends = model.listObjectsOfProperty(alice, FOAF.knows); 
```

然后，您可以迭代`friends`与每个朋友（或熟人）一起做某事。

# c# - 如果异步服务器 socket.BeginAccept() 为每个分配新端口的客户端套接字启动一个新线程，我的客户端套接字如何知道该端口？

> ID：15557781
> 
> 赞同：2
> 
> 时间：2013-03-21T20:48:46.773
> 
> 标签：c#, .net

我正在阅读这个微软异步服务器服务器套接字示例[http://msdn.microsoft.com/en-gb/library/fx6588te.aspx?cs-save-lang=1&cs-lang=csharp#code-snippet-1](http://msdn.microsoft.com/en-gb/library/fx6588te.aspx?cs-save-lang=1&cs-lang=csharp#code-snippet-1)

```
 // Bind the listener socket object to the local endpoint and
        // listen for incoming connections.
        try {
            listener.Bind(localEndPoint); 
            listener.Listen(100);

        while (true) {
            // Set the event to nonsignaled state.
            allDone.Reset(); //allDone is a ManualResetEvent

            // Start an asynchronous socket to listen for connections.
            Console.WriteLine("Waiting for a connection...");
            listener.BeginAccept( 
                new AsyncCallback(AcceptCallback),
                listener );

            // Wait until a connection is made before continuing.
            allDone.WaitOne();
        } 
```

**问题一：**

当新的客户端套接字加入我的服务器套接字时，服务器为每个客户端启动一个新线程，据我所知，每个服务器线程都有**自己的端口号。**如果是这样，我的新客户端如何知道要连接到哪个端口？服务器的 IP 地址相同，但每个新客户端的端口必须更改。然而微软代码在他们各自的异步客户端示例中没有做这样的事情（在上面页面的底部）

**问题2：**

如果我不使用最后一行，即 allDone.WaitOne(); 怎么办？当创建新线程以侦听新客户端时，它会创建一个疯狂的无限循环吗？

感谢您抽出宝贵的时间，如果您能在答案中详细说明一下，我将非常感激，因为同一件事用不同的词说了两次真的很好:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T20:54:07.763

创建新连接的事实对您的客户端是透明的 - 他们只需在调用 Connect 时获得连接。

# java - Effective java Item no 74（关于序列化）：明智地实现Serializable

> ID：15557783
> 
> 赞同：5
> 
> 时间：2013-03-21T20:49:02.670
> 
> 标签：java, effective-java

在有效的 Java 书籍的第 74 项中有一段（第 74 项最后的第 2 段），其中提到如下：

> 内部类（Item 22）不应该实现 Serializable。他们使用编译器生成的合成字段来存储对封闭实例的引用并**存储封闭范围内的局部变量的值。这些字段如何对应于类定义是未指定的，匿名类和本地类的名​​称也是如此。** 因此，内部类的默认序列化形式定义不明确。

我知道内部类使用编译器生成的合成字段来存储对封闭实例的引用，例如，如果封闭类是 MyEnclosure 并且内部类是 MyInner，那么封闭引用是 MyEnclosure.this。但我无法获得**BOLD**部分。请帮我理解意思。谢谢！！！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-21T20:58:01.370

假设你有一个像这样的本地类：

```
 class OuterClass {
    Runnable run;

    void method() {
       final int a = 8;
       this.run = new Runnable() {
          public void run() {
             System.out.println(a);
          }
       };
    }
 } 
```

现在假设我尝试序列化`this`，其中包含此内部类类型的对象。我的编译器命名该类`OuterClass$1`并给它一个名为`val$a`. 但是在这种情况下使用的确切名称不是编译器规范的一部分。另一个编译器可能会选择调用内部类`OuterClass$method$1`。在这种情况下，即使使用相同的源文件，在一个编译版本中序列化并在另一个版本中反序列化都会失败。

（另外，还有匿名内部类没有无参数构造函数的问题。但是由于上面的问题，即使是命名的内部类也不能可靠地序列化）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T21:02:27.977

考虑以下代码：

```
public class Main {
    public static void main(String[] args) {
        final int x = Integer.valueOf(args[0]);
        new Object() {
            void print() {
                System.out.println(x);
            }
        }.print();
    }
} 
```

我的编译器调用匿名内部类`Main$1`。当我反汇编它时，我看到`x`外部范围的值的副本存储在一个名为的私有字段中`val$x`：

```
private final int val$x; 
```

这是**粗体**部分所说的一个例子。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T02:56:05.757

内部类是在其他类中定义的非静态类：

```
class Outer implements Serializable {
    private String someString;

    class Inner implements Serializable {
        private int someInt;
    }

} 
```

一旦你有一个`Inner`类的实例，当你序列化它时，它必须有一个对外部类的引用（它通过`Outer.this`引用在内部访问它），并且未指定如何为序列化对象实现这一点。这同样适用于本地类：

```
class Outer implements Serializable {
    private String someString;

    Serializable method(final int i) {
        class Inner implements Serializable {
            Inner() {
                System.out.println(i);
            }
        }
        return new Inner();
    }
} 
```

如果你序列化返回的值`method()`，它需要有一个对 的引用`i`，但这并不可靠。

# php - 获取一组项目的最佳方法，如果它们匹配，则设置一个变量

> ID：15557784
> 
> 赞同：0
> 
> 时间：2013-03-21T20:49:06.177
> 
> 标签：php, arrays, laravel

我正在拨打数据库电话并获取订单的所有服务。如果有与订单相关的特定服务，我需要设置一个变量。这就是我目前正在做的事情，它不会起作用，因为一旦我设置了一个变量，下一个项目就会出现并挤压它。它会覆盖之前服务项的正确值。

```
$services = OrderService::where('order_id','=',$payload['orderId'])->get(['service_id']);
foreach($services as $service){
    //Screen
    if($service->service_id == 4){ $responseArray['lnpScreen'] = '1';}
    else{ $responseArray['lnpScreen'] = '0'; }
    //Screen 2
    if($service->service_id == 5){ $responseArray['tfpScreen'] = '1';}
    else{ $responseArray['tfpScreen'] = '0'; }
    //Screen 3
    if($service->service_id == 6){ $responseArray['didScreen'] = '1';}
    else{ $responseArray['didScreen'] = '0'; }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T20:53:14.433

这应该工作：

```
$responseArray['lnpScreen'] = '0';
$responseArray['tfpScreen'] = '0';
$responseArray['didScreen'] = '0';
foreach($services as $service){
    //Screen
    if($service->service_id == 4){ $responseArray['lnpScreen'] = '1';}
    //Screen 2
    if($service->service_id == 5){ $responseArray['tfpScreen'] = '1';}
    //Screen 3
    if($service->service_id == 6){ $responseArray['didScreen'] = '1';}
} 
```

现在他们不会再覆盖彼此了。

或如 powtac 所述：

```
$responseArray['lnpScreen'] = '0';
$responseArray['tfpScreen'] = '0';
$responseArray['didScreen'] = '0';
foreach($services as $service){
    switch($service->service_id){
        case 4://Screen
          $responseArray['lnpScreen'] = '1';
          break;
        case 5://Screen 2
          $responseArray['tfpScreen'] = '1';
          break;
        case 6://Screen 3
          $responseArray['didScreen'] = '1';
          break;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T20:52:21.090

您正在覆盖，因为`$responseArray`每次循环时都使用相同的内容。您需要使用多维数组来跟踪每个服务。这样的事情可能会让你开始：

```
$services = OrderService::where('order_id','=',$payload['orderId'])->get(['service_id']);
$count = 0;
foreach($services as $service){
    //Screen
    if($service->service_id == 4){ $responseArray[$count]['lnpScreen'] = '1';}
    else{ $responseArray[$count]['lnpScreen'] = '0'; }
    //Screen 2
    if($service->service_id == 5){ $responseArray[$count]['tfpScreen'] = '1';}
    else{ $responseArray[$count]['tfpScreen'] = '0'; }
    //Screen 3
    if($service->service_id == 6){ $responseArray[$count]['didScreen'] = '1';}
    else{ $responseArray[$count]['didScreen'] = '0'; }
    $count++;
} 
```

# ios - 在 iOS 上激活 Unity 按钮单击

> ID：15557785
> 
> 赞同：3
> 
> 时间：2013-03-21T20:49:08.557
> 
> 标签：ios, objective-c, unity3d

我有一个 iOS 应用程序，具有不同的视图，我想通过单击按钮打开一个 Unity 项目。这将是应用程序的增强现实部分，因此它使用了用于 Unity 的 qualcomm 插件。我尽可能地遵循指南[http://alexanderwong.me/post/29949258838/building-a-ios-unity-uiview-uiviewcontroller ，但有一些问题](http://alexanderwong.me/post/29949258838/building-a-ios-unity-uiview-uiviewcontroller)

1.  理想情况下，我想在触摸按钮时加载 Unity，而不是在 AppStart 上，我有在触摸按钮时获取调用的方法，但老实说不知道应该去哪里 `UnityPause: NO` ？

2.  如果无法在单击按钮时加载 Unity，则应在*应用程序上加载它： didFinishLaunchingWithOptions:*，并且如指南中所述，我从 AppDelegate 调用 AppController 窗口。

    ```
    - (BOOL)application:(UIApplication*)application didFinishLaunchingWithOptions:                     (NSDictionary*)launchOptions
    {
    //unity
    BOOL returnBOOL;
    if (_unityController == nil) {
        _unityController = [[AppController alloc] init];
    }
    returnBOOL = [_unityController application:application     didFinishLaunchingWithOptions:launchOptions];

    //other app-loading things here...
    CGRect screenBounds = [[UIScreen mainScreen] bounds];

    self.window = [[UIWindow alloc] initWithFrame:screenBounds];
    self.window.autoresizesSubviews = YES;
    NSLog(@"Will start loading Unity window");

    // unity, set window
    window = [_unityController window];  //App crashes here

    // navigation controller
    [window addSubview:navigationController.view];

    self.viewController = [[MainViewController alloc] init];
    self.viewController.useSplashScreen = YES;

    self.window.rootViewController = self.viewController;
    [self.window makeKeyAndVisible];

    //more loading things....

    return returnBOOL;
    } 
    ```

然后在 AppController.mm 我有：

```
- (UIWindow *)window
{
return _window; 
} 
```

这给我一个编译器错误“使用未声明的标识符 _window”，好吧，我明白这是错误的，他不知道 _window 来自哪里......但我不知道它*应该*来自哪里......我不知道'真的不知道如何解决这个问题。

最后，出于性能原因，如果我只能在单击按钮时加载 Unity，那么应该在那里调用什么？（Unity加载时间很长，我不确定是在AppStart加载还是在Button Click加载更好，（如果单击按钮会不会看起来很奇怪，并且打开相机需要很长时间？ ).. 任何帮助将不胜感激！

谢谢！:)

# java - Java多层自上而下游戏在服务器端存储数据的最佳方式

> ID：15557786
> 
> 赞同：1
> 
> 时间：2013-03-21T20:49:10.803
> 
> 标签：java, multiplayer, 2d-games

我和一些朋友正在用 Java 制作一个自上而下的射击游戏，并希望让它在线，我们已经建立了一个工作正常的 UDP 套接字连接，但我们不确定如何存储从客户端接收到的数据。

目前我们正在使用许多哈希图来存储数据，例如我们有三个哈希图用于玩家跟踪、游戏信息（玩家数量等）和子弹（子弹位置、谁开火等）。

但我确信除了哈希图之外，必须有一种更好更安全的方式来存储这些数据，但不确定是什么。

*编辑*thx- Philipp （对不起，一个半体面的问题花了这么长时间）

我对使用哈希图存储这些数据的担忧是，有很多数据要放入其中，我们目前使用单行来存储对象的所有数据，例如播放器哈希图中的一行将有播放器id 作为键，带有一个字符串值来存储任何其他内容，例如“hp,xloc,yloc”。然后我们拆分使用。我似乎认为这是存储和检索数据的最有效方式。

对不起，如果这仍然没有意义。

我想我真正的问题是有没有更有效的替代方案，或者哈希图是否是最好的方法？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T21:30:10.170

正如您自己发现的那样，将游戏中每个实体的数据存储在字符串中并不是一个好主意。

每当您需要有关它的一些信息时，您都必须解析字符串，并且字符串解析不是很快，并且当有关每个实体的数据变得更加复杂时，很容易变得非常复杂。

更好的方法是使用一组类变量为每个实体类型创建一个类，并使用它来存储有关每个实体的数据：

```
class Player {
    public: 
         int positionX;
         int positionY;
         int lifes;
         String name;
         //...
} 
```

（顺便说一句：有经验的面向对象程序员会将这些变量声明为私有变量，并使用 getter 和 setter 方法来更改它们，但现在我们不要走得太远）

然后，您的哈希映射将存储此类的实例：

```
 HashMap<Integer, Player> players; 
```

设置这些很容易：

```
 Player p = new Player();
 p.positionX = 200;
 p.positionY = 400;
 p.lifes = 3;
 p.name = "Ford Prefect";
 players.put(42, p); 
```

（顺便说一句：有经验的 OOP 程序员会使用构造函数）

您可以通过访问哈希映射来设置和获取每个玩家的变量：

```
 players.get(42).positionX += 10; // move player 42 10 pixels to the right 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T21:38:38.557

内存*很好*。除非您需要持久化数据，*否则不要担心*。

但是，“我们然后拆分使用”*并不好*。这是一个微“优化”，实际上会更慢/效率更低：这条路线只有痛苦和浪费的时间。

我不知道您的特定设置，但请考虑一下：

```
class Player {
   public Player (int playerId) {
      this.playerId = playerId;
   }

   // ID during game - not permanent; for link-back to Hash key
   public final int playerId;

   // Add methods and fields as appropriate
   String name;
   int health;
   // position, armour color, fairy dust, etc.
}

// How ids are "connected" to players:
//   playerId -> Player
Map<Integer,Player> players = new HashMap..;

// When a player "connects"
int playerId = getUniqueIdForGameInstance();
Player player = new Player(playerId); // setup other information as required
players.add(player.playerId, player);

// On attack ..
int attackerId = getAttackerFromClient();
int targetId = getTargetFromClient();

Player attacker = players.get(attackerId);
Player target = players.get(targetId);
target.getWumped(attacker.wumpStength()); 
```

这同样适用于游戏中的其他实体。请注意，地图用于能够*找到*给定特定 ID 的玩家，但 Player 类的实例包含有关玩家的信息。

查看[ProtocolBuffers](https://developers.google.com/protocol-buffers/)以进行跨网络的序列化。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T21:26:21.827

Hashmap 是一个不错的解决方案——它们是线程安全的，因此假设您没有 10,000 个用户同时访问您的网站，它们应该适合您。

但是，目前您的所有数据都存储在内存中。如果程序终止，这是一个问题。

我可以给出的最简单的建议是将您的 HashMaps 写入文件。这是在 Java 中通过将`Serializable`接口添加到您的类声明来完成的 - 但是您不需要为 HashMap 执行此操作，因为它已经是可序列化的。（您只需对您编写的存储在 HashMap 中的类执行此操作。）

然后只需将以下内容添加到您的 main() 方法（从文件中读取）：

```
try {
  FileInputStream fis = new FileInputStream("Game.sav");
  ObjectInputStream ois = new ObjectInputStream(fis);
  HashMap<K,V> loadedGame = (HashMap<K,V>) ois.readObject();
} catch (Exception e) {
       // Create new hash maps (no HashMap files found)
} 
```

这是一个可以由您自行决定调用的 saveGame() 方法

```
try {
  FileOutputStream fos = new FileOutputStream("Game.sav");
  ObjectOutputStream oos = new ObjectOutputStream(fos);
  o.writeObject(hashmapGameVariable);
  o.close();
} catch (IOException ioe) {
  ioe.printStackTrace(); // something went wrong, you may not have write premissions
} 
```

# c# - 不同的列表 字符数

> ID：15557787
> 
> 赞同：2
> 
> 时间：2013-03-21T20:49:17.747
> 
> 标签：c#, linq, list, distinct

我有这个：

```
List<string> list = new List<string>();
list.Add("a-b-c>d");
list.Add("b>c");
list.Add("f>e");
list.Add("f>e-h");
list.Add("a-d>c-b"); 
```

我想删除重复项。在这种情况下，重复项是“abc>d”和“ad>cb”。两者都有相同的字符，但顺序不同。我试过：

```
list.Distinct().ToList(); 
```

但是没有用！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-21T20:56:17.557

看起来你想要：

```
var distinct = list
    .Select((str, idx) => new { Str = str, Idx = idx })
    .GroupBy(pair => new HashSet<char>(pair.Str), HashSet<char>.CreateSetComparer())
    .Select(grp => grp.OrderBy(p => p.Idx).First())
    .ToList(); 
```

这将保留第一个元素并删除序列中包含相同字符的任何后续字符串。

您还可以使用`Aggregate`来跟踪您已经看到的字符集：

```
var distinct = list
    .Aggregate(new Dictionary<HashSet<char>, string>(HashSet<char>.CreateSetComparer()), (dict, str) =>
    {
        var set = new HashSet<char>(str);
        if (!dict.ContainsKey(set))
            dict.Add(set, str);
        return dict;
    })
    .Values
    .ToList(); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-21T20:56:01.340

您必须定义一个自定义项`IEqualityComparer`，使系统能够理解您何时认为两个字符串“相等”。例如：

```
List<string> list = new List<string>();
list.Add("a-b-c>d");
list.Add("b>c-d-f");
list.Add("c-d-f>e");
list.Add("a-d>c-b");
var distinctItems = list.Distinct(new KeyFuncEqualityComparer<string>(
    s => new String(s.AsEnumerable().OrderBy(c => c).ToArray()))); 
```

结果：

```
a-b-c>d 
b>c-d-f 
c-d-f>e 
```

...使用这个通用的 IEqualityComparer 实现：

```
public class KeyFuncEqualityComparer<T> :IEqualityComparer<T>
{
    private readonly Func<T, object> _getKey;

    public KeyFuncEqualityComparer(Func<T, object> getKey)
    {
        _getKey = getKey;
    }

    public bool Equals(T x, T y)
    {
        return _getKey(x).Equals(_getKey(y));
    }

    public int GetHashCode(T obj)
    {
        return _getKey(obj).GetHashCode();
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T21:01:04.380

未经测试

```
 list<int> dups = new list<int>();
    for(int i = 0; i < list.count - 1; i++)
    {
         for(int j = 1; j < list.count; j++)
         {
                int len = list[j].length;
             bool b = false;
           for(int k = 0; k < list[i].length; k++)
            {
                if(k < len && (list[i][k] != list[j][k]))
               {
                b = false;
                break;
            }
         b = true;
     }
    if(b == true)
    {
    dups.add(i);
     }
    }
    } 
```

然后从列表中删除所有重复

# python - 序列的最后 n 个元素是否有 Python 习语？

> ID：15557790
> 
> 赞同：0
> 
> 时间：2013-03-21T20:49:25.803
> 
> 标签：python

例如，对于未知长度的序列，获取最后 n 个元素的最“Pythonic”方式是什么？

显然我可以计算开始和结束索引。有什么更光滑的吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-21T20:50:33.473

是的，通过使用负索引：

```
last_five = somesequence[-5:] 
```

切片中的负索引与序列长度相关。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T20:51:05.950

使用负索引。

`seq[-1]`是序列的最后一个元素。`seq[-3:]`给你最后三个。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T20:51:07.127

尝试：

```
sequence[-n:] 
```

（让 Stack Overflow 开心的文字）

# javascript - file.js.coffee.erb 未更新

> ID：15557792
> 
> 赞同：1
> 
> 时间：2013-03-21T20:49:41.137
> 
> 标签：javascript, ruby-on-rails, coffeescript

我有一些使用数据库数据的 Javascript（最初是 CoffeeScript）代码。我用 .erb 创建数据数组，然后用 .coffee 编写代码，最后使用 .js。相当标准的东西。问题是提供给浏览器的 javascript 被缓存并且永远不会刷新，即使在服务器重新启动或 assets:clean 之后也是如此。

要让 javascript 刷新，我必须删除 tmp 文件夹内容并启动服务器。

Q1。如何在每个请求上刷新 javascript？我尝试使用 Coffeebeans 内联代码以使用代码呈现文件，但代码显示为 html 编码。

Q2。这甚至适用于 Heroku 吗？（它只接受预编译的资产）

# knockout.js - Durandal/Knockout 模板绑定未插入

> ID：15557795
> 
> 赞同：5
> 
> 时间：2013-03-21T20:49:46.240
> 
> 标签：knockout.js, durandal

我目前正在尝试将表格行`<tr>`模板传播到`<tbody>`标签中。这是一个例子：

HTML：

```
<table>
    <tbody data-bind="template: { name : 'tableTemplate', foreach : tableRow }">
    </tbody>
</table>
<script type="text/html" id="tableTemplate">
    <tr>
        <!-- First Name -->
        <td data-bind="text: firstName"></td>
        <!-- Last Name -->
        <td data-bind="text: lastName"></td>
    </tr>                        
</script> 
```

杜兰达尔JS：

```
define(function(require) {
    var self = this;
    self.app = require('durandal/app');

    return {
       tableRow: ko.observableArray([
           { firstName: "DemoFirstName" , lastName: "ExampleLastName" },
           { firstName: "ExampleFirstName", lastName: "DemoLastName" }
       ]);

    //viewAttached and other non-applicable console log functions here
    };
}); 
```

HTML 中的所有内容都将正确地进行数据绑定，直到它到达表格；之后所有的数据绑定都失效了。

我对 Durandal 很陌生，我边走边学。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-28T19:43:37.730

I ran into the same problem, and I dug up the answer on the Durandal google group. I posted the results here on my question. **[KO cannot find template with ID](https://stackoverflow.com/questions/15689069/ko-cannot-find-template-with-id)**

Basically you can't use named/ID'd Knockout templates yet, they're not supported. Support may come soon, according to the Durandal devs on their newsgroup. The workaround is to use either inline, or Durandal's compose functionality.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-24T18:15:43.637

可能想尝试这个而不是模板方法：

```
<table>
  <tbody data-bind="foreach: tableRow">
    <tr>
      <!-- First Name -->
      <td data-bind="text: firstName"></td>
      <!-- Last Name -->
      <td data-bind="text: lastName"></td>
    </tr>                        
  </tbody>
</table> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-30T17:29:18.733

你应该试试`compose`. [文件在这里](http://durandaljs.com/documentation/Using-Composition.html)。`durandal`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-01T10:41:43.260

KO 模板似乎不适用于 Durandal - 改用 View Composition（Durandal 的创建者在此处发布关于它的帖子） - [https://github.com/BlueSpire/Durandal/pull/50](https://github.com/BlueSpire/Durandal/pull/50)

这里还有一些简介：[KO 找不到带有 ID 的模板](https://stackoverflow.com/questions/15689069/ko-cannot-find-template-with-id)

# sql-server - 设备上的媒体系列格式不正确。SQL Server 无法处理此媒体系列

> ID：15557796
> 
> 赞同：7
> 
> 时间：2013-03-21T20:49:56.307
> 
> 标签：sql-server, backup, database-backups, database-restore

我正在尝试在 SQL Server 中恢复 .BAK，但出现以下错误：

> 消息 3241，级别 16，状态 7，第 1 行设备“c:\glyn\JA.bak”上的媒体系列格式不正确。SQL Server 无法处理此媒体系列。消息 3013，级别 16，状态 1，第 1 行 RESTORE DATABASE 异常终止。

我曾尝试使用 2012、2008 甚至 2005 进行恢复，但没有任何效果，我使用了以下查询并通过 Tasks>> 备份但没有任何效果，这是我的 SQL：

```
RESTORE DATABASE JA FROM DISK='c:\glyn\JA.bak' 
```

有没有人有什么建议？我读过 bak 可能已损坏，它是由正在从事该项目的 DVD 上的另一位开发人员发送给我的。

# import - Stata：读入数据并指定var类型

> ID：15557798
> 
> 赞同：1
> 
> 时间：2013-03-21T20:50:01.770
> 
> 标签：import, stata, variable-types

我正在将一个包含很多变量（〜250）的数据集导入Stata，其中大部分需要作为字符串读入Stata，所以我在徘徊，如果不是写一个痛苦的长字典文件，我可以告诉Stata将所有变量读取为字符串，然后根据需要返回并将少数变量转换回数字。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T02:09:42.993

你当然可以试试。Stata 有一个`destring`旨在尽可能智能的命令，但您可能需要做的不仅仅是`destring, replace`.

# batch-file - 批处理对话框选择要运行批处理的目录？

> ID：15557801
> 
> 赞同：0
> 
> 时间：2013-03-21T20:50:09.410
> 
> 标签：batch-file, directory, directory-structure

有没有办法显示允许用户选择在哪个目录中运行批处理的对话框？（来自目录列表，也许是手动输入目录路径的选项？）

我想它看起来像：

```
echo Choose a directory to run script:
SET /P ANS=Directory 1, 2, 3, 4, <etc>
if /i {%ANS%}=={1} (goto :1)
if /i {%ANS%}=={2} (goto :2)
:: <etc>

:1
<code to designate directory to run in>
<code for operations>
:2
<etc> 
```

但我不确定如何指定目录。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T21:10:13.283

使用选择命令。用户可以输入一个数字，然后相应地设置 ERRORLEVEL 变量。有关更多详细信息，请参见[此处](http://www.robvanderwoude.com/choice.php)。

编辑：另请参阅[此](https://stackoverflow.com/questions/1515965/how-to-input-a-string-from-user-into-environment-variable-from-batch-file)问题以获取字符串提示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T05:33:13.630

这个片段应该很有魅力：

```
:start
set /p dir=Choose a directory: 
cls
if exist %dir% (cd %dir%) else echo Directory not found. & goto start 
```

或者，如果您想要一个可供选择的目录列表：

```
echo Option 1
echo Option 2
echo Etc...
choice /c 123
::Replace "{directory}" with a folder path.
if errorlevel 3 cd {directory}
if errorlevel 2 cd {directory}
if errorlevel 1 cd {directory} 
```

有无穷无尽的方式可供选择。

# database-design - 一对多关系。属性和实体？

> ID：15557805
> 
> 赞同：1
> 
> 时间：2013-03-21T20:50:20.143
> 
> 标签：database-design

我可能在这里误用了*属性*一词。

我正在为服务学习部门设计一个数据库。

我对一对多的关系感到困惑。
假设我们有一个从**一个 A**到**多个 B**的关系。
似乎存在一对多关系，例如上面的关系，您需要的关于**A**的唯一信息是它的名称，以及与之关联的实体列表。

我觉得我可能想多了，但我掌握了如何处理多对多关系而不是一对多关系的想法。对于如何处理这些情况，我将不胜感激。

* * *

## 例子

**第一个例子：** 一个独特的*班级*只有一个*学期*与之相关，但任何学期都提供许多班级。

在上面的例子中，我应该有一个关于课程的实体表并包含一个学期的列，还是我需要一个学期的实体表并列出每个学期提供的课程？

**另一个例子：** 每个*教授*是一个*部门*的一部分，每个部门都与许多教授相关联。

所以我没有在教授实体表中包括系，而是计划制作一个表来显示哪些教授在哪些系中。
但在我的任何阅读中，我都没有看到过这样的情况。

我希望专家或任何非新手都能清楚我的困惑。任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T20:58:29.347

关于您的班级和学期问题，您可能正在寻找交叉引用或映射表。（我也可能没有使用正确的术语！）

但是假设你有三个表：

```
SEMESTER
---------
ID (int)
Year (int)
Session (nvarchar)  -- values like 01, 02, 03 or Spring, Fall, etc.

CLASS
--------
ID (int)
Name (nvarchar)
Details (nvarchar)
...

SEMESTERCLASS
-------------
ID (int)
SemesterID (int)
ClassID (int) 
```

所以 SemesterClass 表将 Semester 映射到 Class。这样，您的独特课程可以成为多个学期的一部分，并且一个学期可以有多个课程。

希望这是您正在寻找的。希望这会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T21:05:44.127

多对多关系与连接到一个“链接表”的两个一对多关系相同（大卫示例中的学期课程）。当您创建多对多关系时，许多数据库软件（例如 Oracle）会为您创建“链接表”（它们通常具有难看的名称！）

# jar - 在 Java 中重新打包库 JAR

> ID：15557807
> 
> 赞同：4
> 
> 时间：2013-03-21T20:50:23.027
> 
> 标签：jar, licensing, packaging, java

我一直在将第 3 方库 JAR 提取到我的开源 Java 库中，以便依赖项在运行时工作。

我记得当我不久前在 Eclipse 中尝试这样做（不同的项目）时，它会在执行此操作之前产生一个检查许可的警告。

关于何时可以将库内容重新打包到 JAR 中、应该如何完成以及哪些广泛使用的许可证禁止这样做的一般规则到底是什么？

具体来说，我正在重新打包的库使用 BSD 和 LGPL。

在此先感谢您的帮助。

**编辑**

正如几位评论者所建议的那样，我实际上最终分离了依赖项以防止代码冲突。再次感谢您提供的建议和信息。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-21T21:20:48.193

我个人所做的是确保我使用的任何库都没有明确禁止重新分发。如果他们这样做了，那你就不走运了。BSD 和 LGPL 都没有，所以你应该没问题。我想不出一个理智的开源许可证。

一旦您对重新打包和分发许可条款感到满意，您就需要确保在其他方面尊重它们。我发现以下步骤足以满足 99.99% 的开源许可证：

*   `license.txt`在您的 JAR 文件的根目录下创建一个文件（有些人将其放入`META-INF`，但我不知道对此没有任何规则或约定，并认为这只是一个偏好问题）。
*   列出您导入的所有外部库以及它们在`license.txt`.
*   写出所有适用于`license.txt`.
*   理想情况下，链接到每个图书馆的网站、下载页面和许可页面（如果有）。

这应该确保您不会违反任何主流许可证，但 GPL 除外。我不是律师，也不是 GPL 方面的专家，我给你的任何关于如何尊重 GPL 的建议最终都可能完全错误，所以我不想让你误入歧途。

您还可以做一些其他事情，但更多的是出于职业礼貌：

*   如果您正在编写面向用户的应用程序（Web 服务、UI 应用程序...），请链接到您在该`About`部分中使用的库。
*   让库的维护者知道您正在使用并打包它——一些作者喜欢使用他们的工具维护流行软件的列表。

虽然这听起来像是很多工作，但它比编写和维护实际的库要少得多。

编辑：我刚刚意识到您正在开发一个*库*，而不是一个应用程序。我的回答实际上并不适用于这种情况：将依赖项打包到库的 JAR 中是非常糟糕的形式。如果有的话，它会使第三方开发人员更难将您的库与现有的构建工具和依赖管理系统（maven、ant / ivy...）集成。

如果您想保持简单，只需将所有依赖项的 JAR 包含在`/lib`分发文件的文件夹中即可。

重申我的观点：我相信通过将依赖项打包**在**库的 JAR 文件中而不是**与**它一起，您会疏远大多数开发人员。如果问题没有得到解决，我当然会提交错误报告并寻找替代方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T21:09:32.550

使用 maven 很容易实现。将您的项目转换为 maven 项目，这将使您的生活更轻松，并使用[maven-assembly-plugin](http://maven.apache.org/plugins/maven-assembly-plugin/descriptor-refs.html#jar-with-dependencies)和 descriptorRefs 作为 jar-with-dependencies（预定义的程序集结构）。如果你喜欢，你可以创建自己的，这样 maven 会随心所欲地打包你的代码。

maven-assembly-plugin 配置示例：

```
<project>
  [...]
  <build>
    [...]
    <plugins>
      <plugin>
        <artifactId>maven-assembly-plugin</artifactId>
        <version>2.4</version>
        <configuration>
          <descriptorRefs>
            <descriptorRef>jar-with-dependencies</descriptorRef>
          </descriptorRefs>
        </configuration>
        <executions>
          <execution>
            <id>make-assembly</id> <!-- this is used for inheritance merges -->
            <phase>package</phase> <!-- bind to the packaging phase -->
            <goals>
              <goal>single</goal>
            </goals>
          </execution>
        </executions>
      </plugin>
      [...]
</project> 
```

# java - 使用 Deployer 调用 JMX 获得 InstanceNotFoundException

> ID：15557811
> 
> 赞同：0
> 
> 时间：2013-03-21T20:50:40.793
> 
> 标签：java, jmx

我们有一个 JMX 应用程序，我们在其中打开连接，然后`Catalina:type=Deployer,host=[hostname]`在方法调用中使用对象名称（以检查应用程序是否已部署）但我们得到一个异常 (InstanceNotFoundException)。这可能是什么原因？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T20:56:45.950

如果不查看更多代码或上下文，很难在这里提供帮助。但是，如果您查看支持大多数 JMX 客户端的[javadocs`MBeanServerConnection`](http://docs.oracle.com/javase/6/docs/api/javax/management/MBeanServerConnection.html)`InstanceNotFoundException` ，您会发现这意味着：

> InstanceNotFoundException 指定的 MBean 未在 MBean 服务器中注册。

这意味着`ObjectName`您指定的 bean 名称与您连接到的 JMX 服务器注册的 bean 名称不匹配。

`ObjectName`使用的必须与服务器注册的*完全匹配。*应该使用以下调用返回相同的名称：

```
Set<ObjectName> names = mBeanServerConnection.queryNames(null, null); 
```

# php - 提交php表单前的条件

> ID：15557812
> 
> 赞同：0
> 
> 时间：2013-03-21T20:50:42.080
> 
> 标签：php, html, captcha

我有一个带有选项菜单的页面，但是希望用户通过验证码测试。目前我想要它，以便用户在文本框中输入至少 3 个字符，否则他们将无法提交表单，代码如下所示，表单末尾的 php 条件。但是我知道我显然弄错了。有没有办法做到这一点而不将 php 代码粘贴到另一个页面上？谢谢。

```
<?php
// Check to see if the form has been submitted.
if(isset($_POST['menu1'])) {
  // If the form has been submitted, force a re-direct to the choice selected.
  header('Location: ' . $_POST['menu1']);
}
?>

<div style="padding-left: 50px">
<p class="arial"><strong></strong><br /><br /></p>
<form method="post"> 
<table class="freecontact2form" border="0" width="400px">
<tbody>
<tr>
<td colspan="2"><span style="font-size: x-small;"> </span> <font color=#000000 >Which of the following do you want to use?</font>
  <br /><br /></td>
</tr>
<tr>
  <td valign="top"><table width="400px" class="freecontact2form">
    <tr>
      <td colspan="2"><br />
        <br />
        <div class="freecontact2formmessage"> </div></td>
    </tr>
    <tr>
      <td valign="top"><label for="menu1" >The options are:<span class="required_star"> </span></label></td>
      <td valign="top"><select name="menu1" id="menu1">
        <option selected="selected" value ="http://www.google.com">Google </option>
        <option value ="http://www.yahoo.com">Yahoo</option>
        <option value ="http://www.bing.com">Bing</option>
      </select></td>
    </tr>

    <tr>
      <td valign="top"><label for="captcha" ><span class="required_star"></span><span class="required_star"></span></label></td>
      <td valign="top"><BR /><BR /><img src="captcha.jpg" /></td>
    </tr>
    <tr>
      <td>Please enter the characters shown in the CAPTCHA image:</td>
      <td><input type="text" name="captcha" id="captcha" value="" size="10" />
      </td>
    </tr>

    <tr>
      <td style="text-align:center" colspan="2"><br /><br /> 
      <input type="submit" value=" Submit ">

 </td>
    </tr>
  </table></td>
  <td valign="top">&nbsp;</td>
</tr>

</tbody>
</table>
</form> <br />
<p> </p>
<p> </p>

<?php

if(isset($_POST['menu1'])) {

    function died($error) {
        echo "Sorry, but there were error(s) found with the form you submitted. ";
        echo "These errors appear below.<br /><br />";
        echo $error."<br /><br />";
        echo "Please go back and fix these errors.<br /><br />";
        die();
    }

    if(!isset($_POST['menu1']) ||

                !isset($_POST['captcha'])

        ) {
        died('Sorry, there appears to be a problem with your form submission.');        
    }

    $error_message = "";

  if(strlen($captcha) < 3) {
    $error_message .= 'Please ensure the captcha entered is at least 3 characters long';
  }

  if(strlen($error_message) > 0) {
    died($error_message);
  }

?>

<?php
}
die();
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T20:55:18.880

在文件顶部（而不是底部）尝试此代码。请注意，我修复了一些问题。

首先，您在运行验证代码之前进行了 header() 重定向，因为它位于文件顶部，而验证位于下方。我更改了逻辑，因此如果验证成功，则它将重定向，否则将显示错误消息

其次，您正在检查`strlen($captcha)`但应该检查`strlen($_POST['captcha'])`.

```
<?php
function died($error) {
    echo "Sorry, but there were error(s) found with the form you submitted. ";
    echo "These errors appear below.<br /><br />";
    echo $error."<br /><br />";
    echo "Please go back and fix these errors.<br /><br />";
    die();
}

if(isset($_POST['menu1'])) {
  if(!isset($_POST['menu1']) || !isset($_POST['captcha'])) {
      died('Sorry, there appears to be a problem with your form submission.');        
  }

  $error_message = "";

  if(strlen($_POST['captcha']) < 3) {
    $error_message .= 'Please ensure the captcha entered is at least 3 characters long';
  }

  if(strlen($error_message) > 0) {
    // VALIDATION ERRORS, DIE
    died($error_message);
  }
  else {
    // DO YOUR REDIRECT RIGHT HERE... NO VALIDATION ISSUES, CONTINUE...
    header('Location: ' . $_POST['menu1']);
  }
}
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T20:59:19.850

您必须先将验证码保留在会话中，然后在验证输入的值是 3 个字符或更多字符后，将其与提交的值进行检查以匹配它们。

# java - 有什么方法可以提取Java数组中对象的所有属性名称

> ID：15557813
> 
> 赞同：0
> 
> 时间：2013-03-21T20:50:46.093
> 
> 标签：java, csv

我将接受具有某些值的 csv 文件。这些值将根据对象的属性进行验证

例子：

如果有一个包含姓名、电子邮件、电话号码等的人员类。

```
public class Person{
private String name;
private String email;
private String status;

set();
get();
} 
```

并且 csv 文件具有“名称”、“电子邮件”，我想编写一个验证逻辑，它将根据对象属性检查 csv 的内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T20:53:00.843

使用反射，您可以看到类中有哪些字段：

```
Field[] fields = Person.class.getDeclaredFields();
for(Field curField:fields)
{
    System.out.println(curField.getName());
} 
```

然后，您可以从 csv 中获取字段名称并比较其值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T20:57:00.403

我通常使用这个解决方案。它是一个谓词，所以它是可重用的。取决于您使用哪个谓词，您可以将它与 guava 或 Apache Commons Collections 一起使用。

```
public class BeanPropertyPredicate<T, V> implements Predicate<T> {

    // Logger
    private static final Logger log = LoggerFactory.getLogger(BeanPropertyPredicate.class);

    public enum Comparison {EQUAL, NOT_EQUAL}
    private final String propertyName;
    private final Collection<V> values;
    private final Comparison comparison;

    public BeanPropertyPredicate(String propertyName, Collection<V> values, Comparison comparison) {
        this.propertyName = propertyName;
        this.values = values;
        this.comparison = comparison;
    }

    @Override
    public boolean apply(@Nullable T input) {

        try {

            PropertyDescriptor propertyDescriptor = PropertyUtils.getPropertyDescriptor(input, propertyName);
            Object value = propertyDescriptor.getReadMethod().invoke(input);

            switch (comparison) {
                case EQUAL:
                    if(!values.contains(value))  {
                        return false;
                    }
                    break;
                case NOT_EQUAL:
                    if(values.contains(value))  {
                        return false;
                    }
                    break;
            }

        } catch (Exception e) {
            log.error("Failed to access property {}", propertyName, e);
        }

        return true;
    }
} 
```

# jquery - div 在调整大小时向上（并超过）一个可调整大小的 div

> ID：15557814
> 
> 赞同：2
> 
> 时间：2013-03-21T20:50:46.647
> 
> 标签：jquery, css, drag-and-drop, draggable, jquery-ui-resizable

对不起标题，我不知道如何正确解释这个问题。

我正在尝试将 div 添加到容器中，并能够移动它们以定位它们。如果您查看[此小提琴](http://jsfiddle.net/NFBtp/2/)并将鼠标悬停在 div 上（不是红色的，而是包装它的那个），您将能够单击“新建容器”按钮，它将添加一个容器。但是，如果你调整这个容器的大小，你会看到它下面的 div 跳到它上面。

我做错了什么还是这是预期的功能？我不希望有任何重叠，理想情况下希望新 div 位于现有 div 的上方或下方（基于拖动它的位置）。

**编辑：**

要重新创建问题，请将鼠标悬停在红色框（未打开）旁边，您将看到一个选择框出现。当它出现时单击一次，然后单击新建容器按钮。这将在红色框上方添加一个 div。如果您尝试重新调整红色框的大小，则红色 div 会向上移动。

**编辑 2**

好的，我注意到“为什么”会发生这种情况。JQuery 将元素更改为在调整大小时绝对定位，因此这会停止浮动工作。有什么办法可以去掉这个吗？

html:

```
<div class="editable_content" style="padding:10px;">
    <div style="width: 100%; padding:10px; height: 400px;">
        <div style="width:100%; float:left; height:100px; background:red"></div>
    </div>
</div>

<input type="button" id="new_container" value="New Container" /> 
```

CSS：

```
.edit_mouse_on {
    background-color: #bcd5eb !important;
    outline: 2px solid #5166bb !important;
}
.edit_selected {
    outline: 2px solid red !important;
}

.ui-resizable-helper { border: 2px dotted #00F; } 
```

JS：

```
var prevElement = null;
var selectedElement;
var enableHoverAction = true;
var allowedEditableClasses = "editable_content"
var hoverClass = "edit_mouse_on";
var selectedClass = "edit_selected";

document.addEventListener('mousemove', function (e) {
    var elem = e.target || e.srcElement;
    if (prevElement != null) detach(prevElement);
    attach(elem);
    prevElement = elem;
}, true);

function attach(obj) {
    if (enableHoverAction) {
        if (obj != null) {
            if ($(obj).parents("div.editable_content").length) {
                $(obj).addClass(hoverClass);
                $(obj).bind("click", function (e) {
                    e.preventDefault();
                    select(this);
                });
            }
        }
    }
}

function select(obj) {
    selectedElement = obj;
    enableHoverAction = false;
    $(obj).addClass(selectedClass);
    $(obj).removeClass(hoverClass);
}

function detach(obj) {
    if (enableHoverAction) {
        if (obj != null) {
            $(obj).removeClass(hoverClass);
            $(obj).unbind("click");
        }
    }
}

$(document).ready(function () {
    $("#new_container").click(function () {
        $("<div/>", {
            "style": "border:1px solid black; width:100px;height:100px; float:left;margin-bottom:1px;display:inline;clear:both",
            text: "",
        }).resizable({
            helper: "ui-resizable-helper"
        }).draggable({
            cursor: "crosshair",
            cursorAt: {
                top: 0,
                left: 0
            }
        }).prependTo(selectedElement);
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T21:07:56.730

我不完全确定我明白你在说什么。但是，这是 CSS 的`#editor`：

```
width: 80%; // cool.
height: 150px; // alright.
float: left; // okidoke.
background-color: lightgrey; // pretty.
position: absolute; // wait. what?
bottom: 0; // k.
left: 0; // right.
position: fixed; // ok, what the heck.
margin-left: 10%; // sure, why not. 
```

同样，我对悬停以及单击“新容器”以及`$().resizable();`您提到的内容感到很困惑。所以，我只是在这里猜测，但我认为你想要不那么疯狂的 CSS。

最终应用于该元素的样式是：

```
width: 80%;
height: 150px;
background-color: lightgray;
bottom: 0;
left: 0;
position: fixed;
margin-left: 10%; 
```

`position: absolute;`并且`float: left`被 无效`position: fixed;`，甚至可以简化为：

```
width: 80%;
height: 150px;
background-color: lightgray;
bottom: 0;
left: 10%;
position: fixed; 
```

不管怎样，`#editor`都会坐在上面的内容上面，因为位置是`fixed`。

希望这些信息能有所帮助。如果您有时间以对儿童友好的方式详细说明问题，我也许可以提供更多帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T21:22:39.850

看来我的问题在某种程度上是重复的，但我会将其发布为答案，因为我认为它可能比删除我的帖子更有帮助（因为我在搜索时看不到任何东西）：

[如何防止 Resizable 和 Draggable 元素相互折叠？](https://stackoverflow.com/questions/6037464/how-to-prevent-resizable-and-draggable-elements-from-collapsing-on-each-other/6204793#6204793)

# sql - 我想找出一个复杂数据结构的sql语句

> ID：15557815
> 
> 赞同：1
> 
> 时间：2013-03-21T20:50:52.803
> 
> 标签：sql

我正在尝试通过使用联接来访问表中的数据。我得到了 A 中主键的信息，并想从 X 中检索信息。有两种方法可以到达 X，一种是通过 B，另一种是通过 C。我选择哪条路径是从 A 中的列决定的. 我尝试创建一个使用 CASE WHEN 的 sql 语句，并以这种方式使用 FROM 语句连接表：

X - 连接 - B - 右外连接 - A - 左外连接 - C - 连接 - X

但是sql告诉我我不能在两端加入同一个表。我使用外连接是因为 A 将连接到 B 或 C，但不能同时连接到两者。

基本上，我需要从 X 中检索数据，但是使用不同的键访问 X，具体取决于 A 中的列中认为哪个路径。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T21:21:24.540

您应该使用这样的查询：

```
SELECT X.* 
FROM A 
LEFT JOIN B ON B.A_id = A.id 
LEFT JOIN C ON C.A_id = A.id 
LEFT JOIN X ON X.id = IF(A.path = 'B', B.X_id, C.X_id) 
WHERE A.id = <numeric_id>; 
```

我用这些数据在 MySQL 上测试了这个查询：

表 A：

```
------ ------
| 编号 | 路径 |
 ------ ------
| 1 | 乙|
| 2 | 乙|
| 3 | C |
| 4 | C |
 ------ ------

```

表 B：

```
------ ------
| A_id | X_id |
 ------ ------
| 1 | 9 |
| 2 | 8 |
 ------ ------

```

表 C：

```
------ ------
| A_id | X_id |
 ------ ------
| 3 | 7 |
| 4 | 6 |
 ------ ------

```

表十：

```
------ ------
| 编号 | 价值 |
 ------ ------
| 1 | 10 |
| 2 | 20 |
| 3 | 30 |
| 4 | 40 |
| 5 | 50 |
| 6 | 60 |
| 7 | 70 |
| 8 | 80 |
| 9 | 90 |
 ------ ------

```

如果您删除 WHERE 子句和 SELECT A.id, B.X_id, C.X_id, X.* 您​​将得到以下结果，它确认哪个表是 X 的实际路径：

```
-------- -------- -------- -------- ---------
| 身份证 | B.X_id | C.X_id | X.id | X.值 |
 ------ ------ ------ ------ -------- ---------
| 1 | 9 | 空 | 9 | 90 |
| 2 | 8 | 空 | 8 | 80 |
| 3 | 空 | 7 | 7 | 70 |
| 4 | 空 | 6 | 6 | 60 |
 -------- -------- -------- -------- ---------

```

希望对你有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T21:03:35.820

如果您选择这样的*两条*路径，这是可行的：

```
SELECT ....
FROM A

LEFT JOIN B ON A.bkey = B.bkey
LEFT JOIN X as XB ON B.xkey = XB.xkey

LEFT JOIN C ON A.ckey = C.ckey
LEFT JOIN X as XC ON C.xkey = XC.xkey 
```

然后，如果您只想要（例如）X 中的字段 1，那么您可以使用如下函数：

```
SELECT ISNULL(XB.field1, XC.field1)... 
```

或者一些这样的

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T21:16:06.183

您还可以执行 UNION 或 UNION ALL 查询（如果两个表互斥）

```
Select a.field1, b.field2
from tableA a
join tableb b on a.table1id - b.table1id
Union all
Select a.field1, c.field2
from tableA a
join tablec c on a.table1id - c.table1id 
```

# c# - Access 查询中的数据类型不匹配异常

> ID：15557816
> 
> 赞同：2
> 
> 时间：2013-03-21T20:50:53.407
> 
> 标签：c#, .net, sql, ms-access

我有以下代码：

```
 public void GetParameterSelectionSet(int wire, int bond, string processProgramPath)
    {

        string connectionString = "Provider=Microsoft.JET.OLEDB.4.0;" + "data source=" + processProgramPath + ";";
        using (OleDbConnection connection = new OleDbConnection(connectionString))
        {
            connection.Open();
            using (OleDbCommand command = new OleDbCommand("SELECT * " +
                                                        "FROM BONDS INNER JOIN WIRES on " +
                                                        "BONDS.WireID = WIRES.WireID " +
                                                        "WHERE (WIRES.OperationOrder =  '@WireOrder') AND" +
                                                        "(BONDS.OperationOrder = '@BondOrder')", connection))
            {
                command.Parameters.Add(new OleDbParameter("@WireOrder", OleDbType.Numeric));
                command.Parameters.Add(new OleDbParameter("@BondOrder", OleDbType.Numeric));
                command.Parameters["@WireOrder"].Value = wire;
                command.Parameters["@BondOrder"].Value = bond;

                var mytemp = command.ExecuteScalar();
            }
        }

    } 
```

当我执行此查询时，我得到“条件表达式中的数据类型不匹配”。

WIRES.OperationOrder 和 BONDS.OperationOrder 都是 Numeric 类型。所以我不知道为什么这会失败。

提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-21T20:53:29.370

您在 SELECT 语句中为数字参数加上引号，这是不正确的。

# gwt - 应该从 GWT 应用程序的 .war 文件中删除 hosts.html 吗？如何？

> ID：15557824
> 
> 赞同：2
> 
> 时间：2013-03-21T20:51:10.663
> 
> 标签：gwt, security, gwt-maven-plugin, gwt-hosted-mode

我们构建了一个 GWT 应用程序（使用 gwt-maven-plugin），生成一个 .war 文件。当前，此 .war 文件包含一个名为 的文件`hosted.html`，当指定查询参数时，该文件用于在开发（née 托管）模式下运行`gwt.codesvr=...`。

将 .war 文件用于生产是否存在安全风险，或者是否有其他理由确保该文件不会出现在 .war 文件中？

如果是这样，最简单的方法是什么？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T22:44:11.050

GWT 开发插件要求将主机+端口的 webserver+codeserver 对列入白名单，因此在部署 hosts.html 时绝对没有安全风险。部署它的好处是您可以使用生产服务器调试您的应用程序。

注意：必要的白名单是为了防止“由简单的查询字符串参数触发的 XSS”。否则，攻击者可能会让您使用他们自己的代码服务器运行受信任的 GWT 应用程序。

# excel - 具有对外部数据源的动态查询的数据透视表

> ID：15557825
> 
> 赞同：0
> 
> 时间：2013-03-21T20:51:13.080
> 
> 标签：excel, pivot-table, vba

我的问题不是专门寻找解决方案的想法，而是更多地检查我自己的解决方案的完整性，因为我在 Excel VBA 中使用 ADODB 已经有一段时间了（至少有两个主要修订版）。

所以情况是这样的。我正在为想要访问大块数据库视图的用户创建一个 Excel 报表，该数据库视图太大而无法放入内存。用户需要能够访问所有视图，因此硬编码过滤器是不可能的。除非我错过了一个更优雅的解决方案，否则他们需要的是能够以生成的 SQL 语句的形式动态控制连接上的过滤器，该语句输入到数据透视缓存中，然后告诉数据透视表刷新。

我创建了一个“刷新”按钮，它会显示一个包含用户通常需要的所有过滤器的表单。用户输入过滤器值，我解析并验证它们，从这些值中形成适当的 SQL 语句。然后我在执行此操作时遇到问题：

```
'this has to be dynamic becuase I'm distributing to multiple users, using different testing/production databases on different workstations.
mypivottable.PivotCache.Connection = "ODBC;" & driver & myserver & myuser & trusted & app & workstationid & databse

'this also has to be dynamic becuase of the sql filters
mypivottable.PivotCache.CommandText = sql 
```

所以我按下按钮，它就起作用了！设置这些属性后，数据透视表会自动刷新，因为它知道缓存后面有新数据，并在新条件下获取查询结果。

问题是，当我查看外部数据源列表时，每次更改这些属性时，它都会创建一个新连接并且不会自行清理。使用 100 次后，周围有 100 个连接，其中 99 个未使用。如果我删除所有连接，那么它会不可逆转地破坏数据透视表。

有一个更好的方法吗？有没有一种编程方式来只清理未使用的连接？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T00:42:24.557

如果您需要做的只是更新 SQL 语句，则不必重置连接。我实际上有一个类似的问题，这就是我解决它的方法：

```
Sub test()
' add logic...

    ' then change sql code
    With ThisWorkbook.Connections("your connection name").OLEDBConnection
            .CommandText = Array("select * from mytable where id = 1") ' adjust accordingly
            .Refresh
    End With
End Sub 
```

您真正需要做的就是获取当前连接，然后更新 CommandText 属性。顺便说一句，我不确定我为什么需要使用`Array()`，但没有它我会遇到问题。

实际上，我写了一篇关于使用 SQL 创建数据透视表的博客文章（[链接在这里](http://www.spreadsheetsmadeeasy.com/excel-create-pivot-table-using-sql/)）。也许我应该再写一篇关于创建动态内容的文章：）

# php - PHP PDO 删除 rowCount 总是返回 0

> ID：15557826
> 
> 赞同：1
> 
> 时间：2013-03-21T20:51:13.580
> 
> 标签：php, mysql, pdo, delete-row, rowcount

PHP 5.2.17 (cli) (built: Jan 17 2011 12:51:24) 版权所有 (c) 1997-2010 The PHP Group Zend Engine v2.2.0, Copyright (c) 1998-2010 Zend Technologies

这是我的功能

```
public function remove($id){
        $params = array(':id' => $id);
        $delete_loan = $this->ext_conn->prepare("DELETE FROM loan_program WHERE id = :id");
        $delete_loan->exec($params);
        $affected_rows = $delete_loan->rowCount();  //and not this?
        if ($affected_rows == 1) {
            return array('status' => 'success');
        } else {
            return array('status' => 'failure', 'reason' => 'delete_failed', 'rowcount' => $affected_rows, 'errornfo' => $delete_loan->errorInfo());
        }
    } 
```

我正在调用它并传递数据库中行的 id。该行已从数据库中删除，但 if ($affected_rows == 1) { 始终为假。errorInfo() 返回一个 [0] => 0000 的数组。

我已经阅读了 PDO 手册，并且正在参考[http://wiki.hashphp.org/PDO_Tutorial_for_MySQL_Developers#INSERT.2C_DELETE.2C_UPDATE_Prepared_Queries](http://wiki.hashphp.org/PDO_Tutorial_for_MySQL_Developers#INSERT.2C_DELETE.2C_UPDATE_Prepared_Queries)

rowcount() 不应该返回 1 （或者许多 id 的值传递给删除？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T21:09:56.007

[`PDO::exec`](http://www.php.net/manual/en/pdo.exec.php)需要一个 SQL 语句字符串。如果您准备一份声明，则必须[`PDOStatement::execute`](http://www.php.net/manual/en/pdostatement.execute.php)改为致电

```
$delete_loan->execute($params); 
```

# cakephp - 使用 cakephp 约定的两个表之间的两个关系

> ID：15557827
> 
> 赞同：1
> 
> 时间：2013-03-21T20:51:15.817
> 
> 标签：cakephp

按照约定，如何使用同一张表的两个外键制作一张表。以博客教程和简单身份验证和授权应用程序教程为例，其中表有一个 user_id 帖子，表示引用用户表的帖子的创建者。如何设计存储表，除了开发者，其他用户可能是修改者。

```
CREATE TABLE users (
    id INT UNSIGNED AUTO_INCREMENT PRIMARY KEY,
    username VARCHAR(50),
    password VARCHAR(50),
    role VARCHAR(20),
    created DATETIME DEFAULT NULL,
    modified DATETIME DEFAULT NULL,
    user_id INT(11);// cakephp here knows the relationship itself
); 
```

显然我不能添加另一列 user_id 来代表修改的用户。我该怎么做，有可能吗？对不起我的英语不好

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-21T22:08:15.473

CakePHP 约定的创建有几个原因；保持**一致**并减少使您的应用程序工作**所需的配置量。**

但是，CakePHP 并不*禁止您*使用不符合约定的命名。在某些情况下，您将*不得不*忽略约定（想想将用于不遵循 CakePHP 约定的 CakePHP 项目的第三方数据库），您的情况就是其中之一。

## 与“相同”模型的多重关系

Cake 允许您为每个关系的模型设置不同的别名。这样，您可以实现您在问题中描述的内容，而不会发生冲突。但是，因为第二个关系的外键不会遵循 CakePHP 的约定，CakePHP 不会**自动**选择正确的列，所以您必须自己指定。

例如

```
class Post extends AppModel {

    public $belongsTo = array(
        // CakePHP will automatically use 'user_id' as foreign key
        'User',

        // Here we create an 'alias' for the User Model
        // also, we need to specify the foreign key to use
        // for the relation
        'Editor' => array(
            'className'   => 'User',       // name of the Model
            'foreignKey'  => 'editor_id',  // foreign key for this relation
        ),
    );
} 
```

`Post`模型现在与模型有*两个*关系`User`。一个有别名`Editor` 别名的工作方式与“常规”模型相同；即就像有一个`Editor`模型附加到邮政;

在您的控制器中，两者都`find()`将返回所有用户，并实际使用“用户”模型：

```
$this->Post->User->find('all');
$this->Post->Editor->find('all'); 
```

## 重要的

CakePHP 使用别名来缓存模型信息。如果您为模型使用别名，则**永远**不应为另一个模型使用*相同*的别名。CakePHP 在这些情况下可能会使用其他模型的缓存信息，从而导致不可预知的结果！

例如

```
class Post extends AppModel {
    public $belongsTo = array(
       'Editor' => array(
            'className'   => 'User',
            'foreignKey'  => 'editor_id',
        ),
    );
}

class Comment extends AppModel {
    public $belongsTo = array(
       'Editor' => array(
            'className'   => 'Visitor',    // WRONG!! Editor alias is already 
                                           // used as alias for the User model!
            'foreignKey'  => 'editor_id',
        ),
    );
} 
```

# python - 将字符串转换为日期类型python

> ID：15557828
> 
> 赞同：17
> 
> 时间：2013-03-21T20:51:15.880
> 
> 标签：python, string, date, datetime

如何在python中将字符串转换为日期对象？

字符串将是：“30-01-12”（对应于格式：“%d-%m-%y”）

我不想要一个 datetime.datetime 对象，而是一个 datetime.date

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2013-03-21T20:52:40.640

您仍然使用`datetime.datetime`但随后仅请求`.date()`部分：

```
datetime.datetime.strptime('30-01-12', '%d-%m-%y').date() 
```

示范：

```
>>> import datetime
>>> datetime.datetime.strptime('30-01-12', '%d-%m-%y').date()
datetime.date(2012, 1, 30) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-21T20:56:17.490

这应该有效：

```
import datetime
s = "30-01-12"
slist = s.split("-")
sdate = datetime.date(int(slist[2]),int(slist[0]),int(slist[1])) 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-21T21:36:20.170

```
from datetime import datetime,date
date_str = '30-01-12'
formatter_string = "%d-%m-%y" 
datetime_object = datetime.strptime(date_str, formatter_string)
date_object = datetime_object.date() 
```

# java - android使用pcap库

> ID：15557831
> 
> 赞同：4
> 
> 时间：2013-03-21T20:51:33.267
> 
> 标签：java, android, libpcap

根据一个 android 应用程序，我有一个一般性问题，我需要在我的 android 应用程序中使用一些 pcap 功能。因为java没有提供原始数据包注入和低层编程的可能性（据我所知，如果我错了，请纠正我）所以我正在寻找替代方案。到目前为止，我发现了以下内容：

*   安卓 NDK
*   JNETPCAP

有什么建议我应该使用还是有人有其他建议？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-21T20:57:53.063

**JNI 解决方案**

您需要将调用和所需的逻辑*包装*在 C 或 C++ 中的 libpcap 之外，并通过[*(Java Native Interface)*](http://en.wikipedia.org/wiki/Java_Native_Interface)*公开*底层函数，以便您的应用程序可以调用 Java 中的本机代码。[`JNI`](http://en.wikipedia.org/wiki/Java_Native_Interface)

 *互联网上的文档`JNI`非常完整，有很多关于这个主题的教程，比如[这个](http://blog.edwards-research.com/2012/04/tutorial-android-jni/)。

如果您想轻松地将本机代码包装在 JNI 中，您可以使用`Swig`它允许您根据 C/C++ 本机头文件自动生成 JNI 代码。

获得的 JNI 代码应使用 Android NDK 作为*动态库*(.so) 进行编译。该库将放置在您的应用程序包中的`libs/`. 然后，您可以调用 `System.loadLibrary(path_to_you_dynamic_library)`以加载库中包含的所有符号并在 Java 中使用它们。

**使用第三方库**

如果您害怕在弄清楚如何使用 JNI 时头疼，您可以查看这个库，它为您完成了艰苦的工作，并提供了一个 API 来操作 Java 中的原始套接字。

[http://www.savarese.com/software/rocksaw/](http://www.savarese.com/software/rocksaw/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-22T08:59:16.013

> 您需要将调用和所需的逻辑包装在 C 或 C++ 中的 libpcap 之外，并通过 JNI（Java 本机接口）公开底层函数，以便您的应用程序可以调用 Java 中的本机代码。

或者你需要一个已经完成的库，例如 err, umm, [jNetPcap](http://jnetpcap.com)。

尝试在 Android 或任何其他使用 Linux 内核的操作系统上进行数据包捕获时*可能**遇到*的一个问题是，默认情况下，libpcap（`PF_PACKET`套接字）使用的底层内核机制需要 root 权限。如果有办法以 root 身份运行您的代码，或者给它`CAP_NET_RAW`和可能`CAP_NET_ADMIN`的特权，它可能会使其工作。*

# jquery - 追加后div类不起作用

> ID：15557832
> 
> 赞同：1
> 
> 时间：2013-03-21T20:51:34.440
> 
> 标签：jquery, css, html

我有这个html：

```
<div id="something" class="draggable">Hello World!</div> 
```

当我按下一个按钮时，我调用了这个代码：

```
function addDiv(fatherDiv){
        $("#"+fatherDiv).append("<div id='randomId' class='draggable' style='position: absolute; top: 100px; left: 250px; width: 120px; height: 20px;'>Text of Div</div>");
    } 
```

问题是 Div 是完美创建的，但是在附加 Div 时该类不起作用（可拖动），使其成为唯一的不可拖动元素。

我怎样才能使附加的 Div 可以像其他 div 一样成为可拖动元素？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-21T20:53:17.490

需要调用`.draggable()`新创建的元素，否则不绑定。`addDiv`您可以通过在最后链接它来将其添加到您的函数中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T20:54:03.353

```
function addDiv(fatherDiv){
    $("#"+fatherDiv).append($("<div class='draggable' style='position: absolute; top: 100px; left: 250px; width: 120px; height: 20px;'>Text of Div</div>").draggable());
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-24T07:09:17.417

我已经解决了这个问题：

```
function addDiv(fatherDiv){
     $("#"+fatherDiv).append("<div id='randomId' class='draggable' style='position: absolute; top: 100px; left: 250px; width: 120px; height: 20px;'>Text of Div</div>");
     $("#"+fatherDiv).enhanceWithin();
} 
```

# python - 流式上传请求？

> ID：15557841
> 
> 赞同：2
> 
> 时间：2013-03-21T20:52:27.357
> 
> 标签：python, http, python-requests

我在 Python 中实现了一个简单的上传处理程序，它将上传的文件分块读取到内存中，GZips 并对它们进行签名，然后将它们重新上传到另一台服务器以进行长期存储。我已经设计了一种方法来使用我的网络服务器分块读取上传，基本上我有一个这样的工作流程：

```
class MyUploadHandler:

    def on_file_started(self, file_name):
        pass

    def on_file_chunk(self, chunk):
        pass

    def on_file_finished(self, file_size):
        pass 
```

这部分效果很好。

现在我需要在对它们进行修改后将文件分块上传到最终目的地。我正在寻找一个有点像这样的工作流程：

```
import requests

class MyUploadHandler:

    def on_file_started(self, file_name):
        self.request = requests.put("http://secondaryuploadlocation.com/upload/%s" %
                (file_name,), streaming_upload = True)

    def on_file_chunk(self, chunk):
        self.request.write_body(transform_chunk(chunk))

    def on_file_finished(self, file_size):
        self.request.finish() 
```

有没有办法使用 Python requests 库来做到这一点？似乎[它们允许](http://docs.python-requests.org/en/latest/user/advanced/#streaming-uploads)可以读取类似文件的上传对象，但我不确定这到底意味着什么以及如何将其应用于我的情况。如何提供这样的流式上传请求？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-01-06T18:15:35.287

我建议使用 Python 的多处理模块。您可以使用该模块中的 apply_async 例程在每个块完成后上传它们，而不会影响其他上传。然后，您可以将它们放在一个临时文件夹中，上传事件完成后，您可以将它们缝合在一起。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-10-14T06:49:34.030

以下对类似问题的回答应该可以解决您的问题：

问：“如何将 POST 数据流式传输到 Python 请求中？”

`queue`A：使用,`threading`和`iter()`sentinel的示例代码

[https://stackoverflow.com/a/40018547/19163](https://stackoverflow.com/a/40018547/19163)

# android - SQLiteException：表已存在（代码 1）

> ID：15557848
> 
> 赞同：1
> 
> 时间：2013-03-21T20:52:42.023
> 
> 标签：android, exception, android-sqlite, oncreate

**最终编辑，问题“已解决”**

所以我最终按照接受的答案做了什么，我删除了将数据库版本作为参数的构造函数，但这仍然导致异常。因此，正如还建议的那样，我添加`try{} catch{}`了一个块来捕获问题，让我告诉你，它仍然显示抛出异常，只是这次它不会使应用程序崩溃。幸运的是，尽管创建数据库似乎有问题，但它允许我将数据库内容加载到应用程序中，所以我现在对那个日志消息很好:)

这是 onCreate：

```
@Override
public void onCreate(SQLiteDatabase db) {
    Constants.logMessage("Creating database from scratch?");
    //Create both of the tables as part of the databases
    try {
        db.execSQL(CREATE_TABLE_COUNTRIES);
        db.execSQL(CREATE_TABLE_REGIONS);
        db.execSQL(CREATE_TABLE_CITIES);
    }
    catch (Exception e) {
        //This happens on every launch that isn't the first one. 
        Log.w("SpotTheStation", "Error while creating db: " + e.toString());
    }       
} 
```

* * *

我在我的 android 应用程序上使用 SQLite，似乎遇到了一个非常奇怪的问题。似乎每次我调用`getWriteableDatabase()`系统都会尝试重新创建整个数据库，即它调用`onCreate()`，这会导致 SQLiteException。

这是完整的错误消息：

```
03-21 14:36:44.082: V/SpotTheStation(20034): android.database.sqlite.SQLiteException:, 
while compiling: create table countries(_id integer primary key autoincrement,
country text); 
```

每次我尝试访问 DBdata 时都会发生这种情况，我有一个单独的静态类来处理整个应用程序生命周期中的 DB 访问，我通过以下方式将上下文传递给它：

```
public static Cursor getCountries (final Context context) {

    if (mDatabase == null || !mDatabase.isOpen()) {
        Constants.logMessage("DB was null, opening");
        open(context);
    }

    return mDatabase.query(CountryDbHelper.TABLE_COUNTRIES, CountryDbHelper.PROJECTION_COUNTRIES, null, null, null, null, CountryDbHelper.DEFAULT_SORT_ORDER);          
} 
```

每次我调用这个方法时，日志都会指出实际上是在打开数据库，这很好。这是我打开数据库的方法：

```
private static void open (Context context) {
    if (mDatabase != null && mDatabase.isOpen()) {
        return;
    }
    try {
        mHelper = new CountryDbHelper(context);
        mDatabase = mHelper.getWritableDatabase();
    } catch (Exception e) {
        Constants.logMessage(e.toString());
    }
} 
```

这就是导致异常的语句，因为 getWriteableDatabase 应该有一个缓存的数据库，或者应该调用`onOpen()`而不是`onCreate()`.

这是似乎在每个 db 访问调用上执行的 create 语句：

```
private static final String DATABASE_CREATE = "create table " + TABLE_COUNTRIES 
        + "(_id integer primary key autoincrement, " 
        + "country text);"
        ; 
```

这`onCreate()`是相当简单的：

```
@Override
public void onCreate(SQLiteDatabase db) {
    Constants.logMessage("Creating database from scratch?");
    db.execSQL(DATABASE_CREATE);
} 
```

我添加了日志消息来跟踪问题，这是进展情况：

```
03-21 14:36:44.004: V/SpotTheStation(20034): DB was null, opening
03-21 14:36:44.035: V/SpotTheStation(20034): Creating database from scratch?
03-21 14:36:44.082: V/SpotTheStation(20034): android.database.sqlite.SQLiteException: table countries already exists (code 1): , while compiling: create table countries(_id integer primary key autoincrement, country text); 
```

现在，这让我感到困扰，我在其他一些应用程序上具有相同的 DB 结构（相同的逻辑，一个非静态 OpenHelper 和一个用于访问 dB 内容的静态管理器），并且一切正常，不知道是什么导致这里的问题。

我会很感激一些帮助。

**快速编辑**

为了更清楚一点，第一次启动（应用程序第一次运行）时`getCountries` **确实**有效，后续运行将导致异常。卸载重新安装过程使其再次工作，然后在第二次运行时死亡。

**编辑二号**

根据要求，这是 OpenHelper 的完整代码：

```
public class CountryDbHelper extends SQLiteOpenHelper {

/**
 * This path is hardcoded, during the first time application opens
 * we copy a database file from the assets folder into this folder. 
 */
public final static String DB_PATH = "/data/data/com.nasa.apps.spotthestation/databases/";
private static final int DB_VERSION = 2;
public static String DB_NAME = "countries";
public static final String TABLE_COUNTRIES = "countries";
public static final String TABLE_REGIONS = "regions";
public static final String DEFAULT_SORT_ORDER = "_id";
public static final String [] PROJECTION_COUNTRIES = {
    "_id",
    "country"
};

public static final String [] PROJECTION_REGIONS = {
    "_id",
    "country",
    "region"
};

/**
 * Table with only countries
 */
private static final String CREATE_TABLE_COUNTRIES = "create table " + TABLE_COUNTRIES 
        + "(_id integer primary key autoincrement, " 
        + "country text);"
        ;

/**
 * Table that contains regions per country
 */
private static final String CREATE_TABLE_REGIONS = "create table " + TABLE_REGIONS 
        + "(_id integer primary key autoincrement, " 
        + "country text, "
        + "region text);"
        ;

/**
 * Not used for now
 */
private static final String CREATE_TABLE_CITIES = "create table " + TABLE_COUNTRIES 
        + "(_id integer primary key autoincrement, " 
        + "country text, "
        + "region text, "
        + "city text);"
        ;

public CountryDbHelper(Context context, CursorFactory factory,
        int version) {
    super(context, DB_NAME, factory, version);
}

public CountryDbHelper (Context context) {
    super(context, DB_NAME, null, DB_VERSION );
}

@Override
public void onCreate(SQLiteDatabase db) {
    Constants.logMessage("Creating database from scratch?");
    //Create both of the tables as part of the databases
    db.execSQL(CREATE_TABLE_COUNTRIES);
    db.execSQL(CREATE_TABLE_REGIONS);
}

@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
    Constants.logMessage("Upgrading db from " + oldVersion + " to new version: " + newVersion);
    db.execSQL("DROP TABLE IF EXISTS " + TABLE_COUNTRIES);
    db.execSQL("DROP TABLE IF EXISTS " + TABLE_REGIONS);
    onCreate(db);
}
} 
```

另外，我注意到的一件事是 /data/data/packageName/databases/ 上的数据库文件没有“sqlite_sequence”文件，该文件通常存储数据库中每个表的行数。我认为问题可能是该文件丢失，因为这两个表使用“主键自动增量”，并且我相信它依赖于知道插入时要使用的下一个 _id 是什么。任何人都可以证实这一点？

**再次编辑**以防万一，我继续将数据类型从“_id”字段更改`autoincrement`为简单`numeric`，因为我不打算向数据库添加更多数据，这是一个只读意图，但它仍然强制关闭第二次发射。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T23:30:13.490

你在类构造函数中添加这个`super(context, DATABASE_NAME, null, DATABASE_VERSION);`

```
private static class DatabaseHelper extends SQLiteOpenHelper{
        DatabaseHelper(Context context){
            super(context, DATABASE_NAME, null, DATABASE_VERSION);
        }
            @Override
            public void onCreate(SQLiteDatabase db){
                try{
                    db.execSQL(TABLE_CREATE);
                } catch (SQLException e){
                    e.printStackTrace();
                }
            }

            @Override
            public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion){

                db.execSQL("DROP TABLE IF EXISTS "+DATABASE_TABLE);
                onCreate(db);
            }       
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-02T02:04:43.977

我遇到了这个问题，在 DROP TABLE 行的末尾添加一个 <<;>> 解决了我的问题。

```
db.execSQL("DROP TABLE IF EXISTS " + TABLE_COUNTRIES + ";");
db.execSQL("DROP TABLE IF EXISTS " + TABLE_REGIONS + ";"); 
```

不要忘记在需要时更改版本。

# android - 是否可以在层列表中定义 XferMode？

> ID：15557849
> 
> 赞同：4
> 
> 时间：2013-03-21T20:52:45.837
> 
> 标签：android, xml, background, layer, porter-duff

如果有办法在图层列表 XML 文件中指定多个图层并告诉每个图层根据 PorterDuff 的特定 XferMode 进行混合，我一直在徘徊。
生成复合背景将非常有用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T21:30:14.117

[XML 表单和](http://developer.android.com/guide/topics/resources/drawable-resource.html#LayerList)[表示 LayerList 的 POJO 都不](http://developer.android.com/reference/android/graphics/drawable/LayerDrawable.html)提供对 这些方法的访问来定义 XferMode。

不过，您可以将图层列表用作“可绘制信息”存储机制，并使用[getNumberOfLayers](http://developer.android.com/reference/android/graphics/drawable/LayerDrawable.html#getNumberOfLayers%28%29)和[getDrawable()](http://developer.android.com/reference/android/graphics/drawable/LayerDrawable.html#getDrawable%28int%29)等方法以自定义方式对其进行绘制。

在您的循环中，您可以轻松地在层之间更改为您想要的任何 PorterDuffMode。不幸的是，似乎不可能将您需要的所有信息存储在层列表的本机 XML 文件中，而且我不知道有任何图像格式可以让您看不到任何内容。

# ruby-on-rails - rails - 如何将更改传递回父模型

> ID：15557855
> 
> 赞同：0
> 
> 时间：2013-03-21T20:53:03.530
> 
> 标签：ruby-on-rails, activerecord

在保存一系列子模型时，我需要将更新的参数传递回父模型。
例如，如果通过一个项目保存一堆员工到每个任务，我需要让项目知道它的一些任务的标题发生了变化，那么我需要收集所有发生变化的标题并在 ProjectObserver 中进行处理。这可能吗？

我意识到可能没有办法按照我尝试的方式进行这项工作。如果不是，我很高兴听到有关如何解决此问题的建议。

这是我没有成功的尝试：

```
class Employee < ActiveRecord::Base
  has_many :employee_tasks
  has_many :tasks, :through => :employee_tasks

  accepts_nested_attributes_For :employee_tasks
  accepts_nested_attributes_For :tasks
end

class Project < ActiveRecord::Base
  attr_accessor :changed_employees
  has_many :tasks  
end

class Task < ActiveRecord::Base
  has_many :employee_tasks
  has_many :employees, :through => :employee_tasks
  belongs_to :project

  accepts_nested_attributes_For :employee_tasks
end

class EmployeeTask < ActiveRecord::Base
  #this is what I want to accomplish
  before_save do 
    if self.employee_id_changed
      self.task.project.changed_employees ||= []
      self.task.project.changed_employees << self.employee_id_changed
    end
  end
  belongs_to :task
  belongs_to :employee
end

class ProjectObserver < ActiveRecord::Observer
  observe :project
  def after_save(project)
    puts project.changed_employees
    # should print out the changed attributes loaded from EmployeeTask
    #send a single email with all the updated titles (not one email for each change)
  end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T22:35:09.567

听起来您需要使用此处描述的 after_save 方法[http://api.rubyonrails.org/classes/ActiveRecord/Callbacks.html](http://api.rubyonrails.org/classes/ActiveRecord/Callbacks.html)

# bash - 如何在 ctrl + C 上杀死由 shell 脚本打开的所有进程？

> ID：15557857
> 
> 赞同：11
> 
> 时间：2013-03-21T20:53:10.017
> 
> 标签：bash

我有几个 python 脚本，我从一个 shell 脚本开始，如下所示：

```
#!/bin/bash
python prog1.py &
python prog2.py &
python prog3.py 
```

由于我正在开发，我经常想停止这些过程。我通常通过按 ctrl+C 来做到这一点，但不幸的是，一些 python 程序保持 (zeromq) 套接字打开。这意味着我必须手动找到它们（我使用*lsof -i*），并使用 PID 杀死它们。

所以我正在寻找一种更简单的方法，当我按下 ctrl+C 时，可以从 shell 中自动杀死那些 python 进程。在[Stackoverflow 上的另一个线程上，](https://stackoverflow.com/questions/11696691/bash-script-kill-background-grandchildren-on-ctrlc)我发现了一些应该可以满足我需要的代码。我只是不了解代码以及如何根据需要对其进行调整。

有人会这么好心来帮助我吗？

```
cat >work.py <<'EOF'
import sys, time, signal
signal.signal(signal.SIGINT, signal.SIG_DFL)
for i in range(10):
    time.sleep(1)
    print "Tick from", sys.argv[1]
EOF 
chmod +x work.py

function process {
    python ./work.py $1
}

process one &
wait $!
echo "All done!" 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-21T20:59:58.413

让 bash 脚本捕获 SIGINT，并让它杀死当前进程组中的所有内容：

```
intexit() {
    # Kill all subprocesses (all processes in the current process group)
    kill -HUP -$$
}

hupexit() {
    # HUP'd (probably by intexit)
    echo
    echo "Interrupted"
    exit
}

trap hupexit HUP
trap intexit INT

python prog1.py &
python prog2.py &
python prog3.py &

wait 
```

# vb.net - VB.Net MS Access 国际化

> ID：15557862
> 
> 赞同：0
> 
> 时间：2013-03-21T20:53:25.283
> 
> 标签：vb.net, ms-access, internationalization

这是使用 VB.Net 和 MS Access (ADO.NET) 的示例场景：

1.  当前线程的语言设置为 fr-FR，带有千位分隔符和逗号分隔符。

2.  我的字符串数量为 33 233,25

3.  我将它转换为我知道没有任何内置区域化格式的小数，所以它在调试器中显示为 33233.25，因为我在美国。

4.  一切都很好，直到我尝试将此数字保存到数据类型为 Number（十进制）的 Access 数据库表中。当我尝试保存时，我收到一条错误消息，告诉我条件表达式中存在数据类型不匹配。

我知道小数是问题，因为当我用 10,50 的文字替换它时，记录更新很好。我很困惑，因为我认为小数没有固有的语言属性。

我错过了什么？

谢谢

# android - 在 Android 上使用 OpenGL ES 2.0 的 Sprite 不透明度

> ID：15557866
> 
> 赞同：2
> 
> 时间：2013-03-21T20:53:30.143
> 
> 标签：android, opengl-es-2.0, opacity, alpha-transparency, point-sprites

我试图让我的点精灵以正确的不透明度显示。

最初，我在一个黑色方块上获取我的精灵纹理。

因此，我在片段着色器中添加了以下内容：

```
"if(color.a < 0.5) "+
               "discard;"+ 
```

现在，这似乎确实有效，因为我的精灵显示没有黑色背景，但是，我的纹理本身是“部分透明的” - 它没有显示这种部分透明度，它看起来是实心的。这有点难以解释，但我希望你明白我的意思。如果我使用 canvas/surfaceview 绘制相同的纹理，它会正确显示。

基本上我试图让我的纹理以它们的原始格式显示（即，就像它们在创建它们的软件中所做的那样 - 即 Gimp / photoshop 等）。

将不胜感激任何帮助 - 谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-21T21:16:11.510

首先确保你的纹理是从透明的 png 中通过[`Bitmap`](http://developer.android.com/reference/android/graphics/Bitmap.html)with`RGBA_8888`或`RGBA_4444`配置加载的，这样你就不会丢失 alpha 通道。

其次，您需要`GL_BLEND`使用[`glEnable()`](http://www.opengl.org/sdk/docs/man/xhtml/glEnable.xml)命令启用。在 Android 上，你会这样写：`GLES20.glEnable(GLES20.GL_BLEND);`. 这使您可以将已绘制的颜色与新颜色混合，从而获得透明的外观。混合功能应设置~~[`GL_ONE, GL_ONE_MINUS_ALPHA`](http://www.opengl.org/sdk/docs/man/xhtml/glBlendFunc.xml)为常规透明度：`glBlendFunc(GL_ONE, GL_ONE_MINUS_SRC_ALPHA);`~~ [`GL_SRC_ALPHA, GL_ONE_MINUS_ALPHA`](http://www.opengl.org/sdk/docs/man/xhtml/glBlendFunc.xml)常规透明度：`glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA);`

最后，您不需要使用丢弃，只需将 alpha 设置`gl_FragColor`为 4 分量向量，第四通道中的 alpha （这是您从采样器读取纹理时得到的），例如，`gl_FragColor = texture2D(sampler, texCoord);`如果您愿意，您可以这样做.

您很可能必须关闭深度测试`glDisable(GL_DEPTH_TEST)`以避免未排序的三角形出现问题。

[您可以在此处](http://www.opengl.org/archives/resources/faq/technical/transparency.htm)阅读有关透明度的更多信息。

# knockout.js - 剔除映射两个数组之间的选定值

> ID：15557867
> 
> 赞同：0
> 
> 时间：2013-03-21T20:53:33.070
> 
> 标签：knockout.js, knockout-mapping-plugin

我需要在 UI 上显示来自独立 JSON 数组（lstRoles）的所有复选框，并将选定的复选框作为结果数组映射到结果 JSON 对象（tObj）中的属性角色。但我不知道如何正确地做到这一点（我刚开始学习 Knockout）。如果结果 JSON 对象已经有一些数据，如何初始化复选框。

```
 <html>
<head>
<script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
<script src="knockout-2.2.1.js"></script>
<script src="knockout.mapping-latest.js"></script>

</head>
<body>
<span data-bind="text: name"></span>

 <ul data-bind="template: { name: 'choiceTmpl', foreach: lstRoles },click: myFunction.bind($data)"></ul>

<ul data-bind="foreach: lstRoles">
    <li>
        Name at position <span data-bind="text: $index"> </span>:
        <span data-bind="text: $data.name"> </span>
        <input type="checkbox" data-bind="attr: { value: $data },click: myFunction.bind($data) " />
        <a href="#" data-bind="click: $parent.removePerson">Remove</a>
    </li>
</ul>

<hr />

<div data-bind="text: ko.toJSON(viewModel)"></div>

<script id="choiceTmpl" type="text/html">
    <li>
        <input type="checkbox" data-bind="attr: { value: $data } " />
        <span data-bind="text: $data.name"></span>
    </li>
</script>

<script type="text/javascript">

var tObj = {"name":"John", "roles":[{id:1, name:"Role1", desc:"Desc1"},{id:2, name:"Role2", desc:"Desc2"}]};
var lstRoles=[{id:1, name:"Role1", desc:"Desc1"},{id:2, name:"Role2", desc:"Desc2"},{id:2, name:"Role3", desc:"Desc3"},{id:2, name:"Role4", desc:"Desc4"}];

var viewModel = ko.mapping.fromJS(tObj);
viewModel.alldata = lstRoles;
ko.applyBindings(viewModel); 
    function myFunction(data)
    {
       viewModel.roles.push(data);
    }
</script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T16:35:40.367

我已经更新了我的代码，并且得到了我需要的行为。但我不确定这种方式是否 100% 正确。欢迎您提出任何意见。

```
 <html>
<head>
<script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
<script src="knockout-2.2.1.js"></script>
<script src="knockout.mapping-latest.js"></script>

</head>
<body>
<span data-bind="text: name"></span>

<div data-bind="foreach: alldata">    
        <input type="checkbox" data-bind="attr: { value: $data }, click: function(data, event) { return myFunction1(data, event); }, checked: $data.rc" />          
        <span data-bind="text: $data.name"> </span>
        <span data-bind="text: $data.desc"> </span></br>

</div>

<hr />

Count Select Roles : <span data-bind="text: roles().length"> </span><br/>

<div data-bind="foreach: roles">    
        <input type="checkbox" data-bind="attr: { value: $data },click: function(data, event) { return myFunction1(data, event); }, checked: $data.rc" />          
        <span data-bind="text: $data.name"> </span>
        <span data-bind="text: $data.desc"> </span></br>

</div>

<hr />

<div data-bind="text: ko.toJSON(viewModel)"></div> 

<script type="text/javascript">

var tObj = {"name":"John", "roles":[]};
var lstRoles=[{id:1, name:"Role1", desc:"Desc1", rc:true, ds:true},{id:2, name:"Role2", desc:"Desc2", rc:false, ds:false},{id:3, name:"Role3", desc:"Desc3",rc:true, ds:false},{id:4, name:"Role4", desc:"Desc4", rc:false, ds:true}];

var viewModel = ko.mapping.fromJS(tObj);
viewModel.alldata = ko.observableArray(lstRoles);

viewModel.initRoles = function()
{
    ko.utils.arrayForEach(viewModel.alldata(), function(item){
      if (item.rc)
        {
        viewModel.roles.push(item);
        }
    });
};

viewModel.initRoles();

ko.applyBindings(viewModel); 
    function myFunction(data)
    {
       viewModel.roles.push(data);
       return true;
    }

 function myFunction1(data, event)
    {
      if ($(event.toElement).is(':checked'))
       {    
          viewModel.roles.push(data);
       }    
    else
    {
       viewModel.roles.remove(function(item)
            {                
        return (item.id == data.id);
        });
    }

       return true;
    }

</script>
</body>
</html> 
```

# java - 调用动态生成名称的类的方法

> ID：15557872
> 
> 赞同：2
> 
> 时间：2013-03-21T20:53:47.717
> 
> 标签：java, clojure

我正在用 Clojure 编写简单的应用程序。我的任务是（从用户）获取实现 Runnable 接口并调用 start 方法的完全限定类名（Java 类）。我的问题是当我不知道类名先验时如何运行此方法？基于[此](http://clojure.org/java_interop)，我尝试过这样的事情（在简单的 String 类上），但我失败了：

```
(defn schedule [parameter]
  (def class-name (subs parameter 6))       ; get just class name for e.g. java.lang.String
  (println (.getName class-name))) 
```

我也找到[了这个](https://stackoverflow.com/questions/9167457/in-clojure-how-to-use-a-java-class-dynamically)，但我不太确定如何使用它，因为我也失败了。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T21:15:41.767

您可以使用宏或`eval`. 通常更喜欢宏而不是 eval。

```
user> (defmacro runnerizer [class-name] 
          `(~(symbol (str class-name "/" "start"))))                                                    
#'user/runnerizer                                                                                                                     
user> (macroexpand-1 '(runnerizer "myClass"))                                                                                         
(myClass/start) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T21:27:29.030

如果您希望避免使用宏，您可以执行以下操作：

```
(defn schedule [name]
  (let [thread (-> name Class/forName .newInstance Thread.)]
    (.start thread)
    thread)) 
```

然后，您可以以通常的 Java 方式与返回的 Thread 对象进行交互。

# mongodb - Scala 的 Casbah MongoDB 工具包：无法创建连接和集合

> ID：15557882
> 
> 赞同：0
> 
> 时间：2013-03-21T20:54:14.090
> 
> 标签：mongodb, scala, casbah

我正在尝试使用适用于 Scala 的 Casbah MongoDB 工具包。我在本地主机上运行 MongoDB，它工作正常。然而，下面的代码什么也没做——没有创建数据库和集合。也没有抛出异常：

```
package test.scalamongo

import com.mongodb.casbah.Imports._

object Simple {

  def main(args: Array[String]): Unit = {
try {
  // Connect to default - localhost, 27017
  val mongoClient = MongoClient()
  val mongoDB = mongoClient("casbah_test")
  val mongoColl = mongoClient("casbah_test")("test_data")
  println("Ok now?")
} catch {
  case e: Throwable =>
    println("Exception !!!")
    e.printStackTrace()
}
  }

} 
```

我错过了什么？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T21:08:28.937

您必须显式创建集合：

```
val mongoClient = MongoClient()
val mongoDB = mongoClient("casbah_test")
val mongoColl = 
   if (mongoDB.collectionExists("test_data")) {
     mongoDB("test_data")
   } else mongoDB.createCollection("test_data", options: DBObject) 
```

可能的选项：

capped - boolean：如果集合有上限
size - int：集合大小
max - int：最大文档数

# javascript - google maps apis——JQuery & 使用 Places 库

> ID：15557883
> 
> 赞同：0
> 
> 时间：2013-03-21T20:54:16.087
> 
> 标签：javascript, jquery, google-maps-api-3

我有一个小小的网络应用程序，它使用 google maps api 从数据库中提取数据，并使用 JSON 对象在嵌入式地图上创建和显示标记和相关数据。我在这里访问 api：

[http://ajax.googleapis.com/ajax/libs/jquery/1.6.1/jquery.min.js](http://ajax.googleapis.com/ajax/libs/jquery/1.6.1/jquery.min.js)

我现在意识到我需要在地图上设置一个搜索框，以便用户搜索地址，地图将移动以显示他们想要的位置。似乎我需要 Places 库，我可以使用文档中的代码示例轻松实现搜索框。我不关心 Places 本身或对它们做任何事情，只是识别位置并将重置边界转移到所需位置。所以我需要访问位置库，显然是在这里：

[https://maps.googleapis.com/maps/api/js?libraries=places&sensor=false](https://maps.googleapis.com/maps/api/js?libraries=places&sensor=false)

但是，如果我切换库，我之前的代码（也许并不奇怪）会中断。有没有办法同时使用两者？我是否必须以其他方式处理 Places，因为我已经在为这个应用程序使用 JQuery？或者这只是我指代图书馆的问题？

谢谢！z

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T21:12:53.677

只需这样做

```
var geocoder = new google.maps.Geocoder();
var address = document.getElementById("txtAddress").value;
var lat;
var lng;
geocoder.geocode( { 'address': address}, function(results, status) {
  if (status == google.maps.GeocoderStatus.OK)
  {           
    lat= results[0].geometry.location.latitude;
    lng =results[0].geometry.location.longitude;
  }
});
map.panTo(new google.maps.LatLng(lat,lng));
map.setZoom(14); 
```

# mysql - 获取列总计和 GROUP BY 总计

> ID：15557884
> 
> 赞同：1
> 
> 时间：2013-03-21T20:54:23.773
> 
> 标签：mysql, sql, join, group-by, aggregate-functions

在 SQL 中，我想获取来自每个用户的网站点击百分比。为此，我需要获取 column 的总和`site hits`，但我的查询在另一列上使用 GROUP By。

除了 GROUP BY 中的每个 user_id 之外，如何获得整个列的总和？

数据集：

```
User    Page Hits    Page
----    ---------    ----
a       10           home
a       10           profile
b       8            home
b       2            profile
c       6            home
c       4            profile 
```

结果：

```
User     Site Hits      pct of total site hits
----     ---------      ---------------
a        20             50%
b        10             25%
c        10             25% 
```

询问：

```
SELECT
user,
SUM(page_hits) AS site_hits,
SUM(page_hits) / total_page_hits <-- How do I get sum of 'page hits' for total_page_hits ????
FROM hit_data
GROUP BY user 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T20:56:24.760

一种选择：使用子查询。

```
SELECT
user,
SUM(page_hits) AS site_hits,
SUM(page_hits) / (select sum(page_hits) from hit_data) 
FROM hit_data
GROUP BY user 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T20:57:27.920

除非您在子查询中选择总命中数作为子查询的列，否则您需要将其作为两个查询来执行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T20:58:19.597

这可能有效，而且比看起来更合理：

```
SELECT user, SUM(page_hits) AS site_hits,
       SUM(page_hits) / (select sum(page_hits) from hit_data)
FROM hit_data
GROUP BY user 
```

由于子查询与记录不相关，因此数据库引擎可以先运行子查询，然后在外部查询中将其用作常量。

# git - 如何提供准备好的 git commit 消息？

> ID：15557885
> 
> 赞同：12
> 
> 时间：2013-03-21T20:54:24.043
> 
> 标签：git, shell, scripting

按照惯例，我在 git 中创建我的故事分支以在其中包含 Jira 问题 ID，例如 FOO-1001。我有一个脚本可以为我做这件事。现在，我准备了另一个从 Jira API 获取 FOO-1001 标题的脚本。我想在输入时实现：

```
$ git commit 
```

我的编辑器打开预填充以下内容：

```
BUGFIX: FOO-1001 Some sample issue title downloaded using my script 
```

使用我描述的脚本来实现这一目标的最简单方法是什么？我的想法是以某种方式将提交消息格式化为一个文件，以便 git 可以找到它并作为默认值使用。一种方法似乎是使用`prepare-commit-msg`钩子，但我更愿意使用独立脚本来实现我的目标，而不需要任何配置`.git`（以便我的同事可以轻松地重用它）。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-21T20:58:46.697

该`commit`命令具有从模板读取提交消息的选项：

```
 -t <file>, --template=<file>
       When editing the commit message, start the editor with the contents
       in the given file. The commit.template configuration variable is often
       used to give this option implicitly to the command. This mechanism can
       be used by projects that want to guide participants with some hints on
       what to write in the message in what order. If the user exits the editor
       without editing the message, the commit is aborted. This has no effect
       when a message is given by other means, e.g. with the -m or -F options. 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-06-17T11:45:25.040

还有`-F`：

```
 -F <file>, --file=<file>
       Take the commit message from the given file. Use - to read the message from the standard input. 
```

# ios - OpenGL ES 2.0 for iOS 中的 glDepthRange 发生了什么？

> ID：15557890
> 
> 赞同：0
> 
> 时间：2013-03-21T20:54:55.447
> 
> 标签：ios, opengl-es-2.0

我在 Mac OS X 程序中使用 glDepthRange(1.0, 0.0) 给自己一个右手坐标系。显然，对于使用 OpenGL ES 2.0 的 iOS，我没有该选项。是否有一个快速的解决方案，以便更高的 z 值显示在前面，或者我是否必须重新处理我的所有数学？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T01:55:56.380

好吧，您可以尝试 glDepthFunc。默认值为 GL_LESS，如果使用 GL_GREATER，将渲染 z 值较高的像素。

```
glDepthFunc(GL_GREATER); 
```

或者，您可以在顶点着色器上添加​​此行

```
gl_Position.z = -gl_Position.z; 
```

# image - Lightbox 2 可以与图像映射一起使用吗？

> ID：15557891
> 
> 赞同：0
> 
> 时间：2013-03-21T20:55:01.897
> 
> 标签：image, map, lightbox, area, rel

我正在尝试将 Lightbox 2 (ver 2.51) 与图像映射一起使用。该网站是一个主题公园，公园地图图像有8个区域，每个区域都应该有自己的幻灯片。我尝试使用 rel="lightbox[group1]" 但显然“rel”不适用于“area”，因为它适用于“a”。Lightbox 2 论坛页面上的解决方案在这里[http://www.patworx.de/blog/?p=20](http://www.patworx.de/blog/?p=20)并说：

“解决方法：但是原型仍然能够获取属性:)所以只需替换

```
imageLink.rel 
```

和

```
Element.readAttribute($(imageLink), "rel") 
```

并享受灯箱！”

但是，我在 lightbox.js 文件中找不到 imageLink.rel。这个解决方案提到了 Lightbox 2.04，所以它现在可能是一个过时的解决方案。对最新版本的 Lightbox 2 有什么想法吗？提前致谢。

编辑：

[http://jsfiddle.net/GBpjJ/](http://jsfiddle.net/GBpjJ/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T20:33:23.397

我终于回答了我自己的问题，以防其他人感兴趣......我发现这个页面实际上有几种不同的方法来制作没有“区域”标签的图像映射，它允许您使用“rel”标签和图像映射中的锚标记。对我有用的是示例 2a。希望这可以帮助别人。

[http://www.wickham43.net/imagemaps.php](http://www.wickham43.net/imagemaps.php)

# ant - Ant 可以使用 Gradle 解析器吗？

> ID：15557893
> 
> 赞同：0
> 
> 时间：2013-03-21T20:55:09.437
> 
> 标签：ant, gradle

我在`repositories`闭包中定义了一个常春藤解析器：

```
repositories {
    ivy {
        name "local-ivy"
        url "http://host/ivy-repo/"
        layout 'pattern', { ... }
    }
} 
```

我正在尝试在这样的 Ant 发布任务中使用它：

```
ant.taskdef(name: 'ivyPublish', classname: 'org.apache.ivy.ant.IvyPublish', classpath: configurations.ivy.asPath)
ant.ivyPublish(pubrevision: '1.0.0',
               status: 'release',
               resolver: 'local-ivy',
               artifactspattern: 'buildSrc/ivyUpload/[artifact].[ext]',
               overwrite: true) 
```

但是当 Ant 尝试解决依赖关系时，我得到以下异常：

```
java.lang.IllegalArgumentException: unknown resolver local-ivy 
```

是否可以将我的 Gradle 定义的解析器公开给 Ant？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-27T06:37:02.343

您还没有声明解析器，而是声明了 Ivy 存储库。你不能在 Ant 端使用它。（请注意，Gradle 不再使用 Ivy 库来访问 Ivy 存储库。）

# python - 使用 web python 下载不同语言的网页

> ID：15557897
> 
> 赞同：0
> 
> 时间：2013-03-21T20:55:15.020
> 
> 标签：python, beautifulsoup, mechanize

我正在尝试使用 python 中的 mechanize 模块下载网页（俄语）（我的计算机仅使用英语）。我收到以下错误

```
UnicodeEncodeError: 'ascii' codec can't encode characters in position 50-59 
```

有人可以告诉我如何纠正这些类型的错误或它们的含义吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T21:00:13.943

长话短说，您的原始字符串未以 ASCII 编码，这意味着当尝试打印字符时，python 不知道该怎么做，因为原始字符代码超出了 ASCII 范围。

这是 ASCII 表及其支持的字符：[http ://www.asciitable.com/](http://www.asciitable.com/)

你可以使用说转换你的字符： [Python - 编码字符串 - 瑞典字母](https://stackoverflow.com/questions/7315629/python-encoding-string-swedish-letters)

# 或者你可以这样做：

（这是解决许多编码问题的解决方案）

编辑：`C:\Python??\Lib\Site.py` 将“del sys.setdefaultencoding”替换为“pass”，如下所示： ![像这样](../Images/a1f39b5b9a40b06358b28e080c8c72d7.png)

然后，
**将其放在代码的顶部：**

```
sys.setdefaultencoding('latin-1') 
```

修复瑞典语/非 UTF8 兼容字符的圣杯。我不确定 latin-1 会覆盖你所有的俄语字符，如果它不知道的话，你可能知道一个编码（例如：ISO-8859-15 或其他东西）

# windows-mobile - 我应该将显示 Compact Framework 错误消息所需的 cab 文件放在哪里？

> ID：15557901
> 
> 赞同：0
> 
> 时间：2013-03-21T20:55:22.803
> 
> 标签：windows-mobile, compact-framework, windows-ce, cab

我收到了这个错误消息：

*异常：此异常有一条错误消息可用，但无法显示，因为这些消息是可选的，并且当前未安装在此设备上。请为 Windows Mobile 5.0 及更高版本安装“NETCFv35.Messages.EN.wm.cab”或为其他平台安装“NETCFv35.messages.EN.cab”。重新启动应用程序以查看消息。*

我徒劳地在我的 HD 中搜索了该文件，将其拼凑起来（砰的一声？），并且能够在这里找到它：

```
http://www.codeplex.com/Download?ProjectName=beyondpod&DownloadId=29539 
```

但是我需要在我的设备上的哪个位置安装它才能找到它？在根目录上，还是在应用程序所在的文件夹中？我只是将它复制过来，还是涉及其他内容？

## 更新

这个： http: [//msdn.microsoft.com/en-us/library/bb986876.aspx](http://msdn.microsoft.com/en-us/library/bb986876.aspx)说“默认位置是 C:\Program Files\Microsoft.NET\SDK\CompactFramework\v3.5\WindowsCE\Diagnostics。” 但我的设备没有这样的路径。我能找到的最接近的是：

```
Computer\DuckbilledPlatypus's Device 2\\\Windows\SQLCE 2.0 
```

-和：

```
Computer\DuckbilledPlatypus's Device 2\\\Windows\NETCFKeys 
```

## 更新 2

我将出租车（也许我应该称它为死亡出租车，尽管我不会称自己为可爱）复制到设备的“根”*和*应用程序所在的文件夹中，但我仍然得到相同的错误消息能够显示错误消息。爱荷华：救命！

## 更新 3

即使在这里尝试修复后：http: [//blogs.msdn.com/b/martijnh/archive/2008/01/03/fixing-exception-messages-on-the-net-compact-framework-3-5.aspx](http://blogs.msdn.com/b/martijnh/archive/2008/01/03/fixing-exception-messages-on-the-net-compact-framework-3-5.aspx)（更改死亡驾驶室中一个文件的名称）我得到相同的旧的 long-donkey err msg，它可能比被抑制的那个长得多。

## 更新 4

阅读[http://blogs.msdn.com/b/martijnh/archive/2008/01/03/fixing-exception-messages-on-the-net-compact-framework-3-5.aspx](http://blogs.msdn.com/b/martijnh/archive/2008/01/03/fixing-exception-messages-on-the-net-compact-framework-3-5.aspx)的修复程序多一点仔细，我看到有人说他们必须添加 System.SR.dll 作为项目参考。当我尝试这样做时，我得到，“无法添加对 '\System.SR.dll' 的引用。这不是 .NET 程序集。

啊啊啊啊啊啊啊啊啊！！！！！！！！！

## 更新 5

通过“运行它”，我假设 ctacke 意味着 2 单击它（cab 文件）。这样做会调出 cab 中包含的文件：_setup.xml 以及四个非常时髦的文件。2-clicking _setup.xml 调用了一个关于潜在有害 (xml) 文件的警告消息，但我大胆地继续前进（嘿，这不是*我的*电脑）。它似乎做了一些事情（虽然没有确认消息）。单击 2 次 _setup.xml 时打开的 XML 表明其中一个名称很时髦的文件将重命名为 System.SR.dll（手动执行此操作的人一定经历过一些失败事件）。再次尝试添加 System.SR.dll 作为对我的项目的引用似乎有效（至少没有错误消息；并且 System.SR.dll 比重命名的时髦命名文件小得多）。但是，当我运行我的应用程序时，我仍然会得到同样的爸爸抨击的非错误消息！如果另一边也有火，跳过那个箍有什么用？

不过，我确实注意到，非错误消息在其标题栏上标有：System.InvalidOperatio...”我不记得以前在那里看到过；也就是说，我没有注意到它。尽管如此，没有看到消息的其余部分，我仍然处于不透明的缩影中。

## 更新 6

啊哈！终于让它工作了：我不仅必须将它添加为我的项目的参考（实际上，也许这不是必需的），我还必须将新的更薄版本（91KB 与 338 相比）复制到手持设备上，两者在“根”和应用程序所在的文件夹中。我不知道这两者中的哪一个是必要的，也并不在乎。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T06:26:18.543

1.  Clay 应该有这个，但为了完整起见，请在您的开发人员计算机上安装[Windows Mobile 6 SDK](http://www.microsoft.com/en-us/download/details.aspx?id=6135 "视窗移动 6 SDK")和[6.5](http://www.microsoft.com/en-us/download/details.aspx?id=5389 "Windows Mobile 6.5.3 开发者工具包")。
2.  在您的计算机上转到 C:\Program Files (x86)\Microsoft.NET\SDK\CompactFramework\v3.5\WindowsCE\Diagnostics （即您安装 SDK 的位置）（删除 (x86) 仅适用于 32 位机器）
3.  将 NETCFv35.Messages.EN.cab 复制到您的掌上电脑
4.  在手持设备上单击 CAB，然后进行安装。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T22:08:43.830

终于让它工作了：我不仅必须将它添加为我的项目的参考（实际上，也许这不是必需的），我还必须将新的更薄版本（91KB 与 338 相比）复制到手持设备上，两者在“根”和应用程序所在的文件夹中。我不知道这两者中的哪一个是必要的，也并不在乎。

多么麻烦！那种花言巧语让我觉得自己像洛杉矶的罗德尼·金

# android - 在 AccessibilityNodeInfo 中设置文本

> ID：15557902
> 
> 赞同：11
> 
> 时间：2013-03-21T20:55:24.570
> 
> 标签：android, accessibility

我正在开发一个 Android 无障碍服务。我得到了一个表示 EditText的[AccessibilityNodeInfo 。](http://developer.android.com/reference/android/view/accessibility/AccessibilityNodeInfo.html)是否可以编辑包含的文本？

我试过了，`mynode.setText("aaa")`但我得到`IllegalStateException`了官方文档[http://developer.android.com/reference/android/view/accessibility/AccessibilityNodeInfo.html中的描述](http://developer.android.com/reference/android/view/accessibility/AccessibilityNodeInfo.html)

有任何想法吗？谢谢

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2015-01-10T14:47:37.767

您可以将 [ACTION_SET_TEXT](http://developer.android.com/reference/android/view/accessibility/AccessibilityNodeInfo.html#ACTION_ARGUMENT_SET_TEXT_CHARSEQUENCE)用于 >= android 21。这是它的示例：

```
AccessibilityNodeInfo source = event.getSource();
if (source != null & event.getClassName().equals("android.widget.EditText")) {
    Bundle arguments = new Bundle();
    arguments.putCharSequence(AccessibilityNodeInfo
            .ACTION_ARGUMENT_SET_TEXT_CHARSEQUENCE, "android");
    source.performAction(AccessibilityNodeInfo.ACTION_SET_TEXT, arguments);
} 
```

# mysql - MySQL：START TRANSACTION 将“自动提交”设置为关闭？

> ID：15557905
> 
> 赞同：2
> 
> 时间：2013-03-21T20:55:29.917
> 
> 标签：mysql

当我立即执行时`START TRANSACTION`，`SHOW VARIABLES LIKE 'autocommit'`我看到变量`autocommit`仍然设置为`ON`. `OFF`在我明确说之前，这不是应该设置的`COMMIT`吗？

来源：[http ://dev.mysql.com/doc/refman/5.0/en/commit.html](http://dev.mysql.com/doc/refman/5.0/en/commit.html)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T22:02:29.100

据我了解，交易只是忽略了自动提交设置。所以开始一个事务不会改变自动提交变量的值。这是有道理的，因为您不希望用户 a 的事务在处理用户 a 的事务时禁用用户 b 的自动提交。

这通过阅读文档并不明显，除非您将“自动提交模式”和“自动提交变量”视为两个不同的东西，它们是。

# javascript - window.requestFileSystem 当代触发“成功”和“错误”回调？

> ID：15557906
> 
> 赞同：0
> 
> 时间：2013-03-21T20:55:31.723
> 
> 标签：javascript, html

我省略了一些代码，但这是核心：

```
function App() {

var self = this;

window.requestFileSystem(LocalFileSystem.PERSISTENT, 
                          0, self.onGotFs, self.onError(1) );

... omitted ....

this.onGotFs = function(file_system) {
    console.log("gotFs:" + file_system.root.full_path );
    self.file_system = file_system;
};

this.onError = function(id) {
    console.log("app error #" + id);
};

    ... omittted ...

} 
```

看着控制台，我看到了两条消息

```
app error #1
gotFs ! 
```

请注意：我看不到 file_system.root.full_path 字符串。这不是打印端

所以主要问题是：

## 为什么 requestFileSystem 同时触发成功和错误回调？

可能我缺少一些知识库；我是一个html5新手

## 文档

我在 w3c 文档中看到了这个定义[- 第 4.4.1 段](http://www.w3.org/TR/file-system-api/ "W3C 文档第 4.4.1 段")

```
interface LocalFileSystem {
    const unsigned short TEMPORARY = 0;
    const unsigned short PERSISTENT = 1;
    void requestFileSystem (unsigned short type, unsigned long long size, FileSystemCallback successCallback, optional ErrorCallback errorCallback);
    void resolveLocalFileSystemURL (DOMString url, EntryCallback successCallback, optional ErrorCallback errorCallback);
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T20:57:30.610

```
self.onError(1) 
```

这会`onError` **立即**调用并将结果传递给`requestFileSystem`.

您需要传递一个调用的函数`onError`：

```
requestFileSystem(..., function() { self.onError(1); }); 
```

此外，`onGotFs`被称为错误`this`。您可以通过类似的功能或通过`self.onGotFs.bind(self)`

# windows - 如何在 MATLAB 中运行 libsvm？

> ID：15557908
> 
> 赞同：9
> 
> 时间：2013-03-21T20:55:35.430
> 
> 标签：windows, matlab, svm, libsvm

MATLAB下如何开始使用[libsvm ？](http://www.csie.ntu.edu.tw/~cjlin/libsvm/)

我已经下载了该库，并将其提取到 中`C:\Program Files\MATLAB\R2012a\toolbox\`，但是我不知道如何在 MATLAB 中使用它。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-03-21T22:37:39.673

在您选择的目录中下载并解压缩 libsvm，例如`C:\libsvm`

如`C:\libsvm\matlab\README`文件中所述，首先您必须确保安装了[受支持的 C/C++ 编译器](http://www.mathworks.com/support/compilers/current_release/)。请注意，在 64 位系统上，您需要正确的 64 位版本的编译器（例如，Visual Studio Express 版本需要 Windows SDK）

```
>> mex -setup 
```

选择编译器后，您需要编译 MEX 文件：

```
>> cd('C:\libsvm\matlab')
>> make 
```

最后将包含生成的二进制文件的文件夹添加到 MATLAB 搜索路径：

```
>> addpath('C:\libsvm\matlab') 
```

用一个简单的例子（假数据）测试这个库：

```
>> labels = double(rand(10,1)>0.5);
>> data = rand(10,5);
>> model = svmtrain(labels, data, '-s 0 -t 2 -c 1 -g 0.1') 
```

请注意，当前版本的 libsvm 包括用于 Windows 的预编译 64 位 MEX 文件。二进制文件位于（从上面`C:\libsvm\windows\*.mexw64`复制到子文件夹）`matlab`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-05-24T02:49:56.983

对我来说，我不需要重新编译 libsvm 文件（它确实导致了 .net 框架和 windows SDK 的一些问题）我只使用了已经编译的文件并将它们添加到一个新文件夹中，按照[这里提到的步骤](https://stackoverflow.com/questions/13954007/how-to-set-up-libsvm-matlab-interface) **减去 make步。**

所以总结一下：

1-我认为您需要在“C:\Program Files\MATLAB\R2014b\toolbox\”下创建“libsvm”文件夹。

2- 然后将 *.mexw64 文件从“libsvm-3.21\windows”文件夹复制到新文件夹。

3-最后通过单击主页中的设置路径按钮并添加路径为“C:\Program Files\MATLAB\R2014b\toolbox\libsvm”的新文件夹，将您刚刚创建的 libsvm 文件夹添加到 matlab bath

# .net - VIsual Studio 2010 为 aspx 文件显示 .vb 和 .designer.vb 文件

> ID：15557910
> 
> 赞同：2
> 
> 时间：2013-03-21T20:55:42.420
> 
> 标签：.net, visual-studio-2010

在我使用 Visual Studio 2010 的大多数项目（VB.NET 或 C#）中，我可以“扩展”一个 .aspx 文件以显示相关的 .vb 和 .designer.vb 文件。在其他一些项目中我不能。我可以通过右键单击查看代码进行编辑，但更喜欢其他方法。

是否有 VS 设置来启用此功能？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-21T20:58:51.647

在解决方案资源管理器中，顶部有一个按钮，从右数第二个，称为显示所有文件。如果单击它，它将显示您的 vb 和设计器文件

# c# - 我想在不更改 SQL Server 实例或不更改 SQL Server 安装的 PC 名称的情况下运行 C# 程序

> ID：15557911
> 
> 赞同：0
> 
> 时间：2013-03-21T20:55:44.420
> 
> 标签：c#, sql-server, windows, sql-server-2008-r2

我有使用 SQL Server R2 作为其数据库的 C# 应用程序。该数据库位于名为`SERVER`. SQL Server 的实例名称也是`server`.

我的 Windows 应用程序用于`DataSet`与数据库通信。现在我的 SQL 安装 PC 名称更改为另一个名称，例如`SERVERHP`. 现在我所有的编码工作都想改变我的连接字符串。还有其他简单的方法吗？

我试图编辑**主机**文件，但它对我不起作用。

这是我的编码风格（[http://goo.gl/FQrkp](http://goo.gl/FQrkp)）。我正在`DataSet`与`DataAdapter`IDE 设计人员一起使用。

我有 100 ~ 150 个表格。现在我无法编译所有编码。我想要一种简单的方法来连接那个 SQL Server 数据库。

我想有办法隐藏计算机主机名的变化

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T21:17:56.517

据我了解，它是用于连接数据库的 SqlConnection 或类似的东西。你为什么不使用[SqlConnectionStringBuilder](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlconnectionstringbuilder%28v=vs.90%29.aspx)？然后你可以动态地构造你需要的连接字符串。此外，要获取服务器列表，您可以使用命名空间 System.Data.Sql 中的 SqlDataSourceEnumerator。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T21:09:54.477

你有几个选择：

1.  将应用程序中连接字符串中的所有服务器名称全局替换为 IP 地址

2.  用应用程序中的新服务器名称全局替换所有服务器名称

3.  将 CNAME 记录添加到服务器上的 DNS 表（当然假设您在同一个网络中，如果您使用计算机名称，您就是这样）

4.  在 LMHOSTS 文件中添加一个条目（您可以添加任意数量的名称，指向同一个 IP）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T21:15:11.257

听起来您想要一种方法来隐藏运行 SQL Server 的计算机（服务器/桌面/Windows 的虚拟化实例等）的主机名更改。

这不是我的专业领域，但我想不出只涉及您的应用程序代码和计算机的方法。

如果您控制本地 DNS，则可以使用旧名称“指向”新名称创建 CNAME 条目。根据连接字符串的存储方式，您可能必须编辑它们，也可能不需要。但是您不必担心 SQL Server 的位置会再次更改，因为您始终可以编辑 CNAME 以指向新位置。

未来注意事项 - 不是您当前的问题：如果您继续使用 MS SQL Server，您需要小心将其移动到不是默认实例的计算机上，因为您需要输入实例名称在连接字符串中也是如此，这可能会迫使您再次编辑所有应用程序 web.configs 和 app.configs。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-21T21:20:02.663

您是否在开发工作中使用 Visual Studio 2012？我遇到了与 mini SQL db VS 安装（使用高级版）的冲突，不得不修改我的 Machine.config 文件的 ConnectionStrings 部分以指向我的 SQL 数据库。无论出于何种原因，VS 都会在 Machine.Config 文件中写入对 mini db 的引用（对于您正在利用的任何版本的 .Net），从而引发潜在的冲突。

该文件可以在 %systemroot%\Microsoft.Net\Framework64\dot net version\Config 中找到

如果您使用的是 x86 处理器，则 Framework64 文件夹仅称为“Framework”。

# javascript - 全局变量在匿名函数中不起作用

> ID：15557912
> 
> 赞同：2
> 
> 时间：2013-03-21T20:55:46.160
> 
> 标签：javascript, function, variables, closures, global

```
var count = 0; 
for ( var i = 0; i < 4; i++ ) { 
  setTimeout(function(){ 
    assert( i == count++, "Check the value of i." ); 
  }, i * 200); 
} 
```

为什么这不起作用（`i`等于 4 而不是每次都等于计数）？`count, var`是在全局范围内创建的，那么为什么它们在函数内不可用？

（我想解释一下为什么这不起作用，我找到了一种通过将其包装在另一个函数中来使其工作的方法，只是想了解）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-21T20:57:10.190

用这个; 每个 setTime out 内 i 的值将是 4，因为 for 循环已经完成并且值为

匿名函数将通过创建新上下文来保留其中的变量。

```
var count = 0; 
for ( var i = 0; i < 4; i++ ) { 
  (function(i){
     setTimeout(function(){ 
            assert( i == count++, "Check the value of i." ); 
      }, i * 200);
  })(i); 
} 
```

# android - 如何在代码中引用Android库的strings.xml中的字符串？

> ID：15557913
> 
> 赞同：13
> 
> 时间：2013-03-21T20:55:46.757
> 
> 标签：android, android-resources

要在应用程序项目的 strings.xml（在 res\values 中）引用字符串 foo，可以简单地使用

```
getString(R.string.foo) 
```

getString 是 Context 的一个方法。

假设一个 Android 库的 strings.xml 中有一个字符串 foo。如何在库的方法中使用它？

已编辑：建议将 Context 的引用传递给库方法，以便可以使用 getString()。由于它是应用程序项目的上下文，因此存在潜在的冲突，可以说明如下：

假设：该库有一个字符串 foo，其值为“library foo”。一个应用项目有一个字符串 foo，其值为“app foo”

以下代码

```
Log.d("Debug", "App foo ID: " + R.string.foo);  
Log.d("Debug", "App: foo value: " + getString(R.string.foo)); 
```

生成：

```
03-22 05:53:55.590: D/Debug(16719): App foo ID: 2131230723
03-22 05:53:55.590: D/Debug(16719): App foo value: app foo 
```

在库方法中，以下代码

```
Log.d("Debug", "Library foo ID: " + R.string.foo); 
Log.d("Debug", "Library foo value: " + context.getString(com.my.library.R.string.foo)); 
```

生成：

```
03-22 05:55:03.680: D/Debug(16719): Library foo ID: 2131230723
03-22 05:55:03.680: D/Debug(16719): Library foo value: app foo 
```

上面显示了 ID 冲突因此错误的字符串值。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2015-03-13T22:08:29.023

正如您指出要引用库中定义的字符串资源，您可以使用 getString() 方法，您只需要一个上下文，但在您的示例中，冲突是由字符串的相同名称生成的。

当您在库中定义资源时，如果您在应用程序模块中使用相同的资源名称，则会发生冲突。为避免冲突，您必须使用唯一名称，例如在库中为资源名称使用公共前缀，不同的包名称是不够的。

要解决此问题，您可以使用以下名称：

*   **mylib_foo**在您的库中
*   **foo**在您的应用程序中

来自android文档的来源：http: [//developer.android.com/tools/projects/index.html#considerations](http://developer.android.com/tools/projects/index.html#considerations)

> 在开发库模块和相关应用程序时，请牢记以下几点：
> 
> *   资源冲突
>     
>     
>     
>     由于这些工具将库模块的资源与依赖应用程序模块的资源合并，因此可以在两个模块中定义给定的资源 ID。在这种情况下，工具从应用程序或具有最高优先级的库中选择资源，并丢弃其他资源。在开发应用程序时，请注意公共资源 ID 可能会在多个项目中定义并且将被合并，应用程序或最高优先级库中的资源优先。
>     
>     
> *   使用前缀避免资源冲突
>     
>     
>     
>     为避免公共资源 ID 的资源冲突，请考虑使用对模块唯一（或在所有项目模块中唯一）的前缀或其他一致的命名方案。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-21T21:00:39.363

图书馆项目应该能够以完全相同的方式引用它的资源。

是否有特定的用例/代码示例说明这不起作用？

父项目中定义的任何字符串都将覆盖库。甚至 actionbarsherlock 也使用前缀 ex。abs__action_bar_home_description

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-06-24T04:57:58.020

```
//For boolean values
    int resId = context.getResources().getIdentifier("bool_ID", "bool", context.getPackageName());
    if(resId != 0){
       System.out.println(context.getResources().getBoolean(resId));
    }

    //For String values
    int resStringId = context.getResources().getIdentifier("string_ID", "string", context.getPackageName());
    if(resStringId != 0){
        System.out.println(context.getResources().getString(resStringId));
    } 
```

# javascript - 使用 jquery 'each' 获取类 x 的最后一个元素

> ID：15557918
> 
> 赞同：0
> 
> 时间：2013-03-21T20:55:55.437
> 
> 标签：javascript, jquery

class 表中的每一行都有两个`.js-type`类，`table`并且行数很多。

我正在使用以下内容来填充所有`.js-type`对象的数组：

```
$('.js-type').each(function(){
    myArray.push($(this).text());
}); 
```

我的问题是，有没有办法让我用类中每一行中的最后一个元素填充同一个数组`.table`？

这是我尝试过的：

尝试1：

```
$('.js-type:last-child').each(function(){
    myArray.push($(this).text());
}); 
```

尝试2：

```
$('.js-type:last').each(function(){
    myArray.push($(this).text());
}); 
```

尝试3：

```
$('.js-type').eq(1).each(function(){
    myArray.push($(this).text());
}); 
```

我很感激任何关于这个的建议。

提前谢谢了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T21:05:05.300

这将为您提供每行的最后一个元素：

```
$('.table tr>*:last-child').each(function(){
    myArray.push($(this).text());
}); 
```

这将为您提供最后一个`.js-type`元素

```
$('.table tr').find('td.js-type:last-of-type').each(function(){
        myArray.push($(this).text());
    }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T21:01:13.803

尝试这个！

```
$("tr").each( function () {
    myArray.push($(this).find(".js-type").next().text());
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T21:00:18.980

也许是这样的？

```
$("table tr").each(
    function(i, e)
    {
        myArray.push( $(e).find(".js-type").eq(1).text() );
    }
); 
```

# c# - 在达到方法时避免循环依赖

> ID：15557921
> 
> 赞同：1
> 
> 时间：2013-03-21T20:56:00.000
> 
> 标签：c#

我一直在试图弄清楚我在依赖项方面遇到的这个问题。我需要从 A 类到 B 类以及从 B 类到 A 类的引用。这甚至可能吗？A 持有我需要在 B 中使用的声明类型，因此我需要访问 A 到 B 和 B 到 A。

有没有办法解决这个问题或任何想法？A 中的类型不能移动，B 中的方法也不能移动。（否则不会有任何问题）。

GUI - Factory - XMLSerialize，其中 Factory 是 A，XML 是 B

//问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T21:15:30.220

这不仅听起来可能，而且听起来很正常。例如，一个`Person`类可以有一个`Department`类的引用，而`Department`可以有一个`Person`. 你会在各处找到这样的例子。

尽量避免`Person`在`Department`. 您希望使引用尽可能短，以避免内存泄漏。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T23:43:51.930

此代码具有循环引用，并且可以正常编译：

```
public class A {
    B b;
}

public class B {
    A a;
} 
```

所以我不确定到底是什么导致了你的问题。也许您正试图将 A 和 B 分别作为不同的程序集（又名不同的 dll）？不幸的是，这是不可能的。

如果您处于这种情况，那么您能做的最好的事情就是：

组装 1：

```
public interface IA { ... }
public interface IB { ... } 
```

装配 2（取决于 1）：

```
public class A {
  IB b;
} 
```

装配 3（取决于 2）：

```
public class B {
  IA a;
} 
```

装配 4（取决于 1-3）：

```
B b = new B();
A a = new A();
b.a = a;
a.b = b; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T21:14:21.693

最简洁的答案是不。你不能有循环依赖。您的问题的常见解决方案是将共享功能抽象为第三类，然后从 A 和 B 中引用它。如果您说这是不可能的，那么您的目标可能是不可能的。

# android - 在 Android 中通过蓝牙接收音频

> ID：15557933
> 
> 赞同：33
> 
> 时间：2013-03-21T20:56:46.410
> 
> 标签：android, bluetooth, streaming, audio-streaming, rfcomm

我想创建一个能够接收音频流的 Android 应用程序。我想过使用 A2DP 配置文件，但似乎 Android 不支持 A2DP 接收器。看起来有很多人正在寻找解决这个问题的方法。但是接收一个普通的比特流，然后在应用程序中将数据转换成音频呢？我正在考虑通过 RFCOMM（SPP 蓝牙配置文件）接收 PCM 或 Mp3 数据流，然后使用 AudioTrack 播放它。

首先，我如何通过 RFCOMM 在我的 Android 手机上接收比特流？是否可以通过 RFCOMM 接收比特流作为 PCM 或 Mp3 流？

其次，如果无法通过 RFCOMM 接收作为 PCM 或 Mp3 流的比特流，如何将接收到的比特流转换为音频？

第三，如何将接收到的数据转换为音频并“实时”同时播放音频？我可以只使用 onDataReceived 吗？

需要明确的是，我对使用 A2DP 配置文件不感兴趣！我想通过 RFCOMM（SPP 蓝牙配置文件）流式传输数据。接收到的数据流将是 PCM 或 Mp3。我想编写自己的应用程序，但如果有人知道可以解决此问题的应用程序，我会很高兴听到它！我正在使用 Android 2.3 姜饼。

/约翰尼

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-03-21T23:11:54.097

***不。***尝试编写处理此问题的 Android 应用程序不是解决方案。至少如果你想使用`A2DP Sink`角色。

事实是，正如您所提到的，Android 没有实现[`BlueZ`](http://en.wikipedia.org/wiki/Bluetooth_stack#BlueZ)关于功能的 API 调用（Android 使用的蓝牙堆栈直到 Jelly Bean 4.1）`A2DP sink`。你必须自己实现它们。我会尽力指导你，因为我在不久的过去也有兴趣自己做这件事。

默认情况下，您启用蓝牙的 Android 设备将自己宣传为`A2DP source`设备。您必须先更改此设置，以便附近的设备可能会将您的设备识别为接收器。为此，您必须修改***audio.conf***文件（通常位于***/etc/bluetooth/***中）并确保`Enable`密钥存在并且值`Source`已附加到此密钥，因此您将获得如下内容：

```
Enable=Source 
```

重新启动，附近的设备现在应该将您的设备识别为`A2DP sink`.

现在，当 A2DP 源设备开始将音频流式传输到您的手机时，您必须与 BlueZ 进行交互以做出适当的反应。

Android 和 BlueZ 正在通过`D-BUS`. 实际上，Android 连接到 DBUS_SYSTEM 通道并监听每个 BlueZ 广告，例如事件、文件描述符......

我记得我使用本机应用程序成功地将自己绑定到这个 d-bus 通道，并访问了 BlueZ 发布的各种事件。使用 BlueZ API 作为参考，这是相对容易实现的，[此处](http://bluez.cvs.sourceforge.net/viewvc/bluez/utils/hcid/dbus-api.txt)提供了 BlueZ API 。如果你这样做，你将不得不构建一个本地应用程序 (C/C++) 并为你的平台编译它。您必须能够使用`Android NDK`.

如果你觉得它很难使用`D-BUS`，你可以试试我刚刚发现的这个 Java 库，它可以为你处理与 D-BUS 的通信：http: [//jbluez.sourceforge.net/](http://jbluez.sourceforge.net/)。我从未使用过它，但我认为值得一试。

您真正需要做的是找出 A2DP 源设备何时与您的手机配对，以及他何时开始流式传输音乐。您可以通过 D-BUS 检索这些事件。一旦有人尝试流式传输音乐，您需要告诉 BlueZ 您的本机应用程序将处理它。有一个很好的文档解释了你应该处理的事件流。该文档可[在此处](http://download.tizen.org/misc/media/conference2012/wednesday/bayview/2012-05-09-0900-0940-bluez-_plugging_the_unpluggable.pdf)访问。您感兴趣的部分在第 7 页。给定示例中的接收器应用程序是，`PulseAudio`但它也可能是您的应用程序。

当您调用该`org.bluez.MediaTransport.Acquire`方法时，BlueZ 将向您转发一个 UNIX 套接字。读取此套接字将为您提供当前由远程设备流式传输的数据。但我记得有一个在 BlueZ 堆栈上工作的人告诉我，在这个套接字上读取的数据不是 PCM 纯音频，而是编码的音频内容。数据通常以称为`SBC` *（低复杂度子带编码）*的格式编码。

解码 SBC 并不难，你可以[在这里](http://git.kernel.org/cgit/bluetooth/sbc.git)找到解码器。

最终步骤是将 PCM 音频转发到您的扬声器。

为了防止您卡住并以更简单的方式测试您的应用程序，您可以使用`d-bus`应该在您的 Android 系统上可用的二进制文件。他位于***/system/bin***。

在执行上述任何操作之前可以进行的快速测试可能是：

**获取设备列表：**

> dbus-send --system --dest=org.bluez --print-reply / org.bluez.Manager.GetProperties

这将返回一个适配器数组及其路径。获得这些路径后，您可以检索与您的适配器配对的所有蓝牙设备的列表。

**获取配对设备：**

> dbus-send --system --print-reply --dest=org.bluez /org/bluez/{pid}/hci0 org.bluez.Adapter.GetProperties

这将为您提供设备数组字段中的配对设备列表。

获得与蓝牙适配器配对的设备列表后，您就可以知道它是否已连接到 AudioSource 接口。

**获取连接到 AudioSource 接口的设备：**

> dbus-send --system --print-reply --dest=org.bluez /org/bluez/{pid}/hci0/dev_XX_XX_XX_XX_XX_XX org.bluez.AudioSource.GetProperties org.bluez.Manager.GetProperties

希望这可以帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-14T00:20:13.490

另一种解决方法是使用 HandsFreeProfile。

在 Android 中，BluetoothHeadset 正在努力解决这个问题。等到状态更改为 BluetoothHeadset.STATE_AUDIO_CONNECTED。

然后您可以从蓝牙耳机录制音频。

```
 mMediaRecorder = new MediaRecorder();
    mMediaRecorder.setAudioSource(MediaRecorder.AudioSource.MIC);
    mMediaRecorder.setOutputFormat(MediaRecorder.OutputFormat.THREE_GPP);
    mMediaRecorder.setOutputFile(mFilename);
    mMediaRecorder.setAudioEncoder(MediaRecorder.AudioEncoder.AMR_NB);
    try {
        mMediaRecorder.prepare();
    } catch (IllegalStateException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    mMediaRecorder.start(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-04-17T10:29:38.383

**[不相关但有效]**这个 hack 仅通过 WIFI 热点提供 mp3 流（我在只有 AUX 输入的汽车中使用它）：

1.  安装应用程序[AirSong](https://play.google.com/store/apps/details?id=com.autoindent.airsong&hl=en) ,
2.  打开wifi热点，
3.  将另一台设备连接到该热点，
4.  从设备的浏览器访问 192.168.43.1:8088 即可。

（想知道为什么只有“192.168.43.1”？因为那是连接到 Android 热点的任何设备的默认网关）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-27T03:48:12.747

audio.conf seems to be missing in Android 4.2.2?

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-06-28T14:46:23.713

要通过 rfcomm 接收 pcm 音频流，您可以使用代码流作为提示解释（[在 C 中读取音频文件并通过蓝牙转发以在 Android 音轨中播放](https://stackoverflow.com/questions/17362513/reading-audio-file-in-c-and-forwarding-over-bluetooth-to-play-in-android-audio-t)），并进行更改。将初始化时使用的频率从 44100 更改为 22050

```
AudioTrack track = new AudioTrack(AudioManager.STREAM_MUSIC,22050,AudioFormat.CHANNEL_OUT_MONO,AudioFormat.ENCODING_PCM_8BIT,10000, AudioTrack.MODE_STREAM); 
```

注意：此流仍然包含一些噪音，但您的

> “通过 RFCOMM（SPP 蓝牙配置文件）接收 PCM 数据流，然后使用 AudioTrack 播放。”

将工作。

# email - AWS SES - 发送电子邮件

> ID：15557942
> 
> 赞同：3
> 
> 时间：2013-03-21T20:57:11.130
> 
> 标签：email, amazon-web-services

我已经创建了一个 SES 帐户并且我已经验证了我的域 - 很简单，因为 A 记录已经在 AWS route53 中了。我现在需要发送电子邮件。注意：我还创建了一个 smtp 用户帐户并拥有密钥。

问题 - 我可以使用任何（比如说我喜欢 PHP）php 脚本通过 SES 发送电子邮件吗？

我发现了几个似乎有 SES 脚本的网站，例如[http://www.orderingdisorder.com/aws/ses/](http://www.orderingdisorder.com/aws/ses/)但想问一下我的域现在是否已经过验证并且我有用户/密钥等 SES 真的只是一个 SMTP 网关，我可以使用任何（工作）脚本通过这个接口发送电子邮件吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T20:59:11.883

您可以使用他们的 SMTP 网关或通过 AWS SDK for PHP 以编程方式发送电子邮件。只需下载 SDK，将其包含在您的 PHP 文件中即可。

[http://aws.amazon.com/about-aws/whats-new/2011/12/13/amazon-simple-email-service-gets-simpler-with-smtp/](http://aws.amazon.com/about-aws/whats-new/2011/12/13/amazon-simple-email-service-gets-simpler-with-smtp/)

[http://docs.aws.amazon.com/AWSSDKforPHP/latest/#i=AmazonSES](http://docs.aws.amazon.com/AWSSDKforPHP/latest/#i=AmazonSES)

[http://aws.amazon.com/sdkforphp/](http://aws.amazon.com/sdkforphp/)

# php - 在 Codeigniter 中使用会话类时的加密密钥

> ID：15557956
> 
> 赞同：0
> 
> 时间：2013-03-21T20:57:56.470
> 
> 标签：php, codeigniter, session

当我在 Codeigniter 中从 autoload.php 自动加载会话库时，浏览器中显示以下错误：“为了使用 Session 类，您需要在配置文件中设置加密密钥。”

如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T05:50:50.080

转到您的 config.php

搜索这个

```
$config['encryption_key'] = ''; 
```

并将其更改为

```
$config['encryption_key'] = 'something'; 
```

其中某物是您选择的加密密钥

# sql-server-2008 - 视图是否会立即反映其基础表中的数据更改？

> ID：15557958
> 
> 赞同：2
> 
> 时间：2013-03-21T20:58:04.440
> 
> 标签：sql-server-2008, entity-framework, views

我有一个`ObjectDisplay`由两个相关表组成的视图： `Object`和`State`. `State`表示 的状态，视图从每个`Object`的最新状态中提取一些细节。`State``Object`

在显示此信息的页面上，用户可以输入一些评论，从而创建一个新的`State`. 创建新的 后`State`，我立即拉出`Object`from`ObjectDisplay`并将其发送回以放入局部视图并替换`Object`页面上网格中的 。

```
// Add new State.
db.States.Add(new State()
{
    ObjectId = objectId,
    Comments = comments,
    UserName = username
});

// Save the changes (executes all of the above).
db.SaveChanges();

// Return the new Object information.
return db.Objects.Single(c => c.ObjectId == objectId); 
```

根据我的数据库跟踪，`Single`调用发生在调用后大约 70 毫秒`SaveChanges`，并且它发生在同一个 SPID 上。

现在解决问题： ~~数据库默认值`RecordDate`in `State`to `GETUTCDATE()`- 我自己不提供日期。我看到的是`Object`返回的有`State`旧`RecordDate`的`State`和旧`Comments`的新`State`信息`State`。~~ 我看到`Object`返回的有 old`State`的信息。当我刷新页面时，所有正确的信息都在那里，但在数据库/EF 的初始调用中返回了错误的信息。

所以..有什么问题？视图更新速度不够快吗？EF会发生什么事情吗？我真的不知道从哪里开始寻找。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T16:29:25.843

如果您之前在相同`Object`的 中加载了相同的实体`DbContext`，EF 将返回具有陈旧值的缓存实例，并忽略从 SQL 返回的值。

最简单的解决方案是在返回之前重新加载实体：

```
var result = db.Objects.Single(c => c.ObjectId == objectId);
db.Entry(result).Reload();
return result; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T21:24:42.540

这确实很奇怪。在 SQL Server 中，视图默认情况下不会持久化，因此会立即显示基础数据中的更改。您可以在视图上创建聚集索引，有效地持久化查询，但在这种情况下，数据会同步更新，因此您应该立即看到更改。

如果您正在使用快照隔离级别，您的更改可能不会立即对其他 SPID 可见，但由于您在同一个 SPID 上并且不使用快照隔离，这也不是罪魁祸首。

此时唯一剩下的就是应用层了。您实际上是在调用堆栈中较高的位置使用 Single 调用的结果，还是在某处丢失了。我假设页面的刷新使用不同的代码路径，这可以解释为什么它在那里工作。

# c# - 更新“父”实体而不是创建它

> ID：15557960
> 
> 赞同：0
> 
> 时间：2013-03-21T20:58:15.883
> 
> 标签：c#, .net, asp.net-mvc, entity-framework-4

我列出了一系列项目，我希望在顶部实现一个选项，您可以在其中单击并为该实体添加一个子对象，让我解释一下：

```
 public class SupportItem
   {
    [Display(Name = "Categoría")]
    [ConcurrencyCheck, Required]

    public string Type { get; set; }

    [Key, HiddenInput(DisplayValue = false)]       
    public int SupportItemId { get; set; }

    [Display(Name = "Nombre")]
    [ConcurrencyCheck,Required]

    public string Name { get; set; }

    [ConcurrencyCheck]
    [Display(Name = "Descripción Corta")]
    [DataType(DataType.MultilineText)]
    [Required]
    public string Description { get; set; }

     [HiddenInput(DisplayValue = false)]
    public virtual SupportItem Father { get; set; }

    [Display(Name = "Descripción detallada")]
    [DataType(DataType.MultilineText)]
    [Required]
    public string LongDescription { get; set; }
    [HiddenInput(DisplayValue = false)]
    public bool Children { get; set; }
} 
```

现在你可以看到，这个实体有一个父项，它的类型是支持项。现在我要做的是将它们全部列出并添加一个选项，让您可以轻松地为您选择的项目添加一个子项，这是视图定义：

```
 @model IEnumerable<Domain.Entities.SupportItem>

    @{
        ViewBag.Title = "IndexSupportItems";
        Layout = "~/Views/Shared/_AdminLayout.cshtml";
    }

    <h2>Index Support Items</h2>

    <p>
    @Html.ActionLink("Crear nuevo item principal", "Create")
    </p>
    <table class="Grid">
    <tr>
    <th>
        Tipo
    </th>
    <th>
        Nombre
    </th>
    <th>
        Descripción
    </th>
    <th> 
        Acciones
    </th>                
    </tr>

     @foreach (var item in Model) 
    {
    <tr>
    <td>@item.Type</td>
    @if(item.Children)
    {
    <td>@Html.ActionLink(item.Name,"ListChildren", new{item.SupportItemId})</td>
    }
    else
    {<td>@item.Name</td>

    }
    <td>@item.Description</td>
        <td>
       @Html.ActionLink("Delete","DeleteSupportItem", new{item.Father.SupportItemId})<br />
        @Html.ActionLink("Add subitem sub-item","AddSubitem", new{item.SupportItemId})<br />
        @Html.ActionLink("Edit","EditSupportItem", new{item.SupportItemId})    
    </td>

</tr>
    }

    </table> 
```

现在您可以看到，执行此操作的操作链接指向一个名为 AddSubitem 的方法，该方法的实现如下：

```
 public ViewResult AddSubitem(int supportItemId)
    {
        SupportItem child = new SupportItem() { Father = repo.GetSupportItemFromId(supportItemId) };

        return View(child);
    } 
```

如您所见，我收到一个 supportItemId，它是来自父实体（我想向其添加新子实体）的 id，在我的数据库上下文中找到它并创建新对象并指向我刚刚找到的父对象. 这样做之后，它返回的视图是这样的：

```
 @model Domain.Entities.SupportItem

    @{
        ViewBag.Title = "AddSubitem";
    }

    <h2>AddSubitem</h2>

    @using (Html.BeginForm()) {
        @Html.ValidationSummary(true)

        <fieldset>
            <legend>Support Item</legend>

            <div class="editor-label">
        @Html.LabelFor(model => model.Type)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.Type)
        @Html.ValidationMessageFor(model => model.Type)
    </div>

    <div class="editor-label">
        @Html.LabelFor(model => model.Name)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.Name)
        @Html.ValidationMessageFor(model => model.Name)
    </div>

    <div class="editor-label">
        @Html.LabelFor(model => model.Description)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.Description)
        @Html.ValidationMessageFor(model => model.Description)
    </div>

    <div class="editor-label">
        @Html.LabelFor(model => model.LongDescription)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.LongDescription)
        @Html.ValidationMessageFor(model => model.LongDescription)
    </div>

            <p>
                <input type="submit" value="Create" />
            </p>
        </fieldset>
    }

    <div>
        @Html.ActionLink("Back to List", "Index")
    </div>

    @section Scripts {
        @Scripts.Render("~/bundles/jqueryval")
    } 
```

在这个视图中，用户将设置一些变量，例如名称和描述，然后提交对象，以便我可以将它持久化到数据库中，**问题是**我从这个视图中获取的对象有它的父亲 id 作为它自己的 id 和父亲属性为空，因此我最终更新了我想用这个方法添加一个孩子的父亲对象：

public bool SaveSupportItem(SupportItem supportItem) { bool retorno = false;

```
 if (supportItem.SupportItemId == 0)
        {
            context.SupportItems.Add(supportItem);
            supportItem.Father.Children = true;
            retorno = true;
        }
        else
        {
            SupportItem itemDB = context.SupportItems.Find(supportItem.SupportItemId);
            if (itemDB != null)
            {
                itemDB.Name = supportItem.Name;
                itemDB.Type = supportItem.Type;
                itemDB.LongDescription = supportItem.LongDescription;
                itemDB.Description = supportItem.Description;
                retorno = true;
            }
        }
        context.SaveChanges();
        return retorno;
    } 
```

我在这里做错了什么？为什么我不能创建一个新对象？

感谢您抽出宝贵时间阅读本文，我们将不胜感激任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T22:13:19.223

好吧，试试这个：

**将此添加到您的 SupportItem 类**

```
public class SupportItem
{
  [Key]
  [HiddenInput(DisplayValue = false)]
  [ForeignKey("Father"), DatabaseGenerated(DatabaseGeneratedOption.None)]       
  public int SupportItemId { get; set; }

  public virtual Father Father { get; set; }

  ...................
  ...................
} 
```

然后改变：

`@Html.ActionLink("Add subitem sub-item","AddSubitem", new{item.SupportItemId})<br />`

至

`@Html.ActionLink("Add subitem sub-item","AddSubitem", "Controller Name here" new{SupportItemId = @Model.FatherId})<br />`

同样因为我们需要FatherId `new{SupportItemId = @Model.FatherId}`，所以`ActionLink`需要在Father 视图中，例如在Father Details 中只有一个Father 是当前的，或者您必须将supportItem 与特定的父亲相关联。

假设您使用的是 ViewModel，您的控制器可能如下所示：

```
 [HttpGet]
    public ActionResult CreateSuppo(int supportItemId)
    {
        var model = new CreateSupportItemViewModel ();
        model.SupportItemId= supportItemId;
        return View(model);
    }

    [HttpPost]
    public ActionResult Create(CreateSupportItemViewModel viewModel)
    {
        if(ModelState.IsValid)
        {
            var father= db.Fathers.Single(f => f.FatherId == viewModel.SupportItemId);
            var supportItem= new SupportItem();
            supportItem.Name = viewModel.Name;
            ....................
            .................
            father.SupportItems.Add(supportItem);

            db.SaveChanges();               
        }
        return View(viewModel);
    } 
```

# eclipse - Eclipse 快捷方式：Content Assist 弹出菜单中的下一项选择

> ID：15557961
> 
> 赞同：1
> 
> 时间：2013-03-21T20:58:17.323
> 
> 标签：eclipse

是否可以将键盘快捷键绑定到在内容辅助弹出菜单中选择下一项的操作？

* * *

所需配置：

*   按下`OPTION /`可调用 Content Assist 弹出菜单
*   按下`CONTROL N`可向下导航 Content Assist 弹出菜单项，直到我突出显示我想要的一项

我知道这是可能的，因为我知道有人可以在他的 Eclipse 中做到这一点。我使用它并且它有效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-04-19T13:35:24.727

这是一个解决方案：

在“首选项”-“键”中，找到您的组合键将光标向上/向下移动一行（搜索命令“向上行”/“向下行”），并将其范围设置为“在对话框/窗口中”以使其在内容辅助提示下工作。

请注意，此配置**不会**使其在所有窗口中都有效。至少，不在“开源......”（`Ctrl`++ `Shift`）`R`中。

# php - 如何对数组中的每个第 2、第 3 和第 5 个元素进行操作？

> ID：15557965
> 
> 赞同：0
> 
> 时间：2013-03-21T20:58:32.263
> 
> 标签：php, arrays, loops

我有一个非常简单的索引数组：

```
Array
(
    [0] => 1
    [1] => Buster Posey
    [2] => SF
    [3] => C
    [4] => 16.60
    [5] => 5
    [6] => 28
    [7] => 2
    [8] => Joe Mauer
    [9] => Min
    [10] => C
    [11] => 57.60
    [12] => 35
    [13] => 80
    ... 
```

我需要将每个第 2、第 3 和第 5 个键值添加到`$str`.

我可以处理`$str`.

为清楚起见，我`$str`给定的上述数组的结果如下所示：

```
Buster Posey, SF, 16.60
Joe Mauer, Min, 57.60 
```

这是数组的第 2、第 3 和第 5 个元素，加上几个逗号和一个换行符，以便在数组中一直重复。

**编辑：**

我的问题有误。下面salathe的评论是正确的。它们以七个为一组，因此我需要每个第 2、第 3 和第 5 个元素，然后跳过 2 并重新开始该过程。我将按照建议使用[array_chunk](http://php.net/array_chunk)。感谢所有的答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T21:02:59.650

像这样的东西？

```
$i = 0;

foreach($array as $value) {
    if ($i++ % 2 == 0 || $i++ % 3 == 0 || $i++ % 5 == 0) {
        echo $value;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T21:01:30.630

您需要使用模运算符 ( `%`)。它返回一个数字除法的余数，并且通常用于检查一个数字是否是另一个数字的倍数。

所以，要检查一个数字是偶数（完全被 2 整除），你做

```
$odd = $number%2; 
```

为了使其成为一个完整的答案，您在循环中使用此标准（不知道如何做到这一点）：

```
for($i=0; $i<count($array)-1;$i++){
  if($i%5==0) { $str .= $array[$i]; }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T21:03:27.400

两种不同的方法：遍历所有条目并使用 mod，或者针对每个不同的条件进行循环。

多合一循环：

```
foreach ($array as $k => $v){
    if ($k % 2 == 0 || $k % 3 == 0 || $k % 5 == 0){
        .. do something with $v
    }
} 
```

不同的循环：

```
for ($i=0; $i<count($array); $i+=2) .. do something with $array[$i]
for ($i=0; $i<count($array); $i+=3) .. do something with $array[$i]
for ($i=0; $i<count($array); $i+=5) .. do something with $array[$i] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T21:04:51.153

您需要按照步骤 2-1-2、2-1-2 进行序列。你可以用双循环，循环+案例来做到这一点......

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-21T21:08:04.290

我不太了解 PHP，但如果我理解正确，您需要按照进度连接索引 2、3、5 甚至更多：

```
n[0] = 2
n[1] = 3
n[2] = 5
...
n[i] = n[i-1] + n[i-2] 
```

因此，您可能需要创建一个需要连接的索引数组，提供前两个值（在我看来就像一个斐波那契数列）：

```
n[0] = 2;
n[1] = 3;
for(i=2, i<m, i++) {
    n[i] = n[i-1] + n[i-2];
} 
```

然后，您可以使用此数组连接数组中所需的值：

```
for(i=0; i<m; i++) {
    str = concatenate(str, arr[n[i]]);
} 
```

（我知道语法不是 PHP ......但我认为它说明了这个想法）

如果您需要不同的进展，您需要回答这个问题：如何使用先前的值计算下一个值？然后你可以建立一个算法来完成这项工作。

希望这对您有所帮助。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-21T21:27:51.043

```
foreach( array_chunk( $array, 7) as $row) {
    echo $row[1] . ' , ' . $row[2] . ' , ' . $row[4] . "\n";
} 
```

# jquery - 两个jQuery的一个RequireJS

> ID：15557970
> 
> 赞同：0
> 
> 时间：2013-03-21T20:58:44.177
> 
> 标签：jquery, requirejs

我有一个使用标准非 AMD javascripts 的网站，它有 jQuery 版本“1.7.2”。我希望转向使用 require.js 我有一个看起来像这样的主文件。

```
require.config({
    paths: {
        jquery: "../components/jquery/jquery.min"
    }
});

require(["jquery"], function($) {
    console.log($().jquery;);
}); 
```

我想要发生的是让它运行和记录（1.9.1），并且让我能够`console.log($().jquery;);`在浏览器中运行并获得“1.7.2”。这意味着所有需要依赖项都使用新版本但需要自己不不要乱用全局范围。我怎样才能做到这一点？

在 main 的构建文件中，我可以看到 jQuery 被包含在任何函数中。我希望它嵌套在一个函数中，防止它在全局范围内。

我什至可以做这样的事情

```
require.config({
  paths: {
    jquery: "../components/jquery/jquery.min"
  },
  shim: {
    jquery:{
      exports: "$JQ"
    }
  }
});

define("main", ["jquery"], function($JQ) {
  console.log($JQ().jquery);
}); 
```

但它不工作...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T21:19:30.557

也许试试这个：

**编辑**：

```
require.config({
    paths: {
        jquery: "..components/jquery/jquery.min",
        jquery172: "../components/jquery/jquery-1.7.2.min",
        jquery191: "../components/jquery/jquery-1.9.1.min"
    }
});

// use jQuery 1.7.2 here
define("main", ["jquery172"], function($JQ) {
  console.log($JQ().jquery);
});

// use jQuery 1.9.1 here
define("some other module", ["jquery191"], function($JQ) {
  console.log($JQ().jquery);
});

// use whatevers global jQuery here
define("some other module", ["jquery"], function($JQ) {
  console.log($JQ().jquery);
}); 
```

# javascript - 创建具有全局范围的 mousedown 事件

> ID：15557975
> 
> 赞同：0
> 
> 时间：2013-03-21T20:58:59.373
> 
> 标签：javascript, jquery, mouseevent, mousedown, onmousedown

我正在研究一些东西来解决另一个系统约束的问题。不理想，但是..

无论如何，我需要生成一个点击/触摸然后找出 poing 下的最上面的元素`(300, 300)`。我在用：

```
event = $.Event( "mousedown", { pageX:300, pageY:300 } );
$("window").trigger( event ); 
```

然后我在听：

```
$(window).bind 'mousedown', (jQueryEvent)->
    console.log jQueryEvent.target 
```

但是，`event.target`总是返回窗口。这是有道理的。但是，我想做的是在整个页面上生成一个 mousedown 事件，然后`event.target`用来找出`(pageX, pageY)`. 有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T21:20:39.927

我建议你看看[http://www.zehnet.de/2010/11/19/document-elementfrompoint-a-jquery-solution/](http://www.zehnet.de/2010/11/19/document-elementfrompoint-a-jquery-solution/)这是一个完整的实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T21:15:10.820

你看过document.elementFromPoint吗？这可能是一种在特定位置找到元素的干净方法。

[https://developer.mozilla.org/en-US/docs/DOM/document.elementFromPoint](https://developer.mozilla.org/en-US/docs/DOM/document.elementFromPoint)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T21:33:01.270

pageX 和 pageY 在事件变量本身上，而不是在目标上。但是它们会被 mousedown 事件覆盖。你不需要为此创建一个事件，关闭就可以了：

```
function hotspot (a, b) {
    var x = a[0] || 0;
    var y = a[1] || 0;
    var w = b[0] || 0;
    var h = b[1] || 0;
    function between (x2, y2) {
        return x2 >= x &&
            y2 >= y &&
            x2 <= (x + w) &&
            y2 <= (y + h);
    }
    return function (e) {
        console.log("mouse x y:", e.pageX, e.pageY);
        console.log("target x y w h:", x, y, w, h);
        console.log(between(e.pageX, e.pageY));
    }
}
$(document).on('mousedown', hotspot([0,0], [300,300])); 
```

[http://jsfiddle.net/gpaMz/1/](http://jsfiddle.net/gpaMz/1/)

编辑：重新阅读您的问题，我只是不知道您要达到的目标。

# scala - Scala jvm没有退出

> ID：15557976
> 
> 赞同：0
> 
> 时间：2013-03-21T20:59:04.390
> 
> 标签：scala, jvm, exit

我是一名 Java 程序员，在空闲时间开始学习 Scala。有这个小问题让我发疯...

每次运行一个Scala脚本，执行结束，jvm不退出，总是要自己kill掉进程，挺烦的

案例如下：给定 main.scala 文件中的 little hello world

```
object Main {
    def main(args: Array[String]): Unit = {
       println("Hello world")
    }
} 
```

运行它

```
scala main.scala 
```

然后用 ps -ef 我有

501 5739 5727 0 9:46PM ttys000 0:18.08 /usr/bin/java -Xmx256M -Xms32M -Xbootclasspath/a:/MyStuff/ScalaFiles/scala-2.10.1/lib/akka-actors.jar:/MyStuff/ScalaFiles/ scala-2.10.1/lib/jline.jar:/MyStuff/ScalaFiles/scala-2.10.1/lib/scala-actors-migration.jar:/MyStuff/ScalaFiles/scala-2.10.1/lib/scala-actors。 jar:/MyStuff/ScalaFiles/scala-2.10.1/lib/scala-compiler.jar:/MyStuff/ScalaFiles/scala-2.10.1/lib/scala-library.jar:/MyStuff/ScalaFiles/scala-2.10.1 /lib/scala-partest.jar:/MyStuff/ScalaFiles/scala-2.10.1/lib/scala-reflect.jar:/MyStuff/ScalaFiles/scala-2.10.1/lib/scala-swing.jar:/MyStuff/ ScalaFiles/scala-2.10.1/lib/scalap.jar:/MyStuff/ScalaFiles/scala-2.10.1/lib/typesafe-config.jar -classpath "" -Dscala.home=/MyStuff/ScalaFiles/scala-2.10。 1 -Dscala.usejavacp=true scala.tools.nsc.MainGenericRunner scala.tools.nsc.CompileServer

这当然是jvm，必须自己退出。

我试着把

```
System.exit(0) 
```

或者`sys.exit(0)`

但没有任何改变。你有同样的问题吗？

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T23:03:34.960

您可能想研究一种不同的方法来运行 scala 脚本：

*   最先进的是使用SBT 的[scalas](http://www.scala-sbt.org/release/docs/Detailed-Topics/Scripts)，它允许您处理依赖项

# php - Filemaker PHP API newPerformScriptCommand

> ID：15557979
> 
> 赞同：0
> 
> 时间：2013-03-21T20:59:13.310
> 
> 标签：php, filemaker

我对 filemaker 12 php api 有疑问。

我正在尝试运行一个脚本，该脚本设置一个字段，该字段反过来确定文件制作器布局上显示哪些记录。似乎无论我将什么参数发送到脚本中，该字段都设置为默认值 1。

该脚本在 filemaker 中正确运行，我还尝试在 filemaker 脚本中硬编码一个不同的值，这也可以作为例外。

我是filemaker的新手，所以我很困惑为什么从php调用脚本与从filemaker调用脚本的工作方式不同。

这是我的 php 代码：

```
$newPerformScript = $fm->newPerformScriptCommand($layout_name, $script_name,  $parameter);
$result = $newPerformScript->execute();

$result_record = $result->getFirstRecord();

//The data I'm retrieving is in this related set
$related_set =& $result_record->getRelatedSet($related_set_name); 
```

可以提供的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-30T11:53:42.657

嗯，有几点：

1.  检查您使用的帐户/密码是否具有权限集，该权限集授予其成功运行脚本所需的所有权限，包括访问*相关表中所需的任何记录和字段*。不要忘记包括对在关系中用作匹配键的任何字段的权限。如果这些字段的权限被拒绝，您将不会收到错误消息，但不会找到任何记录。

2.  检查您的脚本是否以正确的布局结束（您的网络帐户有权查看的布局）

3.  如果您正在获取相关记录，您需要有一个与您正在使用的布局上的所需关系相对应的门户，以便检索记录。

# c++ - 将第一个 boost::regex 匹配放入字符串

> ID：15557981
> 
> 赞同：3
> 
> 时间：2013-03-21T20:59:13.903
> 
> 标签：c++, stdstring, boost-regex

不知何故，我没能找到，如何只将第一次出现或正则表达式放入字符串。我可以创建一个正则表达式对象：

```
static const boost::regex e("<(From )?([A-Za-z0-9_]+)>(.*?)"); 
```

现在，我需要匹配`([A-Za-z0-9_]+)`到`std::string`，比如说`playername`。

```
std::string chat_input("<Darker> Hello");
std::string playername = e.some_match_method(chat_input, 1);   //Get contents of the second (...) 
```

我错过了什么？
应该用什么代替，应该采用`some_match_method`什么参数？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-21T21:22:49.607

你可以这样做：

```
static const regex e("<(From )?([A-Za-z0-9_]+)>(.*?)");
string chat_input("<Darker> Hello");
smatch mr;
if (regex_search(begin(chat_input), end(chat_input), mr, e)
    string playername = mr[2].str();   //Get contents of the second (...) 
```

请注意，正则表达式是 C++11 的一部分，所以你不需要提升它，除非你的正则表达式很复杂（因为 C++11 和更新版本仍然难以处理复杂的正则表达式）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-21T21:11:11.587

我认为您缺少的是`boost::regex`正则表达式，但它不会对给定的输入进行解析。您实际上需要将它用作`boost::regex_search`or的参数`boost::regex_match`，它根据正则表达式评估字符串（或迭代器对）。

```
static const boost::regex e("<(From )?([A-Za-z0-9_]+)>(.*?)"); 
std::string chat_input("<Darker> Hello");
boost::match_results<std::string::const_iterator> results;
if (boost::regex_match(chat_input, results, e))
{
     std::string playername = results[2];  //Get contents of the second (...)
} 
```

# php - 如何发送 PHP 电子邮件

> ID：15557983
> 
> 赞同：-3
> 
> 时间：2013-03-21T20:59:19.747
> 
> 标签：php, html

这曾经有效，但现在它不会发送用户输入，只是消息：电子邮件：名称：等。 php 应该可以工作，我认为检索 html 可能有问题？

```
<?php 
if ($_SERVER['REQUEST_METHOD'] == 'POST'){
$to="fakeemail@sorry.com";
$subject="Tech Muffins Contact";
$message="Name: ".$_REQUEST['name']."\n\nEmail: ".$_REQUEST['email']."\n\nMessage: ".$_REQUEST['message'];
mail($to, $subject, $message, $from );
}
?>
<!doctype html>
<html>

    <head>
        <meta charset="utf-8">
        <title>Tech Muffins</title>
        <link rel="shortcut icon" href="icon.ico" />
        <!--[if lt IE 9]>
            <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
        <![endif]-->
        <link href="techmuffins.css" rel="stylesheet" type="text/css">
        <link href='http://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css'>
        <script src="http://code.jquery.com/jquery-latest.min.js" type="text/javascript"></script>
        <script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.10.1/jquery-ui.min.js"></script>
        <script src="virus_min.js" type="text/javascript"></script>
        <script src="hide.js"></script>
    </head>

    <body>
        <div id="header"></div>
        <div id="content">
            <ul id="menu">
                <a href="">
                    <li id="page">Home</li>
                </a>
                <a href="#">
                    <li id="contact">Contact
                        <form id="contactform" action="" method="post" autocomplete="off">
                            <input type="text" name="name" placeholder="name" autofocus required>
                            <input type="email" id="email" name="email" placeholder="email" required>
                            <textarea name="message" placeholder="message" required></textarea>
                            <input type="submit" value="submit"></input>
                        </form>
                    </li>
                </a>
            </ul>
            <div id="currentvid">
                <iframe src="http://www.youtube.com/embed/NlB4g1IR0nQ?&iv_load_policy=3&rel=0"></iframe>
            </div>
             <h1 id="title">1\. Create Billboard</h1> 
            <div id="videos">
                <ul id="videomenu">
                    <a href="NlB4g1IR0nQ" class="youtube">
                        <li id="active">1\. Create Billboard</li>
                    </a>
                    <a href="DmLffEwMIDA" class="youtube">
                        <li>2\. Illustrator Tutorial</li>
                    </a>
                    <a href="PhlTstOPF3c" class="youtube">
                        <li>3\. Remote Server</li>
                    </a>
                    <a href="nmeJrM30pz0" class="youtube">
                        <li>4\. Brush Presets</li>
                    </a>
                    <a href="N7HldTtKYUg" class="youtube">
                        <li>5\. Audio Editing</li>
                    </a>
                    <a href="uq3worB22eM" class="youtube">
                        <li>6\. Background Editing</li>
                    </a>
                    <a href="Px29iXqYQIc" class="youtube">
                        <li>7\. PHP Theme Change</li>
                    </a>
                    <a href="L6bBsrA4xRo" class="youtube">
                        <li>8\. Photoshop Tutorial</li>
                    </a>
                     <a href="2S8kysshs2A" class="youtube">
                        <li>9\. Flash Shape Tween</li>
                    </a>

                     <a href="b78XC2LE8bE" class="youtube">
                        <li>10\. Shiny Text Tutorial</li>
                    </a>

                        <a href="dZMVmaxPgCM" class="youtube">
                        <li>11\. HTML5 Canvas</li>
                    </a>

                    <a href="9vLnfWT9wQ8" class="youtube">
                        <li>adorable.</li>
                    </a>
                    <a href="_OBlgSz8sSM" class="youtube">
                        <li>Charlie Bit My Finger</li>
                    </a>
                    <a href="9bZkp7q19f0" class="youtube">
                        <li>Gangnam Style</li>
                    </a>
                    <a href="1f4AhcX3EyI" class="youtube">
                        <li>MTCHS Harlem Shake</li>
                    </a>
                    <a href="AKuBMihmVHQ#t=24s" class="youtube">
                        <li>Mystery</li>
                    </a>
                    <a href="DKWdSCt4jGE#t=14s" class="youtube">
                        <li>Stop Motion</li>
                    </a>
                    <a href="feCXr86HzMk" class="youtube">
                        <li>DOG</li>
                    </a>
                </ul>
            </div>
        </div>
        <div id="alert">Thank you for visiting my page. It was created with lots of love and frustration. To exit this alert, click on the footer or press escape. Or simply delete system32; that works too.</div>
        <div id="footer">&copy; Josue Espinosa 2013</div>
    </body>

</html> 
```

有人可以为我指出如何发送电子邮件或为什么它不起作用的正确方向吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T21:01:45.003

```
<?php 
if (isset($_POST)){
   $to = "someone@example.com";
   $subject = "Test mail";
   $message = "Name: ".$_POST['name']. "\r\n Email: ".$_POST['email']. "\r\n Message: ".$_POST['message'];
   $from = "someonelse@example.com";
   $headers = "From:" . $from;
   mail($to,$subject,$message,$headers);
   echo "Mail Sent.";
} 
```

[在这里查看更多](http://www.w3schools.com/php/php_mail.asp)

# algorithm - 使用冷却时间优化动作顺序的算法

> ID：15557986
> 
> 赞同：5
> 
> 时间：2013-03-21T20:59:20.333
> 
> 标签：algorithm, sorting, optimization

我可以从“动作”列表中选择每秒执行一次。列表中的每个动作都有一个代表它的价值的数值，还有一个代表它的“冷却时间”的值——在再次使用该动作之前我必须等待的秒数。该列表可能如下所示：

*   动作 A 的值为 1，冷却时间为 2 秒
*   动作 B 的值为 1.5，冷却时间为 3 秒
*   动作 C 的值为 2，冷却时间为 5 秒
*   动作 D 的值为 3，冷却时间为 10 秒

所以在这种情况下，订单 ABA 的总值为 (1+1.5+1) = 3.5，这是可以接受的，因为 A 的第一次使用发生在 1 秒，A 的最终使用发生在 3 秒，然后这两者之差大于等于A的冷却时间，2秒。AAB 的顺序不起作用，因为您只间隔一秒钟就执行 A，比冷却时间短。

我的问题是尝试优化使用操作的顺序，在一定数量的操作上最大化总价值。显然，如果您只使用一个动作，最佳顺序是执行动作 D，总价值为 3。两个动作的最大值将来自执行 CD 或 DC，总价值为 5。当您总共执行 10 或 20 或 100 个动作时，会变得更加复杂。我找不到一种方法来优化动作顺序而不强制它，这使得它的复杂性与你想要优化顺序的动作总数呈指数级。这变得不可能过去大约 15 总数。

那么，有没有什么方法可以找到复杂度较低的最佳时间呢？有没有研究过这个问题？我想可能有某种加权图类型算法可以解决这个问题，但我不知道它是如何工作的，更不用说如何实现它了。

抱歉，如果这令人困惑——这在概念上有点奇怪，我找不到更好的方法来构建它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T21:57:48.897

编辑：这是使用高度修改的 Dijkstra 算法的正确解决方案：

Dijkstra 算法用于找到最短路径，给定一个（Graph Abstract 的）地图，它是一系列节点（通常是位置，但对于这个例子，假设它们是动作），它们通过弧相互连接（在在这种情况下，每条弧线将有一个“值”而不是距离）

这是本质上的结构。

```
Graph{//in most implementations these are not Arrays, but Maps. Honestly, for your needs you don't a graph, just nodes and arcs... this is just used to keep track of them.
node[] nodes;
arc[] arcs;
}
Node{//this represents an action
arc[] options;//for this implementation, this will always be a list of all possible Actions to use.
float value;//Action value
}
Arc{
node start;//the last action used
node end;//the action after that
dist=1;//1 second
} 
```

基于查看每条路径的最终总数，我们可以使用此数据类型制作所有可行选项的地图，以获得最佳解决方案。因此，您寻找模式的时间越多，您就越有可能找到非常理想的路径。

地图上的每一段道路都有一个距离，代表它的价值，道路上的每一站都是一秒的标记，因为那是决定下一步去哪里（执行什么动作）的时间. 为简单起见，假设 A 和 B 是唯一可行的选择。na 表示无操作，因为没有可用的操作。如果您旅行 4 秒（金额越高，结果越好）您的选择是...

```
A->na->A->na->A
B->na->na->B->na
A->B->A->na->B
B->A->na->B->A
... 
```

还有更多，但我已经知道最佳路径是B->A->na->B->A，因为它的价值最高。因此，处理这种动作组合的既定最佳模式是（至少在分析 4 秒之后） B->A->na->B->A 这实际上是一个非常简单的递归算法。

```
 /*
     cur is the current action that you are at, it is a Node. In this example, every other action is seen as a viable option, so it's as if every 'place' on the map has a path going to every other path.
     numLeft is the amount of seconds left to run the simulation. The higher the initial value, the more desirable the results.

This won't work as written, but will give you a good idea of how the algorithm works.
*/
function getOptimal(cur,numLeft,path){
  if(numLeft==0){
    var emptyNode;//let's say, an empty node wiht a value of 0.
    return emptyNode;
  }
  var best=path;
  path.add(cur);
  for(var i=0;i<cur.options.length;i++){
    var opt=cur.options[i];//this is a COPY
    if(opt.timeCooled<opt.cooldown){
      continue;
    }
    for(var i2=0;i2<opt.length;i2++){
      opt[i2].timeCooled+=1;//everything below this in the loop is as if it is one second ahead
    }
    var potential=getOptimal(opt[i],numLeft-1,best);
    if(getTotal(potential)>getTotal(cur)){best.add(potential);}//if it makes it better, use it! getTotal will sum up the values of an array of nodes(actions)
  }
  return best;
}
function getOptimalExample(){
  log(getOptimal(someNode,4,someEmptyArrayOfNodes));//someNode will be A or B
} 
```

结束编辑。

我对这个问题有点困惑，但是......

如果您的行动数量有限，仅此而已，那么请始终选择价值最高的行动，除非尚未达到冷却时间。

听起来你想要这样的东西（在伪代码中）：

```
function getOptimal(){
var a=[A,B,C,D];//A,B,C, and D are actions
a.sort()//(just pseudocode. Sort the array items by how much value they have.)
var theBest=null;
for(var i=0;i<a.length;++i){//find which action is the most valuable
     if(a[i].timeSinceLastUsed<a[i].cooldown){
        theBest=a[i];
        for(...){//now just loop through, and add time to each OTHER Action for their timeSinceLastUsed...
             //...
         }//That way, some previously used, but more valuable actions will be freed up again.
        break;
    }//because a is worth the most, and you can use it now, so why not?
}
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T21:05:42.927

编辑：在重新阅读您的问题后，我发现需要调整加权调度算法以适应您的问题陈述；在我们的例子中，我们只想从与我们选择的动作类别匹配的集合中取出那些重叠的动作，以及那些在同一时间点开始的动作。IE 如果我们选择`a1`，我们想从集合中删除`a2`and`b1`而不是`b2`。

[这看起来与此 pdf](http://www.cs.princeton.edu/courses/archive/spr05/cos423/lectures/06dynamic-programming.pdf)中深入讨论的加权调度问题非常相似。本质上，权重是您的操作值，间隔是（开始时间，开始时间+冷却时间）。动态规划解决方案可以被记忆，使其在 O(nlogn) 时间内运行。唯一困难的部分是修改您的问题，使其看起来像加权区间问题，这使我们能够利用预定的解决方案。

因为您的时间间隔没有设置开始和结束时间（即您可以选择何时开始某个动作），我建议在假设某个设定时间范围的情况下枚举所有给定动作的所有可能开始时间，然后使用这些静态开始/使用动态规划解决方案结束时间。假设您只能在一秒钟内开始一个动作，您可以运行动作 A 间隔 (0-2,1-3,2-4,...)，动作 B 间隔 (0-3,1-4,2 -5,...), 间隔的动作 C (0-5,1-6,2-7,...) 等。然后您可以使用联合动作的集合来获得一个看起来像原始加权的问题空间区间问题：

```
|---1---2---3---4---5---6---7---| time
|{--a1--}-----------------------| v=1
|---{--a2---}-------------------| v=1
|-------{--a3---}---------------| v=1
|{----b1----}-------------------| v=1.5
|---{----b2-----}---------------| v=1.5
|-------{----b3-----}-----------| v=1.5
|{--------c1--------}-----------| v=2
|---{--------c2---------}-------| v=2
|-------{-------c3----------}---| v=2
etc... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T00:12:22.220

始终选择最有价值的可用操作。

# highslide - Highslide - 带有关闭按钮的可拖动标题

> ID：15557987
> 
> 赞同：0
> 
> 时间：2013-03-21T20:59:29.893
> 
> 标签：highslide

***[编辑：虽然我确实得到了答案，但当同一页面中有多个 html 扩展器时它不起作用。请看我的[新问题](https://stackoverflow.com/questions/15579811/highslide-entire-header-draggable-with-multiple-expanders)。]***

这应该很容易做到！我正在使用 htmlExpand。

我想要的 Highslide 只是一个可拖动的标题，如此处所示，右侧有一个 X 以关闭。我很惊讶这不是内置的并且可以在 highslide 中使用，但可惜它似乎只是“几乎”工作。

在图形中，标题文本的灰色/蓝色背景代表可拖动区域。（我使用半透明的 .png 作为 .highslide-heading 的背景。X 图形实际上在它后面。）

我希望可拖动区域几乎一直向右延伸，在距离 X 仅几个像素处停止，使几乎整个标题可以像窗口一样拖动。

如图所示，我的 highslide-heading 宽度为 100%，并且 X 不可点击，因为它位于可拖动空间的“后面”。如果我将 .highslide-heading 的宽度更改为 90%，它可以工作，但灰色区域更短，看起来很奇怪。

当然，我可以尝试百分比，但我在同一页面上有几个弹出项目，它们的大小各不相同，因此没有特定的百分比适合所有人。（无论如何，PS 结果因浏览器而异。）

请记住，我希望继续使用 htmlExpand 而不是其他方法，以便我可以灵活处理弹出的内容。（我知道这里显示的示例可以很容易地使用其他方法在 Highslide 中进行扩展，因为它只是一张图片和一个标题。）

我正在寻找的解决方案：不知何故，我相信我需要关闭按钮位于可拖动空间的“顶部”。我相信我需要的 CSS 属性是 z-index，但我不知道在哪里或如何插入它。无论我把它放在哪里，它似乎对 .CSS 文件都没有影响。

帮助将不胜感激。我*确实*给出了正确的答案并为人们投票。

![在此处输入图像描述](../Images/0259314d029f61a115ea07d49ff8fae4.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T08:37:34.490

您可以使用`hs.registerOverlay`EarlyOut 建议的，也可以使用预制的`wrapperClassName: 'draggable-header'`（或者`hs.wrapperClassName = 'draggable-header';`如果您更喜欢将其用作全局设置），只需对 CSS 进行一些更改即可完成您要求的一切。

我假设您已经在使用`wrapperClassName: 'draggable-header'`，但是您需要将标题的背景颜色添加到正确的 CSS 选择器以实现您想要的效果，并且您还需要使用透明的 X（关闭）图形文件和几行额外的 CSS .
请看这个 jsFiddle：http: [//jsfiddle.net/roadrash/mXmLN/](http://jsfiddle.net/roadrash/mXmLN/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T21:57:52.493

这应该让你指向正确的方向。在此演示页面上查看 RoadRash 的编码：

[http://www.roadrash.no/hs-support/iframe-closebutton-redirect.html](http://www.roadrash.no/hs-support/iframe-closebutton-redirect.html)

但是，由于您希望在 X 上定期“关闭”，而不是重定向，请将叠加层上的“html”属性更改为标准：

```
html: '<div class="closebutton" onclick="return hs.close(this)" title="Close"></div>', 
```

# android - 递归枚举文件和文件夹

> ID：15557989
> 
> 赞同：0
> 
> 时间：2013-03-21T20:59:32.790
> 
> 标签：android, macos, bash

我正在尝试运行一个 bash 脚本，该脚本将在当前目录上运行，查找文件并对它们进行一些操作，当找到一个目录时，它会一遍又一遍地做同样的事情。

让我感到困惑的是我的操作，它应该转换每个图形文件，调整它的大小，并将其放在一个并行目录结构中，对四个并行目录执行此操作，这意味着它将模仿原始目录结构创建文件夹去。

问题是它不起作用，并且它不断递归到新创建的目录中..

你能帮忙改正吗？

```
recurse() {
 for i in "$1"/*;do
    if [ -d "$i" ];then
        echo "dir: $i"
        mkdir "res-ldpi/$i"             
        mkdir "res-hdpi/$i"             
        mkdir "res-mdpi/$i"             
        mkdir "res-xhdpi/$i"
        recurse "$i";            
    elif [ -f "$i" ]; then
        convert ./"$i" -resize 38% -unsharp 0x1 res-ldpi/"$i"
    fi
 done
}

recurse . 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T21:55:25.580

也许是这些方面的东西（未经测试......）：

```
while read fn
do
  dn=$(dirname "${fn}")
  bn=$(basename "${fn}")
  [[ -d "res-ldpi/${dn}" ]] || mkdir -p "res-ldpi/${dn}"
  convert "${fn}" -resize 38% -unsharp 0x1 "res-ldpi/${dn}/${bn}"
done < <(find "${1}"/. -type f -print) 
```

这个想法是 1）使用`find`只为您提供目录及其子目录中每个文件的名称，2）将其拆分为目录和文件名，3）检查目标目录是否存在并在必要时创建它，然后 4 )`convert`根据需要运行。

这并没有打扰`res-hdpi`,`res-mdpi`和`res-xhdpi`目录，因为您的示例代码无论如何都没有使用它们 - 弄清楚如何将它们添加到......

# r - 在R中读取可变数量的列

> ID：15557992
> 
> 赞同：0
> 
> 时间：2013-03-21T20:59:38.700
> 
> 标签：r, text

我有一个大的制表符分隔的数据文件，我正在阅读（在 R 中）使用：

```
read.delim(file, header = FALSE, sep = "\t", stringsAsFactors=FALSE) 
```

大多数行有 6 列，但有些行有更多的文本列。例如：

```
1 2 3 4 5 ThisTextIsOkay
1 2 3 4 5 ThisTextContinues InTheNextColumn 
```

我想将最后 N 列合并到第 6 列的最后一个字符串字段中。我不介意在结果字符串中保留制表符。

# css - 如何在多行上均匀分布 flexbox 项目？

> ID：15557993
> 
> 赞同：1
> 
> 时间：2013-03-21T20:59:51.343
> 
> 标签：css, distribution, flexbox

我正在开发一个菜单栏，它的所有按钮均匀分布在导航元素（容器）的中心。我需要这种布局在大多数设备上看起来都很好，不管它的大小。问题是，在我正在测试的一种平板电脑尺寸下，只有一个按钮进入下一行，留下了不受欢迎的外观。有没有办法使用 css 让所有项目均匀分布在所有行上？

这是导航的样式块：

```
nav {
    display: -ms-flex;
    display: -moz-flex;
    display: -webkit-flex;
    display: flex;
    -ms-flex-wrap: wrap;
    -moz-flex-wrap: wrap;
    -webkit-flex-wrap: wrap;
    flex-wrap: wrap;
    -ms-justify-content: center;
    -moz-justify-content: center;
    -webkit-justify-content: center;
    justify-content: center;
    width: 100%;
    height: 100px;
    background-color: #000;
} 
```

# asp.net - 如何复制我的 dll 来部署我的网站？

> ID：15557996
> 
> 赞同：1
> 
> 时间：2013-03-21T21:00:04.997
> 
> 标签：asp.net, vb.net

我无法在我的项目中找到 devxpress dll。他们说要将他们 dll 的复制本地属性设置为 true 但我似乎找不到我的 dll 我可以轻松添加引用但我的项目解决方案中没有 dll bin 文件夹只有 App_License.dll 任何人都可以请给我和答案和简要说明？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T21:04:06.417

这是您必须将复制本地属性设置为 true 的参考。在你的项目的references下找到reference，右键，properties，然后应该是copy local。将其设置为真。

# c# - 绑定到枚举

> ID：15557999
> 
> 赞同：1
> 
> 时间：2013-03-21T21:00:12.427
> 
> 标签：c#, windows-8, windows-runtime

有没有办法将组合框绑定到枚举，因为没有方法可以获取枚举的所有值？

我的枚举是这样的：

```
public enum SportName
{
    [Display(Name = "football", Description = "Football")]
    Football,

    [Display(Name = "table-tennis", Description = "Table Tennis")]
    TableTennis

} 
```

我有一个检索属性的方法。我的问题是如何将这些值绑定到组合框，组合框应该显示每个项目的描述。

对我来说，找到一种方法来遍历枚举并创建某种列表就足够了，但我不知道该怎么做。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T21:03:28.653

尝试使用

```
Enum.GetNames(typeof(SportName)) // returns string[] 
```

或者

```
Enum.GetValues(typeof(SportName)) // returns int[] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T21:06:51.997

这是来自我的`EnumComboBox`类​​，它继承自`ComboBox`

```
public Type EnumType { get; private set; }
public void SetEnum<T>(T defaultValue) where T : struct, IConvertible
{
    SetEnum(typeof(T));
    this.Text = (defaultValue as Enum).GetLabel();
}
public void SetEnum<T>() where T : struct, IConvertible
{
    SetEnum(typeof(T));
}
private void SetEnum(Type type)
{
    if (type.IsEnum)
    {
        EnumType = type;
        ValueMember = "Value";
        DisplayMember = "Display";
        var data = Enum.GetValues(EnumType).Cast<Enum>().Select(x => new
        {
            Display = x.GetLabel(), // GetLabel is a function to get the text-to-display for the enum
            Value = x,
        }).ToList();
        DataSource = data;
        this.Text = data.First().Display;
    }
    else
    {
        EnumType = null;
    }
}

public T EnumValue<T>() where T : struct, IConvertible
{
    if (typeof (T) != EnumType) throw new InvalidCastException("Can't convert value from " + EnumType.Name + " to " + typeof (T).Name);

    return (T)this.SelectedValue;
} 
```

您不能在设计时设置它，但是当您初始化框时，您可以调用

```
myCombo.SetEnum<SportName>(); 
```

然后再获得价值

```
var sport = myCombo.EnumValue<SportName>(); 
```