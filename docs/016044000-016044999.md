# StackOverflow 问答 16044000-16044999

# jquery - 在 knockout.js 中为 ViewModel 创建多个实例

> ID：16044001
> 
> 赞同：1
> 
> 时间：2013-04-16T18:04:29.087
> 
> 标签：jquery, knockout.js

我正在使用淘汰赛创建一个寻呼机控件。我有一个 viewModel(PaginatorViewModel)，它具有“currentPageIndex”、“itemsPerPage”、“totalRecords”等属性。在每个页面中，我有两个分页控件，一个在顶部，另一个在页面底部。

在某些情况下，我有标签，在每个标签中我有两个分页控件（顶部和底部）。

当我在 Tab1 并移动到第 2 页（currentPageIndex=2）时，Tab2 中的分页控件也将 currentPageIndex 显示为 2。

我想在所有选项卡中使用 PaginatorViewModel，但想维护多个实例，即每个选项卡一个实例。

我怎样才能做到这一点。

这是我的视图模型，

```
var CustomPaginator = {        
        //The current page index of the post being displayed.
        currentPageIndex: ko.observable(1),
        //specifies the page options
        pageOptions : ko.observableArray([25, 50, 100, 200]),

        //specifies the PageOptions will be shown or not.
        showOptions : ko.observable(true),                
        //The maximum number of topics displayed per page.
        itemsPerPage : ko.observable(25),
        //Specifies the total no of records
        totalRecords : ko.observable(1),
        isVisible : ko.observable(false),
        //pageIndex is bounded to the text box, and the CurrentPageIndex contains the actual value.
        // this is to avoid the notifying the subscribers when the user enters the out of range values
        // like 0,and N , where N > no of pages
        pageIndex : ko.observable(1)
  }; 
```

我如何为此创建一个实例。

谢谢，拉梅什

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T18:14:35.200

为每个分页器创建一个视图模型，然后将每个视图模型绑定到您希望在其中使用它的页面元素：

```
var page1 = new CustomPaginator();
ko.applyBindings(page1, $('#page1')[0]); 
```

对每个人都这样做。如果您想这样做，您还可以将相同的视图模型绑定到页面的不同部分。

您将需要更改定义视图模型的方式，以便可以创建它的新实例：

```
var CustomPaginator = function()
{
    //your view model properies here
} 
```

# php - 如何实现.htaccess防盗链

> ID：16044005
> 
> 赞同：2
> 
> 时间：2013-04-16T18:04:33.390
> 
> 标签：php, .htaccess

我正在尝试对我的图像实施一些保护，我的代码有什么问题？

```
// If referral is from google but NOT from "http://www.google.com/blank.html", redirect home
RewriteCond %{HTTP_USER_AGENT} !(googlebot|bingbot|Baiduspider) [NC]  //If user agent is NOT bot
RewriteCond %{HTTP_REFERER} !^$                                       //Allow blank referral
RewriteCond %{HTTP_REFERER} !^http(s)?://(www\.)?google.com [NC]      //if referral is from google
RewriteCond %{HTTP_REFERER} ^http://www.google.com/blank.html$        //if referral is NOT from that url
RewriteRule  http://www.mydomain.com/ [R,L]                           //redirect home

// If referral is from my domain and accessing images, do nothing
RewriteCond %{HTTP_USER_AGENT} !(googlebot|bingbot|Baiduspider) [NC] //If user agent isn't bot
RewriteCond %{HTTP_REFERER} !^$                                      //Allow blank referral
RewriteCond %{HTTP_REFERER} !^http(s)?://(www\.)?mydomain.com [NC]   //if referral is from my domain
RewriteCond %{REQUEST_URI} !(^|&)images(&|$)                         //if URL contains string "images"
RewriteRule ^.*$ - [NC,L]                                            // DO nothing 

// If referral is NOT from my domain and accessing images, show watermarked image
RewriteCond %{HTTP_USER_AGENT} !(googlebot|bingbot|Baiduspider) [NC] //If user agent isn't bot
RewriteCond %{HTTP_REFERER} !^$                                      //Allow blank referral
RewriteCond %{HTTP_REFERER} mydomain.com                             //if referral is NOT from my domain
RewriteCond %{REQUEST_URI} !(^|&)images(&|$)                         //if URL contains string "images"
RewriteRule ^images/(.*)$ http://www.mydomain.com/cache/$1 [NC,R,L]  //redirect to watermarked image 
```

我非常想创建[这个答案](https://stackoverflow.com/a/14860184/1992125)的第 2 步，但是我遇到了“等于”和“不等于”的问题，因为我来自 php 和！运算符用于不等于。

帮助别人？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T19:12:54.147

您的第二组规则是隐式*allow*。它通过请求而不重定向或禁止访问。这意味着你给它一个你“想要”的条件列表。此外，看起来您要匹配的“图像”在查询字符串中，它不会成为`%{REQUEST_URI}`变量的一部分。您需要检查`%{QUERY_STRING}`变量。

就像是：

```
// If referral is from my domain and accessing images, do nothing
RewriteCond %{HTTP_USER_AGENT} !(googlebot|bingbot|Baiduspider) [NC] //If user agent isn't bot
RewriteCond %{HTTP_REFERER} ^$ [OR]                                  //Allow blank referral
RewriteCond %{HTTP_REFERER} ^http(s)?://(www\.)?mydomain.com [NC]    //if referral is from my domain
RewriteCond %{QUERY_STRING} (^|&)images.*?(&|$)                      //if URL contains string "images"
RewriteRule ^.*$ - [NC,L]                                            // DO nothing 

// If referral is NOT from my domain and accessing images, show watermarked image
RewriteCond %{HTTP_USER_AGENT} !(googlebot|bingbot|Baiduspider) [NC] //If user agent isn't bot
RewriteCond %{HTTP_REFERER} !^$                                      //Allow blank referral
RewriteCond %{HTTP_REFERER} !mydomain.com                            //if referral is NOT from my domain
RewriteCond %{QUERY_STRING} (^|&)images.*?(&|$)                      //if URL contains string "images"
RewriteRule ^images/(.*)$ http://www.mydomain.com/cache/$1 [NC,R,L]  //redirect to watermarked image 
```

如果该`images`事物实际上是请求 URI 的一部分而不是查询字符串，那么您将无法在其中包含 a `&`，而这正是您要匹配的内容。正则表达式`(^|&)images(&|$)`匹配**images**、**&images**、**images&**或**&images&**，仅此 4 种可能性。如果您尝试匹配图像目录，那么您需要这样的东西：

```
RewriteCond %{REQUEST_URI} /images/ 
```

或者

```
RewriteCond %{REQUEST_URI} !/images/ 
```

# python - 如何从 Class 构造函数中访问列表，以便在 python 中的另一个类方法中使用？

> ID：16044007
> 
> 赞同：0
> 
> 时间：2013-04-16T18:04:37.463
> 
> 标签：python, class, constructor

如何从 python 中的类构造函数访问列表以在另一个类方法中使用？例如：

```
Class Data():
    def __init__(self):
        list1 = ["a", "e", "i", "o", "u"]

    def __length__():
        length = len(list1)
        print(length) 
```

打印当前列表的长度。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T18:11:18.223

注意`self`传递给每个实例方法的参数。它是实例本身。就像`this`在 C++ 或 Java 中一样，只是显式传递。你应该明确地使用它（`import this`如果有疑问，请输入）。

所以，正如其他海报提到的，你需要这样的东西：

```
class Data():
  def __init__(self):
    self.vowels = ['a', 'e', 'u', 'i', 'o']

  def __len__(self): # if you want to use len() on your object
    return len(self.vowels) # refer to the list defined in constructor 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T18:07:14.487

您需要使用 self 属性，根据 python 代码样式[“始终使用 self 作为实例方法的第一个参数”。](http://www.python.org/dev/peps/pep-0008/#function-and-method-arguments)， 尝试这个 ：

```
class Data():
    def __init__(self):
        self.list1 = ["a", "e", "i", "o", "u"]

    def __length__(self):
        length = len(self.list1)
        print(length) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-16T18:06:50.880

要解决您的问题，您应该使用实例属性：

```
class Data():
    def __init__(self):
        self.list1 = ["a", "e", "i", "o", "u"]

    def __length__(self):
        length = len(self.list1)
        print length 
```

这里的想法不是您正在“访问构造函数”，而是您正在访问此类实例的属性。该类`Data`可能具有以下属性：`list1`“list2 `,`vowels `,`consonants”，您可以命名它。您需要在构造函数中设置这些，然后您可以在类方法中更改或访问它们。

但也许你可以做得更好。考虑以下两个想法：

1.  你为什么要调用你的方法`__length__`？也许更具描述性的东西（并且较少滥用这些下划线）会有所帮助，例如`def print_number_of_vowels(self)`.
2.  这个名字`Data`很模糊，考虑让它更具体，例如`AlphabetData`。

也许更像是：

```
class AlphabetData():
    def __init__(self):
        self.vowels = ["a", "e", "i", "o", "u"]

    def print_number_of_vowels(self):
        print len(self.vowels) 
```

# css - 没有将 nil 隐式转换为 String

> ID：16044008
> 
> 赞同：12
> 
> 时间：2013-04-16T18:04:38.900
> 
> 标签：css, ruby-on-rails, stylesheet-link-tag

目前我正在尝试在 Ruby on Rails 中设置一个简单的应用程序。我已经迁移了数据库，为其播种，现在陷入以下错误。

```
no implicit conversion of nil into String

Extracted source (around line #4):

1: <!--[if lt IE 9]>
2: <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
3: <![endif]-->
4: <%= stylesheet_link_tag 'blueprint/screen', :media => 'screen' %>
5: <%= stylesheet_link_tag 'blueprint/print',  :media => 'print' %>
6: <%= stylesheet_link_tag 'custom', :media => 'screen' %> 
```

资产标签助手似乎无法正常工作或返回零（如果可能的话）？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-04-16T21:08:22.397

我通过将以下行添加到我的 application.rb 来修复此错误：

```
ActionController::Base.config.relative_url_root = '' 
```

该错误很可能是由于我的 rails 版本 3.0.12 中的错误所致。

# gcc - GCC 和链接环境变量和标志

> ID：16044020
> 
> 赞同：23
> 
> 时间：2013-04-16T18:05:27.083
> 
> 标签：gcc, build, linker, environment-variables

GCC 官方文档中的以下链接：

[http://gcc.gnu.org/onlinedocs/gcc/Environment-Variables.html](http://gcc.gnu.org/onlinedocs/gcc/Environment-Variables.html)

解释以下环境变量：

```
LANG
LC_CTYPE
LC_MESSAGES
LC_ALL
TMPDIR
GCC_COMPARE_DEBUG
GCC_EXEC_PREFIX
COMPILER_PATH
LIBRARY_PATH
CPATH
C_INCLUDE_PATH
CPLUS_INCLUDE_PATH
OBJC_INCLUDE_PATH
DEPENDENCIES_OUTPUT
SUNPRO_DEPENDENCIES 
```

但我之前也听说过/读过这些其他编译标志：

*   用于编译 C 代码：`CC`,`CFLAGS`
*   用于编译 C++ 代码：`CXX`,`CPPFLAGS`

并链接标志：

*   对于链接阶段：`LDFLAGS`
*   代码编译后：`LD_LIBRARY_PATH`

`CC`, `CFLAGS`, `CXX`, 和是什么意思`CPPFLAGS`？为什么它们不包含在**官方**环境变量列表中`gcc`？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-04-16T21:36:37.070

首先，您提到的所有变量：`CC`, `CFLAGS`, `CXX`, `CXXFLAGS`, `LDFLAGS`, `LD_LIBRARY_PATH`, 都源自 Unix OS 家族。这些变量首先与 GCC 无关，这就是为什么您在手册中看不到它们的踪迹。

其中唯一有意义的变量（也与 GCC 没有直接联系）是`LD_LIBRARY_PATH`. 您可能会发现这个变量在任何现代类 Unix 操作系统上都是开箱即用的。这是Linux Programmer's Manual 中提到的[LD.SO(8)](http://man7.org/linux/man-pages/man8/ld.so.8.html)`LD_LIBRARY_PATH`手册页及其用途。这是另外一个摘录：

> `LD_LIBRARY_PATH`环境变量包含一个以冒号分隔的目录列表，[动态链接器](http://en.wikipedia.org/wiki/Dynamic_linker)在查找要加载的共享库时搜索这些目录。
> 
> 目录按照提及的顺序进行搜索。
> 
> 如果未指定，则链接器使用默认值，即`/lib:/usr/lib:/usr/local/lib`.

如您所见`LD_LIBRARY_PATH`，它只是一个特定于操作系统的环境变量，用于正确加载共享库。Windows 在这方面也有类似的环境变量：`PATH`. Windows 在搜索[动态链接库](http://en.wikipedia.org/wiki/Dynamic-link_library)（DLL，Linux 上的 SO 的对应物）时也会扫描其中列出的目录。

关于其余变量（`CC`, `CFLAGS`, `CXX`, `CXXFLAGS`, `LDFLAGS`），由于历史原因，您经常看到它们。自 Unix 时代兴起以来，软件项目都是使用[Make](http://en.wikipedia.org/wiki/Make_%28software%29)构建的（向下滚动并查看典型`makefile`s 的示例）——这是开创性的构建工具之一。[`makefile`这些变量在s](http://mrbook.org/tutorials/make/)中被如此广泛地使用，以至于最终它们成为一种约定（例如，参见[隐式规则](http://www.gnu.org/software/make/manual/make.html#Implicit-Variables)）。这就是为什么您甚至可以看到它们在例如 Linux 上开箱即用地定义，并且很可能指向 GCC（因为它被认为是 Linux 的本机工具链）。

总而言之，重点是：*不要挠头`CC`，`CFLAGS`, `CXX`, `CXXFLAGS`, `LDFLAGS`, 和朋友，因为他们只是过去的爆炸*。`;)`

## 奖金

* * *

如今，直接使用普通的 Make 直接构建复杂的软件很快变得乏味且容易出错。因此，已经开发了许多复杂的构建系统生成器，例如[GNU Automake](http://en.wikipedia.org/wiki/GNU_build_system#GNU_Automake)或[CMake 。](http://en.wikipedia.org/wiki/CMake)简而言之，他们的目标是提供（可以说）更易读、更易于维护和高级语法来为要构建的任意软件项目定义任意复杂的构建系统。通常，在实际构建项目之前，必须生成一个*原生*构建系统（也可以用普通的旧`makefile`s，例如，出于可移植性的原因，但不一定）使用相应的工具集脱离此高级定义。最后，必须使用与生成的（本机）构建系统相对应的工具来构建项目（例如，在普通旧`makefile`的情况下使用 Make，但不一定）。

既然您在问这些问题，我怀疑您即将开始使用 C 或 C++ 进行本机软件开发。如果是这样，我强烈建议您首先选择一个现代构建系统（CMake 是我个人的建议），使用它并学好它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-08-10T03:34:35.113

简单来说 `CC`,`CFLAGS`等`LDFLAGS`是 gnu Makefile 变量。如果已定义，即使没有在命令/规则中实际提及，这些也会被隐式规则使用

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-09-17T19:29:20.427

您绝对可以将环境变量与 GCC 一起用于 CFLAGS 和 CC（以及其他任何东西）。您只需将变量传递到编译行，根据操作系统略有不同。

Linux设置CFLAGS环境变量：

```
export CFLAGS="-g -Wall -std=c89 -pedantic" 
```

使用 CFLAGS 在 Linux 上编译

```
gcc $CFLAGS - o progname progname.c 
```

Windows 设置 CFLAGS 环境变量：

```
set CFLAGS=-g -Wall -std=c89 -pedantic 
```

使用 CFLAGS 在 Windows 上编译

```
gcc %CFLAGS% - o progname progname.c 
```

您甚至可以在变量中设置一个临时编译字符串，并在测试时调用它进行编译。

```
set BUILD=gcc -g -Wall -std=c89 -pedantic - o progname progname.c 
```

并称它为...

```
%BUILD% 
```

在 Linux 上设置和使用变量时要记住的一件事（正如大多数程序员所知道的），变量区分大小写，因此 $cflags 将被简单地忽略。在 Windows 上无关紧要。

在这两个系统上，上述内容仅在终端（或命令提示符）会话终止之前有效。要使它们永久化，您需要在它们各自的设置文件中设置变量。

# python - PyQt4 新模块

> ID：16044021
> 
> 赞同：0
> 
> 时间：2013-04-16T18:05:28.310
> 
> 标签：python, pyqt4, qtwebkit, qwebview

我想用 PyQt4 框架做一些事情。所以我决定做一些类似浏览器的事情。这是代码。它很简单：

```
import sys
from PyQt4 import QtGui, QtCore, QtWebKit

class MainWindow(QtGui.QMainWindow):
    def __init__(self):
        QtGui.QMainWindow.__init__(self)

        self.resize(250, 150)
        self.setWindowTitle('Testbrowser')

        exit = QtGui.QAction(QtGui.QIcon('icons/exit.png'), 'Exit', self)
        exit.setShortcut('Ctrl+Q')
        exit.setStatusTip('Exit application')
        self.connect(exit, QtCore.SIGNAL('triggered()'), QtCore.SLOT('close()'))

        self.statusBar()

        menubar = self.menuBar()

        datei = menubar.addMenu('&Datei')
        datei.addAction(exit)

        tools = menubar.addMenu('&Tools')

app = QtGui.QApplication(sys.argv)
main = MainWindow()
web = QWebView()
web.load(QUrl("http://google.de"))
main.show()
sys.exit(app.exec_()) 
```

我想我理解了这里的一些事情。但我不明白的是，我如何在这里使用新模块？MainWindow 类继承自 QtGui.QMainWindow 类，没关系。但是现在呢？我应该创建一个继承自 QWebView 的全新类吗？有一些像 ：

```
class newclass(QWebView.QtWebKit):
    def __init__(self):
        QWebView.QtWebkit.__init__(self)
        ect 
```

或者我怎么能在没有新课程的情况下做到这一点？或者我一般如何做到这一点？我看到一个网页，作者也做了一个简单的浏览器。但他将它导入到一个新程序中，并用它制作了一个对象，然后做了一些事情。我必须这样做，还是有更简单的方法？这一切是如何在 PyQt4 中完成的？欢迎参考 [http://pyqt.sourceforge.net/Docs/PyQt4/qwebview.html](http://pyqt.sourceforge.net/Docs/PyQt4/qwebview.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T19:01:37.847

访问模块的元素遵循 Python 中的点符号约定——例如，要访问 QWebView，您应该使用

```
web = QtWebkit.QWebView() 
```

网址是

```
QtCore.QUrl("http://google.de") 
```

如果您想在没有点符号的情况下使用所有可用的名称，则必须导入所有内容：

```
from PyQt4.QtWebkit import * 
```

# javascript - Jquery - .on 不开火？

> ID：16044022
> 
> 赞同：0
> 
> 时间：2013-04-16T18:05:28.530
> 
> 标签：javascript, jquery, html

## 解决了！

我的错误是缺少 jQuery 运算符函数：

```
 <script>
            $(function() { // <-- THIS LINE
                $('body').on('change', '#billing_country', function() {
                    console.log($('#billing_country').val());
                    $.post("/store/ajax_get_zones", {
                        country_id: $('#billing_country').val()
                    }, function(e) {
                        if (e)
                            $("#billing_state").html(e);
                    })
                });
            });
        </script> 
```

谢谢你们的第二双眼睛。（感谢@Adil 的快速回复）

* * *

## 原始问题：

我在我的网站上运行了以下非常简单的代码，但没有明显的原因就中断了。我发誓我已经这样做了 100 次，但由于某种原因它现在不起作用？

[jsFiddle](http://jsfiddle.net/Wallter/S6DDq/)

它没有包含`(function() { ... }`我做错了吗？

## HTML

```
<div class="validate_the_fields_below" id="new_billing_address" style="">
    <table class="form-table">
        <tbody>
            <tr class="field">
                <td class="form-label"><label for="first_name">First Name*</label>
                </td><td class="form-input"><input type="text" name="billing_first_name" value="" class="required"></td>
            </tr>
            <tr class="field">
                <td class="form-label"><label for="last_name">Last Name*</label>
                </td><td class="form-input"><input type="text" name="billing_last_name" value="" class="required"></td>
            </tr>
            <tr class="field">
                <td class="form-label"><label for="phone">Phone*</label>
                </td><td class="form-input"><input type="tel" name="billing_phone" value="" class="required"></td>
            </tr>
            <tr class="field">
                <td class="form-label"><label for="email">Email*</label>
                </td><td class="form-input"><input type="email" name="billing_email" value="" class="required"></td>
            </tr>
            <tr class="field">
                <td class="form-label"><label for="address1">Address 1*</label>
                </td><td class="form-input"><input type="text" name="billing_address1" value="" class="required"></td>
            </tr>
            <tr class="field">
                <td class="form-label"><label for="address2">Address 2</label>
                </td><td class="form-input"><input class="ignore required" type="text" name="" value=""></td>
            </tr>
            <tr class="field">
                <td class="form-label"><label for="city">City*</label>
                </td><td class="form-input"><input type="text" name="billing_city" value="" class="required"></td>
            </tr>
            <tr class="field">
                <td class="form-label"><label for="country">Country*</label>
                </td><td class="form-input">
                    <select name="billing_country" id="billing_country" class="required">

                        ...

                        <option value="219">Uganda</option>
                        <option value="220">Ukraine</option>
                        <option value="221">United Arab Emirates</option>
                        <option value="222">United Kingdom</option>
                        <option selected="selected" value="223">United States</option>

                        ...

                    </select>
                </td>
            </tr>
            <tr class="field">
                <td class="form-label"><label for="state">State*</label>
                </td><td class="form-input">
                    <select name="billing_state" id="billing_state" class="required">

                        ...

                        <option value="3666">South Carolina</option>
                        <option value="3667">South Dakota</option>
                        <option value="3668">Tennessee</option>
                        <option value="3669">Texas</option>
                        <option selected="selected" value="3670">Utah</option>

                        ...

                    </select>
                </td>
            </tr>
            <tr class="field">
                <td class="form-label"><label for="zip">Zip*</label>
                </td><td class="form-input"><input type="text" name="billing_zip" value="" class="required"></td>
            </tr>
        </tbody>
    </table>
    <input type="hidden" name="id" value="1" class="required">                   
</div> 
```

## JavaScript

```
 <script>
            (function() {
                $('body').on('change', '#billing_country', function() {
                    console.log($('#billing_country').val());
                    $.post("/store/ajax_get_zones", {
                        country_id: $('#billing_country').val()
                    }, function(e) {
                        if (e)
                            $("#billing_state").html(e);
                    })
                });
            });
        </script> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-16T18:07:24.170

您错过`$`了 jQuery for [**document.ready**](http://api.jquery.com/ready/)处理程序，指定在 DOM 完全加载时执行的函数。

```
$(function() {           

       $('body').on('change', '#billing_country', function() {
            console.log($('#billing_country').val());
            $.post("/store/ajax_get_zones", {
                country_id: $('#billing_country').val()
            }, function(e) {
                if (e)
                    $("#billing_state").html(e);
            })
        });
 }); 
```

您还可以对 document.ready 使用更具描述性的内容。

```
jQuery(document).ready(function({
     //Your code here.
}); 
```

> 传递给 .ready() 的处理程序保证在 DOM 准备好后执行，因此这通常是附加所有其他事件处理程序和运行其他 jQuery 代码的最佳位置。[参考](http://api.jquery.com/ready/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-16T18:07:49.460

您没有执行 IIFE。

```
 (function() {
            $('body').on('change', '#billing_country', function() {
                console.log($('#billing_country').val());
                $.post("/store/ajax_get_zones", {
                    country_id: $('#billing_country').val()
                }, function(e) {
                    if (e)
                        $("#billing_state").html(e);
                })
            });
        })(); // <--- note the () 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-16T18:08:31.543

您的代码有效 - [http://jsfiddle.net/mohammadAdil/S6DDq/1/](http://jsfiddle.net/mohammadAdil/S6DDq/1/)

你需要`$`像这样使用-

```
$(function() { 
```

# java - 在这种特殊情况下，我们应该使用 Java 代码来选择数据还是使用存储过程？

> ID：16044023
> 
> 赞同：0
> 
> 时间：2013-04-16T18:05:31.770
> 
> 标签：java, sql, database, stored-procedures

让我们看看这段 Java 代码：

```
// Code to connect DB
try {
       while (rs!=null){

        String sql="SELECT c1 FROM tbl WHERE c1 like ?";

        preparedStmt = con.prepareStatement(sql);
        preparedStmt.setString(1, "%test%");

        ResultSet rs = preparedStmt.executeQuery();

        if (rs.next()) {
            String c1 = rs.getString(1);
            System.out.println(c1);
        }
    }
} catch (SQLException ex) {
        while (ex != null) {
            System.out.println ("SQL Exception:  " + ex.getMessage ());
            ex = ex.getNextException ();
        }
} catch (java.lang.Exception e) {
        System.out.println("***ERROR-->" + e.toString());   
} 
```

注意：循环可以有 4 个或 5 个循环

第二种解决方案是使用DB存储过程，但是我不知道怎么写&我不想记住所有的存储过程（即如果我使用新的DB，我必须重新导入存储过程）当我部署时我的应用程序。

但我不确定我的应用程序的性能是否受到影响，因为我通过这样的循环向数据库发送了许多查询。

如果您在这种情况下有任何经验，请与我分享。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T18:12:44.530

存储过程用于处理非常复杂且无法通过一次查询完成的事情。您无需执行多个查询并使用例如 Java 来获得最终结果，而是创建一个存储过程以允许您执行 DB 端的处理，并且只将结果返回给 Java 客户端。

这样做的好处是：

*   减少来回网络开销
*   执行多个 SQL 查询

以及以下缺点：

*   必须编写一个完全新的存储过程
*   更多的处理发生在服务器端（尽管这是有争议的，因为多个查询也会消耗资源）。

对于这么简单的查询，它是一个 SQL 查询，所以没有任何存储过程是有意义的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T18:16:30.700

我认为外循环也受到某些数据库查询的影响。在这种情况下，您不需要存储过程，您可以简单地编写一个结合外部和内部 SQL 语句的 SQL 语句，很可能通过一些表连接。由于未发布外部查询，因此我只能猜测。

一般来说，在所有其他条件相同的情况下，拥有一个“大”SQL 语句和一个足够索引的数据库会更快，因为：

*   网络延迟减少到一个查询
*   数据库可以导出一个cleaver执行计划，从而更早的减少数据量
*   通过网络传输的数据更少

但是，如果查询的计算很复杂并且您的数据库是瓶颈，那么将这些繁重的任务转移到多个应用程序服务器可能是明智之举。

# google-app-engine - 将外部域添加到 Google App Engine 应用程序（不同于主机）

> ID：16044025
> 
> 赞同：0
> 
> 时间：2013-04-16T18:05:34.043
> 
> 标签：google-app-engine

我的应用程序 ( [http://videonot.es](http://videonot.es) ) 托管在 Google App Engine 上，此帐户归另一个 Google Apps 域 (unishared.com) 所有，原因有很多。

我想将我的第二个域 (videonot.es) 添加到此应用程序。当我转到应用程序仪表板中的“应用程序设置”时，“添加域”>“videonot.es”我被重定向到我的 Gapps 面板，我必须接受条款和条件才能将我的应用程序添加到此域。当我接受此条款时，我收到一条错误消息：“发生错误，请稍后再试”。

现在我必须通过 DNS 记录从我的第二个域重定向到第一个域，我怎样才能使它正常工作？

谢谢你的帮助。

# actionscript-3 - Flash Pro CS6 无法转码资源？

> ID：16044028
> 
> 赞同：1
> 
> 时间：2013-04-16T18:05:37.957
> 
> 标签：actionscript-3, flash, flash-cs5, flash-cs6

我在 CS6 中测试我的项目。一切都很好。我真的什么都没改变。我测试。无法对嵌入的movieClips进行转码的大量错误。我真的要疯了，试图找出为什么会这样……错误：

/Volumes/FLASHDRIVE/CodeCanyon/Example/src/mvc/View.as，第 140 行无法转码 /Volumes/FLASHDRIVE/CodeCanyon/Example/src/mvc/assets/graphic.swf。

/Volumes/FLASHDRIVE/CodeCanyon/Example/src/mvc/View.as，未找到符号“VContent22”的第 144 行定义

52个错误都是这样的。显然，这些影片剪辑确实存在于此处指定的确切文件中。有谁知道这里会发生什么？

这是代码：

[嵌入（来源=“/Volumes/FLASHDRIVE/CodeCanyon/Example/src/mvc/assets/graphic.swf”，符号=“VContent1”）]私有变量VContent1：类；

# angularjs - angularjs + jsonp 返回失败

> ID：16044029
> 
> 赞同：2
> 
> 时间：2013-04-16T18:05:40.140
> 
> 标签：angularjs, angularjs-directive

我正在尝试构建一个示例应用程序，该应用程序将使用 JSONP 抓取数据进行填充。我把它放在[http://angular.onagrag.com/](http://angular.onagrag.com/) 并点击注册。

我要加载的文件位于[http://api.onagrag.com/data.json](http://api.onagrag.com/data.json)

当我访问[http://angular.onagrag.com/register](http://angular.onagrag.com/register)时，它会触发对象的错误方法（并且会触发两次）

这是我正在使用的 Angular js 文件（它也位于[http://angular.onagrag.com/js/test.js](http://angular.onagrag.com/js/test.js)

如果我使用本地数据（例如使用 $http.get 方法而不是 $http.jsonp 方法），它运行良好，但不适用于 jsonp。任何帮助表示赞赏！

```
var App = angular.module('popdust', ['ngResource']).config(['$locationProvider', function($location) {
  $location.html5Mode(true).hashPrefix('!')
}]);

App.config(['$routeProvider', function($routes) {

  $routes.when('/register',{
    templateUrl : '/templates/register.html',
    controller : RegisterCtrl
  });

  $routes.when('/',{
    templateUrl : '/templates/home.html',
    controller : HomeCtrl
  });  

}]);
var HomeCtrl = function($scope, $http, $location) {
  $scope.title = 'We are home';
  $scope.obj = ['one', 'two','three'];
};

var RegisterCtrl = function($scope, $http, $location) {
    $scope.title = 'Register!';
    $scope.handleData = function(data){
        $scope.fields = data;
    }
  $scope.fetchjsonp = function(){
    $http.jsonp('http://api.onagrag.com/data.json?callback=JSON_CALLBACK').success(function(data){
            alert("success");        
        }).error(function(data, status, headers, config) {
            alert("YOU FAIL");
        });
  }

  $scope.fetch = function(){
    $http.get('js/data.json').success($scope.handleData);
  }

    $scope.fetchjsonp(); 
};

HomeCtrl.$inject = ['$scope','$http','$location'];
RegisterCtrl.$inject = ['$scope','$http','$location']; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T18:37:01.473

在我看来，问题出在您的资源上。当我检查[http://api.onagrag.com/data.json?callback=JSON_CALLBACK](http://api.onagrag.com/data.json?callback=JSON_CALLBACK)我得到以下响应：

```
[{
    "id" : "first_name",
    "title" : "First Name",
    "description" : "The name your parents gave you"
  },{
    "id" : "last_name",
    "title" : "Last Name",
    "description" : "In Spanish, it's called your apellido (or something like that)"
}] 
```

这不是有效的[JSONP 响应](http://en.wikipedia.org/wiki/JSONP)。使用请求参数`callback=nameOfCallbackFn`，响应应该是对名为 nameOfCallbackFn 的函数的单个函数调用（结果是唯一的参数）。

更新：服务 JSONP 的服务器必须读取`callback`请求参数并使用对请求方法名称进行方法调用的文件进行响应。当您使用 angular`$http.jsonp`方法时，angular 会将回调请求参数更改为正确的 angular jsonp 回调方法名称（atm 它们似乎被命名`angular.callback._0`等`..._1`）。您不能提供静态文件，因为此名称可能会从一个请求更改为另一个请求。这在我原来的答案中并不清楚。

像这样的东西：

```
nameOfCallbackFn ( [{
    "id" : "first_name",
    "title" : "First Name",
    "description" : "The name your parents gave you"
  },{
    "id" : "last_name",
    "title" : "Last Name",
    "description" : "In Spanish, it's called your apellido (or something like that)"
}] ); 
```

其中`nameOfCallbackFn`由 angular 指定。

[JSONP 有一些潜在的安全漏洞——你可以在这里](http://docs.angularjs.org/api/ng.%24http)阅读更多关于它们以及如何在你的 Angular 应用程序中防止它们的信息。

# jsr286 - Spring Portlet 从操作阶段进入渲染阶段

> ID：16044030
> 
> 赞同：2
> 
> 时间：2013-04-16T18:05:46.387
> 
> 标签：jsr286, spring-portlet-mvc

如果在 Spring Portlet 控制器中，我有一个方法用 注释`@ActionMapping`，另一个方法用 注释`@RenderMapping(params = "action=detail")`，我看到从方法#1 到方法#2，我们不直接调用方法#2，而是`Actionresponse.setRenderParameter("action", "detail")`在方法#1 中设置一个方法#2 将从这里获取。

我的第一个问题是将渲染阶段与操作阶段（或者我应该说请求阶段）分开，我们可以获得什么优势？还有为什么我们不直接调用方法，而是通过设置渲染参数来调用方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-15T13:19:19.710

回答您的问题

1.  Portlet 可以在一个页面上共存。无论您在 portlet 上执行了什么操作，Portal 容器都会调用`render()`所有 portlet 上的方法来收集 html 片段并聚合它们，以准备整个页面视图并提供给浏览器。拥有 2 种方法不仅是一种优势，而且是实现上述分离业务逻辑要求的强制措施——`processAction()` 这可能会改变你的系统状态，正如@Mark Chorley 所说，你知道执行 **“AND”**渲染逻辑——`render()`这决定要渲染的视图，有时您不知道执行。

2.  这很简单，尽管可以直接调用方法，但为什么要调用`start()`而不是调用。不应该直接调用该方法的原因有很多 `run()``Thread``run`

    > 1.  您不对页面上所有 Portlet 的 html 片段的聚合负责。
    > 2.  您不是在`render()`感兴趣的 Portlet 的方法中提供公共呈现参数的人。
    > 3.  绝对不想将`Event`s 委托给订阅的 portlet

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T19:56:56.463

这就是portlet 基本上所做的事情。至于您获得什么优势 - 它允许您将您的操作（通常是修改数据）与为您的视图准备数据分开。

Action 和 Render 都是单个请求的不同阶段。如您所说，操作请求先于渲染请求。“请求阶段”对我来说是一个令人困惑的术语。动作阶段和渲染阶段是更有用的术语。

为什么你不直接调用它——portlet 容器会为你做这件事。此外，您必须记住，渲染方法将在所有可见的 portlet 上调用，但操作请求将仅针对您的 portlet。

因此，假定 portlet 容器保证调用所有可见 portlet 上的所有呈现方法，仅仅因为操作请求以它为目标而在一个 portlet 上手动调用呈现方法是没有意义的。

如果您只有一个可见的 portlet，这可能不太清楚。当您在一个页面上有多个 portlet 时，这更有意义。

# javascript - 按钮列表和 JavaScript

> ID：16044031
> 
> 赞同：0
> 
> 时间：2013-04-16T18:05:50.657
> 
> 标签：javascript, html, ajax

我有一个 HTML 按钮列表。根据单击的按钮，应该进行 AJAX 调用并显示数据。但是 JavaScript 无法读取该按钮。这是HTML中的代码

```
<ul>
        <li><input type = "button" name = "lab" id = "map" value = "Computer Lab" onClick = "openPage(this)"></li>

        <li><input type = "button" name = "lib" id = "map" value = "Library" onClick = "openPage(this)"></li>

        <li><input type = "button" name = "mlib" id = "map" value = "Manuscript Library" onClick = "openPage(this)"></li>

        <li><input type = "button" name = "radio" id = "map" value = "Agra ki Aawaz" onClick = "openPage(this)"></li>
      </ul> 
```

这是javascript代码

```
function openPage(page){
try {
    xmlHttp = new XMLHttpRequest ();
}
catch (e) {
    try {
        xmlHttp = new ActiveXObject ("Microsoft.XMLHTTP");
    }
    catch (el) {
        try {
            xmlHttp = new ActiveXObject ("Msxml2.XMLHTTP");
        }
        catch (el1) {
            alert ("Your browser does not support AJAX! Please use a compatible browser!!");
        }
    }
}

xmlHttp.onreadystatechange = function () {
    if (xmlHttp.readyState == 4 && xmlHttp.state == 200) {
        var sp = documet.getElementByID ("mainText");
        sp.innerHTML = xmlHttp.responseText;
    }
};

var target = "";
var parent = "";
var page = "";

switch(page.name){
case 'lab':
    target = "get_content.jsp";
    parent = "kmi";
    page = "lab";
    break;
case 'lib':
    targt = "get_content.jsp";
    parent = "kmi";
    page= "gen_lib";
    break;
case 'mlib':
    targt = "get_content.jsp";
    parent = "kmi";
    page= "man_lib";
    break;
case 'radio':
    targt = "get_content.jsp";
    parent = "kmi";
    page= "radio";
    break;
}
xmlHttp.open("POST", target, false);
xmlHttp.setRequestHeader("Content-Type", "application/x-www-form-urlencoded;");
xmlHttp.send("parent=" + parent + "&page=" + page); 
```

现在的问题`page.name`是`undefined`.

我不明白它有什么问题，是否可以创建这样的按钮列表并使用这些按钮进行导航？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T18:10:32.990

就在你的`switch`陈述之上，你有这个：

```
var page = ""; 
```

因为您的函数定义如下所示：

```
function openPage(page){ 
```

JavaScript 删除了`var`（变量已声明），而只是将`""`（一个空字符串）分配给过去对 DOM 元素的引用。修复名称冲突，你应该在路上

# google-docs - 对第一个字段进行排序时，Googledocs 电子表格查询很奇怪

> ID：16044032
> 
> 赞同：1
> 
> 时间：2013-04-16T18:05:50.843
> 
> 标签：google-docs, google-docs-api

在我的 Googledocs 电子表格中引用另一张工作表时，我遇到了一个奇怪的问题。我有一个包含姓名、电话等的地址列表和一个类别字段。我有几个选项卡，每个类别都有一个工作表和一个过滤器，所以我只需要输入用户一次。这很好用，例如在一个选项卡上，我所有的用户都属于“Møbler”类别。所以这段代码在“Møbler”选项卡中工作：

```
=query(Adresseliste!A2:I256;"select A,B,C,D,E,F,G,H,I where H contains 'Møbler' ") 
```

列表显示如下（返回 3 个结果）：

[排序列 2](https://www.dropbox.com/s/letmm58xw2ywrjc/sort_col2.png)

但我真的想按第 1 列对主列表进行排序。但是奇怪的事情发生了。我在第一个单元格中得到了一堆名字。有什么问题？我试图将主列表中的前几个单元格向下移动，但随后它只显示其他第一个单元格。第一个单元格中的名称也与搜索条件不匹配。对第 1 列进行排序会在第一行给出 3 个结果 + 一大堆记录。

[排序列 1](https://www.dropbox.com/s/2jdstnxe2rx86rb/sotr_col1.png)

所以应该只返回 3 个名称，但第一行填充的名称甚至不在搜索中。我可以对任何其他列进行排序，它会给出正确的结果。但不是在第 1 列！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T07:21:34.903

我从这里阅读解决了这个问题： http://productforums.google.com/forum/#!topic/docs/ [Fn7Njk0JYPc](http://productforums.google.com/forum/#!topic/docs/Fn7Njk0JYPc)

如果您省略最后一个* *";0"* * 它将把第一个单元格视为标题。这解决了任何人遇到此问题的问题。注意最后一个**;0**

```
=query(Adresseliste!A2:I256;"select A,B,C,D,E,F,G,H,I where H contains 'Møbler' ";0) 
```

# ms-access - 填充最后一个字段时选项卡控件未重置到第一页

> ID：16044039
> 
> 赞同：0
> 
> 时间：2013-04-16T18:06:01.410
> 
> 标签：ms-access, tabcontrol

我对 microsoft access 还很陌生，我目前正在为我的公司设计一个数据库，但我在尝试让选项卡控件正常工作时遇到了一些麻烦。问题是每当它浏览所有页面时，当它到达要填写的最后一个字段时，它会转到下一条记录但停留在最后一页，它不会“重置”回第一页，所以它遵循逻辑顺序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T19:23:49.523

HansUp 在他的评论中提供了一个很好的建议，但您可能不希望无条件地`SetFocus`进入第一个选项卡，`OnCurrent`因为这可能会导致选项卡焦点在用户使用记录选择器按钮从一条记录导航到另一条记录时切换。在某些情况下，用户可能会觉得这很烦人。

相反，您可能希望使用 final 字段的事件来操作一个标志，当用户通过“从上一条记录的末尾掉下来”移动到新记录时，该`LostFocus`标志将允许`OnCurrent`进入第一个选项卡，但单独保留选项卡焦点`SetFocus`如果用户只是逐步浏览记录。

# c# - 无法检查复选框

> ID：16044042
> 
> 赞同：1
> 
> 时间：2013-04-16T18:06:06.577
> 
> 标签：c#, asp.net

我收到了几份来自无法在我的网站上注册的人的报告，因为他们无法选中表示他们同意使用条款的复选框。基本上，一旦选中该复选框，就会启用一个按钮以允许继续注册。

我已经试过很多次了，点击实际的复选框不会做任何事情，但点击相关的标签通常会做。我已经把它作为解决方法，但我真的很想一直点击实际的复选框。

注册页面为：[http ://www.lonelycache.com/Account/GeocachingAuth.aspx](http://www.lonelycache.com/Account/GeocachingAuth.aspx)

页面表单具有以下复选框（为便于阅读而格式化）：

```
<asp:CheckBox ID="AgreeTOUCheckBox"
     AutoPostBack="true"
     runat="server" Text="&ensp;I have read and agree to the"
     OnCheckedChanged="AgreeTOUCheckBox_OnCheckChanged" /> 
```

生成的 html 是（格式化为便于阅读）：

```
<input id="MainContent_AgreeTOUCheckBox" type="checkbox"
       name="ctl00$MainContent$AgreeTOUCheckBox"
       onclick="javascript:setTimeout(&#39;__doPostBack(\&#39;ctl00$MainContent$AgreeTOUCheckBox\&#39;,\&#39;\&#39;)&#39;, 0)"
/>
<label for="MainContent_AgreeTOUCheckBox"> I have read and agree to the</label> 
```

关于我可以做些什么来让它始终如一地工作的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T18:20:55.897

您的复选框工作正常，它只是隐藏在另一个面板后面。如果您单击并拖动复选框下方以突出显示页面本身，您可以看到您的左侧足迹面板隐藏了大部分复选框。

尝试单击复选框的最右侧边缘，它将起作用。

这可能就像调整你的风格一样简单：

```
<div style="padding-left:10px">
    <asp:CheckBox ID="AgreeTOUCheckBox"
         AutoPostBack="true"
         runat="server" Text="&ensp;I have read and agree to the"
         OnCheckedChanged="AgreeTOUCheckBox_OnCheckChanged" />
</div> 
```

您的授权按钮也是如此。尝试单击它的最左侧，它将不起作用。

让我知道这是否适合你。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-16T18:21:31.043

此问题与 ASP.NET 无关。我检查了你的网站，你有一个 DIV（id：boots），它位于复选框的大部分顶部（它在左侧显示靴子图像作为背景图像）。

如果您将该 div 的宽度设置为 180 像素而不是 200 像素，它应该可以解决您的问题，

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-16T18:24:17.060

我测试了你的网站。我也查不出来。

根据我的测试，您的复选框只是为了启用按钮。如果是这样，你可以简单地使用 jQuery 来做到这一点。

这是示例：

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<script type="text/javascript">
    $(document).ready(function () {
        $('#<%= AgreeTOUCheckBox.ClientID %>').click(function () {
            if ($('#<%= AgreeTOUCheckBox.ClientID %>').attr('checked')) {
                $('#<%= AuthorizeButton.ClientID %>').removeAttr("disabled");
            } else {
                $('#<%= AuthorizeButton.ClientID %>').prop("disabled", "disabled");
            }
        });
    });
</script>

<asp:CheckBox ID="AgreeTOUCheckBox" runat="server" 
    Text="&ensp;I have read and agree to the" />
<asp:Button runat="server" ID="AuthorizeButton" 
    Text="Authorize" Enabled="False"/> 
```

# sql - 如何获取具有标识列的所有表的列表

> ID：16044046
> 
> 赞同：29
> 
> 时间：2013-04-16T18:06:13.203
> 
> 标签：sql, sql-server, tsql, identity-column

我想了解如何从 MS SQL 数据库中获取具有标识列的所有表的列表。

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2013-04-16T18:08:13.963

```
SELECT 
  [schema] = s.name,
  [table] = t.name
FROM sys.schemas AS s
INNER JOIN sys.tables AS t
  ON s.[schema_id] = t.[schema_id]
WHERE EXISTS 
(
  SELECT 1 FROM sys.identity_columns
    WHERE [object_id] = t.[object_id]
); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-08-01T16:36:36.760

```
 select COLUMN_NAME, TABLE_NAME
      from INFORMATION_SCHEMA.COLUMNS
       where TABLE_SCHEMA = 'dbo'
       and COLUMNPROPERTY(object_id(TABLE_NAME), COLUMN_NAME, 'IsIdentity') = 1
       order by TABLE_NAME 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-11-06T19:56:43.910

我喜欢这种方法，因为它使用联接而不是 WHERE EXISTS 或对 COLUMNPROPERTY 的调用。请注意，仅当您 a) 具有包含多个 IDENTITY 列的表并且 b) 不希望重复结果时，才需要 group by：

```
SELECT 
    SchemaName = s.name,
    TableName = t.name
FROM
    sys.schemas AS s
    INNER JOIN sys.tables AS t ON s.schema_id = t.schema_id
    INNER JOIN sys.columns AS c ON t.object_id = c.object_id
    INNER JOIN sys.identity_columns AS ic on c.object_id = ic.object_id AND c.column_id = ic.column_id
GROUP BY
    s.name,
    t.name
ORDER BY
    s.name,
    t.name; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-12-06T17:26:05.753

下面的脚本将执行以下操作：

```
SELECT a.name as TableName,
  CASE WHEN b.name IS NULL
    THEN 'No Identity Column'
    ELSE b.name
  END as IdentityColumnName
FROM sys.tables a
  LEFT JOIN sys.identity_columns b on a.object_id = b.object_id 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2017-11-25T10:33:38.437

选择 OBJECT_NAME(object_Id) Rrom sys.identity_columns 其中 is_identity = 1;

# c++builder - TeeChart X 轴标签格式

> ID：16044047
> 
> 赞同：0
> 
> 时间：2013-04-16T18:06:15.157
> 
> 标签：c++builder, vcl, teechart

我的 TeeChart 看起来不错，网格线/刻度出现在我希望的位置等等（X 轴 LabelStyle 设置为 talAuto）。现在我需要格式化 X 轴标签，以便它们显示时间偏移而不是数据点编号。

我已将 LabelStyle 更改为 talMark 并正在处理图表的 OnGetAxisLabel。问题是，当我将 LabelStyle 设置为 talAuto 时，会为每个 X 轴点调用我的事件处理程序，而不仅仅是显示标签的点。

如何进行设置，以便仅针对 LabelStyle 为 talAuto 时绘制的标签调用我的事件处理程序？

我正在使用 C++ Builder XE3 和 IDE 中包含的 TeeChart 版本。

更新灵感来自 Yeray 的评论：

将 LabelStyle 设置为 talAuto 我总是将 -1 的 ValueIndex 传递给我的事件处理程序。在查看 LabelText 时，我看到了在 ValueIndex 中预期的值，但我也得到了相同数量的不正确值（忽略非 X 轴值）。例如...

我的图表显示 5 个 X 轴值：200、400、600、800、1000。我的事件处理程序被调用 10 次，顺序如下：

```
ValueIndex      LabelText
    -1              937.5
    -1                0
    -1          240,000
    -1              200
    -1          239,800
    -1            1,000
    -1              800
    -1              600
    -1              400
    -1              200 
```

我不知道前 5 个值来自哪里，也不知道为什么调用我的事件处理程序。

注意：我删除了 C++ Builder 标签，因为任何使用 TeeChart 的人都可以回答这个问题，无论他们的语言如何；我使用 BCB 的事实对这个问题并不重要。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T11:15:55.553

> 我已将 LabelStyle 更改为 talMark 并正在处理图表的 OnGetAxisLabel。问题是，当我将 LabelStyle 设置为 talAuto 时，会为每个 X 轴点调用我的事件处理程序，而不仅仅是显示标签的点。

对，使用`talMark` `LabelStyle`，轴将绘制与系列中的点一样多的标签。您可以使用`talAuto` `LabelStyle`来获取所需的标签数量，并且您仍然可以在`OnGetAxisLabel`事件中设置标签的格式。

* * *

更新：

> 当我使用 talAuto 时，ValueIndex 始终为 -1，因此我不知道哪个数据点与事件相关联。

当`talAuto`设置并且系列有标签时，它的行为类似于`talText`and `talMark`：这些字符串用于底部轴，并且可以使用`ValueIndex`in事件。`OnGetAxisLabel`当`talAuto`设置了但系列没有标签时，它的行为类似于`talValue`：底部轴计算标签以显示在和的函数`Minimum`中。无法使用 in 事件，因为轴标签不对应于系列点。`Maximum``Increment``ValueIndex``OnGetAxisLabel`

我猜你的系列中没有标签。否则，从`talAuto`to更改`talMark`不应该改变任何东西。

所以你必须在其中一个或另一个之间做出决定。也许您可以使用`talValue`（或`talAuto`不使用标签）来获取您想要的标签数量，并从将要绘制的字符串中提取您需要的信息。

* * *

或者，它可能更容易使用`CustomLabels`。它们将允许您控制轴标签的位置和文本，而无需任何事件。例如：

```
procedure TForm1.FormCreate(Sender: TObject);
var i: Integer;
begin
  Chart1.View3D:=false;

  Chart1.AddSeries(TBarSeries).FillSampleValues;

  Chart1.Axes.Bottom.Items.Clear;
  for i:=0 to Chart1[0].Count-1 do
    Chart1.Axes.Bottom.Items.Add(Chart1[0].XValue[i], 'label ' + IntToStr(i));
end; 
```

# javascript - 从 javascript 进行 Ajax 调用

> ID：16044050
> 
> 赞同：0
> 
> 时间：2013-04-16T18:06:19.493
> 
> 标签：javascript, jquery, ajax

我有以下 jquery ajax 调用，它在纯 jquery 文件中运行良好。

```
var request = $.ajax({
    url: "kscript.jsp",
    type: "POST",
    data: {st:start, sp:stop},
    dataType: "html"
});
request.done(function(msg) {
    $("#output").html( msg );
    alert("Success!!!"+msg);
});
request.fail(function(jqXHR, textStatus) {
    alert( "Request failed: " + textStatus );
}); 
```

此后，我将代码重写为 javascript，但我现在将 ajax 调用直接放在 javascript 函数中。这没有用，我收到 500 内部服务器错误。

```
function myAjax(){
    var request = $.ajax({
        url: "kscript.jsp",
        type: "POST",
        data: {st:start, sp:stop},
        dataType: "html"
    });
    request.done(function(msg) {
        $("#output").html( msg );
        alert("Success!!!"+msg);
    });
    request.fail(function(jqXHR, textStatus) {
        alert( "Request failed: " + textStatus );
    });
} 
```

我也试过这个：

```
function ajaxFunction() {
xmlhttp.open("POST","kscript.jsp",true);
xmlhttp.setRequestHeader("Content-type","application/x-www-form-urlencoded");
xmlhttp.send("st=start&sp=stop");

xmlhttp.onreadystatechange=function()
  {
  if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
    document.getElementById("output").innerHTML=xmlhttp.responseText;
    }
  }

} 
```

但同样的错误：500 内部服务器错误。在所有这些情况下，错误都指向 kscript.jsp。我已确保 URL 和拼写正确但没有工作。感谢您提出解决此问题的建议。

这是 kscript.jsp

```
 <%

        String astart = request.getParameter("start");
        String sptimes=request.getParameter("stop");

        out.print("<h1> Start is: "+start+"    --  Stop is"+stop +"</h1>");

    %> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T18:12:40.653

它看起来像一个文件夹结构问题，你应该确保相对路径是好的，我的意思是，如果你从 js 调用你应该指向 /jsp/yourJsp.jsp ，检查...顺便说一句，你在使用验证来自服务器的响应的 F12 工具？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T18:15:56.507

我认为您在调用 java 脚本方法时犯了一些错误。所以请检查或让您在 javascript 标记中描述 ajaxcall。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T18:29:21.603

您试图在 jsp 中访问错误的参数。

错误发生在这里：

```
String astart = request.getParameter("start"); 
```

参数是`st`and `sp`，不是`start`and `stop`。

你需要：

```
String astart = request.getParameter("st");
String sptimes=request.getParameter("sp"); 
```

或者，您可以更改 js 以传递正确的参数：

```
data: {start:start, stop:stop}, 
```

# powershell - 根据输入构建命令参数

> ID：16044052
> 
> 赞同：2
> 
> 时间：2013-04-16T18:06:23.237
> 
> 标签：powershell, windows-server-2008, group-policy

我正在尝试构建一个脚本，该脚本将从 CSV 导入数据并根据填写的数据处理命令。小示例：

使用以下标题格式化的 CSV

```
Name TargetOU Description ManagingGroup Permission 
```

其中有些是必需的，有些是可选的。

这很容易使用参数来完成，但这是试图在没有用户交互的情况下运行。如果我只有`Name`一个可选的，下面的代码将解决这个问题`Description`：

```
If ($_.Description -ne $null) {
    New-GPO -Name $_.Name -Description $_.Description }
ElseIF ($_.Description -eq $null) {
    New-GPO -Name $_.Name } 
```

如果我想让它更复杂，我最终不得不`If`为必需和可选参数的每个可能组合编写一个语句：

```
If ($_.Description -ne $null -and $_.TargetOU -ne $null) {
    New-GPO -Name $_.Name -Description $_.Description | New-GPLink -Target $_.TargetOU }
ElseIf ($_.Description -eq $null -and $_.TargetOU -ne $null) {
    New-GPO -Name $_.Name | New-GPLink -Target $_.Target } 
```

等等......对于每一种可能的组合。

有没有更简单的方法来构建这个命令而不需要 100 条`If`语句？CSV 可能包含 10 个选项，可根据用户想要完成的内容填写。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T18:50:42.823

您只需要将强制参数和可选参数分开即可。您使用默认值初始化可选参数，如果缺少强制参数，您只需取消该行的操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T20:01:34.030

你可以使用喷溅。在 splatting 中，您将哈希表传递给一个函数，该函数被解释为参数。

例如：

```
$params=@{Name='Fred'}

my-func @params 
```

通过使用 splatting，您不必有一堆嵌套的 if-then 结构，只需构建参数列表并发送它。

# javascript - 使用 JavaScript 将行添加到表单元素内的表格比没有表单元素慢

> ID：16044064
> 
> 赞同：0
> 
> 时间：2013-04-16T18:07:10.113
> 
> 标签：javascript, jquery, html-table, tablesorter

我最终将此问题报告为错误。似乎会影响 webkit 浏览器。[https://code.google.com/p/chromium/issues/detail?id=233677](https://code.google.com/p/chromium/issues/detail?id=233677)

下面的原始问题。

* * *

我正在使用带有 Christian Bach 的 tablesorter 2 插件的 jQuery 1.8.1 并遇到了一个特殊的问题。（jQuery 1.7.1 和 tablesorter 1 也有同样的问题。）

我有一个有数百行的表，它在大约 1 秒内排序。

当我将表格包装在 HTML`<form>`元素中时，tablesorter 插件变得非常慢。大约 500 行的表需要 8 秒以上的时间进行排序。

我只是`$("#table").tablesorter()`在没有额外参数的情况下调用，只是没有其他 JavaScript 或 CSS 的纯 HTML。

此表的 HTML 约为 1.2mb，每个都`<td>`包含额外的 HTML 元素，例如`<button>`, `<div>`, `<span>`, `<a>`, ...

任何想法该`<form>`元素可能会干扰什么？谢谢，/w

编辑：这是一个只有 10 行的示例。将实际时间缩放到 500，然后将表格包裹起来`<form></form>`，看看它是如何减慢排序的。[http://pastebin.com/95KAAb88](http://pastebin.com/95KAAb88)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T20:31:35.073

我发现这个问题不是 tablesorter 或 datatables 独有的。在我的 Chrome (23) 版本中可能与 JavaScript 引擎有关。

我创建了一个简单的 jsfiddle。Firefox 20.0 似乎没有这个问题。

[http://jsfiddle.net/wsams/yGpdv/27/](http://jsfiddle.net/wsams/yGpdv/27/)

如果您打开 Web 开发人员控制台并运行此脚本，请记下`Appending child`时间。这是将行追加到表所需的时间。

几次过去后，简单地把桌子包起来`<form>`，

```
<form>
<table>
    <thead>
        <tr>
            <th>count</th>
            <th>link</th>
            <th>input</th>
            <th>button</th>
            <th>count</th>
            <th>link</th>
            <th>input</th>
            <th>button</th>
        </tr>
    </thead>
    <tbody>
        <tr id="tr1">
            <td>item 1</td><td><a href="text.html?key=value&amp;dog=poodle&amp;cat=siamese">a big link</a></td><td><input type="text" value="something" /></td><td><button type="submit" name="test" value="why">why this</button></td><td>item 1</td><td><a href="text.html?key=value&amp;dog=poodle&amp;cat=siamese">a big link</a></td><td><input type="text" value="something" /></td><td><button type="submit" name="test" value="why">why this</button></td>
        </tr>
    </tbody>
</table>
</form> 
```

现在再次运行脚本并记下`Appending child`时间。我看到它从每次追加约 0.040 毫秒到约 8 毫秒。当您添加更多行时，它似乎也有点指数。

对我来说，这肯定是原生 JavaScript DOM 函数的问题，但我不是这方面的专家。

# ruby-on-rails - 是否可以更改内存中的活动记录关联而不将它们保存到数据库中？

> ID：16044068
> 
> 赞同：3
> 
> 时间：2013-04-16T18:07:14.457
> 
> 标签：ruby-on-rails, activerecord

我们正在使用 Ruby on Rails。以 MySQL 作为数据库的 ActiveRecord。

我们有 order 和 order_items 之间的关联。一个订单有 1 个或多个 order_items。所以我们可以做以下事情（1029是订单ID）

```
o=Order.find 1029
o.order_items 
```

是否可以仅在内存中操作活动记录关联（例如，删除订单的某些订单项）而不将更改保存到数据库？如果是这样，你会怎么做？

我们有一个遍历订单的订单项的方法，如果我们能做到以上几点，我们的生活会容易得多。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T18:11:57.167

```
o=Order.find 1029,1030,1031,1032
o.order_items

o2=Order.find 1029
o2.order_items

o3 = o2-o1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T18:19:28.077

你问的是可能的。请记住，这`o.order_items`将返回一个order_item 实例*数组*。所以你可以在这个数组上使用任何你想要的方法。当然，您可以删除某些 order_items，就像您可以从数组中删除某些元素一样。

有很多方法可以从数组中删除元素。一些值得注意的方法是`pop`, `drop`, `shift`, `compact`,`delete`等`uniq`。[在此处选择适合您需要的方法](http://ruby-doc.org/core-1.9.3/Array.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-10T21:56:00.890

我想建议这种方法来删除内存中的 AR 对象。
将属性添加到负责将 AR 对象标记为已删除的相应模型（例如`deleted`属性）：

```
 class OrderItem < ActiveRecord::Base
     ...
     attr_accessor :deleted

     def deleted
       @deleted || 'no'
     end
   end 
```

将相应的对象标记为已删除：

```
o.order_items {|oi| oi.deleted = 'yes' if oi.id == 1029} 
```

过滤 order_items 只设置未删除的行：

```
o.order_items do |oi| 
 unless oi.deleted == 'yes'
 ...
 end
end 
```

# android - 转换字符串“20130310”前。Android 中的日期格式

> ID：16044070
> 
> 赞同：0
> 
> 时间：2013-04-16T18:07:23.093
> 
> 标签：android, performance, date

我正在尝试转换

String date = "20130310" 到 android 中的日期格式，我在滚动时遇到异常并崩溃。

```
 SimpleDateFormat format = new SimpleDateFormat("yyyyMMdd");
        try {
            Date parsed = format.parse(pendingTrade.voteDeadline);
            System.out.println(" 2\. " + NEWS_DATE_FORMAT.format(parsed));
            holder.deadline.setText("Deadline | " + NEWS_DATE_FORMAT.format(parsed));
        }
        catch(ParseException pe) {
            System.out.println("ERROR: Cannot parse \"" + pendingTrade.voteDeadline + "\"");
        } 
```

日志是

```
04-16 13:54:36.410: E/AndroidRuntime(13885): java.lang.NullPointerException
04-16 13:54:36.410: E/AndroidRuntime(13885):    at     java.text.SimpleDateFormat.parse(SimpleDateFormat.java:1001)
04-16 13:54:36.410: E/AndroidRuntime(13885):    at java.text.DateFormat.parse(DateFormat.java:620)
04-16 13:54:36.410: E/AndroidRuntime(13885):    at com.cbssports.nflapp.ffb.ui.FragmentPendingTrades$PendingTradesAdapter.getView(FragmentPendingTrades.java:1443)
04-16 13:54:36.410: E/AndroidRuntime(13885):    at android.widget.AbsListView.obtainView(AbsListView.java:2143)
04-16 13:54:36.410: E/AndroidRuntime(13885):    at android.widget.ListView.makeAndAddView(ListView.java:1831)
04-16 13:54:36.410: E/AndroidRuntime(13885):    at android.widget.ListView.fillDown(ListView.java:674)
04-16 13:54:36.410: E/AndroidRuntime(13885):    at android.widget.ListView.fillGap(ListView.java:638)
04-16 13:54:36.410: E/AndroidRuntime(13885):    at android.widget.AbsListView.trackMotionScroll(AbsListView.java:4930)
04-16 13:54:36.410: E/AndroidRuntime(13885):    at android.widget.AbsListView$FlingRunnable.run(AbsListView.java:4087)
04-16 13:54:36.410: E/AndroidRuntime(13885):    at android.view.Choreographer$CallbackRecord.run(Choreographer.java:749)
04-16 13:54:36.410: E/AndroidRuntime(13885):    at android.view.Choreographer.doCallbacks(Choreographer.java:562)
04-16 13:54:36.410: E/AndroidRuntime(13885):    at android.view.Choreographer.doFrame(Choreographer.java:531)
04-16 13:54:36.410: E/AndroidRuntime(13885):    at android.view.Choreographer$FrameDisplayEventReceiver.run(Choreographer.java:735)
04-16 13:54:36.410: E/AndroidRuntime(13885):    at android.os.Handler.handleCallback(Handler.java:725)
04-16 13:54:36.410: E/AndroidRuntime(13885):    at android.os.Handler.dispatchMessage(Handler.java:92)
04-16 13:54:36.410: E/AndroidRuntime(13885):    at android.os.Looper.loop(Looper.java:137)
04-16 13:54:36.410: E/AndroidRuntime(13885):    at android.app.ActivityThread.main(ActivityThread.java:5041)
04-16 13:54:36.410: E/AndroidRuntime(13885):    at java.lang.reflect.Method.invokeNative(Native Method)
04-16 13:54:36.410: E/AndroidRuntime(13885):    at java.lang.reflect.Method.invoke(Method.java:511)
04-16 13:54:36.410: E/AndroidRuntime(13885):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
04-16 13:54:36.410: E/AndroidRuntime(13885):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
04-16 13:54:36.410: E/AndroidRuntime(13885):    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T18:12:08.593

你得到的例外是`NullPointerException`. 检查 的值`pendingTrade.voteDeadline`。它可能为空。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T18:12:53.840

试试这样

String string = "2010 年 1 月 2 日";

Date date = new SimpleDateFormat("MMMM d, yyyy", Locale.ENGLISH).parse(string);

System.out.println(日期);

# excel - 使用按钮选择和复制行

> ID：16044073
> 
> 赞同：2
> 
> 时间：2013-04-16T18:07:24.633
> 
> 标签：excel, button, vba

我正在尝试使用 Excel 中的按钮将一定范围的单元格从活动工作簿复制到另一个工作簿。当我在其分配的宏中为每个按钮指定一个固定范围时，复制工作完美，但我很难理解如何在每个按钮上使用相同的宏以及按钮的行号来指示要复制的数据行。

每行包含 6 个左右的单元格，第 7 个包含按钮。当用户按下此按钮时，需要复制与包含按下按钮的行位于同一行的 6 个单元格。

当谈到 VBScript 时，我是一个完全的新手，但很多谷歌搜索让我走到了这一步：

```
Sheets("SurfaceThreats").Range("A4:F4")Copy_
Sheets("ORBAT").Cells(Rows.Count,1).End(x1Up).Offset(1,0) 
```

肯定有比为每个按钮分配不同的、固定范围的宏更优雅的解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T18:24:57.173

看这个截图

![在此处输入图像描述](https://i.stack.imgur.com/slcnO.png)

这是`Select Row(s)`按钮的代码

```
Option Explicit

Private Sub CommandButton1_Click()
    Dim Ret As Range, rng As Range
    Dim lRow As Long

    On Error Resume Next
    Set Ret = Application.InputBox("Please select the row", Type:=8)
    On Error GoTo 0

    If Not Ret Is Nothing Then
        For Each rng In Ret.Rows
            '~~> Get the last row in sheets "ORBAT" where you want to copy
            With Sheets("ORBAT")
                lRow = .Range("A" & .Rows.Count).End(xlUp).Row + 1
            End With

            '~~> Copy the rows
            Sheets("SurfaceThreats").Range("A" & rng.Row & ":F" & rng.Row).Copy _
            Sheets("ORBAT").Cells(lRow, 1)
        Next
    End If
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T18:52:22.760

您不能创建通用按钮处理程序，但可以动态创建按钮和宏来处理它们。但这是一项相当多的工作，您必须开始动态创建宏。（有时我认为这可能会导致防病毒软件出现问题）。

您可以使用该`Worksheet_OnBeforeDoubleClick`事件来创建“假”按钮

```
Private Sub Worksheet_BeforeDoubleClick(ByVal Target As Range, Cancel As Boolean)

    If Target.Cells.Count > 1 Then Exit Sub

    If Not Intersect(Target, Target.Worksheet.Columns(1)) Is Nothing Then
        MsgBox "You Clicked " & Target.Address
        ' call your generic handler here passing the Target.Address or Target.Row
        Cancel = True
    End If

End Sub 
```

使用此代码，如果您双击“A”列中的任何单元格，您将收到一个消息框，说明您单击了哪个单元格。

它不是最好的想法，一些用户可能不明白它是一个按钮。

# javascript - 提交按钮无法正常工作

> ID：16044083
> 
> 赞同：0
> 
> 时间：2013-04-16T18:08:15.140
> 
> 标签：javascript, html

您好，我正在使用此代码。我有一个问题。当我在我的输入框中输入输入时，它很好。但是当我按 Enter 时，页面会刷新一秒钟，输入框会自动清除。

```
 <script>
        function book_suggestion() {
            var book = document.getElementById("book").value;
            var xhr;
            if (window.XMLHttpRequest) {
                xhr = new XMLHttpRequest();
            } else if (window.ActiveXObject) {
                xhr = new ActiveXObject("Microsoft.XMLHTTP");
            }
            var data = "book_name=" + book;
            xhr.open("POST", "book-suggestion.php", true);
            xhr.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");
            xhr.send(data);
            xhr.onreadystatechange = display_data;

            function display_data() {
                if (xhr.readyState == 4) {
                    if (xhr.status == 200) {
                        document.getElementById("suggestion").innerHTML = xhr.responseText;
                    } else {
                        alert('There was a problem with the request.');
                    }
                }
            }
        }
    </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T18:13:34.910

您的页面重新加载的原因是`<form>`元素抓住了`enter`压力。

赶上`enter`媒体将提交表格。

提交没有`action=""`属性的表单将提交到同一页面。

提交到不处理请求的页面只会重新加载页面，并且您的表单输入将重置为空白。

要解决此问题，请使用 javascript 来禁用输入时提交，以捕获等于`13`并返回 false 或取消事件的按键。

* * *

```
<input type=text id=book onKeyUp="book_suggestion( event )">

... [snip] ...  

function book_suggestion( e ){
    if( e.which == 13 ){
        e.preventDefault();
        e.stopPropagation();
        return false;
    }

    ... [snip your code] ... 
```

这应该够了吧。

对于它的价值，Stack Overflow 上的人通常不喜欢根据您的要求修改您的代码。这是一个简单的修复，可以通过谷歌搜索关键字（“catch keypress”、“cancel event”等）找到。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T20:48:13.373

如果我理解你，你想提交自己的表单数据。您应该`false`在`book_suggestion()`函数内返回。并添加`onsubmit`到`<form>`元素。确保它应该有**return**。像那样：

```
<form onsubmit="return book_suggestion();"> 
```

# sharepoint - 从 InfoPath 表单更新 SharePoint 列表

> ID：16044085
> 
> 赞同：0
> 
> 时间：2013-04-16T18:08:21.667
> 
> 标签：sharepoint, infopath

我是SharePoint/ **InfoPath**环境的新手，我很困惑。

我在 SharePoint 中有一个现有列表。我创建了一个 InfoPath 表单，它从该列表中检索一列并使用它来填充 InfoPath 多选列表框。我还在表单上添加了一些额外的日期选择器控件来捕获开始结束日期。

我想做以下事情：

使用可用的复选框在多选列表框中选择一项或多项。填写表格上的开始日期和结束日期字段。单击表单的提交按钮后，表单会以某种方式更新与列表框中所选内容相对应的 SharePoint 列表项，其中包含开始和结束日期字段的内容。“不知何故”是让我难过的地方。我读过我可以使用网络服务来做到这一点，但不知道如何去做。

我可以使用的工具是：

*   共享点 2010
*   信息路径 2010
*   SharePoint 设计器 2010

我无权访问 Visual Studio

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T21:18:27.263

以下是介绍如何使用 InfoPath 更新 SharePoint 列表的基本教程。

[http://www.bizsupportonline.net/browserforms/update-sharepoint-list-items-object-model-infopath-browser-form.htm](http://www.bizsupportonline.net/browserforms/update-sharepoint-list-items-object-model-infopath-browser-form.htm)

我不太使用 InfoPath，但看起来它需要一些您需要在 Visual Studios 中完成的编码。我不确定 InfoPath 表单更新多个 SharePoint 列表项的效果如何。

这是另一个类似的 Stackoverflow 问题的链接。

[https://stackoverflow.com/a/14287616/1594166](https://stackoverflow.com/a/14287616/1594166)

您是否知道可以将 MS Access 链接到 SharePoint 列表，然后您可以编写查询来像表格一样更新行？使用表单和一些 VBA，您可以构建自定义 SQL 字符串并根据表单中的选择执行该字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-14T22:32:13.713

另一种选择是使用 SharePoint 中的数据表视图。这提供了过滤、排序和更新列表的能力。它可能足以满足您的目的。它需要安装 MS Access，但如果您使用的是 InfoPath，那么您可能也有 Access。如果这不起作用，那么我将支持@AxGryndr 的方法，即从 Access 链接到列表并使用查询来执行批量更新。

对于您所描述的要求，InfoPath 可能不是一个有用的选项。开箱即用的 InfoPath 与 SharePoint 的集成功能相当强大，但存在一些限制，使其不适用于不集成第三方工具（[Qdabra 的 qRules](http://www.qdabra.com/en/products/qRules_new.aspx)）或 Visual Studio 的更复杂的要求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-23T09:07:49.800

只需在 InfoPath 表单库上创建一个或多个工作流，根据需要使用表单数据在不同列表上创建其他列表项。在 InfoPath 表单库上创建新项目时将触发这些工作流。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T06:44:18.300

使用列表使用 InfoPath 表单时，您可以转到列表本身，然后单击列表，然后自定义表单。从这里你应该首先能够：

一个。创建特定列表所需的列（这将包含您的开始和结束日期等）

湾。安装了 Microsoft InfoPath 2010（我猜你已经安装了）

由于您已经在列表中有列，您只需单击自定义此表单，信息路径将打开，您可以从那里自定义您自己的表单。

# c# - 反序列化数据最佳实践

> ID：16044087
> 
> 赞同：0
> 
> 时间：2013-04-16T18:08:24.090
> 
> 标签：c#, .net, c#-4.0, serialization, deserialization

我被赋予了反序列化一些数据的任务。数据已全部转换为以下格式的字符串：

`InternalNameA8ValueDisplay NameA¬InternalNameB8ValueDisplay NameB¬`等等等等

（即，它有一个内部名称“8”、值、显示名称，后跟“¬”**）。例如，你会有`FirstName8JoeFirst Name¬`

我无法控制这些数据是如何序列化的，它是遗留的东西。

我曾想过对字符串进行一堆拆分，或者将其拆分为一个 char 数组并以这种方式拆分文本。但这似乎很可怕。这种方式有太多可能出错的地方（例如，如果电话号码的值（例如）可能以“8”开头。

我想知道的是人们对此的态度是什么？有什么更聪明的方法可以分解数据吗

**注意：** “¬”实际上不是字符，它看起来更像是一个指向左侧的箭头。但我现在不在我的机器旁。嗬！

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T19:59:33.897

我建议不要使用拆分，而是使用简单的状态机。遍历每个字符，直到遇到分隔符，然后您就知道您在下一个字段上。这可以解决电话号码中的“8”之类的问题。

注意 - 前面有未经测试的代码。

```
var fieldValues = new string[3];
var currentField = 0;
var line = "InternalNameA8ValueDisplay NameA¬InternalNameB8ValueDisplay NameB¬";

foreach (var c in line)
{
    if (c == '8' && currentField == 0)
    {
        currentField++; continue;
    }

    if (c == '¬')
    {
        currentField++; continue;
    }

    fieldValues[currentField] += c;
} 
```

处理不稳定的格式 - 总是一个好时机！

祝你好运，埃里克

# mysql - 选择/mysql没有正确选择的地方

> ID：16044090
> 
> 赞同：0
> 
> 时间：2013-04-16T18:08:29.463
> 
> 标签：mysql, select, where

我设法在一些帮助下想出了这个，但是由于某种原因它不能正常工作。最后的整行与类别似乎很随机，我无法弄清楚它在做什么。

使用或持有似乎和这个月一样工作正常，我相信如果所有项目都在一般类别中，但它在其他任何地方都可以正常工作并且它变得很奇怪。

如果有人能看到问题，我将不胜感激。

`WHERE (Status = 'Used' OR Status = 'Holding') AND MONTH( Display_Date )=4 AND Category = 'General' OR Category = 'mountains' OR Category = 'rivers' OR Category = 'sky' OR Category = 'crass' OR Category = 'sea' OR Category = 'flowers'`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T18:11:27.713

很可能它与括号有关。我猜你想放一些类似的东西.-

```
WHERE (Status = 'Used' OR Status = 'Holding') AND 
      MONTH(Display_Date) = 4 AND 
      (Category = 'General' OR Category = 'mountains' OR Category = 'rivers' OR Category = 'sky' OR Category = 'crass' OR Category = 'sea' OR Category = 'flowers') 
```

请记住，`AND`它的优先级高于`OR`，因此如果没有括号，您的原始条件将`true`与任何 OR 语句一样长`true`，而不管先前的`AND`条件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T18:11:54.363

我假设您说任何与您指定的任何类别值匹配的结果（以及匹配对 Status 和 Display_Date 的检查）都应该返回。如果是这种情况，您需要将所有针对 Category 的检查括在括号中：

```
WHERE (Status = 'Used' OR Status = 'Holding') AND MONTH( Display_Date )=4 AND     (Category = 'General' OR Category = 'mountains' OR Category = 'rivers' OR Category = 'sky' OR Category = 'crass' OR Category = 'sea' OR Category = 'flowers') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T18:12:21.910

`AND`优先于`OR`，因此您现在的条件是：

```
WHERE ((Status = 'Used' OR Status = 'Holding') AND MONTH( Display_Date ) = 4 AND Category = 'General') OR Category = 'mountains' OR Category = 'rivers' OR Category = 'sky' OR Category = 'crass' OR Category = 'sea' OR Category = 'flowers' 
```

我假设你想要这个：

```
WHERE  status IN ('used', 'holding')
       AND MONTH(Display_Date) = 4
       AND category IN ('general', 'mountains', 'rivers', 'sky', 'grass', 'sea') 
```

# c++ - Different behavior of boost::condition_variable under VC++ and GCC

> ID：16044092
> 
> 赞同：4
> 
> 时间：2013-04-16T18:08:35.387
> 
> 标签：c++, multithreading, boost, boost-thread

On my computer, running on Windows 7, the following code, compiled in Visual C++ 2010 with Boost 1.53, outputs

```
no timeout
elapsed time (ms): 1000 
```

The same code compiled with GCC 4.8 [(online link](http://liveworkspace.org/code/Rvzwa)) outputs

```
timeout
elapsed time (ms): 1000 
```

My opinion is that the VC++ output is not correct and it should be `timeout`. Does anyone have the same output (i.e. `no timeout`) in VC++? If yes, then is it a bug in the Win32 implementation of `boost::condition_variable`?

The code is

```
#include <boost/thread.hpp>
#include <iostream>

int main(void) {
  boost::condition_variable cv;
  boost::mutex mx;
  boost::unique_lock<decltype(mx)> lck(mx);
  boost::chrono::system_clock::time_point start = boost::chrono::system_clock::now();
  const auto cv_res = cv.wait_for(lck, boost::chrono::milliseconds(1000));
  boost::chrono::system_clock::time_point end = boost::chrono::system_clock::now();
  const auto count = (boost::chrono::duration_cast<boost::chrono::milliseconds>(end - start)).count();
  const std::string str = (cv_res == boost::cv_status::no_timeout) ? "no timeout" : "timeout";
  std::cout << str << std::endl;
  std::cout << "elapsed time (ms): " << count << std::endl;
  return 0; 
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-16T18:15:53.670

If we read the documentation we see:

> Atomically call lock.unlock() and blocks the current thread. The thread will unblock when notified by a call to this->notify_one() or this->notify_all(), after the period of time indicated by the rel_time argument has elapsed, **or spuriously**... [Emphasis mine]

What you are almost certainly seeing is that the VS implementation is treating it as a spurious wakeup that happens to be at the end of the expected duration while the other implementation is treating it as a timeout.

# django - Django 查询 - 按通用关系字段对的计数排序

> ID：16044098
> 
> 赞同：0
> 
> 时间：2013-04-16T18:09:00.490
> 
> 标签：django, generics, sql-order-by, relation

我有一个模型 Tic，它与我的应用程序中的其他模型具有通用外键关系。

```
class Tic(models.Model):    
    user = models.ForeignKey(User)
    content_type = models.ForeignKey(ContentType)
    object_id = models.PositiveIntegerField() 
    content_object = generic.GenericForeignKey('content_type', 'object_id')
    added = models.DateTimeField(auto_now_add=True)

    class Meta:
        unique_together = ('user', 'content_type', 'object_id') 
```

我想查询这个模型并完成以下操作：

*   过去一周仅限于“抽动”
*   按 (content_type, object_id) 对的出现次数排序（最高优先）
*   能够跟踪返回的对象（例如，如果返回“电影”对象，则能够执行 tic[0].content_object.movi​​e_title）

到目前为止，我有以下查询可以让我得到正确的 Tics，但我只能让它作为值列表正常工作。

```
d = date.today() - timedelta(days=14)
t = Tic.objects.filter(added__gt = d).values('content_type','object_id').annotate(num_tic = Count('id')).order_by('-num_tic') 
```

知道如何获得类似的查询来返回对象吗？

**编辑**

为了跟进，我能够通过使用原始查询来完成此操作：

```
sql = 'SELECT *, COUNT(*) AS count FROM tics_tic WHERE content_type_id = '+ str(movie_ct.id) +' GROUP BY content_type_id, object_id ORDER BY Count DESC' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T18:19:20.500

…………拿出来`.values`……

# javascript - Firefox 浏览器在调用 oncontextmenu 时未定义事件

> ID：16044100
> 
> 赞同：0
> 
> 时间：2013-04-16T18:09:06.657
> 
> 标签：javascript, firefox, contextmenu

我在右键单击页面中的按钮时显示上下文菜单。用于显示上下文菜单的代码是

```
window.addEventListener('contextmenu',function (e){e.preventDefault();},false);} 
```

当我右键单击按钮时，调用的上下文菜单方法是

```
displaycontextmenu(obj,event)
{
      console.log("Context");
      console.log(event);
      // Displaying context menu
} 
```

代码在 IE 浏览器中执行良好，即使在 chrome 中我也可以在控制台中看到“**上下文**”和打印事件。但在 Firefox 中，它打印为“**上下文**”**且未定义**。看到这里事件未定义，我真的很困惑。

我正在使用该事件来获取 x 和 y 坐标以在正确的位置显示上下文菜单。由于事件未定义，因此无法继续进行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T18:21:47.057

之所以能`event`在 chrome 和 IE 的控制台看到显示，是因为 IE 一直有将事件对象分配给全局引用（`window.event`）的坏习惯。
Chrome 已经正确实现了 W3C 模型，并按照您的预期将事件对象传递给处理程序，但*也*准备好对该事件对象的全局引用，以防万一。

尝试 logging `obj`，它会在 FF 中记录事件对象......我对此很有信心。Chrome 的行为方式也完全相同：事件对象将被传递给处理程序。

由于`event`参数未定义，我只能假设它`event`被忽略（被视为保留关键字，但只是悄悄地），或者正在进行一些幕后范围扫描，将*local* `event`解析为*global* `[window.]event`。

无论如何，不​​允许或不赞成使用可能是关键字或已经存在的变量名（例如`document`，`window`或）。`this`这就是为什么你会经常看到这个：

```
function eventHandler (e)
{
    e = e || event;
} 
```

`e`允许作为 varname，并且没有名称冲突，除非我们自己创建一个。如果处理程序没有收到事件对象，我们引用`event`它，由于范围扫描，将被解析为`window.event`.

# android - 如何更改默认大小

> ID：16044102
> 
> 赞同：4
> 
> 时间：2013-04-16T18:09:16.970
> 
> 标签：android, html, css

我在我的 Android 应用程序的 strings.xml 文件中指定了一些这样的 HTML 文本：

```
<string>

    <h4>title</h4><br/>
           some text
</string> 
```

1) 如何更改 h4 标签的文本大小？我已将我的应用程序在 styles.xml 中的默认文本大小更改为 23sp，但对于 h4 标签，我希望它是例如 28sp。

2）是否可以更改整个应用程序主题中按钮和文本视图的文本大小？我希望我所有的文本视图都具有 23sp 大小和按钮具有 26sp。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T18:31:31.110

如果您使用的是 WebView，则可以使用 CSS 来设置任何样式。例如，要更改 <h1>、<h2>、<h3> 标签和 <form> 按钮的样式，您可以使用

```
<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>Your title goes here</title>
        <style type="text/css">
            h1 { font-size: 28px; font-weight: bold; text-align: center; }
            h2 { font-size: 24px; font-weight: bold; text-align: center; }
            h3 { font-size: 22px; text-align: center; }
            input[type=submit],
            input[type=button],
            input[type=reset] {
                font-size: 110%;
            }
        </style> 
```

指定字体大小有很多选择——您可以使用 em、像素 (px)、点 (pt)、百分比（例如 120%）等。您还可以在运行时生成部分 CSS 样式——这将允许您从 Android dp/sp 单位转换为像素，然后使用计算的像素值以“px”单位指定字体大小。

不可能在 Html.fromHtml() 中使用 CSS，例如，您将无法在 TextView 中使用它。

# android - 如何将 Galaxy Tab 与 PC 连接以运行 Android 应用程序

> ID：16044107
> 
> 赞同：-1
> 
> 时间：2013-04-16T18:09:32.673
> 
> 标签：android

我试图将银河选项卡连接到我的电脑以运行 android 应用程序，但它在 eclipse 中无法识别它
谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T18:12:25.827

打开`ADB Debugging`Galaxy Tab 上的设置并`ADB`为您的设备安装适当的驱动程序（因为我不知道您的确切设备，我无法为您提供链接，但您应该很容易通过 Google 找到它们）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T18:13:28.957

您将需要下载包含三星设备 USB 驱动程序的[三星凯斯。](http://www.samsung.com/us/kies/)

# sql - 在 sql where 子句中执行“if”类 型语句

> ID：16044112
> 
> 赞同：6
> 
> 时间：2013-04-16T18:09:45.253
> 
> 标签：sql

我正在尝试在 where 子句中执行某种“if”语句。我意识到 sql 不支持这一点，但我确信必须有某种方法可以使其与 sql 语法一起使用。如我以粗体显示的区域所示，我试图找到所有以 d 开头的项目，如果它们的 userfld2 也 = container.

有没有比我现在做的更合理的方法，还是我离题了？

提前致谢。

```
Select a.ItemID
   , b.ConversionFactor VCaseAmt
   , sum(c.ConversionFactor + 1) SCaseAmt
   , a.status
   , a.UserFld2
From timItem a
inner join timItemUnitOfMeas b on a.ItemKey = b.ItemKey
   and b.TargetUnitMeasKey = 115
left join timItemUnitOfMeas c on a.ItemKey = c.ItemKey
   and c.TargetUnitMeasKey = 116
left join timItemUnitOfMeas d on a.ItemKey = d.ItemKey
   and d.TargetUnitMeasKey = 126
Where d.TargetUnitMeasKey is null
   and b.ConversionFactor != c.ConversionFactor + 1
   and a.Status = 1
   and **(filter a.itemid not like 'd%' when a.userfld2 = 'Container')**
Group by a.ItemID, b.TargetUnitMeasKey, b.ConversionFactor, C.TargetUnitMeasKey
   , c.ConversionFactor, a.status, a.UserFld2
Order by a.ItemID 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T18:15:22.460

用这个：

```
Select a.ItemID, b.ConversionFactor VCaseAmt, sum(c.ConversionFactor + 1) SCaseAmt, a.status, a.UserFld2

From timItem a inner join
    timItemUnitOfMeas b on a.ItemKey = b.ItemKey and b.TargetUnitMeasKey = 115 left join
    timItemUnitOfMeas c on a.ItemKey = c.ItemKey and c.TargetUnitMeasKey = 116 left join
    timItemUnitOfMeas d on a.ItemKey = d.ItemKey and d.TargetUnitMeasKey = 126

Where d.TargetUnitMeasKey is null and b.ConversionFactor != c.ConversionFactor + 1 and a.Status = 1 and 
not (a.itemid like 'd%' AND a.userfld2 = 'Container') 

Group by a.ItemID, b.TargetUnitMeasKey, b.ConversionFactor, C.TargetUnitMeasKey, c.ConversionFactor, a.status, a.UserFld2

Order by a.ItemID 
```

# android - SQLite 例外：没有这样的表。不知道为什么

> ID：16044113
> 
> 赞同：0
> 
> 时间：2013-04-16T18:09:45.597
> 
> 标签：android, eclipse, sqlite

我不是 android 编程方面的专家，这是一个课程作业。每次我尝试使用模拟器插入数据时，logcat 都会告诉我该表不存在。我想我可能没有正确调用我的 onCreate 方法，但我不知道。想知道是否有人可以向我指出，这是我的代码：

```
package com.mknowles.locationapp;

import android.content.ContentValues;

import android.content.Context;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteDatabase.CursorFactory;
import android.database.sqlite.SQLiteOpenHelper;

public class Entries {

    public static final String KEY_ID = "_id";
    public static final String KEY_TITLE = "title";
    public static final String KEY_LOCATION = "location";
    public static final String KEY_DATE = "entryDate";
    public static final String KEY_TIME = "entryTime";
    public static final String KEY_DESCRIPTION = "description";

    private static final String DB_NAME = "LocationEntries_db";
    private static final String DB_TABLE = "entries_table";
    private static final int DB_VERSION = 1;

    private DbHelper dbhelper;
    private final Context appContext;
    private SQLiteDatabase entriesDb;

    private static class DbHelper extends SQLiteOpenHelper {

        public DbHelper(Context context) {
            super(context, DB_NAME, null, DB_VERSION);
            // TODO Auto-generated constructor stub
        }

        @Override
        public void onCreate(SQLiteDatabase db) {
            // TODO Auto-generated method stub
            db.execSQL(
                    "CREATE TABLE " + DB_TABLE + " ("
            + KEY_ID + " INTEGER PRIMARY KEY AUTOINCREMENT, " 
            + KEY_TITLE + " TEXT NOT NULL, "
            + KEY_LOCATION + "TEXT, "
            + KEY_DATE + " TEXT NOT NULL, "
            + KEY_TIME + " TEXT, "
            + KEY_DESCRIPTION + " TEXT);"
                );

        }

        @Override
        public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
            // TODO Auto-generated method stub
            db.execSQL("DROP TABLE IF EXISTS " + DB_TABLE);
            onCreate(db);
        }

    }

    public Entries(Context context){
        appContext = context;

    }

    public Entries open(){
        dbhelper = new DbHelper(appContext);
        entriesDb = dbhelper.getWritableDatabase();
        return this;
    }

    public void close(){
        dbhelper.close();
    }

    public long createEntry(String title, String location, String date, String time, String description) {
        // TODO Auto-generated method stub
        ContentValues cv = new ContentValues();
        cv.put(KEY_TITLE, title);
        cv.put(KEY_LOCATION, location);
        cv.put(KEY_DATE, date);
        cv.put(KEY_TIME, time);
        cv.put(KEY_DESCRIPTION, description);
        return entriesDb.insert(DB_TABLE, null, cv);
    }
} 
```

```
package com.mknowles.locationapp;

import android.os.Bundle;
import android.app.Activity;
import android.database.sqlite.SQLiteDatabase;
import android.view.Menu;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.Toast;

public class MakeEntryActivity extends Activity implements OnClickListener {

    Button sqlSave;
    EditText mTitle, mLocation, mDate, mTime, mDescription;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_make_entry);
        mTitle = (EditText) findViewById(R.id.etTitle);
        mLocation = (EditText) findViewById(R.id.etLocation);
        mDate = (EditText) findViewById(R.id.etDate);
        mTime = (EditText) findViewById(R.id.etTime);
        mDescription = (EditText) findViewById(R.id.etDescription);
        sqlSave = (Button) findViewById(R.id.bSave);

        sqlSave.setOnClickListener(this);
    }

    @Override
    public void onClick(View v) {
        // TODO Auto-generated method stub
        switch(v.getId()){
        case R.id.bSave:

            String title = mTitle.getText().toString();
            String location = mLocation.getText().toString();
            String date = mDate.getText().toString();
            String time = mTime.getText().toString();
            String description = mDescription.getText().toString();

            Entries entry = new Entries(MakeEntryActivity.this);
            entry.open();
            entry.createEntry(title, location, date, time, description);
            entry.close();

            Toast t = Toast.makeText(this, "Saving", Toast.LENGTH_SHORT);
            t.show();

            break;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T18:29:27.387

您的创建中有一个小错字：

```
+ KEY_LOCATION + "TEXT, " 
```

应该：

```
+ KEY_LOCATION + " TEXT, " 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T18:32:09.717

`dbhelper = new DbHelper(appContext);`从中删除`public Entries open()`

# java - 在 java 游戏中显示分数

> ID：16044115
> 
> 赞同：1
> 
> 时间：2013-04-16T18:09:52.770
> 
> 标签：java, swing, joptionpane

我正在用java制作迷宫游戏。我在我的游戏中添加了玩家，时间限制。现在我要在这个游戏中添加分数。我已经使用此代码来完成此任务.....

```
else if(win)
{
long end = System.currentTimeMillis();
long time=end-startTime;
JOptionPane.showMessageDialog(null, time);
//System.exit(0);
//g.drawImage(m.getWinn(), 32, 32, null);
//JOptionPane.showMessageDialog(this, "Winner");
} 
```

这里 JOptionPane 连续显示时间。我怎样才能只显示一次或像“你的分数：3450”这样的中奖信息

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T18:19:12.570

这段代码：

```
long end = System.currentTimeMillis();
long time=end-startTime;
JOptionPane.showMessageDialog(null, time); 
```

它自己将显示自游戏开始以来的时间（以毫秒为单位）。

> 我怎样才能只显示一次或像“你的分数：3450”这样的中奖信息

同样的原则也适用。使用你的值`time`，你可以简单地调用

```
JOptionPane.showMessageDialog(null, "Your score : " + time); 
```

# git - 你可以在 Git 中强制执行代码冻结吗？

> ID：16044120
> 
> 赞同：3
> 
> 时间：2013-04-16T18:10:01.433
> 
> 标签：git

目前，当我们在 SVN 中冻结代码时，我们会打开一个提交挂钩，拒绝提交到我们冻结的分支。

例如[http://www.weblogism.com/item/235/subversion-commit-pre-hook-to-enforce-a-code-freeze](http://www.weblogism.com/item/235/subversion-commit-pre-hook-to-enforce-a-code-freeze)

是否可以在 Git 中做类似的事情？

即你能阻止推送到远程分支吗？

如果可以，您将如何在私有托管的 GitHub 存储库上进行这些更改？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T18:11:49.383

是的，您可以使用遥控器上的[更新挂钩](http://git-scm.com/book/en/Customizing-Git-Git-Hooks)来防止任何人访问您要保护的分支。

不过，我个人对 GitHub 并不熟悉。希望有人会尽快为您提供答案。

# pagination - 如何在 Zend Framework 2 中实现搜索模块的分页？

> ID：16044123
> 
> 赞同：3
> 
> 时间：2013-04-16T18:10:09.630
> 
> 标签：pagination, zend-framework2, zend-paginator

我的 ZF2 应用程序中有一个模块`Search`。用户填写搜索表格并获得课程列表。

现在我将分页添加到模块中。分页器基本上可以工作：我可以通过它检索数据并且分页显示正确（页面链接 1-7 用于 70 个找到的课程，默认设置为每页 10 个项目）。

但它仍然无法使用。当我单击页面链接时，表单 POST 数据丢失。我知道 - 它无法正常工作，我是如何实现它的（参见下面的代码）。但我不知道如何正确地做到这一点，以便仔细检查表单数据并仍然能够使用分页。

那是我的代码：

**表类 Search\Model\CourseTable**

```
class CourseTable {

    ...

    // without pagination
    // public function findAllByCriteria(CourseSearchInput $input) {
    // with pagination
    public function findAllByCriteria(CourseSearchInput $input, $pageNumber) {
        ...
        $select = new Select();
        $where = new Where();
        $having = new Having();
        ...
        // without pagination
        // $resultSet = $this->tableGateway->selectWith($select);
        // return $resultSet;
        // with pagination
        $adapter = new \MyNamespqce\Paginator\Adapter\DbSelect($select, $this->tableGateway->getAdapter());
        $paginator = new \Zend\Paginator\Paginator($adapter);
        $paginator->setCurrentPageNumber($pageNumber);
        return $paginator;
    }

    ... 

} 
```

**搜索\控制器\搜索控制器**

```
class SearchController extends AbstractActionController {

    public function searchCoursesAction() {
        $form = $this->getServiceLocator()->get('Search\Form\CourseSearchForm');
        $request = $this->getRequest();
        if ($request->isPost()) {
            $courseSearchInput = new CourseSearchInput();
            $form->setInputFilter($courseSearchInput->getInputFilter());
            $form->setData($request->getPost());
            if ($form->isValid()) {
                $courseSearchInput->exchangeArray($form->getData());
                // without pagination
                // $courses = $this->getCourseTable()->findAllByCriteria($courseSearchInput);
                // with pagination
                $page = $this->params()->fromRoute('page');
                $paginator = $this->getCourseTable()->findAllByCriteria($courseSearchInput, $page);
            } else {
                $paginator = null;
            }
        } else {
            $paginator = null;
        }
        return new ViewModel(array(
            'form' => $form,
            // without pagination
            // 'courses' => $courses,
            // with pagination
            'paginator' => $paginator,
            'cities' => ...
        ));
    }

    ...

} 
```

如何让它工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-27T18:29:45.800

我也有同样的问题，我已经解决了。但这不是好办法。可能这个想法会对你有所帮助。

我解决了它如下：（搜索Zend教程专辑模块的分页）

我在名为“search”和“index”的控制器中构建了两个动作。

每当提交搜索表单时，它总是将值发布到搜索操作。搜索操作使用搜索参数构建 url，并重定向到索引以显示搜索结果。

当点击分页链接时，发布的值会通过 url 传递。因此，每当索引操作要求搜索参数时，它总是以相同格式获取值。

我将路线定义如下：

```
'album' => array(
    'type'    => 'segment',
    'options' => array(
        'route'    => '/album[/:action][/:id][/page/:page][/order_by/:order_by][/:order][/search_by/:search_by]',
        'constraints' => array(
            'action'    => '(?!\bpage\b)(?!\border_by\b)(?!\bsearch_by\b)[a-zA-Z][a-zA-Z0-9_-]*',
            'id'     => '[0-9]+',
            'page' => '[0-9]+',
            'order_by' => '[a-zA-Z][a-zA-Z0-9_-]*',
            'order' => 'ASC|DESC',
        ),
        'defaults' => array(
            'controller' => 'Album\Controller\Album',
            'action'     => 'index',
        ),
    ),
), 
```

有一个名为“search_by”的参数，它将所有搜索参数保存为 json 字符串。这就是重点，我知道这不好，但还没有找到其他方法。

“搜索”操作将此字符串构建为 -

```
public function searchAction()
{

    $request = $this->getRequest();

    $url = 'index';

    if ($request->isPost()) {
        $formdata    = (array) $request->getPost();
        $search_data = array();
        foreach ($formdata as $key => $value) {
            if ($key != 'submit') {
                if (!empty($value)) {
                    $search_data[$key] = $value;
                }
            }
        }
        if (!empty($search_data)) {
            $search_by = json_encode($search_data);
            $url .= '/search_by/' . $search_by;
        }
    }
    $this->redirect()->toUrl($url);
} 
```

然后下一个索引操作解码字符串，执行必要的操作，并将 json 字符串发送给查看。

```
public function indexAction() {
    $searchform = new AlbumSearchForm();
    $searchform->get('submit')->setValue('Search');

    $select = new Select();

    $order_by = $this->params()->fromRoute('order_by') ?
            $this->params()->fromRoute('order_by') : 'id';
    $order = $this->params()->fromRoute('order') ?
            $this->params()->fromRoute('order') : Select::ORDER_ASCENDING;
    $page = $this->params()->fromRoute('page') ? (int) $this->params()->fromRoute('page') : 1;
    $select->order($order_by . ' ' . $order);
    $search_by = $this->params()->fromRoute('search_by') ?
            $this->params()->fromRoute('search_by') : '';

    $where    = new \Zend\Db\Sql\Where();
    $formdata = array();
    if (!empty($search_by)) {
        $formdata = (array) json_decode($search_by);
        if (!empty($formdata['artist'])) {
            $where->addPredicate(
                    new \Zend\Db\Sql\Predicate\Like('artist', '%' . $formdata['artist'] . '%')
            );
        }
        if (!empty($formdata['title'])) {
            $where->addPredicate(
                    new \Zend\Db\Sql\Predicate\Like('title', '%' . $formdata['title'] . '%')
            );
        }

    }
    if (!empty($where)) {
        $select->where($where);
    }

    $album = $this->getAlbumTable()->fetchAll($select);
    $totalRecord  = $album->count();
    $itemsPerPage = 2;

    $album->current();
    $paginator = new Paginator(new paginatorIterator($album));
    $paginator->setCurrentPageNumber($page)
            ->setItemCountPerPage($itemsPerPage)
            ->setPageRange(7);

    $searchform->setData($formdata);

    return new ViewModel(array(
        'search_by'  => $search_by,
        'order_by'   => $order_by,
        'order'      => $order,
        'page'       => $page,
        'paginator'  => $paginator,
        'pageAction' => 'album',
        'form'       => $searchform,
        'totalRecord' => $totalRecord
    ));

} 
```

所有排序和分页 url 都包含该字符串。

如果您之前知道所有搜索参数，那么您可以在路由中定义它，并以相同的方式传递，无需 json 字符串。由于我必须构建一个通用搜索，因此我构建了一个字符串。

“专辑搜索”的源代码可在[https://github.com/tahmina8765/zf2_search_with_pagination_example](https://github.com/tahmina8765/zf2_search_with_pagination_example)的 git hub 中找到。

现场演示：http: [//zf2pagination.lifencolor.com/public/album](http://zf2pagination.lifencolor.com/public/album)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-06T07:20:16.050

问题评论中的@Sam 和@automatix 都是正确的。我的建议（尽管我正在寻找一个更简单的替代方案）是构建一个分段路由，它涵盖了您可能需要的所有选项，并从标准表单 POST 请求开始。

然后，在验证请求后，将表单数据传递给 paginationControl 助手，如下所示：

```
$resultsView = new ViewModel(array(
  'paginator' => $paginator,
  'routeParams' => array_filter($form->getData())
)); 
```

然后，在您的视图模板中，在 paginationControl 视图助手中设置路由参数：

```
<?php echo $this->paginationControl($paginator, 'Sliding', 'paginator/default',
    array('routeParams' => $routeParams)
) ?> 
```

我在这里使用了array_filter，因为它是一种非常简单的方法，可以从表单数据中删除任何为空、空等的元素。这样你就不会传递你不需要的额外数据。

# text - Applescript，将行作为变量读取

> ID：16044127
> 
> 赞同：2
> 
> 时间：2013-04-16T18:10:17.783
> 
> 标签：text, applescript

我希望 Applescript 从 txt 文件中设置变量，逐行或逐字符读取。也许像 php 函数：get_file_contents。有没有类似的，或者你能提供我的方式吗？

我知道如何设置文件路径。就像是

```
 set myfile to "/Users/Username/Desktop/test.txt"
    set theText to read myfile 
```

在 txt 文件中，它只是一行中的一个整数，比如

```
 1
    2
    3
    4
    5 
```

如果我使用

```
 set theTextList to paragraphs of theText 
```

结果将带有引号“”。

我只想将这些整数设置为变量。这样以后我就可以使用了，比如

```
 set variable to 5  --here I would like to replace the real number 5 to the number I read from the txt file(just one line)

   start slideshow
   show slide variable 
```

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-16T20:33:51.300

如果文件的行由返回字符分隔，这样的事情应该可以工作：

```
set allRecords to read myfile using delimiter return
repeat with aRecord in allRecords
    if length of aRecord is greater than 0 then
        set variable to aRecord
        log "variable: " & variable
    end if
end repeat 
```

如果您的文件中的内容与返回不同，您可以更改代码第一行中的分隔符。

# java - 导出到jar后没有声音

> ID：16044136
> 
> 赞同：5
> 
> 时间：2013-04-16T18:10:49.190
> 
> 标签：java, eclipse, audio, embedded-resource

我的应用程序有问题。当我在 Eclipse 中运行应用程序时，声音播放得很好，但是如果我将应用程序导出到可运行的 jar，声音就不起作用。

播放声音的方法：

```
public static synchronized void playSound() 
    {
            new Thread(new Runnable() 
            {
                // The wrapper thread is unnecessary, unless it blocks on the
                // Clip finishing; see comments.
                public void run() 
                {
                    try
                    {
                        Clip clip = AudioSystem.getClip();
                        AudioInputStream inputStream = AudioSystem.getAudioInputStream(getClass().getResourceAsStream("sound.wav"));
                        clip = AudioSystem.getClip();
                        clip.open(inputStream);
                        clip.start(); 
                    } 
                    catch (Exception e) 
                    {
                        System.err.println(e.getMessage());
                    }
                }
            }).start();
        } 
```

哪里可能出错？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-16T23:24:52.357

问题出在这

```
AudioInputStream inputStream = AudioSystem.getAudioInputStream(getClass().getResourceAsStream("sound.wav")); 
```

JAR 文件中的任何原因都不起作用`getResourceAsStream`。所以我将其替换为`getResource`：

```
AudioInputStream inputStream = AudioSystem.getAudioInputStream(getClass().getResource("sound.wav")); 
```

这很好用。

# javascript - 用于提交 javascript 表单的 Python 脚本

> ID：16044141
> 
> 赞同：0
> 
> 时间：2013-04-16T18:11:07.713
> 
> 标签：javascript, python, forms, mechanize

我正在编写一个脚本来自动为我提交表单。我得到了一切工作，但我不能让它提交表格。我认为这与每个领域都有以下事实有关：

```
style=display: none; 
```

所以，这可能是它不提交的原因。

这是我所拥有的：

```
import mechanize
#coding=utf-8
br = mechanize.Browser()
br.set_handle_robots(False)
resp = br.open('http://support.twitter.com/forms/dmca')
#print resp.get_data()
formcount=0
submitcount=0
for form in br.forms():

       if str(form.attrs["id"]) == "dmca_form":
          break
       formcount=formcount+1
       br.select_form(nr=formcount)

form['submission_type'] = ['represent']
copyright_owner = form.find_control(id="copyright-owner")
copyright_owner.value = 'Steve Jobs'

fullname = form.find_control(id="fullname_input_text")
fullname.value = 'Rob William'
company = form.find_control(id="company")
company.value = 'Abc LLC'
job = form.find_control(id="job")
job.value = 'CEO'
email = form.find_control(id="email")
email.value = 'stevejobs@aol.com'
address=form.find_control(id="address")
address.value = '1600 Penn. Ave NW'
city=form.find_control(id="city")
city.value='Washington'
state=form.find_control(id="state")
state.value='DC'
postal=form.find_control(id="postal")
postal.value='20050'
country=form.find_control(id="country")
country.value='United States'
#form['inf_type']=['tweet','image']
form['inf_type']=['tweet']
form['tweet_account_1']='Obama12Fan' #@accountname
form['tweet_original_1']='please disregard this.' #Description of Work
form['tweet_infringement_1']='please disregard this.' #Description of Infringement
form['tweet_url_1']='https://twitter.com/BrooklynInsides/status/272763973022134272' #URL of Tweet
form['tweet_target_1']=['website']
form['tweet_website_direct_1']=['1']
form['tweet_website_direct_confirm_1']=['on']
#form.find_control("tweet_website_direct_confirm_1").items[0].selected=True

form['statement_1']=['I understand that under 17 U.S.C. § 512(f), I may be liable for any damages, including costs and attorneys’ fees, if I knowingly materially misrepresent that reported material or activity is infringing.']
form['statement_2']=['I have good faith belief that use of the material in the manner complained of is not authorized by the copyright owner, its agent, or the law.']
exact=form.find_control(id="exact_match_input")
exact.value='The information in this notification is accurate, and I state under penalty of perjury that I am authorized to act on behalf of the copyright owner.'
Signature=form.find_control(id="fullname_input")
Signature.value='Rob William' #Must match full name as above

#submit = form.find_control(id="submit_button")
#br.submit(submit)

req = form.click(id="submit_button")
#print mechanize.urlopen(form.click(id="submit_button")).read()
#br.open(req)
#print br.response().read()

print br.response().read()

#print form

#save to a file
#f = file('myfile.html', 'w')
#f.write(br.response().read())
#f.close() 
```

# r - 有效地找到向量中的相邻值

> ID：16044143
> 
> 赞同：4
> 
> 时间：2013-04-16T18:11:13.830
> 
> 标签：r, vector

我有一个 R 数据框，其中包含一个表示染色体位置的数字向量和一个基因名称向量。我还有一个该染色体上有趣元素的起始位置向量。我想提取每个元素上方和下方的 3 个最接近基因的名称和位置，我想知道最有效的方法。

例如：

```
genes <- data.frame("geneStart"=sort(sample(500,10)), "geneName"=sample(LETTERS,10))
genes
   geneStart geneName
1         66        X
2        158        U
3        262        N
4        385        D
5        387        H
6        418        Z
7        464        J
8        469        Y
9        475        L
10       491        I 
```

我想最终得到一个函数，让我们称之为它`getAdjacent`，如下所示：

```
getAdjacent(280)
[1] "X" "U" "N" "D" "H" "Z"
getAdjacent(479)
[1] "J" "Y" "L" "I" NA NA 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T18:22:36.627

使用`findInterval`：

```
getAdjacent <- function(x) {
   idx       <- findInterval(x, genes$geneStart)
   range.idx <- (idx-2):(idx+3)
   range.idx <- ifelse(range.idx <= 0, NA, range.idx)
   as.character(genes$geneName)[range.idx]
} 
```

`x`如果属于，您可能需要`genes$geneStart`根据您的偏好调整行为。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T18:32:52.620

我的版本：

```
getAdjacent <-function(x){
ind <-which(abs(genes[,1]-x)==min(abs(genes[,1]-x))) #which row is closest
out <-genes[max(1,ind-3):min(nrow(genes),ind+2),2]   #indexed for closest match
return(as.character(out))
} 
```

# ios - 无法显示新资产

> ID：16044147
> 
> 赞同：0
> 
> 时间：2013-04-16T18:11:19.383
> 
> 标签：ios, xcode, cocoa-touch

因此，当我在整个应用程序中更改资产时，出于某种奇怪的原因，当我构建我的应用程序时，一些旧版本的图像资产在我的应用程序中被错误地使用。它们甚至不存在于应用程序目录中的任何位置。

注意：这些图像资源使用了与旧版本相同的名称。

编辑：这只是我的应用程序中用于按钮“选定”状态的图像的行为。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T18:16:25.260

1 - 签入项目的派生数据文件夹 - 可从组织者访问。

2 - 检查您的应用程序的 iOS 模拟器文件夹 ( `~/Library/Application Support/iPhone Simulator/Username/`) 并查看它显示的图像版本。重置 iOS 模拟器并再次启动您的应用程序。

3 - 重新启动 XCode。

# css - CSS 功能区菜单导致内容和标题之间的间隙

> ID：16044150
> 
> 赞同：1
> 
> 时间：2013-04-16T18:11:32.563
> 
> 标签：css

我不确定如何消除标题和幻灯片开头之间的大间隙。[pivotalpixels.com/colusa_fair/](http://pivotalpixels.com/colusa_fair/) 我认为问题与功能区导航有关，但是在尝试了很多不同的事情之后，我不知道如何在没有最近的新闻移动到导航栏正下方的情况下将内容向上移动，这需要像当前一样位于幻灯片下方。

CSS在下面

谢谢我感谢任何帮助！

```
 @charset "utf-8";
/* CSS Document */
body {  
    margin:0px; 
    padding:0px;  
    background-color:#c4c0be; 
    background-image:url(../images/bluewoodbkgd.jpg);
    margin:0px; padding:0px;  
    font-family: "Trebuchet MS", Arial, Helvetica, sans-serif;
    color:#7f7d78;  
    font-size:13px;  
    line-height:19px;  
    }  
h1{}
h2 {  
    margin:0px 0px 10px 0px;  
    font-size:36px;  
    font-family:Helvetica, Arial, Sans-serif;  
    color:#000000;  
    font-weight: bold;
}  
h3{font-size:16px;  color: #142b4e; font-weight: bold;}

small {  
    color:#595856;  
    font-weight:bold;  
    font-size:11px;  
    display:block;  
    margin-bottom:15px;  
}  
a {  
    color:#007de2;  
    text-decoration:none;  
}  
a:hover { text-decoration:underline; }  
p { margin: 0px 0px 15px 0px; }  

#main {  
    min-height: 500px;  
    }  
#footer {  
     color:white;  
    }  
.container {  
     width:994px;  
     margin:0 auto;  
}  
#header {
   padding-top:10px;  
           margin: 0;
    }  
#logo h1 {  
    margin:0px;  
    display:block;  
    text-indent:-9999px;  
    } 
        /* Fix up IE6 PNG Support */  
img, #logo { behavior: url(scripts/iepngfix.htc); }  
#logo { 
position: absolute;
top:-25px;
        background-image:url(../images/logo_colusa.png);  
        background-repeat:no-repeat;  
        margin: 0 0 0 25px;
        width:240px;  
        height:147px;  
    }  
#navigation_container {
    width: 994px;
    margin: 0;
}
ul#menu{
    margin: 0;
    top:10px;
    position: absolute;
    left: 300px;
}
ul#menu li {  
        list-style: none;
        float: left;
        display: inline;
    }  
ul#menu li a { 
        text-shadow: 0 2px 1px rgba(0,0,0,0.5);
        text-decoration: none;
        margin: 0 10px 0 0;
        color:#FFF;  
        font: 18px/27px 'ArvoRegular', Arial, sans-serif;  
        line-height: 28px;
    }  
ul#menu li a.active, ul#menu li a:hover {  
        color:#5a8c35;
        text-decoration: underline;
         margin-top: 2px;
} 
.rectangle {
   background: #142b4e;
   height: 52px;
   position: relative;
   -moz-box-shadow: 0px 0px 4px rgba(0,0,0,0.55);
    -webkit-box-shadow: 0px 0px 4px rgba(0,0,0,0.55);
    box-shadow: 0px 0px 4px rgba(0,0,0,0.55);
   -webkit-border-radius: 2px;
    -moz-border-radius: 2px;
    border-radius: 2px;
   z-index: 500; /* the stack order: foreground */
   margin: 35px 0 0 0;
}
.l-triangle-top {
   border-color: #142b4e transparent transparent;
   border-style:solid;
   border-width:50px;
   height:0px;
   width:0px;
   position: relative;
   float: left;
   top: 0px;
   left: -50px;
}

.l-triangle-bottom {
   border-color: transparent transparent #142b4e;
   border-style:solid;
   border-width:50px;
   height:0px;
   width:0px;
   position: relative;
   float: left;
   top: -49px;
   left: -150px;
}

.r-triangle-top {
   border-color: #142b4e transparent transparent;
   border-style:solid;
   border-width:50px;
   height:0px;
   width:0px;
   position: relative;
        float: right;
        right: -45px;
        top: -50px;
}

.r-triangle-bottom {
   border-color: transparent transparent #142b4e;
   border-style:solid;
   border-width:50px;
   height:0px;
   width:0px;
   position: relative;
        float: right;
        top: -100px;
        right: -145px;
}

#sec_navigation_container {
    width: 600px;
    margin: 0 0 0 255px;
}
ul#menu_sec{
    margin: 0;
    top:10px;
    position: absolute;
    left: 110px;
}
ul#menu_sec li {  
        list-style: none;
        float: left;
        display: inline;
    }  
ul#menu_sec li a { 
        text-shadow: 0 2px 1px rgba(0,0,0,0.5);
        text-decoration: none;
        margin: 0 10px 0 0;
        color:#FFF;  
        font: 18px/27px 'ArvoRegular', Arial, sans-serif;  
        line-height: 28px;
    }  
ul#menu_sec li a.active, ul#menu_sec li a:hover {  
        color:#ce6536;
        text-decoration: underline;
         margin-top: 2px;
} 
.rectangle_mainsec {
   background: #ce6536;
   height: 52px;
   position: relative;
   z-index: 500; /* the stack order: foreground */
   margin: 0;
}
.l-triangle-top-sec {
   border-color: #ce6536 transparent transparent;
   border-style:solid;
   border-width:50px;
   height:0px;
   width:0px;
   position: relative;
   float: left;
   top: 0px;
   left: -50px;
}

.l-triangle-bottom-sec {
   border-color: transparent transparent #ce6536;
   border-style:solid;
   border-width:50px;
   height:0px;
   width:0px;
   position: relative;
   float: left;
   top: -49px;
   left: -150px;
}

.r-triangle-top-sec {
   border-color: #ce6536 transparent transparent;
   border-style:solid;
   border-width:50px;
   height:0px;
   width:0px;
   position: relative;
        float: right;
        right: -125px;
        top: -53px;
}

.r-triangle-bottom-sec {
   border-color: transparent transparent #ce6536;
   border-style:solid;
   border-width:50px;
   height:0px;
   width:0px;
   position: relative;
        float: right;
        top: -100px;
        right: -225px;
}

        /*  
        Block-Styles  
    */  

.block {  
        margin-bottom:20px;  
    }  
.block_inside {   
        padding:0 20px;  
    }  

.image_block {  
        border:1px solid #557f9d;  
        background-color:#ffffff;  
        padding:5px;  
        float:left;  
}  
.image_block img {  
     border:1px solid #b5b5b5; 
    }  
#block_slideshow{
    overflow: hidden;
width: 100%;
}
.upcoming_events {  
        float:left;  
        width:315px; 
        height: 325px;
        margin-left:30px;
        padding: 10px;
        border: 1px solid #557f9d;
         background-color:#ffffff;
}  
  .upcoming_events h2, #event_items h2{
    position: relative;
    width: 90%;
    font: 24px/27px 'DancingScriptOTRegular', Arial, sans-serif;
    padding: 6px 20px 6px 30px;
    margin: 4px 10px 10px -31px;
    color: #fff;
    background-color: #5a8c35;
    text-shadow: 0px 1px 2px #7c7c7c;
    -webkit-box-shadow: 0px 2px 2px 0px #295e04;
    -moz-box-shadow: 0px 2px 2px 0px #295e04;
    box-shadow: 0px 2px 1px 0px #295e04;
    border: 1px solid #295e04;
}
  .upcoming_events h2:before, #event_items h2:before
{
    content: ' ';
    position: absolute;
    width: 0;
    height: 0;
    right: -2px;
    top: 0px;
    border-style: solid;
    border-width:20px;
    border-color: transparent #fff transparent transparent;
}
  .upcoming_events h2:after, #event_items h2:after{
    content: ' ';
    position: absolute;
    width: 0;
    height: 0;
    left: 0px;
    top: 100%;
    border-width: 5px 10px;
    border-style: solid;
    border-color: #295e04 #295e04 transparent transparent;
}   
.block_content{ padding: 10px;}
#block_recent{overflow:auto;  
    margin-bottom:20px;  }

#event_items {  
    width:560px;  
    margin-right:25px;  
    margin-left: 20px;
    float:left;  
    padding: 10px;
    border: 1px solid #557f9d;
    background-color:#ffffff;
}  
#countdown {  
    float:right;  
    width:332px; 
    height: 175px;
    margin-right: 20px;
    margin-bottom:20px;
    background-image: url(../images/countdown.png);
    background-repeat:no-repeat;  
}  
#block_right {  
    float:right;  
    width:332px; 
    height: 175px;
    margin-right: 20px;
    margin-bottom: 20px;
    background-image: url(../images/countdown.png);
    background-repeat:no-repeat;  
}  

.mini_event_item {  
    width: 48%;
    margin: 5px 0px 10px 10px; 
    float: left;
}  
.date{color: #5a8c35; font-weight: bold;}
.mini_event_item .block_inside {   

    padding:25px 30px 15px 30px;   
}  
.mini_event_item .thumbnail { float:left; margin-right:20px; border:1px solid #979390; }  

#sponsors{margin: 10px 0px; padding: 10px; height: 95px; background-color: #142b4e;  }
.sponsor_item,footer_item{float: left; margin-right: 10px; padding: 10px; height: 70px; background-color: #ffffff; border: 1px solid #000;}
#footer {  
     font: 18px/27px 'ArvoRegular', Arial, sans-serif; 

}  
.footer_column {  
    float:left;  
    width:300px;  
    margin-right:10px;  
}  
#footer .long {  
    width:670px;  
}  
#footer h3 {  
    color:#fff; 
    text-shadow: 1px 1px 1px #000; 
} 
#footer h4{
    font-size: 16px;
    text-shadow: 1px 1px 1px #000;
}
#footer p{ font-size: 12px;
}
ul.industry_links{
    padding: 10px; 
    display: inline;
}
ul.industry_links li {  
   float:left; 
   list-style:none;
   text-align: center;

} 
ul.industry_links li a{
    display:block;
    width: 135px;
    height: 79px;
    margin-right: 10px; 
   padding: 10px;   
   background-color: #ffffff; 
   border: 1px solid #039;
      text-align: center;
}
.footer_column ul li, .footer_column ul {  
    list-style:none;  
    margin:0px;  
    padding:0px;  
    font-size: 12px;

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T18:37:16.067

`r-triangle-top-sec`生成“ribbon”效果的`r-triangle-bottom-sec`元素使用“CSS Triangle Trick”，它需要较大的边框尺寸（本例中为 50px）。

由于不可见的边框渲染，这导致了很多额外的高度。

一种快速解决方法是针对`position:absolute`这些元素。

首先，制作容器`position:relative`，以便子元素将其用作定位参考点

```
#sec_navigation_container{
    position:relative /* Add */
    /*...*/
} 
```

将此添加到`r-triange-top-sec`

```
position: absolute;
top: 0;
right: -50px; 
```

将此添加到`r-triange-bottom-sec`

```
position: absolute;
top: -50px;
right: -50px; 
```

那应该摆脱一些间距。将这个想法应用到上部的“功能区”可能也会有所帮助。

**更新**

事实证明，完全相同的代码也可以用于蓝丝带。冲洗/重复上面的代码，但对于`#navigation_container`,`l-triangle-top`和`l-triangle-bottom`.

这会将您的“幻灯片”内容移动到导航中。

然后，您可以为`#header`元素添加一些边距，例如：

```
margin-bottom:2em; 
```

将该“幻灯片放映”推回所需的间隔。（根据需要调整有效值）

*请注意*，我只是目睹了丝带的位置。请根据您的设计需要调整顶部/右侧位置

我希望这会有所帮助！

# javascript - 当鼠标距元素x距离时，Jquery如何触发功能？

> ID：16044152
> 
> 赞同：2
> 
> 时间：2013-04-16T18:11:41.063
> 
> 标签：javascript, jquery, mouseevent, mousemove

我想在鼠标距离元素 X 距离时运行一个函数。

我假设应该移动 mousemove 事件，但由于元素可能并不总是在同一个地方，我不确定如何获得鼠标相对于元素的位置？

有没有人有类似的例子？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T18:15:44.257

```
var mX, mY, distance;
$element  = $('#YourElementID');

    function calculateDistance(elem, mouseX, mouseY) {
        return Math.floor(Math.sqrt(Math.pow(mouseX - (elem.offset().left+(elem.width()/2)), 2) + Math.pow(mouseY - (elem.offset().top+(elem.height()/2)), 2)));
    }

    $(document).mousemove(function(e) {  
        mX = e.pageX;
        mY = e.pageY;
        distance = calculateDistance($element, mX, mY);
        // do your stuff with distance

    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T18:15:13.170

您将需要绑定到`mousemove`事件，将元素角的坐标存储在全局变量中，并继续检查鼠标移动的每个像素，直到当前鼠标位置和对象坐标之间的向量长度为​​ X。这将是触发您绑定某些功能的自定义事件的时刻。

我不知道已经有一个插件可以做到这一点，所以请务必在此处发布指向您编写的插件的链接。:)

# character-encoding - 我应该如何处理使用 charset ansi_x3.110-1983 的电子邮件？

> ID：16044154
> 
> 赞同：3
> 
> 时间：2013-04-16T18:11:41.587
> 
> 标签：character-encoding, ansi

我的应用程序正在解析传入的电子邮件。我尝试尽可能地解析它们，但时不时地我会得到一个令人费解的内容。这次是一封看起来是 ASCII 格式的电子邮件，但指定的字符集是：`ansi_x3.110-1983`。

我的应用程序通过默认为 ASCII 正确处理它，但它会引发我想停止接收的警告，所以我的问题是：什么是 ansi_x3.110-1983，我应该如何处理它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T22:33:16.240

根据[IANA 网站上的这个页面](http://www.iana.org/assignments/character-sets/character-sets.xml)，`ANSI_X3.110-1983`也称为：

*   `iso-ir-99`
*   `CSA_T500-1983`
*   `NAPLPS`
*   `csISO99NAPLPS`

其中，只有[NAPLPS](http://en.wikipedia.org/wiki/NAPLPS)这个名字看起来很有趣或信息丰富。如果可以，请考虑与发送这些邮件的人取得联系。如果他们*真的*在这个时代使用**Prodigy ，我会感到惊讶。**

IANA 站点还有一个指向[RFC 1345](https://www.rfc-editor.org/rfc/rfc1345)的指针，其中包含对字节和它们映射到的字符的描述。与 ISO-8859-1 相比，控制字符是相同的，大部分标点符号、所有数字和字母以及前 7 位中的大部分剩余字符都是相同的。

如果有人还没有为此编写工具，您可以使用 RFC 中的指南编写一个工具来映射字符。老实说，考虑到字符映射与预期的值足够接近，简单地忽略关于奇怪字符集的抱怨可能会更容易......

# java - 合并方法不会使 LAZY 获取映射可用

> ID：16044155
> 
> 赞同：0
> 
> 时间：2013-04-16T18:11:42.263
> 
> 标签：java, spring, jakarta-ee, jpa, ejb

这是一个简单的`One-to-Many`关系：`Order`to `Items`。一个订单可以包含许多项目。`ORDERITEMSMAPPING`并且两个实体之间有一个关联表，在Order.java中建立了如下关系：

```
@OneToMany(fetch = FetchType.LAZY)
@JoinTable(name = "ORDERITEMSMAPPING",
           joinColumns = @JoinColumn(name = "ORDER_ID"),
           inverseJoinColumns = @JoinColumn(name = "ITEM_ID"))
@OrderBy("typeId, shortName")
@JsonIgnore
private List<Item> Items; 
```

`FetchType.LAZY`由于数据负载而进行上述映射的原因对于映射`Eager`来说是巨大的

但是，在 Java EE 方面，我们需要调用 getter 以使用 Order 的`getItems()`方法从特定的一个订单中查找所有项目，但是在一个事务中。

这是 Order 实体中的工作：

```
public List<Item> getItems(Order order){
    if(this.items==null){
        List<Item> items= new ArrayList<Item>();
        EntityManager em = Order.entityManager();
        Order merged = em.merge(order);
        items = merged.getItems();
        em.close();
        return items;
    }else{
        return this.items;
    }
} 
```

但是，上述方法不起作用，`null`即使调用仍然返回项目

合并的.getOrders();

我tought`merge()`方法可以返回实体的托管副本并使`LAZY`映射可用，但这似乎不是真的。

顺便说一句，我正在使用 OpenJPA，但我猜 JPA 供应商似乎不是问题。可能我对实体管理周期还不是很深入。请帮忙。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T18:17:42.543

您在这一行屏蔽了作用域中的成员变量：

```
List<Item> items= new ArrayList<Item>(); 
```

通过声明`List<Item> items`，您使`items`变量指向整个`if {`块的堆栈上的对象，而不是`this.items`像您想要的那样。

尝试`this.items = new ArrayList<Item>();`, 而`return this.items`不是。

在代码中使用成员变量的命名约定也是一个好主意，以避免发生这种情况。命名变量`m_items`可以走很长的路。

# java - 从节点列表中的当前节点检索属性

> ID：16044164
> 
> 赞同：1
> 
> 时间：2013-04-16T18:12:10.700
> 
> 标签：java, xpath

这是我的 XPath 操作：

```
XPathExpression source = xpath.compile("@source/text()"); 
```

我正在遍历主文档上另一个 XPath 操作创建的节点列表。所以我这样打电话`source`：

```
(NodeList)source.evaluate(list.item(x), XPathConstants.NODESET); 
```

结果节点列表始终为空。这是为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T18:37:33.753

`@source/text()`无效： `@source`是一个属性，并且属性没有子节点 - 文本或其他。

你应该简单地使用`@source`.

（查看 XML 会有所帮助，但我假设这`list.item(x)`是一个可以具有`source`属性的 XML 元素）

# xml - 谷歌应用检索用户信息

> ID：16044168
> 
> 赞同：2
> 
> 时间：2013-04-16T18:12:26.177
> 
> 标签：xml, api, schema, config

我创建了一个连接到谷歌应用程序电子邮件的软件，并允许我使用他们的信息为指定用户创建签名。在谷歌应用程序域管理中，无法编辑更多“高级”字段，如公司地址、传真、电子邮件、标题、昵称等。所以我使用了 Flash 面板，它为我提供了这种可能性。但为此，我需要字段 api 架构将其添加到我的配置中。通过在我的配置文件中添加以下内容，我设法使其适用于某些字段，例如：姓名、公司名称、电子邮件地址、手机、职务、部门、经理、传真号码：

```
<string>cn=Name.FullName</string>
<string>company=Organizations[Rel:http://schemas.google.com/g/2005#work].Name</string>
<string>mail=PrimaryEmail.Address</string>
<string>mobile=Phonenumbers[Rel:http://schemas.google.com/g/2005#mobile].Value</string>
<string>title=Organizations[Rel:http://schemas.google.com/g/2005#work].Title</string><string>department=Organizations[Rel:http://schemas.google.com/g/2005#work].Department</string>
<string>managerGA=ContactEntry.Relations[Rel:manager].Value</string>
<string>facsimiletelephonenumber=Phonenumbers[Rel:http://schemas.google.com/g/2005#work_fax].Value</string> 
```

我已经搜索了谷歌文档，但我没有找到某些字段的正确 api 模式格式，例如：国家、城市、邮箱、街道、昵称、照片、网站、URL、笔记、组织单位、Aka 和任何其他. 有人可以帮我找到正确的或者我在哪里/如何找到它们吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T20:17:52.700

我希望你能在这里找到对你有帮助的东西： [https ://developers.google.com/google-apps/provisioning/](https://developers.google.com/google-apps/provisioning/)

# spring-security - Spring 安全过滤器

> ID：16044171
> 
> 赞同：0
> 
> 时间：2013-04-16T18:12:32.710
> 
> 标签：spring-security

在哪里可以找到Java Web 应用程序的**所有Spring Security 过滤器？**

往里看`$TOMCAT_HOME/webapps/ROOT/WEB-INF/web.xml`，我看到：

```
<!-- Spring Security -->
        <filter>
                <filter-name>springSecurityFilterChain</filter-name>
                <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
        </filter>
        <filter-mapping>
                <filter-name>springSecurityFilterChain</filter-name>
                <url-pattern>/*</url-pattern>
        </filter-mapping> 
```

但是我在哪里可以看到整个过滤器链？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T18:37:22.693

> 什么`DelegatingFilterProxy`是将过滤器的方法委托给从 Spring 应用程序上下文获得的 bean。[...] bean 必须实现`javax.servlet.Filter`并且它必须与 filter-name 元素中的名称相同。

（引用自[参考文档](http://static.springsource.org/spring-security/site/docs/current/reference/security-filter-chain.html#delegating-filter-proxy)。）

在大多数情况下，安全[命名空间配置](http://static.springsource.org/spring-security/site/docs/current/reference/ns-config.html)用于创建和配置过滤器链，因此我建议寻找使用`http://www.springframework.org/schema/security`xml 命名空间的 xml 配置文件。如果是这种情况，您还需要了解命名空间配置的作用，因为它在幕后创建了许多过滤器，这些过滤器在类似 DSL 的配置中并不明显。您可以使用上面链接的章节和[本附录](http://static.springsource.org/spring-security/site/docs/current/reference/appendix-namespace.html)来了解发生了什么。

# caching - 是否有任何证据表明浏览器会忽略 Cache-Control 和 Max-Age 标头？

> ID：16044174
> 
> 赞同：1
> 
> 时间：2013-04-16T18:12:39.043
> 
> 标签：caching, browser, cache-control, http-caching

我听说有几个不同的来源建议浏览器有时会忽略缓存标头，而是使用陈旧的内容。但是，我从未真正观察到这一点。

浏览器有时会忽略有效的缓存标头，这是真的吗？曾经是真的吗？

你能给我举个例子，浏览器会忽略`Cache-control: no-cache`标题或类似的东西，而是给用户陈旧的结果吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T18:15:56.187

您可能面临的主要问题之一不是浏览器，而是浏览器正在使用的代理。

```
"must-revalidate: Some proxies can be configured to ignore the Expires and maxage. 
This keyword forces them to always act like the resource was expired.
proxy-revalidate: Same as must-revalidate, but only for proxies.
s-maxage: Same as maxage, but only for proxies." 
```

来源：[http ://www.tommylacroix.com/2008/07/17/http-caching-basics/](http://www.tommylacroix.com/2008/07/17/http-caching-basics/)

此外，由于缓存控制指定在 X 时间过去之前不应重新验证内容，浏览器可能会提供过时的内容。

# c# - 有没有办法告诉 FxCop 一个类型应该是不可变的？

> ID：16044182
> 
> 赞同：1
> 
> 时间：2013-04-16T18:13:11.317
> 
> 标签：c#, fxcop

我有一个包含常量数据集合的类型。常量由在我的程序之外定义的标准定义。类型如下所示：

```
public class IAmImmutable
{
    public IAmImmutable(string member1, string member2)
    {
        this.Member1 = member1;
        this.Member2 = member2;
    }

    public string Member1 { get; private set; }

    public string Member2 { get; private set; }

    public static readonly Instance1 = new IAmImmutable("abc", "def");
    public static readonly Instance2 = new IAmImmutable("example", "data");
    public static readonly Instance3 = new IAmImmutable("for", "stackoverflow");
    public static readonly Instance4 = new IAmImmutable("these are", "constant fields");
    public static readonly Instance5 = new IAmImmutable("42", "1729");
    /* ... */
    public static readonly Instance1000 = new IAmImmutable("HUNGRY EVIL", "ZOMBIES");
} 
```

这导致`CA2104:DoNotDeclareReadOnlyMutableReferenceTypes`来自 FxCop 的数千次检测。此检测中的注释表明，如果指示的类型是不可变的，则应该抑制检测，在这种情况下就是这样。但是，如果我可以避免这样做，我不希望有成千上万的压制。

是否可以将此类型标记为不可变，从而防止发生这种检测？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T18:22:04.787

[请参阅MSDN](http://blogs.msdn.com/b/codeanalysis/archive/2006/04/04/faq-how-do-i-indicate-to-donotdeclarereadonlymutablereferencetypes-that-a-type-is-immutable-david-kean.aspx)上解释如何执行此操作的文章。

FxCop 似乎在寻找一个文本文件，该文件调用`ImmutableTypes.txt`了它应该认为是“不可变”的类型。

对于它的价值，你的类是从内部可变的，即使你没有明确地改变它。使其不可变的一项更改是*将属性从自动实现更改为由只读字段支持的仅获取属性：*

```
public IAmImmutable(string member1, string member2)
{
    this._Member1 = member1;
    this._Member2 = member2;
}

private readonly string _Member1;
private readonly string _Member2;

public string Member1 { get {return _Member1;} }
public string Member2 { get {return _Member2;} } 
```

（FxCop 是否将其识别为“不可变”类是另一个问题）

请注意，这*仅*有效，因为`string`它是不可变的。如果将其更改为可变类型（like`List`或 an `Array`），则*引用*将是只读的，但*内容*可以修改，从而使类本身可变。

# javascript - $.ajax 删除请求未在 capybara-webkit 中发送数据参数

> ID：16044184
> 
> 赞同：4
> 
> 时间：2013-04-16T18:13:23.657
> 
> 标签：javascript, ruby-on-rails, ajax, selenium, capybara-webkit

当我通过 capybara-webkit 执行它们时，我发现我的 ajax DELETE 请求没有向控制器发送数据参数。但是，当我使用 selenium 运行测试套件时，确实会发送数据参数（并且测试通过）。我的代码如下所示：

```
$(document).on 'click', 'a.delete_contact', ->
  if confirm "Are you sure you want to delete this contact?"
    id = $('a.delete_contact').data('id')
    name = $('a.delete_contact').data('name')
    $.ajax '/contacts',
      type: 'DELETE'
      dataType: 'html'
      data: {'id' : id}
      success: ->
        $("li[data-cid='#{id}']").remove()
        removeInitial(_.last(name.split(" "))[0])
        show_notice("Contact successfully destroyed.", 'notice')
        window.contactSelection.pop()        
        refreshSelectionView()
  return false 
```

任何想法为什么这在 capybara-webkit 中失败？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-25T23:08:32.313

显然 QtWebKit 不支持带有 DELETE 请求的实体主体。

[https://github.com/thoughtbot/capybara-webkit/issues/427#issuecomment-12200262](https://github.com/thoughtbot/capybara-webkit/issues/427#issuecomment-12200262)

一位 capybara-webkit 开发人员推荐了这种解决方法：“[Send] 一个 POST 请求，其参数将请求标识为 DELETE。Rails 使用这种机制来解决跨浏览器的类似问题。”

# php - 我的模型从 Controller 加载后不起作用，但从另一个模型加载时效果很好

> ID：16044190
> 
> 赞同：1
> 
> 时间：2013-04-16T18:13:32.093
> 
> 标签：php, codeigniter

我是初学者 PHP 和 codeigniter 学习者。

有一个模型从 Controller 加载后无法工作，但从另一个模型加载后可以正常工作。

我正在为用户构建一个应用程序以获取反馈。用户可能有几个他可以向听众提出的问题。

从编码的角度来看，我有一个`MY_Controller`扩展 CI_Controller 的基本控制器“”。然后我有 2 个控制器，它们扩展了我的控制器 - 主页（用户将看到的主页）和问题（查看问题的详细信息）。

我有 2 个主要型号：`user_model`和`question_model`

当我从 user_model 中加载 question_model 时，一切顺利，程序运行良好。

但是当我从 Question 控制器中加载 question_model 时，它会运行构造函数（我已经做出了一个回显来检查它）并完成了构造函数（我再次回显来检查），但是当我调用 question_model 的方法时，我得到错误：

```
Fatal error: Call to a member function initialize() on a non-object in /Users/jaimequintas/Dropbox/3 CODIGO/feedbacking/application/controllers/question.php on line 17 
```

有人可以帮我弄这个吗？我已经为此苦苦挣扎了一天多，但无论如何我都无法解决。

我的基本控制器：

```
class MY_controller extends CI_Controller{

public function index()
{
    $this->session->set_userdata('user_id', 8); //this is here just to initialize a user while in DEV
    $this->prepare_user(); //populates user with DB info

} 
```

我的问题控制器（不能使用 $this->question_model 方法的控制器）

```
class Question extends MY_Controller {

public function index(){

    parent::index();

    $active_question = $this->uri->segment(2,0);

    $this->load->model('Question_model'); //this line runs well, as an echo statement after this gets printed
    $this->Question_model->initialize($active_question); //this is the line that triggers the "can't use method error"
    $this->Question_model->get_answers_list(); 
```

这是无法从控制器调用其方法的 Question_model。

```
class Question_model extends CI_Model {

public $question_id;
public $question_text;
public $vote_count; 
public $activation_date;
public $status; //Draft, Active, Archived
public $question_notes; //user notes

public $question_url; //the segment that will be added to codeigniter url feedbacking.me/"semgent"
public $answers_list; //array with answer objects
public $last_vote; //date of the last vote

public $vote_count_interval; //this is not computed with initialize, must call method when needed

public function __construct()
{
    parent::__construct();
}

public function initialize($question_id)
{
    //populate question from DB with: question_id, question_text, vote_count, activation_date, status
    // if $question_id ==0 creates an empty question (should be followed by create_question)

        $this->question_id = $question_id;
        $this->get_question_by_id();
        $this->get_question_votes();
} 
```

最后是 User_model。我之所以把它放在这里是因为当这个模型加载 Question_model 时，一切正常。

```
class User_model extends CI_Model {

public $user_id;
public $user_email;
public $user_name;
public $plan_id;
public $questions_list; //array with question objects

public function __construct()
{
    parent::__construct();
    $this->load->database();
}

public function initialize($user_id)
{
    //populates user_info and question_list
    $this->user_id = $user_id;
    $this->get_user_by_id();
    $this->get_user_questions(); //this line calls the Question_model and works fine
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-24T03:45:13.477

在模型中加载模型时，您需要获取代码点火器的实例（而不是 $this）：

```
$CI =& get_instance();
$CI->load->model('Question_model');
$CI->Question_model->initialize($active_question);
$CI->Question_model->get_answers_list(); 
```

# ios - 当我单击单元格以执行特定工作时如何？

> ID：16044194
> 
> 赞同：0
> 
> 时间：2013-04-16T18:13:43.747
> 
> 标签：ios, objective-c, uitableview, cell

我想创建一个页面表格视图，并且我想在单击任何单元格时执行特定工作！

（例如，当我单击单元格从特定 URL 地址接收 NSString 值时）

这是我的一段代码：

**视图控制器.m**

```
@implementation ViewController
@synthesize tables;

- (void)viewDidLoad
{
    [super viewDidLoad];

    NSString *Number2 = [[NSString alloc]initWithContentsOfURL:[NSURL URLWithString:@"http://192.168.1.104/janatan/filemanager.php?dir=root&foldernum"]];
     folderNumber = [Number2 integerValue];

    for (int i=0; i < folderNumber; i++)
    {
        NSString *folderName = [[NSString alloc]initWithContentsOfURL:[NSURL URLWithString:[NSString stringWithFormat:@"http://192.168.1.104/janatan/filemanager.php?dir=root&folder=%d&name",i]]];
        if (!folder)
        {
            folder = [NSMutableArray array];
        }
        [folder addObject:folderName];
    }
    all = [[NSMutableArray alloc]init];
    [all addObjectsFromArray:folder];

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    if([folder containsObject:[all objectAtIndex:indexPath.row]])
    {
        [self performSegueWithIdentifier:@"segue2" sender:self];
    }
    //I want when to click any cell get NSString from this URL:
    //"http://192.168.1.104/janatan/filemanager.php?dir=root&**folder=%d**&id"
    //(this URL give me id for any folder and any folder is in any cell)
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T05:36:46.600

您可以使用以下代码从 URL 下载字符串

```
NSURL *url = [NSURL URLWithString:@"your URL to Download String"];
NSURLRequest *request = [NSURLRequest requestWithURL:url];
NSURLResponse *response = nil;
NSError *err = nil;
NSData *data = [NSURLConnection sendSynchronousRequest:request returningResponse:&response error:&err];
NSString *responseString = [[NSString alloc] initWithBytes:[data bytes] length:[data length] encoding:NSUTF8StringEncoding];

NSLog(@"Response : %@", responseString); 
```

# jsf - 如何为 a4j:commandLink 文本值的一部分着色？

> ID：16044197
> 
> 赞同：0
> 
> 时间：2013-04-16T18:13:59.103
> 
> 标签：jsf, richfaces, web-deployment, frontend

我想为`a4j:commandLink`文本值的一部分着色
例如我的目标视图
![在此处输入图像描述](https://i.stack.imgur.com/wdrhb.png)

我使用此代码

```
<a4j:commandLink value="My Link  &lt;span style='color:red;'&gt;*&lt;/span&gt;"                         
    action="#{MyController.sort}">                          
</a4j:commandLink> 
```

但我有那个（不受欢迎的观点）
![在此处输入图像描述](https://i.stack.imgur.com/wBq3X.png)

注意
具有属性`h:outputText`的 文本值将被着色 `escape`

例如
此代码

```
<h:outputText value="My Text   &lt;span style='color:red;'&gt;*&lt;/span&gt;" 
escape="false"/> 
```

会产生这个视图
![在此处输入图像描述](https://i.stack.imgur.com/avx9X.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T19:12:58.500

只需将`<span>`元素嵌套在`<a4j:commandLink>`标签内，而不是使用`value`属性。像这样使用它：

```
<a4j:commandLink ...>
    <span>Plain text 
        <span class='red'>*</span>
    </span>
</a4j:commandLink> 
```

# c# - NetworkIsolationEnumAppContainers 的 C# 包装器

> ID：16044199
> 
> 赞同：-1
> 
> 时间：2013-04-16T18:14:03.283
> 
> 标签：c#, pinvoke

如何创建 ac# 包装器来调用：

```
 [DllImport("FirewallAPI.dll")] 
        internal static extern uint NetworkIsolationEnumAppContainers(out uint pdwCntPublicACs, out IntPtr ppACs); 
```

当像这样运行它时，我得到了一个 AccessViolationException （试图读取或写入受保护的内存）：

```
 uint aux=0;
        IntPtr foo=new IntPtr();
        NetworkIsolationEnumAppContainers(out aux, out foo); 
```

Marshall的正确方法是什么？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T09:58:31.153

您的 p/invokes 似乎已从此处解除：http: [//blogs.msdn.com/b/fiddler/archive/2011/12/10/fiddler-windows-8-apps-enable-loopback-network-isolation-豁免.aspx](http://blogs.msdn.com/b/fiddler/archive/2011/12/10/fiddler-windows-8-apps-enable-loopback-network-isolation-exemption.aspx)

那篇文章说：

> 他们的 .NET 声明（截至 BUILD 会议）如下：
> 
> ```
> // Call this API to enumerate all of the AppContainers on the system 
> [DllImport("FirewallAPI.dll")] 
> internal static extern uint NetworkIsolationEnumAppContainers(
>     out uint pdwCntPublicACs, out IntPtr ppACs); 
> .... 
> ```

但是，API 在发布之前发生了变化。API 的发布版本有一个额外的参数，并且位于不同的 DLL 中。该文档可以在[MSDN](https://docs.microsoft.com/en-us/windows/desktop/api/netfw/nf-netfw-networkisolationenumappcontainers)上找到。

您需要修改您的 p/invoke 以使用此 API。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T13:27:16.330

感谢您提供指向最新 API 的正确指针。这是现在正在运行的代码：

```
 uint pdwCntPublicACs = 0;
        IntPtr ppACs = new IntPtr();

        // Pin down variables
        GCHandle handle_pdwCntPublicACs = GCHandle.Alloc(pdwCntPublicACs, GCHandleType.Pinned);
        GCHandle handle_ppACs = GCHandle.Alloc(ppACs, GCHandleType.Pinned);

        uint retval = NetworkIsolationEnumAppContainers((Int32) NETISO_FLAG.NETISO_FLAG_MAX, out pdwCntPublicACs, out ppACs);

        //release pinned variables.
        handle_pdwCntPublicACs.Free();
        handle_ppACs.Free(); 
```

# java - 避免 PermGen 空间故障的应用程序设计最佳实践

> ID：16044201
> 
> 赞同：2
> 
> 时间：2013-04-16T18:14:09.380
> 
> 标签：java

是否有任何特别的技巧来设计不受此类错误影响的应用程序？此错误的一个原因是频繁地从 perm 空间重新加载类，并且 JVM 无法处理类所在空间的正确集合。然而，当 Tomcat 7 没有时，Tomcat 6 会出现这样的问题。Tomcat 7 在不产生问题的情况下重新加载类的设计有什么区别？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T18:20:04.813

一般来说，只是向上 permgen 空间。现在 RAM 如此便宜，以至于您可以负担得起 64 位 JVM。但是，一旦您的代码投入生产并且无需频繁重新部署，这种情况就不应该经常发生。

# linux - 在linux中测试磁盘空间不足

> ID：16044204
> 
> 赞同：16
> 
> 时间：2013-04-16T18:14:14.917
> 
> 标签：linux, testing

我有一个程序在写入某个文件时磁盘空间不足时可能会死机，我不确定是否是这种情况。

我想运行它看看，但我的测试服务器不会很快耗尽空间。有什么办法可以模拟这种行为吗？看起来没有任何方法可以在 Ubuntu 中设置文件夹/文件大小限制，并且设置用户配额将是一个过程（由于获得权限）

有没有一种通用的方法来测试这种情况？

我正在运行 Ubuntu 12.04

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-04-16T18:26:39.430

1.  创建所需大小的文件（此处为 10MB）

    `dd if=/dev/zero of=/home/qdii/test bs=1024 count=10000`

2.  用这个文件制作一个环回设备

    `losetup -f /home/qdii/test`

3.  在您想要的文件系统中格式化该设备

    `mkfs.ext4 /dev/loopXXX`

4.  将它安装在您想要的任何位置（`/mnt/test`应该存在）

    `sudo mount /dev/loopXXX /mnt/test`

5.  将您的程序复制到该分区并进行测试

    `cp /path/my/program /mnt/test && cd /mnt/test && ./program`

* * *

`/dev/loopXXX`用创建的循环设备代替`losetup`，用`losetup -a`.

完成后，不要忘记：

*   卸载`sudo umount /mnt/test`。
*   使用后清理循环装置，用`losetup -D /dev/loopXXX`
*   删除文件。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2017-01-20T13:31:48.593

只需使用 /dev/full，当您尝试写入它时，它会引发 ENOSPC 错误：

```
$ echo "Hello world" > /dev/full
bash: echo: write error: No space left on device 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-16T18:41:23.050

另一种可能性是通过[setrlimit(2)](http://man7.org/linux/man-pages/man2/setrlimit.2.html)系统调用和`RLIMIT_FSIZE`ulimit`bash` [内置](http://ss64.com/bash/ulimit.html)函数（使用`-f`）来减少适当的限制。然后[write(2)](http://man7.org/linux/man-pages/man2/write.2.html)将失败`EFBIG`

而且您还可以在一些适当的文件系统上设置一些[配额](http://ss64.com/bash/ulimit.htmlsouptonuts.sourceforge.net/quota_tutorial.html)`write(2)`，所以失败了`EDQOT`.

如果您想要真正的`ENOSPC`错误，`write(2)`您可能需要一个由[qdii](https://stackoverflow.com/a/16044420/841108)回答的环回文件系统。

顺便说一句，我真的不知道如何“模拟”`EIO`错误（可能是一些[FUSE](http://fuse.sourceforge.net/)文件系统？）。

许多程序处理`write(2)`错误（几乎所有程序都应该）。但我不知道有多少程序会以非常不同的方式处理`write(2)`. 大多数程序`write(2)`以相同的方式处理所有错误。

^(但是，您可能需要以不同的方式处理错误：这些是可恢复`EINTR`的`EWOULDBLOCK`错误，您通常会`write(2)`在以后重做。)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-03-03T03:48:35.503

重新创建场景的一个好方法是挂载一个空间有限的目录。假设您的程序将在 /data 上执行。要将那里的存储限制为 100MB（根据需要进行自定义）：

1.  须藤
2.  mkdir /媒体/图像/
3.  dd if=/dev/zero of=/media/images/data.img bs=512K count=200 #100MB
4.  mkfs.ext4 /media/images/data.img
5.  mkdir /数据
6.  mount -o 循环 /media/images/data.img /data

但是如果你想要更少的空间，就把你的袜子脱掉

*   dd if=/dev/zero of=/media/images/data.img bs=1M count=1 #1MB

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-10-07T11:02:20.043

如果您正在进行 POSIX 文件系统调用，则可以使用[libfiu](https://blitiri.com.ar/p/libfiu/)将`ENOSPC`错误注入调用。

# c# - 在 Windows 服务中安装和运行 WCF 服务

> ID：16044205
> 
> 赞同：2
> 
> 时间：2013-04-16T18:14:15.923
> 
> 标签：c#, .net, wcf, windows-services

我不是 C# 或 .NET 专家。但是，我必须使用它...

我正在运行`InstallUtil.exe MyService.exe`安装实质上运行 WCF 服务的 Windows 服务。我已经定义了 WFC 接口并实现了它。下面是界面。

```
[ServiceContract(Namespace = "http://WCFService", Name = "WCFService")]
public interface IWCFService
{
    [OperationContract]
    User Login(string userName, string password);

    [OperationContract]
    List<Project> GetProjects(Guid userGuid);

    [OperationContract]
    List<Stylesheet> GetStylesheets(Guid projectGuid);

} 
```

我还定义了一个 Windows 服务，如下所示：

```
public partial class Service: ServiceBase
{
    public FlatWsdlServiceHost m_fwsh = null; // extends ServiceHost

    public DesignerService()
    {
        InitializeComponent();
    }

    protected override void OnStart(string[] args)
    {

        this.EventLog.WriteEntry("OnStart Successfull", EventLogEntryType.Information);

        if (m_fwsh != null)
        {
            m_fwsh.Close();
        }

        // Create a ServiceHost for the EventWebService type and 
        // provide the base address.
        Uri localUri= new Uri("http://localhost:7777/");
        m_fwsh = new FlatWsdlServiceHost(typeof(WCFService), localUri);

        // Open the ServiceHostBase to create listeners and start 
        // listening for messages.
        m_fwsh.Open();
    }

    protected override void OnStop()
    {
        //base.OnStop();

        if (m_fwsh != null)
        {
            m_fwsh.Close();
            m_fwsh = null;
        }
    }

    protected override void OnPause()
    {
        base.OnPause();
    }
} 
```

当我运行`InstallUtil.exe MyService.exe`日志时说：

```
Installing assembly 'MyService.exe'.
Affected parameters are:
   logtoconsole = 
   logfile = MyService.InstallLog
   assemblypath = MyService.exe
No public installers with the RunInstallerAttribute.Yes attribute could be found in the MyService.exe assembly.
Committing assembly 'MyService.exe'.
Affected parameters are:
   logtoconsole = 
   logfile = MyService.InstallLog
   assemblypath = MyService.exe
No public installers with the RunInstallerAttribute.Yes attribute could be found in the MyService.exe assembly.
Remove InstallState file because there are no installers. 
```

另外，我确实有一个 ProjectInstaller.cs 来初始化 serviceInstaller1 和 serviceProcessInstaller1。在添加 WCF 服务之前，Windows 服务安装良好并将“OnStart Successl”消息写入 Windows 日志。

非常感谢任何帮助或建议。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-16T18:32:12.303

你需要这样的课程：

```
// Provide the ProjectInstaller class which allows 
// the service to be installed by the Installutil.exe tool
[RunInstaller(true)]
public class ProjectInstaller : Installer
{
    private ServiceProcessInstaller process;
    private ServiceInstaller service;

    public ProjectInstaller()
    {
        process = new ServiceProcessInstaller();
        process.Account = ServiceAccount.LocalSystem;
        service = new ServiceInstaller();
        service.ServiceName = "WCFWindowsServiceSample";
        Installers.Add(process);
        Installers.Add(service);
    }
} 
```

完整教程在[MSDN上](http://msdn.microsoft.com/en-us/library/ms733069.aspx)

# java - 同步说明符阻碍了可变数据的传输

> ID：16044208
> 
> 赞同：1
> 
> 时间：2013-04-16T18:14:30.627
> 
> 标签：java, synchronized

我最近组装了一个程序，通过usb端口串行获取数据并传输到COSM。通过该`serialevent`方法串行获取的数据并没有传递给`update`用于将上述数据上传到 COSM 的方法。然而，在`synchronized`从方法的签名中删除说明符后，`serialevent`这个问题就解决了。

```
public synchronized void serialEvent(SerialPortEvent oEvent)//Event handler for Serial communication  
{

    if (oEvent.getEventType() == SerialPortEvent.DATA_AVAILABLE) 
    {
        try {

            val=input.read();//Variable where data is received.Initialized to 0.
             this.update(78164);  

        } 
        catch (Exception e)
        {
            System.err.println(e.toString());
        }
    }

} 
```

上传方式：

```
private  void update(int feedid) throws PachubeException, IOException ,Exception
{

    Feed f = this.pachube.getFeed(feedid);
   //System.out.println(f==null);
     System.out.println("updating ...");

     f.updateDatastream(8345, (double) val);//Expected value=77,Obtained value=0
     f.updateDatastream(6274, (double) val);//Expected value=77,Obtained value=0
     f.updateDatastream(1044, (double) val);//Expected value=77,Obtained value=0

   System.out.println("updated");

} 
```

我的问题是说明`synchronized`符如何拒绝变量中存在的数据从`serialevent`方法传递到`upload`即使我没有使用多个线程？

# c# - UltraGridCell 索引

> ID：16044214
> 
> 赞同：0
> 
> 时间：2013-04-16T18:14:44.430
> 
> 标签：c#, ultrawingrid

如何获取当前选定单元格的索引？（包含它的行的索引）。
如果它具有这样的属性，那将是合乎逻辑的

```
myUltraGridView.ActiveCell.Index; 
```

但它不存在。我想避免做这样的事情：

```
for (int i = 0; i < myUltraGridView.ActiveRow.Cells.Count; i++)
   if(myUltraGridView.ActiveRow.Cells(i) == myUltraGridView.ActiveCell)
      return i; 
```

知道如何访问它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-29T17:46:07.877

您想要实际索引还是可见索引？这两个都来自单元格的列。

试试这些：

（实际的）

```
myUltraGridView.ActiveCell.Column.Index 
```

（网格中的可见位置）

```
myUltraGridView.ActiveCell.Column.Header.VisiblePosition 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-30T13:12:55.547

如果您正在寻找行的索引，则还有类`Index`上的属性。`UltraGridRow`

```
ultraGrid1.ActiveCell.Row.Index 
```

# c# - 逐个单元格地读取和写入内容时速度太慢

> ID：16044215
> 
> 赞同：0
> 
> 时间：2013-04-16T18:14:47.790
> 
> 标签：c#, performance, xls

我开发了一个应用程序，它读取 32 个 xls 文件并将其内容写入一个 excel 文件。程序运行良好，但速度太慢（如果是 32 个文件则需要 20-25 分钟），因为我正在逐个单元地读写。有什么办法可以让它更快。就我而言，每个单元格都有不同的格式、字体、边框等。我可以一次读取整个内容的格式并将其粘贴到结果文件中吗？我使用的是 Microsoft.Office.Interop.Excel API。这是我正在使用的代码

```
Cursor.Current = Cursors.WaitCursor;
            // data member initialization for reading the sheet
            Excel.Application app;
            Excel.Workbook workbook;
            Excel.Worksheet worksheet;
            Excel.Range range;

            // data member initialization for writing sheet
            Excel.Application finalApp;
            Excel.Workbook finalWorkBook;
            Excel.Worksheet finalWorkSheet;

            String path = this.textBox1.Text;
            String numberOfFiles = (String)this.comboBox1.SelectedItem;
            int count = 1;
            int row = 1, col = 2;
            int startingrowIndex = 1;
            int endingrowIndex = 1;
            int valueCount = 1;
            string value = textBox2.Text;
            try
            {
                // Object creation for the final sheet
                finalApp = new Excel.ApplicationClass();
                finalApp.Visible = true;
                finalWorkBook = finalApp.Workbooks.Add(1);
                finalWorkSheet = (Excel.Worksheet)finalWorkBook.Sheets[1];

                // opening a excel file
                app = new Excel.ApplicationClass();
                Excel.Borders b=null;
                Excel.Borders fb = null;
                try
                {
                    for (int k = 0; k < Int32.Parse(numberOfFiles); k++)
                    {
                        fullPath = @path + @"\" + count + ".xls";
                        workbook = app.Workbooks.Open(fullPath, Missing.Value, Missing.Value,
                            Missing.Value, Missing.Value, Missing.Value, Missing.Value, Missing.Value
                            , Missing.Value, Missing.Value, Missing.Value, Missing.Value, Missing.Value, Missing.Value,
                            Missing.Value);
                        worksheet = (Excel.Worksheet)workbook.Sheets.get_Item(1);
                        range = worksheet.UsedRange;
                        int cnum1 = range.Columns.Count;
                        int rnum1 = range.Rows.Count;
                        int i, j;
                        for (i = 1; i <= rnum1; i++)
                        {
                            for (j = 1; j <= cnum1; j++)
                            {
                                if ((range.Cells[i, j] as Excel.Range).Value2 != null)
                                {
                                    string value1 = (range.Cells[i, j] as Excel.Range).Value2.ToString();
                                    finalWorkSheet.Cells[row, col] = value1;
                                }
                                b = (Excel.Borders)(range.Cells[i, j] as Excel.Range).Borders;
                                fb = (finalWorkSheet.Cells[row, col] as Excel.Range).Borders;

                                fb[Microsoft.Office.Interop.Excel.XlBordersIndex.xlEdgeBottom].Weight = b[Microsoft.Office.Interop.Excel.XlBordersIndex.xlEdgeBottom].Weight;
                                fb[Microsoft.Office.Interop.Excel.XlBordersIndex.xlEdgeTop].Weight = b[Microsoft.Office.Interop.Excel.XlBordersIndex.xlEdgeTop].Weight;
                                fb[Microsoft.Office.Interop.Excel.XlBordersIndex.xlEdgeLeft].Weight = b[Microsoft.Office.Interop.Excel.XlBordersIndex.xlEdgeLeft].Weight;
                                fb[Microsoft.Office.Interop.Excel.XlBordersIndex.xlEdgeRight].Weight = b[Microsoft.Office.Interop.Excel.XlBordersIndex.xlEdgeRight].Weight;

                                fb[Microsoft.Office.Interop.Excel.XlBordersIndex.xlEdgeBottom].LineStyle = b[Microsoft.Office.Interop.Excel.XlBordersIndex.xlEdgeBottom].LineStyle;
                                fb[Microsoft.Office.Interop.Excel.XlBordersIndex.xlEdgeTop].LineStyle = b[Microsoft.Office.Interop.Excel.XlBordersIndex.xlEdgeTop].LineStyle;
                                fb[Microsoft.Office.Interop.Excel.XlBordersIndex.xlEdgeLeft].LineStyle = b[Microsoft.Office.Interop.Excel.XlBordersIndex.xlEdgeLeft].LineStyle;
                                fb[Microsoft.Office.Interop.Excel.XlBordersIndex.xlEdgeRight].LineStyle = b[Microsoft.Office.Interop.Excel.XlBordersIndex.xlEdgeRight].LineStyle;
                                (finalWorkSheet.Cells[row, col] as Excel.Range).Interior.Color = (range.Cells[i, j] as Excel.Range).Interior.Color;
                                (finalWorkSheet.Cells[row, col] as Excel.Range).Font.Color = (range.Cells[i, j] as Excel.Range).Font.Color;

                                (finalWorkSheet.Cells[row, col] as Excel.Range).Interior.PatternColor = (range.Cells[i, j] as Excel.Range).Interior.PatternColor;
                                (finalWorkSheet.Cells[row, col] as Excel.Range).Interior.Pattern = (Excel.XlPattern)(range.Cells[i, j] as Excel.Range).Interior.Pattern;
                                (finalWorkSheet.Cells[row, col] as Excel.Range).WrapText =(range.Cells[i, j] as Excel.Range).WrapText;
                                col++;
                            }
                            row++;
                            col = 2;
                        }
                        //finalWorkBook.SaveAs("hello.xlsx", Excel.XlFileFormat.xlExcel4Workbook, Missing.Value,
                        //Missing.Value, Missing.Value, Missing.Value, Excel.XlSaveAsAccessMode.xlNoChange, Missing.Value, Missing.Value,
                        //Missing.Value, Missing.Value, Missing.Value);
                        endingrowIndex = row-1;
                        finalWorkSheet.Cells[startingrowIndex,1]=value+valueCount;
                        (finalWorkSheet.Cells[startingrowIndex, 1] as Excel.Range).VerticalAlignment = Excel.XlVAlign.xlVAlignCenter;
                        (finalWorkSheet.Cells[startingrowIndex, 1] as Excel.Range).HorizontalAlignment = Excel.XlHAlign.xlHAlignCenter;
                        (finalWorkSheet.Cells[startingrowIndex, 1] as Excel.Range).WrapText = true;
                        finalWorkSheet.get_Range(finalWorkSheet.Cells[startingrowIndex, 1], finalWorkSheet.Cells[endingrowIndex, 1]).Merge(Type.Missing);
                        startingrowIndex = row + 1;
                        workbook.Close(false, false, Missing.Value);
                        count++;
                        row++;
                        col = 2;
                        valueCount++;
                    }
                    Cursor.Current = Cursors.Default;
                    MessageBox.Show("Successfully Completed");
                }
                catch (FileNotFoundException fnfe)
                {
                    Cursor.Current = Cursors.Default;
                    MessageBox.Show("Error while opening the file "+fullPath);
                }
                //finalWorkBook.Close(true,false,Missing.Value);
            }
            catch (Exception ex)
            {
                Cursor.Current = Cursors.Default;
                MessageBox.Show(@"Some Error has occurred.Please check the path Correctly
                whether it's correct or try again");
            }
        } 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T06:11:14.607

使用 range.copy 将加载的 xls 的范围复制到剪贴板。[然后使用range.PasteSpecial](http://msdn.microsoft.com/en-us/library/vstudio/microsoft.office.interop.excel.range.pastespecial.aspx)将剪贴板内容粘贴到新的 xls 中。在那里，您可以说明复制到新工作表中哪个范围的内容。

# php - 如何让 Dreamweaver 认为您包含样式表

> ID：16044217
> 
> 赞同：-1
> 
> 时间：2013-04-16T18:15:18.213
> 
> 标签：php, html, css, dreamweaver

我正在使用 twig 模板系统，所以 Dreamweaver 不知道我已经包含了一些样式表。我想知道是否有办法让 Dreamweaver 意识到包含这些样式表，或者欺骗它以便出现代码提示。

谢谢，麻烦您了 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T18:48:53.627

从[**这个**](http://www.phpdeveloper.org/news/15998)来源我发现了这个：

> 您只需要告诉 Dreamweaver“.twig”文件应该被识别为代码并在“MMDocumentTypes”XML 配置文件中设置语法突出显示（对于非开发类型可能有点棘手）。此更改告诉程序以 HTML 语法突出显示打开它们。

我认为它也可以与 CSS 一起使用

# windows-7 - 删除失败时 cmd 终止

> ID：16044222
> 
> 赞同：0
> 
> 时间：2013-04-16T18:15:39.410
> 
> 标签：windows-7, batch-file

我有以下 bat 文件 mybat.bat ：

1) 停止服务

2) 删除一些日志文件

3）再次启动服务：

```
@echo off

net stop "myservice"
if ERRORLEVEL 1 goto error
exit
:error
echo There was a problem...maybe it was alreay stopped

rem sometimes the terminal simply closes when trying to delete the logfiles :-(
set folder="C:\stuff\logs"
del %folder%\*.*   /s /f  /q

net start "myservice"
if %errorlevel% == 2 echo Could not start service.
if %errorlevel% == 0 echo Service started successfully.
echo Errorlevel: %errorlevel% 
```

我手动打开一个 cmd.exe 实例并运行 mybat.bat 但有时它会在尝试删除日志文件时简单地关闭，而 stuff\logs 的内容没有被删除。关于为什么会发生这种情况以及即使删除失败如何使 cmd 实例保持活动状态的任何想法？

如果我等待某个时间并再次执行 mybat 它通常可以工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T19:34:11.433

我看到一些问题。最大的问题是，您知道您`exit`在停止服务的位置下方吗？您是否打算`goto :label`改为那里？

另外，尝试将引号从`set folder=`行移到`del %folder%`行，如下所示：

```
set folder=C:\stuff\logs
del /s /f /q "%folder%\*.*" 
```

或者，也删除子文件夹，

```
set folder=C:\stuff\logs
rmdir /q /s "%folder%" && md "%folder%" 
```

来，试试这个。

```
@echo off

net stop "myservice" || echo There was a problem...maybe it was alreay stopped

:: Now that "exit" is gone, the console probably won't close any more.

set folder=C:\stuff\logs
rmdir /q /s "%folder%" && md "%folder%"

net start "myservice"

:: "if ERRORLEVEL x" checks if %errorlevel% is greater than or equal to x

if ERRORLEVEL 1 (
    echo Could not start service.
) else (
    echo Service started successfully.
)

echo Errorlevel: %errorlevel% 
```

* * *

注意：`net start "myservice"`代码可以这样压缩：

```
:: (leave the carat in the emoticon.  It escapes the parenthesis.)
(net start "myservice" && echo Great success.) || echo Fail. :^(

echo Errorlevel: %errorlevel% 
```

有关更多信息，请参阅[条件执行](http://www.robvanderwoude.com/condexec.php)。

# joomla - 在 joomla 1.6 模板上添加图像和链接功能

> ID：16044225
> 
> 赞同：2
> 
> 时间：2013-04-16T18:15:45.033
> 
> 标签：joomla, joomla2.5

我有一个为 Joomla 1.6 构建的自定义模板，我的客户在 Joomla 2.5 上使用它，这通常应该可以工作，但问题是它缺少文章设置中存在的“图像和链接”功能。当我选择一张图片时，它不会显示在网站上。我一直试图弄清楚如何以及在哪里编辑模板以使其工作，但一切都是徒劳的。请你能给我一个程序来完成这项工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T05:47:33.677

很可能您有 com_content 覆盖，首先将文件夹 /templates/your_template/html/com_content 移开并查看它们是否显示：如果是，您可以

*   更新您刚刚移动的 com_content 覆盖，（查看 /components/com_content/views 子文件夹以了解它在核心 J2.5 中是如何完成的示例）
*   使用核心 2.5（也许只使用样式）
*   重新启动覆盖，只需复制 /templates/your_template/html/com_content 下的相应 /components/com_content/views 子文件夹

注意命名模式的差异：[http](http://docs.joomla.org/Understanding_Output_Overrides) ://docs.joomla.org/Understanding_Output_Overrides请参阅“复制或创建布局文件”部分

# sql - rails - 如何从另一个查询中减去一个查询？

> ID：16044228
> 
> 赞同：4
> 
> 时间：2013-04-16T18:15:46.430
> 
> 标签：sql, ruby-on-rails, ruby, activerecord

我想做这样的事情：

```
puts Room.find(1,2,3) - Room.find(1,2) 
```

以便它只`Room.find(3)`返回该 SQL 记录，而不是返回`Room.find(1,2,3)`给我的 3 条记录

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-16T19:03:27.827

我认为这会更有效率：

```
first_id_list = [1, 2, 3]
second_id_list = [1, 2]
Room.find(first_id_list - second_id_list) 
```

这样，您*只需*搜索您真正希望在查询中出现的 id，而不是获取不需要的行，然后实例化一堆 Room 对象，然后您会立即忽略这些对象，但 Ruby 仍然需要进行垃圾收集。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T18:27:26.740

正如安东尼阿尔贝托在评论中指出的那样。这行得通。只有当你只找到一个房间实例时这不起作用。例如`Room.find(1)`将返回一个类的对象`Room`，而不是一个数组。因此，您将无法`-`在此 Speak 对象上使用二元运算符。为避免这种情况发生，请使用`to_a`方法。

```
Array.wrap(Room.find(1,2,3)) - Array.wrap(Room.find(1))
=> Room.find(2,3) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-16T18:52:34.230

如果我省略`puts`...

```
1.9.3-p327 :029 > puts Link.find(1,2,3) - Room.find(1,2)
Room Load (0.5ms)  SELECT `links`.* FROM `rooms` WHERE `rooms`.`id` IN (1, 2, 3)
Link Load (0.4ms)  SELECT `links`.* FROM `rooms` WHERE `rooms` id` IN (1, 2)
#<Room:0x95bf6a4>
 => nil 
```

对比

```
1.9.3-p327 :026 > Link.find(1,2,3) - Link.find(1,2)
  Room Load (0.8ms)  SELECT `rooms`.* FROM `rooms` WHERE `rooms`.`id` IN (1, 2, 3)
  Room Load (0.4ms)  SELECT `rooms`.* FROM `rooms` WHERE `rooms`.`id` IN (1, 2)
 => [#<Room id: 3, url_address: "http://www.linux.org", alt_text: "Linux", group_id: 3, position: 347, created_at: "2010-10-26 14:41:05", updated_at: "2010-10-26 14:41:05", version_number: "", content_date: nil>] 
1.9.3-p327 :027 > puts Room.find(1,2)
  Room Load (0.3ms)  SELECT `rooms`.* FROM `rooms` WHERE `rooms`.`id` IN (1, 2)
#<Room:0x9724094>
#<Room:0x9723ea0>
 => nil 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-02-22T18:13:19.860

您可以只使用 SQL 来执行此操作，这样您就不会浪费内存！

```
rooms = Room.where(id: [1,2,3])
            .where.not(id: [1,2]) 
```

或者

```
rooms = Room.where("id IN (?) AND id NOT IN (?)",[1,2,3], [1,2]) 
```

# python - 如何在pygame中获取键盘输入？

> ID：16044229
> 
> 赞同：62
> 
> 时间：2013-04-16T18:15:49.023
> 
> 标签：python, pygame, keyboard

我正在 pygame 1.9.2 中制作游戏。这是一个失败的简单游戏，其中一艘船在五列坏人之间移动，他们通过缓慢向下移动来攻击。我正试图让船用左右箭头键左右移动。这是我的代码：

```
keys=pygame.key.get_pressed()
if keys[K_LEFT]:
    location-=1
    if location==-1:
        location=0
if keys[K_RIGHT]:
    location+=1
    if location==5:
        location=4 
```

它工作得太好了。船移动得太快了。让它只向左或向右移动一个位置几乎是不可能的。我怎样才能让它每次按下键时船只移动一次？

* * *

## 回答 #1

> 赞同：101
> 
> 时间：2013-04-16T18:24:09.410

您可以从 pygame 获取事件，然后注意该`KEYDOWN`事件，而不是查看返回的键`get_pressed()`（它为您提供当前按下的键，而事件显示您在*该帧*`KEYDOWN`上按下了哪些键）。

 *您的代码现在发生的情况是，如果您的游戏以 30fps 的速度渲染，并且您按住左箭头键半秒钟，您将更新位置 15 次。

```
events = pygame.event.get()
for event in events:
    if event.type == pygame.KEYDOWN:
        if event.key == pygame.K_LEFT:
            location -= 1
        if event.key == pygame.K_RIGHT:
            location += 1 
```

为了在按住键时支持连续移动，您必须建立某种限制，或者基于游戏循环的强制最大帧速率，或者通过一个计数器，它只允许您移动每这么多滴答声。环形。

```
move_ticker = 0
keys=pygame.key.get_pressed()
if keys[K_LEFT]:
    if move_ticker == 0:
        move_ticker = 10
        location -= 1
        if location == -1:
            location = 0
if keys[K_RIGHT]:
    if move_ticker == 0:   
        move_ticker = 10     
        location+=1
        if location == 5:
            location = 4 
```

然后在游戏循环的某个地方，你会做这样的事情：

```
if move_ticker > 0:
    move_ticker -= 1 
```

这只会让您每 10 帧移动一次（因此，如果您移动，自动收报机将设置为 10，并且在 10 帧后它将允许您再次移动）

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2020-10-23T06:19:32.170

[`pygame.key.get_pressed()`](https://www.pygame.org/docs/ref/key.html#pygame.key.get_pressed)返回一个包含每个键状态的列表。如果按住某个键，则该键的状态为`True`，否则为`False`。用于[`pygame.key.get_pressed()`](https://www.pygame.org/docs/ref/key.html#pygame.key.get_pressed)评估按钮的当前状态并获得连续移动：

```
while True:

    keys = pygame.key.get_pressed()
    x += (keys[pygame.K_RIGHT] - keys[pygame.K_LEFT]) * speed
    y += (keys[pygame.K_DOWN] - keys[pygame.K_UP]) * speed 
```

键盘事件（参见[pygame.event](https://www.pygame.org/docs/ref/event.html)模块）仅在按键状态更改时发生一次。`KEYDOWN`每次按下某个键时，该事件发生一次。`KEYUP`每次释放键时发生一次。将键盘事件用于单个动作或移动：

```
while True:

    for event in pygame.event.get():
        if event.type == pygame.KEYDOWN:
            if event.key == pygame.K_LEFT:
                x -= speed
            if event.key == pygame.K_RIGHT:
                x += speed
            if event.key == pygame.K_UP:
                y -= speed
            if event.key == pygame.K_DOWN:
                y += speed 
```

另请参阅[键和键盘事件](https://github.com/Rabbid76/PyGameExamplesAndAnswers/blob/master/documentation/pygame/pygame_keys_and_keyboard_event.md)

* * *

连续运动的最小示例：`[![](https://i.stack.imgur.com/5jD0C.png) replit.com/@Rabbid76/PyGame-ContinuousMovement](https://repl.it/@Rabbid76/PyGame-ContinuousMovement#main.py)`

[![](https://i.stack.imgur.com/S24dj.gif)](https://i.stack.imgur.com/S24dj.gif)

```
import pygame

pygame.init()
window = pygame.display.set_mode((300, 300))
clock = pygame.time.Clock()

rect = pygame.Rect(0, 0, 20, 20)
rect.center = window.get_rect().center
vel = 5

run = True
while run:
    clock.tick(60)
    for event in pygame.event.get():
        if event.type == pygame.QUIT:
            run = False
        if event.type == pygame.KEYDOWN:
            print(pygame.key.name(event.key))

    keys = pygame.key.get_pressed()

    rect.x += (keys[pygame.K_RIGHT] - keys[pygame.K_LEFT]) * vel
    rect.y += (keys[pygame.K_DOWN] - keys[pygame.K_UP]) * vel

    rect.centerx = rect.centerx % window.get_width()
    rect.centery = rect.centery % window.get_height()

    window.fill(0)
    pygame.draw.rect(window, (255, 0, 0), rect)
    pygame.display.flip()

pygame.quit()
exit() 
```

* * *

单个动作的最小示例：`[![](https://i.stack.imgur.com/5jD0C.png) replit.com/@Rabbid76/PyGame-ShootBullet](https://repl.it/@Rabbid76/PyGame-ShootBullet#main.py)`

[![](https://i.stack.imgur.com/W6lzh.gif)](https://i.stack.imgur.com/W6lzh.gif)

```
import pygame
pygame.init()

window = pygame.display.set_mode((500, 200))
clock = pygame.time.Clock()

tank_surf = pygame.Surface((60, 40), pygame.SRCALPHA)
pygame.draw.rect(tank_surf, (0, 96, 0), (0, 00, 50, 40))
pygame.draw.rect(tank_surf, (0, 128, 0), (10, 10, 30, 20))
pygame.draw.rect(tank_surf, (32, 32, 96), (20, 16, 40, 8))
tank_rect = tank_surf.get_rect(midleft = (20, window.get_height() // 2))

bullet_surf = pygame.Surface((10, 10), pygame.SRCALPHA)
pygame.draw.circle(bullet_surf, (64, 64, 62), bullet_surf.get_rect().center, bullet_surf.get_width() // 2)
bullet_list = []

run = True
while run:
    clock.tick(60)
    current_time = pygame.time.get_ticks()
    for event in pygame.event.get():
        if event.type == pygame.QUIT:
            run = False

        if event.type == pygame.KEYDOWN:
            bullet_list.insert(0, tank_rect.midright)

    for i, bullet_pos in enumerate(bullet_list):
        bullet_list[i] = bullet_pos[0] + 5, bullet_pos[1]
        if bullet_surf.get_rect(center = bullet_pos).left > window.get_width():
            del bullet_list[i:]
            break

    window.fill((224, 192, 160))
    window.blit(tank_surf, tank_rect)
    for bullet_pos in bullet_list:
        window.blit(bullet_surf, bullet_surf.get_rect(center = bullet_pos))
    pygame.display.flip()

pygame.quit()
exit() 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2015-09-08T01:51:52.393

```
import pygame
pygame.init()
pygame.display.set_mode()
while True:
    for event in pygame.event.get():
        if event.type == pygame.QUIT:
            pygame.quit(); #sys.exit() if sys is imported
        if event.type == pygame.KEYDOWN:
            if event.key == pygame.K_0:
                print("Hey, you pressed the key, '0'!")
            if event.key == pygame.K_1:
                print("Doing whatever") 
```

注意 K_0 和 K_1 不是唯一的键，要查看所有键，请参阅 pygame 文档，否则，`tab`在输入后点击

> 游戏。

（注意 .pygame 之后的）进入一个空闲程序。请注意，K 必须大写。另请注意，如果您不为 pygame 提供显示大小（不传递参数），那么它将自动使用计算机屏幕/监视器的大小。快乐编码！

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-03-13T08:44:16.660

我认为你可以使用：

```
pygame.time.delay(delayTime) 
```

其中`delayTime`以毫秒为单位。

把它放在事件之前。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-08-21T19:21:50.953

这背后的原因是 pygame 窗口以 60 fps（每秒帧数）运行，当您按下键 1 秒时，它会根据事件块的循环更新 60 帧。

```
clock = pygame.time.Clock()
flag = true
while flag :
    clock.tick(60) 
```

请注意，如果您的项目中有动画，那么图像的数量将定义`tick()`. 假设您有一个角色，它需要 20 组图像用于行走和跳跃，那么您必须以`tick(20)`正确的方式移动角色。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-07-04T18:04:23.210

尝试这个：

```
keys=pygame.key.get_pressed()
if keys[K_LEFT]:
    if count == 10:
        location-=1
        count=0
    else:
        count +=1
    if location==-1:
        location=0
if keys[K_RIGHT]:
    if count == 10:
        location+=1
        count=0
    else:
        count +=1
    if location==5:
        location=4 
```

这意味着你只移动 1/10 的时间。如果它仍然快速移动，您也可以尝试增加您设置的“计数”值。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-01-08T15:21:24.210

仅供参考，如果你想确保船不会离开屏幕

```
location-=1
if location==-1:
    location=0 
```

你可能可以更好地使用

```
location -= 1
location = max(0, location) 
```

这样，如果它跳过-1，您的程序就不会中断

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2015-03-10T14:25:40.897

您应该`clock.tick(10)`按照[文档](https://www.pygame.org/docs/ref/time.html#pygame.time.Clock.tick)中的说明使用。

* * *

## 回答 #9

> 赞同：-3
> 
> 时间：2016-08-02T20:29:07.813

上面的所有答案都太复杂了我只会将变量更改为 0.1 而不是 1 如果仍然太快，这会使船慢 10 倍 将变量更改为 0.01 这会使船慢 100 倍试试这个

```
keys=pygame.key.get_pressed()
if keys[K_LEFT]:
    location -= 0.1 #or 0.01
    if location==-1:
    location=0
if keys[K_RIGHT]:
    location += 0.1 #or 0.01
    if location==5:
        location=4 
```

* * *

## 回答 #10

> 赞同：-3
> 
> 时间：2019-05-26T09:58:23.730

要减慢游戏速度，请使用`pygame.clock.tick(10)`*

# c - 无法让程序计算一个数字的正确阶乘

> ID：16044236
> 
> 赞同：0
> 
> 时间：2013-04-16T18:16:00.917
> 
> 标签：c, function, parameters, parameter-passing

我编写了一个程序来对用户输入的数字进行阶乘。它是用于赋值的，必须写入，以便第一个函数读取一个值，然后将其传递给主函数，然后主函数将其传递给第二个函数，该函数计算数字的阶乘，然后将其打印给用户。问题是它一直显示“1”作为每个数字的阶乘。我究竟做错了什么？

```
#include <stdio.h>

int getValue()
{

    int n;

    printf("Enter number: ");
    scanf("%d%*c", &n);

    return(n);
}

int factorial(int n)
{

    int i, f;

    f=1;
    for(i=1; i<=n; i++)
    f=f*i;

    printf("The factorial is: %d", f);

    return(f);
}

int main()
{

    int f;

    getValue();
    factorial(f);

    return(0);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T18:18:13.430

您没有设置`f`这应该可以解决您的问题：

```
int main()
{
    int f = getValue();
    factorial(f);

    return(0);
} 
```

我假设您在代码中有拼写错误，`scanf`因为否则它不会编译，但应该是：

```
scanf("%d%*c", &n);
            ^ 
```

# vb.net - AjaxControlToolkit - 来自 HRESULT 的异常：0x80070057 (E_INVALIDARG)

> ID：16044238
> 
> 赞同：1
> 
> 时间：2013-04-16T18:16:11.537
> 
> 标签：vb.net, visual-studio-2012

各位下午好

我在编译我的应用程序时遇到问题，没有加载 AjaxControlToolkit。我正在使用 AjaxControlToolkit 的 v3.5。Visual Studio 2012。一切正常，应用程序无法正常工作后，我的计算机崩溃并单独重新启动。

  我已经尝试过的：

*   执行“清理”和“构建”。
*   删除引用并再次引用它。
*   在路径 C:\Windows\Microsoft.NET\Framework\v4.0.30319\Temporary ASP.NET Files 上，没有任何内容可以作为我阅读的建议删除。

欢迎任何帮助，如果缺少某些信息，我们深表歉意。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-09-01T18:37:02.443

这是一个对我有用的解决方案：

清除两者：

1.  项目的 \bin 文件夹
2.  临时文件夹（在 Windows 7 中应为 C:\Users\your_username\AppData\Local\Temp\Temporary ASP.NET Files）

与“[无法加载文件或程序集...参数不正确](https://stackoverflow.com/questions/8269386/could-not-load-file-or-assembly-the-parameter-is-incorrect)”中的解决方案相同。

# javascript - Ajax ASP.net ModalPopupExtender 不会显示面板

> ID：16044241
> 
> 赞同：1
> 
> 时间：2013-04-16T18:16:16.910
> 
> 标签：javascript, asp.net, ajax, modalpopupextender

我正在开发用于数据输入的公司内部工具。ASP 页显示以前输入的所有项目的完整列表。顶部是一个输入新工作的按钮，理论上会弹出一个模式弹出窗口。用于新作业的面板也用于修改现有作业时，但使用唯一`ModalPopupExtender`实例调用弹出窗口。

调用 Update ModalPopupExtender 时，面板会正确显示，包括使用该作业的详细信息自动填充控件。但是，新建作业按钮不显示面板。

我尝试使用自动控制（内置在 AJAX 工具包中），使用 .show 和 .hide 方法手动控制后端弹出窗口，并使用应该找到并弹出所需面板的 Javascript 客户端脚本。在所有这些情况下，作业列表都隐藏在一层灰色之后，但面板仍然隐藏。

我错过了什么？

ASP 代码：

```
<asp:Button runat = "server" ID = "btnNewJobDummy" CssClass = "invisible" />
<asp:ModalPopupExtender ID="mpeNewJob" runat="server" TargetControlID = "btnNewJobDummy" PopupControlID = "pnlJobEntry" BackgroundCssClass = "modalBackground" /> 
```

后面的代码：

```
Private Sub btnNewJob_Click(sender As Object, e As System.EventArgs) Handles btnNewJob.Click
    Session("Mode") = "Add"
    Session("TagMode") = "NewJob"
    tbAddDate.Text = DateTime.Today.ToShortDateString
    imgFeaturedPhoto.ImageUrl = "~/JobImages/not-available.jpg"
    tbAddCenterStoneQty.Text = "1"
    Dim dtCenterStone As New DataTable
    Dim dtImages As New DataTable
    Session("CenterStones") = Nothing
    dtCenterStone = Session("CenterStones")
    gvCenterStones.DataSource = dtCenterStone
    gvCenterStones.DataBind()
    gvCenterStonesEdit.DataSource = dtCenterStone
    gvCenterStonesEdit.DataBind()
    Session("Images") = Nothing
    dtImages = Session("Images")
    lvPhotoGallery.DataSource = dtImages
    lvPhotoGallery.DataBind()
    'lvPhotoGallery.FindControl("btnMakeDefault").Visible = False
    ddlAddCenterStoneSource.SelectedValue = "2"
    'btnJobEntryCancel.Visible = False
    btnJobEntryCancel.CssClass = "invisible"
    'btnNewJobCancel.Visible = True
    btnNewJobCancel.CssClass = "visible"
    ResetTagPanel()
    Session("mpeNewJob") = "show"
    ShowModalPopups("mpeNewJob", "show")
    'mpeNewJob.Show()
End Sub 
```

# git - 仅返回更改日志和文件名的 Git 命令

> ID：16044242
> 
> 赞同：0
> 
> 时间：2013-04-16T18:16:20.520
> 
> 标签：git, bash, changelog

我正在做一些数据挖掘研究，我需要能够从 git 存储库中提取所有文件名及其相关的更改日志，并将它们通过管道传输到文本文件。

我有兴趣解析每个文件的更改日志并找到与之关联的 bugzilla 错误 ID。

到目前为止，命令：

```
git log --stat > gitoutputlog1.txt 
```

让我接近我想要的，但那里有很多我不想要的信息，并且可能会混淆我的解析器。

有人对 bash 脚本或命令有什么想法，可以具体而干净地做我想做的事吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T18:54:02.757

我正在努力实现我对问题的理解。它可能不是您想要的，但我认为您可以从中得出确切的答案。

要获取所有文件名，您必须克隆存储库。

```
git clone http://github.com/{user}/{project} {dir_name} 
```

现在，您可以编写一些这样的 shell 脚本

```
#!/bin/bash
FILES=/path/to/* #Give path to the directory you have cloned
for file in $FILES
do
  # $file store current file name
  git log $file --oneline >> somefile.txt 
done 
```

我直接将输出`git log $file --oneline`放在输出文件中。您需要对其进行操作并提取 bugzilla id 并正确发送到输出文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T14:23:31.450

因此，对于每个提交，您都需要所有已更改文件的列表，并且您需要提交消息中的错误编号。

```
doit() {
    bugnumber=$(git cat-file -p $1 | your-message-parser-here)
    git diff --name-only $1^! | xargs -n1 -d\\n echo $bugnumber 
}
git rev-list | doit 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T14:48:50.120

`git log --name-only`返回易于解析的格式，每个文件名都在单独的行上，并且没有任何花哨的格式。您还可以查看`--format`参数，它接受一个格式字符串，其中`%X`包含所有信息位的占位符。

# objective-c - 一个按钮和三个文本框的什么方法

> ID：16044243
> 
> 赞同：1
> 
> 时间：2013-04-16T18:16:25.097
> 
> 标签：objective-c

我需要让一个按钮知道选择了哪个文本框，我已经标记了文本框 1、2 和 3，我是这个编程的新手，我需要知道我是否使用了正确的方法，其余的可能没什么帮助为了这。这是我到目前为止所拥有的：

```
- (void)textFieldDidBeginEditing:(UITextField *)textField{
    if (textField.tag == 1) {

    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T18:17:55.877

您可以直接向您的`textField's`插座查询。

```
- (void)textFieldDidBeginEditing:(UITextField *)textField{
    if (textField == nameTextField) { //nameTextField is an outlet
         currentlySelected=@"nameTextField"
    }
    else if (textField == salryTextField) { //salaryTextField is an outlet
         currentlySelected=@"nameTextField"
    }
} 
```

两名代表

```
- (void)textFieldDidBeginEditing:(UITextField *)textField; // when gets focus
- (void)textFieldDidEndEditing:(UITextField *)textField;   // when lost focus 
```

您可以创建一个`NSString *currentlySelected`并基于方法调用设置 if-else 中的值。

# .net - 通过 net.tcp 的双工 WCF 服务失败

> ID：16044245
> 
> 赞同：1
> 
> 时间：2013-04-16T18:16:30.563
> 
> 标签：.net, wcf

我有一个通过 net.tcp 连接到的双工 WCF 服务。当服务首次启动时，我可以调用它并接收回调，但几分钟后我开始从服务中收到此错误：

> 传输数据时发生 TCP 错误（995：I/O 操作已因线程退出或应用程序请求而中止）。

我尝试在 IIS 和 Windows 服务中托管该服务，但两者都出现相同的错误。在我的跟踪日志中，我看到异常之前有一个 SocketConnection aborted 警告。

这是什么原因造成的？

我用来跟踪我从[这里](http://idunno.org/archive/2008/05/29/wcf-callbacks-a-beginners-guide.aspx)获得的服务的订阅者的方法。如果需要，我可以发布我的配置，但如果不是，我不想弄乱我的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T18:31:47.660

有2个方面：

1.  为什么发生异常

可能[这篇](http://forums.asp.net/t/1718314.aspx/1)文章可以提供帮助（简而言之 - 在他的情况下 Antivirus 负责错误）

1.  连接和客户端回调会发生什么 - 未由故障包装的异常将“终止”连接，并且您的客户端将无法重新使用它，它将收到“中止”错误。

您需要在客户端订阅失败的呼叫，然后重新初始化您的连接。

喜欢

```
((IClientChannel)YourClient).Faulted += InnerChannel_Faulted;
}

void InnerChannel_Faulted(object sender, EventArgs e)
{

    TWLogger.Write("Faulted event ... ");
    reconnect();
} 
```

另外，我建议使用 Fault 包装所有服务器端异常

# .net - 哪些 .NET 程序集将用于多个 DLL

> ID：16044248
> 
> 赞同：1
> 
> 时间：2013-04-16T18:16:31.290
> 
> 标签：.net, clr, .net-4.5

在 Stack Overflow 和其他网站上研究了当您的应用程序中使用多个版本时将加载哪些 .NET 程序集后，我感到很困惑。例如，主要的可执行程序集是使用 .NET 4.5 编译的。引用的程序集是使用 .NET 2.0 编译的。在这种情况下，应用程序运行时是否会同时使用 .NET 4.5 和 .NET 2.0 程序集？假设没有非托管代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-05-23T08:31:02.493

在您的示例中，两个程序集都将根据其兼容的调用引用加载和运行。根据设计，可以从 .NET 4 程序集调用 .NET 2.0。

Microsoft 的这篇基础文章很好地解释了这一点：

[https://msdn.microsoft.com/en-us/library/ms973231.aspx](https://msdn.microsoft.com/en-us/library/ms973231.aspx)

# coldfusion - 如何让 setHeader 覆盖现有标题？

> ID：16044249
> 
> 赞同：8
> 
> 时间：2013-04-16T18:16:33.980
> 
> 标签：coldfusion, coldfusion-9, chromelogger

我正在开发[ChromeLogger](http://craig.is/writing/chrome-logger)扩展（[无耻插件](https://github.com/s992/chromelogger-cf)）的 CF 接口，它使用 HTTP 标头将数据从服务器端语言记录到 Chrome 控制台。

在请求过程中，`log()`可以多次调用该方法。对于每个调用，我都以 ChromeLogger 正确显示数据所需的格式编写标题。在 CF10 中，这可以正常工作 - 每次后续调用都会`setHeader()`覆盖先前设置的同名标头。然而，在 CF9 中，我看到多个具有相同名称的标题。

此示例代码演示了该问题：

```
<cfscript>
pc = getPageContext().getResponse();
pc.setHeader( "test-header", "value 1" );
pc.setHeader( "test-header", "value 2" );
pc.setHeader( "test-header", "value 3" );
</cfscript> 
```

在 CF9 中，我看到三个名为“test-header”的标头，每个标头都有自己的值。在 CF10 中，我看到一个名为“test-header”的标头，其值为“value 3”。根据此方法的[Java 文档](http://docs.oracle.com/javaee/5/api/javax/servlet/http/HttpServletResponse.html#setHeader%28java.lang.String,%20java.lang.String%29)，后者是正确的（强调我的）：

> 设置具有给定名称和值的响应标头。**如果已经设置了标头，则新值将覆盖前一个值**。containsHeader 方法可用于在设置标头值之前测试标头是否存在。

使用`cfheader`标签有相同的结果，大概是因为它只是包装了`setHeader()`方法。

我知道我可以在请求过程中建立标头，然后`setHeader()`在最后通过调用一次`onRequestEnd()`，但我希望这个组件尽可能独立 - 最终用户需要的越少修改他们的代码来实现它，更好。

CF9 中还有其他方法可以覆盖现有的标头吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T18:37:51.120

看起来它可能是 ColdFusion 9 中的一个错误。 [https://bugbase.adobe.com/index.cfm?event=bug&id=3041696](https://bugbase.adobe.com/index.cfm?event=bug&id=3041696) 这个错误是 Adam Cameron 在 2010 年 6 月为 9.0 版输入的（据我所知）告诉）。它的状态为“延迟”，原因为“NotEnoughTime”。

# api - 可以做些什么来使 OpenGL 保持最新状态？

> ID：16044250
> 
> 赞同：0
> 
> 时间：2013-04-16T18:16:35.587
> 
> 标签：api, opengl, glsl, upgrade, glew

在尝试使用它提供的新功能（如*顶点缓冲区对象）在***OpenGL**中创建程序时，我最终遇到了一个问题：我的系统不支持**OpenGL API中的许多新功能。**这些不受支持的函数包括**glCreateShader**、**glDeleteShader**和**glGenBuffers**等函数。

 *******如何让 OpenGL 保持最新？如何升级它，如何启用扩展/功能？我正在运行**Linux Mint 13 (Maya)**，并且我使用**GLEW**来启用*OpenGL 扩展*。尽管我使用**Linux**，但我希望答案也能涵盖**Windows**和**Mac**等其他平台。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T07:18:49.290

这种情况下的问题可能是驱动程序不是最新的。**在调用函数glewInit**以初始化**GLEW**并启用**OpenGL**扩展之前，也有可能未正确创建 OpenGL 上下文。这里就是这种情况。*******

# c# - 从子表单引用父表单

> ID：16044251
> 
> 赞同：0
> 
> 时间：2013-04-16T18:16:37.267
> 
> 标签：c#

我有一个 MainForm，我在其中打开另一个表单，现在我有一个类，它为我提供了一些我编写的函数一个函数获取主表单的引用以及打开的表单和其他参数的引用我在打开的表单中调用函数并引用 MainForm 我使用 this.Parent 但我收到错误“对象引用未在对象的实例上设置”。

*ClientSide 是我的 MainForm *LogIn 是我在 mainform 中打开的表单，我在其中调用 RunListener 方法

```
class ServicesProvider
{
 public static void RunListener(ClientSide MainForm,LogIn LogForm,System.Net.Sockets.TcpClient Client)
    {
     //Doing my things with the parameters
    }
} 
```

此代码在登录表单中

```
private void BtLogIn_Click(object sender, EventArgs e)
    {
     Thread Listener = new Thread(delegate()
                 {
                   ServicesProvider.RunListener((ClientSide)this.Parent,this,tcpClient);
                 });
                Listener.Start();
    } 
```

问题是，每当我调试时，我都会收到我告诉你的错误，我发现代码“（ClinetSide）this.parent”指的是null。我需要参考主表单才能对其进行处理并更改一些值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T18:26:22.780

默认情况下，表单不知道“父级”，您必须告诉它。例如：

```
LogForm.ShowDialog(parentForm); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T18:29:34.180

假设 Form1=Parent

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Text;
using System.Windows.Forms;

namespace childform
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        private void button1_Click(object sender, EventArgs e)
        {
            Form2 tempDialog = new Form2(this);
            tempDialog.ShowDialog();
        }

        public void msgme()
        {
            MessageBox.Show("Parent Function Called");
        }

    }
} 
```

和 Form2=Child

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Text;
using System.Windows.Forms;

namespace childform
{
    public partial class Form2 : Form
    {
        private Form1 m_parent;

        public Form2(Form1 frm1)
        {
            InitializeComponent();
            m_parent = frm1;
        }

        private void button1_Click(object sender, EventArgs e)
        {
            m_parent.msgme();
        }
    }
} 
```

# eclipse-emf - 更改 EditPar 的位置和背景颜色

> ID：16044253
> 
> 赞同：1
> 
> 时间：2013-04-16T18:16:38.537
> 
> 标签：eclipse-emf, eclipse-gmf

我有一个 EditPart，我需要更改它的位置和背景颜色。我已设法使用以下方法更改其位置：

```
ChangeBoundsRequest request = new ChangeBoundsRequest(RequestConstants.REQ_MOVE);
    request.setEditParts(editPart);
    request.setMoveDelta(newLocation);

    Command cmd = editPart.getCommand(request);
    if (cmd != null && cmd.canExecute()) {
        cmd.execute();
    } 
```

我设法通过以下方式更改背景颜色：

```
editPart.getContentPane().setBackgroundColor(color); 
```

但是每当我关闭并重新打开应用程序时，我所做的颜色更改就会消失！

我怎样才能提交背景颜色！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T23:05:41.857

您需要执行以下操作：

1-启用元素的“填充颜色”： http://gmfsamples.tuxfamily.org/wiki/doku.php?id= [gmf_tutorial9](http://gmfsamples.tuxfamily.org/wiki/doku.php?id=gmf_tutorial9)

2- 通过以下方式更改背景颜色： [http ://wiki.eclipse.org/GMF_Newsgroup_Q_and_A#How_do_I_change_the_color_of_a_line_using_an_action.3F](http://wiki.eclipse.org/GMF_Newsgroup_Q_and_A#How_do_I_change_the_color_of_a_line_using_an_action.3F)

而不是使用“ID_LINECOLOR”，使用“ID_FILLCOLOR”来改变背景颜色。

# hadoop - Hadoop Partitioner 中的自定义计数器

> ID：16044257
> 
> 赞同：2
> 
> 时间：2013-04-16T18:17:07.940
> 
> 标签：hadoop, mapreduce, partitioner

我想在自定义分区器（甚至是默认的 HashPartitioner）中捕获一些关于键及其值的信息。

我可以通过访问“上下文”变量在映射器和减速器中使用自定义计数器。但是，在 Partitioner 内部，无法访问“context”变量。

有没有办法：-1- 从 Partitioner 访问“context”变量？或-2-如何向分区器添加计数器？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T19:38:00.357

通过分区器的每个键/值对要么（1）由映射器写入上下文，要么（2）将传递给reducer的reduce()方法。您可以将代码放在这两个位置中的任何一个中，以编写自定义计数器并将其递增到上下文。

如果您必须在分区器中编写代码，请尝试让您的分区器实现 JobConfigurable。这应该使 hadoop 在第一次实例化分区器时使用 JobConf 对象调用您的分区器。您可以将信息放入您的配置中（例如将信息输出到的顺序文件或文本文件的名称）并以这种方式将其传递给您的分区器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T23:56:08.837

无法访问分区器中的上下文（因此也无法访问计数器）。

不知道为什么你不能像 Chris Gerken 建议的那样在映射器中添加你的逻辑，但是类似/替代的方法是创建一个映射包装类，在其中创建一个 Mapper.Context 包装类，然后委托给实际的 map 方法你想要的 Mapper 类与这个包装的上下文 - 然后你可以拦截 context.write 方法调用并做你想做的事 - 与仅仅更新映射器代码没有任何不同。

# makefile - 使用某些选项运行配置时隐藏目标

> ID：16044259
> 
> 赞同：1
> 
> 时间：2013-04-16T18:17:10.230
> 
> 标签：makefile, configure, autotools

我的 configure.ac 让用户指定`--enable-monitor`. 在一个子目录中，我有一个 Makefile.in，其中包含一定数量的要构建的目标。我希望其中一些仅在用户指定时可用`--enable-monitor`

换句话说，我希望用户只能`make monitor`在`./configure`使用`--enable-monitor`.

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T14:44:22.373

将其放入以下内容就足够了`configure.ac`：

```
AC_ARG_ENABLE([monitor],[help string],[use_monitor=yes])
AM_CONDITIONAL([USE_MONITOR],[test "$use_monitor" = yes]) 
```

这在 Makefile.am 中：

```
if USE_MONITOR
bin_PROGRAMS = monitor
else
monitor:
    @echo Target not supported >&2 && exit 1
endif 
```

带有显式监控目标的 else 子句用于覆盖 Make 可能使用的默认规则。请注意，“帮助字符串”应该更有用并使用 构造`AS_HELP_STRING`，但为简洁起见，这些细节已被省略。

- 编辑 -

由于未使用 automake，您可以将`AM_CONDITIONAL`configure.ac 中的行替换为以下内容：

```
AC_SUBST([USE_MONITOR],[$use_monitor]) 
```

然后`Makefile.in`像这样进行检查：

```
monitor:
        @if test "@USE_MONITOR@" = yes; then \
            ... ; \
        else \
            echo Target not supported >&2 && exit 1; \
        fi 
```

# ios - 将复选标记添加到类似于 Airplay 操作表的 UIActionSheet 按钮

> ID：16044260
> 
> 赞同：4
> 
> 时间：2013-04-16T18:17:15.507
> 
> 标签：ios, objective-c, uiactionsheet

我试图弄清楚如何在`UIActionSheet`.

我想模仿 AirPlay 操作表中的复选标记。根据我一直在阅读的内容，自定义这些按钮意味着访问 Apple 的私有 API，并使您面临在 App Store 中被拒绝的风险。

有没有一种安全的方法来添加这个复选标记？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T23:04:23.173

这个方法怎么样？

在按钮内放置一个带有“勾号”的标签并切换它。下面是一些代码来做到这一点。切换是通过 KVO 完成的，但可以以更简单的方式完成......

按钮通过 IB 连接`self.theButton`

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    // Create a 'tick' label
    CGRect rect;
    rect.size = CGSizeMake(17, 21);
    rect.origin.x = self.theButton.frame.size.width-17-10;
    rect.origin.y = (self.theButton.frame.size.height-21)/2;
    UILabel *label = [[UILabel alloc] initWithFrame:rect];
    label.text = [NSString stringWithCString:"\342\234\223" encoding:NSUTF8StringEncoding];
    label.backgroundColor = [UIColor clearColor];
    label.hidden = YES;

    // Put label inside the button
    [self.theButton addSubview:label];

    // Connect a observer on 'highlighted' (eq pressed basically)
    // could use another method to track 'selected'
    [self.theButton addObserver:self
                     forKeyPath:@"highlighted"
                        options:0
                        context:(__bridge void*)label];
}

// Toggle the 'tick' label
- (void)observeValueForKeyPath:(NSString *)keyPath
                      ofObject:(UIButton*)button
                        change:(NSDictionary *)change
                       context:(UILabel *)label
{
    if (button.highlighted)
        label.hidden = !label.hidden;
}

// Don't forget to cleanup
- (void)dealloc
{
    [self.theButton removeObserver:self forKeyPath:@"highlighted"];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-18T06:06:10.863

```
 NSString* strUrl=[MLControl shared].currentServerUrl;
    for( MLServerUrl *title in [MLControl shared].arrServerUrl)  {
        NSString* strShow=title.name;
        if ([strUrl isEqualToString: title.url]) {
            strShow=[NSString stringWithFormat:@"√ %@",strShow];
        }else{
            strShow=[NSString stringWithFormat:@"  %@",strShow];
        }

        [chooseImageSheet addButtonWithTitle:strShow];
    }

   // [[[chooseImageSheet valueForKey:@"_buttons"] objectAtIndex:0] setImage:[UIImage imageNamed:@"ic_check_black_18dp.png"] forState:UIControlStateNormal];
    chooseImageSheet.actionSheetStyle = UIActionSheetStyleDefault;
    [chooseImageSheet showFromRect:btnRc inView:sender animated:YES]; 
```

# python - Python：类似位的列表操作

> ID：16044261
> 
> 赞同：5
> 
> 时间：2013-04-16T18:17:16.343
> 
> 标签：python, list

我正在尝试 elementwise & 和 elementwise | 2 个 8 个 6 个二进制数字列表的列表，它的工作非常奇怪。c1 和 c2 以长度为 8 的元组开始，其中的元素是长度为 6 的元组，而 res 以 c1 的列表版本开始。

安定：

```
for x in range(8):
    for y in range(6):
        res[x][y] = (c1[:][x][y])*(c2[:][x][y]) 
```

排序：

```
for x in range(8):
    for y in range(6):
        res[x][y] = int(c1[:][x][y] or c2[:][x][y]) 
```

一个例子：

```
c1:        ((1, 0, 0, 0, 1, 1), (1, 1, 0, 0, 0, 1), (1, 1, 1, 0, 0, 0), (0, 1, 1, 1, 1, 0), (1, 0, 0, 0, 1, 1), (0, 1, 1, 0, 0, 0), (1, 1, 0, 1, 0, 0), (0, 1, 0, 0, 1, 0))
c2:        ((1, 0, 1, 1, 0, 0), (0, 1, 0, 1, 1, 0), (0, 1, 1, 0, 1, 0), (0, 0, 0, 0, 1, 1), (1, 1, 0, 0, 1, 0), (1, 0, 1, 0, 1, 0), (0, 0, 0, 1, 0, 1), (0, 0, 1, 0, 1, 0))
anding res:[[1, 0, 0, 0, 1, 0], [0, 1, 0, 0, 0, 0], [0, 1, 1, 0, 0, 0], [0, 0, 0, 0, 1, 0], [1, 0, 0, 0, 1, 0], [0, 0, 1, 0, 0, 0], [0, 0, 0, 1, 0, 0], [0, 0, 0, 0, 1, 0]]
oring res: [[1, 1, 0, 0, 1, 1], [1, 1, 0, 1, 1, 1], [1, 1, 1, 0, 1, 0], [0, 1, 1, 1, 1, 1], [1, 1, 0, 0, 1, 1], [1, 1, 1, 0, 1, 0], [1, 1, 0, 1, 0, 1], [0, 1, 1, 0, 1, 0]] 
```

c1 的其他输入可能会比第一个子列表更混乱。

编辑：这已经解决了。这很可能是代码其他部分中的别名问题，我最终使用了列表推导。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-04-16T18:25:17.153

你可以只使用[NumPy](http://www.numpy.org/)：

```
In [7]: import numpy as np
In [8]: c1 = np.array(c1)    
In [9]: c2 = np.array(c2)

In [10]: c1 & c2
In [11]: c1 | c2 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-04-16T18:27:07.797

为什么不简单地使用列表推导尝试这样的事情：

```
c1 = ((1, 0, 0, 0, 1, 1), (1, 1, 0, 0, 0, 1), (1, 1, 1, 0, 0, 0))
c2 = ((1, 0, 1, 1, 0, 0), (0, 1, 0, 1, 1, 0), (0, 1, 1, 0, 1, 0))

print('Bitwise or:  ', [[k | l for k, l in zip(i, j)] for i, j in zip(c1, c2)])
print('Bitwise and: ', [[k & l for k, l in zip(i, j)] for i, j in zip(c1, c2)]) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-16T19:11:29.187

你总是可以推出自己的课程：

```
class BitList(list):
    def anditems(self,other):
        return [se & so for se,so in zip(self,other)]

    def oritems(self,other):
        return [se | so for se,so in zip(self,other)]    

    def xoritems(self,other):
        return [se ^ so for se,so in zip(self,other)]    

print BitList([1,1,0,0,1,1]).xoritems([1,1,1,1,1,1])
    # [0, 0, 1, 1, 0, 0]
print BitList([1,1,0,0,1,1]).oritems([1,1,1,1,1,1])
    # [1, 1, 1, 1, 1, 1]
print BitList([1,1,0,0,1,1]).anditems([1,1,1,1,1,1]) 
    # [1, 1, 0, 0, 1, 1] 
```

然后只需分别处理嵌套的子列表：

```
c1=((1, 0, 0, 0, 1, 1), (1, 1, 0, 0, 0, 1), (1, 1, 1, 0, 0, 0), (0, 1, 1, 1, 1, 0), (1, 0, 0, 0, 1, 1), (0, 1, 1, 0, 0, 0), (1, 1, 0, 1, 0, 0), (0, 1, 0, 0, 1, 0))
c2=((1, 0, 1, 1, 0, 0), (0, 1, 0, 1, 1, 0), (0, 1, 1, 0, 1, 0), (0, 0, 0, 0, 1, 1), (1, 1, 0, 0, 1, 0), (1, 0, 1, 0, 1, 0), (0, 0, 0, 1, 0, 1), (0, 0, 1, 0, 1, 0))

print [BitList(t1).anditems(t2) for t1,t2 in zip(c1,c2)]
print [BitList(t1).oritems(t2) for t1,t2 in zip(c1,c2)] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-16T18:23:30.250

对我来说似乎没问题：

```
>>> c1 =  ((1, 0, 0, 0, 1, 1), (1, 1, 0, 0, 0, 1), (1, 1, 1, 0, 0, 0), (0, 1, 1, 1, 1, 0), (1, 0, 0, 0, 1, 1), (0, 1, 1, 0, 0, 0), (1, 1, 0, 1, 0, 0), (0, 1, 0, 0, 1, 0))
>>> c2 =  ((1, 0, 1, 1, 0, 0), (0, 1, 0, 1, 1, 0), (0, 1, 1, 0, 1, 0), (0, 0, 0, 0, 1, 1), (1, 1, 0, 0, 1, 0), (1, 0, 1, 0, 1, 0), (0, 0, 0, 1, 0, 1), (0, 0, 1, 0, 1, 0))
>>> res = [[None]*6 for _ in range(8)]
>>> for x in range(8):
...     for y in range(6):
...         res[x][y] = c1[x][y] & c2[x][y]
... 
>>> print res
[[1, 0, 0, 0, 0, 0], [0, 1, 0, 0, 0, 0], [0, 1, 1, 0, 0, 0], [0, 0, 0, 0, 1, 0], [1, 0, 0, 0, 1, 0], [0, 0, 1, 0, 0, 0], [0, 0, 0, 1, 0, 0], [0, 0, 0, 0, 1, 0]]
>>> for x in range(8):
...     for y in range(6):
...         res[x][y] = c1[x][y] | c2[x][y]
... 
>>> print res
[[1, 0, 1, 1, 1, 1], [1, 1, 0, 1, 1, 1], [1, 1, 1, 0, 1, 0], [0, 1, 1, 1, 1, 1], [1, 1, 0, 0, 1, 1], [1, 1, 1, 0, 1, 0], [1, 1, 0, 1, 0, 1], [0, 1, 1, 0, 1, 0]]
>>> 
```

我使用`&`and`|`作为位运算符，但它真的不应该有所作为，因为你只是使用 1 和 0。我怀疑您初始化`res = [[None]*6]*8`（或类似）导致您的一些子列表引用相同的列表。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-01-07T20:23:00.397

```
def bitwise(a, b, core): 
  return [int(core(pred, true)) for pred, true in zip(pred_list, true_list)]

pred_list = [1, 1, 0, 0]   # prediction
true_list = [1, 0, 1, 0]   # true

print("| true pos")
true_positive = bitwise(pred_list, true_list, lambda pred, true: pred==1 and true==1) 
print(true_positive) 
```

这是我的 F_Score 的一部分。

# rebus - 如何使用 Rebus 过滤消息？

> ID：16044262
> 
> 赞同：1
> 
> 时间：2013-04-16T18:17:19.293
> 
> 标签：rebus

处理程序接收到的每条消息都包含聚合根的整个状态。然后系统能够根据这些数据执行所需的操作。在我的场景中，根据消息中的数据授予访问权限，例如对房间 A 和 B 的访问权限。一条消息包含整组已授予的访问权限。这些消息可能会乱序到达，因为像 MSMQ 这样的消息传递系统不保证有序传递。

消息 #1 授予对房间 A 和 B 的访问权限，但消息 #2 仅授予对房间 A 的访问权限的场景。如果它们无序到达，则授予房间 A 的访问权限，然后再授予房间 A 的访问权限& B. 这不是预期的结果。只应允许进入房间 A。每条消息都包含一个时间戳，该时间戳在发布时设置。我想使用此时间戳来删除乱序到达的*旧*消息，例如，如果消息 #2 在消息 #1 之前到达，则应该丢弃消息 1#。

我可以在每个处理程序方法中实现这个过滤器，但这会很乏味，所以我希望 Rebus 有一些类似[EAI 消息过滤器](http://www.enterpriseintegrationpatterns.com/Filter.html)的东西？

我愿意接受其他选择/实施吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T18:48:33.540

我不确定我是否理解您为什么要在消息中传递整个聚合根，但除此之外，还有一种简单的方法可以让 Rebus 使您能够对消息进行排序。

我建议你让你的所有消息实现一个通用接口来捕获这个特定方面，例如

```
public interface IHaveSequenceNumber
{
    int SequenceNumber { get; }
} 
```

然后，您创建一个简单的消息处理程序，`IHaveSequenceNumber`在遇到旧消息时处理和中止处理程序管道，例如

```
public class WillDiscardOldMessages : IHandleMessages<IHaveSequenceNumber>
{
    public void Handle(IHaveSequenceNumber messageWithSequenceNumber)
    {
        if (IsTooOld(messageWithSequenceNumber))
        {
            MessageContext.GetCurrent().Abort(); //< make this the last handler
        }
    }
} 
```

然后 - 非常重要:) - 你确保你的消息过滤器总是在调度开始时首先在处理程序的管道中：

```
Configure.With(...)
    .Transport(...)
    .SpecifyOrderOfHandlers(s => s.First<WillDiscardOldMessages>())
    .(...) 
```

我将把上面的方法的实现`IsTooOld()`留给你——如果你的端点中有一个工作线程，这可能会很简单，而并发处理这些事情并不是微不足道的。

那有意义吗？

# encoding - Play Framework 2.1 的字符集编码错误

> ID：16044263
> 
> 赞同：2
> 
> 时间：2013-04-16T18:17:26.403
> 
> 标签：encoding, character-encoding, playframework, playframework-2.0

我有一个以 ISO-8859-1 编码接收参数的 Web 服务。

但是当我尝试从请求中读取它时，我得到了这个字符：

����</p>

我已经尝试了所有这些方法，但是没有一个将给定的字符串转换为预期的字符串（áéíóú）：

```
 val a = new String(_html.getBytes());
    val b = new String(_html.getBytes(), "UTF-8")
    val c = new String(_html.getBytes(), "ISO-8859-1")
    val d = new String(_html.getBytes("ISO-8859-1"), "UTF-8")
    val e = new String(_html.getBytes("ISO-8859-1"), "ISO-8859-1")
    val f = new String(_html.getBytes("UTF-8"), "UTF-8")
    val g = new String(_html.getBytes("UTF-8"), "ISO-8859-1") 
```

这是我的行动：

```
 val inboundMessageForm = Form(
    mapping(
      "html" -> text)(InboundMessage.apply)(InboundMessage.unapply))

  def forward = Action(parse.multipartFormData) { implicit request =>
    val inboundMessage = inboundMessageForm.bindFromRequest.get

        // inboundMessage.html =>  �����
   } 
```

我能做些什么来解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T22:49:23.020

这是这个问题的答案：

[https://groups.google.com/forum/?fromgroups=#!topic/play-framework/R0ayxNuzR74](https://groups.google.com/forum/?fromgroups=#!topic/play-framework/R0ayxNuzR74)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-16T18:50:59.690

如果您正在运行 Windows，则默认编码（至少在美国，不确定世界其他地区）实际上是“windows-1252”，而不是“ISO-8859-1”。您也可以尝试“UTF-16”，以防这些字符不包含在“UTF-8”编码中（Windows 以外的大多数东西都使用该编码）。

# batch-file - 使用 reg delete 删除注册表项

> ID：16044267
> 
> 赞同：1
> 
> 时间：2013-04-16T18:17:51.783
> 
> 标签：batch-file, registry, dos

我正在尝试使用`reg delete`批处理命令删除注册表值。我遇到的问题是我无法删除该值。这是我正在尝试的：

```
REG DELETE "HKLM\SOFTWARE\Microsoft\Windows NT\CurrentVersion\Ports\" /v C:\convertdoc\output\SilentPrintTemp\126017829image-gif3.ps 
```

理想情况下，我想删除所有条目：

```
REG DELETE "HKLM\SOFTWARE\Microsoft\Windows NT\CurrentVersion\Ports\" /v  C:\convertdoc\output\SilentPrintTemp\*.ps 
```

我已经尝试了几种不同的方式和不同的参数。通常双“”在键的末尾停止命令。所以也许我的语法是错误的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T20:20:51.303

**编辑：**

使用`.bat`扩展名保存并运行它：

```
@echo off
setlocal
set "ports=HKLM\SOFTWARE\Microsoft\Windows NT\CurrentVersion\Ports"

rem get only the first token of each line of "reg query"
for /f %%I in (
    'reg query "%ports%"'
) do (
    echo(%%I | findstr /i "c:\\convertdoc\\output\\silentprinttemp\\.*\.ps" >NUL && (
        rem (if "findstr" didn't exit with an abnormal error code)
        echo Deleting item %%I
        reg delete "%ports%" /v "%%I" /f
    )
) 
```

# safari - 暂停/恢复（范围特定请求）下载在 safari 上不起作用

> ID：16044270
> 
> 赞同：0
> 
> 时间：2013-04-16T18:18:02.573
> 
> 标签：safari, download, resume

我已经使用此处给出的代码在 vb.net 上实现了下载暂停/恢复[VB.net Forum](http://www.devx.com/dotnet/Article/22533) 它适用于 IE、Chrome、Firefox 和免费下载管理器，但不适用于 Safari。我尝试使用托管在 apache 服务器后面的 tomcat 的不同文件对其进行调试，并比较服务器返回的标头。唯一的区别是 Etag 我没有为 vb.net 上的每个文件生成唯一的。我用谷歌搜索了很多，但我找不到任何特定于 safari 的东西。我是否缺少任何特定于 Safari 的标头？我不介意解决方案是否在任何其他平台上，我会将其转换为 vb

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-17T05:44:33.280

这是因为一些 safari 错误，一旦我在 Mac 和 windows 上更新了 safari，它就可以工作了。

# c++ - 尝试将 stats 对象添加到 DoublyLinkedList

> ID：16044271
> 
> 赞同：0
> 
> 时间：2013-04-16T18:18:08.603
> 
> 标签：c++, object, constructor, append

我正在尝试添加一个 Stats 对象，该对象将是具有名字、姓氏、级别和经验的玩家。我在 Stats.h 中进行了设置。但我的问题主要是我无法弄清楚如何将统计播放器添加到列表中。这是我正在尝试做的事情：

```
Stats stats;
DoublyLinkedList<Stats> list;
DoublyLinkedListIterator<Stats> itr = list.getIterator();

int main ()
{
    Stats s1 = ("John","Campbell",0,0);//This causes error.
    //No suitable conversion between int and string.

    list.Append(s1);
    list.Append(144);
    list.Append(1);
    list.Append(1111);
    list.Prepend(1000); 
```

我真的不知道我是否正确地尝试了它，或者我是否完全偏离了路线。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T18:20:05.407

你可能的意思是：

```
Stats s1("John","Campbell",0,0); 
```

假设它`Stats`有一个接受这四个参数的构造函数。

如果`Stats`是`struct`包含这四种数据类型的 POD，这将起作用：

```
Stats s1 = {"John","Campbell",0,0}; 
```

如果您使用的是 C++11，则任何一种情况都适用：

```
Stats s1 {"John","Campbell",0,0}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T18:20:29.967

```
Stats s1 = ("John","Campbell",0,0);//This causes error. 
```

你应该做这个

```
Stats s1("John","Campbell",0,0); 
```

# ios - 如何将数据传递到 tabBarController 上的多个视图控制器

> ID：16044274
> 
> 赞同：0
> 
> 时间：2013-04-16T18:18:20.140
> 
> 标签：ios, objective-c, cocoa-touch, segue, tabbarcontroller

我正在重做我的应用程序的用户界面以使用表格视图和标签栏控制器来分解数据量以输入 4 个逻辑部分，而不是 UITextFields 和开关的一个长滚动屏幕。

以前我会使用 prepareForSegue 中的以下代码将新的托管对象传递给新的视图控制器：

```
 if ([[segue identifier ] isEqualToString:@"addDiveSite"]) {
    //
    UINavigationController *navController = segue.destinationViewController;

    AddEditDiveSiteViewController *adsvc = (AddEditDiveSiteViewController *) navController.topViewController;

    adsvc.navigationItem.title=@"Add Site"; 
```

视图控制器嵌入在导航控制器中，我通过询问 topviewcontroller 来获取它 - 因为只有一个屏幕。

现在有了标签栏控制器，我有 4 个屏幕可以输入数据。

我知道我可以替代：

```
 if ([[segue identifier] isEqualToString:@"addDiveSite"]){

    UITabBarController *tabController =segue.destinationViewController  ;

    AddEditDiveSiteViewController *adsvc =(AddEditDiveSiteViewController *)[[tabController customizableViewControllers] objectAtIndex:0];

DiveSite *newDiveSite =(DiveSite*) [NSEntityDescription insertNewObjectForEntityForName:@"DiveSite" inManagedObjectContext:[self managedObjectContext]];

    adsvc.currentSite = newDiveSite; 
```

但这只会让我将数据传递给 4 个选项卡之一上的属性，我需要在所有 4 个选项卡上都可以访问它。

正确的方法是有 4 种变体：

```
 AddEditDiveSiteViewController *adsvc =(AddEditDiveSiteViewController *)[[tabController customizableViewControllers] objectAtIndex:0]; 
```

索引处的 4 个选项卡/对象中的每一个都有一个？

或者我应该看子类化 UITabBarController 并给它一个属性来传递数据，如果是这样，从“父”UITabBarController 获取属性的格式是什么？

还是有完全不同的方法？

感谢您花时间阅读和/或回复此内容

编辑

最后采用了以下似乎工作正常的方法

对于视图 2,3 和 4，我抓取它们所在的 UITabBarController 并获取其控制器数组。然后我得到数组中的第一项并创建一个指向我需要访问的属性的指针。

当你知道要寻找什么时。

希望这可以帮助那里的人

# python - 使用 Python 检查 Linux 目录权限

> ID：16044276
> 
> 赞同：1
> 
> 时间：2013-04-16T18:18:39.690
> 
> 标签：python, linux, filesystems

我有一个有趣的场景，我想获得一些关于实施的专家建议。我有一个在 Linux 上运行的 Python 应用程序，它需要根据组权限返回单个目录。

例如，Linux 文件系统如下所示：

```
/Directory/Apple
/Directory/Beta
/Directory/Carotene 
```

/etc/group 中有一个用于 Apple、Beta 和 Carotene 的组。这些组权限分配给每个目录（Apple 目录只能由 Apple 组的成员查看/执行等）。登录用户只能是一个组（Apple/Beta/Carotene）的成员，我需要能够在不引发异常的情况下确定用户可以访问哪个目录。我不能在 Python 中使用组成员资格调用，因为上面的目录结构是远程安装的文件系统。

所以为了简化这一点：如果用户是 Beta 组的成员，我需要统计 /Directory 内的每个子目录，然后只返回一个路径（在这个例子中 /Directory/Beta 因为用户是组的成员目录）。

我认为 os.stat 是一种很好的方法，但如果可能的话，我想看看其他一些实现。

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T18:22:17.373

要确定特定目录是否可访问，请使用`os.access`.

```
os.access('/Directory/Apple', os.R_OK) 
```

要检查 的所有直接子目录`/Directory`，请尝试以下循环：

```
def find_my_group_directory():
  #UNTESTED
  root, dirs, _ = next(os.walk('/Directory'))
  for dir in dirs:
    if os.access(os.path.join(root, dir), os.R_OK):
      return os.path.join(root, dir)
  return None 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T18:39:34.607

请求宽恕比请求许可更容易（[EAFP](http://docs.python.org/3.3/glossary.html)）。检查目录是否可访问：

```
import os
def accessible(dir):
    try:
        os.listdir(dir)
    except OSError:
        return False
    return True
print(accessible('/root')) 
```

要检查是否允许目录的所有子目录，请在`for`循环中应用此函数。

# overlap - 数据位置设置为右侧时的 div 重叠工具提示

> ID：16044280
> 
> 赞同：1
> 
> 时间：2013-04-16T18:18:46.597
> 
> 标签：overlap, intro.js

我正在尝试设置 intro.js，但是当我尝试将工具提示的数据位置设置为“正确”时遇到问题。当我这样做时，我试图在一个步骤中突出显示的 div 或段落实际上与工具提示重叠，因此它的一部分被隐藏了。

[如果您查看此页面](http://www.insurancethoughtleadership.com/index.php/inc/)上的第 3 步，您就会明白我的意思。

谁能帮我解决这个问题？我远非 javascript 和 css 专家，所以我希望有人能指出我的错误。

提前感谢任何人可以提供的任何帮助 - 我真的很感激！

坦率

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T06:40:22.630

问题与目标元素类型有关，因为您使用的是`p`标签。

尝试将作者元素类型从更改`p`为`div`，然后重试。我认为这种改变将解决问题。

# ruby-on-rails-3.2 - 重写路由方法

> ID：16044283
> 
> 赞同：0
> 
> 时间：2013-04-16T18:18:51.880
> 
> 标签：ruby-on-rails-3.2

所以我有这个：

```
match car_dealers/years/:id , to: 'car_dealers#years , via: :get 
```

无论如何我可以重写它并用那个`resource`或`resources`语法写它吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T18:24:43.663

也许是这样的：

```
resources :car_dealers do
  match 'car_dealers/years/:id' => 'car_dealers#years', :via => :get
end 
```

有关路线和资源的更多信息，请参阅*[本指南](http://guides.rubyonrails.org/routing.html#resource-routing-the-rails-default)*。

# mysql - mysql中的自定义排序

> ID：16044284
> 
> 赞同：1
> 
> 时间：2013-04-16T18:18:55.023
> 
> 标签：mysql, sql, database, sorting

下面的数据是一个按升序排列的字符串列：

```
1/44/104/66
1/44/104/66/137
1/44/104/66/138
1/44/104/66/139
1/44/104/66/140
1/44/104/66/141
1/44/104/66/142
1/44/104/66/143
1/44/104/66/67
1/44/104/66/68
1/44/104/66/69 
```

但我想这样排序：

```
1/44/104/66
1/44/104/66/67
1/44/104/66/68
1/44/104/66/69
1/44/104/66/137
1/44/104/66/138
1/44/104/66/139
1/44/104/66/140
1/44/104/66/141
1/44/104/66/142
1/44/104/66/143 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T20:01:00.873

不是一个漂亮的查询，但它应该做你需要的：

```
SELECT s
FROM
  yourtable
ORDER BY
  s + 0,
  CASE WHEN LENGTH(s)-LENGTH(REPLACE(s, '/',''))>0
       THEN SUBSTRING_INDEX(SUBSTRING_INDEX(s, '/', 2), '/', -1)+0
       ELSE 0 END,
  CASE WHEN LENGTH(s)-LENGTH(REPLACE(s, '/',''))>1
       THEN SUBSTRING_INDEX(SUBSTRING_INDEX(s, '/', 3), '/', -1)+0
       ELSE 0 END,
  CASE WHEN LENGTH(s)-LENGTH(REPLACE(s, '/',''))>2
       THEN SUBSTRING_INDEX(SUBSTRING_INDEX(s, '/', 4), '/', -1)+0
       ELSE 0 END,
  CASE WHEN LENGTH(s)-LENGTH(REPLACE(s, '/',''))>3
       THEN SUBSTRING_INDEX(SUBSTRING_INDEX(s, '/', 5), '/', -1)+0
       ELSE 0 END 
```

请[在此处](http://sqlfiddle.com/#!2/3e5e3/2)查看小提琴。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T18:21:09.480

对于您拥有的数据，这应该有效：

```
order by length(col), col 
```

但是，这假设唯一的区别在于最后一列。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T18:33:06.197

您可以尝试以下方式：

```
select
    Name
from TableOne
ORDER BY Cast(Replace(Name, "/", "") as UNSIGNED) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-16T18:33:27.547

```
SELECT * FROM myTable 
ORDER BY CAST(SUBSTRING_INDEX(DATA_COLUMN,"/",-1) AS UNSIGNED) ; 
```

这个怎么运作 ：

1：在您的原始顺序中，顺序不正确，因为它是按字典顺序比较字符串，而您希望基于整数值进行排序。

2.. 在此解决方案中，`SUBSTRING_INDEX`提取 之后的最后一个值`/`，然后将其转换为整数以提供所需的顺序。

3.. 您可以将相同的解决方案扩展到数据模式中的倒数第二个、倒数第三个数字。

# sql - 逗号分隔值与 oracle Query

> ID：16044291
> 
> 赞同：1
> 
> 时间：2013-04-16T18:19:20.627
> 
> 标签：sql, database, oracle

我有桌子

```
id product     sharedwith  createdby   proddesc
1 100           78          71          ABC
2 200           73,45,46    71          LMN
3 300           45,46       78          IJK 
```

我不会展示所有由 78 创建并与 78 共享的产品

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T18:21:53.533

```
where createdby = 78 or instr(','||sharedwith||',', ',78,') > 0 
```

# svn - 表明subversion中的新文件实际上是一个副本

> ID：16044293
> 
> 赞同：1
> 
> 时间：2013-04-16T18:19:26.860
> 
> 标签：svn, version-control, tortoisesvn

假设我的 Subversion 存储库中有一个名为`MyClass.cs`. 随着时间的推移，`MyClass`已经发展到我想将其拆分为两个单独的文件的地步，但我需要保留每一行代码的历史记录。

我可用的一种选择是将 SVN 复制到`MyClass2.cs`，然后从一个文件中删除一半代码，从另一个文件中删除一半。如果我从每个内容中删除正确的内容，这可以很好地工作。

但是，如果我已经完成了所有工作来分离文件，然后意识到（在提交之前）我*没有*做副本，我该怎么办。 **有没有办法表明“这个现有的新文件”是“这个其他已知文件”的副本？**

我正在使用 TortoiseSVN，因此其中的机制是理想的，但如果需要，我对命令行感到满意。

[另一个问题](https://stackoverflow.com/questions/5524083/is-it-possible-to-retroactively-add-history-that-would-have-been-there-if-an-svn)是追溯添加过去的更改，但我只是在寻找提交前的答案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T18:22:27.883

重命名新文件以保存它。

制作保留历史记录的 SVN 副本。（可能在回购浏览器中）

用保存的副本替换副本。（Windows“复制”或Linux“cp”）

您应该拥有所有历史记录并且可以提交。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-16T18:23:14.533

这就是我要做的：将您的编辑复制到其他地方。还原旧文件。SVN 复制到新文件。用您的编辑覆盖旧文件和新文件。犯罪。

# java - 在运行时更改 XYSeries 的密钥

> ID：16044295
> 
> 赞同：2
> 
> 时间：2013-04-16T18:19:36.520
> 
> 标签：java, jfreechart

我知道我可以在创建时设置图表的标题：

```
 XYSeries series = new XYSeries("Random Data"); 
```

但是如果在我的代码中我想在运行时将标题**“随机数据”**更改为其他内容怎么办？此处提供了完整代码：[JFreeChart：XY 系列演示 3](http://www.java2s.com/Code/Java/Chart/JFreeChartXYSeriesDemo3.htm)。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T02:38:04.310

An`XYSeries`是 a `Series`，因此您可以使用它`setKey()`来更改名称。因为名字也是系列的关键，听者`XYSeriesCollection`可能会否决改变。一种解决方法是删除系列、更改名称并将系列恢复到数据集：

```
private XYSeriesCollection dataset;
private XYSeries series;
...
dataset.removeSeries(series);
series.setKey("Stochastic Data");
dataset.addSeries(series); 
```

![图片](https://i.stack.imgur.com/atZ4X.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T18:28:12.157

您可以通过构造函数参数传递系列标题。你只需要修改代码：

```
public XYSeriesDemo3(final String title, String mySeriesTitle) {
        super(title);
        IntervalXYDataset dataset = createDataset(mySeriesTitle);
        ...
}

private IntervalXYDataset createDataset(String mySeriesTitle) {
        final XYSeries series = new XYSeries(mySeriesTitle);
        ...
} 
```

然后在你的主要方法中：

```
public static void main(final String[] args) {
        XYSeriesDemo3 demo = new XYSeriesDemo3("XY Series Demo 3", "my series A");
        demo.pack();
        RefineryUtilities.centerFrameOnScreen(demo);
        demo.setVisible(true);

        demo = new XYSeriesDemo3("XY Series Demo 3", "my series B");
        demo.pack();
        RefineryUtilities.centerFrameOnScreen(demo);
        demo.setVisible(true);

    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-16T18:25:24.830

`XYSeries`继承自`ApplicationFrame`哪个继承自`JFrame`哪个继承自`Frame`；`Frame`有`setTitle(String title)`方法。

[http://www.jfree.org/jcommon/api/org/jfree/ui/ApplicationFrame.html](http://www.jfree.org/jcommon/api/org/jfree/ui/ApplicationFrame.html)

# mediawiki - 制作图片链接以上传表格。

> ID：16044300
> 
> 赞同：1
> 
> 时间：2013-04-16T18:19:50.983
> 
> 标签：mediawiki, mediawiki-templates

我正在尝试创建一个指向上传表单的图像链接，该表单将允许用户上传具有特定名称的图像。我有一系列带有“人员”信息框的页面。如果没有提供图片，我会使用一个占位符图像，它只是一个简笔画。我想设置它，以便单击图像会将用户带到一个上传表单，该表单已经根据页面名称填写了文件名。问题是`{{PAGENAME}}`模板内部的使用由于某种原因破坏了链接。

**人员信息框模板**（只是重要的部分）：

```
 [[image:PlaceHolder.jpg|300px|link=http://www.MyWiki.com/index.php?title=Special:Upload&wpDestFile={{PAGENAME}}.jpg]] 
```

目前这不起作用......这里的目标是让它像这个链接一样工作，其中“John Smith”是模板所在页面的名称：[http ://en.wikipedia.org/ wiki/Special:Upload?wpDestFile=John Smith.jpg](http://en.wikipedia.org/wiki/Special%3aUpload?wpDestFile=John%20Smith.jpg)。（注意目标文件名填写“John Smith.jpg”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T02:20:37.960

弄清楚了。问题在于页面名称中有一个空格。这就是为什么它在某些页面上工作而不在其他页面上工作的原因。

这是修复（它删除了所有空格，因此“John Smith”变为“JohnSmith”：

...`/index.php?title=Special:Upload&wpDestFile={{#replace:{{PAGENAME}}| |}}.jpg`

# php - 使用 Gmail SMTP 发送电子邮件时出错

> ID：16044304
> 
> 赞同：1
> 
> 时间：2013-04-16T18:20:00.887
> 
> 标签：php, smtp, gmail, phpmailer

我正在尝试使用 Gmail SMTP 和`PHPmailer`.

问题是我有这个错误：

```
SMTP -> ERROR: Failed to connect to server: php_network_getaddresses: getaddrinfo   failed: No such host is known. (0) 

SMTP Error: Could not connect to SMTP host. Mailer Error: SMTP Error: Could not connect to SMTP host. 
```

这是我正在使用的代码：

```
?php

    require_once($_SERVER['DOCUMENT_ROOT'].'/FreeUni/Kiosk/class.phpmailer.php');

    $mail  = new PHPMailer();   
    $mail->IsSMTP();

    //GMAIL config
    $mail->SMTPAuth   = true;                  // enable SMTP authentication
    $mail->SMTPSecure = "ssl";                 // sets the prefix to the server
    $mail->Host       = "ssl://smtp.gmail.com:465";      // sets GMAIL as the SMTP server

    $mail->Username   = "XXXX@gmail.com";  // GMAIL username
    $mail->Password   = "XXXXXX";            // GMAIL password
    $mail->SMTPDebug = 1;
    //End Gmail

    $mail->From       = "gvakh10@gmail.com";
    $mail->FromName   = "you name";
    $mail->Subject    = "some subject";
    $mail->MsgHTML("the message");

    //$mail->AddReplyTo("reply@email.com","reply name");//they answer here, optional
    $mail->AddAddress("XXXX@gmail.com","name to");
    $mail->IsHTML(true); // send as HTML

    if(!$mail->Send()) {//to see if we return a message or a value bolean
        echo "Mailer Error: " . $mail->ErrorInfo;
    } else  echo "Message sent!";

?> 
```

我已经在网上搜索过，但找不到解决方案

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T18:46:02.507

我使用了它，它也可以在 java PHP prop 中使用，您可以以相同的方式进行设置。

```
 String to = "shafi0907@gmail.com";
    //change accordingly

    //Get the session object

    Properties props = new Properties();
    props.put("mail.smtp.host", "smtp.gmail.com");
    props.put("mail.smtp.socketFactory.port", "465");
    props.put("mail.smtp.socketFactory.class",
            "javax.net.ssl.SSLSocketFactory");
    props.put("mail.smtp.auth", "true");
    props.put("mail.smtp.port", "465");

    Session session = Session.getDefaultInstance(props,
            new javax.mail.Authenticator() {
        protected PasswordAuthentication getPasswordAuthentication() {
            return new PasswordAuthentication("shafi0907@gmail.com", "<your password");//change accordingly
        }
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T18:33:44.257

我换了

`$mail->Host = "ssl://smtp.gmail.com:465";`

只需

`$mail->Host ="smtp.gmail.com:465";`

它奏效了！

谢谢大家。

# c# - 运行时加载程序集的事件处理

> ID：16044310
> 
> 赞同：1
> 
> 时间：2013-04-16T18:20:14.117
> 
> 标签：c#, reflection, dll, event-handling

这是我试图从中学习的场景：

*   有时会有 DLL 文件引发事件。
*   DLL 文件不能添加到源代码中的引用，但它在磁盘上可用，并且程序可以在运行时访问它。
*   我将 DLL 文件加载为运行时的程序集。
*   我正在尝试从 DLL 订阅事件（我知道签名和参数格式），并在我的程序中处理它们。

程序集是一个简单的 Dll，其方法是添加其两个参数并使用自定义参数引发事件，包括求和运算的结果。这是DLL的代码：

```
namespace Dll1
{
    public class Class1
    {
        public int c = 0;

        public void add(int a, int b)
        {
            c =  a + b;
            if (Added !=null)
                Added(this, new AddArgs(c));
        }

        public delegate void AddHandler(object sender, AddArgs e);

        public event AddHandler Added;

    }

    public class AddArgs : EventArgs
    {
        private int intResult;

        public AddArgs(int _Value) 
        {
            intResult = _Value;
        }

        public int Result
        {
            get { return intResult; }
        }
    }
} 
```

然后，在我的程序中，我使用 Assembly.LoadFile 加载了该 DLL。我的程序中有另一个名为*EventProcessor*的类，它包含一个事件处理程序来处理来自加载的程序集的事件：

```
namespace ConsoleApplication1
{
    class Program
    {
        static Type[] parmTypes;

        static void Main(string[] args)
        {
            Assembly asm = Assembly.LoadFile(@"C:\Projects\Dll1.Dll");
            Type typ = asm.GetType("DLL1.Class1", true, true);

            var method = typ.GetMethod("add");
            EventInfo eInfo = typ.GetEvents()[0];
            var obj = Activator.CreateInstance(typ);

            EventProcessor evProc = new EventProcessor();
            Type myTypeObj = evProc.GetType();
            MethodInfo myMethodInfo = myTypeObj.GetMethod("myEventHandler");

            Delegate d = Delegate.CreateDelegate(myTypeObj, myMethodInfo, true); // Error!
            eInfo.AddEventHandler(obj, d);

            method.Invoke(obj, new object[] { 1, 0 });
        }
    }
} 
```

但是，当运行程序时，我收到一条错误消息“类型必须从委托派生。参数名称：类型”。我在这里做错了什么？或者有没有更好的方法来处理这种情况？如果有帮助，我还在最后添加了我的事件处理程序类。

```
namespace ConsoleApplication1
{
    class EventProcessor
    {
        public void myEventHandler(object sender, AddArgs args)
        {
            Console.WriteLine("Event Received.");
        }
    }

    public class AddArgs : EventArgs
    {
        private int intResult;

        public AddArgs(int _Value)
        {
            intResult = _Value;
        }

        public int Result
        {
            get { return intResult; }
        }
    }
} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T18:23:35.713

您的问题是 ConsoleApplication1 没有对 Dll1 的引用。即使您`AddArgs`在两个程序集中的结构相同，它们仍然是不同的类型，不能互换使用。

解决方案是使用程序集`ConsoleApplication1`和`Dll1`. 两个程序集必须使用相同的类型。

您还使用了`CreateDelegate`用于静态事件方法的方法的覆盖。由于您正在尝试连接实例方法，因此您还必须提供目标。

# c# - 具有基本身份验证的 Webclient / HttpWebRequest 返回 404 未找到有效 URL

> ID：16044313
> 
> 赞同：59
> 
> 时间：2013-04-16T18:20:23.290
> 
> 标签：c#, .net

编辑：我想回过头来指出问题根本不是我的问题，而是另一家公司的代码。

我正在尝试使用基本身份验证拉出一个页面。我不断收到 404 Page not found 错误。我可以将我的网址复制并粘贴到浏览器中，它工作正常（如果我还没有登录到他们的网站，它会弹出一个凭据框，否则它会打开我想要打开的内容）。我必须到达正确的位置并进行身份验证，因为如果我故意输入错误的用户名/密码，我会得到一个 401（未验证的错误），如果我在查询字符串中传递一个错误的参数，我会得到一个内部服务器错误 500 . 我尝试使用 Webclient 和 HttpWebRequest 都导致相同的 404 not found 错误。

使用网络客户端：

```
string url = "MyValidURLwithQueryString";
WebClient client = new WebClient();
String userName = "myusername";
String passWord = "mypassword";
string credentials = Convert.ToBase64String(Encoding.ASCII.GetBytes(userName + ":" + passWord));
client.Headers[HttpRequestHeader.Authorization] = "Basic " + credentials;
var result = client.DownloadString(url);
Response.Write(result); 
```

使用 HttpWebRequest

```
HttpWebRequest request = (HttpWebRequest)WebRequest.Create("MyValidURL");
string authInfo = "username:password";
authInfo = Convert.ToBase64String(Encoding.Default.GetBytes(authInfo));
request.Headers.Add("Authorization", "Basic " + authInfo);
request.Credentials = new NetworkCredential("username", "password");
request.Method = WebRequestMethods.Http.Get;
request.AllowAutoRedirect = true;
request.Proxy = null;
HttpWebResponse response = (HttpWebResponse)request.GetResponse();
Stream stream = response.GetResponseStream();
StreamReader streamreader = new StreamReader(stream);
string s = streamreader.ReadToEnd();
Response.Write(s); 
```

* * *

## 回答 #1

> 赞同：120
> 
> 时间：2014-09-24T12:27:47.560

```
//BEWARE
//This works ONLY if the server returns 401 first
//The client DOES NOT send credentials on first request
//ONLY after a 401
client.Credentials = new NetworkCredential(userName, passWord); //doesnt work

//So use THIS instead to send credentials RIGHT AWAY
string credentials = Convert.ToBase64String(
    Encoding.ASCII.GetBytes(userName + ":" + password));
client.Headers[HttpRequestHeader.Authorization] = string.Format(
    "Basic {0}", credentials); 
```

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2013-04-16T18:44:04.437

尝试将 Web 客户端请求身份验证部分更改为：

```
NetworkCredential myCreds = new NetworkCredential(userName, passWord);
client.Credentials = myCreds; 
```

然后打你的电话，对我来说似乎工作得很好。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2015-05-20T13:20:20.783

这部分代码对我来说很好用：

```
 WebRequest request = WebRequest.Create(url);
        request.Method = WebRequestMethods.Http.Get;
        NetworkCredential networkCredential = new NetworkCredential(logon, password); // logon in format "domain\username"
        CredentialCache myCredentialCache = new CredentialCache {{new Uri(url), "Basic", networkCredential}};
        request.PreAuthenticate = true;
        request.Credentials = myCredentialCache;
        using (WebResponse response = request.GetResponse())
        {
            Console.WriteLine(((HttpWebResponse)response).StatusDescription);

            using (Stream dataStream = response.GetResponseStream())
            {
                using (StreamReader reader = new StreamReader(dataStream))
                {
                    string responseFromServer = reader.ReadToEnd();
                    Console.WriteLine(responseFromServer);
                }
            }
        } 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-06-18T11:20:42.530

如果它在您使用浏览器时工作，然后第一次传递您的用户名和密码 - 那么这意味着一旦完成身份验证，您的浏览器的请求标头设置为所需的身份验证值，然后每次传递向托管服务器发出请求。

因此，从检查请求标头开始（这可以使用 Web 开发人员工具完成），一旦确定标头中需要的内容，您就可以在 HttpWebRequest 标头中传递它。

摘要式身份验证示例：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Security.Cryptography;
using System.Text.RegularExpressions;
using System.Net;
using System.IO;

namespace NUI
{
    public class DigestAuthFixer
    {
        private static string _host;
        private static string _user;
        private static string _password;
        private static string _realm;
        private static string _nonce;
        private static string _qop;
        private static string _cnonce;
        private static DateTime _cnonceDate;
        private static int _nc;

public DigestAuthFixer(string host, string user, string password)
{
    // TODO: Complete member initialization
    _host = host;
    _user = user;
    _password = password;
}

private string CalculateMd5Hash(
    string input)
{
    var inputBytes = Encoding.ASCII.GetBytes(input);
    var hash = MD5.Create().ComputeHash(inputBytes);
    var sb = new StringBuilder();
    foreach (var b in hash)
        sb.Append(b.ToString("x2"));
    return sb.ToString();
}

private string GrabHeaderVar(
    string varName,
    string header)
{
    var regHeader = new Regex(string.Format(@"{0}=""([^""]*)""", varName));
    var matchHeader = regHeader.Match(header);
    if (matchHeader.Success)
        return matchHeader.Groups[1].Value;
    throw new ApplicationException(string.Format("Header {0} not found", varName));
}

private string GetDigestHeader(
    string dir)
{
    _nc = _nc + 1;

    var ha1 = CalculateMd5Hash(string.Format("{0}:{1}:{2}", _user, _realm, _password));
    var ha2 = CalculateMd5Hash(string.Format("{0}:{1}", "GET", dir));
    var digestResponse =
        CalculateMd5Hash(string.Format("{0}:{1}:{2:00000000}:{3}:{4}:{5}", ha1, _nonce, _nc, _cnonce, _qop, ha2));

    return string.Format("Digest username=\"{0}\", realm=\"{1}\", nonce=\"{2}\", uri=\"{3}\", " +
        "algorithm=MD5, response=\"{4}\", qop={5}, nc={6:00000000}, cnonce=\"{7}\"",
        _user, _realm, _nonce, dir, digestResponse, _qop, _nc, _cnonce);
}

public string GrabResponse(
    string dir)
{
    var url = _host + dir;
    var uri = new Uri(url);

    var request = (HttpWebRequest)WebRequest.Create(uri);

    // If we've got a recent Auth header, re-use it!
    if (!string.IsNullOrEmpty(_cnonce) &&
        DateTime.Now.Subtract(_cnonceDate).TotalHours < 1.0)
    {
        request.Headers.Add("Authorization", GetDigestHeader(dir));
    }

    HttpWebResponse response;
    try
    {
        response = (HttpWebResponse)request.GetResponse();
    }
    catch (WebException ex)
    {
        // Try to fix a 401 exception by adding a Authorization header
        if (ex.Response == null || ((HttpWebResponse)ex.Response).StatusCode != HttpStatusCode.Unauthorized)
            throw;

        var wwwAuthenticateHeader = ex.Response.Headers["WWW-Authenticate"];
        _realm = GrabHeaderVar("realm", wwwAuthenticateHeader);
        _nonce = GrabHeaderVar("nonce", wwwAuthenticateHeader);
        _qop = GrabHeaderVar("qop", wwwAuthenticateHeader);

        _nc = 0;
        _cnonce = new Random().Next(123400, 9999999).ToString();
        _cnonceDate = DateTime.Now;

        var request2 = (HttpWebRequest)WebRequest.Create(uri);
        request2.Headers.Add("Authorization", GetDigestHeader(dir));
        response = (HttpWebResponse)request2.GetResponse();
    }
    var reader = new StreamReader(response.GetResponseStream());
    return reader.ReadToEnd();
} 
```

}

然后你可以称之为：

```
DigestAuthFixer digest = new DigestAuthFixer(domain, username, password);
string strReturn = digest.GrabResponse(dir); 
```

如果 Url 是： http: [//xyz.rss.com/folder/rss](http://xyz.rss.com/folder/rss)那么域： http: [//xyz.rss.com](http://xyz.rss.com)（域部分） dir：/folder/rss（url 的其余部分）

您也可以将其作为流返回并使用 XmlDocument Load() 方法。

# wpf - WPF、Active Directory 和自定义角色提供程序

> ID：16044316
> 
> 赞同：2
> 
> 时间：2013-04-16T18:20:30.967
> 
> 标签：wpf, roleprovider, windows-identity

我有一个在服务器端使用 WCF 的 WPF 客户端/服务器应用程序。它目前不安全，我希望为我的 Active Directory 上的用户群保护它。应用程序应该托管它自己的角色/权限数据库，该数据库可以通过引用他们的活动目录帐户（SID、SAM 等等）附加到用户的配置文件。

我需要了解一些实施安全性的步骤，然后是我的用户在我的应用程序中拥有的角色/权限：

1.  如何让我的 WPF 应用程序只允许我的 Active Directory 授权的身份？如果有人使用某个本地用户帐户登录到他们的本地计算机，他们显然仍然有权运行 WPF 可执行文件 - 那么我如何确保登录确实是 Active Directory 登录，而不是本地登录？app.config 中的配置选项是否与 asp.net web.config 中的配置选项相同，我所做的只是将身份验证设置为 Windows，其余的只是处理？
2.  一旦用户被证明是有效的活动目录用户，将用户的 WindowsIdentity 绑定到我的数据库表中的角色的最佳方法是什么？这是使用自定义 RoleProvider 最好的方法吗？

是否有任何好的文档可以帮助连接这些点？由于我读过的所有 WIF 文档和我看过的所有教程，这些是唯一对我没有意义并且似乎没有在任何地方解释的部分。

我知道我需要保护 WCF，但我的理解是这相对简单，就像在 ASP.NET 中一样，它实际上只是正确配置它的问题，其余的就发生了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T21:19:31.773

关于问题1：

您可以在公开的 WCF 方法上使用[PrincipalPermissionAttribute ：](http://msdn.microsoft.com/en-us/library/system.security.permissions.principalpermissionattribute.aspx)

```
 [PrincipalPermission(SecurityAction.Demand, Role = "ProjectManagers")]
    [PrincipalPermission(SecurityAction.Demand, Role = "Developers")]
    [PrincipalPermission(SecurityAction.Demand, Role = "Operations")]
    [PrincipalPermission(SecurityAction.Demand, Role = "Clients OU Admins")]
    public string CreateUser(string strFName, string strLName, string strPassword, string strOUName)
    {
        return CreateADAccount(strFName, strLName, strPassword, strOUName);
    } 
```

这将仅授权属于上述四个组之一的用户执行该方法。

对于问题 2，在我的脑海中，您可以执行以下操作：

以下代码未经测试且不完整。它仅用于概念化。

```
public class ControlAuthenticator
{
    Dictionary<string, ControlRule> ControlRules { get; set; } 
    public ControlAuthenticator()
    {
        ControlRules = new Dictionary<string, ControlRule>();
    }

    public bool UserCanRead(string controlName)
    {
        var user = MainViewModel.Current.CurrentUserPrincipal;

        return ControlRules[controlName].ReadPermission.Split(Convert.ToChar(","))
                                     .Intersect(user.GetGroups().Select(g => g.Name))
                                     .Any();
    }
}

public class ControlRule
{
    public string ControlName { get; set; }
    public string ReadPermission { get; set; }
    public string WritePermission { get; set; }
} 
```

这个想法是，在您的 ViewModel 上，您调用提供控件名称的 userCanRead（或我没有创建的 write）方法。你得到一个布尔值。UserCanRead 方法检查 ReadPermission 属性中是否有与当前用户所属的组相关的条目（我认为它可能是一个逗号分隔的授权组字符串）。如果有任何相关性，则返回 true。

在您的 ViewModel 上，如果为 true，则显示值（或允许编辑），否则显示不同的值，或禁止任何编辑。

# asp-classic - How to use Twitter get search/tweets api 1.1 with classic ASP

> ID：16044319
> 
> 赞同：2
> 
> 时间：2013-04-16T18:20:46.943
> 
> 标签：asp-classic, oauth, vbscript, twitter

I already know that new twitter api 1.1 requires oauth1.0 athentication for searchs, but i don't know how to implement this on classic ASP.

我一直在尝试这个：[http](http://scottdesapio.com/VBScriptOAuth/) : //scottdesapio.com/VBScriptOAuth/ 但我无法使用它在 twitter 中进行搜索。我想找到所有包含某些特定单词的推文。在以前的 twitter api 上它将是：[http](http://search.twitter.com/search.json?q=blue%20green) ://search.twitter.com/search.json?q= blue%20green 所以 twitter 搜索包含“蓝色”和“绿色”的推文

有人可以向我展示如何使用新 api 执行此操作的任何示例吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-25T04:01:30.163

您必须通过向 twitter 发送/读取 HTTP 请求来完成这一切。如何做一个 HTTP 请求，你可以看这里：

[HTTP GET 请求，ASP - 我迷路了！](https://stackoverflow.com/questions/1885170/http-get-request-asp-im-lost)

[如何在 ASP 中执行 HTTP POST 请求？](https://stackoverflow.com/questions/1463635/how-to-perform-an-http-post-request-in-asp)

但这里有一个经典的 oAuth 在线 asp 脚本，可用于您的情况，可以在此处查看/下载：http: [//scottdesapio.com/VBScriptOAuth/](http://scottdesapio.com/VBScriptOAuth/)

# jquery - JQuery验证插件errorPlacement在需要字符串时传入错误对象

> ID：16044320
> 
> 赞同：-1
> 
> 时间：2013-04-16T18:20:50.680
> 
> 标签：jquery, jquery-validate

我有一个类似的问题。“错误”不应该是错误字符串吗？当我警告错误时，它是一个对象（[object Object]。当我取出“errorPlacement”块时它工作正常。我也尝试将errorPlacement块放在最后。当我像这样更改第6行时：元素。最接近（“div”）.append（“测试消息”）；我确实在表单中得到“测试消息”字符串而没有错误。所以问题是“错误”是一个对象而不是一个字符串。这是一个问题插件？我正在使用 jQuery 验证插件 1.7 和 jquery 1.6ish

```
$("#student-set-form").validate({
        errorPlacement: function(error, element) {                
            console.log(error);
            alert(error);
            element.closest("div").append(error);
        },
        rules: {
            NAME: {
                required: true
            },
            LOCATION: {
                required: true
            },
            DESC: {
            },
            MIN_GPA: {
                required: function() {
                    return $("input[name='MAX_GPA']").val() != ''; // yes, min references max
                },
                range: [0, 4]
            },
            MAX_GPA: {
                required: function() {
                    return $("input[name='MIN_GPA']").val() != ''; // yes, max references min   
                },
                range: [0, 4]
            },
            MIN_CR_HOURS_COMPLETE: {
                required: function() {
                    return $("input[name='MAX_CR_HOURS_COMPLETE']").val() != ''; // yes, min references max  
                },
                range: [0, 200]
            },
            MAX_CR_HOURS_COMPLETE: {
                required: function() {
                    return $("input[name='MIN_CR_HOURS_COMPLETE']").val() != ''; // yes, max references min           
                },
                range: [0, 200]
            },
            MIN_LASTNAME_INITIAL: {
                required: function() {
                    return $("input[name='MAX_LASTNAME_INITIAL']").val() != ''; // yes, max references min           
                },
            },
            MAX_LASTNAME_INITIAL: {
                required: function() {
                    return $("input[name='MIN_LASTNAME_INITIAL']").val() != ''; // yes, max references min           
                },
            },
            DAYS_VISIBLE: {
                required: true,
                range: [1, 365]
            },
            DAYS_BEFORE_VISIBLE: {
                required: true,
                range: [1, 3]
            },
            APPOINTMENT_LEGNTH_MINUTES: {
                required: true,
                range: [1, 40320]
            },
            NUM_STUDENTS: {
                required: true,
                range: [1, 10000]
            }

        },
        messages: {
            NAME: {
                required: "Please enter a name."
            },
            LOCATION: {
                required: "Please enter a location."
            },
            DESC: {
            },
            MIN_GPA: {
                required: "Min/Max GPA are optional, but if one is set, the other must also be set.",
                range: "Min GPA must be between 0 and 4.0"
            },
            MAX_GPA: {
                required: "Min/Max GPA are optional, but if one is set, the other must also be set.",
                range: "Man GPA must be between 0 and 4.0"
            },
            MIN_CR_HOURS_COMPLETE: {
                required: "Min/Max Credit hours are optional, but if one is set, the other must also be set.",
                range: "Min GPA must be between 0 and 4.0"
            },
            MAX_CR_HOURS_COMPLETE: {
                required: "Min/Max Credit hours are optional, but if one is set, the other must also be set.",
                range: "Max Cr Hrs must be between 0 and 200."
            },
            MIN_LASTNAME_INITIAL: {
                required: "Min/Max Last Initials are optional, but if one is set, the other must also be set."
            },
            MAX_LASTNAME_INITIAL: {
                required: "Min/Max Last Initials are optional, but if one is set, the other must also be set."
            },
            DAYS_VISIBLE: {
                required: "Number days prior visible is required.",
                range: "Number days prior visible must be between 1 and 365 days."
            },
            DAYS_BEFORE_VISIBLE: {
                required: "# weekdays hide before appt is required.",
                range: "# weekdays hide before appt must be be between 1, 2, or 3 days."
            },
            APPOINTMENT_LEGNTH_MINUTES: {
                required: "Appointment Length in minutes is required.",
                range: "Appointment Length in minutes must be beween 1 and 1000 minutes."
            }
        }
    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T20:42:40.187

引用操作：

> ““错误”不应该是错误字符串吗？当我警告错误时，它是一个对象（[对象对象]。”

不，它不应该是一个字符串。它确实是一个看起来像这样的物体......

```
<label for="myfield" class="error">This field is required</label> 
```

如果要从`error`对象中提取字符串，请使用[jQuery`.text()`方法](http://api.jquery.com/text/)。

这将为您提供一个包含错误消息的字符串：

```
error.text() 
```

否则，不清楚您的代码有什么问题。

# highcharts - Highcharts - 移动设备格式问题

> ID：16044325
> 
> 赞同：0
> 
> 时间：2013-04-16T18:21:00.353
> 
> 标签：highcharts

我的图表非常适合网络，但在移动设备上存在一些格式问题。

首先，格式化高度和宽度以使图表占据全屏区域而无需滚动页面的正确方法是什么？我尝试在图表的 div 容器上使用 100% 的百分比，但它不能正常工作。

其次，我将 xAxis tickInterval 设置为 86400000，因为我的数据每天返回一个值。我在网络上没有这个问题，但在移动设备上——由于屏幕尺寸——xAxis 上的标签重叠。有没有办法控制这个？我可以在移动设备上格式化一些东西，这样标签只出现在每行设置的行数上吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T08:52:54.180

在移动设备中，您可以检查宽度，然后为图表设置适当的宽度

```
chart:{
   width: variableWithWidth
} 
```

关于刻度，您可以使用 tickPositioner 来定义动态刻度位置[http://api.highcharts.com/highstock#xAxis.tickPositioner](http://api.highcharts.com/highstock#xAxis.tickPositioner)。因此，在函数内部，您可以准备为图表创建刻度，但如果您应该检查宽度（对于移动设备，即 <768px），然后在刻度之间设置更小的范围。

# facebook - 即使使用有效的 OpenGraph 标签，AddThis 也不会向 Facebook 分享正确的 URL

> ID：16044330
> 
> 赞同：1
> 
> 时间：2013-04-16T18:21:17.383
> 
> 标签：facebook, facebook-opengraph, addthis

[AddThis 博客](http://www.addthis.com/blog/2012/09/27/debugging-sharing-to-facebook/)声明 Facebook 不遵守 AddThis 配置中指定的“共享 URL”，并且我已按照说明将 OpenGraph 元标记添加到我要共享其 URL 的页面。

我已经通过 Facebook Debugger 工具确认这些标签是有效的。

但是，如果我尝试共享受密码保护的暂存 URL，它可以在 Twitter 和其他地方工作，但不能在 Facebook 上工作。Facebook 尝试分享我网站的登录页面；我敢打赌它正在尝试共享原始页面（我试图从中共享*，*这是一个受密码保护的内部页面，因此在登录之前尝试访问它会将您弹回登录页面）。

我怎样才能让它按我想要的方式工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T18:47:27.877

确保您跟踪文档的更改：http: [//support.addthis.com/customer/portal/articles/381263-addthis-client-api#configuration-sharing](http://support.addthis.com/customer/portal/articles/381263-addthis-client-api#configuration-sharing)

基本上需要在 addthis_share 对象中配置要共享的 URL。

# matlab - Matlab 脚本构建编译未启动

> ID：16044333
> 
> 赞同：1
> 
> 时间：2013-04-16T18:21:23.760
> 
> 标签：matlab, build, compilation

我祈祷你有一个美好的一天。:-)

两个月后，我终于在 MatLab 中完成了我的“程序”。它计算横卧自行车的应变和变形分析。但它是脚本的形式。

当我开始我的

```
Start.m 
```

Matlab 命令窗口将显示菜单：

*   [http://imgur.com/Nxr1VS7](http://imgur.com/Nxr1VS7) ~ 菜单

我从选项中选择，每个问题输入 1 / 2 个数字。

然后它将使用结果进行计算：

*   [http://imgur.com/RB0UidP](http://imgur.com/RB0UidP) ~ 文字结果

*   [http://imgur.com/B2YW9ms](http://imgur.com/B2YW9ms) ~ 图表结果

我希望它可以在没有 MatLab 的任何机器上执行，所以我启动

```
 deploytool ~ command 
```

我选择的地方

*   [http://imgur.com/X9UAR0w](http://imgur.com/X9UAR0w) ~ 部署项目

然后我拿起我的 Start.m 文件并按 Built

*   [http://imgur.com/f6JJl4R](http://imgur.com/f6JJl4R) ~ 要构建的文件

完整的内置窗口日志如下：

*   [http://imgur.com/ObvfGDj](http://imgur.com/ObvfGDj) ~ 内置日志

我什至把 MCR 安装程序放在那里并安装了它，但是当我启动我的 .exe 文件时，我的计算机在任务管理器中“工作了一段时间”，我有 Lehokolo.exe（使用系统资源获取 20% CPU），但大约 30 秒后，它会平静下来，什么都不会发生......

MCR 安装：Matlab 编译器运行时 8.0

在此之前它会安装 Visual C++ (64bit)

我用我的炸薯条笔记本试过了，但它也不起作用。（已安装 MCR + 尝试启动我的程序）

**我的想法：**

*   Deploytool 只有在我有 GUI 时才能创建 .exe 文件，而不仅仅是脚本。

*   我尝试从这个站点安装 Windows SDK：http: [//www.microsoft.com/en-us/download/details.aspx?id=](http://www.microsoft.com/en-us/download/details.aspx?id=8279) 8279 和 mathworks.com 上的一个线程说它必须安装 -before - Matlab，所以也许我必须重新安装它。

*   如果我键入 mbuild -setup 并找到编译器，则响应是：*在这台计算机上找不到受支持的 SDK 或编译器。有关支持的编译器列表，请参阅[http://www.mathworks.com/support/compilers/R2012b/win64.html](http://www.mathworks.com/support/compilers/R2012b/win64.html)*尽管我今天再次安装了 Windows SDK。也使用 Visual C++ 2010。“没有支持的 sdk 编译器...”

我也在另一台使用 Matlab 2012b 的机器上进行了尝试，结果相同。40 秒的“工作”，然后什么也没有。

感谢您的任何回复。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T19:43:38.273

如果您想构建 CLI 应用程序，我认为您应该在项目类型中选择“独立应用程序”，而不是“Windows 独立应用程序”。[这](http://blogs.mathworks.com/loren/2010/11/18/deploying-standalone-applications/)可能会给你进一步的提示。

**后期编辑：**不用担心，即使程序在 CLI 中启动，它也能创建图形、绘图等。唯一的缺点是它会“一直”运行（它的执行不是作为在 GUI 中启动的应用程序本身由事件驱动的）。

# multithreading - 线程完成时访问冲突

> ID：16044338
> 
> 赞同：1
> 
> 时间：2013-04-16T18:21:47.270
> 
> 标签：multithreading, pointers, multidimensional-array

这是设置。我创建了一个全局变量`GLfloat ***terrainMap;` 接下来，在一个主线程函数中，我将它初始化为

```
 terrainMap = new GLfloat**[size+1];
for(int i = 0; i < size+1; i++)
{
terrainMap[i] = new GLfloat*[size+1];
for(int j = 0; j < size+1; j++)
{
  terrainMap[i][j] = new GLfloat[4];
}
} 
```

然后我先将它传递给两个对象，以便它们可以写入和读取原始数据。

```
current.AddObject(new Terrain(1,0.5f,terrainMap));
current.AddObject(new Grass(2,terrainMap));

Terrain::Terrain(int tag1,float smoothnessInclination1,GLfloat ***terrainMap1){
terrainMap= terrainMap1;

Grass::Grass(int tag1,GLfloat ***terrainMap1){
terrainMapG=terrainMap1; 
```

在这一点上，我感到非常有信心，因为在不同的线程中写入数据

```
terrainMap[i][c][0] = ((hold.x+1)/2.0f)*255;
terrainMap[i][c][1] = ((hold.y+1)/2.0f)*255;
terrainMap[i][c][2] = ((hold.z+1)/2.0f)*255;
terrainMap[i][c][3] = vertexData[(i*(size+1))+(c)].XYZW[1]; 
```

以及在不同线程中读取数据

```
+terrainMapG[i][c][3] 
```

运作良好。但是，当线程本身结束时。发生访问冲突，我不知道如何。

这是分离的线程

```
void LoadObjects(){
for(std::vector<int>::size_type i = 0;i != current.storage.size();i++){
    current.storage.at(i)->Load();
}
runLoad=false;
} 
```

我知道我不是同时读取和写入数据，那会是什么？

编辑：将 size 的值从 1000 减少到 100 后，会引发一个新错误。`Unhandled exception at 0x0000000076EE40F2 (ntdll.dll) in Procedural Terrain.exe: 0xC0000374: A heap has been corrupted (parameters: 0x0000000076F5B450).`而不是原来的`Unhandled exception at 0x00000000694E0760 (nvoglv64.dll) in Procedural Terrain.exe: 0xC0000005: Access violation reading location 0x0000000002770258.`

此外，在 size=100 的错误之前，程序停止并出现错误，即它在 realloc.c 中遇到断点，我没有在代码中设置断点

```
pvReturn = NULL;
        if (newsize <= _HEAP_MAXREQ)
        {
            if (newsize == 0)
                newsize = 1;
            pvReturn = HeapReAlloc(_crtheap, 0, pBlock, newsize);
        }
        else
        {
            _callnewh(newsize);
            errno = ENOMEM;
            return NULL;
        } 
```

# c++ - 修改 TestAssert.h (cppunit) - 为什么包含的顺序对宏扩展很重要？

> ID：16044340
> 
> 赞同：1
> 
> 时间：2013-04-16T18:21:53.553
> 
> 标签：c++, gcc, macros, cppunit

我有一个有两个基本异常类的项目；两者具有相同的名称，只有方法/成员不同（一个有一个返回消息的方法，另一个只有一个字符串成员，可以访问它以获取有关异常的信息）。

我正在使用 CPPUNIT 进行测试，在框架中有 TestAssert.hpp 文件，其中包含每个断言的宏（CPPUNIT_ASSERT_NO_THROW 等）。我已经修改添加了另一个宏来测试测试类中包含哪些异常标头，这样我就可以捕获我的基本异常；宏看起来像这样：

```
#ifdef BASE_EXCEPTION_CLASS_ONE_HPP
#define MY_CPPUNIT
catch (BaseException &ex) {
ex.getMessage();
}
#endif
#ifdef BASE_EXCEPTION_CLASS_TWO_HPP
#define MY_CPPUNIT
catch (BaseException &ex) {
cout << "Caught: " ex.comment <<endl;
}
#endif 
```

然后将在 TestAssert.h 中像这样使用这两个宏

```
/** Asserts that the given expression does not throw any exceptions.
 * \ingroup Assertions
 * Example of usage:
 * \code
 *   std::vector<int> v;
 *   v.push_back( 10 );
 *  CPPUNIT_ASSERT_NO_THROW( v.at( 0 ) );
 * \endcode
 */
# define CPPUNIT_ASSERT_NO_THROW( expression )                             \
   try {                                                                   \
      expression;                                                          \
   } catch ( const std::exception &e ) {                                   \
      CPPUNIT_NS::Message message( "Unexpected exception caught" );        \
      message.addDetail( "Type: " +                                        \
                   CPPUNIT_EXTRACT_EXCEPTION_TYPE_( e,                     \
                                       "std::exception or derived" ) );    \
      message.addDetail( std::string("What: ") + e.what() );               \
      CPPUNIT_NS::Asserter::fail( message,                                 \
                                  CPPUNIT_SOURCELINE() ); }                \
    MY_CPPUNIT                                                             \
    catch ( ... ) {                                                        \
      CPPUNIT_NS::Asserter::fail( "Unexpected exception caught",           \
                                  CPPUNIT_SOURCELINE() );                  \
   } 
```

这有效，但前提是在测试类中的第一个 #include 是 #include "test.hpp"

那么，宏扩展如何受到包含顺序的影响，或者我怎么能看到预处理部分以便我能以某种方式弄清楚呢？

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T02:27:08.690

您可以使用`gcc -E`来查看预处理器之后的输出。这包括所有扩展的宏，并让您查看宏扩展会发生什么。如果问题最初出现在某个宏中，您还可以在第二步中编译该文件并获得更好的错误报告。

# ios - iOS Facebook 登录

> ID：16044346
> 
> 赞同：-1
> 
> 时间：2013-04-16T18:22:17.917
> 
> 标签：ios, objective-c, facebook-ios-sdk, facebook-login

我想将 Facebook 登录添加到我的 iOS 应用程序中。我已阅读有关 Facebook 3.0 iOS 框架的 Facebook 文档和教程。但是

我看到当调用这个调用时：

```
[FBSession openActiveSessionWithReadPermissions:
                     permissions allowLoginUI:allowLoginUI 
                     completionHandler:
                               ^(FBSession *session,
                                 FBSessionState state,
                                 NSError *error) {

                                             //...mycode
                                }]; 
```

控件从我的应用程序传递到 facebook 以插入凭据，然后在用户输入他的数据时返回到我的应用程序。您可以通过直接在应用程序中输入他们的凭据来做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T18:49:10.590

不，我不认为这是可能的。这实际上意味着应用程序将获得用户登录信息，这绝对不是大多数用户想要的。

# parsing - 在 yacc/bison 中传递多个属性

> ID：16044348
> 
> 赞同：1
> 
> 时间：2013-04-16T18:22:20.590
> 
> 标签：parsing, attributes, bison, yacc

为了处理语法规则：

```
type            : ARRAY '[' integer_constant RANGE integer_constant ']' OF stype { $$ = $8 }
                | stype { $$ = $1 }
                ; 
```

我需要传递类型属性（就像我现在所做的那样），但我还需要传递数组的范围以检查数组边界。我已经尝试了各种使用结构的方法来实现以下目标：

```
type            : ARRAY '[' integer_constant RANGE integer_constant ']' OF stype { $$.type = $8; $$.range[0] = $3; $$.range[1] = $5; }
                | stype { $$.type = $1 }
                ; 
```

但是一切都会导致错误和段错误，我很难找到正确的方法来处理这个

谁能指出我正确的方向？提前致谢。

parse.y：[http ://pastebin.com/XUUqG35s](http://pastebin.com/XUUqG35s)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T20:04:27.977

`type`并被`stype`声明为`attr`类型为 的联合的成员`node*`。因此，在这些非终结符中的任何一个的动作的上下文中，`$$`将被替换为类似的东西`x.attr`（这只是一个说明，不要*太*从字面上理解。）。同样在第一个动作中，`$8`将被替换为类似的东西`yystack[top-8].attr`，因为 $8 也有标签`attr`，是一个`stype`。

所以`$$.type`（或者，实际上，`$$.<anything>`）一定是语法错误。`attr`是一个指针，所以它可能`$$-><something>`是正确的，但如果没有看到`node`.

此外，在`stype`规则中，您设置了，例如`$$ = "INT"`, 但`$$`类型为`node*`，而不是`char*`（当然，除非`node`是 的 typedef `char`，但这似乎是错误的。）当您稍后将该值视为指向 a 的指针`node`。

我真的不清楚你的想法`$$.range`可能意味着什么。也许您需要显示更多标题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T23:58:56.987

除了 rici 的回答和更直接地回答标题中的问题之外，多个属性通常通过 a 传递`struct`，因此如果您将与`type`非终端关联的值更改为例如`ctype`( `%type <ctype> type`) 和`stype`( `type`) `%type <type> stype`（我认为是您的意图），然后将以下内容添加到您的`%union`

```
struct { int is_array, low, high; char * type; } ctype; 
```

那么您可以将`type`非终端的定义更改为

```
type
:    ARRAY '[' integer_constant RANGE integer_constant ']' OF stype
     { $$.is_array = 1; $$.low = $3; $$.high = $5; $$.type = $8; }
|    stype
     { $$.is_array = 0; $$.low = $$.high = -1; $$.type = $1; }
; 
```

当然，必须进行更多更改才能正确处理 new `ctype`，但这通常是在解析器堆栈中传播多个属性的方式。

# jsr286 - Portlet 中的 RenderParameter 与 RenderUrl

> ID：16044357
> 
> 赞同：0
> 
> 时间：2013-04-16T18:22:37.243
> 
> 标签：jsr286, spring-portlet-mvc

这两者之间有什么区别吗：这是从 ActionPhase 到 RenderPhase。

# 1

```
PortletURL manageUrl = response.createRenderURL();
manageUrl.setParameter("action", "search"); 
```

# 2

```
ActionResponse.setRenderParameter("action", "search"); 
```

何时使用其中一个

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T19:45:33.557

第一个片段生成一个渲染 URL，您将在页面中使用它作为带有“action”参数的渲染阶段的直接链接。

第二段代码为当前请求添加了一个“action”渲染参数，所以在你的动作阶段执行之后，渲染阶段将可以访问这个新参数。例如，它可以用于将数据从您的操作阶段传递到您的渲染阶段，或者如果您有多个渲染方法（使用@RenderMapping 注释的几个方法），则可以选择正确的渲染方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-22T17:30:56.077

情况1：

```
 **Code on Portlet** 

   PortletURL manageUrl = response.createRenderURL();
   manageUrl.setParameter("action", "search");
   request.setAttribute("manageUrl",manageUrl); 

  **Code on Jsp(it can be any view layer)** 

    <a href="${manageUrl}">Click here </a> 
```

案例二：

```
 **It can be any custom process action**
    public void processAction(..)
           {        
            ActionResponse.setRenderParameter("action", "search");
           }

       **It can be any custom render method**
    public void doView(..)
           {        

      System.out.println("Action value :-"+action);      
      ActionResponse.setRenderParameter("action", "search");

            } 
```

第二个片段也有一个限制。你不能使用 ActionResponse.setRenderParameter("action", "search"); 和 ActionResponse.sendRedirect("/some url"); 同时地。

# apache-flex - 调整组件大小以缩放

> ID：16044358
> 
> 赞同：2
> 
> 时间：2013-04-16T18:22:39.430
> 
> 标签：apache-flex, flex-spark

我有`SampleComponent`：

```
<?xml version="1.0" encoding="utf-8"?>
<s:Group xmlns:fx="http://ns.adobe.com/mxml/2009" 
         xmlns:s="library://ns.adobe.com/flex/spark" 
         xmlns:mx="library://ns.adobe.com/flex/mx"
         resizeMode="scale">
    <fx:Declarations>
        <!-- Place non-visual elements (e.g., services, value objects) here -->
    </fx:Declarations>

    <s:Image source="@Embed('assets/images/soLogo.jpg')" width="100%" height="100%" scaleMode="stretch" />

</s:Group> 
```

它仅具有一个可以拉伸以填充整个组件区域的图像，该组件`resizeMode`设置为“缩放”。

我使用以下代码将此组件放入应用程序中：

```
<local:SampleComponent id="sample" 
                       width="100%" 
                       height="{sample.width * 0.2961165048543689}" /> 
```

宽度设置为应用程序宽度的 100%。在我尝试正确缩放组件时，我将高度设置为宽度的百分比。

当应用程序窗口调整大小时，它看起来像这样：

![按比例调整大小](https://i.stack.imgur.com/k7MrQ.gif)

这里的最后一张图片是我的问题，它超出了应用程序的范围。

*   如何在不超出父容器边界的情况下调整组件大小？
*   有没有更正确的缩放组件的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T19:34:24.857

[这篇文章用](https://stackoverflow.com/questions/4089927/how-do-i-make-the-path-scale-to-the-container-in-flex-view-box)[这个图书馆](http://www.greensock.com/autofitarea/)回答

我想你也可以这样做：

```
width="{Math.min(container.width, container.height * ratio)}" 
height="{Math.min(container.height, container.width / ratio)}" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-14T13:02:35.030

我想我已经找到了一种更好的方法：

*   将`resizeMode`组件的设置为`scale`
*   `updateComplete`为事件添加监听器，在监听器中操作命名空间的`$scaleX`和`$scaleY`属性`mx_internal`。

例子：

```
<s:Group id="myContainer" resizeMode="scale">
    <!-- Some children, images etc... -->
    <s:updateComplete>
    <![CDATA[
            import mx.core.mx_internal;

            myContainer.mx_internal::$scaleX = Math.min(myContainer.mx_internal::$scaleX, myContainer.mx_internal::$scaleY);
            myContainer.mx_internal::$scaleY = myContainer.mx_internal::$scaleX;
    ]]>
    </s:updateComplete>
</s:Group> 
```

这种方式更好，因为...

*   它允许事先不知道纵横比。
*   它还允许复杂的布局和许多比例可以在运行时改变的子节点。

如果经常使用，可以创建一个库函数。

# ios - 本地化后找不到 Xib

> ID：16044360
> 
> 赞同：5
> 
> 时间：2013-04-16T18:22:45.503
> 
> 标签：ios, localization, xib

我在我的项目中添加了一个新的意大利语本地化，然后我本地化了一个 xib 文件以开始项目的翻译。问题是，现在当我在模拟器中运行我的项目时，没有找到任何 xib。

> （GAIUncaughtExceptionHandler.m:41）：未捕获的异常：无法在包中加载 NIB：'NSBundle ...

我正在使用 initWithNibName 实例化这个 xib 的文件所有者。

我已经尝试过 xib 的纯本地化和基本本地化，但它们都不起作用。

我正在像这样初始化所有者：

> [[SPConfigViewController alloc] initWithNibName:@"SPConfigViewController" bundle:nil];

编辑：

在我创建了 xib 的本地化版本后，我决定关闭 XCode 并再次打开它，它工作......

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-05-20T03:48:50.657

我有同样的经历，真是一次心灵之旅……

过程：

（假设一个项目在项目信息中选择了“使用基础国际化”）

1.  单击*File Navigator*中的 .xib 资源，它会加载 Interface Builder
2.  使用*文件检查器*，单击`Localize`按钮
3.  一个模态显示询问您想使用哪种语言（我无法使用“Base”，所以我选择了“English”）
4.  现在在*File Inspector*的 Localized 部分， English 旁边有一个复选标记，Base 旁边没有，所以我检查了 Base
5.  然后我得到了一个选择器来选择我希望如何本地化英语：*Interface Builder Cocoa Touch XIB*或*Localizable Strings*

好吧，我乐观地认为这会起作用，所以运行
......然后崩溃

> *** 由于未捕获的异常“NSInternalInconsistencyException”而终止应用程序，原因：“无法在包中加载 NIB：“NSBundle < /var/mobile/Applications/_____/_____.app>（已加载）”，名称为“__MY NIB STRING HERE___ ''

清理，构建，运行 -> 崩溃
选项键 + 清理，构建，运行 -> 崩溃
选项键 + 清理，删除应用程序，构建，运行 -> 崩溃
选项键 + 清理，重置模拟器，诅咒，构建，运行 -> 崩溃

退出 Xcode，重新启动 Xcode，构建，运行 -> 工作！哇。

我已经[针对这些问题](http://openradar.appspot.com/radar?id=2997407)打开了一个错误报告，如果您遇到此问题，您将复制它，以便开发人员工具团队知道它是一个反复出现的问题，我将不胜感激。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-30T11:15:21.133

这似乎是由于本地化 xib 文件将其移动到项目根目录内的新目录（base.lproj），之后 xcode 无法再找到 xib 文件。

我通过转到项目文件，选择我的目标，转到构建阶段选项卡来解决这个问题。然后，如果您展开“复制捆绑资源”文件夹，您应该注意到在 NSException 中被投诉的文件是红色的。我删除了这个文件并读取了在“base.lproj”子文件夹中找到的本地化版本，这似乎解决了这个问题。

据我所知，这需要为每个本地化的 xib 完成，这是大量不必要的浪费（感谢 xcode ......）但是，嘿，应用程序不再崩溃。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-11T02:31:15.873

确认您已为所有语言本地化文件。我没有检查英语，它会以这种方式失败。在我检查英语然后重新添加 cob 之前，我无法让它正确显示在“复制捆绑资源”中。你可以说它没问题，因为它不会是红色的，它会说“... in/MyProject/(localization).lproj”，当然，MyProject 将是你的项目的名称。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-16T19:12:33.950

你可以这样做：

```
[[YourViewController alloc] initWithNibName:@"YouViewController.xib" bundle:nil] 
```

不要为视图控制器的笔尖名称使用扩展名，请尝试如下：

```
[[YourViewController alloc] initWithNibName:@"YouViewController" bundle:nil] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-10-25T10:10:30.913

就我而言，我将其中一个本地化文件夹从 Base.lproj 重命名为 base.lproj。将其重命名并在 .pbxproj 中将所有出现的 base 替换为 Base 后，它就可以工作了！

# java - 我应该在 AlarmManager 中使用哪种类类型？

> ID：16044361
> 
> 赞同：0
> 
> 时间：2013-04-16T18:22:49.187
> 
> 标签：java, android, alarm

我正在构建一个将以这种方式工作的应用程序：每 X 分钟启用移动数据或 Wifi（如果选中复选框，则为 WiFi）Y 分钟，然后禁用它。

我做了什么：

*   `MainActivity`: 设置一个`AlarmManager`(with `setRepeating`) 以 `AlarmService`每 X 分钟执行一次。
*   `AlarmService`：启用移动数据或 Wifi，然后在 Y 分钟内设置一个新`AlarmManager`的呼叫`DisableMD`
*   `DisableMD`：禁用移动数据或 Wifi

`MainActivity`是一个活动，`AlarmService`并且`DisableMD`是服务。

我的问题：

1.  在这种情况下，服务是最好的方式吗？服务在后台运行，我不需要它。我只需要`AlarmManager`调用一个将执行一次操作的类（打开/关闭移动数据）。
2.  使用 setRepeating会`AlarmManager`每次还是只创建一次新服务？
3.  我需要用上次执行的时间`AlarmService`来更新 a `TextView`in并在. 实现 Messenger 真的很令人困惑，这也是我在这种情况下不想要服务的原因之一。`MainActivity``AlarmService``MainActivity`

各位，你们能回答我的问题和/或告诉我要在我的应用程序的“架构”中进行哪些更改吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T19:01:30.363

1.  您实际上*确实*需要在后台运行代码（只是不连续）。你是对的，a`Service`可能不是绝对必要的。如果您的操作非常快，您可能会将其放入[`BroadcastReceiver`](http://developer.android.com/reference/android/content/BroadcastReceiver.html). [这个](https://stackoverflow.com/questions/3117350/alarmmanager-and-broadcastreceiver-instead-of-service-is-that-bad-timeout)其他 SO 线程也可能有帮助。但是，如果您的工作需要花费大量时间，那么 a`Service`可能是您的最佳选择。
2.  通常，当您调用`Service`by Intent 时，`Service`如果它从最后一次仍然存在，则会重新使用它。您需要[阅读`Service`](http://developer.android.com/reference/android/app/Service.html). 生命周期信息在这里可能特别相关。
3.  您实际上并不需要您`AlarmService`与您`MainActivity`的 UI 进行交互。似乎您想要的是`MainActivity`设置您是在处理 WiFi 还是移动数据，让它显示最后一次执行时间，`AlarmService`设置最后一次执行时间，并让它读取您是否在处理 WiFi 或移动数据。本质上，您有两个要从`MainActivity`和读取和写入的设置`AlarmService`。考虑简单地将这些存储在[`SharedPreferences`](http://developer.android.com/guide/topics/data/data-storage.html#pref). 您可以避免直接在您`MainActivity`和`AlarmService`这种方式之间进行通信的需要。

# ruby-on-rails - rake db:setup 无法用于生产，因为我正在为尚未在初始化程序中创建的表引用模型

> ID：16044364
> 
> 赞同：0
> 
> 时间：2013-04-16T18:22:55.920
> 
> 标签：ruby-on-rails, postgresql, ruby-on-rails-3.2

我正在尝试在 EngineYard 上部署我的应用程序。就在`assets:precompile`它作为迁移的一部分检查数据库更改之前。这导致我失败，因为我在应用程序启动过程中预加载了一些选择框值：

```
STANDARD_ATTRIBUTES = {}
for standard in Standard.all
  begin
    STANDARD_ATTRIBUTES[standard.id] = {}
    valuehash = JSON.parse(IO.read(standard.json_file_name))
    for key,values in valuehash
      STANDARD_ATTRIBUTES[standard.id][key.to_sym] = values
    end
  rescue
    message = "Could not locate JSON file for the #{standard.name} standard. Perhaps you need to run 'bundle exec rake:monthly collect_unique_values_from_standard name='#{standard.name}'?"
    puts message
    ActiveRecord::Base.logger.error message
  end
end 
```

对 Standard.all 的第一次调用导致了一个问题，因为该表尚未创建。我怎样才能解决这个问题？[这里](https://stackoverflow.com/questions/11416626/running-rake-assetsprecompile-fails-when-theres-no-tables-yet)有一个答案，但这对我来说是不可理解的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T18:35:41.453

在整个块周围放置以下条件：

```
if ActiveRecord::Base.connection.table_exists?(Standard.table_name) 
```

`end`在这种特殊情况下，我更喜欢把它放在块的后面。

# scala - 多个备选方案之间的隐式搜索决策

> ID：16044366
> 
> 赞同：2
> 
> 时间：2013-04-16T18:23:10.540
> 
> 标签：scala, inheritance, typeclass, implicit

有没有办法在选择最具体的类型类中拥有多个合适的替代方案，而不产生发散的隐式扩展？它看起来像这样

```
trait A

trait B extends A

case class C extends B

trait Tester[-T] {def test (t : T) : Boolean}

object Tester{

  def test[T] (t : T)(implicit tester : Tester[T]) = tester.test(t)

  implicit def ATester = new Tester[A] {
    override def test (a : A) = true
  }

  implicit def BTester = new Tester[B] {
    override def test (b : B) = false
  }

}

val c = C()
Tester.test(c) 
```

我希望这产生错误，因为在继承层次结构中 C 更接近 B 而不是 A 。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T19:25:05.347

我将提供一些解释为什么它会以这种方式工作 - 另一个答案有一个可能的解决方法。

`Tester[A]`被选中的原因与逆变`Tester[B]`的类型`T`有关。`Tester[-T]`这意味着 for`Tester[A]`要成为 , 的子类`Tester[B]`，`A`必须是的超类`B`- 就像您的代码示例所示。

因此，当方法`test`（带有隐式参数）需要 的子类型时`Tester[C]`，替代方案将是`Tester[B]`（的子类`Tester[C]`）和`Tester[A]`（也是 的子类`Tester[C]`，但*更具体*）。这就是为什么根据选择最具体类型的规则，`Tester[A]`被选中的原因。

如果有一个`class D extends C`, 和一个返回的隐式函数`Tester[D]`， if 将不是参数解析的一部分`Tester[C]`。

[这里](http://scala-programming-language.1934581.n4.nabble.com/scala-Implicit-Priorirty-with-Contravariant-Type-td1993358.html)有更多关于它的信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T21:38:52.523

似乎这有帮助

```
trait Tester[T] {def test (t : T) : Boolean}

object Tester{

  def test[T] (t : T)(implicit tester : Tester[T]) = tester.test(t)

  implicit def ATester[T <: A] = new Tester[T] {
    override def test (a : T) = true
  }

  implicit def BTester[T <: B] = new Tester[T] {
    override def test (b : T) = false
  }

} 
```

有异议吗？

# javascript - OpenLayers 没有向我的地图添加标记

> ID：16044371
> 
> 赞同：1
> 
> 时间：2013-04-16T18:23:38.447
> 
> 标签：javascript, html, openlayers

我有一个 OpenLayers 地图，我使用 JavaScript 函数创建它。然后我有一个按钮，按下该按钮会调用另一个 JavaScript 函数，该函数具有向地图添加标记的代码。

由于某种原因，未添加标记。

OpenLayers 地图创建的代码：

```
function init()
    {
        var map, baseLayer;
        var options = {numZoomLevels: 5, isBaseLayer: true,};

        map = new OpenLayers.Map('map');            
        baseLayer = new OpenLayers.Layer.Image("My map","map.png", 
        new OpenLayers.Bounds(-2000, -2000, 1000, 1000),
        new OpenLayers.Size(1500,1500), options);
        map.addLayer(baseLayer);
        var center = new OpenLayers.LonLat(-100,-100);
        map.setCenter(center ,0);  
        map.addControl(new OpenLayers.Control.LayerSwitcher());
        map.addControl(new OpenLayers.Control.MousePosition());
        var size = new OpenLayers.Size(21,25);
        var offset = new OpenLayers.Pixel(-(size.w/2), -size.h);
        var icon = new OpenLayers.Icon('http://www.openlayers.org/dev/img/marker.png',size,offset);
        var markers = new OpenLayers.Layer.Markers( "Marker" );
        map.addLayer(markers);
    } 
```

添加标记的代码：

```
function addMarker(x, y)
    {    
        markers.addMarker(new OpenLayers.Marker(new OpenLayers.LonLat(x, y),icon));
    } 
```

任何帮助深表感谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T19:46:37.343

这对我来说很好：

```
var markers,icon;
function init(){
    var map, baseLayer;
    var options = {numZoomLevels: 5, isBaseLayer: true,};

    map = new OpenLayers.Map('map');            
    baseLayer = new OpenLayers.Layer.Image("My map","map.png", 
    new OpenLayers.Bounds(-2000, -2000, 1000, 1000),
    new OpenLayers.Size(1500,1500), options);
    map.addLayer(baseLayer);
    var center = new OpenLayers.LonLat(-100,-100);
    map.setCenter(center ,0);  
    map.addControl(new OpenLayers.Control.LayerSwitcher());
    map.addControl(new OpenLayers.Control.MousePosition());
    var size = new OpenLayers.Size(21,25);
    var offset = new OpenLayers.Pixel(-(size.w/2), -size.h);
    //instance the icon
    icon = new OpenLayers.Icon('http://www.openlayers.org/dev/img/marker.png',size,offset);
    //instance the marker layer
    markers = new OpenLayers.Layer.Markers( "Marker" );
    map.addLayer(markers);
}

function addMarker(x, y){    
    markers.addMarker(new OpenLayers.Marker(new OpenLayers.LonLat(x, y),icon));
} 
```

# flash - FlowPlayer 和 MP4 在 IE9 中不起作用

> ID：16044374
> 
> 赞同：0
> 
> 时间：2013-04-16T18:23:47.613
> 
> 标签：flash, internet-explorer-9, mp4, flowplayer

我有下面的 Flash 对象，我正在使用 FlowPlayer，我想尝试播放 .MP4 视频。

```
<object type="application/x-shockwave-flash" data="http://releases.flowplayer.org/swf/flowplayer-3.2.1.swf" width="450" height="285">
    <param name="movie" value="http://releases.flowplayer.org/swf/flowplayer-3.2.1.swf" />
    <param name="allowFullScreen" value="true" />
    <param name="wmode" value="transparent" />
    <param name="flashVars" value="config={'playlist':[{'url':'http://localhost:54350/flash/video.mp4','autoPlay':true}]}" />
</object> 
```

我发现让它在 IE7、8、FF 和 Chrome 上工作的唯一方法是使用上面的 flashvar 配置并在播放列表中设置绝对 URL。

我遇到的问题是这在 Internet Explorer 9 中不起作用。

有谁知道如何让这个工作？并且可能是一种不必使用播放列表的方法？我尝试设置“源”和“Src”参数，但没有骰子。也许有人有一个建议的方式来使用 IE9 的 HTML5 视频并回退到上面的其他版本或浏览器？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T18:31:30.710

我在这里找到了答案：[html5 video flash fallback advice](https://stackoverflow.com/questions/8211854/html5-video-flash-fallback-advice)

这就是诀窍，需要一些更改来支持自动播放，但这是对我有用的想法:-)

```
<video controls="controls" width="450" height="285" preload="metadata">
    <source src="http://localhost:54350/flash/video.mp4" type="video/mp4">
    <object id="flowplayer" width="450" height="285" data="http://releases.flowplayer.org/swf/flowplayer-3.2.1.swf" type="application/x-shockwave-flash">
        <param name="movie" value="http://releases.flowplayer.org/swf/flowplayer-3.2.1.swf">
        <param name="flashvars" value='config={"clip":"http://localhost:54350/flash/video.mp4"}'>
    </object>
    <p>No video playback capabilities. Download video:</strong> <a href="/flash/video.mp4">MP4 format</a></p>
</video> 
```

# c# - C# 使用 OpenXML 附加到 DOCX 文件

> ID：16044375
> 
> 赞同：0
> 
> 时间：2013-04-16T18:23:57.300
> 
> 标签：c#, .net, stream, openxml

我在 C# 中使用 OpemXML 来构建我的 DOCX 文件。我的代码如下所示：

```
using (WordprocessingDocument wordDoc = WordprocessingDocument.Open(wordFileNamePath, true))
{
    for (int i = 0; i < length; i++)
    {
        using (StreamWriter sw = new StreamWriter(i == 0 ? wordDoc.MainDocumentPart.GetStream(FileMode.Create) : wordDoc.MainDocumentPart.GetStream(FileMode.Append, FileAccess.Write)))
        {
            sw.Write(tempDocText.ToString());
        }
        if (i < length - 1)
        {
            tempDocText = CreateNewStringBuilder();
            InsertPageBreak(wordDoc);
        }
    }
    wordDoc.MainDocumentPart.Document.Save();
} 
```

在第二个循环中，当`wordDoc.MainDocumentPart.GetStream(FileMode.Append, FileAccess.Write)`我收到一个 ArgumentException 说“不支持 FileMode 值”时。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T18:50:40.097

我认为您的代码存在问题，您在 for 循环中初始化它之前使用**tempDocText.ToString()**，如下所示

```
using (StreamWriter sw = new StreamWriter(i == 0 ? wordDoc.MainDocumentPart.GetStream(FileMode.Create) : wordDoc.MainDocumentPart.GetStream(FileMode.Append, FileAccess.Write)))
{
    sw.Write(tempDocText.ToString()); //<-Used before Initialization
} 
```

并像在后面的代码块中一样初始化它

```
if (i < length - 1)
{
    tempDocText = CreateNewStringBuilder(); //<-Initializing it here.
    InsertPageBreak(wordDoc);
} 
```

除非您提供有关**tempDocText**的更多信息，否则很难提供帮助。

无论如何，如果您只想将文本添加到 docx 文件，那么以下代码可能会有所帮助。我在[这里](http://msdn.microsoft.com/en-us/library/office/ff478255.aspx)找到了。

```
public static void OpenAndAddTextToWordDocument(string filepath, string txt)
{   
    // Open a WordprocessingDocument for editing using the filepath.
    WordprocessingDocument wordprocessingDocument = 
        WordprocessingDocument.Open(filepath, true);

    // Assign a reference to the existing document body.
    Body body = wordprocessingDocument.MainDocumentPart.Document.Body;

    // Add new text.
    Paragraph para = body.AppendChild(new Paragraph());
    Run run = para.AppendChild(new Run());
    run.AppendChild(new Text(txt));

    // Close the handle explicitly.
    wordprocessingDocument.Close();
} 
```

# r - 如何在 R 中进行高斯消元（不要使用“求解”）

> ID：16044377
> 
> 赞同：4
> 
> 时间：2013-04-16T18:23:59.193
> 
> 标签：r, linear-algebra

```
A <- matrix(c(2,-5,4,1,-2.5,1,1,-4,6),byrow=T,nrow=3,ncol=3)
b <- matrix(c(-3,5,10),nrow=3,ncol=1)
p <- nrow(A)
U.pls <- cbind(A,b)
for (i in 1:p){
    for (j in (i+1):(p+1)) U.pls[i,j] <- U.pls[i,j]/U.pls[i,i]
    U.pls[i,i] <- 1
    if (i < p) {
       for (k in (i+1):p) U.pls[k,] <- 
                   U.pls[k,] - U.pls[k,i]/U.pls[i,i]*U.pls[i,]
    }
}
U.pls
x <- rep(0,p)
for (i in p:1){
  if (i < p){
     temp <- 0
     for (j in (i+1):p) temp <- temp + U.pls[i,j]*x[j]
     x[i] <- U.pls[i,p+1] - temp
  }
  else x[i] <- U.pls[i,p+1]
}
x 
```

# 输出

```
> U.pls
     [,1] [,2] [,3] [,4]
[1,]    1 -2.5    2 -1.5
[2,]    0  1.0 -Inf  Inf
[3,]    0  0.0    1  NaN
> x
[1] NaN NaN NaN 
```

这样，在某些情况下我无法解决解决方案。即使我知道错误在数学上发生的原因，我也无法修复 R 中的错​​误。帮我解决一些问题。先感谢您。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T19:15:54.250

我不得不重新排序你的矩阵`A`，不知道如何做一个通用代码：

```
A <- matrix(c(2,-5,4,1,-4,6,1,-2.5,1),byrow=T,nrow=3,ncol=3)
b <- matrix(c(-3,5,10),nrow=3,ncol=1)
p <- nrow(A)
(U.pls <- cbind(A,b))

U.pls[1,] <- U.pls[1,]/U.pls[1,1]

for (i in 2:p){
 for (j in i:p) {
  U.pls[j, ] <- U.pls[j, ] - U.pls[i-1, ] * U.pls[j, i-1]
 }
 U.pls[i,] <- U.pls[i,]/U.pls[i,i]
}

for (i in p:2){
 for (j in i:2-1) {
  U.pls[j, ] <- U.pls[j, ] - U.pls[i, ] * U.pls[j, i]
 }
}
U.pls 
```

编辑：

```
A <- matrix(c(2,-5,4,1,-2.5,1,1,-4,6),byrow=T,nrow=3,ncol=3)
b <- matrix(c(-3,5,10),nrow=3,ncol=1)
p <- nrow(A)
(U.pls <- cbind(A,b))

U.pls[1,] <- U.pls[1,]/U.pls[1,1]

i <- 2
while (i < p+1) {
 j <- i
 while (j < p+1) {
  U.pls[j, ] <- U.pls[j, ] - U.pls[i-1, ] * U.pls[j, i-1]
  j <- j+1
 }
 while (U.pls[i,i] == 0) {
  U.pls <- rbind(U.pls[-i,],U.pls[i,])
 }
 U.pls[i,] <- U.pls[i,]/U.pls[i,i]
 i <- i+1
}
for (i in p:2){
 for (j in i:2-1) {
  U.pls[j, ] <- U.pls[j, ] - U.pls[i, ] * U.pls[j, i]
 }
}
U.pls 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-05-15T08:21:04.220

抱歉，如果这个答案为时已晚。
我写了一个函数来进行高斯消除

注意：
i) 此函数仅适用于实数，不适用于变量。
ii) 在最后的返回中，我使用了函数 as.fractions()。这仅在 MASS 包中可用，您需要至少 R 版本 3.2.5 或更高版本才能使用它。如果你愿意，你可以省略这是，但矩阵的元素将是小数。
iii) 该函数还返回分解 PA = LDU 中使用的矩阵 如果您只希望分解 PA = LU 用作第二个参数 FALSE。

希望这有帮助！

```
gauss_elimination = function(matrix,diagonal = T){
  #This function performs the gaussian elimination for one column
  for_one_column = function(matrix, starting_row = 1, column = 1){
    for (i in (starting_row + 1):nrow(matrix)){
      L_table[i,column] <<-  matrix[i,column]/matrix[starting_row,column]
      matrix[i,] = matrix[i,] - matrix[i,column]/
        matrix[starting_row,column]*
        matrix[starting_row,]
    }
    return(matrix)
  }

  #This function changes a row of a matrix with another one
  change_lines = function(matrix,line_1,line_2,column_1 = 1,
                          column_2 =  ncol(matrix)){
    scapegoat = matrix[line_1,column_1:column_2]
    matrix[line_1,column_1:column_2] = matrix[line_2,column_1:column_2]
    matrix[line_2,column_1:column_2] = scapegoat
    return(matrix)
  }

  #This function checks if alternations need to be made
  checking_zeroes = function(matrix,starting_row,column){
    #If pilot is not zero
    if (matrix[starting_row,column] != 0){
      return ("No alternation needed")
      #If pilot is zero
    }else{
      row_to_change = 0
      for (i in starting_row:nrow(matrix)){
        if (matrix[i,column] != 0){
          row_to_change = i
          break
        }
      }
      #If both the pilot and all the elements below it are zero
      if (row_to_change == 0){
        return("Skip this column")
        #If the pilot is zero but at least one below it is not
      }else{
        return(c("Alternation needed",row_to_change))
      }
    }
  }

  #The main program
  row_to_work = 1 ; alternation_table = diag(nrow(matrix))
  L_table = diag(nrow(matrix))
  for (column_to_work in 1:ncol(matrix)){
    a = checking_zeroes(matrix,row_to_work,column_to_work)
    if (a[1] == "Alternation needed"){
      matrix = change_lines(matrix,as.numeric(a[2]),row_to_work)
      alternation_table = change_lines(alternation_table,row_to_work,
                                       as.numeric(a[2]))
      if (as.numeric(a[2]) != 1){
        L_table = change_lines(L_table,row_to_work,
                               as.numeric(a[2]),1,column_to_work - 1)
      }
    }
    if (a[1] == "Skip this column"){
      next()
    }
    matrix = for_one_column(matrix,row_to_work,column_to_work)
    if(row_to_work + 1 == nrow(matrix)){
      break
    }
    row_to_work = row_to_work + 1
  }
  if (diagonal == FALSE){
    return(list("P" = as.fractions(alternation_table),
                "L" = as.fractions(L_table),
                "U : The matrix after the elimination"=as.fractions(matrix)))
  }else{
    D = diag(nrow(matrix))
    diag(D) = diag(matrix)
    for (i in 1:nrow(D)){
      matrix[i,] = matrix[i,]/diag(D)[i]
    }
    return(list("P" = as.fractions(alternation_table),
                "L" = as.fractions(L_table),
                "D" = as.fractions(D),
                "U : The matrix after the elimination"=as.fractions(matrix)))
  }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-06-06T05:38:32.643

高斯 <- 函数 () { A <- 矩阵 ( c ( 2 , -5 , 4 , 1 , 4 , 1 , 1 , -4 , 6 ), byrow = T , nrow = 3 , ncol = 3 ) b <-矩阵 ( c ( -3 , 5 , 10 ), nrow = 3 , ncol = 1 ) U.pls <- cbind (A,b) p <- nrow ( A )

```
 r <- ncol ( U.pls )
  X <- matrix ( c(rep (0,p)))
  for ( i in 1 :(p-1))  {
    cons <-    U.pls[i+1,i]/ U.pls[i,i]
    for ( j in (i+1):(p))   {
        U.pls[j,] <-  U.pls[j,] -   U.pls[i,]  *   cons
            }
     }

    X [p] <- U.pls[ p,r]/ U.pls[p,p]

  for (k in (p-1):1)      {
       suma = 0
       for (l in (k+1):p) {
            suma = suma + U.pls[k,l]*  X[l]  }
          X[k] <- (U.pls[k,r]-   suma   )/ U.pls[k,k]
          }
  return (X) 
```

}

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-12-16T12:42:29.780

您可以通过`pracma`库进行高斯消除。

要安装它，您可以键入：

```
install.packages("pracma") 
```

然后，按如下方式使用它：

```
library(pracma)

A <- matrix(c(2,-5,4,1,-2.5,1,1,-4,6),byrow=T,nrow=3,ncol=3)
b <- matrix(c(-3,5,10),nrow=3,ncol=1)

rref(cbind(A, b) 
```

结果是：

```
 [,1] [,2] [,3]  [,4]
[1,]    1    0    0 -51.0
[2,]    0    1    0 -25.0
[3,]    0    0    1  -6.5 
```

# html - Internet Explorer 9 显示不正确

> ID：16044378
> 
> 赞同：0
> 
> 时间：2013-04-16T18:24:00.800
> 
> 标签：html, internet-explorer-9, css-float

我的网站在 IE 9 及更低版本中无法正确显示。我使用了 HTML5shim 并没有解决这个问题。

该网站在 chrome、firefox 等中看起来很棒

我的网站是 www.bucurestideals.com，我无法显示下面的 HTML 代码。

我的主要css代码如下：

```
body{
    width: 700px; 
    margin: auto;
    font-family: sans-serif;
}
/* Set styling for ALL h2 elements*/
h2{
    font-size: 39px;
    line-height: 43px;
    letter-spacing: -1px;
}

/*  default anchor styling for the page */
a{
    color: #276056;
    font-size: 14px; 
}

/* Set the hover over of the link */
a:hover {
 color: black;
}

/* Set the base font size and line height for all paragraphs */
p{
    font-size: 14px;
    line-height: 21px;
    font-family: 'Roboto', sans-serif;
}

/* Remove the default padding placed by the browser on the]
   ul element */
.meta {
    padding-left: 0;
    /* Override the default of ul margins */
    margin: 0 0 8px;
}

/*  style the anchor in the UL to have an italic style and 
    a specific font size */
.meta a, .post_info a{
    font-style: italic;
}

/* Style the li of the unordered list to be inline */
.meta li{
    display: inline;

}

/*  Place a '/' after each list item (li) */
.meta li:after{
    content: '\\';
    padding: 0 2px;
    color: #999;
}

/* hide the last '/' in the list item navigation */
.meta li:last-child:after{
    content: none;
}

/* Float the image to the left and add some space 
    between it and the right floated item
*/
article img{
    float: left;
}

/* Style the article's heading - remove default top
 margin top and bottom set by the browser
     */
article h2{ margin: 0; }

/* Float the conrinue link to the right */
.continue{
    float: right;

}

/* Add the brackets around the continue link*/
.continue:after{
    content: ')'
}
.continue:before{
    content: '('
}

/* Float the article div to the right and adjust the width
    so that it will fit to the right of the left floated
    element */
.preview{
    float: right;
    width: 550px;
}
/* style the post information */
.post_info{
    background-color: #f3f3f3;
    color: #999;
    padding: 3px;
    float: left;
    /* make sure that all text is the same
       size */
    font-size: 14px;
}
/* style the post info  anchor tag */
.post_info a {
    color: #999;
    text-decoration: none;

}

.post_info a:hover {
    color: black;
}

/* Clear any floats declared above it */
.body {
    clear: both;
    /* set text color */
    color: #575757;
} 
```

任何帮助将非常感激。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T18:25:44.917

将`<!DOCTYPE html>`（或其他一些 DOCTYPE）添加到 HTML 文件的开头。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T18:34:29.677

尽量不要将标签用作站点容器，而是使用 div 来完成这项工作。

```
<body>
<div class='site_container'>
//Every other element
</div>
</body> 
```

不要集中 body 元素，而是集中 .site_contaner

# grails - 通过生成的 id 检索域实例

> ID：16044379
> 
> 赞同：0
> 
> 时间：2013-04-16T18:24:06.187
> 
> 标签：grails, identity, grails-domain-class

我正在使用具有生成标识的域类：

```
class User {
   ...
   static mapping = {
      id generator: 'assigned', name: 'uid'
   }

   Long uid
   ...
} 
```

但是当我尝试使用检索实例时

```
User.get(1) 
```

它返回空值。如果我使用它确实有效

```
User.findByUid(uid) 
```

生成 id 时不能使用 Domain.get 或 Domain.read 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T20:05:54.430

即使分配了您的 id，也无需声明该属性。

```
class User {
  static mapping = {
    id generator: 'assigned' column: 'uid'
  }
} 
```

这里的关键是映射数据库中的列名。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T20:12:22.270

除了塞尔吉奥的回答

该`generator`策略`assigned`意味着应用程序`assign`在保存对象时必须有一个 id。如果您在下面做了类似的事情，那么您应该能够得到，`User.get(1)`否则在保存时会引发异常而不分配`id`

`def user = new User(id: 1).save(flush: true)`

# javascript - 从对象数组中获取数据

> ID：16044383
> 
> 赞同：-2
> 
> 时间：2013-04-16T18:24:19.343
> 
> 标签：javascript

我目前正在尝试将对象数组显示为 html 表中的行。我是 javascript 新手，无法访问数组中的单个元素。

在控制台中，数组是：[Object, Object, Object, ... Object, Object, Object] 总共 65 个对象。

每个对象都有一个名为 id 的字段，控制台中的每个对象显示如下：

```
0: Object

  ...

  id:   10

  ... 
```

我尝试使用以下代码访问 id：

```
for (var item in data) {
    console.log(item);
    console.log(item['id']);
} 
```

这向我显示了对象编号，后跟未定义的行。我知道数据是有价值的，因为我可以在控制台中查看它，但我无法使用点表示法或上述表示法访问。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-16T18:28:54.913

使用`for..in`循环时，它会遍历键。然后，您需要使用`data[item]['id']`来获得该值。

但是，您不应该使用`for..in`循环来遍历数组（除非它们是稀疏的）。相反，试试这个：

```
for( var i=0, l=data.length; i<l; i++) {
    console.log(i);
    console.log(data[i]['id']);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T18:28:27.827

您只需使用`data[item].id`. 循环中的事实项目`for-in`将给出索引。

前任：-

```
data=[
    {
        id:1
    },{
        id:2
    },{
        id:3
    },{
        id:4
    }
    ];
for(var ind in data)
{
    alert(data[ind].id);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-16T18:28:27.900

我相信您正在寻找：

```
for(var i=0;i<arrayname.length;i++){
...
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-16T18:28:46.037

你得到未定义，因为你的对象包含数组，并且该数组在其索引中包含对象。格式是这样的：

```
0:obj1
1:obj2 
```

您正在尝试直接访问对象而忽略数组索引。

尝试这个。

```
for(var j=0; j<data.lenght; j++){
console.log(item[j]['id']);

} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-16T18:29:03.157

您的 for 语句不正确。

尝试这个：

```
for(var item in data){
  var dataItem = data[item];

   console.log(dataItem.id);
} 
```

虽然一般来说，我发现使用 for 循环而不是 for..in 循环来循环数组项是更好的做法，所以这可能会更好：

```
var dLength = data.length;
for(var i=0; i<dLength; i++){
  var dataItem = data[i];

  console.log(dataItem.id);
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-16T18:31:12.750

如果您想在控制台中查看每个对象的内容，然后是每个对象的 id 属性，请尝试以下操作（至少在 firebug 和 chrome 控制台中有效）：

```
for (var item in data) {
console.log("%o", data[item]);
console.log("%o", data[item][id]); 
```

}

# php - 如何忽略某些型号的前缀？CakePHP

> ID：16044384
> 
> 赞同：0
> 
> 时间：2013-04-16T18:24:21.467
> 
> 标签：php, mysql, database, cakephp, mode

我必须从一个名为的表中读取数据，该表`sys_sbu`与我的应用程序位于同一数据库中。但是，我已设置`tr_`为所有表的前缀。当我尝试`$useTable = 'sys_sbu'`在我的模型上使用时，它确定它是`tr_sys_sbu`. 如何强制它忽略前缀？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T02:15:04.577

所以，试试这个：

```
class ExampleModel{
    var $useTable = "example";
    var $tablePrefix = "";
} 
```

现在好了:D

# ember.js - 从多个动态段创建链接

> ID：16044385
> 
> 赞同：0
> 
> 时间：2013-04-16T18:24:22.827
> 
> 标签：ember.js

我正在尝试构建一个博客类型的应用程序，该应用程序的 URL 包含类别和帖子（条目）ID。例如，我希望 URL 为`/apple/123`或`/basketball/456`。

到目前为止我尝试过的技术可以在[http://jsbin.com/ogorab/202/edit](http://jsbin.com/ogorab/202/edit)找到。

从索引模板：

```
<div class="row-fluid">
    <div class="span4">
        {{#each entry in content}}
        <h2>Heading</h2>

         {{#linkTo "entry" entry class="btn" }}{{entry.title}}{{/linkTo}}
        <p></p>
        {{/each}}
    </div>
</div> 
```

抛出错误：

> 未捕获的错误：断言失败：无法在未定义的对象上调用带有“id”的 get。

这是有道理的，因为该`linkTo`功能期望从看似只有 id 参数的内容构建链接，但无法指定用于构建正确 URL 的其他参数。

我的目标是建立一个链接列表，使它们每个都可以有两个动态段。

我发现登录 ember 的最接近的问题是[this one](https://github.com/emberjs/ember.js/issues/1334)，但没有给出最佳实践或示例，问题已关闭。

这种事情在 Ember 中可能吗？如果是这样，希望有人可以提供一些指导。

# javascript - 文本区域颜色值

> ID：16044390
> 
> 赞同：0
> 
> 时间：2013-04-16T18:24:40.937
> 
> 标签：javascript, html, css, textarea

我正在构建文本编辑器，现在我想更改某些特定单词的用户类型的颜色，例如`<html>`and `<body>`。

CSS：

```
.html{
    color: rgba(0, 91, 255, 0.52);
}
.body{
    color: rgba(255, 1, 1, 0.59);
} 
```

Javascript

```
function colorCode() {
    if (document.getElementById('textarea').value == '<html>') {
        document.getElementById('textarea').value == '<html>';
        document.getElementById('textarea').className = 'html';
    }
    if (document.getElementById('textarea').value == '<body>') {
        document.getElementById('textarea').value == '<body>';
        document.getElementById('textarea').className = 'body';
    }
} 
```

HTML：

```
<textarea class="lined" name="textarea" rows="10" cols="60" id="textarea" onkeyup="outPost(id); colorCode();"></textarea> 
```

现在我的问题是我不能一次创建多个值，因为当我写`<html>`然后`<body>`在 textarea 表单中时，颜色会改变但只有一次。我猜是因为当我输入第一个值时计算机读取值（`<html>`）它可以工作，但是当我输入第二个值时计算机将它读取为（`<html><body>`），还有其他方法可以解决它吗？

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T18:30:32.783

他们的代码读取方式，类名只会在 textarea 内容完全匹配`<html>`或`<body>`. 如果文本区域只需要包含这些值来触发颜色更改，您似乎可能需要子字符串匹配。所以你可能会这样重写：

```
function colorCode() {
    var textArea = document.getElementById('textarea');

    if (textArea.value.search('<html>') > -1) {
        textArea.className = 'html';
    }
    if (textArea.value.search('<body>') > -1) {
        textArea.className = 'body';
    }
} 
```

请注意，我还将测试区域节点存储到`textArea`其中，这样您就不必每次想要像以前那样对其进行操作时都在 DOM 中搜索该节点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T18:32:09.513

我认为您应该使用 contains 方法进行比较，而不是比较整个 textareas 内容的值。

像这样：

```
document.getElementById('textarea').contains('<html>') 
```

您还需要寻找结束标签，然后像：

```
document.getElementById('textarea').contains('</html>') 
```

# asp.net-mvc-4 - ASP.Net MVC - 如何在控制器中获取具有选定值的下拉列表集合

> ID：16044391
> 
> 赞同：0
> 
> 时间：2013-04-16T18:24:43.007
> 
> 标签：asp.net-mvc-4

我有一个包含多个列表项的无序列表，其中每个列表项都有一个复选框和一个下拉列表。

我想获得与选中的复选框相对应的每个下拉列表的选定下拉值。

我可以很容易地获得通过控制器参数**int[] checkboxes 选中**的复选框。这给出了每个被选中的复选框的值。

现在，如何获取这些选中复选框旁边的下拉列表的选定值。

我是否必须使用 javascript 来捕获选定的值并将其传递给控制器​​？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T20:46:11.097

您需要使用比`int[]`控制器更复杂的模型：

```
public class CheckedListModel
{
    public bool IsChecked { get; set; }

    public int SelectedValue { get; set; }

    public SelectList Items { get; set; }
} 
```

呈现此类模型列表的示例视图：

```
@model CheckedListModel[]

@using (Html.BeginForm())
{
    <ul>
        @for (int i = 0; i < Model.Length; i++)
        {
            <li>
                @Html.CheckBoxFor(m => m[i].IsChecked)
                @Html.DropDownListFor(m => m[i].SelectedValue, Model[i].Items)
            </li>
        }
    </ul>
    <input type="submit" value="Save"/>
} 
```

和控制器：

```
 [HttpGet]
    public ActionResult Index()
    {
        return View(new CheckedListModel[]
            {
                //Sample data
                new CheckedListModel{Items = new SelectList(new []
                    {
                        new SelectListItem{Text = "Text 1", Value="1"},
                        new SelectListItem{Text = "Text 2", Value="2"},
                        new SelectListItem{Text = "Text 3", Value="3"},
                    }, "Value", "Text")},
                new CheckedListModel{Items = new SelectList(new []
                    {
                        new SelectListItem{Text = "Text 5", Value="5"},
                        new SelectListItem{Text = "Text 6", Value="6"},
                    }, "Value", "Text")},
            });
    }

    [HttpPost]
    public ActionResult Index(CheckedListModel[] models)
    {
        IEnumerable<CheckedListModel> checkedItems = models.Where(m => m.IsChecked);
        //Rest of the code
    } 
```

# java - 如何在 web.xml 中重定向

> ID：16044393
> 
> 赞同：1
> 
> 时间：2013-04-16T18:24:46.767
> 
> 标签：java, google-app-engine, jsp, servlets

我正在开发一个 GAE/J 应用程序，我有以下结构：

```
- war
    |
    - mobile
    |      |
    |      - assets
    |      |      |
    |      |      + a.jpg
    |      |      + b.gif
    |      |      + c.js
    |      + a.jsp
    |      + b.jsp
    |      + index.jsp
    |      + d.css
    |      + e.css
    |
    + landing.jsp 
```

现在在 web.xml 中，我有一个`/mobile` 指向`<jsp-file>/mobile/index.jsp<jsp-file>`. 在我的`index.jsp`中，我使用相对寻址来引用所有必需的资源，如 JS 文件、CSS 文件和图像；`our_domain/mobile/index.jsp`如果我在浏览器中输入，这效果很好。但是当我键入时`our_domain/mobile`，它会提供正确的文件（index.jsp），但每个相对地址都会中断，这意味着没有 CSS、没有 JS、没有图像。根据我的调查，它似乎`web.xml`实际上并没有重定向，而是调用指定的 JSP/Servlet 来响应特定的 URL 模式。这不适用于相对寻址，因为对于真正的重定向来说是正确的路径信息会留在根目录中。在这种情况下，如何确保相对地址按预期工作？

[编辑] 我尝试了多种配置。现在`/mobile`URL 可以正常工作，我的所有 CSS 都已加载，但`/mobile/`没有加载我的 CSS。这是我的映射：

```
<servlet> <description>Landing page on mobile site</description> 
 <display-name>MobileIndex</display-name>
 <servlet-name>MobileIndex</servlet-name>
 <jsp-file>/mobile/index.jsp</jsp-file> 
</servlet>

<servlet-mapping>
 <servlet-name>MobileIndex</servlet-name>
 <url-pattern>/mobile/</url-pattern>
</servlet-mapping> 

<servlet-mapping>
 <servlet-name>MobileIndex</servlet-name>
 <url-pattern>/mobile</url-pattern>
</servlet-mapping> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-07-12T00:33:25.590

我不确定重定向是你真正想要的。您的应用程序的良好组织是：

`myapp/ pom.xml src/ main/ java/ ... Your Source Code ... webapp landing.jsp assets/ a.jpg b.gif c.js mobile/ index.jsp a.jsp b.jsp` [当然，您可以使用appengine-web.xml](https://cloud.google.com/appengine/docs/standard/java/config/appref)`<public-root>`的和`<static-files>`元素 更改资产的位置。

# c - 数组的最大值

> ID：16044394
> 
> 赞同：0
> 
> 时间：2013-04-16T18:24:56.780
> 
> 标签：c, arrays, function, max

我试图找出 3 个团队中哪一个在我的程序中具有超过 95% 的最大频率，但我遇到了几个问题。首先，我创建了一个函数来找到每个团队的最大值。然后我正在考虑将每个团队的最大值保存到一个数组中，然后调用函数以找到该数组中的最大值，但我无法让它按我的意愿工作。从我的结果来看，我似乎有内存分配问题。有什么建议么？很抱歉形成......我是C的新手。

编辑我的输出是

> 如果我添加数字 {99 98 99 30 30 95 20 96 99}
> 
> 第一队

```
 [0-9]        0
   ...
  [95-100]      **3** 
```

> {99 98 99} 行中的最大值为 3

```
2nd row   0-9         0
           ...
          30-35       2
           ...
          95-100      **1**
     the max is 1
                    from the row {30 30 95}
 3rd row  0-9          0
           ...
          20-25        1
           ...
          95-100       **2**
the max is 2                  from the row {20 96 99} 
```

我想做的事情是找到 3 个团队中的最大值。在这种特殊情况下，[3 1 2] 的最大值将是 3。这就是为什么我决定将这些值存储在一个数组中:) 但是我有一些问题，因为我无法正确存储它们，并且在调用函数以找到整个最大值之后。

```
#include <stdio.h>
#define   S1 3
#define   COUNTER   20
#define   S2 3

int max_array(int a[], int num_elements);
int main(){
float A[S1][S2];
int   i, j, k, l, low, high, max;
int   group[COUNTER] = {0};
int arr[S1] = {0};
for( i = 0 ; i < S1 ; i++ ){

    for(j=0; j<S2;j++){  

        scanf("%f", &A[i][j]);

    }                                 
}

for(i=0;i<S1;i++){

    memset(group, 0, sizeof(group));

    for(j=0;j<S2;j++){

        ++group[(int)(A[i][j] - 1 ) / 5] ;
    }
    printf("\n");
    printf(" GROUP||     RANGE||     FREQUENCY\n\n") ;
    for( k = 0 ; k < COUNTER ; k++  ){                                              
        low  = k * 5 ;
        high = low + 5 ;
        printf("  %2d||    %3d to %3d||       %d\n", k+1, low, high, group[k]);

        if(k==19){
           max = max_array(group,COUNTER);
           arr[i]=max;
         }
      }
    printf("The max is %d\n", arr[i]);
   }    
   for(l=0;l<S1;l++){
    printf("The max is %d\n", arr[i]);
  }
  getch();                   
 }

int max_array(int group[], int num_elements){
int i,j, max;
max=group[0];
for (i=1; i<num_elements; i++){
    if (group[i]>max && i==num_elements-1){
        max=group[i];
    }
  }
 return(max);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T18:56:49.060

您需要包含 string.h 才能使用 memset，并将 getch 更正为 getc。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T18:35:55.827

```
#include <stdio.h>
#define   S1 3
#define   COUNTER   20
#define   S2 3

int max_array(int a[], int num_elements);
int main(){
    float A[S1][S2];
    int   i, j, k, l, low, high, max;
    int   group[COUNTER] = {0};
    int arr[S1] = {0};
    for( i = 0 ; i < S1 ; i++ ){

        for(j=0; j<S2;j++){  

            scanf("%f", &A[i][j]);

        }                                 
    }

    for(i=0;i<S1;i++){

        memset(group, 0, sizeof(group));

        for(j=0;j<S2;j++){

            ++group[(int)(A[i][j] - 1 ) / 5] ;
        }
        printf("\n");
        printf(" GROUP||     RANGE||     FREQUENCY\n\n") ;
        for( k = 0 ; k < COUNTER ; k++  ){                                              
            low  = k * 5 ;
            high = low + 5 ;
            printf("  %2d||    %3d to %3d||       %d\n", k+1, low, high, group[k]);

            if(k==19){
               max = max_array(group,COUNTER);
               arr[i]=max;
            }
        }
        printf("The max is %d\n", arr[i]);
    }    
    for(l=0;l<S1;l++){
        printf("The max is %d\n", arr[i]);
    }
 return 0;                    
}

int max_array(int group[], int num_elements){
    int i,j, max;
    max=group[0];
    for (i=1; i<num_elements; i++){
        if (group[i]>max && i==num_elements-1){
            max=group[i];
        }
    }
    return(max);
} 
```

# database - oracle sql（缺少左括号

> ID：16044396
> 
> 赞同：0
> 
> 时间：2013-04-16T18:25:17.017
> 
> 标签：database, oracle

我试图创建一个名为 grad_candidates 的表

```
 CREATE TABLE grad_candidates
    (student_id    NUMBER(6),
    last_name VARCHAR2,
    first_name VARCHAR2,
    credits NUMBER(3),
    graduation_date DATE DEFAULT SYSDATE); 
```

ORA-00906: 缺少左括号，谁能帮忙？？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-16T18:27:02.140

`VARCHAR2`需要一个数字绑定，例如：

```
last_name VARCHAR2(30), 
```

因此，将您的代码更改为：

```
 CREATE TABLE grad_candidates
    (student_id  NUMBER(6),
    last_name VARCHAR2 (255),
    first_name VARCHAR2 (255),
    credits NUMBER(3),
    graduation_date DATE DEFAULT SYSDATE); 
```

[了解有关创建表语法的更多信息](http://docs.oracle.com/cd/B28359_01/server.111/b28310/tables003.htm)

# java - 将新的 JButton 添加到已经存在的二维 JButton 数组

> ID：16044404
> 
> 赞同：1
> 
> 时间：2013-04-16T18:25:40.997
> 
> 标签：java, swing, jbutton, actionlistener

所以我对编程比较陌生，我正在尝试创建一个基本的跳棋游戏。我目前遇到的问题是，当我单击一个包含一块我需要用新按钮替换它的 JButtons 时它的具体位置。到目前为止，虽然它正在删除所说的 JButton 但没有用新的 JButton 替换它，但我到目前为止所拥有的代码。

在将其应用于整个电路板之前，我一直试图仅在 0,0 块上实现这一点。

```
 import java.awt.*;
  import javax.swing.*;
  import java.awt.event.*;
  import java.util.*;

 public class checkersBeBitchin extends JFrame{
JButton[][] squares = new JButton[8][8];
Container box = getContentPane();
int[][] pieceTracker = new int[8][8];
JPanel board = new JPanel();

/**
 * @param args
 */
public static void main(String[] args) {
    checkersBeBitchin begin = new checkersBeBitchin();

}

public checkersBeBitchin(){
    box.setLayout(new BorderLayout());
    makeBoard();
    setVisible(true);
    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    setLocationRelativeTo(null);
    setSize(600,600);
    setTitle("Checkers");
    }

@SuppressWarnings("deprecation")
private void makeBoard() {

    board.setLayout(new GridLayout(8,8));
    for (int i=0; i<8; i++){
        for (int j=0; j<8; j++) {
            squares[i][j] = new JButton();
            ActionListener actionListener = new Board();
            squares[i][j].addActionListener(actionListener);
            if((i%2 != 0 && j%2 !=0) ||(i%2==0 && j%2 == 0) ){
                    squares[i][j].setBackground(Color.black);
                    squares[i][j].setLabel("xy "+i+j);
                    //System.out.println("Black"+i+","+j); debugging
                    if(i<3){
                        int blue = 1;
                        Icon piece = new ImageIcon(getClass().getResource("/resources/piece.png"));
                        JButton button = new JButton();
                        JLabel bluePiece =new JLabel(piece);
                        pieceTracker[i][j]=blue;
                        //squares[i][j].setRolloverIcon("image dir") to make it prettier down the road.
                        squares[i][j].add(bluePiece);
                        ActionListener Listener = new Blue();
                        button.addActionListener(Listener);
                        }
                    else if (i>4){
                        int red=-1;
                        Icon piece = new ImageIcon(getClass().getResource("/resources/piece2.png"));
                        JButton button = new JButton(piece);
                        JLabel redPiece =new JLabel(piece);
                        squares[i][j].add(redPiece);
                        pieceTracker[i][j]=red;
                        ActionListener Listener = new Red();
                        button.addActionListener(Listener);
                        //squares[i][j].setRolloverSelectedIcon("/resources/piece2alt.png");
                        }

            }
            else{
                squares[i][j].setBackground(Color.white);
                squares[i][j].setLabel("xy "+i+j);
                pieceTracker[i][j]=0;
                //System.out.println("White"+i+","+j); //debugging
                }
            board.add(squares[i][j]);
            }   
        }
    box.add(board, BorderLayout.CENTER);
    }
private class Blue implements ActionListener{

        public void actionPerformed (ActionEvent e){
        System.out.println("You sexy Blue beast.");
        Object x = e.getSource();
        Component comp = (Component) x;
        board.remove(comp);
        JButton replace = new JButton();
        replace.setBackground(Color.GREEN);
        squares.toString();
        squares[5][5].add(replace);
        board.revalidate();
        board.repaint();
        System.err.println(x);

        }
    }

private class Red implements ActionListener{

    public void actionPerformed (ActionEvent e){
    //  System.out.println("You sexy Red beast.");
        Object x = e.getSource();
        Component comp = (Component) x;
        board.remove(comp);
        board.revalidate();
        board.repaint();

        }
}
private class Board implements ActionListener{

    public void actionPerformed (ActionEvent e){

        Object x = e.getSource();
        Component comp = (Component) x;
    //  System.out.println(comp);
        board.remove(comp); //removes the piece
    //  System.out.println("You clicked the board. Good for you.");
        if (e.getActionCommand().equals("xy 00")){
            System.out.println("Awesome");
    //      String s = e.getActionCommand();
            String jj = Character.toString(s.charAt(4));
            String ii = Character.toString(s.charAt(3));
    //      System.out.println("j:"+jj+" i:"+ii);
            int coordsI = Integer.parseInt(ii);
            int coordsJ = Integer.parseInt(jj);
            JButton replace = new JButton();
            replace.setBackground(Color.GREEN);
    //      squares.toString();
            squares[coordsI][coordsJ].add(replace);
            board.revalidate();
            board.repaint();
            }
        board.revalidate();
        board.repaint();
        }
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T19:32:56.240

我不会添加/删除按钮，而是在模型中保留正方形的状态。通过这样做，您可以切换任何知道其新状态的正方形的状态。

```
public class MyCheckerSquare extends JButton {
    private CheckerPiece presentPiece;

    public MyCheckerSquare(Color background) {
        super();

        setBackground(background);
    }

    public void setCheckerPiece(CheckerPiece piece) {
        presentPiece = piece;
        // Change the icon regarding the given piece
    }
}

public enum CheckerPiece {
    BLACK, RED
} 
```

所有的棋子都将由另一个类处理，有点像控制器。

# google-bigquery - 从 BigQuery jobId 获取执行的查询

> ID：16044407
> 
> 赞同：2
> 
> 时间：2013-04-16T18:25:53.513
> 
> 标签：google-bigquery

使用[BigQuery 作业列表 API](https://developers.google.com/bigquery/docs/reference/v2/jobs/list)，我可以检索已执行作业及其状态的列表。有没有一种快速的方法来通过作业引用检索执行的查询？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T19:10:26.333

知道了。可以在以下位置找到必要的信息：

[https://developers.google.com/bigquery/docs/reference/v2/jobs/get](https://developers.google.com/bigquery/docs/reference/v2/jobs/get)

需要工作 ID 和项目 ID 的地方。

# opengl - 使用旋转矩阵确定对象的右向量

> ID：16044409
> 
> 赞同：0
> 
> 时间：2013-04-16T18:25:59.420
> 
> 标签：opengl, matrix, glm-math

我试图找到一个我已经计算了旋转矩阵的对象的右向量，以便它可以在 3d 空间中扫射。到目前为止，我已经得到

```
 glm::quat gOrientation2 = glm::quat(glm::radians(entity.orientation));
    glm::mat4 RotationMatrix = glm::mat4_cast(gOrientation2);
    entup = glm::vec3(RotationMatrix[1][0], RotationMatrix[1][1], RotationMatrix[1][2]);
    entforward = glm::vec3(RotationMatrix[2][0], RotationMatrix[2][1], RotationMatrix[2][2]);
    entright = glm::vec3(RotationMatrix[0][0], RotationMatrix[0][1], RotationMatrix[0][2]) ; 
```

在盯着它看了一会儿之后，我发布了它左右移动的处理程序，思考问题是否真的存在于那里。

```
//the (10, -10, 10) vec3 is just a generic speed that moves 
//it forward then multiplied by dir.
if (glfwGetKey(65) == GLFW_PRESS){
    if(entity.player == 1)
        entity.position += glm::vec3(10,-10,10)*entright*deltaTime;
}
if (glfwGetKey(68) == GLFW_PRESS){
    if(entity.player == 1)
        entity.position -= glm::vec3(10,-10,10)*entright*deltaTime;
} 
```

只要我只俯仰和偏航，这一直工作得很好。一旦物体试图滚动，它的右矢量就会与它应该的位置成 90 度角。我知道我可以提取 RotationMatrix 的第一行来获取 Right，但这与上述代码的结果相同。

图片说明问题 [http://img442.imageshack.us/img442/5046/directionexample.jpg](http://img442.imageshack.us/img442/5046/directionexample.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T18:33:18.470

您将四元数相乘的顺序令人困惑。尝试改变

```
glm::quat gOrientation2 = rY*rX*rZ; 
```

至

```
glm::quat gOrientation2 = (rX*rY)*rZ 
```

正如您所说，做叉积没有意义；直接从旋转矩阵中获取正确的向量。

这不是使用 glm 将欧拉角转换为四元数然后是旋转矩阵的最有效或最简洁的方法。glm 为此内置了函数；检查文档。

# c# - 为什么我的方法没有返回任何有效的 SQL Server 实例？

> ID：16044410
> 
> 赞同：0
> 
> 时间：2013-04-16T18:25:59.723
> 
> 标签：c#, sql-server, sql-server-2008-r2, smo

我有一段代码应该返回我机器上安装的所有 SQL Server 实例。它看起来像这样：

```
DataTable dtLocalServers = SmoApplication.EnumAvailableSqlServers(true);

foreach (DataRow dServer in dtLocalServers.Rows)
{
   Console.WriteLine(dServer.ToString());
} 
```

它可以工作、编译和运行。但是，生成的数据表不是很有用。它看起来像这样：

```
Name    |  Server   |   Instance   |   IsClustered | Version   |   IsLocal
IAN-PC  |  IAN-PC   |              |   True        |           |   True 
```

问题是虽然这会返回一个结果，但这并没有给我任何关于服务器的信息。特别是，我正在尝试获取版本（SQL Server 2008 Express R2 或 SQL Server Express 2012），我假设它应该在“版本”字段中。我知道我有两个副本在本地运行以进行此测试。

我还能做些什么来获得更好的结果吗？

编辑： IAN-PC 是我电脑的名称。我的电脑上有两个正在运行的 SQL Server 实例，IANSQLEXP (SQL Server 2008 Express R2) 和 SQLEXPRESS (SQL Server Express 2012)。在 SQL Server 配置管理器中，还有两个未运行的代理和一个未运行的 SQL Server Browser。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T18:43:12.763

您可以枚举服务器并将它们转换为`List<Server>`.

```
var servers =
    SmoApplication
        .EnumAvailableSqlServers()
        .AsEnumerable()
        .Select(s => new Server(s[0].ToString())) //Server name is first column
        .ToList(); 
```

您可以使用该`Version`属性[`Server`](http://msdn.microsoft.com/en-us/library/microsoft.sqlserver.management.smo.server.aspx)来获取服务器版本。

```
var unavailableServers= new List<Server>();
var activeServers = new List<Server>();
var tasks = new List<Task>();

foreach(var server in servers)
{
    var task =
        Task.Run(() =>
            {
                try
                {

                    server.ConnectionContext.Connect();
                    server.ConnectionContext.Disconnect();
                    activeServers.Add(server);
                }
                catch(ConnectionFailureException)
                {
                    unavailableServers.Add(server);
                }
            });

    tasks.Add(task);
}

Task.WaitAll(tasks.ToArray()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T14:51:15.300

这里的问题是我的计算机上的 SQL Server Browser 已停用。我找到答案的帖子在[这里](https://stackoverflow.com/questions/7460567/enumavailablesqlservers-returns-empty-list)。来自 MSDN 的另一个有用的链接在[这里。](http://msdn.microsoft.com/en-us/library/ms165734%28v=sql.90%29.aspx) 谢谢你们的帮助，伙计们！

# requirejs - 如何查看 durandal 优化器中的错误？

> ID：16044412
> 
> 赞同：0
> 
> 时间：2013-04-16T18:26:11.310
> 
> 标签：requirejs, durandal

我的 durandal 项目的优化器停止工作。我在 cmd.exe 中运行它。关于我可以去哪里查看任何错误的任何想法？它确实打印出它在做什么，但没有错误。然后它无法生成我的 main-built.js 文件。（好吧，它会产生一个空白）。

这是它的输出：

出于本示例的目的，我的项目被称为“myapp”，它位于 c:\projects

```
C:\Projects\myapp\App\durandal\amd>c:\projects\myapp\App\durandal\amd\optimizer.exe --source c:\projects\myapp\app\

Using default base configuration.
Configuring for deploy with almond (custom).
{
  "name": "durandal/amd/almond-custom",
  "inlineText": true,
  "stubModules": [
    "durandal/amd/text"
  ],
  "paths": {
    "text": "durandal/amd/text"
  },
  "baseUrl": "c:\\projects\\myapp\\app\\",
  "mainConfigFile": "c:\\projects\\myapp\\app\\main.js",
  "include": [
    "c:/projects/myapp/app/customViewEngine",
    "c:/projects/myapp/app/main-built",
    "c:/projects/myapp/app/main",
    "c:/projects/myapp/app/durandal/app",
    "c:/projects/myapp/app/durandal/composition",
    "c:/projects/myapp/app/durandal/events",
    "c:/projects/myapp/app/durandal/http",
    "text!c:/projects/myapp/app/durandal/messageBox.html",
    "c:/projects/myapp/app/durandal/messageBox",
    "c:/projects/myapp/app/durandal/modalDialog",
    "c:/projects/myapp/app/durandal/system",
    "c:/projects/myapp/app/durandal/viewEngine",
    "c:/projects/myapp/app/durandal/viewLocator",
    "c:/projects/myapp/app/durandal/viewModel",
    "c:/projects/myapp/app/durandal/viewModelBinder",
    "c:/projects/myapp/app/durandal/widget",
    "c:/projects/myapp/app/durandal/bindings/datePicker",
    "c:/projects/myapp/app/durandal/plugins/router",
    "c:/projects/myapp/app/durandal/transitions/entrance",
    "c:/projects/myapp/app/viewmodels/batchsubmissions",
    "c:/projects/myapp/app/viewmodels/customers",
    "c:/projects/myapp/app/viewmodels/dashboard",
    "c:/projects/myapp/app/viewmodels/emailtitles",
    "c:/projects/myapp/app/viewmodels/entersubmissions",
    "c:/projects/myapp/app/viewmodels/flickr",
    "c:/projects/myapp/app/viewmodels/help",
    "c:/projects/myapp/app/viewmodels/programdetails",
    "c:/projects/myapp/app/viewmodels/shell",
    "c:/projects/myapp/app/viewmodels/titlesetup",
    "c:/projects/myapp/app/viewmodels/welcome",
    "text!c:/projects/myapp/app/views/batchsubmissions.html",
    "text!c:/projects/myapp/app/views/customers.html",
    "text!c:/projects/myapp/app/views/dashboard.html",
    "text!c:/projects/myapp/app/views/detail.html",
    "text!c:/projects/myapp/app/views/emailtitles.html",
    "text!c:/projects/myapp/app/views/entersubmissions.html",
    "text!c:/projects/myapp/app/views/flickr.html",
    "text!c:/projects/myapp/app/views/help.html",
    "text!c:/projects/myapp/app/views/programdetails.html",
    "text!c:/projects/myapp/app/views/shell.html",
    "text!c:/projects/myapp/app/views/titlesetup.html",
    "text!c:/projects/myapp/app/views/welcome.html"
  ],
  "exclude": [],
  "keepBuildDir": true,
  "optimize": "uglify2",
  "out": "c:\\projects\\myapp\\app\\main-built.js",
  "pragmas": {
    "build": true
  },
  "wrap": true,
  "insertRequire": [
    "main"
  ]
}
Deleting old output file.

Tracing dependencies for: durandal/amd/almond-custom 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T19:19:57.543

这是所有可用的选项

1.  **--mode**指示优化器是否应该只“生成”r.js 配置或实际“构建”优化的 JS 应用程序。默认值构建
2.  **--source**包含应用程序源的文件夹的路径。
3.  **--config**自定义 r.js 配置文件的路径，用作生成配置的基础。
4.  **--verbose**表示应该使用详细的控制台日志记录。默认值假
5.  **--loader**指示为“almond”或“require”优化哪个脚本加载器。默认值杏仁
6.  **--plugin**用于将视图优化到最终构建文件中的视图插件。默认值文本
7.  **--pluginExtension**查看文件扩展名。默认值 .html

使用优化器是这样的：

```
optimizer.exe --source c:\project1\app\ --mode generate 
```

所以，也许你应该试试这个：

```
optimizer.exe --verbose true 
```

如果这不起作用..那么你总是可以拉下源代码并尝试在本地调试它。

# sorting - 排序中 2 位小数的舍入分数 - SOLR 4.2

> ID：16044413
> 
> 赞同：2
> 
> 时间：2013-04-16T18:26:19.397
> 
> 标签：sorting, solr, lucene, full-text-search, search-engine

如何将搜索结果的分数四舍五入到小数点后 2 位？

我可以使用四舍五入的分数吗？

我需要一些想法，例如：

```
/?q=term&sort=round(score, 2) desc, orders desc 
```

在 Solr 4.2 版中

我想按字段*顺序*对搜索结果进行排序，但我首先没有得到相关结果。我得到了几千个结果。所以，我想在 field *orders*和*score*之间做出妥协。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T19:12:19.943

函数查询需要索引字段并且`score`不是真实字段，因此您不能使用它。但我喜欢 femtoRgon 的方法。这是另一个版本

您可以将 rint()/product() 与[query()结合使用](http://wiki.apache.org/solr/FunctionQuery#query)

```
q=rint(product(query({!v="author:alice"}) ,100))&defType=func&fl=*,score&sort=score desc, author desc 
```

用您的查询替换*作者：alice 。*我不确定性能影响是什么，因为它运行子查询。你必须检查一下。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T18:45:18.723

我不知道没有`round` [函数查询](http://wiki.apache.org/solr/FunctionQuery#Sort_By_Function)，但是有`rint`哪些舍入到一个 int，我相信你可以像这样使用它：

```
sort=rint(product(score,100)) desc, orders desc 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-01T11:00:24.347

而不是使用默认的 solr QueryComponent 使用[scorePrecisionComponent](http://newsolr.blogspot.in/2015/06/solr-score-rounding-custom-component.html)，它将切断额外的精度并在您的排序条件上给予更多的权重。您可以通过配置 solr 参数 (scorePrecision) 将分数精度更改为您想要的值。

# java - 如何在 PCM 原始数据中添加噪声

> ID：16044417
> 
> 赞同：1
> 
> 时间：2013-04-16T18:26:32.737
> 
> 标签：java, android, signal-processing

现在我有一个直接从 WAV 文件加载的 PCM 原始字节数组，现在我必须将噪声添加到原始字节数组中。我的要求是在不知道添加噪声的情况下无法解码结果，如果我确切知道噪声是什么，我也可以去除噪声。我目前的想法是将原始字节数组转换为短数组，并生成一个噪声短数组，其随机生成数在 2^-15 和 2^15 之间，并逐个插槽添加这两个数组。但是看起来这种方法不能保证我可以恢复原始数组。有人可以给我一些更好的想法吗？提前谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T18:42:17.773

假设你有一个（声音）信号，S(t)。

你想“加密”这个信号，创建 E(t)。

您可以通过添加噪声 N(t) 来做到这一点。

S(t) + N(t) = E(t)。

此外，E(t) - N(t) = S(t)。

所以现在的问题是产生一种独特的“噪音”。

我会通过一个伪随机数生成器 ( [http://en.wikipedia.org/wiki/Pseudorandom_number_generator](http://en.wikipedia.org/wiki/Pseudorandom_number_generator) ) 来执行此操作，您可以在其中将播种信息传递给收件人。

现在，任何拥有相同种子来创建 N(t) 的人都可以计算 E(t)-N(t)=S(t)

* * *

回复评论：

@Bjorn：这不是正常意义上的加密。但是，假设你有一些整数 C mod [0 - 2^16-1]。现在，在相同的范围 [0-2^16-1] 上添加一些统一的随机整数。结果也是该范围内的均匀随机整数。因此，根据随机序列生成器的质量，您可以创建不可解码的信号（没有原始叠加信号）。（我承认，如果没有溢出，情况就不会如此）。

@OP：您的问题是在传递数字后对其进行解码。

假设您有一个二进制字符串 10101010。现在，您将 11110000 添加到此。结果应该类似于 01011010。溢出到第 2^8 位。

现在，01011010 - 11110000 返回相同的初始值：10101010。所以这个溢出实际上有助于屏蔽原始信号

*前提是您使用了一个独特的掩蔽信号，您可以在接收方再次生成该信号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T18:36:36.203

根据定义，噪声是信号中的（准）随机干扰。您无法完全恢复原始信号，只有在您知道噪声频谱的情况下才能抑制它。

# windows - 如何在 Windows 中监控 USB 设备枚举和删除？

> ID：16044418
> 
> 赞同：4
> 
> 时间：2013-04-16T18:26:36.023
> 
> 标签：windows, usb

我想监视运行 Windows 的计算机的 USB 总线以查找（拔出）插入事件。当设备被（未）插入时，我想知道它的 USB 地址、供应商 ID、根集线器 ID 和设备上方的集线器端口。例如 usb_addr: 10, vendor_id: 1234, product_id: 5678, bus_id: 2, port_path: 5/4/3

这意味着它是总线 id 2 端口 5 上的设备，并且插入了另一个集线器，并且在该集线器的端口 4 上有另一个集线器，并且在该集线器的端口 3 上是正在报告的设备。

我正在尝试编写一小段特定于操作系统的代码来进行 USB 设备热插拔检测，以集成到更大的跨平台（Linux、Windows、Mac）测试程序中。使用这个热插拔代码的代码是用 Python 3 编写的，所以我更愿意用 Python 编写热插拔代码，但我在这方面有点灵活，但我真的想避免任何需要我付费的事情执照。

似乎有两个主要选择：

我看过一些关于 Windows API 函数 RegisterDeviceNotification 的讨论，但我不清楚是否可以注册以接收所有 USB 设备的事件，或者您是否需要知道特定设备接口的 GUID（例如键盘、老鼠等）。如果是这样的话，这个解决方案似乎不起作用，因为我想监控所有 USB 设备。

另一种选择似乎涉及一种称为“WMI”的东西，它似乎主要是在讨论“托管”代码时出现的，这将迫使我用 C# 或 IronPython 等 .NET 语言编写这个组件。这个问题（[Get List of connected USB Devices](https://stackoverflow.com/questions/3331043/get-list-of-connected-usb-devices)）询问如何查询 USB 设备并提供了一个示例，但它不处理热插拔事件，用户“Nedko”建议应该使用类[Win32_USBControllerDevice](http://msdn.microsoft.com/en-us/library/windows/desktop/aa394505%28v=vs.85%29.aspx)而不是 Win32_USBHub。我真的不明白 Win32_USBControllerDevice 对象的实际模型。似乎 Dependent 成员可能是对 CIM_LogicalDevice 对象的引用，但即便如此，它似乎也缺少我正在寻找的 USB 特定信息。

我应该查看哪些 API 来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-05-31T15:22:34.777

您看到的是 USB 设备类。还有接口类。传递`GUID_DEVINTERFACE_USB_DEVICE`( `usbiodef.h`, 驱动程序文档) 为任何 USB 活动生成事件。另一个可能的候选`GUID_DEVCLASS_USB`对象，似乎是用于无法识别的 USB 设备。我在测试期间无法触发它。

请注意，[Doran Holan](https://blogs.msdn.microsoft.com/doronh/2006/02/15/why-am-i-not-seeing-any-new-device-notifications-when-calling-registerdevicenotification/#comment-16515)（Microsoft 开发人员）的一篇文章似乎声称传递接口类 GUID 不起作用。他的文章来自 2006 年，在发布[此答案](https://stackoverflow.com/a/983473)（2009 年）之前，声称我详述的方法是有效的。

如果您需要与 Windows 的低级功能进行交互，您将面临一场艰苦的战斗，试图从 Python 中进行（大约 2018 年）。IronPython 可能表现不错。C# 是命中注定的——通常你会发现缺少重要的功能。任何给定库的绑定通常都无法正常工作。

要像在 C# 中一样使用 C++ 中的 WMI（例如使用`ManagementObjectSearcher`and `ManagementObject`），您应该实例化[`IWbemServices`](https://msdn.microsoft.com/en-us/library/aa392093(v=vs.85).aspx)using[`IWbemLocator::ConnectServer`](https://msdn.microsoft.com/en-us/library/aa391769(v=vs.85).aspx)然后调用[`IWbemServices::ExecQuery`](https://msdn.microsoft.com/en-us/library/aa392107(v=vs.85).aspx).

您可以查看[WMI C++ 应用程序示例](https://msdn.microsoft.com/en-us/library/aa394558(v=vs.85).aspx)以获取更多信息。

# c# - 将 html 输入框变量发送回 codebhind

> ID：16044421
> 
> 赞同：1
> 
> 时间：2013-04-16T18:26:39.983
> 
> 标签：c#, asp.net, html

我有以下设置。

```
 <table>
      <tr>
           <td>
                <%getScheduleTable("LineNumber", rate, count);%>
           </td>
      </tr>
 </table> 
```

`getScheduleTable(line, rate, count)`去里面建一个表`<td>`

行号是文字，但速率和计数会波动。如何将表单上其他地方的 html 输入框的值分配给`rate`和`count`？

可能有几千个问题可以回答这个问题，但我找不到它们可能是因为我不知道`<% %>`实际调用的操作是什么。

它是否需要首先以某种方式包装在 Javascript 中？我应该使用别的东西吗？我也许可以使用数据网格，但我需要将计算值放在最右边的列中。我宁愿不这样做，因为我快完成了，我觉得我离这里只有一小步。我可能是错的，但会做需要做的事情。

谢谢！

编辑： html 控件的值将被另一个进程更改。我正在构建我的页面的模拟以进行测试。当网站上线时，我无法控制元素，所以我只需要获取该框的值。除非我破解了一个不可见的服务器助手文本框，否则它不能更改为服务器控件，也许这就是我的答案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T18:36:45.933

您可以通过添加和分配它们来使您的服务器`td`和服务器可访问，以便在后面的代码中访问它们。`input``runat="server"``id`

*html*

```
<input id="countThisLine" runat="server" />
<table>
      <tr>
           <td id="td1" runat="server">

           </td>
      </tr>
 </table> 
```

*在后面的代码中*

```
td.InnerHtml = getScheduleTable(countThisLine.Value, txt, count); 
```

# excel - 将数据从一个工作表拉到另一个工作表

> ID：16044422
> 
> 赞同：0
> 
> 时间：2013-04-16T18:26:42.887
> 
> 标签：excel, excel-2010, vba

我希望有人可以帮助我，因为我尝试了其他网站的许多建议，但找不到解决方案。

我有 2 个工作簿。一个包含要复制到另一个的字段列表。到目前为止看起来很简单，但是当我尝试将工作表名称分配给变量时，它不会存储它，因此我以后无法返回该工作表。

我给你举个例子

```
Function getActiveWBName()
    getActiveWBName = ActiveWorkbook.NAME
End Function

Dim homeWB

Sub pull_data()
    Set homeWB = Workbooks(getActiveWBName)
    homeWB.Activate
    Call Update_List
End Sub

Sub Update_List()
    Workbooks.Open Filename:=FullFilePath, UpdateLinks:=3

    Sheets("List").Activate
    Cells.Select
    Selection.Copy
    ActiveWorkbook.Close

    homeWB.Activate
    Sheets("List").Activate
    Range("A1").Select
    Selection.Paste
End Sub 
```

进入后`homeWB.activate`它`sub Update_List`返回`runtime error 424 - Object required.`

我究竟做错了什么？

我想保留返回活动工作表名称的函数。

谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T18:33:46.903

你不必走那条路:)我不确定你指的是哪个网站，但你应该避免使用`.Select`and `.Activate`。看到[这个](https://stackoverflow.com/questions/10714251/excel-macro-avoiding-using-select/10718179#10718179)

您的代码可以重写为（更改为适用）

```
Sub Sample()
    Dim wbInput As Workbook, wbOutput As Workbook
    Dim wsInput As Worksheet, wsOutput As Worksheet

    '~~> From where you want to copy
    Set wbInput = ThisWorkbook
    '~~> This is the sheet which has the fields you want to copy
    Set wsInput = wbInput.Sheets("List")

    '~~> Destination workbook
    Set wbOutput = Workbooks.Open("C:\Sample.xlsx")
    '~~> Destination sheet
    Set wsOutput = wbOutput.Sheets("List")

    '~~> Copy the relevant range
    wsInput.Range("A1:A10").Copy wsOutput.Range("A1")
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T18:51:53.663

您收到 Object Required 错误，因为`homeWB`它没有声明为公共变量，也没有传递给`Update_List`子例程。

您可以通过将变量传递`homeWB`给`Update_List`子例程来解决此问题：

```
Sub pull_data()
Set homeWB = Workbooks(getActiveWBName)
homeWB.Activate
Call Update_List(homeWB)

End Sub

Sub Update_List(homeWB as Workbook)
Workbooks.Open Filename:=FullFilePath, UpdateLinks:=3

Sheets("List").Activate
Cells.Select
Selection.Copy
ActiveWorkbook.Close

homeWB.Activate
Sheets("List").Activate
Range("A1").Select
Selection.Paste
End Sub 
```

但是，我会听从 Siddhart Rout 的上述建议，关于99%`Activate`的`Select`时间应该避免使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T18:59:10.127

试试下面的代码。

```
Dim homeWB As Workbook
Const FullFilePath = "C:\Users\Santosh\Desktop\ssss.xlsx" ' specify your path here

Sub pull_data()
    Set homeWB = ThisWorkbook
    Call Update_List
End Sub

Sub Update_List()

    Dim wkb As Workbook
    Set wkb = Workbooks.Open(Filename:=FullFilePath, UpdateLinks:=xlUpdateLinksAlways)
    wkb.Sheets("List").Cells.Copy homeWB.Sheets("List").Range("A1")

    wkb.Close
End Sub 
```

# jquery - ui 滑块可见但不移动

> ID：16044427
> 
> 赞同：0
> 
> 时间：2013-04-16T18:27:12.057
> 
> 标签：jquery, html, jquery-slider

当我在它自己的 html 文件中运行它时，我有以下代码可以正常工作。但是，当我将其用作较大网页的一部分时，滑块可见但不会移动。

这是我的 javascript

```
$("#slider").slider({

                            range: false,
                            min: 0,
                            max: 10, step: 1

}); 
```

HTML

```
<div id="slider"></div> 
```

这也是我所有的内容。从我收集的内容来看，它一定是与另一个 js 文件发生冲突。

```
 <script type="text/javascript" src="Scripts/jquery.js" ></script>
 <script type='text/javascript' src="Scripts/jquery-ui.js"></script> 

//the one above is the new one, that is references by the slider

    <script type='text/javascript' src='Scripts/modernizr-2.5.3.js'></script>

    <script type='text/javascript' src='Scripts/jquery.mobilemenu.js?ver=1.0'></script>
    <script type='text/javascript' src='Scripts/si.files.js?ver=1.0'></script>
    <script type="text/javascript" src="Scripts/jquery.uploadify-3.1.min.js"></script>
    <script type="text/javascript" src="Scripts/swfobject.js"></script>
   <script type="text/javascript" src="Scripts/fullcalendar.js"></script>
    <script type="text/javascript" src="Scripts/jquery.simplemodal.js"></script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T18:30:34.033

以防万一它是一个 jquery 冲突，你可以使用..

```
var j=jQuery.noConflict();
j("#slider").slider({    
       range: false,
       min: 0,
       max: 10, 
       step: 1    
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T19:17:02.933

发现问题是因为我的滑块 div 在表格内。

谢谢您的帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-03-09T07:29:04.140

在我的情况下没有移动，因为我没有添加到 jquery ui css 的链接:)

# php - 显示“未捕获的引用错误”的 Javascript 函数

> ID：16044429
> 
> 赞同：0
> 
> 时间：2013-04-16T18:27:16.013
> 
> 标签：php, javascript, mysql

这是一个将自身连接到 MySQL 数据库的 PHP 代码。交易是，它显示存储在数据库中的名称列表。我需要做的是，当点击这些名字时，应该会显示一个他们自己的聊天框（与 Facebook 中的相同）。

这里的问题在于标有箭头的线。单击特定名称时，它应该调用 function `display_chat_box`，但不会。在我没有在其中添加`studentid`参数之前，它运行良好。我怀疑该函数`chat_box_number()`是作为参数发送的，但它确实对我没有帮助。之前还好好的，为什么现在不行了？我在谷歌浏览器中打开了开发者工具来检查错误，它显示

> **未捕获的 ReferenceError：`display_chat_box()`未定义**。

我不明白为什么？其他人可以吗？无论存在什么问题，任何人都可以发布一个可行的解决方案，这样我就可以让聊天框恢复活力。

```
<?php
$con = mysql_connect("localhost", "****", "******");
mysql_select_db("my_db", $con);
$result = mysql_query("SELECT * FROM online_students");
while ($row = mysql_fetch_array($result)) {
    $result2 = mysql_query("SELECT * FROM students WHERE email='$row[email]'");
    $row2 = mysql_fetch_array($result2);
    $name = $row2['firstname'] . " " . $row2['lastname'];
    $studentid = $row2['studentid'];
    echo "<li onclick='display_chat_box(chat_box_number(),\"" . $name . "\"," . $studentid . ")'>" . $name . "</li>";
}
mysql_close($con);
?>

<script src="jquery-1.9.1.min.js" type="text/javascript">
    var n = 0, chat_wid;
    function chat_box_number() {
        if (n == 2)
            n = 0;
        n++;
        return n;
    }

    function display_chat_box(j, name, studentid) {
        alert("hi");
        switch (j) {
            case 1: {

                document.getElementsByClassName("chat_box1")[0].style.display = "block";
                document.getElementById("chat_with1").innerHTML = name;
                break;
            }
            case 2: {
                document.getElementsByClassName("chat_box2")[0].style.display = "block";
                document.getElementById("chat_with2").innerHTML = name;
                break;
            }
            case 3: {
                document.getElementsByClassName("chat_box3")[0].style.display = "block";
                document.getElementById("chat_with3").innerHTML = name;
                break;
            }
        }
        chat_wid = studentid;
        update_chat();
    }
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T18:39:54.563

未定义引用的问题是因为您错过了

```
<script> 
```

标签放在后面

```
<script src="jquery-1.9.1.min.js" type="text/javascript">. 
```

**提示：**如果您使用自己的方法选择元素，为什么要使用 jQuery lib。我给你一个简单的例子

反而

```
document.getElementsByClassName("chat_box1")[0].style.display="block"; 
```

利用

```
$(".class")[n].css("display","block"); 
```

反而

```
document.getElementById("chat_with3").innerHTML=name; 
```

利用

```
$("#id").html(name); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T18:32:04.940

你需要：

```
<script src="jquery-1.9.1.min.js" type="text/javascript"></script>
<script type="text/javascript">
// your JS code
</script> 
```

如果您要使用不显眼的 js，那么您的代码会更好 IMO，即以编程方式将点击处理程序附加到 documentready 而不是作为 html 属性，因此您`li`可能看起来像：

```
echo "<li class=\"display-chat-box-action\" data-name=\"$name\" data-studentid=\"$studentid\">$name</li>"; 
```

你的 JS 中可能有这个

```
$(function () {
   $('li.display-chat-box-action').on('click.chatBoxDisplay', function () {
        var $this = $(this),
            name = $this.attr('data-name'),
            studentid = $this.attr('data-studentid');

        display_chat_box(chat_box_number(), name, studentid);
   });
}); 
```

# django - Django 管理员配置不当的问题

> ID：16044432
> 
> 赞同：1
> 
> 时间：2013-04-16T18:27:20.657
> 
> 标签：django, django-admin

我的 Django 网站有一个奇怪的问题，在本地开发 Web 服务器上运行以进行测试。我正在不同的机器上开发，在一台计算机上，该站点运行良好。另一方面，我不断收到配置不当的错误，说 EmployeeAdmin 不是“EmployeeAdmin”的可调用或属性，也不是在“Employee”模型中找到的。问题是，我在站点的任何地方都没有 EmployeeAdmin 类，尽管我曾经这样做过。我需要清除的管理内容是否存在某种缓存？我查看了数据库中的 django_ 表，但没有看到任何内容。我将代码放在这里，但由于我已经完成了完整的站点文本搜索并确保 EmployeeAdmin 类不存在，所以我不知道在此处上传什么。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T18:46:32.420

也许你有一个旧的 .pyc 文件让你绊倒？

# java - Memcached 依赖 jar 不适用于 maven 项目并抛出 java.lang.ClassNotFound: net.spy.memcached.MemcachedClient 异常

> ID：16044437
> 
> 赞同：0
> 
> 时间：2013-04-16T18:27:46.240
> 
> 标签：java, maven, classnotfoundexception, spymemcached

我的项目是在linux环境中。我想在我的项目中添加 memcached jar 依赖 jar。因此，我在 pom.xml 中添加了以下行，如此处[所述](https://code.google.com/p/spymemcached/wiki/Maven)。

```
 <repositories>
    <repository>
      <id>spy</id>
      <name>Spy Repository</name>
      <layout>default</layout>
      <url>http://files.couchbase.com/maven2/</url>
      <snapshots>
        <enabled>false</enabled>
      </snapshots>
    </repository>
  </repositories>
 <dependencies>
   <dependency>
        <groupId>spy</groupId>
        <artifactId>spymemcached</artifactId>
        <version>2.8.1</version>
        <scope>compile</scope>
    </dependency>
 </dependencies> 
```

程序构建成功。但是每当我运行项目 jar 时，它都会引发以下异常：

```
Exception in thread "main" java.lang.NoClassDefFoundError: net/spy/memcached/MemcachedClient
        at MemClient.<clinit>(MemClient.java:12)
        at MemClientUser.main(MemClientUser.java:18)
Caused by: java.lang.ClassNotFoundException: net.spy.memcached.MemcachedClient
        at java.net.URLClassLoader$1.run(URLClassLoader.java:366)
        at java.net.URLClassLoader$1.run(URLClassLoader.java:355)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.net.URLClassLoader.findClass(URLClassLoader.java:354)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:423)
        at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:308)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
        ... 2 more 
```

我尝试了以下链接中给出的一些解决方案：
[Java ClassNotFoundException with maven dependency](https://stackoverflow.com/questions/12811392/java-classnotfoundexception-with-maven-dependency)，但它没有修复异常。
如何解决此异常？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T19:05:19.977

运行 jar 是不够的，因为 Maven 不会将模块的依赖项“合并”到它正在构建的 jar 中。要么运行 jar

```
java -jar yourJar.jar -cp pathToTheSpymemcached.jar 
```

你在哪里替换`yourJar.jar`和`pathToTheSpymemcached.jar`适当地或者你可以看看这个：[如何使用 Maven 创建一个具有依赖关系的可执行 JAR？](https://stackoverflow.com/questions/574594/how-can-i-create-an-executable-jar-with-dependencies-using-maven)

# ruby-on-rails - 乘客独立工作在 apache2 中失败

> ID：16044438
> 
> 赞同：0
> 
> 时间：2013-04-16T18:27:52.640
> 
> 标签：ruby-on-rails, passenger

完整的铁路和乘客新手。我在 Linux Mint 上运行乘客 3.0.19。我的应用程序与 WEBrick（rails 服务器）和独立乘客一起运行良好。当我尝试使用 mod_passenger 时，我得到“致命：用户“me_user”的对等身份验证失败（PG::Error）”：

```
#Phusion Passenger config info
LoadModule passenger_module /var/lib/gems/1.9.1/gems/passenger-3.0.19/ext/apache2/mod_passenger.so
PassengerRoot /var/lib/gems/1.9.1/gems/passenger-3.0.19
PassengerRuby /usr/bin/ruby1.9.1

#Suppose you have a Rails application in /somewhere. Add a virtual host to your
#Apache configuration file and set its DocumentRoot to /somewhere/public:

<VirtualHost *:80>
  ServerName localhost
  # !!! Be sure to point DocumentRoot to 'public'!
  DocumentRoot /var/www/myapp/public
  <Directory /var/www/myapp/public>
     # This relaxes Apache security settings.
     AllowOverride all
     # MultiViews must be turned off.
     Options -MultiViews
  </Directory>
</VirtualHost> 
```

我应该注意：db 帐户通过命令行工作，并在 database.yml 中配置。我已经看到 ppl 表明这是 pg_hba.conf 的问题......但如果这是我的问题，那么应用程序也无法独立运行......但它确实如此。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T19:53:37.370

在没有看到您的 pg_hba.conf 的情况下，我可以从我自己让 Postgres 与 mod_rails 正常工作的有趣经历中猜测。确保你有：

```
host: localhost 
```

在你的 database.yml 中。这将影响 Rails 尝试连接数据库的方式。

此外，请确保在使用 psql 客户端进行测试时，您能够在模拟运行 mod_rails 的用户时这样做。例如，如果此用户名为“乘客”：

```
sudo -u passenger psql -h localhost -U <db_user> -d <db name> 
```

如果这不起作用，请发布适当编辑的 database.yml 和 pg_hba.conf，我可以看看这些。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-15T20:54:52.420

database.yml（注意：测试和开发的定义与生产完全相同）

> 生产：
> 
> 适配器：postgresql
> 
> 编码：unicode
> 
> 数据库：mydb
> 
> 游泳池：5
> 
> 用户名：myuser
> 
> 密码：pwd

pg_hba.conf：

> # 通过 Unix 域套接字本地所有 postgres 对等方进行数据库管理登录
> 
> # "local" 仅适用于 Unix 域套接字连接
> 
> 本地所有所有对等
> 
> # IPv4 本地连接：
> 
> 托管所有 127.0.0.1/32 md5
> 
> # IPv6 本地连接：
> 
> 托管所有::1/128 md5

谢谢麦克里兹！

# android - 适用于 Android 的良好日志记录技术

> ID：16044439
> 
> 赞同：3
> 
> 时间：2013-04-16T18:27:53.347
> 
> 标签：android, android-logcat, android-debug

我希望向我正在接管的一个 android 应用程序引入一些日志记录。我希望能够在开发过程中引用这个日志文件，如果客户在程序生产过程中遇到问题，我希望得到一份日志副本。

由于这将在生产中，我希望将日志文件制作成滚动日志，因此它不会消耗太多资源。

在我注意到的一些 android 示例`import android.util.Log;`中。我很好奇这是否是 android 的标准日志记录方式。如果不是，那么这样做的好方法是什么（例如，在用 java 编码时我真的很喜欢 log4j。）？

1.  android.util.log 可以像我要求的那样做滚动日志吗？

2.  android.util.Log 默认写入到哪里？

3.  如果只是为了控制台，有没有办法将其写入 android 设备上的滚动日志文件，如果程序有问题，可以通过电子邮件发送？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-27T13:13:00.950

有文档和示例说明如何使用标准 Log.X And​​roid 调用和“logCat”在 android 设备上执行大小有界的滚动日志 - 例如，请参见[此处](https://stackoverflow.com/questions/3359692/how-to-redirect-my-log-output-from-logcat-to-the-sd-card-on-an-android-device?rq=1)和[此处](https://stackoverflow.com/questions/26569304/logcat-in-separate-process-creates-right-number-of-logs-but-ignores-file-size)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T18:40:05.687

首先。默认情况下，您不应在生产代码中启用大量日志记录。我们通过编写默认日志类的扩展来解决它，如下所示。

有了它，日志记录在开发代码中默认开启，在生产代码中默认关闭。您可以编写一些小的隐藏启用程序，以便您的客户可以在必要时激活日志记录。

其次使用一个应用程序来存储和检索日志！尝试[CatLog](https://play.google.com/store/apps/details?id=com.nolanlawson.logcat)或类似的。

祝你好运！

```
public class MyLog {

    private static boolean m_Enabled = BuildConfig.DEBUG;

    public MyLog() {

    }

    public static void e(String tag, String msg) {
        if (m_Enabled) Log.e(tag, msg);
    }

    public static void w(String tag, String msg) {
        if (m_Enabled) Log.w(tag, msg);
    }

    public static void i(String tag, String msg) {
        if (m_Enabled) Log.i(tag, msg);
    }

    public static void d(String tag, String msg) {
        if (m_Enabled) Log.d(tag, msg);
    }

    public static void v(String tag, String msg) {
        if (m_Enabled) Log.v(tag, msg);
    }

    public static void enable() {
        m_Enabled = true;
    }

    public static void disable() {
        m_Enabled = false;
    }

    public static boolean isEnabled() {
       return m_Enabled;
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-16T19:15:35.200

> android.util.log 可以像我要求的那样做滚动日志吗？

1）不像你要求的那样。日志将滚动，但针对设备上的所有应用程序，而不仅仅是您的应用程序。

> android.util.Log 默认写入到哪里？

2）Android日志系统，可以通过[logcat](http://developer.android.com/tools/help/logcat.html)查看。如果您熟悉它，可以将其想象为 Windows 事件日志。我会下载一个 logcat 程序并滚动浏览您的系统日志以熟悉它们。

> 如果只是为了控制台，有没有办法将其写入 android 设备上的滚动日志文件，如果程序有问题可以通过电子邮件发送？

3）您可以将自己的滚动日志写入文件系统，然后通过电子邮件发送。但是，您必须实现此功能。您还可以尝试查看是否有任何 3rd 方日志记录工具/库可以满足您的需求。

# javascript - 从表单中捕获所有输入值

> ID：16044446
> 
> 赞同：0
> 
> 时间：2013-04-16T18:28:06.613
> 
> 标签：javascript

我在一个表单中有多个输入标签，我需要准备所有要通过 Ajax 请求发送的值。这是输入字段的示例：

```
<form>
  <input name="foo" value="1">
  <input name="foo1" value="1">
  <input name="bar[]" value="2">
  <input name="bar[]" value="2">
  <input name="fooBar[a][]" value="3">
  <input name="foobar[b][]" value="3">
</form> 
```

预期结果 ：

```
{
  foo : "1",
  foo1 : "1",
  bar : ["2", "2"],
  fooBar : { a : ["3"], b : ["3"]}
} 
```

或者 ：

```
 {
    foo : "1",
    foo1 : "1",
    "bar[0]" : "2",
    "bar[1]" : "2",
    "fooBar[a][0]" : "3",
    "fooBar[b][0]" : "3"
  } 
```

我不知道如何以及从哪里开始构建我的函数，所以也许任何人都有一个想法，可以给我一个提示，告诉我如何用普通的 javascript 来完成。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T19:20:58.140

感谢您的想法。我刚刚弄清楚我到底想用这个做什么，我以一种简单的方式解决了这个问题。基本上我需要通过`Ajax`请求发送值，所以我只需要一个`QueryString`，所以这是我的简单解决方案，它似乎完全符合我的需要：

```
var elements = form.elements;

var data;

for(var i = -1, j = elements.length; ++i < j;)
{
  if(elements[i].name)
  {
    data += "&" + elements[i].name + "=" + encodeURIComponent(elements[i].value);
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T18:44:02.860

它并不完美，它是您的两个预期输出之间的混合，但它很简单，希望您能理解正在发生的事情。

```
function serializeForm(frm) {
    var ret = {};
    [].forEach.call(frm.elements, function (element) {
        if (ret.hasOwnProperty(element.name)) {
            if (!Array.isArray(ret[element.name])) {
                ret[element.name] = [ret[element.name]];
            }
            ret[element.name].push(element.value);
        } else {
            ret[element.name] = element.value;
        }
    });
    return ret;
}

console.log(serializeForm(document.forms.frm)); 
```

输出

```
bar[]: ["2","2"]
foo: "1"
foo1: "1"
fooBar[a][]: "3"
foobar[b][]: "3" 
```

[http://jsfiddle.net/rlemon/FFMb7/](http://jsfiddle.net/rlemon/FFMb7/)你可以在这里看到一个演示。

要拆分 foobar 的内容（假设大写字母是拼写错误），您需要做更多的工作，并且可能使用正则表达式来拆分数组的第一部分和括号中的值。我什至不会为您尝试，因为我讨厌正则表达式 :P 所以希望这个输出会起作用。

更新：如果您实际上是在尝试序列化表单以进行 http 提交，那么您应该使用更标准的表单。[如此处所述，形成序列化 javascript（无框架）](https://stackoverflow.com/questions/11661187/form-serialize-javascript-no-framework)。

# multithreading - 如何在这个线程 TCPServer 中的线程之间共享数据？

> ID：16044452
> 
> 赞同：20
> 
> 时间：2013-04-16T18:28:49.267
> 
> 标签：multithreading, python-2.6, tcpserver

我正在从事一个涉及通过 TCP 发送数据的项目。使用 ThreadedTCPServer 我已经能够做到这一点。服务器线程只需要读取传入的数据字符串并设置变量的值。同时我需要主线程来查看这些变量的值变化。到目前为止，这是我的代码，只是从 ThreadedTCPServer 示例中修改的：

```
import socket
import threading
import SocketServer

x =0

class ThreadedTCPRequestHandler(SocketServer.BaseRequestHandler):

    def handle(self):
        data = self.request.recv(1024)
        # a few lines of code in order to decipher the string of data incoming
        x = 0, 1, 2, etc.. #depending on the data string it just received

class ThreadedTCPServer(SocketServer.ThreadingMixIn, SocketServer.TCPServer):
    pass

if __name__ == "__main__":
    # Port 0 means to select an arbitrary unused port
    HOST, PORT = 192.168.1.50, 5000

    server = ThreadedTCPServer((HOST, PORT), ThreadedTCPRequestHandler)

    # Start a thread with the server -- that thread will then start one
    # more thread for each request
    server_thread = threading.Thread(target=server.serve_forever)
    # Exit the server thread when the main thread terminates
    server_thread.daemon = True
    server_thread.start()
    print "Server loop running in thread:", server_thread.name

    while True:
        print x
        time.sleep(1)

    server.shutdown() 
```

所以这应该工作的方式是程序不断地打印 x 的值，并且随着新消息的进入 x 的值应该改变。似乎问题在于它在主线程中打印的 x 与在服务器线程中被分配新值的 x 不同。如何从我的服务器线程更改主线程中 x 的值？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-04-16T18:49:38.330

[`Queue`](http://docs.python.org/2/library/queue.html)尝试在您的线程之间共享一个。

### 有用的资源

*   [David Beazley 的演讲Python Concurrency](http://www.slideshare.net/dabeaz/an-introduction-to-python-concurrency)简介，对多线程、线程通信和一般并发进行了很好的介绍。

# javascript - 将 ASP.NET 会话变量传递给 JavaScript

> ID：16044453
> 
> 赞同：0
> 
> 时间：2013-04-16T18:28:52.870
> 
> 标签：javascript, asp.net, html, session-variables

这是所有必要的代码，

在一个函数中，我创建了一个控件，或者是一个文本框单选按钮列表等。一旦创建了控件，我将它放在一个面板中，然后执行以下操作：

```
 StringBuilder sb = new StringBuilder();
        StringWriter sw = new StringWriter(sb);
        HtmlTextWriter hw = new HtmlTextWriter(sw);
        panel.RenderControl(hw);
        Session["formHTML"] = sb.ToString();
        Label1.Text = sb.ToString(); 
```

Label1 文本完美呈现。这正是它应该是的，这是我从 panel.RenderControl(hw) 行获得的面板的 html。这是我的问题。点击按钮我有：

```
 Response.Redirect("~/preview.aspx"); 
```

这是我的 preview.aspx 页面上的代码：

```
<script type="text/javascript">

    function preview() {
        var html =  '<%= Session["formHTML"]%>';
        alert(html);
        $('#previewForm').empty();
        $('#previewForm').append(html);
    }
</script>

<body onload="preview()">
   <form id="form1" runat="server">
      <div id="previewForm">
      </div>
   </form>
</body> 
```

我的问题是会话变量被传递给函数。它不会在我的功能中发出警报。现在我有另一个会话变量，`Session["formID"]`. 当我把`Session[FormID]`javascript 函数而不是`Session["formHTML"]`，它完美地工作。如果 ID 为 434，则附加到我指定的 div 标签。现在 formHTML 将 HTML 作为字符串。出于某种原因，它不喜欢这样。我收到以下错误：

> Uncaught SyntaxError: Unexpected token ILLEGAL Uncaught
> 
> ReferenceError：未定义预览

我无法弄清楚这一点，我不确定为什么它不起作用。在我尝试过的javascript函数中：

```
 var html =  '<%= Session["formHTML"].ToString()%>'; 
```

和

```
 var html =  "'" + '<%= Session["formHTML"]%>' + "'"; 
```

我只尝试了这些，因为我认为 html 没有在 javascript 中正确呈现为字符串。我显然不知道为什么我会收到这个错误，这就是为什么我对如何修复它没有任何想法。

对于评论：

好的，所以当我的函数看起来像这样时： var html = '<% Session["formHTML"] %> 它呈现为：

```
 function preview() {
            var html =  '<div id="panel0" class="panelHeader" class="box ui-draggable" data-ui-widget="draggable">
    <span id="mylabel">mylabel</span><span id="lbl0" onclick="deleteControl(panel0)" style="color:Red;">x</span>
</div>';
            alert(html);
            $('#previewForm').empty();
            $('#previewForm').append(html);
        } 
```

这对我来说看起来不错，但仍然会产生错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T19:06:58.310

也可能是您的 HTML 包含未转义的非法字符，这些字符会丢弃您的字符串值。'"/\

所以....

我会确保我在交接时逃脱和取消他们的逃脱。这方面也有最佳实践。我假设当您将其设置为标签的值时，ASP.net 正在缓冲输出，但是当您直接将其设置为 JS 时，您会遇到冲突。

此外，我们使用

```
 Page.ClientScript.RegisterStartupScript(this.GetType(), "set_campaign", "$(document).ready(function(){  setCampaignID(" + Request.QueryString["campaign_id"] + ");});", true); 
```

将脚本插入页面，而不是 <% tags %>。标签可以正常工作，但使用不正确可能会导致未设置值和缺乏经验的程序员出现问题，而不是将其注入没有依赖关系的工作脚本中。就像你现在面临的挑战一样。

您也可以替换 asp:literal，但我更喜欢启动脚本，我认为这反映了您的需求

干杯!

# mysql - 指示mysql中连接表中是否存在行

> ID：16044454
> 
> 赞同：0
> 
> 时间：2013-04-16T18:28:53.850
> 
> 标签：mysql

我正在尝试检查各种表中是否存在数据。我有一个主表 A，以及具有与 A 相关的数据的各种表 - 称它们为表 B、C 和 D。我想编写一个查询，对于 A 中的每个条目，指示是否有任何行在 B、C 和 D 中的每一个中。

对此的第一次尝试如下：

```
SELECT A.id, count(B.id) as b_count, count(C.id) as c_count, count(d.id) as d_count
FROM A
LEFT JOIN B ON B.a_id = A.id
LEFT JOIN C ON C.a_id = A.id
LEFT JOIN D ON D.a_id = A.id
GROUP BY A.id 
```

这给了我正确的结果 - 每个子表中的行数，在主表中按 id 列出。然而，这个查询也非常低效，因为它涉及多个连接，而且我并不关心每个子表中有多少行，只关心是否有任何行。

有人可以提出更好的选择吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T18:34:32.577

如果您不关心表格上有多少行

利用：

```
SELECT EXISTS(SELECT 1 FROM table1 WHERE ...) 
```

参考MYSQL文档： [http ://dev.mysql.com/doc/refman/5.0/en/exists-and-not-exists-subqueries.html](http://dev.mysql.com/doc/refman/5.0/en/exists-and-not-exists-subqueries.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T18:31:42.973

加入并不是低效的，它是像 MySQL 这样的关系数据库管理系统 (RDBMS) 的全部优化对象。只要您对所有主键和外键都有正确的索引，除了选择它们之外，没有更快的方法来检查表中是否存在行。

# mysql - mysql Access denied for user 'root'@'name of the computer' (使用密码: YES)

> ID：16044462
> 
> 赞同：-1
> 
> 时间：2013-04-16T18:29:25.623
> 
> 标签：mysql, database

每次我尝试连接到我的数据库时都会收到此错误

```
 Warning: mysqli_connect() [function.mysqli-connect]: (28000/1045): 
Access denied for user 'root'@'name of the computer' (using password: YES) in PATH_TO_FILE on line 8 
```

我检查了特权，这就是我得到的

```
GRANT ALL PRIVILEGES ON *.* TO 'root'@'127.0.0.1' WITH GRANT OPTION 
```

用那个命令

```
show GRANTS for "root"@"127.0.0.1" 
```

此外，这就是我连接的方式

```
$mysqli = mysqli_connect('path to server', 'root', 'gourami',"recherche"); 
```

但如您所见，错误消息中的用户名不一样...

我不知道发生了什么，因为这应该正常工作..

我想知道是不是我的主机被阻止了，但我之前遇到过这个问题，但消息不一样。我用命令修复了它。

```
flush hosts; 
```

但是这次没有成功

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T18:32:11.443

权限中不应该有端口号，它只是`user@host`. 将赠款更改为：

```
GRANT ALL PRIVILEGES ON *.* to root@127.0.0.1 
```

# iis-7 - 如何在 Web 部署期间执行命令文件以升级现有 IIS 7 Web 应用程序？

> ID：16044463
> 
> 赞同：0
> 
> 时间：2013-04-16T18:29:26.317
> 
> 标签：iis-7, msdeploy

我想部署几个 Web 应用程序，但是在部署到具有现有 Web 应用程序的服务器时，我需要升级这两个 Web 应用程序的应用程序池（以使用 ASP.NET 4.0）。

我有一个通过 VS 2012 配置的自动部署，效果很好。如何修改该自动部署（使用 Web 部署到 Windows Server 2008 R2 服务器），以便它运行两个 shell 命令来更改应用程序池？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T23:08:17.330

如果您使用 Visual Studio 创建包，然后使用`msdeploy.exe`（或生成的`.cmd`文件）执行部署，则可以通过提供程序传递`preSync`调用批处理文件的参数`runCommand`。

如果您使用 Visual Studio 执行实际部署，那么您就不走运了，因为 Web 发布管道（位于 MSDeploy 上的 MSBuild 层）不支持`preSync/postSync`

无论哪种方式，请记住，修改应用程序池将要求您的部署用户是远程计算机上的管理员。

# ios - iOS 转换点：fromView

> ID：16044469
> 
> 赞同：2
> 
> 时间：2013-04-16T18:29:35.710
> 
> 标签：ios, objective-c

我在一个是子类的类中有以下代码片段`UIView`：

```
- (FolderWithAttachedLabel *) findFolderContainingPoint: (CGPoint) pointInWindowView
{
    BOOL endOuterLoop = NO;
    for (UIScrollView *scroller in visibleScrollViews)
    {
        for (FolderWithAttachedLabel *subfolder in expandedSubfolderLists)
        {
            CGPoint point = [subfolder convertPoint:pointInWindowView fromView:nil];
            if (CGRectContainsPoint(subfolder.bounds, point))
            {
                [subfolder removeFromSuperview];
                return subfolder;
            }
        }
        if (endOuterLoop)
            break;
    }
    return nil;
} 
```

我正在尝试做的是查看包含在 a 中的文件夹列表，`UIScrollView`以找到用户试图拖动的文件夹。 `FolderWithAttachedLabel`是一个`UIView`子类。在调试器中，`subfolder`看起来是一个有效的实例。

第一次通过内部循环，行：

```
CGPoint point = [subfolder convertPoint:pointInWindowView fromView:nil]; 
```

抛出以下异常：

> ***由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“-[__NSArrayM convertPoint:fromView:]：无法识别的选择器发送到实例 0xa329890

由于`subfolder`是一个`UIView`子类，我认为`convertPoint:fromView:`应该是一个好的选择器，但我显然错过了一些东西。

这里有什么建议吗？

TIA

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T18:51:12.913

看起来子文件夹实际上是一个`NSArray`. 我建议看看如何`expandedSubfolderLists`填充。

对于未来，您可以在错误的“原因”中看到：

> 原因：'-[__NSArrayM convertPoint:fromView:]

`__NSArrayM`是`NSArray`类簇的一部分。

# jsp - 如何在jsp中渲染Html页面

> ID：16044470
> 
> 赞同：1
> 
> 时间：2013-04-16T18:29:51.187
> 
> 标签：jsp, web.xml

问候，我想在jsp中渲染整个html页面，并在服务器上运行之前根据代码替换文本。这可能吗。实际上我是java编程新手。在.net中，我从xml渲染html像这样的文件

`<appSettings> <add key="CreateUser" value="~/App_Data/CreatingUserhtm.htm"/> </appSettings>`

我如何在jsp中呈现html页面？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T18:35:14.367

这一切都取决于“动态”内容的数量，以及您的原始问题的含义。

## JSP 读取 XML 内容进行渲染

我想说您可以选择使用 XSL 并在客户端中完成这一切，这也将减少服务器上的开销。您可以使用 XSL 将 XML 转换为 HTML 客户端。

否则，您还可以在 JAVA 中使用 XSL 并转换 XML。参见：[http ://www.java2s.com/Code/Java/JSP/JSPXMLandXSLTtransform.htm](http://www.java2s.com/Code/Java/JSP/JSPXMLandXSLTtransform.htm)

## 从 Servlet 发送到 JSP 的 XML 数据

如果您想从 servlet 设置变量并在 JSP 中读取它们（例如使用 MVC 模式），您可以使用以下参考之一：

*   使用 Session Scope，例如 request.getSession().setAttribute("key","value"); 请参阅：[如何将变量从 servlet 传递到 jsp 页面？](https://stackoverflow.com/questions/4935071/how-to-pass-variable-from-a-servlet-to-a-jsp-page)
*   使用 HTTP 请求变量，参见：[Pass variables from servlet to jsp](https://stackoverflow.com/questions/3608891/pass-variables-from-servlet-to-jsp)

# asp.net-mvc - ASP.net MVC - RestSharp POST 复杂对象为空

> ID：16044471
> 
> 赞同：2
> 
> 时间：2013-04-16T18:29:51.347
> 
> 标签：asp.net-mvc, asp.net-web-api

我正在使用 ASP.net MVC 4 WebAPI。我有另一个 ASP.net MVC 应用程序，它发布到 Controller 中的 Web API。但是，当我传递复杂对象时，复杂对象属性在 ASP.net MVC 4 Web API 中变为空。

# WEB API 代码

```
public class User
{
    public string Name { get; set; }
    public Product Product { get; set; }
}

public class Product
{
    public int Age { get; set; }
}

public class ProductsController : ApiController
{
    [HttpPost]
    public string GetProdctPrice([FromBody]User user) // user object is null
    {
        return "hello";
    }
} 
```

# ASP.NET MVC 消费者代码

```
public class User
{
    public string Name { get; set; }
    public Product Product { get; set; }
}

public class Product
{
    public int Age { get; set; }
}

public class HomeController : Controller
{
    public ActionResult Index()
    {
        var user = new User()
        {
            Name = "Headphone",
            Product = new Product() { Age = 33 }
        };

        var client = new RestClient();
        client.BaseUrl = "http://localhost:56013/api/";

        var request = new RestRequest();
        request.Method = Method.POST;
        request.Resource = "/Products/GetProdctPrice";
        request.AddObject(user);

        IRestResponse response = client.Execute(request);

        ViewBag.Message = response.Content;

        return View();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-11T11:17:44.037

**将您的 GetProdctPrice 重命名为 PostProdctPrice。**

```
public class ProductsController : ApiController
    {

       // [System.Web.Mvc.HttpPost]
        public string PostProdctPrice(User user) 
        {
            return "hello";
        }
    } 
```

在 WebAPI 中（当你从 APiController 继承你的控制器时）你不需要在你的方法之上添加 [HttpPost] 或 [HttpGet] 属性。任何以 Get 开头的方法都会自动映射到 HTTP GET 方法，任何以 Post 开头的方法都会自动映射到 HTTP POST 方法。

# sencha-architect - 更改导航视图颜色 Sencha Architect

> ID：16044473
> 
> 赞同：0
> 
> 时间：2013-04-16T18:29:57.167
> 
> 标签：sencha-architect

我从 Senchar Architect 2 开始，我想更改导航视图顶部栏的颜色，

我想要导航栏上的红色，我看到了另外 2 个问题，但我不明白，有一个简单的方法来改变颜色吗？使用 CSS 或 sencha 架构师的配置面板

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T04:00:46.543

是的，您可以在配置面板中更改导航栏的颜色（就像您昨天为后退按钮颜色所做的那样）--> 样式--> 背景：红色。

另外，我建议你看看 Sencha 人推荐的 SASS 主题。

链接在这里：

[http://vimeo.com/36917216](http://vimeo.com/36917216)

# php - 检查我的邮件是否已发送

> ID：16044474
> 
> 赞同：0
> 
> 时间：2013-04-16T18:30:00.443
> 
> 标签：php, email, xampp

```
<?php
            @require_once"Mail.php";

            $from="from email"; //enter email of sender
            $to="recepient email"; //enter to email
            $subject="subject";

            $body="content";

            $host="ssl://smtp.gmail.com";
            $port="465";
            $username="your gmail account user name";
            $pwd="your gmail account password";

            $headers = array ('From' => $from,
                            'To' => $to,
                            'Subject' => $subject);

            $headers["Content-Type"] = 'text/html; charset=UTF-8';

            $smtp = @Mail::factory('smtp',
                                   array ('host' => $host,
                                             'port' => $port,
                                             'auth' => true,
                                             'username' => $username,
                                             'password' => $pwd));

            //Send Email using pear sned option
            $mail = @$smtp->send($to, $headers, $body);

                //If any errors occurs
            if (@PEAR::isError($mail)) {
               ("<p>" . $mail->getMessage() . "</p>");
            }
            else {
             echo("<p>Message successfully sent!</p>");

            }           

?> 
```

添加@reduce一些错误但仍然有三个错误即将到来，它们是：

```
Strict Standards: Non-static method PEAR::isError() should not be called statically, assuming $this from incompatible context in C:\xampp\php\pear\Net\SMTP.php on line 491 
```

严格标准：不应静态调用非静态方法 PEAR::isError()，假设 $this 来自第 265 行 C:\xampp\php\pear\Net\SMTP.php 中的不兼容上下文

严格标准：不应静态调用非静态方法 PEAR::raiseError()，假设 $this 来自第 267 行 C:\xampp\php\pear\Net\SMTP.php 中的不兼容上下文

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T18:42:16.197

您要么必须为 xampp 安装邮件服务器，例如[Mercury](https://www.google.de/search?q=xampp+mercury)。或者您必须将[您的（外部）SMTP 凭证输入到您的`php.ini`](http://expertester.wordpress.com/2010/07/07/how-to-send-email-from-xampp-php/).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T18:33:42.683

您可以检查邮件是否已成功移交给 MTA，**您无法真正检测或检查邮件是否已成功交付给收件人**。那是另一种情况。

检查邮件是否已发送：

```
if (mail('abc@gmail.com',$subject,$body,'From: me@example.org'))
    return true;
else
    return false; 
```

所以你的功能将是：

```
 function email($to,$subject,$body)
 {
     if (mail('abc@gmail.com',$subject,$body,'From: me@example.org'))
        return true;
    else
        return false;
 } 
```

由于 mail 函数总是返回布尔值，因此 tt 可以简化为：

```
function email($to,$subject,$body)
{
   return  mail('abc@gmail.com',$subject,$body,'From: me@example.org');

} 
```

或者，如果您在邮件标题中设置了回复，那么您可以检查是否有任何退回的邮件，这将使您可以肯定地说邮件尚未送达。

# php - 如何获取数据并写入文件？

> ID：16044476
> 
> 赞同：0
> 
> 时间：2013-04-16T18:30:20.223
> 
> 标签：php, xml, file, do-loops

我想`blog01.xml`从`data01.xml`，`blog02.xml`从`data02.xml`等等。我正在尝试使用以下代码，但它不起作用。怎么了？

```
<?php
$v = 1;
do {

    $file = "RAW/" . 'data[$v].xml';
    $postxml = @file_get_contents($file);

    $postxml = str_replace("-", " ", $postxml);

    file_put_contents("XML/" . 'blog0[$v].xml', $postxml);
    $v++;
} while($v<=5);
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T18:32:50.297

利用

```
file_put_contents('XML/blog0'.$v.'.xml', $postxml); 
```

# erlang - 如何使用 riak 本地客户端设置 2i

> ID：16044479
> 
> 赞同：1
> 
> 时间：2013-04-16T18:30:30.897
> 
> 标签：erlang, riak

有谁知道我如何将 2i 设置为使用 riak_object 创建的对象

```
OBJ = riak_object:new() 
```

我想与 riak 本地客户合作，我试图做类似的事情：

```
Obj1 = riakc_obj:new(Bucket, UniqKey, Tablet),
MD1  = riakc_obj:get_update_metadata(Obj1),
MD2  = riakc_obj:set_secondary_index(MD1, {{integer_index, IdxTS}, [FirstTS, LastTS]}),
Obj2 = riakc_obj:update_metadata(Obj1, MD2) 
```

但我在 riak_object 模块中找不到类似的东西，我只找到了有关如何查询 2i 而不是如何设置它的示例。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T09:59:22.093

```
 {ok, C} = riak:local_client(),
    O = riak_object:new(<<"bucket">>, <<"key">>, <<"hello">>),

    O2 = riak_object:update_metadata(
        O,
        dict:from_list([{<<"index">>, [{<<"my_index_bin">>, <<"index_key">>}]}])
    ),
    C:put(O2). 
```

# python - 使用 numpy.fft 对自相关进行统计缩放

> ID：16044491
> 
> 赞同：3
> 
> 时间：2013-04-16T18:30:56.723
> 
> 标签：python, statistics

很可能我刚才让自己看起来很愚蠢，但以下是从基于 fft 的自相关获得间隔 [1，-1] 缩放输出的正确方法吗？缩放应该是 numpy.correlate(x,x, mode="same") 所做的，以将结果缩放到 [1, -1] 间隔。

```
def autocorrelate(x):
  fftx = fft(x)
  fftx_mean = np.mean(fftx)
  fftx_std = np.std(fftx)

  ffty = np.conjugate(fftx)
  ffty_mean = np.mean(ffty)
  ffty_std = np.std(ffty)

  result = ifft((fftx - fftx_mean) * (ffty - ffty_mean))
  result = fftshift(result)
  return [i/(fftx_std * ffty_std) for i in result.real] 
```

我已经运行了一些测试数据，它确实看起来像它应该做的，但我不完全确定我没有搞砸什么，只是不小心得到了一些正确的结果；）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-16T19:10:12.740

Maple 的 AutoCorrelation 函数似乎使用了定义

```
def AutoCorrelation(x):
    x = np.asarray(x)
    y = x-x.mean()
    result = np.correlate(y, y, mode='full')
    result = result[len(result)//2:]
    result /= result[0]
    return result 

In [189]: AutoCorrelation([1,2,1,2,1,2,1,2])
Out[189]: array([ 1\.   , -0.875,  0.75 , -0.625,  0.5  , -0.375,  0.25 , -0.125]) 
```

现在，看看我们是否可以使用 FFT 重现这个结果会很有趣。NumPy`np.fft.fft`是[周期性卷积](http://en.wikipedia.org/wiki/Circular_convolution)，`np.correlate`而是线性卷积。要使用`np.fft.fft`，我们需要添加足够的零填充以使计算基本上是线性的：

```
def autocorrelation(x):
    """
    Compute autocorrelation using FFT
    """
    x = np.asarray(x)
    N = len(x)
    x = x-x.mean()
    s = fft.fft(x, N*2-1)
    result = np.real(fft.ifft(s * np.conjugate(s), N*2-1))
    result = result[:N]
    result /= result[0]
    return result 
```

* * *

以下是一些测试，它们确认`AutoCorrelation`并`autocorrelation`同意并返回与 Maple 的 AutoCorrelation 函数返回的值相同的值——至少对于我所知道的有限示例而言。

```
import numpy as np
fft = np.fft

def autocorrelation(x):
    """
    Compute autocorrelation using FFT
    The idea comes from 
    http://dsp.stackexchange.com/a/1923/4363 (Hilmar)
    """
    x = np.asarray(x)
    N = len(x)
    x = x-x.mean()
    s = fft.fft(x, N*2-1)
    result = np.real(fft.ifft(s * np.conjugate(s), N*2-1))
    result = result[:N]
    result /= result[0]
    return result

def AutoCorrelation(x):
    x = np.asarray(x)
    y = x-x.mean()
    result = np.correlate(y, y, mode='full')
    result = result[len(result)//2:]
    result /= result[0]
    return result 

def autocorrelate(x):
    fftx = fft.fft(x)
    fftx_mean = np.mean(fftx)
    fftx_std = np.std(fftx)

    ffty = np.conjugate(fftx)
    ffty_mean = np.mean(ffty)
    ffty_std = np.std(ffty)

    result = fft.ifft((fftx - fftx_mean) * (ffty - ffty_mean))
    result = fft.fftshift(result)
    return [i / (fftx_std * ffty_std) for i in result.real]

np.set_printoptions(precision=3, suppress=True)

"""
These tests come from
http://www.maplesoft.com/support/help/Maple/view.aspx?path=Statistics/AutoCorrelation
http://www.maplesoft.com/support/help/Maple/view.aspx?path=updates%2fMaple15%2fcomputation
"""
tests = [
    ([1,2,1,2,1,2,1,2], [1,-0.875,0.75,-0.625,0.5,-0.375,0.25,-0.125]),
    ([1,-1,1,-1], [1, -0.75, 0.5, -0.25]),
    ]

for x, answer in tests:
    x = np.array(x)
    answer = np.array(answer)
    # print(autocorrelate(x)) 
    print(autocorrelation(x))
    print(AutoCorrelation(x))
    assert np.allclose(AutoCorrelation(x), answer)
    print

"""
Test that autocorrelation() agrees with AutoCorrelation()
"""
for i in range(1000):
    x = np.random.random(np.random.randint(2,100))*100
    assert np.allclose(autocorrelation(x), AutoCorrelation(x)) 
```

# python - 使用 python-twitter 检索有效电子邮件的 screen_name

> ID：16044494
> 
> 赞同：1
> 
> 时间：2013-04-16T18:31:02.617
> 
> 标签：python, python-twitter

我正在尝试利用 python-twitter 包装器将电子邮件地址转换为 twitter 用户名。到目前为止，我正在尝试使用下面的代码，但收到一条错误消息，指出“抱歉，该页面不存在代码 34”。我正在使用最新版本的 python-twitter 和有效的密钥/秘密来访问（其他 python-twitter 脚本工作正常）。

这是我所拥有的：

```
import twitter
api = twitter.Api(consumer_key='',
                          consumer_secret='',
                          access_token_key='',
                          access_token_secret='')
users = api.GetUserByEmail('testemailaddress123@gmail.com')
for name in users:
    print name 
```

此代码基于以下位置的 python-twitter 文档：[http ://static.unto.net/python-twitter/0.6/doc/twitter.html#User](http://static.unto.net/python-twitter/0.6/doc/twitter.html#User)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T20:50:38.200

似乎 python-twitter 仍在使用 twitter 的 v1 API，该 API 将于 2013 年 5 月 7 日停用。今天，2013 年 4 月 16 日，[Twitter 正在执行停电测试](https://dev.twitter.com/blog/api-v1-retirement-final-dates)，以准备弃用 v1。

您应该改用 Twitter 的 v1.1 API。我相信以下内容适用于 python-twitter 客户端（尚未测试）。

```
api = twitter.Api(consumer_key='',
                      consumer_secret='',
                      access_token_key='',
                      access_token_secret='',
                      base_url='https://api.twitter.com/1.1') 
```

**编辑：**似乎有一个 python-twitter 客户端的 v1.1 分支，可以在[这里](https://github.com/bear/python-twitter/tree/api_v1.1)找到。

# intuit-partner-platform - 无法向 Intuit API Explorer 进行身份验证

> ID：16044498
> 
> 赞同：0
> 
> 时间：2013-04-16T18:31:18.623
> 
> 标签：intuit-partner-platform, customer-account-data-api

我正在尝试对 Intuit API Explorer 进行身份验证，以更好地熟悉客户数据 (AggCat) API。

我输入了消费者密钥/秘密、SAML id、用户 ID 和我上传的原始 .crt 证书。我得到错误：

`The given certificate file is not supported. Please provide valid PEM certificate file.`

我不明白这个错误，因为 .crt 文件是 PEM 编码的，据我所知。

尽管如此，我还是去了“创建 X.509 密钥”页面：

[http://docs.developer.intuit.com/0020_Aggregation_Categorization_Apps/009_Using_AggCat/0010_GettingStarted/0015_Create_an_AggCat_integration/0010_Creating_X.509_Public_Certificates](http://docs.developer.intuit.com/0020_Aggregation_Categorization_Apps/009_Using_AggCat/0010_GettingStarted/0015_Create_an_AggCat_integration/0010_Creating_X.509_Public_Certificates)

并按照底部“生成 PEM 文件”中的说明进行操作。我能够通过第 1 步。（将 jks 存储转换为 p12 格式），但在尝试运行第 2 步时出现以下错误：

```
$ openssl pkcs12 -in keystore.p12 -nocerts -out cert.pem

MAC verified OK
Error outputting keys and certificates
139679448614560:error:06065064:digital envelope routines:EVP_DecryptFinal_ex:bad decrypt:evp_enc.c:539:
139679448614560:error:23077074:PKCS12 routines:PKCS12_pbe_crypt:pkcs12 cipherfinal error:p12_decr.c:104:
139679448614560:error:2306A075:PKCS12 routines:PKCS12_item_decrypt_d2i:pkcs12 pbe crypt error:p12_decr.c:130: 
```

我在 ubuntu-12.04 LTS 上使用 jdk-1.7.0_17 和 openssl-1.0.1。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T22:15:03.390

找到了，别找了！

问题源于 PKCS12 格式不支持存储文件和其中的任何密钥的单独密码。存储文件和其中的密钥都必须使用相同的密码进行加密。

所以最简单的方法是再次执行该过程，并在使用 keytool 生成初始私钥和密钥库的步骤中：

> keytool -genkey -alias myapp -validity 1095 -keyalg RSA -keystore keystore.jks

确保对密钥库 (storepass) 和私钥 (keypass) 使用相同的密码。

作为替代方案，如果您确实必须/想要在该步骤中为密钥库和密钥使用单独的密码，请在创建 PEM 的初始步骤中：

```
keytool -importkeystore -srckeystore [MY_KEYSTORE.jks] 
  -destkeystore [MY_FILE.p12]
  -deststoretype PKCS12 
  -deststorepass [PASSWORD_PKCS12] change this to [KEYPASS]
  -srcstorepass [PASSWORD_JKS] 
```

将 -srcstorepass 设置为密钥库 (storepass) 的密码，但将 PKCS12 文件的 -deststorepass 设置为通过上面的 keytool -genkey 命令创建密钥/密钥库时使用的私钥 (keypass) 的密码。

我没有测试过这个替代方案，但它应该也可以工作，因为 PCKS12 存储和密钥最终都会使用相同的密码。

# makefile - 麻烦制作线轴

> ID：16044504
> 
> 赞同：0
> 
> 时间：2013-04-16T18:31:31.203
> 
> 标签：makefile, command, global, linux-mint

我正在尝试在 Mint Maya linux 发行版上制作 Spooles 2.2-9，但出现以下错误。

```
aaron@atown ~/Downloads/spooles $ sudo make global
cd A2/src             ; make -f makeGlobalLib
make[1]: Entering directory `/home/aaron/Downloads/spooles/A2/src'
makeGlobalLib:19: warning: overriding commands for target `.c.o'
../../Make.inc:90: warning: ignoring old commands for target `.c.o'
/usr/lang-4.0/bin/cc -c -O basics.c -o A2_basics.o
make[1]: /usr/lang-4.0/bin/cc: Command not found
make[1]: *** [basics.o] Error 127
make[1]: Leaving directory `/home/aaron/Downloads/spooles/A2/src'
make: *** [global] Error 2 
```

我是 linux 新手，所以任何帮助都是最有用的。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T19:33:31.460

您是否尝试过从软件包管理器安装它？我知道该软件包由 Ubuntu 和 Debian 提供，而 Mint 是衍生产品，因此它应该可以安装。无需自己构建。

如果您确实想自己编译它，首先请注意您永远不应该以 root 身份构建软件（不要在`make`命令前加上`sudo`）。如果有一个`install`步骤，您可能需要以 root 身份运行它，但通常不需要构建。

其次，默认情况下，这个包似乎配置为在 OSX 上构建（我认为`/usr/lang-4.0/bin/cc`是 OSX 路径......也许？）。无论如何，这不是编译器在 Linux 上的位置：试试这个来覆盖编译器：

```
make CC=gcc global 
```

您的系统也可能没有安装编译器。如果您收到上述错误，请使用您的软件包管理器安装`gcc`软件包。

# highcharts - Highcharts yaxis标签格式

> ID：16044509
> 
> 赞同：5
> 
> 时间：2013-04-16T18:31:44.247
> 
> 标签：highcharts, highstock, axis-labels

有什么方法可以将 yaxis 格式化为我想要的东西。

事实上，有时在 y 轴上，数据在右侧显示为 (k)，而不是千位。

我想删除（k）。我该怎么做？

我想要的 yaxis 图像：

![在此处输入图像描述](https://i.stack.imgur.com/PJwbB.jpg)

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-17T07:46:00.670

您可以使用格式化程序（[http://api.highcharts.com/highcharts#yAxis.labels.formatter](http://api.highcharts.com/highcharts#yAxis.labels.formatter)）和 numberFormat() [http://api.highcharts.com/highcharts#Highcharts.numberFormat()](http://api.highcharts.com/highcharts#Highcharts.numberFormat())

[http://jsfiddle.net/K2X3Y/](http://jsfiddle.net/K2X3Y/)

```
 yAxis: {
        labels: {
            formatter: function () {
                return Highcharts.numberFormat(this.value,0);
            }
        }
    }, 
```

# jquery - 207 带有摘要身份验证的多状态响应 jQuery 错误仅在隐身模式下有效

> ID：16044512
> 
> 赞同：0
> 
> 时间：2013-04-16T18:31:53.940
> 
> 标签：jquery, ajax, google-chrome, hash, webdav

在 nginx+php-fpm 服务器上，我分别运行基于 SabreDAV 和 jQuery的[carddav 服务器](http://baikal-server.com)和[客户端。](http://www.inf-it.com/open-source/clients/carddavmate/)我可以正常登录，但有一个例外：一段时间后，可能由于登录尝试失败，我无法再使用 Chrome 登录，除非我使用隐身模式或临时 vanilla 首选项文件夹。在控制台中，我看到以下错误消息：

```
PROPFIND https://user:password@dav.server.com/d/card.php/principals/ 207 (Multi-Status) jquery.js:8434
send jquery.js:8434
jQuery.extend.ajax jquery.js:7986
[...]
Error: [netCheckAndCreateConfiguration: 'https://dav.server.com/d/card.php/principals/'] code: '401' webdav_protocol.js:135 
```

服务器端日志似乎在登录失败和成功之间没有一点区别。客户端，拥有来自 HTML 表单的凭据，发送他们的 ajax 请求，获得 401 响应并使用正确的身份验证标头重试，正如您从开发工具信息中看到的那样：

```
Request URL:https://user:password@dav.server.com/d/card.php/principals/
Request Method:PROPFIND
Status Code:207 Multi-Status
Request Headersview source
Accept:application/xml, text/xml, */*; q=0.01
Accept-Charset:UTF-8,*;q=0.5
Accept-Encoding:gzip,deflate,sdch
Accept-Language:el,en;q=0.8,en-US;q=0.6
Authorization:Digest username="user", realm="BaikalDAV", nonce="516d8f8577751", uri="/d/card.php/principals/", response="53a29333f913bc5824d9ae94d4cdd573", opaque="df58bdff8cf60599c939187d0b5c54de", qop=auth, nc=00000001, cnonce="e22cc240959fa57b"
Connection:keep-alive
Content-Length:122
Content-Type:text/xml; charset=UTF-8
Cookie:PHPSESSID=3f9bfd0909ba6f95888c525a3281f3c3
Depth:0
Host:dav.server.com
Origin:https://dav.server.com
Referer:https://dav.server.com/contacts/
User-Agent:Mozilla/5.0 (X11; Linux i686) AppleWebKit/537.22 (KHTML, like Gecko)  Chrome/25.0.1364.160 Safari/537.22
X-client:CardDavMATE 0.10.1 (INF-IT CardDAV Web Client)
X-Requested-With:XMLHttpRequest 
```

服务器接受凭据并使用`207 Multi-status`以下标头进行响应：

```
Cache-Control:no-store, no-cache, must-revalidate, post-check=0, pre-check=0
Connection:keep-alive
Content-Type:application/xml; charset=utf-8
Date:Tue, 16 Apr 2013 17:51:01 GMT
DAV:1, 3, extended-mkcol, addressbook, access-control, calendarserver-principal-property-search
Expires:Thu, 19 Nov 1981 08:52:00 GMT
Pragma:no-cache
Server:nginx/1.3.15
Transfer-Encoding:chunked
Vary:Brief,Prefer
X-Powered-By:PHP/5.3.23 
```

这个身体：

```
<?xml version="1.0" encoding="utf-8"?>
<d:multistatus xmlns:d="DAV:" xmlns:s="http://sabredav.org/ns" xmlns:card="urn:ietf:params:xml:ns:carddav">
  <d:response><d:href>/d/card.php/principals/</d:href>
      <d:propstat>
          <d:prop>
               <d:current-user-principal><d:href>/d/card.php/principals/user/</d:href></d:current-user-principal>
          </d:prop>
          <d:status>HTTP/1.1 200 OK</d:status>
      </d:propstat>
  </d:response>
</d:multistatus> 
```

在隐身模式下，调用 jQuery 中的成功回调，客户端应用程序继续并按预期工作。在正常模式下，即使与服务器交换了相同的确切信息，也会调用错误回调。即使我清除了在 Chrome 版本 25.0.1364.160 Debian 7.0 (186726) 中可以找到的所有私人数据、密码和任何其他选项，也会发生这种情况。

我已经看到了很多关于从 Chrome 清除身份验证数据的问题，并且我尝试了通常的建议（比如在 URL 中使用 user@ 向服务器发送请求），但我手动发送请求没有问题。只是 ajax 调用似乎完全没有理由失败。

在 Firefox 中我没有问题，只是有时会弹出浏览器身份验证。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-27T10:24:56.667

我最终转而使用 Firefox。另一种选择是修补 Baikal 以使用 http 基本身份验证。至少根据 carddavmate 开发人员的说法。

# c++ - 带两个参数的 decltype 是什么？

> ID：16044514
> 
> 赞同：50
> 
> 时间：2013-04-16T18:31:57.000
> 
> 标签：c++, c++11, sfinae, typetraits, decltype

> **编辑，以避免混淆：`decltype`不*接受*两个参数。查看答案。**

以下两个结构可用于`T`在编译时检查类型上是否存在成员函数：

```
// Non-templated helper struct:
struct _test_has_foo {
    template<class T>
    static auto test(T* p) -> decltype(p->foo(), std::true_type());

    template<class>
    static auto test(...) -> std::false_type;
};

// Templated actual struct:
template<class T>
struct has_foo : decltype(_test_has_foo::test<T>(0))
{}; 
```

我认为这个想法是在检查成员函数是否存在时使用 SFINAE，因此如果`p->foo()`无效，则只定义`test`返回 的省略号版本。`std::false_type`否则为第一个方法定义`T*`并将返回`std::true_type`。实际的“切换”发生在第二个类中，它继承自`test`. 与使用类似方法的不同方法相比，这似乎很聪明且“轻量级” `is_same`。

with two arguments 首先让`decltype`我感到惊讶，因为我认为它只是获取表达式的类型。当我看到上面的代码时，我认为它类似于“尝试编译表达式并始终返回第二个的类型。如果表达式编译失败，则失败”（所以隐藏这个专业化；SFINAE）。

但：

然后我想我可以使用这种方法来编写任何“有效表达式”检查器，只要它依赖于某种类型`T`。例子：

```
...
    template<class T>
    static auto test(T* p) -> decltype(bar(*p), std::true_type());
... 
```

[http://ideone.com/dJkLPF](http://ideone.com/dJkLPF)

所以我认为，这将返回一个`std::true_type`当且仅当`bar`被定义接受 a`T`作为第一个参数（或者如果`T`是可转换的，等等......），即：如果它是在定义类型`bar(*p)`的某些上下文中编写的，则将编译.`p``T*`

但是，上面的修改*总是*计算为`std::false_type`。**为什么是这样？**我不想用一些复杂的不同代码来修复它。我只是想知道为什么它不能像我预期的那样工作。显然，**`decltype`有两个论点的**工作方式与我想象的不同。我找不到任何文件；到处都只能用一种表达方式来解释。

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2013-04-16T18:36:40.540

它是一个逗号分隔的表达式列表，类型与列表中最后一个表达式的类型相同。它通常用于验证第*一个*表达式是否有效（可编译，认为 SFINAE），第二个用于指定`decltype`在第一个表达式有效的情况下应该返回。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-04-16T18:36:58.377

`decltype`不接受两个参数。简单地说，它可以有一个表达式作为它的参数，而逗号运算符是创建表达式的一种方式。根据第 5.18/1 段：

> [...] 一对用逗号分隔的表达式从左到右计算；左边的表达式是丢弃值表达式（第 5 条）。与左表达式关联的每个值计算和副作用在与右表达式关联的每个值计算和副作用之前排序。**结果的类型和值是右操作数的类型和值**；结果与其右操作数属于相同的值类别，并且如果其右操作数是泛左值和位域，则结果是位域。如果右操作数的值是临时的（12.2），则结果是临时的。

所以：

```
static_assert(std::is_same<decltype(42, 3.14), double>::value, "Will not fire"); 
```

# c# - PerformanceCounterCategory.Create break with 参数不正确

> ID：16044516
> 
> 赞同：0
> 
> 时间：2013-04-16T18:32:03.250
> 
> 标签：c#, wcf, performancecounter

所以我正在创建几个自定义性能计数器并将它们分组到一个类别下。这是在 IIS 7 上托管并通过 Visual Studio 运行的 WCF 应用程序中构建的。

我一直在关注 msdn 的示例和文档[here](http://msdn.microsoft.com/en-us/library/sb32hxtc.aspx)

这是我在方法中使用的代码：

```
if (PerformanceCounterCategory.Exists("MyCategory"))
{
    PerformanceCounterCategory.Delete("MyCategory");
}

CounterCreationDataCollection counters = new CounterCreationDataCollection();
CounterCreationData getRequests = new CounterCreationData();
getRequests.CounterName = "Get count per sec";
getRequests.CounterHelp = "Get count per sec";
getRequests.CounterType = PerformanceCounterType.RateOfCountsPerSecond64;
counters.Add(getRequests);

CounterCreationData headRequests = new CounterCreationData();
headRequests.CounterName = "Head count per sec";
headRequests.CounterHelp = "Head count per sec";
headRequests.CounterType = PerformanceCounterType.RateOfCountsPerSecond64;
counters.Add(headRequests);

PerformanceCounterCategory.Create("MyCategory", "Custom Category", PerformanceCounterCategoryType.SingleInstance,counters); 
```

我遇到的问题是最后一行给了我一个例外

> System.dll 中出现“System.ComponentModel.Win32Exception”类型的未处理异常附加信息：参数不正确

编辑：

调用堆栈如下所示：

> System.Diagnostics.PerformanceCounterLib.RegisterFiles(String arg0, Boolean unregister) at System.Diagnostics.PerformanceCounterLib.RegisterCategory(String categoryName, PerformanceCounterCategoryType categoryType, String categoryHelp, CounterCreationDataCollection creationData) at System.Diagnostics.PerformanceCounterCategory.Create(String categoryName, String categoryHelp, PerformanceCounterCategoryType categoryType, CounterCreationDataCollection counterData)

我想知道是否有人知道或见过这个问题？

# json - 体式状态码=404

> ID：16044532
> 
> 赞同：0
> 
> 时间：2013-04-16T18:33:36.263
> 
> 标签：json, apex-code, asana

在 Salesforce APEX 中为 Asana API 编写包装类，遇到发送的任何“有效”GET 命令的此状态代码：

```
HttpResponse[Status=Object Not Found, StatusCode=404] 
```

即使使用最简单的命令， GET /users/me

这是生成和发送的 HttpRequest：

```
System.HttpRequest[Endpoint=https://app.asana.com/api/1.0/users/me, Method=GET] 
```

# sql - 需要帮助查找访问中的下一条记录

> ID：16044536
> 
> 赞同：2
> 
> 时间：2013-04-16T18:33:48.137
> 
> 标签：sql, ms-access

这是我的桌子

```
VehicleName EventDate       Message  Landmark
071-314     28-Sep-12 5pm   On Duty 
071-314     28-Sep-12 6pm   Driving 
071-314     28-Sep-12 7pm   On Duty 
071-314     28-Sep-12 8pm   Driving 
071-314     28-Sep-12 3am   Off Duty    
071-315     28-Sep-12 4am   Driving 
071-315     28-Sep-12 5am   On Duty 
071-315     28-Sep-12 6am   Driving 
071-315     28-Sep-12 7am   On Duty 
071-315     28-Sep-12       Off Duty 
```

我需要做的是找到从“上班”到下一个“驾驶”或“下班”状态的区别。它也需要由车辆名称分隔。

这可以通过访问吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T23:14:17.903

我将您的样本数据放入名为 [DutyEvents] 的表中，并对其进行了调整以使其保持一致（例如，第一个 [VehicleName] 的最终“下班时间”是在*第二天*凌晨 3 点）...

```
VehicleName EventDate            Message
----------- -------------------  -------
071-314     2012-09-28 17:00:00  On Duty
071-314     2012-09-28 18:00:00  Driving
071-314     2012-09-28 19:00:00  On Duty
071-314     2012-09-28 20:00:00  Driving
071-314     2012-09-29 03:00:00  Off Duty
071-315     2012-09-28 04:00:00  Driving
071-315     2012-09-28 05:00:00  On Duty
071-315     2012-09-28 06:00:00  Driving
071-315     2012-09-28 07:00:00  On Duty
071-315     2012-09-28 09:00:00  Off Duty 
```

...然后我创建了以下访问查询...

```
SELECT VehicleName, Message, EventDate AS Start, NextEventDate as End, 
    Round((NextEventDate - EventDate) * 24, 0) AS Hours
FROM
(
    SELECT de.VehicleName, de.EventDate, de.Message,
        (SELECT TOP 1 EventDate FROM DutyEvents 
         WHERE VehicleName = de.VehicleName
            AND EventDate > de.EventDate ORDER BY EventDate
        ) AS NextEventDate
    FROM DutyEvents de
    WHERE de.Message <> "Off Duty"
) 
```

...产生以下结果...

```
VehicleName Message  Start                End                   Hours
----------- -------  -------------------  -------------------   -----
071-314     On Duty  2012-09-28 17:00:00  2012-09-28 18:00:00   1
071-314     Driving  2012-09-28 18:00:00  2012-09-28 19:00:00   1
071-314     On Duty  2012-09-28 19:00:00  2012-09-28 20:00:00   1
071-314     Driving  2012-09-28 20:00:00  2012-09-29 03:00:00   7
071-315     Driving  2012-09-28 04:00:00  2012-09-28 05:00:00   1
071-315     On Duty  2012-09-28 05:00:00  2012-09-28 06:00:00   1
071-315     Driving  2012-09-28 06:00:00  2012-09-28 07:00:00   1
071-315     On Duty  2012-09-28 07:00:00  2012-09-28 09:00:00   2 
```

那是你要找的吗？

# java - 如何在 GAE 的管理控制台中更改自定义页面的宽度？

> ID：16044537
> 
> 赞同：1
> 
> 时间：2013-04-16T18:33:55.413
> 
> 标签：java, python, html, css, google-app-engine

我在我的 GAE 应用程序中添加了一个自定义页面。一切正常，除了管理控制台将自定义页面内容的大小限制为 73 em。这是由 CSS 类**g-doc-1024**完成的。

```
.g-doc-1024 {
  width: 73.074em;
} 
```

**有没有办法更改此页面上的 CSS，以便我们在使用 Admin Console 时可以从大显示器中受益？**这是否可以（1）通过配置或（2）通过自定义页面的 iframe 来实现？

我们希望使用自定义页面，以便所有内容都集中在一个地方。但是管理控制台的 CSS 阻止人们使用我们的自定义页面。

*更新：*

*   看起来在[issue 6629](https://code.google.com/p/googleappengine/issues/detail?id=6627)中有关于此的功能请求。请给问题加注星标！
*   作为一种解决方法，可以使用自定义[chrome 扩展](http://developer.chrome.com/extensions/)来修复管理控制台的 CSS。

# xcode - 在 xcode 用户 ID 密码错误中从 github 克隆存储库

> ID：16044541
> 
> 赞同：2
> 
> 时间：2013-04-16T18:34:17.480
> 
> 标签：xcode, git, github, git-clone

打开 xcode，然后单击“连接到存储库”

![在此处输入图像描述](https://i.stack.imgur.com/NLwuK.jpg)

输入 URL 后，底部的按钮变为克隆。仅供参考，存储库是私有的，应该需要 github 密码和用户 ID。然后单击克隆按钮。

![在此处输入图像描述](https://i.stack.imgur.com/ALzpG.jpg)

它询问在哪里保存文件。我选择了一个位置，然后它就来了： ![在此处输入图像描述](https://i.stack.imgur.com/HTt0t.jpg)

始终相信 github.com 已按照另一篇文章中的建议进行选择。单击继续，然后得到以下信息：

![在此处输入图像描述](https://i.stack.imgur.com/K5HYk.jpg)

在这一点上，它在任何时候都没有要求我输入用户名或密码。在这里和其他网站上环顾四周，此时它应该会询问用户 ID 和密码，但这就是我所得到的。在 xcode 中克隆 github.com 上的私有存储库时，如何进入要求我输入 Github 用户 ID 和密码的屏幕？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-12T16:29:51.207

这是 xCode 中的一个小故障。您必须从 git 命令行或其他 git 工具安装 git 并修复/准备存储库，然后在 xCode 中重新打开该项目，然后它将被识别。

xCode 在运行时非常适合 git，但有时会中断并且需要手动修复/调整 xCode 之外的存储库。您应该将 xCode 的 git 功能视为使用 git 的一个很好的帮助，但不是一个完整的接口替代品。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-06-30T06:49:24.560

你可以这样尝试：

1.  打开`Terminal`应用程序。
2.  cd 到你的项目目录。( `cd /your/project/directory`)
3.  写`git clone https/link/for/your/git`。
4.  为 git 用户放置`password`。
5.  它将开始在您的项目目录中下载。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-30T20:55:41.737

`git@github.com:user/repo.git`如果您[在 Mac 上正确设置了公共 SSH 密钥](https://help.github.com/articles/generating-ssh-keys)（并且私钥不受密码保护），它似乎可以使用URL 格式。

当 xCode 通过 SSH 登录以克隆存储库时，它无需您提供任何凭据即可执行此操作。请注意，这可能仅适用于您对相关存储库具有 SSH（读/写）访问权限的情况。由于使用 Github，您可能会分叉另一个项目并在自己的分叉上工作，但这不应该成为太大的障碍。

# ssrs-2008 - SSRS 不允许基于数据源的嵌入式数据集中的参数

> ID：16044542
> 
> 赞同：0
> 
> 时间：2013-04-16T18:34:20.430
> 
> 标签：ssrs-2008, reporting-services

每当我构建使用嵌入式数据集的报表并尝试使用参数（例如 @StartDate 和 @EndDate）时，我都会收到一条错误消息，指出我必须声明标量值。但是，仅当我设置使用“安全存储在报表服务器中的凭据”选项的数据源时，才会出现此错误。如果我将数据源设置为使用“Windows 集成安全性”，我不会收到错误消息。

我完全不知所措。这些报告需要大量的人访问。我们通过 SSRS 通过 Active Directory 组授予他们“浏览器”权限，包括数据源。

最好的方法是什么？有简单的解决方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T19:48:15.267

我通常使用已设置的选项进行部署，方法是进入数据源并选择“登录到 SQL Server”部分 >“使用 SQL Server 身份验证”>（设置您的用户和设置）。当您在部署后将 Windows 用户用作主要用户时，可能会出现问题。

另一个问题是，这在 Business Intelligence Development Studio、BIDS 中是否始终正常工作，而不是在服务器上？非常有趣的是，仅权限问题就会导致返回标量错误。通常，当用户必须访问报告时，他们可能仍然会收到错误，但不存储凭据只是要求他们提供凭据。这将有助于更多地了解数据集以及它们正在返回或应该返回的内容。通常，开始和结束通常在 SSRS 中定义为“DataTime”，并且位于诸如“@Start 和 @End 之间的事物”之类的谓词中，并且用户从日历中选择数据。如果您将它们绑定到其他数据集，并且用户可能会选择多个可能会出现问题的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T17:27:35.967

我查看了我们的 DBA 设置的数据源。它被设置为 ODBC 连接。我将其更改为 Microsoft SQL。现在可以了。我不明白为什么，如果有经验更丰富的人可以解释，我将不胜感激。

# iphone - 如何检查 Facebook 是否在设备中登录？目标C

> ID：16044543
> 
> 赞同：0
> 
> 时间：2013-04-16T18:34:27.653
> 
> 标签：iphone, ios, objective-c, facebook

我正在将 Facebook SDK 实施到我的应用程序中。我正在使用 FBLoginView 登录 Facebook。我有一个`UIButton`，我用来在用户的 Facebook 墙上分享。现在我不想使用 FBLoginView 登录，我想检查是否有 Facebook 应用程序，以及用户是否已登录。

```
- (IBAction)pickFriendsList:(UIButton *)sender
{
    FBFriendPickerViewController *friendPickerController = [[FBFriendPickerViewController alloc] init];
    friendPickerController.title = @"Pick Friends";
    [friendPickerController loadData];

    // Use the modal wrapper method to display the picker.
    [friendPickerController presentModallyFromViewController:self animated:YES handler:
     ^(FBViewController *sender, BOOL donePressed) {

         if (!donePressed) {
             return;
         }
         NSString* fid;
         NSString* fbUserName;

         for (id<FBGraphUser> user in friendPickerController.selection)
         {
             NSLog(@"\nuser=%@\n", user);
             fid = user.id;

             fbUserName = user.name;

             NSMutableDictionary* params = [NSMutableDictionary dictionaryWithObjectsAndKeys:@"test", @"message", @"http://webecoist.momtastic.com/wp-content/uploads/2009/01/nature-wonders.jpg", @"picture", @"Sample App", @"name",fid,@"tags",fid,@"to",@"106377336067638",@"place", nil];

                 [FBRequestConnection startWithGraphPath:[NSString stringWithFormat:@"%@/feed",fid] parameters:params               HTTPMethod:@"POST" completionHandler:^(FBRequestConnection *connection,id result,NSError *error)
                                          {

             [FBWebDialogs presentFeedDialogModallyWithSession:nil                                                     parameters:params  handler:^(FBWebDialogResult result, NSURL *resultURL, NSError *error)

              {
                  if (error)
                  {
                      // Error launching the dialog or publishing a story.

                      NSLog(@"Error publishing story.");
                  }
                  else
                  {
                      if (result == FBWebDialogResultDialogNotCompleted) {
                          // User clicked the "x" icon
                          NSLog(@"User canceled story publishing.");
                      }
                      else
                      {

                          // Handle the publish feed callback

                               //Tell the user that it worked.

                           }

                  }
              }];
                                              }];

         }

     }];

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T02:32:59.720

我假设您使用的是 iOS 6 sdk。在这种情况下，请使用以下代码**（适用于设备）**：

```
if([SLComposeViewController isAvailableForServiceType:SLServiceTypeFacebook]) 
{

//user is already logged in using iOS integrated FB a/c

}
else
{

//user is not logged in

} 
```

**注意：FBSession 不能检查这个条件。所以使用 FBSession 进行会话检查与上面的代码有不同的含义。**

问候，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T18:48:40.337

检查 URL 方案 fb://

`[[UIApplication sharedApplication] canOpenURL:@"fb://"]`如果安装了 Facebook 应用程序，则返回 YES。这篇文章列出了 Facebook 的可用 URL 方案：[https ://stackoverflow.com/a/5707825/1511668](https://stackoverflow.com/a/5707825/1511668)

也许 fb://online 是您正在寻找的。

# android - 始终显示滚动条

> ID：16044547
> 
> 赞同：0
> 
> 时间：2013-04-16T18:34:41.820
> 
> 标签：android, scrollbar, visibility

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical"
android:focusable="true"
android:focusableInTouchMode="true"
android:fadeScrollbars="false" >
<Scrollview ... 
```

我想始终显示滚动条（`android:fadeScrollbars="false"`）！我的屏幕上也有 EditTexts。这就是为什么我放（`android:focusableInTouchMode="true"`和`android:focusable="true"`）。如果我把这最后两个代码我的滚动条会淡出，为什么？你有解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T18:50:22.767

请用这个代替那个。

在这里达到了预期的结果并为每个活动添加了清单

安卓：windowSoftInputMode="stateHidden"

# c++ - 为什么不是 std::hash 专门用于 char*？

> ID：16044551
> 
> 赞同：10
> 
> 时间：2013-04-16T18:34:53.363
> 
> 标签：c++, hash, stl, stdhash

为什么 C++ 标准不指定`std::hash<T>`专门用于`char*`、`const char*`、`unsigned char*`、`const unsigned char*`等？即，它将散列 C 字符串的内容，直到找到终止的空值。

将我自己的专业化注入我`std`自己的代码的命名空间有什么害处吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-16T19:02:18.267

> 为什么 C++ 标准不指定`std::hash<T>`专门用于`char*`、`const char*`、`unsigned char*`、`const unsigned char*`等？

看起来它起源于[提案 N1456](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2003/n1456.html)。（强调我的）

> 一些早期的哈希表实现对 char* 进行了特殊处理：它专门使用默认哈希函数来查看指向的字符数组，而不是指针本身。该提案取消了这种特殊待遇。特殊处理使得使用 C 字符串的哈希表稍微容易一些，但**代价是消除了一致性并使得编写通用代码变得更加困难。**由于通常期望天真的用户使用 std::basic_string 而不是 C 字符串，因此特殊处理的成本超过了收益。

如果我正确地解释了这一点，原因是支持 C 风格的字符串会破坏通常作用于指针散列的代码。

> 将我自己的专业化注入我自己的代码的 std 命名空间有什么害处吗？

有潜在的危害，是的。

*   将来，您添加到`std`命名空间的任何内容都可能与新的符号名称发生冲突。
*   目前，您添加到`std`命名空间的任何内容都可能与标准库的其他组件“更好地匹配”，从而无声地破坏行为。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-16T18:40:09.703

char*（及其同类）并不总是意味着字符串。它们可以是简单的字节数组或二进制文件转储或任何数量的其他东西。如果您指的是 C++ 中的字符串，则通常使用“字符串”类。

至于创建自己的，鉴于上述情况，这是一个坏主意。但是，对于用户定义的类型，可以在 std:: 命名空间中创建 std:: 函数的特化。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-16T19:04:06.800

指针类型有一个标准的特化，[见这里](http://en.cppreference.com/w/cpp/utility/hash)

```
template< class T > struct hash<T*>; 
```

因此，它也可以覆盖`char*`（作为字节序列而不是 C 风格的字符串）。

如果您的意思是专门针对 C 风格的字符串，那么实现它在技术上没有问题。但是由于`std::string`在 C++ 中有一个特化，所以对 C 风格的字符串进行特化是不值得的。

对于问题的第二部分，您可以在`std`命名空间中注入所有内容，但是，您得到了什么？这违背了命名空间的目标。拥有自己的命名空间区域。

# python - 求解模方程（Python）

> ID：16044553
> 
> 赞同：4
> 
> 时间：2013-04-16T18:35:02.680
> 
> 标签：python, modulus, equation-solving

我有一个似乎很容易在 Python 中解决的问题，但由于我是 python 新手，所以我不知道如何解决这个问题。

我想要解决的只是...

`(x * e) mod k = 1` （其中`e`和`k`是已知值）

有什么简单的方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-06T14:03:56.163

如果您更愿意使用流行的数学库[gmpy](http://code.google.com/p/gmpy/)而不是编写自己的算法，那么求解方程（即求模逆）的函数称为 invert()。安装当前版本的 gmpy（撰写本文时的版本 2）后，您只需执行以下操作：

```
>>> import gmpy2
>>> x = gmpy2.invert(e, k) # (Supply e and k here) 
```

注意：gmpy 将以其本机 mpz（多精度整数）格式返回值，但是您可以像 Python 代码中的常规 int 一样处理该值，或者如果您愿意，可以将其显式转换为 int：

```
>>> x = int(gmpy2.invert(3, 7)) 
```

这是 gmpy2.invert() 的文档：

> 反转（x，m）-> mpz
> 
> 返回 y 使得 x*y == 1 (mod m)。如果不存在逆，则引发 ZeroDivisionError。

这种方法的优点是 gmpy 算法速度很快，您不需要输入任何额外的代码。缺点是您必须导入第三方模块。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-16T18:40:17.703

搜索`x`基本上是在寻找`e`mod的逆元素，`k`这可以通过 [扩展欧几里得算法](http://en.wikipedia.org/wiki/Extended_Euclidean_algorithm)完成，该算法很好地实现并用于[模逆](http://www.algorithmist.com/index.php/Modular_inverse)：

```
# Iterative Algorithm (xgcd)
def iterative_egcd(a, b):
    x,y, u,v = 0,1, 1,0
    while a != 0:
        q,r = b//a,b%a; m,n = x-u*q,y-v*q # use x//y for floor "floor division"
        b,a, x,y, u,v = a,r, u,v, m,n
    return b, x, y

def modinv(a, m):
    g, x, y = iterative_egcd(a, m) 
    if g != 1:
        return None
    else:
        return x % m 
```

[注意：我不拥有代码]

和用法：

```
>>> e = 3
>>> k = 7
>>> x = modinv(e,k)
>>> x
5
>>> e*x % k
1 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2021-08-01T02:35:30.237

从[**Python 3.8**](https://docs.python.org/3/library/functions.html#pow)开始，现在最简单的方法是：

```
pow(e, -1, k) # x is the output of this statement 
```

例子：

```
>>> pow(38, -1, 97)
23
>>> 23 * 38 % 97 == 1
True 
```

# android - 我可以使用 shouldInterceptRequest 来阻止 Android 中的特定调用吗？

> ID：16044554
> 
> 赞同：5
> 
> 时间：2013-04-16T18:35:03.590
> 
> 标签：android, android-intent

我使用了以下代码

```
public WebResourceResponse shouldInterceptRequest(WebView view, String url) {
    alertsavedinternal(); //display an alert
    Log.d("DEBUG", "Should intercept request" +url); 
    //log the url to console in debug mode.
    return null;
} 
```

但是，当显示警报时，我的控制台也会打印日志，此外，url 也会在后台加载。如何阻止 url 加载？

请纠正我对这个功能的理解。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-05-29T01:22:55.980

如果在中返回 null `shouldInterceptRequest`，则表示 WebView 将照常继续加载资源。

这就是为什么您看到 URL 仍在加载中的原因。

为了拦截和阻止呼叫，您需要返回自己的（非空）数据。

# html - 浮动图刻度标签

> ID：16044560
> 
> 赞同：0
> 
> 时间：2013-04-16T18:35:21.593
> 
> 标签：html, css, canvas, flot

我正在尝试以用户在此处询问的类似方式在我的浮动图上旋转我的 X 轴上的标签 - [Rotate Flot Tick Labels](https://stackoverflow.com/questions/12204191/rotate-flot-tick-labels)

我面临的问题是 X 轴的 CSS 选择器似乎没有选择任何东西。我使用的选择器是：

```
div.xAxis div.tickLabel 
{    
    transform: rotate(-90deg);
    -ms-transform:rotate(-90deg); /* IE 9 */
    -moz-transform:rotate(-90deg); /* Firefox */
    -webkit-transform:rotate(-90deg); /* Safari and Chrome */
    -o-transform:rotate(-90deg); /* Opera */
    /*rotation-point:50% 50%;*/ /* CSS3 */
    /*rotation:270deg;*/ /* CSS3 */
} 
```

我什至不明白图表是如何可见的。我对canvas标签了解不多，但看起来它完全是空的。

![在此处输入图像描述](https://i.stack.imgur.com/AKnxD.png) ![在此处输入图像描述](https://i.stack.imgur.com/zx96B.png)

我不明白那里的来源是空的。我认为会有某种标记，例如表示图形的矢量点。这就是画布的工作原理吗？另外，如果您无法查看源代码，您怎么知道此时要使用哪些 CSS 选择器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T21:15:07.940

您可能正在使用[画布](https://github.com/flot/flot/blob/master/jquery.flot.canvas.js)插件，并设置`canvas: true`您的选项。这迫使 flot 在画布上绘制标签，而不是将它们放在您期望的位置（在 div 中）。

# c# - 如何知道我是否在 C# 中中了彩票

> ID：16044561
> 
> 赞同：3
> 
> 时间：2013-04-16T18:35:27.133
> 
> 标签：c#, linq, lambda

所以，我正在尝试做一些事情来检查是否自动中了彩票。

我玩的这个游戏有25个号码，你可以选15个。

如果您达到 15 个数字，您就赢了！（它不需要在序列中）

我有一个包含所有游戏的列表：“TodosJogos”，我的赌博名为：“Jogado”

现在，我正在这样做：（我认为这是一个可怕的）

```
 private void VerificaVitoria(Jogo Jogado, string TipoJogo)
        {
            bool Ganhou;
            List<Jogo> LstClassificadas = new List<Jogo>();

            LstClassificadas = TodosJogos.Where(x => x.N1 == Jogado.N1 ||
                x.N1 == Jogado.N2 ||
                x.N1 == Jogado.N3 ||
                x.N1 == Jogado.N4 ||
                x.N1 == Jogado.N5 ||
                x.N1 == Jogado.N6 ||
                x.N1 == Jogado.N7 ||
                x.N1 == Jogado.N8 ||
                x.N1 == Jogado.N9 ||
                x.N1 == Jogado.N10 ||
                x.N1 == Jogado.N11 ||
                x.N1 == Jogado.N12 ||
                x.N1 == Jogado.N13 ||
                x.N1 == Jogado.N14 ||
                x.N1 == Jogado.N15).ToList<Jogo>();

            LstClassificadas = LstClassificadas.Where(x => x.N2 == Jogado.N1 ||
               x.N2 == Jogado.N2 ||
               x.N2 == Jogado.N3 ||
               x.N2 == Jogado.N4 ||
               x.N2 == Jogado.N5 ||
               x.N2 == Jogado.N6 ||
               x.N2 == Jogado.N7 ||
               x.N2 == Jogado.N8 ||
               x.N2 == Jogado.N9 ||
               x.N2 == Jogado.N10 ||
               x.N2 == Jogado.N11 ||
               x.N2 == Jogado.N12 ||
               x.N2 == Jogado.N13 ||
               x.N2 == Jogado.N14 ||
               x.N2 == Jogado.N15).ToList<Jogo>();

            LstClassificadas = LstClassificadas.Where(x => x.N3 == Jogado.N1 ||
                 x.N3 == Jogado.N2 ||
                 x.N3 == Jogado.N3 ||
                 x.N3 == Jogado.N4 ||
                 x.N3 == Jogado.N5 ||
                 x.N3 == Jogado.N6 ||
                 x.N3 == Jogado.N7 ||
                 x.N3 == Jogado.N8 ||
                 x.N3 == Jogado.N9 ||
                 x.N3 == Jogado.N10 ||
                 x.N3 == Jogado.N11 ||
                 x.N3 == Jogado.N12 ||
                 x.N3 == Jogado.N13 ||
                 x.N3 == Jogado.N14 ||
                 x.N3 == Jogado.N15).ToList<Jogo>();

            //.....

            Ganhou = LstClassificadas.Count > 0 ? true : false;

            if (Ganhou)
            {
                MessageBox.Show("You won in the game: " + TipoJogo);
            }

        } 
```

它类似于此查询：

```
select * from jogos
where n1 in(8,18,16,7,5,20,9,6,10,17,22,3,14,21,15)
and n2 in(8,18,16,7,5,20,9,6,10,17,22,3,14,21,15)
and n3 in(8,18,16,7,5,20,9,6,10,17,22,3,14,21,15)
and n4 in(8,18,16,7,5,20,9,6,10,17,22,3,14,21,15)
and n5 in(8,18,16,7,5,20,9,6,10,17,22,3,14,21,15)
and n6 in(8,18,16,7,5,20,9,6,10,17,22,3,14,21,15)
and n7 in(8,18,16,7,5,20,9,6,10,17,22,3,14,21,15)
and n8 in(8,18,16,7,5,20,9,6,10,17,22,3,14,21,15)
and n9 in(8,18,16,7,5,20,9,6,10,17,22,3,14,21,15)
and n10 in(8,18,16,7,5,20,9,6,10,17,22,3,14,21,15)
and n11 in(8,18,16,7,5,20,9,6,10,17,22,3,14,21,15)
and n12 in(8,18,16,7,5,20,9,6,10,17,22,3,14,21,15)
and n13 in(8,18,16,7,5,20,9,6,10,17,22,3,14,21,15)
and n14 in(8,18,16,7,5,20,9,6,10,17,22,3,14,21,15)
and n15 in(8,18,16,7,5,20,9,6,10,17,22,3,14,21,15) 
```

**有没有更好的方法呢？**

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-04-16T19:23:22.980

两种方法来解决你的问题。

将获胜组合表示为一组十五个整数：

```
HashSet<int> 
```

您有一系列获胜游戏：

```
IEnumerable<HashSet<int>> 
```

和一个特定的`HashSet<int>`. 您想知道该特定组合是否与任何获胜组合完全匹配。

## 方法一

```
static bool DidIWin(IEnumerable<HashSet<int>> winningNumbers, HashSet<int> myNumbers)
{
    return winningNumbers
      .Where(winningNumber => myNumbers.SetEquals(winningNumber))
      .Any();
} 
```

甚至

```
static bool DidIWin(IEnumerable<HashSet<int>> winningNumbers, HashSet<int> myNumbers)
{
    return winningNumbers
      .Any(winningNumber => myNumbers.SetEquals(winningNumber));
} 
```

## 方法二

```
static bool DidIWin(IEnumerable<HashSet<int>> winningNumbers, HashSet<int> myNumbers)
{
    return false;
} 
```

*方法二要快很多*。但是，它平均每 300 万个中奖号码中出现一次错误结果。这表明，有时你可以通过愿意接受少量的不准确来获得巨大的性能胜利。

:-)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-16T18:38:42.883

从您的 SQL 查询来看，我认为这就是您想要的：

```
var lotteryNumbers = new int[] { ... };
var results =
    from j in jogos
    where lotteryNumbers.Contains(j.n1) &&
          lotteryNumbers.Contains(j.n2) &&
          lotteryNumbers.Contains(j.n3) &&
          lotteryNumbers.Contains(j.n4) &&
          lotteryNumbers.Contains(j.n5) &&
          lotteryNumbers.Contains(j.n6) &&
          lotteryNumbers.Contains(j.n7) &&
          lotteryNumbers.Contains(j.n8) &&
          lotteryNumbers.Contains(j.n9) &&
          lotteryNumbers.Contains(j.n10) &&
          lotteryNumbers.Contains(j.n11) &&
          lotteryNumbers.Contains(j.n12) &&
          lotteryNumbers.Contains(j.n13) &&
          lotteryNumbers.Contains(j.n14) &&
          lotteryNumbers.Contains(j.n15)
    select j; 
```

或流利的语法

```
var results =
    jogos.Where(j =>
          lotteryNumbers.Contains(j.n1) &&
          lotteryNumbers.Contains(j.n2) &&
          lotteryNumbers.Contains(j.n3) &&
          lotteryNumbers.Contains(j.n4) &&
          lotteryNumbers.Contains(j.n5) &&
          lotteryNumbers.Contains(j.n6) &&
          lotteryNumbers.Contains(j.n7) &&
          lotteryNumbers.Contains(j.n8) &&
          lotteryNumbers.Contains(j.n9) &&
          lotteryNumbers.Contains(j.n10) &&
          lotteryNumbers.Contains(j.n11) &&
          lotteryNumbers.Contains(j.n12) &&
          lotteryNumbers.Contains(j.n13) &&
          lotteryNumbers.Contains(j.n14) &&
          lotteryNumbers.Contains(j.n15)); 
```

`lotteryNumbers`尽管这假设您在 any或 in 中没有重复项`j.n1 .. j.n15`。否则你可能会得到意想不到的结果。

# networking - 使用 TUN / TAP 测试用户空间 TCP/IP 堆栈

> ID：16044566
> 
> 赞同：1
> 
> 时间：2013-04-16T18:35:48.867
> 
> 标签：networking, tcp, ethernet, tcp-ip, raw-ethernet

是否可以使用 TUN/TAP 接口测试 TCP 堆栈？我正在考虑这样的机制：

```
 +--------------------------------+
  |   TCP Client / Server          |
  |  socket(AF_INET, SOCK_STREAM)  |
  | e.g. HTTP Server / Client      |
  +----------+---------------------+
             |
             |  +---------------------+
             |  |  TUN Device         |
             |  | ( kernel does TCP ) |
             |  +---------------------+
             |                       
  +------------+----------------------+
  | Linux Kernel + Forwarding Magic   |
  +-----------------------------------+
            |
            | +---------------------+
            | |TAP Device           |
            | |Raw ethernet frames  |
            | +---------------------+
            |
 +----------+----------------------+
 |  Raw  Socket API                |
 | socket(AF_PACKET, SOCK_RAW)     |
 | User mode TCP Stack over raw API|
 | a HTTP client/server over it    |
 +---------------------------------+ 
```

顶盒是（比方说）一个标准的未修改的 HTTP 服务器，侦听已路由到 TUN 设备的 IP 地址。底部框是一个自定义 TCP/IP 堆栈，它适用于原始以太网帧。

问题：

1.  是否可以像这样背靠背连接两个 TAP/TUN 设备？
2.  这里需要“桥”吗？他们还怎么背靠背说话？
3.  最后：有没有更好的方法来做到这一点？

提前谢谢。

PS：我将在同一台机器上运行所有这些。“盒子”更像是这里的过程或集合或过程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T20:40:30.743

我不确定这是否是一个合理的设计。这完全取决于您要达到的目标。

您当然可以将流量发送到机顶盒上的 TUN 设备……但是您必须在该盒子上运行某种进程来收集通过 TUN 设备的流量。该过程可能是您实际的自定义 TCP/IP 堆栈，也可能是将数据包通过隧道传送到您的底盒。我假设您希望它是一个隧道，因为您想在另一台机器（底部框）上运行您的自定义 TCP/IP 堆栈。在这种情况下，您甚至可能会发现机顶盒上的隧道软件已经存在，例如 OpenVPN，这对您是有利的。

但是，我的猜测是，您的需求更有可能通过在顶盒上运行没有隧道的标准 TCP/IP 堆栈来满足，并让底盒充当在真实以太网接口之间路由数据包的路由器（其中数据包从顶盒到达）和一个 TUN 设备。在 TUN 设备的用户空间端，是您的自定义 TCP/IP 堆栈。

在这两种情况下，您都不需要使用任何原始套接字，甚至根本不需要使用任何套接字。无论哪种方式，您的自定义 TCP/IP 堆栈都会接收来自 TUN 设备的帧（可能从 tophost 隧道传输，可能直接在 bottomhost 上）并将其源自的帧注入回同一 TUN 设备。

# java - Android Java中嵌套循环内的列表数组和字符串数组/多行字符串

> ID：16044568
> 
> 赞同：0
> 
> 时间：2013-04-16T18:36:03.873
> 
> 标签：java, loops, for-loop, nested-loops

我有一个包含多行的字符串，每行包含许多元素。我只在每行的第三个元素之后。这段代码有什么东西吗？

```
String[] separate = getArray().split("\n");
for (int i = 0; i < separate.length; i++)
{
    String[] inner = separate[i].split("/");
    for (int y = 0; y < inner.length; y++)
    {
        _listArray.add(String.valueOf(inner[2]));                   
    }
} 
```

它没有做它应该做的，或者我只是太累了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T18:44:22.530

不需要内部循环。

```
String[] lines = getArray().split("\n");
for (String line : lines) {
  String[] tokens = line.split("/");
  _listArray.add(tokens[2]);
} 
```

您可能需要一个安全装置来确保`tokens.length >= 2`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T18:44:35.583

不应该是：

```
String[] separate = getArray().split("\n");
for (int i = 0; i < separate.length; i++)
{
String[] inner = separate[i].split("/");
if(inner.length<3)
     throw new RuntimeException("Wrong data");//or ignore line as desire
else _listArray.add(String.valueOf(inner[2]));                   
} 
```

# javascript - 幻灯片故障 - 调试帮助

> ID：16044579
> 
> 赞同：0
> 
> 时间：2013-04-16T18:37:11.113
> 
> 标签：javascript, wordpress, css, twitter-bootstrap

我有一个带有图像滑块的 wordpress 网站。在某些时候，此图像滑块上的过渡变得草率。有问题的图像滑块是 flexslider。我尝试用 jquery cycle lite 替换它，在这种情况下，我发现同样的草率过渡也影响了它。这证实了我的怀疑，即它与某处的冲突有关。

这是一个测试页面，上面有两个幻灯片，带有草率的过渡。

[http://www.hauserair.com/slideshow-test/](http://www.hauserair.com/slideshow-test/)

我已将其范围缩小到包含以下样式表。

[http://www.hauserair.com/wp-content/themes/wordpress-bootstrap/style.css?ver=1.0](http://www.hauserair.com/wp-content/themes/wordpress-bootstrap/style.css?ver=1.0)

删除幻灯片放映正确过渡时。此外，当创建一个独立的 HTML 文件并包括引导 CSS 和 java 文件，以及此页面上新滑块的必要文件时：[http ://www.hauserair.com/slideshow.html](http://www.hauserair.com/slideshow.html)

过渡问题再次出现。所以...缩小这个冲突...

在上述样式表中，最底部是注释 /* UPRIGHT STYLES */ 这些是我公司编写的自定义样式，从该注释下方删除代码后，问题仍然存在。所以它实际上在引导代码中。

从那里我可以进一步推断，其中引用了 ID 或 CLASS 的任何代码行都不应该影响幻灯片，因为我为测试而制作的独立 .HTML 文件没有任何这些 ID 或类。例外情况是，如果两者恰好有相同的规则`.flexslider`和`.home-slides` （这些是分配给包含图像滑块的 div 容器的类）。

由于该文件不包含任何这些，我现在似乎无法找到可能导致此转换问题的特定行。有想法该怎么解决这个吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T18:40:12.593

问题是由第48 行*/wp-content/themes/wordpress-bootstrap/style.css中的以下规则引起的*

```
* {
    transition: all 0.2s ease 0s;
} 
```

删除或覆盖幻灯片上的过渡规则，它应该被修复。

# google-apps-script - 复制一个电子表格上的完整列表以附加到另一个电子表格的底部

> ID：16044580
> 
> 赞同：1
> 
> 时间：2013-04-16T18:37:11.940
> 
> 标签：google-apps-script, google-sheets

在 Google 电子表格中，我只想从一个电子表格的完整列表中获取值，并将其附加到另一个电子表格的列表底部。我的麻烦是使用该`copyValuesToRange()`函数会出现以下错误：

```
Target sheet and source range must be on the same spreadsheet. 
```

这是我当前的代码：

```
function transferList() {
  var source = SpreadsheetApp.getActiveSpreadsheet();
  var target = SpreadsheetApp.openById("0ABCD"); 
  var target_sheet = target.getSheetByName("RFPData");
  var sheet = source.getSheetByName("RFP List");
  var sheet_last_row = sheet.getLastRow() + 1;
  var source_range = sheet.getRange("A2:I"+sheet_last_row);
  var sWidth=source_range.getWidth() + 1;
  var sHeight=source_range.getHeight() + 1;
  var last_row=target_sheet.getLastRow();
  source_range.copyValuesToRange(target_sheet , 1, sWidth, 
    last_row + 1, last_row + sHeight );
} 
```

知道我怎样才能让它工作吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T20:49:31.280

如您所见，[Range 方法](https://developers.google.com/apps-script/reference/spreadsheet/range?hl=en#copyValuesToRange%28Sheet,Integer,Integer,Integer,Integer%29)会影响`copyValuesToRange()`与Range位于同一[电子表格对象](https://developers.google.com/apps-script/reference/spreadsheet/spreadsheet)[中](https://developers.google.com/apps-script/reference/spreadsheet/sheet)的工作表对象。没有一种原子方法可以将一系列值复制到另一个电子表格，但有多种方法可以做到这一点。

这是一种方法。

*   从源表中，通过使用 选择完整的数据范围，`getDataRange()`然后将所有值抓取到 javascript 数组中，一次操作获取所有数据`getValues()`。
*   要忽略第一行标题，请使用[javascript 数组方法`splice()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/splice)。
*   在目标工作表上找到您的目标，从当前存在的最后一行数据开始，使用`getLastRow()`.
*   使用 . 从下一行开始将源数据（不带标题）写入目标工作表`setValues()`。

脚本：

```
function transferList() {
  var sourceSheet = SpreadsheetApp.getActiveSpreadsheet().getSheetByName("RFP List");
  var sourceData = sourceSheet.getDataRange().getValues();
  sourceData.splice(0,1);  // Remove header
  var targetSS = SpreadsheetApp.openById("0ABCD").getSheetByName("RFPData");
  var targetRangeTop = targetSS.getLastRow(); // Get # rows currently in target
  targetSS.getRange(targetRangeTop+1,1,sourceData.length,sourceData[0].length).setValues(sourceData);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-19T16:25:01.897

对于我通过导入和附加数据创建的一些历史仪表板，我使用了一个名为 Sheetgo 的插件。节省我的编程时间并帮助我解决可追溯性问题。

# ruby - 红宝石或 || 带有对象的语法

> ID：16044588
> 
> 赞同：1
> 
> 时间：2013-04-16T18:37:27.473
> 
> 标签：ruby, syntax

我在 Ruby 中看到过这种语法：

```
x = ary['value'] || Value.new 
```

我得到的部分是 || 的左侧 为假，则右侧将被执行。但我没有得到以下部分：

```
false || (object) becomes (object) 
```

我以为|| 应该解析为布尔值。至少在大多数其他语言中。为什么 Ruby 解析为一个对象。

我也有另一个类似的问题：

```
'test' || true
=> "test" 
```

“测试”如何被评估为真实？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T18:38:31.560

在 Ruby中`nil`，并且`false`is 仅计算为`false`始终。往下看：

```
p a = nil || 2   #=> 2
p a = false || 2 #=> 2  
p nil || false || 2 #=> 2
p '' || 2 #=> "" 
```

如需更多参考，请查看此处[`True, False And Nil Objects In Ruby`](http://www.skorks.com/2009/09/true-false-and-nil-objects-in-ruby/)和[`Ruby short circuit "or" explanation`](https://gist.github.com/mtheoryx/3138139)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T18:42:28.353

在 Ruby 中，有四种情况：

假就是假

真的是真的

Nil 是假的

其他任何事情都是真实的

所以，

```
5 && 8 #=> 8
5 || false #=> 5
false || 5 #=> 5
(5 && 8) == true #=> false
!!(5 && 8) == true #=> true
!!(false || nil) == false #=> true 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-16T18:43:24.563

Ruby 中布尔求值的*重要经验法则*是，只有对象[`NilClass`](http://ruby-doc.org/core-2.0/NilClass.html)和[`FalseClass`](http://ruby-doc.org/core-2.0/FalseClass.html)被评估为假。任何其他对象，包括`String`，都被评估为真，即使它是空的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-16T18:48:01.833

在 Ruby 中，与大多数编程语言一样，一些值是真值，而另一些值是假值。一个真值是`true`为了布尔评估的目的，同样一个假值是`false`。

然而，truthy 值实际上并没有被强制转换为，`true`而 falsey 也没有被强制转换为`false`，这让布尔表达式评估为有用的东西，而不是一个平面的`true`or `false`。

`nil`并且`false`是 Ruby 中唯一的错误值。请注意`0`，与大多数其他语言不同，这是真的。

有关详细信息，请参阅[https://gist.github.com/jfarmer/2647362 。](https://gist.github.com/jfarmer/2647362)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-16T18:48:53.700

这称为[短路](http://en.wikipedia.org/wiki/Short-circuit_evaluation)。

通过将其他表达式与`||`运算符连接在一起形成的任何表达式都将被*短路，这意味着它在第一个*[真值](https://gist.github.com/jfarmer/2647362)表达式处“停止” 。

所以考虑这个例子：

```
nil || Value.new 
```

Ruby 解释器首先查看`nil`；然后，由于这不是真的，它继续下一个表达式。

现在考虑问题末尾的示例：

```
"test" || true 
```

Ruby先看了看`"test"`；既然这是真的，评估就停在那里。

运算符也是如此`&&`，它本质上是相同的短路逻辑，但只有在找到*虚假*表达式时才会停止。

举个例子：

```
person && person.name 
```

如果`person`是`nil`，那么上面的表达式将评估为，`nil`因为这是第一个错误的表达式。

另一方面：

```
person && person.male? && person.name 
```

假设`person`不是零，而是女性。然后（假设`male?`返回`false`）上面的表达式将计算为`false`。

当然，如果没有表达式是错误的，那么`&&`运算符只会给你最后一个（这通常是你想要的）。

# object - 将标签绑定到对象属性

> ID：16044593
> 
> 赞同：0
> 
> 时间：2013-04-16T18:37:53.287
> 
> 标签：object, binding, actionscript, mxml

我正在做一个项目的介绍，我有一个班级，爱因斯坦，它有一个名字的属性。name 属性是私有的，但我有它的 getter 和 setter。在 mxml 文件中，我有一个标签和一个按钮。标签显示 Einstein 对象的名称。单击该按钮时，Einstein 对象的名称将更改。由于标签绑定到名称属性，它应该更新但它不是。下面是 Einstein as 文件和 mxml 文件中可能与问题有关的部分。

```
 [Bindable]
public class Einstein
{
    private var name:String;

    public function Einstein(name:String)
    {setName(name);}

    public function getName():String
    {return name;}

    public function setName(sentName:String):void
    {this.name = sentName;}
} 
```

* * *

```
 <![CDATA[
        [Bindable]
        var pEinstein: Einstein = new Einstein("Brighid");
    ]]>

        <s:Label id="nameTag" text="{pEinstein.getName()}" fontSize="24"/>
        <s:Button content="change the name">
            <s:click>
                pEinstein.setName("Freyja");
            </s:click> 
```

tldr; 我的标签在它应该更新的时候没有更新

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T10:06:06.627

我通常不在 flex 中工作，但试试这个：（实际的 getter/setter AS3 语法）

```
public class Einstein
{
private var _name:String;

public function Einstein(name:String)
{setName(name);}

public function get name():String
{return _name;}

public function set name(value:String):void
{_name = value;}
} 
```

和

```
<![CDATA[
    [Bindable]
    var pEinstein: Einstein = new Einstein("Brighid");
]]>

    <s:Label id="nameTag" text="{pEinstein.name}" fontSize="24"/>
    <s:Button content="change the name">
        <s:click>
            pEinstein.setName("Freyja");
        </s:click> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-16T20:06:30.647

自动绑定不适用于“正常”方法。它适用于 getter/setter，但您需要对 getter 和 setter 使用 actionscript 语法。（您的 get/set 函数看起来像我在 java 中使用的语法 - 这在 actionscript 中确实有效，但它们不会被 mxml 编译器识别为 get/set）

将您的 get/set 函数更改为：

```
public function get name():String
{return name;}

public function set name(sentName:String):void
{this.name = sentName;} 
```

将点击处理程序中的调用更改为：

```
pEinstein.name = "Freyja"; 
```

并将标签更改为：

```
<s:Label id="nameTag" text="{pEinstein.name}" fontSize="24"/> 
```

# android - 创建带有已保存图标的通知

> ID：16044594
> 
> 赞同：3
> 
> 时间：2013-04-16T18:37:57.990
> 
> 标签：android, notifications, icons

在我的应用程序中，用户从手机上安装的应用程序列表中选择一个应用程序。

我想创建一个带有所选应用程序图标的通知。

问题是我无法将图标保存在我的应用程序中，如果我将它保存在其他地方，我将无法通过 id 获取图标，因为它需要创建通知。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T04:48:46.920

您不能添加或编辑 res 文件夹的资源。并且由于通知的主图标作为图标 id 提供，因此您不能通过程序中的动态图像进行更改。但是通知中还有另一个图标选项。它是通知右侧的一个小图标（它被称为大图标！！不知道为什么）。您可以通过发送位图作为参数来设置它。

[您可以在此链接](http://developer.android.com/guide/topics/ui/notifiers/notifications.html)中看到此图标的外观。见正常视图的数字 6。

要设置此图标，您可以使用[setLargeIcon](http://developer.android.com/reference/android/support/v4/app/NotificationCompat.Builder.html#setSmallIcon%28int%29)方法。

# facebook-graph-api - 如何从位置获取城市和州名

> ID：16044597
> 
> 赞同：6
> 
> 时间：2013-04-16T18:38:11.003
> 
> 标签：facebook-graph-api, location

我们得到用户\朋友的位置如下-->

```
location =  {id = 104048449631599; name = "Menlo Park, California";}; 
```

在我们这边，位置分为城市和州。在我们的数据库中，我们将城市和州存储为 2 个不同的列或表。我们只为美国市场构建应用程序。假设位置名称只有 2 个组成部分是否安全 - 城市、州名。使用“，”作为分隔符。据我了解，ID 是独一无二的，是他们的 FB 服务，如果提供 id 将分别提供城市和州信息。

# ruby-on-rails - RoR 活动管理员添加用户

> ID：16044598
> 
> 赞同：0
> 
> 时间：2013-04-16T18:38:13.227
> 
> 标签：ruby-on-rails, devise, activeadmin

这可能是一个非常简单的问题，因为我刚刚开始使用 RoR，并且通过资源进行了尽可能多的学习。基本上我使用 Active Admin 来处理我的应用程序的管理部分。我想知道的是创建一个用户模型。我知道 Active Admin 使用 Devise 进行身份验证，所以如果运行`rails generate active_admin:resource User`它应该创建用户模型，就像我使用 Devise 正确运行它一样？

最终目标是让主前端页面成为管理员在 Active Admin 上创建的用户的登录名（无需从前端注册），这将引导他们访问安全信息，如个人资料、订单等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T20:23:32.823

您想要做的（假设您想区分管理员用户和普通用户的想法）首先像往常一样生成新的设计模型：

```
rails generate devise user 
```

然后创建一个资源以在活动管理员中管理它们

```
rails generate active_admin:resource User 
```

其余的是[标准设计集成](https://github.com/plataformatec/devise#controller-filters-and-helpers)，假设页面超出 Active Admin 的范围。

# python - 是否有带有 Pygame 模块的在线 Python 解释器？

> ID：16044608
> 
> 赞同：5
> 
> 时间：2013-04-16T18:38:28.240
> 
> 标签：python, pygame

我想知道是否有一个带有 Pygame 的在线 python 解释器。如果有就更好了，因为当我分享一个游戏时，我不必先编译它，我只需发送代码，并可能将纹理上传到存储服务器并更改图像位置的 URL。

是否有带有 Pygame 的在线 Python 解释器？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T18:47:27.707

没有我知道的。在浏览器中运行 Pygame 应用程序需要某种方式来显示图形并从远程 Python 解释器播放声音。这将非常复杂，并且无论如何都可能不会表现得很好。

如果您想编写在网络浏览器中运行的游戏，请学习 Javascript。

# python - 在 python 中将 '[1,2,3,4]' 转换为 float 或 int

> ID：16044612
> 
> 赞同：1
> 
> 时间：2013-04-16T18:38:45.277
> 
> 标签：python

嗨所以我想找到一个列表的平均值我们必须做一个函数所以我有

```
def avgLst():
    'str==>avg of numbers in str'
    x=input('Please enter a List: ')

    if len(x)==0:
        return([]) 
```

正是从这一点我遇到了麻烦。我试图找到我们投入问题的输入的平均值。类似 [1,2,3,4] 的问题是这个列表是一个字符串，因为输入。如何让列表成为整数或浮点数列表，然后找到列表的平均值？谢谢，

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-16T18:41:28.613

你可以`ast.literal_eval`在这里使用：

```
In [6]: strs="[1,2,3,4]"

In [7]: from ast import literal_eval

In [9]: literal_eval(strs)
Out[9]: [1, 2, 3, 4] 
```

**帮助（literal_eval）**：

```
In [10]: literal_eval?
Type:       function
String Form:<function literal_eval at 0x8cb7534>
File:       /usr/lib/python2.7/ast.py
Definition: literal_eval(node_or_string)
Docstring:
Safely evaluate an expression node or a string containing a Python
expression.  The string or node provided may only consist of the following
Python literal structures: strings, numbers, tuples, lists, dicts, booleans,
and None. 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-16T18:47:07.690

您可以按如下方式处理您的输入：

```
def input_to_list(input_str):
    input_list = input_str[1:-1].split(",")
    return map(int, input_list) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-16T18:41:19.067

在[ast（抽象语法树）](http://docs.python.org/2/library/ast.html)模块中使用[**literal_eval() ：**](http://docs.python.org/2/library/ast.html#ast.literal_eval)

```
>> import ast

>> yrStrList = '[1,2,3,4]'
>> yrList = ast.literal_eval(yrlist)
>> print yrList

[1,2,3,4] 
```

[详细](http://docs.python.org/2/library/ast.html#ast.literal_eval)信息`literal_eval( )`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-16T18:57:32.903

您可以通过多种方式处理数据解析`string`。我尚未测试此功能的速度，但您可以这样做的一种方法是：

```
def list_avg(str_list):
    int_list = [float(i.strip('[]')) for i in str_list.split(',')]
    return sum(int_list) / len(int_list) 
```

如果我正确理解您的要求，那么`list_avg`将`float`返回`str_list`.

# groovy - 如何使 configslurper 委托方法调用调用者类

> ID：16044614
> 
> 赞同：1
> 
> 时间：2013-04-16T18:38:59.857
> 
> 标签：groovy

我想创建一个像这样的 groovy 类 og 脚本：

```
//...
def slurper = new ConfigSlurper().parse(someFile)
//...
//The exact method declaration
def methodCall(def arg){
   //Whatever i want to do
}
//Maybe it is easier with methodMissing
def methodMissing(def args) {
   //Whatever i want to do
} 
```

要 slurp 的文件可能如下所示：

```
some {
   property = methodCall("with arg")
} 
```

问题是我如何将“methodCall”委托给使用 configslurper 解析的类或脚本？目前它会给你一个methodMissing。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T19:57:17.647

我认为[这篇博客文章](http://naleid.com/blog/2009/07/30/modularizing-groovy-config-files-with-a-dash-of-meta-programming/)有一个你想要做什么的例子。它比 a 更复杂，`methodMissing`但可以完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T19:21:46.987

感谢 Sérgio Michels 链接，我找到了解决方案：

```
public class ScriptWithMethods extends Script {

   String scriptText;

   public ScriptWithMethods(File file) {
      scriptText = file.text
   }

   public void run() {
      GroovyShell shell = new GroovyShell();
      Closure closure = shell.evaluate("{it->$string}");
      closure.resolveStrategy = Closure.DELEGATE_FIRST
      closure.delegate = this
      closure.call()
   }

   def methodCall(def arg){
      //Whatever i want to do
   }
}

//...
def script = new ScriptWithMethods(scriptText:someFile)
def slurper = new ConfigSlurper().parse(script) 
```

当然，您也可以使用“缺少方法”，但这适用于我的用例

# php - 当我尝试 $_GET 时，在 URL 中设置参数的链接无法按预期工作

> ID：16044615
> 
> 赞同：0
> 
> 时间：2013-04-16T18:39:07.100
> 
> 标签：php, url, cookies, gettext, page-refresh

我有这个 PHP 代码，当`?setLang`参数在 URL 中时，它会设置一个 cookie

```
if (isSet($_GET["setLang"])) {
    setcookie("lang",$_GET["setLang"]);
}

if (!isSet($_COOKIE["lang"])) {
    //negociate language and set locale
}else{
    //set locale to cookie
}

//translate with gettex 
```

当我访问 website.com/?setLand=en 时，它完全按预期工作。

问题是当我从 website.com 链接到此表单中的 URL 时：

```
<a href="?setLang=en">en</a> 
```

当我单击它时，通过链接（而不是直接进入）gettext 翻译不起作用，但除此之外，它按预期工作。

我的第一个想法是我必须强制进行某种刷新，所以我这样做了：

```
<a href="?setLang=en" onClick="window.location.reload( true );">en</a> 
```

但它不起作用。

我检查了代码，当您单击链接时实际上设置了 cookie，所以它让我更加困惑。

* * *

* * *

以防万一的完整代码如下：

```
<?php
if (isSet($_GET["setLang"])) {
    setcookie("lang",$_GET["setLang"]);
}
if (!isSet($_COOKIE["lang"])) {
    $langs = array(
        'en-US',// default
        'fr',
        'fr-FR',
        'de',
        'de-DE',
        'de-AT',
        'de-CH',
    );
    $locale = substr(http_negotiate_language($langs), 0, 2);
}else{
    $locale = $_COOKIE["lang"];
}

//if (isSet($_GET["locale"])) $locale = $_GET["locale"];
if($locale == "en") 
    $locale = "en_US.utf8";
if($locale == "de") 
    $locale = "de_DE.utf8";
if($locale == "fr") 
    $locale = "fr_FR.utf8";

putenv("LC_ALL=$locale");
setlocale(LC_ALL, $locale);

// Specify location of translation tables
bindtextdomain("translation", "locale");

// Choose domain
textdomain("translation");

// Translation is looking for in ./locale/de_DE/LC_MESSAGES/myPHPApp.mo now

// Print a test message
//echo _("title");
?> 
```

和链接：

```
...
<a href="?setLang=en" onClick="window.location.reload( true );">en</a>
... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T19:33:26.077

`setcookie()`在输出中添加一个标题并且不改变`$_COOKIE`超全局。

```
if (isSet($_GET['setLang'])) {
    $locale = $_GET['setLang'];
    setcookie('lang', $locale);
} elseif (isSet($_COOKIE['lang'])) {
    $locale = $_COOKIE['lang'];
} else {
    $langs = array('en-US', 'fr', 'fr-FR', 'de', 'de-DE', 'de-AT', 'de-CH');
    $locale = substr(http_negotiate_language($langs), 0, 2);
} 
```

会做你想做的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T18:43:43.187

当你有一个链接时，你不需要重新加载任何东西，因为链接将是默认的（如果你不说不这样做）会导致另一个页面。

您确定将其指向正确的文件吗？尝试一些调试，例如在 URL 中发送您正在处理它的确切文件，例如：

```
<a href="home.php?setLang=en">en</a> 
```

对于调试 propuses，您可以使用 PHP print_r，它可以帮助您了解在 $_GET 中得到了什么。

只需在 PHP 代码的开头执行此操作：

```
<?php
print_r($_GET);
//the rest of your code
?> 
```

# image - 在scrapy中下载图片

> ID：16044616
> 
> 赞同：7
> 
> 时间：2013-04-16T18:39:28.420
> 
> 标签：image, download, scrapy, imagedownload

我正在尝试通过scrapy下载图像。这是我的不同文件：

项目.py

```
class DmozItem(Item):
        title = Field()
        image_urls = Field()
        images = Field() 
```

设置.py

```
BOT_NAME = 'tutorial'

SPIDER_MODULES = ['tutorial.spiders']
NEWSPIDER_MODULE = 'tutorial.spiders'
ITEM_PIPELINES = ['scrapy.contrib.pipeline.images.ImagesPipeline']
IMAGES= '/home/mayank/Desktop/sc/tutorial/tutorial' 
```

蜘蛛

```
class DmozSpider(BaseSpider):
    name = "wikipedia"
    allowed_domains = ["wikipedia.org"]
    start_urls = [
        "http://en.wikipedia.org/wiki/Pune"
    ]

    def parse(self, response):
        hxs = HtmlXPathSelector(response)
        items = []
        images=hxs.select('//a[@class="image"]')
        for image in images:
                item = DmozItem()
                link=image.select('@href').extract()[0]
                link = 'http://en.wikipedia.com'+link
                item['image_urls']=link
                items.append(item) 
```

尽管进行了所有这些设置，我的管道没有被激活。请帮忙。我是这个框架的新手。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-17T12:23:46.960

首先，`settings.py`: IMAGES -> IMAGES_STORE

其次，`spider`：您应该返回一个`item`以便`ImagesPipeline`可以下载这些图像。

```
item = DmozItem()
image_urls = hxs.select('//img/@src').extract()
item['image_urls'] = ["http:" + x for x in image_urls]
return item 
```

# python - 用于 Web 应用程序的 Bottle.py

> ID：16044617
> 
> 赞同：0
> 
> 时间：2013-04-16T18:39:29.530
> 
> 标签：python, bottle

我看到了 bottle.py 框架，发现它使用起来很棒，而且效果很好。但是它可以处理巨大的流量，因为它在单线程服务器上运行，但可以用于在多线程服务器上运行。

我想将 bottle.py 用于流量巨大的企业 Web 应用程序。

这里的任何人都可以告诉我，bottle.py webapplication 处理巨大的流量没有问题。

此外，bottle.py 版本 1 似乎还没有发布。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T18:48:40.627

我没有使用 bottle.py 的经验，但[常见问题解答](http://bottlepy.org/docs/dev/faq.html#about-bottle)的第一行说**“Bottle 是一个*微型*框架，专为原型设计和构建小型 Web 应用程序和服务而设计。”**

听起来作者不打算以您建议的方式使用它。

# java - Struts 1 登录应用

> ID：16044618
> 
> 赞同：0
> 
> 时间：2013-04-16T18:39:33.187
> 
> 标签：java, jsp, struts

用这个把我的头发扯掉。尝试在Struts中做一个小型登录应用程序 1\. 没有数据库连接，只要用户名和密码相同，就可以登录。

我使用了几个不同的教程。当我运行应用程序时，我的第一页`login.jsp`会加载。如果无论是否在用户名和密码框中输入内容都单击提交，我会收到 HTTP 500 错误。有人可以帮助我吗？

错误：

```
0000001a webapp        E com.ibm.ws.webcontainer.webapp.WebApp logServletError SRVE0293E: [Servlet Error]-[action]: java.lang.NullPointerException
    at struts.action.LoginAction.execute(LoginAction.java:17)
    at org.apache.struts.chain.commands.servlet.ExecuteAction.execute(ExecuteAction.java:53)
    at org.apache.struts.chain.commands.AbstractExecuteAction.execute(AbstractExecuteAction.java:64)
    at org.apache.struts.chain.commands.ActionCommandBase.execute(ActionCommandBase.java:48)
    at org.apache.commons.chain.impl.ChainBase.execute(ChainBase.java:190)
    at org.apache.commons.chain.generic.LookupCommand.execute(LookupCommand.java:304)
    at org.apache.commons.chain.impl.ChainBase.execute(ChainBase.java:190)
    at org.apache.struts.chain.ComposableRequestProcessor.process(ComposableRequestProcessor.java:280)
    at org.apache.struts.action.ActionServlet.process(ActionServlet.java:1858)
    at org.apache.struts.action.ActionServlet.doPost(ActionServlet.java:459)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:738)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:831)
    at com.ibm.ws.webcontainer.servlet.ServletWrapper.service(ServletWrapper.java:1657)
    at com.ibm.ws.webcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:939)
    at com.ibm.ws.webcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:502)
    at com.ibm.ws.webcontainer.servlet.ServletWrapperImpl.handleRequest(ServletWrapperImpl.java:179)
    at com.ibm.ws.webcontainer.webapp.WebApp.handleRequest(WebApp.java:3935)
    at com.ibm.ws.webcontainer.webapp.WebGroup.handleRequest(WebGroup.java:276)
    at com.ibm.ws.webcontainer.WebContainer.handleRequest(WebContainer.java:931)
    at com.ibm.ws.webcontainer.WSWebContainer.handleRequest(WSWebContainer.java:1583)
    at com.ibm.ws.webcontainer.channel.WCChannelLink.ready(WCChannelLink.java:186)
    at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.handleDiscrimination(HttpInboundLink.java:452)
    at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.handleNewRequest(HttpInboundLink.java:511)
    at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.processRequest(HttpInboundLink.java:305)
    at com.ibm.ws.http.channel.inbound.impl.HttpICLReadCallback.complete(HttpICLReadCallback.java:83)
    at com.ibm.ws.tcp.channel.impl.AioReadCompletionListener.futureCompleted(AioReadCompletionListener.java:165)
    at com.ibm.io.async.AbstractAsyncFuture.invokeCallback(AbstractAsyncFuture.java:217)
    at com.ibm.io.async.AsyncChannelFuture.fireCompletionActions(AsyncChannelFuture.java:161)
    at com.ibm.io.async.AsyncFuture.completed(AsyncFuture.java:138)
    at com.ibm.io.async.ResultHandler.complete(ResultHandler.java:204)
    at com.ibm.io.async.ResultHandler.runEventProcessingLoop(ResultHandler.java:775)
    at com.ibm.io.async.ResultHandler$2.run(ResultHandler.java:905)
    at com.ibm.ws.util.ThreadPool$Worker.run(ThreadPool.java:1604) 
```

登录操作.java

```
package struts.action;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

import org.apache.struts.action.ActionForm;
import org.apache.struts.action.ActionForward;
import org.apache.struts.action.ActionMapping;

import struts.form.LoginForm;

public class LoginAction extends org.apache.struts.action.Action {
private final static String SUCCESS = "success";
private final static String FAILURE = "failure";

    public ActionForward execute(ActionMapping mapping, ActionForm form, HttpServletRequest request, HttpServletResponse response) throws Exception {
        LoginForm loginForm = (LoginForm) form;
        if (loginForm.getUsername().equals(loginForm.getPassword())) {
            return mapping.findForward(SUCCESS);
        } else {
            return mapping.findForward(FAILURE);
        }
    }
} 
```

登录表单.java

```
package struts.form;

import org.apache.struts.action.*;

public class LoginForm extends ActionForm{

    private String username;
    private String password;

    public LoginForm() {
        super();
    }
    private static final long serialVersionUID = 104092268304152302L;

    public String getUsername() {

    return username;
    }

    public void setMessage(String username) {

    this.username = username;   
}

    public String getPassword() {

        return password;
        }

        public void setPassword(String password) {

        this.password = password;   
    }
} 
```

struts-config.xml

```
 <?xml version="1.0" encoding="ISO-8859-1" ?>

<!DOCTYPE struts-config PUBLIC
          "-//Apache Software Foundation//DTD Struts Configuration 1.3//EN"
          "http://struts.apache.org/dtds/struts-config_1_3.dtd">

<struts-config>

    <form-beans>
        <form-bean name="LoginForm" type="struts.form.LoginForm"/>
    </form-beans>
    <global-forwards />

    <action-mappings>
        <action name="LoginForm" path="/Login" scope="session" type="struts.action.LoginAction" >
            <forward name="success" path="/success.jsp" />
            <forward name="failure" path="/failure.jsp" />
        </action>
    </action-mappings>

</struts-config> 
```

web.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app id="WebApp_ID" version="2.5" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd">
    <display-name>StrutsExample</display-name>
<servlet>
<servlet-name>action</servlet-name>
<servlet-class>org.apache.struts.action.ActionServlet</servlet-class>
<init-param>
<param-name>config</param-name>
<param-value>/WEB-INF/struts-config.xml</param-value>
</init-param>
<init-param>
  <param-name>debug</param-name> 
  <param-value>2</param-value> 
  </init-param>
  <init-param>
  <param-name>detail</param-name> 
  <param-value>2</param-value> 
  </init-param>
<load-on-startup>2</load-on-startup>
</servlet>

<servlet-mapping>
<servlet-name>action</servlet-name>
<url-pattern>*.do</url-pattern>
</servlet-mapping>
<session-config>
  <session-timeout>30</session-timeout> 
  </session-config>
<welcome-file-list>
<welcome-file>login.jsp</welcome-file>
</welcome-file-list>
</web-app> 
```

登录.jsp

```
<%@ taglib uri="http://struts.apache.org/tags-bean" prefix="bean" %>
<%@ taglib uri="http://struts.apache.org/tags-html" prefix="html" %>
<html>
<head>
<title>Login Page</title>
</head>
<body>
    <html:form action="/Login" >
        User Name :<html:text name="LoginForm" property="username" />
        Password  :<html:password name="LoginForm" property="password" />
        <html:submit value="Login" />
    </html:form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T20:35:12.193

您的表单 bean 中没有任何`setUsername()`方法。所以Struts在提交表单时无法在表单bean中设置用户名，所以表单中的用户名为null，从而`loginForm.getUsername().equals(...)`抛出NullPointerException。

`setMessage()`将方法重命名为`setUsername()`.

另请注意，您不需要在表单标签中设置 name 属性。只需设置属性属性就足够了。

# android - 如何在 android 应用程序上添加 Liscence 代码？

> ID：16044621
> 
> 赞同：0
> 
> 时间：2013-04-16T18:39:41.970
> 
> 标签：android

嗨，我正在制作一个安卓应用程序，并且没有计划在市场上发布。我希望该客户与我联系，然后我会根据他们的 IMEI 提供一个解锁码。

是否有任何图书馆或样本？提前致谢。

# java - 将 Android 上的语音命令列表限制为预定义的集合

> ID：16044622
> 
> 赞同：3
> 
> 时间：2013-04-16T18:39:46.873
> 
> 标签：java, android, speech-recognition, microphone

对于 Android，我们有谷歌的语音输入 api，我们可以在其中对着麦克风说话，它会输出我们所说的 k 个最有可能的事情。有没有一种方法，相反，我们给语音输入一组有效的“命令”或句子，并输出最有可能的一个？

例如，有效命令列表将是：

“播放歌曲” “暂停” “下一个” “上一个”

但是，该语言中的其他词不会被视为选项。

有谁知道如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T18:44:37.860

您可以使用[CMUSphinx](http://cmusphinx.sourceforge.net/2011/05/building-pocketsphinx-on-android/)将其存档，它可能需要一个语法来指定要识别的语言作为解码器的参数：

```
 c.setString("-jsgf","grammar.jsgf"); 
```

语法以[JSGF 格式](http://www.w3.org/TR/jsgf/)指定。

# sublimetext2 - 在 Sublime Text 2 上使用命令

> ID：16044629
> 
> 赞同：0
> 
> 时间：2013-04-16T18:40:16.627
> 
> 标签：sublimetext2

我必须在这里遗漏一些简单的东西。我正在尝试在 Sublime Text 2 中运行命令。任何命令。我的理解是我应该可以打开控制台，输入命令，回车，它就会执行。但是，对于我尝试的任何命令，我都会得到以下响应：

```
>>> selectAll
Traceback (most recent call last):
  File "<string>", line 1, in <module>
NameError: name 'selectAll' is not defined 
```

此外，如果我尝试运行`view.run_command('selectAll')`，我不会收到错误消息，命令似乎也不会执行。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T19:24:11.123

这应该工作...

```
view.run_command("select_all") 
```

您可以查看 Packages/Default 内部以了解许多其他命令。

# actionscript-3 - 如何确定给定对象是否为掩码

> ID：16044632
> 
> 赞同：2
> 
> 时间：2013-04-16T18:40:22.420
> 
> 标签：actionscript-3, mask

显然，在 Adob​​e 的智慧中，被蒙版的对象和蒙版对象都包含“蒙版”属性。这会导致循环参考，从而阻止确定哪个是实际掩码，哪个是被掩码。

例如...

```
var clip:MovieClip = new MovieClip();
clip.name = "clip";
addChild(clip);

var boundary:Shape = new Shape();
boundary.name = "boundary";
clip.addChild(boundary);

clip.mask = boundary;

trace(clip.mask.name); // outputs "boundary"
trace(clip.mask.mask.name); // outputs "clip" 
```

我已经遍历了`clip`和的属性，`boundary`似乎没有什么独特之处可以将它们区分开来。我的第一个想法是强制删除 中多余的“掩码”引用`boundary`，但这也会将`mask`属性设置`clip`为 null，从而移除掩码。

我的第二个想法是检查掩码的父关系。如果父对象与对象的掩码相同，则所讨论的对象本身就是掩码。

```
var a:Array = [clip, boundary];

for each (var item in a) {
    if (item.mask == item.parent) {
        trace(item.name + " is a mask");
    }
}

// outputs "boundary is a mask" 
```

似乎可以工作，并且在检查了掩码上的[API 参考](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/DisplayObject.html#mask)之后，很明显，在缓存时，掩码**需要**是掩码的子项，但是......具有与掩码相同深度的掩码也是有效的（当面具不需要与被掩盖的内容一起*旅行*时，我会不时这样做）。

例如...

```
MainTimeline ¬
    0: clip ¬
        0: boundary 
```

...也可以布置为...

```
MainTimeline ¬
    0: clip ¬
    1: boundary 
```

所以，有一个难题。关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T21:28:19.147

到目前为止，我发现的“最佳”技巧是`hitTestPoint`在物体上运行（在确保它们有东西可以击中目标之后）。面具似乎永远不会返回`true`进行全像素命中测试。这似乎适用于我测试过的大多数基本情况：

```
public function isMask(displayObject:DisplayObject):Boolean {

    // Make sure the display object is a Class which has Graphics available,
    // and is part of a mask / maskee pair.
    if ((displayObject is Shape || displayObject is Sprite) && displayObject.mask) {

        // Add a circle at the target object's origin.
        displayObject['graphics'].beginFill(0);
        displayObject['graphics'].drawCircle(0, 0, 10);

        var origin:Point = displayObject.localToGlobal(new Point());
        var maskLocal:Point = displayObject.mask.globalToLocal(origin);

        // Add a circle at the same relative position on the "mask".
        displayObject.mask['graphics'].beginFill(0);
        displayObject.mask['graphics'].drawCircle(maskLocal.x, maskLocal.y, 10);

        // No matter which is the actual mask, one circle will reveal the other,
        // so hit testing the origin point should return true.
        // However, it seems to return false if the object is actually a mask.
        var hit:Boolean = displayObject.hitTestPoint(origin.x, origin.y, true);

        displayObject['graphics'].clear();
        displayObject.mask['graphics'].clear();

        // Return true if the hit test failed.
        return !hit;
    } else {
        return false;
    }
} 
```

`graphics`显然，如果对象已经有一些对象，您会想要缓存它们，~~并且它可以做一些比转换为 Sprite 更优雅的东西，以便它可以处理 Shapes，~~但这是一个开始。

*编辑：*访问`['graphics']`让这个接受`Shape`s，但显然不是超级有效。我不确定最好的方法是什么，除了添加一个接口。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T19:53:43.350

很好的问题，以前没有遇到过。我不知道周期性参考。

如果您的掩码是专门的掩码，我建议您将其纳入您的命名约定。例如称它为 clipMask 而不是边界。

如评论中所述，在掩码位于同一显示列表中的情况下，您可以使用 getChildIndex() 来比较它们在父显示列表中的位置。

通常在这种情况下，我会将蒙版叠加在另一个显示对象上。这显然没有强制执行，我不相信它对蒙版的视觉结果有任何影响。但是对于一个大组来说，维护比命名约定更容易。

显然还是不理想。

# android - Android：锁屏上的默认音乐播放器小部件

> ID：16044633
> 
> 赞同：3
> 
> 时间：2013-04-16T18:40:34.317
> 
> 标签：android, widget, lockscreen

我有自己的音乐播放器，我想与锁定屏幕上的默认播放器小部件进行交互。所以我的问题是如何让这个小部件显示在锁定屏幕上，就像谷歌播放器正在做的那样，以及应该使用什么广播消息将其从锁定屏幕中删除？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-16T18:48:35.100

> 我有自己的音乐播放器，我想与锁定屏幕上的默认播放器小部件进行交互。

在 Android 4.0 和 4.1 上，如果您的应用是媒体播放器，您可以注册一个`RemoteControlClient`以与出现在锁屏上的音乐控件进行交互。

在 Android 4.2 上，您需要编写自己的锁屏应用小部件 AFAIK。

# orchardcms - 从内容中删除/隐藏果园创作和日期？

> ID：16044634
> 
> 赞同：1
> 
> 时间：2013-04-16T18:40:38.030
> 
> 标签：orchardcms, orchardcms-1.6

是否可以隐藏或删除添加到 Orchard 的每个内容末尾显示的日期和作者？我无法从仪表板中找到任何方法:(

我有 Orchard 1.6.0 和 Bootstrap 主题。

下面是我试图退出/隐藏的图像：

![果园作者学分](https://i.stack.imgur.com/gp9rf.png)

谢谢您的帮助。祝你有美好的一天。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T18:58:43.837

通过将其添加到您的主题来隐藏它们`Placement.info`：

```
<Match DisplayType="Detail">
    <Place Parts_Title="-"/>
    <Place Parts_Common_Metadata="-"/>
</Match>
<Match DisplayType="Summary">
    <Place Parts_Title="-"/>            
    <Place Parts_Common_Metadata="-"/>
</Match> 
```

您可以使用 Orchard 的形状追踪功能来识别这些部分，然后在您的`placement.info`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-16T21:13:11.697

我也在玩 Bootstrap 主题，发现 Mohammad 的脚本隐藏了不必要的内容，并导致内容开始，隐藏在标题下方。

在 {Theme Folder}/Placement.info 中，以下内容达到了 yenssen 所期望的结果：

```
<Placement>
  <Match DisplayType="Detail">
    <!--<Place Parts_Title="-"/>-->
    <Place Parts_Common_Metadata="-"/>
  </Match>
  <Match DisplayType="Summary">
    <!--<Place Parts_Title="-"/>-->
    <Place Parts_Common_Metadata="-"/>
  </Match>
  ... 
```

# sql - 按字母顺序排序列表，忽略“the”

> ID：16044637
> 
> 赞同：1
> 
> 时间：2013-04-16T18:40:56.613
> 
> 标签：sql, codeigniter, sorting, alphabetical

我觉得这个 Q 没有简单的答案，但无论如何都是这样。我正在将 Codeigniter 与 MySQL 一起使用。我使用如下查询从数据库中提取资源标题列表：

```
SELECT * FROM resource ORDER BY title ASC 
```

并希望按字母顺序对它们进行排序，忽略开头的“the”。像（来自[另一个问题](https://stackoverflow.com/questions/4251742/how-can-i-sort-a-list-of-titles-alphabetically-ignoring-the-using-ruby)）：

*   土豚
*   甲虫
*   龙
*   海狸鼠

显示为：

*   土豚
*   甲虫
*   海狸鼠
*   龙

[一个答案](https://stackoverflow.com/questions/9087603/mysql-sort-alphabetically-but-ignore-the)提出了一些混乱的 SQL，这可能是一种可能性，但我想为此获得一个通用算法，我可以将其应用于所有项目，因为这是一个常见问题。

如果没有简单的答案，那就不重要了——对我的用户来说，这只是一个“恩典笔记”:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T18:59:06.987

怎么样：

```
order by (case when title like 'The %' then substring(title, 5, 1000) else title end) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T19:05:01.807

您可以为“title”创建一个重复的列，然后从该列中删除所有“the”。

首先更新表格以复制“标题”列

```
ALTER TABLE resource
ADD title_less_the varchar(50) (same as title)

UPDATE resource
SET title_less_the = title

update resource (
set title_less_the = replace(title_less_the, 'the ', '') 
```

然后，当您搜索类似这样的内容时，会忽略已修改的列：

```
SELECT column1, column2, column3 FROM resource
ORDER BY title_less_the ASC 
```

# javascript - 通过在运行时从页面源中删除来防止 JavaScript 代码运行

> ID：16044639
> 
> 赞同：0
> 
> 时间：2013-04-16T18:41:02.880
> 
> 标签：javascript, jquery

有人在我朋友的网站上输入了 XSS 代码。它插入`<script>alert(0)</script>`到页面源中。你可以[在这里](http://technoflexusdatastreamapi.appspot.com/listData)看到它。

有没有办法在运行时从页面中删除它，以防止它被执行？

他明天有一个关于它的演示文稿，他无法访问数据库来删除它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T18:48:57.420

作为一个非常快速的解决方案。如果他可以访问 javascript，他可以做一个简单的技巧，如下所示。

```
 alert = function() {} 
```

这将阻止所有警报触发。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T19:19:56.430

您可以在加载数据之前`alert`在[http://technoflexusdatastreamapi.appspot.com/landingpage上禁用：](http://technoflexusdatastreamapi.appspot.com/landingpage)

```
$('.viewDataLink').click(function ()
{
    $("#scriptShow").hide();
    $("#showData").show();
    $("#progressAnimation").show();
    var tmpAlert = alert;
    window.alert = function () { };
    $("#showData").load("/listData", function (response, status, xhr)
    {
        if (status == "success")
        {
            $("#progressAnimation").hide();
            window.alert = tmpAlert;
        }
    });
}); 
```

# jquery - 委托是最快的绑定方式吗？

> ID：16044643
> 
> 赞同：6
> 
> 时间：2013-04-16T18:41:22.630
> 
> 标签：jquery, performance

有人可以解释为什么委托似乎比别名绑定或 on() 更快。

这是一个测试用例：

[jsPerf](http://jsperf.com/test-on-click-delegate)

```
$('p').on('click',$.noop); //80% slower

$('p').click($.noop); //84% slower

$(document).delegate("p", "click",$.noop); //fastest 
```

检查 jquery 源，似乎在绑定任何事件之前，jquery 检查代表。

这是一个正确的说法还是还有其他什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-16T19:08:54.180

您犯的错误是认为只有一个 p 元素。

我添加了另一个测试，只有`console.log($('p').length);`，它显示测试中有 7 p 可见，其可见性显然不限于您在准备代码中构建的 HTML。

这意味着前两个函数必须再做 7 次绑定。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-16T18:53:56.457

两者都`delegate()`简单`bind()`地调用`on()`. 这是 jQuery 1.9.0 源代码的摘录：

```
bind: function( types, data, fn ) {
    return this.on( types, null, data, fn );
},
delegate: function( selector, types, data, fn ) {
    return this.on( types, selector, data, fn );
}, 
```

所以`on()`应该比其他两个函数稍微快一点，因为它少了一个函数调用。无论以何种方式绑定，处理程序的实际调用都应该是相同的。

但请确保您将苹果与苹果进行比较。如果你给or一个`selector`参数，调用处理程序会更慢，因为它必须检查目标是否满足选择器。`delegate``bind`

您的基准测试结果的原因是因为

```
$("p").on('click',$.noop); 
```

相当于：

```
$("p").each(function() {
    $(this).on('click', $.noop);
}); 
```

它必须找到所有匹配的元素并将处理程序绑定到它们。该`delegate()`调用只需要将处理程序绑定到一个元素（文档）；而不是在绑定时查找所有元素，而是在事件发生时执行以下操作：

```
if ($(event.target).is("p")) { ... } 
```

它的使用`on()`相当于`delegate()`：

```
$(document).on('click', 'p', $.noop); 
```

`document`当您从像`p`. 这就是为什么您应该尝试将使用的元素的范围限制为`delegate`包含您要委托给的所有动态元素的最小静态元素。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-04-16T19:02:16.367

委托更快，因为您不必查找任何元素，如果您使用选择器而不是元素委托将是最慢的

```
<div>
<p>test</p>
</div>

$('p').on('click',$.noop);
$('p').click($.noop);
$('div').delegate("p", "click",$.noop); 
```

[http://jsperf.com/test-on-click-delegate/3](http://jsperf.com/test-on-click-delegate/3)

# jquery - 如果我覆盖 html，它会从 dom 中删除吗？

> ID：16044650
> 
> 赞同：6
> 
> 时间：2013-04-16T18:41:34.757
> 
> 标签：jquery, dom

想象一下我有以下代码：

```
...
<div id="div1">
    <div id="div2">Original div2</div>
</div>

<div id="div3"></div>

... 
```

如果我跑

```
$('#div1').html('');
$('#div3').html('<div id="div2">New div2</div>'); 
```

我最终会遇到问题，因为我没有使用 .remove() 从 dom 中删除#div2，还是以这种方式清除 html 对我有用？

如果 div2 包含一些附加处理程序的 javascript 怎么办，比如

```
$('#div2').on('click',function() { ... }); 
```

那也会被删除，还是我需要关闭（）它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T18:44:24.703

> 我最终会遇到问题，因为我没有使用 .remove() 从 dom 中删除#div2，还是以这种方式清除 html 对我有用？

不，jQuery 将`.remove`在内部为您使用（技术上它使用`cleanData`，但它执行相同的清理。）

事件将丢失，因此您必须重新绑定它们。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T18:44:59.127

您应该使用`$('#div1').empty();`而不是使用`$('#div1').html('')` 您可以使用 //this 克隆元素， `$('#div3').html($('#div2').clone(true));`这将继承附加到它的任何数据事件。

如果您要将元素移动到另一个容器或另一个位置，您可以使用`append, prepend, before , after`. 您的所有数据和事件仍然完好无损

看到这个： -

```
<div id="container1">Container
    <div id="div2">div2</div>
</div>
<div id="container2">cotainer2</div>

$('#div2').click(function () {
    alert('test')
});
$('#container2').append($('#div2'));//Clicking on div2 will still alert. 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-16T18:47:35.937

由于您的事件将丢失，您可以`.on()`像这样使用，因此您不需要重新绑定事件

```
$(document).on('click','#div2',function() { ... }); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-16T18:47:55.883

`html()`如上所述使用应该没问题。不过在 IE9< 中要小心。来自 jquery 文档：

> 注意：在 Internet Explorer 9 及以下版本中，设置 HTML 元素的文本内容可能会损坏其子元素的文本节点，这些子节点会因操作而从文档中删除。如果您保留对这些 DOM 元素的引用并且需要它们保持不变，请使用 .empty().html(string) 而不是 .html(string) 以便在将新字符串分配给元素。

如果要保留侦听器，则应使用委托事件侦听。请参阅[on()](http://api.jquery.com/on/)的文档：

```
<div id="wrapper">
    <div id="div1">
        <div id="div2">Original div2</div>
    </div>

    <div id="div3"></div>
</div> 
```

`$('#wrapper').on('click', '#div2', function() {...});`

# sql - 触发检查重复项并更新属性值

> ID：16044651
> 
> 赞同：0
> 
> 时间：2013-04-16T18:41:37.707
> 
> 标签：sql, oracle, if-statement, for-loop, each

我有一个具有代码和索引属性的表。

我正在尝试创建一个触发器来检查代码的值。如果插入的代码有重复，则触发索引加1。示例：

```
code|c_index
111 | 1
112 | 1
113 | 1
111 | 2
114 | 1
112 | 2
111 | 3 
```

这是我的代码，但它不起作用：

```
create trigger trg_update
after insert on trial

for each row

declare v_index;

begin

select max(nvl(trial.c_index, 0)) into v_index
from trial;

if new.code = code then
set new.c_index = v_index

else 
set new.c_index = 1

end if;
end; 
```

...................................

我试图做一个新的更好的，但仍然没有工作：

```
create trigger trg_update
after insert on trial
for each row
declare v_index number;

begin

if :new.code = :old.code then
select max(nvl(c_index, 0)) into v_index
from trial
where code = :new.code;

set :new.c_index = v_index + 1

else 
set :new.c_index = 1

end if;
end; 
```

上面的代码有什么问题，问题的解决方案是什么？

..................................................

更新：

运行此代码后：

```
create trigger trg_update
AFTER insert on trial
for each ROW

DECLARE v_index NUMBER := -1; -- "-1" is put in place so to be below the minimum value of the column
DECLARE v_cnt NUMBER   := 0;

BEGIN

SELECT MAX(c_index), COUNT(*)
  INTO :v_index, v_cnt
  FROM trial
 WHERE code = :new.code;

IF v_index <> -1 AND v_cnt > 1 THEN
--Only one update here, for the newly inserted row explicitly
  UPDATE trial
     SET c_index = c_index +1
   WHERE code    = :new.code
     AND c_index = v_index
     AND ROWNUM  = 1;

END IF;
END; 
```

显示的一些问题：

1- 错误（2,1）：PLS-00103：遇到符号“DECLARE” 2- 错误（7,8）：PLS-00049：错误的绑定变量 'V_INDEX' 3- 错误（9,15）：PLS-00049 ：错误的绑定变量'NEW.CODE'

这是尝试修复错误 2 和 3 后的新代码：

```
create or replace trigger trg_update
AFTER insert on trial
for each ROW

declare vindex NUMBER := -1; -- "-1" is put in place so to be below the minimum value of the column
declare vcnt NUMBER   := 0;

BEGIN

SELECT MAX(c_index), COUNT(*)
  INTO vindex, vcnt
  FROM trial
 WHERE code = :new.code;

IF vindex <> -1 AND vcnt > 1 THEN
--Only one update here, for the newly inserted row explicitly
  UPDATE trial
     SET c_index = c_index +1
   WHERE code    = :new.code AND c_index = vindex AND ROWNUM  = 1;

END IF;

END; 
```

但是，仍然显示第一个错误。

错误（2,1）：PLS-00103：在预期以下情况之一时遇到符号“DECLARE”：开始函数杂注过程子类型类型当前游标删除之前存在符号“开始”替换“声明”以继续。

除了这个错误：

错误（19,4）：PLS-00103：在预期以下情况之一时遇到符号“文件结尾”：（开始案例声明结束异常退出 goto if loop mod null pragma raise return select update while with <<继续关闭当前删除获取锁插入打开回滚保存点设置sql执行提交forall合并管道清除

我该如何解决这些错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T06:59:48.837

您会发现以这种方式使用触发器在许多层面上都会很痛苦。起初这很诱人，*似乎*是个好主意，但事实并非如此。

触发器是在 DRI 标准化之前发明的。它们的目的是加强参照完整性。如果您在可行的情况下使用 DRI 并仅针对 RI 触发，那么您与 DBMS 相处得更好。

要执行您想要的操作，请将您更改`insert`为使用测试行是否存在的相关子查询（以免插入重复项），设置`c_index`为 0。然后`update`使用`set c_index =c_index +1`.

```
create procedure tablename_add @code int
as
-- add the row if it's not already there
insert tablename values (@code, 0)
where code not in 
      (select code from tablename where code = @code)
-- increase the count by one
update tablename set c_index = c_index + 1
where code = @code 
```

您甚至不需要定义事务。如果没有行，`INSERT`将成功并设置`c_index`为零，否则将无效。然后更新将增加`c_index1`，无论如何。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T07:03:33.253

首先，在插入新值之前在数据库中设置数据，执行以下命令：

```
UPDATE trial tr
   SET c_index = (SELECT MAX(c_index) + 1
                  FROM trial
                 WHERE code = tr.code);

COMMIT; 
```

之后，这里是一个触发器，它将相应地更新值（新插入的）：

```
CREATE OR REPLACE TRIGGER trg_update
AFTER INSERT ON trial
FOR EACH ROW

DECLARE
v_index NUMBER := -1; -- "-1" is put in place so to be below the minimum value of the column v_cnt NUMBER := 0;

BEGIN

  SELECT MAX(c_index), COUNT(*)
    INTO v_index, v_cnt
    FROM trial
   WHERE code = :new.code;

  IF v_index <> -1 AND v_cnt > 1 THEN
  --Only one update here, for the newly inserted row explicitly
    UPDATE trial
       SET c_index = c_index +1
     WHERE code    = :new.code
       AND c_index = v_index
       AND ROWNUM  = 1;

  END IF;
END; 
```

我编辑了触发器，它在我这边运行良好，但请注意它会在第一次更新查询后正常运行。如果 DECLARE 的问题仍然存在，请尝试将其删除，例如，有时它不是临时性的。

# delphi - 如何使用按键移动形状：delphi 中的上、左、下、右

> ID：16044654
> 
> 赞同：-2
> 
> 时间：2013-04-16T18:41:59.053
> 
> 标签：delphi, key, shape

首先，如果标题不清楚，我想提前道歉，所以我会解释一下。

我创建了一个形状，您可以在运行程序时通过移动鼠标来移动它：

```
procedure TForm1.FormMouseMove(Sender: TObject; Shift: TShiftState; X,
  Y: Integer);
begin
shape1.Left:=x;
shape1.Top:=y;
end;

end. 
```

问题是，我不喜欢用户必须使用鼠标来移动形状，所以我想通过按下键盘上的上、下、左、右键来完成。

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-16T18:44:03.253

只需在表单中添加一个`OnKeyDown`事件处理程序：

```
procedure TForm1.FormKeyDown(Sender: TObject; var Key: Word;
  Shift: TShiftState);
begin
  case Key of
    VK_UP:
      Shape1.Top := Shape1.Top - 10;
    VK_DOWN:
      Shape1.Top := Shape1.Top + 10;
    VK_LEFT:
      Shape1.Left := Shape1.Left - 10;
    VK_RIGHT:
      Shape1.Left := Shape1.Left + 10;
  end;
end; 
```

你甚至可以做

```
procedure TForm1.FormKeyDown(Sender: TObject; var Key: Word;
  Shift: TShiftState);
var
  Delta: integer;
begin
  if ssShift in Shift then
    Delta := 1
  else
    Delta := 10;
  case Key of
    VK_UP:
      Shape1.Top := Shape1.Top - Delta;
    VK_DOWN:
      Shape1.Top := Shape1.Top + Delta;
    VK_LEFT:
      Shape1.Left := Shape1.Left - Delta;
    VK_RIGHT:
      Shape1.Left := Shape1.Left + Delta;
  end;
end; 
```

以便用户可以通过按住 Shift 键来微调位置（以像素精度）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T18:44:24.297

好的，我希望我做对了，因为我不得不做 Delphi 已经有一段时间了，但是： - Form 对象有一个 KeyDown 或 KeyPressed 事件，您可以对其做出反应。- AFAIK 表单上还有一个“KeyPreview”属性，必须将其设置为 true 才能正常工作。

# c - 也许我写错了病毒？

> ID：16044660
> 
> 赞同：1
> 
> 时间：2013-04-16T18:42:19.913
> 
> 标签：c, windows

当我在下面运行代码时，它一直工作到简单游戏的 3 次迭代，但在第 3 次迭代后 CPU 使用率飙升至 90% 并立即崩溃。甚至控制台也被终止，但在 Windows 任务列表中可以看到下面的程序 exe。我必须手动删除它，Windows CPU 才能恢复到 3% 的水平。你知道这是什么原因吗？（我在 Windows 7 64 位机器上使用 Dev-C++）

```
#include <stdio.h>
#include <stdlib.h>
#include <time.h>

void game(void);
int main(void) {
    srand(time(NULL));
    game();
    return 0;
}
void game(void) {
    int choice = 1;
    while (choice != 0) {
        int number1, number2, resultStudent, result;
        number1 = 1 + rand() % 9;
        number2 = 1 + rand() % 9;
        result = number1 * number2;
        printf("How much is %d times %d ?", number1, number2);
        scanf("%d", & resultStudent);
        while (resultStudent != result) {
            printf("No. Please try again.");
            scanf("%d", &resultStudent);
        }
        printf("Very Good\n");
        printf("Do you wanna play again?(0 for Exit):  ");
        scanf(" %d", &choice);
        printf("Hmm you wanna play again...\n");
    }
    printf("Program is terminated.");
} 
```

# opencv - 使用特征检测器的 OpenCV 运动跟踪

> ID：16044661
> 
> 赞同：2
> 
> 时间：2013-04-16T18:42:21.823
> 
> 标签：opencv, feature-detection, motion-detection

我想知道是否可以通过使用特征检测器（如 SURF、ORB 等...）更可靠地检测运动......它是否适用于视频流中的人类？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T20:23:08.443

[SIFT flow](http://people.csail.mit.edu/celiu/ECCV2008/)可能会给你一些想法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-07T12:22:07.673

我在 OpenCV 中完成了一个项目，可能对你有用。你可以在[这里找到](http://geekbrothers.org/index.php/categories/computer/14-motion-detector)

# java - java hibernate BO将外键作为DAO参数传递（架构设计）

> ID：16044662
> 
> 赞同：0
> 
> 时间：2013-04-16T18:42:25.010
> 
> 标签：java, hibernate, orm

我遇到了以下架构问题（文本很长，但对于有经验的 Java 开发人员来说问题应该很容易）：

我正在学习 Java，并且正在开发一个使用 Hibernate 的简单数据库应用程序。有人建议我使用[BO](http://www.corej2eepatterns.com/Patterns2ndEd/BusinessObject.htm)和 DAO 模式来访问数据库。简而言之，DAO 是 HQL/ORM 层（创建、获取、更新、删除等），业务对象执行更抽象的逻辑内容（通过某些标准检索所有记录、获取总和等）。

我想通过 BO/DAO 在树中创建或移动一个节点。每个节点都有它的父节点，并用 hibernate 映射如下：

```
@Entity
@Table(name = "category")
public class Category {

    @ManyToOne
    @JoinColumn(name="parent_id")
    private Category parent;

    public Category getParent() {
        return parent;
    }

    public void setParent(Category parent) {
        this.parent = parent;
    } 
```

现在，我希望 BO 能够`create`或`move`Category 对象，这些方法带有一个`id`参数：

```
public abstract void createCategory(int parent_id, String name, CategoryType type);
public abstract void moveCategory(int category_id, int new_parent_id); 
```

在实现上述 BO 方法时，我正在尝试使用 hibernate`session.load`来延迟加载外键关系：

```
session.load(Category.class, parent_id) 
```

里面：

```
public void createCategory(int parent_id, String name, CategoryType type) {
    Category category = new Category();
    category.setName(name);
    category.setParent(session.load(Category.class, parent_id));
    category.setType(type);
    this.categoryDao.save(category);
} 
```

DAO 应该保持休眠会话（准确地说，是抽象 DAO 接口的 DAO-休眠实现），但没有其他类应该知道存在任何类似于休眠会话的东西。特别是，BO 不应该对休眠会话有任何引用。并且上面的代码不能编译（`session`未知）。

我的问题是 - 我犯了什么错误，应该如何设计它既有用/有弹性/又优雅？我是否应该提供一种`Category::setParentId()`方法来临时存储父节点 ID，并且 - 在执行 DAO 的创建/更新时 - 检查它是否已设置并相应地处理？或者也许有更好的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T05:23:19.147

下面的模式应该可以帮助你：让我们举个例子，如果有一个业务功能在表 Foo 上运行。

**一个通用的 DAO**

```
@Repository
public abstract class DAO<T>
{
    @Autowired
    SessionFactory factory;

    /**
    * Some sample generic methods
    */
    public Session getCurrentSession()
    {
        return factory.getCurrentSession();
    }

    public void create(T record) {
        getCurrentSession().save(record);
    }

    public void update(T record) {
        getCurrentSession().update(record);
    }

    public void delete(T record) {
        getCurrentSession().delete(record);
    }

    public T get(Class<T> clazz, Integer id) {
        return (T) getCurrentSession().get(clazz, id);
    }

    /**
    * Rest of the generic dao methods follow
    */
} 
```

**通用 BO**

```
@Transactional
public abstract class BO<T>
{
    public abstract DAO<T> getDAO();

    /**
    * Some sample generic methods
    */
    public abstract void create(T record);

    public abstract void update(T record);

    public abstract void delete(T record);

    public abstract T get(Class<T> clazz, Integer id);

    /**
    * Rest of the generic business methods follow
    */
} 
```

**特定的 DAO**

```
@Transactional
@Repository
public FooDAO extends DAO<Foo>
{
} 
```

**特定的 BO**

```
@Transactional
public FooBO extends BO<Foo>
{
    @AutoWired
    FooDAO dao;

    @Override
    public DAO<Foo> getDAO() 
    {
        return dao;
    }

    @Override 
    public void create(T record){ 
        dao.create(record);
    }

    @Override 
    public void update(T record) { 
        dao.update(record);
    }

    @Override 
    public void delete(T record) { 
        dao.delete(record); 
    }

    @Override 
    public T get(Class<T> clazz, Integer id) { 
        return dao.get(Foo.class, id); 
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T00:29:22.657

您应该将您的方法标记为`@Transactional`（在 xml 设置中添加事务支持）。`getCategory`然后在 dao:和`saveCategory`（你已经有 - ）中创建 2 个方法`save`并使用 dao 方法进行操作，但在业务层中不使用休眠会话。

```
@Transactional
public void createCategory(int parent_id, String name, CategoryType type) {
...
} 
```

# asp.net - 执行存储过程 OnClick

> ID：16044665
> 
> 赞同：1
> 
> 时间：2013-04-16T18:42:36.777
> 
> 标签：asp.net, vb.net, onclick

如何在`OnClick`没有参数的按钮上执行存储过程？我有以下代码：

```
Protected Sub btnExport_Click(sender As Object, e As System.EventArgs) Handles btnExport.Click

        Dim exec As SqlCommand = New SqlCommand("up_ExportFile", conn)
        exec.CommandType = CommandType.StoredProcedure

End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T18:47:34.423

假设您已经打开了连接，只需添加[ExecuteNonQuery](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.executenonquery.aspx)方法

```
Protected Sub btnExport_Click(sender As Object, e As System.EventArgs) Handles btnExport.Click

        Dim exec As SqlCommand = New SqlCommand("up_ExportFile", conn)
        exec.CommandType = CommandType.StoredProcedure
        exec.ExecuteNonQuery()

End Sub 
```

但是，我建议您不要`SqlConnection`在应用程序的整个生命周期内保留一个全局变量来保持您的打开状态。请记住，SqlServer 的 ADO.NET 提供程序实现了[连接池机制](http://msdn.microsoft.com/en-us/library/8xx3tyca.aspx)，因此打开连接是一个轻量级过程。
所以更好的方法是

```
Using conn = new SqlConnection("your_connection_string_here")
    conn.Open()
    Dim exec As SqlCommand = New SqlCommand("up_ExportFile", conn)
    exec.CommandType = CommandType.StoredProcedure
    exec.ExecuteNonQuery()
End Using 
```

通过这种方式，仅在需要时创建连接对象，然后关闭并处置 [请参阅使用 Statememt](http://msdn.microsoft.com/en-us/library/htd05whh.aspx)

# python - 测试多对多字段的最佳方法

> ID：16044668
> 
> 赞同：3
> 
> 时间：2013-04-16T18:42:45.103
> 
> 标签：python, django

我在为 ManyToManyField 条目开发测试时遇到问题。我有一个像这样的简单博客模型：

```
class Tag(models.Model):
    name = models.CharField(max_length=25)

class Entry(models.Model):

    title = models.CharField(max_length=80)
    author = models.ForeignKey(User)
    pubdate = models.DateTimeField()
    tags = models.ManyToManyField(Tag)
    text = models.TextField() 
```

我已经创建了一些非常基本的测试只是为了它的纯粹地狱：

```
class EntryTests(TestCase):
    def testEntryFields(self):
        user1 = User.objects.create_user('xs', 'ln@gmail.com', 'pw')
        user1.last_name = 'H'
        user1.save()

        now = timezone.now()
        entry1 = Entry(title="Title", author=user1, pubdate=now, text="Hello")
        entry1.save()
        tag1 = entry1.tags.create(name="testtag")
        tag1.save()

        self.assertEqual(entry1.title, "Title")
        self.assertEqual(entry1.pubdate, now)
        self.assertEqual(entry1.text, "Hello")
        self.assertEqual(entry1.author, user1)
        self.assertEqual(entry1.tags.all()[0], tag1)
        self.assertEqual(tag1.name, "testtag") 
```

这通过了，但正如你所看到的，我不得不做一些奇怪的体操（生成所有条目的列表并获取该列表中的第一个也是唯一一个条目）来测试`entry1.tags`. 有没有更好的方法来用 Django 做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-16T19:58:02.510

我不确定我是否了解您要测试的内容与 django 模型的正常行为之间有什么区别......

但是对于该断言来说，简单的字段查找不是更好吗？

[https://docs.djangoproject.com/en/dev/topics/db/queries/](https://docs.djangoproject.com/en/dev/topics/db/queries/)

```
self.assertEqual(entry1.tags.get(pk=tag1.pk), tag1) 
```

此外，在 django 的 unittest 中还有一些自定义断言： [assertQuerySetEqual](https://docs.djangoproject.com/en/dev/topics/testing/overview/#django.test.TestCase.assertQuerysetEqual)`.all`在使用时可能更合适`.filter`

# jquery - Angular 在响应服务器之后发出请求

> ID：16044669
> 
> 赞同：2
> 
> 时间：2013-04-16T18:42:49.163
> 
> 标签：jquery, angularjs

我正在尝试在这样的响应服务器之后进行服务器调用

```
 $http.post($scope.serviceSave, {
            'person': $scope.person
        }).success(function(data){
            $http.get($scope.serviceList);
        }); 
```

但是当我尝试它时，我得到了

```
Error: $digest already in progress 
```

并没有提出要求。

我正在像这样使用 jquery

```
<a href="#" ng-click="setContent('/people/list')" >People</a>

$scope.setContent = function(service){
            $http.get(service);
} 
```

然后

```
 $http.post($scope.serviceSave, {
            'person': $scope.person
        }).success(function(){
            $("a:contains(People)").click();
        }); 
```

我可以提出请求，强制点击，但我得到了

```
Error: $digest already in progress 
```

然而

请问，正确的格式是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T10:36:52.717

我试图重现这一点，`JsFiddle`但无法做到。看起来在另一个回调中调用一个请求是完全有效的。您是否`$http`为每个请求使用服务？不这样做就是自找麻烦。

[工作示例](http://jsfiddle.net/CodeConstructors/KcDQ4/)（请记住，我正在那里解决模拟服务，这可能是一个因素）：

```
$http.post("/echo/json/").success(function() {            
        console.log("finished 1st");
        $http.get("/echo/json/").success(function() {
            console.log("finished 2nd");
        });
}); 
```

但是，从另一个回调中调用一个回调被认为是一种不好的做法。如前所述（某人），使用 deferred 要好得多：

```
var deferred = $q.defer();
var promise = deferred.promise;

$http.post("/echo/json/").success(function() {            
    console.log("finished 1st");
    deferred.resolve();            
});

promise.then(function(){
    $http.get("/echo/json/").success(function() {
        console.log("finished 2nd");
    });
}); 
```

例如上面的[工作小提琴：](http://jsfiddle.net/CodeConstructors/KcDQ4/1/)

# asp.net - Asp.net，html，通过 asp 的错误输出（服务器端）

> ID：16044670
> 
> 赞同：0
> 
> 时间：2013-04-16T18:42:51.323
> 
> 标签：asp.net, html

我试图输出一些 HTML 代码并得到奇怪的输出，这是我在客户端打印此代码的字符串 `<form runat="server"> <%=buttons%> </form>`

和服务器端是（当然按钮是一个公共字符串）

```
buttons = "<asp:Button id='loggin' runat=\"server\" text=\"התחבר\" onclick='loggin_Click'></asp:button>";` 
```

html 代码看起来像[这样](http://img13.imageshack.us/img13/2136/problemyb.png)。我使用此代码打印此字符串 : `<%= buttons%>`，这是我得到的输出：[Link](http://s8.postimg.org/by4f9paph/Capture.png)。如果有人对可能出现的问题有任何想法，我将非常感激，谢谢大家，祝您有美好的一天。

# c# - 计算半径内的 100 英里

> ID：16044671
> 
> 赞同：2
> 
> 时间：2013-04-16T18:43:04.560
> 
> 标签：c#, sql, sql-server

鉴于我有一个包含机场列表及其相关经纬度坐标的表格，我将如何获取距离另一个坐标 100 英里范围内的机场列表？我的最终目标是让用户按城市搜索并找到该城市纬度和经度 100 英里范围内的机场。我有所有的数据只是不知道从哪里开始。

我的数据在 SQL Server 中。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-16T18:52:56.077

```
create function dbo.F_GREAT_CIRCLE_DISTANCE
(
    @Latitude1  float,
    @Longitude1 float,
    @Latitude2  float,
    @Longitude2 float
)
returns float as
begin
    declare @radius float

    declare @lon1  float
    declare @lon2  float
    declare @lat1  float
    declare @lat2  float

    declare @a float
    declare @distance float

    -- Sets average radius of Earth in Miles
    set @radius = 3956

    -- Convert degrees to radians
    set @lon1 = radians( @Longitude1 )
    set @lon2 = radians( @Longitude2 )
    set @lat1 = radians( @Latitude1 )
    set @lat2 = radians( @Latitude2 )

    set @a = sqrt(square(sin((@lat2-@lat1)/2.0E)) + (cos(@lat1) * cos(@lat2) * square(sin((@lon2-@lon1)/2.0E))) )
    set @distance = @radius * ( 2.0E *asin(case when 1.0E < @a then 1.0E else @a end ))

    return @distance
end 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-16T18:48:01.087

你可以使用`System.Device.Location.GeoCoordinate`类

```
GeoCoordinate city = ....;
double distance = .......;
List<GeoCoordinate> airports = .......; //load from db.

var found = airports.Where(c=>c.GetDistanceTo(city) < distance); 
```

**编辑**

对于那些可能对真正的工作代码感兴趣的人

```
var airports1 = Airports.Search(51, 0, 100).ToList(); //~London
var airports2 = Airports.Search(40.714623, -74.006605,100).ToList(); //~NY 
```

* * *

```
public class Airports
{
    public class Airport
    {
        public string Name;
        public GeoCoordinate Location;

        public override string ToString()
        {
            return Name;
        }
    }

    static Lazy<List<Airport>> _Airports = new Lazy<List<Airport>>(() =>
        {
            using (var wc = new WebClient())
            {
                var json = wc.DownloadString("http://www.flightradar24.com/AirportDataService2.php");
                var jObj = new JavaScriptSerializer().Deserialize<Dictionary<string,string[]>>(json);

                return jObj.Values
                           .Select(j => new Airport
                            {
                                Name = (string)j[2],
                                Location = new GeoCoordinate(double.Parse(j[3].ToString(), CultureInfo.InvariantCulture),double.Parse(j[4].ToString(), CultureInfo.InvariantCulture))
                            })
                            .ToList();
            }
        }, true);

    public static IEnumerable<Airport> Search(double lat,double lon, double distInMiles)
    {
        var loc = new GeoCoordinate(lat, lon);
        return _Airports.Value.Where(c => c.Location.GetDistanceTo(loc) < distInMiles * 1609.344);
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-16T18:48:58.553

你可以这样做：

```
 --SELECT Points closer than @radius
select * from #Points p
WHERE power(p.x - @locX, 2) + POWER(p.y - @locY, 2) < POWER(@radius,2) 
```

（这已无耻地从[http://www.sqlservercentral.com/Forums/Topic1228111-8-1.aspx#bm1229043](http://www.sqlservercentral.com/Forums/Topic1228111-8-1.aspx#bm1229043)中删除，通过 Google Search for SQL + Pyhtagoras 找到）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-16T18:46:45.243

如果您的机场位于点 0,0，则半径 30 英里内的所有机场都应在一个圆圈内。要测试点是否在圆内，您需要测试每个平方方程： sqrt(X*X + Y*Y) < R，其中 X, Y - 每个位置的位置，R = 100 英里

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-16T18:50:06.170

这是“乌鸦飞过两点之间的距离”的公式：Haversine

```
formula:     a = sin²(Δφ/2) + cos(φ1).cos(φ2).sin²(Δλ/2)
c = 2.atan2(√a, √(1−a))
d = R.c 
```

其中 φ 是纬度，λ 是经度，R 是地球半径（平均半径 = 6,371 公里）请注意，角度需要以弧度为单位才能传递给三角函数！

你可以把这段代码翻译成 SQL

```
JavaScript: 
var R = 6371; // km
var dLat = (lat2-lat1).toRad();
var dLon = (lon2-lon1).toRad();
var lat1 = lat1.toRad();
var lat2 = lat2.toRad();

var a = Math.sin(dLat/2) * Math.sin(dLat/2) +
        Math.sin(dLon/2) * Math.sin(dLon/2) * Math.cos(lat1) * Math.cos(lat2); 
var c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a)); 
var d = R * c; 
```

这是数学函数的 T-SQL 页面的链接：http: [//msdn.microsoft.com/en-us/library/ms188919.aspx](http://msdn.microsoft.com/en-us/library/ms188919.aspx)

# python - 将参数传递给邮件脚本

> ID：16044672
> 
> 赞同：0
> 
> 时间：2013-04-16T18:43:10.483
> 
> 标签：python

我想使用我编写/引用的以下代码从 python 发送电子邮件

```
<script>
$(document).ready(function() {

    $("#form1").submit(function(){
        $("#form1").validationEngine();
        if($('div input[type=text]').val() != "")
    {
        var textfield2=document.getElementById("textfield2").value;
        var textarea=document.getElementById("textarea").value;
        var dataS=$("#form1").serialize();
        $.ajax({
            type: "POST",
            crossDomain: 'true',
            url: "mail.py",
            success: function( ){
                alert("completed");
            },
            error: function(){
                alert(dataS);
            }

        });
    }
    return false;  

    }); 

});
</script> 
```

对于邮件部分，我参考了下面的谷歌代码

```
from google.appengine.api import mail

mail.send_mail(sender="Example.com Support <support@example.com>",
              to="Albert Johnson <Albert.Johnson@example.com>",
              subject="Your account has been approved",
              body="""
Dear Albert:

Your example.com account has been approved.  You can now visit
http://www.example.com/ and sign in using your Google Account to
access new features.

Please let us know if you have any questions.

The example.com Team
""") 
```

现在的问题是，在 ajax 调用.. 我怎样才能收到 mail.py 脚本中的 HTML 参数？请帮助我是python的新手

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T19:41:21.850

在 cgi 脚本中，如果您实例化 a [`cgi.FieldStorage()`](http://docs.python.org/2/library/cgi#using-the-cgi-module)，它会自动填充 GET 或 POST 参数。如果您想发布内容，只需[`data`](http://api.jquery.com/jQuery.ajax/)向您的 ajax 请求对象添加一个属性：

```
$.ajax({
    ...
    data: {param1: 'value1', param1: 'value2', ...}
    ...
}) 
```

在您的 python 脚本中，它应该足够了：

```
import cgi
store = cgi.FieldStorage()
par1 = store.getfirst('param1')
... 
```

还有一件事——
问问自己：你真的想在页面加载时提交表单吗？（您正在使用“就绪”事件）。等到有人在表格中输入一些东西不是更好吗？

# javascript - codeigniter 常用js php代码放在哪里

> ID：16044675
> 
> 赞同：1
> 
> 时间：2013-04-16T18:43:13.590
> 
> 标签：javascript, jquery, codeigniter, project-layout

我有一个用 codeigniter 开发的网站。
在我网站的许多页面中，我有更多相等的函数 javascript/jquery 和 PHP 中的一些字符串，如下所示：

```
function change_city_by_nation(nation_id){
        var site_url_city ="<?php echo(site_url('/backend/city/get_city_by_nation_id')); ?>";
        $.ajax({   
            url: site_url_city, 
            async: false,
            type: "POST", 
            data: "nation_id="+nation_id, 
            dataType: "html", 

            success: function(data) {
                $('#city').empty();
                $(data +' option').each(function(index){
                    $('#city').append($(this).html());
                });
                $('#city').prepend("<option value='0' selected='selected'>Tutte le città</option>");
            }
         });
    } 
```

用 php 中的一些字符串收集所有这些 javascript 函数的最佳位置在哪里？- JS 文件（但是当我调用它时我必须传递 php 字符串）
- 帮助程序（但是如何？）
- 文件 php，其中声明函数 JS，如 common.php（但放在哪里以及如何调用它？）

你对我的范围有一些解决方案吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T18:47:13.173

如果您需要对这些脚本进行分组，您可以制作一个常规的 .js 文件，但修改函数参数 - 使 PHP 发送的所有值实际上都成为函数参数。所以，例如，

`function change_city_by_nation(nation_id){...}`

变成

`function change_city_by_nation(url_from_php, nation_id){...}`ETC...

当然，之后您需要修改函数体和函数调用（来自视图）。

但是，如果您有一个仅在单个页面上使用的函数，那么将 JS 函数留在那里并像您在示例中所做的那样嵌入 PHP 值是完全可以接受的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T23:01:38.010

`<head>`在您的（或在您的主 JS 文件之前的某个位置）创建一个引用基本 URL 的 JS 变量或后端生成的 JS 所需的其他常见变量是一种常见的做法。

```
<script>
var SITE_URL = "<?php echo site_url(); ?>";
</script> 
```

然后，您的 Javascript 文件将包含在`<body>`HTML 源代码的末尾，它可以在必要时利用这些变量。

您如何生成初始变量将取决于您如何处理应用程序中的模板。一个共同的页眉/页脚将使整个过程更容易。

# facebook - 请求对话框弹出问题

> ID：16044678
> 
> 赞同：0
> 
> 时间：2013-04-16T18:43:30.493
> 
> 标签：facebook, facebook-javascript-sdk

我在我的 PHP 脚本中使用 FB 请求对话框。它适用于除 Safari 之外的所有浏览器。事实上，弹出窗口拦截器选项存在问题。大多数现代浏览器都阻止弹出窗口，并且默认情况下在 safari 中也启用了此选项。绕过弹出窗口阻止程序并制作功能性FB请求对话框对我来说几乎没有挑战。但是，在使用我的应用程序之前，我应该要求网站用户在他们的浏览器中取消选中弹出窗口阻止程序选项也是没有意义的。代码如下：

```
 FB.ui({
            method: "apprequests",
             to:''+str+'',           
          message: "xxxxxxxxxx",
          name: "xxxxxxx",
          description: "",
          data: JSON.stringify({code:key,usr:uid,vi:'vi',invt:'invt'}), 
          picture: "<?php echo $fb_image;?>",
          link: link_url,
          display: 'popup'
      }, function(response) {
          //------------------------------
      }

            FB init:
           <script type="text/javascript">
             FB.init({
             appId  : 'oauth_fb_key',
             status : true,
             cookie : true,
             oauth  : true,
             xfbml  : true
            });
           </script> 
```

是不是由上面的调用请求对话框的JS函数控制的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T08:27:04.233

尝试为 设置`display`参数`FB.ui`，如[doc 中所述](https://developers.facebook.com/docs/reference/javascript/FB.ui/)。尝试其中一个`iframe`或`page`选项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T08:59:30.410

放入`frictionlessRequests : true`您的 FB.init & Fb.ui 方法的“to”应该是

```
to:'comma separated facebook user id' 
```

供参考：[请求对话框 Facebook](https://developers.facebook.com/docs/reference/dialogs/requests/)

# asp.net - asp:Gridview 获得焦点列/生命周期问题

> ID：16044679
> 
> 赞同：0
> 
> 时间：2013-04-16T18:43:30.877
> 
> 标签：asp.net, vb.net, gridview

我正在为一组更复杂的功能开发概念证明 (POC) GridView，其中任何给定的单元格都填充有文本框，无论它处于正常模式还是编辑模式。当任何给定的文本框获得焦点（选项卡或鼠标）时，该行将设置为编辑状态，并且它在编辑模式下的相应文本框*应该*获得焦点。一旦该文本框失去焦点，它*应该*会导致该行的更新。除了找到一种可行的方法来选择获得焦点的列（“文本框”）之外，我让 POC 工作，我认为这是一个生命周期问题，但没有提出任何好的解决方法。请记住，这是一个 POC，我所做的一些事情可能不是最佳实践，因为它是一种快速而肮脏的方式来使其工作。我将不胜感激任何建议。

形式：

```
<%@ Page Language="vb" AutoEventWireup="false" CodeBehind="StandardContactEditor.aspx.vb" Inherits="EditableGridView.StandardContactEditor" EnableEventValidation="false" %>

<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
</head>
<body>
    <form id="form1" runat="server">
        <div>
            <asp:GridView ID="contactsDataGrid"
                    AllowPaging="true" PageSize="5"
                    DataKeyNames="ID"
                    AutoGenerateColumns="false"

                    runat="server">
                <Columns>
                    <asp:TemplateField HeaderText="First Name">
                        <ItemTemplate>
                            <asp:TextBox ID="txtFirstName" Text='<%# Bind("FirstName") %>' runat="server" />
                        </ItemTemplate>
                        <EditItemTemplate>
                            <asp:TextBox ID="txtFirstNameEdit" Text='<%# Bind("FirstName") %>' runat="server" />
                        </EditItemTemplate>
                    </asp:TemplateField>
                    <asp:TemplateField HeaderText="Last Name">
                        <ItemTemplate>
                            <asp:TextBox ID="txtLastName" Text='<%# Bind("LastName") %>' runat="server" />
                        </ItemTemplate>
                        <EditItemTemplate>
                            <asp:TextBox ID="txtLastNameEdit" Text='<%# Bind("LastName") %>' runat="server" />
                        </EditItemTemplate>
                    </asp:TemplateField>
                </Columns>
            </asp:GridView>
        </div>
    </form>
</body>
</html> 
```

代码：

```
Imports FileHelpers

Public Class StandardContactEditor
    Inherits System.Web.UI.Page

    private fileName As String = "C:\TestFiles\TestContacts.csv"
    Private records As List(Of ContactCSV)

    Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
        If Not IsPostBack
            BindGridData()
        End If
    End Sub

    Private Sub BindGridData()
        PopulateRecords()

        Me.contactsDataGrid.DataSource = records
        Me.contactsDataGrid.DataBind()
    End Sub

    Protected Sub RowDataBound(ByVal sender As Object, ByVal e As GridViewRowEventArgs) Handles contactsDataGrid.RowDataBound
        e.Row.Attributes("onfocus") = ClientScript.GetPostBackClientHyperlink(contactsDataGrid, "Edit$" + e.Row.DataItemIndex.ToString(), false)

        If Not ((e.Row.RowState = DataControlRowState.Edit) _
                Or (e.Row.RowState = (DataControlRowState.Alternate Or DataControlRowState.Edit)))
            Try
                ' First Name Column
                Dim firstNameTb As TextBox = e.Row.FindControl("txtFirstName")
                ' firstNameTb.Attributes("onfocus") = ClientScript.GetPostBackClientHyperlink(contactsDataGrid, "Edit$" + e.Row.DataItemIndex.ToString(), false)

                                    ' ISSUE CAUSED BY APPENDING "000" - Used for col/textbox identification
                firstNameTb.Attributes("onfocus") = ClientScript.GetPostBackClientHyperlink(contactsDataGrid, "Edit$" + e.Row.DataItemIndex.ToString() + "000", false)
            Catch ex As Exception
                Console.WriteLine()
            End Try

            Try
                Dim lastNameTb As TextBox = e.Row.FindControl("txtLastName")
                ' lastNameTb.Attributes("onfocus") = ClientScript.GetPostBackClientHyperlink(contactsDataGrid, "Edit$" + e.Row.DataItemIndex.ToString(), false)

                                    ' ISSUE CAUSED BY APPENDING "001" - Used for col/textbox identification
                lastNameTb.Attributes("onfocus") = ClientScript.GetPostBackClientHyperlink(contactsDataGrid, "Edit$" + e.Row.DataItemIndex.ToString() + "001", false)
            Catch ex As Exception
            End Try
        End If
    End Sub

    Protected Sub RowEditing(ByVal sender As Object, ByVal e As GridViewEditEventArgs) Handles contactsDataGrid.RowEditing
        contactsDataGrid.EditIndex = (e.NewEditIndex / 1000)
        Dim col As Integer = (e.NewEditIndex Mod 1000)

        ' contactsDataGrid.EditIndex = e.NewEditIndex

        BindGridData()

        Dim fntb As TextBox = contactsDataGrid.Rows(contactsDataGrid.EditIndex).FindControl("txtFirstNameEdit")
        fntb.Attributes("onblur") = ClientScript.GetPostBackClientHyperlink(contactsDataGrid, "Update$" + contactsDataGrid.EditIndex.ToString(), false)
        ' fntb.Focus()

        Dim lntb As TextBox = contactsDataGrid.Rows(contactsDataGrid.EditIndex).FindControl("txtLastNameEdit")
        lntb.Attributes("onblur") = ClientScript.GetPostBackClientHyperlink(contactsDataGrid, "Update$" + contactsDataGrid.EditIndex.ToString(), false)
        ' lntb.Focus()

        If(col = 0)
            fntb.Focus()
        Else If(col = 1)
            lntb.Focus()
        End If
    End Sub

    Protected Sub RowUpdating(ByVal sender As Object, ByVal e As GridViewUpdateEventArgs) Handles contactsDataGrid.RowUpdating
                    ' AT THIS POINT THE EDIT FIELDS ARE NOT VISIBLE AND AN EXCEPTION IS THROWN WHEN TRYING TO RETRIEVE THOSE TEXTBOXES

        ' Trying to override here
        contactsDataGrid.EditIndex = (contactsDataGrid.EditIndex / 1000)

        PopulateRecords()

        Dim id As String = contactsDataGrid.DataKeys(e.RowIndex).Value.ToString()

        Dim record As ContactCSV = records.Where(Function(x) x.ID = id).SingleOrDefault()

        Dim firstNameTb As TextBox = contactsDataGrid.Rows(e.RowIndex).FindControl("txtFirstNameEdit")
        record.firstName = firstNameTb.Text

        Dim lastNameTb As TextBox = contactsDataGrid.Rows(e.RowIndex).FindControl("txtLastNameEdit")
        record.lastName = lastNameTb.Text

        WriteRecordsToFile()

        contactsDataGrid.EditIndex = -1

        ' update the actual data
        contactsDataGrid.DataSource = records
        contactsDataGrid.DataBind()
    End Sub

    Protected Sub SelectedColumn(ByVal Sender As Object, ByVal e As EventArgs)
        Console.WriteLine()
    End Sub

    Private Sub PopulateRecords()
        Dim fileEngine As New FileHelperEngine(GetType(ContactCSV))

        Try
            Dim objs As ContactCSV() = fileEngine.ReadFile(fileName)
            records = objs.ToList()
        Catch ex As exception

        End Try
    End Sub

    Private Sub WriteRecordsToFile()
        Dim fileEngine As New FileHelperEngine(GetType(ContactCSV))

        fileEngine.WriteFile(fileName, records)
    End Sub
End Class 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T14:05:23.177

这是一个结合不熟悉的技术过度思考解决方案的经典案例。这个想法是建立一个高度响应的（每个字段编辑）页面。没有混合任何内置的 GridView 功能，一个简单的 OnTextChanged 在其他所有内容都被剥离后按我的预期工作。之前发布的代码出现的问题是在 OnBlur 之后，在列标识部分就位的情况下，将一行设置为交替状态而不是交替或编辑状态。

形式：

```
<%@ Page Language="vb" AutoEventWireup="false" CodeBehind="StandardContactEditor.aspx.vb" Inherits="EditableGridView.StandardContactEditor" EnableEventValidation="true" %>

<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
</head>
<body>
    <form id="form1" runat="server">
        <div>
            <asp:GridView ID="contactsDataGrid"
                    AllowPaging="true" PageSize="5"
                    DataKeyNames="ID"
                    AutoGenerateColumns="false"

                    runat="server">
                <Columns>
                    <asp:TemplateField HeaderText="First Name">
                        <ItemTemplate>
                            <asp:TextBox ID="txtFirstName" Text='<%# Bind("FirstName") %>' OnTextChanged="textBox_TextChanged" AutoPostBack="true" runat="server" />
                        </ItemTemplate>
                    </asp:TemplateField>
                    <asp:TemplateField HeaderText="Last Name">
                        <ItemTemplate>
                            <asp:TextBox ID="txtLastName" Text='<%# Bind("LastName") %>' OnTextChanged="textBox_TextChanged" AutoPostBack="true" runat="server" />
                        </ItemTemplate>
                    </asp:TemplateField>
                    <asp:TemplateField HeaderText="Phone Number">
                        <ItemTemplate>
                            <asp:TextBox ID="txtPhoneNumber" Text='<%# Bind("PhoneNumber") %>' OnTextChanged="textBox_TextCHanged" AutoPostBack="true" runat="server" />
                        </ItemTemplate>
                    </asp:TemplateField>
                </Columns>
            </asp:GridView>
        </div>
    </form>
</body>
</html> 
```

代码：

```
Imports FileHelpers

Public Class StandardContactEditor
    Inherits System.Web.UI.Page

    private fileName As String = "C:\TestFiles\TestContacts.csv"
    Private records As List(Of ContactCSV)

    Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
        If Not IsPostBack
            BindGridData()
        End If
    End Sub

    Private Sub BindGridData()
        PopulateRecords()

        Me.contactsDataGrid.DataSource = records
        Me.contactsDataGrid.DataBind()
    End Sub

    Protected Sub textBox_TextChanged(ByVal sender As Object, ByVal e As EventArgs)
        PopulateRecords()

        Dim tb as TextBox = sender
        Dim row As GridViewRow = tb.Parent.Parent

        Dim record As ContactCSV = records.Where(Function(x) x.ID = row.RowIndex).SingleOrDefault()

        Dim firstNameTb As TextBox = contactsDataGrid.Rows(row.RowIndex).FindControl("txtFirstName")
        record.firstName = firstNameTb.Text

        Dim lastNameTb As TextBox = contactsDataGrid.Rows(row.RowIndex).FindControl("txtLastName")
        record.lastName = lastNameTb.Text

        Dim phoneNumberTb As TextBox = contactsDataGrid.Rows(row.RowIndex).FindControl("txtPhoneNumber")
        record.PhoneNumber = phoneNumberTb.Text

        WriteRecordsToFile()
    End Sub

    Private Sub PopulateRecords()
        Dim fileEngine As New FileHelperEngine(GetType(ContactCSV))

        Try
            Dim objs As ContactCSV() = fileEngine.ReadFile(fileName)
            records = objs.ToList()
        Catch ex As exception

        End Try
    End Sub

    Private Sub WriteRecordsToFile()
        Dim fileEngine As New FileHelperEngine(GetType(ContactCSV))

        fileEngine.WriteFile(fileName, records)
    End Sub
End Class 
```

# c++ - 霍夫曼解码程序问题

> ID：16044680
> 
> 赞同：2
> 
> 时间：2013-04-16T18:43:33.540
> 
> 标签：c++, struct, tree

我正在尝试编写一个霍夫曼解码算法。我决定采用迭代方法。我相信我遇到的主要问题与我的 nodetype 结构有关。在 DDD 中，它说没有正确的 *child。关于为什么会这样的任何建议？我已经搜索了所有内容，但没有找到解决我问题的方法。有什么建议么？

为简单起见，我省略了程序的其余部分。

```
#include <fstream>
#include <iostream>
#include <queue>
#include <iomanip>
#include <map>
#include <string>
#include <cassert>
#include <sstream>

using namespace std;
typedef unsigned int uint;

struct nodetype
{
  // constructor
  nodetype( char symbol, nodetype * left, nodetype * right) :
    symbol( symbol ), left( left ), right( right )
  { }

  char symbol;
  nodetype* left;
  nodetype* right;
};

void createDecodingTree(  nodetype* root,
                        nodetype* &iter, 
                        string &codeSubstring, 
                        char leaf )
{
string code = codeSubstring;
nodetype* newLeaf = new nodetype( leaf, NULL, NULL );

uint index = 0;
uint codeLength = code.length();
iter = root;
//traverse through the code until the second to last bit
//for( uint i = 0; i <= code.length()-1; i++ );
while( codeLength - 1 > 0 )
{
    if( code.at(index) == '0' )
    {
        if( iter->left == NULL )
        {
            nodetype* newLeft = new nodetype( '\0', NULL, NULL );
            iter->left = newLeft;
            iter = iter->left;
        }
        else{
            iter = iter->left;
        }
    }
    if( code.at(index) == '1' ) 
    {
        if( iter->right == NULL )
        {
            nodetype* newRight = new nodetype( '\0', NULL, NULL );
            iter->right = newRight;
            iter = iter->right;
        }
        else{
            iter = iter->right;
        }
    }
    codeLength--;
    index++;
}   
//now make a new leaf based on the last bit
if( code.at( code.length() - 1 ) == '0' )
    iter->left = newLeaf;
else{
    iter->right = newLeaf;
}
} 
```

这就是我初始化我的根的方式。

```
nodetype* root = new nodetype( '\0', NULL, NULL ); 
```

# java - 通过通用实际视图

> ID：16044686
> 
> 赞同：0
> 
> 时间：2013-04-16T18:43:59.363
> 
> 标签：java, android, view

我想截取应用程序的屏幕截图，即使视图会发生变化。

该应用程序会定期截取屏幕截图。

但我不知道如何通过通用的实际视图。

我试图通过`android.R.id.content`和`R.id.content`。但它只截取调用函数的视图的屏幕截图。

那么有人可以帮助我吗？

编辑：

进一步说明：

我想创建一个应用程序，它会定期截屏。即使活动/视图发生变化，应用程序也应该截取屏幕截图。例如：我点击按钮定期截图。现在我点击第二个按钮。它打开一个新视图。现在截图功能应该对实际视图进行截图。

那么我必须将什么传递给函数？因为使用 R.id.content 该函数仅从按下按钮的视图中截取屏幕截图，即使我已经使用第二个按钮更改了视图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T18:56:29.813

您可能想先看看[android-screenshot-library](https://code.google.com/p/android-screenshot-library/)

祝你好运！

# gcc - 在 C++ 中使用 avr-gcc for 意外的全局变量读取结果（局部变量访问符合预期）

> ID：16044694
> 
> 赞同：2
> 
> 时间：2013-04-16T18:44:06.847
> 
> 标签：gcc, compiler-construction, global-variables, avr, avr-gcc

在为 ATmega328 编译 avr-gcc 4.6.2 中的以下代码时，我得到了意外的全局变量读取结果：

```
#include <avr/io.h>
#include <util/delay.h>

#define LED_PORT            PORTD
#define LED_BIT             7
#define LED_DDR             DDRD

uint8_t latchingFlag;

int main() {
    LED_DDR = 0xFF;
    for (;;) {
        latchingFlag=1;
        if (latchingFlag==0) {
            LED_PORT ^= 1<<LED_BIT; // Toggle the LED
            _delay_ms(100);         // Delay
            latchingFlag = 1;
        }
    }
} 
```

这是整个代码。我希望 LED 切换永远不会执行，因为`latchingFlag`设置为`1`，但是 LED 会持续闪烁。如果`latchingFlag`声明为本地`main()`程序按预期执行：LED 永远不会闪烁。

反汇编的代码没有显示我可以看到的任何陷阱，这是使用全局变量对版本的主循环进行反汇编（延迟例程调用被注释掉；相同的行为）

```
 59                .L4:
  27:main.cpp      ****     for (;;) {
  60                    .loc 1 27 0
  61 0026 0000              nop
  62                .L3:
  28:main.cpp      ****         latchingFlag=1;
  63                    .loc 1 28 0
  64 0028 81E0              ldi r24,lo8(1)
  65 002a 8093 0000         sts latchingFlag,r24
  29:main.cpp      ****         if (latchingFlag==0) {
  66                    .loc 1 29 0
  67 002e 8091 0000         lds r24,latchingFlag
  68 0032 8823              tst r24
  69 0034 01F4              brne .L4
  30:main.cpp      ****             LED_PORT ^= 1<<LED_BIT; // Toggle the LED
  70                    .loc 1 30 0
  71 0036 8BE2              ldi r24,lo8(43)
  72 0038 90E0              ldi r25,hi8(43)
  73 003a 2BE2              ldi r18,lo8(43)
  74 003c 30E0              ldi r19,hi8(43)
  75 003e F901              movw r30,r18
  76 0040 3081              ld r19,Z
  77 0042 20E8              ldi r18,lo8(-128)
  78 0044 2327              eor r18,r19
  79 0046 FC01              movw r30,r24
  80 0048 2083              st Z,r18
  31:main.cpp      ****             latchingFlag = 1;
  81                    .loc 1 31 0
  82 004a 81E0              ldi r24,lo8(1)
  83 004c 8093 0000         sts latchingFlag,r24
  27:main.cpp      ****     for (;;) {
  84                    .loc 1 27 0
  85 0050 00C0              rjmp .L4 
```

第 71-80 行负责端口访问：根据数据表，`PORTD`地址`0x2B`为十进制`43`（参见第 71-74 行）。

变量的局部/全局声明之间的唯一区别`latchingFlag`是如何`latchingFlag`访问：全局变量版本使用`sts`（直接存储到数据空间）和`lds`（直接从数据空间加载）访问`latchingFlag`，而局部变量版本使用`ldd`（从数据间接加载） Space to Register）和`std`（Store Indirect From Register to Data Space）使用寄存器`Y`作为地址寄存器（可以用作堆栈指针，通过avr-gcc AFAIK）。以下是反汇编的相关行：

```
 63 002c 8983              std Y+1,r24

  65 002e 8981              ldd r24,Y+1

  81 004a 8983              std Y+1,r24 
```

全球版本也有`latchingFlag`.bss 部分。我真的不是将不同的全局变量和局部变量行为归因于什么。这是 avr-gcc 命令行（注意`-O0`）：

```
/usr/local/avr/bin/avr-gcc \
    -I. -g -mmcu=atmega328p -O0 \
    -fpack-struct \                                                 
    -fshort-enums \                                         
    -funsigned-bitfields \                                        
    -funsigned-char \                                                 
    -D CLOCK_SRC=8000000UL \
    -D CLOCK_PRESCALE=8UL \
    -D F_CPU="(CLOCK_SRC/CLOCK_PRESCALE)" \
    -Wall \
    -ffunction-sections \
    -fdata-sections \
    -fno-exceptions \
    -Wa,-ahlms=obj/main.lst \
    -Wno-uninitialized \
    -c main.cpp -o obj/main.o 
```

使用编译器标志，循环从反汇编中消失，但如果声明了，`-Os`则可以强制再次出现，在这种情况下，意外对我来说仍然存在。`latchingFlag``volatile`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T20:03:30.317

根据您的反汇编程序列表，`latchingFlag`全局变量位于 RAM 地址 0。该地址对应于镜像寄存器`r0`，不是全局变量的有效 RAM 地址。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T20:58:13.237

在 EE 聊天中进行了几次检查和代码比较后，我注意到我的 avr-gcc (4.7.0) 版本存储了`latchFlag`in的值`0x0100`，而[Egor Skriptunoff](https://stackoverflow.com/a/16046039/1264426)提到 SRAM 地址`0`在 OP 的汇编列表中。

查看 OP 的反汇编（avr-dump 版本），我注意到 OP 的编译器（4.6.2）将值存储在与我的编译器（版本 4.7.0）`latchFlag`不同的地址（特别是）中，后者将值存储在 address 。`0x060``latchFlag``0x0100`

我的建议是**将 avr-gcc 版本至少更新到 4.7.0 版。**4.7.0 的优点是能够再次将生成的代码与我的发现进行比较，而不是最新和最好的。

当然，如果 4.7.0 解决了这个问题，那么升级到更新的版本（如果有的话）是有害的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-18T15:43:30.530

[Egor Skriptunoff](https://stackoverflow.com/a/16046039/1264426)的建议几乎完全正确：SRAM 变量映射到错误的内存地址。`latchingFlag`变量不在地址，这`0x0100`是第一个有效的 SRAM 地址，但映射到，与寄存器`0x060`重叠。`WDTCSR`这可以在如下的反汇编行中看到：

```
lds r24, 0x0060 
```

这条线应该是`latchingFlag`从 SRAM 中加载的值，我们可以看到`0x060`使用的是 location 而不是`0x100`.

问题必须与满足两个条件[的 binutils 中的错误有关：](http://sourceware.org/bugzilla/show_bug.cgi?id=13697)

*   `--gc-sections`使用标志（编译器选项：）调用链接`-Wl,--gc-sections`器[以节省代码空间](http://gcc.gnu.org/onlinedocs/gnat_ugn_unw/Compilation-options.html)
*   您的 SRAM 变量均未初始化（即初始化为非零值）

当这两个条件都满足时，该`.data`部分将被删除。当该`.data`部分丢失时，SRAM 变量从 address 开始，`0x060`而不是`0x100`.

一种解决方案是重新安装[binutils](http://www.sourceware.org/binutils/)：当前版本已修复此错误。另一种解决方案是编辑您的链接器脚本：在 Ubuntu 上，这可能位于`/usr/lib/ldscripts`. 对于 ATmega168/328 需要编辑的脚本是`avr5.x`，但是你真的应该把它们都编辑好，否则你可能会在其他 AVR 平台上遇到这个错误。需要进行的更改如下：

```
 .data   : AT (ADDR (.text) + SIZEOF (.text))
   {
      PROVIDE (__data_start = .) ;
-     *(.data)
+     KEEP(*(.data)) 
```

所以`*(.data)`用`KEEP(*(.data))`. 这确保了该`.data`部分不会被丢弃，因此 SRAM 变量地址从`0x0100`

# php - 正则表达式删除文本中的字符串

> ID：16044698
> 
> 赞同：0
> 
> 时间：2013-04-16T18:44:26.970
> 
> 标签：php, regex, string

我需要删除

```
[PRODUCT ID=123] 
```

来自文本

```
Some random dummy [PRODUCT ID=123] text just for example [PRODUCT ID=321] 
```

其中 ID（在 = 符号之后）可以是任何数字（整数）。

我试过用 PHP

`preg_match_all("|[[^]]+](.*)[]/[^]]+]|U", $text, $out);`

但它并没有像我想象的那样工作，所以我正在尝试使用正则表达式，但目前我迷路了，我需要你的帮助。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T18:48:44.983

```
preg_replace("/\[PRODUCT ID=(\d*)\]/", '', 'Some random dummy [PRODUCT ID=123] text just for example [PRODUCT ID=321]'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T18:49:33.533

尝试这个 ：

```
$str = 'Some random dummy [PRODUCT ID=123]text just for example [PRODUCT ID=321]';
preg_replace('/\[PRODUCT ID=.*?\]/', '', $str); 
```

希望这可以帮助 ：）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T18:52:21.133

```
$a = ' ads [PRODUCT ID=123] [PRODUCT ID=4124124321] asd \ a sda s';
$a = preg_replace("~(\[PRODUCT ID=)([0-9]*)(\])~", "", $a);
echo $a;
// ads asd \ a sda s 
```

# unit-testing - 如何使用扩展抽象类的 JUnit 4 测试一个类？

> ID：16044699
> 
> 赞同：0
> 
> 时间：2013-04-16T18:44:33.330
> 
> 标签：unit-testing, junit, mocking, jmockit

我正在尝试为扩展抽象类的 java 类编写单元测试？java 类看起来有点像：

```
public class XYZFilter extends XYZDataFilter{

   @Override
   protected boolean filterItem(Model d, String sector) {

    //method code
    return true;    
   }
} 
```

junit 测试类如下所示：

```
import org.junit.Test;
import static org.junit.Assert.assertTrue;

public class XYZFilterTest {
Model m = new Model();
String sector = "SECTOR";

@Test
public void testFilterItem() throws Exception {

    System.out.println("\nTest filterItem method...");
    XYZFilter f = new XYZFilter();
    assertTrue(f.filterItem(m, sector));
}
} 
```

因此，我遇到了由 Filter 类以及 Model 类扩展的抽象 DataFilter 的问题。我相信我需要使用 JMockit 模拟这些对象，但我在弄清楚如何做到这一点时遇到了很多麻烦。任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T20:00:20.157

答案是我需要包含库，JMockit 不以这种方式处理对象。

# php - 搜索朋友链接时出现 Facebook FQL 未知错误

> ID：16044701
> 
> 赞同：0
> 
> 时间：2013-04-16T18:44:35.787
> 
> 标签：php, facebook, facebook-fql

我正在运行 FQL 查询并且我保留此错误但无法弄清楚原因，因为错误消息没有告诉我任何内容。查询和错误是：

```
SELECT backdated_time, can_backdate, caption, created_time, owner, owner_comment, picture, summary, title, url FROM link WHERE owner IN (SELECT uid2 FROM friend WHERE uid1 = me()) AND (strpos(lower(summary),"boston") >=0 OR strpos(lower(owner_comment),"boston") >=0 ) LIMIT 20

Fatal error: Uncaught Exception: 1: An unknown error occurred
  thrown in /Facebook/base_facebook.php on line 1254 
```

有谁知道为什么会出现这个错误？我正在使用 Facebook PHP 库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-27T14:38:20.153

令人窒息，查询太大了。考虑使用多查询、朋友查询的 LIMITs 和一些 OFFSET 来分页数据。

`fql?q={"friendsquery":"SELECT uid2 FROM friend WHERE uid1 = me() LIMIT 20 OFFSET 0","linkquery": "SELECT backdated_time, can_backdate, caption, created_time, owner, owner_comment, picture, summary, title, url FROM link WHERE owner IN (SELECT uid2 FROM #friendsquery) AND (strpos(lower(summary),'boston') >=0 OR strpos(lower(owner_comment),'boston') >=0 ) LIMIT 20"}`

对于 400 个好友列表，当前查询需要 80 秒。

这是 Python 中的示例，它不是 PHP，但 API 实现是相同的

```
from facepy import GraphAPI
import time
import urllib
import json

fb_dump = open('dumpfb.txt', 'w')

graph = GraphAPI('MY_ACCESS_TOKEN')

all_posts = []
offset = 0

friendsquery = 'SELECT uid2 FROM friend WHERE uid1 = me() LIMIT 20 OFFSET '+ str(offset)

linksquery = 'SELECT backdated_time, can_backdate, caption, created_time, owner, owner_comment, picture, summary, title, url FROM link WHERE owner IN (SELECT uid2 FROM #friendsquery) AND (strpos(lower(summary),"trinidad") >=0 OR strpos(lower(owner_comment),"trinidad") >=2 ) LIMIT 20'

t0 = time.time()

try:
     my_posts = graph.fql({'friendsquery': friendsquery, 'linksquery': linksquery})
     while my_posts["data"][0]["fql_result_set"]:
         all_posts = all_posts + my_posts["data"]
         offset = offset + 20
   friendsquery = 'SELECT uid2 FROM friend WHERE uid1 = me() LIMIT 20 OFFSET '+ str(offset)
     my_posts = graph.fql({'friendsquery': friendsquery, 'linksquery': linksquery})
     t1 = time.time()
     print t1-t0
     fb_dump.write(json.dumps(all_posts, indent=4))
except GraphAPI.OAuthError, e:
     print e.message 
```

进行批量查询可以使查询时间缩短到 25 秒。不快，但比前两个查询快一个订单。我没有在 PHP 中做过，但你应该明白要点

这是一批中的 20 个多查询和一个 /me/friend 调用

```
fb_dump = open('lumpfb.txt', 'w')

graph = GraphAPI('MY_ACCESS_TOKEN')

all_posts = []
offset = 0

friendsquery = 'SELECT uid2 FROM friend WHERE uid1 = me() LIMIT 20 OFFSET '

linksquery = 'SELECT backdated_time, can_backdate, caption, created_time, owner, owner_comment, picture, summary, title, url FROM link WHERE owner IN (SELECT uid2 FROM #friendsquery) AND (strpos(lower(summary),\'trinidad\') >=0 OR strpos(lower(owner_comment),\'trinidad\') >=2 ) LIMIT 20'

t0 = time.time()

batch_request = []

try:
     my_friends = graph.get("me?fields=friends")
     counter = len(my_friends["friends"]["data"])
     while counter > 0 :
     friendsquery0 = 'SELECT uid2 FROM friend WHERE uid1 = me() LIMIT 20 OFFSET '+ str(offset)
     the_query = '{"friendsquery":"'+friendsquery0+'","linksquery":"'+linksquery+'"}'
     batch_item = {"method":"GET","relative_url":"fql?q=" + the_query}
     batch_request.append(batch_item)
     offset = offset + 20
     counter = counter - 20
     my_posts = graph.batch(batch_request)
     for post in my_posts:
     all_posts = all_posts + post['data']
     t1 = time.time()
     print t1-t0
except facepy.exceptions.FacepyError, e:
     print e.message 
```

# spring-mvc - Spring Security + MVC - @Secured - 已经在 *servlet.xml 中声明了 global-method-security

> ID：16044709
> 
> 赞同：0
> 
> 时间：2013-04-16T18:45:27.057
> 
> 标签：spring-mvc, spring-security

希望有人可以帮助我。

我正在尝试使用 Spring MVC 3.0.8 配置 Spring Security 3.1，但带注释的控制器没有获得 Spring 限制的访问权限。

**web.xml**

```
<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>
        /WEB-INF/Spring/applicationContext-security.xml
        /WEB-INF/Spring/applicationContext.xml
    </param-value>
</context-param>

<filter>
    <filter-name>springSecurityFilterChain</filter-name>
    <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
</filter>

<filter-mapping>
    <filter-name>springSecurityFilterChain</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping>

<!-- Sitemash -->
<filter>
    <filter-name>sitemesh</filter-name>
    <filter-class>com.opensymphony.module.sitemesh.filter.PageFilter</filter-class>
</filter>

<filter-mapping>
    <filter-name>sitemesh</filter-name>
    <url-pattern>/*</url-pattern>
    <!-- <servlet-name>referencia</servlet-name> -->
</filter-mapping>

<!-- Spring Listeners -->

<listener>
    <listener-class>org.springframework.security.web.session.HttpSessionEventPublisher</listener-class>
</listener>
<listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener>
<listener>
    <listener-class>org.springframework.web.context.request.RequestContextListener</listener-class>
</listener>

<error-page>
    <error-code>500</error-code>
    <location>/erroInterno.jsp</location>
</error-page>

<servlet>
    <servlet-name>stc</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
</servlet>
<servlet-mapping>
    <servlet-name>stc</servlet-name>
    <url-pattern>/</url-pattern>
</servlet-mapping>

<welcome-file-list>
    <welcome-file>index.jsp</welcome-file>
</welcome-file-list>

<session-config>
    <session-timeout>30</session-timeout>
</session-config> 
```

**应用程序上下文.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans" 
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:p="http://www.springframework.org/schema/p" 
    xmlns:context="http://www.springframework.org/schema/context"
    xmlns:oxm="http://www.springframework.org/schema/oxm"
    xmlns:mvc="http://www.springframework.org/schema/mvc"
    xmlns:tx="http://www.springframework.org/schema/tx"
    xmlns:task="http://www.springframework.org/schema/task"
    xmlns:security="http://www.springframework.org/schema/security" 
    xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
            http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd
            http://www.springframework.org/schema/oxm http://www.springframework.org/schema/oxm/spring-oxm-3.0.xsd
            http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd
            http://www.springframework.org/schema/security http://www.springframework.org/schema/security/spring-security-3.1.xsd
            http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx.xsd
            http://www.springframework.org/schema/task http://www.springframework.org/schema/task/spring-task-3.0.xsd">

<!-- import the dataSource definition -->
<import resource="applicationContext-dataSource.xml"/>

<!-- Pacote base que sera scaneada por componentes annotados que serao auto-registrados como Spring beans.-->
<context:component-scan base-package="br.com.cielo.portalcontestacao" />

<!-- Ativa a detecao de annotations nas classes -->
<context:annotation-config />

<!-- Configures the annotation-driven Spring MVC Controller programming model.
Note that, with Spring 3.0, this tag works in Servlet MVC only! -->
<mvc:annotation-driven  />

<!-- Recursos utilizados nos imports das páginas -->
<mvc:resources mapping="/resources/**" location="/static/" cache-period="31556926"/>

<!-- Template para uso nos DAOs -->
<bean id="namedParameterJdbcTemplate" class="org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate">
    <constructor-arg ref="dataSource" />
</bean>

<bean id="jdbcTemplate" class="org.springframework.jdbc.core.JdbcTemplate">
    <constructor-arg ref="dataSource" />
</bean>

<task:executor id="taskExecutor" pool-size="0-3" queue-capacity="0" rejection-policy="CALLER_RUNS" keep-alive="300"/>
<task:annotation-driven executor="taskExecutor" />

<bean id="lobHandler" class="org.springframework.jdbc.support.lob.OracleLobHandler">
</bean>

<!-- Configuração de Locale -->
<bean id="localeResolver" class="org.springframework.web.servlet.i18n.SessionLocaleResolver">
    <property name="defaultLocale" value="pt_BR" />
</bean>

<!-- Annotação para controle de transações na aplicação -->
<tx:annotation-driven transaction-manager="transactionManager"/>

<!-- Indica qual o transaction manager a ser utilizado -->
<bean id="transactionManager" class="org.springframework.jdbc.datasource.DataSourceTransactionManager">
    <property name="dataSource" ref="dataSource"/>
    <property name="nestedTransactionAllowed" value="true"/>
</bean>

<!-- Mensagens do sistema --> 
<bean id="messageSource" class="org.springframework.context.support.ResourceBundleMessageSource">
   <property name="basename" value="mensagens" />
</bean>

<bean name="stcProperties" class="br.com.cielo.portalcontestacao.service.utils.STCProperties"/>

<bean name="serviceInvoker" class="br.com.cielo.portalcontestacao.service.ServiceInvokerImpl"/>
</beans> 
```

**applicationContext-security.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<beans:beans xmlns:beans="http://www.springframework.org/schema/beans"
xmlns="http://www.springframework.org/schema/security" 
xmlns:context="http://www.springframework.org/schema/context"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation=
    "http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd 
    http://www.springframework.org/schema/security http://www.springframework.org/schema/security/spring-security-3.1.xsd
    http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd">

<http pattern="/static/**" security="none"/>
<http pattern="/" security="none"/>

<http auto-config='true' disable-url-rewriting="true" use-expressions="true">
    <intercept-url pattern="/pages/login" access="anonymous or fullyAuthenticated" />
    <form-login login-page="/pages/login"  />

    <session-management session-fixation-protection="newSession">
        <concurrency-control max-sessions="1" />
    </session-management>
</http>

<beans:bean id='userDetailsService'
    class="br.com.cielo.portalcontestacao.security.UserDetailsServiceImpl">
    <beans:property name="jdbcTemplate" ref="jdbcTemplate"/>
    <beans:property name="namedParameterJdbcTemplate" ref="namedParameterJdbcTemplate"/>
</beans:bean>

<beans:bean id='stcAuthenticationProvider'
    class="br.com.cielo.portalcontestacao.security.AuthenticationProviderServiceImpl">
    <beans:property name="serviceInvoker" ref="serviceInvoker"/>
    <beans:property name="userDetailsService" ref="userDetailsService"/>
</beans:bean>

<authentication-manager erase-credentials="true">
    <authentication-provider ref='stcAuthenticationProvider' />
</authentication-manager>
</beans:beans> 
```

**stc-servlet.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<!-- DispatcherServlet application context for web tier. -->
<beans xmlns="http://www.springframework.org/schema/beans" 
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:context="http://www.springframework.org/schema/context"
    xmlns:security="http://www.springframework.org/schema/security" 
    xmlns:mvc="http://www.springframework.org/schema/mvc"
    xmlns:tx="http://www.springframework.org/schema/tx"
    xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
            http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd
            http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd
            http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx.xsd
            http://www.springframework.org/schema/security http://www.springframework.org/schema/security/spring-security-3.1.xsd">

<!--context:annotation-config/-->
<security:global-method-security secured-annotations="enabled"/>

<mvc:view-controller path="/pages/login" view-name="login"/>
<mvc:view-controller path="/pages/home" view-name="index"/>
<mvc:view-controller path="/pages/acessonegado" view-name="acessoNegado"/>

<!-- Declara as Exceptions a serem tratadas pelo framework -->
<!--bean class="br.com.cielo.portalcontestacao.service.exceptions.GenericException">
    <property name="exceptionMappings">
        <props>
            <prop key="java.lang.Exception">dataAccessFailure</prop>
            <prop key="org.springframework.web.servlet.PageNotFound">pageNotFound</prop>
            <prop key="org.springframework.dao.DataAccessException">dataAccessFailure</prop>
            <prop key="org.springframework.transaction.TransactionException">dataAccessFailure</prop>
        </props>
    </property>
</bean-->

<!-- Declaracao dos Views Resolvers utilizados na aplicacao -->
<bean class="org.springframework.web.servlet.view.XmlViewResolver">
    <property name="order" value="0" />
</bean>

<bean class="org.springframework.web.servlet.view.ResourceBundleViewResolver">
   <property name="basename" value="views"/>
   <property name="order" value="1" />
</bean>

<bean id="viewResolver" class="org.springframework.web.servlet.view.InternalResourceViewResolver">
    <property name="viewClass" value="org.springframework.web.servlet.view.JstlView"/>
    <property name="prefix" value="/WEB-INF/jsp/"/>
    <property name="suffix" value=".jsp"/>
    <property name="order" value="0" />
</bean>

<bean id="messageSource" class="org.springframework.context.support.ResourceBundleMessageSource">
    <property name="basename" value="mensagens"/>
</bean>

<bean id="multipartResolver" class="org.springframework.web.multipart.commons.CommonsMultipartResolver">
     <!-- one of the properties available; the maximum file size in bytes -->
     <property name="maxUploadSize" value="10000000" />
 </bean>
</beans> 
```

这是我希望 Spring Security 限制访问的一些类： *imports ommited*

**导入acaoArquivo.java**

```
@Secured("ROLE_SCHEDULE")
@Controller
public class ImportacaoArquivo {

    @Secured("ROLE_SCHEDULE")
    @RequestMapping(value = "/pages/schedules", method = RequestMethod.GET)
    public final ModelAndView exibirPageLinks(final HttpServletRequest request) {
        return new ModelAndView("arquivo");
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T18:54:40.377

`<security:global-method-security />`应该在声明要保护的 bean 的相同上下文中声明。

由于您的控制器是`<context:component-scan />`在根上下文中声明的 (by )，因此`<security:global-method-security />`也应该在那里声明。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T13:27:45.563

所以，这是我通过阅读不同来源收集的信息：

*   您`<security:global-method-security />`必须在**stc-servlet.xml中声明**
*   `<context:component-scan />`对于您的控制器，必须在**stc-servlet.xml**中声明。对其余 bean 的扫描可能会保留在**applicationContext.xml**中。如果您的控制器包含在一个包中并且没有其他内容（例如*br.com.cielo.portalcontestacao.controllers*），这将最有效。
*   同样在**stc-servlet.xml**你需要定义`<aop:config proxy-target-class="true" />`. 这指示 Spring 使用 CGLib 来通知方法和类，您需要这样做，因为您的控制器不实现任何接口。

替代解决方案：

*   使用常规*拦截 URL*来定义哪些端点必须是安全的。
*   在您的服务上使用`@Secured`注释，而不是在控制器上使用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-21T11:15:36.453

**从ImportacaoArquivo.java**文件中的方法中删除“final”关键字：

```
@Secured("ROLE_SCHEDULE")
@RequestMapping(value = "/pages/schedules", method = RequestMethod.GET)
public ModelAndView exibirPageLinks(final HttpServletRequest request) {
    return new ModelAndView("arquivo");
} 
```

# java - spring 和 JBoss7 中的 jndi 查找问题

> ID：16044712
> 
> 赞同：0
> 
> 时间：2013-04-16T18:45:46.417
> 
> 标签：java, spring, jboss7.x, datasource, jndi

我在我的项目中使用 Spring、JPA 和 JBoss 7。

在 jndi 查找数据源时出现以下错误，如下所示

```
ERROR [org.apache.catalina.core.ContainerBase.[jboss.web].[default-host].[/rulesUI]] (MSC service thread 1-4) StandardWrapper.Throwable: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'rulesDataSource': Invocation of init method failed; nested exception is javax.naming.NameNotFoundException: Error looking up RuleDS, service service jboss.naming.context.java.RuleDS is not started 
```

这是我在 JBoss 中配置数据源的standalone.xml。

```
<datasource jndi-name="java:/RuleDS" pool-name="rule_poc_schema" enabled="true" use-java-context="true" spy="true">
                    <connection-url>jdbc:oracle:thin:@medicare-ins.cxgvce1cqpuy.us-east-1.rds.amazonaws.com:3306:MEDICARE</connection-url>
                    <driver>oracle</driver>
                    <security>
                        <user-name>APPLICATION_MEA_DEV</user-name>
                        <password>password</password>
                    </security>
                </datasource> 
```

在我的 Spring 配置文件中，我使用以下方法访问它：

```
<jee:jndi-lookup jndi-name="java:/RuleDS" id="rulesDataSource"/> 
```

请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-06-06T04:21:15.260

可以这样试试：

在 Spring Context 我们有：

```
 <bean id="dataSource" class="org.springframework.jndi.JndiObjectFactoryBean">
        <property name="jndiName" value="java:jboss-datasource" /> 
  </bean> 
```

在 Jboss 我有这样的：

```
<datasources>
    <local-tx-datasource>
        <jndi-name>jboss-datasource</jndi-name>
        <connection-url>jdbc:mysql://127.0.0.1:3306/shoppingDB</connection-url>
        <driver-class>com.mysql.jdbc.Driver</driver-class>
        <user-name>root</user-name>
        <password>123456</password>
        <exception-sorter-class-name>
            org.jboss.resource.adapter.jdbc.vendor.MySQLExceptionSorter
        </exception-sorter-class-name>
        <metadata>
            <type-mapping>MySql</type-mapping>
        </metadata>
        <check-valid-connection-sql>select 1</check-valid-connection-sql>
    </local-tx-datasource>
</datasources> 
```

确保你已经有 spring-context jar

希望这可以帮助，

问候

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T18:55:17.600

首先，我会检查日志中的以下行：

```
[org.jboss.as.connector.subsystems.datasources] (MSC service thread 1-2) JBAS010400: Bound data source [java:/RuleDS] 
```

我也使用全名：

```
java:jboss/datasources/MyDSName 
```

也许是这样？

# mysql - 如何将多个查询合并为一个？

> ID：16044713
> 
> 赞同：-2
> 
> 时间：2013-04-16T18:45:48.737
> 
> 标签：mysql

我有桌子

```
# users
 id
 name
# images
 id
 name
# images_data
 id
 users_id
 images_id 
```

我怎么能用这样的数据请求

```
# users
 id 
 name
 images 
```

在哪里`images`保留列表图像`name`s（函数 concat_ws(',',QUERY) 之后的 4example）。输入参数`users.id`。

4例如，我有数据

```
#users
-1
-admin
--2
--manager
#images
-1
-Blackwhole
--2
--Sun
---3
---Moon
#images_data
-1
-1
-1
--2
--1
--2
---3
---2
---1 
```

我想得到

```
#users
-1
-admin
-Blackwhole,Sun
--2
--manager
--Blackwhole 
```

谢谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T20:49:11.007

你可以用[`GROUP_CONCAT`](http://dev.mysql.com/doc/refman/5.6/en/group-by-functions.html#function_group-concat)这个。

```
SELECT users.id, users.name, GROUP_CONCAT(images.name SEPARATOR ',') AS images
FROM users
LEFT JOIN images_data ON users.id = images_data.users_id
LEFT JOIN images ON images_data.images_id = images.id
GROUP BY users.id 
```

# android - 部署时 Google 地图出现 BadParcelableException

> ID：16044715
> 
> 赞同：3
> 
> 时间：2013-04-16T18:45:53.083
> 
> 标签：android, google-play-services, google-maps-android-api-2

我有 Activity 让用户选择地理范围，并通过 setResult 函数返回它们：

```
public class MyActivity extends Activity
.
.

  buttonOk.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {
            LatLngBounds bounds = map.getProjection().getVisibleRegion().latLngBounds;
            Intent result = new Intent();
            result.putExtra(RESULT_KEY_MAP_BOUNDS, bounds);
            setResult(RESULT_OK, result);
            finish();
        }
    }); 
```

调用代码是：. . .

```
 @Override
  protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    switch (requestCode) {
        case ACTIVITY_SELECT_GAME_BOUNDS:
            if (resultCode == RESULT_OK) {
                mapFragment.getView().setVisibility(View.VISIBLE);
                LatLngBounds bounds = 
                        data.getExtras().getParcelable(SelectGameBoundsActivity.RESULT_KEY_MAP_BOUNDS); 
```

当我通过 eclipse 运行时，这工作正常，但是当尝试创建一个 APK（签名或未签名）并在同一设备上运行时，我收到以下错误：

> 引起：android.os.BadParcelableException：Parcelable 协议需要在类 com.google.android.gms.maps.model.LatLngBounds 上名为 CREATOR 的 Parcelable.Creator 对象

这在线上发生：

```
LatLngBounds bounds = 
                       data.getExtras().getParcelable(SelectGameBoundsActivity.RESULT_KEY_MAP_BOUNDS); 
```

该设备正在运行最新的 Google Play 服务。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-11-15T12:14:06.210

您可能必须阻止 ProGuard 剥离所需的类。

```
-keep public class com.google.android.gms.maps.** { public *; } 
```

将此添加到您的 proguard-project.txt 文件中。

# sql - 在 SQL SERVER 2008 中结合静态列和动态列

> ID：16044718
> 
> 赞同：2
> 
> 时间：2013-04-16T18:46:20.523
> 
> 标签：sql, sql-server, sql-server-2008

我有一个包含三列和以下值的表 SchoolStudent

![在此处输入图像描述](https://i.stack.imgur.com/Iw561.png)

现在，对于学生，我们可以将动态列存储在表中，其值为：

![在此处输入图像描述](https://i.stack.imgur.com/pDi1B.png)

我想要一个查询，我可以在单个 SQL 查询中包含静态字段和动态字段。我尝试使用 Pivot 但没有成功。请就如何实现这一点提出建议。我基本上这样做是为了在前端我有一个可以通过搜索的结果集。

所以查询应该是：

```
Select 
    StudentID, FirstName, Address, MotherName, 
    MotherEmail, MotherOccupation, Mother Salary, 
    FacebookProfileName, VehicleRegNo 
from SchoolStudent 
Inner Join 
    (Logic to convert rows to columns) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T19:38:38.373

由于您有动态列，因此您将需要使用动态 SQL 来生成您想要的结果。此查询将生成第二个表中的列列表并将它们 PIVOT 然后连接到`SchoolStudent`以获取其他列：

```
DECLARE @cols AS NVARCHAR(MAX),
    @query  AS NVARCHAR(MAX)

select @cols = STUFF((SELECT distinct ',' + QUOTENAME(DynamicColumnName) 
                    from StudentDetails
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

set @query = '
         select s.studentid,
            s.firstname,
            s.address,
            d.*
         from SchoolStudent s
         inner join 
         (
            SELECT studentId,' + @cols + ' 
            from 
            (
                select studentId, dynamiccolumnname, 
                  dynamiccolumnvalue
                from StudentDetails
            ) x
            pivot 
            (
                max(dynamiccolumnvalue)
                for dynamiccolumnname in (' + @cols + ')
            ) p 
          ) d
            on s.StudentId = d.StudentId'

execute(@query); 
```

请参阅[SQL Fiddle with Demo](http://sqlfiddle.com/#!3/3ac7a4/2)。此查询给出结果：

```
| STUDENTID | FIRSTNAME |   ADDRESS | FACEBOOK PROFILE NAME | MOTHER EMAIL | MOTHER NAME | MOTHER OCCUPATION | MOTHER SALARY | VEHICLE REG NO |
-----------------------------------------------------------------------------------------------------------------------------------------------
|         4 |     admin | efewfwfew |                  ross |  ram@ram.com | ram@ram.com |       ram@ram.com |   ram@ram.com |       UP 14 as | 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T19:07:09.630

您可以使用这样的子查询格式：

```
SELECT t1.StudentID, 
       t1.FirstName, 
       t1.Address, 
       (SELECT t2.DynamicColumnValue FROM table2 t2 WHERE t2.StudentID = t1.StudentID AND t2.DynamicColumnName = 'Mother Name') AS 'MotherName',
       (SELECT t2.DynamicColumnValue FROM table2 t2 WHERE t2.StudentID = t1.StudentID AND t2.DynamicColumnName = 'Mother Email') AS 'MotherEmail'
FROM Table1 t1 
```

或者您可以像这样使用内部连接格式：

```
SELECT t1.StudentID, 
       t1.FirstName, 
       t1.Address,
       t2.DynamicColumnValue AS 'MotherName'
       t3.DynamicColumnValue AS 'MotherEmail'
FROM Table1 t1
INNER JOIN Table2 t2 ON t1.StudentID = t2.StudentID AND t2.DynamicColumnName = 'Mother Name'
INNER JOIN Table2 t3 ON t1.StudentID = t3.StudentID AND t2.DynamicColumnName = 'Mother Email' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-16T19:34:14.590

使用一些动态 sql，您可以这样做：

```
DECLARE @cols NVARCHAR(2000)
SELECT  @cols = STUFF((SELECT DISTINCT '],[' + DynamicColumnName FROM DynamicValues ORDER BY '],[' + DynamicColumnName FOR XML PATH('')), 1, 2, '') + ']'

DECLARE @query NVARCHAR(4000);
SET @query = N'select s.StudentID, s.FirstName, s.Address,'+@cols+' from SchoolStudent s
join
(
    select * from DynamicValues
    pivot (Max(DynamicColumnValue) for DynamicColumnName in ('+@cols+')) as pvt
) as b on b.StudentID=s.StudentID'
EXECUTE(@query) 
```

# asp.net - 在按钮单击时创建一个弹出框

> ID：16044719
> 
> 赞同：0
> 
> 时间：2013-04-16T18:46:28.420
> 
> 标签：asp.net, vb.net, popup

并感谢您查看我的帖子。我有一个在 Visual Studio 2010 中完成的 vb 项目。一旦用户单击提交按钮，我想要一个包含特定文本的弹出消息。我还想要一个确定和取消按钮。如果用户单击确定，则页面正常运行并提交。单击取消，页面返回以供用户编辑信息。

现在，我尝试使用 msgbox，但它在服务器端不起作用。从研究中，我发现我很可能需要使用 Jquery。我对此没有太多经验，因此不胜感激！

谢谢，

乔什

```
Protected Sub btnSubmit_Click(ByVal sender As Object, ByVal e As System.EventArgs) Handles btnSubmit.Click

    If (Not Page.IsPostBack) Then
        Me.btnSubmit.Attributes.Add("onclick", "return confirm('Please note that what you have entered will be used to auto-generate the flyer. Also, submissions less than 30 days from the date entered may be denied.');")
    End If

    Dim objRequestID As Object = Nothing
    Dim intRequestID As Integer = 0

    Try
        If ValidateForm() Then
            Using objConnection As SqlConnection = util.GetConnection()
                Using objTransaction As SqlTransaction = objConnection.BeginTransaction
                    Using objCommand As SqlCommand = New SqlCommand("Request_Insert", objConnection)
                        With objCommand
                            .CommandType = Data.CommandType.StoredProcedure
                            .Transaction = objTransaction
                            .Parameters.Add("@CourseTypeID", Data.SqlDbType.Int).Value = util.CourseRequestType.PIE
                            .Parameters.Add("@SponsorName", Data.SqlDbType.NVarChar, 50).Value = SponsorName.Text.Trim
                            .Parameters.Add("@SponsorPhone", Data.SqlDbType.NVarChar, 20).Value = SponsorPhone.Text.Trimenter code here 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T20:20:02.483

您需要将`client button onclick`事件放在`server Page_Load`事件中。

当你到达时`btnSubmit_Click`，为时已晚。

```
Protected Sub Page_Load(ByVal sender As System.Object, 
   ByVal e As System.EventArgs) Handles MyBase.Load

   If (Not Page.IsPostBack) Then
      Me.btnSubmit.Attributes.Add("onclick", "return confirm('Please...');")
   End If

End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T20:09:55.407

您可以在单击按钮时调用此 javascript

```
<script>
function myFunction()
{
  alert("I am an alert box!");
}
</script> 
```

# ruby-on-rails - 隐藏特定页面的 content_for

> ID：16044722
> 
> 赞同：1
> 
> 时间：2013-04-16T18:46:35.947
> 
> 标签：ruby-on-rails, view

我有`application.html.haml`一个带有导航顶栏的文件。在特定的页面上，我不想用这个吧。

如何告诉 Rails 不要从 application.html.haml 文件继承？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T19:07:27.750

除了使用

```
render :layout => false 
```

您还可以指定备用布局：

```
render :layout => 'no_top_bar_layout' 
```

或者，您可以在主布局中添加一个条件来检查实例变量，如果设置了该实例变量，则跳过布局的顶部栏部分。它比前两个选项有点混乱，但在某些有限的情况下可能有意义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T18:58:47.867

您可以`:layout => false`在渲染中使用特定的控制器操作。

```
def page_with_no_layout

  .....

  render :layout => false 

end 
```

# c# - Protobuf-net IsPacked=true 用于用户定义的结构

> ID：16044725
> 
> 赞同：2
> 
> 时间：2013-04-16T18:46:51.603
> 
> 标签：c#, protobuf-net

当前是否可以将 IsPacked=true 用于用户定义的结构？如果没有，那么未来是否有计划？

当我尝试将该属性应用于 ColorBGRA8[] 类型的字段时出现以下异常：*System.InvalidOperationException：只有简单的数据类型可以使用打包编码*

我的场景如下：我正在编写一个游戏，并且有大量用于各种事物的 blitable 结构，例如颜色、向量、矩阵、顶点、常量缓冲区。它们的内存布局需要在编译时精确定义，以匹配例如来自着色器的常量缓冲区布局（通常在哪里字段？需要在 16 字节边界上对齐）。

我并不是要浪费任何人的时间，但是我找不到有关此特定问题的任何最新信息。

***回答后编辑***

我目前正在测试一个解决方案，该解决方案对几乎所有内容都使用 protobuf-net，但用户定义的大型数组除外，但可以使用 blitable 结构。我所有的自定义结构数组字段都已替换为可以打包的字节数组。在 protobuf-net 完成数据反序列化后，我通过 p/invoke 使用 memcpy 以便能够再次使用自定义结构数组。

以下数字来自对一个实例进行序列化的测试，该实例包含 byte[] 或 ColorBGRA8[] 的一个字段。原始测试数据约为 38MiB 的数据，例如颜色数组中的 1000000 个条目*。*序列化是使用 MemoryStream 在内存中的一种。

编写
平台.Copy + Protobuf: 51ms, Size: 38,15 MiB
Protobuf: 2093ms, Size: 109,45 MiB

阅读
Platform.Copy + Protobuf：43ms Protobuf：2307ms

测试表明，对于包含或多或少随机数据的*庞大数组，可能会出现明显的内存开销。*如果不是（反）序列化时间，这不会有什么大不了的。我知道 protobuf-net 可能不是为我的极端情况设计的，更不用说针对它进行优化了，但这是我不愿意接受的。

我想我会坚持使用这种混合方法，因为 protobuf-net 对其他一切都非常有效。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T19:16:19.273

简直是“不适用”。引用[编码规范](https://developers.google.com/protocol-buffers/docs/encoding)：

> 只有原始数字类型（使用 varint、32 位或 64 位连线类型的类型）的重复字段才能被声明为“打包”。

这不适用于自定义结构或类。此处适用的两种方法是字符串（以长度为前缀）和组（开始/结束标记）。后者的编码通常更便宜，但谷歌更喜欢前者。

Protobuf 并非旨在任意匹配某些其他字节布局。它是自己的编码格式，仅用于处理/输出 protobuf 数据。这就像说“我正在编写 XML，但我希望它看起来像 {non-xml}”。

# ruby-on-rails - Rails：仅在执行特定生成器期间覆盖模板

> ID：16044729
> 
> 赞同：1
> 
> 时间：2013-04-16T18:47:12.450
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我创建了一个继承`Rails::Generators::ScaffoldControllerGenerator`.

Rspec 脚手架生成器由 Rails 的生成器调用。我想覆盖它的模板之一。

我已成功将我的新模板放入此文件夹：`lib/templates/rspec/scaffold/`.

然而，现在当我使用 Rails 的生成器时，我使用的是新模板而不是 Rspec 的默认模板。

有没有办法只在特定生成器的执行期间覆盖模板？

# java - 如何将结果写入 JTextArea

> ID：16044737
> 
> 赞同：2
> 
> 时间：2013-04-16T18:47:31.300
> 
> 标签：java, swing, jdbc, jtextarea

我有疑问 - 如何将结果/数据库选择写入 JTextArea。我的 JButton 的方法是：

```
public void actionPerformed(ActionEvent evt){

    try{
        Class.forName("com.mysql.jdbc.Driver");
        System.out.println("Connection OK");
        connection = DriverManager.getConnection("jdbc:mysql://localhost:3306/filisng", "root", "passw");
        statement = connection.createStatement();
        result = statement.executeQuery("select * from `filisng`.`names`");

        while(result.next()){

            String nam = result.getString("Name");
            String surnam = result.getString("Surname");

            System.out.printf("Name: %s\tSurname: %s\t\n", Name, Surname);
        }
    }catch(ClassNotFoundException ex){System.out.println("Class Not Found! " +ex);
    }catch(SQLException exception){
        System.out.println("SQL Error " + exception);
}

    } 
```

如果我使用`System.out.printf("Name: %s\tSurname: %s\t\n", Name, Surname);` - 我在控制台中看到输出，但是如何将 Text 设置为 JTextArea？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T18:49:22.387

```
textArea.append( String.format( "Name: %s\tSurname: %s\t\n", Name, Surname )); 
```

请参阅[文档](http://docs.oracle.com/javase/7/docs/api/javax/swing/JTextArea.html#append%28java.lang.String%29)。

# c# - 在 .net Web 应用程序中创建动态 UI

> ID：16044740
> 
> 赞同：3
> 
> 时间：2013-04-16T18:47:34.200
> 
> 标签：c#, asp.net, vb.net

我正在创建一个 .Net Web 应用程序。它是一个表单，文本、下拉列表、复选框等内容经常更改，因此我不想在 ascx 文件中创建标记。我想像从 xml 或类似的东西动态地创建它们。

谁能告诉我实现我的场景的最佳方法是什么？我可以在 Web 应用程序中使用 XAML 吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T19:29:09.983

如果您在表单中添加 runat="server" 标记，那么您可以在服务器端以编程方式操作其控件。

```
 <form id="form1" runat="server"></form> 
```

然后在你的服务器端代码中做这样的事情

```
var lbl = new Label();
lbl.Text = "this is my label";
form1.Controls.Add(lbl); 
```

# excel - 对象“_Global”的方法“范围”错误失败

> ID：16044743
> 
> 赞同：0
> 
> 时间：2013-04-16T18:47:38.160
> 
> 标签：excel, vba

我正在运行一个计时器。我想让计时器倒计时。这一切都有效。但是，计时器需要在不同的行中经历很多次，但在按下按钮之前不应移动到下一次。这将允许我提取倒计时的时间。

有任何想法吗？（我将完成用作按钮，它所做的只是黑色一个单元格）。我希望当我这样做时，时间会重置并转到下一栏。

```
Sub GoGo() 
```

公共 GoGo 作为布尔值

GoGo = 真

结束子

子运行（）

Dim lastrow As Long, i As Long

```
 For i = 23 To 32

           DoEvents
            If GoGo = True Then

                If Cells(i, 1) <> 0 Then

             Range("B5").Value = Cells(i, 2).Value
             Range("E5").Value = Cells(i, 3).Value
             Range("E11").Value = Range("C33").Value

             Application.Run ("Realcount")
             Application.Run ("Realcount2")

            End If
            End If

            Next i 
```

结束子

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T18:49:58.443

你不能做 Range(i, 2) 或 Range(i, 3)。你是说 Cells(i, 2) 吗？

# c - 在 execvp 中传递 awk(printf)

> ID：16044745
> 
> 赞同：2
> 
> 时间：2013-04-16T18:47:42.550
> 
> 标签：c, linux

```
char* cmd[] = { "awk", "{ printf "%-10s %10s %10s %2s %2s \t%s \n", $3,$5,$6,$7,$8,$9 }", NULL};
execvp(cmd[0], cmd);
perror("execvp of awk failed"); 
```

我正在为我的程序使用管道。我想在 C 中使用以下命令执行此命令`execvp`：

```
ls -l | awk '{ printf "%-10s %10s %10s %2s %2s \t%s \n", $3, $5,$6,$7,$8,$9 }' 
```

`printf`问题是在这种情况下我找不到正确的语法。

谁能指出我的错误是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T18:49:37.293

您需要转义命令中的所有反斜杠和双引号：

```
char* cmd[] = { 
    "awk",
    "{ printf \"%-10s %10s %10s %2s %2s \\t%s \\n\", $3, $5, $6, $7, $8, $9 }",
    NULL
}; 
```

# dns - sed - 反向 DNS 提取

> ID：16044746
> 
> 赞同：0
> 
> 时间：2013-04-16T18:47:46.067
> 
> 标签：dns, sed, extract

我正在尝试从 Microsoft 区域中提取 DNS PTR 记录，以便我可以暂存它们以将它们导入 BIND 区域。我有所有的反转，它们采用以下格式：

```
1.0.0.10.in-addr.arpa.  1200    IN  PTR my.long.domain.net.
22.0.0.10.in-addr.arpa. 1200    IN  PTR your.long.domain.net.
33.0.0.10.in-addr.arpa. 1200    IN  PTR our.long.domain.net. 
```

我要做的是提取初始八位字节（在这种情况下，每行中的 1、22 和 33 - 在开头），但是我想删除其他所有内容，一直到“PTR”物品。然后，我想保留“PTR”项以及实际的反向项（例如 my.long.domain.net。所以，我的猜测是使用 sed 和我想要最终得到的输出（使用示例从上面），将是：

```
1       PTR     my.long.domain.net.
22      PTR     your.long.domain.net.
33      PTR     our.long.domain.net. 
```

这是 sed 可以做的事情吗？我将如何去做？到目前为止，我是任何 sed 专家。

先谢谢了！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T20:10:15.217

这可能对您有用（GNU sed）：

```
sed -r 's/\..*(\sPTR)/\1/' file 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T19:17:30.800

我认为这可以满足您的要求：

```
 sed 's/\s\{1,\}/ /g;s/\([^.]*\).*PTR /\1       PTR     /;s/^\(........\) */\1/' 
```

其中一些只是为了获得您在所需输出中显示的间距，如果您想要的只是单行距字段，则可以这样做：

```
sed 's/\s\{1,\}/ /g;s/\([^.]*\).*PTR /\1 PTR /' 
```

# google-app-engine - 无法使用应用引擎数据存储

> ID：16044747
> 
> 赞同：0
> 
> 时间：2013-04-16T18:47:52.223
> 
> 标签：google-app-engine, google-cloud-datastore

我已经使用了应用引擎的入门指南。但是我无法使用数据存储区。

在运行指南中提供的简单代码时，我收到“无法访问应用程序数据”错误。

我的代码：

```
import cgi
import datetime
import urllib
import webapp2

from google.appengine.ext import db
from google.appengine.api import users

MAIN_PAGE_FOOTER_TEMPLATE = """\
<form action="/sign?%s" method="post">
  <div><textarea name="content" rows="3" cols="60"></textarea></div>
  <div><input type="submit" value="Sign Guestbook"></div>
</form>
<hr>
<form>Guestbook name: <input value="%s" name="guestbook_name">
<input type="submit" value="switch"></form>
</body>
</html>
"""

class Greeting(db.Model):
"""Models an individual Guestbook entry with author, content, and date."""
author = db.StringProperty()
content = db.StringProperty(multiline=True)
date = db.DateTimeProperty(auto_now_add=True)

def guestbook_key(guestbook_name=None):
"""Constructs a Datastore key for a Guestbook entity with guestbook_name."""
return db.Key.from_path('Guestbook', guestbook_name or 'default_guestbook')

class MainPage(webapp2.RequestHandler):

def get(self):
    self.response.write('<html><body>')
    guestbook_name = self.request.get('guestbook_name')

    # Ancestor Queries, as shown here, are strongly consistent with the High
    # Replication Datastore. Queries that span entity groups are eventually
    # consistent. If we omitted the ancestor from this query there would be
    # a slight chance that Greeting that had just been written would not
    # show up in a query.
    greetings = db.GqlQuery("SELECT * "
                            "FROM Greeting "
                            "WHERE ANCESTOR IS :1 "
                            "ORDER BY date DESC LIMIT 10",
                            guestbook_key(guestbook_name))

    for greeting in greetings:
        if greeting.author:
            self.response.write(
                '<b>%s</b> wrote:' % greeting.author)
        else:
            self.response.write('An anonymous person wrote:')
        self.response.write('<blockquote>%s</blockquote>' %
                                cgi.escape(greeting.content))

    # Write the submission form and the footer of the page
    sign_query_params = urllib.urlencode({'guestbook_name': guestbook_name})
    self.response.write(MAIN_PAGE_FOOTER_TEMPLATE %
                        (sign_query_params, cgi.escape(guestbook_name)))

class Guestbook(webapp2.RequestHandler):

def post(self):
    # We set the same parent key on the 'Greeting' to ensure each greeting
    # is in the same entity group. Queries across the single entity group
    # will be consistent. However, the write rate to a single entity group
    # should be limited to ~1/second.
    guestbook_name = self.request.get('guestbook_name')
    greeting = Greeting(parent=guestbook_key(guestbook_name))

    if users.get_current_user():
        greeting.author = users.get_current_user().nickname()

    greeting.content = self.request.get('content')
    greeting.put()

    query_params = {'guestbook_name': guestbook_name}
    self.redirect('/?' + urllib.urlencode(query_params))

app = webapp2.WSGIApplication([('/', MainPage),
                           ('/sign', Guestbook)],
                          debug=True) 
```

我已经在服务器上上传了应用程序，但仍然遇到同样的错误。

```
Traceback (most recent call last):
  File "/home/laxman/google_appengine/lib/webapp2/webapp2.py", line 1535, in __call__
rv = self.handle_exception(request, response, e)
  File "/home/laxman/google_appengine/lib/webapp2/webapp2.py", line 1529, in __call__
rv = self.router.dispatch(request, response)
  File "/home/laxman/google_appengine/lib/webapp2/webapp2.py", line 1278, in                  default_dispatcher
 return route.handler_adapter(request, response)
File "/home/laxman/google_appengine/lib/webapp2/webapp2.py", line 1102, in __call__
 return handler.dispatch()
File "/home/laxman/google_appengine/lib/webapp2/webapp2.py", line 572, in dispatch
return self.handle_exception(e, self.app.debug)
File "/home/laxman/google_appengine/lib/webapp2/webapp2.py", line 570, in dispatch
return method(*args, **kwargs)
File "/home/laxman/helloworld/helloworld.py", line 51, in get
for greeting in greetings:
File "/home/laxman/google_appengine/google/appengine/ext/db/__init__.py", line 2326, in  next
 return self.__model_class.from_entity(self.__iterator.next())
File "/home/laxman/google_appengine/google/appengine/datastore/datastore_query.py", line  2892, in next
 next_batch = self.__batcher.next()
File "/home/laxman/google_appengine/google/appengine/datastore/datastore_query.py", line  2754, in next
 return self.next_batch(self.AT_LEAST_ONE)
File "/home/laxman/google_appengine/google/appengine/datastore/datastore_query.py", line 2791, in next_batch
 batch = self.__next_batch.get_result()
File "/home/laxman/google_appengine/google/appengine/api/apiproxy_stub_map.py", line 604, in get_result
return self.__get_result_hook(self)
File "/home/laxman/google_appengine/google/appengine/datastore/datastore_query.py", line   2528, in __query_result_hook
 self._batch_shared.conn.check_rpc_success(rpc)
File "/home/laxman/google_appengine/google/appengine/datastore/datastore_rpc.py", line 1224, in check_rpc_success
 raise _ToDatastoreError(err)
BadRequestError: app "dev~helloworld" cannot access app "dev~hellolxmn"'s data 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T00:07:20.067

对于开发服务器，答案在堆栈跟踪的最后一行。

`app "dev~helloworld" cannot access app "dev~hellolxmn"'s data`

您可能有一个 app.yaml，它随着时间的推移改变了它的 appid，而您还没有创建新的数据存储。你应该向我们展示你当前的 app.yaml。

我的猜测是您的错误在产品中会有所不同，因此请显示生产中错误的跟踪。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T19:10:10.137

我复制并粘贴了您的代码，它似乎可以正常工作（我不得不更改格式）您的 app.yaml 中有什么？（我将我的文件命名为 aaa.py）这是我使用的

```
application: somename
version: 1
runtime: python27
api_version: 1
threadsafe: true

handlers:
- url: /.*
  script: aaa.app 
```

# version-control - 获取最新的 TFS 时自动创建搁置集

> ID：16044748
> 
> 赞同：0
> 
> 时间：2013-04-16T18:47:53.097
> 
> 标签：version-control, tfs

由于 TFS get-latest 操作是非事务性的，因此在发出 get latest 后无法中止合并代码。Git 和 ClearCase 都允许您退出 rebase 操作。所以我想出的一种方法是在我获得最新版本之前创建一个搁置集，这样如果有太多我不想立即处理的冲突，我可以中止并检索我的代码。

我的问题是，有没有一种方法可以在您获得最新版本时自动创建搁置集，如果存在的话，最好覆盖现有的搁置集（例如使用硬编码名称“HEAD”）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T22:00:05.643

运行以下命令将自动搁置当前工作区文件并获取最新文件：

```
tf shelve "HEAD" /comment:"Autoshelve" /replace /recursive /noprompt&tf get 
```

您可以将其存储在`.cmd`源代码管理中项目根文件夹下的文件中。

# java - Jruby Applets：（LoadError）没有要加载的文件

> ID：16044753
> 
> 赞同：0
> 
> 时间：2013-04-16T18:48:03.500
> 
> 标签：java, ruby, applet, jruby, nokogiri

我目前在尝试让 gem Nokogiri 在我的小程序中工作时遇到了真正的问题。我有 jruby-complete-1.7.3 jar 并尝试使用普通安装行安装 gem：

```
java -jar jruby-compelete-1.7.3.jar -S gem install nokogiri 
```

而且我也尝试过 Gem-In-A-Jar 方法。起初它工作正常，并允许我评估 ruby​​ 代码并存储返回的数据。当我在行中添加时出现了我的问题：

```
require 'nokogiri' 
```

虽然该行在 irb 中工作正常，但当尝试从小程序访问它时，我收到以下错误：

```
classpath:/META-INF/jruby.home/lib/ruby/shared/rubygems.rb:396 warning: can't 
canonicalize loaded names due to security restrictions; disabling

Message: (LoadError) no such file to load -- nokogiri 
```

堆栈跟踪：

```
org.jruby.exceptions.RaiseException: (LoadError) no such file to load -- nokogiri
at org.jruby.RubyKernel.require(org/jruby/RubyKernel.java:1027)
at RUBY.require(classpath:/META-INF/jruby.home/lib/ruby/shared/rubygems/custom_require.rb:36)
at RUBY.(root)(<script>:2) 
```

我根本无法弄清楚为什么会发生这个异常。我试过了：

*   手动将 gem 移动到“META-INF/jruby.home/lib/ruby/gems/shared”文件夹中
*   我在 nokogiri 调用上方添加了“需要'rubygems'”。
*   通过 Gems-in-a-jar 方法访问 gem：http: [//blog.nicksieger.com/articles/2009/01/10/jruby-1-1-6-gems-in-a-jar/](http://blog.nicksieger.com/articles/2009/01/10/jruby-1-1-6-gems-in-a-jar/)

如果有人知道我哪里出错了，或者这个问题的解决方案，我将不胜感激。

# django - heroku、postgreSQL、django、comments、tastepie：没有运算符匹配给定的名称和参数类型。您可能需要添加显式类型转换

> ID：16044754
> 
> 赞同：21
> 
> 时间：2013-04-16T18:48:13.027
> 
> 标签：django, postgresql, heroku, tastypie, django-comments

我对 django 的内置评论模型有一个简单的查询，并使用 heroku 的 postgreSQL 数据库得到以下错误：

```
DatabaseError: operator does not exist: integer = text LINE 1: 
... INNER JOIN "django_comments" ON ("pi ns_pin"."id" = "django_...
                                                         ^
HINT:  No operator matches the given name and argument type(s). 
You might need to add explicit type casts. 
```

在谷歌搜索之后，似乎这个错误已经在 django 中多次解决，但我仍然得到它（所有相关问题都在 3-5 年前关闭）。我正在使用 django 1.4 版和最新版本的 sweetpie。

该查询是在 orm 过滤器下进行的，并且可以与我的开发数据库（sqlite3）完美配合：

```
class MyResource(ModelResource):    

    comments = fields.ToManyField('my.api.api.CmntResource', 'comments', full=True, null=True)

    def build_filters(self, filters=None):
        if filters is None:
            filters = {}

        orm_filters = super(MyResource, self).build_filters(filters)

        if 'cmnts' in filters:
            orm_filters['comments__user__id__exact'] = filters['cmnts']

class CmntResource(ModelResource):
    user = fields.ToOneField('my.api.api.UserResource', 'user', full=True)
    site_id = fields.CharField(attribute = 'site_id')
    content_object = GenericForeignKeyField({
        My: MyResource,
    }, 'content_object')
    username = fields.CharField(attribute = 'user__username', null=True)
    user_id = fields.CharField(attribute = 'user__id', null=True) 
```

有没有人在不编写原始 SQL 的情况下解决此错误的经验？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-04-16T22:03:52.543

PostgreSQL 是“强类型”的——也就是说，每个查询中的每个值都有一个特定的类型，或者显式定义（例如，表中列的类型）或隐式定义（例如，输入到`WHERE`子句中的值）。所有函数和运算符，包括`=`，都必须定义为接受特定类型 - 例如，有一个运算符用于`VarChar = VarChar`，而另一个运算符用于`int = int`。

在您的情况下，您有一个明确定义为 type 的列`int`，但是您将它与 PostgreSQL 解释为 type 的值进行比较`text`。

另一方面，SQLite 是“弱类型” - 值被自由地视为最适合正在执行的操作的任何类型。因此，在您的开发 SQLite 数据库中，`'42' = 42`可以很好地计算操作，其中 PostgreSQL 需要一个特定的定义`VarChar = int`（或者`text = int`，`text`作为 PostgreSQL 中无界字符串的类型）。

现在，PostgreSQL*有时*会有所帮助并自动“转换”您的值以使类型与已知运算符匹配，但更常见的是，正如提示所说，您需要明确地执行此操作。如果您自己编写 SQL，则显式类型案例可能类似于`WHERE id = CAST('42' AS INT)`(或`WHERE CAST(id AS text) = '42'`)。

既然你不是，你需要确保你给查询生成器的输入是一个实际的整数，而不仅仅是一个恰好由数字组成的字符串。我怀疑这就像使用`fields.IntegerField`而不是一样简单`fields.CharField`，但我实际上并不了解 Django，甚至不了解 Python，所以我想我会给你背景知识，希望你能从那里学到它。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-17T04:24:28.973

基于 IMSoP 的回答：当通用外键使用文本字段作为 object_id 并且对象的 id 字段不是文本字段时，这是 django 的 ORM 层的限制。Django 不想做任何假设或将对象的 id 转换为它不是的东西。[我在http://charlesleifer.com/blog/working-around-django-s-orm-to-do-interesting-things-with-gfks/](http://charlesleifer.com/blog/working-around-django-s-orm-to-do-interesting-things-with-gfks/)上找到了一篇很棒的文章。

这篇文章的作者 Charles Leifer 为受此影响的查询提出了一个非常酷的解决方案，并且在处理这个问题时非常有用。

或者，我设法让我的查询按如下方式工作：

```
if 'cmnts' in filters:
    comments = Comment.objects.filter(user__id=filters['cmnts'], content_type__name = 'my',   site_id=settings.SITE_ID ).values_list('object_pk', flat=True)
    comments = [int(c) for c in comments]
    orm_filters['pk__in'] = comments 
```

最初我正在寻找一种类似于查尔斯所做的修改 SQL 的方法，但事实证明我所要做的就是将查询分成两部分并将 str(id)'s 转换为 int(id)' s。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-02T22:56:16.300

为了不破解您的 ORM 和外部软件 postgres，您可以注册自己的演员表并比较操作。[请查看类似问题中的示例](https://stackoverflow.com/questions/20773805/postgresql-enum-and-character-varying-updating/43748427#43748427)。

# iphone - 如何使用 NSJSONSerialization 类将数据发布到基于 JSON 的 REST API？

> ID：16044756
> 
> 赞同：1
> 
> 时间：2013-04-16T18:48:18.163
> 
> 标签：iphone, ios, objective-c, nsjsonserialization

我想看一些关于如何使用 NSJSONSerialization 类从 URL 获取和发布数据的具体示例/教程。

我知道如何实际获取数据，这是在某种程度上令人困惑的 POST。任何有用的指针将不胜感激..

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-16T18:55:40.477

您不使用`NSJSONSerialization`该类发布数据。您改为使用`NSURL*`API（`NSURL`、`NSURLConnection`、`NSURLRequest`等）。

```
NSURL *url = [NSURL URLWithString:@"http://example.com/foo.php"];
NSMutableURLRequest *rq = [NSMutableURLRequest requestWithURL:url];
[rq setHTTPMethod:@"POST"];

NSData *jsonData = [@"{ \"foo\": 1337 }" dataUsingEncoding:NSUTF8StringEncoding];
[rq setHTTPBody:jsonData];

[rq setValue:@"application/json" forHTTPHeaderField:@"Content-Type"];
[rq setValue:[NSString stringWithFormat:@"%ld", (long)[jsonData length]] forHTTPHeaderField:@"Content-Length"];

[NSURLConnection sendAsynchronousRequest:rq completion:^(NSURLResponse *rsp, NSData *data, NSError *err) {
    NSLog(@"POST sent!");
}]; 
```

# jms - JMS 消息直到接收方超时才传递

> ID：16044757
> 
> 赞同：0
> 
> 时间：2013-04-16T18:48:19.500
> 
> 标签：jms, message-queue

在我的应用程序中，我使用 MDB 侦听来自队列的消息，然后将请求消息发布到另一个队列。这种将消息发布到另一个队列的过程发生在 MDB 中。然后我使用接收方法等待响应，超时时间为 20 秒。现在发生的情况是，我发布到队列的请求消息在 20 秒内没有被传递。消息在 20 秒后送达，但此时接收方法返回，我们无法处理收到的请求响应。

我没有使用事务处理会话将消息发布到队列。请告诉我为什么在超时期限之前没有发送消息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T20:31:04.593

使用 MDB 表明您在某种 Java EE 服务器中运行。您确定没有为您的 MDB 和 JMS 会话启用分布式 (JTA) 事务吗？这将解释在您的方法返回之前没有传递请求消息。即使会话事务被指定为假，也可以启用 JTA 事务。

这篇[博](http://frankkieviet.blogspot.se/2006/08/jms-requestreply-from-ejb.html)文很好地介绍了这个案例，尽管它有点旧了。

简短的回答是在开始等待回复之前使用 UserTransaction 并提交请求事务。

# php - 删除代码空白 (WordPress)

> ID：16044758
> 
> 赞同：1
> 
> 时间：2013-04-16T18:48:25.477
> 
> 标签：php, html, wordpress

基本上我有一个 WordPress 循环，我需要压缩所有代码，并像这样剥离所有不必要的空白：

```
<article><p>Content</p></article><article><p>Content</p></article><article><p>Content</p></article> 
```

我正在使用以下方法包含循环文件：

```
<?php get_template_part('library/inc/loop'); ?> 
```

只是想知道是否有一种简单的方法，例如：

```
<?php trim( get_template_part('library/inc/loop') ); ?> 
```

如果这是可能的，我的所有问题都将得到解决，非常感谢任何帮助。干杯!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T19:20:04.327

要删除 HTML 元素中的所有前导和尾随空格，您可以使用

```
// Remove whitespace before '<'
$html = preg_replace('~\s+<~', '<', $html);
// Remove whitespace after '>'
$html = preg_replace('~>\s+~', '>', $html); 
```

这将使文本中的任何空白保持不变。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T18:55:08.760

我对 WordPress 的“后端”不太熟悉，但是你可以试试

`str_replace(" ","",$data);//Find whitespace " " and replace with ""`

澄清一下：输出时的空格，还是源代码中的空格？

或者正如您尝试使用修剪（）。我希望这可以帮助你。

# wpf - Wpf 行无法正确显示

> ID：16044764
> 
> 赞同：1
> 
> 时间：2013-04-16T18:48:42.213
> 
> 标签：wpf, xaml, user-interface

我正在尝试显示我在 wpf 中设计的多个用户控件，但它们的行显示不正确

有一张图片来描述这个问题： ![在此处输入图像描述](https://i.stack.imgur.com/KSEI2.png)

这是我用于绘制线条的 xaml 代码：

```
<Line Grid.Row="1" X1="30" Y1="20" X2="340" Y2="20" Stroke="LightCyan" StrokeThickness="0.1"/>
    <Line Grid.Row="1" X1="30" Y1="35" X2="340" Y2="35" Stroke="LightCyan" StrokeThickness="0.1"/>
    <Line Grid.Row="1" X1="30" Y1="50" X2="340" Y2="50" Stroke="LightCyan" StrokeThickness="0.1"/>
    <Line Grid.Row="1" X1="30" Y1="65" X2="340" Y2="65" Stroke="LightCyan" StrokeThickness="0.1"/>
    <Line Grid.Row="1" X1="30" Y1="80" X2="340" Y2="80" Stroke="LightCyan" StrokeThickness="0.1"/>
    <Line Grid.Row="1" X1="30" Y1="95" X2="340" Y2="95" Stroke="LightCyan" StrokeThickness="0.1"/>
    <Line Grid.Row="1" X1="30" Y1="110" X2="340" Y2="110" Stroke="LightCyan" StrokeThickness="0.1"/>

    <Line Grid.Row="1" X1="30" Y1="10" X2="30" Y2="110" Stroke="LightCyan" StrokeThickness="0.1"/>
    <Line Grid.Row="1" X1="99" Y1="10" X2="99" Y2="110" Stroke="LightCyan" StrokeThickness="0.1"/>
    <Line Grid.Row="1" X1="177" Y1="10" X2="177" Y2="110" Stroke="LightCyan" StrokeThickness="0.1"/>
    <Line Grid.Row="1" X1="256" Y1="10" X2="256" Y2="110" Stroke="LightCyan" StrokeThickness="0.1"/>
    <Line Grid.Row="1" X1="340" Y1="10" X2="340" Y2="110" Stroke="LightCyan" StrokeThickness="0.1"/> 
```

它是一个简单的代码，我在这里找不到问题...

奇怪的是，当我调整窗口大小时，它有时会正确显示线条。

# php - 如何将 Symfony2 表单与数组（不是请求）绑定？

> ID：16044765
> 
> 赞同：5
> 
> 时间：2013-04-16T18:48:42.947
> 
> 标签：php, symfony

假设我有一个包含一堆字段的 HTML 表单。一些字段属于产品，一些属于订单，一些属于其他。提交表单后，我想接受该请求，然后在控制器中为 Product、Order 和 Other 创建 Symfony 表单。然后我想获取部分表单数据并将其与适当的表单绑定。一个例子是这样的：

```
$productArray = array('name'=>$request->get('name'));
$pf = $this->createForm(new \MyBundle\Form\ProductType(), $product);
$pf->bind($productArray);
if($pf->isValid()) {
  // submit product data
}

// Do same for Order (but use order data)

// Do same for Other (but use other data) 
```

问题是当我尝试这样做时，我无法让 $form->isValid() 方法工作。似乎 bind() 步骤失败了。我怀疑它可能与表单令牌有关，但我不确定如何修复它。同样，我在视图中构建了自己的 HTML 表单（我没有使用 form_widget()，因为它需要以某种方式将一堆 FormTypes 合并为一个复杂的东西）。我只想要一种非常简单的方法来使用基本的 HTML 表单和 Symfony 表单功能集。

谁能告诉我 Symfony 甚至可以做到这一点，我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T19:43:07.077

您需要禁用 CSRF 令牌才能手动绑定数据。

为此，您可以`csrf_protection`在创建表单对象时传递该选项。

像这样：

```
$pf = $this->createForm(new \MyBundle\Form\ProductType(), $product, array(
    'csrf_protection' => false
)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-09T13:30:46.977

我觉得您可能需要一个嵌入其他表单的表单：

```
// Main form
$builder
    ->add('product', new ProductType)
    ->add('order', new OrderType); 
```

并拥有一个包含与您绑定到请求的其他对象的关联的对象。就像这样，您只需将一个对象与请求绑定并通过简单的 getter 访问嵌入的对象。

我够清楚吗？

# html - 将 html 内容与站点的其余部分隔离开来

> ID：16044774
> 
> 赞同：2
> 
> 时间：2013-04-16T18:49:00.127
> 
> 标签：html, css

我正在开发一个几乎充当基于 Web 的电子邮件客户端的系统。这是一个支持桌面系统。系统显示收到的电子邮件；想想基于 Web 的电子邮件客户端。现在我的问题是存在影响应用程序其余部分的可怕的 Microsoft Word 格式样式元数据。

我尝试过 iframe，但调整内容的高度效果不佳；而且我真的不想使用 iframe。

我可以使用什么模式或做法来隔离呈现在前端的电子邮件 html，以便它不会影响应用程序的其余部分？我的意思是，Gmail、Yahoo Mail、支持台或 CRM 系统将如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T19:06:18.837

有几种方法 - 顺便说一句，我在开发共享点站点时遇到了同样的问题，因为主样式会影响我的样式，而我无法访问母版页。

1.  包装您的代码，并使用 ID 选择器来缩小您需要设置样式的元素
2.  使用`!important`- 我不推荐这种方法，因为它不是最佳实践

**示例 HTML：**

```
<div id="wrapper">
    <p class="email-par">Some text</p>
</div> 
```

**CSS：**

```
#wrapper .email-par{
    font-size: 1.1em;
} 
```

因此，即使有其他样式影响`<p>`您网站上的标签，电子邮件段落也会采用上述样式。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-16T21:37:31.113

在您的 html 上使用强 ID，然后为您的电子邮件内容创建一个 CSS 文件。如果某些 SharePoint 样式仍然覆盖您的样式，我建议您使用 !important

拥有自己的 CSS 文件后，使用 SharePoint 设计器将其复制到母版页库 (_catalogs/mastrpage)

在母版页的标题区域调用它，如下例所示

```
<SharePoint:CssRegistration name="<%$SPUrl:~sitecollection/_catalogs/masterpage/bindtuning.css%>" runat="server" after="SharepointCssFile" /> 
```

# c# - 构建数据库表观察器

> ID：16044776
> 
> 赞同：0
> 
> 时间：2013-04-16T18:49:05.347
> 
> 标签：c#, asp.net-mvc, windows-services, signalr, watch

我需要能够观察表格的变化并在添加新记录时执行一些操作。

基本上我想做的是：

*   观看表格以获取新记录。
*   添加新记录后，通过 SignalR 向所有连接的用户推送消息。

Windows 服务是最好的解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T09:26:18.010

一个糟糕的想法是创建一个直接调用您的 Web 服务的 CLR 触发器。我之前在紧要关头做过这个并且它有效，它只是不是超级快或好的做法。但它有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T19:01:18.417

您可以创建一个插入触发器来写入另一个表之类的`NewData`东西。然后，您可以创建一个服务（一个 Windows 服务就可以了），它会定期检查`NewData`表的写入情况。处理完 中的每一行后`NewData`，您可以删除该行，然后等待下一行。

现在，如果您尝试通知已登录的用户，则必须使用一些 AJAX 或不断刷新页面中的功能以查看服务器端发生的情况。

# ios - Phonegap iOS Safari 调试工作流程

> ID：16044779
> 
> 赞同：2
> 
> 时间：2013-04-16T18:49:15.147
> 
> 标签：ios, cordova, safari, phonegap-build

我一直在使用此处概述的类似工作流程测试 Phonegap Build：

[教程：开发 PhoneGap 应用程序](http://coenraets.org/blog/phonegap-tutorial/)

我可以构建并部署到我的设备，但无法通过 Safari 进行远程调试，如此处的答案所述：

[您能说出 Phonegap iOS 应用程序中的调试过程吗？](https://stackoverflow.com/questions/12795783/could-you-tell-be-debug-process-in-phonegap-ios-application)

我通过移动浏览器调试应用程序没有问题，但已安装的应用程序本身没有显示在 Safari 的开发菜单中。

我正在通过 xCode 将我的应用程序传输到我的手机，并在 Phonegap 构建界面中启用了调试，但 Weinre 调试服务似乎已关闭。理想情况下，我想通过 Safari 来解决这个问题，有人可以分享他们的调试工作流程吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T19:05:59.370

当您说“本机应用程序”时，您实际上是指部署到您设备上的 Phonegap 应用程序？

这是我的做法。它适用于 iOS 模拟器和实际设备：

1.  打开设置 > Safari > 高级并确保启用“Web Inspector”
2.  使用 Xcode 连接设备并部署 Phonegap 应用程序
3.  等待应用程序启动并导航到我桌面上的 Safari，然后在开发菜单中找到我的设备名称

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-07T02:06:09.690

[确保在Settings > Safari > Advanced > WebInspector](http://moduscreate.com/enable-remote-web-inspector-in-ios-6/)中启用了 Web Inspector 。

# c++ - 带有指向对象的指针的运算符函数

> ID：16044784
> 
> 赞同：1
> 
> 时间：2013-04-16T18:49:29.957
> 
> 标签：c++, pointers, operator-overloading

一个新手问题。假设我们有两个来自随机类的对象，保存在指针中，如下所示：

```
 RandomClass *obj1 = new RandomClass;
   RandomClass *obj2 = new RandomClass; 
```

现在，当您从这些对象调用函数时，您可以简单地这样做：

```
 obj1->randomFunction(); 
```

但是如何使用该类中的运算符函数，例如重载的乘法运算符（带有普通对象）：

```
 obj1 * obj2 
```

如果不可能，你将如何解决这个问题（编写新函数是不可能的）。抱歉，如果这可能是一个愚蠢的问题，但我对它如何与指针算术等一起工作感到有点困惑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T18:51:46.020

您可以像这样取消引用指针：

```
RandomClass *obj3 = new RandomClass();
*obj3 = (*obj1) * (*obj2); 
```

如果您不再需要相乘的两个对象，请不要忘记适当地清除内存，因为上面的代码将在堆上为`obj3`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T18:54:02.813

第一段代码不是有效的 C++（看起来更像 Java）。这是有效的 C++：

```
RandomClass* obj1 = new RandomClass;
RandomClass* obj2 = new RandomClass; 
```

`obj1`要将and指向的对象相乘，请取消对`obj2`它们的引用 ( `*obj1`and `*obj2`)。代码可能如下所示：

```
(*obj1) * (*obj2) 
```

`obj1`是一个指针；`*obj1`是它指向的东西。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-16T18:54:20.157

我假设你的意思是

```
RandomClass *obj1 = new RandomClass();
RandomClass *obj2 = new RandomClass(); 
```

如果你想将两者相乘，你需要尊重指针以获得实际值。

```
multRes = (*obj1) * (*obj2); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-16T18:51:24.263

1.  如果您的变量是指针，则`*`在声明它们时需要 a 。我认为您也打算有两个不同的变量：

    ```
    RandomClass *obj1 = new RandomClass;
    RandomClass *obj2 = new RandomClass; 
    ```

2.  取消引用指针：

    ```
    result = *obj1 * *obj2; 
    ```

# ruby-on-rails - Rails 模型未设置属性

> ID：16044789
> 
> 赞同：0
> 
> 时间：2013-04-16T18:49:40.327
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.2, ruby-1.9.3

我对 Rails 开发非常陌生

导轨 3.2.13 / 红宝石 1.9.3

我有这个模型

```
class Post < ActiveRecord::Base
    attr_accessible :content, :title
    attr_accessor :testing

    def asignar
        title = "hey"
    end
end 
```

然后当我进入 rails 控制台时：

```
irb(main):004:0* post = Post.new
=> #<Post id: nil, title: nil, content: nil, created_at: nil, updated_at: nil>
irb(main):005:0> post.asignar
=> "hey"
irb(main):006:0> post.title
=> nil 
```

这正常吗？我是否总是要保存对象以便能够获取属性？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T18:57:00.737

试试这个：

```
def asignar
    self.title = "hey"
end 
```

# android - 运行 Android 2.x 时布局中的全尺寸水平进度条

> ID：16044790
> 
> 赞同：1
> 
> 时间：2013-04-16T18:49:42.263
> 
> 标签：android, android-layout, android-progressbar, android-compatibility

以下是列表视图项的非常*简化*的布局，它可以在多个不同的 android 4.x 设备上按预期运行，但不能在 android 2.3（设备和模拟器）上运行。

**预期：**进度条应覆盖该项目的整个背景，水平和垂直。 ![预期的](https://i.stack.imgur.com/NIbR6.png)

**在 Android 2.3 上：**当进度设置 > 0 时，进度条始终显示为已满，并且高度未覆盖整个项目，仅覆盖顶部。 ![不工作](https://i.stack.imgur.com/kubeO.png)

布局xml：

```
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/shadowBackgroundHolder"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:background="@drawable/selected_shadow_top_and_bottom" >

    <ProgressBar
        android:id="@+id/progressBar"
        style="?android:attr/progressBarStyleHorizontal"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_margin="0dp"
        android:padding="0dp"
        android:progressDrawable="@drawable/progress_timer" />

    <TextView
        android:id="@+id/currentTime"
        android:layout_width="wrap_content"
        android:layout_height="50dp" />

    <TextView
        android:id="@+id/timer_name"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" />

</FrameLayout> 
```

我尝试了不同的东西等，包括进度条最大值，以编程方式和在 xml 中。我尝试使用相对布局（和隐式 z 排序）而不是框架布局，同样的问题。0dp 填充和边距也无关紧要。

有趣的是，当使用 wrap_content 作为宽度时，也会出现同样的问题，尽管会显示一个较短的进度条，但当进度设置为大于 0 时仍然总是填充。在此示例中，其中一个 TextView 的 50dp 高度只是为了清楚地显示截图中的问题，没关系。

其他人能否证实这一点，甚至更好地知道为什么行为不同？更好的是，解决方法或解决方案？

我可以让进度条在 2.x 设备上使用不同的布局完全不涉及使其覆盖整个高度。这是在当前版本的应用程序中，但下一个版本将利用整个项目高度来代替进度。为 2.x 设备选择该解决方案并不是最佳解决方案。

**更新：**使用 RelativeLayout 的示例，我可以让它覆盖整个高度，但*进度总是 full*。在进度条元素上使用以下附加属性：

```
android:layout_alignBottom="@id/content"
android:layout_alignLeft="@id/content"
android:layout_alignTop="@id/content" 
```

在 Android 2.3 设备上，确实是全高度，但如果进度 > 0，进度仍然是满的： ![示例问题 2](https://i.stack.imgur.com/zHfdd.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T21:06:12.087

好的，对于我之前的评论，我很抱歉，我查看了我的代码库并发现该错误与 ProgressBar 实现本身有关。

所以我冒险创建了一个扩展**TextView**但具有**ProgressBar**外观的视图。随意复制它并根据需要对其进行改进。

```
import android.widget.TextView;

import android.content.Context;
import android.graphics.Canvas;
import android.graphics.Color;
import android.graphics.Paint;
import android.graphics.Paint.Style;
import android.graphics.Rect;
import android.util.AttributeSet;
import android.util.Log;

public class ProgressTextView extends TextView {
private float mProgress = 0;
private int progressColor;
private int backgroundColor;
private Paint strokePaint;
private static final String tag = ProgressTextView.class.getSimpleName();

public ProgressTextView(Context context) {
    super(context);
}
public ProgressTextView(Context context, AttributeSet attrs) {
    super(context, attrs);
}
public ProgressTextView(Context context, AttributeSet attrs, int defStyle) {
    super(context, attrs, defStyle);

}

@Override
public void draw(Canvas canvas) {
        canvas.save();
        setBackgroundColor(progressColor);
        canvas.clipRect(new Rect(0, 0, (int)(getWidth() * mProgress ), getHeight()));
        super.draw(canvas);
        canvas.restore();
        setBackgroundColor(backgroundColor);
        canvas.clipRect(new Rect((int)(getWidth() * mProgress), 0, getWidth(), getHeight()));
        super.draw(canvas);
        Rect rect = canvas.getClipBounds();
        if(strokePaint != null) {
            canvas.drawRect(rect, strokePaint);
        }
        canvas.restore();

}

public void setProgressColor(int color){
    progressColor = color;
}
public void setProgress(int progress) {
    if (progress > 100) {
        return;
    }
    if (mProgress == 0) {
        backgroundColor =Color.GRAY;
    }
    strokePaint = new Paint();
    strokePaint.setColor(progressColor);
    strokePaint.setStrokeWidth(5);
    strokePaint.setStyle(Style.STROKE);
    mProgress    = progress/ (float) 100;
    Log.i(tag, "update progress: " + mProgress);

    invalidate();
}
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T19:35:57.423

我有一个类似的问题。这个进度条现在对我有用：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical"
tools:context=".MoDa" >

<TextView
    android:id="@+id/title"
    style="?textTitle"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:text="@string/app_name" />

<ProgressBar
    android:id="@+id/progressbar"
    style="?android:attr/progressBarStyleHorizontal"
    android:layout_width="fill_parent"
    android:layout_height="8dp"
    android:max="100"
    android:visibility="gone" />

<FrameLayout
    android:id="@+id/frame"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_gravity="top|center_horizontal"
    android:orientation="horizontal" > 
```

（更多布局如下）进度条在 TextView 下方是全宽的

希望这可以帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T18:41:22.617

如果使用上面“更新”部分中的版本并且我作弊并在更新进度后添加它，它也可以在 Android 2.x 上“工作”：

```
if (!Application.hasHoneycomb()) {
    LayoutParams layoutParams = progressBar.getLayoutParams();
    layoutParams.width = ((View) progressBar.getParent()).getWidth() * progressBar.getProgress() / progressBar.getMax();
    progressBar.setLayoutParams(layoutParams);
} 
```

所以进度**仍然**是满的，只是改变了整个进度条的大小（宽度）。不过，这可能不是很有效……这是一种解决方法，但远非真正的解决方案。

# jquery - Jquery在多个div上淡入淡出

> ID：16044791
> 
> 赞同：0
> 
> 时间：2013-04-16T18:49:43.340
> 
> 标签：jquery, jquery-animate, fadein, fadeout

我正在使用脚本来淡入和淡出 div。它在一个上运行良好，但在另一个上根本不行。有谁知道为什么？这是它的小提琴[http://jsfiddle.net/MeEc6/](http://jsfiddle.net/MeEc6/)

这是 JavaScript：

```
$(document).ready(function()                         

    {  var book = $('#book');
       var synopsis = $('#synopsis');
function runIt() {
   synopsis.animate({opacity:'+=1'}, 1000);
   synopsis.animate({opacity:'-=0.9'}, 2000, runIt).delay(2000);
}
       runIt();}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T18:54:14.050

据我所知，你想在 and 上做同样的动画`book`，`synopsis`但你只包括`animate`方法 on `synopsis`：

[**例子**](http://jsfiddle.net/MeEc6/1/)

```
function runIt() {
   synopsis.animate({opacity:'+=1'}, 1000);
   synopsis.animate({opacity:'-=0.9'}, 2000, runIt).delay(2000);

   book.animate({opacity:'+=1'}, 1000);
   book.animate({opacity:'-=0.9'}, 2000, runIt).delay(2000);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T18:55:15.363

为两者添加一个类：http: [//jsfiddle.net/MeEc6/3/](http://jsfiddle.net/MeEc6/3/)

```
<div id="synopsis" class="fader">
    <img src="http://www.unearthingfilm.com/images/interface/shine.png" width="150" height="150" />
</div>
<!-- End of Synopsis -->
<div id="book" class="fader">
    <img src="http://www.unearthingfilm.com/images/bookGlow.png" width="365" height="347" />
</div> 
```

并制作动画：

```
var synopsis = $('.fader'); 
```

# c# - ASP.NET 工作线程是否大部分活动时间都处于阻塞状态？

> ID：16044792
> 
> 赞同：11
> 
> 时间：2013-04-16T18:49:44.077
> 
> 标签：c#, asp.net

我正在尝试确定 ASP.NET 工作线程的角色。我的 IIS 7 安装默认允许最多 25 个工作线程，否则我会将其设置为 1。

当用户请求`.aspx`页面时，我知道该请求将检索工作线程。但是该页面上每个图像的加载是否也占用了一个工作线程？一旦检索到图像，检索它的工作线程是否也负责将其传输给用户（通过阻塞 TCP 套接字？）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T19:55:33.677

让我们看一下对 ASPX 页面的 Web 请求在用户及其浏览器中的外观。

用户将浏览器导航到 ASPX 页面。在服务器上，IIS 将此识别为 ASP.NET 请求并将其路由到 .NET 处理程序进行处理，其中包括获取工作线程、处理页面并将生成的 HTML 传递回用户的浏览器。这不包括交付实际的图像、JavaScript 文件、CSS 文件和其他外部资源 - 只是从页面本身生成的 HTML 返回到用户的浏览器。

当用户的浏览器呈现页面时，它会对页面上的其他资源（图像、JavaScript 文件等）发出额外的请求。当 IIS 接收到对这些文件的请求时，它会将它们作为静态内容处理，因此 ASP .NET 处理程序（及其工作进程）不参与处理或交付内容。

请注意，您*可以*将 IIS 配置为使用 .NET 处理程序来处理这些类型的请求，但对于静态内容，IIS 不会开箱即用地执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T19:14:14.787

IIS 7 的安装程序在安装时包括“Common Http Features->Static Content”。这个模块负责处理静态内容，我不相信它使用任何工作线程。

一个工作线程似乎有点微不足道，即使对于测试服务器也是如此。如果您的代码进入一个长进程（比如一个长查询），您将被阻止运行其他页面等待单个工作进程。是什么促使您希望将其设置为 1？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T19:14:37.040

我不确定您说的是哪个 IIS 版本，所以[这是](http://forums.iis.net/t/1139229.aspx/1)我在 v5.1 上读到的一些内容。

> 使用 ASPCompat 和会话状态时，运行时可能会将对同一会话的请求序列化到单个线程。
> 
> 否则，默认情况下，如果您向应用程序向睡眠页面发出 12 个请求，ASP.NET 将使每个后续请求等待，直到一个线程被前一个请求释放。您可以通过和配置设置 (machine.config) 控制此行为，其中并发线程数是 maxWorkerThreads 和 minFreeThreads 之间的差异。还请仔细检查这些设置是否设置为使您的应用程序只能同时处理一个 ASP.NET 请求。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-16T20:09:41.213

是的，如果您的 asp.net 应用程序代码中有阻塞呼叫。

如果您使用所有在内存中的数据响应请求，则否。

静态图像不应该通过 Asp.Net 提供，像 IIS 或 nginx 这样的静态文件服务器应该会更快。

# maven - 测试 SNAPSHOT 与发布工件

> ID：16044794
> 
> 赞同：4
> 
> 时间：2013-04-16T18:49:50.593
> 
> 标签：maven, testing, release

我们使用我认为非常标准[的 maven-release-plugin](http://maven.apache.org/maven-release/maven-release-plugin/)开发风格。master 分支包含我们下一个版本的开发（pom 标记为 xy-SNAPSHOT）。当我们进入代码冻结状态时，我们从 master 分支以准备发布。我们从这个分支执行发布，任何错误都在这个分支上修复。

现在我的问题。在准备 xy 版本时，我们通常针对 xy-SNAPSHOT 进行测试，从这个版本分支构建。但是我们意识到，当测试“通过”时，它已经通过了带有 SNAPSHOT 标签的安装程序。因此，要执行发布，我们必须更改代码（删除 SNAPSHOT 标签）并重新发布新版本。在我们看来，重新构建构建只会使我们针对 SNAPSHOT 所做的任何测试无效——要求我们重新测试最终版本。

该怎么办？

我正在考虑建议我们只针对非 SNAPSHOT 构建执行正式测试。如果在本质上是“候选版本”中发现错误，我们会在发布分支中修复它们并提升版本 xy(z+1)，然后重新测试。不利的一面是，它现在命名为 xyz，而不是一个干净的 xy0 版本，其中 z 是此发布的候选版本的数量。

任何人都有这样的场景经验？这是一个正常的过程还是我们对测试 SNAPSHOT 反应过度？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T21:36:56.053

一般有两种处理方式：

1.  maven 项目本身使用一些存储库管理器的暂存功能将工件保存在可以测试它们的暂存区域中。如果测试失败，暂存存储库被删除，标签被删除，并且发布重新启动

2.  在其他情况下，版本号很便宜（确保有无限供应），所以如果发布失败，只需重新旋转下一个数字

第一个意味着您不需要跟踪哪些版本是好/坏，但需要人们验证是否正在测试正确的工件。

第二个需要一些额外的工具来识别每个版本的状态，并且不需要修改标签。

要么工作，选择你的毒药;-)

# restkit - RestKit - 同一类的多个请求描述符（用于不同的 HTTP 方法）

> ID：16044795
> 
> 赞同：0
> 
> 时间：2013-04-16T18:49:53.003
> 
> 标签：restkit, restkit-0.20

我必须为同一个类使用不同的请求描述符（对于不同的 HTTP 方法）。

用例如下：

我有`User`一些属性（属性）的类，例如，`identity, username, password, firstname, lastname`.

我想为使用所有这些字段的 POST 方法使用请求描述符，并为 PUT 方法使用另一个请求描述符，它只处理名字、姓氏和密码。（在这个例子中，我不想修改身份和用户名）。

我怎样才能做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-27T13:28:33.687

我有一个类似的问题 - 本质上是想从托管对象中挑选字段以 POST 回服务器。我想要的字段取决于服务端点。我怀疑继承 ObjectManager 可能是最好的方法。然而，实用主义今天为我赢得了胜利，在我的（客户端）Web 服务 API 访问类中，我在发出请求之前添加了描述符（带有特定于端点的对象映射），然后再次删除它们，留下我的 ObjectManager有光泽和干净。

RKObjectManager 类文档有一个关于自定义和子类化的部分：[http ://restkit.org/api/latest/Classes/RKObjectManager.html#tasks](http://restkit.org/api/latest/Classes/RKObjectManager.html#tasks)

# javascript - 如何在单击以及单击任何其他元素和空白时删除 toggleClass？

> ID：16044797
> 
> 赞同：0
> 
> 时间：2013-04-16T18:49:57.453
> 
> 标签：javascript, jquery, removeclass, toggleclass

我正在使用 JQuery toggleClass 在单击按钮时更改按钮的颜色。当再次单击它时，它应该恢复为原始颜色，并且当鼠标单击其他任何地方（包括空白区域）时，它应该恢复为原始颜色。

我不知道该怎么做，但下面是我设法找到并插入内容的两个片段。

以下代码段将在单击按钮时更改颜色，但再次单击时它不会恢复为原始颜色，但是当单击任何其他元素或空白时，按钮颜色会恢复为原始颜色：

```
 (function () {
$('.button_is').click(function(evt) {
    evt.stopPropagation(); //stops the document click action
    $(this).siblings().removeClass('button_addition');
    $(this).toggleClass('button_addition');
});

$(document).click(function() {
    $('.button_is').removeClass('button_addition'); //make all inactive
});
}); 
```

以下代码段将在单击元素时切换类，当再次单击它时，它会恢复为原始状态，但如果在其他地方单击，则不会恢复为原始颜色：

```
 $(document).ready(function () {

            $(".button_is").click(function () {
                $(this).toggleClass("button_addition");
            });
        }); 
```

我可以利用这两个片段中的哪一个来确保单击按钮时颜色发生变化，再次单击按钮时它会恢复为原始颜色，并且当单击其他元素或空白时它会恢复为原始颜色？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T19:19:37.163

你可以试试这个

```
$(document).ready(function () {

    $(".button_is").click(function (e) {
        e.stopPropagation();
        $(this).toggleClass("button_addition");
    });

    $(document).click(function() {
        $(".button_is.button_addition").trigger("click");
    });    

}); 
```

[**演示。**](http://jsfiddle.net/V9yd6/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T19:09:47.413

**小提琴：http:** [//jsfiddle.net/9ZKfq/](http://jsfiddle.net/9ZKfq/)

```
$(document).ready(function() {

    $(document).click(function(jEvent) {    

        if (!$(jEvent.target).hasClass('button_is')) 
        {
           $('.button_is').removeClass('button_addition');
        }
        else
        {
            $(jEvent.target).toggleClass('button_addition');
        }

    });

}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-16T19:00:31.627

尝试这个 -

```
 $(document).ready(function () {
        $(".button_is").click(function () {
            $(this).toggleClass("button_addition");
        });

        $(document).click(function(event) {
          if(!$(event.target).is('.button_is')){
            $('.button_is').removeClass('button_addition'); //make all inactive
          }
        });
  }); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-16T19:24:43.167

你的第一个片段对我有用。

也许您的 HTML 是问题所在？

值得注意的是，您的代码中有一个错字（您缺少`$`on ready 处理程序）。

看看这个： http: [//jsfiddle.net/URrVf/](http://jsfiddle.net/URrVf/) 它适用于 Chrome、Firefox 和 IE9。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-16T19:24:45.127

尝试这个

```
 $(function() {
        $('.button_is').on('click',
        function(event) {
            event.stopPropagation();
            $('.button_is').toggleClass('button_addition');
        });
        $('html').click(function() {
            $('.button_is').removeClass('button_addition');
        });
    }); 
```

# python - 如何计算具有大中间值的总和

> ID：16044801
> 
> 赞同：3
> 
> 时间：2013-04-16T18:50:12.533
> 
> 标签：python, math

我想计算

![S = n + m - \sum_{k=1}^{n} k^{k-1} \binom{n}{k} \frac{(nk)^{n+mk}}{n^{n +m-1}}](https://i.stack.imgur.com/RUWO4.png)

对于*n* ≥ *m*，两个值都是不超过 1000 的整数。最终结果是一个不比*n*大多少的数字，但中间值太大，python 无法处理。你怎么能解决这个问题？

我将函数定义如下。

```
from scipy.misc import comb
def S(n,m):
    return n+m-sum([k**(k - 1)*comb(n, k)*(n - k)**(n + m - k)/n**(n + m - 1) for k in xrange(1,n+1)]) 
```

`n=m=100`例如，我得到的错误是

```
RuntimeWarning: overflow encountered in multiply
  return n+m-sum([k**(k - 1)*comb(n, k)*(n - k)**(n + m - k)/n**(n + m - 1) for k in xrange(1,n+1)])
[...]
OverflowError: long int too large to convert to float 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T19:07:27.967

似乎问题出在 scipy 的[`comb`](http://docs.scipy.org/doc/scipy/reference/generated/scipy.misc.comb.html)定义中。当我提供自制版本时，它工作正常：

```
import math

def choose(n,k):
    return math.factorial(n) / (math.factorial(k)*math.factorial(n-k))

comb = choose

def S(n,m):
    return n+m-sum([k**(k - 1)*comb(n, k)*(n - k)**(n + m - k)/n**(n + m - 1) for k in xrange(1,n+1)])

print S(1000,1000) 
```

结果（大约 1.5 秒）：

```
1844 
```

作为编写自己的替代方法`comb`，请尝试将`True`可选`exact`参数传递给`comb`. 好像你会得到一个浮动，否则可能会搞砸。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T19:30:07.300

`scipy.misc.comb`在这种情况下返回`ndarray`一个浮点数。其余的计算都是用整数完成的（最终在 Python < 3 中是长整数）。当将浮点数乘以 int 时，Python 尝试将其转换为浮点数，但 99**199 ~ 1e397 不适合 Python 浮点数（64 位），因此会引发错误。

一个解决方案是`exact=True`作为参数传递给`comb`. 顺便说一句，您可以删除`[`and `]`inside `sum`：这避免了内部列表的创建，因此它应该更快，内存效率更高（类似于`range`and之间的区别`xrange`）。而且，如果您碰巧将浮点数相加（此处不需要），那么使用`math.fsum`(accurate floating point sum of values) 比使用`sum`.

# c# - 如何在页面上设置网址？

> ID：16044802
> 
> 赞同：-2
> 
> 时间：2013-04-16T18:50:14.110
> 
> 标签：c#, asp.net

我有一个 gridview，其中一列是`HyperLinkField`.
我想将 url 设置为 page `Exemplu.aspx?id={}`，其中`id`是数据库中元素的 id。
如何为每个元素设置 id？
在网格中我有`id`，但是当我打开页面时我该怎么做`Exemplu.aspx?id=50`？

感谢你们对我的帮助。我知道对你们中的一些人来说这不是问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T18:52:35.180

像这样：

```
<asp:hyperlinkfield datatextfield="UnitPrice"
            datanavigateurlfields="ProductID"
            datanavigateurlformatstring="~\details.aspx?ProductID={0}"          
            target="_blank" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T18:53:44.800

尝试以下。在列中添加超链接字段

```
<COLUMNS>     
    <ASP:HYPERLINKFIELD text="Detail" datanavigateurlfields="id" datanavigateurlformatstring="Exemplu.aspx?id={0}"></ASP:HYPERLINKFIELD>         
</COLUMNS> 
```

# ios - 在 iOS 中抑制 Facebook SDK UIAlertView

> ID：16044808
> 
> 赞同：0
> 
> 时间：2013-04-16T18:50:59.127
> 
> 标签：ios, uialertview, facebook-ios-sdk

我在我的应用程序中使用 Facebook SDK 登录，我使用的是最新版本 3.2.1，并且遇到了 SDK 引发的一些错误的问题。例如（我知道这是一个异常情况）如果用户登录我的应用程序，然后在该会话打开时从他们的 Facebook 中删除我的应用程序，然后在我的应用程序上注销/登录 Facebook 会抛出一个 UIAlertView，上面写着 com. facebook.sdk 错误 5，然后如果用户再次登录，它可以通过重新请求权限来正常工作。

虽然这是一个奇怪的用例，但它说明了不希望 Facebook 通过 jibberish AlertViews 与我的用户交流的更大问题，我更愿意检测错误并发出用户可以理解的适当警报。

无论如何（无需重新编写 SDK，是的，我已经提交了一个错误）来抑制 Facebook SDK 中的所有 UIAlertView，并抛出我自己的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T02:00:50.403

[遵循此处](https://developers.facebook.com/docs/howtos/ios-6/)描述的登录程序时：您可以完全控制警报。Facebook 只是将错误传递给您，您可以选择向用户显示的内容（如果有的话）。

以 Scrumptious 示例应用程序为例。

如果您遇到 Scrumptious 示例应用程序引发您无法控制的警报的特定情况，请描述。

# actionscript-3 - 带有多行（自动换行）项目渲染器的列表 - 如何滚动到底部？带有测试用例和截图

> ID：16044811
> 
> 赞同：0
> 
> 时间：2013-04-16T18:51:11.140
> 
> 标签：actionscript-3, apache-flex, flex4.5, itemrenderer, flex4.7

在 Flex 4 Web 应用程序中，我尝试使用[spark.components.List](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/spark/components/List.html)进行聊天（出于各种原因 - 它已经在 Flex 移动应用程序中对我很有效），但是因为我使用了一个可以多行的项目渲染器（即换行太长）我有一个问题，我不能通过调用它的`ensureIndexIsVisible`方法将列表滚动到它的底部：

![在此处输入图像描述](https://i.stack.imgur.com/r5XTf.png)

我准备了一个非常简单的测试。这些只是 2 个文件，当您将它们放入 Flash Builder 中的新 Flex 项目时，它们会立即生效 -

![在此处输入图像描述](https://i.stack.imgur.com/6hBsE.png)

**MyApp.mxml：**

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application 
    xmlns:fx="http://ns.adobe.com/mxml/2009" 
    xmlns:s="library://ns.adobe.com/flex/spark" 
    xmlns:mx="library://ns.adobe.com/flex/mx"
    applicationComplete="init()">

    <fx:Script>
        <![CDATA[
            import mx.collections.ArrayList;

            private static const MONTHS:ArrayList = new ArrayList([
                "1 January is a beautyful month", 
                "2 February is a very very very very very very very very very very very very very very very beautyful month", 
                "3 March is a beautyful month", 
                "4 April is a beautyful month", 
                "5 May is a beautyful month", 
                "6 June is a beautyful month", 
                "7 July is a beautyful month", 
                "8 August is a beautyful month", 
                "9 September is a beautyful month", 
                "10 October is a beautyful month", 
                "11 November is a beautyful month",
                "12 December is a beautyful month"
            ]);

            private function init():void {
                myList.ensureIndexIsVisible(MONTHS.length - 1); 
            }
        ]]>

    </fx:Script>

    <s:List id="myList"
            horizontalCenter="0"
            verticalCenter="0"
            width="100"
            height="300"
            dataProvider="{MONTHS}"
            itemRenderer="MyRenderer"
            horizontalScrollPolicy="off">

        <s:layout>
            <s:VerticalLayout variableRowHeight="true" 
                              horizontalAlign="justify"/>
        </s:layout>
    </s:List>
</s:Application> 
```

**MyRenderer.mxml：**

```
<?xml version="1.0" encoding="utf-8"?>
<s:ItemRenderer 
    xmlns:fx="http://ns.adobe.com/mxml/2009" 
    xmlns:mx="library://ns.adobe.com/flex/mx" 
    xmlns:s="library://ns.adobe.com/flex/spark"
    autoDrawBackground="false">

    <fx:Script> 
        <![CDATA[    
            [Bindable]
            public var myColor:uint = 0xFFFFFF;

            override public function set data(value:Object):void {
                var label:String = value as String;
                labelDisplay.text = label; 

                if (label.indexOf("June") >= 0)
                    myColor = 0xFFEEEE;
                else if (label.indexOf("July") >= 0)
                    myColor = 0xEEFFEE;
                else if (label.indexOf("August") >= 0)
                    myColor = 0xEEEEFF;
                else 
                    myColor = 0xFFFFFF;
            } 
        ]]> 
    </fx:Script>

    <s:Rect width="100%" height="100%">
        <s:fill>
            <s:SolidColor color="{myColor}" />
        </s:fill>
    </s:Rect>

    <s:Label id="labelDisplay" 
             width="100%"
             left="4" 
             top="4" />
</s:ItemRenderer> 
```

请看一下并告诉我，如何将列表滚动到最底部。

我应该以某种方式使用`myList.dataGroup`它吗？或者也许是`layout.verticalScrollPosition`？

我也试过`callLater(myList.ensureIndexIsVisible, [MONTHS.length - 1])`，但没有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T05:58:04.073

自己在 Flexponential 博客[滚动到火花列表底部](http://flexponential.com/2011/02/13/scrolling-to-the-bottom-of-a-spark-list/)找到了答案：

```
 public static function scrollToBottom(list:List):void {
        // update the verticalScrollPosition to the end of the List
        // virtual layout may require us to validate a few times
        var delta:Number = 0;
        var count:int = 0;

        while (count++ < 10) {
            list.validateNow();
            delta = list.layout.getVerticalScrollPositionDelta(NavigationUnit.END);
            list.layout.verticalScrollPosition += delta;

            if (delta == 0)
                break;
        }
    } 
```

# c# - 等到 Windows Media 播放器结束？

> ID：16044812
> 
> 赞同：0
> 
> 时间：2013-04-16T18:51:12.003
> 
> 标签：c#, wpf, windows, loops, media-player

我很接近完成我的计划，但我有一个问题。无论如何我可以暂停循环，直到播放完 Windows Media Player 中的所有文件。就像在过程中的例子：

```
 process.WaitForExit();
                            while (!process.HasExited)
                                Thread.Sleep(500); 
```

代码：

```
 private bool listbox3job()
        {
            AxWMPLib.AxWindowsMediaPlayer axWmp =
wfh.Child as AxWMPLib.AxWindowsMediaPlayer;
            DateTime? start = starttid2.Value;
            DateTime? end = sluttid2.Value;
            DateTime now = DateTime.Now;

            if (start == null || end == null)
            {
            }
            else if (now >= start.Value && now <= end.Value)
            {
                while (DateTime.Now < end.Value) // Loops till DateEndTime.
                {
                    foreach (var selected in listBox3.Items) // Each file in ItemList.
                    {
                        string s = selected.ToString();

                        if (listBox3Dict.ContainsKey(s))
                        {
                            axWmp.URL = (listBox3Dict[s]); //Where all WMP files starts
                        }
                    }
                }

                return true;
            }
            return false;
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T20:55:51.327

我建议您处理 PlaystateChanged 事件。[msdn PlaystateChanged](http://msdn.microsoft.com/en-us/library/windows/desktop/dd562460%28v=vs.85%29.aspx) 在那里您可以准确地确定当前媒体的播放开始和结束的时间。

我还建议您使用（如果您使用 Windows 窗体，则嵌入）WPF [MediaElement](http://msdn.microsoft.com/en-us/library/system.windows.controls.mediaelement.aspx)，因为它更易于使用且更稳定。

# java - Java镜像对角线方法不起作用

> ID：16044814
> 
> 赞同：1
> 
> 时间：2013-04-16T18:51:15.590
> 
> 标签：java

我无法让我的方法发挥作用。该方法应该镜像我在其对角线上选择的任何图像以产生镜像效果，但目前它只是产生未经编辑的相同图像，我没有做错什么。任何帮助将不胜感激。谢谢你。

```
public Picture mirrorImageDiagonal() {
  int size = this.getWidth();
  Pixel rightPixel = null;
  Pixel leftTargetPixel = null;
  Pixel rightTargetPixel = null;
  Picture target = new Picture(size, size);
  for (double x = 0; x < size; x ++) {
      for (double y = 0; y <= x; y ++) {
          int yIndex = Math.min((int) y, this.getHeight() - 1);
          int xIndex = Math.min((int) x, this.getWidth() - 1);
          leftTargetPixel = target.getPixel(yIndex, xIndex);
          rightTargetPixel = target.getPixel(xIndex, yIndex);
          rightPixel = this.getPixel(xIndex, yIndex);
          rightTargetPixel.setColor(rightPixel.getColor());
          leftTargetPixel.setColor(rightPixel.getColor());
          }
    }
  return target;
  } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-01-16T03:56:42.837

我假设您正在尝试完成图片实验室数据包中的 A6 挑战。我刚刚为学校完成了这个，但如果你没有，我希望这仍然对你有帮助。

```
public void mirrorDiagonal()
  {
    Pixel[][] pixels = this.getPixels2D();
    Pixel pixel1 = null;
    Pixel pixel2 = null;
    int width = pixels[0].length;
    for (int row = 0; row < pixels.length; row++)
    {
      for (int col = 0; col < width; col++)
      {
        if (col < pixels.length)
        {
            pixel1 = pixels[row][col];
            pixel2 = pixels[col][row];
            pixel1.setColor(pixel2.getColor());
        }
      }
    } 
  } 
```

# objective-c - forwardInvocation 中的奇怪“僵尸”：+ getArgument:atIndex 方法

> ID：16044817
> 
> 赞同：3
> 
> 时间：2013-04-16T18:51:24.853
> 
> 标签：objective-c, automatic-ref-counting, objective-c-blocks, nszombie, nsinvocation

这是我的代码的一部分：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    CGRect frame = [[UIScreen mainScreen] bounds];
    _webView = [[UIWebView alloc] initWithFrame:frame];
    [_webView setHidden:NO];
    [self.view addSubview:_webView];

    _vk = [[DPVkontakteCommunicator alloc] initWithWebView:_webView];

    DPVkontakteUserAccount *user;
    NSString *accessToken = [[NSUserDefaults standardUserDefaults]
                                             objectForKey:@"accessToken"];
    NSInteger userId = [[[NSUserDefaults standardUserDefaults]
                                         objectForKey:@"userId"] integerValue];
    user = [[DPVkontakteUserAccount alloc]
                                    initUserAccountWithAccessToken:accessToken
                                                            userId:userId];

    NSLog(@"%@", user);

    [user setSuccessBlock:^(NSDictionary *dictionary)
    {
        NSLog(@"%@", dictionary);
    }];

    NSDictionary *options = @{@"uid":@"1"};
    //    [user usersGetWithCustomOptions:@{@"uid":@"1"}]; // Zombie
    [user usersGetWithCustomOptions:options]; // Not zombie

    //    __block NSDictionary *options = @{};
    //
    //    [_vk startOnCancelBlock:^{
    //        NSLog(@"Cancel");
    //    } onErrorBlock:^(NSError *error) {
    //        NSLog(@"Error: %@", error);
    //    } onSuccessBlock:^(DPVkontakteUserAccount *account) {
    //        NSLog(@"account:%@", account);
    //
    //        [account setSuccessBlock:^(NSDictionary *dictionary)
    //        {
    //            NSLog(@"%@", dictionary);
    //        }];
    //
    //        [account docsGetUploadServerWithCustomOptions:options];
    //    }];
} 
```

这是处理 userGetWithCustomOptions: 方法的部分：

```
- (void)forwardInvocation:(NSInvocation *)anInvocation
{
    NSString *methodName = NSStringFromSelector([anInvocation selector]);
    NSDictionary *options;

    [anInvocation getArgument:&options
                      atIndex:2];

    NSArray *parts = [self parseMethodName:methodName];
    NSString *vkURLMethodSignature = [NSString stringWithFormat:@"%@%@.%@",
                                                                kVKONTAKTE_API_URL,
                                                                parts[0],
                                                                parts[1]];
    // appending params to URL
    NSMutableString *fullRequestURL = [vkURLMethodSignature mutableCopy];

    [fullRequestURL appendString:@"?"];

    [options enumerateKeysAndObjectsUsingBlock:^(id key, id obj, BOOL *stop)
    {
        [fullRequestURL appendFormat:@"%@=%@&", key, [obj encodeURL]];
    }];

    [fullRequestURL appendFormat:@"access_token=%@", _accessToken];

    // performing HTTP GET request to vkURLMethodSignature URL
    NSURL *url = [NSURL URLWithString:fullRequestURL];
    NSURLRequest *urlRequest = [NSURLRequest requestWithURL:url];
    AFJSONRequestOperation *operation;
    operation = [AFJSONRequestOperation
            JSONRequestOperationWithRequest:urlRequest
                                    success:^(NSURLRequest *request,
                                              NSHTTPURLResponse *response,
                                              id JSON)
                                    {
                                        _successBlock(JSON);
                                    }
                                    failure:^(NSURLRequest *request,
                                              NSHTTPURLResponse *response,
                                              NSError *error,
                                              id JSON)
                                    {
                                        _errorBlock(error);
                                    }];

    [operation start];
} 
```

问题是当我使用“选项”变量时 - 它工作正常，但是当使用直接值时 - 它失败，应用程序崩溃。使用 Profile 我发现该方法调用指向已释放的对象。

为什么会发生这种情况？没有其他代码可以提供帮助。

ViewController.m 代码：[​​https://gist.github.com/AndrewShmig/5398546](https://gist.github.com/AndrewShmig/5398546)

DPVkontakteUserAccount.m：[https ://gist.github.com/AndrewShmig/5398557](https://gist.github.com/AndrewShmig/5398557)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T00:32:03.900

问题是参数`getArgument:`是 type `void *`。你正在传递`&value`，它是`NSDictionary * __strong *`（指向强引用的指针）。`void *`强制转换是有效的，因为可以在没有任何警告的情况下分配任何非对象指针。

当您将“指向强的指针”传递给函数时，这意味着该函数应该期望指向“强引用”的指针，并且当函数退出时，它应该保留指针指向“强引用”的事实。这意味着如果函数改变了引用（由指针指向），它必须首先释放之前的值，然后保留新的值。

但是，`getArgument:atIndex:`它的`void *`论点有什么用呢？它对指向的东西是不可知的，只是将值复制到指向的内存中。因此，它不做任何保留和释放的东西。`value`基本上，它对您的变量执行一个普通的 pre-ARC 非保留赋值。

那么为什么会崩溃呢？发生的事情是，`value`首先`nil`，然后在 内部`getArgument:atIndex:`，它将新值分配给它，但它不保留它。但是，ARC 假定它已被保留，因为`value`它是一个强参考。所以在范围结束时，ARC 会释放它。这是一个过度发布，因为它从未被保留。

解决方案是不要将“指向强的指针”传递给`getArgument:`，因为该方法对“强”一无所知。相反，将“指向 unsafe_unretained 的指针”或“指向 void 的指针”传递给它，然后稍后将其转换为强引用：

```
NSDictionary * __unsafe_unretained temp;
[anInvocation getArgument:&temp atIndex:2];
NSDictionary *options = temp; // or you can just use temp directly if careful 
```

或者：

```
void *temp;
[anInvocation getArgument:&temp atIndex:2];
NSDictionary *options = (__bridge NSDictionary *)temp; 
```

# mysql - MySql 中的权重

> ID：16044819
> 
> 赞同：-3
> 
> 时间：2013-04-16T18:51:33.810
> 
> 标签：mysql

基本上我需要实现的是一个表格，用户可以在其中插入不同的食品。所以很明显，我需要允许人们指定重量（1000g、23oz 或任何重量）。我该怎么做呢？我是否要创建一个以 oz、lb、kg 为单位的查找表？

我需要能够在食谱中使用这些值。该程序将按照以下方式进行：

用户输入产品（带有重量和价格），用户使用他/她库存中的产品创建食谱，然后显示每个食谱的成本。因此，假设有人输入“黄油，250 克，售价 0.99 英镑”，然后编写一份需要 500 克黄油的食谱，计算器将计算出该食谱的成本。这很容易，当人们想要使用 LB、Oz、Cups blah blah 作为不同的测量值时。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T18:54:19.987

*始终*使用一组单位存储您的测量值。

然后其他所有内容都成为*演示*问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T19:07:25.563

包含测量的记录不需要知道或关心它们存储的测量*类型*。只是*价值*。它可能像这样简单：

```
Ingredients
----------
ID
Name

MeasurementTypes
----------
ID
Name

Measurements
----------
ID
IngredientID
MeasurementTypeID
RecipeID
Amount
Description

Recipes
----------
ID
Name
Description 
```

在上面的设计中，成分是面粉、糖、鸡蛋等。测量类型是杯子、盎司、计数等。食谱是带有标题和描述的主要食谱本身。测量是食谱的多对一子，将它们与成分联系起来。因此，示例记录可能是：

```
Recipes
----------
1    Ramen Noodle Soup    Boil water, add noodles, stir, eat.

Ingredients
----------
1    Instant Ramen Noodle Soup
2    Water

MeasurementTypes
----------
1    Packages
2    Cups

Measurements
----------
1    1    1    1    1    Use one package of instant Ramen Noodle Soup.
2    2    2    1    2    Use two cups of water. 
```

# sql - 为每组选择随机行

> ID：16044828
> 
> 赞同：9
> 
> 时间：2013-04-16T18:52:20.540
> 
> 标签：sql, postgresql, random, group-by, window-functions

我有一张这样的桌子

```
ID    ATTRIBUTE
 1    A
 1    A
 1    B
 1    C
 2    B
 2    C
 2    C
 3    A
 3    B
 3    C 
```

我想为每个 ID选择*一个随机属性。*因此，结果可能如下所示（尽管这只是众多选项之一

```
ATTRIBUTE
B
C
C 
```

这是我对这个问题的尝试

```
SELECT
  "ATTRIBUTE"
FROM
  (
  SELECT
    "ID",
    "ATTRIBUTE",
    row_number() OVER (PARTITION BY "ID" ORDER BY random()) rownum
  FROM
    table
  ) shuffled
WHERE
  rownum = 1 
```

但是，我不知道这是否是一个好的解决方案，因为我需要引入行号，这有点麻烦。

你有更好的吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-04-16T18:54:52.277

```
select distinct on (id) id, attribute
from like_this
order by id, random() 
```

如果只需要属性列：

```
select distinct on (id) attribute
from like_this
order by id, random() 
```

请注意，您仍然需要先排序，`id`因为它是`distinct on`.

如果您只想要不同的属性：

```
select distinct attribute
from (
    select distinct on (id) attribute
    from like_this
    order by id, random()
) s 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2017-05-11T10:02:09.537

在每条记录（id）前面放一个大的随机数，并在每组中选择具有最低随机数的记录。

```
$ cat test.txt
\N  1   a
\N  2   b
\N  2   c
\N  2   d
\N  3   e
\N  4   f

$ mysql

USE test;
DROP TABLE test;
CREATE TABLE test (id0 INT NOT NULL AUTO_INCREMENT, id VARCHAR(1),  attribute VARCHAR(1), PRIMARY KEY (id0));
LOAD DATA LOCAL INFILE '~/mysql/test.txt' INTO TABLE test FIELDS TERMINATED BY '\t';

DROP TABLE rtest;
CREATE TABLE rtest (random INT(8), id0 VARCHAR(1), id VARCHAR(1),  attribute VARCHAR(1),  PRIMARY KEY (id, random));

INSERT INTO rtest
SELECT CAST(1000000\. * rand() AS INT) AS random, test.* FROM test;

SELECT rtest.* FROM rtest,
(SELECT id, min(random) AS random FROM rtest GROUP BY id) AS sample WHERE rtest.random=sample.random AND rtest.id=sample.id; 
```

# c++ - 为什么我不能打印工资？

> ID：16044831
> 
> 赞同：3
> 
> 时间：2013-04-16T18:52:23.623
> 
> 标签：c++

我正在编写一个准数据库。

我有一个班级对：

```
class Pair{
    MyString m_key;
    Data* m_data;
} 
```

然后 AddItem 方法组成该对并将其添加到数据库中。

```
Data Ivanov(1, 10, "Manager", 100000);
Data Petrov(2, 20, "Manager", 200000);
MyString* employee0 = new MyString("Ivanov");
MyString* employee1 = new MyString("Petrov");
bd.AddItem(employee0, &Ivanov);
bd.AddItem(employee1, &Petrov); 
```

数据库本身监控元素的数量和容量。类 Bd { 私人： int m_size; int m_容量；对** ar; ... }

如果我们添加一个项目，如果容量溢出，数据库就会伸展。如果我们删除一个项目，则会出现一个空单元格，将来可能会使用它。这样做是为了不使堆碎片过多。

```
void Bd:: AddItem(MyString* key, Data* data){
    if (m_size < m_capacity){
        *ar[m_size+1] = Pair(key, data);
    }
    else{ 
        if (m_size == 0){
            ar = new Pair*[++m_size];
            m_capacity++;           
            ar[0] = new Pair(key, data);
            stop
        }
        else{
            Pair** tmp = new Pair*[++m_size];  
            m_capacity++;
            memcpy(tmp, ar, m_size * sizeof(Pair*));
            delete[] ar;
            ar = tmp;
            ar[m_size-1] = new Pair(key, data);
            stop
        }
    }
}

void Bd::RemoveItem(const char* a_key){
    Pair** tmp_ar = this->get_ar();
    for (int i = 0; i < m_size; i++){       
        Pair* tmp_key = tmp_ar[i];
        MyString* tmp_my_string= (*tmp_key).get_m_key();
        const char* tmp_str = (*tmp_my_string).GetString();
        if ( strcmp(tmp_str, a_key) == 0){
            delete ar[i];           
            for (int j = i; j < m_size-1; j++){
                *ar[j] = *ar[j+1];
            }
            delete ar[m_size-1];
            m_size--;
            break;
        }
        stop
        if (i == (m_size-1)){
            cout << "No such person." <<endl;           
        }
    }   
    stop
} 
```

好吧，现在我想使用 bd。

```
cout << bd;
bd.Print("Ivanov");
bd.Print("Petrov"); 
```

**它完美地工作。它打印整个数据库或任何元素。**

然后我删除了伊万诺夫先生。bd.RemoveItem("伊万诺夫");

现在我有这两个问题：

```
bd.Print("Petrov");
cout << bd; 
```

我在数据类中有一个打印方法。

```
void Data:: print_info(){   
    cout << "Sex: " << this->getSex() << ", age: " << age <<", position: " << position <<", salary: ";
    cout << salary << endl; 
} 
```

我特地做了第二个cout，因为这是我遇到麻烦的地方。薪水虽然在范围内清晰可见，但却导致了整个问题。请看这张图：

![在此处输入图像描述](https://i.stack.imgur.com/ra3KF.jpg)

如果我再迈出一步，我会收到有关堆损坏的错误。输出窗口显示： HEAP: Free Heap block 296b30 modified at 296b58 after it is freed

你能帮我理解为什么我不能打印这个薪水吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T19:17:10.423

我看到以下问题`AddItem()`：

```
void Bd:: AddItem(MyString* key, Data* data){
    if (m_size < m_capacity){
        *ar[m_size+1] = Pair(key, data);
    } 
```

如果`m_size`小于`m_capacity`，则添加新项目但不增加`m_size`

```
 else{ 
        if (m_size == 0){
            ar = new Pair*[++m_size];
            m_capacity++;           
            ar[0] = new Pair(key, data);
            stop
        } 
```

我假设您打算检查是否`m_capacity`为 0。

```
 else{
            Pair** tmp = new Pair*[++m_size];  
            m_capacity++;
            memcpy(tmp, ar, m_size * sizeof(Pair*));
            delete[] ar;
            ar = tmp;
            ar[m_size-1] = new Pair(key, data);
            stop
        } 
```

您`memcpy`正在从 复制`ar`，`m_size`在您增加之前的大小为`m_size`，但现在的大小为`m_size-1`，因此您已复制到数组的末尾。

以及以下问题`RemoveItem()`：

```
if ( strcmp(tmp_str, a_key) == 0){
    delete ar[i];           
    for (int j = i; j < m_size-1; j++){
        *ar[j] = *ar[j+1];
    }
    delete ar[m_size-1];
    m_size--;
    break;
} 
```

您`delete ar[m_size-1]`正在删除您刚刚移动到的项目`ar[m_size-2]`。你不想删除它。

我认为此删除可能是您问题的一部分。具体来说，我认为以下两项更改将有所帮助：

1.  `*ar[j] = *ar[j+1]`将行更改`ar[j] = ar[j+1]`为评论中提到的。
2.  摆脱`delete ar[m_size-1];`线。与`ar`换行一样，您绝对不希望这样做。

这不会解决所有问题，但它会确保您`Petrov`在尝试调用他的`print_info()`方法之前没有删除。

# java - Android 传感器旋转角度

> ID：16044832
> 
> 赞同：0
> 
> 时间：2013-04-16T18:52:32.713
> 
> 标签：java, android, rotation, sensors

我正在尝试检测 y 轴旋转角度（保持横向时向前向后倾斜）但我显然做错了，因为 onSensorChanged 事件永远不会被触发

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.main);

    ...

    mSensorManager = (SensorManager)getSystemService(SENSOR_SERVICE);
    mSensor = mSensorManager.getDefaultSensor(Sensor.TYPE_ROTATION_VECTOR);
    mSensorManager.registerListener(this.mSensorEventListener, mSensor, SensorManager.SENSOR_DELAY_GAME); 
}

...

private SensorEventListener mSensorEventListener = new SensorEventListener() {
    @Override
    public void onAccuracyChanged(Sensor sensor, int accuracy) {
        // TODO Auto-generated method stub

    }

    @Override
    public void onSensorChanged(SensorEvent event) {
        float aX = event.values[1];
        float aY = event.values[2];

        double angle = aY * (Math.PI / 180);
        btnStop.setText(Double.toString(angle));
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T19:10:42.337

您的设备可能没有`Sensor.TYPE_ROTATION_VECTOR`

# login - 春天。爪哇。登录和激活电子邮件

> ID：16044834
> 
> 赞同：0
> 
> 时间：2013-04-16T18:52:35.153
> 
> 标签：login, spring-security, activation

我有一个“鸡蛋”的问题。在应用程序中，我使用 UserDetailsS​​ervice 来获取用户（我们不在数据库中存储用户信息，我们使用第三方服务来实际获取所有信息）。

最近我们增加了帐户激活功能。注册后，我们会向用户发送一封激活电子邮件，如果他点击它，我们会将用户标记为 ACTIVE 并将他重定向到登录页面。用户只有在他有 ACTIVE 状态时才能登录。问题是：即使用户从未登录，我们也会从他激活帐户之日起开始向用户收费。我如何（可能使用弹簧安全）使这些过程（激活和登录）几乎同时进行？如果他只是激活他的帐户，我们不想向用户收费，我们只想在他登录后（激活后）才向他收费。所以我真的可以以某种方式做到这一点“用户单击激活链接，登录然后他的状态更改为 ACTIVE（但他只有在他是 ACTIVE 时才能登录）”。

抱歉，如果我的问题描述不够清楚

我会很感激任何反馈。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T23:57:41.030

如果我正确理解了您的要求，您的应用程序需要两个不同的入口点（登录页面）：

1.  一个用于尚未激活的用户的激活（首次登录）。
2.  活跃用户的另一个“正常”。

问题是身份验证逻辑需要对上下文敏感，并了解上述哪个页面启动了身份验证。然而，该框架并不是为这种不常见的用例而设计的，因此身份验证提供者不知道实际发送登录表单的 URL。

您需要解决的是以某种方式将上下文信息传递给根据该信息处理身份验证请求的身份验证提供程序（即*仅对从 url1 登录的非活动*用户进行身份验证，并*仅对*从 url2登录的活动用户进行身份验证）。可能有数百种不同的方法来实现这一点，一种可能的解决方案是放置两个不同的身份验证过滤器来拦截发送到两个不同 URL 的身份验证请求。详情如下：

1.  创建您自己的现有自定义版本，`WebAuthenticationDetailsSource`并且`WebAuthenticationDetails`（最好通过继承后者的子类）来存储和公开身份验证请求的 URI。（这将是身份验证提供者可以实现其条件逻辑的上下文信息。）
2.  `UsernamePasswordAuthenticationFilter`在过滤器链中配置并插入两个不同的实例。将它们的`filterProcessesUrl`属性分别设置为`/j_spring_security_check_active_user`和`/j_spring_security_check_nonactive_user`，并在它们中注入上面创建的自定义`AuthenticationDetailsSource`。
3.  `DaoAuthenticationProvider.additionalAuthenticationChecks()`通过以下方式 覆盖子类：
    *   检索存储在上面创建`WebAuthenticationDetails`的对象中的 URI（可以通过 访问`authentication.getDetails()`）
    *   根据 URI 断言用户是活动/非活动的，`AccountStatusException`如果断言失败则抛出一个。
    *   如果断言成功，不要忘记委托给超类。
4.  创建帖子开头提到的两个不同的登录页面，确保登录表单将凭据发布到各自的 URL ( `/j_spring_security_check_nonactive_user`vs. `/j_spring_security_check_active_user`)。

# java - 在 Java 中打印对象的名称

> ID：16044836
> 
> 赞同：2
> 
> 时间：2013-04-16T18:52:36.467
> 
> 标签：java, object

我已经研究过，虽然这是一个非常简单的问题，但我不知道如何解决它。

我的代码如下所示：

```
public class Playlist {

   public Playlist(String name) {

   }
} 
```

当然单独的文件：

```
@Test
public void CreatePlaylist(){
    Playlist myPlaylist = new Playlist("Workout Playlist");

} 
```

我正在尝试打印这个新播放列表“锻炼播放列表”的实际名称，但我似乎找不到这样做的方法。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-16T18:55:33.067

您需要将播放列表的名称存储在实例变量中。例如：

```
public class Playlist {
   private final String name;

   public Playlist(String name) {
       this.name = name;
   }

   public String getName() {
       return name;
   }
} 
```

然后你可以打印它：

```
System.out.println(myPlayList.getName()); 
```

如果你想让名字可变，那么去掉`final`修饰符并添加一个`setName(String)`方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T18:53:54.887

编写**get 方法**来命名或覆盖类中的**toString**方法

```
public class Playlist {

   private String name;
    public Playlist (String name) {
        this.name = name;
    }

    public String getName() {
    return name;
}

    @Override
    public String toString() {
        return "Playlist [name=" + name + "]";
    }
} 
```

使用打印名称

`System.out.println(playlistObject.getName());`
或者

`System.out.println(playlistObject)`.

**不过，我更喜欢**在 toString() 上设置一个 getter 方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T18:56:44.450

```
public class Playlist {
  private String name;

  public Playlist(String name) {
     this.name = name;
  }

  public String getName() {
     return name;
  }
} 
```

然后显示名称：

```
@Test
public void CreatePlaylist(){
    Playlist myPlaylist = new Playlist("Workout Playlist");
    System.out.println(myPlaylist.getName());
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-16T18:57:45.317

您根本没有在对象中存储“名称”属性。所以显然你不能访问名称。一种方法是

```
public class Playlist {

    public String name;

    public Playlist(String name) {
       this.name = name;
   }
} 
```

现在您应该能够像这样从您的测试用例中访问您的属性。

```
@Test
public void CreatePlaylist(){
    Playlist myPlaylist = new Playlist("Workout Playlist");
    System.out.println(myPlaylist.name);
} 
```

# extjs - extjs 模型自定义映射到 xml

> ID：16044837
> 
> 赞同：1
> 
> 时间：2013-04-16T18:52:36.683
> 
> 标签：extjs, extjs4

我的模型有 clientName model/AlertConfig.js：

```
Ext.define('ET.model.AlertConfig', {
    extend: 'Ext.data.Model',
    fields: [
             {name: 'id', type: 'string'},
             {name: 'clientName', type: 'string' },
             {name: 'description', type: 'string'}, 
```

传入的 xml 嵌入了整个客户端对象（如果存在）：

```
<alertConfig>

    <commandType>D</commandType>
    <countThreshold>1</countThreshold>
    <description>Distributions that failed(all clients)</description>
    <id>2</id>
    <processTimeExceedsSec>0</processTimeExceedsSec>
    <status>3</status>
    <windowMinutes>120</windowMinutes>
  </alertConfig>
  <alertConfig>
    <client>
      <clientCategory>abc</clientCategory>
      <clientExtId>12345</clientExtId>
      <clientId>1</clientId>
      <clientName>MyClient1</clientName>
      <lastModified>2013-03-19T16:12:54.774-04:00</lastModified>
    </client>
    <commandType>R</commandType>
    <countThreshold>1</countThreshold>
    <description>Requests that failed</description>
    <id>3</id>
    <processTimeExceedsSec>0</processTimeExceedsSec>
    <status>3</status>
    <windowMinutes>120</windowMinutes>
  </alertConfig> 
```

问题：

我只需要将 alertConfig/client/clientName 映射到模型中的 clientName。我怎样才能干净地做到这一点。有没有我可以提到这个 xml 路径的地方？

注意：在视图中用户将看到客户端名称（以及组合框中的所有客户端名称，用户可以选择并使用不同的客户端名称更新警报。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T15:46:05.970

通过添加'/'解决

```
Ext.define('ET.model.AlertConfig', {
    extend: 'Ext.data.Model',
    fields: [
             {name: 'id', type: 'string'},
             {name: 'clientId', mapping: 'client/clientId', type: 'int' }, 
             //not a field in erf.domain (but points to Client object)
             {name: 'clientName', mapping: 'client/clientName', type: 'string' }, // not a field in erf.domain
             {name: 'description', type: 'string'}, 
```

# .net - 当我从控制台运行 EF 代码迁移时 - 输入字符串的格式不正确

> ID：16044838
> 
> 赞同：4
> 
> 时间：2013-04-16T18:52:40.320
> 
> 标签：.net, entity-framework, entity-framework-5, entity-framework-migrations

我遇到了非常奇怪的问题。我在子项目中有带有迁移的控制台应用程序。我使用 .Net 4 和 EF 5。这是我的迁移：

```
 Sql(
            "INSERT [Script] ([Id], [CompanyId], [ScriptType], [ScriptCode], [Enable], [Schema]) VALUES (38500, 0, 3, N'if(Row.OccupancyCode == \"8500\") Row.MSBOccupancyId = 8500;', 1, N'SQA'), " +
            "(38510, 0, 3, N'if(Row.OccupancyCode == \"8510\") Row.MSBOccupancyId = 8510;', 1, N'SQA'), " +
            "(38535, 0, 3, N'if(Row.OccupancyCode == \"8535\") Row.MSBOccupancyId = 8535;', 1, N'SQA'); "); 
```

当我像这样从 cmd 运行它时：

> migrate.exe MSB.PI.Data.PortfolioInsight.dll /connectionString="数据源=服务器；用户=用户；密码=密码；初始目录=AAA；" /connectionProviderName="System.Data.SqlClient" /verbose

我收到：

> 详细：目标数据库是：'AAA'（数据源：evbyminsd1144，提供者：System.Data.SqlClient，来源：显式）。应用基于代码的迁移：[201304161824179_InsertBaseDataScripts]。应用基于代码的迁移：201304161824179_InsertBaseDataScripts。System.Data.Entity.Migrations.Design.ToolingException：输入字符串的格式不正确。在 System.Data.Entity.Migrations.Design.ToolingFacade.Run(BaseRunner runner) 在 System.Data.Entity.Migrations.Design.ToolingFacade.Update(String targetMigration, Boolean force) 在 System.Data.Entity.Migrations.Console。 System.Data.Entity.Migrations.Console.Program.Main(String[] args) 处的 Program.Run() 错误：输入字符串的格式不正确。

但所有陈述都是正确的。

有什么问题，请帮我解决这个问题。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-22T17:52:41.860

**黑客警告**

原来我必须添加一个黑客来解决这个问题。

问题很可能是因为 migrate.exe 试图在某处执行 String.Format() 。

黑客：

1.  创建一个 DbMigration 类并“新建”该`Sql()`函数，以便我们可以在传入原始 sql 之前对其进行转义`System.Data.Entity.Migrations.DbMigration.Sql()`
2.  使用 unicode 转义 '{' 和 '}'

代码：

```
// This is a hack for:
//      https://stackoverflow.com/questions/16044838/when-i-run-ef-code-migration-from-console-input-string-was-not-in-a-correct-fo
// Without it migrate.exe will not work if you try to run Sql("Select '{'")
// 
// This is most likely because migrate.exe is trying to do String.Format() somewhere
public abstract class DbMigration : System.Data.Entity.Migrations.DbMigration
{
    protected internal new void Sql(string sql, bool suppressTransaction = false, object anonymousArguments = null)
    {
        base.Sql(Escape(sql), suppressTransaction, anonymousArguments);
    }

    // EF migrate.exe does not support any script with the character '{' or '}'
    // Encode them into unicode and add the strings on Sql server side
    private string Escape(string s)
    {
        return s.Replace("{", "'+NChar(123)+'").Replace("}", "'+NChar(125)+'");
    }
} 
```

我尝试过但没有用的东西：

1.  通过导入 EntityFramework.psm1 在 PowerShell 中运行 update-database。你会收到一条消息说`The name of the current PowerShell host is 'ConsoleHost'`。这是因为`update-database`使用了 NuGet 包管理器控制台中的一堆方法。[在这里阅读更多](http://blogs.msdn.com/b/powershell/archive/2010/01/23/powershellhostversion-wtf.aspx)
2.  从 powershell 运行包管理器控制台。[正如这里](https://stackoverflow.com/questions/14125395/start-vs2012-package-manager-console-from-powershell-command-prompt)建议的那样，这很可能是不可能的
3.  试图找出为什么 EntityFramework.psm1 中不存在问题并使用他们的解决方案。该脚本包含 500 行代码，实际上所做的不仅仅是触发 migrate.exe。破解它似乎更容易

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-30T09:27:56.357

我在迁移中解析原始 SQL 中的字符串时遇到了类似的问题。在 migrate.exe 下运行时，迁移中的以下有效 SQL 也会抛出“输入字符串格式不正确”：

```
Sql("SELECT '{'"); 
```

不过，它**确实**可以从包管理器控制台工作，因此似乎确实是 migrate.exe 的问题。

注意我使用的是 4.3.1。

一种选择可能是使用“-Scr​​ipt”参数从 Visual Studio 中的包管理器控制台运行迁移：

```
Update-Database -Script -SourceMigration:"MigrationBeforeProblemOne" -TargetMigration:"ProblemMigration" 
```

这将允许您生成要运行的 SQL 脚本，而不是使用 migrate.exe，只是为了将此迁移到数据库中（从那时起，migrate.exe 将来可以跳过此特定迁移）。

# rest - 与*移动操作系统一起使用的最合适的协议（SOAP 或 REST）？

> ID：16044839
> 
> 赞同：0
> 
> 时间：2013-04-16T18:52:41.040
> 
> 标签：rest, mobile, soap

**对于使用 Java/Java EE 应用程序公开的 Web 服务的移动操作系统**Android 或 iOS 应用程序，什么是最合适的协议（**SOAP**或JSON 格式的**REST ）？**

 **哪一个会更高效并提供安全性、原子事务和可靠性？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T19:04:07.220

您需要更好地定义您的安全要求。

带有 WS-Security 的 SOAP 可用于确保消息的完整性，并且只有适当的进程才能使用数据。

这就是您所说的安全性，您最好使用 SOAP，因为它具有处理此问题的能力。

REST 建立在标准 HTTP 操作之上：GET、PUT、DELETE、POST，因此，安全性基于两个方面：

1.  由 SSL (HTTP) 提供的端到端安全性
2.  身份验证，范围从基本 HTTP 身份验证到自定义提供程序，例如 OAUTH2。

从开发的角度来看，使用 JSON 数据格式的基于 REST 的 API 更易于使用。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-04-16T18:53:57.767

我的投票支持带有 JSON 的 REST。**

# mysql - 将度数转换为其他测量单位

> ID：16044844
> 
> 赞同：1
> 
> 时间：2013-04-16T18:53:23.903
> 
> 标签：mysql, coordinates, distance

我在 Mysql 服务器中存储一个点作为纬度和经度。他们都是`float(10,6)`。给定一个半径，比如 100 码或 100 米，我如何计算中心周围的点。我正在考虑使用 GIS，但我听说它不完整或功能非常有限。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T09:40:22.893

1) Tranform the lat/lon to a cartesian based coordinate system of units meter,
the tranformed point is now at (x,y)
2) Use school mathemathics (polar coordinates) to calculate the points:

2a) create points on circle at (0,0) with polar coordinates (r* sin (phi), r* cos(phi)), r in meters, phi in radians 2b) add (x,y) to all that resulting points, to move the circle points from center (0,0) to (x,y)

3) tranform all points back to lat/lon

# php - PHP递归查找兄弟

> ID：16044845
> 
> 赞同：0
> 
> 时间：2013-04-16T18:53:26.490
> 
> 标签：php, recursion

用这个工作了一段时间..我的头不对..所以......在这里帮助;-)我相信这很简单..

桌子：

```
CREATE TABLE IF NOT EXISTS `items` (
 `item_id` bigint(20) NOT NULL AUTO_INCREMENT,
 `item_parent_id` bigint(20) NOT NULL COMMENT 'itemid which this item belongs to',
 `item_name` varchar(255) NOT NULL,
 `item_serialnumber` varchar(255) NOT NULL,
 `item_model` varchar(255) NOT NULL,
  PRIMARY KEY (`item_id`),
) ENGINE=MyISAM  DEFAULT CHARSET=utf8; 
```

我正在尝试创建一个 item_id 数组和它所属的 item_id - 通过 item_parent_id - 递归 -

这样即使您找到了父母的孩子，也要检查孩子是否是其他人的父母。

尝试过这样的事情：

```
function get_item($item_id, $menu)
{
$sql = "
SELECT
    items.*,
    customers.*
FROM
    assets
LEFT JOIN item_customer_rel USING(item_id)
LEFT JOIN customers USING(customer_id)
WHERE
    items.item_parent_id = '".$parent."'
ORDER BY
    items.item_name
";
$res = mysqli_query($db, $sql) or die("ERROR: SQL Select a2a ancestor", $sql, mysqli_error($db) , $_SESSION["u_id"]);
while ($items = mysqli_fetch_assoc($res))
    $menu = build_ancestor_array($parent, $menu);
}

function build_ancestor_array($parent, $menu)
{
GLOBAL $db;
$sql = "
SELECT
    items.*,
    customers.*
FROM
    items
LEFT JOIN item_customer_rel USING(item_id)
LEFT JOIN customers USING(customer_id)
WHERE
    items.item_parent_id = '".$parent."'
";
$res = mysqli_query($db, $sql) or cc("ERROR: SQL Select a2a ancestor", $sql, mysqli_error($db) , $_SESSION["u_id"], $this_document);
while ($items = mysqli_fetch_assoc($res))
{
    if ($ancestor_item_array[$parent] == $items["item_id"])
        $menu = build_ancestor_array($parent, $menu);
    $ancestor_item_array[$parent] = $items["item_id"];

    // Creates entry into items array with current menu item id ie. $menu['items'][1]
    $menu['items'][$items['item_id']] = $items;
    $menu['items'][$items['item_id']]["connection_type"] = 2;
    // Creates entry into connected_to array. connected_to array contains a list of all items with connected_to
    $menu['connected_to'][$items['item_parent_id']][] = $items['item_id'];
}
return $menu;
} // end build item array 
```

它只会下降一个“级别”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T20:57:37.823

递归工作..只需要用笔和纸手动尝试;-)

```
function get_item_data($parent, $menu, $ancestor_item_array = "")
{
    GLOBAL $db;

    $sql = "
    SELECT
        items.*,
        customers.*
    FROM
        items
    LEFT JOIN item_customer_rel USING(item_id)
    LEFT JOIN customers USING(customer_id)
    WHERE
        items.item_parent_id = '".$parent."'
    ORDER BY
        items.item_name
    ";
    $res = mysqli_query($db, $sql) or cc("ERROR: SQL Select a2a ancestor", $sql, mysqli_error($db) , $_SESSION["u_id"], $this_document);
    while ($items = mysqli_fetch_assoc($res))
    {
        $ancestor_item_array[] = $items["item_id"];
        if (!in_array($items["item_parent_id"], $ancestor_item_array))
            $menu = get_item_data($items["item_id"], $menu, $ancestor_item_array);

        // Creates entry into items array with current menu item id ie. $menu['items'][1]
        $menu['items'][$items['item_id']] = $items;
        $menu['items'][$items['item_id']]["connection_type"] = 2;
        // Creates entry into connected_to array. connected_to array contains a list of all items with connected_to
        $menu['connected_to'][$items['item_parent_id']][] = $items['item_id'];
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T19:05:01.817

参考，`2 links`下面，我最近发布了这些答案，这是纯粹的`SQL`

**[具有关系 innoDB 的递归 MySQL 查询](https://stackoverflow.com/questions/16019105/recursive-mysql-query-with-relational-innodb/16023509#16023509)**

和

**[如何在 MySQL 中查找所有子行？](https://stackoverflow.com/questions/16042897/how-to-find-all-child-rows-in-mysql/16042957#16042957)**

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-16T19:01:24.097

它不适用于纯 SQL。

您应该查看存储过程，您尝试创建的 sql 只会“向内”一层，因为所有关系都将显示为好像它们是第一级连接。

例如。父母->儿子->孙子->ggson

```
parent.item_parent_id = null
son.item_parent_id = parent
grandson.item_parent_id = son
ggson.item_parent_id = grandson 
```

就算是硬孙子是低级人脉，他也会以一级人脉出现。

可悲的是，它不能用纯 sql 完成。这就是让我去 NOSQL 数据库的原因之一。

# vba - 发送电子邮件时运行宏

> ID：16044846
> 
> 赞同：2
> 
> 时间：2013-04-16T18:53:34.080
> 
> 标签：vba, outlook

我正在尝试编写一个宏，每当用户点击发送按钮时，它都会查看电子邮件的主题行。

但是我找不到任何收听该按钮的文档。现在我只是想让它在发送`MsgBox`电子邮件时发送带有主题的内容。有没有办法听（*从 DOM 的角度思考*）这个按钮并在点击时触发一个宏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T20:05:33.233

正如悉达多所建议的：

我写了一个小演示，它检查一些条件来决定是否应该取消发送操作。这可以扩展到做其他事情，比如插入日期，将邮件保存到某个文件夹，......

```
Option Explicit

Private Sub Application_ItemSend(ByVal objItem As Object, Cancel As Boolean)
    Dim mi As MailItem

    If TypeName(objItem) = "MailItem" Then
        Set mi = objItem

        Debug.Print mi.Subject

        check Cancel, Trim(mi.Subject) <> "", "Subject is empty!"
        check Cancel, Not isRecipient(mi, "John@Doe.net"), _
              "John is on our embargo list!"
    End If
End Sub

Private Sub check(ByRef Cancel As Boolean, cond As Boolean, msg As String)
    If Not (Cancel Or cond) Then
        Cancel = (MsgBox(msg & vbCrLf & "Cancel send operation?", _
                         vbYesNoCancel, "Confirm?") <> vbNo)
    End If
End Sub

Private Function isRecipient(mi As MailItem, forbidden As String) As Boolean
    Dim ret As Boolean
    Dim rc As Recipient

    ret = False

    For Each rc In mi.recipients
        If StrComp(rc.Address, forbidden, vbTextCompare) = 0 Then
            ret = True
            Exit For
        End If
    Next

    isRecipient = ret
End Function 
```

# ios - trigger.io 应用程序中可用/推荐哪些本地数据库（如果有）？

> ID：16044847
> 
> 赞同：3
> 
> 时间：2013-04-16T18:53:34.833
> 
> 标签：ios, sqlite, trigger.io

我正在研究使用 trigger.io 构建移动应用程序，但我没有找到关于本地数据库选项的好的文档。我的应用程序会将数据发送到外部 API，但需要能够将数据作为草稿在本地存储（如果用户离线，则 API 不可用，无论如何）。

我看到有一个用于存储数据的[prefs 模块](http://docs.trigger.io/en/latest/modules/prefs.html#modules-prefs)，但它似乎不是正确的（如果我错了，请纠正我）。这里推荐什么选项？有没有类似于[PhoneGap 的 SQLite 插件的](https://github.com/davibe/Phonegap-SQLitePlugin)东西？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-17T14:18:11.207

这可能取决于您的使用模式。

例如，`forge.prefs`如果您想做任何有趣的查询，可能会有点繁琐，但如果您只想保留单个 JavaScript 对象结构，则可以很好地工作。使用`window.localStorage`可能有类似的优点/缺点。

或者，您可以在 JavaScript 中使用 WebSQL API：http: [//docs.trigger.io/en/v1.4/release-notes.html#v1-3-5](http://docs.trigger.io/en/v1.4/release-notes.html#v1-3-5)。您不需要为此使用模块，它应该适用于使用 Forge 构建的任何 Android 或 iOS 应用程序。这实质上为您提供了一个可从 JavaScript 访问的 SQLite 数据库。为了让您对 API 有所了解，下面是一个示例：

```
// create db
var db = openDatabase('mydb', '1.0', 'example database', 2 * 1024 * 1024);
db.transaction(function (tx) {
    tx.executeSql('CREATE TABLE IF NOT EXISTS foo (id unique, text)');
    tx.executeSql('INSERT INTO foo (id, text) VALUES (1, "foobar")');
});

// query db
db.transaction(function (tx) {
    tx.executeSql('SELECT * FROM foo', [], function (tx, results) {
        var rows = results.rows;
        for (var i = 0; i < rows.length; ++i) {
            forge.logging.info("row text: " + rows.item(i).text);
        }
    });
}); 
```

你应该可以在网上找到一些关于的教程！

# wix - 从单个文件位置创建 WiX 补丁

> ID：16044848
> 
> 赞同：3
> 
> 时间：2013-04-16T18:53:43.943
> 
> 标签：wix, patch

我正在尝试为我的应用程序创建一个补丁。实现[此处](http://wix.sourceforge.net/manual-wix3/wix_patching.htm)描述的示例按预期工作。但是，每个版本的文件都存储在不同的目录中。1.0 版文件位于 c:sample\1.0 中，1.1 版文件位于 c:sample\1.1 中。如果我将文件移动到一个位置，请创建 1.0 安装程序，修改文件，然后创建 1.1 安装程序；火炬的 wixmst 输出没有差异。当我运行 pyro 时，我得到：

> 警告 PYRO1079：文件柜“media1.cab”不包含任何文件。如果此补丁不包含任何文件，则可以安全地忽略此警告。否则，请在首次构建转换时尝试将 -p 传递给 torch.exe，或者将 ComponentRef 添加到您的 PatchFamily 创作中以将更改的文件拉入文件柜。

这对我来说是个问题，因为我的项目文件保存在单个 git 存储库中。我们使用分支和标记来描述版本。因此，我只有一个文件目录。

我有两个版本的 .msi 和 .wixpdb。

在这种情况下如何创建补丁？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T20:19:36.047

Pyro 需要访问 .wixmst 以及新旧文件。如果您只有一组文件（新的或旧的），那么补丁显然不会发现文件差异。这就是为什么你从 Pyro 那里得到错误的原因。

如果您使用 bindpaths 创建原始 .msi 文件（及其 .wixpdbs），那么您可以使用`-bt`switch 提供旧路径到 pyro 和新路径到`-bu`switch。如果您没有使用 bindpaths 并且您需要为旧文件重新创建旧目录结构并为新文件创建新目录结构。

如果您无法找到旧文件和新文件（绑定路径效果最好），那么您将不得不进行管理图像类型修补。

# ios - iOS 中的 UISlider 和播放声音

> ID：16044857
> 
> 赞同：0
> 
> 时间：2013-04-16T18:53:55.740
> 
> 标签：ios, audio, uislider

我正在尝试使用 a`UISlider`以模仿小提琴弓如何在弦上演奏的方式播放声音。目前，我可以从滑块播放声音，但功能不正确。

```
 -(IBAction) slider 
{
           NSString* path = [[NSBundle mainBundle] pathForResource:@"im_on" ofType:@"mp3" ];
           if (song) [song release];
           song = [[AVAudioPlayer alloc] initWithContentsOfURL:[NSURL fileURLWithPath:path] error:NULL];
           [song play];       
} 
```

这是代码，没有太多其他内容。我已将 IB 中的此方法链接到事件触发的滑块`Value Changed`。设置为`continuous = YES`时，当滑块开始滑动时，播放声音。但是，如果它继续滑动，声音将停止，直到滑块停止然后再次播放。设置为`continuous = NO`时，值变化时不播放声音，而是在触摸解除时播放。声音继续播放，而值在此之后挂起。

有没有办法让声音继续播放，直到滑块停止/改变方向/触摸被释放？即覆盖除第一个`value changed`发送的事件之外的所有事件，直到满足 x 条件。

# vb6 - 对于未初始化的每个

> ID：16044863
> 
> 赞同：0
> 
> 时间：2013-04-16T18:54:03.937
> 
> 标签：vb6, foreach, typelib

我的函数用于替换一个撇号，即*'* 在任何对象的属性中。该函数使用 TypeLib 库来实现这一点，通过循环遍历所有对象的成员，即

```
Public Function EscapeWildCards(ByRef obj As Object, _
                                Optional ByVal bEscape As Boolean = True) As Boolean
    On Error GoTo EscapeWildCards_Err
    Dim tTLI    As TLIApplication
    Dim tMem    As MemberInfo
    Dim tInvoke As InvokeKinds
    Dim tName   As String     'used as lower case....
    Dim tString As String

1   Set tTLI = New TLIApplication
    '... if True, we are setting else we are getting
2   tInvoke = IIf(bEscape, VbGet, VbLet)

3   If obj Is Nothing Then Exit Function
4   For Each tMem In TLI.InterfaceInfoFromObject(obj).Members
5       'tName = LCase$(tMem.Name)
6       If tMem.InvokeKind = tInvoke Then 'And tMem.Parameters.Count = 0
            'could be object/something else that can't handle
            On Error Resume Next
            ' get the oobject property value
7           tString = CallByName(obj, tMem.Name, VbGet)
8           If tInvoke = VbGet Then
9               If IndexOf(tString, "'") > 0 Then
10                   tString = Replace$(tString, "'", "`")
11                  CallByName obj, tMem.Name, VbLet, tString
                 End If
             Else
                 '... set data replacing aposthrophe
12              If IndexOf(tString, "'") > 0 Then
13                  tString = Replace$(tString, "`", "'")
14                  CallByName obj, tMem.Name, VbLet, tString
                 End If
             End If
             'Debug.Print tName, " = ", tString
             On Error GoTo EscapeWildCards_Err
         End If
     Next

     Exit Function

EscapeWildCards_Err:
     ErrReport Err.Description, "modCommon.EscapeWildCards", Erl
     Resume Next
End Function 
```

当我在 IDE 中测试代码时，我没有收到任何错误。但是当我作为 EXE 编译和测试时，出现以下错误：

```
Object doesn't support this action. LineNo 4  
Object variable or With block variable not set. LineNo 5  
Object variable or With block variable not set. LineNo 6  
For loop not initialized. LineNo 14 
```

为什么应用程序在 IDE 中运行时不会出现任何错误，但在编译时会出现错误？有人可以指出我做错了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T10:54:47.100

首先，您并没有通过错误处理来帮助自己。在不进行某种形式的检查实际错误的情况下进行简历下一步是一种混乱和错误城市的一站式方式。您的标题具有误导性-导致问题的不是“ For Each”语句。这是：

```
TLI.InterfaceInfoFromObject(obj).Members 
```

准确地说，是成员属性失败了。（哦，你显然没有直接复制和粘贴，因为我认为“TLI”应该是“tTLI”。）。其原因可能是您尝试使用的对象没有在类型库中注册的公共接口。

我的猜测是您正在尝试使用内部 VB 类来执行此操作，例如 Form 或私有类。在运行时，VB IDE 即时创建运行时类型库信息（您认为如何在运行时使用未编译的 DLL 项目？）。在 IDE 中，VB 动态地为您的类创建类型库信息。但是编译的时候，这个信息不存在，所以报错。

如果是这种情况，您将不得不通过创建一个公开您要使用的接口的 DLL 手动为您的私有类创建接口。然后这个接口将被实现到私有类中。可悲的是，您不能对 Form 实例执行此操作。

# c# - IE 中未显示 HTML 验证消息

> ID：16044865
> 
> 赞同：0
> 
> 时间：2013-04-16T18:54:07.373
> 
> 标签：c#, html, .net, internet-explorer, razor

我有以下代码，它在所有浏览器中都能正常工作，并在用户尝试提交表单而不输入字段名称时显示错误消息。

```
<div class="row medium left">
    @Html.TextBox("FirstName", Model.FirstName, new { @class = "field blink medium required", @title = "First Name*" })
    <div class="error-msg">
        @Html.ValidationMessageFor(m => m.FirstName)
    </div>
</div>

<div class="row medium left last">
    @Html.TextBox("LastName", Model.LastName, new { @class = "field blink medium required", @title = "Last Name*" })
    <div class="error-msg">
        @Html.ValidationMessageFor(m => m.LastName)
    </div>
</div> 
```

验证消息适用于除 IE 之外的所有浏览器。有什么问题，我可能忽略了什么错误？

在 IE 中渲染的 HTML：

```
<input name="FirstName" title="First Name*" class="field blink medium required error" id="FirstName" type="text" value="First Name*" data-val-required="The First Name field is required." data-val-length-min="3" data-val-length-max="50" data-val-length="Minimum of 3 characters." data-val="true" AUTOCOMPLETE="OFF">

<div class="error-msg">
<span class="field-validation-valid" data-valmsg-replace="true" data-valmsg-     for="FirstName"></span></div> 
```

# java - JTextPane 中的侦听器

> ID：16044866
> 
> 赞同：0
> 
> 时间：2013-04-16T18:54:08.567
> 
> 标签：java, swing, file-io, actionlistener, jtextpane

我`JTextPane`在 Swing 应用程序中使用。在这里我遇到问题，当我打开文件并将其内容读取到 JtextPane 时，它​​不会调用 Document Listener。

`Listener`我应该在 JTextPane 中添加哪个来读取文件？

```
File file=new JFileChooser().getSelectedFile();
input = new BufferedReader(
        new InputStreamReader(
        new FileInputStream(
        file)));
jTextPane1.read(input, "READING FILE :-)"); 
```

这是`DocumentListener`：

```
jTextPane1.getDocument().addDocumentListener(new DocumentListener() {

        public String getText() {
            int caretPosition = jTextPane1.getDocument().getLength();
            Element root = jTextPane1.getDocument().getDefaultRootElement();
            String text = "1" + System.getProperty("line.separator");
            for (int i = 2; i < root.getElementIndex(caretPosition) + 2; i++) {
                text += i + System.getProperty("line.separator");
            }
            return text;
        }

        public void insertUpdate(DocumentEvent e) {
            jTextArea1.setText(getText());
        }

        public void removeUpdate(DocumentEvent e) {
            jTextArea1.setText(getText());
        }

        public void changedUpdate(DocumentEvent e) {
            jTextArea1.setText(getText());
        }
    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T05:51:50.413

read() 方法使用`EditorKit's`Reader 反过来可以重新创建`Document`实例。创建新`Document`内容而不是 remove() 所有内容并将其添加回旧内容更快。尝试比较阅读前后的实例。

如果它们不同，请检查侦听器实例是否已添加到新的 Document 实例中，如果未附加则 readd。

# html - 列出图像非填充

> ID：16044886
> 
> 赞同：0
> 
> 时间：2013-04-16T18:55:19.323
> 
> 标签：html, css

我制作了一个图库，用户可以在这张照片中上传到图库。但是照片不会在背景中显示填充并给出这个坏屏幕..

图片

![在此处输入图像描述](https://i.stack.imgur.com/L42Ob.png)

```
 .fotograf
{
    display: block;
    min-height: 100%;
    height: 100%;
}
.fotograf ul li
{
    width: 200px;
    margin-left: 4px;
    margin-right: 4px;
    height: 200px;
    float: left;
    line-height: 1px;
    list-style-type: none;
}
.fotograf ul li img
{
    display: block;
}
.maincenter
{
    background: url("img/maincenter.png") repeat;
    width: 926px;
    height: 100%;
    font-family: Tahoma;
    line-height: 20px;
    font-size: 15px;
    color: #3d3d3d;
    padding-left: 55px;
    padding-right: 15px;
} 
```

我想自动调整这个画廊背景的大小。

谢谢你。

此致！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T06:04:37.443

尝试添加溢出，例如：

```
.fotograf {
     display: block;
    min-height: 100%;
    height: 100%;
    overflow:hidden;
} 
```

或浮动

```
.fotograf {
         float: left;
        min-height: 100%;
        height: 100%;
        overflow:hidden;
    } 
```

# java - clone() 具有受保护的访问权限 - 公开对象 clone()

> ID：16044887
> 
> 赞同：23
> 
> 时间：2013-04-16T18:55:19.310
> 
> 标签：java, clone

我正在编写代码来创建一个对象，克隆该对象，然后比较两者。

有问题的对象 Octagon 是对象 GeometricObject 的扩展

```
public class Octagon extends GeometricObject implements Comparable<Octagon>, Cloneable {
private double side;

public Octagon (double side){
    this.side = side;
}

public Object clone() throws CloneNotSupportedException {
    Octagon octClone = (Octagon)super.clone();
    return octClone;
} 
```

在名为 Octagon.java 的文件中

在另一个中，TestOctagon.java 是我的主要方法：

```
public class TestOctagon {
    public static void main(String[] args) {
        GeometricObject test = new Octagon(5); //create an Octagon with a side of 5
        System.out.println("Area is: "+test.getArea());
        System.out.println("Perimeter is: "+test.getPerimeter());

        Octagon copy = (Octagon)test.clone();

    }
} 
```

错误出现在 main 方法的最后一行。

```
clone() has protected access in Object 
```

我试过在 Octagaon 中重命名克隆方法，对 cloneme 说，但后来我得到了错误：

```
cannot find symbol
symbol: method cloneme()
location: variable test of type GeometricObject 
```

我觉得问题是因为 Octagon 扩展了另一个对象，也许？

我真的找不到任何解决方案，我花了一个小时阅读这里的所有其他 clone() 帖子。

编辑：我需要使用克隆。我知道普遍的共识是克隆是无聊的。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-16T18:58:02.647

代替

```
Octagon copy = (Octagon)test.clone(); 
```

和

```
Octagon copy = (Octagon)((Octagon)test).clone(); 
```

这样被调用的克隆方法就是你的类之一。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-04-16T18:58:09.977

您可以编写一个复制构造函数：

```
public Octagon( Octagon right ){
    this.side = right.side;
} 
```

并从 clone 方法中使用它：

```
public Object clone() throws CloneNotSupportedException {
    return new Octagon( this );
} 
```

# javascript - 如何处理树枝模板中的多个“”？

> ID：16044888
> 
> 赞同：1
> 
> 时间：2013-04-16T18:55:24.303
> 
> 标签：javascript, symfony, twig

我正在使用树枝和 symfony2。
我想在 twig 中使用这句话

```
onmouseover='this.src="{{ asset("bundles/acmetop/images/room/btn_volum_on.png") }}"' 
```

我尝试了一些模式，但它从来没有奏效：

*   `onmouseover='this.src="{{ asset(\"bundles/acmetop/images/room/btn_volum_on.png\") }}"'`
*   `onmouseover='this.src=\"{{ asset("bundles/acmetop/images/room/btn_volum_on.png") }}\"'`

但是，我得到了错误：

```
Unexpected character "\" in AcmeRoomBundle:Default:index.html.twig 
```

如何在一个树枝模板中处理多个`"`和？`'`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T19:14:00.733

如何改用这个：

```
onmouseover="this.src='{{ asset("bundles/acmetop/images/room/btn_volum_on.png") }}';" 
```

它将输出如下：

```
onmouseover="this.src='/bundles/acmetop/images/room/btn_volum_on.png';" 
```

# google-drive-api - Google Drive appdata 和 Children.Delete

> ID：16044889
> 
> 赞同：0
> 
> 时间：2013-04-16T18:55:24.703
> 
> 标签：google-drive-api, appdata

看起来 appdata 文件夹下的项目无法使用 DirectoryService.Children.Delete 删除 - 出现错误“方法不支持 appdata 内容 [403]”。只是想知道为什么这个限制？appdata 文件夹的行为是否应该与其他文件夹相同？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T08:05:58.370

`appdata`是具有一些限制的常规云端硬盘文件。限制子引用的删除就是其中之一。

如果该文件位于 appdata 中，则删除子引用将使该文件/目录成为孤儿 - 对于其余常规 Drive 文件而言并非如此，因为用户仍然可以发现它们。这就是为什么不要通过删除子引用来删除层次结构链接，而应该始终删除目录内容。您应该递归地使用[`files.delete`](https://developers.google.com/drive/v2/reference/files/delete)来删除 appdata 目录及其子目录。

# c# - 使用 foreach 循环遍历列表

> ID：16044890
> 
> 赞同：0
> 
> 时间：2013-04-16T18:55:26.933
> 
> 标签：c#, list, foreach

当尝试遍历如下列表时，我将如何实现`foreach`循环？

```
ProductCollection myCollection = new ProductCollection
{
   Products = new List<Product>
   {
      new Product { Name = "Kayak", Price = 275M},
      new Product { Name = "Lifejacket", Price = 48.95M },
      new Product { Name = "Soccer ball", Price = 19.60M },
      new Product { Name = "Corner flag", Price = 34.95M }
   }
}; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T18:57:35.203

```
foreach(var product in myCollection.Products)
{
    // Do something with product
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-16T18:57:27.310

```
foreach (var item in myCollection.Products) 
{
   //your code here
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-16T18:58:03.160

似乎您有一个包含集合的集合。在这种情况下，您可以使用嵌套的 foreach 进行迭代，但如果您只想要产品，它就不太漂亮了。

相反，您可以使用 LINQ`SelectMany`扩展方法来展平集合：

```
foreach(var product in myCollection.SelectMany(col => col.Products))
    ; // work on product 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-16T19:02:28.453

如果您希望我们帮助您，您必须向我们展示所有相关代码。

无论如何，如果 ProductCollection 是这样的：

```
 public class ProductCollection 
 {
      public List<Product> Products {get; set;}
 } 
```

然后像这样填写：

```
 ProductCollection myCollection = new ProductCollection
    {
        Products = new List<Product>
        {
            new Product { Name = "Kayak", Price = 275M},
            new Product { Name = "Lifejacket", Price = 48.95M },
            new Product { Name = "Soccer ball", Price = 19.60M },
            new Product { Name = "Corner flag", Price = 34.95M }
        }
    }; 
```

并像这样迭代：

```
 foreach (var product in myCollection.Products) 
 {
      var name = product.Name;
      // etc...
 } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-16T19:03:30.183

尝试：

```
 foreach(Product product in myCollection.Products)
 {

 } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-16T18:58:57.307

尝试这个。-

```
foreach (var product in myCollection.Products) {
    // Do your stuff
} 
```

# objective-c - LSSharedFileListInsertItemURL 未更改名称

> ID：16044895
> 
> 赞同：3
> 
> 时间：2013-04-16T18:55:49.067
> 
> 标签：objective-c, cocoa

我遇到了 LSSharedFileListInsertItemURL 的问题。我正在尝试将一个项目添加到 Finder 侧边栏，效果很好。它唯一不做的就是更改侧边栏中项目的名称。我将“FolderName”作为参数推送，但在运行此函数后，该项目不会重命名。它确实会随着名称闪烁一秒钟，但很快又变回其实际名称。我已经尽可能多地搜索以找到解决方案，但一无所获。如果有人发现我的代码有问题或有“黑客”来使其正常工作，请告诉我。

```
-(void) addPathToSharedItem:(NSString *)path
{

    CFURLRef url = (__bridge CFURLRef)[NSURL fileURLWithPath:path];

    // Create a reference to the shared file list.
    LSSharedFileListRef favoriteItems = LSSharedFileListCreate(NULL, kLSSharedFileListFavoriteItems, NULL);

    if (favoriteItems) {

        //Insert an item to the list.
        CFStringRef mdcName = CFSTR("FolderName");

        LSSharedFileListItemRef item = LSSharedFileListInsertItemURL(favoriteItems, kLSSharedFileListItemLast, mdcName, NULL, url, NULL, NULL);

        if (item){

            CFRelease(item);
        }
    }

    CFRelease(favoriteItems);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-10-30T13:42:38.090

[我知道这个问题很久以前就被问过了，但似乎在其他地方找不到合适的答案。]

Finder 在 LSSharedFileListInsertItemURL 后不刷新收藏夹名称实际上是[2013 年向 Apple 报告](http://lists.apple.com/archives/cocoa-dev/2013/Jan/msg00025.html)的已知错误。

我们发现手动添加任何其他文件夹到收藏夹会刷新收藏夹部分并显示之前通过 LSSharedFileListInsertItemURL 设置的正确名称。

一个非常肮脏的解决方法是通过插入任何其他项目然后立即删除它来自动执行此操作。

以下代码（抱歉，在 C++ 中，但它可以轻松移植到 Objective C）实现了这一点：

```
// Create a reference to the shared file list.
LSSharedFileListRef favoriteItems = LSSharedFileListCreate(NULL, kLSSharedFileListFavoriteItems, NULL);
if (!favoriteItems)
  return false;

//Insert an item to the list.
LSSharedFileListItemRef item = LSSharedFileListInsertItemURL( favoriteItems, //Insert in this list
                                                             kLSSharedFileListItemBeforeFirst, //Here
                                                             (CFStringRef) shortCurtNameNS, //Shortcut name
                                                             NULL, //Icon
                                                             url,  //URL / path
                                                             NULL,
                                                             NULL);
if (item)
  CFRelease(item);

// Here it goes dark. Really dark.
// Finder does not refresh Favorites until another one is inserted "manually".
// The following lines just emulates this : insert another item then immediately remove it. This will refresh favs.
// KarmaPoints--;
CFURLRef dummy = (__bridge CFURLRef)[NSURL fileURLWithPath:@"/"];
NSString * dummyName = [NSString stringWithCString:"Root" encoding:[NSString defaultCStringEncoding]];
LSSharedFileListItemRef dummyItem = LSSharedFileListInsertItemURL( favoriteItems, //Insert in this list
                                                             kLSSharedFileListItemLast, //Here
                                                             (CFStringRef) dummyName, //Shortcut name
                                                             NULL, //Icon
                                                             dummy,  //URL / path
                                                             NULL,
                                                             NULL);
// Remove it
LSSharedFileListItemRemove(favoriteItems, dummyItem);
if (dummyItem)
  CFRelease(dummyItem); 
```

# php - 如何用数组填充表单助手选择？

> ID：16044896
> 
> 赞同：0
> 
> 时间：2013-04-16T18:55:53.670
> 
> 标签：php, forms, cakephp, view, controller

我有以下数组数据是从不是我的表中获取的。

```
Array
(
    [0] => Array
        (
            [sys_sbu] => Array
                (
                    [sbu_id] => EO
                    [sbu_name] => Executive Officer
                )

        )

    [1] => Array
        (
            [sys_sbu] => Array
                (
                    [sbu_id] => FIN
                    [sbu_name] => Finance
                )

        )

    [2] => Array
        (
            [sys_sbu] => Array
                (
                    [sbu_id] => G01
                    [sbu_name] => TEST GROUP
                )

        )

    [3] => Array
        (
            [sys_sbu] => Array
                (
                    [sbu_id] => MAF
                    [sbu_name] => Medical Affairs
                )

        )

    [4] => Array
        (
            [sys_sbu] => Array
                (
                    [sbu_id] => PCS
                    [sbu_name] => Patient Care Services
                )

        )

    [5] => Array
        (
            [sys_sbu] => Array
                (
                    [sbu_id] => SSS
                    [sbu_name] => Strategic Support Services
                )

        )

) 
```

基本上，该表`sys_sbu`有 2 列。`sbu_id`和`sbu_name`。在我看来使用以下代码似乎不会产生预期的结果。

```
echo $this->Form->input('Groups', array(
    'type'=>'select',
    'options' => $groups)
); 
```

![在此处输入图像描述](https://i.stack.imgur.com/Unyn4.png)

我想要发生的是每个`select`选项的值将是，`sbu_id`而显示给选择的是`sbu_name`. 像这样：

```
<select>
  <option value="EO">Executive Officer</option>
  <option value="FIN">Finance</option>
  <option value="etc">etc</option>
</select> 
```

我如何实现这一目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T19:00:04.160

通常，如果您的和在模型定义中正确设置， a`$this->YourModel->find('list')`将返回适当的数组。`displayField``primaryKey`

如果由于某种原因它们不是，您必须手动调整您的选择数组看起来像这样

```
array(
    [id1] => name1,
    [id2] => name2,
    etc
) 
```

~~但是请查看[find('list')](http://book.cakephp.org/2.0/en/models/retrieving-your-data.html)，因为在 95% 的情况下，它解决了这种“问题”。~~ 只是重新阅读它不是你的桌子，所以我猜你根本没有找到。但是，解决方案仍然是，在您从另一个表中获取的数组中执行一个 for 并像我之前指出的那样对其进行调整，ids 作为键，名称作为值

# clojure - js->clj生成的序列为什么不能调用seq函数？

> ID：16044897
> 
> 赞同：3
> 
> 时间：2013-04-16T18:55:55.077
> 
> 标签：clojure, clojurescript

虽然我可以将一个简单的 js 对象变成一个 clojure 对象，例如；

```
(-> "{a: 2, b: 3}" js* js->clj) 
```

我显然无法`goog.events.BrowserEvent`在处理程序函数中对特定对象执行此操作，例如：

```
(defn handle-click [e]
  ...
  (-> e .-evt js->clj keys) ;; <-------------
  ... 
```

该函数确实被应用了，但是生成的对象不响应像`count`or之类的序列函数`first`，尽管我可以使用`aget`. 我在 chrome 的控制台中收到的错误消息是；

```
Uncaught Error: No protocol
method ISeqable.-seq defined for type object: [object Object] 
```

为什么会这样？不应该`js->clj`与所有对象一起工作吗？

我怎样才能解决这个问题？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-21T16:34:36.647

当您传递返回相同对象的后代时，`js->clj`唯一会更改完全是 JavaScript 对象的东西（它是使用`instance?`而不是实现的`isa?`，并且有充分的理由） 。(and ) 之所以有效，是因为它可以编译成JavaScript 的语法。`js\Object` `js->clj``aget``aset``object[field-name]`

您可以将`ISeq`协议（或任何其他协议）扩展到 ，`goog.events.BrowserEvent`并且所有可以使用的功能`ISeq`都可以使用`goog.events.BrowserEvent`. Chris Houser有一个[演讲](http://www.youtube.com/watch?v=5edtbpVOOBI)，他展示了如何将一堆协议扩展到 goog Map。我建议观看整个演讲，但与您的问题相关的部分从大约 14 分钟开始。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T01:20:31.140

首先，我在 google 闭包中找到了获取对象键和值的函数：

```
 (defn goog-hash-map [object]
   (zipmap (goog.object/getKeys object) (goog.object/getValues object))) 
```

然后，通过研究 cljs.core 的源代码，我意识到我所要做的就是用它扩展 IEncodeClojure 接口：

```
 (extend-protocol IEncodeClojure
   goog.events.BrowserEvent
   (-js->clj
    ([x {:keys [keywordize-keys] :as options}]
       (let [keyfn (if keywordize-keys keyword str)]
         (zipmap (map keyfn (gobj/getKeys x)) (gobj/getValues x))))
    ([x] (-js->cljs x {:keywordize-keys false})))) 
```

原始[代码](https://github.com/clojure/clojurescript/blob/master/src/cljs/cljs/core.cljs)不适用于此对象，因为它的类型必须完全是 Object。我试图将比较函数更改为实例？，即

```
(instance? x js/Object) (into {} (for [k (js-keys x)]
                                      [(keyfn k) (thisfn (aget x k))])) 
```

但这也不起作用，挥舞着以下错误，这让我接受了以前的方法。

```
Uncaught TypeError: Expecting a function in instanceof check, 
but got function Object() { [native code] }`. 
```

# nutch - 即使从 seed.txt (Nutch 2.1) 中删除 URL，网站也会被抓取

> ID：16044906
> 
> 赞同：1
> 
> 时间：2013-04-16T18:56:35.277
> 
> 标签：nutch, web-crawler

我在seed.txt 中使用url-1 执行了成功的爬取，我可以在MySQL 数据库中看到爬取的数据。现在，当我尝试通过将 seed.txt 中的 url-1 替换为 url-2 来执行另一次新的爬网时，新的爬网从获取步骤开始，并且它试图获取的 url 是 seed.txt 中旧的替换 url。我不确定它是从哪里获取旧网址的。

我试图检查隐藏的种子文件，我没有找到任何文件，并且在 NUTCH_HOME/runtime/local 中只有一个文件夹 urls/seed.txt 我运行我的爬虫命令。请告知可能是什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T16:24:50.997

您的爬网数据库包含要爬网的 URL 列表。除非您删除原始爬网目录或创建新目录作为新爬网的一部分，否则将使用原始 URL 列表并使用新 URL 进行扩展。

# ibm-mobilefirst - JSONStore 事件未触发

> ID：16044908
> 
> 赞同：0
> 
> 时间：2013-04-16T18:56:40.520
> 
> 标签：ibm-mobilefirst, jsonstore

上周我尝试了很多很多方法，但我无法让 JSONStore 回调持续触发。我正在使用运行 Worklight 5.0.6 的 Mac。我将提供我认为最简单的示例：使用硬编码值从 Worklight JSONStore 生成器创建的代码。

在初始化集合并调用 findAll() 之类的函数后，不会触发成功或失败回调。我有回调工作，但不是一致或可靠的。我无法解释为什么它大多不起作用。

我已经尝试过使用 jQuery 承诺框架和不推荐使用的回调方法。在这两种情况下，回调都不会被调用。我还尝试在 JSONStore 上调用 destroy() 以强制进行新创建。

```
function initContactsCollection() {

if ((WL.Client.getEnvironment() === 'iphone' ||
WL.Client.getEnvironment() === 'ipad' ||
WL.Client.getEnvironment() === 'android') &&
typeof cordova !== 'undefined' &&
typeof WL.JSONStore !== 'undefined' &&
typeof jQuery !== 'undefined' &&
typeof jQuery.event.trigger === 'function') {

// var pwd = prompt('Enter your password');

var contacts = WL.JSONStore.initCollection("contacts",
        {"agentId":"string","notes.isSuccessful":"boolean","firstName":"string","workPhone":"string","email1":"string","email2":"string"},
    {
        //password: pwd,

        adapter : {
            name: 'ams',
            replace: 'updateContact',
            remove: 'deleteContactNote',
            add: 'addNewContact',
            load: {
                procedure: 'getContacts',
                params: ["AA12345678910X-DB"],
                key: 'contacts'
            },
            accept: function (data) {
                return (data.status === 200);
            }
        }
    });

contacts.promise

.done(function () {
    WL.Logger.debug('[JSONStore] contacts is ready to be used.');

    contacts.count().done(function(res){
        if(res < 1){
            customers.load();
        }
    });
})

.fail(function (errObj) {
    WL.Logger.debug('[JSONStore]' + errObj.toString());
});

} else {
    WL.Logger.debug('[JSONStore] Check your dependencies.');
}

} // end function 
```

![科尔多瓦控制台](https://i.stack.imgur.com/aEfrf.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T20:15:53.643

您的 JavaScript 中有许多错误，您调用的是customers.load 而不是contacts.load，并且您拥有的承诺的嵌套可能不是您想要的。我没有你的适配器，所以我不能 100% 确定这段代码有效，但它会非常接近你想要的。

```
function initContactsCollection() {

    if ((WL.Client.getEnvironment() === 'iphone' ||
        WL.Client.getEnvironment() === 'ipad' ||
        WL.Client.getEnvironment() === 'android') &&
        typeof cordova !== 'undefined' &&
        typeof WL.JSONStore !== 'undefined' &&
        typeof jQuery !== 'undefined' &&
        typeof jQuery.event.trigger === 'function') {

// var pwd = prompt('Enter your password');

    var contacts = WL.JSONStore.initCollection("contacts",
        {"agentId":"string","notes.isSuccessful":"boolean","firstName":"string","workPhone":"string","email1":"string","email2":"string"},
        {
            //password: pwd,

            adapter : {
                name: 'ams',
                replace: 'updateContact',
                remove: 'deleteContactNote',
                add: 'addNewContact',
                load: {
                    procedure: 'getContacts',
                    params: ['AA12345678910X-DB'],
                    key: 'contacts'
                },
                accept: function (data) {
                    return (data.status === 200);
                }
            }
        });

        contacts.promise

        .then(function () {
            WL.Logger.debug('[JSONStore] contacts is ready to be used.');

            return contacts.count();
        })
        .then(function(res){
            var newDeferred;
            if(res < 1){
                WL.Logger.debug('DB Empty, calling load');
                return contacts.load();
            }else{
                newDeferred = $.Deferred();
                setTimeout(function(){
                    newDeferred.resolve(0);
                });
                return newDeferred;
            }
        })
        .then(function(){
            WL.Logger.debug('done with setup stuff');
        })

        .fail(function (errObj) {
            WL.Logger.debug('[JSONStore]' + errObj.toString());
        });

    } else {
        WL.Logger.debug('[JSONStore] Check your dependencies.');
    }

} // end function 
```

# intellij-idea - 如何在 Intellij IDEA 中自动上传已编译的咖啡脚本文件？

> ID：16044910
> 
> 赞同：2
> 
> 时间：2013-04-16T18:56:44.310
> 
> 标签：intellij-idea, coffeescript

我通过 FTP 使用自动部署。一切都很顺利，直到我开始使用咖啡脚本及其文件观察器功能，每次更改时都会将我的 .coffee 文件重新编译为 .js 文件。

问题是IDEA不想像其他人一样上传这些编译文件。所以我在每次更改后手动按下热键上传编译文件，我想在服务器上看到。

怎样才能使用起来更方便？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T20:28:06.107

有一个[选项可以自动上传外部更改](http://img542.imageshack.us/img542/9481/20130416230153.png)。

现在IDEA在调用文件观察器后不会执行同步，所以你需要做`File`| `Synchronize`, IDE 将检测更改并上传它们。

下一次更新将有一个选项让文件观察器在执行后执行同步作为解决[此功能请求](http://youtrack.jetbrains.com/issue/WEB-7065)的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T14:40:34.283

此功能请求涉及在每次更改时同步输出目录中的所有文件的可能性（某些转译器需要）。但是，AFAIK，CoffeeScript 编译器并非如此——同步应该在那里工作。生成的 js 文件是编译完成后立即出现在 Project View 中，还是必须手动同步视图才能看到更改？在后一种情况下，文件监视器配置一定有问题（例如，输出路径设置不正确）。如果文件正确同步，设置“上传外部更改”选项应该可以解决问题

# java - Eclipse Java 远程项目不会构建和运行

> ID：16044912
> 
> 赞同：0
> 
> 时间：2013-04-16T18:56:48.853
> 
> 标签：java, eclipse-rse

我已经花了 6 小时以上的时间，最后我决定寻求社区的帮助。

我在远程 SSH 集群上有一个 Java 项目，我已经使用 RSE（远程系统资源管理器）将它导入到 eclipse 中。该项目曾经是一个本地项目，并且有许多库/依赖项。我已经配置了所有这些，并且所有路径都可以在远程集群上访问。

我也想使用 SSH 在远程集群上运行它（通过 Eclipse 外部工具）。我已经配置了一切，甚至成功地运行了另一个项目。然而，现在的问题是 Eclipse 甚至没有在远程服务器上创建一个 SINGLE .class 文件！！！

该项目没有任何错误（如果我只是将其`bin`文件夹从我的计算机复制到它可以工作的远程集群）但是，由于 Eclipse 不生成单个 .class 文件，因此`bin`在远程集群上的文件夹中没有任何东西可以运行。
还值得一提的是，由于某种我不明白的原因，Project Exlorer 中的项目名称上有一个红色的 x（表示错误），但该项目中的任何源代码/包都没有这样的东西。
“自动构建”选项处于活动状态，并且手动清理和构建它也不起作用。

非常感谢任何帮助，因为我真的很绝望，需要让这件事正常工作。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-21T13:09:52.320

我遇到了类似的问题，这个解决方案对我有用：在 META-INF 文件夹（本地项目上下文）中的 java context.xml 文件中，我添加了 path="/myProjectName" 并开始自动构建。

```
<Context path="/jvals" antiJARLocking="true" antiResourceLocking="true">
<Resource name="jdbc/jvals".... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-23T03:51:24.160

我永远无法解决这个问题，我唯一能想到的就是 Eclipse 中的一个错误。似乎由于与集群之间的传输速度较慢，一些文件无法构建，因为它们被部分获取/存储。我最终编写了一个 shell 脚本，将文件传输到远程集群并在那里编译并运行它。

如果有人有更好的建议，我将不胜感激。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-01T10:32:00.867

我用另一种方式解决问题；转到 linux 中的远程项目；

cd youRemoteProject/build/classes 如果你的 jars 在 xxx\lib\a.jar, b.jar

java -cp ".;xxx\lib*" package.package.className

（您必须使用 Java 6 或更高版本，类路径通配符是 JVM 的一部分）

# activerecord - 为给定的 Resque 队列定义 ActiveRecord 连接

> ID：16044920
> 
> 赞同：0
> 
> 时间：2013-04-16T18:57:00.020
> 
> 标签：activerecord, heroku, resque

## 问题域

Heroku Cedar 堆栈，具有多个数据库。RDS 用于主数据库，Postgres 用于第二个 Analytics 数据库。服务器使用读/写 RDS*和*Postgres 数据库运行。Nightly rake 任务，在不同的环境中运行，需要在 RDS 数据库的只读从属中运行特定的 Resque 队列。

## Postgres 数据库连接

作为记录，Postgres 数据库中的所有模型包括：

```
module Trove::PostgresConnection
  def self.included(base)
    base.class_eval do
      …set up Postgres database
    end
  end
end 
```

这工作正常，并且作为注入每个类的模块，不会被 ActiveRecord::Base.connection 的任何更改压扁

## MySQL 连接

使用 Heroku RDS 插件定义。连接到读/写生产数据库。不幸的是，*无论环境如何，都使用此连接*。因此，在 Heroku 上运行 rake 任务`RAILS_ENV=analytics rake some:task`不会使用此连接`ActiveRecord::Base`：

```
analytics:
  adapter: mysql2
  encoding: utf8
  database: dbase
  username: uname
  password: pword
  host: read-only.uri.on.amazonaws.com
  reconnect: true
  port: 3306 
```

相反，它使用 RDS 连接中提供的连接字符串：

```
puts Rails.env
-> 'analytics'
puts SomeModel.connection_config[:host]
-> read-write.uri.on.amazonaws.com 
```

我花了一段时间才弄清楚。自我注意：不要只看环境，还要看数据库主机。

## 当前的解决方法

```
# Perform an operation using another database connection in ActiveRecord
module SwapConnection

  def with_connection_to(config, &block)
    ActiveRecord::Base.connection.disconnect!
    ActiveRecord::Base.establish_connection(config)

    yield

  end
end

require 'swap_connection'
class TroveCalculations
  @queue = :trove_queue

  def self.perform(class_name, id)
    SwapConnection.with_connection_to(Rails.env) do
      Do something in a given queue
    end
  end
end 
```

## 期望的能力

在 Procfile 中有这样的东西

```
troveworker:    env RAILS_ENV=analytics QUEUE=trove_queue bundle exec rake resque:work 
```

它*实际上使用了该 worker 的分析 database.yml 配置*。我们目前使用这个 Procfile 运行我们的服务器，但它仍然使用 RDS 数据库。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T16:55:32.367

为了扩展我对这个问题的评论，我的意思是为你的数据库添加一个“Heroku 方式”的配置，然后在你的 Procfile 中为将处理该队列上的作业的一个工作人员引用它。

使用新名称添加您需要的数据库配置的配置/环境变量：

```
heroku config:add ANALYTICS_DB=postgres://some_url 
```

在您的 中`Procfile`，根据您想要的示例：

```
troveworker:    env DATABASE_URL=$(ANALYTICS_DB) QUEUE=trove_queue \
                bundle exec rake resque:work 
```

通过这种方式，您必须为每个队列使用不同的配置，但配置至少在代码之外。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T00:35:16.580

这里的问题是 Heroku 生成自己的 database.yml 文件：[https ://devcenter.heroku.com/articles/ruby-support#build-behavior](https://devcenter.heroku.com/articles/ruby-support#build-behavior)

通过使用 Amazon RDS 插件，Heroku 设置了一个`DATABASE_URL`环境变量。您可以通过从应用程序目录的根目录运行以下命令来查看其内容： `heroku config`

此外，从 Rails 3.2 开始，它将使用`DATABASE_URL`env var（如果已设置）而不是 database.yml 文件：

[https://github.com/mperham/sidekiq/issues/503#issuecomment-11862427](https://github.com/mperham/sidekiq/issues/503#issuecomment-11862427)

最简单的解决方法可能是：

1.  创建一个名为`DATABASE_URL_ANALYTICS`w/ Postgres 连接字符串的环境变量： `heroku config:add DATABASE_URL_ANALYTICS=postgres://xxxxxxxxxxxx`

2.  在 rake 文件的开头（在任何 rails 初始化可能发生之前），添加： `ENV['DATABASE_URL'] = ENV['DATABASE_URL_ANALYTICS'] if Rails.env.analytics?`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-16T22:57:56.143

我只玩过 Heroku，但我认为数据库连接信息被 Heroku 工具基于 Heroku 工具带指定的环境变量覆盖。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-03T15:58:02.827

## 更新：不工作。（原始答案保留为文档）

这就是我们解决它的方法：

档案：

```
troveworker:    env RAILS_ENV=analytics QUEUE=trove_queue rake trove:worker 
```

lib/tasks/trove.rake：

```
desc 'Start the Resque workers in the proper environment'
task :worker do
  SwapConnection.with_connection_to Rails.env do
    Rake::Task['resque:work'].invoke
  end
end 
```

这个解决方案也为我们解决了一些其他问题，并且效果很好。感谢大家。

# shell - 如何使用 awk 从文件中查找最大值和平均值

> ID：16044922
> 
> 赞同：0
> 
> 时间：2013-04-16T18:57:04.403
> 
> 标签：shell, awk

我有一个示例文件，例如

```
stat1:  sample:        0.0
stat2:  sample:        0.0
stat3:  sample:        349.7

stat1:  sample:        0.0
stat2:  sample:        0.0
stat3:  sample:        349.7

stat1:  sample:        0.0
stat2:  sample:        0.0
stat3:  sample:        349.7 
```

我要做的是找到每个统计数据的最大值和平均值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T19:17:47.873

如果您不介意使用 Perl：

```
perl -lane '{ if(/(stat\d+)/) {
    $m{$1} =$F[2] if $m{$1}<$F[2] || !$m{$_};
    $s{$1}+=$F[2]; $c{$1}++
}} END{print "$_: $m{$_},".$s{$_}/$c{$_} for keys %c}' input 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T19:28:37.943

```
awk '{
         if (NF != 3) next
         sum[$1] += $3;
         if (cnt[$1]++ == 0) { max[$1] = $3; min[$1] = $3; }
         if ($3 > max[$1]) max[$1] = $3
         if ($3 < min[$1]) min[$1] = $3
     }
     END {
         printf "%-8s %4s %8s %8s %8s\n", "Sample", "N", "Minimum", "Maximum", "Average"
         for (key in sum)
         {
             printf "%-8s %4d %8.2f %8.2f %8.2f\n", key, cnt[key], min[key], max[key], sum[key]/cnt[key]
         }
     }' data-file 
```

示例输出（来自问题中的数据，这非常令人兴奋）：

```
Sample      N  Minimum  Maximum  Average
stat2:      3     0.00     0.00     0.00
stat1:      3     0.00     0.00     0.00
stat3:      3   349.70   349.70   349.70 
```

此代码包括最小值和最大值；如果不需要，很容易删除。请注意，它会跳过数据文件中的空白行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-16T19:30:19.650

使用 awk 关联数组非常简单：

*平均最大值.awk*

```
# Skip empty lines
NF==0 { next }

# Keep a tally of number of elements and their sum
{ cnt[$1]++; sum[$1] += $3 }

# If max[$1] has not been defined or if it is smaller than $3
cnt[$1] == 1 || max[$1] < $3 {
  max[$1] = $3
}

END {
  for (k in sum)
    print k, max[k], sum[k]/cnt[k]
} 
```

像这样运行它：

```
awk -f meanmax.awk infile 
```

输出：

```
stat1: 0.0 0                    
stat2: 0.0 0
stat3: 349.7 349.7 
```

或者，如果在最初发布的输入上运行：

```
stat1: 18.0 10.3333             
stat2: 45.0 16.6667
stat3: 239.7 89.4667 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-16T19:34:16.900

如果您需要所有值的平均值和最大值，您可以尝试这样的事情

```
awk '/sample:/ {s[$1] += $3; if(++n[$1]==1 || max[$1]<$3) max[$1] = $3}
END { for (i in s) print i" mean = "s[i]/n[i]", max = "max[i] }
' <<EOT
stat1:  sample:        0.0
stat2:  sample:        0.0
stat3:  sample:        349.7

stat1:  sample:        0.0
stat2:  sample:        0.0
stat3:  sample:        349.7

stat1:  sample:        0.0
stat2:  sample:        0.0
stat3:  sample:        349.7
EOT 
```

输出：

```
stat3: mean = 349.7, max = 349.7
stat1: mean = 0, max = 0.0
stat2: mean = 0, max = 0.0 
```

# linux - 将域名链接到服务器

> ID：16044923
> 
> 赞同：0
> 
> 时间：2013-04-16T18:57:08.657
> 
> 标签：linux, ubuntu, dns, named

因此，我第一次深入研究了在没有控制面板的情况下运行服务器的世界，通过终端完成所有操作，并在需要时偶尔登录桌面 gui。

据我所知，我几乎所有东西都在工作，防火墙很麻烦，但我想我现在已经搞定了。

我不能完全解决的最后一件事是如何让我购买的域名正确指向我的服务器（我总是通过控制面板完成此操作，在此之前大部分都是自动化的）。

这些是我到目前为止采取的步骤（这些可能是错误的，我一直在疯狂地搜索这件事，但到处都告诉我做一些不同的事情，所以如果有问题请告诉我）。

*   购买的名称，例如“mydomain.com”
*   让服务器运行 Ubuntu 64 位。IP地址例如“1.2.3.4”
*   主机为我提供了 3 个“DNS 解析器”，例如：“1.1.1.1”、“1.1.1.2”、“1.1.1.3”

*   我已经在我的服务器上设置了主机名

*   在终端输出中运行“主机名”：`mydomain`
*   检查 /etc/hostname 输出：`mydomain.com`

*   我已将这 3 个 DNS 解析器添加到我的 /etc/resolv.conf 文件中，如下所示：

    ```
    domain mydomain.com
    search mydomain.com
    nameserver 1.1.1.1
    nameserver 1.1.1.2
    nameserver 1.1.1.3 
    ```

*   我已经在我的 httpd.conf 文件中设置了虚拟主机：

    ```
    <VirtualHost 1.2.3.4:80>
    ServerName mydomain.com
    ServerAlias mydomain
    DocumentRoot /var/www/mysite
    </VirtualHost> 
    ```

现在从这里开始，我一直在玩不同的东西。目前我已经进入我的域名注册面板并将三个域名服务器设置为“ns1.mydomain.com”、“ns2.mydomain.com”、“ns3.mydomain.com”。

我已经安装了 webmin 来尝试设置 DNS 区域记录，这就是我目前在各种命令的输出中得到的：

（其中 1.1.1.1、1.1.1.2、1.1.1.3 是那些 DNS 解析器）

[b]nslookup -sil 本地主机[/b]

```
conn@duckfusion:~$ nslookup -sil localhost
;; Got SERVFAIL reply from 1.1.1.2, trying next server
;; Got SERVFAIL reply from 1.1.1.3, trying next server
;; connection timed out; no servers could be reached 
```

[b]nslookup -sil mydomain.com[/b]

```
conn@duckfusion:~$ nslookup -sil mydomain.com
;; Got SERVFAIL reply from 1.1.1.2, trying next server
;; Got SERVFAIL reply from 1.1.1.3, trying next server
;; connection timed out; no servers could be reached 
```

这是我的“named.conf”文件：

```
// This is the primary configuration file for the BIND DNS server named.
//
// Please read /usr/share/doc/bind9/README.Debian.gz for information on the
// structure of BIND configuration files in Debian, *BEFORE* you customize
// this configuration file.
//
// If you are just adding zones, please do that in /etc/bind/named.conf.local

include "/etc/bind/named.conf.options";
include "/etc/bind/named.conf.local";
include "/etc/bind/named.conf.default-zones"; 
```

[u]named.conf.options[/u]

```
options {
        directory "/var/cache/bind";

        // If there is a firewall between you and nameservers you want
        // to talk to, you may need to fix the firewall to allow multiple
        // ports to talk.  See http://www.kb.cert.org/vuls/id/800113

        // If your ISP provided one or more IP addresses for stable
        // nameservers, you probably want to use them as forwarders.
        // Uncomment the following block, and insert the addresses replacing
        // the all-0's placeholder.

         forwarders {
                1.1.1.1; 1.1.1.2; 1.1.1.3; 208.67.222.222; 208.67.220.220;
         };

        //========================================================================
        // If BIND logs error messages about the root key being expired,
        // you will need to update your keys.  See https://www.isc.org/bind-keys
        //========================================================================
        dnssec-validation auto;

        auth-nxdomain no;    # conform to RFC1035
        listen-on-v6 { any; };
        allow-query {
                any;
                };
        listen-on port 53 {
                any;
                };
}; 
```

[u]named.conf.local[/u]

```
//
// Do any local configuration here
//

// Consider adding the 1918 zones here, if they are not used in your
// organization
//include "/etc/bind/zones.rfc1918";

zone "mydomain.com" {
        type master;
        file "/var/lib/bind/mydomain.com.hosts";
        }; 
```

[u]/var/lib/bind/mydomain.com.hosts[/u]（其中 1.2.3.4 是我服务器的 IP）

```
$ttl 38400
mydomain.com. IN      SOA     mydomain.com. me.myemail.com. (
                        1366054515
                        10800
                        3600
                        604800
                        38400 )
mydomain.com. IN      NS      mydomain.com.
mydomain.com. IN      A       1.2.3.4
www.mydomain.com.     IN      A       1.2.3.4
mail.mydomain.com.    IN      A       1.2.3.4
ftp.mydomain.com.     IN      A       1.2.3.4
ns1.mydomain.com.     IN      A       1.2.3.4
ns2.mydomain.com.     IN      A       1.2.3.4
ns3.mydomain.com.     IN      A       1.2.3.4
mydomain.com. IN      NS      ns1.mydomain.com.
mydomain.com. IN      NS      ns2.mydomain.com.
mydomain.com. IN      NS      ns3.mydomain.com.
mydomain.com. IN      MX      10 mail.mydomain.com. 
```

这就是我所知道的。

我显然可以通过 IP 地址作为 URL 访问服务器，但到目前为止还不是通过域名。

谁能告诉我：

A）我哪里出错了 B）我需要做什么才能实现这一目标？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T20:23:44.173

运行你自己的名字是多余的，不需要。有效设置如下所示：

1.  您的网络服务器托管服务提供商（您的网站所在的位置）为您提供了一些 DNS 解析器。这些旨在为您的 Web 服务器提供 DNS 解析，以便它可以找到 Internet 上的其他主机。这些解析器与托管您的域无关，您无法更改它们的域定义。
2.  您的 DNS 托管服务提供商拥有自己的 DNS 服务器，默认情况下使用这些服务器托管您的 DNS“A”记录。如果您确实重新配置了 DNS 托管帐户以使用 Web 提供商的 DNS 服务器，那么这是一个错误。您无法将 DNS 记录添加到这些服务器。
3.  在您的 DNS 托管服务提供商的控制面板上，首先将其设置回使用他们的 DNS 服务器；然后为您的域创建一个“A”记录，指向您的网络服务器主机的 IP。

总之：

```
DNS Hosting Provider
    DNS Server(s) contain:
        www.yourserver.com      A     1.2.3.4
        alias.yourserver.com    CNAME www.yourserver.com (maybe)
        yourserver.com          MX    where.you.receive.mail (maybe)

Web Hosting Provider
    Your web server at 1.2.3.4
        /etc/resolv.conf
            nameserver 1.1.1.1
            nameserver 1.1.1.2
            nameserver 1.1.1.3 
```

这就是您需要做的所有事情，其他人才能找到您的服务器。

运行您自己的 DNS 的唯一原因是托管由多台计算机组成的整个网络，在防火墙后面，或者托管整个 C 类或更多 IP 地址集。为此，您需要与其他提供商达成对等和路由协议，我认为您没有。

***编辑***

```
$ dig duckfusion.com

; <<>> DiG 9.8.2rc1-RedHat-9.8.2-0.17.rc1.el6_4.4 <<>> duckfusion.com
;; global options: +cmd
;; Got answer:
;; ->>HEADER<<- opcode: QUERY, status: NOERROR, id: 32080
;; flags: qr rd ra; QUERY: 1, ANSWER: 2, AUTHORITY: 5, ADDITIONAL: 17

;; QUESTION SECTION:
;duckfusion.com.                        IN      A

;; ANSWER SECTION:
duckfusion.com.         1800    IN      A       87.117.219.53
duckfusion.com.         1800    IN      A       192.31.186.140

;; AUTHORITY SECTION:
duckfusion.com.         172800  IN      NS      dns4.registrar-servers.com.
duckfusion.com.         172800  IN      NS      dns5.registrar-servers.com.
duckfusion.com.         172800  IN      NS      dns3.registrar-servers.com.
duckfusion.com.         172800  IN      NS      dns1.registrar-servers.com.
duckfusion.com.         172800  IN      NS      dns2.registrar-servers.com. 
```

# quickbooks - Quickbooks QBXML 和 customerAdd

> ID：16044924
> 
> 赞同：2
> 
> 时间：2013-04-16T18:57:11.537
> 
> 标签：quickbooks, qbxml

我正在使用 Intuit Web 连接器。我可以使用“customerAdd”添加客户，并使用“openBalance”创建发票。我已尽一切努力使其创建发票编号（创建的发票没有编号，只是空白）。我还想要商品、数量和描述。这是“invoiceAdd”的工作吗？感谢您的关注。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T00:40:20.527

如果您尝试创建发票，您应该使用`InvoiceAdd`.

您应该使用 OpenBalance 的唯一时间是客户的未结余额*不是您在 QuickBooks 中的发票的结果*。例如，如果您从另一个会计平台迁移，当您从另一个系统迁移时，您可能有一个未结余额。

除此之外，您*永远不*应该使用 OpenBalance 创建客户。

相反，创建一个实际发票。这里有些例子：

*   [qbXML 示例](http://wiki.consolibyte.com/wiki/doku.php/quickbooks_example_qbxml)
*   [发票添加示例](http://wiki.consolibyte.com/wiki/doku.php/quickbooks_qbxml_invoiceadd)

# javascript - 防止点击时的焦点事件

> ID：16044925
> 
> 赞同：0
> 
> 时间：2013-04-16T18:57:15.800
> 
> 标签：javascript, jquery, html

我有一个网页，里面有一堆 div 元素。此页面在连接到非常慢的机顶盒的电视上运行。该盒子运行嵌入式 Opera 浏览器 9.50 版。我唯一的输入设备是机顶盒的遥控器，没有鼠标！在此网页（在电视上）中，由于没有鼠标，用户使用遥控器上的向上/向下/向左/向右箭头键从一个 div 转到另一个 div。现在，当有人按得太快时，我正试图“去抖动”这些按键！我可以控制按键事件，但我没有阻止焦点事件的运气，不管我在按键处理程序中做什么，似乎它们都被触发了。

问题是：如何防止焦点转到当前元素的按键处理程序中的另一个元素？调用 keypress event.preventDefault() 并返回 false（从 keypress 处理程序）不会阻止焦点转移到下一个元素。换句话说，事件无论如何都会“冒泡”。我怎样才能防止这种情况？我也尝试过更改 tabIndex 属性，但没有用。

有任何想法吗。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T19:04:42.767

如果你想阻止点击事件的焦点，你必须`e.preventDefault()`从`mousedown`处理程序。无法从`click`处理程序中执行此操作，因为这不是物理事件，它只是`mousedown`和的抽象`mouseup`

如果要防止选项卡更改焦点，则必须`e.preventDefault()`使用 keydown 处理程序。不能从 开始`keypress`，因为`keypress`它不是物理事件，它是`keydown`和`keyup`事件的抽象（请注意，当您按住键时，按键会触发多次）。

[http://jsfiddle.net/gtwhF/](http://jsfiddle.net/gtwhF/)

```
$('#a').on('mousedown', function(e) {
    e.preventDefault();
})

$('#a').on('keydown', function(e) {
  if (e.keyCode == 9) { 
      e.preventDefault(); 
  } 
}) 
```

# php - 删除发送系统生成通知时显示在 Gmail 上的“通过 {hosting_server_name}”链接 (DailyRazor)

> ID：16044930
> 
> 赞同：2
> 
> 时间：2013-04-16T18:57:35.907
> 
> 标签：php, gmail, sendmail, joomla1.5, phpmailer

所以，我一直试图弄清楚这个几个星期，但没有任何运气。

我在 DailyRazor 上托管了一个旧的 Joomla 1.5 站点，当前代码使用了由 Joomla 自己的框架包装的 phpMailer。事情是这样的：每次网站发送一封自动电子邮件时，都会在发件人的电子邮件旁边显示一个“通过 ldz3.dailyrazor.com”链接，如下所示：

```
{senderName} {senderEmail} via ldz3.dailyrazor.com 
```

“via”这个词，有一个指向这个谷歌[文章](http://support.google.com/mail/answer/1311182?hl=en&ctx=mail "应该工作，对吧？")的链接。

反正。我创建了大量 SPF 记录，使用在线工具，复制一些博主发布的解决方案（当然是替换服务器和 dns 信息），甚至打开了几张票，希望他们的技术支持能帮助我，但没有运气。

我有其他使用类似代码的 Joomla 网站，并且此类链接从未出现在电子邮件中。

# speech-recognition - 使用语音识别来计算音节

> ID：16044931
> 
> 赞同：2
> 
> 时间：2013-04-16T18:57:39.953
> 
> 标签：speech-recognition

我试图找出我是否可以`System.Speech.SpeechRecognitionEngine` 在 5 秒的时间间隔内使用来计算音节或单词。

我一直在`SpeechRecognitionEngine`使用 、`DictationGrammar`和`SpeechRecognized`事件进行一些测试。

我需要创建一个应用程序，让你知道你是否说得太慢了，这就是为什么我想计算每 5 秒说多少字。

任何帮助将不胜感激

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-05T16:23:29.520

我不是 100% 确定您要使用什么平台，但这似乎是 windows。

因此，MSDN 上的代码示例将是开始获取识别事件信息和获取音频信息的好地方。

[http://msdn.microsoft.com/en-us/library/system.speech.recognition.recognitionresult.aspx](http://msdn.microsoft.com/en-us/library/system.speech.recognition.recognitionresult.aspx)

```
// Display information about the words in the recognition result.
  foreach (RecognizedWordUnit word in e.Result.Words)
  {
    RecognizedAudio audio = e.Result.GetAudioForWordRange(word, word);
    Console.WriteLine(" {0,-10} {1,-10} {2,-10} {3} ({4})",
      word.Text, word.LexicalForm, word.Pronunciation,
      audio.Duration, word.DisplayAttributes);
  } 
```

但是，也可以使用 AudioSignalProblem 枚举来检测一个人是否说话太慢。唯一的缺点是它不可配置。此链接中的代码：http: [//msdn.microsoft.com/en-us/library/system.speech.recognition.audiosignalproblem.aspx](http://msdn.microsoft.com/en-us/library/system.speech.recognition.audiosignalproblem.aspx)

```
// Initialize the speech recognition engine.
private void Initialize()
{
  sre = new SpeechRecognitionEngine();

  // Add a handler for the AudioSignalProblemOccurred event.
  sre.AudioSignalProblemOccurred += new EventHandler<AudioSignalProblemOccurredEventArgs>(sre_AudioSignalProblemOccurred);
}

// Gather information when the AudioSignalProblemOccurred event is raised.
void sre_AudioSignalProblemOccurred(object sender, AudioSignalProblemOccurredEventArgs e)
{
  StringBuilder details = new StringBuilder();

  details.AppendLine("Audio signal problem information:");
  details.AppendFormat(
    " Audio level:               {0}" + Environment.NewLine +
    " Audio position:            {1}" + Environment.NewLine +
    " Audio signal problem:      {2}" + Environment.NewLine +
    " Recognition engine audio position: {3}" + Environment.NewLine,
    e.AudioLevel, e.AudioPosition, e.AudioSignalProblem,
    e.recoEngineAudioPosition);

  // Insert additional event handler code here.
} 
```

# c++ - OpenGL顶点缓冲区对象不起作用

> ID：16044937
> 
> 赞同：0
> 
> 时间：2013-04-16T18:57:46.877
> 
> 标签：c++, opengl, vertex-buffer

我有一个 bunny.h，其中包含以下数据：

```
bunny[] | vertex coordinates xyz

NUM_TRIANGLES | the amount of triangles for the bunny

normals[] | the normals for each triangle

triangles[] | indices for the triangles 
```

我想将数据用于顶点缓冲区对象。

这是我尝试加载数据的方式

```
GLfloat values[NUM_TRIANGLES*3];
    for(int i = 0; i < NUM_TRIANGLES*3; i++)
        values[i] = bunny[i];

  //  init and bind a VBO (vertex buffer object) //
    glGenBuffers(1, &bunnyVBO);
    glBindBuffer(GL_ARRAY_BUFFER, bunnyVBO);

  //  copy data into the VBO //
    glBufferData(GL_ARRAY_BUFFER, sizeof(values), &values, GL_STATIC_DRAW);

  // init and bind a IBO (index buffer object) //
    glGenBuffers(1, &bunnyIBO);
    glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, bunnyIBO);

  //  copy data into the IBO //
    glBufferData(GL_ELEMENT_ARRAY_BUFFER, sizeof(triangles), &triangles, GL_STATIC_DRAW);
  // unbind active buffers //
  glBindVertexArray(0);
  glBindBuffer(GL_ARRAY_BUFFER, 0);
  glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, 0); 
```

稍后在程序中，我想使用以下代码呈现缓冲区：

```
glBindBuffer(GL_ARRAY_BUFFER, bunnyVBO);
glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, bunnyIBO);
glEnableClientState(GL_VERTEX_ARRAY);
glDrawElements(GL_TRIANGLES, NUM_TRIANGLES, GL_UNSIGNED_INT, triangles);
glDisableClientState(GL_VERTEX_ARRAY); 
```

OpenGL工作正常，但我没有看到兔子......（数据没有损坏或类似的东西，错误在我的代码中）有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T19:18:00.410

我没有看到任何对`glVertexPointer`. 如果你想使用 VBO 中的元素，它应该是

```
glDrawElements(GL_TRIANGLES, NUM_TRIANGLES, GL_UNSIGNED_INT, 0); 
```

# asp.net-mvc-2 - 同一页面中的两个视图

> ID：16044945
> 
> 赞同：0
> 
> 时间：2013-04-16T18:58:14.770
> 
> 标签：asp.net-mvc-2

我正在使用 asp.net MVC2，我是开发新手。我有一个包含 2 个下拉列表和一个按钮的视图，我希望当我单击该按钮时，会显示另一个视图，我希望两者都出现在同一页面上

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T19:04:05.800

有两种方法可以实现

1) 使用 Complete post back，您可以使用 Html.RenderAction 或加载部分视图。您可以使用一些标志来区分第一次页面加载和回发

2）您可以使用jquery AJAX并调用另一个View的控制器动作并获取内容并将其写入页面的div。

请对两者进行一些研究工作，我认为您可以得到您想要的结果。

# vb.net - 转换文本文件的最佳方法

> ID：16044955
> 
> 赞同：0
> 
> 时间：2013-04-16T18:58:59.690
> 
> 标签：vb.net, converter

我正在尝试制作一个转换程序，它将多个文本文件从 cad 设计文件转换为机器可以读取的文件。

每个文件都有多个值，布局如下：

```
X             -0.0001
Y              1.0500
Z              1.5700

LOCATION       0.0050 
```

每个文件代表机器应该去并做某事的位置。输出需要看起来像这样：

```
X-0.0001Y1.0500Z1.5700L0.0050
Other information regarding position is here also. 
```

所以这是一个相当简单的转换。但我想知道的是最好的方法是什么。我是否单独转换每个文件然后合并它们？其他信息必须放在文件的底部。所以哪里有更多的文件：

```
Location 1
Location 2
Location 1 parameters
location 2 parameters 
```

我尝试了几种不同的方法，但仍然无法找到最好的方法。

基本上我要问的是最好/最有效的方法是转换这些文件。对不起，如果这令人困惑。

注意我使用 vb.net 作为编程语言

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T20:05:58.043

if this is a project of enormous scale (e.g. millions of files), you might want to look into something like [map reduce](http://en.wikipedia.org/wiki/Map_reduce).

if not (which I'm guessing), I would suggest as follows:

parse each file sequentially, adding (appending)the results to each of TWO files. Finally, combine the two files and you're done.

LOCATIONS_FILE (FILE 1)

```
Location 1
Location 2
(etc) 
```

METADATA_FILE (FILE 2)

```
location 1 params
location 2 params
(etc) 
```

when all files are parsed, append the contents of FILE 2 to those of FILE 1.

FINAL FILE

```
Location 1
Location 2
(etc)
location 1 params
location 2 params
(etc) 
```

I don't use VB.NET. But, pseudocode would be something like:

```
fn parse_file(file,locations_filehandle, metadata_filehandle):
    file.extract_locations() -> append(locations_filehandle)
    file.extract_metadata() -> append(metadata_filehandle)

fn main():
   for file in files:
      parse_file(file,locations_filehandle,metadata_filehandle)

   finalfile=locations_filehandle.read() + metadata_filehandle.read()
   finalfile.writeToDisk()

main() 
```

# spring-mvc - Spring 3.2 MVC——不支持 HTTP 状态 405 请求方法“POST”

> ID：16044959
> 
> 赞同：1
> 
> 时间：2013-04-16T18:59:08.243
> 
> 标签：spring-mvc, http-status

我的 Spring 3.2 MVC 表单出现 405 错误。它告诉我不支持 POST，但我的表单和控制器方法都使用它。这是我表格的相关部分。

```
<form:form commandName="bulletin" method="post" value="/processBulletin"> 
```

这是我的控制器的相关部分。

```
@RequestMapping(value = "/processBulletin", method = RequestMethod.POST)
    public String processBulletin(
            @ModelAttribute("bulletin") Bulletin bulletin, Model model,
            BindingResult result) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T19:11:46.510

您没有`action`在表单中指定 an ，因此它可能会尝试发布到呈现表单的相同 URL。

该[文档](http://static.springsource.org/spring/docs/3.2.x/spring-framework-reference/html/spring-form.tld.html#spring-form.tld.form)没有提及`value`属性。

在您`form`更改为时`value`，`action`看看这是否对您有用。

# .net - 如何在每行有 70 多列的表中检查完全匹配？

> ID：16044961
> 
> 赞同：0
> 
> 时间：2013-04-16T18:59:19.433
> 
> 标签：.net, linq, duplicates

在过去的十年里，我被卷入了一个被黑客攻击的项目之中。只是为了让大家知道：我已经建议并询问我们是否可以在继续开发之前重构数据库并审查系统的架构设计，但是多个较小的项目可交付成果比修复当前系统中的缺陷“更重要” .

话虽如此，如果存在完全匹配，检查代码的最佳方法是什么？

假设此表中有 75 列，超过 200 万行。

我知道我可以这样做：

```
var foo = bar.GetNewDocument();
dbContext.documents.Count(p => p.firstCol == foo.firstCol
                            && p.secondCol == foo.secondCol
                            && etc, etc); 
```

这显然不是最好的解决方案......有没有更好的方法将**代码**中的这个新条目与其余条目进行比较以检查匹配？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T20:16:06.893

如果要进行sql查询，则需要构建表达式。例如：

```
 public static Expression<Func<T, bool>> GetEqualsExpression<T>(T obj)
    {
        var type = typeof (T);

        var x = Expression.Parameter(type, "x");

        BinaryExpression body = null;
        foreach (var propertyInfo in type.GetProperties())
        {
            var left = Expression.Property(x, propertyInfo);
            var right = Expression.Constant(propertyInfo.GetValue(obj, null));
            var equalsExpression = Expression.Equal(left, right);

            body = body == null ? equalsExpression : Expression.AndAlso(body, equalsExpression);
        }

        return Expression.Lambda<Func<T, bool>>(body, x);
    } 
```

用法

```
 var foo = bar.GetNewDocument();
        var expression = GetEqualsExpression(foo);
        dbContext.documents.Count(expression); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T19:10:30.710

使用`HashSet<int>`，在文档类中编写自定义散列方法

```
HashSet<int> hashes...;
dbContext.documents.ToList().ForEach(d=>{
  if (hashes.Contains(d.GetHash()))
    Console.WriteLine("Found one: "+d); // do further comparison here to ensure it's not hash collision
  else
    hashes.Add(d.GetHash());
}); 
```

请注意，如果 dbContext.documents 有太多您应该使用的条目，`foreach`而不是`.ToList`因为 ToList 会立即将它们全部拉下。

如果您不使用`.ToList()`并尝试直接使用它，哈希方法也将无法访问，例如`dbContext.documents.Any(d=>d.GetHash()...)`- 这将不起作用，因为它无法翻译成 SQL

如果经常执行此操作，您可以（！）添加另一个保存哈希的列（或添加一个保存它的表），这样重复检查的开销将非常小 - SQLServer 可以检查索引中的 200 万行columnt 非常非常快。

# python - Python：从 python 可执行文件读取/写入文件时出错

> ID：16044962
> 
> 赞同：0
> 
> 时间：2013-04-16T18:59:20.673
> 
> 标签：python, linux, file-io, file-permissions, raspberry-pi

我正在编写一个可执行的 Python 应用程序。它读取和写入文件。该应用程序使用 wx 作为 GUI 并被授予以下权限：

```
chmod +x app.py 
```

当我像这样从终端加载应用程序时：

```
./app.py 
```

应用程序加载并不会导致错误。

但是，当我双击 app.py 文件并单击“执行”时，除了该文件的读取和写入之外，一切都运行良好。这是程序的主要部分，会导致错误。

对于我的一生，我无法理解为什么这不起作用。

我试图设置它，以便每次都以root用户身份加载，但没有运气。我也一直在以 root 用户身份进行开发，所以我不应该看到任何问题。

我正在使用默认的 Raspbian 操作系统。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T19:15:03.420

听起来您需要将文件的权限修改为您登录 GUI 的用户可读/可写/可执行。阅读一下[Linux 文件权限](http://www.linux.com/learn/tutorials/309527-understanding-linux-file-permissions)，看看它会带你去哪里。

# java - 使用 AlertDialog 按钮开始一个新活动

> ID：16044964
> 
> 赞同：-1
> 
> 时间：2013-04-16T18:59:29.310
> 
> 标签：java, android, android-activity, android-alertdialog

我正在尝试使用警报对话框来允许用户按下确定按钮并打开一个新活动。下面是我的代码：

我的第一个活动

```
 AlertDialog.Builder dialog=    new AlertDialog.Builder(context);
                dialog.setTitle("Welcome");
                dialog.setMessage("Please click ok");
                dialog.setPositiveButton("OK", new    DialogInterface.OnClickListener() {

                    @Override
                    public void onClick(DialogInterface dialog, int which) {
                        Intent intent = new Intent("com.thewildOnz.myResult");
                    startActivity(intent);
                    }
                });
                dialog.show(); 
```

新活动

```
public class myResult extends Activity {
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.result); 
```

显现：

```
</activity>
           <activity
        android:name=".myResult"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="com.thewildOnz.myResult" />

            <category android:name="android.intent.category.DEFUALT" />
        </intent-filter>
    </activity> 
```

但是我得到了错误：

```
java.lang.NullPointerException 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T19:04:02.013

您需要调用`.create()`您的`AlertDialog`.

```
AlertDialog.Builder builder= new AlertDialog.Builder(context);
builder.setTitle("Welcome");
builder.setMessage("Please click ok");
builder.setPositiveButton("OK", new DialogInterface.OnClickListener() 
{
    @Override
    public void onClick(DialogInterface dialog, int which) 
    {
        Intent intent = new Intent("com.thewildOnz.myResult");
        startActivity(intent);
    }
});
AlertDialog dialog = builder.create();
dialog.show(); 
```

您也可能`Intent("")`错误地使用了新的。除非您已将`"com.thewildOnz.myResult"`其定义为操作，否则这将失败。

你应该使用这个：

```
Intent intent = new Intent(this, com.thewildOnz.myResult.class); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T19:10:55.717

也许你有一个错字`DEFAULT`：

```
 <category android:name="android.intent.category.DEFUALT" /> 
```

# ssrs-2008 - “CONSTRAINED 标志施加的限制……被违反了”

> ID：16044966
> 
> 赞同：1
> 
> 时间：2013-04-16T18:59:38.523
> 
> 标签：ssrs-2008, ssas, mdx, data-warehouse

我是 ssrs 的新手。我正在创建报告，该报告在多维数据集上查询并提供我使用参数选择往返日期的结果及其给出的错误，例如“违反了受约束标志施加的限制”。我该怎么办？我无法删除约束，因为生产服务器不接受没有约束的 mdx 查询。MDX 查询是这样的：-

```
select 
{[Measures].[Customers],[Measures].[Contacted Customers],
[Measures].[No of Bets],
[Measures].[Stakes GBP],
[Measures].[Turnover GBP],[Measures].[Signups]
} ON COLUMNS,
NON EMPTY{
[Date].[Calendar Date].[Date].allmembers
}
ON ROWS
FROM ( SELECT ( STRTOMEMBER(@mdxfromdate, CONSTRAINED) : 
STRTOMEMBER(@mdxtodate, CONSTRAINED) ) ON COLUMNS 
from [SportsWarehouse]) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T21:02:33.400

该错误告诉您 in 中的值`@mdxfromdate`不是成员的名称。`StrToMember()`不会将通用日期字符串转换为成员 - 它需要类似于：

```
[Date].[Calendar Date].[Date].&[19] 
```

（使用 Adventure Works 示例），或 Date 层次结构成员的任何格式。如果您只想指定完全限定名称的一部分，您也可以动态构建名称：

```
StrToMember("[Date].[Calendar Date].[Date].&[" & @mdxfromdate & "]", CONSTRAINED) 
```

希望有帮助。

# python - 为列表中的字符串设置变量

> ID：16044969
> 
> 赞同：0
> 
> 时间：2013-04-16T18:59:42.840
> 
> 标签：python

假设我有以下列表（我的脚本中的字符串变量）：

```
dog = lab
cat = brown
fish = wet
dog = terrier
cat = angry
fish = cooked
dog = blah
cat = soon
fish = wegetthepattern 
```

我需要一种方法来解析这个列表，并根据出现将它们设置为变量。所以最后它会设置如下变量：

```
dog1='lab'
dog2='terrier'
dog3='blah'
cat1='brown'
cat2='angry' 
```

等等。我的列表中可能有 1 次表示 dog，或 200 次，我只需要一种方法来解析列表（当前是我正在调用的字符串变量）并设置这些变量，以便稍后在我的脚本中调用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T19:05:57.567

对此通常的回答是：**不要尝试去做**。

你可以尝试去实现它，但你会后悔的。将单词存储在 dict 中：

```
In [1]: s = '''dog = lab
   ...: cat = brown
   ...: fish = wet
   ...: dog = terrier
   ...: cat = angry
   ...: fish = cooked
   ...: dog = blah
   ...: cat = soon
   ...: fish = wegetthepattern'''

In [2]: from collections import defaultdict

In [3]: words = defaultdict(list)

In [4]: for pair in s.split('\n'):
   ...:    left, right = pair.split(' = ')
   ...:    words[left].append(right)
   ...:    

In [5]: words['dog']
Out[5]: ['lab', 'terrier', 'blah'] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T19:05:00.970

```
s = """dog = lab
cat = brown
fish = wet
dog = terrier
cat = angry
fish = cooked
dog = blah
cat = soon
fish = wegetthepattern"""

for i in s.split('\n'):
    exec(i.split()[0] + '= "' + i.split()[-1] + '"')

print(cat) # prints 'soon' 
```

但是，您应该避免这种情况。

# asp.net-mvc-3 - ASP.NET MVC 图像表单验证

> ID：16044976
> 
> 赞同：3
> 
> 时间：2013-04-16T19:00:12.873
> 
> 标签：asp.net-mvc-3, image, forms

我在特定表格上遇到了问题。

如果提交了表单并且表单有错误（可能我忘记填写必填字段），那么表单会按照预期重新加载错误。但是，您之前选择的任何图像都会消失，需要重新选择。

在提交有错误的表单之前：

![在此处输入图像描述](https://i.stack.imgur.com/Oo9c4.png)

提交有错误的表单后：

![在此处输入图像描述](https://i.stack.imgur.com/k0Tly.png)

这是正在使用的 HTML 标记：

`<input type="file" accept="image/*" id="Image" name="Image"/>`

我需要的是图像选择器在提交之间仍然保持选定的图像。有没有好的方法来做到这一点？有没有办法将文件路径保存到会话并再次将其填充到元素中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T19:34:31.693

作为安全措施，浏览器不允许文件上传字段自动恢复。为防止丢失验证文件，请在客户端执行所有验证（尽管您应该始终在服务器上再次验证），以便在一切正确之前永远不会提交表单，或者您必须获取提交的文件第一次并坚持下去，直到表格最终通过并完成所有验证。

在第二种情况下，您有几个选择：

1.  将内容保存在某处，并在您返回表单时返回一个唯一的 ID 指针，该指针将保存在隐藏字段中。您还应该考虑放置一个可见标签，显示已上传的文件。您必须定期清理放弃并稍后回来的用户的上传（因此不会提交具有该相关 ID 的表单供您匹配上传）。

2.  Base64 对上传文件的内容进行编码，并将其返回到隐藏字段中的视图。这会占用更多带宽，但它不需要您在服务器上存储可能永远不会与正确格式相关的文件。您可能还可以在返回的视图中显示相同的图像，因为我相信您可以将 Base64 编码的图像指定为图像标签（或者可能是 CSS 属性）的源。这可能是特定于浏览器的。

只要您的文件上传大小有限（例如 100kb），选项 2 就是我最喜欢的方法。它并不比页面中包含的所有现代 JavaScript 库大多少，并且为用户提供更好的体验，同时让您的服务器在会话、清理或过度处理方面保持沉默。

编辑：许多允许上传图像的网站还提供文件大小验证，如果文件过大，则将其退回。在这种情况下，用户收到他们的资产尚未存储的反馈，您无需对其进行编码和归还。

编辑2：

这是一篇关于浏览器将[文件上传控件](http://blogs.msdn.com/b/varun_sharma/archive/2007/10/01/browser-security-why-you-can-t-get-the-file-that-the-user-doesn-t-want-you-to-get.aspx)值字段标记为只读并防止其被 JavaScript 修改（只能通过直接用户操作修改）的帖子。

这是关于直接在 HTML 中使用[Base64 编码图像](https://stackoverflow.com/questions/3917290/how-to-display-base64-encoded-image-in-html-if-it-is-located-in-a-separated-file)的 SO 评论。提问者正在寻找一种将数据放在单独文件中的方法，但这不是您想要的。'this works' 部分是我在上面的选项 2 中所指的部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T19:12:21.780

您可以做到这一点的唯一方法是在客户端提供验证。这是因为提交到服务器“发送”了一个表单，然后重新发送并返回错误。正如评论中指出的那样，由于安全原因，该文件已被清除（感谢 Eric）

要在 MVC 3 中进行客户端验证，您可以使用无障碍 jquery 验证。为此，只需添加 web.config：

```
<appSettings>
  <add key="ClientValidationEnabled" value="true" />
  <add key="UnobtrusiveJavaScriptEnabled" value="true" />
</appSettings> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-16T19:15:56.870

我认为您可以使用隐藏字段并显示标签中选择的文件。验证后获取文件内容并将其保存在 Session 或某个临时位置。然后在标签上显示页面时用户之前选择的文件路径并在隐藏字段中更新相同。如果用户再次提交表单，请先检查文件是否为NULL但隐藏字段值存在，这意味着您已经提前保存了文件，如果路径与隐藏字段不同，您可能需要再次获取文件内容。

仅保存路径不会帮助您保存第一次上传的文件流。我认为如果您的用户会因为不再加载文件而感到高兴，那么您必须从您的服务器资源中支付一些费用:)

# java - 当我通过 Windows 任务调度程序启动 selenium 测试时，Firefox 没有弹出

> ID：16044979
> 
> 赞同：1
> 
> 时间：2013-04-16T19:00:19.290
> 
> 标签：java, windows-7, selenium, command-line, windows-task-scheduler

我现在正在使用 Windows 7 机器。我试图通过任务调度程序开始硒测试。我使用了一个 bat 文件来包含编译和运行 selenium 测试所需的所有命令。对于 selenium 测试，我使用 java.lang. 所以脚本中的内容会是这样的

```
cd C:\Users\test\Documents\SevOneNMS\qa\automation  
C:\"Program Files"\Java\jdk1.7.0\bin\javac -d C:\Users\test\Documents\tmp -classpath .;../../../jars/junit-4.11.jar;../../../jars/jsch-0.1.49.jar;../../../jars/commons-net-3.1.jar;../../../jars/selenium-server-standalone-2.31.0.jar;tmp;../../../config tests/alerts/AlertActions.java

cd C:\Users\test\Documents\tmp   
java -classpath .;../jars/junit-4.11.jar;../jars/jsch-0.1.49.jar;../jars/commons-net-3.1.jar;../jars/selenium-server-standalone-2.31.0.jar org.junit.runner.JUnitCore tests.alerts.AlertActions 
```

当我直接在 Windows 7 下运行这个 bat 文件时，它工作得非常好。但是当通过任务调度器启动它时，命令行窗口只弹出半秒就消失了，没有错误信息，根本没有执行测试。下面是任务调度程序的命令行（Testing.bat 是我说的 bat 文件）。而且我不知道为什么它不起作用。请帮忙。

```
schtasks /create /tr Testing.bat /tn selenium /sc ONCE /st 05:55 /f

schtasks /run /tn selenium

schtasks /delete /tn selenium /f 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T20:19:03.377

Thanks to Aubin, when I use the absolute path for /tr argument in schtasks.ext, everything works. And

> It's because the current directory isn't set by task scheduler when it's set by explorer.exe when you double click the batch file .

# directx - 像素着色器中动态常量缓冲区索引的性能

> ID：16044981
> 
> 赞同：2
> 
> 时间：2013-04-16T19:00:24.907
> 
> 标签：directx, direct3d, hlsl, pixel-shader

我有一个用 HLSL 编写的像素着色器，它声明了以下常量缓冲区：

```
cbuffer RenderParametersData : register(b2) 
{
    float4 LineColor[16];
}; 
```

在其中一个着色器函数中，我根据索引“颜色”查找输出颜色（这不是真正的颜色，只是将索引放入 LineColors 数组的方便位置）：

```
output.Color = Colors[input.Color.b * 255]; 
```

这导致生成的汇编代码中指令槽的数量急剧增加。保持其他所有内容不变，而是执行常数数组查找 -`output.Color = LineColor[0];`算术运算的数量从 10 变为 37。几乎所有附加运算看起来像这样：

```
cmp r2, -r1.x, c0, r0.w
cmp r2, -r1.y, c1, r2
cmp r2, -r1.z, c2, r2
cmp r1, -r1.w, c3, r2 
```

其中 c 增加到 15，与 LineColor 中的元素数量相匹配。将 LineColor 调整为 8 个元素的代码与第二种情况非常相似，但 c 仅变为 7，再次匹配数组中的元素数。回到持续查找，操作数下降到 10。

因此，动态常量缓冲区数组查找似乎带来了相当大的额外成本，为数组中的每个元素添加一个比较指令，加上一些开销。我对这个数组查找的成本感到非常惊讶，而且考虑到我的数组大小很快就会增加一个数量级，这将使我超过 64 条算术指令的限制。

这是预期的行为吗？我在这里做错了什么，还是这是动态数组索引的必然结果？

谢谢！

编辑：只是为了添加一些额外的细节，我想要的效果是根据来自顶点着色器和纹理坐标的数据为一些四边形着色。我会在顶点着色器中完成这项工作，但必须首先进行纹理坐标的插值。

EDIT2：我已经解决了这个问题。我向 FXC 指定我的目标是 ps_4_0_level_9_1，这导致它为着色器模型 2.0 和 4.0 生成程序集。我发现每个元素的额外比较问题只发生在模型 2.0 汇编代码中。将编译器目标切换到 PS_4_0 会导致仅获得模型 4.0 代码，并且由于我不受限于级别 9_1，所以现在一切正常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T20:38:58.790

我通过指定不应由编译器生成着色器模型 2.0 程序集来解决此问题。问题末尾有更多细节。

# python - 使用 OpenCV 在 Python 中实现神经网络时出现函数原型错误

> ID：16044983
> 
> 赞同：1
> 
> 时间：2013-04-16T19:00:29.960
> 
> 标签：python, opencv, machine-learning, neural-network, backpropagation

我们正在尝试用 Python 实现神经网络。这是我们的代码：

```
import cv
from opencv.cv import *
from opencv.highgui import *
from opencv.ml import *

def trainMachine():
    ann = CvANN_MLP()
    global ann
    fin=open("train.txt","r")
    train_sample_count=int(fin.readline())
    print "Found training file with ",train_sample_count," examples"
    trainData=cvCreateMat(train_sample_count,2,CV_32FC1)
    trainClasses=cvCreateMat(train_sample_count,1,CV_32FC1)
    sampleWts=cvCreateMat(train_sample_count,1,CV_32FC1)
    neuralLayers=cvCreateMat(4,1,CV_32SC1)
    trainData1=cvGetRows(trainData,0,train_sample_count)
        trainClasses1=cvGetRows(trainClasses,0,train_sample_count)
        sampleWts1=cvGetRows(sampleWts,0,train_sample_count)
        neuralLayers1=cvGetRows(neuralLayers,0,4)
    cvSet1D(neuralLayers1,0,cvScalar(2))
        cvSet1D(neuralLayers1,1,cvScalar(3))
        cvSet1D(neuralLayers1,2,cvScalar(3))
        cvSet1D(neuralLayers1,3,cvScalar(1))
    td=list()
    for i in range(train_sample_count):
        line = fin.readline().split()
        td.append(list())
        for num in line:
            td[i].append(float(num))
    for i in range(0,train_sample_count):
        cvSetReal2D(trainData1,i,0,td[i][0])
        cvSetReal2D(trainData1,i,1,td[i][1])
        cvSet1D(trainClasses1,i,cvScalar(td[i][2]))
        cvSet1D(sampleWts1,i,cvScalar(1))
    ann.create(neuralLayers)
    criter=cvTermCriteria(CV_TERMCRIT_ITER|CV_TERMCRIT_EPS,100000,0.001)
    params=CvANN_MLP_TrainParams(criter,0,0.01,0.05)
    ann.train(trainData,trainClasses,sampleWts,0,params)

trainmachine() 
```

但是我们得到了错误：

```
Traceback (most recent call last):
  File "ml.py", line 58, in <module>
    main()
  File "ml.py", line 52, in main
    trainMachine();
  File "ml.py", line 39, in trainMachine
    ann.train(trainData,trainClasses,sampleWts,0,params)
  File "/usr/lib/pymodules/python2.6/opencv/ml.py", line 1310, in train
    def train(self, *args): return _ml.CvANN_MLP_train(self, *args)
NotImplementedError: Wrong number of arguments for overloaded function 'CvANN_MLP_train'.
  Possible C/C++ prototypes are:
    train(CvANN_MLP *,CvMat const *,CvMat const *,CvMat const *,CvMat const *,CvANN_MLP_TrainParams,int)
    train(CvANN_MLP *,CvMat const *,CvMat const *,CvMat const *,CvMat const *,CvANN_MLP_TrainParams)
    train(CvANN_MLP *,CvMat const *,CvMat const *,CvMat const *,CvMat const *)
    train(CvANN_MLP *,CvMat const *,CvMat const *,CvMat const *) 
```

我们尝试了所有给定的 C++ 原型。但仍然有错误。

我们实际上是在尝试将 C++ 中神经网络的工作实现移植到 Python。问题在于用于训练我们的神经网络的训练函数。

这是 C++ 源代码：[neural.cpp](http://codeviewer.org/view/code:3204)

有什么解决办法吗？或者如果要在 Python 中使用的函数原型或名称不同，请帮助我们。

请注意，该代码适用于 Python v2.6 和 OpenCV v2.1。较新的版本不支持导入的模块。

# dotnetnuke - 如何在基于 DNN 的 Web API 上处理安全/身份验证

> ID：16044985
> 
> 赞同：8
> 
> 时间：2013-04-16T19:00:35.330
> 
> 标签：dotnetnuke, restful-authentication

我正在为 DotNetNuke 6 网站构建一个 REST API，使用 DNN 的基于 MVC 的服务框架。但是，我没有任何身份验证背景，所以我什至不确定从哪里开始。

基本上，我们希望我们的客户能够对他们的门户数据发出 GET 请求，并且我们希望一些客户（但不是全部）能够发布对其用户数据的简单更新。

我一直在尝试搜索信息，但问题是我不确定我在搜索什么。DNN 有不同的登录名和角色，但我不确定它们是否或如何影响。我听说过 oAuth 之类的东西，但我对它的理解是最基本的。我不知道它是否是我需要的，也不知道它是否或如何适用于 DNN。谁能指出我正确的方向？

**更新**：基于以下关于将其与模块绑定和进一步研究的答案，这是我所做的：

我专门为此服务创建了一个模块，并为它添加了两个特殊权限：“APIGET”和“APIPOST”。我将这些分配给 DNN 中的一些测试角色/测试帐户。我编写了一个自定义授权属性，给定模块 ID，检查当前用户是否具有必要的权限（通过角色或直接）。据我所知，标签 ID 与我的情况无关。

它似乎同时使用网络浏览器（基于我登录的 DNN 帐户）和使用帐户用户名/密码发送 HTTP 请求的 php 脚本。

授权属性：

```
using DotNetNuke.Entities.Modules;
using DotNetNuke.Entities.Portals;
using DotNetNuke.Security;
using DotNetNuke.Security.Permissions;
using System.Web;

public class MyAuthorize : DotNetNuke.Web.Services.AuthorizeAttributeBase
{
    public const string AuthModuleFriendlyName = "MyAuthModule";
    public const string GETPermission = "APIGET";
    public const string POSTPermission = "APIPOST";

    public string Permission { get; set; }

    protected override bool AuthorizeCore(HttpContextBase context)
    {
        ModuleController mc = new ModuleController();

        ModuleInfo mi = mc.GetModuleByDefinition(PortalController.GetCurrentPortalSettings().PortalId, AuthModuleFriendlyName);

        ModulePermissionCollection permCollection = mi.ModulePermissions;

        return ModulePermissionController.HasModulePermission(permCollection, Permission);
    }
} 
```

控制器：（“mytest”是 GET 和 POST 的端点）

```
public class MyController : DnnController
{
    [ActionName("mytest")]
    [AcceptVerbs(HttpVerbs.Get)]
    [DnnAuthorize(AllowAnonymous = true)]
    [MyAuthorize(Permission = MyAuthorize.GETPermission)]
    public string myget(string id = "")
    {
        return "You have my permission to GET";
    }

    [ActionName("mytest")]
    [AcceptVerbs(HttpVerbs.Post)]
    [DnnAuthorize(AllowAnonymous = true)]
    [MyAuthorize(Permission = MyAuthorize.POSTPermission)]
    public string mypost(string id = "")
    {
        return "You have my permission to POST";
    }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-17T13:19:19.720

将 DNN 服务框架中的服务绑定到 DNN 权限的主要方法是将权限与模块实例相关联。也就是说，您将要求您的服务的用户确定他们从哪个模块调用/关于哪个模块（通过在请求 [headers, query-string, cookies, form] 中发送 ModuleId 和 TabId），然后您可以指示哪些权限他们需要在该模块上对服务采取特定操作。

您可以`SupportedModules`在服务上使用该属性，并传入以逗号分隔的模块名称列表，以确保只允许您自己的模块。然后，`DnnModuleAuthorize`在服务或个人操作级别添加属性，以说明用户在该模块上需要什么权限。在您的实例中，您还可以`AllowAnonymous`在操作上添加属性`GET`，并`DnnModuleAuthorize`在服务上添加一个属性，用于`POST`方法（以及其他任何内容）。请注意，您不能将`AllowAnonymous`属性放在控制器上；它将覆盖对操作的授权，从而无法使操作更具限制性。

您还需要`ValidateAntiForgeryToken`在操作上添加属性`POST`，以防止 CSRF 攻击。

如果您没有一个模块可以自然地将其权限与您的服务相关联，您可以为此目的创建一个模块，仅将其自身公开为权限管理实用程序。

一旦你弄清楚了上面的授权部分，DNN 将使用你的表单 cookie 来处理身份验证（即自动处理 AJAX 场景），或者通过基本或摘要式身份验证（对于非 AJAX 场景）。也就是说，如果您使用的是非 AJAX，则需要找出一种方法来仅在防伪令牌适用时对其进行验证。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-17T09:06:38.553

DNN 中的服务框架就是您所追求的。它允许您提供直接插入 DNN 安全性的 REST API。

以下是一些帮助您入门的文章：

*   [http://www.dotnetnuke.com/Resources/Wiki/Page/Services-Framework-WebAPI.aspx](http://www.dotnetnuke.com/Resources/Wiki/Page/Services-Framework-WebAPI.aspx)
*   [http://www.dotnetnuke.com/Resources/Blogs/EntryId/3327/Getting-Started-with-DotNetNuke-Services-Framework.aspx](http://www.dotnetnuke.com/Resources/Blogs/EntryId/3327/Getting-Started-with-DotNetNuke-Services-Framework.aspx)

请注意，使用服务框架时，DNN 6 和 DNN 7 存在一些差异：

*   [http://www.dotnetnuke.com/Resources/Blogs/EntryId/3514/Converting-Services-Framework-MVC-to-WebAPI.aspx](http://www.dotnetnuke.com/Resources/Blogs/EntryId/3514/Converting-Services-Framework-MVC-to-WebAPI.aspx)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-09-16T17:55:15.110

只是想注意 DnnModuleAuthorize 属性采用 PermissionKey 参数来自定义权限，因此您可以执行以下操作：

```
 [DnnModuleAuthorize(PermissionKey = "DELETEDATA")]
    [HttpPost]
    public HttpResponseMessage DeleteData(FormDataCollection data) 
```

看起来您无法提供自己的错误消息，因此您可以像这样包装您的方法主体并省略自定义权限属性：

```
 [DnnModuleAuthorize(AccessLevel = SecurityAccessLevel.View)]
    [HttpPost]
    public HttpResponseMessage DeleteData(FormDataCollection data)
    {
        var errorMessage = "Could not delete data";

        if (ModulePermissionController.HasModulePermission(ActiveModule.ModulePermissions,"DELETEDATA"))
        {
            // do stuff here
        }
        else
        {
            errorMessage = "User does not have delete permission";
        }

        var error = new HttpResponseMessage(HttpStatusCode.BadRequest)
        {
            Content =
                new StringContent(
                errorMessage)
        };
        return error;
    } 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-06-03T23:03:01.893

只是想添加到@Richards 评论以使用`[DnnModuleAuthorize(PermissionKey = "DELETEDATA")]`自定义权限。

完整的属性应该是：

```
[DnnModuleAuthorize(PermissionKey = "DELETEDATA", AccessLevel = SecurityAccessLevel.Edit)] 
```

将其留空，如下所示：[https ://github.com/dnnsoftware/Dnn.Platform/blob/f4a5924c7cc8226cfe79bbc92357ec1a32165ada/DNN%20Platform/Library/Security/Permissions/PermissionProvider.cs#L810](https://github.com/dnnsoftware/Dnn.Platform/blob/f4a5924c7cc8226cfe79bbc92357ec1a32165ada/DNN%20Platform/Library/Security/Permissions/PermissionProvider.cs#L810)

# matlab - 什么是以及如何在 Matlab 中打开 .mdl 文件？

> ID：16044988
> 
> 赞同：0
> 
> 时间：2013-04-16T19:00:39.143
> 
> 标签：matlab

我的电脑上有一些**.mdl**文件。能告诉我怎么打开吗？它的用途和在 Matlab 2012 中是否支持？先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T19:25:22.473

.mdl 文件是 simulink 模型文件。您可以通过在命令窗口中键入*simulink*然后转到文件 -> 打开来打开它

您也可以只使用 open 命令： http: [//www.mathworks.com/help/matlab/ref/open.html](http://www.mathworks.com/help/matlab/ref/open.html)

# css - 谷歌网络字体在 Chrome 中看起来不稳定 - 如何应用修复

> ID：16044989
> 
> 赞同：8
> 
> 时间：2013-04-16T19:00:46.343
> 
> 标签：css, google-webfonts

这是一个普遍问题，似乎有解决方案。问题是网络字体在 chrome 中显示不连贯。解决方案应该是在 .woff 调用之前移动 .svg 调用。在这里解释：http://www.fontspring.com/blog/smoother-web-font-rendering-chrome 在这里：[http](http://www.fontspring.com/blog/smoother-web-font-rendering-chrome) : [//www.adtrak.co.uk/blog/font-face-chrome-rendering/](http://www.adtrak.co.uk/blog/font-face-chrome-rendering/)

问题是，我正在使用谷歌网络字体，并像这样导入字体：

```
<link href='http://fonts.googleapis.com/css?family=Asap:400,700,400italic,700italic' rel='stylesheet' type='text/css'> 
```

而且我不知道也无法找到如何使用`@font-face`css 标签而不是上面的标签来导入它。我试过了，但因为谷歌只提供 ttf 字体而不提供 svg 或 woff 字体而被卡住了。

希望你能帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-16T21:38:50.427

如果要应用此修复程序，您必须自己托管字体。

您的 Google 字体链接是对样式表的请求，它会根据您提供的参数和浏览器检测动态构建。对于您的示例链接：

```
<link href='http://fonts.googleapis.com/css?family=Asap:400,700,400italic,700italic' rel='stylesheet' type='text/css'> 
```

如果您实际上使用以下方式自己提出请求`curl`：

```
$ curl http://fonts.googleapis.com/css?family=Asap:400,700,400italic,700italic 
```

这是被发回的内容：

```
@font-face {
  font-family: 'Asap';
  font-style: normal;
  font-weight: 400;
  src: local('Asap'), local('Asap-Regular'), url(http://themes.googleusercontent.com/static/fonts/asap/v1/-KZsao_xwBpcExaHoPH8_w.ttf) format('truetype');
}
@font-face {
  font-family: 'Asap';
  font-style: normal;
  font-weight: 700;
  src: local('Asap Bold'), local('Asap-Bold'), url(http://themes.googleusercontent.com/static/fonts/asap/v1/5DVGWnz9Skaq1amwwwGZEw.ttf) format('truetype');
}
@font-face {
  font-family: 'Asap';
  font-style: italic;
  font-weight: 400;
  src: local('Asap Italic'), local('Asap-Italic'), url(http://themes.googleusercontent.com/static/fonts/asap/v1/8YIp-EIJXA6NJdTPxy9qiQ.ttf) format('truetype');
}
@font-face {
  font-family: 'Asap';
  font-style: italic;
  font-weight: 700;
  src: local('Asap Bold Italic'), local('Asap-BoldItalic'), url(http://themes.googleusercontent.com/static/fonts/asap/v1/_sVKdO-TLWvaH-ptGimJBaCWcynf_cDxXwCLxiixG1c.ttf) format('truetype');
} 
```

最简单的方法是返回 Google Web Fonts，通过转到[此处](http://www.google.com/fonts/#QuickUsePlace:quickUse/Family:Asap)并单击下载箭头下载相关字体。

然后你可以使用[这里建议的修复](https://stackoverflow.com/questions/14438368/prioritise-svg-font-with-google-web-fonts)，参考你下载的字体文件：

```
@font-face {
font-family: ‘MyWebFont’;
src: url(‘webfont.eot’); 
src: url(‘webfont.eot?#iefix’) format(‘embedded-opentype’),
    url(‘webfont.svg#svgFontName’) format(‘svg’),
    url(‘webfont.woff’) format(‘woff’),
    url(‘webfont.ttf’)  format(‘truetype’);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-01T21:22:03.823

您是否对所有样式进行了适当的重置？

浏览器默认设置可能会导致您的渲染体验不一致。

reset.css 将所有元素设置回默认值，这样可以减少跨浏览器的不一致。reset.css有很多示例，其中最流行的是[meyerweb reset css](http://meyerweb.com/eric/tools/css/reset/)。另一种减少不一致的方法是使用 normalize.css。

简而言之，这两种方法的区别在于，reset.css 只是重置所有浏览器特定的样式，而 normalize.css 通过创建跨浏览器默认值具有更广泛的范围。

normalize.css 的开发人员[在此处](https://stackoverflow.com/questions/6887336/what-is-the-difference-between-normalize-css-and-reset-css)解释了两者之间的差异。

如果所有这些链接都无济于事，请确保始终正确设置字体粗细，并导入所有必要的字体粗细。

您可以在此处阅读有关字体权重的信息：http: [//css-tricks.com/watch-your-font-weight/](http://css-tricks.com/watch-your-font-weight/) 您还应该在使用 normalize.ccs 时应用此技术，因为它不会将字体权重重置为 rest .css 可以。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-01-02T18:42:30.430

将此添加到每个元素的样式表中。

```
opacity: .99; 
```

例如 -

```
p, li { 
  opacity: .99; 
} 
```

我不知道为什么这有效，但确实有效。

# c# - 检查当前组合框中的值是否包含在该组合的项目中

> ID：16044990
> 
> 赞同：0
> 
> 时间：2013-04-16T19:00:47.447
> 
> 标签：c#, combobox, validating

我有 Control - ComboBox，它是语言列表。我通过右键单击该组合-> 属性-> 选择那里的属性，然后-> 包含的项目（...），在该组合中添加了语言。我已经逐行添加了几种语言。

问题是用户可以通过编写该组合框中的内容来手动更改，而不仅仅是他可以通过那里选择的内容。因此，我需要查看当前在 comboBox 中写入的内容是否包含在 Items 中。我已将此功能添加到事件“验证”中：

```
private bool ValidatingComboBox(ComboBox sender)
{
   if (sender.SelectedValue != null)
   {
      if (sender.Items.Contains(sender.SelectedValue))
      {
         errorProvider.SetError(sender, "");
         return true;
      }

      else
      {
         errorProvider.SetError(sender, "No such thing in list!");
         return false;
      }
   }

   else
   {
      errorProvider.SetError(sender, "No such thing in list!");
      return false;
   }
} 
```

但是由于某种原因，当我在组合框中写“英语”时，它仍然会给我一个错误，尽管英语在项目中。不过，当我通过在下拉列表中用鼠标选择它来更改语言时，它不会报告错误。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T19:05:46.180

您可以首先阻止用户在那里输入...如果他不能输入，则不需要此验证..试试这个

```
this.comboBoxType.DropDownStyle = ComboBoxStyle.DropDownList; 
```