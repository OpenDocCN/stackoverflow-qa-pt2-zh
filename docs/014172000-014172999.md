# StackOverflow 问答 14172000-14172999

# fluent-migrator - 流利的迁移者。如何将具有默认值的日期时间列添加为当前日期？

> ID：14172007
> 
> 赞同：20
> 
> 时间：2013-01-05T12:57:17.933
> 
> 标签：fluent-migrator

如何使用当前日期时间的默认日期时间值更改流畅迁移中的列？

所以我需要这样的东西：

`ALTER TABLE database ADD column DATETIME DEFAULT GETDATE() NOT NULL;`

仅用于流畅的迁移。谢谢。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2016-03-18T17:27:53.180

看到答案实际上不包含任何代码：

```
Create.Table(nameof(Report))
      .WithColumn(nameof(Report.Id)).AsInt32().NotNullable().PrimaryKey().Identity()
      .WithColumn(nameof(Report.CreatedAt)).AsDateTime().Nullable()
                                           .WithDefault(SystemMethods.CurrentDateTime); 
```

`WithDefault(SystemMethods)`方法就是解决方案。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-01-06T14:17:13.263

您可能已经[在 wiki 上找到了 SystemMethods](https://github.com/schambers/fluentmigrator/wiki/Use-inbuilt-database-functions-when-setting-the-default-value)的文档。我刚刚对其进行了更新，以便它反映最新版本的 FluentMigrator。

只想指出这些是特定于数据库的，只有 Sql Server 实现了所有五个 SystemMethods。这会降低您的迁移的可移植性，因为它不再是生成的标准 sql，并且其他数据库不支持某些 SystemMethods（例如，在 MySql 中似乎不可能使用 CurrentUser）。

如果您发现需要其他任何内容，请将其作为问题记录在 FluentMigrator 的 Github 站点上，我们将尝试添加它。

# wpf - 如何使用字段初始化器访问和访问 wpf 控件

> ID：14172009
> 
> 赞同：0
> 
> 时间：2013-01-05T12:57:22.710
> 
> 标签：wpf, static, wpf-controls, wpfdatagrid, relaycommand

我在这里，

```
 private ICommand AddCommand = new RCommand(p => true, p => Add() );
    private void Add()
    {
        emp = new Employee();
        DetailsEntryGrid.DataContext = emp;

        EnableControls();
        tBoxID.Focus();
        tBoxID.SelectAll();
        //throw new NotImplementedException();
    } 
```

vs2010 抛出编译时错误，“p”不能指向非静态字段，我无法访问网格和文本框..这些控件是 wpf..我也无法为员工创建对象..

而 Rcommand 类是..

```
public class RCommand : ICommand
{
    readonly Predicate<object> _CanExecute;
    readonly Action<object> _Execute;
    public RCommand(Action<object> exe) : this(null,exe)
    {

    }

    public RCommand(Predicate<object> predicate, Action<object> action)
    {
        if (predicate == null)
            throw new ArgumentNullException("execute must be provided");
        _Execute = action;
        _CanExecute = predicate;

    }

    public bool CanExecute(object parameter)
    {
        return _CanExecute == null ? true : _CanExecute(parameter);

    }

    public event EventHandler CanExecuteChanged
    {
        add { CommandManager.RequerySuggested += value; }
        remove { CommandManager.RequerySuggested -= value; }
    }

    public void Execute(object parameter)
    {
        _Execute(parameter);

    }
} 
```

我想访问那个 Add() 方法，而我又想访问文本框和数据网格..我应该怎么做？

或者我应该如何拥有 RCommand 类..？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T13:00:26.303

只需将初始化移动到您的类的构造函数：

```
public MyClass()
{
    // other initialisation stuff
    AddCommand = new RCommand(p => true, p => Add() );
} 
```

根据您的评论 - 如果这是 MVVM，那么您不应该在视图模型中访问视图上的元素。这增加了类之间的耦合，是一件“坏事”。

如果您需要更改视图上的值，那么您应该使用绑定。

如果你想做一些事情，比如改变焦点并选择文本框中的所有文本，那么你应该从视图模型中触发一个事件并在视图中处理它，如果你可以访问文本框的话。

在您的视图模型中，您定义一个事件：

```
public event EventHandler<MyEventArgs> MyEvent; 
```

然后，当您想要做出反应的任何事情发生时，您就会触发该事件：

```
if (this.MyEvent != null)
{
    this.MyEvent(this, new MyEventArgs(...));
} 
```

where`...`替换为您需要在事件中传递的值（如果有）。

在您的视图构造函数中，您订阅了此事件：

```
this.viewModel.MyEvent += MyEventHandler; 
```

视图有对视图模型的引用是可以的，但反过来不行。

处理程序是：

```
private void MyEventHandler(object sender, MyEventArgs e)
{
    // Do your stuff
} 
```

# jquery - 如何提取 之内 使用 jQuery

> ID：14172024
> 
> 赞同：0
> 
> 时间：2013-01-05T13:00:03.680
> 
> 标签：jquery

```
<div id='Thirdsamplecodesnippet' class='clearfix'>
<pre class='brush:html;'>&lt;html&gt;
&lt;body&gt;
&lt;p&gt;Hello world.&lt;/p&gt;
&lt;/body&gt;
&lt;/html&gt;</pre>
<input type='hidden' id='codeid' value='process'>  
</div> 
```

我想从 div 中提取这个：

```
<pre class='brush:html;'>&lt;html&gt;
&lt;body&gt;
&lt;p&gt;Hello world.&lt;/p&gt;
&lt;/body&gt;
&lt;/html&gt;</pre> 
```

使用 jQuery 怎么可能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-05T13:00:52.747

`div`带有 id的父级的 html`Thirdsamplecodesnippet`就是您所需要的。您可以使用 jQuery 的 id[**选择器**](http://api.jquery.com/category/selectors/)来获取父 div jQuery 对象并在其上调用[**html()**](http://api.jquery.com/html/)函数。

**[现场演示](http://jsfiddle.net/4EnCt/)**

```
$('#Thirdsamplecodesnippet').html() 
```

# php - PHP 所需文件 Iron Worker

> ID：14172025
> 
> 赞同：1
> 
> 时间：2013-01-05T13:00:18.810
> 
> 标签：php, heroku, ironworker

我正在向 Ironworker 上传一个 .worker 文件。worker 的代码需要（使用 require 命令）其他 php 文件。我也需要将它们上传到 Ironworker 吗？

换句话说，我是否需要在 .worker 文件中添加其他内容以及如何：

```
# define the runtime language
runtime "php"
# exec is the file that will be executed:
exec "hello.php" 
```

WHERE：hello.php 将包含以下语句：

```
require_once 'bye.php'; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-05T13:28:59.570

是的。IronWorker 在 Iron.io 的服务器上运行，因此需要上传所有依赖项。

您可以使用`dir`and`file`命令在工作文件中执行此操作：

```
dir 'path/to/dir'
file 'path/to/file.php' 
```

Dir 将包含整个目录，file 将仅包含单个文件。[您可以在.worker 参考页面](http://dev.iron.io/worker/reference/dotworker)上找到更多信息。

# python - 使用 Python 2.7 的 HTML 解析树

> ID：14172028
> 
> 赞同：3
> 
> 时间：2013-01-05T13:00:34.290
> 
> 标签：python, python-2.7, beautifulsoup, parse-tree, etetoolkit

我试图为下面的 HTML 表配置一个解析树，但无法形成它。我想看看树结构的样子！有人可以帮我吗？

```
# <html>
#  <head>
#   <title>
#    The Dormouse's story
#   </title>
#  </head>
#  <body>
#   <p class="title">
#    <b>
#     The Dormouse's story
#    </b>
#   </p>
#   <p class="story">
#    Once upon a time there were three little sisters; and their names were
#    <a class="sister" href="http://example.com/elsie" id="link1">
#     Elsie
#    </a>
#    ,
#    <a class="sister" href="http://example.com/lacie" id="link2">
#     Lacie
#    </a>
#    and
#    <a class="sister" href="http://example.com/tillie" id="link2">
#     Tillie
#    </a>
#    ; and they lived at the bottom of a well.
#   </p>
#   <p class="story">
#    ...
#   </p>
#  </body>
# </html> 
```

**编辑**

```
Microsoft Windows [Version 6.1.7600]
Copyright (c) 2009 Microsoft Corporation.  All rights reserved.

C:\Users\matt>easy_install ete2
Searching for ete2
Reading http://pypi.python.org/simple/ete2/
Reading http://ete.cgenomics.org
Reading http://ete.cgenomics.org/releases/ete2/
Reading http://ete.cgenomics.org/releases/ete2
Best match: ete2 2.1rev539
Downloading http://ete.cgenomics.org/releases/ete2/ete2-2.1rev539.tar.gz
Processing ete2-2.1rev539.tar.gz
Running ete2-2.1rev539\setup.py -q bdist_egg --dist-dir c:\users\arupra~1\appdat
a\local\temp\easy_install-sypg3x\ete2-2.1rev539\egg-dist-tmp-zemohm

Installing ETE (A python Environment for Tree Exploration).

Checking dependencies...
numpy cannot be found in your python installation.
Numpy is required for the ArrayTable and ClusterTree classes.
MySQLdb cannot be found in your python installation.
MySQLdb is required for the PhylomeDB access API.
PyQt4 cannot be found in your python installation.
PyQt4 is required for tree visualization and image rendering.
lxml cannot be found in your python installation.
lxml is required from Nexml and Phyloxml support.

However, you can still install ETE without such functionality.
Do you want to continue with the installation anyway? [y,n]y
Your installation ID is: d33ba3b425728e95c47cdd98acda202f
warning: no files found matching '*' under directory '.'
warning: no files found matching '*.*' under directory '.'
warning: manifest_maker: MANIFEST.in, line 4: path 'doc/ete_guide/' cannot end w
ith '/'

warning: manifest_maker: MANIFEST.in, line 5: path 'doc/' cannot end with '/'

warning: no previously-included files matching '*.pyc' found under directory '.'

zip_safe flag not set; analyzing archive contents...
Adding ete2 2.1rev539 to easy-install.pth file
Installing ete2 script to C:\Python27\Scripts

Installed c:\python27\lib\site-packages\ete2-2.1rev539-py2.7.egg
Processing dependencies for ete2
Finished processing dependencies for ete2 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-06T19:45:17.810

这个答案来得有点晚，但我仍然想分享它： ![在此处输入图像描述](../Images/f98c5847168ea08122e2b2cc94b2532f.png)

我使用[了 networkx](http://networkx.github.com/documentation/latest/)和[lxml](http://lxml.de/)（我发现它们可以更优雅地遍历 DOM 树）。但是，树布局取决于安装的[graphviz](http://www.graphviz.org/)和[pygraphviz](http://networkx.lanl.gov/pygraphviz/)。networkx 本身只会以某种方式将节点分布在画布上。代码实际上比要求的要长，因为我自己绘制标签以将它们装箱（networkx 提供了绘制标签，但它不会将`bbox`关键字传递给 matplotlib）。

```
import networkx as nx
from lxml import html
import matplotlib.pyplot as plt
from networkx.drawing.nx_agraph import graphviz_layout

raw = "...your raw html"

def traverse(parent, graph, labels):
    labels[parent] = parent.tag
    for node in parent.getchildren():
        graph.add_edge(parent, node)
        traverse(node, graph, labels)

G = nx.DiGraph()
labels = {}     # needed to map from node to tag
html_tag = html.document_fromstring(raw)
traverse(html_tag, G, labels)

pos = graphviz_layout(G, prog='dot')

label_props = {'size': 16,
               'color': 'black',
               'weight': 'bold',
               'horizontalalignment': 'center',
               'verticalalignment': 'center',
               'clip_on': True}
bbox_props = {'boxstyle': "round, pad=0.2",
              'fc': "grey",
              'ec': "b",
              'lw': 1.5}

nx.draw_networkx_edges(G, pos, arrows=True)
ax = plt.gca()

for node, label in labels.items():
        x, y = pos[node]
        ax.text(x, y, label,
                bbox=bbox_props,
                **label_props)

ax.xaxis.set_visible(False)
ax.yaxis.set_visible(False)
plt.show() 
```

## 如果您更喜欢（或必须）使用 BeautifulSoup，请更改代码：

我不是专家......只是第一次看BS4，......但它有效：

```
#from lxml import html
from bs4 import BeautifulSoup
from bs4.element import NavigableString

...

def traverse(parent, graph, labels):
    labels[hash(parent)] = parent.name
    for node in parent.children:
        if isinstance(node, NavigableString):
            continue
        graph.add_edge(hash(parent), hash(node))
        traverse(node, graph, labels)

...

#html_tag = html.document_fromstring(raw)
soup = BeautifulSoup(raw)
html_tag = next(soup.children)

... 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-06T13:08:08.360

Python 模块：
1\. [ETE](http://packages.python.org/ete2/tutorial/tutorial_trees.html)，但它需要*Newick*格式的数据。
2\. [GraphViz](http://www.graphviz.org/) + [pydot](https://code.google.com/p/pydot/)。看到[这个答案](https://stackoverflow.com/a/7673423/808255)。

Javascript：使用 JSON 格式
的惊人的[d3](https://github.com/mbostock/d3/wiki/Home) [TreeLayout 。](https://github.com/mbostock/d3/wiki/Tree-Layout)

如果您使用的是 ETE，那么您需要将 html 转换为 newick 格式。这是我做的一个小例子：

```
from lxml import html
from urllib import urlopen

def getStringFromNode(node):
    # Customize this according to
    # your requirements.
    node_string = node.tag
    if node.get('id'):
        node_string += '-' + node.get('id')
    if node.get('class'):
        node_string += '-' + node.get('class')
    return node_string

def xmlToNewick(node):
    node_string = getStringFromNode(node)
    nwk_children = []
    for child in node.iterchildren():
        nwk_children.append(xmlToNewick(child))
    if nwk_children:
        return "(%s)%s" % (','.join(nwk_children), node_string)
    else:
        return node_string

def main():
    html_page = html.fromstring(urlopen('http://www.google.co.in').read())
    newick_page = xmlToNewick(html_page)
    return newick_page

main() 
```

输出（*newick*格式的*[http://www.google.co.in ）：](http://www.google.co.in)*

 *```
'((meta,title,script,style,style,script)head,(script,textarea-csi,(((b-gb1,a-gb1,a-gb1,a-gb1,a-gb1,a-gb1,a-gb1,a-gb1,(u)a-gb1)nobr)div-gbar,((span-gbn-gbi,span-gbf-gbf,span-gbe,a-gb4,a-gb4,a-gb_70-gb4)nobr)div-guser,div-gbh,div-gbh)div-mngb,(br-lgpd,(((div)div-hplogo)div,br)div-lga,(((td,(input,input,input,(input-lst)div-ds,br,((input-lsb)span-lsbb)span-ds,((input-lsb)span-lsbb)span-ds)td,(a,a)td-fl sblc)tr)table,input-gbv)form,div-gac_scont,(br,((a,a,a,a,a,a,a,a,a)font-addlang,br,br)div-als)div,(((a,a,a,a,a-fehl)div-fll)div,(a)p)span-footer)center,div-xjsd,(script)div-xjsi,script)body)html' 
```

之后，您可以使用 ETE，如示例中所示。

希望有帮助。*

# java - 如果时间过长，请重新启动操作

> ID：14172032
> 
> 赞同：0
> 
> 时间：2013-01-05T13:00:52.127
> 
> 标签：java, android, android-asynctask

我有一个从第三方网站下载信息的 AsyncTask。本网站不受我控制。

问题是有时我会在 2 秒内获得此信息，但有时可能需要 30-40 秒。

我知道问题出在网站本身，因为我在网络浏览器的桌面上遇到了同样的问题。

我正在寻找的是一种在操作时间超过一定时间时取消操作并重试的方法。

这是我当前的代码：

```
protected ArrayList<Card> doInBackground(Void... voids)
{
    Looper.prepare();
    publishProgress("Preparing");
    SomeClass someClass = new SomeClass(this);

    return someClass.downloadInformation();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T14:32:32.797

您可以尝试为您的 Http 请求设置超时和套接字连接。您会看到此链接：[How to set HttpResponse timeout for Android in Java](https://stackoverflow.com/questions/693997/how-to-set-httpresponse-timeout-for-android-in-java) 以了解如何设置它们。

并使用 HttpRequestRetryHandler 来启用自定义异常恢复机制。

来自[http://hc.apache.org](http://hc.apache.org)：“默认情况下，HttpClient 尝试从 I/O 异常中自动恢复。默认的自动恢复机制仅限于少数已知安全的异常。

*   HttpClient 不会尝试从任何逻辑或 HTTP 协议错误（从 HttpException 类派生的错误）中恢复。
*   HttpClient 将自动重试那些假定为幂等的方法。
*   当 HTTP 请求仍在传输到目标服务器时（即请求尚未完全传输到服务器），HttpClient 将自动重试那些因传输异常而失败的方法。”

例子：

```
DefaultHttpClient httpclient = new DefaultHttpClient();

HttpRequestRetryHandler myRetryHandler = new HttpRequestRetryHandler() {

public boolean retryRequest(
        IOException exception, 
        int executionCount,
        HttpContext context) {
    if (executionCount >= 5) {
        // Do not retry if over max retry count
        return false;
    }
    if (exception instanceof InterruptedIOException) {
        // Timeout
        return false;
    }
    if (exception instanceof UnknownHostException) {
        // Unknown host
        return false;
    }

    if (exception instanceof SocketTimeoutException) {
        //return true to retry 
        return true;
    }

    if (exception instanceof ConnectException) {
        // Connection refused
        return false;
    }
    if (exception instanceof SSLException) {
        // SSL handshake exception
        return false;
    }
    HttpRequest request = (HttpRequest) context.getAttribute(
            ExecutionContext.HTTP_REQUEST);
    boolean idempotent = !(request instanceof HttpEntityEnclosingRequest); 
    if (idempotent) {
        // Retry if the request is considered idempotent 
        return true;
    }
    return false;
}

};

httpclient.setHttpRequestRetryHandler(myRetryHandler); 
```

请参阅此链接： [http](http://hc.apache.org/httpcomponents-client-ga/tutorial/html/fundamentals.html#d4e292) ://hc.apache.org/httpcomponents-client-ga/tutorial/html/fundamentals.html#d4e292了解更多详细信息。

# android - Facebook SDK 与 Android 中的 Fragments 集成？

> ID：14172038
> 
> 赞同：1
> 
> 时间：2013-01-05T13:01:25.947
> 
> 标签：android, facebook, tabs, android-fragments

我正在为 Android 应用程序使用默认的 tab+swipe 模板，并且正在尝试包含 Facebook 集成。我的应用程序如下所示： MainActivity 有两个选项卡 - 其中一个选项卡的内容包括 Facebook 的登录按钮。

但是，[Facebook 网站](https://developers.facebook.com/docs/getting-started/facebook-sdk-for-android/3.0/)上的教程（第 6 步）仅包含用于 Activity 的代码。我在为 Fragment 实现这个时遇到了麻烦。只有当我单击与第一个选项卡对应的片段中的登录按钮时，我才想登录到 FB 并检索 FB 用户数据。

这是片段代码：

```
 /**
 * A fragment representing a section of the app.
 */
public static class SectionFragment extends Fragment
{
    /**
     * The fragment argument representing the section number for this
     * fragment.
     */
    public static final String ARG_SECTION_NUMBER = "section_number";

    public SectionFragment() {}

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState)
    {
        if(getArguments().getInt(ARG_SECTION_NUMBER) == tabSection.FACEBOOK.ordinal())
        {
            View view = inflater.inflate(R.layout.fragment_facebook, container, false);

            Button loginButton = (Button) view.findViewById(R.id.login_button);

            loginButton.setOnClickListener(new OnClickListener() {
                @Override
                public void onClick(View v)
                {
                    //login to Facebook on click
                }
            });

            return view;
        }
        else if(getArguments().getInt(ARG_SECTION_NUMBER) == tabSection.CONTACTS.ordinal())
        { 
            View view = inflater.inflate(R.layout.fragment_contacts, container, false);

            return view;
        }

        return null;
    }
} 
```

这是 Facebook 教程代码：

```
package com.firstandroidapp;

import android.os.Bundle;
import android.app.Activity;
import android.content.Intent;
import android.widget.TextView;
import com.facebook.*;
import com.facebook.model.*;

public class MainActivity extends Activity {

  @Override
  public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

// start Facebook Login
Session.openActiveSession(this, true, new Session.StatusCallback() {

  // callback when session changes state
  @Override
  public void call(Session session, SessionState state, Exception exception) {
    if (session.isOpened()) {

      // make request to the /me API
      Request.executeMeRequestAsync(session, new Request.GraphUserCallback() {

        // callback after Graph API response with user object
        @Override
        public void onCompleted(GraphUser user, Response response) {
          if (user != null) {
            TextView welcome = (TextView) findViewById(R.id.welcome);
            welcome.setText("Hello " + user.getName() + "!");
          }
        }
      });
    }
  }
});
  }

  @Override
  public void onActivityResult(int requestCode, int resultCode, Intent data) {
      super.onActivityResult(requestCode, resultCode, data);
      Session.getActiveSession().onActivityResult(this, requestCode, resultCode, data);
  }

} 
```

所有这些回调方法都对应一个活动，而不是一个片段。我需要帮助将它们放入片段中并仅在单击按钮时调用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T13:20:40.663

这个[Facebook 示例](https://developers.facebook.com/docs/howtos/androidsdk/3.0/login-with-facebook/)可能更符合您的要求。您可以使用已定义的，也可以使用`UserSettingsFragment`您自己定义的 LoginButton 类和 Fragment。

# php - 数组副本中的 PHP 对象

> ID：14172039
> 
> 赞同：2
> 
> 时间：2013-01-05T13:01:55.413
> 
> 标签：php

我在 PHP 中对数组和对象有一个奇怪的行为，我不明白。也许你们可以帮助我。

创建一个数组，将其复制到另一个数组，更改第二个数组中的值，一切都如预期的那样：

```
$array1['john']['name'] = 'foo';
$array2 = $array1;
$array2['john']['name'] = 'bar';

echo $array1['john']['name']; // foo
echo $array2['john']['name']; // bar 
```

现在，如果我使用该数组中的对象执行此操作，则复制数组中的对象包含某种引用？

```
$array3['john']->name = 'foo';
$array4 = $array3;
$array4['john']->name = 'bar';

echo $array3['john']->name; // bar
echo $array4['john']->name; // bar 
```

我本来期望与第一个示例中的行为相同，但我在 php 文档中找不到任何关于此的内容。有人可以向我解释一下，或者给我发一个链接到记录的地方吗？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-05T13:08:02.780

默认情况下，对象通过引用传递。如果将某个标量值或数组分配给其他变量，则会克隆它。如果您分配对象，则仅复制引用而不复制对象。

> 将已创建的类实例分配给新变量时，新变量将访问与分配的对象相同的实例。将实例传递给函数时，此行为是相同的。可以通过克隆来制作已创建对象的副本。

来自[http://php.net/manual/en/language.oop5.basic.php](http://php.net/manual/en/language.oop5.basic.php)

`clone`所以，如果你想要另一个对象，你需要打电话。

```
$array4['john'] = clone $array3['john']; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T13:08:24.807

对象在 php5 中通过引用传递（这通常是您希望传递对象的方式），而不是数组。

使用克隆[http://php.net/manual/en/language.oop5.cloning.php](http://php.net/manual/en/language.oop5.cloning.php)

--编辑太晚了 :-) --

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-05T13:09:10.630

尝试使用`clone`希望您使用对象。

当对象在数组中时，有人为此编写了一个函数。

这里是[链接](http://php.net/manual/en/ref.array.php#108546)

# assembly - 了解 STM32 应用程序的 MakeFile

> ID：14172040
> 
> 赞同：1
> 
> 时间：2013-01-05T13:01:59.387
> 
> 标签：assembly, makefile, build, embedded, stm32

我正在尝试在 STM32 上开发应用程序。我是一个新手，花了一些时间在如何建立环境上手。在互联网上，我找到了在同一平台上运行的应用程序的源代码。但是不知道如何为此构建和环境并构建一个bin文件。我看到 MakeFile 但我不太了解。

我想知道我是否可以通过敏锐地理解make文件来对构建环境进行逆向工程。如果我听起来真的很愚蠢，我很抱歉。对此问题的任何帮助将不胜感激。

感谢您的阅读。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T13:11:13.277

了解您一无所知的事物的一般方法是对自己进行有关该主题的教育。在特定情况下，我建议阅读[GNU make 手册](http://www.gnu.org/software/make/manual/html_node/index.html)`make`，它会教您操作和`Makefile`语法的基础知识和更高级的部分。

如果您喜欢死树副本，O'Reilly 还有一本书，*使用 GNU make 管理项目*（第 3 版）。

# python - Django：将 URL 参数附加到列表中？

> ID：14172044
> 
> 赞同：1
> 
> 时间：2013-01-05T13:02:38.167
> 
> 标签：python, django, django-urls

我目前有表单的`/blue`URL - 每个 URL 都是一种颜色。关联的 URL 模式如下：

```
 (r'^(?P<colour>\w+)$', 'views.colour') 
```

我想知道是否有可能有看起来像自然语言列表的 URL，长度不确定，用以下分隔`-or-`：

```
/blue-or-green-or-yellow 
```

理想情况下，关联的 URL 模式会将每个匹配项附加到 Python 列表中，以便在视图中处理：

```
 (r'^(?P<colour_list>\w+)(?:-or-(?P<colour_list>\w+))+$', 'views.colour') 
```

有没有办法在 Django 中做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-05T13:08:58.090

像这样的东西`(?P<colour_list>(\w+(\-or\-)?)+)`会得到整个子字符串匹配，然后你可以分割`-or-`

但是请注意，那`blue-or-`将是有效匹配，因此您可能希望像这样拆分它：`filter(bool, colour_list.split('-or-'))`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T13:29:30.677

这样的事情会有所帮助：

采用逗号分隔的颜色

```
(r'^(?P<colours>[\w,]+)$', 'views.colour') 
```

然后在视图中：

```
colours = colours.split(',') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-05T13:32:51.167

试试这个`regex`：

```
(\w+(?:-or-)?)+ 
```

或使用字符串拆分：

```
result = colours.split("-or-") 
```

# html - 无法在 JSP 文件中插入背景图像

> ID：14172045
> 
> 赞同：0
> 
> 时间：2013-01-05T13:02:52.897
> 
> 标签：html, jsp, background

我尝试在JSP上插入背景图片（通过eclipse），图片文件正确

插入正确的文件夹（/WebContent）

但是，JSP 文件不显示背景图像。

请帮我

```
<%@ page language="java" contentType="text/html; charset=euc-kr" %>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=euc-kr">
<title>Login Page!</title>
</head>
<body BACKGROUND="Untitled.jpg">
<form action="loginCheck.jsp" method="post">
<table>
<tr>
<td>0000000000000000000000000000</td>
</tr>

<tr>
<td>UserID :</td><td><input type="text" name="UserID"/></td>
</tr>

<tr>
<td>UserPW :</td><td><input type="password" name="UserPW"/></td>
</tr>

<tr>
<td>middle left :</td><td><input type="submit" name="Login"/></td>
</tr>

<tr>
<td>0000000000000000000000000000</td>
</tr>
</table>
</form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-17T17:12:10.757

试试这个 CSS 代码

```
 <div style='position:absolute;z-index:0;left:0;top:0;width:100%;height:100%'>
         <img src='untitled.jpg' style='width:100%;height:100%' alt='[]' />
     </div> 
```

可以根据您希望获得的尺寸调整高度和宽度的值。

# php - javascript getTimezoneOffset() 函数是否可靠地返回准确的 UTC 偏移量？

> ID：14172048
> 
> 赞同：2
> 
> 时间：2013-01-05T13:03:19.030
> 
> 标签：php, javascript, utc, timezone-offset

要在 php 中获取 UTC 偏移量，我可以使用`date("Z")`，但我认为这将返回相对于服务器时区的 UTC 偏移量，而不是相对于我想要获得的用户计算机的时区。当我搜索时，我发现获取相对于用户计算机时区的 UTC 偏移量可以通过 javascript`getTimezoneOffset()`函数完成，该函数返回 UTC 时间和本地时间之间的时差，以分钟为单位。我已经在我的 php 脚本中成功使用了这个 javascript 函数。现在我的问题是： javascritp`getTimezoneOffset()`函数是否总是（或在大多数情况下）可靠地返回相对于用户计算机的准确 UTC 偏移量？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T13:06:48.680

这将取决于用户的日期/时间设置。它将根据浏览器看到的用户计算机上设置的时区为您提供偏移量。

但请注意，当您使用 javascript 时，它是在客户端（即浏览器）上运行，而不是在服务器端。所以你不能在 PHP 中使用它，除非：

*   当用户第一次访问您的网站时，您将其存储在 cookie 中（通过 javascript）。
*   您进行 AJAX 调用以存储 PHP 代码以将其存储在会话中。
*   如果要在用户的计算机上显示时间，则发送要显示的日期和 之间的时差`now()`，然后将其添加到用户的`getTime()`或显示时差（即 7 小时前、2 分钟前等） .)。

# php - 如何将 pdf 作为 Dompdf 在 php 中生成的附件发送？

> ID：14172049
> 
> 赞同：0
> 
> 时间：2013-01-05T13:03:44.110
> 
> 标签：php, codeigniter, pdf, sendmail

如何将 pdf 作为 Dompdf 在 php 中生成的附件发送？

生成pdf的代码是这样的。

```
$this->load->plugin('to_pdf');

pdf_create($this->load->view('print_registration', $data, true), 'Title : Registration Form'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T13:19:56.630

Use dompdf to write your PDF file to disk. Then, use the file as an attachment and send the email.

Or

Just save the file that is generated with dompdf and then you can attach it to an email using CodeIgniter's attach() method from the email class.

[http://ellislab.com/codeigniter/user-guide/libraries/email.html](http://ellislab.com/codeigniter/user-guide/libraries/email.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T13:06:51.097

您可以使用[PHPMailer](http://phpmailer.worxware.com/)或[SwiftMailer](http://swiftmailer.org/)等库。

# google-maps - 隐藏 div 中的谷歌地图 V.3 不会全部加载

> ID：14172050
> 
> 赞同：0
> 
> 时间：2013-01-05T13:03:50.197
> 
> 标签：google-maps

我知道，这个问题已经被问过很多次，我尝试了所有可能的解决方案，包括：

```
google.maps.event.trigger(map, 'resize');
map.setZoom( map.getZoom() ); 
```

，但没有一个适合我。

因此，我需要加载带有隐藏地图的页面，并且仅在用户单击“显示地图”链接时才显示地图。问题是地图没有全尺寸显示。它以 181x186 像素大小出现，但其余部分只是一个灰色方块。

```
This is my script: 

<script type="text/javascript"> 
function toggle() {
var ele = document.getElementById("map_canvas");
var text = document.getElementById("displayText");
if(ele.style.display == "block") {
ele.style.display = "none";
text.innerHTML = "Show map";
}
else {
ele.style.display = "block";
text.innerHTML = "Hide map";
}
} 
</script>

<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false&callback=handleApiReady"></script>
<script type="text/javascript">
function handleApiReady() {
var myLatlng = new google.maps.LatLng(<?php echo $latitude;?>, <?php echo $longitude;?>);
var myOptions = {
zoom: 9,
center: myLatlng,
mapTypeId: google.maps.MapTypeId.ROADMAP
}
var map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);
var marker = new google.maps.Marker({
position: new google.maps.LatLng(<?php echo $latitude;?>, <?php echo $longitude;?>),
draggable: true,
icon: 'http://google-maps-icons.googlecode.com/files/factory.png', 
map: map
});

google.maps.event.addListener(marker, 'dragend', function (event) {
document.getElementById("latitude").value = this.getPosition().lat();
document.getElementById("longitude").value = this.getPosition().lng();
});
}
</script>

<div id="map_canvas" style="display:none;width:760px;height:420px;"></div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-05T15:37:48.137

这对我有用：

```
<script type="text/javascript"> 
function toggle() {
  var ele = document.getElementById("map_canvas");
  var text = document.getElementById("displayText");
  if(ele.style.display == "block") {
    ele.style.display = "none";
    text.innerHTML = "Show map";
  }
  else {
    ele.style.display = "block";
    text.innerHTML = "Hide map";
    google.maps.event.trigger(map, "resize");
    map.setCenter(myLatlng);
  }
} 
</script> 
```

如果我将 myLatlng 和 map 设为全局。

[工作示例](http://www.geocodezip.com/v3_simpleMap_hiddenMap.html)

# jquery - jQuery Slider，在绑定到选择时查找所选值'

> ID：14172054
> 
> 赞同：1
> 
> 时间：2013-01-05T13:03:55.237
> 
> 标签：jquery, select, slider, selected, jsfiddle

我有一个小问题要解决。

[我已经把问题放到了 JSFiddle 中，他们在选择 html http://jsfiddle.net/dANW8/](http://jsfiddle.net/dANW8/)中有很多选项

这是实际滑块的 JS，但检查 jsfiddle 更容易

```
 $(function () {
        var select = $('#hdd');
        var slider = $("<div id='slider'></div>").insertAfter(select).slider({
            min: 0,
            max: 45,
            range: "true",
            value: select[0].selectedIndex + 1,
            slide: function (event, ui) {
                select[0].selectedIndex = ui.value - 1;
                $("#hddValue").text(ui.value);
            }
        });
    //show start value
    $( "#hddValue" ).html(  $('#slider').slider('value') );
    }); 
```

我基本上想输出所选项目的实际值，所以我不想输出从 1 到 45 的实际索引号，而是想显示它的值。

有人知道我该怎么做吗？

提前感谢您花时间寻找，

菲尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T13:16:04.323

你需要做简单的数学计算：更新这个：

```
$("#hddValue").text(ui.value*10+40); 
```

您的选择中还缺少一个选项：

```
 <option>400 GB - step 36</option> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T13:18:27.357

您需要使用`selected`选择的选项文本。

**[现场演示](http://jsfiddle.net/dANW8/2/)**

改变

```
 $("#hddValue").text(ui.value); 
```

到

```
 $("#hddValue").text($('#hdd option:selected').text()); 
```

# java - Java - howto 平台独立输出

> ID：14172058
> 
> 赞同：2
> 
> 时间：2013-01-05T13:04:17.687
> 
> 标签：java, character-encoding, cross-platform, platform-independent

我想知道如何让我的代码在不同平台（至少是 windows 和 linux）上产生相同的输出（UTF-8 或 UTF16）。
我认为可以设置应用程序使用的代码页，但我找不到设置代码页的信息。而且我不知道在使用特殊字符（如 äöü 或其他非拉丁字符）时设置代码页是否真的会产生相同的输出。

我想要一个无需为 java.exe 设置参数即可工作的解决方案。

**编辑：**
我的意思是输出到控制台。关于对其他输出媒体的可能影响的评论会很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T14:35:20.540

Java`char`类型使用 UTF-16，它能够表示 Unicode 字符集中的每个代码点。几乎所有使用字符串的 I/O 都涉及一些隐式转码操作。

要保存和恢复字符数据而不会丢失或损坏，通常最好使用其中一种 Unicode 转换格式。有[读取器](http://docs.oracle.com/javase/7/docs/api/java/io/InputStreamReader.html#InputStreamReader%28java.io.InputStream,%20java.nio.charset.Charset%29)和[写入](http://docs.oracle.com/javase/7/docs/api/java/io/OutputStreamWriter.html)器类型可用于执行此转码操作。避免使用默认构造函数，因为它们依赖于默认编码，这可能是几十年前最好的遗留编码。通常首选明确指定 UTF-8。

写入终端有不同的问题。在这里，您正在编写将由另一个应用程序解码的数据，因此您必须以它可以理解的格式编写字符数据。

该[`Console`](http://docs.oracle.com/javase/7/docs/api/java/io/Console.html)类型将检测并使用终端的编码，而`System.out`使用默认的平台编码 - 由于一系列历史原因，这些在 Windows 上是不同的。[此处](https://stackoverflow.com/a/4005717/304)指出了其他差异。在 cmd.exe 中使用 Unicode 的记录方法是使用适当的 Win32 API 调用。

我博客中的一些相关帖子：

*   [Java：字符编码粗略指南](http://illegalargumentexception.blogspot.co.uk/2009/05/java-rough-guide-to-character-encoding.html)
*   [I18N：Windows 命令提示符下的 Unicode](http://illegalargumentexception.blogspot.co.uk/2009/04/i18n-unicode-at-windows-command-prompt.html)
*   [Java：Windows 命令行上的 Unicode](http://illegalargumentexception.blogspot.co.uk/2009/04/java-unicode-on-windows-command-line.html)（评论者指出它在 Windows 7 中不起作用，但我尚未对此进行验证）

[BalusC](https://stackoverflow.com/users/157882/balusc)在字符处理的一些实际问题上也有一篇很好的文章：[Unicode - How to get the characters right?](http://balusc.blogspot.co.uk/2009/05/unicode-how-to-get-characters-right.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-05T13:15:28.317

字符集（或代码页，因为它曾经被称为）将字符序列转换为字节序列。

在 Java API 中，字符集作为[`Charset`](http://docs.oracle.com/javase/7/docs/api/java/nio/charset/Charset.html). 所有在字符和字节之间转换的 API 元素都可以提供要使用的字符集（许多还允许您传递字符集名称，因此您不必自己进行查找）。如果您不提供字符集，这些方法通常会退回到操作系统的默认编码。

例如，[`OutputStreamWriter`](http://docs.oracle.com/javase/7/docs/api/java/io/OutputStreamWriter.html)具有一个采用字符集的构造函数：

```
try (Writer w = new OutputStreamWriter(System.out, "utf-8")) {
    w.write("Hello world");
} 
```

# c - pthread 创建无法正常工作

> ID：14172059
> 
> 赞同：2
> 
> 时间：2013-01-05T13:04:24.003
> 
> 标签：c, pthreads

我有这段代码：

```
#include <stdlib.h>
#include <stdio.h>
#include <pthread.h>
#include <time.h>

int number;
pthread_mutex_t  *mutex;
pthread_t *threads;

void *PrintHello(void *threadid)
{
    long tid;
    tid = (long)threadid;
    printf("Hello World! It's me, thread #%ld!\n", tid);
    time_t rawtime;
    struct tm * time_start;
    time ( &rawtime );
    time_start = localtime ( &rawtime );
    printf ( "The number %ld thread is created at time %s  \n",tid, asctime     (time_start));
    pthread_exit(NULL);
}

int main(int argc, char *argv[])
{
    int i,rc;

    printf("give threads");
    scanf("%d",&number);
    mutex = calloc( number, sizeof(*mutex));
    threads = calloc(number, sizeof(*threads));

    for (i = 0; i < number;i++) {
        pthread_mutex_init( &mutex[i],NULL);
    }

    for(i=0; i<number; i++){
        printf("In main: creating thread %d\n", i);
        rc = pthread_create(&threads[i], NULL, PrintHello, (void *)i);
        if (rc){
            printf("ERROR; return code from pthread_create() is %d\n", rc);
            exit(-1);
        }
    }

    return 0;
} 
```

此代码的目的是要求用户提供将要创建的线程数，在创建线程后，线程本身将打印 2 条消息，说明线程数和时间创建的。

问题是在主`"In main: creating thread"`线程内显示消息，但线程内的消息有时不显示。

例如，它将创建 3 个线程，只有 1 个线程会显示其消息，并且该线程也不会显示创建的时间。我不知道代码是否有问题。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-05T13:07:33.797

**根本原因：**
您`main()`在子线程有机会完成任务之前退出。

**解决方案：**
您需要确保`main()`等待所有线程完成其工作。
你需要使用：

**[pthread_join()](http://pubs.opengroup.org/onlinepubs/9699919799/functions/pthread_join.html)**

来实现这个功能。在从返回之前添加以下内容`main()`：

```
for(i=0; i<number; i++)
{
    pthread_join(threads[i], NULL);
} 
```

**其他问题：**

*   您动态分配内存，但从不释放它。尽管如此，一旦您的程序返回，操作系统就会回收内存。明确地这样做是一个好习惯。
*   您创建了一个互斥锁，但您既没有使用它，也没有释放它。但这似乎是正在进行的代码。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-05T13:11:37.780

Return from`main()`相当于调用`exit(...)`，它终止了整个过程。您可以使用`pthread_join()`等待每个非主线程，就像另一个答案建议的那样，或者您可以`pthread_exit(NULL)`在结束时调用`main()`：它将退出初始线程，但其他线程将继续运行。

# angularjs - angularjs 指令中棘手的范围绑定

> ID：14172060
> 
> 赞同：1
> 
> 时间：2013-01-05T13:04:33.000
> 
> 标签：angularjs

我想在 angularjs 中编写“就地编辑”指令。我希望该指令是可重用的，因此我对该指令有以下要求：

1.  它必须是可以装饰任何元素的属性，这是有意义的（div，span，li）
2.  它必须支持编辑按钮，单击该按钮会将设置的显示元素更改为输入文件。一个对象的典型属性，例如联系人（号码、姓名）

我发现指令中范围可见性的欺骗行为可以在这个小提琴[http://jsfiddle.net/honzajde/ZgNbU/1/](http://jsfiddle.net/honzajde/ZgNbU/1/)中看到。

1.  在指令中注释掉：显示模板和范围 -> 联系人号码和联系人姓名
2.  在指令中注释掉：scope -> contact.number only 被显示
3.  不注释掉任何东西->什么都不显示

=> 当两者都被注释掉时，只需将模板添加到指令中，即使未使用模板，它也会呈现contact.number。

我想问游戏规则是什么？

```
<div>
  <div ng-controller="ContactsCtrl">
    <h2>Contacts</h2>
    <br />
    <ul>
        <li ng-repeat="contact in contacts">
            <span edit-in-place="" ng-bind="contact.number"></span> | 
            <span edit-in-place="" >{{contact.name}}</span>
        </li>
    </ul>
    <br />
    <p>Here we repeat the contacts to ensure bindings work:</p>
    <br />
    <ul>
        <li ng-repeat="contact in contacts">
            {{contact.number}} | {{contact.name}}
        </li>
    </ul>

  </div>
</div>

var app = angular.module( 'myApp', [] );

app.directive( 'editInPlace', function() {
  return {
    restrict: 'A',
    //scope: { contact:"=" },    
    template: '<span ng-click="edit()" ng-bind="value"></span><input ng-model="value"></input>',
    link: function ( $scope, element, attrs ) {
      // Let's get a reference to the input element, as we'll want to reference it.
      var inputElement = angular.element( element.children()[1] );

      // This directive should have a set class so we can style it.
      element.addClass( 'edit-in-place' );

      // Initially, we're not editing.
      $scope.editing = false;

      // ng-click handler to activate edit-in-place
      $scope.edit = function () {
        $scope.editing = true;

        // We control display through a class on the directive itself. See the CSS.
        element.addClass( 'active' );

        // And we must focus the element. 
        // `angular.element()` provides a chainable array, like jQuery so to access a native DOM function, 
        // we have to reference the first element in the array.
        inputElement[0].focus();
      };

      // When we leave the input, we're done editing.
      inputElement.prop( 'onblur', function() {
        $scope.editing = false;
        element.removeClass( 'active' );
      });
    }
  };
});

app.controller('ContactsCtrl', function ( $scope ) {
  $scope.contacts = [
    { number: '+25480989333', name: 'sharon'},
    { number: '+42079872232', name: 'steve'}
  ];
}); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-05T17:52:38.910

您遇到问题是因为您滥用了角度。

首先，指令应该是自包含的，但是您要从中提取功能，这使得它**的**通用性和可重用性**降低。**在您的代码中，您在 DOM 和属于指令的控制器中具有功能。为什么？

其次，当所有这些部分串在一起时，您的标记和javascript也不清楚您想要完成的具体操作。

第三，在大多数情况下，指令应该有自己的独立作用域，这是通过声明一个作用域对象来完成的，该对象具有它应该绑定的属性。您不应该`{{contact.name}}`在指令中传递表达式（即），因为它会**破坏**绑定，并且当就地编辑完成时，您的联系人将不会更新。`=`正确的方法是通过作用域上的属性建立双向绑定。`ng-bind`这不是你想要的：这是特定于范围的，所以我们在指令的范围**内使用它。**正如 Valentyn 建议的那样，您可以做一些魔术来解决这个问题，但这不是一个好主意，而且以正确的方式设置它非常简单。通过属性执行此操作有什么问题？

这都是坏的朱珠。

[正如我在您关于同一主题的其他问题](https://stackoverflow.com/questions/14166637/agularjs-how-to-say-to-a-directive-to-clone-scope/14169878)中指出的那样，您必须使您的指令自包含并**使用**角度，而不是反对它。这是我之前给你[的小提琴的基于属性的版本](http://jsfiddle.net/joshdmiller/NDFHg/7/)，满足你的第一个要求。请让我知道这个实现具体有什么问题，我们可以讨论修复它的角度方式。

最后，如果您提供有关“按钮”方面所需内容的更多上下文，我也会将其合并到小提琴中。

* * *

**[更新]**

可以让指令按照你的方式工作，但你最终会遇到问题（或者现在看起来）。**Angular 应用程序（或与此相关的任何应用程序）中的所有**组件都应尽可能独立。这不是“规则”或限制；这是一个“最佳实践”。类似地，指令组件之间的通信*可以*通过控制器进行，但不应该这样。理想情况下，您根本不应该在控制器中引用 DOM - 这就是指令的用途。

如果您的特定目的是可编辑的**行**，那么**这**就是您的指令。可以使用较大指令使用的较低级别的通用就地编辑指令，但仍然存在较高级别的指令。更高级别的指令封装了它们之间的逻辑。然后，这个更高级别的组件将需要一个联系人对象。

`ng-bind="var"`最后，不，和之间不一定有很大区别`{{var}}`。但这不是问题；问题是绑定发生在**哪里。**在您的示例中，将*值*而不是双向绑定*变量*传递给指令。我的观点是该指令需要访问该变量，以便它可以更改它。

**摘要**：您正在以一种非常 jQuery 风格的方式进行编码。这对于在 jQuery 中编码非常有用，但在 Angular 中编码时效果不佳。实际上，它会导致很多问题，例如您遇到的问题。例如，在 jQuery 中，您可以在单个代码块中动态插入 DOM 元素、声明和处理事件以及手动绑定变量，所有这些都是手动操作。在 Angular 中，关注点完全分离，并且大部分绑定是自动的。在大多数情况下，它导致 javascript 代码比 jQuery 替代方案*至少*小三分之二。这是其中一种情况。

也就是说，我创建了一个 Plunker，其中包含一个更复杂的就地编辑版本以及一个新的更高级别的指令以合并其他功能：[http ://plnkr.co/edit/LVUIQD?p=预览](http://plnkr.co/edit/LVUIQD?p=preview)。

我希望这有帮助。

**[更新 2]**

这些是您新一轮问题的答案。它们可能对你的启迪有好处，但我已经给了你“角度方式”来解决你的问题。您还会发现，我在最初的答案和更新中已经解决了这些问题（以更广泛的方式）。希望这使它更加明显。

*问题：* “在指令中注释掉：模板和范围 -> 显示contact.number 和contact.name”

*我的回复：*当您不指定范围时，该指令会继承其父范围。*您在 parent 的上下文中*绑定并插入了名称和编号，因此它“有效”。但是，因为指令会**改变**值，所以这*不是*解决问题的好方法。它确实应该有自己的范围。

*问题：* “在指令中注释掉：范围 -> 仅显示 contact.number”

*我的回复：*您将父级的范围属性绑定到“contact.number”指令，因此它将在 $digest 循环期间放置在内部 - 在指令被处理之后。在“contact.name”上，将其*放在*指令中，该指令只有在指令编码为嵌入时才有效。

*问题：* “没有注释掉任何东西 -> 什么都没有显示”

*我的回答：*对。如果指令有自己的范围（这个肯定应该），那么您必须使用定义的指令范围属性来传递值，正如我的几个代码示例所示。`scope`但是，当我们通过在其定义中使用属性来明确禁止它时，您的代码会尝试在指令中使用父范围。

**Summary:** While this second update may be informative (and I hope that it is), it doesn't answer the question *beneath* your questions: how do I use angular components *correctly* so that the scope I'm using is always what I think it is? My first post and the subsequent update, answer that question.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-05T14:11:26.507

这里有点更新你的小提琴，但它需要进一步改进以满足你的要求的完整列表：http: [//jsfiddle.net/5VRFE/](http://jsfiddle.net/5VRFE/)

关键点是：

```
scope: { value:"=editInPlace" }, 
```

一些注意事项：最好使用 ng-show ng-hide 指令进行视觉显示隐藏，而不是更改 css 类。此外，最好将功能分散到不同的指令中以更好地分离关注点（检查 ngBlur 指令）

关于范围检查[指南关于范围](http://docs.angularjs.org/guide/directive)段落“**理解嵌入和范围**”的混淆：如果您想从指令的模板访问控制器的范围，则每个指令都有单独的**隔离**范围，请使用指令范围绑定（指令定义对象的“范围”字段） . 并且被嵌入的元素也具有您定义嵌入模板的范围。

从第一个角度看，那些孤立的作用域听起来有点奇怪，但是当你有良好的结构化指令时（还要注意一个指令可能需要另一个指令并共享绑定），你会发现它非常有用。

# iphone - 同一类中的多个 URL 调用

> ID：14172061
> 
> 赞同：0
> 
> 时间：2013-01-05T13:04:41.260
> 
> 标签：iphone

我是 iphone 开发的新手，有人可以帮我解决这个问题吗，从一周开始我就面临一个问题，那就是我有多个网址，如下所示

```
for (int i=0;i<=[listingAffArray];i++)
    NSString *urlStr=[NSString stringWithFormat:@"http://demo.holidayjuggle.net:7777/services/inventoryservice/%@/%@/stores/search?location=12.971598700000000000,77.594562699999980000,50",appDelegate.buyingAff,[appDelegate.listingAffArray objectAtIndex:i]];
} 
```

在这我得到了所有 url 的响应，但是在 didfinishloading 中无法找到哪些 url 响应数据

```
NSURL *url=[NSURL URLWithString:urlStr];

NSMutableURLRequest *req=[NSMutableURLRequest requestWithURL:url];

[req setHTTPMethod:@"GET"];

[req setValue:@"application/json" forHTTPHeaderField:@"Accept"];
[req setValue:@"application/json" forHTTPHeaderField:@"Content-Type"];

connection=[NSURLConnection connectionWithRequest:req delegate:self];
if(connection){
    NSLog(@"connection is successfull "); 
}
else{
    NSLog(@"connection failed");
}

-(void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response
{ 
    responseData=[[NSMutableData alloc]init]; 
}

-(void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data
{
    [responseData appendData:data]; 
}

-(void)connectionDidFinishLoading:(NSURLConnection *)connection
{
    NSString *strResponse=[[NSString alloc]initWithData:responseData encoding:NSUTF8StringEncoding];

} 
```

在 responsedata 中只有最后一个 url 数据我放了断点并观察到每个 url 在 didfinishloading 中调用，当第二个 url 调用时，它正在使用 secondurl 调用更新，就像在 responsedata 中最后一个 url 数据一样。如何存储每个响应数据分别

提前致谢

西瓦库马里

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T13:40:53.397

尝试以异步方式使用 url 调用 Web 服务。即。点击第一个网址，当您收到第一个网址的结果时，点击第二个网址请求。之后，当您收到第二个 url 响应时，点击了第三个 url 请求。

这些所有请求都应该在后台线程或新线程中运行，以免影响主线程。

还采用枚举数据类型，例如

```
enum {
  requestOne=0,
  requestTwo,
  requestThree,
  requestFour
}currentRequest; 
```

当你开始点击 currentRequestData 中的第一个 url 时，分配 requestOne 并作为响应检查这个 enumDataType。收到响应后，使用第二个枚举类型点击第二个 url

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T13:22:10.063

Yes it happen because all `NSURLConnection` share same delegate same object which is "self"

If u want to load multiple URL than you should have multiple space to store that data.

So one object of responseData is not sufficient.

There can be many way let me suggest one which I use.

*   Declare a `NSMutableDictionary` object
*   Store `NSURLConnection` object as key and `NSMutableData` object as value so if u have 3 URL you have 3 entery in `NSMutableDictionary`.
*   In every Delegate method of `NSURLConnection` append data only to corresponding `NSMutableData` object.

Tell me if u need more help....

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-05T13:17:34.047

在您的类中创建一个数组并将每个数组存储`strResponse`在您的数组中（使用`addObject`）。

另外，这没有意义：

```
for (int i=0;i<=[listingAffArray];i++)
    NSString *urlStr=[NSString stringWithFormat:@"http://demo.holidayjuggle.net:7777/services/inventoryservice/%@/%@/stores/search?location=12.971598700000000000,77.594562699999980000,50",appDelegate.buyingAff,[appDelegate.listingAffArray objectAtIndex:i]];
} 
```

该`[listingAffArray]`部分应该给您一个编译器错误，即使这确实有效，您每次循环时都会覆盖相同的变量。

# keyboard-layout - gnome 3.6 中的慢速键盘布局切换

> ID：14172068
> 
> 赞同：5
> 
> 时间：2013-01-05T13:05:53.737
> 
> 标签：keyboard-layout, gnome-3

当我从 gnome 3.4 升级到 gnome 3.6 时，我意识到我无法再使用 Alt+Shift 更改我的键盘布局。所以我安装了 gnome-tweak-tool 并在 Typing 选项卡中从 Modifiers-only 输入源中选择了 Alt+Shift。

现在我可以使用 Alt+Shift 更改我的布局，但它真的很慢......我该怎么办？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-05T13:05:53.737

这是因为现在在 gnome 3.6 中，gnome 处理输入源而不是 x。您可以禁用 gnome 处理键盘布局：

```
gsettings set org.gnome.settings-daemon.plugins.keyboard active false 
```

然后安装 qxkb 并为您自己配置。

现在 x 可以处理您的键盘布局，而且速度很快 :)。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2018-05-09T12:02:04.543

在 Ubuntu 18.04（GNOME Shell 3.28.1）上，我还注意到通过`Alt+Shift`. 在 16.04 这不是。

我注意到，如果我使用标准`Super+Space`组合，它会运行得更快。

**我找到了这个解决方案：** [https ://askubuntu.com/a/986629/766670](https://askubuntu.com/a/986629/766670)

底线是`Alt+Shift`切换（慢）的附加组合，但标准 - 快。

因此，您可以将标准方法的组合键替换为所需的组合键，切换**会更快**：

```
gsettings set org.gnome.desktop.wm.keybindings switch-input-source "['<Alt>Shift_L']"
gsettings set org.gnome.desktop.wm.keybindings switch-input-source-backward "['<Shift>Alt_L']" 
```

我希望这可以帮助某人避免浪费时间寻找解决方案。

# c# - Menustrip“标准项目”代码

> ID：14172078
> 
> 赞同：-4
> 
> 时间：2013-01-05T13:07:27.637
> 
> 标签：c#, menustrip

当您在 c# 中为 Menustrip 使用“插入标准项目”功能时，是否有用于剪切/复制/粘贴等功能的标准代码？这样我就可以将代码添加到他们的 Click 触发器中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-05T15:29:39.493

如果要从 RichTextBox 或 TextBox 复制代码，请将其放入：

```
private void button1_Click(object sender, EventArgs e)
    {
        richTextBox1.Copy();
    } 
```

如果要粘贴或剪切，只需将其更改 `richTextBox1.Copy();` 为 `richTextBox1.Paste();` 或将其更改为剪切 `richTextBox1.Cut();`

希望这可以帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-05T13:19:03.493

这种标准项目的添加是通过`System.Design`装配完成的。有一个名为 的内部类`System.Windows.Forms.Design.StandardMenuStripVerb`，用于添加项目。它是非常硬编码的，因此没有可访问的模板。

# joomla - Joomla 2.5 私人消息

> ID：14172081
> 
> 赞同：0
> 
> 时间：2013-01-05T13:07:37.530
> 
> 标签：joomla

我正在使用 joomla 2.5.7。当我尝试在私人消息组件中选择用户时，它只显示管理员用户。注册用户不可用。我想为注册用户使用私人消息。建议我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-05T15:23:57.233

如果您指的是 Joomla 标配的私人消息组件，那么这仅对管理员可用，因为它是一个管理员组件，注册用户将无法进入后端查看他们的消息。

如果您正在寻找 PM 组件，那么我强烈推荐[UddeIM](http://extensions.joomla.org/extensions/communication/pms/3206)，它是免费的，并且还集成了许多其他 3rd 方扩展，例如 Kunena 和 Community Builder。

顺便说一句，您应该将您的 Joomla 版本更新到 2.5.14

希望这可以帮助

# android - 如何使用 Zxing 2.1 库生成二维码？

> ID：14172083
> 
> 赞同：0
> 
> 时间：2013-01-05T13:07:59.220
> 
> 标签：android, zxing, encode

**问题：**

好吧，我已经看到了很多如何做到这一点的例子，但是在这个库**（Zxing 2.1）**中似乎没有一个工作。我想将字符串编码为 QRCode 并让位图显示在 Imageview 中。

**问题：**

我应该使用旧版本吗？有人有 Zxing library 2.1 的工作示例吗？

**我试过的：**

```
String contents = uniqueID;
        BarcodeFormat barcodeFormat = BarcodeFormat.QR_CODE;

        int width = 300;
        int height = 300;

        MultiFormatWriter barcodeWriter = new MultiFormatWriter();
        try {
            BitMatrix matrix = barcodeWriter.encode(contents, barcodeFormat, width, height);

        } catch (WriterException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

    } 
```

得到了这个：

```
01-05 13:02:10.701: E/AndroidRuntime(1375): FATAL EXCEPTION: main
01-05 13:02:10.701: E/AndroidRuntime(1375): java.lang.NoClassDefFoundError: com.google.zxing.BarcodeFormat
01-05 13:02:10.701: E/AndroidRuntime(1375):     at br.com.example.nightid.slidingsubmenu.IDcard.onCreate(IDcard.java:75)
01-05 13:02:10.701: E/AndroidRuntime(1375):     at android.app.Activity.performCreate(Activity.java:4465)
01-05 13:02:10.701: E/AndroidRuntime(1375):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
01-05 13:02:10.701: E/AndroidRuntime(1375):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
01-05 13:02:10.701: E/AndroidRuntime(1375):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
01-05 13:02:10.701: E/AndroidRuntime(1375):     at android.app.ActivityThread.access$600(ActivityThread.java:123)
01-05 13:02:10.701: E/AndroidRuntime(1375):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
01-05 13:02:10.701: E/AndroidRuntime(1375):     at android.os.Handler.dispatchMessage(Handler.java:99)
01-05 13:02:10.701: E/AndroidRuntime(1375):     at android.os.Looper.loop(Looper.java:137)
01-05 13:02:10.701: E/AndroidRuntime(1375):     at android.app.ActivityThread.main(ActivityThread.java:4424)
01-05 13:02:10.701: E/AndroidRuntime(1375):     at java.lang.reflect.Method.invokeNative(Native Method)
01-05 13:02:10.701: E/AndroidRuntime(1375):     at java.lang.reflect.Method.invoke(Method.java:511)
01-05 13:02:10.701: E/AndroidRuntime(1375):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
01-05 13:02:10.701: E/AndroidRuntime(1375):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
01-05 13:02:10.701: E/AndroidRuntime(1375):     at dalvik.system.NativeStart.main(Native Method) 
```

对不起，如果我犯了一个大错误，第一次使用这个库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T14:31:58.250

它在那里说。您实际上并没有将这些类构建到您的应用程序中。与图书馆无关。

# java - 用 0 到 1 的 alpha 透明度绘制透明渐变

> ID：14172085
> 
> 赞同：5
> 
> 时间：2013-01-05T13:08:04.367
> 
> 标签：java, android, graphics, bitmap, gradient

我在 Android 中有一个动态生成的位图，我想从顶部边缘羽化，这样边界区域在顶部将完全透明，并逐渐变为稍微低于完全不透明。

### 创建一个均匀完全透明的顶部边缘

```
transparentPaint = new Paint(Paint.ANTI_ALIAS_FLAG);
transparentPaint.setXfermode(new PorterDuffXfermode(PorterDuff.Mode.SRC_OUT));
Shader shader = new LinearGradient(0, 0, 0, 20,
                    Color.TRANSPARENT, Color.TRANSPARENT, Shader.TileMode.CLAMP);
transparentPaint.setShader(shader);
// the bitmap is dynamically generated beforehand
Canvas c = new Canvas(bitmap);
c.drawRect(0, 0, bitmapWidth, 20, transparentPaint); 
```

### Alpha渐变而不是完全透明的孔？

你将如何实现这样的目标：

![在此处输入图像描述](../Images/cdc0e8fd21523288c7d25fa425c25945.png)

[在这种情况下只是顶部边缘]

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-05T14:13:09.093

看一下这个例子：[使位图的某些区域在触摸时透明](https://stackoverflow.com/questions/5368774/make-certain-area-of-bitmap-transparent-on-touch/5439357#5439357)

这是一种使用渐变绘制的方法：

```
Paint framePaint = new Paint();
for(int i = 1; i < 5; i++){
   setFramePaint(framePaint, i, imageW, imageH);
   myCanvas.drawPaint(framePaint);
} 
```

...

```
private void setFramePaint(Paint p, int side, float iw, float ih){
                // paint, side of rect, image width, image height

                p.setShader(null);
                p.setXfermode(new PorterDuffXfermode(PorterDuff.Mode.DST_IN));

                float borderSize = 0.1f; //relative size of border
                //use the smaller image size to calculate the actual border size
                float bSize = (iw > ih)? ih * borderSize: ih * borderSize; 
                float g1x = 0;
                float g1y = 0;
                float g2x = 0;
                float g2y = 0;
                int c1 = 0, c2 = 0;

                if (side == 1){
                    //left
                    g1x = 0;
                    g1y = ih/2;
                    g2x = bSize;
                    g2y = ih/2;
                    c1 = Color.TRANSPARENT;
                    c2 = Color.BLACK;

                }else if(side == 2){
                    //top
                    g1x = iw/2;
                    g1y = 0;
                    g2x = iw/2;
                    g2y = bSize;
                    c1 = Color.TRANSPARENT;
                    c2 = Color.BLACK;

                }else if(side == 3){
                    //right
                    g1x = iw;
                    g1y = ih/2;
                    g2x = iw - bSize;
                    g2y = ih/2;
                    c1 = Color.TRANSPARENT;
                    c2 = Color.BLACK;

                }else if(side == 4){
                    //bottom
                    g1x = iw/2;
                    g1y = ih;
                    g2x = iw/2;
                    g2y = ih - bSize;
                    c1 = Color.TRANSPARENT;
                    c2 = Color.BLACK;
                }

                p.setShader(new LinearGradient(g1x, g1y, g2x, g2y, c1, c2, Shader.TileMode.CLAMP));

            } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-05T14:45:46.827

如果您可以接受白色边缘而不是透明边缘，请尝试 SCREEN 模式。在[PorterDuff.Mode.SCREEN](http://developer.android.com/reference/android/graphics/PorterDuff.Mode.html)模式下，白色像素保持白色，黑色像素变得不可见。创建一个覆盖位图，其中边缘是白色的，中间是黑色的，并将其与您的图像混合。这将创建一个白色边缘淡入中间照片的位图。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-05T19:37:03.397

Romain Guy 使用了与您想要实现的效果非常相似的淡入淡出，除了[此效果之外，他还添加了圆角](http://www.curious-creature.org/2012/12/11/android-recipe-1-image-with-rounded-corners/)

# 3d - directx11 不能添加多个对象

> ID：14172088
> 
> 赞同：0
> 
> 时间：2013-01-05T13:08:14.807
> 
> 标签：3d, directx-11

大家好，我正处于一个真正的绑定中，我目前正在使用 Frank d Luna [http://www.d3dcoder.net/d3d11.htm](http://www.d3dcoder.net/d3d11.htm)使用 DirectX11 进行 3d 游戏编程中的 directx11 教程 Shapes 示例，我目前正在尝试添加一个我可以独立于第一个立方体放置的第二个立方体，我创建了它，当我构建项目时，两个立方体现在都消失了，我认为问题出在几何生成器上。

请帮忙 ：（

```
 void ShapesApp::BuildGeometryBuffers() 
```

{ GeometryGenerator::MeshData 框；

```
//added
GeometryGenerator::MeshData boxtwo;

GeometryGenerator::MeshData grid;
GeometryGenerator::MeshData sphere;
GeometryGenerator::MeshData cylinder;

GeometryGenerator geoGen;

geoGen.CreateBox(1.0f, 1.0f, 1.0f, box);

geoGen.CreateBox(1.0f, 1.0f, 1.0f, boxtwo);
geoGen.CreateGrid(20.0f, 30.0f, 60, 40, grid);
geoGen.CreateSphere(0.5f, 20, 20, sphere);
//geoGen.CreateGeosphere(0.5f, 2, sphere);
geoGen.CreateCylinder(0.5f, 0.3f, 3.0f, 20, 20, cylinder);

// Cache the vertex offsets to each object in the concatenated vertex buffer.
//added

mBoxVertexOffset      = 0;
mBoxtwoVertexOffset = box.Vertices.size();
mGridVertexOffset     = mBoxtwoVertexOffset + boxtwo.Vertices.size();
mSphereVertexOffset   = mGridVertexOffset + grid.Vertices.size();
mCylinderVertexOffset = mSphereVertexOffset + sphere.Vertices.size();

// Cache the index count of each object.

mBoxIndexCount      = box.Indices.size();
//added
mBoxtwoIndexCount   = boxtwo.Indices.size();
mGridIndexCount     = grid.Indices.size();
mSphereIndexCount   = sphere.Indices.size();
mCylinderIndexCount = cylinder.Indices.size();

// Cache the starting index for each object in the concatenated index buffer.
mBoxIndexOffset      = 0;
//added
mBoxtwoIndexOffset      = mBoxIndexCount;
mGridIndexOffset     = mBoxtwoIndexOffset + mBoxtwoIndexCount;
mSphereIndexOffset   = mGridIndexOffset + mGridIndexCount;
mCylinderIndexOffset = mSphereIndexOffset + mSphereIndexCount;

UINT totalVertexCount = 

    box.Vertices.size() + 
    //added
    boxtwo.Vertices.size() + 
    grid.Vertices.size() + 
    sphere.Vertices.size() +
    cylinder.Vertices.size();

UINT totalIndexCount = 
    mBoxIndexCount + 
    //added
mBoxtwoIndexCount + 
    mGridIndexCount + 
    mSphereIndexCount +
    mCylinderIndexCount; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T19:04:00.453

您似乎正确地完成了第一部分，但还有更多内容。

*   然后您需要为第二个框添加顶点位置
*   在向量索引缓冲区中插入第二个框的索引
*   添加代码以绘制第二个框
*   创建第二个盒子世界矩阵来定位它

我建议你再读一遍本章，在继续阅读之前完全理解每一章并能够正确修改其示例非常重要，否则你会在后面的章节中遇到很多问题。

这是一个带有代码更改的补丁，添加了第二个框：

```
 --- D:/MyStuff/Book Files/Frank Luna/DVD/Code/Chapter 6 Drawing in Direct3D/Shapes/ShapesDemoOriginal.cpp   Mon May 09 22:10:02 2011
    +++ D:/MyStuff/Book Files/Frank Luna/DVD/Code/Chapter 6 Drawing in Direct3D/Shapes/ShapesDemo.cpp   Fri Jan 11 12:37:54 2013
    @@ -58,0 +59 @@
    +   XMFLOAT4X4 mBoxWorld2;
    @@ -65,0 +67 @@
    +   int mBoxVertexOffset2;
    @@ -70,0 +73 @@
    +   UINT mBoxIndexOffset2;
    @@ -75,0 +79 @@
    +   UINT mBoxIndexCount2;
    @@ -122,0 +127,4 @@
    +   XMMATRIX boxScale2 = XMMatrixScaling(1.0f, 1.0f, 1.0f);
    +   XMMATRIX boxOffset2 = XMMatrixTranslation(2.0f, 0.5f, 0.0f);
    +   XMStoreFloat4x4(&mBoxWorld2, XMMatrixMultiply(boxScale2, boxOffset2));
    +
    @@ -226,0 +235,6 @@
    +       
    +       // Draw the box2.
    +       world = XMLoadFloat4x4(&mBoxWorld2);
    +       mfxWorldViewProj->SetMatrix(reinterpret_cast<float*>(&(world*viewProj)));
    +       mTech->GetPassByIndex(p)->Apply(0, md3dImmediateContext);
    +       md3dImmediateContext->DrawIndexed(mBoxIndexCount2, mBoxIndexOffset2,         mBoxVertexOffset2);
    @@ -303,0 +318 @@
    +   GeometryGenerator::MeshData box2;
    @@ -309,0 +325 @@
    +   geoGen.CreateBox(1.0f, 1.0f, 1.0f, box2);
    @@ -317 +333,2 @@
    -   mGridVertexOffset     = box.Vertices.size();
    +   mBoxVertexOffset2     = box.Vertices.size();
    +   mGridVertexOffset     = box.Vertices.size() + box2.Vertices.size();
    @@ -322,0 +340 @@
    +   mBoxIndexCount2     = box2.Indices.size();
    @@ -329 +347,2 @@
    -   mGridIndexOffset     = mBoxIndexCount;
    +   mBoxIndexOffset2     = mBoxIndexCount;
    +   mGridIndexOffset     = mBoxIndexOffset2 + mBoxIndexCount2;
    @@ -334,0 +354 @@
    +       box2.Vertices.size() + 
    @@ -340,0 +361 @@
    +       mBoxIndexCount2 + 
    @@ -360,0 +382,6 @@
    +   for(size_t i = 0; i < box2.Vertices.size(); ++i, ++k)
    +   {
    +       vertices[k].Pos   = box2.Vertices[i].Position;
    +       vertices[k].Color = black;
    +   }
    +
    @@ -394,0 +422 @@
    +   indices.insert(indices.end(), box2.Indices.begin(), box2.Indices.end()); 
```

# c# - MuParser 在 vi susl studio 2012 中不起作用

> ID：14172096
> 
> 赞同：1
> 
> 时间：2013-01-05T13:10:16.697
> 
> 标签：c#, visual-studio-2012, mathematical-expressions

嗨，我需要对一些数学表达式使用 muParser（c# 包装器）。在 vs 2010 中它运行良好，但在 vs 2012 中程序终止且没有任何错误消息。有没有人遇到过这样的问题？有什么解决办法吗？

# .net - ServiceStack.Razor ViewPageBase.Href 无法解析 AppHarbor 上的应用程序路径

> ID：14172102
> 
> 赞同：1
> 
> 时间：2013-01-05T13:11:08.403
> 
> 标签：.net, razor, servicestack, appharbor

[我在ServiceStack.Razor](http://razor.servicestack.net/) 中呈现了一个非常基本的 html 表单`ViewPage`：

```
<form action="@Href("~/subfolder/someservice")" method="POST">
    <input...>
    ...
</form> 
```

从虚拟应用程序目录中的本地 IIS 运行时，它工作正常。但是，一旦部署到 AppHarbor，我就会收到此错误：

> 此处不允许使用相对虚拟路径“http:/myssrazorapp.apphb.com/subfolder/someservice”。

```
[ArgumentException: The relative virtual path 'http:/myssrazorapp.apphb.com/subfolder/someservice' is not allowed here.]
System.Web.VirtualPath.Create(String virtualPath, VirtualPathOptions options) +877
System.Web.VirtualPath.CreateNonRelative(String virtualPath) +9
System.Web.VirtualPathUtility.ToAbsolute(String virtualPath) +8
ServiceStack.Html.UrlHelper.Content(String url) +6
ServiceStack.Razor.ViewPageBase`1.Href(String url) +10
CompiledRazorTemplates.Dynamic.dbbfcbafad.Execute() +291
ServiceStack.Razor.Templating.TemplateService.ExecuteTemplate(T model, String name, String defaultTemplatePath, IHttpRequest httpReq, IHttpResponse httpRes) +149
ServiceStack.Razor.RazorFormat.ExecuteTemplate(T model, String name, String templatePath, IHttpRequest httpReq, IHttpResponse httpRes) +80
ServiceStack.Razor.RazorFormat.ProcessRazorPage(IHttpRequest httpReq, ViewPageRef razorPage, Object dto, IHttpResponse httpRes) +50
ServiceStack.Razor.RazorHandler.ProcessRequest(IHttpRequest httpReq, IHttpResponse httpRes, String operationName) +366
ServiceStack.WebHost.Endpoints.Support.EndpointHandlerBase.ProcessRequest(HttpContext context) +164
System.Web.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +859
System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) +131 
```

我查看了源代码（[ViewPageBase.Href](https://github.com/ServiceStack/ServiceStack/blob/cb4e6456b7f6618adcf8ec07eee430f9225f2e1a/src/ServiceStack.Razor/ViewPageBase.cs#L162-L165)和[UrlHelper.Content](https://github.com/ServiceStack/ServiceStack/blob/140af6c6cfdc034bb2e2e725bc107424c5311560/src/ServiceStack/Html/UrlHelper.cs#L7-L10)），他们所做的只是将原始字符串传递给`VirtualPathUtility.ToAbsolute`. 除了 AppHarbor 环境以某种方式影响 VirtualPathUtility 的功能之外，我无法解释是什么原因造成的。

错误的奇怪之处在于`http:/`前缀缺少一个正斜杠。不确定这是否会给任何人带来任何提示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T11:20:08.087

如果您不想要 RazorFormat 中的任何替换标记，只需将其从 Razor 插件中删除，例如：

```
Plugins.Add(new RazorFormat { ReplaceTokens=new Dictionary<string,string>() }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T20:31:51.263

你为什么不尝试这样的事情而不是你在做什么

```
<form action="@Url.Action("ActionName","Controller",new{Area=""})" method="POST">
<input...>
... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T23:30:13.747

事实证明，当使用 ServiceStack.Razor 视图引擎并结合`VirtualPathUtility`相关的“~”用法和`EndpointHostConfig.WebHostUrl`设置时，这是 ServiceStack 中的一个错误。

SS razor 视图的预编译步骤在传递给 Razor 编译器之前对构成模板[的原始文本进行一些内容重写：](https://github.com/ServiceStack/ServiceStack/blob/master/src/ServiceStack.Razor/RazorFormat.cs#L601-L608)

```
private string ReplaceContentWithRewriteTokens(string contents)
{
    foreach (var replaceToken in ReplaceTokens)
    {
        contents = contents.Replace(replaceToken.Key, replaceToken.Value);
    }
    return contents;
} 
```

如果设置了相关的 WebHostUrl 配置选项，则会[自动指定](https://github.com/ServiceStack/ServiceStack/blob/master/src/ServiceStack.Razor/RazorFormat.cs#L155-L157)这些令牌之一：

```
var webHostUrl = appHost.Config.WebHostUrl;
if (!webHostUrl.IsNullOrEmpty())
    this.ReplaceTokens["~/"] = webHostUrl.WithTrailingSlash(); 
```

这意味着像我在模板中所做的那样：

```
<form action="@Href("~/subfolder/someservice")" method="POST"> 
```

与 EndpointHostConfig.WebHostUrl = "http://myssrazorapp.apphb.com"

最终得到一个类似于以下内容的模板被传递给 Razor 编译器：

```
<form action="@Href("http://myssrazorapp.apphb.com/subfolder/someservice")" method="POST"> 
```

在运行时`Href`调用`VirtualPathUtility.ToAbsolute`该绝对 url，该绝对 url 显然会因为它期望相对路径而抛出。

# c# - 通过 odbc C#.net 连接 db2

> ID：14172111
> 
> 赞同：3
> 
> 时间：2013-01-05T13:12:48.137
> 
> 标签：c#, .net, database, db2

有人可以帮我解决这个问题。

> ERROR [IM004] [Microsoft][ODBC Driver Manager] Driver's SQLAllocHandle on SQL_HANDLE_ENV failed 说明：在执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。
> 
> 异常详细信息：System.Data.Odbc.OdbcException：错误 [IM004] [Microsoft][ODBC Driver Manager] Driver's SQLAllocHandle on SQL_HANDLE_ENV failed

我尝试了许多不同的东西，但似乎没有任何效果。任何建议将不胜感激。

我用的东西：

数据库类型：`ibmdb2`

我的连接字符串：

```
Driver={IBM DB2 ODBC DRIVER};DataBase=DOTNET;Hostname=XXXXXXX;
Port=50000;Protocol=TCPIP;Uid=ZZZZZZZZZ;Pwd=ZZZZZZZZZ; 
```

我已经为 odbc 安装了 ibm db2 驱动程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T13:27:08.997

这是有关如何解决此[错误 [IM004]的链接](http://www-01.ibm.com/support/docview.wss?uid=swg21229860)

# facebook - 如何将facebook apprequest“接受”按钮更改为“立即尝试”？

> ID：14172118
> 
> 赞同：1
> 
> 时间：2013-01-05T13:14:12.190
> 
> 标签：facebook, facebook-javascript-sdk

当我发送 apprequest 到我的 fb 应用程序（js）时，它发送带有“接受”按钮的 apprequest 与显示“立即尝试”按钮的其他应用程序相比..

我想知道如何将此按钮文本替换为“立即尝试”

附上截图![在此处输入图像描述](../Images/addb97aa4b8ed360fda60038e4d106ab.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-04T07:47:45.270

我有同样的问题，并找到了决定按钮文本的原因。:)

**这是由发送请求的应用程序在“您的应用程序”中列出**的事实决定的。您可能已经知道，当用户使用 facebook 帐户登录应用程序时，“您的应用程序”中会列出一个应用程序。

我希望这可能会有所帮助。:)

![在此处输入图像描述](../Images/27ef424ed626fd14996c1acfe0358df9.png)

# java - java.lang.NullPointerException 通过对象输出流发送消息时

> ID：14172120
> 
> 赞同：0
> 
> 时间：2013-01-05T13:14:54.483
> 
> 标签：java, sockets, nullpointerexception, awt

我正在尝试使用对象发送消息。我有一些代码可以创建一个 GUI，而另一块代码可以在没有连接时创建服务器，或者在服务器可用时充当客户端。用户通过 GUI 键入消息并通过“通信器”将其作为“消息”对象发送。如果将通信器设置为客户端，则用户可以发送消息，但如果将其设置为服务器则不能...

如果用户尝试使用设置为服务器的程序发送消息，我会收到以下错误。

线程“AWT-EventQueue-0”中的异常 java.lang.NullPointerException

而且消息没有发送

这是我的通信器代码，底部是应该发送消息的函数

```
package hunterinstant;

import java.io.IOException;
import java.io.ObjectInputStream;
import java.io.ObjectOutputStream;
import java.net.ServerSocket;
import java.net.Socket;
import java.util.ArrayList;
import java.util.Scanner;
import java.util.logging.Level;
import java.util.logging.Logger;
/**
 *
 * @author Chris
 */
public class HunterCom implements Runnable {

    private static String SERVER_IP = "127.0.0.1";
    private static int SERVER_PORT = 5000;
    Scanner scanner = new Scanner(System.in);   //to read text from the console
    Socket socket = null;
    boolean client;
    Conversation window;
    ObjectOutputStream out = null;

    public void initialize(Conversation c, String ip, String port) {
        System.out.println(ip);
        System.out.println(port);
        SERVER_IP = ip;
        SERVER_PORT = Integer.parseInt(port);
        window = c; 
    }

    public void run() {

        try {
            socket = new Socket(SERVER_IP, SERVER_PORT);
            window.addText("Connected to server");
            client = true;
        } catch (Exception ex) {
            window.addText("No Users Online: Waiting for connection");
            client = false;

        }

        if (client == true) {

        ObjectInputStream in = null;
        while (true) {
            try {
                if (out == null) {
                    out = new ObjectOutputStream(socket.getOutputStream());
                }

                //get the reply from the server
                if (in == null) {
                    in = new ObjectInputStream(socket.getInputStream());
                }
                Message message = (Message) in.readObject();

                window.addText(message.getMessage());
                //System.out.println("Server said: " + message.getMessage());

            } catch (Exception ex) {
                window.addText("Error: " + ex);
            }
        }

    } // End Client

        else {
            ServerSocket serverSocket = null;
            try {
                serverSocket = new ServerSocket(SERVER_PORT);
            } catch (IOException ex) {
                window.addText("Error occured while creating the server socket");
                return;
            }

            Socket socket = null;
            try {
                //Waits untill a connection is made, and returns that socket
                socket = serverSocket.accept();
            } catch (IOException ex) {
                window.addText("Error occured while accepting the socket");
                return;
            }
            window.addText("Connection created, client IP: " + socket.getInetAddress());
            ObjectInputStream in = null;
            while (true) {
                try {
                    if (in == null) {
                        in = new ObjectInputStream(socket.getInputStream());
                    }

                    Message message = (Message) in.readObject();

                    window.addText(message.getMessage());
                    if (out == null) {
                        out = new ObjectOutputStream(socket.getOutputStream());
                    }
                } catch (Exception ex) {
                    window.addText("Error: " + ex);
                }
            }
        }
    }

//THIS IS THE CODE THAT IS SUPPOSED TO SEND THE MESSAGE
    public void sendMessage(String str) 
    {
        try {
            out.writeObject(new Message(str));
            System.out.println("Hello");
            out.flush();
        } catch (IOException ex) {
            Logger.getLogger(HunterCom.class.getName()).log(Level.SEVERE, null, ex);
        }
    }
} 
```

这是应该从 GUI 发送消息的代码

```
private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {
    comunicator.sendMessage(jTextField1.getText());
    jTextArea2.append(jTextField1.getText());
}

private void jTextField1KeyPressed(java.awt.event.KeyEvent evt) {
    if(evt.getKeyCode()==10) // Has the user pressed enter?
    {
        comunicator.sendMessage(jTextField1.getText());
        jTextArea2.append(jTextField1.getText());
    }
} 
```

对不起，我确定这是一个愚蠢的问题......我确定我在这里做的事情显然很愚蠢，但我只做了几个月的 Java，我花了几个小时试图弄清楚这个问题没有喜悦....

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-05T13:19:06.967

小时？天啊。

首先阅读堆栈跟踪。它告诉您发生 NPE 的行号和 .java 源文件。转到该行，查看对象引用，看看哪一个是空的。

NPE 很容易修复。这通常是因为您对对象初始化做出了错误的假设。您只需要弄清楚如何正确初始化该引用。范围，构造函数 - 你会发现问题。

获取一个像样的 IDE，如 IntelliJ，并使用调试器逐步执行代码。最多需要十分钟*，*而不是几个小时。

就个人而言，我不愿意为某人调试大量代码。您的不完整，因此无法编译和运行。您没有在问题中粘贴堆栈跟踪，所以我无法为您阅读。您几乎没有帮助我们帮助您。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-14T16:01:33.310

```
try: while(true&&socket.isConnected()){
                   ..... 
```

有时

```
Message message = (Message) in.readObject(); 
```

在套接字连接之前运行并抛出 NPE

# visual-c++ - modf() 为负无穷大输入返回非零值

> ID：14172129
> 
> 赞同：0
> 
> 时间：2013-01-05T13:16:12.617
> 
> 标签：visual-c++, gcc, math.h

在 Linux 和 Windows 上都在 gcc 和 MSVC 上进行了尝试，结果非常相似：

modf(+INFINITY) 返回精确的零（0x0000000000000000 以二进制表示的结果双精度，0x00000000 表示浮点数）

但是 modf(-INFINITY) 返回 6.3e-322 （浮点版本为 1.793662034335766e-43）（结果双精度的二进制表示为 0x0000000000000080，浮点数为 0x00000080）

问题：

1.  为什么在第二种情况下会有一个很小的非零值？

2.  计算无穷大的小数部分是否有任何标准的预期行为？

代码示例：

```
#include <stdio.h>
#include <math.h>

int main(int argc, char* argv[])
{
  float f1;
  float f1a;
  double f2;
  double f2a;

  f1 = modff(-INFINITY,&f1a); 
  f2 = modf(-INFINITY,&f2a);

  //Dump into file to easily see the bits 
  FILE * f = fopen("a","wb");
  fwrite(&f1,4,1,f);
  fwrite(&f2,8,1,f);
  fclose(f);

  return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T14:02:07.303

`0x00..80`在小端平台上是负零的表示，而不是你在那里的任何东西。

`modf`对于符合*IEC 60559 浮点运算*的 C 实现，必须返回负零。从 C99 §F.9.3.12 *modf 功能*：

> `modf(±∞, iptr)`返回 ±0 并将 ±∞ 存储在 iptr 指向的对象中。

# javascript - Chrome 扩展中的 XSLT：加载 URL 的不安全尝试

> ID：14172138
> 
> 赞同：5
> 
> 时间：2013-01-05T13:17:38.277
> 
> 标签：javascript, xml, xslt, google-chrome-extension

我正在编写一个 Chrome 扩展程序，它应该动态地将 XSLT 转换应用于某些 XML 文档。仅出于测试目的，我使用以下 XML 和 XSL 文件：

**XML:**

```
<?xml version="1.0" encoding="utf-8" ?>
<WebServiceMessage>
 <status>timeout</status>
 <message>Nameserver%2520not%2520registered.</message>
 <stepName>Finish</stepName>
 <stepNumber>11</stepNumber>
 <maxStepNumber>11</maxStepNumber>
 <percent>100</percent>
 <session>2fc0f139b88a800151e5f21b9d747919</session>
</WebServiceMessage> 
```

**XSL：**

```
<?xml version="1.0" ?>
<xsl:stylesheet version="1.0"
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:template match="/">
    <html><head></head>
    <body>
      <xsl:apply-templates/>
    </body>
    </html>
  </xsl:template>
  <xsl:template match="*">
    <xsl:for-each select="*">
      <p><b><xsl:value-of select ="name(.)"/></b>:
      <span><xsl:attribute name="id"><xsl:value-of select ="name(.)"/></xsl:attribute><xsl:value-of select="."/></span></p>
    </xsl:for-each>
  </xsl:template>
</xsl:stylesheet> 
```

如果转换在测试 XML 文件本身内部链接，则转换正常工作，即通过：

```
<?xml-stylesheet type="text/xsl" href="message.xsl"?> 
```

扩展应该将相同的 xsl 链接注入 XML 文件。

**清单.json：**

```
{
  "permissions": ["tabs", "<all_urls>"],
  "content_scripts":
  [
    {
      "matches": ["<all_urls>"],
      "js" : ["contentscript.js"]
    }
  ],
  "web_accessible_resources":
  [
    "message.xsl"
  ],
  "manifest_version": 2
} 
```

**内容脚本.js：**

```
(function()
{
  if(document.xmlVersion != null)
  {
     var e = document.createProcessingInstruction(
               "xml-stylesheet",
               "type='text/xsl' href='" + chrome.extension.getURL("message.xsl") + "'");
     document.insertBefore(e, document.firstChild);
  }
})(); 
```

**问题**

Chrome 将以下错误输出到控制台：

*`chrome-extension://ladfinoepkgipbeooknnklpakoknohjh/message.xsl`从带有 URL 的框架加载 URL 的尝试不安全`http://localhost/out.xml`。域、协议和端口必须匹配。*

如何解决这个问题？我在网上看到了一些与类似错误相关的报告，这似乎是 Chrome 中的一个错误。

我也将 xsl 文件放在网络服务器上，并将样式表链接更改为网络服务器。还是一样的错误：

*`http://localhost/message.xsl`从带有 URL 的框架加载 URL 的尝试不安全`http://localhost/out.xml`。域、协议和端口必须匹配。*

显然域、协议和端口**确实匹配**。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T20:15:31.617

这是我目前正在使用的解决方法：

```
function loadXMLtext(url)
{
  xhttp = new XMLHttpRequest();
  xhttp.open("GET", url, false);
  xhttp.send();
  if(xhttp.responseXML == undefined) throw "XHR failed for " + url;
  return xhttp.responseXML;
}

function transformxml()
{
  var xml = loadXMLtext(document.location.href);
  var xsl = loadXMLtext(chrome.extension.getURL("message.xsl"));

  var xsltPrs = new XSLTProcessor();
  xsltPrs.importStylesheet(xsl);

  var result = xsltPrs.transformToFragment(xml, document);

  var xmlsrv = new XMLSerializer();
  var plaintext = xmlsrv.serializeToString(result);
  document.documentElement.innerHTML = plaintext;
}

transformxml(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T17:54:41.407

您要求网页处理其域之外的资源。您可以尝试通过 localhost “欺骗”浏览器，但这与要求 facebook 从 google 执行脚本相同。这是一个[同源策略](http://en.wikipedia.org/wiki/Same_origin_policy)错误，**要解决它只需将处理从内容脚本移动到背景/事件页面**。您需要在处理后[传递](http://developer.chrome.com/extensions/messaging.html)结果，但这是正确的方法。

大多数处理应该在后台/事件页面中完成的另一个原因是为了优化您的扩展，否则您只是使用当前`window`引擎，如果它阻塞，那么它会为用户执行选项卡。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-06T16:15:56.447

您可以使用 Chrome 的命令行标志在本地执行此操作。

具体标志是`--allow-file-access-from-files`

```
On OS X: from Terminal.app run /Applications/Google\ Chrome.app/contents/MacOS/Google\ Chrome --allow-file-access-from-files

On Windows: from the command prompt run C:\Users\USERNAME\AppData\Local\Google\Chrome\Application\chrome.exe --allow-file-access-from-files (replacing USERNAME with your username) 
```

注意：如果 Chrome 当前正在运行，您可能必须退出会话。确保这一点。

# objective-c - NSPathControl 和自动布局

> ID：14172142
> 
> 赞同：2
> 
> 时间：2013-01-05T13:17:48.043
> 
> 标签：objective-c, macos, cocoa, nspathcontrol

我在使用`NSPathControl`自动布局时遇到了一些问题。

我希望路径控件随窗口调整大小。这意味着，如果我扩大窗口的宽度，`NSPathControl`也应该扩大。这行得通。

现在的问题是，如果我将路径控件的 URL 更改为更长的 URL，路径控件会自动扩展。我不想要那个。我希望路径控件宽度保持不变，除非用户调整窗口大小。

我尝试固定它的宽度，但是我根本无法调整窗口的大小......

另外，当我不固定路径控件的窗口时，我不能使其小于代表 URL 的子控件的实际内容。

希望这是有道理的。

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-11-09T00:15:00.807

不需要子类化。你可以告诉你的观点有多少可以抵抗压缩。默认情况下，优先级设置为`NSLayoutPriorityDefaultHigh`。您可能正在寻找`NSLayoutPriorityDragThatCannotResizeWindow`. 您可以在控件的**大小检查器**中的 XIB 中设置它，或者查看 NSView 的[`setContentCompressionResistancePriority:forOrientation:`](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/ApplicationKit/Classes/NSView_Class/Reference/NSView.html#//apple_ref/occ/instm/NSView/setContentCompressionResistancePriority%3aforOrientation%3a).

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-05T13:27:12.303

## 解决方案

抱歉，我想我要求禁食。
我让它像这样工作：

* * *

## NSPathControl 子类

```
- (NSSize)intrinsicContentSize {
    return NSMakeSize(NSViewNoInstrinsicMetric, NSViewNoInstrinsicMetric);
} 
```

# sql - ActiveRecord - 仅当不在其他表中时才获取结果

> ID：14172147
> 
> 赞同：0
> 
> 时间：2013-01-05T13:18:23.767
> 
> 标签：sql, activerecord, codeigniter-2, pyrocms

有一个stackoverflow问题可以解决我的sql查询，但我似乎不能这样做是CodeIgnighter。

到目前为止，我想出了

```
$this->db->select('shop_coupons_assoc.*');
$this->db->select('shop_products.*');
$this->db->where('shop_products.id IS NULL');
$this->db->join('shop_coupons_assoc', 'shop_coupons_assoc.product_id = shop_products.id', 'left'); 
```

关于 SO 的文章似乎是我试图做的 SQL

**更新** 我的问题：我将如何在 Codeignighter 中编写 SQL（活动记录格式）

- 上面的代码似乎没有执行

我需要的例子。只是找不到 codeignighter 的文档

[SQL - 从一个表中查找另一个表中不存在的记录](https://stackoverflow.com/questions/367863/sql-find-records-from-one-table-which-dont-exist-in-another)

[如何从一个表中选择另一张表中不存在的所有记录？](https://stackoverflow.com/questions/2686254/how-to-select-all-records-from-one-table-that-do-not-exist-in-another-table)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T23:52:03.600

把它放在你的脚本下面并使用 var_dump 来测试它：

```
$result = $this->db->get()->result();
var_dump(result); 
```

**编辑：** 我现在看到错误：

```
$this->db->where('shop_products.id IS NULL'); 
```

应该

```
$this->db->where('shop_products.id IS', NULL); 
```

您可能忽略了文档中字段名后的逗号和荣誉。此外，空白页可能是因为您的服务器 php.ini 关闭了 error_reporting 或因为您在生产环境中工作。

# haskell - Haskell SOCKS5 拒绝连接

> ID：14172149
> 
> 赞同：2
> 
> 时间：2013-01-05T13:18:31.933
> 
> 标签：haskell, proxy, connection, socks, tor

我已经研究这个问题好几个星期了，但似乎无法得到它......我一直在尝试编写一个连接到 socks5 代理（即 tor）的 Haskell 程序，这样我就可以访问洋葱网站从程序内部，但它不起作用。

为了给你布局，我在 localhost@9050 上运行了 tor，它确实有效，因为我可以配置我的浏览器以通过 socks5 使用它。Privoxy 没有运行。

源代码是：

```
import Network
import Network.Socket
import Network.Socks5

    getonion :: IO ()
    getonion = do
            putStrLn "Connecting..."
            sock <- socksConnectWith (defaultSocksConf "localhost" (PortNum 9050)) "exampleonion.onion" (PortNumber 80)
            putStrLn "Connected!" 
```

每次我运行 getonion 时，它总是会导致：

```
Connecting...
*** Exception: connect: does not exist (Connection refused) 
```

我尝试使用各种方式连接到 localhost，即[此处](http://hackage.haskell.org/packages/archive/socks/0.4.1/doc/html/Network-Socks5.html)和[此处](http://hackage.haskell.org/packages/archive/network/2.3.0.10/doc/html/Network-Socket.html)引用的其他函数，但 socksConnectWith 似乎是最直接的。

如果有人可以帮助我解决这个问题，将不胜感激。我什至可以将来自我的程序的wireshark 数据包发布到本地主机。谢谢你。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-05T16:16:59.053

而不是使用`PortNum`构造函数，只需在源文件中写入端口号：

```
sock <- socksConnectWith (defaultSocksConf "localhost" 9050) "exampleonion.onion" (PortNumber 80) 
```

请注意实际上您是如何使用 执行此操作的`PortNumber 80`，因为构造函数`PortNumber`实际上接受了 type 的参数`PortNumber`，而不是`Word16`（它产生 a `PortID`；不幸的是，即使类型和构造函数不相关，也允许它们具有相同的名称）。

在 Haskell 中，像上面这样的整数文字是 (say) 的缩写`fromInteger 80`，并且`fromInteger`函数（来自`Num`类型类，它`PortNumber`是一个实例）为您将给定的整数转换为网络字节顺序 - 直接构造函数应用程序不会。

甚至可能犯这个错误的事实（据我所知）只是网络包的 API 设计不佳的产物。尽管最近这种情况有所改善，但要对网络包进行 API 更改而不扰乱它的许多客户端中的一些是相当困难的。

# xcode - UIImagePickerController 不工作

> ID：14172152
> 
> 赞同：1
> 
> 时间：2013-01-05T13:19:03.953
> 
> 标签：xcode, uinavigationcontroller, uiimageview, uiimage, uiimagepickercontroller

我正在使用 xcode 4.5.2 并且我想在`UIImagePickerController`基于导航栏的应用程序上使用它，除非用户选择图像后图像保持空白，否则一切正常。

用户应该点击按钮->选择相机或从 ActionSheet 中存在->选择图像，然后..什么都没有显示！

我已经添加了代表`<UINavigationControllerDelegate,UIActionSheetDelegate, UIImagePickerControllerDelegate>`并正确链接了 IB 中的所有内容.. 我对此非常确定，除非我不确定这种方法：

```
- (void) imagePickerController:(UIImagePickerController *)thePicker didFinishPickingMediaWithInfo:(NSDictionary *)imageInfo{

[[imgPicker parentViewController] dismissViewControllerAnimated:YES completion:nil];

    UIImage *img = [imageInfo objectForKey:@"UIImagePickerControllerEditedImage"];
    currentImg.image = nil;
    self.currentImg.image = img;

} 
```

我也用过这个：

```
- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingImage:(UIImage *)img editingInfo:(NSDictionary *)editInfo {
image.image = img;
[[picker parentViewController] dismissModalViewControllerAnimated:YES];
} 
```

什么也没发生..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T03:40:42.090

**解决了**

错过了添加这一行：

```
 self.imgPicker.delegate = self; 
```

在 viewDidLoad :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T02:56:38.617

尝试使用`[info objectForKey:UIImagePickerControllerOriginalImage];`而不是使用编辑后的图像。通常您会检查编辑后的图像是否存在，如果存在则使用它，如果不存在则使用原始图像。

像这样的东西：

```
- (void) imagePickerController:(UIImagePickerController *) picker didFinishPickingMediaWithInfo:(NSDictionary *) info {
    NSString *mediaType = [info objectForKey: UIImagePickerControllerMediaType];
    UIImage *originalImage, *editedImage, *imageToSave;

    // Handle a still image capture
    if (CFStringCompare ((CFStringRef) mediaType, kUTTypeImage, 0) == kCFCompareEqualTo) {
        editedImage = (UIImage *) [info objectForKey:
                                   UIImagePickerControllerEditedImage];
        originalImage = (UIImage *) [info objectForKey:
                                     UIImagePickerControllerOriginalImage];

        if (editedImage) {
            imageToSave = editedImage;
        } else {
            imageToSave = originalImage;
        }
    }

    self.currentImg.image = imageToSave;
} 
```

# mysql - 引用自身的 SQLite 表

> ID：14172160
> 
> 赞同：0
> 
> 时间：2013-01-05T13:20:23.937
> 
> 标签：mysql, sql, sqlite, subquery

我在 SQLite 中有一个表（联系人）和一个表（连接），它们非常不言自明：

联系人表包含 id、firstname、secondname 等信息。连接表在一列中保存联系人的 ID，在另一列中保存与之连接的联系人的 ID。

```
contacts

id | firstname | secondname
1  | test      | test
2  | asdf      | asdf
3  | qwer      | qwer

connection

id | contact_id | connection_to_id
1  | 1          | 2
2  | 1          | 3 
```

如何进行查询以获取与一位联系人相关的姓名？我用这个试过，但它只给了我一个名字，即使有更多的连接：

```
SELECT
    c.firstname, c.secondname
FROM contacts c
WHERE
    c.id =
    (SELECT
        scon.connection_to_id
    FROM connection scon
    WHERE
        scon.contact_id = 1) 
```

我只得到：

```
adsf asdf 
```

但我想要：

```
adsf asdf
qwer qwer 
```

我希望你能理解我的问题并帮助我:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T13:24:00.197

最简单的只需要稍作改动，`c.id =`即可更改为`c.id IN`：

```
SELECT
    c.firstname, c.secondname
FROM contacts c
WHERE
    c.id IN
    (SELECT
        scon.connection_to_id
    FROM connection scon
    WHERE
        scon.contact_id = 1) ; 
```

您还可以使用`EXISTS`相关子查询编写：

```
SELECT
    c.firstname, c.secondname
FROM contacts c
WHERE
    EXISTS
    (SELECT 1
    FROM connection scon
    WHERE
        scon.contact_id = 1
      AND 
        scon.connection_to_id = c.id) ; 
```

或使用`JOIN`（只要您在`connection`表中没有重复的行）：

```
SELECT
    c.firstname, c.secondname
FROM contacts c
  JOIN connection scon
    ON scon.connection_to_id = c.id
WHERE
    scon.contact_id = 1 ; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-05T13:24:18.777

使用`WHERE c.id IN (SELECT ...)`，即*IN*代替 =。

# jquery - 取消悬停时删除 Jquery .css

> ID：14172163
> 
> 赞同：4
> 
> 时间：2013-01-05T13:21:24.610
> 
> 标签：jquery

如何删除 .css("background","re​​d"); 从 (A.yuimenubaritemlabel.sub) 元素取消悬停 .yuimenuitemlabel 元素后？

```
$(document).ready(function(){
  $(".yuimenuitemlabel").mouseover(function(){
   $("A.yuimenubaritemlabel.sub").css("background","red");
  });
}); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-05T13:22:54.067

您需要在鼠标离开时重置 css 属性。

```
$(".yuimenuitemlabel").mouseover(function(){
   $("A.yuimenubaritemlabel.sub").css("background","red");
}).mouseleave(function(){
     $("A.yuimenubaritemlabel.sub").css("background","");
}); 
```

如果您做了很多可以使用悬停的事情，请使用悬停功能。

```
$(".yuimenuitemlabel").hover(function(){
   $("A.yuimenubaritemlabel.sub").css("background","red");
}, function(){
     $("A.yuimenubaritemlabel.sub").css("background","");
}); 
```

假设您只需要更改 css，请使用悬停功能。您可以制作两个类，一个是 sub，另一个是 newsub。

```
$(".yuimenuitemlabel").hover(function(){
     $("A.yuimenubaritemlabel.sub").toggleClass("newsub");
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-05T13:27:19.713

添加/删除类是更好的做法

```
$(document).ready(function(){
    $(".yuimenuitemlabel").hover(function(){
        $("a.yuimenubaritemlabel.sub").toggleClass('hoverclass');
    });
}); 
```

并使用一个类

```
.hoverclass{
   background-color:red;
} 
```

# asp.net - ASP.NET work not stable in IE

> ID：14172164
> 
> 赞同：0
> 
> 时间：2013-01-05T13:21:27.870
> 
> 标签：asp.net, session

I am building an ASP.NET web application use ajax to request some content and it works well in FireFox, Chrome but in IE not stable: When use login he/she can view owner files, if not login page return string "no permission".

I logined website, I refresh page in IE sometime it show file and sometime it show "no permission" (that not login) I refresh again it show file. I mean that some request it works correct and some request it works wrong! I have seen HTTP request and see that all cookie sent correct.

Here one request

> POST [http://abc.com/xxx.asmx/GetFileInfo](http://abc.com/xxx.asmx/GetFileInfo) HTTP/1.1
> x-requested-with: XMLHttpRequest
> Accept-Language: en-us
> Referer: [http://abc.com/?work=home](http://abc.com/?work=home)
> Accept: application/json, text/javascript, */*; q=0.01
> Content-Type: application/json; charset=utf-8
> Accept-Encoding: gzip, deflate
> User-Agent: Mozilla/4.0 (compatible; MSIE 8.0; Windows NT 6.1; WOW64; Trident/4.0; SLCC2; .NET CLR 2.0.50727; .NET CLR 3.5.30729; .NET CLR 3.0.30729; Media Center PC 6.0; .NET4.0C; .NET4.0E)
> Host: abc.com
> Content-Length: 27
> Connection: Keep-Alive
> Pragma: no-cache
> Cookie: __utma=63255935.688817123.1357236998.1357236998.1357390216.2; __utmb=63255935.5.10.1357390216; __utmz=63255935.1357236998.1.1.utmcsr=(direct)|utmccn=(direct)|utmcmd=(none); .ASPXAUTH=E83DCA879A8A9AF5DAE72854241CFEBF2AF4BCE7E2227465E71FB428D6816C555176F9F1A1E94CB34F9C48C4FC7C64FBCAA013672182720254821F802242B90098A01A727AA30D4A621B921536B0F5E36F9DE9382972CE7AFC52EA819669E8B8F7D4C5ECCA1EDE07D971CEA64E5847BBC0E9ACB7B26F07BC769422B8C68A5F04F2B183533C95CC6849A8B98D83F22BC306FF564FE8519A1738AC8DB1F4C55A5B6E84FC02D863C22AF3CBD04E70186C497A240313C107DD74B3D28F2AE6BF95FED3E6EA2CC7EE1767F9E9FCBD5A6EEF77EF61198BD65342E6C10B978595DADA17FBDC83A2; ASP.NET_SessionId=ibxe0t55thibhb45vcgkxmvx; __utmc=63255935
> 
> {'ID1':'13','ID2':'2'}

How I fix it? Thank you!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T08:58:31.680

我知道为什么，因为我没有在 web.config 文件中设置机器密钥。

# opengl - glBufferData 如何知道要处理哪个 VBO？

> ID：14172165
> 
> 赞同：2
> 
> 时间：2013-01-05T13:21:32.177
> 
> 标签：opengl, opengl-es, opengl-es-2.0

`glBufferData`这是用于填充 VBO的正式声明：

`void glBufferData(GLenum target, GLsizeiptr size, const GLvoid* data, GLenum usage);`

然而，令人困惑的是，您可以拥有多个 VBO，但此函数不需要特定 VBO 的句柄，那么它如何知道您打算使用哪个 VBO？

`target`参数可以是`GL_ARRAY_BUFFER`或，`GL_ELEMENT_ARRAY_BUFFER`但我的理解是您可以拥有多个这些参数。

类似的`glBufferSubData`方法也是如此，该方法旨在随后在 VBO 上调用——它如何知道要处理哪个 VBO？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-05T14:12:56.503

这是[OpenGL](http://www.opengl.org/wiki/OpenGL_Object)中的一种常见模式，用于将对象绑定到目标并通过发出不带句柄的函数调用对其执行操作。这同样适用于纹理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T13:32:48.473

使用缓冲区对象的 OpenGL 操作会使用已被最近一次调用所使用的目标上的 glBindBuffer 绑定的缓冲区。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-05T20:28:06.397

`glBindBuffer`是将给定缓冲区公开为绑定的函数。`glBufferData`然后通过当前绑定的缓冲区对象，通过副作用访问它。

# google-maps - 将编码折线与 Google Maps API v3 一起使用是否有好处？

> ID：14172166
> 
> 赞同：3
> 
> 时间：2013-01-05T13:21:35.233
> 
> 标签：google-maps, google-maps-api-3

如果要处理数百条折线，那么使用[https://developers.google.com/maps/documentation/utilities/polylinealgorithm?hl=sv-SE对折线进行编码是否会带来很大的性能优势](https://developers.google.com/maps/documentation/utilities/polylinealgorithm?hl=sv-SE)

似乎这主要与 API v2 一起使用，而 v3 本身可以很好地处理大量折线？

我似乎找不到任何基准比较。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-05T23:56:10.737

`google.maps.geometry.encoding.decodePath()`在将多边形/多边形添加到谷歌地图时，使用解码编码路径有很大的好处。我有几条超过一千个点的路径，而不是循环遍历每个点并创建要添加到多边形的 LatLng，简单的解码在视觉上加载速度更快。

此外，正如 Salman 所指出的，通过减少通过 Ajax 传递路径的网络流量可以带来巨大的收益。以谷歌[为例](https://developers.google.com/maps/documentation/utilities/polylinealgorithm)：

```
Characters
0        1         2         3         4         5         6         7
1234567890123456789012345678901234567890123456789012345678901234567890
38.5,-120.2|40.7,-120.95|43.252,-126.453  // Polyline Decoded: 40 chars
_p~iF~ps|U_ulLnnqC_mqNvxq`@               // Polyline Encoded: 27 chars 
```

只有 3 个点，我们将点的大小减少了 33%。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T20:14:20.957

不确定是否有任何正式的基准。但是与实际的 lat/lng 数据相比，编码的折线的大小要小得多。我有时会使用它，特别是在使用 Ajax 更新地图时。

# ios - ios应用程序如何从Web服务下载图片并在安装过程中将它们安装在用户ios设备上？

> ID：14172167
> 
> 赞同：0
> 
> 时间：2013-01-05T13:21:39.400
> 
> 标签：ios, xcode, web-services, installation, image

ios应用程序如何从Web服务下载图片并在安装过程中将它们安装在用户ios设备上？可能的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T14:16:32.673

您无法控制应用在用户设备上的安装，因此在安装过程中无法下载其他数据。

只需在安装后的第一个应用程序启动时下载您的图片。要检查应用程序是否第一次启动，您可以检查设备上是否已存在图片或使用 NSUserDefaults：[检查 iPhone 应用程序是否首次运行的最佳方法](https://stackoverflow.com/questions/1664177/best-way-to-check-if-an-iphone-app-is-running-for-the-first-time)

希望这可以帮助。

# ios - 带有自定义图形的 xcode 选项卡控制器，在第一次单击之前不会加载

> ID：14172168
> 
> 赞同：0
> 
> 时间：2013-01-05T13:21:57.700
> 
> 标签：ios, xcode, uitabbarcontroller, customization

我正在自定义我的 TabBar 图标，但我遇到了自定义选项卡图形在第一次单击时才显示的问题，但第一个选项卡除外。设置如下Entry->VC->Tab Controller->TabVC1->TabVC2->TabVC3->TabVC4->TabVC5。让它们在标签控制器的第一次初始化时出现的最佳方法是什么。

** 这些属性是在我进入选项卡控制器时设置的（它们工作正常）

```
// Set background to white for the tab bar
UIImage *tabBackground = [[UIImage imageNamed:@"tabback.png"] resizableImageWithCapInsets:UIEdgeInsetsMake(0, 0, 0, 0)];
[[UITabBar appearance] setBackgroundImage:tabBackground];

// setting the selected color to blue
self.tabBar.tintColor = [UIColor blueColor];

// changing the tab bar text color
[[UITabBarItem appearance] setTitleTextAttributes: [NSDictionary dictionaryWithObjectsAndKeys: [UIColor blackColor], UITextAttributeTextColor,[UIFont fontWithName:@"Copperplate-Bold" size:0.0], UITextAttributeFont, nil] forState:UIControlStateNormal]; 
```

** 这些是在单独的 TabVC 中设置的（它们仅在第一次单击其选项卡后显示）

```
// loading the custom icon for front and back
UITabBarItem *tabicon = [[UITabBarItem alloc] initWithTitle:@"Daily" image:[UIImage imageNamed:@"Day.png"] tag:0];
[tabicon setFinishedSelectedImage:[UIImage imageNamed:@"Day.png"] withFinishedUnselectedImage:[UIImage imageNamed:@"Day.png"]];
[self setTabBarItem:tabicon]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T14:24:32.973

首先，您的标签栏控制器应该是您的根视图控制器。也就是你的窗口的rootViewController。从[文档](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITabBarController_Class/Reference/Reference.html)中：

> 部署选项卡栏界面时，您必须将此视图安装为窗口的根目录。与其他视图控制器不同，标签栏界面永远不应安装为另一个视图控制器的子级。

另外，因为你打电话给`self.tabBar`我感觉你是 UITabBarController 的子类。文档也对此提出了建议。

话虽如此，您可以在第一次外观设置（第一个代码片段）的任何地方设置标签栏项目。

例如，要更改您将执行的第二个视图控制器选项卡项

```
// loading the custom icon for front and back
UITabBarItem *tabicon = [[UITabBarItem alloc] initWithTitle:@"Daily" image:[UIImage imageNamed:@"Day.png"] tag:0];

[tabicon setFinishedSelectedImage:[UIImage imageNamed:@"Day.png"] withFinishedUnselectedImage:[UIImage imageNamed:@"Day.png"]];

UIViewController *second =  [self.viewControllers objectAtIndex:1];
[second setTabBarItem:tabicon]; 
```

关键是您需要在标签栏视图出现之前设置自定义外观。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-30T01:28:46.853

在您指定的 init 方法中设置自定义 tabBarItem。这样，它将在控制器初始化时设置，您不必等到它第一次显示才能看到您的自定义 tabBarItem。

例如，这里是 Swift 中的一个示例，控制器在情节提要中设置：

```
required init(coder aDecoder: NSCoder) {
    super.init(coder: aDecoder)

    self.tabBarItem = getTabBarItem(NSLocalizedString("Calendar", comment: ""), UIImage(named: "851-calendar.png")!)
} 
```

请注意，getTabBarItem() 是我的一个自定义函数，它返回一个 UITabBarItem。

# android - Android，如何混合 ActionBar.Tab + View Pager + ListFragment

> ID：14172173
> 
> 赞同：4
> 
> 时间：2013-01-05T13:22:13.017
> 
> 标签：android, android-actionbar, android-viewpager, android-listfragment

我一直在尝试测试如何将所有这些东西混合在一起，但我遇到了问题！！我只想要一个使用 ActionBar.Tab 的具有三个选项卡的应用程序。例如，此选项卡可以是动作、冒险和动画类型的电影，用户可以在选项卡中滑动，因此它将使用 ViewPager，每个选项卡将显示该类型的电影列表。没有必要拥有三个不同的片段类，因为所有选项卡的格式都相同，只是一个简单的列表。我遇到了问题，因为当我选择第二个选项卡时，onPageSelected 的位置是 1，

```
mViewPager = (ViewPager) findViewById(R.id.pager);
mViewPager.setAdapter(mCollectionPagerAdapter);
mViewPager.setOnPageChangeListener(new ViewPager.SimpleOnPageChangeListener() {
@Override
     public void onPageSelected(int position) {
        mActionBar.setSelectedNavigationItem(position);
     }
}); 
```

这会导致在 CollectionPagerAdapter 类中调用 public Fragment getItem(int i) 方法，但是 i 的值是 2 NOT 1，所以它会调用值为 2 NOT 1 的 TabFragment 类的 createView，所以 tabs没有刷新成功。

任何帮助将不胜感激！

创建选项卡的代码，

```
// For each of the sections in the app, add a tab to the action bar.
for (int i = 0; i < mCollectionPagerAdapter.getCount(); i++) {
        mActionBar.addTab(mActionBar.newTab()
            .setText(mGenres.get(i).getName()) 
            .setTabListener(this));

        //Let's request the movies for the first three genres
        new GetMoviesByGenre().execute(mGenres.get(i).getId());         
} 
```

选择选项卡时，

```
@Override
public void onTabSelected(ActionBar.Tab tab, android.app.FragmentTransaction arg1) {

//Let's update the dataset for the selected genre
TabFragment fragment = 
      (TabFragment) getSupportFragmentManager().findFragmentByTag(
                   "android:switcher:"+R.id.pager+":"+tab.getPosition());
     if(fragment != null)  // could be null if not instantiated yet
     {
        if(fragment.getView() != null) 
        {
           fragment.updateDisplay(tab.getPosition()); // do what updates are required
        }
     }

  mViewPager.setCurrentItem(tab.getPosition());
} 
```

CollectionPageAdapter 类

```
public class CollectionPagerAdapter extends FragmentPagerAdapter {

final int NUM_ITEMS = 3; // number of tabs

List<Fragment> fragments = new ArrayList<Fragment>();

public Fragment getItem(int pos) {
  return fragments.get(pos);
}

public void addFragment(Fragment f) {
  fragments.add(f);
}

public CollectionPagerAdapter(FragmentManager fm) {
    super(fm);

    //Let's add  the fragments
    for (int i=0;i<NUM_ITEMS;i++)
    {
        Fragment fragment = new TabFragment();
        Bundle args = new Bundle();
        args.putInt(TabFragment.ARG_OBJECT, 0);
        fragment.setArguments(args);
        addFragment (fragment);
    }
}

@Override
public int getCount() {
    return NUM_ITEMS;
} 
```

}

TabFragment 类

```
public class TabFragment extends ListFragment {

public static final String ARG_OBJECT = "object";

private MoviesAdapter m_Adapter;
private ArrayList <Movie> mMovies = new ArrayList<Movie>();

@Override
public void onActivityCreated(Bundle savedInstanceState) {
    super.onActivityCreated(savedInstanceState);

  // you only need to instantiate these the first time your fragment is
  // created; then, the method above will do the rest
  if (m_Adapter == null) {
      m_Adapter = new MoviesAdapter(getActivity(), mMovies);
  }
  setListAdapter(m_Adapter);
}

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
    Bundle savedInstanceState) {

    int position = getArguments().getInt(ARG_OBJECT); // to check is the right fragment
    View rootView = inflater.inflate(R.layout.tabs, container, false);
    return rootView;
}

public void updateDisplay (int type)
{
     GlobalVars gv = (GlobalVars)getActivity().getApplicationContext();

    switch (type)
    {
        case 0:
            mMovies = gv.getActionMovies();
            break;
        case 1:
            mMovies = gv.getAdventureMovies();
            break;
        case 2:
            mMovies = gv.getAnimationMovies();
            break;
    }

    m_Adapter.notifyDataSetChanged();
} 
```

}

我没有做错什么，我猜是碎片搞砸了，因为当我按下第二个选项卡时，第一个选项卡中的数据会更新，依此类推......

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T15:31:36.103

我没有使用 CollectionPageAdapter，而是改为使用 ViewPager 的 Android 文档中显示的 TabsAdapter 类[，](http://developer.android.com/reference/android/support/v4/view/ViewPager.html)它可以工作！

```
public class TabsAdapter extends FragmentPagerAdapter
    implements ActionBar.TabListener, ViewPager.OnPageChangeListener {
private final Context mContext;
private final ActionBar mActionBar;
private final ViewPager mViewPager;
private final ArrayList<TabInfo> mTabs = new ArrayList<TabInfo>();

private final List<Fragment> fragments = new ArrayList<Fragment>();

static final class TabInfo {
    private final Class<?> clss;
    private final Bundle args;

    TabInfo(Class<?> _class, Bundle _args) {
        clss = _class;
        args = _args;
    }
}

public TabsAdapter(FragmentActivity activity, ViewPager pager) {
    super(activity.getSupportFragmentManager());
    mContext = activity;
    mActionBar = activity.getActionBar();
    mViewPager = pager;
    mViewPager.setAdapter(this);
    mViewPager.setOnPageChangeListener(this);
}

public void addTab(ActionBar.Tab tab, Class<?> clss, Bundle args) {
    TabInfo info = new TabInfo(clss, args);
    tab.setTag(info);
    tab.setTabListener(this);
    mTabs.add(info);
    mActionBar.addTab(tab);
    notifyDataSetChanged();
}

@Override
public int getCount() {
    return mTabs.size();
}

@Override
public int getItemPosition(Object object) {
    return POSITION_NONE;
}

@Override
public Fragment getItem(int position) {

    TabInfo info = mTabs.get(position);
    Fragment fr = Fragment.instantiate(mContext, info.clss.getName(), info.args);
    //addFragment (fr, position);
    return  fr;

}

public void addFragment(Fragment f, int location) {

    if (fragments.size() == 0)
        fragments.add(f);
    else
        fragments.add(location, f);
  }

@Override
public void onPageScrolled(int position, float positionOffset, int positionOffsetPixels) {
}

@Override
public void onPageSelected(int position) {
    mActionBar.setSelectedNavigationItem(position);
}

@Override
public void onPageScrollStateChanged(int state) {
}

@Override
public void onTabSelected(Tab tab, android.app.FragmentTransaction ft) {
    Object tag = tab.getTag();
    for (int i=0; i<mTabs.size(); i++) {
        if (mTabs.get(i) == tag) {
            updateDatasetMovies (i);
            mViewPager.setCurrentItem(i);
        }
    }
}

@Override
public void onTabReselected(Tab tab, android.app.FragmentTransaction ft) {
    // TODO Auto-generated method stub

}

@Override
public void onTabUnselected(Tab tab, android.app.FragmentTransaction ft) {
    // TODO Auto-generated method stub

}

public void updateDatasetMovies (int pos)
{
    //Let's update the dataset for the selected genre
    TabFragment fragment = 
          (TabFragment) ((FragmentActivity)mContext).getSupportFragmentManager().findFragmentByTag(
                       "android:switcher:"+R.id.pager+":"+pos);

    //TabFragment fragment = (TabFragment) getItem(pos);
    if(fragment != null)  // could be null if not instantiated yet
      {
         if(fragment.getView() != null) 
         {
            // no need to call if fragment's onDestroyView() 
            //has since been called.
            fragment.updateDisplay(pos); // do what updates are required
         }
      }

} 
```

}`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T12:47:43.207

我同意 nirvik 的观点，但是有一个关键的改进是应该做的。这个[实现](http://developer.android.com/reference/android/support/v4/view/ViewPager.html)有一个缺陷——当滑动到下一个片段时，会调用 onPageSelected 方法，然后通过调用 mActionBar.setSelectedNavigationItem(position); 来调用 onTabSelected 方法。这会导致动画闪烁。这：

```
viewPager.setCurrentItem(i); 
```

应该替换为：

```
if(i != viewPager.getCurrentItem()) {
     viewPager.setCurrentItem(i);
} 
```

从而实现平稳过渡。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-06T05:09:46.243

您可以尝试在您的代码中包含以下代码`FragmentPagerAdapter`，看看这是否解决了问题。

```
public int getItemPosition(Object object) {
    return POSITION_NONE;
} 
```

您也可以尝试使用`FragmentStatePagerAdapter`.

# html - DOCTYPE 声明删除了我的背景图片

> ID：14172174
> 
> 赞同：1
> 
> 时间：2013-01-05T13:22:15.577
> 
> 标签：html, css, doctype

我有一个 html 文档，我想将图像作为背景。对于下一个示例，一切都很好：

```
<html><head></head><body><div id="principal"></div></body></html> 
```

CSS：

```
#principal 
{
    background: url(../Img/org/world.png) no-repeat;
    width:100%;
    height:100%;
    background-size: 100% 100%;
} 
```

但是如果我将 html 文件重写为：

```
<!DOCTYPE html><html><head></head><body><div id="principal"></div></body></html> 
```

不再显示来自 css 的图像（ background: url(../Img/org/world.png) no-repeat; ）。为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T13:29:30.790

将此添加到您的样式表中：

```
html,body {width:100%;height:100%;} 
```

您设置为 100% 的 DIV 没有任何参考应设置为 100% 的内容。告诉浏览器文档要填充 100% 的可用内容会为 div 元素创建一个引用。

一个摆弄的小提琴：http:
[//jsfiddle.net/UJsRW/](http://jsfiddle.net/UJsRW/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T13:32:38.833

第二个 html 标签应该在 head 标签之后。然后告诉 body 和 html 在你的 css 中是 100% 的高度和宽度。

这是代码工作：http: [//jsfiddle.net/dbb67/2/](http://jsfiddle.net/dbb67/2/)

```
body, html {
width:100%;
height:100%;
}

#principal {
display:block;
position:relative;
background: url(http://fc00.deviantart.net/fs42/i/2009/154/4/d/fantasy_landscape_bg_9_by_joannastar_stock.jpg) no-repeat;
width:100%;
height:100%;
background-size: 100% 100%;
} 
```

# android - Android后台进程相当于ios appdelegate

> ID：14172180
> 
> 赞同：0
> 
> 时间：2013-01-05T13:23:10.000
> 
> 标签：android, android-service

我正在我的 android 应用程序中执行后台进程，因为我使用了服务。在 iphone 中，我使用 appdelegate 作为后台进程。

我的问题是在 andorid 中执行后台进程的任何其他替代方法？如果是这样，哪一个是最好的？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T13:25:22.147

要在 Android 中执行后台进程，您有 3 个最佳选项：

1)[线程](http://www.edumobile.org/android/android-development/timer-thread-example-in-android-programming/)

2)[服务](http://www.vogella.com/articles/AndroidServices/article.html)

3）[异步任务](https://stackoverflow.com/questions/9671546/asynctask-android-example)

所有这三个都是为了您正在寻找的相同目的。

**停止线程：**

通常，您不会强行停止**线程，因为它很危险**。您设置一个标志，告诉有问题的线程在受控情况下退出它的线程循环。

您的线程循环看起来像这样：

```
void run() {
  while (shouldContinue) {
    doThreadWorkUnit();
  }
} 
```

[如何停止线程：](http://forward.com.au/javaProgramming/HowToStopAThread.html)

# c# - 在网页（客户端）C# 中嵌入（服务器端）ActiveX 控件

> ID：14172182
> 
> 赞同：1
> 
> 时间：2013-01-05T13:23:37.060
> 
> 标签：c#, asp.net, html, client-server, activex

我想嵌入一个由服务器创建并发送到客户端以显示在网页中并保持更新的 ActiveX 包装器 (System.Windows.Forms.AxHost) 这可能吗？我认为可以使用对象来完成，但不确定如何使用 C# ASP .Net 来完成

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T15:48:12.970

阅读您的问题，您可能会更具体地问这个问题：

*   我想要一个在客户端上呈现的服务器上实例化的 activex 控件实例，并保持最新、交互式等，就好像它已在客户端上实例化一样。

不，这是不可能的。当您`<object classid="sid="clsid:9BE31822-FDAD-461B-AD51-BE1D1C159921"/>`从服务器传递时，您不会传递该对象的实例。您正在向客户端发送指令以实例化和呈现该对象。归根结底，http 通信只是文本，而不是内存块和可执行代码（这就是实例化对象）。服务器吐出的任何东西都必须在客户端上实例化。浏览器对 html 标签执行此操作，并且可能会这样做对象，如果它们

1.  支持对象（java 对象需要 JVM，activex 对象需要 MS 基础设施）
2.  该对象已安装或可安装（必须在客户端上执行的代码，因此代码必须到达那里）
3.  本地安全设置允许这种事情（通常越来越多地不是这种情况）

ActiveX 控件本质上是客户端（最好避免使用更安全和广泛支持的技术来创建强大的 Web UI，例如[ajax](http://en.wikipedia.org/wiki/Ajax_%28programming%29)）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-05T13:39:25.353

我相信这篇文章可能对您有所帮助，“在 Web 表单中托管 Windows 控件”。

[http://www.4guysfromrolla.com/articles/052604-1.aspx](http://www.4guysfromrolla.com/articles/052604-1.aspx)

不过，我想引用这些评论，并牢记这一点：'在 ASP.NET 中托管 Windows 控件有几个值得讨论的限制。首先，它要求客户端计算机至少安装了 .NET 可再发行组件并使用 Internet Explorer 5.01 或更高版本进行浏览。[...] 其次，ASP.NET 不能托管 Windows 窗体。您需要将这些部分抽象为 Windows 控件。最后，由于 Windows 控件不是可以在服务器上运行的 Web 控件，因此在回发期间无法轻松设置或读取属性。

# c# - Finding aging of customer invoice in a ledger. No posting of credit against invoice number

> ID：14172183
> 
> 赞同：2
> 
> 时间：2013-01-05T13:23:45.160
> 
> 标签：c#, sql, sql-server

I want to calculate bill aging days using SQl Server. When a bill is cleared, calculate its age.

```
Date     Invoice#   type   age     Debit   Credit   Balance
01/01              opening  27                      8061
01/01              Cr                      2000     6961
5/01               Cr                      5000     1961
5/1        5       Dr       30     3000             4961
27/1               Cr                      2000     2961
5/2                Cr                      2961        0 
```

The opening balance gets cleared on 27 Jan; so, invoice age is 27 days. And, invoice # 5 is cleared on 5/2; so, its age will be 30 days. How do I do this in SQL Server code?

I have this cledger table in a SQL table.

I could not figure out how to do this recursive task of... selecting bill# and sum all credit till the debit amount is greater than the sum of credit. Using date of that credit transaction, calculate the difference in days between debit bill date and when this bill is cleared.

Any help will be appreciable. Thanks in advance.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T17:52:24.790

您正在寻找递归的东西 - 它考虑所有以前的事务并聚合它们，将它们与当前行进行比较。您需要有选择地将表连接到自身，计算每行截至当前日期的余额。您可以使用递归 CTE，也可以使用 T-SQL OVER 子句 - 请参阅[http://msdn.microsoft.com/en-us/library/ms189461.aspx](http://msdn.microsoft.com/en-us/library/ms189461.aspx)。

# c# - 从 WCF 服务返回实体时从实体中剥离字段

> ID：14172192
> 
> 赞同：2
> 
> 时间：2013-01-05T13:24:29.420
> 
> 标签：c#, wcf, serialization, dynamic, data-transfer-objects

我有一个多层系统，其中所有业务逻辑都可以通过 WCF 服务获得。

现在考虑以下场景：

1.  用户打开我的 Web 应用程序 (ASP.NET MVC 4) 并从 WCF 服务请求一些实体
2.  WCF 服务从数据库中读取实体（使用 NHibernate）
3.  实体通过安全层，我们发现用户不应该看到该实体的某些字段
4.  表示层（没关系，它是什么——Web 应用程序、移动应用程序）通常不应该知道用户的安全权限。表示层只获取它从服务接收到的每个字段并呈现它。

**如何从服务上的实体中去除不必要的信息，并使我的表示层不知道服务不想返回的那些实体字段？实现这一目标的最佳实践是什么？**

我想，我应该使用 DTO（数据传输对象），但显然我不能严格定义它们，因为在安全层（或其他一些字段过滤系统）启动之前，我不知道哪个用户可以访问每个字段。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T16:55:59.600

虽然我不能声称这是“最佳实践”，但这至少是 Rockford Lhotka 在[Expert C# 2008 Business Objects](https://rads.stackoverflow.com/amzn/click/com/1430210192)中采用的一种方法。

您可以让所有域实体最终都派生自某个基类。该基类可能有这样的方法：

```
public virtual bool CanReadProperty(string propertyName) { ... } 
```

在允许用户查看（或设置）之前，每个属性都可以调用该方法。为了获得更好的性能，该基类可以缓存授权角色，因此检查不是一项昂贵的操作。而且，当然，现在我们有了表达式树，`CanReadProperty()`可以采用一个表达式，使其成为强类型。

一个属性的示例如下所示：

```
public string Name
{
    get
    {
        if (!CanReadProperty("Name")) { return string.Empty; } // or return null, whatever...
        return _name;
    }
} 
```

这种方法的好处是您不需要许多不同的 DTO 来处理这些属性的查看可能发生变化的各种场景。

# c# - I had this error: Error 2 Inconsistent accessibility: return type 'johny.Form1.CoOrds' is less accessible than method 'johny.Form1.toto()

> ID：14172195
> 
> 赞同：2
> 
> 时间：2013-01-05T13:24:57.480
> 
> 标签：c#, c#-4.0, c#-3.0, c#-2.0

```
class CoOrds
{
    public int x, y;

    public CoOrds() {
        x = 0;
        y = 0;
    }

    public CoOrds(int x, int y) {
        this.x = x;
        this.y = y;
    }
}

public CoOrds toto() {
    CoOrds B = new CoOrds(3, 2);
    return B;
}

private void result_Click(object sender, EventArgs e) {
    l6.Text = "";
    CoOrds D = new CoOrds();
    D = toto();
    l6.Text = "(" + D.x + "," + D.y + ")";
} 
```

I get following error:

`Error 2 Inconsistent accessibility: return type 'johny.Form1.CoOrds' is less accessible than method 'johny.Form1.toto()`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-05T13:27:13.747

As your `CoOrds` class is nested within `Form1`, it is by default `private` (ie. for use only within the `Form1` class). The easiest solution would be to make your `CoOrds` class `public`.

```
public class CoOrds{ 

public int x, y; // ... 
```

Another alternative would be to simply un-nest the `CoOrds` class, namely, move the declaration of the class outside of your `Form1` class entirely.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-05T13:27:32.550

**Original answer** (before I noticed that it's a nested type)

Yes - presumably `Form1` and `Form1.toto()` are both public - whereas `Coords` is `private` (the default accessibility for non-nested types). You can't create a method with a return type or parameter type which isn't accessible to all the code which can see the method - it doesn't make sense.

Options:

*   Make `Form1` internal
*   Make `Form1.toto()` internal
*   Make `Coords` public

Personally I'd recommend making `Form1` internal if you can - it's rare that a form needs to be available to other code, beyond unit tests (for which I'd use `InternalsVisibleTo`). Making `Form1.toto()` internal would be equally fine. I prefer to keep types and members as private as I can, so I'd only make `Coords` public as a last resort.

I'd *also* strongly recommend that you start following .NET naming conventions, and provide more informative names than `toto()`. Oh, and avoid public fields - expose properties instead. You may well want to make it immutable, too.

**Having noticed that it's a nested type...**

It actually looks like `Coords` is a *nested* class within `Form1`, which will mean it's *private* by default. It's unusual to want to expose a nested class - and it doesn't look like it's really tightly tied to `Form1` anyway. I would suggest making it a top-level (non-nested) type in the first place.

# matlab - Plotting characteristics of antenna radiation in matlab

> ID：14172204
> 
> 赞同：3
> 
> 时间：2013-01-05T13:26:18.277
> 
> 标签：matlab, plot, polar-coordinates, bessel-functions

I need to plot this function ![enter image description here](../Images/7a244a3514eee396113067cfbcf3c820.png)

```
theta = (-pi:0.01:pi);
f = 3*10^9;
c = 299792458;
da = 2; 
```

Here's my code, but I'm not sure it's correct. I dont know where exactly dot mark should be. How to set X-Axis in degress?

```
beta = (2*pi*f)/c;
const= (da*beta)/2; 
j= (cos(theta)+1).*(besselj(1,const*sin(theta))./(const*sin(theta))); 
```

My another question is how to plot this function in polar coordinates.

I made something like this.

```
polar(theta,j); 
```

Is it possible to rotate that function(by y-axis) to get 3D plot?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T15:27:01.460

事情对我来说是完全正确的，尽管我不会将符号`j`用作变量，因为（就像`i`那样）它是虚数单位 ( `sqrt(-1)`) 的符号。这样做你会覆盖它，因此在你不需要复数之前一切都会正常工作。

当您打算逐个元素地组合数组条目时，您应该使用诸如 ( `.*`) 之类的元素操作，就像您正确地获取`F(\theta)`. 实际上，`cos(theta)`是包含的角度的余弦数组`theta`等。

`Rotate 3D`最后，您可以使用绘图窗口中的命令旋转绘图。尽管如此，您有一条 2D 曲线 ( `F(\theta)`)，因此，您将继续旋转 2D 图形以获得某种*透视图*，仅此而已。要获得真实信息，您需要一个额外的因变量（或者我误解了您的问题？）。![在此处输入图像描述](../Images/732ae8f0e027dc04315ba3f612418b14.png)

**编辑：**现在我明白了你的观点，你想要围绕某个轴[*的旋转表面*](http://en.wikipedia.org/wiki/Surface_of_revolution)，我认为由于其中的对称性是`theta=0`. 好吧，旋转曲面可以通过一些解析几何获得并绘制，例如使用[`mesh`](http://www.mathworks.it/it/help/matlab/ref/mesh.html). 看一下这个：

```
 % // 2D polar coordinate radius (your j)
  Rad= (cos(theta)+1).*(besselj(1,const*sin(theta))./(const*sin(theta)));
  Rad = abs(Rad);  % // We need its absolute value for sake of clarity

  xv = Rad .* cos(theta);  % // 2D Cartesian coordinates
  yv = Rad .* sin(theta);  % // 2D Cartesian coordinates

  phi = -pi:.01:pi;        % // 3D revolution angle around theta = 0

  % // 3D points of the surface
  xf = repmat(xv',size(phi)); 
  yf = yv' * cos(phi);
  zf = yv' * sin(phi);

  mesh(xf,yf,zf) 
```

![在此处输入图像描述](../Images/3273083bec8dad417894f9b3f9637154.png)

您还可以添加图形效果

![在此处输入图像描述](../Images/dba4489a06f4ee93e98017862af3e7bb.png)

这是通过

```
mesh(xf,yf,zf,'FaceColor','interp','FaceLighting','phong')
camlight right 
```

和更精细的角度离散化`(1e-3)`。

# opengl - Why is it necessary to bind a buffer more than once in succession?

> ID：14172206
> 
> 赞同：0
> 
> 时间：2013-01-05T13:26:24.720
> 
> 标签：opengl, opengl-es, opengl-es-2.0

> **Possible Duplicate:**
> [How does glBufferData know which VBO to work on?](https://stackoverflow.com/questions/14172165/how-does-glbufferdata-know-which-vbo-to-work-on)

I've noticed in sample code (in an O'Reilly book) for both VBOs and render buffers that the binding is done more than once. What is the reasoning behind this? For example, you might have this at the top of an OpenGL routine:

```
 glGenBuffers(1, &m_vertexBuffer); 
  glBindBuffer(GL_ARRAY_BUFFER, m_vertexBuffer); 
```

And then before doing the drawing, you do it again:

```
 glBindBuffer(GL_ARRAY_BUFFER, m_vertexBuffer); 
  glVertexPointer(3, GL_FLOAT, sizeof(Vertex), 0);
  //on to the drawing routine 
```

Removing either of these causes the drawing to not appear, so why does it need binding twice?

Another example first we do this:

```
// Create & bind the color buffer so that the caller can allocate its space.      
   glGenRenderbuffersOES(1, &m_colorRenderbuffer); 
   glBindRenderbufferOES(GL_RENDERBUFFER_OES, m_colorRenderbuffer); 
```

Then, after creating vertices, etc, we later we do it again:

```
 // Bind the color buffer for rendering. 
      glBindRenderbufferOES(GL_RENDERBUFFER_OES, m_colorRenderbuffer); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T13:34:04.307

如果您一直在等待问题的答案[glBufferData 如何知道要处理哪个 VBO？](https://stackoverflow.com/questions/14172165/how-does-glbufferdata-know-which-vbo-to-work-on) 这个问题也得到了回答。

OpenGL 是一个状态机并调用 glBindBuffer 选择，它缓冲以下操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T14:24:18.663

**不必**连续多次绑定同一个缓冲区。做一次就足够了。在您的带有数组缓冲区的示例中，如果您在绘图例程之前绑定到另一个（或默认 0）缓冲区，则绘图可能不会出现。

# android - Android GetSpeed in LocationManager

> ID：14172216
> 
> 赞同：0
> 
> 时间：2013-01-05T13:27:20.557
> 
> 标签：android, performance, gps

In my android application i need to GetSpeed from GPS But the `onLocationChanged()` is called only every second even if set distance distance/time to 0 in `requestLocationUpdates`

How can i get the GPS Speed with higher frequency ? I don't need position, only speed

Is it possible to call GetSpeed outside onLocationChanged()?

Thank You very much

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T16:00:20.923

onLocationChanged is slow because it takes some time to fire get a first gps fix from the hardware. The speed estimate is a property of gps fixes. Hence speed changes along with with the location. You can try getLastKnownLocation() wich provides the last fix immediately. Use location.getTime() to decide if the last location is fresh enough.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T01:05:06.707

GPS 技术不测量速度。这只是一种获得准确位置的方法。速度值基于位置计算。
这就是为什么您无法获得更好的速度值频率：信息不存在。只有在位置更新之后（非常短的时间）才能有任何速度更新。

# oracle - Oracle 相当于 PostgreSQL Hstore

> ID：14172219
> 
> 赞同：2
> 
> 时间：2013-01-05T13:28:02.100
> 
> 标签：oracle

Hstore 是 PostgreSQL 内部的无模式键值存储，它允许我们直接在列中存储像哈希这样的数据

更多信息在这里 [http://schneems.com/post/19298469372/you-got-nosql-in-my-postgres-using-hstore-in-rails](http://schneems.com/post/19298469372/you-got-nosql-in-my-postgres-using-hstore-in-rails)

在 Oacle 11g 中相当于什么

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T09:58:10.250

Oracle 提供“大数据”NoSQL 系统，但不作为关系 DBMS 的一部分

[http://www.oracle.com/us/products/database/nosql/overview/index.html](http://www.oracle.com/us/products/database/nosql/overview/index.html)

# php - 如何为 Intuit 合作伙伴平台创建 Oauth 签名和 SAML 断言？

> ID：14172222
> 
> 赞同：4
> 
> 时间：2013-01-05T13:28:35.640
> 
> 标签：php, oauth, saml, intuit-partner-platform

我正在尝试连接到 Intuit 合作伙伴平台以使用新的 AggCat API，但我正在努力获取 Oauth 签名和 SAML 断言设置来验证和使用 API。我[以 QuickBooks 的 PHP DevKit](https://code.intuit.com/sf/wiki/do/viewPage/projects.php_devkit/wiki/HomePage)为例，但我认为这是一个不同的身份验证过程。有没有关于如何使用 PHP 进行身份验证和使用 Intuit AggCat API 的示例？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T12:56:31.440

目前唯一的样本是针对 .Net、Java 和 Ruby 的。

[https://ipp.developer.intuit.com/index.php?title=0010_Intuit_Partner_Platform/0020_Aggregation_%26_Categorization_Apps/0010_GettingStarted/0027_Call_the_Agg_%26_Cat_APIs](https://ipp.developer.intuit.com/index.php?title=0010_Intuit_Partner_Platform/0020_Aggregation_%26_Categorization_Apps/0010_GettingStarted/0027_Call_the_Agg_%26_Cat_APIs)

威廉

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T03:37:15.987

github 上有一个 PHP 示例，但我仍然无法弄清楚如何让 SimpleSAMLPHP 设置正常工作。这是 github 上示例的链接：[phpaggcat](https://github.com/pleslie/phpaggcat)。

如果有人对使用 SimpleSAMLPHP 的 github 示例有更多的运气，并且可以生成更完整的答案，我将不胜感激有关使其工作的任何提示。

编辑 08/04/2013

我最近又看了一遍，让它工作了。 [在这里查看我的答案。](https://stackoverflow.com/a/18049382/1203475)

# android - 在 Android 应用程序中使用数据库

> ID：14172223
> 
> 赞同：-1
> 
> 时间：2013-01-05T13:28:58.633
> 
> 标签：android, mysql, eclipse

我是android开发的新手。我从使用位置数据库的 java 开始使用 eclipse 上的应用程序。我的问题是，我如何能够将我的 android 应用程序连接到数据库。还建议一种合适的创建数据库的方法。我可以在mysql中创建它然后在eclipse中导入吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T13:31:51.767

看[这里。](http://www.androidhive.info/2011/11/android-sqlite-database-tutorial/)

我希望这能帮到您。

如果要用于`MySQL`插入数据，请使用从to格式`web service`发送数据。`XML``android``web service`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-05T13:31:32.840

这个链接应该解释你需要的一切！

[http://www.reigndesign.com/blog/using-your-own-sqlite-database-in-android-applications/](http://www.reigndesign.com/blog/using-your-own-sqlite-database-in-android-applications/)

如果你只是在你的应用程序中使用这个数据库来存储数据，那么 sqlite 是比 mysql 更好的选择，并且可以简单地集成到 android 中。不久前，当我进入这些东西时，我使用了上面相同的链接。本教程的结构非常易于阅读，并解释了所有内容。祝你好运。

# javascript - 如何在等待搜索结果出现时添加加载屏幕？

> ID：14172225
> 
> 赞同：0
> 
> 时间：2013-01-05T13:29:14.890
> 
> 标签：javascript, html, css

我有一个主页，其中包含一个 texfield，它读取用户输入，发送输入的任何值，并将其发送到将发生搜索并显示搜索结果的另一个页面。

```
 <div>
     <form action="****.jsp" method="get" id="search-id">
          <input type ="text" name = "search" id="search" size="70"/><br>
          <br />
          <input type="Submit" value="Search"  class="button rounded"> 
     </form>
     <br />
     <br />
     <br />
</div> 
```

但问题是实际的第二页显示需要一些时间，因此我想在等待该页面实际加载的同时显示一些加载 gif。我有一个可以使用的 gif 文件，但我不知道如何在网站中实现它，以便在我单击搜索按钮后它会显示出来。

我很`HTML/JS`陌生，几天来我一直在寻找一种可能的方法。这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T13:57:27.440

将提交事件处理程序添加到您的表单，使动画 gif 出现并且不会阻止表单提交。使用 JQuery 的示例：

```
$('#search-id').submit(function() {
    $('#animated-gif').show();
}); 
```

假设您在页面某处隐藏了动画 gif：

```
<img src="..." style="display: none;" id="animated-gif"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T14:04:10.610

由于您是新手`HTML`，因此您需要搜索更多关于`ajax and jquery`. 这将理想地回答你的问题。也看看[这个](https://stackoverflow.com/questions/7082323/display-loading-image-when-ajax-call-is-in-progress)类似的问题。希望这会帮助你。

# vb.net - Using .net predicates with objects

> ID：14172226
> 
> 赞同：0
> 
> 时间：2013-01-05T13:29:26.200
> 
> 标签：vb.net, lambda, predicate

What is the best way of achieving the following with and without lamdas please

```
Module Module1

    Sub Main()

        Dim countries As New List(Of Country)
        countries.Add(New Country("Africa"))
        countries.Add(New Country("India"))
        countries.Add(New Country("China"))
        countries.Add(New Country("Belgium"))

        Dim newCountry As String = "Spain"

        If Not countries.Exists(newCountry) Then
            countries.Add(New Country(newCountry))
        End If

    End Sub
End Module

Public Class Country

    Public Name As String

    Public Sub New(name As String)
        Me.Name = name
    End Sub

End Class 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T13:36:51.333

应该再努力一点！！

```
Module Module1

    Dim newCountry As String = "Spain"

    Sub Main()

        Dim countries As New List(Of Country)
        countries.Add(New Country("Africa"))
        countries.Add(New Country("India"))
        countries.Add(New Country("China"))
        countries.Add(New Country("Belgium"))

        ' Long Hand
        Dim pred As New Predicate(Of Country)(AddressOf CountryExists)
        If Not countries.Exists(pred) Then
            countries.Add(New Country(newCountry))
        End If

        ' Using Lamda
        If Not countries.Exists(Function(c As Country) c.Name = newCountry) Then
            countries.Add(New Country(newCountry))
        End If

        ' Check
        For Each c As Country In countries
            Console.WriteLine(c.Name)
        Next
        Console.ReadLine()
    End Sub

    Private Function CountryExists(ByVal country As Country)
        Return country.Name = newCountry
    End Function

End Module

Public Class Country

    Public Name As String

    Public Sub New(name As String)
        Me.Name = name
    End Sub

End Class 
```

# python - 如何在 Python 中搜索嵌套列表网格并给出字母坐标？

> ID：14172229
> 
> 赞同：1
> 
> 时间：2013-01-05T13:29:34.783
> 
> 标签：python, list, matrix, grid, nested

我是 python 的新手，并且为实现这一目标而苦苦挣扎。这是我的任务：

> 六字母密码是一种对涉及替换和转置的秘密消息进行编码的方法。加密首先随机填充一个 6  6 网格，其中包含从 A 到 Z 的字母和从 0 到 9 的数字（总共 36 个符号）。消息的发送者和接收者都必须知道这个网格。网格的行和列标有字母 A、B、C、D、E、F。
> 
> 编写一个实现六字母密码方法的 Python 程序。你的程序应该： 1\. 创建一个 6x6 的网格，并按照第一段中的描述随机填充字母和数字，然后提示用户输入一个秘密信息。2\. 用户输入密文后，显示 6x6 网格和生成的密文。3.提示用户输入密文以显示原始消息。要求用户将密文的每两个字母用空格或逗号隔开即可。

我正在努力解决的问题是如何在嵌套列表中搜索已输入的随机放置的字母并给出坐标。坐标也不会以数字（即 0,1）而不是字母（即 A,B）的形式给出，我想一旦我有了如何使用这个嵌套列表的想法，我就可以管理编码和解码。

到目前为止，这是我的代码：

```
grid = [["Z","9","G","Q","T","3"],
    ["Y","8","F","P","S","2"],
    ["X","7","E","O","R","1"],
    ["W","6","D","N","M","0"],
    ["V","5","C","L","K","U"],
    ["J","4","B","I","H","A"]]

def main():
    print("Welcome to the sixth cipher")
    print("Would you like to (E)Encode or (D)Decode a message?")
    operation = input()

    if(operation == "E"):
        encodecipher()
    elif(operation == "D"):
        decodecipher()
    else:
        print("Sorry, input not recognised")

def encodecipher():
    print("Please enter a message to encode:")
    messagetoencode = input()

def decodecipher():
    print("Decode Test")
    rowcolumn()

def rowcolumn():
    pass

main() 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-05T14:04:45.367

我知道您这样做是出于学习/家庭作业的目的，但我会指出这一点，以供您稍后记住。更容易将您所拥有的内容视为 36 项（恰好可以表示为 6x6） - 或者更明确地 - 您有一个字符 -> 坐标，并且 a`dict`非常有用，并且可以反转它...

```
from string import ascii_uppercase, digits
from random import shuffle
from itertools import product

# build 36 items list and randomise it
chars = list(ascii_uppercase + digits)
shuffle(chars)

# alternatively, use your existing grid:
from itertools import chain
chars = list(chain.from_iterable(grid))
# ...

# Create char -> (coords)
lookup = dict(zip(chars, product('ABCDEF', repeat=2)))
# Swap over so (coords) -> char
rev_lookup = {v: k for k,v in lookup.iteritems()} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-05T13:38:59.760

您可以使用 Python 的 enumerate 来迭代值并随时提供每个值的索引位置：

```
grid = [["Z","9","G","Q","T","3"],
    ["Y","8","F","P","S","2"],
    ["X","7","E","O","R","1"],
    ["W","6","D","N","M","0"],
    ["V","5","C","L","K","U"],
    ["J","4","B","I","H","A"]]

search = 'D'

for rownum, row in enumerate(grid):
    for colnum, value in enumerate(row):
       if value == search:
           print "Found value at (%d,%d)" % (rownum, colnum) 
```

您可以将其调整为您选择的函数结构，例如以下（如果您的网格中的值是唯一的）：

```
def findvalue(grid, value):
    for rownum, row in enumerate(grid):
        for colnum, itemvalue in enumerate(row):
            if itemvalue == value:
                return (rownum, colnum)
    raise ValueError("Value not found in grid") 
```

如果找不到该值，这将引发 a `ValueError`，因此您必须在调用代码中处理此问题。

如果您随后需要将 0 索引的行号和列号映射到字母 A...F，您可以执行以下操作：

```
def numbertoletter(number):
    if number >= 0 and number <= 26:
        return chr(65 + number)
    else:
        raise ValueError('Number out of range') 
```

这将为您提供以下信息：

```
>>> numbertoletter(0)
'A'
>>> numbertoletter(1)
'B' 
```

把它们放在一起会给你：

```
value = 'B'
row, col = map(numbertoletter, findvalue(grid, value))
print "Value '%s' found at location (%s, %s)" % (value, row, col) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-05T13:39:36.717

这是获取网格中字符坐标的简单方法：

```
def find_pos(s):
    for i, j in enumerate(grid):
        try:
            return i, j.index(s)
        except ValueError:
            continue
    raise ValueError("The value {0!r} was not found.".format(s))

>>> find_pos("O")
(2, 3) 
```

# java - 第一个位置没有空格的正则表达式

> ID：14172230
> 
> 赞同：0
> 
> 时间：2013-01-05T13:30:01.773
> 
> 标签：java, regex

接受的示例：

> ```
> This is a try!
> And this is the second line! 
> ```

不接受的示例：

> ```
>  this is a try with initial spaces
> and this the second line 
> ```

所以，我需要：

*   没有仅由空格“”组成的字符串
*   没有第一个字符是空格的字符串
*   新线没问题；只有第一个字符不能是新行

我正在使用

```
^(?=\s*\S).*$ 
```

但这种模式不允许换行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T13:43:44.733

你可以试试这个正则表达式

```
^(?!\s*$|\s).*$
    ---- -- --
      |   |  |->matches everything!
      |   |->no string where first char is whitespace
      |->no string made only by whitespaces 
```

你需要使用`singleline`模式..

* * *

你可以[在这里](http://fiddle.re/nwy7)试试..你需要使用`matches`方法

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-05T13:49:42.230

“没有仅由空格组成的字符串”与“没有第一个字符为空格的字符串”相同，因为它也以空格开头。

您必须设置`Pattern.MULTILINE`将 ^ 和 $ 的含义更改为行首和行尾，而不仅仅是整个字符串

```
"^\\S.+$" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-05T14:20:46.080

我不是 Java 人，但 Python 中的解决方案可能如下所示：

```
In [1]: import re

In [2]: example_accepted = 'This is a try!\nAnd this is the second line!'

In [3]: example_not_accepted = '   This is a try with initial spaces\nand this the second line'

In [4]: pattern = re.compile(r"""
  ....:     ^     # matches at the beginning of a string
  ....:     \S    # matches any non-whitespace character
  ....:     .+    # matches one or more arbitrary characters
  ....:     $     # matches at the end of a string
  ....:     """,
  ....:     flags=re.MULTILINE|re.VERBOSE)

In [5]: pattern.findall(example_accepted)
Out[5]: ['This is a try!', 'And this is the second line!']

In [6]: pattern.findall(example_not_accepted)
Out[6]: ['and this the second line'] 
```

这里的关键部分是 flag `re.MULTILINE`。启用此标志后，`^`不仅`$`匹配字符串的开头和结尾，还匹配由换行符分隔的行的开头和结尾。我敢肯定Java也有类似的东西。

# jenkins - 如何使 cpplint 与 Jenkins 警告插件一起使用

> ID：14172232
> 
> 赞同：2
> 
> 时间：2013-01-05T13:30:04.157
> 
> 标签：jenkins, compiler-warnings, lint, cpplint

我在 Jenkins 中添加了一个**“执行 shell”**构建步骤来运行 cpplint.py

```
python /var/lib/jenkins/scripts/cpplint.py --counting=detailed `find path -name *.cpp 
```

我还添加了**“扫描编译器警告**”并添加了 CppLint。

但是它总是得到 0 个警告，即使它在控制台输出中显示了一些警告，例如

```
filename.cpp:18:  Missing space after ,  [whitespace/comma] [3] 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-06-12T12:39:44.173

如果您使用 --output=vs7 运行 cpplint.py，它将生成 Jenkins 警告插件所期望的格式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-20T19:18:04.783

我使用[Cppcheck Plugin](https://wiki.jenkins-ci.org/display/JENKINS/Cppcheck+Plugin)和[cpplint_to_cppcheckxml.py](https://gist.github.com/esutton/c19606e6962bfe535b1d80d672afb82b)将[cpplint.py输出转换为](https://github.com/cpplint/cpplint)[Cppcheck Plugin](https://wiki.jenkins-ci.org/display/JENKINS/Cppcheck+Plugin)预期的 XML 格式。这真的很好用。我可以单击 Jenkins 作业页面上显示的 Cppcheck 结果中的违规问题，它将显示源代码并突出显示违规行。很酷。

您必须为[cpplint](https://github.com/cpplint/cpplint)提供源代码目录的绝对路径，以便在 Cppcheck 结果页面上生成超链接。我看到的唯一问题是您的[Cppcheck](http://cppcheck.sourceforge.net)和 cpplint 结果是合并的而不是分开的。

如果使用 Linux bash 脚本，以下是我如何将相对路径转换为绝对路径，以便 cpplint 在其输出中生成绝对路径：

```
# Build cpplint reports and transform to cppcheck compatible XML format
# Convert relative path to absolute path so that Jenkins job can easily display the source code errors
srcPathAbsolute=${PWD}/../dicegame/src/main
srcPathAbsolute=$(readlink -f ${srcPathAbsolute})
cpplint.py --counting=detailed ${srcPathAbsolute}/*.cpp  2>&1| cpplint_to_cppcheckxml.py &> cpplint-cppcheck-result.xml 
```

在我的 Jenkins 作业配置中找到 ccplint-cppcheck-result.xml 文件和我的正常 cppcheck-result.xml。

```
Publish cppcheck results
Cppcheck report XMLs  **/*cppcheck-result.xml 
```

感谢**cpplint_to_cppcheckxml.py**的原始开发者。该脚本作为一个示例，说明如何将其他工具的输出连接到现有的 Jenkins 插件中。非常好！

# scala - 在 for 循环中编写这个 while 循环

> ID：14172234
> 
> 赞同：0
> 
> 时间：2013-01-05T13:30:58.483
> 
> 标签：scala, stanford-nlp

我正在与 StanfordNLP 合作从解析树中提取数据。

我正在使用 Scala 进行编码。

```
val tp = TregexPattern.compile("SOME_PATTERN")
val res = tp.matcher("SOME_TREE") 
```

阅读我使用的结果

```
while (res.find()) {
  println(res.getMatch.getLeaves.mkString(" "))
} 
```

我想在for循环中重写这个while循环。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T14:15:06.827

这个怎么样：

```
val tp = TregexPattern.compile("SOME_PATTERN")
val res = tp.matcher("SOME_TREE")
for(it <- Iterator.continually(res.getMatch).takeWhile(_ => res.find)) {
  println(it.getLeaves.mkString(" "))
} 
```

# ios6 - 如何将视图放在 UICollectionViewCell 的背面

> ID：14172237
> 
> 赞同：0
> 
> 时间：2013-01-05T13:31:36.173
> 
> 标签：ios6, uicollectionview

在我的应用程序中有一些 UICollectionViewCells 显示一些信息。

当用户点击其中一个按钮时，我用这段代码翻转点击的单元格：

```
UICollectionViewCell* cell = [collectionView cellForItemAtIndexPath:indexPath];

[UIView animateWithDuration:1.0
                      delay:0
                    options:(UIViewAnimationOptionAllowUserInteraction)
                 animations:^
                {
                     NSLog(@"starting animation");

                    [UIView transitionFromView:cell.contentView
                                        toView:cell.contentView
                                      duration:.5
                                       options:UIViewAnimationOptionTransitionFlipFromRight
                                    completion:nil];
                }
                 completion:^(BOOL finished)
                {
                     NSLog(@"animation end");
                }
 ]; 
```

在单元格翻转后（这是正确的），单元格是完全白色的。

关于两个问题是： - 为什么翻转后单元格是白色的。由于fromView等于toView，它不应该显示原始信息吗？- 在单元格背面显示不同内容的最佳方式是什么。我想 UICollectionViewCell 没有链接 cell.contentViewBack ...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T15:09:46.617

你现在可能已经有了，但是，

不确定这是否是“最佳”方法，我通过创建自定义 UICollectionViewCell、在自定义单元格中有 2 个 UIImageViews 并在动画中定位这些视图来实现这一点（这仅适用于你想在你的牢房里有 - 可能有帮助，可能没有，任何人）

创建新的 UICollectionViewCell 类（我的称为 CardCVCell） 在 CardCVCell.h 中放入 UIImageView 插座

```
@property (strong, nonatomic) IBOutlet UIImageView *cardImage;
@property (strong, nonatomic) IBOutlet UIImageView *cardBackImage; 
```

我使用了故事板——在那里我在场景的集合视图中的单元格上输入了“CardCVCell”作为我的自定义类。

在该场景的视图控制器中，我有上面的代码，但是我在自定义单元格中使用 UIImageViews 来获取转换中的视图（注意，您必须将 UICollectionViewCell 转换为自定义类

```
- (void)collectionView:(UICollectionView *)collectionView didSelectItemAtIndexPath:(NSIndexPath *)indexPath
{
// animate the cell user tapped on
CardCVCell  *cell = (CardCVCell *)[collectionView cellForItemAtIndexPath:indexPath];

         [UIView transitionFromView:cell.cardBackImage
                             toView:cell.cardImage
                           duration:.5
                            options:UIViewAnimationOptionTransitionFlipFromRight
                         completion:^(BOOL finished)
          {
              if (finished) {
                  NSLog(@"animation end");
              }

          }
    ];    
} 
```

如果不是您，我希望这对某人有所帮助，如果我可以帮助让我知道。

干杯

# php - 在 MySQL 数据库中保存 UTF-8 字符

> ID：14172240
> 
> 赞同：-3
> 
> 时间：2013-01-05T13:31:46.647
> 
> 标签：php, mysql, utf-8, html-entities

如何使用 PHP 将 UTF-8 字符（马拉雅拉姆语）作为 HTML 实体保存到 MySQL 数据库。我已经尝试了一些 php 函数来做同样的事情，但我仍然无法做到。因此，如果有人指出我正确的方向，那将会很有帮助。

这是我所做的：

*   将字段排序规则设置为“utf-8_general_ci”。
*   在页眉中将内容类型设置为 utf-8。
*   使用了 php 函数 htmlentities() 和 htmlspecialchars()。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T13:38:43.280

创建/更改您的表排序规则 = utf-8，将名称设置为 utf-8 [http://dev.mysql.com/doc/refman/5.0/en//charset-connection.html](http://dev.mysql.com/doc/refman/5.0/en//charset-connection.html)

还在您的服务器内部使用 utf-8 并使用适当的标签声明您的网站 utf-8

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T15:03:25.670

最后我自己得到了解决方案:)

有一个 php 函数可以将字符转换为 HTML 实体。

```
mb_convert_encoding("$SPECIAL_CHAR",'HTML-ENTITIES', 'UTF-8'); 
```

# jquery - json 和 jquery ajax

> ID：14172250
> 
> 赞同：0
> 
> 时间：2013-01-05T13:33:24.340
> 
> 标签：jquery

我想用jquery从php获取数据。我写了这段代码：

```
<?php 
      $return=array('content'=>1,'id'=>2,'priority'=>3);
      echo json_encode($return);
?> 
```

在jQuery中：

```
$.ajax({
 type:'post',
 url:'next_prev.php',
 data:{act:act,id:id,priority:priority},
 dataType: 'json',
 cache: false,

 success:function(data){
 var obj=jQuery.parseJSON(data)
 $('#content').html(obj.content);
 $('#priority').html(obj.priority);
 $('#id').html(obj.id);

 },
 }); 
```

但它不起作用。有什么问题吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T13:39:30.860

成功回调中的数据根据​​dataType进行格式化，即无需再次解析JSON

尝试直接删除`var obj=jQuery.parseJSON(data)`和使用`data.content` `data.priority`等

# ruby-on-rails - 如何动态重命名html链接

> ID：14172251
> 
> 赞同：0
> 
> 时间：2013-01-05T13:33:26.247
> 
> 标签：ruby-on-rails, twitter

通过单击带有此代码的标记为“user_id”的链接，我有一个指向用户配置文件的链接：

```
<p>Tags: <%= raw feed_item.usertags.map(&:user_id).map { |t| link_to t, usertag_path(t) }.join(', ') %></p> 
```

我正在尝试使链接显示为 user_id 链接指向的用户名。有任何想法吗？

编辑：

用户型号：

```
attr_accessible :name(aka user_name), :email, :password, :password_confirmation 
```

微贴模型：

```
attr_accessible :content, :user_id, :usertag_list
has_many :usertaggings
has_many :usertags, through: :usertaggings
belongs_to :user 
```

用户标签模型：

```
attr_accessible :user_id *actually a string field not integer*
has_many :usertgaggings
has_many :microposts, through: :usertaggings 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T13:55:28.117

你使用`usertag_path(t)`什么时候`t`是用户ID，这让我感到很奇怪。如果您想要指向用户页面的链接，那将是`user_path(t.user)`，不是吗？

无论如何，我认为这应该有效：

```
<p>Tags: <%= raw feed_item.usertags.map { |t| link_to t.user.name, user_path(t.user) }.join(', ') %></p> 
```

# c - 如何在 C 中进行引用计数 - 参数传递

> ID：14172255
> 
> 赞同：2
> 
> 时间：2013-01-05T13:33:59.690
> 
> 标签：c, memory-management, memory-leaks, reference-counting

分配的结构“对象”的引用计数的基础知识对我来说似乎很简单：给新对象的 RC 为 1；分配时减少旧对象的 RC（如果 RC=0，则释放）并增加分配对象的 RC；减少所有离开范围的对象的 RC。

但是，当将 RC 对象传递给函数/从函数返回时，我对我需要做什么感到有点困惑。我是否必须在每个函数调用之前/之后对 RC 进行 inc/dec，如果有必要，应该将 inc 和 dec 放在哪里（在函数内部的开始和结束处，还是在函数调用之前和之后？）？函数返回的 RC 对象呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-05T13:42:13.820

增加引用计数就像在说“我对指向的内容感兴趣，所以我已经将指针存储在某个地方。请不要在我不看的时候释放它”。

因此，每次存储指针都是一个“引用”，必须计算在内。

如果函数没有将指针存储在某处，则不需要增加它。如果您存储指针，一旦您完成使用它，请减少引用计数。\

很多时候，将返回一个“对象”，其引用计数已设置为 1。您必须阅读该函数文档以了解它是否已将引用的所有权“传递给您”（在这种情况下，您将不得不递减计数），或者如果您需要调用一些其他函数，它将递减它并删除对另一个对象内部的该指针的引用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-05T13:42:20.940

一般来说，任何时候创建一个新的引用，你都会增加，每次销毁/丢弃一个引用，你就会减少。

函数参数需要一个副本，所以这是一个增量。函数返回值需要一个副本，所以这是一个增量。当然，在许多情况下，也会有相应的同时丢弃，因此您可以通过不修改计数来进行优化。

当然，在 C 语言中，这会很快变得非常复杂且容易出错，因为您必须手动完成所有操作。一个损坏/不可靠的引用计数机制可以说比没有更糟糕。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-05T13:50:07.573

我认为功能是一样的。
如果你传递了一个指向函数调用的指针，你为什么不把它当作一个赋值呢？（所以我认为 RC 应该递增）
当你离开函数时，我认为它与离开作用域相同。
关于返回值，如果是用来赋值的，那么如你所说，RC+1，或者RC就不用改了。

# java - void 是此变量的无效类型

> ID：14172262
> 
> 赞同：4
> 
> 时间：2013-01-05T13:35:09.983
> 
> 标签：java, android, void

我收到此错误：

> void 是变量 onRadioButtonClicked 的无效类型

但是开发者网站说 void 是必须的！那么问题出在哪里？xml的编码是正确的。问题一定出在这里：

```
package com.example.kernel.version;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.support.v4.app.NavUtils;
import android.view.Menu;
import android.view.MenuItem;
import android.view.View;
import android.widget.Button;
import android.widget.RadioButton;

public class MainPage extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        Intent intent=getIntent();
        setContentView(R.layout.activity_main_page);       

        public void onRadioButtonClicked(View view) {
            // Is the button now checked?
            boolean checked = ((RadioButton) view).isChecked();

            // Check which radio button was clicked
            switch(view.getId()) {
                case R.id.radio_pirates:
                    if (checked)
                        // Pirates are the best
                    break;
                case R.id.radio_ninjas:
                    if (checked)
                        // Ninjas rule
                    break;
            }

        } 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-05T13:37:46.120

你`onRadioButtonClicked`包含在你的`onCreate`方法中——使它们成为单独的方法。在以下之后添加右大括号`}`：

```
setContentView(R.layout.activity_main_page); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T13:40:10.340

像这样做：

```
import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.support.v4.app.NavUtils;
import android.view.Menu;
import android.view.MenuItem;
import android.view.View;
import android.widget.Button;
import android.widget.RadioButton;

public class MainPage extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        Intent intent=getIntent();
        setContentView(R.layout.activity_main_page);       

    }

    public void onRadioButtonClicked(View view) {
        // Is the button now checked?
        boolean checked = ((RadioButton) view).isChecked();

        // Check which radio button was clicked
        switch(view.getId()) {
            case R.id.radio_pirates:
                if (checked)
                    // Pirates are the best
                break;
            case R.id.radio_ninjas:
                if (checked)
                    // Ninjas rule
                break;
        }

    }
} 
```

# c# - Web服务队列设计，带有数据库

> ID：14172267
> 
> 赞同：0
> 
> 时间：2013-01-05T13:35:36.123
> 
> 标签：c#, web-services, database-design

我正在尝试设计一个允许将注册用户添加到队列的移动应用程序。从 Web 服务请求一个号码，然后以存储的号码进行响应。下一个请求用户将获得连续号码。

我使用 C# 作为服务器端语言，使用 mySQL 作为用户数据库。

客户端发送一个 HTTP POST 请求，其中“Authentication”标头是“username:password”，“x-action”自定义标头是“joinQueue”。并在队列中获取他的号码。稍后，他可以使用“checkQueueStatus”操作轮询 Web 服务，以查看他现在在队列中的位置。

服务器端执行以下操作：

1.  访问用户数据库并检查用户名：密码是否存在（正确）。
2.  发送 last_number+1 并更新 HTTP 响应正文。
3.  在队列中存储用户 ID 123123 为 31 的信息。
4.  一旦先入队列完成服务，更新所有用户的队列。

作为网络服务的菜鸟，我不太确定如何设计服务器端部分。具体来说，使用以下信息创建一个不同的表（队列表）是否有意义：

```
userID  | placeInQueue 
301452        1 
444592        2 
612712        3
042125        4 
```

并且管理员客户端现在可以发送带有*“serviceFirstUser”*操作的 HTTP 请求，这将减少队列中每个人的 placeInQueue？

这是一个合理的设计吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T13:57:56.207

使用 QueueTable 是个好主意，但您不需要这样做：

*   一旦先入队列完成服务，更新所有用户的队列。

您可以只索引 placeInQueue 然后获取 max_place-min_place

```
CREATE TABLE IF NOT EXISTS `queue`
(
    `userID` INT(9) PRIMARY KEY NOT NULL,
    `placeInQueue` BIGINT(16) AUTO_INCREMENT NOT NULL,
    INDEX(placeInQueue)
) ENGINE=MyISAM; 
```

因此，您只需获得队列中第一个用户的位置（以恒定的复杂性）：

```
SELECT * FROM `queue` ORDER BY `placeInQueue` ASC LIMIT 1 
```

然后您可以以对数复杂度获得用户的位置：

```
SELECT * FROM `queue` WHERE `userID`='<user_id>' LIMIT 1 
```

他的真实位置是（他的placeInQueue）-（第一个placeInQueue）+1。

然后您不需要进行线性更新...删除第一个可以以对数复杂度完成（placeInQueue 索引的常数 + userID 的对数）。

# c# - Youtube 嵌入式播放器：视频结束时的事件

> ID：14172273
> 
> 赞同：1
> 
> 时间：2013-01-05T13:36:22.690
> 
> 标签：c#, winforms, youtube-api

我正在创建一个在 C# (winform) 中播放 youtube 视频的应用程序。现在我想在视频结束时触发一个事件或类似的东西。我正在使用 webbrowser 控件并调用这样的 youtube 视频：

```
wbYoutube.Navigate("http://www.youtube.com/v/" + playString[1] + "?version=3&enablejsapi=1&autoplay=1"); 
```

playString[1] 是 youtube 视频 ID（如 rGJN5K2cV_8）。

几天来我一直试图让这个工作，有没有人知道如何实现这个目标？如果它甚至可能......

如果您需要更多信息，请告诉我。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T15:31:03.630

我认为这是可能的，但您必须自己将 html 代码写入浏览器元素

```
wbYoutube.DocumentText = ""; 
```

这是html（你必须逃避它）

```
 <html><head></head><body>

    <script type='text/javascript' src='http://www.youtube.com/player_api'></script>
    <iframe id="player" width="100%" height="100%" src="http://www.youtube.com/embed/VIDEO_ID?autoplay=1&controls=0&enablejsapi=1" frameborder="0" allowfullscreen></iframe>
    <script type="text/javascript">
    var player;
    function onYouTubeIframeAPIReady() {
        player = new YT.Player('player', {
            videoId: 'VIDEO_ID',
            events: {
                'onStateChange': function(evt){
                    if(evt.data == 0){
                        window.external.Test('Video finished!!');
                    }
                }
            }
        });
    }
    </script>

</body></html> 
```

并查看[实现 DHTML 代码和客户端应用程序代码之间的双向通信](http://msdn.microsoft.com/en-us/library/a0746166.aspx)

在那里你可以找到其余的代码。

# android - SD卡中的android mkdirs返回false.help我，它花了我3天

> ID：14172274
> 
> 赞同：5
> 
> 时间：2013-01-05T13:36:46.667
> 
> 标签：android, mkdirs

我想在 SD 卡中创建一个文件夹，并且我已经添加了权限

```
<user-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
```

在清单文件中。下面是我的代码，但 mkdirs 返回 false！你能帮助我吗！

```
File exportDir = new File(
                Environment.getExternalStorageDirectory().toString(), "happydiarybackup");
        if (!exportDir.exists()) {
            boolean a = exportDir.mkdirs();
            Log.d("mkdir ",exportDir.getAbsolutePath() + " make "+ a);
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T13:41:57.923

尝试这个。它可能会帮助你。

```
String fullPath = Environment.getExternalStorageDirectory().getAbsolutePath() + "/happydiarybackup/";
try
{
    File dir = new File(fullPath);
    if (!dir.exists()) {
      dir.mkdirs();
    }
}
 catch (Exception e) {
   Log.e("App", "Exception" + e.getMessage());
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-07-04T06:49:22.187

1.检查您的 compileSdkVersion 2\. [Android：外部存储上的 mkdirs()/mkdir() 返回 false](https://stackoverflow.com/questions/7212559/android-mkdir-returns-false)。确保你把权限标签放进去。

# android - android：从父布局的边缘填充列表视图和线性布局？

> ID：14172277
> 
> 赞同：0
> 
> 时间：2013-01-05T13:36:56.063
> 
> 标签：android, android-layout, listview, nine-patch

![在此处输入图像描述](../Images/8d3a9c7854e9123efec63e2a22e1ef33.png)

所以，我想创建一个带有列表视图和线性布局的布局，并用图像明确指定。

设备所有边缘所需的填充对我来说很重要，这应该以对不同设备的响应方式工作，它应该从各个侧面填充。

在这种情况下我可以使用**九个补丁**吗，如果是的话如何？

我怎么能做到这一点，任何骨架布局都会解决我的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T08:04:33.540

要获得该间距，您应该使用**边距**，而不是填充。

这是一个解决方案：

```
<RelativeLayout        
    android:layout_width="match_parent"
    android:layout_height="match_parent">

    <ListView
        android:id="@+id/mylistview"
        android:layout_width="match_parent"
        android:layout_height="@dimen/listview_height"
        android:layout_margin="@dimen/standard_margin"
        android:layout_alignParentTop="true"/>

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_below="@id/mylistview"
        android:layout_margin="@dimen/standard_margin>

    </LinearLayout>

</RelativeLayout> 
```

这为 的高度设置了一个固定值`ListView`，并`LinearLayout`自动调整大小以适应剩余空间（因为 layout_below）。

然后在 res/values 中创建一个维度文件：

例如

尺寸.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>

    <dimen name="listview_height">200dp</dimen>
    <dimen name="standard_margin">30dp</dimen>

</resource> 
```

为了支持不同的屏幕尺寸，您可以在其他文件夹中设置不同的尺寸，例如 /res/values-large、/res/values-xlarge 等。

# c++ - 在处理指针时，向量的行为是否与数组相同？

> ID：14172280
> 
> 赞同：0
> 
> 时间：2013-01-05T13:36:58.880
> 
> 标签：c++

一个`vector`简单的指针的名称，就像一个普通的 C 数组？

因此，我可以将地址发送到单个非向量数据（换句话说，一个指针）到一个期望 a 的函数参数，`vector`因为 a`vector`也是一个指针。

例如，声明如下的函数：

```
void RenderingEngine::Render(const vector<Visual>& visuals) const{ 
```

可以这样调用：

```
Visual visual; // is NOT a vector
//do stuff with visual
m_renderingEngine->Render(&visual); 
```

有意义并且是有效的、合法的 C++？

此示例代码来自 O'Reilly C++ 书籍，所以我猜这是书中的错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T13:38:39.810

> 向量的名称是否只是一个指针，就像普通的 C 数组一样？

不，这是一个完整的类。^*

* * *

[* 更重要的是，一个普通的 C 数组也不是一个指针（在大多数情况下它只是变成一个）。]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-05T13:40:08.000

不，这没有意义。没有从`T*`to的隐式转换`std::vector<T>`。

但是在 C++11 中，你可以做一些与你正在做的事情非常接近的事情^(1 。)您可以在将参数传递为时动态创建向量：

```
m_renderingEngine->Render( {visual} );  //note the curly braces! 
```

这样，您就可以从表达式中创建一个向量对象`{visual}`，然后将其传递给函数。

* * *

^(1.*非常接近*，您只需再输入*一个*字符即可使您的代码正常工作。不用输入`&`，只需输入`{`，最后再输入一个`}`。这就对了。C++11 让生活变得如此轻松。)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-05T13:47:17.237

不，它不是，这是相当幸运的，因为 C 数组的行为是可恶的。如果您发现自己正在寻找它，我建议您寻找一些新的 C++ 学习材料。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-05T13:54:47.240

其他答案是正确的，但我想补充一点，它可以反过来工作：

```
void RenderingEngine::Render(Visual *visuals, size_t n_visuals); 
```

可以这样调用：

```
vector<Visual> visuals;
m_renderingEngine->Render(&visuals[0], visuals.size()); 
```

您只需获取第一个元素的地址并将其作为数组传递即可。这是有效的，因为向量的元素在内存中是按顺序排列的。（正如评论中指出的那样，当然不应该在新代码中使用它。定义你的方法来获取向量更安全，更容易。但是，如果你已经有一个接受指针的遗留函数，这允许你在您自己的代码中使用向量。）

* * *

它以这种方式工作的原因，而不是您问题中的方式（将指针传递给接受向量的函数），是因为在您的情况下，它无法在运行时确定数组的大小。但它必须知道构造向量的大小：

```
// (wrong code)
// Passing one element:
Visual visual;
m_renderingEngine->Render(&visual);

// Passing two elements, how does Render know that
// there are two elements at that address?
Visual[2] visuals;
m_renderingEngine->Render(&visuals[0]); 
```

正如 Nawaz 指出的，您可以在 C++11 中执行类似的操作：

```
Visual visual;
m_renderingEngine->Render( {visual} ); // C++11 
```

您还可以在`{}`. 这只起作用，因为编译器可以在编译时告诉有多少元素。它只是语法糖：

```
vector<Visual> myVec = {visual};  // C++11
m_renderingEngine->Render(myVec); 
```

反过来又像经典一样工作：

```
vector<Visual> myVec;
myVec.push_back(visual);
m_renderingEngine->Render(myVec); 
```

（虽然 C++11 版本可能会稍微优化，但我不确定）。

# mysql - SQL Query 需要通过连接更多表来在 MySQL 中按 TYPE 和 PERCENTAGE 分组的两列中获得结果

> ID：14172282
> 
> 赞同：0
> 
> 时间：2013-01-05T13:37:23.453
> 
> 标签：mysql, sql, join, percentage, pie-chart

在 MySql 数据库中，我必须进行一些棘手的查询。我必须只在两列中得到结果（类型（项目、支持、教育）和价值（例如 60 和 40））

我有包含类型的静态表：

```
T1

ID  TYPE
1   PROJECT
2   PROJECT
3   PROJECT
4   SUPPORT
5   EDUCATION 
```

我有静态表 T2，其中包含具有某些类型值的所有任务：

```
 T2

  TASK    T1ID

    1      1
    2      1
    3      2
    4      3 
    5      4
    6      5 
```

T3 是带有一些 IDS 的已创建任务的动态表。

```
T3 

ID
1
2
3
4
5
6 
```

T4 表包含谁创建了这些任务的信息。

```
T4

T3ID     Name
1       Bob Marley
2       Bob Marley
3       Bob Marley
4       Bob Marley
5       Tom Cruise
6       Bob Marley 
```

最后 T5 包含来自 T2 和 T3 的信息

```
T5

TASK    T3ID
  1       1
  2       2
  3       3
  5       4
  1       5
  5       6 
```

对于某些特定的人（总是一个人——在这个例子中是 Bob Marley 或 Tom Cruise），我必须以百分比统计他们在项目、支持或教育方面工作了多少。

所以我会选择 Bob Marley——他的 T3ID 是 1、2、3、4 和 6。

在表 5 中，他的任务 ID 是 1、2、3、5 和 5。

因此，当我查看表 T2 时，他的 T1 ID 是 1、1、2、4 和 4。这意味着 Bob Marley 从事 3 个项目和 2 个支持任务。

所以当我选择 Bob Marley 时，结果应该是：

```
PROJECT  60
SUPPORT  40 
```

这是查询的最终结果。我怎样才能做到这一点？我知道它必须是几个 JOIN 语句，当然你可以在 WHERE 子句中使用

```
where name='Bob Marley' 
```

如果我把

```
 `where name=Tom Cruise 
```

结果应该是

```
PROJECT 100` 
```

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-05T13:51:12.477

我认为这就是你要找的：

```
SELECT 
  t4.Name,
  SUM(CASE WHEN t1.type = 'PROJECT'   THEN 1 ELSE 0 END) * 100 / COUNT(t1.type) Project,
  SUM(CASE WHEN t1.type = 'SUPPORT'   THEN 1 ELSE 0 END) * 100 / COUNT(t1.type) SUPPORT,
  SUM(CASE WHEN t1.type = 'EDUCATION' THEN 1 ELSE 0 END) * 100 / COUNT(t1.type) Education
FROM T1
INNER JOIN T2 ON t1.ID = t2.T1ID
INNER JOIN t5 ON t2.task = t5.task
INNER JOIN t3 ON t3.id = t5.t3id
INNER JOIN t4 ON t3.Id = t4.t3id
GROUP BY t4.Name; 
```

## [SQL 小提琴演示](http://sqlfiddle.com/#!2/25097/4)

这会给你：

```
|       NAME | PROJECT | SUPPORT | EDUCATION |
----------------------------------------------
| Bob Marley |      60 |      40 |         0 |
| Tom Cruise |     100 |       0 |         0 | 
```

对于您发布的示例数据。

**请注意：**这只会为您`Name`提供项目和任务中涉及的内容。您可能需要`OUTER JOIN(LEFT or RIGHT)`在表中而不是`INNER JOIN`包含那些`Name`未参与任何任务或项目的 s（不匹配的行），用`IFNULL()`to 替换`NULL`s 为零。

* * *

## 更新：

您可以使用该`CONCAT()`函数来执行此操作，但如果您将先前的查询包含在子查询中并在外部查询中执行此操作，则会更容易和更易读，如下所示：

```
SELECT
  Name,
  CONCAT(CAST(project   AS DECIMAL(10, 2)), ' AND ', 
         CAST(support   AS DECIMAL(10, 2)), ' AND ', 
         CAST(education AS DECIMAL(10, 2))) AS Percentage
FROM
(
  SELECT 
    t4.Name,
    SUM(CASE WHEN t1.type = 'PROJECT' THEN 1 ELSE 0 END) * 100 / COUNT(t1.type) Project,
    SUM(CASE WHEN t1.type = 'SUPPORT' THEN 1 ELSE 0 END) * 100 / COUNT(t1.type) SUPPORT,
    SUM(CASE WHEN t1.type = 'EDUCATION' THEN 1 ELSE 0 END) * 100 / COUNT(t1.type) Education
  FROM T1
  INNER JOIN T2 ON t1.ID = t2.T1ID
  INNER JOIN t5 ON t2.task = t5.task
  INNER JOIN t3 ON t3.id = t5.t3id
  INNER JOIN t4 ON t3.Id = t4.t3id
  GROUP BY t4.Name
) t; 
```

## [更新的 SQL Fiddle 演示](http://sqlfiddle.com/#!2/25097/8)

这会给你：

```
|       NAME |               PERCENTAGE |
-----------------------------------------
| Bob Marley | 60.00 AND 40.00 AND 0.00 |
| Tom Cruise | 100.00 AND 0.00 AND 0.00 | 
```

您可以添加`WHERE`子句以将此值限制为仅`WHERE Name = 'Some name'`在外部查询或子查询中的任何用户名。

* * *

## 更新 2

好的，对不起，我错过了。不需要`PIVOT`or`CONCAT()`或动态 SQL 来执行此操作。你可以这样做：

```
SELECT 
  t1.type,
  COUNT(t2.task) * 100 / 
  (SELECT COUNT(*)
   FROM T4 t 
   WHERE t4.Name = t.Name) AS Percentage
FROM T1
INNER JOIN T2 ON t1.ID = t2.T1ID
INNER JOIN t5 ON t2.task = t5.task
INNER JOIN t3 ON t3.id = t5.t3id
INNER JOIN t4 ON t3.Id = t4.t3id
WHERE t4.Name = 'Bob Marley' 
GROUP BY t4.Name, t1.type; 
```

## [更新的 SQL Fiddle 演示](http://sqlfiddle.com/#!2/25097/22)

这会给你：

```
|    TYPE | PERCENTAGE |
------------------------
| PROJECT |         60 |
| SUPPORT |         40 | 
```

# c++ - C++ 中的 reinterpret_cast

> ID：14172283
> 
> 赞同：-2
> 
> 时间：2013-01-05T13:37:25.607
> 
> 标签：c++, pointers, pointer-conversion

```
 uint32_t r,g,b;
 r = (uint32_t)145;
 g = (uint32_t)131;
 b = (uint32_t)139;
 uint32_t rgb = ((uint32_t)r << 16 | (uint32_t)g << 8 | (uint32_t)b);
 float rgbf = *reinterpret_cast<float*>(&rgb);

 uint32_t rgbnew = *(reinterpret_cast<uint32_t *>(&rgbf));
 uint8_t rnew = (rgbnew >> 16) & 0x0000ff;
 uint8_t gnew = (rgbnew >> 8) & 0x0000ff;
 uint8_t bnew = (rgbnew) & 0x0000ff; 
```

当我尝试运行此代码时，行出现分段错误

> uint32_t rgb = ((uint32_t)r << 16 | (uint32_t)g << 8 | (uint32_t)b);

事实上，在某个地方运行正常。在另一个地方，它给出了段错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T13:41:24.203

请尝试使用所有警告和调试信息（例如，`g++ -Wall -g`在 Linux 上）编译您的代码，并对其进行改进，直到没有给出警告。学习使用调试器（即`gdb`在 Linux 上）

我猜错误可能出在

```
 float rgbf = *reinterpret_cast<float*>(&rgb); 
```

`rgb`因为如果（即`uint32_t`）并且`float`没有相同的对齐或大小约束，这可能会触发错误。某些系统（处理器、ABI、编译器）可能对它们有不同且不兼容的约束。

* * *

顺便说一句，您的代码在 Debian/GNU/Linux/x86-64 上的 GCC 4.7 上运行良好，调用为

```
 g++-4.7 -std=c++11 -Wall -g ramji.cc -o ramji 
```

当我有

```
 #include <cstdint>
 #include <iostream>

 int main(int argc, char**argv)
 {
   uint32_t r,g,b;
   r = (uint32_t)145;
   g = (uint32_t)131;
   b = (uint32_t)139;
   std::cout << "r=" << r << " g=" << g << " b=" << b << std::endl;
   uint32_t rgb = ((uint32_t)r << 16 | (uint32_t)g << 8 | (uint32_t)b);
   std::cout << "rgb=" << rgb << std::endl;
   float rgbf = *reinterpret_cast<float*>(&rgb);
   std::cout << "rgbf=" << rgbf << std::endl;
   uint32_t rgbnew = *(reinterpret_cast<uint32_t *>(&rgbf));
   std::cout << "rgbnew=" << rgb << std::endl;
   uint8_t rnew = (rgbnew >> 16) & 0x0000ff;
   uint8_t gnew = (rgbnew >> 8) & 0x0000ff;
   uint8_t bnew = (rgbnew) & 0x0000ff;
   std::cout << "rnew=" << rnew << " gnew=" << gnew 
        << " bnew=" << bnew << std::endl;
   return 0;
 } 
```

没有警告，执行时没有崩溃。

请注意，这`<cstdint>`需要符合[C++11的编译器。](http://en.wikipedia.org/wiki/C++11)

# php - AJAX 请求不正确

> ID：14172284
> 
> 赞同：0
> 
> 时间：2013-01-05T13:37:36.237
> 
> 标签：php, ajax, jquery

我是 AJAX 的新手。我想通过 JavaScript 在文件中写入单选按钮的值，根据我的搜索，这是不可能的。为此，我正在向 php 的函数发送 AJAX 请求。以下是我的 AJAX 请求。

```
 $.ajax({
     url: "/modules/orffinder/write_file",
     type: "POST",
     data: "id=radios[i].value",
     success: function(msg){
     alert(msg);
     window.opener.runNextModule (msg);
 }
 }); 
```

我的php函数是

```
function write_file()
{
    $id = $_POST['id'];
    echo "The id is ".$id;
    $myFile = "/var/www/Bioinfo12/testFile.txt";
    $fh = fopen($myFile, 'w') or die("can't open file");
    fwrite($fh, $id);
    fclose($fh);
 } 
```

但是这段代码的问题是它根本没有运行，可能是它的语法错误。如何摆脱这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T13:42:26.737

你不能在 js 中的 "" 中使用 var，你应该这样做：

```
data: "id="+radios[i].value 
```

您可以在浏览器控制台中看到您的错误，例如 chrome 中的 F12。

有一些原因：

```
1.the url is not right "module/xxxx" is diffrent from "/module/xxxx"

2.the php script occur error. 
```

所以你可以从浏览器获取信息，看是404，或者php返回错误信息

哦...在 php 中：

```
echo "The id is ".id; 
```

应该是：

```
echo "the id is ". $id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T13:42:58.220

PHP 文件的 URL 是否正确？应该有一个 PHP 扩展。“模块/orffinder.php”

Javascript 无法直接调用 PHP 函数。`write_file`每当访问页面时，都应自动调用该函数。

# javascript - 无法旋转文本d3js

> ID：14172287
> 
> 赞同：3
> 
> 时间：2013-01-05T13:37:56.557
> 
> 标签：javascript, svg, d3.js, label, sunburst-diagram

我正在尝试将文本添加到[partition-sunburst 示例](http://bl.ocks.org/4063423)。我遵循了 Google Group 上给出的提示，并且能够添加文本。现在我想旋转它。新的角度似乎是正确的，但所有的文字都集中在一个点上。

这是我添加和旋转文本的一段代码：

```
var text = vis.data([json]).selectAll("text")
    .data(partition.nodes)
      .enter().append("svg:text")
        .attr("x", function(d) { return radius * Math.cos(d.x + d.dx/2); } )
        .attr("y", function(d) { return radius * Math.sin(d.x + d.dx/2); } )
        .attr("dy", ".31em")
        .style("font-size", "5px")
        .attr("transform", function(d) {
          var angle = (2 * Math.PI - d.x) * (180/Math.PI);
          var rotation = "rotate(" + angle + ")";
          console.log(rotation);
          console.log("d.x=" + d.x + ", d.y=" + d.y);
          return rotation;
        })
        .text(function(d) { return d.name; }); 
```

这是我得到的图像：

![在此处输入图像描述](../Images/3fd751691342aa0f405ed1a8caa2b368.png)

这是完整的脚本：

```
var width = 1000,
    height = 1000,
    radius = 350,
    x = d3.scale.linear().range([0, 2 * Math.PI]),
    y = d3.scale.pow().exponent(1.3).domain([0, 1]).range([0, radius]),
    padding = 5,
    color = d3.scale.category20c();

var vis = d3.select("#chart").append("svg")
    .attr("width", width)
    .attr("height", height)
  .append("g")
    .attr("transform", "translate(" + width / 2 + "," + height / 2 + ")");

var partition = d3.layout.partition()
    .sort(null)
    .size([2 * Math.PI, radius * radius])
    .value(function(d) { return 1; });

var arc = d3.svg.arc()
    .startAngle(function(d) { return d.x; })
    .endAngle(function(d) { return d.x + d.dx; })
    .innerRadius(function(d) { return Math.sqrt(d.y); })
    .outerRadius(function(d) { return Math.sqrt(d.y + d.dy); });

d3.json("fracking.json", function(json) {
  var path = vis.data([json]).selectAll("path")
      .data(partition.nodes)
    .enter().append("svg:path")
      .attr("display", function(d) { return d.depth ? null : "none"; })
      // hide inner ring
      .attr("d", arc)
      .attr("fill-rule", "evenodd")
      .style("stroke", "#fff")
      .style("fill", function(d) { return color((d.children ? d : d.parent).name); })
  .each(stash);

   var text = vis.data([json]).selectAll("text")
    .data(partition.nodes)
      .enter().append("svg:text")
        .attr("x", function(d) { return radius * Math.cos(d.x + d.dx/2); } )
        .attr("y", function(d) { return radius * Math.sin(d.x + d.dx/2); } )
        .attr("dy", ".31em")
        .style("font-size", "5px")
        .attr("transform", function(d) {
          var angle = (2 * Math.PI - d.x) * (180/Math.PI);
          var rotation = "rotate(" + angle + ")";
          console.log(rotation);
          console.log("d.x=" + d.x + ", d.y=" + d.y);
          return rotation;
        })
        .text(function(d) { return d.name; });

  d3.select("#size").on("click", function() {
    path
        .data(partition.value(function(d) { return d.size; }))
      .transition()
        .duration(1500)
        .attrTween("d", arcTween);
    d3.select("#size").classed("active", true);
    d3.select("#count").classed("active", false);
  });
  d3.select("#count").on("click", function() {
    path
        .data(partition.value(function(d) { return 1; }))
      .transition()
        .duration(1500)
        .attrTween("d", arcTween);
    d3.select("#size").classed("active", false);
    d3.select("#count").classed("active", true);
  });
});

// Stash the old values for transition.
function stash(d) {
  d.x0 = d.x;
  d.dx0 = d.dx;
}

// Interpolate the arcs in data space.
function arcTween(a) {
  var i = d3.interpolate({x: a.x0, dx: a.dx0}, a);
  return function(t) {
    var b = i(t);
    a.x0 = b.x;
    a.dx0 = b.dx;
    return arc(b);
  };
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T20:58:39.330

我认为您需要指定旋转中心。试试这个：

```
var text = vis.data([json]).selectAll("text")
.data(partition.nodes)
  .enter().append("svg:text")
    .attr("x", function(d) { return radius * Math.cos(d.x + d.dx/2); } )
    .attr("y", function(d) { return radius * Math.sin(d.x + d.dx/2); } )
    .attr("dy", ".31em")
    .style("font-size", "5px")
    .attr("transform", function(d) {
      var angle = (2 * Math.PI - d.x) * (180/Math.PI);
      var rotation = "rotate(" + angle + "," + d3.select(this).attr("x") + "," d3.select(this).attr("y") +")";
      console.log(rotation);
      console.log("d.x=" + d.x + ", d.y=" + d.y);
      return rotation;
    })
    .text(function(d) { return d.name; }); 
```

# javascript - 如何更改网页上一个特定字母的颜色（换行）？

> ID：14172290
> 
> 赞同：1
> 
> 时间：2013-01-05T13:38:19.083
> 
> 标签：javascript, html, css, greasemonkey, word-wrap

我想将一个字母（我们称之为“n”）更改为不同的颜色，比如黄色。我希望在所有页面以及所有字体和大小上完成此操作。

我找到了 Greasemonkey 的[这个脚本](http://greasemonkey.win-start.de/casestudy/dumbquotes.html)，我认为可以修改它来做我想做的事。

我尝试用 替换字母“n” `"<p style="color:#FFB90F">n</p>"`，但无济于事。它只是被插入到页面中而不被评估为 CSS。

我怎样才能做到这一点？我希望能够指定字母和颜色列表。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T01:32:43.597

这是一个常见的问题，请注意使用`.innerHTML`or的答案`.html()`。这些将破坏页面的 HTML（用无效字符串替换部分标签）和/或页面功能可能需要的孤立事件处理程序。

一个健壮的解决方案将使用 DOM 技术来仅修改文本节点。

下面的**完整脚本**使用了标准的`wrapTextWithElement()`函数。
您可以在[此 jsFiddle](http://jsfiddle.net/jpmdK/)中查看正在运行的代码。

```
// ==UserScript==
// @name     Wrapping/Coloring letters in an HTML page
// @include  http://YOUR_SERVER.COM/YOUR_PATH/*
// @require  http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js
// @grant    GM_addStyle
// ==/UserScript==

//-- Use CSS, *not* inline styles to color/style things
GM_addStyle ( "                                 \
    span.coloredLetter {                        \
        background: yellow;                     \
    }                                           \
" );

var letI_Wrapper    = new wrapTextWithElement ('i', '<span class="coloredLetter">');
letI_Wrapper.wrap (document.body); // Here we wrap everything.

function wrapTextWithElement (targText, elemToWrapWith, bCaseSensitive) {
    var self            = this;
    var bCaseSensitive  = bCaseSensitive || false;
    self.targRegEx      = new RegExp ("(" + targText + ")", bCaseSensitive ? "" : "i");
    self.elemToWrapWith = elemToWrapWith;

    self.wrap = function (node) {
        $(node).contents ().each ( function () {
            if (this.nodeType === Node.ELEMENT_NODE) {
                self.wrap (this);
            }
            else if (this.nodeType === Node.TEXT_NODE) {
                var ndText  = this.nodeValue;

                if (self.targRegEx.test (ndText) ) {
                    var replaceNodes = $.map (
                        ndText.split (self.targRegEx),
                        function (phrase) {
                            if (self.targRegEx.test (phrase) ) {
                                /*  The $(HTML, props) form does not work if the HTML
                                    has attributes
                                var wrapped = $(self.elemToWrapWith, {text: phrase} );
                                */
                                var wrapped = $(self.elemToWrapWith).text (phrase);

                                return wrapped.get ();
                            }
                            else {
                                if (phrase == "")
                                    return null;
                                else
                                    return document.createTextNode (phrase)
                            }
                        }
                    );
                    $(this).replaceWith (replaceNodes);
                }
            }
        } );
    };
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T13:48:27.570

我知道这不完全是您的问题，但也许它可以帮助您[http://letteringjs.com/](http://letteringjs.com/)。每个字母都有一个自己`span`的一个类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-05T15:25:29.307

你可以使用 jQuery 并尝试这样的事情：

```
$('p:contains(n)').each(function() {
   $(this).html(
      $(this).html().replace('n', '<span style="color:#F00;">n</span>')
   );
}); 
```

这只会在任何 p 标签中找到字母“n”，因此您需要进行调整以满足您的需求。

`#F00``red`以十六进制表示颜色

# jquery-mobile - Jquery mobile中的标题链接不起作用

> ID：14172291
> 
> 赞同：1
> 
> 时间：2013-01-05T13:38:24.283
> 
> 标签：jquery-mobile

我在移动网站上使用以下内容，但是当我单击主页按钮时，我只是得到了加载圈，而我试图访问的页面永远不会解析：

```
<div data-role="header" data-theme="b" style="height:50px; padding:3px;">
    <img src="/m/images/logo2.png">
    <a href="/m/" class="ui-btn-right" data-icon="home" data-iconpos="notext" 
       data-direction="reverse">Home</a> 
</div> 
```

这是我正在使用的版本：

```
<link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
<script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
<script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script> 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T14:30:31.227

即使您在 href 中使用绝对路径，也不能像这样使用它：

```
<a href="/m/" class="ui-btn-right" data-icon="home" data-iconpos="notext" 
   data-direction="reverse">Home</a> 
```

您需要将其指向您的域页面：

```
<a href="index.html" class="ui-btn-right" data-icon="home" data-iconpos="notext" 
   data-direction="reverse">Home</a> 
```

或者给你的内页：

```
<a href="#index" class="ui-btn-right" data-icon="home" data-iconpos="notext" 
   data-direction="reverse">Home</a> 
```

**data-direction="reverse"**只能用作反向转换，但与**back-btn="true"**不同的是，您需要提供真实和现有的 href。

# objective-c - 如何使用 SUBVIEWS 动画缩放 UIView？

> ID：14172292
> 
> 赞同：2
> 
> 时间：2013-01-05T13:38:28.687
> 
> 标签：objective-c, ios, cocoa-touch, uiview, uiviewanimation

这段代码执行以下操作：它需要一个 NavigationController 的“快照”，它意味着要消失。然后将快照添加到容器视图控制器的视图中，滑开并显示新的 NavigationController。为了创建“弹出效果”，*midAnFrame*使视图比实际视图大一点。之后*postAnFrame*提供了从容器视图的框架中滑出的功能。效果很好，唯一的问题是动画容器的子视图在*动画*期间不会像它们的 superView 那样调整大小。

```
- (void)bringUpSettingsNavigationController {
CGFloat gradientWidth = 20;
CGFloat frameIncrease = 10;
CGRect preAnFrame  = CGRectMake(- gradientWidth, 0, self.view.frame.size.width + gradientWidth, self.view.frame.size.height);
CGRect midAnFrame  = CGRectMake(-(frameIncrease + gradientWidth), - frameIncrease, preAnFrame.size.width + (2*frameIncrease), preAnFrame.size.height + (2*frameIncrease));
CGRect postAnFrame = CGRectMake(midAnFrame.size.width, midAnFrame.origin.y, midAnFrame.size.width, midAnFrame.size.height);

UIView *animationContainer = [[UIView alloc]initWithFrame:preAnFrame];
animationContainer.backgroundColor = [UIColor clearColor];
animationContainer.autoresizesSubviews = YES;

self.topImageView = [[UIImageView alloc]initWithImage:[self topImageFromView:self.view]];
self.topImageView.frame = CGRectMake(gradientWidth, 0, preAnFrame.size.width - gradientWidth, preAnFrame.size.height);
[animationContainer addSubview:self.topImageView];
self.topImageView.clipsToBounds = YES;
UIView *gradientView = [[UIView alloc]initWithFrame:CGRectMake(0, 0, gradientWidth, preAnFrame.size.height)];
CAGradientLayer *gradientLayer = [CAGradientLayer layer];
gradientLayer.frame = gradientView.bounds;
gradientLayer.colors = [NSArray arrayWithObjects:(id)[[UIColor clearColor] CGColor], (id)[[UIColor colorWithWhite:0 alpha:.5] CGColor], nil];
gradientLayer.startPoint = CGPointMake(0, 0.5);
gradientLayer.endPoint = CGPointMake(1.0, 0.5);
[gradientView.layer insertSublayer:gradientLayer atIndex:0];
gradientView.backgroundColor = [UIColor clearColor];
[animationContainer addSubview:gradientView];
gradientView.clipsToBounds = YES;

[self.view addSubview:animationContainer];

BYSettingsNavigationController *settingsNavigationController = [[BYSettingsNavigationController alloc]initWithRootViewController:[[BYSettingsViewController alloc]init]];
[self addChildViewController:settingsNavigationController];
settingsNavigationController.view.frame = self.view.bounds;
[self.view insertSubview:settingsNavigationController.view belowSubview:animationContainer];
[settingsNavigationController didMoveToParentViewController:self];

[UIView animateWithDuration:0.2 animations:^{
    animationContainer.frame = midAnFrame;
} completion:^(BOOL finished) {
    [UIView animateWithDuration:.5 animations:^{
        animationContainer.frame = postAnFrame;
    } completion:^(BOOL finished) {
        [self.topImageView removeFromSuperview];
        [gradientView removeFromSuperview];
        self.topImageView = nil;
    }];
}];

[self.currentNavigationController willMoveToParentViewController:nil];
[self.currentNavigationController.view removeFromSuperview];
[self.currentNavigationController removeFromParentViewController];
} 
```

![检查右下角](../Images/54a5c11c7fbcfa47292283dad5eb616d.png)

提前感谢您的想法，祝您 2013 年愉快！

达里奥

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T15:02:06.117

你所做的不是放大，你只是改变帧大小。要放大，您需要更改视图的转换。

你需要做的是沿着这条线：

`view.transform = CGAffineTransformMakeScale (2.0 , 2.0);`

例如缩放 X2

# heartbeat - Pacemaker 资源在状态更改期间停止和启动

> ID：14172297
> 
> 赞同：0
> 
> 时间：2013-01-05T13:38:38.387
> 
> 标签：heartbeat

在将状态从托管更改为非托管并反转时观察资源正在停止和启动。

mysql [20932]：2012/09/01_11:17:03 信息：MySQL 已启动

这是正常的还是我需要查看集群上的任何特定配置。运行心跳 3.0.3 和起搏器 1.0.11。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T22:46:17.860

从托管更改为非托管不应启动或停止资源。但请查看起搏器 1.0.12 的变更日志：[https](https://github.com/ClusterLabs/pacemaker-1.0/blob/master/ChangeLog) ://github.com/ClusterLabs/pacemaker-1.0/blob/master/ChangeLog “高：PE：确保为非托管资源保留角色”

所以也许你遇到了一个错误。我建议升级到 1.0.12，甚至可能升级到当前的 1.1.x 版本的起搏器。

# ruby-on-rails - 使用 Devise 登录后出现“找不到没有 ID 的用户”错误

> ID：14172301
> 
> 赞同：1
> 
> 时间：2013-01-05T13:38:51.007
> 
> 标签：ruby-on-rails, ruby, html, devise, ruby-on-rails-3.2

我已经开始构建一个简单的 Rails 应用程序并使用 Devise 进行身份验证。我在用户登录后为他们创建了一个仪表板页面，它使用下面添加的 users_contoller：

```
class UserController < ApplicationController
    before_filter :authenticate_user!

    def show
        @user = User.find(params[:id])
    end
end 
```

我已将此用户#show 重命名为路线中的仪表板：

```
match '/dashboard', to: 'user#show' 
```

我在 User show html 页面中创建了一个 if else 语句来查看它是否有效，如下所示：

```
<% if @user.lists.any? %>
    Cool you have lists
<% else %>
    OK No Lists
    <%= @user[:id] %>
<% end %> 
```

不幸的是，这只是在尝试在浏览器中加载页面时呈现错误

```
 Couldn't find User without an ID 
```

我不确定这是否只是一个设计设置或更基本的东西，如果这是一个非常菜鸟的问题，请提前道歉。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T13:49:32.963

当使用 devise 对用户进行身份验证时，当前身份验证用户被“存储”在名为“current_user”的帮助程序中。

快速解决您的问题应该将“UserController”中的代码更改为类似这样（同时保留其余功能）：

```
class UserController < ApplicationController
    before_filter :authenticate_user!

    def show
        @user = params[:id].blank? ? current_user : User.find(params[:id])
    end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T16:09:16.067

您的路线： `match '/dashboard', to: 'user#show'`不包含`id`参数，您需要按照@Immendes 的建议进行操作并使用`current_user`帮助程序，否则将您的路线更改为： `match '/dashboard/:id', to: 'user#show'`并发送 id

# c++ - 只为静态变量分配一次内存

> ID：14172314
> 
> 赞同：4
> 
> 时间：2013-01-05T13:40:43.930
> 
> 标签：c++, c

> **可能重复：**
> [使用非常量初始化器定义全局变量](https://stackoverflow.com/questions/13785250/definition-of-global-variables-using-a-non-constant-initializer)

我有这个代码：

```
#include <stdio.h>
#include <stdlib.h>

int foo (int num, int i)
{
    static int* array = malloc(sizeof(int));  // ERROR HERE!!!
    printf("%d", array[i]);
    return 0;
}

int main(int argc, char *argv[])
{
    int i;
    for (i = 0; i < 2; i++) {
    foo(i, i);
    }

    return 0;
} 
```

我将代码保存为ac源文件，我不能工作？`error prompt`：_

```
gcc -O2 -Wall test.c -lm -o test
test.c:4:1: error: initializer element is not constant

Compilation exited abnormally with code 1 at Sat Jan 05 21:33:56 
```

但是，我将它保存为 C++ 源文件，它工作正常。为什么？有人可以向我解释吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-05T13:44:44.360

您不能`static`在 C 中使用非常量初始值设定项来初始化对象。

```
static int* array = malloc(sizeof(int));

                    ^ must be a constant 
```

来自 C 标准：

> （C99，6.7.8p4）“具有静态存储持续时间的对象的初始化程序中的所有表达式都应为常量表达式或字符串文字。”

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-05T13:57:39.373

`static`C 和 C++ 标准以不同的方式处理具有存储持续时间的对象的初始化。C++ 允许静态初始化（即使用常量初始化）和动态初始化（即使用非常量表达式初始化），而C 只允许静态初始化——即使用常量表达式。

C++ 标准的相关部分是 6.7.4：

> 具有静态存储持续时间 (3.7.1) 的所有本地对象的零初始化 (8.5) 在任何其他初始化发生之前执行。一个 POD 类型（3.9）的本地对象，具有用常量表达式初始化的静态存储持续时间，在第一次进入它的块之前被初始化。[...]**否则，此类对象在控件第一次通过其声明时被初始化；这样的对象在其初始化完成时被认为已初始化。**（重点补充）

C++ 需要额外的“簿记”才能只运行一次初始化程序的动态部分（即调用`malloc`）。C标准中没有类似的“动态”规定：

> 所有具有静态存储持续时间的对象都应在程序启动之前进行初始化（设置为其初始值）。具有静态存储持续时间的对象的初始化程序中的所有表达式都应为常量表达式或字符串文字。

在没有并发的情况下，您可以重写代码以与 C 一起使用，如下所示：

```
int foo (int num, int i) {
    static int* array = NULL;
    if (!array) array = malloc(sizeof(int)); // No error
    printf("%d", array[i]);
    return 0;
} 
```

现在您的代码负责“簿记”：它在执行分配之前进行`array`检查。`NULL`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-05T13:46:33.373

C（与 C++ 不同）不允许使用非常量值初始化静态持续时间变量。

```
static int* array = malloc(sizeof(int));  // ERROR HERE!!! 
```

**C99 标准：第 6.7.8 节：**

> 具有静态存储持续时间的对象的初始化程序中的所有表达式都应为常量表达式或字符串文字。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-05T13:58:17.940

它在 C 中是非法的，但在 C++ 中是可以的，它们是不同的

可以改写如下：

```
static int* array = NULL;
if (array == NULL)
    array = malloc(sizeof(int)); 
```

# android - 图像比较器返回 false

> ID：14172321
> 
> 赞同：1
> 
> 时间：2013-01-05T13:41:35.507
> 
> 标签：android, image-processing, bitmap, duplicates

所以，我在 Android 上使用文件共享应用程序。它会创建一个复制副本，并将其上传到它的服务器。

**问题** 以下代码适用于我手动创建的重复副本。也就是说，我长按并使用文件管理器将文件复制到同一目录中。然后我的函数返回`true`。当它比较由于应用程序和原始图像而导致的重复图像时，我得到`false`.

MD5 校验和不同，因此无法选择。

**代码**

```
 public boolean equals(Bitmap bitmap1, Bitmap bitmap2) {
        ByteBuffer buffer1 = ByteBuffer.allocate(bitmap1.getHeight()
                * bitmap1.getRowBytes());
        bitmap1.copyPixelsToBuffer(buffer1);

        ByteBuffer buffer2 = ByteBuffer.allocate(bitmap2.getHeight()
                * bitmap2.getRowBytes());
        bitmap2.copyPixelsToBuffer(buffer2);

        return Arrays.equals(buffer1.array(), buffer2.array());
    } 
```

以下是图片：

原始图像 -[![原来的](../Images/7a4b97c8693b4b41d00b42e782af6b3c.png)](https://i.stack.imgur.com/XIpUv.jpg)

应用程序创建的重复图像 -[![复制](../Images/2ecd87953c6228c8fa76d1c3e94720a5.png)](https://i.stack.imgur.com/4szHj.jpg)

我的代码目前在比较这两个图像时返回 false。如何让代码返回 true？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T13:52:57.277

您的问题是由于 JPEG 压缩造成的伪影，如果您始终可以将图像保存为 PNG，那么您的问题很可能已解决。如果你不能这样做，那么你需要一个更好的算法来比较图像。[这与Comparing image in url to image in filesystem in python 中](https://stackoverflow.com/questions/13875989/comparing-image-in-url-to-image-in-filesystem-in-python/13884956#13884956)讨论的问题完全相同

例如，运行前面讨论中提到的算法，我们得到超过 99% 的相似度。使用该相似度值，您可以说图像是相同的。

# php - 过滤特殊字符

> ID：14172327
> 
> 赞同：0
> 
> 时间：2013-01-05T13:42:31.893
> 
> 标签：php

我想检查一个字符串是否有一些特殊字符并将它们删除。

如何添加反斜杠`\`和斜杠`/`和`~|%*|'`,`#`来`""`检查所有特殊字符

我需要类似的东西

```
preg_match('/\\\\/', $string); 
```

你能帮助我吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T14:13:34.217

像这样试试

```
preg_match('/[\'^£$%&*()}{@#~?><>,|=_+¬-]/', $string); 
```

它可能会帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T13:47:27.443

使用 preg_replace 并确保使用反斜杠转义点 (.) 等特殊字符。

然后你应该有类似的东西：

```
preg_replace('/[%\.&#-]/s', '', $String); 
```

# java - IOException 未捕获 java.net.UnknownHostException：

> ID：14172328
> 
> 赞同：3
> 
> 时间：2013-01-05T13:42:39.980
> 
> 标签：java, exception, httpclient, ioexception

所以我创建了一个向网站发送请求的小方法，我想确保它不会崩溃。当我断开互联网并调用该方法时，我得到一个`java.net.UnknownHostException:`，但我无法捕捉到它。我究竟做错了什么？

给出问题 atm 的行是`HttpResponse response = httpclient.execute(httppost);`

我什至在 IO 之前处理 ClientProtocolException（IO 的子类），所以我可以同时拥有两个 catch 块。我也尝试过`throws clauses`为 high level添加`Exception e`。这是我的代码：

```
public String connect(String username, String password) {
    String answer = "Could not connect to server, please check your internet connect or try later.";
    try {
        DefaultHttpClient httpclient = new DefaultHttpClient();
        HttpPost httppost = new HttpPost(baseurl);
        // Request parameters and other properties.
        List<NameValuePair> params = new ArrayList<NameValuePair>(2);
        params.add(new BasicNameValuePair("usernameUS", username));
        params.add(new BasicNameValuePair("passwordUS", password));
        httppost.setEntity(new UrlEncodedFormEntity(params, "UTF-8"));

        // Execute and get the response.
        HttpResponse response = httpclient.execute(httppost);
        HttpEntity entity = response.getEntity();

        if (entity != null) {
            answer = EntityUtils.toString(entity, charset);
            try {
                if (answer.equals("Authenticated")) {
                    this.password = password;
                    this.username = username;
                    Authenticated = true;
                    return answer;
                } else {
                    return answer;
                }
            } finally {
            }
        }
        return "Could not connect to server, please try later.";
    } catch (ClientProtocolException ex) {
        Logger.getLogger(Connection.class.getName()).log(Level.SEVERE,
                null, ex);
        return answer;
    } catch (IOException ex) {
        Logger.getLogger(Connection.class.getName()).log(Level.SEVERE,
                null, ex);
        return answer;
    }
} 
```

还有一个例外：

```
java.net.UnknownHostException: www.example.com
    at java.net.Inet6AddressImpl.lookupAllHostAddr(Native Method)
    at java.net.InetAddress$1.lookupAllHostAddr(InetAddress.java:866)
    at java.net.InetAddress.getAddressesFromNameService(InetAddress.java:1258)
    at java.net.InetAddress.getAllByName0(InetAddress.java:1211)
    at java.net.InetAddress.getAllByName(InetAddress.java:1127)
    at java.net.InetAddress.getAllByName(InetAddress.java:1063)
    at org.apache.http.impl.conn.SystemDefaultDnsResolver.resolve(SystemDefaultDnsResolver.java:45)
    at org.apache.http.impl.conn.DefaultClientConnectionOperator.resolveHostname(DefaultClientConnectionOperator.java:278)
    at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:162)
    at org.apache.http.impl.conn.ManagedClientConnectionImpl.open(ManagedClientConnectionImpl.java:294)
    at org.apache.http.impl.client.DefaultRequestDirector.tryConnect(DefaultRequestDirector.java:640)
    at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:479)
    at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:906)
    at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:805)
    at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:784)
    at usclient.Connection.connect(Connection.java:65) 
```

工作代码：

```
public class Connection {
private static Connection conn;
String username, fileURL;
String baseurl = "http://www.example.com";
String content, password = "";
String charset = "UTF-8";
HttpURLConnection request;
URL url;
OutputStreamWriter post;
BufferedReader in;

private Connection()    {
}

public static Connection getInstance()  {
    if(conn==null)  {
        conn = new Connection();
    }
    return conn;
}

public String connect(String username, String password){
    String answer = "Could not connect to server, please check your internet connect or try later.";
    try {
        DefaultHttpClient httpclient = new DefaultHttpClient();
        HttpPost httppost = new HttpPost(baseurl);
        // Request parameters and other properties.
        List<NameValuePair> params = new ArrayList<NameValuePair>(2);
        params.add(new BasicNameValuePair("usernameUS", username));
        params.add(new BasicNameValuePair("passwordUS", password));
        httppost.setEntity(new UrlEncodedFormEntity(params, "UTF-8"));

        //Execute and get the response.
        HttpResponse response = httpclient.execute(httppost);
        HttpEntity entity = response.getEntity();
        if (entity != null) {
            String[] data = EntityUtils.toString(entity, charset).split("\\n");
            answer = data[0];
            try {
                if(answer.contentEquals("Authenticated")) {
                    this.password = password;
                    this.username = username;
                    if(data.length<1)
                        fileURL = data[1];
                    return data[0];
                }
                else {
                    return answer;
                }
            } finally {
            }
        }
        return "Could not connect to server, please try later.";
    } catch (ClientProtocolException ex) {
        Logger.getLogger(Connection.class.getName()).log(Level.SEVERE, "Exception caught:", ex);
        return empty;
    } catch (IOException ex) {
        Logger.getLogger(Connection.class.getName()).log(Level.SEVERE, "Exception caught:", ex);
        return empty;
    } 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T11:10:54.753

我敢肯定，这个问题应该被关闭。为什么？

我刚刚检查了您提供的有问题的来源。

您的最后一个版本的课程`Connection`甚至不想编译。Java 向声明抱怨`return empty;`。这个变量是什么`empty`？

好的，即使更改`return empty;`为`return answer;`（例如） - 一切正常。

例如，如果我尝试连接到`http://www.fdsfsaddsfsddsafasd.com`，则在最后一条语句`java.net.UnknownHostException`中成功捕获。`...catch(IOException ...`

我建议您完全重建您的项目，在调试模式下运行它并再次进行测试。

# macos - 在不覆盖 NSView 的情况下启用点击

> ID：14172329
> 
> 赞同：1
> 
> 时间：2013-01-05T13:42:51.313
> 
> 标签：macos, gtk, macos-carbon

启用点击的正确方法是在 NSView 上覆盖 AcceptFirstMouse 以返回 YES。（点进意味着你可以点击并使用一个控件，即使它的窗口没有聚焦。例如，Finder 工具栏按钮和交通灯窗口控件使用它。）

我的问题是我的应用程序不是基于 Cocoa，而是基于 GTK。在底层，GTK 使用了一些 Carbon 和 Cocoa，如果需要，我可以获得指向 NSView 的指针——但如果不编辑 GTK 源，我无法让小部件使用不同的 NSView 子类。还有什么其他方法可以实现点击？

（并且，如果可能的话，“悬停” - 我也想在点击控件上有鼠标悬停事件，所以我可以突出显示它们，告诉用户它们是可点击的。）

我可以用 kEventWindowGetClickActivation 调用 Carbon 的 InstallWindowEventHandler，但我不确定如何使用它，以及它是否可以工作（我已经阅读过 Carbon 已被弃用，可能不再适用于现代 Mac）。或者，必须有一个低级机制来实现这一点（必须以某种方式实现 Cocoa 机制）。有任何想法吗？

# opengl - 如何使用鼠标改变OpenGL相机

> ID：14172331
> 
> 赞同：3
> 
> 时间：2013-01-05T13:43:03.953
> 
> 标签：opengl, matrix, camera, mouse, shader

我正在尝试在 OpenGL 中设置一个相机来查看 3 维中的一些点。为了实现这一点，我不想使用旧的、固定的功能样式（glMatrixMode()、glTranslate 等），而是自己设置模型视图投影矩阵并在我的顶点着色器中使用它。正交投影就足够了。

很多关于这方面的教程似乎都使用了 glm 库，但由于我对 OpenGL 完全陌生，我想以正确的方式学习它，然后使用一些第三方库。此外，大多数教程没有描述如何使用 glMotionFunc() 和 glMouseFunc() 将相机定位在空间中。

所以，我想我正在寻找一些示例代码和指导如何在 3D 中查看我的观点。这是我写的顶点着色器：

```
const GLchar *vertex_shader =   // Vertex Shader
"#version 330\n"
"layout (location = 0) in vec4 in_position;"
"layout (location = 1) in vec4 in_color;"
"uniform float myPointSize;"
"uniform mat4 myMVP;"
"out vec4 color;"  
"void main()"  
"{"
"   color = in_color;"
"   gl_Position = in_position * myMVP;"
"   gl_PointSize = myPointSize;"
"}\0"; 
```

我在我的着色器设置方法中将 MVP 的初始值设置为单位矩阵，这为我提供了正确的 2D 表示点：

```
// Set up initial values for uniform variables
glUseProgram(shader_program);

location_pointSize = glGetUniformLocation(shader_program, "myPointSize");
glUniform1f(location_pointSize, 25.0f);

location_mvp = glGetUniformLocation(shader_program, "myMVP");
float mvp_array[16] = {1.0f, 0.0f, 0.0f, 0.0f,  // 1st column
                       0.0f, 1.0f, 0.0f, 0.0f,  // 2nd column
                       0.0f, 0.0f, 1.0f, 0.0f,  // 3rd column
                       0.0f, 0.0f, 0.0f, 1.0f   // 4th column
                      };
glUniformMatrix4fv(location_mvp, 1, GL_FALSE, mvp_array);

glUseProgram(0); 
```

现在我的问题是如何调整“motion”和“mouse”这两个函数，到目前为止，这两个函数只有前一个示例中的一些代码，其中使用了不推荐的执行方式：

```
// OLD, UNUSED VARIABLES
int mouse_old_x;
int mouse_old_y;
int mouse_buttons = 0;
float rotate_x = 0.0;
float rotate_y = 0.0;
float translate_z = -3.0;

...
// set view matrix
glMatrixMode(GL_MODELVIEW);
glLoadIdentity();
glTranslatef(0.0, 0.0, translate_z);
glRotatef(rotate_x, 1.0, 0.0, 0.0);
glRotatef(rotate_y, 0.0, 1.0, 0.0);
...

// OLD, UNUSED FUNCTIONS
void mouse(int button, int state, int x, int y)
{
    if (state == GLUT_DOWN)
    {
        mouse_buttons |= 1<<button;
    }
    else if (state == GLUT_UP)
    {
        mouse_buttons = 0;
    }

    mouse_old_x = x;
    mouse_old_y = y;
}

void motion(int x, int y)
{
    float dx, dy;
    dx = (float)(x - mouse_old_x);
    dy = (float)(y - mouse_old_y);

    if (mouse_buttons & 1)
    {
        rotate_x += dy * 0.2f;
        rotate_y += dx * 0.2f;
    }
    else if (mouse_buttons & 4)
    {
        translate_z += dy * 0.01f;
    }

    mouse_old_x = x;
    mouse_old_y = y;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-05T14:47:01.947

> 我想以正确的方式学习它，然后使用一些第三方库。

使用 GLM 并没有错，因为 GLM 只是一个处理矩阵的数学库。您想学习非常基础的知识是一件非常好的事情。这些天很少见的特征。在进行高级 OpenGL 时，了解这些内容是非常宝贵的。

好的，为您学习三件事：

1.  基本离散线性代数，即如何处理具有离散元素的矩阵和向量。标量和复杂的元素暂时就足够了。

2.  一点数字。您必须能够编写执行基本线性代数运算的代码：缩放和添加向量，执行向量的内积和外积。执行矩阵向量和矩阵矩阵乘法。反转矩阵。

3.  了解齐次坐标。

（4.如果你想增加趣味，学习四元数，那些东西很摇滚！）

在第 3 步之后，您就可以编写自己的线性数学代码了。即使你还不知道齐次坐标。只需编写它就可以有效地处理 4×4 维矩阵和 4 维向量。

一旦你掌握了齐次坐标，你就会明白 OpenGL 的实际作用。然后：*在编写自己的线性数学库时放弃那些​​最初的编码步骤。*为什么？因为它会充满错误。我维护的一个小 linmath.h 充满了它们；每次我在一个新项目中使用它时，我都会修复其中的一些。因此，我建议您使用经过良好测试的东西，例如 GLM 或 Eigen。

> 我在我的着色器设置方法中将 MVP 的初始值设置为单位矩阵，这为我提供了正确的 2D 表示点：

您应该将它们分成 3 个矩阵：模型、视图和投影。在您的着色器中，您应该有两个模型视图和投影。即，您将投影按原样传递给着色器，但计算`Model · View = Modelview`在单独的统一中传递的复合矩阵。

要移动“相机”，您需要修改`View`矩阵。

> 现在我的问题是如何调整“motion”和“mouse”这两个函数，到目前为止，这两个函数只有前一个示例中的一些代码，其中使用了不推荐的执行方式：

大部分代码保持不变，因为它不涉及 OpenGL。您需要替换的是那些 glRotate 和 glTranslate 调用。

如前所述，您正在处理`View`矩阵。首先让我们看看 glRotate 做了什么。在固定函数 OpenGL 中有一个内部别名，我们称之为它`M`，它被设置为使用 glMatrixMode 选择的任何矩阵。然后我们可以用伪代码编写 glRotate 为

```
proc glRotate(angle, vec_x, vec_y, vec_z):
    mat4x4 R = make_rotation_matrix(angle, vec_x, vec_y, vec_z)
    M = M · R 
```

好吧，所有的魔法似乎都在函数之内`make_rotation_matrix`。那个看起来怎么样。好吧，既然你正在学习线性代数，这对你来说是一个很好的练习。`R`找到具有以下属性的矩阵：

`l a = R·a`, 其中 a 是旋转轴

`cos(phi) = b·c && b·a = 0 && b·c = 0`, 其中 phi 是旋转角度

由于您可能只是想完成这件事，您也可以求助于查看 OpenGL-1.1 规范，该规范在其关于 glRotatef 的部分中记录了该矩阵

![glRotate OpenGL-2 规范](../Images/e5b2b364237f1ef2983a306baf0161df.png)

在它们旁边，您可以找到所有其他矩阵操作函数的规格。

现在，不是对您使用 glMatrixMode 选择的某些隐藏状态变量进行操作，而是让您的矩阵数学库直接对您定义和提供的矩阵变量进行操作。在你的情况下`View`。和你用`Projection`and做的类似`Model`。然后在渲染时，将模型和视图收缩到已经提到的复合体中。这样做的原因是，您通常想要将顶点位置带入眼睛空间的中间结果（`Modelview * position`对于片段着色器）。确定矩阵值后，您绑定程序 (glUseProgram) 并设置统一值，然后渲染您的几何图形。(glDraw…)

# shell - 如何更新在属性文件中存在的属性？

> ID：14172332
> 
> 赞同：0
> 
> 时间：2013-01-05T13:43:07.873
> 
> 标签：shell

我的属性文件中有一个名为 WLS_HOME 的属性，它有一个指向我的 weblogic 主页的路径。我需要使用 shell 脚本将此路径替换为另一个路径。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T13:56:21.327

sed 's/WLS_HOME/newpathto/g' 文件名> 文件名.replaced

# android - 从活动中暂停媒体播放器

> ID：14172334
> 
> 赞同：0
> 
> 时间：2013-01-05T13:43:35.627
> 
> 标签：android

我有一个带有偏好的活动：启用/禁用声音和启用/禁用声音背景。阅读 sharepreferences 我启动了一个启动媒体播放器的服务。`onPause()`当活动进入状态时，我需要暂停媒体播放器。

活动：

```
// reading sharedpreferences, if true:
    startService(new Intent(this, UnUsedService.class)); 
```

服务：

```
 private PendingIntent pendingIntent;
    public void onStart(Intent intent, int startId) {
    super.onStart(intent, startId);
    player.start();

}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T15:14:38.903

我不知道这些解决方案是否正确。但你绝对可以试一试。

**A.** `Binding`和`Unbinding`服务于`onPause()`和`onResume()`

`Acitivity`应该`unBind`服务于`onPause()`Activity，但如果你没有调用 an `unbind ()`，我想你会得到内存泄漏。

`Activity`应该`reBind`服务于`onResume()`Activity。但是这些绑定解绑可能会导致你`NullPointerException`

* * *

**乙**。`Sending BroadCastReceiver`可能会为您建造类似的东西。

***根据您的需要注册和取消注册广播***

***在你的 Activity-onPause() 内部***

```
String PAUSE_MUSIC="PAUSE_MUSIC_INSIDE_SERVICE";
Intent intent = new Intent(PAUSE_MUSIC_INSIDE_SERVICE);
sendBroadcast(intent); 
```

***在您的服务中***

```
BroadCastReceiver receiver=new PauseMusicReceiver(); 
IntentFilter filter = new IntentFilter(Activity.PAUSE_MUSIC);
getApplicationContext().registerReceiver(receiver, filter);

class PauseMusicReceiver extends BroadcastReceiver 
{
  @Override
  public void onReceive(Context context, Intent intent) 
  {
     //Pause your MediaPlayer
   }
} 
```

* * *

**C.** _`Sleep or Suspend Thread which is created at Service`

***Service 中的媒体也由您为 Service 创建的线程处理。因此，在 Activity 的 onPause() 处暂停或将该线程置于睡眠模式并在 Activity 的 onResume() 处再次恢复该线程可能会有所帮助。***

***线程方法 -onSuspend()、onStart()、onResume()、onSleep()***

# vector - 用向量移动字符

> ID：14172340
> 
> 赞同：1
> 
> 时间：2013-01-05T13:44:19.643
> 
> 标签：vector, xna, angle

每当我有一个角色并且我希望他移动到一个对象时，我总是必须将它转换为一个角度，例如：

```
int adjacent = myPosition.X - thatPosition.X;
int opposite = myPosition.Y - thatPosition.Y;

double angle = Math.atan2(adjacent, opposite);

myPosition.X += Math.cos(angle);
myPosition.Y += Math.sin(angle); 
```

是否有一种更简单的方法可以通过仅使用矢量而不是转换为角度和返回来将对象移动到另一个对象，如果是这样，如果您展示了如何和/或将我指向可以向我展示的网站，我将不胜感激。

ps 我在 XNA 中编码

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T14:24:13.887

是的，您可以最小化三角函数并采用更线性的代数方法。看起来像这样：

```
//class scope fields
Vector2 myPosition, velocity, myDestination;
float speed;

//in the initialize method
myPosition = new Vector2(?, ?);
myDestination = new Vector2(?, ?);
speed = ?f;//usually refers to "units (or pixels) per second"

//in the update method to change the direction traveled by changing the destination
float elapsed = (float)gameTime.ElapsedGameTime.TotalSeconds;
myDestination = new Vector2(?', ?');//change direction by changing destination
Velocity = Vector2.Normalize(myDestination - myPosition);
velocity *= speed;

myPosition += velocity * elapsed;

//or instead of changing destination to change velocity direction, you can simply rotate the velocity vector
velocity = Vector2.Transform(velocity, Matrix.CreateRotationZ(someAngle);
velocity.Normalize();
velocity *= speed;

myPosition += velocity * elapsed; 
```

这里使用的唯一角度/三角是嵌入在 CreateRotationZ() 方法中的三角，它在 xna 框架的幕后发生。

# javascript - d3.js / svg - 如何动态地将文本附加到我的弧

> ID：14172343
> 
> 赞同：3
> 
> 时间：2013-01-05T13:44:49.703
> 
> 标签：javascript, svg, d3.js, expressionengine, data-visualization

我正在尝试完成动态创建这些蓝色弧线的 d3 项目的最后一点，我需要在其上放置弧线文本，如下图所示：

![在此处输入图像描述](../Images/962cd70db19dcb360c3ac3c4d6a541f1.png)

上面的图像是我通过反复试验静态放置弧文本完成的，但我想根据文本下方的蓝色弧动态放置它。这是动态创建弧的代码：

```
var groupData = data_group.selectAll("g.group")
    .data(nodes.filter(function(d) { console.log(d.__data__.key); return (d.key=='Employers' ||{exp:channel:entries category="13" backspace="2"} d.key == '{url_title}' ||{/exp:channel:entries}) && d.children; }))
    .enter().append("group")
    .attr("class", "group");

arc_group.selectAll("g.arc")
    .data(groupData[0])
    .enter().append("svg:path")
    .attr("d", groupArc)
    .attr("class", "groupArc")
    .style("fill", "#1f77b4")
    .style("fill-opacity", 0.5); 
```

{exp:} 内容是我从表达式引擎中的内容管理系统中提取的预解析数据，如果它看起来令人困惑。

所以，我有我的弧线。现在您会在 groupData 代码块中注意到我有一个 console.log 语句，它会给我我想要出现在弧文本中的名称：

```
console.log(d.__data__.key); 
```

现在，我用来静态放置弧文本的代码是这样的：

```
var arcData = [
  {aS: 0, aE: 45,rI:radius - chartConfig.linePadding + chartConfig.arcPadding,rO:radius - chartConfig.linePadding + chartConfig.textPadding-chartConfig.arcPadding}
];

var arcJobsData = d3.svg.arc().innerRadius(arcData[0].rI).outerRadius(arcData[0].rO).startAngle(degToRad(1)).endAngle(degToRad(15));
var g = d3.select(".chart").append("svg:g").attr("class","arcs");
var arcJobs = d3.select(".arcs").append("svg:path").attr("d",arcJobsData).attr("id","arcJobs").attr("class","arc");
g.append("svg:text").attr("x",3).attr("dy",15).append("svg:textPath").attr("xlink:href","#arcJobs").text("JOBS").attr("class","arcText"); //x shifts x pixels from the starting point of the arc. dy shifts the text y units from the top of the arc 
```

在上面的代码中，我唯一需要做的就是为弧动态分配一个 ID，然后在 xlink:href 属性中引用该 ID，并将 text("JOBS") 替换为 text从 d 中提取。**数据__key。鉴于上面动态创建弧的代码，并且鉴于我知道如何使用 d.__data** .key 动态创建和检索要放置在弧中的文本，我应该能够完成这件事，但我可以不知道如何在 d3 中编写代码来获取数据并将其放置在弧中。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-05T17:15:51.550

您应该阅读[这篇关于嵌套选择](http://bost.ocks.org/mike/nest/)的博文；我相信它会解释你想要做什么。

这是要点。当您将数据添加到您的选择时，将选择分配给一个变量：

```
var g = data_group.selectAll("g.group")
    .data(nodes.filter(function(d) { /* stuff */ })); 
```

这样，您可以对其执行子选择，这将接收绑定到您的`g`选择的数据的单个元素。您可以使用它来添加弧线和文本：

```
g.enter().append('group') // Question: Are you sure you mean 'group' here?
    .attr('class', 'group')

g.selectAll('g.arc')
    .data(function(d, i) { return d; })
  enter().append('path')
     // Setup the path here

g.selectAll('text')
    .data(function(d, i) { return d; })
  .enter().append('text')
    .attr('text', function(d) { return d.__data__.key }) 
```

用于在嵌套选择（即 s）中进行数据绑定的函数被传递给附加到as`g.selectAll()`的单个数据*元素*，并且是它的索引。`g``d``i`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-05T17:16:18.590

想通了。稍微改变了事物的结构，使其更有意义，但基本上我所做的是：

```
var groupData = data_group.selectAll("g.group")
    .data(nodes.filter(function(d) { return (d.key=='Employers' ||{exp:channel:entries category="13" backspace="2"} d.key == '{url_title}' ||{/exp:channel:entries}) && d.children; }))
    .enter().append("group")
    .attr("class", "group"); //MH - why do we need this group - these elements are empty. Shouldn't this just be an array? Find out how to delete the svg elements without getting rid of the data, which is needed below.

  var groupArc = d3.svg.arc()
    .innerRadius(ry - 177)
    .outerRadius(ry - 157)
    .startAngle(function(d) { return (findStartAngle(d.__data__.children)-2) * pi / 180;})
    .endAngle(function(d) { console.log(d.__data__.key); return (findEndAngle(d.__data__.children)+2) * pi / 180});

  var arc_and_text = arc_group.selectAll("g.arc")
    .data(groupData[0])
    .enter().append("svg:g")
    .attr("class","arc_and_text");

  var arc_path = arc_and_text.append("svg:path")
    .attr("d", groupArc)
    .attr("class", "groupArc")
    .attr("id", function(d, i) { return "arc" + i; })
    .style("fill", "#1f77b4")
    .style("fill-opacity", 0.5); //MH: (d.__data__.key) gives names of groupings

  var arc_text = arc_and_text.append("text")
    .attr("class","arc_text")
    .attr("x", 3)
    .attr("dy", 15);

  arc_text.append("textPath")
    .attr("xlink:href", function(d, i) { return "#arc" + i; })
    .attr("class","arc_text_path")
    .style("fill","#ffffff")
    .text(function(d, i) { return d.__data__.key; }); 
```

D3 仍然让我有些困惑，我确信这段代码可以得到很大改进，但它确实有效。

# c# - C# 替代 Visual Basic .NET 命名空间 My

> ID：14172344
> 
> 赞同：3
> 
> 时间：2013-01-05T13:45:29.570
> 
> 标签：c#, .net, vb.net

我是一名 VB.NET 程序员，但我是 C# 新手，现在我正在处理使用本地资源文件 (.resx) 的 C# 项目。

使用 VB.NET，我可以通过**My** .Resources.< LocalResourceFile >.< MyVariable > 访问资源文件中的变量。但是在 C# 中，我找不到**My namespace 的任何替代方案，但是如果我将****My** namespace 替换为 < MyProjectNamespace > ，我仍然可以访问资源。

也许还有其他方法可以访问我的本地资源？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-05T13:48:46.777

如果你绝对*必须*使用`My`命名空间的等价物，C# 中其实有这样的东西。它是`Microsoft.VisualBasic.Devices.MyServices`命名空间。要使用它，您必须添加对 Microsoft.VisualBasic.dll 的引用并添加`using Microsoft.VisualBasic.Devices;`到您的代码文件中。对于此路线，请参见此处：http: [//msdn.microsoft.com/en-us/library/ms173136.aspx](http://msdn.microsoft.com/en-us/library/ms173136.aspx)

我不会，但建议这样做。相反，要访问资源，您只需`MyNamespace.Properties.Resources`像这样使用：

```
namespace SomeNamespace
{
...
    var myFile = SomeNamespace.Properties.Resources.MyFile;
...
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-05T13:49:35.583

您可以这样做，这实际上是等效的：

```
Bitmap image = Properties.Resources.picture000; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-05T13:55:54.280

它仍然以相同的方式工作，只是不要将“My.Resources”放在名称前面。因此，如果您添加了一个名为“Resource1”的 .resx 文件并将一个名为“Foo”的字符串放入资源中，则变量名称为“Resource1.Foo”。

如果您将代码放在非默认命名空间中，那么您可能必须为其添加默认项目命名空间的前缀。像“WindowsFormsApplication1.Resource1.Foo”。如果您迷路了，那么只需查看自动生成的代码。在解决方案资源管理器窗口中，打开 .resx 文件旁边的节点并双击 Designer.cs 文件。不要编辑它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-05T13:48:27.347

没有内置的`My`命名空间，但您可以引用`Microsoft.VisualBasic.dll`并拥有它。

查看： http: [//msdn.microsoft.com/en-us/library/ms173136 (v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/ms173136(v=vs.80).aspx)

# php - 如何在 php 代码中隐藏特定值？

> ID：14172347
> 
> 赞同：-1
> 
> 时间：2013-01-05T13:45:42.963
> 
> 标签：php, printing

嗨，我想隐藏一个字段，但我不能。我搜索了是否值代码，但我找不到。我不是 php 编码器。我只需要这段代码。

```
<?php 
    foreach ($fields as $field) {
        $type = $field['s_type'];
        $label = $field['s_label'];
        $value = Attributes::newInstance()->getValue($item_id, $field['pk_i_id']);
        if ($type == 'checkbox') {
            if ($value == 'checked') $value = '<img src="http://www.tirnakicinde.com/oc-content/plugins/realestate_attributes/img/tick.png">';
            **else $value = '<img src="http://i.imm.io/RLMH.png">';**
        }
?>
        <tr>
            <td style='width: 150px;'><?php _e($label, PLUGIN_NAME); ?></td>
            <td style='width: 150px;'><?php _e($value, PLUGIN_NAME); ?></td>
        </tr>
<?php } ?> 
```

`<img src="http://i.imm.io/RLMH.png">`是我的“不”勾。我想在选择 NO * 时隐藏（这是我的 no 刻度值`<img src="http://i.imm.io/RLMH.png">`刻度然后它不显示。我使用图像代码来表示没有刻度。

我该如何隐藏？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T14:05:33.027

我的猜测是他只是想摆脱当复选框“未选中”时加载的图片（他称之为“无勾号”）。如果是这样，请尝试删除条件*if ($value == 'checked') 的**else分支*

 *+1 EXP 用于理解问题*

# mysql - 如何在mysql中选择相同的值字段？

> ID：14172348
> 
> 赞同：-1
> 
> 时间：2013-01-05T13:45:44.217
> 
> 标签：mysql, sql

我有一个包含以下字段名称、地址、城市、邮编等的表格。

如何选择具有相同值的城市列？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T13:47:28.500

如果您正在寻找纽约的所有条目，假设您的表名称为位置

```
SELECT name, address, zip, city FROM locations WHERE city LIKE "New York" 
```

如果您希望所有条目按城市排序，以便它们聚集在一起：

```
SELECT name, address, zip, city FROM locations ORDER BY city DESC 
```

如果要收集每个城市的名称列表：

```
SELECT GROUP_CONCAT(name) FROM locations GROUP BY city; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T13:50:03.500

目前还不清楚你想要什么。

如果您想要一个多次出现的城市列表，您可以使用：

```
select city, count(city) Total
from yourtable
group by city
having count(city) > 1 
```

如果要根据城市名称返回数据，您将使用：

```
select *
from yourtable 
where city = 'yourCity' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-05T14:01:41.683

```
select city from table_name group by city having count(city) > 1; 
```

# actionscript-3 - 如何在flex中浏览移动目录？

> ID：14172350
> 
> 赞同：0
> 
> 时间：2013-01-05T13:46:13.883
> 
> 标签：actionscript-3, apache-flex, flash-builder

我在手机上拍摄了 3 个视频，默认存储在手机图库（Gallery/videos/）中。我必须在我的一个 flex 移动应用程序中播放这 3 个视频。如何将视频获取到 flex 项目？如果我需要浏览移动目录，请帮助我提供一些代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T07:37:58.493

从那以后，我发现使用委派系统相机拍摄的视频存储在 iOS -DOES!- 允许访问的临时存储位置。（我很惊喜。）

捕获的视频不会像使用 iOS 系统相机应用程序捕获的其他视频一样添加到设备的相机胶卷中，因此仅捕获视频并期望稍后能够访问它是不够的（例如，如果 CameraRoll.browseForVideo() 是曾经添加到 API 中。

因此，您必须“在获取良好时获取”并将文件从临时存储位置移动到某个非易失性位置，例如 ApplicationStorageDirectory 或用户的 Documents 目录（我认为 iOS 中的唯一选项）。

MediaPromise...我认为...对于通过任何直接渐进式加载器/流媒体方法访问视频完全没用，但仍提供临时文件的位置/url/路径/文件名，以便您可以对其执行文件操作。

具有讽刺意味的是，在使用 CameraRoll.browseForImage()... 时，有一些教程可以解决 MediaPromise 中缺少文件位置/url/路径/文件名的问题......并且该方法是使用加载器类来加载图像内容（你然后可以写入文件），但是在拍摄视频时，无法访问视频内容，而是提供了文件位置/url/路径/文件名。具有讽刺意味的是，我几乎找不到任何资源来帮助解决这个问题。*叽*

我将包含一些代码块，而无需真正编辑它们以去除无关的部分，因为它已经过去了我需要睡觉的时候，但我希望你拥有这个。我以后可能会来清理它。

本节位于 Spark SkinnablePopUpContainer 中，我对多个按钮使用相同的单击事件，因此下面的“案例”位于该事件处理函数中的开关案例中。

如果你不熟悉，'close(true, data)' 是关闭 SkinnablePopUpContainer 的方法，告诉父/所有者容器是故意关闭的，它应该寻找被共享回来的数据对象（即，有更改要“提交”）。

```
case "cameraVideo":
{
    if(CameraUI.isSupported)
    {
        camera = new CameraUI();
        camera.addEventListener(MediaEvent.COMPLETE,     videoMediaEventComplete);
        camera.addEventListener(Event.CANCEL,            cameraCanceled);
        camera.addEventListener(ErrorEvent.ERROR,        cameraError);
        camera.launch(MediaType.VIDEO);
    }
    else
    {
        statusText.text = "Camera not supported on this device.";
        startTimer();
    }
    break;
}

protected function cameraCanceled(event:Event):void
{
    statusText.text = "Camera access canceled by user.";
    startTimer();
}

protected function cameraError(event:ErrorEvent):void
{
    statusText.text = "There was an error while trying to use the camera.";
    startTimer();
}

protected function videoMediaEventComplete(event:MediaEvent):void
{
    statusText.text="Preparing captured video...";

    camera.removeEventListener(MediaEvent.COMPLETE,     videoMediaEventComplete);
    camera.removeEventListener(Event.CANCEL,    cameraCanceled);
    camera.removeEventListener(ErrorEvent.ERROR,        cameraError);

    var media:MediaPromise = event.data;

    data.MediaType = MediaType.VIDEO;
    data.MediaPromise = media;
    data.source = "camera video";

    close(true,data)
} 
```

此部分是 SkinnablePopUpContainer 的父/所有者的关闭处理程序中的 Actionscript（包含有用代码后截断）

```
private function choosePictureLightboxClosed(event:PopUpEvent):void
{
    imageButtonsActive = false;

    if(event.commit)
    {
        this.data = event.data as Object;

        filters = new Array();
        selection = true;

        switch(data.MediaType)
        {
            case MediaType.VIDEO:
            {
                mediaType = "video"; 

                trace(data.MediaPromise.file.url  + " - " + data.MediaPromise.relativePath + " - " +data.MediaPromise.mediaType);

                var sourceFile:File = new File(data.MediaPromise.file.url);
                var destinationFile:File = File.applicationStorageDirectory.resolvePath("User" +parentApplication.userid);

                if(destinationFile.exists && !destinationFile.isDirectory)
                {
                    destinationFile.deleteFile();
                }
                destinationFile.createDirectory();

                destinationFile = destinationFile.resolvePath("Videos");
                if(destinationFile.exists && !destinationFile.isDirectory)
                {
                    destinationFile.deleteFile();
                }
                destinationFile.createDirectory();

                destinationFile = destinationFile.resolvePath(parentApplication.userid+"Video"+new Date().getTime()+".mov");
                trace(destinationFile.nativePath);

                sourceFile.moveTo(destinationFile,true);

                break;
            } 
```

我当然希望这会有所帮助。这是一个非常令人沮丧的事情（而且我们的项目是由政府拨款资助的，而且我们完全没有达到最后期限），我非常希望这些来之不易的解决方案可以帮助其他人避免同样的经历。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T18:43:45.010

我也在寻找这个问题的答案。现在，基于其他 Stackoverflow 讨论、对教程和 Adob​​e 文档的详尽阅读以及对两者的评论（通常是更有用的资源），我得出的结论是这是不可能的。

*   您可以使用 CameraRoll.browseForImage() 并打开 iOS 照片库以查看 MediaType.IMAGE 的所有实体，但它不会显示 MediaType.VIDEO

*   您可以使用 CameraUI 通过委托启动系统摄像头并返回 MediaPromise，但据我所知，它不会将您捕获的视频保存在任何地方，而且我找不到使用 MediaPromise 访问捕获的视频的方法（至少使用 Loader 类）

这是我的代码，作为该方向的提示。第二个代码块使用CameraRoll 来browseForImage()，但API 中没有browseForVideo()。

```
if(CameraUI.isSupported)
{
    camera = new CameraUI();

    camera.addEventListener(MediaEvent.COMPLETE,    videoMediaEventComplete);
    camera.addEventListener(Event.CANCEL,           cameraCanceled);
    camera.addEventListener(ErrorEvent.ERROR,       cameraError);

    camera.launch(MediaType.VIDEO);
}
else
{
    statusText.text = "Camera not supported on this device.";
    startTimer();
}

if (CameraRoll.supportsBrowseForImage)
{
    roll = new CameraRoll();

    roll.addEventListener(MediaEvent.SELECT,    cameraRollEventComplete);
    roll.addEventListener(Event.CANCEL,         cameraCanceled);
    roll.addEventListener(ErrorEvent.ERROR,     cameraError);

    roll.browseForImage();
}
else
{
    statusText.text = "Camera roll not supported on this device.";
    startTimer();
} 
```

# css - WordPress 菜单中的图像分隔符

> ID：14172351
> 
> 赞同：0
> 
> 时间：2013-01-05T13:46:21.077
> 
> 标签：css, wordpress

这就是我想要实现的目标：
![快照图像分隔符 wp 菜单](../Images/e1d043c220e267e4a504dcb0bd4afffa.png)

我尝试了什么：

```
.nav li a:before {
content: url(../../images/separator.png);
line-height:87px;
}
.nav li:first-child a:before {content:'';} 
```

但是现在分隔符当然是链接的一部分，只有第一个菜单项与图像垂直居中。其余菜单项与图像底部对齐。

我还尝试使用分隔符图像作为背景来列出项目，但无法让它看起来正确。

# java - 茉莉花黑客和验证错误

> ID：14172352
> 
> 赞同：2
> 
> 时间：2013-01-05T13:46:26.073
> 
> 标签：java, verifyerror, jasmin

我正在玩 jasmin，我尝试启动我的 .class 文件，该文件应该执行简单的字符串连接。我的茉莉源看起来像这样：

```
.class public default_class
.super java/lang/Object
.method public static main([Ljava/lang/String;)V
.limit locals 1
.limit stack 1
invokestatic main_65428301()I
return
.end method
.method public static main_65428301()I
.limit locals 1
.limit stack 100
new java/lang/String
dup
ldc "foo"
invokestatic java/lang/String.valueOf(Ljava/lang/Object;)Ljava/lang/String;
invokespecial java/lang/StringBuilder(Ljava/lang/String;)V
ldc "bar"
invokevirtual java/lang/StringBuilder.append(Ljava/lang/String;)Ljava/lang/StringBuilder;
invokevirtual java/lang/String.toString()V
astore_0
iconst_0
ireturn
.end method 
```

现在我可以运行 java -jar jasmin.jar 并获得 default_class.class。但是，当我尝试像 java default_class 一样启动它时，出现错误：

```
Exception in thread "main" java.lang.VerifyError: (class: default_class, method: main_65428301 signature: ()I) Illegal use of nonvirtual function call 
```

我应该在我的程序集中进行什么更改才能使其正常工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T14:05:08.453

在 JVM 中，要创建对象，您必须首先使用`new`指令，然后调用`<init>`方法（构造函数）。您没有创建`new`StringBuilder 并调用了错误的构造函数名称（应该是`java/lang/StringBuilder/<init>(Ljava/lang/String;)V`）。

我也认为没有理由这样做：

```
new java/lang/String
dup 
```

或者

```
invokestatic java/lang/String.valueOf(Ljava/lang/Object;)Ljava/lang/String; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T14:06:07.233

“新指令并未完全创建新实例；在未初始化的实例上调用实例初始化方法之前，实例初始化不会完成。”

# paypal - 如何在 PayPal 的沙盒上测试没有足够资金的借记卡？

> ID：14172354
> 
> 赞同：1
> 
> 时间：2013-01-05T13:46:34.953
> 
> 标签：paypal, paypal-sandbox

如何在 PayPal 的沙盒上测试没有足够资金的借记卡？

例如，要支付的总金额是 100 美元，而我的信用卡上只有 5 美元。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T22:57:25.580

您需要为这类事情设置负面测试，并故意强制您想要测试的特定错误编号。

[有关详细信息，请参阅沙盒用户指南](https://www.x.com/sites/default/files/pp_sandbox_userguide.pdf)的第 7 章。

# .net - 事后 .Net 调试

> ID：14172358
> 
> 赞同：0
> 
> 时间：2013-01-05T13:46:54.463
> 
> 标签：.net, debugging, vb6, clr

向旧的 VB6 应用程序添加了 .Net 组件（C#、COM 互操作）。在更改前后，旧应用程序有时会崩溃（访问冲突）。然而不同的是，事后调试器（即 drwtsn32.exe）不再启动。在 C# 中捕获错误不是一种选择，因为该错误不是 .Net 调用堆栈的一部分，因此也不会触发 MyHandler：

```
AppDomain currentDomain = AppDomain.CurrentDomain;
currentDomain.UnhandledException += new UnhandledExceptionEventHandler(MyHandler); 
```

如何再次触发事后调试？提前感谢您的帮助！G更多

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T21:34:34.210

1.  您可以配置注册表，以便调试器/转储程序在崩溃时运行。有关 Google 的更多详细信息（请参阅[收集用户模式转储](http://msdn.microsoft.com/en-us/library/bb787181%28v=vs.85%29.aspx "收集用户模式转储")以及[配置自动调试](http://msdn.microsoft.com/en-us/library/windows/desktop/bb204634%28v=vs.85%29.aspx "配置自动调试")）。
2.  正如 Hans Passant 所提到的，一些工具可以通过在第二次机会异常上创建转储来帮助您解决这个问题（但如果错误是随机的并且如您所说的那样罕见，那么这些工具就不太有用）：ProcDump（SysInternals），ADPlus（调试工具视窗）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T07:45:44.533

ProcDump 作为 XP 系统（发生问题的地方）上的事后调试器可以正常工作，而如果 .net 是应用程序的一部分，则 drwtsn32 会失败。谢谢您的帮助！

# speech-recognition - 语音识别脚本不起作用

> ID：14172359
> 
> 赞同：1
> 
> 时间：2013-01-05T13:46:57.587
> 
> 标签：speech-recognition, ubuntu-12.04

我有这个语音识别脚本，它记录音频输入并发送到谷歌的语音识别服务器并接收结果并在 Ubuntu 终端上显示它们。但我无法让它发挥作用。我的猜测是谷歌已经做出了改变，或者这就是它不再工作的原因。我需要此脚本用于基于语音的 Web 浏览器项目。这是脚本：

```
#!/bin/bash

results=6

if [ "$1" == "-r" ];then
    results="$2"
fi

echo "Recording... Please press ^C a few seconds after finishing."
rec -r 16000 -b 16 -c 1 test.wav > /dev/null 2>&1
echo
echo "Recording finished!"
sox test.wav test.flac gain -n -5 silence 1 5 2% > /dev/null 2>&1
echo "Now uploading to google's speech recognition servers."
echo
echo "This may take a bit..."
a=$(curl \
  --data-binary @test.flac \
  --header 'Content-type: audio/x-flac; rate=16000' \
  'https://www.google.com/speech-api/v1/recognize?xjerr=1&client=chromium&pfilter=2&lang=en-US&maxresults='$results'' 2>/dev/null)
#echo "Done! Parsing results..."
echo
b=$(echo "$a" |egrep -o "\"confidence\":[^}]*" |sed 's/"confidence"://')
c=$(qalc $b \* 100 | egrep -o "=.*" |sed 's/= //' |sed 's/\.\([0-9]\)*/\.\1/')

echo "Done, results below :)"
echo
echo "Confidence in results = ${c}%"
echo "$a" | egrep -o "\"utterance\":\"[^\"]*\"" |sed 's/"utterance":"//;s/"//'|nl 
```

这是一个不完整的输出示例：

```
john@ubuntu:~/Desktop$ ./test.bash
Recording... Please press ^C a few seconds after finishing.
^C
Recording finished!
Now uploading to google's speech recognition servers.

This may take a bit... 
```

之后它没有显示任何东西。要查看此脚本的工作原理，请访问此链接： [LINK](http://www.youtube.com/watch?v=uM2Yb-PwP6o)

请帮我找出错误。信息：我在 VMware WS 中使用 Ubuntu12.04。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-16T15:30:43.977

请尝试将您的 bash 脚本分成两部分以进行调试。您最好准备一个有效的 FLAC 音频文件（以 16K Hz 采样）并将其发送给 Google 以验证您的核心部分是否有效。如果您的计划只是使用 Google ASR，您可以考虑直接使用[这个 Python 3.0 解决方案](https://bitbucket.org/happyalu/py_google_asr)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T21:57:11.500

问题可能是您的音频文件太长。我相信 Google api 仅限于长度小于 3 秒的文件。

# objective-c - If 语句 - 有效处理条件

> ID：14172361
> 
> 赞同：0
> 
> 时间：2013-01-05T13:47:18.160
> 
> 标签：objective-c, ios, cocoa-touch

我可以就处理此语句的最有效方式提出一些建议。

我有 UISwitch ，如果切换会`on`在框中打勾。有数百个这样的盒子

而不是

```
if (_tickSwitch.on){

  _tickBox1.textValue =  @"√" ;
  _tickBox2.textValue =  @"√" ;
  _tickBox3.textValue =  @"√" ;
  _tickBox4.textValue =  @"√" ; 
```

ETC....

我试图弄清楚我如何才能有一个条件，询问是否有任何`textValue`将文本设置为 √</p>

所以像

```
 anyValueThatIs.textValue =  @"√" ; 
```

我想不出允许的语法 - 任何具有前值的东西，这样做

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T13:57:56.307

您应该为所有`UISwitch`组件添加相同的操作目标，例如：

```
[item addTarget:self action:@selector(toggled:) forControlEvents:UIControlEventValueChanged]; 
```

这样您就可以捕捉到事件并做出相应的行为：

```
- (IBAction) toggled:(id)sender {
    UISwitch *item = (UISwitch*)sender;
    if (item.on)
      item.textValue = @"√";
} 
```

当然，您需要所有`UISwitch*`组件的循环，否则您只是在其他地方移动冗长。另一种解决方案是将它们子类化为一个`CustomUISwitch`组件，该组件在 costructor 中添加目标，从而避免需要容器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T13:55:29.877

您应该将所有 tickBox 放在一个数组中，然后循环该数组以执行您的测试

# javascript - 不添加导出 csv 和 xls

> ID：14172363
> 
> 赞同：0
> 
> 时间：2013-01-05T13:47:26.413
> 
> 标签：javascript, object, datatables

我使用动态sql连接的DataTables方式。我想添加按钮导出 csv 和 xml，但它没有出现。还是我误会了。

```
oTable = $('#tbl_result').dataTable(
        {
            "sDom": 'T<"top"fl>rt<"bottom"pi>' ,
            "sPaginationType": "full_numbers",
            “bAutoWidth”：假，    
            “bProcessing”：是的，
            “bSortClasses”：假，
            “iDisplayLength”：15，
            “bStateSave”：假，    
            “bServerSide”：是的，
            “语言”：{
                "sUrl": "/includes/js/DataTables.fr.js"
            },
            "sAjaxSource": "sql-objects.php",
           “oTableTools”：{
                “aButtons”：[“csv”，“xls”]，
                {
                    “aButtons”：[“csv”、“xls”、“”]
                    "sExtends": "收藏",
                }
            },
            “fnRowCallback”：函数（nRow，aData，iDataIndex）
            {
                $('td:eq(1)', nRow).html( DateFr(aData['date']) ) ;
                $('td:eq(2)', nRow).html( ( aData['etat'] == '0' ? 'Inscrit' : 'En attente') ) ;
                $('td:eq(3)', nRow).html( '<a user="' + aData['mail'] + '" class="delete" href="?id_abonne='+ aData['mail '] +'"><img border="0" class="icon16 infobulle" src="/back_office/images/template/icon16-delete.png"></a>');
            },
            “aoColumns”：
            [
                { "mData": "邮件" },
                { "mData": "日期" },
                {“mData”：“etat”}，
                {“mData”：“cle”，“bSortable”：假}
            ],
            “排序”：
            [
                [0,'desc']
            ]
        });
```

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T00:11:58.037

您是否已将插件 js 文件添加到您的页面？[下载链接](http://datatables.net/releases/TableTools-2.1.4.zip)

此外，我认为您需要包含 swf 文件，因为那是按钮的图像。

```
"oTableTools": {
            "sSwfPath": "/swf/copy_csv_xls_pdf.swf"
        } 
```

# google-visualization - Google Charts API - “TimeOfDay”数据类型 - 毫秒分辨率

> ID：14172365
> 
> 赞同：0
> 
> 时间：2013-01-05T13:47:33.510
> 
> 标签：google-visualization

我用“timeofday”格式制作了一个带有 y 轴的图表。数据具有通常的数组格式：[0,0,50,400]。问题：Google 无法识别绘图中的毫秒数（但在工具提示中正确显示）。所以 [0,0,50,400]（50.4 秒）就像图表上的 [0,0,50,0]（50.0 秒）。但我需要那种决心。如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-24T18:52:49.920

在图表选项对象中，您可以使用字段格式设置 vAxis 对象，并提供带有您要使用的模式的字符串，这是一个示例：

```
new google.visualization.BarChart(document.getElementById('visualization'));
draw(data,
   {title:"Yearly Coffee Consumption by Country",
    width:600, height:400,
    vAxis: {title: "Year", format: "ss:SS"},
    hAxis: {title: "Cups"}} 
```

);

查看 vAxis 对象。

对于字符串格式，您应该查看[http://userguide.icu-project.org/formatparse/datetime](http://userguide.icu-project.org/formatparse/datetime)来构建您喜欢的模式。

# ruby-on-rails - Redmine 安装不适用于 apache 乘客

> ID：14172366
> 
> 赞同：0
> 
> 时间：2013-01-05T13:47:37.507
> 
> 标签：ruby-on-rails, ubuntu, passenger, redmine

我已经在服务器（Ubuntu 12.04 LTS）上安装了 redmine 2.1，它现在会产生 500 Server 错误消息。

我已配置为使用 apache 乘客并通过安装

```
xxxx:/usr/local/vhost/redmine# ruby --version
ruby 1.8.7 (2011-06-30 patchlevel 352) [x86_64-linux]

gem --version
1.8.15

xxxxx:/usr/local/vhost/redmine/log# bundle --version
Bundler version 1.2.3

Started GET "/" for 217.247.62.52 at Sat Jan 05 13:39:34 +0000 2013
Processing by WelcomeController#index as HTML
Completed 500 Internal Server Error in 1ms

NoMethodError (undefined method `accept' for nil:NilClass):
  app/models/setting.rb:152:in `check_cache'
  app/controllers/application_controller.rb:82:in `user_setup' 
```

我的 database.yml 适配器已经在 mysql2 上：

```
production:
  adapter: mysql2
  database: redmine
  host: localhost
  username: root
  password: *****
  encoding: utf8 
```

但这似乎是错误的，因为我使用的是 ruby​​ 1.8.7 而**不是**1.9.X。

有人知道在哪里看吗？

**更新** 重试后，我从网站上的 passgen 收到以下消息：

```
Error message:
    no such file to load -- dispatcher
Exception class:
    LoadError
/var/lib/gems/1.8/gems/activesupport-3.2.8/lib/active_support/dependencies.rb   251     in `require'
1   /var/lib/gems/1.8/gems/activesupport-3.2.8/lib/active_support/dependencies.rb   251     in `require'
2   /var/lib/gems/1.8/gems/activesupport-3.2.8/lib/active_support/dependencies.rb   236     in `load_dependency'
3   /var/lib/gems/1.8/gems/activesupport-3.2.8/lib/active_support/dependencies.rb   251     in `require'
4   /usr/lib/ruby/1.8/phusion_passenger/railz/application_spawner.rb    312     in `preload_application'
5   /usr/lib/ruby/1.8/phusion_passenger/railz/application_spawner.rb    252     in `initialize_server'
6   /usr/lib/ruby/1.8/phusion_passenger/utils.rb    255     in `report_app_init_status'
7   /usr/lib/ruby/1.8/phusion_passenger/railz/application_spawner.rb    237     in `initialize_server'
8   /usr/lib/ruby/1.8/phusion_passenger/abstract_server.rb  194     in `start_synchronously'
9   /usr/lib/ruby/1.8/phusion_passenger/abstract_server.rb  163     in `start'
10  /usr/lib/ruby/1.8/phusion_passenger/railz/application_spawner.rb    213     in `start'
11  /usr/lib/ruby/1.8/phusion_passenger/spawn_manager.rb    262     in `spawn_rails_application'
12  /usr/lib/ruby/1.8/phusion_passenger/abstract_server_collection.rb   126     in `lookup_or_add'
13  /usr/lib/ruby/1.8/phusion_passenger/spawn_manager.rb    256     in `spawn_rails_application'
14  /usr/lib/ruby/1.8/phusion_passenger/abstract_server_collection.rb   80  in `synchronize'
15  /usr/lib/ruby/1.8/phusion_passenger/abstract_server_collection.rb   79  in `synchronize'
16  /usr/lib/ruby/1.8/phusion_passenger/spawn_manager.rb    255     in `spawn_rails_application'
17  /usr/lib/ruby/1.8/phusion_passenger/spawn_manager.rb    154     in `spawn_application'
18  /usr/lib/ruby/1.8/phusion_passenger/spawn_manager.rb    287     in `handle_spawn_application'
19  /usr/lib/ruby/1.8/phusion_passenger/abstract_server.rb  352     in `__send__'
20  /usr/lib/ruby/1.8/phusion_passenger/abstract_server.rb  352     in `main_loop'
21  /usr/lib/ruby/1.8/phusion_passenger/abstract_server.rb  196     in `start_synchronously'
22  /usr/lib/phusion_passenger/passenger-spawn-server 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T09:15:16.180

正如@khmarbaise 所说，他的链接给了我解决方案：

在链接后面，我们发现Passenger现在将`rails`-application视为`rack`-application，因此apache2-config是：

```
RailsBaseURI /redmine 
```

现在应该是

```
RackBaseURI /redmine 
```

这使它对我有用（[来源](http://happy-coding.com/no-such-file-to-load-dispatcher/)）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-05T14:20:13.587

在搜索了一段时间后，这部分是@Michael Witrant 的答案，我找到了以下[链接](http://happy-coding.com/no-such-file-to-load-dispatcher/)，让我了解了正确的步骤。在使用 apache 配置中的推荐条目进行更改后，我将 database.yml 文件中的配置从 mysql2 更改为 mysql 适配器，它可以工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-05T14:03:21.313

您可能遇到与此问题相同的问题：[Rails 3: Model.all => NoMethodError: undefined method 'accept' for nil:NilClass](https://stackoverflow.com/questions/9296444/rails-3-model-all-nomethoderror-undefined-method-accept-for-nilnilclass)

尝试使用`mysql2`适配器而不是`mysql`in `database.yml`。

# javascript - 传递图像数组值并更改图像源 onclick

> ID：14172370
> 
> 赞同：0
> 
> 时间：2013-01-05T13:48:22.580
> 
> 标签：javascript, arrays, image

好的，所以最后一分钱掉了（大声的沉闷！）我在这里遇到的点击问题[Append dynamic div just once and a JSFiddle issue](https://stackoverflow.com/questions/14167952/append-dynamic-div-just-once-and-a-jsfiddle-issue)。该代码现在向用户显示每个单击节点一次的图片选择。呸。

但是，现在我的`img.src=e.target.src`生产线无法访问数组中的其他图像。只有数组中的最后一个图像会添加到表中。我认为这是因为`allImages.onclick`事件应该在循环内？

我已经尝试过了，然后`img`显示为未定义。我猜那是因为循环（以及函数）在`var img`声明之前正在运行？我认为这是事物顺序的问题。

所有帮助表示赞赏。

```
var makeChart = function () {
    var table = document.createElement('table'),
    taskName = document.getElementById('taskname').value,
    header = document.createElement('th'),
    numDays = document.getElementById('days').value, //columns
    howOften = document.getElementById('times').value, //rows
    row,
    r,
    col,
    c;

    var myImages = new Array();
    myImages[0] = "http://www.olsug.org/wiki/images/9/95/Tux-small.png";
    myImages[1] = "http://a2.twimg.com/profile_images/1139237954/just-logo_normal.png";
    for (var i = 0; i < myImages.length; i++) {
        var allImages = new Image();
        allImages.src = myImages[i];

        var my_div = document.createElement("div");
        my_div.id = "showPics";
        document.body.appendChild(my_div);
        var newList = document.createElement("ul");
        newList.appendChild(allImages);
        my_div = document.getElementById("showPics");
        my_div.appendChild(newList);
        my_div.style.display = 'none';
    }
    header.innerHTML = taskName;
    table.appendChild(header);

    header.innerHTML = taskName;
    table.appendChild(header);

    function addImage(col) {
        var img = new Image();
        img.src = "http://cdn.sstatic.net/stackoverflow/img/tag-adobe.png";
        col.appendChild(img);
        img.onclick = function () {
            my_div.style.display = 'block';

            allImages.onclick = function (e) { // I THINK THIS IS THE PROBLEM
                img.src = e.target.src;
                my_div.style.display = 'none';
                img.onclick=null;
            };
        }

    }

    for (r = 0; r < howOften; r++) {
        row = table.insertRow(-1);
        for (c = 0; c < numDays; c++) {
            col = row.insertCell(-1);
            addImage(col);
        }
    }

    document.getElementById('holdTable').appendChild(table);
    document.getElementById('createChart').onclick=null;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T15:04:20.517

您的`addImage()`函数直接引用该`allImages`变量。一个问题是，由于您在代码前面的 for 循环中使用（并重用）该变量，它只会保留分配给它的最后一个值。因此，无论您调用多少次，`addImage()`它总是将`onclick`函数添加到指向的最后一个图像`allImages`。

我还建议重命名`allImages`变量。这是一个非常具有误导性的名称，因为它实际上只代表一个图像。

希望有帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-05T15:10:48.137

好吧，问题似乎源于不同的部分。首先，

```
for (var i = 0; i < myImages.length; i++) {
    var allImages = new Image();
    allImages.src = myImages[i];

    var my_div = document.createElement("div");
    my_div.id = "showPics";
    document.body.appendChild(my_div);
    var newList = document.createElement("ul");
    newList.appendChild(allImages);
    my_div = document.getElementById("showPics");
    my_div.appendChild(newList);
    my_div.style.display = 'none';
} 
```

`div`此循环为 中的每个图像创建一个新的`myImages`，然后将一个附加`ul`到那个`div`，最后将`Image`当前图像附加到`ul`.

什么`document.getElementById('showPics')`返回的问题，因为附加到as`div`的 s一样多，所以有一个神秘的神奇答案，永远不应该说，甚至想，再次。`id` `showPics``body``myImages.length`

为什么不做明智的事情并`div`在循环之外创造一个独特的快乐呢？`ul`在循环外附加一个孩子。然后继续`li`在循环中添加任意数量的内容。

```
var my_div = document.createElement('div');
my_div.id = 'showPics';
var newList = document.createElement('ul');
my_div.appendChild(newList);

for var i = 0; i < myImages.length; i++) {
    ...
    var li = document.createElement('li');
    li.appendChild(allImages);
    newList.appendChild(li);
    ...
}

my_div.style.display = 'none'; 
```

现在，`my_div`是唯一`div`包含图像的。因此，`click`事件处理程序可以安全地切换其可见性。

第二，

```
function addImage(col) {
    var img = new Image();
    img.src = "http://cdn.sstatic.net/stackoverflow/img/tag-adobe.png";
    col.appendChild(img);
    img.onclick = function () {
        my_div.style.display = 'block';

        allImages.onclick = function (e) { // I THINK THIS IS THE PROBLEM
            img.src = e.target.src;
            my_div.style.display = 'none';
            img.onclick=null;
        };
    }
} 
```

`allImages`既然您已退出循环，则引用同一个`Image`对象，这恰好是`myImages`. 因此，只有最后一个图像`myImages`会将处理程序注册到`click`事件。为了解决这个问题，我们创建了一个新变量。

```
var sel = null; //This comes before my_div 
```

现在，我们将`click`处理程序添加到循环`allImages` **内部**，以便按照他们所说的那样，其中的每个图像都`myImages`可以分到一块。

```
for var i = 0; i < myImages.length; i++) {
    var allImages = new Image();
    allImages.src = myImages[i];

    allImages.onclick = function (e) {
      if(sel !== null) {
        sel.src = e.target.src;
        my_div.style.display = 'none';
        sel.onclick=null;
        sel = null;
      }
    };
    ...
} 
```

最后，进行调整`addImage`，以便`sel`在单击图像时进行设置。

```
function addImage(col) {
    ...
    img.onclick = function () {
        my_div.style.display = 'block';
        sel = img;
    }
    ...
} 
```

这里的所有都是它的！**[例子](http://jsfiddle.net/NyxCu/12/)**。

请注意，如果您注释掉`sel.onclick = null`，您可以随意更改特定单元格的图像。

# c++ - 在 Qt 的另一个类中发出一个插槽信号

> ID：14172374
> 
> 赞同：1
> 
> 时间：2013-01-05T13:48:29.863
> 
> 标签：c++, qt, signals

**情况**：我`Dialog`在 Qt 中有一堂课，我在上面画了一个正方形的栅格。正方形在`MySquare`类中实现（MySquare：QGraphicsItem）。

**问题**：我想向 Dialog 槽发出信号，`setTarget()`表明单击了一个正方形（显然我想给它一些关于该正方形的信息，例如稍后它的 x 和 y 坐标）。但是我得到一个“未定义的引用`MySquare::targetChanged()`”错误。我一直在寻找解决方案，但没有找到任何解决方案；有人有想法吗？

编辑：我在 MySquare 中添加了一个 Q_OBJECT 宏，但是错误并没有消失，我得到一个额外的“'未定义引用' `vtable for MySquare()`'错误

*对话框.h*

```
class Dialog : public QDialog
{
    Q_OBJECT

public:
    explicit Dialog(QWidget *parent = 0);

  ~Dialog();

public slots:
    void setTarget();

private:
    Ui::Dialog *ui;
    QGraphicsScene *scene;
}; 
```

*对话框.cpp*

```
Dialog::Dialog(QWidget *parent) : QDialog(parent), ui(new Ui::Dialog)
{
    ui->setupUi(this);

    scene = new QGraphicsScene(this);
    ui->graphicsView->setScene(scene);

    MySquare *item;

    item = new MySquare(30,30,30,30);
    QObject::connect(item,SIGNAL(targetChanged()),this,SLOT(setTarget()));
}

void Dialog::setTarget(){
    qDebug() << "signal recieved" << endl;
} 
```

*mysquare.h*

```
#include <QGraphicsItem>
#include <QPainter>
#include <QDebug>
#include <QKeyEvent>
#include <QObject>

class MySquare : public QGraphicsItem, public QObject
{

Q_OBJECT

public:
    MySquare(int x,int y,int h, int w);
    QRectF boundingRect() const;
    void paint(QPainter *painter, const QStyleOptionGraphicsItem *option, QWidget *widget);
    int x,y,h,w;

signals:
    void targetChanged();

protected:
    void mousePressEvent(QGraphicsSceneMouseEvent *event);
    void mouseReleaseEvent(QGraphicsSceneMouseEvent *event);
    void mouseMoveEvent(QGraphicsSceneMouseEvent *event);
}; 
```

*mysquare.cpp*

```
#include "mysquare.h"
#include <QGraphicsSceneDragDropEvent>
#include <QWidget>

MySquare::MySquare(int _x,int _y, int _w, int _h)
{

    setAcceptDrops(true);
    color=Qt::red;
    color_pressed = Qt::green;
    x = _x;
    y = _y;
    w = _w;
    h = _h;
}

QRectF MySquare::boundingRect() const
{
    return QRectF(x,y,w,h); 
}

void MySquare::paint(QPainter *painter, const QStyleOptionGraphicsItem *option, QWidget *widget)
{
    QRectF rec = boundingRect();
    QBrush brush(color);

        if (Pressed){
            brush.setColor(color);
        } else {
            brush.setColor(color_pressed);
        }

    painter->fillRect(rec,brush);
    painter->drawRect(rec);
}

void MySquare::mousePressEvent(QGraphicsSceneMouseEvent *event)
{
    Pressed=true;
    update();
    QGraphicsItem::mousePressEvent(event);

    emit targetChanged();
}

void MySquare::mouseReleaseEvent(QGraphicsSceneMouseEvent *event)
{
    Pressed=false;
    update();
    QGraphicsItem::mouseReleaseEvent(event);
    qDebug() << "mouse Released";
}

void MySquare::mouseMoveEvent(QGraphicsSceneMouseEvent *event){
    qDebug() << "mouse Moved";
    QDrag *drag = new QDrag(event->widget());
    QMimeData *mime = new QMimeData;
    drag->setMimeData(mime);
    drag->exec();
}

void MySquare::keyPressEvent(QKeyEvent *event){
    //out of bounds check?
    int x = pos().x();
    int y = pos().y();

    QGraphicsItem::keyPressEvent(event);

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-05T14:02:03.297

编辑：如果您对 vtable 有未定义的引用，那么可能是因为您没有实现某些虚函数。您是否在`MySquare`某处实现了该类的鼠标事件处理程序？你也实现了类的`boundingRect()`和`paint()`功能`MySquare`吗？

旧答案：您需要`Q_OBJECT`在类中打开“{”之后编写宏`MySquare`。Qt 也会在某些时候抱怨多重继承。因此，不是从`QGraphicsItem`and`QObject`继承，`QGraphicsObject`而是从继承。

链接器抱怨缺少函数定义的实际原因如下：当您将`Q_OBJECT`宏放入正确的位置时，Qt 元对象编译器 (MOC) 将为项目生成一个新的 cpp 文件，其中包含相应类的信号功能。因此，Qt 为您实现了每个信号的功能。如果您不插入`Q_OBJECT`宏，那么 MOC 将不会为您做任何事情，并且链接器将缺少信号的函数定义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T20:31:27.997

尝试执行以下步骤：

构建-清理构建-运行 qmake 构建-构建。

添加 Q_Object Makro 后，可能未在 Makefile 中设置 moc 选项。因此，您必须刷新您的 Makefile。

希望这可以帮助。

# android - 当应用程序在 Android 中进入后台时，警报对话框不会关闭

> ID：14172378
> 
> 赞同：1
> 
> 时间：2013-01-05T13:48:48.030
> 
> 标签：android, android-alertdialog, android-dialog

我使用了以下代码：

```
Alertdialog alertDialog =null;
AlertDialog.Builder builder=new Builder(this);
        builder.setTitle(title);
        builder.setMessage(message);

        builder.setPositiveButton("OK", new DialogInterface.OnClickListener() {

            public void onClick(DialogInterface dialog, int which) {

            }
        });
        alertDialog=builder.create();
        builder.create().show(); 
```

当我单击主页键（“确定”按钮中没有任何用户事件）时，我使用以下代码关闭警报对话框：

```
@Override
    protected void onPause() {

            if(alertDialog != null){
               alertDialog.dismiss();
            }

        }

        super.onPause();
    } 
```

重新启动应用程序时，警报对话框不会消失。

我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T14:04:49.183

问题是您在这里创建了两个 AlertDialog 实例：

```
alertDialog=builder.create();
builder.create().show(); 
```

然后你在实际上没有显示的对话框上调用了dismiss()。这应该可以解决问题：

```
alertDialog=builder.show(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-12-18T06:19:03.607

我在 onPause() 中调用了 dismiss() 但它不起作用，因为我将变量设置为**static**。

当我删除**静态**词时，这个问题得到了解决......

# c# - wcf 连接超时重试

> ID：14172379
> 
> 赞同：0
> 
> 时间：2013-01-05T13:49:05.290
> 
> 标签：c#, wcf

下面是我的 WCF 连接代码。如果连接超时，我想重试 3 次。我怎样才能做到这一点？谢谢达摩

**C# 代码**

```
 // Get the status from the client machine
                ServiceReference1.JobsClient Client = new ServiceReference1.JobsClient();
                Client.Endpoint.Address = new System.ServiceModel.EndpointAddress(ConfigurationManager.AppSettings["ServicePath"]);
                FactoryAuditEventNotification.ServiceReference1.ReturnClass SystemStatus_Result;
                SystemStatus_Result = Client.SystemState(System.Environment.MachineName);

                if (SystemStatus_Result.ErrorCode < 0) // Error, set the textbox state
                    this.textBoxState.BeginInvoke((MethodInvoker)(() => this.textBoxState.Text = "Unknown"));
                else
                    this.textBoxState.BeginInvoke((MethodInvoker)(() => this.textBoxState.Text = "Success")); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T14:34:03.687

为什么不使用 for 循环？

```
for(int currentCount = 1;currentCount <= 3;currentCount++)
{
    try
    {
    //your connection logic
    }
    catch(EndpointNotFoundException)
    {
    //throw after three retries
    if(currentCount == 3)
        throw;
    }
    catch(Exception)
    {
    //Handle other exceptions as necessary
    }
} 
```

# wordpress - 在页面刷新之前，购物车 WP 不会显示所选商品

> ID：14172380
> 
> 赞同：0
> 
> 时间：2013-01-05T13:49:13.340
> 
> 标签：wordpress, woocommerce, refresh, cart, shopping-cart

目前我正在尝试使用 WooCommerce 在 WordPress 中建立一个网上商店。有一个内置的购物车，但是一旦选择了要添加到购物车的商品，它就不会自行刷新。

但是，如果我刷新页面，它会显示该项目。有没有办法在不使用刷新的情况下使这个购物车动态和变化？

```
var $woo_widget_cssclass;
var $woo_widget_description;
var $woo_widget_idbase;
var $woo_widget_name;

/**
 * constructor
 *
 * @access public
 * @return void
 */
function WooCommerce_Widget_Cart() {

    /* Widget variable settings. */
    $this->woo_widget_cssclass      = 'widget_shopping_cart';
    $this->woo_widget_description   = __( "Display the user's Cart in the sidebar.", 'woocommerce' );
    $this->woo_widget_idbase        = 'woocommerce_widget_cart';
    $this->woo_widget_name          = __( 'WooCommerce Cart', 'woocommerce' );

    /* Widget settings. */
    $widget_ops = array( 'classname' => $this->woo_widget_cssclass, 'description' => $this->woo_widget_description );

    /* Create the widget. */
    $this->WP_Widget( 'shopping_cart', $this->woo_widget_name, $widget_ops );
}

/**
 * widget function.
 *
 * @see WP_Widget
 * @access public
 * @param array $args
 * @param array $instance
 * @return void
 */
function widget( $args, $instance ) {
    global $woocommerce;

    extract( $args );

    if ( is_cart() || is_checkout() ) return;

    $title = apply_filters('widget_title', empty( $instance['title'] ) ? __('Cart', 'woocommerce') : $instance['title'], $instance, $this->id_base );
    $hide_if_empty = empty( $instance['hide_if_empty'] )  ? 0 : 1;

    echo $before_widget;

    if ( $title )
        echo $before_title . $title . $after_title;

    $woocommerce->mfunc_wrapper( 'woocommerce_mini_cart()', 'woocommerce_mini_cart', array( 'list_class' => $hide_if_empty ? 'hide_cart_widget_if_empty' : '' ) );

    echo $after_widget;

    if ( $hide_if_empty && sizeof( $woocommerce->cart->get_cart() ) == 0 ) {
        $woocommerce->add_inline_js( "
            jQuery('.hide_cart_widget_if_empty').closest('.widget').hide();
            jQuery('body').bind('adding_to_cart', function(){
                jQuery(this).find('.hide_cart_widget_if_empty').closest('.widget').fadeIn();
            });
        " );
    }
}

/**
 * update function.
 *
 * @see WP_Widget->update
 * @access public
 * @param array $new_instance
 * @param array $old_instance
 * @return array
 */
function update( $new_instance, $old_instance ) {
    $instance['title'] = strip_tags( stripslashes( $new_instance['title'] ) );
    $instance['hide_if_empty'] = empty( $new_instance['hide_if_empty'] ) ? 0 : 1;
    return $instance;
}

/**
 * form function.
 *
 * @see WP_Widget->form
 * @access public
 * @param array $instance
 * @return void
 */
function form( $instance ) {
    $hide_if_empty = empty( $instance['hide_if_empty'] ) ? 0 : 1;
    ?>
    <p><label for="<?php echo $this->get_field_id('title'); ?>"><?php _e('Title:', 'woocommerce') ?></label>
    <input type="text" class="widefat" id="<?php echo esc_attr( $this->get_field_id('title') ); ?>" name="<?php echo esc_attr( $this->get_field_name('title') ); ?>" value="<?php if (isset ( $instance['title'])) {echo esc_attr( $instance['title'] );} ?>" /></p>

    <p><input type="checkbox" class="checkbox" id="<?php echo esc_attr( $this->get_field_id('hide_if_empty') ); ?>" name="<?php echo esc_attr( $this->get_field_name('hide_if_empty') ); ?>"<?php checked( $hide_if_empty ); ?> />
    <label for="<?php echo $this->get_field_id('hide_if_empty'); ?>"><?php _e( 'Hide if cart is empty', 'woocommerce' ); ?></label></p>
    <?php
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T14:33:20.253

问题已解决，对于有同样问题的任何人。在您的 wordpress 后端中，转到 WooCommerce>Settings，然后为购物车功能打开 ajax。一旦添加了项目，它就会自行加载页面。

# iphone - iOS（Monotouch）应用程序在 viewWillAppear 上崩溃

> ID：14172385
> 
> 赞同：0
> 
> 时间：2013-01-05T13:49:46.270
> 
> 标签：iphone, ios, xamarin.ios, monotouch.dialog, segmentation-fault

我有一个加载`DialogViewController`. 这包含几个元素。其中一个元素是`RootElement`. 此 RootElement 包含一个`EntryElement`.

在`viewDidAppear`中，我从 回来`EntryElement`，并且在 entry 元素中有一个值（即我刚刚添加了该值）我想使用该值作为我视图中的标题。

视图是在父控制器中创建的：

```
 public TabBarController ()
    {
        root = new RootElement("My Budget");
        root.UnevenRows = true;

        tab1 = new TestController(root);

        nav = new UINavigationController(tab1);
        nav.Title = "Budget";

        var tabs = new UIViewController []{
            nav
        };

        ViewControllers = tabs;
        SelectedViewController = nav;
    } 
```

然后在控制器中——魔法[应该]发生

```
 public override void ViewWillAppear (bool animated)
    {
        base.ViewWillAppear (animated);
        var caption = "Value..";

        if (BankElement != null && !String.IsNullOrWhiteSpace (BankElement.Value)){
            caption = BankElement.Value;
        }

        MyRoot = new RootElement ("Root");
        MyRoot.Caption = caption;
        BankElement = new EntryElement("Enter", caption, "");

        MyRoot.Add (new Section("") {BankElement});
        rootelement = new RootElement("Root");
        rootelement.Add (new Section("") {MyRoot});

        Root  = rootelement;
    } 
```

但是，当`viewDidAppear`运行时我可以进行堆栈跟踪。我不是每次都明白——只是偶尔。

堆栈跟踪：

```
 at (wrapper managed-to-native) MonoTouch.UIKit.UIApplication.UIApplicationMain (int,string[],intptr,intptr) <IL 0x0009f, 0xffffffff>
  at MonoTouch.UIKit.UIApplication.Main (string[],string,string) [0x0004c] in /Developer/MonoTouch/Source/monotouch/src/UIKit/UIApplication.cs:38
  at BudgetPlanner.Application.Main (string[]) [0x00000] in /Users/Ashley/github/local/BudgetPlanner/BudgetPlanner/Main.cs:18
  at (wrapper runtime-invoke) <Module>.runtime_invoke_void_object (object,intptr,intptr,intptr) <IL 0x00050, 0xffffffff> 
```

本机堆栈跟踪：

```
0   BudgetPlanner                       0x00095f7c mono_handle_native_sigsegv + 284
1   BudgetPlanner                       0x0000be98 mono_sigsegv_signal_handler + 248
2   libsystem_c.dylib                   0x908bd86b _sigtramp + 43
3   ???                                 0xffffffff 0x0 + 4294967295
4   UIKit                               0x028014d0 -[UITextField canResignFirstResponder] + 33
5   UIKit                               0x0284761f -[UIResponder resignFirstResponder] + 82
6   UIKit                               0x02801b36 -[UITextField resignFirstResponder] + 141
7   UIKit                               0x0277f517 -[UIView(Hierarchy) _removeFirstResponderFromSubtree] + 209
8   UIKit                               0x0277f873 __UIViewWillBeRemovedFromSuperview + 77
9   UIKit                               0x0277f783 -[UIView(Hierarchy) removeFromSuperview] + 70
10  UIKit                               0x029b73fe -[UINavigationTransitionView _cleanupTransition] + 103
11  UIKit                               0x029b7698 -[UINavigationTransitionView _navigationTransitionDidStop] + 55
12  UIKit                               0x027773b6 -[UIViewAnimationState sendDelegateAnimationDidStop:finished:] + 237
13  UIKit                               0x02777554 -[UIViewAnimationState animationDidStop:finished:] + 68
14  QuartzCore                          0x04bc57d8 _ZN2CA5Layer23run_animation_callbacksEPv + 284
15  libdispatch.dylib                   0x04186014 _dispatch_client_callout + 14
16  libdispatch.dylib                   0x041767d5 _dispatch_main_queue_callback_4CF + 296
17  CoreFoundation                      0x012fcaf5 __CFRunLoopRun + 1925
18  CoreFoundation                      0x012fbf44 CFRunLoopRunSpecific + 276
19  CoreFoundation                      0x012fbe1b CFRunLoopRunInMode + 123
20  GraphicsServices                    0x04d237e3 GSEventRunModal + 88
21  GraphicsServices                    0x04d23668 GSEventRun + 104
22  UIKit                               0x0273965c UIApplicationMain + 1211
23  ???                                 0x0b4ee83c 0x0 + 189720636
24  ???                                 0x0b4eb0a0 0x0 + 189706400
25  ???                                 0x0b4ea7f8 0x0 + 189704184
26  ???                                 0x0b4ea903 0x0 + 189704451
27  BudgetPlanner                       0x00010252 mono_jit_runtime_invoke + 722
28  BudgetPlanner                       0x0017478e mono_runtime_invoke + 126
29  BudgetPlanner                       0x00178be4 mono_runtime_exec_main + 420
30  BudgetPlanner                       0x00178f55 mono_runtime_run_main + 725
31  BudgetPlanner                       0x0006ba65 mono_jit_exec + 149
32  BudgetPlanner                       0x0021f65d main + 2013
33  BudgetPlanner                       0x00003125 start + 53

=================================================================
Got a SIGSEGV while executing native code. This usually indicates
a fatal error in the mono runtime or one of the native libraries 
used by your application.
================================================================= 
```

这是控制器的一个非常简化的版本 - 仅显示根视图 - 在真实控制器中还有更多数据。

关于这个例外的任何想法？现在真的开始让我困惑了。

（在模拟器上运行 Monotouch 6.0.8）

谢谢阿什...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T23:19:59.007

我自己解决了这个问题。

我认为的问题是我在每次重新加载时都替换了根元素以刷新它。我已经修改了代码：

```
 public override void ViewWillAppear (bool animated)
    {
        base.ViewWillAppear (animated);
        var caption = "Value..";

        if (BankElement != null && !String.IsNullOrWhiteSpace (BankElement.Value)) {
            caption = BankElement.Value;
        }

        if (MyRoot == null) {
            MyRoot = new RootElement ("Root");
            BankElement = new EntryElement("Enter", caption, "");
            MyRoot.Add (new Section("") {BankElement});
            rootelement = new RootElement("Root");
            rootelement.Add (new Section("") {MyRoot});

            Root  = rootelement;
        }

        MyRoot.Caption = caption;
    } 
```

所以现在我只创建一个根元素并将其添加到控制器一次，然后我只更新它。到目前为止看起来不错！

# php - PHP：在忽略某些前缀的同时匹配重复的文本行

> ID：14172389
> 
> 赞同：1
> 
> 时间：2013-01-05T13:50:09.483
> 
> 标签：php, duplicate-removal

我的文字（`...`是它的实际部分）：

```
(01) Text here
(02) sometimes also (with brackets)
(03) foo
(05) and [other stuff!?]
...
(07) foo
(08) bar
(09) bar 
```

查找重复的行`(XX) foo`并`(XX) bar`打印它们。

```
//workaround
$tNormalized = preg_replace('/(*ANYCRLF)^\(\d+\) /m', '(??) ', $t);

$arr = explode("\n", $tNormalized);
if ( count($arr) > 1 )  {
    for ($i=1; $i<count($arr); $i++) {
        if( $arr[$i-1] == $arr[$i] ) {
            echo "Match:<br>";
            echo $arr[$i-1];
            echo $arr[$i];
        }
  }
} 
```

期望的结果：

```
Match:
(03) foo
(07) foo

Match:
(08) bar
(09) bar 
```

*   ~~问题 1~~：匹配重复行，同时忽略行首括号中的数字。我想打印括号中的数字。将它们规范化为“（？？）”只是一种解决方法。
*   ~~问题 2~~ : `if( $arr[$i-1] == $arr[$i] )`: 这会检查上一行。但也要检查`$arr[$i-2]`等`$arr[$i-3]`。

测试：[http ://codepad.viper-7.com/4IQV8x](http://codepad.viper-7.com/4IQV8x)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T14:11:11.797

在您的正则表达式中，您一开始不需要任何 CRLF。

`preg_replace('/^\(\d+\) /m', '(??) ', $t);`

您可以在循环之前对数组进行排序，以便检查彼此相邻的项目就足够了。

`sort($arr);`

# jquery - 带有 getJSON 和回调的 jQuery 承诺

> ID：14172392
> 
> 赞同：8
> 
> 时间：2013-01-05T13:51:21.163
> 
> 标签：jquery, getjson, jquery-deferred, promise

我有一个带有回调的 ajax 调用。我想在回调结束后调用另一个方法。我使用了 jQuery 的 promise API，但正如你在下面看到的，第二个方法在第一个方法完成之前被调用。

有任何想法吗？

```
 my.data = function () {
     var loadFlights = function (callback) {
        //$.getJSON("/api/Acceptance/", function (data) {
        //    callback(data);
        //}); 
        $.getJSON("/api/Acceptance").success(function (data) {
           console.log("first: " + new Date().getTime());
           callback(data); 
        })
        .then(console.log("second:" + new Date().getTime()));
     };

     return { load: loadFlights }
  }(); 
```

结果控制台：

```
second:1357393615115 
first: 1357393615246 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-05T13:55:18.317

您没有向 提供回调函数`.then()`，而是传入 的输出`console.log("second:" + new Date().getTime())`（这就是`second`立即打印的原因）。

创建一个匿名函数来包装您要调用的代码（就像您在 中所做的那样`.success()`）：

```
$.getJSON("/echo/json").success(function(data) {
  console.log("first: " + new Date().getTime());
}).then(function() {
  console.log("second:" + new Date().getTime())
}); 
```

**演示：http: [//jsfiddle.net/Blender/fJb7h/](http://jsfiddle.net/Blender/fJb7h/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-07-05T19:10:29.223

试试这个：

```
// Assign handlers immediately after making the request,
// and remember the jqxhr object for this request
var jqxhr = $.getJSON( "example.json", function() {
  console.log( "success" );
})
  .done(function() {
    console.log( "second success" );
  })
  .fail(function() {
    console.log( "error" );
  })
  .always(function() {
    console.log( "complete" );
  });

// Perform other work here ...

// Set another completion function for the request above
jqxhr.complete(function() {
  console.log( "second complete" );
}); 
```

参考： [https ://api.jquery.com/jquery.getjson/](https://api.jquery.com/jquery.getjson/)

# sql-server - SQL Server 使用 OPENROWSET 重复错误

> ID：14172394
> 
> 赞同：1
> 
> 时间：2013-01-05T13:51:49.800
> 
> 标签：sql-server, windows-server-2008

我正在运行以下查询来导入 csv 文件：

```
SELECT * FROM OPENROWSET('MSDASQL', 'Driver={Microsoft Text Driver (*.txt; *.csv)};DBQ=D:\Documents\;', 'SELECT * from file.csv') AS something 
```

我收到此错误：

```
OLE DB provider "MSDASQL" for linked server "(null)" returned message "[Microsoft][ODBC Driver Manager] Data source name not found and no default driver specified".
Msg 7303, Level 16, State 1, Line 1
Cannot initialize the data source object of OLE DB provider "MSDASQL" for linked server "(null)". 
```

这是我为尝试解决问题所做的工作，但都不够：

1.  MsSQL 和 IIS 可以访问相关文件夹和文件。他们还可以访问运行 SQL Server 的网络服务的临时文件夹。
2.  我使用 sp_configure 启用了 Ad Hoc 分布式查询
3.  我已通过将注册表项 DisallowAdhocAccess 设置为 0 来修复它
4.  我已安装 Microsoft Access Database Engine 2010 Redistributable

该系统是运行 SQL Server 2012 Express 的 Windows 2008 Server，但 SQL Server 2008 也出现了该问题。

在这一点上，任何随机的想法都会受到赞赏:)。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T01:26:14.807

答案很简单，但文档很少：MSDASQL 驱动程序不能很好地与 64 位安装的 SQL Server 一起工作。

[在此线程](http://social.msdn.microsoft.com/Forums/fi-FI/sqldataaccess/thread/2ed22711-80ea-4d90-b28f-0e9e6a7655eb)中有更多关于此的信息，但出于我的目的，“降级”到 32 位实例是一个足够的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-08T15:43:19.133

有用。只需确保驱动程序的名称与控制面板 ODBC 数据源（64 位）中显示的完全一致。就我而言，正确的名称是“'Driver={Microsoft Access Text Driver (*.txt, *.csv)}”，我在装有 Windows 8.1 64 位的机器上使用它。

问候，

马里亚诺 C.

# objective-c - 在哪里存储项目范围的配置变量？

> ID：14172396
> 
> 赞同：1
> 
> 时间：2013-01-05T13:51:58.603
> 
> 标签：objective-c, ios

> **可能重复：**
> [在 iOS 应用程序中的哪里存储全局常量？](https://stackoverflow.com/questions/7116177/where-to-store-global-constants-in-an-ios-application)

我想将配置变量存储在一个中心位置。变量在运行时不会改变。它们应该可以从项目中的任何类访问。

我目前的方法是有一个**GlobalSettings.h**文件，其中定义了这样的配置变量

```
#define kCacheAge 10.0 //Max. Cache Age in Seconds
#define kNavigationTitleTint colorWithRed:0.443 green:0.471 blue:0.502 alpha:1.0
#define kNavigationTitleFont boldSystemFontOfSize:20.0 
```

...并在我需要的任何地方包括他们的名字。

缺点：

*   我需要在每个类中手动包含这个 GlobalSettings.h 文件
*   我不能将这些常量作为字符串的一部分插入（字符串处理似乎*比*替换操作强）

有没有更好的方法来做到这一点，也许可以避免提到的缺点？存储配置变量的任何最佳实践？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-05T15:15:28.587

如果您`GlobalSetting.h`在项目 Prefix Header 中包含您的标题，它将自动包含在您项目中的每个文件中。在您的项目中查找名为`<YourProjectName>-Prefix.pch`. iOS 项目的标准项目如下所示：

```
//
// Prefix header for all source files of the 'IOSTest' target in the 'IOSTest' project
//

#import <Availability.h>

#ifndef __IPHONE_5_0
#warning "This project uses features only available in iOS SDK 5.0 and later."
#endif

#ifdef __OBJC__
    #import <UIKit/UIKit.h>
    #import <Foundation/Foundation.h>
#endif 
```

在这种情况下，您将`#import "GlobalSettings.h"`在 Foundation 导入下方添加。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-01-05T13:56:50.983

一种选择是 INI 文件，因为一旦值更改，它们就不需要重新编译。

可以[在此线程](https://stackoverflow.com/questions/6198522/reading-classical-ini-file-on-iphone)中找到一个简单的（未经我测试）示例。

# java - org.hibernate.MappingException：外键 XXX 的列数必须与引用的主键 YYY 相同

> ID：14172401
> 
> 赞同：2
> 
> 时间：2013-01-05T13:52:41.320
> 
> 标签：java, hibernate, jpa, orm, hibernate-mapping

具有以下 SQL 表：

```
create table users_posts_ratings_map (
  postId integer not null references posts (id),
  userId integer not null references users (id),
  ratingId integer not null references ratings (id),
  primary key (postId, userId)
); 
```

并遵循 JPA 注释的 POJO：

RatingId.java：

```
@Embeddable
public class RatingId implements Serializable {
    @ManyToOne
    @JoinColumn(name = "userId")
    private User user;

    @ManyToOne
    @JoinColumn(name = "postId")
    private Post post;

    // getters and setters
} 
```

UserPostRating.java：

```
@Entity(name = "users_posts_ratings_map")
public class UserPostRating {
    @EmbeddedId
    private RatingId userPost;

    @OneToOne
    @JoinColumn(name = "ratingId")
    private Rating rating;

    // getters and setters
} 
```

Post.java

```
@Entity(name = "posts")
public class Post {
    @Id
    @Column(nullable = false)
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Integer id;

    // irrelevant fields

    @ManyToMany
    @JoinTable(
            name = "users_posts_ratings_map",
            joinColumns = { @JoinColumn(name = "ratingId") },
            inverseJoinColumns = { @JoinColumn(name = "postId"), @JoinColumn(name = "userId") }
    )
    private Set<UserPostRating> ratings = new HashSet<>();

    // getters and setters
} 
```

我正进入（状态

```
org.hibernate.MappingException: Foreign key (FKB278E73083D94769:users_posts_ratings_map [postId,userId])) must have same number of columns as the referenced primary key (users_posts_ratings_map [ratingId,postId,userId]) 
```

在 servlet 容器初始化阶段。

这是什么意思（这个映射中的外键是什么？主键是什么？哪些注释标记了什么？）以及如何修复它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-05T14:11:45.007

这种映射没有多大意义。您有一个实体`UserPostRating`，映射到`users_posts_ratings_map`，并与该实体有`ManyToOne`关联`Post`。

在 中`Post`，您有一组`UserPostRating`，但您将其映射为第二个关联，并使其成为`ManyToMany`. 它不是一个`ManyToMany`. 它是 a `OneToMany`，因为另一边是 a `ManyToOne`。并且由于双向关联已经映射到 中`UserPostRating`，您不能在 中再次映射它`Post`。所以代码应该是：

```
@OneToMany(mappedBy="userPost.post")
private Set<UserPostRating> ratings = new HashSet<>(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-11-28T02:24:28.490

映射是正确的，因为它是多对多映射，所以它的映射将导致新表。因此，您不应引用现有实体表，而应提供任何其他名称，其映射/实体名称不存在。下面是你的例子：

```
 @ManyToMany
    @JoinTable(
            name = "users_posts_ratings_map",
            joinColumns = { @JoinColumn(name = "ratingId") },
            inverseJoinColumns = { @JoinColumn(name = "postId"), @JoinColumn(name = "userId") }
    )
    private Set<UserPostRating> ratings = new HashSet<>(); 
```

**将名称从更改** `"users_posts_ratings_map"`为任何其他名称，例如`users_posts_ratings_map1`或`users_posts_ratings_map_item`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-05T14:10:50.037

根据我怀疑的错误消息，您必须移动定义

```
@OneToOne
@JoinColumn(name = "ratingId")
private Rating rating; 
```

从课堂`UserPostRating`到课堂`RatingId`。

# c# - “johny.Form1”不包含“Form1_Load”的定义

> ID：14172404
> 
> 赞同：2
> 
> 时间：2013-01-05T13:52:57.307
> 
> 标签：c#, event-handling

我有这个错误：

> 错误 1“johny.Form1”不包含“Form1_Load”的定义，并且找不到接受“johny.Form1”类型的第一个参数的扩展方法“Form1_Load”（您是否缺少 using 指令或程序集引用？）

这是表单设计器的代码：

```
 // 
    // Form1
    // 
    this.AutoScaleDimensions = new System.Drawing.SizeF(6F, 13F);
    this.AutoScaleMode = System.Windows.Forms.AutoScaleMode.Font;
    this.ClientSize = new System.Drawing.Size(456, 411);
    this.Controls.Add(this.l6);
    this.Controls.Add(this.label1);
    this.Name = "Form1";
    this.Text = "Form1";
    this.Load += new System.EventHandler(this.Form1_Load);
    this.ResumeLayout(false);
    this.PerformLayout(); 
```

错误来自这一行：

```
 this.Load += new System.EventHandler(this.Form1_Load); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-05T13:56:15.930

该错误告诉您您的类中没有`Form1_Load`方法`Form1`，并且您正在尝试使用一个方法。

如果您在表单首次加载时不需要进行任何初始化，请删除该行，或者确保您确实有一个（符合`EventHandler`委托的签名）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-05T13:58:33.483

这意味着里面没有任何`Form1_Load`方法`Form1`。要解决这个问题，您要么需要删除该事件处理程序生成的代码，要么在 `Form1`中添加一个`Form1_Load`方法，例如：

```
 this.Load += new System.EventHandler(this.Form1_Load); // <----- REMOVE THIS 
```

或者：

```
public partial class Form1
{
...
Form1_Load(object sender, System.EventArgs e)
{
// Do whatever
}
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-05T13:58:51.600

删除这个：

```
this.Load += new System.EventHandler(this.Form1_Load); 
```

或实现方法：

```
private void Form1_Load(object sender, System.EventArgs e)
{
    //your code
} 
```

# c - 在完美运行的程序中检测到缓冲区溢出（显然）

> ID：14172409
> 
> 赞同：3
> 
> 时间：2013-01-05T13:53:10.270
> 
> 标签：c, buffer, overflow

在包含 as、bs 和 cs 的字符串上，我们可以执行以下操作。我们可以取任意两个相邻的不同字符并将它们替换为第三个。例如，“ab”被简化为“c”，“ba”也是如此，依此类推。我编写了这段代码来对 t 个字符串 (t<=100) 和最大字符串长度 = 100 执行以下操作

```
#include<stdio.h>
#include<string.h>
#include<stdlib.h>

int redlen(char string[100][100], int x)
{
    int g, checker; checker = 1;
    for(; checker; )
    {
    checker = 0;
    for(int i = 0;string[x][i]!='\0'; i++)
    {
        if((string[x][i]=='a' && string[x][i+1]=='b') || (string[x][i]=='b' && string[x][i+1]=='a'))
        {
            string[x][i]='c';
            checker = 1;
            for(g = i+1; string[x][g]!='\0'; g++)
            {
                string[x][g]=string[x][g+1];
            }
            i = 0;  
        }   
        else if((string[x][i]=='b' && string[x][i+1]=='c') || (string[x][i]=='c' && string[x][i+1]=='b'))
        {
            string[x][i]='a';
            checker = 1;
            for(g = i+1; string[x][g]!='\0'; g++)
            {
                string[x][g]=string[x][g+1];
            }
            i = 0;
        }
        else if((string[x][i]=='a' && string[x][i+1]=='c') || (string[x][i]=='c' && string[x][i+1]=='a'))
        {
            string[x][i]='b';
            checker = 1;
            for(g = i+1; string[x][g]!='\0'; g++)
            {
                string[x][g]=string[x][g+1];
            }
            i = 0;          
        }   
    }   
}
return strlen(string[x]);
}           

void main()
{
    int t; char r[3];
    gets(r);
    t = atoi(r);
    char string[100][100];
    int i;
    for(i = 0; i<t; i++)
    {
        gets(string[i]);
    }
    int printval;
    for(i = 0; i<t; i++)
    {
            printval = redlen(string, i);
            printf("%d",printval);
            printf(" \n");
    }
} 
```

它适用于问题的示例案例以及我自己开发的案例。但是当我在网上提交的时候，它只通过了十个案例中的一个，其余的都弹出了这个消息。

```
 *** buffer overflow detected ***: /run-DkQcMiKXhWz9LjirrRnu/solution terminated
======= Backtrace: =========
/lib/i386-linux-gnu/tls/i686/nosegneg/libc.so.6(__fortify_fail+0x45)[0xb76df045]
/lib/i386-linux-gnu/tls/i686/nosegneg/libc.so.6(+0x102e1a)[0xb76dde1a]
/lib/i386-linux-gnu/tls/i686/nosegneg/libc.so.6(__gets_chk+0x165)[0xb76ddd85]
/run-DkQcMiKXhWz9LjirrRnu/solution[0x8048436]
/lib/i386-linux-gnu/tls/i686/nosegneg/libc.so.6(__libc_start_main+0xf3)[0xb75f44d3]
/run-DkQcMiKXhWz9LjirrRnu/solution[0x80484e9]
======= Memory map: ========
08048000-08049000 r-xp 00000000 ca:02 15613970 /run-DkQcMiKXhWz9LjirrRnu/solution
08049000-0804a000 r--p 00000000 ca:02 15613970 /run-DkQcMiKXhWz9LjirrRnu/solution
0804a000-0804b000 rw-p 00001000 ca:02 15613970 /run-DkQcMiKXhWz9LjirrRnu/solution
084e2000-08503000 rw-p 00000000 00:00 0 [heap]
b75ba000-b75d6000 r-xp 00000000 ca:01 394527 /lib/i386-linux-gnu/libgcc_s.so.1
b75d6000-b75d7000 r--p 0001b000 ca:01 394527 /lib/i386-linux-gnu/libgcc_s.so.1
b75d7000-b75d8000 rw-p 0001c000 ca:01 394527 /lib/i386-linux-gnu/libgcc_s.so.1
b75d8000-b75db000 rw-p 00000000 00:00 0 
b75db000-b777e000 r-xp 00000000 ca:01 394522 /lib/i386-linux- gnu/tls/i686/nosegneg/libc-2.15.so
b777e000-b777f000 ---p 001a3000 ca:01 394522 /lib/i386-linux-gnu/tls/i686/nosegneg/libc-2.15.so
b777f000-b7781000 r--p 001a3000 ca:01 394522 /lib/i386-linux-gnu/tls/i686/nosegneg/libc-2.15.so
b7781000-b7782000 rw-p 001a5000 ca:01 394522 /lib/i386-linux-gnu/tls/i686/nosegneg/libc-2.15.so
b7782000-b7789000 rw-p 00000000 00:00 0 
b7789000-b778a000 r-xp 00000000 00:00 0 [vdso]
b778a000-b77aa000 r-xp 00000000 ca:01 400153 /lib/i386-linux-gnu/ld-2.15.so
b77aa000-b77ab000 r--p 0001f000 ca:01 400153 /lib/i386-linux-gnu/ld-2.15.so
b77ab000-b77ac000 rw-p 00020000 ca:01 400153 /lib/i386-linux-gnu/ld-2.15.so
bfe6e000-bfe8f000 rw-p 00000000 00:00 0 [stack]
Aborted (core dumped) 
```

在所有情况下都不完全相同，但几乎相同。请帮忙。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-05T13:56:15.490

```
 int t; char r[3];
   gets(r); 
```

永远不要使用`gets`函数。在这种情况下，如果它接收到多个`3`字符（包括终止空字符），则会出现缓冲区溢出。

`gets`已在当前标准 (C11) 中删除，并在之前的标准 (C99) 中已弃用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-05T13:59:52.647

该代码可能输入了一个 100 个字符的字符串，需要 101 个字节来存储（包括末尾的 NUL 字节）！此外，永远，**永远不要**`gets()`在任何旨在健壮的代码中使用该函数。Try `getline()`，它会自动为您扩展缓冲区。

此外，您可以使用此类回溯`addr2line`来解码地址。`-g`用和编译`-rdynamic`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-05T14:04:17.443

这个

```
char r[3];
gets(r); 
```

对于超过 2 个字符加上换行符的任何输入，极有可能会中断。请注意，`gets`由于其缓冲区溢出问题，它已被 C 标准正式废弃。这些天我们一起使用一些东西

```
char r[42];

if (fgets (r, sizeof r, stdin) != NULL) { ... } 
```

这是安全的（它会截断输入并将其余部分留给下一个`fgets`）。

# php - PHP 准备语句错误：无法通过引用传递参数 2

> ID：14172411
> 
> 赞同：0
> 
> 时间：2013-01-05T13:53:33.157
> 
> 标签：php, prepared-statement

我花了一整天的时间试图找出这个问题，但没有运气。我已经看到了一些直接将常量用作参数的问题。我所有的论点都是变量。我错过了一些非常明显的东西吗？

```
$one = 1;
$two = 2;
$three = 3;

if (  !($stmt = $mysqli->prepare('INSERT INTO test3 (one, two, three) VALUES (?, ?, ?)'))  ) {
  echo "Prepare failed (".$stmt->errno.") ".$stmt->error."\n";
  $stmt->close();
  exit();
}

if (  !($stmt->bind_param('iii',$one,$two,$three))  ) {
  echo "Failed to bind (".$stmt->errno.") ".$stmt->error;
  $stmt->close();
  exit();
}

if (  !($stmt->execute)  ) {
  echo "Execute failed (". $stmt->errno.") ". $stmt->error."\n";
  $stmt->close();
  exit();
} 
```

编辑：我实际上正在使用`bind_param`但在尝试不同的东西后忘记将其更改回来。代码按原样复制和粘贴。将 bind_value 改回 bind_param 后，我仍然得到同样的错误。

编辑 2：我觉得很愚蠢，我用一个新名称保存了我的 php 文件，这样我就可以简化代码，但我忘记更改 POST 方法的 url 以反映该更改。所以我现在得到的错误是：`Undefined property: mysqli_stmt::$execute`以及mysql日志中的相应输出：

```
42 Connect     test@localhost on testdb
42 Prepare     [1] INSERT INTO test3 (one, two, three) VALUES (?, ?, ?)
42 Quit 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-13T12:56:21.743

在下面的代码中，我添加了一行代码。我遇到了同样的问题并再次检查文档这解决了我的问题。

```
$one = 1;
$two = 2;
$three = 3;

// This fixed my problem 
$stmt =  $mysqli->stmt_init();

if (  !($stmt = $mysqli->prepare('INSERT INTO test3 (one, two, three) VALUES (?, ?, ?)'))  ) {
  echo "Prepare failed (".$stmt->errno.") ".$stmt->error."\n";
  $stmt->close();
  exit();
}

if (  !($stmt->bind_param('iii',$one,$two,$three))  ) {
  echo "Failed to bind (".$stmt->errno.") ".$stmt->error;
  $stmt->close();
  exit();
}

if (  !($stmt->execute)  ) {
  echo "Execute failed (". $stmt->errno.") ". $stmt->error."\n";
  $stmt->close();
  exit();
} 
```

在此处查看文档[http://us.php.net/manual/en/mysqli.stmt-init.php](http://us.php.net/manual/en/mysqli.stmt-init.php) 您还将在[mysqli::prepare 页面中看到它正在使用](http://us.php.net/manual/en/mysqli-stmt.prepare.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T14:28:40.800

如果您使用 mysqli，则必须使用 bind_param 而不是 bind_value：

```
if (  !($stmt->bind_param('iii',$one,$two,$three))  ) {
  echo "Failed to bind (".$stmt->errno.") ".$stmt->error;
  $stmt->close();
  exit();
} 
```

BindValue 仅适用于 PDO 类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-04T12:48:12.370

您输入错误：`$stmt->execute` `execute`不是属性，而是方法。

没有属性称为`execute`，这就是日志说的原因`undefined property`

您的代码应如下所示：

```
if (  !($stmt->execute())  ) {
  echo "Execute failed (". $stmt->errno.") ". $stmt->error."\n";
  $stmt->close();
  exit();
} 
```

希望这会有所帮助

# java - Android 上的 JainSip：发送 REGISTER 会引发异常

> ID：14172412
> 
> 赞同：1
> 
> 时间：2013-01-05T13:54:00.223
> 
> 标签：java, android, multithreading, sip, jain-sip

在过去的几天里，我试图让 JAIN SIP 在 Android 上运行。我采用了一些在 Java 应用程序上运行良好的代码并将其移植到 Android 应用程序。

我检查了：

*   清单中的权限 (INTERNET / ALL)
*   JAIN SIP API 工作正常（stackoverflow 上的其他线程重点关注）。
*   通信在自己的线程上运行，而不是 MainThread。
*   IP 有效。
*   如果我不使用 Android 作为平台，而是使用 Ubuntu，则该代码有效。
*   我尝试了 Android 4.0.3 及更高版本。

* * *

我的代码：

```
public class MainActivity extends Activity implements SipListener {

private static final String LOG = "JAIN";
private static final int PORT = 5060;
private SipFactory mSipFactory;
private AddressFactory mAddressFactory;
private MessageFactory mMessageFacory;
private HeaderFactory mHeaderFactory;
private SipStack mSipStack;
private SipProvider mSipProvider;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    new Thread(new Runnable(){

        @Override
        public void run() {
            try {
                // Create factories
                mSipFactory = SipFactory.getInstance();
                mAddressFactory = mSipFactory.createAddressFactory();
                mMessageFacory = mSipFactory.createMessageFactory();
                mHeaderFactory = mSipFactory.createHeaderFactory();

                // Create the SipStack
                Properties properties = new Properties();
                properties.setProperty("javax.sip.STACK_NAME","Stack");
                mSipStack = mSipFactory.createSipStack(properties);

                // Create the SipProvider 
                String localIP = InetAddress.getLocalHost().getHostAddress();
                ListeningPoint listeningPoint = mSipStack
                        .createListeningPoint(localIP, PORT, "udp");
                mSipProvider = mSipStack.createSipProvider(listeningPoint);
                mSipProvider.addSipListener(MainActivity.this);

                // Create addresses and via header for the request
                Address fromToAddress = mAddressFactory
                        .createAddress("sip:192.168.0.198");
                Address contactAddress = mAddressFactory
                        .createAddress("sip:me@192.168.0.195");
                ArrayList<ViaHeader> viaHeaders = new ArrayList<ViaHeader>();
                ViaHeader myViaHeader = mHeaderFactory
                        .createViaHeader("me.bla.com", PORT, "udp", "tlf64");
                viaHeaders.add(myViaHeader);

                // Build the request
                final Request request = mMessageFacory.createRequest(
                        mAddressFactory.createAddress("sip:192.168.0.195:9876").getURI(), 
                        "REGISTER",
                        mHeaderFactory.createCallIdHeader("12345678"),
                        mHeaderFactory.createCSeqHeader(1234l, "REGISTER"), 
                        mHeaderFactory.createFromHeader(fromToAddress, "sdf6"),
                        mHeaderFactory.createToHeader(fromToAddress, null), 
                        viaHeaders, 
                        mHeaderFactory.createMaxForwardsHeader(70));

                // Add the contact header
                request.addHeader(mHeaderFactory.createContactHeader(contactAddress));

                // Print the request
                System.out.println(request.toString());

                // Send the request --- triggers an IOException
                mSipProvider.sendRequest(request);
            } catch (Exception e) {
                Log.d(LOG, Log.getStackTraceString(e));
            }
        }}).start();
} 
```

* * *

正如您在 StackTrace 中看到的，发生了 IOException：

```
javax.sip.SipException: IO Exception occured while Sending Request
at gov.nist.javax.sip.SipProviderImpl.sendRequest(SipProviderImpl.java:722)
at com.example.jainsiptest.MainActivity$1.run(MainActivity.java:97)
at java.lang.Thread.run(Thread.java:856)
 Caused by: java.net.SocketException: sendto failed: EINVAL (Invalid argument)
at libcore.io.IoBridge.maybeThrowAfterSendto(IoBridge.java:506)
at libcore.io.IoBridge.sendto(IoBridge.java:475)
at java.net.PlainDatagramSocketImpl.send(PlainDatagramSocketImpl.java:182)
at java.net.DatagramSocket.send(DatagramSocket.java:284)
at gov.nist.javax.sip.stack.UDPMessageChannel.sendMessage(UDPMessageChannel.java:724)
at gov.nist.javax.sip.stack.MessageChannel.sendMessage(MessageChannel.java:222)
at gov.nist.javax.sip.SipProviderImpl.sendRequest(SipProviderImpl.java:711)
... 2 more
 Caused by: libcore.io.ErrnoException: sendto failed: EINVAL (Invalid argument)
at libcore.io.Posix.sendtoBytes(Native Method)
at libcore.io.Posix.sendto(Posix.java:151)
at libcore.io.BlockGuardOs.sendto(BlockGuardOs.java:177)
at libcore.io.IoBridge.sendto(IoBridge.java:473)
... 7 more 
```

* * *

这

```
java.net.SocketException: sendto failed: EINVAL (Invalid argument) 
```

不会以相同的参数在 Ubuntu 上抛出。

有任何想法如何解决它？非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T15:52:16.273

似乎 Android 操作系统处理给定字符串的方式与 Ubuntu 操作系统不同。我不知道为什么。

* * *

毕竟，我通过使用 MjSip 而不是 JAIN SIP 解决了这个问题。

因为我需要 RTP、SDP 和 SIP 旁边的其他东西，所以我决定修改使用 MjSip 1.6 的开源 Android 应用程序[Sipdroid](http://code.google.com/p/sipdroid/)，直到它符合我的需求。

1.  为此，首先获取[代码](http://code.google.com/p/sipdroid/source/checkout)。

2.  将项目导入 Eclipse：File -> Import -> Existing Android Code Into Workspace。

3.  考虑到 API 级别等，创建一个满足您需求的新 Android 项目。

4.  添加`<uses-permission android:name="android.permission.INTERNET" />`到项目的清单中。

5.  将 Sipdroid 项目中除以下内容之外的所有包复制到您的项目中：

    *   org.sipdroid.codecs 和 org.sipdroid.media （我还不需要，也许以后需要）
    *   org.sipdroid.sipua 和子包。
6.  删除或评论损坏的引用。

7.  请参阅下面的代码将 REGISTER 发送到服务器。

8.  `android.util.Log`通过使用而不是给定代码来修复日志机制引发的异常。最后，删除或注释触发 NullPointerException 的刷新命令。

就是这样。

```
import org.zoolu.sip.address.NameAddress;
import org.zoolu.sip.message.Message;
import org.zoolu.sip.message.MessageFactory;
import org.zoolu.sip.provider.SipProvider;
import org.zoolu.sip.provider.SipStack;
import org.zoolu.sip.transaction.TransactionClient;
import org.zoolu.sip.transaction.TransactionClientListener;

import android.app.Activity;
import android.os.Bundle;
import android.util.Log;
import android.view.Menu;

public class MainActivity extends Activity implements TransactionClientListener{

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    new Thread(new Runnable(){

        @Override
        public void run() {
            try{
                SipStack.init();

                SipProvider sipProvider = new SipProvider(
                        "192.168.0.198", 5060, new String[]{"udp"}, null);
                NameAddress toAddress = new NameAddress(
                        "sip:192.168.0.195:9876");
                NameAddress fromAddress = new NameAddress(
                        "sip:192.168.0.198:9876");

                Message message = MessageFactory.createRegisterRequest(
                        sipProvider, 
                        toAddress, 
                        fromAddress, 
                        fromAddress, 
                        null, 
                        null);

                TransactionClient t = new TransactionClient(
                        sipProvider, 
                        message,
                        MainActivity.this);

                t.request();

            }catch(Exception e){
                Log.d("MYSIP", Log.getStackTraceString(e));
            }
        }}).start();
}

// Interface methods

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-02T01:41:58.327

而不是获取`localIPAddress`为：

```
String localIP = InetAddress.getLocalHost().getHostAddress(); 
```

`NetworkInterface`使用或获取 IP 地址`WifiManager`。

# entity-framework - Ado 实体更新不起作用

> ID：14172413
> 
> 赞同：0
> 
> 时间：2013-01-05T13:54:03.657
> 
> 标签：entity-framework, ado.net

我在visual studio 2012中使用带有设计器的ado实体模型。当我创建它时，有model.edmx，其中包含contex.tt、desinger.cs、图表和model.tt，我还看到在我使用desinger并映射几个表之后，它为每个表创建文件，为每个表创建单独的文件，但这些文件在项目中不可见，仅存在于模型文件夹中的解决方案方向。

现在，问题是当我在 sql 中修改某事，然后在 model.edmx 中更新该模型的视图时，我遇到了**可怕的问题**，每次，模型目录中每个表的那些文件都**没有改变**，每次我对将这些更改放入模型中，**我必须删除整个 edmx 并重新创建**。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T14:08:04.867

为了更新您在模型中所做的所有更改。只需右键单击模型和`Run Custom Tool`. 见下图：

![在此处输入图像描述](../Images/c05eff1b1478b2c076c969142ee23501.png)

# codeigniter - 如何在 codeigniter 中从用户制作的库中调用控制器函数

> ID：14172414
> 
> 赞同：0
> 
> 时间：2013-01-05T13:54:04.607
> 
> 标签：codeigniter, libraries, controllers

可以解释问题。我有一个名为 DeleteBookPage 的控制器函数。调用此函数时，它会获取 DeleteBook 页面所需的所有数据。进入页面后，用户从他们的个人资料中选择他们想要删除的数据，并调用我的一个库函数来执行删除。现在在库中，我想在我的控制器中调用 DeleteBookPage 函数，以便我可以重新加载 DeleteBook 页面而不使用旧项目

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T19:07:25.107

它不清楚你是如何调用你的 DeleteBookPage 方法的，例如。无论是直接通过 URI 调用还是通过其他方法调用。但实际上，您需要做的就是创建一条到 DeleteBookPage 方法的路由并将浏览器重定向到该 URI。

```
redirect('/controller/DeleteBookPage'); 
```

唯一的问题是您的库应该真正独立工作，即它们不应该依赖于设置的特定路线才能正常运行。如果您的 uri 已经指向 DeleteBookPage 方法，这很容易做到，因为您可以刷新当前页面：

```
redirect($this->uri->uri_string()); 
```

如果不是这种情况，您可以将控制器的路径存储在配置文件中并以这种方式重定向到它，或者仅在库函数成功并从控制器重定向或刷新时返回 true。

希望这很清楚，请问您是否需要更多信息。

**注意** 您需要加载 uri 帮助程序才能使上述内容正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T02:21:17.690

如果这个库有你的 CRUD 函数，你可以使用一个好方法

在您的库构造函数中执行以下操作

变量 $ 控制

公共函数 __construct($params=array()) {

```
 $this->ci =& get_instance();
    $this->ci->load->helper('url');
    $this->controller=$this->ci->uri->segment(2);

} 
```

# php - PHPT 与 Phpunit

> ID：14172416
> 
> 赞同：3
> 
> 时间：2013-01-05T13:54:09.067
> 
> 标签：php, phpunit, phpt

使用这两种测试中的一种而不是另一种的优点和缺点是什么？

*PS*：我正在开始一个不是课程或网站的项目。我必须为文件选择一个测试系统，一个文件可能只包含一个类、2个以上的类、函数、通用 PHP 代码等......

# gwt - RPC 上的 GWT 404 错误

> ID：14172419
> 
> 赞同：0
> 
> 时间：2013-01-05T13:54:28.723
> 
> 标签：gwt, maven, rpc, gwt-rpc, gwt-maven-plugin

我对 gwt 和 rpc 有疑问。我为我的 rpc 实现了一个服务：

```
@RemoteServiceRelativePath("search")
public interface SearchService extends RemoteService {
    List<Result> doSearch(String keyWords, Coordinate start, Coordinate end);
}

public interface SearchServiceAsync {
    void doSearch(String keyWords, Coordinate start, Coordinate end, AsyncCallback<List<Result>> callback);
}

public class SearchServiceImpl extends RemoteServiceServlet implements SearchService {
    private static final long serialVersionUID = 1L;
    private ISearch search = null; // interface to my database

    public List<Result> doSearch(String keyWords, Coordinate start, Coordinate end) {
        LonLat lowerLeft = new LonLat(start.getLongitude(), start.getLatitude());
        LonLat upperRight = new LonLat(end.getLongitude(), end.getLatitude());

        try {
            search = new SearchController(keyWords, lowerLeft, upperRight);
        } catch (ClassNotFoundException e1) {
            e1.printStackTrace();
        } catch (IOException e1) {
            e1.printStackTrace();
        }

        List<de.myPackage.model.Result> temp = null;

        try {
            temp = search.doSearch();
        } catch (SQLException e) {
            e.printStackTrace();
        }

        return map(temp);
    }

    private List<Result> map(List<de.myPackage.model.Result> results) {
       ....
    }
} 
```

这些是回调所需的类。不要怀疑这两个类 Result 和 de.myPackage.model.Result。结果类位于共享文件夹中，而 de.myPackage.model.Result 是同一个类，但来自另一个模块（使用 maven）。我必须让它变得如此复杂，因为在客户端代码中你不能使用任何自编码容器。为此，我的 SearchServiceImpl 中有 map() 方法。它将 de.myPackage.model.Result 映射到 Result。

这是我视图中丢失的电话：

```
AsyncCallback<List<Result>> callback = new AsyncCallback<List<Result>>() {
    public void onFailure(Throwable caught) {
        System.out.println("Fail!");    
    }

    public void onSuccess(List<Result> result) {
        addToTable(result);
    }
};
searchService.doSearch(callback); 
```

现在的问题是，它从不调用我的 SearchServiceImpl 的 doSearch-Method ，因为他说他找不到它而且我不知道为什么:( 每次我按下触发回调的按钮时，它都会说：

```
404 - POST /myProject/search (127.0.0.1) 1412 bytes
   Request headers
      Host: 127.0.0.1:8888
      User-Agent: Mozilla/5.0 (Windows NT 6.2; WOW64; rv:17.0) Gecko/20100101 Firefox/17.0
      Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
      Accept-Language: de-de,de;q=0.8,en-us;q=0.5,en;q=0.3
      Accept-Encoding: gzip, deflate
      Connection: keep-alive
      Referer: http://127.0.0.1:8888/index.html?gwt.codesvr=127.0.0.1:9997
      X-GWT-Permutation: HostedMode
      X-GWT-Module-Base: http://127.0.0.1:8888/myProject/
      Content-Type: text/x-gwt-rpc; charset=utf-8
      Content-Length: 334
      Pragma: no-cache
      Cache-Control: no-cache
   Response headers
      Content-Type: text/html; charset=iso-8859-1
      Content-Length: 1412 
```

这意味着什么？我不明白:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T15:25:16.733

您缺少 servlet 映射`WEB-INF/web.xml`：

```
<servlet>
  <servlet-name>SearchService</servlet-name>
  <servlet-class>de.myPackage.server.SearchServiceImpl</servlet-class>
</servlet>
<servlet-mapping>
  <servlet-name>SearchService</servlet-name>
  <url-pattern>/search</url-pattern>
</servlet-mapping> 
```

你可以把它放在你的 web.xml 中，让它[由 gwt-maven-plugin 生成](http://mojo.codehaus.org/gwt-maven-plugin/user-guide/remoteservicerelativepath-annotation.html)，或者如果你使用的是 Servlet 3.0 容器（即不是 DevMode，也不是 AppEngine），在你的类上应用适当的注释。

# .htaccess - 使用 .htaccess 重定向我的附属链接并在 Google Analytics 中跟踪

> ID：14172422
> 
> 赞同：1
> 
> 时间：2013-01-05T13:54:48.613
> 
> 标签：.htaccess, redirect, hyperlink, google-analytics, affiliate

大家好，

我是一个新手联盟营销人员，但我已经通过将我的联盟链接放置在许多地方来进行网络托管销售。我想做以下事情：

1.  使用我的主域名屏蔽我的附属链接，即 www.mydomain.com/affiliate-link

2.  使用谷歌分析跟踪重定向。

我尝试使用以下 .htaccess 代码在我的服务器上创建目录“affiliate-link”：

```
RewriteEngine On
RewriteRule ^$ http://my.affiliate-link.com/aff.php?1234&utm_source=Name&utm_medium= referral-link&utm_campaign=hosting-affiliate 
```

我使用谷歌的 url builder 来生成代码。当我去“www.mydomain.com/affiliate-link”时重定向有效，但谷歌分析没有显示任何数据。难道我做错了什么？我假设我需要将通过链接构建器创建的广告系列添加到 Google Analytics？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T03:24:05.013

您正在向 my.affiliate-link.com 发送流量，因此它将显示在该网站的分析中。

当您单击 www.mydomain.com/affiliate-link 时，您将退出，因此分析不会有机会再次触发。您的会员将在其末尾添加源详细信息。

你最好让 GA 专家来回答这个问题，但我认为你最好使用事件跟踪代码来跟踪点击。

# python - PyGTK 自定义小部件不重绘

> ID：14172427
> 
> 赞同：1
> 
> 时间：2013-01-05T13:55:33.000
> 
> 标签：python, pygtk

我在更新自定义 GTK+ 小部件时遇到问题：VUWidget。Generator 类正在更新 Section 类的 level 属性，其子类具有 VUWidget 属性。Generator 类正确更新关卡属性的值。

```
import pygtk  
pygtk.require("2.0")  
import gtk, gtk.gdk  
import cairo  

#=========================================================================

class VUWidget(gtk.DrawingArea):
    __gtype_name__ = 'VUWidget'

    _BACKGROUND_RGB = (0., 0., 0.)
    _LEVEL_GRADIENT_BOTTOM_ORGBA = (1, 0, 1, 0, 1)
    _LEVEL_GRADIENT_TOP_ORGBA = (0, 1, 0, 0, 1)

    #_____________________________________________________________________

    def __init__(self, section):
        gtk.DrawingArea.__init__(self)      
        self.section = section      

        self.connect("configure_event", self.on_configure_event)
        self.connect("expose-event", self.OnDraw)
        self.section.connect("changed-value", self.ValueChanged)

        self.set_size_request(30,100)       
        self.realize()
        self.show()
    #_____________________________________________________________________

    def ValueChanged(self, widget, level):
        #print ("Callback %f" % self.section.GetLevel()) 

        rect = self.get_allocation()                
        self.window.invalidate_rect(rect, False)
        return False
    #_____________________________________________________________________

    def GenerateBackground(self):       
        rect = self.get_allocation()
        ctx = cairo.Context(self.source)

        ctx.set_line_width(2)
        ctx.set_antialias(cairo.ANTIALIAS_SUBPIXEL)
        pat = cairo.LinearGradient(0.0, 0.0, 0, rect.height)
        pat.add_color_stop_rgba(*self._LEVEL_GRADIENT_BOTTOM_ORGBA)
        pat.add_color_stop_rgba(*self._LEVEL_GRADIENT_TOP_ORGBA)
        ctx.rectangle(0, 0, rect.width, rect.height)
        ctx.set_source(pat)

        ctx.fill()
    #_____________________________________________________________________

    def on_configure_event(self, widget, event):
        self.source = cairo.ImageSurface(cairo.FORMAT_ARGB32, self.allocation.width, self.allocation.height)
        self.GenerateBackground()

        return self.OnDraw(widget, event)
    #_____________________________________________________________________

    def OnDraw(self, widget, event):        
        ctx = self.window.cairo_create()
        ctx.save()

        rect = self.get_allocation()

        ctx.rectangle(0, 0, rect.width, rect.height)
        ctx.set_source_rgb(*self._BACKGROUND_RGB)
        ctx.fill()

        ctx.rectangle(0, rect.height * (1\. - self.section.GetLevel()), rect.width, rect.height)
        ctx.clip()

        ctx.set_source_surface(self.source, 0, 0)   
        ctx.paint()

        ctx.restore()

        return False        
    #_____________________________________________________________________

    def Destroy(self):
        del self.source
        self.destroy()  
    #_____________________________________________________________________  

#========================================================================= 
```

信号在类 Section 中实现并正确发出

```
__gsignals__ = {
    'changed-value' : (gobject.SIGNAL_RUN_LAST, gobject.TYPE_NONE, (gobject.TYPE_FLOAT,))
    } 
```

问候CK

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-19T10:28:16.680

这是一种方法，我将其子类化并提供自定义*绘制*方法。如果状态有任何变化，我会调用*invalidate ，强制小部件通过**expose-event*重新绘制。如果您需要不同的上下文，可以在*on_expose_event* 方法中提供它。

所以基本上，只在**一个**地方完成所有的绘图。如果小部件应该显示不同的内容，请设置新状态并重新渲染。使其易于维护。

```
#cairovehicle.py

import gtk

class CairoVehicle(gtk.DrawingArea):
    def __init__(self):
        gtk.DrawingArea.__init__(self)
        self.connect("expose-event", self.on_expose_event)

    def get_background(self):
        """Serves as a caching solution."""
        return self.__bg

    def set_background(self, pattern):
        """Serves as a caching solution."""
        self.__bg = pattern

    def get_brush(self):
        """Serves as a caching solution."""
        return self.__brush

    def set_brush(self, pattern):
        """Serves as a caching solution."""
        self.__brush = pattern

    def on_expose_event(self, widget, event):
        context = self.window.cairo_create()

        # Restrict cairo to the exposed area
        context.rectangle(*event.area)
        context.clip()

        self.width, self.height = self.window.get_size()

        self.draw(context)

    def on_configure_event(self, widget, event):
        """Override this in case you want to do something when 
           the widget's size changes."""

        return super(CairoVehicle, self).on_configure_event(widget, event)

    def invalidate(self):
        """Force a re-rendering of the window."""

        rect = self.get_allocation()

        # Compensate for parent offset, if any.
        parent = self.get_parent()
        if parent:
            offset = parent.get_allocation()
            rect.x -= offset.x
            rect.y -= offset.y

        self.window.invalidate_rect(rect, False)

    def draw(self, context):
        """Override this."""

        # do custom drawing here

        raise NotImplementedError()

    def make_grid(self, context, fgcolor, bgcolor, gapwidth, linewidth, 
                                                        width, height):

         context.set_source_rgba(*bgcolor)
         context.rectangle(0, 0, width, height)
         context.fill()

         context.set_source_rgba(*fgcolor)
         context.set_line_width(linewidth)

         # uneven linewidths lead to blurry displaying when set on integer
         # coordinates, so in that case move coordinates away by half a
         # pixel.
         adjust = 0.5 if linewidth % 2 else 0
         i = 1
         j = 1

         while gapwidth*i-adjust < width:
             context.move_to(gapwidth*i-adjust, 0)
             context.line_to(gapwidth*i-adjust, height)
             context.stroke()
             i += 1

         while gapwidth*j-adjust < height:
             context.move_to(0, gapwidth*j-adjust)
             context.line_to(width, gapwidth*j-adjust)
             context.stroke()
             j += 1

class Grid(CairoVehicle):
    def draw(self, context):
        context.push_group()
        self.make_grid(context, fgcolor=(0, 0, 0, 1), bgcolor=(1, 1, 1, 1),
                    gapwidth=20, linewidth=1, width=self.width,
                    height=self.height)
        self.set_background(context.pop_group())
        context.set_source(self.get_background())
        context.paint()

if __name__ == "__main__":
    w = gtk.Window()
    w.connect("destroy", gtk.main_quit)
    w.show()

    cv = Grid()
    cv.show()
    w.add(cv)
    gtk.main() 
```

**对评论的补充回复：**

Gtk.Window 和 Gdk.Window 在概念上是不同的。第一个是一个容器，它可以恰好有一个其他小部件（其他容器或任何其他小部件）。第二个用于在显示器上绘制内容和捕获事件。gdk.Window 是在小部件的“实现”事件中构造的。在此之前，它在 PyGtk 中只是 None 。恕我直言，在 gtk.Window.window 上绘图是不可取的（甚至不知道是否可行）。自定义绘图应在 gtk.DrawingArea.window 中完成。这就是 DrawingArea 的用途。

**参考：**

[https://mail.gnome.org/archives/gtk-app-devel-list/1999-January/msg00138.html](https://mail.gnome.org/archives/gtk-app-devel-list/1999-January/msg00138.html)
[GtkDrawingArea - 如何使其可绘制？](https://stackoverflow.com/questions/9395111/gtkdrawingarea-how-to-make-it-drawable)

# eclipse - 错误打开跟踪文件没有这样的文件或目录 (2)

> ID：14172429
> 
> 赞同：-1
> 
> 时间：2013-01-05T13:55:33.713
> 
> 标签：eclipse, android-emulator, android-permissions

当我在模拟器上运行我的 android 应用程序时，它会崩溃（不幸的是，CursoLoader 已停止）。我在 logcat 中收到以下错误：

```
01-05 14:46:45.812: D/dalvikvm(1505): Not late-enabling CheckJNI (already on)
01-05 14:46:45.964: E/Trace(1505): error opening trace file: No such file or directory (2)
01-05 14:46:47.071: D/gralloc_goldfish(1505): Emulator without GPU emulation detected.
01-05 14:46:49.841: D/AndroidRuntime(1505): Shutting down VM
01-05 14:46:49.841: W/dalvikvm(1505): threadid=1: thread exiting with uncaught exception (group=0xb2f93288)
01-05 14:46:49.854: E/AndroidRuntime(1505): FATAL EXCEPTION: main
01-05 14:46:49.854: E/AndroidRuntime(1505): java.lang.NullPointerException
01-05 14:46:49.854: E/AndroidRuntime(1505):     at be.howest.mad.lab16.oef1.CursorLoaderActivity.onLoadFinished(CursorLoaderActivity.java:50)
01-05 14:46:49.854: E/AndroidRuntime(1505):     at be.howest.mad.lab16.oef1.CursorLoaderActivity.onLoadFinished(CursorLoaderActivity.java:1)
01-05 14:46:49.854: E/AndroidRuntime(1505):     at android.app.LoaderManagerImpl$LoaderInfo.callOnLoadFinished(LoaderManager.java:482)
01-05 14:46:49.854: E/AndroidRuntime(1505):     at android.app.LoaderManagerImpl$LoaderInfo.onLoadComplete(LoaderManager.java:450)
01-05 14:46:49.854: E/AndroidRuntime(1505):     at android.content.Loader.deliverResult(Loader.java:143)
01-05 14:46:49.854: E/AndroidRuntime(1505):     at android.content.CursorLoader.deliverResult(CursorLoader.java:113)
01-05 14:46:49.854: E/AndroidRuntime(1505):     at android.content.CursorLoader.deliverResult(CursorLoader.java:43)
01-05 14:46:49.854: E/AndroidRuntime(1505):     at android.content.AsyncTaskLoader.dispatchOnLoadComplete(AsyncTaskLoader.java:254)
01-05 14:46:49.854: E/AndroidRuntime(1505):     at android.content.AsyncTaskLoader$LoadTask.onPostExecute(AsyncTaskLoader.java:91)
01-05 14:46:49.854: E/AndroidRuntime(1505):     at android.os.AsyncTask.finish(AsyncTask.java:631)
01-05 14:46:49.854: E/AndroidRuntime(1505):     at android.os.AsyncTask.access$600(AsyncTask.java:177)
01-05 14:46:49.854: E/AndroidRuntime(1505):     at android.os.AsyncTask$InternalHandler.handleMessage(AsyncTask.java:644)
01-05 14:46:49.854: E/AndroidRuntime(1505):     at android.os.Handler.dispatchMessage(Handler.java:99)
01-05 14:46:49.854: E/AndroidRuntime(1505):     at android.os.Looper.loop(Looper.java:137)
01-05 14:46:49.854: E/AndroidRuntime(1505):     at android.app.ActivityThread.main(ActivityThread.java:4745)
01-05 14:46:49.854: E/AndroidRuntime(1505):     at java.lang.reflect.Method.invokeNative(Native Method)
01-05 14:46:49.854: E/AndroidRuntime(1505):     at java.lang.reflect.Method.invoke(Method.java:511)
01-05 14:46:49.854: E/AndroidRuntime(1505):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
01-05 14:46:49.854: E/AndroidRuntime(1505):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
01-05 14:46:49.854: E/AndroidRuntime(1505):     at dalvik.system.NativeStart.main(Native Method) 
```

CursorLoaderActivity.java：

```
package be.howest.mad.lab16.oef1;

import android.os.Bundle;
import android.provider.ContactsContract.Contacts;
import android.widget.SimpleCursorAdapter;
import android.app.ListActivity;
import android.app.LoaderManager.LoaderCallbacks;
import android.content.CursorLoader;
import android.content.Loader;
import android.database.Cursor;

public class CursorLoaderActivity extends ListActivity implements LoaderCallbacks<Cursor> {

private static final int CONTACTS_LOADER = 0;
private SimpleCursorAdapter adapter;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    String[] from = new String[] { Contacts.DISPLAY_NAME };
    int[] to = new int[] { android.R.id.text1 };
    SimpleCursorAdapter adapter =  new SimpleCursorAdapter(this, android.R.layout.simple_list_item_1, null, from, to, 0);
    setListAdapter(adapter);

    getLoaderManager().initLoader(CONTACTS_LOADER, null, this); 
}

private static String[] projection = new String[]{
Contacts._ID,
Contacts.DISPLAY_NAME,
}; 

@Override
public Loader<Cursor> onCreateLoader(int id, Bundle args) {
    if(id == CONTACTS_LOADER) {
        CursorLoader cursorLoader = new CursorLoader(this, Contacts.CONTENT_URI,projection, null, null, null);
            return cursorLoader;
    }
    return null;

}

@Override
public void onLoadFinished(Loader<Cursor> arg0, Cursor arg1) {
    adapter.swapCursor(arg1);
}

@Override
public void onLoaderReset(Loader<Cursor> arg0) {
    adapter.swapCursor(null);
}
} 
```

显现：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="be.howest.mad.lab16.oef1"
android:versionCode="1"
android:versionName="1.0"  >

<uses-sdk
    android:minSdkVersion="15"
    android:targetSdkVersion="16" />

<uses-permission android:name="android.permission.READ_CONTACTS"/>

<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name="be.howest.mad.lab16.oef1.CursorLoaderActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

</application>

</manifest> 
```

有谁知道如何解决这个问题？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T10:48:56.480

已修复：问题出在 onCreate 方法中。

```
adapter = new SimpleCursorAdapter(this, android.R.layout.simple_list_item_1,
    null, from, to, 0); 
```

# facebook-graph-api - 会员区页面的 Facebook 共享

> ID：14172430
> 
> 赞同：0
> 
> 时间：2013-01-05T13:55:42.603
> 
> 标签：facebook-graph-api, share

我在网站上有一些区域只有在用户登录时才可见（具有特定角色，它是 Drupal 7 网站）。我在那里的页面上有 facebook 分享按钮。

当您尝试在此类页面上共享内容时，它会起作用。但：

*   Facebook 没有获得指定的预览图像和文本。（它从错误的地方获取它 - 登录页面）
*   Facebook 没有很好地计算页面共享

那是因为 Facebook 看到要作为匿名用户共享的页面，我认为。

有没有办法让 Facebook 获得图片预览，这些页面的文本？好像我授予 Facebook 以具有角色的登录用户身份查看该内容的专有权？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T18:42:46.613

我看到的唯一方法是为 Drupal 查找/创建模块，该模块允许您为选定的 IP 地址分配角色并为它们执行“自动登录”，或者只是允许它们在不使用角色的情况下通过登录。然后您可以尝试使用[此处](https://developers.facebook.com/docs/ApplicationSecurity/#facebook_scraper)发布的地址作为 Facebook 爬虫的 IP。

我没有测试它，所以这只是一个尝试的想法。当然，请务必考虑此解决方案的安全性是否对您来说足够公平。如果实现这一点可以很好地完成工作，您可以考虑创建能够比经过身份验证的用户做“更少”的角色，以仅查看需要共享的部分。

# java - 如何将数据写入文件Java中的特定行号

> ID：14172440
> 
> 赞同：0
> 
> 时间：2013-01-05T13:57:21.030
> 
> 标签：java, eclipse, file

标题：将数据写入文件中的特定行号

这是我的示例文件：

```
public class MyC{
    public void MyMethod()
    {
        System.out.println("My method has been accessed");
        Syst.out.println("hi");
        String l;
        nt x=0;
    }
} 
```

我的目标是什么？

我想转到第 5 行并更正字符串 Syst.out.println("hi"); 到 System.out.println("hi"); 到目前为止，我已经能够访问有错误的行并将字符串保存在变量中并替换错误。

这是我到目前为止所取得的成就：

```
import java.io.*;
public class NewReplaceLine {
    public static void main(String[] args)
    {
        FileInputStream fs = null;
        try {
            fs = new FileInputStream("C:\\Users\\workspace\\Compilers\\testfile.txt");
        } catch (FileNotFoundException e) {
            // TODO Auto-generated catch block
           e.printStackTrace();
        }
        BufferedReader br = new BufferedReader(new InputStreamReader(fs));
        for(int i = 0; i < 6; ++i)
            try {
                br.readLine();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        try {
        String lineIWant = br.readLine();
        String newtext = lineIWant.replace("Syst", "System");
        System.out.println(newtext);
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
}

} 
```

我无法做的是将我更正为第 5 行的字符串重写回文件。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T14:03:26.620

您需要写入第二个临时文件，因为您仍在从第一个文件中读取。替换完成并且文件完全写出后，删除第一个文件并重命名第二个文件。

编辑：

根据您的评论，如果您想对文件内容进行多次或更复杂的更改，您可以将任务分解为以下步骤：

*   使用 FileInputStream 将原始文件的内容作为输入流读取，
*   不是将输入流包装在 BufferedReader 中，而是读取输入流的内容并将它们写入 ByteArrayOutputStream（一个类似于输出流但将内容作为字节数组保存在内存中的文件）
*   使用字节数组作为构造函数参数构造一个新字符串
*   现在您在内存中有一个字符串，其中包含原始文件的全部内容
*   对该字符串进行更改后，使用 FileWriter 将其写入第二个文件
*   使用 File 类删除原始文件并再次重命名输出文件

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-05T14:03:52.417

（除非某些 3rd 方库这样做，）您不能这样做（不仅在 Java 中，而且在其他语言中也是如此）。

您可以按顺序或随机访问读取/写入文件，但随机访问适用于字节而不是行（FS 不知道您的文件是否包含文本或二进制数据）。而且，如果您找到正确的字节并在那里覆盖，如果您添加更多原始行中的字节，您将覆盖新的字节。

我将使用的选项是顺序读取并复制到一个新文件（注意在正确的位置写入新行）并关闭这两个文件。之后，用新文件覆盖旧文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-05T14:17:43.213

@Chris Gerken 如果文件有更多错误，比如说第 2、4、5、6、7 行，他需要找到一种方法以顺序的方式依次写入每一行（在处理完具有错误）到新创建的文件？

# git - git-svn 提交到错误的分支/如何通过 git-svn 合并 svn 分支

> ID：14172446
> 
> 赞同：1
> 
> 时间：2013-01-05T13:57:56.060
> 
> 标签：git, svn, git-svn, branching-and-merging

我有一个 SVN 存储库，我使用 git-svn 签出，使用该`--stdlayout`选项（当时，存储库是空的）。

然后我在 master 分支上工作了一段时间。使用时`git svn dcommit`，它会 svn-commit 我的更改以`https://my.host/repo/trunk`使其符合预期。

在某些时候，我用 git 创建了一个名为“算术”的分支。后来我也想在 svn 中创建那个分支，所以我按照网站的建议做了 a`git svn branch arithmetics`然后 a 。`git branch --set-upstream arithmetics remotes/arithmetics`我想这是出了问题的地方，因为我收到了关于`--set-upstream`被弃用的警告。

调用时`git svn dcommit`，它会承诺`https://my.host/repo/branches/arithmetics`，到目前为止一切顺利。但后来我注意到，`dcommit`当我尝试将分支合并回 master 时，无论当前在 git 存储库中签出的分支如何，都会提交到该分支。

我什至尝试从 svn 创建一个新的克隆，将分支合并到那里的 master 中。我还尝试`trunk`使用 明确签出`git checkout -b local/trunk remotes/trunk`，然后将分支合并到其中，然后`git svn dcommit`. 它总是会再次提交到分支。

我怎样才能解决这个问题？

PS：`git rebase`正如我所读到的那样，我用于合并，合并提交对 git-svn 有问题，所以我没有这些。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T15:01:27.753

您不能将*git 分支*提交到 SVN 存储库，因为 Git 和 SVN 具有完全不同的分支概念。与 git 合并然后调用 dcommit 将线性化您的历史记录（与使用 rebase 非常相似），然后推送到当前签出的分支。

这是手册页中的重要部分[`git svn`](http://www.kernel.org/pub/software/scm/git/docs/git-svn.html)：

> [**合并跟踪**](http://www.kernel.org/pub/software/scm/git/docs/git-svn.html#_merge_tracking)
> 虽然 git svn 可以跟踪采用标准布局的存储库的复制历史记录（包括分支和标签），但它还不能将 git 内部发生的合并历史记录回上游给 SVN 用户。因此，建议用户在 git 中保持尽可能线性的历史记录，以简化与 SVN 的兼容性（请参阅下面的 CAVEATS 部分）。

此外，[**警告**](http://www.kernel.org/pub/software/scm/git/docs/git-svn.html#_caveats)部分有一段专门针对您的问题：

> 不建议在您计划从其提交的分支上运行 git merge 或 git pull ，因为 Subversion 用户看不到您所做的任何合并。此外，如果您从作为 SVN 分支镜像的 git 分支合并或拉取，dcommit 可能会提交到错误的分支。
> 
> 如果您进行合并，请注意以下规则： git svn dcommit 将尝试在名为 的 SVN 提交之上提交
> 
> ```
> git log --grep=^git-svn-id: --first-parent -1 
> ```

# unix - 用 vi(m) 复制最后一行之后的所有行

> ID：14172447
> 
> 赞同：3
> 
> 时间：2013-01-05T13:58:03.697
> 
> 标签：unix, copy, vi

如何在最后一行之后将 vi(m) 中文件的所有行加倍

例子：

```
foo
bar
hello
world 
```

结果：

```
foo
bar
hello
world
foo
bar
hello
world 
```

我试过复制/粘贴命令没有结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T14:00:36.073

您可以在转义模式下执行以下操作：

```
1G
yG
G
p 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T15:27:34.237

```
1GyGP 
```

转到第一行的第一个字符，拉出整个文件并将其插入上面。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T07:35:11.000

你可以试试这个

```
gg

:s/\_.*/&& 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-05T14:08:08.897

以下命令应该可以解决问题

```
:%s/\(.*\)/\1\1/ 
```

# oracle10g - ORACLE：无法在 oracle 10g 的系统模式中打开员工表

> ID：14172454
> 
> 赞同：0
> 
> 时间：2013-01-05T13:58:58.727
> 
> 标签：oracle10g

当我输入 SELECT * FROM Emp;

它显示 ORA-00942: 表或视图不存在

我做了很多事情都无法解锁。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T14:03:32.330

您是否创建了Employees 表？如果你这样做了，你承诺了吗？您的用户是否有足够的权限来访问该表？

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-08-06T04:51:43.947

员工表首先存在于 HR 用户中，您必须先解锁 HR 用户。

# javascript - 在 node.js 中获取调用函数的名称和行

> ID：14172455
> 
> 赞同：70
> 
> 时间：2013-01-05T13:59:08.897
> 
> 标签：javascript, node.js

如何获得调用当前函数的函数的名称和行？我想要一个像这样的基本调试功能（使用[npmlog](https://github.com/isaacs/npmlog)定义`log.debug`）：

```
function debug() {
  var callee, line;
  /* MAGIC */
  log.debug(callee + ":" + line, arguments)
} 
```

当从另一个函数调用时，它会是这样的：

```
function hello() {
   debug("world!")
}
// outputs something like:
// "hello:2 'world!'" 
```

为了清楚起见，我想要的基本上类似于[Python 中的这个](https://stackoverflow.com/questions/2654113)：

```
import inspect
def caller():
    return inspect.stack()[2][3]
// line no from getframeinfo().lineno 
```

是否有等效的节点来完成此操作？

* * *

## 回答 #1

> 赞同：91
> 
> 时间：2013-01-05T14:38:26.457

使用此处的信息：[在 V8 JavaScript (Chrome & Node.js) 中访问行号](https://stackoverflow.com/questions/11386492/accessing-line-number-in-v8-javascript-chrome-node-js)

您可以添加一些原型以提供从 V8 访问此信息的权限：

```
Object.defineProperty(global, '__stack', {
get: function() {
        var orig = Error.prepareStackTrace;
        Error.prepareStackTrace = function(_, stack) {
            return stack;
        };
        var err = new Error;
        Error.captureStackTrace(err, arguments.callee);
        var stack = err.stack;
        Error.prepareStackTrace = orig;
        return stack;
    }
});

Object.defineProperty(global, '__line', {
get: function() {
        return __stack[1].getLineNumber();
    }
});

Object.defineProperty(global, '__function', {
get: function() {
        return __stack[1].getFunctionName();
    }
});

function foo() {
    console.log(__line);
    console.log(__function);
}

foo() 
```

分别返回“28”和“foo”。

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2018-11-16T14:08:09.687

以下代码仅使用核心元素。它从错误实例中解析堆栈。

```
"use strict";
function debugLine(message) {
    let e = new Error();
    let frame = e.stack.split("\n")[2]; // change to 3 for grandparent func
    let lineNumber = frame.split(":").reverse()[1];
    let functionName = frame.split(" ")[5];
    return functionName + ":" + lineNumber + " " + message;
}
function myCallingFunction() {
    console.log(debugLine("error_message"));
}
myCallingFunction(); 
```

它输出类似`myCallingFunction:10 error_message`

我已将错误的元素提取为变量（lineNumber、functionName），因此您可以按任何方式格式化返回值。

附带说明：该`use strict;`语句是可选的，只有在您的整个代码都使用[严格](https://www.w3schools.com/js/js_strict.asp)标准时才能使用。如果您的代码与该代码不兼容（尽管应该兼容），请随意删除它。

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2016-09-25T07:12:25.950

我也有类似的要求。我使用了nodejs提供的Error类的stack属性。
我还在学习节点，所以可能会有错误的机会。

以下是相同的解释。还为此创建了 npm 模块，如果您愿意，可以查看：
1\. [npm module 'logat'](https://www.npmjs.com/package/logat)
2\. [git repo](https://github.com/krvikash35/logat)

假设我们使用方法 'log' 'logger' 对象

```
var logger = {
 log: log
}
function log(msg){
  let logLineDetails = ((new Error().stack).split("at ")[3]).trim();
  console.log('DEBUG', new Date().toUTCString(), logLineDetails, msg);
} 
```

**例子：**

```
//suppose file name: /home/vikash/example/age.js
function getAge(age) {
    logger.log('Inside getAge function');    //suppose line no: 9
} 
```

**上述示例的输出：**

```
 DEBUG on Sat, 24 Sept 2016 12:12:10 GMT at getAge(/home/vikash/example/age.js:9:12)
    Inside getAge function 
```

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2013-01-05T14:37:59.920

我找到并安装了[`node-stack-trace`](https://github.com/felixge/node-stack-trace)模块（用 安装`npm install stack-trace`），然后定义`echo`为：

```
function echo() {
  var args, file, frame, line, method;
  args = 1 <= arguments.length ? __slice.call(arguments, 0) : [];

  frame = stackTrace.get()[1];
  file = path.basename(frame.getFileName());
  line = frame.getLineNumber();
  method = frame.getFunctionName();

  args.unshift("" + file + ":" + line + " in " + method + "()");
  return log.info.apply(log, args); // changed 'debug' to canonical npmlog 'info'
}; 
```

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2020-04-24T21:43:20.217

这是用于快速调试目的的单行代码：

```
console.log("DEBUG", (new Error().stack.split("at ")[1]).trim()); 
```

这将使用 Node.js 记录如下内容：

```
调试 SomeObject.function (/path/to/the/code.js:152:37) 

```

--

您还可以在末尾添加自定义参数，例如

```
console.log("DEBUG", (new Error().stack.split("at ")[1]).trim(), ">>>", myVar); 
```

请注意，如果您将其放入辅助函数中，请将堆栈索引从 eg 调整`[1]`为`[2]`。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-05-25T17:59:54.737

这是发生错误时获取文件名的一种方法。您必须将函数包装在 onErrorReturnFileName 中。在这里，我`func()`从`otherNode`文件中包装。

```
const {func} = require('./otherNode')

function onErrorReturnFileName(funcToRead) {
    let defaultPrepareStackTrace = Error.prepareStackTrace
    try {
        let getStack = function (err, stack) { return stack; };
        Error.prepareStackTrace = getStack
        return {result: funcToRead(), name: null}
    }catch (ex) {
        return {name: ex.stack.shift().getFileName(), result: null}
    }
    Error.preppareStackTrace = defaultPrepareStackTrace
}
console.log(onErrorReturnFileName(func)) 
```

# css - CSS 菜单隐藏在 Chrome (SWFObject) 中的 flash 后面

> ID：14172463
> 
> 赞同：0
> 
> 时间：2013-01-05T14:00:08.700
> 
> 标签：css, google-chrome, overlay, swfobject

我正在尝试使用 swfobject 让 CSS 菜单覆盖在 Flash 播放器的顶部。我尝试修改 z-index，更改位置设置（绝对/相对）。我为 swfobject 参数（透明/不透明）尝试了不同的 wmode。似乎没有任何效果。

基本上，它在 Firefox 中运行。但不是铬。我没有在IE上测试过。

我什至按照另一篇文章中的建议遵循了本教程：http: [//learnswfobject.com/advanced-topics/placing-html-elements-over-a-flash-movie/](http://learnswfobject.com/advanced-topics/placing-html-elements-over-a-flash-movie/) ...并且菜单无法显示在顶部他们的榜样。

[链接](http://www.musicvideocommons.com/en/video/agtzfm12Y29tbW9uc3IgCxIMVmlkZW9ncmFwaGVyGLjqAQwLEgVWaWRlbxj6VQw)到我的网站。

# html - 哪个更好？用于显示图像的数据 URL 方案或图像链接？

> ID：14172464
> 
> 赞同：-2
> 
> 时间：2013-01-05T14:00:19.960
> 
> 标签：html, css, image, data-url

我对此有点困惑。为了在我的 HTML 页面中显示图像，在 HTML img 标签中嵌入图像代码是好的（使用数据 URL 技术）或提供指向该图像文件的链接会更好（传统方式）？如果有人能以比较的方式告诉我它们的优缺点，那将是一个很大的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-05T14:09:35.183

**数据 URL 嵌入**：

*   ↑ 加载页面的 HTTP 请求更少；
*   ↓ 超长代码行，图片不小；
*   ↓ 很难（非常难）维护（想想什么时候需要更换图像）；
*   ↓ IE 6 和 7 不支持。

**图片链接**：

*   ↑ 易于维护（您只需更换文件）；
*   ↑ 独立于 HTML 缓存；
*   ↑ 代码更简洁；
*   ↑ 所有版本的IE都支持；
*   ↓ 更多 HTTP 请求加载页面。

一般来说，我建议对较大的图像（照片、布局元素、大图标）和可能随时间变化的图像使用链接。仅对非常小的图标使用数据 URL。

我不得不说你可以避免前两个数据 URL 问题（长代码和可维护）从物理图像文件生成数据 URL，使用服务器端语言（例如 PHP）进行编码。

# php - str_get_html 未加载有效的 html 字符串

> ID：14172467
> 
> 赞同：12
> 
> 时间：2013-01-05T14:00:44.733
> 
> 标签：php, curl, simple-html-dom

我使用 curl 收到一个 html 字符串：

```
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
$html_string = curl_exec($ch); 
```

当我`echo`看到它时，我看到了一个非常好的 html，因为我需要我的解析需求。但是，当尝试将此字符串发送到`HTML DOM PARSER`方法`str_get_html($html_string)`时，它不会上传它（从方法调用返回 false）。

我尝试将其保存到文件并`file_get_html`在文件上打开，但同样的事情发生了。

这可能是什么原因？正如我所说，当我回显它时，html 看起来非常好。

非常感谢。

代码本身：

```
$html = file_get_html("http://www.bgu.co.il/tremp.aspx");
$v = $html->find('input[id=__VIEWSTATE]');
$viewState = $v[0]->attr['value'];
$e = $html->find('input=[id=__EVENTVALIDATION]');
$event = $e[0]->attr['value'];

$html->clear(); 
unset($html);

$body = " A_STRING_THAT_CONTAINS_SOME_DATA " 

$ch = curl_init("http://www.bgu.co.il/tremp.aspx");
curl_setopt($ch, CURLOPT_POSTFIELDS, $body);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);

$html_string = curl_exec($ch);

$file_handle = fopen("file.txt", "w");
fwrite($file_handle, $html_string);
fclose($file_handle);

curl_close($ch);

$html = str_get_html($html_string); 
```

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2014-02-09T12:02:35.923

您的 curl 链接似乎有很多元素（大文件）。

我正在解析一个与您的链接一样大的字符串（文件）并遇到此问题。

看到源代码后，我发现了问题所在。这个对我有用 ！

我发现 simple_html_dom.php 限制了您阅读的大小。

```
// 从字符串中获取 html dom
  函数 str_get_html($str, $lowercase=true, $forceTagsClosed=true, $target_charset = DEFAULT_TARGET_CHARSET, $stripRN=true, $defaultBRText=DEFAULT_BR_TEXT, $defaultSpanText=DEFAULT_SPAN_TEXT)
  {
           $dom = new simple_html_dom(null, $lowercase, $forceTagsClosed, $target_charset, $stripRN, $defaultBRText, $defaultSpanText);
           如果 (空($str) || strlen($str) > MAX_FILE_SIZE)
           {
                   $dom->clear();
                   返回假；
           }
           $dom->load($str, $lowercase, $stripRN);
           返回 $dom;
  }

```

您必须更改下面的默认大小（它在 simple_html_dom.php 的顶部）
也许更改为 100000000 ？由你决定。

```
定义（'MAX_FILE_SIZE'，6000000）；
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-05T14:26:28.147

您是否检查了 HTML 是否以某种方式编码 HTML DOM PARSER 不期望？例如，使用 HTML 实体`&lt;html&gt;`代替`<html>`- 仍然会在您的浏览器中显示为正确的 HTML，但不会解析。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-05T15:05:55.983

我假设您使用 curl + str_get_html 而不是简单地将 file_get_html 与 URL 一起使用，因为您需要发送 POST 参数。

您可以使用此 W3C 验证器 ( [http://validator.w3.org/#validate_by_input+with_options](http://validator.w3.org/#validate_by_input+with_options) ) 来验证返回的 HTML，然后，一旦您确定结果是 100% 有效的 HTML 代码，您可以在此处报告错误：[http://sourceforge.net/p/simplehtmldom/bugs/](http://sourceforge.net/p/simplehtmldom/bugs/)。

# ruby-on-rails - Rails 试图从控制台调用控制器方法

> ID：14172469
> 
> 赞同：2
> 
> 时间：2013-01-05T14:00:49.673
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我正在尝试使用when gem 创建一个cron 作业来向用户发送生日提醒，我希望这个cron 每天都运行。

我有任何时候 gem 工作，但我的 cron 工作不断出错。我试图在rails控制台中调用一个控制器方法来解决这个问题，但我不断收到错误，我不确定为什么。

我有这个控制器：

```
class BirthdayRemindersController < ApplicationController

    include ApplicationHelper

    # cron job that sends birthday reminders
    def send_birthday_email_reminders 
        users = User.all

        email_addresses = []

        users.each_with_index do |user, i|
            if user.user_details.birthday_reminders == true
                email_addresses[i] = get_primary_email(user)
            end
        end

        p email_addresses

        users.each do |user|
            if user.user_details.birthday == Date.today
                p "reminder sent"
                send_birthday_reminders(user, email_addresses)      
            end
        end
    end
end 
```

在 Rails 控制台中，我已经尝试了这两种方法，但它们都出错了。

```
Toms-Mac-mini:famnfo TomCaflisch$ rails c
Loading development environment (Rails 3.2.9)
irb(main):001:0> BirthdayRemindersController.send_birthday_email_reminders
NoMethodError: undefined method `send_birthday_email_reminders' for BirthdayRemindersController:Class
        from (irb):1
        from /Users/TomCaflisch/.rvm/gems/ruby-1.9.3-p327@famnfo/gems/railties-3.2.9/lib/rails/commands/console.rb:47:in `start'
        from /Users/TomCaflisch/.rvm/gems/ruby-1.9.3-p327@famnfo/gems/railties-3.2.9/lib/rails/commands/console.rb:8:in `start'
        from /Users/TomCaflisch/.rvm/gems/ruby-1.9.3-p327@famnfo/gems/railties-3.2.9/lib/rails/commands.rb:41:in `<top (required)>'
        from script/rails:6:in `require'
        from script/rails:6:in `<main>'
irb(main):002:0> BirthdayReminders.send_birthday_email_reminders
NameError: uninitialized constant BirthdayReminders
        from (irb):2
        from /Users/TomCaflisch/.rvm/gems/ruby-1.9.3-p327@famnfo/gems/railties-3.2.9/lib/rails/commands/console.rb:47:in `start'
        from /Users/TomCaflisch/.rvm/gems/ruby-1.9.3-p327@famnfo/gems/railties-3.2.9/lib/rails/commands/console.rb:8:in `start'
        from /Users/TomCaflisch/.rvm/gems/ruby-1.9.3-p327@famnfo/gems/railties-3.2.9/lib/rails/commands.rb:41:in `<top (required)>'
        from script/rails:6:in `require'
        from script/rails:6:in `<main>'
irb(main):003:0> 
```

我错过了什么？我没有为此控制器定义路由，因为我不希望任何人能够通过网络浏览器访问它

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-05T14:03:26.057

控制器上的方法是实例方法，而不是类方法。类方法用 定义`self.`。很难从控制台触发控制器操作，因为您错过了整个上下文。您没有会话，没有请求，没有响应。所有这些都使得在控制器操作中使用代码变得很困难。如果您需要从外部触发您的代码（控制台、机架任务、其他代码）。您应该将代码提取到它自己的类中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-06T08:24:02.037

1.  使用“调试器”gem。
2.  在您的控制器方法中添加一个调试器，然后在您的控制台中使用它在调试器模式下运行应用程序后使用 -> "rails s --debugger"

# python - 来自多个工人的 Gunicorn 日志记录

> ID：14172470
> 
> 赞同：7
> 
> 时间：2013-01-05T14:00:52.143
> 
> 标签：python, flask, gunicorn

我有一个烧瓶应用程序，它在服务器上的多个 gunicorn 同步进程中运行，并使用 TimedRotatingFileHandler 从每个工作人员的烧瓶应用程序内登录到文件。回想起来，这似乎是不安全的。是否有一种标准方法可以在 python 中（大容量）完成此操作，而无需编写我自己的基于套接字的日志服务器或类似的？其他人如何做到这一点？我们确实使用 syslog 跨服务器聚合到日志服务器，但理想情况下，我希望首先将日志保留在应用程序节点上。

感谢您的见解

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-14T16:59:26.913

我使用[ConcurrentRotatingFileHandler](https://github.com/dreynolds/ConcurrentLogHandler)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T15:52:21.577

我们最终更改了我们的应用程序以将日志发送到标准输出，现在依靠 supervisord 来聚合日志并将它们写入文件。我们还考虑将日志直接发送到 rsyslog，但目前这对我们来说效果很好。

# testcomplete - 测试完成脚本在 Windows 7 机器上没有得到我的应用程序的对象

> ID：14172480
> 
> 赞同：-1
> 
> 时间：2013-01-05T14:02:02.087
> 
> 标签：testcomplete

我使用 Test Complete 6.0 编写了一个脚本来自动化我的应用程序。测试完成没有得到我的应用程序的对象。

例如：`Sys["Application name"]`返回“找不到对象”。我试图`sys`通过脚本查找运行的 EXE 是什么。`sys`即使我的应用程序在机器上运行，我发现我的应用程序也不在那里。

此问题仅发生在一台 Windows 7 机器上。在其他 Windows 7 和 XP 机器上，我的脚本运行良好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T11:24:55.323

最有可能的是，被测应用程序以管理员身份运行，而 TestExecute 没有。这使得该工具无法访问应用程序进程。以管理员身份运行 TestExecute（右键单击 TestExecute 可执行文件并选择“以管理员身份运行”）并检查这是否有帮助。

顺便说一句，TestComplete/TestExecute 6 正式不支持 Windows 7。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-05T20:35:31.437

您需要通过以下方式访问您的应用程序：
**Sys.Process("Process of yourtested app")**

您在 TestComplete 中看不到您测试的应用程序的过程这一事实可能与[对象浏览器工具栏命令](http://support.smartbear.com/viewarticle/29276/)有关。确保启用了**显示所有用户进程选项。**

# android - 检查活动是否从非活动类运行

> ID：14172484
> 
> 赞同：0
> 
> 时间：2013-01-05T14:02:23.547
> 
> 标签：android, class, android-activity

我想检查活动是否从常规类（非活动）运行，但应用程序正在崩溃并给我`NullPointerException`，我在`permission GET_TASKS` 这里设置的是 LogCat 输出

```
 01-05 13:38:38.703: E/AndroidRuntime(5595): FATAL EXCEPTION: main
01-05 13:38:38.703: E/AndroidRuntime(5595): java.lang.RuntimeException: Unable to start activity ComponentInfo{net.evolution.betting.application/net.evolution.betting.application.InitActivity}: java.lang.NullPointerException
01-05 13:38:38.703: E/AndroidRuntime(5595):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
01-05 13:38:38.703: E/AndroidRuntime(5595):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
01-05 13:38:38.703: E/AndroidRuntime(5595):     at android.app.ActivityThread.access$2300(ActivityThread.java:125)
01-05 13:38:38.703: E/AndroidRuntime(5595):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
01-05 13:38:38.703: E/AndroidRuntime(5595):     at android.os.Handler.dispatchMessage(Handler.java:99)
01-05 13:38:38.703: E/AndroidRuntime(5595):     at android.os.Looper.loop(Looper.java:123)
01-05 13:38:38.703: E/AndroidRuntime(5595):     at android.app.ActivityThread.main(ActivityThread.java:4627)
01-05 13:38:38.703: E/AndroidRuntime(5595):     at java.lang.reflect.Method.invokeNative(Native Method)
01-05 13:38:38.703: E/AndroidRuntime(5595):     at java.lang.reflect.Method.invoke(Method.java:521)
01-05 13:38:38.703: E/AndroidRuntime(5595):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
01-05 13:38:38.703: E/AndroidRuntime(5595):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
01-05 13:38:38.703: E/AndroidRuntime(5595):     at dalvik.system.NativeStart.main(Native Method)
01-05 13:38:38.703: E/AndroidRuntime(5595): Caused by: java.lang.NullPointerException
01-05 13:38:38.703: E/AndroidRuntime(5595):     at net.evolution.betting.application.ConnectionChangeReceiver.checkIsNotationActive(ConnectionChangeReceiver.java:58)
01-05 13:38:38.703: E/AndroidRuntime(5595):     at net.evolution.betting.application.ConnectionChangeReceiver.<init>(ConnectionChangeReceiver.java:20)
01-05 13:38:38.703: E/AndroidRuntime(5595):     at net.evolution.betting.application.InitActivity.onCreate(InitActivity.java:30)
01-05 13:38:38.703: E/AndroidRuntime(5595):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
01-05 13:38:38.703: E/AndroidRuntime(5595):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627) 
```

这是我的来源

```
public class ConnectionChangeReceiver extends BroadcastReceiver
{
    Context c;
    public ConnectionChangeReceiver(Context c){
        checkIsNotationActive();
        this.c = c;
    }

  @Override
  public void onReceive( Context context, Intent intent )
  {

    ConnectivityManager connectivityManager = (ConnectivityManager) context.getSystemService( Context.CONNECTIVITY_SERVICE );
    NetworkInfo activeNetInfo = connectivityManager.getActiveNetworkInfo();
    NetworkInfo mobNetInfo = connectivityManager.getNetworkInfo(     ConnectivityManager.TYPE_MOBILE );
    if ( activeNetInfo != null && checkIsNotationActive() == true)
    {

        ((NotationActivity)(context)).finish();

    }else if( activeNetInfo == null){

        Intent i = new Intent("net.evolution.betting.application.NOTATIONACTIVITY");
        i.putExtra("DialogTitle", "Warining!");
        i.putExtra("DialogBody", "It seems like your app is not connected to Internet witch is required.Please check your network connection.");
        i.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);

        context.startActivity(i);

    }

  }

  private boolean checkIsNotationActive(){

          ActivityManager activityManager = (ActivityManager)c.getSystemService (Context.ACTIVITY_SERVICE); 
              List<RunningTaskInfo> activitys = activityManager.getRunningTasks(Integer.MAX_VALUE); 
              boolean isActivityFound = false; 
              for (int i = 0; i < activitys.size(); i++) { 
                  if (activitys.get(i).topActivity.toString().equalsIgnoreCase("ComponentInfo{net.evolution.betting.application/net.evolution.betting.application.NotationActivity}")) {
                      isActivityFound = true;
                  }
              } 
              return isActivityFound; 

  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T14:26:44.107

更改您的代码，因为您的`c`Context 实例`null`将您的代码移动到内部`onReceive`并使用上下文来访问 System Service ：

```
public class ConnectionChangeReceiver extends BroadcastReceiver
{
    Context c;

  @Override
  public void onReceive( Context context, Intent intent )
  {
     this.c = context;  //<<<<<<<  

     // your code here
  }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T14:20:57.250

对不起，我找不到问题出在哪里，但也许，您可以尝试以下方法：由于您正在使用广播接收器，为什么不尝试在“NotationActivity”的“onCreate（）”和另一个中发送广播（A）在“onDesdroy()”中广播(B)。然后，您可以通过检查一个变量来检查活动是否正在运行，也许是一个初始化为 0 的整数，当 A 收到时更改为 1，当 B 收到时更改为 2。

# javascript - 如何使用 jquery 动态加载脚本文件

> ID：14172485
> 
> 赞同：1
> 
> 时间：2013-01-05T14:02:28.600
> 
> 标签：javascript, jquery

我正在使用 getScript 从另一个域加载脚本文件：

```
 $.getScript("URL to other domain", function(script, textStatus, jqXHR)
 {
    alert(script)          // =======> undefined
    alert(textStatus)      // =======> success
    alert(jqXHR)           // =======> Object
 }); 
```

脚本文件已在浏览器中成功加载，但我想从脚本文件中访问文本。我该怎么做以及为什么脚本未定义？

# javascript - 从 GeocoderResult 获取 formatted_address 组件

> ID：14172487
> 
> 赞同：1
> 
> 时间：2013-01-05T14:02:40.967
> 
> 标签：javascript, google-maps, google-maps-api-3

GeocoderResult 返回一个对象数组（我已经看到数组元素的数量范围从南极洲的 1 到东京的 16）。数组中的每个对象都包含以下属性：

*   address_components：包含多个描述地址的对象的数组。这些对象中的每一个都包含一个 long_name 属性（字符串）、short_name 属性（字符串）和 type 属性（数组，也将在下面描述）
*   formatted_address：描述地址的直观单个字符串
*   几何：处理经度/纬度/视点
*   类型：由[https://developers.google.com/maps/documentation/javascript/geocoding#GeocodingAddressTypes](https://developers.google.com/maps/documentation/javascript/geocoding#GeocodingAddressTypes)描述。

返回数组中的第一个对象似乎是最具描述性的物理地址（总是这样吗？），它包含的“formatted_address”似乎总是能满足我的需求。问题是我不想要一个字符串，而是每个部分。

例如，典型的 USA formatted_address 可能如下：

*   美国密歇根州范布伦
*   244 号国道，农达，MT 59072，美国
*   24 West 18th Avenue, 斯波坎, WA 99203, USA

对于这三个 formatted_addresses，我想得到以下信息：

```
{address:null, street: null, city:"Van Buren", state:"MI", zipcode: null, country:"USA"}
{address:null, street: "State Highway 244", city:"Roundup", state:"MT", zipcode: 59072, country:"USA"}
{address:24, street: "West 18th Avenue", city:"Spokane", state:"WA ", zipcode: 99203, country:"USA"} 
```

我应该尝试解析 formatted_address 吗？或者我应该使用address_components，并以某种方式尝试提取我需要的部分？第二种解决方案似乎是最好的，可能如下所示，但处理类型数组和短/长名称使其变得困难。

如果我调用 getAddressParts(GeocoderResult[0].address_components)，以下工作正常。

```
function getProp(a,type,lng) {
    var j,rs;
    loop:
    for (var i = 0; i < a.length; i++) {
        for (var j = 0; j < a[i].types.length; j++) {
            if(a[i].types[j]==type) {
                rs=a[i][lng]
                break loop;
            }
        }
    }
    return rs;
}

function getAddressParts(a) {
    var o={};
    o.street_number=getProp(a,'street_number','long_name');
    o.route=getProp(a,'route','long_name'); //Street
    o.establishment=getProp(a,'establishment','long_name'); //Used for parks and the like
    o.locality=getProp(a,'locality','long_name');   //City
    if(!o.locality){o.locality=getProp(a,'sublocality','long_name');}   //Some city not available, use this one (needed for in lake michigan)?
    if(!o.locality){o.locality=getProp(a,'administrative_area_level_2','long_name');}   //Some city not available, use this one (needed for in lake michigan)?
    o.administrative_area_level_1=getProp(a,'administrative_area_level_1','short_name');    //State
    o.country=getProp(a,'country','short_name')+'A';    //A is for usA, and is just being used for testing
    o.postal_code=getProp(a,'postal_code','long_name');
    return o;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T15:22:11.073

我建议使用`address_components`. 在 a`formatted_address`中，您将不知道哪个路径表示哪个管理级别。

# ffmpeg - 用于将 HTML5 视频从 ogg 转换为 mp4 的 ffmpeg 设置

> ID：14172488
> 
> 赞同：0
> 
> 时间：2013-01-05T14:02:46.293
> 
> 标签：ffmpeg, html5-video

我正在尝试将 OVG 转换为 MP4 H.264 有效格式以用于 HTML5 视频。我试试这个：

```
ffmpeg -i video_source_file.ogv -vcodec libx264 -vpre ipod640 -b 250k -bt 50k -acodec libfaac -ab 56k -ac 2 -s 480x320 video_out_file.mp4 
```

但生成的格式对 Internet Explorer 9 和 10 无效。其他 H.264 视频工作正常。VLC 说生成的视频是 H.264。

仅当我尝试将 ogv/ogg 有效视频转换为 mp4 H.264 时才会发生这种情况。

我还在 ffmpeg2theora 中尝试了许多选项，但它似乎只是将文件转换为 theora。我认为这可能会有所帮助，但我无法生成有效的 H.264。

如何让它发挥作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T11:53:26.703

它似乎工作：

> ffmpeg.exe -y -i in.ogv -vcodec libx264 -vpre libx264-lossless_max out.mp4

# notifications - 如何使用 Python 检查 gnome-shell 通知？

> ID：14172490
> 
> 赞同：0
> 
> 时间：2013-01-05T14:03:05.943
> 
> 标签：notifications, gnome-shell

我在这样做时遇到了一些麻烦：
我在我的 Archlinux 发行版上使用 Conky，并在 python 中编写了一个快速脚本来检查我的 gmail 中是否有新邮件。在我的 conkyrc 中，此脚本每 5 分钟执行一次并返回一些邮件（如果我没有，则为 0）。工作正常。

我想做的是：
如果邮件数量> 0，则显示通知（gnome-shell 通知）。我现在唯一的问题是，如果我有未读邮件（例如 4 封未读邮件），每 5 分钟会有一个新通知说我有 4 封邮件未读。我想做的是检查是否已经有通知，这样我就不必再次显示它了……有谁知道如何解决这种问题？

这是我的代码：

```
#!/usr/bin/python

from gi.repository import Notify
from urllib.request import FancyURLopener

url = 'https://%s:%s@mail.google.com/mail/feed/atom' % ("username", "password")

opener = FancyURLopener()
page = opener.open(url)

contents = page.read().decode('utf-8')

ifrom = contents.index('<fullcount>') + 11
ito   = contents.index('</fullcount>')

unread = contents[ifrom:ito]

print(unread)

if unread != "0" :
    Notify.init ("New Mail")
    Hello=Notify.Notification.new ("New mail","You have "+unread+" new mail(s)","/usr/share/icons/Faenza/actions/96/mail-forward.png")
    Hello.show () 
```

我必须准确地说我对python很陌生。如果有人有解决方案，请提前感谢:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T04:49:09.610

一种可能的解决方案是将 unread 的值序列化到文件中。

然后将您的检查从邮件数是否大于 0 更改为邮件数是否大于零或与文件中的最后一个序列化计数不同。

对此的扩展是将通知运行的时间与邮件计数一起序列化，这样您就可以扩展检查以显示重复通知（显示 4 封电子邮件两次，不是每 5 分钟一次，而是每 3 小时一次）。

所以你原来的支票是`if unread != "0" :`它会变成这样`if unread != "0" && unread != serialisedvalue:`。在显示重复通知时间阈值情况下，它变为

```
if unread != "0":
    if ((datetime.now() - serialiseddate) < threshold) :
        if unread != serialisedvalue: 
```

3小时在哪里`threshold = 3600*3`。

序列化和反序列化的示例代码如下

```
#Serialising
try:
    # This will create a new file or **overwrite an existing file**.
    f = open("mailcount.txt", "w")
    try:
        f.write(unread + "\n") # Write a string to a file
        f.write(datetime.now().strftime('%b %d %Y %I:%M%p'))
    finally:
        f.close()
except IOError:
    pass

#Deserialising 
try:
    f = open("mailcount.txt", "r")
    try:
        # Read the entire contents of a file at once.
        serialisedvalue = f.readline()
        serialseddate = datetime.strptime(f.readline(), '%b %d %Y %I:%M%p')
    finally:
        f.close()
except IOError:
    pass 
```

另一种可能的解决方案是以某种方式获取当前的活动通知计数并将其添加到您的条件中，尽管我找不到使用[Notify 使用的 API](http://developer.gnome.org/libnotify/0.7/)执行此操作的方法。

# sql - 为什么使用 ORDER by 为选择打开的游标不反映对后续表的更新

> ID：14172501
> 
> 赞同：2
> 
> 时间：2013-01-05T14:03:40.120
> 
> 标签：sql, sql-server, database, tsql

我已经设置了这个奇怪行为的小例子

```
 SET NOCOUNT ON;
    create table #tmp
    (id int identity (1,1),
    value int);

    insert into #tmp (value) values(10);
    insert into #tmp (value) values(20);
    insert into #tmp (value) values(30);

    select * from #tmp;

    declare @tmp_id int, @tmp_value int;
    declare tmpCursor cursor for 
    select t.id, t.value from #tmp t
    --order by t.id;

    open tmpCursor;

    fetch next from tmpCursor into @tmp_id, @tmp_value;

    while @@FETCH_STATUS = 0
    begin
        print 'ID: '+cast(@tmp_id as nvarchar(max));

        if (@tmp_id = 1 or @tmp_id = 2)
            insert into #tmp (value)
            values(@tmp_value * 10);

        fetch next from tmpCursor into @tmp_id, @tmp_value;
    end

    close tmpCursor;
    deallocate tmpCursor;

    select * from #tmp;
    drop table #tmp; 
```

我们可以借助`print`游标甚至分析表中的新行来观察`#tmp`。但是，如果我们取消注释`order by t.id`游标声明中的 - 新行不会被解析。

这是预期的行为吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-05T14:22:31.310

你看到的行为相当微妙。默认情况下，SQL Server 中的游标是动态的，因此您会看到变化。然而，隐藏在[文档](http://msdn.microsoft.com/en-us/library/ms180169.aspx)中的是这一行：

> 如果 select_statement 中的子句与请求的游标类型的功能发生冲突，SQL Server 会将游标隐式转换为另一种类型。

包含 时`order by`，SQL Server 会读取所有数据并将其转换为临时表进行排序。在此过程中，SQL Server 还必须将游标的类型从动态更改为静态。这不是特别有据可查的，但您可以很容易地看到这种行为。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-05T14:36:49.457

您可以使用 sp_describe_cursor 存储过程来查看游标的元数据。在您的示例中执行此操作显示以下内容：

订购包括：

**模型**= 不敏感（或静态），**并发**= 只读

ORDER BY 排除：

**模型**= 动态，**并发**= 乐观

来源：[http ://technet.microsoft.com/en-us/library/ms173806(v=sql.105).aspx](http://technet.microsoft.com/en-us/library/ms173806(v=sql.105).aspx)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-05T14:22:02.127

我认为通过放入 ORDER BY 子句，它会强制 CURSOR 成为 STATIC CURSOR，而没有它则默认为 DYNAMIC。

# c++ - C++ 中的内存分配区域（堆栈 vs 堆 vs 静态）

> ID：14172505
> 
> 赞同：9
> 
> 时间：2013-01-05T14:04:10.567
> 
> 标签：c++, linux, x86

我知道 C++ 中有三个而不是两个内存区域：堆栈、堆和静态分配功能的区域。我有两个问题

1.  为什么堆比栈慢这么多？当然它应该只是一个额外的间接级别？

2.  为静态“特性”（变量、函数、类）分配的内存区域是否提供比堆更快的性能？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-05T14:13:00.670

先说几个旁注。正确的术语是自动而不是堆栈，动态而不是堆。另一个是 C++11 现在有四种而不是三种类型的内存。C++11 添加了线程本地内存。

自动内存速度很快，因为它是在大多数机器上使用调用堆栈实现的。只需将堆栈指针调整适当的数量，瞧！内存已分配。动态内存需要在底层做更多的工作。必要的内存可能没有附加到进程中，要实现这一点需要通过操作系统。即使内存可用，动态内存管理工具仍然必须找到它并将其标记为正在使用。

静态内存作为编译和链接过程的一部分被“分配”。当您在某个源文件中定义静态变量时，编译后的代码包含特殊指令，供链接器为该变量保留空间。编译器还将您的 C/C++ 代码转换为机器代码。链接器将所有这些不同的数据和代码块结合起来，并解析地址以形成可执行的二进制映像。当您运行程序时，该二进制图像被加载到（虚拟）内存中。一旦程序开始执行，该静态变量的内存就存在。

就性能而言，最好不要提前过多担心性能。虽然静态内存很快，但也有很多缺点。您要做的最后一件事是使所有数据静态化。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-05T14:21:46.407

When comparing the speed of stack, heap or static allocation areas, there are two different speeds to compare.

First, there is the **speed of access**. This is comparable for each of the three areas, although local (stack allocated) variables can have a slight edge because they are easier for the compiler to cache in a CPU register. Otherwise, it is essentially just memory access.

Secondly, there is the **speed of allocation**. This is where the big differences arise.
*Statically allocated* objects get their memory reserved at program startup (or library load time when they reside in a dynamically loaded library), so their allocation time is immesurably short as far as the program is concerned.
*Stack allocated* objects are also cheap to allocate, because they take a predictable allocation pattern (last allocated == first deallocated) that the compiler can easily take into account. For example, if an application has multiple threads, it will also have multiple stacks (each stack reserved for one thread), so the threads don't have to compete with each other for access to the stack memory.
*Heap allocated* objects are the difficult ones, because the heap is used for everything that does not nicely fit within the earlier groups. Also, there is typically only one heap for the entire application, so thread synchronisation is needed to allocate memory from the heap. And, because the allocation/deallocation patterns are fairly random, measures have to be taken to ensure not too much heap memory gets 'lost' due to fragmentation of the heap. This all takes some time that gets paid when doing an allocation or deallocation.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-05T14:09:45.543

> 1）为什么堆比栈慢这么多？当然它应该只是一个额外的间接级别？

因为在堆栈上分配内存意味着将堆栈指针 sp 增加1*其中*是^(字节)数。以这种方式更改*sp*已经足够快了。使用堆，您可以做很多事情，例如寻找空闲插槽或请求操作系统的内存，这些都是昂贵的操作。*`N``N`*

 **^(1\. 或减少，取决于堆栈增长的方式！)

> 2) 为静态“特性”（变量、函数、类）分配的内存区域是否提供比堆更快的性能？

如果您的意思是`static`变量，那么是的，它们比堆快，因为它们是静态分配的，并且它们一直存在到程序结束。但是，没有类之`static`类的东西，并且在这种情况下无法比较为函数分配的内存（这个问题对我来说并不完全有意义）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-05T14:11:49.593

尽管“堆更慢”的说法过于宽泛而没有意义，但与堆分配相关的某些方面肯定比堆慢。与堆栈不同，堆栈不能碎片化，因为您无法从堆栈中间移除东西，堆会受到碎片化的影响。您的程序可以按任意顺序取消分配对象，从而在堆中创建“洞”。当您请求更多内存时，分配器必须搜索合适的“洞”来满足您的请求。

此外，基于堆栈的操作由计算机硬件高度优化。最后，在自动存储（“堆栈”的正式名称）中分配的对象由于靠近程序访问的其他本地对象而被缓存的可能性更高。

就`static`存储而言，它仅适用于数据成员：静态函数和静态成员函数只是重用关键字而不重用其含义。静态存储中的对象只分配一次，因此不会产生碎片。

分配完成后，对三种存储（静态、动态和自动）中对象的访问速度几乎相同。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-05T14:11:20.697

1）这不是间接问题，而是内存管理问题。在堆栈上分配内存只是将堆栈指针向上移动。虽然堆上的分配涉及寻找合适大小的内存段，并考虑到碎片。

2) 静态内存在程序的主入口点之前分配，因此没有真正的运行时开销。访问已分配内存的速度实际上并不取决于分配内存的位置。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-01-05T14:08:17.450

堆栈比堆快得多的一个原因是由于局部性原则。存储在堆栈中的数据位于连续的位置，这意味着如果引用一个变量，它的相邻信息会自动被带到缓存中。存储在堆上的数据（动态数组除外）没有这个优势。**

# user-interface - 寻找支持 align 属性、多个 span 或 div 元素、多个列的 OSD

> ID：14172520
> 
> 赞同：10
> 
> 时间：2013-01-05T14:05:58.593
> 
> 标签：user-interface, gnome, xlib, renderer, pango

请让我知道是否有适用于 Xorg/Linux 平台的 OSD**屏幕显示程序**或**技术**，它可以以比 pango 更丰富的方式呈现 XML，至少支持 align 属性，以及多个 span 或 div 元素，所以它可以显示多列。

例如[花栗鼠 osd](http://www.chipmunkav.com/help/osd.htm)

到目前为止我检查过的内容：

*   **gnome-osd-client**呈现 XML，但 gnome-osd-client 提供非常简单的 XML pango

*   **osd_cat**但它不需要任何 XML。

*   **navit**有某种用于 OSM 数据的 XML，它使用 osd，但很难理解。

如果不存在这样的*osd 程序*，请告诉我

*   具有不同后端支持的 HTML 渲染器，可以编程为使用 OSD 显示。

*   在后端使用 osd 的其他现有包（如 navit）的相关源可用于呈现这种 XML。

我的问题是我实际上使用 pango，但它不够灵活，无法满足我在多列中显示 XML 的需求。

# node.js - 连接静态文件获取结合手动http服务器

> ID：14172524
> 
> 赞同：1
> 
> 时间：2013-01-05T14:06:22.807
> 
> 标签：node.js, query-string, connect

`connect`在未指定静态文件服务器的情况下启动服务器时（在 coffeescript 中）

```
server = connect().use (req, res) ->
  console.log req.url
server.listen 3000 
```

`localhost:3000?something=43`请求的控制台日志输出是

```
/?something=43
/favicon.ico 
```

但是在将静态文件服务器添加到`public`目录时

```
server = connect().use(connect.static('public')).use (req, res) ->
  console.log req.url
server.listen 3000 
```

相同的请求输出

```
/favicon.ico 
```

那么查询字符串去哪儿了？

# android - 片段中的 ListAdapter

> ID：14172527
> 
> 赞同：0
> 
> 时间：2013-01-05T14:07:45.060
> 
> 标签：android, eclipse, android-fragments

我正在尝试创建一些条目的列表，从而在 php 服务器上产生查询。我正在使用一个片段，它调用一个`AsyncTask`名为`DescarregarLlistatEntrades`. 这个类，基本上是从 php 执行中解析 json 数据，然后我想填充一个 List，但是由于`DescarregarLlistatEntrades`不是扩展`ListActivity`，我不能使用方法`setListAdapter`。

这是代码：

片段：

```
public class MyFragmentB extends Fragment {
private ArrayList<HashMap<String, String>> llistatEntrades;
Context cont=getActivity(); //Recupero el contexte per poder pasar-lo.

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
    View myFragmentView = inflater.inflate(R.layout.llistat_fotos, container, false);

    //hashmap per al llistat de les entrades que hi han al servidor
    llistatEntrades=new ArrayList<HashMap<String, String>>();

    //descarrego totes les imatges en segon plà i omplo el view
    new DescarregarLlistatEntrades(cont, myFragmentView, llistatEntrades).execute();

    //Recupero el el layout de la view per poder fer coses am ella a posteriori.
    ListView lv = (ListView)myFragmentView.findViewById(android.R.id.list);

    return myFragmentView;
} 
```

DescarregarLlistatEntrades：

```
public class DescarregarLlistatEntrades extends AsyncTask<String, String, String>{
private Context mContext;
private View rootView;
private ArrayList<HashMap<String, String>> llistatEntrades;
private String linkFoto, dataUpload, usuariUpload, comentariUpload;
private ProgressDialog pDialog;
private List<NameValuePair> params = new ArrayList<NameValuePair>();
JSONParser jsonParser = new JSONParser();

private String url_get_entrades = "http://192.168.1.33/testing/recuperaentrades.php"; //passantli per get el id de la setmana 

public DescarregarLlistatEntrades(Context context, View rootView, ArrayList<HashMap<String, String>> llistatEntrades){
    this.mContext=context;
    this.rootView=rootView;
    this.llistatEntrades=llistatEntrades;
}

@Override
protected void onPreExecute() {
    [...]
}

@Override
protected String doInBackground(String... arg0) { 
    params.add(new BasicNameValuePair("setmana", "1"));
    JSONObject json = jsonParser.makeHttpRequest(url_get_entrades, "GET", params);
    JSONArray entradesObj;
    try {
        int success = json.getInt("success");
        //mirem si hi ha success
        if (success==1){
            entradesObj = json.getJSONArray("entrades"); //recupero totes les entrades
            for (int i=0; i<entradesObj.length();i++){
                JSONObject entrada = entradesObj.getJSONObject(i); //recupero cada objecte
                //guardo cada camp de cada entrada a variables:
                this.usuariUpload=entrada.getString("usuariUploader");
                this.linkFoto=entrada.getString("urlFoto");
                this.comentariUpload=entrada.getString("comentariUsuari");
                this.dataUpload=entrada.getString("dataUpload");
                //creo el hashmap dels valors anteriors
                HashMap<String, String> map = new HashMap<String, String>();
                map.put("usuariUpload", this.usuariUpload);
                map.put("linkFoto", this.linkFoto);
                map.put("comentariUpload", this.comentariUpload);
                map.put("dataUpload", this.dataUpload);
                this.llistatEntrades.add(map);
            }
        } else {
            Log.d("debugging","No hi han entrades..");
        }

    } catch (JSONException e) {
        e.printStackTrace();
    } 

    return null;
}

@Override
protected void onPostExecute(String result) {
    super.onPostExecute(result);
    this.pDialog.dismiss(); //amago el dialog
    // updating UI
    /**
     * Updating parsed JSON data into ListView
     * */
    ListAdapter adapter = new SimpleAdapter(
            this.mContext, this.llistatEntrades,
            R.layout.entrada_llista, new String[] { "usuariUpload",
                    "linkFoto","comentariUpload", "dataUpload"},
            new int[] { R.id.userNameUploader, R.id.titolFoto, R.id.comment, R.id.hora });
    // updating listview
    setListAdapter(adapter); //THIS LINE!!

} 
```

> “DescarregarLlistatEntrades 类型的方法 setListAdapter(ListAdapter) 未定义”

使用片段时我应该使用其他方法吗？

请注意，我传递给 AsyncTask 类、Context 和 Inflater。也许我必须通过别的东西？

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-05T14:14:33.893

您应该将实例传递`ListView`给 asynctask，以便将列表适配器设置为此`ListView`. 如果您使用普通`Fragment`- 您可以添加`ListView`到布局，在`onCreateView`方法中检索它并传递给异步任务。您也可以使用`ListFragment`这种方式，您可以`ListView`通过`getViewMethod`在片段中使用来获得。`rootView`或者，如果它是片段布局的根，则只获取列表视图。就像是：

```
((ListView) rootView.findViewById(R.id.list_view)).setAdapter(adapter); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T14:50:08.147

最终代码：这是 AsyncTask 类：

```
public DescarregarLlistatEntrades(Context context, View rootView, ArrayList<HashMap<String, String>> llistatEntrades, ListView lv){
    this.mContext=context;
    this.rootView=rootView;
    this.llistatEntrades=llistatEntrades;
    this.lv=lv;
} 
```

还有片段

```
public class MyFragmentB extends Fragment {
private ArrayList<HashMap<String, String>> llistatEntrades;
Context cont;

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
    this.cont=getActivity(); //Recupero el contexte per poder pasar-lo.
    View myFragmentView = inflater.inflate(R.layout.llistat_fotos, container, false);

    //hashmap per al llistat de les entrades que hi han al servidor
    llistatEntrades=new ArrayList<HashMap<String, String>>();
    //Recupero el el layout de la view per poder fer coses am ella a posteriori.
    ListView lv = (ListView)myFragmentView.findViewById(android.R.id.list);

    //descarrego totes les imatges en segon plà i omplo el view
    new DescarregarLlistatEntrades(cont, myFragmentView, llistatEntrades, lv).execute();

    return myFragmentView;
} 
```

像魅力一样工作！！

# php - 如何在 codeigniter 中验证 ajax 表单

> ID：14172537
> 
> 赞同：1
> 
> 时间：2013-01-05T14:08:32.003
> 
> 标签：php, forms, codeigniter, validation

我想使用 codeigniter form_validator 库验证表单。

问题是数据来自ajax，所以我不明白代码应该如何。

```
 public function register(){
    $this->load->library('form_validation');
    $json = $_POST['data'];
    $json = json_decode($json);
    $data = get_object_vars($json);

    $this->form_validation->set_rules('username', 'Username', 'trim|required|min_length[5]|max_length[12]|xss_clean');
    if($this->form_validation->run()){
        echo 'asdf';
    } else {
        echo 'xyz';
    }

} 
```

可以看到有一个类似于 $_POST 超全局数组的 $data 数组。如何验证 $data 数组并使用带有表单状态和错误消息的 json 编码数组发回响应？

这是我使用 ajax 发送数据的方式：

```
 function register(){
    var site_url = $("#site_url").val();
    var post_url = site_url+"index.php/ajax/register";

    var details = { };

    details.username = $("#username").val();
    details.password = $("#password").val();
    details.rpassword = $("#rpassword").val();
    details.country = $("#country").val();
    details.postal_code = $("#postal_code").val();
    details.email = $("#email").val();
    details.date_of_birth = $("#date_of_birth").val();

    var json = JSON.stringify(details);

    $.post(post_url, {'data': json}, function(data){
        alert(data);
        //data = JSON.parse(data);

    });

    return false;
} 
```

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-05T14:12:00.203

从[文档中](http://ellislab.com/codeigniter/user-guide/libraries/form_validation.html#rulereference)：

> “注意：这些规则也可以称为离散函数。例如：$this->form_validation->required($string);”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-05T14:39:30.193

好的，尚未对此进行测试，但它应该可以工作。

首先，甚至不用费心将数据作为 json 发送到您的控制器，只需将其作为正常的发布请求发送即可。

```
$.post(post_url, {'data': details}, function(data){ 
```

然后在控制器中处理验证，就像处理任何表单验证一样。

```
public function register(){
$this->load->library('form_validation');
$this->form_validation->set_rules($this->input->post('username'), 'Username',
'trim|required|min_length[5]|max_length[12]|xss_clean');
if($this->form_validation->run()==FALSE){
    $errors = 'Username error here';
}
//You can iterate through any other validation rules building the $errors 
//variable then pass them back to the view with:

if(isset($errors))
{
    print json_encode(array("status"=>"error", "message"=>$errors));
} else {
   /execute pass code here
}

} 
```

之后，您可以回显视图中的错误（如果有）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-10T13:27:19.163

有一种方法可以验证不是来自 POST/GET 请求的数据。我认为这个链接应该有帮助：[https ://www.codeigniter.com/userguide3/libraries/form_validation.html#validating-an-array-other-than-post](https://www.codeigniter.com/userguide3/libraries/form_validation.html#validating-an-array-other-than-post)

我对来自解码的数据进行了测试`php://input`

```
$filters_obj = json_decode(file_get_contents('php://input'));
$this->form_validation->set_data($filters_prop_arr);
$this->form_validation->set_rules('email', 'Full Name', 'required');

if ($this->form_validation->run() == false) {
    var_dump('not workin');
    return false;
} 
```

# python - 烧瓶上的getlist

> ID：14172541
> 
> 赞同：1
> 
> 时间：2013-01-05T14:09:19.520
> 
> 标签：python, flask, werkzeug

使用 Flask 中的 request.form.getlist，我只得到列表的最后一个值。这里下面的.py代码和html相关。如果我抑制以下三行，那么我会得到完整的列表，但是这样做我会错过 html 表行的标题。

```
<form action="{{ url_for('show_entries')}}" method=get>
<td width="50"><font size="2">{{ L }}</font></td>   
</form> 
```

我该怎么办 ？感谢您的任何提示！

```
from flask import Flask, render_template, request, url_for

app = Flask(__name__)

data = [
('t', 0, 'a'),
('t', 0, 'b'),
('t', 0, 'c'),
('t', 0, 'd')
 ]

@app.route('/', methods=['GET', 'POST'])
def show_entries():
  entries=[]
  for (i,v) in enumerate(data):
     entries.append(data[i][2])
  return render_template('layout2.html', entries=entries)

@app.route('/get', methods=['GET', 'POST'])
def get_entries():
  cl1=[]
  cl1=request.form.getlist('cn')
  return render_template('test2.html', cl1=cl1)

if __name__ == "__main__":
   app.debug = True
   app.run() 
```

layout2.html 文件是：

```
<!DOCTYPE HTML>
<table>

{% for L in entries %}
<tr>
<form action="{{ url_for('show_entries')}}" method=get>
<td width="50"><font size="2">{{ L }}</font></td>   
</form> 
<form action="{{ url_for('get_entries')}}" method=post>
<td width=100 align=center><input type=text name=cn size=3 value=0.0></td>
</tr>
{% if loop.last==True %}
    </table>
    <br>
    <div ALIGN=left>
    <input type=submit value=Submit>
    </form>
    </div>
{% endif %}  
{% endfor %} 
```

test2.html 是：

```
<!DOCTYPE HTML>
<div ALIGN="center">
<td width="50"><font size="2" face="verdana" color="red">OUTPUT=</font></td>
<form action="{{ url_for('get_entries')}}" method=get></form>
<td width="50"><font size="2" face="verdana" color="red">{{ cl1 }}</font></td>
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-05T14:14:11.477

`<tr>`元素可以拥有的唯一直接后代是`<td>`和`<th>`元素。你不能`<form>`在那里有一个元素。

把你的`<form>`标签放在里面，`<td>`它应该可以工作：

```
<td width="50">
    <form action="{{ url_for('show_entries')}}" method=get>
        <font size="2">{{ L }}</font>
    </form>
</td> 
```

此外，您的 HTML 已过时：

*   该`<font>`标签已弃用。

*   同样，该`align`属性也已弃用。

使用 CSS 设置样式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-06T03:40:39.490

您正在打开多个`form`元素但只关闭其中一个 - 这可能导致浏览器只发送*最后一个*表单 - 因此只发送一个值。`form`而是将您的整个表格包裹起来（并删除嵌套表格）并且`getlist`可以使用。

# javascript - 实现多个组合框只会产生一个下拉按钮

> ID：14172542
> 
> 赞同：2
> 
> 时间：2013-01-05T14:09:30.350
> 
> 标签：javascript, html, css, jquery-ui

在这里使用代码：http: [//jqueryui.com/autocomplete/#combobox](http://jqueryui.com/autocomplete/#combobox) 但是用类替换 id 几乎可以实现所需的功能......除了所有组合框只有下拉按钮。如何为每个组合框获取下拉按钮？                  

```
<div class="ui-widget" style="display: inline-block;" >
  <select id="tag01" class="comboBox">
    <option value="">Select one...</option>
      <c:forEach items="${allTags}" var="tag">
        <option value="${tag.title}">${tag.title}</option>
      </c:forEach>
   </select>
</div>
<div class="ui-widget" style="display: inline-block;" >
  <select id="tag02" class="comboBox">
    <option value="">Select one...</option>
    <c:forEach items="${allTags}" var="tag">
      <option value="${tag.title}">${tag.title}</option>
    </c:forEach>
  </select>
</div> 
```

然后像这样调用comboxbox：

```
 $("#tag01").combobox();
 $("#tag02").combobox(); 
```

或者

```
 $(".comboBox").combobox(); 
```

结果只有一个下拉按钮。只有当我从 div 样式中删除显示内联块时，我才会获得多个按钮，但是组合框在多行上 - 我不想要这个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T15:53:02.517

下拉按钮是绝对定位的，这意味着它不会影响页面的正常流动。当您添加第二个组合框时，`position: relative`容器元素中的与组合会导致堆叠在按钮顶部的框。在元素的右侧留出一些空间`.ui-widget`可以解决问题。

例如，

```
<div class="ui-widget" style="display: inline-block; margin-right:40px">
  <select id="tag01" class="comboBox">
    ...
   </select>
</div> 
```

有关演示，请参见[http://jsfiddle.net/YH3ep/3/](http://jsfiddle.net/YH3ep/3/)

# wordpress - 如何使用 wpmu 在 localhost 中为新站点创建子域或子目录？

> ID：14172545
> 
> 赞同：2
> 
> 时间：2013-01-05T14:09:46.667
> 
> 标签：wordpress

我有一个关于 wpmu 的查询，我尝试使用 wpmu 在本地主机中使用子域创建新站点，但我无法做到。我已使用此链接在我的本地主机中设置 wpmu。 [关联](http://codex.wordpress.org/Create_A_Network)

当我尝试使用子域时，它会出现此错误 ![在此处输入图像描述](../Images/a28e2a3a6288286c3c29e5c9ac4df9c8.png)

然后我用子目录尝试了它，然后它为我创建了新站点，但主题根本不可见

> ![在此处输入图像描述](../Images/72ba9753d79c6e2e6f4abf9b8538cb3f.png)

# java - 传输侦听器和 ActiveMq 重新启动

> ID：14172547
> 
> 赞同：1
> 
> 时间：2013-01-05T14:09:50.317
> 
> 标签：java, jms, activemq, race-condition

我开发了 JMS 应用程序，现在我想添加支持代理重启的功能。我有动态主题，我应该在恢复连接后重新创建它们。此外，我应该有可能知道经纪人何时关闭以及何时回来。所以我尝试使用 ActiveMQ 故障转移协议来实现这个功能。我实现了 TransportListener 并在“transportInterrupted”方法中我称之为完全断开连接

```
 public void disconnect() throws JMSException {
    System.out.println("!!!!!!!DISCONNECTING!!!!!!!!");
    consumer.close();
    session.close();
    session = null;
    messageProducer.close();
    messageProducer = null;
    connection = null;
    connected = false;
    System.out.println("!!!!!!!DISCONNECTED!!!!!!!!");
} 
```

在此之后，我的应用程序挂起，就像竞争条件一样。如果我只关闭（）生产者并将连接设置为 null 一切正常，但如果我尝试关闭消费者，它仅适用于 N 个案例中的 1 个。我写了证明它的测试。我认为关闭消费者的问题，但我没有找到任何信息我做错了什么。

```
import javax.jms.Connection;
import javax.jms.JMSException;
import javax.jms.MessageConsumer;
import javax.jms.MessageProducer;
import javax.jms.Queue;
import javax.jms.Session;

import org.apache.activemq.ActiveMQConnection;
import org.apache.activemq.ActiveMQConnectionFactory;
public class FastFailProducer {
    volatile boolean connected = false;
    private ActiveMQConnectionFactory factory = new ActiveMQConnectionFactory("failover:(tcp://localhost:61616)?timeout=5000");;
    private static FailoverListener failoverListener;
    private Connection connection;
    private Session session;
    private Queue queue;
    private MessageProducer messageProducer;
    private MessageConsumer consumer;
    private String something;

public void init() throws JMSException {
    System.out.println("!!!!!!!CONNECTING!!!!!!!!");
    connection = factory.createConnection();
    session = connection.createSession(false, Session.AUTO_ACKNOWLEDGE);
    connection.start();
    ((ActiveMQConnection) connection).addTransportListener(failoverListener);
    queue = session.createQueue("TEST");
    messageProducer = session.createProducer(queue);
    consumer = session.createConsumer(queue);
    System.out.println("!!!!!!!CONNECTING COMPLETE!!!!!!!!");
    connected = true;
}

public void disconnect() throws JMSException {
    System.out.println("!!!!!!!DISCONNECTING!!!!!!!!");
    consumer.close();
    session.close();
    session = null;
    messageProducer.close();
    messageProducer = null;
    connection = null;
    connected = false;
    System.out.println("!!!!!!!DISCONNECTED!!!!!!!!");
}

public void run() throws Exception {
    // send messages
    for (int i = 0; i < 1000; i++) {
        if (connected) {
            if (session != null & messageProducer != null & queue != null) {
                // send a message
                messageProducer.send(session.createTextMessage(i + " message"));
                System.out.println("Sent message " + i);
            }
        } else {
            // execute your backup logic
            System.out.println("Message " + i + " not sent");

        }
        Thread.sleep(1000);
    }

    messageProducer.close();
    session.close();
    connection.close();
    System.exit(0);
}

public static void main(String[] args) throws Exception {
    FastFailProducer failoverProducer = new FastFailProducer();
    failoverProducer.something = "asdfasdf";
    failoverListener = new FailoverListener(failoverProducer);
    failoverProducer.init();
    failoverProducer.setConnected(true);
    failoverProducer.run();

}

public boolean isConnected() {
    return connected;
}

public void setConnected(boolean connected) {
    this.connected = connected;
}
} 
```

TransportListenerImpl 类

```
import java.io.IOException;

import javax.jms.JMSException;

import org.apache.activemq.transport.TransportListener;

public class FailoverListener implements TransportListener {
    private FastFailProducer failProducer;

public FailoverListener(FastFailProducer failProducer) {
    super();
    this.failProducer = failProducer;
}

@Override
public void onCommand(Object arg0) {
}

@Override
public void onException(IOException arg0) {

}

@Override
public void transportInterupted() {
    try {
        failProducer.disconnect();
    } catch (JMSException e) {
        e.printStackTrace();
    }
}

@Override
public void transportResumed() {
    System.out.println("!!!!!!!TRANSPORT RESUMED!!!!!!!!");
    if (!failProducer.isConnected()) {
        try {
            failProducer.init();
        } catch (JMSException e) {
            e.printStackTrace();
        }
    }
}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-05T17:53:04.177

我认为您错过了使用故障转移协议的意义。如果您使用故障转移，则无需关闭连接及其相关资源，因为故障转移传输将负责恢复客户端上的所有内容，就像代理发生故障之前一样。在事件方法中关闭连接肯定会锁定，因为您不应该做这样的事情。如果您想在代理消失时关闭所有内容，请不要使用故障转移，而改为侦听 JMS 异常侦听器事件挂钩。

# sql-server - SQL Server 的更改跟踪/更改数据捕获与没有主键的表？

> ID：14172551
> 
> 赞同：0
> 
> 时间：2013-01-05T14:10:01.207
> 
> 标签：sql-server, database, change-tracking, change-data-capture

我必须监视数据库中的一个表的更改并将它们复制到另一个数据库中的某个表。由于某种原因，我无法修改原始数据库的结构，因此无法使用触发器或创建约束等。更改跟踪似乎是我需要的理想解决方案，但有些表没有主键已定义，因此我无法使用它。至于变更数据捕获，这里 - [http://msdn.microsoft.com/en-us/library/bb522511.aspx](http://msdn.microsoft.com/en-us/library/bb522511.aspx)是这样写的：

.

“要启用网络跟踪，源表必须具有主键或唯一索引。”

所以基本上，似乎有类似的问题。

这种情况有什么解决方法吗？或者，也许我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T14:15:03.123

不。让他们有一个主键。反正它有一个。如果这不起作用 - 抱歉，如果没有主键，您对哪些表真正改变了零概念。不管是谁设置的都应该被鞭打，然后为他写一个“我需要一份工作”的小广告，因为他在麦当劳提供汉堡——他显然在数据库设计方面失败了。

您现在唯一的选择是对每次同步进行完整的数据比较。玩得开心。没有解决方法。这项技术需要定义一个主键，如果您不能使用触发器或其他任何东西，那么“选择”和代码端数据比较（这会很慢）是您唯一的选择。

# android - 来自 ListMenuAdapter 的 setTypeface 文本视图

> ID：14172554
> 
> 赞同：0
> 
> 时间：2013-01-05T14:10:07.863
> 
> 标签：android, fonts, android-listview

我有一堂课，`ListMenuAdapter`里面有：

```
ListMenuAdapter adapter = new ListMenuAdapter(this, R.layout.listmenu_item, listMenuData); 
```

问题是：**我无法从`R.layout.listmenu_item`. 我需要访问它，因为我想更改它的字体。**

这是完整的代码：

```
 @Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    ListMenu listMenuData[] = new ListMenu[]
    {
        new ListMenu(R.drawable.final_test, "Hello World ^_^", getHighScore(1)),
        new ListMenu(R.drawable.introduction, "Introduction", getHighScore(1)),
        new ListMenu(R.drawable.input_output, "Input - Output", getHighScore(2))
    };

    ListMenuAdapter adapter = new ListMenuAdapter(this, R.layout.listmenu_item, listMenuData);

    listMenu = (ListView)findViewById(R.id.listMenu);

    View header = (View)getLayoutInflater().inflate(R.layout.listmenu_header, null);
    //I TRIED THIS FOR ACCESSING THE TEXTVIEW, BUT NO LUCK
    View titles = (View)getLayoutInflater().inflate(R.layout.listmenu_item, null);

    Typeface customFont = Typeface.createFromAsset(this.getAssets(), "Androgyne_TB.otf");

    //WORKING
    txtHeader = (TextView)header.findViewById(R.id.txtHeader);
    //NOT WORKING
    txtTitle = (TextView) titles.findViewById(R.id.txtTitle);

    //WORKING    
    txtHeader.setTypeface(customFont);
    //NOT WORKING
    txtTitle.setTypeface(customFont);

    listMenu.addHeaderView(header);

    listMenu.setAdapter(adapter);
    listMenu.setOnItemClickListener(this);
} 
```

我试图夸大`R.layout.listmenu_item`访问 Textview ：

```
View titles = (View)getLayoutInflater().inflate(R.layout.listmenu_item, null); 
```

但它仍然无法正常工作（请参阅上面的完整代码）：D

**编辑：**

这个`ListMenuAdapter` `GetView`方法：

```
@Override
public View getView(int position, View convertView, ViewGroup parent) {
    // TODO Auto-generated method stub
    View row = convertView;
    MenuHolder holder = null;

    if(row == null)
    {
        LayoutInflater inflater = ((Activity)context).getLayoutInflater();
        row = inflater.inflate(layoutResourceId, parent, false);

        holder = new MenuHolder();
        holder.imgMenuIcon = (ImageView)row.findViewById(R.id.imgMenuIcon);
        holder.txtTitle = (TextView)row.findViewById(R.id.txtTitle);
        //holder.txtHighScore = (TextView)row.findViewById(R.id.txtHighScore);

        //holder.txtHighScore.setTextColor(Color.RED);
        holder.rtbHighScore = (RatingBar) row.findViewById(R.id.rtbHighScore);
        //holder.rtbHighScore.setNumStars(5);
        //holder.rtbHighScore.setEnabled(false);

        row.setTag(holder);
    }
    else holder = (MenuHolder)row.getTag();

    ListMenu menu = listmenu[position];
    holder.imgMenuIcon.setImageResource(menu.icon);
    holder.txtTitle.setText(menu.title);
    //holder.txtHighScore.setText("High Score : "  + menu.highscore);
    holder.rtbHighScore.setRating(menu.highscore/20);
    return row;
} 
```

感谢您的帮助：D

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T14:19:44.497

您可以在 Adapter 的 getView 方法中获取对 textview 的引用。

> holder.txtTitle = (TextView)row.findViewById(R.id.txtTitle);

在此之后，您可以设置字体

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-05T14:22:42.200

```
holder.txtTitle.setText(menu.title); 
```

在此之后在 getview 中尝试

```
holder.txtTitle.setTypeFace(face); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-05T14:24:21.487

作为我对您的问题留下的评论，您可以在`getView()`方法中为标题 textview 设置 typeFace，`holder.txtTitle.setText(menu.title);`如下所示：

要从资产中获取字体实例，您需要将 Context 参数传递给您的适配器 - 我认为您已经这样做了 - 然后使用该实例创建字体，就像您在您的`onCreate()`或检查下面的编辑中所做的那样：

**编辑**

`Typeface customFont = Typeface.createFromAsset(getContext().getAssets(),"Androgyne_TB.otf")`;

然后你可以设置 typeFace 如下：

`holder.txtTitle.setTypeFace(customFont);`

# actionscript-3 - 如何通过单击下一步按钮加载 swf 文件

> ID：14172555
> 
> 赞同：1
> 
> 时间：2013-01-05T14:10:08.217
> 
> 标签：actionscript-3, button, flash

我正在尝试使用 Adob​​e Flash CS5.5 开发课件。我的课件有几节课，每节课都是在单独的 flash ( `.swf`) 文件中开发的。我添加了**Next** & **Previous**按钮来加载下一课和上一课。但是，这个东西只有在我将**Publish Preview**设置为**HTML**时才有效。这是我使用的代码：

```
function gotoChap1(event:MouseEvent):void {
    navigateToURL(new URLRequest ("chap1.html"),("_self"));
}

chap1_btn.addEventListener(MouseEvent.CLICK , gotoChap1); 
```

**现在，当Publish Preview**设置为**Flash**时，如何通过单击 Next/Previous 按钮来加载 .swf（或其他课程）文件？我用谷歌搜索了它，但没有运气！谢谢你！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T18:45:37.910

您需要使用**Loader**而不是**navigateToURL**函数。您可以创建一个主电影来加载每个外部 swf，并在下载完成后添加到主阶段。

使用以下代码自动执行该过程：

```
import flash.display.Loader;
import flash.events.Event;
import flash.events.MouseEvent;

// Vars
var currentMovieIndex:uint = 0;
var currentMovie:Loader;
// Put your movies here
var swfList:Array = ["swf1.swf", "swf2.swf", "swf3.swf"];

// Add the event listener to the next and previous button
previousButton.addEventListener(MouseEvent.CLICK, loadPrevious);
nextButton.addEventListener(MouseEvent.CLICK, loadNext);

// Loads a swf at secified index
function loadMovieAtIndex (index:uint) {

    // Unloads the current movie if exist
    if (currentMovie) {
        removeChild(currentMovie);
        currentMovie.unloadAndStop();
    }

    // Updates the index
    currentMovieIndex = index;

    // Creates the new loader
    var loader:Loader = new Loader();
    // Loads the external swf file
    loader.load(new URLRequest(swfList[currentMovieIndex]));

    // Save he movie reference 
    currentMovie = loader;

    // Add on the stage
    addChild(currentMovie);
}

// Handles the previous button click
function loadPrevious (event:MouseEvent) {
    if (currentMovieIndex) { // Fix the limit
        currentMovieIndex--; // Decrement by 1
        loadMovieAtIndex(currentMovieIndex);
    }
}

// Handles the next button click
function loadNext (event:MouseEvent) {
    if (currentMovieIndex < swfList.length-1) { // Fix the limit
        currentMovieIndex++; // Increment by 1
        loadMovieAtIndex(currentMovieIndex);
    }
}

// Load the movie at index 0 by default
loadMovieAtIndex(currentMovieIndex); 
```

在此处下载演示文件：http: [//cl.ly/Lxj3](http://cl.ly/Lxj3)

# r - 如何将 na.rm 作为参数传递给 tapply？

> ID：14172556
> 
> 赞同：11
> 
> 时间：2013-01-05T14:10:11.860
> 
> 标签：r, tapply, na.rm

我想从一个数据框中计算平均值和标准差，其中一列用于参数，一列用于组标识符。使用时如何计算它们`tapply`？我可以使用`sd(v1, group, na.rm=TRUE)`，但在使用时无法将其`na.rm=TRUE`放入语句中`tapply`。 `omit.na`是没有选择的。我有一大堆参数，并且在排除所有具有一个缺失值的行时，必须逐步完成它们而不会丢失一半的数据帧。

```
data("weightgain", package = "HSAUR")
tapply(weightgain$weightgain, list(weightgain$source, weightgain$type), mean) 
```

声明也是如此`by`。

```
x<-c(1,2,3,4,5,6,7,8,9,NA)
y<-c(2,3,NA,3,4,NA,2,3,NA,2)
group<-rep((factor(LETTERS[1:2])),5)
df<-data.frame(x,y,group)
df

by(df$x,df$group,summary)
by(df$x,df$group,mean)

sd(df$x) #result: NA
sd(df$x, na.rm=TRUE) #result: 2.738613 
```

任何想法如何完成这项工作？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2014-10-30T03:30:47.543

只需`na.rm=TRUE`在`tapply`函数中设置：

```
tapply(weightgain$weightgain, list(weightgain$source, weightgain$type), mean, na.rm=TRUE) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-05T14:43:43.923

我认为这应该做你想要的。

1.  选择所需的列：

    ```
    v = c("x", "y")#or
    v = colnames(df)[1:2] 
    ```

2.  用于`sapply`迭代`v`并将值传递给`tapply`：

    ```
    sapply(v, function(i) tapply(df[[i]], df$group, sd, na.rm=TRUE)) 
    ```

# jquery - How can i code when SELECT html control has only one value

> ID：14172558
> 
> 赞同：0
> 
> 时间：2013-01-05T14:10:21.483
> 
> 标签：jquery, html

I am facing a scenario where select control is populating with values using php and I have coded against onChange when any value is changed then the changed value populate in the textbox.

BUT When select control has only one value then onchange does not work because there is only one value. How can I catch that value and populate in the textbox when the select control has only one value..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T14:11:40.970

you can get value of the only select element on jquery [**document.ready**](http://api.jquery.com/ready/) event by calling [val()](http://api.jquery.com/val/) function on select object.

**[Live Demo](http://jsfiddle.net/ftyeX/)**

```
$(document).ready(function() {
    var selectedVal = $('#yourSelectId').val();
}); 
```

# ios - 错误 fmdb 设置 label.text

> ID：14172559
> 
> 赞同：1
> 
> 时间：2013-01-05T14:10:31.330
> 
> 标签：ios, ios5, ios6, fmdb

我正在使用下面的代码创建一个表。我`[__NSCFNumber isEqualToString:]: unrecognized selector sent to instance`在
`label.text = rs[colNum++];`

我如何解决它？提前致谢。

```
NSInteger rowNum = 0;
NSArray *columnWidths = @[@(50), @(120), @(75), @(75)];
CGFloat rowHeight = 24.0;

FMResultSet *rs = [db executeQuery:sql];

while ([rs next])
{
    CGFloat x = 0.0;
    NSInteger colNum = 0;
    for (NSNumber *columnWidth in columnWidths)
    {
        UILabel *label = [[UILabel alloc] initWithFrame:CGRectMake(x,
                                                                    rowHeight * rowNum, 
                                                                    [columnWidth floatValue], 
                                                                    rowHeight)];
        label.textAlignment = NSTextAlignmentCenter;
        label.layer.borderColor = [UIColor blackColor].CGColor;
        label.layer.borderWidth = 1.0;
        label.text = rs[colNum++];
        [self.view addSubview:label];
        x += [columnWidth floatValue];
    }
    rowNum++;
}

[rs close]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T14:27:22.340

问题是结果集中的某些列不是文本值。我从你的[另一个问题](https://stackoverflow.com/questions/14132984/display-data-from-sqlite-to-label-using-fmdb/14133327#14133327)中回忆起这个问题，你的一个列是`rowid`，你有一些文本列，然后你有一些数字列。所以而不是：

```
label.text = rs[colNum++]; 
```

你可能应该有类似的东西：

```
id value = rs[colNum];
if ([[rs columnNameForIndex:colNum] isEqualToString:@"rowid"])
    label.text = [NSString stringWithFormat:@"%d", [value intValue]];
else if ([value isKindOfClass:[NSString class]])
    label.text = value;
else if ([value isKindOfClass:[NSNumber class]])
{
    NSNumberFormatter *formatter = [[NSNumberFormatter alloc] init];
    formatter.maximumFractionDigits = 2;
    formatter.numberStyle = NSNumberFormatterDecimalStyle;

    label.text = [formatter stringFromNumber:value]];
}
else
    label.text = [value description];
colNum++; 
```

显然，您的逻辑将根据您的结果集中是否有一`rowid`列，或者浮点数需要多少个小数位等而改变。这完全取决于您在`sql`语句中输入的内容，但希望这能给您一个想法你可能会做什么。

# google-sites - Google 协作平台 API：Java 的 OAuth2

> ID：14172560
> 
> 赞同：0
> 
> 时间：2013-01-05T14:10:46.600
> 
> 标签：google-sites

是否有任何 Java 示例代码允许 Google Sites API 使用 OAuth2 凭据？

我在 com.google.gdata.client.sites.SitesService (https://developers.google.com/gdata/javadoc/com/google/gdata/client/sites/SitesService) 上看不到任何 OAuth2 API。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T14:59:25.077

我现在知道为什么了。gdata-media-1.0.jar =.=' 缺少一个库

# java - Java中有没有办法将多个参数对传递给一个方法？

> ID：14172562
> 
> 赞同：3
> 
> 时间：2013-01-05T14:10:53.030
> 
> 标签：java, recordset

Java 很新

我希望能够以下列方式使用一种方法；

```
class PairedData {
    String label;
    Object val:
}

public void myMethod(String tablename, PairedData ... pD) {
    /* 
    insert a record into a table -tablename with the various fields being
    populated according to the information provided by the list of 
    PairedData objects
    */
}

myMethod("firststring",{"field1",Date1},{"field2",12},{"field3","aString"}); 
```

我意识到语法无效，但我希望它给出了我想做的事情的要点。

我想要做的是直接传递数据而不是填充类的实例然后传递它们。这可能吗，还是我只是想打破很多 OOP 规则？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T14:22:52.520

不，你想要做的事情真的是不可能的。在我看来，将你的类的实例传递给方法会好得多，而不是像那样做一些复杂的数组。另一个答案建议使用`Object[]`varargs 参数 - 这可能是最接近您在示例中显示的内容的方法。另一种选择（我认为更好的选择）是

```
public void myMethod(String tablename, String[] labels, Object[] vals) { 
```

您可以在这些数组中为每个`labels[i]`和`vals[i]`（配对）实例化您的类。换句话说，在你的方法中，你可以有类似的东西

```
pD = new PairedData[labels.length];

for (i = 0; i < labels.length; i++)
    pD[i] = new PairedData(labels[i], vals[i]);  // assuming you
                                                 // added this
                                                 // constructor 
```

然后将您包含的方法调用示例转换为

```
myMethod("firststring", new String[]{"field1", "field2", "field3"}, 
                                             new Object[]{date1, 12, "aString"}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-05T14:13:35.603

您可以通过使用 Object 数组来做到这一点：

```
public void myMethod(String tableName, Object[] ...pairs) 
```

并以这样的方式调用此方法：

```
myMethod("someTable", new Object[] {"field1", date1}, new Object[] {"field2", date2}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-05T14:13:50.790

通常...

您将创建一个包含所有参数变量的类。然后您将构建该类的实例并填充值。

然后你可以使用那个类实例来传递那些。

如果你想要一大堆......然后制作一个集合（Map，HashMap，List等）并传递它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-10-02T03:45:56.037

如果您问我，这似乎是未来语言扩展的好案例。但是通过稍微改变你调用方法的方式，我们应该能够接近......

```
myMethod("someTable", 
  new PairedData("field1", date1), 
  new PairedData("field2", date2)
); 
```

它更多的是类型工作，但它可能是最安全的，因为它是类型安全的并且不容易出现匹配对的错误。

您还需要为“PairedData(String label, Object val)”编写构造函数，我建议为`val`您计划存储的每种类型编写多个重载版本。

# matlab - MATLAB textscan 标题行

> ID：14172563
> 
> 赞同：2
> 
> 时间：2013-01-05T14:11:07.290
> 
> 标签：matlab, textscan

当我尝试使用`headerlines`with`textscan`跳过文本文件的第一行时，我的所有数据单元格都存储为空。

```
fid = fopen('RYGB.txt');
A = textscan(fid, '%s %s %s %f', 'HeaderLines', '1'); 
fclose(fid); 
```

这段代码给出

```
1x4 Cell
[] [] [] [] 
```

如果没有该`headerlines`部分并且没有需要在文本文件中跳过的第一行，则可以毫无问题地读入数据。它创建一个`1x4 cell`数据单元格，其中包含列中文本文件中的所有信息。

我该怎么做才能跳过文本文件的第一行并正常读取我的数据？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T14:52:07.827

我认为您的**问题**是**您**为`HeaderLines`. 该字符`'1'`被解释为其 ASCII 值 0x31（十进制 49），因此前 49 行被跳过。您的文件可能包含 49 行或更少，因此所有内容最终都会被丢弃。这就是为什么你得到空单元格的原因。

解决方案是替换`'1'`为`1`（*即*删除引号），如下所示：

```
A = textscan(fid, '%s %s %s %f', 'HeaderLines', 1); 
```

这应该可以解决问题。

# java - 已检查和未检查异常的实现

> ID：14172568
> 
> 赞同：1
> 
> 时间：2013-01-05T14:11:31.080
> 
> 标签：java, exception

这不是它们是什么的问题，而是它们如何在内部实现的问题。编译器如何区分已检查异常（例如直接从除 RuntimeException 之外的 Exception 派生）和未检查异常（例如从 RuntimeException 派生）。异常类定义中是否有一些特殊标志说明必须将哪些异常放入 try/catch 块中，或者 Java 编译器中是否有一些特定规则（例如 Java 语言设计明确指定检查或不检查的异常类型）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T14:19:00.427

这是由**Java 编译器强制执行的，并且在****运行时**也会进行双重检查：如果是`Throwable`extends`RuntimeException`或`Error`，则认为它是未检查的；检查所有其他人。

在运行时，也会强制执行此检查（请记住，理论上您可以在运行时“构建”Java 类）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T14:15:40.190

`RuntimeException`所有未经检查的异常都是类或类的继承者`Error`。所有其他都被检查。例如，使用反射，您始终可以检测到哪个类是当前异常的这个特定类的超类。这与 Java 编译器检测它们的类型的方式相同。

# php - 在 Objective C 和 PHP (hash_hmac) 中生成的 HMAC 的 SHA-1 哈希不匹配

> ID：14172573
> 
> 赞同：1
> 
> 时间：2013-01-05T14:11:54.257
> 
> 标签：php, objective-c, encoding, hmac, hmacsha1

我正在尝试从 Objective C(CCHmac) 和 PHP (hash_hmac) 实现 HMAC 身份验证。我得到了不同的哈希结果。有没有人可以帮助我？我不知道为什么要得到不同的哈希结果？以下是我的代码（Objective-c & PHP）供您参考。请！

PHP：

```
$APIConsumerSecret ="DcmzvkQC7Sno+lxnbDG0hTtZ0WTQn9T2T9DJxEmcB0";
$APIConsumerSecret = urlencode($APIConsumerSecret).'&';
$BaseString="GET&http%3A%2F%2Fboday.api.simppo.com%2Foauth%2Frequest_token&oauth_consumer_key%3DCN6W1I8E2CEWZJNQI2KA7KY3%26oauth_nonce%3DlxTSJL%26oauth_signature_method%3DHMAC-SHA1%26oauth_timestamp%3D1357268295%26oauth_version%3D1.0";

echo base64_encode(hash_hmac('sha1',$BaseString,$APIConsumerSecret,true)); 
```

PHP结果：`xJ5Ya4u4ghH4ugIieGIb9AcFpD0=`

Objective-C

```
- (NSString*)flickr_oauthSignatureFor:(NSString*)dataString withKey:(NSString*)secret
{
  NSData* secretData = [secret dataUsingEncoding:NSUTF8StringEncoding];
  NSData* stringData = [dataString dataUsingEncoding:NSUTF8StringEncoding];

  const void* keyBytes = [secretData bytes];
  const void* dataBytes = [stringData bytes];

  ///#define CC_SHA1_DIGEST_LENGTH   20          /* digest length in bytes */
  void* outs = malloc(CC_SHA1_DIGEST_LENGTH);

  CCHmac(kCCHmacAlgSHA1, keyBytes, [secretData length], dataBytes, [stringData length], outs);

  // Soluion 1
  NSData* signatureData = [NSData dataWithBytesNoCopy:outs length:CC_SHA1_DIGEST_LENGTH freeWhenDone:YES];

  NSLog(@"D1-0: signatureData %@", signatureData );
  NSLog(@"base64:%@", [signatureData base64EncodedString] );

  return [signatureData base64EncodedString];
} 
```

Objective-C 结果：

```
D1-0: <59052771 e670a04b 3a2e87db 3d7965be 1aed112e>
base64: WQUnceZwoEs6LofbPXllvhrtES4= 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-05T14:53:51.340

在示例中 php 是 URL 编码，而 ObjectiveC 不是。

最好从一个简单的例子开始，短字符串并跳过两者的base64编码，然后比较结果。当这个工作开始添加额外的操作，如 url 编码和 base 64。

对于 php，以： echo hash_hmac('sha1', 'test string', 'secret'); 开头 在 objc 中也是如此。

这是一个匹配php的起点：

```
NSString* phpsignatureData = @"dd26bfddf122c1055d4cd5b054227727e1e3eecf";
NSLog(@"phpsignatureData: %@", phpsignatureData);

NSData* secretData = [@"secret" dataUsingEncoding:NSUTF8StringEncoding];
NSData* stringData = [@"test string" dataUsingEncoding:NSUTF8StringEncoding];
NSMutableData *signatureData = [NSMutableData dataWithLength:CC_SHA1_DIGEST_LENGTH];
CCHmac(kCCHmacAlgSHA1, secretData.bytes, secretData.length, stringData.bytes, stringData.length, signatureData.mutableBytes);

NSLog(@"secretData %@", secretData );
NSLog(@"stringData %@", stringData );
NSLog(@"signatureData %@", signatureData ); 
```

NSLog 输出：

> ```
> phpsignatureData: dd26bfddf122c1055d4cd5b054227727e1e3eecf
> secretData <73656372 6574>   
> stringData <74657374 20737472 696e67>   
> signatureData <dd26bfdd f122c105 5d4cd5b0 54227727 e1e3eecf> 
> ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-13T11:39:44.377

你可以试试这个：（目标C）

```
-(NSString *)DATA_TO_HeX_With_HmacDigestData:(NSData *)digestData{
    const unsigned char *dataBuffer = (const unsigned char *)[digestData bytes];
    NSUInteger          dataLength  = [digestData length];
    NSMutableString     *hexString  = [NSMutableString stringWithCapacity:(dataLength * 2)];
    for (int i = 0; i < dataLength; ++i)
    {
        [hexString appendFormat:@"%02x", (unsigned int)dataBuffer[i]];
    }
    return [NSString stringWithString:hexString];
}

-(NSString *)HMAC_CREATOR:(NSString *)str andKeyData:(NSData *)keyData  {

    NSData *signatureData = [str dataUsingEncoding:NSUTF8StringEncoding];
    uint8_t digest[CC_SHA256_DIGEST_LENGTH]={0};
    CCHmacContext context;
    CCHmacInit(&context, kCCHmacAlgSHA256, keyData.bytes, keyData.length);
    CCHmacUpdate(&context, signatureData.bytes, signatureData.length);
    CCHmacFinal(&context, digest);
    NSData *digestData = [NSData dataWithBytes:digest length:sizeof(digest)];
    return [self DATA_TO_HeX_With_HmacDigestData:digestData];
} 
```

# powershell - 如何使用“匹配”cmdlet 在 PowerShell 中过滤字符串数组（或列表）？

> ID：14172574
> 
> 赞同：21
> 
> 时间：2013-01-05T14:11:57.930
> 
> 标签：powershell

我正在尝试过滤 CSV 文件。但是下面的脚本给出了一个错误。如何指定要在每个 String 对象上运行 match？

我尝试了各种组合，但没有结果。

```
$FileNames = [System.IO.Directory]::GetFiles("C:\Users\anagre\Desktop")

$FileNames = $FileNames | Where { -match "*.csv"} 
```

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-01-05T14:40:27.613

尝试这个：

```
$FileNames = Get-ChildItem -Path "C:\Users\anagre\Desktop" -Filter *.csv 
```

在上面的代码中，您没有在`where`子句中使用 $PSItem ($_)，如果要使用通配符，则必须使用`-like`运算符：

```
$FileNames|where{$_ -like "*.csv"} 
```

或者

```
$FileNames|where{$_ -match ".csv"} 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2013-01-05T18:41:27.903

-match 运算符既是比较运算符又是数组运算符，具体取决于其输入对象。

如果是标量，则返回布尔值。如果是数组，则返回数组中与模式匹配的所有元素

```
@($Filenames) -match '*.csv' 
```

使用数组语法确保在`Get-ChildItem`. `$True`否则，如果匹配，您将返回而不是文件名。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2019-10-14T10:47:02.807

我发现这样做的最简单（也是最整洁）的方法如下：

```
$filename.where{$_ -match '.csv'} 
```

或仅在哈希表的给定列内搜索

```
$filename.where{$_.location -match '.csv'} 
```

然后得到你需要的位

```
$filename.where{$_.location -match '.csv'} | select User,Filename,Filetype 
```

ETC

# python - 为什么 UnicodeEncodeError 只在 emacs 的 python shell 中引发？

> ID：14172576
> 
> 赞同：3
> 
> 时间：2013-01-05T14:12:05.293
> 
> 标签：python, emacs, unicode, ascii

在 emacs 中（使用`run-python`命令调用`python3`）：

```
>>> sys.version
sys.version
'3.2.3 (v3.2.3:3d0686d90f55, Apr 10 2012, 11:25:50) \n[GCC 4.2.1 (Apple Inc. build 5666) (dot 3)]'
>>> sys.getdefaultencoding()
sys.getdefaultencoding()
'utf-8'
>>> data
data
'sp\xe4m'
>>> print(data)
print(data)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
UnicodeEncodeError: 'ascii' codec can't encode character '\xe4' in position 2: ordinal not in range(128) 
```

在终端：

```
~$python3
Python 3.2.3 (v3.2.3:3d0686d90f55, Apr 10 2012, 11:25:50)
[GCC 4.2.1 (Apple Inc. build 5666) (dot 3)] on darwin
Type "help", "copyright", "credits" or "license" for more information.
>>> data='sp\xe4m'
>>> sys.getdefaultencoding()
'utf-8'
>>> data
'späm'
>>> print(data)
späm 
```

有没有人知道 Python 的 unicode 字符串在终端中有效但在 emacs 中无效的原因

（emacs的版本信息`GNU Emacs 24.2.1 (x86_64-apple-darwin, NS apple-appkit-1038.36) of 2012-08-27 on bob.porkrind.org`：）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-04-18T14:42:14.043

我相信这是相关的：[https ://emacs.stackexchange.com/a/9876/861](https://emacs.stackexchange.com/a/9876/861)

添加

```
(setenv "LANG" "en_US.UTF-8")
(setenv "LC_ALL" "en_US.UTF-8")
(setenv "LC_CTYPE" "en_US.UTF-8") 
```

你`.emacs`为我解决了这个问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-05T14:56:27.270

的价值`sys.getdefaultencoding()`与您正在执行的标准输出或外壳无关。默认编码只是用于编码 Unicode 字符串的内部编码。

但是，您要打印到的外壳不一定具有相同的编码。您可以从中获取标准输出的编码`sys.stdout.encoding`。不幸的是，Python 没有办法改变它，所以你必须自己弄清楚如何改变 shell 编码（在 Windows 控制台中，它是使用`chcp`example 完成的）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-02-07T13:31:47.947

这在我的机器上工作（Windows 7，Emacs 25.1）

在 init.el 中设置：

```
(setenv "PYTHONIOENCODING" "utf-8") 
```

(setenv "LANG" "en_US.UTF-8")

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-19T08:41:10.787

键入以下语句，然后 python 工作

```
export PYTHONIOENCODING='utf-8' 
```

# java - 如何设置鼠标监听器不能在另一个表中点击？

> ID：14172577
> 
> 赞同：0
> 
> 时间：2013-01-05T14:12:07.337
> 
> 标签：java, eclipse, swing, jtable, mouseevent

我有一张带播放列表的表。当我双击播放列表时，我会得到该播放列表的电影。

但是，当我双击电影时，我得到一个空表。因此，我不想在电影表中单击。如何防止这种行为？

那是我的听众：

```
playlistTable.addMouseListener(new MouseAdapter() {
    public void mouseClicked(MouseEvent e) {
        if (e.getClickCount() == 2) {

            JTable target = (JTable)e.getSource();
            int row = target.getSelectedRow();

            videoTableModel = new VideoTableModel(playlistService.getMoviesOfPlaylist(row));
            target.setModel(videoTableModel);

            movieTable.setEnabled(true);

            createPlaylist.setEnabled(false);
            setButtonIcon("icons\\playlist_grau.png", createPlaylist, "createPlaylist");

            removePlaylist.setEnabled(false);
            setButtonIcon("icons\\bin_grau.png", removePlaylist, "removePlaylist");

            playlistTable.setEnabled(false);

            revalidate();

        }
    }
}); 
```

我很感激你的回答。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T14:55:49.700

> 但是，当我双击电影时，我得到一个空表。

*   这无关`MouseListener`，必须禁用`TableCellEditor`

.

```
public boolean isCellEditable(int rowIndex, int columnIndex){
    return false; 
} 
```

.

*   必须测试`if return -1`（选择任何行）`int row = target.getSelectedRow();`

*   这个逻辑是不正确的，为什么你启用任何 on `mouse_double_click`， disable `ListSelectionMode`，

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-05T14:19:00.220

从表中删除鼠标侦听器，或设置一个标志，使侦听器不执行任何操作：

```
playlistTable.addMouseListener(new MouseAdapter() {
    private boolean ignoreDoubleClicks = false;

    public void mouseClicked(MouseEvent e) {
        if (e.getClickCount() == 2 && !ignoreDoubleClicks) {
            JTable target = (JTable)e.getSource();
            target.removeMouseListener(this); 
```

或者

```
playlistTable.addMouseListener(new MouseAdapter() {
    private boolean ignoreDoubleClicks = false;

    public void mouseClicked(MouseEvent e) {
        if (e.getClickCount() == 2 && !ignoreDoubleClicks) {
                ignoreDoubleClicks = true;
                ... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-05T14:19:31.060

您正在使用同一张表来表示两组数据

```
 JTable target = (JTable)e.getSource();
 ....
 target.setModel(videoTableModel); 
```

选项 1）当您更改为“视频模式”时删除侦听器

```
 target.removeMouseListener(this); 
```

选项 2) 添加一个变量并将其设置为 false 当您更改为“视频模式”时，如果变量为 false，则不执行任何操作。

选项 3）取决于您的代码的其余部分，检查当前模型的类（它假设您有一个不同的播放列表）

```
 if (!(target.getModel instanceof VideoTableModel)) {
    [Your code here]
  } 
```

在 1) 或 2) 中，您必须在切换回播放列表时重置监听器。

就个人而言，我会使用两个表并根据模式隐藏一个或另一个。

# ios - 处理模拟器和设备之间的小数分隔符更改

> ID：14172578
> 
> 赞同：1
> 
> 时间：2013-01-05T14:12:25.897
> 
> 标签：ios, number-formatting

我在我的应用程序中用双打做一些数学事情。这在模拟器上效果很好，它使用句点来制作小数。当我在我的 iPhone 上运行它时，我有一个逗号。当我使用逗号时，它不会做任何事情。

我该如何修改，以便将逗号视为句点或更改键盘（我使用的是小数点），以便在所有语言中输入句点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-05T14:49:07.070

正如@propstm 所说，不同的地区/语言环境使用不同的数字分隔符。 [NSScanner](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSScanner_Class/Reference/Reference.html)是用于将文本转换为数字类型的标准框架类，并考虑了用户当前区域设置的所有约定。您应该将它用于从文本输入到双精度的转换。

但是，仅用句点替换逗号是不够的，因为例如，在美国语言环境中，1,234.56 美元是一种货币的有效值。如果您只是用句点替换逗号，这将变得无效。

使用 NSScanner。这是它专门设计的。

**编辑**

您也可以考虑将 an`NSNumberFormatter`与您的`UITextField`. 它可以真正帮助验证用户输入，甚至在您使用`NSScanner`. [检查出来](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSNumberFormatter_Class/Reference/Reference.html)。

使用示例`NSNumberFormatter`：

将您的 viewController 设置为 UITextField 的委托，并添加此方法：

```
- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string
{
    NSString *proposedNewValue = [textField.text stringByReplacingCharactersInRange:range withString:string];
    NSNumberFormatter *numberFormatter = [[[NSNumberFormatter alloc] init] autorelease];
    [numberFormatter setNumberStyle: NSNumberFormatterDecimalStyle];
    return (nil != [numberFormatter numberFromString:resultString]);
} 
```

这将使该字段不会接受格式不正确的数字。您也可以使用此方法`NSNumber`从文本中获取。

要使用`NSScanner`您可以执行以下操作：

```
- (IBAction)doStuff:(id)sender
{
    NSString* entry = textField.text;
    double value = 0;

    if ([[NSScanner scannerWithString:entry] scanDouble: &value])
    {
        // If we get here, the scanning was successful
    }
    else
    {
        // Scanning failed -- couldn't parse the number... handle the error
    }
} 
```

HTH。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-05T14:24:11.973

根据语言设置，有时您会看到逗号有时是句点。

对于您的数学，请接受用户输入，然后对值进行验证，以确保它们为您的方程式使用正确的格式。可能保存逗号或句点的首选项，然后重新格式化输出，以便用户熟悉格式。

```
- (void)validateUserInputs{
    for(UIControl *control in self.view.subviews){
        if([control isMemberOfClass:[UITextField class]]){
            NSString *convertedText = [[(UITextField *)control text] stringByReplacingOccurrencesOfString:@"," withString:@"."];
            [(UITextField *)control setText:convertedText];
        }
    }

    for(UIControl *control in self.view.subviews){
        if([control isMemberOfClass:[UITextField class]]){
            NSLog(@"Converted String Value: %@", [(UITextField *)control text]);
        }
    }

} 
```

# javascript - jQuery UI Tooltip 和 AJAX，如何用它实现 live()？

> ID：14172580
> 
> 赞同：2
> 
> 时间：2013-01-05T14:12:45.310
> 
> 标签：javascript, jquery, jquery-ui, tooltip

在某些页面上，我有类似`$('.tooltip').tooltip();`. 示例元素如下所示：

`<a title="Tooltip content" class="tooltip" href="javascript:void(0);"><img src="icon.png" /></a>`

除非我想用 AJAX 重新加载这些元素，否则这很有效。然后，工具提示处理程序不会重新附加到新内容，并且工具提示不再起作用。

我试图做一个变通办法，以某种方式将工具提示重新附加到元素上，但没有特别成功。任何建议表示赞赏！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-05T14:19:06.163

您需要`$('.tooltip').tooltip();`在 AJAX 成功回调中重新初始化工具提示

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-06T18:13:47.893

您只能通过以下方式重新初始化新添加元素的工具提示：

```
$('.tooltip').not('.hasTooltip').tooltip().addClass('hasTooltip'); 
```

# ios - Cocos2D/iOS：“@class 组件”标签的使用

> ID：14172581
> 
> 赞同：0
> 
> 时间：2013-01-05T14:12:48.477
> 
> 标签：ios, cocos2d-iphone, components

我正在使用 Cocos2d 2.x 和 iOS 5.0。

谁能与我分享一个关于**“@class Component”标签用法的好教程或解释？**

是否有任何引用它的设计/模式，或者它是否对代码做了更具体的事情？

我在[谷歌搜索](https://www.google.it/search?q=@class%20Component;&ie=utf-8&oe=utf-8&aq=t&rls=org.mozilla%3ait%3aofficial&client=firefox-a#hl=en&client=firefox-a&hs=AoV&tbo=d&rls=org.mozilla%3ait%3aofficial&sclient=psy-ab&q=%22@class%20Component%22%20ios&oq=%22@class%20Component%22%20ios&gs_l=serp.3...30367.30367.2.30846.1.1.0.0.0.0.148.148.0j1.1.0.les;..0.0...1c.1.5sue5gIwstM&pbx=1&bav=on.2,or.r_gc.r_pw.r_qf.&bvm=bv.1355534169,d.bGE&fp=1585625df7f66034&bpcl=40096503&biw=1280&bih=587)上没有找到太多东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-05T14:34:39.147

`@class`只是告诉编译器后面的名字是一个Objective-C类的名字。当需要定义该类型的符号但导入整个定义会过度杀伤或导致实际问题时，它会在 .h 文件中使用。（例如，两个类相互引用。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-05T15:38:12.240

它的工作方式是，通常如果您在接口中引用一个类，您必须 #import 该类的头文件：

```
#import "OtherClass.h"

@interface MyClass : NSObject
{
   OtherClass* someOtherClass;
}
@end 
```

@class 语句允许您跳过导入标头：

```
@class OtherClass;

@interface MyClass : NSObject
{
   OtherClass* someOtherClass;
}
@end 
```

如果你使用@class，你仍然必须在实现文件中#import "OtherClass.h"。

```
// Still need to import, but now any class importing MyClass.h 
// does not automatically know about OtherClass as well.

#import "OtherClass.h"

@implementation MyClass
…
@end 
```

当您在第三类的其他位置#import "MyClass.h" 时，如果您使用了@class OtherClass，则该第三类不会自动包含OtherClass 类的标题；在 MyClass 标题中。因此，除非明确导入 OtherClass.h 标头，否则第三类不知道 OtherClass。这在编写一个应该对开发人员隐藏其实现细节（即OtherClass）的公共API 时很有帮助。

前向声明被认为是一种很好的做法（如果只是因为它除了稍微改变了工作流程之外没有其他缺点）并且比在另一个头文件中导入类的头文件更可取。这无疑有助于防止 Phillip 提到的循环进口。

我不了解 Xcode，但在 Visual Studio (C++) 中，类转发也有助于加快具有数百个类的大型项目的编译速度。那是因为 VS C++ 编译器花费了相当长的时间来解决头文件依赖

# javascript - 如何将 JS 渲染成 JS 生成的内容？

> ID：14172585
> 
> 赞同：0
> 
> 时间：2013-01-05T14:13:04.813
> 
> 标签：javascript, jquery, jquery-ui

> **可能重复：**
> [执行插入 .innerHTML 的 <script> 元素](https://stackoverflow.com/questions/2592092/executing-script-elements-inserted-with-innerhtml)

我有一个问题，当使用 Java 脚本生成内容时，嵌入式脚本不起作用。如何正确编码？

这是一个工作示例：类 datepicker 对静态 html 代码正常工作，但不适用于在运行时使用添加新行按钮添加的那些行。请注意，重新加载页面对我来说不是一个选项，因为真正的问题更复杂。

谢谢你的帮助。

```
<!doctype html>

<html lang="en">
<head>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="http://code.jquery.com/ui/1.9.2/themes/base/jquery-ui.css" />
    <script src="http://code.jquery.com/jquery-1.8.3.js"></script>
    <script src="http://code.jquery.com/ui/1.9.2/jquery-ui.js"></script>
    <link rel="stylesheet" href="/resources/demos/style.css" />
    <script>
    $(function() {
        $( ".datepicker" ).datepicker({
        yearRange: "-100:+0",
            changeMonth: true,
            changeYear: true,
            dateFormat: 'yy-mm-dd'
        });
    });
    </script>
</head>
<body>

<p>How many children do you have? What is their names and age?</p>
 <input type="text" id="qchildren" />
 <div id="qchildren-answer-wrapper"></div>

<button type="button" onclick="addNew()">Add new entry</button>
<button type="button" onclick="save()">Save</button>

 <br/>This is a correct date picker:
 <input type="text" class="datepicker" id="dp1" />

<script>
var lines=0;
function addNew()
{
lines++;
var newElement = document.createElement("span");
  newElement.innerHTML =  'Name:<input type="text" id="qchildrenname'+window.lines+'" /> Birth date:<input type="text" class="datepicker" id="qchildrenage'+window.lines+'" /><br/>';
document.getElementById("qchildren-answer-wrapper").appendChild(newElement);
}

function save()
{
var answer='';
for (var ii=1;ii<=window.lines;ii++)
{
if (document.getElementById('qchildrenname'+ii.toString()).value.toString()!=''){
answer+=document.getElementById('qchildrenname'+ii.toString()).value.toString()+','+document.getElementById('qchildrenage'+ii.toString()).value.toString()+';';
}
}
document.getElementById("qchildren").value=answer;
}
</script>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T15:00:02.893

第一个将 datepicker 与您的 html 输入相关联的抽象函数：

```
<script>
function attachDatePickerById(id) {
    $( "#" + id ).datepicker({
    yearRange: "-100:+0",
        changeMonth: true,
        changeYear: true,
        dateFormat: 'yy-mm-dd'
    });
}

// Attaching your initial datepicker with id "dp1"
$(attachDatePickerById("dp1"));
</script> 
```

然后在附加后为每个新的日期选择器调用此函数：

```
function addNew()
{
    lines++;
    var newElement = document.createElement("span");
    newElement.innerHTML =  'Name:<input type="text" id="qchildrenname'+window.lines+'" /> Birth date:<input type="text" class="datepicker" id="qchildrenage'+window.lines+'" /><br/>';
    document.getElementById("qchildren-answer-wrapper").appendChild(newElement);

    // Tie jquery datepicker control to new added html INPUT
    attachDatePickerById("qchildrenage" + window.lines);
} 
```

# ajax - cgridview ajax 分页和用于复选框的 javascript

> ID：14172587
> 
> 赞同：0
> 
> 时间：2013-01-05T14:13:08.867
> 
> 标签：ajax, yii

我有一个 CSS 文件和两个用于复选框外观的 javacript 文件（在 CGridView 中），当我在 cgridview 上使用 ajax 分页更改页面时，我得到了复选框的默认外观。我如何通过这些东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T18:00:50.333

尝试在[afterAjaxUpdate](http://www.yiiframework.com/doc/api/1.1/CGridView#afterAjaxUpdate-detail)上重新运行您的复选框 javascript 代码。

# spring - 从 Spring 连接 LDAP

> ID：14172588
> 
> 赞同：0
> 
> 时间：2013-01-05T14:13:16.027
> 
> 标签：spring, ldap, jndi

我必须实现一个基于 Spring 的 Web 应用程序，允许用户管理 LDAP 数据。到 LDAP 的连接只能通过 JNDI 框架完成（不允许 SpringLDAP）。

为此，我实现了一个实用程序类来执行基本操作（添加、更新、删除、列表……）。

这是该类的一小段代码：

```
public class LdapUtility {

    private static LdapUtility instance;

    private DirContext dirContext;

    public static LdapUtility getInstance() {

        if(LdapUtility.instance == null)
            LdapUtility.instance = new LdapUtility();

        return LdapUtility.instance;
    }

    /**
     * Connect to the LDAP
     */
    private LdapUtility() {

        Hashtable env = new Hashtable();
        env.put(Context.INITIAL_CONTEXT_FACTORY,"com.sun.jndi.ldap.LdapCtxFactory");
        env.put(Context.PROVIDER_URL, "ldap://localhost:389");
        env.put(Context.SECURITY_AUTHENTICATION, "simple");
        env.put(Context.SECURITY_PRINCIPAL, "cn=Manager,dc=my-domain,dc=com");
        env.put(Context.SECURITY_CREDENTIALS, "secret");

        try {
            dirContext = new InitialDirContext(env);
        }
        catch(Exception ex) {
            dirContext = null;
        }
    }

    public void addUser(User u) {

           dirContext.createSubcontext(....); //add user in the LDAP
    }
} 
```

使用此代码，我可以通过调用来访问我的所有方法`LdapUtility.getInstance()...`，但与 LDAP 的连接永远不会被释放。

另一种方法是在每次操作之前连接到 LDAP，但在这种情况下，与 LDAP 的连接会太多......

所以，这是我的问题：访问这些方法的最优雅/最智能的方式是什么？

先感谢您 ：-）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T10:38:17.470

没有弹簧（被禁止），我会很快实现类似的东西：

*   （懒惰的时候）创建一个简单的回调接口（比如你可以在 spring 中找到——JpaCallback.execute(EntityManager em)）——但是对于 LDAP——MyLdapCallback.execute(LdapConnection connection)——你可以想象 LdapConnection您需要的任何东西——来自 OpenLdap 或 SDK 上下文的对象。类似的东西（仅用于演示）：

```
...
interface LdapCallback<T> {
    T execute(DirContext ctx) throws NamingException, IOException;
}
...
private <T> T execute(LdapCallback<T> callback) throws NamingException, IOException {
    T result = null;
    LdapContext ctx = new InitialLdapContext();
    try {
        result = callback.execute(ctx);
    } finally {
        if (tls != null) {
            tls.close();
        }
        ctx.close();
    }
    return result;
}
... 
```

完成后，您将为每个 Ldap 调用创建匿名类，并通过 execute(callback) 调用回调。

*   （有更多时间）实现广告 1\. + 创建 AOP，它将用注释包装我的方法，其本身将在上面的包装器中执行我的方法（在我的代码中没有明确地这样做）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-05T17:02:29.687

由于您已经在使用 Spring，我建议您使用[Spring LDAP](http://www.springsource.org/ldap)：

> Spring LDAP 是一个 Java 库，用于简化 LDAP 操作，基于 Spring 的 JdbcTemplate 模式。该框架减轻了用户的日常琐事，例如查找和关闭上下文、循环结果、编码/解码值和过滤器等等。

尤其是如果您不熟悉 LDAP 和潜在的性能问题，那么开始使用这样的实用程序库会有所帮助，它将为您完成所有繁重的工作。

您在 spring config 中配置 LDAP 连接设置：

```
<bean id="contextSource" class="org.springframework.ldap.core.support.LdapContextSource">
  <property name="url" value="ldap://localhost:389" />
  <property name="base" value="dc=example,dc=com" />
  <property name="userDn" value="cn=Manager" />
  <property name="password" value="secret" />
</bean>

<bean id="ldapTemplate" class="org.springframework.ldap.core.LdapTemplate">
  <constructor-arg ref="contextSource" />
</bean> 
```

然后，您可以`LdapTemplate`在需要执行 LDAP 操作的任何地方使用：

```
return ldapTemplate.search(
     "", "(objectclass=person)",
     new AttributesMapper() {
        public Object mapFromAttributes(Attributes attrs)
           throws NamingException {
           return attrs.get("cn").get();
        }
     }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-05T21:43:10.360

不知道确切的要求，我将核心问题解释为“何时打开/关闭连接”。

我的水晶球告诉我你可能想要使用连接池。诚然，您不会明确关闭连接，因为这是由池处理的，但这对于您的分配可能没问题。这很容易：

```
// Enable connection pooling
env.put("com.sun.jndi.ldap.connect.pool", "true"); 
```

[Oracle 的基本 LDAP 教程](http://docs.oracle.com/javase/jndi/tutorial/ldap/connect/pool.html)中引用了[完整的源代码](http://docs.oracle.com/javase/jndi/tutorial/ldap/connect/src/UsePool.java)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-05T15:16:55.413

有几种方法可以连接到 ldap。使用 javax.naming.* 就是其中之一。在 javadoc 中，您可能会发现，您的 SPI 提供程序中的类管理它们自己的连接，所以您不需要关心它——这可能是您问题的答案——请参阅 JDK 文档以及 Context 如何管理连接和网络[——http ://docs.oracle.com/javase/6/docs/api/javax/naming/ldap/LdapContext.html](http://docs.oracle.com/javase/6/docs/api/javax/naming/ldap/LdapContext.html)。

如果您习惯于更多类似 JDBC 的访问，您可能会发现[http://www.openldap.org/jldap/](http://www.openldap.org/jldap/)更符合您的喜好。在那里，您可以完全控制连接，并以与 JDBC 中相同的方式对待它们。你可以使用任何你喜欢的池化库。

# jquery - 打开页面时打开弹出框

> ID：14172589
> 
> 赞同：1
> 
> 时间：2013-01-05T14:13:32.727
> 
> 标签：jquery, ajax

我有这样的代码bu ajax：

```
 $("document").ready(function (){ 

$(".open_popup").colorbox({width:"580px", inline:true, href:"#subscribe_popup"});

     }); 
```

这是弹出框，我需要在打开页面时打开此弹出窗口，要打开此弹出窗口，我使用此代码

```
<a href="#" class="open_popup">Click here to open the popup</a> 
```

如何在 body 上打开弹出式 onload 标签。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-05T14:41:24.800

一种方法是简单地触发链接上的点击事件。

```
$(window).load(function(){
    $(".open_popup").trigger("click");
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-05T14:46:55.747

如果您尝试加载内联内容 ( `#subscribe_popup`)，您应该使用`html`属性，而不是`href`.

来自[Colorbox 文档](http://www.jacklmoore.com/colorbox)：

```
$.colorbox({html:$('#subscribe_popup')}) 
```

正如另一个答案所暗示的，在里面使用它`$(window).load()`

```
$(window).load(function(){
    $.colorbox({html:$('#subscribe_popup')})
}); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-05T14:58:08.757

尝试：

```
function pop()
{
    $("document").ready(function (){ 

       // load the overlay

        if (document.cookie.indexOf('visited=true') == -1) {
            var fifteenDays = 0;
            var expires = new Date((new Date()).valueOf() + fifteenDays);
            document.cookie = "visited=true;expires=" + expires.toUTCString();
            $.colorbox({width:"580px", inline:true, href:"#subscribe_popup"});
        }

        $(".open_popup").colorbox({width:"580px", inline:true, href:"#subscribe_popup"});

 });
} 
```

在身体标签上：

```
<body onload="javascript: pop()"> 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2016-08-10T07:24:57.460

```
 <!--Jquery bootstrap Library-->
    <!--bootstrap  css file-->
     <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap-theme.min.css">

        <!--Window Control Code (You Are Perform)-->
        <script>
            $(window).load(function()
            {
                $('#myModal').modal('show');
            });
        </script>
        <!--Window Control Code (You Are Perform)-->
        <!--Pop Style CSS-->
        <style>
        .popupp h4{ 
        font-size:1.6em; 
        color:#0084C4; 
        font-family:"Times New Roman", Times, serif; 
        font-weight:bold; 
        padding:0em 0em 0.5em 0em; 
        text-align:center; 
        margin:0px;
        }
        .popupp h4 span{ 
        font-size:1.2em !important;
        }
        .queryform input[type=text],textarea,input[type=email],input[type=number]{border: 1px solid #CEC7C7; margin-bottom:1em; outline-color: #FF5B36; width:100%; font-size: 0.9em; padding:1em; -webkit-appearance: none; color: #B1B1B1;}
        .queryform input[type=submit]{border: 1px solid #CEC7C7; margin-bottom:1em; outline-color: #FF5B36; width:100%; font-size:1em; background:#000; padding:1em; -webkit-appearance: none; color: #fff;}
            .queryform textarea{ height:100px;}
            .queryform 
            { 
                padding: 0.5em 5em;
            }

            .close {
            font-size:4em;
            }
            .modal-header .close {
                margin-top: -31px;
            }
        </style>
        <!--Pop Style CSS-->
        <!--Define Pop Up-->
          <!-- Modal -->
          <div class="modal fade" id="myModal" role="dialog">
            <div class="modal-dialog">    
              <!-- Define Pop Up content-->
              <div class="modal-content">
                <div class="modal-header popupp">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                  <h4 class="modal-title"><span> Need Instant Services </span> ??? </h4>
                  <div class="queryform">
                    <form method="post" action="contact-post.php">
                        <input type="text" name="name" placeholder="Enter Your Name" required> 
                        <br />                  
                        <input type="number" name="mobile" oninput="javascript: if (this.value.length > this.maxLength) this.value = this.value.slice(0, this.maxLength);" maxlength = "10" minlength = "10" placeholder="Enter Your Mobile Number" required>
                        <br />                  
                        <input type="email" name="email" placeholder="Enter Your Email Address" required>
                        <br />
                        <textarea name="msg" placeholder="Enter Your Requirment" required></textarea>
                        <br />      
                        <p align="center"><input type="submit" value="Enquiry" name="enquiry_home"></p>
                    </form>
                  </div>
                </div>
                <div class="modal-footer">
                  <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                </div>
              </div>      
            </div>
          </div> 
```

# winapi - RECTL 和 RECT 有什么区别？

> ID：14172602
> 
> 赞同：6
> 
> 时间：2013-01-05T14:15:18.567
> 
> 标签：winapi

根据 MSDN，RECT 和 RECTL 是相同的结构。它们之间有什么区别吗？如果没有的话，同时拥有它们而不是只有一个有什么意义？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-05T15:42:28.783

正如 MSDN 文章中所述，它们之间没有区别。要了解它们为何同时存在，您必须回顾历史，回到 Windows 版本 3 及更早版本。那些是*16 位*版本的 Windows，与现在每个人都使用的 Windows 版本不同。Windows 3.1 的 Windows SDK 版本在 windows.h 中声明了这样的 RECT 结构：

```
typedef struct tagRECT
{
    int left;
    int top;
    int right;
    int bottom;
} RECT; 
```

并且 ole2.h 头文件声明 RECTL 使用**long**作为结构元素。当时的16 位 C 和 C++ 编译器将*int*实现为 16 位类型，适合 16 位处理器的字长，并将*long*实现为 32 位类型。

现代 Windows 版本中使用的 32 位编译器使*int*成为 32 位类型，适合 32 位处理器的字长。并保持*长*为 32 位类型。这使得两种结构类型之间的差异消失了。

# java - 在 Linux 上交付 Java 软件的最佳方式是什么？

> ID：14172605
> 
> 赞同：5
> 
> 时间：2013-01-05T14:15:33.597
> 
> 标签：java, linux

我有一个跨平台的 Java 项目。对于 Windows 和 Mac OS XI，通过 ANT 任务提供由“launch4j”和“jarbundler”生成的 .EXE 或 .APP 文件。

现在我也在寻找一种方法将这个软件也交付给 Linux 用户。目前，我只有一个可运行的 JAR。

有没有比提供打包为 .tar.gz 的可运行 JAR 更好的方法？可能是可执行文件显示程序图标的简单方法（可运行的 JAR 不能）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T15:37:55.013

只需创建一个菜单快捷方式，虽然 .desktop 文件类似于：

```
[Desktop Entry]
Categories=Games
Exec=java -jar YOURJARFILE.jar
Icon=YOURICON.png
Name=Application Name
Type=Application 
```

[（ http://www.freedesktop.org/wiki/Specifications/desktop-entry-spec](http://www.freedesktop.org/wiki/Specifications/desktop-entry-spec)上的完整规格）

然后使用以下命令安装它：

xdg-desktop-menu 安装 YOURAPP.desktop

# dart - Dart pub 未下载依赖项

> ID：14172609
> 
> 赞同：2
> 
> 时间：2013-01-05T14:15:54.490
> 
> 标签：dart

我已将我的 Dart 项目移动到另一个文件夹，具有相同的文件夹结构，但是，现在，我收到以下消息：

```
Running pub install ...
Pub install failed, [1] Resolving dependencies...
Could not find package "dartflash 0.6.3" at http://pub.dartlang.org. 
```

这是我的 pubspec.yaml：

```
name:  Chronium
description:  A framework for doing Chrono like games.

dependencies:
  dartflash: 0.6.3 
```

和 pubspec.lock：

```
{"packages":{"dartflash":{"version":"0.6.3","source":"hosted","description":"dartflash"}}} 
```

和文件结构：

![文件结构](../Images/9327a8c23fadf59519169833629d3e0d.png)

该网站 ( [http://pub.dartlang.org/](http://pub.dartlang.org/) ) 可从浏览器访问。我在飞镖（飞镖编辑器版本 0.2.9_r16323）。有人知道发生了什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-05T17:13:38.167

根据[Seth Ladd 的帖子](https://plus.google.com/118397406534237711570/posts/E5mPPJAW8qh)，现在应该解决这个问题：

> 如果您在使用 pub.dartlang.org 时遇到问题，我们很高兴地报告我们已经解决了这个问题。许多人为临时停机表示歉意。看起来这是服务器指向错误数据存储的问题。感谢所有的报告，酒吧又开张了！

# rdf - 如何为 OWL DataProperties 定义我自己的范围

> ID：14172610
> 
> 赞同：5
> 
> 时间：2013-01-05T14:15:54.173
> 
> 标签：rdf, owl, rdfs

我最近开始学习 Web Ontology Language (OWL)。我想用我自己定义的值范围定义一个 DataProperty。考虑以下属性：

```
 <owl:DatatypeProperty rdf:ID="myProperty">
     <rdfs:domain rdf:resource="#MyDomain"/>
     <rdfs:range rdf:resource="http://www.w3.org/2001/XMLSchema#double"/>
  </owl:DatatypeProperty> 
```

该属性具有双精度值范围，但我想限制该范围，以使我的属性仅接受 0 和 1 之间的双精度值。如果您指导我如何定义我自己的数据属性范围，我将不胜感激。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-05T16:19:58.533

在这里（为了简洁，使用 Turtle 而不是 RDF/XML）：

```
:myProperty  a  owl:DatatypeProperty;
    rdfs:domain  :MyDomain;
    rdfs:range  [
        a  rdfs:Datatype;
        owl:onDatatype  xsd:double;
        owl:withRestrictions ( [xsd:minInclusive 0] [xsd:maxInclusive 1] )
    ] . 
```

我建议您使用`xsd:decimal`而不是`xsd:double`, 因为`xsd:double`精度有限并且与 不相交`xsd:decimal`，这也使其与`xsd:integer`,`xsd:int`等不相交。

**更新：**在 RDF/XML 中，它对应于（看看它与 Turtle 相比有多混乱）：

```
<owl:DatatypeProperty rdf:about="#myProperty">
    <rdfs:domain rdf:resource="#MyDomain"/>
    <rdfs:range>
        <rdfs:Datatype>
            <owl:onDatatype rdf:resource="&xsd;double"/>
            <owl:withRestrictions rdf:parseType="Collection">
                <rdf:Description>
                    <xsd:minInclusive rdf:datatype="&xsd;double">0</xsd:minInclusive>
                </rdf:Description>
                <rdf:Description>
                    <xsd:maxInclusive rdf:datatype="&xsd;double">1</xsd:maxInclusive>
                <rdf:Description>
                </rdf:Description>
            </owl:withRestrictions>
        </rdfs:Datatype>
    </rdfs:range>
</owl:DatatypeProperty> 
```

但如果你是直接用文本编辑器编写 RDF，你真的应该学会使用[Turtle](http://www.w3.org/TR/turtle/)。它比 RDF/XML 更简单、更简洁。你真的可以看到三重奏。它很快就会成为一个标准，转向 W3C 候选推荐标准迫在眉睫。

**2017 年 10 月 3 日更新：[Turtle 于 2014 年 2 月标准化](https://www.w3.org/TR/2014/REC-turtle-20140225/)。如果您更喜欢基于 JSON 的 RDF 表示法，还有另一个 W3C 标准[JSON-LD 。](https://www.w3.org/TR/json-ld/)

# javascript - 禁用轮播鼠标悬停显示标题

> ID：14172612
> 
> 赞同：1
> 
> 时间：2013-01-05T14:16:10.130
> 
> 标签：javascript, mouse, image, title, carousel

我有一个带椭圆的旋转木马。Img 处于自动旋转状态，如果您想从后到前显示 img，我使用鼠标悬停单击。当 img 为 bringToFront 并且鼠标悬停时，轮播显示标题

问题是我想禁用悬停效果，所以它只显示来自 img bringToFront 的标题。

我找到了一个可能的解决方案，但它仍然不是我想要的。

我添加了以下代码：

```
$(document).ready(function(){

   $("img").hover(function(){

      $(this).attr("rel", $(this).attr("title"));
      $(this).removeAttr("title");

   }, function(){

      $(this).attr("title", $(this).attr("rel"));
      $(this).removeAttr("rel");

   });

}); 
```

当鼠标在轮播上时，此代码禁用“标题”，但问题是它也禁用了前面的“标题”，除非鼠标离开轮播，否则它不会出现。

这段代码对我来说很好，但即使鼠标在轮播上，我也想保留前面的标题。

所以我认为最简单的解决方案是禁用所有鼠标效果并只保留鼠标悬停点击，但我不知道如何，这就是我寻求帮助的原因。

# regex - 如何在文件的*不同*部分中查找具有 str1 和 str2 的文件的名称

> ID：14172615
> 
> 赞同：1
> 
> 时间：2013-01-05T14:16:28.537
> 
> 标签：regex, grep

我正在尝试找到一种方法来确定可能在文件的不同部分中具有 str1 和 str2 的文件的名称。grep str1 | grep str2 将不起作用，因为 grep str2 将在包含 str1 的行上运行。我可以得到一个包含 str1 的文件列表和一个包含 str2 的文件列表，然后寻找交集，但这效率低下。一种更有效的方法是让 grep str1 输出文件列表，然后让 grep str2 对其进行操作，但这意味着 grep 将一遍又一遍地打开、读取和关闭同一个文件。也许最理想的方法是打开一个文件，grep for str1 和 str2，然后确定该文件是否同时包含 str1 和 str2，但我无法创建这样的命令。我想它应该看起来类似于这个 find 。-name "*" -exec grep "str1" && grep "

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T17:01:18.207

使用 GNU awk (gawk)：

```
awk -v RS='\0' -v str1="$str1" -v str2="$str2" '
   index($0,str1) && index($0,str2) { print FILENAME; nextfile }
' file1 file2 filen 
```

使用任何 awk：

```
awk -v str1="$str1" -v str2="$str2" '
   FNR == 1             { found[1] = found[2] = 0 }
   index($0,str1)       { found[1]++ }
   index($0,str2)       { found[2]++ }
   found[1] && found[2] { files[FILENAME] }
   END { for (file in files) print file }
' file1 file2 filen 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T15:35:31.057

我认为 awk 更适合这项任务。这是您可以做到的一种方法：

```
awk -v str1="$str1" -v str2="$str2" '
  FNR == 1 { m1 = m2 = 0 }
  index($0, str1) { m1 = 1 }
  index($0, str2) { m2 = 1 }
  m1 && m2 { print FILENAME; nextfile }' file1 file2 filen 
```

这假定`$str1`并`$str2`设置为您要搜索的字符串。该解决方案一次性完成匹配，并在找到两个字符串后立即退出。

稍微优化的版本：

```
awk -v str1="$str1" -v str2="$str2" '
  FNR == 1 { m1 = m2 = 0 }
  !m1 && index($0, str1) { m1 = 1 }
  !m2 && index($0, str2) { m2 = 1 }
  m1 && m2 { print FILENAME; nextfile }' file1 file2 filen 
```

### 更新：

*添加了Ed Morton*在下面的评论中提到的错误修复和优化。另请注意，旧版本的 awk 中的语句可能存在一些可移植性问题，请参阅[GNU awk 附录 B](http://www.gnu.org/software/gawk/manual/gawk.html#Other-Versions)`nextfile`中有关该主题的讨论。该声明已被[接受以包含](http://austingroupbugs.net/view.php?id=607)在 POSIX 标准中，因此将来应该会更广泛地使用。`nextfile`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-05T14:20:48.423

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-05T14:23:35.447

尝试使用 regexp 之类的`(str1.*str2|str2.*str1)`。我不确定，可能你需要使用`egrep`而不是`grep`

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2013-01-05T14:21:45.230

If str1 occurs before str2 then you can use

```
find . -name "str1*str2" 
```

# c# - 使用点击事件打印二维数组的索引

> ID：14172617
> 
> 赞同：0
> 
> 时间：2013-01-05T14:16:42.987
> 
> 标签：c#, visual-studio-2010, multidimensional-array

下面的代码在单击按钮时显示每个按钮的索引，这些按钮位于数组中，但所有这些都是在表单加载中完成的。但我想在点击事件中做同样的事情，而不是在表单加载中我将如何继续这样做：

图片：![在此处输入图像描述](../Images/065653965ce403bc9339e6d5a42b47ad.png)

代码：

```
namespace _2DArray
{
    public partial class Form1 : Form
    {
        private Button[,] b;
        public Form1()
        {
            InitializeComponent();
            b = new Button[2, 2];
            b = new Button[,] { {button1,button2 }, 
                                {button3, button4}};
        }
        public int x = 0;
        public int y = 0;
        private void Form1_Load(object sender, EventArgs e)
        {
            foreach (Button bt in b)
            {
                bt.Click += new System.EventHandler(this.ClickedButton);
            }

            for (int i = 0; i < 2; i++)
            {
                for (int j = 0; j < 2; j++)
                {
                    b[i, j].Click += new System.EventHandler(this.ClickedButton);
                    b[i, j].Name = "X: " + i + " " + "Y: " + j;

                }
            }

        }
        private void ClickedButton(object sender, EventArgs e)
        {
            Button s = (Button)sender;
            MessageBox.Show("you have clicked button: " + s.Name);

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T14:44:21.727

是这样回答的：

```
 private void ClickedButton(object sender, EventArgs e)
        {
            Button s = (Button)sender;
            int x = int.Parse(s.Name.Split()[1]);
            int y = int.Parse(s.Name.Split()[3]);

            MessageBox.Show("you have clicked button: " + x +" "+ y);
        } 
```

# java - 如何在 jtextfield 中将 3 个结果集值连接在一起？

> ID：14172619
> 
> 赞同：1
> 
> 时间：2013-01-05T14:17:09.733
> 
> 标签：java, jdbc

我正在尝试连接数据库中的 3 个结果集值并将它们一起显示在一个文本字段中，但它不起作用我只得到文本框中显示的最后一个值“城市”。

```
PreparedStatement stmt2 = con.prepareStatement("select  bk_name as bank,bk_branch as branch,bk_add as city from bk_det WHERE rm_id = ?");
ResultSet rs2;
String rm2 = tf_rmid.getText().trim();
stmt2.setInt(1, Integer.parseInt(rm2));
rs2 = stmt2.executeQuery();
while (rs2.next()) {
    tf_remby.setText(rs2.getString("bank"));
    tf_remby.setText(rs2.getString("branch"));
    tf_remby.setText(rs2.getString("city"));
} 
```

我试着做：

```
tf_remby.setText(rs2.getString("bank"+","+"branch"+","+"city")); 
```

并且

```
tf_remby.setText(rs2.getString("bank"+"branch"+"city")); 
```

但两者都不起作用。有没有人有任何建议/解决方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-05T14:28:04.620

在您的 while 循环中，您可以尝试以下操作：

```
String text = rs2.getString("bank") + ", " +
              rs2.getString("branch") + ", " +
              rs2.getString("city");
tf_remby.setText(text); 
```

但是，如果结果集中有多个值，则无论如何您只会看到最后一个银行/分行/城市记录。

# php - PHP + MySQL + 工具提示

> ID：14172620
> 
> 赞同：3
> 
> 时间：2013-01-05T14:17:15.803
> 
> 标签：php, mysql, jquery-ui, jquery-tooltip

我想`tooltip`在 php 中显示查询数据。

我的php代码是，

```
echo "<div class='tooltip' id='".$row['id']."' title='title1'>".$row['name']."</div>"; 
```

我的脚本是，

```
$(function() {
  $('.tooltip').tooltip({
    content:function()
    {
      var id =$(this)[0].id;
       <?php    
        $qry3 = "SELECT phone_no FROM history WHERE id='?>id<?php' GROUP BY name";
        $exc3   = mysql_query ($qry3,$con);
        $num3   = mysql_num_rows($exc3);
          while($rows3 = mysql_fetch_array($exc3))
          {
             array_push($name,'"'.$rows3[0].'"');
          }
        echo "return ".$name;
      ?>        
   }});
}); 
```

我的问题在哪里？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-05T14:23:51.953

我认为您在这里混合了 Javascript 和 PHP。当服务器将 Javascript 发送到您的浏览器时，您当前的 PHP 代码只会执行一次。这行不通。您可以存储每个 HTML 元素的工具提示，例如在标题标签中，或者您应该在应该显示工具提示时动态加载它。您可以通过对 PHP 文件的 AJAX 调用（而不是通过将 PHP 代码放入 JS 文件）来执行此操作。

# java - POJO有什么优势？

> ID：14172621
> 
> 赞同：11
> 
> 时间：2013-01-05T14:17:18.460
> 
> 标签：java, pojo

在我的项目中，我有一个小型数据结构`Key`。

```
public class Key implements Serializable {

  private static final long serialVersionUID = 1L;

  public String db;
  public String ref;
  public Object id;

  protected Key() {
  }

  public Key(String db, String ref, Object id) {
    this.db = db;
    this.ref = ref;
    this.id = id;
  }
} 
```

是的，这个类很简单，每个字段都可以公开访问。

但是有人建议我改用**POJO**样式类，但是当我问他们为什么不能告诉我时。

在我看来，调用**getter**和**setter**比直接访问字段要慢。

那么为什么我必须使用**POJO**编程风格呢？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-05T14:29:46.310

取自维基百科：

> POJO 是 Plain Old Java Object 的首字母缩写词。该名称用于强调给定对象是普通的 Java 对象，而不是特殊对象。

POJO 通常很简单，因此不依赖于其他库、接口或注释。这增加了可以在多种项目类型（Web、桌面、控制台等）中重用的机会。

正如有人已经在评论中指出的那样，您的对象在技术上已经是一个 POJO，但是您特别询问了更类似于 JavaBeans 的 getter 和 setter。

我可以想到使用 getter 和 setter 的原因有很多：

2.  您可能只想**获取**一些值（IE 只读值）。使用字段，客户端可以直接获取和设置值。如果字段被标记为 final，则可以将它们设为只读，尽管这并不总是保证它们是不可变的（参见第 9 点）。
3.  Getter 和 setter 方法允许您在不破坏类的公共接口的情况下更改底层数据类型，这使得它（和您的应用程序）更加健壮和适应变化。
4.  您可能希望调用其他代码，例如在获取或更改值时发出通知。这在您当前的课程中是不可能的。
5.  您正在公开您的类的实现，这在某些情况下可能存在安全风险。
6.  Java bean 是围绕 POJO 设计的，这意味着如果您的类没有作为一个类来实现，那么某些希望您的类遵守这些完善的原则的工具和库就不能使用它。
7.  您可以公开*不受*字段 IE 计算值支持的值，例如`getFullName()`哪些是字段的串联，`getFirstName()`哪些`getLastName()`由字段支持。
8.  您可以向您的 setter 方法添加验证，以确保传递的值是正确的。这可确保您的类始终处于有效状态。
9.  您可以在 getter 和 setter 中设置断点，以便在获取或更改值时调试代码。
10.  如果该字段是一个对象（IE 不是原始类型），那么您的类的内部状态可以被其他对象修改，这可能会导致错误或安全风险。您可以通过返回对象的*副本*来防止 POJO 的 getter 中出现这种情况，以便客户端可以在不影响对象状态的情况下使用数据。请注意，拥有最终字段并不**总是**可以保护您免受此类攻击，因为**客户端仍然可以更改被引用的对象**（假设该对象本身是可变的），您只是不能将字段指向**不同**的引用，一旦它被设置.

是的，通过方法调用访问或设置值可能比直接访问字段要慢，但差异几乎不明显，它肯定不会成为程序的瓶颈。

虽然优点很明显，但这并不意味着 getter 和 setter 是灵丹妙药。在设计真实世界的、健壮的可扩展类时，需要考虑许多“陷阱”。

在设计具有 getter 和 setter 的类时，[这个对非常相似的问题的回答详细研究了一些注意事项。](https://stackoverflow.com/a/565227/577417)尽管这些建议可能更相关，具体取决于您正在设计的类的类型，例如，在大型系统中构成 API 一部分的类，而不是简单的数据传输对象。

另请注意，在某些情况下，具有直接字段的类可能是有利的，例如当速度至关重要或内存有限时，尽管**只有在分析您的代码并发现它实际上是一个瓶颈之后才应考虑这一点**。

还要注意，您不仅仅将**所有**字段包装在 getter 和 setter 中，因为这确实缺少封装的意义。

[这个](https://stackoverflow.com/a/3511336/577417)答案很好地总结了选择 POJO 而不是带有 getter 和 setter 的 JavaBean 样式对象的原因。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-05T14:21:12.517

Use private class variables and public getters and setters which will provide you Encapsulation.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-05T14:21:34.543

Getters and setters, especially the simplest forms will just be inlined by the JIT compiler and thus remove the method call overhead. This sounds very much like premature optimisation. If you ever *get* a bottleneck, then profile and look where it occurs. I am fairly certain it'll be not in property accesses.

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-05T17:50:55.313

给自己买一本《Effective Java》。

*   第 14 项，在公共类中使用访问器方法而不是公共字段。

在这篇文章中，Joshua Bloch 说包私有或嵌套类中的公共字段没有固有的错误，但强烈建议不要使用公共类。

他对这个主题进行了更详细的介绍，这是一本很棒的书，建议你买一本。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-03-02T06:20:08.220

想象一下，如果其他程序员正在使用您的代码。如果您不提供 setter 和 getter 方法，那么他可以直接调用您的变量，它肯定会影响您的代码。而且它可能会导致安全问题所以通过提供 POJO 类，你强迫他调用你的方法，而不是直接调用你的实例变量。

# sql - 如何在 oracle sql 中反转 clob 数据类型的值？

> ID：14172622
> 
> 赞同：0
> 
> 时间：2013-01-05T14:17:20.253
> 
> 标签：sql, oracle11g, clob

我想在 oracle 中反转 clob 数据类型值，就像我们在'reverse'函数的帮助下对字符串数据类型字段所做的那样。有没有内置的方法。谷歌没有太多帮助。在 sql 中做新手不知道这是否可能？我最初认为“反向”函数也可以用于 clob 数据类型字段，但它不起作用，这是我尝试过的示例 -

```
 drop table test;
 create table test
 (
  name varchar2(4000),
   description clob
  )

insert into test values ('aadinath','I have to reverse a clob data type value')

select reverse(name) from test; 
```

输出= htanidaa

```
select reverse(name), reverse(description) from test; 
```

***输出 = ORA-00932：不一致的数据类型：预期的 CHAR 得到 CLOB 00932。00000 -“不一致的数据类型：预期的 %s 得到 %s”***

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-05T14:55:15.787

你需要`convert` `clob`先`varchar2`。然后执行`reverse`.

[参考1：](http://asktom.oracle.com/pls/asktom/f?p=100:11:0%3a%3aNO%3a%3aP11_QUESTION_ID:367980988799)

将 CLOB 数据类型转换为 varchar() 的函数是 DBMS_LOB。DBMS_LOB 包提供了对 BLOB、CLOB、NCLOB、BFILE 和临时 LOB 进行操作的子程序。您可以使用 DBMS_LOB 访问和操作 LOB 的特定部分或完整的 LOB。DBMS_LOB 可以读取和修改 BLOB、CLOB 和 NCLOB；它为 BFILE 提供只读操作。

句法：

```
DBMS_LOB.SUBSTR (lob_loc, amount, offset)
dbms_lob.substr( clob_column, for_how_many_bytes, from_which_byte ); 
```

参数说明：

*   lob_loc：要读取的 LOB 的定位器，即 CLOB 列名。
*   数量：要读取的字节数（对于 BLOB）或字符数（对于 CLOB）。
*   offset：从 LOB 开始的偏移量，以字节（对于 BLOB）或字符（对于 CLOB）为单位。

例子：

```
 CREATE OR REPLACE VIEW temp_view
    AS
    SELECT
    column1, -- datatype numeric
    column2, -- datatype varchar()
    DBMS_LOB.SUBSTR(column3, 2000,1) as column3, -- datatype CLOB
    column4 -- datatype numeric
    FROM temp_table; 
```

注意：在这个例子中，我正在阅读前 2000 个字符。

# php - 我希望 codeigniter 回显 php 错误而不是 500 内部错误

> ID：14172623
> 
> 赞同：7
> 
> 时间：2013-01-05T14:17:41.330
> 
> 标签：php, codeigniter, error-reporting

我目前已将我的 Codeigniter root`index.php`的`environment`变量设置为`development`.

而且我还没有启用小 URL 模式。

我不喜欢`/var/log/apache2/error.log`每天夜以继日地检查！

希望我的 PHP 错误返回到页面。500 Internal error 实际上是可以用来显示错误的***HARD *est 方法。**

请注意，我们正在使用默认配置的 Ubuntu 12.04 LTS 服务器。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-05T14:21:15.507

As mentioned in the comment I'm doubtful that this is CodeIgniter's issue. It's more likely that you simply have `display_errors` set to off in your `php.ini`.

If I remember correctly, CI's `index.php` contains a call to `ini_set('error_reporting', ..);` to change the default behaviour anyway, so you could always look in there first and see what's going on.

Just had a look, here's the default:

```
/*
|---------------------------------------------------------------
| PHP ERROR REPORTING LEVEL
|---------------------------------------------------------------
|
| By default CI runs with error reporting set to ALL.  For security
| reasons you are encouraged to change this when your site goes live.
| For more info visit:  http://www.php.net/error_reporting
|
*/
    error_reporting(E_ALL); 
```

If you simply add under there `ini_set('display_errors', 1);`, it should start working just fine. Obviously the best bet would be to add a switch for your environment to set these variables, I'm not sure why it's not like that already, but here's an example:

```
if (defined('ENVIRONMENT'))
{
    switch (ENVIRONMENT)
    {
        case 'development':
            error_reporting(E_ALL);
            ini_set('display_errors', 1);
            break;
        case 'production':
            error_reporting(0);
            ini_set('display_errors', 0);
            break;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T15:14:25.180

我遇到了同样的问题，我从 codeigniter 得到的唯一一件事就是一个 500 内部错误。（我的旧项目和全新安装也是如此）但有趣的部分是我的非 CI 项目仍然可以工作，其中主要包含 php。

写出错误的提示

```
ini_set('display_errors', 'On' / ,1) 
```

由于某种原因解决了我的问题，我无权读取 codeigniter 核心文件。

在文件中添加 ' +r ' 解决了这个问题。

Rudi Visser
CarlosIPe
我感谢你们两位的解决方案。

# javascript - IE10 不处理点击事件 | 帮助使用 MSPointer

> ID：14172630
> 
> 赞同：6
> 
> 时间：2013-01-05T14:18:01.947
> 
> 标签：javascript, click, internet-explorer-10, handlers

请提前原谅我是一个愚蠢的菜鸟。

无论如何，我试图让我的 html5 游戏在 IE10 上运行，但它没有检测到我的点击。

因此，我对此进行了一些研究，然后发现不是理解这意味着什么：

`document.getElementById("answer1").addEventListener("click", wrong, false);`

如果必须使用一些糟糕的专有代码。因为我是一个愚蠢的菜鸟，所以我在实现这一点时遇到了问题。

这是我目前拥有的

```
 document.getElementById("answer1").addEventListener("click", wrong, false);
    document.getElementById("answer2").addEventListener("click", wrong, false);
    document.getElementById("answer3").addEventListener("click", wrong, false);
    document.getElementById("answer4").addEventListener("click", wrong, false);
    //Stupid IE10 Crap
    if (window.navigator.msPointerEnabled) {
        document.getElementById("answer1").addEventListener("MSPointerDown", wrong, false);
        document.getElementById("answer2").addEventListener("MSPointerDown", wrong, false);
        document.getElementById("answer3").addEventListener("MSPointerDown", wrong, false);
        document.getElementById("answer4").addEventListener("MSPointerDown", wrong, false);
    } 
```

当我在 ie10 上运行代码时，它仍然没有注册我的鼠标点击。我是否遗漏了什么或做错了什么？

请帮助我。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-05T22:42:30.207

好吧，我不知道为什么它不起作用。它仍然无法正常工作。

但我找到了一个我认为我会分享的解决方法。我在目标 DIV 的 CSS 中添加了以下属性。

`background-color:#FFFFFF; opacity:0;`

出于某种原因，如果我给 DIVS 一个背景颜色并使它们完全透明，点击就会注册。

所以，我现在已经不再关心这个问题了。

我希望这可以帮助别人。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-04T16:16:24.337

在每个元素上，添加 css 样式`-ms-touch-action: none;`

IE10 似乎期望在您希望 Pointer 事件与之交互的元素上，这样它就不会尝试保持默认浏览器行为。

# iphone - 取消远程通知，让它不在通知中心显示

> ID：14172635
> 
> 赞同：0
> 
> 时间：2013-01-05T14:18:34.730
> 
> 标签：iphone

我的应用程序关闭，屏幕被锁定，当我收到远程推送通知时，它出现在屏幕上，当我滑动通知但不滑动锁时，它可以打开我的应用程序，一切正常。但通知总是出现在通知中心，不会消失。当我滑动通知时，如何从通知中心将其关闭。

*   (void)applicationDidFinishLaunching:(UIApplication *)application{

    ```
     // put receive remote notification is here 
    ```

    }

是否有一些 api，例如取消本地通知，取消远程通知？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T11:49:24.650

在您处理通知的地方，您需要重置 applicationIconBadgeNumber 属性。

```
[UIApplication sharedApplication].applicationIconBadgeNumber = 0; 
```

理想情况下，这应该位于以下代码段中自定义代码的位置：

```
- (void)application:(UIApplication *)application didReceiveRemoteNotification:(NSDictionary *)userInfo {
NSLog(@"Received notification: %@", userInfo);
//[self addMessageFromRemoteNotification:userInfo];

NSString* alertValue = [[userInfo valueForKey:@"aps"] valueForKey:@"badge"];
NSLog(@"my message-- %@",alertValue);
badgeValue= [alertValue intValue];
[UIApplication sharedApplication].applicationIconBadgeNumber += badgeValue;   
//
//Custom Code where you actually respond to the notification. 
//
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T18:45:48.503

将 UIApplucation 对象的 applicationIconBadgeNumber 属性设置为零。这将从通知中心清除 tge 通知。

# javascript - 如何使用 Javascript 删除嵌套框架和 iframe 的滚动条

> ID：14172637
> 
> 赞同：2
> 
> 时间：2013-01-05T14:18:51.387
> 
> 标签：javascript, jquery, iframe, frame

我正在开发包含不同数量的嵌套框架和 iframe 的 Web 应用程序。当前，当网页呈现浏览器时，会针对它们呈现滚动条。有时计数是页面中的 4-5 个滚动条，看起来非常难看。所以我想通过 Javascript 删除这些滚动条。

要了解该问题，请参阅下面的带有框架/iframe 层次结构的网页示例。

```
 Frame1
       --Frame2
       --Frame3
              --Frame4
              --Frame5 
```

**我的方法：** 从根文档开始，从页面中搜索所有框架/iframe，并将这些框架节点放入数组中，并带有称为 level 的附加变量。完成此操作后，我正在对数组进行排序。所以这个活动数组之后会是什么样子。下面

```
 0> Frame5 node, level=3
     1> Frame4 node, level=3
     2> Frame3 node, level=2
     3> Frame2 node, level=2
     4> Frame1 node, level=1 
```

在此之后，我正在考虑删除滚动条的两个选项

**选项#1**：从数组的第 0 个元素开始，获取框架的滚动高度并将其设置为框架的高度属性。

```
var frameScrollHeight=Frame5.contentWindow.document.body.scrollHeight;
Frame5.style.height =frameScrollHeight; 
```

对数组中的每一帧执行相同的过程。我在这里的假设是，如果最内层框架高度发生变化，其父节点滚动高度必须更改为真实滚动高度。例如，在设置 Frame5 和 Frame4 高度之后。当我们获取 Frame3 的滚动高度时，它必须是 Frmae5 高度 + Frame4 高度。但现在它并没有反映真正的滚动高度。我不确定这里有什么问题。当我们设置 Frame5 和 Frame 4 高度时，Dom 会立即刷新吗？. 我使用了错误的属性吗？因为我还使用脚本调试器（如 clientHeight、offsetHeight）验证了所有其他属性，但没有一个等同于 Frame5 高度+ Frame4 高度。

**选项#2** 由于上述方法无法正常工作，我采用另一种方法手动添加先前级别的框架高度并将其设置为下一级的父节点。例如获取Frame5 和Frame4 的滚动高度并将其设置为Frame3 另外添加Frame3 和Frame2 的高度并将其设置为Frame1。

选项二现在正在工作，但它仍然有一些缺点，例如所有帧必须按层次顺序排列，并且不能彼此平行。

此外，当我将 scrollheight 设置为 Frame 滚动条的高度时，仍然会按原样显示，我必须在 scrollheight 中添加一些常数，例如 15。所以实际的代码就像

```
var frameScrollHeight=Frame5.contentWindow.document.body.scrollHeight+15;
Frame5.style.height =frameScrollHeight; 
```

我不知道这个15是什么。是边框吗？我可以使用框架的任何属性来获得这个常数吗？

我会更喜欢选项 1，但不知道为什么这不起作用。如果有其他方法可以解决此问题，请提出建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T03:25:49.907

为什么不直接使用

```
html,body{overflow:hidden} 
```

在 iframe 的 CSS 中？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T03:11:59.687

在将所有帧转换为 iframe 后，我遇到了同样的问题，以下函数（使用 jquery）对我有用。此函数将调整每一帧的大小，以便不需要滚动条：

```
var resizeFramesSoAllContentVisible = function (win) {
    for (var i = 0; i < win.frames.length; i++) {
        var frame = win.frames[i];
        var contentWindow = frame.contentWindow ? frame.contentWindow : frame.window;
        resizeFramesSoAllContentVisible(contentWindow);
    }

    if (win.frameElement) {
        var myFrameOuterHeight = $(win.frameElement).height();
        var myFrameInnerHeight = $(win.document).height();
        var myFrameOuterWidth = $(win.frameElement).width();
        var myFrameInnerWidth = $(win.document).width();

        if (myFrameOuterHeight != myFrameInnerHeight) {
            $(win.frameElement).height(myFrameInnerHeight);
        }
        if (myFrameOuterWidth != myFrameInnerWidth) {
            $(win.frameElement).width(myFrameInnerWidth);
        }
    }
} 
```

# c# - 获取类和 SetValue 中属性的自定义属性

> ID：14172639
> 
> 赞同：0
> 
> 时间：2013-01-05T14:19:00.077
> 
> 标签：c#, .net, reflection

我只是想玩一些东西。我做了一种 OR/M 类型的映射器，因为我使用的是反射，所以性能很慢。我怎样才能加快速度或使用更好、更有效的方法？

我有一个带有命名参数的自定义属性并允许多个我然后使用反射来：

*   获取包含自定义属性修饰的属性
*   对于找到的每个属性，获取自定义属性数据
*   对于每个自定义属性数据，获取命名参数

然后我检查命名参数 memberinfo 名称以查看它是否与属性的相关命名参数匹配，如果匹配，它会获取为该命名参数设置的值，最后从 dataReader 读取该命名参数值的数据并使用 . SetValue 将从读取器读取的值设置为属性。

这是一些代码（以任何方式都不完整），希望有人能告诉我如何获得性能改进。运行它 10,000 次（在此之前首次调用 JIT excersize 等......）给了我这些平均时间：

3.79ms

以手动方式进行（即从 DB 到 DTO 的硬编码映射）：0.05ms

我知道这就像“另一个 OR/M”——但它并不完全是那样，它比任何东西都更适合我。

```
private T Populate<T>(IDataReader reader) where T : class, new()
{ 
   T val = new T();

            if (reader != null && !reader.IsClosed)
            {

                var propsWithSQLColumnNameAttributes = typeof(T).GetProperties(BindingFlags.Instance | BindingFlags.NonPublic | BindingFlags.Public | BindingFlags.Static).Where(prop => Attribute.IsDefined(prop, typeof(SQLColumnNameAttribute)) && prop.CanWrite && prop.GetSetMethod() != null);

                foreach (var currentProperty in propsWithSQLColumnNameAttributes)
                {   
                    foreach (var currentAttributeForProperty in currentProperty.GetCustomAttributesData())
                    {
                        string currentAttribParamValue = null;
                        foreach (var currentNamedArgument in currentAttributeForProperty.NamedArguments)
                        {
                            if (String.Equals(currentNamedArgument.MemberInfo.Name, SQLColumnNameAttribute.PropertyNames.DataColumnNamePropertyName, StringComparison.OrdinalIgnoreCase))
                            {
                                currentAttribParamValue = currentNamedArgument.TypedValue.Value == null ? null : currentNamedArgument.TypedValue.Value.ToString();

                                if (reader.DoesFieldExist(currentAttribParamValue))
                                {
                                    var dbRecordValue = reader[currentAttribParamValue] == DBNull.Value ? null : reader[currentAttribParamValue];

                                    currentProperty.SetValue(val, dbRecordValue, null);
                                }
                                break;
                            }
                        }
                    }
                }
            }

            return val;
} 
```

不是最好的代码，但无论如何，性能是这里的问题，并且想知道如何改进它，或者通过使用不同的反射方法，或者使用的排序和算法类型不正确

非常感谢 - 我希望这个问题有意义。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T14:51:24.480

看看这个页面[http://www.codeproject.com/Articles/503527/Reflection-optimization-techniques](http://www.codeproject.com/Articles/503527/Reflection-optimization-techniques)看看它是否对你有帮助。它谈到了许多场景中的反射优化，一旦你想学习，这可能是一个很好的资源。

# google-app-engine - google.appengine.api 和 google.appengine.ext 有什么区别？

> ID：14172646
> 
> 赞同：3
> 
> 时间：2013-01-05T14:19:35.223
> 
> 标签：google-app-engine

从语义上讲，什么`api`和`ext`指的是什么？例如，为什么`taskqueue`属于`api`但`db`属于`ext`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-05T15:11:33.983

API = 应用程序编程接口。

因此，我们通过它的 API 与任务队列进行交互，但我们直接使用 db 作为`extension`通过 API 与之交互的东西。

因此`ext` **扩展**了您可以直接使用的现有功能，`api`提供了一种通过 API 提供的任何机制与服务**交互的方式。**

我的2c。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T16:25:33.297

我喜欢这样想：“ext 是用户领域，这是我可以自己构建的东西”。

# iphone - 内存不足警告后重新启动应用程序

> ID：14172649
> 
> 赞同：1
> 
> 时间：2013-01-05T14:19:39.640
> 
> 标签：iphone, ios

我正在使用我的 appDelegate 的`applicationDidReceiveMemoryWarning`方法来转储一些高资源对象。当应用程序重新启动时，而不是尝试仅重新加载这些对象并将用户返回到他的最后一页，我只想从顶部重新启动应用程序（从主页开始，应用程序只进入一级深度，所以这对我们来说是完全可以接受的）。

这是我微不足道的尝试，但它是一个可悲的失败。它接近了，但我最终引入了一些导致实际内存转储和应用程序崩溃的问题。

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];

    self.viewController = [[SplashScreenViewController alloc] initWithNibName:@"SplashScreenViewController" bundle:nil];
    UINavigationController *navcon = [[UINavigationController alloc] initWithRootViewController:self.viewController];
    self.window.rootViewController = navcon;
    [self.window makeKeyAndVisible];
    return YES;
}

- (void)applicationDidEnterBackground:(UIApplication *)application
{
    //For testing purposes only
    self.lowMemoryWarning = TRUE;
    NSLog(@"app did enter background");
}

- (void)applicationWillEnterForeground:(UIApplication *)application
{
    NSLog(@"app will enter foreground");
    if (self.lowMemoryWarning) {
        NSLog(@"recovering from low memory warning");
        self.window.rootViewController = nil;
        UINavigationController *navcon = [[UINavigationController alloc] initWithRootViewController:self.viewController];
        self.window.rootViewController = navcon;
        [self.window makeKeyAndVisible];
    }
} 
```

做这样的事情的最佳方法是什么？是否有一个我不知道的简单技巧？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T16:21:38.527

您的意思是您希望应用程序在每次启动（或进入前台）时重新启动？如果是，也许您可​​以将应用程序设置为不支持多任务处理

[http://developer.apple.com/library/ios/#documentation/iphone/conceptual/iphoneosprogrammingguide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html#//apple_ref/doc/uid/TP40007072-CH4-SW5](http://developer.apple.com/library/ios/#documentation/iphone/conceptual/iphoneosprogrammingguide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html#//apple_ref/doc/uid/TP40007072-CH4-SW5)

搜索“退出后台执行”

==================================================== ===============================

啊抱歉，我不知道你的应用程序的性质，如果某些进程需要在后台运行，那么这种方法是行不通的。

我在上面阅读了您关于 UIActivityIndi​​cator 的评论 + 在应用程序进入前台后将某些对象加载回当前视图。也许这个线程可以帮助你，[当应用程序进入前台时找到当前视图。IOS](https://stackoverflow.com/questions/12274627/finding-the-current-view-when-application-enter-foreground-ios)

# java - 如何将 ActionBar 标志设置为文本（TextView）？

> ID：14172654
> 
> 赞同：4
> 
> 时间：2013-01-05T14:20:00.297
> 
> 标签：java, android, android-actionbar, graphical-logo

我一直在尝试将 ActionBar 徽标或向上按钮设置为文本而不是图像。`actionbar.setLogo();`仅接受可绘制资源。用 a 膨胀布局`TextView`并没有奏效。

基本上，我想要完成的是：

![在此处输入图像描述](../Images/71a449d3d4cf7651856bd8d0bcf29025.png)

第一个来自 Android 4.2 的新 DeskClock 应用，第二个来自 Contacts 应用。我检查了 GitHub 中的代码，但我找不到任何东西。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-05T14:43:39.883

袖口：

选项 #1：在-backed上（`TextView`或直接）绘制文本，然后提供to 。`Bitmap``Canvas``BitmapDrawable``setLogo()`

选项 #2：隐藏图标和徽标并使用`setCustomView()`插入符号图像和文本。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-05T16:37:28.200

这是@CommonsWare 选项#1 的实现，效果很好。

```
TextView upTextView = (TextView) getLayoutInflater().inflate(
        R.layout.up_text, null);
upTextView.setText("CITIES");
upTextView.measure(0, 0);
upTextView.layout(0, 0, upTextView.getMeasuredWidth(), 
        upTextView.getMeasuredHeight());
Bitmap bitmap = Bitmap.createBitmap(upTextView.getMeasuredWidth(),
        upTextView.getMeasuredHeight(), Bitmap.Config.ARGB_8888);
Canvas canvas = new Canvas(bitmap);
upTextView.draw(canvas);
BitmapDrawable bitmapDrawable = new BitmapDrawable(getResources(), bitmap); 
```

`R.layout.up_text`：

```
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:paddingLeft="4dp"
    android:paddingRight="4dp"
    android:textColor="#f00"
    android:textSize="20sp"
    android:textStyle="bold" /> 
```

# android - 在 ListView 的最后一条记录上设置 Cursor

> ID：14172658
> 
> 赞同：0
> 
> 时间：2013-01-05T14:20:29.343
> 
> 标签：android, listview, android-listview

我正在使用 a`ListView`来显示记录。用户可以刷新`ListView`以添加更多记录。`ListView`我需要将光标显示到刷新`ListView`之前的最后一条记录`ListView`。

`ListView`正在动态刷新，但它显示的是最高记录。我希望在刷新后将其显示在第一条记录上。

我试过实现这个逻辑，

```
if(histroyRefreshed){
                int index = getListView().getFirstVisiblePosition();
                View v = getListView().getChildAt(0);
                int top = (v == null) ? 0 : v.getTop();

                // ...

                // restore
                getListView().setSelectionFromTop(index, top);
            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T06:48:58.580

```
getListView().setSelection(location); 
```

这会将位置设置为最后一条记录，在刷新历史记录之前

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T16:07:42.070

将您的项目 ID 保存在本地字段中，一旦您更新了列表视图，请使用您预先存储的 ID 找出它在哪里。

# triggers - Programming a system where users can define their own rules

> ID：14172666
> 
> 赞同：1
> 
> 时间：2013-01-05T14:21:21.233
> 
> 标签：triggers, alerts, rule-engine, expert-system

I want to make a system for users to specify their own rules for when to receive alerts when something happens in their facebook feed. I want them to be able to say 'please send me an alert when Z happens' and then specify that Z is: 'my friend X posts something that contains Y' or 'my friend X doesnt post anything for two days in a row' or something to that effect.

I want this to be easy for the end-user and allow them to define complex trigger events . Is there a specific method to do that? I know that by modeling the specific entities and their relationships I can probably come up with something. My question is: what domain of computer science is this (some subset of AI?)? Are there generic methods to allow the creation of rules? What can I read before I start?

Thanks

# javascript - Javascript - 如何等待图像加载？无法让 img.load 工作？

> ID：14172671
> 
> 赞同：0
> 
> 时间：2013-01-05T14:22:00.803
> 
> 标签：javascript, canvas

在我的 javascript 中，我绘制到画布上，之后我希望将画布转换为 png 并使用以下代码显示在 div 中：

```
var dataURL = document.getElementById('myCanvas').toDataURL("image/png");
var imgObj = new Image();
imgObj.src = dataURL;
imgObj.onload = function() {document.getElementById('myImg').appendChild(imgObj); }; 
```

当我在绘制画布后直接调用它时，我会在“myImg”中得到一个完全空白的图像，但是如果我通过单击链接调用完全相同的代码，它将被正确绘制：

```
<a id="viewImgLnk" href="javascript:void()" onclick=" return convertCanvasToImage();">View Image</a>

<script>
    function convertCanvasToImage(){
        var dataURL = document.getElementById('myCanvas').toDataURL("image/png");
        var imgObj = new Image();
        imgObj.src = dataURL;
        imgObj.onload = function() {document.getElementById('myImg').appendChild(imgObj); };
    }
</script> 
```

如何在没有链接的情况下直接加载图像？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T15:09:12.187

我在过敏的帮助下得到了代码！

```
setTimeout(function() {
    var dataURL = document.getElementById('myCanvas').toDataURL("image/png");
    var imgObj = new Image();
    imgObj.src = dataURL;
    imgObj.onload = function() {document.getElementById('myImg').appendChild(imgObj); };
}, 300); 
```

# c++ - accessing the starting element of 2D array in C++

> ID：14172673
> 
> 赞同：1
> 
> 时间：2013-01-05T14:22:11.193
> 
> 标签：c++, arrays, pointers

I came across this piece of code. In the cout statement the conditions evaluates to true.

```
 a[10][10]=’h’;
   cout<<(a[0]==*a)&&(*a==0[a]); 
```

Accessing an array element/address using `0[a]` is the new thing. Can somebody please explain this type of notation ?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-05T14:25:28.990

来自[http://c-faq.com/aryptr/joke.html](http://c-faq.com/aryptr/joke.html)

问：我遇到了一些包含表达式 5["abcdef"] 的笑话代码。这怎么可能是合法的C？

答：是的，Virginia，数组下标在 C 中是可交换的。[脚注] 这个奇怪的事实来自数组下标的指针定义，即 a[e] 等同于 *((a)+(e))，对于任何两个表达式 a 和 e，只要其中一个是指针表达式，一个是整数。“证明”看起来像

```
a[e]
*((a) + (e))    (by definition)
*((e) + (a))    (by commutativity of addition)
e[a]        (by definition) 
```

这种意想不到的交换性在 C 文本中经常被提及，好像它是值得骄傲的东西，但它在混淆 C 竞赛之外没有发现任何有用的应用（见问题 20.36）。

由于 C 中的字符串是 char 数组，因此表达式 "abcdef"[5] 是完全合法的，并且计算结果为字符 'f'。您可以将其视为

```
char *tmpptr = "abcdef";

... tmpptr[5] ... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-05T14:24:01.287

在 C 中，`0[a]`与 具有完全相同的含义`a[0]`，并且都等价于`*a`。请参阅[C 常见问题解答](http://c-faq.com/aryptr/joke.html)。

只要`a`是指针，所有这些表达式在 C++ 中的语义与在 C 中的语义相同。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-05T14:24:46.527

假设`a`是一个指向对象的指针，这些表达式总是相同的：

```
*a

0[a]

a[0] 
```

这意味着这些表达式`(a[0]==*a)`和`(*a==0[a])`也是相同的，并且都计算为`1`。

# node.js - Why do nodejs WebSocket implementations not use net.Server?

> ID：14172674
> 
> 赞同：3
> 
> 时间：2013-01-05T14:22:15.213
> 
> 标签：node.js, tcp, websocket

I am currently experiencing with Websockets.

By reviewing some active projects/implementations like einaros/ws (and others as well) I found out that they implement the server their own. Instead of using the node net module which provides a tcp server. Is there a reason for this approach?

[https://github.com/einaros/ws/blob/master/lib/WebSocketServer.js](https://github.com/einaros/ws/blob/master/lib/WebSocketServer.js)

Regards

**Update:**

```
var server = net.createServer(function(c) {

  c.on('data', function(data) {
    // data is a websocket fragment which has to get parsed
  });
  // transformToSingleUtfFragment is building a websocket valid
  // byte fragment which contains hello as application payload
  // and sets the right flags so the receiver knows we have a single text fragment
  c.write(transformToSingleUtfFragment('hello'));
  c.pipe(c);
});
server.listen(8124, function() { //'listening' listener
  console.log('server bound');
}); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-05T14:42:15.603

WebSocket 的 aa 协议位于普通 HTTP 之上。

它的工作原理基本上是浏览器发送一个`UPGRADE`HTTP 请求，然后利用 HTTP 1.1 保持活动功能来保持 HTTP 连接的底层 TCP 套接字打开。

然后通过[WebSocket 协议](https://www.rfc-editor.org/rfc/rfc6455)（链接后面相当大的 RFC）发送数据，该协议本身建立在 TCP 之上。

由于需要 HTTP 部分，并且您需要重新使用该部分的 TCP 连接，因此使用普通 HTTP 服务器而不是`net.Server`. 否则，您必须自己实现 HTTP 处理部分。

在任何一种情况下都需要实现 WebSocket 协议，并且由于任何 HTTP 连接都可以升级，理论上，您可以简单地将 WebSocket“服务器”连接到端口 80 上的普通 HTTP 服务器，从而处理普通 HTTP 请求和同一端口上的 WebSocket。

# javascript - 向下滑动到正常宽度？

> ID：14172675
> 
> 赞同：0
> 
> 时间：2013-01-05T14:22:21.487
> 
> 标签：javascript, jquery, slidedown

我有一个`div`盒子，里面有很多`p`标签，而且很长。

所以我在框的顶部添加了一个`show more`文本。

盒子有一个`height: 100px; overflow: hidden;`，但是当有人点击时`show more`，我想把它放到`slideDown`盒子里，得到正常的，如果没有设置`height`它会有的。`height: 100px;`

知道怎么做吗？

我尝试了以下方法：（注意，盒子有类`.show-limited-content`和`show more`有类`.show-more`）

```
$('.show-more').live("click", function() {
    $('.show-more').live("click", function() {
        $('.show-limited-content').slideDown("slow");
    }); 
    return false;
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T14:35:23.567

您可以使用[动画](http://api.jquery.com/animate/)方法。

根据您的 html 的编写方式，它看起来类似于以下内容：

```
$('.show-more').on("click", function() {  
    $('.show-limited-content').animate({
        height: '500px'
      }, 2000);    
      return false;
  }); 
```

请参阅[此](http://jsbin.com/amined/1/edit)工作示例以查看它的实际效果。

如果您需要动态高度，只需添加

```
var curHeight = $('.show-limited-content').height();

  $('.show-limited-content').css('height', 'auto');

  var autoHeight = $('.show-limited-content').height();

  $('.show-limited-content').height(curHeight); 
```

在事件处理程序上方并将动画 css 更改为

```
height: autoHeight 
```

[这](http://jsbin.com/eyeyob/1/edit)是另一个例子。

# javascript - 如何在其他地方使用 $.ajax 成功数据？

> ID：14172680
> 
> 赞同：4
> 
> 时间：2013-01-05T14:22:51.663
> 
> 标签：javascript, jquery, ajax

> **可能重复：**
> [从 jquery ajax 调用](https://stackoverflow.com/questions/2844832/return-from-jquery-ajax-call)
> [返回 jQuery：ajax 调用成功后返回数据](https://stackoverflow.com/questions/5316697/jquery-return-data-after-ajax-call-success)

```
 $.ajax({
            url:"list.php",
            dataType: "json",
            success: function(resp){
                for(var i=0;i<resp.length;i++){
                    $('#goods_list').append(
                      "<h3>" + resp[i]["name"] + "</h3>"
                      +
                      "<div>Price： NT$" + resp[i]["price"] + "<br />"
                      +
                      resp[i]["description"]
                      +
                      "<hr /> <a href=# alt='"+ resp[i]["sn"]+ "' class='add_to_cart'>Add</a> | More"
                      +"</div>"
                    );
                }

                var resp2 = resp;
            }
        });

        $('body').append(resp2[0]["price"]); 
```

FireBug 说：

```
ReferenceError: resp2 is not defined
$('body').append(resp2[0]["price"]); 
```

如何`$.ajax`在其他地方使用成功数据？（在 $.ajax 函数之外）

这个概念类似于“全局变量”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T14:33:47.087

如果您只是想在`success`回调之外使用响应内容，则应在方法之外声明变量，例如：

```
var resp2;
$.ajax({
    url:"list.php",
    dataType: "json",
    success: function(resp){

        for(var i=0;i<resp.length;i++){

            $('#goods_list').append(
            "<h3>" + resp[i]["name"] + "</h3>"
            +
            "<div>Price： NT$" + resp[i]["price"] + "<br />"
            +
            resp[i]["description"]
            +
            "<hr /> <a href=# alt='"+ resp[i]["sn"]+ "' class='add_to_cart'>Add</a> | More"
            +"</div>"
            );

        }

        var resp2 = resp;
    }
}); 
```

无论如何，您必须记住，很可能，几乎可以肯定，$.ajax 调用之后的代码将在成功回调之前执行。它会发生，因为这是一个异步调用。浏览器将执行 $.ajax 调用，并在第二个线程中等待响应，就在发送请求之后，将执行下一条语句（在您的代码中，.append 调用）。

因此，为了满足您的需求，您应该将 .append 调用放在成功回调中。

# haskell - Haskell中的函数对象编译错误

> ID：14172681
> 
> 赞同：1
> 
> 时间：2013-01-05T14:22:56.600
> 
> 标签：haskell, function-object

我正在尝试创建一个`Func`表示函数的类，然后创建一个`Dot`组成函数的数据类型。以下是我的尝试，但出现编译错误：

```
{-# LANGUAGE MultiParamTypeClasses #-}
{-# LANGUAGE FunctionalDependencies #-}
{-# LANGUAGE FlexibleInstances #-}
{-# LANGUAGE UndecidableInstances #-}
{-# LANGUAGE GADTs #-}

module Func where
  class Func f a b | f -> a, f -> b where
    apply :: f -> a -> b

  data Dot f1 f2 where
    Dot :: (Func f1 a b, Func f2 b c) => f1 -> f2 -> Dot f1 f2

  instance Func (Dot f1 f2) a c where
    apply (Dot f1 f2) = (apply f2) . (apply f1) 
```

我收到以下错误：

```
Func.hs:15:26:
    Could not deduce (Func f2 b c) arising from a use of `apply'
    from the context (Func f1 a1 b, Func f2 b c1)
      bound by a pattern with constructor
                 Dot :: forall f1 f2 a b c.
                        (Func f1 a b, Func f2 b c) =>
                        f1 -> f2 -> Dot f1 f2,
               in an equation for `apply'
      at Func.hs:15:12-20
    Possible fix:
      add (Func f2 b c) to the context of
        the data constructor `Dot'
        or the instance declaration
    In the first argument of `(.)', namely `(apply f2)'
    In the expression: (apply f2) . (apply f1)
    In an equation for `apply':
        apply (Dot f1 f2) = (apply f2) . (apply f1)

Func.hs:15:39:
    Could not deduce (Func f1 a b) arising from a use of `apply'
    from the context (Func f1 a1 b, Func f2 b c1)
      bound by a pattern with constructor
                 Dot :: forall f1 f2 a b c.
                        (Func f1 a b, Func f2 b c) =>
                        f1 -> f2 -> Dot f1 f2,
               in an equation for `apply'
      at Func.hs:15:12-20
    Possible fix:
      add (Func f1 a b) to the context of
        the data constructor `Dot'
        or the instance declaration
    In the second argument of `(.)', namely `(apply f1)'
    In the expression: (apply f2) . (apply f1)
    In an equation for `apply':
        apply (Dot f1 f2) = (apply f2) . (apply f1) 
```

我需要修复什么才能编译？

我意识到这可能看起来有点傻，但我认为能够将不同的功能作为独特的类型进行携带可能很有用，因为可以将各种元数据附加到这些类型（我还不确定到底是什么）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-05T14:37:38.140

问题是实例负责人`Func (Dot f1 f2) a c`无法“查看”`f1`并`f2`推断出功能依赖关系。您需要自己执行此操作，使用等效公式更容易

```
{-# LANGUAGE TypeFamilies      #-}

class Func f where
  type FuncArg f :: *
  type FuncRes f :: *
  apply :: f -> FuncArg f -> FuncRes f

data Dot f1 f2 where
  Dot :: (Func f1, Func f2, FuncArg f2~FuncRes f1)
                                 => f1 -> f2 -> Dot f1 f2

instance Func (Dot f1 f2) where
  type FuncArg (Dot f1 f2) = FuncArg f1
  type FuncRes (Dot f1 f2) = FuncRes f2
  apply (Dot f1 f2) = (apply f2) . (apply f1) 
```

或者你有什么特别的理由更喜欢fundeps而不是类型家庭？

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-05T14:36:51.650

错误的直接原因是

实例 Func (Dot f1 f2) ac where apply (Dot f1 f2) = (apply f2) 。（应用 f1）

说你有一个*任何*类型的实例`a`和`b`with `Dot`，这些`a`与`b`用于构造`Dot`.

将上下文添加`(Func f1 a b, Func f2 b c)`到实例声明使其可以使用 ghc-7.2 编译，但不能使用 7.4 或 7.6。

将类型`a`和`c`作为类型参数添加到`Dot`,

```
data Dot f1 f2 a c where
  Dot :: (Func f1 a b, Func f2 b c) => f1 -> f2 -> Dot f1 f2 a c 
```

使它与所有这些 GHC 一起编译。

# c# - 如何调用从 Web 服务返回数组的函数？

> ID：14172682
> 
> 赞同：4
> 
> 时间：2013-01-05T14:22:57.990
> 
> 标签：c#, php, mysql, web-services, nusoap

我是 C# 新手，我正在使用 nuSOAP 和 PHP。我在一个返回数组的 Web 服务中编写了一个函数。问题是我不知道如何从客户端获取该数组。这是我的网络服务中的相关代码：

```
function GetSection(bool $wcoloumn,string $coloumn, bool $all){
    if($wcoloumn== true && $all==false){
    $SQL = "SELECT `$coloumn` FROM _sections";
    $result = mysql_query($SQL);

    $dataCOL = array();

    $index = 0;
    $num = mysql_num_rows($results);
        while($row = mysql_fetch_assoc($result)) // loop to give you the data in an associative array so you can use it however.
        {
            if ($num > 0) {
            // You have $row['ID'], $row['Category'], $row['Summary'], $row['Text']
            $dataCOL[$index] = $row['$coloumn'];
            $index++;
            }
        }
        return $dataCOL();
    }
    } 
```

这是返回数组的函数`[ $dataCOL(); ]`。

另请注意，我添加了自己的复杂类型（数组）：

```
$server->wsdl->addComplexType("ArrayOfString",                      
                 "complexType",
                 "array",
                 "",
                 "SOAP-ENC:Array",
                 array(),
                 array(array("ref"=>"SOAP-ENC:arrayType","wsdl:arrayType"=>"xsd:string[]")),
                 "xsd:string"); 
```

我也注册了这个功能：

```
$server->register('GetSection', array('wcoloumn' => 'xsd:boolean', '$coloumn' => 'xsd:string', 'all' => 'xsd:boolean'), array('result' => 'tns:ArrayOfString')); 
```

客户端代码是用 C# 编写的，目前看起来像这样：

```
public static userdatawsdl webs = new userdatawsdl();

public String[] arrSections = webs.GetSection(true, "id", false);

public String[] GetAppSections(bool wcoloumn,string coloumn)
{
   return arrSections[]; // Here I get syntax error :D
} 
```

我得到的错误仅在客户端：

> 语法错误；期望值

这里可能是什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T14:35:37.027

您的问题是将数组转换为字符串数组，尝试使用 Linq

```
public String[] GetAppSections(bool wcoloumn,string coloumn)
{
string[] foo = webs.GetSection(true, "id", false).OfType<object>().Select(o => o.ToString()).ToArray();
return foo
} 
```

# asp.net-mvc - 我可以在哪里存储 ASP.NET MVC 应用程序的源代码副本？

> ID：14172685
> 
> 赞同：1
> 
> 时间：2013-01-05T14:23:24.450
> 
> 标签：asp.net-mvc, asp.net-mvc-3, azure, asp.net-mvc-4, azure-storage

我有一个在云上运行的 MVC4 应用程序。我保留了多个备份，但我也想在网上的某个地方进行备份。

有没有人对我可以把这个备份放在哪里有任何建议。我的 3 个项目总共占用了大约 250MB。我能否以某种方式将这些存储在我已经付费的云区域中。网上其他地方呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T14:54:59.887

你不使用版本控制吗？如果没有，这将是开始的时候了。

查看[GitHub](https://github.com)或[Bitbucket](https://bitbucket.org/)。两者都可以免费用于公共存储库，并为私人项目提供非常实惠的计划。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-05T22:40:28.830

我会推荐[Microsoft Team Foundation Server](http://tfs.visualstudio.com/en-us/)。TFS 已集成到 Visual Studio 中。

一些关键功能

*   最多 5**位用户免费**
*   **无限**数量的项目
*   **持续交付到 Azure**（这对您来说非常方便）
*   工作项跟踪
*   敏捷规划工具
*   反馈管理
*   VS 集成构建（但是，该功能仍处于预览阶段）

![Visual Studio 集成构建](../Images/7b384d91728a6c52691b835970275ed4.png)

我已经使用该服务几个月了，我肯定会推荐它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-05T14:47:11.287

我使用[保管箱](http://db.tt/qF8lLnC7)进行一些备份，但有很多替代品，如 Amazon S3，或托管服务提供商，如 RackSpace 等。

我还有一个可以备份的 NAS 盒。我也在上面安装了 SVN，我通过我的笔记本电脑和我的主台式电脑访问它，所以我几乎总是在任何时候至少有 3 个代码副本。SVN 存储库也备份到外部硬盘。

我还没有使用 Azure，所以我不知道他们的备份服务是如何工作的。不过，我确实找到了这个[链接](http://www.windowsazure.com/en-us/manage/services/storage/what-is-a-storage-account/)，这可能会帮助您确定是否可以单独存储文件。

不过，我想，由于它托管在基于云的系统中，您的代码将被备份并分布在相当多的服务器上——所以这对您来说可能不是什么大问题。

# css - 我需要在容器中居中多个图像，每个图像都有自己的 div 标签

> ID：14172687
> 
> 赞同：1
> 
> 时间：2013-01-05T14:23:44.900
> 
> 标签：css, image, alignment, center

我试图弄清楚如何将位于它们自己的图像居中，将它们居中在容器中。我在 2 列中有 8 张图像，每行 2 张图像左对齐。我需要它们居中对齐。

我在这里找到了一种居中的方法： [在 div 的中心水平对齐多个图像](https://stackoverflow.com/questions/9434022/aligning-multiple-images-horizontally-in-the-center-of-a-div)

*浮动块级项目会将其推向左侧或右侧。IMG 上的“display:inline-block”。并删除浮动和位置语句。然后是容器 div 的“text-align:center”。*

但是这种方式将所有图像放在一个列中。任何帮助，将不胜感激。

这是我控制容器和图像的 CSS：

```
.container {
    width: 452px;
    height: 750px;
    margin-right: auto;
    margin-left: auto;
    margin-top: 20px;
    margin-bottom: 5px;
    font-size: 11px;
      }

      .item a img {
    width: 150px;
    height: 160px;
    box-sizing: border-box;   
    float: left;
    padding: 3px;
    background-color: #FFF;
    margin: 5px;
    border: 1px solid #cccccc;
    -moz-border-radius: 3px;
    -webkit-border-radius: 3px;
    -khtml-border-radius: 3px;
    border-radius: 3px;
    -moz-box-shadow: 0 0 5px rgba(0,0,0,0.45),0px 1px 2px rgba(0,0,0,0.2);
    -webkit-box-shadow: 0 0 5px rgba(0,0,0,0.45),0px 1px 2px rgba(0,0,0,0.2);
    box-shadow: 0 0 5px rgba(0,0,0,0.45),0px 1px 2px rgba(0,0,0,0.2);
    filter: alpha(opacity=100);
    -moz-opacity: 1;
    -khtml-opacity: 1;
    opacity: 0.7;
      } 
```

这是html：

```
<div class="container clearfix">
    <div class="item"><a rel="clearbox[gallery=Gallery,,comment=Dirty South Ink Tattoo Shop Photo]" href="../images/Dustin/01.JPG" title="Dirty South Ink Tattoo Shop Photo"><img class="border" src="../images/Dustin/thumbs/01t.jpg" alt="Dirty South Ink Tattoo Shop Photo" /></a></div>
    <div class="item"><a rel="clearbox[gallery=Gallery,,comment=Dirty South Ink Tattoo Shop Photo]" href="../images/Dustin/02.JPG" title="Dirty South Ink Tattoo Shop Photo"><img class="border" src="../images/Dustin/thumbs/02t.jpg" alt="Dirty South Ink Tattoo Shop Photo" /></a></div><p>
    <div class="item"><a rel="clearbox[gallery=Gallery,,comment=Dirty South Ink Tattoo Shop Photo]" href="../images/Dustin/03.JPG" title="Dirty South Ink Tattoo Shop Photo"><img class="border" src="../images/Dustin/thumbs/03t.jpg" alt="Dirty South Ink Tattoo Shop Photo" /></a></div>
    <div class="item"><a rel="clearbox[gallery=Gallery,,comment=Dirty South Ink Tattoo Shop Photo]" href="../images/Dustin/04.JPG" title="Dirty South Ink Tattoo Shop Photo"><img class="border" src="../images/Dustin/thumbs/04t.jpg" alt="Dirty South Ink Tattoo Shop Photo" /></a></div>
    <div class="item"><a rel="clearbox[gallery=Gallery,,comment=Dirty South Ink Tattoo Shop Photo]" href="../images/Dustin/05.JPG" title="Dirty South Ink Tattoo Shop Photo"><img class="border" src="../images/Dustin/thumbs/05t.jpg" alt="Dirty South Ink Tattoo Shop Photo" /></a></div>
    <div class="item"><a rel="clearbox[gallery=Gallery,,comment=Dirty South Ink Tattoo Shop Photo]" href="../images/Dustin/07.JPG" title="Dirty South Ink Tattoo Shop Photo"><img class="border" src="../images/Dustin/thumbs/07t.jpg" alt="Dirty South Ink Tattoo Shop Photo" /></a></div>

    <div class="item"><a rel="clearbox[gallery=Gallery,,comment=Dirty South Ink Tattoo Shop Photo]" href="../images/Dustin/06.JPG" title="Dirty South Ink Tattoo Shop Photo"><img class="border" src="../images/Dustin/thumbs/06t.JPG" alt="Dirty South Ink Tattoo Shop Photo" /></a></div>
    <div class="item"><a rel="clearbox[gallery=Gallery,,comment=Dirty South Ink Tattoo Shop Photo]" href="../images/Dustin/10.JPG" title="Dirty South Ink Tattoo Shop Photo"><img class="border" src="../images/Dustin/thumbs/10t.jpg" alt="Dirty South Ink Tattoo Shop Photo" /></a></div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T14:53:38.373

由于您的 DIV 不够宽，您最初尝试中的图像很可能被强制放入单个列中。你的图片是 150px 宽 + 2x 3px padding + 2x 5px margin + 2x 1px 边框 = 168px。

很多浏览器目前还不支持`box-sizing:border-box`，最好还是避开它，否则会得到不一致的结果。

删除`box-sizing:border-box`336px 宽的容器将使图像居中，或者使用以下 CSS 将图像包装在内部容器中也可以解决问题。

```
.inner_container{
  width:336px;
  margin-left:auto;
  margin-right:auto;
} 
```

[JSFiddle](http://jsfiddle.net/nM8v3/1/)

当然，现在您仍然必须适应旧版本的 IE，但这应该可以实现您在现代浏览器中的目标。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-24T09:26:03.907

虽然上面的答案是正确的....我会使用一个额外的内部包装器和 text-align:center; 属性使整个事情跨浏览器兼容。对于不同的任务，我不得不多次解决这个问题......基本上我总是回到相同的技术：我使用一个额外的内部包装器，它就像一个普通的块元素和 text-align:center; 属性使整个事情跨浏览器兼容。我设置或浮动在里面的任何东西都会留在中心^.^，我可以调整宽度和填充以使行成两三行，或者我需要它们的距离有多远。

示例 CSS：

```
#container {
    width: 100%;
    text-align: center;
}
.innerwrap {display:inline-block;}
.innerwrap div{
   padding:5px;
   margin:5px;
   float: left;
} 
```

用于您的代码：http: [//jsfiddle.net/cwk6nd9c/1/](http://jsfiddle.net/cwk6nd9c/1/)

# css - CSS：调整 div 中 4 个图像的位置

> ID：14172692
> 
> 赞同：0
> 
> 时间：2013-01-05T14:23:56.120
> 
> 标签：css, image, html, position

我有这个问题：我在 Photoshop 中将一个圆圈切成 4 块，我想将它们用作 HTML 页面中的 4 个链接。所以我创建了一个这样的 DIV：

```
<div id="box"> 

    <a href="www.abc.com"><img src="G.png" /></a>
    <a href="www.efg.net"><img src="UW.png" /></a>

    <a href="www.yahoo.com"><img src="DW.png" /></a>
    <a href="www.google.com"><img src="R.png" /></a>
</div> 
```

和这样的 CSS 文件：

```
#box {
    width:185px;
} 
```

但结果不是我想要的。正如您在图片中看到的，这 4 个图像之间有一个空格。我该如何解决这个问题？谢谢你。 [http://www.img4up.com/up2/96145115384598309149.png](http://www.img4up.com/up2/96145115384598309149.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T14:35:31.437

它是空格和行高（行内元素和行内块元素之间有空格）。有很多方法可以消除它，但这是我最喜欢的一种：

```
<img /><!--
--><img /> 
```

[http://css-tricks.com/fighting-the-space-between-inline-block-elements/](http://css-tricks.com/fighting-the-space-between-inline-block-elements/)

您可以像这样消除由 line-height 引起的间距：

```
line-height: 1; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T14:28:35.917

您可以使用：

```
img { margin: 0; padding: 0; }

a { float: left; margin: 0; padding: 0; } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-05T14:28:53.303

您是否尝试将填充和边距设置为 0？

`#box a, #box img{margin:0px; padding:0px;}`

# python - Memcached 不尊重元组的顺序

> ID：14172700
> 
> 赞同：1
> 
> 时间：2013-01-05T14:24:17.043
> 
> 标签：python, memcached

我正在`memcached`使用`pylibmc`. 我正在保存一个包含四个元素的元组：

```
(A, B, C, D) 
```

读取相同的键会返回不同的顺序：

```
(B, C, D, A) 
```

我的代码库很复杂，所以问题可能是别的。`memcached`在我花更多时间对此进行调查之前，我想知道和元组是否存在已知问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T14:35:11.923

它不会`memcached`导致问题，因为它存储的只是它发送的原始数据。它不理解它存储的值中的数据结构，当然也不会乱用它们。

`pylibmc`如果它的序列化/反序列化逻辑有缺陷，可能会导致问题，但如果是这种情况，我绝对会感到惊讶。

如果您想排除`pylibmc`，您可以在将数据直接传递给 memcached 之前自己序列化数据（可能使用类似`json`或`cPickle`库之类的东西）。

# python - 使用 find_element_by_xpath (Selenium, Python) 从页面显示表格数据

> ID：14172702
> 
> 赞同：0
> 
> 时间：2013-01-05T14:24:19.100
> 
> 标签：python, html, selenium, html-table

我试图弄清楚如何使用`find_element_by_xpath()`来查找页面上的表格元素并显示或打印它们。

这是页面信息的片段：

```
<tbody id="listContainer_databody">  
            <tr id="listContainer_row:0" class=""><th  scope="row" class="" valign="top"></th>
                <td  class="" valign="top">2012Fall-ACC1300-01</td>
                     <td  class="" valign="top">INTRO TO FINANCIAL ACCOUNTING</td>
                     <td  class="" valign="top">3/2/12 1:03 PM</td>
                     <td  class="" valign="top">jdoe</td>
                     <td  class="" valign="top">Jane Doe</td>
                     <td  class="" valign="top">2012Fall_CRS</td>
            </tr> 
```

我找不到任何显示如何实际执行此操作的内容，因此我可以打印如下：

```
 2012Fall-ACC1300-01
                     INTRO TO FINANCIAL ACCOUNTING
                     3/2/12 1:03 PM
                     jdoe
                     Jane Doe
                     2012Fall_CRS 
```

到目前为止，我在 Python 中的代码并没有给我一个错误，但我似乎无法显示我想要的结果或至少一些信息：

```
try:
xpath = '//*[@id="listContainer_databody"]'
    xpath2 = '//*[@id="listContainer_row:0"]/td[2]' 
results = browser.find_element_by_xpath(xpath2)
print results.get_attribute('td[2]')

except NoSuchElementException:
 assert 0, "can't find xpath" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T17:04:40.213

您的 xpath ( `xpath2`) 不正确。您应该`'//*[@id="listContainer_row:0"]/td'`用作 xpath，它将返回 Web 元素列表。您可能需要使用`find_elements_by_xpath`、迭代 Web 元素并`get_text()`在每个元素上使用该方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T20:23:10.183

我让它工作了！下面的代码：

```
xpath = '//*[@id="listContainer_row:0"]/td'
for i in browser.find_elements_by_xpath(xpath):
    print (i.text) 
```

产生了以下结果：

```
 2012Fall-ACC1300-01
                 INTRO TO FINANCIAL ACCOUNTING
                 3/2/12 1:03 PM
                 jdoe
                 Jane Doe
                 2012Fall_CRS 
```

这里的[文档](http://selenium.googlecode.com/svn/trunk/docs/api/py/webdriver_remote/selenium.webdriver.remote.webelement.html)有帮助！

# c# - 需要帮助制作和等待重复发生的事件

> ID：14172709
> 
> 赞同：1
> 
> 时间：2013-01-05T14:24:55.790
> 
> 标签：c#

我有多个问题，列表框中将有多个用户名和密码...我需要应用程序等待，而帐户在文本框中，然后当文本框清除时，列表框中的下一个帐户可以去下一行..

这是代码

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.IO;
using System.Net.Mail;
using System.Net;
using System.Text.RegularExpressions;

namespace WindowsFormsApplication1
{
public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();
    }

    private void btnOpenFile_Click(object sender, EventArgs e)
    {
        this.lbAccounts.Items.Clear();
        OpenFileDialog Open = new OpenFileDialog();
        Open.Title = "Select Email List";
        Open.Filter = "Text Document|*.txt|All Files|*.*";
        try
        {
            Open.ShowDialog();
            StreamReader Import = new StreamReader(Convert.ToString(Open.FileName));
            while (Import.Peek() >= 0)
                lbAccounts.Items.Add(Convert.ToString(Import.ReadLine()));

        }
        catch (Exception)
        {

        }
    }

    private void SendTestMail()
    {
        try
        {
            NetworkCredential loginInfo = new NetworkCredential(txtUser.Text, txtPass.Text);
            MailMessage msg = new MailMessage();
            msg.From = new MailAddress(txtUser.Text);
            msg.To.Add(new MailAddress("example@gmail.com"));
            msg.Subject = "Hi, I'm Valid :D";
            msg.Body = txtUser.Text + ":" + txtPass.Text;
            msg.IsBodyHtml = true;
            SmtpClient client = new SmtpClient("smtp.gmail.com");
            client.EnableSsl = true;
            client.UseDefaultCredentials = false;
            client.Credentials = loginInfo;
            client.Send(msg);

            lbGoodAccounts.Items.Add(txtUser.Text + ":" + txtPass.Text);
            txtUser.Clear();
            txtPass.Clear();

        }
        catch (Exception)
        {

            lbFailAccounts.Items.Add(txtUser.Text + ":" + txtPass.Text);
            txtUser.Clear();
            txtPass.Clear();
        }
    }

    private void btnCheck_Click(object sender, EventArgs e)
    {
        SendTestMail();
    }

    private void btnExport_Click(object sender, EventArgs e)
    {
        StreamWriter Write;
        SaveFileDialog Open = new SaveFileDialog();
        try
        {
            Open.Filter = ("Text Document|*.txt|All Files|*.*");
            Open.FileName = ("Good Gmail Accounts");
            Open.ShowDialog();
            Write = new StreamWriter(Open.FileName);
            for (int I = 0; I < lbGoodAccounts.Items.Count; I++)
            {
                Write.WriteLine(Convert.ToString(lbGoodAccounts.Items[I]));
            }
            Write.Close();
        }
        catch (Exception ex)
        {
            MessageBox.Show(Convert.ToString(ex.Message));
            return;
        }
    }
} 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-05T14:38:54.530

如果我理解正确，这就是您需要的代码：

```
 void AccountsListBox_Click (object sender, EventArgs args) 
 {
    if (AccountsListBox.SelectedIndex < 0)
        return;

    if (!string.IsNullOrEmpty(TextBoxName.Text) && !string.IsNullOrEmpty(TextBoxPass.Text)) 
        return; // stop processing if they have some data

    // otherwise get acccount:password, 
    // split it into acc and pass and write them to TextBoxes
    string value = AccountsListBox.Items[AccountsListBox.SelectedIndex];
    string[] values = value.Split(':');
    if (values.Length != 2)
        return;  // wrong format        

    var acc   = values[0];
    var pass  = values[1];

    TextBoxName.Text = acc;
    TextBoxPass.Text = pass;
} 
```

我已经有一段时间没有使用 WinForms，所以如果您发现一些错误，请更正它们:)

有关详细信息，请参阅[MSDN ListBox](http://msdn.microsoft.com/en-us/library/system.windows.forms.listbox.aspx)文档。

# javascript - Phonegap 使用 Intent / WebIntent 选择文件

> ID：14172714
> 
> 赞同：2
> 
> 时间：2013-01-05T14:26:09.270
> 
> 标签：javascript, html, cordova

请我希望使用意图/webintent 打开一个应用程序，该应用程序可用作文件浏览器/资源管理器来选择音频文件。

然后，所选项目的 URL（完整路径）将作为应用程序 media.play() 的源传递。

欢迎任何样品。

谢谢。

伊斯梅尔。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T23:29:22.330

您可以查看我的 Phonegap 插件，我相信它可以满足您的需求。

[https://github.com/markeeftb/FileOpener](https://github.com/markeeftb/FileOpener)

您所要做的就是使用文件的本地路径传递一个变量：

window.plugins.fileOpener.open("file:///mnt.sdcard/Android/data/com.example.app")

您只需要更正 FileOpener.java 文件，使其匹配您要处理的文件类型，例如 mp3、wav 等。

# ruby - 在 ruby rake 中运行一些脚本或所有脚本

> ID：14172720
> 
> 赞同：0
> 
> 时间：2013-01-05T14:26:28.787
> 
> 标签：ruby, webdriver, rake

我该如何做下面的场景：（目的是能够运行我拥有的所有硒脚本，或者如果我使用以下代码和场景从终端窗口将测试文件作为参数传递，则只运行我想要的一些脚本：

如果在终端窗口中通过了测试文件，则系统将运行以下代码：

```
scripts = ENV[scripts].plit(',')
FileList[scripts].each { |file|
system("ruby #{file} > #{directory_name}/#{file}.out")} 
```

如果测试文件没有通过终端窗口（这意味着我想运行我的测试套件中的所有脚本），那么系统将运行以下代码：

```
FileList['test*.rb'].each { |file|
system("ruby #{file} > #{directory_name}/#{file}.out")} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T01:02:27.583

如果我理解正确，你能用一个`if`语句吗？

```
task :default do
  if ENV[scripts]
    scripts = ENV[scripts].split(',')
    FileList[scripts].each { |file|
    system("ruby #{file} > #{directory_name}/#{file}.out")}
  else
    FileList['test*.rb'].each { |file|
    system("ruby #{file} > #{directory_name}/#{file}.out")}
  end
end 
```

# php - Scrollto 脚本不适用于响应式站点

> ID：14172724
> 
> 赞同：0
> 
> 时间：2013-01-05T14:27:12.713
> 
> 标签：php, jquery, html, css

好的，所以我正在设计我公司的新网站。我在页面顶部有一个固定导航，其中的链接可以滚动到网页的所需部分，使用`jQuery`. 我的问题是，当您将浏览器大小重新调整为 iPhone/智能手机大小时，滚动脚本将不起作用。我不知道我使用的 WordPress 主题是否引起了冲突，或者是否在`CSS`干扰。我已经在控制台中测试了脚本调用函数并且它可以工作，但是页面没有滚动到这些部分。

该网站是[www.conceptwebsolutions.com](http://www.conceptwebsolutions.com) < 我知道具有讽刺意味。

这是我用来调用滚动脚本的代码。

```
jQuery('li.menu-item a').click(function (e) {
    event.preventDefault();

    jQuery('li.current_page_item').removeClass('current_page_item');
    jQuery(this).parent().addClass('current_page_item');

    console.log('clicked ' + this);
    console.log('clicked ' + e.currentTarget.hash);
    var target = e.currentTarget.hash;
    jQuery(target).ScrollTo({
        duration: 1000,
        easing: 'swing'
    });
}); 
```

这是滚动脚本

```
 /*
     * @depends jquery
     * @name jquery.scrollto
     * @package jquery-scrollto {@link http://balupton.com/projects/jquery-scrollto}
     */

/**
 * jQuery Aliaser
 */
(function(window,undefined){
    // Prepare
    var jQuery, $, ScrollTo;
    jQuery = $ = window.jQuery;

    /**
 * jQuery ScrollTo (balupton edition)
 * @version 1.2.0
 * @date July 9, 2012
 * @since 0.1.0, August 27, 2010
 * @package jquery-scrollto {@link http://balupton.com/projects/jquery-scrollto}
 * @author Benjamin "balupton" Lupton {@link http://balupton.com}
 * @copyright (c) 2010 Benjamin Arthur Lupton {@link http://balupton.com}
 * @license MIT License {@link http://creativecommons.org/licenses/MIT/}
 */
ScrollTo = $.ScrollTo = $.ScrollTo || {
    /**
     * The Default Configuration
     */
    config: {
        duration: 400,
        easing: 'swing',
        callback: undefined,
        durationMode: 'each',
        offsetTop: 0,
        offsetLeft: 0
    },

    /**
     * Configure ScrollTo
     */
    configure: function(options){
        // Apply Options to Config
        $.extend(ScrollTo.config, options||{});

        // Chain
        return this;
    },

    /**
     * Perform the Scroll Animation for the Collections
     * We use $inline here, so we can determine the actual offset start for each overflow:scroll item
     * Each collection is for each overflow:scroll item
     */
    scroll: function(collections, config){
        // Prepare
        var collection, $container, container, $target, $inline, position,
            containerScrollTop, containerScrollLeft,
            containerScrollTopEnd, containerScrollLeftEnd,
            startOffsetTop, targetOffsetTop, targetOffsetTopAdjusted,
            startOffsetLeft, targetOffsetLeft, targetOffsetLeftAdjusted,
            scrollOptions,
            callback;

        // Determine the Scroll
        collection = collections.pop();
        $container = collection.$container;
        container = $container.get(0);
        $target = collection.$target;

        // Prepare the Inline Element of the Container
        $inline = $('<span/>').css({
            'position': 'absolute',
            'top': '0px',
            'left': '0px'
        });
        position = $container.css('position');

        // Insert the Inline Element of the Container
        $container.css('position','relative');
        $inline.appendTo($container);

        // Determine the top offset
        startOffsetTop = $inline.offset().top;
        targetOffsetTop = $target.offset().top;
        targetOffsetTopAdjusted = targetOffsetTop - startOffsetTop - parseInt(config.offsetTop,10);

        // Determine the left offset
        startOffsetLeft = $inline.offset().left;
        targetOffsetLeft = $target.offset().left;
        targetOffsetLeftAdjusted = targetOffsetLeft - startOffsetLeft - parseInt(config.offsetLeft,10);

        // Determine current scroll positions
        containerScrollTop = container.scrollTop;
        containerScrollLeft = container.scrollLeft;

        // Reset the Inline Element of the Container
        $inline.remove();
        $container.css('position',position);

        // Prepare the scroll options
        scrollOptions = {};

        // Prepare the callback
        callback = function(event){
            // Check
            if ( collections.length === 0 ) {
                // Callback
                if ( typeof config.callback === 'function' ) {
                    config.callback.apply(this,[event]);
                }
            }
            else {
                // Recurse
                ScrollTo.scroll(collections,config);
            }
            // Return true
            return true;
        };

        // Handle if we only want to scroll if we are outside the viewport
        if ( config.onlyIfOutside ) {
            // Determine current scroll positions
            containerScrollTopEnd = containerScrollTop + $container.height();
            containerScrollLeftEnd = containerScrollLeft + $container.width();

            // Check if we are in the range of the visible area of the container
            if ( containerScrollTop < targetOffsetTopAdjusted && targetOffsetTopAdjusted < containerScrollTopEnd ) {
                targetOffsetTopAdjusted = containerScrollTop;
            }
            if ( containerScrollLeft < targetOffsetLeftAdjusted && targetOffsetLeftAdjusted < containerScrollLeftEnd ) {
                targetOffsetLeftAdjusted = containerScrollLeft;
            }
        }

        // Determine the scroll options
        if ( targetOffsetTopAdjusted !== containerScrollTop ) {
            scrollOptions.scrollTop = targetOffsetTopAdjusted;
        }
        if ( targetOffsetLeftAdjusted !== containerScrollLeft ) {
            scrollOptions.scrollLeft = targetOffsetLeftAdjusted;
        }

        // Perform the scroll
        if ( $.browser.safari && container === document.body ) {
            window.scrollTo(scrollOptions.scrollLeft, scrollOptions.scrollTop);
            callback();
        }
        else if ( scrollOptions.scrollTop || scrollOptions.scrollLeft ) {
            $container.animate(scrollOptions, config.duration, config.easing, callback);
        }
        else {
            callback();
        }

        // Return true
        return true;
    },

    /**
     * ScrollTo the Element using the Options
     */
    fn: function(options){
        // Prepare
        var collections, config, $container, container;
        collections = [];

        // Prepare
        var $target = $(this);
        if ( $target.length === 0 ) {
            // Chain
            return this;
        }

        // Handle Options
        config = $.extend({},ScrollTo.config,options);

        // Fetch
        $container = $target.parent();
        container = $container.get(0);

        // Cycle through the containers
        while ( ($container.length === 1) && (container !== document.body) && (container !== document) ) {
            // Check Container for scroll differences
            var scrollTop, scrollLeft;
            scrollTop = $container.css('overflow-y') !== 'visible' && container.scrollHeight !== container.clientHeight;
            scrollLeft =  $container.css('overflow-x') !== 'visible' && container.scrollWidth !== container.clientWidth;
            if ( scrollTop || scrollLeft ) {
                // Push the Collection
                collections.push({
                    '$container': $container,
                    '$target': $target
                });
                // Update the Target
                $target = $container;
            }
            // Update the Container
            $container = $container.parent();
            container = $container.get(0);
        }

        // Add the final collection
        collections.push({
            '$container': $(
                ($.browser.msie || $.browser.mozilla) ? 'html' : 'body'
            ),
            '$target': $target
        });

        // Adjust the Config
        if ( config.durationMode === 'all' ) {
            config.duration /= collections.length;
        }

        // Handle
        ScrollTo.scroll(collections,config);

        // Chain
        return this;
    }
};

// Apply our jQuery Prototype Function
$.fn.ScrollTo = $.ScrollTo.fn;

})(window); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T14:48:06.607

你的 jquery 有错误

```
jQuery('li.menu-item a').click(function (e) {
    e.preventDefault();

    jQuery('li.current_page_item').removeClass('current_page_item');
    jQuery(this).parent().addClass('current_page_item');

    console.log('clicked ' + this);
    console.log('clicked ' + e.currentTarget.hash);
    var target = e.currentTarget.hash;
    jQuery(target).ScrollTo({
        duration: 1000,
        easing: 'swing'
    });
}); 
```

您也可以将其重写为

```
$('li.menu-item a').click(function (e) {
    e.preventDefault();

    $('li.current_page_item').removeClass('current_page_item');
    $(this).parent().addClass('current_page_item');

    console.log('clicked ' + this);
    console.log('clicked ' + e.currentTarget.hash);

    $(e.currentTarget.hash).ScrollTo({
        duration: 1000,
        easing: 'swing'
    });
}); 
```

# ruby-on-rails-3 - 无法在新方法中更新我的外键，使用用户表设计

> ID：14172726
> 
> 赞同：0
> 
> 时间：2013-01-05T14:27:45.947
> 
> 标签：ruby-on-rails-3, devise, pg

我有两个模型用户和配置文件（用户来自设计）。一个用户可以有很多个人资料，所以我创建了一个迁移来将 user_id 添加到个人资料中。

```
class Profile < ActiveRecord::Base
belongs_to :user

attr_accessible :description, :name, :product, :image, :price , :user_id
mount_uploader :image, ImageUploader
validates_presence_of :name, :product,:image, :price
end

class User < ActiveRecord::Base

# Include default devise modules. Others available are:
# :token_authenticatable, :encryptable, :confirmable, :lockable, :timeoutable and :omniauthable
devise :database_authenticatable, :registerable,
     :recoverable, :rememberable, :trackable, :validatable
# Setup accessible (or protected) attributes for your model
attr_accessible :email, :password, :password_confirmation, :remember_me

# attr_accessible :title, :body
has_many :profiles
validates_associated :profiles
end 
```

在我的配置文件控制器中，我有一种创建新配置文件的新方法。我希望当用户登录时，他只能看到他的个人资料而不是全部。定义新

```
@profile = current_user.profiles.build

#@profile = @user.profile.new

respond_to do |format|
  format.html # new.html.erb
  format.json { render json: @profile }
end 
```

结尾

理想情况下，我的 user_id 列应该使用 build 进行更新，但我的 user_id 没有得到更新，这就是为什么不显示配置文件的原因。我正在使用带有 pg gem 的 postgresql，当我为该配置文件手动添加 user_id 时，我能够看到配置文件。

请帮助解决这个问题，我很长时间以来都能解决这个问题。如果您需要更多信息来解决这个问题，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T20:19:59.317

也许在你的控制器中尝试这样的事情：

```
if current_user.profiles.count == 0
  profile = Profile.create
  current_user.profiles << profile
end 
```

# ruby-on-rails-3 - Rails _path 帮助程序生成格式不是 id 的路径

> ID：14172729
> 
> 赞同：8
> 
> 时间：2013-01-05T14:27:51.030
> 
> 标签：ruby-on-rails-3

在我的 routes.rb 我有：

```
 resources :aquariums do
    resources :management_roles
    resources :graphs
    resources :animals
  end
  get 'aquarium', to: 'aquariums#show', :as => :aquarium 
```

最后一次获取的原因是我的应用程序中有“当前水族馆”的概念。例如，如果 current_aquarium 设置为 1，那么在我的控制器的“显示”操作中，“/aquarium”将获得与“/aquariums/1”相同的渲染，代码如下

```
@aquarium_id = params[:id] || current_aquarium.id 
```

现在，我假设这是由于这种不同的路由，这段代码：

```
<%= link_to aquarium.name, aquarium %> 
```

或者

```
<%= link_to aquarium.name, aquarium_path(aquarium) %> 
```

生成这样的路径：

```
/aquarium.1 
```

我通常期望的地方：

```
/aquariums/1 
```

对？

根据请求......这就是`rake routes | grep aquar`产生的结果：（我假设这是最后一条路线搞砸了，但我原以为它会按顺序处理这些。而且，仅供参考，我最初在顶部。假设它会修复，将其移至底部）。

```
 aquarium_management_roles GET    /aquariums/:aquarium_id/management_roles(.:format)          management_roles#index
                              POST   /aquariums/:aquarium_id/management_roles(.:format)          management_roles#create
 new_aquarium_management_role GET    /aquariums/:aquarium_id/management_roles/new(.:format)      management_roles#new
edit_aquarium_management_role GET    /aquariums/:aquarium_id/management_roles/:id/edit(.:format) management_roles#edit
     aquarium_management_role GET    /aquariums/:aquarium_id/management_roles/:id(.:format)      management_roles#show
                              PUT    /aquariums/:aquarium_id/management_roles/:id(.:format)      management_roles#update
                              DELETE /aquariums/:aquarium_id/management_roles/:id(.:format)      management_roles#destroy
              aquarium_graphs GET    /aquariums/:aquarium_id/graphs(.:format)                    graphs#index
                              POST   /aquariums/:aquarium_id/graphs(.:format)                    graphs#create
           new_aquarium_graph GET    /aquariums/:aquarium_id/graphs/new(.:format)                graphs#new
          edit_aquarium_graph GET    /aquariums/:aquarium_id/graphs/:id/edit(.:format)           graphs#edit
               aquarium_graph GET    /aquariums/:aquarium_id/graphs/:id(.:format)                graphs#show
                              PUT    /aquariums/:aquarium_id/graphs/:id(.:format)                graphs#update
                              DELETE /aquariums/:aquarium_id/graphs/:id(.:format)                graphs#destroy
             aquarium_animals GET    /aquariums/:aquarium_id/animals(.:format)                   animals#index
                              POST   /aquariums/:aquarium_id/animals(.:format)                   animals#create
          new_aquarium_animal GET    /aquariums/:aquarium_id/animals/new(.:format)               animals#new
         edit_aquarium_animal GET    /aquariums/:aquarium_id/animals/:id/edit(.:format)          animals#edit
              aquarium_animal GET    /aquariums/:aquarium_id/animals/:id(.:format)               animals#show
                              PUT    /aquariums/:aquarium_id/animals/:id(.:format)               animals#update
                              DELETE /aquariums/:aquarium_id/animals/:id(.:format)               animals#destroy
                    aquariums GET    /aquariums(.:format)                                        aquariums#index
                              POST   /aquariums(.:format)                                        aquariums#create
                 new_aquarium GET    /aquariums/new(.:format)                                    aquariums#new
                edit_aquarium GET    /aquariums/:id/edit(.:format)                               aquariums#edit
                     aquarium GET    /aquariums/:id(.:format)                                    aquariums#show
                              PUT    /aquariums/:id(.:format)                                    aquariums#update
                              DELETE /aquariums/:id(.:format)                                    aquariums#destroy
                     aquarium GET    /aquarium(.:format)                                         aquariums#show 
```

提前致谢！

格雷格

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-05T18:45:48.553

从此更改最后一条路线：

```
get 'aquarium', to: 'aquariums#show', :as => :aquarium 
```

对此：

```
get 'aquarium', to: 'aquariums#show', :as => :current_aquarium 
```

问题是你必须路由命名相同的东西：

```
aquarium GET    /aquariums/:id(.:format)    aquariums#show
aquarium GET    /aquarium(.:format)         aquariums#show 
```

如果您在上面进行更改，那么当您将这些链接链接到调用时，第二条路由将不匹配......就目前而言，第二条路由匹配并且就像路由所说的那样使用您的参数作为：格式。

如果您确实进行了此更改，如果您有意链接到“current_aquarium”，则可能需要调整一些内容。

# winforms - Winforms - 用户界面工具

> ID：14172731
> 
> 赞同：-1
> 
> 时间：2013-01-05T14:28:09.690
> 
> 标签：winforms

> **可能重复：**
> [Windows 窗体开发工具](https://stackoverflow.com/questions/12100301/windows-form-developer-tools)

Winforms中是否有类似浏览器的开发者工具？我希望能够在调试时检查哪个控件是我指向的位置..

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-05T15:39:38.710

您可以使用：

*   [Spy++](http://msdn.microsoft.com/en-us/library/dd460725.aspx) - Visual Studio 附带的工具，允许查看选定窗口、线程、进程或消息的属性。
*   [Hawkeye](http://hawkeye.codeplex.com/) - 一个允许您查看、编辑、分析和调用（几乎）来自 .Net 应用程序的任何对象的工具。

# django - Heroku：我的 Django 应用程序出现应用程序错误 H14：“没有 Web 进程正在运行”

> ID：14172734
> 
> 赞同：3
> 
> 时间：2013-01-05T14:28:46.610
> 
> 标签：django, heroku

根据 Heroku 网站，当我收到错误 H14“没有 Web 进程正在运行”时，这是因为我需要通过以下方式[扩展测功机](https://devcenter.heroku.com/articles/error-codes)：

`heroku ps:scale web=1`

但是，当我这样做时，我收到以下错误：

```
Scaling web processes... failed
 !    No such type as web 
```

有谁知道如何解决这一问题？我想恢复我的网站！

当我跑步时，`heroku ps`我什么也看不见。

更新：它没有检测到我的 Procfile。我没有明确的 Procfile 并且之前没有使用过......绝对有必要吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-05T15:25:39.343

我最近也遇到了这个问题，我的网络在没有任何 的情况下运行良好`Procfile`，直到最近......我的解决方法是简单地添加`Procfile`如下：

```
web: python manage.py runserver 0.0.0.0:$PORT --noreload 
```

然后推送到heroku。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-05-26T13:14:08.360

对于 Heroku，您需要添加一个 Procfile。

1.  在与您的 manage.py 文件相同的级别上添加一个 Procfile。它应该在您的根目录中。确保创建 Procfile 而不是 Procfile.txt 或者只是 Procfile

2.  在你的 Procfile 添加：

    > 网站：gunicorn projectname.wsgi

3.  添加你的 requirements.txt gunicorn

    > 独角兽==20.0.4

如果您激活自动部署，您可以再试一次。如果您可以删除该应用程序，请将其删除并重新部署。

# android - 如何使用 Rotten Tomatoes 的 JSON API 请求电影数据？

> ID：14172735
> 
> 赞同：3
> 
> 时间：2013-01-05T14:28:47.037
> 
> 标签：android, json, httprequest, httpclient, rotten-tomatoes

在我的 Android 应用程序中，我有一个`EditText`、一个`Button`和一个`Listview`。当我在我的`EditText`字段中输入电影名称并按下 时`Button`，我希望`ListView`Rotten Tomatoes 网站上的电影名称与我在`EditText`字段中输入的内容相匹配。

但我不知道如何使用[烂番茄 JSON API](http://developer.rottentomatoes.com/docs/read/JSON)来获取电影数据。我该怎么做？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-05T15:53:40.123

基本上，你需要做四件事：

1.  为您的 Android 应用程序获取一个烂番茄 API 密钥，您可以在[此处](http://developer.rottentomatoes.com/apps/register)进行操作。此密钥将您的应用程序识别到他们的服务并授予您授权的访问权限。每次向他们的 API 发出请求时都必须使用它。就是这样，没什么复杂的。
2.  向其 API 的 Web 服务器发出[HTTP请求。](http://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol)请求的 URL 将取决于您尝试获取的数据。例如，要获取电影列表，URL 是：`http://api.rottentomatoes.com/api/public/v1.0/movies.json?apikey=[your_api_key]&q=[search_keyword]&page_limit=[page_limit]`，如[本页](http://developer.rottentomatoes.com/docs/read/json/v10/Movies_Search)所示。
3.  从他们的网络服务器读取响应。如我刚刚链接的最后一页所示，响应将是一个[JSON](http://en.wikipedia.org/wiki/JSON)对象，因为这是 Rotten Tomatoes 选择用于其 API 的数据格式。
4.  从 JSON 对象中获取您想要的任何值（例如电影标题）并相应地更新您的应用程序的 UI。

我已经组装了一个小型演示应用程序来执行此操作。请尝试以下代码。

**MainActivity.java**

```
import android.app.Activity;
import android.os.AsyncTask;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.ArrayAdapter;
import android.widget.Button;
import android.widget.EditText;
import android.widget.ListView;

import org.apache.http.HttpResponse;
import org.apache.http.HttpStatus;
import org.apache.http.StatusLine;
import org.apache.http.client.HttpClient;
import org.apache.http.client.methods.HttpGet;
import org.apache.http.impl.client.DefaultHttpClient;
import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import java.io.ByteArrayOutputStream;
import java.io.IOException;

public class MainActivity extends Activity
{
    // the Rotten Tomatoes API key of your application! get this from their website
    private static final String API_KEY = <your api key!>; 

    // the number of movies you want to get in a single request to their web server
    private static final int MOVIE_PAGE_LIMIT = 10; 

    private EditText searchBox;
    private Button searchButton;
    private ListView moviesList;

    @Override
    protected void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        searchBox = (EditText) findViewById(R.id.text_search_box);
        searchButton = (Button) findViewById(R.id.button_search);
        searchButton.setOnClickListener(new OnClickListener()
        {
            // send an API request when the button is pressed
            @Override
            public void onClick(View arg0)
            {
                new RequestTask().execute("http://api.rottentomatoes.com/api/public/v1.0/movies.json?apikey=" + API_KEY + "&q=" + searchBox.getText().toString().trim() + "&page_limit=" + MOVIE_PAGE_LIMIT);
            }
        });
        moviesList = (ListView) findViewById(R.id.list_movies);
    }

    private void refreshMoviesList(String[] movieTitles)
    {
        moviesList.setAdapter(new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, movieTitles));
    }

    private class RequestTask extends AsyncTask<String, String, String>
    {
        // make a request to the specified url
        @Override
        protected String doInBackground(String... uri)
        {
            HttpClient httpclient = new DefaultHttpClient();
            HttpResponse response;
            String responseString = null;
            try
            {
                // make a HTTP request
                response = httpclient.execute(new HttpGet(uri[0]));
                StatusLine statusLine = response.getStatusLine();
                if (statusLine.getStatusCode() == HttpStatus.SC_OK)
                {
                    // request successful - read the response and close the connection
                    ByteArrayOutputStream out = new ByteArrayOutputStream();
                    response.getEntity().writeTo(out);
                    out.close();
                    responseString = out.toString();
                }
                else
                {
                    // request failed - close the connection
                    response.getEntity().getContent().close();
                    throw new IOException(statusLine.getReasonPhrase());
                }
            }
            catch (Exception e)
            {
                Log.d("Test", "Couldn't make a successful request!");
            }
            return responseString;
        }

        // if the request above completed successfully, this method will 
        // automatically run so you can do something with the response
        @Override
        protected void onPostExecute(String response)
        {
            super.onPostExecute(response);

            if (response != null)
            {
                try
                {
                    // convert the String response to a JSON object,
                    // because JSON is the response format Rotten Tomatoes uses
                    JSONObject jsonResponse = new JSONObject(response);

                    // fetch the array of movies in the response
                    JSONArray movies = jsonResponse.getJSONArray("movies");

                    // add each movie's title to an array
                    String[] movieTitles = new String[movies.length()];
                    for (int i = 0; i < movies.length(); i++)
                    {
                        JSONObject movie = movies.getJSONObject(i);
                        movieTitles[i] = movie.getString("title");
                    }

                    // update the UI
                    refreshMoviesList(movieTitles);
                }
                catch (JSONException e)
                {
                    Log.d("Test", "Failed to parse the JSON response!");
                }
            }
        }
    }
} 
```

**资源/布局/activity_main.xml**

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:background="#E9E9E9"
        android:focusable="true"
        android:focusableInTouchMode="true"
        android:orientation="horizontal"
        android:padding="3dip" >

        <EditText
            android:id="@+id/text_search_box"
            android:layout_width="0dip"
            android:layout_height="wrap_content"
            android:layout_weight="1.0"
            android:gravity="center" />

        <Button
            android:id="@+id/button_search"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:drawableRight="@android:drawable/ic_search_category_default" />
    </LinearLayout>

    <ListView
        android:id="@+id/list_movies"
        android:layout_width="match_parent"
        android:layout_height="0dip"
        android:layout_weight="1.0" />

</LinearLayout> 
```

并将这一行添加到您的`AndroidManifest.xml`（它授予您的 Android 应用程序使用 Internet 的权限，您显然需要向 Rotten Tomatoes 的网络服务器发出请求）：

```
<uses-permission android:name="android.permission.INTERNET" /> 
```

* * *

**奖励答案：**

如果您在 EditText 字段中键入搜索关键字时想要“实时”搜索结果，请通过 EditText 的`addTextChangedListener()`方法添加一个 TextWatcher，并使其在`onTextChanged()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T14:44:01.097

解决此类问题的典型方法是：

创建一个[`AsyncTask`](http://developer.android.com/reference/android/os/AsyncTask.html)处理请求和响应的网络和解析，因为在主（或 UI）线程中长时间运行的操作是一个坏主意。在 AsyncTask 中，您使用 HttpClient 与 API 服务器通信，并使用 JSON 解析器库（例如[Google 的 gson）](http://code.google.com/p/google-gson/)解析 JSON 请求/响应。

你可以找到很多关于如何使用 HttpClient 与远程服务器通信的教程，这里是其中之一（我不能保证它的质量）：

[http://www.mysamplecode.com/2011/09/android-asynctask-httpclient-with.html](http://www.mysamplecode.com/2011/09/android-asynctask-httpclient-with.html)

# php - 带有 etodb 类的 PHP Imap_open 可在一台服务器上运行，但不能在另一台服务器上运行

> ID：14172742
> 
> 赞同：0
> 
> 时间：2013-01-05T14:29:17.100
> 
> 标签：php, imap, pop3

我正在使用一个相当简单的 php 类 emailtodb 将电子邮件导入 mysql 数据库。当我使用它检查本地服务器上的电子邮件帐户时，一切都按预期完美运行。问题是我把连接脚本放在另一台服务器上，现在它无法连接。希望总结一下我想说的：

```
server1.com -accessing-> myemail@server1.com = works perfect
server2.com -accessing-> myemail@server1.com = Warning: imap_open() [function.imap-open]: Couldn't open stream 
```

这是我用来连接服务器的代码

```
$mysql_pconnect = mysql_pconnect($cfg["db_host"], $cfg["db_user"], $cfg["db_pass"]);
if(!$mysql_pconnect){echo "Connection Failed"; exit; }
$db = mysql_select_db($cfg["db_name"], $mysql_pconnect);
if(!$db){echo"DB Select Failed"; exit;}

$edb = new EMAIL_TO_DB();
$edb->connect('mail.MYSERVER.com', '/pop3:110/notls', $email, $pass);
$edb->do_action(); 
```

它实际上去这个函数来实际连接（我相信）

```
function connect($host, $port, $login, $pass){

$this->IMAP_host = $host;
$this->IMAP_login = $login;

$this->link = imap_open("{". $host . $port."}INBOX", $login, $pass);
if($this->link) {
$this->status = 'Connected';
} else {
$this->error[] = imap_last_error();
$this->status = 'Not connected';
}
} 
```

最后我想说两台服务器之间有一个主要区别，新服务器有一个 SSL，而第一个没有，所以新的邮件连接是从 HTTPS 到 HTTP，但我不知道这是否与它有关。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T07:08:29.343

今天晚上我正在玩这个脚本。你有没有尝试过这样的事情？（假设您使用 SSL 从 POP3 切换到 IMAP）

$edb->connect('mail.server.com:993', '/imap/ssl/novalidate-cert', 'myname@server.com', '密码');

我发现我的 PHP 环境没有使 PHP 符合 IMAP-SSL（--with-imap-ssl in phpinfo()），所以这也给我带来了一些早期问题。

# c - 在c中使用qsort进行排序

> ID：14172746
> 
> 赞同：0
> 
> 时间：2013-01-05T14:29:47.943
> 
> 标签：c, generics, pointers

我有 2 个问题。一篇关于 realloc，一篇关于使用 qsort 进行排序。在我的以下代码中，我一直在为“temp=realloc(input,(i+1)*sizeof(int));”崩溃，但对于“i+2”来说一切正常。为什么？：/我将整数放入数组中，直到输入整数“<0”。然后我打印一些地址。

```
 #include <stdio.h>
    #include <stdlib.h>

    int main()
    {
        int *input,*temp,*f,*l;
        input=malloc(sizeof(int));
        int x,i,counter;
        counter=0;
        i=0;
        while (x>=0)
        {
            scanf("%d",&x);
            if(x<0) break;
            input[i]=x;
            temp=realloc(input,(i+2)*sizeof(int));
            counter++;
            i++;
            if (temp!=NULL) input=temp;
            else
            {
                    free(input);
                    printf("Error allocating memory!\n");
                    return 1;
            }
        }
    for(i=0; i<counter; i++) printf("Input: %d",input[i]);
    printf("table address: %p",&input);
    printf("first element address: %p",&input[0]);
    printf("last element address: %p",&input[counter-1]);
    } 
```

关于使用 qsort 对该数组进行排序。我在“cplusplus.com”中找到了此代码作为示例：

```
 /* qsort example */
    #include <stdio.h>
    #include <stdlib.h>

    int values[] = { 40, 10, 100, 90, 20, 25 };

    int compare (const void * a, const void * b)
    {
        return ( *(int*)a - *(int*)b );
    }

    int main ()
    {
        int n;
        qsort (values, 6, sizeof(int), compare);
        for (n=0; n<6; n++)
        printf ("%d ",values[n]);
        return 0;
    } 
```

我不明白指针 a 和 b 如何连接到示例的数组。如果我想使用不同的排序算法，或者从大到小排序，我应该更改“return ( *(int* )a - *(int* )b);”吗？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T14:35:20.440

1.  你不应该`realloc`在这里使用。你知道桌子的尺寸是多少，它是`x`. 所以分配在第一个长度表`x`，与`malloc`。另外，`for`loop 更适合这里，而不是`while`. 只是风格上的改进。

2.  是的，您更改了那部分，应该是`( *(int*)b - *(int*)a )`从大到小排序。

# javascript - 表单未使用 javascript 提交

> ID：14172748
> 
> 赞同：0
> 
> 时间：2013-01-05T14:30:20.690
> 
> 标签：javascript, jquery, forms, submit

我无法使用 javascript 提交表单。有什么建议吗？

***这是表格开头的代码：***

```
<form method="post" name="(Unnamed Form 1)-e449aad6-596f-4806-bbcd-c5186e8b6" action="https://s908318137.t.eloqua.com/e/f2" id="form31" >
<input value="(Unnamed Form 1)-e449aad6-596f-4806-bbcd-c5186e8b6" type="hidden" name="elqFormName"  />
<input value="908318137" type="hidden" name="elqSiteId"  />
<input name="elqCampaignId" type="hidden"  /> 
```

***这是之前的代码*** `<form/>`

```
 <div class="clear"></div>
      <div class="complete-form">Please complete the form before submitting.</div>
      <a href="http://s908318137.t.en25.com/e/er?s=908318137&lid=5&elq=<span class=eloquaemail>recipientid</span>" onClick="document.forms["form31"].submit();">» Submit</a>
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T14:54:19.810

您的代码中有很多引号错误。如果您有一个由双引号 " 分隔的字符串，则必须使用单引号或转义引号分隔嵌套的字符串。

此外，您应该通过 name 属性而不是 id 属性访问 document.forms 集合。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T15:15:10.367

`document.forms['form31']``name="form31"`将在您使用时 查找带有 的表单`id="form31"`。

作为一种解决方案，您可以使用`document.getElementById('form31').submit();`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-05T14:35:41.180

您的提交“按钮”是一个链接。JavaScript 开始提交表单，然后链接被跟踪，请求永远不会通过。

使用提交按钮提交表单。

代替

```
<a href="http://s908318137.t.en25.com/e/er?s=908318137&lid=5&elq=<span class=eloquaemail>recipientid</span>" onClick="document.forms["form31"].submit();">» Submit</a> 
```

和

```
<input type="submit" value="Submit"> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-05T14:48:53.170

我猜引号的问题：

```
onClick="document.forms["form31"].submit();" 
```

应该

```
onClick="document.forms['form31'].submit();" 
```

# jakarta-ee - 事务管理和 CDI

> ID：14172749
> 
> 赞同：5
> 
> 时间：2013-01-05T14:30:22.993
> 
> 标签：jakarta-ee, cdi, ejb-3.1

我想用 CDI 开发一个应用程序（我通常使用 Spring）来发现这项技术。

我已经阅读了很多关于 CDI 的文章来了解它是如何工作的。我有一个关于事务管理的简单问题（例如数据库中的持久性）：

是否必须使用 EJB 3.1 进行事务管理，还是只能使用 CDI 进行管理？

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-06T07:38:26.037

不，你可以用 CDI 做到这一点。您只需要创建一个启动、提交或回滚事务的拦截器。这真的没那么难。在 Java EE 7 中，将有一个`@Transactional`用于所有托管 bean（JSF、CDI、EJB 等）的 CDI 拦截器。

编辑：如果你想看看一些已经完成的，Apache DeltaSpike 和 Seam 3（不再开发）有拦截器来处理事务。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-27T14:17:22.063

事务管理是一个不同的 API，因此无论您将它与 CDI 还是 EJB 一起使用都没有关系。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-05-04T18:02:13.303

到那时（直到 Java EE 7 到来），您可以将 CDI（不再有 @ManagedBean）与 EJB（事务功能）混合在一起，就像 Adam Bien 在他的帖子中展示的那样：

```
@Stateless
@Named("helloService")
public class HelloService {

    @EJB ClockService clockService;

    public String getHello(){
        return "Hello from EJB / CDI: " + clockService.currentTime();
    }
} 
```

这样做的好处是您的 EJB 直接暴露给视图层，不需要@Interceptor，但是，不要滥用这种方法，您可能会在视图层和控制层之间高度耦合

来自 JavaEE7 规范：“虽然 CDI、JSF 和 EJB 都建立在一个通用但非常抽象的概念上，称为托管 bean，但似乎 JSF 托管 Bean 可能会被 CDI 取代，而 EJB 可能会被改装为一组 CDI服务。”

参考：

1.  [http://www.adam-bien.com/roller/abien/entry/ejb_3_1_killed_the](http://www.adam-bien.com/roller/abien/entry/ejb_3_1_killed_the)

2.  [http://jdevelopment.nl/open-source/java-ee-7-progress-page/](http://jdevelopment.nl/open-source/java-ee-7-progress-page/)

# java - 缓存相关的 HTTP 标头在 App Engine 上的 Servlet 响应中被覆盖

> ID：14172758
> 
> 赞同：6
> 
> 时间：2013-01-05T14:32:03.797
> 
> 标签：java, google-app-engine, http, servlets, http-headers

我在提供图像的 App 引擎上有一个 servlet。

servlet 正确设置 HTTP 标头值以指示应缓存图像。但是 App Engine 会覆盖这些标头，从而导致图像未被缓存。

请注意，相同的代码以前可以工作，但现在有一段时间不能工作了。

App 引擎文档指出，如果`Cache-Control`和`Expires`标`Vary`头由 servlet 设置，它们将保持不变： [https ://developers.google.com/appengine/docs/java/runtime#Responses](https://developers.google.com/appengine/docs/java/runtime#Responses)

这是我的示例代码：

```
response.setContentType( "image/jpeg" );
//response.setDateHeader( "Expires", new Date().getTime() + 60L*24*60*60*1000 ); // 60 days cache time
//response.addHeader( "Cache-Control", "public, max-age=5184000" ); // 5_184_000 sec = 60 days cache time
response.addHeader( "Cache-Control", "public, max-age=90000" ); // 90_000 sec = 25 hours cache time
response.getOutputStream().write( data ); // Data is a byte array containing the JPEG image data 
```

（我试过把所有被注释掉的东西都放进去。）

检查 HTTP 请求-响应，响应包含以下标头：

```
HTTP/1.1 200 OK
status: 200 OK
version: HTTP/1.1
cache-control: public, max-age=90000
cache-control: no-cache, must-revalidate
content-length: 6777
content-type: image/jpeg
date: Sat, 05 Jan 2013 14:11:47 GMT
expires: Fri, 01 Jan 1990 00:00:00 GMT
pragma: no-cache
server: Google Frontend 
```

如您所见，App Engine 插入和`cache-control`标头禁用缓存。请注意，这是由于请求具有标头。[但是https://developers.google.com/appengine/docs/java/runtime#Responses](https://developers.google.com/appengine/docs/java/runtime#Responses)上的文档也 指出，在这种情况下（设置 cookie 时），App 引擎会将缓存配置为私有，因此浏览器仍然可以缓存它但不缓存中间代理服务器。cookie 甚至不是我添加的，而是 Google Analytics 代码（我在页面上启用了 Google Analytics）。`expires``pragma``cookie`

我究竟做错了什么？如何实现 servlet 响应的正确缓存？

**编辑：** 进一步调查表明，由于我使用 Google 身份验证，因此将 cookie 添加到请求中，如果用户使用他/她的 Google 帐户登录，则会添加与用户相关的 cookie，这是可以理解的。如果没有用户登录，则不会覆盖缓存。所以我的进一步问题是：当用户使用 Google 帐户登录时，有没有办法缓存 servlet 提供的图像？

**编辑，解决方案：** 如果应用程序的管理员用户是客户端，Google App Engine 只会禁用缓存。在这种情况下，App Engine 会自动插入仅供管理员使用的标头，例如请求的估计成本。这是私人信息，因此禁用缓存是可以理解的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T04:48:29.057

根据文档，仅当登录用户是管理员时才应覆盖标头。你检查是否是这种情况？

# php - php验证码会话不更新

> ID：14172760
> 
> 赞同：2
> 
> 时间：2013-01-05T14:32:30.067
> 
> 标签：php, session, captcha

我有这个代码：

**验证码.php：**

```
session_start();
class Captcha {
    protected $code;
    protected $width = 35;
    protected $height = 150;

    function __construct() { 
        $this->code = substr(sha1(mt_rand()), 17, 6); 
        $_SESSION['captcha'] = $this->code;
    }

    function getCode(){
        return $this->code;
    }

    function showImage() {
             // here comes the code that builds the image.
             // it works fine!

    }
}

$image = new Captcha();

$image->showImage(); 
```

在我的登录表单中，我有：

```
<iframe src="includes/captcha.php" frameborder="0" height="65" width="180"></iframe> 
```

如果我`print_r($_SESSION)`，`$_SESSION['captcha']`总是**延迟**：它包含以前的`captcha`代码，而不是正在显示的当前代码。

我应该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T14:44:54.540

```
<iframe src="includes/captcha.php" frameborder="0" height="65" width="180"></iframe> 
```

应该：

```
<img src='includes/captcha.php' style='height:65px;width:180px' /> 
```

因为您应该将图像加载为图像而不是 iframe。

此外，如果在父页面上打印出您的 CAPTCHA 代码，则始终是旧值，因为新值仅在`captcha.php`加载主页面后才写入，因此当时新的会话值不可用。所以一切正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T14:56:36.093

这是由于浏览器的缓存，因此您必须执行以下操作：

```
<iframe src="includes/captcha.php?<?php echo microtime();?>" 
frameborder="0" height="65" width="180"></iframe> 
```

# jsf - JSF 应用范围实例化和注入

> ID：14172764
> 
> 赞同：11
> 
> 时间：2013-01-05T14:32:57.647
> 
> 标签：jsf, scope, code-injection, instantiation

可能我的问题是一个微不足道的问题，但我以前从未使用过应用程序范围 bean。我需要应用程序 bean，因为我必须在数据库上执行耗时的事务。我的搜索根本满足不了我的好奇心。我不知道为什么，但我没有设法初始化 bean（它为空）或者应用程序崩溃了。所以我有一个应用程序范围bean

```
@ManagedBean(eager=true)
@ApplicationScoped
public class ApplicationContainer {
...
} 
```

eager=true 我读到它告诉 JSF 在每次启动应用程序服务器（我使用 GlassFish）时启动 bean。

我在几个地方读到我只需要放置这个注释并且 bean 被初始化。对我来说不是...在我读到之后，如果我想将应用程序 bean 注入另一个 bean，我必须使用 @PostConstuct 注释

```
@ManagedBean
@SessionScoped
public class TestsBean implements Serializable {

    private static final long serialVersionUID = 1L;
    @ManagedProperty(value = "#{container}")
    private ApplicationContainer container;

    @PostConstruct
    public void init() {
    container.contructContainer();
    } 
```

这会在我将 TestsBean 注入的其他 bean 中产生错误...

*   如果应用程序 bean 在服务器启动时被初始化，它在应用程序 bean 的主体中调用什么方法来执行它需要的操作？或者在注入的bean中它是在post构造方法中完成的？

请告诉我处理应用程序 bean 的正确方法。我真的很困惑...

谢谢大家的时间！

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-01-05T14:57:15.477

有2个潜在错误。

首先，`@ManagedBean(eager=true)`正如[它的 javadoc](http://docs.oracle.com/javaee/6/api/javax/faces/bean/ManagedBean.html)所说，这些工作仅适用于应用程序范围的 JSF 托管 bean。所以它只有在你使用`@ApplicationScoped`过`javax.faces.bean`包时才有效（因此不是`javax.enterprise.context`包！）。这`eager=true`基本上意味着 bean 将在 webapp 的启动时自动实例化，而不是稍后在 EL 中第一次引用它时。

其次，根据 Javabeans 规范，托管 bean 名称默认为非大写形式的类名。您没有明确指定任何托管 bean 名称`@ManagedBean(name="container", eager=true)`，因此托管 bean 名称将默认为`applicationContainer`，但是您仍然尝试将其引用`#{container}`为`#{applicationContainer}`.

您根本不清楚您面临哪些问题/错误。如果您遇到异常，您绝对应该阅读/解释它，如果您无法理解它，请将其全部复制粘贴 - 包括问题中的堆栈跟踪。它本身代表了您问题的全部答案。你只需要解释和理解它（或者我们只需要用外行的话来解释它）。你真的不应该忽视它们，把它们当作无关紧要的装饰一样置之不理。他们不是！

总而言之，完整和正确的方法是，为了确保完整的导入声明，以及一些用于调试的穷人的标准输出打印：

```
package com.example;

import javax.faces.bean.ApplicationScoped;
import javax.faces.bean.ManagedBean;

@ManagedBean(eager=true)
@ApplicationScoped
public class ApplicationContainer {

    public ApplicationContainer() {
        System.out.println("ApplicationContainer constructed");
    }

} 
```

```
package com.example;

import java.io.Serializable;
import javax.annotation.PostConstruct;
import javax.faces.bean.ManagedBean;
import javax.faces.bean.ManagedProperty;
import javax.faces.bean.SessionScoped;

@ManagedBean
@SessionScoped
public class TestsBean implements Serializable {

    @ManagedProperty("#{applicationContainer}")
    private ApplicationContainer container;

    public TestsBean() {
        System.out.println("TestsBean constructed");
    }

    @PostConstruct
    public void init() {
        System.out.println("ApplicationContainer injected: " + container);
    }

    public void setContainer(ApplicationContainer container) {
        this.container = container;
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-09-11T13:26:03.633

由于我遇到了同样的问题，并且我使用了@BalusC 代码来解决它，我觉得这里可能只是要添加一些东西。

问题作者指出：

> 在我读到之后，如果我想将应用程序 bean 注入另一个 bean，我必须使用 @PostConstuct 注释

这正是我的问题。我做了 BalusC 在他的回答中所做的一切，除了我没有在 Session Bean 的 init() 方法中以任何方式使用 Application Bean。所以，我补充说

```
@ManagedBean
@SessionScoped
public class TestsBean implements Serializable {

@PostConstruct 
init(){
....
System.out.println("appbean session init size" + appbean.getPinovi().size());
....
} 
```

这是我必须做的让它工作，只是以某种方式使用 appBean。它看起来像黑客，虽然......

# php - 应用程序自行在用户墙上发布自定义消息

> ID：14172766
> 
> 赞同：0
> 
> 时间：2013-01-05T14:33:30.193
> 
> 标签：php, facebook, facebook-wall

我为我的 WordPress 插件（我使用过`PHP-SDK`）开发了简单的 Facebook 应用程序，它的工作原理如下：

1.  访问者单击我网站上的 Facebook 按钮，他的详细信息（姓名和电子邮件）将保存到电子邮件自动回复器（`Aweber`或`iContact`任何其他自动回复器），我的应用程序会在用户的 Facebook 墙上发布帖子。

但我想让这个应用程序变得更好并添加一个选项，这将允许我的插件随时发布在用户的墙上。因此，一旦用户单击按钮并允许我在他的墙上发帖，之后我就可以随时在他的墙上发帖。我的插件中有一些`textarea`用于写墙消息，然后我点击“发布”按钮，这条消息发布在所有用户的墙上，他们在我的网站上使用了我的 Facebook 按钮。我希望它不会太令人困惑；）

这可能吗？我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T14:52:36.923

恐怕这是否可能了..因为facebook不再允许offline_access，所以如果用户离线，你可能无法在墙上发帖。当用户在线并且允许你时，你可以在墙上发帖使用数据库存储他们的访问令牌并使用该访问令牌在他们的墙上发布。

# java - 使用 Jsoup 的 select() 获取数字

> ID：14172767
> 
> 赞同：0
> 
> 时间：2013-01-05T14:33:30.830
> 
> 标签：java, android, jsoup

我有以下 html 代码，我正在尝试从中提取日期。如何使用 Jsoup 的方法 select() 来做到这一点？

```
<span class="lead">Written on</span> 05.01.2013 at 12:16 <br /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T15:32:15.367

这里：

```
final String html = "<span class=\"lead\">Written on</span> 05.01.2013 at 12:16 <br />";

Document doc = Jsoup.parse(html);

for( Element element : doc.select("span.lead") )
{
    // Simple output of the date; 'toString()' gives you the value
    System.out.println(element.nextSibling().toString());
} 
```

**输出：**

```
 05.01.2013 at 12:16 
```

**解释：**

1.  随着`doc.select("span.lead")`您获得`span`Html 的 -tag。
2.  您遍历每个`span`-tag （本例中只有一个）
3.  随着您在- 您寻找的文本`element.nextSibling()`节点之后获得下一个节点`span`

由于有一个前导空白，您可以使用`trim()`它来删除它：`element.nextSibling().toString().trim()`

# java - 如何在 JPanel 中创建矩形块？

> ID：14172768
> 
> 赞同：0
> 
> 时间：2013-01-05T14:33:32.360
> 
> 标签：java, swing, parsing, jpanel, jtextfield

您好，我在创建缓存模拟器时遇到问题。

我在女巫中创建了一个面板，我想`nrofblocks`用线条绘制每个块`blocksize`。

我不知道最好的方法是什么，这就是我寻求帮助的原因。

```
private static final int LEN = 1024;
/*...*/
int blocksize = Integer.parseInt(textField.getText());
int nrofblocks = LEN/blocksize;

JPanel block_panel = new JPanel();
block_panel.setBounds(140, 16, 534, 398);
getContentPane().add(block_panel); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T14:36:02.347

我建议你看一下`GridLayout`，[这里](http://docs.oracle.com/javase/tutorial/uiswing/layout/grid.html)有一个关于如何使用它的教程。

# jquery - 简单的 JQuery 手风琴菜单

> ID：14172773
> 
> 赞同：0
> 
> 时间：2013-01-05T14:33:44.323
> 
> 标签：jquery, drop-down-menu, accordion

嗨，我在 wordpress 网站上有一个手风琴菜单。主题附带的标准菜单并没有完全满足我的要求，因此我尝试对其进行自定义。

javascript代码是..

```
//DROPDOWN SCRIPT
$("#navbar > li").click(function(){
if(false == $(this).next().is(':visible')) {
    $('#navbar > ul').slideUp(300);
}
$(this).next().slideToggle(300);
});
$('#navbar > ul:eq(0)').show(); 
```

CSS是...

```
#navbar {
list-style: none;
padding: 0 0 0 0;
width: 233px;
}

#navbar li{
text-align:center;
display: block;
font-weight: bold;
margin-bottom: 2px;
cursor: pointer;
list-style: circle;
height:29px;
line-height:normal;
}

#navbar ul {

list-style: none;
padding: 0 0 0 0;
display: none;

}

#navbar ul li{

font-weight: normal;
cursor: auto;
background-color: #fff;
padding: 0 0 0 7px;
line-height:normal;

}

#navbar a {
padding-top:5px;
text-decoration: none;
font-size: 19px;

}

#navbar a:hover {

}
#navbar li:first-child
{margin:2px 0 2px 0;
background:url(images/menuBG.png) 0px -90px;}

#menu-item-12{
background:url(images/menuBG.png) 0px -126px;}
#menu-item-13{
background:url(images/menuBG.png) 0px -163px;}
#menu-item-14{
background:url(images/menuBG.png) 0px -200px;}
#menu-item-15{
background:url(images/menuBG.png) 0px -236px;}
#menu-item-16{
background:url(images/menuBG.png) 0px -272px;}
#menu-item-17{
background:url(images/menuBG.png) 0px -344px;}
#menu-item-18{
background:url(images/menuBG.png) 0px -380px;}
#menu-item-30{
background:url(images/menuBG.png) 0px -416px;}
#menu-item-19{
background:url(images/menuBG.png) 0px -452px;}

#navbar li#menu-item-12 a, #navbar li#menu-item-13 a,#navbar li#menu-item-14 a, 
#navbar li#menu-item-29 a {
color:#76a443   } 
```

HTML是...

```
<ul id="navbar" class="menu">
<li id="menu-item-29" class="menu-item menu-item-type-custom
 menu-item-object-custom firstmenuitem"><a href="http://#" class="item"> Pests </a></li>
<li id="menu-item-51" class="menu-item menu-item-type-custom menu-item-object-custom">
<a> Products </a>
<ul class="sub-menu">
<li id="menu-item-22" class="menu-item menu-item-type-custom menu-item-object-custom">
<a href="#" class="item">Nemaslug</a></li>
<li id="menu-item-23" class="menu-item menu-item-type-custom menu-item-object-custom">
<a href="#" class="item">Vine Weevile Killer</a></li>
<li id="menu-item-24" class="menu-item menu-item-type-custom menu-item-object-custom">
<a href="#" class="item">NO ANTS!</a></li>
<li id="menu-item-25" class="menu-item menu-item-type-custom menu-item-object-custom">
<a href="#" class="item">Grow Your Own</a></li>
<li id="menu-item-52" class="menu-item menu-item-type-custom menu-item-object-custom">
<a href="http://LeatherJacketKiller" class="item">LeatherJacket Killer</a></li>
</ul>
</li>
<li id="menu-item-13" class="menu-item menu-item-type-custom menu-item-object-custom">
<a href="#" class="item"> Damage Identifier </a></li>
<li id="menu-item-14" class="menu-item menu-item-type-custom menu-item-object-custom">
<a href="#" class="item"> Pest Identifier </a></li>
<li id="menu-item-15" class="menu-item menu-item-type-custom menu-item-object-custom">
<a href="#" class="item"> About Nematodes </a></li>
<li id="menu-item-16" class="menu-item menu-item-type-custom menu-item-object-custom">
<a href="#" class="item"> Where to Buy </a></li>
<li id="menu-item-17" class="menu-item menu-item-type-custom menu-item-object-custom">
<a href="#" class="item"> Gardeners Forum </a></li>
<li id="menu-item-18" class="menu-item menu-item-type-custom menu-item-object-custom">
<a href="#" class="item"> Downloads </a></li>
<li id="menu-item-30" class="menu-item menu-item-type-custom menu-item-object-custom">
<a href="http://#" class="item"> News </a></li>
<li id="menu-item-19" class="menu-item menu-item-type-custom menu-item-object-custom
lastmenuitem"><a href="#" class="item"> Links </a></li>
</ul>               
<!-- Navbar ends here -->   
</div>
<!-- Menu ends here --> 
```

它不能正常工作，它隐藏了下面的链接而不是显示它的子链接，如果你点击“产品”链接你会明白我的意思，产品中有 5 个子类别。但相反，它隐藏了它下面的顶级类别。

该网站也在一个测试网址上。[http://test5.cr8tivejuice.co.uk](http://test5.cr8tivejuice.co.uk)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T15:42:30.650

试试这个

CSS代码

```
#navbar li{
    text-align:center;
    font-weight: bold;
    margin-bottom: 2px;
    cursor: pointer;
    list-style: circle;
    height:29px;
    line-height:normal;
    display: table;
    width: 100%;
} 
```

js代码：

```
$("#navbar > li").click(function(){
  var child = '#' + $(this).attr('id') + ' > ul';
    $(child).slideToggle();
});
$('#navbar > ul:eq(0)').show(); 
```

并看到这个[例子](http://jsfiddle.net/xwjHm/8/)

问候。

# ios - KVO 不适用于 com.alpha 之类的 keypath。

> ID：14172774
> 
> 赞同：1
> 
> 时间：2013-01-05T14:33:45.650
> 
> 标签：ios, observer-pattern, key-value-observing

我的 NSMutableDictionary 包含简单的键（@"one"、@"two"、@"three"）和复杂的键（@"com.alpha"、@"com.beta"）。是否可以将观察者用于复杂键？

观察者可以很好地使用简单的键，但不能使用复杂的键。什么是解决方案？

```
[self.dict addObserver:self forKeyPath:@"com.alpha" options:NSKeyValueObservingOptionOld | NSKeyValueObservingOptionNew context:nil];

-(IBAction) onChange:(id)sender
{
 [self.dict setObject:@"newValue" forKey:@"com.alpha"];
}

-(void) observeValueForKeyPath:(NSString *)keyPath ofObject:(id)object change:(NSDictionary *)change context:(void *)context
{
  NSLog(@"____ value had changed");
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-05T14:43:25.107

您不能将包含点`.`的键用于键值编码或键值观察。点用于构建一个*关键路径*，用于指定要遍历的对象属性序列。（请参阅“键值编码编程指南”中的[键和键路径](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/KeyValueCoding/Articles/BasicPrinciples.html#//apple_ref/doc/uid/20002170-183455)。）

例如，

```
id x = [object valueForKeyPath:@"com.alpha"]; 
```

是相同的

```
id x = [[object valueForKey:@"com"] valueForKey:@"alpha"]; 
```

对于单个键“com.alpha”，您必须将其重命名为“com_alpha”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T22:44:15.727

NSDictionary 不符合 Key-Value Observing。您根本无法使用 KVO 观察字典的更改。即使它似乎适用于某些情况，它也可能在未来的版本中中断。

# c - 读取、加密和写入字节块

> ID：14172779
> 
> 赞同：2
> 
> 时间：2013-01-05T14:34:09.790
> 
> 标签：c, fwrite, eof, fread

*   从文件中读取 16 个字节；
*   加密这 16 个字节；
*   将加密字节写入另一个文件；
*   再次执行上述操作，直到文件结束；

如果最后一次调用小于 16 字节，我用 0 填充缓冲区。
这是正确的方法吗？

```
FILE *fp = fopen("name", "r+");
FILE *fpout = fopen("name", "w+");
char plain_text[16];
fseek(fp, 0, SEEK_SET);

while(!feof(fp)){
  memset(plain_text, 0, sizeof(plain_text);
  read_bytes = fread(plain_text, 1, 16, fp);
  if(read_bytes < 16){
    i = read__bytes;
    read_bytes += 1;
    for(i, i<16, i++) plain_text[read_bytes] = 0;
  }
  encrypt-this-part-of-file
  fwrite(encBuffer, 1, 16, fpout);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-05T14:47:33.990

不，这将是正确的...

```
if(read_bytes < 16)
{
    for(i = read_bytes; i<16; i++)
    {
        plain_text[i] = 0;
    }
} 
```

...如果你真的需要它。

但是您不需要将数组的剩余部分归零，因为您已经使用...清除了它。

```
memset(plain_text, 0, sizeof(plain_text)); 
```

...您在每次调用 fread 之前都会调用它。

# grep - pcregrep 递归，显示周围的线条

> ID：14172784
> 
> 赞同：0
> 
> 时间：2013-01-05T14:34:46.493
> 
> 标签：grep

我知道如何使用 grep 但现在是 pcregrep。我试过：

```
 pcregrep -M -1 -rl '."\n' 2012 -name en*.txt 
```

但它不起作用？

基本上，我希望它在文件夹 2012 中递归地显示名为 en_blahblahblah.txt 的所有文件中的前面一行和下面一行。但是我尝试了该命令，但它不起作用。我需要使用 pcregrep 因为 grep 不支持换行符。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T14:43:47.097

使用`-A lines`and`-B lines`选项。

```
[aman@aman test]$ pcregrep -M -B 2 -A 2 "C\nD" temp 
And failed to add the T and M;      Another called my grammar vile

C
D
                    And criticized my writing style.
Each day I scan each Subject line 
```

从手册页

> ```
>  -A number, --after-context=number
>              Output  number  lines of context after each matching line.
> 
>    -B number, --before-context=number
>              Output  number lines of context before each matching line. 
> ```

# java - 当线程达到稳定状态时发出终止信号

> ID：14172785
> 
> 赞同：0
> 
> 时间：2013-01-05T14:35:06.030
> 
> 标签：java, multithreading, concurrency, concurrent-programming

假设我有两个线程`A`，并且`B`都在运行。突然`B`决定终止`A`，因此`A`应该尽快终止。我不想`A`立即终止，但是当它达到稳定状态时。

一个天真的解决方案是使用一个共享变量`terminatePlease`，它`A`会在每次达到稳定状态时进行检查。

代码的原型如下所示：

```
class A extends Thread {
    boolean terminatePlease;

    public void run() {
        while (true) {
            if (terminatePlease)
                return;
            doUninterruptableTasks();
        }
    }
} 
```

有没有其他并发模式来处理这种情况？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-05T14:39:16.810

就是这个想法，是的。布尔值应该是可变的以使此解决方案起作用。

但是你甚至不需要这个标志，因为每个线程已经有一个：中断标志。所以你可以`a.interrupt();`从线程 B 调用，并让你的线程 A 执行以下操作：

```
public void run() {
    while (!Thread.currentThread().isInterrupted()) {
        doUninterruptableTasks();
    }
} 
```

但请注意，中断处于等待状态的阻塞线程将使阻塞方法抛出 InterruptedException，以便尽快停止运行。如果您不希望这样，请使用 volatile 标志。

# wordpress - 禁止访问类别页面

> ID：14172792
> 
> 赞同：0
> 
> 时间：2013-01-05T14:35:26.963
> 
> 标签：wordpress, url, url-rewriting, seo

在我的 Wordpress 网站上，我有一个 URL 结构：

```
website.com/cars/black/porsche
website.com/cars/yellow/fiat
website.com/cars/about 
```

为此，我创建了名为“汽车”的空类别和空白页面“汽车”。

接下来，我创建了黑色和黄色类别，父级是汽车并正确发布：保时捷和菲亚特。

禁用访问页面的更好解决方案是：website.com/cars/、website.com/cars/yellow？

A：使用301重定向到404页面？B：使用 301 重定向到类别中的另一个帖子？C: 如何防止网站从谷歌搜索引擎不索引不需要的 URL？NoIndex+NoFollow+Disable 在站点地图中显示就足够了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T16:55:30.457

您可以为 noindex 和 nofollow 安装 Yoast 的 SEO 插件。我认为这是最简单的方法。如果这些页面已被 Google 编入索引，请使用网站管理员工具删除页面。

无法访问 - 为什么需要这些页面？如果您有 noindex 和 nofollow，这些页面将不会显示在 Google 搜索中，并且如果您没有任何指向这些页面的链接可供用户访问，则没有人会知道它们。

# haskell - Haskell STM 分片 TVAR

> ID：14172797
> 
> 赞同：1
> 
> 时间：2013-01-05T14:35:38.657
> 
> 标签：haskell, stm, tvar

我是 Haskell 和 STM 的新手，我正在尝试理解基本概念。

一般来说，在 Haskell 和函数式编程中，如果我错了，请纠正我，没有赋值之类的东西。

我不能写`x=3;`我所能做的就是用`x`and生成另一个绑定`3`。

现在谈到 TVar 和线程，如果我有多个线程共享同一个 TVar，如果一个线程更改值，使用`writeTVar`，其他线程将看到更改的值，对吗？

所以如果我有 2 个线程共享同一个`TVar Int`var，第一个线程加 1，如果成功，第二个线程会看到更新的值吗？

塔克斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-05T14:52:26.947

是的，`TVar`就是容器，当它的内容改变时它不会改变。所有线程都看到同一个容器，当一个线程更改容器中存储的内容时，当另一个线程查看时，它会找到更改后的值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-05T15:35:18.760

最好不要考虑`TVar`变量，而是可以读取和写入的通道。

纯变量可以被认为是一个纯函数，它总是返回一些值（并且这个值只绑定一次，就像在你的例子中一样）。monad 中的变量/函数有一些“上下文”（这就是 monads 的用途），这可能会改变它的值（例如`randomIO :: Random a => IO a`from`System.Random`可能被认为是“monadic value”，值，可以在任何调用时改变）。

读取和写入`TVar`是不纯的显式操作，这就是为什么函数 `readTVar`/`writeTVar`被包装到`STM`monad 中的原因，它们依赖于一些隐藏的上下文，这可能会改变结果（使线程之间的值传输成为可能）。但是，这将这些操作限制在`STM`monad 中，只能转义`IO`。

# css - 带有单个图像的 CSS 菜单，用于第一 li 级别和 li:hover

> ID：14172802
> 
> 赞同：0
> 
> 时间：2013-01-05T14:36:06.207
> 
> 标签：css

我正在制作一个 CSS 菜单。我正在尝试编辑现有代码，我需要为第一级的每个项目制作一个带有单独图像的 css 菜单，`<li>`如下所示：

```
.leftmenu a.link1 { padding-top: 42px; background:transparent url('../images/home_on.gif');   }
.leftmenu a.link2 { background:transparent url('../images/serv_off.gif'); }
.leftmenu a.link3 { background:transparent url('../images/know_off.gif'); }
.leftmenu a.link4 { background:transparent url('../images/exp_off.gif'); }
.leftmenu a.link5 { background:transparent url('../images/ref_off.gif'); }
.leftmenu a.link6 { background:transparent url('../images/links_off.gif'); }
.leftmenu a.link7 { background:transparent url('../images/contact_off.gif'); }
.leftmenu a.link8 { background:transparent url('../images/blog_off.gif'); }

.leftmenu a.link1:hover { background:transparent url('../images/home_on.gif') -163px -42px no-repeat; background-position:0 0; }
.leftmenu a.link2:hover { background:transparent url('../images/serv_on.gif') -163px -28px  no-repeat;   background-position:0 0;  }
.leftmenu a.link3:hover {background:transparent url('../images/know_on.gif') -163px -28px  no-repeat; background-position:0 0; }
.leftmenu a.link4:hover { background:transparent url('../images/exp_on.gif') -163px -28px  no-repeat; background-position:0 0; }
.leftmenu a.link5:hover { background:transparent url('../images/ref_on.gif') -163px -28px  no-repeat; background-position:0 0;  }
.leftmenu a.link6:hover { background:transparent url('../images/links_on.gif') -163px -28px  no-repeat; background-position:0 0;  }
.leftmenu a.link7:hover {background:transparent url('../images/contact_on.gif') -163px -28px  no-repeat; background-position:0 0;  }
.leftmenu a.link8:hover {background:transparent url('../images/blog_on.gif') -163px -28px  no-repeat; background-position:0 0;  } 
```

现在我正在尝试向这个菜单添加一个弹出窗口，我能找到的唯一方法是这样的：

```
li.list2:hover + ul.sub-menu{  
display: block;
position: absolute;
left: 14px;
text-indent: 0px!important;

background-color: black;
margin: 0px;

list-style: none;
top: -20px;
border-radius: 10px;
}
ul.sub-menu{
display: none;
} 
```

菜单中还添加了这个 css：

```
.leftmenu{ width:163px; margin-left:7px; position: relative; z-index: 0;}
.leftmenu ul{ margin:0px; padding:0px;  }
.leftmenu  a { display:block; width:163px; height:0; padding-top:28px; color: white;  text-indent:-3000px; } 
```

这似乎工作正常，除了当我滚动设置为显示子菜单项的菜单项时，子菜单就会消失，也许这是一个 z-index 问题，但我不这么认为？

我什至不介意从头开始重新编码，如果有人可以指出我的方向，可以为每个第一个菜单项设置单独的颜色/图像样式，我可能会使用 jQuery。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T14:40:39.050

这要么是因为您在第一级菜单和子菜单项之间存在间隙，要么您的“嵌套 ul”没有嵌套在 li 中导致悬停行为。

你肯定有后一个问题，即

```
<ul>
  <li/>
  <li>
    <a/>      <<< (read below first) in here...
  </li>
  <ul />     <<< this ul should be (see above arrows)
  <li/>
</ul> 
```

# jena - 在 JENA 中使用 TDBLoader 加载 rdf 转储时忽略行

> ID：14172804
> 
> 赞同：1
> 
> 时间：2013-01-05T14:36:19.590
> 
> 标签：jena, freebase, mql

当我们使用 tdbloader 加载大型 freebase rdf 转储时，可能会出现几行错误，这可能是由于编码不正确，或“>”不匹配，甚至是其他类型的错误。在这种情况下，TDBLoader 会抛出错误，指出特定行号存在错误并突然停止。

是否有任何机制可以让我们记下这一行，在下一次使用命令行的试验中，我们可以为 TDBLoader 提及要忽略的行号？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T08:47:10.727

请查看 jena-users 邮件列表中的这条消息（感谢 Andy）： http: [//mail-archives.apache.org/mod_mbox/jena-users/201212.mbox/%3C50DF4B56.9090208%40apache.org %3E](http://mail-archives.apache.org/mod_mbox/jena-users/201212.mbox/%3C50DF4B56.9090208%40apache.org%3E)

# php - 从计算机获取图片并使用 PHP 一次将其发布到 Facebook 多个页面

> ID：14172818
> 
> 赞同：1
> 
> 时间：2013-01-05T14:37:57.513
> 
> 标签：php, facebook, facebook-graph-api, facebook-php-sdk

**问题**：如果我在 facebook 开发人员的博客[链接](https://developers.facebook.com/blog/post/498/)中使用图形 URL 方法，我只能一次发布到一个页面（我希望能够将图片发布到我的应用程序用户的所有选定页面）。 [开发一个应用程序让用户一次发布到多个页面]。所以我没有使用那种方法，下面是我的方法。

**使用**Heroku 应用引擎，它不允许在其服务器上永久存储上传的文件。所以我无法保存照片。即请不要参考 move_uploaded_file()。

这是html表单字段的代码：

```
<form enctype="multipart/form-data" action="poster.php" method="POST">
<p>Please choose a photo: </p>
<input name="source" type="file">
<p>Add Description </p>
<input name="message" type="text" value=""> 
<input type="submit" value="Upload"/>
</form> 
```

这是poster.php代码：

```
<?php
require "facebook.php" ;
$facebook = new Facebook(array(
'appId'  => '',
'secret' => '',
'cookie' =>true,
));
if(session_id()){}
else{session_start();}
$facebook->setFileUploadSupport("http://" . $_SERVER['SERVER_NAME']);
$x=realpath($_FILES['source']['tmp_name']);
$parameters = array('message' => $_POST['message'],'source' =>'@' . $x );
$parameters['access_token'] = $_SESSION['active']['access_token'];
$check=$facebook->api('/me/photos','POST',$parameters);
$redirecting="https://apps.facebook.com/pagecron/manage.php";
echo "<script>top.window.location='".$redirecting."';</script>";
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T10:31:26.490

很抱歉回答我自己的问题，但这对所有其他人都会有很大帮助..首先..我很高兴我做到了！！！

这是错误所在... 替换 `$facebook->setFileUploadSupport("http://" . $_SERVER['SERVER_NAME']);`

和

`$facebook->setFileUploadSupport("http://apps.facebook.com/myappname");`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T10:48:30.323

是的，这应该可行，因为完整路径将构建图像的链接。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-05T14:53:36.703

我不确定，但你可以试试这个 -

```
$parameters = array(
     'message' => $_POST['message'],
     'picture' => '@' . $path,
     'link' => $_POST['link'],
     'name' => $_POST['name'],
     'caption' => $_POST['caption'],
     'description' => $_POST['description']
      ); 
```

如果这不能解决您的问题，您可以共享 API 调用的代码。

# android - 如何在适用于 2.2 的片段中使用 Listview？

> ID：14172823
> 
> 赞同：0
> 
> 时间：2013-01-05T14:38:33.690
> 
> 标签：android, listview, fragment

无论如何在片段中使用列表视图？我正在使用 ViewPager 在我的片段中滑动（如下：[http](http://thepseudocoder.wordpress.com/2011/10/05/android-page-swiping-using-viewpager/) ://thepseudocoder.wordpress.com/2011/10/05/android-page-swiping-using-viewpager/ ），它工作得很好，但我会就像每个片段中的列表视图。问题是我应该使用`ListFragment`，但我希望我的应用程序能够在装有 Android 2.2 的设备上运行并且`ListFragments`只能从 3.0.0 开始工作。稍后我将自定义此列表视图，那么如何在实际适用于 2.2 的片段中使用列表视图？提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-05T14:41:27.387

> 问题是我应该使用 ListFragment，但我希望我的应用程序能够在装有 Android 2.2 的设备上运行，并且 ListFragments 只能从 3.0 开始工作。

不正确。

正如[我昨天写](https://stackoverflow.com/questions/14167288/host-fragments-inside-an-activity-class/14167333#14167333)的，片段系统有两种实现。

一个是 API 级别 11 原生的。它的`ListFragment`实现是`android.app.ListFragment`，您可以将它与常规`Activity`.

一个来自 Android 支持包。它可以一直追溯到 API 级别 4。为此，您继承`FragmentActivity`并使用`Fragment`类的 backport 版本（主要是在`android.support.v4.app`而不是`android.app`。在 的情况下`ListFragment`，您将使用 `android.support.v4.app.ListFragment`。您可以阅读有关 Android 支持包的更多信息在[文档](http://developer.android.com/training/basics/fragments/support-lib.html)中。

# java - 检查输入字符串是否是 2 dim 数组的一部分

> ID：14172824
> 
> 赞同：1
> 
> 时间：2013-01-05T14:38:34.990
> 
> 标签：java, multidimensional-array, compare, contains

我正在尝试检查字符串是否是 2dim 数组的一部分。

`geefNamenCat`返回`Input.readString()`。有什么方法可以让我轻松检查是否`geefNamenCat`属于`TERADENWOORDEN[ ][ ]`？。我已经浏览这个网站很长一段时间了，我只找到了 1dim 数组的解决方案（我也无法开始工作）。

```
 public void catKiezen() {
        do { 
        String gekozenCat = geefNamenCat("\nKies 1 van de volgende categorieën: ");
        }
        while ( !gekozenCat.equals (TERADENWOORDEN[][]) 
    } 
```

编辑：我忘了添加，do/while 事情是这样的，它会一直要求新的输入，直到给定的输入是数组的一部分

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T14:47:19.513

你可以试试这个：

```
boolean contains = false;

do {
    String gekozenCat = geefNamenCat("\nKies 1 van de volgende categorieën: ");

    for (String[] sub : Arrays.asList(TERADENWOORDEN))
        if (Arrays.asList(sub).contains(gekozenCat)) {
            contains = true;
            break;
        }

    if (! contains) {
        // print something
    }

} while (! contains); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T14:55:29.437

根据评论：

> 基本上你有 2 列和 x 行
> 
> 最好只检查第一列

也许这就是你想要的？

```
for(String[] row: ALLOWED_WORDS){
  if(input.equals(row[0])){
    found = true;
    break;
  }
} 
```

此外，如果您希望对同一个表进行多个查询，则可以考虑将表编译为 hashSet：

```
//once
HashSet<String> allowedWordList = new HashSet<String>();
for(String[] row: ALLOWED_WORDS){
  allowedWordList.add(row[0])
}

//on each check
if(allowedWordList.contains(input)){
  ...
} 
```

另外，基于

> 数组从 txt 文件中读取行

那么它不是一个常数，也不应该是全大写：`ALLOWED_WORDS`=>`allowedWords`

# java - 将一串字符分解为有效的单词

> ID：14172827
> 
> 赞同：1
> 
> 时间：2013-01-05T14:39:11.740
> 
> 标签：java, algorithm, data-structures, recursion, dynamic-programming

我正在阅读有关动态编程的问题。问题如下：

> 将长度为 n 的字符串分解为一系列有效单词。假设有一个数据结构可以告诉您字符串在恒定时间内是否是有效单词。

我以某种方式解决了它，但后来我读到的解决方案如下：

> 创建一个表 T[N]，如果子字符串 [0...i] 可以分解为一系列有效单词，则 T[i] 为真。如果存在 aj，则 T[i] 为真，0<=j<=k-1 其中 T[j] 为真且 S(j,k) 是有效词

这是 DP 的经典公式，但它不是错的吗？不应该是：

> 如果存在 aj，则 T[i] 为真，0<=j<=k-1 其中 T[j] 为真且 S( **j+1** ,k) 是有效词**或 S(0,i) 是有效词字**？

否则，我看不到如何构建表格，例如对于字符串： 如果我们不考虑这是一个单词并且下一个序列是j = 2 ，`itsthe`我们将永远不会有。 我是对的这里？但是我们如何才能找到实际的单词呢？ 我为理解而制作的示例代码（从java中 返回子字符串）：`T[2] = true``its``the``S(2+1, N)`

`s.substring(i,j)``i including j-1`

```
int i = 0  
for(; i < s.length(); i++){  
   for(int j = 0; j > i; j++){  
       if(T[j] && dictionary.contains(s.substring(j + 1, i)){  
             T[i] = true;
             break;  
       }  
    }  
    if(dictionary.contains(s.substring(0, i + 1)){  
         T[i] = true;  
    }  
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T14:47:55.880

你的所有更正都是正确的。

如果要重建实际单词，请再添加一个表数组，该数组将告诉您用于设置的最后一个单词`t[i]`长度`true`。让我们调用这个数组`L[i]`

> 如果存在 aj，则 T[i] 为真，0<=j<=k-1 其中 T[j] 为真且 S(j+1,k) 是有效词或 S(0,i) 是有效词单词？**在第一种情况下，您`L[i] = j`在后者中设置 - `L[i] = i`。**

然后添加您只需要从 递归回来的结尾`L[n]`，其中`n`是给定字符串的总长度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T15:43:12.917

这取决于您的符号的含义，特别是用于选择子序列。您混合使用方括号和圆括号，“substring [0...i]”和“S(j+1,k)”；我建议我们总是包括左手索引而不是右手索引。这有时通过在左侧使用方括号和在右侧使用圆括号来明确：S[0...i)。

如果我们这样做，那么原来的措辞*几乎*是正确的；i和k之间有一些混淆，我认为应该是相同的，并且没有正确处理i = 0的情况。（在相关说明中，我认为您的修改也可能无法正确处理 n = 0 （空字符串）的情况。）

```
Create a table T[N] which says that T[i] is true if the substring S[0...i)
can be broken into a sequence of valid words. T[i] is true iff i = 0 OR
(there exists a j, 0<=j<i, where T[j] is true AND S[j...i) is a valid word). 
```

# mysql - 使用 JPA 和 MySQL 在 Jenkins 中测试用例失败

> ID：14172835
> 
> 赞同：0
> 
> 时间：2013-01-05T14:39:33.633
> 
> 标签：mysql, jpa, jenkins, testng

我有一个 Spring 应用程序，其中有一个 TestNG 测试用例，在我的本地开发机器上一切正常，但是当我在 Jenkins 中构建时，我的测试失败了。以下是堆栈跟踪。

```
Caused by: com.mysql.jdbc.exceptions.jdbc4.CommunicationsException: Communications link failure
The last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
    at java.lang.reflect.Constructor.newInstance(Constructor.java:513)
    at com.mysql.jdbc.Util.handleNewInstance(Util.java:411)
    at com.mysql.jdbc.SQLError.createCommunicationsException(SQLError.java:1117)
    at com.mysql.jdbc.MysqlIO.<init>(MysqlIO.java:350)
    at com.mysql.jdbc.ConnectionImpl.coreConnect(ConnectionImpl.java:2393)
    at com.mysql.jdbc.ConnectionImpl.connectOneTryOnly(ConnectionImpl.java:2430)
    at com.mysql.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:2215)
    at com.mysql.jdbc.ConnectionImpl.<init>(ConnectionImpl.java:813)
    at com.mysql.jdbc.JDBC4Connection.<init>(JDBC4Connection.java:47)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
    at java.lang.reflect.Constructor.newInstance(Constructor.java:513)
    at com.mysql.jdbc.Util.handleNewInstance(Util.java:411)
    at com.mysql.jdbc.ConnectionImpl.getInstance(ConnectionImpl.java:399)
    at com.mysql.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:334)
    at java.sql.DriverManager.getConnection(DriverManager.java:582)
    at java.sql.DriverManager.getConnection(DriverManager.java:154)
    at org.springframework.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriverManager(DriverManagerDataSource.java:173)
    at org.springframework.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver(DriverManagerDataSource.java:164)
    at org.springframework.jdbc.datasource.AbstractDriverBasedDataSource.getConnectionFromDriver(AbstractDriverBasedDataSource.java:149)
    at org.springframework.jdbc.datasource.AbstractDriverBasedDataSource.getConnection(AbstractDriverBasedDataSource.java:119)
    at org.hibernate.ejb.connection.InjectedDataSourceConnectionProvider.getConnection(InjectedDataSourceConnectionProvider.java:70)
    at org.hibernate.internal.AbstractSessionImpl$NonContextualJdbcConnectionAccess.obtainConnection(AbstractSessionImpl.java:281)
    at org.hibernate.engine.jdbc.internal.LogicalConnectionImpl.obtainConnection(LogicalConnectionImpl.java:297) 
```

mysql和jenkins都在同一台机器上运行可能是什么原因。

问候， Karthikeyan Vaithilingam

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T16:11:09.640

它可能是由本地防火墙引起的，或者 MySQL 不接受来自本地计算机的连接。但我的假设是在游戏中有防火墙。

```
Caused by: com.mysql.jdbc.exceptions.jdbc4.CommunicationsException: Communications link failure
The last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server. 
```

# fonts - Internet Explorer 未呈现 Google 字体

> ID：14172838
> 
> 赞同：0
> 
> 时间：2013-01-05T14:39:56.443
> 
> 标签：fonts

我已将 Google API 字体集成到我的网站[Photoshop 免费下载](http://www.photoshopdownloadfree.com)中，但问题是该字体在**Internet Explorer上无法正确呈现，但在****firefox**和**chrome**上似乎很完美。请让我知道这个问题的解决方案。请让我知道这个问题的解决方案。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T14:59:21.720

前段时间我也遇到过同样的问题。问题是每个浏览器（渲染引擎）都使用不同的字体文件（有些使用 .ttf，有些使用 .wotf 等等）。如果您使用的特定 Google 字体未以 IE 所需的格式提供（我相信 IE 使用的是 .eos），您将无法获得要呈现的字体。首先尝试更改字体 - 如果它适用于另一种字体，则可能是我上面描述的问题。为了 100% 确保您拥有所有必要的文件，您可以自己托管它们。[http://www.fontsquirrel.com/](http://www.fontsquirrel.com/)有一个用于生成自托管字体的优秀工具 -> @font-face 生成器。

祝你好运！

# regex - Rails before_save 回调没有正确地从数字中删除逗号

> ID：14172839
> 
> 赞同：1
> 
> 时间：2013-01-05T14:40:01.497
> 
> 标签：regex, ruby-on-rails-3, callback, gsub

我将货币值作为整数（美分）存储在数据库中，然后在视图端对其进行格式化。但是，当用户输入“175,000”之类的内容时，存储在 DB 中的值为“175”。它似乎停在第一个逗号处，而不是存储其余的零。我已经验证（使用 rubular）正则表达式正确选择任何非零或十进制值并只留下数字。我只是不确定为什么它一直停在第一个逗号处。

```
# model
before_save :convert_amounts_to_cents

def convert_amounts_to_cents
  self.loan_amount = loan_amount.to_s.gsub(/[^0-9\.]/, "").to_i
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T14:55:47.800

那是旧的 ActiveModel 功能，它在设置值时将传递的值转换为整数，所以`before_save`在这种情况下为时已晚。

尝试覆盖`loan_amount=`：

```
def amount=(amount)
  self[:amount] = amount.to_s.gsub(/[^0-9\.]/, "").to_i
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T14:44:16.117

实际上，保存时 175 和 175.00 的表示方式相同。最右边的 00 是隐含的。

但是，当您向用户显示信息时，您可以通过适当的格式选择小数位数。

# android - MediaPlayer 无法正常工作

> ID：14172843
> 
> 赞同：0
> 
> 时间：2013-01-05T14:40:12.097
> 
> 标签：android

在我的应用程序中，我在单击按钮时添加了声音

这是管理声音的类

```
public class GestoreSuoni{
MediaPlayer mp; 

    public void playSound(Context context,int sound){
         mp = MediaPlayer.create(context, sound);
         mp.start();        
    }
} 
```

在我的主要活动中，我为所有按钮调用了 playSound 方法

```
button_name.setOnClickListener(new OnClickListener(){
    public void onClick(View arg0) {
        gestoreSuoni.eseguiSuono(getApplicationContext(),R.raw.tieni_suono);
    }               
}); 
```

起初它可以工作，但在我的按钮上点击 20-30 次后，我再也听不到声音了，我从 LogCat 收到这条消息：Mediaplayer 错误（- 19,0）。

是什么意思？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T14:45:38.233

停止时请释放内存。当您再次触摸按钮进行播放时，`out of memory`您会收到此错误。`allocating memory every time`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T16:25:58.113

按照 Ilya Demidov 建议的示例和 Chinmoy Debnath 的建议，我将这部分代码添加到管理 MediaPlayer 的方法中

```
public class GestoreSuoni{
MediaPlayer mp; 

    public void playSound(Context context,int sound){

           //new code/////////
       if (mp!=null) {
           mp.release();
            mp = null;
        }
           ///////////////////

         mp = MediaPlayer.create(context, sound);
         mp.start();        
    }
} 
```

现在它似乎工作了。我希望我已经（在你的帮助下）正确地解决了这个问题

# java - 启动服务

> ID：14172844
> 
> 赞同：-1
> 
> 时间：2013-01-05T14:40:20.020
> 
> 标签：java, android

我正在尝试运行一个从 0 计数到 1000 并停止的简单服务。这是我的代码：

```
public class MyService extends Service
{
    private Timer timer;
    private int counter;
    public void onCreate()
    {
        super.onCreate();

        this.timer = new Timer();
        this.counter = 0;
        startService();
    }
    private void startService() 
    {
        timer.scheduleAtFixedRate(new TimerTask()
        {
            public void run()
            {
                MyService.this.counter++;
                if(counter == 1000)
                    timer.cancel();
            }
        },0,100);
    ;}

    @Override
    public IBinder onBind(Intent arg0) {
        // TODO Auto-generated method stub
        return null;
    }
} 
```

从我对 onCreate 方法的活动中，我做了以下事情： MyService service = new MyService();

我的应用程序崩溃了，我收到以下错误：

> 01-05 16:34:28.880: E/AndroidRuntime(30183): java.lang.RuntimeException: 无法实例化活动 ComponentInfo{com.example.android.location/com.example.android.location.MainActivity}: java.lang .ClassNotFoundException: com.example.android.location.MainActivity

**编辑**

清单：

```
 <manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.android.location"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="7"
        android:targetSdkVersion="15" />

    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.SEND_SMS" />
    <uses-permission android:name="android.permission.READ_PHONE_STATE" />

    <application android:label="@string/app_name" >
        <service android:name="com.example.android.location.MyService" />
        <activity
            android:name="com.example.android.location.MainActivity"
            android:label="@string/title_activity_main" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

**编辑**

这是活动代码：

```
public class MainActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        Intent intent = new Intent(MainActivity.this,MyService.class);
        startService(intent);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-05T14:45:15.873

> 从我对 onCreate 方法的活动中，我做了以下事情：
> 
> ```
>  MyService service = new MyService(); 
> ```

因为您试图通过创建一个 Instace 来启动一个服务，这不是启动服务的有效方式。

为了从任何应用程序组件启动服务，我们有一个方法`startService(Intent intent)`。您可以使用此方法启动您的服务：

```
Intent intent =new Intent(Your_Current_Activity.this,MyService.class);
startService(intent); 
```

并确保您已将您的活动和服务声明`AndroidManifest.xml` 为：

```
 <service android:name=".MyService" />
  <activity android:name=".MainActivity" /> 
```

# c# - WPF 工具提示仅在文本为某物时显示

> ID：14172846
> 
> 赞同：5
> 
> 时间：2013-01-05T14:40:27.953
> 
> 标签：c#, .net, wpf, vb.net

我有以下代码：

```
<Window x:Class="WpfApplication1.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow" Height="350" Width="525">
<Window.Resources>
    <Style x:Key="{x:Type ToolTip}" TargetType="{x:Type ToolTip}">
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type ToolTip}">
                    <Border Background="Black">
                        <TextBlock  FontFamily="Tahoma" FontSize="11" Text="{TemplateBinding Content}" Foreground="WhiteSmoke" Padding="2" />
                    </Border>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
</Window.Resources>
<StackPanel>
    <Label Content="Label 1" ToolTip="asd" />
    <Label Content="Label 2" ToolTip="" />
    <TextBlock Text="TextBlock 1" ToolTip="asd" />
    <TextBlock Text="TextBlock 2" ToolTip="" />
    <Button Content="Button 1" ToolTip="asd" />
    <Button Content="Button 2" ToolTip="" />
</StackPanel> 
```

现在，正如您通过测试所看到的，当您将鼠标悬停在标签 2、文本块 2、按钮 2 上时，工具提示仍然显示。我希望触发它，如果 Tooltip 为空或 null 那么它不应该显示任何内容。我知道我可以简单地从 XAML 中删除它但是我在这里做的方式有所不同。

我尝试添加一个触发器来检查 value ="" 和 null 和内部触发器，将模板设置为 null 但它们都不起作用

如果你们中的一些专家可以对此有所了解，我会很高兴

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-05T18:10:13.450

当 DataTrigger 可以完成相同的事情时，转换器可能是矫枉过正。以下样式是您发布的样式，带有一些清理和必要的触发器。请注意以下事项：

1.  我通常设置最终将被触发器覆盖的默认样式。在这种情况下，默认样式是`Visibility=Visible`.
2.  有两个触发器。一种用于内容为空，另一种用于内容为空。

**XAML**

```
<Style TargetType="ToolTip">
    <Setter Property="Visibility" Value="Visible" />
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="ToolTip">
                <Border Background="Black">
                    <TextBlock FontFamily="Tahoma"
                               FontSize="11"
                               Foreground="WhiteSmoke"
                               Padding="2"
                               Text="{TemplateBinding Content}" />
                </Border>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
    <Style.Triggers>
        <DataTrigger Binding="{Binding RelativeSource={RelativeSource Self}, Path=Content}" Value="{x:Null}">
            <Setter Property="Visibility" Value="Collapsed" />
        </DataTrigger>
        <DataTrigger Binding="{Binding RelativeSource={RelativeSource Self}, Path=Content}" Value="">
            <Setter Property="Visibility" Value="Collapsed" />
        </DataTrigger>
    </Style.Triggers>
</Style> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-05T15:16:02.103

您可以考虑使用 IValueConverter 来显示/隐藏工具提示边框。将此类添加到您的项目中：

```
class BorderVisibilitySetter : IValueConverter
{

    public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
       //check if the control's content property is null or empty        
        if(value == null || value.ToString() == string.Empty)
            return Visibility.Collapsed;
        else
            return Visibility.Visible;
    }

    public object ConvertBack(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        throw new NotImplementedException();
    }
} 
```

然后将您的 xaml 修改为：

```
<src:BorderVisibilitySetter x:Key="BorderVisible" />
    <Style x:Key="{x:Type ToolTip}" TargetType="{x:Type ToolTip}">
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type ToolTip}">
                    <Border Background="Black" Visibility="{TemplateBinding Content, Converter={StaticResource BorderVisible}}" >
                        <TextBlock  FontFamily="Tahoma" FontSize="11" Text="{TemplateBinding Content}" Foreground="WhiteSmoke" Padding="2" />
                    </Border>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-09T09:46:34.077

我的解决方案将具有以下功能：

1.  如果文本块有一些文本，将显示工具提示
2.  工具提示文本与文本块文本相同
3.  工具提示前景与文本块前景相同

**Xaml 代码：**

```
<TextBlock Name="TxtBlockLicenseInfo" Height="35"  ToolTipService.ShowDuration="200000" TextTrimming="CharacterEllipsis">
     <TextBlock.ToolTip>
        <ToolTip DataContext="{Binding Path=PlacementTarget, RelativeSource={x:Static RelativeSource.Self}}" 
                                    Visibility="{Binding Text,Converter={StaticResource TextToTooltipVisibilityConverter}}" >
                <StackPanel>
                      <Label Content="{Binding Text}" Foreground="{Binding Foreground}" >
                      </Label>
                </StackPanel>
         </ToolTip>
      </TextBlock.ToolTip>
</TextBlock> 
```

还将转换器包含在 Xaml 资源中

```
<UserControl.Resources>
    <local:LicenseInformationToTooltipVisibilityConverter x:Key="LicenseInformationToTooltipVisibilityConverter" />
</UserControl.Resources> 
```

**Xaml.Cs 代码编写转换器**

```
public class TextToTooltipVisibilityConverter : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        if ((value.ToString().Equals(string.Empty)))
        {
            return Visibility.Collapsed;
        }
        else return Visibility.Visible;
    }

    public object ConvertBack(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        return Visibility.Visible;
    }
} 
```

# grails - save() 如何在 Grails 中工作？

> ID：14172849
> 
> 赞同：0
> 
> 时间：2013-01-05T14:41:21.823
> 
> 标签：grails, groovy, grails-orm

如果我的控制器中有以下方法：

```
def save() {
  def userInstance = new User(params)
  if (userInstance.save(flush: true)) {
    def file = request.getFile("myFile")
    userInstance.fileName = file.getOriginalFileName()
  }
} 
```

即使我在调用数据库`.save()`之前调用`request.fileName = file.getOriginalFileName()`过，也确实有`fileName`列的值。我会假设打电话后什么都不会被保存`.save()`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T15:21:13.607

Hibernate（处理数据库交互的底层库）在刷新期间进行脏检查（检查对象的字段自上次从数据库中读取后是否已更改），并且 grails 将始终在结束时进行刷新每个请求。

因此，您可以理解，即使您在保存对象后更改了**fileName**字段，此更改也会在请求结束时应用到 db 中。

您可以通过搜索休眠实体状态（例如[this](http://docs.jboss.org/hibernate/orm/4.0/hem/en-US/html/objectstate.html)）或“Open Session in View”模式（默认情况下由 grails 使用）来阅读有关此内容的更多信息

# php - Strpos 找不到特殊字符

> ID：14172852
> 
> 赞同：2
> 
> 时间：2013-01-05T14:42:04.573
> 
> 标签：php, string, special-characters, strpos

我正在使用这段代码来查找字符串中是否存在子字符串，但是当它遇到特殊字符时，即使该字符明显存在，它也会失败。

```
//Code out of context
if (strpos($pieces[$i], 'Č<br>t') !== false) {
    $out .= $pieces[$i];}

---fails, Č not found

if (strpos($pieces[$i], 'S<br>t') !== false) {
    $out .= $pieces[$i];}

---OK 
```

输入

```
<td >Č<br>t</td>
<td >S<br>t</td> 
```

通过

```
$str = file_get_contents($url); 
```

（[完整代码](http://pastebin.com/9XkVDP87)）

我究竟做错了什么？

编辑：仍然无法正常工作。输入页面在windows-1250，问题出在哪里？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-05T14:59:14.890

尝试使用 mb_strpos 代替，它旨在处理特殊字符。

相关问题：[使用特殊字符时，stripos 返回 false](https://stackoverflow.com/questions/5487917/stripos-returns-false-when-special-characters-is-used)

php.net：http://uk3.php.net/manual/en/function.mb-strpos.php [_](http://uk3.php.net/manual/en/function.mb-strpos.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T23:04:40.820

如果 mb_strpos 不起作用，请尝试检查您的 NetBeans 编码或创建新项目，为我工作。

# javascript - 在 Firefox 17.0.1 扩展中无法访问文件

> ID：14172855
> 
> 赞同：4
> 
> 时间：2013-01-05T14:42:30.053
> 
> 标签：javascript, file, firefox, xul

更新到 Firefox 17.0.1 后，不再支持 PrivilegeManager。各种消息来源说，仍然可以简单地从代码中删除相应的行，一切都应该正常工作。不幸的是，这里不是这种情况。

我总是得到一个错误：*TypeError: Components.classes is undefined*。Components.classes 也有变化吗？Mozilla 代码片段页面 (https://developer.mozilla.org/en-US/docs/Code_snippets/File_I_O) 声明了相同的语法（不使用 FileUtils.jsm）。

我的代码：

```
//netscape.security.PrivilegeManager.enablePrivilege('UniversalXPConnect');
var file = Components.classes["@mozilla.org/file/local;1"]
    .createInstance(Components.interfaces.nsILocalFile);

file.initWithPath(filePath); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T07:27:01.997

正如一些评论者所指出的，您可能在错误的位置运行代码（即：非特权的网页上下文）。然而，它可能只是范围界定的问题。

如果是范围，试试这个：

```
const {Cc,Ci,Cu} = require("chrome");

var file = Cc["@mozilla.org/file/local;1"].createInstance(Ci.nsILocalFile);
file.initWithPath(filePath); 
```

如果你在错误的地方运行，`require`会产生错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T01:37:49.277

最终解决我的问题：最初我仍在使用过时的权限管理器。当我试图从我的代码中简单地删除这一行时，它对我不起作用。问题是：我在家里工作，扩展程序不是作为扩展程序运行的，而是-出于懒惰-仅作为常规 xul 文件运行。正如 Boris Zbarsky 和 ​​paa 上面已经提到的，您必须在扩展本身中运行代码才能获得“chrome”权限。

之后，运行上述代码（只需删除 PrivilegeManager 行）就可以了！

# cmake - 使用 CMake 编译 /MT 而不是 /MD

> ID：14172856
> 
> 赞同：88
> 
> 时间：2013-01-05T14:42:34.227
> 
> 标签：cmake

我在带有 Windows SDK 和 NMake Makefiles 的 Windows 上使用 CMake。

默认情况下，它使用`/MD`编译器开关进行编译。

如何将其更改为使用`/MT`开关进行编译？

* * *

## 回答 #1

> 赞同：104
> 
> 时间：2013-01-05T14:44:28.827

您可以修改[`CMAKE_CXX_FLAGS_<Build Type>`](http://www.cmake.org/cmake/help/v2.8.10/cmake.html#variable%3aCMAKE_LANG_FLAGS_DEBUG)和/或`CMAKE_C_FLAGS_<Build Type>`变量：

```
set(CMAKE_CXX_FLAGS_RELEASE "${CMAKE_CXX_FLAGS_RELEASE} /MT")
set(CMAKE_CXX_FLAGS_DEBUG "${CMAKE_CXX_FLAGS_DEBUG} /MTd") 
```

如果您的 CMake 标志已经包含`/MD`，您可以确保在插入的点*之后*`/MD`执行上述命令（稍后添加`/MT`覆盖冲突的现有选项），或者您可以从头开始设置标志：

```
set(CMAKE_CXX_FLAGS_RELEASE "/MT")
set(CMAKE_CXX_FLAGS_DEBUG "/MTd") 
```

或者，您可以通过执行以下操作分别用and替换现有的`/MD`和`/MDd`值：`/MT``/MTd`

```
set(CompilerFlags
        CMAKE_CXX_FLAGS
        CMAKE_CXX_FLAGS_DEBUG
        CMAKE_CXX_FLAGS_RELEASE
        CMAKE_C_FLAGS
        CMAKE_C_FLAGS_DEBUG
        CMAKE_C_FLAGS_RELEASE
        )
foreach(CompilerFlag ${CompilerFlags})
  string(REPLACE "/MD" "/MT" ${CompilerFlag} "${${CompilerFlag}}")
endforeach() 
```

* * *

## 回答 #2

> 赞同：85
> 
> 时间：2019-06-07T08:23:36.493

[`MSVC_RUNTIME_LIBRARY`](https://cmake.org/cmake/help/latest/prop_tgt/MSVC_RUNTIME_LIBRARY.html#prop_tgt:MSVC_RUNTIME_LIBRARY)CMake 最终在 3.15 版中使用target 属性添加了对此的适当支持：

```
cmake_minimum_required(VERSION 3.15)
cmake_policy(SET CMP0091 NEW)
project(my_project)

add_executable(foo foo.c)
set_property(TARGET foo PROPERTY
             MSVC_RUNTIME_LIBRARY "MultiThreaded$<$<CONFIG:Debug>:Debug>") 
```

您还可以通过设置[`CMAKE_MSVC_RUNTIME_LIBRARY`](https://cmake.org/cmake/help/latest/variable/CMAKE_MSVC_RUNTIME_LIBRARY.html#variable:CMAKE_MSVC_RUNTIME_LIBRARY)变量来指定全局默认值。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2020-03-25T07:55:49.070

似乎对于*Visual Studio 15 2017*和*CMake 3.12*，替换`/MD`为的方法`/MT`是将此代码段添加到 CMakeLists.txt 文件中：

```
if(MSVC)
    add_compile_options(
        $<$<CONFIG:>:/MT> #---------|
        $<$<CONFIG:Debug>:/MTd> #---|-- Statically link the runtime libraries
        $<$<CONFIG:Release>:/MT> #--|
    )
endif() 
```

我在官方 CMake 存储库中找到了这个解决方案：[https ://gitlab.kitware.com/cmake/cmake/issues/18390](https://gitlab.kitware.com/cmake/cmake/issues/18390)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-06-10T05:15:25.137

我必须使用`set( ... CACHE ... FORCE)`来覆盖 MSVC 的默认缓存。

如果我不使用这种方法，MSVC 仍然会输出`/MD`选项。

```
set(CompilerFlags
        CMAKE_CXX_FLAGS
        CMAKE_CXX_FLAGS_DEBUG
        CMAKE_CXX_FLAGS_RELEASE
        CMAKE_CXX_FLAGS_MINSIZEREL
        CMAKE_CXX_FLAGS_RELWITHDEBINFO
        CMAKE_C_FLAGS
        CMAKE_C_FLAGS_DEBUG
        CMAKE_C_FLAGS_RELEASE
        CMAKE_C_FLAGS_MINSIZEREL
        CMAKE_C_FLAGS_RELWITHDEBINFO
        )
foreach(CompilerFlag ${CompilerFlags})
    string(REPLACE "/MD" "/MT" ${CompilerFlag} "${${CompilerFlag}}")
    set(${CompilerFlag} "${${CompilerFlag}}" CACHE STRING "msvc compiler flags" FORCE)
    message("MSVC flags: ${CompilerFlag}:${${CompilerFlag}}")
endforeach() 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-10-05T20:51:59.097

查看[ucm_set_runtime](https://github.com/onqtam/ucm#ucm_set_runtime) - 此宏将替换静态或动态运行时的标志 - 要查看效果，请使用[ucm_print_flags](https://github.com/onqtam/ucm#ucm_print_flags)（也可查看[此](https://stackoverflow.com/questions/10113017/setting-the-msvc-runtime-in-cmake)Stack Overflow 问题）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-12-20T09:53:37.737

从 cmacke 3.15 开始，您可以使用`MSVC_RUNTIME_LIBRARY`. 见[https://cmake.org/cmake/help/latest/prop_tgt/MSVC_RUNTIME_LIBRARY.html](https://cmake.org/cmake/help/latest/prop_tgt/MSVC_RUNTIME_LIBRARY.html)

# php - 检索和设置内容类型中的字段值

> ID：14172858
> 
> 赞同：0
> 
> 时间：2013-01-05T14:42:40.897
> 
> 标签：php, drupal-7, content-type, field

我想用代码在一些内容类型字段上设置值。这些值存储在另一种内容类型的某些字段中。我环顾四周寻找一些教程，但找不到任何教程。问题如下：我有两种内容类型：记分卡和golf_course。记分卡有一个对 golf_course 的标题字段的引用字段。根据选择，我想将一些值（洞的标准杆和指数）从 golf_course 转移到记分卡。这意味着我想从选择的 golf_course 中加载字段并将此值设置为记分卡中的相应字段（我需要它才能进行计算）。希望有人能善意地向我分享一些提示。我对 php 有一些了解，但需要一些培训，尤其是在 Drupal 中使用的这个实体概念方面。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T15:17:31.990

在使用 Buildamodule.com 和其他资源对 Drupal 进行了更深入的研究之后，我现在知道这个问题的表述是错误的，我也采取了另一个角度来解决这个问题。所以我现在就在这里：我将一些数据存储在 sql-tables 中，并使用表单 api 构建一个表单以从用户那里获取起始值。他们可以从 sql 表支持的选择字段中选择其中一些值。在提交函数中（验证后），我使用实体 API 构建了一个内容类型记分卡的新节点。对于这一部分，我使用[http://drupal.org/node/1388922](http://drupal.org/node/1388922)中描述的方法 。我为某些字段设置值，然后保存节点

```
 entity_save('node', $entity) 
```

这工作正常。我要做的最后一件事是加载创建和保存的节点，并将节点作为提交函数的最终结果查看给用户。我试图把它放在提交函数的末尾，但没有奏效：

```
 $node=node_load(the nid of the saved node);
 node_view($node); 
```

经过一番搜索，我发现了这个：

```
 cache_clear_all();
  $form_state['redirect'] = 'node/nid ';
  return; 
```

我认为解决了它。

# vba - 如何在 VBA 中同时单击和拖动约会对象时捕获 Appt_Write 事件

> ID：14172866
> 
> 赞同：2
> 
> 时间：2013-01-05T14:43:55.857
> 
> 标签：vba, outlook

我正在尝试捕获日历约会对象上的 appt_Write 事件。下面的代码适用于所有情况，除非用户选择约会并一键拖动。

有没有更好的方法来设置 appt 对象，以便我可以为任何日历上的任何约会捕获 appt_Write 事件？

```
Private WithEvents objExplorer As Outlook.Explorer
Private WithEvents appt As Outlook.AppointmentItem

Public Sub Application_Startup()
Set objExplorer = Application.ActiveExplorer
End Sub

Private Sub objExplorer_SelectionChange()
 If objExplorer.CurrentFolder.DefaultItemType = olAppointmentItem Then
    If objExplorer.Selection.Count > 0 Then
      Set appt = objExplorer.Selection(1)
    End If
  End If
End Sub

Private Sub appt_Write(Cancel As Boolean)
'Do something with Appt Object here.  When a user clicks and drags,
'this write event has already fired by the time the Appt object is set.
End If
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T23:01:21.197

您可以尝试在文件夹上使用 Items.ItemChange 事件，但它仅在项目更改后触发。

# ruby-on-rails - 我如何在两个不同的 Rails 应用程序中使用一个数据库

> ID：14172875
> 
> 赞同：0
> 
> 时间：2013-01-05T14:44:57.173
> 
> 标签：ruby-on-rails, jquery-mobile, heroku, mobile-application

我想创建我的rails 应用程序的移动版本，所以我制作了一个新的rails 应用程序并想用phonegap 和jquery-mobile 构建它。问题是我想以移动应用程序 ID 与 Heroku 服务器上已经存在的应用程序连接的方式使用它。

是否可以？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T16:36:06.603

是的，有可能！Heroku 将您的所有数据存储在 Amazon AWS 上，您可以访问这些数据库。请注意，我只是使用 PG 连接到数据库而不是使用 ActiveRecord 手动完成此操作。

这就是我的建议，在您的 Rails 应用程序上创建一个 RESTful API，您的移动应用程序可以调用该 API 来进行读取、插入、删除和更新。然后对 Rails 应用程序进行编程以执行以下操作：

我假设您正在使用 PostGreSQL，例如大多数 Heroku 应用程序。执行以下操作： 1\. 转到[https://postgres.heroku.com/login](https://postgres.heroku.com/login)并登录 2\. 选择您要访问的数据库 3\. 在“连接设置选项卡”下复制详细信息

现在在您的应用程序中，为各种连接设置创建一些实例变量，如下所示：

```
@dbname = "your db name"
@host = "your host"
@user= "your user details"
@password = "your password"
@port = "5432"
@sslmode = "require" 
```

然后通过以下方式创建与数据库的新连接：

```
conn = PG::Connection.new(:dbname => @dbname, :host => @host, :user => @user, :password => @password, :port => @port, :sslmode => @sslmode) 
```

您可以使用此连接从您的两个应用程序中读取、插入、更新、删除。有关如何执行此操作的更多信息，请访问：[http ://deveiate.org/code/pg/PG/Connection.html](http://deveiate.org/code/pg/PG/Connection.html)

希望这可以帮助！

# php - php中多个用户的多个日历

> ID：14172879
> 
> 赞同：0
> 
> 时间：2013-01-05T14:45:23.657
> 
> 标签：php, calendar, multi-user

我一直在研究很多日历脚本，但到目前为止，我还没有找到一个为每个用户提供单独的日历——或者可以通过这种方式轻松修改——的脚本。更具体地说：不同的用户不应该共享一个日历，每个人都有自己的。每个人都可以修改自己的日历，该日历对其他所有用户都是可见的——只读的。

与此类似的功能：http: [//demo.guestcal.com/admin/](http://demo.guestcal.com/admin/) 问题是大多数日历在数据库中使用多个表，而我无法创建数千个单独的数据库。同一数据库中每个用户的单独表就可以了。

在从头开始编程之前，我想知道是否有人知道接近这些需求的 PHP 脚本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T16:22:00.253

对于不同的外观和感觉，可以为日历指定/创建不同的 CSS 文件。并将每个用户设置保存在数据库中。

# c# - C# 中 Datagridview 单元格值的验证

> ID：14172883
> 
> 赞同：8
> 
> 时间：2013-01-05T14:46:08.733
> 
> 标签：c#, validation, datagridview

我有一个包含 datgridview 的 Windows 窗体应用程序。我需要对 datagridview 单元格强制执行单元格验证，以便它不接受负值。我从 msdn 库中找到了适合它的代码。

```
private void dataGridView1_CellValidating(object sender,
DataGridViewCellValidatingEventArgs e)
{
dataGridView1.Rows[e.RowIndex].ErrorText = "";
int newInteger;

// Don't try to validate the 'new row' until finished  
// editing since there 
// is not any point in validating its initial value. 
if (dataGridView1.Rows[e.RowIndex].IsNewRow) { return; }
if (!int.TryParse(e.FormattedValue.ToString(),
    out newInteger) || newInteger < 0)
{
    e.Cancel = true;
    dataGridView1.Rows[e.RowIndex].ErrorText = "the value must be a Positive integer";
}
} 
```

不幸的是，代码只允许在 datagridview 中输入整数。由于我有一个列名称为“项目名称”，它应该作为文本输入，因此代码中存在问题。当我输入项目名称时，它会生成一条错误消息。其余的单元格验证工作正常！我应该如何编辑代码以使其不会产生此错误？

提前致谢

米尔法特

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-05T14:48:28.700

`DataGridViewCellValidatingEventArgs` `e`有一个`.ColumnIndex`属性，您可以检查以确保仅在您希望的列上完成验证。

```
private void dataGridView1_CellValidating(object sender,
DataGridViewCellValidatingEventArgs e) {
    if (e.ColumnIndex == dataGridView1.Columns["MyNumericColumnName"].Index) {
        dataGridView1.Rows[e.RowIndex].ErrorText = "";
        int newInteger;

        // Don't try to validate the 'new row' until finished  
        // editing since there 
        // is not any point in validating its initial value. 
        if (dataGridView1.Rows[e.RowIndex].IsNewRow) { return; }
        if (!int.TryParse(e.FormattedValue.ToString(),
            out newInteger) || newInteger < 0)
        {
            e.Cancel = true;
            dataGridView1.Rows[e.RowIndex].ErrorText = "the value must be a Positive integer";
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T15:13:59.833

试试这个并想通了。

```
 private void dataGridView1_CellValidating(object sender, DataGridViewCellValidatingEventArgs e)
    {
        if (dataGridView1.IsCurrentCellDirty)
        {
            if (e.ColumnIndex == 0) //<-Column for String
            {
                Console.WriteLine(dataGridView1[e.ColumnIndex, e.RowIndex].EditedFormattedValue.ToString());
                //Your Logic here
            }
            if (e.ColumnIndex == 1) //<-Column for Integer
            {
                Console.WriteLine(dataGridView1[e.ColumnIndex, e.RowIndex].EditedFormattedValue.ToString());
                //Your Logic here
            }
        }
    } 
```

# c++ - nuwen.net MinGW Distro 中没有“fileno()”函数？

> ID：14172884
> 
> 赞同：1
> 
> 时间：2013-01-05T14:46:10.043
> 
> 标签：c++, mingw

这段代码：

```
#include <stdio.h>
#include <iostream>
using namespace std;
int main() {
  cout << fileno(stdout) << endl;
} 
```

在这个编译器中工作正常：http: [//sourceforge.net/projects/mingwbuilds/files/host-windows/releases/4.7.2/32-bit/threads-posix/sjlj/x32-4.7.2-release-posix- sjlj-rev6.7z](http://sourceforge.net/projects/mingwbuilds/files/host-windows/releases/4.7.2/32-bit/threads-posix/sjlj/x32-4.7.2-release-posix-sjlj-rev6.7z)

但在这个包中：http: [//nuwen.net/files/mingw/mingw-9.5-without-git.exe](http://nuwen.net/files/mingw/mingw-9.5-without-git.exe)

它返回：`test.cpp:5:24: error: 'fileno' was not declared in this scope`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-01-10T03:52:38.593

MinGW 有`fileno`. 从我的 MinGW 窗口：

```
$ grep -r fileno c:/mingw/include
c:/mingw/include/stdio.h:_CRTIMP int __cdecl __MINGW_NOTHROW    _fileno (FILE*);

c:/mingw/include/stdio.h:_CRTIMP int __cdecl __MINGW_NOTHROW    fileno (FILE*);
c:/mingw/include/stdio.h:#define _fileno(__F) ((__F)->_file)
c:/mingw/include/stdio.h:#define fileno(__F) ((__F)->_file) 
```

糟糕，不幸的是，问题在于 MinGW 做了一些非常愚蠢的事情。它使扩展的可见性`stdio.h`（与 GCC 无关的库）成为 GCC 特定方言控制标志的主题。

Cygwin 也有这个问题，几年前在 Cygwin 邮件列表中的一个讨论线程中，他们强烈否认这是一个问题。

正确的方法是使用特征选择宏，例如`_POSIX_SOURCE`，`_XOPEN_SOURCE`等等。（这些宏近年来激增，变得更加复杂。）

MinGW 应该服`-D_POSIX_SOURCE`从命令行显示`fileno`，即使`--ansi`是指定的。

现在的情况是，您必须妥协语言方言并接受 GCC 扩展和不合规性，只是因为您希望 POSIX 函数声明可见。

**然而，我想出了一个解决方法，它不涉及在源代码中做任何丑陋的事情。看这个：**

```
gcc -Wall -ansi -pedantic -U__STRICT_ANSI__ foo.c -c 
```

就是这样。`-D_POSIX_SOURCE`在 MinGW 上，我们使用`-U__STRICT_ANSI__`剥离 GCC 的宏，而不是使用类似的特征选择宏。

我在`./configure`脚本中添加了一个测试来检测这种损坏情况并添加`-U__STRICT_ANSI__`到`CFLAGS`. 在我的项目中就像一个魅力。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-05T13:19:35.437

您没有指定正在使用的编译器标志，但这可能是因为您正在使用 编译`-ansi`，这会强制执行严格的 ANSI 合规性并禁用兼容性宏。（或类似的东西`-std=c99`，这意味着`-ansi`。）

尝试不使用`-ansi`或指定类似的标准`-std=gnu99`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-05T14:52:27.727

`fileno`不是 C 或 C++ 的一部分，而是[POSIX](http://linux.die.net/man/3/fileno)。因此它在 Windows 上没有位置。要编写可移植代码，请坚持 C 和 C++ 标准提供的特性。

这可能就是为什么他们不在 Windows 的 GCC 端口中发布它的原因。相比之下，您链接到的 POSIX 线程实现可能依赖它作为实现细节，以使移植的代码尽可能与原始代码相似。

任何进一步的理由都是主观的和离题的；简而言之，你必须问*他们*！

# c# - 来自 HTTP 响应的 XML 格式

> ID：14172885
> 
> 赞同：0
> 
> 时间：2013-01-05T14:46:17.683
> 
> 标签：c#, asp.net, xml, parsing, httpresponse

我正在使用一些 asp.net/c# 和一些我发布的 HP ILO 脚本，然后我得到一个响应（应该是 XML）

不幸的是，如果 XML 格式不正确，则响应会由于错误而无法使用 XML 解析器。

这是一个示例输出：

```
IP Address is: 10.3.3.1
<?xml version="1.0"?>
<RIBCL VERSION="2.22">
    <RESPONSE
        STATUS="0x0000"
        MESSAGE='No error'
     />
    <INFORM>Scripting utility should be updated to the latest version.</INFORM>
</RIBCL>
<?xml version="1.0"?>
<RIBCL VERSION="2.22">
    <RESPONSE
        STATUS="0x0000"
        MESSAGE='No error'
     />
</RIBCL>
<GET_EMBEDDED_HEALTH_DATA>
    <FANS>
        <FAN>... 
```

因此，如果我删除了不正确的语法，我关心的所有数据都可以`<GET_EMBEDDED_HEALTH_DATA>`在 XML 解析器中正常工作。

我的问题是如何只提取/格式化我需要的数据？我知道我可能会将不正确的 xml 响应保存到文本文件中，对其进行格式化，然后进行 xml 解析，但是有更好/更快的方法吗？

连续运行 100 次也需要很长时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T19:01:18.860

从上面显示的内容来看，XML 部分本身是格式良好的，但文本包含多个 XML 声明和多个根。这些是唯一的问题，还是其他地方存在实际糟糕的 XML？

如果这些是唯一的问题，那么这样的事情可能会起作用：

```
string declarationsRemoved = output.Replace("<?xml version=\"1.0\"?>", "");

XmlDocument doc = new XmlDocument();
doc.LoadXml("<root>" + declarationsRemoved + "</root>");

XmlNode healthData = doc.SelectSingleNode("/root/GET_EMBEDDED_HEALTH_DATA"); 
```

或者，您可以使用正则表达式仅提取您需要的部分：

```
string healthDataXml = Regex.Match(output, 
    "<GET_EMBEDDED_HEALTH_DATA>.*</GET_EMBEDDED_HEALTH_DATA>", RegexOptions.Singleline).ToString(); 
```

# c - 使用 wsprintf 将 int 转换为 wchar_t*

> ID：14172886
> 
> 赞同：4
> 
> 时间：2013-01-05T14:46:21.710
> 
> 标签：c, wchar-t

我正在尝试使用作为参数的`wchar_t*`格式化。`int`我用谷歌搜索了很多，但我最终变得更加困惑。因此，请考虑以下代码：

```
int main(int argc, char** argv) {

   wchar_t buf[16];
   wsprintf(buf, L"%d", 5);
   wprintf(L"[%ls]\n", buf);

   system("pause");
   return 0;

}; 
```

假设`wchar_t`,`wsprintf`和分别是 ,和`wprintf`的宽字符等价物`char`，我希望上面的内容可以打印，但它会在和之间打印垃圾。达到预期结果的正确方法是什么？我在这里误解了什么？`sprintf``printf``[5]``[``]`

（我应该在这里澄清可移植性比安全性更重要，所以我想知道一个使用这一系列功能而不是更安全的供应商特定扩展的解决方案。）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-05T15:46:29.013

`wsprintf()`是一个特定于 Windows 的函数，它在 Unix 上不可用。您想要实现的目标可以以更便携的方式完成（我已经尝试了这个稍微修改过的代码片段，它按预期工作）：

```
#include <wchar.h>
#include <stdio.h>

int main(int argc, char **argv)
{
    wchar_t buf[16];
    swprintf(buf, sizeof(buf) / sizeof(*buf), L"%d", 5);
    wprintf(L"[%ls]\n", buf);

    return 0;
} 
```

输出：

```
[5] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-09-16T13:16:55.433

`wsprintf()`是微软的混合功能之一。它具有不同的签名，具体取决于是否`_UNICODE`在预处理期间定义。（引擎盖下发生了什么，是否有一个替换`#ifdef`或基于该符号的不存在或存在。）`wsprintf``wsprintfA``wsprintfW`

如果`_UNICODE`已定义，则它期望缓冲区为`wchar_t[]`.

如果`_UNICODE`未定义（通常是默认值），则它期望缓冲区为`char[]`. 这就是这里发生的事情。如果您有警告，它可能会显示有关不兼容指针类型的警告。垃圾是因为它存储的 8 位 ascii`buf`被`wprintf()`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-05T15:39:55.617

在我看来，您为输出使用了不正确的格式说明符。我怀疑你会想要

```
wprintf(L"[%s]\n", buf); 
```

%ls 看起来像是说明符的无效组合 - l 用于 s “字符串”类型说明符上的“long int”大小前缀。我在 wprintf 上找到的文档表明它将“s”类型说明符视为指向一个宽字符串（至少对于 MS Visual Studio）。

# javascript - Coffeescript：动态创建调用方法的类的实例

> ID：14172887
> 
> 赞同：5
> 
> 时间：2013-01-05T14:46:40.537
> 
> 标签：javascript, oop, node.js, inheritance, coffeescript

我正在使用面向对象的咖啡脚本构建一个 Node.js 应用程序。

我有`super class`一个静态方法，例如：

```
class RedisObject
 @find: (id, cb) ->
    client.HGETALL "#{@className()}|#{id}", (err, obj) =>
      unless err
        cb(new RedisObject(obj, false)) 
```

有一个像

```
 class User extends RedisObject 
```

当我调用`find()`时，`User class`我希望它传递一个实例`User`而不是`RedisObject`回调函数。

我试图通过获取调用该方法的实际类的类名来实现这一点

```
@constructor.name 
```

并用于`eval()`从中生成一个实例 - 但问题是子类将在超类中未定义。

如何实现`find`根据调用的类获取方法返回的不同类型实例的行为，而不必在每个子类中重写它？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-05T15:22:22.183

我不是 CoffeeScript 方面的专家，但是这行不通吗？

```
class RedisObject
  whoami: () -> "I am a RedisObject"
  @find: () ->
    new this()

class User extends RedisObject
  whoami: () -> "I am a User"

console.log RedisObject.find().whoami() // -> "I am a RedisObject"
console.log User.find().whoami()        // -> "I am a User" 
```

至少上述测试似乎通过了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T15:03:28.680

```
@find: (id, cb,klass=RedisObject) ->
    client.HGETALL "#{@className()}|#{id}", (err, obj) =>
      unless err
        cb(new klass(obj, false)) 
```

在子类中

```
@find: (id, cb,klass=User) ->
    super(id,cd,klass) 
```

这就是我会做的，尽管它不是 100% 动态的。

# java - Java ServerSocket 和 Socket 实现一个 IM 系统

> ID：14172896
> 
> 赞同：1
> 
> 时间：2013-01-05T14:47:20.370
> 
> 标签：java, sockets, serversocket

我正在尝试用 Java 实现一个小型 LAN IM 系统。我有一个 KDC（密钥分发中心），用于向用户发送会话密钥。这是我最初设计的图片： 关于与登录用户聊天的![在此处输入图像描述](../Images/f7d461e2dcd039ca48c1866ae74cdd84.png)
**步骤**
：（ 两个用户，A 和 B）
1.`A`发送请求`KDC`说他想与之交谈`B`
2.`KDC`转发请求`B`
3.`B`接受或拒绝请求
4\. 如果`B`接受，`KDC`将发送`A`'s public key to`B`和`B`'s public key to `A`，否则发送 null
5.`A`并`B`生成一个密钥以相互聊天
现在我的**问题**：
我使用`ServerSocket`实施`KDC`。它将管理和分发公钥。我`Socket`用来实现`User`，我知道如何让一个`User`沟通，`KDC`但我不知道如何让一个`User`沟通与另一个`User`。所以我必须同时使用`Socket`并`ServerSocket`实施`User`？如果`A`同时与两个或更多其他用户交谈。如何处理 a 中的`sockets`and ？`server sockets``User`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-03-17T10:16:15.600

你好我认为你应该通过netty-socketio实现它，在你的场景中，KDC应该知道每个节点，但每个节点不需要知道其他节点，所以KDC的关键功能是路由消息。尝试使用 socketio replace io 你会得到更好的性能！netty-socketio 的链接如下图！ [https://github.com/mrniko/netty-socketio](https://github.com/mrniko/netty-socketio)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-17T10:26:32.523

显然，服务器必须将消息推送给用户（转发的请求）。因此，要么用户保持对服务器开放的永久套接字连接，要么用户必须准备好接受来自服务器的新连接。

对于第一个选项，您可以通过服务器在用户之间路由所有消息，即就像服务器协商原始请求一样，它也分发消息。优点：基础设施比较简单，可以用相同的逻辑处理请求和消息，并且很容易将消息分发给多个用户。明显的缺点：服务器成为所有消息的瓶颈，并且在安全方面它会看到所有消息。

第二个选项意味着，是的，每个用户都必须有一个 ServerSocket 才能接受传入连接，以及通过套接字启动传出连接。在这种情况下，您必须找到一种可靠的方式来协商谁与谁联系。一个自然的解决方案是让发送聊天请求的用户也通过套接字连接到另一个用户的 ServerSocket。优点：消息可以直接在用户之间传递。缺点：更复杂的基础设施，尤其是当多个用户互相聊天时。而且它并不比集中式服务器解决方案更安全，因为它仍然需要服务器来处理请求。

# yii - Yii 小部件有两个输入。如何为每个输入指定周围的 HTML？

> ID：14172898
> 
> 赞同：0
> 
> 时间：2013-01-05T14:47:40.420
> 
> 标签：yii, yii-components, yii-events

如果小部件只生成一个输入字段，则自定义视图非常简单：

```
<div style="font-size: 14px; line-height: 17px;">Страна</div>
<div class="row">
<label> This is something: <? $this->widget(); ?></label>
</div> 
```

当然，我们可以为每个输入指定 $html_pre 和 $html_post 并像这样管理：

```
function widget.run()
{
    echo $html_pre1;
    echo CHtml::activeTextField(...);
    echo $html_post1;
    echo $html_pre2;
    echo CHtml::activeTextField(...);
    echo $html_post2;
...
} 
```

但是非常难看。还有其他方法吗？

# mysql - 在两个表中找到最大记录

> ID：14172903
> 
> 赞同：0
> 
> 时间：2013-01-05T14:48:03.297
> 
> 标签：mysql, sql

我有两张桌子：

```
 question(qid int,title varchar(100))

 answer(aid int,qid int,vote int,content varchar(4096)) 
```

Qid 和aid 是主键。

每个问题都有一些答案，每个答案都有一个投票数。

现在采取一些问题qid，如果问题有一些答案，如何找到每个问题的最大（投票）答案？

前任：

```
mysql> select * from question;
+-----+-------+
| qid | title |
+-----+-------+
|   1 | abc   |
|   2 | efg   |
|   3 | hij   |
|   4 | mn    |
+-----+-------+

mysql> select * from answer;
+-----+------+------+---------+
| aid | qid  | vote | content |
+-----+------+------+---------+
|  77 |    3 |   45 | mysql2  |
| 110 |    1 |   95 | good    |
| 122 |    1 |   78 | bad     |
| 123 |    1 |   34 | bad2    |
| 223 |    2 |   56 | book1   |
| 224 |    2 |   82 | book2   |
+-----+------+------+---------+ 
```

现在，给定 qid(1,2)，我想找到以下结果：

```
+-----+------+------+---------+
| aid | qid  | vote | content |
+-----+------+------+---------+
| 110 |    1 |   95 | good    |
| 224 |    2 |   82 | book2   |
+-----+------+------+---------+ 
```

我想要完整的答案记录（包含所有列），而不仅仅是 max(vote) 列。

**我只想为每个问题显示最佳答案（最大投票答案）。**

MySQL 中最好的 SQL 是什么？

谢谢！

* * *

**2013/1/7 更新：**

如果存在，我想展示唯一一个最好`answer`的（最大投票答案）。@Brian Hoover 的答案仅在 MySQL 下工作正常。

也许没有一个 SQL 在所有数据库下都能正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T15:19:14.060

这是一种方法。

```
SELECT answer.aid, answer.qid, answer.vote, answer.content
   FROM answer
   JOIN (
          SELECT qid, max(vote) vote FROM answer
          GROUP BY qid) AS max_answer
    ON answer.qid = max_answer.qid AND answer.vote = max_answer.vote
   where answer.qid in (1,2)
   GROUP BY answer.qid, answer.vote 
```

[SQL小提琴](http://www.sqlfiddle.com/#!2/39bfe/9)

在这种情况下，平局将被打破，几乎是随机的，因此每个 questionID 只会显示一条记录，但不能保证在平局的情况下选择的答案是一致的

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-05T15:20:21.783

```
SELECT a.* FROM answer a
INNER JOIN (
  SELECT qid, MAX(vote) AS max_vote
  FROM answer
  WHERE qid IN (1,2)
  GROUP BY qid) b
  ON a.qid = b.qid
  AND a.vote = b.max_vote 
```

## [SQL小提琴](http://sqlfiddle.com/#!2/0db39/6)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-05T15:14:55.887

我认为这可以满足您的要求：

```
select a.*
from answer a
where a.qid in (1, 2) and
      a.vote = (select max(vote) from answer a2 where a2.qid = a.qid) 
```

此版本适用于任何数据库。在标准 SQL 中还有其他表达方式：

```
select a.*
from answer a join
     (select a.qid, max(vote) as maxvote
      from answer a
      where a.qid in (1, 2)
      group by a.qid
     ) asum
     on a.qid = asum.qid and a.vote = asum.maxvote 
```

请注意，我将`where`限制放在子查询中。否则，查询将需要对答案中的所有行进行分组，然后加入，然后进行过滤。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-05T15:16:35.497

请尝试以下查询：

```
select aid,qid,max(vote),content
from
(select a.aid aid,a.qid qid,a.vote vote,a.content content 
from question q join
answer a
on (a.qid = q.qid)
order by 3 desc) tbl
group by qid; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-05T15:59:44.313

```
select * from (
  select qid, aid ,vote
  from answers where qid  in ( 123, 456 ) 
  order by vote desc 
) aaa
group by qid 
```

如果某些记录具有相同的投票，这也可以。

# c++ - 在 C++ 中读取 Windows 注册表项 REG_BINARY

> ID：14172907
> 
> 赞同：1
> 
> 时间：2013-01-05T14:48:32.200
> 
> 标签：c++, windows, registry

我正在尝试读取 C++ 中的注册表项，这是我的功能：

```
 DWORD regkey()
{
    HKEY hKey;
    DWORD dwDisp = REG_BINARY;
    DWORD dwSize = sizeof(dwDisp);
    DWORD dwValue = 0;
    DWORD dwReturn;
    DWORD dwBufSize = sizeof(dwDisp);

    if( RegOpenKeyEx(HKEY_LOCAL_MACHINE, L"HERE\\IS\\THE\\REGKEY",0, KEY_ALL_ACCESS, &hKey) == ERROR_SUCCESS)
    {
        DWORD error = RegQueryValueEx(hKey,L"key",0,0, (LPBYTE)&dwReturn, &dwBufSize);
        if(error == ERROR_SUCCESS)
        {
            return dwReturn;
        }
    }

    RegCloseKey(hKey);

    return 0;
} 
```

但它什么也没返回...请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T15:14:27.743

注册表函数将返回一个有意义的错误代码，这可以帮助您诊断问题。尝试保留该代码：

```
{
    HKEY hKey;
    DWORD dwDisp = REG_BINARY;
    DWORD dwSize = sizeof(dwDisp);
    DWORD dwValue = 0;
    DWORD dwReturn;
    DWORD dwBufSize = sizeof(dwReturn);

    DWORD dwError = RegOpenKeyEx(HKEY_LOCAL_MACHINE, L"HERE\\IS\\THE\\REGKEY",0, KEY_READ, &hKey) ;
    if( dwError == ERROR_SUCCESS)
    {
        dwError = RegQueryValueEx(hKey,L"key",0,0, (LPBYTE)&dwReturn, &dwBufSize);
        if(error == ERROR_SUCCESS)
        {
            // it worked!
        }
        else
        {
            // it failed to read, check dwError for the error code
            dwResult = 0;
        }

        RegCloseKey(hKey);
    }
    else
    {
        // it failed to open, check dwError for the error code
        dwResult = 0;
    }

    return 0;
} 
```

如果您使用的是 Visual Studio，则可以中断任何故障点并`dwError,hr`在监视窗口中进行评估。格式说明`,hr`符使调试器为您查找错误代码并提供一个有意义的字符串来描述问题。这应该使您了解出了什么问题。

如果您能告诉我们哪个函数出现故障以及您从该函数返回了哪些代码，我们或许能够提供更详细的帮助。就目前而言，您向我们展示了一个猜谜游戏。也许您拼错了注册表项名称或给出了不正确的路径。您的代码似乎暗示您正在传递注册表项`RegQueryValueEx()`，但您的目的是向该函数传递值名称，而不是键名称。也许您在访问权限方面存在问题，因为您正在查看注册表的受保护部分，并且没有作为具有足够权限来读取该密钥的帐户运行。（所以，你应该通过`KEY_READ`而不是`KEY_ALL_ACCESS`。）

# php - 如何在php中创建一个全局配置文件

> ID：14172910
> 
> 赞同：0
> 
> 时间：2013-01-05T14:48:44.553
> 
> 标签：php, function, configuration

> **可能重复：**
> [读取和写入配置文件](https://stackoverflow.com/questions/2237291/reading-and-writing-configuration-files)

我的大部分功能取决于设置。

截至目前，我将我的设置值存储在数据库中。

例如，要在页面中显示广告，我正在检查我的数据库是否显示广告

我的意思是这样

```
$display_ad = 'get value from database';

if ($display_ad) {
echo 'Ad code goes here';
} 
```

这可以。但事实是我有超过 100 个设置。所以我认为如果我在 settings.php 文件中定义值，我的数据库负载将会减少

```
define('DISPLAY_AD', true); 

if (DISPLAY_AD) {
echo 'Ad code goes here';
} 
```

但我不确定这是正确的方法。是`define()`正确的解决方案。或者有没有更好更快的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T15:40:12.510

几个选项，如提到的那些，包括`.ini`文件（*使用[`parse_ini_file()`](http://php.net/manual/en/book.simplexml.php)等*）、XML（*可能与**[SimpleXML](http://php.net/manual/en/book.simplexml.php)**的一些混合物*），但我更喜欢将配置保留在原生 PHP 中。

该`include()`构造允许一个`return`从包含的文件。这使您可以：

**配置文件**

```
return [
    'foo' => [
        'bar' => [
            'qux' => true,
        ],
        'zip' => false,
    ],
]; 
```

**别处.php**

```
function loadConfig($file) {
    if (!is_file($file)) {
        return false;
    }
    return (array) call_user_func(function() use($file) {
        // I always re-scope for such inclusions, however PHP 5.4 introduced 
        // $this rebinding on closures so it's up to you
        return include($file);
    });
}

$config = loadConfig('config.php');

if ($config['foo']['bar']['qux']) {
    // yeop
}
if ($config['foo']['zip']) {
    // nope
} 
```

需要特别小心，因为当您尝试取消引用不存在的维度时，PHP 会在您身上大便：

```
if ($config['i']['am']['not']['here']) { // poop

} 
```

创建一个包装类/函数来管理您需要的配置是相当简单的。您可以添加对级联配置（在*ASP`web.config`世界中的*一种）、缓存等的支持。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T14:54:21.480

`define()`是相当不错的做事方式。另一种方法是定义一个全局数组。如

```
$config['display_ad']=true;
$config['something_else']='a value';
//...
function doSomething() {
   global $config;
   if ($config['display_ad']) echo 'Ad code goes here';
} 
```

后一种方式是许多项目使用的方式，例如 phpmyadmin，原因可能是，您不能`define()`使用非标量值，例如`define('SOME_ARRAY',array('a','b'))`无效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-05T14:57:24.073

最简单的执行是一个ini文件。您创建一个如下所示的文件：

```
value1 = foo
value2 = bar
value3 = baz 
```

然后，从 PHP 中，您可以执行以下操作：

```
$iniList = get_ini_file("/path/to/ini/file/you/just/made");
if ($iniList['value1'] == 'foo') {
    print "This will print because the value was set from get_ini_file."
} 
```

如果你有很多类似的常量，那比几十个定义方法要好，比数据库获取要快。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-05T16:28:06.473

你也可以在这里创建一个类： [php.net](http://php.net/manual/en/function.parse-ini-file.php#92085)

# android - Android：颜色更改后触发重绘

> ID：14172914
> 
> 赞同：2
> 
> 时间：2013-01-05T14:49:10.593
> 
> 标签：android, view, redraw

我目前正在开发一款连接四游戏。

我的游戏通过用户按下“新游戏”按钮来运行。然后这会在屏幕上绘制 42 (7*6) 个绿色圆圈。这些圆圈用于表示连接四个板上的孔，即绿色圆圈当前不包含玩家的令牌/计数器

目前，我正在努力添加令牌/计数器。我有代码工作（到某个点），使用户能够选择一列。使用 log.d() 似乎我成功地改变了间隙的颜色值。我的问题是我不知道如何将这种颜色变化发送到视图，即间隙实际上从绿色变为红色（玩家的标记颜色）。

如何向视图发送请求以便重新绘制间隙？

NB 很抱歉缺少代码，但它目前很混乱，不能完全正常工作。视图由 ConnectFourView.java (View) 控制，游戏屏幕是 Board.java (Model) 和确定选择哪一列的代码 Gaps.java (控制器)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-05T15:03:14.467

只需调用`invalidate()`您的视图，它将被重绘

# php - 继续获取数组的 udefined 变量

> ID：14172917
> 
> 赞同：1
> 
> 时间：2013-01-05T14:49:30.447
> 
> 标签：php

在`Text5.php`访问`Text2.php`. 我的问题是我为什么会得到一个未定义的变量，因为我已将变量包含`$steps`为数组：

文本5.php

```
 <?php

$steps = array(1 =>'Text1.php',2 => 'Text2.php',3 => 'Text3.php',4 => 'Text4.php',5 => 'Text6.php',6 => 'Text7.php');

function allowed_in($steps){
// Track $latestStep in either a session variable
// $currentStep will be dependent upon the page you're on

if(isset($_SESSION['latestStep'])){
   $latestStep = $_SESSION['latestStep'];
}
else{
   $latestStep = 0;
}
$currentStep = basename(__FILE__); 

$currentIdx = array_search($currentStep, $steps);
$latestIdx = array_search($latestStep, $steps);

if ($currentIdx - $latestIdx == 1 )
    {
       $currentIdx = $_SESSION['latestStep'];
       return 'Allowed';
    }
    return $latestIdx;
}

?> 
```

文本2.php

```
 if (allowed_in()=== "Allowed")
    {
        //Text2.php code
    }
    else
        {
$page = allowed_in()+1;
?>

<div class="boxed">
<a href="<?php echo $steps[$page] ?>">Link to Another Page</a>
</div>

<?php   

}

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T15:06:29.743

> 我的问题是我为什么会得到一个未定义的变量，因为我已将变量 $steps 作为数组包含在内

您实际上从未`allowed_in`使用任何数组调用过。

两者都`if (allowed_in()=== "Allowed")`调用`$page = allowed_in()+1;`没有`allowed_in()`任何参数的函数，并且在你的函数中：

`function allowed_in($steps){`您指定必须有一个变量（我们创建 name `$steps`）。

您可以使用`=`符号创建默认参数：

```
function allowed_in($steps = array()){
    //Logic
} 
```

这意味着您现在可以不带参数调用它。

您可能还在寻找是否`global`因为您的`$steps`变量在全局范围内：

```
function allowed_in(){
    global $steps;
    //Logic
} 
```

# git - Git：如何从分支中删除特定的提交

> ID：14172918
> 
> 赞同：0
> 
> 时间：2013-01-05T14:49:29.753
> 
> 标签：git

我有两个分支，即 master 和 development 。所有开发都将在 development 分支内完成，并将与 master 合并以进行 build 。

我检查了 master 分支，cherry 选择了属于 development 分支的 5 个提交并将其推送到 master 远程存储库。

所有这些事情都很顺利。

```
git checkout master 
git status
git cherry-pick a7644fc2bc7b09fe88cb1cbb75e0547dd1d7321d
git cherry-pick 335bf121a6aa7bc1e334b94d1a742b0f9ecfb9b6
git cherry-pick 5dee244a47d0346d5080ecd34984683c8f442c93
git cherry-pick 9f8fe22b346ba80089126afbf29ac063ea7b9b32
git cherry-pick 5dee244a47d0346d5080ecd34984683c8f442c9h
git push 
```

现在我的要求是我需要从主人那里取出一颗樱桃来进行构建。

我不确定，但是当我用谷歌搜索时，我发现了这两个命令

```
git revert --strategy resolve

git rebase 
```

`how can i remove a particular commit`请从主分支告诉我

**更新部分**

当我 git revert 564d01c3870ca5a55b171fc6f061e0cc2a8f4879 这个屏幕出现时，我可以避免这个吗？

![在此处输入图像描述](../Images/cf10b6cec92cb3b77456b2225ff9ac14.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T14:52:24.553

使用`git revert <commit>`. 如果您不希望编辑器弹出使用`--no-edit`选项。如果您不想*实际*提交还原，只需将其应用到您的工作目录，使用该`--no-commit`选项。

如果您只推送到受控存储库并且您肯定知道没有人从中拉出，那么您可以做一些`git reset --hard <commit>^`然后重新挑选您真正想要的提交。但这*不*推荐。

# java - Java do-while 细节

> ID：14172919
> 
> 赞同：1
> 
> 时间：2013-01-05T14:49:32.360
> 
> 标签：java, matrix, do-while

我的代码出错，但我不知道如何纠正它：

```
public class Cenas {
public static void main(String[] args) {
    //gera matrizes de tamanho aleatório com uns e zeros
    int a = 2;//(int)(Math.random() *3) + 1;
    int b  = 2;//(int)(Math.random() *3) + 1;
    int[][]matriz = new int [a][b];
    do{
        for (int i=0; i<a; i++) {
            for (int j=0; j<b; j++) {
                matriz[i][j] = (int) Math.round(Math.random());
                System.out.print(matriz[i][j] + " ");
            }
            System.out.println("");
        }
    }while(matrizIdentidade(matriz)==true); //the error is in here!!! the ";"

public static boolean matrizIdentidade (int[][]m){
    boolean diagonal = false;
    if (m.length==m[0].length) //matriz.Testada[0] é o comprimento da matriz
        for (int i = 0; i < m.length; i++)
            for (int j = 0; j < m[0].length; j++)
                if(i==j && m[i][j]==1)
                    if(i!=j && m[i][j]==0)
                        diagonal = true;
    return diagonal;
}
} 
```

它生成随机矩阵并告诉我它们是否是单位矩阵。我将 System.out.print 和维度 2 x 2 仅用于测试。该错误使我的循环无限...

“;” 在注释行上出现红色下划线（在 Eclipse 中）给我一个错误。

我谦虚地认为你错过了我的问题。我不知道我的方法中的陈述是否正确（我正在研究它），但让我来到这里的是“;” 给我一个错误：“语法错误，插入“}”以完成 MethodBody”。如果那是由于我的错误编码逻辑我道歉。但我认为，相反，这表明我在 do-while 循环中出现了一些语法错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-05T14:53:23.757

您仅由最后一个成员定义返回值

```
 diagonal = true; 
```

应该相反，你开始假设矩阵是恒等式，当你检查它不是真的时返回假。

```
if((i==j && m[i][j]!=1) || (i!=j && m[i][j]!=0)) {
   // this is not an identity matrix, so you can stop
   return false;
} 
```

如果循环结束，矩阵就是恒等式，所以 return `true`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T14:53:47.457

循环 do-while 是无限的，因为它永远不会得到`matrizIdentidade(matriz)==true`.

尝试浏览矩阵的元素两次以检查对角矩阵的两个属性。请试试这个：

```
public static boolean matrizIdentidade (int[][]m){

    boolean diagonal1 = false, diagonal2 = false  ;

    if (m.length==m[0].length) //matriz.Testada[0] é o comprimento da matriz
        for (int i = 0; i < m.length; i++)
            for (int j = 0; j < m[0].length; j++)
                    if(i!=j && m[i][j]==0)
                        diagonal1 = true;

        for (int i = 0; i < m.length; i++)
            for (int j = 0; j < m[0].length; j++)
                    if(i==j && m[i][j]==1)
                        diagonal2 = true;

        if(diagonal1 == true && diagonal2 == true ) return true
        else return false; 
} 
```

如果问题与`do-while`检查此[文档](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/while.html) 片段的语法有关：

```
 do {
            System.out.println("Count is: "
                               + count);
            count++;
        } while (count < 11); 
```

# mysql - 从多个范围中选择多个值

> ID：14172929
> 
> 赞同：3
> 
> 时间：2013-01-05T14:51:41.400
> 
> 标签：mysql

> **可能重复：**
> [在 SQL 中，如何在范围内“分组”？](https://stackoverflow.com/questions/232387/in-sql-how-can-you-group-by-in-ranges)

我有这样的桌子

```
price
id  |  prices
1   |   3910
2   |   4125
3   |   3740
4   |   2700
5   |   1600
6   |   2150
7   |   2430 
```

我希望的输出是这样的

```
1500-1999  |  2000-2499 | 2500-2999  | 3000-3499 | 3500-3999 | 4000-4499  |   allvalues
--------------------------------------------------------------------------------------
   1       |      2     |      1     |     0     |     2     |     1      |   7 
```

解释：

*   1500-1999 --> 表示我想要计数介于 1500 和 1999 之间的数字，依此类推，以及其他数字。

*   allvalues 是统计所有值。

    *如果有人需要在那里测试它，这里是[sql fiddle 。](http://sqlfiddle.com/#!2/5803e/1)

希望一切都清楚，感谢您的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-05T14:59:50.503

这是一种使用范围的枢轴。对于使用数据透视查询的模式是相同的`SUM(CASE...)`

```
SELECT
  SUM(CASE WHEN prices BETWEEN 1500 AND 1999 THEN 1 ELSE 0 END) AS `1500-1999`,
  SUM(CASE WHEN prices BETWEEN 2000 AND 2499 THEN 1 ELSE 0 END) AS `2000-2499`,
  SUM(CASE WHEN prices BETWEEN 2500 AND 2999 THEN 1 ELSE 0 END) AS `2500-2999`,
  SUM(CASE WHEN prices BETWEEN 3000 AND 3499 THEN 1 ELSE 0 END) AS `3000-3499`,
  SUM(CASE WHEN prices BETWEEN 3500 AND 3999 THEN 1 ELSE 0 END) AS `3500-3999`,
  ...
  COUNT(*) AS `All Values`
FROM
  prices 
```

替换其余的范围...`CASE`如果条件匹配并且这些由聚合`SUM()`s 相加，则生成 0 或 1。

[http://sqlfiddle.com/#!2/5803e/10](http://sqlfiddle.com/#!2/5803e/10)

# yii - 在 Yii 中过滤用户输入

> ID：14172935
> 
> 赞同：0
> 
> 时间：2013-01-05T14:52:22.827
> 
> 标签：yii, yii-extensions, yii-components

我阅读了有关数据验证的 Yii 教程，但有一个问题：我怎样才能自动**过滤**用户输入（例如，我知道必须修剪标识符，或者标识符必须是整数）。

有没有最佳实践？

# python - 关于 BeautifulSoup 的 append 方法的困惑

> ID：14172941
> 
> 赞同：-2
> 
> 时间：2013-01-05T14:53:00.743
> 
> 标签：python, beautifulsoup

我试图测试以下内容。现在我看到了一件令人怀疑的事情，如下所示：

```
>>> from bs4 import BeautifulSoup
>>> soup = BeautifulSoup("<a>Foo</a>")
>>> soup.a.append("Bar")
>>> soup
<a>FooBar</a>
>>> soup.a.contents
[u'Foo', u'Bar']
>>> 
```

我很困惑为什么它来`[u'Foo', u'Bar']`代替`[u'FooBar']`？

你能帮我解决这个概念吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T15:04:51.890

试试这个：

```
>>> from BeautiulSoup import NavigableString
>>> soup = BeautifulSoup("<a>Foo</a>")
>>> soup.a.contents = [NavigableString(str(soup.a.contents[0]) + 'Bar')]
>>> soup
<a>FooBar</a> 
```

# css - CSS 属性选择器

> ID：14172943
> 
> 赞同：2
> 
> 时间：2013-01-05T14:53:26.047
> 
> 标签：css, attributes, css-selectors

[我在w3school](http://www.w3schools.com/cssref/css_selectors.asp)学习 css 。css 选择器表有行：

> [属性|=值]

*   [lang|=en] 选择具有以“en”开头的 lang 属性值的所有元素

> [属性^=值]

*   a[src^="https"] 选择 src 属性值以“https”开头的每个元素

[attr |= value] 和 [attr ^= value] 除了双引号有什么区别？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-05T14:57:07.747

[attr|=value] 表示属性名称为 attr 的元素，其值是由连字符分隔的单词列表，其中一个恰好是“值”。它可用于语言子代码匹配。

[attr^=value] 表示属性名称为 attr 且其值以“value”为前缀的元素。

看看[w3fools](http://www.w3fools.com)

我推荐[https://developer.mozilla.org/en-US/docs/CSS/Attribute_selectors](https://developer.mozilla.org/en-US/docs/CSS/Attribute_selectors)和整个 MDN

# html - 如何修复css填充

> ID：14172951
> 
> 赞同：1
> 
> 时间：2013-01-05T14:54:21.250
> 
> 标签：html, css, forms, css-float

从昨天开始，我一直在为这个登陆页面而苦苦挣扎，我无法修复表单部分。

这是[一个链接](http://socialmedia.euc.ac.cy/landing/masterlaw//)！正如你所看到的，页面末尾的表格是一团糟。

在下面找到我使用的 CSS 片段。我做错了什么？

```
#form {
background: #F1F1F1;
font-size: 22px;
margin:  25px 20px 35px 0px;
padding: 35px 5px 35px 0px;
text-align: left;
width: 100%;} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T14:59:25.663

好的，我已经更改了以下属性`#form`并且它起作用了：

```
#form {
 padding: 35px;
 width: auto;
 margin: 25px 0;
}

#form p {
  float: none; /*or remove float line */
} 
```

设置宽度并添加填充后，它将大于设置的宽度。我自己解释了吗？（我的英语很烂）

提交按钮下方会有一些填充，但您可以轻松修复它。

# xcode - 如何将目标添加到测试方案？

> ID：14172953
> 
> 赞同：0
> 
> 时间：2013-01-05T14:54:40.277
> 
> 标签：xcode, unit-testing, ocunit

我已经为一个项目配置了单元测试，我需要在测试方案中使用运行方案中的类。

这是因为如果我尝试使用在运行方案中使用的类，则会收到链接器错误，链接器无法识别该（用户定义的）类。

我将测试包称为“TestBundle”，除非我使用其他类，否则我可以测试应用程序。这是我在尝试编辑测试方案时看到的：

![编辑方案屏幕](../Images/9d87db119497e28605c1d8bb8708e9d7.png)

好像没有地方可以添加另一个目标，我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T15:51:28.177

计划运行目标......他们不管理目标的组成。
它们也可以称为“环境”或“执行设置”等:)

目标在您的项目下进行管理（当您单击项目导航器中的蓝色项目图标时）

![在此处输入图像描述](../Images/d9e4b217b792e4cec6ec565d1c0c7968.png)

*注意：我认为苹果给我们带来的计划只是为了欺骗我们；D*

# java - 将数组列表作为 XML 保存到文件中

> ID：14172956
> 
> 赞同：0
> 
> 时间：2013-01-05T14:55:25.077
> 
> 标签：java, xml, arraylist

是否可以简单地将 ArrayList 转储到 XML 文件？

我有一个数组列表，其中包含各种类型的消息对象。

我想做的是将其保存到 XML 文件中以保留日志。

我试过的是这个。

```
public void saveConversation()
    {
        FileOutputStream f_out;
        try {
            f_out = new  FileOutputStream("convo.txt");
            // Write object with ObjectOutputStream
            ObjectOutputStream obj_out = new  ObjectOutputStream (f_out);
            // Write object out to disk
            obj_out.writeObject (convo);
        } catch (IOException ex) {
            Logger.getLogger(HunterCom.class.getName()).log(Level.SEVERE, null, ex);
        } 
    } 
```

这可行，但创建的文件并没有引起太多的降神。我想知道是否有一种简单的方法可以将其更改为可读的 XML？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T15:43:32.010

看看[XStream](http://xstream.codehaus.org)，它就是为这个任务而设计的。

# c# - 如何从套接字线程创建 Window.Forms.Form

> ID：14172958
> 
> 赞同：0
> 
> 时间：2013-01-05T14:55:29.250
> 
> 标签：c#, multithreading, forms, sockets, applicationcontext

我正在编写一个小型应用程序，它将成为 NLog 网络目标的端点（通过 TCP 发送调试消息）该应用程序使用套接字来创建服务器并接受连接。此应用程序是无窗口的，并使用 NotifyIcon 和 ApplicationContext 在系统托盘中启动。应用程序侦听端口，当它从唯一端点接收到第一条消息时，它将创建一个新窗口并显示它（这些窗口将包含实际的调试消息）我已经能够让窗口显示，但它正在显示好像它挂了，我猜这是因为它是从套接字创建的不可见线程中创建的。

如何从 test_ClientConnected 事件正确创建新的 Windows.Form？

这是 ApplicationContext 代码

```
public NLApplicationContext()
    {
        NLServer test = new NLServer();
        test.ClientConnected += test_ClientConnected;
        test.Start();
    }

    void test_ClientConnected(object sender)
    {
        Form2 newForm = new Form2((NLClient)sender);
        newForm.Invoke(new MethodInvoker(() => {newForm = new Form2((NLClient)sender);}));
        newForm.Invoke(new MethodInvoker(() => { newForm.Show(); }));

        Console.WriteLine("Connected");
        /*if (((NLClient)sender).testy.InvokeRequired)
        {
            ((NLClient)sender).testy.BeginInvoke(new MethodInvoker(((NLClient)sender).testy.Show()));
            return;
        }*/
    } 
```

这是程序入口点

```
static class Program
{
    /// <summary>
    /// The main entry point for the application.
    /// </summary>
    [STAThread]
    static void Main()
    {
        Application.EnableVisualStyles();
        Application.SetCompatibleTextRenderingDefault(false);
        Application.Run(new NLApplicationContext());
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T15:08:13.050

您有正确的想法，而不是在套接字线程中创建表单，而是移动代码以创建表单并将其显示到一个方法中，然后`Dispatcher.Invoke`在 UI 线程上执行它的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T15:46:23.827

您可以将 UI 工作委托给一个单独的线程，如下所示：

```
 void test_ClientConnected(object sender)
   {
     Thread displayFormThread = new Thread(ParameterizedThreadStart(DisplayForm));
     displayFormThread.Start(sender);
   }

   private void DisplayForm(object sender)
   {
    Form2 newForm = new Form2((NLClient)sender);
    newForm.Show();
   } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-05T16:11:09.233

终于找到了一种不同的方法，可以让我在主 UI 线程中创建表单。

NLApplicationContext

```
class NLApplicationContext : ApplicationContext 
{
    List<Form2> _connections;  // Temp storage for now
    SynchronizationContext testS;

    public NLApplicationContext()
    {
        testS = SynchronizationContext.Current;
        _connections = new List<Form2>();

        NLServer test = new NLServer();
        test.ClientConnected += test_ClientConnected;
        test.Start();
    }

    void test_ClientConnected(object sender)
    {
        testS.Post(DisplayForm, sender);
    }

    private void DisplayForm(object sender)
    {
        Form2 newForm = new Form2((NLClient)sender);
        newForm.Show();
        _connections.Add(newForm);  //Find better storage/sorting
    }
} 
```

使用 SynchronizationContext 允许我回发到创建它的线程。

# qt4 - QPushButton setEnabled(true) 插槽不起作用

> ID：14172966
> 
> 赞同：1
> 
> 时间：2013-01-05T14:56:02.567
> 
> 标签：qt4

我有一个默认设置为禁用的按钮。我希望每当在文本框中输入一些文本时，都会启用该按钮。我正在尝试这个：

```
connect(ui->textEdit,SIGNAL(textChanged()),ui->pushButton,SLOT(setEnabled(true))); 
```

但给出以下错误：

```
Object::connect: No such slot QPushButton::setEnabled(true)
Object::connect:  (sender name:   'textEdit')
Object::connect:  (receiver name: 'pushButton') 
```

Qt 官方文档说它从 QWidget [http://doc.qt.digia.com/qt/qwidget.html#public-slots继承 setEnabled() 插槽](http://doc.qt.digia.com/qt/qwidget.html#public-slots)

问题出在哪里？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-05T15:30:04.123

你的代码是错误的：

*   `void QPushButton::setEnabled(bool);`不是 Qt 插槽。
*   通过该`static void QObject::connect(const QObject *, const char *, const QObject *, const char *);`方法连接的信号和槽必须得到相同的签名。这里你得到一个`blablablaSignal(void);`带有“ `blablablaSlot(bool);`”槽的“”信号。
*   连接插槽时不得传递参数。
*   与 不同，`void QLineEdit::textChanged(void);`信号不存在`void QLineEdit::textChanged(const QString &);`。

所以你的代码最好看起来像这样：

```
#include <QLineEdit>
#include <QObject>
#include <QPushButton>

class UIBuilder {

    public:

        UIBuilder() : textEdit(new QTextEdit()), pushButton (new QPushButton())
        {
            // Do your stuff
            QObject::connect(textEdit, SIGNAL(textChanged(const QString &)),
                             this, SLOT(enableSlot(const QString &)));
        }

        ~UIBuilder()
        {
            delete textEdit;
            delete pushButton;
        }

    protected:
        QLineEdit * textEdit;
        QPushButton * pushButton;

    public slots:

        void enableSlot(const QString &)
        {
            pushButton->setEnabled(true);
        }
}; 
```

**PS**：我猜你使用 a`QLineEdit`作为文本。

# php - 如何将文本转换为 php 或在 .tpl 文件中使用 php

> ID：14172967
> 
> 赞同：1
> 
> 时间：2013-01-05T14:56:10.827
> 
> 标签：php, templates

如何将文本转换为 php 或在 .tpl 文件中使用 php？

我有这个 php 文件

```
<?
$a = "<? echo \"asd\"; ?>";

?> 
```

有什么办法可以运行`<? echo "asd"; ?>`吗？

或在 .tpl 中编写 php 代码，如

```
<? echo "asd"; ?> 
```

没有聪明

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T15:11:52.507

使用单引号：

```
$a = '<? echo "asd"; ?>'; 
```

单引号中的内容大多是未解析的，并按原样输出。

编辑然后如果你想执行 $a 你会使用[eval](http://www.php.net/manual/en/function.eval.php)：

```
eval($a); 
```

来自文档的注释：

> eval() 语言结构非常危险，因为它允许执行任意 PHP 代码。因此不鼓励使用它。如果您已仔细验证除了使用此构造之外别无选择，请特别注意不要将任何用户提供的数据传入其中，而无需事先正确验证。

# sql - NOT EXISTS with NULLs 与其他运算符不一致

> ID：14172968
> 
> 赞同：3
> 
> 时间：2013-01-05T14:56:14.553
> 
> 标签：sql, sql-server-2008-r2

这是初始数据：

```
CREATE TABLE #data
    (
    Id integer,
    Surname varchar(50),
    DOB datetime
    )   
INSERT INTO #data
values 
(1,'smith', null),
(2,'jones', '01 jan 1970'),
(3,'vernon', null),
(4,'smith', '01 jan 1970'),
(5,'jones', '01 jan 1970'),
(6,'vernon', '01 jan 1970'),
(7,null, '01 jan 1970') 
```

以下是排除列表：

```
CREATE TABLE #exclusions
    (
    ExcludedSurname varchar(50),
    ExcludedDOB datetime
    )   
INSERT INTO #exclusions
values 
('smith', '01 jan 1970'),
('jones', '01 jan 1970'),
('vernon', null),
(null, '01 jan 1970') 
```

这是一个返回我有点意外结果的查询：

```
SELECT * 
FROM #data a
WHERE
  NOT EXISTS
    (
    SELECT 1
    FROM #exclusions e
    WHERE
            a.DOB = e.ExcludedDOB and
            a.Surname = e.ExcludedSurname
    ) 
```

为了确保`Id`排除 s 3 和 7，我可以对脚本进行这种丑陋的更改。生产表中有很多可能的数据（#data 的实时版本是 1000m 条记录）——这就是为什么我选择了这么多的替代品来`null`.

```
SELECT * 
FROM #data a
WHERE
  NOT EXISTS
    (
    SELECT 1
    FROM #exclusions e
    WHERE  
            ISNULL(a.DOB, '01 JAN 2200') = ISNULL(e.ExcludedDOB, '01 JAN 2200')  and
            ISNULL(a.Surname,'AAAAAAAAAAAAAAAA') = ISNULL(e.ExcludedSurname,'AAAAAAAAAAAAAAAA')
    ) 
```

这是在[**SQL Fiddle上**](http://sqlfiddle.com/#!3/891b6/1)

有没有更优雅的方式来完成上述操作？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-05T15:01:13.707

在 PostgreSQL ( [SQL Fiddle](http://sqlfiddle.com/#!1/654a1/4) ) 中，您可以使用

```
WHERE (a.DOB, a.Surname) IS NOT DISTINCT FROM (e.ExcludedDOB, e.ExcludedSurname) 
```

但是 SQL Server 缺少两个项目才能使其正常工作。[行值构造函数](http://connect.microsoft.com/SQLServer/feedback/details/299231)和[IS [NOT] DISTINCT FROM](http://connect.microsoft.com/SQLServer/feedback/details/286422/add-language-and-optimizer-support-for-iso-distinct-predicate)

同时，您可以从这里使用该技术：[未记录的查询计划：平等比较](http://web.archive.org/web/20180422151947/http://sqlblog.com:80/blogs/paul_white/archive/2011/06/22/undocumented-query-plans-equality-comparisons.aspx)

```
SELECT *
FROM   #data a
WHERE  NOT EXISTS (SELECT *
                   FROM   #exclusions e
                   WHERE  EXISTS (SELECT a.DOB,
                                         a.Surname
                                  INTERSECT
                                  SELECT e.ExcludedDOB,
                                         e.ExcludedSurname)) 
```

上述用途的变体`EXCEPT`（现场示例**[HERE](http://sqlfiddle.com/#!3/654a1/1)**）：

```
SELECT *
FROM   #data a
WHERE  EXISTS (SELECT a.DOB, 
                      a.Surname
               EXCEPT
               SELECT e.ExcludedDOB, 
                      e.ExcludedSurname 
               FROM #exclusions e) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-07T16:06:43.897

@马丁史密斯

看看这个替代方案：

```
SELECT *
FROM   #data a
WHERE  EXISTS(SELECT a.Surname,
                     a.DOB
              EXCEPT
              SELECT e.ExcludedSurname,
                     e.ExcludedDOB
              FROM   #exclusions e) 
```

非常优雅和可读。

* * *

虽然为什么要打扰上面的 EXISTS 似乎除了所有的工作？

```
SELECT Surname,
       DOB
FROM   #data
EXCEPT
SELECT ExcludedSurname,
       ExcludedDOB
FROM   #exclusions 
```

[提供给我的一个朋友——不幸的是，他没有贡献`SO`——我不知道]

两种选择都在[**SQL FIDDLE上**](http://sqlfiddle.com/#!3/654a1/12)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-05T15:26:42.953

如果您的排除项没有重复项，请不要将其表述为`left outer join`至少看起来更干净：

```
SELECT * 
FROM #data a left outer join
     #exclusions e
     on a.DOB = e.ExcludedDOB and
        a.Surname = e.ExcludedSurname
where e.ExcludedDOB is NULL and e.ExcludedSurname is null 
```

然后，您可以使用 a 或逻辑处理 NULL `coalesce`（此示例同时显示两者）：

```
SELECT * 
FROM #data a left outer join
     #exclusions e
     on (a.DOB = e.ExcludedDOB or a.DOB is NULL and e.ExcludedDOB is NULL) and
        (coealesce(a.Surname, '<null>') = coalesce(e.ExcludedSurname, '<null>')
where e.ExcludedDOB is NULL and e.ExcludedSurname is null 
```

所有这些方法的缺点是我认为它们不会利用排除表上的索引。. . 如果桌子很大，这可能是个好主意。一种方法需要两个连接，但解决了这个问题：

```
SELECT * 
FROM #data a left outer join
     #exclusions e
     on a.DOB = e.ExcludedDOB and
        a.Surname = e.ExcludedSurname left outer join
     #exclusions enull
     on enull.ExcludedSurname is null and a.Surname is NULL and
        enull.ExcludedDOB = a.DOB
where e.ExcludedDOB is NULL and e.ExcludedSurname is null and
      enull.ExcludedDOB is NULL and enull.ExcludedSurname is null 
```

然而，马丁的方法可能仍然是表现最好的。

如果您不需要`id`来自#data，那么最简单的方法是：

```
select Surname, Dob
from #data
except (select ExcludedSurname, ExcludedDB from #exceptions) 
```

我经常使用这个结构来进行表格比较。但是，要获取 id，您会遇到连接中的 NULL 问题。

# python - Python、Selenium Webdriver：该元素对 Firefox 不可见。

> ID：14172970
> 
> 赞同：0
> 
> 时间：2013-01-05T14:56:15.187
> 
> 标签：python, selenium, popup, webdriver

我正在尝试与具有打开弹出窗口的编辑链接的页面上的 web 元素进行迭代。在打开的弹出窗口中，我有简单的输入字段和应用/取消按钮。在我的脚本中，我执行以下操作以在输入字段中输入一些文本：

```
def enter_text(self, text, action):
        if self.is_element_present(self._input_locator):
            self.selenium.find_element(*self._input_locator).send_keys(text)
        if action == 'Apply':
            self.selenium.find_element(*self._apply_button_locator).click()
        elif action == 'Cancel':
            self.selenium.find_element(*self._cancel_button_locator).click() 
```

当我在 Chrome 中运行我的脚本时 - 一切正常，所有 web 元素都被找到并且输入文本被输入到该字段中。但是当我在 Firefox 中运行完全相同的脚本时 - 它会打开带有输入字段和 2 个按钮的弹出窗口（这意味着它对 Webdriver 可见），但文本没有输入到导致错误的字段中：

```
ElementNotVisibleException: Message: u'Element is not currently visible and so may not be interacted with' 
```

如果弹出窗口实际打开（我可以看到）但 Webdriver 告诉它不可见，为什么会发生这种情况？另外，我睡了几次只是为了确保弹出窗口加载，然后输入文本，但它没有帮助。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T16:57:08.363

两个想法：

1：确保您的 HTML 有效，例如通过[w3c 验证器](http://validator.w3.org/)运行它。损坏的 html 是不同浏览器中不同行为的常见原因。

2：您是否确定将硒切换到弹出窗口，使用例如：

```
for handle in self.selenium.window_handles:
    # identify popup window's handle somehow
    self.selenium.switch_to_window(handle) 
```

顺便说一句，如果你还没有遇到过`selenium.implicitly_wait(3)`，它作为一种避免`time.sleep`s 和 wait-for 构造的方法非常有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T11:01:45.763

你用的是火狐版和Webdriver版吗？

请尝试以下方法：

*   将 Webdriver 更新到最新版本
*   如果您使用的是 firefox 17-18，请将其降级为较低版本（我猜 FF12 会工作）

请尝试一下并告诉我会发生什么，

问候

# .net - 使用带有合并标题的 WPF 的复杂表

> ID：14172972
> 
> 赞同：0
> 
> 时间：2013-01-05T14:56:22.663
> 
> 标签：.net, wpf, datagrid

它应该如下表所示：

![表格图像](../Images/d9c06271f25ffa2aebf5a3c2020ec2e1.png)

我寻求您帮助的原因是我试图找到如何合并标题，但答案对我来说不是很有用：

1.  我使用网格来添加标题，然后将标签的位置绑定到列宽 [http://social.msdn.microsoft.com/Forums/en-US/wpf/thread/1e414159-70f6-4be3-9be5-56e4f3278366/](http://social.msdn.microsoft.com/Forums/en-US/wpf/thread/1e414159-70f6-4be3-9be5-56e4f3278366/) . 但是当我尝试水平滚动时（如您所见，我有很多列）我的“超级标题”仍然在相同的位置。然后我尝试做同样的任务，但`superheader`把`datagrid`in `ScrollView`. 结果很好，但是

2.  如果我将一些组添加到行标题并且需要有垂直滚动条 - 我`column header`的`superheader`将不够可见。

3.  使用`DataGridTemplateColumn`对我来说也不是一个好主意。那是因为我需要我的单元格是“可选择的”，但是当我使用这种列时，我的所有子列都被一起选择了。

所以我的问题是：如何制作这样的表格，或者任何人都可以给我一个免费表格工具的链接，它可以让合并标题更容易。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T13:16:02.870

通过添加`LayoutUpdated`事件解决，更改行标题位置以垂直滚动数据网格

# asp.net-mvc - 我应该使用 EF 代码播种 SimpleMembership 数据库还是在过滤器中进行？

> ID：14172975
> 
> 赞同：0
> 
> 时间：2013-01-05T14:56:28.043
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp.net-mvc-4, simplemembership

我刚刚开始实施 ASP.NET MVC4 简单成员。在模板应用程序中，我看到以下代码：

```
namespace WebUx.Filters
{
    [AttributeUsage(AttributeTargets.Class | AttributeTargets.Method, AllowMultiple = false, Inherited = true)]
    public sealed class InitializeSimpleMembershipAttribute : ActionFilterAttribute
    {
        private static SimpleMembershipInitializer _initializer;
        private static object _initializerLock = new object();
        private static bool _isInitialized;

        public override void OnActionExecuting(ActionExecutingContext filterContext)
        {
            // Ensure ASP.NET Simple Membership is initialized only once per app start
            LazyInitializer.EnsureInitialized(ref _initializer, ref _isInitialized, ref _initializerLock);
        }

        private class SimpleMembershipInitializer
        {
            public SimpleMembershipInitializer()
            {
                Database.SetInitializer<UsersContext>(null);

                try
                {
                    using (var context = new UsersContext())
                    {
                        if (!context.Database.Exists())
                        {
                            // Create the SimpleMembership database without Entity Framework migration schema
                            ((IObjectContextAdapter)context).ObjectContext.CreateDatabase();
                        }
                    }

                    WebSecurity.InitializeDatabaseConnection("DefaultConnection", "UserProfile", "UserId", "UserName", autoCreateTables: true); 
```

当我环顾四周时，我看到其他类似这样的示例：

```
#region

using System.Data.Entity.Migrations;
using System.Linq;
using System.Web.Security;
using MVC4SimpleMembershipCodeFirstSeedingEF5.Models;
using WebMatrix.WebData;

#endregion

namespace MVC4SimpleMembershipCodeFirstSeedingEF5.Migrations
{
    internal sealed class Configuration : DbMigrationsConfiguration<UsersContext>
    {
        public Configuration()
        {
            AutomaticMigrationsEnabled = true;
        }

        protected override void Seed(UsersContext context)
        {
            WebSecurity.InitializeDatabaseConnection(
                "DefaultConnection",
                "UserProfile",
                "UserId",
                "UserName", autoCreateTables: true);

            if (!Roles.RoleExists("Administrator"))
                Roles.CreateRole("Administrator");

            if (!WebSecurity.UserExists("lelong37"))
                WebSecurity.CreateUserAndAccount(
                    "lelong37",
                    "password",
                    new {Mobile = "+19725000000"});

            if (!Roles.GetRolesForUser("lelong37").Contains("Administrator"))
                Roles.AddUsersToRoles(new[] {"lelong37"}, new[] {"Administrator"});
        }
    }
} 
```

模板在过滤器中创建数据库是否有原因，其他示例有某种迁移文件。人们最常使用什么？在我看来，过滤器的做法对于启动应用程序来说很好，可以让它快速工作，但对于其他类型的应用程序来说不是很好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T21:35:43.940

我认为归根结底就是你想做什么。

1.  您是否想将应用程序 + 数据库（带有架构）作为单独的实体分发。对于此选项，您需要用户在服务器上安装带有架构的空数据库，并将连接字符串提供给应用程序或

2.  您是否希望分发应用程序并让它在初始安装/配置过程中创建数据库模式（例如 wordpress 是如何做到的）。对于此选项，您只需要连接到数据库服务器。实体框架将帮助您生成所需的数据库模式。另请注意，此代码不必放在过滤器内。如果您阅读此[MSDN 文档](http://msdn.microsoft.com/en-us/library/dd410209%28v=vs.100%29.aspx)，您将意识到动作过滤器总是在动作方法运行之前被调用。他们这样做是为了确保在您访问帐户控制器操作之前设置成员资格。

# postgresql - Postgresql，选择空字段

> ID：14172978
> 
> 赞同：23
> 
> 时间：2013-01-05T14:56:40.383
> 
> 标签：postgresql

我试图从我的表中获取空的“文本”字段，我用 pgadmin 手动清除了这些字段。最初在这些字段中是''，我可以像这样查询它们：

```
SELECT mystr, mystr1 FROM mytable WHERE mystr='' or mystr1='' 
```

但是，如果我从中删除文本并将单元格留空，那将不起作用。

如何编写查询以将这些“”和清除单元格放在一起？还是单独清除细胞？

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2013-01-05T15:49:19.633

```
SELECT mystr, mystr1 
FROM mytable 
WHERE COALESCE(mystr, '') = '' 
   OR COALESCE(mystr1, '') = ''
    ; 
```

说明：函数从左到右`coalesce(a,b,c, ...)`遍历列表，并在第一个非空元素处停止。可以是任何表达式（或常量），但必须产生相同的类型（或可强制转换为相同的类型）。`a,b,c,...``a,b,c`

# php - 当文件名通过变量传递时，file_exists 返回 false

> ID：14172985
> 
> 赞同：1
> 
> 时间：2013-01-05T14:57:34.657
> 
> 标签：php, file, wamp, exists

我很难过，我敢肯定我在这里遗漏了一些非常基本的东西。安全模式被禁用，文件存在。

这段代码：

```
$dir = "textfiles"
chdir('../'.$dir."/");
  //using a Windows Slash here(Wamp Stack, on Windows 7 Dev environment

$filename = getcwd() ."\\". $row[0];

       //echoing this outputs: 
       //C:\wamp\www\wordpress\textfiles\New Text Document.txt

$filename = str_replace("\\","\\\\",$filename);

      //echoing this outputs C:\\wamp\\www\\wordpress\\textfiles\\New Text Document.txt
      //escaping slashes in filename to prevent escaping. I SUSPECT my issue may be
      // related to this

    //if (file_exists("C:\\wamp\\www\\wordpress\\textfiles\\New Text Document.txt")) {
            //Line above is commented out, but when it replaces the line below, this thing                       
            //returns True

if (file_exists($filename)) {echo "Yes";} 
   else { echo $filename;} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T15:09:19.427

注释掉一行

```
/* $filename = str_replace("\\","\\\\",$filename); */ 
```

你的代码应该可以工作。

# ruby-on-rails - 为什么 Rails 为每个请求创建一个控制器？

> ID：14172986
> 
> 赞同：26
> 
> 时间：2013-01-05T14:57:44.297
> 
> 标签：ruby-on-rails, controller

从我之前的[问题](https://stackoverflow.com/questions/14137304/how-to-call-controllers-method)中，我了解到 Rails 会为每个请求创建一个控制器实例。

我的问题是，因为这个主题与我正在从事的项目的设计有关：

为什么 Rails 会创建一个新的实例

```
class SomeController < ApplicationController; end 
```

处理每个传入的请求？为什么不直接创建单例对象并将请求转发给这个对象呢？这似乎更有效，因为我们不会浪费资源为请求分配和清理对象？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-01-05T15:32:41.233

实例化一个新的控制器实例的开销是微不足道的，这意味着两个完全不相关的请求之间没有意外共享状态。处理器时间的任何“节省”都将被产生破坏性错误的可能性所抵消。

请记住，控制器用于存储特定于请求的状态。重用控制器需要你在`@variable`每一个动作开始时重置你曾经设置的每一个。否则，类似的东西`@is_admin = true`可能会被设置并且永远不会被清除。您实际上要引入的不那么人为的错误会更加微妙，并且会占用开发人员的时间。

您会看到没有优化的地方。*某些东西*必须保持状态并在请求之间重置它，否则您会遇到意外共享状态的噩梦。如果您在请求之间保持控制器实例，您只是将维护/重置状态的工作推到较低级别，答案可能*仍然是*为每个请求实例化某个状态管理类的新实例。计算机*非常擅长*分配和释放资源，所以在您真正知道这是一个瓶颈之前，*永远不要*担心这一点。在这种情况下，为每个请求实例化一个新的控制器很容易成为正确的选择。

在 Rails 的情况下，从代码清晰度和可用性的角度来看，能够使用`@variable = value`是一个重大胜利，这或多或少需要在请求完成时丢弃控制器的每个实例。

# c# - 用户代码消息未处理空引用异常

> ID：14172987
> 
> 赞同：0
> 
> 时间：2013-01-05T14:57:45.197
> 
> 标签：c#, asp.net, nullreferenceexception

我有这个 ASPX 代码：

```
<form name="AddArticle" action="Register.aspx" method="post">
<b>
title :<br /></b><input id="Text1" type="text" name="ArticleTitle"/><p></p>
<b>

date: <br /></b><input id="Text2" type="text" name="ArticleDate"/><p></p>

<b>
author : <br /></b><input id="Text3" type="text" name="ArticleAuthor"/><p></p>
<b>
text: <br /></b> <textarea rows="10" cols="60"  name="ArticleBody"></textarea>
<br />
<input id="Reset1" type="reset" value="clean" />
<input id="Submit1" type="submit" value="send" /></form> 
```

而这个 C# 代码：

```
using System;
using System.Collections;
using System.Configuration;
using System.Data;
using System.Linq;
using System.Web;
using System.Web.Security;
using System.Web.UI;
using System.Web.UI.HtmlControls;
using System.Web.UI.WebControls;
using System.Web.UI.WebControls.WebParts;
using System.Xml.Linq;
using System.Data.OleDb;

public partial class Register : System.Web.UI.Page
{

    protected void Page_Load(object sender, EventArgs e)
    {
        string ArticleTitle, ArticleBody, ArticleAuthor, ArticleDate;
        if (IsPostBack ==false)
        {
            ArticleTitle = Request.Form["ArticleTitle"].ToString();
            ArticleDate = Request.Form["ArticleDate"].ToString();
            ArticleAuthor = Request.Form["ArticleAuthor"].ToString();
            ArticleBody = Request.Form["ArticleBody"].ToString();

            string dpath = Server.MapPath(@"App_Data") + "/MySite.mdb";
            string connectionstring = @"Data source='" + dpath + "';Provider='Microsoft.Jet.OLEDB.4.0';";
            OleDbConnection con = new OleDbConnection(connectionstring);
            string QuaryString = string.Format("insert into tblArticles(ArticleTitle, PostDate) values ('{0}','{1}')", ArticleTitle, ArticleDate);
            OleDbCommand cmd = new OleDbCommand(QuaryString, con);
            con.Open();
            cmd.ExecuteNonQuery();
        }
        else
        {

        }
    }

} 
```

这里的问题是，我收到此错误消息：

> System.NullReferenceException 未被用户代码
> Source="App_Web_cebzruil" StackTrace 处理：

在那些行

```
ArticleTitle = Request.Form["ArticleTitle"].ToString();
ArticleDate = Request.Form["ArticleDate"].ToString();
ArticleAuthor = Request.Form["ArticleAuthor"].ToString();
ArticleBody = Request.Form["ArticleBody"].ToString(); 
```

我的问题是如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T15:02:15.110

可能表单值为空。

尝试插入一个简单的 if 语句：

```
if(Request.Form["ArticleTitle"]!=null)
 ArticleTitle = Request.Form["ArticleTitle"].ToString(); 
```

您也可以使用 try 和 catch，但在这种情况下不推荐使用

```
try
{
   ArticleTitle = Request.Form["ArticleTitle"].ToString();
}
catch(NullReferenceException ex)
{
} 
```

# java - 导入 android.app.Activity 从未使用过，应用程序意外停止

> ID：14172994
> 
> 赞同：-4
> 
> 时间：2013-01-05T14:58:10.080
> 
> 标签：java, android, android-layout, admob, forceclose

**嘿，最后我创建了 android 应用程序和整数广告暴民，但是当在我的模拟器上尝试时让我意外停止** **这里是我的代码文件**

**科尔多瓦**-2.2.0 * *admobskd 6.2.1* * **安卓 2.2**

**这里 mainActivity.java**

```
 package com.afrogfx.VerbTenses;
    import android.app.Activity;
    import android.os.Bundle;
    import com.google.ads.*;

    import org.apache.cordova.*;

    public class VerbTenses extends DroidGap
    {
private static final String AdMob_Ad_Unit = "ass0bcc0e6a0228";
private AdView adView;

@Override
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    super.setIntegerProperty("splashscreen", R.drawable.splash);
    super.loadUrl("file:///android_asset/www/overview.html");

    //admob
    adView = new AdView(this, AdSize.BANNER, AdMob_Ad_Unit); 
    super.root.addView(adView); 
    AdRequest request = new AdRequest();
    //request.setTesting(false);
    adView.loadAd(request);
    }
    } 
```

**这里 manifest.xml**

```
 <?xml version="1.0" encoding="utf-8"?>
    <manifest 
  xmlns:android="http://schemas.android.com/apk/res/android"
  android:windowSoftInputMode="adjustPan"
  package="com.afrogfx.VerbTenses" 
  android:versionName="1.1" 
  android:versionCode="5" >

<supports-screens
    android:largeScreens="true"
    android:normalScreens="true"
    android:smallScreens="true"
    android:resizeable="true"
    android:anyDensity="true"
    />

<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />

<application android:icon="@drawable/icon" android:label="@string/app_name"
    android:allowBackup="true"
    >

    <activity android:name="VerbTenses" android:label="@string/app_name"
            android:theme="@android:style/Theme.Black.NoTitleBar"
            android:configChanges="orientation|keyboardHidden|keyboard">
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity android:name="com.google.ads.AdActivity"android:configChanges="keyboard|keyboardHidden|orientation"/>

</application>

<uses-sdk android:minSdkVersion="2" android:targetSdkVersion="17"/>
    </manifest> 
```

**警告** 从未使用过 import android.app.Activity

**控制台** [http://www.flickr.com/photos/afrogfx/8350084864/](http://www.flickr.com/photos/afrogfx/8350084864/)

**LogCat** [http://www.flickr.com/photos/afrogfx/8350087082/](http://www.flickr.com/photos/afrogfx/8350087082/)

```
 01-05 17:21:21.565: D/dalvikvm(726): DexOpt: couldn't find static field
    01-05 17:21:21.565: W/dalvikvm(726): VFY: unable to resolve static field 19 (SDK_INT) in Landroid/os/Build$VERSION;
    01-05 17:21:21.575: W/dalvikvm(726): VFY:  rejecting opcode 0x60 at 0x0005
    01-05 17:21:21.575: W/dalvikvm(726): VFY:  rejected Lorg/apache/cordova/DroidGap;.init ()V
    01-05 17:21:21.575: W/dalvikvm(726): Verifier rejected class Lorg/apache/cordova/DroidGap;
    01-05 17:21:21.575: W/dalvikvm(726): Class init failed in newInstance call (Lcom/afrogfx/VerbTenses/VerbTenses;)
    01-05 17:21:21.589: D/AndroidRuntime(726): Shutting down VM
    01-05 17:21:21.589: W/dalvikvm(726): threadid=3: thread exiting with uncaught exception (group=0x4000fe70)
    01-05 17:21:21.607: E/AndroidRuntime(726): Uncaught handler: thread main exiting due to uncaught exception
    01-05 17:21:21.625: E/AndroidRuntime(726): java.lang.VerifyError: org.apache.cordova.DroidGap
    01-05 17:21:21.625: E/AndroidRuntime(726):  at java.lang.Class.newInstanceImpl(Native Method)
    01-05 17:21:21.625: E/AndroidRuntime(726):  at java.lang.Class.newInstance(Class.java:1472)
    01-05 17:21:21.625: E/AndroidRuntime(726):  at android.app.Instrumentation.newActivity(Instrumentation.java:1097)
    01-05 17:21:21.625: E/AndroidRuntime(726):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2186)
    01-05 17:21:21.625: E/AndroidRuntime(726):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2284)
    01-05 17:21:21.625: E/AndroidRuntime(726):  at android.app.ActivityThread.access$1800(ActivityThread.java:112)
    01-05 17:21:21.625: E/AndroidRuntime(726):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1692)
    01-05 17:21:21.625: E/AndroidRuntime(726):  at android.os.Handler.dispatchMessage(Handler.java:99)
    01-05 17:21:21.625: E/AndroidRuntime(726):  at android.os.Looper.loop(Looper.java:123)
    01-05 17:21:21.625: E/AndroidRuntime(726):  at android.app.ActivityThread.main(ActivityThread.java:3948)
    01-05 17:21:21.625: E/AndroidRuntime(726):  at java.lang.reflect.Method.invokeNative(Native Method)
    01-05 17:21:21.625: E/AndroidRuntime(726):  at java.lang.reflect.Method.invoke(Method.java:521)
    01-05 17:21:21.625: E/AndroidRuntime(726):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:782)
    01-05 17:21:21.625: E/AndroidRuntime(726):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:540)
    01-05 17:21:21.625: E/AndroidRuntime(726):  at dalvik.system.NativeStart.main(Native Method)
    01-05 17:21:21.644: I/dalvikvm(726): threadid=7: reacting to signal 3
    01-05 17:21:21.745: I/dalvikvm(726): Wrote stack trace to '/data/anr/traces.txt'
    01-05 17:23:13.524: I/Process(726): Sending signal. PID: 726 SIG: 9 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T18:44:33.000

你好像和安卓版本有冲突。我找不到明确的参考资料，但 PhoneGap 似乎至少需要 Android SDK 版本 7 (Android 2.1)。

在您的 中设置以下内容`manifest.xml`：

```
<uses-sdk android:minSdkVersion="7" android:targetSdkVersion="17"/> 
```

您可能还需要创建一个具有更高 Android 版本的新模拟器实例。

# php - 使用数据变量在函数内执行另一个函数

> ID：14172996
> 
> 赞同：0
> 
> 时间：2013-01-05T14:58:16.257
> 
> 标签：php, codeigniter

在这方面需要帮助：

这是我的示例代码，
如果发生 preg_match，我想添加一条验证消息：
请。有关更多详细信息，请参阅内联评论..

```
public function supplier_entry()
{
    if (preg_match("/[\'^£@&*...etc.../", $this->input->post('supplier')))
    {  

    //add or pass validation message, ex. $msg = 'Invalid Supplier Name';  
    // i tried $this->supplier_entry_form($msg); but its not working.  

        $this->supplier_entry_form();

    }else{
        $post_data = array(
        'supplier_name' =>$this->input->post('supplier'),
        'user' => $this->input->post('user'),       
        'trx_id' =>$this->input->post('trx_id'),
        );  

        $this->load->model('user_model');
        $this->load->model('product_model');

        $this->product_model->add_new_supplier($post_data);
        $user_data['trx'] = 'Supplier Entry';
        $user_data['username'] = $this->user_model->user_info();
        $trx_data['supplier'] = $this->product_model->get_supplier_list();  
        $trx_data['msg'] = 'Supplier Posted.';  

        $this->load->view('header',$user_data);     
        $this->load->view('item_supplier', $trx_data);              
    }
} 
```

提前致谢..

```
 public function supplier_entry_form()
{
    $this->load->model('user_model');
    $this->load->model('product_model');

    $user_data['username'] = $this->user_model->user_info();
    $user_data['trx'] = 'Supplier Entry';   
    $trx_data['supplier'] = $this->product_model->get_supplier_list();

    $this->load->view('header', $user_data);                      
    $this->load->view('item_supplier', $trx_data);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T15:32:19.557

使用内置的表单验证。

```
$this->load->library('form_validation');
$this->form_validation->set_rules($this->input->post('supplier'), 'Supplier', 'trim|callback_pregMatchSupplier');
if($this->form_validation->run()==FALSE)
{
    $this->supplier_entry_from();
}
// continue code here if validation passes.

function pregMatchSupplier()
{
    if (preg_match("/[\'^£@&*...etc.../", $this->input->post('supplier')))
    {
       return FALSE;
    } else {
       return TRUE;
    } 
```

然后在视图中显示验证错误：

```
<?php echo validation_errors(); ?> 
```

[http://ellislab.com/codeigniter/user-guide/libraries/form_validation.html](http://ellislab.com/codeigniter/user-guide/libraries/form_validation.html)

# android - 具有 layout_weight 和图像的小部件布局提供不同的高度

> ID：14172998
> 
> 赞同：0
> 
> 时间：2013-01-05T14:58:25.680
> 
> 标签：android, android-layout, android-widget, image-scaling

当我想要具有不同宽度但高度相同的图像时，我的布局有问题。当我只使用具有相同宽度和高度的图像时，layout_weight 可以正常工作。但是当我添加不同宽度的图像时，就不行了。点上的高度不同。

图像尺寸：141x191 [零] 和 28x191 [点]。

图片：[屏幕截图两种布局。使用一种尺寸的图像，第二种使用点和不同的高度](http://i.stack.imgur.com/dAjOg.png)

如果您看到问题是我添加点时，因为高度不同。我尝试解决这个问题 2 天：/

代码：

```
<LinearLayout    
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    >
        <LinearLayout
            android:layout_width="0dp"
            android:layout_height="fill_parent"
            android:layout_weight="141" >

            <ImageView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_margin="0dip"
                android:src="@drawable/zero" />
        </LinearLayout>
        <LinearLayout
            android:layout_width="0dp"
            android:layout_height="fill_parent"
            android:layout_weight="141" >

            <ImageView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_margin="0dip"
                android:src="@drawable/zero" />
        </LinearLayout>
        <LinearLayout
            android:layout_width="0dp"
            android:layout_height="fill_parent"
            android:layout_weight="141" >

            <ImageView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_margin="0dip"
                android:src="@drawable/zero" />
        </LinearLayout>
        <LinearLayout
            android:layout_width="0dp"
            android:layout_height="fill_parent"
            android:layout_weight="141" >

            <ImageView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_margin="0dip"
                android:src="@drawable/zero" />
        </LinearLayout>
        <LinearLayout
            android:layout_width="0dp"
            android:layout_height="fill_parent"
            android:layout_weight="141" >

            <ImageView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_margin="0dip"
                android:src="@drawable/zero" />
        </LinearLayout>
</LinearLayout>

---------- 

Second

<LinearLayout    
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    >
        <LinearLayout
            android:layout_width="0dp"
            android:layout_height="fill_parent"
            android:layout_weight="141" >

            <ImageView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_margin="0dip"
                android:src="@drawable/zero" />
        </LinearLayout>
        <LinearLayout
            android:layout_width="0dp"
            android:layout_height="fill_parent"
            android:layout_weight="141" >

            <ImageView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_margin="0dip"
                android:src="@drawable/zero" />
        </LinearLayout>
        <LinearLayout
            android:layout_width="0dp"
            android:layout_height="fill_parent"
            android:layout_weight="28" >

            <ImageView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_margin="0dip"
                android:src="@drawable/dot2" />
        </LinearLayout>
        <LinearLayout
            android:layout_width="0dp"
            android:layout_height="fill_parent"
            android:layout_weight="141" >

            <ImageView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_margin="0dip"
                android:src="@drawable/zero" />
        </LinearLayout>
        <LinearLayout
            android:layout_width="0dp"
            android:layout_height="fill_parent"
            android:layout_weight="141" >

            <ImageView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_margin="0dip"
                android:src="@drawable/zero" />
        </LinearLayout>
</LinearLayout> 
```

当我只使用 imageview 时，每个图像都没有 linearlaout，问题是一样的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T20:18:08.073

使用这么多的 layoutweight 不是一个好主意……你能不能制作相同大小的零和点图像？

# c# - 集合元素可以引用集合吗？

> ID：14172999
> 
> 赞同：1
> 
> 时间：2013-01-05T14:58:47.020
> 
> 标签：c#, collections, element

我有一个类，它通过可选地包含自身的列表来排列在树结构中，例如：

```
class MyClass
{
    List<MyClass> MyClassList;
    ...
} 
```

元素有什么方法可以调用它的父集合？像，

```
class MyClass
{
    List<MyClass> MyClassList;
    ...

    private void AddItemToParentCollection()
    {
        parent.MyClassList.Add(new MyClass());
    }
} 
```

我想我可以编写一个函数，通过遍历树直到找到自己，告诉类它在树中的位置（以及它的父级），但我希望有一种更简洁的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T15:07:46.870

```
class Node
{
    Node parent;
    List<Node> children = new List<Node>();

    public void Add(Node child)
    {
        if (child.Parent != null)
            // throw exception or call child.Parent.Remove(child)

        children.Add(child);
        child.Parent = this;
    }

    public void Remove(Node child)
    {
        if (child.Parent != this)
           // throw exception

        children.Remove(child);
        child.Parent = null;
    }
} 
```

使用这种结构，您可以将项目添加到父集合（不确定它应该是子节点的责任）：

```
private void AddItemToParentCollection()
{
    if (Parent == null)
       // throw exception 

    Parent.Add(new Node());
} 
```