# StackOverflow 问答 14402000-14402999

# xpages - 将焦点设置到选项卡表上选项卡的第一个字段

> ID：14402000
> 
> 赞同：1
> 
> 时间：2013-01-18T15:23:01.210
> 
> 标签：xpages

当用户单击选项卡式表格的选项卡时，我希望能够将焦点设置到该选项卡上的第一个字段。

每个选项卡似乎只有一个事件鼠标 onclick。因此，我尝试将以下代码放在该选项卡的一个 onclick 事件中。

```
var f = dojo.byId('#{id:NotInvitedMsg}');
if (f != null)
   f.focus(); 
```

但是，当我单击选项卡时，什么也没有发生。我什么意思都没有。无法再选择选项卡，并且永远不会执行脚本。

有什么办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T21:36:47.693

试试 HTML5 Autofocus 属性：

```
<xp:inputText id="field1" value="#{document.Field1}">
    <xp:this.attrs>
        <xp:attr name="autofocus" value="autofocus"></xp:attr>
    </xp:this.attrs>
</xp:inputText> 
```

一个警告：所有主要浏览器都支持自动对焦属性，除了 Internet Explorer。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T13:51:33.810

```
<?xml version="1.0" encoding="UTF-8"?>
<xp:view xmlns:xp="http://www.ibm.com/xsp/core">
    <xp:tabbedPanel id="tabbedPanel1">
        <xp:tabPanel label="New Tab" id="tabPanel1">
            <xp:panel>
                <xp:inputText id="inputText1"></xp:inputText>
                <xp:eventHandler event="onClientLoad" submit="false">
                    <xp:this.script><![CDATA[var edit = dojo.byId("#{id:inputText1}");
if (edit) {
    edit.focus()
}]]></xp:this.script>
                </xp:eventHandler>
            </xp:panel>
        </xp:tabPanel>
        <xp:tabPanel label="New Tab2" id="tabPanel2">
            <xp:panel>
                <xp:inputText id="inputText2"></xp:inputText>
                <xp:eventHandler event="onClientLoad" submit="false">
                    <xp:this.script><![CDATA[var edit = dojo.byId("#{id:inputText2}");
if (edit) {
    edit.focus()
}]]></xp:this.script>
                </xp:eventHandler>
            </xp:panel>
        </xp:tabPanel>
    </xp:tabbedPanel>
</xp:view> 
```

这是工作代码（在 Chrome 和 IE9 上测试）。它使用了我几天前看到的简单技巧（我想向原作者道歉，我无法找到原帖）：在 XP/CC 级别创建 onClientLoad 事件，并将源视图中的事件处理程序移动到面板主体。像魅力一样工作...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T09:17:23.470

这可能不是您正在寻找的，但也许它可以提供一些帮助..

链接 - > [如何将焦点设置到重复控件内的编辑框？](https://stackoverflow.com/questions/12459512/how-can-i-set-focus-to-edit-box-inside-repeat-control)

# c# - 编写 linq 查询站点地图节点

> ID：14402001
> 
> 赞同：-1
> 
> 时间：2013-01-18T15:23:00.680
> 
> 标签：c#, c#-4.0, telerik

我想写查询`smn.ParentNode.ChildNodes`。如果 ShowInNavigation 值为 false，我不想显示。Telerik 站点地图节点具有此属性。何做这个？

```
using System;
using System.Web;
using Telerik.Sitefinity.Web;
using System.Linq;
using System.Data;

public partial class CustomTemplate_Navigation : System.Web.UI.UserControl
{
    protected void Page_Load(object sender, EventArgs e)
    {       
        SiteMapNode smn = SiteMapBase.GetCurrentProvider().CurrentNode;

        while (smn.ParentNode != null)
        {
            if (smn.ParentNode.ParentNode == SiteMap.RootNode)
            {               
                siteMapControl_verticaltree.DataSource = smn.ParentNode.ChildNodes;/*this line will be write query*/
                siteMapControl_verticaltree.DataBind();
                break;
            }

            smn = smn.ParentNode;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-08T12:36:01.433

您可以这样做：（您不仅应该 Linqify，还需要演员）（我在 .NET MVC4 项目中使用了它）

```
SiteMapNodeCollection coll = SiteMap.RootNode.ChildNodes;
IEnumerable<SiteMapNode> nodes = coll.Cast<SiteMapNode>();
var query = from node in nodes where Boolean.Parse(node["ShowInNavigation"]) == true select node; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T15:46:39.587

像这样的东西：

```
smn.ParentNode.ChildNodes.AsQueryable().Where(x => x.ShowInNavigation).ToList(); 
```

# r - 比较两个矩阵 (A & B) 并输出一个新矩阵 C，其中 cij = min(aij, bij)

> ID：14402004
> 
> 赞同：3
> 
> 时间：2013-01-18T15:23:10.323
> 
> 标签：r

标题很清楚，但我试图取两个矩阵 A 和 B，并输出一个矩阵 C，它具有两个矩阵中的最小元素。

cij = min(aij, bij)

这就是我正在考虑这样做的方式：

```
C <- matrix(ncol = ncol(A), nrow = nrow(A), 0)
for (i in 1:ncol(C)) {
    Y <- rbind(A[i,], B[i,])
    C[i,] <- apply(Y, 2, min)
} 
```

但是，我希望这可以被矢量化，但我想不出该怎么做。我还没有找到任何东西，所以如果有人有任何想法，我将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-18T15:29:26.667

See `?pmin` (parallel minimum):

```
R> A <- matrix(1:4, 2, 2)
R> B <- matrix(c(5, 1, 1, 6), 2, 2)
R> A
     [,1] [,2]
[1,]    1    3
[2,]    2    4
R> B
     [,1] [,2]
[1,]    5    1
[2,]    1    6
R> pmin(A, B)
     [,1] [,2]
[1,]    1    1
[2,]    1    4 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-16T11:52:58.610

尝试

```
C <- A
C[A>B] <- B[A>B] 
```

这不太简单，但会起作用。示范：

```
> A <- matrix(1:4, 2, 2)
> B <- matrix(c(5, 1, 1, 6), 2, 2)
> C <- A
> C[A>B] <- B[A>B]
> 
> A
     [,1] [,2]
[1,]    1    3
[2,]    2    4
> B
     [,1] [,2]
[1,]    5    1
[2,]    1    6
> C
     [,1] [,2]
[1,]    1    1
[2,]    1    4 
```

# python - 除了 HuMoment 之外，还有其他形状属性尺度旋转不变吗？

> ID：14402011
> 
> 赞同：0
> 
> 时间：2013-01-18T15:23:21.577
> 
> 标签：python, image-processing, opencv, scikit-image

WeightedNormalizedMoments、WeightedHuMoments 和 HuMoments 之间有什么区别？（[http://scikit-image.org/docs/0.6/api/skimage.measure.html](http://scikit-image.org/docs/0.6/api/skimage.measure.html)）

除了 HuMoment 之外，还有其他形状属性尺度旋转不变吗？有例子告诉我如何实现它们？我在 c++ OpenCV(C) 中找到了这个例子[：从轮廓计算矩](https://stackoverflow.com/questions/8675878/opencvc-calculating-moments-from-contour)，但我更喜欢在 python 中工作

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T07:10:18.823

时刻总是在局部图像特征上计算/求和，首先需要对其进行分割和标记。以下公式适用于加权和非加权情况：

```
m_ji = sum{ array(x, y) * x^j * y^i } 
```

scikit-image（和一般情况下）中加权和非加权矩之间的实际差异如下：

```
non-weighted:  array(x, y) is a binary image
weighted:      array(x, y) is a grey-level image (each point/pixel is weighted by its grey-level) 
```

这些时刻只是平移不变的。为了使它们具有尺度不变性，我们需要使用以下公式对它们进行归一化：

```
nu_ji = mu_ji / m_00^[(i+j)/2 + 1] 
```

不变性是指几何变换。

有关时刻及其应用程序的更多信息，您还可以查看`skimage.measure.regionprops`函数中的链接引用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T21:07:33.377

Everything that you need is written here, including the definition of how to calculate your own moments. It's a trivial and sub-100 lines of code implementation. [http://en.wikipedia.org/wiki/Image_moment](http://en.wikipedia.org/wiki/Image_moment)

Of course, you only want to sum over pixels actually inside the contour, so PointPolygonTest will be of use to you.

# c# - 等待 WebBrowser 控件完成时应用程序挂起

> ID：14402012
> 
> 赞同：0
> 
> 时间：2013-01-18T15:23:21.513
> 
> 标签：c#, .net, winforms, browser, webbrowser-control

为什么我的应用程序会挂起，直到 WebBrowserDocumentCompleted 完成加载页面？在此期间，我可以做些什么来保持我的应用程序响应？

> 已禁用订阅“ `DocumentCompleted`”

该程序也在该方法期间冻结`wb.Navigate ("http:// ....");`

```
Can you post some code to show us what you have done? 
```

单击按钮并转到页面

```
private void ButtonStart_Click(object sender, EventArgs e)
{
    if (this.settingsForm.tEmail.Text == "" || this.settingsForm.tPassword.Text == "")
    {
        MessageBox.Show("Отсутствует логин и\\или пароль для входа на сервер МосВара.\nВвести их можно, нажав на кнопку \"Настройки\".", "Ошибка", MessageBoxButtons.OK, MessageBoxIcon.Hand);
        return;
    }
    wb.Navigate("http://www.moswar.ru");
} 
```

**事件处理程序**

```
private void wb_DocumentCompleted(object sender, WebBrowserDocumentCompletedEventArgs e)
{
    //if (e.Url.AbsolutePath != (sender as WebBrowser).Url.AbsolutePath) return;
    if (wb.Document.GetElementById("login-email") != null)
    {
        wb.Document.GetElementById("login-email").InnerText = settingsForm.tEmail.Text;
        wb.Document.GetElementById("login-password").InnerText = settingsForm.tPassword.Text;
        GetElementsByClassName(new string[] {"button luxury"})[0].InvokeMember("click");
    }

    if (e.Url.AbsoluteUri == "http://www.moswar.ru/player/" || e.Url.AbsoluteUri == "http://www.moswar.ru/player/#login")
    {
        wb.Navigate("http://www.moswar.ru/metro/");
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T15:32:35.447

如果窗口响应窗口消息，您只能与窗口交互，并且如果您的 UI 线程正在处理它们，您只能响应窗口消息。因此，如果您要求您的 UI 线程加载网页，它将阻塞（变得无响应）直到 Web 请求完成。

您的选择是：

*   加快网络请求。也许代理设置使它需要很长时间或超时。（或者服务器响应可能需要很长时间才能回复您，在这种情况下，您可能无法做太多事情来加快速度）。

*   如果你不能让它更快，那么你需要在后台做。使用异步的 Web 请求 API（如果可用），或自己从工作线程调用 Web 请求，以便您的 UI 线程可以继续响应用户输入，直到 Web 数据可用。如果您还不知道，这是非常复杂的学习内容，因此请准备好投入一些时间和精力。

# python - 在 Tastypie 中，重写 Resource.is_authorized() 以实现行级权限的正确方法是什么

> ID：14402013
> 
> 赞同：0
> 
> 时间：2013-01-18T15:23:25.690
> 
> 标签：python, django, tastypie

我已将行级授权添加到 Tastypie 资源，如下所示：

```
from tastypie.exceptions import ImmediateHttpResponse
from tastypie.http import HttpUnauthorized

class MyResource(ModelResources):
    ...
    def is_authorized(self, request, object=None):
        super(MyResource, self).is_authorized(request, object)
        if object and (object.user != request.user):
            raise ImmediateHttpResponse(response=HttpUnauthorized()) 
```

为简洁起见，我省略了通常的导入，只指定了与问题相关的导入。

我的问题是，有没有一种更清洁的方法来覆盖`is_authorized`而不必导入`ImmediateHttpResponse`and `HttpUnauthorized`？在我看来，这些是实现细节，我应该能够简单地返回`True`or `False`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T01:53:59.387

美味派 0.9.12 的文档就是一个很好的例子。

[https://django-tastypie.readthedocs.org/en/v0.9.12/authorization.html#implementing-your-own-authorization](https://django-tastypie.readthedocs.org/en/v0.9.12/authorization.html#implementing-your-own-authorization)

这是“阅读”部分——其余部分请参见文档：

```
class UserObjectsOnlyAuthorization(Authorization):

    def read_list(self, object_list, bundle):
        # This assumes a ``QuerySet`` from ``ModelResource``.
        return object_list.filter(user=bundle.request.user)

    def read_detail(self, object_list, bundle):
        # Is the requested object owned by the user?
        return bundle.obj.user == bundle.request.user

    # DON'T FORGET TO IMPLEMENT METHODS FOR CREATE/UPDATE/DELETE as shown in the docs. 
```

您会注意到`UserObjectsOnlyAuthorization.read_detail()`返回 True/False。该`read_list`方法将返回一个空列表，根据文档这是可以接受的，但`Unauthorized`如果您愿意，也可以引发异常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T14:57:05.503

虽然您的代码非常好，但如果您不想导入响应类，那么更简洁的方法是编写授权类并在您的 Resource 类中使用它

```
from tastypie.authorization import Authorization
class RowLevelAuthorization(Authorization):
    def is_authorized(self, request, object=None):
        if object and (object.user != request.user):
            return False
        else:
            return True

class MyResource(ModelResources):
    class Meta:
        authorization = RowLevelAuthorization() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-28T09:57:45.027

从长远来看，最好将 django-guardian 集成到您的应用程序中，并使用如下授权类：

[https://gist.github.com/airtonix/5476453](https://gist.github.com/airtonix/5476453)

# ms-access - VBA 内存不足

> ID：14402014
> 
> 赞同：2
> 
> 时间：2013-01-18T15:23:33.717
> 
> 标签：ms-access, ms-access-2007, vba

我有一个包含大约 5000 条记录的访问数据库，每条记录都有一个 bmp 作为 OLE 存储在数据库中。我正在使用 Lebans OLEtoDisk，[http://www.lebans.com/oletodisk.htm](http://www.lebans.com/oletodisk.htm)，用文件路径替换对象，但是，代码只能通过大约 150 条记录，然后我得到一个错误“内存不足。” 我无法弄清楚是什么阻塞了内存。OLEtoDisk 函数使用剪贴板，但我在每次记录后清除它。任何人都有任何想法，或者只是一种清除所有记忆的方法？

这是我正在使用的代码。首先是命令按钮点击事件：

```
Option Compare Database
Option Explicit

Private Declare Function apiDeleteObject Lib "gdi32" Alias "DeleteObject" (ByVal hObject As Long) As Long
Private Declare Function apiOpenClipboard Lib "user32" Alias "OpenClipboard" (ByVal hwnd As Long) As Long
Private Declare Function apiEmptyClipboard Lib "user32" Alias "EmptyClipboard" () As Long
Private Declare Function apiCloseClipboard Lib "user32" Alias "CloseClipboard" () As Long
Private Declare Function CountClipboardFormats Lib "user32" () As Long

Sub EmptyClipboard()
    Call apiOpenClipboard(0&)
    Call apiEmptyClipboard
    Call apiCloseClipboard
End Sub

Private Sub cmdCreateIPicture_Click()
DoCmd.SetWarnings False
' *********************
' You must set a Reference to: "OLE Automation" for this function to work. Goto the Menu and select Tools->References
' Scroll down to: Ole Automation and click in the check box to select this reference.

Dim lngRet, lngBytes, hBitmap As Long
Dim hpix As IPicture
Dim intRecordCount As Integer

intRecordCount = 0
Me.RecordsetClone.MoveFirst
Do While Not Me.RecordsetClone.EOF
    If intRecordCount Mod 25 = 0 Then
        EmptyClipboard
        DoEvents
        Excel.Application.CutCopyMode = False
        Debug.Print "cleared"
    End If
    Me.Bookmark = Me.RecordsetClone.Bookmark
    Me.OLEBound19.SetFocus
    DoCmd.RunCommand acCmdCopy
    hBitmap = GetClipBoard
    Set hpix = BitmapToPicture(hBitmap)
    SavePicture hpix, "C:\Users\PHammett\Images\" & intRecordCount & ".bmp"
    DoCmd.RunSQL "INSERT INTO tblImageSave2 (newPath,oldPath) VALUES (""C:\Users\PHammett\Images\" & intRecordCount & """,""" & Me.RecordsetClone!Path & """);"
    apiDeleteObject (hBitmap)
    Set hpix = Nothing
    EmptyClipboard
    Me.RecordsetClone.MoveNext
    intRecordCount = intRecordCount + 1
Loop
DoCmd.SetWarnings True
End Sub 
```

这是驻留在模块中的代码

```
Option Compare Database
Option Explicit

Private Const vbPicTypeBitmap = 1

Private Type IID
    Data1 As Long
    Data2 As Integer
    Data3 As Integer
    Data4(7) As Byte
End Type

Private Type PictDesc
    Size As Long
    Type As Long
    hBmp As Long
    hPal As Long
    Reserved As Long
End Type

Private Declare Function OleCreatePictureIndirect Lib "olepro32.dll" (PicDesc As PictDesc, RefIID As IID, ByVal fPictureOwnsHandle As Long, Ipic As IPicture) As Long

'windows API function declarations
'does the clipboard contain a bitmap/metafile?
Private Declare Function IsClipboardFormatVailable Lib "user32" (ByVal wFormat As Integer) As Long

'open the clipbarod to read
Private Declare Function OpenClipboard Lib "user32" (ByVal hwnd As Long) As Long

'get a pointer to the bitmap/metafile
Private Declare Function GetClipboardData Lib "user32" (ByVal wFormat As Integer) As Long

'empty the keyboard
Private Declare Function EmptyClipboard Lib "user32" () As Long

'close the clipobard
Private Declare Function CloseClipboard Lib "user32" () As Long

Private Declare Function CopyEnhMetaFila Lib "gdi32" Alias "CopyEnhMetaFilaA" (ByVal hemfSrc As Long, ByVal lpszFile As String) As Long

Private Declare Function CopyImage Lib "user32" (ByVal handle As Long, ByVal un1 As Long, ByVal n1 As Long, ByVal n2 As Long, ByVal un2 As Long) As Long

'The API format types
Const CF_BITMAP = 2
Const CF_PALETTE = 9
Const IMAGE_BITMAP = 0
Const LR_COPYRETURNORG = &H4
Const xlPicture = CF_BITMAP
Const xlBitmap = CF_BITMAP

Public Function BitmapToPicture(ByVal hBmp As Long, Optional ByVal hPal As Long = 0&) As IPictureDisp
    'Copyr ight: Lebans Holdings 1999 Ltd.
    '           May not be resold in whole or part. Please feel
    '           free to use any/all of this code within your
    '           own application without cost or obligation.
    '           Please include the one line Copyright notice
    '           if you use this function in your own code.
    '
    'Name:      BitmapToPicture &
    '           GetClipBoard
    '
    'Purpose:   Provides a method to save the contents of a
    '           Bound or Unbound OLE Control to a Disk file.
    '           This version only handles BITMAP files.
    '           '
    'Author:    Stephen Lebans
    'Email:     Stephen@lebans.com
    'Web Site:  www.lebans.com
    'Date:      Apr 10, 2000, 05:31:18 AM
    '
    'Called by: Any
    '
    'Inputs:    Needs a Handle to a Bitmap.
    '           This must be a 24 bit bitmap for this release.
    Dim lngRet As Long
    Dim Ipic As IPicture, picdes As PictDesc, iidIPicture As IID

    picdes.Size = Len(picdes)
    picdes.Type = vbPicTypeBitmap
    picdes.hBmp = hBmp

    picdes.hPal = hPal
    iidIPicture.Data1 = &H7BF80980
    iidIPicture.Data2 = &HBF32
    iidIPicture.Data3 = &H101A
    iidIPicture.Data4(0) = &H8B
    iidIPicture.Data4(1) = &HBB
    iidIPicture.Data4(2) = &H0
    iidIPicture.Data4(3) = &HAA
    iidIPicture.Data4(4) = &H0
    iidIPicture.Data4(5) = &H30
    iidIPicture.Data4(6) = &HC
    iidIPicture.Data4(7) = &HAB

    'create the picture from the bitmap handle
    lngRet = OleCreatePictureIndirect(picdes, iidIPicture, True, Ipic)
    Set BitmapToPicture = Ipic
End Function

Public Function GetClipBoard() As Long
    ' Adapted from original Source Code by:
    '* MODULE NAME:     Paste Picture
    '* AUTHOR & DATE:   STEPHEN BULLEN, Business Modelling Solutions Ltd.
    '*                  15 November 1998
    '*
    '* CONTACT:         Stephen@BMSLtd.co.uk
    '* WEB SITE:        http://www.BMSLtd.co.uk
    Dim hClipBoard As Long
    Dim hBitmap As Long
    Dim hBitmap2 As Long

    hClipBoard = OpenClipboard(0&)

    If hClipBoard <> 0 Then
        hBitmap = GetClipboardData(CF_BITMAP)

        If hBitmap = 0 Then GoTo exit_error

        hBitmap2 = CopyImage(hBitmap, IMAGE_BITMAP, 0, 0, LR_COPYRETURNORG)
        hClipBoard = EmptyClipboard
        hClipBoard = CloseClipboard

        GetClipBoard = hBitmap2
    End If

    Exit Function
exit_error:
    GetClipBoard = -1
End Function

Public Function ClearClipboard()
    EmptyClipboard
    CloseClipboard
End Function 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T17:55:35.150

> ...但我在每条记录后清除它

在此代码之后尝试[DoEvents 。](http://msdn.microsoft.com/en-us/library/aa262728%28v=vs.60%29.aspx)

# javascript - 寻找不显眼的 jquery 插件的模式

> ID：14402015
> 
> 赞同：0
> 
> 时间：2013-01-18T15:23:35.227
> 
> 标签：javascript, jquery, jquery-plugins

我正在开发一个 jquery 插件，我想允许程序化创建和不显眼的创建（例如：为具有特定 css 类的元素自动创建插件）

我有一些想法如何实现这一点，但我想知道是否有任何“好的做法”或模式可供检查。如果有的话，我想遵循推荐的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T15:28:38.050

好的做法是不这样做。

没有实用的方法可以自动检测具有特定类的元素的创建，因此*正常*模式是使用选择器*在创建这些元素后*查找这些元素，然后将插件专门绑定到这些元素。

在插件的源文件中，您*可以*这样做：

```
(function($) {

     // plugin code here
     $.fn.foo = ...

     // tell jQuery to bind the plugin to existing
     //  .foo elements once the DOM is ready
     $(function() {
         $('.foo').foo();
     });
 })(jQuery); 
```

尽管恕我直言，插件在没有故意程序员干预的情况下将自己添加到元素中通常是不礼貌的。

您还需要安排`$('.foo').foo()`稍后在您动态创建任何新的此类元素时调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T15:48:01.610

[这](http://debuggable.com/posts/how-to-write-jquery-plugins:4f72ab2e-7310-4a74-817a-0a04cbdd56cb)是一篇不错的文章...

还可以考虑检查[jquerymobile](http://jquerymobile.com/)

# eclipse - Eclipse：Logcat 日志很快消失。如何在运行时保存？并增加窗口缓冲区大小？

> ID：14402016
> 
> 赞同：5
> 
> 时间：2013-01-18T15:23:37.123
> 
> 标签：eclipse, android-logcat

我在 Eclipse 中使用 Logcat 获取 android 日志。但是，它们会很快从 Logcat 屏幕上消失。

有没有办法：

1.  增加 Logcat 窗口的缓冲区大小，以便稍后我可以看到日志，因为缓冲区中存储的内容足够多？

2.  有没有办法在运行时通过 Eclipse 将它们保存到文件中？

谢谢，阳光

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-19T15:32:17.817

1.  Windows->首选项->Android->Logcat：

您可以更改要缓冲的 logcat 消息的最大数量。

1.  没有找到第 2 部分的答案。

# android - 注册应用程序以处理 USB 设备连接

> ID：14402018
> 
> 赞同：1
> 
> 时间：2013-01-18T15:23:38.643
> 
> 标签：android, usb

我想将我的应用程序添加到 Android 提供的应用程序列表中，以便在连接数码相机时启动。我已将此添加到我的清单中：

```
<intent-filter>
  <action android:name="android.hardware.usb.action.USB_DEVICE_ATTACHED" />

  <meta-data
     android:name="android.hardware.usb.action.USB_DEVICE_ATTACHED"
     android:resource="@xml/device_filter" />
</intent-filter> 
```

并指定了一个过滤器（第 6 类是数码相机，但我也尝试过空过滤器）：

```
<resources>
    <usb-device class="6"/>
</resources> 
```

它没有效果，我的应用程序仍然不在该列表中。我还需要做什么？

请注意，我对广播意图不感兴趣，我所需要的只是将其添加到处理设备用户的选项列表中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T13:54:36.763

发现了问题。清单应该是这样的：

```
<intent-filter>
  <action android:name="android.hardware.usb.action.USB_DEVICE_ATTACHED" />
</intent-filter>

<meta-data
   android:name="android.hardware.usb.action.USB_DEVICE_ATTACHED"
   android:resource="@xml/device_filter" /> 
```

IE。`meta-data`不应该是`intent-filter`我所说的子元素。

# c# - 使用不同的参数调用相同的方法 - 如何使用多线程？

> ID：14402019
> 
> 赞同：0
> 
> 时间：2013-01-18T15:23:46.610
> 
> 标签：c#, .net, multithreading

这是场景：我有一个 dll，它具有从 db 获取数据的方法，具体取决于传递的参数，进行各种检查并为我提供所需的数据。

```
GetGOS_ForBill(AgencyCode) 
```

在 Windows 应用程序中，我有列出 500 多个机构的列表框。我为每个附加到通用列表的机构检索 GOS。如果用户选择了所有机构（目前为 500+），大约需要 10 分钟。从 dll 返回数据。

我们虽然关于后台处理。但这并没有减少时间，除了用户可以在屏幕上做其他事情。考虑多线程。

有人可以帮我吗？什么是正确的方法，我们如何使用多线程来完成？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T15:33:04.413

顺便说一句，我认为您对多线程没有太多经验，多线程不是一个可以即兴创作并通过 Stackoverflow 问题扔掉的话题。如果您不知道自己在做什么，我强烈建议您不要使用多线程……而不是一个问题，您将遇到两个问题。

在您的情况下，性能问题与使用线程来获得并行工作负载无关，而是与正确构造问题有关。

现在，您正在分别查询每个机构，这对几个机构来说工作得很好，但正在迅速退化。查询本身可能很快，问题是您正在运行该查询 500 次。相反，为什么不尝试在单个查询中获取所有机构的所有 GOS（这可能会很快）并将其存储在内存中（比如字典）。然后在需要时检索适当的 GOS 集。

如果最常见的情况是用户只选择其中几个，您总是可以建立一个阈值......如果选择的数字小于 30，则执行每个查询，否则运行一般查询并从内存中检索。

# image - 如何在 Flash 库中拥有相对路径，以便能够从任何计算机更新所有图像？

> ID：14402034
> 
> 赞同：2
> 
> 时间：2013-01-18T15:24:27.300
> 
> 标签：image, relative-path, flash-cs4

我想问一下如何在 Flash 库中使用相对路径以便能够从任何计算机更新图像？我使用 Flash CS4。我尝试从 File->Import->Import to Library 导入图像，但我仍然得到绝对路径...

谢谢！

# mysql - 具有 AVG 函数的空集与任何非空集的 UNION

> ID：14402035
> 
> 赞同：3
> 
> 时间：2013-01-18T15:24:41.417
> 
> 标签：mysql, sql, database

这是我的第一个问题，所以请耐心等待.. :)

我们是两个开发人员，都拥有相同的 MySql DB 和相同的表和值。

一个是 MySql 5.5 版，并且工作正常（显然），正如其他开发人员告诉我的那样。

在我的装有 MySql 5.1.44（基本 MAMP 安装）的机器上，我遇到了以下奇怪的问题。

一个非常大的查询（不是我的）失败并出现错误“列'xd'不能为空”。

去除碎片我把它缩小到这个：

```
select xd, avg(media) from questionario_punteggi where somefield = 1 union select 1,2 
```

注意，**没有 somefield = 1 的记录，**所以第一个选择返回一个空集

我们有一个带有 AVG() 函数的 SELECT，它返回一个空集 UNION 另一个 SELECT 返回一些东西（1,2 只是我现在作为示例放置的随机值）

*   如果我删除 AVG() 查询有效。
*   如果我删除 xd （以及右侧的 1,2 中的 2），则查询有效。
*   如果我删除 UNION 查询有效。
*   如果我用 somefield = 1 设置一些记录，则查询有效。
*   在另一台机器 5.5 上，查询有效。

否则错误是：

# 1048 - 列“xd”不能为空

字段是：

```
`xd` char(3) NOT NULL DEFAULT '001',
`media` decimal(7,4) NOT NULL DEFAULT '0.0000',
`somefield` tinyint(4) NOT NULL DEFAULT '0', 
```

天哪。有什么帮助吗？谢谢。

**更新**

**它已作为 MySql <= 5.1 中的 BUG 报告给我，在 MySql 5.5 之前已修复。我没有详细信息，但我相信消息来源**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T15:49:38.120

我建议颠倒`UNION`.

这是因为 a 中的第`SELECT`一个`UNION`决定了结果集中列的数据类型；在您的情况下， the 的第一列采用了`UNION`该列的类型`questionario_punteggi.xd`：即`CHAR(3) NOT NULL`.

由于您在 的第一部分应用聚合函数，因此*即使*没有记录与过滤条件匹配`UNION`，它也会产生单行。如[（聚合）函数](http://dev.mysql.com/doc/refman/5.1/en/group-by-functions.html)下所述：*[`GROUP BY`](http://dev.mysql.com/doc/refman/5.1/en/group-by-functions.html)*

 *> [`AVG()`](http://dev.mysql.com/doc/refman/5.1/en/group-by-functions.html#function_avg)`NULL`如果没有匹配的行则返回。

[*隐藏*](http://dev.mysql.com/doc/refman/5.1/en/group-by-extensions.html) 列的值`xd`通常是从与过滤器匹配的记录中不确定选择的记录（这就是为什么您可能不想这样做）；但是，由于在这种情况下没有记录匹配，服务器反而返回`NULL`（显然不能进入具有该`NOT NULL`属性的列）。

通过颠倒 的顺序`UNION`，该列将没有该`NOT NULL`属性。您可能需要适当地为您的列设置别名：

```
SELECT 1 AS xd, 2 AS avg_media
UNION
SELECT xd, AVG(media) FROM questionario_punteggi WHERE somefield = 1 
```

使用它来依次解释您的每个观察结果：

*   > 如果我删除 AVG() 查询有效。

    由于不再执行聚合，因此第一列`SELECT`中的第一个`UNION`产生一个空记录集，因此`NULL`第一列中没有记录。

*   > 如果我删除 xd （以及右侧的 1,2 中的 2），则查询有效。

    由于不再选择隐藏列，MySQL 不再返回`NULL`它的位置。

*   > 如果我删除 UNION 查询有效。

    这是您的 MySQL 版本和您同事的版本之间可能已修复的错误：该`NOT NULL`属性不应该真正应用于`UNION`结果。

*   > 如果我用 somefield = 1 设置一些记录，则查询有效。

    为隐藏列选择的值是匹配记录中的不确定值（但非`NULL`值，由于列的属性）。

*   > 在另一台机器 5.5 上，查询有效。

    这个错误（我仍在寻找它）必须已在您各自版本的 MySQL 之间修复。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T15:29:22.420

尝试使用`SELECT IFNULL();`

```
Select IFNULL(xd,0), avg(media) f
rom questionario_punteggi 
where somefield = 1 
union 
select 1,2 
```

[http://dev.mysql.com/doc/refman/5.0/en/control-flow-functions.html#function_ifnull](http://dev.mysql.com/doc/refman/5.0/en/control-flow-functions.html#function_ifnull)*

# html - 如何将容器放置在屏幕中间？

> ID：14402038
> 
> 赞同：3
> 
> 时间：2013-01-18T15:24:49.097
> 
> 标签：html, css

> **可能重复：**
> [CSS在不同的屏幕中居中一个div](https://stackoverflow.com/questions/9377099/css-centering-a-div-in-different-screens)

我想这个问题的答案很简单，但我很难过。

我正在尝试将网站定位在屏幕中央，例如 Guardian 网站 - [http://www.guardian.co.uk/](http://www.guardian.co.uk/)。我认为我使用左右边框是正确的，但这使得定位页脚变得困难。

查看监护人网站并使用 firefox 检查元素功能后，他们似乎在屏幕的左侧和右侧都没有使用任何 div。事实上，容器似乎就在屏幕中间。

所以我想我的问题是。你如何定位这样的容器？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-18T15:27:46.803

```
.container {
    /* remember to set a width */
    margin-right: auto;
    margin-left: auto;
} 
```

这是小提琴：http: [//jsfiddle.net/d9yBs/](http://jsfiddle.net/d9yBs/)

* * *

您还可以组合到 2 个边距属性，并使用简写：

```
margin: 0 auto; 
```

这会将上边距和下边距设置为 0，将左右边距设置为自动。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T15:27:18.747

快速的方法是：

```
#container
{
    position: absolute;
    left: 50%;
    top: 50%;
    height: 200px;
    margin-top: -100px /* half of you height */
    width: 400px;
    margin-left: -200px /* half of you width */
} 
```

仅居中的另一种方法是

```
#container
{
    width: 400px;
    margin-left: auto;
    margin-right: auto;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T15:29:28.883

这只是 CSS 的一个技巧：

`margin: 0 auto;`

从监护人网站：

```
div.InSkinAlignCenter {
margin: 0 auto;
} 
```

据我记得`position`属性应该设置为`relative`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-18T15:30:46.733

HTML

```
<body>
  <div class="page_wrap">
  </div>
</body> 
```

CSS

```
.page_wrap
{
    border: 1px solid black;
    width: 250px;
    height: 100px;
    margin-left: auto;
    margin-right: auto;
}
body
{
    text-align: center; /* required by some browsers */
} 
```

[http://jsfiddle.net/pc7AY/](http://jsfiddle.net/pc7AY/)看看。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-01-18T15:28:29.207

试试这个：

CSS：

```
.page {
    width: 200px;
    background: #FF0000;
    margin: auto;
} 
```

HTML：

```
<div class="page">
    This is the content.
</div> 
```

另外，检查这个[jsFiddle](http://jsfiddle.net/ErRAr/)！

# linux-kernel - 内核编译错误（无效的幻数）

> ID：14402041
> 
> 赞同：1
> 
> 时间：2013-01-18T15:25:00.213
> 
> 标签：linux-kernel, kernel, fedora

我正在尝试从下载的源代码编译内核。我使用 kernel.org 的源代码制作了内核映像。

我已成功将其加载到 grub 中，但是当我尝试运行加载的模块时，它会给出错误消息：`"invalid magic number"`. 我没有得到我需要修复的东西来完成这些事情。

我遵循的步骤：

1.  制作 xconfig，
2.  制作 bzImage
3.  制作模块
4.  制作modules_install
5.  我还从 bzImage （在 /boot 文件夹中）更改了图像的名称，然后从以下位置创建了 initrd 图像：
6.  `# dracut /boot/initramfs-3.1.6-1.fc16.x86_64.img 3.1.6-1.fc16.x86_64`（从网络复制的命令）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T13:57:38.883

每次编译内核时，还必须重新编译需要在该内核中使用的内核模块。例如，您不能在内核 3.7 上加载为内核 2.6.39 编译的模块。您必须为内核 3.7 重新编译它。

更多细节->更好的答案

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-21T14:13:18.883

实际上我怀疑这与内核模块有什么关系。看起来内核本身被称为模块。内核可能构建不正确，或者可能从 grub 命令行加载不正确。

[http://forums.gentoo.org/viewtopic-t-932358-start-0.html](http://forums.gentoo.org/viewtopic-t-932358-start-0.html)试试看。

内核构建中的某些文件可能没有被正确清理，因此其中包含不正确的数据，因为您在之前尝试构建它时所做的任何更改。

另请注意，x86 映像最终将位于内核源代码中的 arch/x86_64/boot/bzImage 或 arch/x86/boot/bzImage 确保您实际上已经复制了内核本身，而不是其他一些不正确的文件。

如果失败，请尝试使用 grub 1.x，因为它比 grub 2.x 更易于使用，请注意很多事情都不同，您应该阅读正确版本的 grub 教程。根据发行版的不同，grub 1.x 通常位于 grub-legacy 或类似的包中。

编辑：如果您只为您的硬件构建内核......不要使用 initramfs 它的过度杀伤力。如果您的系统无法为基本驱动程序加载足够大的内核（例如，sparc 的内核映像大小非常有限），您可能会希望这样做。另一个可能通过网络启动，但总的来说它是不需要的。如果您*必须*使用 initramfs，请先让您的内核构建在没有它的情况下正常工作。

我个人也用包含的基本驱动程序（基本上是磁盘和文件系统）构建我的内核并用它构建它。

```
make mrproper (save/backup your .config first) ; 
make menuconfig ; 
make -j8 ; 
make modules_install ; 
cp arch/x86_64/boot/bzImage /boot/linux-3.7.1 ; 
```

（修改 grub 以启动新内核）并且我完成并准备重新启动。

你有机会附上失败的截图吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-21T08:33:39.493

我没有 100% 清楚地回答你的问题。无论如何，您从 kernel.org 下载了一些内核树并使用新映像成功启动。

然后您尝试使用 insmod 或 modprobe 加载 LKM 即内核模块。

所以你得到“无效的幻数”。

**解决方案**

需要在新内核中重新编译内核模块，然后尝试插入。

# exception - Windows 8 应用程序-metro 应用程序-Mediacapture InitializeAsync 异常访问被拒绝

> ID：14402043
> 
> 赞同：0
> 
> 时间：2013-01-18T15:25:05.587
> 
> 标签：exception, windows-8, microsoft-metro, access-denied, audio-capture

我正在为使用音频设备的 Windows 8 开发应用程序，但我的 initializeAsync 方法有问题。出色地..

在应用程序清单功能中，我检查了麦克风。

在我写的 OnNavigatedTo 方法中：

```
protected async override void OnNavigatedTo(NavigationEventArgs e)
    {
        try
        {                
            var settings = new MediaCaptureInitializationSettings();            
            settings.StreamingCaptureMode = StreamingCaptureMode.Audio;                
            await mediaCaptureMgr.InitializeAsync(settings);                                 
        }
        catch (Exception ex)
        {                                

        }
    } 
```

当我第一次运行我的应用程序时，我收到以下消息：

“我的应用可以使用你的麦克风吗？” 有两个按钮：允许和阻止。如果我单击允许该应用程序运行良好。如果我单击 Block the app crash with Access is Denied exception，我可以认为这是正确的，但如果我再次运行我的应用程序，我会再次收到相同的异常，而不是消息。如何关闭使用 InitializeAsync 启动的音频驱动程序？？？？？？我该怎么办？？？？

我可以：

1）禁用阻止按钮，但我不知道该怎么做。2）管理异常（例如：如果单击阻止按钮重置音频设备，以便我可以再次看到消息） 3）我不知道....

我已经在这个问题上度过了最后两天，但我还没有找到解决方案。

提前致谢。

安德烈亚

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-01-19T09:50:33.087

试试添加这个：

```
<Capability Name="removableStorage" />
<DeviceCapability Name="webcam" />
<DeviceCapability Name="microphone" />
<DeviceCapability Name="proximity" /> 
```

到 Package.appxmanifest 文件中的功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T07:35:08.320

请设置 MediaCaptureInitializationSettings 的 VideoDeviceId 属性

# android - 视图中的屏幕高度和宽度

> ID：14402045
> 
> 赞同：2
> 
> 时间：2013-01-18T15:25:19.383
> 
> 标签：android, height, width, deprecated

尝试获取屏幕尺寸的高度和宽度时，我收到“不推荐使用 Display 类型的方法 getHeight()”错误，代码：

```
public JumpboyView(MyView mv, Context contextPlay) {
    super(contextPlay);
    // TODO Auto-generated constructor stub
    bBoy = BitmapFactory.decodeResource(getResources(), R.drawable.boy);

    Display display = ((WindowManager) contextPlay.getSystemService(Context.WINDOW_SERVICE)).getDefaultDisplay();
    height = display.getHeight(); 
```

并且在尝试使用时`getWindowManager().getDefaultDisplay().getMetrics(displaymetrics);`

我得到“JumpboyView 类型的方法 getWindowManager() 未定义”，其中有 2 个修复可用更改为 getWindowToken() 或创建方法..

请帮忙？

ps 它曾经在旧版本上工作：\

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T15:27:59.043

试试这个：

```
 Display display = ((WindowManager) contextPlay.getSystemService(Context.WINDOW_SERVICE)).getDefaultDisplay();
    Point size = new Point();
    display.getSize(size);
    height = size.y 
```

# c++ - C++ 传递二维数组

> ID：14402046
> 
> 赞同：-1
> 
> 时间：2013-01-18T15:25:20.320
> 
> 标签：c++, arguments, parameter-passing, multidimensional-array, minesweeper

我正在尝试创建一个从平面文件加载棋盘的扫雷游戏（不，它不是随机的）。根据分配指令，我将一个二维数组传递给一个加载函数，该函数将解析作为命令行参数传递的文件。

无论如何，我的问题是传递二维数组。做这件事的正确方法是什么？以下是我到目前为止的代码：

```
#include <iostream>

using namespace std;

struct Tile
{
    bool mine, visible;
    int danger;
};

bool loadBoard( Tile **board, string filename );

const int gridSize = 6;

int main( int argc, char* argv[] )
{
    Tile board[ gridSize ][ gridSize ];

    loadBoard( board, argv[ 1 ] );

    system("PAUSE");
    return EXIT_SUCCESS;
}

bool loadBoard( Tile **board, string filename ) {

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T15:26:27.377

既然您使用的是 C++，为什么不使用

```
std::vector<std::vector<Tile>> 
```

优先于 C 风格的数组？

由于您似乎需要使用 C 风格的数组，您可以使用 arpanchaudhury 建议的方法，或者您可以通过`Tile*`并执行类似的操作

```
static void loadBoard(Tile *board, int rows, int cols, string filename) {
    for (int row = 0; row < rows; row++) {
        for (int col = 0; col < cols; col++) {
            Tile* tile = &board[(row*gridSize)+col];
            // populate Tile
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T15:32:32.737

如果您想传递二维数组，请指定数组中的列数。

`bool loadBoard( Tile board[][size], string filename ) {}`

尽管最好使用向量而不是简单的数组，因为您不需要指定预定义的大小

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-18T16:27:42.807

只要你使用 C++...

```
#include <iostream>
using namespace std;

struct Tile
{
    bool mine, visible;
    int danger;
};

// load a square board of declared-size.
template<size_t N>
void loadboard( Tile (&board)[N][N], const std::string& filename)
{
    // load board here.
    cout << "Loading from file: " << filename << endl;
    for (size_t i=0;i<N;++i)
    {
        cout << "board[" << i << "]: [ ";
        for (size_t j=0;j<N;++j)
        {
            // load element board[i][j] here
            cout << j << ' ';
        }
        cout << ']' << endl;
    }
    cout << endl;
}

int main()
{
    Tile board[6][6];
    loadboard(board, "yourfilename.bin");   // OK dims are the same

    Tile smaller[3][3];
    loadboard(smaller, "anotherfile.bin");  // OK. dims are the same

    // Tile oddboard[5][6];
    // loadboard(oddboard, "anotherfile.bin"); // Error: dims are not the same.

    return 0;
} 
```

**输出**

```
Loading from file: yourfilename.bin
board[0]: [ 0 1 2 3 4 5 ]
board[1]: [ 0 1 2 3 4 5 ]
board[2]: [ 0 1 2 3 4 5 ]
board[3]: [ 0 1 2 3 4 5 ]
board[4]: [ 0 1 2 3 4 5 ]
board[5]: [ 0 1 2 3 4 5 ]

Loading from file: anotherfile.bin
board[0]: [ 0 1 2 ]
board[1]: [ 0 1 2 ]
board[2]: [ 0 1 2 ] 
```

当然，也可能有“特定说明”不使用该语言的模板功能。再说一次，我敢打赌，这些说明也不包括让 SO 用户解决您的问题，所以我不会对那些很快就会严格遵循的说明进行评估。

# .net - 如何在 C# 应用程序中托管多个 COM+ 对象？

> ID：14402059
> 
> 赞同：0
> 
> 时间：2013-01-18T15:26:21.033
> 
> 标签：.net, com+

我可以在 C# 应用程序中托管完整的 COM+ 对象吗？目标是托管同一组件的多个实例以使其具有可扩展性。

谢谢

# powershell - Powershell 脚本在远程访问时有效，但不能作为 Azure 启动任务

> ID：14402060
> 
> 赞同：1
> 
> 时间：2013-01-18T15:26:24.707
> 
> 标签：powershell, azure, command-line, permissions, zip

我有一个保存在`.cmd`文件中的 powershell 脚本，该文件从网络下载文件然后解压缩。我的 azure web 角色在启动时执行它。这是脚本：

```
powershell -ExecutionPolicy Bypass -c $(New-Object Net.WebClient).DownloadFile('URL.zip', 'FILE.zip') ;
 (New-Object -com shell.application).namespace('c:\FOLDER').Copyhere((New-Object -com shell.application).namespace('FILE.zip').items()) 
```

当我通过 Azure 启动任务运行脚本时：脚本的第一部分有效。文件已下载。解压缩的脚本的第二部分不运行。

当我在远程进入虚拟机时通过命令行运行脚本时：整个脚本运行。

因此我知道这不是语法错误。我能想到的上述两种情况的唯一区别是权限问题。但是，我正在运行 powershell，并将 -ExecutionPolicy 设置为 Bypass，这是最高权限级别。有人有什么想法吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T10:16:05.860

更改命令，以便将命令的输出转储到文件中。像这样的东西应该工作

```
<YOUR_COMMAND> > out.log 2> err.log 
```

再次运行任务并检查日志中的输出。

此外，您使用的是相对路径而不是绝对路径。计划任务可能以 Windows 系统文件夹作为其工作目录运行，因此您可能会从中获得权限错误。尝试使用您创建的目录的绝对路径。

# java - 如何在 Mule 中使用 XStream？

> ID：14402064
> 
> 赞同：3
> 
> 时间：2013-01-18T15:26:35.067
> 
> 标签：java, xml, xml-serialization, mule

我已经编写了三个实现 XStream 的类。它编组/解组以下 XML。

```
<Message calledProgram="XXX" programName="YYY">
  <Fields>
    <Field name="SupplierName" value="ABC"/>
    <Field name="SupplierNo" value="123456"/>
    <Field name="SupplierCountry" value="AA"/>
    <Field name="TermsOfDelivery" value="5"/>
    <Field name="PaymentTerms" value="90"/>
    <Field name="Currency" value="GBP"/>
  </Fields>
</Message> 
```

如何在 Mule 中使用这些类？它是一个使用另外两个的类，所以它只是一个使用的类。

我将收到一个类似上面的 XML。我想将它转换为一个对象。

它在纯 Java 中工作，但我如何在流程中使用它。从 Mule 获取所有可能的异常。

```
Exception in thread "main" org.mule.module.launcher.DeploymentInitException: InstantiationException: xxx.com.GenericClass
at org.mule.module.launcher.application.DefaultMuleApplication.init(DefaultMuleApplication.java:220)
at org.mule.module.launcher.application.ApplicationWrapper.init(ApplicationWrapper.java:64)
at org.mule.module.launcher.DefaultMuleDeployer.deploy(DefaultMuleDeployer.java:46)
at org.mule.tooling.server.application.ApplicationDeployer.run(ApplicationDeployer.java:56)
at org.mule.tooling.server.application.ApplicationDeployer.main(ApplicationDeployer.java:88)
Caused by: org.mule.api.config.ConfigurationException: Error creating bean with name 'MyB24Flow1': Invocation of init method failed; nested exception is org.mule.api.lifecycle.InitialisationException: Unable to initialize XStream (org.mule.api.lifecycle.InitialisationException) (org.mule.api.config.ConfigurationException)
at org.mule.config.builders.AbstractConfigurationBuilder.configure(AbstractConfigurationBuilder.java:52)
at org.mule.config.builders.AbstractResourceConfigurationBuilder.configure(AbstractResourceConfigurationBuilder.java:78)
at org.mule.context.DefaultMuleContextFactory.createMuleContext(DefaultMuleContextFactory.java:80)
at org.mule.module.launcher.application.DefaultMuleApplication.init(DefaultMuleApplication.java:208)
... 4 more

Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'MyB24Flow1': Invocation of init method failed; nested exception is org.mule.api.lifecycle.InitialisationException: Unable to initialize XStream
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1455)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:519)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:585)
at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:913)
at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:464)
at org.mule.config.spring.SpringRegistry.doInitialise(SpringRegistry.java:89)
at org.mule.registry.AbstractRegistry.initialise(AbstractRegistry.java:109)
... 14 more
Caused by: org.mule.api.lifecycle.InitialisationException: Unable to initialize XStream
at org.mule.module.xml.transformer.AbstractXStreamTransformer.initialise(AbstractXStreamTransformer.java:52)
at org.mule.processor.chain.AbstractMessageProcessorChain.initialise(AbstractMessageProcessorChain.java:79)
at org.mule.construct.AbstractFlowConstruct.initialiseIfInitialisable(AbstractFlowConstruct.java:309)
at org.mule.construct.AbstractPipeline.doInitialise(AbstractPipeline.java:161)
at org.mule.construct.AbstractFlowConstruct$1.onTransition(AbstractFlowConstruct.java:111)
at org.mule.construct.AbstractFlowConstruct$1.onTransition(AbstractFlowConstruct.java:105)
at org.mule.lifecycle.AbstractLifecycleManager.invokePhase(AbstractLifecycleManager.java:141)
at org.mule.construct.FlowConstructLifecycleManager.fireInitialisePhase(FlowConstructLifecycleManager.java:81)
at org.mule.construct.AbstractFlowConstruct.initialise(AbstractFlowConstruct.java:104)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeCustomInitMethod(AbstractAutowireCapableBeanFactory.java:1581)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1522)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1452)
... 25 more 
```

**更新：**

虽然这不是我真正的代码。但是你是什么意思OOTB？这也不起作用。也尝试过不使用 File-2-String。

```
<?xml version="1.0" encoding="UTF-8"?>
<mule xmlns:file="http://www.mulesoft.org/schema/mule/file" xmlns:mulexml="http://www.mulesoft.org/schema/mule/xml" xmlns="http://www.mulesoft.org/schema/mule/core" xmlns:doc="http://www.mulesoft.org/schema/mule/documentation" xmlns:spring="http://www.springframework.org/schema/beans" version="CE-3.3.1" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="
http://www.mulesoft.org/schema/mule/xml         http://www.mulesoft.org/schema/mule/xml/current/mule-xml.xsd 
http://www.mulesoft.org/schema/mule/file     http://www.mulesoft.org/schema/mule/file/current/mule-file.xsd 
http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-current.xsd 
http://www.mulesoft.org/schema/mule/core   http://www.mulesoft.org/schema/mule/core/current/mule.xsd ">
    <flow name="MyXStreamFlow1" doc:name="MyXStreamFlow1">
    <file:inbound-endpoint path="E:\JavaDev\Test" responseTimeout="10000" doc:name="File"/>
    <logger level="INFO" doc:name="Logger"/>
    <file:file-to-string-transformer doc:name="File to String"/>
    <logger message="WTF" level="INFO" doc:name="Logger"/>
    <mulexml:xml-to-object-transformer doc:name="XML to Object"/>
    <logger level="INFO" doc:name="Logger"/>
    <mulexml:object-to-xml-transformer doc:name="Object to XML"/>
    <logger level="INFO" doc:name="Logger"/>
</flow> 
```

这是我的主要 Java 类。

```
package test;
import java.io.FileInputStream;
import java.io.FileNotFoundException;

import com.thoughtworks.xstream.XStream;
import com.thoughtworks.xstream.annotations.XStreamAlias;
import com.thoughtworks.xstream.annotations.XStreamAsAttribute;
import com.thoughtworks.xstream.io.xml.DomDriver;

@XStreamAlias("Message")
public class GenericClass {

@XStreamAlias("calledProgram")
@XStreamAsAttribute
private String calledProgram;

@XStreamAlias("programName")
@XStreamAsAttribute
private String programName;

@XStreamAlias("Fields")
private Fields flds = new Fields(
    new Field("nameValue1", "valueValue1"),
    new Field("nameValue2", "valueValue2"),
    new Field("nameValue3", "valueValue2"));

private static XStream xstream;

public GenericClass() {
    new GenericClass("calledProgram", "programName");
}

public GenericClass(String calledProgram, String programName) {
    xstream = new XStream(new DomDriver());
    xstream.processAnnotations(GenericClass.class);
    this.calledProgram = calledProgram;
    this.programName = programName;
}

public static void main(String[] args) {

    GenericClass msg = new GenericClass();

    // Unmarshall
    FileInputStream file = null;
    try {
        file = new FileInputStream(
                "E:\\JavaDev\\JRecordFiles\\Samples\\LevisTest.xml");
    } catch (FileNotFoundException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
     msg = (GenericClass) xstream.fromXML(file);
     System.out.println("<?xml version=\"1.0\" encoding=\"utf-8\"?>\n" + xstream.toXML(msg));
}
} 
```

-

```
package test;

import com.thoughtworks.xstream.annotations.XStreamAsAttribute;

public class Field {

private String field;

@XStreamAsAttribute
private String name;

@XStreamAsAttribute
private String value;

/**
 * @param field
 */
public Field(String name, String value) {
    this.name = name;
    this.value = value;
}

/**
 * @return the field
 */
public String getField() {
    return field;
}

/**
 * @param field
 *            the field to set
 */
public void setField(String field) {
    this.field = field;
}

/**
 * @return the name
 */
public String getName() {
    return name;
}

/**
 * @param name
 *            the name to set
 */
public void setName(String name) {
    this.name = name;
}

/**
 * @return the value
 */
public String getValue() {
    return value;
}

/**
 * @param value
 *            the value to set
 */
public void setValue(String value) {
    this.value = value;
}

} 
```

-

```
package test;

import java.util.Arrays;
import java.util.List;

import com.thoughtworks.xstream.annotations.XStreamImplicit;

public class Fields {

@XStreamImplicit(itemFieldName = "Field")
private List<Field> fields;

public Fields(Field... field) {
    this.fields = Arrays.asList(field);
}

/**
 * @return the fields
 */
public List<Field> getFields() {
    return fields;
}

/**
 * @param fields
 *            the fields to set
 */
public void setFields(List<Field> fields) {
    this.fields = fields;
}

} 
```

如何在 Mule 中使用 XStream？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-05T22:03:15.053

## 问题

默认的**Object to XML**转换器只支持类的**别名**注解：

```
<mulexml:object-to-xml-transformer doc:name="Object to XML">
    <mulexml:alias name="myAlias" class="com.my.package.MyClass"/>
</mulexml:object-to-xml-transformer> 
```

并忽略所有其他注释。自 2012 年 7 月以来，官方错误跟踪器上已经存在一个[问题](http://www.mulesoft.org/jira/browse/MULE-6364)，但直到现在仍未解决。

## 解决方案：自定义 XML 到对象转换器

### 1.创建变压器

在 Java 中创建一个自定义转换器，它扩展`AbstractMessageTransformer`：

```
public class ObjectToXml extends AbstractMessageTransformer {

  public Object transformMessage(MuleMessage message, String outputEncoding) throws TransformerException {

    XStream xstream = new XStream();

    // The payload should be the object to transform into XML
    Object object = message.getPayload();

    // Register all annotations in the XStream instance 
    xstream.processAnnotations(object.getClass());

    // Convert the object to XML and set it as payload
    message.setPayload(xstream.toXML(object));

    return message;
  }
} 
```

### 2\. 在您的 Mule 流程中使用自定义转换器

将**Java Transfromer**（不是 Java 组件）添加到您的流程中：

```
<custom-transformer class="com.my.package.ObjectToXml" doc:name="Object to XML"/> 
```

而已！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-19T23:43:15.200

我无法配置它，`xml-to-object-transformer`因此它可以与您的 XStream 注释类一起使用 OOTB。我能够加载上面的 XML 示例并成功完成流程的唯一方法是使用 Spring 实例化和配置 XStream，如下所示：

```
<spring:beans>
    <spring:bean name="xStream" class="com.thoughtworks.xstream.XStream" />
    <spring:bean
        class="org.springframework.beans.factory.config.MethodInvokingFactoryBean"
        p:targetObject-ref="xStream"
        p:targetMethod="processAnnotations">
        <spring:property name="arguments">
            <spring:list>
                <spring:value>test.GenericClass</spring:value>
            </spring:list>
        </spring:property>
    </spring:bean>
</spring:beans> 
```

有了这个，我使用以下代替`xml-to-object-transformer`：

```
<expression-transformer
    expression="#[app.registry.xStream.fromXML(message.payload)]" /> 
```

我意识到这不是很好，所以希望其他人会有更好的解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T16:01:33.783

[Xml 到对象](http://www.mulesoft.org/documentation/display/MULE3USER/XmlObject+Transformers)转换器在内部使用 Xstream，因此它应该可以工作 OOTB。

请提供流程配置，我会相应地更新我的答案。

# apache - .htaccess www 到非 www，同时保留路径、ssl 和查询字符串

> ID：14402065
> 
> 赞同：2
> 
> 时间：2013-01-18T15:26:55.983
> 
> 标签：apache, .htaccess

我正在尝试在 .htaccess 中实现以下目标：

1.  将 www 重定向到非 www
2.  保留已请求的路径（例如`domain.com/path/to/file.php`）
3.  保留查询字符串，如果有的话（例如`domain.com/path/to/file.php?key=val&key2=val2`）
4.  保留已请求的协议（http 或 https）

我试过这段代码：

```
RewriteEngine On
RewriteCond %{HTTP_HOST} !^domain\.com$ [NC]
RewriteRule ^(.*)$ http://domain.com/$1 [R=301,L] 
```

但它不尊重http/https，也不保留已请求的路径（例如，它重定向`https://www.domain.com/path/file.php`到`http://domain.com/file.php`，当它应该重定向到时`https://domain.com/path/file.php`。）

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T19:24:29.970

您需要检查请求是 http 还是 https，并重定向到正确的协议。现在，您将所有内容重定向到`http://`. 您可以使用此条件和分组：

```
RewriteCond %{HTTPS}:s (on:(s)|off:s) 
```

这将使用`%{HTTPS}`“on”或“off”的变量，并将其与`s`. 然后我们匹配`on:(s)`或`off:s`。因此，如果 HTTPS 为“on”，则被`(s)`分组，我们可以使用 a 反向引用它`%2`，否则，如果 HTTPS 为“off”，则没有任何内容被分组并且`%2`为空白。然后我们可以在您的重定向中使用它：

```
RewriteEngine On
RewriteCond %{HTTP_HOST} !^domain\.com$ [NC]
RewriteCond %{HTTPS}:s (on:(s)|off:s)
RewriteRule ^(.*)$ http%2://domain.com/$1 [R=301,L] 
```

至于没有保留路径的第二件事，听起来你的规则在目录`/path`中，这意味着当它通过这些规则发送时它会被剥离。您需要将它们移动到您的文档根目录。或者，如果您*必须*在`/path`目录中包含规则，则可以使用该`%{REQUEST_URI}`变量：

```
RewriteEngine On
RewriteCond %{HTTP_HOST} !^domain\.com$ [NC]
RewriteCond %{HTTPS}:s (on:(s)|off:s)
RewriteRule ^ http%2://domain.com%{REQUEST_URI} [R=301,L] 
```

# ruby-on-rails - 如何从 Rails 中的 RSpec 测试调用应用程序助手方法？

> ID：14402067
> 
> 赞同：30
> 
> 时间：2013-01-18T15:26:58.050
> 
> 标签：ruby-on-rails, rspec

标题是不言自明的。

我尝试过的一切都导致了“未定义的方法”。

澄清一下，我不是在尝试测试辅助方法。我正在尝试在集成测试中使用辅助方法。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-01-18T16:07:33.910

您只需要在测试中包含相关的帮助模块即可使这些方法可用：

```
describe "foo" do
  include ActionView::Helpers

  it "does something with a helper method" do
    # use any helper methods here 
```

真的就这么简单。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-01-31T22:42:40.287

对于迟到这个问题的任何人，都可以在[Relish](https://www.relishapp.com/rspec/rspec-rails/v/2-0/docs/view-specs/view-spec#spec-with-view-that-accesses-helper-method-helpers)网站上回答。

```
require "spec_helper"

describe "items/search.html.haml" do
  before do
    controller.singleton_class.class_eval do
      protected
      def current_user
        FactoryGirl.build_stubbed(:merchant)
      end
      helper_method :current_user
    end
  end

  it "renders the not found message when @items is empty" do
    render

    expect(
      rendered
    ).to match("Sorry, we can't find any items matching &quot;&quot;.")
  end
end 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-08-17T01:25:55.500

如果您尝试在视图测试中使用辅助方法，则可以使用以下方法：

```
before do
  view.extend MyHelper
end 
```

它必须在一个`describe`块内。

它适用于我在 rails 3.2 和 rspec 2.13

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-06-26T10:15:27.367

基于[Thomas Riboulet 在 Coderwall 上的帖子](https://coderwall.com/p/dd08rq)：

在您的规范文件的开头添加以下内容：

```
def helper
  Helper.instance
end

class Helper
  include Singleton
  include ActionView::Helpers::NumberHelper
end 
```

然后用 . 调用特定的助手`helper.name_of_the_helper`。

此特定示例包括[ActionView 的 NumberHelper](http://api.rubyonrails.org/classes/ActionView/Helpers/NumberHelper.html)。我需要[UrlHelper](http://api.rubyonrails.org/classes/ActionView/Helpers/UrlHelper.html)，所以我做了`include ActionView::Helpers::UrlHelper`和`helper.link_to`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-06-24T14:45:32.530

正如您在这里看到的[https://github.com/rspec/rspec-rails](https://github.com/rspec/rspec-rails)，您应该使用以下命令初始化 spec/ 目录（规范所在的位置）：

```
$ rails generate rspec:install 
```

这将生成带有选项的 rails_helper.rb

```
config.infer_spec_type_from_file_location! 
```

最后在你的 helper_spec.rb 中需要新的 rails_helper 而不是需要'spec_helper'。

```
require 'rails_helper'
describe ApplicationHelper do
  ...
end 
```

祝你好运。

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2013-01-18T15:36:39.950

我假设您正在尝试测试辅助方法。为此，您必须将您的规范文件放入`spec/helpers/`. 鉴于您正在使用`rspec-rails`gem，这将为您提供一个`helper`方法，允许您在其上调用任何辅助方法。

[官方`rspec-rails`文档](https://www.relishapp.com/rspec/rspec-rails/v/2-12-2/docs/helper-specs/helper-spec)中有一个很好的例子：

```
require "spec_helper"

describe ApplicationHelper do
  describe "#page_title" do
    it "returns the default title" do
      expect(helper.page_title).to eq("RSpec is your friend")
    end
  end
end 
```

# java - EJB @Schedule 等到方法完成

> ID：14402068
> 
> 赞同：37
> 
> 时间：2013-01-18T15:26:59.067
> 
> 标签：java, jakarta-ee, schedule, ejb-3.1, job-scheduling

我想编写一个每分钟执行一次的后台作业（EJB 3.1）。为此，我使用以下注释：

```
@Schedule(minute = "*/1", hour = "*") 
```

这工作正常。

但是，有时这项工作可能需要超过一分钟。在这种情况下，定时器仍然被触发，导致线程问题。

如果当前执行未完成，是否有可能终止调度程序？

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2013-01-19T12:44:50.737

如果只有 1 个计时器可能同时处于活动状态，则有两种解决方案。

首先，`@Timer`应该可能出现在`@Singleton`. 在单例中，方法默认是写锁定的，因此当容器中仍有活动时尝试调用计时器方法时，容器将自动被锁定。

以下基本就够了：

```
@Singleton
public class TimerBean {

    @Schedule(second= "*/5", minute = "*", hour = "*", persistent = false)
    public void atSchedule() throws InterruptedException {

        System.out.println("Called");
        Thread.sleep(10000);
    }
} 
```

`atSchedule`默认情况下是写锁定的，其中只能有一个线程处于活动状态，包括由容器发起的调用。

在被锁定后，容器可能会重试计时器，因此为了防止这种情况，您将使用读锁代替并委托给第二个 bean（需要第二个 bean，因为 EJB 3.1 不允许将读锁升级到写锁）。

计时器 bean：

```
@Singleton
public class TimerBean {

    @EJB
    private WorkerBean workerBean;

    @Lock(READ)
    @Schedule(second = "*/5", minute = "*", hour = "*", persistent = false)
    public void atSchedule() {

        try {
            workerBean.doTimerWork();
        } catch (Exception e) {
            System.out.println("Timer still busy");
        }
    }

} 
```

工人豆：

```
@Singleton
public class WorkerBean {

    @AccessTimeout(0)
    public void doTimerWork() throws InterruptedException {
        System.out.println("Timer work started");
        Thread.sleep(12000);
        System.out.println("Timer work done");
    }
} 
```

这可能仍会在日志中打印嘈杂的异常，因此更详细但更安静的解决方案是使用显式布尔值：

计时器 bean：

```
@Singleton
public class TimerBean {

    @EJB
    private WorkerBean workerBean;

    @Lock(READ)
    @Schedule(second = "*/5", minute = "*", hour = "*", persistent = false)
    public void atSchedule() {
        workerBean.doTimerWork();
    }

} 
```

工人豆：

```
@Singleton
public class WorkerBean {

    private AtomicBoolean busy = new AtomicBoolean(false);

    @Lock(READ)
    public void doTimerWork() throws InterruptedException {

        if (!busy.compareAndSet(false, true)) {
            return;
        }

        try {
            System.out.println("Timer work started");
            Thread.sleep(12000);
            System.out.println("Timer work done");
        } finally {
            busy.set(false);
        }
    }

} 
```

还有一些可能的变体，例如，您可以将繁忙检查委托给拦截器，或者将仅包含布尔值的单例注入计时器 bean，并在那里检查该布尔值等。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-12-06T15:26:35.437

我遇到了同样的问题，但解决方法略有不同。

```
@Singleton
public class DoStuffTask {

    @Resource
    private TimerService timerSvc;

    @Timeout
    public void doStuff(Timer t) {
        try {
            doActualStuff(t);
        } catch (Exception e) {
            LOG.warn("Error running task", e);
        }
        scheduleStuff();
    }

    private void doActualStuff(Timer t) {

        LOG.info("Doing Stuff " + t.getInfo());
    }

    @PostConstruct
    public void initialise() {
        scheduleStuff();
    }

    private void scheduleStuff() {
        timerSvc.createSingleActionTimer(1000l, new TimerConfig());
    }

    public void stop() {
        for(Timer timer : timerSvc.getTimers()) {
            timer.cancel();
        }
    }

} 
```

这通过设置一个任务在将来执行（在这种情况下，在一秒钟内）来工作。在任务结束时，它会再次安排任务。

编辑：更新以将“东西”重构为另一种方法，以便我们可以防范异常，以便始终重新安排计时器

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2016-10-07T10:09:45.080

从 Java EE 7 开始，可以使用“EE-aware” [ManagedScheduledExecutorService](http://docs.oracle.com/javaee/7/api/javax/enterprise/concurrent/ManagedScheduledExecutorService.html)，即在 WildFly 中：

例如在 a`@Singleton @Startup @LocalBean`中，注入在以下配置的默认“managed-scheduled-executor-service” `standalone.xml`：

```
@Resource
private ManagedScheduledExecutorService scheduledExecutorService; 
```

安排一些`@PostConstruct`要执行的任务，即每秒以**固定延迟**执行：

```
scheduledExecutorService.scheduleWithFixedDelay(this::someMethod, 1, 1, TimeUnit.SECONDS); 
```

[scheduleWithFixedDelay](https://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ScheduledExecutorService.html#scheduleWithFixedDelay(java.lang.Runnable,%20long,%20long,%20java.util.concurrent.TimeUnit))：

> 创建并执行一个周期性操作，该操作首先在给定的初始延迟之后启用，随后在一个执行终止和下一个执行开始之间具有给定的延迟。[...]

不要在 ie 中关闭调度程序`@PreDestroy`：

> Managed Scheduled Executor Service 实例由应用服务器管理，因此 Java EE 应用程序被禁止调用任何与生命周期相关的方法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-03-12T17:00:36.403

好吧，我有一个类似的问题。有一个作业应该每 30 分钟运行一次，有时该作业需要 30 多分钟才能完成，在这种情况下，另一个作业实例正在启动，而前一个作业尚未完成。我通过使用一个静态布尔变量来解决它，我的工作将在它开始运行时将其设置为 true，然后在完成时将其设置回 false。由于它是一个静态变量，所有实例将始终看到相同的副本。当您设置和取消设置静态变量时，您甚至可以同步块。类 myjob{ 私有静态布尔 isRunning=false;

```
public executeJob(){
if (isRunning)
    return;
isRunning=true;
//execute job
isRunning=false;
  }

} 
```

# javascript - Phonegap - 带有标头 401 错误的黑莓文件传输

> ID：14402070
> 
> 赞同：0
> 
> 时间：2013-01-18T15:27:01.863
> 
> 标签：javascript, cordova, jquery-mobile, blackberry, file-transfer

这应该是一个简单的解决方案，但它让我发疯。

我正在使用 FileTransfer 插件将用相机拍摄的照片上传到服务器，与文档非常相似。我正在使用基本的 HTTP 身份验证，它在 Android 和 iOS 上完美运行，但在黑莓上，它返回 401 - Unauthorized 错误。您是否需要做一些特别的事情才能让文件上传在 BB 上工作？

我将白名单设置为 *，所以这不应该是问题，而且它可以在所有其他设备上运行......

```
module.uploadPhoto = function(imageURI, obj) {
    $.mobile.loading( 'show', {
        text:'Sending File...', 
        textVisible:true
    });  

    var uploadURL = CONTEXT+'api/'+obj.id+"/files";

    var options = new FileUploadOptions();
    options.fileKey="files[]";
    options.fileName = 'image_' + imageURI.substr(imageURI.lastIndexOf('/')+1);
    options.mimeType="image/jpeg";
    options.chunkedMode = false;

    var params = new Object();
    params.thread = 'object-' + obj.id;
    options.params = params;

    options.headers = {
        Authorization: 'Basic ' + loginCreds
    };

    var ft = new FileTransfer();

    ft.upload(imageURI, uploadURL, 
        function(r){
            custAlert('Finished upload!', 'Photo upload successful.');
            $.mobile.loading( 'hide' );  
        }, 
        function(error){
            custAlert('Error uploading image with object: ' +error.http_status+ ' and code - ' +error.code, 'Error Uploading'); 
            $.mobile.loading( 'hide' );  
        }, 
        options, true);

} 
```

有谁知道这里发生了什么？我有点疯了......谢谢。

# image-processing - OpenCV2.4.3 findContours function return contours are not closed

> ID：14402073
> 
> 赞同：1
> 
> 时间：2013-01-18T15:27:12.210
> 
> 标签：image-processing, opencv

I am using OpenCV2.4.3 findContours function. But some output contours are not closed.

```
 cv::cvtColor(m_Image, src, COLOR_BGR2GRAY);
   blur(src,srcFiltered, cv::Size(3,3));
   cv::Canny(srcFiltered, edge, 20, 10, 3);
   vector<vector<cv::Point>> vecContours;
   vector<Vec4i> vecHierarchy;
   findContours(edge, vecContours, vecHierarchy, CV_RETR_CCOMP ,CV_CHAIN_APPROX_NONE);
   typedef cv::Vec<uchar,3> U8C3Elem;
   Mat contours = Mat::ones(src.rows, src.cols, CV_8UC1)*255;
   for(size_t i=0; i<vecContours.size(); ++i)
   {
      vector<cv::Point>& vec = vecContours.at(i);

      // draw contours
      U8C3Elem clr = U8C3Elem(rand()%255, rand()%255, rand()%255);
      for(int j=0; j<vec.size(); ++j)
      {
         m_Image.at<U8C3Elem>(vec.at(j)) = clr;
      }
   } 
```

I am referred to some image processing books, the contour is defined as closed curve. In the image below, lines with different color stand for different contours find by findContours function. So, who has idea? Thanks!

This is the image with contours [http://images.cnitblog.com/blog/374163/201301/18232515-fee482f8a641429f8c8b08081545a2c5.png](http://images.cnitblog.com/blog/374163/201301/18232515-fee482f8a641429f8c8b08081545a2c5.png)

# perl - 在 @INC 中找不到 new.pm

> ID：14402074
> 
> 赞同：0
> 
> 时间：2013-01-18T15:27:13.450
> 
> 标签：perl

我试图在我的另一个 shell 脚本中运行一个 perl 脚本，但我遇到了以下问题：

> 无法在 @INC 中找到 new.pm（@INC 包含：/usr/local/lib/perl/5.10.1 /usr/local/share/perl/5.10.1 /usr/lib/perl5 /usr/share/ perl5 /usr/lib/perl/5.10 /usr/share/perl/5.10 /usr/local/lib/site_perl

我已经专门设置了附加本地 perl 脚本的路径，即我的 Perl 脚本（test.pl）中的“new.pm”，但错误仍然出现。(perl -V) 显示我本地 Perl 的路径。我还使用命令“PERL5LIB”在我的配置文件中进一步设置了“new.pm”的路径。

但是，当我在命令行上运行脚本时：

```
./test.pl 
```

它确实像一个魅力。

PS。she-bang线设置正确。PSS。平台：linux，OS_vers=2.6.32-5-amd64

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T15:30:05.680

有多种方法可以做到这一点，但我不认为设置路径是其中之一。如果`/my/lib`目录中有“new.pm”，请尝试以下任何一种：

```
perl -I/my/lib script-that-calls-new.pl 
```

或者

```
use lib '/my/lib'; ## add this before "use new;" 
```

或者

```
BEGIN { push @INC, '/my/lib'; }; ## same as "use lib" example 
```

或者

```
export PERL5LIB=/my/lib:$PERL5LIB 
```

路径告诉你的 shell 在哪里寻找可执行文件。上面的例子都告诉 perl 在哪里可以找到库。

# c# - 如何找到解决方案中最长的方法/类？

> ID：14402087
> 
> 赞同：6
> 
> 时间：2013-01-18T15:27:29.283
> 
> 标签：c#, .net, visual-studio, code-analysis

对于代码分析目标，我想知道一些关于我的项目的有趣统计数据。即类的数量、方法、最长的类、最长的方法等。是否有任何好的工具可以用于此或 Visual Studio 的扩展？

我查看了 codecity，但它只能分析我没有的 MSE 文件，并且具有我在过去 5 年见过的最糟糕的界面，但功能几乎是我需要的。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-18T15:32:48.497

Visual Studio 在*Analyze* => *Calculate Code Metrics*中有这样的功能。除其他外，它显示了每个命名空间的 LoC，可以分解为方法级别。它没有制作任何花哨的图表，但对于纯粹的兴趣来说就足够了。

![在此处输入图像描述](../Images/fe8bb6194eb39486a2a3d1ff9ad69253.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-18T15:32:48.447

“按重量测量代码”通常是个坏主意。[我使用NDepend](http://www.ndepend.com/)等工具获得了有意义的代码指标。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-19T07:40:14.130

为了提供有关P.Brian.Mackey 提到的工具[NDepend](http://www.NDepend.com)的更多信息，该工具确实提供了您正在寻找的[权重代码指标。](http://www.ndepend.com/Metrics.aspx)*（免责声明：我是一名开发此工具的开发人员）*。

使用 NDepend，您可以使用 C# LINQ 查询、代码指标进行查询，并查看匹配的代码元素。所有这些都集成在 Visual Studio 中。

![使用 NDepend 的大类](../Images/e2713e9849d9d601d94f575e2e90192d.png)

该工具还带有一个[代码度量视图](http://www.ndepend.com/Doc_Treemap.aspx)，实际上是一个[树形图视图](http://en.wikipedia.org/wiki/Treemapping)。树形图上的矩形代表代码元素（这里是*方法*），矩形的面积与选择的代码度量成比例（这里是*# 每个方法的代码行数*）。与 C# LINQ 查询匹配的代码元素在树形图中以蓝色显示。

![树形图度量视图](../Images/368d7a9f40869f75f79a05a444afe6bf.png)

# json - Json .net settings equivalent to JavaScriptSerializer default for dates

> ID：14402089
> 
> 赞同：0
> 
> 时间：2013-01-18T15:27:37.670
> 
> 标签：json, serialization, date-format, json.net

I am using the JQuery Ganntt plugin and it needs dates formatted in the Unix epoch format. Using Newtonsoft's Json.Net with these settings

```
JsonSerializerSettings microsoftDateFormatSettings = new JsonSerializerSettings
{
    DateFormatHandling = DateFormatHandling.MicrosoftDateFormat
};

return JsonConvert.SerializeObject(headers, microsoftDateFormatSettings); 
```

I get json that looks like the following

[{"desc":"STAT","name":"Status","values":[{"to":"/Date(1357483427000-0500)/","from":"/Date(1354891427000-0500)/","desc":"","label":"Implement","customClass":"ganttBlue","dataObj":{"id":35,"projectId":18705,"updatedById":437996,"updatedByName":"Linda","updated":"/Date(1354891427000-0500)/","statusId":160,"statusDescription":"","status":"Implement"}}]},{"desc":"ASGNTO","name":"Assigned To","values":[{"to":"/Date(1357762454000-0500)/","from":"/Date(1355170454000-0500)/","desc":"Suzy","label":"Suzy","customClass":"ganttRed","dataObj":{"id":55,"projectId":18705,"updatedById":719816,"updatedByName":"Joe","updated":"/Date(1355170454000-0500)/","assignedToId":561260,"assignedToName":"Suzy"}}]}]

The gantt plugin does not like the date with the -500\. It wants this, which is generated from using the JavaScriptSerializer

"[{\"desc\":\"STAT\",\"name\":\"Status\",\"values\":[{\"to\":\"\/Date(1357483427000)\/\",\"from\":\"\/Date(1354891427000)\/\",\"description\":\"\",\"label\":\"Implement\",\"customClass\":\"ganttBlue\",\"dataObj\":{\"Id\":35,\"ProjectId\":18705,\"UpdatedById\":437996,\"UpdatedByName\":\"Linda\",\"Updated\":\"\/Date(1354891427000)\/\",\"StatusId\":160,\"StatusDescription\":\"\",\"Status\":\"Implement\"}}]},{\"desc\":\"ASGNTO\",\"name\":\"Assigned To\",\"values\":[{\"to\":\"\/Date(1357762454000)\/\",\"from\":\"\/Date(1355170454000)\/\",\"description\":\"Suzy\",\"label\":\"Suzy\",\"customClass\":\"ganttRed\",\"dataObj\":{\"Id\":55,\"ProjectId\":18705,\"UpdatedById\":719816,\"UpdatedByName\":\"Joe\",\"Updated\":\"\/Date(1355170454000)\/\",\"AssignedToId\":561260,\"AssignedToName\":\"Suzy\"}}]}]"

What would be the proper setting for the Json.Net converter? I want to use Json.net when we move to .net 4.5.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-26T18:30:57.913

要使其显示类似于 生成的日期`JavaScriptSerializer`，您必须提供两个设置：

```
JsonSerializerSettings serializerSettings = new JsonSerializerSettings()
{
    DateFormatHandling = DateFormatHandling.MicrosoftDateFormat,
    DateTimeZoneHandling = DateTimeZoneHandling.Utc
}; 
```

使用任何其他类型的`DateTimeZoneHandling`将导致放入时区偏移量。（似乎`Unspecified`仍然放入偏移量的错误。）

但是，如果您在整个系统中使用本地时间，那么在序列化日期时，这样做会根据您的时区偏移量来移动日期。你的约会将被取消。

对我来说最简单的解决方法是使用默认的 ISO 日期，设置`DateTimeZoneHandling`为`Local`，然后更改客户端以解析 ISO 日期。否则，您需要在序列化之前调整日期或使用您自己的自定义序列化程序。最后两个对我来说似乎都不值得。

# java - JList水平自动向右滚动

> ID：14402091
> 
> 赞同：0
> 
> 时间：2013-01-18T15:27:47.437
> 
> 标签：java, swing, scrollbar, jlist

我有一个包含用阿拉伯语编写的项目的 jlist，不幸的是，如果任何项目很长，加载后所有项目都会消失，因为滚动条不会自动向右滚动，我应该手动将列表水平向右滚动。

我已将 JList 的 componentOrientation 设置为正确。

任何的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T15:37:52.773

假设 JList 在一个 JScrollPane 中，可以设置水平滚动条的值：

```
final int maximum = scrollPane.getHorizontalScrollBar().getMaximum();
scrollPane.getHorizontalScrollBar().setValue(maximum); 
```

就像这里的例子一样：

```
final JFrame frame = new JFrame("JList horizontal auto-scroll to right");
frame.setBounds(100, 100, 80, 600);
frame.setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE);
final String[] model = {"aaa", "bbbb", "ccccccccccccccccccccccccc"};
final JList<String> jList = new JList<String>(model);
jList.setComponentOrientation(ComponentOrientation.RIGHT_TO_LEFT);
final JScrollPane scrollPane = new JScrollPane(jList);
frame.getContentPane().add(scrollPane);
final int maximum = scrollPane.getHorizontalScrollBar().getMaximum();
scrollPane.getHorizontalScrollBar().setValue(maximum);
frame.setVisible(true); 
```

对我来说，窗口如下所示：

[截图框](http://imgur.com/hdfsE)

# mysql - MOODLE MySQL 在语句的 SELECT 部分使用“和”

> ID：14402092
> 
> 赞同：0
> 
> 时间：2013-01-18T15:27:48.857
> 
> 标签：mysql, moodle

在 MOODLE 中，我使用以下脚本来提取一些数字——结果很好：

```
SELECT
qc.name,
q.category,
SUM(IF(qs.grade = "1",1,0)) AS Correct,
SUM(IF(qs.grade = "0",1,0)) AS Wrong

FROM
mdl_question_states qs,
mdl_quiz_attempts qa,
mdl_quiz qz,
mdl_course c,
mdl_question q,
mdl_question_categories qc

WHERE
qa.id = qs.attempt
AND qs.event = 6
AND qa.quiz = qz.id
AND ((qz.name = 'Pre-Test') OR (qz.name = 'Post-Test'))
AND qz.course = c.id
AND q.id = qs.question
AND q.category = qc.id
AND q.category > 601

GROUP BY q.category

ORDER BY qc.name 
```

我的问题是：我想要一个列（在“SUM（IF...”列之后）是“正确的 -AND- Pre-Test”，然后是“Correct -AND- Post-Test”。

用于完成此操作的语法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T16:16:27.300

尝试

```
SUM(IF(sq.grade = '1' AND qz.name='pre-test', 1, 0)) AS cor_and_pre 
```

对于其他值也是如此。

# c++ - 在成员函数中调用类构造函数

> ID：14402097
> 
> 赞同：7
> 
> 时间：2013-01-18T15:28:09.783
> 
> 标签：c++, function, constructor

这是一个程序，我试图`multi::multi(int, int)`在函数中调用类构造函数`void multi::multiply()`。输出是

> 30
> 
> 30

而不是预期

> 30
> 
> 25

***为什么？***

```
#include <iostream.h>

class multi{
    private:
        int a;
        int b;
    public:
        multi(int m, int n){
            a = m;
            b = n;
        }

        void multiply(){
            cout << "\n\n" << a*b;
            multi (5, 5);
            cout << "\n" << a*b;
        }
};

main(){
    multi x(5,6);

    x.multiply();
return 0;
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-18T15:29:37.557

```
multi (5, 5); 
```

它创建一个临时对象，并在完整表达式结束时被销毁。它不做乘法或打印。

要查看所需的输出，您可以`reset()`向您的类添加一个成员函数：

```
class multi{
    private:
        int a;
        int b;
    public:

        multi(int m, int n) : a(m), b(n) {}   //rewrote it

        void reset(int m, int n) { a = m; b = n; }  //added by me

        void multiply(){
            cout << "\n\n" << a*b;
            reset(5, 5);  //<-------------- note this
            cout << "\n" << a*b;
        }
}; 
```

顺便说一句，在定义构造函数时更喜欢使用[成员初始化列表。](https://stackoverflow.com/questions/926752/why-should-i-prefer-to-use-member-initialization-list)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T15:29:55.697

当您调用构造函数时`multi(5, 5)`，您实际上是在创建一个立即销毁的临时对象。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-18T15:30:10.937

这不起作用，因为`multi(5, 5);`创建了一个 class 的临时对象`multi`，该对象立即被销毁，因为它不用于任何事情

由于`multiply()`是 class 的成员函数`multi`，它可以访问私有成员，所以它可以直接`a`设置`b`。您可以通过如下重写来获得预期的输出`multiply`：

```
 void multiply()
    {
        cout << "\n\n" << a*b;
        b = 5;
        cout << "\n" << a*b;
    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-18T15:30:34.157

你不能像这样调用构造函数。您的代码所做的是创建一个新的临时实例`multi`，该实例会立即被丢弃。

一旦构造了一个对象，就不能再次调用它的构造函数。在你的类中创建一个`assign()`函数或类似的东西。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-18T15:46:38.270

您不能调用已创建对象的构造函数。您在代码中所做的是创建一个临时对象。如果您尝试执行此操作->multi(5,5)，编译器将报告错误。

# css - 标题菜单必须靠近徽标！（右侧部分）

> ID：14402098
> 
> 赞同：-1
> 
> 时间：2013-01-18T15:28:19.847
> 
> 标签：css, html, drop-down-menu

我找到了一个不错的菜单工具栏，但我希望它在右侧的网站上，如示例 2

工具栏的链接是这个[http://cssmenumaker.com/menu/red-opera-drop-down-menu](http://cssmenumaker.com/menu/red-opera-drop-down-menu)

另一个工具栏示例菜单是这个网站[http://www.fluidbyte.net/workshop/responsive_nav/index.html](http://www.fluidbyte.net/workshop/responsive_nav/index.html)

那么我应该在 CSS 文件中进行哪些更改以使其位于我网站的右上角？css文件的代码在这里：

```
#cssmenu ul,
#cssmenu li,
#cssmenu span,
#cssmenu a {
  margin: 0;
  padding: 0;
  position: relative;
}
#cssmenu {
  height: 49px;
  border-radius: 5px 5px 0 0;
  -moz-border-radius: 5px 5px 0 0;
  -webkit-border-radius: 5px 5px 0 0;
  background: #141414;
  background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAAxCAIAAACUDVRzAAAAA3NCSVQICAjb4U/gAAAALElEQVQImWMwMrJi+v//PxMDw3+m//8ZoPR/qBgDEhuXGLoeYswhXg8R5gAAdVpfoJ3dB5oAAAAASUVORK5CYII=) 100% 100%; 
  background: -moz-linear-gradient(top, #32323a 0%, #141414 100%);
  background: -webkit-gradient(linear, left top, left bottom, color-stop(0%, #32323a), color-stop(100%, #141414));
  background: -webkit-linear-gradient(top, #32323a 0%, #141414 100%);
  background: -o-linear-gradient(top, #32323a 0%, #141414 100%);
  background: -ms-linear-gradient(top, #32323a 0%, #141414 100%);
  background: linear-gradient(to bottom, #32323a 0%, #141414 100%);
  border-bottom: 2px solid #e00f16;
}
#cssmenu:after,
#cssmenu ul:after {
  content: '';
  display: block;
  clear: both;
}
#cssmenu a {
  background: #141414;
  background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAAxCAIAAACUDVRzAAAAA3NCSVQICAjb4U/gAAAALElEQVQImWMwMrJi+v//PxMDw3+m//8ZoPR/qBgDEhuXGLoeYswhXg8R5gAAdVpfoJ3dB5oAAAAASUVORK5CYII=) 100% 100%; 
  background: -moz-linear-gradient(top, #32323a 0%, #141414 100%);
  background: -webkit-gradient(linear, left top, left bottom, color-stop(0%, #32323a), color-stop(100%, #141414));
  background: -webkit-linear-gradient(top, #32323a 0%, #141414 100%);
  background: -o-linear-gradient(top, #32323a 0%, #141414 100%);
  background: -ms-linear-gradient(top, #32323a 0%, #141414 100%);
  background: linear-gradient(to bottom, #32323a 0%, #141414 100%);
  color: #ffffff;
  display: inline-block;
  font-family: Helvetica, Arial, Verdana, sans-serif;
  font-size: 12px;
  line-height: 49px;
  padding: 0 20px;
  text-decoration: none;
}
#cssmenu ul {
  list-style: none;
}
#cssmenu > ul {
  float: left;
}
#cssmenu > ul > li {
  float: left;
}
#cssmenu > ul > li:hover:after {
  content: '';
  display: block;
  width: 0;
  height: 0;
  position: absolute;
  left: 50%;
  bottom: 0;
  border-left: 10px solid transparent;
  border-right: 10px solid transparent;
  border-bottom: 10px solid #e00f16;
  margin-left: -10px;
}
#cssmenu > ul > li:first-child > a {
  border-radius: 5px 0 0 0;
  -moz-border-radius: 5px 0 0 0;
  -webkit-border-radius: 5px 0 0 0;
}
#cssmenu > ul > li:last-child > a {
  border-radius: 0 5px 0 0;
  -moz-border-radius: 0 5px 0 0;
  -webkit-border-radius: 0 5px 0 0;
}
#cssmenu > ul > li.active > a {
  box-shadow: inset 0 0 3px #000000;
  -moz-box-shadow: inset 0 0 3px #000000;
  -webkit-box-shadow: inset 0 0 3px #000000;
  background: #070707;
  background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAAxCAIAAACUDVRzAAAAA3NCSVQICAjb4U/gAAAALklEQVQImWNQU9Nh+v//PxMDw3+m//8ZkNj/mRgYIHxy5f//Z0BSi18e2TwS5QG4MGB54HL+mAAAAABJRU5ErkJggg==) 100% 100%; 
  background: -moz-linear-gradient(top, #26262c 0%, #070707 100%);
  background: -webkit-gradient(linear, left top, left bottom, color-stop(0%, #26262c), color-stop(100%, #070707));
  background: -webkit-linear-gradient(top, #26262c 0%, #070707 100%);
  background: -o-linear-gradient(top, #26262c 0%, #070707 100%);
  background: -ms-linear-gradient(top, #26262c 0%, #070707 100%);
  background: linear-gradient(to bottom, #26262c 0%, #070707 100%);
}
#cssmenu > ul > li:hover > a {
  background: #070707;
  background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAAxCAIAAACUDVRzAAAAA3NCSVQICAjb4U/gAAAALklEQVQImWNQU9Nh+v//PxMDw3+m//8ZkNj/mRgYIHxy5f//Z0BSi18e2TwS5QG4MGB54HL+mAAAAABJRU5ErkJggg==) 100% 100%; 
  background: -moz-linear-gradient(top, #26262c 0%, #070707 100%);
  background: -webkit-gradient(linear, left top, left bottom, color-stop(0%, #26262c), color-stop(100%, #070707));
  background: -webkit-linear-gradient(top, #26262c 0%, #070707 100%);
  background: -o-linear-gradient(top, #26262c 0%, #070707 100%);
  background: -ms-linear-gradient(top, #26262c 0%, #070707 100%);
  background: linear-gradient(to bottom, #26262c 0%, #070707 100%);
  box-shadow: inset 0 0 3px #000000;
  -moz-box-shadow: inset 0 0 3px #000000;
  -webkit-box-shadow: inset 0 0 3px #000000;
}
#cssmenu .has-sub {
  z-index: 1;
}
#cssmenu .has-sub:hover > ul {
  display: block;
}
#cssmenu .has-sub ul {
  display: none;
  position: absolute;
  width: 200px;
  top: 100%;
  left: 0;
}
#cssmenu .has-sub ul li {
  *margin-bottom: -1px;
}
#cssmenu .has-sub ul li a {
  background: #e00f16;
  border-bottom: 1px dotted #ec6f73;
  filter: none;
  font-size: 11px;
  display: block;
  line-height: 120%;
  padding: 10px;
}
#cssmenu .has-sub ul li:hover a {
  background: #b00c11;
}
#cssmenu .has-sub .has-sub:hover > ul {
  display: block;
}
#cssmenu .has-sub .has-sub ul {
  display: none;
  position: absolute;
  left: 100%;
  top: 0;
}
#cssmenu .has-sub .has-sub ul li a {
  background: #b00c11;
  border-bottom: 1px dotted #d06d70;
}
#cssmenu .has-sub .has-sub ul li a:hover {
  background: #80090d;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T15:31:26.690

没有 HTML 很难判断你的 CSS 引用了什么，但你可以尝试应用

```
float: right; 
```

到#cssmenu。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T15:41:24.537

获取一些 Web 开发工具。如果您启动 Firefox 并按 F12，您可以清楚地看到代码。

```
nav {
  display: block;
  float: right;
  margin: -15px -12px 0 0;
} 
```

这是做它的`float:right;`部分。

# sql - Microsoft SQL - Remove duplicate data from query results

> ID：14402109
> 
> 赞同：0
> 
> 时间：2013-01-18T15:29:05.420
> 
> 标签：sql, tsql

I am new to SQL Server and need help with one of my SQL query.

I have 2 tables (`Rating` and `LikeDislike`).

I am trying to get data from both of these tables using a `LEFT JOIN` like this:

```
SELECT distinct LD.TopicID, R.ID, R.Topic, R.CountLikes, R.CountDisLikes, LD.UserName, LD.Clikes

FROM Rating As R

LEFT JOIN LikeDislike AS LD on LD.TopicID = R.ID 
```

The above `SELECT` statement displays results fine but also includes duplicates. I want to remove duplicates when the data is displayed, I tried using `DISTINCT` and `GROUP BY`, but with no luck, maybe because I am not using it correctly.

To be more clear and less confusing let me tell you what exactly each table does and what I am trying to achieve.

The `Rating` table has following columns (`ID, Topic, CountLikes, CountDisLikes, Extra, CreatedByUser`). It stores topic information and number of likes and dislikes for each topics and the `UserID` of the user who created that topic.

Rating table with sample data

```
ID  Topic               CountLikes  CountDisLikes  Extra        CreatedByUser
1   Do You Like This       211          58          YesId                2
2   Or This                17           25          This also            3
79  Testing at home        1             0          Testing at home      2
80  Testing at home again  1             0          Testing              2
82  testing dislikes       0             1          Testing              2
76  Testing part 3         7             5          Testing 3            4
77  Testing part 4         16            6          Testing 4            5 
```

The `LikeDisLike` table has following columns (`ID, TopicID, UserName, Clikes`). `TopicID` is a FK to the `ID` column in `Rating` table.

LikeDislike table with sample data

```
ID  TopicID UserName    Clikes
213     77      2       TRUE
214     76      2       FALSE
215     77      5       TRUE
194     77      3       TRUE
195     76      3       FALSE
196     2       3       TRUE
197     1       3       FALSE 
```

Now what I am trying to do is get information from both of this table without duplicate rows. I need to get data all the columns from `Rating` table + `UserName` and `Clikes` columns from `LikeDislike` table without any duplicate rows

Below are the results with duplicates

```
TopicID ID  Topic            CountLikes   CountDislikes UserName    Clikes
NULL    79  Testing at home    1           0             NULL       NULL
NULL    80  Testing at home2   1           0             NULL       NULL 
NULL    82  testing dislikes   0           1             NULL       NULL
1       1   Do You Like This   211         58            3          FALSE
2       2   Or This            17          25            3          TRUE
76      76  Testing part 3     7           5             2          FALSE
76      76  Testing part 3     7           5             3          FALSE
77      77  Testing part 4     16          6             2          TRUE
77      77  Testing part 4     16          6             3          TRUE
77      77  Testing part 4     16          6             5          TRUE 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T15:58:28.063

就像昨天的[帖子](https://stackoverflow.com/questions/14391767/remove-duplicate-data-in-result-from-two-tables)一样，我认为您不了解 DISTINCT 应​​该返回您的内容。因为您的 LikeDislike 表中有不同的值，所以您将返回 DISTINCT 行。

我们以 TopicId 77 为例。它返回 3 DISTINCT 行，因为您的 LikeDislike 表中有 3 条匹配记录。如果您想要的输出是 UserName 和 Clikes 以逗号分隔的单行，那是可能的——考虑使用`for xml`，也许`stuff`（[这里](https://stackoverflow.com/a/14384130/1073631)是关于该主题的最新答案）。或者，如果您想返回与 TopicId 匹配的第一行，那么这也是可能的——考虑使用带有`row_number`.

请让我们知道您想要的输出，我们可以帮助提供解决方案。

祝你好运。

# apache - Apache Commons VFS User's Home Directory

> ID：14402111
> 
> 赞同：1
> 
> 时间：2013-01-18T15:29:10.737
> 
> 标签：apache

I'm trying to create an sftp client using Apache Commons VFS. I would like to connect to a user's home directory first and allow the user to navigate all the directories on the server. If I set UserDirIsRoot to true:

```
SftpFileSystemConfigBuilder.getInstance().setUserDirIsRoot(opts, true); 
```

It will connect to current user's home directory but it does not allow the user to navigate to any parent directories since the home dir is already the root.

If I set UserDirIsRoot to false, I will have to provide a starting directory path. I am trying to avoid requiring user to provide an initial directory path.

Is there a way to find out a user's home directory path (absolute path on the server)?

Thank you!

# python - Namespace packages with a core part?

> ID：14402112
> 
> 赞同：10
> 
> 时间：2013-01-18T15:29:13.277
> 
> 标签：python, setuptools, namespace-package

This question follows up [The way to make namespace packages in Python](https://stackoverflow.com/questions/8380381/the-way-to-make-namespace-packages-in-python) and [How do I create a namespace package in Python?](https://stackoverflow.com/questions/1675734/how-do-i-create-a-namespace-package-in-python).

Note [PEP 420](http://www.python.org/dev/peps/pep-0420/), and the [distribute docs](http://packages.python.org/distribute/setuptools.html#namespace-packages), which state:

> You must NOT include any other code and data in a namespace package’s `__init__.py`. Even though it may appear to work during development, or when projects are installed as `.egg` files, it will not work when the projects are installed using “system” packaging tools – in such cases the `__init__.py` files will not be installed, let alone executed.

* * *

This all seems to make it impossible to have a "main library" package with independently distributed extension sub-packages. What I want is to be able to:

1.  define a core library package, to be used like this:

    ```
    import mylibrary

    mylibrary.some_function() 
    ```

2.  allow library extensions, packaged and distributed separately, to be used like this:

    ```
    import mylibrary.myextension

    mylibrary.myextension.some_other_function() 
    ```

I would've expected to be able to do this with namespace packages, but it seems not to be the case, based on the questions and links above. Can this be done at all?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T15:37:54.303

`__init__.py`在PEP 420 命名空间包的顶层中确实不可能有代码。

如果我是你，我会：

1.  创建 2 个包，一个名为 mylibrary （一个普通包），其中包含您的实际库代码，另一个名为 mylibrary_plugins ，它是一个命名空间包。
2.  或者，创建 mylibrary.lib，它是一个普通包并包含您的代码，以及 mylibrary.plugins，它是一个命名空间包。

我个人会使用选项1。

PEP 420 的基本原理部分解释了为什么`__init__.py`不能包含任何代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-01T11:01:05.463

严格来说，你可以在 下*有*变量`mylibrary`，你只是不能在那里定义它们。例如，您可以：

```
# mylibrary/core.py
import mylibrary
def some_function():
    pass

mylibrary.some_function = some_function 
```

您的用户可以像这样使用它：

```
import mylibrary.core
mylibrary.some_function() 
```

也就是说，`mylibrary.core`monkey 补丁`mylibrary`使得除了导入之外，它看起来好像`somefunction`是在`mylibrary`而不是子包中定义的。

# php - Insert spaces between string in array

> ID：14402115
> 
> 赞同：-3
> 
> 时间：2013-01-18T15:29:16.130
> 
> 标签：php, arrays

I have the following array:

```
array('16 HOURS','13.3 HOURS','10.6 HOURS AGO','8 HOURS AGO','5.3 HOURS AGO','2.6 HOURS AGO','CURRENT') 
```

I want to insert empty cells ('') between every string until the desired length is reached. I have tried various loops, for i etc but always end up with white spaces behind CURRENT or before 16 HOURS, thanks in advance.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T15:31:35.470

尝试这个。

```
$array = array('16 HOURS','13.3 HOURS','10.6 HOURS AGO','8 HOURS AGO','5.3 HOURS AGO','2.6 HOURS AGO','CURRENT');

$i = 1;

foreach($array as $val) {
  $tempArray[] = $val;
  if($i < count($array)) {
    $tempArray[] = '';
  }
  $i++;
}

print_r($tempArray); 
```

**结果**

```
大批
(
    [0] => 16 小时
    [1] =>
    [2] => 13.3 小时
    [3] =>
    [4] => 10.6 小时前
    [5] =>
    [6] => 8 小时前
    [7] =>
    [8] => 5.3 小时前
    [9] =>
    [10] => 2.6 小时前
    [11] =>
    [12] => 当前
)
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T15:42:39.473

```
$myArray = array(
    '16 HOURS',
    '13.3 HOURS',
    '10.6 HOURS AGO',
    '8 HOURS AGO',
    '5.3 HOURS AGO',
    '2.6 HOURS AGO',
    'CURRENT'
);

$newArray = array_combine(
        range(0,12,2),
        $myArray
    ) +
    array_fill_keys(
        range(1,12,2),
        ''
    )
;
ksort($newArray);

var_dump($newArray); 
```

# c++ - Pointers in CvSeq Finger Detection

> ID：14402119
> 
> 赞同：0
> 
> 时间：2013-01-18T15:29:22.653
> 
> 标签：c++, pointers, opencv

I am working on C++ openCv, were I want to detect the contours and defects and hull of human hand. I get something wrong when I convert from CvSeq to CvPoint, it always prints out the address's not the value of the sequence itself, and it doesn't accept *(Defects[2].x). So, I want to print the values to know if am right or wrong and how to access them later ? please, thanks in advance.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T15:42:26.983

```
int *point = &seq;
cout << *point; 
```

# linux - sed循环内的参数

> ID：14402121
> 
> 赞同：2
> 
> 时间：2013-01-18T15:29:24.937
> 
> 标签：linux, bash, loops, sed

我试图理解 sed 命令和循环。我需要获取部分文本（20 行）并将其附加到带有文件名的 csv 中。这是我的代码

```
for i in ~/mspl/*.doc
do 
    catdoc "$i" > auto.txt
    sed -e '1,20!d' auto.txt > auto1.txt
    sed -e '1s/^/"$i" ;/' auto1.txt > auto2.txt
    sed -e '20s/$/~/' auto2.txt > auto3.txt
    cat auto3.txt >> lines.csv
done 
```

问题是我的第二个“i”参数没有转换为 csv 中的文件名。

在行中

```
sed -e '1s/^/"$i" ;/' auto1.txt > auto2.txt 
```

请告诉我这里的错误是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-18T15:32:32.207

问题是变量没有在单引号内展开`'`。改用双引号`"`：

```
# this is assuming you did want to add explicit " around your $i
sed -e "1s/^/\"$i\" ;/" auto1.txt > auto2.txt 
```

如果双引号字符串需要包含显式双引号，则必须将它们转义 ( `\"`)。如果使用双引号不是一个选项（例如，如果您有一个非常复杂的命令已经有多个引用级别），您可以随时退出变量周围的引用：

```
sed -e '1s/^/"'$i'" ;/' auto1.txt > auto2.txt 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T15:32:46.623

您可能会发现使用设置运行此脚本很有用`-x`，以查看实际发生的情况。（只是做`set -x`。）

但坦率地说，发生的事情是你`$i`在单引号内，所以它不会被扩展。

# android - Ask permission to read user's email Graph API in android

> ID：14402123
> 
> 赞同：0
> 
> 时间：2013-01-18T15:29:26.633
> 
> 标签：android, email, facebook-graph-api, permissions

I want to ask permission to read users email id in Facebook using graph api.

I tried this

```
 graph.facebook.com/me?fields=email 
```

I don't know how to ask permission via Graph API to read email.

TIA

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T17:36:26.047

您需要获得`access_token`许可`email`。

你的语法也是错误的。是`fields=email`。

# android - 你如何在android的ndk中下载文件？

> ID：14402126
> 
> 赞同：3
> 
> 时间：2013-01-18T15:29:31.327
> 
> 标签：android, android-ndk, streaming, download

我正在尝试在 android 的 ndk 中从网络流式传输文件，但我似乎无法找到有关在 ndk 中下载文件的任何信息。我将如何下载文件？是否有某种可用的 API？我似乎找不到任何东西。

我遇到有人找到一种使用 curl 的方法，但我认为 api 并非在所有设备上都可用。

# python - 在Python中将类分配给没有依赖关系的变量

> ID：14402131
> 
> 赞同：0
> 
> 时间：2013-01-18T15:29:47.870
> 
> 标签：python, class, variables, copy

我在 stackoverflow 上看到了类似的问题，但没有得到令人满意的回答。（链接到这个问题 -[如何复制 python 类？](https://stackoverflow.com/questions/9541025/how-to-copy-a-python-class)）

所以我的问题是，是否有任何可能的方法来创建存储在变量 A 中的类的副本（类的实例）并将该类的副本分配给新的变量 B，而不会使这些变量 A 和 B 相互依赖？

要清楚 - 有没有一个非常简单的方法？

模型情况将是：

```
class B:
    def __init__(self, li):
        self.l = li * 5
        self.u = 5       

class A:
    def __init__(self):
        self.x = [1, 2, 3]
        self.c = B([45, 1, 3])
    self.i = 1

x = A()
y = x #This copies only reference to x 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T15:32:31.567

为您的类实现[`__copy__()`](http://docs.python.org/2/library/copy.html)，然后您可以使用它[`copy.copy()`](http://docs.python.org/2/library/copy.html#copy.copy)来创建实例的副本。由于 Python 对象的性质，这不能自动完成（无法知道将在实例上设置哪些变量，也无法知道它是如何发生变异的，这取决于您确保复制数据正确）。

通常，假设一个以正常方式运行的类，对于假定的类`__copy__()`可能是这样简单的`SomeClass`：

```
def __copy__(self):
    return SomeClass(self.somefield, self.otherfield, self.somethingelse) 
```

自然，确切的实现将根据类本身而大不相同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T15:32:21.820

如果要创建对象的单独副本，请尝试[复制模块](http://docs.python.org/2/library/copy.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T16:23:19.370

`deepcopy`在`copy`模块中使用更简单。呃，伙计们，这些微妙问题的解决方案是：http: [//docs.python.org/2/library/copy.html#copy.deepcopy](http://docs.python.org/2/library/copy.html#copy.deepcopy)

# java - Selenium 无法使用 xpath 定位元素，但 firebug 可以

> ID：14402132
> 
> 赞同：2
> 
> 时间：2013-01-18T15:29:47.900
> 
> 标签：java, xpath, selenium, selenium-webdriver

我有以下代码使用 Xpath 定位元素，使用 Firebug 效果很好。当我运行我的程序时，出现以下异常：

> 线程“main” org.openqa.selenium.NoSuchElementException 中的异常：无法找到元素：{“method”：“xpath”，“selector”：“（//div [@class = \” x-ignore x-menu x -component \"]//div)/a[text()=\"ID\"]"}

如果我采用确切的 xpath 并坚持使用 Firebug，我可以发现我的元素没有问题。任何想法为什么 Selenium 找不到它？

这是我的代码：

```
public static void displayColumn(String column) throws Exception {
    String columnOptionsDropdownXpath = "(//div[@class=\"x-grid3-header\"]//span)[1]/../a";
    String columnXpath = "(//div[@class=\"x-grid3-header\"]//span)[1]";
    String columnsXpath = "(//div[@class=\" x-ignore x-menu x-component\"]//a)[3]";
    String columnToDisplayXpath = "(//div[@class=\" x-ignore x-menu x-component \"]//div)/a[text()=\"" + column + "\"]";

    // Because the 'column options' button doesn't appear until you hover over the column
    WebElement col = null;
    try {
        col = driver.findElement(By.xpath(columnXpath));
    } catch (NoSuchElementException e) {
        System.out.println("Column not found - is it displayed?");
    }

    Actions builder = new Actions(driver);
    builder.moveToElement(col).build().perform();
    WebElement element = driver.findElement(By.xpath(columnOptionsDropdownXpath));
    element.click();
    Thread.sleep(500);

    element = driver.findElement(By.xpath(columnsXpath));
    builder.moveToElement(element).build().perform();
    Thread.sleep(2000);
    WebDriverWait wait = new WebDriverWait(driver, 10);
    try {
        System.out.println("in try statement");
        wait.until(ExpectedConditions.visibilityOfElementLocated(By.xpath(columnToDisplayXpath)));
    } catch (TimeoutException e) {}

    element = driver.findElement(By.xpath(columnToDisplayXpath));
    element.click();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T20:38:44.363

正如评论中提到的，这两个 XPath 之间的细微差别：

```
String columnsXpath = "(//div[@class=\" x-ignore x-menu x-component\"]//a)[3]";
String columnToDisplayXpath = "(//div[@class=\" x-ignore x-menu x-component \"]//div)/a[text()=\"" + column + "\"]"; 
```

除了最后的部分之外，后者在“组件”之后有一个空格，而前者没有。

我怀疑使用 normalize-space() 并删除比较值中的前导和尾随空格可能有助于消除`@class`属性值间距的不一致：

```
String columnsXpath = "(//div[normalize-space(@class) = \"x-ignore x-menu x-component\"]//a)[3]";
String columnToDisplayXpath = 
    "(//div[normalize-space(@class) = \"x-ignore x-menu x-component\"]//div)/a[text()=\""
    + column + "\"]"; 
```

# c# - 为什么 observablecollection 初始化为 null？

> ID：14402133
> 
> 赞同：1
> 
> 时间：2013-01-18T15:29:48.380
> 
> 标签：c#

我用这个构造函数来初始化这个对象

```
 ObservableCollection<MyHomeworkModel> allTabs = new ObservableCollection<MyHomeworkModel>(); 
```

原来 allTabs 初始化后为空。因此，我无法向其中添加 MyHomeworkModel 对象。

请帮助我，并提前感谢。

```
using System.Windows.Input;
using System.Collections.ObjectModel;
using MyHomework;

namespace MyHomework__MVVM_
{
    class MyHomeworkViewModel
    {
        private ObservableCollection<MyHomeworkModel> allTabs;
        private MyHomeworkModel selectedTab;

        public MyHomeworkViewModel()
        {
            ObservableCollection<MyHomeworkModel> allTabs = new ObservableCollection<MyHomeworkModel>();
            selectedTab = new MyHomeworkModel();
            AddCourseCommand = new AddCourseCommand(this);
        }

        public ObservableCollection<MyHomeworkModel> AllTabs
        {
            get
            {
                return allTabs;
            }
            set
            {
                allTabs = value;
            }
        }

        public MyHomeworkModel SelectedTab
        {
            get
            {
                return selectedTab;
            }
            set
            {
                selectedTab = value;
            }
        }

        public ICommand AddCourseCommand
        {
            get;
            private set;
        }

        public void AddNewTab()
        {
            NewCourseName ncn = new NewCourseName();
            ncn.ShowDialog();
            if (ncn.courseName != null)
            {
                MyHomeworkModel newTab = new MyHomeworkModel();
                newTab.Header = ncn.courseName;
                AllTabs.Add(newTab);
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T15:34:14.273

这里（在构造函数中`MyHomeworkViewModel`）：

```
ObservableCollection<MyHomeworkModel> allTabs = new ObservableCollection<MyHomeworkModel>(); 
```

您创建了一个隐藏类成员的局部变量，因此在构造函数调用后它仍然为空。为了避免这种情况，只需跳过语句开头的类型：

```
allTabs = new ObservableCollection<MyHomeworkModel>(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T15:33:23.237

如果你创建

```
ObservableCollection<MyHomeworkModel> allTabs = new ObservableCollection<MyHomeworkModel>(); 
```

在您的构造函数中，它将在用完后被删除。在外面声明它，然后调用

```
allTabs = new ObservableCollection<MyHomeworkModel>(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-18T15:33:40.287

```
 public MyHomeworkViewModel()
    {
        allTabs = new ObservableCollection<MyHomeworkModel>();
        selectedTab = new MyHomeworkModel();
        AddCourseCommand = new AddCourseCommand(this);
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-18T15:33:28.190

该行`ObservableCollection<MyHomeworkModel> allTabs = new ObservableCollection<MyHomeworkModel>();`没有**将**`allTabs` *字段*设置为新集合，而是创建新的局部变量并将该局部变量设置为新集合。要初始化该字段，您应该将该行更改为：

```
allTabs = new ObservableCollection<MyHomeworkModel>(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-18T15:59:09.927

这是 C# 约定在私有类变量前加上下划线的原因之一：

`private ObservableCollection<MyHomeworkModel> _allTabs;`

更多指南：http: [//msdn.microsoft.com/en-gb/library/vstudio/ms229042%28v=vs.100%29.aspx](http://msdn.microsoft.com/en-gb/library/vstudio/ms229042%28v=vs.100%29.aspx)

# c# - 如何验证模块，只允许使用“已批准”的模块？

> ID：14402134
> 
> 赞同：0
> 
> 时间：2013-01-18T15:29:49.143
> 
> 标签：c#, wpf, prism

我有一个 WPF 应用程序，使用 Prism 允许使用模块。我在一个目录中搜索所有模块并加载该目录中的任何模块。

我想为用户提供一种添加他们创建的模块的方法，但我也只希望被批准添加到应用程序中的模块。我该怎么办？

我考虑过某种私钥/公钥身份验证，但如果有人制作了一个模块，获得批准并添加了一个密钥，那么我无法在添加密钥后阻止对该模块的修改......如果那样的话说得通。

# java - 从 ClassNotFoundException 开始的 Java 错误

> ID：14402135
> 
> 赞同：1
> 
> 时间：2013-01-18T15:29:51.880
> 
> 标签：java, hadoop

当我尝试运行 Map reduce 算法的 Netbeans 应用程序时出现以下错误：

```
Exception in thread "main" java.lang.NoClassDefFoundError: org/apache/log4j/Level
at org.apache.hadoop.mapred.JobConf.<clinit>(JobConf.java:349)
at java.lang.Class.forName0(Native Method)
at java.lang.Class.forName(Class.java:264)
at org.apache.hadoop.conf.Configuration.getClassByName(Configuration.java:1121)
at org.apache.hadoop.util.ReflectionUtils.setJobConf(ReflectionUtils.java:88)
at org.apache.hadoop.util.ReflectionUtils.setConf(ReflectionUtils.java:72)
at org.apache.hadoop.util.ReflectionUtils.newInstance(ReflectionUtils.java:125)
at org.apache.hadoop.security.Groups.<init>(Groups.java:54)
at org.apache.hadoop.security.Groups.getUserToGroupsMappingService(Groups.java:142)
at     
org.apache.hadoop.security.UserGroupInformation.initUGI(UserGroupInformation.java:243)
at 
org.apache.hadoop.security.UserGroupInformation.initialize(UserGroupInformation
.java:216)
at     
org.apache.hadoop.security.UserGroupInformation.ensureInitialized(UserGroupInformation
.java:207)
at   
org.apache.hadoop.security.UserGroupInformation.isSecurityEnabled(UserGroup
Information.java:286)
at org.apache.hadoop.security.UserGroupInformation.getLoginUser(UserGroup
Information.java:500)
at org.apache.hadoop.security.UserGroupInformation.getCurrentUser(UserGroup   
Information.java:483)
at org.apache.hadoop.mapreduce.Cluster.<init>(Cluster.java:73)
at org.apache.hadoop.mapreduce.Job.<init>(Job.java:133)
at org.apache.hadoop.mapreduce.Job.<init>(Job.java:138)
at cloudex.CloudEx.main(CloudEx.java:33)
Caused by: java.lang.ClassNotFoundException: org.apache.log4j.Level
at java.net.URLClassLoader$1.run(URLClassLoader.java:366)
at java.net.URLClassLoader$1.run(URLClassLoader.java:355)
at java.security.AccessController.doPrivileged(Native Method)
at java.net.URLClassLoader.findClass(URLClassLoader.java:354)
at java.lang.ClassLoader.loadClass(ClassLoader.java:423)
at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:308)
at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
... 19 more 
```

你能告诉我如何摆脱它吗？我不知道它产生了什么

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T15:31:58.987

您需要将 log4j jar 添加到您的类路径中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T15:36:11.317

如@smcg 所述，将 log4j 类添加到您的类路径中，或者如果您使用的是 maven，则将以下内容添加到您的项目 pom.xml 中。

```
<dependency>
    <groupId>log4j</groupId>
    <artifactId>log4j</artifactId>
    <version>1.2.17</version>
</dependency> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T15:36:56.163

[在log4j](http://logging.apache.org/log4j/1.2/download.html)下载 Apache log4j *.jar 文件。将外部 *.jar 文件导入您的项目。

# jquery-mobile - JQuery Mobile 列表元素对点击过于敏感

> ID：14402153
> 
> 赞同：0
> 
> 时间：2013-01-18T15:30:34.540
> 
> 标签：jquery-mobile, tap

我注意到，当我在 JQuery Mobile 中有很长的列表元素并尝试滚动它们时，我不小心选择了一个元素。总体而言，滚动行为往往与点击混淆。

我与原生 iOS 列表做了一些比较，区别如下：

在 JQueryMobile 中，只要您在一个元素上执行 MouseDown 和 MouseUp，它就被视为一次单击。如果您在事件之间滚动并不重要。

在 iOS 中，如果您在一个元素上执行 MouseDown 然后完全滚动，则 MouseDown 被有效地取消。这使您可以点击某些东西，向上滚动页面并释放，而不会被视为单击。

有没有人注意到这一点和/或为它开发了一个补丁？如果没有，关于修复的任何建议？

# solr - 来自 mysql 的多个字段索引的 DIH 增量导入

> ID：14402155
> 
> 赞同：0
> 
> 时间：2013-01-18T15:30:39.733
> 
> 标签：solr, dih

solr DIH delta 导入中的 pk 是什么？我正在尝试对 solr 中的多个字段进行增量索引？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T16:16:57.583

我相信它是您在 schema.xml 文件中指定为 id 字段的任何字段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T16:17:56.657

它是 Solr 字段的名称，用作该记录的唯一键。您定义源到该 Solr 列的映射，然后 - 在映射之后 - Solr 根据您指定的 pk 字段检查它的存在和值。

它与 primaryKey 不同，因为您可能正在生成 primaryKey 或者它可能不适合。但它可能是一样的。我认为最清晰的 Wiki 解释可能在[HttpDataSource 的示例中](http://wiki.apache.org/solr/DataImportHandler#HttpDataSource_Example)。

我相信，当您将内部源条目展平为一个 Solr 条目时，您也可以定义一个复合 pk。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T04:07:23.990

我认为问题出在您对子实体的增量查询中。你给了，

```
deltaQuery="select id from cc_gadget_lang where '${cc_gadget.last_modified_date}' > '${dataimporter.last_index_time}'" 
```

我认为上述查询中的 where 条件始终验证为 TRUE，并且没有特定目的。

我建议的解决方案是在数据库**的“cc_gadget_lang”表中拥有一个单独的“last_modified_date”字段，并在子实体**的增量查询中使用它。

我也相信**没有必要在您的架构文件中包含子实体的“pk”，**因为它们在增量导入期间被临时存储和使用，并且不需要永久存储在索引中。

# android - Android：布局目录中的图像ID

> ID：14402158
> 
> 赞同：-1
> 
> 时间：2013-01-18T15:30:53.053
> 
> 标签：android, database, image, android-layout, layout

我在不同城市的应用中有 100 张图片，我想将这些图片分成不同的组，比如晚上、早上、晴天、下雨等……</p>

我们知道，当我们通过调用 R.layout.image_1 从布局文件夹中调用图像时，android 会为每个图像生成整数例如：

> R.layout.image_1 (223344), R.layout.image_2 (556677), R.layout.image_3 (778899),

我可以创建一个包含晚上、早上字段的表格，我可以为每个图片分配一组图片，其整数 ID 为 (223344,556677)，我可以调用晚上或早上组，我可以显示与这些组相关的所有图像。

我的问题是：Android 是否每次都生成相同的数字。这些数字是固定的吗？当应用程序运行时。

如果它是真的，那么上面的想法对我有用。如果这个想法不正确，那么请指导我在应用程序中处理数百个 PNG 的体面方法是什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T15:36:42.640

这些数字不是固定的。如果您更改某些内容，R 将重新生成并且可以具有完全不同的数字。这就是为什么在比较 id 时，您要按名称进行比较。

例如，而不是

```
if (i == 223344) 
```

做

```
if (i == R.layout.image_1) 
```

由于`R.layout.image_1`引用整数 id，名称**不会改变**（除非您更改布局 xml 名称。

如果您想动态获取资源 id（通过表示名称的字符串），您应该看看[这个](http://developer.android.com/reference/android/content/res/Resources.html#getIdentifier%28java.lang.String,%20java.lang.String,%20java.lang.String%29)方法 - `Resources#getIdentifier()`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T16:06:37.753

首先我们一般把图片放在`drawable`文件夹里。

> Android每次都会生成相同的数字吗？

不。

> 这些数字在应用程序运行时是否固定？

是的。

事实上，一旦您的项目构建完成，相同构建的 id 将保持不变。
换句话说，对于某个生成的 APK 文件，id 不会改变。

那么如何利用这一点对资源进行分组呢？

您可以拥有一个包含 id 的静态 int 数组：

```
public static final int[] IMAGES_MORNING = {R.drawable.morning0, R.drawable.morning1, etc};
public static final int[] IMAGES_EVENING = {R.drawable.evening0, R.drawable.evening1, etc}; 
```

尽管更结构化的方法是在您的应用程序首次启动时将它们存储在数据库中。

* * *

或者您可以使用 A--C 建议的内容：例如获取早晨图像的所有 id

```
for(int i = 0; i < numberOfMorningImages ; i++){
    int id = getResources().getIdentifier("morning" + i, "drawable", getPackageName());
    // do something with the id
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T15:36:30.103

不，不能保证整数每次都相同，因此您描述的解决方案将不起作用。不幸的是，没有合适的方法在 res/drawable 文件夹中对可绘制对象进行分组。作为一种解决方法，您可以将它们存储在 assets 文件夹中，您可以在其中根据需要对它们进行分组。但是，Android 将无法以这种方式处理不同的分辨率。这个选择由你。希望这可以帮助。

# url - CakePHP Routes 和 Google Webmaster Tools 验证

> ID：14402162
> 
> 赞同：4
> 
> 时间：2013-01-18T15:31:11.180
> 
> 标签：url, cakephp, seo, google-search-console

我正在做 cakephp 项目，我的 URL 如下：

```
 http://www.example.com/ 
```

由于 CakePHP 采用类似的 url

```
http://www.exaple.com/controll/function_name 
```

我正在验证我的网站的[网站管理员工具网站验证](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=35179&topic=2370564&ctx=topic)，谷歌提供了我需要存储在根目录中的验证文件（HTML）。

问题是 CakePHP 不允许将 .HTML 放在 URL 中，那么如何验证我的站点呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-18T15:32:10.047

他们还提供了一个[可用于验证的元标记](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=35659)。改用那个。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-19T02:41:59.503

令我惊讶的是，还有另一个选项尚未提及，但您可以将想要“按原样”提供的文件放在文件`app/webroot`夹下。因此，如果您创建`app/webroot/google-site-verification-a12bc345.html`，您（更重要的是 Google）可以通过

```
http://cakeapp.com/google-site-verification-a12bc345.html 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-18T18:30:23.343

除了约翰所说的之外，如果您使用Google 网站管理员工具，还可以通过[Google Analytics进行验证。](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=185871)

但是，对于 Google Analytic 的验证，Google Analytics JavaScript 跟踪代码必须位于您页面的`<head>`（而不是`<body>`）部分。有时 GA 代码存在于其他 JS 文件或页面底部，这是有问题的。

如果您没有实施 Google Analytic（并且您不打算），最简单的解决方案就是[John 所说](https://stackoverflow.com/a/14402182/1916110)的- 使用元标记验证。

# google-apps-script - 应用程序脚本：处理确认对话框和错误？

> ID：14402170
> 
> 赞同：0
> 
> 时间：2013-01-18T15:31:30.233
> 
> 标签：google-apps-script

应用程序脚本中没有`Alert`，`Browser.msgBox` [仅适用于电子表格](http://code.google.com/p/google-apps-script-issues/issues/detail?can=2&q=1043&colspec=Stars%20Opened%20ID%20Type%20Status%20Summary%20Component%20Owner&id=1043)。

那么，人们如何处理确认对话框等呢？肯定有比弹出和删除新小部件更好的方法吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T16:53:39.910

我不知道您在要求等价物时到底在想什么`Browser.msgBox`（在我看来，这只不过是一个带有几个标签的面板......）但也许[这种解决方法](https://script.google.com/macros/s/AKfycbxFFUTFpbOeslwKnaVRxKcZYPCqYvqh7LZfwN-Om_-tne2I0TLA/exec)可以取悦您？这只是一个“真实情况”的例子，当然可以完全定制......代码在[这里](https://stackoverflow.com/questions/13692563/how-to-move-a-popup-window-from-a-client-handler)

# c# - 带有 VS 2010 的 Outlook 2013 加载项

> ID：14402173
> 
> 赞同：5
> 
> 时间：2013-01-18T15:31:40.467
> 
> 标签：c#, vsto, outlook-addin, office-pia, primary-interop-assembly

很抱歉问了这么一个愚蠢的问题，但我用谷歌搜索了大约两个小时，但找不到我的问题的答案：

如何开发 Outlook 2013 加载项？

我有一个在 C# 2010 和 Outlook 2010 中创建的加载项。现在我想以这种方式扩展它，在 Outlook 2013 中是两个资源管理器事件 InlineResponse 和 InlineResponseClose。

我搜索了 VSTO 和 PIA 的从未版本，但每个网站都告诉我这些仅适用于 VS 2012？

你们中有人能解释一下我需要什么来扩展这个加载项，或者给我一个描述这个的链接吗？对不起，如果这是一个愚蠢的问题，但在那之后我有点压力。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T10:01:04.070

该项目是一个经典的 Office add in dll，而不是 Microsoft 在此 Office 版本中引入的新“应用程序”之一。你是对的，因为我想将它保留为 dll。

现在我以这种方式解决了我的问题，我使用了一些带有接口的非托管代码等等（Oleviewer 帮了很多忙）来获取 InlineResponse 事件。

感谢您在这里的回答。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-01-18T15:57:00.693

不幸的是，你不能。Office 2013 是一个基于“应用程序”的平台，类似于“Microsoft Marketplace”，并将使用 JavaScript 作为不同办公应用程序之间的主要通信工具。因此，现在使用 VS2012 创建的用于 Office 2013 部署的基本项目堆栈是

*   App1.html – 示例网页
*   App1.xml – 清单文件
*   App1.js – 脚本文件
*   App1.css - 层叠样式表
*   Office.js – Office 类库文件

2010 将其解释为一个网站。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2014-09-25T10:51:46.927

Outlook 2010 加载项仅适用于 2010。如果你想让这个插件与 2007、2010 和 2013 等所有版本兼容。一种方法是打开插件 VS2013 并编译它。你得到的编译错误很少，因为这是用 2010 开发的。修复这些错误..就是这样:)。你会得到你想要的

# php - 运行 PHP Composer 安装程序时如何修复这些错误？

> ID：14402177
> 
> 赞同：0
> 
> 时间：2013-01-18T15:31:52.803
> 
> 标签：php, composer-php

我有一台最近升级到 PHP 5.3 的服务器。现在，当我尝试[安装 composer](http://getcomposer.org/doc/00-intro.md)时，我收到以下错误消息：

```
PHP Warning:  PHP Startup: ffmpeg: Unable to initialize module
Module compiled with module API=20060613
PHP    compiled with module API=20090626
These options need to match
in Unknown on line 0 
```

如何修复这些错误并让安装程序正常运行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T15:35:11.307

您的问题似乎是安装了无效的 PHP 模块，而不是 Composer 安装程序。

您是否尝试过运行一个简单的 PHP 脚本，例如

```
<?php phpinfo(); 
```

这行得通吗？

# sorting - 从排序中排除记录

> ID：14402179
> 
> 赞同：0
> 
> 时间：2013-01-18T15:32:00.907
> 
> 标签：sorting, cobol, jcl

排序程序是否有一个参数来排除（忽略）文件的第一行从 jcl 中排序。

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T16:54:58.440

如果您的排序级别是最新的，则可以使用 DATASORT。借自 Frank Yaeger 通过谷歌的回答。

```
//S1   EXEC  PGM=ICETOOL                           
//TOOLMSG   DD  SYSOUT=*                           
//DFSMSG    DD  SYSOUT=*                           
//IN DD *                                           
FIRST                                               
AAAA                                               
CCCC                                               
DDDD                                               
FFFF                                               
GGGG                                               
//OUT DD SYSOUT=*                                   
//TOOLIN DD *                                       
DATASORT FROM(IN) TO(OUT) FIRST USING(CTL1)         
/*                                                 
//CTL1CNTL DD *                                     
  SORT FIELDS=(1,4,CH,A)                           
/* 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T16:18:45.823

您可以尝试以下方法：

```
//SYSIN    DD *   
SORT FIELDS=...
SKIPREC=1
/* 
```

您可能必须进行排序复制，然后在随后的 JCL 步骤中进行排序。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-18T16:43:29.220

尝试使用 ICETOOL SUBSET 运算符。这是一个非常简单的例子：

```
//STEP01   EXEC PGM=ICETOOL
//TOOLMSG  DD SYSOUT=*
//DFSMSG   DD SYSOUT=*
//IN1      DD *        -- Unsorted input data...
FIRST LINE
5
6
7
1
4
/*
//TOOLIN   DD *         -- ICETOOL commands
 SUBSET FROM(IN1) TO(OUT1) REMOVE INPUT HEADER
/*
//OUT1 DD SYSOUT=*      -- Sorted output goes here 
```

完成后`OUT1`包含：

```
1
4
5
6
7 
```

这是来自 的数据`IN1`，已排序，缺少第一行输入。

可以在此处找到 DFSORT/ICETOOL 手册，[此处记录](http://publibz.boulder.ibm.com/cgi-bin/bookmgr_OS390/BOOKS/ICE1CA50/CCONTENTS)[了](http://publibz.boulder.ibm.com/cgi-bin/bookmgr_OS390/BOOKS/ICE1CA50/7.17?DT=20100630155256)ICETOOL SUBSET 运算符

**编辑**

根据您对 Gilbert 的评论，我建议使用第二个作业步骤来 IDCAMS REPRO（复制）原始输入文件中的第一条记录，然后将其连接到 ICETOOL 输出。JCL 相对简单。

# ajax - 在生产服务器上找不到 Dajaxice

> ID：14402180
> 
> 赞同：1
> 
> 时间：2013-01-18T15:32:05.173
> 
> 标签：ajax, django, ubuntu, django-staticfiles, dajaxice

我有一个 Django 1.4 项目，在 Python 2.7 上运行，我使用的是[Dajaxice](http://www.dajaxproject.com/) 0.5.4.1。我已经在我的开发机器（Windows 7）上进行了设置，一切正常。但是，当我将我的应用程序部署到生产服务器（Ubuntu 12.04）时，我收到`dajaxice.core.js`文件 404 错误，无论如何都无法解决此问题。生产服务器使用完全相同版本的所有软件。

我的项目结构如下所示：

```
/myproject
/myproject/myproject-static/ <-- all the static files are here
/myproject/myproject-static/css/
/myproject/myproject-static/img/
/myproject/myproject-static/js/
/myproject/templates/

/myproject/myproject/
/myproject/main/
/myproject/app1/
/myproject/app2/
/myproject/app3/
etc. 
```

[我在这里](http://django-dajaxice.readthedocs.org/en/latest/installation.html)遵循 Dajaxice 安装步骤，并将所有内容放在其位置（在`settings.py`˙urls.py `and`base.html` 文件中）。

我的`settings.py`文件也有这些值：

```
from unipath import Path
PROJECT_ROOT = Path(__file__).ancestor(3)

STATIC_ROOT = ''
STATIC_URL = '/myproject-static/'
STATICFILES_DIRS = (
    PROJECT_ROOT.child('myproject-static'),
)
STATICFILES_FINDERS = (
    'django.contrib.staticfiles.finders.FileSystemFinder',
    'django.contrib.staticfiles.finders.AppDirectoriesFinder',
    'dajaxice.finders.DajaxiceFinder',
)

DAJAXICE_MEDIA_PREFIX = "dajaxice"
DAJAXICE_DEBUG = True 
```

我的文件中有一个`Alias`指令，`django.conf`如下所示：

```
Alias /myproject-static/ "/path/to/myproject/myproject-static/" 
```

我`collectstatic`在我的生产服务器上做了，所有静态文件都收集在我项目根目录的几个文件夹中。所以，现在当我查看我部署的网站时，我可以看到 CSS 已正确应用，JavaScript 工作正常，并且网站周围的导航按预期工作。一切都很好，除了 Ajax 完全被破坏了，因为`dajaxice.core.js`它从未被包含在内。

收集静态后我的项目文件夹结构如下：

```
/myproject
/myproject/myproject-static/ <-- all the static files are originally here
/myproject/myproject-static/css/
/myproject/myproject-static/img/
/myproject/myproject-static/js/
/myproject/templates/

/myproject/admin/ <-- folder created with 'collectstatic' command
/myproject/css/ <-- folder created with 'collectstatic' command
/myproject/dajaxice/ <-- dajaxice.core.js is located here
/myproject/django_extensions/ <-- folder created with 'collectstatic' command
/myproject/img/ <-- folder created with 'collectstatic' command
/myproject/js/ <-- folder created with 'collectstatic' command

/myproject/myproject/
/myproject/main/
/myproject/app1/
/myproject/app2/
/myproject/app3/
etc. 
```

我在这里的静态文件做错了什么吗？
我还应该尝试什么来解决这个简单的错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-22T16:12:48.180

我花了几个小时来解决这个问题。这很疯狂，因为在我的开发环境中一切正常，但在测试服务器上却没有，即使所有 dajax 和 dajaxice 设置都在一个通用的基本设置文件上。我从来没有使用标准路线让它工作。但这是一个非常简单的解决方法：

1) 将 dajaxice.core.js 下载到任何你喜欢的静态目录中。您可以在项目根目录的 dajaxice 目录中找到 js：

项目/dajaxice/dajaxice.core.js

就我而言，我将文件放在我所有其他 js 库旁边的 static/js 中。

2）在您的网页上，替换此：

```
{% dajaxice_js_import %} 
```

与 js 库的正常日常链接。就我而言：

```
<script src="/static/js/dajaxice.core.js" type="text/javascript"></script> 
```

不幸的是，这个补丁只适用于已开发的代码。如果您在开发环境中使用它，新的 dajaxice 代码将注册在原始项目/dajaxice/ 位置，因此在开发任何新代码后必须将文件复制到静态。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T23:08:28.170

您是否检查过其余资产`dajaxice.core.js`是否在您的`static/dajaxice`文件夹中？如果不是，该问题可能与未配置的有关`STATICFILES_FINDERS`，请再次检查[安装 dajaxice](http://django-dajaxice.readthedocs.org/en/latest/installation.html#installing-dajaxice)

collectstatic 和 dajaxice 的另一个常见问题是运行第一个使用`--link`Are you using this option?

希望这可以帮助

# jquery - facebook 风格的弹出窗口如何工作？

> ID：14402183
> 
> 赞同：1
> 
> 时间：2013-01-18T15:32:16.857
> 
> 标签：jquery, ajax

我想将弹出窗口添加到照片库。我以前用过[灯箱](http://lokeshdhakar.com/projects/lightbox/)。但我认为有一个问题。JQuery 上传窗口而不打开新页面。这意味着您只有一页图片。我认为这对SEO不利。Facebook 使用另一种方式，当您打开照片时，您有新的网址（但背景中有父页面）。

你能解释一下这些东西是如何工作的吗？我对 SEO 的看法正确吗？例如，我使用 django，但我认为没关系。

先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T15:42:57.930

Facebook 同时使用`href`和 属性`ajaxify`。单击链接时，javascript 将停止从锣到其他页面的链接并加载指定的页面`ajaxify`以加载弹出窗口。如果 javascript 没有打开，那么它只会跟随`href`到照片页面。

Facebook 剧院主播标签

```
<a class="uiMediaThumb _6i9 uiMediaThumbMedium" href="http://www.facebook.
    com/photo.php?loadandloadsofnumbers_n.jpg&size=720%2C960" aria-label="Photo"
    id="pic_nuuuuuumbers" rel="theater" ajaxify="http://www.facebook.com/photo.
    php?fbid=nuuuuuumbers&set=t.nuuuuuumbers&type=3&src=http%3A%2F%2Fsphotos-
    e.ak.fbcdn.net%2Fhphotos-ak-ash4%2F312300_10nuuuuuumbers54
    _773840764_n.jpg&size=720%2C960&theater"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T15:41:31.107

您可以使用 将`window.locaiton`网址更改为您想要的任何内容。请参阅[此](https://stackoverflow.com/questions/1865837/whats-the-difference-between-window-location-and-window-location-replace)内容以供参考。

# json - 将 JSON 对象发送到控制器 Codeigniter

> ID：14402193
> 
> 赞同：1
> 
> 时间：2013-01-18T15:32:36.240
> 
> 标签：json, codeigniter

我有一个问题。当我尝试将我的 JSON 数据发送到控制器并尝试在那里使用它时，我得到了一个空数组。我检查了 XHR，我的帖子不是空的，但不知何故控制器不喜欢它。：） 在我看来：

```
$.ajax({
    type : "POST",
    url : "http://www.domain.hu/bet/placebet/",
    data : "{'places':'" + JSON.stringify(arr) + "'}",
    contentType : "application/json; charset=utf-8",
    dataType : "json",
    success : function(msg) {
        alert("Good");
    },
    fail : function(msg) {
        alert("Bed");
    }
}); 
```

在我的控制器中：

```
public function placebet() {
    $places = $this->input->post('places'); 
    echo json_encode(array('places'=>$places));
    exit;
} 
```

到目前为止，我得到了一个空记录。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T03:53:20.173

因为您通过 JSON 字符串发送，然后在帖子中接受它，然后重新编码它，在我看来这会导致问题。按照建议尝试 json_decoding 它，或者您也可以尝试

```
print_r(json_decode(array('places'=>$places)); 
```

由于您期望返回一个数组，因此**print_r**是要走的路。

# redmine - 如何以编程方式设置 Redmine WS API 密钥？

> ID：14402194
> 
> 赞同：1
> 
> 时间：2013-01-18T15:32:43.597
> 
> 标签：redmine

我需要启用 Redmine WS，然后在安装期间生成并存储其 API 密钥，以便稍后在其他脚本中使用它（例如 fetch_changesets）。这有红宝石命令吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T20:14:15.993

```
/usr/share/redmine/script/runner "Setting.sys_api_enabled = 1" -e production
/usr/share/redmine/script/runner "Setting.sys_api_key = 'abcd'" -e production 
```

# java - 生成JNI头文件时出错

> ID：14402199
> 
> 赞同：2
> 
> 时间：2013-01-18T15:32:52.043
> 
> 标签：java, c++, java-native-interface

我正在尝试通过命令行生成 JNI 头文件。当我输入 javah myclass.class 时，错误是

```
Exception in thread main java.IllegalArgumentException: not a valid class name
at com.sun.tools.javac.api.JavacTool.getTask<JavacTool.java:177>
at com.sun.tools.javac.api.JavacTool.getTask<JavacTool.java:68>
at com.sun.tools.javah.api.JavachTask.run<JavahTask.java:509>
at com.sun.tools.javah.api.JavachTask.run<JavahTask.java:335>
at com.sun.tools.javah.Main.main<Main.java:46> 
```

但是当我输入 javah myclass

错误：找不到“myclass”的类文件

以前，当我在我的类目录中输入 ls 时，类文件是存在的。

这是我的代码段

```
package com.blablabla

public static native long myclass(long n); 
```

有谁知道如何解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T15:34:29.067

可能你应该尝试给出完全限定的类名： -

```
javah com.blablabla.myclass 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T15:34:47.633

类名以小写字符开头，尝试使用大写，这是 Java 中的强制约定。此外，尝试指定完全限定名称（列出所有以 分隔的包`.`）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T23:22:56.323

摆脱论点的 .class 部分。参数是完全限定的*类名，*而不是文件名。请参阅 Javadoc。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-03-26T20:51:50.647

获得完全限定的类名是一个巨大的痛苦。如果您想编写自己的解决方案，您可以查看[我为解决这个问题而编写的脚本集，](https://github.com/joshbooks/jniUtil)或者只是[处理这个特定问题的脚本。](https://github.com/joshbooks/jniUtil/blob/master/genJniHeaders.sh)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-06-10T11:39:49.883

我打开了 cmd 窗口（显然是 Windows），然后从包含 javah.exe 的文件夹中输入

```
javah -classpath C:\my\project\path\PackageDirectory\packagename\build\tmp\kotlin-classes\debug com.company.package.MyKotlinClass 
```

MyKotlinClass.class 文件位于文件夹中

```
C:\my\project\path\PackageDirectory\packagename\build\tmp\kotlin-classes\debug\com\company\package\ 
```

注意，我混合使用了指定类路径和限定类名。

# git - Git & JGit：从特定版本中检索文件的最快方法

> ID：14402200
> 
> 赞同：0
> 
> 时间：2013-01-18T15:33:01.927
> 
> 标签：git, version-control, jgit

## 背景：

我想从 Git 中的特定修订中检索文件。以前我使用`git show`此线程中描述的方法使用命令：[如何从 Git 中的特定修订中检索单个文件？](https://stackoverflow.com/questions/610208/how-to-retrieve-a-single-file-from-specific-revision-in-git)意义：

```
git show HEAD2:file.txt 
```

但是，基于我在另一篇文章中解释的问题：[Read both binary and text from process output](https://stackoverflow.com/questions/14376988/read-both-binary-and-text-from-process-output)我无法从`git show`的输出中读取二进制数据。在 SO 用户的建议下，我迁移到[JGit](http://eclipse.org/jgit/)作为 Java 的本机实现。我在 SO 上找到了这个线程，它描述了如何使用 JGit API 从特定修订版中检索文件。 [如何在 JGit 中“cat”一个文件？](https://stackoverflow.com/questions/1685228/how-to-cat-a-file-in-jgit)

## 问题：

性能对我的项目非常重要。因此，我正在寻找检索文件的最佳方法。上面描述的 API 方法似乎在树中导航并获得正确的修订。考虑到我可以在 Git 中使用单个命令来检索文件，我不确定哪个更快。

*   我应该使用为 JGit 描述的方法还是应该使用`git show`命令？
*   JGit有更好的解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T15:49:42.860

您可以使用

```
git checkout version -- path/to/file 
```

此外，如果你想让它去别的地方，你可以

```
git --git-dir=.git --work-tree=somewhere/else checkout version -- path/to/file 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T16:47:56.160

嗯，知道哪个更快的唯一方法是在它们将被使用的情况下进行测量。其他一切都是猜测。

一般而言，从 Git 存储库中获取此信息所需的工作`git show`与 JGit 相同。它是这样的：

1.  解析指定的 ref
2.  检索底层提交对象 ID
3.  解析它以获取树对象 ID
4.  检索树对象并解析它（每个目录级别一次）以查找 blob 对象 ID
5.  检索 blob 对象内容

有关更多详细信息，请参阅[Pro Git 书籍中关于 Git 内部的章节](http://git-scm.com/book/en/Git-Internals-Git-Objects)。

# hadoop - CDH4 Hbase 使用 Pig ERROR 2998 java.lang.NoClassDefFoundError: org/apache/hadoop/hbase/filter/Filter

> ID：14402206
> 
> 赞同：5
> 
> 时间：2013-01-18T15:33:09.843
> 
> 标签：hadoop, hbase, apache-pig, noclassdeffounderror, cloudera

我在伪分布式模式下使用 CDH4，我在同时使用 HBase 和 Pig 时遇到了一些问题（但两者都可以单独工作）。

我正在一步一步地遵循这个很好的教程： [http ://blog.whitepages.com/2011/10/27/hbase-storage-and-pig/](http://blog.whitepages.com/2011/10/27/hbase-storage-and-pig/)

所以我的猪脚本看起来像这样

```
register /usr/lib/zookeeper/zookeeper-3.4.3-cdh4.1.2.jar
register /usr/lib/hbase/hbase-0.92.1-cdh4.1.2-security.jar
register /usr/lib/hbase/lib/guava-11.0.2.jar

raw_data = LOAD 'input.csv' USING PigStorage( ',' ) AS (
listing_id: chararray,
fname: chararray,
lname: chararray );

STORE raw_data INTO 'hbase://sample_names' USING org.apache.pig.backend.hadoop.hbase.HBaseStorage ('info:fname info:lname'); 
```

但是在输入以下命令后

```
pig -x local hbase_sample.pig 
```

我收到以下错误消息

```
ERROR org.apache.pig.tools.grunt.Grunt - ERROR 2998: Unhandled internal error. org/apache/hadoop/hbase/filter/Filter 
```

我在网上找到的主要原因是类路径，所以这里是当前配置的列表，也许你在我的配置中发现了一些废话：

```
export HADOOP_HOME=/usr/lib/hadoop
export HADOOP_MAPRED_HOME=/usr/lib/hadoop-mapreduce
export HADOOP_CONF_DIR=/etc/hadoop/conf
export HBASE_HOME=/usr/lib/hbase
export HBASE_CONF_DIR=/etc/hbase/conf
export PIG_HOME=/usr/lib/pig
export PIG_CONF_DIR=/etc/pig/conf

export PATH="$HADOOP_HOME/bin:$HBASE_HOME/bin:$HADOOP_MAPRED_HOME/bin:$PIG_HOME/bin:$PATH"
export HADOOP_CLASSPATH="$HBASE_HOME/bin"
export PIG_CLASSPATH="$HBASE_HOME/bin:$PIG_HOME/bin" 
```

如果您需要更多详细信息，这里是完整的猪堆栈跟踪：

```
Pig Stack Trace
---------------
ERROR 2998: Unhandled internal error. org/apache/hadoop/hbase/filter/Filter

java.lang.NoClassDefFoundError: org/apache/hadoop/hbase/filter/Filter
    at java.lang.Class.forName0(Native Method)
    at java.lang.Class.forName(Class.java:247)
    at org.apache.pig.impl.PigContext.resolveClassName(PigContext.java:478)
    at org.apache.pig.impl.PigContext.instantiateFuncFromSpec(PigContext.java:508)
    at org.apache.pig.parser.LogicalPlanBuilder.validateFuncSpec(LogicalPlanBuilder.java:791)
    at org.apache.pig.parser.LogicalPlanBuilder.buildFuncSpec(LogicalPlanBuilder.java:780)
    at org.apache.pig.parser.LogicalPlanGenerator.func_clause(LogicalPlanGenerator.java:4583)
    at org.apache.pig.parser.LogicalPlanGenerator.store_clause(LogicalPlanGenerator.java:6225)
    at org.apache.pig.parser.LogicalPlanGenerator.op_clause(LogicalPlanGenerator.java:1335)
    at org.apache.pig.parser.LogicalPlanGenerator.general_statement(LogicalPlanGenerator.java:789)
    at org.apache.pig.parser.LogicalPlanGenerator.statement(LogicalPlanGenerator.java:507)
    at org.apache.pig.parser.LogicalPlanGenerator.query(LogicalPlanGenerator.java:382)
    at org.apache.pig.parser.QueryParserDriver.parse(QueryParserDriver.java:175)
    at org.apache.pig.PigServer$Graph.parseQuery(PigServer.java:1594)
    at org.apache.pig.PigServer$Graph.registerQuery(PigServer.java:1545)
    at org.apache.pig.PigServer.registerQuery(PigServer.java:545)
    at org.apache.pig.tools.grunt.GruntParser.processPig(GruntParser.java:970)
    at org.apache.pig.tools.pigscript.parser.PigScriptParser.parse(PigScriptParser.java:386)
    at org.apache.pig.tools.grunt.GruntParser.parseStopOnError(GruntParser.java:189)
    at org.apache.pig.tools.grunt.GruntParser.parseStopOnError(GruntParser.java:165)
    at org.apache.pig.tools.grunt.Grunt.exec(Grunt.java:84)
    at org.apache.pig.Main.run(Main.java:430)
    at org.apache.pig.Main.main(Main.java:111)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.apache.hadoop.util.RunJar.main(RunJar.java:208)
Caused by: java.lang.ClassNotFoundException: org.apache.hadoop.hbase.filter.Filter
    at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
    ... 28 more
================================================================================ 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-18T19:40:57.467

你`PIG_CLASSPATH`错了，它应该如下所示：

```
export PIG_CLASSPATH=”`hbase classpath`:$PIG_CLASSPATH” 
```

这会将您缺少的与 hbase 相关的 jar 添加到 Pig 的类路径中。

# php - AJAX 和 PHP 自动完成（SuggestionsList）

> ID：14402208
> 
> 赞同：0
> 
> 时间：2013-01-18T15:33:21.887
> 
> 标签：php, ajax

我正在尝试`suggestionList`在搜索中显示，我有 4 个问题

1.  安全吗？

2.  为什么它不能在谷歌浏览器和火狐和ie上工作

3.  如果用户没有选择任何建议，我如何让它在 2 > 秒后隐藏建议，我尝试这样做但它没有工作 [setTimeOut(document.getElementById("list").style.display="无”，2000）]

4.  如何在使用 WHERE > NAME LIKE 时在 sql 查询中添加引号

这是一段代码

```
<script type="text/javascript">
    function showSuggestions(str)
        {
            if(str=="")
                return;
            if(window.XMLHttpRequest())
                {
                    xmlhttp = new XMLHttpRequest();
                }
            else
                {
                    xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
                }
            xmlhttp.onreadystatechange=function()
                {
                    if(xmlhttp.readyState == 4 && xmlhttp.status == 200)
                        {
                            var c = document.getElementById("list");
                            c.innerHTML = xmlhttp.responseText;
                        }
                }
                xmlhttp.open("GET", "/ajax/character/"+str, true);
                xmlhttp.send();
        }
</script>

<form action="/characters/" onsubmit="window.location='/characters/'+this.name.value; return false;" class="form" autocomplete="off" method="post">
<p style="font-weight:200;color:brown;font-size:12px;">Find User.</p>
    <div>Please enter a user name &nbsp;
        <input name="name" type="text" onkeyup="showSuggestions(this.value)" maxlength="35" required="required" pattern="[A-Za-z\s]{3,35}" autofocus="autofocus"/>
        <div id="list"></div>
    </div>
    <p style="text-align:center">
        <input type="submit" class="button" value="Search"/>
    </p>
</form>

<style>
    .suggestionList {
        margin: 0px;
        padding: 0px;
        padding-left: 10px;
        line-height: 16px;
        list-style: none outside none;

    }

    .suggestionList li {

        margin: 0px 0px 3px 0px;
        padding: 3px;
        cursor: pointer;
    }

    .suggestionList li:hover {
        background-color: #659CD8;
    }

    .suggestionsBox {
        position: relative;
        left: 230px;
        margin: 10px 0px 0px 0px;
        width: 200px;
        background-color: #212427;
        -moz-border-radius: 7px;
        -webkit-border-radius: 7px;
        border: 2px solid #000; 
        color: #fff;
    }
</style>
<?php
    if(isset($_GET['name']) && strlen($_GET['name']) > 1) {
        include('../main.php');
        $name = $_GET['name'];
        if(check_name($name)) {
        ?>
        <div class="suggestionsBox" id="suggestions" style="display :block;">
            <img src="/images/upArrow.png" style="position: relative; top: -12px; left: 30px;" alt="upArrow" />
            <div class="suggestionList" id="SuggestionsList"><?
                foreach(query('SELECT name FROM users WHERE name LIKE "'.$name.'" LIMIT 5')->fetchAll() as $q) {
                        echo '<a href="/characters/'.$q['name'].'"><li>'.$q['name'].'</li></a>';
                } ?>
            </div>
        </div>
        <?
    }
    else
        echo 'Invalid name format';
    } 
```

# .net - .NET、SQL Server、NHibernate 和高精度小数

> ID：14402211
> 
> 赞同：4
> 
> 时间：2013-01-18T15:33:30.317
> 
> 标签：.net, nhibernate, sql-server-2012, bigdecimal

我需要使用高精度的十进制值 - 例如，SQL Server 2012[最多允许 38 位](http://msdn.microsoft.com/en-us/library/ms187746.aspx)。

这比`System.Decimal`支持的精度更高（[28-29 位有效数字](http://msdn.microsoft.com/en-us/library/system.decimal%28v=vs.100%29.aspx)）。

假设我`BigDecimal`在 CLR 端使用某个实现来表示它，它支持任何需要的构造函数（例如，从数字的字符串表示）。

这些值使用适当的 SQL Server`decimal`类型存储在 SQL Server 数据库中。

我正在为 ORM 使用 NHibernate。我正在尝试创建一个[`IUserType`](http://nhforge.org/blogs/nhibernate/archive/2009/10/15/mapping-different-types-iusertype.aspx)从 DB 表示转换为`BigDecimal`表示的实现。

`System.Decimal`我的问题是，如果不使用会截断数据的中间体，我无法弄清楚如何做到这一点。

```
public virtual object NullSafeGet(IDataReader rs, string[] names, object owner)
{
    // ??
    object objValue = NHibernateUtil.Decimal.NullSafeGet(rs, names[0]);
    //objValue is already a System.Decimal

    if (!Convert.IsDBNull(objValue))
    {
        return new BigDecimal(objValue.ToString());
    }
    return null;
} 
```

更新： 

在对应的 Java 中，我可以看到一个特殊的 Hibernate DbType 用于这个确切的用例：[`org.hibernate.type.BigDecimalType`](http://docs.jboss.org/hibernate/orm/3.6/javadocs/org/hibernate/type/BigDecimalType.html)

我开始怀疑这是否是底层 ADO.NET 层的限制——据我所知，它也没有[定义`DbType`](http://msdn.microsoft.com/en-us/library/system.data.dbtype.aspx)适合 m 用例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T09:20:07.220

无需调用 NHibernateUtil.Decimal.NullSafeGet()。相反，您应该使用 IDataReader 上可用的方法来获取值。

如果您在阅读器上使用例如 GetValue()，通过[类型映射表](http://msdn.microsoft.com/en-us/library/ms131092.aspx)，您将获得[System.Data.SqlTypes.SqlDecimal](http://msdn.microsoft.com/en-us/library/system.data.sqltypes.sqldecimal.aspx)的实例。

然后你必须弄清楚如何将值转换为你的 BigDecimal。

# javascript - event.currentTarget 问题

> ID：14402213
> 
> 赞同：6
> 
> 时间：2013-01-18T15:33:34.110
> 
> 标签：javascript, javascript-events

我正在调试我的 javascript 代码中的一个问题，其中一个变量没有正确设置。经过一番研究，我发现该变量没有被填充，因为它从一个不存在的事件属性中获取其值。在这种情况下，它从 event.currentTarget 派生它的值，奇怪的是它是 null。

所以我现在有点困惑。我总是认为 event.currentTarget 总是指向任何元素持有触发事件的侦听器。那么在什么情况下 event.currentTarget 实际上会为空呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-18T17:52:54.500

好吧，我终于想通了。

问题在于事件的处理方式。正如您在下面看到的，事件对象本身不仅要由其各自的处理函数处理；它也将由另一个函数处理，该函数仅在处理程序中进行的 AJAX 调用成功返回时调用。但是，一旦成功函数在 AJAX 调用下执行，事件对象就会丢失它的一些上下文，即它的 currentTarget 属性。我认为这是因为一旦浏览器开始在成功函数中执行代码，我们就不直接在处理程序的范围内。

```
$('#element').click(function(e) {

    // bunch of lines of code here

    $.ajax({
       type: 'POST',
       url: // url,
       ...,
       success: function(response) {

           // more lines of code here

           callAnotherFunction(e);
           // When we invoke the above function, we pass the event in as a 
           // parameter, but the event has already lost some of its context
           // due to scope change.
       }
    });

}) 
```

# java - 搜索栏更改后变量的值（Android）

> ID：14402228
> 
> 赞同：0
> 
> 时间：2013-01-18T15:34:08.917
> 
> 标签：java, android, seekbar

我使用 seekBar 来传递用户增加/减少的值...我把 barValue=50 的初始值。当用户拖动搜索栏小于当前值时.. a,b 减少 0.00001。

我面临的问题。它只做一次 IF 条件。seekBar 更新后.. a 和 b 没有变化。

```
 public static double a,b;
     public static int barValue;

    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
         locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
            // Define the criteria how to select the locatioin provider -> use
            // default
            Criteria criteria = new Criteria();
            provider = locationManager.getBestProvider(criteria, false);
            Location location = locationManager.getLastKnownLocation(provider);

            a= location.getLatitude(); 
            b= location.getLongitude(); 

             bar = (SeekBar)findViewById(R.id.seekBar1); // make seekbar object
             bar.setOnSeekBarChangeListener(this); // set seekbar listener.

             barValue = 50;
             bar.setProgress(barValue);

    }

public void onProgressChanged(SeekBar seekBar, int progress, boolean fromUser) {
        // TODO Auto-generated method stub
        if (progress > barValue)
        {
            a += seekBar.getProgress()/10000; 
            b += seekBar.getProgress()/10000;

            getSensorManager().enableMockLocation(a, b);
        }
        else if(progress < barValue)
        {
            a -= seekBar.getProgress()/10000;
            b -= seekBar.getProgress()/10000;

            getSensorManager().enableMockLocation(a, b);
        }

    }

    @Override
    public void onStartTrackingTouch(SeekBar seekBar) {
        // TODO Auto-generated method stub

    }

    @Override
    public void onStopTrackingTouch(SeekBar seekBar) {
        // TODO Auto-generated method stub
        seekBar.setSecondaryProgress(seekBar.getProgress());
        barValue = seekBar.getProgress();
    } 
```

# java - 从同一个类与不同类Java调用静态方法

> ID：14402232
> 
> 赞同：2
> 
> 时间：2013-01-18T15:34:34.467
> 
> 标签：java, static-methods

我有课说`ClassOne`。`ClassOne`有两个方法说`method1()`，并且这`method2()`两个方法都是静态的，将一个接一个地被调用（像这样）：

```
ClassOne.method1();
ClassOne.method2(); 
```

这个顺序保证不会改变。

现在我想知道上述情况和以下情况是否有任何性能差异：

第二种情况：

```
method1(){
    method2();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T15:46:16.917

在性能方面，以任何一种方式进行方法调用都会产生相同的字节码，并且不会提供任何性能优势。

看看这篇文章以更好地理解 [http://www.codeproject.com/Articles/30422/How-the-Java-Virtual-Machine-JVM-Works](http://www.codeproject.com/Articles/30422/How-the-Java-Virtual-Machine-JVM-Works)

至于使用哪种风格，这取决于每种方法执行的功能。如果 method1() 依赖于 method2() 执行的任务，那么你将它耦合到一边，但如果它不耦合，并且 method2() 做了一些需要在 method1() 完成后执行的事情，那么你将它们分开以维护关注点分离。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T15:44:50.177

我怀疑会有什么区别，主要是因为 ClassOne 是指向消息接收者的指针，而在第二种情况下，消息的接收者是范围内的 this 对象，即类对象本身。但是，如果您想证明这一点，请编写一个简单的应用程序，该应用程序调用两个空方法数百万次，并比较两种方法之间的平均时间。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-18T16:09:00.537

您可以查看生成的字节码并自行得出结论：

**源代码#1**

```
public class Clazz {

    public static void main(String[] args){
        Clazz.method1();
        Clazz.method2();
    }

    public static void method1() {

    }

    public static void method2() {

    }
} 
```

**字节码 #1**

```
Compiled from "Clazz.java"

public class Clazz {
  public Clazz();
    Code:
       0: aload_0
       1: invokespecial #8                  // Method java/lang/Object."<init>":()V
       4: return

  public static void main(java.lang.String[]);
    Code:
       0: invokestatic  #16                 // Method method1:()V
       3: invokestatic  #19                 // Method method2:()V
       6: return

  public static void method1();
    Code:
       0: return

  public static void method2();
    Code:
       0: return
} 
```

**源代码#2**

```
public class Clazz {

    public static void main(String[] args){
        Clazz.method1();
    }

    public static void method1() {
        method2();
    }

    public static void method2() {

    }
} 
```

**字节码 #2**

```
Compiled from "Clazz.java"

public class Clazz {
  public Clazz();
    Code:
       0: aload_0
       1: invokespecial #8                  // Method java/lang/Object."<init>":()V
       4: return

  public static void main(java.lang.String[]);
    Code:
       0: invokestatic  #16                 // Method method1:()V
       3: return

  public static void method1();
    Code:
       0: invokestatic  #21                 // Method method2:()V
       3: return

  public static void method2();
    Code:
       0: return
} 
```

## 结果

静态方法生成的字节码相同

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-18T15:37:53.297

应该没有任何性能差异。现在如果method2()总是在method1()之后执行，最好使用Second Case。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-18T15:42:18.790

在这种情况下，您最好的选择就是通过将“method2”的主体放在“method1”的末尾来重构它，并删除对“method2”的所有调用，并将“method1”重命名为反映以下事实的名称它现在正在执行这两项操作，并将所有引用重命名为“method1”。

# c# - 使用保存对话框将 DataGridView 导出到 Excel？

> ID：14402233
> 
> 赞同：-1
> 
> 时间：2013-01-18T15:34:34.360
> 
> 标签：c#, winforms

我想使用保存对话框将 DataGridView 导出到 Excel 文档。谁能帮忙？（注意：我想要 Excel 文档中网格中存在的列名）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-18T15:49:42.460

我建议[`EPPlus`](http://epplus.codeplex.com/)不需要在服务器上拥有办公许可证。

```
private void btnExportToExcel_Click(object sender, EventArgs e)
{
    var dia = new System.Windows.Forms.SaveFileDialog();
    dia.InitialDirectory = Environment.GetFolderPath(Environment.SpecialFolder.MyDocuments);
    dia.Filter = "Excel Worksheets (*.xlsx)|*.xlsx|xls file (*.xls)|*.xls|All files (*.*)|*.*";
    if(dia.ShowDialog(this) == System.Windows.Forms.DialogResult.OK)
    {
        DataTable data = null;// use the DataSource of the DataGridView here
        var excel = new OfficeOpenXml.ExcelPackage();
        var ws = excel.Workbook.Worksheets.Add("worksheet-name");
        // you can also use LoadFromCollection with an `IEnumerable<SomeType>`
        ws.Cells["A1"].LoadFromDataTable(data, true, OfficeOpenXml.Table.TableStyles.Light1);
        ws.Cells[ws.Dimension.Address.ToString()].AutoFitColumns();

        using(var file = File.Create(dia.FileName))
            excel.SaveAs(file);
    }
} 
```

# php - 我应该在多人 Flash 游戏中使用 PHP 套接字吗

> ID：14402236
> 
> 赞同：2
> 
> 时间：2013-01-18T15:34:44.063
> 
> 标签：php, actionscript-3, flash, websocket, multiplayer

我需要在 AS3 中构建多人纸牌游戏，我想知道玩家之间交流的最佳方式。我目前正在将游戏数据发送到数据库，并让 AS3 每秒调用一个 PHP 页面来查询该数据库并检查玩家操作的更新。但是，我在某处读到这是一种不好的方法，正确的方法是使用 PHP 套接字。所以我有几个问题：

1）使用我当前的方法（非套接字），如果他们每秒都查询数据库以更改卡片组和玩家轮次，我将能够支持多少同时用户。

2）有人可以解释一下PHP套接字。这对我来说是一个新课题，我想知道它们的优势以及它们是如何工作的。我搜索了很多教程，但没有找到任何最近给出简单解释的教程，我也无法让它们中的任何一个工作。

3) 使用 PHP 套接字的先决条件是什么？我只有 PHP 和 Flash 的中级经验，我想知道这个项目是否太高级而无法处理。我没有其他正式的编程背景（例如软件工程、C++、Java、命令行），我想知道这个项目对我来说是否是一场不可能的艰苦战斗。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T16:57:35.733

我知道这不是您问题的答案，但是您是否考虑过使用可用的多人 API/服务器？我玩过[player.io](http://playerio.com/)并认为它真的很容易上手。还有另一个类似的，我不记得名字了，但两者都有免费的服务级别来进行编码。如果不出意外，它可以让您接触到服务器正在处理的一些东西，以及客户端-服务器通信中涉及的那种问题。Player.io 使用 C，并且在他们的网站上也有一些不错的文章。

# drop-down-menu - 如何为 droppDownList 添加空替代项

> ID：14402237
> 
> 赞同：0
> 
> 时间：2013-01-18T15:34:47.137
> 
> 标签：drop-down-menu, sharepoint-2007

我正在填充这样的下拉列表：

```
SPList categories = SPContext.Current.Web.Lists["Categories"];
                dropdownlist.DataSource = categories.Items;
                dropdownlist.DataValueField = "ID";
                dropdownlist.DataTextField = "Title";
                dropdownlist.DataBind(); 
```

假设用户不想从下拉列表中选择任何值，但想选择一个空选项。我如何添加一个空的替代下拉列表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T15:38:19.663

对于选项字段，默认值在列设置中配置。如果填充了“默认值”输入框，请删除该值以不使用默认值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T15:38:44.803

填充 ddl 后添加此行

```
dropdownlist.Items.Add(new ListItem("Select Value", "0")); 
```

# android - 在睡眠模式下检测音量增大/减小

> ID：14402238
> 
> 赞同：2
> 
> 时间：2013-01-18T15:34:47.323
> 
> 标签：android, android-broadcast

[可能重复] 但我没有找到这个特定问题的任何答案。解决方法不完全正常。

当手机处于睡眠模式时，我正在尝试检测音量增大/减小。我尝试了以下网站中提到的以下内容，

[http://android-developers.blogspot.com/2010/06/allowing-applications-to-play-nicer.html](http://android-developers.blogspot.com/2010/06/allowing-applications-to-play-nicer.html)

但是接收器在手机解锁时被调用，而不是在手机处于睡眠模式时调用。

请帮助我如何在睡眠模式下检测音量增大/减小。

我努力了好几个小时来实现这个功能

# r - 使用 ggplot 时保持与数据文件相同的顺序

> ID：14402242
> 
> 赞同：9
> 
> 时间：2013-01-18T15:34:53.097
> 
> 标签：r, ggplot2

我正在使用下面的附加数据来生成箱线图。数据链接 [https://www.dropbox.com/s/dt1nxnkhq90nea4/GTAP_Sims.csv](https://www.dropbox.com/s/dt1nxnkhq90nea4/GTAP_Sims.csv)

到目前为止，我有我正在使用的这段代码：

```
# Distribution of EV for all regions under the BASE scenario

evBASE.f <- subset(ccwelfrsts, tradlib =="BASE")
p <- ggplot(data = evBASE.f, aes(factor(region), ev))
p + geom_boxplot() + 
    theme(axis.text.x = element_text(colour = 'black', angle = 90, size = 16)) +
    theme(axis.text.y = element_text(colour = 'black', size = 16)) 
```

它再现了一个看起来的情节： Plot file:///C:/Users/iouraich/Documents/ggplot_Results.htm

我在这里寻找的是让图中的 x 轴与 csv 文件中标题“区域”的顺序相匹配。

ggplot 中是否有任何选项可以控制它？

非常感谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-21T01:49:31.687

基本上，您只需要`region <- factor(region,levels=unique(region))`按照它们在数据中出现的顺序指定级别。

基于您提供的数据的完整解决方案：

```
ccwelfrsts <- read.csv("GTAP_Sims.csv")
## unmangle data
ccwelfrsts[5:8] <- sapply(ccwelfrsts[5:8],as.numeric)
evBASE.f <- droplevels(subset(ccwelfrsts, tradlib =="BASE"))
## reorder region levels
evBASE.f <- transform(evBASE.f,region=factor(region,levels=unique(region)))
library(ggplot2)
theme_set(theme_bw())
p <- ggplot(data = evBASE.f, aes(region, ev))
p + geom_boxplot() + 
    theme(axis.text.x = element_text(colour = 'black', angle = 90, size = 16)) +
    theme(axis.text.y = element_text(colour = 'black', size = 16))+
    xlab("") 
```

您可能会考虑切换图形的方向（通过`coord_flip`或通过显式切换 x 和 y 轴映射）以使标签更易于阅读，尽管大多数查看者更熟悉 y 轴上的数字响应布局。

# filter - 基于另一个模块字段的果园过滤投影查询

> ID：14402243
> 
> 赞同：3
> 
> 时间：2013-01-18T15:34:54.750
> 
> 标签：filter, orchardcms, projection

在 Orchard 1.6 上，我定义了一个名为 Offer 的自定义内容类型，这个 Offer 有一个 pack 字段。在显示一个报价的页面上，我想显示具有相同包装的其他报价的简短列表。

为此，我尝试进行投影，但是如何在查询过滤器中指定 pack 字段必须等于当前显示的报价的 pack 字段？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T12:52:41.043

您可以编写一个内容处理程序来存储当前显示的内容项，以供以后在请求中使用：

```
public class MyContentHandler : ContentHandler
{
    readonly IOrchardServices orchardServices;

    public MyContentHandler (
        IOrchardServices orchardServices)
    {
        this.orchardServices = orchardServices;            
    }

    protected override void BuildDisplayShape(BuildDisplayContext context)
    {
        if (context.DisplayType == "Detail" && ((IShape)context.Shape).Metadata.Type == "Content" &&
            orchardServices.WorkContext.GetState<ContentItem>("currentContentItem") == null)
        {
            orchardServices.WorkContext.SetState("currentContentItem", context.ContentItem);
        }
    }
} 
```

然后，您可以使用存储在状态中的内容项引用来编写投影过滤器。（有关如何编写投影过滤器的示例，请参阅 Orchard.Tags.Projections.TagsFilter。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T02:05:20.757

我不相信这是目前可能的。恐怕您必须编写自己的代码才能做到这一点。

# php - PHP 列出文件夹内容并仅显示其中的一部分

> ID：14402245
> 
> 赞同：0
> 
> 时间：2013-01-18T15:35:00.927
> 
> 标签：php, file, list

我有一个问题困扰着我。我有这个 PHP 脚本，它列出了目录中的所有图像并写在页面上：

```
<?PHP
    $directory="photos";
    $sortOrder="newestFirst";

    $results = array();
    $handler = opendir($directory);

    while ($file = readdir($handler)) {
        if ($file != '.' &&
            $file != '..' &&
            $file != "robots.txt" &&
            $file != ".htaccess") {

            $currentModified = filectime($directory."/".$file);
            $file_names[] = $file;
            $file_dates[] = $currentModified;
        }
    }
    closedir($handler);

    //Sort the date array by preferred order
    if ($sortOrder == "newestFirst"){
        arsort($file_dates);
    } else {
        asort($file_dates);
    }

    //Match file_names array to file_dates array
    $file_names_Array = array_keys($file_dates);
    foreach ($file_names_Array as $idx => $name) $name=$file_names[$name];
    $file_dates = array_merge($file_dates);

    $i = 0;

    //Loop through dates array and then echo the list
    foreach ($file_dates as $$file_dates){
        $date = $file_dates;
        $j = $file_names_Array[$i];
        $file = $file_names[$j];
        $i++;

        echo  "<img src=photos/$file>\n";
    }
?> 
```

怎么可能，在一个有 100 个文件的文件夹中一次只列出 20 个文件，而且是随机的，这意味着每次我刷新页面时都会加载 20 张随机图片？

我怎么能做到？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T15:39:31.960

如果您不需要多个页面，而只需要刷新页面，您可以这样做：

1.  从目录中创建图像列表并将它们放入一个数组中。

2.  在数组大小内生成 20 个随机数。

3.  仅输出刚刚获得的随机键生成的图像。

代码应该足够简单，所以我不会发布任何示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T15:45:40.730

你可以试试这个-

```
$dir    = '/tmp';
$files = scandir($dir);
$rand_keys = array_rand($files, 2);
echo $input[$rand_keys[0]] . "\n";
echo $input[$rand_keys[1]] . "\n"; 
```

# ruby-on-rails - Rails - 更新的对象不保存？

> ID：14402246
> 
> 赞同：0
> 
> 时间：2013-01-18T15:35:07.120
> 
> 标签：ruby-on-rails, ruby

我不确定这是否是范围问题或其他问题，但我在更新 test:unit 中的对象时遇到问题。

有趣的是，所有功能在开发模式下都能完美运行，但是一旦我切换到 rake test:unit，它就全部中断了。

以下是相关代码：

```
 class Cart < ActiveRecord::Base

  def add_product(product)
    current_item = line_items.find_by_product_id(product.id)
    if current_item
      Rails::logger.debug "Incrementing quantity"
      Rails::logger.debug current_item.quantity
      current_item.quantity += 1
      Rails::logger.debug current_item.quantity
    else
      current_item = line_items.build(product_id: product.id,
                                     price: product.price)
    end
    Rails::logger.debug "Added Product"
    Rails::logger.debug current_item.quantity
    current_item
  end 
```

和相关的测试

```
 test "create new cart with one item added twice" do
    cart = Cart.new
    cart.add_product(products(:one)).save!
    assert_equal 1, cart.line_items.size
    assert_equal 36.00, cart.total_price
    Rails::logger.debug cart.line_items.to_a
    cart.add_product(products(:one)).save!
    Rails::logger.debug "Added second item"
    Rails::logger.debug cart.line_items.to_a
    Rails::logger.debug cart.total_price
    assert_equal 1, cart.line_items.size
    assert_equal 72.00, cart.total_price
  end 
```

这是日志输出：

```
Incrementing quantity
1
2
Added Product
2
   (0.1ms)  SAVEPOINT active_record_1
   (0.3ms)  UPDATE "line_items" SET "quantity" = 2, "updated_at" = '2013-01-18 15:27:06.958210' WHERE "line_items"."id" = 980190963
   (0.1ms)  RELEASE SAVEPOINT active_record_1
Added second item
[#<LineItem id: 980190963, product_id: 1, cart_id: nil, created_at: "2013-01-18 15:27:06", updated_at: "2013-01-18 15:27:06", quantity: 1, price: 36>]
36 
```

ew 数量（根据上次日志已更改）。有趣的是，在函数本身中，数量字段正在更新为两个。它甚至可以保存到 SQL 数据库中。但是当我调用cart.line_items时，它甚至有更新的字段，但它没有保存新的数量（根据最后的日志已经改变）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T15:48:57.420

默认情况下，Rails 没有身份映射。这意味着，无论何时执行一个`LineItem.find(1)`和另一个`LineItem.find(1)`，您都会得到两个单独的对象，它们是从数据库中的同一行数据创建的，但它们之间没有任何连接。如果其中一个被更改并保存到数据库中，另一个对象将不知道它并且仍然拥有旧数据。

在您的示例中，您正在执行`line_items.find_by_product_id(product.id)`的操作每次都会进行查找并返回一个新对象。与`LineItem`之前加载到`cart.line_items`.

有两个选项可以更新陈旧对象的数据。其中之一是`.reload`将重新加载数据库中一个对象的所有数据的方法。另一种选择是将 a 传递`true`给`cart.line_items`关联。像 cart.line_items(true) 这样的调用将强制对数据库进行新查询以获取所有订单项。

这个 bug 只在测试时出现的原因很简单：在开发模式下，插入和读取通常是在两个单独的请求中完成的，因此每次都是从数据库中新加载的所有对象。

# linux - 延迟符号解析

> ID：14402248
> 
> 赞同：0
> 
> 时间：2013-01-18T15:35:17.510
> 
> 标签：linux, elf, debug-symbols

我正在开发一些诊断工具来帮助定位嵌入式 ARM 平台上的内存问题。由于内存限制，我无法为单元本身的所有库加载所有符号。我需要保存哪些信息才能稍后在另一台机器上解析符号？

我将解析符号的机器是 x86 机器，它具有交叉工具链和 gdb 以及所需的所有符号包。我将使用什么来从我保存在诊断输出中的这些信息中批量解析符号？是否有用于解析的库或 API？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T10:19:59.407

以下信息与 Android 相关。其中一些部分也被编译为 ARM 架构的 ELF 文件，因此它可能对您的情况有用。

构建过程如下所示：

1.  一切都是用调试信息编译的 ( `gcc -g ...`)
2.  然后将所有二进制文件剥离并打包到系统映像中。但是每个二进制文件的原始未剥离版本**仍保留**在构建目录中。
3.  系统映像在目标设备上闪烁。

因此，要从诊断输出中解析符号，您可以使用`arm-linux-androideabi-addr2line`. 例子：

```
${CROSS_COMPILE}addr2line --demangle -f -e PATH_TO_NOT_STRIPPED_BINARY ADDRESS 
```

可以在这个问题中找到其他信息：[如何使用 addr2line](https://stackoverflow.com/a/5317759/197979)。

我还准备了一个非常简单的 python 脚本来自动化这个过程：[decode_callstack.py](http://pastebin.com/raw.php?i=9ezGH46S)（它适用于 Android 诊断输出，您需要在使用前更改 PREFIX 变量）

# java - 如何使用拦截器设置类变量以在我的 jsp 中显示？

> ID：14402250
> 
> 赞同：0
> 
> 时间：2013-01-18T15:35:26.607
> 
> 标签：java, struts2, interceptor, interceptorstack

我正在尝试在 struts 中创建一个拦截器，它设置了几个类变量（我想在标题页中使用）。这就是我所做的

struts.xml

```
 <interceptors>
        <interceptor class="com.googlecode.sslplugin.interceptors.SSLInterceptor" name="secure" />
        <interceptor class="org.my.action.HeaderInterceptor" name="headerInterceptor" />
        <interceptor-stack name="myStack">
            <!-- TODO : uncomment this before release
            <interceptor-ref name="secure">
                <param name="useAnnotations">true</param>
                <param name="httpsPort">443</param>
                <param name="httpPort">80</param>
            </interceptor-ref>
            -->
            <interceptor-ref name="headerInterceptor" />
            <interceptor-ref name="defaultStack"/>
        </interceptor-stack>
</interceptors>
<default-interceptor-ref name="myStack"/> 
```

拦截器代码

```
public class HeaderInterceptor implements Interceptor {

private static final long serialVersionUID = 1L;

//added for inputs to HEADER
private String investorName;
private String investorImage;

@Override
public void destroy() {}

@Override
public void init() {}

@Override
public String intercept(ActionInvocation actionInvocation) throws Exception {
    setHeaderAttributes();
    return actionInvocation.invoke();
}

private void setHeaderAttributes()
{
    HttpServletRequest request = ServletActionContext.getRequest();
    HttpSession session = request.getSession();
    Object invObj = session.getAttribute(RangDeServerUtils.USER);
    if( null != invObj && invObj instanceof Investor){
    Investor investor = (Investor) invObj;
        this.investorName = investor.getFirstName();
        this.investorImage = Integer.toString(investor.getImageId());
    }
}

//have removed getters and setters for the class variables

} 
```

在每个请求中，拦截器都会被命中并设置类变量，但它们不会显示在 jsp 上。

有什么我做错了吗？请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T23:14:14.363

我理解所写的问题，但是关于这是否是您真正想要/需要/应该做的事情似乎存在争议。不管是哪种情况，你如何使用拦截器来设置 Actions 类的值。

[查看参数拦截器的来源](http://struts.apache.org/2.0.6/struts2-core/apidocs/com/opensymphony/xwork2/interceptor/ParametersInterceptor.html)

我建议您下载当前版本的源代码，看看它是如何工作的。

```
public String intercept(ActionInvocation invocation){
   //get the current action
   Object action = invocation.getAction();
   //figure out if your action supports what you want to do, either check its
   // interface or use reflection (or apache Bean/Property Utils) to see if it 
   // supports the properties you are interested in...
   if(action typeof MyInterface){
       MyInterface mi = (MyInterface)action;
       //set what you need how you need it
   }

   return invocation.invoke();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T16:17:42.180

而不是做

```
 this.investorName = investor.getFirstName();
    this.investorImage = Integer.toString(investor.getImageId()); 
```

在拦截器中，我做到了

```
request.setParameter("investorName", investor.getFirstName());
request.setParamter("investorImage", Integer.toString(investor.getImageId())); 
```

它奏效了。

# javascript - 滑块隐藏/显示谷歌地图标记

> ID：14402251
> 
> 赞同：1
> 
> 时间：2013-01-18T15:35:28.007
> 
> 标签：javascript, jquery, google-maps, google-maps-api-3

我有一个呈现标记的谷歌地图，我在标记中构建的数组之一是**arrTimeStamp**这捕获一个整数 0 - 24，表示用户登录的小时数。滑块显示 0 - currentHour（这是当前时间四舍五入到小时）。我想做的是根据相对于滑块值的时间戳隐藏/显示标记。

例如，如果我在下午 2 点登录了 10 个标记，然后在下午 3 点又登录了 5 个标记。当滑块位于下午 3 点时，我应该在地图上看到所有 15 个标记，但如果我将滑块滑到下午 2 点，它应该隐藏标记为下午 3 点的 5 个标记，因此只显示 10 个下午 2 点标记。如果我将滑块滑回下午 3 点，我会再次看到全部 15 个。

我尝试使用 .setMap(null) .setMap(map) 进行隐藏和显示，但这会在 .setMap 上返回未定义的错误。如果我只使用 .setMap(null) 如果工作正常并隐藏它们，但这是一条单向街道，因为没有 .setMap(map) 我无法再次显示它们。我已经看过几篇关于 .setMap 在这方面的问题的文章，但我还没有找到解决方案。任何帮助，将不胜感激。谢谢你。

```
var d = new Date();
var currentHour = d.getHours()+1;

$( "#slider" ).slider({
  value: currentHour,
  min: 0,
  max: currentHour,
  step: 1,
  slide: function( event, ui ) {
    $( "#amount" ).val(ui.value);
    var time = parseInt($('#amount').val());

    for(x = 0; x <= arrMarkers.length; x++){
        arrMarkers[x].setMap((arrTimeStamp[x] >= (currentHour - time)) ? null : map);
    }

  }
}); 
```

这是我所有的地图和滑块代码。

```
<script type="text/javascript">
var map;
var arrMarkers = [];
var arrInfoWindows = [];
var arrTimeStamp = [];
var timeStamp = 0;
var marker = 0;
var numLocations = 0;

function mapInit()
{
    var centerCoord = new google.maps.LatLng(40, -100); // USA
    var mapOptions = {
        zoom: 5,
        center: centerCoord,
        mapTypeId: google.maps.MapTypeId.ROADMAP
    };
    map = new google.maps.Map(document.getElementById("map"), mapOptions);

    var d = new Date();
    var currentHour = d.getHours()+1;
    $.getJSON("http://www.URL.com/superadmin/json/map-data.cfc?method=getFeedData&feedType=location&timespan=" + currentHour, {}, function(data)
    {

        $.each(data.DATA, function(i, item)
        {

            numLocations++;
            $('#locationsOnline').html(numLocations);

            // displays proper image for marker
            function markerinformation()
            {
                var markerImage = 'http://www.URL.com/css/images/map_property_green_pin.png';
                return markerImage;
            }

            markerTitle = item.LOCATIONNAME

            // creates the markers
            var marker = new google.maps.Marker(
            {
                position: new google.maps.LatLng(item.LOCATIONLATITUDE, item.LOCATIONLONGITUDE),
                map: map,
                title: markerTitle,
                icon: markerinformation()
            });

            arrMarkers[i] = marker;

            // infowindow content
            var infowindow = new google.maps.InfoWindow(
            {
                content: "<p><b>Location:</b> " + item.LOCATIONNAME + "</p><p><b>Customer:</b> " + item.CUSTOMERNAME + "</p><p>" + item.LOCATIONCITY + ", " + item.LOCATIONSTATE + "</p>"
            });

            arrInfoWindows[i] = infowindow;

            // "live" bind click event
            google.maps.event.addListener(marker, 'click', function()
            {
                // this closes all open infowindows before opening the selected one
                for(x = 0; x < arrInfoWindows.length; x++)
                {
                    arrInfoWindows[x].close();
                }
                infowindow.open(map, marker); // open the clicked marker infowindow

            });

            arrTimeStamp[i] = item.TIMESTAMP;

        });
    });

}

$(function() {

mapInit(); // initialize map (create markers, infowindows, and list)
var d = new Date();
var currentHour = d.getHours()+1;

$( "#slider" ).slider({
  value: currentHour,
  min: 0,
  max: currentHour,
  step: 1,
  slide: function( event, ui ) {
    $( "#amount" ).val(ui.value);
    var time = parseInt($('#amount').val());

    for(x = 0; x <= arrMarkers.length; x++){
        arrMarkers[x].setMap((arrTimeStamp[x] >= (currentHour - time)) ? null : map);
    }

  }
});

  });
  </script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T16:38:01.443

问题在这里：

```
for(x = 0; x <= arrMarkers.length; x++){ 
```

JS 数组是零索引的，因此您需要将其更改为：

```
for(x = 0; x < arrMarkers.length; x++){ 
```

例如，如果您的数组有 3 个元素，您想要循环 3 次（显然）。所以你想参考

```
arrMarkers[0]
arrMarkers[1]
arrMarkers[2] 
```

如果你上升到 x = arrMarkers.length，你将指的是不存在的 arrMarkers[3]。

# azure - 两个不同的 IP 地址指向同一个 Azure 部署

> ID：14402254
> 
> 赞同：0
> 
> 时间：2013-01-18T15:35:38.197
> 
> 标签：azure, azure-compute-emulator

我有一个包含多个项目的 Visual Studio 2012 解决方案。四个项目是 Windows Azure 角色。

ProjectA [WorkerRole]
ProjectB [WorkerRole]
ProjectC [WebRole]
ProjectD [WebRole]

使用 F5，所有四个项目都将启动。在模拟器中，我可以看到 ProjectC 和 ProjectD 的不同 IP 地址。在控制台输出中，我可以看到 ProjectC 真的是 ProjectC，而 ProjectD 真的是 ProjectD。但是如果我用浏览器调用应用程序，我总是会得到 ProjectC。使用两个 IP 地址。

有继承吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T15:51:03.893

我重新安装了 azure 工具包和 azure 模拟器。这解决了我的问题。

# perl - Perl 5.14 神秘的拼写错误错误消息、DESTROY 和 AUTOLOAD

> ID：14402255
> 
> 赞同：2
> 
> 时间：2013-01-18T15:35:39.913
> 
> 标签：perl, autoload, destroy

我有一个[Perl Subversion 预提交钩子](https://github.com/qazwart/SVN-Precommit-Kitchen-Sink-Hook/blob/master/pre-commit-kitchen-sink-hook.pl)。使用 Perl 5.14 的人弹出了一条神秘的错误消息，这在早期版本的 Perl 中是没有的：

```
(in cleanup) Non existant subroutine called Section::File::DESTROY at /home/tftung/svn_repos/hooks/pre-commit-kitchen-sink-hook.pl line 282 
```

首先让我印象深刻的是*nonexistent*的拼写错误。小子，那家伙根本不会拼音！这几乎和……我的拼写一样糟糕……等一下……

在我的代码的第 1251 行，这是来自我的`AUTOLOAD`子程序：

```
croak qq(Non existant subroutine called $AUTOLOAD); 
```

是的，这就是错误行。

这在 Perl 5.12 中没有发生，这是我在 Mac 上使用的，并且在我的 PC 上具有草莓和 ActiveState 两种风格。从 Perl 5.8 到 5.10 的企业 Linux 机器也不会发生这种情况。

看起来 Perl 正在调用`DESTROY`，并且它正在被我的子例程拾取`AUTOLOAD`，并且由于在我的包中`DESTROY`是*不存在*`AUTOLOAD`的子例程，因此子例程会显示此错误消息。

*   这是新版本 Perl 中的错误还是功能？看来 AUTOLOAD 接听对 DESTROY 的呼叫是相当新*的功能*。
*   我应该如何解决这个问题？我的意思是除了摆脱我的 AUTOLOAD 子程序，这可能是正确的答案。我计划从头开始完全重写这个脚本，所以我宁愿不做很多工作。
    *   我可以编写一个`DESTROY`什么都不做的子程序。
    *   我可以让我的`AUTOLOAD`例行程序忽略对`DESTROY`.

处理此问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T20:04:48.837

这应该一直发生。如果您过去没有发生这种情况，那么 perl 中可能存在与您的代码交互的错误，导致 DESTROY 不被调用。但在 5.14 中，它按设计工作。AUTOLOAD 潜艇通常会做一些事情`return if $AUTOLOAD =~ /::DESTROY$/`来避免任何破坏问题。

拥有显式`sub DESTROY { }`比通过 调度更快`AUTOLOAD`，但如果您有任何超类并且您的任何超类都有`DESTROY`方法（它们不会运行），那么这是错误的做法。因此，我认为这是一个坏习惯，即使对于不继承任何东西的类也是如此。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T19:05:07.303

它确实发生在 5.12 中。5.10.1 是我拥有的最古老的版本，它也发生在那里。

```
>perl5101-ap1007\bin\perl -wE"sub AUTOLOAD { say $AUTOLOAD; } our $x=bless({});"
main::DESTROY

>perl5121-ap1201\bin\perl -wE"sub AUTOLOAD { say $AUTOLOAD; } our $x=bless({});"
main::DESTROY

>perl5123-ap1204\bin\perl -wE"sub AUTOLOAD { say $AUTOLOAD; } our $x=bless({});"
main::DESTROY

>perl5124-ap1205\bin\perl -wE"sub AUTOLOAD { say $AUTOLOAD; } our $x=bless({});"
main::DESTROY

>perl5140-ap1400\bin\perl -wE"sub AUTOLOAD { say $AUTOLOAD; } our $x=bless({});"
main::DESTROY

>perl5142-ap1402\bin\perl -wE"sub AUTOLOAD { say $AUTOLOAD; } our $x=bless({});"
main::DESTROY

>perl5161-ap1601\bin\perl -wE"sub AUTOLOAD { say $AUTOLOAD; } our $x=bless({});"
main::DESTROY 
```

# ios - ARC自定义委托奇怪的问题

> ID：14402257
> 
> 赞同：0
> 
> 时间：2013-01-18T15:35:44.670
> 
> 标签：ios, ipad, uiviewcontroller, delegates, automatic-ref-counting

好的，所以在这里我有一个奇怪的问题，我在过去的几个小时里一直试图弄清楚：

我有一个简单的 iPad 故事板应用程序，有两个视图控制器，`FirstViewController`一个是主视图控制器，一个`ModalViewController`出现在 Modal segue 上，它有一个名为 Done 的按钮。我正在使用 ARC，并且视图控制器被指定用于 iPad。

我也有一个自定义委托`UIModalViewControllerDelegate`，正如您猜想的那样，它是关闭模式并将数据传递回第一个视图控制器。

**UIModalViewControllerDelegate.h**

```
@protocol UIModalViewControllerDelegate <NSObject>
@required
-(void)btnDonePressed:(id)sender Values:(NSArray *)values;
@end 
```

**第一视图控制器.h**

```
@interface FirstViewController : UIViewController <UIModalViewControllerDelegate> {    
@private
    ModalViewController *mvc;
}
@end 
```

**第一视图控制器.m**

```
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
// Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view.
}

-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {
    mvc = [segue destinationViewController];
    mvc.delegate = self;
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

#pragma UIModalViewControllerDelegate

-(void)btnDonePressed:(id)sender Values:(NSArray *)values {
        ...
} 
```

**模态视图控制器.h**

```
@interface ModalViewController : UIViewController {
    __weak id<UIModalViewControllerDelegate> delegate;
}

@property (weak, nonatomic) id<UIModalViewControllerDelegate> delegate; 
```

**模态视图控制器.m**

```
@implementation ModalViewController

@synthesize delegate;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view.
    self.navigationItem.rightBarButtonItem = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemDone target:self action:@selector(buttonPressed:)];
}

-(void) buttonPressed:(id) sender {
    [delegate btnDonePressed:sender Values:values];
} 
```

现在，有几个非常有趣的问题：

1-在准备segue中，在我设置`self.mvc.delegate = self;`调试器后显示委托仍然为零（！）但是，当我使用时，`NSLog(@"%@", self.mvc.delegate);`我得到了不是零的指针的地址。

2- 上面的代码不起作用，因为在`ModalViewController`委托中总是为零。因此，`[delegate btnDonePressed:sender Values:values];`永远不会执行。我尝试了所有我知道的可能会导致此问题的方法，但似乎没有任何效果。

3-我想对委托有一个强引用可能会解决这个问题，但我不想违反模式并导致保留周期问题。中的私有变量是否`ModalViewController *mvc;`存在`FirstViewController`生命周期问题？私有变量何时被取消？顺便说一句，我也尝试用它替换它，`@property (strong, nonatomic) ModalViewController *mvc;`但没有任何改变。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T09:17:04.020

谢谢大家的回答。我终于找到了解决这个问题的方法。

实际上，代码是完全正确的。问题是`UINavigationController`，其中嵌入了模态视图控制器。

代替

```
myModalWindowViewController = [segue destinationViewController];
myModalWindowViewController.delegate = self; 
```

我愿意

```
UINavigationController *navigationController = [segue destinationViewController];
myModalWindowViewController = (MyModalWindowViewController *)[navigationController.viewControllers objectAtIndex:0];
myModalWindowViewController.delegate = self; 
```

我不知道当您选择嵌入在 NavigationController 中的 ViewController 时，DestinationViewController 是 NavigationController 而不是 ViewController。我的错！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T17:34:14.557

> “我只是在这里复制了错误的版本。但是，这并不能解决问题。（我更新了上面的代码）”

既然你提到了复制粘贴。确保原始代码中有一个`@synthesize`。这个问题看起来像是合成属性与私有变量名称不匹配。

```
@property (weak, nonatomic) id<UIModalViewControllerDelegate>delegate; 
```

与 结合声明的属性`@synthesize`将使用名为 的私有变量`delegate`。如果您不小心遗漏了`@synthesize`一个具有名称的私有变量，`_delegate`则会自动创建（注意下划线）。

在您的`buttonPressed:`方法中，您可以直接访问私有变量`delegate`。所以这可能总是返回 nil 因为访问器实际上使用下划线版本。

只是为了确保，要么删除手动声明的变量，要么在您的方法中`delegate`使用。走着瞧吧。`self.delegate``buttonPressed:`

# wpf - 两种方式绑定：复选框的组合框 - 工作但不是

> ID：14402259
> 
> 赞同：2
> 
> 时间：2013-01-18T15:35:54.600
> 
> 标签：wpf, data-binding, 2-way-object-databinding

我有一个填充有复选框的组合框。

ComboxBox 的 ItemsSource 绑定到要绑定复选框的对象列表；一个视图模型。视图模型是一个简单的对象（MultiSelectDropDownItem 类型），它有一个布尔字段名称 Selected。

现在，ItemsSource 以编程方式设置。这可以; 绑定视图模型的复选框的属性都已正确填充，如果我选中/取消选中复选框，则更改会反映在视图模型中。所以对我来说，双向绑定是有效的。

问题是当我在别处更新这些 MultiSelectDropDownItems 之一的 Selected 属性时。该属性触发一个 PropertyChanged 事件，但这次更改未反映在复选框中。

我已经研究这个很久了，在我的一生中，我无法弄清楚为什么没有更新更改 - 为什么 PropertyChanged 事件没有更新 CheckBox，即使复选框后面的对象已经有了它属性变了？

XAML：

```
<ComboBox x:Name="FieldOptions"
                  ItemsSource="{Binding UpdateSourceTrigger=PropertyChanged}"
                  HorizontalAlignment="Stretch"     
                  Height="30"
                  KeyDown="FieldOptions_OnKeyDown">
            <ComboBox.ItemTemplate>
                <DataTemplate>
                    <CheckBox Name="checkbox"
                              Content="{Binding Path=Text}" 
                              Uid="{Binding Path=ID}"
                              IsChecked="{Binding Path=Selected, Mode=TwoWay}"
                              FontStyle="Normal"
                              Foreground="Black"
                              Checked="CheckBox_OnChecked"
                              Unchecked="CheckBox_Unchecked"/>
                </DataTemplate>
            </ComboBox.ItemTemplate>
        </ComboBox> 
```

代码隐藏（请原谅 VB-不是我的选择！）：

```
Dim items As List(Of MultiSelectDropDownItem) = CreateDropdownItems()
FieldOptions.ItemsSource = items

''' <summary>
''' Represents an item for a Multi-Select drop-down control; a 'View-Model' for combo-items.
''' </summary>
''' <remarks>LN - 08/01/2013</remarks>
Private Class MultiSelectDropDownItem
    Inherits clsTemplateControlText
    Implements INotifyPropertyChanged

    Private _selected As Boolean

    Public Property Selected() As Boolean
        Get
            Return _selected
        End Get
        Set(value As Boolean)
            If (value <> _selected) Then
                _selected = value
                RaiseEvent PropertyChanged(Me, New PropertyChangedEventArgs(value))
            End If
        End Set
    End Property

    Public Sub New(ByVal tct As clsTemplateControlText, ByVal selected As Boolean)
        ID = tct.ID
        ControlID = tct.ControlID
        Text = tct.Text
        ParentID = tct.ParentID
        ItemOrder = tct.ItemOrder
        _selected = selected
    End Sub

    Public Event PropertyChanged As PropertyChangedEventHandler Implements INotifyPropertyChanged.PropertyChanged
End Class 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T15:48:03.850

虽然不是 VB 专家，但我想我发现了问题所在：

```
RaiseEvent PropertyChanged(Me, New PropertyChangedEventArgs(value)) 
```

应该是这样的

```
RaiseEvent PropertyChanged(Me, New PropertyChangedEventArgs("Selected")) 
```

后来我从VB 选项卡上的这个 msdn[链接确认了我的猜测](http://msdn.microsoft.com/en-us/library/ms743695.aspx?cs-save-lang=1&cs-lang=vb#code-snippet-1)

# ios - 使用对象过滤 NSSet 以获取具有最大属性值的对象

> ID：14402260
> 
> 赞同：0
> 
> 时间：2013-01-18T15:35:56.177
> 
> 标签：ios, objective-c, core-data, filtering

我有一个复杂对象的 NSSet，称为`messages`. 每条消息都有一个属性`dateCreated`。

我只是想以`dateCreated`一种有效的方式获取最大值的消息。

我仍然可以使用 KVC 获得最大日期： `NSDate *d = [messages valueForKeyPath:@"@max.dateCreated"];`

我认为这是错误的方式来要求最大值，而不是循环选择正确的消息。

也许我的对象来自 Core Data 会有所帮助？有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T17:09:29.593

如果你使用 Core Data，你应该运行一个 fetch 请求，按创建日期排序，然后返回第一个项目。这段代码未经测试，但它应该是这样的：

```
- (MyEntity *)newestMyEntityInContext:(NSManagedObjectContext *)context
{
    NSFetchRequest *request = [NSFetchRequest fetchRequestWithEntityName:@"entity"];
    [request setSortDescriptors:@[[NSSortDescriptor sortDescriptorWithKey:@"dateCreated"
                                                                ascending:NO]]];
    [request setFetchLimit:1];

    NSError *error = nil;
    NSArray *results = [context executeFetchRequest:request
                                              error:&error];

    if (!results) {
        NSLog(@"%@", error);
        return nil;
    }

    return results.count ? results[0] : nil;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T17:11:09.900

由于无论如何您都需要遍历对象，因此只需使用快速枚举：

```
// Find the object with the maximum value for dateCreated
// Of course, replace both NSObject's with the appropriate class
NSObject *maxObject;
for (NSObject *object in messages)
{
    if ([object.dateCreated laterDate:maxObject.dateCreated]))
        maxObject = object;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-04-27T09:32:07.130

如果您只有一个 NSSet 并且不使用 CoreData，则以下方法有效：

```
NSSortDescriptor *dateDescriptor = [[NSSortDescriptor alloc] initWithKey:@"dateCreated" ascending:YES];
NSArray *sortDescriptors = @[ dateDescriptor ];
NSArray *sortedArray = [messages sortedArrayUsingDescriptors:sortDescriptors];

if (sortedArray.count>0)
{
   id oldestMessage = [sortedArray firstObject];
   id newestMessage = [sortedArray lastObject];
} 
```

# ios - DDMathParser：如何定义变量的默认值

> ID：14402266
> 
> 赞同：2
> 
> 时间：2013-01-18T15:36:29.400
> 
> 标签：ios, objective-c, parsing, nsdictionary, nspredicate

我`DDMathParser`用来解析公式并计算结果，效果很好。

**问题：**

如果替换字典中不存在变量，是否可以将变量设置为默认值？

**例子：**

我的公式`$a + $b`需要两个变量`$a`和`$b`. 但是，我的替换字典仅包含变量 key 的值`a`（例如 1），但不包含 key `b`。

将变量定义为默认值并避免解析错误消息的首选方法`b`是`0`什么`"unable to resolve variable"`？

谢谢！

## 编辑

我使用的方法`DDMathParser`是循环多个公式并为每个公式提供相同的变量替换字典。有时，我没有变量的值：在这种情况下，变量（键和值）不会包含在字典中。

根据公式本身，如果其中一个变量不存在，我想`nil`作为公式的结果返回（例如，我没有值`profit`并且公式是`$profit / $revenue`，我想返回`nil`可以转换为`NSString`或`n/a`稍后）或将变量设置为，`0`如果它在字典中不存在（例如，对于类似 的公式`$profitA + $profitB + $profitC`，我想假设`0`任何缺少的变量（`$profitA`或`$profitB`）`$profitC`。

出于这个原因，我不能使用总是返回`0`or的通用解决方案，`nil`但需要将此逻辑放入公式中（例如，作为自定义函数）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T15:42:06.690

首先用适当的默认值初始化替换字典，然后用任何实际值更新它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-19T04:29:52.980

DDMathParser 作者在这里。

> 如果替换字典中不存在变量，是否可以将变量设置为默认值？

有点儿。您可以通过向`variableResolver`数学评估器提供一个块来做到这一点：

```
DDMathEvaluator *evaluator = [DDMathEvaluator sharedMathEvaluator];
[evaluator setVariableResolver:^(NSString *variable) { return @0; }];
NSNumber *n = [evaluator evaluateString:myString withSubstitutions:mySubstitutions]; 
```

每当评估器遇到在替换字典中找不到的变量时，都会执行变量解析器块。

> 向 DDMathParser 添加一个自定义函数是否可行，例如 defaultZero($b) 如果变量 b 存在则检索变量 b 如果不存在则检索为零？

嗯，聪明的主意。你可以，但你基本上是通过模仿 variableResolver 块的行为。您将创建一个新`DDMathFunction`块并使用`-[DDMathEvaluator registerFunction:forName:]`告诉评估者它。

但是，我建议只提供一个变量解析器块。会简单很多。

* * *

以下是您如何定义一个`defaultZero`返回参数值或`0`（如果参数无法评估）的函数：

```
DMathEvaluator *evaluator = [DDMathEvaluator sharedMathEvaluator];
[evaluator registerFunction:^DDExpression *(NSArray *args, NSDictionary *vars, DDMathEvaluator *eval, NSError *__autoreleasing *error) {
    NSNumber *argValue = nil;
    if ([args count] == 1) {
        // defaultZero() only supports a single argument
        // for anything else, return 0
        DDExpression *arg = [args objectAtIndex:0];
        NSError *argError = nil;
        argValue = [eval evaluateExpression:arg withSubstitutions:vars error:&argError];
    }

    if (argValue == nil) {
        // return 0 if either the arg can't be eval'd or there isn't 1 arg
        argValue = @0;
    }
    return [DDExpression numberExpressionWithNumber:argValue];

} forName:@"defaultZero"]; 
```

# constraints - XForms - 节点集的约束

> ID：14402267
> 
> 赞同：1
> 
> 时间：2013-01-18T15:36:29.600
> 
> 标签：constraints, bind, xforms

在使用 XForms 编辑 XML 文档时，我需要验证一个条件。

完整的示例网页如下所示。

我想验证两件事

1.  'v' 元素内的值是整数
2.  v 的每个值都小于“max”元素内的值（因此示例文档不应通过验证，因为 /doc/values/rec[3] 内的值是 4，大于 /doc/max 内的 3。

我不知道如何设置 xf:bind 的属性使用这个：

```
<xf:bind id="bindv" 
         nodeset="instance('i1')/values/rec/v" 
         type="integer" /> 
```

和

```
<xf:input bind="bindv"> 
```

导致 xf:input 仅编辑第一个“v”。

```
<html xmlns="http://www.w3.org/1999/xhtml" 
      xmlns:ev="http://www.w3.org/2001/xml-events" 
      xmlns:xf="http://www.w3.org/2002/xforms">
    <head>        
        <xf:model>
            <xf:instance xmlns="" id="i1">
                <doc>
                    <max>3</max>
                    <values>
                        <rec>
                            <v>1</v>
                        </rec>
                        <rec>
                            <v>2</v>
                        </rec>
                        <rec>
                            <v>4</v>
                        </rec>
                    </values>
                </doc>
            </xf:instance>          
        </xf:model>     
    </head>
    <body>
        <div>
            <table>
                <thead>
                   <th>Value</th>                                        
                </thead>    
                <tbody id="values-repeat" 
                    xf:repeat-nodeset="instance('i1')/values/rec">
                    <tr>
                       <td>
                           <xf:output ref="v" />
                       </td>                       
                    </tr>
                </tbody>                  
            </table>  

            <xf:group ref="instance('i1')/values/rec[index('values-repeat')]" 
               appearance="full">               
                <xf:input bind="bindv">
                   <xf:label>v:</xf:label>
               </xf:input>
            </xf:group>
        </div>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T00:59:10.000

与大多数 XForms 控件一样，该`xf:input`控件执行规范所称的“单节点绑定”。如果它绑定到包含多个节点的节点集，它会绑定到第一个。（您已经注意到这一点。）问题不在于绑定元素，就目前而言这很好，而在于使用

```
<xf:input bind="bindv"/> 
```

当你的意思可能更像是

```
<xf:group ref="instance('i1')/values/rec[index('values-repeat')]" 
          appearance="full">               
    <xf:input ref="v">
        <xf:label>v:</xf:label>
    </xf:input>
</xf:group> 
```

当我`group`如上所示更改时（并更改 tbody 的处理，因为我正在使用的 XForms 处理器不支持 xf:repeat-nodeset 属性），表单显然按预期工作：存在三个值，并且一个输入小部件，当我单击其中一个值时，该值将出现在输入区域中。

请注意，您不必将输入小部件绑定到 bindv 绑定以使类型信息生效；xf:bind 元素中声明的属性适用于其节点集中的节点，当您将输入小部件绑定到这些节点之一时，它会知道这些属性。

如果您愿意，可以在 xf:repeat 上使用绑定上的 ID。例如，tbody 可以这样表示：

```
<tbody>
    <xf:repeat bind="bindv" id="values-repeat" >
        <tr>
            <td>
                <xf:output ref="." />
            </td>                       
        </tr>
    </xf:repeat>
</tbody> 
```

要添加值应严格小于 的值的约束`instance('i1')/max`，您可以使 xf:bind 如下所示：

```
<xf:bind id="bindv" 
         nodeset="instance('i1')/values/rec/v" 
         type="integer"
         constraint=". &lt; ../../../max"
         /> 
```

请注意，用于评估`constraint`属性中 XPath 表达式的上下文节点是节点集的（或：当前）成员。

当我添加`constraint`属性时，当我使用 XForms 处理器加载文档时，会针对第三个值出现错误信号。

# java - Javadoc 继承父构造函数文档

> ID：14402275
> 
> 赞同：15
> 
> 时间：2013-01-18T15:37:02.887
> 
> 标签：java, oop, inheritance, javadoc

考虑到我正在扩展一个类，例如：

```
public class MyComboBox<T> extends JComboBox<T> {

    public MyComboBox() {
        super();
    }

    public MyComboBox(ComboBoxModel<T> model ) {
        super(model);
    }

} 
```

重新定义父类的构造函数（当然，这适合我的新类）很烦人，但还要复制每个构造函数的文档就更糟了。更不用说这对进一步继承不利，因为我现在必须多次更新文档。

显然，`{@inheritDoc}`不会工作，因为我没有覆盖任何东西。然而，这是我正在寻找的行为。有什么办法可以做到这一点？

**如何继承父构造函数文档？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T15:47:35.957

使用 @see 标记并放置类和成员名称。要了解它是如何显示的，请查看[JDocs](http://www.jdocs.com)，您可以在其中从 javadoc 跳转到源代码。

确切的语法是：

```
 @see com.x.y.z.ClassName#methodName() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-11T20:08:33.430

您不能覆盖构造函数，因此无需传播 javadocs。只需解释您的对象的客户需要了解该特定构造函数如何构造该对象。如果它只是将构造传递给扩展对象，那么就这么说吧。

# c# - 过滤时更改 ListView 中项目的属性时出现问题

> ID：14402277
> 
> 赞同：2
> 
> 时间：2013-01-18T15:37:07.900
> 
> 标签：c#, wpf, listview, filter, collectionview

我有一个可以过滤的项目列表。Item 类有一个属性 IsChecked。有时，如果我在过滤列表时更改此属性（在运行时通过复选框），它不会在我的源集合中更改它。我做错了吗？

```
public class ViewModel 
{
     private ObservableCollection<Item> _items;
     public ListCollectionView ItemsView { get; private set; }
     private bool _checkAll;

     public bool CheckAll
     {
          get
          {
               return _checkAll;
          }
          set
          {
               if (_checkAll == value)
                    return;

               _checkAll = value;

               if (_checkAll)
               {
                    foreach (Item i in ItemsView )
                         i.IsChecked = true;
               }
               else
               {
                    foreach (Item i in ItemsView )
                         i.IsChecked = false;
               }

               OnPropertyChanged("CheckAll");
          }
     }

     public ViewModel()
     {
          _items= new ObservableCollection<Item>(this.createList());
          ItemsView = CollectionViewSource.GetDefaultView(_items) as ListCollectionView;
          ItemsView.Filter = filter;
     }

     private void filter(object obj)
     {
          ...
     }

}

public class Item
{
     private bool _isChecked;

     public Item()
     {
     }

     public bool IsChecked
     {
          get {return _isChecked; }
          set
          {
               if (_isChecked == value)
                    return;
               _isChecked = value;
               OnPropertyChanged("IsChecked");
          }
     }

     ...
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T19:02:12.293

我认为您的代码没有任何问题，让我解释一下：

当您执行此操作时：

```
foreach (Item i in ItemsView )
     i.IsChecked = true; 
```

您仅为 ListView 当前显示的项目（即仅通过过滤器的项目）设置 IsChecked 属性为 true。

如果您想将 ObservableCollection _items 中的所有元素设置为 true 或 false，您可以通过两种不同的方式实现此目的：

```
foreach (Item i in _items) //enumerate the private ObservableCollection
     i.IsChecked = true; 
```

或者

```
foreach (Item i in ItemsView.SourceCollection) //enumerate the underlying ObservableCollection
     i.IsChecked = true; 
```

如果 Item 类实现 INotifyPropertyChanged，则 UI 应该毫无问题地反映更改。

* * *

编辑1（基于下面的讨论）：

检查/取消检查您的项目的另一种方法是：

```
public bool CheckAll
 {
      get { return _checkAll; }
      set
      {
           if (_checkAll == value)
                return;

           _checkAll = value;

           _items.Where(ItemsView.Filter.Invoke).Select(i=>i.IsChecked=_checkAll);

           OnPropertyChanged("CheckAll");
      }
 } 
```

枚举 ListView 应该可以正常工作，但由于这不是一种解决方法，因此可以直接使用您的集合，但要考虑到过滤后的元素。

* * *

希望这会有所帮助，问候！

# javascript - jQuery 与 Javascript 点击

> ID：14402278
> 
> 赞同：0
> 
> 时间：2013-01-18T15:37:13.477
> 
> 标签：javascript, jquery, onclick

我已经阅读了许多主题如何处理 Javascript 的 onclick vs Jquery;s .click()，但我不知道如何使用 jQuery 传递参数。

第一个选项 - Javascript、HTML

```
The HTML

<input type="button" onclick="doAction(<?=$id?>,'order');" /> 
```

因此在 JS 中我可以做到

```
function doAction(id,type){

 //do something here

} 
```

第二个选项 - jQuery，HTML

```
The HTML

<input type="button" id="trigger" /> 
```

所以jQuery变成了

```
$("#trigger").click(function() {

   //do something here

 }); 
```

我是否必须做类似的事情（在这种情况下，我如何知道 id 和 type 的值？）

```
 $("#trigger").click({id: "???", type: "????"}, other_function);

  function other_function(event){
     id = event.data.param1;
     type = event.data.param2;
   } 
```

我是否必须通过使用“传递参数”

```
 HTML
  <input type="hidden" id="id" value="<?=$id?>" />
  <input type="hidden" id="type" value="order" />

  jQuery

   $("#trigger").click(function(){
      var id = $("#id").val();
      var type = $("#type").val();
      //do something

   }); 
```

我想避免使用 onclick() ，因为我已经读到应该避免使用它。我只需要一种合适的方式来传递参数，就像我使用 onclick() 所做的那样。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-18T15:39:57.440

您可以使用数据将[data()](http://api.jquery.com/jQuery.data/)传递给事件。

**[现场演示](http://jsfiddle.net/rajaadil/gvTmA/)**

```
 <input type="hidden" id="id" data-idatt="123" />
 <input type="hidden" id="type" value="order" />

 $("#trigger").click(function(){
    var id = $("#id").data("idatt").val();
 }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T15:44:36.453

```
$("#myElement").click({ "a": 1, "b": 2 }, function (e) {
    alert(e.data.a); // alerts 1
    alert(e.data.b); // alerts 2
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T15:42:01.020

使用 chrome 打开控制台并尝试这个

```
$(#trigger);
$(#trigger).click(function(e) {
  console.log(
               $(this),
               $(this).attr('type') 
             );
}); 
```

该函数有一个名为 this 的隐藏变量，它是您触发事件的元素。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-18T15:41:16.780

您不需要从外部获取参数，也不需要隐藏字段

```
$("#trigger").click(function(){
      var id = <?=$id?>;
      //do something
   }); 
```

# javascript - 使用文本字段中的字符填充参数

> ID：14402285
> 
> 赞同：-1
> 
> 时间：2013-01-18T15:37:35.123
> 
> 标签：javascript, html

只是一个快速的 - 如果我有这样的链接（REST）：

```
http://request.com/action.jsp?parameter={{insert}} 
```

我将如何添加一些 JavaScript 来使用文本字段中的文本填充参数？

我将只有一个小文本框，我可以输入“TRUE”之类的内容，当我点击按钮时，它会将链接转换为：

```
http://request.com/action.jsp?paramter=TRUE 
```

并执行链接。

我应该使用什么？我在想 getElementByID 会起作用吗？我可以将所有这些放在 a 中并使用以下代码吗？

```
document.getElementById("htmlDiv").innerHTML = document.getElementById("htmlText").value; 
```

但是我如何将文本框中的值放入我的链接中，使该值成为变量？任何帮助表示赞赏，尝试学习 JavaScript 并在工作中做一个项目:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T15:44:49.803

像这样的东西应该工作：

```
var link = document.getElementById('linkid'),
  textBox = document.getElementById('textInputId');
function setLinkParam() {
  link.href = 'http://request.com/action.jsp?parameter=' + textBox.value;
}
textBox.addEventListener('change', setLinkParam); 
```

# javascript - 从按钮获取数据单击自动生成的按钮 - jQuery 对话框

> ID：14402286
> 
> 赞同：1
> 
> 时间：2013-01-18T15:37:36.853
> 
> 标签：javascript, jquery, jquery-ui, jquery-dialog

我需要能够获取在 jQuery 对话框上单击的按钮的上下文。

我有一个函数可以自动创建一个带有我传递的按钮名称数组的对话框。函数看起来像这样。

```
function setAutoDialog(buttonNameArray){
    var testArray = buttonNameArray;
    var passDataBack = function () {
        var test = $('.getButtonClicked').text(); // NEED THE TEXT FROM THE BUTTON THAT WAS CLICKED HERE
        $(this).dialog("close");
    }
    var myButtons = {};

    for(var i=0; i<testArray.length; i++){
        myButtons[testArray[i]] = passDataBack;
    }

    $('#autoDialog').dialog({
        autoOpen: false,
        dialogClass: 'autoDialog',
        width: 'auto',
        buttons : myButtons
    });
} 
```

我不确定我需要使用什么选择器来获取在对话框上单击的按钮的值。例如，如果您有一个名为“取消”的按钮，当我单击“取消”时，我需要获取该文本并对所述文本执行操作。（将其传递回主屏幕）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T15:45:10.297

在这种情况下，我使用回调函数

按钮：[{标签：“关闭”，回调：函数（）{App.ModalDialog.close（）；} // 回调
} ]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T15:54:28.680

弄清楚了。

在您的处理程序上，将 click 事件传递给函数。像这样。

```
$('#button1').live('click', function () {    
    setAutoDialog(buttonArray, $(this));
    $( "#autoDialog" ).dialog("open");
}); 
```

然后在您的函数中引用该事件并从目标中获取 textContent。

```
function setAutoDialog(buttonNameArray, clickEvent){
    var testArray = buttonNameArray;
    var passDataBack = function (clickEvent) {
        var t2 = clickEvent.target.textContent;

        $(this).dialog("close");
    }
    var myButtons = {};

    for(var i=0; i<testArray.length; i++){
        myButtons[testArray[i]] = passDataBack;
    }

    $('#autoDialog').dialog({
        autoOpen: false,
        dialogClass: 'autoDialog',
        width: 'auto',
        buttons : myButtons
    });
} 
```

# java - Equinox java.lang.NoClassDefFoundError

> ID：14402287
> 
> 赞同：1
> 
> 时间：2013-01-18T15:37:43.180
> 
> 标签：java, jaxb, osgi, equinox

我正在运行一个非常简单的 osgi 包，它的激活器看起来像这样

```
 public void start(BundleContext bundleContext) throws Exception {
    JAXBContext con =  JAXBContext.newInstance(Activator.class);
 } 
```

这总是抛出异常

```
org.osgi.framework.BundleException: Exception in com.test.bundle.Activator.start() of bundle com.test.bundle.
at org.eclipse.osgi.framework.internal.core.BundleContextImpl.startActivator(BundleContextImpl.java:734)
at org.eclipse.osgi.framework.internal.core.BundleContextImpl.start(BundleContextImpl.java:683)
at org.eclipse.osgi.framework.internal.core.BundleHost.startWorker(BundleHost.java:381)
at org.eclipse.osgi.framework.internal.core.AbstractBundle.resume(AbstractBundle.java:390)
at org.eclipse.osgi.framework.internal.core.Framework.resumeBundle(Framework.java:1177)
at org.eclipse.osgi.framework.internal.core.StartLevelManager.resumeBundles(StartLevelManager.java:559)
at org.eclipse.osgi.framework.internal.core.StartLevelManager.resumeBundles(StartLevelManager.java:544)
at org.eclipse.osgi.framework.internal.core.StartLevelManager.incFWSL(StartLevelManager.java:457)
at org.eclipse.osgi.framework.internal.core.StartLevelManager.doSetStartLevel(StartLevelManager.java:243)
at org.eclipse.osgi.framework.internal.core.StartLevelManager.dispatchEvent(StartLevelManager.java:438)
at org.eclipse.osgi.framework.internal.core.StartLevelManager.dispatchEvent(StartLevelManager.java:1)
at org.eclipse.osgi.framework.eventmgr.EventManager.dispatchEvent(EventManager.java:230)
at org.eclipse.osgi.framework.eventmgr.EventManager$EventThread.run(EventManager.java:340)
 Caused by: java.lang.NoClassDefFoundError: javax/xml/bind/JAXBContext
at com.test.bundle.Activator.start(Activator.java:26)
at org.eclipse.osgi.framework.internal.core.BundleContextImpl$1.run(BundleContextImpl.java:711)
at java.security.AccessController.doPrivileged(Native Method)
at org.eclipse.osgi.framework.internal.core.BundleContextImpl.startActivator(BundleContextImpl.java:702)
... 12 more
 Caused by: java.lang.ClassNotFoundException: javax.xml.bind.JAXBContext
at org.eclipse.osgi.internal.loader.BundleLoader.findClassInternal(BundleLoader.java:501)
at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:421)
at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:412)
at org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.loadClass(DefaultClassLoader.java:107)
at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
... 16 more 
```

我正在运行 java 版本“1.6.0_37”。这些是我正在运行的捆绑包

```
id  State       Bundle
0   ACTIVE      org.eclipse.osgi_3.8.0.v20120529-1548
1   ACTIVE      org.eclipse.core.runtime_3.8.0.v20120521-2346
2   ACTIVE      org.ops4j.pax.logging.pax-logging-api_1.7.0
3   RESOLVED    com.test.bundle_1.0.0.201301181429
4   ACTIVE      org.eclipse.equinox.common_3.6.100.v20120522-1841
5   ACTIVE      org.eclipse.equinox.console_1.0.0.v20120522-1841  
6   ACTIVE      org.apache.felix.gogo.runtime_0.8.0.v201108120515
7   ACTIVE      org.apache.felix.gogo.shell_0.8.0.v201110170705
8   ACTIVE      org.apache.felix.gogo.command_0.8.0.v201108120515
9   ACTIVE      org.eclipse.core.jobs_3.5.300.v20120622-204750
10  ACTIVE      org.eclipse.equinox.registry_3.5.200.v20120522-1841
11  ACTIVE      org.eclipse.equinox.preferences_3.5.0.v20120522-1841
12  ACTIVE      org.eclipse.core.contenttype_3.4.200.v20120523-2004
13  ACTIVE      org.eclipse.equinox.app_1.3.100.v20120522-1841 
```

javax.xml 不是随 java 1.6 一起提供的吗？我也尝试添加 javax.xml 包，但这并没有解决问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T15:51:49.053

您需要确保`javax.xml.bind`在文件中导入包或 JAXB 公共 API 包`META-INF/MANIFEST.MF`。

**OSGi 示例（MOXy 用作 JAXB (JSR-222) 提供程序）**

*   [Karaf 的 Moxy 错误](https://stackoverflow.com/questions/12942750/moxy-error-with-karaf/12943115#12943115)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-25T16:00:53.950

我有一个类似的问题，并设法使用 AccessController.doPrivileged 解决它，如下所示：

```
public void start(BundleContext bundleContext) throws Exception {

    JAXBContext con =  AccessController.doPrivileged(new PrivilegedExceptionAction<JAXBContext>() {

        public JAXBContext run() throws JAXBException {

            // needs to run here otherwise throws AccessControlException
            return JAXBContext.newInstance(Activator.class);
        }
    });         
} 
```

希望能帮助到你

# python - python中的XML解析器

> ID：14402289
> 
> 赞同：0
> 
> 时间：2013-01-18T15:37:47.893
> 
> 标签：python, xml-parsing

我是 Python 新手。我正在尝试在 python 中解析下面的 XML 以获取测试摘要。

```
<?xml version="1.0"?>
<SquishReport version="2.1">
  <test name="HMI_testing">
    <prolog time="2013-01-18T14:41:09+05:30"/>
    <test name="tst_case1">
      <prolog time="2013-01-18T14:41:09+05:30"/>
      <verification name="VP5" file="D:/Squish/HMI_testing/tst_case1/test.py" type="properties" line="6">
        <result time="2013-01-18T14:41:10+05:30" type="PASS">
          <description>VP5: Object property comparison of ':_QMenu_3.enabled' passed</description>
          <description type="DETAILED">'false' and 'false' are equal</description>
          <description type="object">:_QMenu_3</description>
          <description type="property">enabled</description>
          <description type="failedValue">false</description>
        </result>
      </verification>
      <epilog time="2013-01-18T14:41:11+05:30"/>
    </test>
    <test name="tst_Setup_Menu"> <prolog time="2013-01-18T14:41:11+05:30"/>
      <verification name="VP1" file="D:/Squish/HMI_testing/tst_Setup_Menu/test.py" type="screenshot" line="6">
        <result time="2013-01-18T14:41:12+05:30" type="PASS">
          <description>VP1: Screenshot comparison of ':_QMenu_3' passed</description>
          <description type="DETAILED">Screenshots are considered identical</description>
          <description type="object">:_QMenu_3</description>
          <description type="failedImage">Screenshots are considered identical</description>
        </result>
      </verification>
      <verification name="VP2" file="D:/Squish/HMI_testing/tst_Setup_Menu/test.py" type="screenshot" line="8">
        <result time="2013-01-18T14:41:16+05:30" type="FAIL">
          <description>VP2: Screenshot comparison of ':_QMenu_3' failed</description>
          <description type="DETAILED">Screenshots do not match. Differing screenshot saved as 'D:/Squish/HMI_testing/tst_Setup_Menu/verificationPoints\failedImages\failed_1.png'</description>
          <description type="object">:_QMenu_3</description>
          <description type="failedImage">D:/Squish/HMI_testing/tst_Setup_Menu/verificationPoints\failedImages\failed_1.png</description>
        </result>
      </verification>
      <verification name="VP3" file="D:/Squish/HMI_testing/tst_Setup_Menu/test.py" type="screenshot" line="9">
        <result time="2013-01-18T14:41:20+05:30" type="PASS">
          <description>VP3: Screenshot comparison of ':_QMenu_4' passed</description>
          <description type="DETAILED">Screenshots are considered identical</description>
          <description type="object">:_QMenu_4</description>
          <description type="failedImage">Screenshots are considered identical</description>
        </result>
      </verification>
      <epilog time="2013-01-18T14:41:28+05:30"/>
    </test>
    <epilog time="2013-01-18T14:41:28+05:30"/>
  </test>
</SquishReport> 
```

我尝试了下面的代码，但我无法根据我的需要进行解析

```
import sys
import xml.dom.minidom as XY
#import xml.etree.ElementTree as ET

file = open("result.txt", "w")
tree = XY.parse('D:\\Squish\\squish results\\Results-On-2013-01-18_0241 PM.xml')
elem = tree.getElementsByTagName('test')
variable = elem[0].firstChild.data
print (variable) 
```

我想做的是，从第一个“测试”标签中提取“HMI_testing”，“测试名称”tst_case1，并从xml文件中通过/失败

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T15:40:39.437

我推荐使用 Xpath，我已经用过好几次了，而且总是很方便而且很有帮助： [Xpath 教程](http://www.w3schools.com/xpath/xpath_examples.asp)。它也很容易使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T15:47:28.980

代替

```
variable = elem[0].firstChild.data 
```

利用

```
variable = elem[0].getAttribute('name') 
```

您不是在寻找子元素，而是在寻找属性`name`

# .htaccess - .htaccess mod rewrite - 假文件夹到路径

> ID：14402296
> 
> 赞同：0
> 
> 时间：2013-01-18T15:38:03.527
> 
> 标签：.htaccess, redirect, directory

我正在尝试使用 .htaccess 进行一些重定向，并且我已经管理了一些重定向，但不完全是我想要的。

当有人进入时，我想要类似于 facebook 的东西

> [http://www.example.com/folder](http://www.example.com/folder)

我想将它们重定向到

> [http://www.example.com/mypath/myfile.php?user=folder](http://www.example.com/mypath/myfile.php?user=folder)

其中文件夹可以是任何带有字母和数字的变量 ([A-Za-z0-9-]+)

我已经设法使它与带有扩展名的规则一起使用，例如 example.com/folder.htm，但我根本不想要任何扩展名

我找到了几个例子，但没有一个对我有用。我确定我错过了一些东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T15:42:51.203

```
Options +FollowSymlinks
RewriteEngine on
RewriteRule ^([A-Za-z0-9\-]+)$  /myfile.php?user=$1 [L,NC] 
```

我很确定这就是你想要的。

只需确保您有有效的正则表达式，您可以使用一些在线工具进行检查，只需搜索即可

顺便说一句，减号之前的反斜杠是导入的，因为它是字符集中的特殊字符。也许你忘记了

# php - 使用 PDO 在循环中优化多个 MySQL 查询

> ID：14402298
> 
> 赞同：0
> 
> 时间：2013-01-18T15:38:06.833
> 
> 标签：php, mysql, optimization, pdo

考虑以下代码片段，其中有两个 MySQL 查询作为循环的一部分被触发：

```
<?php
    $requested_names_array = ['ben','john','harry'];

    $statement_1 = $connection->prepare("SELECT `account_number` FROM `bank_members` WHERE `name` = :name");
    $requested_name = "";
    $statement_1->bindParam(":name",$requested_name); //$requested_name will keep changing in value in the loop below

    foreach($requested_names_array as $requested_name){
        $execution_1 = $statement_1->execute();
        if($execution_1){
            //fetch and process results of first successful query
            $statement_2 = $connection->prepare("SELECT `account_balance` from `account_details` WHERE `account_number` = :fetched_account_number");
            $statement_2->bindValue(":fetched_account_number",$fetched_account_number);
            $execution_2 = $statement_2->execute();
            if($execution_2){
                //fetch and process results of second successful query, possibly to run a third query
            }
        }else{
            echo "execution_1 has failed, $statement_2 will never be executed.";
        }
    }
?> 
```

这里的问题是**$statement_2 是一次又一次地准备**，而不是仅仅使用不同的参数执行。

我不知道 $statement_2 是否也可以在进入循环之前准备好，所以它只在循环中更改其参数时执行（而不是准备），就像 $statement_1 一样。

在这种情况下，您最终会首先准备好几个语句，每个语句都将在随后的循环中执行。

即使这可能，它也可能效率不高，因为如果其他语句的执行失败，某些语句将徒劳地准备。

您如何建议保持这样的结构优化？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T15:42:54.543

你应该重写为一个连接：

```
SELECT account_number, account_balance
FROM bank_members
INNER JOIN account_details ON bank_members.account_number = account_details.account_number 
```

一个查询，一次准备，一次执行，获取您需要的所有数据。

# c# - C# 公开术语

> ID：14402301
> 
> 赞同：3
> 
> 时间：2013-01-18T15:38:15.950
> 
> 标签：c#, terminology

为什么在 C#（至少来自 MSDN）中使用这个词很常见`expose`？在大多数情况下，它们似乎只是意味着某事`implement`，或类似的东西。

它的一些使用示例：

代表 -> [http://msdn.microsoft.com/en-us/library/aa288459(v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/aa288459(v=vs.71).aspx)

属性-> [http://msdn.microsoft.com/en-us/library/x9fsa0sw(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/x9fsa0sw(v=vs.80).aspx)

以这些方式使用实际上意味着什么`expose`，还是只是另一种说法`implement`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T15:39:10.510

一个类型可以在不暴露它的情况下实现某些特性（即使其可用于其他类型）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T15:42:36.637

在大多数情况下，**[expose]**可能意味着在公共图书馆的情况下使方法 n 属性可供公众使用！

在继承的情况下，**受保护的方法**或**属性*[公开]***基类

# iphone - 从 AppDelegate 导航到 ViewController？

> ID：14402310
> 
> 赞同：1
> 
> 时间：2013-01-18T15:38:31.610
> 
> 标签：iphone, ios, objective-c, ios6, appdelegate

`application:didReceiveLocalNotification:`在收到通知后，我将用户带到某个视图控制器*时，是否有首选方法？

**例如**，如果我有视图控制器 A、B、C 和 D，通知进来，应用程序正在后台运行，用户在屏幕 A、B 或 C，我需要将它们带到屏幕 D ，并在完成后返回上一个屏幕。

一种方法似乎是制作 D 的 A、B、C 代表，将它们与情节提要中的 segues 挂钩，并在 application:didReceiveLocalNotification: 中执行 performSegueWithIdentifier:，但如果我有 ex. 60个屏幕。

有没有更好/最好的方法从 AppDelegate 将视图控制器推送到屏幕上，并在用户完成后返回到用户之前所在的位置？

**请注意，如果用户当前在应用程序内，则不会发生这种情况，以免造成干扰。*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T15:51:48.087

通常这种行为最好通过模态视图控制器来实现。

但是，我不会从 appDelegate 弹出模式视图控制器，而是创建同一类的 A、B 和 C 子类。此类将具有通过显示模态视图控制器（带有 D）来处理通知的代码，当该视图控制器被关闭时，它将显示通知到来时您所在的视图控制器。

虽然我不明白你的最后一句话。如果当用户在应用程序内时不会发生这种情况，为什么还要让他回到上一个屏幕？

# php - 在 Linux 服务器上使用 nuSoap 在 Windows 服务器上发生重复传输

> ID：14402312
> 
> 赞同：0
> 
> 时间：2013-01-18T15:38:31.627
> 
> 标签：php, transfer, nusoap

我已经在 Linux 服务器上成功设置了 nuSoap，其中门户与供应商的 Windows 服务器握手。我们这边一切正常。访问者可以来自供应商网站并自动登录到我们的门户。但供应商说：“我看到重复，所以问题可能是传输被多次使用。每个请求只允许一次传输。”

我不知道他们在说什么，也不知道为什么我们这边一切正常，但他们的系统说发生了不止一次的转会。谁能指出我的任何方向？

我知道这是一个模糊的问题。但我不知道从哪里开始寻找尝试解决他们最终出现的问题。

# asp.net-mvc - ASP.Net MVC4 Root cshtml 和“不继承自 'System.Web.WebPages.WebPage”

> ID：14402315
> 
> 赞同：17
> 
> 时间：2013-01-18T15:38:44.937
> 
> 标签：asp.net-mvc, razor

我遵循了非常相似的帖子提供的答案，您将在下面列出的分步中看到。

*   [Razor 视图类型不继承自“System.Web.WebPages.WebPage”](https://stackoverflow.com/questions/10460913/razor-view-type-does-not-inherit-from-system-web-webpages-webpage)

*   [http://iamdotnetcrazy.blogspot.com/2012/08/how-to-solve-type-asppageviewstartcshtm.html](http://iamdotnetcrazy.blogspot.com/2012/08/how-to-solve-type-asppageviewstartcshtm.html)

我仍然有相同的错误消息“不继承自'System.Web.WebPages.WebPage'”

## 概述

我正在学习 Pluralsight 上 John Papa 的“使用 HTML5、Web API、Knockout 和 jQuery 的单页应用程序”。该课程概述了构建一个名为“Code Camper”的应用程序。示例 MVC4 SPA 创建一个名为“index.cshtml”的根视图。在其中进行了一系列 @RenderPage 调用。这个应用程序在我的开发机器上运行良好。但是，如果我尝试从头开始创建带有根 view.cshtml 的 MVC4 SPA，我总是会收到错误“不继承自 'System.Web.WebPages.WebPage”

## 一步步

[在这里](https://skydrive.live.com/redir?resid=EDAFB4DBECFEE2EA!4849&authkey=!ACSorle8q0hebwY)下载。

1.新建一个名为“MVC4RootView”的MVC4 Internet Project

2.在项目的根目录下，创建一个RootView.cshtml 视图。

```
@{
Layout = null;
}
<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <title></title>
</head>
<body>
    <div>
            @RenderPage("Views/Partial1.cshtml")
    </div>
</body>
</html> 
```

3.添加了一个“~/Views/Partial1.cshtml”，只有一个简单的div

```
<div>Hello from Partial 1</div> 
```

4.修改根Web.Config网页：启用为真。

```
<add key="webpages:Enabled" value="true" /> 
```

5.添加system.web.webPages.razor到根Web.config

```
<system.web.webPages.razor>
  <host factoryType="System.Web.Mvc.MvcWebRazorHostFactory, System.Web.Mvc, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
  <pages pageBaseType="System.Web.Mvc.WebViewPage">
    <namespaces>
      <add namespace="System.Web.Mvc" />
      <add namespace="System.Web.Mvc.Ajax" />
      <add namespace="System.Web.Mvc.Html" />
      <add namespace="System.Web.Optimization"/>
      <add namespace="System.Web.Routing" />
    </namespaces>
  </pages>
</system.web.webPages.razor> 
```

6.root web.config的configSections增加sectionGroup name="system.web.webPages.razor"

```
<sectionGroup name="system.web.webPages.razor"
    type="System.Web.WebPages.Razor.Configuration.RazorWebSectionGroup,
    System.Web.WebPages.Razor, Version=2.0.0.0, Culture=neutral,
    PublicKeyToken=31BF3856AD364E35">       
    <section name="host"
        type="System.Web.WebPages.Razor.Configuration.HostSection,
        System.Web.WebPages.Razor, Version=2.0.0.0, Culture=neutral,
        PublicKeyToken=31BF3856AD364E35" requirePermission="false" />
    <section name="pages"
        type="System.Web.WebPages.Razor.Configuration.RazorPagesSection,
        System.Web.WebPages.Razor, Version=2.0.0.0, Culture=neutral,
        PublicKeyToken=31BF3856AD364E35" requirePermission="false" />
</sectionGroup> 
```

7.设置RootView.cshtml为起始页

8.运行并得到以下错误：“类型'ASP._Page_RootView_cshtml'不继承自'System.Web.WebPages.WebPage'。

我不知道如何解决这个问题。Code Camper 代码运行良好。我逐行比较，发现代码中没有任何差异会阻止工作。

想法？担

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-01-19T02:06:08.037

`web.config`从您的`Views`文件夹中删除。

当您`Partial1.cshtml`从该文件夹中包含时，它还包含其中的 web.config。而那个 web.config 是说所有页面都必须从 WebViewPage 继承。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-10-16T14:19:11.593

我是这方面的初学者，但我没有意识到的一件事是 cshtml 页面是通过控制器提供的，而不是直接加载它们。

结合以上内容，我还必须在 web.config 文件中将以下键设置为 false：

```
<add key="webpages:Enabled" value="false" /> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-08-18T12:35:29.370

不要删除webconfig，在你看来是一个非常重要的文件！！！

相反，请执行以下操作：

在失败的 Web 项目中启用“查看所有文件”，然后搜索看起来正确但未包含在 Visual Studio 中的文件，然后将其删除。如果它在您的部署文件夹中失败，请尝试清理该文件夹，然后重新部署该站点，您可能有可能导致相同问题的不必要文件。

在我的例子中，在 webproject 的根目录中，我有一个额外的 _ViewStart.cshtml 副本（从项目中排除），我删除了该文件，并且成功了。

希望它有所帮助，让我知道这是否也解决了您的问题。

# powershell - 通过 Powershell 更改 ACL 时获取和错误

> ID：14402317
> 
> 赞同：1
> 
> 时间：2013-01-18T15:39:03.033
> 
> 标签：powershell, permissions, acl, fileserver

我正在编写一个小脚本，它通过添加额外的权限来修改文件夹上的 ACL；我在执行“Set-ACL”命令时遇到错误；请让我知道我做错了什么。

```
$AddAccessRule = New-Object security.accesscontrol.filesystemaccessrul("CREATOROWNER",@("ReadAndExecute,Synchronize"),"ContainerInherit,Objectinherit","Inheritonly","Allow")
$objacl = get-acl $FolderPath
$ObjAcl.AddAccessRule($AddAccessRule)
Set-acl $FolderPath $objacl 
```

当我执行它时，会发生以下错误；

使用“1”参数调用“AddAccessRule”的异常：“无法翻译部分或全部身份引用。” 在 C:\Users\kakulva\Desktop\Scripts\CreatorOwner\ACL.ps1:10 char:1 + $ObjAcl.AddAccessRule($AddAccessRule) + ~~~~~~~~~~~~~~~~~~ ~~~~~~~~~~~~~~~~~~~ + CategoryInfo : NotSpecified: (:) [], MethodInvocationException + FullyQualifiedErrorId : IdentityNotMappedException

让我知道是否需要任何疑问或澄清。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-18T15:48:00.973

这有效（或至少不返回错误）：

```
$AddAccessRule = New-Object 'security.accesscontrol.filesystemaccessrulE'("CREATOR OWNER",@("ReadAndExecute,Synchronize"),"ContainerInherit,Objectinherit","Inheritonly","Allow")
$objacl = get-acl C:\A
$ObjAcl.AddAccessRule($AddAccessRule)
Set-acl -PATH C:\A $objacl 
```

# opengl - GLSL 数据类型可以用于 OpenGL 程序中的通用矢量/矩阵计算吗？

> ID：14402319
> 
> 赞同：0
> 
> 时间：2013-01-18T15:39:16.207
> 
> 标签：opengl, glsl

不确定将 GLSL 数据类型和函数用于向量和矩阵计算是否是个好主意，即使我不打算在我的程序中使用 GLSL。GLSL 是 OpenGL 附带的东西，所以我不需要制作自己的简单矢量/矩阵类或从另一个 libaray 借来执行此操作，但我对它在通用 OpenGL 操作中的可用性了解不够。

你如何使用 GLSL？您是否只包含 gl.h 并访问 vec3 和交叉函数？我需要写下点、交叉和函数的类名吗？（像 std::vector 一样，每次调用这些函数时都需要 gl::cross 吗？）

GLSO 数据类型是否与基本的 OpenGL 函数（如 glColor、glVertex 和 glTranslate）兼容？

我已经看到 GLSL 等效于 glVertex3f 和其他基本 OpenGL 函数，但它们只是简单的替换还是有其他要求？我对 OpenGL 仍然不是很好，主要依赖 GLUT，我不知道 GLSL 将如何与 GLUT 融合

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T15:42:42.623

GLSL 是一种完全不同的语言，与您的程序分开编译，所以**不**，您不能在 OpenGL 中使用它的数据类型。看看[GLM](http://glm.g-truc.net/)。

`glVertex3f`另外，请注意在 GLSL中不存在任何等价物；GLSL 在顶点着色器阶段开始处理，这是*在*您向程序提供顶点数据之后。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T16:00:59.170

> 你如何使用 GLSL？

GLSL 是用于实现*着色器*的完全独立的语言。着色器是由 OpenGL 实现编译并在 OpenGL 渲染器中执行的程序。GLSL 不是您在宿主程序中使用的东西。

对于向量数学的主机端，有几个库：

*   [本征](http://eigen.tuxfamily.org)
*   [GLM](http://glm.g-truc.net/)

或者，仍处于开发初期

*   [linmath.h](https://github.com/datenwolf/linmath.h)

> 您是否只包含 gl.h 并访问 vec3 和交叉函数？

这不是它的工作原理。

# c++ - XCode：使用全局变量时出现重复符号错误

> ID：14402320
> 
> 赞同：2
> 
> 时间：2013-01-18T15:39:19.577
> 
> 标签：c++, xcode, duplicates

这是我的代码：

啊

```
class Foo
{
public:
    int bar;
};

Foo myFoo; 
```

主文件

```
#include "A.h"
int main()
{
    myFoo.bar = 2;
    return 0;
} 
```

Xcode 给了我错误（释义）：

```
duplicate symbol _myFoo in main.o & A.o 
```

我想保留`Foo myFoo`在 Ah 文件中。

那么为什么 XCode 会抛出这个错误，我该如何纠正呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-18T15:40:35.303

您在 header 中定义全局变量，它违反了**[一个定义规则](http://en.wikipedia.org/wiki/One_Definition_Rule)**。
包含标头的每个 TU 都将拥有自己的对象副本。

您需要使用`extern`关键字：

1.  在 header 中将对象声明为 extern。
2.  定义它一个且只有一个源文件。
3.  在要使用全局变量的任何位置包含标题

* * *

**啊**

```
extern Foo myFoo; 
```

**主文件**

```
#include "A.h"

Foo myFoo; 
```

**XXXX.cpp**

```
#include "A.h" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-18T15:41:26.830

`Foo myFoo;`是**定义**，而不是声明。用于`extern Foo myFoo;`声明并将定义移动到单个实现文件中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-02T01:30:13.147

确保您`No Common Blocks`在构建设置中设置为否。

# c++ - std::this_thread::yield 只是一个提示会有问题吗？

> ID：14402328
> 
> 赞同：1
> 
> 时间：2013-01-18T15:40:04.097
> 
> 标签：c++, c++11, stdthread, stdatomic

我和同事讨论了一个假设的问题，当一个人想要用 实现自旋锁互斥锁`std::atomic_flag`，但也不是将自旋锁实现为 while(true) 而是作为

```
while(true)
{
     cnt=0;
     while (cnt<yieldAfterTries)
     {
        //try to get lock
        cnt++;
     }
     std::this_thread::yield();

     // if got lock do work and then break;
} 
```

基本上的想法是，即使它具有实时优先级，线程也不能“在很长时间内”阻塞其他线程，因为它会在一段时间后产生......但是当我看到 std::yield 的规范时，我很惊讶它是一个建议，不是强制性的。

> 为实现提供提示以重新安排线程的执行，从而允许其他线程运行。

[http://en.cppreference.com/w/cpp/thread/yield](http://en.cppreference.com/w/cpp/thread/yield)

那会不会有问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-18T17:38:10.347

我编写的代码与您的代码非常相似，并测量了`yield`在高争用条件下调用的影响。我发现`yield`以这种方式使用有益于整个系统的吞吐量。

实际规范与您引用的内容在精神上没有什么不同，但这里是 30.3.2 [thread.thread.this] 第 2 和第 3 段的确切规范：

```
void this_thread::yield() noexcept; 
```

> *效果：*为实施提供重新安排的机会。
> 
> *同步：*无。

如果实现实现`yield`为无操作（例如），这将仅影响代码的性能，而不影响正确性。即使没有`yield`. 但它也更有可能不必要地占用 CPU，从而降低整体系统性能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T15:49:10.320

操作系统调度程序将自动抢占自旋锁，从而使此代码变得不必要。当一个线程占用了它的时间时，操作系统将自动切换到另一个线程。这就是为什么 yield 是一个提示。例如，在 Linux 中的完全公平调度中，对 yield 的调用通常会导致不必要的上下文切换，因为调度试图纠正一个线程没有得到公平的时间份额。

您尝试获取自旋锁不会阻塞任何东西，只有持有自旋锁会导致其他事物阻塞。

# android - 禁用 ActionBar RTL 方向

> ID：14402329
> 
> 赞同：9
> 
> 时间：2013-01-18T15:40:12.590
> 
> 标签：android, android-layout, right-to-left, bidi

Android 4.2 引入了 RTL (BiDi) 支持，要开始使用它，我只需按照说明进行操作（清单文件中的元素的 android:supportsRtl 属性并将其设置为“true”）

但是随后我的 ActionBar 徽标也会向右更改方向（徽标显示在右侧），这是我不想要的。我确实想使用 RTL 功能，但保持 ActionBar 向左...

换句话说，当语言方向为 RTL 时，如何使用 android:supportsRtl 属性而不改变 Android 4.2 上的 ActionBar 方向

有什么建议么 ？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-12-19T15:39:28.253

我有同样的问题，只是我有一个滑动菜单（AKA 导航抽屉），所以它变得更加奇怪（意味着你点击右上角的“向上”按钮并显示左侧的抽屉......）。

有两种可能的解决方案：

1.  通过代码，在每个活动中：

    > ```
    > if (VERSION.SDK_INT >= VERSION_CODES.JELLY_BEAN_MR1)
    >     getWindow().getDecorView().setLayoutDirection(View.LAYOUT_DIRECTION_LTR); 
    > ```

2.  按主题。编辑您自己的自定义主题，并添加正确的行。例子：

    > ```
    > <style name="AppTheme" parent="@style/Theme.Sherlock.Light">
    >   <item name="actionBarStyle">@style/CustomActionBarStyle</item>
    >   <item name="android:actionBarStyle" tools:targetApi="honeycomb">@style/CustomActionBarStyle</item>
    > </style>
    > 
    > <style name="CustomActionBarStyle" parent="@style/Widget.Sherlock.Light.ActionBar">
    >   <item name="android:layoutDirection" tools:targetApi="jelly_bean_mr1">ltr</item>
    > </style> 
    > ```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-05T14:05:53.033

首先，不抱歉，当您处于 RTL 模式时，ActionBar 应该镜像。这一点已经过 bidi/rtl 专家的检查和验证。设置 android:supportsRtl=true 意味着您的应用愿意支持 RTL 布局镜像。如果您这样做，则 ActionBar（作为每个 Android 框架小部件）将被镜像，因为在 LTR 方向上显示它没有意义。

其次，您关于访问左上角或右上角菜单的屏幕尺寸和人体工程学问题的论点与 RTL 支持无关。如果在 LTR 模式下存在此类问题，那么您将在 RTL 模式下遇到完全相同的问题。这仅与屏幕尺寸有关。

第三，所有 Android UI 框架小部件都原生支持 RTL 镜像。如果您发现问题，请在公共错误跟踪系统上提交错误。

第四，Google Apps 将支持 RTL 布局，并在需要时使用那些新的公共 RTL API。这与 Android 框架支持完全不相关。第一个支持 RTL 的应用程序是设置应用程序（以它的一些尚不了解 RTL 的提供程序为模）。

第五，关于向后移植，我假设您正在谈论是否应该将此功能放入支持库甚至是较旧的 Android 版本中。对于较旧的 Android 版本，由于其代码库已冻结，因此无法执行此操作。对于支持库，我们不能这样做，因为我们必须更改视图和其他基本小部件组件。

最后，如果您认为自己发现了问题，或者只是为可能丢失的任何内容提交功能请求，请在您的方法中更具建设性并提交错误报告。

# hibernate - 在 entitymanager 上使用 unwrap 方法获取本地休眠会话后，我是否必须关闭两者？

> ID：14402330
> 
> 赞同：6
> 
> 时间：2013-01-18T15:40:15.407
> 
> 标签：hibernate, entitymanager

我有看起来像这样的代码。

```
 this.entityManager = AppFactory.instance().getEntityManagerFactory().createEntityManager();
 this.hibernateSession = entityManager.unwrap(Session.class);
 try{
 //do some queries using both entityManager and hibernateSession
 }finally{
 this.entityManager.close();
 } 
```

但我似乎在某处有连接泄漏。我想知道我是否应该关闭 entityManager 和 hibernateSession。有没有其他人处理过这种情况？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-07-24T06:31:25.423

您不必同时关闭 Session 和 EntityManger，在 hibernate 中的 EntityManger 实际上是休眠 Session。调用 unwarp 会将基础会话传递给您。所以关闭其中一个就可以了。
关于连接泄漏，看我对下面[问题](https://stackoverflow.com/questions/14867605/do-we-need-to-close-entitymanager-resources-on-a-select-call/15062204#15062204)的回答，可能是同一个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T21:39:40.480

我不了解 Hibernate，但在 EclipseLink 中，他们明确表示您必须先进行事务，然后才能通过展开检索连接：

[http://wiki.eclipse.org/EclipseLink/Examples/JPA/EMAPI#JPA_2.0](http://wiki.eclipse.org/EclipseLink/Examples/JPA/EMAPI#JPA_2.0)

所以试试这个：

```
entityManager.getTransaction.begin();
this.hibernateSession = entityManager.unwrap(Session.class);
...
entityManager.getTransaction.commit(); 
```

# r - RStudio -> RMarkdown/knitr -> html -> 博客对我不起作用

> ID：14402331
> 
> 赞同：1
> 
> 时间：2013-01-18T15:40:16.453
> 
> 标签：r, markdown, knitr, rstudio

我一直在尝试使用 RStudio 和 knitr 来创建博客文章。我遵循了 Jeff Horner 之前在此处（[第 I 部分](http://jeffreyhorner.tumblr.com/post/25804518110/blog-with-r-markdown-and-tumblr-part-i)）和此处（[第 II 部分](http://jeffreyhorner.tumblr.com/post/25943954723/blog-with-r-markdown-and-tumblr-part-ii)）为 tumblr 描述的方法。

简而言之，这是 tumblr 的自定义 CSS，确保启用 html 编辑器，然后使用**knitr**和**markdown**包创建 .md 和 html 文件。

```
library(knitr)
knit('tut5.Rmd')
library(markdown)
markdownToHTML("tut5.md", "tut5.html", fragment.only = TRUE) 
```

这是我的 html 示例：

```
<p><FONT style="font-size:15px"></p>
<h2>Model Formulae and Linear Models</h2>
<p>In many ways the R language is similar to other programming languages (Matlab, Python, Scala) but it has a few unique features due to its focus on statistics. Amongst these model formulae are a useful shorthand for representing the relations between data variables - in particular to specify linear models (e.g. regression and multiple regression)- and they appear in both statistical and plotting expressions.</p> 
```

遗憾的是，当我将这个 html 文件加载到**tumblr**或**wordpress**博客中时，我发现它只是创建了一个空白帖子。我想我不久前也尝试过**博客**，但我不记得我是否使用了相同的步骤。

截至今天，我正在使用最新的 RStudio 和软件包版本。

所以...

1.  有没有其他人能够成功地管理这些（或类似）网站。
2.  如果是这样，他们有不同的方法吗？
3.  还是我做错了什么？

我知道 RPubs——它很棒，但我发现它的风格，尤其是页面宽度不适合教学/阅读。

非常感谢

# python - Python子流程模块 - 变量范围

> ID：14402333
> 
> 赞同：0
> 
> 时间：2013-01-18T15:40:19.870
> 
> 标签：python, python-2.7, subprocess

我的 python 脚本有奇怪的行为。所以，我有 python 脚本 A，它多次调用另一个脚本 B。对于调用 B，我使用的是*子进程*模块。

脚本 A 的片段：

```
for i in range(0,10000):
    parameters = []
    parameters.append("B")
    result = subprocess.call(parameters) 
```

脚本 B 的片段：

```
testdata = some_logic
if testdata:
    function_1()
else:
    function_2() 
```

因此，脚本 A 会多次调用脚本 B。经过一些测试，我注意到变量**testdata**没有当前运行脚本 B 的预期值。在运行脚本 B 中是否有可能，变量**testdata**具有来自先前调用 B 的值？在这种情况下，变量**testdata**的范围是什么？谢谢你的建议。干杯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T15:43:12.913

`subprocess.call`启动子进程。该进程不知道发生了什么`A`或调用了多少次——它只知道你传递给它的命令行参数。在这种情况下，你总是`'B'`在没有命令行参数的情况下调用，因为你调用时`parameters`总是等于。`['B']``subprocess.call`

# vba - MS Outlook 2007 ~ VBA 将规则应用于附件中的文本

> ID：14402334
> 
> 赞同：0
> 
> 时间：2013-01-18T15:40:23.210
> 
> 标签：vba, outlook, email-attachments, rules, outlook-2010

是否可以（通过 VBA 或其他方法）仅根据该电子邮件附件中的文本将规则（例如“将电子邮件移动到文件夹 X”）应用于电子邮件。

我收到带有 XML 附件的电子邮件，手动打开它们以查找其中的特定日期。然后我根据这个日期将电子邮件归档到不同的文件夹中。

我想自动化这个过程。XML 文件有一个名为 1/1/2013 的字段。我希望宏打开此附件/提取日期值/关闭附件，然后根据该日期将电子邮件移动到文件夹中。（没什么太花哨的……例如，我最初会基于每个月创建 12 个文件夹）

当电子邮件正文包含用于排序的文本时，我成功使用了内置的“规则”，但我需要专门用于附件的内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T17:37:33.687

是的，您可以，[KB 306108](http://support.microsoft.com/kb/306108)有一个示例脚本，可以作为规则操作运行（您可以在其中进行进一步处理）。

# c# - 使用 Simple Injector 为单个 Open Generic 注册多个实现

> ID：14402336
> 
> 赞同：3
> 
> 时间：2013-01-18T15:40:26.927
> 
> 标签：c#, dependency-injection, inversion-of-control, simple-injector

我使用 Simple Injector 作为我的 IoC 容器。我已经为单个通用接口开发了许多（请原谅我可能使用了错误的术语）*部分封闭的实现。*

我希望能够请求通用接口，并根据提供的类型，让 Simple Injector 返回正确的类实现。（我可以理解这可能是一个禁忌，因为如果做错了实现可能会重叠等，但我仍然想知道它是否可以完成。）

根据下面的代码片段，如何配置 Simple Injector 以返回一个实例`ITrim<Ford, Green>`？

通用基类层：

```
public interface IColour { }
public interface IVehicle { }
public interface ITrim<TVehicle, TColour>
    where TVehicle : IVehicle
    where TColour : IColour
{
    void Trim(TVehicle vehicle, TColour colour);
}

public abstract class TrimVehicle<TVehicle, TColour> : ITrim<TVehicle, TColour>
    where TVehicle : IVehicle
    where TColour : IColour
{
    public virtual void Trim(TVehicle vehicle, TColour colour) { }
} 
```

中间层，为某类车辆提供通用代码：

```
public abstract class Green : IColour { }
public abstract class Blue : IColour { }
public abstract class Car : IVehicle { }
public abstract class Bike : IVehicle { }

public abstract class TrimCar<TCar, TColour> : TrimVehicle<TCar, TColour>
    where TCar : Car
    where TColour : IColour
{
    public override void Trim(TVehicle vehicle, TColour colour)
    {
        base.Trim(vehicle, colour);
    }
}

public abstract class TrimBike<TBike, TColour> : TrimVehicle<TBike, TColour>
    where TBike : Bike
    where TColour : IColour
{
    public override void Trim(TVehicle vehicle, TColour colour)
    {
        base.Trim(vehicle, colour);
    }
} 
```

最后一层，提供更具体的实现：

```
public class Ford : Car { }
public class TrimFord<TFord, TColour> : TrimCar<TFord, TColour>
    where TFord : Ford
    where TColour : IColour
{
    public override void Trim(TVehicle vehicle, TColour colour)
    {
        base.Trim(vehicle, colour);
    }
}

public class Yamaha : Bike { }
public class TrimYamaha<TYamaha, TColour> : TrimBike<TYamaha, TColour>
    where TYamaha : Yamaha
    where TColour : IColour
{
    public override void Trim(TVehicle vehicle, TColour colour)
    {
        base.Trim(vehicle, colour);
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-18T15:54:25.920

**TLDR；**

```
container.Register(typeof(ITrim<,>), typeof(ITrim<,>).Assembly); 
```

冗长但过时的答案：

一个很复杂的问题，答案很简单：

```
container.RegisterOpenGeneric(typeof(ITrim<,>), typeof(TrimCar<,>));
container.RegisterOpenGeneric(typeof(ITrim<,>), typeof(TrimFord<,>));
container.RegisterOpenGeneric(typeof(ITrim<,>), typeof(TrimYamaha<,>)); 
```

这是可行的，因为 Simple Injector 尊重给定类型的任何泛型类型约束（或者至少，它处理任何我能想到的讨厌的奇异类型约束）。因此，只要确保注册的开放泛型类型（`TrimCar`、`TrimFord`和`TrimYamaha`）不重叠，它就会按预期工作。

如果它们确实重叠，容器将抛出一个异常，告诉您该`ResolveUnregisteredType`事件的多个观察者试图注册 {some type}。

尽管您应该注意这些重叠类型的使用不会使您的应用程序复杂化，但总的来说，我发现使用泛型类型约束非常方便并且我一直都在使用它（尤其是在注册装饰器时）。

**更新**

如果您有一组非泛型装饰器，则当前的实现`RegisterManyForOpenGeneric`无法将它们与“普通”类型区分开来，它会尝试注册它们。如果您不希望这样，您可以按如下方式注册您的类型：

```
var types = OpenGenericBatchRegistrationExtensions.GetTypesToRegister(
   typeof(ITrim<,>), typeof(ITrim<,>).Assembly)
   .Where(type => !type.Name.EndsWith("Decorator");

container.RegisterManyForOpenGeneric(typeof(ITrim<,>), types); 
```

`RegisterManyForOpenGeneric`扩展方法也使用内部`GetTypesToRegister`。

**更新 2**

Simple Injector 2的`RegisterManyForOpenGeneric`方法现在可以识别非泛型装饰器，所以使用 v2 你可以简单地做到这一点：

```
container.RegisterManyForOpenGeneric(
    typeof(ITrim<,>), 
    typeof(ITrim<,>).Assembly); 
```

容易多了，你不觉得吗？

**更新 3**

Simple Injector v3 已过时`RegisterManyForOpenGeneric`，并从 v4 中完全删除。对于 v3 及更高版本，`Register`可以改用：

```
container.Register(typeof(ITrim<,>), typeof(ITrim<,>).Assembly); 
```

# perl - 使用 DateTime Perl 实现 Rota

> ID：14402337
> 
> 赞同：1
> 
> 时间：2013-01-18T15:40:28.027
> 
> 标签：perl, datetime, calendar

当谈到数学聪明时，我相当厚实，我需要一些帮助，我需要实施一个轮班系统，我们可以让一群人“待命”一周，说这些群体将在一年中重复出现。这将是 Perl 中的 CGI 脚本，后端有一个数据库。

举个简单的例子，假设从本周三到下周三，3 组第 1 组待命，而在午夜，第 2 组将在周三待命，之后最后一组也将以同样的方式待命。在最后一组之后，第一批人再次待命，周三 - 周三，整件事不断重复。

它还必须适应每个组中个人的临时变化，这些变化仅适用于当前会话，而不适用于整个系列。

想象一下谷歌日历，基本上就是这样，但开发了一个人，我，一周之内，就会爱上管理。

**问题**：我在想但不知道如何做是确定，拥有组的静态周数（第 1 组第 1 周；第 2 组第 2 周 .. 等），哪个组现在“待命”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T16:29:21.483

只需将周数除以组数即可。但请记住，第一组将等于 1，最后一组将等于 0。

例如，如果您想象年初有 5 个小组；

第 1 周 % 5 = 1；-> 第一组

第 2 周 % 5 = 2；-> 第二组

第 3 周 % 5 = 3；-> 第三组

第 4 周 % 5 = 4；-> 第四组

第 5 周 % 5 = 0；-> 第五组

它会重复......第 6 周 % 5 = 1; -> 第一组

...

# iphone - 从应用程序关闭通知栏 iPhone

> ID：14402338
> 
> 赞同：1
> 
> 时间：2013-01-18T15:40:29.997
> 
> 标签：iphone, notifications

当我的应用在 iPhone 上运行时，我想关闭通知栏。我怎样才能防止它显示那个栏？实际上，问题是当它出现在我的应用程序顶部时，它会扰乱应用程序的布局。

# bash - 从 OS X 到 Ubuntu 的嵌套 bash if/and/or 语句不起作用

> ID：14402340
> 
> 赞同：0
> 
> 时间：2013-01-18T15:40:35.590
> 
> 标签：bash

这个：

`while [[ $red -le 255 && $switch -eq 0 ]] || [[ $red -ge 0 && $switch -eq 1 ]]; do`

在 OS X 下工作得很好，但我无法让它在 Ubuntu 中工作。我觉得这是我所缺少的非常基本的东西，但是在谷歌搜索之后我还没有找到解决方案。

错误是：

`[[: not found`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T15:53:13.563

`/bin/sh`Ubuntu 上的默认 shell 和替代品是`dash`不理解`[[`. 确保您正在运行脚本`bash`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T15:43:16.137

听起来它可能没有使用`bash`. `#!`如果这是一个脚本并且文件顶部没有 hashbang ( )，请尝试将其添加为第一行：

```
#! /usr/bin/env bash 
```

如果它不是脚本，请尝试找出您正在使用的 shell：

```
echo $SHELL

# or maybe this
ps | fgrep $$ 
```

如果不是`bash`，请先手动运行`bash`，然后重试。

# ios - iOS UIManagedDocument：无法打开预加载的持久存储

> ID：14402341
> 
> 赞同：5
> 
> 时间：2013-01-18T15:40:38.133
> 
> 标签：ios, core-data, preload, uimanageddocument, nspersistentstore

我正在尝试在基于 UIManagedDocument 的应用程序中预加载持久存储以处理核心数据。

我尝试在应用程序 B 中使用的持久性商店是“生成”并通过应用程序 A 填充。在应用程序 A 和 BI 中，使用 Justin Driscoll 的 UIManagedDocument 处理程序（[在此处可用](http://adevelopingstory.com/blog/2012/03/core-data-with-a-single-shared-uimanageddocument.html)，感谢 Driscoll 先生！）。一切都在应用程序 A 中完美运行。

基于此线程中解释的技术：[Pre-load core data database in iOS 5 with UIManagedDocument](https://stackoverflow.com/questions/8683892/pre-load-core-data-database-in-ios-5-with-uimanageddocument)，我尝试将持久存储放在B的应用程序包中，并在需要时将此存储复制到文档文件夹中（如果没有完成before) 在实例化之前的 init 中。

从捆绑包复制到文档都可以（我尝试了不同的方法并检查了创建，这要归功于 finder 和 nslog），但我就是无法打开“文档”。应用程序不会崩溃，显示视图但表为空（我使用与应用程序 A 完全相同的代码，具有相同的 fetchedResultsController）。首先我认为复制的持久存储是空的，然后我意识到我无法正确打开文档/复制的持久存储）=> 文档状态 = 5，这意味着 UIDocumentStateClosed 和 UIDocumentStateSavingError 的错误（如果我正确解释它？？？ )

（注意：我也尝试直接从包中实例化和打开文档，但我遇到了同样的问题：doc state = 5）

所以... 与此文档状态 = 5 战斗三天，不知道要修复什么

我想我放在应用程序 B 包中的文件有问题（目前我从 finder 拖放到 xcode 并选择了“为任何添加的文件夹创建文件夹引用”）也许是关于一些选项、元数据或文件权限或...

关于调查什么的任何想法？

（我不认为这与以下代码有关，但是...）这是我的初始化方式（基于 Justin Driscoll 处理程序。只有 custo 是：我检查文档文件夹中是否有存储包，如果没有，我创建它基于在捆绑包中的文件上）

```
- (id)init
{
self = [super init];
if (self) {
    self.document = nil;

    NSLog(@"--- INIT ---");

    // On vérifie si il y a un dossier "My-Default-Document-As-Database" (notre persitent store) dans le dossier "Documents"

    NSString *docDirectory = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0];
    NSString *docFolderPath = [docDirectory stringByAppendingPathComponent:@"My-Default-Document-As-Database"];

    if (![[NSFileManager defaultManager] fileExistsAtPath:docFolderPath]) {
        NSError *error = nil;
        NSLog(@"Pas de fichier trouvé à l'adresse docFolderPath, on va donc y créer notre persistent store");

        // COPY FROM BUNDLE

        NSFileManager *fileManager = [NSFileManager defaultManager];

        NSString *DB = [docFolderPath stringByAppendingPathComponent:@"StoreContent"];

        [fileManager createDirectoryAtPath:DB withIntermediateDirectories:YES attributes:nil error:&error];

        NSLog(@"create directory error: %@",error);

        DB = [DB stringByAppendingPathComponent:@"persistentStore"];

        NSString *shippedDB = [[[NSBundle mainBundle] resourcePath] stringByAppendingPathComponent:@"persistentStore"];

        NSLog(@"%d",[fileManager fileExistsAtPath:shippedDB]);

        [fileManager copyItemAtPath:shippedDB toPath:DB error:&error];

        NSLog(@"Copy error %@",error);

    }

    NSLog(@"== My-Default-Document-As-Database OK DANS DOCUMENTS ==");

    NSURL *myDbUrl = [[[NSFileManager defaultManager] URLsForDirectory:NSDocumentDirectory inDomains:NSUserDomainMask] lastObject];

    myDbUrl = [myDbUrl URLByAppendingPathComponent:@"My-Default-Document-As-Database/"];

    self.document = [[UIManagedDocument alloc] initWithFileURL:myDbUrl];

    NSLog(@"== initWithFileUrl ==");

            // Set our document up for automatic migrations
            NSDictionary *options = [NSDictionary dictionaryWithObjectsAndKeys:
                                     [NSNumber numberWithBool:YES], NSMigratePersistentStoresAutomaticallyOption,
                                     [NSNumber numberWithBool:YES], NSInferMappingModelAutomaticallyOption, nil];
            self.document.persistentStoreOptions = options;

            // Register for notifications
            [[NSNotificationCenter defaultCenter] addObserver:self
                                                     selector:@selector(objectsDidChange:)
                                                         name:NSManagedObjectContextObjectsDidChangeNotification
                                                       object:self.document.managedObjectContext];

            [[NSNotificationCenter defaultCenter] addObserver:self
                                                     selector:@selector(contextDidSave:)
                                                         name:NSManagedObjectContextDidSaveNotification
                                                       object:self.document.managedObjectContext];
}
return self;
} 
```

只有我对 Driscoll 先生提供的 performWithDocument 代码所做的“修改”是一些 nslog，以查看发生了什么（每次第一次打开尝试时，doc 状态从 1 变为 5，然后坚持 5...）

```
- (void)performWithDocument:(OnDocumentReady)onDocumentReady
{  
NSLog(@"passage par performWithDoc");

void (^OnDocumentDidLoad)(BOOL) = ^(BOOL success) {
    NSLog(@"FilePath Apres = %@",[self.document.fileURL path]);
    NSLog(@"STATE === %d", self.document.documentState);
    onDocumentReady(self.document);
};

NSLog(@"FilePath Avant = %@",[self.document.fileURL path]);
NSLog(@"STATE === %d", self.document.documentState);

if (![[NSFileManager defaultManager] fileExistsAtPath:[self.document.fileURL path]]) {
    [self.document saveToURL:self.document.fileURL
            forSaveOperation:UIDocumentSaveForCreating
           completionHandler:OnDocumentDidLoad];
    NSLog(@"performWithDoc > fileexistAtPath nope => saveToURLForCreating");
    NSLog(@"STATE === %d", self.document.documentState);
} else if (self.document.documentState == UIDocumentStateClosed) {
    [self.document openWithCompletionHandler:OnDocumentDidLoad];
    NSLog(@"performWithDoc > UIDocStateClosed => openWithCompletionHandler");
    NSLog(@"STATE === %d", self.document.documentState);
} else if (self.document.documentState == UIDocumentStateNormal) {
    OnDocumentDidLoad(YES);
    NSLog(@"performWithDoc > docState = normal => docdidLoad(YES)");
}
NSLog(@"STATE === %d", self.document.documentState);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T09:56:09.703

感谢一位同志，这是答案……如果有人搜索它：

这是关于选择！

在 init 中添加`NSIgnorePersistentStoreVersioningOption`pesistenStore 选项。

关于以前的代码，你应该有这样的东西：

```
// Set our document up for automatic migrations
NSDictionary *options = [NSDictionary dictionaryWithObjectsAndKeys:
    [NSNumber numberWithBool:YES], NSIgnorePersistentStoreVersioningOption,
    [NSNumber numberWithBool:YES], NSMigratePersistentStoresAutomaticallyOption,
    [NSNumber numberWithBool:YES], NSInferMappingModelAutomaticallyOption, nil];
self.document.persistentStoreOptions = options; 
```

# c# - Active Directory 密码到期日期

> ID：14402344
> 
> 赞同：1
> 
> 时间：2013-01-18T15:40:43.290
> 
> 标签：c#, active-directory

这与我不想污染的这篇文章有些联系。

[Active Directory 用户密码到期日期 .NET/OU 组策略](https://stackoverflow.com/questions/3764327/active-directory-user-password-expiration-date-net-ou-group-policy)

与该线程中的 OP 一样，我试图通过代码获取给定 AD 用户名的密码到期日期；但是，当我尝试获取所有可用属性时，上面线程中提到的属性 maxPwdAge 不可用，如下所示：

```
 PropertyCollection fields = myLDAP.Properties;

            foreach (String ldapField in fields.PropertyNames)
            {
                // cycle through objects in each field e.g. group membership  
                // (for many fields there will only be one object such as name)  

                foreach (Object myCollection in fields[ldapField])
                    Console.WriteLine(String.Format("{0,-20} : {1}",
                                  ldapField, myCollection.ToString()));
            } 
```

甚至微软的 ADExplorer 也没有显示密码过期日期。

但是当我尝试这个命令提示符命令时：

```
net user thatuser /DOMAIN 
```

它显示密码到期日期。

我的问题是：

1.  为什么我没有将 maxPwdAge 视为属性
2.  net user 命令从哪里获取密码到期日期以及如何在 C# 代码中获取它？

现在我正在使用控制台应用程序进行测试；在测试这个时，发现目标机器上没有安装.Net 4.0，所以我坚持使用.Net 3.5

我不是服务器管理员，所以我不知道服务器的配置细节。我是这个 AD LDAP 的新手，所以请帮忙。谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T15:45:45.613

`maxPwdAge`定义密码的有效期，而不是过期时间。

它是在组级别设置的属性，而不是用户属性。

您感兴趣的可能是`maxPwdAge + pwdLastSet`.

（`pwdLastSet`是用户属性）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T15:49:02.520

在我的一个项目中，我必须`maxPwdAge`从域对象中读取数据并将该值添加到`lastPwdSet`用户的属性中。

# maven-3 - 当我尝试下载 maven archtypes 时出错（mvn archtype:generate）

> ID：14402346
> 
> 赞同：0
> 
> 时间：2013-01-18T15:41:12.977
> 
> 标签：maven-3

> [错误] 在当前项目和插件组 [org.apache.maven.plugins, org.codehaus.mojo] 中找不到前缀“archtype”的插件，可从存储库 [local (C:\Users\Varun.m2 \repository), 中央 (http://repo.maven.apache.org/maven2)]

如果我尝试从浏览器访问[http://repo.maven.apache.org/maven2](http://repo.maven.apache.org/maven2)，我会收到错误消息：

> 此目录的浏览已被禁用。请改为在[http://search.maven.org](http://search.maven.org)上查看此目录的内容。

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T15:48:36.687

错误说“......前缀'archtype'”你尝试了archetype而不是archtype吗？:-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-16T09:04:05.183

如果您尝试生成原型，那么这是一个错字。它应该`archetype`代替“archtype”。

```
mvn archetype:generate 
```

# javascript - Kendo TreeView：我可以暂时禁用按需加载吗？

> ID：14402347
> 
> 赞同：1
> 
> 时间：2013-01-18T15:41:14.987
> 
> 标签：javascript, kendo-ui, kendo-treeview

剑道 UI V. 2012.2.924

所以我正在尝试用我的剑道树视图做一些非常混乱的事情。情况是这样的：我有一个按需加载的剑道树视图。我还实现了特殊的占位符节点，可以单击这些节点以将其他节点附加到每个级别（作为批处理的一种方式）。

我需要实现的功能是搜索。用户可以输入节点名称，树将展开到该节点并选择它。我已经弄清楚了服务器上的所有逻辑。唯一的问题是，通过按需加载，每次我将一个节点附加到父节点时，都会有一个服务器调用来获取该父节点的内容。我想禁用这个自动调用，直到我的手动附加完成。有人知道这是否可以做到吗？我已经从服务器尝试过，但是如果我只返回 null 它就会出错。如果我返回一个空列表，它会清除现有的附加节点。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T19:45:45.740

从描述看来，您实际上愿意禁用负载（不仅仅是`loadOnDemand`）。

您可以在`transport.read`检查控制变量（表示 loadOnDemand 是否启用或禁用的变量）的实现函数中对其进行控制。

**示例 1**：如果你有类似的东西：

```
transport: {
    read: {
        url: "data.jsp"
    },
}, 
```

您应该将其转换为：

```
transport: {
    read: {
        url: function () {
            if (!disableRead) {
                return "data.jsp"
            }
        }
    },
}, 
```

**示例 2**：如果你有类似的东西：

```
transport: {
    read: function (options) {
        ...
        options.success(data);
    }
}, 
```

您应该将其转换为：

```
transport: {
    read: function (options) {
        if (!disabledRead) {
            ...
            options.success(data);
        } else {
            options.success([]);
        }
    }
}, 
```

# dll - 正确的 jar 路径以从 dll 加载带有本机方法的小程序

> ID：14402361
> 
> 赞同：1
> 
> 时间：2013-01-18T15:41:50.847
> 
> 标签：dll, applet, java-native-interface, java

我想加载一个jar，它可以`System.loadLibrary`在系统内进行一次调用并加载一个dll。该 jar 还将包含所有本机方法实现。

由于小程序有一个类加载器并且调用`System.loadLibrary`两次抛出`UnsatisfiedLinkError`我不能将 jar 加载到小程序本身（如果我这样做会抛出异常并且连续的本机调用将什么都不做）。

意识到这个问题，hacky 的解决方案是将 jar 放入 java 类路径，以便加载一次（来自 JRE 的 ext/文件夹）。

我的问题是：在不将 jar 放入 java ext 文件夹或在系统中创建另一个类路径条目的情况下，解决此问题的正确举措是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T22:07:50.750

最简单的方法是使用[Java Web Start](https://stackoverflow.com/tags/java-web-start/info)部署本机。

*   将本地人放在每个系统的签名 Jar 的根目录中。例如
    *   `native-win.jar`
    *   `native-osx.jar`
    *   `native-nix.jar`
*   创建一个引用操作系统特定`resources`部分中每个 Jar 的扩展 JNLP。
*   引用主小程序或应用程序 JNLP 中的扩展。

从 1.2 开始，JWS 可用于启动自由浮动框架和小程序。最近，也可以使用 JWS 部署小程序并保持嵌入在网页中。

# git - 我在 git 中恢复了合并，现在如何重做合并？

> ID：14402364
> 
> 赞同：0
> 
> 时间：2013-01-18T15:41:54.830
> 
> 标签：git, version-control

我从一个分支合并到主人。然后我注意到我以一种糟糕的方式解决了冲突，所以我使用以下命令恢复了合并：

```
git revert -m 1 *merge-hash* 
```

我的同事在那之后做了一些提交。我试图重做合并，这样我就有机会以不同的方式解决冲突。但是，当然，它说分支已经合并了。如何重做合并并以好的方式解决冲突？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T15:52:06.870

使用交互式变基来摆脱合并和恢复提交（只需从列表中省略它们）

此工作流程更适合丢弃合并：[http ://dymitruk.com/blog/2012/02/05/branch-per-feature/](http://dymitruk.com/blog/2012/02/05/branch-per-feature/)

# jsf - 具有视图范围 bean 的 Primefaces 上传器，并发问题？

> ID：14402365
> 
> 赞同：0
> 
> 时间：2013-01-18T15:41:58.290
> 
> 标签：jsf, jsf-2, concurrency, primefaces

我在视图范围的 bean 中有一个简单的上传监听器，对于每个上传的文件，将其添加到列表中，然后显示列表。
问题是，当我按下上传按钮一次上传多个文件时，只有一个文件被添加到列表中，并且没有显示异常。另一方面，如果我上传单个文件，等待前一个完成，行为是正常的。
我想到了一些并发问题，但是当我尝试将 bean 放入会话范围时，它工作正常。并发问题是否有可能使视图无效？
还有什么建议吗？非常感谢

```
<h:form id="form" enctype="multipart/form-data">

    <p:wizard widgetVar="wiz" render="true" id="wizard">

        <p:tab id="p0" title="file upload" step="0">
            <p:panel>
                <p:fileUpload
                    fileUploadListener="#{myBean.uploadedFile}"
                     mode="advanced" multiple="true" sizeLimit="100000" 
                     update="fileList"/>

                <p:dataList id="fileList" value="#{myBean.filesName}" var="file">#{file}</p:dataList> 
```

豆子：

```
public void uploadedFile(FileUploadEvent event) { 

    try {
        files.add(event.getFile());

        filesName.add(event.getFile().getFileName());

    } catch (Exception e) {

        e.printStackTrace();
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-18T08:19:08.227

我刚刚陷入和你一样的境地。经过艰苦的调试，我终于找到了一个对您也有帮助的解决方案。

我认为这个问题来自 ViewScoped 范围，在管理会话上下文中。所以我尝试自己管理会话上下文。使用此代码初始化会话和您的列表：

```
 FacesContext context = FacesContext.getCurrentInstance();
    HttpSession session = (HttpSession) context.getExternalContext().getSession(true); 
    session.setAttribute("files", new ArrayList<UploadedFile>()); 
```

您必须初始化列表，它是强制性的。然后在您的 handleFileUpload 方法中，只需使用保存在会话上下文中的属性“文件”来保存您的上传文件。现在您的方法可以处理多个上传文件。

# php - php检查一个值是否在sql数据库中

> ID：14402368
> 
> 赞同：0
> 
> 时间：2013-01-18T15:42:01.020
> 
> 标签：php, sql, registration

> **可能重复：**
> [mysql_fetch_array() 期望参数 1 是资源，选择中给出的布尔值](https://stackoverflow.com/questions/2973202/mysql-fetch-array-expects-parameter-1-to-be-resource-boolean-given-in-select)

```
//define variable to check the number of rows where the sql query is true to find out if the username or password are already in use
$EmailCheck = mysql_query("SELECT `Email` FROM `Customer` WHERE `Email` = '$RegCusEmail'");
$UserCheck = mysql_query("SELECT `Username` FROM `Customer` WHERE `Username` = '$RegCusUser'");

//checks if emails in use
if (mysql_num_rows($EmailCheck) != 0)
{
  echo '<p id="error">The Email address you have entered is already in use.<p>';
}

//checks if username is in use
elseif (mysql_num_rows($UserCheck) != 0)
{
  echo '<p id="error">The username you have entered is already in use.<p>';
} 
```

上面的代码应该在数据库中搜索注册人的电子邮件和用户名，如果它们已经存在，告诉用户使用不同的，但是当我使用它时，我得到了这个错误？

> ```
> Warning: mysql_num_rows() expects parameter 1 to be resource, boolean given in (file directory) on line 56 
> Warning: mysql_num_rows() expects parameter 1 to be resource, boolean given in (file directory) on line 62 
> ```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T15:56:35.543

1）使用PDO：

```
//connection
$host =     "localhost";
$user =     "someuser";
$pass =     "somepass";
$database = "db_name";

$db = new PDO("mysql:host=$host;dbname=$database", $user, $pass,array(PDO::MYSQL_ATTR_INIT_COMMAND => "SET NAMES utf8")) or die("Connection error!");

$query = 'SELECT Customer.Email FROM Customer WHERE Customer.Email = :RegCusEmail';
$params = array(':RegCusEmail' => $RegCusEmail);

$result = db_query($query,$params);

if($result == false)
{
  //do stuff..
}

function db_query($q,$p = array())
{
    global $db;

    if($stmt = $db->prepare($query))
    {

        if(count($p) > 0)
        {
            foreach ($p as $key => $value) {
                $stmt->bindParam($key,$value);
            }
        }

        $stmt->execute();
        $resulSet = $stmt->fetchAll(PDO::FETCH_ASSOC);

        if(count($resulSet) > 0)
        {
            return true; // exists
        }
        else
        {
            return false; // does not exist
        }

    }

} 
```

2) 验证电子邮件地址和电子邮件服务器

```
function isValidEmail ($email)
{
    if ($isemail=filter_var($email, FILTER_VALIDATE_EMAIL))
    {
        if(list($email,$domain) = explode('@',$email))
        {
            if(!getmxrr ($domain,$mxhosts)) 
            { 
                return FALSE; 
            }
            else 
            { 
                return TRUE; 
            }
        }
        else
        {
            return FALSE;
        }
    }
    else
    { 
    return FALSE; 
    } 

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T15:49:24.000

改为对结果进行检查：

```
if ( ! is_resource( $EmailCheck ) || mysql_num_rows( $EmailCheck ) != 0 ) 
```

但是检查一下`mysql_error()`，您的查询可能有错误！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T15:45:05.387

您似乎忘记了连接数据库，或者数据库中的详细信息可能不正确。当您遇到查询错误时，最好通过将查询`die (mysql_error())`作为错误处理方法结束来进行调试，如下所示：

`mysql_query("SELECT Email FROM Customer WHERE Email = '$RegCusEmail'") or die (mysql_error());`

得到一个正确的错误。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-18T15:47:07.370

如果您使用的是 5.2 或更高版本，它就像

```
 function checkEmail( $EmailCheck ){
    return filter_var( $EmailCheck, FILTER_VALIDATE_EMAIL );
  } 
```

显然添加错误处理..

# django - Django - 创建对象和子对象

> ID：14402375
> 
> 赞同：2
> 
> 时间：2013-01-18T15:42:22.657
> 
> 标签：django

我有以下代码：

```
class Album(models.Model):
  name = models.CharField(max_length=255, unique=True, null=False)
  rating = models.ForeignKey("Rating", null=False)

class Rating(models.Model):
  value = models.IntegerField(null=False, default=0) 
```

创建对象（专辑）及其子对象（评级）并保存它的最佳方法是什么（在 django/python 哲学中）？

我已经这样做了：

```
a = Album()
a.name = "..."
r = Rating()
r.save()
a.rating = r
a.save() 
```

我不喜欢这样，因为创建空子对象的部分完全没有用。我更喜欢这样的简单方法 - 应该自动创建子对象：

```
a = Album()
a.name = "..."
a.save() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T15:51:43.340

你会想要调查的[`signals`](https://docs.djangoproject.com/en/1.4/topics/signals/)。

本质上，当保存对象时会发送信号。

[`pre_save`](https://docs.djangoproject.com/en/dev/ref/signals/#pre-save)然后，您可以使用信号创建一个`Rating`并将其关联到新的`Album`jsut，然后再首次保存它。

```
from django.db.models.signals import pre_save
from django.dispatch import receiver
from myapp.models import Album, Rating

@receiver(pre_save, sender=Album)
def add_rating_to_album(sender, **kwargs):

    # If saving a new Album
    if not instance.id:

        # Create and save a new rating
        rating = Rating()
        rating.save()

        # Associate it to the Album being saved
        instance.rating = rating

    # Continue to normal save with new rating applied 
```

*我还没有测试过这个特定的代码，但它应该能让你朝着正确的方向前进*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T16:13:20.743

正如rockingskier 所说，使用信号是一种很好的方法，因为您的 Album 对象不必了解有关 Rating 的任何信息，因此它可以获得独立性。

另一种方法是覆盖`save`Album 的方法并在那里创建新的 Rating 对象，此代码基于[Django 文档](https://docs.djangoproject.com/en/1.4/topics/db/models/#overriding-model-methods)中的示例：

```
class Album(models.Model):
    name = models.CharField(max_length=100)

def save(self, *args, **kwargs):
    # do something here
    super(Album, self).save(*args, **kwargs) # Call the "real" save() method.
    # do anything else 
```

这可能是一种更简单的方法，但您的专辑模型将与您的评级模型相关联。

# android - 是否可以使用 Android Animator 为 DialogFragment 条目设置动画？

> ID：14402382
> 
> 赞同：9
> 
> 时间：2013-01-18T15:42:50.057
> 
> 标签：android, android-animation, objectanimator

当用户单击我的应用程序上的按钮时，`DialogFragment`我有一个。`show()`

我想设置一个动画以`DialogFragment`在它启动时进行 Z 轴旋转（即 3d 卡片翻转动画）。

当显示时，我已成功使用`windowAnimationStyle`和以下样式来制作简单的动画（使用 View Animation 框架）`DialogFragment`：

```
<style name="windowAnimationCardFlip" parent="@android:style/Animation.Dialog">
        <item name="android:windowEnterAnimation">@anim/card_flip_left_in</item>
        <item name="android:windowExitAnimation">@anim/card_flip_left_out</item>
 </style> 
```

问题是 View Animation 框架（据我所知）非常有限，并且我能够做的唯一旋转（至少在 xml 上）是 2D XY 旋转（我想要一个“3D " z 轴旋转）。

[我尝试使用 Property Animation 框架（特别是Object](http://developer.android.com/training/animation/cardflip.html) Animator，用 XML 编写），但是，`Fragments`当我尝试将 XML 应用到属性，没有任何反应。`ObjectAnimator``windowEnterAnimation`

那么，我想知道会发生什么？是否可以使用 ObjectAnimator 为 windowEntry 事件设置动画？如果没有，还有其他解决方案吗？

# css - 想在不点击任何键的情况下查看源代码

> ID：14402386
> 
> 赞同：0
> 
> 时间：2013-01-18T15:42:54.247
> 
> 标签：css, jquery-ui, firefox, firebug

在我的 Web 应用程序中，我看到一个奇怪的行为。一个奇怪的边框出现在符合灯箱的“确定”按钮上（使用 jquery-ui 对话框创建）。现在我想使用萤火虫或查看源代码进行更多调试。但是一旦我单击奇怪的边框就会消失。有没有办法“查看源代码”而无需单击 firefox/chrome 中的任何键（左/右）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T15:44:50.850

Chrome 和 Firebug 都允许您在开发者工具中设置悬停/焦点状态。

* * *

以下是在 Chrome 开发人员工具中执行此操作的方法：

![Chrome 开发者工具悬停/聚焦](../Images/6fa3d3b1ee5f3d01c692e5c6395bd0d5.png)

* * *

以下是在 Firebug 中的操作方法：

![Firebug 悬停/聚焦](../Images/781260550a6603a03524ed3ae54a5ed7.png)

# xamarin.android - 设置/覆盖应用部署文件夹

> ID：14402393
> 
> 赞同：0
> 
> 时间：2013-01-18T15:43:09.247
> 
> 标签：xamarin.android

有没有办法在 Mono for Android 中设置或覆盖项目部署文件夹？例如，我的应用程序现在部署到`/data/data/SolutionEngine/files/.__override__`

该应用程序的本质是它使用反射加载插件，并且默认情况下它会在`/Adapters`应用程序根目录的子文件夹中查找。这就是它在桌面和 Compact Framework 上的工作方式，所以为了简单起见，我们希望继续在 Android 上做同样的事情。

如果我有一个包含应用程序和一些插件的单一解决方案，我希望在我开始调试时将这些文件部署在正确的结构中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T18:59:35.973

您可以将插件写为 android 资产（请参见下面的屏幕截图）。***请注意：***您可能需要将扩展​​名更改为 .mp3。见[这里](https://stackoverflow.com/questions/5566821/cant-get-file-descriptor-for-asset)。不过我没有这个问题。

![在此处输入图像描述](../Images/57c5b367ea45bdf545dab275770f783e.png)

完成此操作后，您应该能够使用 Asset Manager 获取资产。您可以将它们复制到不同的文件夹或对它们执行任何操作。这是将它们读入内存并写出名称的示例。

```
const String pluginPath = "Plugins";

var pluginAssets = Assets.List(pluginPath);
foreach (var pluginAsset in pluginAssets)
{
    var file = Assets.Open(pluginPath + Java.IO.File.Separator + pluginAsset);

    using (var memStream = new MemoryStream())
    {
        file.CopyTo(memStream);

        //do something fun.
        var assembly = System.Reflection.Assembly.Load(memStream.ToArray());
        Console.WriteLine(String.Format("Loaded: {0}", assembly.FullName));
    }

} 
```

# search - 如何在 Solr 4 地理空间搜索中获取距离？

> ID：14402397
> 
> 赞同：6
> 
> 时间：2013-01-18T15:43:16.807
> 
> 标签：search, solr, geospatial, distance

我正在使用新的 Solr 4 地理空间搜索。就像在[http://wiki.apache.org/solr/SolrAdaptersForLuceneSpatial4](http://wiki.apache.org/solr/SolrAdaptersForLuceneSpatial4)的一个例子中我试图得到这样的结果：

```
http://localhost:8983/solr/allopenhours/select?  
&q=foobar  
&fq=geo:%22Intersects(Circle(54.729696,-98.525391%20d=0.08992))%22  
&q={!%20score=distance}  
&fl=*,score 
```

但它不起作用。如何在结果集中获取距离和分数字段？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-18T18:08:30.017

根据参考[空间搜索 - 返回距离](http://wiki.apache.org/solr/SpatialSearch#Returning_the_distance)，您可以编辑字段参数以执行以下操作之一：

*   `&fl=*,score,geodist()`
*   `&fl=*,score,_dist_:geodist()`- 这个将返回别名中的距离`_dist_`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-06-30T10:28:34.630

佩奇给出的答案是正确的。但是，根据给定的查询显示错误。

`Error parsing fieldname: geodist - not enough parameters:[]`

geodist 需要`sfield`（保存文档中位置的字段）和 a `pt`（圆的中心点）。如果它找不到任何这些，它将抛出显示的错误。

将这两个添加到 URL

```
&pt=52.373,4.899&sfield=store&fl=_dist_:geodist() 
```

或者将两个（或实际上是 3:`pt`和`lat`）`lon`添加到`geodist()`函数调用中：

```
&fl:_dist_:geodist(store,52.373,4.899) 
```

请注意，在第一种情况下，如果您`geofilt`的查询中有其他地理功能（如 ），则`pt`and`sfield`也用于此目的（除非本地覆盖）

# java - 如何在 Java 中重现 const 指针的行为？

> ID：14402398
> 
> 赞同：0
> 
> 时间：2013-01-18T15:43:17.727
> 
> 标签：java, c++, const-pointer

我有一个包含一堆控制数据的单例类，这些控制数据需要与我的应用程序的其余部分保持同步。结果，很多时候我希望另一个类能够读取信息但不能修改它。目前，这个单例类有很多公共变量。我不想使用 getter 和 setter 函数，因为它们冗长且烦人。此外，还有很多变数。

如果我的单例类称为 ControlData，我可以创建第二个创建第二个名为 ImmutableControlData 的类，它具有所有相同的成员，但它们被声明为 final。然后，在检索我的单例时，我将返回一个 ImmutableControlData，而不是一个 ControlData 对象。但是，这意味着我需要不断维护 ImmutableControlData 类以及 ControlData 类（烦人...）

如果我有 const 指针，我只会返回一个指向我的 ControlData 对象的 const 指针。相反，我可以用 Java 做什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T15:52:52.280

Java 不像 C++ 那样具有 const 正确性。

您可以创建一个接口来声明读取数据的方法，但不能声明修改数据的方法。让保存数据的类实现这个接口。程序中其他地方应该只读取数据的方法应该接受接口而不是类作为参数类型。例如：

```
public interface ReadablePerson {
    String getName();
}

public class Person implements ReadablePerson {
    private String name;

    @Override
    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }
}

// Elsewhere...
public void someMethod(ReadablePerson p) {
    System.out.println(p.getName());
} 
```

当然，`someMethod`你仍然可以通过强制转换`p`来颠覆这一点`Person`，但至少它需要一些有意识的努力（添加强制转换），这应该提醒程序员他正在做他不应该做的事情。

此解决方案的一个优点是您不必制作数据的防御性副本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T15:55:20.677

第一：如果您的班级有这么多成员，您应该尝试将班级分成更小的班级。也许你可以总结一些变量，例如。

ControlflowVariables 状态变量

如果要限制对变量的访问，则必须使用 getter。IDE 可以为您创建 getter 和 setter。对变量的访问是一样的：

`singletonClass.variable`那时还不是最糟糕的`singletonClass.getVariable()`

如果您只想在代码中的某些点限制访问，请创建 tha 变量的最终副本

```
final int variable = singletonClass.getInstance().variable; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T15:55:35.557

就个人而言，我不会尝试以这种方式控制访问。没有什么可以防止糟糕的程序员滥用你的类。即使在 C++ 中，他们也可以使用简单`const_cast`的方法来移除您的“保护”并以他们喜欢的任何方式修改单例。

相反，我会重组代码，让其他人更容易做正确的事情，而让他们很难出错。将 ControlData 的接口分离为两个独立的接口：一个用于读取对象，一个用于更新对象。然后只需在需要的地方提供两个接口。

# ruby-on-rails - 使用 will_paginate 从 Rails 查询中获取总结果数

> ID：14402400
> 
> 赞同：25
> 
> 时间：2013-01-18T15:43:27.213
> 
> 标签：ruby-on-rails, will-paginate

我从我的 Rails 应用程序中获取对象列表，并像往常一样使用 will_paginate 进行分页，然后我有一个小方法用于将搜索的详细信息保存到数据库中：

```
per_page=10
session[:search_params] = params[:search_people]
@documents = Person.search_people(params[:search_people], params[:page], per_page)

Search.create(:user_id     => (!current_user ? 0 : current_user.id),
   :search_type => "Person", 
   :firstname   => params[:search_people][:first_name], 
   :lastname    => params[:search_people][:last_name],
   :results     => @documents.count ) 
```

问题是，搜索结果的数量 (@douments.count) 总是 <= per_page 用于 will_paginate。

我明白为什么会这样，但是有没有办法绕过它而不运行两次查询，一次使用 will_paginate 一次没有？

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2013-01-18T15:44:58.463

尝试`<%=@documents.total_entries%>`

# iphone - UINavigationController 中的 ViewController 方向更改

> ID：14402401
> 
> 赞同：13
> 
> 时间：2013-01-18T15:43:30.453
> 
> 标签：iphone, ios, ipad, uinavigationcontroller, orientation

所以我有以下层次结构：

`UINavigationController`--> RootViewController ( `UIViewController`) --> `UITableViewController`--> DetailViewController ( `UIViewController`)

我想将 RootViewController 上的方向锁定为仅纵向，但将所有方向留给其余视图控制器。

如果我把它放到子类中`UINavigationController`：

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    // Return YES for supported orientations
    return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

-(NSUInteger)supportedInterfaceOrientations{
    return UIInterfaceOrientationMaskPortrait;
} 
```

然后所有视图控制器都被锁定为纵向。

我的问题是，有没有办法只将 RootViewController 锁定到 Portrait，但将所有选项留给其他视图控制器？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-01-18T16:13:05.887

检查此处的链接以修复 iOS 6 中的自动旋转并根据视图设置方向支持：[http ://www.disalvotech.com/blog/app-development/iphone/ios-6-rotation-solution/](http://www.disalvotech.com/blog/app-development/iphone/ios-6-rotation-solution/)

这是您可以执行的操作：

1.  `UINavigationController`在 .m 文件中创建一个自定义导航控制器，它是 , 的子类：

    ```
     - (BOOL)shouldAutorotate
     {
          return self.topViewController.shouldAutorotate;
     }
     - (NSUInteger)supportedInterfaceOrientations
     {
          return self.topViewController.supportedInterfaceOrientations;
     } 
    ```

2.  在你的`AppDelegate.h`,

    ```
     @interface AppDelegate : UIResponder <UIApplicationDelegate> {

          UINavigationController *navigationController;
          ViewController *viewController;
      }

      @property (strong, nonatomic) UIWindow *window;
      @property (strong, nonatomic) ViewController *viewController; 
    ```

    并且在`AppDelegate.m`,

    ```
     - (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
      {
            // set initial view
           self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];

           viewController = [[ViewController alloc] initWithNibName:@"RootViewController" bundle:nil];

           navigationController = [[CustomNavigationController alloc]
                        initWithRootViewController:viewController]; // iOS 6 autorotation fix
           [navigationController setNavigationBarHidden:YES animated:NO];

            self.window = [[UIWindow alloc]
               initWithFrame:[[UIScreen mainScreen] bounds]];

            [self.window setRootViewController:navigationController]; // iOS 6 autorotation fix
            //[self.window addSubview:navigationController.view];

            [self.window makeKeyAndVisible];

             return YES;
      }

      - (NSUInteger)application:(UIApplication *)application supportedInterfaceOrientationsForWindow:(UIWindow *)window  // iOS 6 autorotation fix
      {
              return UIInterfaceOrientationMaskAll;

      } 
    ```

3.  在您的 rootViewController 中，无论事件推送第二个视图控制器，请执行以下操作：

    ```
     - (IBAction)pushSecondViewController:(id)sender {

        // push second view controller
        SecondViewController *secondViewController = [[SecondViewController alloc] initWithNibName:@"SecondViewController" bundle:nil];
        [self.navigationController pushViewController:secondViewController animated:YES];
       } 
    ```

4.  在您的每个视图控制器中，添加

    ```
     - (BOOL)shouldAutorotate{}
       - (NSUInteger)supportedInterfaceOrientations{} 
    ```

    对于 iOS 6，您可以单独设置每个视图控制器所需的方向支持。

    对于 iOS 5 及以下，您可以设置

    ```
     - (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation{} 
    ```

所有功劳归于在链接中编写示例应用程序的 John DiSalvo。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-08-19T02:33:14.300

在单身

```
-(void)setOrientationSupport:(BOOL)flag{

    flag_orientationSupport_ = flag;
}

-(BOOL)getOrientationSupport{

    return flag_orientationSupport_;
} 
```

在应用程序中

```
- (NSUInteger)application:(UIApplication *)application supportedInterfaceOrientationsForWindow:(UIWindow *)window
{

    if ([singleton getOrientationSupport])
        return UIInterfaceOrientationMaskAll;
    else
        return UIInterfaceOrientationMaskPortrait;
} 
```

在viewwillappear中添加如下代码

对于您想要支持方向的视图控制器

```
[singleton setOrientationSupport:YES]; 
```

对于那些你想要禁用方向的控制器

```
[singleton setOrientationSupport:NO]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T16:24:33.970

把它放在你的导航控制器中：

```
- (BOOL)shouldAutorotate
{
    return self.topViewController.shouldAutorotate;
}

-(NSUInteger)supportedInterfaceOrientations
{
    return UIInterfaceOrientationMaskAll;
} 
```

现在，将其添加到您的根视图控制器：

```
- (BOOL)shouldAutorotate
{
    return NO;
} 
```

应该这样做！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-02-10T13:59:29.640

要将定义允许方向的责任委托给 UINavigationController 的子视图，可以使用导航控制器的 visibleViewController 属性使导航控制器“询问”其子视图的支持方向。以下代码应该可以工作（Swift）：

1.  子类导航控制器：

    ```
    override func supportedInterfaceOrientations() -> UIInterfaceOrientationMask {

        if let visibleView = self.visibleViewController {
            return visibleView.supportedInterfaceOrientations()
        } else {
            return UIInterfaceOrientationMask.All
        }
    } 
    ```

2.  导航控制器的子视图（根视图）：

    ```
    // Restrict to portrait
    override func supportedInterfaceOrientations() -> UIInterfaceOrientationMask {
        return UIInterfaceOrientationMask.Portrait
    } 
    ```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2015-03-31T11:36:05.607

我一直在寻找解决方案几个小时！

因此，在到处实施所需的方法之后。`shouldAutorotate`不需要设置，`YES`因为它已经设置为默认值：

```
- (NSUInteger)supportedInterfaceOrientations{
    return UIInterfaceOrientationMaskPortrait;
}

- (UIInterfaceOrientation)preferredInterfaceOrientationForPresentation{
     return UIInterfaceOrientationPortrait;
} 
```

当需要显示`UIViewController`哪个需要与其他视图不同的方向时，我在`UIStoryboardSegue`内部创建了一个具有此实现的：

```
#import "Showing.h"

@implementation Showing

- (void)perform{
    NSLog(@"Showing");
    UIViewController *sourceVC = self.sourceViewController;
    UIViewController *presentingVC = self.destinationViewController;

    [sourceVC.navigationController presentViewController:presentingVC 
                                                animated:YES 
                                              completion:nil];
}

@end 
```

在里面，`UIStoryboard`我将视图与这个 segue 连接起来（**显示**）：

![在此处输入图像描述](../Images/72628265d8fb2afd3798a9c2201751b8.png)

这很重要，您正在使用

```
presentViewController:animated:completion: 
```

**并不是**

```
pushViewController:animated: 
```

否则将无法再次确定方向。

* * *

我一直在尝试像

```
[UIApplication sharedApplication] setStatusBarOrientation:UIInterfaceOrientationPortrait]; 
```

**或者**这个在方向应该改变的地方，我也试着在我的自定义之前`UIViewController`调用它：`UIStoryboardSegues``presentingViewController``dismissViewController`

```
[UIViewController attemptRotationToDeviceOrientation]; 
```

**或者**

```
NSNumber *numPortrait = [NSNumber numberWithInt:UIInterfaceOrientationPortrait];
[[UIDevice currentDevice] setValue:numPortrait forKey:@"orientation"]; 
```

但没有一个人工作。当然最后一个例子不应该是一个选项，因为如果苹果会改变他们的任何 api 这可能会导致你的应用程序内部出现问题。

我也尝试使用该`AppDelegate`方法，并在寻找`UIInterfaceOrientation`实际的正确方向后始终确定该方法内部的方向，`visibleViewController`但有时在从一个方向切换到另一个方向时会发生崩溃。所以我仍然想知道为什么它变得如此复杂，而且似乎也没有任何文档可以正确解释它。即使遵循[这部分也对我没有帮助](http://bit.ly/supportMultiInterfaceOrientation)。

# php - 在 Symfony2 Twig 模板中使用 Wordpress Codex

> ID：14402406
> 
> 赞同：1
> 
> 时间：2013-01-18T15:43:52.287
> 
> 标签：php, wordpress, symfony, twig, codex

过去几个月我们一直忙于开发 Symfony 应用程序。除此之外，我们还开发了一个 Wordpress 网站。现在我正忙于将 Wordpress 网站集成到 Symfony 应用程序中，我将其分为两步。

**第 1 步：**处理请求。Symfony2 或 Wordpress 应该处理传入的请求。这一步对于整个应用的部署结构很重要。

**第 2 步：**将 Wordpress 包含到 Symfony2 Twig 模板中。因为 Symfony2 没有开箱即用的 CMS。

第一步很顺利，我在[https://gist.github.com/1170134](https://gist.github.com/1170134)上找到了一个非常好的片段，并将其实现到 Symfony app.php 文件中。wordpress 安装现在位于 Symfony 安装的 /web 目录中

第二步有点难，是我无法修复的部分。[安装像https://github.com/kayue/WordpressBundle](https://github.com/kayue/WordpressBundle)这样的 WordpressBundle 并不能解决问题。我尝试从集成 Wordpress 页脚（模板目录的 footer.php）开始。我的问题：

*   如何使用 Twig 模板中的 Codex php 函数？[我按照http://symfony.com/doc/2.0/cookbook/templating/PHP.html](http://symfony.com/doc/2.0/cookbook/templating/PHP.html)上的 Cookbook 进行了尝试是[http://inhoo.net/wordpress/twig-wordpress-part2/](http://inchoo.net/wordpress/twig-wordpress-part2/)中解释的方法吗使用 Codex 的最佳解决方案？
*   如何将 php 文件包含到我的 Twig 模板中？[嵌入](http://twig.sensiolabs.org/doc/tags/embed.html)footer.php 有效，但 php 没有被执行。我确实将 php 作为渲染引擎添加到我的 config.yml 中。我想在我的 Symfony2 模板中包含 Wordpress 模板 footer.php 文件

解决了以上问题，留给未来的是：

**第 3 步：**在 Wordpress 模板中使用 Twig

**第 4 步：**在 Wordpress 模板中使用 Symfony2 变量

为了解决第 3 步，我找到了[https://github.com/cordoval/Twig-for-WordPress](https://github.com/cordoval/Twig-for-WordPress)。我不知道的是，这个包的维护是否足以跟上 Symfony 的发布速度。

对于第 4 步，我还没有找到任何东西。现在这实际上无关紧要，但我可以想象有更多的人正在为上述所有这 4 个步骤而苦苦挣扎。

# url - 不带 http://www 的域名的最大长度。& .com 零件

> ID：14402407
> 
> 赞同：63
> 
> 时间：2013-01-18T15:44:00.707
> 
> 标签：url, dns, max

域中“名称”部分的最大长度是多少？我指的是`google`in `http://www.google.com`。`google`如果没有之前和之后的内容，该部分可以持续多久？

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2013-01-18T16:13:56.830

每个标签最多可包含 63 个字符。

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2013-01-18T15:47:26.897

“URI 生产者应该使用符合 DNS 语法的名称，即使 DNS 的使用不是很明显，并且应该将这些名称的长度限制为不超过 255 个字符。”

[https://www.rfc-editor.org/rfc/rfc3986](https://www.rfc-editor.org/rfc/rfc3986)

“DNS 本身只对可用于识别资源记录的特定标签设置了一项限制。这一限制与标签的长度和全名有关。任何一个标签的长度都限制在 1 到 63 个八位字节之间. 完整的域名限制为 255 个八位字节（包括分隔符）。”

[https://www.rfc-editor.org/rfc/rfc2181](https://www.rfc-editor.org/rfc/rfc2181)

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2013-01-18T15:45:31.793

完整的域名在其外部点标签规范中的总长度不得超过 253 个字符。

[http://en.wikipedia.org/wiki/Domain_Name_System](http://en.wikipedia.org/wiki/Domain_Name_System)

如果您获得接近 253 个字符的任何地方，我认为您应该寻找一个较短的域名...

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2015-11-12T05:20:52.143

作为演示，本网站有一个 63 个字符的域名，允许的最大值：http: [//63-characters-is-the-longest-possible-domain-name-for-a-website.com](http://63-characters-is-the-longest-possible-domain-name-for-a-website.com)

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2021-02-20T19:36:19.740

# TLDR 答案

使用这些限制：

> 标签：**`61`**八位字节。
> 
> 名称：**`253`**八字。

即使您超出了这些限制（例如 Gmail），许多应用程序也能正常工作，但也有许多较旧的应用程序不能工作。

# 来源

**[RFC1035：域名 - 实施和规范](https://www.rfc-editor.org/rfc/rfc1035)**（1987 年 11 月发布），一种公认的[Internet 标准](https://en.wikipedia.org/wiki/Internet_Standard#:%7E:text=An%20Internet%20Standard%20is%20characterized,that%20was%20discontinued%20in%202011.)，在浏览器中查看时对子域和整个域长度给出以下限制......

> DNS 中的各种对象和参数都有大小限制。它们在下面列出。有些可以很容易地改变，有些则更基本。
> 
> 标签 `63`八位字节 [字节/字符] 或更少
> 
> 名称 `255`八位字节 [字节/字符] 或更少

这些的工作级别是：

*   标签：**`61`**八位字节。
*   名称：**`253`**八字。

这是因为[**`RFC821`**](https://www.rfc-editor.org/rfc/rfc821)（1982 年 8 月发布）以 的格式定义电子邮件`user@domain.com`，而 的最小值`user`是一个字符。这留下了一个字符`@`，然后你就`253`只剩下这个`domain.com`部分的字符了。

这被反复确认了无数次...

*   [**RFC2181：对 DNS 规范的澄清**](https://www.rfc-editor.org/rfc/rfc2181)（1997 年 7 月发布）：只是一个提议的标准。*“一个完整的域名限制为 255 个八位字节（包括分隔符）。”*

*   [**RFC3986：统一资源标识符 (URI)：通用语法**](https://www.rfc-editor.org/rfc/rfc3986)（2005 年 1 月发布）：接受的 Internet 标准。 *“URI 生产者应该使用符合 DNS 语法的名称，即使 DNS 的使用不是很明显，并且应该将这些名称的长度限制为不超过 255 个字符。”*

*   [**RFC5321：简单邮件传输协议**](https://www.rfc-editor.org/rfc/rfc5321)（2008 年 10 月发布）：只是一个提议的标准。该 RFC 给出了标签或子域的最大长度，`64`比其他的多一个`63`。我建议坚持使用`63`. *“域名或号码的最大总长度为 255 个八位字节。”*

每个标签（或子域）可以有 63 个字符，每个名称（包括 TLD）可以有 255 个字符。

请注意，它给出了*octets*中的定义。那是因为它正在查看物理字节，而不是文字字节。例如，`\.`被解释为`.`（一个文字字节），因为`\`转义它，但它被编码为`\.`（两个物理字节）。这些八位字节限制是物理字节限制。

# mysql - 覆盖 MySQL UNION 中的隐含数据库？

> ID：14402408
> 
> 赞同：0
> 
> 时间：2013-01-18T15:44:04.737
> 
> 标签：mysql, select, union

我发誓，这仅用于教育目的...

MySQL 查询如下所示：

```
SELECT * 
FROM mytable 
where name='value' AND addr='value' 
UNION SELECT * 
      FROM mysql.user; 
```

但我得到的错误是没有`mysql.mytable table`.

我可以在工会或其中任何一个值中做些什么来使我的查询有效吗？除了`mytable`在代码中明确说明数据库名称之外？假设我不能在“值”之前更改查询中的任何内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T15:48:52.713

目前还不清楚您要从中选择什么`information_schema.user`。`information_schema`是标准的 MySQL 数据库，默认情况下它就在那里。但是，此数据库中没有`user`表。

要查看数据库列表，请在 MySQL 控制台中执行此操作：

```
show databases; 
```

查看数据库中的表：

```
use information_schema
show tables; 
```

从您所说的来看，您似乎`information_schema`默认使用数据库。此外，您正在尝试`mytable`在此数据库中进行选择，该表似乎也不存在。你能运行上面的命令并向我们展示输出吗？

**更新：**如果您需要从两个不同的数据库中进行选择：

```
select * from mydatabase.mytable union select * from mysql.users 
```

`mydatabase`如果`mytable`在您当前的数据库中，则删除或提供数据库的正确名称。`mydatabase`这里只是一个例子。

但是，正如已经向您指出的那样，您应该在两个表中具有相同的列，或者指定从每个表中选择相同的列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T15:49:01.897

对于功能有效的 UNION 子句，您必须在两个查询中具有相同的列。选择中缺少列，使用别名突出显示默认 NULL：

```
Select *, NULL as "column1" FROM table1 ... 
```

# select - SQL选择计算具有不同其他列的列

> ID：14402412
> 
> 赞同：1
> 
> 时间：2013-01-18T15:44:16.103
> 
> 标签：select, count

我有一张桌子如下：

```
Ord_no | Share_no
   1      1160
   1      1160
   2      1170
   3      1160
   3      1170 
```

我想计算`Ord_no`相同`Share_no`记录的差异。例如 ：

```
Count Share_no=1160 ~~> 2 
Count Share_no=1170 ~~> 2 
```

我使用 C# .net 并希望通过存储过程将 1160 条记录传递到数据库并给出“2”作为查询结果。

“从 ord_tbl 中选择 count(*), share_no，其中 share_no=@share_no 按 share_no 分组”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T16:01:42.780

我假设你的表名**测试**，答案应该是：

```
select count(*), share_no from test group by share_no; 
```

# ios - 从 CIImage 获取 CGImage

> ID：14402413
> 
> 赞同：26
> 
> 时间：2013-01-18T15:44:17.757
> 
> 标签：ios, core-graphics, core-image, cgimage, ciimage

我有一个从 CIImage 加载的 UIImage：

`tempImage = [UIImage imageWithCIImage:ciImage];`

问题是我需要裁剪`tempImage`到一个特定`CGRect`的，我知道如何做到这一点的唯一方法是使用`CGImage`. 问题是在 iOS 6.0 文档中我发现了这个：

**CG图像**
`If the UIImage object was initialized using a CIImage object, the value of the property is NULL.`

A. 如何从 CIImage 转换为 CGImage？我正在使用这段代码，但我有内存泄漏（并且无法理解在哪里）：

```
+(UIImage*)UIImageFromCIImage:(CIImage*)ciImage {  
    CGSize size = ciImage.extent.size;  
    UIGraphicsBeginImageContext(size);  
    CGRect rect;  
    rect.origin = CGPointZero;  
    rect.size   = size;  
    UIImage *remImage = [UIImage imageWithCIImage:ciImage];  
    [remImage drawInRect:rect];  
    UIImage *result = UIGraphicsGetImageFromCurrentImageContext();  
    UIGraphicsEndImageContext();  
    remImage = nil;  
    ciImage = nil;  
    //
    return result;  
} 
```

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2017-08-22T10:19:29.397

**斯威夫特 3**、**斯威夫特 4**和**斯威夫特 5**

这是一个在 Swift 中将a 转换`CIImage`为的不错的小函数。`CGImage`

```
func convertCIImageToCGImage(inputImage: CIImage) -> CGImage? {
    let context = CIContext(options: nil)
    if let cgImage = context.createCGImage(inputImage, from: inputImage.extent) {
        return cgImage
    }
    return nil
} 
```

笔记：

*   `CIContext(options: nil)`将使用软件渲染器，可能会很慢。要提高性能，请使用`CIContext(options: [CIContextOption.useSoftwareRenderer: false])`- 这会强制操作在 GPU 上运行，并且可以更快。
*   如果您`CIContext`多次使用，请按照苹果的建议进行缓存。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2013-01-18T15:59:54.910

请参阅[createCGImage:fromRect](https://developer.apple.com/library/ios/documentation/GraphicsImaging/Reference/QuartzCoreFramework/Classes/CIContext_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40001310-BCIFIFEE)`CIContext`的文档：

```
CGImageRef img = [myContext createCGImage:ciImage fromRect:[ciImage extent]]; 
```

从一个类似问题的答案：[https ://stackoverflow.com/a/10472842/474896](https://stackoverflow.com/a/10472842/474896)

此外，由于您有一个`CIImage`开始，您可以使用`CIFilter`实际裁剪您的图像。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-01-18T17:50:34.233

经过一番谷歌搜索后，我发现了这种将 CMSampleBufferRef 转换为 CGImage 的方法：

```
+ (CGImageRef)imageFromSampleBuffer:(CMSampleBufferRef) sampleBuffer // Create a CGImageRef from sample buffer data
{
    CVImageBufferRef imageBuffer = CMSampleBufferGetImageBuffer(sampleBuffer);
    CVPixelBufferLockBaseAddress(imageBuffer,0);        // Lock the image buffer

    uint8_t *baseAddress = (uint8_t *)CVPixelBufferGetBaseAddressOfPlane(imageBuffer, 0);   // Get information of the image
    size_t bytesPerRow = CVPixelBufferGetBytesPerRow(imageBuffer);
    size_t width = CVPixelBufferGetWidth(imageBuffer);
    size_t height = CVPixelBufferGetHeight(imageBuffer);
    CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB();

    CGContextRef newContext = CGBitmapContextCreate(baseAddress, width, height, 8, bytesPerRow, colorSpace, kCGBitmapByteOrder32Little | kCGImageAlphaPremultipliedFirst);
    CGImageRef newImage = CGBitmapContextCreateImage(newContext);
    CGContextRelease(newContext);

    CGColorSpaceRelease(colorSpace);
    CVPixelBufferUnlockBaseAddress(imageBuffer,0);
    /* CVBufferRelease(imageBuffer); */  // do not call this!

    return newImage;
} 
```

（但我关闭了标签，所以我不知道我从哪里得到它）

# javascript - 无法重定向到任何网站 - jQuery

> ID：14402414
> 
> 赞同：0
> 
> 时间：2013-01-18T15:44:21.913
> 
> 标签：javascript, jquery, redirect

我从 jQuery 开始，真的需要帮助。我有悬停的图像，它显示两个按钮 - 编辑和删除。点击画廊编辑按钮后，我只需要重定向到任何网站。但它没有任何效果。这是我的代码：

```
<ul class="thumbnails galler">
<li id="image-1" class="thumbnail">
    <a style="background:url({$basePath}/images/products/item1.jpg)" title="Sample Image 1" href="{$basePath}/images/products/item1.jpg"><img class="grayscale" src="{$basePath}/images/products/item1.jpg" alt="Sample Image 1"></a>
</li>
</ul>

<script type="text/javascript">
//gallery controlls container animation
$('ul.galler li').hover(function(){
    $('img',this).fadeToggle(1000);
    $(this).find('.gallery-controls').remove();
    $(this).append('<div class="well gallery-controls">'+
        '<p><a href="http://www.somewebsite.com" class="gallery-edit btn"><i class="icon-edit"></i></a> <a href="#" class="gallery-delete btn"><i class="icon-remove"></i></a></p>'+
        '</div>');
    $(this).find('.gallery-controls').stop().animate({
        'margin-top':'-1'
    },400,'easeInQuint');
});

//gallery edit
$('.thumbnails').on('click','.gallery-edit',function(e){
    $.get(this.href);
    return false;
});
</script> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T15:46:16.313

`$.get`不重定向，它对提供的 url 执行 ajax 请求。你应该`location.href = {url}`改用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T15:47:53.847

如果您知道 href，则可以使用本机 javascript 来代替。

```
window.location.href = //insert url here; 
```

但是您的代码的问题是您试图通过`this`关键字检索 href。关键字指的`this`是事件，而不是您尝试引用的实际锚元素。要获取链接，您想`e.currentTarget.href`改用。

**编辑**：出于某种愚蠢的原因，我没有注意到您也在使用`$.get`. 该功能对您想要的没有用。只需使用 Window 对象提供的本机属性来重定向浏览器，正如我和至少另一张海报在上面向您展示的那样。

# c++ - 使用 DEF 从 Visual Studio 2010 中的 DLL 导出函数

> ID：14402415
> 
> 赞同：7
> 
> 时间：2013-01-18T15:44:27.757
> 
> 标签：c++, visual-studio-2010, dll

我继承了一个**巨大的 C++**多项目解决方案，其中包含许多动态库，但**没有任何**

```
__declspec(dllexport) 
```

我[了解到](http://msdn.microsoft.com/en-us/library/z4zxe9k8.aspx)，不一定要插入任何*dllexport* （工作量很大），但是除了相应的*.dll*之外，还可以使用*.def*文件。

 *为了尝试我从[这里](http://msdn.microsoft.com/en-us/library/vstudio/ms235636.aspx)构建了一个“DLL Hello World”项目，从标题中删除了*dllexport*并且......拼命失败。用已经[引用](http://msdn.microsoft.com/en-us/library/z4zxe9k8.aspx)的页面的话来说，我的**关键问题**是如何

```
"[..] use the .def file when building the DLL." 
```

我的*.def文件是（我仅使用**Add*方法尝试代码）：

```
LIBRARY   MathFuncsDll
EXPORTS 
?Add@MyMathFuncs@MathFuncs@@SANNN@Z 
```

*在 Visual Studio 2010 中构建 DLL 以导出Add*方法时如何使用它？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-18T16:45:00.670

在这个问题面前过了半天，我才找到了解决方案：**[这里](http://msdn.microsoft.com/en-us/library/34c30xs1.aspx)****有描述。**

用我自己的话**在 VS2010**中恢复使用***.def*****文件导出符号的过程：**

 *1.  告诉 VS2010 编译一个动态库（.dll）。这是在库项目的**属性页中完成的。**
2.  [*通过使用修饰*（修饰）名称](http://msdn.microsoft.com/en-us/library/2ax8kbk1%28v=vs.100%29.aspx)（至少当您的语言是 C++ 时）来制作模块定义文件 (.def )。如果您使用*dllexport*您可以显示已导出的您的 .dll 符号，如此处[所述](http://msdn.microsoft.com/en-us/library/vstudio/b06ww5dd%28v=vs.100%29.aspx)。如果您还没有导出任何内容，请参阅[此](https://stackoverflow.com/questions/190326/c-finding-out-decorated-names?lq=1)帖子。
3.  将 .def 添加到其**属性页**中的库定义中。
4.  编译
5.  验证您工作的正确性，例如使用[Dependency Walker](http://www.dependencywalker.com/)打开依赖文件，例如*.exe*。您应该在依赖文件下方的依赖树中看到刚刚编译的库。应该没有错误或警告，例如*没有红色*。

如果您对*.def*文件还有其他疑问，请查看**“模块定义文件”**这一术语。**

# ajax - 获取 getXMLHTTP 未定义错误

> ID：14402419
> 
> 赞同：0
> 
> 时间：2013-01-18T15:44:49.817
> 
> 标签：ajax, xmlhttprequest

这是我的javascript：

```
<script type="text/javascript"> 
function getState(countryId)
{
   var strURL="findState.php?country="+countryId;
   var req = getXMLHTTP();
     //ERROR is right here
     //UNCAUGHT REFERENCE ERROR: getXMLHTTP IS NOT DEFINED
   if (req)
   {
     req.onreadystatechange = function()
     {
      if (req.readyState == 4)
      {
      // only if "OK"
     if (req.status == 200)
         {
        document.getElementById('statediv').innerHTML=req.responseText;
     } else {
       alert("There was a problem while using XMLHTTP:\n" + req.statusText);
     }
        }
      }
   req.open("GET", strURL, true);
   req.send(null);
   }
}
</script> 
```

它是从这里调用的：

```
 <tr>
   <td width="150">Country</td>
   <td width="150"><select style="background-color: #ffffa0" name="country" onchange="getState(this.value)"><option>Select Country</option><option value="1">USA</option><option value="2">Canada</option>       </select></td>
  </tr> 
```

为了安全起见，这是我的标题，也许我做错了？

```
<head>
    <link rel="stylesheet" type="text/css" href="view/css/application.css" />
    <script type="text/javascript" src="view/javascript/application.js" ></script>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script>
</head> 
```

另请注意，我正在处理[这个](http://roshanbh.com.np/2008/01/populate-triple-drop-down-list-change-options-value-from-database-using-ajax-and-php.html)示例，他正在使用 mysql 服务器，我正在使用 ODBC 连接到 Access 数据库。我不会为此使用 xmlHTTP 吗？老实说，我不知道。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T17:17:58.377

您的 getXMLHTTP() 应如下所示：

```
 <script type="text/javascript"> 
        function getXMLHTTP() {
           var x = false;
           try {
              x = new XMLHttpRequest();
           }catch(e) {
             try {
                x = new ActiveXObject("Microsoft.XMLHTTP");
             }catch(ex) {
                try {
                    req = new ActiveXObject("Msxml2.XMLHTTP");
                }
                catch(e1) {
                    x = false;
                }
             }
          }
          return x;
        }

        function getState(countryId){
          var strURL="findState.php?country="+countryId;
          var req = getXMLHTTP();

          if (req){
            req.onreadystatechange = function(){
              if (req.readyState == 4){
                if (req.status == 200){
                  document.getElementById('statediv').innerHTML=req.responseText;
                } else {
                  alert("There was a problem while using XMLHTTP:\n" + req.statusText);
                }
              }
            }
            req.open("GET", strURL, true);
            req.send(null);
           }
        }
</script> 
```

# android - 我如何知道 android repo 中的当前版本？

> ID：14402425
> 
> 赞同：2
> 
> 时间：2013-01-18T15:44:58.537
> 
> 标签：android, android-source

即如果我做了：

```
$ repo init -b froyo; repo sync 
```

我稍后会回到这个 repo，我如何确定签出的版本是哪个？换句话说，对以下内容的回应：

```
$ "unknown command which I am looking for" 
```

在这种情况下（或相应的版本号）应该是“froyo”，之后：

```
$ repo init -b gingerbread; repo sync 
```

它应该是“姜饼”（或相应的版本号）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T23:06:03.627

您可以在隐藏目录中打开`manifest.xml`文件。`.repo`在该文件中，您可以找到姜饼的以下标记和值：

```
default revision="refs/tags/android-2.3.4_r1" 
```

我不知道这是否是这样做的官方方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-01-13T13:50:24.053

**清单.git**

Repo 只下载包含清单文件的 git 存储库的给定版本。

该存储库存储在内部`.repo`，因此您可以使用以下命令查看其版本：

```
git --git-dir .repo/manifests.git log default 
```

在第一行显示我：

```
commit 985cbc6c03245ae454491a062a54afe9e7732d1e (tag: android-7.1.1_r6, origin/android-7.1.1_r6, m/android-7.1.1_r6, default) 
```

**获取所有 repos 的 SHA**

此命令也可能很有用，因为分支似乎正在移动并且没有同步所有子存储库：

```
repover() (
  # Print the revision of all repos.
  top="$(pwd)/"
  repo forall -c "pwd=\"\$(pwd)\"; echo \"\$(git log -1 --format=\"%H\") \${pwd#$top}\""
) 
```

输出形式为：

```
c3e60f38c81a3dd4ff49dca0f05f84a8b464004f art        
293d4633af7d80584c7968c650bced857f338bc0 bionic     
80ccac2fffc09ef0b8a1fe43c096788e12359a1d bootable/recovery                                               
3aaf722a8d25ed726d4aba5d96bd325afe74a61c build/blueprint                                                 
cfcaaa25117310666e02a989a6bd9d45e82d8041 build/kati 
a7229a08b7c5d481cb813d810f1d88c3de3cdc8b build/make 
2e020842dc44bb67c3aad84217b3e6c4fa8fd900 build/soong
4cc6ccbeeed7d8ddcfb0fc955e523ba6d86e9601 compatibility/cdd                                               
34c43035d43004a23d34b1ae6651f6ea2107eb4c cts        
dd452a4244dad07c53db525d314fdcf4429ffd46 dalvik 
```

# solr - Solr 将表达式存储为变量以避免重新计算它

> ID：14402426
> 
> 赞同：1
> 
> 时间：2013-01-18T15:44:59.330
> 
> 标签：solr

我想知道是否有办法将`Solr`函数表达式存储在中间变量中，这样它就不会每次都重新计算。

以我的具体需求为例。我有必要按距离排序（但每个距离都分组在不同的范围集中，就像距离分面的情况一样`frange`）。这些范围是用户可定义的，可以是任何长度。

例如，用户定义范围 set `1,2,3`，发送到的表达式`Solr`将是：

```
max(map(geodist(),0,1,1),max(map(geodist(),1,2,2),map(geodist(),2,3,3))) asc 
```

可以存储/记忆该`geodist()`调用，还是在`Solr`内部优化此类表达式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T21:13:17.033

我不确定以下内容，但可能值得一试：-

```
{!func}max(map($v3,0,1,1),$v2)&v2={!func}max($v4,$v5)&v4=map($v3,1,2,2)&v5=map($v3,2,3,3)&v3=geodist() 
```

以上称为参数解引用。

[http://wiki.apache.org/solr/LocalParams](http://wiki.apache.org/solr/LocalParams)

我们将函数 geodist() 分配给本地参数 v3。该参数被替换为另一组参数：- v4 和 v5，它们在 v2 和 main 函数中被进一步替换。

但是，上述功能是最近在 solr 4.0 中引入的

# c# - 左侧带有垂直滚动条的文本框

> ID：14402428
> 
> 赞同：2
> 
> 时间：2013-01-18T15:45:02.113
> 
> 标签：c#, winforms

我正在用 C# 开发一个 Windows 窗体应用程序，它在窗体上有一个多行 TextBox 控件。

由于特定（不相关）的原因，这个 TextBox 需要在 TextBox 控件的*左侧*有一个垂直滚动条。我当然已经在寻找解决方案，但找不到任何解决方案……所以我的问题是：

1）有没有办法让TextBox控件（或从TextBox或TextBoxBase派生的用户控件）的自动垂直滚动条出现在左侧而不是右侧？这是首选方法，因为所有 scolling 仍然由控件处理。由于为这样的 TextBox 设置 RightToLeft 属性实际上将滚动条向左移动，我觉得这里一定有一个黑客可以利用。

或者

2) 是否有一条消息可以在 TextBox 滚动时通过 IMessageFilter 实现拦截，即使它没有滚动条？即用户可以使用箭头键滚动，文本框将上下移动行，但我找不到任何消息发生时触发。

也许另一个想法如何做到这一点？

编辑添加：文本需要水平*向右*对齐！否则我早就解决了。

**2014 年 3 月 11 日的新编辑**：好的，在 BenVlodgi 发表评论后，我开始怀疑自己的理智。所以我创建了一个测试项目，现在我记得为什么设置`RightToLeft`为`Yes`不起作用。

下图在左侧显示了具有该设置的常规文本框。滚动条在左侧，文本在右侧，但文本显示不正确。句末句号移到句前。

第二个 TextBox 控件是 LarsTech 的答案中建议的，它可以正常工作并且不会移动任何标点符号。

![两个 TextBox 控件之间的区别](../Images/154a54c85e56bc18b7d00bb0e2c8dc30.png)

因此，我接受并奖励 LarsTech 的回答。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-03-10T15:12:51.040

我从 Rachel Gallen 的链接中获取了一些示例代码，并制作了这个版本的 TextBox：

```
public class TextBoxWithScrollLeft : TextBox {
  private const int GWL_EXSTYLE = -20;
  private const int WS_EX_LEFTSCROLLBAR = 16384;

  [DllImport("user32", CharSet = CharSet.Auto)]
  public extern static int GetWindowLong(IntPtr hWnd, int nIndex);

  [DllImport("user32")]
  public static extern int SetWindowLong(IntPtr hWnd, int nIndex, int dwNewLong);

  protected override void OnHandleCreated(EventArgs e) {
    base.OnHandleCreated(e);
    int style = GetWindowLong(Handle, GWL_EXSTYLE);
    style = style | WS_EX_LEFTSCROLLBAR;
    SetWindowLong(Handle, GWL_EXSTYLE, style);
  }
} 
```

我以前从未这样做过，但结果似乎奏效了：

![在此处输入图像描述](../Images/9f50fddb09b2bb42f1f31d7d745dc6a2.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T06:28:56.887

通过将 RightToLeft 属性设置为 true。但它说内容也是从右到左的，所以我不知道这是否能解决你的问题......但这是在左侧设置滚动条的一种方式。

[http://bytes.com/topic/c-sharp/answers/255138-scrollbar-position](http://bytes.com/topic/c-sharp/answers/255138-scrollbar-position)

# c++ - GCC .data 部分更改

> ID：14402432
> 
> 赞同：1
> 
> 时间：2013-01-18T15:45:16.723
> 
> 标签：c++, gcc

我最近使用 GCC 版本 2.9-gnupro-98r2 在我的计算机上从完全相同的源代码和完全相同的路径创建了两个可执行文件。当我对两个可执行文件进行二进制比较时，可执行文件的 .data 部分存在差异。有谁知道为什么会发生这种情况？我每次都需要生成一致的可执行文件。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T15:49:53.130

它可能与可执行文件中的时间戳信息有关。如果您的任何源使用该`__TIME__`宏，则在不同时间编译时二进制可执行文件将有所不同。

# r - 在 data.table 中的向量中查找所有匹配项

> ID：14402436
> 
> 赞同：3
> 
> 时间：2013-01-18T15:45:28.197
> 
> 标签：r, data.table

*[这个问题是对上一个问题](https://stackoverflow.com/questions/14393194/what-is-the-most-efficient-way-to-create-a-column-of-vectors-in-data-table-whe)的跟进。*

我有一个 id 的向量`sampleIDs`。我还有一个 data.table ，`rec_data_table`由 bid 键入并包含一列， `A_IDs.list`其中每个元素都是 aID 的集合（向量）。

我想创建第二个 data.table ，其中包含`sampleIDs`和 where
For each `aID`，有一个对应的所有 bID 的向量，
该 aID 出现在`A_IDs.list`列中。

例子：

```
> rec_data_table
   bid counts names_list A_IDs.list
1: 301     21        C,E       3,NA
2: 302     21          E         NA
3: 303      5      H,E,G     8,NA,7
4: 304     10        H,D        8,4
5: 305      3          E         NA
6: 306      5          G          7
7: 307      6        B,C        2,3

> sampleIDs
[1] 3 4 8

AB.dt <- data.table(aID=sampleIDs, key="aID")

# unkown step
AB.dt[ , bIDs := ????  ]

# desired result:
> AB.dt
    aid     bIDs
1:    3  301,307
2:    4      304
3:    8  303,304 
```

* * *

`AB.dt[]`我在通话中尝试了几条不同的线路。我能得到的最接近的是

```
rec_data_table[sapply(A_IDs.list, function(lst) aID %in% lst), bID] 
```

这将为我提供给定的所需结果`aID`，我可以重复创建向量列表并构建所需的结果。
`sampleIDs`

但是，我怀疑必须有一个更“适合 data.table”的方法来实现这一点。任何建议表示赞赏。

* * *

```
#--------------------------------------------------#
#           SAMPLE DATA                            #

library(data.table)
set.seed(101)

  rows <- size <- 7
  varyingLengths <- c(sample(1:3, rows, TRUE))
  A <-  lapply(varyingLengths, function(n) sample(LETTERS[1:8], n))
  counts <- round(abs(rnorm(size)*12))   
rec_data_table <- data.table(bID=300+(1:size), counts=counts, names_list=A, key="bID")

A_ids.DT <- data.table(name=LETTERS[c(1:4,6:8,10:11)], id=c(1:4,6:8,10:11), key="name")
rec_data_table[, A_IDs.list := sapply(names_list, function(n) c(A_ids.DT[n, id]$id))]
sampleIDs <- c(3, 4, 8) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T18:02:27.400

在我对上一个问题的回答中加入`tmp`to之后`A_ids.DT`，您可以通过查找来获得所需的`sampleIDs`输出`tmp`：

```
# ... from previous answer
# tmp <- A_ids.DT[tmp]

AB.dt <- setkey(tmp, id)[J(sampleIDs)][, list(bIDs = list(bID)),
                                       by = list(aid = id)]

# setkey(tmp, orig.order)
# previous answer continues ... 
```

Note that the capitalization of your `bID` column is different in these two questions, however. This is assuming, of course, that you *are not* executing the second to last line in your sample data. This ought to be faster than `%in%`-based approaches when there are many records due to the wonders of `data.table`'s binary search.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T16:28:46.897

我认为这可以提供您想要的输出：

```
myfun <- function(ids) {
  any(ids %in% sampleIDs)
}

rec_data_table[sapply(A_IDs.list, myfun),]

#    bID counts names_list A_IDs.list
# 1: 301     21        C,E       3,NA
# 2: 303      5      H,E,G     8,NA,7
# 3: 304     10        H,D        8,4
# 4: 307      6        B,C        2,3

rec_data_table[sapply(A_IDs.list, myfun), list(bID, A_IDs.list)]

#   bID A_IDs.list
# 1: 301       3,NA
# 2: 303     8,NA,7
# 3: 304        8,4
# 4: 307        2,3 
```

您可以`unlist`在`A_IDs.list`列上使用来获取长 data.table：

```
unique(na.omit(rec_data_table[sapply(A_IDs.list, myfun), list(bID, unlist(A_IDs.list))]))

#    bID V2
# 1: 301  3
# 2: 304  8
# 3: 301  7
# 4: 303  8
# 5: 304  4
# 6: 307  2 
```

我建议使用“长”数据而不是上面的嵌套列表构造，因为它通常会导致更简单的代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T16:37:07.227

```
bIDs <- lapply(sampleIDs, function(x){rec_data_table$bID[sapply(rec_data_table$A_IDs.list, function(y){x %in% y})]})
AB.dt <- data.table(aID=sampleIDs, bIDs=bIDs) 
```

也许有更快的方法，但这一个有效。:)

# php - 来自控制器的 php jquery 调用

> ID：14402438
> 
> 赞同：0
> 
> 时间：2013-01-18T15:45:39.400
> 
> 标签：php, jquery, symfony

我正在 Symfony2 中进行应用程序。当我想运行日志记录 jQuery 代码以根据访问页面的 Web 用户更改样式表时。当用户调用该方法`AuthenticationHandlerInterface`但您可以从那里运行代码时？

这个想法是让用户登录查询样式表名称并执行 jQuery 代码来更改 CSS 链接 href 属性。

谢谢

# android - 在 ActionBar 中的选项卡下方添加行

> ID：14402461
> 
> 赞同：3
> 
> 时间：2013-01-18T15:46:49.523
> 
> 标签：android, android-actionbar, android-ui, ui-design

在到处寻找之后，我发布了我在 SO 上面临的这个问题。基本上我有一个带有选项卡式布局的操作栏。下面是它现在的样子的快照：

![在此处输入图像描述](../Images/9a07533204b03e0dd73db5e4f81df230.png)

这是设置选项卡的代码块：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
setTheme(R.style.Theme_example);

if (Build.VERSION.SDK_INT <= Build.VERSION_CODES.GINGERBREAD_MR1) {
    requestWindowFeature(Window.FEATURE_NO_TITLE);
}
setContentView(R.layout.landing_page);

ViewPager viewPager = (ViewPager) findViewById(R.LandingPage.pager);

final ActionBar bar = getSupportActionBar();

bar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);

mTabsAdapter = new LandingPageTabsAdapter(this, viewPager);
mTabsAdapter.addTab(bar.newTab().setText("Search"), Search.class, null);
mTabsAdapter.addTab(bar.newTab().setText("Categories"),Categories.class, null);
mTabsAdapter.addTab(bar.newTab().setText("Bookmarks"), Bookmarks.class,null);

} 
```

我想在选项卡荧光笔下方添加一条直线，它与选项卡荧光笔颜色相同。类似于 Google Playstore 中的行（绿线以红色圈出）：

![在此处输入图像描述](../Images/35e73a686bfbd984716c743cadb986f8.png)

目前，我正在使用 Android Asset Studio 的[ActionBar Style Generator](http://jgilfelt.github.com/android-actionbarstylegenerator/#name=example&compat=holo&theme=light&actionbarstyle=solid&backColor=E4E4E4,100&secondaryColor=D6D6D6,100&tertiaryColor=F2F2F2,100&accentColor=33B5E5,100)对 Actionbar 进行样式设置。我把这条线放在那里的唯一原因是为了看起来干净。

有人可以建议/建议我如何解决这个问题吗？感谢您的光临并提出您的想法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-18T15:51:55.027

不要在操作栏下方添加一行，而是尝试在布局中的 viewpager 上方添加一行。Play商店也没有使用他们正在使用[PageTitleStrip的标签](http://developer.android.com/reference/android/support/v4/view/PagerTitleStrip.html)

# plugins - 在记事本++中包装代码

> ID：14402462
> 
> 赞同：1
> 
> 时间：2013-01-18T15:46:50.240
> 
> 标签：plugins, notepad++

我喜欢记事本++，但我不喜欢有人向我发送`.html`or`.xml`文件并且整个代码都在一行上。是否有一个插件或程序可以采用类似代码并在多行上正确缩进？

例子：

```
<html><head><title></title></head><body><div></div></body><html>

<html>
    <head>
        <title></title>
    </head>

    <body>
        <div>
        </div>
    </body>
<html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T15:55:10.977

有一个[HTML tidy](http://sourceforge.net/apps/mediawiki/notepad-plus/index.php?title=HTML_Tidy)插件可以满足您的需要。您还可以安装 TextFX 插件，该插件添加了许多其他增强功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T18:00:38.973

有一个名为 XML 工具的插件可以为您完成漂亮的打印。使用插件管理器（菜单插件->插件管理器）安装它。

# java - Android 应用程序崩溃，Button 或 Conditional 不起作用？

> ID：14402463
> 
> 赞同：1
> 
> 时间：2013-01-18T15:46:51.677
> 
> 标签：java, android

我在这方面几乎是新手，所以我可以使用一些帮助来了解我的应用程序为什么会不断崩溃？我已经尝试了很多方法，这是我迄今为止最好的方法。

```
public class MainActivity extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    final TextView lastAnswer = (TextView) findViewById(R.id.textView5);
    final TextView answerLabel = (TextView) findViewById(R.id.textView1);
    final TextView answerLabel1 = (TextView) findViewById(R.id.textView2);
    final TextView answerLabel2 = (TextView) findViewById(R.id.textView3);
    final EditText enteredNumber = (EditText) findViewById(R.id.editText1);
    Button getAnswerButton = (Button) findViewById(R.id.button1);

    getAnswerButton.setOnClickListener(new View.OnClickListener() { 

            @Override   
        public void onClick(View arg0) {
                 Random randomGenerator = new Random();
                  //rand gene
                     int randomNumber2 = randomGenerator.nextInt(99);
                      int randomNumber = randomGenerator.nextInt(99);

            String number = "";
            String number2 = "";
            String jtext = " Times ";
            number2= Integer.toString(randomNumber2);
            number= Integer.toString(randomNumber);
            answerLabel.setText(jtext);
            answerLabel1.setText(number2);
            answerLabel2.setText(number);

            String content = enteredNumber.getText().toString(); 
```

> 当我评论条件时，应用程序工作正常，但这并不是我想要的全部，我想问题出在条件中，但我似乎找不到它。在日食上没有任何错误。

```
 if (content != null){
                int anInt=Integer.parseInt(content);
                int result= randomNumber2 *randomNumber;

                    if(anInt == result ){

                      Context context =getApplicationContext();
                            CharSequence text = "That's correct!!";
                            int duration = Toast.LENGTH_SHORT;
                            Toast toast = Toast.makeText(context, text, duration);
                            toast.show();

                    } else{ 

                    Context context = getApplicationContext();
                    CharSequence text = "That's not correct";
                    int duration = Toast.LENGTH_SHORT;
                    Toast toast = Toast.makeText(context, text, duration);
                    toast.show(); 
                    }
                    lastAnswer.setText(content);
            }

            }
        });} 
```

所以我在这里尝试做的（注意菜鸟代码）只是生成2个随机数，显示它们，然后让用户输入结果，比较它，通知是否正确，然后重新生成..我一直在努力这几天

任何帮助表示赞赏，甚至是遵循此代码的新方法。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T15:53:53.260

您可能应该用 try/catch 包围您的解析。将用户输入解析回数字可能并不总是有效 - 特别是使用 EditTexts。改变

```
int anInt=Integer.parseInt(content); 
```

所以它是

```
 int anInt= -1;
  try{
   anInt = Integer.parseInt(content);
  }
  catch (NumberFormatException e)
  {
    //Show toast or dialog
  } 
```

同样为了让生活更轻松，您应该让 EditText[只接受 numbers](https://stackoverflow.com/questions/7330519/making-an-edittext-object-accept-only-numeric-values)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T15:54:00.723

嗯....为什么要使用应用程序上下文来显示祝酒词？我记得最近看到一个关于同样问题的问题。尝试改用活动上下文 ( `MainActivity.this`)。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-18T15:52:27.357

添加评论后清理项目，再次运行

如果这不是您的解决方案，将编辑答案

# delphi - Delphi TImage 通过 TSpeedButton

> ID：14402466
> 
> 赞同：2
> 
> 时间：2013-01-18T15:47:02.647
> 
> 标签：delphi, button, transparent, visible, timage

我想在 TImage 顶部放置一个 TButton 或 TSpeedButton 并使按钮透明，以便您仍然可以单击它，但您看到的是图像而不是按钮。我似乎无法让它工作，我将 TSpeedButton 更改为透明，但它似乎没有做任何事情。

我也尝试为按钮设置 Visible 为假，但随后它变得不可点击。有没有办法在不丢失功能的情况下使按钮不可见？

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-18T15:50:55.767

你不需要按钮。删除它并改为处理图像的 OnClick 事件。

如果您需要知道单击图像上的点，请从事件处理程序中调用 GetMessagePos。

# scala - Scala - 处理对象的初始化（_ vs Option[T]）

> ID：14402467
> 
> 赞同：3
> 
> 时间：2013-01-18T15:47:05.260
> 
> 标签：scala, null, initialization

我知道有多个问题可以解决相关问题，但我不确定它是否会攻击我正在寻找的东西。经过几年的 Java 开发，我对 Scala 还是很陌生。我正在寻找测试对象是否已初始化的最佳方法，如果没有，则对其进行初始化。例如，在 Java 中：

```
private MyObject myObj = null; 
```

在未来的某个时候：

```
public void initMyObj(){
    if (myObj == null){
        myObj = new MyObj();
    }
    // do something with myObj
} 
```

在此之后，我可能会将 myObj 重新分配给不同的对象，但这不太可能。在 Scala 中，我有这个：

```
class Test {
    var myObj: MyObj = _
} 
```

我读过我可以使用 Option 代替，例如：

```
var myObj = None : Option[MyObj] 
```

然后是我的支票：

```
myObj match {
  case None => ...
  case Some(value) => ...
} 
```

但是当我可能不会在其他任何地方进行这种检查时，使用这种模式感觉很糟糕——尽管对 Scala 如此陌生，但我可能错了。这是实现我想要的最佳方式还是有任何其他不涉及选项的选项？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-18T15:52:40.973

也许你需要一个惰性变量。

```
lazy val myObj: MyObj = //here you put the object creation code 
```

通过这种方式，对象的创建被推迟到代码第一次尝试访问它时。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-18T16:22:06.903

在 Scala 中，将部分构造的对象留在周围通常不是理想的做法。你通常会重新考虑你的对象是如何被实例化的，看看你是否不能使用不那么脆弱的不同模式。例如，不要在方法中设置未初始化的变量：

```
class Foo { var a: String = null; var b: String = null }
def initFooA(s: String, f: Foo) { if (f.a == null) f.a = s }
def initFooB(s: String, f: Foo) { if (f.b == null) f.b = s }
f
initFooA("salmon", f)
// Do stuff
initFooB("herring", f) 
```

您将尝试重组代码以按需生成所需的值，并将 foo 的实例化延迟到那时：

```
case class Bar(a: String, b: String) {}
def initBarA(s: String) = s
def initBarB(s: String) = s
val iba = initBarA("halibut")
// Do stuff
val ibb = initBarB("cod")
Bar(iba, ibb) 
```

因为 Scala 可以轻松访问元组（和类型推断），所以这比在 Java 中要少得多。

您可以做的另一件事是将后期初始化推迟到其他人。

```
case class Baz(a: String)(bMaker: => String) {
  lazy val b = bMaker
} 
```

现在你传入一些将成为参数 b 的东西，并安排它处理任何需要处理的后期初始化内容。这并不总是避免需要设置变量，但它可以帮助将它从你的类代码中推出到你的初始化逻辑中（这通常是一个更好的地方）。

用 vars 做这件事有点不那么简单。实际上，您最好只为它上一堂课，例如：

```
class LazyVar[A](initial: => A) {
  private[this] var loaded = false
  private[this] var variable: A = _
  def apply() = { if (!loaded) { loaded = true; variable = initial }; variable }
  def update(a: A) { loaded = true; variable = a }
} 
```

然后（可悲地）您必须`()`在每次读写时使用。

```
scala> val lv = new LazyVar({ println("Hi!"); 5 })
lv: LazyVar[Int] = LazyVar@2626ea08

scala> lv()
Hi!
res2: Int = 5

scala> lv() = 7

scala> lv()
res4: Int = 7 
```

然后你使用这个类的一个实例而不是实际的`var`并通过惰性初始化器。（`lazy val`在引擎盖下非常像这样；编译器只是保护你不被注意到。）

最后，如果您想拥有一个偶尔缺少值的全功能对象，`var x: Option[X]`那么您要使用的构造是；如果您无法找到绕过标准 Java 创建模式的方法（并且您不想尝试一些更奇特的东西，例如使用越来越多的信息相互创建的对象，或者因为性能至关重要而您负担不起，或者你不喜欢写那么多样板来允许类型检查来验证你的对象是否被正确创建）但是你想使用它，这`var x: X = null`是我会选择的，而不是`_`. If`X`是一个原语，您可能无论如何都需要明智地选择正确的值（例如，`Double.NaN`而不是`0.0`，`-1`而不是`0`for`Int`) 表示我未初始化。如果它是通用代码，并且您想要`Any`而不是`AnyRef`, `asInstanceOf`-ing 在`Any`并且`AnyRef`可能是摆脱类型检查不佳情况的最佳方法（假设您真的，真的不能使用`Option`，此时更清楚）。

# jquery - 使用 Sharepoint 搜索记住搜索范围

> ID：14402468
> 
> 赞同：0
> 
> 时间：2013-01-18T15:47:06.183
> 
> 标签：jquery, search, sharepoint-2010

在我们的 Sharepoint 网站的主页上，我们有一个开箱即用的 SharePoint 搜索框，它使用范围功能。当用户选择特定范围（例如“人员”）并点击“搜索”时，站点会转到相关页面，但范围会恢复为“所有站点”。

有什么方法（可能是jQuery？）我可以将范围设置为用户之前选择的范围？我有用户告诉我，他们想继续搜索人，目前他们必须记住将范围更改回来，因为每次提交后它会恢复为“所有站点”。

这就是我们页面上搜索框的外观

```
<SPSWC:SearchBoxEx ID="SmallSearchBox" runat="server" ShowAdvancedSearch="false" 
       QueryPromptString="Search our site"  DropDownMode="DisplayScopeDD" 
       SearchResultPageURL="/pages/search.aspx"               
       ScopeDisplayGroupName="Search Dropdown" ShowQuerySuggestions="True" 
       TextBeforeDropDown="" FrameType="None"  DisplaySubmittedSearch="true" 
       SuppressWebPartChrome="true" SearchBoxTableClass="" /> 
```

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-02T15:27:02.097

我相信这可以通过将*结果*页面上 Web 部件的 DropDownMode 更改为**ShowDD_DefaultURL**或**ShowDD_NoContextual_DefaultURL**来完成。

这将导致 Web 部件中的搜索范围默认为“s” URL 参数，该参数在提交的查询字符串中指定。例如，如果您使用“人物”范围进行搜索，您的查询字符串中会附加“&s=人物”，结果页面上选定的搜索范围也将是“人物”。

可以在此处找到有关 DropDownMode 选项的更多信息 - [http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.portal.webcontrols.dropdownmodes.aspx](http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.portal.webcontrols.dropdownmodes.aspx)，但不幸的是它没有详细说明。

# c - 需要在 C 中实现通用列表，以避免插入时出现重复

> ID：14402476
> 
> 赞同：3
> 
> 时间：2013-01-18T15:47:19.397
> 
> 标签：c, comparison, linked-list, void-pointers

我是 C 的新手，我正在尝试实现一个链表，其中节点定义如下：

```
typedef struct _cListNode
{
    void *_data;                //generic pointer to any data type
    struct _cListNode *next;    //next node in the list
} cListNode; 
```

我需要 InsertElement(cList myList, void *dataToInsert) 函数在插入的元素已经存在（即没有重复）时不增加列表。我目前的问题是我找不到将*dataToInsert*（参数）与 _ *data*（在我的节点内）进行比较的方法。

我想在调用 InsertElement 函数之前在外部遍历列表，并在我知道类型是什么但我希望有更好的设计/解决方案的列表实现之外处理比较。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T15:51:28.273

给定两个 void 指针，无法比较它们的数据。这是因为您不知道每个指针的类型的大小。如果要比较它们的数据，则需要存储指针及其数据的大小。然后你可以使用 memcmp 来比较指向的内存：

```
 typedef struct _cListNode
 {
     void *_data;                //generic pointer to any data type
     size_t size;
     struct _cListNode *next;    //next node in the list
 } cListNode;

 int memcmp ( const void * ptr1, const void * ptr2, size_t num ); 
```

所以：

```
 memcmp(node_data_ptr, new_data_ptr, size_of_item_pointed_at); 
```

如果两个指针的大小相同，则只应执行 memcmp，否则它们明显不同，并且您不想最终比较无效内存。

您的另一个选择是比较指针本身并查看它们是否指向同一段内存。这取决于您所说的“重复”是什么意思。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T16:10:34.237

你可能想做这样的事情。我假设您的链表结构如下：

```
typedef struct _cList
{
   cListNode* head;
   cListNode* tail;
   size_t size;
} cList;

int contains(cList* list, void* data, size_t dataSize)
{
   cListNode* temp = list->head;

   while(temp)
   {
      if(!memcmp(data, temp->_data, dataSize))
         return 1;
      temp = temp->next;
   }
   return 0;
}

void InsertElement(cList* myList, void *dataToInsert, size_t dataSize)
{
   if(!contains(myList,dataToInsert, dataSize))
   {
     //Insert Data
   }
   else
   {
     //Data Is already present.
   }
} 
```

您应该`struct cListNode`按照@jmh 的答案中指定的方式创建。

# r - 为什么在应用 as.numeric 时 R 会丢弃小数？

> ID：14402482
> 
> 赞同：3
> 
> 时间：2013-01-18T15:47:44.330
> 
> 标签：r, decimal

大家好，我有以下数据库：

```
ID Distance
M1_PRM    54,56
M1_PRM  4147,69
M1_PRM  1723,34 
```

我使用以下脚本替换“。”中的“，”。在距离中，因为 R 不喜欢“，”（并且有效）：

```
mysub<-function(x)(sub(",",".",x))
DB<-(apply(DB, 2,mysub))
DB<-data.frame(DB) 
```

然后我需要转换 DB$Distance`as.numeric`因为我需要 `tapply`与 sum 结合使用，例如：

```
apply(DB$Distance,ID,sum) 
```

当我给

```
DB$Distance<-as.numeric(DB$Distance)

ID Distance
M1_PRM 54
M1_PRM 4147
M1_PRM 1723 
```

似乎 R 丢弃了小数点！！！有人知道出了什么问题吗？提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-18T15:54:53.400

另一种方法（如果您从文件中读取此内容）：

```
dat <- read.table(text = "ID Distance
 M1_PRM    54,56
 M1_PRM  4147,69
 M1_PRM  1723,34",header = TRUE,sep = "",dec = ",")
> dat
      ID Distance
1 M1_PRM    54.56
2 M1_PRM  4147.69
3 M1_PRM  1723.34 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-18T16:03:29.380

@joran 的答案是要走的路，如果你正在阅读`DB`，`read.table`或者`read.csv`，否则，有`type.convert`，它需要一个`dec`选项。

```
type.convert(as.character(DB$Distance), dec = ",")
# [1]   54.56 4147.69 1723.34 
```

丢弃`as.character`，如果`Distance`已经是这样。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-18T15:53:58.913

R 正在丢弃小数，因为您在`apply`通话中以错误的方式进行，而是尝试

```
> DB$Distance <- as.numeric(sub(",",".",DB$Distance))
> sapply(DB, class)
       ID  Distance 
 "factor" "numeric" 
> DB
      ID Distance
1 M1_PRM    54.56
2 M1_PRM  4147.69
3 M1_PRM  1723.34 
```

然后使用`tapply`如下：

```
with(DB, tapply(Distance, ID, sum)) 
```

你`apply(DB$Distance,ID,sum)`不会工作，而是使用，`tapply(DB$Distance, DB$ID, sum)`因为正确的函数是`tapply`并且你必须给出一个数字 verctor 和一个索引，它们都附加在`DB`所以 R 不会找到`ID`，除非你使用`with(.)`function 或`DB$ID`.

见`?apply`和`?tapply`。

我只是试着根据你的帖子给你一个答案。@joran 的答案是如果您从文件中导入数据的直接方式，如果是这样，您的所有问题都会减少到`dec = ","`在`read.table`调用中使用

# php - 将索引重置为基于 1 的数组

> ID：14402486
> 
> 赞同：3
> 
> 时间：2013-01-18T15:47:59.147
> 
> 标签：php, arrays

我有包含数据和键 [1, 2, 4, 5] 的数组。

$数组 = xxxx;

这是：

```
 [array] => Array
                            (
                                [1] => Array
                                    (
                                        [test] => fdasdfs24
                                    )

                                [2] => Array
                                    (
                                        [test] => fdasdf23
                                    )

                                [4] => Array
                                    (
                                        [test] => fdasdf4
                                    )

                                [5] => Array
                                    (
                                        [test] => fdasdf34
                                    )

                            ) 
```

我如何重置这个和数组中的索引？我想收到：[1, 2, 3, 4]

```
 [array] => Array
                            (
                                [1] => Array
                                    (
                                        [test] => fdasdfs24
                                    )

                                [2] => Array
                                    (
                                        [test] => fdasdf23
                                    )

                                [3] => Array
                                    (
                                        [test] => fdasdf4
                                    )

                                [4] => Array
                                    (
                                        [test] => fdasdf34
                                    )

                            ) 
```

我怎样才能做到？也许是为了这个功能？我不想手动执行此操作 - 这只是示例。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-18T15:50:20.783

当您索引从 1 而不是 0 开始时，您需要使用[`range`](http://php.net/range)函数并在[`array_combine`](http://php.net/array_combine)您的帮助下获得结果数组。

```
array_combine(range(1,4),  array_values($array)); 
```

为了使其更通用，您可以使用它，

```
array_combine(range(1,count($array)),  array_values($array)); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-18T15:49:25.880

```
$new_array = array_values($old_array); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-18T15:54:03.720

只需在开头添加一个元素，重新设置密钥，然后将其关闭。

```
$array = array_values(array_unshift($array, 'blank'));
unset($array[0]); 
```

我没有测试它，但应该这样做。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-18T15:50:05.623

一种方法是：

```
$newArray = array();
foreach($oldArray as $val):
    $newArray[] = $val; //add the value to the new array
endforeach; 
```

# ios - 为什么我的 uitableview 单元格行重复字幕

> ID：14402488
> 
> 赞同：2
> 
> 时间：2013-01-18T15:48:00.660
> 
> 标签：ios, objective-c, uitableview

在我的 uitableview 我有两个部分

首先是从核心数据中获取

其他通过存储在 NSMutableArray(otherFriends) 中的文本字段添加

这是我的代码

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    if([otherFriends count]>0)
    {
        return 2;
    }
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)sectionIndex
{
    if(otherFriends == 0)
    {
        return [[[[self fetchedResultsController]sections]objectAtIndex:0]numberOfObjects];
    }
    return [otherFriends count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"newGroupCell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell == nil)
    {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier];
    }

    cell.textLabel.font = [UIFont fontWithName:@"Helvetica-Light" size:20.0];
    cell.textLabel.backgroundColor = [UIColor colorWithWhite:1.0f alpha:0.0f];

    if(indexPath.section == 0)
    {
        user = [[self fetchedResultsController] objectAtIndexPath:indexPath];

        cell.textLabel.text = user.name;
        cell.detailTextLabel.text = user.primaryResource.status;

        [cell.imageView setFrame:CGRectMake(0, 0, 50, 50)];
        [cell.imageView.layer setMasksToBounds:YES];

        if (user.photo != nil)
        {
            cell.imageView.image = user.photo;
        }
        else
        {
            cell.imageView.image = [UIImage imageNamed:@"defaultPerson"];
        }
    }
    else
    {
        cell.textLabel.text = [otherFriends objectAtIndex:indexPath.row];
        cell.imageView.image = [UIImage imageNamed:@"defaultPerson"];
    }

    return cell;
} 
```

第一部分也有字幕，但第二部分单元格没有字幕

当我添加新朋友时，它可以正常工作，直到所有行都可见，但是当添加新朋友并且该行不可见并且要查看该行我必须滚动时，该行显示第 0 节中第一行的副标题（非常第一个单元格）及其在第 1 节第三行中的重复。只有副标题重复，但正文没有。

几个小时以来，我试图弄清楚这一点，但没有运气。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T15:51:38.317

这是因为在您的`else`分支中您没有设置`cell.detailTextLabel.text`.

当一个单元格被回收时，旧的 detailTextLabel 会保留在那里。您需要在条件的两个分支中设置单元格的所有属性，以保证它已被回收。

```
if(indexPath.section == 0)
{
    user = [[self fetchedResultsController] objectAtIndexPath:indexPath];

    cell.textLabel.text = user.name;
    cell.detailTextLabel.text = user.primaryResource.status;

    [cell.imageView setFrame:CGRectMake(0, 0, 50, 50)];
    [cell.imageView.layer setMasksToBounds:YES];

    if (user.photo != nil)
    {
        cell.imageView.image = user.photo;
    }
    else
    {
        cell.imageView.image = [UIImage imageNamed:@"defaultPerson"];
    }
}
else
{
    cell.textLabel.text = [otherFriends objectAtIndex:indexPath.row];
    cell.imageView.image = [UIImage imageNamed:@"defaultPerson"];
    // ADDED
    cell.detailTextLabel.text = @"";
    // You may also need to adjust the frame of the cell.imageView
    // because it could have been recycled.
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T15:51:44.597

细胞被重复使用。由于您对两个部分使用相同的单元格，因此您必须确保在所有条件下设置/重置同一组单元格属性。

问题是当单元格用于第 1 节时，您不会重置`detailTextLabel`. 在您的`else`块中，添加：

```
cell.detailTextLabel.text = nil; 
```

这可确保在所有情况下，您都在为重用单元格设置`textLabel`、`detailTextLabel`和`imageView`属性。

# android - 如果我在片段 setHasOptionsMenu(true) 中使用 root.setFocusableInTouchMode(true) 不起作用

> ID：14402491
> 
> 赞同：2
> 
> 时间：2013-01-18T15:48:01.897
> 
> 标签：android, actionbarsherlock, fragment

在我下面的片段中

```
public View onCreateView(LayoutInflater inflater, ViewGroup container,Bundle savedInstanceState) {
    root = (ViewGroup) inflater.inflate(R.layout.layout1, null);
    setHasOptionsMenu(true);
    activity = getActivity(); 
```

菜单功能一直有效，直到我添加了一个 onKeyListener。在我添加 onKeyListener 后，菜单不起作用！

```
public View onCreateView(LayoutInflater inflater, ViewGroup container,Bundle savedInstanceState) {
    root = (ViewGroup) inflater.inflate(R.layout.layout1, null);
    setHasOptionsMenu(true);
    activity = getActivity();
    root.setFocusableInTouchMode(true);
    root.requestFocus();
    root.setOnKeyListener(onKey);
 .
 .
 .
 .
 OnKeyListener onKey = new OnKeyListener() {

    public boolean onKey(View arg0, int keyCode, KeyEvent arg2) {

    }
} 
```

在片段中工作的解决方案是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-21T00:36:21.297

您是否测试过在您的 onCreate 中调用 setHasOptionsMenu ？

```
@Override
public void onCreate(final Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setHasOptionsMenu(true);
} 
```

# javascript - JavaScript - 我如何获取元素的 ID

> ID：14402493
> 
> 赞同：0
> 
> 时间：2013-01-18T15:48:03.730
> 
> 标签：javascript, dom, javascript-events

```
<div id="block_msg" style="width:250px;border: solid 1px red;margin: 15px">

<div id="text_msg1">111текст111</div>

<input type="submit" onclick="clickon(**<<<HERE I WANT SEE DIV ID TEXT_MSG1>>>**)" value="Добавить">

</div> 
```

我如何获得 id="text_msg1" 并将其放入 onclick。如何？谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-18T15:50:09.307

`this`是当前对象，您可以查看父对象并找到 div。这个解决方案很麻烦，因为更改布局意味着它会中断。

```
onclick="clickon(this)" 
```

和

```
function clickon(btn) {
    var wrappingDiv = btn.parentNode;
    var childrenDivs = wrappingDiv.getElementsByTagName("div");
    alert(childrenDivs[0].innerHTML);
} 
```

[JSFiddle](http://jsfiddle.net/M5w8H/1/)

最好在 div 上有一个类并查找该类。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T15:58:36.540

如果要获取前一个元素兄弟，遍历 DOM 直到找到它：

```
function get_previous_element_sibling(element) {
    var prev = element.previousSibling;

    while (prev && prev.nodeType !== 1) {
        prev = prev.previousSibling;
    }

    return prev;
} 
```

然后你可以得到前一个兄弟姐妹：

```
get_previous_element_sibling(this) 
```

及其ID

```
get_previous_element_sibling(this).id 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T16:06:22.090

根据您的评论`yes, preceding! this line`将不适用于 IE8 及更低版本，因为`previousElementSibling`

```
<input type="submit" onclick="clickon(this.previousElementSibling.id)" value="Добавить"> 
```

或使用 jQuery 进行跨浏览器支持

```
<input type="submit" onclick="clickon($(this).prev().attr('id'))" value="Добавить"> 
```

# python - 密码存储（用于一组脚本）

> ID：14402495
> 
> 赞同：0
> 
> 时间：2013-01-18T15:48:05.797
> 
> 标签：python, perl, bash, gnupg

我有一个系统（实际上是一组 shell 脚本），它在不同的测试阶段（dev、uat、prd）的不同服务器上有很多实例。脚本需要在例如数据库中使用一些密码进行授权（顺便说一句，每个环境都有自己的密码）。
我有一个部署系统，因此我可以在存储库中保存密码，而不是每次手动更新它们。

但是从安全的角度来看，将它们存储为纯文本是完全不可接受的。

我可以自己使用 gpg 开发一个解决方案（使用目标环境的 pub 证书保存 gpg 加密文件中的每个密码），但我不确定这是最好的方法。

是否有任何现有的密码存储开源解决方案比自己的 gpg 解决方案更好？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T17:10:39.627

PyCrypto.Blowfish 应该非常适合这个目的：

[https://www.dlitz.net/software/pycrypto/api/current/Crypto.Cipher.Blowfish.BlowfishCipher-class.html](https://www.dlitz.net/software/pycrypto/api/current/Crypto.Cipher.Blowfish.BlowfishCipher-class.html)

尽管您显然必须在每次启动“密码服务器”时手动指定密钥。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T15:52:37.447

看来您正在寻找`Password store`. 您可以查看[Vault 0.2](http://pypi.python.org/pypi/vault)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-18T15:50:56.997

[PyCrypto](https://www.dlitz.net/software/pycrypto/)是此类事情的知名且成熟的库，应该可以满足您的需求。

# mysql - 计算日期之间的推文（mysql）

> ID：14402496
> 
> 赞同：0
> 
> 时间：2013-01-18T15:48:07.307
> 
> 标签：mysql, database

我有一项任务是创建一个类似推特的数据库。在这个任务中，我必须过滤掉热门话题。我的想法是在推文发布日期和 7 天后计算带有特定标签的推文，并按计数排序。

我有以下 2 个用于此查询的表：

```
Table Tweet : id , message, users_id, date

Table Tweet_tags : id, tag, tweet_id 
```

由于 mysql 根本不是我的强项，因此我无法从查询中获取任何结果。我试过的查询是：

```
Select
      Count(twitter.tweet_tags.id) As NumberofTweets,
      twitter.tweet_tags.tag
From twitter.tweet 
Inner Join twitter.tweet_tags On twitter.tweet_tags.tweet_id = twitter.tweet.id 
WHERE twitter.tweet_tags.tag between twitter.tweet.date and ADDDATE(twitter.tweet.date, INTERVAL 7 day) 
ORDER BY NumberofTweets 
```

查询有效，但没有给出任何结果。我只是无法让它工作。你们能帮我解决这个问题吗，或者如果你有更好的方法来获取热门话题，请告诉我！

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T15:57:10.940

这等效于您的查询，使用表别名使其更易于阅读，将 BETWEEN 替换为两个不等谓词，并将 ADDDATE 函数替换为等效操作...

```
SELECT COUNT(s.id) As NumberofTweets
     , s.tag
  FROM twitter.tweet t 
  JOIN twitter.tweet_tags s 
    ON s.tweet_id = t.id
 WHERE s.tag >= t.date 
   AND s.tag <= t.date + INTERVAL 7 DAY
 ORDER
    BY NumberofTweets 
```

有两件事突然出现在我这里......

首先，没有`GROUP BY`. 要通过“标签”获得计数，您需要 at `GROUP BY tag`。

其次，您将“标签”与“日期”进行比较。我不知道你的桌子，但这看起来不对。（我希望“日期”是一个 DATETIME 或 TIMESTAMP，而“标签”是一个字符串（也许我女儿称之为“哈希标签”。或者她说的是那个 tumblr？）

* * *

如果我了解您的要求：

对于每条推文以及与该推文关联的每个标签，您都希望获得在推文日期时间后 7 天内发布的具有匹配标签的其他推文的数量。

获得此结果的一种方法是使用相关子查询。（这可能是最容易理解的方法，但从性能的角度来看可能不是最好的方法）。

```
SELECT t.id
     , s.tag
     , ( SELECT COUNT(1)
           FROM twitter.tweet_tags r
           JOIN twitter.tweet q
             ON q.id = r.tweet_id
          WHERE r.tag = s.tag
            AND q.date >= t.date
            AND q.date <= t.date + INTERVAL 7 DAY
       ) AS cnt
  FROM twitter.tweet t 
  JOIN twitter.tweet_tags s 
    ON s.tweet_id = t.id
 ORDER
    BY cnt DESC 
```

另一种方法是使用连接操作：

```
SELECT t.id
     , s.tag
     , COUNT(q.id) AS cnt
  FROM twitter.tweet t 
  JOIN twitter.tweet_tags s 
    ON s.tweet_id = t.id
  LEFT
  JOIN twitter.tweet_tags r
    ON r.tag = s.tag
  LEFT
  JOIN twitter.tweet q
    ON q.id = r.tweet_id
       AND q.date >= t.date
       AND q.date <= t.date + INTERVAL 7 DAY
 GROUP
    BY t.id
     , s.tag
 ORDER
    BY cnt DESC 
```

这两个查询的计数假设`tweet_tags (tweet_id, tag)`是唯一的。如果有任何“重复”，那么包括 DISTINCT 关键字，即`COUNT(DISTINCT q.id)`（分别代替`COUNT(1)`和`COUNT(q.id)`）将使您获得“相关”推文的计数。

注意：返回的计数将包括原始推文本身。

注意：`LEFT`从上面的查询中删除关键字应该返回一个等效的结果，因为推文/标签（来自 t/s）保证匹配自身（来自 r/q），只要标签不为空并且推文`date`是不为空。

这些查询在大型集上会有问题的性能。要获得可接受的性能，需要适当的覆盖索引：

```
...  ON twitter.tweet_tags (tag, tweet_id)

...  ON twitter.tweet (date) 
```

# node.js - 节点表达会话变量不同的浏览器相同的结果 - 为什么？

> ID：14402498
> 
> 赞同：0
> 
> 时间：2013-01-18T15:48:12.113
> 
> 标签：node.js, session-variables

我正在编写聊天程序，但不知道如何存储用户的姓名。当我将它存储到其中时，`session.name`它在我运行的每个浏览器中都具有相同的值。是否可以在不使用数据库的情况下做到这一点？

我就是这样做的：

```
 var MemoryStore = express.session.MemoryStore,
 sessionStore = new MemoryStore(); 
```

然后我只存储价值：

```
 sessionStore.nickname=nickname 
```

现在我运行浏览器填写昵称并将其发送到服务器。然后打开另一个浏览器，它已经具有该值 - 我需要为每个浏览器设置不同的值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T16:43:48.020

如果您正在修改`sessionStore`或`session`. 上面的代码表明您正在修改`sessionStore`，这对于所有请求都*应该是相同的。*要将值添加到单个会话，假设您也在使用 Express，您需要修改 HTTP 请求的`session`变量。在 Express 2.x 中，这是通过`request.session.nickname = nickname;`.

# java - 如何销毁以前的活动

> ID：14402501
> 
> 赞同：1
> 
> 时间：2013-01-18T15:48:47.557
> 
> 标签：java, android, android-activity

所以我有 2 个活动，比如说 A 和 B。A 导航到 B，我希望活动 A 在 B 的指示下被杀死或使其不可用/不可见。所以它应该就像我按下 B 活动上的后退按钮时一样不应打开活动 A 而应转到应用程序托盘。

当我清除应用程序数据时，活动 A 也应该恢复谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T15:57:10.343

您可以通过以下两种方式之一来做到这一点。首先是完成 ActivityA 以便以后无法恢复。从 ActivityA 启动 ActivityB 时，您会执行以下操作：

```
Intent intent = new Intent(this, ActivityB.class);
startActivity(intent);
this.finish(); 
```

另一种方法是当它从 ActivityB 获得任何类型的结果时才完成 ActivityA。此代码也将在 ActivityA 中。

要启动 ActivityB：

```
Intent intent = new Intent(this, ActivityB.class);
startActivityForResult(intent, REQUEST_ACTIVITYB); 
```

确保 ActivityA 不会恢复：

```
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);

    if(requestCode == REQUEST_ACTIVITYB) {
        finish();
    }
} 
```

`REQUEST_ACTIVITYB`只是您选择的一个int。

# android - 使用javascript登录facebook后android webview中的空白空白页面

> ID：14402503
> 
> 赞同：1
> 
> 时间：2013-01-18T15:48:53.597
> 
> 标签：android, facebook

我正在开发一个新的 android 应用程序，并使用 webview 在一个网站页面中查看我的网站，其中有一个用于登录 facebook 的链接

*   直接登录后，返回一个空白的 embty webview
*   我在这里看到了几个关于同一问题的主题，但它与我的不完全一样请注意，如果我使用的是普通桌面浏览器，则问题不存在

我假设应该调整 webview 的一个属性，在我的 webview 代码下面

```
webView1=(WebView)findViewById(R.id.webView1); 
webView1.setWebViewClient(new MyWebViewClient()); 
WebView webView1 = (WebView) findViewById(R.id.webView1);
webView1.setWebChromeClient(new WebChromeClient());
webView1.getSettings().setAppCacheEnabled(true);
webView1.getSettings().setDatabaseEnabled(true);
webView1.getSettings().setDomStorageEnabled(true);
webView1.getSettings().setJavaScriptCanOpenWindowsAutomatically(true);
webView1.getSettings().setGeolocationEnabled(true);           
webView1.loadUrl("http://www.myactivepoint.com/mobile/maplp.asp"); 
```

我真的很感谢你的支持

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-01-14T09:58:42.470

这是我的解决方案。成功登录后，您必须重定向页面。您可以从Facebook URL 中的*refsrc*参数获取地址，但有时（例如下次尝试登录）缺少 refsrc，因此我使用*域*参数。如果需要，您可以覆盖 URL 地址。见代码：

```
webView.setWebViewClient(new WebViewClient()
{
    @Override
    public void onPageFinished(final WebView view, final String url)
    {
        if(getActivity()!=null)
        {
            if(url.contains("facebook.com") && url.contains("dialog/oauth") &&
                (url.contains("&refsrc") || url.contains("&domain")))
            {
                Uri uri = Uri.parse(url);
                String callbackUrl = uri.getQueryParameter("refsrc");
                if(callbackUrl==null)
                    callbackUrl = "http://" + uri.getQueryParameter("domain");
                view.loadUrl(callbackUrl); // callback URL
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-20T10:58:41.050

我和你有过类似的经历。我通过以下方法解决了这个问题。

```
public class CustomWebViewClient extends WebViewClient{      
    @Override
    public void onPageFinished(WebView view, String url) {

        if(url.startsWith("https://m.facebook.com/dialog/oauth")){
           String redirectUrl = "http://www.mydomain.com/myReturnUrl";
            view.loadUrl(redirectUrl);
           return;
       }
        super.onPageFinished(view, url);
    }} 
```

并将其添加到您的 WebView

```
webview.setWebViewClient(new CustomWebViewClient()); 
```

# java - 如何在 JSP 中打印绝对 URL 列表

> ID：14402511
> 
> 赞同：0
> 
> 时间：2013-01-18T15:49:04.967
> 
> 标签：java, jsp

我想在 Spring JSP 中打印一个绝对 URL 列表，供内部用户选择。但是，该页面会以当前 URL 为前缀呈现。

例如，我想链接到**www.anothersite.com**，但链接在页面上显示为**http://localhost:8080/myapp/www.anothersite.com**

我究竟做错了什么？下面的两行具有相同的结果。

```
<c:forEach items="${listAppURLForm}" var="nextURL">
    <li>
        <a href=<c:out value="${nextURL.link}"></c:out>>${nextURL.link}</a>
        <a href=${nextURL.link}>${nextURL.link}</a>
    </li>
</c:forEach> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T16:12:58.183

有一个误解。像这样的 URL`www.example.com`绝对不是绝对 URL。[URI 方案](http://en.wikipedia.org/wiki/URI_scheme)完全丢失。您需要在 URL 前面加上所需的方案，以使其真正成为绝对 URL，如下所示`http://www.example.com`。

如果您不能直接在列表中编辑 URL，那么您需要在 HTML 中添加前缀。

```
<a href="http://${nextURL.link}">${nextURL.link}</a> 
```

`${fn:startsWith()}`您可能需要事先执行检查以防止重复方案。

# javascript - 更改输入焦点上的 div 颜色

> ID：14402514
> 
> 赞同：3
> 
> 时间：2013-01-18T15:49:12.330
> 
> 标签：javascript, jquery, focus

我正在尝试改变`div`带有字母的颜色`s`

```
<div class="search_container">
    <input type="text" class="search_field" placeholder="Search..." />
    <div id="magnify_glass">s</div>
</div> 
```

我试过的是这个

```
<script>
    $('.search_field').focus(function() {
        $('#magnify_glass').css('color','#ff0000');
    });
</script> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-18T15:50:39.367

假设您的代码在`<head>`文档中，您只需要一个文档就绪处理程序。试试这个：

*更新*

要删除颜色，您还需要添加一个`blur`处理程序。

```
<script>
    $(function() {
        $('.search_field').focus(function() {
            $('#magnify_glass').css('color','#ff0000');
        }).blur(function() {
            $('#magnify_glass').css('color','transparent'); // or whatever the default is.
        });
    });
</script> 
```

此外，最好使用 a`class`为元素添加样式，因为它可以更好地分离关注点：

```
.focus { color: #F00; } 
```

```
$('.search_field').focus(function() {
    $('#magnify_glass').addClass('focus');
}).blur(function() {
    $('#magnify_glass').removeClass('focus');
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T15:52:21.710

您的代码很好并且工作您需要确保您在[document.ready](http://api.jquery.com/ready/)中有代码，以确保在脚本访问之前元素可用性并且您添加了 jquery 库。

**[现场演示](http://jsfiddle.net/rajaadil/PVydE/2/)**

```
$('.search_field').focus(function () {
    $('#magnify_glass').css('color', '#ff0000');
}).blur(function() {
    $('#magnify_glass').css('color', '#000000');
}) 
```

# validation - 处理带有违规的 W3C css 验证器输出

> ID：14402516
> 
> 赞同：0
> 
> 时间：2013-01-18T15:49:16.120
> 
> 标签：validation, continuous-integration, reporting, w3c

linter 和验证器的输出格式比解析它们的工具要多得多。我找不到任何工具可以解析 W3C 自己提供的规范 CSS 和 HTML 验证器的输出。W3C CSS 验证器提供的输出格式记录在[用户指南](http://jigsaw.w3.org/css-validator/manual.html#requestformat)中（包括一种仅使用 启用的未记录输出格式`--format=xml`）。是否有任何工具（例如 Jenkins 插件）可以将 W3C CSS Validator 输出的任何格式处理为图形或其他人类可消费的报告格式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T15:49:16.120

我不知道。但是我确实编写[了一个 XSLT](https://github.com/kojiromike/ci/blob/master/css-validator-to-csslint.xsl)，它将 的输出转换为与[csslint](http://csslint.net/)`java -jar css-validator --format=soap12`相同的格式，[Violations](https://wiki.jenkins-ci.org/display/JENKINS/Violations)可以处理这种格式。

验证器本身总是在 XML 上方输出其选项，因此您必须先将其删除，然后才能对其进行转换：

```
java -jar css-validator --format=soap12 "$someFile.css" |
    tail -n +1 | # GNU tail, or use some other way of trimming the first line
    xsltproc css-validator-to-csslint.xsl - 
```

我希望有人觉得这很有用。

# javascript - 我如何才能增量显示JSON数据而不是在WEB中重复解析和显示

> ID：14402518
> 
> 赞同：0
> 
> 时间：2013-01-18T15:49:22.703
> 
> 标签：javascript, json, perl, web

我有一个日志文件，它是由一个实时运行的脚本记录的，现在我要从 WEB/HTML 的日志中监控脚本的状态，所以我使用 JavaScript 来更新 WEB/HTML，我也写了一个 CGI 脚本，用于解析日志并将事件状态输出为 JSON 以供 JavaScript 读取。JS 脚本周期性（例如每 2 秒）调用 CGI 解析日志并调用 getJSON 读取事件状态，然后更新 WEB。

例如。在时间 T（秒），日志文件记录：

活动1开始...

做活动 1 ...

事件1通过...

活动1结束...

在时间 T+2（秒），日志文件记录：

活动1开始...

做活动 1 ...

事件1通过...

活动1结束...

活动2开始...

做活动 2 ...

事件2失败...

活动2结束...

在时间 T(second) 的 CGI 可能会输出：

{“事件”：[[“事件 1”，“通过”]]}

在某个 URI 处，将由 JS 的 getJSON 读取

并且在时间 T+2(second) 可能会输出：

{“事件”：[[“事件 1”，“通过”]，[“事件 2”，“失败”]]}

* * *

所以在这里，我实现的 CGI 脚本将每 2 秒解析一次整个日志，当日志很大时可能会消耗大量系统资源，并对已经完成的事件做重复的事情。

任何人都知道如何通过输出而不是整个日志来增量解析日志，以及如何存储已经完成的事件的状态？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T16:29:33.647

如果您不想每次都解析整个日志文件，则应尝试模仿[tail -f](https://stackoverflow.com/questions/883784/custom-implementation-of-tail-f-functionality-in-c)的行为：

*   打开日志并解析所有内容（第一次）。
*   [使用getpos](http://perldoc.perl.org/IO/Seekable.html)获取光标位置。
*   获取[inode](http://en.wikipedia.org/wiki/Inode)编号并`mtime`使用[stat](http://perldoc.perl.org/functions/stat.html)。
*   将光标和 inode 保存在单独的文件中。

当下一个呼叫到达时，将 inode 编号与您保存的编号进行比较：

*   如果它已更改，则文件已被修改（如在 logrotate 之后）。你需要从头开始阅读。
*   如果`mtime`已更改，请寻找旧位置`setpos`并继续解析。
*   否则，什么都没有改变。

使用此解决方案，您将能够逐块解析文件。小心，当只写了一行的一部分时，您有时可能会遇到边缘情况。

**编辑**：@mob 的评论

# android - 了解 iphone 和 android 中的 HTML 字体大小差异

> ID：14402521
> 
> 赞同：1
> 
> 时间：2013-01-18T15:49:25.717
> 
> 标签：android, iphone, html, css

我正在尝试在我的移动网站中向用户展示一条简单的消息。我希望消息大小在具有相似屏幕大小的移动设备上大致相同，例如 iPhone 和三星 Galaxy (android)。

我阅读了很多关于这个问题的帖子，并且很多人建议使用`-webkit-text-size-adjust: 100%`它来实现它。但是没看懂怎么用。。。

网页：

```
<!DOCTYPE HTML>
<html>
<head>
    <style type="text/css">
        html { -webkit-text-size-adjust:100%; }
    </style>
</head>
<body>
    <div style="text-align:center;font-size:6em;-webkit-text-size-adjust:100%;">
        Hello World!
    </div>
</body>
</html> 
```

结果：

![结果](../Images/682ec832a5c6d2bd23e7bccfc56503b7.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T15:51:13.610

您是否测试了视口元数据？

```
<meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1, height=device-height"/> 
```

# ios - UIDatePicler = 加载时间多 3 秒

> ID：14402531
> 
> 赞同：1
> 
> 时间：2013-01-18T15:49:59.273
> 
> 标签：ios, objective-c, cocoa-touch

`_datePicker.frame = CGRectMake(70, self.view.frame.size.height -150,250,100);`

我正在使用下面的代码`viewDidLoad`来更改 UIDatePicker 的大小。它工作得很好，但又给了我 3 秒的加载时间。我尝试使用这个：

```
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT,
                                         (unsigned long)NULL), ^(void) {
    _datePicker.frame = CGRectMake(70, self.view.frame.size.height -150,250,1);

}); 
```

但是如果我这样做了，我会丢失segues之间的所有动画，不知道为什么。我考虑过在 viewDidLoad 中使用另一个线程，但我不知道该怎么做或者是否可能。

![在此处输入图像描述](../Images/7cb6701b2b5b4ce1a8e71c8a616690b9.png) 谢谢

# arrays - 基本数组的问题

> ID：14402538
> 
> 赞同：1
> 
> 时间：2013-01-18T15:50:16.260
> 
> 标签：arrays, actionscript-3

我对编程相当陌生，我正在尝试对数组做一些工作，但我遇到了一个我不知道如何修复的错误。任何帮助都会很棒！

错误：1084：语法错误：左括号前应为冒号。资料来源：曲棍球PP({hockeyPlayers[i]})；

错误：1084：语法错误：在右大括号之前需要标识符。资料来源：曲棍球PP({hockeyPlayers[i]})；

```
function eliminateAbsentees():void{
    for(var i:int=0; i<=hockeyPlayers.length; i++){
        if(hockeyPlayers[i].attendance==true){
            hockeyPP.push({hockeyPlayers[i]});
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T16:12:28.613

移除 hockeyPlayers[i] 周围的 { 和 }。为什么要以这种方式使用它？

```
function eliminateAbsentees():void{
    for(var i:int = 0; i <= hockeyPlayers.length; i++){
        if(hockeyPlayers[i].attendance == true){
            hockeyPP.push(hockeyPlayers[i]);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T00:54:25.857

正如 Azzy Elvul 所提到的，您的问题是数组项周围的大括号（“{}”）。您会在几个地方看到大括号：

*   函数声明
*   对象声明
*   类声明
*   循环
*   条件句

我认为还有一个，但这就是我想到的。基本上，当您尝试使用此行时：

```
hockeyPP.push({hockeyPlayers[i]}); 
```

您尝试将其声明`hockeyPlayers[i]`为新对象（ActionScript 和大多数语言中最基本的类）。您可以通过两种方式实例化 Object 类：

1.  `var obj:Object = new Object();`和
2.  `var obj:Object = {};`

你试图做第二个，惰性实例化。因此，您尝试声明一个具有属性的对象，`hockeyPlayers[i]`而不将值与其关联（所有 OOP 的基础是属性：值对）。

正如第一个错误所说，您缺少该类型实例化的冒号。如果你想尝试

```
hockeyPP.push({hockeyPlayers[i] : null}); //null is what an object is when it has no value 
```

你不会得到任何错误，因为这是实例化对象的正确方法。但是，为了您的需要，您只想将一个项目从一个数组推送到另一个数组。所以你做 array2.push(array1[ selectedIndex ]);

我肯定会给 LiveDocs 一些阅读。它们可能看起来令人生畏，但是一旦你开始阅读它们，它们就会写得非常好并且很容易理解。

[LiveDocs - 数组](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/Array.html)

[LiveDocs - 对象](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/Object.html)

# c# - 检查日期是否低于 2010？

> ID：14402541
> 
> 赞同：-5
> 
> 时间：2013-01-18T15:50:31.650
> 
> 标签：c#

我试图在 2010 年之前雇用的 Grid 员工中展示。我该怎么做？我有一个`Employee`具有属性的类（名字、姓氏、ID 和就业日期）

```
private List<Employee> _employees = new List<Employee>();

private void Form1_Load(object sender, EventArgs e)
{
    Employee employee1 = new Employee();

    employee1.FirstName = "Etrit";
    employee1.LastName = "Bujupi";
    employee1.Id = 1;
    employee1.EmploymentDay = DateTime.Today;
    _employees.Add(employee1);            

    Employee employee2 = new Employee();

    employee2.FirstName = "Urim";
    employee2.LastName = "Sadiu";
    employee2.Id = 2;
    employee2.EmploymentDay = new DateTime(2009, 1, 23);
    _employees.Add(employee2); 

    Employee employee3 = new Employee();

    employee3.FirstName = "Dardan";
    employee3.LastName = "Mexhuani";
    employee3.Id = 3;
    employee3.EmploymentDay = new DateTime(2007, 2, 7);
    _employees.Add(employee3);            

    Employee add = new Employee();
    if (_employees < System.DateTime.Now)
    {
        EmployeeGrid.DataSource = _employees;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T15:52:19.130

```
EmployeeGrid.DataSource = _employees.Where(e => e.EmploymentDay.Year < 2010).ToList(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T15:52:30.223

尝试这个 ：

```
EmployeeGrid.DataSource = _employees.Where(x=> x.EmploymentDay.Year < 2010); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-18T15:52:46.833

如何改变这个：

```
if (_employees < System.DateTime.Now)
{
    EmployeeGrid.DataSource = _employees;
} 
```

至

```
 EmployeeGrid.DataSource = _employees.Where(e => e.EmploymentDay.Year < 2010).ToList(); 
```

最后的部分可能`.ToList()`不需要，但我添加它是为了与您的实际数据结构保持一致。我建议`.ToList()`先尝试一下，看看是否有效。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-18T15:53:11.757

您可以使用`Linq`它来过滤它：

```
employeeGrid.DataSource = _employees.Where(e => e.EmploymentDay.Year < 2010); 
```

当然，最好不要在首先检查[`DateTime.Year`](http://msdn.microsoft.com/en-us/library/system.datetime.year.aspx)属性时添加它们。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-18T15:55:40.237

```
var query = from e in _employees
            where e.EmploymentDay.Year < 2010
            select e; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-18T15:53:22.937

尝试：

```
 if (_employees < System.DateTime.Now)
        {
            EmployeeGrid.DataSource = _employees.Where(s => s.EmploymentDay.Year < 2010);
        } 
```

您可能需要添加

```
 using System.Linq; 
```

# sorting - extjs 4.x 排序列错误？

> ID：14402550
> 
> 赞同：0
> 
> 时间：2013-01-18T15:50:54.780
> 
> 标签：sorting, extjs, grid, extjs4

我正在使用 Ext 4.x。我有一个记录列表和几列。第一列称为项目名称。我有 5 条记录：Apple、Grapes、Banana、Zucchini、Kiwi。如果我对记录应用过滤器（比如“水果”），则只显示以下记录：Apple、Grapes、Banana、Kiwi。如果我随后对 Project Name 列应用升序排序，则水果按以下顺序显示：Apple、Banana、Grapes、Kiwi。但是，如果我现在删除过滤器，我会按以下顺序看到所有 5 条记录：Zucchini、Apple、Banana、Grapes、Kiwi 而不是 Apple、Banana、Grapes、Kiwi、Zucchini。升序排序仍应适用于该列，并且确实升序排序箭头图标显示在列标题中。但是，排序不是按升序排列的（Zuchini 排在第一位，其次是按升序排列的水果）。这是一个错误吗？我需要该列记住并遵守排序顺序，并在过滤后按该排序顺序显示（新/附加）记录。有人对此有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T16:20:20.677

`clearFilter()`不应用排序。`grid.store.sort();`如果您希望商店正确分类，您可以致电。

示例：http: [//jsfiddle.net/Vandeplas/5aKdc/4/](http://jsfiddle.net/Vandeplas/5aKdc/4/)

笔记：

如果您使用远程排序，请注意......远程排序执行对后端的调用，您必须确保发送正确的属性。

# python - Python 全局列表

> ID：14402557
> 
> 赞同：0
> 
> 时间：2013-01-18T15:51:12.430
> 
> 标签：python, list, globals

我正在学习 python，并且遇到了全局变量/列表的问题。我正在编写一个基本的河内手动塔程序，这是目前的程序：

```
pilar1 = [5,4,3,2,1,0]
pilar2 = [0,0,0,0,0,0]
pilar3 = [0,0,0,0,0,0]

def tower_of_hanoi():

    global pillar1
    global pillar2
    global pillar3

    print_info()

def print_info():

    global pillar1
    global pillar2
    global pillar3

    for i in range(4,-1,-1):
        print(pillar1[i], " ", pillar2[i], " ", pillar3[i]) 
```

我尝试了一些变体，但每次我收到错误“NameError：未定义全局名称'pillar1'”。

在此设置中处理全局列表的最佳方法是什么？如果可能的话，我宁愿只使用一个源文件。谢谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-18T15:51:45.063

这是因为您已将其“声明”为`pilar1`，而不是`pillar1`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-18T15:55:29.620

您遇到的问题`pilar`与`pillar`. 修复该问题后，您将不再需要`global`声明：

```
pilar1 = [5,4,3,2,1,0]
pilar2 = [0,0,0,0,0,0]
pilar3 = [0,0,0,0,0,0]

def tower_of_hanoi():    
    print_info()

def print_info():    
    for i in range(4,-1,-1):
        print(pillar1[i], " ", pillar2[i], " ", pillar3[i]) 
```

只有在非全局范围内分配全局变量时才需要使用 global，例如函数定义：

```
# global variable, can be used anywhere within the file since it's
# declared in the global scope
my_int = 5

def init_list():
    # global variable, can be used anywhere within the file after
    # init_list gets called, since it's declared with "global" keyword
    global my_list
    my_list = [1, 2, 3]

def my_function():
    # local variable, can be used only within my_function's scope
    my_str = "hello"

    # init's global "my_list" variable here, which can then be used anywhere
    init_list()
    my_list.append(5)

my_function()
print(my_list) 
```

但是，您不应过多地使用全局变量，而应使用函数参数来传递值。

# css - Chrome中的垂直边距不折叠

> ID：14402560
> 
> 赞同：3
> 
> 时间：2013-01-18T15:51:16.820
> 
> 标签：css, google-chrome, margin

在这个小提琴中，[http://jsfiddle.net/munkii/tpQQN/](http://jsfiddle.net/munkii/tpQQN/)我通过 intro 类在段落元素上有一些边距底部，通过 what-is 类在列表项上有一些边距底部。

IE

```
article.about .what-is {
    height: 100%;
    margin-bottom: 34px;
    padding-right: 34px;
    width: 600px;
}

article.about p.intro {
    font-weight: bold;
    margin-bottom: 43px;
} 
```

我已经从我的工作中删除了不必要的边距，但我仍然想知道为什么当 FF 和 IE 这样做时 Chrome 没有折叠垂直边距。

有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-16T21:07:48.117

MatTheCat 说得好。

会不会是因为你的身高是100%，火狐把包含的Div的高度作为高度。Chrome 似乎将 p 标签上的边距底部包含在包含 Div 的高度中。

如果那有意义的话...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-16T21:00:15.077

它只能是一个错误。

根据[http://www.w3.org/TR/CSS2/box.html#collapsing-margins](http://www.w3.org/TR/CSS2/box.html#collapsing-margins)这些边距应该像我们在这种情况下一样折叠：

> 如果父级具有“自动”计算高度，则最后一个流入子级的下边距和其父级的下边距

`.what-is`' 高度应该计算为`auto`因为

> 如果包含块的高度没有明确指定（即，它取决于内容高度），并且该元素不是绝对定位的，则该值计算为'auto'。

（[http://www.w3.org/TR/CSS2/visudet.html#the-height-property](http://www.w3.org/TR/CSS2/visudet.html#the-height-property)）

最奇怪的是，计算出的高度确实是`auto`，但 Chrome 似乎并没有做到它所暗示的。

正如亚历克斯的评论所说，您可以删除`height: 100%;`规则，让元素考虑其默认高度。`auto`那是。

# javascript - jQuery selectmenu - 多个菜单，更改时重置其他菜单的值？

> ID：14402561
> 
> 赞同：1
> 
> 时间：2013-01-18T15:51:20.850
> 
> 标签：javascript, jquery, jquery-ui, select-menu

我正在使用 selectmenu 插件来设计我网站上的一些选择菜单。我将它们用于我网站上的过滤功能。我希望用户一次只能过滤一个菜单。因此，当用户在一个菜单上选择一个选项时，另一个菜单上的值需要返回到默认选项。

我有一个 jsfiddle 设置我想要完成的事情。它几乎可以工作了。我可以让其他菜单将其值重置为选项列表中的第一个值。问题是我要更改的那个并没有改变，它只是保持默认值。

希望我已经解释得足够好。这是 jsfiddle 的链接....

[http://jsfiddle.net/dmcgrew/FBzFL/](http://jsfiddle.net/dmcgrew/FBzFL/)

这是我的代码：

```
<select name="type" id="type">
<option value="*" selected="selected">Select Project Type</option>
<option value=".annualreport">Annual Report</option>
<option value=".branding">Branding</option> 
<option value=".brochures">Brochures</option>
<option value=".retail-signage">Retail Signage</option>
<option value=".video">Video</option>
<option value=".web">Web Development</option>       
</select>

<select name="industry" id="industry">
<option value="*" selected="selected" class="default">Select Project Industry</option>
<option value=".consumergoods">Consumer Goods</option>
<option value=".education">Education</option>
<option value=".entertainment">Entertainment</option>
<option value=".food">Food</option>
<option value=".healthcare">Healthcare</option>
</select>

$(function(){            

$('select').selectmenu({
menuWidth: 170,
width: 170,
maxHeight: 600
});

$('select#type').change(function(){
$("select#industry").selectmenu("index", 0);
});

$('select#industry').change(function(){
$("select#type").selectmenu("index", 0);
});

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T16:27:55.447

只需要检测下拉列表中的 a`click()`而不是. 这是新的js：`a``change()``select`

```
$('ul#type-menu li a').click(function(){
    $("select#industry").selectmenu("index", 0);
});

$('ul#industry-menu li a').click(function(){
    $("select#type").selectmenu("index", 0);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T16:31:28.577

您可以取消绑定侦听器，但我认为更好的解决方案是添加和删除一个类（请参阅[暂时抑制 jQuery 事件处理](https://stackoverflow.com/questions/1809275/suppress-jquery-event-handling-temporarily)）。在你的情况下：

```
$('select#type').change(function(){
    if ($(this).hasClass('fired') == false) {
        $('select#type').addClass('fired');
        $('select#industry').selectmenu("index", 0);
    }
    $('select#industry').removeClass('fired');    
});

$('select#industry').change(function(){
     if ($(this).hasClass('fired') == false) {
        $('select#industry').addClass('fired');
        $("select#type").selectmenu("index", 0);
    }
    $('select#type').removeClass('fired');   
}); 
```

这是jsfiddle：http: [//jsfiddle.net/JEfMD/](http://jsfiddle.net/JEfMD/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T15:59:50.530

啊，想通了！

当您以编程方式更改一个选择下拉列表的值时，它将触发附加到该元素的任何更改侦听器。因此，即使您通过 UI 更改一个选择下拉列表的值，两个更改侦听器最终都会被触发。

**编辑**：很高兴听到你想通了！是的，我试图找出一种方法来保留更改听众，但这比我想象的要困难得多，除非我遗漏了一些明显的东西。但是在锚元素上设置点击监听器应该可以很好地解决这个问题。

# jquery - 画廊在 ie8 的 SimpleModal 中没有显示

> ID：14402563
> 
> 赞同：1
> 
> 时间：2013-01-18T15:51:23.673
> 
> 标签：jquery, simplemodal

我试图让一个弹出窗口在我们的新网站上显示一个简单的画廊。

我将 SimpleModal 用于弹出窗口，将 Ad-Gallery 用于幻灯片。

它在 Firefox、Chrome 等中一切正常，但在 Internet Explorer 中，弹出窗口正常，但除非您右键单击 iframe 并单击刷新，否则图库将无法正常工作，此时一切正常。我花了几天时间寻找答案，但没有任何运气，有人可以帮忙吗？打开弹窗的代码是...

```
 <div id="content">
      <div id='basic-modal'>
        <div>
        <a href="#" id="tours_past_gallery_link" name='list' class='list'><i>Gallery of past tours</i></a>
        </div>
         <div id="list-modal-content">
         <iframe width="800" height="600" frameborder="0" scrolling="no" marginheight="0" marginwidth="0" src="tours_gallery.html"></iframe>
         </div>
        <!-- preload the images -->
        <div style='display:none'>
        <img src='img/basic/x.png' alt='' />
        </div>
      </div id='basic-modal'>
     </div id="content"> 
```

谢谢你

# mysql - MySQL所有的父子关系

> ID：14402568
> 
> 赞同：3
> 
> 时间：2013-01-18T15:51:38.853
> 
> 标签：mysql, hierarchical-data

我有一张名为`table`. 它有一个以`id`type命名的字段`INT(11)`，它代表行的标识符，它还有其他字段，但我认为它们与这个问题无关。

我有另一个名为`table_children`. 它有一个名为`parent`type的字段，`INT(11)`该字段称为`table.id`外键。它有另一个以`child` type命名的字段`INT(11)`，也`table.id`称为外键。此表描述了`table`行到`table`行的父子关系。

这是一个可能的设置。

```
table   table_children
id      parent child
0       0      1
1       1      2
2       1      3
3       3      4
4 
```

如何在最少数量的请求中获得`id`所有后代的 's ？`0`这里的答案是`1`, `2`, `3`, `4`。

感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T16:55:37.033

使用 MySQL，我这样做的最简单方法是将*所有*路径存储在树中，创建一个[传递闭包](http://en.wikipedia.org/wiki/Transitive_closure)。

```
table_children
parent child
0      0
1      1
2      2
3      3
4      4
0      1
0      2
0      3
0      4
1      2
1      3
1      4
3      4 
```

现在您可以这样查询它：

```
SELECT t.*
FROM table_children c
JOIN table t ON c.child = t.id
WHERE c.parent = 0; 
```

也可以看看：

*   [将平面表解析为树的最有效/优雅的方法是什么？](https://stackoverflow.com/questions/192220/what-is-the-most-efficient-elegant-way-to-parse-a-flat-table-into-a-tree/192462#192462)
*   [使用 SQL 和 PHP 的分层数据模型](http://www.slideshare.net/billkarwin/models-for-hierarchical-data)
*   [SQL 反模式：避免数据库编程的陷阱](http://pragprog.com/book/bksqla/sql-antipatterns)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T16:03:32.257

由于 MySQL 不是为使用递归查询而设计的，因此我编写了存储过程来处理这个问题。请参阅我的 DBA StackExchange 帖子：[**查找分层字段的最高级别：有与无 CTE**](https://dba.stackexchange.com/a/7161/877)

我写了以下功能

*   `GetParentIDByID`
*   `GetAncestry`
*   `GetFamilyTree`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T16:06:55.607

使用当前设置数据的方式，可以有效地获取所有后代。你会这样查询：

```
SELECT child FROM table_children WHERE parent in (x, y, z); 
```

其中 x、y 和 z 是在前一次迭代中检索到的所有子项。重复查询，直到没有更多行。这将需要与树的深度一样多的查询。

但是，如果您愿意更改在 DB 中存储树的方式，还有另一种称为 MPTT（修改的预排序树遍历）的替代方法，它允许您使用单个查询获取整个子树，尽管更新更棘手. 您需要弄清楚插入的额外复杂性是否为您的应用程序带来了良好的折衷，以获得高效检索的好处。

[这里](http://www.sitepoint.com/hierarchical-data-database-2/)有一篇很好的文章解释了 MPTT 。

# google-apps-script - 更改 pdf 和非 google 文档的 acl（EDU 域）

> ID：14402569
> 
> 赞同：0
> 
> 时间：2013-01-18T15:51:41.457
> 
> 标签：google-apps-script, gdata-api, google-data-api, google-apps-for-education

我在尝试从 Google Apps 脚本（Google Apps for Education）更改文件所有权时收到此错误：

GData`ServiceException`您还不能更改此项目的所有者。（我们正在努力。）

相同的代码适用于 Google Apps for Business 域。EDU 域有限制吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T10:15:46.083

好的，在 Google Drive 支持页面中找到了答案：

> 只有 Premier 和 Government 域中的 Google Apps 客户可以转让已同步或上传文件（例如 PDF 或图像文件）的所有权。如果您通过个人帐户或 Google Apps for Education 帐户使用 Google 云端硬盘和 Google 文档，则无法转让已同步或上传文件的所有权。

[http://support.google.com/drive/bin/answer.py?hl=en&answer=2494892](http://support.google.com/drive/bin/answer.py?hl=en&answer=2494892)

有谁知道为什么教育帐户存在此限制？谷歌真的在努力吗（如错误消息中所述）？

# ruby - Heroku 中 ERB-Sinatra 上的“没有这样的文件或目录”

> ID：14402571
> 
> 赞同：0
> 
> 时间：2013-01-18T15:51:42.787
> 
> 标签：ruby, heroku, sinatra

我正在使用 Sinatra 作为框架在 Ruby 中为大学做应用程序，我使用 erb 作为模板，在本地一切正常，但在 heroku 中给了我这个错误：

```
No such file or directory - /app/views/index.erb: 
```

我很讨厌 Heroku，都是问题。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T23:30:41.457

I ran into a problem like this, my paths were messed up. In your `config.ru` file or your `.rb` file, above your sinatra code put:

```
set :root, './' 
```

This should fix your problem especially because your also having trouble with your `models`.

# php - 如何使用 php 和 mysql 数组获取 json 对象

> ID：14402577
> 
> 赞同：0
> 
> 时间：2013-01-18T15:51:51.817
> 
> 标签：php, mysql, json

我正在尝试从 php 获取 json 数据，当使用 jquery json 时，它会显示未定义的对象。我不知道我的代码哪里有问题。有人可以帮忙吗？

这是json代码：

```
$("document").ready(function() {
$("body").css("background", "#ccc");
$(".sitebuttons").click(function() {
    $("#subcat").html("");
    $.getJSON("subcat.php", {catid: $(this).attr("id")}, function(data){
        $.each(data, function(index, array) {
            $("#subcat").append("<input type='button' class='subcat' id='" + data.subcat_id + "' value='"
                    + data.subcat_name + "'></p>");
        });
    });
}); 
```

});

这是PHP代码

```
 $select_subcat = mysql_query("SELECT * FROM wp_leadsubcat WHERE cat_id=" . $_GET['catid']);
$rows = array();
while ($result2 = mysql_fetch_assoc($select_subcat)) {
    $rows[] = $result2;
}
echo json_encode($rows); 
```

请在此处查看屏幕截图：http: [//imageshack.us/photo/my-images/560/screenshotqvl.png/](http://imageshack.us/photo/my-images/560/screenshotqvl.png/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T15:56:30.710

我认为索引可以解决问题

```
 $("#subcat").append("<input type='button' class='subcat' id='" + data[index].subcat_id + "' value='"
                    + data[index].subcat_name + "'></p>"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T16:37:36.627

阅读有关[jquery](http://api.jquery.com/jQuery.each/)的文档。

简而言之`jQuery.each( collection, callback(indexInArray, valueOfElement) )`

index 表示索引，valueOfElement 表示集合中的当前元素。在你的情况下行。

这是一个修复。

```
$("document").ready(function() {
$("body").css("background", "#ccc");
$(".sitebuttons").click(function() {
  $("#subcat").html("");
  $.getJSON("subcat.php", {catid: $(this).attr("id")}, function(data){
    $.each(data, function(index, row) {
      $("#subcat").append(
         "<input type='button' class='subcat' id='" + row.subcat_id + "' value='"+ row.subcat_name + "'>"
      );
    });
  });
}); 
```

并且附加部分可以像这样优化（你可以看到它更具可读性）

```
$("#subcat").append($(
  "<input/>"
, {
    cssClass: 'subcat'
  , id: row.subcat_id
  , value: row.subcat_name
}
)); 
```

# c++ - C++ 友元函数

> ID：14402582
> 
> 赞同：0
> 
> 时间：2013-01-18T15:51:59.757
> 
> 标签：c++, friend, access-control, friend-function

我的问题很简单。我正在学习朋友功能，但这由于某种原因不起作用。如果我用 Window_Mgr 类交换屏幕类，然后添加屏幕类的前向声明，它只会说。它不起作用是因为屏幕在那个时间点不知道“重新定位”的存在吗？

```
class Window_Mgr;
class screen
{
public:
    typedef string::size_type index;
    friend Window_Mgr& Window_Mgr::relocate(int, int, screen&);
private:
    int width, height;
};

class Window_Mgr
{
public:
    Window_Mgr& relocate(int r, int c, screen& s);
private:

};

Window_Mgr& Window_Mgr::relocate(int r, int c, screen& s)
{
    s.height=10;
    s.width=10;
};

int main(int argc, char* argv[])
{

    system("pause");
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T15:56:00.627

您必须在`Window_Mgr`BEFORE定义类`screen`，因为在您的代码中，编译器无法确保`Window_Mgr`确实有一个带有 name 的成员函数`relocate`，或者您只是在对它撒谎。编译器从上到下解析文件，在向下的过程中，它的工作是确保每个声明都是事实，而不是谎言！

由于`relocate()`采用 type 参数`screen&`，因此您必须提供前向声明`screen`！

通过这些修复（以及其他次要修复），此代码现在[可以正常编译](http://stacked-crooked.com/view?id=0818550097decca404b3b3b9b5c695ef)（忽略愚蠢的警告）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T15:54:29.610

是的，`Window_Mgr::relocate`在朋友声明时是未知的。您必须`Window_Mgr`事先定义。

# azure-web-app-service - Azure 共享网站计费

> ID：14402584
> 
> 赞同：2
> 
> 时间：2013-01-18T15:52:00.147
> 
> 标签：azure-web-app-service

我的共享实例网站每月花费大约 20 英镑，这在我的账单中详细说明为“计算时间”。

[根据 Scott Gu 的博客](http://weblogs.asp.net/scottgu/archive/2012/09/17/announcing-great-improvements-to-windows-azure-web-sites.aspx) ，“您使用标准的“即用即付”模式为共享模式网站付费，我们支持 Windows Azure 的其他功能（这意味着没有前期成本，您只需为使用的时间付费）该功能已启用）。在共享模式下运行的网站在预览期间仅花费 1.3 美分/小时（因此平均每月 9.36 美元）。

根据[azure 定价计算器](http://www.windowsazure.com/en-us/pricing/calculator/)，共享实例上的站点应花费 9.36 美元。

根据[Azure 定价详情](http://www.windowsazure.com/en-us/pricing/details/)

> “共享实例模型
> 
> 共享实例模型支持自定义域名、1 GB 存储空间以及根据您的 Windows Azure 订阅条款按标准即用即付费率收费的无限制出站数据传输。每个网站最多可以部署三个实例，但需要额外付费。
> 
> 在共享实例模型下，您将获得以下好处：
> 
> 能够分配您的自定义主机或域名以现收现付费率收费的出站流量；无限制的入站数据传输 1 GB 存储（由所有站点共享） 20 MB 第三方 MySQL 数据库 在共享实例模型下运行的每个网站将按每个网站实例每小时 0.02 美元（约 14.40 美元/月）收费在一般可用性。在预览期间，每个网站实例的有效月费率为 9.60 美元/月，可享受 33% 的折扣。在预览期间，所有付费共享实例小时数都将使用当前的云服务小型计算表计费，但我们将排放 1/9 的云服务小型计算小时数，以提供每个网站实例 9.60 美元/月的折扣价。每个付费共享网站实例的每月计算如下：

那我有什么误解？目前（2013 年 1 月）共享网站的每月费用应低于 10 美元。

**编辑更多信息** 我支付的价格正好是 9.60 英镑的 3 倍

# java - 你如何获得列表 用反射？

> ID：14402585
> 
> 赞同：14
> 
> 时间：2013-01-18T15:52:02.093
> 
> 标签：java, reflection

我有一个方法，并检查`method.getParameterTypes()[0]`，这是一个`java.util.List`. 但我想弄清楚包含类型是什么，例如，如果它是`java.util.List<String>`我想弄清楚它应该包含字符串。

我该怎么做呢？

谢谢！

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-01-18T16:43:11.210

```
Type listType = method.getGenericParameterTypes()[0];
if (listType instanceof ParameterizedType) {
    Type elementType = ((ParameterizedType) listType).getActualTypeArguments()[0];
} 
```

请注意，元素类型不必是实际`Class`的`String`类型——它可以是类型变量、通配符类型等。

[您可以在此处](http://tutorials.jenkov.com/java-reflection/generics.html)和[此处](https://github.com/google/guava/wiki/ReflectionExplained)阅读有关从反射项目中抓取泛型信息的更多信息。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-18T15:54:19.067

这很简单：你不能。在编译时，Java 会擦除泛型类型（请参阅[类型擦除](http://docs.oracle.com/javase/tutorial/java/generics/erasure.html)）。

你可以[在这里](https://stackoverflow.com/questions/923624/java-type-erasure-vs-fieldgetgenerictype-and-methodgetgenericreturntype)和[这里](https://stackoverflow.com/a/3403976/1679537)查看更多信息`GetGenericType`（老实说，我不知道），但它似乎相当有限。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-27T17:46:34.513

我有同样的问题，我做了如下

在这里：您的班级被初始化为 clazz（例如 - Company.Class），您的收藏为

> `List<Employees> companyEmployee`
> 
> `String collectionType`- 列表
> 
> `String collectionContent` - 员工

* * *

```
Method[] methodList = clazz.getDeclaredMethods();
Method classMethod = methodList[0];

String[] collection= classMethod.getReturnType().toString().split("\\.");

String collectionType = collection[collection.length - 1]

String collectionContent = classMethod.getGenericReturnType().getTypeName().split("<")[1].split(">")[0] 
```

# regex - 正则表达式检查没有字符串

> ID：14402589
> 
> 赞同：0
> 
> 时间：2013-01-18T15:52:17.603
> 
> 标签：regex, string, expression

我想从包含“NAME”的字符串列表（所有大写字母）中查找，但在名称之前和之后我不想要任何字符。所以我尝试了这个正则表达式“[^AZ]NAME[^AZ]。但是像“NAME”或“NAME”这样的字符串无法匹配，我以为 [^AZ] 只要它们不在就检查这些角色，什么也不会。我在这里错过了什么吗？

克里斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T15:54:49.553

尝试使用单词边界：

```
\bNAME\b 
```

这是一个演示：[http ://regexr.com?33f1d](http://regexr.com?33f1d)

# excel - Excel - 条件日期函数

> ID：14402594
> 
> 赞同：0
> 
> 时间：2013-01-18T15:52:27.257
> 
> 标签：excel, excel-formula

使用 Excel，我想创建一个条件日期公式，如下所示：

如果日期大于或等于 2013 年 1 月 18 日，请在此单元格中输入 $220.00。

这可能吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T16:14:22.750

如果单元格 A1 包含日期，请在另一个单元格中尝试此公式

`=IF(A1>=DATE(2013,1,18),220,"")`

将公式单元格格式化为货币

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T07:45:52.677

尝试这个：

```
 =IF(A1>DATEVALUE("17/1/2012"),220) 
```

# java - 在 java (JSP) 中提取 .tar.gz 文件

> ID：14402598
> 
> 赞同：7
> 
> 时间：2013-01-18T15:52:40.170
> 
> 标签：java, jsp, extract, tar, apache-commons

我似乎无法导入所需的包或找到任何关于如何`.tar.gz`在 java 中提取文件的在线示例。

更糟糕的是我正在使用 JSP 页面并且在将包导入我的项目时遇到了麻烦。我将 .jar 复制到`WebContent/WEB-INF/lib/`然后右键单击项目并选择导入外部 jar 并导入它。有时包会解析，有时则不会。似乎也无法让 GZIP 导入。eclipse for jsp 中的导入不像在普通 Java 代码中那样直观，您可以在其中右键单击已识别的包并选择导入。

我已经尝试过 Apache 公共库、ice 和另一个名为 JTar 的库。Ice已经导入了，但是我找不到任何如何使用它的例子？

我想我需要先解压缩 gzipped 部分，然后用 tarstream 打开它？

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-06-13T04:06:01.583

接受的答案工作正常，但我认为写入文件操作是多余的。

你可以使用类似的东西

```
 TarArchiveInputStream tarInput = 
      new TarArchiveInputStream(new GZipInputStream(new FileInputStream("Your file name")));

 TarArchiveEntry currentEntry = tarInput.getNextTarEntry();
 while(currentEntry != null) {
      File f = currentEntry.getFile();
      // TODO write to file as usual
 } 
```

希望这有帮助。

[Maven 回购](http://mvnrepository.com/artifact/org.apache.commons/commons-compress/1.2)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-20T17:41:40.767

好的，我终于想通了，这是我的代码，以防将来对任何人有所帮助。它是用 Java 编写的，使用 apache commons io 和 compress 库。

```
File dir = new File("directory/of/.tar.gz/files/here");
File listDir[] = dir.listFiles();
if (listDir.length!=0){
    for (File i:listDir){
        /*  Warning! this will try and extract all files in the directory
            if other files exist, a for loop needs to go here to check that
            the file (i) is an archive file before proceeding */
        if (i.isDirectory()){
            break;
        }
        String fileName = i.toString();
        String tarFileName = fileName +".tar";
        FileInputStream instream= new FileInputStream(fileName);
        GZIPInputStream ginstream =new GZIPInputStream(instream);
        FileOutputStream outstream = new FileOutputStream(tarFileName);
        byte[] buf = new byte[1024]; 
        int len;
        while ((len = ginstream.read(buf)) > 0) 
        {
            outstream.write(buf, 0, len);
        }
        ginstream.close();
        outstream.close();
        //There should now be tar files in the directory
        //extract specific files from tar
        TarArchiveInputStream myTarFile=new TarArchiveInputStream(new FileInputStream(tarFileName));
        TarArchiveEntry entry = null;
        int offset;
        FileOutputStream outputFile=null;
        //read every single entry in TAR file
        while ((entry = myTarFile.getNextTarEntry()) != null) {
            //the following two lines remove the .tar.gz extension for the folder name
            String fileName = i.getName().substring(0, i.getName().lastIndexOf('.'));
            fileName = fileName.substring(0, fileName.lastIndexOf('.'));
            File outputDir =  new File(i.getParent() + "/" + fileName + "/" + entry.getName());
            if(! outputDir.getParentFile().exists()){ 
                outputDir.getParentFile().mkdirs();
            }
            //if the entry in the tar is a directory, it needs to be created, only files can be extracted
            if(entry.isDirectory){
                outputDir.mkdirs();
            }else{
                byte[] content = new byte[(int) entry.getSize()];
                offset=0;
                myTarFile.read(content, offset, content.length - offset);
                outputFile=new FileOutputStream(outputDir);
                IOUtils.write(content,outputFile);  
                outputFile.close();
            }
        }
        //close and delete the tar files, leaving the original .tar.gz and the extracted folders
        myTarFile.close();
        File tarFile =  new File(tarFileName);
        tarFile.delete();
    }
} 
```

# javascript - 使用 Javascript 获取 JSF 定义的组件

> ID：14402601
> 
> 赞同：1
> 
> 时间：2013-01-18T15:52:44.463
> 
> 标签：javascript, jsf, composite-component

我正在使用 JSF 创建一个界面，如果第二个尚未设置，我希望一个文本字段的值提供一秒钟的默认值。关键代码如下所示：

```
<h:outputScript>
function suggestValue2() {
    var value2 = document.getElementById('value2').value;
    if (value2 == "") {
        document.getElementById('value2').value = document.getElementById('value1').value;
    }
}
</h:outputScript>

<h:inputText
    id="value1"
    onblur="suggestValue2();" />

<h:inputText
    id="value2" /> 
```

问题是这实际上不起作用。这两个输入元素的实际 ID 以一些 JSF 生成的值作为前缀，这会阻止`getElementById`调用。对我来说，完成我在这里想要完成的事情的最佳方式是什么？

* * *

**编辑：** 我应该注意这将出现在一个复合组件中，它可能最终在一个页面上出现多次。JSF 动态设置实际 ID 表示期望的行为。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T16:32:52.820

将组件绑定到视图，

```
<h:inputText binding="#{input1}" ... /> 
```

这样您就可以通过 . 在视图的其他位置打印其客户端 ID [`UIComponent#getClientId()`](http://docs.oracle.com/javaee/6/api/javax/faces/component/UIComponent.html#getClientId%28%29)。

```
<h:outputScript>
    var input1 = document.getElementById('#{input1.clientId}');
    // ...
</h:outputScript> 
```

* * *

正如您提到的，您在复合组件中，最好知道复合组件自己的客户端 ID 已经可以通过`#{cc.clientId}`. 因此，更推荐的替代方案是：

```
<cc:implementation>
    <h:outputScript>
        var input1 = document.getElementById('#{cc.clientId}:input1');
        // ...
    </h:outputScript>
    ...
    <h:inputText id="input1" ... />
    ...
</cc:implementation> 
```

### 也可以看看：

*   [将 JavaScript 集成到 JSF 复合组件中，干净的方式](https://stackoverflow.com/questions/12615556/integrate-javascript-with-jsf-the-clean-way)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T16:24:34.350

Jsf 使用“命名容器”的概念，它表示 id 在提供的容器中不必是唯一的。前提是容器有一个 Id。因此，如果您没有为容器提供 Id，jsf 会在元素之前附加不可预测的值。有了容器的 id，它就变成了 containerid:elements id。这可以在 JavaScript 中可靠地使用

# powershell - 如何搜索文本文件的第一行和最后一行？

> ID：14402603
> 
> 赞同：6
> 
> 时间：2013-01-18T15:52:48.750
> 
> 标签：powershell, powershell-ise

我只需要搜索文本文件中的第一行和最后一行即可找到“-”并将其删除。我该怎么做？我尝试了选择字符串，但我不知道找到第一行和最后一行，只从那里删除“-”。

这是文本文件的样子：

```
 % 01-A247M15 G70 
N0001 G30 G17 X-100 Y-100 Z0
N0002 G31 G90 X100 Y100 Z45
N0003 ; --PART NO.:  NC-HON.PHX01.COVER-SHOE.DET-1000.050 
N0004 ; --TOOL:  8.55 X .3937 
N0005 ;  
N0006  % 01-A247M15 G70 
```

像这样的东西？

```
$1 = Get-Content C:\work\test\01.I

$1 | select-object -index 0, ($1.count-1) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-18T15:58:56.353

尝试：

```
$txt = get-content c:\myfile.txt
$txt[0] = $txt[0] -replace '-'
$txt[$txt.length - 1 ] = $txt[$txt.length - 1 ] -replace '-'
$txt | set-content c:\myfile.txt 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-18T17:45:22.993

好的，所以在看了一段时间之后，我决定必须有一种方法可以用一个衬垫来做到这一点。这里是：

```
(gc "c:\myfile.txt") | % -Begin {$test = (gc "c:\myfile.txt" | select -first 1 -last 1)} -Process {if ( $_ -eq $test[0] -or $_ -eq $test[-1] ) { $_ -replace "-" } else { $_ }} | Set-Content "c:\myfile.txt" 
```

以下是它在做什么的细目：

首先，现在熟悉的别名。我只是把它们放进去是因为命令足够长，所以这有助于保持事情的可管理性：

1.  `gc`方法`Get-Content`
2.  `%`方法`Foreach`
3.  `$_`用于当前管道值（这不是别名，但我想我会定义它，因为你说你是新人）

好的，现在这是发生的事情：

1.  `(gc "c:\myfile.txt") |` --> 获取内容`c:\myfile.txt`并将其发送到下一行
2.  `%` --> 执行 foreach 循环（分别遍历管道中的每个项目）
3.  `-Begin {$test = (gc "c:\myfile.txt" | select -first 1 -last 1)}` --> 这是一个开始块，它在进入管道之前运行这里的所有内容。它将第一行和最后一行加载`c:\myfile.txt`到一个数组中，这样我们就可以检查第一个和最后一个项目
4.  `-Process {if ( $_ -eq $test[0] -or $_ -eq $test[-1] )` --> 这将对管道中的每个项目进行检查，检查它是文件中的第一项还是最后一项
5.  `{ $_ -replace "-" } else { $_ }` --> 如果它是第一个或最后一个，它会替换，如果不是，它就不管它
6.  `| Set-Content "c:\myfile.txt"` --> 这会将新值放回文件中。

有关这些项目的更多信息，请参阅以下网站：

[Get-Content 使用](http://technet.microsoft.com/en-us/library/ee176843.aspx)
[Get-Content 定义](http://technet.microsoft.com/en-us/library/hh849787.aspx)
[Foreach Foreach](http://technet.microsoft.com/en-us/library/ee176828.aspx)
[的 Pipeline](http://technet.microsoft.com/en-us/library/ee176927.aspx)
[Begin 和 Process](http://ss64.com/ps/syntax-function-input.html)部分（这通常用于自定义函数，但它们也适用于 foreach 循环）
[If ... else](http://blogs.technet.com/b/flaphead/archive/2006/09/12/455555.aspx)语句
[Set-Content](http://technet.microsoft.com/en-us/library/ee176959.aspx)

所以我在想如果你想对很多文件这样做，或者想经常这样做。我决定制作一个功能来满足您的要求。这是功能：

```
function Replace-FirstLast {
    [CmdletBinding()]
    param(
        [Parameter( `
            Position=0, `
            Mandatory=$true)]
        [String]$File,
        [Parameter( `
            Position=1, `
            Mandatory=$true)]
        [ValidateNotNull()]
        [regex]$Regex,
        [Parameter( `
            position=2, `
            Mandatory=$false)]
        [string]$ReplaceWith=""
    )

Begin {
    $lines = Get-Content $File
} #end begin 

Process {
    foreach ($line in $lines) {
        if ( $line -eq $lines[0]  ) {
            $lines[0] = $line -replace $Regex,$ReplaceWith 
        } #end if
        if ( $line -eq $lines[-1] ) {
            $lines[-1] = $line -replace $Regex,$ReplaceWith
        }
    } #end foreach
}#End process

end {
    $lines | Set-Content $File
}#end end

} #end function 
```

这将创建一个名为`Replace-FirstLast`. 它会被这样调用：

```
Replace-FirstLast -File "C:\myfiles.txt" -Regex "-" -ReplaceWith "NewText" 
```

是可选的`-Replacewith`，如果它是空白的，它只会删除（默认值`""`）。`-Regex`正在寻找一个正则表达式来匹配您的命令。有关将其放入您的个人资料的信息，请查看[本文](http://technet.microsoft.com/en-us/library/ee692764.aspx)

**请注意：** 如果您的文件非常大（几 GB），这不是最佳解决方案。这将导致整个文件存在于内存中，这可能会导致其他问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-18T17:00:25.083

您可以使用`select-object`cmdlet 来帮助您解决此问题，因为`get-content`基本上将文本文件作为一个巨大的数组输出。

因此，你可以做这样的事情

```
get-content "path_to_my_awesome_file" | select -first 1 -last 1 
```

之后要移除破折号，您可以使用`-Replace`开关找到破折号并将其移除。这比使用`System.String.Replace(...)`方法更好，因为它可以匹配正则表达式语句并替换整个字符串数组！

那看起来像：

```
# gc = Get-Content. The parens tell Powershell to do whatever's inside of it 
# then treat it like a variable.
(gc "path_to_my_awesome_file" | select -first 1 -last 1) -Replace '-','' 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-05-08T09:16:28.367

如果您的文件非常大，您可能不想读取整个文件来获取最后一行。gc -Tail 会很快为您获取最后一行。

```
function GetFirstAndLastLine($path){

    return  New-Object PSObject -Property @{        
        First = Get-Content $path -TotalCount 1
        Last = Get-Content $path -Tail 1
        }
}

GetFirstAndLastLine "u_ex150417.log" 
```

我在一个 20 GB 的日志文件上尝试了这个，它立即返回。读取文件需要几个小时。

如果您想保留所有删除的内容并且只想从最后删除，您仍然需要阅读该文件。使用 -Tail 是一种快速检查它是否存在的方法。

我希望它有所帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-18T20:47:20.773

对上述问题的更清晰的答案：

```
$Line_number_were_on = 0
$Awesome_file = Get-Content "path_to_ridiculously_excellent_file" | %{ 
    $Line = $_ 
    if ($Line_number_were_on -eq $Awesome_file.Length) 
         { $Line -Replace '-','' } 
    else 
         { $Line } ; 
    $Line_number_were_on++ 
} 
```

我喜欢单行文字，但我发现有时当我将简洁性置于功能之上时，可读性往往会受到影响。如果您正在做的事情将成为其他人将阅读/维护的脚本的一部分，那么可读性可能是需要考虑的事情。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-21T16:20:08.777

按照尼克的回答：我确实需要对目录树中的所有文本文件执行此操作，这就是我现在使用的：

```
Get-ChildItem -Path "c:\work\test" -Filter *.i | where { !$_.PSIsContainer } | % { 
$txt = Get-Content $_.FullName; 
$txt[0] = $txt[0] -replace '-'; 
$txt[$txt.length - 1 ] = $txt[$txt.length - 1 ] -replace '-';
$txt | Set-Content $_.FullName
} 
```

看起来它现在运行良好。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-06-27T08:51:42.770

简单的过程：将 $file.txt 替换为您的文件名

> 获取内容 $file_txt | 选择对象 -last 1

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-03-27T18:51:02.273

我最近在 .bat 文件的最后一行中搜索注释。它似乎弄乱了以前命令的错误代码。我发现这对于在文件的最后一行中搜索模式很有用。Pspath 是 get-content 输出的隐藏属性。如果我使用选择字符串，我会丢失文件名。*.bat 作为 -filter 传递速度。

```
get-childitem -recurse . *.bat | get-content -tail 1 | where { $_ -match 'rem' } | 
  select pspath

PSPath
------
Microsoft.PowerShell.Core\FileSystem::C:\users\js\foo\file.bat 
```

# java - 获取双变量函数的梯度

> ID：14402605
> 
> 赞同：1
> 
> 时间：2013-01-18T15:52:56.463
> 
> 标签：java, math, apache-commons-math

我正在做一些视频处理，对于每一帧我需要得到一个双变量函数的梯度。该函数表示为一个二维双精度数组。其中域是行和列索引，范围是相应索引值的双精度值。或者更简单地说，函数`f`是`double[][] matrix`这样定义的：

`f(x,y)=matrix[x][y]`

我正在尝试使用 Apache Commons Math 库：

```
SmoothingPolynomialBicubicSplineInterpolator iterpolator = new SmoothingPolynomialBicubicSplineInterpolator();
BicubicSplineInterpolatingFunction f = iterpolator.interpolate(xs, ys, matrix.getData());
    for (int i = 0; i < ans.length; i++) {
        for (int j = 0; j < ans[0].length; j++) {
            ans[i][j] = f.partialDerivativeY(i, j); 
        }
    } 
```

*   使用 xs，作为 x 索引的排序数组`(0,1,...,matrix.getRowDimension() - 1)`
*   ys 在列维度上相同`(0,1,...,matrix.getColumnDimension() - 1)`

问题是，对于一个典型的矩阵，`150X80`它的大小需要`1.4`几秒钟的时间才能运行，这使得它与我的需求完全无关。所以，作为这个库的新手用户，以及一般的编程数值分析，我想知道：

1.  难道我做错了什么？
2.  有没有另一种更快的方法可以完成这项任务？
3.  是否有另一个提供解决方案的开源库（最好是对 maven 友好的）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T16:57:04.940

数值微分本身就是一个完整的主题，一个简单的谷歌应该提供足够的材料供您使用（仅 wiki 可能就足够了）。您的问题的某些参数我不知道，所以我只能在这里泛泛地说，但是有确定给定点的梯度的直接方法，即不需要插值的方法。请参阅维基百科的公式（范围从简单`f(x+1)-f(x)`的 where`h=1`到更高阶的）。计算偏导数是一个简单的`O(NM)`循环，里面有一个超级简单的公式（不需要插值）。

细节可能会变得坚韧：

1.  需要为边缘减少高阶公式，或完全丢弃。
2.  您精确的速度要求可能会使更复杂的公式变得无用（取决于平台，有时高阶公式的查找时间会使它们太慢；同样，这取决于缓存等）。这很容易测试，公式很简单；对它们进行编码和基准测试。
3.  具体实现还取决于您的错误要求。该理论提供了误差范围，因此它将在您需要的公式中发挥作用；但同样，需要权衡速度要求。如果你知道你将要处理的矩阵类型的细节，如果这样的事情是已知的，那么反过来实际上可以降低。

如果您有现有的卷积工具，则可以使实现变得更加容易（也许更快），因为这种方法实际上只是矩阵的卷积（注意；从技术上讲，它被称为互相关）。

# php - 从外部文件和不同的类添加新的 CSS 样式

> ID：14402613
> 
> 赞同：-2
> 
> 时间：2013-01-18T15:53:36.473
> 
> 标签：php, css, class, import, external

我有一个名为 index.php 的页面

```
<html>
<head>
<link rel="stylesheet" type="text/css" href="mystyle.css" />
...
<body>
<div class="my_class"></div>
...
</body>
</html> 
```

在`mystyle.css`没有声明的情况下，`.my_class` 我有另一个名为 external_style.css 的文件，其中没有任何声明，`.my_class`但有一个名为的类`.new_class`

无法导入或附加 external_style.css - 因为它会覆盖其他元素。

我的问题是：如何在`.my_class`不导入文件的情况下从 external_style.css 获取 .new_class 的属性。有没有办法使用 php 读取该文件？还有其他更好的解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T15:59:52.050

如果在**mystyles.css**`.my_class`中不存在，您能否不只是从**external_style.css**中获取您的代码并在**mystyles.css**中创建一个？还是我错过了重点？**`.new_class`**`.my_class`****

 ******* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T16:03:25.533

您可能想研究使用带有 CSS 标头的 PHP 文件。这篇文章应该让你开始：[http ://sperling.com/examples/pcss/](http://sperling.com/examples/pcss/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T16:37:46.720

**您可以做几件事来实现您想要完成的目标**

1.  **将自定义布局数据移动到数据库：** 不是为每个用户创建自定义文件，而是将用户自定义 css 信息存储在用户的数据库记录中。

    您可以轻松识别用户并使用 javascript 更新 CSS。

2.  **更多可扩展样式表：** 如果导入 external_style.css 会影响全局布局，您应该重新审视您在页面上识别元素的方式，以免发生这种情况。然后您可以简单地导入用户自定义样式表。
    尝试在 Classes 之外使用 ID，以及在 Divs 中包装内容部分。使用这些标识符确保导入 external_style.css 不会覆盖所有内容。******

# c++ - 在 OPENFILENAMEW 结构中填充 lpstrFile 时，不推荐将字符串常量转换为 LPWSTR

> ID：14402617
> 
> 赞同：1
> 
> 时间：2013-01-18T15:53:50.817
> 
> 标签：c++, winapi

在这个例子中它编译成工作代码，但是如果我在它周围放置更复杂的东西，程序就会关闭并且无法打开对话窗口。错误信息正是：

> test.cpp:10:19：警告：不推荐将字符串常量转换为 'LPWSTR {aka wchar_t*}' [-Wwrite-strings]

```
#include <windows.h>
int main() {
  OPENFILENAMEW ofn;
  ZeroMemory(&ofn, sizeof(ofn));
  ofn.lStructSize = sizeof(OPENFILENAME);
  ofn.nMaxFile = MAX_PATH;
  ofn.lpstrFile = L"file name";
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T17:11:31.583

您需要为窗口提供一个缓冲区来填充。

> 用于初始化文件名​​编辑控件的文件名。如果不需要初始化，此缓冲区的第一个字符必须为 NULL。当 GetOpenFileName 或 GetSaveFileName 函数成功返回时，此缓冲区包含所选文件的驱动器指示符、路径、文件名和扩展名。

基本上，Windows 在打开/保存对话框中选择文件后，会使用所选文件的路径和文件名填充缓冲区。所以基本上，你的代码应该是这样的：

```
#include <windows.h>

int main()
{
    wchar_t fileBuffer[MAX_PATH] = {0};

    OPENFILENAMEW ofn;
    ZeroMemory(&ofn, sizeof(ofn));
    ofn.lStructSize = sizeof(OPENFILENAME);
    ofn.nMaxFile = MAX_PATH;
    ofn.lpstrFile = fileBuffer;
} 
```

我希望这有帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T15:58:23.797

该`lpstrFile`成员被定义为非`const`（类型`LPTSTR`），但字符串文字是`const`。`lpstrFile`当与特定的 WINAPI 函数一起使用时，它将被填充、写入的状态的描述。写入字符串文字是未定义的行为。

从[`OPENFILENAME`](http://msdn.microsoft.com/en-gb/library/windows/desktop/ms646839%28v=vs.85%29.aspx)文档：

> 用于初始化文件名​​编辑控件的文件名。如果不需要初始化，此缓冲区的第一个字符必须为 NULL。**当 GetOpenFileName 或 GetSaveFileName 函数成功返回时，此缓冲区包含所选文件的驱动器指示符、路径、文件名和扩展名。**

要更正指向 的`lpStrFile`数组`wchar_t`：

```
wchar_t file[100] = L"file name";

ofn.plstrFile = file; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-18T15:58:21.977

从有关该领域的[文档中：](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646839%28v=vs.85%29.aspx)`lpstrFile`

> 当 GetOpenFileName 或 GetSaveFileName 函数成功返回时，此缓冲区包含所选文件的驱动器指示符、路径、文件名和扩展名。

这应该是指向可以写入的缓冲区的指针，并且它必须足够大以容纳您选择的文件名。将它指向一个常量字符串是一个错误，并且会导致您观察到的未定义行为。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-18T15:59:16.773

不推荐使用指向字符串文字的非常量指针，因为写入字符串文字会导致未定义的行为：

```
const char* s = "abc"; // correct
char* s = "abc"; // deprecated 
```

这同样适用于`wchar_t`字符串。

该`ofn.lpstrFile`指针是非常量的，旨在指向可写缓冲区。您需要提供一个可写缓冲区并将`ofn.plstrFile`指针设置为该缓冲区。

```
wchar_t buf[1024];
ofn.plstrFile = buf; 
```

有关详细信息，请参阅[OPENFILENAME 文档](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646839%28v=vs.85%29.aspx)。

# f# - 在这种情况下如何处理序列构造，因为我们没有中断或强大的 Seq.choose 版本？

> ID：14402623
> 
> 赞同：0
> 
> 时间：2013-01-18T15:54:02.697
> 
> 标签：f#

我希望我能做到：

```
 let myFun param1 param2 = 
      .....
      if condition 1
          ....
          if condition 2
               yield ....

 let sequence = seq { for x in xs do
                            myFun 1 x
                            myFun 2 x
                    } 
```

但现在我只能做

```
 let myFun param = 
      .....
      .....
      if condition 1
          ....
          if condition 2
               Some....
          else None    // has to complete else
      else None

 let sequence = seq { for x in xs do
                        match myFun 1 x with
                        | Some x -> yield x
                        | None   -> ()
                        match myFun 2 x with
                        | Some x -> yield x
                        | None   -> ()
                    }

  let sequence2 =  // order will be different, and we can not have index passed into function unless we do a futher Seq.map

       let a = xs |> Seq.choose (myFun 1)
       let b = xs |> Seq.choose (myFun 2)
       Seq.append a b 
```

我的真实代码：

代码看起来不太好`None`，我试过`Seq.choose`了，因为它不支持`Seq.choosei`。

```
 let exam isForward brickID =
            let brick = state.[brickID]
            let (nextTR, nextOccupied, nextUnoccupied) = if isForward then brick.Body.nudgeForward () else brick.Body.nudgeBack ()
            if (nextOccupied.isInGrid gridSize) && (map.ContainsKey nextOccupied |> not) then
                let nextBrick = { brick with Body = nextTR }
                let nextState = getNextState state brickID nextBrick
                if not (explored.Contains nextState) then
                    let nextMap = map |> Map.remove nextUnoccupied
                                      |> Map.add nextOccupied nextBrick
                    Some ((nextState, nextMap), (nextBrick, if isForward then brick.Body.Direction else brick.Body.Direction.Opposite))
                else None
            else None

        seq { for brickID in 0 .. state.Length - 1 do
                match exam true brickID with
                | Some x -> yield x
                | None   -> ()
                match exam false brickID with
                | Some x -> yield x
                | None   -> ()
        } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-18T16:01:39.613

您的`exam`函数可以返回一个为空（而不是`None`）或仅包含一个元素（而不是`Some`）的序列，并使用`yield!`它将给定序列的所有元素添加到您当前生成的序列中。

在您的伪代码示例中，这将如下所示：

```
let myFun param1 param2 param3 = seq {
  if param1 then
    if param2 then
      yield param3 }

 let sequence = seq { 
   for x in xs do
     yield! myFun true true x 
     yield! myFun true true (x * 10) } 
```

假设`xs = [1;2]`上面的示例生成`[1; 10; 2; 20]`（并且如果您将一些`true`参数设置为`false`，它将跳过一些数字）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T21:52:06.253

@Tomas 的答案是本示例中的最佳方法。但是，您仍然可以选择使用[Option 模块](http://msdn.microsoft.com/en-us/library/ee370544.aspx)中的便捷功能：

```
let sequence = seq { for x in xs do
                        yield! Option.toList (myFun 1 x)
                        yield! Option.toList (myFun 2 x)
                    } 
```

您可以将其视为`Seq.choose`.

# java - 寻找用于服务器管理接口的 Java 服务器库/框架

> ID：14402627
> 
> 赞同：0
> 
> 时间：2013-01-18T15:54:19.957
> 
> 标签：java

我对 Java 比较陌生，并且开发了一个 Java 服务器应用程序，它通过 TCP 从 Internet 上的许多客户端以专有协议接收少量大量数据，将其发送到 Postgres 数据库（JDBC）并使用套接字与其他模块通信，也。

到目前为止，我使用 Java NIO 进行套接字 I/O 和 slf4j/logback 进行日志记录，除了那些只有标准的 Java 东西。

现在我需要实现每个专业服务器应用程序所需的管理内容，例如以细粒度切换登录和关闭，使服务器重新读取其配置，干净地关闭服务器，重置客户端连接，获取使用统计信息等。所以我'将需要使用套接字实现一些管理接口并设计一些通信协议等或类似的东西。

这是创建服务器应用程序中的一项常见任务，我认为有人之前一定有过为此创建库的想法。

在 Java 标准库或您可以推荐的其他来源中是否有此类任务的通用框架？该库必须能够在 Linux 和 Mac OS X 上运行，并且必须是开源的，许可证最好是 BSD 风格或类似的。

再见，马蒂亚斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T15:55:57.620

也许您可以使用 JMX 和 JConsole 来完成它。将您的服务器组件公开为 MBean 并授予写入权限。

# javascript - 从变量设置 cookie 值

> ID：14402630
> 
> 赞同：7
> 
> 时间：2013-01-18T15:54:26.847
> 
> 标签：javascript, html, cookies

我最近一直在尝试设置一个保存用户名的 cookie，它会打开一个提示弹出框，要求输入新的用户名。当用户插入用户名并单击“确定”时，它不会将变量（sconName）视为变量，而只是放置“sconName”。

注意：Scon 是网站的名称。

这是我使用的唯一脚本：

```
<html>
  <body>
<script>
function readCookie(name) { 
    var nameEQ = name + "="; 
    var ca = document.cookie.split(';'); 
    for(var i=0;i < ca.length;i++) { 
        var c = ca[i]; 
        while (c.charAt(0)==' ') c = c.substring(1,c.length); 
        if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length,c.length); 
    } 
    return null; }
    </script>
<script>
  var username = readCookie('sconName');
if (username) {
   document.write("Your current username is: " + username);
}
  else {
    document.write("You have no user name");
  }

  function changeUsername() {
    var changedName=prompt("Enter user name.");
    if (changedName) {
document.cookie = 'sconName=changedName; expires=Wed, 1 Jan 2070 13:47:11 UTC; path=/'}}
  </script>
<button onclick="changeUsername()">Change</button>
</body>
</html> 
```

请您解释一下如何告诉系统它是一个变量而不仅仅是文本。谢谢。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-18T15:57:59.433

javascript 不解析引号内的变量。您需要打破引号才能使用变量：

```
document.cookie = 'sconName='+changedName+'; expires=Wed, 1 Jan 2070 13:47:11 UTC; path=/' 
```

# jquery - 根据窗口高度/宽度Jquery定义高度/宽度

> ID：14402633
> 
> 赞同：0
> 
> 时间：2013-01-18T15:54:31.533
> 
> 标签：jquery, responsive-design

如何根据窗口宽度和高度定义图像的 With 和 Height？

我尝试了设置变量之类的方法：

```
 var w_width = $(window).width();  
    var w_weight = $(window).height();  
    var display_x = $('.display img').width();  
    var display_y = $('.display img').height(); 
```

然后，设置条件：

```
 if (displayx == wwidth) {
        $(displayx).css('max-width',90%);
    } else if (displayy == wheight) {
        $(displayy).css('max-height',90%);
    } else {
        $(displayy).css('max-height',90%);
    } 
```

但是，除了它不起作用之外，我不知道从哪里开始。

我想将这些代码放在这个网页中，以保持它对显示的响应（单击一张图像以查看图像显示）。

有人对此有任何想法吗？

# c++ - gdb 核心转储打开失败

> ID：14402635
> 
> 赞同：4
> 
> 时间：2013-01-18T15:54:39.377
> 
> 标签：c++, linux, crash, gdb

我正在尝试打开内核核心转储文件。我得到的是：

```
gdb app core.23605
GNU gdb (GDB) Red Hat Enterprise Linux (7.0.1-32.el5)
Copyright (C) 2009 Free Software Foundation, Inc.
License GPLv3+: GNU GPL version 3 or later <http://gnu.org/licenses/gpl.html>
This is free software: you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.  Type "show copying"
and "show warranty" for details.
This GDB was configured as "i386-redhat-linux-gnu".
For bug reporting instructions, please see:
<http://www.gnu.org/software/gdb/bugs/>...
Reading symbols from /home/Development/Projects/app...done.
"/home/Development/Projects/core.23605" is not a core dump: File format not recognized

ulimit -a
core file size          (blocks, -c) unlimited
data seg size           (kbytes, -d) unlimited
scheduling priority             (-e) 0
file size               (blocks, -f) unlimited
pending signals                 (-i) 7616
max locked memory       (kbytes, -l) 32
max memory size         (kbytes, -m) unlimited
open files                      (-n) 1024
pipe size            (512 bytes, -p) 8
POSIX message queues     (bytes, -q) 819200
real-time priority              (-r) 0
stack size              (kbytes, -s) 10240
cpu time               (seconds, -t) unlimited
max user processes              (-u) 7616
virtual memory          (kbytes, -v) unlimited
file locks                      (-x) unlimited 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T05:11:41.357

> ... core.23605 不是核心转储

这通常发生在核心文件通过`ftp`in`ASCII`模式从一台机器传输到另一台机器时。

# html - 缩小 iframe（预览网页）

> ID：14402637
> 
> 赞同：0
> 
> 时间：2013-01-18T15:54:48.153
> 
> 标签：html, iframe

如何创建网页的预览？使用 iframe，我无法缩小页面内容以创建漂亮的概览。

以下失败

```
<iframe src="/mplahmplah#important_stuff" style="width:700px; height:900px; -moz-transform:scale(0.15, 0.15)" sandbox="" seamless scrolling="no"></iframe> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T16:10:57.497

如果 iframe 和容器页面的域相同并且您使用的是 jQuery，请尝试以下操作：

```
$(function(){
    $('iframe').on('load', function(){
        $(this).contents().find('body').css({'-webkit-transform':'scale(0.15, 0.15)', '-moz-transform':'scale(0.15, 0.15)'}); 
    });
}); 
```

关键是你不想缩放 iframe，你想缩放它的内容。

# c# - 将泛型对象添加到泛型集合时出现编译时错误

> ID：14402641
> 
> 赞同：1
> 
> 时间：2013-01-18T15:54:57.830
> 
> 标签：c#, generics

我们已经到了不知道如何继续的地步：

SHORT：我们有一个通用接口和一个通用接口的集合。尝试将通用接口的实现添加到集合失败。发生的事情是我得到一个编译时异常说：

> 无法从 TestApp.IState<T>' 转换为 TestApp.IState<TestApp.IView>'

LONG [代码示例]：

```
class Program
{
    static void Main(string[] args)
    {
        var coll = new StateCollection();
        var state = new SomeState();
        coll.AddState(state);
    }
}

public class StateCollection
{
    private List<StateBase<IView>> _states = new List<StateBase<IView>>();

    public void AddState<T>(StateBase<T> state) where T: IView
    {
        _states.Add(state);
    }
}

public class SomeState : StateBase<SomeView>
{

    public IView View
    {
        get;
    }
}

public class SomeView : IView
{
}

public abstract class StateBase<T> where T : IView
{
    private SomeView _view;
    public SomeView View
    {
        get { return _view; }
    }
}

public interface IView
{
} 
```

为什么会这样？在 AddState 中，我们提到 T 必须是 IState 的一个实例。有人可以帮助我们了解为什么会发生这种情况以及如何做我们想做的事情吗？

EDIT1：我们也尝试过：

```
 public void AddState(IState<IView> state)
    {
        _states.Add(state);
    } 
```

但这只是将编译时错误移动到 'coll.AddState(state)' 所以同样的事情发生在另一个地方。

EDIT2：问题！我没有给出正确的例子。Out IState 不是接口而是抽象类。对此非常抱歉！更改代码以使用抽象类

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T16:12:44.980

**第一个解决方案**

```
public class StateCollection
    {
        private readonly List<IState<IView>> _states = new List<IState<IView>>();

        public void AddState(IState<IView> state)
        {
            _states.Add(state);
        }
    } 
```

正如内文所建议的那样。为了让它工作，标记`T`为协变`interface IState<T>`

```
public interface IState<out T> where T:IView
    {
        IView View { get; }
    } 
```

**第二种解决方案**：（保持课堂变化`StateCollection`）

将界面更改`IState<T>`为

```
public interface IState<out T> where T : IView
    {
        T View { get; }
    } 
```

和类 SomeState 到

```
public class SomeState : IState<SomeView>
    {
        public SomeView View{ get;private set; }
    } 
```

**Edit2 的解决方案：**

```
class Program
    {
        static void Main(string[] args)
        {
            var coll = new StateCollection();
            var state = new SomeState();
            coll.AddState(state);
            Console.ReadKey();
        }
    }

    public class StateCollection
    {
        private List<IStateBase<IView>> _states = new List<IStateBase<IView>>();

        public void AddState(IStateBase<IView> state)
        {
            _states.Add(state);
        }
    }

    public class SomeState : StateBase<SomeView>
    {
    }

    public class SomeView : IView
    {
    }

    public interface IStateBase<out T> where T : IView
    {
        T View { get; }
    }

    public abstract class StateBase<T> : IStateBase<T> where T : IView
    {
        public T View { get; set; }
    }

    public interface IView
    {
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T16:13:33.573

这些变化怎么样：

```
public class SomeState : IState<SomeView>
{
    public SomeView View
    {
        get;
        set;
    }
} 
```

在 AddState 方法中使用 IView 而不是使用泛型 Type T

```
public void AddState(IState<IView> state)
{
    _states.Add(state);
} 
```

`out`使用关键字在 IState 中使 T 协变

```
public interface IState<out T> where T : IView
{
    T View { get; }
} 
```

## EDIT2 的解决方案：

不知道它是否适合你，但你可以。

```
public class StateCollection
{
    private List<IState<IView>> _states = new List<IState<IView>>();

    public void AddState(IState<IView> state)
    {
        _states.Add(state);
    }
}

public class SomeState : StateBase<SomeView>
{
    public override SomeView View
    {
        get { return null; }
    }
}

public abstract class StateBase<T> : IState<T> where T : IView
{
   public abstract T View { get; }
}

public interface IState<out T> where T : IView
{
    T View { get; }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-18T16:02:21.880

这看起来更像是 Add 函数的参数错误。您是否尝试过在不使用泛型的情况下声明 add 函数？继承本身应该允许它。使 AddState 函数看起来像这样：

**编辑（根据 Edit2）：**

如前所述，继承本身应该处理泛型。只要您声明的任何类正确实现`IView`, or `IState<IView>`, 那么就不应该有任何问题......

```
public absract class StateBase
{
    public IView view { get; set; }

    ....
}

public Interface IView
{ ... }

public class StateCollection
{
    private List<StateBase> _states = new List<StateBase>();

    public void AddState(StateBase state)
    {
        _states.Add(state);
    }
}

public class SomeView : IView
{ ... } 
```

等等等等等等，根据需要经常

```
public class SomeState : StateBase
{
    private SomeView my_view;

    public IView view
    {
        get { return (IView)SomeView; }
        set { ; }
    }
}

//program remains unchanged 
```

在这种情况下，SomeState 仍然是一个 IState 对象，所有的 IState 对象都实现了 IView，而 SomeView 是一个 IView 对象。SomeState 在内部实现 SomeView。对我来说看起来一样，但我不知道适应与您的真实代码一起工作的效果如何。

任何其他类都将遵循相同的模型。State会实现StateBase，内部声明一个自定义View，本身需要扩展IView。这样，自定义视图上的 IView 将起作用。

**来自评论：**

```
public class BarState : StateBase
{
    private BarView my_view;

    public IView view
    {
        get { return (IView)BarView; }
        set { ; }
    }
}

public class BarView : IView
{ ... } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-18T16:14:09.060

添加接口`IState`（非泛型）并从`IState<T>`. 然后声明`_states`为`List<IState>`和方法`AddState(IState state)`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-18T16:22:11.323

（编辑：你只需要让你的 StateBase 从协变接口继承。你不能让一个类直接协变，你总是必须通过一个接口）

试试这个：

```
public class StateCollection
{
    private List<IState<IView>> _states = new List<IState<IView>>();

    public void AddState(IState<IView> state)   
    {
        _states.Add(state);
    }
}

public class SomeState : StateBase<SomeView>
{
}

public class SomeView : IView
{
}

public interface IState<out T> where T : IView // now covariant with T
{
    T View { get; }
}

public abstract class StateBase<T> : IState<T> where T : IView
{
    public T View { get; set; }
}

public interface IView
{
} 
```

# c++ - Eclipse 的库头包含错误

> ID：14402644
> 
> 赞同：0
> 
> 时间：2013-01-18T15:55:03.980
> 
> 标签：c++, eclipse

我正在尝试在 Eclipse 中交叉编译一些项目，但我遇到了一个让我发疯的错误。它必须与包含和库标题一起，在图片中可以看到项目树。 [图片](http://s14.beta.photobucket.com/user/ndarkness/media/Screenshotfrom2013-01-18164733_zps5ac91861.png.html)

问题是我不明白为什么我使用的路径对于编译是错误的，有什么建议吗？

提前致谢，

这是包含给出错误的 TestUtils.cpp

```
#include "TestUtils.h"

#include <ibrdtn-0.8.0/utils/Utils.h> //sucks

CPPUNIT_TEST_SUITE_REGISTRATION (TestUtils);

void TestUtils::setUp()
{
}

void TestUtils::tearDown()
{
}

void TestUtils::tokenizeTest()
{
    using namespace dtn::utils;
    CPPUNIT_ASSERT(Utils::tokenize(":", "").empty());
    CPPUNIT_ASSERT(Utils::tokenize(":", "::").empty());
    CPPUNIT_ASSERT_EQUAL((int)Utils::tokenize(":", ":a:test::", 2).size(), 2);
    CPPUNIT_ASSERT_EQUAL((int)Utils::tokenize(":", ":a:test::b::", 2).size(), 3);
    //TODO how should the added string in the last item look like? "b::" or ":b::" or "::b::"
    CPPUNIT_ASSERT(Utils::tokenize(":", ":a:test::b::", 2)[2] == "b::");
    CPPUNIT_ASSERT_EQUAL((int)Utils::tokenize(":", ": :", 1).size(), 1);
    CPPUNIT_ASSERT_EQUAL((int)Utils::tokenize(":", ":    :t e s t: ").size(), 3);
} 
```

错误是 */tests/utils/TestUtils.cpp:10:38: warning: ibrdtn-0.8.0/utils/Utils.h: No such file or directory*

而似乎不存在的Utils.h就是这个

```
#ifndef UTILS_H_
#define UTILS_H_

#include "ibrdtn/data/Bundle.h"
#include "ibrdtn/data/CustodySignalBlock.h"
#include "ibrdtn/data/StatusReportBlock.h"
#include "ibrdtn/data/PayloadBlock.h"

namespace dtn
{
    namespace utils
    {
        class Utils
        {
        public:
            static void rtrim(std::string &str);
            static void ltrim(std::string &str);
            static void trim(std::string &str);

            static vector<string> tokenize(std::string token, std::string data, size_t max = std::string::npos);
            static double distance(double lat1, double lon1, double lat2, double lon2);

            static void encapsule(dtn::data::Bundle &capsule, const std::list<dtn::data::Bundle> &bundles);
            static void decapsule(const dtn::data::Bundle &capsule, std::list<dtn::data::Bundle> &bundles);

        private:
            static void encapsule(ibrcommon::BLOB::Reference &ref, const std::list<dtn::data::Bundle> &bundles);
            static double toRad(double value);
            static const double pi;
        };
    }
}

#endif /*UTILS_H_*/ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T16:04:00.670

*   第一个问题，因为它不是 Eclipse 引用的包含的一部分，所以它应该用引号`""`而不是`<>`.

*   其次，您的包含路径不正确。有一个`ibrtn`您没有考虑到的子文件夹。因此，包含路径应​​该是包含路径，而不是主父文件夹`#include "ibrdtn/utils/Utils.h"`

修复这两个项目，你应该做生意。

# android - android contactcontract 行大小

> ID：14402646
> 
> 赞同：0
> 
> 时间：2013-01-18T15:55:11.770
> 
> 标签：android

Android contractcontracts 数据库中是否有完整行的最大大小？如果是这样，有人知道它是什么或我在哪里可以找到它吗？我想知道这些字段是否以某种方式是动态的或固定在一个明确的限制。

# iphone - AUGraph variSpeed 在 iOS 5.x 上不接受 StreamFormat

> ID：14402648
> 
> 赞同：1
> 
> 时间：2013-01-18T15:55:12.607
> 
> 标签：iphone, ios, objective-c, audio, core-audio

我有一个 AUGraph 可以使用此设置播放和录制音频：

```
RemoteIO      ->                                 -> RemoteIO
                  Mulichannel Mixer -> variSpeed 
Read Callback ->                                 -> Write Callback 
```

我的问题是 kAudioUnitSubType_Varispeed 在 iOS 5.x 上不接受 StreamFormat。在 iOS 6 上是有效的。如果没有正确的 StreamFormat，AUGraph 就无法运行。

我在所有输入和输出上设置了相同的 StreamFormat：

```
 memset(&_audioFormat, 0, sizeof(_audioFormat));
UInt32 propertySize = sizeof(AudioStreamBasicDescription);
CheckError(AudioUnitGetProperty(self.io, kAudioUnitProperty_StreamFormat, kAudioUnitScope_Input, 0, &_audioFormat, &propertySize), "Couldn't get audio Format for io input");
_audioFormat.mChannelsPerFrame  = 1;
_audioFormat.mSampleRate = self.hardwareSampleRate;

// set audio Format for io
CheckError(AudioUnitSetProperty(self.io, kAudioUnitProperty_StreamFormat, kAudioUnitScope_Output, kInputBus, &_audioFormat, sizeof(_audioFormat)), "Couldn't set audio Format for output");
CheckError(AudioUnitSetProperty(self.io, kAudioUnitProperty_StreamFormat, kAudioUnitScope_Input, kOutputBus, &_audioFormat, sizeof(_audioFormat)), "Couldn't set audio Format for input");

// set audio Format for mixer
CheckError(AudioUnitSetProperty(self.mixer, kAudioUnitProperty_StreamFormat, kAudioUnitScope_Input, 0, &_audioFormat, sizeof(_audioFormat)), "Couldn't set audio Format for mixer 0");
CheckError(AudioUnitSetProperty(self.mixer, kAudioUnitProperty_StreamFormat, kAudioUnitScope_Input, 1, &_audioFormat, sizeof(_audioFormat)), "Couldn't set audio Format for mixer 1");
CheckError(AudioUnitSetProperty(self.mixer, kAudioUnitProperty_StreamFormat, kAudioUnitScope_Output, kOutputBus, &_audioFormat, sizeof(_audioFormat)), "Couldn't set audio Format for mixer output");

// set audio Format for speed
CheckError(AudioUnitSetProperty(self.speed, kAudioUnitProperty_StreamFormat, kAudioUnitScope_Input, 0, &_audioFormat, sizeof(_audioFormat)), "Couldn't set audio Format for speed input");
CheckError(AudioUnitSetProperty(self.speed, kAudioUnitProperty_StreamFormat, kAudioUnitScope_Output, 0, &_audioFormat, sizeof(_audioFormat)), "Couldn't set audio Format for speed output"); 
```

iOS 5.x 上的 CAShow：

```
 AudioUnitGraph 0x6CC000:
  Member Nodes:
    node 1: 'auou' 'rioc' 'appl', instance 0x18cc2a0 O I
    node 2: 'aumx' 'mcmx' 'appl', instance 0x455680 O I
    node 3: 'aufc' 'vari' 'appl', instance 0x450270 O I
  Connections:
    node   1 bus   1 => node   2 bus   1  [ 1 ch,  22000 Hz, 'lpcm' (0x00000029) 32-bit little-endian float, deinterleaved]
    node   2 bus   0 => node   3 bus   0  [ 2 ch,  44100 Hz, 'lpcm' (0x00000029) 32-bit little-endian float, deinterleaved]
    node   3 bus   0 => node   1 bus   0  [ 1 ch,  22000 Hz, 'lpcm' (0x00000029) 32-bit little-endian float, deinterleaved]
  Input Callbacks:
    {0x53b5d, 0x454cd0} => node   2 bus   0  [1 ch, 22000 Hz]
  CurrentState:
    mLastUpdateError=0, eventsToProcess=F, isRunning=F 
```

iOS 6.x 上的 CAShow：

```
 AudioUnitGraph 0x388000:
  Member Nodes:
    node 1: 'auou' 'rioc' 'appl', instance 0x1f03b1e0 O I
    node 2: 'aumx' 'mcmx' 'appl', instance 0x1f05fd60 O I
    node 3: 'aufc' 'vari' 'appl', instance 0x1e590b90 O I
  Connections:
    node   1 bus   1 => node   2 bus   1  [ 1 ch,  22000 Hz, 'lpcm' (0x00000029) 32-bit little-endian float, deinterleaved]
    node   2 bus   0 => node   3 bus   0  [ 1 ch,  22000 Hz, 'lpcm' (0x00000029) 32-bit little-endian float, deinterleaved]
    node   3 bus   0 => node   1 bus   0  [ 1 ch,  22000 Hz, 'lpcm' (0x00000029) 32-bit little-endian float, deinterleaved]
  Input Callbacks:
    {0xe9b5d, 0x1e58e4e0} => node   2 bus   0  [1 ch, 22000 Hz]
  CurrentState:
    mLastUpdateError=0, eventsToProcess=F, isRunning=F 
```

为什么速度节点不接受 iOS 5.x 上的 StreamFormat :(？有没有人可以帮助我？谢谢。

# javascript - JQuery单击输入按钮未触发

> ID：14402653
> 
> 赞同：0
> 
> 时间：2013-01-18T15:55:30.800
> 
> 标签：javascript, jquery

我看过论坛，我的问题是[Button click event not fire in jQuery](https://stackoverflow.com/questions/8880389/button-click-event-not-firing-in-jquery)的副本，除了我的代码已经与给定的答案匹配。

无论如何，我已经为你们删除了这个，并且可以确认带有 disabled 类的链接不会触发，所以这证明文档准备好并且 Jquery 库是正确的。

Javascript

```
$(document).ready(function () {
  // Prevents links from firing
  $('a.disabled').click(function (e) {
    e.preventDefault();
  });

  // Handles search
  $("#btnTreeSearch").click(function () {
    alert("click search fool!");
  });
}); 
```

html

```
<input type="submit" value="btnTreeSearch" /> 
```

有什么线索吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-18T15:56:50.553

您需要分配`id`给输入以使用[**id 选择器**](http://api.jquery.com/id-selector/)

**[现场演示](http://jsfiddle.net/rajaadil/ypuwQ/)**

*html*

```
<input type="submit" id="btnTreeSearch" value="btnTreeSearch" /> 
```

*Javascript*

```
 $("#btnTreeSearch").click(function () {
     alert("click search!");
 }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T15:56:59.627

更改`value="btnTreeSearch"`为`id="btnTreeSearch"`。

# python - 使用python将文本文件解析为sql数据库

> ID：14402654
> 
> 赞同：0
> 
> 时间：2013-01-18T15:55:30.867
> 
> 标签：python, sql, database, parsing, text-files

极端的 python/sql 初学者在这里。我环顾四周寻求一些帮助，但无法准确找到我需要的东西 - 非常感谢任何帮助。

正如标题所示，我有一个非常大的文本文件，我想最好使用 python 将其解析为 sql 数据库。文本文件设置如下：

```
#Parent field 1.1
child 1.1
child 1.1 continued

# Parent field 1.2
child 1.2

# Parent field 1.3
child 1.3 text
child 1.3 text
more child 1.3 text

...

# Parent field 1.88
child 1.88

#Parent field 2.1
child 2.1

etc... 
```

关于列表的一些关键点：

*   第一个字段（即 1.1、2.1）在 # 之后没有空格
*   每个子行的长度具有可变的字符长度和换行符，但在下一个父行之前总是有一个空行
*   每个父级有 88 个字段
*   有数百个父字段

现在，我希望每个父字段 (1.1, 1.2, 1.3 --> .88) 成为一列，并且行由后续数字填充 (2.1, 3.1 -->100s)

有人可以帮我设置一个 python 脚本并给我一些如何开始解析的方向吗？如果我没有正确解释任务，请告诉我，我会及时提供更多详细信息。

非常感谢！

本

编辑：我刚刚意识到列数不是恒定的 88，它是可变的

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T16:46:43.537

几点：

1.  从描述看来，您的目标是在一张表中对数据进行非规范化。这通常不是一个好主意。将数据拆分为两个表：PARENT 和 CHILDREN。PARENT 应该包含 ID 并且 CHILDREN 应该至少有两列：PARENT_ID 和 CHILD_VALUE（或类似它），其中 PARENT_ID 是父级的 ID，无论是否作为外键 DB 结构显式链接（取决于数据库）。然后，在解析时，将 VALUES("1.1", "1.1childA"), VALUES("1.1", "1.1childB") 等插入表 CHILDREN 相关记录。

2.  解析应该是微不足道的：逐行迭代并在“父”行上将 parent_id 和 INSERT 更改为 PARENT 并读取子行并将其插入到 CHILDREN 表中。您也可以分两次完成。

像这样：

```
#!/usr/bin/python

parent=''
child=''

for line in open('input.txt'):
        if line.find('#Parent') > -1 or line.find('# Parent') > -1:
                parent = field_extract(line) # fun where you extract parent value
                parent_id = ... # write it down or generate
                # INSERT into PARENT
        elif line:
                child = field_extract(line)
                # INSERT into CHILDREN with parent_id and child values 
```

Although... I shudder when I see smth so primitive. I'd urge you to learn Pyparsing module, absolutely great for this kind of work.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T16:43:02.450

你应该看看python中的**文件处理**。

`open() , .readlines()`方法和列表会帮助你**很多**。

例如：

```
f = open("NAMEOFTXTFILE.TXT","r") #r for read, w for write, a for append.
cell = f.readlines() # Displays the content in a list
f.seek(0) # Just takes the cursor to the first cell (start of document)
print cell[2] # Prints the word or letter in the second cell. 
```

然后从那里，您可以`cell[2]`使用 sql 语句发送。

# javascript - DOM 元素/innetHTML 从对话框添加到表格

> ID：14402662
> 
> 赞同：-1
> 
> 时间：2013-01-18T15:55:54.337
> 
> 标签：javascript, jquery, dom, append, innerhtml

好的。这是一个很长的。所以我有一个带有表格的页面，其中包含有关汽车及其来自的经销商的各种信息。有一个按钮可以添加更多不同年份的汽车。此按钮打开一个对话框。该对话框有 3 个下拉菜单和 1 个文本输入。我需要每个下拉列表中的信息和要添加到父页面的文本输入。我到了一半。信息是将输入框的值、文本添加到表的“子”部分内的父表中。我还需要在此文本的同一行上添加“儿子”下拉列表的选定值。还有一件事。“父亲”下拉菜单需要指示“儿子”信息的去向。目前，我的文字是在没有特定父亲的表格底部添加一个新行。我已经尽可能地剥离了我的代码，所以它不会让人难以看清，如果某处缺少括号，那就是疏忽了。这是父页面的代码和html。

```
 <head>
<script>
    function updateParent1(value1,value2) {
            var table = document.getElementById("car_table");

            var rowCount = table.rows.length;
            //alert(rowCount);
            var row = table.insertRow(rowCount);

            var cell1 = row.insertCell(0);
            cell1.innerHTML = "";

            var cell2 = row.insertCell(1);
            cell2.innerHTML = value2;

</script>
</head>
<body>
<legend>Vehicle Information</legend>
  <input type="text" id="shore_count" />
                  <div class="add_icon"><a href="step-1-dialog-add-shore-tanks.html" target="_blank" class="nyroModal"><img src="images/add-item-icon.png"/></a></div>
                  <table id="car_table">
                    <thead>
                      <tr>
                        <th>Dealership</th>
                        <th>Vehicle Details</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr class="row_blue_bold father" id="father3">
                        <td colspan="2" class="father_header">John Eagle Honda</td>
                      </tr>
                      <tr class="row_blue_bold son3">
                        <td>&nbsp;</td>
                        <td>Honda 2011 - Civic</td>
                      </tr>
                      <tr class="row_blue_bold son3">
                        <td>&nbsp;</td>
                        <td>Honda 2008 - Accord</td>
                      </tr>
                      <tr class="row_blue_bold father" id="father4">
                        <td colspan="2" class="father_header">John's Used Cars</td>
                        <td>
                      </tr>
                      <tr class="son4">
                        <td>&nbsp;</td>
                        <td>Toyota 2002 - Camry</td>
                      </tr>
</body> 
```

这是 iframe/对话框页面。

```
<script type="text/javascript">
    $(document).ready(function () {     
        var id =3;
        for (i=0;i<parent.getDescCount();i++) {
            id++;
            var prot = $("#numbers").find(".prototype").clone();                        
            prot.find(".id").attr("value", id);
            prot.find(".apni").attr("value","");

            $("#numbers").append(prot);

        }
        //End of Add button
        $("img.exit").click(function () {
            parent.$.nmTop().close();
        });
        $("img.save").click(function () {           
            var isError = false;
            $("input").each(function(i) {                               
                if(this.value == "") {
                    isError = true;
                    var newRow = "<tr style='background:#ffff99'><td colspan='4'>Please enter the year of this vehicle.</td></tr><tr>";
                    $(this).parent().parent().before(newRow);
                }
            });

            if(isError) return;

            for(var j=0;j<document.getElementsByName("select1").length;j++) {
                parent.updateParent1(document.getElementsByName("select1").item(j).value,document.getElementsByName("text1").item(j).value);
            }
            parent.$.nmTop().close();
        });     
    }); 

      //Add button
        $("img.add").click(function () {
            var prot = $("#numbers").find(".prototype").clone().first();            
            prot.find(".apni").attr("value","");
            $("#numbers").append(prot);
        }     

</script>

<body>
    <div id="selMultipleTitle"> &nbsp;Add Vehicle Information&nbsp;</div>    
    <div id="btnExitDialog"><a href="#"><img src="images/exit.png" height="17" width="17" class="exit"/></a></div>
    <table id="numbers">
      <thead>
        <tr>
          <th><strong>Make</strong></th>
          <th><strong>Dealership</strong></th>
          <th><strong>Model</strong></th>
          <th><strong>Year</strong></th>
        </tr>
      </thead>
      <tr>
      <tbody>
        <td><select id="fatherDeal" name="select1">
          <option selected>Select...</option>
          <option>John Eagle Honda</option>
          <option>Toyota of America</option>
          <option>John's Used Cars</option>
        </select></td>
        <td><select id="sonMake">
          <option selected>Select...</option>
          <option>Honda</option>
          <option>Toyota</option>
        </select></td>
        <td><select>
          <option selected id="sonModel">Select...</option>
          <option>Civic</option>
          <option>Accord</option>
          <option>Camry</option>
        </select></td>
        <td><input value="Enter year" id="sonComment" class="apni" name="text1"/></td>
        <td>&nbsp;</td>
      </tbody>  
      </tr>
      <tr>
        <td class="align_right"><a href="#"><img src="images/cancel.gif" height="21" width="21" class="exit"/></a>&nbsp;<a href="#"><img src="images/save-icon1.png" height="21" width="21" class="save"/></a></td>
      </tr>
    </table>
</body> 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T16:33:02.660

您需要一个下拉菜单作为*来源*

```
<select id="source">
    <option value="A">A</option>
    <option value="B">B</option>
    <option value="C">C</option>
    <option value="D">D</option>
</select> 
```

和一个*目标*表

```
<table id="target">
</table> 
```

当然还有某种*控制器*，我使用了`button`.

```
<button id="control">clickme</button> 
```

现在您只需要将一个操作绑定到按钮，并使其将您想要的内容从您的*源*附加到您的*目标*。

```
$(function() {
    $('#control').click(function() {
        $("#target").append("<tr><td>"+$("#source").val()+"</td></tr>");
    });
}); 
```

这是一个小提琴：http: [//jsfiddle.net/X5DUv/](http://jsfiddle.net/X5DUv/)

# mysql - 使用插入方法进行多次更新 - 忽略唯一记录

> ID：14402670
> 
> 赞同：1
> 
> 时间：2013-01-18T15:56:19.207
> 
> 标签：mysql

我想使用与此类似的方法一次更新多条记录：

[MySQL 中的多个更新](https://stackoverflow.com/questions/3432/multiple-updates-in-mysql)

但是是否有一个 MySQL 命令可以忽略任何不重复的内容？就像是

```
ON DUPLICATE UPDATE ON UNIQUE IGNORE 
```

（顺便说一句，我刚刚编写了这段代码）

?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T16:41:35.963

为什么我们不能使用可以更新 MULTIPLE 行的单个 UPDATE 命令！

```
UPDATE mytable 
SET Col2 = CASE
  WHEN Col1 = 1 THEN 'new Value From someplace';
  WHEN Col1 = 2 THEN 'War and Peace';
  ELSE Col2
END 
```

**ELSE Col2**非常重要，否则您将用 NULL 覆盖表的其余部分 。

您可以添加更多**CASE**块来更新更多列。

通过这样做，您可以避免 INSERTING UNIQUE 记录的麻烦。

希望这可以帮助。

# ios - Xcode 4 - 已添加、修改或删除签名资源

> ID：14402671
> 
> 赞同：11
> 
> 时间：2013-01-18T15:56:19.887
> 
> 标签：ios, xcode, signing

问题：

我创建了一个应用程序，分发了一个临时版本，并在管理器 - 设备下成功上传了它。到目前为止，一切都很好。现在，我尝试了第二个应用程序。当我上传这个时，我收到以下消息：

**已添加、修改或删除签名资源。**

我谷歌了一段时间并尝试了以下事情：

*   避免在项目名称中使用特殊字符
*   清除构建
*   删除 Organizer - Projects 下的派生数据
*   更新我的证书
*   续订我的所有配置文件
*   我做了一个新的简约项目

一切都失败了。每次都发同样的消息。

希望有人可以帮助我，拜托。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-02-03T14:36:22.147

我遇到了同样的问题，对我有用的是删除派生数据（在管理器中）。

![在此处输入图像描述](../Images/93bc522d35eea5b785584c8902e6e2da.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T19:18:26.973

*   确保您在 Apple Developer Portal 中为这两个应用程序创建了应用程序 ID。通常 'com.companyname.appname' 作为 Bundle Identifier
*   创建两个证书并下载它们。
*   检查您是否可以在钥匙串上打开这些证书。如果您在证书名称旁边看到一个箭头，则可以使用该证书。这意味着您拥有该证书的匹配密钥。
*   将两个配置文件创建为 Ad-Hoc 并分配您刚刚创建的 App ID。
*   如果您尚未将设备添加到设备列表中，请在此步骤中进行。
*   将设备添加到两个配置文件
*   下载并打开配置文件（我发现管理配置文件非常有用的工具是 iPhone 配置实用程序）
*   在项目文件的 XCode 中选择目标，然后在“摘要”选项卡中键入 Bundle Identifier。
*   现在转到 Build Settings 选项卡并选择 Code Signing 并选择您的 Bundle 标识符
*   清洁并运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-01T07:54:43.270

这是因为您在派生数据文件夹中有两个具有相同捆绑名称的应用程序。只需删除一个，然后错误就消失了。

# python - Eclipse python代码中的URL链接

> ID：14402675
> 
> 赞同：2
> 
> 时间：2013-01-18T15:56:49.473
> 
> 标签：python, eclipse, pydev

我喜欢用详细解释算法的网页链接来记录我的 python 代码。但是我不能使链接“活动”，因此只需在 Eclipse 中单击它们就会在平台浏览器中显示该页面。

我刚刚将 URL 放在 3 双引号对中，然后必须手动将它们复制粘贴到浏览器中。

有没有更好的办法？

# html - Handle multiple emits in socket.io with long polling

> ID：14402685
> 
> 赞同：0
> 
> 时间：2013-01-18T15:57:10.377
> 
> 标签：html, node.js, sockets, socket.io, long-polling

Is there any good solution to support long polling clients in scenarios like this:

```
sockets.in("room1").volatile.emit(message);
sockets.in("room2").volatile.emit(message); 
```

The client is in both rooms and is only received the message in one of the rooms. I suppose it has to do with long polling. When I remove "volatile" from the latter emit, then it works - but is there another way?

Side question: Are there any side-effects by not using VOLATILE? Like the server throwing exceptions etc. I can imagine that it comes with abit of overhead. And how many resends does the server perform?

Best regards, Mattias

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T16:04:47.677

Actually volatile is more unstable. If polling have not reached server after last data sent, it's gone. You don't need to use volatile. If you do not use it, it will queue up all emit in case of connection has not reached yet and when it reach, it get executed in order. I cannot see any advantage from using volatile from my experience.

Text from Socket.io first page about volatile: "Sometimes certain messages can be dropped. Let's say you have an app that shows realtime tweets for the keyword bieber.

If a certain client is not ready to receive messages (because of network slowness or other issues, or because he's connected through long polling and is in the middle of a request-response cycle), **if he doesn't receive ALL the tweets related to bieber your application won't suffer.**

In that case, you might want to send those messages as volatile messages."

# reporting-services - 数据库报告服务器

> ID：14402687
> 
> 赞同：0
> 
> 时间：2013-01-18T15:57:12.487
> 
> 标签：reporting-services, ssrs-2008, reportserver

我正在配置报告服务器，但是在尝试创建报告服务器数据库时遇到了一些问题。

我有这个错误：

```
System.Data.SqlClient.SqlException: 
CREATE DATABASE permission denied in database 'master'.
   em System.Data.SqlClient.SqlConnection.OnError(
       SqlException exception, Boolean breakConnection)
   em System.Data.SqlClient.SqlInternalConnection.OnError(
       SqlException exception, Boolean breakConnection)
   em System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(
       TdsParserStateObject stateObj)
   em System.Data.SqlClient.TdsParser.Run(
       RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, 
       BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj)
   em System.Data.SqlClient.SqlCommand.RunExecuteNonQueryTds(
       String methodName, Boolean async)
   em System.Data.SqlClient.SqlCommand.InternalExecuteNonQuery(
       DbAsyncResult result, String methodName, Boolean sendToPipe)
   em System.Data.SqlClient.SqlCommand.ExecuteNonQuery()
   em Microsoft.ReportingServices.Common.DBUtils.ApplyScript(
       SqlConnection conn, String script, ICommandWrapperFactory commandWrapper)
   em Microsoft.ReportingServices.Common.DBUtils.ApplyScript(
       String connectionString, String script)
   em ReportServicesConfigUI.SqlClientTools.SqlTools.ApplyScript(
       String connectionString, String script) 
```

有什么建议么？

# java - 在导出的 jar 文件中未加载纹理

> ID：14402690
> 
> 赞同：0
> 
> 时间：2013-01-18T15:57:29.367
> 
> 标签：java, textures, lwjgl, slick2d

我正在使用 LWJGL 和 Slick2D。我将项目导出到 .jar 并使用 JarSplice 生成可执行文件，因此我不需要可执行 jar 所在位置的库文件。我的问题是，如果我从 Eclipse 运行项目，则会加载每个图像，但是如果我运行导出的可执行 jar，则不会加载图像，因为找不到它。图片在 /res 文件夹中，这是加载纹理的方法：

```
private Texture loadTexture(String key) {
    try {
        return TextureLoader.getTexture("PNG", new FileInputStream(
                new File("res/" + key + ".png")));
    } catch (FileNotFoundException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }
    return null;
} 
```

在这里我加载纹理：

```
Texture background = loadTexture("main_menu/bg"); 
```

我尝试了很多导出 jar 的方法，但我没有得到任何工作方式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T15:59:40.867

如果它们在 jar 中，您可能需要将它们作为类路径资源加载。看：

```
 getClass().getClassLoader().getResourceAsStream(...) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T19:11:58.010

查看我的旧代码，这甚至可以工作

```
ByteBuffer buf = null;
    try{
    texture = TextureLoader.getTexture("PNG", ResourceLoader.getResourceAsStream("res/" + key + ".png"));
    int texId = texture.getTextureID();
    buf = ByteBuffer.allocateDirect(4*texture.getImageWidth()*texture.getImageHeight());
    }catch(IOException e){
        e.printStackTrace();
    }   

    // Create a new texture object in memory and bind it
    //int texId = GL11.glGenTextures(); - if the trick with texture.getTextureID() won't work - use THIS
    GL13.glActiveTexture(GL13.GL_TEXTURE0);
    GL11.glBindTexture(GL11.GL_TEXTURE_2D, texId);

    // All RGB bytes are aligned to each other and each component is 1 byte
    GL11.glPixelStorei(GL11.GL_UNPACK_ALIGNMENT, 1);

    // Upload the texture data and generate mip maps (for scaling)
    GL11.glTexImage2D(GL11.GL_TEXTURE_2D, 0, GL11.GL_RGB, texture.getImageWidth(), texture.getImageHeight(), 0,
    GL11.GL_RGBA, GL11.GL_UNSIGNED_BYTE, buf);

    //then you can generate some mipmaps

    //Setup the ST coordinate system
    GL11.glTexParameteri(GL11.GL_TEXTURE_2D, GL11.GL_TEXTURE_WRAP_S, GL12.GL_CLAMP_TO_EDGE);
    GL11.glTexParameteri(GL11.GL_TEXTURE_2D, GL11.GL_TEXTURE_WRAP_T, GL12.GL_CLAMP_TO_EDGE);

    // Setup what to do when the texture has to be scaled
    GL11.glTexParameteri(GL11.GL_TEXTURE_2D, GL11.GL_TEXTURE_MAG_FILTER, GL11.GL_LINEAR);
    GL11.glTexParameteri(GL11.GL_TEXTURE_2D, GL11.GL_TEXTURE_MIN_FILTER, GL11.GL_NEAREST_MIPMAP_LINEAR); 
```

你需要的是`texId`.

我希望你知道如何使用纹理；）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T20:16:05.653

我所做的是我在 netbeans 项目中有一个名为**source**的文件夹，当我制作一个 .jar 时，我将它与 JarSplice 一起使用来加载 lib 和本机。然后我用 winrar 打开新的 .jar 并将**源**拖到.jar 中，每次运行 .jar 时，它都会使用 jar 内的文件夹。source 与 res 相同，但我将其重命名。

所以基本上把你的 res 文件夹放到 .jar 中，它就可以工作了。

# java - 数组列表。按产品类型按文章访问名称

> ID：14402691
> 
> 赞同：0
> 
> 时间：2013-01-18T15:57:34.537
> 
> 标签：java, list, sorting, enums, arraylist

我的 Arraylist 包含 9 个人。每个人都有一个 String 类型的 name 值、一个 int 类型的 age 值和一个 Enum 类型的值（TV、SMARTPHONE、CAR）。我必须创建实现一个根据产品名称查找名称的方法。如果 arrayListName 包含 SMARTPHONE，则返回所有带有智能手机的名称。

```
public void showByProduct(Product SMARTPHONE) {

    public void showByProductName(Product SMARTPHONE) {

            if (arrayListName.contains(SMARTPHONE))

                System.out.println("found"+nameofowner);
            else {
                System.out.println("not found");
            }
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T16:00:06.553

您需要遍历您的`List`, 并为每个 Person 检查它的`product`字段是否具有您在方法中传递的值。

此外，您需要在方法中再添加一个`List`本地方法，在其中添加与`Person`匹配的`Product Name`，然后在最后返回`List`。

```
public List<Person> showByProductName(Product product) {

    List<Person> localList = new ArrayList<Person>();

    for (Person person: persons) {   // persons is the original List.
        if (person.getProduct() == product) {
            localList.add(person);
        }
    }

    return localList;
} 
```

以及调用此方法的地方，将返回值存储在`List`引用中：-

```
List<Person> result = showByProductName(Product.SMARTPHONE);
System.out.println(result); 
```

请注意，您可以`enum`使用 比较两个值`==`。作为一个`enum`是一个`singleton`。

**PS： -**不要将您的参数名称设置为`SMARTPHONE`. 这是一个枚举值。并且还根据*Java Naming Convention*，变量名称应以小写字母开头，并紧随`camelCasing`其后。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T16:08:46.937

```
for (Person p : arrayListName){
    if(p.geProduct()==product)
        System.out.println("Found : " + p.name());
} 
```

然而，这并不是很酷。我认为你应该用枚举对你的人进行排序。

# magento - Magento loadByAttribute 名称 - 德语变音符号错误

> ID：14402693
> 
> 赞同：0
> 
> 时间：2013-01-18T15:57:45.480
> 
> 标签：magento

在自定义导入模块中，我想按名称加载类别，如下所示：

```
Mage::getModel('catalog/category')->loadByAttribute('name', $categoryName) 
```

但是当有 deutsch 特殊字符时出现致命错误。

我该如何解决这个问题。

注意：我从“ISO-8859-1”csv 文件中获取类别名称。

感谢帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T13:09:34.173

抱歉，我的问题是某些类别尚未创建。问题解决了。

非常感谢。

# sql - SQL不在子查询中？

> ID：14402694
> 
> 赞同：1
> 
> 时间：2013-01-18T15:57:46.247
> 
> 标签：sql, sql-server, tsql, sql-server-2000, subquery

因此，我为同事编写了以下查询（见下文）：

```
SELECT
        t.tender_id as "Tender ID",
        t.check_number as "Check Number",
        t.check_type_id as "Check Type",
        t.server_id as "Server ID",
        t.cashier_id as "Cashier ID",
        t.terminal_id as "Terminal ID",
        t.tendered_date_time as "Tendered Date and Time",
        t.tender_amount as "Tender Amount",
        t.change_amount as "Change Amount",
        g.account_name as "Account Name",
        g.account_number as "Account Number"
FROM CheckTender AS t
INNER JOIN AcountActivity AS g
        ON t.check_number = g.check_number
WHERE t.tender_id NOT in (5,14,4,9,15,16); 
```

一个支票号码可以有多个tender_ID。因此，例如，您可以为支票编号 20001 设置三行，它们都具有不同的招标 ID。

最初，他只想要删除了tender_id 的任何条目`5,14,4,9,15,16`。但是后来我们发现我们需要修改 where 条件。

它需要更新，以便如果支票号码的投标 ID 为`5,14,4,9,15,16`，则删除该支票号码的所有实例。我知道这很可能是一个子查询，但我整个早上都在努力解决它，却无法弄清楚。:(

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T16:01:31.223

您可以`EXISTS`为此使用：

```
SELECT
        t.tender_id as "Tender ID",
        t.check_number as "Check Number",
        t.check_type_id as "Check Type",
        t.server_id as "Server ID",
        t.cashier_id as "Cashier ID",
        t.terminal_id as "Terminal ID",
        t.tendered_date_time as "Tendered Date and Time",
        t.tender_amount as "Tender Amount",
        t.change_amount as "Change Amount",
        g.account_name as "Account Name",
        g.account_number as "Account Number"
FROM CheckTender AS t
INNER JOIN AcountActivity AS g
        ON t.check_number = g.check_number
WHERE NOT EXISTS (  SELECT * FROM CheckTender WHERE check_number =  t.check_number
                    AND tender_id in (5,14,4,9,15,16)) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T16:01:50.913

像这样的东西（未经测试）？

```
SELECT
        t.tender_id as "Tender ID",
        t.check_number as "Check Number",
        t.check_type_id as "Check Type",
        t.server_id as "Server ID",
        t.cashier_id as "Cashier ID",
        t.terminal_id as "Terminal ID",
        t.tendered_date_time as "Tendered Date and Time",
        t.tender_amount as "Tender Amount",
        t.change_amount as "Change Amount",
        g.account_name as "Account Name",
        g.account_number as "Account Number"
FROM CheckTender AS t
INNER JOIN AcountActivity AS g
        ON t.check_number = g.check_number
LEFT JOIN (SELECT check_number  FROM CheckTender WHERE tender_id in (5,14,4,9,15,16)) t2 on t.tender_id = t2.tender_id
WHERE t2.tender_id is null 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-18T16:03:42.753

这是一种使用窗口函数的方法：

```
select *
from (SELECT
             t.tender_id as "Tender ID",
             t.check_number as "Check Number",
             t.check_type_id as "Check Type",
             t.server_id as "Server ID",
             t.cashier_id as "Cashier ID",
             t.terminal_id as "Terminal ID",
             t.tendered_date_time as "Tendered Date and Time",
             t.tender_amount as "Tender Amount",
             t.change_amount as "Change Amount",
             g.account_name as "Account Name",
             g.account_number as "Account Number",
             MAX(case when t.tender_id in (5,14,4,9,15,16) then 1 else 0 end) over (partition by t.check_number) as HasBadTender
      FROM CheckTender AS t
      INNER JOIN AcountActivity AS g
                 ON t.check_number = g.check_number
     ) t
where HasBadTender = 0 
```

这适用于 SQL Server 2005 及更高版本。对于早期版本，您需要某种形式的连接或相关子查询。

对原始 where 子句的细微变化也适用：

```
WHERE t.check_number not in (select check_number from CheckTender where tender in (5,14,4,9,15,16)) 
```

# perl - 是否可以在仅允许 HTTP 的 PC 上通过 Perl 使用 Gmail 帐户发送电子邮件？

> ID：14402708
> 
> 赞同：1
> 
> 时间：2013-01-18T15:58:28.817
> 
> 标签：perl, email, gmail

我编写了一个 Perl 程序来通过 Gmail 帐户发送电子邮件。

我使用 NET::SMTP、NET::SMTP::SSL 和 Authen::SASL 模块。将 SMTP 端口设置为 465 后，它可以正常工作。

$smtp = Net::SMTP::SSL->new('smtp.gmail.com', Hello => 'localhost', Port => '465', Timeout => 30, Debug => 1);

但是在其中一个客户站点中，运行我的程序的 PC 只有 HTTP 访问 Internet 的权限。这样上面的代码行就不能再工作了。（我认为 SMTP 需要 PC 允许袜子。）我试过 Mail::Webmail::Gmail，但似乎这个模块太旧了，不能再工作了。

我想知道在这种情况下是否可以仅使用 Perl 中的网络访问来发送电子邮件，就像打开网络浏览器登录 Gmail 一样？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-25T21:45:22.130

在寻找相关问题的解决方案时偶然发现了这一点。我意识到它很旧，但没有答案，其他人可能会遇到它。此外，这些评论是不必要的粗鲁和无益的，并且对那些评论不可能做出的情况进行评估。将 GMail 用于商业是非常合理的，事实上 Google 提供商业电子邮件服务，任何此类用户都可能在使用这些服务。所以继续寻找可能的解决方案。

您可以设置一个外部代理来侦听端口 80 并将该流量重定向到 Google 的端口 465。

我同意上面关于谷歌屏幕抓取的评论。如果第三方服务适用于您的用例，我也同意使用第三方服务的可能性。

关于这个问题，如果端口 465 被阻止发送，那么您将需要使用允许发送的不同端口。由于 Google 仅在 smtp.gmail.com 上侦听 25、465 和 587，因此您需要使用代理，该代理允许您将在允许端口上发出的请求重定向到 Google 也在侦听的端口之一。

# titanium-mobile - 钛手机获取保存的图片路径

> ID：14402709
> 
> 赞同：3
> 
> 时间：2013-01-18T15:58:34.647
> 
> 标签：titanium-mobile

我一直在使用此代码将图像从 imageviewer 存储到设备内存。

```
blobObj = imageView.toImage(); 

var f = Titanium.Filesystem.getFile(Titanium.Filesystem.resourcesDirectory,'img.png');
f.write(blobObj);
Titanium.Media.saveToPhotoGallery(f,{
success: function(e) {
    Titanium.UI.createAlertDialog({
        title:'Photo Gallery',
        message:'Check your photo gallery for image '
    }).show();      
},
error: function(e) {
    Titanium.UI.createAlertDialog({
        title:'Error saving',
        message:e.error
    }).show();
}
}); 
```

我想要的是从内存中获取当前保存的图像的本机路径

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-11-28T11:37:57.033

亲爱的请看下面的例子来获取图片存储在钛文件系统中的本地路径

```
// Native path
var filename = "image.png";

// Create the file in the application directory       
bgImage = Titanium.Filesystem.getFile(Titanium.Filesystem.applicationDataDirectory, filename);

// Write the image to the new file (image created from camera)
bgImage.write(image);

// bgImage.nativePath, it is alos native path, but you can get through below code.
nativePath = Titanium.Filesystem.applicationDataDirectory + Ti.Filesystem.separator + filename;
alert(nativePath); 
```

希望它会适合你。它在我身边工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T17:06:58.277

由于这仅适用于 iOS（请参阅文档），我猜您在 iOS 平台上。

如果您通过创建图像，`blobObj = imageView.toImage();`您将收到 Titanium.Blob 对象。这个对象可以保存在你的应用程序的某个地方，它也可以暂时在内存中可用。

如果您将此图像存储到媒体库，您将不会获得此图像的文件路径，因为 iOS 平台不允许这样做。所以最后：你想做的事情是不可能的。

但是：您可以自己将图像永久存储在应用程序的数据存储中（使用 Ti.Filesystem）。

要检索临时对象的文件路径，请使用`f.nativePath`或`f.resolve()`.

不要忘记：您永远无法找到媒体库照片的路径。即使您从那里加载图像，您也会得到一个临时路径。

# c - 仅当手动触发弹出窗口时，系统标头的 ctags 的 Vim 自动完成功能才有效

> ID：14402713
> 
> 赞同：3
> 
> 时间：2013-01-18T15:58:57.010
> 
> 标签：c, macos, vim, autocomplete, ctags

在 OS X 上，我为系统生成了一组 ctag，包括使用以下命令：

```
ctags -f c -h ".h" -R --c-kinds=+p --fields=+iaS --extra=+q /usr/include 
```

这是在一个`~/.vim/ctags/`目录中运行的，我将我为系统范围的头文件生成的所有 ctags 放在其中（我也有条件加载的 ROS 和 CPP 的东西，但这既不是这里也不是那里）。

反正。`#include`ctags 文件在我的 .vimrc 中设置正确，vim 肯定可以看到 ctags，但由于某种原因，如果我写出整个符号然后开始退格，自动完成弹出窗口只会显示 d 头文件的结果。举个例子，如果我`#include <string.h>`在一个项目中，然后我想调用`strlen()`，然后我开始输入`str`活动的 vim 缓冲区，我只会得到当前在 vim 缓冲区中的符号的结果。但是，如果我输入`strlen`然后开始退格一两个字符并点击`<C-n>`，弹出菜单将填充来自任何其他包含的头文件的匹配项。

**编辑：事实证明，如果我只是按“s”然后`<C-n>`，它也可以。所以问题似乎是它只有在手动启动弹出菜单时才有效。这让我认为这是一个插件问题（见下文）**

附加信息：

*   `completeopt`设定为`completeopt=menuone,menu,preview,longest`

*   我有[OmniCppComplete](http://www.vim.org/scripts/script.php?script_id=1520)，我想这可能会干扰行为。目前**没有**为 C++ 文件有条件地加载它。如果您希望我从我的 .vimrc 编辑和发布我的 OmniCppComplete 设置，请询问。

*   我还安装了[AutoComplPop](http://www.vim.org/scripts/script.php?script_id=1879)，但我没有对其进行任何配置，因此它以默认设置运行。还没有真正研究过这个插件，所以不知道它的某些行为是否会干扰结果。

*   我已经安装了[AutoTag](http://www.vim.org/scripts/script.php?script_id=1343)和[TagBar](http://majutsushi.github.com/tagbar/)，但它们应该只是摆弄当前目录的本地标记文件。

老实说，我对 Vim 很陌生，我只是不知道从哪里开始调试这个问题，无论是使用随机插件还是使用我的 .vimrc 设置。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T17:57:12.037

Vim 有许多特定的完成机制。

*   `<C-n>`并`<C-p>`使用`complete`选项定义的许多来源。默认情况下，它们将使用当前和所有加载和卸载的缓冲区、标签和包含的文件来提供补全。虽然您通常可以通过这些获得非常有用的建议，但它有点“包罗万象”的解决方案：如果您从事相当大的项目，它根本不可靠。

*   `<C-x><C-]>`*仅*使用标签，因此它*可能*对您更有用。

*   还有更多，请参阅`:h ins-completion`。

*   Omni 补全更智能：它通常运行一个自定义文件类型特定的脚本，努力提供有意义的补全。它由触发`<C-x><C-o>`，您可以在`:h ft-c-omni`. 使用代码时，Omni 补全通常是更好的选择。

因为你有两个重叠的“自动”完成插件，所以很难说什么完成机制在起作用。您应该禁用这些插件并使用您可用的不同完成机制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-12-07T22:42:29.743

我还没有掌握这一点，但我认为以下观察可能会有所帮助。

Vim 的默认自动完成功能可能会非常嘈杂，通常会妨碍您使用`<C-x><C-o>`. 具体来说，我发现自己调用了基于标签的补全，`<C-x><C-o>`只是将它们*替换*为使用我的打开缓冲区继续输入 Vim 的默认建议。

关闭其中一个插件的建议是有道理的。就我而言，关键是如何关闭 Vim 的默认行为。我见过几个人（现在包括我自己），在触发 Vim 的默认值之前将表达式的长度设置为很大的数字。对我来说就是：

```
 let g:deoplete#auto_complete_start_length = 99 
```

...通过这种方式，您消除了默认的完成层，无论您打算通知您的工作的命令如何。

这仍然感觉像是一个 hack，但它有助于让我的工作专注于基于标签的完成。

仅供参考：我在 Mac 上使用 NVIM。

# jquery - 如何使用 JQuery 从点击事件中找到最外层元素的 ID？

> ID：14402716
> 
> 赞同：0
> 
> 时间：2013-01-18T15:59:10.377
> 
> 标签：jquery, jquery-ui, jquery-selectors

我正在尝试从单选按钮单击事件中获取列表项的 id。我尝试了很多符号，但似乎卡在了这个障碍上。任何帮助，将不胜感激。

HTML：

```
<li class="option" id="100400" title=""> <!-- I NEED THE ID OF THIS LIST ITEM -->
    <h5 class="ui-widget-header">Option 1</h5>
    <font id="" class="repairDetails" alt="Repair Details" style=""></font>
    <font style=""></font><br />
    <label class="price">£49.99</label>
    <a class="ui-icon ui-icon-wrench dialog_but" title="View Product Detail" href="#" style="">View Product Detail</a>
    <div id="op1Dialog" class="dialog_content" title="" style="">
        <div class="products">
            <h1 class="ui-widget-header">Avaliable Bundle Options</h1>
            <font>You can customise this option below</font>
            <div class="pOptions">
                <h2 class="customOHeader"><a href="#">Handle</a></h2>
                <div>
                    <ul>
                        <button ID="Button1" class="handle-pre">
                            Add Handle Preferance
                        </button>
                    </ul>
                </div>

                <h2><a href="#">Blade Fittings</a></h2>
                <div>
                    <ul>
                        <li for="Radio1">
                            Clear Extratec Scuff Sheet
                            <input type="radio" id="Radio1" name="" value="" class="bladeCO"/> <!-- CLICK EVENT HAPPENS HERE -->
                        </li><br />
                    </ul>
                </div>
            </div> 
        </div>
    </div>  
</li> 
```

jQuery：

```
$('.bladeCO').click(function(){
    var option = $(this).closest('.option').attr('id');
}); 
```

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T16:05:10.557

我正在更改我的答案以反映 adeneo 将此代码包装在文档就绪函数中的想法。

```
$(function(){
    $('.bladeCO').click(function(){
        var option = $(this).closest('li.option').attr('id');
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T16:17:00.353

试试这个：

```
$(document).ready(function() {
    $('.bladeCO').click(function(){
        var option = $($(this).parents("li.option")[0]).attr('id');

        console.log(option);
    });
}); 
```

问题可能是由于此处未显示的其余代码。附近可能还有其他`li`元素而不是`parent`. 像这样：

```
 <ul>
                        <li for="Radio1">Clear Extratec Scuff Sheet
                        <input type="radio" id="Radio1" name="" value="" class="bladeCO"/> CLICK EVENT HAPPENS HERE</li><br />
                    </ul>
                </div>
            </div> 
        </div>
    </div>    
</li>
<li class="option" id="some_other_id" title="">
    <h5 class="ui-widget-header">Option 1</h5> 
```

此外，如果它在 jsFiddle 中而不是在您的代码中工作，它可能已经`jquery`准备好了......

**更新**

这个 jsFiddle 工作正常，似乎有问题：http `jquery-ui`: [//jsfiddle.net/ck4b2/336/](http://jsfiddle.net/ck4b2/336/)。

# asp.net-mvc - 将值从视图发布到控制器 asp.net mvc

> ID：14402718
> 
> 赞同：1
> 
> 时间：2013-01-18T15:59:19.527
> 
> 标签：asp.net-mvc, checkbox

这是我观点的一部分：

```
<% using (Html.BeginForm())
       { %>
            <input type="checkbox" name="ali" value="123" />
            <%: Html.CheckBox("ali1") %>
                <a href='<%:Url.Action("DeleteSelected", "Product", new { @ShopID = ViewBag.shopIDempty } ) %>'>dddd</a>
                <input type="submit" onclick='<%: Url.Action("DeleteSelected", "Product", new { @ShopID = ViewBag.shopIDempty } ) %>' />
     <%} %> 
```

这是控制器：

```
 public ActionResult DeleteSelected(FormCollection collection, int ShopID)
    {
        var t = collection.GetValue("ali");
        var t2 = collection["ali"];
        var selectCB11 = collection.GetValue("ali");

        var t1 = collection.GetValue("ali1");
        var t21 = collection["ali1"];
        var selectCB121 = collection.GetValue("ali1");
        //...
    } 
```

但是没有任何东西传递给我的变量，并且它们都始终为空。怎么了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T16:04:09.147

单击链接将永远不会回发到服务器，或者从提交按钮重定向客户端也不会导致回发。任何像复选框这样的输入值都不会发送到服务器。您需要使用带有提交按钮的表单，并让提交自然地回发到服务器。

或者，您可以使用 JQuery 的 $.ajax 创建一个 JavaScript post 语句来异步执行此操作，[例如这些示例](http://blog.bobcravens.com/2009/11/ajax-calls-to-asp-net-mvc-action-methods-using-jquery/)。

# google-apps-script - Google Apps 脚本中的“内存不足错误”指的是什么？

> ID：14402719
> 
> 赞同：5
> 
> 时间：2013-01-18T15:59:36.273
> 
> 标签：google-apps-script, out-of-memory

当 Google Apps 脚本函数失败并返回“内存不足错误”时，这指的是什么？

代码是否已达到特定变量的内存最大值？这与缓存服务有关吗？这是否与脚本数据库服务有关？这是否与脚本本身的整体内存、处理和计算的所有数据的组合有关？

我没有找到有关此错误及其所指内容的信息。

任何帮助将不胜感激。

问候，詹姆斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T07:32:52.283

我遇到的同样错误是由于变量增加的大小超过了允许的范围（尽管我不知道最大允许大小是多少）。所以我相信它是“达到特定变量的最大内存”的情况。我使用的解决方法是在谷歌文档中写入数据流。它简单，工作没有任何麻烦。

Google Apps 脚本的行为有时具有欺骗性（至少对我而言），即。未观察到其错误消息的一致性。可能是发生在你身上的那些情况之一。

# javascript - 在 Safari JavaScript 中捕捉 ⌘+1

> ID：14402720
> 
> 赞同：2
> 
> 时间：2013-01-18T15:59:39.503
> 
> 标签：javascript, macos, safari

我正在编写一个 Safari 6 扩展，它添加了一些键盘快捷键。我想做的一件事是在用户按下 ⌘+1 ⌘+2 等时进行捕捉。现在，Safari 似乎不会在发生这种情况时触发任何事件。这是一个小提琴： http: [//jsfiddle.net/Xe9YQ/](http://jsfiddle.net/Xe9YQ/)来显示代码，这里是 JS：

```
$( 'body' ).bind( 'keypress', function ( event ) {

  var modifier = '';
  if ( event.metaKey ) {
    modifier += 'cmd-';
  }
  if ( event.ctrlKey ) {
    modifier += 'ctrl-';
  }
  if ( event.altKey ) {
    modifier += 'alt-';
  }
  if ( event.shiftKey ) {
    modifier += 'shift-';
  }

  $( 'body' ).html( modifier + event.keyCode );
}); 
```

如果您尝试“⌘+j”、“⌘+t”，甚至“⌘+0”和“⌘+shift+5”，您将看到正确的输出。由此看来，这似乎不是覆盖浏览器快捷方式的问题，也不是使用数字行的问题。

有人熟悉这个问题吗？这是一个已知的错误？我会很感激任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T16:10:06.677

您必须将`keydown`事件与 结合使用`preventDefault()`，因为`⌘</kbd> combinations may have bindings already (in Chrome, for example `⌘</kbd> + `1` switches to the first tab).``

```
$( 'body' ).bind( 'keydown', function ( event ) {
    var modifier = '';
    if ( event.metaKey ) {
      event.preventDefault();
      modifier += 'cmd-';
    }
    if ( event.ctrlKey ) {
      modifier += 'ctrl-';
    }
    if ( event.altKey ) {
      modifier += 'alt-';
    }
    if ( event.shiftKey ) {
      modifier += 'shift-';
    }
    $( 'body' ).html( modifier + event.keyCode );
}); 
```

# unit-testing - 无法获得正确的输出

> ID：14402723
> 
> 赞同：1
> 
> 时间：2013-01-18T15:59:44.277
> 
> 标签：unit-testing, code-coverage

嗨，我正在准备竞争性考试。在解决前几年的问题时，我遇到了这个问题

将测试以下程序的语句覆盖率：

```
begin
if (a== b) {S1; exit;}
else if (c== d) {S2;} 
else {S3; exit;}
S4;
end 
```

下面给出的测试用例 T1、T2、T3 和 T4 用变量 a、b、c 和 d 的值所满足的属性来表示。没有给出确切的值。

T1：a、b、c 和 d 都相等

T2：a、b、c 和 d 都是不同的

T3 : a=b 和 c !=d

T4 : a !=b 和 c=d

下面给出的哪些测试套件可确保覆盖语句 S1、S2、S3 和 S4？

(A) T1、T2、T3
(B) T2、T4
(C) T3、T4
(D) T1、T2、T4

现在我只得到 T2 作为答案。但他们给出的答案是选项D

请帮我解决问题

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T16:51:43.263

您必须写下每个测试用例涵盖的内容，并从中挑选：

1.  T1：只执行 S1
2.  T2：只执行 S3
3.  T3：只执行 S1
4.  T4：执行 S2 和 S4

因此，为了涵盖所有这些，您需要 T1+T2+T4 或 T2+T3+T4。由于后者不是一个选项，因此您只剩下选项 D。

希望有意义

# hibernate - Hibernate createCriteria list() 返回相同的对象

> ID：14402727
> 
> 赞同：0
> 
> 时间：2013-01-18T15:59:53.740
> 
> 标签：hibernate, createcriteria

你能帮我写下面的代码吗？我正在查询 Hibernate，返回的列表中的对象数对应于我的表中的行数。但似乎列表中的每个对象都是相同的。实际上，以下行打印了相同的用户，而表中的用户不同。

```
 System.out.println("p"+mo.getUser()); 
```

这是我的代码

```
List<MyObject> lp = (List<MyObject>) sessionFactory.getCurrentSession().createCriteria(MyObject.class).list();

         for (MyObject mo: lp) {

              System.out.println("p"+mo.getUser());
          } 
```

你知道什么会导致这种行为吗？这可能很愚蠢，但我找不到解决方案。谢谢

我的对象代码：

```
package soc.entities;

import java.math.BigDecimal;
import java.util.Date;

import javax.persistence.Entity;
import javax.persistence.GeneratedValue;
import javax.persistence.GenerationType;
import javax.persistence.Id;
import javax.persistence.Table;
import javax.persistence.Column;
/**
 * Part generated by hbm2java
 */

@Entity
@Table(name="Part")
public class MyObcejet {

    @Id
    @GeneratedValue(strategy=GenerationType.AUTO)
    private Integer id;

    @Column
    private String user

    public Part() {
    }

    public Integer getId() {
        return this.id;
    }

    public void setId(Integer id) {
        this.id = id;
    }

    public String getUser() {
        return this.user;
    }

    public void setUser(String user) {
        this.user = user;
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T07:39:17.877

请使用以下行以避免重复对象

```
criteria.setResultTransformer(Criteria.DISTINCT_ROOT_ENTITY); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T09:50:51.800

我已经设法解决了这个问题。实际上 MyObject 实例变量与我的表列名称不对应。谢谢！

# json - 如何使用 JSON 构建数据交换模板？

> ID：14402729
> 
> 赞同：1
> 
> 时间：2013-01-18T15:59:58.430
> 
> 标签：json

我需要为使用 JSON 的两个 Web 服务之间的数据交换构建一个模板。我相信我需要构建一个类似于 XML 中使用的 XSD 的 JSON 模板。那正确吗？

请指导我找到一个好的教程或一个好的应用程序来生成 JSON 模板。

提前感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T16:08:10.863

您正在寻找的是所谓的 JSON 模式。看看[维基百科的页面](http://en.wikipedia.org/wiki/JSON#Schema)

如果你想要一个模式生成器，那么看看[这个问题的答案](https://stackoverflow.com/questions/7341537/tool-to-generate-json-schema-from-json-data)。

# java - 如何在Java中单击下一个按钮时显示下一个和上一个记录

> ID：14402734
> 
> 赞同：0
> 
> 时间：2013-01-18T16:00:08.333
> 
> 标签：java, sql

你好朋友我正在尝试在我的 Jave Gui 应用程序中显示记录我已经编写了一些代码它可以工作但是当我单击下一步按钮时它会显示最后一条记录。有没有其他方法可以查看中间存在的记录，请帮忙。

```
 private void bt_nextActionPerformed(java.awt.event.ActionEvent evt) {
    if(evt.getSource()==bt_previous){
    DBUtil util = new DBUtil();
           try {
                Connection con = util.getConnection();
               PreparedStatement stmt = con.prepareStatement("SELECT [box_no],[weight],[note_state],[dm_state],[1],[2],[5],[10],[20],[50],[100],[500],[1000] FROM [CNV].[dbo].[soil_det] where rm_id=?");
                ResultSet rs;
                String rm = tf_rm_id.getText().trim();

                stmt.setLong(1, Long.parseLong(rm));

                rs = stmt.executeQuery();
                while (rs.next()) {
                    String a = rs.getString("weight");
                    txtboxwgt.setText(a);
                    String b = rs.getString("note_state");
                    cbnotstat.setSelectedItem(b);
                    String c = rs.getString("dm_state");
                    cbdmnstat.setSelectedItem(c);
                    txtboxno.setText(rs.getString("box_no"));
                    txtRe1.setText(rs.getString("1"));
                    txtRs2.setText(rs.getString("2"));
                    txtRs5.setText(rs.getString("5"));
                    txtRs10.setText(rs.getString("10"));
                    txtRs20.setText(rs.getString("20"));
                    txtRs50.setText(rs.getString("50"));
                    txtRs100.setText(rs.getString("100"));
                    txtRs500.setText(rs.getString("500"));
                    txtRs1000.setText(rs.getString("1000"));
                }

           } catch (Exception e) {
                     JOptionPane.showMessageDialog(null, e.getMessage());
                 }
    }

}`enter code here` 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T16:01:49.373

在您的`while`循环中，您的`JTextFields`值正在设置和重新设置，并保持设置为循环中的最后一个值。为每个按钮单击单独调用会产生昂贵的开销，但是如果您希望使用这种方法，则需要在您的中添加一个仅返回一条记录的适当`WHERE`子句。`SQL`还可以考虑使用[连接池](http://en.wikipedia.org/wiki/Connection_pool)。

或者，您可以在 a 中显示所有值`JTable`。

[如何使用表格](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T16:56:28.607

您需要将数据库代码与 GUI 代码分开。您还需要将应用程序分解为更小、更易于编码的步骤。

以下是您的应用程序在启动时需要做的事情：

*   打开与数据库的连接。
*   选择表 soil_det 的所有键，并将键保存在列表中。
*   选择第一行并显示它。

左键单击下一个按钮时：

*   从列表中获取下一个键。
*   如果您超出列表末尾，则显示一条消息。
*   否则，选择当前行并显示它。

左键单击上一个按钮时：

*   从列表中获取上一个键。
*   如果您超过列表的开头，则显示一条消息。
*   否则，选择当前行并显示它。

以下是您的应用程序在结束时需要做的事情：

*   关闭与数据库的连接。

# iphone - 应用程序在具有相同版本 iOS 的相同型号的不同设备上表现不同

> ID：14402735
> 
> 赞同：1
> 
> 时间：2013-01-18T16:00:10.943
> 
> 标签：iphone, ios, ipad

两部 iPhone 4S 使用相同版本的 iOS 运行相同的应用程序会遇到不同的（并且通常是相互排斥的）错误

我遇到了一个奇怪（而且非常令人沮丧）的问题，我正在构建的应用程序在同一型号的不同设备上表现不同。我不知道为什么。当我测试代码时，我使用真实设备（我的 iPhone 5、4S、iPod touch 和 iPad 2）和模拟器来帮助发现和修复错误。但是，发生的情况是，当我将测试构建发送给使用相同设备（例如另一台 iPhone 4S）、运行相同 iOS 版本的其他人时，他们报告了我无法在我自己的设备上找到或复制的错误。我不认为这些人在谎报他们的经历，但真的有可能两部相同型号的手机和相同的 iOS 版本会遇到不同的错误吗？如果是，我应该如何调试这个，因为我不能复制这个问题？

# c++ - 将虚函数与重载常规函数混合？

> ID：14402736
> 
> 赞同：5
> 
> 时间：2013-01-18T16:00:17.277
> 
> 标签：c++

在项目中看到如下代码：

```
class Base
{
...
    virtual double Function(int i) const;

...
};

class SubClass : public Base
{
    virtual double Function(int i) const;
    double Function(std::vector<int> vecInts) const;
    double Function(std::map<int> mapInts) const;
}; 
```

我对这种设计感到不舒服。我知道我们应该避免重载虚函数，但这里的情况有点不同。

问题> 这里有设计缺陷吗？

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-18T16:02:22.413

不，没关系。重载`virtual`函数很好。*隐藏*虚函数是你应该小心的。

在您的情况下，您将覆盖基本版本并提供另外两个重载。所以不会发生隐藏。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-18T16:02:21.017

这不是设计缺陷。很好。

*   只要您不使用动态调度，派生类中的函数将**[隐藏](http://www.parashift.com/c++-faq/hiding-rule.html)**基类函数，并且将选择派生类中适当的重载函数。（*下面示例程序中的前 3 个输出*）。
*   在动态调度的情况下，将根据对象的实际*类型调用适当的覆盖函数（**请记住，覆盖函数是`int`作为参数的函数）（**下面示例中的最后 3 个输出*）。

 **考虑**[示例程序](http://ideone.com/2HkTjN)**以使其更清晰：

```
#include<iostream>
class Base
{
public:
    virtual double Function(int i) const{std::cout<<"\nIn Base int version";}
};

class SubClass : public Base
{
public:
    virtual double Function(int i) const{std::cout<<"\nIn Derived int version";}
    double Function(std::string str) const{std::cout<<"\nIn Derived string version";}
    double Function(double i) const {std::cout<<"\nIn Derived double version";}
};

int main()
{
    SubClass obj;
    obj.Function(10);
    obj.Function(10.1);
    obj.Function("Hello"); 

    Base Bobj;
    Bobj.Function(10.2);

    Base *ptr = new Base;
    ptr->Function(10.5);

    Base *ptr2 = new SubClass; 
    ptr2->Function(10);
    ptr2->Function(10.5);

    delete ptr;
    delete ptr2;
    return 0;
} 
```

输出是：

```
In Derived int version
In Derived double version
In Derived string version
In Base int version
In Base int version
In Derived int version
In Derived int version 
```

请注意最后两个输出。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-18T16:07:02.657

没有缺陷。来自有效 C++，第 34 项：

> 纯虚函数仅指定接口的继承。
> 
> 简单（不纯）虚函数指定接口继承加上默认实现的继承。
> 
> 非虚拟函数指定接口的继承加上强制实现的继承。

由于 Function(int i) 是一个虚函数而不是非虚函数，它的默认实现可以在基类中被覆盖。如果它是一个非虚拟函数，那么它将是一个强制实现，不被覆盖，以确保类层次结构中的“is-a”关系。**

# jquery - jquery 1.9.0 和 modernizr 无法使用 ASP.NET Web 优化框架进行缩小

> ID：14402741
> 
> 赞同：31
> 
> 时间：2013-01-18T16:00:40.730
> 
> 标签：jquery, asp.net, modernizr, bundling-and-minification

我们正在使用 ASP.NET Web 优化框架与捆绑和缩小。一个包只包含 jquery 和modernizr。这一切都适用于 jquery 1.8.3，但由于我们更新到 1.9.0，jquery/modernizer 组合包不再工作。

```
bundles.Add(new ScriptBundle("~/st-scripts-load-first.js")
       .Include("~/Resources/JavaScript/jquery-1.9.0.js",
                "~/Resources/JavaScript/modernizr.form-placeholder.js")); 
```

我们在目录中有 jquery-1.9.0.js 和 jquery-1.9.0.min.js。如果没有 .min 文件，优化框架会自动生成一个。无论 .min 文件是否存在，它都不起作用。
如果编译 debug="true" 并且没有缩小或捆绑，则它可以工作。

```
/* Minification failed. Returning unminified contents.
(5,2-3): run-time warning JS1195: Expected expression: *
(11,60-61): run-time warning JS1004: Expected ';': {
(395,2-3): run-time warning JS1195: Expected expression: )
(397,21-22): run-time warning JS1004: Expected ';': {
(397,4590-4591): run-time warning JS1195: Expected expression: )
(398,28-29): run-time warning JS1195: Expected expression: )
(398,84-85): run-time warning JS1002: Syntax error: }
(402,44-45): run-time warning JS1195: Expected expression: )
(408,1-2): run-time warning JS1002: Syntax error: }
(393,5-22): run-time warning JS1018: 'return' statement outside of function: return Modernizr;
(404,5,406,16): run-time warning JS1018: 'return' statement outside of function: return !!('placeholder' in (Modernizr.input || document.createElement('input')) &&
               'placeholder' in (Modernizr.textarea || document.createElement('textarea'))
             );
 */ 
```

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2013-01-24T11:23:30.247

我确定您的问题的原因是 jquery-1.9.0.min.js 的最后一行：

```
//@ sourceMappingURL=jquery.min.map 
```

jQuery 1.9 的未缩小版本不包含此内容。我会在一分钟内解释为什么。

我自己注意到，当 jquery-1.9.0.min.js 与另一个文件捆绑在一起时 - 另一个文件*跟在*jquery-1.9.0.min.js 之后 - 那么下面的 JS 文件在某种意义上是，损坏。

原因是以下文件的开头附加到 jQuery 的“ *//@* ”行，这意味着它会变成一个长的、扩展的注释。在您的情况下，这意味着

```
window.Modernizr=function(n,t,i){function... 
```

Modernizr 开始时的脚本作为注释从捆绑过程中输出，如下所示：

```
//@ sourceMappingURL=jquery.min.map window.Modernizr=function(n,t,i){function... 
```

有一个[关于 jQuery 的 Bug Tracker](http://bugs.jquery.com/ticket/13274)的讨论。

您的选择是删除最后一行或将其包装在多行注释符号中：

```
/*
//@ sourceMappingURL=jquery.min.map
*/ 
```

此外，您可以看到 Modernizr 在其缩小版本的末尾还包含一个源映射。并且有充分的理由。

它背后的基本原理是在使用代码的缩小版本时帮助您调试问题。这一行告诉浏览器这个缩小的文件映射到另一个可以帮助调试的文件。要利用这一点，您需要在服务器上拥有该引用文件 (jquery.min.map) 或下载到客户端。另外，我相信 Chrome 是目前唯一支持此功能的浏览器；它仍在 Firefox 开发中。

[此页面](http://www.html5rocks.com/en/tutorials/developertools/sourcemaps/)对 Source Maps 有很好的解释。

因此，总而言之，删除它不会真正给您带来任何问题，除非您希望在浏览器中调试时映射回源的原始版本。在您的情况下，由于 ASP.NET 优化框架的工作方式，当*debug="True"*时，无论如何它都会提供未缩小的版本，因此您可能不需要使用 sourceMappingURL。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-12T13:26:11.283

我无法回复上面 awj 的答案，所以我只是投了赞成票。很棒的侦探作品。我想添加评论，虽然问题确实在 jquery 1.9.1 中得到解决，但它现在出现在 jquery-migrate-1.1.0

我注意到地图文件引用只是“jquery-migrate-1.1.0.min.js”文件末尾的单行注释。因此，按照 awj 的建议，我将其设为多行注释。

所以第3行：

```
//@ sourceMappingURL=dist/jquery-migrate.min.map 
```

现在变为第 3、4 和 5 行，如下所示：

```
/*
//@ sourceMappingURL=dist/jquery-migrate.min.map
*/ 
```

一旦我上传回我的 ISP，我就会再次拥有完整的 ajax 功能。

再次感谢AWJ，这对您有很大帮助！

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-08-11T18:40:39.950

阅读答案，即使是已接受的答案，建议解决此问题的方法是修改您的脚本，以便捆绑程序对此没有任何问题。这对我来说毫无意义，这显然是捆绑器没有正确连接不同脚本的错误，特别是当 n 脚本的最后一行是普通行注释时，捆绑器有问题

```
// this is the last line of the n script 
```

然后你的下一个脚本不是以单行注释开头

```
function(){ var ... 
```

捆绑器，默认情况下配置`;`为 a，`ConcatenationToken`所以捆绑的代码最终是这样的：

```
// this is the last line of the n script;function(){ var ... 
```

脚本加载肯定会在某处出现语法错误而失败。

有人建议将脚本的最新行修改为不是内联注释，使其成为多行注释，因此当代码以`*/`解析器结尾时，可以在其后添加函数声明或其他内容。

我不喜欢修改我的脚本，许多是由其他人（jquery 等）编写的，我不想修改它们，如果我必须升级它们并且在我升级网站后会再次发现这个错误怎么办？它不在`debug="true"`配置中运行。

我提供的这个解决方案对我来说效果更好

```
bundles.Add(new ScriptBundle("~/bundles/mobile") { 
                ConcatenationToken = ";\r\n" }
       .Include("~/Scripts/jquery-1.11.3*",
                "~/Scripts/jquery-timeago*",
                "~/Scripts/jquery.mobile-1.4.5*", 
```

通过这种方式，我们强制捆绑器始终使用换行符分隔脚本。当前一个脚本的最后一行是单行注释时，它应该默认执行此操作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-23T21:56:53.993

您的 modernizr.form-placeholder.js 副本可能有问题。

我在尝试加载 jquery.peity.js 时遇到了同样的错误。

当我删除库时，页面加载正常。所以我只是去从他们的网站上抓取原始 js 并重新制作文件，它加载没有问题。

# c# - C# - LINQ - GPS 纬度和经度的最短距离

> ID：14402742
> 
> 赞同：9
> 
> 时间：2013-01-18T16:00:42.010
> 
> 标签：c#, linq, entity-framework, linq-to-entities, gps

我有数据库，其中有带 gps 坐标的类酒店。我想获得离我选择的坐标最近的地方。

我认为它应该看起来像这样（我在这里找到了很多示例代码，并且喜欢这个）：

```
var coord = new GeoCoordinate(latitude, longitude);
var nearest = (from h in db.hotels
               let geo = new GeoCoordinate(h.gps.lat, h.gps.lng)
               orderby geo.GetDistanceTo(coord)
               select h).Take(10); 
```

问题是当我尝试搜索某些内容时出现此错误：

> LINQ to Entities 仅支持无参数构造函数和初始化程序

我试图用谷歌搜索它，我发现将 linq 分成两部分可以帮助我，但我不确定如何。感谢帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-18T16:07:06.297

您可以使用对象初始值设定项而不是参数化构造函数：

```
var nearest = (from h in db.hotels
           let geo = new GeoCoordinate{ Latitude = h.gps.lat, Longitude = h.gps.lng}
           orderby geo.GetDistanceTo(coord)
           select h).Take(10); 
```

但是您可能会遇到由 GetDistanceTo 方法引起的问题，您能否提供该方法的实现？

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-07-27T10:54:08.737

[使用Haversine距离](https://en.wikipedia.org/wiki/Haversine_formula)公式的这种实现，我已经取得了合理的成功

```
var startPoint = new { Latitude = 1.123, Longitude = 12.3 };

var closest = entities.Something.OrderBy(x => 12742 * SqlFunctions.Asin(SqlFunctions.SquareRoot(SqlFunctions.Sin(((SqlFunctions.Pi() / 180) * (x.Latitude - startPoint.Latitude)) / 2) * SqlFunctions.Sin(((SqlFunctions.Pi() / 180) * (x.Latitude - startPoint.Latitude)) / 2) +
                                    SqlFunctions.Cos((SqlFunctions.Pi() / 180) * startPoint.Latitude) * SqlFunctions.Cos((SqlFunctions.Pi() / 180) * (x.Latitude)) *
                                    SqlFunctions.Sin(((SqlFunctions.Pi() / 180) * (x.Longitude - startPoint.Longitude)) / 2) * SqlFunctions.Sin(((SqlFunctions.Pi() / 180) * (x.Longitude - startPoint.Longitude)) / 2)))).Take(5); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-21T18:43:50.427

我在这里发布我现在正在使用的解决方案。但我选择 GwynnBlidd 的答案是因为他解决了我的问题。

我在课堂上添加了 DbGeography 类型，我正在使用它而不是在数据库中保存纬度和经度。

```
locationField = DbGeography.FromText(String.Format("POINT({0} {1})", orig.gps.lat.ToString().Replace(",", "."), orig.gps.lng.ToString().Replace(",", "."))); 
```

那么使用linq就非常简单了：

```
var coord = DbGeography.FromText(String.Format("POINT({0} {1})", latitude.ToString().Replace(",", "."), longitude.ToString().Replace(",", ".")));
            var nearest = (from h in db.hotels
                           where h.location != null
                           orderby h.location.Distance(coord)
                           select h).Take(limit);
            return nearest; 
```

目前这是可行的解决方案，而且很好。有一段时间我会使用它，但正如很少有用户在这里所说的那样，我可能会尝试使用 UDF 来实现 Haversine 公式（就像在[这个答案](https://stackoverflow.com/a/10919178/367593)中一样）。

# java - commons-collections 和 commons-beanutils 中的重复类

> ID：14402745
> 
> 赞同：17
> 
> 时间：2013-01-18T16:01:03.447
> 
> 标签：java, maven, apache-commons

Apache 的两个 Maven 工件中有四个重复的类：`commons-beanutils:commons-beanutils:1.8.3`和`commons-collections:commons-collections:3.2.1`：

```
org.apache.commons.collections.ArrayStack
org.apache.commons.collections.Buffer
org.apache.commons.collections.BufferUnderflowException
org.apache.commons.collections.FastHashMap 
```

是否可以用其他工件替换其中一个以避免这种重复？我试图谷歌但没有找到任何解决方案。比较烦人的问题。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-18T16:23:20.510

在这种情况下，问题不是 maven 或排除（这通常是问题），但您很可能使用了错误版本的 beanutils。

有一个包含 bean 集合的 beanutils jar 版本和一个不包含 bean 集合的版本。带有 bean 集合的 beanutils 的 maven 依赖项包括 commons 集合。如果您自己使用公共集合，请使用核心版本并将公共集合包含在 maven 依赖项中。

这是解释一下的地方： http: [//commons.apache.org/beanutils/](http://commons.apache.org/beanutils/)

该页面是这样说的：

> ```
> commons-beanutils.jar - contains everything
> commons-beanutils-core.jar - excludes Bean Collections classes
> commons-beanutils-bean-collections.jar - only Bean Collections classes
> 
> The main commons-beanutils.jar has an optional dependency on Commons Collections 
> ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T16:08:10.577

看看这篇文章[链接](http://maven.apache.org/guides/introduction/introduction-to-optional-and-excludes-dependencies.html)它告诉使用排除标签

**更新**

看看这个[链接2](https://maven.apache.org/plugins/maven-shade-plugin/examples/includes-excludes.html)

```
<project>
  ...
  <build>
    <plugins>
      <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-shade-plugin</artifactId>
        <version>2.0</version>
        <executions>
          <execution>
            <phase>package</phase>
            <goals>
              <goal>shade</goal>
            </goals>
            <configuration>
              <artifactSet>
                <excludes>
                  <exclude>classworlds:classworlds</exclude>
                  <exclude>junit:junit</exclude>
                  <exclude>jmock:*</exclude>
                  <exclude>*:xml-apis</exclude>
                  <exclude>org.apache.maven:lib:tests</exclude>
                  <exclude>log4j:log4j:jar:</exclude>
                </excludes>
              </artifactSet>
            </configuration>
          </execution>
        </executions>
      </plugin>
    </plugins>
  </build>
  ...
</project> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-03-11T17:54:42.853

所以基本上发生的事情是你从一个配置错误的 jar 中拉入两个版本（拉入两个版本，这是多余的），或者从多个依赖项中拉入一个版本，另一个拉入另一个版本，冲突！我将其称为 commons-beanutils 的“奇怪的发布系统”问题，因为 maven 无法轻松处理该模式……对我来说，一个解决方法是增加我的依赖版本，它同时包含版本（在我的情况下为“commons-configuration”），或手动指定特定版本`commons-configuration`：

所以这个`mvn dependency:tree`：

```
[INFO] +- commons-configuration:commons-configuration:jar:1.6:compile
[INFO] |  +- commons-collections:commons-collections:jar:3.2.1:compile (version managed from 3.2)
[INFO] |  +- commons-digester:commons-digester:jar:1.8:compile
[INFO] |  \- commons-beanutils:commons-beanutils:jar:1.7.0:compile
[INFO] |  \- commons-beanutils:commons-beanutils-core:jar:1.8.0:compile 
```

变成了这样：

```
[INFO] +- commons-configuration:commons-configuration:jar:1.7:compile
[INFO] |  +- commons-collections:commons-collections:jar:3.2.1:compile
[INFO] |  +- commons-lang:commons-lang:jar:2.6:compile
[INFO] |  +- commons-logging:commons-logging:jar:1.1.1:compile
[INFO] |  +- commons-digester:commons-digester:jar:1.8.1:compile
[INFO] |  \- commons-beanutils:commons-beanutils:jar:1.8.3:compile 
```

尽管根据对另一个答案的评论，将“某物”撞到使用 commons-beanutil 1.9+ 的版本也可以。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-05-15T21:42:48.927

从 beanutils JAR 中排除集合包，它对我有用:)

# google-drive-api - 与共享的 Google Drive 文件相关的电子邮件 ID

> ID：14402746
> 
> 赞同：1
> 
> 时间：2013-01-18T16:01:06.680
> 
> 标签：google-drive-api

我想知道有权访问文件的用户的电子邮件 ID。我尝试使用[https://developers.google.com/drive/v2/reference/permissions/list](https://developers.google.com/drive/v2/reference/permissions/list)。但输出将不包含电子邮件 ID，而仅包含 Google 帐户 ID 和 Google 帐户名称。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T16:31:46.007

Drive 文档显示 value 属性未在 list 或 get 请求中返回：

[https://developers.google.com/drive/v2/reference/permissions#resource](https://developers.google.com/drive/v2/reference/permissions#resource)

如果您需要电子邮件，现在您需要调用旧的[Docs List API](https://developers.google.com/google-apps/documents-list/#retrieving_the_acl_for_a_document_file_or_collection)

# c# - 缓存静态表Mysql

> ID：14402749
> 
> 赞同：5
> 
> 时间：2013-01-18T16:01:11.700
> 
> 标签：c#, mysql, asp.net-mvc, entity-framework, caching

使用 MYSQL，带有 EF 5.x 和 MVC3。我有一张大约有 320 万行的表格，其中包含城市、国家/地区组合。我在客户端有一个自动完成文本框，它接受城市的搜索词并使用 jQuery/ajax 发回建议。

我面临的挑战是，当它第一次使用时，我将这个表缓存到我的内存中：

```
 CityData = DataContext.Citys.OrderBy(v => v.Country).ToList();

        if (CityData.Any())
        {
            // Put this data into the cache for 30 minutes
            Cache.Set("Citys", CityData, 30);
        } 
```

即使我将 db-context 超时设置为 5 分钟，它也会超时。当我使用 MySQL 客户端对数据库运行此 SQL 时，大约需要 3 分钟才能提取所有行。

将这些数据读入缓存的最佳方法是什么，或者我应该做些什么不同的事情？如果可以，我可以将表直接缓存到 MySQL 缓存中吗？或者我应该将术语搜索直接发送到数据库，而不是使用缓存中的数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T16:59:12.293

同意对您的问题的评论，我还建议，有这么多行，您可能会限制自动完成的回报？（即进入前 10 名）。除非您尝试在每次击键时返回所有结果，否则为此往返数据库不应成为主要瓶颈。

如果这是一个瓶颈，我可能会通过在每次击键时对数据库进行异步调用来解决这个问题，同时继续过滤您已经在本地提取的结果。我认为你会得到更快的结果，在数据库中重新排序你的列表并重新查询，而不是在代码中尝试这样做的性能损失——如果我正确理解你的意图/问题的话。

警告：我还没有达到数据库方法的通用往返速度不足以满足我的需求/自动完成中的数据量的位置 - 必须在这里解决性能问题的其他人可能能够提供额外的见解 - 任何谷歌工程师阅读？:)

# c# - C# Onclick 命令不起作用

> ID：14402752
> 
> 赞同：0
> 
> 时间：2013-01-18T16:01:30.713
> 
> 标签：c#, code-behind, imagebutton

下面是我需要在代码隐藏页面上运行 C# 命令的 asp 按钮。

```
<asp:ImageButton ID="Retire" OnClick="this.retire" ImageUrl="/assets/images/ast/delete_32x32.png" AlternateText="~retire" ToolTip="Retire" runat="server" /> 
```

我的 C# 代码在后面

```
public void retire(object sender, EventArgs e)
    {
        using (SqlConnection connection = new SqlConnection(WebConfigurationManager.ConnectionStrings["app_migrationConnectionString"].ConnectionString))
        {
            connection.Open();
            using (SqlCommand cmd = new SqlCommand("UPDATE Apps SET Migration_Phase = '-1' WHERE ID = @ID", connection))
            {
                cmd.Parameters.AddWithValue("@ID", float.Parse(Request.QueryString["ID"]));
            }
            connection.Close();
            Page.Response.Redirect(Page.Request.Url.ToString(), false);
        }
    } 
```

我需要不同的 OnClick 还是我遗漏了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T16:02:43.140

改变

```
OnClick="this.retire" 
```

到

```
OnClick="retire" 
```

[**Web 表单页面中的服务器事件处理**](http://msdn.microsoft.com/en-us/library/at2tetf6%28v=vs.71%29.aspx)

# java - ArrayIndexOutOfBounds 测试 char 是否为 int

> ID：14402756
> 
> 赞同：0
> 
> 时间：2013-01-18T16:01:36.260
> 
> 标签：java, tostring, arrays

好吧，伙计们，我正在尝试对 Java 有一个基本的了解，我想我会做一些比平常更复杂的事情。我在这个方法中首先尝试检查第一个字符是否可以是 int，如果是，我想看看这个数字在输入中的距离（所以如果用户输入 455+60，我'd 想要拔出 455 并停在 +）。

出于某种原因，如果输入是 500t，它会正常工作。但是如果索引在数字之后结束（比如输入只是 500），那就有问题了。我认为 for 循环出于某种原因继续运行。谁能告诉我我在哪里搞砸了？我添加了一个 if 语句以查看是否可以阻止它，但无济于事。

```
public void init(){
    int chars = 0;
    /*
     * Input fancy intro here.
     */
    clearArray();
    String uInput = getInput();
    rawInput=uInput.toCharArray();
    cleanArray(rawInput);
    try{Integer.parseInt(Character.toString(rawInput[0]));
    boolean isNum = true;
    for(int i=0;isNum==true;i++){
        if(i != rawInput.length){
        try{Integer.parseInt(Character.toString(rawInput[i]));}
        catch (NumberFormatException s){
            isNum = false;
            chars = i;
            System.out.println("The number has: "+chars+" characters.");
        }
        }
        }       
    }
    catch (NumberFormatException s){
        System.out.println("What is this madness?");

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T16:05:00.870

在这里，您避免要求`rawInput[rawInput.length]`：

```
if(i != rawInput.length) 
```

...但是您*确实*继续进行下一次迭代。

有什么理由你不能这样做：

```
for (int i = 0; i < rawInput.length && isNum; i++) 
```

? 我还建议使用[`Character.isDigit`](http://docs.oracle.com/javase/7/docs/api/java/lang/Character.html#isDigit%28char%29)或自定义检查，而不是将每个字符转换为字符串，然后对其进行解析并捕获异常。

请注意，这`Character.isDigit`将返回`true`您可能不想要的非 ASCII 数字。您很可能只想要一个简单的检查：

```
char c = rawInput[i];
if (c < '0' || c > '9') {
    isNum = false;
} 
```

另请注意，正则表达式可能是一个更好的解决方案......

哦，如果你有一个空字符串，那现在会算作一个数字......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T16:05:10.690

您可以通过在 for 循环中添加额外的检查来解决此问题，以查看您是否位于字符串的末尾。尝试：

```
for(int i=0;isNum==true && i<rawInput.length;i++){ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T16:11:36.423

你可以尝试这样的事情：

```
public int countDigits(String input) {
    int digitsCount = 0;

    for (int i = 0; i < input.length(); ++i) {
        if (Character.isDigit(input.charAt(i))) {
            ++digitsCount;
        } else {
            break;
        }
    }

    return digitsCount;
} 
```

# php - 选择使用长变量与 MD5 性能明智

> ID：14402763
> 
> 赞同：4
> 
> 时间：2013-01-18T16:01:54.073
> 
> 标签：php, mysql, select, md5

假设我有一个带有长变量（URL，如 100-250 个字符）的大表（100000+ 个条目）。将 MD5 散列作为旁边的单独字段用于从表中获取单行对于更好的性能是否有意义？

```
SELECT * FROM `urls` WHERE `url` = 'http://long-phrase...' LIMIT 1; 
```

或者

```
SELECT * FROM `urls` WHERE `url_md5` = MD5('http://long-phrase...') LIMIT 1; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T09:06:09.157

我想使用 INDEX 就足够了，这就是为什么，在下雪的星期天以平淡的心情写的：

数据库将其行一个接一个地存储在文件中：

```
 id url          name       descr         visited
  1 http://...   somewhere  i like it     2013-01-01
  2 http://...   wherever   i dislike it  2013-01-02
  ... 
```

您将在磁盘上拥有这些数据，大致如下：

```
 [s:35:http://...s:9:somewhere...][s:45:http://...s:9:wherever...][...] 
```

一堆字节，很多。如果您要求数据库搜索给定术语，则数据库必须通过扫描文件来扫描“行”并应用搜索词。假设您有 100 万行，数据库必须扫描 100 万行。假设您要在行中搜索“url”字段。假设您缩短（或扩展，执行“http://goo.gl/P0Gwz”的 md5）字符串后，“搜索”变得更容易：您仍然需要搜索 100 万行。

另一方面，如果您只是可以搜索 ORDERED 行列表，那[真的会加快速度](http://en.wikipedia.org/wiki/Binary_search_algorithm)。因此，假设数据库现在存储了在您插入行时未排序但按“url”字段排序的行。现在，只要您插入新行，数据库就必须重新排序磁盘上所有存储的字节。因为，您现在可以更快地搜索，但 INSERT 操作要慢得多。并且不要忘记：明天您要搜索“descr”字段。现在怎么办？重新排序整个文件？保留文件的 2 个副本？

一种更好的方法是使用寄存器，一个有序列表，其中包含在哪里可以找到“行”的参考。这个想法与现实世界的图书馆一样古老：只需将书籍一个接一个地放在书架上，给它编号，然后创建列表：一个按作者姓名排序，一个按出版年份排序，一个按标题等。想要搜索作者 选择作者注册，通过类似二分搜索的方法扫描名称（如果此人很聪明），获取书号​​，上书架并快速拿起书.

该“注册”事物也称为“索引”：对磁盘上引用行位置的引用的有序列表：

```
 [s:35:http://...s:9:somewhere...][s:45:http://...s:9:wherever...][...]
       ^                               ^                           ^
       |                               |                           |
       |                               |                           |
 i1   -------------------------------- ^                           |
 i2   ------------------------------------------------------------------>
 i3   -^                                                           |
 i100 -------------------------------------------------------------^ 
```

例如，您现在可以检查`i50`您的搜索词是否匹配。如果索引函数指向大于 50 的值，则在下一轮检查 i75，如果小于 50，则检查 i25，依此类推。

给你数字：给定 100 万行，你搜索“url”字段，你必须扫描：

*   在最坏的情况下需要 100 万行才能找到您的网址（“它不在此处”）。
*   平均 50 万行（“平均分布”）。
*   在最坏的情况下，log2(10^6) == 20 次检查 INDEX 中的 url。
*   log2(10^6)-1 == 19 平均检查 INDEX 中的 url。

明天你将有 200 万行。现在您必须不使用 INDEX 扫描超过 200 万行，并且您必须最多扫描 20 次才能找到正确的记录或什么也没有。数百万次字符串比较与 20 次比较。您会看到使用 INDEX 的影响有多大。

在此处阅读有关该主题的更多信息：

*   [http://dev.mysql.com/doc/refman/5.5/en/mysql-indexes.html](http://dev.mysql.com/doc/refman/5.5/en/mysql-indexes.html)
*   [http://dev.mysql.com/doc/refman/5.5/en/index-btree-hash.html](http://dev.mysql.com/doc/refman/5.5/en/index-btree-hash.html)
*   [http://dev.mysql.com/doc/refman/5.5/en/how-to-avoid-table-scan.html](http://dev.mysql.com/doc/refman/5.5/en/how-to-avoid-table-scan.html)

# google-maps - 插入谷歌地图融合表

> ID：14402765
> 
> 赞同：0
> 
> 时间：2013-01-18T16:02:14.487
> 
> 标签：google-maps

是否可以在此处的查询中使用 select 的方式使用插入语句：

```
var layer = new google.maps.FusionTablesLayer({
          query: {
            select: 'address',
            from: '1iG4AeLNRyT5B2eGNcKELv7rmdbXmReM597C0-Mw',
            where: 'ridership > 5000'
          }
        }); 
```

# vba - 通过 vba 检测计算类型

> ID：14402772
> 
> 赞同：1
> 
> 时间：2013-01-18T16:02:26.953
> 
> 标签：vba, excel, excel-2003

我有一个电子表格设置为手动计算以节省时间（计算需要很长时间）。

我想提供一些方法来建议用户是否需要执行计算以使整个工作簿保持最新。我还没有完全考虑清楚，但在我的脑海中，我需要能够区分用户执行的计算。

即，我需要一个 worksheet_calculate 事件来识别用户是否执行了 shift-f9 或 ctrl-shift-f9 并能够据此更改其行为。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T16:12:20.083

您可以尝试使用`onkey`：

```
Sub TrackKeys()
   Application.OnKey "+{F9}", "Recalculate" 
End Sub

'in your sub you can call the calculations mode to be changed.
Sub Recalculate()
   Sheet1(1).Range("A2:E5").Calculate
End Sub 
```

找到链接：试试这个以获得更好的解释:)

[http://support.microsoft.com/kb/919127](http://support.microsoft.com/kb/919127)

# c# - 我被 async/await 宠坏了！现在正在为明确的任务延续而苦苦挣扎

> ID：14402773
> 
> 赞同：9
> 
> 时间：2013-01-18T16:02:32.293
> 
> 标签：c#, multithreading, xamarin.android, task-parallel-library, async-await

**编辑（接受后）**

这可能不会立即显而易见，但@Servy 的答案是正确的，不需要`Unwrap`在 monodroid 下的自定义实现 - 在我的评论中我说它不存在，但它确实存在。

**结束编辑**

我正在编写一堆使用我们的 RESTful Web 服务的应用程序，尽管我认为我知道如何正确使用任务，但事实证明我不知道。场景是我为 Windows Store 实现了代码 - 使用`async/await`并且我需要为 MonoDroid 实现几乎相同的东西 - 它没有（没有一些我不想使用的构建黑客）。

我已经将这个问题的问题归结为一组简单的任务，用于异步获取整数，然后，在继续中，触发另一个异步任务，该任务将转换从该整数构建的字符串。在 C#5 中，这将是：

*注意 - 当然我在`Task.FromResult<T>`这里使用的是实际的异步代码*

```
private async Task<string> GetStringAsync()
{
    return await GetStringFromIntAsync(await GetIntAsync());
}

private async Task<int> GetIntAsync()
{
    return await Task.FromResult(10);
}

private async Task<string> GetStringFromIntAsync(int value)
{
    return await Task.FromResult(value.ToString());
} 
```

要将其转换为基于延续的模式，我尝试了以下操作：

```
private Task<string> GetStringAsync()
{
    //error on this line
    return GetIntAsync().ContinueWith(t => GetStringFromIntAsync(t.Result));
}

private Task<int> GetIntAsync()
{
    return Task.FromResult(10);
}

private Task<string> GetStringFromIntAsync(int value)
{
    return Task.FromResult(value.ToString());
} 
```

但是，这是不正确的，因为该`GetStringFromIntAsync`方法返回的`Task<string>`意思是延续最终返回 a`Task<Task<string>>`而不是 a `Task<string>`。

我发现明确等待该`GetStringFromIntAsync`方法确实有效，但是：

```
private Task<string> GetStringAsync()
{
    return GetIntAsync().ContinueWith(t =>
    {
        var nested = GetStringFromIntAsync(t.Result);
        nested.Wait();
        return nested.Result;
    });
} 
```

但是，问题是-这是正确的方法-我不能返回调用者然后等待的某种延续吗？

我已经使用了很多任务 - 但不是像这样将不同类型的任务链接在一起（当然除了`async`/之外`await`） - 感觉有点像我在这里发疯 - 所以非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-18T16:07:48.437

因此，首先，即使您有 async/await，您也应该执行第二个和第三个实现的非 async/await 实现。使用它只会增加一些不必要的开销。

至于第一种情况，不，你不想使用`Wait`. 这将阻塞线程而不是允许它返回到池中。您只需要解开任务并获取它的内部任务。您可以使用该`Unwrap`方法来做到这一点：

```
private Task<string> GetStringAsync()
{
    return GetIntAsync()
        .ContinueWith(t => GetStringFromIntAsync(t.Result))
        .Unwrap();
} 
```

如果您没有可用的`Unwrap`功能，可以使用以下功能。

```
public static Task<T> Unwrap<T>(this Task<Task<T>> task)
{
    var tcs = new TaskCompletionSource<T>();

    task.ContinueWith(t =>
    {
        t.Result.ContinueWith(innerT => tcs.SetResult(innerT.Result)
            , TaskContinuationOptions.OnlyOnRanToCompletion);
        t.Result.ContinueWith(innerT => tcs.SetCanceled()
            , TaskContinuationOptions.OnlyOnCanceled);
        t.Result.ContinueWith(innerT => tcs.SetException(innerT.Exception.InnerExceptions)
            , TaskContinuationOptions.OnlyOnRanToCompletion);
    }
        , TaskContinuationOptions.OnlyOnRanToCompletion);
    task.ContinueWith(t => tcs.SetCanceled()
        , TaskContinuationOptions.OnlyOnCanceled);
    task.ContinueWith(t => tcs.SetException(t.Exception.InnerExceptions)
        , TaskContinuationOptions.OnlyOnFaulted);

    return tcs.Task;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T12:18:00.990

对于完全支持的方法，最好等待 MonoDroid 的官方异步/等待支持 - Xamarin 表示这“即将推出” - 今年上半年。

然而，如果你感觉更冒险......那么至少有几个人已经设法让 async/await 在 MonoDroid 中工作：

*   使用“全单声道” - [http://fizzylogic.nl/2012/05/04/adding-asyncawait-support-to-your-mono-for-android-projects/](http://fizzylogic.nl/2012/05/04/adding-asyncawait-support-to-your-mono-for-android-projects/)
*   使用“Microsoft BCL” - 请参阅 Daniel Plaisted 在 BUILD 上的演讲中的 twittersearch 示例和代码[http://channel9.msdn.com/Events/Build/2012/3-004](http://channel9.msdn.com/Events/Build/2012/3-004)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-18T16:10:25.937

这就是我在 .net 4.0（VS 2010）中处理异步任务所做的工作。有人说你不需要打电话`task.Wait();`，其他人说，是的，你确实需要打电话`task.Wait();`我认为区别在于 task.Wait() 是否隐含/封装在`task.Result`属性中。

我坚持使用更明确的调用方法`task.Wait();`。

这将阻塞直到调用完成，但如果您不使用 4.5，我不确定还有哪些其他选项可用。

# neon - 编译 Qt 嵌入式熊猫板时出错：[.moc/release-shared-emb-arm/moc_qabstractanimation.cpp] 错误 1

> ID：14402774
> 
> 赞同：0
> 
> 时间：2013-01-18T16:02:40.900
> 
> 标签：neon, armv7, qtembedded, pandaboard

我正在尝试为熊猫板（OMAP4、4430）编译 Qt 嵌入式。我为 armv7 安装了这个交叉编译器：

```
sudo apt-get install g++-4.6-arm-linux-gnueabihf 
```

我下载了最后一个 qt-embedded 源并将它们解压缩到文件夹中：

*/opt/qt-everywhere-opensource-src-4.6.4*

我复制了配置文件：

```
cp -r mkspecs/qws/linux-arm-gnueabi-g++ mkspecs/qws/linux-arm-gnueabihf-g++ 
```

我修改了 mkspecs/qws/linux-arm-gnueabihf-g++/qmake.conf 如下：

```
include(../../common/g++.conf)
include(../../common/linux.conf)
include(../../common/qws.conf)

#Compiler Flags to take advantage of the ARM architecture
#N.B.:I also tried to uncomment the two following instructions with no success   
QMAKE_CFLAGS = -march=armv7-a -mtune=cortex-a8 -mfpu=neon -mfloat-abi=softfp
QMAKE_CXXFLAGS = -march=armv7-a -mtune=cortex-a8 -mfpu=neon -mfloat-abi=softfp

# modifications to g++.conf
QMAKE_CC                = arm-linux-gnueabihf-gcc-4.6
QMAKE_CXX               = arm-linux-gnueabihf-g++-4.6
QMAKE_LINK              = arm-linux-gnueabihf-g++-4.6
QMAKE_LINK_SHLIB        = arm-linux-gnueabihf-g++-4.6

# modifications to linux.conf
QMAKE_AR                = arm-linux-gnueabihf-ar cqs
QMAKE_OBJCOPY           = arm-linux-gnueabihf-objcopy
QMAKE_STRIP             = arm-linux-gnueabihf-strip

load(qt_config) 
```

我运行了配置：

```
./configure -embedded arm -little-endian -no-qt3support -nomake examples -nomake demos -opensource -confirm-license -xplatform qws/linux-arm-gnueabihf-g++ 
```

但是，使用 make 命令编译当然会失败：

```
make[1]: Entering directory `/opt/qt-everywhere-opensource-src-4.6.4/src/corelib'
/opt/qt-everywhere-opensource-src-4.6.4/bin/moc -DQT_SHARED -DQT_BUILD_CORE_LIB -DQT_NO_USING_NAMESPACE -DQT_NO_CAST_TO_ASCII -DQT_ASCII_CAST_WARNINGS -DQT_MOC_COMPAT -DHB_EXPORT=Q_CORE_EXPORT -DQT_NO_DEBUG -D_LARGEFILE64_SOURCE -D_LARGEFILE_SOURCE -I../../mkspecs/qws/linux-arm-gnueabihf-g++ -I. -I../../include -I../../include/QtCore -I.rcc/release-shared-emb-arm -Iglobal -I../3rdparty/zlib -I../3rdparty/harfbuzz/src -I../3rdparty/md5 -I../3rdparty/md4 -I.moc/release-shared-emb-arm animation/qabstractanimation.h -o .moc/release-shared-emb-arm/moc_qabstractanimation.cpp
moc: Cannot create .moc/release-shared-emb-arm/moc_qabstractanimation.cpp
make[1]: *** [.moc/release-shared-emb-arm/moc_qabstractanimation.cpp] Error 1
make[1]: Leaving directory `/opt/qt-everywhere-opensource-src-4.6.4/src/corelib'
make: *** [sub-corelib-make_default-ordered] Error 2 
```

怎么了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T08:33:12.920

对不起，我找到了答案，我已经忘记发布它。该问题与不正确的 moc 安装有关。我已经拥有所有“root”权限。感谢大家的支持

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T17:04:21.183

做它作为“根”。好像您没有创建文件的权限。

# c# - 是否有任何库具有方便的扩展方法，可以将泛型与旧的 .net 库一起使用？

> ID：14402776
> 
> 赞同：5
> 
> 时间：2013-01-18T16:02:50.240
> 
> 标签：c#, .net, winforms, generics, extension-methods

在为 Winforms 编写代码时，我一直不得不强制转换所有内容以获得通用的 IEnumerable。

```
resultsListView
    .SelectedIndices
    .Cast<int>()
    .ToArray();

treeView1.Nodes.Cast<TreeView>().Where...

var items = listView1.Items.Cast<ListView>(); 
```

现在，如果我像上面那样犯了一个错字，在代码运行之前我不会注意到。（即它是动态类型的。）

为了解决这个问题，我编写了一些实用程序扩展方法，如下所示：

```
resultsListView
    .SelectedIndices
    .AsEnumerable()
    .ToArray();

treeView1.Nodes.AsEnumerable().Where...

var items = listView1.Items.AsEnumerable(); 
```

扩展方法示例：

```
public static IEnumerable<TreeNode> AsEnumerable(this TreeNodeCollection source)
{
    return source.Cast<TreeNode>();
} 
```

现在，我刚刚在这里和那里编写了一个方法，并且.NET 库中有很多类，所以我希望某个好心人已经这样做了？那么怎么样呢？

是否有任何库具有方便的扩展方法，可以将泛型与旧的 .net 库一起使用？

## 编辑：

实际上，为了利用类已经提供的静态类型（通常），这就是我*真正*编写它们的方式：

```
 public static IEnumerable<TreeNode> AsEnumerable(this TreeNodeCollection source)
    {
        AssertTypesMatch(source, (s) => s.AsEnumerable(), (s) => s[0]);
        return source.Cast<TreeNode>();
    }

    public static IEnumerable<ListViewItem> AsEnumerable(this ListView.ListViewItemCollection source)
    {
        AssertTypesMatch(source, (s) => s.AsEnumerable(), (s) => s[0]);
        return source.Cast<ListViewItem>();
    }

    [System.Diagnostics.Conditional("ALWAYZ__EXKLUDE_ME_")]
    private static void AssertTypesMatch<TSource, TItem>(TSource t1, Func<TSource, IEnumerable<TItem>> f2, Func<TSource, TItem> f1)
    {
    } 
```

# python-2.7 - wx.ListBox 选择事件

> ID：14402782
> 
> 赞同：0
> 
> 时间：2013-01-18T16:03:14.503
> 
> 标签：python-2.7, wxpython

我正在使用 wx.Python 在 MacOS 下开发 GUI。

让我抓狂的小部件是一个简单的 ListBox。这是实例

```
self.values = wx.ListBox(self, wx.ID_ANY, style = wx.LB_MULTIPLE|wx.LB_NEEDED_SB)
self.Bind(wx.EVT_LISTBOX, self.on_add_selection_values, self.values) 
```

问题是，当我执行多行选择（按住 shift 按钮时单击一次）时，它会生成多次 EVT_LISTBOX。

关于如何解决这个问题的想法？

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T16:11:47.840

```
 Hover over first item
  Depress left mouse button
  Drag across all itemms
  Release mouse button 
```

这是您选择项目的方式吗？（你提到 MAC，它似乎对如何使用鼠标有自己的奇怪想法）

如果是这样，我建议：

```
Ignore the wxEVT_COMMAND_LISTBOX_SELECTED event.
Handle the mouse button up event wxEVT_LEFT_UP by calling GetSelections() 
```

# php - 根据移动/桌面显示文本链接

> ID：14402784
> 
> 赞同：0
> 
> 时间：2013-01-18T16:03:16.053
> 
> 标签：php, if-statement

> **可能重复：**
> [检测移动设备的最简单方法](https://stackoverflow.com/questions/4117555/simplest-way-to-detect-a-mobile-device)

我不确定它是否像听起来那么简单，但我想得到以下信息：

目前我有一个表单，它输入一个起始地址，然后使用到定义的结束地址的行车路线将用户引导到谷歌地图（它工作正常）。

我想做的是插入一个非常简单的轻量级'if'语句，基本上说'如果设备是移动设备，则显示指向另一个页面的文本链接。如果还有其他问题，请出示表格'。

这听起来很简单吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T16:13:42.627

确实没有一种“简单”的方法可以检测移动或桌面浏览器。有一些简单的方法适用于大多数但不是所有情况，并且有一些类和脚本可以为您简化它，但在后端非常（必然）复杂。该网站为您提供了各种不同编程语言的相当简化的版本 - [http://detectmobilebrowsers.com/](http://detectmobilebrowsers.com/)。

# php - 表单提交后出现在页面顶部的文本框中的文本

> ID：14402788
> 
> 赞同：0
> 
> 时间：2013-01-18T16:03:30.040
> 
> 标签：php

谢谢你们帮助我。我有另一个问题。在我之前的问题中，我询问了如何在表单提交后使文本框消息显示在页面顶部。感谢你们，我设法做到了。下一个问题是如何使这种情况发生至少 8 倍？

```
 <?php

 include('header1.php');

 if(isset($_POST['submit']) && $_POST['submit']=='Submit'){
 message=$_POST['message'];
$name=$_POST["name"];
echo "<center>";
echo "<div>" . $name . "<br />" . $message ."</div>"; 
echo "</center>";

    if(isset($_POST['submit']) && isset($_POST['prevmsg']) &&      isset($_POST['prevname'])){

    echo "<center>";
    echo $_POST['prevname'];
    echo "<br/>";
    echo $_POST['prevmsg'];
    echo "</center>";   
 }

 ?>

<html>
<head>
</head>
<body style="position:center">
<form method="POST" action="<?=$_SERVER["PHP_SELF"]?>">

        <table>
                    <tr>
                        <th>
                            <label for="name">Name</label>
                        </th>
                        <td>
                            <input type="text" name="name" id="name">
                        </td>
                    </tr>

    <input type="hidden" name="prevname" value="<?=$name?>"/>

                    <tr>
                        <th>
                            <label for="message">Message</label>
                        </th>
                        <td>
                            <textarea name="message" id="message"></textarea>
                        </td>
                    </tr>    
    <input type="hidden" name="prevmsg" value="<?=$message?>"/>

        </table>
<input type="submit" name="submit" value="Submit"/>

 </form>
  </body>
 </html>

  <?php

   } else {  

   ?>

  <html>

  <head>  

  </head>

  <body>
  <form method="POST" action="<?=$_SERVER["PHP_SELF"]?>">

        <table>
                    <tr>
                        <th>
                            <label for="name">Name</label>
                        </th>
                        <td>
                            <input type="text" name="name" id="name">
                        </td>
                    </tr>

                    <tr>
                        <th>
                            <label for="message">Message</label>
                        </th>
                        <td>
                            <textarea name="message" id="message"></textarea>
                     </td>
                    </tr>
        </table>
                     <input type="submit" name="submit" value="Submit"/>

 </form>
 </body>
 </html>

 <?php } 
include('inc/footer.php');
 ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T16:16:04.273

您可以使用`for`循环。我还清理了您的代码，因为您有一些语法错误。由于您正在重用表单，因此您可能希望将其设为函数。

```
<?php

  include('header1.php');

  function myForm( $name, $message ) {
?>
<form method="POST" action="<?php echo $_SERVER["PHP_SELF"]; ?>">
<input type="hidden" name="prevmsg" value="<?php echo $message; ?>" />
<input type="hidden" name="prevname" value="<?php echo $name; ?>" />
<table>
  <tr>
    <th><label for="name">Name</label></th>
    <td><input type="text" name="name" id="name"></td>
 </tr>
  <tr>
    <th><label for="message">Message</label></th>
    <td><textarea name="message" id="message"></textarea></td>
 </tr>
</table>
<input type="submit" name="submit" value="Submit" />
</form>
<?php

  }

  if( isset($_POST['submit']) && $_POST['submit'] == 'Submit' ) {
    $message = $_POST['message'];
    $name = $_POST["name"];

    for($i = 0; $i < 8; $i++) {
    echo "<center>";
    echo "<div>" . $name . "<br />" . $message ."</div>"; 
    echo "</center>";
    }

    if( isset($_POST['submit']) && isset($_POST['prevmsg']) && isset($_POST['prevname']) ) {
    echo "<center>";
    echo $_POST['prevname'];
    echo "<br/>";
    echo $_POST['prevmsg'];
    echo "</center>";   
    }

?>

<html>
<body style="position:center">
<?php myForm( $name, $message ); ?>
</body>
</html>

<?php

    }
    else {  

   ?>
<html>
<body>
<?php myForm( NULL, NULL ); ?>
</body>
</html>
<?php

    }

  include('inc/footer.php');
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T16:16:56.813

那么首先`message=$_POST['message'];`应该是`$message=$_POST['message'];`。如果你想让某件事发生 8 倍，只需将其包装在 for 循环中即可。

```
for($i=0;$i<8;$i++)
{
//code to loop here
} 
```

# visual-studio-2010 - IE 8 在附加到 VS2010 与服务器上的应用程序时表现不同

> ID：14402792
> 
> 赞同：0
> 
> 时间：2013-01-18T16:03:38.580
> 
> 标签：visual-studio-2010, internet-explorer

在 Server 2008 上使用 IE 8/VS 2010/IIS

在我的本地 VS2010 实例中开发 Web 应用程序，测试一切都“按预期”执行；部署到服务器；测试（也来自使用“相同”IE 8 的同一台本地机器）

收到客户端错误：“错误：'JSON' 未定义”，引用 JS 文件和以下行：

```
function getOrderData() {
$.ajax({
    type: "POST",
    url: "order.aspx/GetOrderData",
    data: JSON.stringify({ "OrderID": $(".hdnOrdID").val() }),
    contentType: "application/json; charset=utf-8",
    dataType: "json",
    success: showDefaultOrderData,
    error: showErrorMessage
}); 
```

我相信错误消息是引用调用`"JSON.stringify({....`（但可能是错误的......）

应用程序在 FireFox 中按预期执行。

因此，当从 VS2010 启动以及对服务器使用 FireFox 时，我的应用程序在 IE8 中按预期工作。但是 IE 只有在调用服务器时才会给我一个客户端 (js) 错误。

在这些情况下，什么会使 JSON 引用对 IE 不可用？[或者，我在这里错过了什么？]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T16:25:26.247

尝试将 IE8 退出兼容模式。

此外，取消选中工具下的“以兼容模式显示 Intranet 站点”设置（由 OP 推荐）

# java - Java 包装器和字符串的对象池

> ID：14402794
> 
> 赞同：7
> 
> 时间：2013-01-18T16:03:47.980
> 
> 标签：java

众所周知，Java 有时将对象池用于包装器和字符串类型，有时则不会。

例如：

```
Integer i1 = 1;
Integer i2 = 1;
Integer i3 = new Integer(1);
String s1 = "String";
String s2 = "String";
String s3 = new String ("String");
System.out.println("(i1 == i2) " + (i1 == i2));
System.out.println("(i2 == i3) " + (i2 == i3));
System.out.println("(s1 == s2) " + (s1 == s2));
System.out.println("(s2 == s3) " + (s2 == s3));

Execution result:

(i1 == i2) true
(i2 == i3) false
(s1 == s2) true
(s2 == s3) false 
```

正如您所见，原语装箱从池中获取对象，通过字符串文字创建字符串也从池中获取对象。这样的对象实际上是同一个对象（**operator ==**返回 true ）。

创建包装器和字符串的其他机制不会从池中获取对象。以这些方式创建的对象实际上是不同的对象（运算符**==**在它们上返回 false）。

让我感到困惑的是游泳池被部分使用的事实。

如果是内存问题，为什么不一直使用池？如果它不是内存问题 - 为什么要使用它？

问题是 - 实现这种行为的原因是什么（= 池的部分使用）？

这个问题相当理论化，但它有实际应用——它可以帮助理解如何正确使用自定义对象池，当然理解 Java 的工作原理总是好的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-18T16:14:40.517

> 如果是内存问题，为什么不一直使用池？

始终池化所有内容比有时会失败的简单缓存更昂贵：您需要更复杂的数据结构（池化小整数可以使用简单的小数组完成）和算法，并且您必须始终进行检查，即使当游泳池帮不了你。此外，您将汇集许多不再需要的对象，这是对内存的浪费：您需要更多（无用的）缓存条目，并且您需要管理该缓存（或使无用的对象保持活动状态）。

> 如果它不是内存问题 - 为什么要使用它？

这*是*一个内存问题。这种优化节省了大量内存。池化*每个*对象并不一定会减少内存使用，因为并非每个对象都被大量使用。这是一个权衡。所采取的方法为一些常见用例节省了大量内存，而不会过度减慢其他操作或浪费大量内存。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-18T16:10:01.013

有各种考虑。例如内存使用，还有语言语义。

```
 new Integer(1); 
```

是一个显式的对象创建。用“从池中获取”运算符替换它会改变语言语义。

```
 Integer.valueOf(1) 
```

是明确的“从池中获取，如果在池范围内”。请注意，池是静态的，并且是用 Java 实现的，而不是在虚拟机中实现的。你可以查一下：`java.lang.Integer$IntegerCache`. 我认为 Java 规范说从`int`to的转换`Integer`是通过插入`Integer.valueOf`调用来进行的。

现在，如果您查看此缓存是如何实现的，您会注意到缓存大小有一个用户可调参数。默认情况下，这个缓存只包含一个`Integer[256]`保存预初始化副本的数组`-128..127`（即一个字节的值范围）。显然，这个值范围为常见用途提供了最佳的性能/内存折衷。

有关更多详细信息，请参见例如[http://martykopka.blogspot.de/2010/07/all-about-java-integer-cache.html](http://martykopka.blogspot.de/2010/07/all-about-java-integer-cache.html)。

如果您花一些时间在 Java 中进行数值计算，您*确实*会感受到自动装箱的负面影响。对于高性能数字，第一条经验法则是避免任何类型的自动装箱。例如，GNU Trove 为原始类型提供了 hashmap 和类似结构，运行时和内存的好处是巨大的。

一个`Integer`对象占用 16 个字节的内存 - 是`int`. 例如，上面的缓存占用大约 5kb 的内存。这是大多数应用程序都愿意浪费的东西。但显然，你不能对所有整数都这样做！

至于字符串，编译器需要将它们适当地存储在类文件中。那么如何将字符串存储在类文件中呢？最简单的方法是将代码重写为如下所示：

```
private static final char[] chars_12345 = new char[]{ 't', 'e', 's', 't'};

private static final String CONST_STRING_12345 = new String(chars_12345); 
```

它不依赖于任何`String`类型的魔法处理。它只是一个包装的原语数组。当然，您希望每个类只存储每个唯一字符串一次，以减少类大小，从而减少加载时间。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-18T16:10:17.187

这是一个速度问题，`Integer`每次分配一个新的都会耗费时间和内存。但出于同样的原因，在启动时分配过多会占用大量内存和时间。

可悲的是，它会导致您发现一些违反直觉的行为。

结果就是我们有这种奇怪的妥协。Java 标准中讨论了这种行为的原因。(5.7)

> 如果被装箱的值 p 是真、假、一个字节、一个在 \u0000 到 \u007f 范围内的字符，或者一个介于 -128 和 127 之间的 int 或短数字，则令 r1 和 r2 为任意两次装箱转换的结果p。r1 == r2 总是如此。理想情况下，对给定的原始值 p 进行装箱将始终产生相同的参考。在实践中，使用现有的实现技术这可能是不可行的。上述规则是一种务实的妥协。上面的最后一个条款要求某些常见的值总是被装箱到无法区分的对象中。实现可能会懒惰地或急切地缓存这些。
> 
> 对于其他值，此公式不允许程序员对装箱值的身份进行任何假设。这将允许（但不要求）共享部分或全部这些引用。
> 
> 这确保了在最常见的情况下，行为将是期望的行为，而不会造成过度的性能损失，尤其是在小型设备上。例如，内存限制较少的实现可能会缓存所有字符和短整数，以及 -32K - +32K 范围内的整数和长整数。

**tl;博士**

让它完美运行是不可能的，根本不让它运行也太奇怪了。所以我们让它在“大部分”时间里工作。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-18T16:11:00.230

这是内存和速度的问题。您真的不想在 JVM 启动时创建 40 亿个 Integer 对象，因为大多数时候它们永远不会被使用。

对于字符串，还存在在实习池中查找匹配字符串的问题。

源代码中的字符串文字很容易，因为编译器可以找到并安排实习它们，但如果我在运行时动态创建一个字符串，JVM 将不得不遍历池并搜索每个字符串以查看它是否匹配并且可以重用并且字符串可以

虽然有一些数据结构可以帮助加快速度，但创建新对象通常更简单、更快捷。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-18T16:11:04.593

看，下面的代码段：

```
Integer i1=1;
Integer i2=2;
String s1="String";
String s2="String"; 
```

,只是引用而不是对象，它们的展位被分配了`i1`对象。同样的方式，只是引用而不是对象，它们的展位被分配了对象。`i2``1``s1``s2``"String"`

而在以下代码中：

```
Integer i3=new Integer(1);
String s3=new String("String"); 
```

操作员`new`创建一个. `new` `Object`希望我清除了你。

# opengl - 使用 glewInit 正确初始化 GLEW？

> ID：14402801
> 
> 赞同：0
> 
> 时间：2013-01-18T16:04:12.427
> 
> 标签：opengl, glew

在我的软件中，我正在生成一个虚拟窗口以查询 Windows 的各种像素格式，然后销毁该窗口，然后在选择适当的格式后创建一个新窗口。

初始化第一个窗口后，我使用 glewInit() 初始化 glew 以使用 wglChoosePixelFormatARB 函数。尽管在销毁虚拟窗口后，扩展继续运行，但我知道这在技术上并不“正确”，因为理论上两个窗口可能有两组不同的函数指针。因此，我想在创建第二个窗口后再次初始化 glew。

当我这样做时，我会从普通函数中得到错误，例如：

```
GLint viewport[4];

::glGetIntegerv(GL_VIEWPORT, viewport); 
```

, glError 为 1280 - 虽然奇怪的是，当我检查视口时，它似乎包含正确的值（我正在查看 glGetError() 以查看上一个命令是否导致错误）。

所以，我的问题是：使用 Windows 所需的两种状态 OpenGL 初始化（创建虚拟窗口、初始化扩展、使用扩展、销毁虚拟窗口、创建实际窗口），当新的window 是当前上下文吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T19:28:42.393

我建议您仅在创建主窗口后才销毁虚拟窗口/上下文。此外，正如 Slicedpan 已经建议的那样，您只需要一个完整的扩展功能，所以我会手动加载它们而不依赖 GLEW。您还确定，您对 glewInit() 的第二次调用是在您创建正确的 OpenGL 上下文并在*即将*使用 GLEW 函数的线程上成为当前的之后？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T18:20:46.130

您可以首先检索 wglChoosePixelFormatARB 的函数指针（我认为使用 wglGetProcAddress），然后在创建第二个窗口后初始化 glew。

# windows-xp - c#多个应用实例只连接一个USB串口设备

> ID：14402805
> 
> 赞同：1
> 
> 时间：2013-01-18T16:04:29.090
> 
> 标签：windows-xp, serial-port, usb

这是我的一个全新的，我会感谢任何和所有的建议。我得到了最后一分钟的功能要求，即必须允许我们的核心应用程序的多个实例与一个且仅一个 USB 串行端口设备通信（我们使用销售点信用卡读卡器/签名捕获 POS SigCap 设备。）

谁能解释一下如何在 C# 中处理这个问题？我们目前使用**Ingenico dll**与设备通信，打开第二个应用程序将导致 POS SigCap 由于线路和设备本身的冲突而无法打开。

**由于Windows XP**机器上串行端口硬件的性质，我不认为这是可能的，但您的输入很有价值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T16:10:12.723

你不能多次连接到一个串口！

但是您可以制作一个处理该问题的“服务器”。因此，您有一个应用程序连接到串行端口并与之通信，而其他应用程序则与该“服务器”通信。不过，这可能会导致一些错误，具体取决于设备的工作原理。

我认为这是唯一的方法。

编辑：我只是搜索了一下，发现这个软件可以做类似的事情： [http](http://www.eltima.com/products/serialsplitter/) ://www.eltima.com/products/serialsplitter/ 也许可以帮助你

# jquery - 多类别下拉菜单

> ID：14402806
> 
> 赞同：0
> 
> 时间：2013-01-18T16:04:41.490
> 
> 标签：jquery, html, css, menu

我正在尝试创建这样的类别[菜单](http://www.flipkart.com/combo-samsung-galaxy-s-duos-s7562/p/itmdddbup6fn8mmy?pid=BUNDG7YUAKDVXCGA&ref=2f45ad87-c8e4-43b4-9e91-2bb19ad15837&icmpid=bestsell_hp_mobile_1&otracker=hp_main_mobiles_p_image)。

到目前为止，我已经创建了这个：http: [//jsfiddle.net/q5GcD/](http://jsfiddle.net/q5GcD/)

仅当我将鼠标移出 bigmenu div 时，才应关闭大菜单。

此外，我无法正确定位大菜单，使其与小菜单按钮重叠。

网页：

```
<div id="mydiv">Menu</div>
<div id="bigmenu">This is big menu</div> 
```

CSS：

```
#mydiv {
    position:absolute;
    top:10px;
    left:50px;
    height:50px;
    width:200px;
    background-color:#fff;
    border:1px solid black;
}
#bigmenu {
    position:absolute;
    top:10px;
    left:50x;
    height:500px;
    width:200px;
    background-color:orangered;
} 
```

脚本 ：

```
$(document).ready(function(){

    $('#bigmenu').css("display","none");
    $('#mydiv').hover(function(){
        $('#bigmenu').css("display","inline");

        },function(){
           $('#bigmenu').css("display","none");
            }

        );

}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T16:14:44.903

您不需要 javascript，您可以使用 CSS 仅使用`:hover` *动态伪类*来完成。

`#bigmenu`应该是 的孩子`#mydiv`，而不是兄弟姐妹，以使其保持活动状态，直到您退出`#bigmenu`（而不是仅退出`#mydiv`）。

你也不需要绝对位置。

**演示**：http: [//jsfiddle.net/q5GcD/1/](http://jsfiddle.net/q5GcD/1/)

HTML

```
<div id="mydiv">
   Menu
   <div id="bigmenu">
      This is big menu
   </div>
</div> 
```

CSS

```
#mydiv {
    min-height:50px;
    width:200px;
    background-color:#fff;
    border:1px solid black;
}

#mydiv:hover > #bigmenu{
    display: block;
}

#bigmenu {  
    display: none;
    height:500px;
    width:200px;
    background-color:orangered;
} 
```

这一行：

> #mydiv:hover > #bigmenu{

告诉浏览器在您悬停（鼠标悬停）它时，在带有 的元素的括号之间应用规则`id="bigmenu"`，即带有 的元素的子元素（带有`>`，[子选择器](http://www.w3.org/TR/CSS2/selector.html#child-selectors)） 。`id="myDiv"`

在兄弟的情况下，就像在您的原始 HTML 代码中一样，您应该使用`+`，即[Adjacent Sibling Selector](http://www.w3.org/TR/CSS2/selector.html#adjacent-selectors)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T16:15:03.133

这是你想要的？
[http://jsfiddle.net/q5GcD/2/](http://jsfiddle.net/q5GcD/2/)

您的 css 中有一个拼写错误，`50x`而不是`50px`，它负责对齐。

至于JS，用mouseenter和mouseleave代替hover

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T16:15:54.730

这实际上是一个列表菜单:)

```
<ul>
    <li><a href=''>Cat drop</a>
    <ul>
        <li>
            <a href=''>second drop</a>
        </li>
    </ul>
    </li>
</ul> 
```

快速CSS：

```
ul{
    list-style-type:none;
    padding:0px;
    margin:0px;
  }
ul >li {
    /* top style */
    background:#FF0000;
}
ul>li>ul{
    list-style-type:none;
    padding:0px;
    margin:0px;
    position:absolute;
    display:none;
    background:#00FF00;
}
ul>li:hover>ul{
   display:block;
} 
```

使用最后一个选择器，您将不需要任何 jQuery 或 javascript。这就是我认为他们正在使用的，但我可能是错的。我认为你仍然可以使用两者？不是100％确定那个。

# python - 使用 Python 有效地合并和减少多边形

> ID：14402810
> 
> 赞同：2
> 
> 时间：2013-01-18T16:04:54.840
> 
> 标签：python, google-maps, svg, geometry, polygon

什么是最有效的方法，最好是在 Python 中，将多个多边形合并和简化为等效形状但使用更少的多边形？

![多边形缩减](../Images/181090479c5a8ca1d2386d056f0019dc.png)

我正在尝试绘制由谷歌地图上的[美国人口普查数据](http://www2.census.gov/geo/tiger/TIGER2010/ZCTA5/2010/tl_2010_42_zcta510.zip)定义的邮政编码区域。使用 Django 出色的[GeoDjango](https://docs.djangoproject.com/en/dev/ref/contrib/gis/)框架和我对[django-census-places](https://github.com/chrisspen/django-census-places)应用程序进行的修改，我现在在我的数据库中有数千个 zip 和 lat/lng 向量来描述它们的区域。

我编写了一些基本的 Python 来导出矢量并渲染 Javascript 以在 Google 地图上绘制选定的 zip。然而，我遇到的问题是它非常慢，因为即使是一个邮政编码也可以包含数千个多边形。我可以将此输出预处理为 JSON 并将其缓存，但即便如此，浏览器也需要几分钟来加载所有三角形，其中大部分是多余的，因为我只对几个邮政编码的总体轮廓感兴趣。

请注意，此问题与[此](https://stackoverflow.com/questions/3386906/efficient-algorithms-to-merge-polygons)类似，但不相同。我不关心重叠的多边形，因为我相信没有重叠。

编辑：[这个](https://gis.stackexchange.com/questions/23365/combining-adjacent-polygons-sharing-a-similar-trait-into-1-polygon-arcgis)问题看起来也很相似。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T20:28:32.767

事实证明，GeoDjango 中的几个功能之一是全方位的布尔多边形运算符。我所要做的就是在我的每个 MultiPolygon 对象上调用 union() 以获取描述整个区域的 MultiPolygon。点数的减少是一个数量级。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T16:23:16.710

要合并多边形，我建议您需要执行[布尔**联合**操作](http://en.wikipedia.org/wiki/Boolean_operations_on_polygons)。我不确定您将如何在 Python 中执行此操作，但由于您还提到了 JavaScript，因此这里有我的 Clipper 库（用 Delphi、C++ 和 C# 编写）的出色 JavaScript[**翻译**](http://sourceforge.net/projects/jsclipper/)。

[**这里**](http://jsclipper.sourceforge.net/5.0.2.1/main_demo.html)还有一个在线演示，很好地展示了剪辑库的功能。

# cordova - JQuery 移动 $.post 未定义

> ID：14402815
> 
> 赞同：0
> 
> 时间：2013-01-18T16:05:07.240
> 
> 标签：cordova, jquery-mobile

我的函数返回未定义，我不确定如何找到我要查找的数据。

```
function getCustomerName(){

       var account = localStorage.getItem("account");

       $.post("http://127.0.0.1/getCustomer.php", {account:account}, function(data) {

              alert('Inside getCustomer' + ' ' + data);

       } ,"json");

} 
```

而 getCustomer.php 返回

```
{"nameCustomer":[{"Alarms":"0","Name":"Jane Doe"}]} 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T17:26:55.957

您的 JavaScript 实际上看起来不错。你在那里有一个回调函数。请记住，`datatype`参数指定从服务器返回的返回类型，而不是发送到服务器的参数类型。确保您的服务期望 JSON 作为参数。还要验证您对`account`表单 localStorage 的检索是否正确返回了有效值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T18:09:46.503

因为调用是异步的，所以当 getCustomerName 执行完成时，数据不会从服务器返回。getCustomerName 需要带一个回调函数：

```
function getCustomerName(onNameRetrieved){
   var account = localStorage.getItem("account");

   $.post("http://127.0.0.1/getCustomer.php", {account:account}, function(data) {
       onNameRetrieved(data) //or more likely something like onNameRetrieved(data['nameCustomer'][0]['name'];
   } ,"json");
} 
```

然后你调用 getCustomerName 像

```
getCustomerName(function (name) {
    alert('The actual name is ' + name);
}) 
```

# sql - 将多种格式的字符串转换为单一的标准格式

> ID：14402819
> 
> 赞同：2
> 
> 时间：2013-01-18T16:05:12.977
> 
> 标签：sql, sql-server, tsql

我使用从 SSRS 导入信息的存储过程更新表。我有一个称为页面的字段。页面字段可以包含以下三种格式之一：

1.  纯数字字段，例如 1,2 3 等。
2.  数字和字母组合，例如 1D、4C、7Z 等。
3.  一个数字、一个破折号和两个附加数字，例如 2-01、3-04、1-09 等

我需要为每种格式创建一个页面等效项以进行排序以及帮助定义页码的一般类别。示例 1 是基本页面，示例 2 是艺术页面，示例 3 是文本页面。

对于等价，示例 1 将产生 1.00 格式。示例 2 将根据字母的数字等效值得出 1.01 到 1.26 的等效值。最后，示例 3 将导致 1.26 加上 .01 * 破折号右侧的值。最小值为 1.27。

我已经在 Excel 中完成了此操作，但似乎无法在 SQL 中正确编写公式。

我正在使用 SQL Server 2008 R2

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T17:32:12.763

这似乎涵盖了您描述的情况：

```
declare @t table (val varchar(10))
insert into @t 
select '1' union select '2' union
select '1D' union select '4S' union
select '2-01' union select '1-09'

select val, case
    when val not like '%[^0-9]%' then val + '.00'
    when val like '[0-9][A-Z]' then '1.' + right('0' + convert(varchar, ascii(right(val, 1))-64), 2)
    when val like '%-%' then convert(varchar, 1.26 + (0.01 * cast(substring(val, charindex('-', val)+1, 2) as int)))
    else val end
from
    @t 
```

TSQL 不是用于字符串操作和解析的出色语言，因此您可能需要考虑为此使用 CLR 函数或存储过程。并且应用这些规则是单元测试的一个很好的候选，因为定义和使用输入和输出值的测试集来验证你的代码很简单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T09:11:55.633

这是另一种选择。

尽管此答案基于[Pondlife's](https://stackoverflow.com/a/14404388/297408)，但它返回`decimal`结果而不是字符串。

它大量使用隐式转换，这就是它看起来更紧凑的原因。

它还假设仅使用您的问题中提到的三种格式。如果有一个“无效”格式的值，它将破坏这个解决方案。

```
SELECT
  CASE
    WHEN PageNo NOT LIKE '%[^0-9]%' THEN PageNo
    WHEN PageNo     LIKE '%[A-Z]'   THEN LEFT(PageNo, LEN(PageNo) - 1)
                                         + (ASCII(RIGHT(PageNo, 1)) - 64) * 0.01
    WHEN PageNo     LIKE '%-%'      THEN REPLACE(PageNo, '-', '.') * 1.0 + 0.26
  END
FROM ... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T16:50:33.543

这很丑陋，可能性能不是很好，但是：

```
select
  page_num,
  case
    when page_num like '%A' then substring(page_num, 1, len(page_num)-1) + '.01'
    when page_num like '%B' then substring(page_num, 1, len(page_num)-1) + '.02'
    when page_num like '%C' then substring(page_num, 1, len(page_num)-1) + '.03'
    when page_num like '%D' then substring(page_num, 1, len(page_num)-1) + '.04'
    when page_num like '%E' then substring(page_num, 1, len(page_num)-1) + '.05'
    when page_num like '%F' then substring(page_num, 1, len(page_num)-1) + '.06'
    when page_num like '%G' then substring(page_num, 1, len(page_num)-1) + '.07'
    when page_num like '%H' then substring(page_num, 1, len(page_num)-1) + '.08'
    when page_num like '%I' then substring(page_num, 1, len(page_num)-1) + '.09'
    when page_num like '%J' then substring(page_num, 1, len(page_num)-1) + '.10'
    when page_num like '%K' then substring(page_num, 1, len(page_num)-1) + '.11'
    when page_num like '%L' then substring(page_num, 1, len(page_num)-1) + '.12'
    when page_num like '%M' then substring(page_num, 1, len(page_num)-1) + '.13'
    when page_num like '%N' then substring(page_num, 1, len(page_num)-1) + '.14'
    when page_num like '%O' then substring(page_num, 1, len(page_num)-1) + '.15'
    when page_num like '%P' then substring(page_num, 1, len(page_num)-1) + '.16'
    when page_num like '%Q' then substring(page_num, 1, len(page_num)-1) + '.17'
    when page_num like '%R' then substring(page_num, 1, len(page_num)-1) + '.18'
    when page_num like '%S' then substring(page_num, 1, len(page_num)-1) + '.19'
    when page_num like '%T' then substring(page_num, 1, len(page_num)-1) + '.20'
    when page_num like '%U' then substring(page_num, 1, len(page_num)-1) + '.21'
    when page_num like '%V' then substring(page_num, 1, len(page_num)-1) + '.22'
    when page_num like '%W' then substring(page_num, 1, len(page_num)-1) + '.23'
    when page_num like '%X' then substring(page_num, 1, len(page_num)-1) + '.24'
    when page_num like '%Y' then substring(page_num, 1, len(page_num)-1) + '.25'
    when page_num like '%Z' then substring(page_num, 1, len(page_num)-1) + '.26'
    when page_num like '%-%' then 
      substring(page_num, 1, charindex('-', page_num)-1) + '.' + 
      cast((26+cast(substring(page_num, charindex('-', page_num)+1, len(page_num)) as int)) as varchar(12))                                                                                                          
    else page_num + '.00'
  end
from pages 
```

有关我正在测试的完整架构，请参阅[SQL Fiddle 。](http://sqlfiddle.com/#!3/1f968/23)

也就是说，我强烈建议将您的架构更新为包含规范化页码的内容，并在将其转换为表格的过程中。

# actionscript-3 - 模型应该通过 ViewMediator 与 View 通信。Vo（Model的一部分）可以直接通信吗

> ID：14402820
> 
> 赞同：0
> 
> 时间：2013-01-18T16:05:14.500
> 
> 标签：actionscript-3, model-view-controller

我通常将 VO 的引用保存在相关视图中。将 Vo 引用保留在相关视图中，有助于直接分配更改。我怀疑是否将 Vo 引用保留在 View 中，这是一件正确的事情，并且符合 MVC 的原则（我使用 robotlegs）。因为根据 mvc，模型应该通过视图中介来传达视图。而 Vos 与模型有关。

那么什么是正确的方法。当 View 发生变化时，VO 应该如何更新？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T16:59:41.940

如果您必须对 MVC 采取文字方法，则 ValueObjects 应该是不可变的 - 值在分配后不会改变。如果您将 VO 视为数据的可变部分，那么它应该在模型中。但是，如果您将它们用作对值的引用，则可能需要将它们保存在您的应用程序范围内可用的地方。如果那需要是视图，那么你把它放在那里。

基本上，看看你是如何使用它们的，以及它如何适用于你正在做的事情，然后选择一种适合你的方法。只要你是一致的，它是否遵循“规则”真的不重要。此外，就我而言，它们只是指导方针。

# c# - 为什么这些选项卡似乎共享同一个文本框？

> ID：14402821
> 
> 赞同：0
> 
> 时间：2013-01-18T16:05:14.877
> 
> 标签：c#

我在 xaml 中定义了我的 UI，下面是我的代码：

```
<TabControl HorizontalAlignment="Left" Height="330" VerticalAlignment="Top" Width="764" Margin="10,10,0,0" ItemsSource="{Binding AllTabs}" SelectedItem="{Binding SelectedTab}">
        <TabControl.ItemContainerStyle>
            <Style TargetType="TabItem">
                <Setter Property="Header" Value="{Binding Header}"/>
                <Setter Property="Content">
                    <Setter.Value>
                        <Grid>
                            <TextBox Text="{Binding Text}" FontSize="16" AcceptsReturn="True" HorizontalAlignment="Stretch" VerticalAlignment="Stretch">
                            </TextBox>
                        </Grid>
                    </Setter.Value>
                </Setter>
                <Setter Property="FontSize" Value="20"/>
            </Style>
        </TabControl.ItemContainerStyle>
    </TabControl> 
```

当我运行我的程序时。我可以毫无问题地添加许多标签。标题是不同的，但是每当我更改其中一个选项卡中文本框的内容时，其他选项卡中的所有文本框都更改为相同的内容（似乎它们都共享相同的文本框，或者绑定到相同的源，这很奇怪） .

我在定义 UI 时犯了错误吗？请帮助我，并提前感谢。

这是我的模型，非常简单：

```
using System;
using System.Collections.ObjectModel;
using System.ComponentModel;

namespace MyHomework__MVVM_
{
    class MyHomeworkModel : INotifyPropertyChanged
    {
        private string header, text;
        public event PropertyChangedEventHandler PropertyChanged;

        public string Header
        {
            get
            {
                return header;
            }
            set
            {
                header = value;
                OnPropertyChanged("Header");
            }
        }

        public string Text
        {
            get
            {
                return text;
            }
            set
            {
                text = value;
                OnPropertyChanged("Text");
            }
        }

        private void OnPropertyChanged(string propertyName)
        {
            if (PropertyChanged != null)
            {
                PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
            }
        }
    }
} 
```

还有我的视图模型，它仍然非常简单：

```
using MyHomework;
using System.Collections.ObjectModel;
using System.ComponentModel;
using System.Windows.Input;

namespace MyHomework__MVVM_
{
    class MyHomeworkViewModel : INotifyPropertyChanged
    {
        private ObservableCollection<MyHomeworkModel> allTabs;
        private MyHomeworkModel selectedTab;
        public event PropertyChangedEventHandler PropertyChanged;

        public MyHomeworkViewModel()
        {
            allTabs = new ObservableCollection<MyHomeworkModel>();
            selectedTab = new MyHomeworkModel();
            AddCourseCommand = new AddCourseCommand(this);
        }

        public ObservableCollection<MyHomeworkModel> AllTabs
        {
            get
            {
                return allTabs;
            }
            set
            {
                allTabs = value;
                OnPropertyChanged("AllTabs");
            }
        }

        public MyHomeworkModel SelectedTab
        {
            get
            {
                return selectedTab;
            }
            set
            {
                selectedTab = value;
                OnPropertyChanged("SelectedTab");
            }
        }

        public ICommand AddCourseCommand
        {
            get;
            private set;
        }

        public void AddNewTab()
        {
            NewCourseName ncn = new NewCourseName();
            ncn.ShowDialog();
            if (ncn.courseName != null)
            {
                MyHomeworkModel newTab = new MyHomeworkModel();
                newTab.Header = ncn.courseName;
                newTab.Text = ncn.courseName;
                AllTabs.Add(newTab);
                SelectedTab = newTab;
            }
        }

        private void OnPropertyChanged(string propertyName)
        {
            if (PropertyChanged != null)
            {
                PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
            }
        }
    }
} 
```

编辑：刚刚注意到我收到了这条消息：

```
System.Windows.Data Error: 40 : BindingExpression path error: 'Text' property not found on 'object' ''MyHomeworkViewModel' (HashCode=31265986)'. BindingExpression:Path=Text; DataItem='MyHomeworkViewModel' (HashCode=31265986); target element is 'TextBox' (Name=''); target property is 'Text' (type 'String') 
```

我想我知道它为什么抱怨。我的 Text 属性是 MyHomeworkModel 而不是 MyHomeworkViewModel ...但是为什么我可以将标题绑定到 MyHomeworkModel 中的 Header 属性？

我的 AddCourseCommand 类：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Windows.Input;

namespace MyHomework__MVVM_
{
    class AddCourseCommand : ICommand
    {
        private MyHomeworkViewModel viewModel;

        public AddCourseCommand(MyHomeworkViewModel viewModel)
        {
            this.viewModel = viewModel;
        }

        public event EventHandler CanExecuteChanged
        {
            add
            {
                CommandManager.RequerySuggested += value;
            }
            remove
            {
                CommandManager.RequerySuggested -= value;
            }
        }

        public bool CanExecute(object parameter)
        {
            return true;
        }

        public void Execute(object parameter)
        {
            viewModel.AddNewTab();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T16:14:47.273

看起来你的模型实现了

```
ObservableCollection<MyHomeworkModel>. 
```

删除这个基类，它应该可以工作。

**编辑**：

你需要改变：

```
 AddCourseCommand = new AddCourseCommand(this); 
```

至

下载[委托命令](http://wpftutorial.net/DelegateCommand.html)

```
 AddCourseCommand = new DelegateCommand(AddNewTab); 
```

**编辑：**

你从你的 UI 中剪切你的 ViewModel。您将一个实例复制到您的命令中，然后调用该复制添加。这是错误的，你的错。我真的建议您使用 DelegateCommand 这可能会解决它。

根据你的猜测：

> 我想我知道它为什么抱怨。我的 Text 属性是 MyHomeworkModel 而不是 MyHomeworkViewModel ...但是为什么我可以将标题绑定到 MyHomeworkModel 中的 Header 属性？

正确的是，您的属性在`MyHomeworkModel`而不是在`MyHomeworkViewModel`您绑定到包含`MyHomeworkModel`s 的列表上。现在是您添加一个新项目，您的绑定将设置在最低级别。在这种情况下，在你的情况下`MyHomeworkModel`而不是在`MyHomeworkViewModel`

# c++ - 将标准输出重定向到文件

> ID：14402824
> 
> 赞同：0
> 
> 时间：2013-01-18T16:05:16.153
> 
> 标签：c++

> **可能重复：**
> [如何将 cin 和 cout 重定向到文件？](https://stackoverflow.com/questions/10150468/how-to-redirect-cin-and-cout-to-files)

我正在调试一些意大利面条代码，这些代码通过 std::cout 和名为 tecla 的第三方库写入终端：

[http://www.astro.caltech.edu/~mcs/tecla/](http://www.astro.caltech.edu/~mcs/tecla/)

我想将自己连接到标准输出中，以便可以将其重定向到文件。在保存到文件之前，我可以将字符串转换为十六进制表示，以便我可以更轻松地识别它们包含的所有控制字符。

我还可以将程序中的各种事件记录到这个文件中，以便更好地了解程序是如何工作的。

关于我如何做到这一点的任何建议？

**更新**

我的程序还通过标准输入在终端上接收命令。它似乎在做：

我的程序 9889 > output.txt

甚至

我的程序 9889 | xxd

以某种方式中断程序，以至于我似乎无法让程序响应输入的命令。

提示符 (>) 未出现在 output.txt 中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T16:58:26.857

写入`std::cout`是非常糟糕的做法，除了在小型测试程序中。但是由于您坚持使用它，因此在代码中您无法更改：可以更改`streambuf`流写入的对象，如下所示：

```
class WrappedOutputFilebuf : public std::filebuf
{
    std::ostream& mySavedStream;
    std::streambuf* mySavedStreambuf;
public:
    WrappedOutputFilebuf( std::ostream& stream, std::string filename )
        : mySavedStream( stream)
        , mySavedStreambuf( stream.rdbuf() )
    {
        open( filename.c_str(), std::ios_base::out );
        if ( ! is_open() ) {
            throw some_error;
        }
        stream.rdbuf( this );
    }
    ~WrappedOutputFilebuf()
    {
        mySavedStream.rdbuf( mySavedStreambuf );
    }
}; 
```

然后在某处声明它：

```
WrappedOutputFilebuf w( std::cout, fileName ); 
```

并且只要变量在范围内，`std::cout`就会输出到您指定的文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T16:12:42.343

如果您在 UNIX-oid 系统上，除了直接存储到文件中（如其他答案中所见）外，您还可以使用 HEX 编码查看它，并通过组合`hexdump`and使用光标键浏览它`less`：

```
./myProgram | hexdump -C | less 
```

然后输出如下所示：

```
00000000  73 6f 6d 65 20 63 72 79  70 74 69 63 20 6f 75 74  |some cryptic out|
00000010  70 75 74 20 66 72 6f 6d  20 6d 79 20 70 72 6f 63  |put from my proc|
00000020  65 73 73 0a                                       |ess.|
00000024 
```

要同时查看（使用less浏览）+保存在文件中，只需`tee`在此命令管道中添加一个命令：

```
./myProgram | hexdump -C | tee output.txt | less    #for hex-encoded file content

./myProgram | tee output.txt | hexdump -C | less    #for 1:1 file content 
```

要将`stderr`输出也包含在文件/视图中，请在处理它之前合并两个通道，方法是在进程命令行前加上`2>&1`：

```
./myProgram 2>&1 | ... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T16:10:35.907

将输出重定向到文件是您通常在命令行上执行的操作，而不是在代码本身中执行的操作。例如：

```
myProgram > output.txt 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-18T16:10:50.007

只需键入以下内容即可运行您的程序：

```
myprogram > output.txt 
```

然后使用 WinHex 或 ghex2 等十六进制编辑器查看 output.txt 文件。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-18T18:15:27.093

如果您正在调试的程序对它是否正在与终端通信很敏感，您可能会查看它[`screen`](http://en.wikipedia.org/wiki/GNU_Screen)，尤其是[它的日志记录功能](http://www.gnu.org/software/screen/manual/screen.html#Logging)。

# prestashop - PrestaShop 电子邮件本地化

> ID：14402825
> 
> 赞同：6
> 
> 时间：2013-01-18T16:05:21.297
> 
> 标签：prestashop

我正在为 PrestaShop 1.5 开发一个模块。

我正在发送这样的电子邮件（文档真的丢失了，我研究了其他默认组件，这就是我到目前为止所得到的）

```
Mail::Send(
                            $this->context->language->id, //int $id_lang
                            'template_name',//string $template
                            //Mail::l('Hello', $this->context->language->id),//string $subject
                            $this->l('Email subject'),//string $subject
                            array('{discount}' => $code,
                                  '{firstname}' => $customer['firstname'],
                                  '{lastname}' => $customer['lastname'],
                                  '{img_url}' => $img_url,
                                  '{valid_days}' => $form['days_valid']  
                            ),//string $template_vars
                            $customer['email'],//string $to
                            implode(' ', array_filter( array( $customer['firstname'], $customer['lastname']) )),
                            strval( Configuration::get('PS_SHOP_EMAIL') ),//string $from
                            strval( Configuration::get('PS_SHOP_NAME') ),//string $from_name
                            /* null,//string $from
                            null//string $from_name */
                            null,//array $file_attachment
                            null,//$mode_smtp
                            $template_path//string $template_path /*__PS_BASE_URI__.'modules/'.$this->name.'/mails/' */

                    ); 
```

注意我尝试使用

```
Mail::l('Hello', $this->context->language->id),//string $subject 
```

和

```
$this->l('Email subject'),//string $subject 
```

作为电子邮件的主题。

而且我不断收到“没有找到...的主题”。客户收到的是我在源代码中输入的硬编码字符串。

那么如何摆脱这个错误： ![在此处输入图像描述](../Images/078e1e3cba96223f57e3358bfb8f5570.png) 另外，电子邮件是以明显随机的语言发送的（有时是英语，有时是意大利语）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T18:47:30.223

在您的模块中，您必须在主题参数中使用 Mail::l()。这是一个模块的 Mail::Send() 示例：

```
Mail::Send($this->context->language->id,
    'test',
    Mail::l('test subject', $this->context->language->id),
    array(),
    $to_email); 
```

* * *

电子邮件翻译的工作原理如下：

AdminTranslationsController 将检查“/modules/[模块文件夹]/mails/”中的模板和“/mails/[lang]/lang.php”中的主题。提交翻译时将创建主题。

* * *

如果这不起作用，则可能是文件夹权限的问题。打开这个文件：

> /prestashop/mails/it/lang.php

并检查是否有这样的一行：

```
$_LANGMAIL['Email subject'] = 'translation in italian'; 
```

如果没有，请检查此文件和父文件夹的 Web 服务器权限。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-23T13:45:46.957

我现在在使用 Prestashop 1.5.5.0 版时遇到了同样的问题。

在某些情况下，getSubjectMail() 方法无法识别电子邮件模板，因此无法与主题匹配。重点在于，虽然此方法查找要翻译的主题，但它会将 php 文件解析为纯文本。因此，所有变量都解析为未解析。

就我而言，我从模块的控制器调用 Mail:Send ，它看起来像：

```
Mail::Send(
    $id_lang,
    $template, // <- don't use variable here, rather type email template there directly.
    Mail::l('Message from footer contact form'),
    $template_vars,
    $contact->email,
    $contact->name,
    ($is_email ? $from : Configuration::get('PS_SHOP_EMAIL')),
    '',
    null, // file attachment
    null, // mode smtp
    $this->module->_mailpath
); 
```

解析此文件将导致**从页脚联系表单匹配主题消息**到邮件模板“ **$template** ”。这显然不存在。

为确保正确识别您的主题，请勿使用变量传递模板名称。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-05-17T15:48:35.823

Presta 中的电子邮件模板（不仅是它们）非常混乱。由于我安装了自定义主题，因此我现在将它们放在 6(!!) 个不同的位置。

不会那么麻烦，但似乎和我一样困惑。它从一个位置获取模板进行编辑，将它们依次保存到另一个位置，并在实际创建邮件时从第三个位置（对于模块）获取它们。

结果，我能够编辑一次模板，但在保存它之后，它似乎被还原了，因为它实际上被保存到了另一个位置。

所以我所做的是：我从默认主题文件夹（文件夹'mails'和'modules/mailalerts/mails'）和我的自定义主题中删除了模块的模板（“mailalerts”）。

如果您这样做 - 只需在删除它们之前保留一份副本，因为您可能会丢失您已经在那里进行的一些翻译。

决定一个且只有一个位置，你想保留它们（对我来说，它是原始的“邮件”和“模块”文件夹），然后只从这个位置编辑它们。对于此处提到的位置，您可以从“翻译”管理页面的下拉列表中选择“核心”选项。

# ms-access - 访问连续表单：添加控件而不修改基础表？

> ID：14402828
> 
> 赞同：4
> 
> 时间：2013-01-18T16:05:37.717
> 
> 标签：ms-access, ms-access-2007

我正在制作一个简单的访问表单（连续视图）。这在详细信息部分有一个复选框，在页脚中有一个命令按钮。

这样，用户可以使用复选框“选择”多个记录，然后单击按钮上的命令按钮以运行更新所选记录的脚本。无需永久存储这些检查值。

通常，我会在基础表中添加一个布尔字段并将复选框与该字段相关联。但是有没有办法在不修改表格的情况下做到这一点？即在内存中存储复选框值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T16:11:18.393

不，那里没有。连续表单不是很多活动记录，它是一个活动记录，其中包含许多其他记录的视图。对未绑定控件的任何更新仅适用于当前记录。您可以使用记录选择器选择一组记录并使用它们：[http ://wiki.lessthandot.com/index.php/Allow_the_User_to_Select_Multiple_Records_for_Processing](http://wiki.lessthandot.com/index.php/Allow_the_User_to_Select_Multiple_Records_for_Processing)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T17:31:37.163

您可以在基于断开连接的记录集的表单中包含记录选择复选框。这是您在内存中创建的 ADO 记录集，未绑定到任何数据源。使用记录集中的主键，您的命令按钮的单击过程可以遍历记录集以检索“选定”记录的主键列表。如果该方法听起来有用，请参阅 Danny Lesandrini 在 Database Journal 上的这篇文章：[创建内存中 ADO 记录集](http://www.databasejournal.com/features/msaccess/article.php/3846361/Create-In-Memory-ADO-Recordsets.htm)

我根据那篇文章中的代码创建了这个表单。主窗体包括一个基于断开连接记录集的子窗体，该记录集在子窗体的`Form_Open`.

![基于断开记录集的表单](../Images/a8f00866b62b473dc71135cb0987aaad.png)

请注意，您实际上不需要`ID`在表单中显示主键 ( )；只要它包含在记录集中，您就可以在遍历记录集时检索它。

```
Private Sub Form_Open(Cancel As Integer)
    Dim dbs As DAO.Database
    Dim fld As ADODB.Field
    Dim rstAdo As ADODB.Recordset
    Dim rstDao As DAO.Recordset
    Dim strSql As String

    Set rstADO = New ADODB.Recordset
    With rstAdo
        .Fields.Append "EmployeeID", adInteger, , adFldKeyColumn
        .Fields.Append "FirstName", adVarChar, 10, adFldMayBeNull
        .Fields.Append "LastName", adVarChar, 20, adFldMayBeNull
        .Fields.Append "Selected", adBoolean
        .CursorType = adOpenKeyset
        .CursorLocation = adUseClient
        .LockType = adLockPessimistic
        .Open
    End With

    Set dbs = CurrentDb
    strSql = "SELECT EmployeeID, FirstName, LastName " & _
             "FROM Employees ORDER BY LastName, FirstName"
    Set rstDao = dbs.OpenRecordset(strSql, dbOpenSnapshot)

    Do Until rstDao.EOF
        rstAdo.AddNew
        rstAdo!EmployeeID = rstDao!EmployeeID
        rstAdo!FirstName = rstDao!FirstName
        rstAdo!LastName = rstDao!LastName
        rstAdo!Selected = False
        rstAdo.Update
        rstDao.MoveNext
    Loop

    Set Me.Recordset = rstAdo
    rstDao.Close    
    Set rstDao = Nothing
    Set dbs = Nothing
End Sub 
```

该代码示例对 ADO 使用早期绑定，这需要为*Microsoft ActiveX 数据对象*的版本设置引用。但是，通过对后期绑定进行适当的修改，它可以正常工作。

这种方法并不完全是轻量级的。但是，它允许您选择复选框，而无需将它们绑定到实际数据表中的“是/否”字段。当用户可能会覆盖共享表中的其他选择时，这在多用户应用程序中将是一个挑战。断开连接的记录集巧妙地避免了这种冲突。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-10T22:38:52.497

你当然可以做到这一点。您只需将复选框绑定到 VBA 函数作为它的数据源。

该函数可以根据行的 PK 返回真/假，并将值存储在集合中。

我在这里有一个工作样本：

[http://www.kallal.ca/msaccess/msaccess.html](http://www.kallal.ca/msaccess/msaccess.html)

抓住多选示例。

所以这里声称你不能这样做或者你需要一列或者需要使用一些断开连接的记录集的帖子都是 100% 错误的

# java - Android 设备：如何查看所有对 Internet 的 http 请求？

> ID：14402831
> 
> 赞同：0
> 
> 时间：2013-01-18T16:06:08.473
> 
> 标签：java, android

我需要一个工具（可能是一个 Android 应用程序）来显示来自设备的所有当前 http 请求。我的兴趣是查看所有 http 请求以获取由一个应用程序生成的 mp3 文件（请求）。

因此，该工具可以让我们查看所有 http 请求或特定应用程序的请求。

你知道这样的工具吗？

**更新**。

是的，这样做有隐私限制。我开发的应用程序呢？我可以摆脱限制并查看应用程序的流量吗？可能正在使用一些调试工具？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T16:29:03.007

> 我开发的应用程序呢？

哦，好吧，现在，这改变了事情。你一开始就应该这么说。:-)

您应该能够为您自己的应用程序设置代理服务器支持，假设您正在[使用`HttpUrlConnection`](https://stackoverflow.com/a/1432984/115145)或[`HttpClient`](https://stackoverflow.com/a/4503990/115145) ，您应该能够为您自己的应用程序设置代理服务器支持。

然后，您需要一个可以检查您的 HTTP 操作的代理服务器。[Fiddler](http://www.fiddler2.com/fiddler2/)是一种流行的开发用途，我相信还有其他的。

# javascript - javascript onbeforeunload fire 获取请求

> ID：14402832
> 
> 赞同：0
> 
> 时间：2013-01-18T16:06:09.457
> 
> 标签：javascript, jquery, html

> **可能重复：**
> [如何在onbeforeunload上执行ajax函数？](https://stackoverflow.com/questions/9701734/how-to-execute-ajax-function-onbeforeunload)
> [如何通过javascript捕获浏览器关闭事件并在该事件上向Web服务方法发出请求](https://stackoverflow.com/questions/12530259/how-to-capture-browser-close-event-and-make-a-request-to-web-service-method-on-t)

所以现在这就是我的 onbeforeunload 的样子

```
window.onbeforeunload = function (e) {
  var message = "Don't close me!",
  e = e || window.event;
  // For IE and Firefox
  if (e) {
    e.returnValue = message;
  }
  // For Safari
  return message;
}; 
```

所以这就是我想要做的，这个函数会触发并提示他们选择是否离开页面。当且仅当他们决定离开时，我需要触发 GET 请求以关闭数据库记录。

从测试我是否设置如下：

```
window.onbeforeunload = $.get("url_here") 
```

这是一个简单的解决方法，但是现在我无法获得提示，并且窗口在没有警告的情况下关闭。

我也尝试过添加一个带有确认功能的功能，但它似乎无法正常工作。例如

```
window.onbeforeunload = function(e){
  if(confirm("Are you sure?")){
    $.get("url_here");

    return true;
  }
} 
```

这个变得更奇怪了，但是在大多数情况下，它只会导致一条消息弹出一个带有是/否提示的文字文本（“true”）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T16:35:31.763

看看这个： http: [//jsfiddle.net/3kvAC/241](http://jsfiddle.net/3kvAC/241)这个[对话框运行了 1 秒然后消失了？](https://stackoverflow.com/questions/6063522/jquery-beforeunload)而这个[http://msdn.microsoft.com/en-us/library/ie/ms536907(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/ie/ms536907(v=vs.85).aspx)

它看起来像这样：

```
$(window).bind('beforeunload', function(){
  return 'Are you sure you want to leave?';
});

$(window).unload(function(){
  alert('Bye.');
}); 
```

# installation - 如何调试未成功注册一个 OCX 的 WIX 安装？

> ID：14402833
> 
> 赞同：2
> 
> 时间：2013-01-18T16:06:19.803
> 
> 标签：installation, wix, registry, ocx, heat

我正在尝试创建一个 MSI，它将两个 OCX 文件放在 Program Files (x86) 文件夹中，并注册这两个 OCX 文件。

成功注册了两个 OCX 文件中的第一个（实际上在运行时使用了第二个 OCX）。第二个 OCX 未成功注册。我知道这一点，因为如果我在没有成功注册的 OCX 上运行 regsvr32，它就会在它所使用的应用程序中工作。

两个 OCX 文件的注册信息是使用获取工具 (heat.exe) 生成的。我在两个 OCX 上都使用了 heat 工具，所以我不明白为什么 OCX 注册只适用于其中一个，而不适用于两者。

我该如何调试呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T21:27:10.907

其实一点也不奇怪。COM 提取/收获是一项棘手的工作。给定足够多的 COM 组件，您会发现它经常不顺利。

你已经解决了一半的问题。regsvr32 解决了这个问题的事实告诉你，你已经很接近并且没有丢失其他依赖项，什么没有。

您想要做的是在您安装但只有一个注册的状态下获得一台干净的机器（VM 非常适合这些东西）。在运行 regsvr32 之前和之后使用可以扫描和捕获注册表的工具（InstallWatch 是一个不错的工具）。然后比较快照以查看发生了什么变化。

您必须从机器上的其他进程中过滤掉一些噪音，但如果有一点经验，应该很明显改变了什么。将其放入您的 wxs 源代码中，重新构建并重新测试（VM 再次很棒）。

# python - 每个位置参数的可选参数

> ID：14402837
> 
> 赞同：5
> 
> 时间：2013-01-18T16:06:29.647
> 
> 标签：python, argparse

使用 argparse （或其他东西？）我希望每个位置参数都有一个具有默认值的可选参数。

论点是这样的：

```
script.py arg1 arg2 -o 1 arg3 -o 2 arg4 arg5 
```

我希望它把它解析成可用的东西，比如位置参数列表和*填充默认值*的可选参数列表。例如，如果在上面的示例中可选的默认值为 0：

```
positional = [arg1, arg2, arg3, arg4, arg5]
optional = [0, 1, 2, 0, 0] 
```

换句话说，`parser.add_argument('-o', action='append')`这不是我想要的，因为我丢失了位置参数，每个可选参数都与之相关联。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T16:15:48.243

这是我整理的一个简单的技巧，可能是一个合理的起点：

```
import argparse

class PositionalAction(argparse.Action):
    def __call__(self,parser,namespace,values,option_string=None):
        lst = getattr(namespace,self.dest)
        lst.append(values)
        parser.last_positional_values = lst
        all_positional = getattr(namespace,'all_positional',[])
        all_positional.append(lst)
        namespace.all_positional = all_positional

class AssociateAction(argparse.Action):
    def __call__(self,parser,namespace,values,option_string=None):
        try:
            parser.last_positional_values.append(values)
        except AttributeError:
            pass

parser = argparse.ArgumentParser()
parser.add_argument('-o',action=AssociateAction,dest=argparse.SUPPRESS)
junk,unknown = parser.parse_known_args()

for i,_ in enumerate(unknown):
    parser.add_argument('arg%d'%i,action=PositionalAction,default=[])

print parser.parse_args() 
```

它在行动中：

```
temp $ python test1.py foo -o 1 bar -o 2 baz qux -o 4
Namespace(all_positional=[['foo', '1'], ['bar', '2'], ['baz'], ['qux', '4']], arg0=['foo', '1'], arg1=['bar', '2'], arg2=['baz'], arg3=['qux', '4']) 
```

这个问题有一些挑战。首先，您想接受任意数量的位置参数—— argparse 不喜欢这样。argparse 想预先知道会发生什么。解决方案是构建一个解析器并解析命令行，但告诉 argparse 只解析已知参数（在这种情况下，非位置`-o`参数都被静默解析，但“位置”参数不被解析。）。 `parse_known_args`非常适合这一点，因为它返回表单中的元组`(namespace_of_parsed_stuff, uknown_args)`。所以现在我们知道了未知的参数——我们只需要为每个解析器添加一个位置参数来让 parse_args 满意。

现在，自定义操作实际上在做什么？当找到位置参数时（第二遍），我们得到默认值（这是一个列表）并将值添加到该列表中（以下我将其称为“值”列表）。然后我们使用对“值”列表的引用来修改*解析器。*我们还从命名空间中获取“all_positional”列表。如果它没有那个属性，我们只会得到一个空列表。我们将“value”列表添加到“all_positional”列表中，并将其放回命名空间。

现在，当我们点击一​​个`-o`标志时，我们查看解析器以获取“值”列表，并将附加值添加到该列表中。我们可以在不接触解析器的情况下做同样的事情......（我们可以看看`namespace.all_positional[-1]`——它与 的列表相同`parser.last_positional_values`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-28T04:28:19.870

自己简单地单步执行 sys.argv 怎么样。您似乎不需要 argparse 提供的额外功能。例如：

```
argv='script.py arg1 arg2 -o 1 arg3 -o 2 arg4 arg5'.split()
pos=[]
opt=[]
i=1
while i<len(argv):
    a=argv[i]
    if a[:2]!='-o':
        pos.append(a)
        opt.append(0)
    else:
        i += 1
        opt[-1]=argv[i]
    i += 1 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-18T16:19:14.463

使用`optparse`，如果有点复杂，它就很强大：

```
op = optparse.OptionParser(usage=usage)

op.add_option('-c','--cmd',dest='cmd',help="""Command to run. Mutually exclusive with -s. You can use string ${ADDR} to have it replaced with specified host address in the command. """)

op.add_option('-s','--script',dest='script',help="""Script file to run remotely. Mutually exclusive with -c. A script can have its own arguments; specify the whole command in doublequotes, like "script -arg arg".""")

op.add_option('-l','--replicate-owner',dest='replicateowner',action="store_true",help="""Replicate (symbolic) owner and (symbolic) group of the file on the remote host, if possible. If remote account with username the same as local account does not exist on remote host, this will silently fail.""")

# parse cmdline options
(opts, args) = op.parse_args() 
```

opts 为您命名为 args，而 args 为您提供位置 args。

您可以让位置参数取值或设置 true 或 false 以及更多 IIRC。

# java - JAX-WS 客户端：gzip 响应的 UnsupportedMediaException

> ID：14402842
> 
> 赞同：0
> 
> 时间：2013-01-18T16:06:52.797
> 
> 标签：java, jax-ws, gzip

我编写了 JAX-WS（来自 Sun）客户端，它进行服务调用，期望服务器响应被压缩：

```
Map<String, List<String>> theHeaders = new HashMap<String, List<String>>();
theHeaders.put("Content-Encoding", Collections.singletonList("gzip"));
theHeaders.put("Accept", Collections.singletonList("application/x-gzip"));
theHeaders.put("Accept-Encoding", Collections.singletonList("gzip, deflate"));
theHeaders.put("Content-Type", Collections.singletonList("application/x-gzip"));
((BindingProvider) client).getRequestContext().put(MessageContext.HTTP_REQUEST_HEADERS, theHeaders); 
```

根据 Fiddler 的说法，响应是 HTTP 200 (Ok)，soap 响应是 gzip 压缩的。不过，我收到以下错误：

```
com.sun.xml.ws.server.UnsupportedMediaException: Unsupported Content-Type: application/x-gzip Supported ones are: [application/soap+xml]
at com.sun.xml.ws.encoding.StreamSOAPCodec.decode(StreamSOAPCodec.java:322)
at com.sun.xml.ws.encoding.StreamSOAP12Codec.decode(StreamSOAP12Codec.java:107)
at com.sun.xml.ws.encoding.StreamSOAPCodec.decode(StreamSOAPCodec.java:156)
at com.sun.xml.ws.encoding.SOAPBindingCodec.decode(SOAPBindingCodec.java:312)
at com.sun.xml.ws.transport.http.client.HttpTransportPipe.createResponsePacket(HttpTransportPipe.java:295) 
```

我[读到](http://weblogs.java.net/blog/jitu/archive/2007/07/jaxws_ri_and_co_1.html)JAX-WS 应该支持开箱即用的 gzipped webservice 响应，但看起来它不支持。尽管事实响应包含 Content-Type: application/x-gzip 标头，但它尝试使用适用于 application/soap+xml 的默认编解码器。

有没有办法让它使用另一个编解码器，用于gzip？有这样的编解码器吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T16:13:23.423

您提到的链接告诉它在发送响应时支持 gzip

```
Content-encoding: gzip 
```

标头，除了标准的内容类型标头。如果服务器以 响应`Content-Type: application/x-gzip`，则它是一个不同的标头，并且即使 gzip 本身受支持，它似乎也不受支持。我认为你不应该设置这个：

```
theHeaders.put("Accept", Collections.singletonList("application/x-gzip")); 
```

相反，只需设置接受编码，包括 gzip：

```
theHeaders.put("Accept", Collections.singletonList("application/soap+xml"));
theHeaders.put("Content-Type", Collections.singletonList("application/soap+xml"));
theHeaders.put("Accept-Encoding", Collections.singletonList("gzip"));
theHeaders.put("Content-Encoding", Collections.singletonList("gzip")); 
```

# sml - SML 元组访问

> ID：14402843
> 
> 赞同：0
> 
> 时间：2013-01-18T16:06:54.970
> 
> 标签：sml

据我所知，在 Simple ML 中，元组是通过`#n`s 访问的，以前我看到它可以工作，但现在它不起作用！

我已经尝试了以下行：

```
val a =#2 ("one", "2", "three") 
```

但它给了我以下错误：

```
first.sml:25.26 Error: syntax error found at EOF

uncaught exception Compile [Compile: "syntax error"]
  raised at: ../compiler/Parse/main/smlfile.sml:15.24-15.46
             ../compiler/TopLevel/interact/evalloop.sml:44.55
             ../compiler/TopLevel/interact/evalloop.sml:296.17-296.20
- 
```

奇怪的！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T16:14:54.263

标准 ML 允许您定义自己的任意运算符。这意味着当您混合使用中缀和前缀运算符时，它们之间需要有空格 - 否则它们将被解释为一个运算符。

换句话说，SML 认为您正在尝试调用代码中不存在的`=#`运算符。如果在`=`和之间添加一个空格`#`，它将正常工作。

# codeigniter - codeigniter : 记录错误日志的 url

> ID：14402850
> 
> 赞同：1
> 
> 时间：2013-01-18T16:07:05.343
> 
> 标签：codeigniter, logging, uri, codeigniter-2

有时很难诊断中型/大型 codeIgniter 应用程序中出现的问题。当我们不知道用户如何访问资源时，很难重现。这是一个非常方便的脚本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T16:07:05.343

[“kirill”在“key2market.com”上发布的博客中](http://www.key2market.com/2010/09/customising-error-logging-with-codeigniter-2-0/)提供的脚本

它将错误、URI 和发布的数据记录到您的日志文件中。如果您的应用程序有很多错误，该脚本可能会减慢您的服务器。

*   只需创建文件“[CI]application/core/MY_Exceptions.php”
*   复制/粘贴以下脚本：

# 开始

```
<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');

class MY_Exceptions extends CI_Exceptions{

    /**
    * Constructor
    *
    */
    function __construct(){
        parent::__construct();
    }

    /**
    * Exception Logger
    *
    * This function logs PHP generated error messages
    *
    */
    function log_exception($severity, $message, $filepath, $line)
    {
        $severity = ( ! isset($this->levels[$severity])) ? $severity : $this->levels[$severity];
        $message = 'Severity: '.$severity.' –&gt; '.$message. ' '.$filepath.' '.$line.' [URI='.$_SERVER['REQUEST_URI'].']';

        if( !empty($_POST) ){
            $message .= 'POST: ';
            foreach($_POST as $key=>$value){
                $message .= $key.' => '.$value;
            }
        }
        log_message('error', $message, TRUE);
    }

}
// END Exceptions Class

/* End of file Exceptions.php */
/* Location: ./ci_app/core/Exceptions.php */ 
```

# 结尾

# windows - Bat 文件 FTP 命令

> ID：14402857
> 
> 赞同：1
> 
> 时间：2013-01-18T16:07:30.773
> 
> 标签：windows, batch-file, ftp

我正在尝试通过 FTP 下载批处理文件中的文件。[解决方案与上一个问题](https://stackoverflow.com/questions/2866787/how-to-create-a-bat-file-to-download-file-from-http-ftp-server)非常相似。唯一的区别是我收到“501 服务器无法接受参数”的错误。

这是我的bat文件的代码：

```
@echo off
echo user removed> ftpcmd.dat
echo removed>> ftpcmd.dat
echo CD /removed.com/assets/csv/>> ftpcmd.dat
echo LCD C:\Temp >> ftpcmd.dat
echo TYPE>> ftpcmd.dat
echo GET valid_file.php new.php>> ftpcmd.dat
echo quit>> ftpcmd.dat
ftp -n -s:ftpcmd.dat removed.com
del ftpcmd.dat 
```

这是我运行的 bat 文件的输出：

```
c:\Temp>test
Connected to removed.com.
220 Microsoft FTP Service
ftp> user removed
331 Password required for removed.

230 User logged in.
ftp> CD /removed.com/assets/csv/
250 CWD command successful.
ftp> LCD C:\Temp
Local directory now c:\Temp.
ftp> TYPE
Using ascii mode to transfer files.
ftp> GET valid_file.php new.php
501 Server cannot accept argument.
150 Opening ASCII mode data connection. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T16:22:54.877

尝试

```
 MGET valid_file.php new.php >> ftpcmd.dat 
```

离开 new.php 或稍后再做。

除非当然是网络错误，在这种情况下您需要添加正确的端口。

# ajax - jqxwidgets 树 id

> ID：14402862
> 
> 赞同：0
> 
> 时间：2013-01-18T16:07:35.593
> 
> 标签：ajax, jquery-ui, jquery

我正在使用 jqxwidgets 并试图让树中的 li id 成为我通过 json 传递的项目的 id。目前，一个项目的 id 类似于：treeItem9905728103457950000

```
<script type="text/javascript">

var url = "university/list"
var data = jQuery.parseJSON(
    jQuery.ajax({
        url: url, 
        async: false,
        dataType: 'json'
    }).responseText
);
var builddata = function () {
var source = [];
var items = [];
// build hierarchical source.
for (i = 0; i < data.length; i++) {
    var item = data[i];
    var label = item["text"];
    var parentid = item["parentid"];
    var id = item["id"];

    if (items[parentid]) {
        var item = { parentid: parentid, label: label, item: item };
        if (!items[parentid].items) {
            items[parentid].items = [];
        }
        items[parentid].items[items[parentid].items.length] = item;
        items[id] = item;
    }
    else {
        items[id] = { parentid: parentid, label: label, item: item };
        source[id] = items[id];
    }
}
return source;
}

var source = builddata();
// create jqxTree
$('#jqxTree').jqxTree({ source: source, width: '300px' });
$('#jqxTree').bind('select', function (event) {
        $("#west-container").html("<div style='margin: 10px;'>" +     event.args.element.id + "</div>");
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T16:35:54.853

我能够将 id 添加到 items 数组中：

```
var item = { parentid: parentid, label: label, item: item, id:id }; 
```

和

```
items[id] = { parentid: parentid, label: label, item: item, id:id }; 
```

# inno-setup - InnoSetup 如何在卸载程序中确定自定义目录路径？

> ID：14402863
> 
> 赞同：0
> 
> 时间：2013-01-18T16:07:42.423
> 
> 标签：inno-setup

我在 [Dirs] 部分创建自定义目录。定义如下：

```
[Dirs]
Name: {code:WrkGetWorkingDir}; Flags: uninsalwaysuninstall

[Code]
function WrkGetWorkingDir( Param: String ): String;
begin
Result := WrkOptionsPage3.Values[0];
end; 
```

在卸载程序中，我想以某种方式确定该目录路径并使用它来访问其中的某些文件，然后再将其删除。WrkGetWorkingDir 调用在卸载程序中失败。是否可以将该路径存储在一些神奇的 InnoSetup 变量（或部分）中，或者我应该将它存储在注册表或我的自定义文件中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-19T09:27:18.377

是的。阅读[`RegisterPreviousData`](http://www.jrsoftware.org/ishelp/topic_scriptevents.htm#RegisterPreviousData)、[`SetPreviousData`](http://www.jrsoftware.org/ishelp/topic_isxfunc_setpreviousdata.htm)和[`GetPreviousData`](http://www.jrsoftware.org/ishelp/topic_isxfunc_getpreviousdata.htm)。

您可能还想查看 CodeDlg.iss 示例脚本和[wiki 上的一些示例](http://www.vincenzo.net/isxkb/index.php?title=Remembering_Custom_Page_Settings)。

另一种选择是让卸载程序从安装时已写入的某些文件或注册表设置中读取它以供您的应用程序使用。

最后，但是：您应该**非常**小心地为用户输入的路径设置删除（或者实际上完全删除任何路径的目录+文件）——一些用户可能不小心将其设置为他们实际上并不想要的意外位置已删除。

# javascript - AngularJS 应用程序中的代码重复

> ID：14402864
> 
> 赞同：1
> 
> 时间：2013-01-18T16:07:45.303
> 
> 标签：javascript, angularjs

我最近开始使用 AngularJS MVC 框架。我以前在 GWT 工作。不，这是我注意到使用 AngularJS 的问题。当我开始实现一个新的控制器验收测试套件时，我会尽可能多地练习 TDD，然后在编写第一个验收测试之后，您开始编写单元测试并逐步实现您的控制器。问题是，我看到它，您的对象字段在单元测试、E2E 测试、控制器和视图中的至少 4 个位置是否应该相同。这是追逐的噩梦。我将举一个简单的例子来说明我的意思。我希望我错了，我的工作方法是错误的，如果是这样，我希望有人能纠正我。

```
// in controller 

     $scope.newUsers = new Array(); // <-- $scope.newUsers should be the same array In unit tests.

        $scope.addUserTobeCreated = function (user) {// <-- functions should be added in the view too
            $scope.newUsers.push(user);
        };

        $scope.createUsers = function () {
            $http.post("some url", $scope.newUsers).success(function () {
              // do something 
            });
        };

// in view 
  <label class="form-input-label">name:</label>
  <input type="text" size="15" maxlength="15" class="form-input-field  ipInput"  ng-model="user.name"> 
<label class="form-input-label">age:</label>
<input type="text" size="15" maxlength="15" class="form-input-field  ipInput"  ng-model="user.age">
<label class="form-input-label">position:</label>
<input type="text" size="15" maxlength="15" class="form-input-field  ipInput"  ng-model="user.position">
   <ul>
        <li ng-repeat="user in newUsers">
            Name:{{user.name}}, Age:{{user.age}}

        </li>
    </ul>

// in unit test

  it("should add user to new users array to be added", function () {
        var user = {name:"ivan"};
        scope.addUserToBeCreated(user);
        expect(scope.newUsers.length).toBe(1); // <-- we have "newUsers" in 4 palces until now. Controller, unit tests, and view 2 times ! . 
        // do some assertions ... 
    }); 
```

如果我想更改 newUsers 数组名称，我必须在 4 个地方进行！

此外，考虑将对象传递给接受 JSON 对象的服务器。在服务器上，我必须将 JSON 映射到我的服务器对象。使用像 sitebircs 这样的框架很容易做到这一点。但是，为了能够反序列化来自客户端的对象，必须再次保持类名一致。我是唯一一个看到这个问题的人吗？如果我弄错了，请纠正我。或者只有我真的有这个问题。如果是这种情况，请指导我使用 JS 框架的正确方法。
感谢您的回复。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T07:20:33.367

If you use a good Javascript IDE the refactoring support will let you do it in one go.

For example, in IDEA I can put my cursor on newUsers and press Shift-F6\. Then check "Search in comments and strings" to also pick up the string in the html.

This problem exists also with GWT, but then you probably didn't notice because you were comfortable with refactoring support in your Java IDE.

# c# - 具有基本身份验证的 HttpWebRequest 失败，并出现 DefaultNetworkCredentials 的 401 错误

> ID：14402869
> 
> 赞同：1
> 
> 时间：2013-01-18T16:08:08.947
> 
> 标签：c#, httpwebrequest, basic-authentication, networkcredentials

我正在使用本地 Web 服务器（IIS、Windows 8）测试应用程序，该站点需要基本身份验证，只要我明确传递我的凭据，一切正常：

```
request.Credentials = new NetworkCredential("User", "Password", "Domain");
request.PreAuthenticate = true; 
```

但是我想使用集成安全性，所以我尝试将第一行更改如下：

```
request.Credentials = CredentialCache.DefaultNetworkCredentials; 
```

（我也试过 DefaultCredentials）

我用 Fiddler 检查了网络流量，我看到在第二种情况下 Http 请求是在没有授权标头的情况下发送的，所以它失败也就不足为奇了。但为什么？

更新。我相信我误解了默认凭据的概念。DefaultNetworkCredentials 不能用于生成基本身份验证标头，它必须是用户/密码对。所以这种行为是设计使然。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T17:31:43.640

感谢对该主题发表评论的人，我意识到我误解了默认凭据的概念。在仅启用基本身份验证的情况下不能使用它们，因此这是正确的行为。

# android - 我可以在通知中切换动作的标题吗？

> ID：14402872
> 
> 赞同：1
> 
> 时间：2013-01-18T16:08:13.063
> 
> 标签：android, notifications

在我的通知栏中，我想切换一个动作的标题，我已经用通知生成器添加了这个标题。有切换选项吗？我已经测试了以下代码

```
 notification.addAction(R.drawable.ic_delete, isIgnored?"ignor":"accept", pendingIgnoreEventIntent); 
```

但是如果我使用 .build() 构建通知，则只显示文本，这些文本是在第一次构建之后设置的。

有人有想法吗？问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T16:12:48.907

[从文档](http://developer.android.com/guide/topics/ui/notifiers/notifications.html)：

> 要设置通知以便更新通知，请通过调用 NotificationManager.notify(ID, notification) 向其发出通知 ID。要在发出通知后更新此通知，请更新或创建一个 NotificationCompat.Builder 对象，从中构建一个 Notification 对象，并使用您之前使用的相同 ID 发出通知。如果之前的通知仍然可见，系统将根据 Notification 对象的内容对其进行更新。如果先前的通知已被解除，则会创建一个新通知。

# java - 为什么我无法使用准备好的语句来更新数据库？

> ID：14402874
> 
> 赞同：2
> 
> 时间：2013-01-18T16:08:23.710
> 
> 标签：java, postgresql

考虑以下代码：

```
String updatestmt = "UPDATE marketplaces.amazon_merchant_fulfilled_orders SET order_status = ? WHERE amazon_order_id=?;";

 Connection conn = connectToDatabase();
 PreparedStatement pstInsert = conn.prepareStatement(updatestmt);
 pstInsert.setString(1, orderId);
 pstInsert.setString(2, status);
 try {
     int rowsAffected = pstInsert.executeUpdate();
     System.out.println("Updated " + rowsAffected + " Line(s).");
 ... 
```

执行此代码时，`rowsAffected`始终为`0`.

如果我将 updatetmt 更改为：

`"UPDATE marketplaces.amazon_merchant_fulfilled_orders SET order_status = '"+status+"' WHERE amazon_order_id='"+orderId+"';";`并删除`pstInsert.setString`代码工作正常的调用。

我的问题是**为什么我不能使用准备好的语句来更新我的数据库？**

平台：PostgreSQL 9.2 和 Java 7

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-18T16:08:56.820

您以错误的顺序设置参数。笔记：

```
UPDATE marketplaces.amazon_merchant_fulfilled_orders
SET order_status = ? WHERE amazon_order_id=? 
```

而你正在发送

```
pstInsert.setString(1, orderId);
pstInsert.setString(2, status); 
```

更改顺序以使其工作

```
pstInsert.setString(1, status);
pstInsert.setString(2, orderId); 
```

# android - 不能将 CircleFlowIndicator 与 RealViewSwitcher 一起使用

> ID：14402876
> 
> 赞同：1
> 
> 时间：2013-01-18T16:08:28.427
> 
> 标签：android, views

[我从https://github.com/pakerfeldt/android-viewflow](https://github.com/pakerfeldt/android-viewflow)下载了一个名为 viewflow 的视图，我只想使用其中的 CircleFlowIndicator 将它与我的 RealViewSwitcher 连接，所以我想修改代码但是当我尝试使用我发现的类 CircleFlowIndicator

```
int activeType = a.getInt(R.styleable.CircleFlowIndicator_activeType,
                STYLE_FILL); 
```

导致错误 Resource not found 我的意思是 R.styleable 导致错误我想知道如何解决问题，我尝试复制 \res\values\attrs.xml 但我没有从中受益，我看到了文件\bin\R.txt

```
int attr activeColor 0x7f010001
int attr activeType 0x7f010007
int attr centered 0x7f010004
int attr clipPadding 0x7f010009
int attr customTypeface 0x7f010012
int attr fadeOut 0x7f010005
int attr footerColor 0x7f010010
int attr footerLineHeight 0x7f01000f
int attr footerTriangleHeight 0x7f010011
int attr inactiveColor 0x7f010002
int attr inactiveType 0x7f010006
int attr radius 0x7f010003
int attr selectedBold 0x7f01000b
int attr selectedColor 0x7f01000a
int attr selectedSize 0x7f01000c
int attr sidebuffer 0x7f010000
int attr textColor 0x7f01000d
int attr textSize 0x7f01000e
int attr titlePadding 0x7f010008
int drawable icon 0x7f020000
int id fill 0x7f030001
int id stroke 0x7f030000
int string app_name 0x7f040001
int string hello 0x7f040000
int[] styleable CircleFlowIndicator { 0x7f010001, 0x7f010002, 0x7f010003, 0x7f010004, 0x7f010005, 0x7f010006, 0x7f010007 }
int styleable CircleFlowIndicator_activeColor 0
int styleable CircleFlowIndicator_activeType 6
int styleable CircleFlowIndicator_centered 3
int styleable CircleFlowIndicator_fadeOut 4
int styleable CircleFlowIndicator_inactiveColor 1
int styleable CircleFlowIndicator_inactiveType 5
int styleable CircleFlowIndicator_radius 2
int[] styleable TitleFlowIndicator { 0x7f010008, 0x7f010009, 0x7f01000a, 0x7f01000b, 0x7f01000c, 0x7f01000d, 0x7f01000e, 0x7f01000f, 0x7f010010, 0x7f010011, 0x7f010012 }
int styleable TitleFlowIndicator_clipPadding 1
int styleable TitleFlowIndicator_customTypeface 10
int styleable TitleFlowIndicator_footerColor 8
int styleable TitleFlowIndicator_footerLineHeight 7
int styleable TitleFlowIndicator_footerTriangleHeight 9
int styleable TitleFlowIndicator_selectedBold 3
int styleable TitleFlowIndicator_selectedColor 2
int styleable TitleFlowIndicator_selectedSize 4
int styleable TitleFlowIndicator_textColor 5
int styleable TitleFlowIndicator_textSize 6
int styleable TitleFlowIndicator_titlePadding 0
int[] styleable ViewFlow { 0x7f010000 }
int styleable ViewFlow_sidebuffer 0 
```

我认为这可能有用但我不明白，任何人都可以帮助我将 CircleFlowIndicator 与我的 RealViewSwitcher 一起使用

# c# - 当 BigInteger 的大小超过 ¼ GB 时，BigInteger 的对数错误

> ID：14402877
> 
> 赞同：11
> 
> 时间：2013-01-18T16:08:31.283
> 
> 标签：c#, .net, biginteger, logarithm, base-class-library

当我有一个`BigInteger`大小超过 2 GB（即 ¼ GB；我通过反复试验找到这个阈值）时，对数方法给出了错误的答案。这个简单的代码说明了：

```
 byte[] bb;

  bb = new byte[150000001];
  bb[150000000] = 1;  // sets most significant byte to one
  var i1 = new BigInteger(bb);
  double log1 = BigInteger.Log(i1);
  Console.WriteLine(log1);   // OK, writes 831776616.671934

  bb = new byte[300000001];
  bb[300000000] = 1;  // sets most significant byte to one
  var i2 = new BigInteger(bb);
  double log2 = BigInteger.Log(i2);
  Console.WriteLine(log2);   // Broken, gives negative number, should be twice 831776616.671934 
```

当然，对于超过 的数字`1`，我们必须有一个正对数，对于数字 ，我们必须有一个零对数`1`，对于介于`0`and之间的数字，我们必须有一个负对数`1`（那里没有整数）。我的数字`i1`及`i2`以上的数字大于，`1`因为按照惯例，当最高有效字节介于`0`and之间时`127`，这意味着 positive `BigInteger`。

现在，如果您阅读 的文档[`BigInteger.Log`](http://msdn.microsoft.com/en-us/library/dd268263.aspx)，他们声称如果对数“超出 Double 数据类型的范围”，它可能会抛出。现在，显然这需要一台内存容量超过`1E+300`字节的计算机，而可观测的宇宙太小而无法容纳这样的计算机，所以我想这永远不会发生。

那么为什么这不起作用呢？

PS！Size over `2 ^^ 31`bits 表示 的实际值`BigInteger`超过`2 ^^ (2 ^^ 31)`或近似`circa 8.8E+646456992`。

* * *

更新：我向 Microsoft Connect发送[了错误报告。](https://connect.microsoft.com/VisualStudio/feedback/details/776946/wrong-logarithm-of-biginteger-when-size-of-biginteger-exceeds-gigabyte)在阅读了讨论后，我也意识到，由于`BigInteger`单个对象大小的设计和上限为 2 GB，a`BigInteger`永远不会超过 2 GB（无论您有多少内存）。因此，当`BigInteher`¼ 和 2 GB 之间时，就会发生此错误。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-18T17:09:43.690

让我猜猜：价值是

```
-1.3134912384757032e9 
```

（计算对数时取模小的变化）？

最高设置位的索引被存储并传入一个`int`, 和

```
8*300000000 = 2400000000 > 2147483647 
```

因此索引环绕为负数，即`-1894967296`和

```
-1894967296 * log 2 = -1.3134912384757032e9 
```

哎呀。有人应该提交错误报告。

# sql - 无论排序如何，如何查找具有 2 字节字符的名称？

> ID：14402890
> 
> 赞同：0
> 
> 时间：2013-01-18T16:09:00.650
> 
> 标签：sql, oracle, oracle11g, collation

我的 CUSTOMER 表中有一些字符会导致下游 XML 进程停止运行。它似乎是**LAST_NAME**有一个两字节字符的地方。我已经查看了解释[collat​​ion的这个](http://docs.oracle.com/cd/E17952_01/refman-5.0-en/charset-collate.html)[SQL Server 问题](https://stackoverflow.com/questions/2461522/how-do-i-perform-an-accent-insensitive-compare-e-with-e-e-e-and-e-in-sql-ser)。但我还是被困住了。我注意到有些字符是 2 字节。我正在使用 AL32UTF8 和 UTF8 字符集。

如何找到包含 2 个字节字符的 last_names？这是我应该问的问题，是否要查找所有 2 字节字符而不考虑排序规则？

![2字节字符](../Images/88efd60544d33b6ed125aa71037e68eb.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T16:19:18.707

对于 bytes != 字符的基本检查，您可以执行类似的操作

```
select * 
  from customer
 where length(last_name) != lengthb(last_name); 
```

但正如 NullUserException 所说，这取决于您真正想要如何定义特殊字符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T20:52:12.930

看这里：

[http://docs.oracle.com/cd/E11882_01/server.112/e26088/functions233.htm#SQLRF06162](http://docs.oracle.com/cd/E11882_01/server.112/e26088/functions233.htm#SQLRF06162)

```
SELECT last_name, VSIZE (last_name) "BYTES"      
  FROM employees
 WHERE department_id = 10
ORDER BY employee_id;

LAST_NAME            BYTES
--------------- ----------
Whalen                   6 
```

# java - java检测线程模型

> ID：14402891
> 
> 赞同：1
> 
> 时间：2013-01-18T16:09:08.740
> 
> 标签：java, multithreading, instrumentation

我很好奇 java 检测过程如何在多线程的上下文中工作；更具体地说，如果应用程序的主线程通过以下方式将 ClassTransformer 提交给 JVM：

> intrumentation.addTransformer(ClassFileTransformer 转换器)

然后在退出之前继续创建许多其他线程，我的问题是：

1）剩下的哪些线程被选择接收来自检测框架的回调来转换代码？

2) JVM 是否有自己的执行线程，用于通过提供的 ClassFileTransformer 转换代码？

# refactoring - Enterprise Architect 对象图重构

> ID：14402893
> 
> 赞同：3
> 
> 时间：2013-01-18T16:09:17.497
> 
> 标签：refactoring, class-diagram, enterprise-architect, object-diagram

我已经创建了类图。每个类都有其属性和操作。

然后我创建了对象图。在这张图上，我放置了我的类的实例。我为每个属性定义了运行状态。

在几次迭代中，我们对一些属性进行了重命名、弃用或删除。有没有办法以正确的方式重构类图？所以当我在类图中重命名一个类的属性时，它在对象图中也会改变（这个类在哪里被实例化）？我认为 EA 中应该有某种重构功能，因为重命名只是重构任务之一。

我使用 Sparx Enterprise Architect 8.0

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T22:34:29.510

EA 实际上会为您做到这一点。只需先打开您的对象图。然后在项目浏览器中选择您的类并将其拖到您的对象图上。然后 EA 会询​​问您如何粘贴它。选择“实例（对象）”。之后对类所做的任何更改都应立即反映在任何实例（对象）中。我用一个名为“class”的类创建了一个测试用例。实例化后，我将 int 属性从“sdf”重命名为“sdff”。EA 更改了相应的对象属性。还自动从实例中删除了已删除的属性。

使用 EA 10 测试（我没有安装 v8，但很可能以相同的方式工作）。

# linux - 将标准输出保存到十六进制文件

> ID：14402896
> 
> 赞同：0
> 
> 时间：2013-01-18T16:09:29.530
> 
> 标签：linux, gnome-terminal

我有自己在终端上运行的命令行程序。我如何将这个程序的输出重定向到文件，以便我可以看到它的十六进制表示？我还希望将程序输出的控制字符保存为十六进制。

**更新**

我的程序还通过标准输入在终端上接收命令。它似乎在做：

我的程序 9889 > output.txt

甚至

我的程序 9889 | xxd

以某种方式中断程序，以至于我似乎无法让程序响应输入的命令。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T16:11:53.750

你没有提到你正在使用的操作系统。在 Linux 中你可以使用`hexdump`

```
your_console_app | hexdump -C 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T16:11:22.670

```
program > file.txt 
```

这会将所有重定向`STDOUT`到`program``file.txt`

如果你想了解更多`redirection`，请阅读[我](http://www.techtrunch.com/scripting/redirections-and-file-descriptors)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T16:13:06.363

不要这样做。

最好按*原样*保存文件，即保存程序输出的确切字节。

然后，当您要*显示*数据时，将其视为十六进制数据。

```
$ program >output.txt
$ hexdump -C output.txt 
```

这使用了Linux 中常见的[hexdump](http://linux.about.com/library/cmd/blcmdl1_hexdump.htm)程序。你应该拥有它。

# sql - 如何按日期和特定时间对数据进行分组

> ID：14402899
> 
> 赞同：-1
> 
> 时间：2013-01-18T16:09:52.653
> 
> 标签：sql, sql-server, tsql

我有桌子：

```
select Name, TimeStamp from Goods 
```

我想按日期从晚上 9 点到晚上 9 点对商品进行分组，所以结果应该是这样的：

```
Closes, Count, 2013-01-18 9PM 
Bikes, Count, 2013-01-18 9PM 
```

怎么做？

我想在24小时内接收数据，但是每个周期从晚上9点开始到第二天晚上9点结束，但不仅可以是1天，我的意思是结果可以是这样的：2013-01-17 9PM 3条记录， 2013-01-18 9PM 5 条记录。这意味着从 1 月 17 日晚上 9 点到晚上 9 点，我们售出了 3 件商品。让我知道信息是否应该更详细。

另一种描述：

![在此处输入图像描述](../Images/84e0c7fe551de9ec1a7ebc5f17a984ba.png)

结果应该是这样的：

```
Jamper1, 2013-01-17 21:00, 1
Jamper2, 2013-01-17 21:00, 1
Jamper1, 2013-01-18 21:00, 2
Jamper2, 2013-01-18 21:00, 2 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T16:12:59.080

这很接近，假设时间戳存储为`datetime`.

```
select name, count(*), min(timestamp)
from goods
group by cast((timestamp + 3.0/24) as date) 
```

它将三个小时添加到时间戳以进行分组。第三列是数据中的最小时间戳。

如果你想要更多的东西在你的格式。. .

```
select name, count(*), cast(cast(timestamp + 3.0/24 as date) as datetime) + 21.0/24 
```

这将为您提供问题中的晚上 9 点时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T16:40:36.037

假设您要显示 12 小时内“姓名”的总数。虽然如果您已经知道您的时间段是上午 9 点到晚上 9 点，为什么还要显示时间？

```
select name, sum(name) as total, date_format(timestamp, '%Y-%m-%d %l%p') as time
from goods where hour(timestamp) between 9 and 21
group by name 
```

如果这不是您想要的，请在您的示例表中更具体，以便我们为您提供帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T17:33:31.143

最终我想出了如何做到这一点：

```
select Name, count(*), DATEADD(DD, 0, DATEDIFF(DD, 0, dateadd(hour, 3, [TimeStamp])))
from Goods
group by Name, DATEADD(DD, 0, DATEDIFF(DD, 0, dateadd(hour, 3, [TimeStamp]))) 
```

希望它对你也有帮助。

# php - 第 1 行的 MySQL 语法错误和反引号提供了奇怪的解决方案

> ID：14402900
> 
> 赞同：4
> 
> 时间：2013-01-18T16:09:53.563
> 
> 标签：php, mysql, sql, registration

这个查询

```
$email = $mysqli->real_escape_string($_POST['email']); // User's email.
$key = RandomString(128); // A random string of 128 characters.
$newTime = $_SERVER['REQUEST_TIME'] + 1800; // Expiration timer.
$queries[] = "INSERT INTO verification (
        email, 
        key, 
        time
    ) VALUES (
        '$email', 
        '$key', 
        $newTime
    )";
$errors = false;

$mysqli->autocommit(false);
foreach ($queries as $query) {
    if (!$mysqli->query($query)) {
        $errors = true;
    }
} 
```

给我以下错误：

> 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以获取正确的语法，以便在第 1 行的 'key, time) VALUES ('example@domain.net', 'e1e4091197640bae0a4588b8666e87b6b' 附近使用。

但是上面的查询工作，只需添加一些反引号（重音）：

```
$queries[] = "INSERT INTO verification (
        `email`, 
        `key`, 
        `time`
    ) VALUES (
        '$email', 
        '$key', 
        $newTime
    )"; 
```

谁能解释这种变化将如何解决这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-18T16:11:00.270

`time`和`key`是保留字。如果您打算将它们用作列名，这是一个坏主意，它们需要反引号来转义它们。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-18T16:14:27.070

每当标识符的名称是保留字时，MySQL 中都需要反引号。在您的情况下，`KEY`是一个保留字，除非您像这样将其括起来，否则会导致语法错误。避免创建这样的名称通常是个好主意。

[您可以在此处](http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html)找到保留字列表。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-18T16:11:00.610

试试这个——你不能使用这样的键，因为它是 mysql 的保留关键字。在它周围使用波浪号（`），以便它将其作为字段。

```
$queries[] = "INSERT INTO verification (
        email, 
        `key`, 
        time
    ) VALUES (
        '$email', 
        '$key', 
        $newTime
    )"; 
```

# ruby - 在 Ruby 中写入文本文件之前如何格式化文本？

> ID：14402901
> 
> 赞同：0
> 
> 时间：2013-01-18T16:09:55.103
> 
> 标签：ruby

我有一个从数据库中检索信息的脚本，我需要将结果写到文件中。在检索过程中，我提取了我喜欢以简洁格式显示的列标题和数据。这是我需要它看起来像的示例：

```
user_name             name                          num_logins   
email_1@yahoo.com     Beachwood                     2            
email_2@yahoo.com     Beachwood                     2             
email_3@yahoo.com     Beachwood                     2             
email_4@yahoo.com     Beachwood                     2             
email_55@yahoo.com    Community Internal Medicine   6 
```

我是创建特定格式的报告/文件的新手，因此将不胜感激任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T17:21:44.593

Hirb gem 可以成为[您](https://github.com/cldwalker/hirb)的一个很好的起点。它通常与 IRB 或 Rail 的控制台使用相关，但没有什么说我们不能将它用于其他用途。

通常它想要包装使用 ASCII 边框创建的表格：

```
+--------------------+---------------- -+------------+
| 用户名 | 姓名 | 登录数 |
+--------------------+---------------- -+------------+
| email_1@yahoo.com | 比奇伍德 | 2 |
| email_2@yahoo.com | 比奇伍德 | 2 |
| email_3@yahoo.com | 比奇伍德 | 2 |
| email_4@yahoo.com | 比奇伍德 | 2 |
| email_55@yahoo.com | 社区内科 | 6 |
+--------------------+---------------- -+------------+

```

但是，通过应用一点`gsub`爱，我们可以把它打扮成你想要的样子：

```
values = [
  [ 'user_name',          'name',      'num_logins'          ],
  [ 'email_1@yahoo.com',  'Beachwood', '2'                   ],
  [ 'email_2@yahoo.com',  'Beachwood', '2'                   ],
  [ 'email_3@yahoo.com',  'Beachwood', '2'                   ],
  [ 'email_4@yahoo.com',  'Beachwood', '2'                   ],
  [ 'email_55@yahoo.com', 'Community Internal Medicine', '6' ],
]
puts Hirb::Helpers::AutoTable.render(
  values,
  :headers => values.shift,
  :description => false
).gsub(/^[+-]+\n?/, '').gsub('|', ' ') 
```

看起来像：

```
  用户名 名称 num_logins  
  email_1@yahoo.com 比奇伍德 2           
  email_2@yahoo.com 比奇伍德 2           
  email_3@yahoo.com 比奇伍德 2           
  email_4@yahoo.com 比奇伍德 2           
  email_55@yahoo.com 社区内科 6           

```

您可能希望在将数组的标题行传递给 Hirb 之前将其弹出，或者从单独的数组中提供它。如果是，请更改`:headers`选项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T16:17:04.500

您应该查找 ruby`printf`​​ 方法，它与同名的 C 函数非常相似。它允许您为要打印的每个值指定字段宽度和对齐方式。

```
printf "%20d %20d\n", 334, 44 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T16:20:12.433

根据您希望表格的精美程度，您可以为此使用诸如[terminal-table](https://github.com/visionmedia/terminal-table)之类的 gem 。

Github 上的 README 没有提到它，但是[这个 pull request](https://github.com/visionmedia/terminal-table/pull/3.patch)显示了如何禁用表格的边框。

> ```
> Terminal::Table::X = ""
> Terminal::Table::Y = ""
> Terminal::Table::I = "" 
> ```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-17T15:22:33.473

您也可以尝试我的 table_print gem - 它非常灵活，但需要很少的设置/配置[http://github.com/arches/table_print](http://github.com/arches/table_print)

# javascript - javascript RegExp - 获取所有 html 标签的总字符数

> ID：14402902
> 
> 赞同：1
> 
> 时间：2013-01-18T16:09:55.270
> 
> 标签：javascript, regex, html-parsing, html-parser

我正在尝试获取所有匹配的 HTML 字符的计数（长度），包括开头（`<tag>`）和结尾（`</tag>`），包括任何`attributes`

考虑以下 HTML：

```
<div>
    <a href="#">link</a>
    <span>some text</span>
</div> 
```

HTML 字符长度计数将是**40** （因为它计数`<div><a href="#"></a><span></span></div>`）

[这是有效的正则表达式（在 gskinner.com 上）](http://regexr.com?33f1m)

但是在javascript中使用它时会出现错误
请参阅[jsfiddle](http://jsfiddle.net/adardesign/GL5yP/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-19T10:18:04.457

错误的原因是您的正则表达式包含一个积极的lookbehind `(?<=\s)`- 正则表达式的 Javascript 实现不提供的功能（请参阅[Mimicking Lookbehinds in Javascript](http://blog.stevenlevithan.com/archives/mimic-lookbehind-javascript)）。*（更准确地说，错误是由`?`以下未转义的`(`，当不跟随时`!`，`=`等等引起的`:`）*

您提供的一个工作示例的链接是一个用 ActionScript 3 编写的 Flex 应用程序，其中确实包含积极的后视。

您还需要将`g`标志添加到您的正则表达式文字的末尾以获取所有匹配项的数组`match`，然后您可以对它们的长度求和。

这是一个工作示例，删除了积极的后视并`g`添加了标志：[jsfiddle](http://jsfiddle.net/GL5yP/11/)。

它显示了一个看起来正确的长度`163`，但我将把计数留给你。
您可能需要添加一些东西来代替后视或以其他方式编辑正则表达式 - 我也会让您解决这个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T16:11:35.797

存在语法错误。

您必须避开正斜杠`/`，因为它也是您的分隔符。

```
/(<(?:[A-Za-z_:][\w:.-]*(?=\s)(?!(?:[^>"\']|"[^"]*"|\'[^\']*\')*?(?<=\s)\s*=)(?!\s*\/?>)\s+(?:".*?"|\'.*?\'|[^>]*?)+|\/?[A-Za-z_:][\w:.-]*\s*\/?)>)/ 
```

# php - Composer 版本号是否明确？

> ID：14402916
> 
> 赞同：2
> 
> 时间：2013-01-18T16:10:40.117
> 
> 标签：php, composer-php

显示作曲家版本，如：

```
$ composer.phar -V
Composer version e33aebc 
```

显示我假设的一些字符串是缩短的 git SHA-1 哈希。

现在和将来的版本号/字符串是否明确？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T16:50:18.580

现在它是。在 dev phas 的版本信息中使用完整的哈希，修复 #1502。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T16:17:03.550

那里的版本 ID 是 Git 修订 ID，所以是的，它（几乎）是明确的。您提到的 ID 与此更改后的修订有关：[https ://github.com/composer/composer/commit/e33aebc](https://github.com/composer/composer/commit/e33aebc)

那么，为什么我说“几乎”呢？- 好吧，这只是 git 使用的缩短的 SHA-1，所以理论上可能会发生两个修订版共享 sha 密钥的一小部分，但这是非常不可能发生的。

# vba - 如何在 Excel VBA 中获取当前网络的名称？

> ID：14402918
> 
> 赞同：0
> 
> 时间：2013-01-18T16:10:44.367
> 
> 标签：vba, excel

假设我已连接到`test.server.com`我的 Internet 访问。有没有办法使用 VBA 返回该字符串？

为了扩展，应您的要求（抱歉，网络是我对网络知之甚少的东西）：

以下是指 Windows 7 企业版： 如果您要导航到控制面板中的“网络和共享中心”，这将是“域网络”的名称。或者，单击任务栏中的网络图标将显示此网络名称，并在其下方显示“Internet 访问”。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-21T16:24:30.303

[您可以使用GetComputerNameEx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724301%28v=vs.85%29.aspx)从 Windows 基础 API获取 DNS 主机和/或域名：

```
Option Explicit

Enum COMPUTER_NAME_FORMAT
    ComputerNameNetBIOS
    ComputerNameDnsHostname
    ComputerNameDnsDomain
    ComputerNameDnsFullyQualified
    ComputerNamePhysicalNetBIOS
    ComputerNamePhysicalDnsHostname
    ComputerNamePhysicalDnsDomain
    ComputerNamePhysicalDnsFullyQualified
End Enum

Declare Function GetComputerNameEx Lib "kernel32" Alias "GetComputerNameExA" ( _
    ByVal NameType As COMPUTER_NAME_FORMAT, _
    ByVal lpBuffer As String, _
    ByRef lpnSize As Long) As Long

Sub test()
    Dim buffer As String
    Dim size As Long
    size = 255
    buffer = Space(size)
    GetComputerNameEx ComputerNameDnsFullyQualified, buffer, size
    Debug.Print Left$(buffer, size)
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T15:13:54.890

使用用户 A. Webb 的回复，我使用以下方法让它工作，它提取整个计算机名称和网络，然后将其缩减。我敢肯定有更漂亮的方法，但它的工作原理。

```
Option Explicit

Enum COMPUTER_NAME_FORMAT
    ComputerNameNetBIOS
    ComputerNameDnsHostname
    ComputerNameDnsDomain
    ComputerNameDnsFullyQualified
    ComputerNamePhysicalNetBIOS
    ComputerNamePhysicalDnsHostname
    ComputerNamePhysicalDnsDomain
    ComputerNamePhysicalDnsFullyQualified
End Enum

Declare Function GetComputerNameEx Lib "kernel32" Alias "GetComputerNameExA" ( _
ByVal NameType As COMPUTER_NAME_FORMAT, _
ByVal lpBuffer As String, _
ByRef lpnSize As Long) As Long

Sub test()

Dim buffer As String
Dim size As Long
Dim network_and_computer As String
Dim network_name As String

size = 255
buffer = Space(size)
GetComputerNameEx ComputerNameDnsFullyQualified, buffer, size
network_and_computer = Left$(buffer, size)

MsgBox network_and_computer

network_name = Right(network_and_computer, Len(network_and_computer) - InStr(1, network_and_computer, ".", vbTextCompare))

MsgBox network_name

End Sub 
```

# javascript - 如何使用 Javascript 将 24 小时时间更改为 12 小时时间？

> ID：14402922
> 
> 赞同：0
> 
> 时间：2013-01-18T16:10:55.883
> 
> 标签：javascript

> **可能重复：**
> [JSON Scraping - 通过 Javascript 将军事时间转换为标准时间](https://stackoverflow.com/questions/8658097/json-scraping-convert-military-time-to-standard-time-via-javascript)

我的输入是例如

0400

0915

1200

1615

0015

我需要将它们转换为例如

04:00 上午

上午 9 点 15 分

12:00 PM

下午 4 点 15 分

上午 00:15

有没有我可以使用的脚本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T16:23:52.343

```
var getFormattedTime = function (fourDigitTime){
    var hours24 = parseInt(fourDigitTime.substring(0,2));
    var hours = ((hours24 + 11) % 12) + 1;
    var amPm = hours24 > 11 ? 'pm' : 'am';
    var minutes = fourDigitTime.substring(2);

    return hours + ':' + minutes + amPm;
}; 
```

这是一个测试它[的小提琴。](http://jsfiddle.net/briguy37/RMnfA/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T16:12:38.427

使用`Date`？我很确定它可以做到这一点。

[https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T16:15:52.487

他们有很多处理日期和时间的库，你可以使用[dateJS](http://www.datejs.com/)来达到这个目的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-18T16:30:28.407

下面的脚本给你输出除了......

尝试一下....

```
<script type="text/javascript">
var dtval = "0915"; //Time in 24hrs

 alert(fomartTimeShow(dtval[0] + dtval[1],dtval[2] + dtval[3]));

 function fomartTimeShow(h_24,h_min) {
     var h = h_24 % 12;
     if (h === 0) h = 12;
     return (h < 10 ? "0" + h : h) + ":" + h_min + (h_24 < 12 ? 'am' : 'pm');
}
</script> 
```

# c# - 在 xy 排序中使用变量

> ID：14402930
> 
> 赞同：5
> 
> 时间：2013-01-18T16:11:09.457
> 
> 标签：c#, asp.net, .net

我现在有以下内容：

```
switch (Mysort)
{
    case "reqDate":
        lstDMV.Sort((x, y) => DateTime.Compare(x.RequestDate, y.RequestDate));
        break;
    case "notifDate":
        lstDMV.Sort((x, y) => DateTime.Compare(x.NotifDate, y.NotifDate));
        break;
    case "dueDate":
        lstDMV.Sort((x, y) => String.Compare(x.TargetDateShort, y.TargetDateShort));
        break;
    case "days":
        lstDMV.Sort((x, y) => x.DaysLapsed.CompareTo(y.DaysLapsed));
        break;
} 
```

我想摆脱 case 语句，只做类似的事情：

```
lstDMV.Sort((x, y) => String.Compare(x.MySort, y.MySort)); 
```

case 语句非常庞大，它确实会降低可读性。但因为`MySort`不包含在`lstDMV`它不工作。有没有其他方法可以代替它？

我当然会更改文本以确保`MySort`变量值与`lstDMV`属性名称完全匹配。

我也试过以下没有运气:(

```
 if (sort != "")
            {
                string xsort, ysort;
                xsort = "x." + sort;
                ysort = "y." + sort;

                lstDMV.Sort((x, y) => String.Compare(xsort, ysort));
            } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T16:35:30.590

那么你可以使用反射，假设你所有的属性类型都实现了`IComparable`：

```
private class Test
{
    public DateTime RequestDate { get; set; }

    public string Name { get; set; }
}

private static void Main(string[] args)
{
    var list = new List<Test>
    {
        new Test
        {
            RequestDate = new DateTime(2012, 1, 1),
            Name = "test"
        },
        new Test
        {
            RequestDate = new DateTime(2013, 1, 1),
            Name = "a_test"
        },
    };

    string mySort = "RequestDate";
    list.Sort((x, y) =>
        {
            // Gets the property that match the name of the variable
            var prop = typeof(Test).GetProperty(mySort);

            var leftVal = (IComparable)prop.GetValue(x, null);
            var rightVal = (IComparable)prop.GetValue(y, null);

            return leftVal.CompareTo(rightVal);
        });

    Console.Read();
} 
```

我不建议这样做，因为即使代码可能更少，它的可读性也比`switch`您当前拥有的要少。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T16:38:13.870

带有比较器 Func 的字典

```
 public class YourDataClass {
        public string RequestDate { get; set; }
        public string NotifDate { get; set; }
        .
        .
        .
    }

    public class Sorter<T> where T : YourDataClass {
        private Dictionary<string, Func<T, T, int>> actions =
            new Dictionary<string, Func<T, T, int>> {
                {"reqDate", (x, y) => String.Compare(x.RequestDate, y.RequestDate)},
                {"notifDate", (x, y) => String.Compare(x.NotifDate, y.NotifDate)}
            };

        public IEnumerable<T> Sort(IEnumerable<T> list, string howTo) {
            var items = list.ToArray();
            Array.Sort(items, (x, y) => actions[howTo](x, y));
            return items;
        }
    }

    public void Sample() {
        var list = new List<YourDataClass>();
        var sorter = new Sorter<YourDataClass>();
        var sortedItems = sorter.Sort(list, "reqDate");
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-18T16:35:41.123

Linq 和 Reflection 的结合，用 3 行代码解决您的问题。这是概念证明：

```
public class Test
{
    public string Name;
    public int Age;
    public DateTime Since;
}

void Main()
{
    var tests = new Test[] {
        new Test(){Name="Dude", Age=23, Since = new DateTime(2000,2,3)},
        new Test(){Name="Guy", Age=29, Since = new DateTime(1999,3,4)},
        new Test(){Name="Man", Age=34, Since = new DateTime(2008,11,5)},
        new Test(){Name="Gentleman", Age=40, Since = new DateTime(2006,7,6)}
    };

    //up until here, all code was just test preparation. 
    //Here's the actual problem solving:

    string fieldToOrderBy = "Since"; //just replace this to change order
    FieldInfo myf = typeof(Test).GetField(fieldToOrderBy);
    tests.OrderBy(t=>myf.GetValue(t)).Dump(); 

    //the Dump() is because I ran this in LinqPad. 
    //Replace it by your favaorite way of inspecting an IEnumerable
} 
```

请注意，字段信息是在排序之前获取的，以尝试提高性能。

我知道您的“SortBy”字符串不是字段名称，但这是问题的简单部分，您可以通过使用字典将 SortBy 字符串映射到 FieldName 来解决。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-18T16:38:01.623

假设您的`x`and`y`属于 type `A`，您可以将映射存储在字典中：

```
var sortingFuncs = new Dictionary<string, Func<A, A, int>>(); 
```

排序方法的调用将不再需要`switch`：

```
lstDMV.Sort(sortingFuncs[Mysort]); 
```

但是请注意，您最终会在其他地方得到几乎一样多的代码，因为必须在某个时候填充字典。一个优点是这个过程可以更加动态，例如，您可以让插件添加自己的排序键以及比较功能。

另一方面，*可能*会有非常轻微的性能损失，因为编译器不可能再根据符合条件的值优化选择代码`Mysort`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-18T16:40:17.590

创建属性选择器：

```
Func<T, object> CreatePropSelector<T>(string propertyName)
{
    var parameter = Expression.Parameter(typeof(T));
    var body = Expression.Convert(Expression.PropertyOrField(parameter, propertyName), typeof(object));
    return Expression.Lambda<Func<T, object>>(body, parameter).Compile();
} 
```

并使用它按属性名称排序序列：

```
lstDMV.OrderBy(CreatePropSelector<YourObjectType>(Mysort)) 
```

与其他 Linq 方法一样，它不会对列表进行排序，但会创建枚举器：

```
Mysort = "RequestDate";
foreach(var item in lstDMV.OrderBy(CreatePropSelector<YourObjectType>(Mysort)))
     // sequence ordered by RequestDate property 
```

# javascript - enquire.js 旧版支持

> ID：14402932
> 
> 赞同：8
> 
> 时间：2013-01-18T16:11:17.693
> 
> 标签：javascript, internet-explorer, enquire.js

我试图找出让 enquire.js 在旧版浏览器（即 6-9）上工作的最佳方法。在 enquire 的网站上，它说使用modernizr 检查matchMedia 支持，如果不支持则加载polyfill。

```
Modernizr.load([
    //first test need for polyfill
    {
        test: window.matchMedia,
        nope: "/path/to/polyfill.js"
    },

    //and then load enquire
    "/path/to/enquire.js"
]); 
```

查看它建议的 polyfill，它说modernizr 已经将它包含在 Modernizr.mq() 中。

```
 Used in:
    Respond.js
    FormFactor
    Modernizr
https://github.com/paulirish/matchMedia.js/ 
```

我已经对此进行了调查，但找不到使这项工作正常进行的方法。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-18T16:47:45.420

在这里咨询作者！

所以对于 matchMedia polyfill 总是有一些困惑。它不会将 CSS3 媒体查询支持填充到旧版浏览器中。它的作用是为那些支持 CSS3 媒体查询但不提供此 API 的浏览器填充 matchMedia javascript API。[有关matchMedia 的支持，](http://caniuse.com/#search=matchmedia)请参见此处。例如，IE9 支持 CSS3 媒体查询，但没有 matchMedia JS API，这是 Paul Irish 的 matchMedia polyfill 的目标。

如果您正在寻找一个功能齐全的 polyfill，它可以为旧版浏览器提供不错的媒体查询支持，我可以建议使用 David Knight 的媒体匹配吗？我与他一起测试了这一点，并证明了对 IE6 的支持——它很有魅力:) 你可以在这里找到：[https](https://github.com/weblinc/media-match) ://github.com/weblinc/media-match 。您可以完全按照我对 Modernizr 的建议有条件地加载它，只需更换适当的部件。

希望对您有所帮助，很高兴回答您的任何其他问题。

# c# - 从 Windows 服务创建 OLE 对象

> ID：14402933
> 
> 赞同：1
> 
> 时间：2013-01-18T16:11:17.970
> 
> 标签：c#, matlab, service, com

我有 Windows 服务，它尝试使用以下代码创建和使用 OLE 对象（即 - Matlab 通过自动化）：

```
var type = Type.GetTypeFromProgID("matlab.application");
var matlab = Activator.CreateInstance(type); 
```

在我的机器上一切正常（Win7 x64，单用户），但在生产服务器（Win 2008 R2 Datacenter SP1）上我有问题。如果我像往常一样启动服务 exe 文件（我有这种可能性），它可以在那里工作，但是如果我尝试将它作为服务启动，它会返回异常：

> System.Runtime.InteropServices.COMException (0x80080005)：检索具有 CLSID {AC62BA4E-6ED9-4F33-9967-B260419E5EAD} 的组件的 COM 类工厂失败，原因是以下错误：80080005 服务器执行失败（来自 HRESULT 的异常：0x80080005 (CO_E_SERVER_EXEC_FAILURE ））。

我试过了：

*   在系统/管理员/另一个用户帐户下启动服务
*   使用 dcomcnfg 实用程序检查配置（它实际上有帮助，我有另一个错误，但现在授予“matlab.automation”dcom 对象的所有权限）
*   在调用“Activator.CreateInstance”后，内存中有 Matlab.exe 进程，但它只是挂起..

那么 - 我如何使用 Windows 服务中的 Matlab 自动化对象？

非常感谢！

**更新**

可能会有所帮助 - 生产服务器是 Amazon EC2 实例，因此它也有终端服务器。也许这可能是个问题？因为我之前遇到过互斥锁的问题，通过创建全局互斥锁解决了。

**更新 2**

异常总是在 120 秒内发生（确切地说），所以看起来 OLE 客户端没有看到 CoRegisterClassObjects 的调用，或者可能没有任何其他调用。在任何情况下 - 调用 Activator.CreateInstance 和异常之间的延迟正好是 120 秒。

# c++ - 使用 utf8proc 处理 std::string

> ID：14402937
> 
> 赞同：0
> 
> 时间：2013-01-18T16:11:28.883
> 
> 标签：c++, utf-8

我的 C++ 代码中有一个 std::string 标题。不幸的是，我不知道该标题的编码，有时可能会有所不同，但并不总是 utf8。但是，由于我需要使用 pp:Var (https://developers.google.com/native-client/peppercpp/classpp_1_1_var) 发送它，因此我需要将其转换为有效的 utf8。
所以我尝试通过utf8proc（http://www.public-software-group.org/utf8proc-documentation）转换它。我想我应该使用 utf8proc_iterate 函数，但我不明白为什么该函数的输出是 int 类型的？！我如何将它作为字符串？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T02:14:14.493

当您不知道从什么转换数据时，您无法转换数据。检查数据是否为有效的 UTF-8 很容易，但如果遇到不是 UTF-8 的数据，那么您就不走运了，不知道编码实际上是什么。您将不得不使用分级法来猜测编码，而且您有时肯定会猜错。

`utf8proc_iterate()`返回 an`int32_t`因为它正在遍历已经 UTF-8 编码的数据并将其解码为未编码的 Unicode 代码点，其大小为 21 位（计算机没有 21 位整数类型，因此使用 32 位整数）。要使用 utf8proc（或任何其他编码）将数据编码为 UTF-8，您必须首先从未编码的 Unicode 代码点的数据开始。要获得这些，您必须知道原始数据的编码方式，以便您可以将其属性解码为 Unicode，然后再将其重新编码为 UTF-8。

# api - 2013 年的两足认证标准——我们应该使用 oAuth2 吗？

> ID：14402938
> 
> 赞同：5
> 
> 时间：2013-01-18T16:11:31.343
> 
> 标签：api, oauth, oauth-2.0

如果我要实现一个新的服务器到服务器 API，有哪些认证标准可以让其他人轻松使用它？

理想情况下，我需要记录的身份验证工作方式越少越好（因此是标准），并且使用该服务的开发人员更有可能使用标准库。

但是有一些限制：

*   我不能保证 API 将在 HTTPS 上可用，因为它可能位于托管多个网站（具有 1 个 IP 地址）的盒子上。
*   它应该阻止重放攻击......因此，如果请求被网络上的另一个节点捕获，则无法将相同的请求重新发送到 API。
*   理想情况下，您应该只发送请求并返回响应......因此无需先联系 API 以获取一次性密钥（随机数）
*   请求可能应该由发送者完整签名，以避免中间人类型的攻击。

我怀疑 SSL 类型设置有点过于复杂，因为似乎大多数开发人员并不真正知道如何正确实现它。

使用 oAuth 1.0，[看起来相当简单](http://blog.facilelogin.com/2011/12/2-legged-oauth-with-oauth-10-and-20.html)：

```
http://provider.example.net/profile
    Authorization: OAuth realm="http://provider.example.net/",
    oauth_consumer_key="dpf43f3p2l4k3l03",
    oauth_signature_method="HMAC-SHA1",
    oauth_signature="IxyYZfG2BaKh8JyEGuHCOin%2F4bA%3D",
    oauth_timestamp="1191242096",
    oauth_token="",
    oauth_nonce="kllo9940pd9333jh",
    oauth_version="1.0" 
```

但开发人员现在似乎专注于 oAuth 2，一种可能的解决方案是：

[2-legged oauth 在 OAuth 2.0 中如何工作？](https://stackoverflow.com/questions/14250383/how-does-2-legged-oauth-work-in-oauth-2-0)

首先需要您调用“/oauth/token”来获取令牌，但似乎并没有太多关于其实际工作方式的规范形式（请参阅回复）：

[http://www.ietf.org/mail-archive/web/oauth/current/msg07957.html](http://www.ietf.org/mail-archive/web/oauth/current/msg07957.html)

但是，有人提到在 oAuth 2 中使用 MAC，这可能很有用...例如，执行一次授权以获取 MAC（没有登录详细信息），半无限期地保留此信息，并在所有后续操作中重复使用要求：

[http://blog.facilelogin.com/2013/01/oauth-20-bearer-token-profile-vs-mac.html](http://blog.facilelogin.com/2013/01/oauth-20-bearer-token-profile-vs-mac.html)

还有一个关于 HMAC 的有趣讨论，这意味着它的工作方式也没有标准：

[http://flascelles.wordpress.com/2010/01/04/standardize-hmac-oauth-restful-authentication-schemes/](http://flascelles.wordpress.com/2010/01/04/standardize-hmac-oauth-restful-authentication-schemes/)

* * *

其他注意事项：

oAuth 1.0 的实施、文档和讨论：

[http://www.ietf.org/mail-archive/web/oauth/current/msg06218.html](http://www.ietf.org/mail-archive/web/oauth/current/msg06218.html) [https://developers.google.com/accounts/docs/OAuth#GoogleAppsOAuth](https://developers.google.com/accounts/docs/OAuth#GoogleAppsOAuth) [http://oauth.googlecode.com/ svn/spec/ext/consumer_request/1.0/drafts/2/spec.html](http://oauth.googlecode.com/svn/spec/ext/consumer_request/1.0/drafts/2/spec.html)

不幸的是，我对 oAuth 2.0 的了解越多，我就越同意[Eran Hammer](http://hueniverse.com/2012/07/oauth-2-0-and-the-road-to-hell/)：

> 现在提供的是授权协议的蓝图，“这就是企业方式”，提供“销售咨询服务和集成解决方案的全新前沿”。 [http://en.wikipedia.org/wiki/OAuth](http://en.wikipedia.org/wiki/OAuth)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-24T21:58:51.753

克雷格，好问题。我不是专家，但[对此有很多思考](http://www.thebuzzmedia.com/designing-a-secure-rest-api-without-oauth-authentication/)，所以有一些想法。

假设我们必须针对最小公分母进行编码，并使用您的需求列表（所有 4 项）作为我的设计种子，我会说以下内容：

1.  **无 SSL** - 由于您无法保证 SSL，您将不得不使用公钥/私钥 HMAC 设计。让我们假设所有流量都通过 HTTP 并且可以无限嗅探，这意味着您无法在任何时候通过线路将任何安全令牌或签名密钥传输给调用者，这意味着他们已经需要它们，这意味着私有签名密钥 a-la类似于 AWS 所做的事情（或 2-legged OAuth 或我在上面那篇文章中概述的内容）。
2.  **无重播**- 使用随机数来阻止重播不需要由服务器生成，您可以在此处使用任何值。随机数只需要唯一，需要包含在您的 HMAC 计算（签名）中，并且服务器需要记住它。例如，在客户端生成一个 UUID 作为 nonce，对请求进行签名，将其发送到服务器：`?sig=<a mess of chars>&args=<more stuff>&nonce=f81d4fae-7dec-11d0-a765-00a0c91e6bf6`-- 服务器将记录`f81d4fae-7dec-11d0-a765-00a0c91e6bf6`为已处理，并且永远不允许再次使用它。在合理的时间（月？取决于速度/使用/等）后，您可能可以安全地从数据库中过期这些。提示：这是使用 Redis SET 和[SISMEMBER 命令的](http://redis.io/commands/sismember)*完美*用例。
3.  （见#2，综合答案）
4.  请求**必须**由发件人完整签名。理解“需要签名的内容”的关键很简单：在 HMAC（签名）计算中未包含的任何内容都可以由中间人 (MITM) 操作。sig 中包含的所有内容都是安全的，如果 sig 检查失败，则无法更改。这就是为什么 OAuth 规范（两者）对字节顺序参数以及如何附加它们以及如何组合它们有迂腐的规则，但你签署了*整个*请求。一些 API 说的很简单，比如“获取整个查询字符串，并对其进行签名”——但有时您会在该签名中获得太多信息，例如您可能不想要的域名或端点，需要在未来（或者你可能会，你打电话）。

正如您所知，让安全 API 设计*立即*变得痛苦的是，您不需要 HTTPS 进行所有通信。一旦你这样做了，你就必须求助于像 HMAC's/signing requests 和 nonce's 这样的解决方案。如果您与服务器的通信是通过 HTTPS 保护的，并且两者都可以相互信任，那么生活会变得更好，您可以执行简单的基本身份验证之类的操作，并且只需在每个请求中为服务器提供一个 API_KEY 以识别是谁（或什么）在进行要求。

希望有帮助！看来您已经对此进行了很多研究，所以如果您已经知道所有这些并且没有帮助，我深表歉意。

# bash - how to use xargs with sed in search pattern

> ID：14402949
> 
> 赞同：25
> 
> 时间：2013-01-18T16:12:14.247
> 
> 标签：bash, sed, replace, pipeline

I need to use the output of a command as a search pattern in sed. I will make an example using echo, but assume that can be a more complicated command:

```
echo "some pattern" | xargs sed -i 's/{}/replacement/g' file.txt 
```

That command doesn't work because "some pattern" has a whitespace, but I think that clearly illustrate my problem.

How can I make that command work?

Thanks in advance,

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-01-18T16:23:03.360

You need to tell xargs what to replace with the -I switch - it doesn't seem to know about the {} automatically, at least in some versions.

```
echo "pattern" | xargs -I '{}' sed -i 's/{}/replacement/g' file.txt 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-05-07T19:43:47.423

this works on Linux(tested):

```
find . -type f -print0 | xargs -0 sed -i 's/str1/str2/g' 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-01-18T16:16:31.860

Use command substitution instead, so your example would look like:

```
sed -i "s/$(echo "some pattern")/replacement/g" file.txt 
```

The double quotes allow for the command substitution to work while preventing spaces from being split.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-20T09:12:37.047

This might work for you (GNU sed):

```
echo "some pattern" | sed 's|.*|s/&/replacement/g|' | sed -f - -i file.txt 
```

Essentially turn the `some pattern` into a sed substitution command and feed it via a pipe to another sed invocation. The last sed invocation uses the `-f` switch which accepts the sed commands via a file, the file in this case being the standard input `-`.

If you are using bash, the `here-string` can be employed:

```
<<<"some pattern" sed 's|.*|s/&/replacement/g|' | sed -f - -i file.txt 
```

N.B. the sed separators `|` and `/` should not be a part of `some pattern` otherwise the regexp will not be formed properly.

# jquery - 禁用剑道网格中的编辑

> ID：14402953
> 
> 赞同：4
> 
> 时间：2013-01-18T16:12:31.577
> 
> 标签：jquery, asp.net-mvc, razor, kendo-ui

我正在尝试根据条件将可编辑网格设置为不可编辑。

我在jquery中试过如下

```
var $grid = &("#gridName").data("kendogrid");
Var model = $grid.datasource.at(1);
if(model)
  model.field["cell"].editable = false; 
```

但是这里的“模型”变得不确定。

还尝试了 $grid.data() 然后循环遍历网格，但是单元格并没有变得不可编辑，它们仍然是可编辑的。

任何人都可以让我知道如何使这项工作。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-18T19:20:11.693

你有一些排版错误...

试试这个：

```
var $grid = $("#gridName").data("kendoGrid");
var model = $grid.dataSource.at(1);
if (model)
    model.fields["cell"].editable = false; 
```

1.  第 1 行。`data`其中是*kendoGrid*而不是*kendogrid*。
2.  第 2 行。`model`其中是*var*而不是*Var*
3.  第 4 行。它是`fields`和不是`field`

**编辑：**如果要将`"cell"`列更改为不可编辑，只需执行以下操作：

```
var $grid = $("#gridName").data("kendoGrid");
$grid.dataSource.at(0).fields["cell"].editable = false; 
```

您只需将其更改为一行，因为该模型由网格中的所有行共享。

在这里查看它在 JSFiddle 中运行[http://jsfiddle.net/OnaBai/GuyPa/](http://jsfiddle.net/OnaBai/GuyPa/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-11-23T16:33:42.087

禁用单元格编辑：

```
 var len = $("#gridName").find("tbody tr").length;
    for(var i=0;i<=len ; i++)
    {
        var model = $("#gridName").data("kendoGrid").dataSource.at(i);
        if (model) {//field names
            model.fields["DueDateStr"].editable = false;
            model.fields["TotalAmount"].editable = false;
            model.fields["IsPercentage"].editable = false;
        }

    } 
```

禁用它在模板中的复选框控件：

```
$.map($("#gridName").find("input:checkbox"),
        function (item) {
            $(item).attr('disabled', 'disabled');
        }
    ); 
```

删除命令按钮，如删除按钮：

```
 var rows = $('#gridName tbody tr');
    $.map(rows, function (row) {
        //cell buttons index
        row.cells[4].innerHTML = "";

    }); 
```

隐藏工具栏网格：

```
$("#gridName .k-grid-toolbar").hide(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-06-27T08:55:01.393

如果您使用“incell”编辑模式，则网格有一个“edit”事件，您可以使用它来立即关闭单元格。

```
$("#grid").kendoGrid({

  ...

  edit: function(e) {
      if ( ... ) {
          this.closeCell();
      }
  }

  ...

}); 
```

更强大的方法是继承 kendoGrid 并覆盖 editCell 和/或 editRow 方法。然后你可以做任何你想做的事。 [在此处](http://docs.telerik.com/kendo-ui/howto/create-custom-kendo-widget)查找有关子类化 kendo 小部件的信息。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-03-19T11:44:16.580

```
for(i=0;i<=$("#grid").find("tbody tr").length ; i++)
{ 
  var model = $("#grid").data("kendoGrid").dataSource.at(i);
  if(model)
  {
      model.fields[$("#grid").data("kendoGrid").columns[i].field].editable = false;    
  }
}
```

[http://jsfiddle.net/parthiv89/qwtyLmhk/](http://jsfiddle.net/parthiv89/qwtyLmhk/)

我希望这行得通..如果行得通，那么别忘了给我投票..

* * *

## 回答 #5

> 赞同：-8
> 
> 时间：2013-01-19T07:05:32.410

问题已解决。

```
var $grid = &("#gridName").data("kendoGrid");
var len= &("#gridName").data("kendoGrid tbody tr").length();
for(i=0;i<=len ; i++)
{
var model = $grid.datasource.at(i);
if(model)
  model.fields["cell"].editable = false;
} 
```

# javascript - 如何在执行下一条语句之前等待函数（没有回调）在 Jquery 中运行？

> ID：14402955
> 
> 赞同：0
> 
> 时间：2013-01-18T16:12:35.450
> 
> 标签：javascript, jquery, asynchronous, parse-platform

我正在使用 Parse 服务编写用户身份验证系统。Parse 提供了注销当前用户的注销功能，但该功能不提供回调选项。

我的困境是我需要在异步注销功能完成后运行一个功能。在不修改 Parse 框架的情况下如何实现呢？

这是我的代码：

```
function logOut() {

    if (getCurrentUsername()) {

    Parse.User.logOut();

    // Need this to wait till the logOut function completes
    loggedIn();

    } else {

    }

}

function loggedIn() {

 if (getCurrentUsername()) {
    //Hide the sign in form because it is not needed
    $('#sign_in_form').hide();

    //Get the username of the current user by calling the function getCurrentUsername()
    var currentUsername = getCurrentUsername();

    //Write a welcome message to the current user and give a log out option
    $('#signed_in_note').html('Welcome <a href="#">'+ currentUsername +'</a> | <a href="#" id="log_out">log out</a>')

    //Show the welcome message
    $('#signed_in_note').show();

 } else {

 //If no user is signed in, we show the login form and hide the welcome message
  $('#sign_in_form').show();
  $('#signed_in_note').hide();
 }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T10:08:32.443

您可以设置一个简单的计时器来检查用户是否仍然通过身份验证：

```
var currentUser;
var timerId;

function logOut() {
    currentUser = getCurrentUsername();
    if (currentUser) {
      Parse.User.logOut();
      timerId = setInterval(checkAuth, 200);
    } else {
      //show msg saying already logged out or log an error
    }

}

function checkAuth() {
    // check if user is logged out
    if(!currentUser.authenticated()) {
      abortTimer();
      loggedIn();    //now this will run only after user is logged out
    }
}

function abortTimer() { 
  clearInterval(timerId);
} 
```

PS：不要依赖这个在 100% 的情况下工作，因为用户可能会在注销调用返回之前关闭浏览器。

# c++ - 转换运算符问题

> ID：14402958
> 
> 赞同：2
> 
> 时间：2013-01-18T16:12:43.740
> 
> 标签：c++, operator-overloading

我今天早些时候偶然发现了这个“问题”。

我有这个类，它包含一个转换运算符。就像是：

```
class myClass {
public:
    ...

    operator anotherClass*() { return anotherClassPtr; }

    ...
} 
```

现在这一切都很好......直到我犯了这个愚蠢的错误：

```
void yetAnotherClass::foo(myClass* _p_class) 
{
  ...

  anotherClass* lp_anotherClass = (anotherClass*)_p_class;

  ...
} 
```

我花了很长时间才弄清楚为什么 lp_AnotherClass ptr 设置为非零值，而我确信 _p_class 中的 anotherClassPtr 为 0。

有什么我可以添加到 myClass 中来阻止我犯这个错误的吗？（即编译器会吐出一些错误）是否可以防止对象 ptr 被强制转换为其他东西？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-18T16:14:25.057

```
anotherClass* lp_anotherClass = (anotherClass*)_p_class; 
```

首先，你不应该使用 C 风格的演员表。使用[C++ 风格](https://stackoverflow.com/questions/332030/when-should-static-cast-dynamic-cast-and-reinterpret-cast-be-used)的强制转换。这会节省您的时间，因为编译器会立即告诉您问题：

```
auto* lp_anotherClass = static_cast<anotherClass*>(_p_class); //ERROR 
```

其次，更喜欢使用`explicit`转换功能：

```
explicit operator anotherClass*() { return anotherClassPtr; } 
```

为什么我建议`explicit`转换函数，因为它避免了*隐式*转换产生的细微错误，另外，它增加了代码的可读性！

请注意，`explicit`转换函数是 C++11 功能。

# air - 2 AIR 应用程序直接相互实时通信，即点对点（P2P）

> ID：14402961
> 
> 赞同：0
> 
> 时间：2013-01-18T16:12:52.530
> 
> 标签：air, communication

构建一个需要 2 个不同的信息亭相互通信的安装。我想使用 Adob​​e AIR 来创建单独的应用程序。

我的问题是 2 个独立的 AIR 应用程序是否可以在没有任何服务器充当中介的情况下实时直接相互通信？

理想情况下，唯一可以传输的数据是基于 json 的。

Adobe 具有测试版 Cirrus RTMFP 选项，但需要访问 Internet 才能启动通信。我不能依赖互联网访问，所以不是一个真正的选择。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T23:21:57.493

要直接在 AIR 中实现这一点，您将使用[`Socket`/`ServerSocket`](http://help.adobe.com/en_US/as3/dev/WSb2ba3b1aad8a27b0-181c51321220efd9d1c-8000.html)类（或派生类）。

在库级别，查看[Cocoon P2P](http://code.google.com/p/cocoon-p2p/)测试版。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T23:10:45.510

如果应用程序在同一网络上，则可以使用 P2P 通信。谷歌搜索“flash p2p”应该提供示例。

# php - 如何在 Laravel 中设置默认控制器？

> ID：14402967
> 
> 赞同：9
> 
> 时间：2013-01-18T16:13:14.393
> 
> 标签：php, laravel, laravel-routing

我正在使用 Laravel PHP 框架并且想知道一些事情。默认`application/routes.php`文件包含以下内容：

```
Route::get('/', function()
{
    return View::make('home.index');
}); 
```

这只是输出视图，但我如何从那里调用控制器？

我可以删除上面的整个路由并将其替换为`Route::controller('home')`似乎在默认 URL（即`example.com/`）上使用家庭控制器的路由。但是任何其他控制器`Route::controller('article')`都不起作用，只能在`example.com/article`. 我如何将文章控制器设置为默认值？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-18T16:17:35.580

只需将控制器作为字符串传递，`@`在类名和方法名之间：

```
Route::get('/', 'article@index'); 
```

阅读[文档（通过标题](http://laravel.com/docs/routing#controller-routing)**注册指向控制器操作的路由**滚动到示例）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-19T01:55:32.160

“ `/`”是特殊位置，您可以通过`Route::get('/','home@index')`.

对于家庭控制器上的所有其他操作，您将拥有诸如“ ”或“ ”之类的**URL**。`/home/action1``/home/action2`

我只是想让您了解将任何控制器分配给“ `/`”没有任何好处和需要。

我希望我的回答很清楚。同样，这不是对您的问题的尝试回答，而是在您遇到路线处理时给您的建议。几天前，我正处于与您相同的阶段:)

# winapi - 实现 IExplorerCommand 时缺少图标

> ID：14402974
> 
> 赞同：0
> 
> 时间：2013-01-18T16:13:33.140
> 
> 标签：winapi, com, toolbar, explorer

我正在尝试使用工具栏按钮扩展我的 NSE，但我指定的图标从未显示。
我返回图标位置，如[msdn](http://msdn.microsoft.com/en-us/library/windows/desktop/bb761872%28v=vs.85%29.aspx)中所示。
[这个](http://read.pudn.com/downloads110/sourcecode/windows/system/456836/FVCommands.cpp__.htm)例子也是这样做的。

这是来源：

```
HRESULT MyExplorerCommand::GetIcon(
    IShellItemArray*,LPWSTR *ppszIcon )
{
  wchar_t iconPath[MAX_PATH+10];
  GetModuleFileName( moduleInstance,iconPath,MAX_PATH );
  wcscat( iconPath,L",-24" );
  return( SHStrDup(iconPath,ppszIcon) );
} 
```

这就是我的资源文件：

```
24 ICON 24_info.ico 
```

文本和工具提示按预期显示，但我想要一个图标而不是文本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T19:20:06.313

似乎此功能已在 Windows 7 中删除。

在[这里](http://en.wikipedia.org/wiki/List_of_features_removed_in_Windows_7)我发现了这个：

> Windows 资源管理器中命令栏上的图标和用于打开/保存的常用应用程序对话框。

# php - Cron 作业不发送电子邮件 - PHPJabbers 脚本

> ID：14402976
> 
> 赞同：1
> 
> 时间：2013-01-18T16:13:33.893
> 
> 标签：php, email, cron, jobs

这几乎是我最后的手段，因为我在与过去 3 周的斗争后即将放弃。只是刺了一下，有人可能会提供帮助或以前遇到过这种情况。我从 PHPJabbers 购买了“Appointment Scheduler”脚本，除了在客户预约前 24 小时通过电子邮件发送提醒外，它运行良好。我最初在 GoDaddy 上安装了这个，并且当 cron 运行关于 Zend Optimizer 未安装（它是并且其他一切运行正常）时不断收到错误，所以我将它安装在我拥有的另一个站点上，我似乎让它工作，但没有电子邮件发送。cron 运行的每个小时我都会得到这个：

```
X-Powered-By: PHP/5.2.17
Set-Cookie: StivaApp=c29a18b3ff60f13f27c3f557bda0bc25; path=/
Expires: Thu, 19 Nov 1981 08:52:00 GMT
Cache-Control: no-store, no-cache, must-revalidate, post-check=0, pre-check=0
Pragma: no-cache
Content-type: text/html; charset=utf-8 
```

我的 cron 作业代码（通过我的 cpanel 完成）如下（我的站点文件夹更改为*** *）：

`php /home/****/public_html/josh/script/cron.php`

它每 30 分钟运行一次。我在数据库中有 4 个测试预约应该会收到确认电子邮件，但没有任何反应。

有人对我接下来可以尝试什么有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T02:43:36.190

今天，我与我的域名托管服务商一起解决了其中一个问题。我的 cron 作业正在运行，但我没有收到电子邮件通知。答案是：“......不产生输出的 cron 作业不会发送电子邮件。因为 cron 不会丢弃作业生成的输出，如果 cron 作业生成的输出不会以其他方式处理（例如，通过邮寄到某人，或将其放入文件或将其重定向到 /dev/null）此输出将按照 MAILTO 变量中的描述通过电子邮件发送。”

我的 cron 工作是截断 mysql 表并且不生成任何输出，因此没有电子邮件通知。

# css - 三列 div 具有固定宽度的中心 div 和左右平均共享其余空间

> ID：14402987
> 
> 赞同：1
> 
> 时间：2013-01-18T16:14:30.647
> 
> 标签：css

```
<div id="IWillShareTheRemainingWidthWithTheRightOne">left stuff</div>
<div id="IAmAFixedWidth">center stuff </div>
<div id="IWillShareTheRemainingWidthWithTheLeftOne">right stuff</div> 
```

左边和右边将占据所有可用的剩余空间

[这里](https://stackoverflow.com/questions/12474212/container-fix-width-center-div-dynamic-width-want-left-right-divs-to-fill-out)有人问过这个问题，提出的解决方案对他有用，因为他只需要在左右设置背景。就我而言，我确实必须在左右 div 上放置一些内容。

我还看到了左侧固定而右侧占用其余空间的解决方案。我什至在左右两侧找到了一些解决方案，它们具有固定的宽度和剩余的中心。

但我还没有找到我真正需要的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T22:18:15.690

我在[这个地方](http://pmob.co.uk/temp/3col-centrefixed2.htm)找到了解决方案 有人叫保罗，他多年前在博客上写过[它](http://www.sitepoint.com/forums/showthread.php?442731-Impossible-CSS-layout-3-Columns-Fixed-center-Fluid-left-right)

这是[jsfiddle](http://jsfiddle.net/DugGC/7/)

```
<div id="IWillShareTheRemainingWidthWithTheRightOne">stuff on left</div>
<div id="IAmAFixedWidth">stuff on center</div>
<div id="IWillShareTheRemainingWidthWithTheLeftOne"> 
    <div id="insideOf3rd">    
        stuff on right
    </div>
</div>

#IAmAFixedWidth {
    width:100px;
    background:green;
    display:inline-block
}

#IWillShareTheRemainingWidthWithTheRightOne {
width:50%;
margin-right:-50px;
background:magenta;
float:left;
}

#IWillShareTheRemainingWidthWithTheLeftOne {
width:50%;
margin-left:-60px;
background:magenta;
float:right;
}

#insideOf3rd {
margin-left:50px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T16:25:45.730

给你的 div 一个 inline-block css。

```
div{display:inline-block;}
#IAmAFixedWidth {
    width:100px;
    background:green;
} 
```

[http://jsfiddle.net/DugGC/5/](http://jsfiddle.net/DugGC/5/)

**编辑：**
试试这个：

```
 div{display:table-cell; background: orange; }
    #content{width:550px; background: black; display: table}
    #IAmAFixedWidth {
        width:100px;
        background:green;
    } 
```

[http://jsfiddle.net/DugGC/6/](http://jsfiddle.net/DugGC/6/)

# c++ - 你应该在 std 命名空间中重载 swap 吗？

> ID：14402990
> 
> 赞同：21
> 
> 时间：2013-01-18T16:14:41.950
> 
> 标签：c++, stl

我今天读到一些有趣的东西，说在用户提供的类型（作为模板参数提供）上调用交换的“标准”方式是......

```
using std::swap;
swap(something, soemthingelse); 
```

这样做的原因是使用参数相关查找来使用`swap`用户命名空间或命名空间`swap`中的函数`std`。这对我提出了一个感兴趣的问题。当我为我的一个类重载时`std::swap`，我实际上是在命名空间中定义它`std`...。`namespace std { void swap(/*...*/){/*...*/} }`这种做法有*错*吗？我应该定义我自己`swap`的 s`std`还是我自己的命名空间（为什么）？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-01-18T16:57:09.213

你这样做是错的 ：）

> **17.6.2.4.1 [命名空间.std]**
> 
> > 1.  `std`如果 C++ 程序将声明或定义添加到命名空间或命名空间内的命名空间，则 C++ 程序的行为是未定义的，`std`除非另有说明。`std`只有当声明依赖于用户定义的类型并且特化满足原始模板的标准库要求并且没有明确禁止时，程序才能将任何标准库模板的模板特化添加到命名空间。

这很清楚地表明您可能不会向 namespace 添加重载`std`。您*可以*专门`std::swap<MyType>`针对您的类型，但如果您的类型是模板，则需要部分专门化，`std::swap<MyContainer<T>>`并且您不能部分专门化函数模板，因此这不起作用，因此一般来说这不是一个好方法。

*C++11 还定义了可交换*类型的要求，包括：

> **17.6.3.2 [swappable.requirements]**
> 
> > 1.  ...
> > 2.  ...
> > 3.  `swap(t, u)`评估和的上下文`swap(u, t)`应确保通过重载决议（13.3）在候选集上选择名为“swap”的二进制非成员函数，该候选集包括：
> > 
> > > *   `<utility>`(20.2)中定义的两个交换函数模板和
> > > *   由参数相关查找（3.4.2）产生的查找集。

因此调用`swap`两个可交换类型的对象应该能够找到`std::swap`并且应该能够通过 ADL 找到其他重载。将其称为不合格（并且没有显式模板参数列表）可确保 ADL 发生，并包含`<utility>`并添加 using-declaration for`std::swap`确保可以找到标准重载。因此，按照您在问题中显示的方式进行操作符合这些要求。

这很清楚地定义了在标准使用的意义上*可交换*需要什么，这是标准库所要求的，例如`<algorithm>`.

如果您将`swap`类型的重载放在类型的命名空间中，那么 ADL 可以找到它们。无论如何，这是正确的做法，与您的类型相关的函数与您的类型属于同一命名空间，有关该主题的更多详细信息，请参阅 Sutter 和 Alexandrescu 的[C++ 编码标准中的第 57 条。](http://www.gotw.ca/publications/c++cs.htm)

所以简而言之，你做错了。你读的是正确的。执行`using std::swap`和依赖 ADL 始终有效（对于模板和非模板）并避免未定义的行为。耶。

注意 C++03 标准对如何交换用户定义的类型不太清楚。有关该领域的一些历史，请参阅[N1691 2.2](http://www.boostpro.com/writing/n1691.html#problem-2-name-reservation)，它定义了术语*自定义点*并显示了在 API 中定义它们的不同方法。C++11 中用于交换类型的协议使用了其中一种方式，现在被明确无误地祝福为为您的类型提供交换功能的“正确方式”。其他库中的其他自定义点可以使用其他方法，但在 C++11 术语中可交换意味着`using std::swap;`并依赖于 ADL。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-18T16:30:42.313

为您自己的类型提供标准模板的特化是合法的，并且这些模板必须放在`std`命名空间内。所以这两种方法都是合法的 C++。

话虽如此，推荐的方法是`swap`在与您自己的类型相同的命名空间中提供免费函数，并让 ADL 从那里拾取您的重载。

* * *

**编辑**：在一些评论之后，我重新阅读了这个问题，并注意到它提到了命名空间中的*重载*`std`。在命名空间中提供重载是**非法**`std`的，只允许特*化。*

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-18T17:57:39.103

我相信[这就是您正在寻找的答案](https://stackoverflow.com/a/2684544/1290731)，并且该问题的整个答案集都可以解释一切。我认为 Howard Hinnant 和 Dave Abrahams 已经在 C++ 标准委员会工作了十多年。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-18T16:36:01.293

首先，你不允许添加东西`std`（只是一个重载），所以重载`std::swap`首先是不好的做法。您可以做的是专门化现有模板。所以你应该专注于而不是重载：

```
namespace std
{
    template<> void swap<MyType>(...) {...}
} 
```

但是问题仍然存在，如果一个自己的命名空间版本比`std`-specialization 更受欢迎。`swap`idomatic 推荐的方法是在您自己的命名空间中提供一个免费的，并让 ADL 解决它，就像*David*已经建议的那样。这样做的问题是，如果某人（您的库的客户）不是那么精通惯用的 C++ 并且只是显式地到处调用`std::swap(...)`，那么您最终可能会遇到次优的交换行为。这就是为什么我自己通常会采取安全的方式来做这两者（自己的命名空间函数 + `std`-specialization），即使这对我来说总是很糟糕。

但幸运的是，C++11 简化了事情，因为有效的可移动类型（通常也是有效可交换的类型）可以与`std::swap`使用移动语义的 default 非常有效地交换。`std::swap`因此，在您自己的函数上可能使用默认值`swap`变得不那么不利（您甚至可能考虑不费心提供一个）。

因此，如果您拥有 C++11，最好的方法确实是不要打扰扩展，`std`而只需在类型的名称空间中定义自己`swap`的名称空间，而在 C++03 中，您可能希望通过`std::swap`专业化来确保安全，即使不那么惯用语。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-25T01:22:54.127

理想的做法是仅在您认为 std::swap 对您的类型效率低下时才提供公共交换成员函数。如果您提供交换成员函数，建议您还提供调用该成员函数的非成员交换。这使得其他人更容易调用您更有效的模板特定版本。

# android - 自定义可扩展列表 Android

> ID：14402991
> 
> 赞同：0
> 
> 时间：2013-01-18T16:14:42.917
> 
> 标签：android, listview, radio-button, expandablelistview

我需要创建一个自定义的可扩展列表。当列表展开时，它应该像矩阵一样显示按行和列排列的项目，每个项目下方都有一个单选按钮以供选择。

这是怎么做到的？

[编辑] 我没有照片。这是一个非常相似的事情。[http://techdroid.kbeanie.com/2010/09/expandablelistview-on-android.html](http://techdroid.kbeanie.com/2010/09/expandablelistview-on-android.html)但不是水平放置的列表条目-Vechicle no.1，Vechicle no.2，我需要将条目放置在网格的形式，每个项目下都有一个单选按钮。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T16:21:54.257

您想使用 GridView。这是一个二维列表视图，其中网格中的每个项目都可以具有您想要的任何布局（通常在另一个 xml 文件中定义）。

# string - 从循环函数中的两个字符串值构造变量名

> ID：14402999
> 
> 赞同：1
> 
> 时间：2013-01-18T16:15:07.073
> 
> 标签：string, matlab, variables, loops

我是 MATLAB 的初学者，我希望我能在这个不错的网站上找到帮助（再次 :)）。它是关于一系列个体的模型预测结果。因此，我有一系列变量（包含每个人的基本结果），它们的命名法仅在第一部分有所不同......例如：

Mike 结果另存为：Mike_Sim_V_software1 Adam 结果另存为：Adam_Sim_V_sofwtare1 Sarah 结果另存为：Sarah_Sim_V_sofwtare1 等等...

我已经有了名称列表 ['Mike','Adam','Sarah', etc.] 和 ID（% 保存在名为：idx 的变量中）

并且因为我想对所有上述变量（结果变量）执行一系列类似的计算，并且由于我的变量名称仅在第一部分不同，所以我想编写一个这样的循环函数：

```
for idx=1:80 
x= Indi_All {idx,1} (1,1) 

% idx: is the Individual IDs ... 80 is the total number of individuals
% Indi_All is a cell array containing the basic info, IDs and demographics.. 
here x will get the initial part of the variables names e.g. 'Mike' or 'Adam'

Indi_Results {idx,1} = x
Indi_Results {idx,2} = prctile (x_Sim_V_software1', (5))
Indi_Results {idx,2} = x_5P_software1'
Indi_Results {idx,3} = prctile (x_Sim_V_software1', (10))
Indi_Results {idx,3} = x_10P_software1'
Indi_Results {idx,4} = prctile (x_Sim_V_software1', (25))
Indi_Results {idx,4} = x_25P_software1'
Indi_Results {idx,5} = prctile (x_Sim_V_software1', [50])
Indi_Results {idx,5} = x_Median_software1'
Indi_Results {idx,6} = prctile (x_Sim_V_software1', (75))
Indi_Results {idx,6} = x_75P_software1'
Indi_Results {idx,7} = prctile (x_Sim_V_software1', (90))
Indi_Results {idx,7} = x_90P_software1'
Indi_Results {idx,8} = prctile (x_Sim_V_software1', [95])
Indi_Results {idx,8} = x_95P_software1'

% the code and calculations go even more and more ...

end 
```

所以专家可以看到...... x 将在代码（右列）中被识别为 'x' 而不是我真正想要的意思，即变量 x 包含一个字符串值，如： 'Mike' 。 .

我的问题是：

1）我可以解决这个问题吗？是否有任何函数可以从两个不同的字符串构造变量的名称？！所以可能类似于 num2str 的东西，但要在字符串中添加字符串！换句话说，将变化的部分'Mike'、'Adam'等添加到不变的部分'_Sim_V_software1'以获得一个我可以在循环函数中使用的变量？！

我不知道......我觉得我的问题很愚蠢，但不知何故，我为此花了很多时间，但它并没有按照我想要的方式工作！希望这与我的大脑已经知道周末即将开始的事实无关：）

我很高兴收到您的来信，并提前非常感谢...！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T16:47:36.153

其实很简单。您需要`eval()`像这样使用该功能：

```
Indi_Results {idx,1} = eval(x)
Indi_Results {idx,2} = prctile (eval([x '_Sim_V_software1'])', (5))
Indi_Results {idx,2} = eval([x '_5P_software1'])'
... 
```

对于字符串连接，您可以使用 [str1 str2] ，如上所示。

问候

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T19:36:54.260

使用`eval`是可能的，但可能不是必需的。

相反，我建议您将文件读入单元数组。然后通过索引到数组来操作它们。例如，

```
fn = {'Mike','Adam','Sarah'};

for i=1:length(fn)
  % use the functional form of the load() function
  % to get the time series into t{i} regardless of the filename.

  t{i} = load([fn '_Sim_V_software1 ']);

  res(i, :) =  prctile (t{i}, [5 10 25 50 75 90 95]);
end 
```

在上面的示例中，您实际上并不需要 的元胞数组`t{}`，但我假设您希望对时间序列进行更多分析。