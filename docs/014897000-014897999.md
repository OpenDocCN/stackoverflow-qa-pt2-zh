# StackOverflow 问答 14897000-14897999

# python - python：从第一个元素开始，查找一个连续的值列表，匹配一个条件

> ID：14897003
> 
> 赞同：0
> 
> 时间：2013-02-15T14:37:29.537
> 
> 标签：python, arrays, optimization

我正在处理一个非常大的数据集。数据集由数据配置文件组成，每个配置文件存储在一个数组中。我需要为每个数组找到一系列连续的值，包括第一个值，并匹配一个条件（值 >= 26）。

例子：

对于输入值=`[30.1, 29.7, 28.5, 27.1, 20, 17, 16]`

算法返回 `[30.1, 29.7, 28.5, 27.1]`

对于输入值=`[30.1, 29.7, 28.5, 27.1, 20, 17, 28, 27]`

算法返回`[30.1, 29.7, 28.5, 27.1]`

对于输入值=`[25, 30.1, 29.7, 28.5, 27.1, 20, 17, 28, 27]`

算法返回`None`

我可以解析数组并进行“if”测试，但考虑到我有数十万个系列要分析，我正在寻找更优化的东西。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-15T14:39:07.903

这可以通过[itertools.takewhile](http://docs.python.org/2/library/itertools.html#itertools.takewhile)恰当地完成，它返回元素直到谓词为假。

这是使用 itertools.takewhile 的示例

```
>>> from itertools import takewhile
>>> list(takewhile(lambda e:e>=26, [30.1, 29.7, 28.5, 27.1, 20, 17, 16]))
[30.1, 29.7, 28.5, 27.1] 
```

对于最后一个示例，虽然它不返回`None`，但它是一个空的可迭代对象，您可以轻松地对其进行建模以满足您的要求

```
>>> list(takewhile(lambda e:e>=26, [25, 30.1, 29.7, 28.5, 27.1, 20, 17, 28, 27]))
[] 
```

# image-processing - 对图像（或 BLOB）使用 CombineFileInputFormat？

> ID：14897006
> 
> 赞同：0
> 
> 时间：2013-02-15T14:37:39.730
> 
> 标签：image-processing, hadoop, mapreduce, blob

我计划一个 hdfs 系统，它将为数字存储库（Fedora Commons）托管图像文件（几 Mb​​ 到 200mb）。我从[另一个 stackoverflow 帖子](https://stackoverflow.com/questions/14730754/how-to-use-combinefileinputformat-for-java-in-hadoop)中发现，CombineFileInputFormat 可用于创建由多个输入文件组成的输入拆分。这种方法可以用于图像或pdf吗？在地图任务中，我想完整地处理单个文件，即分别处理输入拆分中的每个图像。

我知道小文件问题，这对我来说不是问题。

我想使用 CombineFileInputFormat 来避免 Mapper 任务设置/清理开销和数据局部性保留。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T17:59:00.563

如果你想在 Hadoop 中处理图像，我只能推荐使用[HIPI](http://hipi.cs.virginia.edu/)，它应该可以让你做你需要的事情。

否则，当您说要完整处理单个文件时，我认为您不能使用传统的输入格式来执行此操作，因为即使使用`CombineFileInputFormat`，您也无法保证拆分中的内容恰好是 1 张图像。

您还可以考虑的一种方法是输入一个包含图像的 URL/位置的文件（例如，您可以将它们放在 Amazon S3 中），并确保您拥有与图像一样多的映射器，然后每个映射任务将是能够处理单个图像。不久前我做过类似的事情，它工作正常。

# ios - iOS NSManagedObject 数据 删除时

> ID：14897007
> 
> 赞同：1
> 
> 时间：2013-02-15T14:37:45.000
> 
> 标签：ios, nsmanagedobject, fault

我在删除条目时遇到了一些困难`Core Data`。

它可以工作，但 NSManagedObject 数据没有值（错误），因此有时会删除错误的条目。

在我的**deleteWholeDatabase**方法中，对象填充了值。并且在**deleteEntryFromDatabase**方法中没有值。但为什么？

这是我的方法：

```
-(NSArray*)databaseRequest{
    NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
    NSEntityDescription *entity = [NSEntityDescription entityForName:currentEntity inManagedObjectContext:managedObjectContext];
    [fetchRequest setEntity:entity];
    [fetchRequest setReturnsObjectsAsFaults:NO];
    NSError *error;
    NSArray *items = [managedObjectContext executeFetchRequest:fetchRequest error:&error];
    return items;
}

-(void)deleteWholeDatabase{
    for (NSManagedObject *objectToDelete in [self databaseRequest]) {
        [managedObjectContext deleteObject:objectToDelete];
        NSLog(@"%@ object deleted",objectToDelete);
    }
    [self saveContext];
    NSLog(@"All entries deleted!");
}

-(void)deleteEntryFromDatabase:(NSManagedObjectContext*)context forEntry:(NSIndexPath*)indexPath{
    NSManagedObject *objectToDelete=[[self databaseRequest] objectAtIndex:indexPath.row];
    [managedObjectContext deleteObject:[managedObjectContext objectWithID:[objectToDelete objectID]]];
    [self saveContext];
    NSLog(@"%@ deleted!",[managedObjectContext objectWithID:[objectToDelete objectID]]);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T15:40:17.763

我不会在任何地方保留调用`[self databaseRequest]`，而是将本地副本保留`NSManagedObjectID's`为数组。

```
- (void)init {
    self.entities = [self databaseRequest];
}

-(NSArray*)databaseRequest{
    NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
    NSEntityDescription *entity = [NSEntityDescription entityForName:currentEntity inManagedObjectContext:managedObjectContext];
    [fetchRequest setEntity:entity];
    [fetchRequest setReturnsObjectsAsFaults:NO];
    NSError *error;
    NSArray *items = [managedObjectContext executeFetchRequest:fetchRequest error:&error];

    NSMutableArray *itemIDs = [[NSMutableArray alloc] initWithCapacity:[items count]];
    for (NSManangedObject *item in items) {
        [itemIDs addObject:[item objectID]];
    }

    return items;
} 
```

那么无论你在哪里打电话`[self databaseRequest]`，你都会得到正确的`NSManagedObjectID`。然后你只需要从 ID 中获取正确的实体。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T14:57:27.473

错误的条目被删除，因为每个请求都以不同的顺序返回项目。尝试通过比较它们的内存地址来删除它们

# android-wifi - 在android中测量多个接入点的信号强度

> ID：14897009
> 
> 赞同：1
> 
> 时间：2013-02-15T14:37:46.933
> 
> 标签：android-wifi

嗨，我正在开发一个室内定位应用程序。我正在尝试使用**wifi 指纹识别**的方法来标记位置，我需要知道一种方法来以更短的延迟测量超过 1 个接入点的信号强度，我尝试使用扫描`wifi.startscan`但速度很慢，有人可以建议我其他的吗完成任务的方法？

# javascript - 设备像素比未定义

> ID：14897015
> 
> 赞同：0
> 
> 时间：2013-02-15T14:38:01.013
> 
> 标签：javascript, cookies

我正在使用 javascript 查看 cookie 与设备像素的比率。在 IE 设备像素比输出未定义，所以我想用一个条件来表示，如果未定义设置为 1。

我一直在尝试几种不同的方法，但认为这会奏效：

```
<script>
                    if (window.devicePixelRatio==undefined) {
                        document.cookie='screenpixelratio='1'; path=/';location.reload(true);
                    } else {
                        document.cookie='screenpixelratio='+window.devicePixelRatio+'; path=/';location.reload(true);
                    }
                </script> 
```

但是，我不能让它输出 1。

有谁知道我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T14:39:39.473

PaulJ 在对代码中存在语法错误的问题的评论中指出：

```
document.cookie='screenpixelratio='1'; path=/';location.reload(true);
// Here --------------------------^ 
```

`'`终止字符串，因此此时是`1`无效标记。你可能的意思是：

```
document.cookie='screenpixelratio=1; path=/';location.reload(true); 
```

如果不是这样，我原来的答案是：

我认为这会起作用，但这可能会更好：

```
if (typeof window.devicePixelRatio === "undefined") { 
```

从技术上讲，某些东西可能与您用来比较它的东西`undefined`相同但不一样`undefined`，但这通常仅在跨窗口情况下。

或者这可能会更直接（找出是否有`devicePixelRatio`属性`window`）：

```
if (!('devicePixelRatio' in window)) { 
```

# java - 我可以在不实现比较器/可比较的情况下调用 binarySearch 方法吗？

> ID：14897020
> 
> 赞同：1
> 
> 时间：2013-02-15T14:38:23.553
> 
> 标签：java, collections

如果我想调用 binarySearch() 方法来执行搜索操作，是否需要实现比较器或可比较？我在尝试调用 binarySearch() 方法时遇到异常。

```
import java.util.ArrayList;
import java.util.Collections;
import java.util.Comparator;
import java.util.Iterator;
import java.util.List;

class Student implements{
private int id;
private String name;

public Student(int id, String name){
    this.id = id;
    this.name = name;
}

public Student() {
    // TODO Auto-generated constructor stub
}

public int getId(){
    return id;
}
public String getName(){
    return name;
}

}
public class CollectionSearchDemo {

public static void main(String[] args) {

    List<Student> list = new ArrayList<Student>();
    list.add(new Student(3, "ouier"));
    list.add(new Student(2, "fdgds"));
    list.add(new Student(7, "kiluf"));
    list.add(new Student(1, "6trfd"));
    list.add(new Student(8, "hjgas"));
    list.add(new Student(5, "ewwew"));

    Collections.sort(list, new Comparator<Student>() {

        @Override
        public int compare(Student arg0, Student arg1) {

            return arg0.getId() - arg1.getId();
        }
    });

    Iterator iterator = list.iterator();
    while(iterator.hasNext()){
        Student student = (Student) iterator.next();
        System.out.print(student.getId()+":"+student.getName()+" ");
    }

    System.out.println("I want to do searching ");
    System.out.println("\n2 is at:"+Collections.binarySearch(list, 2, new Student()));
            // facing exception when i invoke binarySearch method.
}
} 
```

当我尝试搜索“new Student()”或“CollectionSearchDemo”作为参数时发生异常。我不知道我应该在 binraySearch 方法中作为参数传递什么。

请帮我

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T14:45:54.127

有两种使用方法`Collections.binarySearch`。第一个只有一个元素列表和一个键，但这些元素必须实现`Comparable`。第二种方式用钥匙和比较器。如果你不想`Student`实现`Comparable`，你必须使用这个。

所以你必须写这样的东西：

```
 Collections.binarySearch(list, studentToBeFound, comparator); 
```

`studentToBeFound`作为一个`Student`实例，比较器与`Comparator<Student>`您在`Collection.sort()`.

只需重用您以前的 Comparator 比较`Id`：

```
private static final class StudentComparator implements Comparator<Student> {
  @Override
  public int compare(Student arg0, Student arg1) {

    return arg0.getId() - arg1.getId();
  }
} 
```

然后，如果你想找到 ID 等于 2 的学生：

```
Student studentToBeFound = new Student(2, "dummy string"); 
```

并将它们与 binarySearch 一起使用：

```
int indexInList = Collections.binarySearch(list, studentToBeFound, new StudentComparator()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T14:51:37.677

二进制搜索**需要**一个排序列表。

这种搜索基于分区：

1.  取中间元素并将其与参考进行比较。
2.  如果比较表明您的引用“较低”，则二进制搜索在集合的前半部分继续，或者如果它“较高”，则在后半部分继续。
3.  当比较返回`0`时，元素被找到。

考虑到这一点，实际上需要对列表进行排序。您可以通过不同的方式进行操作：

*   借助 a 对其进行排序，`Comparator`然后调用`binarySerarch`
*   对实现接口的元素集合进行排序`Comparable`，然后调用`binarySearch`
*   `binarySearch`如果您提供所需的，则将排序留给方法`Comparator`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-15T14:49:39.667

如果我们不知道如何对列表进行排序，则无法对列表进行排序。二分搜索算法要求对列表进行排序，并且它使用列表的排序来搜索列表，但每次迭代将搜索字段切成两半。但是学生 x 是在列表的前半部分还是后半部分的概念要求我们知道这个列表是如何排序的。

选项1：`public class Student implements Comparable<Student>`

选项 2：为学生编写一个比较器类。

`public class StudentComparator implements Comparator<Student>`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-15T14:43:56.253

binarySearch 方法的第三个参数必须是 Comparator，因为你的 Student 类没有实现 Comparator 接口，所以抛出异常。

`binarySearch(List list, Object key, Comparator c)`

在这里阅读：http: [//docs.oracle.com/javase/6/docs/api/java/util/Collections.html](http://docs.oracle.com/javase/6/docs/api/java/util/Collections.html)

参数 c 必须是实现 Comparator 的类的实例。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-15T14:45:34.920

简短的回答是肯定的 - 二进制搜索不知道`Student`您正在搜索的是“更大”还是“更小”然后是列表中的每个，因此无法搜索。
您想`Student`使用比较器中已有的代码实现可比较：

```
public class Student implements Comparable<Student> {
//stuff
 @Override
 public int compareTo(Student o) {
  return getId() - o.getId();
 }
} 
```

然后你的代码看起来像这样：

```
final Set<Student> set = new TreeSet<Student>();
//add students etc...
final Student found = Collections.binarySearch(set, studentToLookFor); 
```

# perl - perl - 从特定日期的文件中提取数据

> ID：14897023
> 
> 赞同：-5
> 
> 时间：2013-02-15T14:38:31.703
> 
> 标签：perl

我是 Perl 的新手，我正在尝试从过去 12 天到今天的文件中提取特定数据。我需要一个每天都会做的脚本

日期格式：日-月-年，例如：15-FEB-13（今天）

文件示例：

```
E8:BE:81:86:1E:09;**14-FEB-13**;195.116.227.97       *
00:78:9E:ED:B8:3B;**30-JAN-13**;195.116.227.97
00:78:9E:ED:B9:50;**14-FEB-13**;195.116.227.105      *  
00:78:9E:ED:B8:24;**11-FEB-13**;195.116.227.97       *
4C:17:EB:F1:AE:BF;**16-DEC-12**;195.116.227.97
00:78:9E:F4:AC:C1;**21-NOV-12**;195.116.227.97
E8:BE:81:87:03:AA;**11-FEB-13**;195.116.227.97

etc ............................................. 
```

我需要过去 12 天的数据。在上面的例子中标记 *

提前感谢您的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T16:11:55.623

[`Time::Piece`](https://metacpan.org/module/Time%3a%3aPiece)是一个核心模块，所以不需要安装。

该程序跳过日期早于前 11 天的行。如果您需要前 12 天，请更改`11`为`12`.

您将需要`open`输入文件并使用文件句柄代替`DATA`，或者将文件名放在命令行上并使用`<ARGV>`代替`<DATA>`.

```
use strict;
use warnings;

use Time::Piece 'localtime';
use Time::Seconds 'ONE_DAY';

my $limit = localtime() - ONE_DAY * 11;

while (<DATA>) {
  next unless my ($date) = /([0-3][0-9]-[A-Z]{3}-[0-9]{2})/;
  $date = Time::Piece->strptime($date, '%d-%b-%y');
  print if $date >= $limit;
}

__DATA__
E8:BE:81:86:1E:09;14-FEB-13;195.116.227.97
00:78:9E:ED:B8:3B;30-JAN-13;195.116.227.97
00:78:9E:ED:B9:50;14-FEB-13;195.116.227.105
00:78:9E:ED:B8:24;11-FEB-13;195.116.227.97
4C:17:EB:F1:AE:BF;16-DEC-12;195.116.227.97
00:78:9E:F4:AC:C1;21-NOV-12;195.116.227.97
E8:BE:81:87:03:AA;11-FEB-13;195.116.227.97 
```

**输出**

```
E8:BE:81:86:1E:09;14-FEB-13;195.116.227.97
00:78:9E:ED:B9:50;14-FEB-13;195.116.227.105
00:78:9E:ED:B8:24;11-FEB-13;195.116.227.97
E8:BE:81:87:03:AA;11-FEB-13;195.116.227.97 
```

# python - Flask Social - FACEBOOK_SOCIAL 不接受 request_token_params 参数

> ID：14897027
> 
> 赞同：1
> 
> 时间：2013-02-15T14:39:00.360
> 
> 标签：python, facebook-graph-api, flask

我正在使用 Flask 和 Flask-Social 使用 Facebook API 进行网络登录，当我请求权限时遇到了一些麻烦。基本上，除了默认权限之外，我无法请求其他权限。

我已经尝试过使用 yaml 文件和 python 字典，但什么也没有。我什至找不到关于这个参数的更多规范，所以我在这里问你。

我试过这个：

```
SOCIAL_FACEBOOK:
    consumer_key: 'key'
    consumer_secret: 'secret'
    request_token_params:
      scope: 'user_location' 
```

但它仍然采用默认参数。

请大家帮忙！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T16:20:41.917

使用`settings.py`文件，我能够做到这一点：

```
SOCIAL_FACEBOOK = {
    'consumer_key': 'xxx',
    'consumer_secret': 'xxx',
    'request_token_params': {'scope': 'email,publish_actions,user_photos'}
} 
```

它工作得很好。

检查权限是否未在 facebook 上缓存 - 您应该从 App Center 中删除应用程序并重新登录。

# sql - 联合查询中虚拟列的 where 函数

> ID：14897030
> 
> 赞同：3
> 
> 时间：2013-02-14T10:38:00.667
> 
> 标签：sql, ms-access, union

我是 sql 新手，需要一点帮助。我有`union`3 个表的查询。我有一个虚拟列，所以我可以知道每行来自哪个表。我希望能够过滤此虚拟列以仅显示特定表中的行。

我正在使用 Microsoft Access，这是我目前所拥有的：

```
SELECT Table1 as Table_Name, Table1.1  
FROM Table1  
UNION ALL  
SELECT Table2 as Table_Name, Table2.1  
FROM Table2  
UNION ALL  
SELECT Table3 as Table_Name, Table3.1  
FROM Table3  
UNION ALL  
WHERE Table_Name = Form1.TextBox  
ORDER BY Table1.1; 
```

我正在尝试将其链接到表单上的列表框，然后有一些文本框来过滤结果。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-14T12:21:56.307

怎么样：

```
SELECT * FROM
( SELECT Table1 as Table_Name, Table1.1
FROM Table1
UNION ALL
SELECT Table2 as Table_Name, Table2.1
FROM Table2
UNION ALL
SELECT Table3 as Table_Name, Table3.1
FROM Table3 ) q
WHERE Table_Name = Forms!Form1!TextBox
ORDER BY Table1.1; 
```

见：[http ://access.mvps.org/access/forms/frm0031.htm](http://access.mvps.org/access/forms/frm0031.htm)

# visual-studio - Visual Studio 2012 行号/大纲装订线缺失

> ID：14897032
> 
> 赞同：8
> 
> 时间：2013-02-15T14:39:06.790
> 
> 标签：visual-studio, visual-studio-2012

从我安装的 Visual Studio 2012 中运行的代码显示左侧的排水沟已经消失。波纹管是我当前安装的图片，它缺少排水沟，绿色边框中的插图是来自 VM 的正确安装. 我今天已经卸载并重新安装了；我已经删除了两个`AppData\Local\Microsoft\VisualStudio\11.0`&的内容`AppData\Roaming\Microsoft\VisualStudio\11.0`；`HKCU/software/Microsoft/VisualStudio/11.0`我已经删除了&的整个 reg 树，`HKLM/software/Microsoft/VisualStudio/11.0`还尝试`devenv`将`/rootsuffix`开关设置为 test1、test2 等运行，以使其从不同的注册表/应用程序数据位置运行。我在*Options -> Text Editor -> C# -> Advanced中检查了**“打开文件时进入大纲模式”*选项。

 *如果我创建 C++ 应用程序，也会丢失装订线。

我已经完全干涸了，有什么想法可以找回它吗？

截屏：

![在此处输入图像描述](../Images/35e85fe303443c67daffd016417eefa7.png)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-05-18T12:31:08.410

我遇到了同样的问题，似乎只有当您在 .vimrc 文件中写入“set number”时，VsVim 扩展才会删除行号并添加它们。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2015-02-26T21:26:45.453

我刚刚遇到了同样的问题，**清除我的临时文件**解决了它。

我注意到这个问题伴随着一个错误，该错误会在 Visual Studio 启动后立即弹出：

> 遇到异常。这可能是由扩展引起的。
> 
> 您可以通过检查文件“C:\Users\chris\AppData\Roaming\Microsoft\VisualStudio\12.0\ActivityLog.xml”来获取更多信息。

该日志文件的底部是一个错误：

```
<entry>
  <record>711</record>
  <time>2015/02/26 19:53:19.159</time>
  <type>Error</type>
  <source>ProfilesRoamingClient</source>
  <description>Path.GetTempFileName threw IOException: The file exists.&#x000D;&#x000A;.</description>
</entry> 
```

根据[文档](https://msdn.microsoft.com/en-us/library/system.io.path.gettempfilename.aspx)，当所有可能的名称都用尽时`Path.GetTempFileName()`抛出：`IOException`

> 如果 GetTempFileName 方法用于创建超过 65535 个文件而不删除以前的临时文件，它将引发 IOException。
> 
> 如果没有唯一的临时文件名可用，GetTempFileName 方法将引发 IOException。要解决此错误，请删除所有不需要的临时文件。

[`Path.GetTempFileName()`使用](https://github.com/dotnet/coreclr/blob/cbf46fb0b6a0b209ed1caf4a680910b383e68cba/src/mscorlib/src/System/IO/Path.cs#L1011)本[机 Windows API 函数`GetTempFileName()`](https://msdn.microsoft.com/en-us/library/windows/desktop/aa364991.aspx)创建临时文件。我看了看我的临时文件夹，里面确实塞满了`tmpXXXX.tmp`文件。

我只能假设设置这些排水沟的某些部分涉及创建一个临时文件，并且由于这不成功，它无法继续。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-05-29T10:18:28.753

对于**行号**，请转到工具 -> 选项 -> 文本编辑器 -> 所有语言 -> 常规 -> 显示。

检查行号复选框以将其打开。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-15T15:05:37.047

我有一个类似的问题，但对于标记文件。

尝试停止使用大纲`Edit -> Outlining -> Stop Outlining`并重新启动它`Edit -> Outlining -> Start Automatic Outlining`。

也看看[这个页面](http://social.msdn.microsoft.com/Forums/en-US/vseditor/thread/8e42b539-d2a5-48f8-a718-a97f64b3a7f0/)，让我知道它是否对你有帮助！

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-12-11T13:56:21.487

**关闭**并**重新打开**所有语言的行号。

工具 > 选项 > 文本编辑器 > 所有语言 > 常规 > 显示。

您可能认为（像我一样）它已经适用于所有语言。但选项意味着：

![在此处输入图像描述](../Images/3c1af72f661f5679699d39e5ca2ae816.png)

所有语言的行号都打开或关闭，但**一种或多种语言不同**。

* * *

![在此处输入图像描述](../Images/e19c7a974cf5bbc94ddf5a01aaab6798.png)

所有语言的行号都已打开

* * *

![在此处输入图像描述](../Images/fdfa4ed91ecc820a209bdc8fac72b4c9.png)

所有语言的行号都已关闭

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-16T09:49:19.407

尝试 devenv /resetuserdata 擦除所有用户特定数据。完成后启动 VS2012 并在工具->选项中的语言设置中启用行号选项。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-18T11:12:43.217

将其视为唯一的解决方法似乎是以不同的用户身份运行；我设置的解决方法是将 devenv.exe 的所有快捷方式更改为：

```
C:\Windows\System32\runas.exe /user:VisualStudio /savecred "C:\Program Files (x86)\Microsoft Visual Studio 11.0\Common7\IDE\devenv.exe" 
```

而且我已经停止使用 Visual Studio 直接打开 .sln 文件并通过批处理文件发送它们，该批处理文件使用 python 脚本格式化和执行 runas 命令。

所以 .sln 文件是用 vs.bat 打开的：

```
C:\Python33\py\vs.py %1 %2 %3 %4 %5 %6 %7 %8 %9 
```

运行 vs.py：

```
#python 3.3.0

import sys
import subprocess

count=0;

command = "runas /user:VisualStudio /savecred \"C:\Program Files (x86)\Microsoft Visual Studio 11.0\Common7\IDE\devenv.exe"

for arg in sys.argv:
    # Ignore first arg - its this file
    if(count > 0):
             command = command + " \\\""+arg+"\\\""
    count = count + 1

command = command + "\""
print("")
print(command)

subprocess.Popen(command) 
```

它创建了一个格式正确的运行命令，并为用户“VisualStudio”启动了 Visual Studio。

到目前为止，最大的缺点是固定在任务栏/开始菜单中的 Visual Studio 图标上的 .sln 文件仍然在我的帐户下启动；我找不到解决办法。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-02-15T17:08:35.780

轻微变化：

我注意到某些文件会发生这种情况，但其他文件不会。在选项中打开了行号，并且也打开了 Source Outlining。然而，我的某些文件看不到它。

以“清除临时文件”为灵感，我只是关闭并重新启动了 Visual Studio（在我的例子中是 2013 年）。

工作！*

# c# - 如何检索 Spy++ 中显示的 ThreadID

> ID：14897035
> 
> 赞同：-1
> 
> 时间：2013-02-15T14:39:18.743
> 
> 标签：c#, .net

我敢肯定这是一个非常简单的问题。如果我在 Spy++ 中查看程序，我可以看到一个线程 ID。运行我的应用程序时，我如何获得它（它是自己的线程 ID，而不是其他线程 ID）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T14:48:17.843

我认为您想要的是 GetCurrentThreadId()：

[http://msdn.microsoft.com/en-us/library/windows/desktop/ms683183(v=vs.85).aspx?ppud=4](http://msdn.microsoft.com/en-us/library/windows/desktop/ms683183(v=vs.85).aspx?ppud=4)

# ajax - 输入文本字段为空时尝试禁用按钮

> ID：14897036
> 
> 赞同：0
> 
> 时间：2013-02-15T14:39:19.463
> 
> 标签：ajax, jquery

我有一个输入文本字段和一个按钮。当文本字段为空时，按钮应禁用。填写该字段后，应启用该按钮。我尝试使用以下代码但无法正常工作帮助我！

```
$(document).ready(function(){
$("#wmclrsrch").attr("disabled", "disabled");

if ( $('#search_number').is(":empty") ) {
    alert ("verdadeiro");
    $("#wmclrsrch").attr("disabled", true);
}
$('#wmsearch').click(function(){
    $("#wmclrsrch").attr("disabled", false);
    $("#wmclrsrch").attr("enabled", true);
}); 
```

});

HTML 是：

```
<form id="form">
   <label for="search_number">Mobile Number:</label>
   <input id="search_number" type="text" />
   <button id="wmclrsrch">Clear Search</button>
</form> 
```

提前致谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T14:43:47.427

您可以监听`keyup`事件和使用`prop`方法。

```
$(document).ready(function(){ 
    $('#search_number').keyup(function(){
        $("#wmclrsrch").prop("disabled", !this.value.length);    
    }).keyup();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T14:43:01.960

`keyup`使用事件检查输入文本：

```
$('#search_number').keyup(function(){
    if($(this).val() != '')
    {
        //Eneable your button here
    }
    else
    {
        //Disable your button here
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-07T20:04:38.050

您可以尝试以下脚本：

```
<script>
/*
 *
 * A tiny jQuery plugin that could control the button's state
 *
 * code from https://github.com/jvyyuie/snbutton
 *
 */
var SNButton = {
    init: function(e) {
        var snnode = "#"+$("#"+e).data("snnode");
        $("#"+e).attr("disabled", ""==$(snnode).val());
        $(snnode).on('input propertychange', function() {
            $("#"+e).attr("disabled", ""==$(snnode).val());
        });
    }
}
</script>

<input id="textinput" />
<button id="btn" data-snnode="textinput">Button</button>

<script>
SNButton.init("btn");
</script> 
```

这是一个非常简单的 jquery 插件，当某些输入字段为空时禁用按钮。

# iphone - 使用带有 tel://2373829239 的 OpenUrl 时如何避免默认警报

> ID：14897037
> 
> 赞同：1
> 
> 时间：2013-02-15T14:39:26.897
> 
> 标签：iphone, ios

使用带有 tel://2373829239 的 OpenUrl 时如何避免默认的 iOS 警报？

我收到一个带有数字和选项的推送通知，例如“呼叫”和“取消”。当用户再次按下“呼叫”时，会出现默认的 iOS 警报，这意味着用户必须按下“呼叫”按钮两次才能拨打电话。这是不希望的，所以我想知道如何避免这种情况。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T14:40:56.643

你无法避免这种情况。Apple 希望他们的 iOS 能够帮助您避免意外拨打电话，这对我来说听起来很明智。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T14:41:11.367

试试这个 ：-

```
NSString *callString;
callString = @"12345";
        NSString *URLString = [@"tel://" stringByAppendingString:callString];
        NSURL *URL = [NSURL URLWithString:URLString];
        [[UIApplication sharedApplication] openURL:URL]; 
```

或者

```
NSString *urlString = [NSString stringWithFormat:@"tel:123"];
            NSString *escaped = [urlString stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding];
            [[UIApplication sharedApplication] openURL:[NSURL URLWithString:escaped]]; 
```

希望对你有帮助。。

# java - 使用getter或直接使用名称在其自己的类中获取私有变量？

> ID：14897038
> 
> 赞同：0
> 
> 时间：2013-02-15T14:39:29.807
> 
> 标签：java, coding-style

在同一个类中获取私有变量的更优选方式是什么？

例如我们有这个代码：

```
public Class TestClass
{
    private String name;

    public String getName()
    {
        return name;
    }
    public void setName(String name)
    {
        this.name = name;
    } 
```

...

```
 public String someMethod()
    {
        return getInfo(name);
        or
        return getInfo(getName());
    }
} 
```

...

**那么，在同一个类中使用其名称**或**getter**获取私有变量的首选方法是什么？

更新：getter 总是只返回名称。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T14:46:21.513

好吧，我认为这是一个与偏好/情况相关的问题。如果您直接调用该字段，您将获得更好的时间，因为您不会进行额外的方法调用，无论如何这非常快，并且可能更简洁一些。但是，如果您使用 getter，您可以添加另一层抽象，并在其中执行一些其他操作，例如返回另一个值而不是默认值，即字段未设置，例如：

```
int getAge() {
   return (age < 18) ? 18 : age;
} 
```

这也将有助于在对象的情况下避免返回 null，例如：

```
Stuff getStuff() {
    if(stuff == null) {
        return Stuff.NULL_OBJECT;
    }
} 
```

请注意 Stuff 是我的类，NULL_OBJECT 字段是 Null 对象模式实现，我的示例没有任何同步。

话虽如此，如果情况不需要奢侈的东西，我总是使用直接字段访问方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T14:46:33.750

偏好将取决于上下文。在上述 getter 仅返回变量的情况下，许多开发人员倾向于直接返回变量。但是，如果您的 getter 更复杂或相信它将来可能会发生变化，那么可能会首选使用 getter。这一切都取决于`name`代表什么、`getName()`回报什么以及`getInfo(...)`期望什么。

# oracle - Oracle Reports 的安全问题

> ID：14897039
> 
> 赞同：1
> 
> 时间：2013-02-15T14:39:31.007
> 
> 标签：oracle, security, oraclereports

我遇到了 Oracle Reports 的安全问题。要调用报告，您必须将 url 放在一起，在 url 中，有一个名为 userid 的参数。这个参数没有加密，从html的源码可以看出来。我尝试在中间放置一个 wbsite 以将这些参数以邮寄形式发送，算法，我已将参数转换为十六进制，但报告再次将其转换为 ascii。

有人遇到过这个问题吗？我不知道还能做什么。

该参数称为“input_hidden_​​parameters”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T15:08:12.903

根据[Oracle Reports Services](http://docs.oracle.com/cd/E14571_01/bi.1111/b32121/pbr_sec_arch001.htm#CBHHGBHA) 11g 的文档：

> 15.1.3.3 数据源安全
> 
> 数据源安全性定义了可以访问给定数据源中数据的用户或角色。一个报表可能会访问多个数据源，并且当前用户必须对报表访问的所有数据源具有权限才能运行它并查看输出。数据源管理员（通常是 DBA）授予对数据源的访问权限。在配置您的报表环境之前，必须建立并实施数据源安全性。
> 
> 您可以使用 Oracle Reports Services 以两种不同的方式提供数据源安全性：
> 
> 您可以将数据源连接信息与单点登录用户相关联。在这种情况下，当用户第一次尝试访问数据源时，Oracle Delegated Administration Services 会提示他们为其数据源连接创建资源。用户创建此数据源资源后，OracleAS Single Sign-On 将其与 Oracle Internet Directory 中的用户相关联。一旦数据源资源与 Single Sign-On 用户相关联，它就会成为其 Single Sign-On 身份的一部分，并且他们可以访问数据源而无需单独登录。这种方法有两个关键优势。首先，它使每个用户都可以通过其单点登录身份访问数据源，而无需单独登录。第二，**它允许多个用户使用单个报表 URL，因为数据源登录信息与用户的身份一起存储，因此不必硬编码到报表的 URL 或键映射**中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T17:19:35.357

使用[Key Map 文件](http://docs.oracle.com/cd/E28389_01/bi.1111/b32121/pbr_run013.htm)cgicmd.dat 隐藏数据库连接字符串和其他参数。

# sencha-touch - 实现一个搜索域

> ID：14897040
> 
> 赞同：0
> 
> 时间：2013-02-15T14:39:30.980
> 
> 标签：sencha-touch, sencha-touch-2

我需要实现一个搜索字段，我需要它与右上角的那个完全相同[http://docs.sencha.com/touch/2-0/#](http://docs.sencha.com/touch/2-0/#)

现在我做：

```
//called on key up
onSearchQueryChanged: function(field) {
var queryString = field.getValue();

    var store = Ext.getStore('Customers');
store.clearFilter();

if(queryString){
    var thisRegEx = new RegExp(queryString, "i");
    store.filterBy(function(record) {
            if (thisRegEx.test(record.get('name')) || thisRegEx.test(record.get('code')))   
            return true;
            };
        return false;
    });
    }
},

//clearicontap
onSearchReset: function(field, b, c) {
var store = Ext.getStore('Customers');
    store.clearFilter();
field.setValue('Search');
},

//focus
onMouseOn: function(field, b, c) {
field.setValue('');
}, 
```

搜索工作正常.. 唯一的问题是，当我按清除图标清除字段时，点击该字段仍然为空......但我想重新编写“搜索”，就像你在 onSearchReset 函数中看到的那样......。

有解决办法吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T14:54:07.957

如果您使用的是 xtype `searchfield`，那么只需应用[`placeHolder`](http://docs.sencha.com/touch/2-0/#!/api/Ext.field.Search-cfg-placeHolder)配置。即使您不使用，`xtype:searchfield`那么您也可以使用`placeHolder`. 您无需手动将其设置回默认值。

```
xtype: 'searchfield',
label: 'Query',
placeHolder:'Search',
name: 'query' 
```

# lucene - 在 Lucene / Hibernate-search 中搜索子对象

> ID：14897043
> 
> 赞同：1
> 
> 时间：2013-02-15T14:39:38.120
> 
> 标签：lucene, hibernate-search

在我的 Web 应用程序中，用户的能力数据可以按 0-5 的排名存储。使用 Hibernate 搜索（建立在 Lucene 之上），我希望构建一个查询来查找所有具有能力 X 且具有最低排名 A 的用户，例如排名 3 的 Java。此外，我希望在结果中提高排名，将排名 4 的用户放在排名 3 的用户之前。我觉得这应该是可能的，但我不知道如何组合子对象中的字段。我的数据结构看起来像这样（简化）：

用户类

```
@Entity
@Table(schema = "COMPETENCE", name = "users")
@Indexed
public class User{    
    @Id
    @Field(store = Store.YES, index = Index.UN_TOKENIZED)
    private Long id;

    @OneToMany(mappedBy = "user")
    @IndexedEmbedded
    private List<UserCompetence> competenceList= new ArrayList<UserCompetence>();

    // Snip: Other irrelevant fields and get/setters

} 
```

用户能力类

```
@Entity
@Table(name = "user_competence")
public class Competence {

    @ManyToOne
    @JoinColumn(name = "user_id", referencedColumnName = "id")
    @NotNull
    @ContainedIn
    private User user;

    @ManyToOne
    @JoinColumn(name = "competence_id", referencedColumnName = "id")
    @NotNull
    @IndexedEmbedded
    private Competence competence;

    @Basic
    @Field(index = Index.UN_TOKENIZED, store = Store.YES)
    @NumericField
    private Integer level;

     // Snip: Other irrelevant fields and get/setters
}

@Entity()
@Table(name = "competence")
public class Competence{

    @Column(name = "name")
    @Field(index = Index.TOKENIZED, store = Store.YES)
    private String name;

    // Snip: Other irrelevant fields and get/setters
} 
```

当我尝试构建一个强制某个能力和最低级别的查询时，它似乎找到了所有具有该能力的人以及具有指定级别的*任何能力。*如何使其仅返回具有正确 UserCompetence 子级的用户？我怀疑我需要重新映射我的一些索引才能完成这项工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T16:53:03.323

您当前的映射无法执行您尝试执行的操作。用户的所有*UserCompetence*实例都将作为同一用户*Document*的一部分进行索引。在这种情况下，数据会变平。如果您编写 AND 查询，您可能会在一个*UserCompetence*实例中获得一次能力命中，而在另一个实例中获得最低级别的一次命中。它们属于同一个用户，但不属于同一个用户实例的部分将被索引为同一个*UserCompetence*实例的一部分。

一种解决方法是索引*UserCompetence*。然后，您可以使用 AND 逻辑进行搜索以匹配单个*UserCompetence*实例。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T11:47:30.040

最后，我最终得到了一个自定义桥，它将两个字段合二为一，然后使用短语搜索在组合字段中进行搜索。

```
public class UserCompetenceBridge implements FieldBridge {
    @Override
    public void set(
            String name, Object value, Document document, LuceneOptions luceneOptions) {
        UserCompetence pc = (UserCompetence ) value;

        // Add competence level + competence id combined field for specific competence querying
        String lvl = pc.getLevel() == null ? "0" : pc.getLevel().toString();
        String comp = pc.getCompetence().getId().toString();

        String fieldValue = comp + SearchFields.FIELD_SEPERATOR + lvl;
        Field compLvl = new Field(SearchFields.COMPETENCE_LEVEL, fieldValue, Field.Store.NO, Field.Index.NOT_ANALYZED);
        compLvl.setBoost(luceneOptions.getBoost());
        document.add(compLvl);

        // Add competence names for free text search
        Field compName = new Field(SearchFields.COMPETENCE_NAME, pc.getCompetence().getName(), Field.Store.NO, Field.Index.ANALYZED);
        document.add(compName);

    }
}

@Entity
@Table(name = "user_competence")
@ClassBridge(impl = UserCompetenceBridge.class)
public class UserCompetence {

    @ManyToOne
    @JoinColumn(name = "user_id", referencedColumnName = "id")
    @ContainedIn
    private User user;

    @ManyToOne
    @JoinColumn(name = "competence_id", referencedColumnName = "id")
    private Competence competence;

    @Basic
    @Column(name = "competence_level")
    private Integer level;
} 
```

像这样搜索 level > x：

```
for (CompetenceParam cp : param.getCompetences()) {
    BooleanJunction or = qb.bool();
    for(int i = cp.getMinLevel(); i <= 5 ; i++){
        or = or.should(qb.phrase()
                .onField(SearchFields.COMPETENCE_LEVEL)
                .boostedTo(1 + i/5f)
                .sentence(cp.getCompetenceId() + " " + i)
                .createQuery());
    }
    queries.add(or.createQuery());
} 
```

这提升了高水平的人，看起来非常快。

# arrays - 在线性时间内将数组排序为 2-4+ 树

> ID：14897046
> 
> 赞同：-1
> 
> 时间：2013-02-15T14:39:39.810
> 
> 标签：arrays, algorithm, data-structures, b-tree, red-black-tree

我需要以下问题的帮助：

描述一个算法，给定一个大小为 n 的排序数组，构建一个 2-4+ 树，其中包含与数组相同的键。该算法应该在 O(n) 时间内运行。

我已经知道如何在线性时间内从排序数组构建一棵红黑树（因为在插入后修复树的函数的摊销时间是 O(1)）。

但是，我看不出这个技巧如何帮助我处理 2-4 棵树：它与插入这些树后的摊销固定时间有什么关系？（我不知道它是什么......）

还是我完全错了？

顺便说一句，我不能使用我们在 O(n) 中从红黑树构造 2-4 树的类中看到的技巧，它必须是 2-4+ 树算法的简单数组。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T17:24:51.430

红/黑树和 2-3-4 B 树之间有密切的联系。事实上，两者是等距的，这意味着任何 2-3-4 B-tree 都可以编码为红黑树，反之亦然。 [这个较旧的问题](https://stackoverflow.com/q/11803305/501557)讨论了细节。

使用此连接，您应该能够调整用于在线性时间内构建 ree-black 树的算法，而不是在线性 ime 中构建 2-3-4 B-tree。您可以构建红黑树，然后对其进行迭代以确定要构建的 B-tree 的结构，也可以尝试更改算法以直接构建 B-tree。

希望这可以帮助！

# c# - 未启用密码重置。将成员资格提供程序的 EnablePasswordReset 属性设置为 true

> ID：14897049
> 
> 赞同：0
> 
> 时间：2013-02-15T14:39:50.933
> 
> 标签：c#, asp.net

我想重置当前用户密码并获取新密码。我是新手。我该如何解决这个问题？

我的代码：

```
public static string ResetCurrentUserPassword(string userName)
{
    MembershipProvider p = (MembershipProvider)Membership.Providers["Default"];
    MembershipUser obj = Membership.GetUser(userName);
    return obj.ResetPassword();                          
} 
```

网络配置：

```
<siteMap defaultProvider="SitefinitySiteMap">
    <providers>
        <add name="SitefinitySiteMap" type="Telerik.Sitefinity.Web.SitefinitySiteMap, Telerik.Sitefinity" enablePasswordReset="true" taxonomyProvider="OpenAccessDataProvider" pageTaxonomy="Pages" rootNode="FrontendSiteMap" pageProvider="OpenAccessDataProvider"/>
    </providers>
</siteMap>
<roleManager enabled="false"/>
<membership defaultProvider="Default">
    <providers>
        <clear/>
        <add name="Default" type="Telerik.Sitefinity.Security.Data.SitefinityMembershipProvider, Telerik.Sitefinity"  enablePasswordReset="true"/>
    </providers>
</membership> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T14:45:41.837

看看以下链接：[Telerik EnablePasswordReset](http://www.telerik.com/help/sitefinity/developer-manual/resetting-administrator-password.html)

重要的部分如下：

成员资格提供程序的两个属性也应在 web.config 文件中进行更改。enablePasswordReset 应设置为 true，requiresQuestionAndAnswer 应设置为 false。

我认为您必须使用以下参数来增强您的 web.config：

```
<add name="Default" enablePasswordReset="true" ..... 
```

格雷茨没有人

# google-app-engine - 将 JPA 与 Google Cloud SQL 结合使用会导致 java.lang.NoClassDefFoundError: java.io.FileWriter 是受限类

> ID：14897054
> 
> 赞同：1
> 
> 时间：2013-02-15T14:40:02.323
> 
> 标签：google-app-engine, jpa

我在 Google Cloud SQL 上使用 JPA 时遇到问题。我得到一个 java.lang.NoClassDefFoundError: java.io.FileWriter，这是一个 Google App Engine 确实不支持的类。

我仔细按照[https://developers.google.com/eclipse/docs/cloudsql-jpatools](https://developers.google.com/eclipse/docs/cloudsql-jpatools)上的说明使用 EclipseLink 2.4.1 - Juno（我在 Linux Mint 14 上运行 Eclipse Juno）

我也尝试改用 EclipseLink 2.3.3 - Indigo，但结果相同。

我知道 Google Cloud SQL 数据库正在工作，因为我尝试根据以下内容使用 JDBC 访问：[https](https://developers.google.com/appengine/docs/java/cloud-sql/developers-guide) ://developers.google.com/appengine/docs/java/cloud-sql/developers-guide 并且按预期工作.

调用 JPA 的第一个方法是：

```
public static void createBookJPA(BookJPA c) 
{
  logger.info("Entering createBookJPA: [" + c.getIsbn() + "," + c.getBookName() + "]");
  EntityManager mgr = EMF.get().createEntityManager();
  try 
  {
    logger.info("before begin");
    mgr.getTransaction().begin();
    logger.info("before persist");
    mgr.persist(c);
    logger.info("before commit");
    mgr.getTransaction().commit();
    logger.info("after commit");
  }
  finally 
  {
    mgr.close();
  }
  logger.info("Exiting createBookJPA");
} 
```

这在日志中给出了这个：

```
feb 15, 2013 2:29:25 PM dk.lundogbendsen.schoubo.gae.ex5demo.BookService createBookJPA
INFO: Entering createBookJPA: [JPA:978-1-849690-44-7,Google App Engine Java and GWT Application Development]

[EL Info]: 2013-02-15 14:29:25.79--ServerSession(619728523)--EclipseLink, version: Eclipse Persistence Services - 2.4.1.v20121003-ad44345
[EL Info]: connection: 2013-02-15 14:29:29.088--ServerSession(619728523)--file:/home/jschoubo/Interests/Softfact/Develop/GAE/eclipseworkspaceGAE/lobGAE/war/WEB-INF/classes/_transactions-optional login successful
[EL Severe]: ejb: 2013-02-15 14:29:30.333--ServerSession(619728523)--java.lang.NoClassDefFoundError: java.io.FileWriter is a restricted class. Please see the Google  App Engine developer's guide for more details.

feb 15, 2013 2:29:30 PM dk.lundogbendsen.schoubo.gae.ex5demo.LobGAEEx5DemoSQLJPA createAuthor
WARNING: java.lang.NoClassDefFoundError: java.io.FileWriter is a restricted class. Please see the Google  App Engine developer's guide for more details. 
```

我在 Jetty 上以开发人员模式在本地运行代码，但我使用的是远程 Cloud SQL 库，因为我没有安装本地 MySQL。

此链接[JPA 与 Google Cloud SQL "NoClassDefFoundError: java.util.prefs.Preferences is a restricted class"](https://stackoverflow.com/questions/11001978)似乎谈到了类似的问题，但我已经检查过我的 persistence.xml 是否包含 com.google.appengine.api.rdbms。 AppEngineDriver，因此该解决方案无法解决我的问题...

任何帮助都感激不尽！

[编辑] 一些进一步的观察：

*   EclipseLink 的包含阻止了对 HRD 的 JDO 访问 - 当我尝试时，我在 javax.jdo.JDOHelper 上收到类加载器错误
*   删除 WEB-INF/lib 中的 JPA facet 和 eclipselink jar 使 NoClassDefFoundError 消失，并使代码完成所有步骤（开始、持久、提交）。但是，现在记录被写入本地的 dev.mode HRD 数据存储（local_db.bin）？所以也许问题是我如何让 DataNucleus JPA 使用 Cloud SQL ？

在某个地方（我找不到参考资料）我偶然发现 EclipseLink 完全是多余的，因为对 Google Cloud SQL（以及 HRD）的 JPA 支持已经在 DataNucleus 包中。有人可以证实这一点吗？

# javascript - 如果在服务器上修改，则重新加载页面

> ID：14897056
> 
> 赞同：2
> 
> 时间：2013-02-15T14:40:15.343
> 
> 标签：javascript, jquery, http

我试图通过 ajax 每秒请求页面自己的 url 来重新加载页面，如果它在服务器上发生更改，然后检查是否`textStatus`为`notmodified`.

```
setTimeout(function(){ 
  $.ajax({
    url : window.location.pathname,
    dataType : "text",
    ifModified : true,
    success : function(data, textStatus) {
      if (textStatus !== "notmodified") {
        location.reload();
      }
    }
  });
}, 1000); 
```

然而，`textStatus`总是`success`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T14:42:40.547

只需尝试使用随机变量来避免响应本身的缓存。另外，将 替换`!==`为`!=`。

```
setTimeout(function(){ 
  $.ajax({
    url : window.location.pathname + "?" + (new Date()).getMilliseconds(),
    dataType : "text",
    ifModified : true,
    success : function(data, textStatus) {
      if (textStatus != "notmodified") {
        location.reload();
      }
    }
  });
}, 1000); 
```

如果这不起作用，请尝试更换：

```
location.reload(); 
```

和：

```
location.href = location.href; 
```

这也取决于服务器端脚本。它还需要从服务器端发送...通过设置`no-cache`和`content-expires`。

# algorithm - 在大集合中找到最近的邻居

> ID：14897057
> 
> 赞同：1
> 
> 时间：2013-02-15T14:40:17.097
> 
> 标签：algorithm, search, indexing, computational-geometry, knn

我在多维空间中有大量点。而且我想为任何给定点找到几个邻居（在附近）（要求是避免扫描所有点）。

我想知道我的解决方案是否合适：

预处理：

1.  定义一组**正交轴**
2.  对每个轴上的每个点进行**投影**
3.  每个投影都与其到轴起点的距离（键）和点的标识符（值）相关联。**索引投影**- 将它们全部放入排序集（例如树集）

> ```
> dist = distance of projection to the start point of axis
> point_num = number of point 
> sorted_set.put( dist, point_num ) 
> ```

要查找任何给定点的邻居：

1.  找到它在每个轴上的投影
2.  使用 idex - 在每个 exis 上找到最近的投影
3.  寻找实际的邻居——所有结果的**交集**

> ```
> dx = radius of neighborhood (some constant) 
> 
> dist_1 = distance of projection of given point to start point of axis_1 
> list_1 = sorted_set_1.get_sub_set( dist_1 - dx, dist_1 + dx )
> 
> dist_2 = distance of projection of given point to start point of axis_2
> list_2 = sorted_set_2.get_sub_set( dist_2 - dx, dist_2 + dx ) 
> 
> return intersection_of( list_1, list_2 ) 
> ```

这是一个简单的例子：

![在此处输入图像描述](../Images/fee278de5d145280f1074ff2e01b2bbf.png)

相交`[2, 4, 1]`并`[4, 5]`产生答案`[4]`

请指出我，如果我在算法中犯了任何错误

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T14:50:53.530

您尚未向我们提供有关如何构建实际邻居集的说明，在这种情况下`[2, 4, 1]`和`[4, 5]`. 为什么你从一个索引中选择 3 个元素而从另一个索引中选择 2 个？

你还说你想找几个邻居。几个是多少，或者它应该是你的功能的输入？在示例中您只找到一个，算法是否应该决定您想要多少？

如果所有点都在您的一个轴上的一条线上，会发生什么情况？那么一组肯定包含所有元素。

# web-crawler - 禁用 robots.txt 签入 nutch

> ID：14897058
> 
> 赞同：4
> 
> 时间：2013-02-15T14:40:23.227
> 
> 标签：web-crawler, nutch

我想禁用 robots.txt 检查[Nutch](http://nutch.apache.org/)并从网站上抓取所有内容。 `Disable`意味着在获取或解析任何网站之前，跳过检查robot.txt。这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2020-09-14T18:24:04.477

虽然这个问题很老，但我个人觉得它仍然值得回答。

是的，可以禁用**robots.txt**流（但您需要更改和构建 Nutch 源代码）。

**注意：nutch 没有提供任何特定的配置来在获取实际 URL 之前禁用 robots.txt 获取。因为您所说的听起来像是 URL/域滥用，并且您想要访问它，而不管网站试图通过 robots.txt 说明其资源的内容。**

**怎么可能？** 如果您有一个真正需要跳过 robots.txt 的自定义用例，那么您可以执行以下操作

nutch 中的大部分插件(protocal-(http|httpclient|selenium|okhttp)) 使用**HttpRobotRulesParser**类来获取和解析 robots.txt 的内容

在**HttpRobotsRulesParser**这个特定方法中，您可以解析并返回**规则对象**。

```
public BaseRobotRules getRobotRulesSet(Protocol http, URL url,
      List<Content> robotsTxtContent) {

    if (LOG.isTraceEnabled() && isWhiteListed(url)) {
      LOG.trace("Ignoring robots.txt (host is whitelisted) for URL: {}", url);
    }

    String cacheKey = getCacheKey(url);
    BaseRobotRules robotRules = CACHE.get(cacheKey);

    if (robotRules != null) {
      return robotRules; // cached rule
    } else if (LOG.isTraceEnabled()) {
      LOG.trace("cache miss " + url);
    }

    boolean cacheRule = true;
    URL redir = null;

    if (isWhiteListed(url)) {
      // check in advance whether a host is whitelisted
      // (we do not need to fetch robots.txt)
      robotRules = EMPTY_RULES;
      LOG.info("Whitelisted host found for: {}", url);
      LOG.info("Ignoring robots.txt for all URLs from whitelisted host: {}",
          url.getHost());

    } else {
      try {
        URL robotsUrl = new URL(url, "/robots.txt");
        Response response = ((HttpBase) http).getResponse(robotsUrl,
            new CrawlDatum(), false);
        if (robotsTxtContent != null) {
          addRobotsContent(robotsTxtContent, robotsUrl, response);
        }
        // try one level of redirection ?
        if (response.getCode() == 301 || response.getCode() == 302) {
          String redirection = response.getHeader("Location");
          if (redirection == null) {
            // some versions of MS IIS are known to mangle this header
            redirection = response.getHeader("location");
          }
          if (redirection != null) {
            if (!redirection.startsWith("http")) {
              // RFC says it should be absolute, but apparently it isn't
              redir = new URL(url, redirection);
            } else {
              redir = new URL(redirection);
            }

            response = ((HttpBase) http).getResponse(redir, new CrawlDatum(), false);
            if (robotsTxtContent != null) {
              addRobotsContent(robotsTxtContent, redir, response);
            }
          }
        }

        if (response.getCode() == 200) // found rules: parse them
          robotRules = parseRules(url.toString(), response.getContent(),
              response.getHeader("Content-Type"), agentNames);

        else if ((response.getCode() == 403) && (!allowForbidden))
          robotRules = FORBID_ALL_RULES; // use forbid all
        else if (response.getCode() >= 500) {
          //cacheRule = false; // try again later to fetch robots.txt
          robotRules = EMPTY_RULES;
        } else
          robotRules = EMPTY_RULES; // use default rules
      } catch (Throwable t) {
        if (LOG.isInfoEnabled()) {
          LOG.info("Couldn't get robots.txt for " + url + ": " + t.toString());
        }
        //cacheRule = false; // try again later to fetch robots.txt
        robotRules = EMPTY_RULES;
      }
    }

    if (cacheRule) {
      CACHE.put(cacheKey, robotRules); // cache rules for host
      if (redir != null && !redir.getHost().equalsIgnoreCase(url.getHost())
          && "/robots.txt".equals(redir.getFile())) {
        // cache also for the redirected host
        // if the URL path is /robots.txt
        CACHE.put(getCacheKey(redir), robotRules);
      }
    }

    return robotRules;
  } 
```

你可以继续用下面的方法替换

```
 @Override
  public BaseRobotRules getRobotRulesSet(Protocol http, URL url,
      List<Content> robotsTxtContent) {
       return EMPTY_RULES; // always return empty rules to skip robots.txt access.
    } 
```

您只是在通过返回 EMPTY_RULES 来嘲笑这种行为。

小提示：始终建议阅读和访问 robots.txt 中提到的资源。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T21:28:25.510

据我了解，我们无法在 nutch 中禁用 robots.txt。

# asp.net - 抛出异常后如何记录详细信息？

> ID：14897059
> 
> 赞同：-1
> 
> 时间：2013-02-15T14:40:24.867
> 
> 标签：asp.net, exception-handling

我对.net 很陌生，所以我的知识在许多领域都非常有限。

我现在正在创建一个网站，并创建了一些静态方法来帮助我 - 这是一个例子：

```
 public static void ThrowNull<T>(this T obj, string param) where T : class
    {
        if (param.IsNullOrEmpty())
            Throw<ArgumentException>("Undefined param!");

        if (obj.IsNull())
            Throw<ArgumentNullException>(param);
    } 
```

我在其他方法中使用它作为参数保护，调用如下： myVar.ThrowNull("myVar");

上面提到的 Throw 方法如下所示：

```
 static void Throw<E>(string message) where E : Exception
    {
        throw Activator.CreateInstance(typeof(E), message) as E;
    } 
```

这一切都非常适合测试，但我希望能够记录来自用户的详细信息。如何从这一点获取堆栈跟踪信息？

任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T14:43:10.250

```
Exception newException = Activator.CreateInstance(typeof(E), message) as E;
<Something?>newException.StackTrace
throw newException; 
```

# grails - 模拟日志对象

> ID：14897063
> 
> 赞同：3
> 
> 时间：2013-02-15T14:40:34.000
> 
> 标签：grails, groovy, mocking

我有这样的代码：

```
@TestFor(MyService)
class MyServiceTests {
    void testIt() {
        def logTo = []
        def loggerMock = mockFor(service.log.class)
        loggerMock.demand.error(1..1) { String msg, Exception ex ->
            logTo << [level: 'error', msg: msg, ex: ex]
        }
        service.log = loggerMock.createMock()
    }
} 
```

它失败了：

```
| Failure:  testIt(MyServiceTests)
|  java.lang.ArrayIndexOutOfBoundsException: 0
    at SLF4JLog_groovyProxy.<init>(Script1.groovy:4)
    at Script1.run(Script1.groovy:8)
    at grails.test.GrailsMock.createMock(GrailsMock.groovy:91)
    at package.MyServiceTests.testIt>>>(MyServiceTests.groovy:25) 
```

指着线`service.log = loggerMock.createMock()`。它出什么问题了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T01:11:32.990

这是我在尝试模拟没有 0 参数构造函数的对象时收到的非常无信息的错误消息。我不知道你想在那里模拟什么类，因为你是从另一个类的成员那里得到的，但我会检查它是否可以构造为 Bean（没有参数），如果不，这可能是问题所在。

再看一点，我猜 SLF4JLog 类没有 0 参数构造函数。为了使用 mockFor 模拟它，您需要按照以下方式进行操作（请注意，您需要确定 SLF4JLog 构造函数可以接受哪些参数：

```
 void test_create_proxy_instance_with_constructor_arguments() {
    def mock = new MockFor(MockForTestClassWithConstructorArgs)
    mock.demand.amethod { "from mock with proxy"}

    def proxy = mock.proxyInstance(["value1", "value2"]as Object[])
    assertEquals "from mock with proxy", proxy.amethod()
    mock.verify proxy
  } 
```

来源： http: [//groovy.codehaus.org/Using+MockFor+and+StubFor](http://groovy.codehaus.org/Using+MockFor+and+StubFor)

这可能比您需要的更多。我想你正在测试一些使用记录器的类？希望该类不按类（静态类型）引用该记录器，而是使用“def”。在这种情况下，您可以传入任何恰好具有您的类在 Logger 对象上调用的所有“方法”的旧存根（再次参见参考资料）。

# java - 如何在另一个进程开始之前绘制 jrame 组件

> ID：14897066
> 
> 赞同：0
> 
> 时间：2013-02-15T14:40:49.023
> 
> 标签：java, multithreading, swing, jframe

```
private void addSomeComponentsToFrame(){
JFrame frame = new JFrame();
.....
frame.setVisible(true);

frame.getContentPane().validate();
frame.getContentPane().repaint();

runOtherTask();
} 
```

我想在 runOtherTask 方法启动之前查看框架对象及其组件，但是当我尝试运行 addSomeComponentsToFrame 方法时，框架出现（作为黑色矩形）但冻结，并且在 runOtherTask 方法完成后它在屏幕上显示框架的组件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T14:43:50.817

> 当我尝试运行 addSomeComponentsToFrame 方法时，框架出现（作为黑色矩形）但会冻结，并且在 runOtherTask 方法完成后，它会在屏幕上显示框架的组件。

听起来你正在阻止[`Event Dispatch Thread`](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/dispatch.html)一个长时间运行的任务。

您可能希望将该任务从 EDT 卸载到单独的*线程*：

`runOtherTask`如果您更好地使用Swing 组件：

*   [Swing Worker](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/worker.html)（参见[此](https://stackoverflow.com/questions/12641887/swingworker-in-java/12642215#12642215)示例）
*   [摇摆定时器](http://docs.oracle.com/javase/tutorial/uiswing/misc/timer.html)（见[这个](https://stackoverflow.com/questions/14074329/using-sleep-for-a-single-thread/14074427#14074427)例子）

否则，您可以使用（注意以下内容不在 GUI 中运行，`Event Dispatch Thread`因此不允许在其中操作 Swing 组件）：

*   [线](http://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html)
*   [Timer/TimerTask](http://docs.oracle.com/javase/7/docs/api/java/util/Timer.html)（见[这个](https://stackoverflow.com/questions/11707066/timer-in-java-thread/11707987#11707987)例子）

就像旁注一样，不需要：

```
frame.getContentPane().validate();
frame.getContentPane().repaint(); 
```

简单地：

```
frame.validate();
frame.repaint(); 
```

此外，如果您的 java 版本允许使用`revalidate()`而不是`validate()`. 但这些只有在从可见容器中添加/删除组件时才需要。

# java - JPA多对多合并所有者触发器删除连接表

> ID：14897067
> 
> 赞同：7
> 
> 时间：2013-02-15T14:40:50.170
> 
> 标签：java, hibernate, jpa, orm, many-to-many

我在 Customer 和 BusinessUnit 之间有多对多的关系：

```
public class Customer extends AbstractEntity {

    @JoinTable(name = "CUS_BUS_UNITS", 
            joinColumns = {
                @JoinColumn(name = "CUS_ID", referencedColumnName = "CUS_ID")},
            inverseJoinColumns = {
                @JoinColumn(name = "BUS_ID", referencedColumnName = "BUS_ID")})
    @ManyToMany
    private Collection<BusinessUnit> businessUnits;
}

public class BusinessUnit extends AbstractEntity {

    @ManyToMany(mappedBy = "businessUnits")
    private Collection<Customer> customers;

} 
```

当我调用 entityManager.merge(customer); 在客户（已经在数据库中，未更改）我在日志中看到这两个 sql 命令：

> 休眠：更新 CUSTOMERS 设置 CUS_DESCR=?、CUS_NAME=?、CUS_ENABLED=? CUS_ID=? 休眠：从 CUS_BUS_UNITS 中删除 CUS_ID=?

为什么休眠试图从连接表中删除记录？我只需要更新连接表中的客户记录和可能的记录 - 取决于我是否添加或删除了客户的业务部门。不应更新、删除或插入业务单位。

**编辑：** 我的 equals/hashCode 是（在 AbstractEntity 中定义）：

```
public int hashCode() {
    if (getId() != null) {
        return getId().hashCode();
    }
    return super.hashCode();
}
public boolean equals(Object obj) {
    if (this == obj) {
        return true;
    }
    if (obj == null) {
        return false;
    }
    if (getClass() != obj.getClass()) {
        return false;
    }
    AbstractEntity other = (AbstractEntity) obj;
    if (getId() == null || other.getId() == null) {
        return false;
    }
    if (!getId().equals(other.getId())) {
        return false;
    }
    return true;
} 
```

**编辑 2** 表格转换器：

```
@FacesConverter("businessUnitConverter")
public class BusinessUnitConverter implements Converter {

    /**
     * {@inheritDoc}
     */
    @Override
    public String getAsString(FacesContext context, UIComponent component, Object object) {
        return ((BusinessUnit) object).getId().toString();
    }

    @Override
    public Object getAsObject(FacesContext context, UIComponent component, String value) {
        BusinessUnit businessUnit = new BusinessUnit();
        businessUnit.setId(Long.parseLong(value));
        return businessUnit;
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T11:45:16.807

我找到了答案：[http ://assarconsulting.blogspot.fr/2009/08/why-hibernate-does-delete-all-then-re.html](http://assarconsulting.blogspot.fr/2009/08/why-hibernate-does-delete-all-then-re.html)

由于使用了 Collection，此行为是正确的（请参阅链接文章）。我使用 Set 而不是 collection，它工作正常。

# python - 在 Pygame 中绘制箭头

> ID：14897071
> 
> 赞同：1
> 
> 时间：2013-02-15T14:40:56.107
> 
> 标签：python, graphics, python-2.7, pygame

实际上我正在制作一个程序来通过使用保留表来实现最小平均延迟（流水线）......
我已经成功完成了后端，现在尝试在 Pygame 上设计转换图。
问题是我需要标记一个带有向外箭头的传出边缘**（如：a-->b）**但无法理解如何执行此操作...

```
pygame.draw.line(screen, BLACK, (x1,y1), (x2,y2), width=1) 
```

这条特定的线只画了一条简单的线。我尝试使用**圆圈**代替**箭头**，但箭头肯定会更好看...
**任何想法都非常受欢迎** 谢谢...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T19:55:52.963

您需要做的就是用`pygame.draw.polygon()`. 例子：

```
pygame.draw.polygon(window, (0, 0, 0), ((0, 100), (0, 200), (200, 200), (200, 300), (300, 150), (200, 0), (200, 100))) 
```

如果您需要不同的尺寸，只需将其绘制到表面对象上并使用`pygame.transform.scale`，或手动更改点的位置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T14:48:24.140

查看`pygame.draw.lines()`或`pygame.draw.polygon()`。看起来其中任何一个都可以帮助您绘制三角形。

文档： http: [//www.pygame.org/docs/ref/draw.html](http://www.pygame.org/docs/ref/draw.html)

# asp.net-mvc - Plupload 仅适用于 MVC 主页

> ID：14897072
> 
> 赞同：1
> 
> 时间：2013-02-15T14:41:03.703
> 
> 标签：asp.net-mvc, amazon-s3, plupload

我对 Plupload 有一个奇怪的问题，希望你能帮助我。

我将它与 MVC 和 Amazon S3 一起使用，并且以样本为例，它一切正常。

所以它目前在 HomeController Index 视图中。

因此，如果我导航到 localhost/ 它可以正常工作。

如果我导航到 localhost/Home，则“添加文件”按钮不可点击，因为 _Flash_Container 挡住了路。

即使我使用 Firebug 将其删除，“添加文件”按钮也不会执行任何操作。

有人有什么主意吗？

我的代码如下：

```
@model MVC3PluploadToAmazonS3.ViewModels.FileUploadViewModel
@{
    ViewBag.Title = "Index";
}

<h2>Upload to Amazon S3</h2>

<div id="uploader">
    <p>You browser doesn't have Flash, Silverlight, Gears, BrowserPlus or HTML5 support.</p>
</div>

<input type="hidden" name="key" value="@Model.FileId-${filename}">
<input type="hidden" name="AWSAccessKeyId" value="@Model.PublicKey">
<input type="hidden" name="acl" value="@Model.Acl">
<input type="hidden" name="success_action_redirect" value="@Model.RedirectUrl">
<input type="hidden" name="policy" value="@Model.Policy">
<input type="hidden" name="signature" value="@Model.Signature">

@section scriptFiles {
<script>

$(document).ready(function () {

    $("#uploader").plupload({
        //amazon settings.
        runtimes: 'flash,silverlight',
        url: 'https://rapplex.s3-eu-west-1.amazonaws.com',
        max_file_size: '100000000mb',
        multipart: true,
        multipart_params: {
            'key': '${filename}', // use filename as a key
            'Filename': '${filename}', // adding this to keep consistency across the runtimes
            'acl': $('#Acl').val(),
            'Content-Type': 'binary/octet-stream',
            'success_action_status': '201',
            'AWSAccessKeyId': $('#AWSAccessKeyId').val(),
            'policy': $('#Policy').val(),
            'signature': $('#Signature').val()
        },
        // optional, but better be specified directly
        //file_data_name: 'file',
        // re-use widget (not related to S3, but to Plupload UI Widget)
        //multiple_queues: true,

        // Resize images on clientside if we can
        //resize: { width: 320, height: 240, quality: 90 },

        // Specify what files to browse for
        filters: [
           // { title: "Video files", extensions: "mp4,m4v,wmv,avi,mov,mpg,mpeg,mkv" }
            { title: "Image files", extensions: "jpg,gif,png" },
            //{ title: "Zip files", extensions: "zip" }
        ],

        // Flash settings
        flash_swf_url: 'Scripts/plupload/plupload.flash.swf',

        // Silverlight settings
        silverlight_xap_url: 'Scripts/plupload/plupload.silverlight.xap'
    });

});
</script>

} 
```

任何帮助将不胜感激

编辑：好的，我已经做了一些进一步的调查。

似乎 localhost/home 确实有效，但 localhost/home/ 和 localhost/home/index 不起作用。

我注意到在初始 css 文件中有一堆 @Import *.css 并将它们更改为 /path/to/file.css 这没有什么区别。我还尝试从@imports 中删除第一个正斜杠，但这只是删除了所有样式，所以我知道不是这样。

我还尝试将 .swf 路径更改为绝对路径（localhost:2668/Scripts/plupload/plupload.flash.swf），但这也没有用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T09:31:31.220

正如 phloopy 指出的那样，它实际上是通向 swf 的路径。

答案见评论。

谢了哥们。

# java - 返回不正确的浮点值

> ID：14897075
> 
> 赞同：2
> 
> 时间：2013-02-15T14:41:09.633
> 
> 标签：java, android

我有一个方法 getFar() 应该返回 5.1f：

```
 float far = 5.1f;

 public float getFar()
 {return far;} 
```

但是当我从另一个班级调用它时

```
 System.out.println("Far: "+ mRenderer.getFar()); 
```

它每次返回不同的值。在一次运行中，它可以是 5.25...，在另一个 5.78... 中，等等

我怎样才能返回 5.1f？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T14:54:49.400

您确定 mRenderer.getFar() 正在调用您的 getFar() 吗？它是父类中方法的重载还是覆盖？mRenderer 是否被重新分配给具有不同值的不同实例？

# hibernate - 具有多列的休眠 IN 子句

> ID：14897082
> 
> 赞同：9
> 
> 时间：2013-02-15T14:41:35.630
> 
> 标签：hibernate

需要知道如何构造一个 Hibernate Query 来获取匹配`IN`包含多个列值的子句的结果。

例如，

```
Query query=session.createQuery( "from entity e where (e.abc, e.xyz) in (:list)" );
query.setParameterList( "list", list ); 
```

这`list`将是一个二维数组，它可以包含基本类型的基本包装对象，例如，`Integer`等`String`。

这可能吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-10-17T01:07:01.417

在这里写下我是如何实现这一点的。基本上，我们需要从我们需要查询的列集合中创建一个 Hibernate 组件（读取 @Embeddable 对象）并将其嵌入到主实体中。

列组可以组合如下：

```
@Embeddable
public class CompositeColumns{
  private String col1;
  private String col2;

  //Empty constructor is required by Hibernate for instantiation
  public CompositeColumns(){
  }

  public CompositeColumns(String col1, String col2){
            this.col1 = col1;
            this.col2 = col2;
      }

  @Column(name="COL1")
  public String getCol1(){
  }
  ...
  ... 
  //Rest of getters and setters
} 
```

* * *

将上述内容嵌入到您的主要实体类中，如下所示：

```
@Entity
public class MyEntity{
 @Id
 private Integer id;
 private String col3;
 private String col4
 @Embedded
 private CompositeColumns pairedCol1Col2;
 ...
 ...
 //Getters Setters

} 
```

* * *

查询将如下所示：

```
List<CompositeColumns> cols = //get a list of CompositeColumns type

Query query=session.createQuery( "from MyEntity where pairedCol1Col2 in (:list)" );
query.setParameterList( "list", list ); 
```

这可以完成工作。

*注意：我在 Oracle 数据库上运行它*

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-15T15:20:59.130

你在这里问的是元组语法。Hibernate 支持它，但不幸的是许多数据库不支持它......

[http://docs.jboss.org/hibernate/core/3.3/reference/en/html/queryhql.html#queryhql-tuple](http://docs.jboss.org/hibernate/core/3.3/reference/en/html/queryhql.html#queryhql-tuple)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2020-01-23T11:27:14.363

实体类 - 在 @Embeddable 类中创建多个可搜索列，如下所述。

```
@Entity
@Table(name="channels_store_images")
@Data
public class ChannelsStoreImages {
  @Id
  @GeneratedValue(strategy = GenerationType.IDENTITY)
  @Column(name="id")
  private Integer id;

  @Embedded
  private CompositeColumns compositeColumns;

  @Embeddable
  @Data
  @AllArgsConstructor
  public static class CompositeColumns {
    @Column(name="partner_id")
    private String partnerId;
    @Column(name="entity_type")
    private String entityType;
    public CompositeColumns(){
    }
  }
} 
```

然后创建@Embeddable 类的对象并按如下所述点击查询

```
public List<ChannelsStoreImages> getChannelsStoreImagesByPartnerIdAndType(List<ChannelsStoreImages.CompositeColumns> shopIdAndType) { 
  Query dbQuery =  masterEntityManager.createQuery("From ChannelsStoreImages 
               where compositeColumns IN (:query)",ChannelsStoreImages.class);
  dbQuery.setParameter("query",shopIdAndType);
  List<ChannelsStoreImages> channelsStoreImagesList = dbQuery.getResultList();
  return channelsStoreImagesList;
} 
```

# linux - Linux 中的信号中断代码

> ID：14897084
> 
> 赞同：3
> 
> 时间：2013-02-15T14:41:41.657
> 
> 标签：linux, signals, irix

我正在将代码从 IRIX 移植到 Linux RedHat，目前正在使用信号处理程序，其形式为

```
void sig_handler (int sig, int code, struct sigcontext *). 
```

这些代码例如是 BRK_USERBP、BRK_SSTEPBP、BRK_OVERFLOW、BRK_DIVZERO 和 BRK_MULOVF。

我的搜索表明 Linux 不支持它。可以？

如果不是，我可以使用什么等价物/替代品？

[我在sigaction](http://www.kernel.org/doc/man-pages/online/pages/man2/sigaction.2.html)的 siginfo_t 中看到了 si_code ，但它似乎不适合这个目的。

谢谢！

# android - Viewpager 通过按下按钮将图片从第 1 页更改为第 2 页，但不通过滑动

> ID：14897085
> 
> 赞同：0
> 
> 时间：2013-02-15T14:41:43.163
> 
> 标签：android, scroll, imageview, android-viewpager, adapter

这是我在 viewPager 上的监听器：

```
viewPager.setOnPageChangeListener(new OnPageChangeListener() {

            @Override
            public void onPageSelected(int arg0) {
                pageNr.setText("page: " + (viewPager.getCurrentItem() + 1) + "/" + viewPager.getChildCount());
                currentSlide = viewPager.getCurrentItem();
                page = viewPager.getCurrentItem();
                viewPager.setAdapter(new SubcategoriesPagerAdapter(getActivity(), inflater, videos, numberOfPages));
            }

            @Override
            public void onPageScrolled(int arg0, float arg1, int arg2) {
            }

            @Override
            public void onPageScrollStateChanged(int arg0) {

            }
        }); 
```

这是我的按钮：

```
 nextBtn.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                goToNextSlide();
                pageNr.setText("page: " + (viewPager.getCurrentItem() + 1) + "/" + viewPager.getChildCount());
                if (categ == 2) {
                    numberOfPages = 2;
                }
                viewPager.setAdapter(new SubcategoriesPagerAdapter(getActivity(), inflater, videos, numberOfPages, categ));
            }
        });
        previousBtn.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                goToPreviousSlide();
                pageNr.setText("page: " + (viewPager.getCurrentItem() + 1) + "/" + viewPager.getChildCount());
                if (categ == 2) {
                    numberOfPages = 2;
                }
                viewPager.setAdapter(new SubcategoriesPagerAdapter(getActivity(), inflater, videos, numberOfPages, categ));
            }
        });
      private void goToNextSlide() {
        currentSlide = viewPager.getCurrentItem();
        page = viewPager.getCurrentItem();
        if (currentSlide < viewPager.getChildCount()) {
            viewPager.setCurrentItem(currentSlide + 1);
        }
    }

    private void goToPreviousSlide() {
        currentSlide = viewPager.getCurrentItem();
        page = viewPager.getCurrentItem();
        if (currentSlide > 0) {
            viewPager.setCurrentItem(currentSlide - 1);
        }
    } 
```

现在，如果我按下下一个或上一个按钮，它会更改页面以及页面中的图片（我有 9 张图片，一个 3x3 的图像视图矩阵）当我滚动到第二页时，有时它会更改图片，有时它没有，而且viewpager也开始变得疯狂，有时我不能从第二页回到第一页，但我可以向右滚动，无限次，但每次它显示第二页。我能做什么。或者是否可以使 Viewpage 不可滚动，所以我只能从按钮更改页面？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T12:59:31.280

像这样创建了一个自定义 ViewPager：

```
public class CustomViewPager extends ViewPager {

private boolean isPagingEnabled;

public CustomViewPager(Context context, AttributeSet attrs) {
    super(context, attrs);
    this.isPagingEnabled = true;
}

@Override
public boolean onTouchEvent(MotionEvent event) {
    if (this.isPagingEnabled) {
        return super.onTouchEvent(event);
    }

    return false;
}

@Override
public boolean onInterceptTouchEvent(MotionEvent event) {
    if (this.isPagingEnabled) {
        return super.onInterceptTouchEvent(event);
    }

    return false;
}

public void setPagingEnabled(boolean b) {
    this.isPagingEnabled = b;
}
} 
```

# jquery - addClass 不起作用

> ID：14897086
> 
> 赞同：0
> 
> 时间：2013-02-15T14:41:46.060
> 
> 标签：jquery, addclass

我正在尝试使用 .addClass() 将不同的段落添加到相同的段落中，但它不起作用，它总是将所有段落添加到 div 中。

这是我的html代码：

```
<div class="topText" id="text1">
    <a class="p1">link1</a>
    <a class="p2">link2</a>
    <a class="p3">link3</a>
    <a class="p4">link4</a>
    <div class="popUp">
    <p class="t1" style="text-align:justify;">text 1</p>
    <p class="t2" style="text-align:justify;">text 2</p>
    </div>
    </div> 
```

这是我的 Jquery 代码：

```
$(document).ready(function(){

    $('#text1 p').click(function(event){

    $('.popUp').toggle(function(){
    $(this).animate({ width: 500, height: 200}).css('visibility','visible');

  //event.target è l'elemento su cui l'utente ha cliccato
  var $target = $(event.target);

  //inibisce il comportamento standard del link
  event.preventDefault(); 

  if ($target.hasClass('p1')) {
  $('.popUp').addClass('t1');
  } 
  else if ($target.hasClass('p2')) {
    $('.popUp').removeClass('.t1').addClass('.t2');

  } 
    else if ($target.hasClass('p3')) {

  }              
    else if ($target.hasClass('p4')) {

  } 
        });

    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T14:51:43.810

`addClass`用于向元素添加 CSS 类。要“添加”段落，请使用更合适的方法`.append`，例如。[.append 文档](http://api.jquery.com/append/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T14:44:56.347

也许我误解了你的目标，但 addClass() 不会创建元素。它将 HTML 类属性添加到选择器。

# visual-studio - 在 Visual Studio 2012 中打开了一个 Visual Studio 2010 MVC3 项目，Nuget 声称没有安装包

> ID：14897087
> 
> 赞同：0
> 
> 时间：2013-02-15T14:41:48.107
> 
> 标签：visual-studio, visual-studio-2012, nuget

在 Visual Studio 2012 中打开了一个 Visual Studio 2010 MVC3 项目，NuGet 声称项目中没有安装包。

如何解决这个问题？

它的发生有什么原因吗？

# batch-file - 如何为昨天创建日期戳

> ID：14897097
> 
> 赞同：0
> 
> 时间：2013-02-15T14:42:30.533
> 
> 标签：batch-file

我正在尝试获取带有昨天文件名中的日期戳的文件内容（WH.FTBBT20130214.csv）。我为今天创建了一个日期戳变量，但在谷歌中找不到任何告诉我如何使用相同格式回溯我的日期戳的任何内容。这是我在批处理文件中创建的代码：

```
@echo off

REM ***** 20130215 MS Define DateStamp variable *****
Set DateStamp=%date:~10,4%%date:~4,2%%date:~7,2%
Set DateStamp=%DateStamp%
REM Set DateStamp=20130212

echo DateStamp: %DateStamp% 
```

任何帮助/方向将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T15:18:49.537

我找到了答案。以防万一有人感兴趣：

设置 /A DateStamp=(%date:~10,4%%date:~4,2%%date:~7,2%)-1

回显日期戳：%DateStamp%

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T15:36:31.220

您不能总是从日期中减去 1 并获得昨天的日期。假设是 3 月 1 日。昨天是什么？3 月 0 日？那样不行。更好的方法是使用 vbscript 的`Date()`对象并从中减去一天。

```
@echo off
setlocal
REM ***** 20130215 MS Define DateStamp variable *****
echo d = DateAdd^("d", -1, Date^(^)^)>yesterday.vbs
echo wscript.echo DatePart^("yyyy", d^) ^& "/" ^& DatePart^("m", d^) ^& "/" ^& DatePart^("d", d^)>>yesterday.vbs
for /f "tokens=1-3 delims=/" %%I in ('cscript /nologo yesterday.vbs') do (
    set Year=%%I
    if %%J LEQ 9 (set Month=0%%J) else set Month=%%J
    if %%K LEQ 9 (set Day=0%%K) else set Day=%%K
)
set DateStamp=%Year%%Month%%Day%
del /q yesterday.vbs
echo %DateStamp% 
```

# c# - 选择具有唯一 linq 查询的所有相关实体

> ID：14897098
> 
> 赞同：0
> 
> 时间：2013-02-15T14:42:30.190
> 
> 标签：c#, linq, entity-framework

我有一个与自身有关系的类别表。那就是它是一个树层次视图，例如：oldfather_category -> Father_category -> child_category。

![类别实体](../Images/3997cc0bc28a440b79280db732b01f40.png)

所以我需要在这张桌子上建立树视图。我需要它的所有行。起初我这样做：

```
 IEnumerable<Category> list = _service.Get().Where(c => c.ParentID == null);
    Node(list); 
```

当我像这样使用递归时：

```
 private void Node(IEnumerable<Category> list)
    {
        foreach (Category c in list)
        {
            //if has childs
            if (c.Category1.Count > 0)
                Node(c.Category1);
        }
    } 
```

每次我调用**c.Category1.Count**属性（延迟执行魔法）时，实体框架都会构建选择。但是我想在第一条语句中加载所有实体，我想对 sql server 进行唯一的选择。我怎样才能做到这一点？我希望问题很清楚）

编辑：当我使用 ToList() 时 Category1 属性为 null 无论如何

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T14:59:42.253

如果不在数据库服务器上编写函数来循环遍历所有子项，就不可能加载树中的所有元素。

但是，根据您需要运行的实际查询，您可能能够破解一些有效的东西。如果特定元素将始终是任何树的根，您可以将每个元素的第三个引用添加到树的根，然后在内存中构建实际的树。例如，在博客评论的情况下，博客帖子 ID 可能始终是树的根，然后每个评论仍然有它作为响应的父节点。为每个元素添加一个根标识符并对其进行查询，然后在内存中递归地构建树。

如果您的查询的根并不总是这种预定义类型的元素，那么您最好为您的服务器编写一个函数来处理这种情况。但是，您将失去对此查询使用实体框架的能力。

# python - 在 pandas 聚合函数中创建多个列

> ID：14897100
> 
> 赞同：9
> 
> 时间：2013-02-15T14:42:40.783
> 
> 标签：python, pandas, time-series

我想在像内置 ohlc 方法一样重新采样 pandas DataFrame 时创建多个列。

```
def mhl(data):
    return pandas.Series([np.mean(data),np.max(data),np.min(data)],index = ['mean','high','low'])

ts.resample('30Min',how=mhl) 
```

死于

```
Exception: Must produce aggregated value 
```

有什么建议么？谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-16T02:15:53.597

您可以将函数字典传递给该`resample`方法：

```
In [35]: ts
Out[35]:
2013-01-01 00:00:00     0
2013-01-01 00:15:00     1
2013-01-01 00:30:00     2
2013-01-01 00:45:00     3
2013-01-01 01:00:00     4
2013-01-01 01:15:00     5
...
2013-01-01 23:00:00    92
2013-01-01 23:15:00    93
2013-01-01 23:30:00    94
2013-01-01 23:45:00    95
2013-01-02 00:00:00    96
Freq: 15T, Length: 97 
```

创建函数字典：

```
mhl = {'m':np.mean, 'h':np.max, 'l':np.min} 
```

将字典传递给 的`how`参数`resample`：

```
In [36]: ts.resample("30Min", how=mhl)
Out[36]:
                      h     m   l
2013-01-01 00:00:00   1   0.5   0
2013-01-01 00:30:00   3   2.5   2
2013-01-01 01:00:00   5   4.5   4
2013-01-01 01:30:00   7   6.5   6
2013-01-01 02:00:00   9   8.5   8
2013-01-01 02:30:00  11  10.5  10
2013-01-01 03:00:00  13  12.5  12
2013-01-01 03:30:00  15  14.5  14 
```

# ruby-on-rails - RubyMine 是否具有像 Netbeans 那样的快速差异功能？

> ID：14897101
> 
> 赞同：0
> 
> 时间：2013-02-15T14:42:47.380
> 
> 标签：ruby-on-rails, git, rubymine

我想知道是否可以在 RubyMine 中打开快速差异功能。默认情况下，在 Netbeans 中，您会在普通编辑器的左侧看到一个绿色、蓝色或红色条，显示相对于以前的修订版（Git 或 SVN）添加/修改/删除的内容。

[你也可以在 eclipse 中开启这个选项](https://stackoverflow.com/questions/2220111/subclipse-marking-code-changes-like-in-netbeans)。

它存在于 RubyMine 中吗？

* * *

为了说明，在这张图片上，您可以看到添加的代码（绿色）和修改的代码（绿色）作为快速差异：

![快速差异 netbeans](../Images/be96d2e1cfdf1696dfac270e6d7b5f27.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T15:41:36.710

是的，如果您启动由 VCS 工作副本创建的项目（例如 git clone 或 SVN checkout），[它会](http://www.jetbrains.com/ruby/features/ruby_version_control.html)默认启用。

如果没有启用 VCS，您可以在项目设置中启用它。

这是内联差异的预览。

![在此处输入图像描述](../Images/afdee58e79ec96ba1ecd98ed195b9000.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T15:36:51.050

是的。只要您启用了版本控制，RubyMine 就会显示此类差异。无需打开它；始终显示差异。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-10T13:06:57.503

如果你在 ruby​​mine 中打开了一个用 git 克隆的项目；如果 ruby​​mine 没有显示快速差异，请尝试以下操作：[https](https://stackoverflow.com/a/18255516/311744) ://stackoverflow.com/a/18255516/311744 。这将告诉 ruby​​mine 使用当前的 .git。

# c - 在 C 中具有三种情况的 Switch 语句。第三种情况未正常运行

> ID：14897102
> 
> 赞同：0
> 
> 时间：2013-02-15T14:42:50.357
> 
> 标签：c, switch-statement, break, do-while

下面是我编写的一个 do-while 循环。当我运行它时，前两个案例完成了它们的工作并完美运行。然而。第三种情况应该退出程序，但它什么也不做，只是回到 do-while 循环开头的一系列 printf 语句。关于我做错了什么的任何建议？

```
do
{
    printf("Choose one of the following (1, 2, or 3) \n");
    printf("1\. Find GCD of two positive integers\n");
    printf("2\. Sort 3 integers in the ascending order\n");
    printf("3\. Quit the program\n");
    printf("Please enter your choice: ");
    scanf("%d", &option);
    switch (option)
    {
        case 1:
            gcd(p, q);
            printf("\nDo you want to try again? Say Y(es) or N(o): ");
            getchar();
            response = getchar();
            break;

        case 2:
            sort(p, q, r);
            printf("\nDo you want to try again? Say Y(es) or N(o): ");
            getchar();
            response = getchar();
            break;  

        case 3:
            break;
    }
}
while (response == 'Y' || response == 'y'); //Condition that will determine whether or not the loop continues to run.
printf("\nThank you for using my progam. Goodbye!\n\n");
return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T14:43:57.490

响应变量保持 Y 或 y 并且 while 循环永远不会退出。

添加

```
response = 'x'; //or something that isn't Y or y 
```

休息前；情况 3：选项。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T14:44:36.230

`break`语句从第一个迭代循环中退出。在你的情况下，这是 `switch`.

您必须修改响应（例如 response =0）。

```
 case 3:
        response=0; //different than 'Y' or 'y'
        break; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-15T14:50:40.403

像这样做：

```
case 3:
  return 0; 
```

您也可以考虑消除案例 3 并执行以下操作：

```
default:
  return 0; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-15T15:38:48.687

case 3 中的 break 语句只是从 case 3 中退出，而不是从程序中退出。如果您想在案例 3 中退出程序，请使用 return 语句。

返回0；

该语句存在程序而不是重复while循环。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-15T14:51:28.353

在第 3 种情况下，没有来自用户的输入，因此响应变量保持为真，请尝试向用户询问输入或只输入 response = '（任何会使条件为假的字母）'

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-15T14:51:33.513

`break`语句不退出程序，它只是从`switch`块中退出。
要退出：
1. `#include<stdlib.h>`
而不是`break`语句，使用2.`exit(0);`
更改`case 3`如下：
`response='N';break;`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-15T14:45:24.210

您只需中断开关盒即可。

如何使用：

```
 case 3:
      return;
      break; 
```

# java - 识别构造函数中的特定枚举

> ID：14897104
> 
> 赞同：1
> 
> 时间：2013-02-15T14:42:55.220
> 
> 标签：java, constructor, enums

```
public enum Batman
{
    Rat, Cat, Bat;

    private boolean isMatch;

    // Constructor
    Batman()
    {
        this.isMatch =  (this.compareTo(Bat) == 0) ? true : false;
    }

    public boolean isMatch()
    {
        return this.isMatch;
    }
} 
```

对于构造函数行，我收到错误：无法在初始化程序中引用静态枚举字段 Batman.Bat

我主要想弄清楚是否可以在构造函数中识别特定的 ENUM。
另外我想保存“isMatch”值的原因是我不想每次都评估它应该是什么。我从一开始就知道，所以我只想保存值，因此当调用时它不是评估，而只是将值传回

我知道还有其他方法可以解决这个问题：

1.  修改构造函数以接受参数：

    老鼠（假），猫（假），蝙蝠（真）；

    ```
    // Constructor
    Batman(boolean isMatch)
    {
        this.isMatch = isMatch;
    } 
    ```

2.  更改 isMatch()

> ```
> public boolean isMatch()
>   {
>       return (this.compareTo(Bat) == 0) ? true : false;
>   } 
> ```

任何建议都会很棒。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T14:55:44.020

正如其他人所说，您不能在构造函数中引用特定的 Enum 值。显而易见的解决方案是这样写：

```
public enum Batman
{
    Rat, Cat, Bat;

    public boolean isMatch()
    {
        return this == Bat;
    }
} 
```

（顺便说一句，Enum 不需要等于）

但如果评估`this == Bat`真的让你感到困扰，你可以为 Bat 覆盖 isMatch：

```
public enum Batman
{
    Rat, Cat,
    Bat {
        @Override
        public boolean isMatch() {
            return true;
        }
    };

    public boolean isMatch()
    {
        return false;
    }
} 
```

这样，您就没有比较，而是使用枚举值覆盖的方法。

还有一个变化，只是为了好玩：

```
public enum Batman
{
    Rat, Cat,
    Bat {{
            this.isMatch = true;
        }};

    protected boolean isMatch = false;

    public boolean isMatch()
    {
        return isMatch;
    }
} 
```

（注意符号和必须保护而不是私有`{{` `}}`的事实，以便 Bat 实例可以访问它。）`isMatch`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T14:52:12.127

从**[书有效的Java](http://www.amazon.com/gp/search?keywords=effective%20java%203rd%20edition&url=search-alias=aws-amazon-aps)**：

> 不允许枚举构造函数访问枚举的静态字段，编译时常量字段除外。这个限制是必要的，因为这些静态字段在构造函数运行时还没有被初始化。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-15T14:48:01.423

您绝对不能在构造函数中引用任何特定的 ENUM，因为它需要在您想要引用它时创建，而您只是在创建它！
我会选择选项 1，因为您将依赖的特定知识置于枚举本身的内部实现之外。

# android - 蓝牙自定义插件不起作用

> ID：14897107
> 
> 赞同：0
> 
> 时间：2013-02-15T14:43:04.617
> 
> 标签：android, cordova, phonegap-plugins

我有一个简单的应用程序，具有三个功能，相机、谷歌地图和蓝牙。我使用**cordova 2.2.0为蓝牙使用了一个自定义插件。**当我在设备上调试我的应用程序时一切正常，但是当我使用 build.phonegap 构建我的 html 和 js 文件时，只有相机和地图可以工作，蓝牙功能不起作用。我只能单击按钮，但没有任何反应。请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T16:15:56.730

PhoneGap Build 服务支持一组有限的插件。你可以在这里看到它们：[https](https://build.phonegap.com/docs/plugins) ://build.phonegap.com/docs/plugins 。

# python - 颜色条与数组中的数字相关联

> ID：14897109
> 
> 赞同：0
> 
> 时间：2013-02-15T14:43:10.143
> 
> 标签：python, matplotlib, wxpython

我有一个 155 个数字的数组，范围从 0 到 3。我希望每个数字对应不同的颜色。所以 0-red、1-blue、2-green 和 3-yellow，然后将数组绘制到颜色条上

```
origin = 'lower'
#origin = 'upper'

delta = 0.025

x = y = np.arange(-3.0, 3.01, delta)
X, Y = np.meshgrid(x, y)
Z1 = plt.mlab.bivariate_normal(X, Y, 1.0, 1.0, 0.0, 0.0)
Z2 = plt.mlab.bivariate_normal(X, Y, 1.5, 0.5, 1, 1)
Z = 10 * (Z1 - Z2)
levels = salist ##array of 155
CS3 = plt.contourf(X, Y, Z, levels,
                    colors = ('r', 'g', 'b','y'),
                    origin=origin,
                    extend='both')

plt.colorbar(CS3) 
```

# ruby-on-rails - 在存储变量后一段时间，Rails 2 会话被破坏

> ID：14897111
> 
> 赞同：1
> 
> 时间：2013-02-15T14:43:10.803
> 
> 标签：ruby-on-rails, dalli, session-store

我正在开发现有的 Rails 2 应用程序。我已经将一些散列数据结构转换为对象，如果我将一个放入会话存储中，它似乎会破坏会话，清除 user_id 等，并强制再次登录。我正在使用 dalli_store 进行会话。

以下代码导致会话被清除：

```
bug = MyClass.get_an_object()
session[:debug] = bug 
```

目前尚不清楚它在哪里被消灭了。我可以在调试器中逐步完成渲染视图，并且会话很好，但是当我在 UI 中点击另一个链接时，`session`它是空的（哈希 [0]），我被重定向到登录页面。

如果我稍微改变一下代码，就可以了：

```
bug = MyClass.get_an_object()
session[:debug] = Marshal::dump(bug) 
```

但是，如果我存储实际对象（甚至是深层副本），会话就会丢失。即即使这样也行不通：

```
session[:debug] = Marshal::load( Marshal::dump(bug) ) 
```

编组时 bug.size 大约为 140K，因此它不应超过 memcached。无论如何，我会假设 session 是由 序列化的`Marshal::dump()`，所以大小应该是相同的。存储后是否访问会话中的对象并不重要。只需将其放入会话中就足以导致问题，但正如我所说，存储对象后会话很好，并且一直通过视图渲染。直到下一个请求开始，我才发现它已被破坏。

我难住了。

你对如何调试这个有什么建议吗？目前，我想我可以显式调用 Marshal 来保存对象，但我真的很想了解为什么会话会被破坏。

我知道将大对象放入会话中是一件坏事，但是解决这部分问题超出了当前项目的范围......也许以后。另外，我很好奇这里发生了什么。

# jakarta-ee - EAR/lib 文件夹中的 jar 中的 Bean 可能吗？

> ID：14897117
> 
> 赞同：1
> 
> 时间：2013-02-15T14:43:26.257
> 
> 标签：jakarta-ee, dependency-injection, ejb, ear

我有一个具有以下结构的 EAR：

```
myapp.ear
...META-INF
......application.xml
...lib
......common.jar
......specialBeanlib.jar
...myejb.jar
...mywar1.war
...mywar2.war 
```

如您所见，common.jar 和 specialBeanlib.jar 位于 EAR lib 文件夹中。

myejb.jar 包含服务类。
mywar1.war 包含用户 gui。
mywar2.war 包含 admin-gui。

ejb 和 war 模块是从单独的 maven 项目构建的，并在 application.xml 文件中引用。文件 specialBeanlib.jar 在 Web 项目中被引用为**提供**的依赖项，在 ejb 项目中被引用为正常依赖项，因此它存储在 EAR lib 文件夹中。它明确不应该是一个自己的 ejb 模块。

**问题：**我可以`@ApplicationScoped`在文件**specialBeanlib.jar**中有任何 Bean，例如 Bean，因此可以通过**mywar1.war**和**mywar2.war**`@Inject`访问它吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T19:38:54.280

应该没问题。在编译期间，由于您在 Maven 中提供了 specialBeanlib.jar 作为依赖项，因此在编译 mywar1 和 mywar2 模块期间，它应该出现在类路径中。在运行时，由于speicalBeanlib.jar 位于war 类加载器的父类加载器的ear\lib 文件夹中，因此bean 类也应该可以正常加载。

# c# - 在空序列上使用 Enumerable.Aggregate(...) 方法

> ID：14897121
> 
> 赞同：30
> 
> 时间：2013-02-15T14:43:32.777
> 
> 标签：c#, linq, sequence, aggregate

我想使用*Enumerable.Aggregate(...)*方法连接由分号分隔的字符串列表。相当容易，不是吗？

考虑到以下几点：

*   `private const string LISTSEPARATOR = "; ";`
*   *专辑。**OrderedTracks***是`List<TrackDetails>`
*   *TrackDetails*有*DiscNumber* Int16？财产

*如果Distinct()*返回的序列为空（因为*Aggregate()*方法不适用于空序列），则以下语句将引发异常：

```
 txtDiscNumber.Text = album.OrderedTracks
        .Where(a => a.DiscNumber.HasValue)
        .Select(a => a.DiscNumber.Value.ToString())
        .Distinct()
        .Aggregate((i, j) => i + LISTSEPARATOR + j); 
```

我正在使用的解决方法：

```
 List<string> DiscNumbers = 
        album.OrderedTracks
            .Where(a => a.DiscNumber.HasValue)
            .Select(a => a.DiscNumber.Value.ToString())
            .Distinct()
            .ToList();

    if (!DiscNumbers.Any())
        txtDiscNumber.Text = null;
    else
        txtDiscNumber.Text = 
            DiscNumbers.Aggregate((i, j) => i + LISTSEPARATOR + j); 
```

有没有更好的解决方案？是否可以在单个 LINQ 语句中执行此操作？

提前致谢。

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2013-02-15T14:46:23.507

要连接字符串列表，请使用[`string.Join`](https://encrypted.google.com/url?sa=t&rct=j&q=string.join&source=web&cd=1&ved=0CDMQFjAA&url=http://msdn.microsoft.com/en-us/library/57a79xd0.aspx&ei=zEkeUcOqNIqF4gSjgIGIBw&usg=AFQjCNHE5gRaqjGjfYh-n85NvDNBnKAL-g&sig2=p8cwzKlFtJQBbvL1FKgoBQ&bvm=bv.42553238,d.bGE)方法。

该`Aggregate`函数不适用于空集合。它需要一个二进制累积函数，并且它需要集合中的一个项目作为种子值传递给二进制函数。

但是，有一个[重载`Aggregate`](http://msdn.microsoft.com/en-us/library/bb548744.aspx)：

```
public static TResult Aggregate<TSource, TAccumulate, TResult>(
    this IEnumerable<TSource> source,
    TAccumulate seed,
    Func<TAccumulate, TSource, TAccumulate> func,
    Func<TAccumulate, TResult> resultSelector
) 
```

此重载允许您指定种子值。如果指定了种子值，如果集合为空，它也将用作结果。

**编辑：**如果你真的想使用`Aggregate`，你可以这样做：

```
sequence.Aggregate(string.Empty, (x, y) => x == string.Empty ? y : x + Separator + y) 
```

或者这样使用`StringBuilder`：

```
sequence.Aggregate(new StringBuilder(), (sb, x) => (sb.Length == 0 ? sb : sb.Append(Separator)).Append(x)).ToString() 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-02-15T21:17:59.410

我想您可能会发现以下辅助扩展方法很有用。

```
public static TOut Pipe<TIn, TOut>(this TIn _this, Func<TIn, TOut> func)
{
    return func(_this);
} 
```

它允许您以下列方式表达您的查询。

```
txtDiscNumber.Text = album.OrderedTracks
    .Where(a => a.DiscNumber.HasValue)
    .Select(a => a.DiscNumber.Value.ToString())
    .Distinct()
    .Pipe(items => string.Join(LISTSEPARATOR, items)); 
```

这仍然是“从上到下”，这极大地提高了可读性。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-02-15T14:46:58.417

像这样使用`String.Join`：

```
 txtDiscNumber.Text = String.Join(LISTSEPARATOR,
      album.OrderedTracks
                  .Where(a => a.DiscNumber.HasValue)
                  .Select(a => a.DiscNumber.Value.ToString())
                  .Distinct()); 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2019-02-20T15:45:12.540

您可以使用

```
.Aggregate(string.Empty, (i, j) => i + LISTSEPARATOR + j); 
```

初始值适用于空集合

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-15T15:42:10.957

出于调试目的，经常使用这样的方法，提出了两种扩展方法：

```
public static string Concatenate<T, U>(this IEnumerable<T> source, Func<T, U> selector, string separator = ", ")
{
    if (source == null)
    {
        return string.Empty;
    }

    return source
        .Select(selector)
        .Concatenate(separator);
}

public static string Concatenate<T>(this IEnumerable<T> source, string separator = ", ")
{
    if (source == null)
    {
        return string.Empty;
    }

    StringBuilder sb = new StringBuilder();
    bool firstPass = true;
    foreach (string item in source.Distinct().Select(x => x.ToString()))
    {
        if (firstPass)
        {
            firstPass = false;
        }
        else
        {
            sb.Append(separator);
        }

        sb.Append(item);
    }

    return sb.ToString();
} 
```

像这样使用：

```
string myLine = myCol.Concatenate(x => x.TheProperty); 
```

# android - Android，在重新打开应用程序时保存 ArrayList

> ID：14897136
> 
> 赞同：0
> 
> 时间：2013-02-15T14:44:41.643
> 
> 标签：android

我正在创建一个应用程序，它应该执行以下操作：
- 启动时显示启动/信息活动。
- 在下一个活动中，将名称列表显示为复选框
- 用户可以通过 EditText 和添加按钮添加新名称（列表动态更新）
- 关闭应用程序并重新打开时，之前添加的名称应保存并显示在列表中。
我试图在我的startingactivity中将我的列表设置为ArrayList，看看我是否可以正确保存和加载我的信息：

```
public class StartActivity extends Activity implements OnClickListener {
Typeface face;
TextView tvStartIntrotext;
Button bStartStart;

ArrayList<String> names = new ArrayList<String>();

String NAMESFILE = "names_file";
FileOutputStream fos;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.startactivity);

    face = Typeface.createFromAsset(getAssets(), "andalemono.ttf");
    bStartStart = (Button) findViewById(R.id.bStartStart);
    bStartStart.setTypeface(face);
    tvStartIntrotext = (TextView) findViewById(R.id.tvStartIntrotext);
    tvStartIntrotext.setTypeface(face);
    bStartStart.setOnClickListener(this);

    try {
        fos = openFileOutput(NAMESFILE, Context.MODE_PRIVATE);
        ObjectOutputStream oos = new ObjectOutputStream(fos);
        names.add("Name Name");
        oos.writeObject(names);
        oos.close();
    } catch (FileNotFoundException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.startactivity, menu);
    return true;
}

@Override
public void onClick(View v) {
    // TODO Auto-generated method stub
    Intent startIntent = new Intent(StartActivity.this, Choose.class);
    startActivity(startIntent);
}
} 
```

到目前为止，要阅读和显示我在其他活动中的内容：

```
public class Choose extends Activity implements OnClickListener {

String NAMESFILE = "names_file";
FileInputStream fis;

Button bChooseChoose, bChooseAdd;
Typeface face;
TextView tvChoosePick;
EditText etChooseAddnew;
LinearLayout llMain;

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    overridePendingTransition(R.anim.slideinright, R.anim.slideoutleft);
    setContentView(R.layout.choose);

    face = Typeface.createFromAsset(getAssets(), "andalemono.ttf");
    bChooseChoose = (Button) findViewById(R.id.bChooseChoose);
    bChooseChoose.setTypeface(face);
    bChooseChoose.setOnClickListener(this);
    bChooseAdd = (Button) findViewById(R.id.bChooseAdd);
    bChooseAdd.setTypeface(face);
    bChooseAdd.setOnClickListener(this);
    tvChoosePick = (TextView) findViewById(R.id.tvChoosePick);
    tvChoosePick.setTypeface(face);
    etChooseAddnew = (EditText) findViewById(R.id.etChooseAddnew);
    etChooseAddnew.setTypeface(face);
    etChooseAddnew.setBackgroundResource(R.color.white1);
    etChooseAddnew.setHintTextColor(color.greytext);
    llMain = (LinearLayout) findViewById(R.id.llMain);

    try {
        fis = openFileInput(NAMESFILE);
        ObjectInputStream ois = new ObjectInputStream(fis);
        ArrayList<Object> names = (ArrayList<Object>) ois.readObject();            

        ois.close();
    } catch (Exception e) {
        e.printStackTrace();
    }

    for (int i = 0; i < names.size(); i++) {
        CheckBox cbb = new CheckBox(this);
        cbb.setText(names.get(i));
        cbb.setTypeface(face);
        cbb.setTextSize(16);
        llMain.addView(cbb);
    }

}

@Override
public void onClick(View v) {
    // TODO Auto-generated method stub
    switch (v.getId()){
    case R.id.bChooseChoose:

        break;
    case R.id.bChooseAdd:

                   /*This button for adding new list name*/

        break;
    }

    }
} 
```

此时我遇到的一个错误是我的 for 循环中的“setText”。还不知道如何从打开的文件中获取信息以正确显示在列表中。虽然 for 循环在不使用 fileInput/Output 时有效。
任何指向我可以尝试的东西都会非常有帮助，因为我是 Android 编程新手。:)
谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T14:48:33.520

问题是`names`在块内声明的变量`try-catch`不能从外部访问。只需将声明移出块：

```
List<Object> names;
try {
    fis = openFileInput(NAMESFILE);
    ObjectInputStream ois = new ObjectInputStream(fis);
    names = (ArrayList<Object>) ois.readObject();            
    ois.close();
} catch (Exception e) {
    e.printStackTrace();
    names = Collections.emptyList();
} 
```

**更新** 您不能使用`cbb.setText(names.get(i))`，因为`names.get(i)`它不是字符串。它是一个对象（如果您将字符串保存在 中，它实际上应该是 String `NAMESFILE`）。
您可以将它的大小写为字符串：

```
cbb.setText((String)names.get(i)) 
```

或使用`toString`方法：

```
cbb.setText(names.get(i).toString()) 
```

# dependencies - Ivy：将所有依赖项安装到共享存储库

> ID：14897137
> 
> 赞同：2
> 
> 时间：2013-02-15T14:44:45.123
> 
> 标签：dependencies, repository, installation, shared, ivy

正如标题所说，这是关于[Ivy](http://ant.apache.org/ivy/)，我们主要用于 Java 项目的依赖解析。我们刚刚成立了常春藤，所以我可能不知道一切。

这是我的问题：假设我有一个模块 A，它依赖于 B、C、D、E 等等。我知道我可以轻松地将模块 A 发布到我的共享仓库。这样可行。我想要的是，Ivy 将模块 A 所依赖的所有模块从其公共存储库复制到共享存储库。我检查了`ivy:install`任务，这不是我想要的（或者我可能误解了它是如何工作的）。该[示例](http://ant.apache.org/ivy/history/latest-milestone/use/install.html)说：

```
<ivy:install organisation="apache" module="commons-lang" revision="2.0" from="ivyrep" to="myfsresolver"/> 
```

`from`和属性是强制性的`to`，从示例中，我猜它适用于已知存储库中的一个依赖项并具有特定修订版。而且我必须编写一个 ANT 任务，明确地分别安装每个依赖项。

我需要的是告诉 Ivy - Perform Resolve - 发布/安装所有找到的依赖项及其名称，从发现它的源存储库到我的共享存储库的修订

所以这个`to`属性可能有意义，可能是一个`conf`属性但不是`name`,`revision`和`from`。

所以，我正在寻找一个像

```
<ivy:install to="shared"/> 
```

这会将所有依赖项（甚至不包括依赖模块本身）暂时安装到我的共享存储库中，因此即使没有互联网连接或公共存储库关闭，我们也可以构建。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T17:39:22.147

这不是最好的解决方案，但可能可行的是使用 2 个存储库。

使用第一个存储库发布您的模块 A，然后使用 ivy 将 A 及其所有依赖项复制到第二个存储库。为此，您可以使用该`install`任务。在`from`属性中，您将提供一个指向第一个存储库和公共存储库的[链解析器](https://ant.apache.org/ivy/history/2.3.0/resolver/chain.html)`to`，并在属性中提供您的共享存储库。

我没有在这样的设置中使用 Ivy，但我们成功地使用`install`了从公共存储库复制工件，包括它们的所有传递依赖项到我们自己的存储库，所以我不明白为什么这不应该工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-18T17:43:46.380

这是基于菲利普的回答和我难以理解的评论。我只是想举一些例子。我总是有一个共同点`build-ivy.xml`，我包含在每个项目`build.xml`中。此通用构建脚本包含以下任务，这些任务是安装模块所需的，包括对共享存储库的依赖项。

这将读取 ivy.xml 以填充变量。

```
<target name="init">
    <ivy:settings file="${env.IVY_SETTINGS}/ivysettings.xml"/>
    <ivy:info/>
</target> 
```

下一个任务取决于您需要自己实现的各种清理、编译、打包等任务。

```
<target depends="init,clean-build,clean-dist,dist,package-doc,package-sources" name="publish-local">
    <ivy:resolve/>
    <ivy:publish status="release" resolver="local" overwrite="true" >
        <artifacts pattern="${dist.dir}/[artifact]-[revision](-[classifier]).[ext]"/>
    </ivy:publish>
</target> 
```

此任务现在将安装当前模块，包括依赖项，并将其传递到共享存储库中。

```
<target name="install" depends="publish-local">
    <ivy:install module="${ivy.module}" from="local" to="shared" organisation="${ivy.organisation}" revision="${ivy.revision}" overwrite="true" transitive="true"/>
</target> 
```

# android - 将 OSMDroid 与片段集成

> ID：14897143
> 
> 赞同：4
> 
> 时间：2013-02-15T14:44:56.363
> 
> 标签：android, android-fragments, osmdroid

所以我设法更好地理解 OSMDRoid 是如何工作的……通过扩展 Activity。

```
public class POfflineMapView extends Activity implements LocationListener, MapViewConstants{

    private MapView myOpenMapView;
    private OsmMapsItemizedOverlay mItemizedOverlay;
    private ResourceProxy mResourceProxy;
    private OverlayItem overlayItem;
    private ArrayList<OverlayItem> mItems = new ArrayList<OverlayItem>();

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        mResourceProxy = new DefaultResourceProxyImpl(getApplicationContext());
        setContentView(R.layout.offline_map_activity);
        myOpenMapView = (MapView) findViewById(R.id.openmapview);
        myOpenMapView.getTileProvider().clearTileCache();

        //.... code continues
    }
} 
```

但是，我很难找到使用片段实现（例如，SherlockMapFragment）的 OSMDRoid Maptiles 显示的示例。有谁知道如何实现这一点，或者能够提供一个示例实现指南供我继续学习？

我需要这样做，因为我有一个 Activity 容器，当我单击某个按钮时，我想做一个片段 .replace() 来用 OSMDRoid 映射片段替换容器，而不是可能。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-10T08:39:50.260

像这样在 Fragment 中创建*onCreateView*方法（将 RelativeLayout 更改为您的布局类型）：

```
public View onCreateView(LayoutInflater inflater, ViewGroup container,
    Bundle savedInstanceState) {
    RelativeLayout rl = (RelativeLayout) inflater.inflate(offline_map_activity, container, false);
    myOpenMapView = (MapView) rl.findViewById(R.id.openmapview);

    //.... code continues

    return rl;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T16:09:04.107

无论您在 Activity 还是 Fragment 中使用 osmdroid 地图视图，它的工作原理都是一样的。只需将它放在您的布局文件中，然后在您的 Fragment 中将其膨胀或直接在`onCreateView`您的 Fragment 的方法中创建 MapView。

要创建包含默认地图的片段，您可以执行以下操作：

```
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
  return new MapView(getActivity(), 256);
} 
```

在您的片段类中。

如果您喜欢使用包含 MapView 的布局，您可以在片段中执行以下操作：

```
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
  View v = inflater.inflate(R.layout.offline_map_activity, null);
  myOpenMapView = v.findViewById(R.id.openmapview);
  return v;
} 
```

# java - Android - DownloadManager - 清除队列中的旧下载

> ID：14897147
> 
> 赞同：6
> 
> 时间：2013-02-15T14:45:07.993
> 
> 标签：java, android, task-queue, android-download-manager

我正在构建一个应用程序，如果所有下载都已完成，它需要知道并发原因。只有在我所有的下载完成后才允许启动某个功能。

我设法编写了一个函数来检查队列中的旧下载：

```
DownloadManager dm = (DownloadManager) context.getSystemService(context.DOWNLOAD_SERVICE);

    Query q = new Query();
    q.setFilterByStatus(DownloadManager.STATUS_FAILED|DownloadManager.STATUS_PENDING|DownloadManager.STATUS_RUNNING);

    Cursor c = dm.query(q); 
```

问题是——只是为了确定——在初始化时我想清理队列并删除所有条目。

有什么想法我现在可以删除条目吗？

[这个功能](http://developer.android.com/reference/android/app/DownloadManager.html#remove%28long...%29)对我不起作用，因为我不想物理删除文件......只是清空队列。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-09-22T13:10:36.817

您可以等待 DownloadManager 仅完成您自己的下载吗？为此，您可以使用以下方式保存下载的句柄：

```
List<Long> downloadIds = new ArrayList<>();
downloadIds.add(downloadManager.enqueue(request)); 
```

然后你可以这样查询downloadManager：

```
 Query q = new Query();
    long[] ids = new long[downloadIds.size()];
    int i = 0;
    for (Long id: downloadIds) ids[i++] = id;
    q.setFilterById(ids);
    Cursor c = downloadManager.query(q);
    Set<Long> res = new HashSet<>();
    int columnStatus = c.getColumnIndex(DownloadManager.COLUMN_STATUS);
    while (c.moveToNext()) {
        int status = c.getInt(columnStatus);
        if (status != DownloadManager.STATUS_FAILED && status != DownloadManager.STATUS_SUCCESSFUL) {
            // There is at least one download in progress
        }
    }
    c.close(); 
```

请记住，如果您只对自己的下载感兴趣，而不是对系统范围内可能发生的所有可能的下载感兴趣，这可能会起作用。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-02T19:18:31.460

如果您不想物理删除文件，您可以在调用 DownloadManager 的删除功能之前备份它们。这不是一个优雅的解决方案，但我找不到任何其他方法

# sql-server - SSIS 升级导致脚本组件出现空的“VstaProjects”解决方案

> ID：14897148
> 
> 赞同：1
> 
> 时间：2013-02-15T14:45:08.347
> 
> 标签：sql-server, visual-studio-2010, visual-studio-2008, ssis, upgrade

在从使用 VS2008 到 VS2010 的 SSIS 包转换过程中，我的大部分脚本组件已经损坏。当我打开脚本组件并选择“编辑脚本”时，会出现 VSTA 编辑器，但解决方案中包含 0 个项目。

仅大约一半已升级的软件包会出现此问题，并且在某些情况下，一半的脚本组件将加载到一个软件包中，而另一半则不会。我还不能确定可能是原因的共性。

任何可能导致解决方案的帮助将不胜感激。

下面是我在解决方案资源管理器中看到的屏幕截图，以及我希望看到的有助于说明问题的屏幕截图。

问题：

![问题](../Images/60da7cdfff0e416497405052b08b772f.png)

期待：

![期待](../Images/8cd74500d27530830576bea4f49c5922.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T17:27:39.500

解决了。在升级它们之前，我从旧包中删除了所有 COM 对象引用并且它有效。

# mongodb - 从文档中的子数组中查找最高值

> ID：14897151
> 
> 赞同：9
> 
> 时间：2013-02-15T14:45:23.680
> 
> 标签：mongodb, aggregation-framework

假设我有以下收藏：

```
{ _id: 1, Array: [
  { K: "A", V: 8 },
  { K: "B", V: 5 },
  { K: "C", V: 13 } ] }

{ _id: 2, Array: [
  { K: "D", V: 12 },
  { K: "E", V: 14 },
  { K: "F", V: 2 } ] } 
```

我想运行一个返回具有最高“V”的子文档的查询，所以在这种情况下我会得到：

```
{ _id: 1, Array: [ { K: "E", V: 14 } ] } 
```

或者简单地说：

```
{ K: "E", V: 14 } 
```

重要的部分是我希望 Mongo 服务器上的内存使用量为 O(1)（无论我处理多少个文档，内存使用量都是恒定的），并且我只想检索具有我需要的值的那个子文档（我不想下载不必要的子文档）。

我的首选方法是使用简单的查找查询，但我不确定这是否可能。我怀疑这也可以通过聚合框架（或 map reduce？）来完成，但不知道如何。我不希望将结果存储在临时集合中，而是直接返回给我的客户端（就像普通查询一样）。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-15T19:53:07.690

以下聚合集返回您需要的内容。

```
db.letters.aggregate([
    {$project:{"Array.K":1, "Array.V":1}},
    {$unwind:"$Array"},
    {$sort:{"Array.V":-1}},
    {$limit:1}
]); 
```

回报：

```
{"_id":2, "Array":{"K":"E","V":14}} 
```

享受！:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T15:35:26.177

正如@JohnnyHK 所说：

```
db.col.aggregate([
    {$unwind: '$Array'},
    {$group: {_id: '$_id', Array: {K: {$max: '$K'}, V: {$max: '$V'}}}}
]) 
```

类似的东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-27T08:11:34.807

**用简单的话**来说，如果您有类似下面的**mongo 查询响应**- 并且您只想要**Array-> "Wish_CreatedDate"中的最高值**

```
{
  "_id": "57ee5a708e117c754915a2a2",
  "TotalWishs": 3,
  "Events": [
    "57f805c866bf62f12edb8024"
  ],
  "wish": [
    "Cosmic Eldorado  Mountain Bikes, 26-inch (Grey/White)",
    "Asics Men's Gel-Nimbus 18 Black, Snow and Fiery Red Running Shoes - 10 UK/India (45 EU) (11 US)",
    "Suunto Digital Black Dial Unisex Watch - SS018734000"
  ],
  "Wish_CreatedDate": [
    "2017-03-05T00:00:00.000Z",
    "2017-02-13T00:00:00.000Z"
  ],
  "UserDetails": [
    {
      "createdAt": "2016-09-30T12:28:32.773Z",
      "jeenesFriends": [
        "57edf8a96ad8f6ff453a384a",
        "57ee516c8e117c754915a26b",
        "58a1644b6c91d2af783770b0",
        "57ef4631b97d81824cf54795"
      ],
      "userImage": "user_profile/Male.png",
      "email": "roopak@small-screen.com",
      "fullName": "Roopak Kapoor"
    }
  ],

}, 
```

***然后你有添加

> Latest_Wish_CreatedDate: { $max: "$Wish_CreatedDate"},

类似于下面的东西-

```
{ 
                $project : { _id: 1,
                             TotalWishs : 1 ,
                              wish:1 ,
                               Events:1, 
                               Wish_CreatedDate:1,
                               Latest_Wish_CreatedDate: { $max: "$Wish_CreatedDate"},
                            } 
            } 
```

**最终查询响应将在下方**

```
{
  "_id": "57ee5a708e117c754915a2a2",
  "TotalWishs": 3,
  "Events": [
    "57f805c866bf62f12edb8024"
  ],
  "wish": [
    "Cosmic Eldorado  Mountain Bikes, 26-inch (Grey/White)",
    "Asics Men's Gel-Nimbus 18 Black, Snow and Fiery Red Running Shoes - 10 UK/India (45 EU) (11 US)",
    "Suunto Digital Black Dial Unisex Watch - SS018734000"
  ],
  "Wish_CreatedDate": [
    "2017-03-05T00:00:00.000Z",
    "2017-02-13T00:00:00.000Z"
  ],
  "UserDetails": [
    {
      "createdAt": "2016-09-30T12:28:32.773Z",
      "jeenesFriends": [
        "57edf8a96ad8f6ff453a384a",
        "57ee516c8e117c754915a26b",
        "58a1644b6c91d2af783770b0",
        "57ef4631b97d81824cf54795"
      ],
      "userImage": "user_profile/Male.png",
      "email": "roopak@small-screen.com",
      "fullName": "Roopak Kapoor"
    }
  ],
  "Latest_Wish_CreatedDate": "2017-03-05T00:00:00.000Z"
}, 
```

# memory-management - “损坏的双链表”是什么意思

> ID：14897157
> 
> 赞同：51
> 
> 时间：2013-02-15T14:45:43.197
> 
> 标签：memory-management, glibc

我最近从我的 PHP 中得到了以下错误：

```
WARNING: [pool www] child 42475 said into stderr: "*** glibc detected *** php-fpm: pool www: corrupted double-linked list: 0x00000000013fe680 ***" 
```

我对这个问题不是很困扰，对修复它也不是很感兴趣。但我很想了解这个错误“损坏的双链表”实际上意味着什么，因为我以前没有见过它。我相信知道什么是双链表，但是我没有生成一个触发这个错误的程序。

有人可以给我一个简短的代码片段，当我编译和执行它时，它会导致 glibc 说“损坏的双链表”吗？

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2013-02-18T07:23:20.140

我自己找到了我的问题的答案:)

所以我不明白 glibc 如何区分 Segfault 和损坏的双链表，因为根据我的理解，从 glibc 的角度来看，它们看起来应该是一样的。因为如果我在我的程序中实现一个双链表，glibc 怎么可能知道这是一个双链表，而不是任何其他结构？它可能不能，所以这就是我感到困惑的原因。

现在我查看了 glibc 代码中的 malloc/malloc.c，我看到了以下内容：

```
1543 /* Take a chunk off a bin list */
1544 #define unlink(P, BK, FD) {                                            \
1545   FD = P->fd;                                                          \
1546   BK = P->bk;                                                          \
1547   if (__builtin_expect (FD->bk != P || BK->fd != P, 0))                \
1548     malloc_printerr (check_action, "corrupted double-linked list", P); \
1549   else {                                                               \
1550     FD->bk = BK;                                                       \
1551     BK->fd = FD;                                                       \ 
```

所以现在这突然变得有道理了。glibc 之所以能知道这是一个双链表，是因为该链表是 glibc 本身的一部分。我一直很困惑，因为我认为 glibc 可以以某种方式检测到某些编程正在构建一个双链表，我不明白它是如何工作的。但是如果它所说的这个双链表是glibc本身的一部分，它当然可以知道它是一个双链表。

我仍然不知道是什么触发了这个错误。但至少我了解损坏的双链表和 Segfault 之间的区别，以及 glibc 如何知道这个结构应该是一个双链表:)

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2015-02-27T10:12:10.130

**`corrupted double-linked list`对于, `malloc(): memory corruption`, `double free or corruption (!prev)`-like glibc 警告，**堆溢出**应该归咎于（但不总是） 。**

 **它应该由以下代码复制：

```
#include <vector>

using std::vector;

int main(int argc, const char *argv[])
{
    int *p = new int[3];
    vector<int> vec;
    vec.resize(100);
    p[6] = 1024;
    delete[] p;
    return 0;
} 
```

如果使用 g++ (4.5.4) 编译：

```
$ ./heapoverflow
*** glibc detected *** ./heapoverflow: double free or corruption (!prev): 0x0000000001263030 ***
======= Backtrace: =========
/lib64/libc.so.6(+0x7af26)[0x7f853f5d3f26]
./heapoverflow[0x40138e]
./heapoverflow[0x400d9c]
./heapoverflow[0x400bd9]
./heapoverflow[0x400aa6]
./heapoverflow[0x400a26]
/lib64/libc.so.6(__libc_start_main+0xfd)[0x7f853f57b4bd]
./heapoverflow[0x4008f9]
======= Memory map: ========
00400000-00403000 r-xp 00000000 08:02 2150398851                         /data1/home/mckelvin/heapoverflow
00602000-00603000 r--p 00002000 08:02 2150398851                         /data1/home/mckelvin/heapoverflow
00603000-00604000 rw-p 00003000 08:02 2150398851                         /data1/home/mckelvin/heapoverflow
01263000-01284000 rw-p 00000000 00:00 0                                  [heap]
7f853f559000-7f853f6fa000 r-xp 00000000 09:01 201329536                  /lib64/libc-2.15.so
7f853f6fa000-7f853f8fa000 ---p 001a1000 09:01 201329536                  /lib64/libc-2.15.so
7f853f8fa000-7f853f8fe000 r--p 001a1000 09:01 201329536                  /lib64/libc-2.15.so
7f853f8fe000-7f853f900000 rw-p 001a5000 09:01 201329536                  /lib64/libc-2.15.so
7f853f900000-7f853f904000 rw-p 00000000 00:00 0
7f853f904000-7f853f919000 r-xp 00000000 09:01 74726670                   /usr/lib64/gcc/x86_64-pc-linux-gnu/4.8.1/libgcc_s.so.1
7f853f919000-7f853fb19000 ---p 00015000 09:01 74726670                   /usr/lib64/gcc/x86_64-pc-linux-gnu/4.8.1/libgcc_s.so.1
7f853fb19000-7f853fb1a000 r--p 00015000 09:01 74726670                   /usr/lib64/gcc/x86_64-pc-linux-gnu/4.8.1/libgcc_s.so.1
7f853fb1a000-7f853fb1b000 rw-p 00016000 09:01 74726670                   /usr/lib64/gcc/x86_64-pc-linux-gnu/4.8.1/libgcc_s.so.1
7f853fb1b000-7f853fc11000 r-xp 00000000 09:01 201329538                  /lib64/libm-2.15.so
7f853fc11000-7f853fe10000 ---p 000f6000 09:01 201329538                  /lib64/libm-2.15.so
7f853fe10000-7f853fe11000 r--p 000f5000 09:01 201329538                  /lib64/libm-2.15.so
7f853fe11000-7f853fe12000 rw-p 000f6000 09:01 201329538                  /lib64/libm-2.15.so
7f853fe12000-7f853fefc000 r-xp 00000000 09:01 74726678                   /usr/lib64/gcc/x86_64-pc-linux-gnu/4.8.1/libstdc++.so.6.0.18
7f853fefc000-7f85400fb000 ---p 000ea000 09:01 74726678                   /usr/lib64/gcc/x86_64-pc-linux-gnu/4.8.1/libstdc++.so.6.0.18
7f85400fb000-7f8540103000 r--p 000e9000 09:01 74726678                   /usr/lib64/gcc/x86_64-pc-linux-gnu/4.8.1/libstdc++.so.6.0.18
7f8540103000-7f8540105000 rw-p 000f1000 09:01 74726678                   /usr/lib64/gcc/x86_64-pc-linux-gnu/4.8.1/libstdc++.so.6.0.18
7f8540105000-7f854011a000 rw-p 00000000 00:00 0
7f854011a000-7f854013c000 r-xp 00000000 09:01 201328977                  /lib64/ld-2.15.so
7f854031c000-7f8540321000 rw-p 00000000 00:00 0
7f8540339000-7f854033b000 rw-p 00000000 00:00 0
7f854033b000-7f854033c000 r--p 00021000 09:01 201328977                  /lib64/ld-2.15.so
7f854033c000-7f854033d000 rw-p 00022000 09:01 201328977                  /lib64/ld-2.15.so
7f854033d000-7f854033e000 rw-p 00000000 00:00 0
7fff92922000-7fff92943000 rw-p 00000000 00:00 0                          [stack]
7fff929ff000-7fff92a00000 r-xp 00000000 00:00 0                          [vdso]
ffffffffff600000-ffffffffff601000 r-xp 00000000 00:00 0                  [vsyscall]
[1]    18379 abort      ./heapoverflow 
```

如果使用 clang++(6.0 (clang-600.0.56)) 编译：

```
$  ./heapoverflow
[1]    96277 segmentation fault  ./heapoverflow 
```

* * *

如果您认为自己可能编写了这样的错误，这里有一些提示可以追踪它。

首先，使用调试标志（）编译代码`-g`：

```
g++ -g foo.cpp 
```

然后，使用[valgrind](http://valgrind.org)运行它：

```
$ valgrind ./a.out
==12693== Memcheck, a memory error detector
==12693== Copyright (C) 2002-2013, and GNU GPL'd, by Julian Seward et al.
==12693== Using Valgrind-3.10.1 and LibVEX; rerun with -h for copyright info
==12693== Command: ./a.out
==12693==
==12693== Invalid write of size 4
==12693==    at 0x400A25: main (foo.cpp:11)
==12693==  Address 0x5a1c058 is 12 bytes after a block of size 12 alloc'd
==12693==    at 0x4C2B800: operator new[](unsigned long) (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)
==12693==    by 0x4009F6: main (foo.cpp:8)
==12693==
==12693==
==12693== HEAP SUMMARY:
==12693==     in use at exit: 0 bytes in 0 blocks
==12693==   total heap usage: 2 allocs, 2 frees, 412 bytes allocated
==12693==
==12693== All heap blocks were freed -- no leaks are possible
==12693==
==12693== For counts of detected and suppressed errors, rerun with: -v
==12693== ERROR SUMMARY: 1 errors from 1 contexts (suppressed: 0 from 0) 
```

该错误位于**==12693== at 0x400A25: main (foo.cpp:11)**

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2016-10-31T13:50:42.340

这可能是由于各种原因，人们提到了其他可能性，我补充一下我的情况：

使用多线程（`std::pthread`和`std::thread`）时出现此错误，并且发生错误是因为我忘记锁定多个线程可能同时更改的变量。这是一个运行时错误，在某些运行中随机出现，但不是全部，因为......您知道两个线程之间的意外是随机的。

在我的例子中，那个变量是一个全局变量，`std::vector`我试图`push_back()`在线程调用的函数中加入一些东西。然后我使用了 a`std::mutex`并且再也没有遇到这个错误。

可能会有所帮助

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-11-04T07:03:44.107

对于在这里寻找解决方案的任何人，我在 C++ 中遇到了类似的问题： malloc(): smallbin 双链表已损坏：

这是由于函数没有返回它应该返回的值。

```
std::vector<Object> generateStuff(std::vector<Object>& target> {
  std::vector<Object> returnValue;
  editStuff(target);
  // RETURN MISSING
} 
```

不知道为什么这毕竟能够编译。可能有关于它的警告。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2020-07-02T16:40:01.987

一位同事收到此错误，并发现在代码中某处他在列表元素上犯了此错误：

```
 std::string listElement = listElement = someObject.getName(); 
```

显然不是：

```
 std::string listElement = someObject.getName(); 
```

这似乎无关，但是每次运行时都会出现错误，我们可以在清理所有内容后重现它，并且仅更改这一行就解决了问题。

希望有一天它可以帮助某人....

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2015-02-12T23:56:14.443

我在一些代码中遇到了这个错误，其中有人在一个线程中调用 exit() 与`main()`返回的时间差不多，所以所有全局/静态构造函数同时在两个单独的线程中启动。

此错误还表现为`double free or corruption`，或 segfault/sig11 inside`exit()`或 inside `malloc_consolidate`，可能还有其他错误。malloc_consolidate 崩溃的调用堆栈可能类似于：

```
#0  0xabcdabcd in malloc_consolidate () from /lib/libc.so.6
#1  0xabcdabcd in _int_free () from /lib/libc.so.6
#2  0xabcdabcd in operator delete (...)
#3  0xabcdabcd in operator delete[] (...)
(...) 
```

在 valgrind 下运行时，我无法让它表现出这个问题。**

# c# - 如何将数据从 XML 还原到 Windows 窗体？

> ID：14897158
> 
> 赞同：2
> 
> 时间：2013-02-15T14:45:44.143
> 
> 标签：c#, xml, winforms, serialization

我保存数据如下图，现在我想将XML数据恢复到相应的文本框中。

```
CustomerData customer = new CustomerData();    
customer.FirstName = first_name.Text;    
customer.RegNo = reg_no.Text;    
customer.Department = dept.Text;    
XmlSerializer xs = new XmlSerializer(typeof(CustomerData));    

using(FileStream fs = new FileStream(@"D:\Data.xml", FileMode.Create)) {
    xs.Serialize(fs, customer);
}

MessageBox.Show("Inserted"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T14:51:19.970

```
XmlSerializer xs = new XmlSerializer(typeof(CustomerData));
using(FileStream fs = new FileStream(@"D:\Data.xml", FileMode.Open))
{
    CustomerData customer = (CustomerData)xs.Deserialize(fs);  
    first_name.Text = customer.FirstName;    
    reg_no.Text = customer.RegNo;    
    dept.Text = customer.Department; 
} 
```

*更新*如果要保存客户数据更改的历史记录并加载最后一个，则保存并加载 CustomerData 对象列表：

```
private List<CustomerData> GetCustomers(string filename)
{
    if (!File.Exists(filename))
        return new List<CustomerData>();

    XmlSerializer xs = new XmlSerializer(typeof(List<CustomerData>));
    using (FileStream fs = new FileStream(filename, FileMode.Open))
        return (List<CustomerData>)xs.Deserialize(fs);
}

public void SaveCustomers(string filename, List<CustomerData> customers)
{
    XmlSerializer xs = new XmlSerializer(typeof(List<CustomerData>));
    using (FileStream fs = new FileStream(filename, FileMode.Create))
        xs.Serialize(fs, customers);
} 
```

并用它来保存：

```
List<CustomerData> customers = GetCustomers(@"D:\Data.xml");
CustomerData customer = new CustomerData();
customer.FirstName = first_name.Text;
customer.RegNo = reg_no.Text;
customer.Department = dept.Text;
customers.Add(customer);
SaveCustomers(@"D:\Data.xml", customers); 
```

并加载：

```
var customer = GetCustomers(@"D:\Data.xml").LastOrDefault();
if (customer != null)
{
    first_name.Text = customer.FirstName;
    reg_no.Text = customer.RegNo;
    dept.Text = customer.Department;
} 
```

# android - 应用程序没有使用它需要的本地资源

> ID：14897159
> 
> 赞同：0
> 
> 时间：2013-02-15T14:45:45.247
> 
> 标签：android, string, local

我试图让我的应用程序为希伯来语使用不同的字符串。我所做的是在“res”中创建了一个名为“values-iw”的不同文件，并在其中放置了一个“strings.xml”文件。

当我这样做时，`Locale.getDefault();`我得到谷歌的“heb-il”，“Java 使用了几个不推荐使用的两字母代码。希伯来语（“he”）语言代码被重写为“iw”。但是当我这样做时，`getResources().getString(R.string.deafult_sleeping);`我得到了默认字符串，而不是“values-iw”中的字符串。为什么会这样？+

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T14:53:10.907

大多数设备仍然使用“他”。我认为很多Android都使用“he”，它在编译器中映射到“iw”。您应该使两个文件夹都安全。

附言。您可以检查您使用的代码

```
Locale.getDefault().getLanguage(); 
```

另请参阅[希伯来语的语言环境代码/参考其他语言环境代码？](https://stackoverflow.com/questions/8202406/locale-code-for-hebrew-reference-to-other-locale-codes)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-02-04T14:12:05.763

也许这将帮助某人更改本地：

```
Locale.getDefault().getLanguage().equals(new Locale("he").getLanguage()) 
```

# algorithm - 在未排序的数组中查找重复 k 次的数字

> ID：14897164
> 
> 赞同：-3
> 
> 时间：2013-02-15T14:45:59.467
> 
> 标签：algorithm, bit-manipulation

我们有一个包含整数的数组，我想在这个数组中找到重复 k 次的数字。数组未排序，数字无界。

例子，

A(20, 6, 99, 3, 6, 2, 1,11,41, 31, 99, 6, 7, 8, 99, 10, 99, ,6)

找出重复超过 3 次的数字。

答案：6,99

使用按位运算（xor）或组合的可能答案？运行时间效率 Big(o) 以及空间容量是必需的。

这不是家庭作业，它只是一个有趣的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T16:02:34.903

Patrick87 可能在评论中给出了最直接的答案，所以我将给出另一种方法。

当您遍历您的列表时，您将创建一个元素（id，值）并将其插入到地图中，其中 id 等于数字，并且该值与插入时初始化为 1 的计数匹配。如果该值已存在于地图中，则只需递增计数器。

插入地图将花费 O(log k) 时间，其中 k 是地图的大小。因此，您的地图创建总时间为 O(n log n)。

创建映射后，您可以对其进行迭代，并输出 count == target count 的任何数字。

时间复杂度 = O(n) + O(n log n) + O(n) = O(n log n) 空间复杂度 = O(n) + O(n) = O(n)

如果您正在寻找更好的空间复杂度，那么您将不会得到它......即使数字是从流中读取的，您也需要跟踪 O(n) 的各个值。

# scala - 意外的 Scala 集合内存行为

> ID：14897173
> 
> 赞同：4
> 
> 时间：2013-02-15T14:46:29.093
> 
> 标签：scala, memory-management, collections, stream

以下 Scala 代码（在 2.9.2 上）：

```
var a = ( 0 until 100000 ).toStream
for ( i <- 0 until 100000 )
{
    val memTot = Runtime.getRuntime().totalMemory().toDouble / ( 1024.0 * 1024.0 )
    println( i, a.size, memTot )

    a = a.map(identity)
} 
```

在循环的每次迭代中使用越来越多的内存。如果`a`定义为`( 0 until 100000 ).toList`，那么内存使用是稳定的（give or take GC）。

我知道流会懒惰地评估，但一旦生成就会保留元素。但似乎在我上面的代码中，每个新流（由最后一行代码生成）以某种方式保留对先前流的引用。有人可以帮忙解释一下吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-15T15:10:14.627

这就是发生的事情。`Stream`总是懒惰地评估，但已经计算的元素被“缓存”以备后用。惰性评估至关重要。看这段代码：

```
a = a.flatMap( v => Some( v ) ) 
```

尽管看起来好像您正在将一个转换`Stream`为另一个并丢弃旧的，但事实并非如此。新的`Stream`仍然保留对旧的参考。这是因为 result`Stream`不应该急切地计算底层流的所有元素，而是按需计算。以此为例：

```
io.Source.fromFile("very-large.file").getLines().toStream.
  map(_.trim).
  filter(_.contains("X")).
  map(_.substring(0, 10)).
  map(_.toUpperCase) 
```

您可以根据需要链接任意数量的操作，但文件几乎不会被触及以读取第一行。每个后续操作只包装前一个`Stream`，持有对子流的引用。在您要求`size`或做的那一刻`foreach`，评估就开始了。

回到你的代码。在第二次迭代中，您创建第三个流，保存对第二个流的引用，而后者又保留对您最初定义的流的引用。基本上你有一堆相当大的物体在生长。

但这并不能解释为什么内存泄漏如此之快。关键部分是...... `println()`，或者`a.size`准确地说。没有打印（并因此评估整体`Stream`）`Stream`仍然“*未*评估”。未评估的流不缓存任何值，因此非常苗条。内存仍然会由于不断增长的流链而泄漏，但速度要慢得多。

这引出了一个问题：为什么它可以与它一起使用`toList`它非常简单。`List.map()`热切地创造新的`List`。时期。前一个不再被引用且符合 GC 条件。

# php - jquery 将值发布到 php

> ID：14897187
> 
> 赞同：1
> 
> 时间：2013-02-15T14:47:19.430
> 
> 标签：php, javascript, jquery

我对 jquery 也很陌生，所以我的问题听起来很简单或很愚蠢。任何帮助，将不胜感激。我有一个 html，我在其中通过按钮添加和删除行。我想通过另一个按钮通过这些数据更新数据库。所以我需要获取表格的长度才能将它们插入到 php 端的循环中。如何将数据传输到 php 端？我试过类似的东西..作为javascript代码

```
function Length()
       {

            var table=document.getElementById("Table");
            var len = table.rows.length;
            $.post('/myproject/update_data.php', { "CONTROL": "len" } );
       } 
```

在 html 上；

```
<input type="submit" name="UPDATE" id="UPDATE" value="UPDATE" onclick="return Length();"/> 
```

在php方面它就像

```
<?php
if(isset($_POST["UPDATE"]))
               {    
                    $length=$_REQUEST["CONTROL"];
               }
?> 
```

我得到 CONTROL 没有定义。我输入php文件的目录是语法错误吗？还是别的什么？我无法得到。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T14:53:08.083

您不能将 AJAX 帖子与表单提交混合在一起，这是两个单独的请求。表单在 AJAX 请求完成之前提交，因此表单提交是您的服务器收到的请求。

我建议完全切换到 AJAX 请求并添加`return false;`到函数的末尾，这将取消表单提交并允许 AJAX 请求自己完成工作。像这样：

```
$.post('/myproject/update_data.php', { "CONTROL": len, "UPDATE": "UPDATE" } ); 
```

或者，您可以跳过 AJAX 并使用 JS 向表单添加隐藏输入。

将此添加到您的 HTML：

```
<input type="hidden" name="CONTROL" val=""> 
```

将此添加到您的 JS 中：

```
$('[name="control"]').val(len) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T14:49:23.013

尝试在此处更改这部分代码

```
function Length()
   {

        var table=document.getElementById("TableYetkili");
        var len = table.rows.length;
        $.post('/myproject/update_data.php', { "CONTROL": "len" } );
   } 
```

把它改成这个

```
function Length()
   {

        var table=document.getElementById("TableYetkili");
        var len = table.rows.length;
        $.post('/myproject/update_data.php', { "CONTROL": len } );
   } 
```

我认为您遇到的问题是 the`len`不是字符串，而是`var len`, 不需要引号。希望我有所帮助。同样在您的 PHP 文件中，如果未提交表单，则该`IF`声明将不正确。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T14:51:29.710

在 javascript 中，变量不会像 PHP 那样插入到字符串中。所以这

```
{ "CONTROL": "len" } 
```

应该

```
{ "CONTROL": len } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-15T14:52:08.020

```
$length=$_REQUEST["KONTROL"];

$.post('/myproject/update_data.php', { "CONTROL": "len" } ); 
```

“控制”！=“控制”

代替： `$.post('/myproject/update_data.php', { "CONTROL": "len" } );`

代替： `$.post('/myproject/update_data.php', { "CONTROL": len } );`

“len”只是字符串。

而不是： `$length=$_REQUEST["KONTROL"];`

代替： `$length = $_POST['CONTROL'];`

# c# - 结合 c# 类和 vb.net 类

> ID：14897188
> 
> 赞同：1
> 
> 时间：2013-02-15T14:47:22.140
> 
> 标签：c#, asp.net, vb.net, class

我正在使用 asp.net 2012 并且有 c# 类项目，我想在其中包含一些现有的 vb.net 类。

能够同时使用 c# 和 vb.net 类的最佳方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T14:50:10.990

要么将 vb.net 类转换为 C#，要么将 vb.net 类放入它们自己的程序集中并添加对程序集的引用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T14:50:20.193

将 VB.NET 类放在它自己的项目中，然后引用该项目，就像任何第三方控件一样。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-15T14:51:49.033

如前所述，其中一种选择是将 c# 转换为 vb.net，反之亦然。您可以在互联网上找到许多页面来执行此操作，例如：

[http://www.developerfusion.com/tools/convert/vb-to-csharp/](http://www.developerfusion.com/tools/convert/vb-to-csharp/)

[http://www.developerfusion.com/tools/convert/csharp-to-vb/](http://www.developerfusion.com/tools/convert/csharp-to-vb/)

如果您将代码从一种语言转换为另一种语言，请确保正确测试更改。

如果您决定将 VB.NET 代码保留在单独的 Visual Studio 项目中并在 C# 代码中引用它，则需要确保 VB.NET 代码符合 CLS。这是一个很好的起点：

[编写符合 CLS 的代码](http://msdn.microsoft.com/en-us/library/bhc3fa7f%28v=vs.100%29.aspx)

也可以看看：

[跨语言互操作性](http://msdn.microsoft.com/en-us/library/a2c7tshk%28v=vs.100%29.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-15T14:54:58.790

使 C# 成为 .NET 库并将其包含在您的 VB.NET/ASP.NET 项目中。

按照此[http://msdn.microsoft.com/en-us/library/t990ks23.aspx](http://msdn.microsoft.com/en-us/library/t990ks23.aspx)了解更多信息...

# java - 在关闭我的 JavaFX 程序之前停止线程

> ID：14897194
> 
> 赞同：23
> 
> 时间：2013-02-15T14:47:58.210
> 
> 标签：java, javafx

我在关闭我的应用程序时遇到问题，因为在我关闭应用程序后某些线程仍在运行。有人可以帮助我用一些方法在杀死主线程之前停止所有线程在后台执行？？？

**[编辑]**

关于 javafx 的问题，我注意到许多新开发人员都面临管理线程的问题。我想分享我为简化在 javafx 上管理线程的生活所做的工作。我创建了一个基于 Android 的 AsyncTask 的 AsyncTask 类，它基本上以一种简陋但有效的方式与 Android 相同。[您可以在Github 项目](https://github.com/victorlaerte/javafx-asynctask)上找到有关它的更多信息

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-12-04T11:54:09.803

解决此问题的更好方法是在**Close Request上添加****EventHandler**：

 **```
@Override
public void start(Stage primaryStage) {
    primaryStage.setOnCloseRequest(new EventHandler<WindowEvent>() {
       @Override
       public void handle(WindowEvent e) {
          Platform.exit();
          System.exit(0);
       }
    });
} 
```

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2013-02-15T15:01:05.440

您在这里有三个选项 - 最简单的方法是将线程创建为守护进程，这意味着当您的主程序结束时，所有守护线程也将终止。

```
Thread thread = new Thread();
thread.setDaemon(true); 
```

这是最简单的，但缺点是你不会得到一个正常的关闭（即线程将停止，你不会有机会执行资源管理等，这对你来说可能是也可能不是问题）。

另一种方法是保留生成的线程，当您的程序收到关闭信号时，您遍历线程并传递某种信号以表示它们也应该终止

```
volatile boolean shutdown = false;

public void shutdown() {
   shutdown = true;
}

public void run() {
    while(!shutdown) { 
        ... do your work here
    }
    ... perform any cleanup work here 
```

（注意：为清楚起见，忽略任何异常处理）

最后一个选项是使用 java.util.concurrent 中的 Executor 框架

```
ExecutorService executorService = Executors.newFixedThreadPool(10);
... assign/invoke tasks etc

... at some point later your program is told to shutdown 
... shutdown in executor too 
executorService.shutdown();
executorService.awaitTermination(10, TimeUnit.SECONDS); // wait for 10s in this case
executorService.shutdownNow(); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2018-01-14T16:46:20.967

覆盖您的应用程序类

```
//System.exit(0) This will close all timers and threads inside the Jar application...
@Override
public void stop() throws Exception {
    super.stop(); //To change body of generated methods, choose Tools | Templates.
    System.exit(0);
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-04-24T19:18:47.790

[包中的执行者](https://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Executors.html)是`java.util.concurrent`要走的路。明确地：

```
ExecutorService executorService = Executors.newCachedThreadPool(new ThreadFactory() {
     @Override
     public Thread newThread(Runnable runnable) {
          Thread thread = Executors.defaultThreadFactory().newThread(runnable);
          thread.setDaemon(true);
          return thread;
    }
}); 
```

### 具有固定[ScheduledExecutorService的 Java 8 版本](https://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ScheduledThreadPoolExecutor.html)

```
ScheduledExecutorService executorService = Executors.newScheduledThreadPool(1, r -> {
    Thread thread = Executors.defaultThreadFactory().newThread(r);
    thread.setDaemon(true);
    return thread;
}); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-12-29T16:19:31.853

方法 Platform.exit() 属于 JavaFX 上下文。当您调用 Platform.exit() 时，方法 javafx.application.Application#stop() 在上下文终止之前被调用。将 JavaFX 上下文终止之前需要执行的所有内容放入 stop() 方法中。

使用 System.exit(0) 方法，应用程序会突然终止。此方法不安全，因为如果此时您调用 System.exit(0) 并且作业仍在运行，可能正在数据库中执行写入操作，应用程序将不会等待作业文件，从而导致数据库损坏。

我有一个使用 SpringBoot 和线程池运行 JavaFX 的应用程序。我就是这样处理的。

```
//...
import javafx.application.Application;
import org.springframework.boot.SpringApplication;
import org.springframework.boot.autoconfigure.SpringBootApplication;
import org.springframework.context.ConfigurableApplicationContext;

import java.util.concurrent.Executors;
import java.util.concurrent.ScheduledExecutorService;

@SpringBootApplication
public class Main extends Application {

    ConfigurableApplicationContext context;

    ScheduledExecutorService scheduledExecutorService;

    @Override
    public void init() {

        this.context = SpringApplication.run(getClass());

        this.context.getAutowireCapableBeanFactory().autowireBean(this);

        this.scheduledExecutorService = Executors.newScheduledThreadPool(10);

    }

    @Override
    public void stop() throws Exception {

        super.stop();

        this.context.close();

        this.scheduledExecutorService.shutdownNow();

    }

    // ...

} 
```**

# ios - 设置 APNS 时必须删除现有配置文件吗？

> ID：14897195
> 
> 赞同：1
> 
> 时间：2013-02-15T14:47:58.513
> 
> 标签：ios, push-notification, apple-push-notifications

我正在尝试让 apns 工作。在使用 apns 之前，我有一个开发和分发配置文件设置。因此，我将完成苹果文档中标题为“创建和安装配置文件”的步骤。我不明白这些步骤：

1.  转到 iOS 开发中心的供应门户。
2.  **创建一个新的**配置文件，其中包含您为 APN 注册的 App ID。
3.  **在下载新配置文件之前**修改任何现有配置文件。**您必须以某种较小的方式（例如，切换选项）修改配置文件，以便门户生成新的配置文件。如果配置文件没有那么“脏”，您将获得没有推送权限的原始配置文件。**

 **所以 - 因为我已经有现有的配置文件，我是否跳过＃2，而是做＃3？还是我必须删除我当前的配置文件并从头开始创建它们，这将使我再次从＃2开始？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T15:09:29.587

如果您已有个人资料，则可以跳过 #2。如果它不起作用，您可以随时删除现有配置文件并创建一个新配置文件。**

# sql - SQL Server 递归查询以获取顶级父级

> ID：14897199
> 
> 赞同：1
> 
> 时间：2013-02-15T14:48:11.473
> 
> 标签：sql, sql-server, common-table-expression, recursive-query

在使用 SQL Server 中的 CTE 进行递归查询时，我需要您的帮助。

我有订单号作为输入参数。我需要显示其顶级父发货详细信息。即使我搜索它的孩子.. 即如果我搜索订单号 3，我应该得到它的顶级父订单号。那是20。

这是我的表结构..

```
CREATE TABLE #TblSerialNo
    (
      [SRno] [char](20) NOT NULL ,
      [CustSrNo] [varchar](75) NULL
    )
CREATE TABLE #TblSerialReleation
    (
      [SRno] [char](20) NOT NULL ,
      [ChildSRno] [char](20) NOT NULL
    )
CREATE TABLE #TblDespatch
    (
      [SRno] [char](20) NOT NULL ,
      OrderNo INT NOT NULL
    )

INSERT  INTO #TblSerialNo   VALUES  ( 'TS1', 'DD123CV1' )
INSERT  INTO #TblSerialNo   VALUES  ( 'TS2', 'DD123CV2' )
INSERT  INTO #TblSerialNo  VALUES   ( 'TS3', 'DD123CV3' )

INSERT  INTO #TblSerialNo VALUES  ( 'BS1', 'DD12sfs3CV1' )
INSERT  INTO #TblSerialNo VALUES  ( 'BS2', 'DD1et23CV2' )
INSERT  INTO #TblSerialNo VALUES  ( 'CS1', 'DD12e3CV1' )
INSERT  INTO #TblSerialNo VALUES  ( 'CS2', 'DD12fe3CV2' )

INSERT  INTO #TblSerialNo VALUES  ( 'BS1aa', 'DD12d3CV1' )
INSERT  INTO #TblSerialNo VALUES  ( 'BS1ab', 'DDd123CV2' )
INSERT  INTO #TblSerialNo VALUES  ( 'BS1ac', 'DD1r23CV3' )
INSERT  INTO #TblSerialNo VALUES  ( 'BS2aa', 'DDs123CV4' )
INSERT  INTO #TblSerialNo VALUES  ( 'BS2ab', 'DD12d3CV1' )
INSERT  INTO #TblSerialNo VALUES  ( 'BS2ac', 'DD1s23CV2' )
INSERT  INTO #TblSerialNo VALUES  ( 'CS1aa', 'DD1s23CV3' )
INSERT  INTO #TblSerialNo VALUES  ( 'CS1ab', 'DD12s3CV4' )
INSERT  INTO #TblSerialNo VALUES  ( 'CS1ac', 'DD123dCV1' )
INSERT  INTO #TblSerialNo VALUES  ( 'CS2aa', 'DDa123CV2' )
INSERT  INTO #TblSerialNo VALUES  ( 'CS2ab', 'DDa123CV3' )
INSERT  INTO #TblSerialNo VALUES  ( 'CS2ac', 'DDa123CV4' )

--================  Relation table   ==============

INSERT  INTO #TblSerialReleation  VALUES  ( 'TS1', 'BS1' )
INSERT  INTO #TblSerialReleation  VALUES  ( 'TS1', 'BS2' )
INSERT  INTO #TblSerialReleation  VALUES  ( 'TS2', 'CS1' )
INSERT  INTO #TblSerialReleation  VALUES  ( 'TS2', 'CS2' )
INSERT  INTO #TblSerialReleation  VALUES  ( 'BS1', 'BS1aa' )
INSERT  INTO #TblSerialReleation  VALUES  ( 'BS1', 'BS1ab' )
INSERT  INTO #TblSerialReleation  VALUES  ( 'BS1', 'BS1ac' )
INSERT  INTO #TblSerialReleation  VALUES  ( 'BS2', 'BS2aa' )
INSERT  INTO #TblSerialReleation  VALUES  ( 'BS2', 'BS2ab' )
INSERT  INTO #TblSerialReleation  VALUES  ( 'BS2', 'BS2ac' )
INSERT  INTO #TblSerialReleation  VALUES  ( 'CS1', 'CS1aa' )
INSERT  INTO #TblSerialReleation  VALUES  ( 'CS1', 'CS1ab' )
INSERT  INTO #TblSerialReleation  VALUES  ( 'CS1', 'CS1ac' )
INSERT  INTO #TblSerialReleation  VALUES  ( 'CS2', 'CS2aa' )
INSERT  INTO #TblSerialReleation  VALUES  ( 'CS2', 'CS2ab' )
INSERT  INTO #TblSerialReleation  VALUES  ( 'CS2', 'CS2ac' )
--===========  Despatch 
INSERT  INTO #TblDespatch  VALUES  ( 'CS2ac', 1 )
INSERT  INTO #TblDespatch  VALUES  ( 'CS2ab', 1 )
INSERT  INTO #TblDespatch  VALUES  ( 'CS2ac', 1 )
INSERT  INTO #TblDespatch  VALUES  ( 'CS1aa', 1 )
INSERT  INTO #TblDespatch  VALUES  ( 'CS1ac', 1 )
INSERT  INTO #TblDespatch  VALUES  ( 'CS2ac', 1 )
INSERT  INTO #TblDespatch  VALUES  ( 'CS2ac', 1 )
INSERT  INTO #TblDespatch  VALUES  ( 'TS1', 1 )
INSERT  INTO #TblDespatch  VALUES  ( 'TS3', 2 )
INSERT  INTO #TblDespatch  VALUES  ( 'TS2', 3 )
INSERT  INTO #TblDespatch  VALUES  ( 'BS2ab', 20 )

DROP TABLE #TblDespatch
DROP TABLE #TblSerialNo
DROP TABLE #TblSerialReleation 
```

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T15:11:55.240

查看您的数据，该关系似乎相反（`BS2ab`（Order 20）是`TS1`（Order 3）的子代`BS2`。

如果是这种情况，从子 ( `BS2ab`) 开始，您可以使用以下语句找到其最高父级：

```
;with ParentOrders as(
  select 
    convert(char(20), 'BS2ab')as SRno,
    0 as Level 

  union  all

  select r.SRno, o.Level + 1
  from ParentOrders o
  join TblSerialReleation r
    on o.SRNo = r.ChildSRno 
)
select top 1 SRNO 
  from ParentOrders
  order by Level desc 
```

这是查询的工作示例：[http ://www.sqlfiddle.com/#!3/e253e/6](http://www.sqlfiddle.com/#!3/e253e/6)

# c# - 在四舍五入每月费用时计算最终付款

> ID：14897201
> 
> 赞同：0
> 
> 时间：2013-02-15T14:48:10.533
> 
> 标签：c#, sql, vb.net, math, accounting

情况如下：

每月费用适用于帐户，并向下舍入到最接近的美元。如果每月费用有任何余额，这将创建高于其他付款的最终付款。如果我所有的债务人都有这样的账户，那么确定最后一个月是没有问题的，因为月数是确定的，我可以对照他们账户上的费用数量进行核对，然后向他们收取他们账户上的余额在最后一个月。

然而，它变得更加复杂。现在，由于可能会发现债务人或多或少地欠债，因此在还款期间的任何给定时间，到期总额都可能发生变化。同样，计算最终付款也没有问题，但是设置付款的人将新的付款金额从最初应付的总额中计算出来，比如 1000 美元，而不是他们账户上的当前余额，比如 800 美元。发生这种情况时，账户可以在其规定的月数之前或超出其月数的情况下还清。第二个是不允许的，我必须确定最终付款何时发生并收取余额。这可能并不太难，但您不仅需要跟踪总到期更改前后的付款金额差异，

这甚至更进了一步，债务人有能力降低他们的付款。这个新的付款金额也是基于到期总额而不是当前余额，再次导致付款在它应该之前或之后关闭一个帐户。

无论如何，您可以计算这些帐户的最后一个月的时间，并将剩余的余额用于他们的帐户费用吗？

大多数账户都是直截了当的，没有支付金额变化，但许多账户仍然存在。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T18:43:21.763

在我看来，您想为每个借款人维护一个 [总债务]、[总支付]、[每月支付] 列。那么当 [每月还款] > [总债务] - [总支付] 他们是在上个月吗？

希望这可以帮助

# java - IOS 收据验证 IllegalArgumentException

> ID：14897203
> 
> 赞同：3
> 
> 时间：2013-02-15T14:48:19.587
> 
> 标签：java, ios, app-store

我使用与问题中显示的代码类似的代码。 [Java 和 AppStore 收据验证](https://stackoverflow.com/questions/12432147/java-and-appstore-receipt-verification)

但我最终还是得到了

```
{"status":21002, "exception":"java.lang.IllegalArgumentException"} 
```

Base64编码有问题吗？我是否必须将 base64 编码的字符串转换为十六进制或其他？

我发布的内容类似于以下内容

```
{"receipt-data" : "eyJzaWduYXR1cmUiOiJBbjNJVER0VVNmZWNhaGMxR..... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T07:48:00.010

问题在于 Java 中的 Base64 编码。当我在 IOS 中进行编码并将其用作来自服务器的请求而没有在 Java 中进行任何编码时，它就起作用了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-04T14:37:14.507

我遇到了类似的问题，并且在尝试验证服务器上的收据时收到了来自 Apple 的 java.lang.IllegalArgumentException。问题是我的 base64 编码逻辑在编码字符串中插入了换行符。一旦我更新了我的代码以确保没有新的换行符被插入到编码的字符串中，我就能够成功地根据 Apple 的服务器验证我的收据。

# ruby-on-rails - 在动态列表中使用 select_tag 或选择两个标识符？

> ID：14897216
> 
> 赞同：0
> 
> 时间：2013-02-15T14:49:27.553
> 
> 标签：ruby-on-rails, list, dynamic

我对 ror 很陌生。

我试图让一个公式来选择一个动态列表的计数。

```
<%= form_tag(:controller => "sell", :action => "create", :method => "post") do %>   
    <% @given_event.categorys.find(:all, :order => "id").each do |c| %>
        <%=c.name %><br>
        <% c.tickets.find(:all, :order=>"id").each do |t|%> 
        <%= select_tag "orderticket:" +t.id.to_s, options_for_select([ "0", "1", "3" ]) %>
            <%=t.name%>
        <%=(t.price/100)%><br>
        <%end%> 
    <%end%> 
```

如您所见，我列出了带有“c.tickets.find ...”的票，然后我将select_tag中的标识符“ticket：”+ t.id.to_s与票的ID和人数相结合将订购。

我想在参数中得到类似这样的东西：orderticket{1 => {ticket_id=>“1”，count =>“2”}。因此，我可以遍历 orderticket 并始终获取该票的票证 ID 和数量。

任何人都可以帮忙吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T17:40:05.093

您可以执行以下操作：

```
<%= select_tag :orderticket, options_for_select(['0','1','2']), {:name => "ticket_id[#{t.id}]"} %> 
```

# c# - Running multiple commands in a command line utility using cmd.exe from .Net win form

> ID：14897218
> 
> 赞同：3
> 
> 时间：2013-02-15T14:49:29.447
> 
> 标签：c#, winforms, cmd, tableau-api

I want to run [tabcmd.exe utility](http://onlinehelp.tableausoftware.com/current/server/en-us/tabcmd_cmd.htm) to publish views in tableau server. Manual step to do this is as follows, log file will be updated for every step in the location

> "C:\Users[UserName]\AppData\Roaming\Tableau\tabcmd.log"

In the same session I have to perform this steps manually one by one order

1.  Run cmd.exe
2.  log in by using the command **tabcmd login -s "http:/sales-server:8000" -t Sales -u administrator -p p@ssw0rd!**
3.  Create Project Name using the command **tabcmd createproject -n "Quarterly_Reports" -d "Workbooks showing quarterly sales reports."**
4.  Publish views by using the command **tabcmd publish "analysis.twbx" -n "Sales_Analysis" --db-user "jsmith" --db-password "p@ssw0rd"**
5.  Refresh by using the command **tabcmd refreshextracts --workbook "My Workbook"**
6.  Log out by using the command **tabcmd logout**

Now I am trying to automate this steps from my .Net win form, so I used below code as a try and It is not working.

```
String path = @"C:\Program Files (x86)\Tableau\Tableau Server\7.0\bin\tabcmd.exe"
ProcessStartInfo startInfo = new ProcessStartInfo ();
startInfo.FileName = "\""+path+ "\"";
startInfo.Arguments = String.Format("login -s http://Server1:8000 --db-user "jsmith" --db-password "p@ssw0rd");
startInfo.UseShellExecute = false ;
startInfo.CreateNoWindow = false;
startInfo.WindowStyle = ProcessWindowStyle.Normal;
startInfo.RedirectStandardOutput = true;
startInfo.RedirectStandardInput = true;
startInfo.RedirectStandardError = true;
Process p = new Process();
p.StartInfo = startInfo;
p.Start();      

using (StreamWriter sw = p.StandardInput)
        {
            if (sw.BaseStream.CanWrite)
            {
                sw.WriteLine("createproject -n \"MyProject\" -d \"MyProjectWorkbook\"");
                //sw.WriteLine("My next Command");
                //sw.WriteLine("My next Command");
            }
        } 
```

I am able to log in successfully and I am not able to proceed consequent steps further, I have no clue how to proceed on this further, so I am looking forward some help on this. Thanks in advance!

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-15T15:50:20.567

I'm unsure if this is of use to you or not but you could try creating a batch file with all of those commands and the execute the batch file from command prompt like this :-

```
 //Build Commands - You may have to play with the syntax

    string[] cmdBuilder = new string[5] 
      { 
       @"tabcmd login -s 'http:/sales-server:8000' -t Sales -u administrator -p p@ssw0rd!",
       @"tabcmd createproject -n 'Quarterly_Reports' -d 'Workbooks showing quarterly sales reports.'",
       @"abcmd publish 'analysis.twbx' -n 'Sales_Analysis' --db-user 'jsmith' --db-password 'p@ssw0rd'", 
       @"tabcmd refreshextracts workbook 'My Workbook'",
       @"tabcmd logout"

      };

     //Create a File Path

    string BatFile = @"\YourLocation\tabcmd.bat";

    //Create Stream to write to file.

    StreamWriter sWriter = new StreamWriter(BatFile);

     foreach (string cmd in cmdBuilder) 
        { 
          sWriter.WriteLine(cmd); 
        }

       sWriter.Close();

    //Run your Batch File & Remove it when finished.

   Process p = new Process();
   p.StartInfo.CreateNoWindow = true;
   p.StartInfo.UseShellExecute = false;
   p.StartInfo.FileName = "C:\\cmd.exe";
   p.StartInfo.Arguments = @"\YourLocation\tabcmd.bat";
   p.Start();
   p.WaitForExit();
   File.Delete(@"\YourLocation\tabcmd.bat") 
```

I'll leave the output section to yourself. You could try this, it is not exactly clean but will automate the main steps. It's either this, or opening a process for each command as the last process exits?

Hope this is of help.

# java - 从 Windows 机器中删除 Web 服务

> ID：14897219
> 
> 赞同：0
> 
> 时间：2013-02-15T14:49:31.017
> 
> 标签：java, windows, web-services, jax-ws

我正在关注 JAX-WS [mkyong - jax-ws的小教程](http://www.mkyong.com/webservices/jax-ws/jax-ws-hello-world-example/)

我已经在我的 Windows 7 机器上发布了这个带有以下代码的小示例。但是如何更新或删除此 Web 服务？

```
public class HelloWorldPublisher {
    public static void main(String[] args) {
        Endpoint.publish("http://localhost:9999/ws/hello", new HelloWorldImpl());
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T15:00:34.770

删除：如果您想删除 Web 服务，只需使用`Endpoint.stop()` [（在此处阅读）](http://docs.oracle.com/javase/7/docs/api/javax/xml/ws/Endpoint.html#stop%28%29)停止它的方法接受请求。

更新：只需更改`HelloWorldImpl`类中的代码。它将自动调用新更新的代码。

`Endpoint.publish()`只是告诉服务器给定 URL 中的请求应该使用`HelloWorldImpl`

# kendo-ui - 如何更改剑道网格过滤器格式

> ID：14897222
> 
> 赞同：5
> 
> 时间：2013-02-15T14:49:39.783
> 
> 标签：kendo-ui, kendo-grid

我的网格中有一个字段，其 ID 范围从 1 到 2000。我将其指定为字段定义中的数字。

问题是当我使用过滤器并输入“1000”时，当我返回过滤器输入另一个数字时，它显示“1,000.00”。我不希望过滤后的文本框显示逗号或小数点。该格式与该字段无关。

我该如何纠正？

提前致谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-09-22T21:45:59.993

虽然@Flores 的回答为我指明了正确的方向，但它并没有达到预期的效果。至少我的过滤器中仍然有逗号使用他的片段。我最终对代码进行了一些小修改以达到预期的结果。

```
filterable: {
    ui: function (element) {
        element.kendoNumericTextBox({
            format: '#',
            decimals: 0,
        });
    },
}, 
```

那只会给你数字。没有逗号，也没有小数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-22T10:05:21.427

您可以在列上的可过滤对象上设置格式，如下所示：

```
 field: "TaskId",
                title: "TaskId",
                width: 80,
                filterable: {
                    ui: function (element) {
                        element.kendoNumericTextBox({
                            format: "n0"
                        });
                    }
                } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T18:50:44.647

您应该考虑使用自定义过滤器菜单。[以下](http://demos.kendoui.com/web/grid/filter-menu-customization.html)是创建 DDL 的方法。在您的情况下，您将需要创建具有特定格式的[数字文本框。](http://demos.kendoui.com/web/numerictextbox/index.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-11T18:56:16.437

每个剑道支持：

如果 filterable.mode 设置为 'row'，则应使用 columns.filterable.cell.template 来自定义输入。请参阅此示例[http://dojo.telerik.com/UKulA/2](http://dojo.telerik.com/UKulA/2)。

您可以像上面的示例一样使用 min 和 max 来限制范围。

# javascript - Facebook 分享按钮在 IE 中不呈现

> ID：14897224
> 
> 赞同：0
> 
> 时间：2013-02-15T14:49:44.593
> 
> 标签：javascript, facebook, internet-explorer, facebook-sharer

我的页面上有以下 Facebook 分享按钮*的代码。

```
 <a name="fb_share" share_url="<?php echo $url;?>"></a> 
            <script src="http://static.ak.fbcdn.net/connect.php/js/FB.Share" 
                    type="text/javascript">
            </script> 
```

在 Chrome 和 Firefox 中，上面的脚本会渲染一个带有分享按钮的 iframe。但是在 IE 中，上面的脚本就在那里，不做任何事情。

有人对为什么有任何想法吗？谢谢

*（对于我的特定应用，分享比“喜欢”和“发送”更合适）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T15:12:23.237

共享按钮已弃用。我建议你这样做：

```
<a href="//www.facebook.com/sharer/sharer.php?u=<?php echo urlencode(YOUR_URL);?>" target="_blank">
    <img alt="Share" src="URL_OF_ANY_IMAGE">
</a> 
```

# ios - 如何在 iOS coco2d 中无限移动背景图像

> ID：14897229
> 
> 赞同：3
> 
> 时间：2013-02-15T14:49:58.197
> 
> 标签：ios, loops, background, cocos2d-iphone

我必须在 iOS Coco2d 中移动背景图像，但我遇到了一些困难。我尝试了一些网站上提供的一些解决方案，但未能成功让它们正常工作。以下是我目前正在处理的代码：-

背景第一次平滑移动，但之后无法正常工作：-

初始化函数中的代码：-

```
bg1 = [CCSprite spriteWithFile: @"bg1.png"];
bg1.anchorPoint = CGPointZero;
[self addChild:bg1 z:-2];

bg2 = [CCSprite spriteWithFile: @"bg1.png"];
[self addChild:bg2 z:-3];
bg2.anchorPoint = CGPointMake(480, 0);

// schedule a repeating callback on every frame
[self schedule:@selector(nextFrame:) interval:.4f]; 
```

* * *

```
- (void) nextFrame:(ccTime)dt {
    id actionMove = [CCMoveTo actionWithDuration:.4 position:ccp(bg1.position.x - 100 * dt, bg1.position.y)]; //winSize.height/2)];

    id actionMove1 = [CCMoveTo actionWithDuration:.4 position:ccp(bg2.position.x - 100 * dt, bg2.position.y)]; //winSize.height/2)];

    id actionMoveDone = [CCCallFuncN actionWithTarget:self selector:@selector(spriteMoveFinished:)];
    [bg1 runAction:[CCSequence actions:actionMove,actionMoveDone, nil]];
    [bg2 runAction:[CCSequence actions:actionMove1,actionMoveDone, nil]];   
}

-(void)spriteMoveFinished:(id)sender {

    CCSprite *sprite = (CCSprite *)sender;
    if(sprite == bg1) {
        if (bg1.position.x < -480) {
            [self removeChild:bg1 cleanup:NO];
            bg1.position = ccp( 480 , bg1.position.y );

            [self addChild:bg1 z:-2];
        }
    }
    else if(sprite == bg2)
        if (bg2.position.x < -480) {
            [self removeChild:bg2 cleanup:NO];
            bg2.position = ccp( bg1.position.x+ 480 , bg1.position.y );
            [self addChild:bg2 z:-3];
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T07:33:11.840

试试这个，确保你翻转背景 2。

```
 #define IS_IPAD (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad)
 #define MM_BG_SPEED_DUR       ( IS_IPAD ? (6.0f) : (2.0f) )

-(void)onEnter
{
    [super onEnter];
    [self initBackground];

    [self schedule: @selector(tick:)];
}

-(void)initBackground
{
   NSString *tex = @"BG/Background.png";//[self getThemeBG];

    mBG1 = [CCSprite spriteWithFile:tex];
    mBG1.position = ccp(s.width*0.5f,s.height*0.5f);
    [self addChild:mBG1 z:LAYER_BACKGROUND];

    mBG2 = [CCSprite spriteWithFile:tex];
    mBG2.position = ccp(s.width+s.width*0.5f,s.height*0.5f);

    mBG2.flipX = true;
    [self addChild:mBG2 z:LAYER_BACKGROUND];

}

-(void)scrollBackground:(ccTime)dt
{
    CGSize s = [[CCDirector sharedDirector] winSize];

    CGPoint pos1 = mBG1.position;
    CGPoint pos2 = mBG2.position;

    pos1.x -= MM_BG_SPEED_DUR;
    pos2.x -= MM_BG_SPEED_DUR;

    if(pos1.x <=-(s.width*0.5f) )
    {
        pos1.x = pos2.x + s.width;
    }

    if(pos2.x <=-(s.width*0.5f) )
    {
        pos2.x = pos1.x + s.width;
    }

    mBG1.position = pos1;
    mBG2.position = pos2;

}

-(void)tick:(ccTime)dt
{
    [self scrollBackground:dt];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-08T17:31:53.963

我认为这种方式更简单一些。您初始化背景`init`并将它们移入`update`.

**在初始化方法中：**

```
// position backgrounds
CCSprite *bg1 = [CCSprite spriteWithSpriteFrame:spriteFrame];
CCSprite *bg2 = [CCSprite spriteWithSpriteFrame:spriteFrame];
CCSprite *bg3 = [CCSprite spriteWithSpriteFrame:spriteFrame];
bg1.anchorPoint = ccp(0, 0);
bg1.position = ccp(0, 0);
bg2.anchorPoint = ccp(0, 0);
bg2.position = ccp(bg1.contentSize.width-1, 0);
bg3.anchorPoint = ccp(0, 0);
bg3.position = ccp(2*bg1.contentSize.width-1, 0);
_backgrounds = @[bg1, bg2, bg3];

[self addChild:bg1 z:INT_MIN];
[self addChild:bg2 z:INT_MIN];
[self addChild:bg3 z:INT_MIN]; 
```

**在更新方法中：**

```
// endless scrolling for backgrounds
for (CCSprite *bg in _backgrounds) {
    bg.position = ccp(bg.position.x - 50 * delta, bg.position.y);
    if (bg.position.x < -1 * (bg.contentSize.width)) {
        bg.position = ccp(bg.position.x + (bg.contentSize.width*2)-2, 0);
    }
} 
```

*注：代码适用于 Cocos2d 3.0*

# google-app-engine - 有没有办法查看 Appstats 中正在访问哪些实体？

> ID：14897230
> 
> 赞同：3
> 
> 时间：2013-02-15T14:50:05.043
> 
> 标签：google-app-engine, appstats

在分析`datastore_v3.Get`调用的 Appstats 跟踪时，了解正在从数据存储中检索哪些实体会非常有帮助。是否有启用此功能的隐藏配置标志？

我尝试设置`appstats_DATASTORE_DETAILS`为`True`in `appengine_config.py`，但似乎没有任何区别。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T09:50:45.477

据我所知，没有隐藏的配置标志可以做到这一点。Appstats 模块的源代码是开放的。

[您可以在https://code.google.com/p/googleappengine/source/browse#svn%2Ftrunk%2Fpython%2Fgoogle%2Fappengine%2Fext%2Fappstats（python](https://code.google.com/p/googleappengine/source/browse#svn%2Ftrunk%2Fpython%2Fgoogle%2Fappengine%2Fext%2Fappstats)版本）和[https://code.google.com](https://code.google.com/p/googleappengine/source/browse#svn%2Ftrunk%2Fjava%2Fsrc%2Fmain%2Fcom%2Fgoogle%2Fappengine%2Ftools%2Fappstats)查看它们[/p/googleappengine/source/browse#svn%2Ftrunk%2Fjava%2Fsrc%2Fmain%2Fcom%2Fgoogle%2Fappengine%2Ftools%2Fappstats](https://code.google.com/p/googleappengine/source/browse#svn%2Ftrunk%2Fjava%2Fsrc%2Fmain%2Fcom%2Fgoogle%2Fappengine%2Ftools%2Fappstats)（java 版本）。

您可以在那里搜索以查看是否已经存在类似的内容，或者您​​可以复制代码并自己进行更改。您甚至可以发回包含可集成到 sdk 中的更改的补丁。

# asp.net - JQuery Slider - 记住页面之间的值 ASP.net

> ID：14897231
> 
> 赞同：2
> 
> 时间：2013-02-15T14:50:05.597
> 
> 标签：asp.net, jquery-ui, jquery

如何记住 JQuery 滑块中的值并将它们设置为用户在页面更改时选择的值？

我正在使用 JQuery 滑块，当单击按钮时会加载一个新页面，并且这些滑块也在该页面上。当该页面加载时，我需要将滑块设置为与上一页中选择的值相同的值。当用户返回上一页时，我还需要保留这些值。

目前它只是重置回我设置的默认值。

我在按钮单击时将值存储在会话中

```
Session["TermYears"] = hdYears.Value.ToString(); 
```

但我不知道如何在使用 JQuery 加载页面时设置值。

我有一个隐藏的领域

```
<asp:HiddenField ID="hdCover" runat="server" /> 
```

我的代码如下

```
 $(function () {
      $("#coverAmountSlider").slider({
          range: "min",
          value: 150000,
          min: 5000,
          max: 1000000,
          step: 1000,
          slide: function (event, ui) {
              $("#amount").val("£" + ui.value);
              $("#hdCover").val(ui.value);
          }
      });
      $("#amount").val("£" + $("#coverAmountSlider").slider("value"));
      $("#hdCover").val($("#coverAmountSlider").slider("value"));

  }); 
```

如果可能，我想避免使用 cookie。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T15:42:51.633

我建议使用`localStorage`. 您可以非常轻松地使用 Javascript 设置/获取值。

也许尝试这样的事情：

```
// Set the localStorage value
$("#coverAmountSlider").slider({
    ... // Your current options
    stop: function (event, ui) {
        localStorage["sliderValue"] = ui.value;
    }
}); 
```

现在您可以从任何页面检索该值：

```
// Get the localStorage value from a different page
var sliderValue = localStorage["sliderValue"];

$("#differentSlider").slider("value", sliderValue); 
```

`localStorage`浏览器兼容性（[MDN](https://developer.mozilla.org/en-US/docs/DOM/Storage)）：

*   铬 4+
*   火狐 3.5+
*   IE8+
*   歌剧 10.40+
*   野生动物园 4+

# sql - Oracle：比较一个过程的两个版本

> ID：14897232
> 
> 赞同：0
> 
> 时间：2013-02-15T14:50:11.513
> 
> 标签：sql, oracle

如果一个用户更改了一个过程的源代码，我想找出这个过程的新版本和旧版本之间的差异并将它们保存到一个表中。
换句话说，我想找到添加、修改或删除的行。

我尝试使用“在模式上的 ddl 之前”使用触发器，然后比较 all_source 视图中的源代码和函数 ORA_SQL_TXT(sql_text) 给出的源代码，但这不起作用，因为函数给出的源代码ORA_SQL_TXT(sql_text) 不按行号排序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T15:44:17.313

使用`SELECT .. FROM USER_SOURCES AS OF TIMESTAMP(time you want) WHERE ... ORDER BY LINE;`. 这将及时提供表格，从这里您可以使用`MINUS`或将其放入另一个表格并做任何您想做的事情。

它只保存最近的更改（取决于某些设置），但如果犯了一个小错误，它绝对是一个很棒的功能。

# php - 返回函数中更好的 HTML？

> ID：14897234
> 
> 赞同：1
> 
> 时间：2013-02-15T14:50:12.973
> 
> 标签：php, html, function, ob-get-contents

我可以在字符串中编写 HTML 代码并返回它，但它总是看起来有点乱。有没有更好的解决方案？

**示例 1 - 新行 HTML**

每一行都有 HTML 的新行。编写 HTML 代码的一种非常混乱的方式。

```
function my_function()
{
    $html = '<div class="hello">';
    $html .= 'A very long text';
    $html .= '</div>';
    return $html;
} 
```

**示例 2 - HTML 块**

编写 HTML 代码仍然是一种混乱的方式。另一个缺点是很难写出“引用”字符。

```
function my_function()
{
    $html = '
        <div class="hello">
            A very long text
        </div>';

    return $html;
} 
```

**示例 3 - ob_get_contents**

我可以使用[ob_get_contents](http://php.net/manual/en/function.ob-get-contents.php)。它将我的 PHP 与我的 HTML 分开，很好！但我读过这是糟糕的表现。

```
function my_function()
{
    ob_start();
    ?>
        <div class="hello">
            A very long text
        </div>';
    <?php
    $html = ob_get_contents();
    ob_end_clean();
    return $html;
} 
```

**问题**

有没有另一种方法可以很好地保持 HTML 不受 PHP 影响？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T14:58:44.457

是与否，

这三个示例中的任何一个都远远超出了“让 php 远离 html”的目标。在他们之中，他们并不比另一个更好。

将表示层与逻辑保持连接并不是一种好的做法。
对于初学者来说，这两种解决方案都不是我们可以直截了当的。学习曲线较短的最简单方法就是使用模板引擎，比如 smarty。

[http://www.smarty.net/](http://www.smarty.net/)

这将帮助您使您的演示文稿远离您的代码。

但普遍接受的策略是 MVC 将软件分成 3 层。模型视图和控制器。这篇文章对什么是 mvc 专注于 php 做一个简单的解释。

[http://onlamp.com/pub/a/php/2005/09/15/mvc_intro.HTML](http://onlamp.com/pub/a/php/2005/09/15/mvc_intro.HTML)

还有其他许多人认为更好的架构和实践，但这是我认为的基础。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T14:52:49.893

您可以使用一种模板形式，其中您的 HTML 结构存储在模板文件中，其中包含您读入的占位符值，并将占位符值替换为实际内容。

这样你就只是读取一个字符串，做一堆“替换”来转换，然后返回结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T14:53:04.433

“有没有另一种方法可以很好地使 HTML 不受 PHP 影响？”

*   是的 - 你应该阅读[MVC](http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller)以及如何在 PHP 中实现它（例如使用[Smarty](http://www.smarty.net/)）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-15T15:02:13.170

将两者分开的简单想法：

```
//php function
    function stuff(){
          $arr = array();
          $arr['text'] =  'A very long text';
          $arr['class']  = 'hello';

        return $arr;
        } 
```

HTML页面：

```
<html>
<?php $thing = stuff(); ?>

<div class="<?php echo $thing['class']; ?>">
<?php echo $thing['text']; ?>
</div>

</html> 
```

# visual-studio-2010 - 包含子文件夹选项在 VS 2010 查找和替换窗口中未选中

> ID：14897237
> 
> 赞同：0
> 
> 时间：2013-02-15T14:50:28.507
> 
> 标签：visual-studio-2010

在我的解决方案中，如果执行 ctrl + shift + F，“查找和替换”窗口将打开，但其中包含子文件夹选项未选中且已禁用，因此我无法再检查。如何选中该复选框。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T15:00:10.760

如果您将“查找范围：”更改为实际文件夹（例如 c:\dev\）而不是当前解决方案或任何其他预定义选项，则它是可编辑的。

# ruby-on-rails - ActiveRecord 中的 .order 方法参数是否默认进行了清理？

> ID：14897239
> 
> 赞同：14
> 
> 时间：2013-02-15T14:50:35.280
> 
> 标签：ruby-on-rails, rails-activerecord

我正在尝试将字符串传递给 .order 方法，例如

```
Item.order(orderBy) 
```

我想知道 orderBy 是否默认被清理，如果没有，清理它的最佳方法是什么。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-02-15T15:45:48.147

订单未经过消毒。这个查询实际上会删除用户表：

```
Post.order("title; drop table users;") 
```

如果有任何方式可能被用户输入污染，您需要`orderBy`在运行查询之前检查变量。`orderBy`像这样的东西可以工作：

```
items = Item.scoped
if Item.column_names.include?(orderBy)
  items = items.order(orderBy)
end 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2016-08-02T14:20:20.717

它们的清理方式与带有 的`.where`子句不同`?`，但您可以使用`#sanitize_sql_for_order`：

```
sanitize_sql_for_order(["field(id, ?)", [1,3,2]])
# => "field(id, 1,3,2)"

sanitize_sql_for_order("id ASC")
# => "id ASC" 
```

[http://api.rubyonrails.org/classes/ActiveRecord/Sanitization/ClassMethods.html#method-i-sanitize_sql_for_order](http://api.rubyonrails.org/classes/ActiveRecord/Sanitization/ClassMethods.html#method-i-sanitize_sql_for_order)

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2018-10-11T21:43:13.210

只是为了更新 Rails 5+，在撰写本文时，将数组传递给`order`will（尝试）清理右侧输入：

```
Item.order(['?', "'; DROP TABLE items;--"])
#=> SELECT * FROM items ORDER BY '''; DROP TABLE items;--' 
```

这将在 Rails 5.1 中触发关于“危险查询方法”的弃用警告，该警告在 Rails 6 中将被禁止。如果您知道左侧输入是安全的，将其包装在`Arel.sql`调用中将使警告静音，并且可能仍然有效在 Rails 6 中。

```
Item.order([Arel.sql('?'), "'; DROP TABLE items;--"])
#=> SELECT * FROM items ORDER BY '''; DROP TABLE items;--' 
```

**需要注意的是，左侧的不安全 SQL 将不加修改地发送到数据库。谨慎行事！**

如果您知道输入将成为模型的属性，则可以将参数作为哈希传递：

```
Item.order(column_name => sort_direction) 
```

在这种形式中，如果列名对模型无效或排序方向无效，ActiveRecord 会报错。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-02-24T15:18:41.350

我使用如下内容：

```
@scoped = @scoped.order Entity.send(:sanitize_sql, "#{@c} #{@d}") 
```

其中 Entity 是模型类。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-04-09T03:52:55.857

## `ActiveRecord::Relation`用扩展`sanitized_order`。

[在Dylan 的带领](https://stackoverflow.com/a/14898249/293280)下，我决定扩展以`ActiveRecord::Relation`添加一个可链接的方法，该方法将自动清理`order`传递给它的参数。

这是你如何称呼它的：

```
Item.sanitized_order( params[:order_by], params[:order_direction] ) 
```

以下是您如何扩展`ActiveRecord::Relation`以添加它：

**配置/初始化程序/sanitized_order.rb**

```
class ActiveRecord::Relation

  # This will sanitize the column and direction of the order. 
  # Should always be used when taking these params from GET.
  #
  def sanitized_order( column, direction = nil )
    direction ||= "ASC"

    raise "Column value of #{column} not permitted."       unless self.klass.column_names.include?( column.to_s ) 
    raise "Direction value of #{direction} not permitted." unless [ "ASC", "DESC" ].include?( direction.upcase ) 

    self.order( "#{column} #{direction}" )
  end

end 
```

它主要做两件事：

1.  它确保`column`参数`klass`是`ActiveRecord::Relation`.

    在我们上面的示例中，它将确保`params[:order_by]`是`Item`' 列之一。

2.  它确保方向值是“ASC”或“DESC”。

它可能会更进一步，但我发现在接受用户的排序参数时，易用性和 DRYness 在实践中非常有用。

# facebook - Facebook API - 通过他们的 ID 获取朋友的名字

> ID：14897240
> 
> 赞同：0
> 
> 时间：2013-02-15T14:50:38.690
> 
> 标签：facebook, facebook-fql

我有一个查询，它给了我朋友 ID 的列表：

```
'SELECT owner FROM photo WHERE object_id IN (SELECT object_id FROM photo_tag WHERE subject=me())' 
```

我想获取这些 ID 的名称，我尝试使用：

```
var frndTagNames = new Array();

for (var j=0;j<frndTagIds.fql_result_set.length;j++)

{
    FB.api('/'+frndTagIds.fql_result_set[j].owner+'', function(frnds) {
    frndTagNames[j] = frnds.name;
});
}   
console.log(frndTagNames); 
```

问题是我不能在 FB.api 范围之外使用“frndTagNames”数组。

**顺便说一句，整个代码都在另一个 FB.api 代码中**

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T20:39:20.353

frndTagNames 应该在回调函数中可用。您得到什么类型的响应（例如某种错误）？尝试将 console.log(response) 添加到回调函数。

例如，我可以定义一个数组并在回调函数中为其分配一个值，如下所示：

```
 var foo = new Array();

FB.api('/me/', function(resp) { foo[0]=resp.name });

console.log(foo[0])
"Brian Ledsworth" 
```

嵌套块示例（保留“this”的上下文）。将此分配给 _that，然后使用 _that.frndTagNames

```
var _that = this;
FB.getLoginStatus(function(response) {
  if (response.status === 'connected') {
    FB.api('/me/friends', function(response) {
      if(response && response.data) {
        for(i=0;i<response.data.length;i++) {
          _that.friendsFacebookColl.add(response.data[i]);
        }
      }
    });
  }
}); 
```

# wordpress - 我希望 wordpress 帖子图片有帖子链接

> ID：14897243
> 
> 赞同：0
> 
> 时间：2013-02-15T14:50:50.850
> 
> 标签：wordpress, wordpress-theming

我是 Wordpress 的新手，我正在实现一个从父主题 12 派生的自定义主题。我想要如下内容：我正在上传将插入帖子中的媒体。我们知道，当我们点击帖子标题时，它会将我们带到完整的帖子页面。但是当我点击帖子中的图片时，它会将我带到这样的网址：www.mohin.com/?attachement_id=10，这是我不想要的。我希望图像单击将我带到完整的帖子页面，就像标题单击一样。有没有人可以帮助我解决这个问题

任何帮助表示赞赏。

谢谢，莫欣

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T16:23:07.213

是的，这很简单。只需在帖子编辑窗口中选择图像，选择超链接图标，然后粘贴您希望链接转到的 URL。更新然后检查。单击图像时，它应该转到该链接。

# regex - 这可以用一个正则表达式吗？

> ID：14897245
> 
> 赞同：3
> 
> 时间：2013-02-15T14:50:58.740
> 
> 标签：regex

我有一个字符串

```
{! texthere } 
```

我想在 {! 直到结束或到达第一个}。所以如果我有

> {!text here} {!text here again} {!more text here。好家伙！

我想要 ["{!text here}", "{!text here again}", "{!more text here.oh boy!"]

我以为这行得通

> {!.*}??

但上面的字符串会变成 ["{!text here} {!text here again} {!more text here. Oh boy!"]

我对正则表达式仍然非常缺乏经验，所以我不明白为什么这不起作用。我认为它会匹配'{！' 后跟任意数量的字符，直到到达可能不存在的括号（非贪婪）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-15T14:54:49.270

使用[积极的后视](http://www.regular-expressions.info/lookaround.html) `(?<={!)[^}]+`：

```
In [8]: import re

In [9]: str="{!text here} {!text here again} {!more text here. Oh boy!"

In [10]: re.findall('(?<={!)[^}]+',str)
Out[10]: ['text here', 'text here again', 'more text here. Oh boy!'] 
```

这是积极的向后看，`}`如果跟随，则匹配任何非字符`{!`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T14:53:15.250

我相信您想使用不情愿的量词：

```
{!.*?}? 
```

这将导致`.`一旦`}`找到第一个跟随者，而不是最后一个，就停止匹配。

我有一个关于贪婪和不情愿量词的问题，[这里](https://stackoverflow.com/questions/1139171/when-it-comes-to-regex-what-is-the-difference-between-greedy-and-reluctant)有一个很好的答案。

另一种选择是指定允许出现在两个大括号之间的字符，如下所示：

```
{![^}]*}? 
```

这指定在您的模式中不能有一个右花括号匹配。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-15T14:57:13.303

你可以这样做：

```
({![^}]+}?) 
```

![正则表达式图片](../Images/c97f5bc96d41295827a7ababbc4ccdd1.png)

[在 Debuggex 上实时编辑](http://www.debuggex.com/r/c56nIGOC4Wz56dsx)

然后恢复`$1`对应于第一组括号的捕获组。

使用这种方式，您必须使用“匹配所有”类型的函数，因为正则表达式本身是为了匹配单个组函数

这种方式不使用任何环顾四周。此外，使用`^}`应该限制正则表达式引擎循环的数量，因为它正在搜索下一个`}`作为断路器，而不是必须执行整个表达式然后回溯。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-15T14:55:51.250

如果你的工具/语言支持 perl 正则表达式，试试这个：

```
(?<={!)[^}]* 
```

# jquery - JQuery 卡在 CORS 预检和 IIS 鬼响应

> ID：14897247
> 
> 赞同：33
> 
> 时间：2013-02-15T14:51:03.300
> 
> 标签：jquery, http, asp.net-web-api, cors

**我被困住了。** *说真的...* -***解决了。继续阅读:)***

**场景**：我正在尝试在这里做正确的事情。我依靠 Thinktecture Identitymodel CORS DelegatingHandler 将 CORS 功能添加到了我的 REST 服务 (ASP.NET Web-API)。到目前为止，一切都很好。

**为了实际测试它是否有效，我做了以下操作：**

1.  我设置了一个简单的 HTML 页面并将其发布在与其他服务不同的主机上（*xttp://otherhost/simplewebpage*）。该页面使用 JQuery 发出示例请求。代码见下文。
2.  接下来，我将我的 rest 服务设置为不使用 iis express，而是使用它在我的开发机器上运行的完全成熟的实例（*xttp://developmenthost/restservice*）。
3.  最后但同样重要的是，在我的开发机器上，我打开 xttp://otherhost/simplewebpage 并触发 Ajax 请求。执行错误回调，告诉我 Chrome 中存在“传输错误”（IE9）或“”（空字符串）。我确保没有与代理相关的连接问题或类似问题。

所以我开始查看 Fiddler 跟踪和 IIS 日志。Fiddler 说没有 GET /rest/hello 请求，而是一个 OPTIONS /rest/hello 请求——这完全没问题，也是意料之中的！然而，对 OPTIONS 请求的响应相当有趣！

***整个响应标头如下所示：***

```
HTTP/1.1 200 OK
Allow: OPTIONS, TRACE, GET, HEAD, POST
Server: Microsoft-IIS/7.5
Public: OPTIONS, TRACE, GET, HEAD, POST
Date: Fri, 15 Feb 2013 14:09:27 GMT
Content-Length: 0 
```

当然，这与预期的反应相去甚远。**有趣的是，在我的应用程序中，请求甚至没有命中 Application_BeginRequest()。**所以我的应用程序不可能对这个结果负责。我可以在我的 IIS 日志中看到该请求，并且 IIS 添加了 Powered-by-ASP.NET 标头。所以它肯定会通过（正确的）IIS 站点。

***触发ajax请求的jQuery代码：***

```
 function Run()
    {
        $.ajax({
            type: 'GET',
            url: url,
            dataType: "json",
            beforeSend: function(jqXhr) {
                jqXhr.setRequestHeader("Authorization", "Basic " + getBasicHttpEncodedString(userName, password));
                jqXhr.setRequestHeader("Api-Key", "123");
            },
            success: successCallback,
            error: errorCallback,
            timeout: 180*1000
        });
    } 
```

***生成的 OPTIONS 请求如下所示：***

```
OPTIONS http://services.dev13/Rest/Hello HTTP/1.1
Host: developmenthost
Connection: keep-alive
Access-Control-Request-Method: GET
Origin: http://otherhost/simplewebpage
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.17 (KHTML, like Gecko) Chrome/24.0.1312.57 Safari/537.17
Access-Control-Request-Headers: accept, origin, api-key, authorization
Accept: */*
DNT: 1
Referer: http://otherhost/simplewebpage
Accept-Encoding: gzip,deflate,sdch
Accept-Language: en-US,en;q=0.8
Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.3 
```

...您已经看到了对上述内容的回应。

知道谁确切回答了我的 OPTIONS 请求吗？还是我的 JQuery 代码有缺陷？如果我使用例如 Postman（Google Chrome 应用程序）或者我在 Fiddler 中伪造请求（这可能是因为他们不进行 CORS 协商 - 没有 OPTIONS 请求），REST 服务就可以正常工作。

***更新 #1：***今天早些时候，我在某处读到禁用 WebDAV 是强制性的，因为它会干扰 OPTIONS 请求。我的 IIS 角色服务视图告诉我 WebDAV Publishing is *Not installed*。

*** 更新 #2：***问题解决了？？我挖得更深了。在 IIS 中注册了一个模块，该模块负责对 OPTIONS 请求的“不想要的（？）”响应。它的名字是“OPTIONSVerbHandler”（处理程序：ProtocolSupportModule）。如果我禁用该模块，请求将传递到我的应用程序。创建了一个更有意义的响应，然后*是实际的 GET 请求！* ***耶！***

```
HTTP/1.1 200 OK
Cache-Control: no-cache
Pragma: no-cache
Expires: -1
Server: Microsoft-IIS/7.5
Access-Control-Allow-Origin: http://otherhost/simplewebpage
Access-Control-Allow-Credentials: true
Access-Control-Allow-Headers: accept,origin,api-key,authorization
X-AspNet-Version: 4.0.30319
Date: Fri, 15 Feb 2013 15:09:25 GMT
Content-Length: 0 
```

***一旦您知道问题出在哪里，您当然会发现大量资源告诉您确保您的 web.config 看起来像这样：-/***

```
<system.webServer>
    <validation validateIntegratedModeConfiguration="false" />
    <modules runAllManagedModulesForAllRequests="false">
      <remove name="WebDAVModule" />
    </modules>
    <handlers>
      <remove name="OPTIONSVerbHandler" />
      <remove name="ExtensionlessUrlHandler-ISAPI-4.0_32bit" />
      <remove name="ExtensionlessUrlHandler-ISAPI-4.0_64bit" />
      <remove name="ExtensionlessUrlHandler-Integrated-4.0" />
      <add name="ExtensionlessUrlHandler-ISAPI-4.0_32bit" path="*." verb="GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS" modules="IsapiModule" scriptProcessor="%windir%\Microsoft.NET\Framework\v4.0.30319\aspnet_isapi.dll" preCondition="classicMode,runtimeVersionv4.0,bitness32" responseBufferLimit="0" />
      <add name="ExtensionlessUrlHandler-ISAPI-4.0_64bit" path="*." verb="GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS" modules="IsapiModule" scriptProcessor="%windir%\Microsoft.NET\Framework64\v4.0.30319\aspnet_isapi.dll" preCondition="classicMode,runtimeVersionv4.0,bitness64" responseBufferLimit="0" />
      <add name="ExtensionlessUrlHandler-Integrated-4.0" path="*." verb="GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS" type="System.Web.Handlers.TransferRequestHandler" preCondition="integratedMode,runtimeVersionv4.0" />
    </handlers>
  </system.webServer> 
```

但它在 IE9 中仍然不起作用（“错误：无传输”）。万一有人和我走同样的路->这是IE9的事情：[https ://stackoverflow.com/a/10232313/1407618](https://stackoverflow.com/a/10232313/1407618)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2019-06-10T07:37:43.387

> 创建 PreflightRequestsHandler 类，您可以在其中允许请求标头 (1) 并在您的类 (2) 之前启用 cors。

```
1\. public class PreflightRequestsHandler : DelegatingHandler
    {
        protected override Task<HttpResponseMessage> SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
        {
            if (request.Headers.Contains("Origin") && request.Method.Method.Equals("OPTIONS"))
            {
                var response = new HttpResponseMessage { StatusCode = HttpStatusCode.OK };
                // Define and add values to variables: origins, headers, methods (can be global)               
                response.Headers.Add("Access-Control-Allow-Origin", "*");
                response.Headers.Add("Access-Control-Allow-Headers", "content-type");
                response.Headers.Add("Access-Control-Allow-Methods", "*");
                var tsc = new TaskCompletionSource<HttpResponseMessage>();
                tsc.SetResult(response);
                return tsc.Task;
            }
            return base.SendAsync(request, cancellationToken);
        }

    }

2\. [EnableCors(origins: "*", headers: "*", methods: "*", exposedHeaders: "X-Custom-Header")] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-09T14:18:55.853

你的答案在这里： [https ://gist.github.com/mathieucarbou/1114981](https://gist.github.com/mathieucarbou/1114981)

基本上，IE 对 cors 有一些非常具体的警告和陷阱。我开始自己写一个，但后来我找到了 mathieucarbou 的解决方案，并认为他的解决方案更好。

这可能比您想要的解决方案要重一些，但是对于跨浏览器支持，我发现使用“自定义解决方案”尽可能地使用 IE 是可以接受的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-22T09:13:42.430

检查此[set-access-control-allow-origin-in-web-api](http://musthaan.wordpress.com/2014/12/09/set-access-control-allow-origin-in-web-api/)。这可能会对您有所帮助。

# php - 使用 Google PHP 客户端库的致命错误

> ID：14897248
> 
> 赞同：1
> 
> 时间：2013-02-15T14:51:18.317
> 
> 标签：php, google-api, google-analytics-api

我正在使用[Google 的 PHP 客户端库](https://code.google.com/p/google-api-php-client/)来访问[分析 API](https://developers.google.com/analytics/devguides/platform/features/cost-data-import)，但我一直收到错误**Call to a member function on a non-object**。我被难住了一天多。我已经阅读了[几个解决方案](https://stackoverflow.com/search?q=Call+to+a+member+function+on+a+non-object)，但我没有看到如何解决这个问题。

```
require_once "google-api-php-client/src/Google_Client.php";
require_once "google-api-php-client/src/contrib/Google_AnalyticsService.php";
session_start();

$client = new Google_Client();
$client->setApplicationName("app-name");
$client->setClientId('client-id');
$client->setClientSecret('my-secret');
$client->setRedirectUri('http://www.website.com/');
$client->setDeveloperKey('secret-key');

$analyticsService = new Google_AnalyticsService($client);
$dailyUploads = $analyticsService->dailyUploads; 
```

这是（我*认为*）[谷歌推荐](https://code.google.com/p/google-api-php-client/source/browse/trunk/src/contrib/Google_AnalyticsService.php#31)的设置方式，但是当我打印出 $dailyUploads 的内容时，它的内容为空/null。如果我打印出 $analyticsService，我会看到 Google_AnalyticsService 的代码。

稍后在我的代码中，经过身份验证后，我尝试像这样使用上传功能：

```
$upload = $dailyUploads->upload($media); 
```

这会产生我之前提到的错误，致命错误：在非对象上调用成员函数 upload()。

任何人都可以帮忙吗？我在看什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T21:22:20.047

我现在已经解决了这个问题。有两个问题：

1.  Google_AnalyticsService.php 文件自最近的稳定版本以来已更新，因此我链接到的代码实际上并未加载到我的项目中。我通过更新我的库以包含[他们网站](https://code.google.com/p/google-api-php-client/source/browse/trunk/src/contrib/Google_AnalyticsService.php#31)上显示的代码解决了这个问题。

2.  引用该类的正确方法是“management_dailyUploads”。我这样更新了我的代码。

    $analyticsService = 新的 Google_AnalyticsService($client);
    $dailyUploads = $analyticsService->management_dailyUploads;

    $upload = $dailyUploads->upload('123456', 'UA-123456-1', 'xXxXxXxX', 2013-02-15, 1, 'cost', array("reset" => true, "data" = > file_get_contents('/path/to/file.csv'), "mimeType" => 'application/octet-stream', "uploadType" => 'media'));

一旦我实施了这些更新，我的应用程序就开始与 Google 的服务器通信。我现在有一个不同的问题要解决（我们不是总是这样吗？），但是提示这个线程的问题已经解决了，所以我会把它标记为已回答。

ps - 我不知道为什么这里的代码格式不正确。

# php - 如何使用php测试xml中的空/空值

> ID：14897250
> 
> 赞同：0
> 
> 时间：2013-02-15T14:51:20.797
> 
> 标签：php, xml, if-statement, null

我有一个网络服务，在更新数据库之前我可以从中检索信息。

我必须在插入它们之前搜索一些值，如果我找到它们，显然我不会插入它们，xml 应该是这样的：

```
<?xml version="1.0" encoding="UTF-8"?>
<prestashop xmlns:xlink="http://www.w3.org/1999/xlink">
    <categories>
    <category id="10" xlink:href="http://www.server.it/B2B/api/categories/10"/>
    </categories> 
```

如果已满，否则：

```
<?xml version="1.0" encoding="UTF-8"?>
<prestashop xmlns:xlink="http://www.w3.org/1999/xlink">
<categories>
</categories>
</prestashop> 
```

检索我制作的xml后：

```
$resources = $xml->children()->children();

if ($resources->category[@id] == ""){
insert category
} 
```

现在，所有这些代码都运行良好，但我必须承认这`==""`有点糟糕，我是否以正确的方式测试它？还是更好的其他类型的测试？喜欢`isset`，`null`还是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T14:55:25.650

我不确定如果类别为空，您为什么要尝试插入类别，但我认为这就是您的意思：

```
if(isset($resources->category[@id]) && !empty($resources->category[@id])){

    //insert category

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T15:25:04.737

如果你想测试元素中是否有*任何子* 元素，你可以测试一下：`category``categories`

```
$category = $xml->categories->category; 
```

`category`然后可以通过以下`count()`函数检索这些子元素的数量：

```
if ($category->count()) {
    echo "ID: ", $category['id'];
} 
```

或者，您可以显式查找第一个元素：

```
$category = $xml->categories->category[0] 
```

如果不存在，则该`$category`变量将为，否则为 XML 元素：`NULL`

```
if ($category = $xml->categories->category[0]) {
    // insert $category
} 
```

希望这会有所帮助。

# mysql - 需要 MySQL 查询以从数据库中获取备用记录

> ID：14897258
> 
> 赞同：0
> 
> 时间：2013-02-15T14:51:49.040
> 
> 标签：mysql

我有两张桌子**A**和**B**。我的查询是-

```
Select A.item, B.description, B.brand from A inner Join B on A.id=B.a_id where B.brand_id=1 limit 0,3
UNION
Select A.item, B.description, B.brand from A inner Join B on A.id=B.a_id where B.brand_id=2 limit 0,3
UNION
Select A.item, B.description, B.brand from A inner Join B on A.id=B.a_id where B.brand_id=3 limit 0,3 
```

输出类似于-

```
item    description    brand
1001    item1          brand1
1002    item2          brand1
1003    item3          brand1
1004    item4          brand2
1005    item5          brand2
1006    item6          brand2
1007    item7          brand3
1008    item8          brand3
1009    item9          brand3 
```

现在我的要求是获取记录为-

```
item    description    brand
1001    item1          brand1
1004    item4          brand2
1007    item7          brand3
1002    item2          brand1
1005    item5          brand2
1008    item8          brand3
1003    item3          brand1
1006    item6          brand2
1009    item9          brand3 
```

任何建议:(

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T16:34:06.663

[如果您想要一个纯 SQL 答案，那么 Oracle 的RANK OVER PARTITION](http://www.oracle-base.com/articles/misc/rank-dense-rank-first-last-analytic-functions.php#rank)的以下 MySQL 解决方法加上内联视图和一些排序应该可以工作，无论您拥有多少品牌：

```
select item,description,brand
from
(select A.item, B.description, B.brand,
case B.brand
        when @curBrand 
        then @curRow := @curRow + 1 
        else @curRow := 1 and @curBrand := B.brand END
      as rank
from A inner join B on A.id=B.a_id
join (select @curRow := 0, @curBrand := '') r
) t
order by t.rank,t.brand; 
```

享受！

# php - 在 Smarty 中至少运行一次循环

> ID：14897261
> 
> 赞同：1
> 
> 时间：2013-02-15T14:51:49.837
> 
> 标签：php, loops, smarty, do-while

如何在 Smarty 中至少运行一次循环？

如果我使用`for`and `to`is`0`我的循环将永远不会运行！

我有一个表单，我想至少显示一次，但如果`fieldCounter`值大于 1，则循环应该运行直到`fieldCounter`值。

```
{for $start=1 to $fieldCounter}
<input type="text" name="price{$start}" value="" />
{/for} 
```

`do {} while();`Smarty里面有吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T14:56:27.123

你可以使用`max()`：

```
{assign var=_to value=max($fieldCounter,1)}
{for $start=1 to $_to}
<input type="text" name="price{$start}" value="" />
{/for} 
```

现在`$_to`至少永远是`1`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T15:01:45.863

你也可以试试 smartys {forelse}。

```
{for $start=1 to $fieldCounter}
  <input type="text" name="price{$start}" value="" />
{forelse}
  <input type="text" name="price1" value="" />
{/for} 
```

[http://www.smarty.net/docs/en/language.function.for.tpl](http://www.smarty.net/docs/en/language.function.for.tpl)

# mysql - 过滤 MYSQL 价格 - 'IF' 出现错误

> ID：14897263
> 
> 赞同：0
> 
> 时间：2013-02-15T14:51:51.767
> 
> 标签：mysql, if-statement

我在数据库中有 2 类型变量：文本和小数（20,2）（我正在编写一个 Web 应用程序，我将仅限于文本和数字这两种类型的数据，以方便操作员进行基础）。在数字数据类型中，有时我有所有列，其中只有整数部分，当我得到数据时，我有'32324244.00'。我想删除这个'.00'。

我编写了检查列中的条目是否 > '.00' 的代码

```
SELECT IF(COUNT(`code`)>0,1,0) 
FROM `table_1` 
WHERE  substring_index(`code`,'.',-1) >=1 
AND  substring_index(`code`,'.',-1) <= 99 
```

什么时候有记录，代码返回“1”，如果没有，返回“0”；

我想开发此代码并将数字转换为在 MySQL 中立即执行。那么如何一个'1'来显示正常的个数，就像'0'来做'substring_index( `code`,'.', 1)'

我有代码：

```
SELECT IF(
 (SELECT IF(COUNT(`kod`)>0,1,0) FROM `table_1` 
  WHERE  substring_index(`kod`,'.',-1) >=1 
  AND substring_index(`kod`,'.',-1) <= 99)='1',`kod`,substring_index(`kod`,'.',1)
) WHERE `table_1` 
```

此代码不起作用，PhpMyAdmin 返回错误：

> `#1064`- 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以`table_1` 在第 1 行的“WHERE LIMIT 0, 30”附近使用正确的语法

问题出在哪里？

对不起我的英语不好 ：-）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T14:57:55.957

问题是，您没有制定`WHERE`子句，也没有像这样从表中选择：

```
WHERE column = something 
```

试试这个：

```
select count(kod) 
from
( 
   SELECT IF(COUNT(`kod`) > 0, 1, 0) 
   FROM `table_1` 
   WHERE substring_index(`kod`, '.', -1) >= 1  
     AND substring_index(`kod`, '.', -1) <= 99) = '1', 
         `kod`, 
         substring_index(`kod`, '.', 1)
) t  . 
```

如果你有 where 子句的东西，你可以在最后添加它；`WHERE table_1 = ....` 或类似的东西。

* * *

**编辑：**

```
SELECT IF((SELECT COUNT('kod') 
           FROM `table_1` 
           WHERE substring_index('kod', '.', -1) >= 1 
             AND substring_index('kod', '.', -1) <= 99 
             AND COUNT('kod')
         ) > '0', 
         'kod', 
         substring_index('kod', '.', 1)) as myvalue 
from `table_1` 
```

* * *

**编辑2：**

试试这个：

```
SELECT IF((SELECT COUNT(kod) 
           FROM `table_1` 
           WHERE substring_index(kod,'.',-1) >=1 
             AND substring_index(`kod`,'.',-1) <= 99 
           having COUNT(kod) > '0'),
          `kod`,
          substring_index(`kod`,'.',1)
         ) as myvalue 
from `table_1` 
```

[**看演示 SQLFIDDLE**](http://sqlfiddle.com/#!2/14240/12)

**旁注：**确保您有名为`kod`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T16:17:05.687

```
'name' 'price' 'currency' 'code (kod)'    
'WYCIERACZKI płaskie QAP PASSAT B5 FL 2001-2005' '35.00' 'PLN' '36977143.00'
'WYCIERACZKA EKOLOGICZNA 45x75 cm GUMA WYCIERACZKI' '75.00' 'PLN' '27429666.00'
'BOSCH opel WYCIERACZKI Vectra C Omega Signum RAV4' '66.99' 'PLN' '79166309.00'
'NAJLEPSZE Wycieraczki AERO PREMIUM 530 mm 35-71 cm' '10.90' 'PLN' 41394344.00'
'PŁASKIE WYCIERACZKI VW SHARAN GALAXY + TYŁ 3 szt.' '49.00' 'PLN' '53684409.00'
'SERWISOWE WYCIERACZKI PEUGEOT 307 od 10.2004' '38.99' 'PLN' '12379457.00'
'PŁASKIE WYCIERACZKI VALEO _______ HONDA CIVIC' '63.00 'PLN' 54651109.00' 
```

好的，第二列和第四列是十进制（20,2）。第四列只是我想显示的“整数”：

```
'WYCIERACZKI płaskie QAP PASSAT B5 FL 2001-2005' '35.00' 'PLN' '36977143'
'WYCIERACZKA EKOLOGICZNA 45x75 cm GUMA WYCIERACZKI' '75.00' 'PLN' '27429666'
'BOSCH opel WYCIERACZKI Vectra C Omega Signum RAV4' '66.99' 'PLN' '79166309'
'NAJLEPSZE Wycieraczki AERO PREMIUM 530 mm 35-71 cm' '10.90' 'PLN' 41394344'
'PŁASKIE WYCIERACZKI VW SHARAN GALAXY + TYŁ 3 szt.' '49.00' 'PLN' '53684409'
'SERWISOWE WYCIERACZKI PEUGEOT 307 od 10.2004' '38.99' 'PLN' '12379457'
'PŁASKIE WYCIERACZKI VALEO _______ HONDA CIVIC' '63.00 'PLN' 54651109' 
```

因为价格有小数，我想显示这个正常

# opencv - 亚像素操作如何工作？

> ID：14897265
> 
> 赞同：0
> 
> 时间：2013-02-15T14:52:02.093
> 
> 标签：opencv

计算机视觉程序中使用的亚像素操作背后的理论（简化）是什么？我正在使用 OpenCV 来检测图案上的点，并且有一种方法可以将检测细化到亚像素精度。这怎么可能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T19:12:51.047

当您考虑将光线从场景投射到相机传感器时，相机传感器中的离散元素会产生混叠效果。假设您有一系列具有值的相邻像素

| 10 | 15 | 17 | 22 | 68 | 95 | 121 |

并且您想要更准确地估计投影到第 4 和第 5 个像素之间的 2D 点的 3D 点的强度估计，仅假设从该点反射的光的强度将是 22或 68（例如通过选择最近的邻居），更好的近似值是假设这些值之间的某种平滑过渡发生在表面上，并尝试从那里进行估计。一个简单的猜测是使用[线性插值](http://en.wikipedia.org/wiki/Linear_interpolation)，因为这在计算上非常便宜，但是可以找到更复杂的示例。

# jquery - 创建一个随机日期和值的数组

> ID：14897271
> 
> 赞同：1
> 
> 时间：2013-02-15T14:52:21.970
> 
> 标签：jquery, date, random

我正在尝试创建一个如下所示的数组：

```
([
    [Date.UTC(2003,8,24),8709],
    [Date.UTC(2006,8,25),872],
    [Date.UTC(2002,8,26),8714],
    [Date.UTC(2009,8,29),8638],
    [Date.UTC(2000,8,30),8567]
]); 
```

* * *

我可以创建一个随机日期，但我不知道如何将它添加到该特定格式的数组中。这是一些代码和一个[**Fiddle**](http://jsfiddle.net/nSRBC/1)。

```
function randomDate(start, end) {
    return new Date(start.getTime() + Math.random() * (end.getTime() - start.getTime()))
}

$(function() {
    for(var i = 0; i < 1000; i++) {
        var date = randomDate(new Date(2004, 0, 9), new Date());

        // instead of printing to a div, it'd save to an array
        $('#dates').append(date); 
    }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T15:06:02.533

```
$(function() {
    var arr = [];
    for(var i = 0; i < 1000; i++) {
        var date = randomDate(new Date(2004, 0, 9), new Date());
        var randNum = Math.round(Math.random()*10000);
        arr.push([date, randNum]);
    }
}); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-15T14:59:20.917

JavaScript 不能保存到本地文件，最好的办法是强制输出到另一个窗口并让用户在本地保存。

window.open("data:text/json;charset=utf-8," + "你的日期列表"));

# mime-types - 二维码 MIME 类型

> ID：14897272
> 
> 赞同：3
> 
> 时间：2013-02-15T14:52:28.383
> 
> 标签：mime-types, qr-code

除了通用（假设 png 是格式）之外，是否有*专门*用于 QR 码图像的公认 MIME 类型？`image/png`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T14:58:45.883

不，QR 码与条形码一样，不是一种文件类型。MIME 类型应该是包含 QR 码的文件的类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-16T06:53:06.920

二维码只是代码，而不是文件格式。

您可以将其保存为 bmp、jpeg、gif，它仍然可以使用。

但是 png 最适合 qr 代码，因为它的压缩方式，加上它的无损，因此它可以缩放而不会模糊。

这就是为什么。jpg 是一种有损格式，这意味着您通过压缩会降低质量。它适用于全彩色照片。bmp 是有损的，但也适用于照片，它可以是无损的，但文件很大。png 是无损的，压缩完成类似于 zip 存档。它适用于简单的图像，但可以处理复杂的图像。它不适用于照片。并与 qr 码完美配合。可以通过从颜色索引中删除颜色来压缩 PNG。

[首先，我使用此问题的QR 码 MIME 类型](https://stackoverflow.com/questions/14897272/qr-code-mime-type)的 URl 创建了一个带有 zint 的条形码

接下来，我在 gimp 中打开它并将其保存为 bmp，bmp 的文件大小为 129 KB，我将所有选项默认保留在 gimp 中。质量为 100% 的 JPG 文件大小为 21.4 KB 质量为 75% 的 jpg 文件大小为 12.3 KB 质量为 50% 的 jpg 文件大小为 9.90 KB 质量为 20% 的 jpg 文件大小为7.79 KB 默认设置的 GIF大小 为[2.43](http://luci.criosweb.ro/riot/) KB最大压缩

这是BMP
[![图片](../Images/e1005db4bc3a100ce2296b7bf0788865.png)](https://i.stack.imgur.com/8zXIn.png)

这是 JPG @ 25%
[![图片](../Images/d2db7d95d3678c8c9dbd2fb2111854a6.png)](https://i.stack.imgur.com/I97VU.jpg)

这是gif
[![图片](../Images/c67dab4ebcc8e57506ef7e8a03be5662.png)](https://i.stack.imgur.com/Z2i2e.gif)

这是默认设置下的PNG
[![图片](../Images/2eeb6fc671b6c6a6eb218770e63d2019.png)](https://i.stack.imgur.com/JFhBP.png)

这是优化的PNG
[![图片](../Images/8ef4f31e607ca57b7bb7905e04a44ebb.png)](https://i.stack.imgur.com/F0mce.png)

扫描其中任何一个，它们都会起作用（由于引入的噪音，压缩程度更高的 jpg 可能不起作用）

# php - 如何从jquery方法将id传递给服务器端

> ID：14897276
> 
> 赞同：0
> 
> 时间：2013-02-15T14:52:52.653
> 
> 标签：php, javascript, jquery, mysql

我尝试过但失败的代码。哪里少了点什么……

```
$(".delete").click(function() 
{
    var db_id = $(this).attr("db_id");
    alert(db_id);
    $.post("ajax_inspection.php", {type: qrystrdelete,id: id},
    function(data)
    {
        // callback function gets executed
        $('#db_id').html(data);
        alert("Return data" + data);
    }); 
```

ajax.inspection.php 包含：

```
<?php
include_once("inspection_query_fun.php");
if($_REQUEST['type'] == 'qrystrdelete')
$var_result = deleteslab($_REQUEST['id']); 
?> 
```

Inspection_query_fun.php 包含 del

```
<php
function deleteslab($PAR_Id)
{
    $sql = "DELETE FROM ".CONTROL_REPORT_DETAILS." WHERE sb_slab_id=".db_escape($PAR_Id);
    db_query($sql);
}
?> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-15T14:54:00.223

改变

```
$.post("ajax_inspection.php", {type: qrystrdelete,id: id} 
```

对此：

```
$.post("ajax_inspection.php", {type: "qrystrdelete",id: db_id} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T15:02:37.860

可能您需要在以下几行中进行一些编辑：

```
 var db_id = $(this).attr("db_id");
       alert(db_id);
       $.post("ajax_inspection.php", {type: qrystrdelete,id: id}, 
```

将其替换为以下内容：

```
 var id = $(this).attr("id");
       $.post("ajax_inspection.php", {type: "qrystrdelete",id: id}, 
```

希望这会奏效。

# documentation - ASCII 文本文档的样式指南

> ID：14897277
> 
> 赞同：0
> 
> 时间：2013-02-15T14:53:02.373
> 
> 标签：documentation, formatting, styles

什么是仅使用 ASCII 文本格式化文档、大纲和程序描述的好的样式指南？

我正在考虑使用大写、“下划线”（下一行带有“-”或“=”）、缩进等的一组规则，以帮助在视觉上将文本组织成部分、小节等。

vi 支持的指南会特别好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T14:55:14.787

考虑使用[Markdown](http://daringfireball.net/projects/markdown/syntax)或[MultiMarkdown](http://fletcherpenney.net/multimarkdown/)来格式化纯文本文档。有一个[vim Markdown 语法插件](https://github.com/plasticboy/vim-markdown/)可用，它在 Stack Overflow 和 GitHub 上被广泛使用：

[https://stackoverflow.com/editing-help](https://stackoverflow.com/editing-help)

[https://help.github.com/articles/github-flavored-markdown](https://help.github.com/articles/github-flavored-markdown)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T18:10:59.120

除了 Markdown 和[reStructuredText](http://docutils.sourceforge.net/rst.html)之外，还有[**AsciiDoc**](http://www.methods.co.nz/asciidoc/index.html)，它比 Markdown 更强大：有 f.ex。定义如何[用](https://code.google.com/p/asciidoc-diag-filter/)ASCII 文本[编写](http://code.google.com/p/asciidoc-aafigure-filter/) [图表的插件。](http://ditaa.sourceforge.net/)

AsciiDoc 不如 Markdown 受欢迎，但在[Github 现在也支持 AsciiDoc](http://asciidoctor.org/news/asciidoctor-announcement.html)之后，它会变得更受欢迎。

所有这三种文本格式也都有 vim 插件。

# python - Python 消除函数内带有“del LargeItem”或“LargeItem=None”的大项目

> ID：14897285
> 
> 赞同：0
> 
> 时间：2013-02-15T14:53:21.313
> 
> 标签：python, performance, optimization, memory-management

我希望在***函数中删除 Python 中的***一个大项目。一些论坛建议使用**del LargeObject**和其他**LargeObject= None**。在性能方面（速度和删除项目后回收内存）哪个是最好的解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T14:55:31.177

关于回收内存，没有区别；假设在这两种情况下对象的引用计数都下降到 0，内存将以完全相同的方式被回收。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T14:55:31.733

这两个语句之间的区别在于将从本地名称空间`del`中删除（如果您尝试使用它，则会`LargeObject`导致 a ）。`NameError`另一个将 a 保留`LargeObject`在当前命名空间中，但它的值将是`None`-- 很可能导致 a`ValueError`或者`TypeError`如果您尝试使用它。否则，我真的看不出这两种方法有多大区别。不管怎样，如果你想恢复你的记忆，你需要确保你没有其他关于`LargeObject`坐着的参考。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-15T14:56:28.177

我希望`del LargeObject`通话速度更快。它只编译成一条指令：

```
>>> import dis
>>> def fdel(foo):
...     del foo
... 
>>> def freassign(foo):
...     foo = None
... 
>>> dis.dis(fdel)
  2           0 DELETE_FAST              0 (foo)
              3 LOAD_CONST               0 (None)
              6 RETURN_VALUE        
>>> dis.dis(freassign)
  2           0 LOAD_CONST               0 (None)
              3 STORE_FAST               0 (foo)
              6 LOAD_CONST               0 (None)
              9 RETURN_VALUE 
```

在这两种情况下，大对象的引用计数都会降低 1，如果达到 0，它将从内存中删除。

速度差异绝对是最小的：

```
>>> import timeit
>>> timeit.timeit('f("")', 'from __main__ import fdel as f')
0.16321110725402832
>>> timeit.timeit('f("")', 'from __main__ import freassign as f')
0.1656031608581543 
```

这不是您需要担心的事情。

# apache-camel - 骆驼验证器返回整个消息

> ID：14897292
> 
> 赞同：2
> 
> 时间：2013-02-15T14:53:45.323
> 
> 标签：apache-camel

我有路线，

```
<from uri="a">
<to uri="validator:schema.xsd">
<to uri="b"> 
```

假设正在验证的 XML 文件缺少两个元素，验证器似乎会在找到第一个缺少的元素并返回一条消息说它丢失时停止。

是否可以继续验证 XML 文件以查找任何其他丢失的元素并将其返回到错误消息中，以便发件人不必继续发送以找出哪些元素丢失或无效？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-12-02T13:09:48.263

如果验证失败，验证[器组件](http://camel.apache.org/validation.html)将抛出[SchemaValidationException 。](https://camel.apache.org/maven/camel-2.15.0/camel-core/apidocs/org/apache/camel/processor/validation/SchemaValidationException.html)此异常包含方法`getError()`返回`List<org.xml.sax.SAXParseException>`。您可以使用它来将消息转换为`List<org.xml.sax.SAXParseException>`onException 块。

以下代码捕获 SchemaValidationException，将 body 转换为`SchemaValidationException.getErrors()`并将异常标记为`continued`，以继续路由并在输出路由上返回此列表。

```
from("timer:simple?period=1000")
    .setBody(constant(XML_INVALID))
    .to("direct:a");

from("direct:a")
    .onException(SchemaValidationException.class)
        .to("direct:validationErrors")
        .continued(true)
        .end()
    .to("validator:test.xsd")
    .to("log:result");

from("direct:validationErrors")
    .setBody(simple("${property.CamelExceptionCaught.errors}"))
    .end(); 
```

* * *

注意：此示例已使用以下资源进行测试

XML_INVALID

```
<?xml version="1.0" encoding="utf-8"?>
<shiporder orderid="str1234">
  <orderperson>str1234</orderperson>
  <shipto>
    <name>str1234</name>
    <address>str1234</address>
  </shipto>
  <item>
    <quantity>745</quantity>
    <price>123.45</price>
  </item>
</shiporder> 
```

从[w3schools.com复制的 test.xsd](https://www.w3schools.com/xml/schema_example.asp)

```
<?xml version="1.0" encoding="UTF-8" ?>
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema">

<!-- definition of simple elements -->
<xs:element name="orderperson" type="xs:string"/>
<xs:element name="name" type="xs:string"/>
<xs:element name="address" type="xs:string"/>
<xs:element name="city" type="xs:string"/>
<xs:element name="country" type="xs:string"/>
<xs:element name="title" type="xs:string"/>
<xs:element name="note" type="xs:string"/>
<xs:element name="quantity" type="xs:positiveInteger"/>
<xs:element name="price" type="xs:decimal"/>

<!-- definition of attributes -->
<xs:attribute name="orderid" type="xs:string"/>

<!-- definition of complex elements -->
<xs:element name="shipto">
    <xs:complexType>
        <xs:sequence>
            <xs:element ref="name"/>
            <xs:element ref="address"/>
            <xs:element ref="city"/>
            <xs:element ref="country"/>
        </xs:sequence>
    </xs:complexType>
</xs:element>

<xs:element name="item">
    <xs:complexType>
        <xs:sequence>
            <xs:element ref="title"/>
            <xs:element ref="note" minOccurs="0"/>
            <xs:element ref="quantity"/>
            <xs:element ref="price"/>
        </xs:sequence>
    </xs:complexType>
</xs:element>

<xs:element name="shiporder">
    <xs:complexType>
        <xs:sequence>
            <xs:element ref="orderperson"/>
            <xs:element ref="shipto"/>
            <xs:element ref="item" maxOccurs="unbounded"/>
        </xs:sequence>
        <xs:attribute ref="orderid" use="required"/>
    </xs:complexType>
</xs:element>

</xs:schema> 
```

# java - 如何用 JSON 表示来自数据库的图像

> ID：14897297
> 
> 赞同：4
> 
> 时间：2013-02-15T14:54:01.917
> 
> 标签：java, json, url, jdbc, blob

我需要基于数据库中的 blob 创建 JSON。为了获取 blob 图像，我使用下面的代码和在 json 数组中显示之后：

```
Statement s = connection.createStatement();
ResultSet r = s.executeQuery("select image from images");
while (r.next()) {
    JSONObject obj = new JSONObject();
    obj.put("img", r.getBlob("image"));
} 
```

我想根据图像 blob 为每个图像返回一个 JSON 对象。我怎样才能实现它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-15T15:08:33.243

JSON 中的二进制数据通常最好以[Base64](http://en.wikipedia.org/wiki/Base64)编码的形式表示。您可以使用标准 Java SE 提供的[`DatatypeConverter#printBase64Binary()`](http://docs.oracle.com/javaee/6/api/javax/xml/bind/DatatypeConverter.html)方法对字节数组进行 Base64 编码。

```
byte[] imageBytes = resultSet.getBytes("image");
String imageBase64 = DatatypeConverter.printBase64Binary(imageBytes);
obj.put("img", imageBase64); 
```

另一方只是对它进行 Base64 解码。例如，在 Android 中，您可以为此使用内置[`android.util.Base64`](http://developer.android.com/reference/android/util/Base64.html)API。

```
byte[] imageBytes = Base64.decode(imageBase64, Base64.DEFAULT); 
```

# c# - 如何在 WPF 和 C# .net 3.5 中绘制实时信号？

> ID：14897299
> 
> 赞同：-2
> 
> 时间：2013-02-15T14:54:09.393
> 
> 标签：c#, wpf, plot, dynamic-data-display, real-time-data

我正在尝试使用 WPF 和 C#（动态数据显示）绘制实时信号、信号与时间的关系；一旦产生信号，它应该立即显示在图表上；可以非常快地生成信号（大约为毫秒（0.001 秒））；最好的方法是什么？任何建议表示赞赏。谢谢。

编辑：示例代码将不胜感激。

这是我尝试过的：

剧情启动：

```
#region Constructor
public SignalStatsDisplay()
{
    InitializeComponent();

    plotter.Legend.Remove();

    _initialChildrenCount = plotter.Children.Count;

    int count = plotter.Children.Count;

    //do not remove the initial children
    if (count > _initialChildrenCount)
    {
        for (int i = count - 1; i >= _initialChildrenCount; i--)
        {
            plotter.Children.RemoveAt(i);
        }
    }

    _nColorChannels = 4;

    _lineprofileColor = new Color[4];

    _lineprofileColor[0] = Colors.Transparent;
    _lineprofileColor[1] = Colors.Red;
    _lineprofileColor[2] = Colors.Black;
    _lineprofileColor[3] = Colors.Blue;

    //LineGraph lg = new LineGraph();
    LineAndMarker<MarkerPointsGraph> lg = new LineAndMarker<MarkerPointsGraph>();
    CirclePointMarker pm = new CirclePointMarker { Size = 10, Fill = Brushes.Green };

  //  MarkerPointsGraph mpg = new MarkerPointsGraph();

    if (_nColorChannels > 0)    // plotter init
    {
        _dataX = new List<int[]>();
        _dataY = new List<int[]>();

        int[] dataXOneCh = new int[1];
        int[] dataYOneCh = new int[1];

        dataXOneCh[0] = 0;
        dataYOneCh[0] = 0;

        /*CirclePointMarker marker = new CirclePointMarker();
        marker.Fill = new SolidColorBrush(_lineprofileColor[0]);
        marker.Pen = new Pen(marker.Fill, 0);

        marker.Size = 2;
        int lineWidth = 1;*/

        for (int i = 0; i < 4; i++)
        {
            _dataX.Add(dataXOneCh);    // data x-y mapping init
            _dataY.Add(dataYOneCh);

            EnumerableDataSource<int> xOneCh = new EnumerableDataSource<int>(dataXOneCh);
            EnumerableDataSource<int> yOneCh = new EnumerableDataSource<int>(dataYOneCh);

            xOneCh.SetXMapping(xVal => xVal);
            yOneCh.SetXMapping(yVal => yVal);

            CompositeDataSource dsOneCh = new CompositeDataSource(xOneCh, yOneCh);

           // LineProfileColorSetup();

            lg = plotter.AddLineGraph(dsOneCh,                    
                (new Pen(Brushes.Green, 2)),
                 pm,
                (new PenDescription("Data")));

           // lg = plotter.AddLineGraph(dsOneCh,
           //    Colors.Transparent,
           //    2,
           //    "Data");

          // pm.FilteringEnabled = false;

        }

        plotter.FitToView();
    }
    else
    {
        return;
    }
} 
```

数据更新：

```
 for (int i = 0; i < 1; i++)
                {
                    if (_dataX[i].Length == _dataY[i].Length)
                    {
                        EnumerableDataSource<int> xOneCh = new EnumerableDataSource<int>(_dataX[i]);
                        xOneCh.SetXMapping(xVal => xVal);
                        EnumerableDataSource<int> yOneCh = new EnumerableDataSource<int>(_dataY[i]);
                        yOneCh.SetYMapping(yVal => yVal);
                        CompositeDataSource ds = new CompositeDataSource(xOneCh, yOneCh);

                        Action UpdateData = delegate()
                        {
                           // ((LineGraph)plotter.Children.ElementAt(startIndex + i)).DataSource = ds;
                           // ((LineGraph)plotter.Children.ElementAt(startIndex + i)).LinePen = new Pen(new SolidColorBrush(Colors.Green), 1);
                           // ((PointsGraphBase)plotter.Children.ElementAt(startIndex + i)).DataSource = ds;
                            ((PointsGraphBase)plotter.Children.ElementAt(startIndex + i + 1)).DataSource = ds;

                            //  }
                           // (plotter.Children.ElementAt(startIndex + i)).DataSource = ds; 

                        };

                        this.Dispatcher.Invoke(System.Windows.Threading.DispatcherPriority.Normal, UpdateData);
                    }
                } 
```

我遇到的问题是当信号非常胖时，比如每毫秒生成一个新信号，似乎图表每 1 秒只生成一个新标记，我不明白。

The basic idea is to generate a plotter.AddLineGraph, then only update the DataSource. But it seems not working. So I thought maybe I am on the wrong direction.

I am not a C# or WPF expert. When LineAndMarker does not work as expected, I started doubting. So I am wondering what would be the general way for people to display real-time signal (rapidly changing, time span between samples could be on mili-second) using WPF and C#.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T16:24:21.030

I found where I did wrong. Here is the part where problem happens:

```
_pxlValAllChan[0, signalIndex] = pxlValue;
                                                DateTime currentTime = DateTime.Now; //has to come from real file: Tiff
                                                TimeSpan timeSpan = currentTime - _startTime;

                                                _timeStampAllChan[0, signalIndex] = Convert.ToInt16(timeSpan.TotalSeconds);

                                                _pxlValOneChan = new int[_signalLength]; // no need to new it every time
                                                _timeStampOneChan = new int[_signalLength];
                                                for (int i = 0; i <= signalIndex; i++)
                                                {
                                                    _pxlValOneChan[i] = _pxlValAllChan[0, i];
                                                    //_timeStampOneChan[i] = _timeStampAllChan[0, i];
                                                    _timeStampOneChan[i] = i;
                                                }

                                                _signalDisplay.SetData(_timeStampOneChan, _pxlValOneChan, 0, true); 
```

My x data was based on time. I basically consider the initiation of program as starting point, then I keep track of time elapse by subtracting starting time with current time. Then the time elapse is saved as x-axis data (see the line that is commented out). And this actually causes problem. When I simple change x-axis data as index, the problem is gone. The graph update pretty fast. Although I have not figure out how I should change the logic to still use time elapse as my x-axis data, but that is the culprit of slow updating on the graph.

# python - 将文件保存到 blobstore，现在出现 __BlobFileIndex__ 类型错误

> ID：14897301
> 
> 赞同：1
> 
> 时间：2013-02-15T14:54:14.930
> 
> 标签：python, google-app-engine

不知道我做错了什么，但`dev_appserver`我在一个 gae 应用程序中保存了一个 NDB `BlobKeyProperty`，现在如果我尝试从数据库中加载实体，我得到一个：

> KindError：找不到类型“__BlobFileIndex__”的模型类。你忘记导入了吗？

我可以在 /_ah/admin 中拉出实体，它看起来很好......关于发生了什么的任何建议？

我用来将字段保存到`BlobKeyProperty`

```
 blob = files.blobstore.create(
            _blobinfo_uploaded_filename=self.data.filename,
            mime_type=self.MIME_TYPE
        )
 with files.open(blob, 'a') as f:
     f.write(self.data.file.read())
     files.finalize(blob)
 key =  files.blobstore.get_blob_key(blob) 
```

需要帮助请叫我。

* * *

**编辑**：

我也刚刚注意到，如果我进入 /_ah/admin 看一些东西，然后回到应用程序，我会得到：

> KindError：找不到类型“_AhAdminXsrfToken_”的模型类。你忘记导入了吗？

所以显然出了问题（我注意到*AhAdminXsrfToken*是 a `db.Model`）不确定这是否有助于解释问题......

# c - 在C中将大十进制输入转换为256位数组中的十六进制输出

> ID：14897309
> 
> 赞同：0
> 
> 时间：2013-02-15T14:54:51.810
> 
> 标签：c, arrays

我编写了一个代码，用于将基于使用输入的大数转换为十六进制数。但是，当打印结果时，数字的唯一部分被转换为十六进制，并且数组中还有其他随机值。

例如：十进制 = 1234567891012 ---- 十六进制 = 00 00 00 02 00 00 00 65 00 6b 42 48 71 fb 08 44

最后四个值 ( `71 FB 08 44`) 是正确的十六进制值，但其他值不正确

我正在使用 uint8_t buf[];

代码：

```
int main()
{
  uint8_t buf[] = {0};

 long int i,a;

      printf("Enter Number: ");
      scanf("%d", &buf);

      printf("\n");
      printf("Input #: ");

      /* put a test vector */
      for (i = 15; i >= 0; i--)
         {
         printf("%02x ", buf[i]);
          }
           printf("\n\n");

          printf("\n\n");

      printf("%d\n",sizeof(buf));

    system("pause");
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T15:03:55.673

免责声明：由于您没有提供源代码，我将假设一些事情：

发生这种情况是因为您曾经`unsigned int`存储小数，它仅在您的计算机上是 32 位的。使用 a`unsigned long`存储那么大的小数。

`unsigned long decimal = 12345678901012L;`

对于 16 字节十进制，使用[GMP Lib](http://gmplib.org/)。

- - 编辑 - -

您必须使用`scanf("%lu", &decimal)`存储成长小数。scanf("%d", &decimal) 仅复制您机器上可能是 32 位的“integer(signed)”！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T15:12:45.190

发布代码后，问题变得更加明显：

首先这个：

```
uint8_t buf[] = {0}; 
```

是没有好处。您需要为数组分配大小（或使其成为动态），这就是为什么当您访问元素时会得到“垃圾”。现在，我们可以给它一个任意大小：

```
uint8_t buf[100] = {0}; 
```

这解决了“垃圾”值问题。

第二个问题是您的扫描是否期望正常`int`大小的值：`"%d"`您需要告诉它寻找更大的值，例如：

```
scanf("%llu", &buf[0]); 
```

[不过，您应该根据限制](http://www.cplusplus.com/reference/climits/)验证您的输入。确保用户输入的内容在 LONG_MAX 或 INT_MAX 或您拥有的任何类型的范围内。

# c++ - 将枚举传递给引用 int 的函数

> ID：14897311
> 
> 赞同：5
> 
> 时间：2013-02-15T14:54:59.173
> 
> 标签：c++, casting, enums

取消引用类型双关语

我有一个枚举

```
enum AgentStatus { kSTOPPED = 0, kRUNNING, kIDLE, kNAGENTSTATUS }; 
```

我需要将它传递给具有许多重载变体的外部库的函数。我想将它传递给第二个参数：

```
DimService::DimService(const char*, int&);
DimService::DimService(const char*, char*);
... 
```

如果我对枚举变量的 (int&) 进行强制转换，我会收到臭名昭著的警告：

```
warning: dereferencing type-punned pointer will break strict-aliasing rules 
```

如果我对 (int) 进行强制转换，我会得到这个

```
invalid conversion from ‘int’ to ‘char*’
error:   initializing argument 2 of ‘DimService::DimService(const char*, char*)’ 
```

正确的方法是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-15T14:58:06.920

当您在使用内联转换时遇到问题时，将其拆分为单独的行会很有帮助：

```
const AgentStatus enumValue = kRUNNING;
...
int intValue = static_cast<int>(enumValue);
DimService("works now", intValue); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-15T15:08:34.810

比尔的答案在技术上是正确的答案。

1）另一种方法

如果您需要摆脱类型的枚举，另一种方法是使类型本身成为 int。

```
typedef int MyEnum;
enum
{
    CONST1 = 0,
    etc...
}; 
```

然后像平常一样使用它。编译器不会捕获错误的值分配，但是由于您可以将所有声明标记为 MyEnum 类型，它应该足够简单以跟踪正在发生的事情，并且您可以将变量传递到它所说的任何地方 int。

2) 危险的方法

永远不要这样做！

```
EnumType v = EnumValue_...

MyFunction( *((int*)&v) ); 
```

或这个...

```
#define MAKE_INT_REF(v) *((int*)&(v))

MyFunction( MAKE_INT_REF(v) ); 
```

原因是编译器可以自动选择枚举使用的类型。它可能会选择 int，也可能会选择 char。您无法确定跨不同的编译器和平台。因此，如果您尝试强制转换枚举，您最终会得到不可移植的代码和非常危险的代码，因为写回这样的强制转换会覆盖其他值。

# actionscript-3 - SWF 文件不适用于所有路径

> ID：14897312
> 
> 赞同：-1
> 
> 时间：2013-02-15T14:55:02.543
> 
> 标签：actionscript-3

我做了一个 Flash 项目，它在编译器路径中运行良好。当我打开 SWF 文件时，它工作正常。

但如果我将所有文件复制到另一个路径，它就不起作用！请帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T15:12:54.927

更新全局安全设置面板：添加新文件夹位置

[http://www.macromedia.com/support/documentation/en/flashplayer/help/settings_manager04.html](http://www.macromedia.com/support/documentation/en/flashplayer/help/settings_manager04.html)

# php - 下一个身份，未来身份，

> ID：14897314
> 
> 赞同：0
> 
> 时间：2013-02-15T14:55:04.960
> 
> 标签：php, mysql, phpmyadmin

使用[PHP](http://en.wikipedia.org/wiki/PHP)和[MySQL](http://en.wikipedia.org/wiki/MySQL)，我想获取 MySQL 中未来 ID 的编号，之后的编号，如 nextincrement。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T14:58:11.220

确实不可能做到可靠。你可以这样做`select max(id)+1`，但如果你有回滚事务和/或并行进程正在运行，那将会失败。

最好的方法是：

1.  开始交易。
2.  插入骨架记录并执行 a`select last_insert_id()`以获取其 ID
3.  将该 ID 用于任何子/并行记录更新
4.  用您需要的任何其他内容填充骨架记录
5.  提交事务。

如果任何阶段失败，则回滚事务，并丢弃该 ID，因为它是无效的并且永远不会再次使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T14:57:56.223

如果你只是在数据库中插入一些东西，你可以使用 mysqli_insert_id()

从那里，只需添加一个即可获得下一个。

[http://php.net/manual/en/function.mysql-insert-id.php](http://php.net/manual/en/function.mysql-insert-id.php)

# python - 龙卷风网址正则表达式

> ID：14897320
> 
> 赞同：1
> 
> 时间：2013-02-15T14:55:29.630
> 
> 标签：python, regex, url, tornado

我想获取一个网站的域名（例如“www.google.com”）作为传递给处理程序的参数`app = tornado.web.Application(handlers=[(r"/(\w+)", IndexHandler)]`。

当我运行我的测试文件时，它失败了，因为 "www.google.com" 与 pattern 不匹配`(\w+)`。

我所知道`(\w+)`的是它可以表示一串字符。我什至不知道是否`(\w+)`称为 Tornado url regex，但我想了解更多。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T15:06:49.767

`\w`表示[单词字符](http://docs.python.org/2/library/re.html#regular-expression-syntax)

相当于`[a-zA-Z0-9_]`

# objective-c - 如何垂直滚动两个 UITableView

> ID：14897328
> 
> 赞同：1
> 
> 时间：2013-02-15T14:55:52.340
> 
> 标签：objective-c, uitableview, uiscrollview

我有两个`UITableView`。我需要垂直滚动。

我试图将两个表都插入到 a`UIScrollView`中并禁用滚动`UITableView`。它可以工作，但`UITableView`下面的内容似乎被剪掉了，好像表格大小设置为屏幕的最大大小）。我通过情节提要将`UITableView`它们放在视图中。我试图在`viewDidLoad`方法中增加表格的框架但不起作用。如果我将它插入该方法中`viewDidAppear`，但是当我单击 UICell 然后返回时，它会让我失败。

有什么建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T15:13:29.643

您应该使用部分。但是，如果出于某种原因这不是一个选项，您可以收听`scrollViewDidScroll:`委托方法并根据需要设置两个表的偏移量。小例子：

```
- (void)scrollViewDidScroll:(UIScrollView *)scrollView {
   if (scrollView == self.firstTable) {
      self.secondTable.contentOffset = scrollView.contentOffset;
   } else {
      self.firstTable.contentOffset = scrollView.contentOffset
   }
} 
```

您可能需要将触摸表存储在 ivar 中，以确定哪些滚动事件由用户交互初始化，哪些由您的代码初始化以避免“滚动”循环。

**编辑：**

我可能误解了你的问题。你想让它们表现得像一张桌子吗？

# php - php curl在文本中搜索单词

> ID：14897341
> 
> 赞同：1
> 
> 时间：2013-02-15T14:56:50.137
> 
> 标签：php, curl, preg-match-all

我想制作可以从网页中获取文本的 php 代码。该代码从网站获取文本，然后搜索以“N”开头并以“a”结尾的文本，然后脚本将其添加到数组 [0]。我在正则表达式中的错误，请帮助我修复它，对不起我的英语不好

这是我的代码：

```
<?php 
$url = "http://www.nokia.com/global/products/phone/lumia820/";
$ch = curl_init($url);
curl_setopt($ch, CURLOPT_HEADER, 0);
curl_setopt($ch,CURLOPT_RETURNTRANSFER, 1);
$result = curl_exec($ch);
curl_exec($ch);
curl_close($ch);

preg_match_all('/^N(.*)\a$/', $result, $matches[0]);
preg_match_all('/^M(.*)\m$/', $result, $matches[0]);
preg_match_all('/^M(.*)\c$/', $result, $matches[0]);

print_r($matches[0]);
?> 
```

* * *

如果我尝试使用 html hor 示例，如何将 700 mAh 作为阵列 [0]、BL-5CA 作为阵列 [2]、诺基亚作为阵列 [3]

```
<div class="b-goods-specifications mod_cutted"> <div class="b-goods-specifications-item"> <ul class="b-goods-specifications-list"> <li class = "b-goods-specifications-row g-clearfix "> <div class="b-goods-specifications-cell"> <span> **capacity** </ span> </ div> <div class="b-goods-specifications-cell"> **700 mAh** </ div> </ li> <li class="b-goods-specifications-row g-clearfix"> <div class="b-goods-specifications-cell"> <span> **Model** </ span> </ div > <div class="b-goods-specifications-cell"> **BL-5CA** </ div> </ li> <li class="b-goods-specifications-row g-clearfix"> <div class = "b-goods-specifications-cell "> <span> **Brand** </ span> </ div> <div class="b-goods-specifications-cell"> **Nokia** </ div> </ li> <li class =" b-goods -specifications-row g-clearfix "> <div class="b-goods-specifications-cell"> <span> Type </ span> </ div> <div class="b-goods-specifications-cell"> Li -ion ​​&lt;/ div> </ li> </ ul> </ div> </ div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T15:00:03.873

试试这个 **'~N(.*?)a~si'**

```
 preg_match_all('~N(.*?)a~si', $result, $matches[0]); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T14:59:59.193

这是无效的：

```
preg_match_all('/^N(.*)\a$/', $result, $matches[0]);
                                               ^^^--- here 
```

应该只是`$matches`。当您稍后查看 $matches 时，`[0]`匹配的整个字符串（例如，您运行正则表达式的内容）和`[1]`,`[2]`等...将是从匹配中捕获的字符串。

同样，您`$matches[0]`对所有三个正则表达式都使用 SAME，这意味着您正在覆盖结果，并且最终只得到 LAST 正则表达式的结果。您应该捕获到不同的数组，或者在每个数组之后进行输出，这样您就不会丢失您正在寻找的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T15:02:38.020

```
preg_match_all('/N\w*?a/i', $result, $matches1);
preg_match_all('/M\w*?m/i', $result, $matches2);
preg_match_all('/M\w*?c/i', $result, $matches3);
echo "<pre>";
print_r($matches1[0]);
print_r($matches2[0]);
print_r($matches3[0]);
echo "</pre>"; 
```

输出：

```
Array
(
    [0] => Nokia
    [1] => Nokia
    [2] => na
    [3] => na
    [4] => nitia
    [5] => na
    [6] => ngua
    [7] => nokia
    [8] => nokia
    [9] => nonica
    [10] => nokia
    [11] => na
    [12] => Nokia
    [13] => na
    [14] => Nokia
    [15] => na
    [16] => ncsea
    [17] => Nokia
    [18] => na
    [19] => ncsea
    [20] => na
    [21] => ncsea
    [22] => na
    [23] => ncsea
    [24] => na
    [25] => ncsea
    [26] => na
    [27] => ncsea
    [28] => na
    [29] => ncsea
    [30] => na
    [31] => ncsea
    [32] => nchda
    [33] => na
    [34] => ncsea
    [35] => nokia
    [36] => Nokia
    [37] => na
    [38] => ncsea
    [39] => nokia
    [40] => Nokia
    [41] => na
    [42] => ncsea
    [43] => nokia
    [44] => nokia
    [45] => na
    [46] => Na
    [47] => Na
    [48] => nloa
    [49] => na
    [50] => nta
    [51] => nokia
    [52] => nokia
    [53] => nokia
    [54] => Nokia
    [55] => na
    [56] => na
    [57] => na
    [58] => na
    [59] => na
    [60] => Nokia
    [61] => Nokia
    [62] => Nokia
    [63] => Nokia
    [64] => nnova
    [65] => nnova
    [66] => nnova
    [67] => nokia
    [68] => nokia
    [69] => nokia
    [70] => nokia
    [71] => na
    [72] => ncia
    [73] => nokia
    [74] => na
    [75] => ncia
    [76] => na
    [77] => nokia
    [78] => na
    [79] => na
    [80] => na
    [81] => nokia
    [82] => na
    [83] => na
    [84] => na
    [85] => na
    [86] => nokia
    [87] => nokia
    [88] => Nokia
    [89] => Nokia
    [90] => Nokia
    [91] => nokia
    [92] => Nokia
    [93] => Nokia
    [94] => nokia
    [95] => na
    [96] => nokia
    [97] => Nokia
    [98] => nokia
    [99] => Nokia
    [100] => nokia
    [101] => Nokia
    [102] => nokia
    [103] => Nokia
    [104] => nokia
    [105] => Nokia
    [106] => nokia
    [107] => Nokia
    [108] => Nokia
    [109] => Nokia
    [110] => nokia
    [111] => na
    [112] => nokia
    [113] => nokia
    [114] => nokia
    [115] => nokia
    [116] => nokia
    [117] => nokia
    [118] => Nokia
    [119] => nokia
    [120] => na
    [121] => nokia
    [122] => Nokia
    [123] => nokia
    [124] => Nokia
    [125] => nokia
    [126] => Nokia
    [127] => nokia
    [128] => Nokia
    [129] => nokia
    [130] => Nokia
    [131] => nokia
    [132] => Nokia
    [133] => Nokia
    [134] => Nokia
    [135] => Nokia
    [136] => nokia
    [137] => Nokia
    [138] => Nokia
    [139] => Nokia
    [140] => nokia
    [141] => Nokia
    [142] => nokia
    [143] => Nokia
    [144] => Nokia
    [145] => Nokia
    [146] => na
    [147] => na
    [148] => ndedA
    [149] => na
    [150] => na
    [151] => nokia
    [152] => nokia
    [153] => nokia
    [154] => nokia
    [155] => Nokia
    [156] => nokia
    [157] => Nokia
    [158] => nokia
    [159] => na
    [160] => nokia
    [161] => nokia
    [162] => nokia
    [163] => nokia
    [164] => nokia
    [165] => nokia
    [166] => Nokia
    [167] => Nokia
    [168] => Nokia
    [169] => nokia
    [170] => Nokia
    [171] => nokia
    [172] => na
    [173] => nokia
    [174] => nokia
    [175] => nokia
    [176] => nokia
    [177] => nokia
    [178] => nokia
    [179] => Nokia
    [180] => Nokia
    [181] => Nokia
    [182] => nokia
    [183] => nokia
    [184] => na
    [185] => nokia
    [186] => nokia
    [187] => nokia
    [188] => nokia
    [189] => nokia
    [190] => nokia
    [191] => nokia
    [192] => nokia
    [193] => na
    [194] => nokia
    [195] => nokia
    [196] => nokia
    [197] => nokia
    [198] => nokia
    [199] => nokia
    [200] => Nokia
    [201] => Nokia
    [202] => Nokia
    [203] => nokia
    [204] => nokia
    [205] => Nokia
    [206] => nokia
    [207] => na
    [208] => nokia
    [209] => nokia
    [210] => nokia
    [211] => nokia
    [212] => nokia
    [213] => nokia
    [214] => nokia
    [215] => nokia
    [216] => nokia
    [217] => nokia
    [218] => nokia
    [219] => nokia
    [220] => Nokia
    [221] => Nokia
    [222] => Nokia
    [223] => nokia
    [224] => nokia
    [225] => na
    [226] => nokia
    [227] => nokia
    [228] => nokia
    [229] => nokia
    [230] => nokia
    [231] => nokia
    [232] => na
    [233] => na
    [234] => na
    [235] => na
    [236] => Nokia
    [237] => nokia
    [238] => Nokia
    [239] => Nokia
    [240] => nokia
    [241] => na
    [242] => nokia
    [243] => Nokia
    [244] => nokia
    [245] => Nokia
    [246] => nokia
    [247] => Nokia
    [248] => nokia
    [249] => Nokia
    [250] => nokia
    [251] => Nokia
    [252] => Nokia
    [253] => nokia
    [254] => Nokia
    [255] => Nokia
    [256] => nokia
    [257] => na
    [258] => nokia
    [259] => Nokia
    [260] => nokia
    [261] => Nokia
    [262] => nokia
    [263] => Nokia
    [264] => nokia
    [265] => Nokia
    [266] => nokia
    [267] => Nokia
    [268] => ndedA
    [269] => na
    [270] => Nokia
    [271] => Nokia
    [272] => Nokia
    [273] => nokia
    [274] => Nokia
    [275] => nokia
    [276] => na
    [277] => nokia
    [278] => nokia
    [279] => nokia
    [280] => Nokia
    [281] => na
    [282] => Nokia
    [283] => Nokia
    [284] => Nokia
    [285] => nokia
    [286] => Nokia
    [287] => nokia
    [288] => na
    [289] => nokia
    [290] => nokia
    [291] => nokia
    [292] => Nokia
    [293] => na
    [294] => Nokia
    [295] => Nokia
    [296] => Nokia
    [297] => nokia
    [298] => Nokia
    [299] => nokia
    [300] => na
    [301] => nokia
    [302] => nokia
    [303] => nokia
    [304] => Nokia
    [305] => nokia
    [306] => na
    [307] => na
    [308] => na
    [309] => ne_lumia
    [310] => Nokia
    [311] => nokia
    [312] => Nokia
    [313] => Nokia
    [314] => nokia
    [315] => na
    [316] => nokia
    [317] => Nokia
    [318] => na
    [319] => na
    [320] => na
    [321] => ne_lumia
    [322] => nokia
    [323] => nokia
    [324] => na
    [325] => nokia
    [326] => Nokia
    [327] => nnova
    [328] => nokia
    [329] => na
    [330] => na
    [331] => na
    [332] => ne_lumia
    [333] => na
    [334] => nokia
    [335] => na
    [336] => na
    [337] => nokia
    [338] => na
    [339] => nokia
    [340] => na
    [341] => na
    [342] => na
    [343] => na
    [344] => ne_lumia
    [345] => nokia
    [346] => na
    [347] => nokia
    [348] => na
    [349] => nokia
    [350] => na
    [351] => na
    [352] => na
    [353] => na
    [354] => na
    [355] => Nokia
    [356] => Nokia
    [357] => Nokia
    [358] => Nokia
    [359] => nnova
    [360] => nnova
    [361] => nnova
    [362] => nokia
    [363] => nokia
    [364] => nokia
    [365] => nokia
    [366] => na
    [367] => ncia
    [368] => nokia
    [369] => na
    [370] => ncia
    [371] => na
    [372] => nokia
    [373] => na
    [374] => na
    [375] => na
    [376] => nokia
    [377] => na
    [378] => na
    [379] => na
    [380] => nokia
    [381] => nokia
    [382] => Nokia
    [383] => na
    [384] => nda
    [385] => na
    [386] => nokia
    [387] => nventwithnokia
    [388] => nokia
    [389] => Nokia
    [390] => nta
    [391] => nta
    [392] => nokia
    [393] => na
    [394] => Nokia
    [395] => na
    [396] => na
    [397] => nokia
    [398] => nokia
    [399] => nokia
    [400] => nokia
)
Array
(
    [0] => maxim
    [1] => milylum
    [2] => mm
    [3] => mobileXhtm
    [4] => mobileXhtm
    [5] => mobileXhtm
    [6] => mobileXhtm
    [7] => mobileXhtm
    [8] => mobileXhtm
    [9] => mobileXhtm
    [10] => mobileXhtm
    [11] => mobileXhtm
    [12] => mobileXhtm
    [13] => mobileXhtm
    [14] => mobileXhtm
    [15] => managem
    [16] => Maxim
    [17] => Maxim
    [18] => Maxim
    [19] => Maxim
    [20] => mm
    [21] => mm
    [22] => mm
    [23] => mm
    [24] => mm
    [25] => mm
    [26] => mm
    [27] => mobileXhtm
    [28] => mobileXhtm
    [29] => mobileXhtm
    [30] => mobileXhtm
    [31] => mobileXhtm
    [32] => mobileXhtm
    [33] => mobileXhtm
    [34] => mobileXhtm
    [35] => milylum
)
Array
(
    [0] => m07AC
    [1] => m07AC
    [2] => mmendedAc
    [3] => magic
    [4] => mZYuf6c
    [5] => mZYuf6c
    [6] => Mic
    [7] => Music
    [8] => Music
    [9] => music
    [10] => music
    [11] => Music
    [12] => music
    [13] => Music
    [14] => music
    [15] => music
    [16] => music
    [17] => music
    [18] => music
    [19] => music
    [20] => Music
    [21] => Music
    [22] => Music
    [23] => mmendedAc
    [24] => matc
) 
```

# javascript - 将 JavaScript 数字转换为 Dart 双精度数

> ID：14897342
> 
> 赞同：0
> 
> 时间：2013-02-15T14:56:53.950
> 
> 标签：javascript, dart

我正在使用 Dart Interop 从 Dart 调用 JavaScript 库。

这个库有时会返回`number`对象 - 我怎样才能将它们转换成 Dart `double`s？

Javascript`number`对象有[一些](http://www.w3schools.com/jsref/jsref_obj_number.asp)可能有用的方法，但我不确定如何调用它们。

这是我的 Dart 代码 - 注释是 Dart 调试器识别的类型：

```
myObject = collection[i]; //Proxy
a = myObject.value; //FunctionProxy 
```

根据JavaScript 的文档，它`value`是 type `number`，但我不知道如何将其`a`转换为双精度。有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T15:14:21.070

如果您的`a`变量是 a `FunctionProxy`，则 的`value`成员`myObject`应该是一个函数。所以你应该使用过：

```
a = myObject.value(); 
```

现在`a`应该是一个[Dart num](http://api.dartlang.org/docs/releases/latest/dart_core/num.html)，它包含几乎所有的[javascript Number](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Number)函数等等。

# c++ - WriteFile() 和 ReadFile() 异步不写入或读取

> ID：14897344
> 
> 赞同：3
> 
> 时间：2013-02-15T14:57:04.567
> 
> 标签：c++, winapi, serial-port

`writefile`我正在尝试使用and`readfile`函数通过串行端口连接发送和接收字符串。我必须异步执行此操作，因为要读取的字节数总是不同的，并且`readfile`只会挂起或阻塞，直到它获得正确的字节数。现在我正在尝试异步执行此操作，我的`writefile`函数将不会发送任何数据，并且我的`readfile`函数似乎被跳过了，因为下一行开始执行此操作而没有读取任何字符。不确定我的重叠结构或超时是否有问题。但我此刻被困住了。

超时

```
void Serial::OpenPortRead()
{
HANDLE sSerial =  CreateFile(L"COM3",GENERIC_READ|GENERIC_WRITE,0,0,OPEN_EXISTING,FILE_FLAG_OVERLAPPED,0);
//Timeout Settings
COMMTIMEOUTS    CommTimeouts;   
GetCommTimeouts(sSerial, &CommTimeouts);
CommTimeouts.ReadIntervalTimeout            = 5000; 
    CommTimeouts.ReadTotalTimeoutMultiplier     = 2; 
    CommTimeouts.ReadTotalTimeoutConstant       = 10; 
    CommTimeouts.WriteTotalTimeoutMultiplier    = 50; 
    CommTimeouts.WriteTotalTimeoutConstant      = 500; 

//Port Settings
DCB dcbSerialParams = {0};
dcbSerialParams.DCBlength=sizeof(dcbSerialParams);
dcbSerialParams.BaudRate=CBR_19200;
dcbSerialParams.ByteSize=8;
dcbSerialParams.StopBits=ONESTOPBIT;
dcbSerialParams.Parity=NOPARITY;

SetCommState(sSerial,&dcbSerialParams);//Apply Settings to Handle

} 
```

写文件功能

```
void Serial::WritePort(CString buffer)
{

DWORD bytes;//pointer to hold number of bytes written
USES_CONVERSION;
CW2A buf((LPCWSTR)buffer);//Convert unicode to ascii

OpenPortRead();
OVERLAPPED overlapped_structure;
memset(&overlapped_structure, 0, sizeof(overlapped_structure));
overlapped_structure.Offset = 0;
overlapped_structure.hEvent = CreateEvent(NULL, TRUE, FALSE, NULL);

WriteFile(sSerial, buf,strlen(buf),&bytes,&overlapped_structure);//Send string

} 
```

读取文件功能

```
int Serial::ReadPort(CString buf){

OpenPortRead();// Open Serial Communication for reading

const int buffer_size = 10;
 char buffer[10];//buffer to hold recieved string

memset (buffer, 0, buffer_size * sizeof (char));
int n, num,iTemp,i=0;
OVERLAPPED overlapped_structure;
memset(&overlapped_structure, 0, sizeof(overlapped_structure));
overlapped_structure.Offset = 0;
overlapped_structure.hEvent = CreateEvent(NULL, TRUE, FALSE, NULL);

DWORD bytesRead;//pointer to number bytes read

ReadFile(sSerial,&buffer,buffer_size,&bytesRead,&overlapped_structure);// begin read

//Used this function because return would be filled with extra raw data characters
buffer[n] = StringLength(buffer, &n);//find length of string returned
num = n; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T21:16:49.657

MSDN 包含有关如何将重叠 I/O 与串行端口通信一起使用的详细信息：

[串行通信](http://msdn.microsoft.com/en-us/library/ff802693.aspx)

# c# - 不包含“表格”的定义？Outlook 加载项

> ID：14897345
> 
> 赞同：0
> 
> 时间：2013-02-15T14:57:06.530
> 
> 标签：c#, visual-studio, outlook-addin

最近我正在为 Visual Studio 2012 中的 Outlook 2010 开发一个带有 c# 的加载项。我开发了一个自定义表单区域，其中包含简单的文本框和一个按钮。在 Button_click 方法中，我遇到了一个错误（错误代码：错误 CS0117），我不知道为什么？我对这个环境真的很陌生:) 无论如何，这都是我的问题。（如果您需要更多代码来解决，请告诉我）

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using Office = Microsoft.Office.Core;
using Outlook = Microsoft.Office.Interop.Outlook;
using MSForms = Microsoft.Vbe.Interop.Forms; 
```

. . .

```
private void button1_Click(object sender, EventArgs e)
        {
        // save button
        MSForms.UserForm userForm = (MSForms.UserForm) FormRegion1.Form;
        MSForms.Controls formControls = userForm.Controls;

        Outlook.OlkTextBox ad =
           (Outlook.OlkTextBox)formControls.Item("ad");
        string cariad = ad.Text;

        Outlook.OlkTextBox adres =
          (Outlook.OlkTextBox)formControls.Item("adres");
        string cariadres = adres.Text;

        Outlook.OlkTextBox vergid =
          (Outlook.OlkTextBox)formControls.Item("vergid");
        string carivergid = vergid.Text; 
```

. . .

*无法识别“表格”`MSForms.UserForm userForm = (MSForms.UserForm)`行。`FormRegion1.Form`错误说

> “错误 CS0117：‘OutlookAddIn2.FormRegion1’不包含‘Form’的定义”。

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T13:56:55.963

我通过不使用表单解决了这个问题:) 简单地说，我只是输入

```
 this.TextBoxName.Text; 
```

到达文本框的文本。不管怎么说，还是要谢谢你。

# uiimage - 来自 MASKED CALayer 的 UIImage

> ID：14897346
> 
> 赞同：2
> 
> 时间：2013-02-15T14:57:09.893
> 
> 标签：uiimage, calayer, crop, mask, cgcontext

我需要来自 Masked CALayer 的 UIImage。这是我使用的功能：

```
- (UIImage *)imageFromLayer:(CALayer *)layer
{
    UIGraphicsBeginImageContext([layer frame].size);

    [layer renderInContext:UIGraphicsGetCurrentContext()];
    UIImage *outputImage = UIGraphicsGetImageFromCurrentImageContext();

    UIGraphicsEndImageContext();

    return outputImage;
} 
```

问题是没有维护面具。这是完成的代码：

```
 CAShapeLayer * layerRight= [CAShapeLayer layer];
    layerRight.path = elasticoRight;
    im2.layer.mask = layerRight;

    CAShapeLayer * layerLeft= [CAShapeLayer layer];
    layerLeft.path = elasticoLeft;
    im3.layer.mask = layerLeft;

    [viewImage.layer addSublayer:im2.layer];
    [viewImage.layer addSublayer:im3.layer];

    UIImage *image_result = [self imageFromLayer:viewImage.layer]; 
```

如果我将 viewImage 可视化，结果是正确的，但如果我尝试获取相对于图层的图像，则会丢失蒙版。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T20:19:59.120

我已经解决了。现在我获取图像蒙版并使用 CGContextClipToMask。

```
CGRect rect = CGRectMake(0, 0, 1024, 768);

UIGraphicsBeginImageContextWithOptions(rect.size, YES, 0.0);

{
   [[UIColor blackColor] setFill];
   UIRectFill(rect);
   [[UIColor whiteColor] setFill];

   UIBezierPath *leftPath = [UIBezierPath bezierPath];

   // Set the starting point of the shape.
   CGPoint p1 = [(NSValue *)[leftPoints objectAtIndex:0] CGPointValue];
   [leftPath moveToPoint:CGPointMake(p1.x, p1.y)];

   for (uint i=1; i<leftPoints.count; i++)
   {
       CGPoint p = [(NSValue *)[leftPoints objectAtIndex:i] CGPointValue];
       [leftPath addLineToPoint:CGPointMake(p.x, p.y)];
   }
   [leftPath closePath];
   [leftPath fill];
}

UIImage *mask = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();

UIGraphicsBeginImageContextWithOptions(rect.size, NO, 0.0);

{
   CGContextClipToMask(UIGraphicsGetCurrentContext(), rect, mask.CGImage);
   [im_senza drawAtPoint:CGPointZero];
}

UIImage *maskedImage = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext(); 
```

# c# - 水印和 Jquery 不显眼的验证不起作用

> ID：14897352
> 
> 赞同：0
> 
> 时间：2013-02-15T14:57:43.367
> 
> 标签：c#, asp.net-mvc, jquery, watermark

我使用下面的链接 [http://www.mkyong.com/jquery/jquery-watermark-effect-on-text-input/在我的输入中添加了水印](http://www.mkyong.com/jquery/jquery-watermark-effect-on-text-input/)

一旦我添加了我需要使用 jquery 进行的验证，就会停止工作。我怎样才能让我的验证和水印都工作？

```
<script src="@Url.Content("~/Scripts/jquery-1.7.1.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>
            <div class="editor-field">
        @Html.EditorFor(model => model.Person.PersonName)
        @Html.ValidationMessageFor(model => model.Person.PersonName)
    </div>

$(document).ready(function () {

var watermark = 'Person Name';

init, set watermark text and class
$('#Person_PersonName').val(watermark).addClass('watermark');

if blur and no value inside, set watermark text and class again.
$('#Person_PersonName').blur(function () {
    if ($(this).val().length == 0) {
        $(this).val(watermark).addClass('watermark');
    }
});

if focus and text is watermrk, set it to empty and remove the watermark class
$('#Person_PersonName').focus(function () {
    if ($(this).val() == watermark) {
        $(this).val('').removeClass('watermark');
    }
});
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T02:14:51.183

```
<input type="text" name="key" id="searchInput" placeholder="what's up"/> worked for me 
```

– kandroid 2 月 18 日 15:19

# sql - 如何手动删除由其边界标识的分区？

> ID：14897355
> 
> 赞同：1
> 
> 时间：2013-02-15T14:57:48.577
> 
> 标签：sql, plsql, oracle11g

我有一个按月分区的表，现在我需要在 oracle 11g 下使用 plsql 过程删除超过 2 个月的分区。我已经尝试过`alter table <table_name> drop partition <partition name>`这个'将按该分区的名称删除。但是我需要按月删除.我的实际表是。

```
CREATE TABLE invoices_1
(in_no    NUMBER NOT NULL,
 voice_date  DATE   NOT NULL,
 feed_back     VARCHAR2(500))
PARTITION BY RANGE (voice_date)
(PARTITION jan VALUES LESS THAN (TO_DATE('01/12/2012', 'DD/MM/YYYY')) ,
 PARTITION feb VALUES LESS THAN (TO_DATE('01/01/2013', 'DD/MM/YYYY')) ,
 PARTITION decs VALUES LESS THAN (TO_DATE('01/02/2013', 'DD/MM/YYYY')) ); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T16:16:26.437

您可以通过使用关键字标识其边界来删除分区[`FOR`](http://docs.oracle.com/cd/E11882_01/server.112/e26088/statements_3001.htm#BABFJDCG)：

```
SQL> ALTER TABLE invoices_1 DROP PARTITION
  2                          FOR (TO_DATE('2012-12-01', 'YYYY-MM-DD'));

Table altered 
```

# api - Magento API 向 catalogProductCreateEntity 添加新的复杂类型（未传递额外属性）

> ID：14897360
> 
> 赞同：0
> 
> 时间：2013-02-15T14:58:00.840
> 
> 标签：api, magento, soap

我正在尝试扩展 magento 以传递可配置产品。我想通过扩展来做到这一点`catalogProductCreateEntity`。我所做的是创建自己的模块并通过在`<types>`标签中添加以下内容来扩展目录模块 wsdl。像这样...

```
 <complexType name="catalogProductCreateEntity">
            <all>
                <element name="categories" type="typens:ArrayOfString" minOccurs="0" />
                <element name="websites" type="typens:ArrayOfString" minOccurs="0" />
                <element name="associated" type="typens:ArrayOfString" minOccurs="0" />
                <element name="super_attributes" type="typens:catalogProductLinkEntityArray" minOccurs="0" />
                <element name="name" type="xsd:string" minOccurs="0" />
                <element name="description" type="xsd:string" minOccurs="0" />
                <element name="short_description" type="xsd:string" minOccurs="0" />
                <element name="weight" type="xsd:string" minOccurs="0" />
                <element name="status" type="xsd:string" minOccurs="0" />
                <element name="url_key" type="xsd:string" minOccurs="0" />
                <element name="url_path" type="xsd:string" minOccurs="0" />
                <element name="visibility" type="xsd:string" minOccurs="0" />
                <element name="category_ids" type="typens:ArrayOfString" minOccurs="0" />
                <element name="website_ids" type="typens:ArrayOfString" minOccurs="0" />
                <element name="has_options" type="xsd:string" minOccurs="0" />
                <element name="gift_message_available" type="xsd:string" minOccurs="0" />
                <element name="price" type="xsd:string" minOccurs="0" />
                <element name="special_price" type="xsd:string" minOccurs="0" />
                <element name="special_from_date" type="xsd:string" minOccurs="0" />
                <element name="special_to_date" type="xsd:string" minOccurs="0" />
                <element name="tax_class_id" type="xsd:string" minOccurs="0" />
                <element name="tier_price" type="typens:ArrayOfString" minOccurs="0" />
                <element name="meta_title" type="xsd:string" minOccurs="0" />
                <element name="meta_keyword" type="xsd:string" minOccurs="0" />
                <element name="meta_description" type="xsd:string" minOccurs="0" />
                <element name="custom_design" type="xsd:string" minOccurs="0" />
                <element name="custom_layout_update" type="xsd:string" minOccurs="0" />
                <element name="options_container" type="xsd:string" minOccurs="0" />
                <element name="additional_attributes" type="typens:associativeArray" minOccurs="0" />
            </all>
        </complexType>
        <complexType name="catalogProductSuperAttributeEntity">
            <all>
                <element name="attribute_id" type="xsd:string" minOccurs="0"/>
                <element name="product_super_attribute_id" type="xsd:string" minOccurs="0"/>
                <element name="product_id" type="xsd:string" minOccurs="0"/>
                <element name="position" type="xsd:string" minOccurs="0"/>
                <element name="label" type="xsd:string" minOccurs="0"/>
                <element name="attribute_code" type="xsd:string" minOccurs="0"/>
                <element name="use_default" type="xsd:string" minOccurs="0"/>
                <element name="prices" type="xsd:string" minOccurs="0"/>
            </all>
        </complexType>
        <complexType name="catalogProductSuperAttributeEntityArray">
            <complexContent>
                <restriction base="soapenc:Array">
                    <attribute ref="soapenc:arrayType" wsdl:arrayType="typens:catalogProductSuperAttributeEntity[]"/>
                </restriction>
            </complexContent>
        </complexType> 
```

`catalogProductCreateEntity`我在名为 super 属性中创建了一个新元素。它的类型是which 是我也在上面定义`catalogProductSuperAttributeEntityArray`的数组。`catalogProductSuperAttributeEntity`当我调用肥皂服务器时，我会这样做......

```
 foreach($prodInfo->super_attributes as $super_att) {
                $sProdInfo['super_attributes'][] = array(
                    'attribute_id'=>$super_att->attribute_id,
                    'product_super_attribute_id'=>$super_att->product_super_attribute_id,
                    'product_id'=>$super_att->product_id,
                    'position'=>$super_att->position,
                    'label'=>$super_att->label,
                    'attribute_code'=>$super_att->attribute_code,
                    'use_default'=>$super_att->use_default,
                    'prices'=>12
                );
            } 
```

所有元素都已填充。看起来像这样……

```
[super_attributes] => Array
    (
        [0] => Array
            (
                [attribute_id] => 159
                [product_super_attribute_id] => 207
                [product_id] => 4659
                [position] => 0
                [label] => Shirt Size
                [attribute_code] => shirt_size
                [use_default] => 0
                [prices] => 12
            )

        [1] => Array
            (
                [attribute_id] => 70
                [product_super_attribute_id] => 208
                [product_id] => 4659
                [position] => 0
                [label] => Manufacturer
                [attribute_code] => manufacturer
                [use_default] => 0
                [prices] => 12
            )

    ) 
```

现在，我还扩展了这个`Mage_Catalog_Model_Product_Api_V2`类来处理这个新属性。我的问题是当我单步执行代码时，magento 只收到数组中的 2 个属性。

1.  product_id
2.  位置

所有其他属性都被忽略。我还清空了服务器和客户端的肥皂缓存，但似乎没有任何改变。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T16:04:27.913

弄清楚了...

```
<element name="super_attributes" type="typens:catalogProductLinkEntityArray" minOccurs="0" /> 
```

应该是我新创建的`typens`...

```
<element name="super_attributes" type="typens:catalogProductSuperAttributeEntityArray" minOccurs="0" /> 
```

复杂类型内`catalogProductCreateEntity`

# c++ - 在 C++ 中计算地图中的键值

> ID：14897364
> 
> 赞同：-1
> 
> 时间：2013-02-15T14:58:12.397
> 
> 标签：c++, map

让地图成为：`map <string , int>` 现在我想插入字符串，如果再次插入相同的字符串，将计数存储在整数部分。给我一个方法？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T15:00:22.793

您可以使用以下代码轻松完成此操作：`my_map[key]++;`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T14:59:43.693

做这个：

```
++m.insert(std::make_pair("Hello", 0)).first->second; 
```

或者更容易：

```
++m["hello"]; 
```

第一种方法允许您在存储`insert`操作结果时判断字符串是否已经存在，例如`auto p = m.insert(...); ++p.first->second;`，然后`p.second`告诉您插入操作是否成功。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-15T15:00:35.860

其实我相信只是`m["key"]++`会做。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-15T15:00:48.990

由于`int{}`is `0`，您只需要：

```
++m[str]; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-15T15:01:17.303

使用 find() 方法检查键是否在映射中。

```
std::map<string, int> mapping;
std::string str;
//...

if(mapping.find(str) != mapping.end()) {
    mapping[str]++;
} else {
    mapping[str] = 1;
} 
```

# java - 比较Java中的两个整数数组

> ID：14897366
> 
> 赞同：27
> 
> 时间：2013-02-15T14:58:25.280
> 
> 标签：java, arrays, compare

我正在尝试编写代码来比较两个数组。在第一个数组中我放了自己的数字，但第二个数组从输入文件中获取数字。该数组的大小由文件中的第一个数字确定，而第一个数组的大小始终为 10。两个数组的长度必须相同，数字也必须相同。

我的代码如下：

```
public static void compareArrays(int[] array1, int[] array2) {
    boolean b = false;
    for (int i = 0; i < array2.length; i++) {

        for (int a = 0; a < array1.length; a++) {

            if (array2[i] == array1[a]) {
                b = true;
                System.out.println("true");
            } else {
                b = false;
                System.out.println("False");
                break;
            }
        }
    }       
} 
```

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2013-02-15T15:02:25.170

从我所见，您只是尝试查看它们是否*相等*，如果是`true`，请使用以下内容：

```
boolean areEqual = Arrays.equals(arr1, arr2); 
```

这是执行此操作的标准方法。

请注意，数组也必须**排序**以被视为相等，来自 JavaDoc：

> 如果两个数组包含相同数量的元素，并且两个数组中所有对应的元素对相等，则认为两个数组相等。换句话说，如果两个数组以相同的顺序包含相同的元素，则它们是相等的。

很抱歉错过了。

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2013-02-15T15:03:31.287

使用
`Arrays.equals(ary1,ary2);` // 返回布尔值

**编辑**
您也可以用来`Arrays.deepEquals(ary1,ary2)`比较**二维数组**

还检查[此链接](http://java.dzone.com/articles/yours-deeply-why)`Arrays.equls(ar1,ar2)`以了解和之间的比较比较`Arrays.deepEquals(ar1,ar2)`

[Java Arrays.equals() 为二维数组返回 false](https://stackoverflow.com/questions/2721033/java-arrays-equals-returns-false-for-two-dimensional-arrays)

**编辑 2**
如果您不想使用这些库方法，那么您可以像这样轻松地实现您的方法：

```
public static boolean ArrayCompare(int[] a, int[] a2) {
    if (a==a2)   // checks for same array reference
        return true;
    if (a==null || a2==null)  // checks for null arrays
        return false;

    int length = a.length;
    if (a2.length != length)  // arrays should be of equal length
        return false;

    for (int i=0; i<length; i++)  // compare array values
        if (a[i] != a2[i])
            return false;

    return true;
} 
```

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2013-02-15T15:15:09.913

```
public static void compareArrays(int[] array1, int[] array2) {
        boolean b = true;
        if (array1 != null && array2 != null){
          if (array1.length != array2.length)
              b = false;
          else
              for (int i = 0; i < array2.length; i++) {
                  if (array2[i] != array1[i]) {
                      b = false;    
                  }                 
            }
        }else{
          b = false;
        }
        System.out.println(b);
    } 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2013-02-15T15:01:59.233

如果您知道数组的大小相同，则可以证明排序更快，然后进行比较

```
Arrays.sort(array1)
Arrays.sort(array2)
return Arrays.equals(array1, array2) 
```

如果您不想更改数组中数据的顺序，`System.arraycopy`请先执行。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-02-15T15:05:29.960

您可以使用 Apache Commons [ArrayUtils#isEquals()](http://commons.apache.org/lang/api-2.6/org/apache/commons/lang/ArrayUtils.html#isEquals%28java.lang.Object,%20java.lang.Object%29)方法检查数组是否相等。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-09-23T19:24:52.840

现有答案都不涉及使用比较器，因此不能用于二叉树或排序。所以我要把这个留在这里：

```
public static int compareIntArrays(int[] a, int[] b) {
    if (a == null) {
        return b == null ? 0 : -1;
    }
    if (b == null) {
        return 1;
    }
    int cmp = a.length - b.length;
    if (cmp != 0) {
        return cmp;
    }
    for (int i = 0; i < a.length; i++) {
        cmp = Integer.compare(a[i], b[i]);
        if (cmp != 0) {
            return cmp;
        }
    }
    return 0;
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-02-15T15:01:57.430

即使有一些简单的东西`.equals`，我还是想指出您在代码中犯的两个错误。第一个：当你遍历数组时，你说`b`is `true`or `false`。然后你再次开始检查，因为 for 循环。但是每次你都给出`b`一个值。因此，无论发生什么，`b`设置的值始终是 LAST for 循环的值。下一次，设置`boolean b = true`, `if equal = true`, 什么都不做, `if equal = false`, `b=false`.

其次，您现在正在检查每个值`array1`与`array2`. 如果我理解正确，您只需要检查数组中同一位置的值，这意味着您应该删除第二个 for 循环并像这样检查：`if (array2[i] == array1[i])`. 那么你的代码也应该能正常工作。

您的代码将像这样工作：

```
public static void compareArrays(int[] array1, int[] array2) {
    boolean b = true;
    for (int i = 0; i < array2.length; i++) {
        if (array2[i] == array1[i]) {
            System.out.println("true");
        } else {
            b = false;
            System.out.println("False");
        }
    } 
    return b; 
```

}

但正如其他人所说，更容易的是： Arrays.equals(ary1,ary2);

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-02-15T15:16:09.827

> 数组的长度必须相同，并且数字始终相同（数组中的第一个数字必须是 sasme 等等）

基于这个评论，那么你已经有了你的算法：

1.  检查两个数组是否具有相同的长度：

    array1.length == array2.length

2.  相同位置的数字必须相同：

    数组1[x] == 数组2[x]

知道了这一点，您可以像这样创建代码（这不是 Java 代码，它是一种算法）：

```
function compareArrays(int[] array1, int[] array2) {

    if (array1 == null) return false
    if (array2 == null) return false

    if array1.length != array2.length then return false

    for i <- 0 to array1.length - 1
        if array1[i] != array2[i] return false

    return true
} 
```

注意：您的函数应该返回 a `boolean`，而不是 a `void`，然后在另一个变量中恢复返回值并使用它来打印消息“true”或“false”：

```
public static void main(String[] args) {
    int[] array1;
    int[] array2;
    //initialize the arrays...
    //fill the arrays with items...
    //call the compare function
    boolean arrayEquality = compareArrays(array1, array2);
    if (arrayEquality) {
        System.out.println("arrays are equals");
    } else {
        System.out.println("arrays are not equals");
    }
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-12-14T13:15:12.973

这是我的方法，它可能对其他人有用。

```
public static void compareArrays(int[] array1, int[] array2) {
    if (array1.length != array2.length)
    {
           System.out.println("Not Equal");
    }
    else
    {
        int temp = 0;
        for (int i = 0; i < array2.length; i++) {  //Take any one of the array size
            temp^ = array1[i] ^ array2[i];   //with help of xor operator to find two array are equal or not                 
        }
        if( temp == 0 )
        {
             System.out.println("Equal");
        }
        else{
             System.out.println("Not Equal");
        }
    }
} 
```

* * *

## 回答 #10

> 赞同：-2
> 
> 时间：2014-02-17T22:51:52.530

为了完整起见，您应该有一个可以检查*所有*数组的方法：

```
 public static <E> boolean compareArrays(E[] array1, E[] array2) {
      boolean b = true;
      for (int i = 0; i < array2.length; i++) {
        if (array2[i].equals(array1[i]) ) {// For String Compare
           System.out.println("true");
        } else {
           b = false;
           System.out.println("False");
        }
      } 
      return b;
    } 
```

# php - file_put_contents 到新目录

> ID：14897367
> 
> 赞同：1
> 
> 时间：2013-02-15T14:58:36.783
> 
> 标签：php, unzip

我有以下代码，如您所见，我用它来创建一个新目录，然后解压缩一个文件。

```
<?php

function unzip_to_s3() { 

// Set temp path
$temp_path = 'wp-content/uploads/gravity_forms/1-9e5dc27086c8b2fd2e48678e1f54f98c/2013/02/tmp/';

// Get filename from Zip file
$zip_file = 'archive.zip';

// Create full Zip file path
$zip_file_path = $temp_path.$zip_file;

// Generate unique name for temp sub_folder for unzipped files
$temp_unzip_folder = uniqid('temp_TMS_', true);

// Create full temp sub_folder path
$temp_unzip_path = $temp_path.$temp_unzip_folder;

// Make the new temp sub_folder for unzipped files
if (!mkdir($temp_unzip_path, '0755', true)) {
    die('Error: Could not create path: '.$temp_unzip_path);
}

// Unzip files to temp unzip folder, ignoring anything that is not a .mp3 extension
$zip = new ZipArchive();
$filename = $zip_file_path;

if ($zip->open($filename)!==TRUE) {
   exit("cannot open <$filename>\n");
}

for ($i=0; $i<$zip->numFiles;$i++) {
   $info = $zip->statIndex($i);
   $file = pathinfo($info['name']);
   if(strtolower($file['extension']) == "mp3") {
        file_put_contents(basename($info['name']), $zip->getFromIndex($i));
   } else {
   $zip->deleteIndex($i);
   }
}
$zip->close();

}

unzip_to_s3();

?> 
```

解压缩代码由我的另一篇文章中的@TotalWipeOut 提供。它目前仅将 mp3 文件解压缩到我的基本目录，但我想将它们放在我新创建的文件夹中。

我对 PHP 很陌生，所以一直在尽我最大的努力，但我不知道如何更改`file_put_contents(basename($info['name']), $zip->getFromIndex($i));`行以将文件放入我的新文件夹中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T15:13:13.837

正如 Marc B. 提到的，您需要包含要放入文件的目录的路径。

使用您的代码：

```
file_put_contents($temp_unzip_path."/".basename($info['name']), $zip->getFromIndex($i)); 
```

我还建议阅读更多关于 PHP 的基础知识。

# asp.net - ASP.Net MVC：从带有 requestPathInvalidCharacters 的 url 中排除空格

> ID：14897372
> 
> 赞同：1
> 
> 时间：2013-02-15T14:58:57.457
> 
> 标签：asp.net, configuration, web-config

在我的 IIS7.5 上的 ASP MVC 站点中，并设置了一个 long`maxUrlLength`以处理超过 260 个字符的 url。为此，我们还必须打开`relaxedUrlToFileSystemMapping`.

所以我们在 web.config 中有这个：

```
<httpRuntime enableVersionHeader="false" maxUrlLength="1200" 
  relaxedUrlToFileSystemMapping="true"
  requestPathInvalidCharacters="&lt;,&gt;,&amp;,*,%,:,;,\,?,%" /> 
```

副作用是现在没有以空格和斜杠结尾的 url 有效。例如，“ [http://mysite.com/path/to/name](http://mysite.com/path/to/name) /”用于抛出`HttpException`我们捕获并发出 301 重定向的一个。但现在没有了。

是否可以让这个 url 表现得像以前一样？我可以`requestPathInvalidCharacters`以某种方式在列表中指定空格字符吗？放入`requestPathInvalidCharacters=" "`对 url 中的空格没有影响，requestPathInvalidCharacters=" " 也没有影响。并且`requestPathInvalidCharacters="%20"`是配置错误。

# jquery - jQuery PHP 会话

> ID：14897373
> 
> 赞同：0
> 
> 时间：2013-02-15T14:58:59.360
> 
> 标签：jquery, ajax, php

只是想知道是否有人可以帮助我解决我的最新问题。我是编程新手，非常感谢我在这里获得的帮助（所以请耐心等待，我们都必须从某个地方开始！）:)

基本上我有这个应用程序，我已经为它创建了一个登录名，它可以很好地验证信息，并在你成功登录后将其带到下一页。

我无法理解的是用它启动一个 PHP 会话？最后我想要实现的是：

1.  为登录用户启动 PHP 会话
2.  在迷你应用程序中携带用户 ID，以便以后可以将其以另一种形式插入到数据库中，而无需用户自己输入

我的html代码是：

```
<!DOCTYPE html>
<html>
<head>

<title>Find A Deal</title>
<meta name="viewport" content="width=device-width, height=device-height, initial-scale=1.0"/>
<link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
<link rel="stylesheet" href="http://localhost/findadeal/themes/deal.css" />
<style>
    #login-button {
        margin-top: 30px;
    }        
</style>
<script src="http://www.dragan-gaic.info/js/jquery-1.8.2.min.js"></script>    
<script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>
<script src="js/custom3.js"></script>

</head>

<body>

<div data-role="page" id="login">
    <div data-theme="a" data-role="header">
        <h3>Find A Deal</h3>
    </div>

    <div data-role="content">

    <?php

if( !isset( $_SESSION ) ){
session_start();
}

if( isset( $_SESSION['username'] ) ){
/* User is logged in */
}

    ?>

        <label for="username">Enter your username:</label>
        <input type="text" value="" name="username" id="username"/>
        <label for="password">Enter your password:</label>
        <input type="password" value="" name="password" id="password"/>  
        <a data-role="button" id="login-button" data-theme="b">Login</a>
    </div>

    <div data-theme="a" data-role="footer" data-position="fixed">

    </div>
</div>

<!--Newly rendered page after successful login!-->

<div data-role="page" id="index">
    <div data-theme="a" data-role="header">
        <h2>Find A Deal</h2>
    </div>

    <div data-role="content">
    <h3></h3>
    <a href="#view" data-role="button" data-icon="search">View Deals</a>
    <a href="http://localhost/findadeal/login/newdeal.php" data-role="button" data-icon="plus">Add Deals</a>
    </div>

</body>
</html> 
```

这是创建 Ajax 请求等的 Javascript 函数：

```
$(document).on('pagebeforeshow', '#login', function(){ 
$('#login-button').on('click', function(){
    if($('#username').val().length > 0 && $('#password').val().length > 0){
        userObject.username = $('#username').val(); // Put username into the object
        userObject.password = $('#password').val(); // Put password into the object
        // Convert an userObject to a JSON string representation
        var outputJSON = JSON.stringify(userObject);
        // Send data to server through ajax call
        // action is functionality we want to call and outputJSON is our data
        ajax.sendRequest({action : 'login', outputJSON : outputJSON});
    } else {
        alert('Please fill all nececery fields');
    }
});    
});

$(document).on('pagebeforeshow', '#index', function(){ 
if(userObject.username.length == 0){ // If username is not set (lets say after force page refresh) get us back to the login page
    $.mobile.changePage( "#login", { transition: "slide"} ); // In case result is true change page to Index  
}
$(this).find('[data-role="content"] h3').append('Welcome ' + userObject.username); // Change header with wellcome msg
//$("#index").trigger('pagecreate');
});

// This will be an ajax function set
var ajax = {
sendRequest:function(save_data){
    $.ajax({url: 'http://localhost/findadeal/login/json2.php',
        data: save_data,
        async: true,
        beforeSend: function() {
            // This callback function will trigger before data is sent
            $.mobile.showPageLoadingMsg(true); // This will show ajax spinner
        },
        complete: function() {
            // This callback function will trigger on data sent/received complete
            $.mobile.hidePageLoadingMsg(); // This will hide ajax spinner
        },
        success: function (result) {
            if(result == "true") {
                $.mobile.changePage( "#index", { transition: "slide"} ); // In case result is true change page to Index
            } else {
                alert('Login unsuccessful, please try again!'); // In case result is false throw an error
            }
            // This callback function will trigger on successful action
        },
        error: function (request,error) {
            // This callback function will trigger on unsuccessful action                
            alert('Network error has occurred please try again!');
        }
    });
}
}

// object to store username and password. 
var userObject = {
username : "",
password : ""
} 
```

最后这是我的 PHP 文件：

```
<?php

session_start();

$var1 = $_REQUEST['action']; 
$jsonObject = json_decode($_REQUEST['outputJSON']); // Decode JSON object into readable PHP object

$username = $jsonObject->{'username'}; // Get username from object
$password = $jsonObject->{'password'}; // Get password from object

mysql_connect("localhost","root","");  // Conect to mysql, first parameter is location, second is mysql username and a third one is a mysql password
@mysql_select_db("findadeal") or die( "Unable to select database"); // Connect to database called test

$query = "SELECT * FROM restaurant WHERE username = '".$username."' and password = '".$password."'";
$result=mysql_query($query);
$num = mysql_numrows($result);

if ($num != 0) {
$_SESSION['username'] = $username;
} 
else {
    echo "false";        
}

?> 
```

如果有人可以帮助我，那就太棒了！我想我已经在 HTML 端开始了会话，并且 javascript 具有正确的元素，它在 PHP 端弄清楚它是我倾向于迷失自己的地方。我试图让用户 id 在应用程序的各种形式中传递，但是有没有一种方法可以在不需要他们插入的情况下完成？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T21:05:11.077

你有两件事希望完成

1.  为登录用户启动 PHP 会话
2.  在迷你应用程序中携带用户 ID，以便以后可以将其以另一种形式插入到数据库中，而无需用户自己输入

通过将数据存储在[$_SESSION](http://php.net/manual/en/reserved.variables.session.php)数组中，您将可以在用户访问的每个 PHP 脚本中访问该数据。

为了访问会话数组，您必须`session_start();`在访问`$_SESSION`数组之前调用。请记住每次 PHP 执行只调用一次[session_start 。](http://php.net/manual/en/function.session-start.php)如果[session_start](http://php.net/manual/en/function.session-start.php)被多次调用会产生警告或错误（我不记得是哪个）

您可以检查`$_SESSION`数组是否设置为知道会话是否已启动

```
if( !isset( $_SESSION ) ){
    session_start();
}

if( isset( $_SESSION['username'] ) ){
    /* User is logged in */
} 
```

您可能还想看看这个相关的问题[PHP User Authentication with Sessions](https://stackoverflow.com/questions/14881642/php-user-authentication-with-sessions/14882113#14882113)

**答案**：@user2025934

> 1) 一个 session_start(); 必须首先调用一次才能开始数组，然后我将上面示例末尾的 mini php if 语句添加到我想要携带值的所有 php/html 文件的顶部是吗？考虑到这一点，我是否通过上面的代码实现了我所需要的？（我已经用您的更改对其进行了编辑）

是的，添加此代码段将使您能够访问`$_SESSION`放置它的任何页面上的数组。

```
if( !isset( $_SESSION ) ){
    session_start();
} 
```

> 2）另外，有没有办法可以测试它以确保它的工作？为了确保它正常工作，我假设我在第二个 if 语句中添加了一个 echo 函数，在该语句中将输出用户名？–

Echo`ng 像下面这样的一些输出是测试它是否工作的一种或多种方法

```
if( isset( $_SESSION['username'] ) ){
    /* User is logged in */
    echo "It Works! - The user is logged in!";
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T15:04:58.890

放在`session_start();`PHP 文件的顶部。然后当他们成功登录时，您可以这样做：

```
if ($num != 0) {
    $_SESSION['username'] = $username;
} 
```

这会将用户名保存到会话中，以便您可以在会话期间跨 PHP 页面访问用户的用户名。

# git - Git - 允许写访问

> ID：14897375
> 
> 赞同：1
> 
> 时间：2013-02-15T14:59:05.067
> 
> 标签：git

设置一个 git 服务器，多个用户将能够提交更改。

许多相关文档建议给予他们对存储库的写访问权限并使用 SSH 进行访问控制。例如[http://git-scm.com/book/ch4-2.html](http://git-scm.com/book/ch4-2.html)甚至对数百名用户也建议这样做。Gitosis 似乎继续使用相同的方法，允许对存储库进行 SSH 写入访问。

所以我的问题是：

有什么办法阻止某人`ssh server "rm -r /home/git/the_repository"`？

在典型安装中，对共享存储库具有提交权限的人是否真的获得了足够的文件系统访问权限来删除它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T15:09:50.473

实现您想要实现的目标的现代方法是通过[gitolite](https://github.com/sitaramc/gitolite)，它允许您作为 repo 管理员定义相对细粒度的访问规则。

gitolite 通过 ssh 密钥识别用户，因此用户甚至不必拥有对服务器的 shell 访问权限。

根据我的经验， [gitolite 文档](http://sitaramc.github.com/gitolite/master-toc.html)非常好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T15:09:58.150

您不应该允许用户*shell*访问存储库机器。

如果您打算以这种方式进行访问控制，则用户的可运行命令应限制为`git`.

但是，这不会阻止他们做其他讨厌的事情，比如为每个分支推送空 refs。如果您不信任将使用中央存储库的人，您需要一个更细粒度的权限系统。

为此，我会推荐[Gerrit 。](https://code.google.com/p/gerrit/)即使你不使用它进行代码审查，它仍然提供围绕 git 的管理和权限系统。

另一种选择是通过 HTTP 而不是 SSH 推送；HTTP 服务器提供了额外的限制，您可以设置这些限制以避免恶作剧。

# php - 从字符串中删除块引号？

> ID：14897376
> 
> 赞同：0
> 
> 时间：2013-02-15T14:59:05.070
> 
> 标签：php, regex, string

我有一个这样的php字符串：

```
I am a 
  <blockquote> <strong>string</strong> 
    <blockquote> with lot of</blockquote>
  in <a href="#">it</a>
  </blockquote>
hiya! 
```

我需要删除所有块引用以将其转换为：

```
I am a
hiya! 
```

我认为正则表达式可能很有用，但我在 stackoverflow 和谷歌上都找不到任何东西，而且我不知道如何自己写。

有人可以告诉我如何使用 php 做到这一点吗？

（我找到了这个，但不是正则表达式，我不知道它是否也可以将 html 删除到元素中。 [使用 PHP 从字符串中删除 html 元素](https://stackoverflow.com/questions/7529636/using-php-to-remove-a-html-element-from-a-string?rq=1)）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T15:09:47.133

试试这个

```
 $out=preg_replace("~<blockquote(.*?)>(.*)</blockquote>~si","",' '.$str.' '); 
```

# ubuntu - 如何在 ubuntu 中设置路径，以便我可以在终端中运行我的 eclipse-juno

> ID：14897377
> 
> 赞同：0
> 
> 时间：2013-02-15T14:59:13.600
> 
> 标签：ubuntu, .bash-profile

我想在 ubuntu 中设置 PATH var，这样我就可以通过在终端中给出它们的名字来运行我的程序。

我创建了一个文件夹**/home/vignesh/bin**并将我的 eclipse 文件夹保存在那里

在**~/.bashrc**中给出了这个命令：

> 导出 PATH=${PATH}:/home/vignesh/bin/eclipse/eclipse

（我注销并再次登录）但是当我键入 eclipse 时，我在终端中收到以下消息：

当前未安装程序“eclipse”。您可以通过键入以下命令进行安装：apt-get install eclipse-platform

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-19T13:15:36.953

通过添加 eclipse 可执行文件的路径来更新 /etc/environment，如下所示：

1-备份 /etc/environment

2- $sudo nano /etc/environment 例如：PATH="/path1:/path2:/home/sasa/eclipse"

3-然后重新启动计算机

# jquery - jQuery - 从 IMG 标签获取标题属性

> ID：14897380
> 
> 赞同：1
> 
> 时间：2013-02-15T14:59:29.687
> 
> 标签：jquery, click, image, title

我有一个具有不同 TITLE 属性的 IMG 标签列表，如下所示。

```
<img src="avatar1.png" title="Admin" height="90px" width="90px" />  
<img src="avatar2.png" title="Purus" height="90px" width="90px" />  
<img src="avatar3.png" title="Test" height="90px" width="90px" /> 
```

当用户单击图像时，我试图获取 IMG 标记的 TITLE 属性。下面是我用过的 jQuery。

```
$('img').click(function(){  
    alert($(this).attr('title'));  
}); 
```

使用此代码，我将警报显示为“未定义”。我已经尝试搜索，但任何解决方案都对我没有帮助。我在这里哪里出错了？

PS：这是我在这里的第一个问题。所以建议如果我在这篇文章中做错了什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T15:00:09.397

**注意：**此答案基于您最初的答案`$(this).title`- 我相信您已经对其进行了更新`$(this).attr('title')`，应该可以正常工作。下面仍然是推荐的访问方式`title`。

* * *

只需`alert(this.title);` 为此不需要 jQuery。

`this`click 函数内部是 img 元素。它具有src、title、height、width等属性

要访问这些属性，只需使用`this`对象 as`this.src`来获取 src 属性值、`this.title`获取标题等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T15:06:21.400

它的工作，请检查这个[演示](http://jsfiddle.net/rahulJs/WEeme/)

```
$('img').click(function(){  
    alert($(this).attr('title'));  
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-17T06:59:51.223

我在这 3 个 IMG 标签中添加了一个名为“名称”的新属性，并使用下面的代码来实现我所需要的。感谢您对此的所有帮助。

```
$(this).attr('name') 
```

# ios - iOS - 如何检查 UIDocument 是否在 iCloud 的其他地方打开？

> ID：14897382
> 
> 赞同：6
> 
> 时间：2013-02-15T14:59:33.167
> 
> 标签：ios, icloud, uidocument

除了等待冲突发生之外，有没有办法检查是否已使用 iCloud 在其他地方打开了 UIDocument（正在与 iCloud 同步）？

# javascript - draggable 在开始拖动时消失

> ID：14897385
> 
> 赞同：1
> 
> 时间：2013-02-15T14:59:39.213
> 
> 标签：javascript, jquery, jquery-ui

我正在尝试制作浮动面板

```
var self = this;

this.$widget = (function() {
    var $panel = $("#tmpl-float-panel").tmpl({
        title : title
    });

    //close on click on cross
    $panel.find(".ui-dialog-titlebar-close").click(function() {
        self.hide();
    });

    $panel.draggable({
        containment : "parent",
        handle : "div.ui-dialog-titlebar",
        opacity : 0.75
    }).appendTo($container);

    return $panel;
})(); 
```

后来我插入内容

```
this.$widget.find(".ui-dialog-content").append($content); 
```

这是用于构建面板的 jquery 模板：

```
<script id="tmpl-float-panel" type="text/x-jquery-tmpl">
    <div class="ui-widget ui-dialog ui-corner-all ui-widget-content float-panel no-select">
        <div class="ui-dialog-titlebar ui-widget-header ui-helper-clearfix">
            <span class="ui-dialog-title">${title}</span>
            <a class="ui-dialog-titlebar-close ui-corner-all" href="#" role="button">
                <span class="ui-icon"></span>
            </a>
        </div>
        <div class="ui-dialog-content ui-widget-content">
        </div>
    </div>
</script> 
```

这是问题。当我试图拖动面板（单击标题栏并移动鼠标）时，整个小部件都会消失。有人能告诉我为什么吗？

**UPD：**在 chrome 上它不会在点击时消失，但不知何故它会占用所有可能的宽度。

这是 html 包装浮动面板：

```
<div id="idA">
<div id="idB">
<!-- here I have panels and other divs -->
</div>
</div> 
```

在 CSS 我有

```
#idA {
  height: auto !important;
  min-height: 100%;
}

#idB {
  position: absolute;
  width: 100%;
  height: 100%;
  overflow: hidden;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T15:02:30.870

尝试先追加，然后调用可拖动和调整大小：

$panel.appendTo($container).resizable().draggable();

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T15:04:53.287

我有过一次，问题是父 div 有 css 属性`position: absolute`。效果是在我开始拖动它的那一刻，该项目被放置在屏幕右下角。所以首先你认为它已经消失了，但如果你把它拖到左上角它就会出现。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-18T13:36:00.783

在缺少 jsfiddle 的情况下，我根据您提供的代码创建了一个。

在 jsfiddle 中，面板在我测试过的所有浏览器（包括 FF、Safari、Chrome、Opera）中都能正常工作。

我认为您的问题可能与您没有在 jQuery 模板中正确定义 jqueryui 对话框关闭按钮有关，并且单击标题栏可能被误解为“.ui-dialog-titlebar-”上的单击事件关闭”。在我的 jsfiddle 中，我定义了：

```
<a class="ui-dialog-titlebar-close ui-corner-all" href="#" role="button">
    <span class="ui-icon ui-icon-close"></span>
</a> 
```

这可能会有所作为。

这是[**jsfiddle 的链接。**](http://jsfiddle.net/martyk/yCfEa/3/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-19T22:20:38.477

`display: inline-block`我通过添加到浮动面板解决了这个问题

```
<script id="tmpl-float-panel" type="text/x-jquery-tmpl">
    <div style="display: inline-block" class="ui-widget ui-dialog ui-corner-all ui-widget-content float-panel no-select">
        <div class="ui-dialog-titlebar ui-widget-header ui-helper-clearfix">
            <span class="ui-dialog-title">${title}</span>
            <a class="ui-dialog-titlebar-close ui-corner-all" href="#" role="button">
                <span class="ui-icon"></span>
            </a>
        </div>
        <div class="ui-dialog-content ui-widget-content">
        </div>
    </div>
</script> 
```

任何更优雅的解决方案的想法？

# iphone - 跟踪 iOS 中的应用程序使用情况并记录到文件

> ID：14897389
> 
> 赞同：1
> 
> 时间：2013-02-15T14:59:58.050
> 
> 标签：iphone, ios

我正在为 iOS 开发一个 SDK。它基本上通过在任何一个屏幕上放置按钮来帮助开发人员使用我们的服务。不仅如此，我们还提供分析。在网站中，我可以提供一个 javascript 片段，这将帮助我们跟踪使用情况并记录它以进行分析。开发人员可以将它放在任何通用的模板中（比如在 footer.html 中），然后忘记它。在 iOS 中同样的理想方法是什么。基本上我希望开发人员从 AppDelegate 或任何一点启动我们的服务，它应该跟踪使用情况。我想跟踪的数据是

1.  用户id、app版本、app id等（可在库启动时采集）
2.  使用时间（从应用程序打开到进入后台的时间，再次可以轻松跟踪）
3.  Viewcontrollers 加载和从哪里加载（找不到解决方案，除非开发人员从我们的类中扩展 viewcontroller，或者我们编写一个类别。需要一个更好的解决方案，如 AOP 中的）
4.  按钮点击（与第 3 点相同）

对于所有这些，如果我们提供像 call [OurLibrary passFlag:VIEWCONTROLLERLOADED withViewController:self] 这样的解决方案将会有所帮助。但我们不希望开发人员明确地这样做。

想法是让开发人员尽可能轻松地进行集成。有什么想法吗？

# image - gwt celltree 在节点打开/关闭时更改图像

> ID：14897391
> 
> 赞同：1
> 
> 时间：2013-02-15T15:00:00.560
> 
> 标签：image, gwt

我使用 GWT 2.5 用 CellTree 绘制了一棵树，当打开节点时，我想在单元格中的文本之前更改图像。我尝试使用 ImageResource 但没有工作，因为我不想更改图标，只是单元格容器中的图像，可以在 CellTree 中做到这一点吗？

打开和关闭时同一节点中的示例：+ [图像] A - [新图像] A

```
public void render(Cell.Context context, TreeNode value, SafeHtmlBuilder sb) { 
    if (value instanceof TreeNode) { 
        sb.appendHtmlConstant("<div><img src ='/bound.png' width=16 height=16><span class=\"treeElements\">"); 
        sb.appendHtmlConstant(value.getName() + "</span></div>"); 
    } 
```

欢迎任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T10:55:58.550

有两种方法可以解决它：

1.  如果节点是打开的，则检查render方法（检查`CellTreeNodeView`类如何做）并有条件地渲染相应的图像。
2.  使用`cellTreeOpenItem()`混淆的类名（当你打开它时它会在 Cell 上设置）和 CSS 选择器来更改图像（但你可能会使用背景图像而不是 img 元素）。

# php - 使用 3 个 $_GET 值

> ID：14897396
> 
> 赞同：0
> 
> 时间：2013-02-15T15:00:10.247
> 
> 标签：php, get

我对 $_GET 数组有疑问。在我的页面上，一个值来自这样的 URL。

```
http://localhost/search.php?subject=Mathematics 
```

我检查这个 $_GET 值是这样的..

```
// Check for a valid keyword from search input:
if ( (isset($_GET['subject'])) && (is_string ($_GET['subject'])) ) { // From SESSION
    foreach ( $_GET AS $key => $subject) {
        $searchKey = $key;
        $searchKeyword = '%'.$subject.'%';
    }

} else { // No valid keyword, kill the script.
    echo 'This page has been accessed in error.';
    include ('includes/footer.html');
    exit();
} 
```

现在它为我工作。但我的问题是我正在使用另外两个变量通过同一页面上的 URL 来过滤我的数据库值。

```
echo '<li><a href="?tutor=link">Tutor</a></li>
      <li><a href="?institute=link">Institute</a></li>'; 
```

这两个链接我用来过滤我的数据库值（单击此链接）。

```
$tutor = isset($_GET['institute']) ? '0' : '1'; 
$institute = isset($_GET['tutor']) ? '0' : '1'; 
```

我的问题是当我尝试过滤数据库结果时，单击上面的链接它总是使用此代码而不是显示过滤结果。

```
} else { // No valid keyword, kill the script.
    echo 'This page has been accessed in error.';
    include ('includes/footer.html');
    exit();
} 
```

谁能告诉我如何使用这 3 个 $_GET 值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T15:03:18.843

为什么不在`else`:中添加一个子句

```
elseif(!isset($_GET['institute']) && !isset($_GET['tutor'])) 
{
    echo 'This page has been accessed in error.';
    include ('includes/footer.html');
    exit();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T15:06:00.507

您的问题是您只检查 $_GET['subject'] 变量，该变量没有被传入。您可以通过几种方式执行此操作，所有这些都会导致更改：

```
if ( (isset($_GET['subject'])) && (is_string ($_GET['subject'])) ) { // From SESSION 
```

1）在条件字符串中包含所有变量：

```
if ( ((isset($_GET['subject'])) && (is_string ($_GET['subject']))) || ((isset($_GET['institute'])) && (is_string ($_GET['institute']))) || ((isset($_GET['tutor'])) && (is_string ($_GET['tutor']))) ) { 
```

2）在所有链接中传入 searchKey=1 或其他内容并使用：

```
if ( isset($_GET['searchKey']) ) { // From SESSION 
```

修改链接：

```
echo '<li><a href="?searchKey=1&amp;tutor=link">Tutor</a></li>
      <li><a href="?searchKey=1&amp;institute=link">Institute</a></li>'; 
```

如果您希望一次传递多个变量，则需要将搜索键放入一个数组中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T15:06:10.520

您的问题似乎不是，您正在进入`else`循环（或者更好地说：不是*唯一*的问题）。看起来您的第一个参数在第二个链接中丢失了。我认为，第二个链接应该像某种扩展搜索过滤器一样反应，应该应用于最近显示的内容，或者我完全理解你的错误？

也许这可以解决您创建后续 URL 的问题。

```
$params = array();

foreach($_GET as $key => $value) {
  $params[] = '&'.$key.'='.$value;
}

$url1 = '?tutor=link'.implode('', $params);
$url2 = '?institute=link'.implode('', $params); 
```

当您输出链接时：

```
echo '<li><a href="'.$url1.'">Tutor</a></li>
      <li><a href="'.$url2.'">Institute</a></li>'; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-15T15:02:49.983

您需要确保 url 看起来像这样：

```
http://localhost/search.php?subject=Mathematics&tutor=tutorName&institute=instituteName 
```

A`?`表示 URL 参数的开头，an`&`标记 url 参数之间的分隔

# xml - 在 PostgreSQL 中使用带有准备好的语句的 query_to_xml

> ID：14897398
> 
> 赞同：0
> 
> 时间：2013-02-15T15:00:13.780
> 
> 标签：xml, postgresql, prepared-statement

我正在使用 PostgreSQL 的函数 query_to_xml 函数来生成查询结果的 XML。

```
SELECT * FROM query_to_xml( 'SELECT * from some_table WHERE id = ?',true,false,'') 
```

问题是，当我从 JDBC 使用它时，使用准备好的语句“？” 被忽略，所以 Postgres 说：

```
"The column index is out of range..." 
```

是否有任何可能的解决方案将参数传递给这样的查询？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T15:04:43.813

`?`尝试将字符串文字移到外部：

```
SELECT * FROM query_to_xml( 'SELECT * from some_table WHERE id = '||?,true,false,'') 
```

# ios - 一个类似于 Any.do app iOS 的 UI 应该如何布局？

> ID：14897399
> 
> 赞同：-2
> 
> 时间：2013-02-15T15:00:20.077
> 
> 标签：ios, user-interface, uitableview

应该如何为 iOS 布局 Any.do 应用程序 UI？

我真的很困惑 Any.do 如何在表格视图控制器或滚动视图中制作他们的 UI.... 或者它是 Collection 可重用视图？

你们有什么想法来布局那种类型的 UI。在这种情况下，我认为故事板不会很好地工作。

谢谢。我很感激你们的帮助。

链接： [http ://www.148apps.com/wp-content/uploads/2012/06/Any.DO-White.jpg](http://www.148apps.com/wp-content/uploads/2012/06/Any.DO-White.jpg) [https://itunes.apple.com/us/app/any.do/id497328576](https://itunes.apple.com/us/app/any.do/id497328576)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T16:53:46.117

“今天”、“明天”、“下周”视图（从应用程序的工作方式来看）显示为 UITableView 部分标题。点击部分标题可展开或折叠该部分中的行。Apple 有一个演示项目“Table View Animations and Gestures”，展示了他们如何做到这一点。

# java - 阿帕奇公地| 池或池2

> ID：14897403
> 
> 赞同：3
> 
> 时间：2013-02-15T15:00:26.300
> 
> 标签：java, apache, apache-commons, apache-commons-dbcp

我只是想使用来自 apache commons-dbcp.jar 的 DataSource。为此，我刚刚下载了他们的一个示例。到目前为止，一切都很好。示例为（[this](http://svn.apache.org/viewvc/commons/proper/dbcp/trunk/doc/PoolingDataSourceExample.java?view=markup)）

```
// Here are the dbcp-specific classes.
 // Note that they are only used in the setupDataSource
// method. In normal use, your classes interact
// only with the standard JDBC API
//
  import org.apache.commons.pool2.ObjectPool;
  import org.apache.commons.pool2.impl.GenericObjectPool;
  import org.apache.commons.dbcp2.ConnectionFactory;
  import org.apache.commons.dbcp2.PoolingDataSource;
  import org.apache.commons.dbcp2.PoolableConnectionFactory;
  import org.apache.commons.dbcp2.DriverManagerConnectionFactory; 
```

没有什么是错的，除了而不是从

```
 import org.apache.commons.pool 
```

他们从

```
 import org.apache.commons.pool2 
```

好吧，我花了几分钟，添加和读取所需的 jar，然后我才能弄清楚他们实际上导入了与他们在 jar 中提供的不同的包名称。

好吧，我仍然很困惑，这只是一个错误还是一些故意的神秘原因（在这种情况下，我想知道，这就是问题所在）。

请来自 apache-commons 的专家评论？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-01-05T20:14:00.977

DBCP 和 Pool 都发布了 2.x 版本。由于 2.x 版本中存在兼容性问题，因此更改了包名称。更改包名称允许 1.x 和 2.x 版本在类路径上共存。鼓励用户升级到最新的 2.x 版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T15:20:13.623

apache commons 团队正在开发 2.0 版本。更多信息可以在路线图上找到： [http](http://wiki.apache.org/commons/PoolRoadMap) ://wiki.apache.org/commons/PoolRoadMap 。

# android - 有没有办法以编程方式禁用特定应用程序的“显示通知”检查？

> ID：14897406
> 
> 赞同：2
> 
> 时间：2013-02-15T15:00:28.227
> 
> 标签：android, notifications, admin

有没有办法以编程方式禁用特定应用程序的“显示通知”检查？

这个检查在这里：设置->应用程序->单击列表中的任何应用程序->显示通知

我需要做一个程序来禁用或启用此检查以显示特定应用程序的用户通知。事实上，它不适合我，我使用哪种方法，我只需要禁用或启用特定应用程序（或所有应用程序）的通知。我的应用程序具有设备管理员权限，因此不会有问题。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T15:39:07.553

不，如果这是一个选项，每个开发人员都会重新启用他自己显示通知的选项

您可以将用户发送到设置的应用页面，让他检查或取消选中该选项

# c# - 最大大小分配字节数组紧凑框架

> ID：14897413
> 
> 赞同：-1
> 
> 时间：2013-02-15T15:00:45.893
> 
> 标签：c#, size, compact-framework, bytearray, webservice-client

**紧凑型框架语言：C# FrameWork 3.5**

我有一个客户端（掌上电脑），我想将数据发送到 Web 服务 REST（https 连接）。我需要上传几兆字节的大文件，然后通过将文件分成块来建立多个连接。我愿意：

```
 byte[] formData = new byte[...];
 formDataStream.Read(formData, 0, (int) formDataStream.Length); 
```

紧凑框架中有一个参数告诉我，根据使用的设备，我可以在*formData中分配的最大大小是多少？*如果是，我可以使用什么库来获取此参数？通过这种方式，我可以将文件拆分为默认大小的块。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T15:10:57.087

没有库可以告诉您可以分配的最大数组是多少，因为该数字不固定。这取决于您要进行分配的确切时间设备上的可用内存和堆碎片。您最好的选择是根据您的典型设备状态选择一个合理的大小，我可能会选择 64k，然后尝试从那里“调整”它，看看什么能给您带来最佳性能。

# linux - 在文件列表中查找正则表达式

> ID：14897418
> 
> 赞同：0
> 
> 时间：2013-02-15T15:01:12.413
> 
> 标签：linux, perl, sed, grep, csh

我在一个目录中有几个头文件，格式为 imageN.hd，其中 N 是某个整数。这些头文件中只有一个包含文本“trans”。我要做的是使用 csh 查找包含此表达式的图像（为此我需要使用 csh - 尽管我可以调用 sed 或 perl 单行）并显示相应的图像。 `show iN`

这是我最初的简单方法，它不起作用。

```
#find number of header files in directory
set n_images = `ls | grep 'image[0-9]*.hd' | wc -l`
foreach N(`seq 1 n_images`)
if (`more image$N{.hd} | grep -i 'trans`) then
show i$N
sc c image   #this command uses an alias to set the displayed image as current within the script
endif
end 
```

我不确定上述命令有什么问题，但它没有返回正确的图像编号。

另外我确信有一个更优雅的单行 perl 或 sed 解决方案，但我对两者都不太熟悉

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T15:06:36.377

```
show `grep -l trans image[0-9]*.hd | sed 's/image/i/` 
```

# javascript - 通过jquery全选

> ID：14897419
> 
> 赞同：1
> 
> 时间：2013-02-15T15:01:12.643
> 
> 标签：javascript, jquery

我想通过jquery全选和取消全选。我想要以下结构。当我单击全选时，将选择所有输入并单击取消选择它将删除所有部分。

有人解决这种问题吗？

```
<table>
<tr>
<td>
<ul>
<li>

<label for="ck"><input type="checkbox" name="country" value="ALL"/> SELECT ALL</label>
</li>

<li>

<label for="ck"><input type="checkbox" name="country" value="CD"/> CD</label>
</li>

<li>

<label for="ck"><input type="checkbox" name="country" value="ED"/>ED</label>
</li>

<li>

<label for="ck"><input type="checkbox" name="country" value="DD"/>DD</label>
</li>
<li>

<label for="ck"><input type="checkbox" name="country" value="FD"/>FD</label>
</li>
<li>

<label for="ck"><input type="checkbox" name="country" value="SD"/>SD</label>
</li>
</ul>
<td>
</tr>
</table> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-15T15:03:36.300

### 简单的

```
$("input:checkbox[value=ALL]").change(function() {
    $("input:checkbox[name=" + $(this).prop("name") + "]").prop("checked", $(this).prop("checked"));
}); 
```

应该可以正常工作。

[**演示**](http://jsfiddle.net/H9unt/)

* * *

### 先进的

如果您想获得更高级的信息并取消选中“全部”（如果它已打开并且它们没有全部选中），您可以执行以下操作：

```
$("input:checkbox[value=ALL]").change(function() {
    $("input:checkbox[name=" + $(this).prop("name") + "]").prop("checked", $(this).prop("checked"));
});
$("input:checkbox[value!=ALL]").change(function() {
    var allCheckboxesAreChecked = true;
    $("input:checkbox[name=" + $(this).prop("name") + "][value!=ALL]").each(function() {
        if (!$(this).prop("checked")) {
            allCheckboxesAreChecked = false;
            return false;
        }
    });
    $("input:checkbox[name=" + $(this).prop("name") + "][value=ALL]").prop("checked", allCheckboxesAreChecked);
}); 
```

如果已取消选择子项，这将取消选择“全部”，如果已选择所有子项，它将选择“全部”。

[**演示**](http://jsfiddle.net/H9unt/2/)

# c# - 如何从for循环中获取Excel的单元格范围

> ID：14897422
> 
> 赞同：0
> 
> 时间：2013-02-15T15:01:17.553
> 
> 标签：c#, excel

我正在尝试获取 for 循环中指定的值，然后将它们用作从 Excel 获取的单元格范围。这里出了什么问题？

```
List<string> str = new List<string>();

        // The follwing increments by 4, and starts at 25

        for (int i = 25; i <= lastRow; i += 4) // += means a + b
        {
            str = ws.Range["B"+i].Value;
         } 
```

...

```
 SeriesCollection seriesCollection_mySeries = xlChart.SeriesCollection();
 Series series1 = seriesCollection_mySeries.NewSeries();

 series1.Values = str 
```

;

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T15:24:32.893

我认为您的问题应该得到澄清，但这可能会有所帮助：

```
for (int i = 25; i <= lastRow; i += 4) // += means a + b
{
    string cellName = "B" + i.ToString();
    string cellValue = (string)ws.Range[cellName].Value;
    str.Add(cellValue);
} 
```

# vba - WorksheetFunction.CountA 没有返回正确的值

> ID：14897423
> 
> 赞同：1
> 
> 时间：2013-02-15T15:01:23.197
> 
> 标签：vba, excel

我要做的是遍历包含工作表名称的范围，如果单元格不为空，则将`CountA`函数的结果添加到 count 变量中。

所以计数变量应该等于`B9:B28`我正在迭代的工作表范围内的非空白单元格的数量，但奇怪的是，该值等于我正在经历的范围内的非空单元格的数量（`sheet1!d5:d24`）。

我究竟做错了什么？这是我正在使用的代码：

```
For Each c In Worksheets("Sheet1").Range("d5:d24").Cells
    If Not IsEmpty(c) Then
        count = count + WorksheetFunction.CountA(c & "!b9:b28")
    End If
Next 
```

我尝试了一种替代方法来遍历第二个范围，如果单元格不为空，则将变量增加 1，但这会导致*运行时错误 13 类型不匹配*错误。这就是我现在正在做的事情：

```
 For Each c In Worksheets("Sheet1").Range("d5:d24")
    If Not IsEmpty(c) Then
        For Each c2 In Worksheets(c).Range("b9:b28")
            If Not IsEmpty(c2) Then
                'count = count + WorksheetFunction.CountA(c & "!b9:b28")
                count = count + 1
            End If
        Next
    End If
Next 
```

请帮帮我。非常感谢所有抽出时间回复的人。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T15:27:34.697

基于@Peter Albert 和@Peter L. 的评论，终于让它工作了。正确的代码是：

```
For Each c In Worksheets("Sheet1").Range("d5:d24").Cells
If Not IsEmpty(c.Value) Then
    count = count + WorksheetFunction.CountA(c.Value & "!b9:b28")
End If
Next 
```

非常感谢大家:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T15:22:35.793

试试这个：

```
Sub CountColBForColD()
Dim c As Range
Dim r As Long   'row counter
Dim rngB As Range
Dim rngD As Range
Dim lookSheet As Worksheet

Set rngD = Sheets("Sheet1").Range("D5:D24")
Set rngB = Range("B9:B28")
r = 1

For Each c In rngD
    If Not IsEmpty(c) Then
        On Error GoTo InvalidSheetName
        Set lookSheet = Sheets(rngB(r).Value)
        On Error GoTo 0
        Count = Count + WorksheetFunction.CountA( _
            lookSheet.Range(rngB.Address))
            c.Offset(0, 1).Value = Count
            r = r + 1
    End If
NxtC:
Next

Exit Sub

InvalidSheetName:
Err.Clear
MsgBox "Sheet named in  " & rngB(r).Address & " does not exist.", vbInformation
Resume NxtC

End Sub 
```

# c# - 计时器对象 Windows 应用程序

> ID：14897425
> 
> 赞同：0
> 
> 时间：2013-02-15T15:01:26.437
> 
> 标签：c#, timer, windows-store-apps

我在这里阅读了一篇单独的文章，解释了如何在 Windows 窗体应用程序中制作简单的文本动画。下面的代码以一种形式完美运行。但是，我正在创建一个 Windows 应用商店应用程序，但它不起作用。计时器类无法识别，因此，代码不起作用。我需要制作一个计时器类，还是应该使用其他一些类？如果我需要做一个计时器课，我该怎么做？谢谢你。

```
 public partial class Form1 : Form
    {
    public Form1()
    {
        InitializeComponent();
        t = new Timer();
        t.Interval = 40;
        t.Tick += new EventHandler(t_Tick);
    }

    private void textBox1_TextChanged(object sender, EventArgs e)
    {

    }

    string stuff = "This is some text that looks like it is being typed.";
    int pos = 0;
    Timer t;

    void t_Tick(object sender, EventArgs e)
    {
        if (pos < stuff.Length)
        {
            textBox1.AppendText(stuff.Substring(pos, 1));
            ++pos;
        }
        else
        {
            t.Stop();
        }
    }

    private void button1_Click_1(object sender, EventArgs e)
    {
        pos = 0;
        textBox1.Clear();
        t.Start();
    }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T15:04:00.733

WinForms`Timer`在 Windows 应用商店应用程序中不可用。你可以[`DispatcherTime`](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.dispatchertimer.aspx)改用。

```
dispatcherTimer = new DispatcherTimer();
dispatcherTimer.Tick += dispatcherTimer_Tick;
dispatcherTimer.Interval = new TimeSpan(0, 0, 1);
dispatcherTimer.Start();

void dispatcherTimer_Tick(object sender, object e) {

} 
```

# python - 使用 xml.dom.minidom 计算 python 中 xml 标记的数量

> ID：14897426
> 
> 赞同：2
> 
> 时间：2013-02-15T15:01:34.020
> 
> 标签：python, xml, xml-parsing

我的 XML 文件 test.xml 包含以下标签

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<AppName>
    <author>Subho Halder</author>
    <description> Description</description>
    <date>2012-11-06</date>
        <out>Output 1</out>
        <out>Output 2</out>
        <out>Output 3</out>
</AppName> 
```

`<out>`我想计算标签出现的次数

到目前为止，这是我编写的 python 代码：

```
from xml.dom.minidom import parseString
file = open('test.xml','r')
data = file.read()
file.close()
dom = parseString(data)
if (len(dom.getElementsByTagName('author'))!=0):
    xmlTag = dom.getElementsByTagName('author')[0].toxml()
    author = xmlTag.replace('<author>','').replace('</author>','')
    print author 
```

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-15T15:04:24.237

尝试[`len(dom.getElementsByTagName('out'))`](http://docs.python.org/2/library/xml.dom.html#document-objects)

```
from xml.dom.minidom import parseString
file = open('test.xml','r')
data = file.read()
file.close()
dom = parseString(data)
print len(dom.getElementsByTagName('out')) 
```

给

```
3 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T15:07:24.827

我建议使用 lxml

```
import lxml.etree
doc = lxml.etree.parse(test.xml)
count = doc.xpath('count(//out)') 
```

[您可以在此处](http://infohost.nmt.edu/tcc/help/pubs/pylxml/web/xpath.html)查找有关 XPATH 的更多信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-12-17T17:56:10.913

如果你愿意，你也可以使用[ElementTree](https://docs.python.org/2/library/xml.etree.elementtree.html)。使用下面的函数，您将获得一个字典，其中标签名称作为键以及此标签在您的 XML 文件中出现的次数。

```
import xml.etree.ElementTree as ET
from collections import Counter

def count_tags(filename):
        my_tags = []
        for event, element in ET.iterparse(filename):
            my_tags.append(element.tag)
        my_keys = Counter(my_tags).keys()
        my_values = Counter(my_tags).values()
        my_dict = dict(zip(my_keys, my_values))
        return my_dict 
```

# jquery - 这个 jQuery .get 语句语法有什么问题？

> ID：14897432
> 
> 赞同：0
> 
> 时间：2013-02-15T15:01:56.573
> 
> 标签：jquery, ruby-on-rails-3

我正在尝试使用 jQuery 调试这个简单的 .get 请求。由于某种原因，警报没有触发：

```
$.get("/count", { room_key: roomKey, groom_id: groomId, user_id: userId }, function(data) {
    alert('Load was performed.');
    }); 
```

当我在 Firebug 和我的服务器日志中查看请求时，一切都按预期工作......除了触发警报（即，服务器以预期信息响应 - 它是 JSON 数据数组。）

编辑1

我提炼了这个问题......响应由两个 JSON 数据数组组成，如下所示：

```
[{"total"=>0}][{"room"=>"room name"}] 
```

当我删除第一个数组或第二个数组时，回调会触发。

有什么想法吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T15:14:02.007

您的 json 必须是有效的，否则 jQuery 将响应“parseerror”消息。

[http://jsonlint.com](http://jsonlint.com)

```
[{"total":0},{"room":"room name"}] 
```

# javascript - html输入字段限制为手机上的数字

> ID：14897435
> 
> 赞同：0
> 
> 时间：2013-02-15T15:01:59.900
> 
> 标签：javascript, jquery, html

我有一个输入字段，我只想输入数字 0 - 9 而没有别的。它是一个移动网站，因此它在手机上运行很重要。我发现以下代码在台式机上完美运行，但在手机上没有任何作用。

```
$("#phone").keypress(function (event) {
    var code = (event.keyCode ? event.keyCode : event.which);
    if (code < 48 || code > 57) event.preventDefault();
}); 
```

有谁知道我如何在手机上实现与上面的代码相同的功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T15:14:04.673

这是关于关键代码

```
/*Only number*/
 $(".numb").keydown(function(event) {
            if ( event.keyCode == 190 || event.keyCode == 46 || event.keyCode == 8 || event.keyCode == 9 || event.keyCode == 27 || event.keyCode == 13 || (event.keyCode == 65 && event.ctrlKey === true) || (event.keyCode >= 35 && event.keyCode <= 39)) {

        if(event.keyCode == 190){
            if($(this).val().indexOf('.')!=-1){
                  event.preventDefault();
                }

            }
        return;
    }
    else {

        if (event.shiftKey || (event.keyCode < 48 || event.keyCode > 57) && (event.keyCode < 96 || event.keyCode > 105 )) {

            event.preventDefault();
            }
    }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T15:05:21.863

html5 引入了一些您可以使用的新输入类型：

```
<input type="number" name="phone" /> 
```

见[http://www.w3schools.com/html/html5_form_input_types.asp](http://www.w3schools.com/html/html5_form_input_types.asp)

# c# - 在 C# 中处理失败的文件和目录操作

> ID：14897438
> 
> 赞同：1
> 
> 时间：2013-02-15T15:02:03.193
> 
> 标签：c#, file-io, error-handling, installation

**问题：**在安装过程中，文件和文件夹被创建、移动和重命名。服务也在安装过程中启动和停止，这可能导致一个或多个文件或文件夹出现锁定问题。我有一个避免大多数锁定情况的解决方案，但想要一种不会浪费时间或 CPU 的更好方法，并且可以防止用户尽可能多地处理 Abort/Retry/Ignore 对话框。

**背景：**在最佳方案中，处理服务启动和停止的逻辑以及其他将锁定文件和文件夹的操作将阻止锁定在安装程序的创建/移动/重命名部分发生时仍然存在。在这种情况下，我无法控制安装过程的这些部分，但是当文件或文件夹无法更改时，我确实需要尽可能避免显示用户错误对话框。

我无法简单地长时间循环，因为存在第三方应用程序锁定必要资源的合法错误情况，我们需要能够及时向用户显示此信息，并向他们显示有关违规进程的信息. 但是，我的用例中有很多误报，我想尽量减少用户干预。

我目前的解决方案看起来像这样：

```
private const int MaxRetry = 3;
private const int RetryDelayMs = 250;

private static bool DoAction(FileSystemAction action, String src, String dest = "")
{
    bool retval = false;
    bool inprogress = true;

    // (Re)Attempt to perform the desired action until the user aborts.
    while (inprogress)
    {
        try
        {
            // Automatically retry N times with a delay of M milliseconds.
            // This is meant to reduce the number of times a user sees an error dialog.
            var autoretry = true;
            var retryCounter = 0;
            while (autoretry)
            {
                try
                {
                    // CODE: Attempt to perform the file system action.

                    // Only get here if we succeeded.
                    autoretry = false;
                }
                catch (Exception)
                {
                    // If this operation failed, try a few times.
                    if (retryCounter >= MaxRetry)
                        throw;
                    retryCounter++;
                    Thread.Sleep(RetryDelayMs);
                }
            }

            // If we get here without exception, success!
            inprogress = false;
            retval = true;
        }
        catch (Exception ex)
        {
            // Since there was an error, we now do the following:
            //   - Determine if locked files are the cause.
            //   - If locked files are the cause:
            //       - Show a custom Locked File dialog, providing information.
            //   - Otherwise:
            //       - Select message string based on action to inform the user.
            //       - Allow the user to Retry/Abort/Ignore the failed operation.

            // CODE: Logic goes here.
        }
    }

    return retval;
} 
```

当我第一次编写这个逻辑时，我在这里浏览了几个处理锁定文件和失败文件系统操作的例子；但是，我对这个解决方案并不满意，因为它不会阻止用户在所有误报情况下（存在竞争条件）看到对话框。在不重写有问题的服务逻辑的情况下改进这一点有什么想法吗？

# symfony - Symfony2 检查记录的用户属性、当前路由和重定向

> ID：14897440
> 
> 赞同：1
> 
> 时间：2013-02-15T15:02:16.040
> 
> 标签：symfony, listeners

我正在寻找放置我的逻辑以检查登录用户是否具有特定属性并检查当前路线的最佳位置。基于此，我想将用户重定向到特定路线。

我的用户扩展了奏鸣曲用户并具有额外的方法，例如：

```
class User extends BaseUser
{
    /**
     * @return boolean
     */
    public function hasProperty()
    {
        ... 
```

此外，我有一条路线：

```
route_a:
    pattern: /a
route_b:
    pattern: /b 
```

而如果：

```
if ($user->hasProperty() && $currentRoute == 'route_a') {
    redirectTo('route_b');
}
if (!$user->hasProperty() && $currentRoute != 'route_a') {
    redirectTo('route_a');
} 
```

我尝试在 kernel.controller 事件的侦听器中执行此操作，在此侦听器中，我调用了类似 init() 控制器方法的方法，并将该逻辑放入此方法中。它工作正常，但我无法重定向响应。

这种逻辑的最佳位置是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T11:06:13.120

您是否尝试过此解决方案：[如果用户已登录，则重定向](https://stackoverflow.com/questions/10487557/symfony-2-redirect-if-the-user-is-logged-in)

您必须在 Bundle 中创建一个 Listener 类并将此侦听器定义为服务。

# c# - if 和 else 条件都被执行

> ID：14897441
> 
> 赞同：-2
> 
> 时间：2013-02-15T15:02:23.117
> 
> 标签：c#, winforms, if-statement

我正在处理 Windows 窗体。我面临着非常奇怪的问题。

在其中一个按钮事件处理程序中，我应用了 if 和 else 条件。

问题是 if 条件和 else 条件都被执行了。

有人能指出我哪里错了吗？

```
private void button1_Click(object sender, EventArgs e)
        {
            if (radioButton1.Checked == true && checkEbayName(textBox1.Text) == true )
            {
                DataSet ds = GetUserByEbayName(textBox1.Text);
                if (ds == null)
                    {
                        return;
                    }
                dataGridView1.DataSource = ds.Tables["Customer"];

            }

            if (radioButton2.Checked == true && checkName(textBox1.Text) == true)
            {
                DataSet ds = GetUserByName(textBox1.Text);
                //if (checkCustomer(textBox1.Text, textBox2.Text) == true)
                //{
                if (ds == null)
                {
                    return;
                }
                dataGridView1.DataSource = ds.Tables["Customer"];
            }

            else
            {
                MessageBox.Show("No Customer with matching details");
            }

        } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-15T15:03:39.243

如果第一个`if`没有执行，你的 else 将被解雇。我怀疑你想用`else if`你的第二个`if`。

正如您的代码所代表的那样，第一个`if`可能评估为真。然后逻辑就会落入第二个`if`。如果不满足该条件，`else`则将执行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T15:05:09.957

也许你在第一个 if 中遗漏了一个 return 语句？

```
if (radioButton1.Checked == true && checkEbayName(textBox1.Text) == true )
{
    DataSet ds = GetUserByEbayName(textBox1.Text);
   if (ds == null)
   {
        return;
   }

   dataGridView1.DataSource = ds.Tables["Customer"];
   return;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T15:06:33.547

如果`radiobutton1`选中，则执行第一个条件，如果`ds is not null`您的代码不返回但检查第二个 if。如果两个单选按钮互斥，则这不能为真，否则将执行。

如果您想在网格没有客户的情况下显示一个消息框，您可以重写代码以在最后检查空 ds

```
DataSet ds = null;
if (radioButton1.Checked == true && checkEbayName(textBox1.Text) == true )
{
    ds = GetUserByEbayName(textBox1.Text);
    if (ds != null)
        dataGridView1.DataSource = ds.Tables["Customer"];
}
else if (radioButton2.Checked == true && checkName(textBox1.Text) == true)
{
    ds = GetUserByName(textBox1.Text);
    if (ds != null)
        dataGridView1.DataSource = ds.Tables["Customer"];
}

// Show the user that we have not found customers not by ebayname or username
if(ds == null)
    MessageBox.Show("No Customer with matching details"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-15T15:08:06.883

如果满足匹配 if 的条件，则永远不会执行 else。但是，您必须将 if 分开，而第二个不取决于第一个。您的代码的简化版本是

```
if(a){
   if(d) {
      return;
   }
}

if(b){}
else{
} 
```

在 a 或 d 为假的情况下，执行将进入第二个 if。如果 b 也是假的，那么 else 将被执行。

如果您打算仅在 a 和 b 都为 false 的情况下执行 else，那么您必须执行以下操作

```
if (radioButton1.Checked == true && checkEbayName(textBox1.Text) == true ) {
 //...

} else if (radioButton2.Checked == true && checkName(textBox1.Text) == true) {
  //...
} else {
            MessageBox.Show("No Customer with matching details");
} 
```

# informatica - Informatica 中事实表的增量加载

> ID：14897444
> 
> 赞同：0
> 
> 时间：2013-02-15T15:02:30.290
> 
> 标签：informatica

我正在执行 SCD 类型 1 映射。我有这些源表。

```
1.CUSTOMERS, (Source customer File)
2.PRODUCTS (Source Product File)
3.SALES   (source Sales file) 
```

此外，这些是维度和事实表。

```
1.D_CUSTOMERS (SCD 1),
2.D_PRODUCTS (SCD 1) and
3.F_SALES_DLY (Fact) 
```

销售额包含每日级别数据。事实表将汇总产品和一个月的销售和数量数据。（事实表应该是 24 个月的增量数据。（它应该始终包含 24 个月的数据）

我有点困惑，如何使事实表增量？如果我尝试使用任何转换（过滤器）来获取最近 24 个月的记录，这是可行的解决方案吗？

请给我一些建议。。

谢谢...

# java - Java 中 Import 语句中 * 的使用

> ID：14897448
> 
> 赞同：3
> 
> 时间：2013-02-15T15:02:35.113
> 
> 标签：java, import

有人可以解释一下 Java 中的 import 语句吗？有些导入带有 * 后缀，有些则没有。这两者有什么区别？在 import 语句中使用 * 是否会导入所有类？

看这里[导入](http://beginwithjava.blogspot.in/2008/06/import-statements.html)

在这里，他们说过，尽管 import 语句似乎是嵌套的，但事实并非如此。有人可以详细解释一下吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-15T15:04:26.847

使用`*`被认为是一种不好的做法。它用于导入该包中的所有文件。更正确的方法是列出您需要的每个类，特别是在您在 IDE 之外进行代码审查并且需要知道您正在使用的类的版本的情况下。从本质上讲，它滋生了开发团队的懒惰。

**评论**

对于那些认为这不是我所说的“坏”做法的人。你怎么能说这是一个好习惯呢？

```
import java.util.*;  
import java.io.*; 
```

即使编译器忽略了`*`除了`List`您导入的之外的所有内容，这对将来查看代码的人有何帮助？我认为这里的很多人都忘记了您正在为人类而不是计算机编写代码。此外，当 Java 消失并且您使用 SuperAwesomeLanguage 时，您怎么可能转换此代码？鉴于以下示例，当您对 java 的了解为零时，请将其转换为您的新语言：

```
public class Foo  
{
    private List list;
} 
```

`List`在吗`io`？甚至是`io`必需的？问题是你不知道。因此，通过明确，您可以指导未来的开发人员了解需要哪些类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T15:06:26.713

从您的链接：

> 导入 java.util.*；
> 
> * 是一个“正则表达式运算符”，它将匹配任何字符组合。因此，此导入语句将导入 java.util 中的所有内容。如果您尝试过输入并运行上面的示例程序，您可以将 import 语句更改为这个。

所以是 * 后缀导入此路径中的所有类

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-15T15:06:37.500

```
import com.example.* 
```

导入 com.example 包中的所有类

```
import com.example.ClassName 
```

只导入 ClassName 类

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-15T15:03:16.187

> 在 import 语句中使用 * 是否会导入所有类

是的。

[来自 Oracle 的文档：](http://docs.oracle.com/javase/specs/jls/se7/html/jls-7.html#jls-7.5)

> 按需类型导入声明允许根据需要导入命名包或类型的所有可访问类型。

# vb.net - VB.net 迭代结构和设置数据类型

> ID：14897452
> 
> 赞同：1
> 
> 时间：2013-02-15T15:02:45.450
> 
> 标签：vb.net, visual-studio-2012

我在整个代码中多次使用以下结构将一组数据传递给函数：

```
Public Structure MyStruct
    Dim ResourceID As String
    Dim RSRCName As String
    Dim CommercialType As String
    Dim ParticipantName As String
    Dim ASReserveZone As String
    Dim SCADAStatusQuality As String
    Dim SCADAStatus As String
    Dim SCADAMWQuality As String
    Dim ManualDispatchReason As String

    Dim RegUpQual As Boolean
    Dim RegDownQual As Boolean
    Dim SuppQual As Boolean
    Dim SpinQual As Boolean
    Dim UseEmergencyLimits As Boolean
    Dim FollowLastDispatch As Boolean

    Dim ASOfferCurveDict As HybridDictionary

    Dim XIC As Integer
    Dim PriceBased As Integer
    Dim PNodeID As Integer
    Dim Committed As Integer
    Dim CommitmentStatus As Integer
    Dim ManualDispatch As Integer
    Dim LastApprdNumOfIntervalsToMax As Integer

    Dim MWCurve() As Double
    Dim EnergyOfferCurve() As Double
    Dim PlannedMW As Double
    Dim SCADAMW As Double
    Dim InitialOnHours As Double
    Dim LastApprdDispatchMW As Double
    Dim TotalRampedCRDeployMW As Double
End Structure

Dim Struct as MyStruct 
```

我可以`Struct = Nothing`用来重置数据，但我宁愿遍历结构并将所有数值设置为`999999999`. 知道怎么做吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T15:13:27.483

您可以通过反射来做到这一点，但我不一定会推荐它。我宁愿在结构中添加一个`Clear`or`Reset`方法，将所有值设置为其默认值。另一种选择是在声明字段时设置默认值：

```
Public Structure MyStruct
    ' ...
    Dim XIC As Integer = 999999999
    Dim PriceBased As Integer = 999999999
    Dim PNodeID As Integer = 999999999
    ' ...
End Structure 
```

然后，要将变量重置为所有默认值，只需执行以下操作：

```
myVariable = New MyStruct() 
```

我还应该提一下，除非出于某种原因它确实需要成为一个结构，否则您应该将其更改为一个类。一直在堆栈上传递的数据非常多。

# html - 在另一个动态 div 中水平居中动态宽度 div

> ID：14897456
> 
> 赞同：0
> 
> 时间：2013-02-15T15:03:06.650
> 
> 标签：html, css

一个看似简单的问题，但我发现的其他解决方案在这里并不奏效。

试图在 '.grid-wrapper' 中居中 '.grid-wrapper-inner'

```
.grid-wrapper {
    background:grey;
    display:block;
    margin:0 auto;
    width:90%;
    padding:80px 0;
    text-align:center;
    }

.grid-wrapper-inner {
    background:yellow;
    display:inline-block;
    margin:0 auto;
    text-align:left;
    } 
```

我认为'display：inline-block'（在父级上带有'text-align：center'）会实现这一点，但已经碰壁了

最好在这里解释：

[http://jsfiddle.net/YrF9C/1](http://jsfiddle.net/YrF9C/1)

本质上需要防止 grid-wrapper-inner 占用其父 div 的 100% 以便它可以居中。

我确实通过在那些上使用 inline-block 使绿色框（见链接）居中，但是底部的孤立框然后居中，这不是预期的效果。

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T16:01:39.223

将 width 设置为`.grid-wrapper-inner`, 可以解决您的问题，但显然您不能或不想这样做。那么，如果你仍然想让布局适应屏幕大小，也许你可以考虑使用[CSS 媒体查询](http://www.w3.org/TR/css3-mediaqueries/)？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T15:22:22.460

而不是将`padding:80px 0;`其更改为`padding:80px;`. 您仅为顶部和底部设置填充，但左右为 0，因此内部 div 向上扩展直到包装器 div 的左右边框。它仍然垂直和水平居中，只是填充在左边和右边都是 0。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T15:13:25.923

.你可以做两件事之一：

为内部包装添加宽度

```
.grid-wrapper-inner {
background:yellow;
display:inline-block;
margin:0 auto;
width:80%;
text-align:left;
} 
```

或者您可以将填充添加到 .grid-wrapper

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-15T15:14:04.557

您可以使用 margin:auto 水平居中，但要使您尝试居中的内部 div 工作需要指定某种宽度。否则它只是伸展，自动边距为 0。从技术上讲，这也是居中的，但不是你想要的。

例如，尝试将 width: 86% 添加到 .grid-wrapper-inner。

或者，如果您不想设置宽度，则需要设置一个左右相同的实际边距，例如 change margin:0 auto; 在 .grid-wrapper-inner 到 margin: 5% 或 margin: 50px。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-15T15:07:24.577

您必须设置`width`为`.grid-wrapper-inner`. 您可以尝试设置 90%，您会注意到差异。

# excel - 将 Excel VB 宏中的两列连接到第二个电子表格中的列

> ID：14897459
> 
> 赞同：0
> 
> 时间：2013-02-15T15:03:13.913
> 
> 标签：excel, vba

我需要使用 VB 宏将 People.xls`Range("A2: A100")`和`("B2:B100")`Places.xls中的两列连接起来。我已经尝试记录一个宏并从包含连接公式`=CONCATENATE（A2，“”，B2）`Range ("A2: A100")`的附加列中复制和粘贴值。`C3: C100`但这看起来效果不太好，也不是很实用。有什么方法可以在宏本身中使用 VB 来完成吗？我一直在玩，但我没有运气

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T15:11:33.387

尝试这个：

```
With Range("C1:C100")
    .Formula = "=Sheet2!A1&"" ""&Sheet3!B1"
    .Value = .Value
End With 
```

# asp.net - 为什么从 ASP.NET 运行 SSIS 包时出现类未注册错误？

> ID：14897461
> 
> 赞同：1
> 
> 时间：2013-02-15T15:03:16.077
> 
> 标签：asp.net, ssis

我从我的 asp.net 应用程序运行 ssis 包。当它在我的本地机器（32 位操作系统）上运行时，一切正常。但是当我在远程计算机（64 位操作系统）上发布我的网站时，我遇到了运行时错误：

```
Could not load file or assembly 'Microsoft.SqlServer.ManagedDTS, Version=10.0.0.0, 
Culture=neutral, PublicKeyToken=89845dcd8080cc91' or one of its dependencies. The system cannot
find the file specified. 
```

我把**`Microsoft.SqlServer.ManagedDTS.dll`**并**`Microsoft.SqlServer.DTSRuntimeWrap.dll`**放入我网站的 bin 文件夹中。

之后我遇到了下一个错误：

```
 “An attempt was made to load a program with an incorrect format” 
```

我在 iis 上为应用程序池打开了“启用 32 位应用程序”选项，并在项目的属性中将平台目标更改为 x86。

现在我有以下错误：

```
 Retrieving the COM class factory for component with CLSID {BA785E28-3D7B-47AE-A4F9-4784F61B598A}
 failed due to the following error: 80040154 Class not registered 
 (Exception from HRESULT: 0x80040154 (REGDB_E_CLASSNOTREG)). 
```

任何想法如何解决这个问题？或者我可能正朝着错误的方向前进？任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T15:12:51.460

### MSDN 参考：

阅读MSDN 上的主题*[了解本地和远程执行之间的差异，以了解远程运行包的概念](http://msdn.microsoft.com/en-us/library/ms403348.aspx)*

```
You can only run a package outside the development environment on a 
computer that has Integration Services installed 
```

托管您的软件包的服务器应该已经**`Integration Services`**安装。请参阅 Microsoft 文档，了解许可模型如何与*`Integration Services`*. 仅将 DLL 复制到应运行程序包的服务器不会解决问题。

您可以远程调用包执行，但您仍然需要托管包的服务器上的集成服务。

### MSDN 博客文章：

[*以编程方式运行 SSIS 包*](http://blogs.msdn.com/b/michen/archive/2007/03/22/running-ssis-package-programmatically.aspx)阅读文章中描述从 ASP.NET 执行 SSIS 包的第**1点**

### 直接引用文章：

使用 SSIS 对象模型以编程方式运行包。这在此处的联机丛书中进行了详细讨论：http: [//msdn2.microsoft.com/en-us/library/ms136090.aspx](http://msdn2.microsoft.com/en-us/library/ms136090.aspx)

**`Benefits:`**一切都在进程中运行，在执行之前设置变量或修改包非常容易。您还可以通过设置 CancelEvent 来获取有关包进度的事件或要求它停止。

**`Drawbacks:`**显然这是本地执行 - 您需要在运行应用程序的同一台机器上安装 SSIS。此方法也不能在 .NET 1.1 应用程序中使用，除非将其移至 .NET 2.0（这应该很容易做到，并且根据我的经验也可以提高性能）。

**`ASP.NET specific:`**模拟上下文不会传递给 SSIS 包创建的其他线程，因此不会模拟数据源连接。此外，可以将 ASP.NET 配置为在工作进程消耗过多内存的情况下回收它，以提高 ASP.NET 应用程序的可用性。由于如果您有大量数据，SSIS 可能会消耗大量内存，因此它会触发这种回收并降低应用程序的可靠性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-11T18:10:31.687

**一些背景**
这适用于您的本地计算机，因为您的 SSIS 包构建版本与您在 ASP.NET 项目中的 Microsoft.SqlServer.ManagedDTS.dll 版本相匹配。现在，您需要将 SSIS 构建包中的库版本与 Microsoft.SqlServer.ManagedDTS.dll 版本相匹配。版本必须匹配，并且 32 位与 64 位库也必须匹配。

**回答**
一个简单的方法是：将 SSIS 脚本任务添加到您的包（在您的远程服务器上），然后单击“编辑脚本”按钮。现在，查看 SSIS 库引用，您应该会看到 SSIS 包加载的版本。那是你需要用 ASP.NET 项目编译的那个。之后可以删除此脚本任务。

# php - 优化 MySQL 查询 (PHP)

> ID：14897463
> 
> 赞同：0
> 
> 时间：2013-02-15T15:03:17.797
> 
> 标签：php, mysql, sql, greatest-n-per-group

我使用 MySQL & PHP 并有以下数据库请求：

```
$result1 = mysql_query("SELECT nummer FROM abo WHERE usr = '{$usr}'");

while($row = mysql_fetch_object($result1))
{
  $sendung=$row->sendung;
  $result2 = mysql_query("SELECT *
                            FROM filme 
                           WHERE sendung = '{$sendung}' 
                        ORDER BY datum DESC LIMIT 0,1;");

  while($row = mysql_fetch_object($result2))
  {
    [...]
  }
} 
```

例如，第二个 while 被调用 20 次 -> 有 20 个数据库请求。但是我可以连接这个请求或优化这个请求吗？

一种方法：

```
$arraysendung = array();

$result1 = mysql_query("SELECT nummer FROM abo WHERE usr = '{$usr}'");

while($row = mysql_fetch_object($result1))
{
  array_push($arraysendung,$row->sendung);
} 
```

但是我怎么能`$arraysendung`在一个请求中使用（有可能）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T15:06:48.663

使用[JOIN](http://en.wikipedia.org/wiki/Join_%28SQL%29)

```
SELECT nummer, filme.*
FROM abo
JOIN filme ON filme.sendung = abo.nummer
ORDER BY datum desc 
```

这不是 100% 的替代品，因为 LIMIT 的东西没有到位，但应该足以让你开始。

在大多数情况下，只要您运行两个以上的查询，并且后面的查询基于早期查询的结果，您几乎总是可以将它们重写为单个 JOINed 查询。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T15:25:43.853

查询：

```
SELECT filme.*
FROM filme JOIN 
    (SELECT sendung, max(datum) as datum FROM filme GROUP BY sendung) as md 
    ON filme.sendung = md.sendung AND md.datum = filme.datum
WHERE filme.sendung IN (SELECT nummer FROM abo WHERE  usr = '{$usr}') 
```

应该产生类似的结果，包括“LIMIT 1 部分”，前提是“sendung,datum”是唯一的。

请参阅：[子查询](http://en.wikipedia.org/wiki/Subquery#Subqueries)和 JOIN

# jquery - 将类添加到只有一个子元素的元素

> ID：14897468
> 
> 赞同：1
> 
> 时间：2013-02-15T15:03:32.320
> 
> 标签：jquery, css, css-selectors

我会使用 jquery 来查找 ap 标签中强标签的每个实例，并像这样向 p 标签添加一个类：

```
<p><strong>Bold Text</strong></p> 
```

会变成

```
<p class="hasStrong"><strong>Bold Text</strong></p> 
```

我不确定实现这一点的最佳方法，这里有一个镜头：

```
$("p").find("strong").parent("p").addClass("hasStrong"); 
```

这可行，但我希望它选择只有强标签的段落，没有别的。所以这不会应用该类：

```
<p><strong>Bold Text</strong> Here is some more text</p> 
```

我将如何使用 jQuery 来做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T15:12:37.560

```
$('p:has(strong)').filter(function(){
    return $(this).contents().length === 1;
}).addClass('hasStrong'); 
```

[http://jsfiddle.net/vbzkt/](http://jsfiddle.net/vbzkt/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-15T15:10:18.313

```
$('p').filter(function(){
     return $(this).text() == $(this).find('strong').text();
}).addClass('yourclass'); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-15T15:10:57.583

用 jQuery 选择文本节点并不容易。如果您不需要这样做，这会容易得多。

但是，您仍然可以通过使用`.contents`来检查文本节点长度来做到这一点。

```
$("p").find("strong:only-child").each(function () {
    var $p = $(this).closest('p');
    if ($p.contents().length === 1) {
        $p.addClass('hasStrong');
    }
}); 
```

该`:only-child`方法非常适合从一开始就仅过滤出合格的节点，但并非严格要求。请注意，这也会突出显示`<strong>`包含子项的内容。如果您不想这样做，只需检查`$(this)`回调中没有子项。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-15T15:15:59.150

仅选择`p`具有一个或多个`strong`标签且没有文本节点的标签：

```
$('p').filter(function() {
    return $('strong', this).length == this.childNodes.length;
}).addClass('hasStrong'); 
```

[**小提琴**](http://jsfiddle.net/C4A2Z/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-15T15:12:38.393

这是另一个考虑文本节点的解决方案：

```
$("p").filter( function() {
    return this.childNodes.length === 1 && $( 'strong', this ).length;
} ).addClass("hasStrong"); 
```

演示：http: [//jsfiddle.net/vDfV5/](http://jsfiddle.net/vDfV5/)

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2013-02-15T15:10:17.020

您可以通过向下钻取然后使用“parent()”将类添加到 strongs 父级来做到这一点。

$("p").children("strong").parent().addClass("hasStrong");

# c - C中的递归。使非递归函数成为递归函数

> ID：14897476
> 
> 赞同：0
> 
> 时间：2013-02-15T15:04:05.090
> 
> 标签：c, recursion

gcd 应该是一个递归函数。它应该返回无效。它应该取两个正整数并将 GCD 放在第三个参数中。

这是我编码的 gcd 函数。但是，我意识到它不是递归函数。我将如何更改此代码使其成为递归函数？

```
void gcd(int *x, int *y) {
int i;
getValuesForGCD(x, y);
for (i = *x; i >= 1; i--)
{
    if (*x % i == 0 && *y % i == 0)
    {
        printf("The GCD of %d and %d is %d", *x, *y, i); 
        break;
    }
}
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-15T15:07:31.163

GCD 自然地被定义为一个循环公式。它直接转换为递归函数：

```
gcd(a, 0) = a
gcd(a, b) = gcd(b, a % b) 
```

把它写成一个`C`格式，就是这样。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T15:13:09.820

```
int gcd(int a, int b) { 
   if (b == 0) 
   then return a
   else return gcd(b, a % b);
} 
```

您应该注意到 a 和 b 必须是非负数。

好消息是，这是一个尾递归，所以它的运行速度与非递归方法一样快。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-15T15:23:37.313

通常，人们努力*消除*递归，而不是引入它。

如果您希望将迭代算法文字转换为递归，则如下所示：

```
void gcdrecursive(int *x, int *y, int i)
{
    if (i >= 1) {
        if (*x % i == 0 && *y % i == 0) {
            printf("The GCD of %d and %d is %d", *x, *y, i); 
        } else {
            gcdrecursive(x, y, i - 1);
        }
    }
}

void gcd(int *x, int *y) {
    getValuesForGCD(x, y);
    gcdrecursive(x, y, *x);
} 
```

要将迭代解决方案转换为递归解决方案，请将每个循环转换为执行循环的一次迭代的递归函数，然后递归调用自身以进行下一次迭代。打破循环对应于停止递归。在您的示例中，循环中断有两个原因：找到 GCD 或`i`达到零。

请注意，这不是 gcd 的最佳算法，但它采用您提供的函数并根据要求将其转换为递归。

# string - 在 QString 中放置下标

> ID：14897479
> 
> 赞同：1
> 
> 时间：2013-02-15T15:04:16.030
> 
> 标签：string, qt, unicode, qstring, subscript

我很难找到如何将下标插入到 QString 中。我知道它可以用样式表来完成，但是我不能在放置 QString 的地方真正使用样式表。我已经尝试过 HTML 标记和 UTF-8 以及其他 unicode 系统来处理子字符串，但没有成功。

希望有人对此有更多经验并可以提供帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T19:12:03.020

根据您想要下标的字符，您可以使用[Unicode 下标字符](http://en.wikipedia.org/wiki/Unicode_subscripts_and_superscripts)而不进行格式化。

这当然需要支持它的字体和文本渲染引擎。不知道您平台上的 Qt 是否可以。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T15:37:28.340

QString 只是一个字符串。如果您正在处理应该是下标的特定 Unicode 字符，那么很好，但否则您似乎试图做的事情毫无意义。

如果要显示具有下标格式的字符串，则可以使用 QTextEdit 或其他支持富文本显示的类。您可以使用 HTML 标记或以编程方式使用相关的 Qt 类来执行此操作。尝试[http://qt-project.org/doc/qt-4.8/richtext.html](http://qt-project.org/doc/qt-4.8/richtext.html)了解更多信息。

# c - 正常虚拟程序后没有刷新标准输入

> ID：14897480
> 
> 赞同：3
> 
> 时间：2013-02-15T15:04:20.557
> 
> 标签：c, stdin, flush

这是我在测试了一些东西后编写的一段 c 代码。

我知道这不是漏洞问题，但我不明白为什么在程序正常返回后没有刷新标准输入，此时提示返回标准输入、标准输出、标准错误。我的意思是为什么标准输入上的剩余字符在程序正常执行结束后被重定向到标准输出而不被刷新？

```
$cat dummy.c
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <unistd.h>
#include <errno.h>

int main(){

    char rbuf[100];

        if (read(0, rbuf,5) == -1){
        perror("learn to count");
        printf("errno = %d.\n", errno);
        exit(1);
    }
        //printf("rbuf : %s\n",rbuf);
    return 1;   
} 
```

这里执行：

```
$ gcc -o dummy dummy.c
$ ./dummy 
AAAAA /bin/sh
$  /bin/sh
sh-3.2$ exit
exit
$ 
```

我想这只是打印在提示的新标准输出上的标准输入的剩余字符串。加上最后的换行符，它以某种方式模拟用户按下的输入以执行命令。这是怎么回事？我只是想知道更多。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T15:08:51.427

是的，您的猜测是正确的，这些是 中的额外字符`stdin`：

做这个：

```
void flush_stdin()
{
   while(getchar() != '\n');
} 
```

注意：不要使用`fflush()`on`stdin`因为那是未定义的行为

**编辑**

连接到启动程序的`stdin`终端（即`bash`）。这将启动一个新程序`dummy`，并且`stdin`of`dummy`连接到`stdin`of `bash`。

从那里开始，`dummy`进程`read`的五个字符，忽略其他字符（将它们留在`stdin`缓冲区中）。当控件返回时，`bash`它会等待直到在`buffer`. 低，看哪，缓冲区中有字符`stdin`，因此程序 - 而不是等待，开始从`stdin`和 因为`stdin`在最后，包含`\n`实际执行的过程。这就开始了`/bin/sh`。剩下的就靠`/bin/sh`自己操心了！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T15:41:43.050

为了执行你的程序，shell 调用 fork(2) 来创建一个子进程，并在子进程中调用 exec(3) 用“虚拟”程序替换它自己。

我想在shell的源代码中有这样的东西（如果它是用C编写的）：

```
if (fork() == 0)
    execlp(program, arguments) 
```

子进程继承父进程的文件描述符；在这种情况下是外壳。因此子进程具有与执行它的 shell 相同的标准输入/标准输出，即虚拟终端。

我不确定到底是怎么回事，但我想父进程（您输入命令的原始 shell）在子进程运行时会以某种方式忽略标准输入。

当程序退出时，shell 会取回它的标准输入。程序未读取的任何额外字符都将进入 shell。当然，shell 只是将它们视为命令。

如果您首先尝试使用 fgetc(3) 而不是 read(2)，则似乎多余的字符会丢失，而不是发送到 shell...*但是*，如果您取消缓冲 stdin，则使用 fgetc(2) 可以获得相同的效果，即：额外的字符返回到外壳。

```
char rbuf[100];
setbuf(stdin, NULL); // with this line - same effect as using read(2)
                     // without it - extra characters are lost
for (int i = 0; i < 5; ++i)
    rbuf[i] = (char)fgetc(stdin); 
```

默认情况下，标准输入是行缓冲的。所以看起来在使用缓冲标准输入时可以避免这种行为，因为整行被读取，多余的字符被丢弃，而非缓冲标准输入（或低级读取）直到行尾才会读取，额外的字符仍然存在程序退出后由父级（shell）读取。

# c# - C#/WinRT中两个位置之间的距离和其他东西

> ID：14897483
> 
> 赞同：1
> 
> 时间：2013-02-15T15:04:23.397
> 
> 标签：c#, windows-runtime, windows-store-apps

如何`Location`在 C# 中获取两个之间的距离？如果我有设备的罗盘值，那么获得两个位置之间的方向也会非常好。

有没有这方面的api？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T15:46:26.877

这取决于。你所说的**位置**是什么意思？

**案例1：当位置是地理点（纬度，经度）**

你需要通过球面几何。实际上，您应该对球体（或椭圆体或其他球体）进行一些计算。但是避免进行这种复杂计算的最好方法是使用`Microsoft.SqlServer.Types.dll`（v.10 或 v.11）。如果您的系统上安装了 SQL Server 2012（或 2008），您可以在这样的地方找到它（否则您可以从网上下载）：

```
"C:\Program Files\Microsoft SQL Server\110\Shared\Microsoft.SqlServer.Types.dll" 
```

然后使用这个dll，你可以声明两种`SqlGeography`类型并调用`STDistance()`方法，一切都会正确完成。（记住这里没有问题，我不会比这更复杂）。这是代码：

```
SqlGeography p1 =
SqlGeography.STPointFromText(new System.Data.SqlTypes.SqlChars("POINT( lat1, long1)"), 4326); // SRID of WGS84: 4326

SqlGeography p2 =
SqlGeography.STPointFromText(new System.Data.SqlTypes.SqlChars("POINT( lat2, long2)"), 4326); // SRID of WGS84: 4326

double distance = p1.STDistance(p2).Value; 
```

**案例 2：当位置是平面上的简单局部 2D 点 (x, y)**

在这种情况下，您可以使用著名的公式来计算距离：

```
double distance = Math.Sqrt(dx*dx + dy*dy); //dx and dy are the difference of the x and y of the two points 
```

# jquery - MVC 扩展网格 JQuery 1.8.2 失败

> ID：14897492
> 
> 赞同：1
> 
> 时间：2013-02-15T15:04:42.803
> 
> 标签：jquery, telerik, telerik-grid, telerik-mvc

我最近将 JQuery 升级到版本 1.8.2，并注意到我的 MVC 扩展网格在呈现为空（绑定到空数据源）时开始给我 JavaScript 错误：

如果我运行 JQuery 1.7.1，我没有看到同样的错误。MVC 扩展网格是否应该与 JQuery 1.8.2 兼容？

具体来说，错误似乎涉及 JQuery 的数据过滤方法的扩展（在 telerik.grid.min.js 内）：

telerik.grid.min.js 中的以下行导致语法错误： dataFilter:function(v,w){v=eval("("+v.replace(j,"new Date($1)")+") ");

在我的解决方案中，我在同一页面上混合了 Kendo 和 MVC 扩展网格，因此我需要升级 JQuery，因为 Kendo 根据要求需要更新版本。

有没有其他人看到过这种行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T21:58:39.307

我更详细地查看了它，错误的原因是网格在呈现为空时向服务器发出 Ajax 请求。我想阻止这种行为，但网格似乎没有提供一个简单的选择退出这个请求。不确定网格如何确定请求的路由，但在我的情况下，它是针对“/”路由的，并且响应与 Telerik grid JS 中的波纹管代码不兼容：

```
dataFilter:function(v,w){v=eval("("+v.replace(j,"new Date($1)")+")"); 
```

我用一个网格制作了一个简单的示例项目，并观察到与我的真实项目相同的失败。

正如我之前提到的，使用 1.7.1 版本的 JQuery 时不会出现该错误。

这在 JQuery 版本 1.7.1 中没有失败的原因是上面的 Telerik 代码是在消耗异常的 try catch 块内执行的。在 Jquery 1.8.2 中，try catch 已被删除，因此错误将出现在 UI 中。

我非常感谢 Telerik 团队就这个空网格 Ajax 请求背后的原因提供一些反馈。如果每次网格呈现为空时都命中“/”路由，似乎可能会导致很多副作用。

我当前的解决方法是满足空网格 Ajax 请求和后续日期解析（在 dataFilter 内），如果我检测到其中一个请求，则从我的操作中返回一个简单的日期......这将防止上述代码引发异常...... ..希望有一个更无缝的解决方案。

# wpf - 全局异常处理程序没有捕获一些异常（例如 StackoverflowException）

> ID：14897497
> 
> 赞同：2
> 
> 时间：2013-02-15T15:05:00.263
> 
> 标签：wpf, c#-4.0, .net-4.0, exception-handling, unhandled-exception

我已经通过以下方式在启动例程中在我的应用程序（C#、WPF、.NET4）中注册了全局异常处理程序：

```
AppDomain.CurrentDomain.UnhandledException += (sender, args) => HandleException(args.ExceptionObject as Exception);
Application.Current.DispatcherUnhandledException += (sender, args) => {
   HandleException(args.Exception);
   args.Handled = true;
}; 
```

HandleException() 记录异常并显示带有一些附加信息的 MessageBox。

现在，我的应用程序在一些客户机器上不时发生崩溃，这些机器没有调用 HandleException()。Windows 显示以下消息：

![在此处输入图像描述](../Images/304e4afe9c02afc993ce403030717450.png)

在 WindowsEventLog 中，我得到以下条目：

条目1：

```
Name der fehlerhaften Anwendung: proconact.exe, Version: 1.0.0.1365, Zeitstempel: 0x511531df
Name des fehlerhaften Moduls: PresentationFramework.ni.dll, Version: 4.0.30319.588, Zeitstempel: 0x504db27d
Ausnahmecode: 0xc00000fd
Fehleroffset: 0x002ef05b
ID des fehlerhaften Prozesses: 0x1bec
Startzeit der fehlerhaften Anwendung: 0x01ce0b5dce4030a6
Pfad der fehlerhaften Anwendung: C:\Program Files (x86)\proconact_sck\proconact.exe
Pfad des fehlerhaften Moduls: C:\windows\assembly\NativeImages_v4.0.30319_32\PresentationFramewo#\c627e9b7f10b01db43645284e601f255\PresentationFramework.ni.dll
Berichtskennung: d8d69f94-777a-11e2-b4b0-b4b52f2aad4f 
```

条目2：

```
Fehlerbucket 3482664247, Typ 5
Ereignisname: CLR20r3
Antwort: Nicht verfügbar
CAB-Datei-ID: 0

Problemsignatur:
P1: proconact.exe
P2: 1.0.0.1365
P3: 511531df
P4: PresentationFramework
P5: 4.0.0.0
P6: 504db27d
P7: 329d
P8: 0
P9: System.StackOverflowException
P10: 

Angefügte Dateien:
d:\Temp\WER6E9F.tmp.WERInternalMetadata.xml

Diese Dateien befinden sich möglicherweise hier:
C:\Users\roger\AppData\Local\Microsoft\Windows\WER\ReportArchive\AppCrash_proconact.exe_b0fabce1f86d1f843de5b5b4692a3e8ecd928_2c77f03d

Analysesymbol: 
Es wird erneut nach einer Lösung gesucht: 0
Berichts-ID: d8d69f94-777a-11e2-b4b0-b4b52f2aad4f
Berichtstatus: 0 
```

我该怎么做才能处理异常（为了获取堆栈跟踪以分析异常发生的位置）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T15:11:35.053

一些异常不能被捕获，即使是 AppDomain.UnhandledException。因为它们太讨厌了，不允许托管代码继续运行。

StackOverflowException 就是这样的心脏病发作，臭名昭著，以至于给这个网站起了名字。没有足够的堆栈空间来执行常见的托管代码执行任务，例如运行抖动。ExecutionEngineException 是另一个，由已销毁的垃圾收集堆触发，在 .NET 4.0 及更高版本中无法捕获。

所以不，演出结束了，WER 对话框和 Windows 事件日志条目就剩下要看的了。SO总是由错误引起的，您需要修复它。

# sql - 将多行的结果分组在一列中

> ID：14897500
> 
> 赞同：0
> 
> 时间：2013-02-15T15:05:13.327
> 
> 标签：sql, sql-server, sql-server-2008, tsql

下面的查询给了我两个结果，除了最后一列 v2_roles.id 之外，一切都相同。有没有办法将它们分组在一列中（可能是逗号分隔的列表）并只得到一个结果

```
SELECT v2_admin.adminid, 
       v2_admin.adminname, 
       v2_admin.login, 
       v2_admin.email, 
       v2_roles.id 
FROM   v2_admin 
       INNER JOIN v2_admin_roles 
               ON v2_admin.adminid = v2_admin_roles.adminid 
       INNER JOIN v2_roles 
               ON v2_admin_roles.roleid = v2_roles.id 
WHERE  v2_admin.adminid = 2 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T15:13:44.190

这是一个小技巧，`FOR XML`用于将字段转换为列表并`STUFF`删除开头的逗号——这应该很接近（未经测试）：

```
SELECT v2_admin.adminid, 
       v2_admin.adminname, 
       v2_admin.login, 
       v2_admin.email, 
       STUFF(
        (
            SELECT ',' +  CAST(v2_roles.id as varchar) AS [text()]
                FROM v2_roles
                WHERE v2_admin_roles.roleid = v2_roles.id 
            ORDER BY v2_roles.id
            FOR XML PATH('')
        ), 1, 1, '') AS Roles
FROM   v2_admin 
       INNER JOIN v2_admin_roles 
               ON v2_admin.adminid = v2_admin_roles.adminid 
WHERE  v2_admin.adminid = 2 
GROUP BY v2_admin.adminid, 
       v2_admin.adminname, 
       v2_admin.login, 
       v2_admin.email 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T15:17:13.027

这也应该有效，

```
;WITH mytable AS (
   SELECT v2_admin.adminid, 
       v2_admin.adminname, 
       v2_admin.login, 
       v2_admin.email, 
       v2_roles.id 
   FROM   v2_admin 
       INNER JOIN v2_admin_roles 
               ON v2_admin.adminid = v2_admin_roles.adminid 
       INNER JOIN v2_roles 
               ON v2_admin_roles.roleid = v2_roles.id 
   WHERE  v2_admin.adminid = 2 
)

SELECT t1.adminid,t1.adminname, t1.login, t1.email,
       roleIds =REPLACE( (SELECT convert(varchar,id) AS [data()]
                FROM mytable t2
                WHERE t2.adminid = t1.adminid
                --ORDER BY t2.adminid
                FOR XML PATH('')
            ), ' ', ' , ')
FROM mytable t1
GROUP BY t1.adminid,t1.adminname, t1.login, t1.email ; 
```

# actionscript-3 - AS3：一个函数中设置的变量在另一个函数中具有不同的值

> ID：14897501
> 
> 赞同：1
> 
> 时间：2013-02-15T15:05:13.943
> 
> 标签：actionscript-3, flash, actionscript, air

好吧，我想我最好在开始扯头发之前先问问别人。我一直在从 xml 文件中加载数据，其想法是，如果在加载 xml 之后调用 loadDetails，它将在此基础上加载它们，并且如果在它设置一个标志之前调用它，它将告诉对象xml完成​​后自动再次调用它。很简单，对吧？

```
private function parseXML(e:Event):void
{
    trace("parseXML " + mLevelID.toString(16) + "   " + mAutoload);
    var xml:XML = new XML(e.target.data);
    // do stuff...
    System.disposeXML(xml);
    mDetailsReady = true;
    if (mAutoload)
        loadDetails();
}

private function cancelXML(e:Event):void
{
    trace("cancelXML " + mLevelID.toString(16));
    mAutoload = false;
}

public function loadDetails():void
{
    if (!mDetailsReady)
    {
        if (!mAutoload)
            trace("autoload on " + mLevelID.toString(16));
        mAutoload = true;
        return;
    }
    if (mAutoload) trace("autoloaded " + mLevelID.toString(16));
    // do stuff...
    mAutoload = false;
} 
```

这就是问题所在。它没有调用 loadDetails，即使在正确设置了标志之后......或者并非总是如此。这是一些示例输出：

```
autoload on 0
autoload on a
autoload on 1
cancelXML 1
parseXML 0   true
autoloaded 0
parseXML a   false 
```

如您所见，它跟踪所有三个级别中的 mAutoload 设置。但是，当需要实际解析 a 级中的 xml 时，它会将 mAutoload 查询为 false 并且无法自动加载——而且，不，它不会同时在另一个函数中设置为 false，唯一的另一个函数将 mAutoload 设置为 false 是构造函数。

我真的很困惑和沮丧。我想我愿意接受这只是 AS3 的荒谬，并愿意接受有关如何绕过问题的建议，但现在我只是非常沮丧。任何反馈表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T17:09:37.353

你的逻辑不对

在方法 parseXML 你做

```
mDetailsReady = true;
if (mAutoload)
    loadDetails(); 
```

这意味着 mAutoload 是 true 并且 mDetailsReady 是 true

但在 loadDetails 方法中

```
if (!mDetailsReady)
{
    if (!mAutoload) 
```

我不确定你想用这个类实现什么，但如果你正在编写某种 xml 加载器类，你可能想要使用更多的 Loader 类变量来确定它是否完成加载，而不是你自己跟踪它。

# css - 如何强制所有浏览器一致地测量媒体查询的视口宽度

> ID：14897504
> 
> 赞同：3
> 
> 时间：2013-02-15T15:05:22.253
> 
> 标签：css, cross-browser, media-queries

显然，Chrome 在评估媒体查询时不包括滚动条宽度（~17px）。

IE、Firefox 和 Opera 确实将滚动条宽度计为视口的一部分。

例如，假设视口宽度为 500 像素，滚动条为 17 像素。

下面的代码：

```
@media (min-width: 500) {

    //code

} 
```

将在**Chrome**中以**大于或等于 500px 的视口宽度**执行。

但是，**IE9、Firefox 和 Opera将在****大于或等于 483px**的视口宽度处执行该代码。

我的问题：**有没有办法强制所有浏览器在执行媒体查询时在视口宽度中包含或排除滚动条宽度？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T15:29:28.320

IE、Firefox 和 Opera[遵循 W3C 规范](http://www.456bereastreet.com/archive/201301/media_query_width_and_vertical_scrollbars/)，在媒体查询中包含滚动条宽度，而 Webkit 浏览器则没有。

您目前不能强制浏览器对其进行相同处理，因此最好的选择是修改您的布局，使其与媒体查询中的宽度不紧密相关（添加额外的边距）。使用这样的布局，当它提前或延迟触发几个像素时，它不会产生太大的影响。

# android - 在android上的opencv中创建yuv mat

> ID：14897525
> 
> 赞同：4
> 
> 时间：2013-02-15T15:06:54.473
> 
> 标签：android, opencv, android-ndk, yuv

我正在为 Android 实施计算机视觉项目，我正在使用 OpenCV 和 Android NDK。它从 PreviewCallback 以字节数组形式从摄像头接收 YUV NV21 格式的数据，并调用应用程序的本机部分。
我的问题是，我不知道如何使用 YUV 数据创建 3 通道 Mat 来对其进行阈值处理。对于阈值，我想使用此代码

```
Mat* threshold = new Mat(height, width, CV_8UC1);    
Scalar low(yuvPixel[0] - 50, yuvPixel[1] - 10, yuvPixel[2] - 10);
Scalar up(yuvPixel[0] + 50, yuvPixel[1] + 10, yuvPixel[2] + 10);
inRange(image, low, up, *threshold); 
```

我只知道，如何使用创建 1 通道 Mat

```
Mat image(height + height/2, width, CV_8UC1, (unsigned char *)frameData); 
```

有什么简单的方法可以将此 Mat 转换为 3 通道 Mat？
提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-17T12:06:06.837

使用 YUV 数据创建 3 通道 Mat。

```
 Mat myuv(height + height/2, width, CV_8UC1, (unsigned char *)_yuv); 
```

对于 yuv 422 数据。事情正在仔细匹配您的 yuv 数据格式。

“有什么简单的方法可以将此 Mat 转换为 3 通道 Mat 吗？”

你的意思是3通道RGB数据吗？如果是这样，以下代码应该可以工作

```
 //
Mat myuv(height + height/2, width, CV_8UC1, ( unsigned char *)_yuv);
Mat mbgra(height, width, CV_8UC4, ( unsigned char *)_bgra);
Mat mgray(height, width, CV_8UC1, ( unsigned char *)_yuv);

 //
cvtColor(myuv, mbgra, CV_YUV420sp2BGR, 4); 
```

# c++ - 元组的构造函数参数

> ID：14897527
> 
> 赞同：10
> 
> 时间：2013-02-15T15:06:58.530
> 
> 标签：c++, templates, c++11, constructor, stdtuple

假设我有一个模板，该模板由类类型和许多参数类型参数化。与这些类型匹配的一组参数存储在一个元组中。如何将这些传递给类类型的构造函数？

在几乎 C++11 代码中：

```
template<typename T, typename... Args>
struct foo {
  tuple<Args...> args;
  T gen() { return T(get<0>(args), get<1>(args), ...); }
}; 
```

如何`...`在不固定长度的情况下填充构造函数调用？

我想我可以想出一些复杂的递归模板调用机制来做到这一点，但我不敢相信我是第一个想要这个的人，所以我想会有现成的解决方案来解决这个问题，甚至可能在标准库中。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2019-05-06T22:27:24.433

C ++ 17[`std::make_from_tuple`](https://en.cppreference.com/w/cpp/utility/make_from_tuple)为此：

```
template <typename T, typename... Args>
struct foo
{
  std::tuple<Args...> args;
  T gen() { return std::make_from_tuple<T>(args); }
}; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-15T15:15:31.490

您需要一些模板元编程机制来实现这一点。

实现参数分派的最简单方法是利用包含压缩**编译时整数序列的**表达式的包扩展。需要模板机制来构建这样的序列（有关标准化此类序列的提案的更多信息，请参见此答案末尾的备注）。

假设有一个类（模板）`index_range`封装了一个编译时整数范围 [M, N）和一个类（模板）`index_list`封装了一个编译时整数列表，这就是你将如何使用它们：

```
template<typename T, typename... Args>
struct foo
{
    tuple<Args...> args;

    // Allows deducing an index list argument pack
    template<size_t... Is>
    T gen(index_list<Is...> const&)
    {
        return T(get<Is>(args)...); // This is the core of the mechanism
    }

    T gen()
    {
        return gen(
            index_range<0, sizeof...(Args)>() // Builds an index list
            );
    }
}; 
```

这是`index_range`and的可能实现`index_list`：

```
//===============================================================================
// META-FUNCTIONS FOR CREATING INDEX LISTS

// The structure that encapsulates index lists
template <size_t... Is>
struct index_list
{
};

// Collects internal details for generating index ranges [MIN, MAX)
namespace detail
{
    // Declare primary template for index range builder
    template <size_t MIN, size_t N, size_t... Is>
    struct range_builder;

    // Base step
    template <size_t MIN, size_t... Is>
    struct range_builder<MIN, MIN, Is...>
    {
        typedef index_list<Is...> type;
    };

    // Induction step
    template <size_t MIN, size_t N, size_t... Is>
    struct range_builder : public range_builder<MIN, N - 1, N - 1, Is...>
    {
    };
}

// Meta-function that returns a [MIN, MAX) index range
template<unsigned MIN, unsigned MAX>
using index_range = typename detail::range_builder<MIN, MAX>::type; 
```

另请注意，[Jonathan Wakely](https://stackoverflow.com/users/981959/jonathan-wakely)提出了一个[有趣的提议](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2013/n3493.html)来**标准化**类模板，这与我在这里所说的非常相似。**`int_seq``index_list`**

 *** * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-12-05T22:41:04.243

用于`index_sequence`解包 a `std::tuple`（或`std::pair`,`std::array`或任何其他支持元组接口的东西）：

```
#include <utility>
#include <tuple>

template <typename Tuple, std::size_t... Inds>
SomeClass help_make_SomeClass(Tuple&& tuple, std::index_sequence<Inds...>)
{
    return SomeClass(std::get<Inds>(std::forward<Tuple>(tuple))...);
}

template <typename Tuple>
SomeClass make_SomeClass(Tuple&& tuple)
{
    return help_make_SomeClass(std::forward<Tuple>(tuple),
        std::make_index_sequence<std::tuple_size<Tuple>::value>());
} 
```

`std::index_sequence`并且`std::make_index_sequence`将在 C++1y 中。如果您找不到定义它们的标题，您可以使用这些：

```
template <std::size_t... Inds>
struct index_sequence {
    static constexpr std::size_t size()
    { return sizeof...(Inds); }
};

template <std::size_t N, std::size_t... Inds>
struct help_index_seq {
    typedef typename help_index_seq<N-1, N-1, Inds...>::type type;
};

template <std::size_t... Inds>
struct help_index_seq<0, Inds...> {
    typedef index_sequence<Inds...> type;
};

template <std::size_t N>
using make_index_sequence = typename help_index_seq<N>::type; 
```

现场示例，在 C++11 模式下：[http ://coliru.stacked-crooked.com/a/ed91a67c8363061b](http://coliru.stacked-crooked.com/a/ed91a67c8363061b)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-04-12T03:30:32.817

C++14 将添加标准支持`index_sequence`：

```
template<typename T, typename... Args>
struct foo {
  tuple<Args...> args;
  T gen() { return gen_impl(std::index_sequence_for<Args...>()); }
private:
  template <size_t... Indices>
  T gen_impl(std::index_sequence<Indices...>) { return T(std::get<Indices>(args)...); }
}; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-15T15:14:56.720

创建从 0 到 n-1 的索引序列：

```
template<size_t... indexes>
struct seq {};

template<size_t n, size_t... indexes>
struct make_seq: make_seq<n-1, n-1, indexes...> {};

template<size_t... indexes>
struct make_seq: make_seq<0, indexes...> {
  typedef seq<indexes...> type;
}; 
```

将它们与您的参数并行解压缩，或者作为`get<>`您的索引。

目标是这样的：

```
template< typename T, typename Tuple, typename Indexes >
struct repack;

template< typename... Ts, size_t... indexes >
struct repack< tuple<Ts...>, seq<indexes...> > {
  T operator()( tuple<Ts...> const& args ) const {
    return T( get<indexes>(args)... );
  }
}; 
```

`repack`像这样使用`gen`：

```
T gen() {
  repack<T, tuple<Args...>, typename make_seq<sizeof...(Args)>::type> repacker;
  return repacker( args );
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-15T15:15:57.513

您需要使用[索引技巧](http://loungecpp.wikidot.com/tips-and-tricks%3aindices)，这意味着间接层：

```
template <std::size_t... Is>
struct indices {};
template <std::size_t N, std::size_t... Is>
struct build_indices
  : build_indices<N-1, N-1, Is...> {};
template <std::size_t... Is>
struct build_indices<0, Is...> : indices<Is...> {};

template<typename T, typename... Args>
struct foo {
  tuple<Args...> args;
  T gen() { return gen(build_indices<sizeof...(Args)>{}); }
private:
  template<std::size_t... Is>
  T gen(indices<Is...>) { return T(get<Is>(args)...); }
}; 
```**

# java - Hadoop Java 程序始终以独立模式运行

> ID：14897528
> 
> 赞同：0
> 
> 时间：2013-02-15T15:07:10.477
> 
> 标签：java, hadoop, mapreduce, classpath

我编写了一个使用 Hadoop 的 Java 程序。我使用“java -jar prog.jar”从命令行执行我的程序，我可以看到它以独立模式运行。我可以说出来，因为不需要运行 JobTracker 和 TaskTracker 守护程序就可以让我的程序成功执行。如果我使用“hadoop jar prog.jar”（关闭 map/reduce 守护进程）执行我的程序，它自然不会工作。

我希望我的 java 程序以伪分布式模式执行，但我感觉它找不到配置文件。我尝试将它作为“java -cp /usr/hadoop-1.1.1/conf -jar prog.jar”执行，以便将其指向配置文件所在的位置，但仍然没有骰子。

我有一种感觉，类路径是错误的或什么的。我是一个菜鸟，所以任何帮助表示赞赏。谢谢，

米

这是我的工作开始代码的片段，其中包含配置对象。

```
 Configuration config = new Configuration();     
    Job job = new Job(config);
    job.setJobName("Test");
    job.setJarByClass(MyMapper.class);      

    job.setMapperClass(MyMapper.class);
    job.setReducerClass(MyReducer.class);

    job.setOutputKeyClass(Text.class);
    job.setOutputValueClass(IntWritable.class);

    job.setMapOutputKeyClass(LongWritable.class);
    job.setMapOutputValueClass(Text.class);

    job.setInputFormatClass(MyInputFormat.class);

    FileInputFormat.addInputPath(job, new Path("hdfs://hadoop0.hq.net:54310/" + saFileName));
    FileOutputFormat.setOutputPath(job, new Path("hdfs://hadoop0.hq.net:54310/" + saFileName + "-output"));

    job.waitForCompletion(true); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T15:29:48.663

> 我使用“java -jar prog.jar”从命令行执行我的程序，我可以看到它以独立模式运行。

这不是真的。该`java -jar`命令用于运行独立的 java 应用程序。要运行 Hadoop 作业，您需要使用`hadoop jar`您提到的命令。

在运行任何任务之前，您需要在您的环境中设置 Hadoop。如果您还没有准备好，您可以按照[本文](http://www.thegeekstuff.com/2012/02/hadoop-pseudo-distributed-installation/)或[官方文档](http://hadoop.apache.org/docs/r1.1.1/single_node_setup.html#PseudoDistributed)中的步骤进行操作。您可以通过运行 Hadoop 发行版提供的一些示例来验证设置：

```
bin/hadoop jar hadoop-examples-*.jar grep input output 'dfs[a-z.]+' 
```

如果上述命令运行成功，您可以尝试自己的任务。

编辑：您可以使用如下`Runtime.exec`调用：`hadoop jar`

```
Process p = Runtime.getRuntime().exec(cmd);
BufferedReader input = new BufferedReader(new InputStreamReader(p.getInputStream()));
String line = input.readLine();
while (line != null) {
  // process output of the task
  // ...
}
input.close();
// wait for the task complete
p.waitFor();
int ret = p.exitValue();
// process the task result
// ... 
```

# haskell - Haskell：函数中的非穷举模式（简单函数）

> ID：14897529
> 
> 赞同：0
> 
> 时间：2013-02-15T15:07:11.447
> 
> 标签：haskell, non-exhaustive-patterns

我很困惑为什么这个函数的第一个和第三个版本会给出这个错误，而第二个定义工作正常。

```
-- head and tail
third :: [a] -> a
third [a] = head (tail (tail[a]))

-- Pattern matching
third2 :: [a] -> a
third2 (_:_:x:_) = x

-- List indexing
third3 :: [a] -> a
third3 [a] = [a]!!2 
```

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T15:11:48.140

奇怪的是，第二个没有抱怨非穷举模式，因为`third2`不会匹配长度为零、一或二的列表。`third`and`third3`函数抱怨是因为它`[a]`不是一个变量，而是一个模式。`[a]`deugars to `(a:[])`，所以你可以把它们写成

```
third (a:[]) = head (tail (a:[]))

third3 (a:[]) = (a:[]) !! 2 
```

两者都不起作用，因为它们是单元素列表。我怀疑你想要的是

```
third a = head (tail a)

third3 a = a !! 2 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T15:13:38.027

您需要更好地理解语法。

基本上，有 2 个子语法：

1.  类型的语法
2.  表达式和模式的语法

在类型语法中，`[a]`意味着`list of elements of type a`

在表达式/模式语法中，`[a]`表示包含 value 的单例列表`a`。这等效于`(a:[])` (a 附加到空列表)。

因此，例如，您的第一个函数检查它是否获得单例列表。然后它取单例列表的尾部的头部，这将失败。

您收到的消息是因为您没有涵盖列表的形状：即空列表和具有超过 1 个元素的列表。

而且，当然，您应该收到警告`third2`，它是否仅涵盖具有 3 个或更多元素的列表。我敢肯定你忽略了一些东西。

# objective-c - NSOperation 数据解析最佳实 践

> ID：14897532
> 
> 赞同：0
> 
> 时间：2013-02-15T15:07:25.793
> 
> 标签：objective-c, json, nsmutabledictionary, nsoperation

我对使用 NSOperation 下载数据的最佳实践有疑问。目前我正在使用 NSOperationQueue 在远程服务器上对 JSON 数据发出多个请求。当数据进来时，我将它分解成一个大的 NSDictionary 并使用 for 循环来解析它并将数据加载到 NSMutableDictionaries 中，然后再继续下一个请求。我的问题是我一遍又一遍地执行相同的序列，我想知道是否最好只下载数据并在完成所有下载之后，然后将我的 JSON 解析为所需的字典，也许有更好的方法来做到这一点，我只是没有想到？我使用工具检查了总分配，看起来我在这个过程中堆积了大约 30mb。

非常感谢您就此事提供任何建议。

这是 NSOperation 代码的一个小示例

```
 plantPackKeys = [NSMutableDictionary dictionaryWithDictionary:data];
          queueTwo = [NSOperationQueue new];
          [queueTwo setMaxConcurrentOperationCount:4];

          for(id key in data){
             @autoreleasepool {
                urlKey = @"";
                urlKey = [data objectForKey:key];
                DownloadOperation *downLoad = [[DownloadOperation alloc] initWithURL:[NSURL URLWithString:urlKey]];
                [downLoad addObserver:self forKeyPath:@"isFinished" options:NSKeyValueObservingOptionNew context:NULL];
                [queueTwo addOperation:downLoad];
              }
          } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T18:07:25.553

知道哪些对象正在消耗这么多内存会很有趣。您可以通过分解来自服务器的数据包来减少内存占用。另一个问题是你真的需要在内存中保留这么多数据吗？

您可以使用其他一些后端（例如 CoreData 或原始 SQLite）在解析数据时将其保存到磁盘。优点是您不会一次将所有内容加载到内存中，序列化的 NSDictionaries 就是这种情况。

# cmd - 命令在 cmd.exe 中有效，但在 *.bat 文件中无效

> ID：14897536
> 
> 赞同：1
> 
> 时间：2013-02-15T15:07:43.667
> 
> 标签：cmd, path

我想从 Windows 上的路径系统变量中找到可执行文件的路径并将其分配给变量。（unix 'which' 命令）

当我打开 cmd.exe 并输入：

```
for %i in (cmd.exe) do @set cmdPath=%~$PATH:i 
```

它有效（我用'echo %cmdPath%'测试它）

但是当我将此行复制到 .bat 文件时，它会在执行过程中抛出一个错误“~$PATH:i is not expected in this moment”

不知道为什么，怎么解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T15:43:01.987

阅读 FOR 文档（输入`help for`或`for /?`）。

> 要在批处理程序中使用 FOR 命令，请指定 %%variable 而不是 %variable。变量名区分大小写，因此 %i 与 %I 不同。

在批处理文件中，您只需要将百分比加倍。

```
for %%i in (cmd.exe) do set cmdPath=%%~$PATH:i 
```

请注意，`%COMSPEC%`应该已经包含 cmd.exe 的完整路径

# regex - 如何从某些文本文件的顶部删除文件名

> ID：14897537
> 
> 赞同：0
> 
> 时间：2013-02-15T15:07:48.540
> 
> 标签：regex, perl, text, duplicates

我正在尝试在 Mac OSX 中使用 fdupes 从目录中删除重复的文本文件。它已经删除了一堆重复项。

我现在遇到的问题是，在剩下的文件中，很多都是重复的，除了在一个文件中，文件名是第一行，然后是一个空行，然后是文本。

所以，我想找到所有在顶部重复文件名的文件，然后去掉这个和下面的空行，以便 fdupes 将它们识别为重复。这将允许我使用 fdupes 来解析它们。

例子：

文件001.txt：

```
test 123
test 
```

文件002.001.txt：

```
file002.001.txt

test 123
test 
```

解决这个问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T15:29:06.280

也许像这样

```
perl -0777 -pi -e 's#\Q$ARGV\E$/{2}##' *.txt 
```

`$ARGV`包含文件名。`$/`是你的输入记录分隔符——你可能需要使用`\n`或者你的行尾是什么。由于`$/`包含斜线，我们将分隔符更改`s///`为其他内容，在本例中为`#`。转义是为了使文件名中的`\Q ... \E`某些元字符不会搞砸任何事情。

该`-0777`开关使 perl 一次读取整个文件，以便我们可以在一个正则表达式中匹配多行。

开关将`-i`进行就地编辑。您可以添加后缀来保留备份，但这在用于许多文件时可能不实用。`-i`但是，我建议您在确定一切如您所愿并打印到标准输出之前不要使用该开关。

# sql-server - SQL Server：从 xml 解析版权符号

> ID：14897540
> 
> 赞同：0
> 
> 时间：2013-02-15T15:07:55.087
> 
> 标签：sql-server, xml, tsql

我有带有`©`符号的 xml 文件。但是 SQL 无法解析此类 XML，是否有解决方法？

这个查询：

```
declare @XmlResponse as xml; 
select @XmlResponse = '<?xml version="1.0" encoding="utf-8"?><Response>©</Response>'
select @XmlResponse as myxml 
```

返回错误：

> *消息 9420，级别 16，状态 1，第 15
> 行 XML 解析：第 1 行，字符 49，非法 xml 字符*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T15:37:40.083

您可以将`©`符号替换为 XML 实体`&#169;`。

```
declare @XmlResponse as xml; 
select @XmlResponse = REPLACE('<?xml version="1.0" encoding="utf-8"?><Response>©</Response>', '©', '&#169;')
select @XmlResponse as myxml 
```

有关更多 XML 实体，请参阅： [http ://en.wikipedia.org/wiki/List_of_XML_and_HTML_character_entity_references](http://en.wikipedia.org/wiki/List_of_XML_and_HTML_character_entity_references)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T15:37:57.743

如果您摆脱编码，它会起作用。 [这](http://www.w3schools.com/xml/xml_encoding.asp)是我发现的一篇关于 XML 编码的文章。我尝试使用它建议的编码，但我得到了一个不同的错误。但是，如果我完全删除编码，它就可以正常工作。

```
declare @XmlResponse as xml; 
select @XmlResponse = '<?xml version="1.0" ?><Response>©</Response>'
select @XmlResponse as myxml 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-15T15:54:17.567

问题出在`encoding attribute`. 如果您将其删除或将其*更改*为`utf-16`. 这里有[一些细节](http://www.w3schools.com/xml/xml_encoding.asp)。跟随`utf-16` [这里的作品](http://sqlfiddle.com/#!3/d41d8/8845)

```
declare @xml nvarchar(max) = 
'<?xml version="1.0" encoding="utf-16" ?><Response>©</Response>'
select convert(xml, @xml) myxml 
```

# php - Yii框架中如何使用mysql_escape_string()？

> ID：14897547
> 
> 赞同：5
> 
> 时间：2013-02-15T15:08:09.117
> 
> 标签：php, mysql, pdo, yii, mysql-escape-string

众所周知，我们不能在 Yii 等框架中使用原始 MySQL 查询。我想`mysql_escape_string`在我的项目中使用在 Yii 框架中运行的项目来摆脱用户输入中的 SQL 注入。

我知道它`mysql_escape_string`在 PHP 5.5 中已被弃用，并且我有一个 PDO 替代方案。Yii 框架中的替代方案以及 mysql_escape_string() 的 PDO 方式是什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-15T15:13:03.283

PDO 中的替代方法`mysql_escape_string`是使用准备好的语句。以 Yii 为例：

```
$user = Yii::app()->db->createCommand()
    ->select('username, password')
    ->from('tbl_user')
    ->where('id=:id', array(':id'=>$_GET['userId']))
    ->queryRow(); 
```

（来自 Yii 参考文档[http://www.yiiframework.com/doc/api/1.1/CDbCommand](http://www.yiiframework.com/doc/api/1.1/CDbCommand)）

当您通过预准备语句中的占位符传递参数时，您可以防止 SQL 注入。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2018-06-01T05:49:11.903

最好使用**准备好的语句**进行自动参数转义。但是，这种 CDbConnection 方法也应该可以解决问题：

```
Yii::app()->db->quoteValue($your_value); 
```

本质上，这引用了一个用于查询的字符串值，它是`PDO::quote()`.

[在这里](https://www.yiiframework.com/doc/api/1.1/CDbConnection#quoteValue-detail)阅读更多。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-12-09T13:54:52.353

使用准备好的查询“？”转义查询参数 占位符有其缺点（转义参数从查询主体移开，因此使某些查询更难处理；可能会有额外的数据库往返，这并不总是合理的；如果查询本质上是动态的，那么准备很多可能实际上会占用服务器资源）。

Yii 有[quoteValue](http://www.yiiframework.com/doc/api/1.1/CDbConnection#quoteValue-detail)方法，可用于在准备好的查询表单之外转义查询参数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-15T16:33:37.387

使用 CHTMlPurifier：

```
// Example
$p = new CHtmlPurifier();

$user = Yii::app()->db->createCommand()
    ->select('username, password')
    ->from('tbl_user')
    ->where('id=:id', array(':id'=>$p->purify($_GET['userId']);))
    ->queryRow(); 
```

可能在获取参数中添加恶意代码。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-12-09T14:22:09.397

如果使用 . 你不需要转义参数`ActiveRecords`。

但是，如果您想使用该`mysql_escape_string`功能，您可以尝试使用`mysqli_escape_string()`

我`Yii`在执行高复杂性查询时使用了它，如果使用模型会出现性能问题，并且我需要直接对数据库执行 SQL 查询。

为此，您可以使用`Yii::app()->db->createCommand($sql)->queryAll()`（或任何其他类似功能）。

# javascript - 尝试使用 JavaScript 将生成的文本发送到特定的 P 标签

> ID：14897548
> 
> 赞同：0
> 
> 时间：2013-02-15T15:08:09.430
> 
> 标签：javascript, html, xcode

在我开始开发的 iPhone 应用程序中，我使用 PhoneGap 的 FileWriter API 文档创建了一些示例文本，然后使用 FileReader 将文件读回给用户。目前该文件显示在一个单独的 HTML 页面中，它需要转到`<p>`id 为“mytext”的特定标签。

```
function readmyfile(){
  var myPara = documentGetElementById("mytext");
  myPara.write(text);
 } 
```

*   “mytext”是`<p>`标签中的 id，“text”是由不同函数创建的示例文本。

函数定义的第一行有效，第二行是问题所在。我需要应用程序将示例文本发送到`<p>`标签，但我不知道该怎么做。

如果您需要更多信息或代码，只需对其进行评论，我会将其放入编辑中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T15:09:51.060

HTMLElements 没有`write`方法。您想写入`innerHTML`or`innerText`属性。

```
var myPara = document.getElementById("mytext");
myPara.innerText = text; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T15:10:10.467

要获取对象，您将需要以下内容：

```
document.getElementById("mytext"); 
```

您将需要使用`innerText`或`textContent`实际将文本写入`p`元素。

尝试：

```
myPara.innerText = text; 
```

或者

```
myPara.textContent = text; 
```

# c# - Microsoft Report (RDLC) 能否用于从控制台应用程序打印

> ID：14897551
> 
> 赞同：0
> 
> 时间：2013-02-15T15:08:20.437
> 
> 标签：c#, printing, console, report

我们目前在 Crystal Reports 中完成了一个报表，该报表从控制台应用程序打印报表。报告永远不会显示在屏幕上。它只是从提供的数据中打印出一批报告。由于 Crystal Reports 的一些环境问题，我一直在考虑改用 Microsoft Report。

虽然我已经能够在控制台应用程序中创建报告并将其附加到数据库中，但在我看来，这并不是以编程方式处理报告的任何方式，更不用说执行和打印它了。这是一个正确的评估吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T15:52:07.697

使用 Microsoft Report，您可以在不使用报表查看器的情况下加载和导出报表。

这是 MS 使用 LocalReport 的示例：

[http://msdn.microsoft.com/en-us/library/microsoft.reporting.winforms.localreport(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/microsoft.reporting.winforms.localreport(v=vs.80).aspx)

您会注意到，虽然该示例发生在按钮单击事件中，但它实际上并不依赖任何 UI 方法，并且在控制台应用程序中同样可以正常运行。

相同的技术适用于 ServerReport。

如果您使用的是 Sql Server Reporting Services，则可以使用 Web 服务 ( [http://msdn.microsoft.com/en-us/library/ms152787.aspx](http://msdn.microsoft.com/en-us/library/ms152787.aspx) ) 来做几乎相同的事情。

在上述每种情况下，您都需要将报告导出为一种受支持的格式。SSRS 方面可能有更多可用信息，但它讨论的许多内容将适用于 Microsoft Report 内容（例如，DeviceInfo 设置可在此处获得：http: [//msdn.microsoft.com/en-us /图书馆/ms155395.aspx](http://msdn.microsoft.com/en-us/library/ms155395.aspx) )

# c# - 在具有多个微型站点的 Web 项目（旧版）中使用共享代码项目提供建议

> ID：14897553
> 
> 赞同：0
> 
> 时间：2013-02-15T15:08:28.767
> 
> 标签：c#, visual-studio, tfs

我有 1 个主要应用程序（旧版），其中有很多杂乱无章的东西。

[] 主要网络应用程序

现在我们有多个正在构建或已经构建的微型站点，我想清理这些东西，所以我想创建一个包含通用代码的共享项目（我知道这是革命性的！）。

我应该在主应用程序的解决方案中创建一个 AppName.Common 项目，还是只是一个单独的 TFS 存储库？

如果它是单独的或在主应用程序的解决方案中，我怎样才能让主应用程序和微站点链接到dll的编译版本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T16:00:35.200

这很难给出答案。这真的取决于你的项目和团队。

我首先想到的是在同一个解决方案中将通用代码移动到另一个项目中，这是您可以在不影响任何其他团队成员的情况下进行的更改。解决方案为您提供了相当大的灵活性，例如，您可以拥有一个包含所有内容的解决方案，以及一个仅包含站点 A 及其依赖项的解决方案，这两种解决方案可以愉快地共存。

我看不出有理由将任何东西放在单独的 TFS 存储库中，这意味着需要使用共享代码不断更新站点存储库。我认为您需要一个很好的理由来更改 TFS 设置中的任何内容，因为我认为 TFS 做任何事情都很痛苦。

# c# - 如何检查 HTTP 请求是否是外部的

> ID：14897557
> 
> 赞同：2
> 
> 时间：2013-02-15T15:08:38.847
> 
> 标签：c#, .net, http, request

我正在为我们所有的 Web 应用程序在 .NET (C#) 中编写一个 HTTP 模块。这是一个错误处理程序，它捕获所有未处理的错误并显示我们公司的错误页面。但是，我的老板希望我为内部用户显示一个错误页面，为外部用户显示另一个错误页面。我们的一些应用程序被我们领域之外的供应商使用。

我的一切设置都正常工作，除了我不知道检查请求是内部请求还是外部请求的代码。什么是 C# 代码？我想这是一个 if 语句。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T15:10:26.027

你可以使用：

```
HttpContext.Current.Request.UserHostAddress; 
```

并检查 IP 地址/主机是否在您的网络内并显示相应的页面。

# ios - 为什么隐式动画会覆盖我的 CABasicAnimation？

> ID：14897561
> 
> 赞同：3
> 
> 时间：2013-02-15T15:09:11.707
> 
> 标签：ios, animation, core-animation, calayer

每次用户做某事时，我都会尝试将 CALayer 移动几个点。我将动画设置为相对缓慢地运行，但是当我在设置动画后设置图层的位置时，隐式动画似乎接管并快速执行动画。这基本上是我的代码的样子：

```
 CGPoint point = CGPointMake(layer.position.x + 30, layer.position.y + 30);
    CABasicAnimation *animation = [CABasicAnimation animationWithKeyPath:@"position"];
    animation.fromValue = [NSValue valueWithCGPoint: layer.position];
    animation.toValue = [NSValue valueWithCGPoint: point];
    animation.duration = 4;
    animation.removedOnCompletion = NO;
    animation.fillMode = kCAFillModeForwards;
    [layer addAnimation:animation forKey:@"position"];
    layer.position = point; 
```

我尝试删除`layer.position = point`导致第一个动画按预期运行的最后一行，但是当我第二次尝试运行动画时，图层跳回到我运行第一个动画之前的图层所在的位置。目前，我能够解决此问题的唯一方法是向实现的动画添加一个委托，`animationDidStop`并在动画完成后设置图层的点。但是查看很多其他人的示例代码，这不应该是必需的。有什么我做错了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-07T14:13:17.383

你应该看看[WWDC'11](https://developer.apple.com/videos/wwdc/2011/) session 421 - Core Animation Essentials，在 45:21 有一个类似的例子。

他们首先在图层上设置新值，创建动画然后将其添加到图层。您必须注意的一件事是`fillMode`属性，它应该是`kCAFillModeBackwards`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-19T01:36:26.327

你不需要弄乱`removedOnCompletion`or `fillMode`。您看到的不正确位置*不是*由于隐式动画。您唯一没有做的就是在运行动画**之前立即设置图层的新位置。**您的问题是您在添加动画**后设置了新位置。**以下是 Swift 3 中函数式版本的外观：

```
let newPoint = CGPoint(x: layer.position.x + 30, y: layer.position.y + 30)

let animation = CABasicAnimation(keyPath: "position")
animation.fromValue = NSValue(cgPoint: layer.position)
animation.toValue = NSValue(cgPoint: newPoint)

layer.setValue(NSValue(cgPoint: newPoint), forKeyPath: "position")

layer.add(animation, forKey: nil) 
```

# c# - 以类型安全的方式使用来自另一个实例的属性子集创建一个实例？

> ID：14897563
> 
> 赞同：4
> 
> 时间：2013-02-15T15:09:18.087
> 
> 标签：c#

我有一个不想绑定 X 集合的数据源。X 应该包含某个类型 Y 的属性的子集（假设 Y 具有属性 PropOne、PropTwo、PropThree）这当然可以使用匿名类型来完成：

```
void DoBind()
{
   myGrid.DataSource = myCollectionOfYs.Select(y => new {y.PropOne, y.PropTwo});
} 
```

如何修改此方法，以便它的调用者可以以类型安全的方式指定要在投影中使用的属性？即类似的东西：

```
var expressions = new List<Expression<Func<Y, object>>>();
expressions.Add(y => y.PropOne);
expressions.Add(y => y.PropTwo);
DoBind(expressions); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T15:26:08.743

能否不将选择器函数传递给 DoBind 方法：

```
public static void DoBind<T, TResult>(ICollection<T> collection, Func<T,TResult> selector)
{

    DataSource = collection.Select(selector)
} 
```

然后这样称呼它：

```
 DoBind(list, y => new { y.Prop1, y.Prop2 });
        DoBind(list, y => new { y.Prop3, y.Prop2 }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T15:29:45.633

使用您的想法：

```
void DoBind(Func<Y, object> func)
{
    myGrid.DataSource = myCollectionOfYs.Select(funct);
} 
```

并使用如下：

```
DoBind(y => new {y.PropOne}); 
```

# ios - 是否可以显示 UIImage 的片段？

> ID：14897566
> 
> 赞同：1
> 
> 时间：2013-02-15T15:09:22.723
> 
> 标签：ios, objective-c, uiimage

有`UIImage`一些圆形。是否可以以某种方式显示此 UIImage 的某些部分。例如仅从 0 度到 45 度的区域？请帮帮我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T15:14:17.853

是的，但您必须使用 Core-Graphics 并再次渲染图像。

看看[这个教程](http://blog.pixelingene.com/2012/02/animating-pie-slices-using-a-custom-calayer/)

# python - 狮身人面像无法导入名称 gql

> ID：14897567
> 
> 赞同：1
> 
> 时间：2013-02-15T15:09:26.617
> 
> 标签：python, google-app-engine, python-sphinx, autodoc

当我尝试为我导入的模块制作文档时，Sphinx 会引发此错误`from google.appengine.ext import ndb`：

```
Traceback (most recent call last):e/adapters                                    
  File "/usr/local/lib/python2.7/dist-packages/Sphinx-1.1.3-py2.7.egg/sphinx/ext/autodoc.py", line 321, in import_object
    __import__(self.modname)
  File "/home/peto/workspace/mymodule.py", line 11, in <module>
    from google.appengine.ext import ndb
  File "/usr/lib/pymodules/python2.7/google/appengine/ext/ndb/__init__.py", line 7, in <module>
    from tasklets import *
  File "/usr/lib/pymodules/python2.7/google/appengine/ext/ndb/tasklets.py", line 68, in <module>
    from .google_imports import apiproxy_stub_map
  File "/usr/lib/pymodules/python2.7/google/appengine/ext/ndb/google_imports.py", line 33, in <module>
    from google.appengine.ext import gql
ImportError: cannot import name gql 
```

我`yaml`通过将它包含在之前解决了同样的问题，`sys.path`但它不适用于`gql`. 我的`conf.py`配置是这样的：

```
gae_path = '/usr/lib/google-app-engine'

sys.path[0:0] = [
    gae_path,
    os.path.join(gae_path, 'lib'),
    os.path.join(gae_path, 'lib', 'yaml'),
    os.path.join(gae_path, 'lib', 'yaml', 'lib'),
    os.path.join(gae_path, 'google'),
    os.path.join(gae_path, 'google', 'appengine'),
    os.path.join(gae_path, 'google', 'appengine', 'ext'),
    os.path.join(gae_path, 'google', 'appengine', 'ext', 'gql'), # The gql package is really there
    os.path.abspath('../../'),
] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T15:41:17.340

问题是我的`sys.path`另一个谷歌包里`/usr/lib/pymodules/python2.7/google/appengine`没有`ext.gql`包。我删除了那个文件夹，它就像一个魅力。

# javascript - Moment.js：日期之间的日期

> ID：14897571
> 
> 赞同：140
> 
> 时间：2013-02-15T15:09:37.567
> 
> 标签：javascript, date, momentjs

我正在尝试使用 Moment.js 检测给定日期是否在两个日期之间。从 2.0.0 版本开始，Tim 添加了`isBefore()`和`isAfter()`用于日期比较。

由于没有`isBetween()`方法，我认为这会起作用：

```
var date = moment("15/02/2013", "DD/MM/YYYY");
var startDate = moment("12/01/2013", "DD/MM/YYYY");
var endDate = moment("15/01/2013", "DD/MM/YYYY");

if (date.isBefore(endDate) 
 && date.isAfter(startDate) 
 || (date.isSame(startDate) || date.isSame(endDate))
) { 
  alert("Yay!"); 
} else {
  alert("Nay! :("); 
} 
```

我相信必须有更好的方法来做到这一点。有任何想法吗？

* * *

## 回答 #1

> 赞同：330
> 
> 时间：2015-04-07T15:45:00.910

在**2.9+ 版本中**有一个`isBetween`功能，但它是专有的：

```
var compareDate = moment("15/02/2013", "DD/MM/YYYY");
var startDate   = moment("12/01/2013", "DD/MM/YYYY");
var endDate     = moment("15/01/2013", "DD/MM/YYYY");

// omitting the optional third parameter, 'units'
compareDate.isBetween(startDate, endDate); //false in this case 
```

有一个包容性的解决方法...
`x.isBetween(a, b) || x.isSame(a) || x.isSame(b)`

...这在逻辑上等同于
`!(x.isBefore(a) || x.isAfter(b))`

在**2.13 版本**中，该`isBetween`函数有第四个可选参数`inclusivity`.

像这样使用它：

```
target.isBetween(start, finish, 'days', '()') // default exclusive
target.isBetween(start, finish, 'days', '(]') // right inclusive
target.isBetween(start, finish, 'days', '[)') // left inclusive
target.isBetween(start, finish, 'days', '[]') // all inclusive 
```

更多要考虑的单位：`years, months, days, hours, minutes, seconds, milliseconds`

注意：单位仍然是可选的。用作第三个参数以忽略单位，在`null`这种情况下，毫秒是默认粒度。

[访问官方文档](http://momentjs.com/docs/#/query/is-between/)

* * *

## 回答 #2

> 赞同：97
> 
> 时间：2013-02-15T15:56:15.697

您可以使用[moment 插件](http://momentjs.com/docs/#/plugins/range/)-> [moment-range](https://github.com/gf3/moment-range)之一来处理日期范围：

```
var startDate = new Date(2013, 1, 12)
  , endDate   = new Date(2013, 1, 15)
  , date  = new Date(2013, 2, 15)
  , range = moment().range(startDate, endDate);

range.contains(date); // false 
```

* * *

## 回答 #3

> 赞同：30
> 
> 时间：2016-10-21T10:55:40.127

您可以使用

```
moment().isSameOrBefore(Moment|String|Number|Date|Array);
moment().isSameOrAfter(Moment|String|Number|Date|Array); 
```

或者

```
moment().isBetween(moment-like, moment-like); 
```

见这里： http: [//momentjs.com/docs/#/query/](http://momentjs.com/docs/#/query/)

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2014-04-10T11:55:45.797

我相信

```
if (startDate <= date && date <= endDate) {
  alert("Yay");
} else {
  alert("Nay! :("); 
} 
```

也可以...

* * *

## 回答 #5

> 赞同：15
> 
> 时间：2015-03-17T19:10:25.207

大家好消息，有一个`isBetween`功能！更新你的图书馆；）

[http://momentjs.com/docs/#/query/is-between/](http://momentjs.com/docs/#/query/is-between/)

* * *

## 回答 #6

> 赞同：11
> 
> 时间：2016-10-17T12:28:07.213

请使用 moment.isBetween 函数的第四个参数（包容性）。例子：

```
var startDate = moment("15/02/2013", "DD/MM/YYYY");
var endDate = moment("20/02/2013", "DD/MM/YYYY");

var testDate = moment("15/02/2013", "DD/MM/YYYY");

testDate.isBetween(startDate, endDate, 'days', true); // will return true
testDate.isBetween(startDate, endDate, 'days', false); // will return false 
```

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2015-03-05T10:26:23.330

```
if (date.isBefore(endDate) 
 && date.isAfter(startDate) 
 || (date.isSame(startDate) || date.isSame(endDate)) 
```

在逻辑上与

```
if (!(date.isBefore(startDate) || date.isAfter(endDate))) 
```

这为您节省了几行代码和（在某些情况下）方法调用。

如果您只想这样做一两次，可能比拉入整个插件更容易。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2014-11-12T12:01:59.223

根据 moment js 的文档，

有一个由 Rob Dawson 编写的 Precise Range 插件，可用于显示日期/时间范围的精确、人类可读的表示，网址：[http ://codebox.org.uk/pages/moment-date-range-plugin](http://codebox.org.uk/pages/moment-date-range-plugin)

```
moment("2014-01-01 12:00:00").preciseDiff("2015-03-04 16:05:06");
// 1 year 2 months 3 days 4 hours 5 minutes 6 seconds

moment.preciseDiff("2014-01-01 12:00:00", "2014-04-20 12:00:00");
// 3 months 19 days 
```

# ios - 如何更改 UIView 或 UIImageView 中点的颜色？

> ID：14897572
> 
> 赞同：1
> 
> 时间：2013-02-15T15:09:37.943
> 
> 标签：ios, cocoa-touch, uiview, uiimageview, uicolor

我正在尝试在 UIView 中构建自己的“Flood Fill”实现。一切进展顺利，但我不知道如何更改 UIImageView 或 UIView 中特定点/像素的颜色。

如何更改 UIView 中点或像素的颜色？

**编辑：**

这是我的场景：

1-触摸事件：

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {
    UITouch *touch = [[event allTouches] anyObject];
    CGPoint loc = [touch locationInView:_image];
    UIColor *mycol=[self getPixelColorAtLocation:loc];
    if (mycondition) {

        _mylayer->point_=loc;
        _mylayer->color_=mycol;
        [_mylayer setNeedsDisplay];

    }
} 
```

在我的自定义上绘制矩形`UIView`

```
- (void)drawRect:(CGRect)rect {
    if (point_.x>0) {
        CGContextRef context = UIGraphicsGetCurrentContext();
        CGContextSetStrokeColorWithColor(context, color_.CGColor);
        CGContextFillRect(context, CGRectMake(point_.x,point_.y, 1.0, 1.0));
    }
} 
```

我现在的观点是“每次我调用`[_mylayer setNeedsDisplay];`放置的点（新颜色）时，都会删除一个新点（只有 1 个点）。

任何想法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T12:38:00.307

Before your `drawRect` method is called the entire context is cleared. You have to be able to recreate all your content at any time, not just one point. If you're subclassing another class of your own, don't forget to call the super implementation so it can add its drawing contribution.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T11:47:41.593

利用

```
 - (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event 

 - (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event 
```

改变点/像素颜色的方法。

# python - 有没有更清晰的方法可以用 numpy 求解线性方程组？

> ID：14897587
> 
> 赞同：2
> 
> 时间：2013-02-15T15:10:15.180
> 
> 标签：python, numpy, linear-algebra

我有一组 6 个方程，我想让 numpy 为我求解。所以我构造了一个 6x6 的系数矩阵，并用各种值填充它。但是，我最终为此编写的代码非常难以辨认，并且几乎没有向我的代码读者传达我想要解决的方程式。

例如，填写系数矩阵如下所示：

```
# Coefficients matrix
# Order of variables: w, X, Y, Z, s, t
A = np.mat( np.zeros((6,6)) )

A[0:3,0] = cam_inv[...,2]
A[0:3,1:4] = -np.identity(3)
A[3:6,1:4] = np.identity(3)
A[3:,4] = -eigvecs[...,0]
A[3:,5] = -eigvecs[...,1]

# Constants matrix (RHS of equation)
b = np.mat( np.zeros((6,1)) )
b[0:3,0] = -cam_inv[...,0:2] * point
b[3:,] = mean.T

res = np.linalg.solve(A,b) 
```

（其中 cam_inv、eigvecs、mean 和 point 是在别​​处计算的其他一些矩阵。）

显然上面的代码可以有更多的注释，但我觉得即使有一些注释，它仍然无法真正传达正在解决的基本方程。有没有更好的方法将方程输入求解器，从而产生更清晰的代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T13:06:14.360

The problem is that lines of A that represent the equalities don't have a one-to-one mapping to lines of code. What I do in my own work (Economics) is to have a function with a clear English name (or at least a single line of code, with no functional representation) for each of the rows of A. When necessary, I have a clear but slow or perhaps much longer version of the code that does the same thing as the code I ultimately use.

So for example (from Bretscher's Linear Algebra with Applications 1997, ex. 37 p. 29 a simple if unrealistic example), consider an economy with three industries, I1, I2, I3, each taking the other two industry outputs as inputs. What outputs should they produce to meet consumer and industrial demand?

```
A =np.zeros((3,3)) 
#Each unit of production by I1 requires 0.1 units of good 2 and .2 of good 3
A[:,0] = [0, 0.1, 0.2] 
#Each unit of production by I2 requires 0.2 units of good 1 and .5 of good 3
A[:,1] = [0.2, 0, 0.5] 
#Each unit of production by I3 requires 0.3 units of good 1 and .4 of good 2    
A[:,2] = [0.3, 0.4, 0] 
#The required production for consumers. 
b = np.array([320,150,90]).reshape(-1,1)
#The optimal production levels of x1, x2, and x3
res = np.linalg.solve(A,b) 
```

It perhaps would be slower or less terse to do what I suggest, but it would be much clearer to read.

# java - 行内编辑后如何在struts2中重新加载jqgrid

> ID：14897593
> 
> 赞同：0
> 
> 时间：2013-02-15T15:10:32.823
> 
> 标签：java, jquery, jqgrid, struts2, struts2-jquery-grid

我在网格上进行内联编辑，我想在编辑或添加或删除一行后重新加载我的 jqgrid，CRUD 方法工作正常，但网格没有重新加载！这是我的jsp文件：

```
<s:url id="remoteurlApplication" action="applicationList" />
    <s:url id="editurlApplication" action="applicationEdit" />
    <sjg:grid 
            id="idGridApplication"

            caption="Liste des applications"
            dataType="json"
            href="%{remoteurlApplication}"
            pager="true"
            navigator="true"
            navigatorSearchOptions="{sopt:['eq','ne','lt','gt']}"
            navigatorAddOptions="{height:150,reloadAfterSubmit:true}"
            navigatorEditOptions="{height:150,reloadAfterSubmit:true}"
            navigatorEdit="false"
            navigatorView="false"
            navigatorDelete="true"
            navigatorDeleteOptions="{height:150,reloadAfterSubmit:true}"
            gridModel="gridApplications"
            rowList="10,15,20"
            rowNum="15"
            editurl="%{editurlApplication}"
            editinline="true"
            viewrecords="true"
            width="1000"
            shrinkToFit="false"
        >
        <sjg:gridColumn hidden="true" name="idApplication" index="idApplication" 
                        title="ID" formatter="integer"
                        editable="true" sortable="false" width="300"
        />
        <sjg:gridColumn name="nomApplication" frozen="true" title="application" 
                        editable="true" edittype="text" 
                        width="700"
        />
    </sjg:grid> 
```

这是我的 js 文件：

```
$.subscribe('rowadd', function(event,data) {
    $("#idGridApplication").jqGrid('editGridRow',"new",{height:280,reloadAfterSubmit:false});
});
$.subscribe('searchgrid', function(event,data) {
    $("#idGridApplication").jqGrid('searchGrid', {sopt:['cn','bw','eq','ne','lt','gt','ew']} );
});
$.subscribe('showcolumns', function(event,data) {
    $("#idGridApplication").jqGrid('setColumns',{});
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-06T11:09:06.727

```
$.subscribe('rowadd', function(event,data) {

  $("#idGridApplication").jqGrid('GridUnload');   

  $("#idGridApplication").jqGrid('editGridRow',"new",{height:280,reloadAfterSubmit:false});

}); 
```

您可以使用 jqGrid 卸载功能。

```
$("[#NAME]")jqGrid('GridUnload'); 
```

# vb.net - 访问下拉列表中的数据网格控件 selectedindexchanged 事件

> ID：14897595
> 
> 赞同：2
> 
> 时间：2013-02-15T15:10:37.007
> 
> 标签：vb.net, datagrid, selectedindexchanged

HTML 代码：

```
<cc1:SPASDataGrid ID="dgPayments" runat="server" AutoGenerateColumns="false" ShowFooter="true" Ajaxify="true">
    <EditItemStyle VerticalAlign="Top"></EditItemStyle>
    <FooterStyle VerticalAlign="Top"></FooterStyle>
    <Columns>
          <asp:TemplateColumn HeaderText="Pay To">
            <FooterTemplate>
                <table id="Table3" runat="server">
                                               <tr>
                    <td>
                                                      <uc1:AnyDropDown ID="ddRolloverSource" runat="server" TableName="system_code" DisplayFieldName="description" CodeFieldName="code_value" WhereClause="PAYROLL_REQUEST" OnSelectedIndexChanged="ddRolloverSource_SelectedIndexChanged" AutoPostBack="true"></uc1:AnyDropDown>
                                                  </td>
                     </tr>
                                        </table>
            </FooterTemplate>
                              <ItemTemplate></ItemTemplate>
                              <EditItemTemplate></EditItemTemplate>
             </asp:TemplateColumn>
             <asp:TemplateColumn HeaderText="Post Tax Amount">
            <FooterTemplate>
                                      <table>
                <tr>
                   <td>
                    <cc1:SPASRadioButton Checked="true" Text="All" ID="rbPostTaxAll" GroupName="rbPostTaxAllOrRemaining" TabIndex="40" runat="server" CssClass="CheckBoxList"></cc1:SPASRadioButton>
                                           </td>
                   <td >
                    <cc1:SPASDropDownList ID="ddlPostTaxAmountOrPercentageF"  TabIndex="80" runat="server">
                    <asp:ListItem Selected="true" Value="Amount">Amount</asp:ListItem>
                    </cc1:SPASDropDownList>
                                           </td>                                        </tr>
                  </table>
            </FooterTemplate>
                              <ItemTemplate></ItemTemplate>                                    <EditItemTemplate></EditItemTemplate>                                                            
</Columns>
</cc1:SPASDataGrid> 
```

代码隐藏：

```
Protected Sub ddRolloverSource_SelectedIndexChanged(ByVal sender As Object, ByVal e As System.EventArgs)
'Disable the rbPostTaxAll and ddlPostTaxAmountOrPercentageF controls
 End Sub 
```

我正在尝试访问位于 Datagrid 中的控件，该控件位于 Datagrid 中的下拉列表的 selectedIndexChanged 事件内。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T23:21:47.640

如果您使用的是普通的 GridView，那么您就是这样做的。您只需要在每一行中找到该控件，然后您就可以禁用它

```
Protected Sub ddRolloverSource_SelectedIndexChanged(ByVal sender As Object, ByVal e As System.EventArgs)
    For Each myDR As GridViewRow In GridView1.Rows
      If myDR.RowType=GridViewRowType.DataRow Then
        Dim FoundRadioButton As RadioButton = DirectCast(myDR.FindControl("rbPostTaxAll"), RadioButton)
        Dim FoundDropDownList As DropDownList = DirectCast(myDR.FindControl("ddlPostTaxAmountOrPercentageF"), DropDownList)
        FoundRadioButton.Enabled = False
        FoundDropDownList.Enabled = False
      End If  
    Next
End Sub 
```

**编辑添加了比尔的建议**

**编辑为 DataGrid 添加了解决方案**

对于 DataGrid 使用这个

```
Protected Sub ddRolloverSource_SelectedIndexChanged(sender As Object, e As EventArgs)

    Dim RowCount As Integer = DataGrid1.Items.Count - 1
    For i As Integer = 0 To RowCount - 1
        Dim RowItem As DataGridItem = DataGrid1.Items(RowCount)
        Dim FoundRadioButton As RadioButton = DirectCast(RowItem.FindControl("rbPostTaxAll"), RadioButton)
        Dim FoundDropDownList As DropDownList = DirectCast(RowItem.FindControl("ddlPostTaxAmountOrPercentageF"), DropDownList)

        FoundRadioButton.Enabled = False
        FoundDropDownList.Enabled = False
    Next
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T18:25:15.017

终于找到了解决办法。

```
Protected Sub ddRolloverSource_SelectedIndexChanged(sender As Object, e As EventArgs)
        Dim tbl As Table = DirectCast(dgPayments.Controls(0), Table)
        Dim footer As DataGridItem = DirectCast(tbl.Controls(tbl.Controls.Count - 1), DataGridItem)
        Dim rbPostTaxAll As RadioButton = DirectCast(footer.FindControl("rbPostTaxAll"), RadioButton )
        Dim rbPostTaxRemaining As DropDownList = DirectCast(footer.FindControl("rbPostTaxRemaining"), DropDownList )

        rbPostTaxAll .Enabled = False
        rbPostTaxRemaining .Enabled = False       
End Sub 
```

# c# - 使用 XmlSerializer 反序列化具有额外属性的列表

> ID：14897598
> 
> 赞同：4
> 
> 时间：2013-02-15T15:10:53.977
> 
> 标签：c#, xml-serialization

我想反序列化以下 XML ...

```
<MyType>
    <Items>
        <ItemSum>
            <Value>3</Value>
        </ItemSum>
        <Item>
            <Value>1</Value>
        </Item>
        <Item>
            <Value>2</Value>
        </Item>
    </Items>
</MyType> 
```

...进入一种以下结构...

```
[XmlRoot("MyType")]
public class MyType
{
    [XmlArray("Items")]
    [XmlArrayItem("Item")]
    public CItems Items { get; set; }

    public class CItems : List<CItem>
    {
        [XmlElement("ItemSum")]
        public CItem ItemSum { get; set; }
    }

    public class CItem
    {
        [XmlElement("Value")]
        public int Value { get; set; }
    }
} 
```

但是，如果我尝试使用 C#'s `XmlSerializer`，则`ItemSum`属性始终为`null`. 任何想法我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T15:44:25.597

这里是：

```
public class MyType
{
    [XmlArray("Items")]
    [XmlArrayItem("ItemSum", typeof(ItemSum))]
    [XmlArrayItem("Item", typeof(SimpleItem))]
    public CItems Items { get; set; }

    public class CItems : List<Item> {}

    public class ItemSum : Item {}

    public class SimpleItem : Item {}

    public class Item
    {
        public int Value { get; set; }
    }
} 
```

这样，`ItemSum`它是列表的一个元素，您可以通过检查它的类型来知道它是哪个元素。

编辑：您还可以使用计算属性：

```
public class CItems : List<Item>
{
    [XmlIgnore]
    public ItemSum ItemSum
    {
        get { return this.OfType<ItemSum>().Single(); }
    }

    [XmlIgnore]
    public IEnumerable<SimpleItem> SimpleItems
    {
        get { return this.OfType<SimpleItem>(); }
    }
} 
```

# python - 是什么导致 Cassandra CQL 出现“输入‘无’时没有可行的替代方案”错误

> ID：14897599
> 
> 赞同：15
> 
> 时间：2013-02-15T15:10:56.940
> 
> 标签：python, cassandra, cql

我正在尝试使用新密钥将修改后的文档插入回 Cassandra DB。我很难弄清楚错误消息指向的问题是什么。在寻找其他有类似问题的人时，答案似乎与键有关，在我的情况下，无只是少数键的值。我该如何解决这个问题？

```
keys = ','.join(current.keys())
params = [':' + x for x in current.keys()]
values = ','.join(params)

query = "INSERT INTO wiki.pages (%s) Values (%s)" % (keys, values)
query = query.encode('utf-8')
cursor.execute(query, current) 
```

这是查询和当前的数据：

```
INSERT INTO wiki.pages (changed,content,meta,attachment,revision,page,editor) 
VALUES (:changed,:content,:meta,:attachment,:revision,:page,:editor)

{
    u'changed': '2013-02-15 16:31:49', 
    u'content': 'Testing', 
    u'meta': None, 
    u'attachment': None,    
    u'revision': 2, 
    u'page': u'FrontPage', 
    u'editor': 'Anonymous'
} 
```

这失败并出现以下错误：

```
cql.apivalues.ProgrammingError: 
Bad Request: line 1:123 no viable alternative at input 'None' 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-15T15:27:42.113

“没有可行的替代方案”意味着某些键的数据类型与该列族列的架构不匹配，不幸的是它并没有在错误消息中明确说明。

在我的例子中，meta 的数据类型是：

```
map<text,text> 
```

由于这个原因 None 在插入时被认为是一个坏值。我通过在插入之前用空字典替换 None 来解决问题：

```
if current['meta'] is None:
    current['meta'] = dict() 
```

CQL 驱动程序接受空 dict 作为映射类型的新值，而 None 是不允许的，即使查询映射列如果它为空则返回 None。

返回 None 并且不接受 None 感觉不直观，所以后来我决定为 cursor.fetchone() 创建自定义包装器，它返回列映射而不是列列表，并检查 MapType、ListType 或 SetType 是否返回 None . 如果有 None 值，它将用空的 dict()、list() 或 set() 替换它们，以避免像我在将修改后的数据插入回 Cassandra 时遇到的问题。这似乎工作得很好。

# javascript - 链接中的双感叹号需要括号吗？

> ID：14897602
> 
> 赞同：0
> 
> 时间：2013-02-15T15:10:57.617
> 
> 标签：javascript

创建链式命令时，是否需要在使用双感叹号时将链括在括号中，还是隐式处理？

例如：

```
!!jQuery.fn.jquery.match(/^1\.[0-4]/) 
```

上面的双重否定“jQuery”还是会做整行？如果是前者，那么我必须这样做吗？

```
!!(jQuery.fn.jquery.match(/^1\.[0-4]/)) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T15:12:46.833

这 。在 javascript 中具有最高的操作顺序，因此您的第一行应该可以正常工作。

[https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Operator_Precedence#Table](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Operator_Precedence#Table)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T15:12:21.643

成员运算符（属性之间的点）具有任何运算符的[最高优先级](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Operator_Precedence)，因此您不需要括号。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-15T15:12:41.497

[https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Operator_Precedence](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Operator_Precedence)

据此，`.`具有比`!`（实际上是其他任何东西）更高的优先级。因此，在这种情况下不需要括号。

# php - 可以在 MySQL 表中使用字符串作为您的 ID 吗？

> ID：14897604
> 
> 赞同：6
> 
> 时间：2013-02-15T15:11:17.960
> 
> 标签：php, mysql, sql

我设计了我的数据库，并使用 varchar 来制作唯一的名称。我做了一个表 products ，每个产品都有一个产品代码，这个代码是唯一的，不能重复，主要是我在父表中的主键。这个想法是，例如我有一支蜡烛，蜡烛有不同的颜色，所以不同的产品，我可以通过产品代码来区分产品名称。我没有使用或将表命名为 int 类型的可索引 id，并且在插入新项目时它会自动递增。我只是将唯一代码用作外键上其他表的索引器。

我不知道这是否是个好主意，我对 PHP MySQL 很陌生，在将值插入不同的表时遇到了一些问题，所以我使用产品代码将它们链接起来。现在我只知道 mysqli_insert_id 很久以前可以解决我的问题的东西。

那么我可以只使用字符串的非标准行ID而不是int类型的行ID吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-15T15:13:11.427

就我个人而言，我会说使用汽车公司 ID。使用您的产品代码作为 ID / 主键意味着您以后不能（或将更难）更改产品代码，这可能会导致问题。

详细说明：

如果您最终扩展您的数据库以便您的产品链接到不同的表，使用产品代码作为您的 ID 意味着如果您想更改您的产品代码，您将必须更新所有表中的每个条目。使用不是产品代码的 ID 意味着您只需在一个位置（库存表）更新代码，当您加入库存表以获取产品代码时，ID 将完成其余的工作。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-15T15:15:50.740

字符串 ID 的一大缺点是它会使索引（很多）变大，这可能会影响性能。

我会保持简单，并使用标准的自动增量 int。

我也同意@hd1 和@webnoob 的回答——行ID 应该是恒定的并且独立于它所描述的值——经典错误（在我看来）行ID 是美国SSN 或政府分配给人或公司的任何其他*唯一*编号.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-15T15:30:06.340

任何唯一的 [和理想情况下不变的] 值，一组值都可以用作数据库中的键/主键。代理键 [例如：自动增量 INT 列] 在 mySQL 中如此常见的主要原因是：

1.  很长一段时间以来，外键都是不可行的，[InnoDB 直到最近才变得*可用*] 并且在没有它们的情况下在多个表之间保持字符串键同步是一场噩梦。
2.  字符串列上的索引具有长度，并且可以比列本身短。这样您可以保持索引紧凑，但也可能导致问题。例如：`name`长度为 5 的列上的键与名称冲突`Tom Cruise`，`Tom Clancy`因为键是`Tom C`.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-15T15:24:20.283

只要我们有关系数据库，自然键与代理键的优缺点就会继续争论不休。我说：做你喜欢的事，但如果你要使用代理，尽量确保，在可能的情况下，还有一种通过自然键唯一标识行的方法。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-15T15:18:08.727

字符串需要被解析为相等（查询、连接等）。因此，存在性能影响。这意味着你应该尽可能避免它。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-15T15:14:42.530

你**可以**做到，但仅仅因为你可以，并不意味着你**应该**。理论上，主键在数据库之外不应该有任何意义。根据定义，产品代码在数据库之外具有意义。

# selenium-webdriver - FindElement by Name 失败但通过 Xpath 成功？

> ID：14897607
> 
> 赞同：0
> 
> 时间：2013-02-15T15:11:30.010
> 
> 标签：selenium-webdriver, junit4

这对我来说没有任何意义。这是我试图与之交互的页面元素的源代码：

```
<li>
    <input type="checkbox" name="includeStudents" value="true" checked />
     <span style="cursor: pointer;"
          onclick="javascript:checkBoxSingleClick(document.userSearchForm.includeStudents);"
          ondblclick="javascript:userTypeDoubleClick(document.userSearchForm, document.userSearchForm.includeStudents);">
     <strong><u>S</u>tudent</strong>
       </span>
 </li> 
```

当我尝试使用 By.name 查找元素时 - 我得到一个元素不可见的错误，但是，当我尝试使用 By.xpath 查找相同的元素时 - 一切正常。这是我测试的代码。

```
wait.until(ExpectedConditions.visibilityOfElementLocated(By.name("includeStudents")));
    driver.findElement(By.name("includeStudents")).click();
    //driver.findElement(By.xpath("//*[@id='ed-userSearchCheckboxUserTypeFilter']/li[2]/input")).click(); 
```

我添加了等待以确认这不仅仅是时间问题。使用 by.name 时出现等待元素可见性的超时错误

我在这里想念什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-14T16:12:15.807

我可能完全不在这儿了，但是您是否检查过该元素是否不在 webdrivers 实例的父级中？例如，如果您的代码位于您尚未进入的框架内，那么它将无法定位 Xpath。它将抛出一个错误，即不存在任何元素并且 webdriver 在 x 秒后超时。

```
driver.switchTo().frame("MyElementFrame");    
driver.findElement(By.xpath("//*[@id='ed-userSearchCheckboxUserTypeFilter']/li[2]/input")).click(); 
```

# javascript - 在 routeChange 上取消 AngularJS $timeout

> ID：14897608
> 
> 赞同：37
> 
> 时间：2013-02-15T15:11:32.867
> 
> 标签：javascript, timeout, angularjs

在我的应用程序的特定页面上，我想在设定的时间间隔内进行服务器调用以更新信息。我偶然发现了一个问题。当用户离开相关页面时，我想取消我的 $timeout，这样应用程序就不会尝试使用不再存在的东西。

关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：106
> 
> 时间：2013-08-05T13:37:59.597

像这样使用`$timeout.cancel`：

```
yourTimer = $timeout(function() { /* ... */ }, 5000);
$timeout.cancel(yourTimer); 
```

[参考](http://docs.angularjs.org/api/ng.%24timeout)

# c# - winRT存储文件问题

> ID：14897612
> 
> 赞同：2
> 
> 时间：2013-02-15T15:11:39.077
> 
> 标签：c#, windows-8, winrt-xaml, c#-5.0

```
 public static async Task SaveFileAsync(string FileName, T data)
    {
        MemoryStream memStream = new MemoryStream();
        DataContractSerializer serializer = new DataContractSerializer(typeof(T));
        serializer.WriteObject(memStream, data);

        StorageFile file = await ApplicationData.Current.LocalFolder.CreateFileAsync(FileName,
            CreationCollisionOption.ReplaceExisting);
        using (Stream stream = await file.OpenStreamForWriteAsync())
        {
            memStream.Seek(0, SeekOrigin.Begin);
            await memStream.CopyToAsync(stream);
            await stream.FlushAsync();
        }
    }

    public static async Task<T> RestoreFileAsync(string FileName)
    {
        T result = default(T);
        try
        {
            StorageFile file = await ApplicationData.Current.LocalFolder.GetFileAsync(FileName);
            using (IInputStream inStream = await file.OpenSequentialReadAsync())
            {
                DataContractSerializer serializer = new DataContractSerializer(typeof(T));
                result = (T)serializer.ReadObject(inStream.AsStreamForRead());
                return result;
            }
        }

        catch (FileNotFoundException)
        {
            return default(T);
        }
    } 
```

我正在使用此代码来保存和检索我的数据，它工作正常。有时我启动我的应用程序，突然所有数据都被删除了，我真的不知道为什么。我尝试`DataContractJsonSerializer`将其保存为 .txt 文件，但仍然是同样的问题。没有异常或错误。我还检查了它自己的文件，.xml 和 .txt 删除了所有内容。我其实很困惑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T19:22:45.877

像这样的问题通常是锁定问题。当应用程序关闭并且生成的文件为空时，您将打开流。这是意料之中的。有时，您在多个单元测试中使用异步操作会产生竞争条件。这是意料之中的。您可以通过锁定线程来解决此问题。

阅读这篇文章，看看它是否对您有帮助：http: [//blog.jerrynixon.com/2013/02/walkthrough-locking-asynchronous-file.html](http://blog.jerrynixon.com/2013/02/walkthrough-locking-asynchronous-file.html)我真的希望它可以。

# asp.net - 更新面板的问题

> ID：14897618
> 
> 赞同：2
> 
> 时间：2013-02-15T15:12:11.837
> 
> 标签：asp.net, updatepanel

当我将 UpdatePanel 拖放到我的用户控件上时，我在用户控件的自动生成文件中得到了这个变量：

```
 /// <summary>
    /// UpdatePanel1 control.
    /// </summary>
    /// <remarks>
    /// Auto-generated field.
    /// To modify move field declaration from designer file to code-behind file.
    /// </remarks>
    protected global::System.Web.UI.WebControls.UpdatePanel UpdatePanel1; 
```

但是，UpdatePanel 位于完全不同的命名空间中：

```
 /// <summary>
    /// UpdatePanel1 control.
    /// </summary>
    /// <remarks>
    /// Auto-generated field.
    /// To modify move field declaration from designer file to code-behind file.
    /// </remarks>
    protected global::System.Web.UI.UpdatePanel UpdatePanel1; 
```

我在程序集配置部分下的 web.config 中有此配置条目：

```
 <add assembly="System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/> 
```

为什么这种行为会发生在我身上？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-04-18T23:32:24.237

1)每次修改 ascx 文件时都将其重置`System.Web.UI.WebControls.WebParts.UpdatePanel`为（与 ScriptManager 相同）。推荐，但很乏味。`System.Web.UI.UpdatePanel`

2）我发现在 ASCX 文件顶部使用 Register 命令似乎正确地覆盖了设计器的默认行为，以选择 3.5 控件的 4.0 位置（我认为这是根本问题，它是 4.0 设计器倒退与 3.5 兼容）。推荐，但在使用 ASP 添加控件时要小心：

```
<%@ Register TagPrefix="asp" Namespace="System.Web.UI" Assembly="System.Web"%>
...
<asp:ScriptManager runat="server" ID="smLocationsMap" /> 
```

3) 您可以在您的 bin 文件夹中包含`system.web.dll`, 和(安全/其他问题)。`system.web.design.dll`不建议。

[博客链接](http://blogs.msdn.com/b/nikhil_agarwal/archive/2014/04/19/asp-net-issue-with-auto-generated-designer-page.aspx)

# javascript - Fancybox 里面的 fancybox 设置高度

> ID：14897621
> 
> 赞同：0
> 
> 时间：2013-02-15T15:12:20.730
> 
> 标签：javascript, jquery, fancybox-2

我有我调用fancybox2的主页。当fancybox iframe 打开时，我在该页面中有一个链接，该链接将打开另一个fancybox iframe。现在的问题是：

1.  当内容“较小”时，我无法将其移至打开页面的顶部（查看示例站点上的源代码）

2.  当内容较大时 - 我无法设置高度以避免滚动条。

当我使用如下选择器时： parent.$('.SELECTOR').fancybox({ ...在这种情况下，我的“第一个”fancybox 页面将关闭，我需要打开它，因为第二个“fancybox”会将一些数据发送到“第一个“fancybox 页面（表单所在的位置），最后一次，当提交该表单时，它全部转移到“主页”......

我知道这很难理解，但这里有一个示例链接：

[http://wwiz.webatu.com/](http://wwiz.webatu.com/)

那么如何动态设置第一个“fancybox”的高度呢？

谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T22:17:43.583

好的，我想通了，这里是解决方案....更像是 hack...但它适用于所有浏览器...而且它的作用是：它实际上是 MASKS（不会删除它 -> 因为我需要通过回调它）第一个 iframe（删除阴影，内容甚至关闭按钮）和关闭事件之后 - 它恢复第一个 iframe :)

哦，还有额外的“发布消息”的东西，因为整个网站实际上是通过 iframe 加载的（跨域的东西），这是在常规 iframe 中工作的解决方案，它加载了 fancybox1，加载了 fancybox2 的弹出窗口......无论如何，解释起来太复杂了，以及任何寻求可行解决方案的人 - 给你：

```
 $('.addmember').fancybox({
            openEffect : 'elastic',
            closeEffect : 'elastic',
            fitToView : false,
            nextSpeed: 0, //important
            prevSpeed: 0, //important
            beforeShow: function(){
            $_returnvalue = false;
             this.width = ($('.fancybox-iframe').contents().find('#popup-add-member').width());
             this.height = ($('.fancybox-iframe').contents().find('#popup-add-member').height());
     var ifrchild = $('.fancybox-iframe').contents().find('#popup-add-member').height()+60;
     parent.$('.fancybox-skin').attr('style', function(i,s) { return s + 'height: '+ifrchild+'px;' });
     parent.$('.fancybox-inner').attr('style', function(i,s) { return s + 'height: '+ifrchild+'px;' });
     $('.fancybox-wrap').attr('style', 'top: 15px !important;');
     parent.$('.fancybox-close').addClass("fancynodisplay");
     parent.$('.fancybox-overlay').addClass("fancybox-hidescroll");
     $('.fancybox-overlay').addClass("fancybox-hideoverlay");
     $('.fancybox-overlay').addClass("fancybox-hidescroll");
     $('.fancybox-skin').addClass("fancybox-hideshadow");
     parent.$('.fancybox-skin').addClass("fancybox-hideshadow");
     parent.$('.fancybox-skin').addClass("fancybox-hideskin");
     $('#hide-on-open').attr('style', 'display:none;');
            }, 
            afterShow: function(){
     },
            afterClose : function() {
                $('#hide-on-open').attr('style', 'display:block;');
                var ifrmain = $('#schedule-members').height();
                parent.$('.fancybox-skin').attr('style', function(i,s) { return s + 'height: '+ifrmain+'px;' });
      parent.$('.fancybox-inner').attr('style', function(i,s) { return s + 'height: '+ifrmain+'px;' });

                parent.$('.fancybox-close').removeClass("fancynodisplay");
                parent.$('.fancybox-overlay').removeClass("fancybox-hidescroll");
                $('.fancybox-overlay').removeClass("fancybox-hidescroll");
                parent.$('.fancybox-skin').removeClass("fancybox-hideskin");
                        if ($_returnvalue != false && $_returnvalue.response == "OK" )
                        {
                            // MY CALLBACK FUNCTIONS 
                        }

                        window.top.postMessage($('#wrap').height()+80, 'myiframe');
            },
            onUpdate : { autoHeight: true},
            beforeLoad :    function() {
     var ifrchild = $('.fancybox-iframe').contents().find('#popup-add-member').height()+60;
     window.top.postMessage(ifrchild, 'myiframe');                  
            },
            helpers : {
                  overlay : {closeClick: false}
            }
    }); 
```

和 CSS 来实现这一点：

```
.fancybox-close.fancynodisplay {
height: 0px !important;
width: 0px !important;
display: none !important;}
.fancybox-overlay.fancybox-hidescroll {
overflow: hidden !important;
}
.fancybox-opened .fancybox-skin.fancybox-hideshadow {
-webkit-box-shadow: none !important;
   -moz-box-shadow: none !important;
        box-shadow:none !important;}
.fancybox-hideskin {
background: none repeat scroll 0 0 rgba(255, 255, 255, 0) !important;
position: relative !important;
text-shadow: none !important;
}
.fancybox-hideoverlay {
background: none;
} 
```

# cakephp - cake php auth 登录？

> ID：14897626
> 
> 赞同：-1
> 
> 时间：2013-02-15T15:12:41.137
> 
> 标签：cakephp

我只想传递参数抛出这个；像 ：

```
$data=array('username'=>'andrew','password'=>'123456');
$this->Auth->login($data); 
```

这里作为`$data`；我输入什么都会登录；我希望它检查授权用户，当我输入正确的用户名和密码时它工作正常吗？

我如何通过传递参数`auth`调用 cake php 2.0 中的组件手动登录；`$this->Auth->login()`任何解决方案？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-15T15:14:49.773

您显然没有仔细阅读文档。无论如何，您要做的是“覆盖” Auth 数据。只有当用户已经登录并且您通过编辑表单修改数据（并且想要更新会话数据）时，您才能这样做。

你可能永远不会用这种方式登录！使用 $this->request->data 和 Auth->login() 没有任何参数，如文档中所述：

```
$this->request->data = array('User' =>
    array('username'=>'andrew', 'password'=>'123456')
); 
```

该组件将自动使用您的请求对象中提供的数据（就像任何已发布的表单一样）。

# php - 从不一致的 XML 文件加载 XML INFILE

> ID：14897631
> 
> 赞同：0
> 
> 时间：2013-02-15T15:12:47.380
> 
> 标签：php, mysql, xml

如何在像这样的 xml 上使用 LOAD XML INFILE。我试图用 php 中的 simplexml_load_file 循环遍历它，但是这个文件太大了，几个小时后脚本就停止了运行。我不知道如何使用 LOAD XML INFILE。我确实尝试阅读文档，但无法弄清楚在我的情况下它是如何工作的，每个项目中有多个类别字段并且它们都命名相同。

```
<item>
    <id>1</id>
    <category>
        <id>1</id>
        <name>Accessories</name>
    </category>
    <category>
        <id>15</id>
        <name>Home Accessories</name>
    </category>
</item>
<item>
    <id>2</id>
    <category>
        <id>13</id>
        <name>Tools</name>
    </category>
    <category>
        <id>39</id>
        <name>Power Tools</name>
    </category>
    <bullet>
        <point>Will cut plywood, OSB, paneling and finish cut pine</point>
        <seqNbr>10</seqNbr>
    </bullet>
    <bullet>
        <point>Smooth celcon slider locks blade in position</point>
        <seqNbr>40</seqNbr>
    </bullet>
</item> 
```

此外，有些项目还有属性和项目符号等附加字段，它们并不一致，这意味着一个可以有 2 个属性，另一个可以有 10 个。

# php - 在 PDO 查询中使用 COUNT 和内连接

> ID：14897632
> 
> 赞同：0
> 
> 时间：2013-02-15T15:12:49.837
> 
> 标签：php, mysql

将此 SQL 语句编写为 PDO 查询的最佳方法是什么？我希望它以数字形式返回查询数。

```
SELECT  COUNT(*) totalCount
FROM    ts_room a
        INNER JOIN ts_roompref b
            ON a.id = b.room_ID
        INNER JOIN ts_request c
            ON b.request_ID = c.roompref_ID
WHERE   c.day_ID = 1 AND c.period_ID = 1 
```

这就是我的想法：

```
$room_ID = $_POST["room"];

$sql = "SELECT  COUNT(*) totalCount
FROM    ts_room a
        INNER JOIN ts_roompref b
            ON a.id = b.:room_ID
        INNER JOIN ts_request c
            ON b.request_ID = c.roompref_ID
WHERE   c.day_ID = 1 AND c.period_ID = 1";

$stm = $pdo->prepare( $sql );
$stm->execute( array( ':room_ID' => $room_ID) );
$rows = $stm->fetchAll();

// echo row count here
$count = $stm->rowCount(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T16:39:03.197

如果要获取总行数，请使用[fetchColumn](http://www.php.net/manual/en/pdostatement.fetchcolumn.php)函数。

还有一个更正，因为你在这里使用**JOIN**所以在**ON 子句**中，你不能使用变量值，只能使用列名。

```
$room_ID = $_POST["room"];

$sql = "SELECT  COUNT(*) totalCount
FROM    ts_room a
        INNER JOIN ts_roompref b
            ON a.id = b.room_ID
        INNER JOIN ts_request c
            ON b.request_ID = c.roompref_ID
WHERE   c.day_ID = 1 AND c.period_ID = 1 and b.room_ID=:room_ID";

$stm = $pdo->prepare( $sql );
$stm->execute( array( ':room_ID' => $room_ID) );
$rows = $stm->fetchColumn(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T15:37:40.853

请检查您的查询一次：我已经突出显示了您做错的条件，这将放在 where 子句中。

```
 SELECT  COUNT(*) totalCount
    FROM    ts_room a
            INNER JOIN ts_roompref b
                 // ON a.id = b.:room_ID
            INNER JOIN ts_request c
                ON b.request_ID = c.roompref_ID
    WHERE   c.day_ID = 1 AND c.period_ID = 1 
```

我想您的代码将如下所示：

$room_ID = $_POST["房间"];

```
$sql = "SELECT  COUNT(*) totalCount
FROM    ts_room a
        INNER JOIN ts_roompref b
            ON a.id = b.room_ID
        INNER JOIN ts_request c
            ON b.request_ID = c.roompref_ID
WHERE   c.day_ID = 1 AND c.period_ID = 1 and b.room_ID=:room_ID";

$stm = $pdo->prepare( $sql );
$stm->execute( array( ':room_ID' => $room_ID) );
$rows = $stm->fetchAll(); 
```

# css - CSS属性选择器，多个类，通配符应用于一个类定义可能吗？

> ID：14897634
> 
> 赞同：5
> 
> 时间：2013-02-15T15:12:50.167
> 
> 标签：css, css-selectors

考虑以下具有 2 种可能性的标记：

```
<input class="someclass ng-valid ng-invalid-otherstuff ng-valid-amountdetermined   some-other-class">
<input class="someclass ng-invalid ng-valid-otherstuff ng-invalid-amountdetermined some-other-class"> 
```

“金额”是一个可变词，可以是任何东西，“消息”，“帐户”，任何东西。我需要能够在 CSS 中做出区分。属性选择器失败，因为它考虑了 ^、*、| 的整个属性值。甚至～。

我需要挑出一个类，然后检查该类是否是“ng-valid-*determined”。在我看来，这根本不可能使用 css，或者我错过了什么？

一种解决方法是生成“ng-valid-determined*”，但这正是我想要避免的。有人对此有任何想法吗？作为澄清，我不知道''someclasses'是什么，我不能用它们来精确定位我的css选择器。问题正是我需要的类可能位于类数组中的任何位置。

我创建了一个小提琴来可视化问题，这当然不是解决方案，因为我需要能够定位 ng-valid-*determined 或 ng-invalid-*determined

[http://jsfiddle.net/mC2EW/](http://jsfiddle.net/mC2EW/)

不要与[使用两个带有 * 的 css 属性选择器混淆](https://stackoverflow.com/questions/11180757/using-two-css-attribute-selectors-with)

//edit1：简化了问题 //edit2：添加了一个小提琴

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-05-15T00:32:43.373

尽管这是一个旧的，但我一直在寻找类似的解决方案。我相信我有最好的答案，请看我的[笔](http://codepen.io/mofeenster/pen/jPqXRq)。

**HTML**

```
<input class="someclass ng-valid ng-invalid-otherstuff
ng-valid-amountdetermined some-other-class"> <input class="someclass
ng-invalid ng-valid-otherstuff ng-invalid-amountdetermined
some-other-class"> 
```

**CSS**

```
[class*=ng-valid][class*=ng-invalid-otherstuff][class*=determined] {
background: #000; }
[class*=ng-invalid][class*=ng-valid-otherstuff][class*=determined] {
background: #ddd; } 
```

事实证明，虽然您不能在同一个属性选择器中定位多个通配符，但您可以链接通配符属性选择器来找到您的目标。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T15:23:37.073

我认为你可以在这里做的最好的事情是寻找 .someclass ，然后检查它是否也已经*确定*：

```
input.someclass[class*="determined"] { background-color: red; } 
```

小提琴：http: [//jsfiddle.net/gaE5X/](http://jsfiddle.net/gaE5X/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-15T15:20:59.770

您是否有理由不能简单地使用`[class*="amount"]`？

[JSFiddle 示例](http://jsfiddle.net/z4x5Z/)。

听起来您正在使用类来保存更适合`data-*`属性的内容。

```
<input class="someClass determined" data-validity="valid" data-amount-determined="false" />
<input class="someClass determined" data-validity="invalid" data-amount-determined="true" /> 
```

[JSFiddle 示例使用`data`](http://jsfiddle.net/z4x5Z/2/).

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-16T03:16:07.863

抱歉，鉴于您目前的情况，仅使用选择器是不可行的。属性选择器无法在值的中间使用通配符，也无法检查以空格分隔的属性中的各个组件，类选择器也不提供此类功能。您可以认为这是 AngularJS 或 CSS 之一的设计缺陷，但无论是什么，纯 CSS 选择器都不可行。

您将**不得不**以不同的方式解决这个问题。正如评论中提到的，您可以轻松地`ng-class`添加自定义类以使选择更容易，或者按照另一个答案中的建议，考虑使用数据属性来存储验证信息。

# css - CSS3 媒体调用不起作用

> ID：14897644
> 
> 赞同：0
> 
> 时间：2013-02-15T15:13:16.063
> 
> 标签：css

这一定是非常简单的事情，而且它正在工作。我正在使用 css3 媒体调用来构建响应式网站，但我一生都无法理解为什么以下内容不再起作用。

这里的页面代码：

```
<!doctype html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Untitled Document</title>

<link href="assets/css/layout.css" rel="stylesheet" type="text/css">
</head>

<body>
</body>
</html> 
```

和 layout.css：

```
body {
background-color:#FFF;
}

@media screen and max-width 980px {
body {
background-color:aqua;
}
}

@media screen and max-width 700px {
body {
background-color:#ff4500;
}
}

@media screen and max-width 480px {
body {
background-color:#ffd700;
}
} 
```

那有什么问题？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T15:28:15.807

我注意到您的媒体查询中有几个格式问题；尝试改用这种格式：

```
@media screen and (max-width: 700px) {

    ...

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T15:16:12.147

在body标签中放一些东西。因为它是空的，所以没有显示。

# novell - 如何取消选择适用于 Windows 的 Novell Client 4.9 上的仅工作站选项

> ID：14897650
> 
> 赞同：1
> 
> 时间：2013-02-15T15:13:38.970
> 
> 标签：novell

默认情况下选中该复选框，有时我在登录时忘记取消选中它，然后不会将工作站连接到网络。我希望不必每次登录工作站时都取消选中此复选框。

我查看了有关更改注册表项的这些线程，但没有成功。

[在登录期间控制“仅限工作站”功能](http://support.novell.com/docs/Tids/Solutions/10086294.html)

[默认情况下始终选中仅工作站复选框](http://forums.novell.com/novell-product-discussions/file-networking-services/open-enterprise-server/oes-platform-independent/oes-client-windows/379946-workstation-only-checkbox-always-selected-default.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T18:05:12.653

在您的工具栏中，N 图标，然后是客户端属性。可能也可以从控制面板到达那里。

系统登录配置文件：从列表中选择默认，然后选择属性。

现在我确定，Workstation Only 是一个复选框，但不是在我正在运行的 Novell Client 2 SP1 上。但是有一个复选框，成功登录后保存配置文件，这意味着它应该记住您上次使用的配置。

# php - 验证 FORM 数据以用于从 PHP 中的多维数组中检索值

> ID：14897657
> 
> 赞同：0
> 
> 时间：2013-02-15T15:14:01.960
> 
> 标签：php

我想知道如何在使用它从 process.php 上的 $laws 数组中检索特定文章之前验证来自 form.php 的数据

(form.php)

```
<form action="process.php" method="get">
Group:
<select name="group">
    <option value="group1">Group1</option>
    <option value="group2">Group2</option>
</select>

Chapter:
<input type="text" name="chapter">

Article:
<input type="text" name="article">

<input type="submit" value="Go to Article">

</form> 
```

（进程.php）

```
<?php
session_start();
$laws=array(
       "group1"=>array(
                      "1"=>array(
                                "1"=>"This is article (1) in chapter (1) of (group1)",
                                "2"=>"This is article (2) in chapter (1) of (group1)",
                                "3"=>"This is article (3) in chapter (1) of (group1)",
                                ),
                      "2"=>array(
                                "1"=>"This is article (1) in chapter (2) of (group1)",
                                "2"=>"This is article (2) in chapter (2) of (group1)",
                                "3"=>"This is article (3) in chapter (2) of (group1)",
                                ),
                       ),
       "group2"=>array(
                      "1"=>array(
                                "1"=>"This is article (1) in chapter (1) of (group2)",
                                "2"=>"This is article (2) in chapter (1) of (group2)",
                                "3"=>"This is article (3) in chapter (1) of (group2)",
                                ),
                      "2"=>array(
                                "1"=>"This is article (1) in chapter (2) of (group2)",
                                "2"=>"This is article (2) in chapter (2) of (group2)",
                                "3"=>"This is article (3) in chapter (2) of (group2)",
                                ),

       )
       );

$_SESSION['group'] = $_GET['group'];
$_SESSION['chapter'] = $_GET['chapter'];
$_SESSION['article'] = $_GET['article'];

$group = $_SESSION['group'];
$chapter = $_SESSION['chapter'];
$article = $_SESSION['article'];

// Echo Article from Laws Array

echo $group . " chapter" . $chapter . " article" . $article . "<br/>";
echo $laws[$group][$chapter][$article];

?>

<br/>

<a href="sample.php">PREVIOUS Articles</a> <a href="sample.php">NEXT Articles</a> 
```

问题 1

在使用来自 $_GET 变量的数据设置 $_SESSION 值之前，如何使用以下方案验证表单中的 $_GET 值？

```
Data in CHAPTER and ARTICLE input forms:
    are not empty;
    are numbers;
    are not less than or greater than the existing array Chapters and Article numbers;
    do not have spaces;
    do not have decimals;
    do not have letters;
    do not have negative, positive and; or other signs; 
```

问题2

我应该在下一篇文章和上一篇文章链接中添加什么 PHP 代码，以在当前回显的文章之后回显下一篇文章？

我应该如何将此代码添加到链接中；

由于 NEXT Article 和 PREVIOUS Article 链接将不再访问特定章节中不存在的数组，以防止 ERRORS 被回显，因此当最后一篇文章或第一篇文章被回显时，应该对页面执行什么操作。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T15:33:43.073

问题1：你试过intval吗？[http://php.net/manual/en/function.intval.php](http://php.net/manual/en/function.intval.php) 所以，按照你想要的顺序，

```
if(isset($_GET['group']) && !empty($_GET['group']) && is_int($_GET['group'])){
    $groupval = intval($_GET['group']);
    $_SESSION['group'] = ($groupval > 0)? $groupval : 1; //A group cannot be 0
} 
```

您也可以对章节和文章使用类似的语句。

问题 2：您只需使用返回给您的 get 值，加一和减一。例如：

`echo '<a href="process.php?group=' . $group . '&article=' . ($article+1) . '">Next Article</a>'`

请注意，如果这是最后一篇文章，您必须编写检查，然后继续下一组/接下来的内容。

# git - Git - 恢复丢失的提交

> ID：14897664
> 
> 赞同：0
> 
> 时间：2013-02-15T15:14:35.393
> 
> 标签：git

随着我所在团队的壮大，我们看到了许多由于合并错误导致提交丢失的情况。

我们已经在进行教育方面的工作，但是当这种情况发生时，git 中恢复丢失的提交的最佳方法是什么——我听说过使用类似的命令`git bisect`并手动检查每个提交。还有什么可以帮助的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T15:16:48.317

看起来你需要[git fsck --lost-found](http://www.kernel.org/pub/software/scm/git/docs/git-fsck.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T15:17:08.790

`git reflog`可用于找出不再在任何分支上但尚未被 gc'ed 的提交的提交哈希。

# css - ie7中的CSS过滤器旋转错误

> ID：14897667
> 
> 赞同：0
> 
> 时间：2013-02-15T15:14:40.510
> 
> 标签：css, filter, rotation, internet-explorer-7

所以这是我的问题：

我在覆盖 div 上显示一个 iframe。在这个 iframe 中，显示了一个在它们之间绘制了箭头的圆圈布局（参见图片：http: [//i49.tinypic.com/oprb00.png](http://i49.tinypic.com/oprb00.png)）。箭头需要旋转，这是通过 css 变换和 IE 的 -filter 解决方案完成的。箭头应旋转的度数是动态计算的，并使用 Jquery 设置。

我面临的问题是一个只出现在 ie7 中的错误（请注意，它没有出现在 ie9 的 ie7-compatibility-mode 中。）。

旋转本身在 ie7 中有效，但问题是在旋转的项目周围会出现一个透明框，允许您“透过”Iframe 看到它，它包含 div。这个透明框与旋转的 div 具有相同的尺寸（高度、宽度）。如果我删除旋转的项目，透明度就会消失。

问题本身不在于如何设置旋转功能，而在于为什么会出现这个“透明”框，只是想知道这是否发生在其他人身上。

我尝试通过向相关元素添加更高的 z-index 属性来解决这个问题，但没有成功。

事发图片：http: [//i49.tinypic.com/oprb00.png](http://i49.tinypic.com/oprb00.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T22:46:21.237

如果不显示任何代码，很难看到问题，但请允许我提出一个替代建议：

有一个名为[CSS SandPaper](http://www.useragentman.com/blog/csssandpaper-a-css3-javascript-library/)的 Javascript 库，它允许旧 IE 版本使用标准 CSS`transform:rotate`样式。

如果您在使用特定于 IE 的过滤器矩阵时遇到问题（使用起来非常棘手），您可以尝试使用它来使您的代码更易于使用并且在所有浏览器中更相似。

我知道这不是问题的直接答案，但我希望这会有所帮助。

# excel - Excel 2010 VBA .. 将系列添加到现有图表

> ID：14897672
> 
> 赞同：1
> 
> 时间：2013-02-15T15:14:53.817
> 
> 标签：excel, vba

我目前正在尝试使用数据填充图表，用户只需按下电子表格上的按钮即可。我遇到的问题是我需要将数据复制到数据表的按钮，然后图表将从数据表中填充。我可以这样做，但我需要在图表上为每个新数据创建一个新系列

```
Sub RoundedRectangle2_Click()

End Sub

Sub MAPS()
Sheets("MAPS_FORM").Range("e47").Copy
Sheets("Data_Sheet").Range("b65536").End(xlUp).Offset(1, 0).PasteSpecial _
Paste:=xlPasteValues
Application.CutCopyMode = False
Sheets("MAPS_FORM").Range("d2").Copy
Sheets("Data_Sheet").Range("a65536").End(xlUp).Offset(1, 0).PasteSpecial _
Paste:=xlPasteValues
Application.CutCopyMode = False

Sheets("Data_Sheet").Range("b2:b46").Copy
Charts("Chart1").SeriesCollection.Paste

Range("e6:i8").ClearContents
Range("e12:i19").ClearContents
Range("e23:i27").ClearContents
Range("e31:i36").ClearContents
Range("e40:i43").ClearContents
Range("d2").ClearContents
Sheets("Data_Sheet").Select
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T15:54:13.713

添加数据后只需更改`.SetSourceData`属性即可。

举个例子

假设您的数据来自`A1:A5`并且图表基于该范围。请看下面的截图

![在此处输入图像描述](../Images/be5362ef42df6083b6d1d833e3c4f7bd.png)

现在假设您添加的数据来自`B1:B5`并希望将其显示为图表中的系列，然后只需使用此代码

```
Option Explicit

'~~> Please amend the code as applicable
Sub Sample()
    Dim objChrt As ChartObject
    Dim chrt As Chart

    Set objChrt = ActiveSheet.ChartObjects("Chart 1")
    Set chrt = objChrt.Chart

    With chrt
        .SetSourceData (ActiveSheet.Range("A1:B5"))
    End With
End Sub 
```

当您运行代码时，图表将自动显示新系列。

![在此处输入图像描述](../Images/3fb2ee86d432c8933d23104b0061ce04.png)

# r - 在 Excel 中通过 RODBC 导出数据

> ID：14897674
> 
> 赞同：0
> 
> 时间：2013-02-15T15:14:58.480
> 
> 标签：r, export-to-excel, rodbc

在 R 中执行计算后，我们希望将结果导出到 Excel 文件中，以便进行一些格式化并添加图形。我犯规了以下页面

[http://learnr.wordpress.com/2009/10/06/export-data-frames-to-multi-worksheet-excel-file/](http://learnr.wordpress.com/2009/10/06/export-data-frames-to-multi-worksheet-excel-file/)

报告以下代码

```
> library(RODBC) 

> save2excel <- function(x) sqlSave(xlsFile,
     x, tablename = x$Species[1], rownames = FALSE)    

> xlsFile <- odbcConnectExcel("RODBC.xls", readOnly = FALSE)
> l_ply(testlist, save2excel)
> odbcCloseAll() 
```

我在实现它时遇到了一些困难，实际上它会返回一个错误，例如：

```
Errore in sqlSave(xlsFile, x, tablename = NULL, rownames = FALSE) : 
  should be a data frame 
```

你有什么提示吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T20:47:18.347

是的。看起来 x 是一个列表/向量。您只能将数据框保存为 excel 工作表。如果您提供有关数据结构的更多信息，我们可以为您提供帮助。

一种最通用的方法，如果您的数据采用列表/向量形式，它可能是一个概率，但如果它是一个逻辑表（矩阵/数据表等），您可以将其`as.data.frame(x)`设为 DF。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-31T21:52:31.797

我使用了相同的（很棒的）博客文章并遇到了两个相同的错误（数据框和 excel 文件已损坏）。听起来您已经弄清楚了 data.frame 部分，但仍然收到损坏的文件错误。我不得不删除博主帖子的功能方面以消除该错误。

```
newdat <- data.frame(rnorm(100,0,10))

xlsFile <- odbcConnectExcel("Test.xls", readOnly = FALSE)
sqlSave(xlsFile,newdat, append=FALSE)
odbcCloseAll() 
```

这应该在名为“Test.xls”的文件中创建一个名为“newdat”的新工作表。如果该文件已经存在，它将是一个新的工作表。否则它将创建文件并成为唯一的工作表。

# java - 如何管理mysql/hibernate/java组合上的动态实体

> ID：14897675
> 
> 赞同：1
> 
> 时间：2013-02-15T15:14:59.867
> 
> 标签：java, mysql, hibernate

我正在尝试通过一个界面创建一些动态实体，其中有一个可以由最终用户自定义的主实体。这种实体的许多变体可以同时存在于数据库和应用程序上。

我需要在数据库中定义这样的动态实体/在其中存储数据（通过为它们收集数据而定制的表单。并在我们的应用程序中使用这些数据。

ui 部分对我们来说并不令人生畏，我们有一种很好的方式来处理它们。但管理大量单一实体似乎是个问题。

Hibernate 需要一个 pojo。我们目前正在研究使用 hibernate 的基于地图的序列化。

这里的问题是 - 为实体的每个变体创建一个单独的表是一种好习惯吗？还是将实体完全非规范化并将它们作为键/值对存储在具有类型 id 的字符串中然后进行转换更好？

那么这些有更好的解决方案吗？

如果云数据库更适合场景，我们也在考虑评估它们。任何指针都非常受欢迎。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-12T15:19:47.107

自从我问这个问题以来已经有一段时间了，与此同时，我一直在大量尝试我的选择。

我尝试过的一个选项是使用休眠地图模式，尽管它可以非常灵活地定义和更改实体，但我实际上无法存储特定系列的品种。我们通过在 MySQL 中创建键值存储并编写了一个库来进行数据转换，从而在存储品种方面取得了一些成功。然而，在 mysql 上有效地查询这些数据看起来令人生畏。我们通过使用我们在 lucene 上的搜索索引作为答案来解决这个问题。

然而，mycase 的结论是使用 HBase 并进行智能扫描查询。这就是我现在对这个问题的回答，它似乎运作良好。

# r - 仅获取符合特定条件的列的平均值

> ID：14897677
> 
> 赞同：1
> 
> 时间：2013-02-15T15:15:13.160
> 
> 标签：r, dataframe

我有一个看起来像这样的数据框：

```
id                              weekdays              halflife
241732222300860000  Friday, Aug 31, 2012, 22    0.4166666667
241689170123309000  Friday, Aug 31, 2012, 19    0.3833333333
241686878137512000  Friday, Aug 31, 2012, 19    0.4
241651117396738000  Friday, Aug 31, 2012, 16    1.5666666667
241635163505820000  Friday, Aug 31, 2012, 15    0.95
241633401382265000  Friday, Aug 31, 2012, 15    2.3666666667 
```

我想获得周一创建的物品的平均半衰期，然后是周二......等等。（我的日期范围跨越 6 个月）。请让我知道如何提供可重现的代码，因为我无法找到附加文件的方法。

为了获取日期值，我使用了 strptime 和 difftime。另外，我用 max(df$halflife) 找到了最大半衰期，我怎样才能找到它对应的 id？

可重现的代码：

```
structure(list(id = c(241732222300860416, 241689170123309056, 
241686878137511936, 241651117396738048, 241635163505819648, 241633401382264832
), weekdays = c("Friday, Aug 31, 2012, 22", "Friday, Aug 31, 2012, 19", 
"Friday, Aug 31, 2012, 19", "Friday, Aug 31, 2012, 16", "Friday, Aug 31, 2012, 15", 
"Friday, Aug 31, 2012, 15"), halflife = structure(c(0.416666666666667, 
0.383333333333333, 0.4, 1.56666666666667, 0.95, 2.36666666666667
), class = "difftime", units = "mins")), .Names = c("id", 
"weekdays", "halflife"), row.names = c(NA, 6L), class = "data.frame") 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T15:36:37.757

可能有更好的方法来获取工作日，但您可以`tapply`像这样使用（这里`df`是您的数据框的名称）：

```
days <- sub(",.*$", "", df$weekdays)
tapply(df$halflife, days, mean) 
```

要获取最大值的 id，请使用`which`：

```
df$id[which(df$halflife==max(df$halflife))] 
```

# php - 返回 php 表单并自动提交

> ID：14897681
> 
> 赞同：1
> 
> 时间：2013-02-15T15:15:21.287
> 
> 标签：php, mysql, forms

我是 PHP 新手，如果这个问题听起来很愚蠢，我很抱歉，但我有点困惑。

我有两个 .php 页面

第一个是 browse.php，我有一个 HTML 表单（POST 方法）。

当我提交表单时，我会转到 entry.php（第二页），在与 mysql 交互后出现数据。（假设我得到一个条目表）

在表格的某些单元格中，我想创建一个链接，该链接返回到 browse.php（带有单元格数据）并再次自动提交表单，然后返回到 entries.php

那可能吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T15:22:27.280

将数据保存在 $_SESSION 变量中

然后通过标头转发到 browser.php

```
header('Location: http://www.example.com/'); 
```

在填充 html 值并通过 javaskript 提交时检查 $_SESSION 参数

像使用 jquery

```
$('#form').submit(function(){return true;}); 
```

其中#form 是您的表单的ID

# c# - 使用列表框选择索引在 TabControl 上选择选项卡

> ID：14897683
> 
> 赞同：0
> 
> 时间：2013-02-15T15:15:28.333
> 
> 标签：c#, tabs, listbox, tabcontrol, indexof

我目前正在使用彼此独立的 tabControl 和列表框。

选项卡控件上有 5 页。列表框包含 5 个页面标题的列表。

编辑：我实际上是在尝试将 FundNavigator 的选择页面设置为与列表框中选择的页面相同。因此，如果选择了列表框中的项目编号 3，那么我希望标签编号 3 显示为所选页面。

我想得到它，所以当您在 ListBox 中选择一个页面标题时，它将切换到 TabControl 中的该选项卡。我尝试了几种方法，感觉最接近：

```
 public void LoadMatchingTab()
    {
        listIndex = ListBox1.SelectedIndex;
        FundNavigator.SelectedIndex = FundNavigator.Pages.IndexOf(listIndex);
    }

    private void ListBox1_SelectedIndexChanged(object sender, EventArgs e)
    {
        LoadMatchingTab();
    } 
```

有了这个我得到了一个`ArgumentOutOfRangeException`虽然它说

> “索引超出范围。参数名称：值”

有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T15:16:56.917

`FundNavigator.SelectedIndex = ListBox1.SelectedIndex`?

# html - 静态div内容改变位置

> ID：14897688
> 
> 赞同：0
> 
> 时间：2013-02-15T15:15:31.587
> 
> 标签：html, css

我有一个绝对的标题 div，所以我想让它成为静态的，但如果我这样做，里面的内容开始改变调整 window 的位置。我可以做些什么来获得一个不会在窗口调整大小时移动内容的静态标题？

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"  
"http://www.w3.org/TR/html4/strict.dtd"> 
<head>
<title>Client  </title>

<style type="text/css">
.heading {position:fixed; visibility:show; width:100%;  left: 0px; top: 0px; z-index:3;
 border-bottom:5px solid #ccc; } 
 header{
 position:absolute;
     width: 100%;
    height: 60px !important;
    z-index:7;
    top: 0px;
}

/*My div position*/
.positioning-container{position:relative; 
width:1000px;  margin:0 auto 0 auto;
 black solid; padding:0px;

   padding:60px 0 30px 0; 
  border-bottom:0px; padding:0px;
 background:#eee;}

.inner-container{position:relative; 
 background:#fff; padding:0px;
   padding:60px 0 30px 0; }
/*My div position*/
</style>
</head>
<body>
<div class="positioning-container">
<div class="inner-container" align = "center">
<header>
<div class= "heading" style="width:100% ; height:50px; background-color:#00A5C6">
<table id ="headertable" align="left"><tr><td>
<a href="index.php"><h2 class= "logo">Client Review</h2><td>&nbsp;</td></a></td><td>
<label>Search</label><input typ= "text"></td>
<td><a href="index.php" class="button middle">search</a></td>
<td><a href="login.php" class="button middle">Login</a></td>
<td><a href="register.php" class="button middle">Add Client</a></td>
<td><a href="logout.php" class="button middle">Logout</a></td>
<td align="left" class="profile"><img src="bhubezi/images/logos/nopic.png" width="50" 

height="40"></td>

</tr>
</table>
</div>
</header>
<div class="content">
content
</div>
</div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T15:30:32.973

坚持相对和绝对定位。请记住，当您将项目绝对定位时，它绝对是最近的相对位置。

```
<div class="relative" style="position: relative">
<div class="absoluteItem" style="position: absolute; bottom: 0;">
this content will sit on the bottom line of it's parent div (relative)
</div>

</div> 
```

放大和缩小浏览器时，此内容将保持原位。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T15:44:50.540

静态是元素的默认位置。您可以通过为容器分配固定的像素宽度来防止它在调整窗口大小时发生变化。如果它是流动的，它就会转移。如果修好了，就不会了。

# python - 二分投影中的节点数量多于节点集

> ID：14897700
> 
> 赞同：0
> 
> 时间：2013-02-15T15:16:15.393
> 
> 标签：python, graph, networkx

我将一个图投影到它的一个节点集上，但是生成的投影比原始节点集有更多的节点，而且奇怪的是，这个“额外”节点只是一个与 G 中的节点 id 相对应的数字，而不是完整的（节点，数据）元组。

```
C=set(n for n,d in G.nodes(data=True) if d['bipartite']==0)
len(C)
>>109813
BC=bipartite.projected_graph(G,C)
len(BC)
>>112570
len(BC)-len(C)
>>2757 
```

BC 上的所有“额外”节点都只是一个数字（对应于 G 中的节点 id）。这个“额外”的 2757 个节点来自哪里？我希望二分投影图的节点数量与其投影到的节点集中的节点数量相同。有任何想法吗？

可能的额外有用信息：

```
len(G)
>>117679 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T19:49:08.140

就您的节点集而言，您的图表可能不是二分的，例如

```
In [1]: import networkx as nx

In [2]: from networkx import bipartite

In [3]: G = nx.path_graph(5) # two parts, [0,2,4],[1,3]

In [4]: bipartite.projected_graph(G,[0,2,4]).nodes()
Out[4]: [0, 2, 4] # OK

In [5]: bipartite.projected_graph(G,[0,2,3]).nodes()
Out[5]: [0, 1, 2, 3, 4] # maybe not expected or correct 
```

它可能被认为是一个错误，但文档确实警告说在进行投影之前没有进行二分检查。

# internet-explorer - 浏览和选择文件 IE / VBA 时遇到问题

> ID：14897704
> 
> 赞同：2
> 
> 时间：2013-02-15T15:16:21.947
> 
> 标签：internet-explorer, vba, file-upload

我有这个问题。

我有一个需要上传文件的页面。当我单击“浏览器”时，“选择要上传的文件”窗口打开，我需要选择（双击）一个 TXT 文件。

我尝试使用 Set fd = Application.FileDialog(msoFileDialogFilePicker) 但无法识别此对象。

任何帮助将不胜感激！

```
 Sub Main
    ' Get the browser object belonging to the active/topmost IE tab
    Dim objIe
    Dim activeDocument
    Dim Button
    Set activeDocument = Nothing

    ' Try and get the window object of the active IE tab
    Set objIe = GetActiveBrowserObj 'this is a function previously defined that allows me to work on the active browser window
        If objIe Is Nothing Then
          MsgBox "Could not get active IE document object”
          Exit Sub
        End If

    ' Assign the document object to the activeDocument variable
    Set activeDocument = objIe.Document
        If activeDocument Is Nothing Then
          MsgBox "Could not get active IE document object"
          Exit Sub
        End If
    'Click the browse button to upload the first TXT file
    Set Button = objIe.Document.getElementById("txtfile1")
        Button.Click

    chooseFile()

End Sub

Private Sub chooseFile()

    Dim fd
    Dim strTxt As String

    Start:
    'Set fd = Application.FileDialog(msoFileDialogFilePicker)
    With fd
       .Title = "Choose File to Upload" 'Change the title to suit
       .Filters.Add "txt files", "*.txt", 1 'Change the filters to suit, or omit for none
       .AllowMultiSelect = False
       If .Show = -1 Then
           'The user made a selection.  The variable strWorkBook will contain the path\name of the file
           strTxt = .SelectedItems(1)
       Else
           response = MsgBox("You have not selected a txt file")
           If response = vbRetry Then
               GoTo Start
           Else
               Exit Sub
           End If
       End If
    End With
    Set fd = Nothing
End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T16:49:13.663

您必须使用 API 与该窗口进行交互，方法是找到名称为“ **Choose File To Upload** ”的窗口

这是一个例子

```
Private Declare Function FindWindow Lib "user32" Alias "FindWindowA" _
(ByVal lpClassName As String, ByVal lpWindowName As String) As Long

Sub Sample()
    Dim Ret

    Ret = FindWindow(vbNullString, "Choose File To Upload")

    If Ret <> 0 Then
        MsgBox "File upload window Found"
    Else
        MsgBox "File upload window Not Found"
    End If
End Sub 
```

锁定到相关窗口后，您必须找到其中`Handle`的`Textbox`，然后将带有完整路径的文件名粘贴到那里。完成后，您会找到`Open`Button 的句柄并最终单击它。

我在[这里](http://www.siddharthrout.com/2012/02/02/vbavb-netvb6click-opensavecancel-button-on-ie-download-window-part-ii/)广泛地介绍了它。尽管在我在链接中发布的示例中，我正在使用保存文件，`Save As`但您必须使用相同的方法来查找句柄并上传文件。

高温高压

# java - 当我在 google maps api V2 上使用 moveCamera 时，我的应用程序崩溃了

> ID：14897705
> 
> 赞同：1
> 
> 时间：2013-02-15T15:16:23.287
> 
> 标签：java, android, google-maps, maps

我正在使用 google maps api V2 for android。但是，当我加载地图时，它会完美加载，当我尝试使用[https://developers.google.com/maps/documentation/android/views#sharing_a_maps_view](https://developers.google.com/maps/documentation/android/views#changing_a_maps_view)

```
 public class MainActivity extends FragmentActivity {

    private static final LatLng SYDNEY = new LatLng(-33.88,151.21);
    private static final LatLng MOUNTAIN_VIEW = new LatLng(37.4, -122.1);
    SupportMapFragment fragment = new SupportMapFragment();
    private GoogleMap map = fragment.getMap();
     @Override
        protected void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);

            getSupportFragmentManager().beginTransaction()
                    .add(android.R.id.content, fragment).commit();

            map.moveCamera(CameraUpdateFactory.newLatLngZoom(SYDNEY,15));

            // Zoom in, animating the camera.
            map.animateCamera(CameraUpdateFactory.zoomIn());

            // Zoom out to zoom level 10, animating with a duration of 2 seconds.

              map.animateCamera(CameraUpdateFactory.zoomTo(10), 2000, null);

            // Construct a CameraPosition focusing on Mountain View and animate the camera to that position.
            CameraPosition cameraPosition = new CameraPosition.Builder()
                .target(MOUNTAIN_VIEW)      // Sets the center of the map to Mountain View
                .zoom(17)                   // Sets the zoom
                .bearing(90)                // Sets the orientation of the camera to east
                .tilt(30)                   // Sets the tilt of the camera to 30 degrees
                .build();                   // Creates a CameraPosition from the builder
            map.animateCamera(CameraUpdateFactory.newCameraPosition(cameraPosition));

    } 
```

xml：

```
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
 xmlns:tools="http://schemas.android.com/tools"
 android:layout_width="match_parent"
 android:layout_height="match_parent"
 tools:context=".MainActivity" >

<fragment xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/map"
android:layout_width="match_parent"
android:layout_height="match_parent"
class="com.google.android.gms.maps.MapFragment"/>

 <TextView
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerHorizontal="true"
    android:layout_centerVertical="true"
    android:text="@string/hello_world" />

    </RelativeLayout> 
```

当我运行代码时，应用程序在启动之前崩溃

不仅在我尝试使用 UiSettings 类时也使用了它。因此，我可能会遗漏一些东西:)

解决我的问题的任何帮助将不胜感激。

错误：

```
 02-15 17:44:41.701: E/AndroidRuntime(17078): FATAL EXCEPTION: main
     02-15 17:44:41.701: E/AndroidRuntime(17078): java.lang.RuntimeException: Unable to s     tart activity   ComponentInfo{com.example.anywhere_reminder/com.example.anywhere_reminder.MainActivity}:   java.lang.NullPointerException: CameraUpdateFactory is not initialized
     02-15 17:44:41.701: E/AndroidRuntime(17078):   at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1970)
     02-15 17:44:41.701: E/AndroidRuntime(17078):   at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1995)
     02-15 17:44:41.701: E/AndroidRuntime(17078):   at android.app.ActivityThread.access$600(ActivityThread.java:128)
     02-15 17:44:41.701: E/AndroidRuntime(17078):   at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1161)
     02-15 17:44:41.701: E/AndroidRuntime(17078):   at android.os.Handler.dispatchMessage(Handler.java:99)
     02-15 17:44:41.701: E/AndroidRuntime(17078):   at android.os.Looper.loop(Looper.java:137)
   02-15 17:44:41.701: E/AndroidRuntime(17078):     at android.app.ActivityThread.main(ActivityThread.java:4517)
   02-15 17:44:41.701: E/AndroidRuntime(17078):     at java.lang.reflect.Method.invokeNative(Native Method)
   02-15 17:44:41.701: E/AndroidRuntime(17078):     at java.lang.reflect.Method.invoke(Method.java:511)
   02-15 17:44:41.701: E/AndroidRuntime(17078):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:995)
   02-15 17:44:41.701: E/AndroidRuntime(17078):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:762)
   02-15 17:44:41.701: E/AndroidRuntime(17078):     at dalvik.system.NativeStart.main(Native Method)
    02-15 17:44:41.701: E/AndroidRuntime(17078): Caused by: java.lang.NullPointerException: CameraUpdateFactory is not initialized
   02-15 17:44:41.701: E/AndroidRuntime(17078):     at com.google.android.gms.internal.at.a(Unknown Source)
   02-15 17:44:41.701: E/AndroidRuntime(17078):     at com.google.android.gms.maps.CameraUpdateFactory.J(Unknown Source)
   02-15 17:44:41.701: E/AndroidRuntime(17078):     at com.google.android.gms.maps.CameraUpdateFactory.newLatLngZoom(Unknown Source)
    02-15 17:44:41.701: E/AndroidRuntime(17078):    at com.example.anywhere_reminder.MainActivity.onCreate(MainActivity.java:30)
  02-15 17:44:41.701: E/AndroidRuntime(17078):  at android.app.Activity.performCreate(Activity.java:4579)
 02-15 17:44:41.701: E/AndroidRuntime(17078):   at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1053)
02-15 17:44:41.701: E/AndroidRuntime(17078):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1934)
 02-15 17:44:41.701: E/AndroidRuntime(17078):   ... 11 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T18:56:15.587

我认为这些是您代码中的问题。

```
SupportMapFragment fragment = new SupportMapFragment();
private GoogleMap map = fragment.getMap(); 
```

对象片段为空，您的 GoogleMap 地图对象可能为空。你应该这样做。

```
 SupportMapFragment sMapFragment;
    GoogleMap map;

   protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        //get the MapFragment in your layout
        fragment =(SupportMapFragment)getSupportFragmentManager().findFragmentById(R.id.map);
        //get the GoogleMap object
        map = fragment.getMap();

   } 
```

现在你们都准备好在地图上做点什么了。示例缩放到特定位置。

```
 if(map!=null){
      LatLng SYDNEY = new LatLng(-33.88,151.21);
      CameraUpdate cameraUpdate = CameraUpdateFactory.newLatLngZoom(latLng, 16);
      map.animateCamera(cameraUpdate);
    } 
```

我希望这有帮助。快乐编码:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T16:00:40.170

如果 GoogleMap 可用，您只能使用 CameraUpdateFactory。

我会尝试以下方法，将您的私有 GoogleMap map = fragment.getMap();

在你的 onCreate 方法上。如果地图不为空，那么您可以调用 CameraUpdateFactory。

```
map = fragment.getMap();
if(map != null){
   map.moveCamera(CameraUpdateFactory.newLatLngZoom(SYDNEY,15));

            // Zoom in, animating the camera.
            map.animateCamera(CameraUpdateFactory.zoomIn());

            // Zoom out to zoom level 10, animating with a duration of 2 seconds.

              map.animateCamera(CameraUpdateFactory.zoomTo(10), 2000, null);

            // Construct a CameraPosition focusing on Mountain View and animate the camera to that position.
            CameraPosition cameraPosition = new CameraPosition.Builder()
                .target(MOUNTAIN_VIEW)      // Sets the center of the map to Mountain View
                .zoom(17)                   // Sets the zoom
                .bearing(90)                // Sets the orientation of the camera to east
                .tilt(30)                   // Sets the tilt of the camera to 30 degrees
                .build();                   // Creates a CameraPosition from the builder
            map.animateCamera(CameraUpdateFactory.newCameraPosition(cameraPosition));

} 
```

# c# - System.Web.Script.Serialization.JavaScriptSerializer 属性反序列化顺序

> ID：14897707
> 
> 赞同：0
> 
> 时间：2013-02-15T15:16:32.693
> 
> 标签：c#, wpf

我的模型有一系列的 setter 和 getter。一些 setter 调用依赖于其他属性的方法。这很好用，因为在代码中构造对象时，我控制设置属性的顺序。但是，在序列化/反序列化期间，我遇到了一个问题，即在实际设置 property1 之前运行的 setter 还调用了依赖于另一个属性（例如 property1）的方法。

有没有办法控制使用反序列化时调用属性设置器的顺序`System.Web.Script.Serialization.JavaScriptSerializer`？

```
 public class MyClass
{
    public String[] Property1 { get; set; }

    private String[] _property2;
    public string[] Property2
    {
        get { return _property2; }
        set { _property2 = value; UpdateSomething(); UpdateSomething(); RaisePropertyChanged("Property2"); }
    }

    public void UpdateSomething()
    {
        Debug.Assert(Property1.Length == Property2.Length); <!--When deserializing, need Property1 set before property2 to avoid issues
    }
} 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T16:09:01.053

我采用的解决方案是创建一个按比例缩小的可持久模型，其中仅包含我想要保留或恢复的字段。真正的模型有一个重载的构造函数，它采用可持久化的模型并可以从中恢复自己..从而使我可以更好地控制属性的初始化/设置方式。

# java - 实体未在 Hibernate 中更新

> ID：14897708
> 
> 赞同：0
> 
> 时间：2013-02-15T15:16:33.533
> 
> 标签：java, hibernate, spring-mvc

*我想使用Spring MVC*和*Hibernate*创建一个带有 CRUD 逻辑的简单网页。我创建了这个简单的 UserController：

**我的弹簧配置[向上]：**

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:context="http://www.springframework.org/schema/context"
    xmlns:p="http://www.springframework.org/schema/p"
    xmlns:c="http://www.springframework.org/schema/c"
    xmlns:tx="http://www.springframework.org/schema/tx"
    xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
        http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.2.xsd
        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.1.xsd">

    <!-- Root Context: defines shared resources visible to all other web components -->
    <context:annotation-config />
    <context:component-scan base-package="org.vdzundza.dao" />
    <context:component-scan base-package="org.vdzundza.service" />

    <bean id="propertiesConfig"
        class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer"
        p:location="/WEB-INF/jdbc.properties" />

    <bean id="dataSource" class="org.apache.commons.dbcp.BasicDataSource"
        destroy-method="close">
        <property name="driverClassName" value="${jdbc.driverClassName}" />
        <property name="url" value="${jdbc.url}" />
        <property name="username" value="${jdbc.username}" />
        <property name="password" value="${jdbc.password}" />
    </bean>

    <bean id="sessionFactory"
        class="org.springframework.orm.hibernate4.LocalSessionFactoryBean"
        lazy-init="true">
        <property name="dataSource" ref="dataSource" />
        <property name="hibernateProperties">
            <props>
                <prop key="hibernate.dialect">org.hibernate.dialect.PostgreSQLDialect</prop>
                <prop key="hibernate.show_sql">true</prop>
                <prop key="hibernate.hbm2ddl.auto">update</prop>
                <prop key="hibernate.current_session_context_class">thread</prop> 
            </props>
        </property>
        <property name="packagesToScan" value="org.vdzundza.beans" />
    </bean>
<tx:annotation-driven/>
    <bean id="transactionManager"
        class="org.springframework.orm.hibernate4.HibernateTransactionManager">
        <property name="sessionFactory"><ref local="sessionFactory"/></property>
    </bean>
</beans> 
```

**我的控制器：**

```
package org.vdzundza.web;

import java.util.Map;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Controller;
import org.springframework.validation.BindingResult;
import org.springframework.web.bind.annotation.ModelAttribute;
import org.springframework.web.bind.annotation.PathVariable;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestMethod;
import org.vdzundza.beans.User;
import org.vdzundza.service.UserService;

@Controller
@RequestMapping("/user")
public class UserController {

    @Autowired
    private UserService userService;

    private static final Logger logger = LoggerFactory
            .getLogger(UserController.class);    

    @RequestMapping(value = "/edit/{id}", method = RequestMethod.GET)
    public String updateUserGet(Map<String, Object> map, @PathVariable("id") Long id){
        User user = userService.loadUser(id);
        map.put("user", user);
        return "edit";
    }

    @RequestMapping(value = "/edit", method = RequestMethod.POST)
    public String updateUserPost(@ModelAttribute("user") User user, BindingResult result){
        logger.info("update user: " + user.toString());
        userService.updateUser(user);
        return "redirect:/user/index";
    }
} 
```

**我的用户道：**

```
package org.vdzundza.dao;

import java.util.List;

import org.hibernate.Session;
import org.hibernate.SessionFactory;
import org.hibernate.Transaction;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Repository;
import org.springframework.transaction.annotation.Transactional;
import org.vdzundza.beans.User;

@Repository
@Transactional(value = "transactionManager")
public class UserDAOImpl implements UserDao {

    @Autowired
    private SessionFactory sessionFactory;

    private static final Logger logger = LoggerFactory
            .getLogger(UserDAOImpl.class);

    public void updateUser(User user) {
        Session session = sessionFactory.getCurrentSession();
        Transaction tx = null;
        try {
            tx = session.beginTransaction();
            session.update(user);
            tx.commit();

        } catch (RuntimeException e) {
            tx.rollback();
        }
    }

    public User loadUser(Long id) {
        Session session = sessionFactory.openSession();
        return (User) session.load(User.class, id);
    }
} 
```

**和服务：**

```
package org.vdzundza.service;

import java.util.List;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Service;
import org.springframework.transaction.annotation.Transactional;

import org.vdzundza.beans.User;
import org.vdzundza.dao.UserDao;

@Service
public class UserServiceImpl implements UserService {

    @Autowired
    private UserDao userDAO;        

    @Transactional
    public void updateUser(User user) {
        userDAO.updateUser(user);

    }

    @Transactional
    public User loadUser(Long id) {
        return userDAO.loadUser(id);
    }
} 
```

**我的简单更新表格：**

```
<%@ page language="java" contentType="text/html; charset=utf-8" pageEncoding="utf-8"%>
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c"%>
<%@ taglib prefix="form" uri="http://www.springframework.org/tags/form"%>
<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>Update user</title>
</head>
<body>
    <form:form method="post"
        action="${pageContext.request.contextPath}/user/edit"
        commandName="user">
        <table>
            <tr>
                <td><form:label path="firstName">First Name</form:label></td>
                <td><form:input path="firstName" /></td>
            </tr>

            <tr>
                <td><form:label path="lastName">Last Name</form:label></td>
                <td><form:input path="lastName" /></td>
            </tr>

            <tr>
                <td><form:label path="network">network</form:label></td>
                <td><form:input path="network" /></td>
            </tr>
            <tr>
                <td colspan="2"><input type="submit" value="update user" /></td>
            </tr>

        </table>
    </form:form>
</body>
</html> 
```

为什么我的“updateUser”(dao) 方法不更新实体？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T15:24:05.390

做一个

```
session.flush(); 
```

之后

```
tx.commit(); 
```

刷新机制的目标是将会话中的持久对象的状态与数据库同步。

如果您更改对象的状态，该状态将不会反映在数据库中。刷新时休眠将数据库与对象的新状态同步。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T17:27:55.763

我将隐藏元素添加到表单中。

```
<form:hidden path="id"/> 
```

# google-maps - 多边形外的谷歌地图点击事件

> ID：14897711
> 
> 赞同：1
> 
> 时间：2013-02-15T15:16:37.317
> 
> 标签：google-maps, google-maps-api-3

我环顾四周，意识到我可以定义一个多边形，并且只有当用户在多边形内单击时才会发生单击事件，如下所示：

```
polygonClick = google.maps.event.addListener( polygon, "click", function( evt ) {
    function();
} ); 
```

我想做的是有一个侦听器，它可以在多边形内部以外的任何地方进行侦听，如下所示：

```
polygonClick = google.maps.event.addListener( !polygon, "click", function( evt ) {
    function();
} ); 
```

这可能吗？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T16:46:06.200

*在地图*上创建一个监听器。

```
mapClick = google.maps.event.addListener( map, "click", function( evt ) {
    function();
} ); 
```

# javascript - 使用 JSON 值实现数组交集

> ID：14897712
> 
> 赞同：1
> 
> 时间：2013-02-15T15:16:41.343
> 
> 标签：javascript, arrays, json

我有一个包含 JSON 对象的数组，例如

```
validTags = [{"tag":"tag1"}, {"tag":"tag2"}]; 
```

和

```
items = [{"id":123456, "tag":"tag1"}, {"id":123456, "tag":"tag2"}, {"id":7890, "tag":"tag1"}]; 
```

我正在尝试找出第一个数组中同时具有两个“标签”的 id。

例如，输出将是：

```
[{"id":123456, "tag":"tag1 tag2"}] 
```

将两个匹配的标签组合成一个字符串。

有什么想法我应该怎么做？我最近在 Javascript 聊天室中与一些 SO 用户聊天，他们建议可以使用数组交集，但我不完全确定如何使用它来获得 JSON 的预期结果 :(

所有答案/帮助表示赞赏！

非常感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T15:29:41.057

javascript中没有集合操作，但是很容易定义，例如：

```
intersection = function(a, b) {
    return a.filter(function(x) { return b.indexOf(x) >= 0 })
} 
```

对于您的特定任务，首先转换`validTags`为列表：

```
vtags = validTags.map(function(x) { return x.tag }) 
```

然后计算一个交集，将每个`tag`属性转换`items`为一个数组：

```
results = items.filter(function(x) {
    return intersection(x.tag.split(/\s+/), vtags).length == vtags.length
}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T16:05:04.820

这是一个同时使用对象和数组的解决方案：

```
validTags = [{"tag":"tag1"}, {"tag":"tag2"}];
items = [{"id":123456, "tag":"tag1"}, {"id":123456, "tag":"tag2"}, {"id":7890, "tag":"tag1"}];

accumulate = {};
// Make use of the hashing of JavaScript objects to merge the tags.
items.forEach(function(e) {
  if(accumulate[e.id] == undefined) accumulate[e.id] = [e.tag];
  else accumulate[e.id].push(e.tag);
});

// Convert the object into an array. The field 'tags' is still an array.
var result0 = [];
for(var id in accumulate) result0.push({"id": id, tags: accumulate[id]});

var result = result0.filter(
  // First we cross out those do not contain every tag.
  function(e) { return validTags.every(
    function(e1) { return e.tags.indexOf(e1.tag) != -1; }); })
  // Then we make the 'tags' array into a string.
  .map(function(e) { return {"id": e.id, "tags": e.tags.join(" ")}; }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-15T15:27:42.900

这应该这样做：

```
var validTags = [{"tag":"tag1"}, {"tag":"tag2"}];
var items = [{"id":123456, "tag":"tag1"}, {"id":123456, "tag":"tag2"}, {"id":7890, "tag":"tag1"}]; 

var actualTags = validTags.map(function(obj){return obj.tag}),
    comparableTags = actualTags.sort().join(" ");

var tagsById = items.reduce(function(map, item) {
    if (item.id in map)
        map[item.id].push(item.tag);
    else
        map[item.id] = [ item.tag ];
    return map;
}, {});
var result = [];
for (var id in tagsById) {
    var tags = tagsById[id].sort().join(" ");
    if (comparableTags == tags) // Yai, array comparison by content!
        result.push({id: id, tag:tags});
}
return result; 
```

如果您使用的是[Underscore](http://underscorejs.org/)，则可以使用[`pluck`](http://underscorejs.org/#pluck)代替[`map`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/Map)and[`groupBy`](http://underscorejs.org/#groupBy)代替[`reduce`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/Reduce); 简而言之：

```
var comparableTags = _.pluck(validTags, "tag").sort().join(" ");
return _.chain(items).groupBy("id").map(function(id, tags) {
    return {id:id, tag:tags.sort().join(" ");
}.filter(function(obj) {
    return obj.tag == comparableTags;
}).value(); 
```

# mysql - 如何在第二个主键上选择最大值

> ID：14897714
> 
> 赞同：-1
> 
> 时间：2013-02-15T15:16:52.707
> 
> 标签：mysql

我有一张这样的桌子：

```
id | version | name
 1      1      name1 v1
 1      2      name1 v2
 1      3      name1 v3
 1      4      name1 v4
 2      1      name2 v1
 2      2      name2 v2
 2      3      name2 v3 
```

我正在尝试使用此查询获取表上每个 id 的最大版本：

```
SELECT a.id, MAX(a.version) AS version, b.name
FROM table1 a
INNER JOIN (
SELECT * FROM table1
) b
ON a.id = b.id AND a.version = b.version
GROUP BY a.id 
```

但我得到了这些结果：

```
 id | version | name
 1      4      name1 v1
 2      3      name2 v1 
```

当我应该得到这个时：

```
id | version | name
 1      4      name1 v4
 2      3      name2 v3 
```

任何帮助将不胜感激，在此先感谢

编辑：

我刚刚意识到在 select 语句中添加 max(b.name) 可以解决问题，呵呵

无论如何，感谢@bluefeet、@user2001117、@rs。和@Bram Gerritsen。您的所有查询都像魅力一样工作=）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T15:24:39.833

```
SELECT a.id, a.version, a.name
FROM table1 a
INNER JOIN (
SELECT id, max(version) version FROM table1
GROUP BY id
) b
USING(id, version) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T15:19:41.753

做这个

```
SELECT a.id, a.version, a.name
FROM table1 a
INNER JOIN (
SELECT id, max(version) version FROM table1
GROUP BY id
) b
ON a.id = b.id AND a.version = b.version 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-15T15:20:25.230

试试这个：

```
 SELECT a.id, a.version, a.name
    FROM table1 a
    INNER JOIN (
    SELECT id, max(version) version FROM table1
    GROUP BY id
    ) b
    ON a.id = b.id AND a.version = b.version 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-15T15:20:26.273

您需要更改查询以在子查询中使用聚合。一旦在子查询中获得`max(version)`for each `id`，您将在这两个值上将其加入到您的表中，它将返回正确的结果：

```
select a.id,
  a.version,
  a.name
from table1 a
inner join
(
  select max(version) MaxVersion, id
  from table1 
  group by id
) b
  on a.id = b.id
  and a.version = b.maxversion 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!2/8c2a5/3)

# winforms - 从 VS2010 迁移并构建 WinForms 应用程序时，从 VS2012 中获得什么？

> ID：14897717
> 
> 赞同：1
> 
> 时间：2013-02-15T15:16:59.633
> 
> 标签：winforms, visual-studio-2010, visual-studio-2012, migration

我们正在使用 VS2010 构建不同的 WinForms 应用程序。

我定期查看新的工具版本，但到目前为止还没有时间查看 VS2012，所以我想知道：在开发 WinForms 应用程序时，使用 VS2012 对我们来说比 VS2010 有什么优势。

VS2012 中真的有适合我们的“酷”新功能吗？或者更重要的是任何生产力提升？

谢谢大家！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T15:21:05.150

**#1) 为 Windows 8 开发**

Visual Studio 2012 包含开发适用于 Windows 8 的杀手级应用程序所需的所有工具，从模板到设计器、测试和调试。Blend 现在附带 Visual Studio 安装，提供丰富的可视化工具，用于使用 HTML/CSS 和 XAML 创建 Windows 商店应用程序。使用这些工具，您将找到开发出色应用并将其提交到 Windows 应用商店所需的一切。

**#2) 为 Web 开发**

Visual Studio 2012 和 .NET 4.5 提供了 ASP.NET 的最新进展，包括 Web 优化改进（缩小和捆绑）、新模板、HTML 和 CSS 编辑器改进、页面检查器和新发布工具。我们添加了支持 JavaScript 开发的新功能，包括 IntelliSense 改进、新的 DOM 浏览器和 JavaScript 控制台。

**#3) 为 Windows Phone 8 开发**

Visual Studio 2012 将为开发 Windows Phone 8 应用程序提供支持（包括 Express SKU 以及用于 VS Pro 及更高版本的免费下载插件）。一旦 Windows Phone 8 和开发人员 SDK 可用，这将在未来上线。一些值得期待的新功能包括原生 C++ 支持、针对 Windows Phone 7.x 和 Windows Phone 8 应用程序的能力、多机箱支持和企业发布。请继续关注来自 Windows Phone 团队的更多信息。

**#5) 开发业务应用程序**

Visual Studio 2012 包含各种用于开发业务应用程序的工具。SharePoint 开发人员将找到用于列表和内容类型的新设计器、用于网站栏和 Silverlight 网页的新模板，以及用于部署 SharePoint 网站的新选项。性能分析、单元测试和 IntelliTrace 等 ALM 功能现在可用于 SharePoint 开发。客户端开发也得到了改进，支持 JavaScript 调试和 IntelliSense。

[http://blogs.msdn.com/b/jasonz/archive/2012/08/15/visual-studio-2012-and-net-framework-4-5-released-to-the-web.aspx](http://blogs.msdn.com/b/jasonz/archive/2012/08/15/visual-studio-2012-and-net-framework-4-5-released-to-the-web.aspx)

如果您将在您的应用程序中使用这些功能中的任何一个，这对您来说是有益的，否则 2010 已经是很好的工具，提供了强大的功能。

# opencl - OpenCL 的数据并行原语库

> ID：14897718
> 
> 赞同：0
> 
> 时间：2013-02-15T15:17:02.143
> 
> 标签：opencl

我正在尝试在 OpenCL 中实现最小生成森林算法。虽然我知道如何实现 Kruskal 算法，但它本质上是顺序的，所以我认为应该在 OpenCL 中实现 Boruvka 算法或专门为并行编程设计的 Data Parallel Kruskal 算法。但是在这个算法中（正如论文中提到的：“GPU 上的快速和内存高效的最小生成树”），我们需要像“排序”、“分割图”、“连接组件”、“查找分钟”这样的图基元，用于实施的“合同图”。OpenCL 是否像 CUDA 一样拥有其 Data Parallel Primitives 库......“CUDAPP”......？或者 OpenCL 中是否有任何资源可以让我获得这些功能......？

# list - 删除和销毁列表中的对象

> ID：14897723
> 
> 赞同：0
> 
> 时间：2013-02-15T15:17:15.267
> 
> 标签：list, object, python-2.7, destroy

稍微扩展一下[这个问题](https://stackoverflow.com/questions/9754729/remove-object-from-array-of-objects-in-python)。从 Python 列表中删除对象很容易，但我将有一个“忙碌”列表——频繁删除和频繁添加——所以我想防止内存泄漏。

1.  只是从列表中删除对象会破坏对象吗？（我假设没有。）

2.  如果我的假设是正确的，那么我怎样才能将它从列表中删除**并同时**销毁它？

如果重要的话，有问题的对象是我编写的类的实例。我计划在每次需要插入新对象时“实时”创建对象，例如

```
myList.insert(index,myClass(constructorParm1,constructorParm2)) 
```

因此，当我以后需要删除一些以这种方式创建的实例时，我想确保它们不仅从列表中消失，而且消失了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T15:20:54.020

在 cPython 中，当引用计数降至 0 时，对象会*自动销毁。*

如果从列表中删除条目，则相关对象的引用计数会减少。你不需要做任何特别的事情来摧毁它，你也不应该尝试这样做。如果对该对象的任何其他引用仍然存在，则销毁该对象将破坏其他引用。

如果您想保留对*不*阻止对象被垃圾收集的对象的引用，请改用[`weakref`](http://docs.python.org/2/library/weakref.html)引用。

# javascript - 将支持 javascript 的控件添加到父/包含页面

> ID：14897727
> 
> 赞同：0
> 
> 时间：2013-02-15T15:17:28.717
> 
> 标签：javascript, asp.net, controls, templatefield

我有一个带有gridview 的asp.net 页面，它以编程方式（sp？）添加它的列。其中之一是 itemtemplate，它需要页面中的一些 javascript 才能运行。

模板本身有什么方法可以将所需的脚本添加到包含页面中 - 显然只是一次，即使认为模板实际上会为网格的每一行输出多次

这是在动态生成网格 cols 时添加到网格这里是生成 cols 的代码

```
sub GenerateCols
.....
        Dim tActions = New TemplateField()
        tActions.HeaderText = "Actions"
        tActions.ItemTemplate = New CheckBoxActionTemplate()
        grd.Columns.Add(tActions)
....
 end sub 
```

这是模板代码

```
 public class CheckBoxActionTemplate : ITemplate
    {
        public CheckBoxActionTemplate() { }

        #region ITemplate Members

        public void InstantiateIn(Control container)
        {
            HtmlAnchor aAll = new HtmlAnchor();
            aAll.InnerText = "all";
            aAll.Attributes.Add("class", "all");

            HtmlAnchor aNone = new HtmlAnchor();
            aNone.InnerText = "none";
            aNone.Attributes.Add("class", "none");

            HtmlAnchor aInvert = new HtmlAnchor();
            aInvert.InnerText = "invert";
            aInvert.Attributes.Add("class", "invert");

            container.Controls.Add(aAll);
            container.Controls.Add(aNone);
            container.Controls.Add(aInvert);
        }

        #endregion
    } 
```

这是支持的javascript

```
 $("a.all").click( function() {
        $(this).closest('tr').find(':checkbox').each(function(){
            $(this).attr('checked', 'checked');
        });
        return false;
    });

// Select none
    $("a.none").click( function() {
        $(this).closest('tr').find(':checkbox').each(function(){
            $(this).removeAttr('checked');
        });
        return false;
    });

// Invert selection
    $("a.invert").click( function() {
        $(this).closest('tr').find(':checkbox').each(function(){
            if($(this).is(':checked')){
                $(this).removeAttr('checked');            
            }else{
               $(this).attr('checked', 'checked');
            }
        });
        return false;
    }); 
```

除此之外，如果它是一个多次出现在包含页面中的控件，该控件是否也可以将其 JS 添加到父页面本身，再次只是一次..？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T19:01:22.067

例如，您可以将脚本添加到 gridview 加载事件的页面中

```
<asp:GridView ID="GridView1" runat="server" onload="GridView1_Load">
    </asp:GridView> 
```

然后处理事件并编写脚本

```
protected void GridView1_Load(object sender, EventArgs e)
    {
        StringBuilder strScript = new StringBuilder();
        strScript.Append("<script language=JavaScript>");
        strScript.Append("$('a.all').click( function() {});//etc etc</script>");
        ClientScript.RegisterClientScriptBlock(this.GetType(), "Pop", strScript.ToString());
    } 
```

# sql-server-2008 - 命令行的 SQL Server Express 2008 安装参数

> ID：14897731
> 
> 赞同：1
> 
> 时间：2013-02-15T15:17:32.160
> 
> 标签：sql-server-2008, installshield

我想安装带有 InstallShield 先决条件的 SQL Server Express 2008。我总是在安装结束时遇到错误，但安装工作正常。该错误仅说明安装失败。

谁能看到我的安装参数的问题？这是我的安装参数：

```
SQLEXPR_2008_x86_DEU.exe 
/Q 
/ACTION=Install 
/SkipRules=VSShellInstalledRule RebootRequiredCheck 
/BROWSERSVCSTARTUPTYPE=Automatic 
/SQLSVCSTARTUPTYPE=Automatic 
/FEATURES=SQLEngine 
/INSTANCENAME=TCSERVER 
/SECURITYMODE="SQL" 
/SQLSVCACCOUNT="NT AUTHORITY\System"
/SAPWD="xyz" 
/SQLSYSADMINACCOUNTS="BUILTIN\ADMINISTRATORS" 
/ENABLERANU=1 
/AGTSVCACCOUNT="NT AUTHORITY\System"
/TCPENABLED=1 
/ERRORREPORTING=1 
/HIDECONSOLE 
```

我会很高兴得到帮助。

马库斯

# php - php访问stocktwits api

> ID：14897732
> 
> 赞同：0
> 
> 时间：2013-02-15T15:17:33.080
> 
> 标签：php, stocktwits

有没有人成功地从 PHP 脚本中调用 API 方法？

我正在尝试做的是使用我的 ST 帐户让 PHP 脚本代表我发布。

我被身份验证卡住了。我使用 oauth_client.php 类，但似乎无法让它工作。当试图在推特上做同样的事情时，我一时兴起就让它工作了。

我非常感谢一个完整的 php 代码示例，因为 API 文档不是很清楚。它只是提到了协议。但我认为这更像是一个配置问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-10T13:43:01.127

虽然这是在 javascript 中，但我发现此链接底部的这部分代码非常有用。虽然我没有足够的 php 知识来找到一个工作示例，但我希望这会有所帮助：

[http://stocktwits.com/developers/docs/signin](http://stocktwits.com/developers/docs/signin)

这允许您打开一个窗口，从 Stocktwits 获取请求，然后验证您是否确实这样做了。在为同样的问题苦苦挣扎之后，我发现了它，它立即起作用，并允许我通过镜像样式轻松调用 API。

# wcf - WCF 服务合同的属性不一致

> ID：14897733
> 
> 赞同：2
> 
> 时间：2013-02-15T15:17:37.823
> 
> 标签：wcf, inheritance, interface, custom-attributes

我的服务接口有以下声明：

```
[MyCustomContractBehavior]
[ServiceKnownType("GetKnownTypes", typeof(ServiceKnownTypesDiscoveryHelper))]
public interface IMyService 
```

其中`MyCustomContractBehavior`如下：

```
[AttributeUsage(AttributeTargets.Interface, AllowMultiple = true, Inherited = true)]
public class MyCustomContractBehavior: Attribute, IContractBehavior 
```

然后我创建了一个新的服务接口来扩展我的第一个接口：

```
public interface ITestService : IMyService 
```

在测试时，我注意到这`MyCustomContractBehavior`不起作用。它的构造函数被调用但`ApplyClientBehavior`不`ApplyDispatchBehavior`被调用。

好的，所以我推断该`"Inherited = true"`属性不仅适用于 interface->class，而且适用于 interface->interface 关系。当我添加`MyCustomContractBehavior`到 时`ITestService`，它开始工作得很好。

但是后来我想到了-嘿，但是呢`ServiceKnownType`？我没有将它添加到合同通过`ITestService`的所有集成测试中，但仍然是！`ITestService`当我注释掉 时`ServiceKnownType`，`IMyService`我的许多测试都失败了，所以显然`ServiceKnownType`不知何故从父界面神奇地“继承”了。

在搜索已知类型时，WCF 似乎正在检查接口层次结构，但在搜索行为时却没有这样做。这是真的还是我误解了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T07:30:51.297

`ITestService`标有`[ServiceContract]`? 您给出的 IMyService 的定义不是。在您将接口标记为合同（或从合同继承）之前，您的合同行为应该无效。

# ios6 - 是否可以在运行时读取应用程序中的 Pass Type ID？

> ID：14897734
> 
> 赞同：1
> 
> 时间：2013-02-15T15:17:39.700
> 
> 标签：ios6, passbook

我有一段代码需要由多个应用程序共享。我需要使用 Pass Type ID 来检查某个 Pass 是否始终在用户的 Passbook 应用程序中。要检查它，我需要使用 Pass Type ID。是否可以在运行时读取应用程序中使用的 Pass Type ID？

需要填写的内容......在以下行中。

```
 NSString* passTypeID = ... ; //How to get the passTypeID at runtime?
        for (PKPass *passFromPassbook in [PKPassLibrary passes]) {

        if ([[passFromPassbook passTypeIdentifier] isEqualToString:passTypeID]
            && [[passFromPassbook serialNumber] isEqualToString:serialNumber]) {
            isPassAlreadyInPassbook = YES;
            break;
        } 
```

谢谢。

# jquery - jquery - 当对象没有类时如何不触发事件

> ID：14897736
> 
> 赞同：-1
> 
> 时间：2013-02-15T15:17:47.293
> 
> 标签：jquery, html, css

我想做这个条件：

```
 if ( this div has NO class firing on) {

      // do nothing when click on it

   } // else do something 
```

是否可以？

我倾向于这样做，因为它是编码与另一个学生团队合作的限制。但是，如果我的问题令人困惑和不清楚，我很抱歉。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T15:21:56.633

我不确定我是否正确解释了您的问题，但我相信只有当触发事件的元素具有某个类时，您才想执行某个回调。在这种情况下，您可以在回调中执行以下操作：

```
$("#someId").on("click", function () {
   if (!$(this).hasClass("someClass"))
      return false;

   // Do your stuff here, if we get here, the element has the desired class
}); 
```

*使用此解决方案，您将捕获事件，但如果元素没有您感兴趣的类，您将什么也不做并提前转义回调。*

**更新：**

如果您不是特别寻找任何课程，只是想确保它根本没有任何课程，那么您可以这样做：

```
$("#someId").on("click", function () {
    if ($(this).prop("class").length === 0)
        return false;

    // Do your stuff here, if we get here, the element has no class
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T15:32:07.457

您可以委托并检查元素是否有一个类（不是空的） - 现在它只会在 div 有一个类时触发

```
$('parentelement').on('click','div:not([class=""])[class]',function(){

}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-15T15:23:15.283

你做错了。将类添加到div，你想操作，然后你可以使用选择器，或者hasClass。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-15T15:24:01.423

这是对问题的非常模糊的描述，这是一个非常笼统的答案：

```
$('div').each(function() {
    if (!this.hasAttribute('class')) { //has no class
        $(this).off(); //requires the use of on(), but removes all event handlers
    }
    $(this).on('click', ...)
}); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-15T15:32:17.673

我不明白你的问题。但我认为你想要这样的东西。

```
if($(this).hasClass('anyClass')){
//do nothing
return false;
}else{
//Do something
} 
```

注意：您试图以错误的方式完成它。尝试找出一些替代方法。

# .net - .NET 中单元测试的数据夹具

> ID：14897737
> 
> 赞同：2
> 
> 时间：2013-02-15T15:17:49.973
> 
> 标签：.net, unit-testing, nunit, moq

在 ruby​​ on rails 中，可以在 yaml 文件中定义数据夹具，然后使用从这些夹具创建的对象（使用 activerecord 作为代理）加载它们以执行某些测试。

我想知道使用 Moq 和 NUnit 进行单元测试是否存在类似的东西。

目前，我手动初始化对象（例如在存储容器中定义一组现有对象）并依靠继承使对象可用于各种测试。它可以工作，但数据现在与断言代码混合在一起，我想拆分它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-10-19T02:00:33.503

我也找不到任何 C# 夹具库。所以我想出了这个：[https ://www.nuget.org/packages/ts.Datafixtures/](https://www.nuget.org/packages/ts.Datafixtures/)

我用它对数据库/实体框架进行功能测试：每次运行测试时，数据库都是从头开始构建的，并带有测试用例所需的固定装置。固定装置是可重复使用的，并且可以依赖于其他固定装置。

该库可以在没有实体框架的情况下使用，但我不确定它是否对您的情况有意义。

Moq 使创建存根变得非常容易，但如果您发现自己到处重复相同的存根，只需提取公共代码即可。单元测试只是代码。拥有辅助函数、存根类、扩展或其他提供通用所需测试对象的工具是完全可以的。

我不熟悉 NUnit，但大多数单元测试框架都带有一些数据提供者的概念。将从 CSV 文件或类似文件中读取集合，并对每个条目运行测试。如果这符合您的要求，这也是一个不错的方法。

您可以将其与 Moq 结合使用 - 使用 CSV 中的标量值来检测您的存根对象。

希望这可以帮助...

# c# - 在构建期间自动化 xsd.exe

> ID：14897750
> 
> 赞同：7
> 
> 时间：2013-02-15T15:18:35.580
> 
> 标签：c#, .net, visual-studio, msbuild, xsd

我需要一种在构建过程中根据 *.xsd 文件自动重新生成 *.cs 文件的方法，最好不涉及任何自定义加载项。这也需要在 CI 构建上运行。

我不确定我是否遗漏了一些明显的东西，或者在我看来这真的很棘手吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-15T15:43:43.953

我使用这个脚本：

```
@echo off
cd %1
call :treeProcess %2 "XSDs"
cd ..
goto :eof

:treeProcess
rem From http://stackoverflow.com/a/8398621/298754
echo Processing %2
for %%f in (*.xsd) do call :buildXSD %%f %1 %2 %%~nf
for /D %%d in (*) do (
    cd %%d
    call :treeProcess %1 %2.%%d
    cd ..
)
exit /b

:buildXSD
%2 %1 /c /n:%3.%4% 
```

与预建事件

```
call "$(ProjectDir)"XSDBuilder.bat "$(ProjectDir)"\XSDs "$(Registry:HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Microsoft SDKs\Windows\v7.0A\@InstallationFolder)bin\xsd.exe" 
```

这将递归解析项目根目录中名为 .xsd 的文件夹中的每个 .xsd 文件`XSDs`，并将根据文件夹结构分配命名空间。

# bounding-box - Ogre3D 是否有功能齐全的 OBB 类？

> ID：14897752
> 
> 赞同：2
> 
> 时间：2013-02-15T15:18:40.443
> 
> 标签：bounding-box, ogre

Ogre3D 是否有功能齐全的 OBB 类？我认为默认情况下没有一个，但我正在寻找一种具有 AxisAlignedBox 类的所有功能的替代方案。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T09:45:05.570

周围有一些实现，它们没有集成在 Ogre 的核心中，因为这通常被物理引擎覆盖，并且不属于渲染引擎的主要区域：

[在 Ore wiki 文章Object Bounding Box](http://www.ogre3d.org/tikiwiki/tiki-index.php?page=Oriented%20Bounding%20Box)中可以找到一个实现示例。它的[讨论页](http://www.ogre3d.org/tikiwiki/tiki-index.php?page=Talk%3aOriented%20Bounding%20Box)，也有一些有用的代码行。

# javascript - 检查重复项时的 jQuery 性能问题

> ID：14897754
> 
> 赞同：0
> 
> 时间：2013-02-15T15:18:49.730
> 
> 标签：javascript, jquery, performance, jsp, html-table

当用户上传 CSV 文件时，我有一个 html 表，其中填充了产品列表。通常，该表将有超过一千行。问题是，当用户单击“提交”时，我必须检查每一行输入之一中的重复条目。这需要很长时间，而且我经常收到无响应的脚本警告。

这是我用来检查重复项的脚本：

```
// Check for duplicate products
    $('#match_table').submit(function(evt) {
        var arr = document.getElementsByName("pid[]");
        var sorted_arr =  new Array();
        for (var i = 0; i < arr.length; i++) {
            sorted_arr[i] = new Array();
            sorted_arr[i][0] = arr[i].value;
            sorted_arr[i][1] = arr[i].id;
        }
        sorted_arr.sort((function(index){
            return function(a, b){
                return (a[index] === b[index] ? 0 : (a[index] < b[index] ? -1 : 1));
            };
        })(0));
        var results = [];
        for (var i = 0; i < sorted_arr.length - 1; i++) {
            if (sorted_arr[i + 1][0] == sorted_arr[i][0]) {
                results.push(sorted_arr[i][0]);
                evt.preventDefault();
                document.getElementById(sorted_arr[i][1]).style.border = "1px solid red";
                document.getElementById(sorted_arr[i+1][1]).style.border = "1px solid red";
            }
        }
        if(results.length != 0){
            return false;
        }
    }); 
```

关于如何提高此脚本性能的任何想法/示例？或者如何解决这个问题？

编辑：HTML的片段

```
<form id="match_table" action="tool_tmaxupload.jsp" name="match_table" method="post">
                <table class="nozebra">
                    <thead>
                        <tr>
                            <th class="essential"></th>
                            <th class="essential">CSV Product</th>
                            <th class="essential">CSV Desc</th>
                            <th class="essential">Match Product</th>
                            <th class="essential">Match Desc</th>
                            <th class="essential">Match Vend</th>
                            <th class="essential">Amount</th>
                            <th class="essential">To Rebate</th>
                            <th class="essential">To Growth</th>
                            <th class="essential">Paid On What</th>
                        </tr>
                    </thead>
                    <tbody>

                                <tr class=even>
                                    <td><input type="checkbox" name="checkbox[]" class="checkall"></td>
                                    <td>343601</td>
                                    <td>TEST</td>
                                    <td><input type="text" size="8" name="pid[]" id="pid_0" value="343601"/></td>
                                    <td>COMBO LUNCH MEAT</td>
                                    <td><input type="text" size="8" name="ve[]" value="672" /> FARMLAND FOODS INC</td>
                                    <td><input type="text" size="5" name="ramt[]" value="5.5"/></td>
                                    <td>
                                        <select name="torebate[]" id="torebate">
                                            <option value="0" >No</option>
                                            <option value="1"  selected=selected>Yes</option>
                                        </select>
                                    </td>
                                    <td>
                                        <select name="togrowth[]" id="togrowth">
                                            <option value="0"  selected=selected>No</option>
                                            <option value="1" >Yes</option>
                                        </select>
                                    </td>
                                    <td>
                                        <select name="pow[]" id="pow">
                                            <option value="1"  selected=selected>% of FOB Cost</option>
                                            <option value="2" >% of Delivered Cost</option>
                                            <option value="3" >$ Per Case</option>
                                            <option value="4" >$ Per Pound</option>
                                            <option value="5" >% of Sold For Price</option>
                                        </select>
                                    </td>
                                </tr>

                                <tr class=odd>
                                    <td><input type="checkbox" name="checkbox[]" class="checkall"></td>
                                    <td>561720</td>
                                    <td>TEST</td>
                                    <td><input type="text" size="8" name="pid[]" id="pid_1" /></td>
                                    <td></td>
                                    <td><input type="text" size="8" name="ve[]" /></td>
                                    <td><input type="text" size="5" name="ramt[]" value="6.5"/></td>
                                    <td>
                                        <select name="torebate[]" id="torebate">
                                            <option value="0"  selected=selected>No</option>
                                            <option value="1" >Yes</option>
                                        </select>
                                    </td>
                                    <td>
                                        <select name="togrowth[]" id="togrowth">
                                            <option value="0" >No</option>
                                            <option value="1"  selected=selected>Yes</option>
                                        </select>
                                    </td>
                                    <td>
                                        <select name="pow[]" id="pow">
                                            <option value="1" >% of FOB Cost</option>
                                            <option value="2"  selected=selected>% of Delivered Cost</option>
                                            <option value="3" >$ Per Case</option>
                                            <option value="4" >$ Per Pound</option>
                                            <option value="5" >% of Sold For Price</option>
                                        </select>
                                    </td>
                                </tr>

                                <tr class=even>
                                    <td><input type="checkbox" name="checkbox[]" class="checkall"></td>
                                    <td>193420</td>
                                    <td>TEST</td>
                                    <td><input type="text" size="8" name="pid[]" id="pid_2" value="346770"/></td>
                                    <td>HAM SPIRAL SLIC disc use346778</td>
                                    <td><input type="text" size="8" name="ve[]" value="672" /> FARMLAND FOODS INC</td>
                                    <td><input type="text" size="5" name="ramt[]" value="7.5"/></td>
                                    <td>
                                        <select name="torebate[]" id="torebate">
                                            <option value="0" >No</option>
                                            <option value="1"  selected=selected>Yes</option>
                                        </select>
                                    </td>
                                    <td>
                                        <select name="togrowth[]" id="togrowth">
                                            <option value="0"  selected=selected>No</option>
                                            <option value="1" >Yes</option>
                                        </select>
                                    </td>
                                    <td>
                                        <select name="pow[]" id="pow">
                                            <option value="1" >% of FOB Cost</option>
                                            <option value="2" >% of Delivered Cost</option>
                                            <option value="3"  selected=selected>$ Per Case</option>
                                            <option value="4" >$ Per Pound</option>
                                            <option value="5" >% of Sold For Price</option>
                                        </select>
                                    </td>
                                </tr>

                                <tr class=even>
                                    <td><input type="checkbox" name="checkbox[]" class="checkall"></td>
                                    <td>193420</td>
                                    <td>TEST</td>
                                    <td><input type="text" size="8" name="pid[]" id="pid_3" value="346771"/></td>
                                    <td>HAM SPIRAL SLICED BONE IN</td>
                                    <td><input type="text" size="8" name="ve[]" value="672" /> FARMLAND FOODS INC</td>
                                    <td><input type="text" size="5" name="ramt[]" value="7.5"/></td>
                                    <td>
                                        <select name="torebate[]" id="torebate">
                                            <option value="0" >No</option>
                                            <option value="1"  selected=selected>Yes</option>
                                        </select>
                                    </td>
                                    <td>
                                        <select name="togrowth[]" id="togrowth">
                                            <option value="0"  selected=selected>No</option>
                                            <option value="1" >Yes</option>
                                        </select>
                                    </td>
                                    <td>
                                        <select name="pow[]" id="pow">
                                            <option value="1" >% of FOB Cost</option>
                                            <option value="2" >% of Delivered Cost</option>
                                            <option value="3"  selected=selected>$ Per Case</option>
                                            <option value="4" >$ Per Pound</option>
                                            <option value="5" >% of Sold For Price</option>
                                        </select>
                                    </td>
                                </tr>

                                <tr class=odd>
                                    <td><input type="checkbox" name="checkbox[]" class="checkall"></td>
                                    <td>191239</td>
                                    <td>TEST</td>
                                    <td><input type="text" size="8" name="pid[]" id="pid_4" value="346778"/></td>
                                    <td>HAM SPIRAL SLICED BONE IN</td>
                                    <td><input type="text" size="8" name="ve[]" value="672" /> FARMLAND FOODS INC</td>
                                    <td><input type="text" size="5" name="ramt[]" value="8.5"/></td>
                                    <td>
                                        <select name="torebate[]" id="torebate">
                                            <option value="0"  selected=selected>No</option>
                                            <option value="1" >Yes</option>
                                        </select>
                                    </td>
                                    <td>
                                        <select name="togrowth[]" id="togrowth">
                                            <option value="0"  selected=selected>No</option>
                                            <option value="1" >Yes</option>
                                        </select>
                                    </td>
                                    <td>
                                        <select name="pow[]" id="pow">
                                            <option value="1" >% of FOB Cost</option>
                                            <option value="2" >% of Delivered Cost</option>
                                            <option value="3" >$ Per Case</option>
                                            <option value="4"  selected=selected>$ Per Pound</option>
                                            <option value="5" >% of Sold For Price</option>
                                        </select>
                                    </td>
                                </tr>

                                <tr class=even>
                                    <td><input type="checkbox" name="checkbox[]" class="checkall"></td>
                                    <td>448584</td>
                                    <td>TEST</td>
                                    <td><input type="text" size="8" name="pid[]" id="pid_5" /></td>
                                    <td></td>
                                    <td><input type="text" size="8" name="ve[]" /></td>
                                    <td><input type="text" size="5" name="ramt[]" value="9.5"/></td>
                                    <td>
                                        <select name="torebate[]" id="torebate">
                                            <option value="0" >No</option>
                                            <option value="1"  selected=selected>Yes</option>
                                        </select>
                                    </td>
                                    <td>
                                        <select name="togrowth[]" id="togrowth">
                                            <option value="0" >No</option>
                                            <option value="1"  selected=selected>Yes</option>
                                        </select>
                                    </td>
                                    <td>
                                        <select name="pow[]" id="pow">
                                            <option value="1"  selected=selected>% of FOB Cost</option>
                                            <option value="2" >% of Delivered Cost</option>
                                            <option value="3" >$ Per Case</option>
                                            <option value="4" >$ Per Pound</option>
                                            <option value="5" >% of Sold For Price</option>
                                        </select>
                                    </td>
                                </tr>

                        </tbody>
                        <tfoot>
                            <tr>
                                <th colspan="10"><input type="hidden" name="rbid" value="10034" /></th>
                            </tr>
                        </tfoot>
                </table>
                <input class="check" type="button" value="Check all" />
                <input id="AddRow" type="button" value="Add">
                <input id="DeleteRow" type="button" value="Delete">
                <input type="submit" name="submit" value="Load" />
            </form> 
```

# python - Python 进度条通过日志记录模块

> ID：14897756
> 
> 赞同：18
> 
> 时间：2013-02-15T15:18:54.943
> 
> 标签：python, logging, progress-bar

我在 Python 中看到了不同的进度条解决方案，但简单的标准输出解决方案不适用于我的项目。我有多个类并使用“日志记录”模块将信息输出到 STDOUT。我有一个功能，我想在一行上显示一个进度条，每次都刷新缓冲区。

简单进度示例：

```
for i in range(100):
    time.sleep(1)
    sys.stdout.write("\r%d%%" %i)
    sys.stdout.flush() 
```

当我尝试通过 STDOUT 写入然后刷新缓冲区时，缓冲区未刷新或进度无处可去。我希望避免某种线程或复杂的过程来实现这一点。有人有首选的方法来实现这一点吗？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2018-01-01T17:00:18.263

我找不到一个好的解决方案，所以我写了[启发进度条](https://pypi.python.org/pypi/enlighten)来处理它。基本上它会改变终端的滚动区域，因此日志记录在进度条上方完成，而不是每次您想写入 STDOUT 时都必须重新绘制进度条。这使您可以根据需要尽可能多地写入终端，而无需修改[logging](https://docs.python.org/library/logging.html)、[print](https://docs.python.org/library/functions.html#print)等。

```
import logging
import time
import enlighten

# Setup logging
logging.basicConfig(level=logging.INFO)
logger = logging.getLogger()

# Setup progress bar
manager = enlighten.get_manager()
pbar = manager.counter(total=100, desc='Ticks', unit='ticks')

for i in range(1, 101):
    logger.info("Processing step %s" % i)
    time.sleep(.2)
    pbar.update() 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2016-12-19T14:35:47.723

我是这样解决的：

```
import logging
import time
from tqdm import tqdm
import io

class TqdmToLogger(io.StringIO):
    """
        Output stream for TQDM which will output to logger module instead of
        the StdOut.
    """
    logger = None
    level = None
    buf = ''
    def __init__(self,logger,level=None):
        super(TqdmToLogger, self).__init__()
        self.logger = logger
        self.level = level or logging.INFO
    def write(self,buf):
        self.buf = buf.strip('\r\n\t ')
    def flush(self):
        self.logger.log(self.level, self.buf)

if __name__ == "__main__":
    logging.basicConfig(format='%(asctime)s [%(levelname)-8s] %(message)s')
    logger = logging.getLogger()
    logger.setLevel(logging.DEBUG)

    tqdm_out = TqdmToLogger(logger,level=logging.INFO)
    for x in tqdm(range(100),file=tqdm_out,mininterval=30,):
        time.sleep(.5) 
```

输出

```
2016-12-19 15:35:06 [INFO    ] 16%|#####9                                | 768/4928 [07:04<40:50,  1.70it/s]
2016-12-19 15:36:07 [INFO    ] 18%|######6                               | 865/4928 [08:04<40:34,  1.67it/s] 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2016-08-11T11:46:05.143

您可以通过日志记录将[tqdm 进度条](https://github.com/tqdm/tqdm)与[自定义处理程序一起使用，如下所述](https://stackoverflow.com/questions/38543506/change-logging-print-function-to-tqdm-write-so-logging-doesnt-interfere-wit)：

```
import logging
import time
import colorlog
from tqdm import tqdm

class TqdmHandler(logging.StreamHandler):
    def __init__(self):
        logging.StreamHandler.__init__(self)

    def emit(self, record):
        msg = self.format(record)
        tqdm.write(msg)

if __name__ == "__main__":
    for x in tqdm(range(100)):
        logger = colorlog.getLogger("MYAPP")
        logger.setLevel(logging.DEBUG)
        handler = TqdmHandler()
        handler.setFormatter(colorlog.ColoredFormatter(
            '%(log_color)s%(name)s | %(asctime)s | %(levelname)s | %(message)s',
            datefmt='%Y-%d-%d %H:%M:%S',
            log_colors={
                'DEBUG': 'cyan',
                'INFO': 'white',
                'SUCCESS:': 'green',
                'WARNING': 'yellow',
                'ERROR': 'red',
                'CRITICAL': 'red,bg_white'},))

        logger.addHandler(handler)
        logger.debug("Inside subtask: "+str(x))
        time.sleep(.5) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-15T15:25:31.697

如果您**知道**进度条总是要写入 STDOUT，那么您应该只使用`print`而不是记录器。请参阅[Python 日志记录教程文档中的文档](http://docs.python.org/2/howto/logging.html#logging-basic-tutorial)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-04-25T20:13:11.560

清理这些提案的代码，这是 IMO 正确的实现，除了`tqdm`（也发布[在此处](https://stackoverflow.com/a/67257516/11750716)）之外没有外部依赖项：

```
import logging
from tqdm import tqdm

class TqdmLoggingHandler(logging.StreamHandler):
    """Avoid tqdm progress bar interruption by logger's output to console"""
    # see logging.StreamHandler.eval method:
    # https://github.com/python/cpython/blob/d2e2534751fd675c4d5d3adc208bf4fc984da7bf/Lib/logging/__init__.py#L1082-L1091
    # and tqdm.write method:
    # https://github.com/tqdm/tqdm/blob/f86104a1f30c38e6f80bfd8fb16d5fcde1e7749f/tqdm/std.py#L614-L620

    def emit(self, record):
        try:
            msg = self.format(record)
            tqdm.write(msg, end=self.terminator)
        except RecursionError:
            raise
        except Exception:
            self.handleError(record) 
```

测试：

```
import time

log = logging.getLogger(__name__)
log.setLevel(logging.INFO)
log.addHandler(TqdmLoggingHandler())
#   ^-- Assumes this will be the unique handler emitting messages to sys.stdout.
#       If other handlers output to sys.stdout (without tqdm.write),
#       progress bar will be interrupted by those outputs

for i in tqdm(range(20)):
    log.info(f"Looping {i}")
    time.sleep(0.1) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-08-26T14:58:11.580

您可能想要使用[progressbar2](https://github.com/WoLpH/python-progressbar)，它允许在打印进度条的同时继续记录：

最小的例子：

```
import time
import progressbar

for i in progressbar.progressbar(range(100), redirect_stdout=True):
    print('Some text', i)
    time.sleep(0.1) 
```

将导致： [![结果说明](../Images/af7d59523475d438d0a2a1652129dd28.png)](https://i.stack.imgur.com/yFDS4.png)

（progressbar2 兼容 Python2 和 Python3）

# ios - 外部导致链接器错误

> ID：14897757
> 
> 赞同：1
> 
> 时间：2013-02-15T15:18:58.900
> 
> 标签：ios, objective-c, extern

似乎几乎是[这个问题](https://stackoverflow.com/questions/12186631/declaring-extern-nsstring-causes-linker-error)的重复，但那里的答案并没有解决这个问题。

第一个.h

```
extern PlanningDocumentService *folderService; 
```

第一个.m

```
#import first.h

- (void)serviceDefinition
 {    
    PlanningDocumentService *folderService = [_myDocumentViews objectAtIndex:[_gridView indexOfSelectedItem]];   
    detail.service = folderService;
 } 
```

第二个.h

```
#import first.h 
```

秒.m

```
#import second.h

+(NSArray*)getDocumentData
{
     NSString *passedCaption =  folderService.caption;
} 
```

给出错误：

```
Undefined symbols for architecture i386:
  "_folderService", referenced from:
      +[GenericService getDocumentData] in GenericService.o
ld: symbol(s) not found for architecture i386
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

`folderService`除了上面的文件，我没有在任何地方声明或定义。欢迎任何想法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T15:23:51.667

您需要定义`folderService`具有全局范围：

第一个.m：

```
#import "first.h"

PlanningDocumentService *folderService = nil;

- (void)serviceDefinition
{    
    folderService = [_myDocumentViews objectAtIndex:[_gridView indexOfSelectedItem]];   
    detail.service = folderService;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-15T15:24:33.357

`PlanningDocumentService *folderService`within`- (void)serviceDefinition`使变量成为函数的局部变量，但不是全局变量。但是`extern PlanningDocumentService *folderService`声明了一个从未定义过的全局变量的存在。

# iphone - 如何在 Empty 应用程序中链接 Storyboard 和 Class

> ID：14897758
> 
> 赞同：2
> 
> 时间：2013-02-15T15:19:04.890
> 
> 标签：iphone, xcode, class, storyboard

伙计们！

我请求你帮助我在下面的疑问：

1.  为了使用核心数据，我启动了一个空应用程序。
2.  之后，我插入了一个没有 XIB 的 UIViewController 类，名为 MainView.m 和 MainView.H。
3.  而且，我插入了一个故事板。
4.  因此，我尝试使用屏幕右侧的菜单链接 MainView 和 Storyboard，但 MainView 没有出现在“Class”字段中。

有人知道为什么吗？

已经谢谢了

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T15:51:13.173

您需要编辑您的 plist 和您的

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions 
```

看答案：

[开始制作我的应用程序，现在需要故事板](https://stackoverflow.com/questions/14044100/started-making-my-app-now-need-story-boards/14044174#14044174)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T15:53:58.343

我强烈建议您从 Master-Detail Application 模板开始（使用故事板和核心数据）。它开箱即用，即使您最终没有使用主从架构，它也有故事板和*大量*用于 Core Data 的模板样板代码，您以后可以使用很少的代码修改。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T16:04:53.037

您需要在情节提要中有一个 ViewController，然后只需进入自定义类中的右侧菜单并选择您的类的名称

我无法发布图片，但这是一张

![http://i.stack.imgur.com/hxuPc.png](../Images/9f46e5f844cec0fba16dedebfd3d682b.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-15T16:18:42.253

单击您的故事板 将 ViewController 拖放到故事板上 单击视图控制器的黄色图标 显示实用程序区域 在实用程序中显示检查器 将鼠标悬停在实用程序中的图标上以找到它 找到您在自定义类下创建的类

完全的

# javascript - jQuery RoyalSlider 函数未在 IE8 或 IE7 中触发

> ID：14897759
> 
> 赞同：0
> 
> 时间：2013-02-15T15:19:05.933
> 
> 标签：javascript, jquery, jquery-plugins, syntax, internet-explorer-8

这是我遇到问题的页面：http: [//www.jonathanadler.com/presstest3.php](http://www.jonathanadler.com/presstest3.php)

[RoyalSlider](http://dimsemenov.com/plugins/royal-slider/)在除 IE8 和 IE7 之外的所有浏览器中都能正常工作（并且该插件应该支持这些浏览器）。**embedTumblr**工作正常， removeClass 也是如此**，**但**royalSlider**函数没有触发。

这是我在页面上的脚本：

```
<script type="text/javascript">
    $(document).ready(function() {
        $('#posts_container').embedTumblr('http://api.tumblr.com/v2/blog/japress.tumblr.com/posts?api_key=k9xgGA3H3LY3WFHgXMosOExTgQFSnhdGZCdrCdGJSgGSnLbg34');
    });
    $(window).load(function() {
        $('#posts_container').removeClass('hide');
        $('.royalSlider').royalSlider({
            arrowsNav: false,
            autoScaleSlider: false,
            imageAlignCenter: false,
            addActiveClass: true,
            controlNavigation: 'none',
            fadeinLoadedSlide: false,
            globalCaption: true,
            globalCaptionInside: true,
            imageScaleMode: 'fit',
            keyboardNavEnabled: true,
            visibleNearby: {
                enabled: true,
                centerArea: 0.4,
                center: true,
                breakpoint: 0,
                navigateByCenterClick: true
            }
        });
    });
</script> 
```

我对 javascript/jquery 比较陌生，所以我猜这可能是语法问题或类似问题。您可以提供的任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T15:27:10.523

一些建议：

(1) 尝试使用不同的文档类型，因为您正在使用的文档类型可能会导致问题。

任何一个：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
```

或者

```
<!doctype html> (If you want to switch to HTML5 - recommended) 
```

(2) 通过 HTML 和 CSS 验证器运行您的网站，因为您有大量错误。

*   [http://validator.w3.org/](http://validator.w3.org/)
*   [http://jigsaw.w3.org/css-validator/](http://jigsaw.w3.org/css-validator/)

(3) 我认为您也可以将滑块 JS 代码放在文档就绪块中。除非有充分的理由在其中使用窗口加载？

(4) 您正在运行旧版本的 jQuery。考虑将其更新到最新版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T19:52:53.750

我们可以在这里看到很多 JS 请求：

![JS 请求](../Images/096322baa0939011566bf9aa47551779.png)

以及 2 个用于 JQuery 库的文件：

[http://www.jonathanadler.com/skin1/jquery-1.8.0.min.js](http://www.jonathanadler.com/skin1/jquery-1.8.0.min.js) [http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js](http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js)

所以让我考虑一下 JS 冲突。

# sql - 透视查询帮助

> ID：14897761
> 
> 赞同：0
> 
> 时间：2013-02-15T15:19:08.810
> 
> 标签：sql, sql-server

```
Job Batch id   Company Outlet Id   Clearance required   Hanky required 
1              10                  T                    T 
```

现在我想要以下

```
Job Batch id   Company Outlet ID    Reason    
1              10                   Clearance Required , Hanky Required 
```

我的大脑已经冻结所以需要帮助？

如何构造这个非透视查询？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T15:32:33.043

我建议不要将多个值放在`Reason`Sql 查询中的单个列 ( ) 中，如果您希望以这种方式查看数据，则将其留给您的表示层...

但这是在 Sql 中执行此操作的方法：

```
SELECT
    [Job Batch Id],
    [Company Outlet Id],
    CASE 
        WHEN [Clearance Required] = 'T' 
        THEN 'Clearance Required' 
        ELSE '' END +
    -- Determine if the comma is needed or not...
    CASE 
        WHEN [Clearance Required] = 'T' 
            AND [Hanky Required] = 'T' 
        THEN ' , ' 
        ELSE '' END +
    CASE
        WHEN [Hanky Required] = 'T' 
        THEN 'Hanky Required' 
        ELSE '' END AS Reason
FROM YourTable 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T15:35:15.397

尝试：

```
select [Job Batch id], [Company Outlet Id],
       case [Clearance required]
            when 'T' then 'Clearance Required' + 
                case [Hanky required] when 'T' then ' , ' else '' end
       else ''
       end + case [Hanky required] when 'T' then 'Hanky Required' else '' end as [Reason]
from theTable 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-15T15:35:27.097

您可以使用`UNPIVOT`,`CROSS APPLY`并`FOR XML PATH`获得结果：

```
;with cte as
(
  select [Job Batch id], [Company Outlet Id],
    col, value
  from yourtable
  unpivot
  (
    value
    for col in ([Clearance required], [Hanky required])
  ) unpiv
)
select distinct t1.[Job Batch id], 
  t1.[Company Outlet Id],
  left(s.reason, len(s.reason)-1) reason
from cte t1
cross apply 
(
  select t2.col + ', '
  FROM cte t2
  where t1.[Job Batch id] = t2.[Job Batch id]
    and t1.[Company Outlet Id] = t2.[Company Outlet Id]
  FOR XML PATH('')
) s (reason) 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!3/46100/13)

或者您可以使用`UNPIVOT`,`STUFF`和`FOR XML PATH`:

```
;with cte as
(
  select [Job Batch id], [Company Outlet Id],
    col, value
  from yourtable
  unpivot
  (
    value
    for col in ([Clearance required], [Hanky required])
  ) unpiv
)
select distinct t1.[Job Batch id], 
  t1.[Company Outlet Id],
  STUFF(
         (SELECT ', ' + col
          FROM cte t2
          where t1.[Job Batch id] = t2.[Job Batch id]
            and t1.[Company Outlet Id] = t2.[Company Outlet Id]
          FOR XML PATH (''))
          , 1, 1, '')  AS Reason
from cte t1 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!3/46100/16)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-15T15:35:51.237

给你 - 只需像这样组合你的列。我正在使用 STUFF 删除开头的逗号：

```
select JobBatchId, 
  CompanyOutletId,
  STUFF(
    ISNULL(CASE WHEN ClearanceRequired = 'T' THEN ',Clearance Required' END, '')  +
    ISNULL(CASE WHEN HankyRequired = 'T' THEN ',Hanky Required' END, '') 
    , 1, 1, '') Reasons
from YourTable 
```

还有[SQL 小提琴](http://sqlfiddle.com/#!3/704bd/1)。

# actionscript-3 - HTML 包装器 FDT

> ID：14897764
> 
> 赞同：0
> 
> 时间：2013-02-15T15:19:20.723
> 
> 标签：actionscript-3, fdt

我在 as3 ide FDT 工作。我想为我的 Flash 项目生成 HTML 包装器，但我找不到任何选项可以让我像在 Flash Builder 或 Flash Professional 中那样生成 HTML 包装器。

在 FDT 哪里可以找到它？

伊吉德

预先感谢您的回答

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T15:39:16.673

我相信这应该回答你的问题：

[FDT 文档：从 Flash Builder 到 FDT - 我的 html 模板和其他支持文件在哪里？](http://fdt.powerflasher.com/docs/From_Flash_Builder_To_FDT#Where.27s_my_html-template_and_other_support_files.3F)

# ms-access - 访问报告更改控制值

> ID：14897765
> 
> 赞同：1
> 
> 时间：2013-02-15T15:19:23.660
> 
> 标签：ms-access, vba

我有一个为我们的库存系统制作标签的访问报告。我想在每个标签上放一个 QR 码来存储它的 ID 号。我找到了一个可以制作二维码的activeX控件。问题是我需要在报告中更改此控件的属性。有没有办法遍历报表中的所有记录来设置`dataToEncode`每个二维码的属性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T15:46:53.043

根据[视频](http://www.barcodetools.com/faq/barcode-activex/using-barcode-activex-in-ms-access-2010.html)，您只需将相关字段链接到控制源即可。

![在此处输入图像描述](../Images/91e5e37c7163f7753fd790686d19b0e3.png)

# javascript - jquery获取输入字段的id

> ID：14897768
> 
> 赞同：3
> 
> 时间：2013-02-15T15:19:38.257
> 
> 标签：javascript, jquery, sharepoint

我需要获取共享点列表范围内的输入的 id。它看起来像下面的代码。

```
<tr id="idEstablishmentRow">
<td class="ms-formbody" vAlign="top">
<span dir="none">
<span style="vertical-align: middle;">
<input type='text' id='hello' />
</span>
</span>
</td>
</tr> 
```

现在我想获取输入的 id。我努力了：

```
 var _test = $('#idEstablishmentRow').find('td.ms-formbody');
    var _test1 = _test.find('span.style');

    var _test2 = _test1.find('input');
    var _test3 = _test2.attr('id');
    alert(_test3);
    alert(_test2); 
```

但它没有用。谁能帮助我？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-15T15:21:24.377

你可能想要这个：

```
var id = $('#idEstablishmentRow td.ms-formbody span input').attr('id'); 
```

但是由于您的 HTML 没有任何 id 为`idEstablishmentRow`的元素，因此很难确定您到底想要什么。

[示范](http://jsfiddle.net/dystroy/9MCnX/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T15:22:34.427

```
var inputId = $("span input").attr("id"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T18:27:41.857

由于此选择器，您的代码段不起作用：`var _test1 = _test.find('span.style');`

执行此操作时，您尝试查找具有 css 类“样式”而不是 html 属性样式的跨度。因而`_test1`是空的。

您可以执行以下操作来修复它：`var _test1 = _test.find('span[style]');`

虽然它不是一个很好的选择器，因为如果您更改 css 以将其从内联中删除，它很可能会中断。

*   您可以向 span 添加一个类`<span class="aclass"></span>`。这样，您可以通过以下选择器选择它：`var _test1 = _test.find('span.aclass');`

*   您也可以通过其他方式选择它，例如`var _test1 = _test.find('span:nth-child(2)');`它是否始终是第二个孩子。

*这些只是您`_test2`和`_test3`*

*   您还可以尝试使用`var _test1 = _test.find('span input');`或选择其中包含输入的所有跨度`_test.find('span').children('input')`。然后你可以做你的`_test3`.

* * *

**请注意，您可以在 1 行中重新组合选择器：**

这具有不必在跨度上放置类的优点，因为您实际上不仅查询跨度，而且查询其中包含输入的跨度。

```
$('tr#idEstablishmentRow td.ms-formbody span input');

//or to get the id directly
$('tr#idEstablishmentRow td.ms-formbody span input').attr('id'); 
```

# android - 启动新 Activity 时出现 TransactionTooLargeException

> ID：14897770
> 
> 赞同：6
> 
> 时间：2013-02-15T15:19:41.417
> 
> 标签：android, android-intent, binding

我认为 Intent 的额外大小限制是 1MB，如[docs](http://developer.android.com/reference/android/os/TransactionTooLargeException.html)上所报道的那样。无论如何，我失去了一天追逐这个可怕的东西`TransactionTooLargeException`：

```
 E/JavaBinder(368): !!! FAILED BINDER TRANSACTION !!!
 Exception when starting activity android/com.android.internal.app.ChooserActivity
 android.os.TransactionTooLargeException
at android.os.BinderProxy.transact(Native Method)
at    android.app.ApplicationThreadProxy.scheduleLaunchActivity(ApplicationThreadNative.java:705)
at com.android.server.am.ActivityStack.realStartActivityLocked(ActivityStack.java:690)
at com.android.server.am.ActivityStack.startSpecificActivityLocked(ActivityStack.java:799)
at com.android.server.am.ActivityStack.resumeTopActivityLocked(ActivityStack.java:1743)
at com.android.server.am.ActivityStack.resumeTopActivityLocked(ActivityStack.java:1381)
at com.android.server.am.ActivityStack.completePauseLocked(ActivityStack.java:1129)
at com.android.server.am.ActivityStack.activityPaused(ActivityStack.java:1027)
at com.android.server.am.ActivityManagerService.activityPaused(ActivityManagerService.java:4288)
at android.app.ActivityManagerNative.onTransact(ActivityManagerNative.java:381)
at com.android.server.am.ActivityManagerService.onTransact(ActivityManagerService.java:1611)
at android.os.Binder.execTransact(Binder.java:367)
at dalvik.system.NativeStart.run(Native Method) 
```

不好的是 startActivity 失败了，但是 ActivityManager 不断地重新启动它，产生无限的进程。这似乎在[这篇](http://www.lonestarprod.com/?tag=transactiontoolargeexception)博文中得到了证实，作者在其中指出了**86389 个字符的“限制”**。我的相关代码很简单：

```
 Intent myIntent = new Intent(activity, VacancySwipeActivity.class);
                    //myIntent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                    Bundle ex = new Bundle();
                    ex.putSerializable(Constants.Extra.VACANCY, vacancies);
                    ex.putString("token", token);
                    ex.putString("cosa", cosa.getText().toString());

                    ex.putInt("dist", searchDistance.getProgress());
                    ex.putString("dove", dove.getText().toString());
                    if (ret.getSearchLocation() != null) {
                        ex.putParcelable("userLoc", ret.getSearchLocation());
                    }
                    ex.putInt("totRows", ret.getTotFound());

                    myIntent.putExtras(ex);
                    activity.startActivity(myIntent); 
```

ArrayList 空缺非常小，大约 8 个 POJO ，它被加载到一个 Thread 中，然后通过 Intent 的 extra 传递给一个新的活动。如果我将它增加到大约 90k，应用程序会无限循环，需要重新启动，这真的很烦人。**还有其他人经历过**吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-03-25T01:38:24.690

限制应该是 1MB，但它因设备而异，从略低于 512KB 到几乎完整的 1MB。除此之外，您还有另一个问题。您将 ArrayList 作为额外的，这很好，因为 ArrayList 实现了可序列化。但是如果你认为 android 会将此列表序列化为 byte[] 并转移，那你就错了。它将自行序列化每个项目并进行传输。这比听起来效率低得多。您应该将 ArrayList 包装在实现 Serializable 的包装器对象中，这将产生巨大的影响。有关更多详细信息，请参阅此[博客文章](https://medium.com/nemanja-kovacevic/yet-another-post-on-serializable-vs-parcelable-1e829e98472)（我的）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-06T15:06:03.140

我有同样的问题，通过制作一个 singelton Hashtable 来解决它，我保存我的“长”字符串，并且我只给出意图中的键。

# android - Android Activity 顺序已更改

> ID：14897773
> 
> 赞同：0
> 
> 时间：2013-02-15T15:19:49.893
> 
> 标签：android, android-activity

有活动顺序自动更改的应用程序

日志

申请开始

01-07 17:30:55.178: E/ASE(11253): RouteListActivity.onCreate

01-07 17:30:55.208: E/ASE(11253): RouteListActivity.onResume

**开始第二次活动**

```
Intent intent = new Intent(getBaseContext(), PointListActivity.class);
startActivity(intent); 
```

01-07 17:30:57.948: E/ASE(11253): RouteListActivity.onPause

01-07 17:30:57.948: E/ASE(11253): PointListActivity.onCreate

01-07 17:30:57.958: E/ASE(11253): PointListActivity.onResume

**开始第三个活动**

```
Intent intent = new Intent(getBaseContext(), PointActivity.class);
startActivity(intent); 
```

01-07 17:30:59.258: E/ASE(11253): PointListActivity.onPause

01-07 17:30:59.268: E/ASE(11253): PointActivity.onCreate

01-07 17:30:59.278: E/ASE(11253): PointActivity.onResume

**按回**

01-07 17:31:00.858: E/ASE(11253): PointActivity.onPause

**如果以前是 PointListActivity 为什么要恢复 RouteListActivity**

01-07 17:31:00.868: E/ASE(11253): RouteListActivity.onResume

**按回**

01-07 17:35:42.858: E/ASE(11253): RouteListActivity.onPause

**为什么现在 PointListActivity 恢复**

01-07 17:35:42.858: E/ASE(11253): PointListActivity.onResume

显现

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="xxx"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="17" />

    <uses-permission android:name="android.permission.READ_PHONE_STATE" />
    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.READ_LOGS" />
    <uses-permission android:name="android.permission.CAMERA" />

    <application
        android:allowBackup="false"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme"
        >        

        <activity
            android:name="xxx.AuthActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

        <activity
            android:name="xxx.Preferences"
            android:label="@string/title_activity_preferences" >
        </activity>

        <service android:name="xxx.MyService" >
        </service>

        <activity
            android:name="xxx.PointListActivity"
            android:label="@string/title_activity_point_list" 
            android:launchMode="singleInstance" >
        </activity>

        <activity
            android:name="xxx.PointActivity"
            android:label="@string/title_activity_point" >
        </activity>

        <activity
            android:name="xxx.RouteListActivity"
            android:label="@string/title_activity_route_list" >
        </activity>

    </application>

</manifest> 
```

# mysql - 将特定表的 AUTO_INCREMENT 属性逐步更改 n 值

> ID：14897774
> 
> 赞同：2
> 
> 时间：2013-02-15T15:19:53.827
> 
> 标签：mysql, sql

[将步骤 auto_increment 字段增量更改为](https://stackoverflow.com/questions/1686327/change-the-step-auto-increment-fields-increment-by)

上面的链接描述了如何在mysql中改变AUTO_INCREMENT的步长值。这将影响所有表。

这种行为是特定于 mysql 的吗？有人可以建议一个允许为每个表设置步长值的 DBMS 吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T15:51:25.993

从技术上讲，`AUTO_INCREMENT`作为关键字是 MySQL 特有的，因为其他 RDBMS 品牌实现了不同的功能来生成人为的唯一 id 值。MySQL 和 SQLite 是唯一广泛使用的*不允许*按表递增选项的 RDBMS。

## 微软 SQL 服务器

SQL Server 声明一个带有[IDENTITY](http://msdn.microsoft.com/en-us/library/ms186775.aspx)选项的列，并且 IDENTITY 关键字可以接受初始值和增量的参数，因此您可以对每个表进行更改。

```
CREATE TABLE employee
(
 id int IDENTITY(1,2),
 fname varchar (20),
 minit char(1),
 lname varchar(30)
) 
```

## 甲骨文

Oracle 使用[SEQUENCE](http://docs.oracle.com/cd/B28359_01/server.111/b28286/statements_6015.htm)对象，您调用 NEXTVAL() 来获取主键的新值。您可以对多个表使用单个序列，或对特定表使用特定序列，或任意组合。每次插入时，您只需明确命名序列。

```
CREATE SEQUENCE s START WITH 1 INCREMENT BY 10; 

INSERT INTO employee (id) VALUES (s.NEXTVAL); 
```

## PostgreSQL

PostgreSQL 具有具有相同选项的[序列](http://www.postgresql.org/docs/current/static/sql-createsequence.html)对象，您可以声明表使用哪个序列来自动生成值。

```
CREATE SEQUENCE s START WITH 1 INCREMENT BY 10; 

CREATE TABLE employee (
    id integer NOT NULL DEFAULT NEXTVAL('s')
); 
```

您还可以将[SERIAL](http://www.postgresql.org/docs/current/static/datatype-numeric.html)声明为简写，这会隐式地为列创建一个序列。我没有测试过它，但我想你可以在它创建的序列上改变序列，以改变它的增量步骤。

## IBM DB2

DB2 也有序列对象。DB2 还可以声明列以[自动生成标识](http://www.ibm.com/developerworks/data/library/techarticle/dm-0407zhang/index.html)值。

```
CREATE TABLE EMPLOYEE (
  SERIALNUMBER  BIGINT NOT NULL 
        GENERATED ALWAYS AS IDENTITY
        (START WITH 1, INCREMENT BY 1),
  FIRSTNAME CHAR(64),
  LASTNAME  CHAR(64),
  SALARY        DECIMAL(10, 2),
  PRIMARY KEY (SERIALNUMBER)
); 
```

或者：

```
CREATE SEQUENCE EMPSERIAL
 AS BIGINT
 START WITH 1
 INCREMENT BY 10; 
```

## SQLite

SQlite 似乎没有办法在全局或每个表中更改其[自动增量；](http://www.sqlite.org/autoinc.html)它递增 1 直到达到 maxint，然后尝试一些随机值，然后放弃。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T15:27:03.513

你是问其他数据库系统能不能改变AUTO_INCREMENT的步长值？如果是这样，是的，您可以在 SQL Server 中执行此操作。我怀疑大多数 RDBS 都支持这个，但我知道 SQL Server 支持它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T15:48:48.310

SQL Server - 身份

```
IDENTITY [ (seed , increment) ] 
```

[http://msdn.microsoft.com/en-us/library/ms186775.aspx](http://msdn.microsoft.com/en-us/library/ms186775.aspx)

甲骨文 - 序列

```
CREATE SEQUENCE Test_Sequence
INCREMENT BY 1
START WITH 1;

INSERT INTO Test (ID, Val)
VALUES (Test_Sequence.NEXTVAL, 1); 
```

[http://docs.oracle.com/cd/B28359_01/server.111/b28286/statements_6015.htm](http://docs.oracle.com/cd/B28359_01/server.111/b28286/statements_6015.htm)

# c++ - 函数返回后字符数组未销毁

> ID：14897775
> 
> 赞同：0
> 
> 时间：2013-02-15T15:19:55.673
> 
> 标签：c++

在下面的代码中，我希望 tmp 字符数组在 f() 返回后被销毁，因此根本不应该打印 x。

但是，在下面的函数中 x 在 main() 中打印，但 for 循环没有打印正确的内容。有人可以解释这种行为。这是输出。

abcdefg a b c d e f g abcdefg ?

k Y 我

```
#include <iostream>
using namespace std; 

char* x;  
void f() 
{
    char tmp[100]= "abcdefg";   
    x = tmp; 

    cout << x << endl; 
    for(int i=0; i < 7; i++) 
        cout << x[i] << endl; 
}

int main() 
{
    f();

    cout << x << endl; 
    for(int i=0; i < 7; i++) 
        cout << x[i] << endl; 
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T15:23:50.060

您正在做的是未定义的行为，您有一个指向内存位置的指针，该内存位置可能完好，也可能不完好。这是不好的。

实际发生的情况是，您的 char 缓冲区 tmp 位于 function 的堆栈帧上`f()`，当该函数返回时，数据留在堆栈上以被未来的堆栈帧覆盖。

做你所做的事情的正确方法很简单。

```
std::string f() {
     std::string str ("abcdefg");
     std::cout << str << '\n';
     return str;
}
int main() {
    std::string s=f();
    std::cout << s << '\n';
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T15:22:43.577

您正在调用未定义的行为。`f()`范围关闭后指针可能有效也可能无效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T15:23:14.623

您正在调用 UB。您访问不再为您的程序分配的内存。它在第一次打印时起作用只是运气。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-15T15:28:33.207

在您的程序`x`中，它被定义为一个全局指针，它使用堆栈`char temp[100]`上分配的地址进行初始化。当函数`f`返回时，堆栈指针递减。但是，`x`将继续指向没有正确值的相同内存位置，因此会观察到不正确的输出。

# android - Android onCreate 和 AsyncTask 延迟

> ID：14897785
> 
> 赞同：0
> 
> 时间：2013-02-15T15:20:27.100
> 
> 标签：android, performance, android-layout, android-asynctask, oncreate

我的应用需要先加载一些 JSON，然后才能在 UI 上显示任何内容，JSON 决定了应用应该如何主题化。

虽然我通常不喜欢它们，但需要启动屏幕/加载屏幕，这样用户就不必看到界面的每个元素改变颜色等。但是我的问题是，当我加载我的应用程序时，我可以在我的进度对话框启动前几秒钟查看默认样式。我可以看到默认的深色渐变全息背景，以及包含我的应用标题的操作栏。如果我在 XML 中隐藏操作栏，则以后无法将其重新添加，并`nullpointerexceptions`在对其进行操作时获取。

我`onCreate()`什至在设置我`AsyncTask`的`onPreExecute()`.

理想情况下，我希望能够在应用程序启动时*立即*显示加载对话框，或者如果确实需要延迟，我只想让用户看到黑色背景。

有没有我没有提到的完全不同的方法？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T15:37:37.130

我实际上会考虑在这里使用片段。您可以为初始屏幕创建一个片段，并在您的活动首次开始时加载该片段。然后，一旦您的 json 加载/解析完成，您可以使用 FragmentTransaction 将您的第二个“屏幕”作为第二个片段加载，并让它替换您的加载屏幕。这也可以让你做一些漂亮的过渡动画。

This could be similarly done with the comment from njzk2, with two separate Activities. Essentially, you would do your parsing AsyncTask during the 'loading activity' and store the result as either a serializable object that could be passed to your other activity using an Intent extra or you could store the json into the SharedPreferences dictionary and reference that in your second activity.

You might also find that this is something you don't have to do every start up. If so, you should save either the serializable to disk so you can skip parsing or to the shared preferences so you can reference it there if it exists.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T15:29:57.163

您看到的是根据您的主题主题的空活动。因此，您无能为力 - 如果引导活动需要一些时间，它将显示出来。

你可以做的是在你的活动上设置特殊的主题，将splash-image设置为windowBackground（窗口装饰视图的背景），如果你不需要它，稍后删除背景。

```
<style name="SplashScreenActivityTheme" parent="android:Theme.Light.NoTitleBar">
        <item name="android:windowBackground">@drawable/splash_image</item>
</style> 
```

有关它的更多信息，您可以[在 Cyril Mottier 的新帖子中阅读](http://android.cyrilmottier.com/?p=873)

还有一点需要注意：android 通常不使用闪屏。如果您的设计师不反对，您可以使用一些进度指示器，例如 ProgressBar 或其他东西

# css - css 不会从文件中加载

> ID：14897786
> 
> 赞同：0
> 
> 时间：2013-02-15T15:20:27.257
> 
> 标签：css, apache, debian

我无法从单独的文件加载 .css。

例如，如果我有 html：

```
<!DOCTYPE html>
<html>
<link href "style.css" rel="stylesheet" type = "text/css">

<head>

</head>

<body>

<h1>My CSS web page!</h1>
<p>Hello world! This is a W3Schools.com example.</p>

</body>
</html> 
```

css没有加载

但是，如果我在同一个 html 文件中有 css，则 css 会正确加载。我究竟做错了什么？

编辑：按照几个人的建议，将 HTML 更改为下面的代码。仍然没有效果。sytle.css 与我的源 html 位于同一目录中。

```
<head>
<link href="style.css" rel="stylesheet" type="text/css">
</head>

<body>

<h1>My CSS web page!</h1>
<p>Hello world! This is a W3Schools.com example.</p>

</body>
</html> 
```

CSS样式表：

```
<style>
    body
    {
        background-color:#b0c4de;
    }
</style> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T15:22:39.797

您的`link`标签格式错误，应位于`head`（而不是文档的根目录）：

```
<link href "style.css" rel="stylesheet" type="text/css"> 
```

应该是（注意`href=`更正）：

```
<link href="style.css" rel="stylesheet" type="text/css"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T15:22:53.600

尝试这个

```
<link href="style.css" rel="stylesheet" type = "text/css"> 
```

# javascript - 获取表格行中的元素

> ID：14897788
> 
> 赞同：0
> 
> 时间：2013-02-15T15:20:39.333
> 
> 标签：javascript, select, input, onchange, hidden

首先，如果可能的话，我想在没有 JQuery 和纯 Javascript 的情况下执行此操作。

好的，所以我有一个 html 表，其中的行被动态添加到其中。

在每一行是一个：

*   选择元素 (id = "ddFields")
*   文本输入元素 (id = "tfValue")
*   按钮元素（无 id）

Button Element 删除它所在的行

选择元素有一个默认选项“”，然后是其他“有效”选项

文本输入已添加到该行，但它是隐藏的。

所有元素都在同一个

基本上，如果所选索引为 != 0，我希望 Select Element 显示隐藏的文本输入元素

到目前为止，我的 onchange 函数有这个：

```
function itemChanged(dropdown) //called from itemChanged(this)
{ 
   var cell         = dropdown.parentNode;
   var row      = cell.parentNode;
   var rowIndex = dropdown.parentNode.parentNode.rowIndex;
   var index            = dropdown.selectedIndex;
   var option           = dropdown.options[dropdown.selectedIndex].text;

   if(index >0)
   {    
     alert(row);
     var obj=row.getElementById("tfValue"); //tfValue is the Text Field element
     alert(obj);
     //row.getElementById("tfValue").hidden = "false"; //doesn't work
     //row.getElementById("tfValue").setAttribute("hidden","true"); //doesn't work
   }
   else
   {
      alert('none selected');

   }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T09:11:08.753

终于想通了。所以这里是：

**场景：** 动态添加行的表。

在每一行中都有一个选择元素和一个输入文本元素。

选择元素根据选择元素的索引更改输入文本元素的文本值。

在您的选择元素中，将 onchange 函数设置为：

```
onchange="selectionChanged(this)" 
```

然后创建一个javascript函数，如下所示：

```
function selectionChanged(dropdown)
{
   //get the currently selected index of the dropdown
   var index     = dropdown.selectedIndex;

   //get the cell in which your dropdown is
   var cell      = dropdown.parentNode;located

   //get the row of that cell
   var row       = cell.parentNode;

   //get the array of all cells in that row 
   var cells     = row.getElementsByTagName("td");

   //my text-field is in the second cell
   //get the first input element in the second cell
   var textfield = cells[1].getElementsByTagName("input")[0]; 

   //i use the first option of the dropdown as a default option with no value
   if(index > 0)  
   {
      textfield.value = "anything-you-want";
   }
   else
   {
      textfield.value = null;
   }
} 
```

希望这对任何人都有帮助。它困扰了我很长时间。感谢舒布的帮助！:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T17:24:13.180

首先，我希望你不要重复你的身份。没有两个项目应该具有相同的 id。

如果您正在迭代，请创建 id1、id2、id3。

此外，这不是必需的，但我建议像这样引入您的变量：

```
var a = x, 
    b = y,
    c = z; 
```

如果你决定使用 jQuery，你可以这样做：

```
$('#tableid').on('click','button',function(){
    $(this).parent().parent().remove();
});

$('#tableid').on('change', 'select',function(){
    if($(this).val()){ $(this).next().show(); }
}); 
```

请务必更改#tableid 以匹配您的表的ID。

这假定文本输入是选择框之后的下一个元素。如果不是这样，请根据需要进行调整或询问，我将进行编辑。

# ios - FIT SDK 示例

> ID：14897789
> 
> 赞同：2
> 
> 时间：2013-02-15T15:20:40.830
> 
> 标签：ios, fit-protocol

我正在为 iOS 开发一个健康/健身应用程序，允许用户将锻炼导出为 FIT 文件，以便与其他健身应用程序一起使用。sdk 上的文档非常好，但实现示例非常有限。是否有关于如何在线、开源或有人可以提供的如何导出锻炼（使用锻炼步骤消息）的示例？

我正在努力解决的部分是如何在锻炼的同一时间间隔中包含多个步骤持续时间类型。有什么我对文档不太了解的地方吗？另外，如何在不指定上方或下方的情况下包含心率信息？

# raphael - 渐变色拉斐尔

> ID：14897790
> 
> 赞同：0
> 
> 时间：2013-02-15T15:20:51.717
> 
> 标签：raphael, gradient

当在 Raphael 中我将颜色设置为`90-#7ADADD-#338A93`路径时，它变成了渐变。然后，当我检查元素时，我可以看到它的`fill`属性设置为：`url(#490-_7ADADD-_338A93)`.

如果我尝试将其更改为`90-#7ADADD-#338A93`黑色。问题是如何从外部改变渐变颜色？我怎样才能`url(#490-_7ADADD-_338A93)`从我原来的计算这个`90-#7ADADD-#338A93`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T15:49:52.100

如果您查看完整的 SVG 源代码，它可能看起来像这样

```
<svg xmlns="http://www.w3.org/2000/svg" version="1.1">
  <defs>
    <linearGradient id="490-_7ADADD-_338A93" x1="0%" y1="0%" x2="100%" y2="0%">
      ....
    </linearGradient>
  </defs>
  <ellipse cx="200" cy="70" rx="85" ry="55" fill="url(#490-_7ADADD-_338A93)" />
</svg> 
```

该`url(...)`部分实际上是对在 中定义的渐变的引用`defs`。如果您将引用更改为不存在的内容，它将以黑色填充显示。

在 Raphael 中，合乎逻辑的做法是将渐变操作保留在库中。如果你这样做...

```
path.attr({"fill": "90-#fff-#000"})
path.attr({"fill": "90-#ccc-#666"}) 
```

然后 Raphael 将插入一个新的`linearGradient`并为您引用它。

如果您*真的*需要操作 SVG 源代码，那么您可以执行类似...

```
var gradient = document.getElementById('490-_7ADADD-_338A93');
var stops = gradient.querySelectorAll('stop');
stops[0].setAttribute("stop-color", "#c00");
stops[1].setAttribute("stop-color", "#00c"); 
```

但这会破坏 VML 兼容性（IE 8 或更低版本）。

# javascript - 防止 JSON.NET Xml 转换器使用“@”作为属性前缀

> ID：14897795
> 
> 赞同：2
> 
> 时间：2013-02-15T15:21:03.733
> 
> 标签：javascript, vb.net, json, knockout.js, json.net

我正在尝试将一些 XML 数据转换为 JSON 以与 KnockoutJS 一起使用。经过一番研究，我决定使用 JSON.NET 将我的`XNode`树转换为 JSON 字符串。我通过调用转换 XML 树

```
JsonConvert.SerializeXNode(result, Newtonsoft.Json.Formatting.Indented, True) 
```

这给了我类似的东西

```
"Header": {
"@id": "3",
"@name": "General",
"Property": [
  {
    "@id": "76",
... 
```

尝试引用诸如`@name`导致我的 KnockoutJS 模板损坏之类的东西。我只会`@`从字符串中删除所有实例，但它也存在于数据中。

有什么简单的方法可以防止 JSON.NET 将`@`符号放在属性上？

# jquery - 带切换的响应式导航菜单

> ID：14897796
> 
> 赞同：1
> 
> 时间：2013-02-15T15:21:04.513
> 
> 标签：jquery, css, toggle, responsive-design, window-resize

我正在尝试为我现在在马德里做的大师完成我的网络项目，我很难做到这一点。

你可以看看这个网站上的傻瓜代码：

[http://cice.digitalcore.es/febrero/majestic/](http://cice.digitalcore.es/febrero/majestic/)

切换的代码是：

```
//Navigation Toggle
    function navToggle() {
        if(open){
            if ($(window).width() <= 1024) {
                $("#navigation-panel").animate({width: "toggle"}, 500)
                $("#photos").animate({"margin-left":"310px"}, 500);
                open= false;
            }
            else if ($(window).width() > 1024) {
                $("#navigation-panel").animate({width: "toggle"}, 500)
                $("#photos").animate({"margin-left":"410px"}, 500);
                open= false;
            }
        }
        else {
            $("#navigation-panel").animate({width: "toggle"}, 500)
            $("#photos").animate({"margin-left":"10px"}, 500)
            open= true;
        }
    } 
```

我的主要问题是一旦导航一开始一切都很好，但是一旦将窗口大小调整到 1024 以下或图像墙刹车的其他方式，它不尊重为 1024 以下或超过 1024 的分辨率分配的不同边距。

我希望你能帮助我，我将不胜感激:)。

编辑：

我试过这个，但它也不起作用：

```
$(window).resize(autoResize);

    //Auto Resize
    function autoResize() {
        if ($("#navigation-panel").is(":visible")) {
            if ($(window).width() <= 1024) {
                $("#photos").animate({"margin-left":"310px"}, 500);
            }
            else if ($("#navigation-panel").is(":visible")) {
                if ($(window).width() > 1024) {
                    $("#photos").animate({"margin-left":"410px"}, 500);
                }
            }
        }
    } 
```

谢谢 Easwee :) 必须修复它添加这个：

```
$(window).resize(autoResize);

    //Auto Resize
    function autoResize() {
        if ($("#navigation-panel").is(":visible")) {
            if ($(window).width() <= 1024) {
                $("#photos").css({"margin-left":"310px"});
            }
            else if ($("#navigation-panel").is(":visible")) {
                if ($(window).width() > 1024) {
                    $("#photos").css({"margin-left":"410px"});
                }
            }
        }
    } 
```

最好的问候，乔尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T15:37:23.390

`navToggle()`您还需要在调整窗口大小时触发该功能。

因为我看到你使用 jquery 看看[http://api.jquery.com/resize/](http://api.jquery.com/resize/)

# android - Android GoogleMaps NoClassDefFoundError

> ID：14897804
> 
> 赞同：1
> 
> 时间：2013-02-15T15:21:25.107
> 
> 标签：android, noclassdeffounderror, google-maps-api-2

我收到以下令人沮丧的错误。

```
02-15 16:13:12.562: W/dalvikvm(2637): VFY: unable to resolve static field 740 (MapAttrs) in Lcom/google/android/gms/R$styleable;
02-15 16:13:12.562: D/dalvikvm(2637): VFY: replacing opcode 0x62 at 0x000e
02-15 16:13:12.566: D/AndroidRuntime(2637): Shutting down VM
02-15 16:13:12.566: W/dalvikvm(2637): threadid=1: thread exiting with uncaught exception (group=0x41506300)
02-15 16:13:12.578: E/AndroidRuntime(2637): FATAL EXCEPTION: main
02-15 16:13:12.578: E/AndroidRuntime(2637): java.lang.NoClassDefFoundError: com.google.android.gms.R$styleable
02-15 16:13:12.578: E/AndroidRuntime(2637):     at com.google.android.gms.maps.GoogleMapOptions.createFromAttributes(Unknown Source)
02-15 16:13:12.578: E/AndroidRuntime(2637):     at com.google.android.gms.maps.MapFragment.onInflate(Unknown Source)
02-15 16:13:12.578: E/AndroidRuntime(2637):     at android.app.Activity.onCreateView(Activity.java:4663)
02-15 16:13:12.578: E/AndroidRuntime(2637):     at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:680)
02-15 16:13:12.578: E/AndroidRuntime(2637):     at android.view.LayoutInflater.rInflate(LayoutInflater.java:746)
02-15 16:13:12.578: E/AndroidRuntime(2637):     at android.view.LayoutInflater.inflate(LayoutInflater.java:489)
02-15 16:13:12.578: E/AndroidRuntime(2637):     at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
02-15 16:13:12.578: E/AndroidRuntime(2637):     at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
02-15 16:13:12.578: E/AndroidRuntime(2637):     at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:256)
02-15 16:13:12.578: E/AndroidRuntime(2637):     at android.app.Activity.setContentView(Activity.java:1867)
02-15 16:13:12.578: E/AndroidRuntime(2637):     at com.test.testapp.MainActivity.onCreate(MainActivity.java:17)
02-15 16:13:12.578: E/AndroidRuntime(2637):     at android.app.Activity.performCreate(Activity.java:5008)
02-15 16:13:12.578: E/AndroidRuntime(2637):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
02-15 16:13:12.578: E/AndroidRuntime(2637):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023)
02-15 16:13:12.578: E/AndroidRuntime(2637):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
02-15 16:13:12.578: E/AndroidRuntime(2637):     at android.app.ActivityThread.access$600(ActivityThread.java:130)
02-15 16:13:12.578: E/AndroidRuntime(2637):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
02-15 16:13:12.578: E/AndroidRuntime(2637):     at android.os.Handler.dispatchMessage(Handler.java:99)
02-15 16:13:12.578: E/AndroidRuntime(2637):     at android.os.Looper.loop(Looper.java:137)
02-15 16:13:12.578: E/AndroidRuntime(2637):     at android.app.ActivityThread.main(ActivityThread.java:4745)
02-15 16:13:12.578: E/AndroidRuntime(2637):     at java.lang.reflect.Method.invokeNative(Native Method)
02-15 16:13:12.578: E/AndroidRuntime(2637):     at java.lang.reflect.Method.invoke(Method.java:511)
02-15 16:13:12.578: E/AndroidRuntime(2637):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
02-15 16:13:12.578: E/AndroidRuntime(2637):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
02-15 16:13:12.578: E/AndroidRuntime(2637):     at dalvik.system.NativeStart.main(Native Method) 
```

我所做的只是遵循入门指南：[https ://developers.google.com/maps/documentation/android/start](https://developers.google.com/maps/documentation/android/start)

有人有什么想法吗？

# wiki - 谷歌代码维基主页

> ID：14897807
> 
> 赞同：0
> 
> 时间：2013-02-15T15:21:31.237
> 
> 标签：wiki, google-code

如何在我的 google 代码项目中将 wiki 页面设置为主页（每次单击“Wiki”选项卡时都会显示它）。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-06T04:43:48.037

在您的 GoogleCode 网站上，点击“管理”，然后点击“标签”。在出现的表单中，您可以自定义要用于“下载”/“Wiki”/“问题”/“源”选项卡的 wiki 页面。

# linux - 获取命令输出重定向到的路径

> ID：14897808
> 
> 赞同：1
> 
> 时间：2013-02-15T15:21:31.630
> 
> 标签：linux

有没有办法找到命令的输出重定向到的路径（如果已经）？

我尝试使用：

```
ps -p PID -o cmd 
```

以为我可以寻找`>`并从中提取路径，但输出中没有那部分。我很确定它不仅仅是被截断了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T15:29:17.327

如果您知道 PID，只需检查`/proc/ID/fd/1`. 它应该链接到实际路径：

```
$ watch date > /tmp/1 &
[1] 27346
$ ls -l /proc/27346/fd/1
l-wx------ 1 choroba users 64 2013-02-15 16:28 /proc/27346/fd/1 -> /tmp/1 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T15:29:53.443

`/proc/self/fd`您可以为此使用 proc 文件系统

```
readlink /proc/self/fd/1 
```

对于标准输出或`2`标准错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T15:37:21.090

使用`lsof`(list open files) 命令查看进程已打开哪些文件以供写入。

例如：

```
$ lsof -p 31714
COMMAND   PID  USER      FD   TYPE DEVICE    SIZE       NODE NAME
bash    31714 dogbane    0u   CHR  136,4                  6 /dev/pts/4
bash    31714 dogbane    1w   REG    8,1      15    2032202 /tmp/t 
```

`w`FD（文件描述符）列中的 表示打开`/tmp/t`可写。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-15T15:39:37.010

这个怎么样？

```
[root@us04 ~]# ls -l /proc/14170/exe
lrwxrwxrwx 1 root root 0 Feb 15 10:36 /proc/14170/exe -> /usr/sbin/httpd 
```

再举一个例子：

```
[root@us04 ~]# readlink -f /proc/5352/exe
/sbin/syslogd 
```

# android - Android：如何使用字符串设置文本颜色

> ID：14897809
> 
> 赞同：0
> 
> 时间：2013-02-15T15:21:32.550
> 
> 标签：android

我的意图是带来两个字符串。1 是消息的字符串，另一个是颜色的字符串。

下面的代码显示收到了 2 个字符串。“消息”字符串显示在正常工作的文本视图中。但是我需要字符串“messagecolor”来设置文本视图的颜色。

我有一个 colors.xml 文件，其中定义了蓝色、绿色和红色。

因此，如果字符串“messagecolor”为蓝色，则文本将为蓝色。红色和绿色也一样。如果字符串 "messagecolor 不是蓝色、红色或绿色，则文本将显示为黑色。

如果有人可以帮助我解决这个问题，将不胜感激。

谢谢

```
// Get the message from the intent
    Bundle bundle = getIntent().getExtras();
    String messagecolor = bundle.getString(MainActivity.EXTRA_MESSAGE_COLOR);
    String message = bundle.getString(MainActivity.EXTRA_MESSAGE);

    // Create the text view
    TextView textView = new TextView(this);
    textView.setTextColor(getResources().getColor(R.color.blue));
    textView.setTextSize(100);
    textView.setText(message); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T15:29:18.160

与其尝试匹配哪个颜色由哪个字符串表示，为什么不传递资源 ID 本身？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-14T09:25:52.820

```
text.setText(Html.fromHtml("<font color='red'>R</font>")); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T15:33:50.423

尝试

```
if (message.equals("messageBlue")) {
    textView.setTextColor(getResources().getColor(R.color.blue));
} else if (message.equals("messageGreen")) {
    textView.setTextColor(getResources().getColor(R.color.green));
} else if (message.equals("messageRed")) {
    textView.setTextColor(getResources().getColor(R.color.red));
} else //default
    textView.setTextColor(getResources().getColor(R.color.black)); 
```

# javascript - Firefox 上的 Flexslider 和 YouTube Iframe API 出现问题（“* 不是函数”）

> ID：14897812
> 
> 赞同：2
> 
> 时间：2013-02-15T15:21:45.640
> 
> 标签：javascript, firefox, youtube, flexslider

我正在尝试使用一个播放视频的滑块来实现一个站点。我遵循了此处的答案之一，以便能够在播放视频时阻止滑块漂移，但现在我需要能够在用户离开幻灯片时停止视频的实际播放。

这是我当前的代码：

```
// Define YT_ready function.
var YT_ready = (function(){
    var onReady_funcs = [], api_isReady = false;
    /* @param func function     Function to execute on ready
     * @param func Boolean      If true, all qeued functions are executed
     * @param b_before Boolean  If true, the func will added to the first
                                 position in the queue*/
    return function(func, b_before){
        if (func === true) {
            api_isReady = true;
            for (var i=0; i<onReady_funcs.length; i++){
                // Removes the first func from the array, and execute func
                onReady_funcs.shift()();
            }
        }
        else if(typeof func == "function") {
            if (api_isReady) func();
            else onReady_funcs[b_before?"unshift":"push"](func); 
        }
    }
})();
// This function will be called when the API is fully loaded
function onYouTubePlayerAPIReady() {YT_ready(true)}

// Load YouTube Frame API
(function(){ //Closure, to not leak to the scope
  var s = document.createElement("script");
  s.src = "http://www.youtube.com/player_api"; /* Load Player API*/
  var before = document.getElementsByTagName("script")[0];
  before.parentNode.insertBefore(s, before);
})();

var players = {};
//Define a player storage object, to enable later function calls,
//  without having to create a new class instance again.
YT_ready(function() {
  (function($) {
    $(".framevideo").each(function(index) {
      var identifier = this.id;
      var frameID = getFrameID(identifier);
      if (frameID) { //If the frame exists
        players[frameID] = new YT.Player(frameID, {
          events: {
            "onStateChange": function(event) {
              if(event.data == 1 || event.data == 3) {
                //console.log("The video two is playing and the cycle is paused = " + event.data);
                $('.flexslider').flexslider('pause');
              }
              else if(/* event.data == -1 || */ event.data == 0 || event.data == 2 || event.data == 5) {
                //console.log("The video two is not playing and the cycle is started = " + event.data);
                $('.flexslider').flexslider('play');
              }
            }
          }
        });
      }
    });

    $('.flexslider').bind('before', function() {
      for (var key in players)
      {
        /* this works in Chrome and IE9, doesn't work on Firefox?! */
        players[key].pauseVideo();
      }
    });
  })(jQuery);
}); 
```

我知道玩家循环正确，我已经使用 console.log 对其进行了调试，并且我得到了所有玩家的密钥，但`players[key].pauseVideo();`给了我一个错误`TypeError: players[key].pauseVideo is not a function`。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T17:30:46.453

我最终编写了该函数，以便仅在每张幻灯片处于活动状态时才加载 YouTube 播放器，然后将其存储在容器对象中。这是确保它正在显示并且不会失败的唯一方法。

```
var players = {};
//Define a player storage object, to enable later function calls,
//  without having to create a new class instance again.
YT_ready(function() {
  (function($) {
    createPlayers();

    //console.log('binding');
    $('.flexslider').bind('after', function() {
      createPlayers();
    });

    $('.flexslider').bind('before', function() {
      for (key in players) {
        //console.log('pausing '+key);
        players[key].pauseVideo();
      }
    });
  })(jQuery);
});

// this function will check for all frames that don't have a display:none attribute, and create a player for them
function createPlayers() {
  (function($) {
    //console.log('attempting to create players');
    $(".framevideo").each(function(index) {
      var frameID = getFrameID(this.id);
      if (frameID) { //If the frame exists
        // we check if frame already has associated key in container object
        if (!(frameID in players)) {
          // now we check if the parent slider "row" is displayed
          if ($(this).parents('.flexslider-views-slideshow-main-frame-row').css('display') !== 'none') {
            // we create the player and add it to the container
            //console.log('creating '+frameID);
            players[frameID] = new YT.Player(frameID, {
              events: {
                "onStateChange": function(event) {
                  if(event.data == 1 || event.data == 3) {
                    $('.flexslider').flexslider('pause');
                  }
                  else if(/* event.data == -1 || */ event.data == 0 || event.data == 2 || event.data == 5) {
                    $('.flexslider').flexslider('play');
                  }
                }
              }
            });

          }
        }
      }
    });
  })(jQuery);
} 
```

# postgresql - 如何防止 Postgres 内联子查询？

> ID：14897816
> 
> 赞同：12
> 
> 时间：2013-02-15T15:22:08.997
> 
> 标签：postgresql, indexing, subquery, inlining

这是 Postgres 9.1.6 上的慢查询，即使最大计数为 2，两行都已由它们的主键标识：（4.5 秒）

```
EXPLAIN ANALYZE SELECT COUNT(*) FROM tbl WHERE id IN ('6d48fc431d21', 'd9e659e756ad') AND data ? 'building_floorspace' AND data ?| ARRAY['elec_mean_monthly_use', 'gas_mean_monthly_use'];
                                                                     QUERY PLAN                                                                     
----------------------------------------------------------------------------------------------------------------------------------------------------
 Aggregate  (cost=4.09..4.09 rows=1 width=0) (actual time=4457.886..4457.887 rows=1 loops=1)
   ->  Index Scan using idx_tbl_on_data_gist on tbl  (cost=0.00..4.09 rows=1 width=0) (actual time=4457.880..4457.880 rows=0 loops=1)
         Index Cond: ((data ? 'building_floorspace'::text) AND (data ?| '{elec_mean_monthly_use,gas_mean_monthly_use}'::text[]))
         Filter: ((id)::text = ANY ('{6d48fc431d21,d9e659e756ad}'::text[]))
 Total runtime: 4457.948 ms
(5 rows) 
```

嗯，也许如果我首先只使用主键部分进行子查询......：（不，仍然是 4.5+ 秒）

```
EXPLAIN ANALYZE SELECT COUNT(*) FROM (  SELECT * FROM tbl WHERE id IN ('6d48fc431d21', 'd9e659e756ad')  ) AS t WHERE data ? 'building_floorspace' AND data ?| ARRAY['elec_mean_monthly_use', 'gas_mean_monthly_use'];
                                                                     QUERY PLAN                                                                     
----------------------------------------------------------------------------------------------------------------------------------------------------
 Aggregate  (cost=4.09..4.09 rows=1 width=0) (actual time=4854.170..4854.171 rows=1 loops=1)
   ->  Index Scan using idx_tbl_on_data_gist on tbl  (cost=0.00..4.09 rows=1 width=0) (actual time=4854.165..4854.165 rows=0 loops=1)
         Index Cond: ((data ? 'building_floorspace'::text) AND (data ?| '{elec_mean_monthly_use,gas_mean_monthly_use}'::text[]))
         Filter: ((id)::text = ANY ('{6d48fc431d21,d9e659e756ad}'::text[]))
 Total runtime: 4854.220 ms
(5 rows) 
```

如何防止 Postgres 内联子查询？

背景：我有一个使用[hstore](http://www.postgresql.org/docs/9.1/static/hstore.html)并带有[GiST 索引](http://www.postgresql.org/docs/9.1/static/textsearch-indexes.html)的 Postgres 9.1 表。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-15T15:31:55.353

我认为这`OFFSET 0`是更好的方法，因为它更明显地显示了一些奇怪的事情正在发生，而且我们不太可能改变优化器的行为`OFFSET 0`......~~希望 CTE 在某些时候~~变得可内联 CTE 默认情况下可内联PostgreSQL 12\. 以下解释是为了完整起见；使用Seamus的答案。

对于不相关的子查询，您*可以*利用 PostgreSQL 11 和更早版本拒绝内联`WITH`查询术语来将您的查询改写为：

```
WITH t AS (
    SELECT * FROM tbl WHERE id IN ('6d48fc431d21', 'd9e659e756ad')
)
SELECT COUNT(*) 
FROM t 
WHERE data ? 'building_floorspace' 
AND data ?| ARRAY['elec_mean_monthly_use', 'gas_mean_monthly_use']; 
```

这与黑客攻击的效果大致相同`OFFSET 0`，就像`offset 0`黑客利用 Pg 优化器中的怪癖一样，人们用来解决 Pg 缺乏查询提示的问题……通过将它们用作查询提示。

但是这个`OFFSET 0`黑客有点官方祝福，而 CTE 滥用在 PostgreSQL 12 中不再起作用。（耶！）。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-15T15:22:08.997

显然有一种[方法可以告诉 Postgres 不要内联](http://www.postgresql.org/message-id/E1RfAwz-0006Us-7B@wrigleys.postgresql.org)：（0.223 毫秒！）

```
EXPLAIN ANALYZE SELECT COUNT(*) FROM (  SELECT * FROM tbl WHERE id IN ('6d48fc431d21', 'd9e659e756ad') OFFSET 0 ) AS t WHERE data ? 'building_floorspace' AND data ?| ARRAY['elec_mean_monthly_use', 'gas_mean_monthly_use'];
                                                                QUERY PLAN                                                                
------------------------------------------------------------------------------------------------------------------------------------------
 Aggregate  (cost=8.14..8.15 rows=1 width=0) (actual time=0.165..0.166 rows=1 loops=1)
   ->  Subquery Scan on t  (cost=4.14..8.14 rows=1 width=0) (actual time=0.160..0.160 rows=0 loops=1)
         Filter: ((t.data ? 'building_floorspace'::text) AND (t.data ?| '{elec_mean_monthly_use,gas_mean_monthly_use}'::text[]))
         ->  Limit  (cost=4.14..8.13 rows=2 width=496) (actual time=0.086..0.092 rows=2 loops=1)
               ->  Bitmap Heap Scan on tbl  (cost=4.14..8.13 rows=2 width=496) (actual time=0.083..0.086 rows=2 loops=1)
                     Recheck Cond: ((id)::text = ANY ('{6d48fc431d21,d9e659e756ad}'::text[]))
                     ->  Bitmap Index Scan on tbl_pkey  (cost=0.00..4.14 rows=2 width=0) (actual time=0.068..0.068 rows=2 loops=1)
                           Index Cond: ((id)::text = ANY ('{6d48fc431d21,d9e659e756ad}'::text[]))
 Total runtime: 0.223 ms
(9 rows) 
```

诀窍在于`OFFSET 0`子查询。

# sqlite - SQLite 管理员连接结果

> ID：14897821
> 
> 赞同：0
> 
> 时间：2013-02-15T15:22:33.620
> 
> 标签：sqlite, administrator

我有这张桌子
id valor
1 4
1 3
2 2
3 3
3 1

所以，我需要咨询一下，答案是

id valor
1 4,3
2 2
3 3,1

我与 SQLite 管理员一起工作..请有人知道我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T15:36:01.233

```
SELECT id,
       group_concat(valor) AS valor
FROM this_table
GROUP BY id 
```

# blackberry-webworks - BlackBerry WebWorks 调用弹出 BB10 共享面板/屏幕

> ID：14897826
> 
> 赞同：0
> 
> 时间：2013-02-15T15:22:44.660
> 
> 标签：blackberry-webworks, blackberry-10

如何让我的 webworks 应用弹出打开黑莓 10 共享面板？

例如：在浏览器中打开一个网站，点击溢出按钮，然后点击分享

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T19:16:29.460

您需要查看 invokeTargetPicker API。

本质上，您创建一个请求

```
var request = {
  action: 'bb.action.SHARE',

  // for a file
  uri: 'file://' + path,

  // for text you'd use 'data'
  data: 'I am awesome',

  target_type: ["APPLICATION", "VIEWER", "CARD"]
}; 
```

然后调用 API

```
blackberry.invoke.card.invokeTargetPicker(request, "Your Title",

    // success callback
    function() {
        console.log('success');
    },

    // error callback
    function(e) {
        console.log('error: ' + e);
    }
); 
```

API 文档可在此处获得：[https ://developer.blackberry.com/html5/apis/blackberry.invoke.card.html#.invokeTargetPicker](https://developer.blackberry.com/html5/apis/blackberry.invoke.card.html#.invokeTargetPicker)

我编写了一个示例应用程序，您可以在我们的 GitHub 存储库上对其进行测试：[https ://github.com/ctetreault/BB10-WebWorks-Samples/tree/master/ShareTargets](https://github.com/ctetreault/BB10-WebWorks-Samples/tree/master/ShareTargets)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T19:18:01.837

这应该是出现在任何链接、图像或文本上的选项：“共享”。显示的横切菜单中是否不存在该项目？

# php - PHP 权限

> ID：14897829
> 
> 赞同：0
> 
> 时间：2013-02-15T15:23:04.320
> 
> 标签：php, database, permissions, apache2

我尝试执行以下代码行：

```
$dbh = dba_open("./data/products", "c", "gdbm") or die("Couldn't open database"); 
```

不幸的是，我得到了骰子。

我认为这里的权限有问题。我已将脚本目录的权限设置为“0777”，将目录的所有者设置为“www-data”（我正在使用 apache2）。我不知道还有哪些信息对解决问题有用。

编辑：我正在尝试创建数据库。它在行执行之前不存在。

Edit2：我也尝试过绝对路径：

```
$currentDir = getcwd();
$dbh = dba_open("$currentDir/data/products", "c", "gdbm") or die("Couldn't open database"); 
```

Edit3：错误日志。

```
[Fri Feb 15 18:20:37 2013] [notice] Apache/2.2.22 (Ubuntu) PHP/5.4.6-1ubuntu1.1 configured -- resuming normal operations
[Fri Feb 15 18:20:41 2013] [error] [client 127.0.0.1] PHP Warning:  dba_open(./data/products,c): No such handler: gdbm in /var/www/phpTraining/listing12.1.php on line 14 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T15:51:03.103

您应该检查 error_logs 以获取更多线索。

# python - 将 pandas 的 to_html 保存为文件

> ID：14897833
> 
> 赞同：8
> 
> 时间：2013-02-15T15:23:23.157
> 
> 标签：python, pandas

我有一个 DateFrame 'tsod'，现在我将它转换为 html：

```
tsod.to_html() 
```

如何将其保存为文件？更好地保存为“.html”文件。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-15T15:34:31.873

```
with open('my_file.html', 'w') as fo:
    fo.write(tsod.to_html()) 
```

或者使用熊猫

```
tsod.to_html(open('my_file.html', 'w')) 
```

或再次（感谢@andy-hayden）

```
with open('my_file.html', 'w') as fo:
    tsod.to_html(fo) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-04-05T13:48:59.880

截至当前版本的熊猫`tsod.to_html('out.html')`工作正常。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T15:55:00.527

```
a=tsod.to_html()
save(a,'path') 
```

将工作

# php - 使用 jQuery AJAX 更新数据库只能使用一次

> ID：14897835
> 
> 赞同：2
> 
> 时间：2013-02-15T15:23:30.160
> 
> 标签：php, jquery, ajax, mysqli

我正在尝试使用 jQuery 更新数据库。该功能工作得很好，但只有一次。如果我想再次更新数据库，我必须刷新页面并清除缓存。我正在使用 MODX 革命，我不确定这是否与这个问题有关。这是代码：

```
<html>
  <head>
    <script language="javascript" type="text/javascript" src="//ajax.aspnetcdn.com/ajax/jQuery/jquery-1.8.3.min.js"></script>
  </head>
  <body>

<script>
$(document).ready(function(){
 $('#paina').submit( function updateTitle() {
        var mail = $("#output").val();
        $.ajax({  
            type: "POST",  
            url: "gettable.php",  
            data: "mail="+ mail,  
            cache: false,
            success: function(data){
                alert(mail);  
            }  
        });
        return false;
    });
});

  </script>

<form id="paina" name="test" action="javascript:updateTitle()" method="post">
<input type="text" id="output">
<input type="Submit" value="Update">
</form>   
  </body>
</html> 
```

PHP：

```
<?php
$mail=$_POST["mail"];

$mysqli = mysqli_connect("url", "user", "password", "database_name");

mysqli_query($mysqli, "UPDATE modx_site_content SET pagetitle='$mail' WHERE longtitle='jee'");

echo "Updated!";

$mysqli->close(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T15:37:54.130

来自 jQuery 文档：

> 注意：将缓存设置为 false 仅适用于 HEAD 和 GET 请求

丑陋的修复：将随机参数附加到查询字符串：

```
$.ajax({  
            type: "POST",  
            url: "gettable.php",  
            data: "mail="+ mail + "&timestamp=" + new Date(),  // Will append the current date in milliseconds since January 1, 1970 (correct me if I'm wrong).
            cache: false,
            success: function(data){
                alert(mail);  
            }  
        }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T15:38:03.823

尝试将ajax更改为帮助调试，我还向数据添加了一个对象并将同步设置为false以确保ajax在返回之前完成执行

```
$(document).ready(function(){
  $('#paina').submit( function() {
     $.ajax({  
        type: "POST",  
        url: "gettable.php",  
        data: {mail: mail},  
        cache: false,
        async: false,
        success: function(data){
            alert(mail);  
        },
        error function(){
           alert("Failed");

        } 
     });
  });
}); 
```

您也不需要表单上的操作，因为 jQuery 正在处理它

```
<form id="paina" name="test" action="" method="post"> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T20:18:43.253

感谢您的提示。我找到了解决方案，MODX Revolution 使用 xPDO 数据库连接，所以我不得不将 PHP 代码更改为：

```
$mail=$_POST["mail"];

$dsn = 'mysql:host=localhost;dbname=databasename;port=3306;charset=utf-8';
$xpdo = new xPDO($dsn,'user','password');
$results = $xpdo->query("UPDATE modx_site_content SET pagetitle='$mail' WHERE longtitle='jee'"); 
```

# google-app-engine - 将 get_serving_url() 用于存储为数据存储区中的 blob 属性的图像

> ID：14897836
> 
> 赞同：0
> 
> 时间：2013-02-15T15:23:32.593
> 
> 标签：google-app-engine, google-cloud-datastore

我有一个将图像存储为 blob 属性的数据存储。我想使用 get_serving_url 即时提供图像。

```
 def urlserve(self):
         return images.get_serving_url(str(self.key.urlsafe()),350) 
```

它给了我一个像

```
http://localhost:8097/_ah/img/ahBkZXZ-cmFqaW5pbmF0aW9uciYLEglpbWFnZWxpc3QiDWRlZmF1bHRfaW1hZ2UMCxIDSW1nGKkHDA=s350 
```

但我无法使用该页面提供服务。

所以我只能使用 blobstore 图像来执行此操作，如果是这样，我是否需要为我的图像创建一个 blobstore 并将 blobreference 属性存储在我的数据存储中？还是有更好的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T17:09:22.090

如果您正在使用`db`，则应将 存储在`blob_info.key()`中`blobstore.BlobReferenceProperty`，否则如果您正在使用，`ndb`则应将 存储`key`在`ndb.BlobKeyProperty`.

对于图像服务 URL，您不必一直计算它，但您可以在存储`BlobKey`.

# soapui - soapUI 免费版中的有限线程

> ID：14897839
> 
> 赞同：2
> 
> 时间：2013-02-15T15:23:46.283
> 
> 标签：soapui, load-testing

我们在项目中长期使用**soapUI免费版（4.5.1）**来测试我们的web服务。我们主要使用简单的策略以及不同的线程数来检查我们的服务器和 Web 服务的负载。我们使用 50、75、100 和 150 线程来检查我们的 Web 服务可以处理多少个连接。我们没有使用延迟，因此，没有随机来拥有恒定线程。

我们的服务器宕机后，系统专家今天到达并告诉我们soapUI 并没有**真正**创建输入的线程（即100）。他们认为免费版本会更新并将线程数设置为 5（或更低或更高），而不是我们想要的值。这真的让我们震惊，因为我们用免费版本测试了我们的项目，没有使用任何其他测试工具进行交叉检查。

所以，我想问的是，在soapUI的免费版本中，我真的只能创建有限的线程而不使用150个线程吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-16T10:05:48.027

不，那不是真的。

SoapUI 有这样的限制是没有意义的，因为它是开源的；所以任何人都可以分叉 SoapUI 并从源代码中删除限制。

这种混淆可能是因为 SoapUI 4.5.0（开源版和专业版）中存在限制线程数的错误。此错误已在 4.5.1 中修复

*来源/免责声明：我是一名全职开发 LoadUI 和 SoapUI 的开发人员。*

# php - Wordpress 3 自定义小部件

> ID：14897861
> 
> 赞同：0
> 
> 时间：2013-02-15T15:25:11.323
> 
> 标签：php, widget, wordpress

我查找了默认的 wordpress 3.5.1 小部件类并复制了搜索小部件进行自定义，但我无法在管理页面上显示我的自定义小部件。无法弄清楚出了什么问题，因为一切都类似于默认的。

custom_plugin_search_form/custom_plugin_search_form.php

```
<?
/*
Plugin Name: custom_plugin_search_form
Plugin URI: http://google.com
Description: bla bla, and bla bla. Indeed bla bla, after bla bla...
Version: 1.0
Author: Albert Ainstaine
Author URI: http://blabla.bla/blabla/bla-widget
*/

class custom_plugin_search_form extends WP_Widget {

    function __construct() {
        $widget_ops = array('classname' => 'widget_search', 'description' => __( "A search form for your site") );
        parent::__construct('search', __('Search'), $widget_ops);
    }

    function widget( $args, $instance ) {
        extract($args);
        $title = apply_filters( 'widget_title', empty( $instance['title'] ) ? '' : $instance['title'], $instance, $this->id_base );

        echo $before_widget;
        if ( $title )
            echo $before_title . $title . $after_title;

        // Use current theme search form if it exists
        get_search_form();

        echo $after_widget;
    }

    function form( $instance ) {
        $instance = wp_parse_args( (array) $instance, array( 'title' => '') );
        $title = $instance['title'];
?>
        <p><label for="<?php echo $this->get_field_id('title'); ?>"><?php _e('Title:'); ?> <input class="widefat" id="<?php echo $this->get_field_id('title'); ?>" name="<?php echo $this->get_field_name('title'); ?>" type="text" value="<?php echo esc_attr($title); ?>" /></label></p>
<?php
    }

    function update( $new_instance, $old_instance ) {
        $instance = $old_instance;
        $new_instance = wp_parse_args((array) $new_instance, array( 'title' => ''));
        $instance['title'] = strip_tags($new_instance['title']);
        return $instance;
    }

}

function custom_plugin_search_form_init() {
    if ( !is_blog_installed() )
        return;

    register_widget('custom_plugin_search_form_init');

    do_action('custom_plugin_search_form_init');
}

add_action('init', 'custom_plugin_search_form_init', 1); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T17:25:35.150

我确实注意到您对此 php 文件的开始处理指令缺少页面顶部的“php”。目前，您只有`<?`. 应该是`<?php`。这可能是一个问题。

# encryption - 带有 c# 的 Crypto-Js

> ID：14897863
> 
> 赞同：-1
> 
> 时间：2013-02-15T15:25:21.370
> 
> 标签：encryption, cryptography, aes

我正在学习加密和使用**crypto-js**我制作了一个**Js & c#**版本。我想要完成的是 JS 或 c# 版本将能够相互解码消息。

为了测试，我在 JS 和 C# 实例中保持**IV**和**KEY**、**填充**和**模式相同。**

我让它们分别解密和加密数据，但我还没有完成的是提供从 JS 加密的能够使用 c# 解码的。

JS

```
var key = CryptoJS.enc.Base64.parse('7061737323313233'); 
var iv = CryptoJS.enc.Base64.parse('7061737323313233'); 
var encrypted = CryptoJS.AES.encrypt("It works", key, 
 { keySize: 128 / 8, iv: iv, mode: CryptoJS.mode.CBC,padding: CryptoJS.pad.Pkcs7 }); 

var decrypted = CryptoJS.AES.decrypt(encrypted, key, { 
keySize: 128 / 8, iv: iv, mode: CryptoJS.mode.CBC, padding: CryptoJS.pad.Pkcs7 }); 

document.write('Encrypted :' + encrypted + '<br>');
document.write('Key :' + encrypted.key + '<br>');
document.write('Salt :' + encrypted.salt + '<br>');
document.write('iv :' + encrypted.iv + '<br>');
document.write('Decrypted : ' + decrypted + '<br>');
document.write('utf8 = ' + decrypted.toString(CryptoJS.enc.Utf8) + '<br>'); 
```

C＃

```
 public void startEncryption(string original )
        {

            using (RijndaelManaged myRijndael = new RijndaelManaged())
            {
                //Settings
                myRijndael.Mode = CipherMode.CBC;
                myRijndael.Padding = PaddingMode.PKCS7;
                myRijndael.FeedbackSize = 128;

                keybytes = Encoding.UTF8.GetBytes("7061737323313233");
                //Should be made unique for each message!. TODO
                iv = Encoding.UTF8.GetBytes("7061737323313233");

                // Encrypt the string to an array of bytes.
                encrypted = EncryptStringToBytes(original, keybytes, iv);

                //Show Encrypted data
                txt_Output.Text = Convert.ToBase64String(encrypted);

                // Decrypt the bytes to a string.
                string roundtrip = DecryptStringFromBytes(encrypted, keybytes, iv);

                //Display the original data and the decrypted data.
                Console.WriteLine("Original:   {0}", original);
                Console.WriteLine("Round Trip: {0}", roundtrip);
            }

        } 
```

解密出现问题的地方。

```
 private void btn_Decrypt_Click(object sender, EventArgs e)
    {
        Console.WriteLine("Decrypting..");
        using (RijndaelManaged myRijndael = new RijndaelManaged())
        {
            //Settings
            myRijndael.Mode = CipherMode.CBC;
            myRijndael.Padding = PaddingMode.PKCS7;
            myRijndael.FeedbackSize = 128;

            keybytes = Encoding.UTF8.GetBytes("7061737323313233");
            //Should be made unique for each message!. TODO
            iv = Encoding.UTF8.GetBytes("7061737323313233");

            // Decrypt the bytes to a string.
            string roundtrip = DecryptToString(txt_Output.Text);

            txt_Output.Text = roundtrip;
            //Display the original data and the decrypted data.

        }
    }

  public string DecryptToString(string TextValue)
    {

        return DecryptStringFromBytes(Convert.FromBase64String(TextValue), keybytes, iv);
    }

         static string DecryptStringFromBytes(byte[] cipherText, byte[] Key, byte[] IV)
    {
        // Check arguments.
        if (cipherText == null || cipherText.Length <= 0)
            throw new ArgumentNullException("cipherText");
        if (Key == null || Key.Length <= 0)
            throw new ArgumentNullException("Key");
        if (IV == null || IV.Length <= 0)
            throw new ArgumentNullException("Key");

        // Declare the string used to hold
        // the decrypted text.
        string plaintext = null;

        // Create an RijndaelManaged object
        // with the specified key and IV.
        using (RijndaelManaged rijAlg = new RijndaelManaged())
        {
            rijAlg.Key = Key;
            rijAlg.IV = IV;
            rijAlg.Padding = PaddingMode.PKCS7;
            rijAlg.Mode = CipherMode.CBC;

            // Create a decrytor to perform the stream transform.
            ICryptoTransform decryptor = rijAlg.CreateDecryptor(rijAlg.Key, rijAlg.IV);

            // Create the streams used for decryption.
           using (MemoryStream msDecrypt = new MemoryStream(cipherText))
           {
         using (CryptoStream csDecrypt =
        new CryptoStream(msDecrypt,decryptor,CryptoStreamMode.Read))
                 {
                 using (StreamReader srDecrypt = new StreamReader(csDecrypt))
                 {

                  // Read the decrypted bytes from the decrypting stream
                   // and place them in a string.
                  plaintext = srDecrypt.ReadToEnd();
                 }
             }
         }

       }

      return plaintext;

    } 
```

我正在生成不同的加密大小字符串：

JS:MhAP11fHa+fUfRzSw2UHVQ== C#:+Ijpt1GDVgM4MqMAQUwf0Q==

尝试在 c# 中解密 JS 字符串时，我得到 Padding is invalid and cannot be removed，我哪里错了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T16:34:25.433

基本上你会遇到编码问题。首先，您在一个实现中使用 Base64 解码解析您的 IV，而在另一个实现中使用直接字符编码。您的 Base64 字符串也不像 Base64 字符串。

此外，许多库（错误地）允许使用不正确的密钥和 IV 大小。然而，这令人困惑，因为没有通用的密钥或 IV 扩展方法。因此，您应该确保密钥和 IV 的二进制表示对于特定算法是正确的。

对于 AES，您应该使用 128、192 或 256 位的密钥大小和与块大小相同的 IV 大小，即 128 位。IV 应该随机生成并传送给另一方，例如通过在密文前加上 IV。

# java - 在 JLabel 中创建带有 HTML 的栏

> ID：14897865
> 
> 赞同：0
> 
> 时间：2013-02-15T15:25:26.017
> 
> 标签：java, html, swing, jlabel

我想创建一个包含一些文本的 JLabel。文字后面应该有一个栏。条的宽度应取决于一些外部参数。是否可以通过 JLabels 的基本 HTML 支持来做到这一点？

[小样](http://s1.directupload.net/file/d/3167/vf9tvihp_jpg.htm)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T15:32:02.467

也许，但我不会那样做，我会使用 a`JProgressBar`创建那个栏，因为它甚至支持在其上绘制的字符串。有关更多详细信息，请参阅[此问题](https://stackoverflow.com/questions/11776506/how-to-add-text-on-jprogressbar)。

简而言之：

```
// Do this when initializing:
yourProgressBar.setStringPainted(true);

// When you want to update it:
yourProgressBar.setValue(theCurrentValueAsInt);
yourProgressbar.setString(theCurrentValueAsString); // That can be any string. 
```

# ruby-on-rails - 范围搜索字段

> ID：14897869
> 
> 赞同：0
> 
> 时间：2013-02-15T15:25:40.840
> 
> 标签：ruby-on-rails, forms

我有一个范围配置为搜索名称的数据库。范围如下所示：

```
class AdminVerified
  scope :search, lambda {|query| where(["name LIKE ?", "%#{query}%"])}
end 
```

我想以一种形式调用这个范围。有谁知道如何在表单中调用范围。我想创建一个 form_tag，它有一个文本字段，其参数调用范围。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T15:58:57.303

首先，您需要创建一个用于搜索的表单..

```
<%= form_tag("/search") do %>
  <%= text_field_tag :search %>
  <%= submit_tag %>
<% end %> 
```

在控制器中

```
def search
  @results = AdminVerified.search(params[:search])
end 
```

在视图中

```
<% @results.each do |r| %>
  <%= r.field_1 %>
  ...
<% end %> 
```

希望这可以帮助

# python - 无法使用 Tastypie 进行 PUT 或 PATCH

> ID：14897870
> 
> 赞同：1
> 
> 时间：2013-02-15T15:25:43.453
> 
> 标签：python, django, tastypie

更新：我能够以非常倒退的方式对数据进行 PUT/更新 - 对我来说似乎更像是一个错误或安全漏洞？

```
ProjectViewModel.prototype.edit = function (projectId, project) {
    var _project = JSON.parse(project);
    _project.id = projectId;
    _project.name = "test 123!";
    project = JSON.stringify(_project);
    $.ajax({
        url: "http://" + window.location.href.split("/")[2] + "/api/v1/project/",
        type: "POST",
        data: project,
        contentType: "application/json",
        processData: false,
        success: function (data) {
            $("#div_response").text("updated!");
        },
        error: function (data) {
            $("#div_response").text(data.responseText);
        }
    });
}; 
```

上面的代码允许我向 Tastypie 发布一个新对象，如果我包含对象 id 值，我将更新现有对象而不是创建一个新对象。

原始问题：

我可以 GET 和 POST，但无法使用 Tastypie 进行 PUT 或 PATCH。这是我的API：

```
from tastypie.resources import ModelResource
from tastypie.authentication import Authentication
from tastypie.authorization import DjangoAuthorization, Authorization
from tastypie import fields
from ProjectTrackerServer.projects.models import Project
from ProjectTrackerServer.milestones.models import Milestone

class ProjectResource(ModelResource):
    # namespace-to-milestones, related_name-from-milestones-model, show-full
    milestones = fields.ToManyField('ProjectTrackerServer.projects.api.MilestoneResource', 'projects', full=True)

    class Meta:
        queryset = Project.objects.all()
        resource_name = 'project'
        allowed_methods = ['get', 'post', 'put', 'delete', 'patch']
        authentication = Authentication()
        authorization = Authorization()

class MilestoneResource(ModelResource):
    project = fields.ToOneField('ProjectTrackerServer.projects.api.ProjectResource', 'project')

    class Meta:
        queryset = Milestone.objects.all()
        resource_name = 'milestone'
        allowed_methods = ['get', 'post', 'put', 'delete', 'patch']
        authentication = Authentication()
        authorization = Authorization() 
```

快速回顾一下我的 Javascript Ajax 代码，其中 'projectId' 是该方法的参数：

```
//this is just a test for using PUT/PATCH by fetching a project, 
//updating it, and saving it back to the server.
    $.ajax({
        url: "http://" + window.location.href.split("/")[2] + "/api/v1/project/" + projectId + "/",
        type: "GET",
        data: "",
        contentType: "application/json",
        processData: false,
        success: function (data) {

            var project = data;
            project.name = "Project Y!";
            project.slug = "project-y";
            var jsondata = JSON.stringify(project);

            $.ajax({
                url: "http://" + window.location.href.split("/")[2] + "/api/v1/project/" + projectId + "/",
                type: "PATCH",
                data: jsondata,
                contentType: "application/json",
                processData: false,
                crossDomain: true,
                headers: {
                    "X-HTTP-Method-Override": "PATCH"
                },
                success: function (data) {
                    $("#div_response").text(data.responseText);
                },
                error: function(data) {
                    $("#div_response").text(data.responseText);
                }
            });  
        },
        error: function (data) {
            $("#div_response").text(data.responseText);
        }
    }); 
```

奇怪的是我没有收到错误。如果我尝试使用 JSON.stringify() 输出“数据”，我只会得到双引号（“”）。

如果有帮助，我也会包括我的模型。

```
from django.db import models
from django.template.defaultfilters import slugify

class Project(models.Model):
     name = models.CharField(max_length=200)
     start_date = models.DateField()
     end_date = models.DateField()
     pm_id = models.IntegerField()
     status = models.IntegerField()
     slug = models.SlugField()

     def __unicode__(self):
         return self.name

     def save(self, *args, **kwargs):
         if not self.slug:
             self.slug = slugify(self.name)[:50]
             return super(Project, self).save(*args, **kwargs) 
```

更新：我能够很好地获取和发布，所以我不确定为什么 curl 响应它无法解析主机。这是我使用 cURL 得到的结果：

```
C:\curl>curl --dump-header - -H "Content-Type: application/json" -X PUT --data
{{"end_date": "2014-10-10", "id": "16", "milestones": [], "name": "Project XY!
 "resource_uri": "/api/v1/project/16/", "slug": "project-x", "start_date": "20
-12-30", "status": 1}}' http://localhost:1231/api/v1/project/16
curl: (6) Could not resolve host: (nil); No data record of requested type
curl: (6) Could not resolve host: (nil); Host not found
curl: (6) Could not resolve host: (nil); No data record of requested type
curl: (6) Could not resolve host: (nil); Host not found
curl: (3) [globbing] illegal character in range specification at pos 2
curl: (6) Could not resolve host: (nil); Host not found
curl: (6) Could not resolve host: (nil); No data record of requested type
curl: (6) Could not resolve host: (nil); Host not found
curl: (3) <url> malformed
curl: (6) Could not resolve host: (nil); Host not found
curl: (6) Could not resolve host: (nil); No data record of requested type
curl: (6) Could not resolve host: (nil); Host not found
curl: (6) Could not resolve host: (nil); No data record of requested type
curl: (6) Could not resolve host: (nil); Host not found
curl: (3) [globbing] unmatched close brace/bracket at pos 2
HTTP/1.0 301 MOVED PERMANENTLY
Date: Wed, 20 Feb 2013 19:58:56 GMT
Server: WSGIServer/0.1 Python/2.7.3
Access-Control-Allow-Origin: *
Access-Control-Allow-Methods: POST,GET,OPTIONS,PUT,DELETE
Content-Type: text/html; charset=utf-8
Location: http://localhost:1231/api/v1/project/16/
Access-Control-Allow-Headers: Origin,Content-Type,Accept 
```

# prolog - Prolog 罗马数字（属性语法）

> ID：14897872
> 
> 赞同：4
> 
> 时间：2013-02-15T15:25:48.647
> 
> 标签：prolog, prolog, dcg, roman-numerals

我正在[prolog](/questions/tagged/prolog "显示标记为“序言”的问题")中进行一项扫描数字列表的分配，并应返回该列表是否是有效的罗马数字和数字的十进制值。前任）

```
1 ?- roman(N, ['I'], []).
N = 1
true.

2 ?- 
```

当我运行我认为应该工作的程序时，十进制值总是正确的，所以我猜我得到了合成属性部分是正确的，但是对于应该返回 true 的数字列表，它总是返回 false。我还想补充一点，如果存在超过 3 个 Is、Xs 或 Cs，它应该会中止。

```
1 ?- roman(N, ['I'], []).
N = 1 ;
false.

2 ?- roman(N, ['I','I','I','I'], []).
Error: too many I's
% Execution Aborted
3 ?- 
```

当我取出 N 并放入 a`{write('N = '), write(N)}`时，它工作正常并返回`true`。

```
1 ?- roman(['I'], []).
N = 1
true. 
```

但是，当我删除`{N is ValH + ValT + ValU}`它时`true`，它不再显示十进制值。这是我的代码的第一行（因为这是当前的作业，我希望尽可能少地显示以获得答案）：

```
roman(N) --> hundreds(ValH), tens(ValT), units(ValU), {N is ValH + ValT + ValU}. 
```

为什么这在 N 时返回 false，但在没有时返回 true，我该如何解决？

赋值： *下面的 BNF 规范定义了小于 1000 的罗马数字的语言：*

```
<roman> ::= <hundreds> <tens> <units>
<hundreds> ::= <low hundreds> | CD | D <low hundreds> | CM
<low hundreds> ::= e | <low hundreds> C
<tens> ::= <low tens> | XL | L <low tens> | XC
<low tens> ::= e | <low tens> X
<units> ::= <low units> | IV | V <low units> | IX
<low units> ::= e | <low units> I 
```

*为此语法定义属性以执行两个任务：*

*a) 限制 X's in `<low tens>`、 I's in`<low units>`和 C's in`<low hundreds>`的数量不超过三个。*

*b) 提供一个属性，`<roman>`该属性给出所定义的罗马数字的十进制值。*

*定义这些任务所需的任何其他属性，但不要更改 BNF 语法。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T23:23:35.730

您是否注意到语法是由重复 3 次的相同模式 (group//5) 形成的，只是符号不同？我喜欢紧凑...

```
roman(N) -->
    group('C','D','M',100, H),
    group('X','L','C',10, T),
    group('I','V','X',1, U),
    {N is H+T+U}.
group(A,B,C, Scale, Value) -->
    (   g3(A, T)
    ;   [A, B], {T = 4}
    % thanks to Daniel and Will for catching bugs
    ;   [B], g3(A, F), {T is 5+F}
    ;   [B], {T is 5}
    ;   [A, C], {T = 9}
    ;   {T = 0}
    ),  {Value is Scale * T}.

g3(C, 1) --> [C].
g3(C, 2) --> [C,C].
g3(C, 3) --> [C,C,C]. 
```

一些测试

```
?- atom_chars('CMXXX',L), phrase(roman(N),L).
L = ['C', 'M', 'X', 'X', 'X'],
N = 930 ;
false.

?- atom_chars('CMXLVIII',L), phrase(roman(N),L).
L = ['C', 'M', 'X', 'L', 'V', 'I', 'I', 'I'],
N = 943 ;
false. 
```

只是好奇，在工作中展示 DCG...

*在丹尼尔和威尔评论之后*编辑......**

 *```
?- atom_chars('VIII',L), phrase(roman(N),L).
L = ['V', 'I', 'I', 'I'],
N = 8 .

?- phrase(roman(X), ['L','I','X']).
X = 59 . 
```*

# r - 条形图设计问题

> ID：14897873
> 
> 赞同：4
> 
> 时间：2013-02-15T15:25:53.477
> 
> 标签：r

我正在做一个 14 列的条形图来表示一些数据，我将 names.arg 选项设置为显示为垂直标签，不幸的是，这导致新的垂直标签与我拥有的“sub”和“xlab”选项重叠。我该如何防止这种情况发生？

这是我的命令：

```
par(mar=c(6, 5, 4,7.5 ))
barplot(x, main=paste("title1 \n","subtitle"),
names.arg=c(1,2,3,4,5,6,7,8,9,10,11,12,13,14),las=2, sub=("overlapping text1"),
xlab="overlapping text2", col = c("red2","darkorange3")) 
```

我想到的另一个问题是，正如您从命令中看到的那样，我在“main”中使用了两行标题。是否可以使第二行字体更小，同时保持第一行的格式相同？

谢谢，

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-15T15:36:57.430

更改标题之一的字体大小的一种解决方案是`mtext()`在具有不同`cex=`值的不同行中使用两个函数调用并`main=`从`barplot()`. 为了克服重叠文本的问题，`mtext()`也可以用来代替`xlab=`and `sub=`。你只需要找到合适的`line=`并增加情节周围的空间`par(mar=..)`。

```
x<-sample(letters[1:14],300,replace=TRUE)
par(mar=c(9,3,5,2))    
barplot(table(x),
        names.arg=paste0("very_long_",1:14),las=2, 
        col = c("red2","darkorange3"))
mtext(side=3,"Title1",line=2,cex=2)
mtext(side=3,"subtitle",line=1,cex=1.5)

mtext(side=1,"overlapping text1",line=6)
mtext(side=1,"overlapping text2",line=7) 
```

![在此处输入图像描述](../Images/87922ad39a68d8ab4f8f4527757112dd.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T16:40:42.650

另一个要查看的选项是`staxlab`plotrix 包中的函数。

另请查看函数的`mgp`参数，以`par`了解设置轴标题的默认位置的方法。

# python - Twitter搜索词分析

> ID：14897875
> 
> 赞同：0
> 
> 时间：2013-02-15T15:26:00.960
> 
> 标签：python, twitter, analysis

我正在尝试对大量推文进行一些单词分析。

我正在根据搜索查询拉推文，然后我想以某种方式找到经常出现且与原始查询相关的关键字。

不过，我不太确定如何以合理有效的方式解决这个问题。我目前只是删除停用词然后找到最常出现的词，但这比我想要的更基本。

有没有人对这类事情有任何建议（甚至链接到任何关于该主题的阅读）？

非常感谢任何帮助。

（我的实现是在 Python 中，如果相关的话）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T15:28:06.580

对于推文内容的语义推理，您绝对应该尝试[使用 NLTK（自然语言工具包）](http://nltk.org/)。它能够对文本进行非常复杂的分析。

# php - 为双数组赋值

> ID：14897878
> 
> 赞同：0
> 
> 时间：2013-02-15T15:26:24.323
> 
> 标签：php, multidimensional-array

我有一个问题，将值分配给数组数组以将重复项添加到相同的值中。代码如下：

```
if( isset($rowsarray) && 0 < count($rowsarray) ) {
    foreach ( $rowsarray as $rowt ) {
        if( $version == $rowt[0] ) {
            $rowt[1] += $success;
            $rowt[2] += $failure;
            $noDuplicate = false;
            break;
        }
    }
}
if( true == $noDuplicate) {
    $rowsarray[] = array($version, $success, $failure);
} 
```

所以如果是第一次出现的版本我就加，否则就增加数组的成功率和失败率。我尝试过 foreach （ $rowsarray as $key => $rowt ）但没有成功，因为“内部”数组似乎在这里没有受到影响。我对 php 完全陌生，所以我想这是一个相当简单的解决方案，但现在它只需要第一个版本访问，而所有其他版本都在循环内部而不是外部。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T15:34:43.790

您正在尝试修改由 foreach() 创建的临时数组，这意味着`$rowt`在每次迭代时都会被丢弃/替换。您可以使用参考或修改后的 foreach 来解决它：

```
foreach ( $rowsarray as &$rowt ) {
                        ^----
        $rowt[1] += $success; 
```

或者，不那么麻烦：

```
foreach($rowsarray as $key => $rowt) {
    $rowsarray[$key][1] += $success; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T15:35:45.557

您可以通过以下方式简化此检查：

```
if( isset($rowsarray) && 0 < count($rowsarray) ) { 
```

和

```
 if( ! empty( $rowsarray ) ){ 
```

进而，

```
foreach ( $rowsarray as $key => $rowt ) {
    if( $version == $rowt[0] ) {
        $rowsarray[$key][1] += $success;
        $rowsarray[$key][2] += $failure; 
```

# android - 如何在使用不同主题时将 EditText.setError() 图标的样式设置为默认样式中使用的样式？

> ID：14897879
> 
> 赞同：0
> 
> 时间：2013-02-15T15:26:33.277
> 
> 标签：android, styles, themes

当您在没有设置主题的活动中对 edittext 设置错误时，它会显示一个漂亮的对话框，其中包含错误文本。

当为 Holo.Light 等活动使用不同的主题时，如何将其设置为该样式？

# jquery - jQuery ajax 调用在 IE 中不起作用

> ID：14897880
> 
> 赞同：0
> 
> 时间：2013-02-15T15:26:32.937
> 
> 标签：jquery, cross-domain

我正在尝试使用 jquery 的 ajax 函数从远程服务器获取一些 json。

```
var self = $(this);
$.ajax({
    cache: false,
    url: *external url*,
    data: {param: self.val()},
    type: 'GET',
    dataType: 'application/json',
    crossDomain: true,
    success: function(data, status) {
        console.log(status);
        console.log(data);
    }
}); 
```

这在 Chrome 中运行良好，数据得到输出。在 Firefox 中，请求已发送，但没有数据写入控制台。在 IE 中，调用似乎根本没有发送。

我究竟做错了什么？我知道跨域阻止，但让我失望的是这在 chrome 中有效，但在任何其他浏览器中都无效。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T15:30:35.817

> 我知道跨域阻止，但让我失望的是这在 chrome 中有效，但在任何其他浏览器中都无效。

听起来您要从中请求数据的服务器支持[CORS](http://www.w3.org/TR/access-control/)，但请记住，不同的浏览器可能会随请求发送不同的标头，如果浏览器发送的标头服务器未表示可以，则 CORS 请求将失败. 因此，完全有可能 Chrome 只发送服务器已批准的标头，因此请求有效，但 Firefox 发送的标头服务器未批准，因此请求不起作用。

除非您使用的是 IE10，否则 IE 可能不起作用，因为跨域请求在 IE 中不起作用，除非您使用`XDomainRequest`对象而不是`XMLHttpRequest`对象，而 jQuery 不会这样做。有一些补丁可以做到这一点，但 jQuery 库本身没有。IE10*最终*`XMLHttpRequest`通过标准对象启用了 CORS 。

# c# - 获取由 ASP.NET MVC 视图生成的 HTML

> ID：14897881
> 
> 赞同：2
> 
> 时间：2013-02-15T15:26:37.873
> 
> 标签：c#, asp.net-mvc-4

我正在开发一个 ASP.NET MVC 4 应用程序。我正在尝试构建一个报告屏幕，由于数据的原因需要一段时间（约 30 秒）才能生成。我想做的是获取视图生成的 HTML 并将其保存到文本文件中。

有没有办法获取视图生成的 HTML？如果是这样，怎么做？请注意，我的 .cshtml 文件包含一些 RAZOR。我不确定这是否会影响这个等式。

非常感谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T16:53:07.720

我使用以下函数来做这类事情，通常是当我想使用 razor 创建电子邮件 HTML 时：

```
public static string RenderViewToString(string viewName, object model, ControllerContext context)
{
    context.Controller.ViewData.Model = model;
    using (var sw = new StringWriter())
    {
        var viewResult = ViewEngines.Engines.FindPartialView(context, viewName);
        var viewContext = new ViewContext(context, viewResult.View, context.Controller.ViewData, context.Controller.TempData, sw);
        viewResult.View.Render(viewContext, sw);
        return sw.GetStringBuilder().ToString();
    }
} 
```

# python - 如何使用 Python 在文本文件中使用 findall 检查？

> ID：14897884
> 
> 赞同：-3
> 
> 时间：2013-02-15T15:26:44.110
> 
> 标签：python

我编写了一个函数来从文件中提取模式，但它不能正常工作。为什么？

我在[Python](http://en.wikipedia.org/wiki/Python_%28programming_language%29)中的代码：

```
import re

f = open('quran_final.txt','r')
r = open('q.txt','w')
p = re.compile('ROOT:(?P<root>[^ "]+)')
for line in f:
    root = p.findall(line)
    if(root):
        for word in root:
        print word
    else:
        print ' ' 
```

我认为问题出在“检查”中，但是我应该如何更改呢？

我的文本文件示例：

```
f:CONJ+ POS:V IMPV ROOT:Akl 2MP  
POS:LOC LEM:Hayov ROOT:Hyv  
POS:V PERF ROOT:$yA 2MP  
POS:ADJ LEM:ragad ROOT:rgd M INDEF ACC  
wa+ POS:V IMPV ROOT:dxl 2MP  
Al+ POS:N LEM:baAb ROOT:bwb M ACC  
POS:N LEM:saAjid ROOT:sjd MP INDEF ACC  
wa+ POS:V IMPV ROOT:qwl 2MP  
POS:N LEM:HiT~ap ROOT:HTT F INDEF NOM  
POS:V IMPF ROOT:gfr 1MP MOOD:JUS  
POS:N LEM:xaTiy^_#ap ROOT:xTA P ACC PRON:2MP  
wa+ sa+ POS:V IMPF ROOT:zyd 1MP  
Al+ POS:N ACT PCPL (IV) LEM:muHosin ROOT:Hsn MP ACC  
f:REM+ POS:V PERF (II) ROOT:bdl 3MS  
POS:V PERF ROOT:Zlm 3MP  
POS:N LEM:qawol ROOT:qwl M INDEF ACC  
POS:REL LEM:{l~a*iY MS  
POS:V PERF PASS ROOT:qwl 3MS  
f:REM+ POS:V PERF (IV) ROOT:nzl 1MP  
POS:REL LEM:{l~a*iY MP  
POS:V PERF ROOT:Zlm 3MP  
POS:N LEM:rijoz ROOT:rjz M INDEF ACC  
Al+ POS:N LEM:samaA^' ROOT:smw F GEN  
POS:V PERF ROOT:kwn SP:kaAn 3MP  
POS:V IMPF ROOT:fsq 3MP  
POS:V PERF (X) ROOT:sqy 3MS 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T15:59:57.703

如果我理解正确，您需要在模式中包含 endline

```
p = re.compile('ROOT:(?P<root>[^\s]+)') 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-02-16T03:27:10.867

缩进 - 打印单词需要再缩进四个空格。根应该是：

```
root = re.findall(p, line) 
```

# ruby - Ruby 的局部变量范围约定？

> ID：14897886
> 
> 赞同：-1
> 
> 时间：2013-02-15T15:26:52.300
> 
> 标签：ruby

我有以下代码：

```
def test_compare()
  if true
    condition = true
  else
    condition = false
  end

  assert_equal(true, condition)
end 
```

在 Ruby 中，块内的变量与根据“[我不理解 ruby​​ 本地范围](https://stackoverflow.com/questions/4154864/i-dont-understand-ruby-local-scope)`if`”声明的在块外声明的变量具有相同的范围。`if`

在控制结构内部初始化变量而不首先声明它们或在控制结构外部初始化它们是常见的做法吗？

来自 Java.NET 背景，这似乎使代码的可读性降低并且更容易出现逻辑错误。

我正在尽最大努力“不在 Ruby 中编写 .NET 代码”，但想了解为什么上述内容比在范围开头或控制结构之外声明范围变量更有意义。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T15:31:01.730

`if`返回值。使用这种行为更干净。

```
x = if condition
  # several lines of calculations can be here
  'true value'
else
  # several lines of calculations can be here
  'false value'
end 
```

或者，在这种具体情况下，最好使用三元运算符。它做同样的事情并且更短。

```
x = condition ? 'true value' : 'false value' 
```

# javascript - JQuery 不适用于新插入的数据

> ID：14897895
> 
> 赞同：2
> 
> 时间：2013-02-15T15:27:41.313
> 
> 标签：javascript, html, ajax, jquery

我的脚本返回数据（ul 列表），但 JQuery 不适用于新插入的数据。

**jQuery**

```
$(".tablecategoryname").on('click', function(){
    var $a = $(this).closest('li').attr('id');
    var $c = $(this).closest('li');

    $.ajax({
       type: "POST",
       url: "functions.php",
       data: {subcategory:$a},
       cache: false,
       success: function(data)
       {
            $(data).hide().insertAfter($c).slideDown(400);
       }    
     });    
}); 
```

为什么 JQuery 不能使用 tablecategoryname 类的新项目？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-15T15:29:14.213

您将需要具有动态元素的委托事件处理程序：

```
$(document).on('click', '.tablecategoryname', function(){
    var $c = $(this).closest('li'),
        $a = $c.attr('id');

    $.ajax({
       type: "POST",
       url: "functions.php",
       data: {subcategory : $a},
       cache: false,
       success: function(data) {
            $(data).hide().insertAfter($c).slideDown(400);
       }    
    });    
}); 
```

用最近的非动态父级替换文档！

# mysql - 一张桌子上的多项选择

> ID：14897896
> 
> 赞同：2
> 
> 时间：2013-02-15T15:27:40.413
> 
> 标签：mysql

我有一个名为 list 的表，我必须提取以下内容。字段是 id 和 date

1.  如果 date<20120401 然后依靠 id >>>> 给出结果
2.  如果 date>20120401 然后依靠 id >>>> 给出结果

如果 idnumber xyz 有 20 项日期<20120401 和 30 项日期>20120401

那么结果应该是......

xyz 20 30

我做过...

```
select 
 (select count(id) from list where id='xyz' and date<20120401) as date1,
 (select count(id) from list where id='xyz' and date>20120401) as date2; 
```

结果是 20 30

但是如何打印身份证号码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T15:36:28.500

```
SELECT
id,
SUM(CASE WHEN date < 20120401 THEN 1 ELSE 0 END) AS date1,
SUM(CASE WHEN date > 20120401 THEN 1 ELSE 0 END) AS date2,
FROM list
WHERE id = 'xyz'
GROUP BY id 
```

更新：

```
SELECT
list.id,
idmaster.idlocation,
SUM(CASE WHEN list.date < 20120401 THEN 1 ELSE 0 END) AS date1,
SUM(CASE WHEN list.date > 20120401 THEN 1 ELSE 0 END) AS date2,
FROM list
INNER JOIN idmaster ON list.id = idmaster.idnumber
WHERE list.id = 'xyz'
GROUP BY id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T15:39:41.603

尝试这个：

```
 SELECT
    id,
    SUM(CASE WHEN date < 20120401 
    THEN 1 ELSE 0 END) AS date1,
    SUM(CASE WHEN date > 20120401 
    THEN 1 ELSE 0 END) AS date2,
    FROM list
    WHERE id = 'xyz'
    GROUP BY id 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T15:36:20.337

尝试

```
select id, count(id) from list where id='xyz' and date < 20120401
union
select id, count(id) from list where id='xyz' and date > 20120401 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-15T15:36:25.113

您正在寻找`GROUP BY`子句，也许是这样的：

```
SELECT
    l2.id,
    (SELECT COUNT(id)
    FROM list l1
    WHERE l1.id = l2.id AND date < 20120401) AS date1,
    (SELECT COUNT(id)
    FROM list l1
    WHERE l1.id = l2.id AND date > 20120401) AS date2
FROM
    list l2
GROUP BY
    l2.id 
```

有更经济有效的方法来获得预期的结果，但这是最容易理解的。

# php - 和有什么区别？: 和 ||

> ID：14897901
> 
> 赞同：7
> 
> 时间：2013-02-15T15:28:00.830
> 
> 标签：php

`?:`使用条件运算符和`||`Logical之间有什么区别`OR`。

我发现我的代码适用于：

```
$screenpixelratio = !empty($_COOKIE['screenpixelratio']) || $_COOKIE['screenpixelratio'] || $fallback_pixelratio; 
```

但不是：

```
$screenpixelratio = !empty($_COOKIE['screenpixelratio']) ? $_COOKIE['screenpixelratio'] : $fallback_pixelratio; 
```

有人可以解释为什么它可以与一个一起工作，但不能与另一个一起工作。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-02-15T15:29:27.650

第一个（[条件或](http://php.net/manual/en/language.operators.logical.php)）是说...

```
this or this or this 
```

另一个（[三元运算](http://php.net/manual/en/language.operators.comparison.php#language.operators.comparison.ternary)）是说

```
if this then this otherwise that 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-15T15:33:15.943

`||`二元运算符是处理两个参数的运算符

正如它所说，它将首先检查它是否真实而不是进一步检查否则进一步检查

`?:`三元运算符是一个接受三个参数的运算符。参数和结果可以是不同的类型。

```
Expression1 ? Expression2 : Expression3; 
```

![在此处输入图像描述](../Images/675ac902d44759b7661c183c157e591e.png)

# r - 在R中读取具有缺失值的文件

> ID：14897904
> 
> 赞同：3
> 
> 时间：2013-02-15T15:28:12.057
> 
> 标签：r, dataframe

我有一个文件名='fn'的文件，我正在阅读如下：

```
age CALCIUM CREATININE  GLUCOSE
64.3573     1.1 488
69.9043 8.1 1.1 472
65.6633 8.6 0.8 461
50.3693 8.1 1.3 418
57.0334 8.7 0.8 NEG
81.4939     1.1 NEG
56.954  9.8 1   
76.9298 9.1 0.8 NEG

> tmpData = read.table(fn, header = TRUE,  sep= "\t" , na.strings = c('', 'NA', '<NA>'),  blank.lines.skip = TRUE)
> tmpData
      age CALCIUM CREATININE GLUCOSE
1 64.3573            NA        1.1     488
2 69.9043           8.1        1.1     472
3 65.6633           8.6        0.8     461
4 50.3693           8.1        1.3     418
5 57.0334           8.7        0.8     NEG
6 81.4939            NA        1.1     NEG
7 56.9540           9.8        1.0    <NA>
8 76.9298           9.1        0.8     NEG 
```

该文件按上述方式读取，缺失值替换为 NA 和 <NA>。我猜“葡萄糖”列被视为因素。有没有一种简单的方法可以将 <NA> 解释为真正的 NA 并将任何非数字值转换为 NA（在此示例中为 NEG 为 NA）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T16:00:15.770

您可以利用`as.numeric`将非数字值强制转换为`NA`. 换句话说，尝试这样的事情：

这是您的数据：

```
temp <- structure(list(age = c(64.3573, 69.9043, 65.6633, 50.3693, 57.0334, 
  81.4939, 56.954, 76.9298), CALCIUM = c(1.1, 8.1, 8.6, 8.1, 8.7, 
  1.1, 9.8, 9.1), CREATININE = c(NA, 1.1, 0.8, 1.3, 0.8, NA, 1, 
  0.8), GLUCOSE = structure(c(5L, 4L, 3L, 2L, 6L, 6L, 1L, 6L), .Label = c("", 
  "418", "461", "472", "488", "NEG"), class = "factor")), .Names = c("age", 
  "CALCIUM", "CREATININE", "GLUCOSE"), class = "data.frame", row.names = c(NA, 
  -8L)) 
```

以及它目前的结构：

```
str(temp)
# 'data.frame':  8 obs. of  4 variables:
# $ age       : num  64.4 69.9 65.7 50.4 57 ...
# $ CALCIUM   : num  1.1 8.1 8.6 8.1 8.7 1.1 9.8 9.1
# $ CREATININE: num  NA 1.1 0.8 1.3 0.8 NA 1 0.8
# $ GLUCOSE   : Factor w/ 6 levels "","418","461",..: 5 4 3 2 6 6 1 6 
```

将最后一列转换为数字，但由于它是一个因素，我们需要先将其转换为字符。注意警告。我们实际上对此感到高兴。

```
temp$GLUCOSE <- as.numeric(as.character(temp$GLUCOSE))
# Warning message:
# NAs introduced by coercion 
```

结果：

```
temp
#       age CALCIUM CREATININE GLUCOSE
# 1 64.3573     1.1         NA     488
# 2 69.9043     8.1        1.1     472
# 3 65.6633     8.6        0.8     461
# 4 50.3693     8.1        1.3     418
# 5 57.0334     8.7        0.8      NA
# 6 81.4939     1.1         NA      NA
# 7 56.9540     9.8        1.0      NA
# 8 76.9298     9.1        0.8      NA 
```

* * *

为了好玩，这是我放在一起的一个小函数，它提供了一种替代方法：

```
makemeNA <- function (mydf, NAStrings, fixed = TRUE) {
  if (!isTRUE(fixed)) {
    mydf[] <- lapply(mydf, function(x) gsub(NAStrings, "", x))
    NAStrings <- ""
  }
  mydf[] <- lapply(mydf, function(x) type.convert(
    as.character(x), na.strings = NAStrings))
  mydf
} 
```

此函数允许您指定一个*正则表达式*来标识什么应该是一个`NA`值。我还没有真正测试过它，所以***使用正则表达式功能需要您自担风险***！

使用与上面相同的“temp”对象，尝试这些以查看函数的作用：

```
# Change anything that is just text to NA
makemeNA(temp, "[A-Za-z]", fixed = FALSE)
# Change any exact matches with "NEG" to NA
makemeNA(temp, "NEG")
# Change any matches with 3-digit integers to NA
makemeNA(temp, "^[0-9]{3}$", fixed = FALSE) 
```

# wordpress - 插入的 Wordpress 帖子在 RSS 提要中显示错误的日期

> ID：14897905
> 
> 赞同：1
> 
> 时间：2013-02-15T15:28:13.553
> 
> 标签：wordpress, validation, insert, rss

我们的 wordpress 博客（当前版本 3.4.2）有一个外部进程，可以将来自第三方的帖子直接插入数据库。我没有能力改变它，所以不要费心告诉我不应该那样做。我可以更改插入语句。

帖子出现了，一切看起来都很好，只是 RSS 提要在日期字段中显示了无效的年份（预计 2013 年，而不是 -0001）：

```
<pubDate>Wed, 30 Nov -0001 00:00:00 +0000</pubDate> 
```

帖子的 wp_posts 表中的 post_date 字段显示正确的日期，并且在网站上，帖子具有正确的日期。它按时间顺序显示在正确的位置。

如果我使用控制面板手动编辑帖子并将日期更改一秒钟并重新发布帖子，那么它会修复提要。

此问题会导致 RSS 提要无法验证，并且会破坏其他内容。帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T15:32:22.570

每个 WP 帖子存储 4 个日期：Post_date、post_date_gmt、post_modified 和 post_modified_gmt。

我建议您为 post_date 和 post_modified 插入相同的日期，看看它是否有效。

# ruby-on-rails-3 - Rails 3 生产服务器抱怨 bcrypt-ruby gem 不是捆绑包的一部分

> ID：14897906
> 
> 赞同：0
> 
> 时间：2013-02-15T15:28:13.657
> 
> 标签：ruby-on-rails-3, bcrypt-ruby

从 cap deploy 的以下输出摘录中可以看出，`** [out :: 178.79.170.199] Using bcrypt-ruby (3.0.1)`我的服务器上安装了 bcrypt-ruby gem，但 unicorn 无法正常启动并抱怨 bcrypt-ruby gem 不是捆绑包的一部分。

更新 - 确切的错误消息是

```
/home/myuser/.rvm/gems/ruby-1.9.3-p374@global/gems/bundler-1.2.3/lib/bundler/rubygems_integration.rb:147:in `block in replace_gem': bcrypt-ruby is not part of the bundle. Add it to Gemfile. (Gem::LoadError) 
```

我已经重新启动了我的 nginx 服务器和独角兽。

我怎样才能解决这个问题？

控制台输出的摘录来自`cap deploy`

```
 ** [out :: 178.79.170.199] Using bcrypt-ruby (3.0.1)
 ** [out :: 178.79.170.199] Using highline (1.6.15)
 ** [out :: 178.79.170.199] Using net-ssh (2.6.3)
 ** [out :: 178.79.170.199] Using net-scp (1.0.4)
 ** [out :: 178.79.170.199] Using net-sftp (2.0.5)
 ** [out :: 178.79.170.199] Using net-ssh-gateway (1.1.0)
 ** [out :: 178.79.170.199] Using capistrano (2.14.1)
 ** [out :: 178.79.170.199] Using coffee-script-source (1.4.0)
 ** [out :: 178.79.170.199] Using execjs (1.4.0)
 ** [out :: 178.79.170.199] Using coffee-script (2.2.0)
 ** [out :: 178.79.170.199] Using rack-ssl (1.3.3)
 ** [out :: 178.79.170.199] Using json (1.7.6)
 ** [out :: 178.79.170.199] 
 ** [out :: 178.79.170.199] Using rdoc (3.12)
 ** [out :: 178.79.170.199] 
 ** [out :: 178.79.170.199] Using thor (0.17.0)
 ** [out :: 178.79.170.199] Using railties (3.2.11)
 ** [out :: 178.79.170.199] Using coffee-rails (3.2.2)
 ** [out :: 178.79.170.199] 
 ** [out :: 178.79.170.199] Using jquery-rails (2.2.0)
 ** [out :: 178.79.170.199] 
 ** [out :: 178.79.170.199] Using kgio (2.8.0)
 ** [out :: 178.79.170.199] 
 ** [out :: 178.79.170.199] Using mysql2 (0.3.11)
 ** [out :: 178.79.170.199] Using bundler (1.2.3)
 ** [out :: 178.79.170.199] 
 ** [out :: 178.79.170.199] Using rails (3.2.11)
 ** [out :: 178.79.170.199] 
 ** [out :: 178.79.170.199] Using raindrops (0.10.0)
 ** [out :: 178.79.170.199] 
 ** [out :: 178.79.170.199] Using rvm-capistrano (1.2.7)
 ** [out :: 178.79.170.199] 
 ** [out :: 178.79.170.199] Using sass (3.2.5)
 ** [out :: 178.79.170.199] Using sass-rails (3.2.6)
 ** [out :: 178.79.170.199] Using uglifier (1.3.0)
 ** [out :: 178.79.170.199] Using unicorn (4.5.0)
 ** [out :: 178.79.170.199] Your bundle is complete! It was installed into /home/myuser/myapp/shared/bundle 
```

我安装的其他 gem 没有问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T11:47:16.223

此问题是由于确保 nginx 服务器已正确重新启动而引起的。实际上，我必须重新启动实际的操作系统才能解决这个问题，因为 nginx 重新启动并且 unicorn 重新启动似乎没有任何效果。

# openstreetmap - 沿着它周围的圆圈删除标记

> ID：14897908
> 
> 赞同：4
> 
> 时间：2013-02-15T15:28:17.553
> 
> 标签：openstreetmap, leaflet

我正在使用`Open Street Maps`和使用`leaflet library`. 我有一个这样的图层组：

```
var testLayer = new L.LayerGroup(); --> declared in a different file 
```

我想将标记添加到标记组，在每个标记周围添加一个圆圈，然后将标记组添加到地图：

![在此处输入图像描述](../Images/4da1dae177144be2257de819b7cd059e.png)

```
var realMarker = L.marker([52.6432, -6.53412 ],{icon: Icon,title:data[choice][key]["name"]
                        }).bindPopup("Dublin").addTo(testLayer);
var circle = L.circle([52.6432, -6.53412 ],400, {
                        color: 'red',
                        fillColor: '#f03',
                        fillOpacity: 0.5
                    }).addTo(testLayer);

 map.addLayer(testLayer); 
```

但是，当我使用 删除标记组中的特定标记时`removeLayer()`，标记会从地图中删除，但圆圈会留在后面。如何删除圆圈和标记？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-15T16:20:34.030

我会在标记中存储对圆圈的引用：

```
var realMarker = L.marker([52.6432, -6.53412 ],
                          {icon: Icon,title:data[choice][key]["name"]}
                         ).bindPopup("Dublin").addTo(testLayer);
var circle = L.circle([52.6432, -6.53412 ],400, {
                        color: 'red',
                        fillColor: '#f03',
                        fillOpacity: 0.5
                    }).addTo(testLayer);
realMarker.circle=circle;
map.addLayer(testLayer); 
```

然后，在删除标记时，也删除它的圆圈

```
testLayer.removeLayer(markerToRemove);
testLayer.removeLayer(markerToRemove.circle); 
```

# arrays - 二维数组中的 C++ 路径查找

> ID：14897909
> 
> 赞同：0
> 
> 时间：2013-02-15T15:28:19.177
> 
> 标签：arrays, path-finding

我一直在努力应对我的讲师提供的这个挑战。我已经编写了设置此解决方案所需的类的文件，但我不知道如何实现它，这是有问题的类，我需要添加算法。

```
#include "Solver.h"

int* Solver::findNumPaths(const MazeCollection& mazeCollection)
{
    int *numPaths = new int[mazeCollection.NUM_MAZES];

    return numPaths;
} 
```

这是我们提供的问题描述。有谁知道如何实现这个或让我走上正确的轨道，谢谢！

00C，我们又需要你的帮助了。

因被挫败而愤怒的恶魔般邪恶的主谋拉塞尔·凯恩博士释放了一群重武装的松鼠来攻击 BCB，并消灭所有美丽而聪明的优秀计算机学生。

我们需要在短时间内对这种威胁做出反应，并计划对 BCB 的门厅设置部分路障。带枪的松鼠会在 [1,1] 方格进入 BCB 并冲向 [10,10] 所示的出口。

毛茸茸的啮齿动物无法通过被设置路障的广场。重要的是，松鼠嗜血是这样的，它们只会向出口移动——要么向右移动一格，要么向下移动一格。松鼠永远不会向上或向左移动，即使路障阻挡了它们的接近。

我们的研究人员需要进行大量测试，以确定路障的放置如何阻碍松鼠的移动。在每次测试中，都会设置一些方块，并且您必须确定从起点到出口的不同路径的总数（遵守上述松鼠运动模式）。

我们的一些研究人员已经听到关于递归计数算法的一些不连贯的内容，其他人关于递归和迭代之间的联系，但我敢肯定，OOC，你知道最好不要被误导性的建议分散注意力。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T15:58:12.273

从显而易见的开始：

```
int count = 0;

void countPaths( x, y ) {
  if ( x==10 && y==10 ) {
    count++;
    return;
  }
  if ( can-move-right )
    countPaths( x+1, y );
  if ( can-mopve-down )
    countPaths( x, y+1 );
} 
```

从调用开始`countPaths(0,0)`。

从长远来看不是最有效的，但它会起作用。然后寻找优化方法（例如，您最终会重新计算从靠近目标的正方形的路径很多 - 减少这项工作可能会产生很大的不同）。

# extjs - 如果它是 xtype:field 的组件，.down() 或 .query() 将找不到子项

> ID：14897912
> 
> 赞同：2
> 
> 时间：2013-02-15T15:28:31.877
> 
> 标签：extjs, sencha-touch, sencha-touch-2

在这个简短函数的最底部，您可以看到我正在尝试将所有内容都`xtype: button`包含在`webClip`. 出于某种原因，它省略了 57x57 按钮，仅显示从`titlebar`. 我不知道为什么。This`xtype: field`的`component`配置对我来说相当混乱。谢谢！

```
function addWebClip(type) {

    var webClip = Ext.create('Ext.form.FieldSet', {

        cls: 'webclip-title',

        items: [{
            xtype: 'titlebar',
            title: type + ' webclip',

            items: [{
                text: 'remove',
                ui: 'decline',
                align: 'right',

                handler: function () {
                    console.log(this.hasParent()); // TRUE
                    Ext.getCmp('main-panel').remove(this.up('fieldset'));
                }
            }]
        }, {
            xtype: 'field',
            label: 'Icon',
            cls: 'icon-input',

            component: {
                xtype: 'button',
                width: 57,
                height: 57,
                iconCls: 'add1',
                iconMask: true,
                handler: function () {
                    var gallery = Ext.getCmp('images-gallery');
                    if (!gallery) {
                        gallery = Ext.Viewport.add({
                            xtype: 'gallery',
                            id: 'images-gallery'
                        });
                    }
                    console.log(this.hasParent()); // FALSE

                    gallery.setIconButton(this);
                    gallery.show();
                }
            }
        }, {
            xtype: 'textfield',
            name: 'webClipImage[]',
            label: 'webClipImage'
        }]
    });

    console.log(webClip);
    console.log(webClip.query('.button'));
    Ext.getCmp('main-panel').add(webClip);
} 
```

Console.log 结果：

```
Class {items: Class, _items: Class, innerItems: Array[9], onInitializedListeners: Array[0], initialConfig: Object…}

[Class]
> 0: Class
> length: 1
> __proto__: Array[0] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-24T16:19:33.303

这就是你如何找到你的按钮：

```
console.log(webClip.down('field[cls=icon-input]').component); 
```

# asp.net - PATCH 请求正文中的 REST 实体 ID

> ID：14897915
> 
> 赞同：2
> 
> 时间：2013-02-15T15:28:47.470
> 
> 标签：asp.net, xml, json, rest, asp.net-web-api

假设我有`FooEnity`一个 id 为 35 的 Web 服务公开，它位于 at `/myhost/api/fooentity/35`。

现在我想实现一个 PATCH 调用以允许部分更新`FooEntity`（假设 25 个可用字段中的 2 个被向上传递以进行更新）。

我的问题是，PATCH 内容（json/xml）是否应该包含`id`35 个？实体的地址由 URI 指定，并且`id`不是可更新的字段，如果包含它，则需要额外验证以确保两个 id 匹配。所有这些都表明**没有**。不过，没有它在里面感觉很奇怪。

这样做的适当方法是什么？

（注意，问题与语言无关，但在 ASP.NET 4.0 Web API 框架中实现，如果这会影响任何人的答案）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T16:02:41.157

这是一个很好的问题！

有两种方法可以处理。如果正文中的 id 与 URI 中的 id 不同，您可以引发验证错误。或者您可以忽略请求正文中的任何 id。如果您通过手动复制属性进行修补，则不会复制 id 属性以忽略它。如果您使用帮助类来修补实体，则可以应用修补程序，然后将实体的 id 设置为 URI 上的任何内容，以确保它在修补后保持相同的 id。

无论您选择哪个选项，都取决于您。如果请求主体 id 与实体 id 不匹配，则发回 400 可能对客户来说更清楚一些，因此他们了解 id 不会更改，但这也需要您编写更多代码来实现。

# python - 流图错误：无法将浮点 NaN 转换为整数

> ID：14897917
> 
> 赞同：2
> 
> 时间：2013-02-15T15:28:47.167
> 
> 标签：python, matplotlib, plot

我正在尝试使用 streamplot 函数来绘制速度场，但由于某种原因它失败了。这是一个关于该函数的原始 SO 帖子，带有一个示例：[如何绘制流线，当我知道速度的 u 和 v 分量（numpy 2d 数组）时，使用 python 中的绘图程序？](https://stackoverflow.com/questions/8296617/how-to-plot-a-streamlines-when-i-know-u-and-v-components-of-velocitynumpy-2d). 这个例子对我来说很好；但是，我尝试修改这些值以简化函数并模仿初始条件，现在它不再起作用了。

这是我的“简化”代码：

```
import matplotlib.pyplot as plt
import numpy as np
from streamplot import streamplot

x = np.linspace(0, 1, 10)
y = np.linspace(0, 2, 10)
u = np.zeros((len(x), len(y)))
v = np.zeros((len(x), len(y)))
u[:,len(y)-1]=1
speed = np.sqrt(u*u + v*v)

plt.figure()
plt.subplot(121)
streamplot(x, y, u, v,density=1, INTEGRATOR='RK4', color='b')
plt.subplot(122)
streamplot(x, y, u, v, density=(1,1), INTEGRATOR='RK4', color=u,
           linewidth=5*speed/speed.max())
plt.show() 
```

任何建议或帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T16:53:32.683

我认为问题在于您的网格的密度（顺便说一下，您在and的初始化中`(x,y)`已经切换`x`和）小于网格的密度。当您设置或（它们应该是等效的）时，“域被划分为 25x25 网格”。我认为这意味着如果与流图或 xy 网格的密度相比，如果您的数据在足够窄的区域中非零，则会进行一些平滑处理。我无法通过增加这些密度（或间距）来使其工作。但是如果你在边缘使*两*列非零，它似乎工作正常。`y``u``v``streamplot``density=1``(1,1)``density``linspace`

 *似乎 streamplot 函数对于这些情况不是很健壮，也许您应该提交一个错误。

```
import matplotlib.pyplot as plt
import numpy as np

x = np.linspace(0, 1, 10)
y = np.linspace(0, 2, 10)
u = np.zeros((y.size, x.size))
v = np.zeros((y.size, x.size))
u[:,-2:] = 1
speed = np.sqrt(u*u + v*v)

plt.figure()
plt.subplot(121)
plt.streamplot(x, y, u, v,density=1, color='b')
plt.subplot(122)
plt.streamplot(x, y, u, v, density=(1,1), color=u, linewidth=5*speed/speed.max())
plt.show() 
```*

# visual-studio-2012 - 有没有办法在 Visual Studio 2012 中禁用快速查找？

> ID：14897918
> 
> 赞同：26
> 
> 时间：2013-02-15T15:28:51.943
> 
> 标签：visual-studio-2012

我刚刚从 2010 年升级到 Visual Studio 2012，无法忍受 Cntrl + F 在编辑器右上角打开新的快速查找对话框的事实。我通常只是停靠“查找和替换”窗口并更喜欢使用它。有没有办法禁用 Cntrl + F 调出新的快速查找窗口，而是让它将焦点移到查找和替换窗口，类似于 VS 2010 的做法？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-16T14:21:58.997

就在这里。您可以在工具>选项>环境>键盘中将键盘快捷键 ctrl+f 分配给 edit.findinfiles。到目前为止，它对我有用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-02-12T10:32:57.213

而不是修改默认的键盘快捷键考虑使用

`Ctrl`+ `Shift`+`F`用于“在文件中查找”

`Ctrl`+ `Shift`+`H`用于“替换文件”

有时，更改默认快捷方式并不总是可行/可取的。就像在别人的电脑上工作一样。

# .net - 带有数据模板的组合框未针对新行更新

> ID：14897921
> 
> 赞同：0
> 
> 时间：2013-02-15T15:29:00.973
> 
> 标签：.net, wpf, vb.net, mvvm

我有一个组合框，它显示一个带有复选框的列表，它工作正常，除了在一天中可用选项增加，即我将项目添加到数据绑定列表中。

```
<ComboBox x:Name="cb"    ItemsSource="{Binding Path=ActiveCommodities}" 
                       IsEditable="True"
                       IsReadOnly="True" 
                      HorizontalAlignment="Left"
                  Text="Commodity Filter">
            <ComboBox.ItemTemplate>
                <DataTemplate>
                    <StackPanel Orientation="Horizontal">
                        <CheckBox IsChecked="{Binding IsSelected}" 
                                      Width="20" />
                        <TextBlock Text="{Binding Text}" 
                                       Width="100" />
                    </StackPanel>
                </DataTemplate>
            </ComboBox.ItemTemplate>
        </ComboBox> 
```

我绑定到一个属性，该属性公开排序列表的值集合

```
 Public ReadOnly Property ActiveCommodities As IList(Of SelectableItem)
        Get
            If Not _activeCommodities Is Nothing Then
                Return _activeCommodities.Values
            End If
            Return Nothing
        End Get
    End Property 
```

我可以在 get 上设置一个断点，我看到 Values 中的项目计数是正确的，但是当它上升时，组合框不会显示新项目。

我选择的项目列表如下所示

```
Public Class SelectableItemList
    Inherits SortedList(Of String, SelectableItem)
    Implements INotifyCollectionChanged

    Protected Sub RaiseCollectionChanged(action As NotifyCollectionChangedAction)
        RaiseEvent CollectionChanged(Me, New NotifyCollectionChangedEventArgs(action))
    End Sub

    Public Event CollectionChanged(sender As Object, e As System.Collections.Specialized.NotifyCollectionChangedEventArgs) Implements System.Collections.Specialized.INotifyCollectionChanged.CollectionChanged

    Public Overloads Function Add(index As String, text As String) As Boolean
        If Not ContainsKey(index) Then
            Dim si As New SelectableItem(text, Me)
            Add(index, si)
            AddHandler si.PropertyChanged, AddressOf OnSelectionChanged
            RaiseCollectionChanged(NotifyCollectionChangedAction.Reset)
            Return True
        End If
        Return False
    End Function

End Class 
```

我想问题是因为我绑定到值集合？但我不知道如何绑定到 sortedcollection 并让数据模板工作。

# optimization - 查询优化 (Netezza)

> ID：14897922
> 
> 赞同：0
> 
> 时间：2013-02-15T15:29:03.077
> 
> 标签：optimization, netezza

我正在尝试为我的一个朋友解决 Netezza 中的一个问题。我的朋友正在尝试在 Netezza 中做一些非常简单的事情：

```
select * 
from 
test
where 
ID1 = 12345
and date >= 12/1/2012 and event date <= 12/31/2012
and ID2 in
(x1, x2, ..., x150000) 
```

此查询永远不会返回。

在 Oracle 中，我们可以尝试这样的事情：

```
/*******************************************************************/
/*To reduce the size of the table...*/

create table t_test as
select * 
from 
test
where 
ID1 = 12345
and date >= 12/1/2012 and event date <= 12/31/2012;

/*To make the search on ID2 faster...*/
create index i_ID2 on t_test (ID2);

select * 
from 
t_test
where 
ID2 in
(x1, x2, ..., x150000)

/*Alternative: People say "IN" may be very inefficient at times...*/

select * 
from 
t_test
where 
ID2 = x1
or ID2 = x2
.
.
.
or ID2 = x150000
/*******************************************************************/ 
```

但是，这在 Netezza 中是不可能的，因为它没有任何索引概念。

我该如何解决这个问题？

谢谢并恭祝安康，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T23:19:45.643

当你运行它时，“and date >= 12/1/2012 and event date <= 12/31/2012”这一行到底是如何编码的？你真的有一个名为“日期”的列吗？“事件日期”中是否缺少下划线？

12/1/2012 计算为整数零，而不是日期。利用：

```
日期'2012-12-01'
日期'2012-12-31'

```

或 to_date('12/1/2012', 'mm/dd/yyyy') 像 Oracle

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-08T19:55:53.810

试试这个方法

```
select * 
from 
test
where 
ID1 = 12345
and eventdate BETWEEN DATE('12/1/2012') DATE('12/31/2012')
and ID2 in
(x1, x2, ..., x150000) 
```

# ios - 从 NSXMLParser 输出字符串

> ID：14897924
> 
> 赞同：0
> 
> 时间：2013-02-15T15:29:07.633
> 
> 标签：ios, objective-c

我是 Objective C 的新手，我正在使用一个帮助器，它从 Web 服务返回 XML 有效负载作为 NSXMLParser。我需要将该有效负载作为 XML 的 NSString 或 NSData 对象获取，以便我可以在另一个将有效负载转换为 NSDictionary 的库中使用它。

有没有一种简单的方法可以将此 XML 转换为字符串？从文档中，我看到我可以使用 NSXMLParser 的事件编写自己的字符串构建器，但与在其他语言中使用 XML 相比，这感觉像是在重新发明轮子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T16:00:58.150

这对你有用吗？

```
NSString *googleString = @"http://www.google.com";
NSURL *googleURL = [NSURL URLWithString:googleString];
NSError *error;
NSString *googlePage = [NSString stringWithContentsOfURL:googleURL 
                                                encoding:NSASCIIStringEncoding
                                                   error:&error]; 
```

从这里 [从 UIWebView 读取 HTML 内容](https://stackoverflow.com/questions/992348/reading-html-content-from-a-uiwebview)

从这里您应该能够转换为 NSXmlParser 或 NSData 但如果您向服务发出此请求，它应该将 xml 作为字符串返回。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T16:16:42.293

您可以将 NSMutableData 转换为字符串：

您发送请求：

```
conexion = [[NSURLConnection alloc] initWithRequest:theRequest delegate:self];
    if (conexion) {
        webData = [NSMutableData data];
    } 
```

然后将 webData 解析为字符串。在这个函数中：**connectionDidFinishLoading**

```
NSString *XML = [[NSString alloc] 
                     initWithBytes: [webData mutableBytes] 
                     length:[webData length] 
                     encoding:NSUTF8StringEncoding]; 
```

如果需要显示结果

```
NSLog(@"%@", XML); 
```

# javascript - Bootstrap 之类的东西可以用角度折叠

> ID：14897926
> 
> 赞同：6
> 
> 时间：2013-02-15T15:29:14.437
> 
> 标签：javascript, twitter-bootstrap, angularjs, collapse

我正在构建一个小型应用程序，并且正在使用 AngularJS。在应用程序内部，我需要一个可折叠元素，使用 Twitter Bootstrap 就像在我的目标元素和触发器上添加库和一些标签一样简单。

但我试图不加载其他外部库，如 bootstrap 或任何其他库，所以我试图用 Angular 实现相同的行为：

```
$scope.collapse = function(target) {

        var that = angular.element(document).find(target),

            transitioned = {
                'WebkitTransition' : 'webkitTransitionEnd',
                'MozTransition'    : 'transitionend',
                'OTransition'      : 'oTransitionEnd otransitionend',
                'msTransition'     : 'MSTransitionEnd',
                'transition'       : 'transitionend'
            },

            _transitioned = transitioned[ Modernizr.prefixed('transition') ],

            height = that.outerHeight(true);

        if (angular.element(that).hasClass("in")) {
            that.height(0);
        } else {
            that.height(height);
        };

        that.on(_transitioned, function() {
            that.toggleClass("in");
        });
    }; 
```

如您所见，我正在尝试转换高度（因为元素在高度上有转换），最后只添加类`in`。但这不是很好，因为如果我在过渡端收听，它将在该元素内的任何过渡端触发。

我需要一些帮助，如何仅使用 angular 重写引导可折叠？我不需要 bootstrap 所具有的事件`shown`，`hidden`或者`show`，`hide`我只需要通过转换触发元素的简单折叠并保持我的元素高度动态（我不想要固定高度，否则我只会使用CSS 实现折叠）。我只需要确定正确的方向:)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-15T15:57:04.910

好像你只想用 CSS3 过渡折叠一些东西？

好吧，你可以这样做，但控制器是错误的地方这样做。您应该使用指令或自定义指令来执行此操作。幸运的是，您可以使用 Angular 原生指令（例如 ng-class）来做到这一点。

HTML：

```
<button ng-click="open = !open">Toggle</button>    
<div ng-class="{ showMe: open }" class="collapsable">
  <h3>This should collapse</h3>
</div> 
```

最重要的是，你的 CSS：

```
 .collapsable {
    display: inline-block;
    overflow: hidden;
    height: 0;
    transition: height 1s;
    -webkit-transition: height 1s;        
    -moz-transition: height 1s;        
    -o-transition: height 1s;         
  }
  .collapsable.showMe {
    height: 100px;
  } 
```

[这是它的工作原理。](http://plnkr.co/edit/PbX9hSCgaBl4GsbtqZ1U?p=preview)

需要注意的是，CSS3 过渡不适用于所有浏览器。特别是在 IE 中。最后，我认为您最好使用其他人已经制作的插件，然后在监视一些布尔值的自定义指令中利用它。

我希望这会有所帮助。

* * *

**编辑**

`height: auto`不适用于 CSS 过渡（至少截至本文发表时）。所以，这就是为什么你真的想使用别人的插件，而不是重新发明轮子。即使它只是 JQuery 的 animate() 方法。滚动您自己的指令的伪代码将是这样的：（假设您使用的是 JQuery）

```
app.directive('collapseWhen', function () {
   return function(scope, elem, attr) {
     scope.$watch(attr.collapseWhen, function(val) {
        var clone = elem.clone().appendTo('body');
        var h = clone.height();
        clone.remove();
        scope.animate({ height: (val ? h : 0) + 'px' }, 1000);
     }
   }
}); 
```

然后你会像这样使用它：

```
<button ng-click="foo = !foo">Toggle</button>
<div collapse-when="foo"> 
```

同样，上面是*伪代码*，我不知道它是否会起作用，这只是给你一个想法，如果你*真的*想自己动手的话。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-05-31T13:45:25.740

如果我理解这些问题，我的解决方案是使用 angular $animateCss。这里有文档和示例[https://docs.angularjs.org/api/ngAnimate/service/](https://docs.angularjs.org/api/ngAnimate/service/) $animateCss

使用 $animateCss 服务，您可以使用 ngAnimate 创建自己的动画。这是一个角度模块的例子。演示在下面的链接中

```
var AppModule = angular.module('myApp', ['ngAnimate'])
  .controller('collapseCtrl', ['$scope', function($scope) {
    $scope.btn1 = $scope.btn2 = $scope.btn3 = false;
  }]).animation('.my-collapse', ['$animateCss', function($animateCss) {
    return {
      enter: function(element, doneFn) {
        var height = element[0].offsetHeight;
        return $animateCss(element, {
          from: {
            height: '0px',
            overflow: 'hidden'
          },
          to: {
            height: height + 'px'
          },
          cleanupStyles: true,
          duration: 0.3 // one second
        });
      },
      leave: function(element, doneFn) {
        var height = element[0].offsetHeight;
        return $animateCss(element, {
          to: {
            height: '0px',
            overflow: 'hidden'
          },
          from: {
            height: height + 'px'
          },
          cleanupStyles: true,
          duration: 0.3 // one second
        });
      }
    };
  }]); 
```

[https://plnkr.co/edit/DjU1A2vmiBB1dYXjkiN1](https://plnkr.co/edit/DjU1A2vmiBB1dYXjkiN1)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-15T18:35:03.297

Roland，看看angular-ui 团队的[Bootstrap 项目](http://angular-ui.github.com/bootstrap)。

# jquery - jQuery避免代码重复

> ID：14897930
> 
> 赞同：0
> 
> 时间：2013-02-15T15:29:23.697
> 
> 标签：jquery, jquery-plugins

我正在编写一个小插件，是否可以避免两次编写相同的函数？

```
if(opts.effect === 'fade'){
                            // fade effect
                            (opts.overlay).children().fadeOut(opts.time_fadeOut).promise().done(function () {
                                overlay_content.fadeIn();
                            });     
                            //don't need to make the overlay fadeIn every time
                            (opts.overlay).fadeIn();
}

else if(opts.effect === 'slide'){
                            // sldie up/down effect
                            (opts.overlay).children().fadeOut(opts.time_fadeOut).promise().done(function () {
                               overlay_content.delay(500).fadeIn();
                            });
                            (opts.overlay).slideDown();
} 
```

有没有更好的使用 if 语句的方法？[完整的脚本](http://jsfiddle.net/uKfqX/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T15:31:34.053

尝试使用`opts.effect`并使用它来确定函数`(opts.overlay)[effect]();`

```
var effect = (opts.effect === 'fade')?'fadeIn':'slideDown';
var cBfx = (opts.effect === 'fade')?fadeCB:slideCB;

(opts.overlay).children().fadeOut(opts.time_fadeOut).promise().done(cBfx );

(opts.overlay)[effect]();

function slideCB () { overlay_content.delay(500).fadeIn(); }

function fadeCB() {  overlay_content.fadeIn(); } 
```

# gtk - Gtkbuilder 错误

> ID：14897934
> 
> 赞同：0
> 
> 时间：2013-02-15T15:29:32.190
> 
> 标签：gtk

我已经为我的 powerpc 目标板安装了带有 directFB 后端的 GTK+- 2.10.14，我可以在我的目标板上运行示例应用程序并看到 gui 出现在目标 LCD 中。我开始使用 glade 创建 GUI 但在工作时在 Glade 上创建我自己的 GUI 我发现 glade 需要 gtkbuildet 来编译一个 .glade 文件。gtkbuilder 从版本 GTK+-2.12.0 可用，因此再次安装 GTK+-2.12.0 和[本教程](http://www.micahcarrick.com/gtk-glade-tutorial-part-1.html#Introduction_to_Glade3)中所说的休闲程序。

我的程序如下：

```
#include<gtk/gtk.h>

int
main( int    argc,char **argv )
{

GtkBuilder *builder;
GtkWidget  *window;
GError     *error = NULL;

/* Init GTK+ */
gtk_init( &argc, &argv );

/* Create new GtkBuilder object */
builder = gtk_builder_new();
/* Load UI from file. If error occurs, report it and quit application.
*      * Replace "tut.glade" with your saved project. */
if( ! gtk_builder_add_from_file( builder, "graph.glade", &error ) )
    {
        g_warning( "%s", error->message );
        g_free( error );
        return( 1 );
    }

/* Get main window pointer from UI */
window = GTK_WIDGET( gtk_builder_get_object( builder, "window1" ) );

/* Connect signals */
gtk_builder_connect_signals( builder, NULL );

/* Destroy builder, since we don't need it anymore */
g_object_unref( G_OBJECT( builder ) );

/* Show window. All other widgets are automatically shown by GtkBuilder */
gtk_widget_show( window );

/* Start main loop */
gtk_main();

return( 0 );
} 
```

现在，当我编译上面的程序时，我遇到了如下错误：

```
powerpc-linux-gnu-gcc progressbar.c -o progressbar -pthread -I/opt/gtkdfb/usr/local/include/glib-2.0 -I/opt/gtkdfb/usr/local/lib/glib-2.0/include -I/opt/gtkdfb/usr/local/include/pango-1.0 -I/opt/gtkdfb/usr/local/include/cairo -I/opt/gtkdfb/usr/local/include -I/opt/gtkdfb/usr/local/freetype2 -I/opt/gtkdfb/usr/local/libpng12 -I/opt/gtkdfb/usr/local/includegtk-2.0 -D_REENTRANT -D_GNU_SOURCE -I/opt/gtkdfb/usr/include/directfb -L/opt/gtkdfb/usr/local/lib  -ldirectfb -lfusion -ldirect -lpthread -ldl -lpangocairo-1.0 -lpango-1.0 -lcairo -lgobject-2.0 -lgmodule-2.0 -lglib-2.0 -lxml2 -lpng12 -lgthread-2.0 -lgtk-directfb-2.0 -lffi -lz -lm `pkg-config gtk+-2.0 --cflags --libs`

/tmp/ccZ9fkFp.o: In function `main':

progressbar.c:(.text+0x3c): undefined reference to `gtk_builder_new'

progressbar.c:(.text+0x58): undefined reference to `gtk_builder_add_from_file'

progressbar.c:(.text+0xb0): undefined reference to `gtk_builder_get_object'

progressbar.c:(.text+0xd8): undefined reference to `gtk_builder_connect_signals'

collect2: ld returned 1 exit status

make: *** [helloworld] Error 1 
```

请帮助我摆脱这个错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T13:09:01.240

我的猜测是`pkg-config`仍然指向旧的 2.10 版本。我也不明白您为什么拥有`pkg-config gtk+-2.0 --cflags --libs` **并**提供所有 GCC 命令行参数。这应该是 的工作`pkg-config`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T08:44:35.107

如果没有`GtkBuilder`，则使用[libglade 。](http://developer.gnome.org/libglade/)您必须使用支持 GTK+2 和 libglade 的 glade 版本（[3.8 分支](http://ftp.gnome.org/pub/GNOME/sources/glade3/3.8/)符合要求）。

不要尝试在较新的 GTK+ 上使用 directFB 后端：它由 Debian 安装程序的开发人员积极维护，但很长时间以来已被放弃。

# eclipse - 如何从 Eclipse PDE 中的活动编辑器中获取文本

> ID：14897938
> 
> 赞同：2
> 
> 时间：2013-02-15T15:29:46.133
> 
> 标签：eclipse, eclipse-plugin

我有一个处理程序，我想从工作台中的活动编辑器中获取文本。从下面的屏幕截图中，我想获取 Test.java 中的所有内容（“public class Test...”）。

![测试类截图](../Images/2888d3df23047345b07f43b9a168af2e.png)

我已成功在“源”菜单下添加了一个新命令。只是不确定现在从活动编辑器中获取文本的位置。这是我到目前为止尝试获取文本的内容（它只是在弹出窗口中显示文件名）：

```
package generatebuilderproject.handlers;

import org.eclipse.core.commands.AbstractHandler;
import org.eclipse.core.commands.ExecutionEvent;
import org.eclipse.core.commands.ExecutionException;
import org.eclipse.ui.IEditorPart;
import org.eclipse.ui.IWorkbenchWindow;
import org.eclipse.ui.handlers.HandlerUtil;
import org.eclipse.jface.dialogs.MessageDialog;

public class GenerateBuilderHandler extends AbstractHandler {

    public GenerateBuilderHandler() {
    }

    public Object execute(ExecutionEvent event) throws ExecutionException {
        IWorkbenchWindow window = HandlerUtil.getActiveWorkbenchWindowChecked(event);
        IEditorPart editorPart = HandlerUtil.getActiveEditor(event);

        MessageDialog.openInformation(
                window.getShell(),
                "GenerateBuilderProject",
                editorPart.getEditorInput().getName());
        return null;
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T15:51:53.423

拥有 后`IEditorPart`，您可以尝试以下操作：

```
IEditorInput input = editorPart.getEditorInput();
if (input instanceof FileEditorInput) {
    IFile file = ((FileEditorInput) input).getFile();
    InputStream is = file.getContents();
    // TODO get contents from InputStream
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-12-12T21:19:44.183

或者从[这里](https://stackoverflow.com/questions/27626959/get-the-current-source-code-of-an-eclipse-editor?rq=1)

```
IEditorPart editor = PlatformUI.getWorkbench().getActiveWorkbenchWindow().getActivePage().getActiveEditor();

if (editor instanceof ITextEditor)
 {
   ITextEditor textEditor = (ITextEditor)editor;

   IDocumentProvider provider = textEditor.getDocumentProvider();

   IEditorInput input = editor.getEditorInput();

   IDocument document = provider.getDocument(input);

   String text = document.get();

   ...
 } 
```

# ravendb - Ravendb Multi Get 带索引

> ID：14897942
> 
> 赞同：1
> 
> 时间：2013-02-15T15:29:55.760
> 
> 标签：ravendb, ravendb-http

我正在尝试使用 ravendb (build 960) multi get 来获取多个查询的结果。

我发布到 /multi_get ：

```
[
  {"Url":"/databases/myDb/indexes/composers?query=title:beethoven&fetch=title&fetch=biography"},
  {"Url":"/databases/myDb/indexes/products?query=title:beethoven&fetch=title&fetch=price"}
] 
```

服务器响应每个查询的结果，但是它响应每个索引的每个文档。看起来既没有使用查询，也没有使用 fetch 参数。

我在这里做错了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T08:05:39.657

`/datbases/foo` Multi GET 假设所有 url 都是当前数据库本地的，您可以指定以您在 multi get url 中指定的开头的 url。更改您的代码以生成：

```
[
  {"Url":"/indexes/composers?query=title:beethoven&fetch=title&fetch=biography"},
  {"Url":"/indexes/products?query=title:beethoven&fetch=title&fetch=price"}
] 
```

并确保你多去

```
/databases/mydb/multi_get 
```

# haskell - 用于处理 Data.Text 的递归函数替换输出比预期更长的文本

> ID：14897945
> 
> 赞同：0
> 
> 时间：2013-02-15T15:30:03.553
> 
> 标签：haskell

我`handleReplace`在 Haskell 中有一个函数，它是类型

```
handleReplace :: Character -> T.Text -> T.Text 
```

T 只是作为限定导入的 Data.Text 模块所以此函数采用 Character 类型，其定义如下：

```
data Character  = Character (String, String, String, String) [(String,String)] Case String Stringderiving (Read, Show) 
```

和一个文本值。它只关心字符串元组的列表，并尝试用 Data.Text 字符串中元组中的第二项替换元组中第一项的每次出现，以及该元组列表中的每个元素。一个例外是，如果要替换的匹配项位于以 开头的单词内`/`。我这样定义函数：

```
handleReplace :: Character -> T.Text -> T.Text
handleReplace (Character _ []   _ _ _)        s = s
handleReplace (Character _ ((a, b):xs) _ _ _) s = handleReplace emptyCharacter string
                                                where emptyCharacter = Character ([], [], [], []) xs Normal [] []
                                                      string         = T.unwords $ map (\ x 
                                                                                         -> if (T.head x) == '/'
                                                                                                then x
                                                                                                else T.replace (T.pack a) (T.pack b) s
                                                                                      ) $ T.words s 
```

不幸的是，它不起作用。它不会抛出任何错误，但我没有得到预期的输出。跑步时

```
handleReplace (Character ([],[],[],[]) [("u","U"),("v","wv")] Normal [] []) $ T.pack "/uu v uu vvuu" 
```

我希望它会返回`"/uu wv UU wvwvUU"`（显然是 Text 类型）但是当我在 ghci 中尝试时，我得到：

```
"/uu /UU /uu /UU wv UU wvwvUU /UU wv UU wvwvUU /UU wv UU wvwvUU ... 
```

等等 为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T15:42:18.040

在不同的范围内有很多单字母变量很容易犯这种错误。我怀疑你想要的是

```
else T.replace (T.pack a) (T.pack b) x 
```

而不是

```
else T.replace (T.pack a) (T.pack b) s 
```

否则，您将多次对整个字符串执行替换，而不是对特定块执行替换。至少，此更改似乎在您的测试用例中提供了所需的输出。

顺便说一句，这就是我要写它的方式。不是完全免费的，但它更接近，并且更容易理解。

```
import Control.Arrow ((***))
import qualified Data.Text as T

handleReplace :: Character -> T.Text -> T.Text
handleReplace (Character _ [] _ _ _) = id
handleReplace (Character _ xs _ _ _) = doReplacements $ map (T.pack *** T.pack) xs

doReplacements :: [(T.Text, T.Text)] -> T.Text -> T.Text
doReplacements reps = T.unwords . map replaceAll . T.words
    where replaceAll word = foldl replaceSingle word reps

replaceSingle :: T.Text -> (T.Text, T.Text) -> T.Text
replaceSingle word (inp, out)
    | T.head word == '/' = word
    | otherwise          = T.replace inp out word 
```

# c++ - 如何从字符串中存储和检索 char*？

> ID：14897947
> 
> 赞同：0
> 
> 时间：2013-02-15T15:30:06.920
> 
> 标签：c++, stl

`const char *RecBuffer, int *packetLength`指向数据和大小

```
 string packet(RecBuffer,*packetLength);//store here
     ...do some stuff
    RecBuffer = packet.c_str();//retrieve it later 
```

现在发生的事情是我的 Recbuffer 包含许多浮点数和整数数据包，我将它们作为 UDP 数据包接收。但是当我从字符串中存储和检索它时，它包含垃圾。

我哪里错了？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-15T15:33:12.297

我怀疑`std::string`命名的实例在被使用`packet`之前被破坏或修改，`RecBuffer`意思`RecBuffer`是一个悬空指针。您需要复制其内容`packet`而不是存储对其内部成员的引用。`char*`而不是使用[`std::vector<char>`](http://en.cppreference.com/w/cpp/container/vector)（由 Bartek 评论）动态分配建议：

```
std::vector<char> RecBuffer(packet.begin(), packet.end()); 
```

使用`&RecBuffer[0]`（或`RecBuffer.data()`如果可用，在 c++11 中引入）访问内部数组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T15:33:27.220

**使用 memcpy：**

```
RecBuffer[packet.size()]=0;
memcpy(RecBuffer, packet.c_str(), packet.size()); 
```

# session - 在会话中存储多个 CAPTCHA 解决方案

> ID：14897948
> 
> 赞同：0
> 
> 时间：2013-02-15T15:30:07.460
> 
> 标签：session, security, captcha, challenge-response

我正在为我的网站实施[3D 验证码。](https://stackoverflow.com/questions/1021721/generating-a-3d-captcha-pic)

我最初的想法是将预期的验证码解决方案存储在会话变量中。用户提交表单后，我会将其与他们的回复进行比较。

如果用户在多个标签中打开我的网站会发生什么？对于每个选项卡，都会生成一个新的 CAPTCHA 质询，并覆盖会话中的预期响应变量。

现在考虑用户在“旧”选项卡中提交表单。由于会话中的预期响应变量已被覆盖，因此它们不会通过测试。

我应该担心这个吗？你会怎么处理？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T15:34:52.547

这是验证码的一般方法，有时也是它们不验证的原因。

这是一个很好的阅读[http://www.sitepoint.com/captcha-inaccessible-to-everyone/](http://www.sitepoint.com/captcha-inaccessible-to-everyone/)为什么不使用验证码

但是，您可以将它们添加到数组中，然后查看答案是否存在于数组中。您没有说明您使用的是哪种语言，否则我可以提供一些代码。

# php - 正则表达式中的“\ G”锚点有什么用？

> ID：14897949
> 
> 赞同：20
> 
> 时间：2013-02-15T15:30:18.493
> 
> 标签：php, regex

我很难理解`\G`锚在 PHP 风格的正则表达式中是如何工作的。

我倾向于认为（即使我可能错了），`\G`而不是`^`在发生相同字符串的多个匹配的情况下使用它。

有人可以举一个`\G`应该如何使用的例子，并解释它是如何工作的以及为什么工作吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-15T15:53:25.780

**更新**

**\G**强制模式只返回作为连续匹配链一部分的匹配。从第一个匹配开始，每个后续匹配都必须在匹配之前。如果你打破链条，比赛就结束了。

```
<?php
$pattern = '#(match),#';
$subject = "match,match,match,match,not-match,match";

preg_match_all( $pattern, $subject, $matches );

//Will output match 5 times because it skips over not-match
foreach ( $matches[1] as $match ) {
    echo $match . '<br />';
}

echo '<br />';

$pattern = '#(\Gmatch),#';
$subject = "match,match,match,match,not-match,match";

preg_match_all( $pattern, $subject, $matches );

//Will only output match 4 times because at not-match the chain is broken
foreach ( $matches[1] as $match ) {
    echo $match . '<br />';
}
?> 
```

这直接来自文档

> 反斜杠的第四种用途是用于某些简单的断言。断言指定必须在匹配中的特定点满足的条件，而不消耗主题字符串中的任何字符。下面描述了对更复杂的断言使用子模式。反斜杠断言是

```
 \G
    first matching position in subject 
```

> 仅当当前匹配位置位于匹配的起点时，\G 断言才为真，如 preg_match() 的 offset 参数所指定。当 offset 的值非零时，它与 \A 不同。

[http://www.php.net/manual/en/regexp.reference.escape.php](http://www.php.net/manual/en/regexp.reference.escape.php)

您将不得不向下滚动该页面，但它确实存在。

ruby 中有一个非常好的例子，但在 php 中也是一样的。

[Anchor \z 和 \G 如何在 Ruby 中工作？](https://stackoverflow.com/questions/14365969/how-the-anchor-z-and-g-works-in-ruby/14366062#14366062)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-02-15T16:56:52.657

`\G`将匹配匹配边界，该边界可以是字符串的开头，也可以是使用最后一个匹配的最后一个字符的点。

当您需要进行复杂的标记化时，它特别有用，同时还要确保标记有效。

**示例问题**

让我们以标记这个输入为例：

```
input 'some input in quote' more input   '\'escaped quote\''   lots@_$of_fun    ' \' \\  ' crazy'stuff' 
```

进入这些标记（我`~`用来表示字符串的结尾）：

```
input~
some input in quote~
more~
input~
'escaped quote'~
lots@_$of_fun~
 ' \  ~
crazy~
stuff~ 
```

该字符串由以下各项组成：

*   单引号字符串，允许转义`\`and `'`，并且保留空格。可以使用单引号字符串指定空字符串。
*   OR 不带引号的字符串，由一系列非空白字符组成，并且不包含`\`or `'`。
*   2 个未加引号的字符串之间的空格将分隔它们。不需要空格来分隔其他情况。

为了简单起见，让我们假设输入不包含换行（在实际情况下，您**需要**考虑它）。它会增加正则表达式的复杂性，而不会证明这一点。

单引号字符串`'(?:[^\\']|\\[\\'])*+'`
的 RAW 正则表达式是 未引用字符串的 RAW 正则表达式是`[^\s'\\]++`
你不需要太在意上面的 2 段正则表达式。

下面的解决方案`\G`可以确保当引擎找不到任何匹配时，从字符串开头到最后一个匹配位置的**所有字符都已被消耗掉。**由于它不能跳过字符，因此引擎将在无法找到两种标记规范的有效匹配时停止匹配，而不是在字符串的其余部分中抓取随机内容。

**建造**

在构建的第一步，我们可以把这个正则表达式放在一起：

```
\G(?:'((?:[^\\']|\\[\\'])*+)'|([^\s'\\]++)) 
```

或者简单地说（这**不是**正则表达式 - 只是为了更容易阅读）：

```
\G(Singly_quote_regex|Unquoted_regex) 
```

这将只匹配第一个标记，因为当它第二次尝试匹配时，匹配会在之前的空格处停止`'some input...`。

* * *

我们只需要添加一点，以允许 0 或更多空间，以便在随后的匹配中，消耗上次匹配留下的位置的空间：

```
\G *+(?:'((?:[^\\']|\\[\\'])*+)'|([^\s'\\]++)) 
```

上面的正则表达式现在将正确识别标记，如此[**处所示**](http://www.regex101.com/r/tK1uG3)。

* * *

可以进一步修改正则表达式，以便在引擎无法检索任何有效令牌时返回字符串的其余部分：

```
\G *+(?:'((?:[^\\']|\\[\\'])*+)'|([^\s'\\]++)|((?s).+$)) 
```

由于按从左到右的顺序尝试交替，`((?s).+$)`当且仅当前面的字符串不构成有效的单引号或不带引号的标记时，最后一个选项才会匹配。这可用于检查错误。

第一个捕获组将包含单引号字符串中的文本，*需要额外处理*才能转换为所需的文本（这里并不相关，所以我把它留给读者作为练习）。第二个捕获组将包含未加引号的字符串。第三个捕获组充当输入字符串无效的指示符。

[**最终正则表达式的演示**](http://www.regex101.com/r/wZ7cX3)

**结论**

上面的示例演示了`\G`in 标记化的一种使用场景。可能还有其他我没有遇到过的用法。

# xaml - 如何在 xaml 中从单例绑定字符串（WinRT / C#）

> ID：14897950
> 
> 赞同：1
> 
> 时间：2013-02-15T15:30:31.747
> 
> 标签：xaml, binding, windows-runtime

我创建了一个包含字符串的单例。现在我想将此字符串绑定到 TextBlock 和 Xaml。

```
<TextBlock Visibility="Visible" Text="{Binding singleton.Instance.newsString, Mode=TwoWay}"/> 
```

当我运行 WinRT 应用程序时，TextBlock-Text-String 为空。

**编辑1：**

现在它运行了。但是当我更改单例中的字符串时，TextBlock 不会更新。

这是我单身人士的 c# 代码

```
namespace MyApp
{
    public sealed class singleton : INotifyPropertyChanged
    {
        private static readonly singleton instance = new singleton();
        public static singleton Instance
        {
            get
            {
                return instance;
            }
        }

        private singleton() { }

        private string _newsString;
        public string newsString
        {
            get
            {
                if (_newsString == null)
                    _newsString = "";
                return _newsString;
            }
            set
            {
                if (_newsString != value)
                {
                    _newsString = value;
                    this.RaiseNotifyPropertyChanged("newsString");
                }
            }
        }

        private void RaiseNotifyPropertyChanged(string property)
        {
            var handler = PropertyChanged;
            if (handler != null)
            {
                handler(this, new PropertyChangedEventArgs(property));
            }
        }

        public event PropertyChangedEventHandler PropertyChanged;
    }
} 
```

在我的 xaml 代码中，我这样做了

```
 singleton.Instance.newsString = "Breaking news before init";
        this.Resources.Add("newsStringResource", singleton.Instance.newsString);
        this.InitializeComponent();
        singleton.Instance.newsString = "Breaking news AFTER init"; 
```

在 xaml 中我将资源绑定到

```
 <TextBlock Visibility="Visible" Text="{StaticResource newsStringResource}" /> 
```

使用此代码，TextBlock 会显示“初始化前的突发新闻”。现在怎么了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T16:52:56.653

`TextBlock`在构造之前使用后面的代码将您的单例添加到应用程序资源并按键引用单例。

# web-services - REST 服务的安全即服务

> ID：14897953
> 
> 赞同：0
> 
> 时间：2013-02-15T15:30:38.723
> 
> 标签：web-services, rest

我正在使用 NetBeans (JAX-RS) 和 Glassfish 服务器实现 RESTful Web 服务以公开数据库资源。

我想根据用户的要求（也许提供给用户的选择）来实现不同级别的安全性。从有关 REST 安全性的各种讨论中，我了解到可以实现安全性的不同方式（如下所示）。如何将安全解决方案实现为将根据上下文调用的服务。

TLS (HTTPS) + 1\. HTTP Basic 2\. HTTP Digest 3\. 两腿 OAuth 4\. 基于 Cookie 的方法 5\. 客户端证书 6\. 使用 HMAC 和有限生命周期的签名请求

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T11:17:16.953

您可以尝试通过在运行时使用**策略**来实现安全性。
策略提供了根据上下文实施不同安全方案（userauth、oauth、saml 等）的灵活性。
**我们使用 Apache CXF 和 WS-SecurityPolicy 在 Web 服务中实现了相同的功能。**
对于休息服务，我认为可以使用类似的概念。

# android - 更新已在 google play 中的应用程序

> ID：14897954
> 
> 赞同：-1
> 
> 时间：2013-02-15T15:30:39.547
> 
> 标签：android

我找不到这些信息，我已经开始了我的 android 之旅。我有一个问题要问你。如果我创建应用程序并添加到 google play，我可以在一段时间后升级同一个应用程序吗？例如。我将应用程序添加到 google play，1 个月后我想添加具有一些新功能的相同应用程序。这个有可能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T15:31:47.457

是的，这是可能的。只需使用相同的密钥库对 APK 进行签名，并在版本之间维护包名称。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-15T15:35:47.967

是的，只需更改 versionCode 它 AndroidManifest.xml 文件保持相同的包并使用相同的密钥签名

然后转到[https://play.google.com/apps/publish/v2/](https://play.google.com/apps/publish/v2/)并上传新版本

# cocoa - NSCollectionViewItem 自定义视图的绑定

> ID：14897961
> 
> 赞同：2
> 
> 时间：2013-02-15T15:30:58.393
> 
> 标签：cocoa, cocoa-bindings, nscollectionview, nscollectionviewitem

我已经`NSCollectionView`绑定到我的模型对象数组，`NSView`用于呈现集合视图项目的原型设置为使用我的自定义`NSView`子类。

在运行时，每个数组元素的集合视图中都会显示/实例化一个（通用）视图，一切都很好。

但是，我只是不知道如何从各个视图实例中获取我的数组对象，以呈现特定于数组中每个元素的实际数据。
即我们应该如何将数据连接到`NSView`用于在集合视图中配置“单元格”的原型？

*   **奥特莱斯**似乎不适用于该特定视图。它们都`nil`在运行时。

*   **绑定**不适用于香草`NSView`（除了香草视图的*隐藏*和*工具提示*绑定......） - 我们不能为我们的`NSView`子类添加将在 IB 中显示的新绑定，可以吗？

任何提示表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T07:41:54.990

没关系 - 我已经解决了一个自定义`NSCollectionView`类只覆盖

`- (NSCollectionViewItem *)newItemForRepresentedObject:(id)object`

访问由`NSCollectionViewItem`创建的实例的项目视图`super`并在那里设置所需的属性。

# javascript - $element.show() 在 IE 中不起作用？

> ID：14897965
> 
> 赞同：0
> 
> 时间：2013-02-15T15:31:11.507
> 
> 标签：javascript, jquery, internet-explorer, visibility

当他们点击某个链接时，我想在用户的点击位置显示一些`div`存储空间。`$tip`这就是我正在做的事情，它`$this`是动态创建的已知对象的插件的一部分：

```
$this.children('.menu').children('.details').bind('click', function(e){
   $tip = $('#resizetip');
   tiptext = "some text for my sweet little tip";
   $tip.css('top',e.clientY);
   $tip.css('left',e.clientX);
   $tip.html(tiptext);
   $tip.show();
}); 
```

该提示显示在预期的位置，在 Chrome 和 FF 中很好，但我不知道为什么它在 IE8 甚至 IE9 中都不起作用。我试过`console.log($tip.html());`了，它给出了预期的输出，所以我知道它就在某个地方。我试图输出坐标，这很好。

然后我从控制台明确尝试`$('#resizetip').show();`，它工作！它出现了，正是它应该在的地方。但是为什么它在代码中不起作用？我尝试添加另一行`$tip.show();`以防万一由于某种莫名其妙的原因无法解雇第一行，但这没有帮助。

## 编辑

我在代码中添加了一个编辑来显示`e`来自哪里，但我知道这不是问题，因为当我输出`e.clientX`到控制台时，输出很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T15:38:43.627

这绝对是“e”不可用的问题。查看此站点以了解跨浏览器此问题的说明：[http ://www.quirksmode.org/js/events_properties.html](http://www.quirksmode.org/js/events_properties.html)

基本上你必须检查“e”是否存在，如果不使用window.event分配它：

函数 doSomething(e) { if (!e) var e = window.event; ....}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T15:35:01.937

您很可能需要类似以下内容：

```
if (!e){ 
  var e = window.event
} 
```

在你的函数顶部附近。`e`可能没有为 IE 定义，所以你需要恢复到[`window.event`](http://msdn.microsoft.com/en-us/library/ie/ms535863%28v=vs.85%29.aspx). [你可以在这里](http://www.quirksmode.org/js/events_access.html)阅读更多

[IE 的 clientX 文档](http://msdn.microsoft.com/en-us/library/ie/ms533567%28v=vs.85%29.aspx)

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-02-15T15:35:33.143

设置一些单位并使用 pageX 和 pageY 代替

```
$tip.css({
    'top', e.pageY+ "px", 
    'left',e.pageX + "px"
); 
```

# wordpress-theming - 注册自定义 WordPress 小部件

> ID：14897969
> 
> 赞同：2
> 
> 时间：2013-02-15T15:31:39.027
> 
> 标签：wordpress-theming, wordpress

我在我的主题插件目录中创建了一个自定义小部件，它似乎按预期工作，但是当我注册第二个自定义小部件时，第一个自定义小部件似乎被覆盖，我不再可以访问它。以下是我的小部件代码：

```
add_action( 'widgets_init', create_function( '', 'register_widget( "staffWidget" );' )     );

class staffWidget extends WP_Widget{
    function staffWidget() {  
            parent::WP_Widget(true, 'Staff');  
    } 

    function widget($args, $instance){
        echo "test widget";
    }

    function update($new_instance, $old_instance){
        return $new_instance;
    }

    function form($instance){
        $instance = wp_parse_args( (array) $instance, array( 'title' => '' ) );
        if($instance['title']){
            $title = $instance['title'];
        }
        else{
            $title = "Add title here";
    }
    ?>
    <p><label for="<?php echo $this->get_field_id('title'); ?>">Title: <input     class="widefat" id="<?php echo $this->get_field_id('title'); ?>" name="<?php echo $this->get_field_name('title'); ?>" type="text" value="<?php echo attribute_escape($title); ?>" /></label></p>
    <?php
    }
} 
```

两个小部件都具有这种代码结构，但具有不同的类名，并且两个小部件都已在 WP 仪表板的插件部分中激活。任何帮助或建议将不胜感激。提前致谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T19:56:34.293

[**`WP_Widget`**](http://core.trac.wordpress.org/browser/tags/3.5.1/wp-includes/widgets.php#L80)您正在使用错误的参数调用该类。

```
/**
 * PHP5 constructor
 *
 * @param string $id_base Optional Base ID for the widget, lower case,
 * if left empty a portion of the widget's class name will be used. Has to be unique.
 * @param string $name Name for the widget displayed on the configuration page.
 * @param array $widget_options Optional Passed to wp_register_sidebar_widget()
 *   - description: shown on the configuration page
 *   - classname
 * @param array $control_options Optional Passed to wp_register_widget_control()
 *   - width: required if more than 250px
 *   - height: currently not used but may be needed in the future
 */
function __construct( $id_base = false, $name, $widget_options = array(), $control_options = array() ) { 
```

如果您`false`输入 (默认值) 或 a `string`，它将起作用。所以，假设我们有一个小部件 Staff 和另一个 Stuff，这样可以：

```
parent::WP_Widget('staff', 'Staff', array(), array() ); 

parent::WP_Widget('stuff', 'Stuff', array(), array() ); 
```

您的代码正在使用`attribute_escape`，已弃用。如果启用[**`WP_DEBUG`**](http://codex.wordpress.org/Debugging_in_WordPress)，您将看到警告。无论如何，始终打开它进行开发是一个很好的做法。
所有这些都表明您正在使用错误的来源作为示例。这是[**一篇**](http://justintadlock.com/archives/2009/05/26/the-complete-guide-to-creating-widgets-in-wordpress-28)关于自定义小部件的文章。

# eclipse - 来自 SVN 分支的 Eclipse 项目

> ID：14897970
> 
> 赞同：0
> 
> 时间：2013-02-15T15:31:39.360
> 
> 标签：eclipse, svn, project

我必须在现有项目中修复错误。所以我进入了我的 Subversion 存储库。我从现有项目的主干创建了一个分支。

现在我需要一些如何将新创建的分支作为一个项目放入 eclipse 中，以便我可以编辑和测试它。

将分支导出到本地路径-> 作为现有项目导入到 Eclipse？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T15:42:54.727

您可以安装 Eclipse 插件
**Eclipse Subversive** [http://www.eclipse.org/subversive/](http://www.eclipse.org/subversive/)
或
**Subclipse** [http://subclipse.tigris.org/](http://subclipse.tigris.org/)
作为第一个选项并签入/签出分支，
或者作为第二个选项您可以使用**tortoisesvn** [http://tortoisesvn.net/downloads.html](http://tortoisesvn.net/downloads.html) **subversion** [http://subversion.tigris.org/](http://subversion.tigris.org/) cliens 签入/签出您的 Eclipse 项目

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T15:35:45.443

安装svn eclipse插件

[http://subclipse.tigris.org/](http://subclipse.tigris.org/)

并结帐分支。

# python - Grinder - 访问主机 ID

> ID：14897971
> 
> 赞同：0
> 
> 时间：2013-02-15T15:31:43.660
> 
> 标签：python, grinder

我正在为一个网站编写一个测试脚本，我们有两台服务器运行该脚本。我希望能够访问服务器的名称来设置脚本中应该使用哪个用户名。

我的属性文件说：

```
 grinder.hostID = 1 
```

我的脚本说：

```
 if grinder.hostID:
       offset = 1 
```

当我去运行脚本时，它告诉我它无法找到 hostID。我是否缺少 hostID 的基本功能？如何在我的脚本中访问属性文件的 hostID？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T03:56:04.410

以编程方式获取有关您正在运行的主机的信息可能更可靠。这样您就不必担心在您的各种代理上意外地为grinder.hostid 设置相同（或不正确）的值。你可以使用这样的东西：

```
import socket
# ...
host_id = socket.gethostname()
# or alternately
host_id = socket.gethostname().split('.')[0] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T15:35:02.930

你确定你`properties`的被导入到你的`script`

# css - 仅在 ie7 中的 css 下拉 z-index 问题

> ID：14897974
> 
> 赞同：0
> 
> 时间：2013-02-15T15:31:50.217
> 
> 标签：css, drop-down-menu, internet-explorer-7, z-index

由于某种原因，z-index 仅在 ie7 中无法正常工作。但是，如果我从 #header 中删除 position:fixed ，它可以正常工作，因为此菜单将固定在页面顶部，这是需要的。下拉显示，但仅在底部边框上方，下方没有任何内容。想不通这个

[小提琴](http://jsfiddle.net/GVUXw/)

```
<!-- start fixed header container -->
<div id="header_container">
    <!-- start header -->
    <div id="header">
        <!-- start container -->
        <nav>
            <div class="container">
                <div id="logo">logo here</div>
                <div id="top_menu">
                    <ul>
                        <li><a href="/#">Features</a>
                            <div class="drop">
                                <div>
                                    <ul>
                                        <li class="title"><a href="/#1">heading with link</a></li>
                                        <li><a href="/#1">testing 1</a></li>
                                        <li><a href="/#2">testing 2</a></li>
                                        <li><a href="/#3">testing 3</a></li>
                                    </ul>
                                    <ul>
                                        <li class="title"><a href="/#1">and another heading</a></li>
                                        <li><a href="/#1">testing 1</a></li>
                                        <li><a href="/#2">testing 2</a></li>
                                        <li><a href="/#3">testing 3</a></li>
                                    </ul>
                                </div>
                                <div class="extra">
                                    <ul>
                                        <li class="title">heading with NO link</li>
                                        <li><a href="/#4">testing 4</a></li>
                                        <li><a href="/#5">testing 5</a></li>
                                        <li><a href="/#6">testing 6</a></li>
                                    </ul>
                                    <ul>
                                        <li class="title">plain info description goes as far as I want <br />with no link blah blah blah blah blah</li>
                                    </ul>
                                </div>
                            </div>
                        </li>
                        <li><a href="/#">Download</a></li>
                        <li><a href="/#">Purchase</a></li>
                        <li><a href="/#">Support</a>
                            <div class="drop">
                                <div>
                                    <ul>
                                        <li class="title">How can we help you?</li>
                                        <li><a href="/#1">FAQs</a></li>
                                        <li><a href="/#2">How To Guides</a></li>
                                        <li><a href="/#3">Online Documentation</a></li>
                                        <li><a href="/#3">Contact Us</a></li>
                                    </ul>
                                </div>
                            </div>
                        </li>
                        <li><a href="/#">Account Login</a></li>
                    </ul>
                </div>
            </div>
        </nav>
        <!-- end container -->
        <div class="header_shadow"></div>
    </div>
    <!-- end header -->
</div>
<!-- end header container -->

#header_container{
width:100%;
height:52px;
}

#header{
width:100%;
height:50px;
position:fixed;
border-bottom:2px #3c9ac4 solid;
background: #00457b;
background-image: -webkit-gradient(linear, left top, left bottom, from(#1e70b2), to(#00457b)); 
background-image: -webkit-linear-gradient(top, #1e70b2, #00457b); 
background-image:    -moz-linear-gradient(top, #1e70b2, #00457b); 
background-image:     -ms-linear-gradient(top, #1e70b2, #00457b); 
background-image:      -o-linear-gradient(top, #1e70b2, #00457b); 
background-image:         linear-gradient(top, #1e70b2, #00457b);
 }

.ie8 #header, .ie9 #header{
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#1e70b2', endColorstr='#00457b',GradientType=0 ) ;
}

.header_shadow{
width:100%;
height:10px;
position:absolute;
z-index:900;
display:none;
left:0;
top:52px;
background:url(/images/header_shadow.png) repeat-x;
 }

 /* Top Menu
 ================================================== */

#logo{
width:200px;
float:left;
}

/*menu container centered*/
#top_menu{
width:760px;
float:left;
}

/*entire menu ul*/
#top_menu ul{
position:relative;
z-index:1000;
margin:0;
float:right;
height:50px;
line-height:50px;
}

/*top link container*/
#top_menu ul li{
display:block;
float:left;
}

/*top link*/
#top_menu ul li a{
display:block;
color:#f1f1f1;
text-decoration:none;
padding:0 20px;
font-size:14px;
}

/*top link hover*/
#top_menu ul li:hover > a{      
color: #f1f1f1;
background:#555555;
}

/*show dropdown and position under tab*/
#top_menu ul li:hover > .drop{
display:block;
top:auto;
}

/*drop down container*/
#top_menu ul li .drop{
position:absolute;
z-index:1000;
display:none;
padding:15px 0 0 0;
-moz-border-radius:0 0 8px 8px;
-webkit-border-radius:0 0 8px 8px;
border-radius:0 0 8px 8px;

background:#555555;
background-image: -webkit-gradient(linear, left top, left bottom, from(#555555), to(#202020)); 
background-image: -webkit-linear-gradient(top, #555555, #202020); 
background-image:    -moz-linear-gradient(top, #555555, #202020); 
background-image:     -ms-linear-gradient(top, #555555, #202020); 
background-image:      -o-linear-gradient(top, #555555, #202020); 
background-image:         linear-gradient(top, #555555, #202020);
font-size:13px;
}

.ie8 #top_menu ul li .drop{
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#555555', endColorstr='#202020',GradientType=0 ) ;
}

.ie9 #top_menu ul li .drop{
background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIHZpZXdCb3g9IjAgMCAxIDEiIHByZXNlcnZlQXNwZWN0UmF0aW89Im5vbmUiPgo8bGluZWFyR3JhZGllbnQgaWQ9Imc1ODIiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIiB4MT0iMCUiIHkxPSIwJSIgeDI9IjAlIiB5Mj0iMTAwJSI+CjxzdG9wIHN0b3AtY29sb3I9IiM1NTU1NTUiIG9mZnNldD0iMCIvPjxzdG9wIHN0b3AtY29sb3I9IiMyMDIwMjAiIG9mZnNldD0iMSIvPgo8L2xpbmVhckdyYWRpZW50Pgo8cmVjdCB4PSIwIiB5PSIwIiB3aWR0aD0iMSIgaGVpZ2h0PSIxIiBmaWxsPSJ1cmwoI2c1ODIpIiAvPgo8L3N2Zz4=);
}

/*drop down div*/
#top_menu ul li .drop div{
float:left;
padding:0 30px 0 10px;
line-height:normal;
}

/*drop down div floated left*/
#top_menu ul li .drop div.extra{
/*border-left:1px #eeeeee solid;*/
}

#top_menu ul li .drop div .title, #top_menu ul li .drop div .title a{
padding:0 0 4px 0;
border:none;
color:#f1f1f1;
font-size:13px;
}

#top_menu ul li .drop div .title a:hover{
text-decoration:underline;
}

#top_menu ul li .drop div ul{
width:auto;
height:auto;
float:none;
background:none;
border:none;
margin:0 0 15px 0;
}

#top_menu ul li .drop div ul li{
float:none;
padding:1px 0 1px 0;
line-height:normal;
}

#top_menu ul li .drop div ul li:hover a{
background:none;
}

#top_menu ul li .drop div ul li a{
display:inline;
padding:0;
border:none;
color:#6cc5d8;
font-size:13px;
}

#top_menu ul li .drop div ul li a:hover{
text-decoration:underline;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T18:24:10.037

我能够通过添加另一个包装器来解决该问题，该包装器缠绕标题并使其位置固定。所以它作为容器的宽度/高度（以保持页面其余部分的间距正确），容器宽度/高度固定，然后是带有徽标/下拉列表的标题容器。解决了 ie7 中的问题，之前所有其他浏览器都运行良好。

# node.js - Nodejs Express 发送文件

> ID：14897975
> 
> 赞同：3
> 
> 时间：2013-02-15T15:31:53.493
> 
> 标签：node.js, amazon-web-services, express

我试图在我的请求中将文件的内容发送给客户端，但 Express 的唯一文档是它的下载功能，它需要一个物理文件；我要发送的文件来自 S3，所以我只有文件名和内容。

如何发送文件内容以及内容类型和文件名的相应标头以及文件内容？

例如：

```
files.find({_id: id}, function(e, o) {
  client.getObject({Bucket: config.bucket, Key: o.key}, function(error, data) {
    res.send(data.Body);
  });
}); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-15T15:53:00.683

文件的类型显然取决于文件。看看这个：

[http://en.wikipedia.org/wiki/Internet_media_type](http://en.wikipedia.org/wiki/Internet_media_type)

如果您知道您的文件到底是什么，那么将其中之一分配给响应（虽然不是强制性的）。您还应该将文件的长度添加到响应中（如果可能，即如果它不是流）。如果您希望它可以作为附件下载，请添加 Content-Disposition 标头。所以总而言之，你只需要添加这个：

```
var filename = "myfile.txt";
res.set({
    "Content-Disposition": 'attachment; filename="'+filename+'"',
    "Content-Type": "text/plain",
    "Content-Length": data.Body.length
}); 
```

注意：我使用的是 Express 3.x。

**编辑**：实际上 Express 足够聪明，可以为您计算内容长度，因此您不必添加`Content-Length`标题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T17:30:20.253

这是使用流的好情况。使用 knox 库来简化事情。Knox 应该负责设置所需的标头以将文件传输到客户端

```
var inspect = require('eyespect').inspector();
var knox = require('knox');
var client = knox.createClient({
  key: 's3KeyHere'
  , secret: 's3SecretHere'
  , bucket: 's3BucketHer'
});
/**
 * @param {Stream} response is the response handler provided by Express
 **/
function downloadFile(request, response) {
  var filePath = 's3/file/path/here';
  client.getFile(filePath, function(err, s3Response) {
    s3Response.pipe(response);
    s3Response.on('error', function(err){
      inspect(err, 'error downloading file from s3');
    });

    s3Response.on('progress', function(data){
      inspect(data, 's3 download progress');
    });
    s3Response.on('end', function(){
      inspect(filePath, 'piped file to remote client successfully at s3 path');
    });
  });
} 
```

`npm install knox eyespect`

# ios - 无法附加到进程 ID

> ID：14897977
> 
> 赞同：0
> 
> 时间：2013-02-15T15:32:01.107
> 
> 标签：ios, objective-c, xcode, compiler-errors, ios-simulator

我真的什么都试过了。重新启动 Xcode，在 derivedData 和应用程序支持/iOS 模拟器中删除地图，重置模拟器，重新启动我的 mac，清理和构建项目。

所有其他项目在模拟器和设备上都运行良好。这个项目曾经可以工作，但我在信息和构建阶段更改了一些设置，但不相信这是问题所在。

这个错误有什么解决办法吗？当我为模拟器运行时，我收到错误：

> 未能附加到进程 ID 0

当我为设备构建时，它说：

> 错误：无法启动'/Users/XXXX/Library/Developer/Xcode/DerivedData/XXXXXXXX-ddmwyymhinfkgycuuuhjmmmkivcm/Build/Products/Debug-iphoneos/XXXXXXXX.app/XXXXXXXX'——没有这样的文件或目录（/Users/XXXXX/库/开发者/Xcode/DerivedData/XXXXXXXXX-ddmwyymhinfkgycuuuhjmmmkivcm/Build/Products/Debug-iphoneos/XXXXXXXX.app/XXXXXXX)

# php - Ajax 不返回任何属性 这很奇怪，也很复杂，我会尽力解释它。我手工制作日历，计划开源等等。我目前正在寻找谷歌日历的外观和感觉，因为它们似乎是最好的，但我确实计划升级它+开源。一切都在完美运行，除非我单击上个月，以查看上个月，然后运行 ajax 查询，php 返回新日历，但是当它呈现时，它呈现没有任何 元素，除了没有遇到任何障碍想法？继承人一些代码/图像： html: 问问题 问问题 2013-02-15T15:32:14.310 107 次 This question shows research effort; it is useful and clear -2 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. 这很奇怪，也很复杂，我会尽力解释它。我手工制作日历，计划开源等等。我目前正在寻找谷歌日历的外观和感觉，因为它们似乎是最好的，但我确实计划升级它+开源。一切都在完美运行，除非我单击上个月，以查看上个月，然后运行 ajax 查询，php 返回新日历，但是当它呈现时，它呈现没有任何

元素，除了没有遇到任何障碍想法？继承人一些代码/图像： html: //function to use xml function xml(){ //need to set up xml to run php for query if (window.XMLHttpRequest) {// code for IE7+, Firefox, Chrome, Opera, Safari xmlhttp = new XMLHttpRequest(); } else {// code for IE6, IE5 xmlhttp=new ActiveXObject("Microsoft.XMLHTTP"); } xmlhttp.onreadystatechange = function() { if (xmlhttp.readyState == 4 && xmlhttp.status == 200) { document.getElementById("calendar").innerHTML= xmlhttp.responseText; } }; } //function to select the previous month function previousMonth(str){ //since this is the previous month we need to take month -1 var month = str - 1; //if it is already 1.. then it needs to be 12! if(str == 1) { month = 12; } //call xml xml() //send dat query xmlhttp.open("GET","redraw.php?month="+encodeURIComponent(month),true); xmlhttp.send(); } 重绘.php： // draws the calendar function draw_calendar($month,$year){ // table headings $headings = array('Sunday','Monday','Tuesday','Wednesday','Thursday','Friday','Saturday'); $calendar= ''; // days and weeks vars now $days_last_month = date('t',mktime(0,0,0,$month-1,1,$year)); $running_day = date('w',mktime(0,0,0,$month,1,$year)); $days_in_month = date('t',mktime(0,0,0,$month,1,$year)); $days_in_this_week = 1; $day_counter = 0; $dates_array = array(); $today = date("d"); // row for week one $calendar.= ''; // print "blank" days until the first of the current week for($x = 0; $x < $running_day; $x++) { $calendar.= ''; $days_in_this_week++; } // keep going with days.... for($list_day = 1; $list_day <= $days_in_month; $list_day++) { $calendar.= ''; if($running_day == 6) { $calendar.= ''; if(($day_counter+1) != $days_in_month) { $calendar.= ''; } $running_day = -1; $days_in_this_week = 0; } $days_in_this_week++; $running_day++; $day_counter++; } // finish the rest of the days in the week if($days_in_this_week < 8 && $days_in_this_week != 1) { for($x = 1; $x <= (8 - $days_in_this_week); $x++) { $calendar.= ''; } }; // final row $calendar.= ''; // all done, return result return $calendar; } //draw the calendar $year = date ('Y'); $month_title = date ('F'); //Sent variables if(!empty($_REQUEST['month'])) { $month_display = $_REQUEST['month']; } else { $month_display = date ('n'); } echo draw_calendar($month_display,$year); 这是对正在发生的事情的一个很好的描述： 它应该是什么样子： 第一次点击： js插入了什么php返回的内容（这部分看似正确）： 我更喜欢在查询字符串中包含所有参数，这将允许用户为网址添加书签或通过电子邮件发送。 phpjavascriptajax 4 2 回答 2 This answer is useful 1 您没有在任何地方

| '.implode(' | ',$headings).' |
| '.(($days_last_month -($running_day - 1)) + $x).''; $calendar.= str_repeat('',2); $calendar.= ' | '; // THIS IS WHERE I NEED TO QUERY ENTRIES PER DAY $calendar.= str_repeat('',2); $calendar.= ' |
| '.$x.''; $calendar.= str_repeat('',2); $calendar.= ' |

添加标签。 在您的 php 中，替换此行： $calendar= ''; 和： $calendar= '

| '.implode(' | ',$headings).' |

'; 而这一行： return $calendar; 和： return $calendar . '

| '.implode(' | ',$headings).' |

'; 于 2013-02-15T15:45:53.497 回答 This answer is useful 1 document.getElementById("calendar").innerHTML= xmlhttp.responseText; 您正在将表行插入 a div，而不是 a table。添加缺少的表格标签或将数据附加到表格中。 NITPICKS - 您有“标题单元格”，但您不使用 th 元素。您没有使用 thead 和 tbody。 于 2013-02-15T15:46:52.290 回答 Related 0 jqgrid - JqG rid-使用原始排序在本地重新加载 2 javascript - Javascript html5 canvas 随机切换语句 0 ruby-on-rails-3 - 运行 cap deploy 时出错：cold 2 algorithm - 优化/改进 Haskell 代码以列出子序列频率 3 objective-c - 如何在“UILabel”中仅显示随机“填充”的文本字段？ 1 symfony - sylius_sales.classes 下无法识别的选项项 1 mysql - MySQL 文本类型并使用更大的尺寸。它有效率吗？ 1 python - 在 python 中侦听 UDP 数据包时遇到问题 - socket.error: [Errno 24] 打开的文件太多 2 sql - 获取最后插入的 id 2 c# - 在表单中输入的数据不会插入到数据表中 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：14897980
> 
> 赞同：-2
> 
> 时间：
> 
> 标签：php, javascript, ajax

这很奇怪，也很复杂，我会尽力解释它。我手工制作日历，计划开源等等。我目前正在寻找谷歌日历的外观和感觉，因为它们似乎是最好的，但我确实计划升级它+开源。一切都在完美运行，除非我单击上个月，以查看上个月，然后运行 ​​ajax 查询，php 返回新日历，但是当它呈现时，它呈现没有**任何** `<table>`元素，除了没有遇到任何障碍想法？继承人一些代码/图像：

html:

```
//function to use xml
function xml(){
 //need to set up xml to run php for query
   if (window.XMLHttpRequest)
   {// code for IE7+, Firefox, Chrome, Opera, Safari
    xmlhttp = new XMLHttpRequest();
   }
   else
   {// code for IE6, IE5
    xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
   }
   xmlhttp.onreadystatechange = function()
   {
    if (xmlhttp.readyState == 4 && xmlhttp.status == 200)
    {
     document.getElementById("calendar").innerHTML= xmlhttp.responseText;
    }
  };
}

//function to select the previous month
function previousMonth(str){
//since this is the previous month we need to take month -1
var month = str - 1;
 //if it is already 1.. then it needs to be 12!
  if(str == 1)
  {
   month = 12;
  }
   //call xml
   xml()
   //send dat query
   xmlhttp.open("GET","redraw.php?month="+encodeURIComponent(month),true);
   xmlhttp.send();
} 
```

重绘.php：

```
// draws the calendar 
function draw_calendar($month,$year){
  // table headings 
  $headings = array('Sunday','Monday','Tuesday','Wednesday','Thursday','Friday','Saturday');
  $calendar= '<tr class="calendar-row"><td class="calendar-day-head" id = "cell" style = "min-width:150px;">'.implode('</td><td class="calendar-day-head">',$headings).'</td></tr>';

  // days and weeks vars now 
  $days_last_month = date('t',mktime(0,0,0,$month-1,1,$year));
  $running_day = date('w',mktime(0,0,0,$month,1,$year));
  $days_in_month = date('t',mktime(0,0,0,$month,1,$year));
  $days_in_this_week = 1;
  $day_counter = 0;
  $dates_array = array();
  $today = date("d");

  // row for week one 
  $calendar.= '<tr class="calendar-row">';

  // print "blank" days until the first of the current week 
  for($x = 0; $x < $running_day; $x++)
  {
    $calendar.= '<td class = "calendar-day-prev" id = "cell" style = "min-width:150px;"><div class = "day-prev-    number" style = "color:#929D9D">'.(($days_last_month -($running_day - 1)) + $x).'</div>';
    $calendar.= str_repeat('<p>&nbsp;</p>',2);
    $calendar.= '</td>';
    $days_in_this_week++;
  }

  // keep going with days....
  for($list_day = 1; $list_day <= $days_in_month; $list_day++)
  {
   $calendar.= '<td class = "calendar-day" id = "cell" style = "  min-width:150px;"';
  //if the day is today we obviously need to have a differnet style for it... 
    if($list_day == $today)
    {
     $calendar.= ' style = "background-color:#9494B8;font-weight:bol;">';
    }
    else
    {
     $calendar.= '>';
    }

      // add in the day number 
      $calendar.= '<div class = "day-number">'.$list_day.'</div>';

      // THIS IS WHERE I NEED TO QUERY ENTRIES PER DAY
      $calendar.= str_repeat('<p>&nbsp;</p>',2);

    $calendar.= '</td>';
    if($running_day == 6)
    {
      $calendar.= '</tr>';
      if(($day_counter+1) != $days_in_month)
      {
        $calendar.= '<tr class="calendar-row">';
      }
      $running_day = -1;
      $days_in_this_week = 0;
    }
    $days_in_this_week++; $running_day++; $day_counter++;
  }

  // finish the rest of the days in the week 
  if($days_in_this_week < 8 && $days_in_this_week != 1)
  {
    for($x = 1; $x <= (8 - $days_in_this_week); $x++)
    {
      $calendar.= '<td class = "calendar-day-after" id = "cell" style = "  min-width:150px;"><div class = "day-post-number" style = "color:#929D9D;">'.$x.'</div>';
      $calendar.= str_repeat('<p>&nbsp;</p>',2); 
      $calendar.= '</td>';
    }
  };

  // final row 
  $calendar.= '</tr>';

  // all done, return result 
  return $calendar;

}

//draw the calendar
$year = date ('Y');
$month_title = date ('F');

//Sent variables
if(!empty($_REQUEST['month']))
{
  $month_display = $_REQUEST['month'];
}
else
{
  $month_display = date ('n');
}
echo draw_calendar($month_display,$year); 
```

这是对正在发生的事情的一个很好的描述：

它应该是什么样子： ![开始](../Images/cb6abe191cc15a5df53853cae98a9111.png)

第一次点击： ![点击](../Images/ca795f3c865693cbb911eda778eabc68.png)

js插入了什么`<div id = "calendar">` ![有点工作](../Images/4b6add5f6c871c5466c4a94915b899c9.png)

php返回的内容（这部分看似正确）： ![坏的](../Images/f599f8fbb7e9fff0eb0bbdbb2eb355fa.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T15:45:53.497

您没有*在任何地方*`<table>`添加标签。

 *在您的 php 中，替换此行：

```
$calendar= '<tr class="calendar-row"><td class="calendar-day-head" id = "cell" style = "min-width:150px;">'.implode('</td><td class="calendar-day-head">',$headings).'</td></tr>'; 
```

和：

```
$calendar= '<table><tr class="calendar-row"><td class="calendar-day-head" id = "cell" style = "min-width:150px;">'.implode('</td><td class="calendar-day-head">',$headings).'</td></tr>'; 
```

而这一行：

```
return $calendar; 
```

和：

```
return $calendar . '</table>'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T15:46:52.290

```
document.getElementById("calendar").innerHTML= xmlhttp.responseText; 
```

您正在将表行插入 a `div`，而不是 a `table`。添加缺少的表格标签或将数据附加到表格中。

NITPICKS - 您有“标题单元格”，但您不使用 th 元素。您没有使用 thead 和 tbody。*

# monodevelop - 如何在 windows 上的 Monodevelop 中启用 vi 模式

> ID：14897987
> 
> 赞同：18
> 
> 时间：2013-02-15T15:32:19.627
> 
> 标签：monodevelop, vi

找了一会，找到了vi模式，但是不知道怎么在ModeDevelop中启用（从Unity打开）。

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2013-06-06T01:02:51.980

对于仍在寻找答案的人，您可以使用以下菜单选项启用 vi 模式

`Edit`→ `Preferences`→ `Text Editor`→ `Behavior`→`Navigation (use vi modes)`

旧版本可能已使用

`Tools`→ `Options`→ `Text Editor`→ `Behavior`→`Navigation (use vi modes)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-11T17:40:51.350

Mac 用户菜单项是：MonoDevelop-Unity / Preferences (or Command-;) Text Editor / Behavior Navigation : User Vi 模式

# directx - HLSL 中的多个光源

> ID：14897990
> 
> 赞同：2
> 
> 时间：2013-02-15T15:32:23.053
> 
> 标签：directx, hlsl

我正在学习着色器编程。我已经掌握了一些基础知识，但是具有不同类型的多个光源具有挑战性。我需要为每种灯光类型使用单个渲染通道还是多个通道？或者，如果两者都有正当理由，那么每个用例是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T12:57:57.587

如果您使用前向渲染，则无需为每种灯光类型使用单独的通道。您将为同一着色器中的所有灯光执行照明。如果您使用延迟渲染，那么您将在单独的通道中渲染每种灯光类型。

# java - 创建动态简单 3d 模型并在 Web 浏览器中更新

> ID：14897993
> 
> 赞同：0
> 
> 时间：2013-02-15T15:32:29.577
> 
> 标签：java, php, javascript, flash, actionscript

我目前有一个拥有许多用户的网站，在它的一个页面上，我需要在 3d 模型中创建数据的视觉表示。这个 3d 模型应该很容易更新，具体取决于从数据库为该特定用户提供的数据。（例如，它将是一个方板，上面有一个球，球的位置是根据数据库中给出的数据确定的）。

我目前对使用哪种技术/语言来简化这项任务感到困惑。

我曾考虑过使用 Java、JavaScript 和 flash（actionscript？）。

以上哪一项应该最容易实现，或者如果您知道上面列表中的内容以外的内容，请也提出建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T15:37:13.227

你可以使用 WebGL，但你需要一个支持它的浏览器。还有一些可以帮助您的库，例如[three.js](http://mrdoob.github.com/three.js/)，看看演示。

当然，如果需要支持更大的浏览器集合，目前最好的解决方案是 Flash；它有一套很好的 3D API，而且——即使它主要用于游戏——也受到[Unity](http://unity3d.com/)的支持。

# hibernate - 双向 OneToMany 错误：为什么 Hibernate 认为我正在使用复合键？

> ID：14897995
> 
> 赞同：-1
> 
> 时间：2013-02-15T15:32:36.207
> 
> 标签：hibernate, jpa, composite, one-to-many

我收到了这个臭名昭著的错误：

> 外键 (FK69848D5097EB6FB4:DOCUMENT_HISTORY [VOTERDOC_ID]) 的列数必须与引用的主键 (VOTER_DOCUMENT [VOTER_ID,ID]) 的列数相同

但我没有使用复合键。我已经确认在数据库中，所涉及的两个表的 PK 都是 id 字段，即 VARCHAR。这是我的实体：

```
@Entity
@Cache(usage = CacheConcurrencyStrategy.READ_ONLY)
@Table(name = "VOTER_DOCUMENT")
public class VoterDocument {

  @Id
  @Column(length = 45, name = "ID")
  @GeneratedValue(generator = "system-uuid")
  @GenericGenerator(name = "system-uuid", strategy = "uuid")
  private String id;

  @ManyToOne(fetch = FetchType.LAZY)
  @JoinColumn(name = "DOCTYPE_ID", nullable = false)
  private DocumentType documentType;

  @ManyToOne(fetch = FetchType.LAZY)
  @JoinColumn(name = "VOTER_ID", referencedColumnName = "ID", nullable = false)
  private Voter voter;

  @OneToMany(mappedBy = "voterDocument", fetch = FetchType.EAGER)
  private final List<DocumentHistory> history =
    new ArrayList<DocumentHistory>();

  @OneToMany(mappedBy = "voterDocument", fetch = FetchType.EAGER)
  private final List<VoterFile> files = new ArrayList<VoterFile>();

@Entity
@Cache(usage = CacheConcurrencyStrategy.READ_ONLY)
@Table(name = "DOCUMENT_HISTORY")
public class DocumentHistory {

  @Id
  @Column(length = 45, name = "ID")
  @GeneratedValue(generator = "system-uuid")
  @GenericGenerator(name = "system-uuid", strategy = "uuid")
  private String id;

  @ManyToOne(fetch = FetchType.LAZY)
  @JoinColumn(name = "VOTERDOC_ID", referencedColumnName = "ID", nullable = false)
  private VoterDocument voterDocument; 
```

这似乎是一个简单的 OneToMany 映射，但它不起作用。但它并没有以最奇怪的方式工作，告诉我 VoterDocument 有一个复合主键，但事实并非如此。

可能是什么问题呢？

* ***更新**：我编辑了我的原始帖子以包括整个班级，除了 getter 和 setter（没有标记或注释）。

奇怪的是，问题似乎消失了。我只是注释掉了注释（在这个类和其他类中），错误就消失了。然后我取消评论评论，它的工作原理！

我认为这里有一些普遍的时髦，不知道为什么。

现在又出现了另一个错误，同样荒谬。用一个简单的表：

```
 @Entity
  @Cache(usage = CacheConcurrencyStrategy.READ_ONLY)
  @Table(name = "ACTIVE_ELECTION")
  public class ActiveElectionForCounty {

  @Id
  @ManyToOne(fetch = FetchType.LAZY)
  @JoinColumn(name = "COUNTY_ID")
  private County county;

  @ManyToOne(fetch = FetchType.LAZY, optional = false)
  @JoinColumn(name = "ELECTION_EVENT_ID")
  private ElectionEvent electionEvent; 
```

该表的 PK 是`COUNTY_ID`County 表中的字段。我得到的错误是：

> MappingException：复合 id 类必须实现 Serializable：ActiveElectionForCounty

再次使用复合键！但是该表没有复合键！最后一个也没有！它的PK是县FK。我不明白为什么 Hibernate 会抱怨。不幸的是，这一次简单地注释和取消注释注释并不能解决任何问题，这当然是正常的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T08:54:08.607

不知道为什么这有效，但......

我让我的类实现了 Serializable，添加了一个生成的私有静态 final long serialVersionUID，现在它可以工作了。

仍然不明白为什么..或者为什么 Hibernate 认为我正在使用复合键...

# android - Andengine 振动器问题

> ID：14897998
> 
> 赞同：0
> 
> 时间：2013-02-15T15:32:52.990
> 
> 标签：android, andengine

我在我的游戏中使用 Andengine。我面临的问题是，当我的应用程序进入后台时，屏幕会在恢复时显示为空白。当我包含时会发生这种情况

```
@Override
public void onGameCreated() {
    this.mEngine.enableVibrator(this);
} 
```

在 BaseGameActivity 扩展类中。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T17:59:09.837

想通了，或者我认为。我没有在 onGameCreated() 中初始化振动器，而是在 Resume() 中进行了初始化，并且它可以工作。

```
 @Override
protected synchronized void onResume() {
    this.mEngine.enableVibrator(this);
    super.onResume();
} 
```