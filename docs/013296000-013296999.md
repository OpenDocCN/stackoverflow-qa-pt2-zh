# StackOverflow 问答 13296000-13296999

# gridview - Extjs 在 store.save 之后保持网格滚动位置

> ID：13296000
> 
> 赞同：2
> 
> 时间：2012-11-08T19:07:48.787
> 
> 标签：gridview, extjs, scroll

我在 a 中有一个操作列，`grid.Panel`它更改字段值并保存存储数据。`top:0`但是每次`store.save`调用网格滚动位置都会返回。

示例代码：

```
Ext.define('SF.view.Myview.List' , {
    extend: 'Ext.grid.Panel',
    viewConfig: {
        preserveScrollOnRefresh: true,
    },

    store: 'Contents',

    initComponent: function() {

        this.columns = [
            { xtype: 'actioncolumn',
            header: 'Action'
            , width: 60
            , items: [{ // change status button
                icon: 'http://whatisextjs.com/BAHO/icons/cancel.png'
                , handler: function(grid, rowIndex, colindex) {
                    var record = grid.getStore().getAt(rowIndex);
                    record.set('status',6);
                    grid.store.save();

                } 
            }, 
```

我已经尝试了该`preserveScrollOnRefresh`属性但没有成功。此属性适用于分页和工具栏按钮，但不适用于`store.refresh/load`事件。

是否可以在不丢失滚动位置的情况下保存数据并刷新行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T13:16:57.867

是的，调用记录的保存方法：

```
var record = grid.getStore().getAt(rowIndex);
record.set('status',6);
record.save(); 
```

网格中的数据也将更新。

# c - 如果在 C 结构中定义

> ID：13296003
> 
> 赞同：0
> 
> 时间：2012-11-08T19:07:58.417
> 
> 标签：c

如果定义（XX）可以放在**头文件**的结构/联合中吗？

```
struct
{
 int i;
 #if defined(xx)
 int j;
 #endif
}t; 
```

我正在处理 .c 和 .h 文件的大型文件库，我需要知道这种用法的可能缺点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T19:10:07.900

虽然完全有效，但使用它的一个明确的缺点是任何时候你需要使用`t.j`你也必须用你的包围它，`#if defined(xx)`否则你会调用编译器错误

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T19:11:09.553

你当然可以。预处理器可以用于任何事情，无需喂它 C。这种用法的缺点是，你有一个结构，它会根据是否定义 xx 来改变大小。这是自找麻烦，因为使用此定义构建的库和使用此库而没有定义的人具有不同的结构......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-08T19:13:19.330

预处理器指令如`#if`可以放置在程序中的任何位置。它们与文本中出现的 C 代码（或其他任何东西）（注释除外）没有实际关系，因为它们是在编译阶段之前处理的。您可以像下面的代码那样做一些愚蠢的事情，尽管这通常是一个坏主意。

```
int foo(int x)
{
#if defined MONKEY
    return 0;
}

int bar(int x)
{
#endif
    return x;
} 
```

# c# - 如何去除动态控制值？

> ID：13296010
> 
> 赞同：1
> 
> 时间：2012-11-08T19:08:17.153
> 
> 标签：c#, .net, vb.net, visual-studio, webforms

请看下面的代码：

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
</head>
<body>
    <form id="form1" runat="server">
    <div id="Div1" runat="server" />
    <asp:Button ID="Button1" runat="server" Text="Create a TextBox" />
    <asp:Button ID="Button2" runat="server" Text="Erase TextBox Text" />
    </form>
</body>
</html>
..........................................
protected void Page_Load(object sender, EventArgs e)
    {
        if (IsPostBack)
        {
            if (Request.Params.ToString().IndexOf("Button1") > 0)
            {
                CreateTextBox();
            }
            else
            {
                if (Request.Params.ToString().IndexOf("Button2") > 0)
                {
                    TextBox txtbx = CreateTextBox();
                    txtbx.Text = "";
                }
            }
        }        
    }

    TextBox CreateTextBox()
    {
        TextBox txtbx = new TextBox();
        Div1.Controls.Add(txtbx);

        return txtbx;
    } 
```

在 PostBack 上，我检查是否按下了“Button1”或“Button2”。

我按下**Button1**并动态创建一个 TextBox。
我在 TextBox 中输入了一些文本，然后再次按 Button1。重新创建了 TextBox，并且我输入的文本保留在 PostBack 上。

当我按下**Button2**时，我想重新创建 TextBox，但我想删除我之前输入的文本。但即使我指定*了 txtbx.Text = ""*文本仍然在 PostBack 之后保留。

如何重新创建 TextBox 但删除输入的文本？
*（如果我按下 Button1，我希望保留文本，但如果我按下 Button2 则不保留）*

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T19:40:05.963

在 上`page load`，您的上下文尚未恢复。如果要覆盖控件的状态值，请处理`Click`每个按钮的事件并相应地执行逻辑。

# ruby-on-rails - 在rails 3中加入两个表

> ID：13296013
> 
> 赞同：2
> 
> 时间：2012-11-08T19:08:20.453
> 
> 标签：ruby-on-rails

我在加入两个表时遇到问题，我很困惑，所以我做了一个新项目作为这个例子： http: [//guides.rubyonrails.org/association_basics.html#the-has_many-association](http://guides.rubyonrails.org/association_basics.html#the-has_many-association)我有两个表客户和订单。

我的模型

```
class Customer < ActiveRecord::Base
  has_many :orders
  attr_accessible :id, :name
end

class Order < ActiveRecord::Base
  belongs_to :customer
  attr_accessible :id, :count, :customer_id
end 
```

在迁移订单表中，我参考了通过以下方式实现的客户表：

```
t.references :customer 
```

我用一些示例数据填充表并运行这个正在工作的 sql 查询。

```
select * from customers inner join orders on customers.id = orders.customer_id; 
```

比我打开 rails 控制台并运行这个查询：

```
Customer.joins(:orders) 
```

这给了我只有客户的结果，但我希望合并两个模型和适当的结果。当我跑步时

```
Order.joins(:customer) 
```

它只返回我的订单结果。

是否有检索两个模型的合并结果的选项？感谢您的建议:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T19:21:33.347

要访问客户的订单，请执行以下操作：

```
customers = Customer.joins(:orders)
customers.each do |customer|
  customer.orders #<= contains orders for this customer
end 
```

另一种方式 ：

```
orders = Order.joins(:customer)
orders.each do |order|
  order.customer #<= contains the customer
end 
```

请注意，使用`joins`, 您正在执行内部连接，因此排除没有订单的客户......如果您想包含他们，请`includes(:orders)`改用

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T19:48:29.180

要在查询中包含相关表，请使用 :includes

```
Customer.includes(:orders) 
```

要仅在查询条件中使用相关表，请使用 :joins

```
Customer.joins(:order).where(:unpaid => true) 
```

但是您还有另一个问题，即使您在控制台中使用 do 'Customer.includes(:orders)'，它仍然只会向您显示客户，因为这是主要呼叫。但是，无需额外调用即可获得数据以获取订单信息。在使用“includes”和“joins”渲染视图后检查日志，您会看到调用次数的差异。

假设您在控制器中进行不同的调用并将以下内容放在您的视图中。

```
<% @orders.each do |o| %>
  <%= customer.order.details %> 
```

# git - git/github 从合并的拉取请求创建反向补丁

> ID：13296018
> 
> 赞同：2
> 
> 时间：2012-11-08T19:08:54.713
> 
> 标签：git, github

情况：我们有几个已合并的 github 拉取请求，其中包含需要回滚的代码。穿插在这些合并中的是其他需要保留的内容。我知道我们可以回滚到第一次糟糕的合并和之后的樱桃选择更改之前，但我希望我们可以避免这种麻烦。是否可以基于两个错误的拉取请求创建某种反向补丁并将这些补丁应用到新分支，以便我们可以封装错误的更改并在问题修复后恢复它们？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T19:16:10.897

可以用 反转补丁`git revert`。

另请参阅[在 Git 中重新执行还原合并](https://stackoverflow.com/questions/1078146/re-doing-a-reverted-merge-in-git)。

# c# - 虽然想做一个 SIFTDetector 的实例：Get an Attempted to read or write protected memory exception Error

> ID：13296020
> 
> 赞同：1
> 
> 时间：2012-11-08T19:09:01.473
> 
> 标签：c#, .net, c#-4.0, opencv, emgucv

我正在尝试使用 sift 算法通过使用 opencv 库在 c# 中制作关键点和描述符。

```
 fileAddress = dlg.FileName;
     cap = new Emgu.CV.Capture(dlg.FileName);
     cap.SetCaptureProperty(Emgu.CV.CvEnum.CAP_PROP.CV_CAP_PROP_POS_FRAMES, 3945);
     imGray = cap.QueryGrayFrame();
     Emgu.CV.Features2D.SIFTDetector siftDet = new Emgu.CV.Features2D.SIFTDetector();
     siftDet.DetectKeyPoints(imGray);
     MessageBox.Show("test SIFT"); 
```

但是当它通过**Emgu.CV.Features2D.SIFTDetector siftDet = new Emgu.CV.Features2D.SIFTDetector();** 我面临错误：

![在此处输入图像描述](../Images/b370611189dd5a371d0885752559748b.png)

并查看详情如下：

![在此处输入图像描述](../Images/873785d19b4d53b9deca76a5a61151fa.png)

我该如何解决这个异常？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T23:10:40.773

我使用的 openCv 是 2.1 版，然后我将 opencv*.* 和 *.dll 文件升级到了 2.4 版。问题解决了。

我找不到任何解释，如果有人能给我一个直观的答案，那就太棒了。

现在，如果您在使用 SIFT 时遇到此类问题，请尝试最新版本。

# android - Cocos2d-x 中的警报视图等价物

> ID：13296021
> 
> 赞同：3
> 
> 时间：2012-11-08T19:09:03.140
> 
> 标签：android, view, uialertview, alert, cocos2d-x

我已经浏览了整个网络，但似乎找不到任何东西。我试过 CCMessageBox，但它没有提供任何按钮。我只需要自己做吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-09T04:23:01.570

为了开发游戏，我正在使用 cocos2d-x，我认为现在没有内置的警报视图。你必须自己做。

# ember.js - 我的计算值停止使用最新版本的 ember-data.js

> ID：13296022
> 
> 赞同：1
> 
> 时间：2012-11-08T19:09:10.503
> 
> 标签：ember.js, ember-data

更改模型的属性时出现以下错误。

```
Uncaught Error: <DS.StateManager:ember466> could not respond to event setProperty in state rootState.loading. 
```

这是代码。[http://jsfiddle.net/arenoir/JejwD/](http://jsfiddle.net/arenoir/JejwD/) http://jsfiddle.net/arenoir/JejwD/show

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-08T19:39:39.287

自 ember-data 修订版 6（请参阅[重大更改](https://github.com/emberjs/data/blob/master/BREAKING_CHANGES.md)）以来，ID 是字符串标准化的。因此，您需要更新您的固定装置以使用字符串作为 ID（注意：REST 适配器将转换数字/字符串，但固定装置适配器不进行任何转换）。

对您的固定装置进行以下更改似乎可以使您的示例正常工作：

```
App.Address.FIXTURES = [
    {id: '1', streetnumber: '1018', streetname: '4th Ave', city: 'Oakland', state: 'Ca'} 
];

App.Job.FIXTURES = [
    {id: '1', address_id: '1', customer_id: '1', name: 'bathroom addition', rate: "310", hours: "1000"}
];

App.Customer.FIXTURES = [
    {id: '1', firstname: 'Mike', lastname: 'Smith', jobs: ['1']}
]; 
```

见[http://jsfiddle.net/dgeb/GVU7n/](http://jsfiddle.net/dgeb/GVU7n/)

# java - 带有 Spring Data 的 MongoDB - 信号量不足以获取数据库连接

> ID：13296026
> 
> 赞同：0
> 
> 时间：2012-11-08T19:09:34.470
> 
> 标签：java, mongodb, spring-data-mongodb

> ` org.springframework.data.mongodb.UncategorizedMongoDbException: Out of semaphores to get db connection; 嵌套异常是 com.mongodb.DBPortPool$ SemaphoresOut: Out of semaphores to get db connection at org.springframework.data.mongodb.core.MongoExceptionTranslator.translateExceptionIfPossible(MongoExceptionTranslator.java:70) at org.springframework.data.mongodb.core。 MongoTemplate.potentiallyConvertRuntimeException(MongoTemplate.java:1538) at org.springframework.data.mongodb.core.MongoTemplate.execute(MongoTemplate.java:370) at org.springframework.data.mongodb.core.MongoTemplate.insertDBObject(MongoTemplate.java: 730) 在 org.springframework.data.mongodb.core.MongoTemplate.doInsert(MongoTemplate.java:633) 在 org.springframework.data.mongodb.core.MongoTemplate.insert(MongoTemplate.

有什么办法解决这个问题？`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T19:28:40.267

你没有正确关闭连接。要么在插入调用周围的 try/finally 中关闭它，要么如果您的连接被注入，请确保它的范围限定为请求，并在该范围结束时关闭它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T21:48:16.663

你看过这个[问题](https://stackoverflow.com/questions/11081450/error-using-mongodb-with-java)吗？有一个增加连接的配置选项，[在此处](http://api.mongodb.org/java/2.4/com/mongodb/MongoOptions.html#connectionsPerHost)描述。

另外，我建议阅读[此问题](https://stackoverflow.com/questions/6520439/how-to-configure-mongodb-java-driver-mongooptions-for-production-use)以了解如何正确配置它。

从最后一个问题链接：

> **线程AllowedToBlockForConnectionMultiplier**。如果池当前已用尽，则允许等待连接变为可用的线程数。这是将导致“com.mongodb.DBPortPool$SemaphoresOut: Out of semaphores to get db connection”异常的设置。一旦此线程队列超过threadsAllowedToBlockForConnectionMultiplier 值，它将抛出此异常。
> 
> 如果您预计可能会导致大型队列的吞吐量峰值会暂时增加此值。正是出于这个原因，我们目前的价格为 1500。如果您的查询负载始终超过服务器，您应该相应地改善您的硬件/扩展情况。

# arrays - Powershell数组未清除

> ID：13296031
> 
> 赞同：6
> 
> 时间：2012-11-08T19:09:38.987
> 
> 标签：arrays, powershell

我的源代码：

```
# $arr = @(); results in same behaviour
$arr = New-Object System.Collections.ArrayList;

$arr.Count;
$arr += "z";

$arr.Count;
$arr.Clear();
$arr.Count; 
```

输出：

> 0
> 1
> 1

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-11-08T19:41:32.427

当您这样做时，Powershell 会执行一些数组转换技巧`+=`，因此简单的解决方案是`$arr.Add("z")`. 然后`$arr.Clear()`会像你期望的那样行事。

澄清：

1.  `@()`是一个 Powershell 数组。它使用`+=`，但你不能`Clear`。（但是，您可以`$arr = @()`再次将其重置为空数组。）
2.  `ArrayList`是.NET 集合。它使用`.Add`，并且您可以使用`Clear`它，但是出于某种原因，如果您使用`+=`它，Powershell 会执行一些奇怪的数组强制。（如果有专家愿意对此发表评论，那就太棒了。）

# ruby - 使 Ruby 控制台执行更加冗长

> ID：13296034
> 
> 赞同：3
> 
> 时间：2012-11-08T19:10:00.657
> 
> 标签：ruby, debugging, verbose

当我在控制台中时，我想观察我的 ruby​​ 代码的执行流程。例如，如果我有这个：

```
def process
  hash = {a:1,b:2}
  hash.values.map!{|e| e+1}
end 
```

当我输入以下内容时，我想在控制台中看到类似的内容`process`：

```
hash = {a:1,b:2}
=> {:a=>1, :b=>2}
hash.values.map!{|e| e+1}
=> [2, 3] 
```

有没有一种有用的方法来做这样的事情？

`$VERBOSE`似乎没有做任何事情，而且`$DEBUG`似乎相反过于冗长。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-08T19:22:53.017

您在谈论“跟踪”功能。

一些语言，如 shell 和 good-ol' GWBasic，有一个标志来显示它们当前正在执行的行。Ruby 的`$DEBUG`输出可能会使您充满信息过载，而不是来自您的代码，而是来自任何寻找它并转储其当前状态或打开其跟踪的 gem。

许多人在他们的代码中撒上一些代码，`puts`以便在他们的开发/测试过程中显示他们所处的位置。如果您这样做，我建议您将其编写为一种限制输出并让您轻松打开/关闭它的方法。此外，使用标志来检查您是否要调试。您甚至可能希望使用 OptionParser 让您创建一个`--debug`标志以在命令行上传递。使用方法的另一个很好的副作用是很容易将输出重定向到一个文件，`tail`并在输出发生时观察它，然后用于分类。

另一种选择是将代码加载到调试器中并告诉它进行跟踪。你会看到代码的每一步，非常冗长，但细节很好。您还可以告诉它运行到某些点，以便您可以戳代码并四处挖掘，如果需要，可以放入 IRB。

就我个人而言，我是老派并且对汇编语言有所了解，我对调试器很满意，所以我经常使用 Ruby。告诉它运行到某个位置并停止很容易，或者您可以嵌入`include 'debugger'; debugger`到您的代码中，它会在该点停止。一旦到了那里，就可以看到发生了什么，然后`c`继续，让程序运行，直到它`debugger`再次命中语句。我发现调试器非常强大，并且在我想知道发生了什么的时候是一个很好的选择性放大镜。

“ [Ruby 中的调试](http://rubyrogues.com/debugging-in-ruby/)” 有很多不错的技巧，您可能会发现它们也很有用。

* * *

编辑：

我喜欢 Alex D 建议研究 Ruby 的`set_trace_func`. 我没有使用过它（坦率地说，我忘了它），但这是在应用程序中设置良好跟踪的好方法。使用一些代码，您可以设置打开/关闭它并有选择地输出给定的特定类或条件，因为您可以控制`proc`被调用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-08T19:25:20.527

一种选择是使用`set_trace_func`(http://apidock.com/ruby/Kernel/set_trace_func) 设置一个挂钩，该挂钩将在执行时打印出每一行。请注意，大量有关`irb`.

另一种选择是深入研究源代码`irb`并添加一个选项以在执行每一行时打印它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-08T19:24:25.993

你试过[撬宝石](https://github.com/pry/pry)吗？放入`require 'pry'; binding.pry`您的代码并运行您的脚本。您将在放置它的地方有一个 ruby​​ 控制台。也许这就是你正在寻找的。

否则你应该看看一个 ruby​​ 调试器。

# google-apps-script - 为什么 close() 什么都不做？

> ID：13296036
> 
> 赞同：0
> 
> 时间：2012-11-08T19:10:05.773
> 
> 标签：google-apps-script

app.close() 不做任何事情吗？它似乎不起作用.... // Script-as-app 模板。示例代码

```
function doGet() {
  var app = UiApp.createApplication();

  var button = app.createButton('Click Me');
  var closeButton = app.createButton('Close It');
  app.add(closeButton);
  app.add(button);

  var label = app.createLabel('The button was clicked.')
                 .setId('statusLabel')
                 .setVisible(false);

  var label2 = app.createLabel('The Close button was clicked.')
                 .setId('statusLabel2')
                 .setVisible(false);
  app.add(label);
  app.add(label2);
  var closeHandler = app.createServerHandler('close');
  closeHandler.addCallbackElement(label);
  var handler = app.createServerHandler('myClickHandler');
  handler.addCallbackElement(label);
  closeButton.addClickHandler(closeHandler);
  button.addClickHandler(handler);

  return app;
}

function myClickHandler(e) {
  var app = UiApp.getActiveApplication();

  var label = app.getElementById('statusLabel');
  label.setVisible(true);

  app.close();
  return app;
}
function close(e)
{
  Logger.log("Here");
  var app = UiApp.getActiveApplication();
  var label2 = app.getElementById('statusLabel2');
  label2.setVisible(true);
  return app.close();
} 
```

链接到示例代码 [https://script.google.com/a/macros/scotts.com/s/AKfycbz-avIT3bZNJ68_EpRZYXmh66XLJzYI--F0n7DGNn8jL_wlG1k/exec](https://script.google.com/a/macros/scotts.com/s/AKfycbz-avIT3bZNJ68_EpRZYXmh66XLJzYI--F0n7DGNn8jL_wlG1k/exec)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T19:17:46.530

如此[处所述](https://developers.google.com/apps-script/class_uiinstance#close)：

> “这只有在应用程序显示为对话框时才有效，例如在 Google 电子表格中。在作为独立服务发布的应用程序上调用时，它不会产生任何影响。”

顺便说一句，这是浏览器的一个基本限制——页面不能自行关闭。

# linq - LINQ 查询不会“看到”数组中的值

> ID：13296038
> 
> 赞同：1
> 
> 时间：2012-11-08T19:10:11.113
> 
> 标签：linq

这是我的查询

```
 var traj_of_user_2=
        from num in trajectoryArray
        where num.ID_User == 2
        select num.ID_Traj; 
```

当我运行程序时，出现异常（见图）

你的意见是什么？我的一个朋友告诉我，由于数组是“懒惰的”，所以没有实例

![在此处输入图像描述](../Images/0c9526612a57b55695ac971aff6f4cae.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T19:16:38.860

数组中有一个`null`，并且`num.ID_User`失败了。您可以像这样过滤掉空值：

```
var traj_of_user_2=
    from num in trajectoryArray
    where num != null &&
          num.ID_User == 2
    select num.ID_Traj; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T19:16:42.293

只有`ID_User`当`num != null`

```
 var traj_of_user_2=
        from num in trajectoryArray
        where (num != null && num.ID_User == 2)
        select num.ID_Traj; 
```

# java - 在后台运行服务器套接字代码，然后运行客户端代码

> ID：13296047
> 
> 赞同：1
> 
> 时间：2012-11-08T19:10:50.333
> 
> 标签：java, swing, background

将两个文件（客户端和服务器）中的代码合并为一个后，控件不再到达客户端代码。但是，我需要在后台运行服务器代码，然后运行我的客户端代码。

这是我的代码：

```
 //Server code 

 try {
        ServerSocket serverSocket = null; 

    try { 
         serverSocket = new ServerSocket(10007); 
        } 
    catch (IOException e) 
        { 
         System.err.println("Could not listen on port: 10007."); 
         System.exit(1); 
        } 

    Socket clientSocket = null; 
    System.out.println ("Waiting for connection.....");

    try { 
         clientSocket = serverSocket.accept(); 
        } 
    catch (IOException e) 
        { 
         System.err.println("Accept failed."); 
         System.exit(1); 
        } 

    System.out.println ("Connection successful");
    System.out.println ("Waiting for input.....");

    PrintWriter out = new PrintWriter(clientSocket.getOutputStream(), 
                                      true); 
    BufferedReader in = new BufferedReader( 
            new InputStreamReader( clientSocket.getInputStream())); 

    String inputLine; 

    while ((inputLine = in.readLine()) != null) 
        { 
         System.out.println ("Server: " + inputLine); 
         out.println(inputLine); 

         if (inputLine.equals("Bye.")) 
             break; 
        } 

    out.close(); 
    in.close(); 
    clientSocket.close(); 
    serverSocket.close(); 

  //Client code 
        String serverHostname = new String ("127.0.0.1");
        System.out.println ("Attemping to connect to host " +
                serverHostname + " on port 10007.");
        Socket echoSocket = null;
        try {
            echoSocket = new Socket(serverHostname, 10007);
            out = new PrintWriter(echoSocket.getOutputStream(), true);
            in = new BufferedReader(new InputStreamReader(
                                        echoSocket.getInputStream()));
        } catch (UnknownHostException e) {
            System.err.println("Don't know about host: " + serverHostname);               
        } catch (IOException e) {
            System.err.println("Couldn't get I/O for "
                               + "the connection to: " + serverHostname);              
        }

        BufferedReader stdIn = new BufferedReader(
                                   new InputStreamReader(System.in));
        String userInput;

        System.out.print ("input: ");           
            while ((userInput = stdIn.readLine()) != null) {
                out.println(userInput);
                System.out.println("echo: " + in.readLine());
                System.out.print ("input: ");
            }
        out.close();
        try {
            in.close();           
            stdIn.close();           
            echoSocket.close();
        } catch (IOException ex) {
            Exceptions.printStackTrace(ex);
        } 
```

我不明白如何在后台运行我的服务器代码，然后运行我的客户端代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T23:11:58.507

从技术上讲，您可以通过实例化一个调用服务器代码的线程来在一个源文件中完成这一切

```
 // Start the Server
    new Thread(new Runnable() {
        public void run() {
            // .. all the server code
        }
    }).start();

    // Start the client

    // .. all the client code 
```

在幕后，Java 可能正在为新的 Runnable() { } 技术等创建匿名内部类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T19:22:48.213

在主类中使用`public static class Client`嵌套。`Server`它们中的每一个都可以有自己的`main`方法，因此这是一种在一个文件中实现所有目标的方法，但有两个单独的入口点。

另一种选择是有一个入口点，但让它启动两个线程，一个用于客户端，一个用于服务器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T19:15:04.623

你需要做2个类：

*   一位客户
*   一台服务器

每个人都有自己的 main() 方法。

像这样你可以启动2个JVM的一个服务器，一个客户端

或在一堂课：

创建 2 个静态内部类实现`Runnable`，然后从主类内部开始：（我假设您的主类称为 Starter）

```
public static main(String args [ ]) {
                new Thread(new Starter.Server()).start();
                new Thread(new Starter.Client()).start();
            } 
```

我会让你做清理代码...

# tcl - tcl 中的文件读写

> ID：13296054
> 
> 赞同：1
> 
> 时间：2012-11-08T19:11:20.193
> 
> 标签：tcl

我看到了一些与打开文件以执行读写操作相关的以前的帖子，但我没有得到我的任务的答案。我想将一些结果附加到一个文件中（如果它不存在，应该创建一个新文件）。
但是，如果文件已经有结果，则应跳过附加并继续下一个搜索以查找下一个结果。我为此编写了一个脚本，但在读取文件时遇到了问题。脚本是这样的：

```
proc example {} {
    set a [result1 result2  ... result n]
    set op [open "sample_file" "a+"]
    set file_content ""
    while { ![eof $op] } {
        gets $op line
        lappend file_content $line
    }
    foreach result $a {
        if {[lsearch $file_content $result] == -1} {
            puts $op $result
        }
    }
    close $op
} 
```

注意：在这个脚本中，我发现变量“line”为空{“”}。我想我在阅读文件时遇到了麻烦。请在这件事上给予我帮助

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-08T19:36:03.400

您忘记的是在阅读之前寻找文件的开头：

```
proc example {} {
    set a {result1 result2  ... result n}; # <== curly braces, not square
    set op [open "sample_file" "a+"]
    set file_content ""
    seek $op 0; # <== need to do this because of a+ mode
    while { ![eof $op] } {
        gets $op line
        lappend file_content $line
    }
    foreach result $a {
        if {[lsearch $file_content $result] == -1} {
            puts $op $result
        }
    }
    close $op
} 
```

### 更新

您可以使用一条读取语句来简化读取（while 循环和所有）：

```
proc example {} {
    set a {result1 result2  result3}
    set op [open "sample_file" "a+"]
    seek $op 0
    set file_content [read $op]
    foreach result $a {
        if {[lsearch $file_content $result] == -1} {
            puts $op $result
        }
    }
    close $op
}

example 
```

# red5 - Red5 应用程序连接失败

> ID：13296058
> 
> 赞同：5
> 
> 时间：2012-11-08T19:11:32.870
> 
> 标签：red5

我正在尝试在 Red5 上运行一个基本应用程序，它只是尝试连接到 red5 服务器（在 localhost 上）。此应用程序的来源如下：

```
import org.red5.server.adapter.ApplicationAdapter;
import org.red5.server.api.IConnection;
import org.red5.server.api.scope.IScope;
// import org.red5.server.api.service.ServiceUtils;

/**
* Sample application that uses the client manager.
* 
* @author The Red5 Project (red5@osflash.org)
*/
public class Application extends ApplicationAdapter {

/** {@inheritDoc} */
@Override
public boolean connect(IConnection conn, IScope scope, Object[] params) {
    return true;
}

/** {@inheritDoc} */
@Override
public void disconnect(IConnection conn, IScope scope) {
    super.disconnect(conn, scope);
   }

} 
```

我的客户端代码也很基本。为简洁起见，代码片段如下：

```
public function onCreationComplete(event:FlexEvent) : void {
            // setup connection code
            connection = new NetConnection();
            connection.connect("rtmp://localhost/Player");
            connection.addEventListener(NetStatusEvent.NET_STATUS, onConnectionNetStatus);
            connection.client = this;   
        }

public function onConnectionNetStatus(event:NetStatusEvent) : void {
            // did we successfully connect
            if(event.info.code == "NetConnection.Connect.Success") {
                Alert.show("Successful Connection", "Information");
            } else {
                Alert.show("Unsuccessful Connection "+event.info.code, "Information");
            } 
```

请注意，我让警报框显示错误代码，这样我就可以看到发生了什么。

在客户端，当我尝试连接时，我收到两条失败消息：

> 不成功的连接 NetConnection.Connect.Closed 不成功的连接 NetConnection.Connect.Rejected

在服务器端，我看到以下内容：

> [INFO] [NioProcessor-10] org.red5.server.net.rtmp.codec.RTMPProtocolDecoder - 动作连接
> 
> [INFO] [NioProcessor-10] org.red5.server.net.rtmp.RTMPConnection - 将对象编码设置为 AMF3
> 
> [INFO] [NioProcessor-10] org.red5.server.net.rtmp.RTMPHandler - 在本地主机上找不到范围播放器
> 
> [警告] [Red5_Scheduler_Worker-3] org.red5.server.net.rtmp.RTMPConnection - 关闭 RTMPMinaConnection 从 127.0.0.1 : 50051 到 localhost (in: 3334 out 3256 ), id 9 由于长时间握手

很明显，由于某种配置错误，出现了问题。不幸的是，我不知道在哪里寻找问题。

有人可以告诉我出了什么问题以及我该如何解决这个问题吗？谢谢...

补充：运行 Red5 v1 RC2 时出现的启动异常：

```
Exception in thread "Launcher:/Player" org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with
name 'web.context' defined in ServletContext resource [/WEB-INF/red5-web.xml]: 
Unsatisfied dependency expressed through bean property 'clientRegistry': : Cannot find class [org.red5.server.WebScope] for bean with name 'web.scope' defined in ServletContext resource [/WEB-INF/red5-web.xml]; 
nested exception is java.lang.ClassNotFoundException: org.red5.server.WebScope; nested exception is org.springframework.beans.factory.CannotLoadBeanClassException: Cannot find class [org.red5.server.WebScope] for bean with name 'web.scope' defined in ServletContext resource [/WEB-INF/red5-web.xml]; nested exception is java.lang.ClassNotFoundException: org.red5.server.WebScope
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireByType(AbstractAutowireCapableBeanFactory.java:1199)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1091)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:517)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:585)
at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:913)
at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:464)
at org.red5.server.tomcat.TomcatLoader$1.run(TomcatLoader.java:593)
Caused by: org.springframework.beans.factory.CannotLoadBeanClassException: Cannot find class [org.red5.server.WebScope] for bean with name 'web.scope' defined in ServletContext resource [/WEB-INF/red5-web.xml]; nested exception is java.lang.ClassNotFoundException: org.red5.server.WebScope
at org.springframework.beans.factory.support.AbstractBeanFactory.resolveBeanClass(AbstractBeanFactory.java:1262)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.predictBeanType(AbstractAutowireCapableBeanFactory.java:576)
at org.springframework.beans.factory.support.AbstractBeanFactory.isFactoryBean(AbstractBeanFactory.java:1331)
at org.springframework.beans.factory.support.DefaultListableBeanFactory.getBeanNamesForType(DefaultListableBeanFactory.java:317)
at org.springframework.beans.factory.BeanFactoryUtils.beanNamesForTypeIncludingAncestors(BeanFactoryUtils.java:185)
at org.springframework.beans.factory.support.DefaultListableBeanFactory.findAutowireCandidates(DefaultListableBeanFactory.java:833)
at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:790)
at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:707)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireByType(AbstractAutowireCapableBeanFactory.java:1184)
... 11 more
Caused by: java.lang.ClassNotFoundException: org.red5.server.WebScope
at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1680)
at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1526)
at org.springframework.util.ClassUtils.forName(ClassUtils.java:258)
at org.springframework.beans.factory.support.AbstractBeanDefinition.resolveBeanClass(AbstractBeanDefinition.java:417)
at org.springframework.beans.factory.support.AbstractBeanFactory.doResolveBeanClass(AbstractBeanFactory.java:1283)
at org.springframework.beans.factory.support.AbstractBeanFactory.resolveBeanClass(AbstractBeanFactory.java:1254)
... 19 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-03T20:31:02.663

在您的 red5-web.xml 文件中更改`org.red5.server.WebScope`为。`org.red5.server.scope.WebScope`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-01T11:28:20.043

另一个事实可能是你有 2 个 Red5.jar，所以你必须删除一个。就我而言，它工作得很好。这篇文章的大泰

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T13:49:59.600

那是什么版本的red5？
启动自定义 Web 应用程序时是否有任何例外？服务器启动时可能已经存在错误，从而导致您的问题。

塞巴斯蒂安

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-28T01:42:31.337

您尝试连接到“播放器”的应用程序范围在服务器上不存在；日志将此记录为“在本地主机上找不到范围播放器”。这通常意味着您的应用程序没有加载。它没有加载的原因看起来像 WebScope 的类包错误。将 beans 类属性更改为 org.red5.server.scope.WebScope 并重试。

# image - Kinect：从 RGB 坐标转换为深度坐标

> ID：13296059
> 
> 赞同：2
> 
> 时间：2012-11-08T19:11:40.130
> 
> 标签：image, image-processing, kinect, kinect-sdk

我正在使用 Windows Kinect SDK 从传感器获取深度和 RGB 图像。

由于深度图像和 RGB 图像不对齐，我想找到一种方法将 RGB 图像的坐标转换为深度图像的坐标，因为我想在从中获得的深度图像上使用图像蒙版对 RGB 图像进行一些处理。

已经有一种将深度坐标转换为色彩空间坐标的方法：

```
NuiImageGetColorPixelCoordinatesFromDepthPixel 
```

不幸的是，相反的情况不存在。INUICoordinateMapper 中只有一个神秘的调用：

```
HRESULT MapColorFrameToDepthFrame(
     NUI_IMAGE_RESOLUTION eColorResolution,
     NUI_IMAGE_RESOLUTION eDepthResolution,
     DWORD cDepthPixels,
     NUI_DEPTH_IMAGE_PIXEL *pDepthPixels,
     DWORD cDepthPoints,
     NUI_DEPTH_IMAGE_POINT *pDepthPoints
) 
```

这种方法的工作原理没有很好的记录。以前有人用过吗？

我即将自己进行手动校准以计算转换矩阵，所以我会很高兴有一个解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T21:36:19.800

感谢评论者 horristic，我得到了一个指向 msdn 的链接，其中包含一些有用的信息（还要感谢 msdn 的 T. Chen 在 API 方面的帮助）。摘自 T. Chen 的帖子，下面是执行从 RGB 到深度坐标空间的映射的代码：

```
INuiCoordinateMapper* pMapper;

mNuiSensor->NuiGetCoordinateMapper(&pMapper);

pMapper->MapColorFrameToDepthFrame(
        NUI_IMAGE_TYPE_COLOR,
        NUI_IMAGE_RESOLUTION_640x480,
        NUI_IMAGE_RESOLUTION_640x480,
        640 * 480, 
        (NUI_DEPTH_IMAGE_PIXEL*)LockedRect.pBits,
        640 * 480, 
        depthPoints); 
```

**注意：**需要初始化传感器并锁定深度框架才能正常工作。

例如，可以按如下方式查询转换后的坐标：

```
/// transform RGB coordinate point to a depth coordinate point 
cv::Point TransformRGBtoDepthCoords(cv::Point rgb_coords, NUI_DEPTH_IMAGE_POINT *    depthPoints)
{
    long index = rgb_coords.y * 640 + rgb_coords.x;
    NUI_DEPTH_IMAGE_POINT depthPointAtIndex = depthPoints[index];
    return cv::Point(depthPointAtIndex.x, depthPointAtIndex.y); 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T16:32:42.063

据我所知，`MapColorFrameToDepthFrame`有效地对 RGB 图像的每个像素运行坐标系统转换，将转换产生的深度图像坐标和输出`NUI_DEPTH_IMAGE_POINT`数组中的结果深度值存储起来。该结构的定义在这里：http: [//msdn.microsoft.com/en-us/library/nuiimagecamera.nui_depth_image_point.aspx](http://msdn.microsoft.com/en-us/library/nuiimagecamera.nui_depth_image_point.aspx)

但是，这可能对您的需求来说太过分了，而且我不知道这种方法有多快。XBOX Kinect 开发人员可以非常快速地实现以帧速率在 GPU 上运行的该功能，Windows 开发人员可能就没有这么幸运了！

# javascript - Jquery 移动滚动

> ID：13296061
> 
> 赞同：0
> 
> 时间：2012-11-08T19:11:55.010
> 
> 标签：javascript, jquery, mobile, tablet

```
$(window).scroll(function() {
alert('scrolling');
}); 
```

这是在台式计算机上可以正常工作但在移动设备上滚动时不会触发的代码。

有谁知道 JQuery 是否可以支持这个？

# android - 你不知道 GoogleAnalyticsV2 的 minSdkVersion 吗？

> ID：13296064
> 
> 赞同：0
> 
> 时间：2012-11-08T19:12:05.833
> 
> 标签：android, android-emulator, google-analytics

我的应用支持 Android 1.5 (API3) 到 4.1.2 (API16)。当我添加 GoogleAnalyticsV2 并重新测试它时 - 它在模拟器中出现 API3 错误：

```
11-08 20:00:58.813: E/dalvikvm(732): Could not find method
android.content.pm.PackageManager.getInstallerPackageName, referenced
from method
com.google.analytics.tracking.android.GAThread.fillAppParameters 11-08
20:00:58.887: W/dalvikvm(732): VFY: unable to resolve virtual method
226: Landroid/content/pm/PackageManager;.getInstallerPackageName
(Ljava/lang/String;)Ljava/lang/String; 11-08 20:00:58.925:
W/dalvikvm(732): VFY:  rejecting opcode 0x6e at 0x000c 11-08
20:00:58.934: W/dalvikvm(732): VFY:  rejected
Lcom/google/analytics/tracking/android/GAThread;.fillAppParameters
(Ljava/util/Map;)V 11-08 20:00:58.934: W/dalvikvm(732): Verifier
rejected class Lcom/google/analytics/tracking/android/GAThread; 11-08
20:00:58.964: D/AndroidRuntime(732): Shutting down VM 11-08
20:00:58.964: W/dalvikvm(732): threadid=3: thread exiting with
uncaught exception (group=0x4000fe70) 11-08 20:00:58.985:
E/AndroidRuntime(732): Uncaught handler: thread main exiting due to
uncaught exception 11-08 20:00:59.084: E/AndroidRuntime(732):
java.lang.VerifyError: com.google.analytics.tracking.android.GAThread
11-08 20:00:59.084: E/AndroidRuntime(732):  at
com.google.analytics.tracking.android.GoogleAnalytics.<init>(GoogleAnalytics.java:55)
11-08 20:00:59.084: E/AndroidRuntime(732):  at
com.google.analytics.tracking.android.GoogleAnalytics.getInstance(GoogleAnalytics.java:91)
11-08 20:00:59.084: E/AndroidRuntime(732):  at
com.google.analytics.tracking.android.EasyTracker.setContext(EasyTracker.java:309)
11-08 20:00:59.084: E/AndroidRuntime(732):  at
com.tonycode.primenumbers.ListNumsActivity.onCreate(ListNumsActivity.java:32)
11-08 20:00:59.084: E/AndroidRuntime(732):  at
... 
```

虽然在真实设备上测试 Android 2.3.3 和 Android 4.0.3 都可以。

在上面的日志中，我发现 Analytics 无法启动，因为 API3 中不存在方法 android.content.pm.PackageManager.getInstallerPackageName，它仅存在于 [API5][http://developer.android.com /reference/android/content/pm/PackageManager.html#getInstallerPackageName(java.lang.String] [1](http://developer.android.com/reference/android/content/pm/PackageManager.html#getInstallerPackageName%28java.lang.String "API5")

那么，您能帮帮我吗 - (1) 有什么方法可以在 API3 和 API4 中启用 GoogleAnalyticsV2 吗？(2) 如果没有，如果应用程序安装在 API3/4 上，如何在代码中禁用 GoogleAnalyticsV2？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T20:51:03.337

您可以通过检查仅对 API 5+ 启用 Google Analytics `Build.VERSION.SDK_INT`：

```
if (Build.VERSION.SDK_INT >= 5) {
    // Start Google Analytics...
} 
```

**编辑**：

在 API 4 之前，`SDK_INT`不存在。不过，您可以使用稍微不太方便的[`RELEASE`值](http://developer.android.com/reference/android/os/Build.VERSION.html#RELEASE)（字符串），它适用于所有 Android 版本。一些简单的`RELEASE`值解析应该可以解决您的问题：

```
if (android.os.Build.VERSION.RELEASE.startsWith("1.5") == false) {
    // Start Google Analytics...
} 
```

如果您决定支持比 3 (Android 1.5) 更早的 API 级别，那么您还需要将它们过滤掉。

# perl - 如何找到最后修改的文件及其时间戳不迟于今天？

> ID：13296068
> 
> 赞同：-2
> 
> 时间：2012-11-08T19:12:18.647
> 
> 标签：perl, file, bash, awk, ls

`filename.${date}`例如，我有一个名为 的文件列表，`foo.20121102`我想使用 bash 工具集打印到今天为止具有时间戳的最后修改文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T20:38:42.710

使用`shell`你问的类似：

```
for i in *; do
    if stat -c %y "$i" | grep -q "^$(date +%Y-%m-%d)"; then
        echo "$i has been modified or created today"
    else
        echo "$i has NOT been modified or created today"
    fi
done 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T19:14:38.770

```
# 24 hours * 60 minutes/hour * 60 seconds/minute
$threshhold = 86400;
$currenttime = time();
if( ($currenttime - $mtime) > $threshhold){
    # file was modified within 24 hours
} 
```

对于昨晚午夜后修改的文件：

```
if( $mtime > ($currenttime - ($currenttime % 86400)){
   # file was modified this calendar day
} 
```

更多信息[在这里](http://www.perlmonks.org/?node_id=85166)

# java - 如何使用Java获取div的坐标和尺寸

> ID：13296073
> 
> 赞同：1
> 
> 时间：2012-11-08T19:12:38.577
> 
> 标签：java, coordinate, html-parser

那里

我正在开发一个项目，该项目将使用 JAVA 将 Web 的 html 代码转换为特定的 JS 库，以便 div 块可以具有不同的动态行为。

要将 html div 转换为 JS 对象，我必须知道它的坐标以及宽度和长度。

我变成了几个JAVA html解析器库：http: [//java-source.net/open-source/html-parsers](http://java-source.net/open-source/html-parsers)

但是除了 Cobra [http://lobobrowser.org/cobra/java-html-parser.jsp](http://lobobrowser.org/cobra/java-html-parser.jsp)之外，它们都没有这个功能。它有一个渲染引擎，可以提供 div 的坐标和尺寸。但事实证明这个库确实有问题。我什至无法通过图书馆附带的测试。

有谁知道如何处理这个问题？如果您能提供帮助，我将不胜感激！

提前致谢！菲尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T19:22:59.983

您可以尝试模拟浏览器的[HtmlUnit的某些组件。](http://htmlunit.sourceforge.net/)不过老实说，我认为您需要更仔细地考虑您的问题。[JQuery](http://jquery.com/)可以通过使用 Javascript 修改 HTML DOM（文档对象模型）来完成您所说的“不同的动态行为”，如果您需要 HTML 文档中的任何内容，那么通过 Javascript 检查 DOM 应该是您的第一个呼叫端口. 任何地方都不需要 Java（除非您在服务器端使用它来使用 JSP 或类似技术进行页面和输入处理）。对客户端输入的任何响应都可以在服务器端触发并发送到客户端的 Javascript，从而触发修改 DOM 的 JQuery 操作。

# node.js - Why do I get 'Maximum call stack size exceeded' error when trying to create a custom logger (Winston/NodeJS)

> ID：13296078
> 
> 赞同：0
> 
> 时间：2012-11-08T19:13:15.923
> 
> 标签：node.js, stack-overflow, winston

I'm trying to understand how to use Winston (NodeJS) by creating a logger with custom levels.

logger.js

```
 var winston = require('winston');

  var custom = {
    levels: {
      debug: 0,
      log  : 1,
      info : 2,
      ok   : 3,
      warn : 4,
      cry  : 5,
      fail : 6
    },
    colors: {
      debug: 'grey',
      log  : 'white',
      info : 'cyan',
      ok   : 'green',
      yay  : 'blue',
      warn : 'yellow',
      cry  : 'magenta',
      fail : 'red'
    }
  };

  var customLogger = new (winston.Logger)({
      transports: [
          new (winston.transports.Console)({ colorize:true, prettyPrint: true, level: 'fail', timestamp:false })
      ],
      levels:custom.levels, colors:custom.colors
  });

module.exports = customLogger; 
```

//in includes.js

```
var logger = require('./lib/logger.js');
exports.logger = logger; 
```

//in app.js

```
var logger = require('includes').logger
logger.cry("Wah Wah Wah"); 
```

But everytime I try to include my custom logger and use it I get:

```
 RangeError: Maximum call stack size exceeded 
```

What am I doing wrong here?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T23:14:27.727

The one thing that immediately comes to mind is to include logger.js directly in app.js rather than going through includes.js.

I'd love to help more, but with the files in those locations and nothing else to go on but what you've said, as far as I can tell your app shouldn't work at all.

# networking - TCP 是否从间隔中随机选择一个时间来决定何时发生超时？

> ID：13296083
> 
> 赞同：1
> 
> 时间：2012-11-08T19:13:39.053
> 
> 标签：networking, tcp, timeout

在 TCP 中，如何确定超时发生的时间？我被告知它是从每次超时后加倍的间隔中随机选择的，但我在 Google 上发现的任何内容都没有提到关于随机选择的任何内容，而是说它是在收到第一个确认后计算使用的平滑往返时间。它是对每个数据包都这样做还是设计有一些随机性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T19:19:37.137

在启动连接的 TCP 3 次握手期间计算 RTT 的初始值。此后，当看到合格的发送/确认时，它会更新。

大多数现代实现不直接使用此方法，而是使用对获得 ACK 并在该时间间隔后重新传输所需的最长时间进行统计分析。“指数退避”（等待间隔加倍）发生在相同数据的进一步重传中。

在没有收到 ACK 的一些传输之后，连接“超时”。

# c++ - 使用 boost::tokenizer 和 boost::iterator_range

> ID：13296085
> 
> 赞同：2
> 
> 时间：2012-11-08T19:13:55.747
> 
> 标签：c++, boost, boost-tokenizer

我`boost::tokenizer`用来读取类似 CSV 的文件。我将令牌存储在`std::vector`. 它运作良好，但我只想`boost::iterator`为每个令牌存储一个。

我试过：

```
#include <string>
#include <boost/tokenizer.hpp>
#include <boost/range/iterator_range.hpp>

typedef std::string::const_iterator string_iter;
typedef boost::iterator_range<string_iter> string_view;

int main(){
    std::string line;

    std::vector<string_view> contents;

    boost::tokenizer<boost::escaped_list_separator<char>, string_iter, string_view> tok(line.begin(), line.end());
    contents.assing(tok.begin(), tok.end());
} 
```

但它无法编译：

> /usr/include/boost/token_functions.hpp：在 'bool boost::escaped_list_separator::operator()(InputIterator&, InputIterator, Token&) 的实例化中 [with InputIterator = __gnu_cxx::__normal_iterator >; 令牌 = boost::iterator_range<__gnu_cxx::__normal_iterator >>; 字符 = 字符；Traits = std::char_traits]': /usr/include/boost/token_iterator.hpp:70:11: 需要来自'void boost::token_iterator::initialize() [with TokenizerFunc = boost::escaped_list_separator; 迭代器 = __gnu_cxx::__normal_iterator >; 类型 = boost::iterator_range<__gnu_cxx::__normal_iterator >>]' /usr/include/boost/token_iterator.hpp:77:63: 来自 'boost::token_iterator::token_iterator(TokenizerFunc, Iterator, Iterator) [with TokenizerFunc = boost::escaped_list_separator; 迭代器 = __gnu_cxx::__normal_iterator >; 类型 = boost::iterator_range<__gnu_cxx::__normal_iterator >>]' /usr/include/boost/tokenizer.hpp:86:53: 来自 'boost::tokenizer::iter boost::tokenizer::begin() 常量[与 TokenizerFunc = boost::escaped_list_separator; 迭代器 = __gnu_cxx::__normal_iterator >; 类型 = boost::iterator_range<__gnu_cxx::__normal_iterator >>; boost::tokenizer::iter = boost::token_iterator, __gnu_cxx::__normal_iterator >, boost::iterator_range<__gnu_cxx::__normal_iterator >> >]' /home/wichtounet/dev/gooda-to-afdo-converter/src/ gooda_reader.cpp:58:37: 从这里需要 /usr/include/boost/token_functions.hpp:187:16: 错误: 'tok += (& next)->__gnu_cxx::__normal_iterator 中的 'operator+=' 不匹配<_Iterator, _Container>::operator* >()' /usr/include/boost/token_functions.hpp:193:11: 错误：'tok += (& next)->__gnu_cxx::__normal_iterator<_Iterator, _Container>::operator* >()' /usr/include/boost/token_functions.hpp 中的 'operator+=' 不匹配：在实例化中'void boost::escaped_list_separator::do_escape(iterator&, iterator, Token&) [with iterator = __gnu_cxx::__normal_iterator >; 令牌 = boost::iterator_range<__gnu_cxx::__normal_iterator >>; 字符 = 字符；Traits = std::char_traits]': /usr/include/boost/token_functions.hpp:176:11: 来自'bool boost::escaped_list_separator::operator()(InputIterator&, InputIterator, Token&) [with InputIterator = __gnu_cxx: :__normal_iterator >; 令牌 = boost::iterator_range<__gnu_cxx::__normal_iterator >>; 字符 = 字符；特征 = std::char_traits]' /usr/include/boost/token_iterator.hpp:70:11: 'void boost::token_iterator::initialize() [with TokenizerFunc = boost::escaped_list_separator; 迭代器 = __gnu_cxx::__normal_iterator >; 类型 = boost::iterator_range<__gnu_cxx::__normal_iterator >>]' /usr/include/boost/token_iterator.hpp:77:63: 来自 'boost::token_iterator::token_iterator(TokenizerFunc, Iterator, Iterator) [with TokenizerFunc = boost::escaped_list_separator; 迭代器 = __gnu_cxx::__normal_iterator >; 类型 = boost::iterator_range<__gnu_cxx::__normal_iterator >>]' /usr/include/boost/tokenizer.hpp:86:53: 来自 'boost::tokenizer::iter boost::tokenizer::begin() 常量[与 TokenizerFunc = boost::escaped_list_separator; 迭代器 = __gnu_cxx::__normal_iterator >; 类型 = boost::iterator_range<__gnu_cxx::__normal_iterator >>; 升压::分词器::

我也只是尝试使用 自己计算两个迭代器`boost::token_iterator`，但到目前为止我还没有成功。

是否有解决方案只获取每个令牌的迭代器范围而不是字符串以节省一些性能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T20:25:21.797

啊! 你需要一个包括：

```
#include <iostream>
#include <boost/tokenizer.hpp>
#include <boost/range/iterator_range.hpp>
#include <string>

int main()
{
    std::string line;
    typedef std::string::const_iterator string_iter;
    typedef boost::iterator_range<string_iter> string_view;

    boost::tokenizer<boost::escaped_list_separator<char>, string_iter, string_view> tok(line.begin(), line.end());
} 
```

[编译得很好](http://ideone.com/JzKGUK)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-10T10:13:30.763

这是行不通的。需要一个类型（第三`tokenizer`个模板参数），它可以附加标记器函数的结果。具体来说，它必须提供 operator `+= ( tokenizer<...>::iterator::value_type )`。下面的[代码片段](http://liveworkspace.org/code/f65fedf93f4605f1504d729c1ddeb536)应该让你更进一步，虽然我不确定它是否值得努力......

```
#include <string>
#include <boost/tokenizer.hpp>
#include <boost/range/iterator_range.hpp>
#include <iostream>
#include <cstddef>

typedef std::string::const_iterator string_iter;
typedef boost::iterator_range<string_iter> string_view;

// a constant size character buffer, skips anything beyond CSize...
template< std::size_t CSize >
class assignable_view {
   std::size_t m_size;
   char m_buffer[CSize];

   friend std::ostream& operator << (std::ostream& p_out, assignable_view const & p_view)
   {
      if (p_view.m_size > 0u) {
         std::copy(p_view.m_buffer, p_view.m_buffer + p_view.m_size, std::ostream_iterator<char>(p_out));
      }
      return p_out;
   }

public:
   template <class TIter>
   void operator += (TIter p_input) 
   {
      if (m_size < CSize) {
         m_buffer[m_size++] = p_input;
      }   
   }   
   assignable_view() 
      : m_size(0u) {}
};

int main(){
    std::string line
        = "Field 1,\"putting quotes around fields, allows commas\",Field 3";

    std::vector<string_view> contents;

    boost::tokenizer<
       boost::escaped_list_separator<char>, 
       string_iter, 
       assignable_view<11>    
    > tok(line.begin(), line.end());

    for (auto const & t_s : tok) {
       std::cout << t_s << std::endl;
    }
    //contents.assing(tok.begin(), tok.end());
} 
```

# rabbitmq - CentOS 6 上的 RabbitMQ 服务器问题

> ID：13296089
> 
> 赞同：1
> 
> 时间：2012-11-08T19:14:22.453
> 
> 标签：rabbitmq, boot

我在 CentOS 6 上运行 rabbitmq-server 时遇到问题。

我在尝试启动rabbitmq-server时收到这样的消息：

```
starting networking                                                      ...BOOT ERROR: FAILED
Reason: {badmatch,
            {error,
                {shutdown,
                    {child,undefined,'rabbit_tcp_listener_sup_:::5672',
                        {tcp_listener_sup,start_link,
                            [{0,0,0,0,0,0,0,0},
                             5672,
                             [inet6,binary,
                              {packet,raw},
                              {reuseaddr,true},
                              {backlog,128},
                              {nodelay,true},
                              {exit_on_close,false}],
                             {rabbit_networking,tcp_listener_started,[amqp]},
                             {rabbit_networking,tcp_listener_stopped,[amqp]},
                             {rabbit_networking,start_client,[]},
                             "TCP Listener"]},
                        transient,infinity,supervisor,
                        [tcp_listener_sup]}}}}
Stacktrace: [{rabbit_networking,start_listener0,4},
             {rabbit_networking,'-start_listener/4-lc$^0/1-0-',4},
             {rabbit_networking,start_listener,4},
             {rabbit_networking,'-boot_tcp/0-lc$^0/1-0-',1},
             {rabbit_networking,boot_tcp,0},
             {rabbit_networking,boot,0},
             {rabbit,'-run_boot_step/1-lc$^1/1-1-',1},
             {rabbit,run_boot_step,1}]
Erlang has closed
{"Kernel pid terminated",application_controller,"{application_start_failure,rabbit,{bad_return,{{rabbit,start,[normal,[]]},{'EXIT',{rabbit,failure_during_boot}}}}}"}

Crash dump was written to: erl_crash.dump
Kernel pid terminated (application_controller) ({application_start_failure,rabbit,{bad_return,{{rabbit,start,[normal,[]]},{'EXIT',{rabbit,failure_during_boot}}}}}) 
```

在**rabbitmq-env.conf**我有：

```
NODENAME=main
CONFIG_FILE=/etc/rabbitmq/ 
```

同样在**rabbitmq.config**我有：

```
[
    {rabbit, [{tcp_listeners, [{"0.0.0.0", 5672}]}]}
]. 
```

唔？有谁知道问题出在哪里？提前致谢

# c - Cygwin html到浏览器

> ID：13296092
> 
> 赞同：0
> 
> 时间：2012-11-08T19:14:27.587
> 
> 标签：c, linux, windows, sockets, cygwin

我已经用 c (cygwin) 编写了 ac socket 程序，我想将一些 html 代码发送到我的浏览器。

我已经编写了服务器，如果我运行它并在我的浏览器中输入`localhost:8888`。我的程序说它发送了正确数量的字节，但我的浏览器似乎什么也没收到。

发送代码：

```
#include<stdio.h>
#include<string.h>  //strlen
#include<sys/socket.h>
#include<arpa/inet.h>   //inet_addr
#include<unistd.h>  //write

int main(int argc , char *argv[])
{
    int socket_desc , new_socket , c;
    struct sockaddr_in server , client;
    char *message;

    //Create socket
    socket_desc = socket(AF_INET , SOCK_STREAM , 0);
    if (socket_desc == -1)
    {
        printf("Could not create socket");
    }

    //Prepare the sockaddr_in structure
    server.sin_family = AF_INET;
    server.sin_addr.s_addr = INADDR_ANY;
    server.sin_port = htons( 8888 );

    //Bind
    if( bind(socket_desc,(struct sockaddr *)&server , sizeof(server)) < 0)
    {
        puts("bind failed");
        return 1;
    }
    puts("bind done");

    //Listen
    listen(socket_desc , 1);

    //Accept and incoming connection
    puts("Waiting for incoming connections...");
    c = sizeof(struct sockaddr_in);
    new_socket = accept(socket_desc, (struct sockaddr *)&client, (socklen_t*)&c);
    if (new_socket<0)
    {
        perror("accept failed");
        return 1;
    }

    puts("Connection accepted");

    char *reply = 
    "HTTP/1.1 200 OK\r\n<Content-Type: text/html\r\n\r\n<!DOCTYPE html>\r\n<html>\r\n<body>\r\n<h1>My First Heading</h1>\r\n<p>My first paragraph.</p>\r\n</body>\r\n</html>";
    int i = send(new_socket,reply,strlen(reply),0);
    printf("%d",i);
    shutdown(new_socket,2);
    return 0;
} 
```

输出程序：

> 绑定完成
> 
> 等待传入连接
> 
> 已接受连接
> 
> 98

输出浏览器：

> 错误 103 (net::ERR_CONNECTION_ABORTED)：未知错误

怎么了 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T20:21:44.790

为了向浏览器发送数据，您的服务器需要实现 HTTP 协议。这意味着等待来自浏览器的请求，对其进行解析，然后将包含您的数据的响应发送回浏览器。

看看这些关于 HTTP 的有用资源：

*   [HTTP 变得非常简单](http://www.jmarshall.com/easy/http/ "HTTP 变得非常简单")
*   [HTTP 协议标准](http://www.w3.org/Protocols/rfc2616/rfc2616.html)

特别是第一个提供了非常容易理解的信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T19:23:28.100

这是您应该查看[的 C 语言示例 Web 服务器。](https://github.com/shenfeng/tiny-web-server)

它展示了如何使用通过 TCP 传输的 HTTP 协议在浏览器和 Web 服务器之间进行通信。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T19:17:42.590

很有可能，除非您没有向我们展示更多代码，否则您的程序不会在响应中生成适当的 HTTP 标头。最小的 HTTP 响应如下所示：

```
HTTP/1.1 200 OK
Content-Type: text/html

Your HTML code goes here 
```

每行应以 CR+LF ( ) 结尾，并且在最后一个标题和正文开头之间`\r\n`必须有两个 CR+LF 对（例如， ）。`\r\n\r\n`

# python - Python - 机械化发布表单 asp webforms

> ID：13296102
> 
> 赞同：1
> 
> 时间：2012-11-08T19:15:23.480
> 
> 标签：python, mechanize

这是有关表格的一些信息：

```
<form1 POST http://www.example./something application/x-www-form-urlencoded
..............
<RadioControl(divPolls$rlPolls=[836, 837])>
<ImageControl(divPolls$btnVote=)> 
```

现在输入按钮名称是`divPolls$btnVote`.

我的代码是：

```
b = mechanize.Browser()
b.open(URL)

b.select_form(nr=0)
b.form['divPolls$rlPolls'] = ['837']

b.submit() 
```

问题是，当我打印响应时，我进入了不同的页面。所以`b.submit()`正在通过另一个指向登录页面的按钮提交。

我如何通过让 Mechanize 提交来解决它`divPolls$btnVote`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-04T11:53:46.483

Mechanize 不支持 Javascript。

其他支持 javascript 的解决方案：

*   瓦提尔
*   幻影JS
*   硒

# android - 浏览器默认不启动 - 出现使用对话框完成操作

> ID：13296103
> 
> 赞同：0
> 
> 时间：2012-11-08T19:15:26.057
> 
> 标签：android

我有一个指向 URL 的按钮，并在清单中启用了 Internet 权限：

```
<uses-permission android:name="android.permission.INTERNET" /> 
```

但是，浏览器不会在模拟器中启动。相反，我得到一个“使用完成操作”对话框（选择：应用程序信息、应用程序硬件首选项、调用设置、进程信息。）我已经在模拟器中尝试了浏览器，它确实拉起了谷歌，所以我知道浏览器可以运行它自己的。当我在手机 (LG Gossip Pro) 上运行它时，Complete Action Using 对话框会询问我是否要使用 Facebook、Twitter 和其他已安装的应用程序，而不是浏览器。按钮事件的代码是：

```
View.OnClickListener button2clickhandler = new View.OnClickListener() {
    public void onClick(View v) {
        startActivity(new Intent(Intent.ACTION_VIEW, Uri.parse("http://www.ratenroll.com")));
    }
  }; 
```

为什么浏览器不会在模拟器或手机上默认启动？是否有另一种方法可以确保浏览器默认通过清单启动，因为我无法在模拟器或手机中找到任何设置来执行此操作？我尝试了 Numair 的建议，但浏览器没有启动。有什么建议么？

感谢您的关注。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T19:22:43.843

试试这个

```
Intent browserIntent = new Intent(Intent.ACTION_VIEW, Uri.parse("http://www.ratenroll.com"));
                startActivity(browserIntent); 
```

# macos - OS X：显示应用程序代理的界面（UIElement）

> ID：13296105
> 
> 赞同：4
> 
> 时间：2012-11-08T19:15:30.407
> 
> 标签：macos, uielement

如何使“应用程序是代理（UIElement）”设置为“是”的应用程序的界面重新出现？

该界面在我第一次启动应用程序时显示，但如果我关闭窗口，然后单击应用程序的图标，则什么也不会发生。我猜这是因为 OS X 试图再次启动应用程序，并且有一些机制阻止了它。我想要的是这样的：

*   第一次单击应用程序的图标应启动应用程序并显示界面。
*   如果界面已关闭（但应用程序仍在后台运行），则随后单击图标应该只会显示界面。
*   如果界面已经显示，点击图标应该只是将窗口移到前台。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T12:04:04.510

这是您可以做到的一种方法：

1）将`+ initialize`方法添加到您的应用程序委托

```
+ (void)initialize
{
    // check if there is a running instance of your app
    NSArray * apps = [NSRunningApplication runningApplicationsWithBundleIdentifier:[[NSBundle mainBundle] bundleIdentifier]];
    if ([apps count] > 1)
    {
        //post notification to it to update inteface
        [[NSDistributedNotificationCenter defaultCenter] postNotificationName:@"updateInterface" object:nil];
        //quit current instance of the app, coz you don't need two apps running continiously
        exit(0);
    }
} 
```

2）注册您的应用程序以获取通知

```
- (void)applicationDidFinishLaunching:(NSNotification *)aNotification
{
    [[NSDistributedNotificationCenter defaultCenter] addObserver:self selector:@selector(updateInterface:) name:@"updateInterface" object:nil];
} 
```

3) 添加`updateInterface`方法

```
- (void)updateInterface:(NSNotification *)aNotification
{
    // handle your interface here
    // ....

    // move your app forward
    [NSApp activateIgnoringOtherApps:YES];
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-12T22:13:04.100

我在这里找到了答案：[关闭 Mac 应用程序（单击顶部的红十字）并通过单击停靠图标重新打开](https://stackoverflow.com/questions/5498376/closing-mac-application-clicking-red-cross-on-top-and-reopening-by-clicking-do)。

```
- (BOOL)applicationShouldHandleReopen:(NSApplication*)theApplication
    hasVisibleWindows:(BOOL)flag
{
    [self.window makeKeyAndOrderFront:self];
    return YES;
} 
```

# sql-server - SQL Server 部分数据库备份（部分表除外）

> ID：13296107
> 
> 赞同：5
> 
> 时间：2012-11-08T19:15:33.510
> 
> 标签：sql-server, backup, database-backups

我正在管理一个相当大的 SQL Server 数据库。有些表包含对业务至关重要的数据，必须每天在异地进行备份。但是我们还有其他（读写）表，它们占据了数据库大小的一半左右，它们不是业务关键的。我想做的是这样的：

```
Primary filegroup: Tables A, B, C --> daily backup
Secondary filegroup: Tables D, E, F --> monthly (or occasional manual) backup 
```

当我尝试对此进行测试时，我在尝试恢复文件组时遇到了错误。看起来我无法单独恢复单个文件组或不同时间点的不同文件组。理想情况下，我希望能够先恢复主文件组（最重要的文件组），然后再恢复辅助文件组。我愿意接受辅助文件组上的一些数据丢失。

这可以做到吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T05:36:24.897

为了使部分或零碎的恢复策略取得成功，您首先需要采用文件组备份策略。如果您愿意，您仍然可以一次备份整个数据库，但备份需要在文件组级别进行。

可以在以下链接中找到如何执行文件组备份的详细信息：http: [//msdn.microsoft.com/en-us/library/ms179401 (v=sql.105).aspx](http://msdn.microsoft.com/en-us/library/ms179401(v=sql.105).aspx)

可以在此处找到有关如何执行分段还原的详细信息[http://msdn.microsoft.com/en-us/library/ms177425(v=sql.100).aspx](http://msdn.microsoft.com/en-us/library/ms177425(v=sql.100).aspx)

# dart - 如何从几个 JSON 对象中创建一个列表？

> ID：13296110
> 
> 赞同：1
> 
> 时间：2012-11-08T19:15:53.217
> 
> 标签：dart

给定`{foo: bar, baz: boo}`and `{foo: bar2, baz: boo2}`，我如何用两个对象创建一个 JSON 列表：

```
[
  {
    foo: bar,
    baz: boo
  },
  {
    foo: bar2,
    baz: boo2
  }
] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T19:15:53.217

只需创建一个列表并将两个 JSON 对象附加到它。

```
var object1 = JSON.parse('{"foo":"bar", "baz":"boo"}');
var object2 = JSON.parse('{"foo":"bar2", "baz":"boo2"}');
var list = new List();
list..add(object1)
    ..add(object2); 
```

`list`就是现在`[{foo: bar, baz: boo}, {foo: bar2, baz: boo2}]`

# html - 手动将表单数据传递到经典 asp 页面失败

> ID：13296112
> 
> 赞同：0
> 
> 时间：2012-11-08T19:15:58.260
> 
> 标签：html, forms, asp-classic, parameter-passing

将表单值从标准 html 表单传递到 asp 页面是可行的，但尝试手动传递它们却不行。这是 ASP 经典的一些奇怪之处吗？为了概述这种情况，我有以下标准表格：

```
<form name="login" id="login" method="post" action="login_process.asp">
<input name="userName" type="text" size="30" maxlength="100" />
<input name="password" type="password" size="30" maxlength="100" />
<input name="Submit" type="submit" class="btn" value="Login" />
</form> 
```

在接收端（login_process.asp），我有这个：

```
if Request.Form("Username") <> "" and Request.Form("Password") <> "" then
' do stuff here 
```

现在奇怪的是，这种形式已经存在多年并且确实有效。但是，如果我尝试手动将值传递给 login_process.asp，则这些值永远不会成功：

```
www.zzz.com/login_process.asp?username=some_user&password=some_password 
```

我向 login_process.asp 添加了一些检查，以查看是否可以在处理这些变量之前从提交中提取变量：

```
myUsername = request.form("Username")
myPassword = request.form("Password")
response.write "user=" & myUsername
response.write "pass=" & myPassword 
```

我得到的只是

```
user=pass= 
```

所以很明显数据没有通过。但为什么？我在看什么？传递表单数据是基本的东西，那么有什么用呢？

任何见解表示赞赏！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T19:20:04.097

如果您在查询字符串上传递它们，您将不再使用该表单，因此**Request.Form**将不起作用。您需要改用**Request.QueryString**。

更多信息[在这里](http://msdn.microsoft.com/en-us/library/ms524784%28v=vs.90%29.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-12-14T07:27:47.727

我们可以使用“Request.Form”将表单字段数据获取到其他页面。为此，请尝试以下代码：

```
<form name="login" id="login" method="post" action="login_process.asp">
<input name="userName" type="text" size="30" maxlength="100" />
<input name="password" type="password" size="30" maxlength="100" />
<input name="Submit" type="submit" class="btn" value="Login" />
</form> 
```

我们在 login.process.asp 页面中获取的表单数据是这样的：

```
<%  Response.Write(Request.Form("userName"))   %> 
```

它将显示用户名值

# iphone - 如何在 UITableView 中的每个部分打一个复选标记？

> ID：13296116
> 
> 赞同：2
> 
> 时间：2012-11-08T19:16:21.437
> 
> 标签：iphone, ios, uitableview

在我的表格视图中，我有 4 个部分，我需要在每个部分中有 1 个复选标记。像这样...

*   第 0 节
    *   第 0 行
    *   第 1 行
    *   第 2 行 /
    *   第 3 行
*   第 1 节
    *   第 0 行
    *   第 1 行 /
    *   第 2 行

ETC..

**numberOfRowsInSection：**

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
NSInteger numberOfRows;
if (section == 0) {
    numberOfRows = 3;
}
else if (section == 1) {
    numberOfRows = 4;
}
else if (section == 2) {
    numberOfRows = 4;
}
else if (section == 3) {
    numberOfRows = 3;
}
return numberOfRows;
} 
```

**cellForRowAtIndexPath：**

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
static NSString *userChoices = @"UserChoices";
cell = [tableView dequeueReusableCellWithIdentifier:userChoices];
cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:userChoices];

if (indexPath.section == 0) {
    cell.textLabel.text = [mail objectAtIndex:indexPath.row];
}
else if (indexPath.section == 1) {
    cell.textLabel.text = [search objectAtIndex:indexPath.row];
}
else if (indexPath.section == 2) {
    cell.textLabel.text = [social objectAtIndex:indexPath.row];
}
else if (indexPath.section == 3) {
    cell.textLabel.text = [maps objectAtIndex:indexPath.row];
}

if([self.checkedIndexPath isEqual:indexPath])
{
    cell.accessoryType = UITableViewCellAccessoryCheckmark;
}
else
{
    cell.accessoryType = UITableViewCellAccessoryNone;
}

return cell;

} 
```

**didSelectRowAtIndexPath:**

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
// Uncheck the previous checked row
UITableViewCell* uncheckCell = [tableView cellForRowAtIndexPath:self.checkedIndexPath];
if(self.checkedIndexPath)
{
    uncheckCell.accessoryType = UITableViewCellAccessoryNone;
}

if([self.checkedIndexPath isEqual:indexPath])
{
    self.checkedIndexPath = nil;
}
else
{
    UITableViewCell* cell = [tableView cellForRowAtIndexPath:indexPath];
    cell.accessoryType = UITableViewCellAccessoryCheckmark;
    self.checkedIndexPath = indexPath;
}

// use this to put checkmark on the item
[tableView deselectRowAtIndexPath:indexPath animated:YES];
} 
```

以下代码在表格的所有部分中的单元格旁边给我一个复选标记。任何机构有任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T21:09:34.080

您可以使用字典来跟踪每个部分检查了哪一行：

```
NSMutableDictionary *_checkedRowsDict = [NSMutableDictionary dictionaryWithCapacity:numberOfSections];

...

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
    if ([_checkedRowsDict objectForKey:[NSNumber numberWithInt:indexPath.section]]) {
        // Unmark the row found on _checkedRowsDict
        NSNumber *num = [_checkedRowsDict objectForKey:[NSNumber numberWithInt:indexPath.section]];
        int row = [num intValue];
        NSIndexPath *checkIndexPath = [NSIndexPath indexPathForRow:row inSection:indexPath.section];

        UITableViewCell *checkedCell = [tableView cellForRowAtIndexPath:checkIndexPath];
        checkedCell.accessoryType = UITableViewCellAccessoryNone;
    }

    // Mark the selected row
    UITableViewCell *selectedCell = [tableView cellForRowAtIndexPath:indexPath];
    selectedCell.accessoryType = UITableViewCellAccessoryCheckmark;

    // Update _checkedRowsDict
    [_checkedRowsDict setObject:[NSNumber numberWithInt:indexPath.row] forKey:[NSNumber numberWithInt:indexPath.section]];

    ...

} 
```

以及类似于初始化行的东西`tableView:cellForRowAtIndexPath:`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-16T14:48:45.787

试试这个，对我来说效果很好：

-变量：

```
@property NSInteger checkedCellRow;
@property NSInteger checkedCellSection; 
```

-功能：

```
- (void)tableView:(UITableView *)tableView willDisplayCell:(UITableViewCell *)cell forRowAtIndexPath:(NSIndexPath *)indexPath {
if (checkedCellSection == indexPath.section)
{
if (checkedCellRow == indexPath.row)
{
cell.accessoryType = UITableViewCellAccessoryCheckmark;
}
else
{
cell.accessoryType = UITableViewCellAccessoryNone;
}
}
}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
checkedCellRow = indexPath.row;
checkedCellSection = indexPath.section;
[myTable reloadData];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T19:18:36.783

创建一个由 NSNumbers 组成的 NSMutableArray，其中包含数组中元素表示的部分中所选元素的整数表示。

您将不得不进行更多设置，但是当您检查时

```
if([self.checkedIndexPath isEqual:indexPath]) 
```

你可以检查

```
if([[yourArrayOfCheckedIndexes objectAtIndex:indexPath.section] integerValue] == indexPath.row) 
```

基本上你需要为每个部分存储检查的索引

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-14T12:35:45.980

我将此添加到我的 viewDidLoad 中，一切正常。谢谢。

```
-(void)viewDidLoad {
NSUInteger i = 2; //Number of section
NSMutableDictionary *_checkedRowsDict = [NSMutableDictionary dictionaryWithCapacity:i];
...
} 
```

# javascript - 访问闭包之外的值以扩展 wavesurfer.js 库

> ID：13296118
> 
> 赞同：0
> 
> 时间：2012-11-08T19:16:37.710
> 
> 标签：javascript, callback, closures, web-audio-api

我在这里有 2 个函数： load 接收到 mp3 的路径，count 是正在加载的轨道数。当 for 循环到达最后一个轨道时，arraybufferList 包含所有歌曲的“arraybuffer”数组。然后将其传递给 loadData 函数，该函数使用 webaudioapi 函数“decodeAudioData”来解码所有信息并将所有内容放入“currentBuffer”中。然而，在关闭之外，“currentBuffer”似乎消失了（在我的谷歌浏览器调试器中）。

我正在尝试使用 wavesurfer.js 库并将其扩展到多个轨道。

```
load: function (src,count) {

        var my = this;
        var xhr = new XMLHttpRequest();
        xhr.responseType = 'arraybuffer';
        xhr.onload = function () {

            console.log("loading mp3 & putting inside arraybufferList");
            arraybufferList.push(xhr.response); 

            if (arraybufferList.length==count){
                console.log(arraybufferList);
                for (var i=0; i<arraybufferList.length; i++){
                    my.backend.loadData(
                        arraybufferList[i],
                        playList[i].draw.bind(playList[i])
                    );

                    console.log(playList);
                    //playList.push(my);    
                }

                console.log(playList);

            }       
        };

        xhr.open('GET', src, true);

        xhr.send();
    },

    loadData: function (audioData, cb) {
        var my = this;

        this.pause();

        this.ac.decodeAudioData(
            audioData,
            function (buffer) {
                my.currentBuffer = buffer;
                my.lastStart = 0;
                my.lastPause = 0;
                my.startTime = null;
                cb(buffer);

            },
            Error
        );
    }, 
```

在每个音频文件的开头创建一个对象，其中来自 loadData 的信息应该进入

```
var WaveSurfer = {
    init: function (params) {
        var my = this;

        var backend = WaveSurfer.Audio;

        if (!params.predrawn) {
            backend = WaveSurfer.WebAudio;
        }

        this.backend = Object.create(backend);
        this.backend.init(params);

        this.drawer = Object.create(WaveSurfer.Drawer);
        this.drawer.init(params);

        this.backend.bindUpdate(function () {
            my.onAudioProcess();
        });

        this.bindClick(params.canvas, function (percents) {
            my.playAt(percents);
        });
        playList.push(my);

    }, 
```

一些基本代码： ac: new (window.AudioContext || window.webkitAudioCont

# air - Adobe Air 加载本地 HTML

> ID：13296128
> 
> 赞同：1
> 
> 时间：2012-11-08T19:17:35.187
> 
> 标签：air, adobe, urlloader

当我从 IDE 加载 index.html 时，它工作正常！但是当我启动编译的应用程序时它不起作用。

编码：

```
_html = new HTMLLoader();
var fileURL:String = "app:/components/posteditor/ckeditor/index.html";
_html.load( new URLRequest(fileURL) ); 
```

我试图加载这个文件

```
var fileURL:String = File.applicationDirectory.resolvePath("components/posteditor/ckeditor/index.html").nativePath; 
```

但没有运气。

看起来像 Adob​​e 的错误。你能帮助我和建议吗？

# c# - 检测应用程序是否在系统帐户下运行？

> ID：13296129
> 
> 赞同：3
> 
> 时间：2012-11-08T19:17:40.433
> 
> 标签：c#, .net, account

我可能可以使用`Environment.UserName`它并将其与“系统”进行比较以查看它是否匹配，但这似乎很老套，我不确定它在非英语环境中如何工作。关于如何检查当前可执行文件是否作为系统帐户运行的任何其他建议？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-08T20:12:01.120

这应该这样做：

```
bool isSystem;
using (var identity = System.Security.Principal.WindowsIdentity.GetCurrent())
{
    isSystem = identity.IsSystem;
} 
```

切勿比较帐户名称。在本地化操作系统上，将用户名与“系统”进行比较确实会失败。

# c# - 存储项目相关图片的好方法是什么？

> ID：13296137
> 
> 赞同：2
> 
> 时间：2012-11-08T19:18:11.690
> 
> 标签：c#, winforms

我正在尝试获取一个数组`PictureBox`来显示图片列表（以 png 文件格式）。

我尝试使用 .NET`ImageList`控件，但它坚持要重新调整我的图片大小。它也不支持那些 png 文件的透明背景。

我也尝试使用`Assembly`来检索我的文件，如下所示：
`_imageStream = _assembly.GetManifestResourceStream("MyNamespace.MyImage.png");` 但代码不会返回任何资源文件，也不会引发任何运行时错误。

我的问题是，还有其他方法可以做到这一点吗？或者更好的是，我可以以某种方式使`ImageList`控件不改变我的图片吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T19:21:51.350

您可以尝试这样的事情，尽管我不确定这是否是最好的：-

```
 Assembly ambly = Assembly.LoadFile(pathToDll); 
```

或者

```
 BitMap bitMap;
 // where "ns" is the default namespace of the resource project    
 using (Stream resourceStream = ambly.GetManifestResourceSream("ns.image.jpg"))
 {
  bitMap = BitMap.FromStream(resourceStream);
 } 
```

一个例子：-

```
 interface IThemeResourceProvider
 {
 Stream LoadBigLogo();
 Stream LoadSmallLogo();
 } 
```

然后在您的资源库中实现该接口

```
 public class ThemeResourceProvider : IThemeResourceProvider
 {
 public Stream LoadBigLogo()
 {
     Assembly ambly = Assembly.GetExecutingAssembly();
     return ambly.GetManifestResourceStream("namespace.image.jpg");
  }

  (...)
  } 
```

最后，不是直接在主应用程序中加载资源，而是实例化资源库中的 IThemeResourceProvider

```
 Assembly assembly = Assembly.LoadFile(pathToDll);

   var results = from type in assembly.GetTypes()
           where typeof(IThemeResourceProvider).IsAssignableFrom(type)
           select type; 
```

现在您在该列表中有一个 IEnumerable。通常，您只有一个，但使用这种方法，您还可以托管多组资源，并在同一个资源 dll 中实现多个 IThemeResourceProvider。例如，您可以使用名称标识每个 IThemeResourceProvider，或者作为属性，或者在您的各种实现中使用自定义 [Attribute] 装饰。我会把剩下的留给你来解决。

但这里是如何在你的列表中实例化 IThemeResourceProviders

```
 foreach (var providerType in results)
   {
  var constructorInfo = providerType.GetConstructor(Type.EmptyTypes);
  IThemeResourceProvider provider = constructorInfo.Invoke(null);
   } 
```

最后，使用这些提供程序之一获取位图：

```
 BitMap bitMap;
  using (Stream resourceStream = provider.LoadBigLogo())
  {
   bitMap = BitMap.FromStream(resourceStream);
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T19:22:17.013

这是我从某人那里得到的代码，对我来说效果很好！

```
 private void SetImage(PictureBox pb) {
        try {
            Image img = pb.Image;

            Size imgSize = GenerateImageDimensions( img.Width, img.Height, pb.Width, pb.Height );
            Bitmap finalImg = new Bitmap( img, imgSize.Width, imgSize.Height );
            Graphics gfx = Graphics.FromImage( img );
            gfx.InterpolationMode = System.Drawing.Drawing2D.InterpolationMode.HighQualityBicubic;

            pb.Image = null;
            pb.SizeMode = PictureBoxSizeMode.AutoSize;
            pb.Image = finalImg;
        } catch(Exception ex) {

        }
    }
    public Size GenerateImageDimensions(int currW, int currH, int destW, int destH) {
        //double to hold the final multiplier to use when scaling the image
        double multiplier = 0;

        //string for holding layout
        string layout;

        //determine if it's Portrait or Landscape
        if(currH > currW) layout = "portrait";
        else layout = "landscape";

        switch(layout.ToLower()) {
            case "portrait":
                //calculate multiplier on heights
                if(destH > destW) {
                    multiplier = (double) destW / (double) currW;
                } else {
                    multiplier = (double) destH / (double) currH;
                }
                break;
            case "landscape":
                //calculate multiplier on widths
                if(destH > destW) {
                    multiplier = (double) destW / (double) currW;
                } else {
                    multiplier = (double) destH / (double) currH;
                }
                break;
        }

        //return the new image dimensions
        return new Size( (int) (currW * multiplier), (int) (currH * multiplier) );
    } 
```

编辑：完全公开我所有的图像都是 jpg 所以我不知道这将如何处理透明背景。

编辑二：您还需要调整`pb.SizeMode`以满足您的需求。我这样做的方法是为它设置一个最大尺寸，`PictureBox`并且效果很好。

# jquery - 如何查找 attr rel 是否包含文本的一部分

> ID：13296143
> 
> 赞同：0
> 
> 时间：2012-11-08T19:18:50.060
> 
> 标签：jquery

我有以下代码

```
 if($(this).find('a').attr('rel') =="#videopicturevideo_picture_123"){
    alert("contains video");
    } 
```

除了 == 之外，还有一种方法可以在上面使用 contains ("video) 。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T19:19:45.127

尝试使用`indexOf`如下，

```
if($(this).find('a').attr('rel').indexOf('video') >= 0) {
   alert("contains video");
} 
```

或使用属性[**包含**](http://api.jquery.com/attribute-contains-selector/)如下选择器，

```
if($(this).find('a[rel*=video]').length) {
   alert("contains video");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T19:22:37.487

或者你可以使用正则表达式：

```
if($(this).find('a').attr('rel').match(/.*video.*/)){
    alert("contains video");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T19:29:42.957

```
var a_with_video = $("a[rel^='#videopicturevideo_picture_123']"); 
```

# scroll - 同时设置 scrollLeft/scrollTop 在 Safari 6 中不起作用

> ID：13296144
> 
> 赞同：1
> 
> 时间：2012-11-08T19:18:53.373
> 
> 标签：scroll, osx-mountain-lion, scrollto, safari

**在 Safari 6 中同时设置`scrollTop`和`scrollLeft`**参数时，仅执行两者之一，仅在一个轴上滚动页面。这在使用原生 JavaScript、jQuery 和[jquery.scrollTo](https://github.com/flesler/jquery.scrollTo "jquery.scrollTo 插件")插件时都会发生。

使用 jQuery 的示例`.animate()`：

```
$('body').animate({
    'scrollLeft': 100,
    'scrollTop': 100
}, {
    'duration': 500,
    'easing': 'swing'
}); 
```

我在这里设置了一个演示页面：http: [//nabble.nl/demo/safari6scrollto/](http://nabble.nl/demo/safari6scrollto/)

所有示例在所有主要浏览器中都可以正常工作，在 Safari 6 中只有示例没有。4、6 和 7 工作。不知何故，在加载演示页面时`IFRAME`（见演示页面底部），一切正常。

**这是Safari中的错误吗？如果是这样，如何解决这个问题？如果不是，是什么原因造成的，如何解决？**

其他相关报道：

*   [https://github.com/flesler/jquery.scrollTo/issues/9](https://github.com/flesler/jquery.scrollTo/issues/9)
*   [http://forum.jquery.com/topic/scrolltop-scrollleft-not-working-in-safari-6](http://forum.jquery.com/topic/scrolltop-scrollleft-not-working-in-safari-6)
*   [http://bugs.jquery.com/ticket/12588](http://bugs.jquery.com/ticket/12588)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T19:18:53.373

我需要让 jquery.scrollTo 插件在 OSX Mountain Lion 上工作，因为我找不到导致这种行为的具体细节，所以我整理了一个相当丑陋的解决方法。它`window.scrollTo(x, y)`在 jQuery 的 step 函数中使用`.animate()`，这在 Safari 6 中没有问题：

```
var left;
$(window).animate({
    'pageXOffset': 100,
    'pageYOffset': 100
}, {
    duration: 500,
    easing: 'swing',
    step: function(now, fx) {
        if (fx.prop == 'pageXOffset') {
            left = now;
        } else if (fx.prop == 'pageYOffset') {
            window.scrollTo(left, now);
        }
    }
}); 
```

*请注意，对于每个动画属性，对于应用动画的每个元素（在我们的例子中只有 1: `window`），都会调用 step 函数。因此，中间变量用于存储动画中的当前 X 位置。*

它使用对象的`pageXOffset`and`pageYOffset`属性`window`，所以我不知道这种解决方法是否适合为非窗口对象的`scrollLeft`and属性设置动画。`scrollTop`

无论如何，它适用于滚动整个文档，这正是我想要的，而且在 Safari 6 中也非常流畅！

# ruby-on-rails - 当前用户的 Ruby on Rails 范围测试

> ID：13296146
> 
> 赞同：1
> 
> 时间：2012-11-08T19:18:57.767
> 
> 标签：ruby-on-rails

我有一个请求表`belongs_to :contact`

我想要 request.rb 文件中的范围声明来测试联系人是否是当前用户。

```
scope :myopen, where(:contact_id => current_user.id) 
```

返回：未定义的局部变量或方法 `current_user'

我对当前用户 ID 使用什么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T19:22:20.880

你不能这样做，也不应该这样做。数据库级别没有“当前”用户。

您需要将用户对象传递给类级方法：

```
def self.open_for_user(user)
  where(:contact_id => user.id)
end 
```

# r - R中的递归箱线图返回无效的变量类型错误

> ID：13296148
> 
> 赞同：0
> 
> 时间：2012-11-08T19:19:05.267
> 
> 标签：r, loops, for-loop, boxplot

我正在尝试在 for 循环中在 R 中绘制多个箱线图，但无法使用它引用数据集中的列，`data.frame[column]`因为它返回以下内容：

`Error in model.frame.default(formula = e[1] ~ e[2]) :` `invalid type (list) for variable 'e[1]'`

以下代码返回我得到的相同错误：

```
x <- rnorm(20)
y <- rnorm(20)
e <- data.frame(x, y)
boxplot(e[1] ~ e$y) 
```

有什么建议么？我真的被困在这里了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T19:31:32.930

要访问`x`数据框的列`df`，请使用

```
df[[x]] 
```

或者

```
df[ , x] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T19:52:27.993

这里有两个问题：

**1.**正如@Sven Hohenstein 所指出的，您的`boxplot`调用需要正确引用 data.frame 列。

**2.**我认为你想要两个并排的箱线图（x 和 y），而不是 x ~ y。例如：

```
# All these commands are equivalent:
boxplot(e$x, e$y)
boxplot(e[[1]], e[[2]])
boxplot(e[, 1], e[, 2])

# Probably not what you want:
boxplot(e$x ~ e$y)
boxplot(x ~ y, data=e) 
```

# sql-server - 计算 sql azure 数据库的大小

> ID：13296150
> 
> 赞同：17
> 
> 时间：2012-11-08T19:19:14.107
> 
> 标签：sql-server, azure, azure-sql-database

如何计算 SQL Azure 数据库的当前大小？（不是最大尺寸限制）

几个地方（[像这样](http://blogs.msdn.com/b/sqlazure/archive/2010/08/10/10048453.aspx)）建议使用这个sql：

```
SELECT SUM(reserved_page_count) * 8192
FROM    sys.dm_db_partition_stats 
```

但是，当以管理员登录名执行此操作时，出现此错误：

```
Msg 297, Level 16, State 1, Line 1
The user does not have permission to perform this action. 
```

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-11-08T21:58:59.853

这可能是因为您在**主**数据库上运行查询。如果您使用的是 SQL Server Management Studio，请先选择您的数据库（而不是主数据库），然后执行查询。这应该有效。哦，顺便说一下，如果您想要以兆字节为单位的大小，请尝试以下操作：

```
SELECT (SUM(reserved_page_count) * 8192) / 1024 / 1024 AS DbSizeInMB
FROM    sys.dm_db_partition_stats 
```

**或者** 您也可以通过 Windows Azure 管理门户检查您的数据库大小及其使用情况。 ![在此处输入图像描述](../Images/19efad63e33a3b0048af2e846bdb063b.png)

**来源：** [https ://azure.microsoft.com/en-us/documentation/articles/sql-database-monitoring-with-dmvs/](https://azure.microsoft.com/en-us/documentation/articles/sql-database-monitoring-with-dmvs/)

# three.js - THREE.js 的不透明度贴图？

> ID：13296151
> 
> 赞同：1
> 
> 时间：2012-11-08T19:19:21.010
> 
> 标签：three.js

THREE.js 是否有任何不透明度贴图？像：

![在此处输入图像描述](../Images/adcbb19e0b250f335eec6bb5082abbf5.png)

这样我就可以在地图上使用它

![在此处输入图像描述](../Images/12a01c87de2fe7d8aeccfc4e481a9a8e.png)

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-08T20:03:07.620

`MeshBasicMaterial`, `MeshLambertMaterial`,`MeshPhongMaterial`并`MeshStandardMaterial`支持`alphaMap`.

或者，您可以将透明度烘焙到颜色纹理的 Alpha 通道中。

无论哪种情况，您都需要设置`material.transparent = true`.

编辑：如果你正在实现一个切口（alpha 是 0 或 1），那么`material.transparent = true`你可以设置而不是设置`material.alphaTest = 0.5`。

三.js r.87

# c++ - 成员函数的部分模板特化：“原型不匹配”

> ID：13296152
> 
> 赞同：6
> 
> 时间：2012-11-08T19:19:20.963
> 
> 标签：c++, templates, template-specialization, partial-specialization

我正在尝试部分专门化非模板类的模板化成员函数：

```
#include <iostream>

template<class T>
class Foo {};

struct Bar {

  template<class T>
  int fct(T);

};

template<class FloatT>
int Bar::fct(Foo<FloatT>) {}

int main() {
  Bar bar;
  Foo<float> arg;
  std::cout << bar.fct(arg);
} 
```

我收到以下错误：

```
c.cc:14: error: prototype for ‘int Bar::fct(Foo<FloatT>)’ does not match any in class ‘Bar’
c.cc:9: error: candidate is: template<class T> int Bar::fct(T) 
```

如何修复编译器错误？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-08T19:25:02.317

不允许对函数（成员或其他）进行部分特化。

使用重载：

```
struct Bar {

  template<class T>
  int fct(T data);

  template<class T>    //this is overload, not [partial] specialization
  int fct(Foo<T> data);

}; 
```

# javascript - 立即将表单输入值克隆为文本

> ID：13296158
> 
> 赞同：0
> 
> 时间：2012-11-08T19:19:54.490
> 
> 标签：javascript, jquery, clone

是否可以从

```
<textarea id="text"></textarea> 
```

和

```
<input id="name" type="input" /> 
```

作为纯文本立即转换为 div 或段落标签？

示例：如果输入**“123”**，它将立即将**“123”**克隆到 div 中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T19:22:34.720

您应该在处理程序`keyup`上和内部使用事件`textarea/input`更新`div/p`标签的值`textarea/input`

**例子：**

```
$('#mytextarea').keyup(function () {
   $('#myDiv').text(this.value);
}); 
```

**注意：**请参阅其他答案以在按下键且未释放时更新 div。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T19:24:16.587

是的，使用 keydown 事件和 10 毫秒的短暂延迟（或者可能更短，任何小于 30 的延迟都不会被用户注意到）。

```
$("#text").on("keydown",function(){
    setTimeout(
        // proxy callback to `this` rather than `window`
        $.proxy(function(){ 
            $("#target").text(this.value);
        },this)
    ,10);
}); 
```

演示：http: [//jsfiddle.net/7Qrug/](http://jsfiddle.net/7Qrug/)

编辑：如果你不喜欢或不理解`$.proxy`，也可以写成：

```
$("#text").on("keydown",function(){
    var that = this;
    setTimeout(function(){ 
        $("#target").text(that.value);
    },10);
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-08T19:29:42.870

旧浏览器和现代浏览器的使用`keyup`和事​​件。`keypress``input`

```
jQuery('#text').on("keyup keypress", function() {
    jQuery("#div").text(this.value);
}); 
```

[演示](http://jsfiddle.net/gbu5b/)- keyup/keypress
[演示](http://jsfiddle.net/gbu5b/1/)- 输入

# android - Android 函数 View.getHitRect() 提供的值的定义是什么？

> ID：13296162
> 
> 赞同：10
> 
> 时间：2012-11-08T19:20:06.427
> 
> 标签：android

“在父坐标中点击矩形”。但是，这是什么意思？

为了放大，我真正想知道的是“命中矩形”这个短语的含义。它是干什么用的？框架如何处理它？返回值在生命周期中什么时候有意义？`getLeft()`它与, `getTop()`, `getRight()`,定义的矩形有何不同`getBottom()`？

根据函数的名称，我当然可以猜出一个答案，并尝试几个例子，但这并不令人满意。我在 Android 开发者网站或我看过的其他任何地方都找不到有关此功能的任何有用信息。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-02-28T12:23:24.753

[这里](http://developer.android.com/training/gestures/viewgroup.html#delegate)似乎是最完整的解释。

> getHitRect() 方法获取父级坐标中子级的命中矩形（可触摸区域）。

示例代码片段使用该函数来确定子视图的当前可触摸区域（布局后），以便通过创建`TouchDelegate`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-09-17T02:08:06.870

They should certainly do a better job of documenting. If you look at the source `View#getHitRect(Rect)`, you'll see that if the view has an "identity matrix", or is not attached to a window, it returns exactly what we're thinking. The alternate branch means the view has a transform, therefore to get the 'hit rect' for the parent, which is the smallest possible rect in its coordinate system that covers view, you have to move the rect to origin, run the transform and then add back its original position.

So you can use it as a shortcut for this purpose if there's no transform. If there's a transform, remember that you'll be getting values in the rect that may be outside or inside the view as currently displayed.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T23:56:56.243

返回的`Rect`包含 4 个值：

*   底部
*   剩下
*   对
*   最佳

`bottom`指定矩形底部的 y 坐标。 `left`指定矩形左侧的 x 坐标。等等

父坐标意味着命中矩形值是在父坐标系中指定的。

想象自己晚上站在一片开阔的田野里，仰望月亮。你在地球上的位置可以用多种方式表达。

如果我们在本地坐标系中表达您的位置，您将位于（纬度/经度）（0, 0）。当您四处走动时，您的本地坐标系永远不会改变，您始终以本地坐标系的 (0,0) 为中心。

但是，如果我们使用地球坐标系表示您的位置，您可能位于 (latitude, longitude) (16, 135)。

你站在地球上，所以地球是你的父坐标系。

同理，一个 View 可以包含在一个 LinearLayout 中。LinearLayout 将是 View 的父级，因此来自 getHitRect() 的值将在 LinearLayout 的坐标系中表示。

**编辑**

一般而言，*命中矩形*是用于定义用于碰撞检测的矩形区域的术语。在 Android 中，hit rectangle 只是 Rect 类型的一个实例。

方法`getLeft()`etc 只是 Rect 中数据的访问器，因此 Rect 的成员定义了通过调用方法获得的相同矩形。

Rect 的常见使用场景是处理点击事件：

```
//Imagine you have some Rect named myRect
//And some tap event named event
//Check if the tap event was inside the rectangle
if(myRect.contains(event.getX(), event.getY()){
  //it's a hit!
} 
```

您可能还想查看两个矩形是否相交

```
if(myRect.contains(myRect2)){
   //collision!
} 
```

对于 View，hit rectangle 并没有真正直接使用，您可以[查看 source](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.1.1_r1/android/view/View.java/)。顶部、底部、左侧、右侧在视图中被大量使用，但 getHitRect() 方法确实更方便地将这些参数（顶部/底部/左侧/右侧）传递给需要它们的人。

# python - Python中JSON中元素的翻转顺序

> ID：13296164
> 
> 赞同：0
> 
> 时间：2012-11-08T19:20:10.473
> 
> 标签：python, json

我似乎找不到解决方案，但假设我有 JSON 数据：

```
data = [{"color":"blue","score":"3"},{"color":"red","score":"2"},....] 
```

我如何颠倒颜色和得分的顺序，所以它是：

```
data = [{"score":"3","color":"blue"},{"score":"2","color":"red"},....] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T19:22:19.663

虽然项目的顺序无关紧要，但如果您真的想要某个顺序，您可以使用[OrderedDict](http://docs.python.org/2/library/collections.html#collections.OrderedDict)。

```
>>> from collections import OrderedDict
>>> data = [OrderedDict([("score", "3"),("color", "blue")])]
>>> json.dumps(data)
'[{"score": "3", "color": "blue"}]' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T19:59:47.583

我如何在评论中写你应该对你的字典进行排序并将它们转换为 OrderedDicts

```
from collections import OrderedDict

a = {'score':3, 'color':'red'}
b = {'score':1, 'color':'yellow'}
lst = []

for d in [a,b]:
    temp = OrderedDict()
    for k in sorted(d, reverse=True):
        temp.setdefault(k, d[k])
    lst.append(temp)

OUTPUT: [OrderedDict([('score', 3), ('color', 'red')]), OrderedDict([('score', 1), ('color', 'yellow')])] 
```

# mysql - mysql - 计数问题

> ID：13296167
> 
> 赞同：0
> 
> 时间：2012-11-08T19:20:14.840
> 
> 标签：mysql

我需要按艺术家计算标题

```
SELECT artist,
    title,
    label,
    COUNT(title) AS countTitles 
FROM table 
WHERE domain = 'domain.com' 
GROUP BY title 
ORDER BY countTitles DESC; 
```

但结果只会让我知道标题的数量 - 与不同的艺术家。

我想要：

```
artist1 - title1a
artist1 - title2a
artist1 - title1a
artist1 - title1a
artist1 - title1a 
```

我想这样数

```
artist1 - title1a - 4
artist1 - title2a - 1 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T19:22:54.693

你不应该选择不在你的列`GROUP BY`，即使 MySQL 扩展了它。

```
SELECT artist, title, 
    COUNT(*) AS countTitles 
FROM table 
WHERE domain = 'domain.com' 
GROUP BY artist, title
ORDER BY countTitles DESC; 
```

# javascript - AngularJS - 控制器方法不会在 ngClick 上被调用 - 没有错误

> ID：13296169
> 
> 赞同：20
> 
> 时间：2012-11-08T19:20:14.970
> 
> 标签：javascript, angularjs

`removePlayer(playerId)`如果单击按钮，我会尝试调用该方法。但是，该方法没有被调用，或者至少它里面的语句没有被触发，因为我`console.log()`在顶部放了一个语句。

控制台是空的，所以我真的一无所知。这是我的代码：

控制器：

```
function appController($scope) {
    $scope.players = [];
    var playercount = 0;

    $scope.addPlayer = function(playername) {

        $scope.players.push({name: playername, score: 0, id: playercount});
        playercount++;
    }

    function getIndexOfPlayerWithId(playerId) {
        for (var i = $scope.players.length - 1; i > -1; i--) {
            if ($scope.players[i].id == playerId)
                return i;
        }
    }

    $scope.removePlayer = function(playerId) {
        console.log("remove");
        var index = getIndexOfPlayerWithId(playerId);
        $scope.players.slice(index, 1);
    }
}
appController.$inject = ['$scope']; 
```

HTML：

```
...
<table id="players">
        <tr ng-repeat="player in players">
            <td>{{player.name}}</td>
            <td>{{player.score}}</td>
            <td><button ng-click="removePlayer({{player.id}})">Remove</button></td>
        </tr>
    </table>
... 
```

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-11-08T19:39:11.653

`{{ }}`您不应该在 ng-click 表达式中使用花括号 ( )。你应该写：

`<button ng-click="removePlayer(player.id)">Remove</button>`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-08T19:31:34.410

`ng-repeat`创建一个新的范围，所以它不知道是什么`removePlayer`。你应该能够做这样的事情：

```
<table id="players">
    <tr ng-repeat="player in players">
        <td>{{player.name}}</td>
        <td>{{player.score}}</td>
        <td><button ng-click="$parent.removePlayer({{player.id}})">Remove</button></td>
    </tr>
</table> 
```

请参阅[https://groups.google.com/forum/?fromgroups=#!topic/angular/NXyZHRTAnLA](https://groups.google.com/forum/?fromgroups=#!topic/angular/NXyZHRTAnLA)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-08-28T18:06:06.457

如前所述，ng-repeat 创建它自己的范围，外部控制器范围不可用。但是由于在 JS 中您使用的是真正的对象，因此请编写如下内容：

```
<tr ng-repeat="player in players">
    <td>{{player.name}}</td>
    <td>{{player.score}}</td>
    <td><button ng-click="player.removePlayer()">Remove</button></td>
</tr> 
```

事先，在控制器初始化的某个地方，您可以将“removePlayer”函数分配给每个播放器对象，并自然地编写任何您想要的代码，从而间接访问外部控制器。

# html - 设置相对 div 的宽度不起作用

> ID：13296171
> 
> 赞同：0
> 
> 时间：2012-11-08T19:20:22.577
> 
> 标签：html, css

我正在做一个网络项目，我有一个弹出框，允许用户输入一些文本，然后这个文本被附加到可编辑内容的末尾，并且文本在 span 类中。

我希望宽度为 80% 并且要换行的文本，但宽度被忽略并且文本全部聚集在一起并重叠每一行。

下面是它的样子。

![div没有设置宽度](../Images/aed0bf3ce17e4ca537c2ee23b74885c9.png)

下面是css ..

```
font-style: italic;
background-color: #ababab;
margin-left: auto;
margin-right: auto;
margin-top: 5px;
margin-bottom: 5px;
height: auto;
width: 80%;
padding: 5px;
border-radius: 5px;
-webkit-border-radius: 5px;
-moz-border-radius: 5px; 
```

感谢您的任何帮助，您可以提供

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T19:25:33.770

如果文本在跨度中，则默认为内联元素。内联元素不尊重高度和宽度属性。然而，内联元素将尊重行高，并且此属性将解决您的重叠问题。

```
line-height: 20px; 
```

为了让您的元素尊重宽度，您需要将元素上的显示更改为 inline-block 或 block。

```
display: inline-block;
display: block; 
```

# android - 如何存储为Android应用程序按下的按钮？

> ID：13296174
> 
> 赞同：0
> 
> 时间：2012-11-08T19:20:39.410
> 
> 标签：android, button, store, pressed

我正在制作一个 android 应用程序，它需要用户从我制作的按钮中输入一个 4 位数的密码，然后再确认密码。我想我可以将引脚存储为数组。

我的问题是，如何存储按下的按钮？

这是我到目前为止想出的

```
public class EnterPin extends Activity 

{

public int[] pin = new int[4];

public void PinEnterd(View view)

{

int i;

for(i = 0; i < 4; i++ )

{

pin = 

}

}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T19:35:38.100

只是我们一个布尔值：

```
private boolean isPressed = false;

public void PinEntered(View v) {
    if(!isPressed) {
        isPressed = true;
        // Do what you like to do on a Button press here
} 
```

如果 Pin 不正确，否则用户再次按下按钮只需重新`isPressed`设置`false`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T19:40:06.387

使用这样的东西怎么样？只需单击按钮并将数字添加到数组中，然后您就可以将其存储在 sharedpreferences 或其他东西中......

```
public class EnterPin extends Activity implents OnClickListener{

public int[] pin = new int[4];
public Button[] buttons;

public onCreate(...){
    buttons[0] = (Button)findViewById(R.id.b1);
    ...
    buttons[9] = (Button)findViewById(R.id.b9);

    buttons[0].addOnclickListener(this);
    ...
    buttons[9].addOnclickListener(this);
}
public ... OnClickListener(View v){
switch(v.getId()){
    case R.id.b1:
        pin[] = 0;
    break;
    ...
    case R.id.b10:
        pin[] = 9;
    break;
}

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T06:50:01.997

您需要声明一个变量来标记引脚的下一个位置。在以下代码的情况下，您可以将引脚的下一个位置保存到`ctr`.

```
public int[] pin = new int[4];
int ctr = 0; //add this to mark the index of your pin

public void PinEnterd(View view)
{
    Button btnPressed = (Button) view; //get access to the button
    int value = Integer.parseInt(btnPressed.getText().toString()); //get the value of the button
    pin[ctr++] = value; //save inputted value and increment counter. next position after 0 is 1.
} 
```

*   当您输入第一个 pin 并且 的值为`ctr`0 时，输入的 pin 将被保存到`pin[0]`。
*   当您输入第一个 pin 并且 的值为`ctr`1 时，输入的 pin 将被保存到`pin[1]`。
*   当您输入第一个 pin 并且 的值为`ctr`2 时，输入的 pin 将被保存到`pin[2]`。
*   当您输入第一个 pin 并且 的值为`ctr`3 时，输入的 pin 将被保存到`pin[3]`。

# sql - 这个左连接有什么简洁的方法吗？

> ID：13296175
> 
> 赞同：0
> 
> 时间：2012-11-08T19:20:40.993
> 
> 标签：sql

一个简单的内连接

```
select * from table1 a
inner join 
dbo.table2 b
on a.inventory_id = b.inventory_id 
```

像这样说不是很好和直观吗？

```
select * from table1 a
inner join 
dbo.table2 b
on inventory_id 
```

有没有类似的简洁方法？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T19:33:45.913

如果您使用的是 PostgreSQL、MySQL 或 Oracle，则可以使用[Natural Join](http://en.wikipedia.org/wiki/Join_%28SQL%29#Natural_join)

```
 select *
     from table1 a
  natural join table2 b 
```

不知道为什么问题标题包含“左”，但您也可以这样做`natural left join`。

不幸的是，我确定您使用的是 SQL Server，因为`dbo.`, 所以不，`ON`条件是必需的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T19:33:31.063

自然连接怎么样：

```
select *
from table1 a
natural join dbo.table2 b 
```

但是，您的 RDBMS 可能不支持它，我建议您始终在查询中指定连接类型和条件。从长远来看，它更易于维护。

我猜测`dbo.`您正在使用 SQL Server，但那里不支持它。请参阅[此处](https://stackoverflow.com/a/4826659/1121833)了解更多信息。

**编辑：**
SQL Server 再次不支持另一种可能性，但值得注意。这实际上可能值得使用，因为您的连接条件已明确指定。更多信息[在这里](http://www.java2s.com/Tutorial/Oracle/0140__Table-Joins/SimplifyingJoinswiththeUSINGKeyword.htm)。

```
select *
from table1
inner join dbo.table2 using (inventory_id) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T19:26:31.470

如果您不想使用 ANSI 标准`JOIN`，则使用隐式语法：

```
select * from table1 a, table2 b
where a.inventory_id = b.inventory_id 
```

# windows-8 - Windows 8 中的可滚动 Div/窗口（滚动视图）

> ID：13296176
> 
> 赞同：0
> 
> 时间：2012-11-08T19:20:41.227
> 
> 标签：windows-8, scrollview, winjs

我正在使用 WinJS (JavaScript) 创建一个 Windows 8 应用程序。

我希望制作一个容器，无论是 DIv 还是其他东西，我可以将内容放入其中并可以用于通过触摸滚动。

我看过弹性框，但这似乎只适用于 Internet Explorer？

我错过了什么吗？

到目前为止，这是我的标记，我想让包装器可滚动

```
<div id="wrapper">

    <div class="login_box">

        <form method="post">
            <label class="login_label">Username:</label>
            <input type="text" class="login_input" name="login_username" />
            <label class="login_label">Password:</label>
            <input type="password" class="login_input" name="login_password" />
            <input type="submit" id="login_submit" name="login_submit" />
        </form>
    </div>
</div> 
```

这是通过 CSS 完成的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T19:48:11.217

对于 WinJS，您可以将 .win-scrollview 类添加到包装器 div 中，然后使用 overflow-x 和 overflow-y css 属性来控制滚动行为。

# python - 将 python isapi-wsgi 模块分配给 iis 7.5 web 子应用程序

> ID：13296178
> 
> 赞同：2
> 
> 时间：2012-11-08T19:20:42.873
> 
> 标签：python, iis-7, wsgi, isapi-wsgi

我有一个使用 isapi-wsgi 模块运行 python 网站的 IIS 7.5 Web 服务器。由于该网站绑定到端口 80，我希望 python 网站在该网站的添加应用程序下运行。

生成相应 isapi 模块的代码如下所示

```
import isapi_wsgi

def install_virtual_dir():
    import isapi.install
    params = isapi.install.ISAPIParameters()
    # Setup the virtual directories - this is a list of directories our
    # extension uses - in this case only 1.
    # Each extension has a "script map" - this is the mapping of ISAPI
    # extensions.
    sm = [isapi.install.ScriptMapParams(Extension="*", Flags=0)]
    vd = isapi.install.VirtualDirParameters(
        Server="dsh",
        Name=site_root,
        Description="CherryPy Application Stable",
        ScriptMaps=sm,
        ScriptMapUpdate="end",
        )
    params.VirtualDirs = [vd]
    isapi.install.HandleCommandLine(params)

if __name__ == '__main__':
    # If run from the command-line, install ourselves.
    install_virtual_dir() 
```

不幸的是模块无法注册相应的dll导致错误

```
ItemNotFound: No web sites match the description 'dsh' 
```

虽然我已将应用程序“dsh”添加到网站。像“网站/dsh”这样的东西也不起作用。

有没有人遇到过同样的问题并有解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T11:42:28.173

如果有人遇到同样的问题，我从来没有解决过这个问题，我只是找到了一个解决方法，就是简单地评论而不是使用该行

```
 params.VirtualDirs = [vd] 
```

而是手动将生成的 dll 添加到 IIS 内的处理程序映射中。

# c - 复制C错误中的字符串数组

> ID：13296179
> 
> 赞同：2
> 
> 时间：2012-11-08T19:20:47.717
> 
> 标签：c, arrays, string, char, strcpy

我想将大约 20 个国家/地区名称保存到一个字符串中，然后将它们复制到另一个字符串中，但它总是给我一些错误，有人可以帮我吗？

这是我的代码：

```
char array1[30][30], array2[30][30]; 
```

这就是我将它们放入第一个数组的方式：

```
fscanf(fr, "%s", array1[i]); 
```

这一切都有效，但是当我想做时：

```
array2[0] = array1[0]; 
```

我得到错误：

```
incompatible types when assigning to type 'char[30]' from type 'char *' 
```

当我使用：

```
strcpy(array2[pom2], array1[i]); 
```

它没有显示错误，但不会复制或打印出来。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T19:26:35.510

对于第一个错误：您不能将一个数组复制到另一个数组中。您可以只复制薪金值（在您的情况下为字符）。

如果您想将一个字符串复制到另一个字符串中，您确实必须使用该`strcpy`函数（或近亲，as `strncpy`。您应该给我们完整的代码，以便我们可以看到您调用`strcpy`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T19:28:03.213

你试过逐个字符传递吗？

```
for( i = 0; i < 30; i++ ){
   for( j = 0; j < 30; j++ ){
      targetArray[ i ][ j ] = sourceArray[ i ][ j ];

      /* End of the string, stop copying */
      if ( sourceArray[ i ][ j ] == '\0' ){
         break;
      }
   }
} 
```

# jquery - JQuery ajax调用更新字符删除

> ID：13296180
> 
> 赞同：0
> 
> 时间：2012-11-08T19:20:51.197
> 
> 标签：jquery, ajax

我有一个小的 jQuery 函数，它根据邮政编码输入字段从服务器收集数据：

```
$(document).ready(function(){
  $('#id_zipcode').keyup(function() {
    var selected = this.value;
    if (selected.length > 3) {
        $.getJSON(get_zip_factors_url, {
            zipcode: selected
        }, function(env_data, jqXHR) {
            $('#snow_fall').html(env_data[0].snow);
            $('#wind_speed').html(env_data[0].wind);
        });
    }
  }).keyup();
}); 
```

这现在工作正常。`#snow_fall`但是，如果用户删除字符，则呈现的值将`#wind_speed`持续存在。当用户删除导致服务器没有返回有效数据的字符时，有什么方法可以注册此删除并将值恢复为“不可用”字符串？

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T19:32:32.533

我可能只是这样修改响应：

```
$.getJSON(get_zip_factors_url, {
            zipcode: selected
        }, function(env_data, jqXHR) {
            if(env_data[0].valid == true )
            {
                $('#snow_fall').html(env_data[0].snow);
                $('#wind_speed').html(env_data[0].wind);
            } else {
                $('#snow_fall').html('Not Available');
                $('#wind_speed').html('Not Available');
            }
        }); 
```

或者，您可以只跟踪输入的 zip 或全局长度，只需检查即可，而无需经历进行 ajax 调用的麻烦。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T19:34:17.697

如果您正在查找邮政编码值，为什么不更改为 if(selected.length == 5)，然后使用 if 语句的 else 将 snow_fall 和 wind_speed 设置为“不可用”？

# expressionengine - 如何返回最近的频道进入/评论日期？

> ID：13296183
> 
> 赞同：2
> 
> 时间：2012-11-08T19:21:00.940
> 
> 标签：expressionengine

老实说，我并不期待这个问题的答案。虽然听起来很简单，但我认为它可能涉及很多。

对于给定的频道，我想返回一个日期/时间——它将是*最新*的频道进入日期或最近的评论日期，以最近的日期/时间为准。

干杯李

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-08T20:57:45.463

使用此处的统计模块返回所需的数据

[http://expressionengine.com/user_guide/modules/statistics/index.html#variables](http://expressionengine.com/user_guide/modules/statistics/index.html#variables)

```
{exp:stats}
            Last Comment Date : {last_comment_date format="%m/%d/%Y %h:%i %a"}
            Last Entry Date : {last_entry_date format="%m/%d/%Y %h:%i %a"}
    {/exp:stats} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-09T00:38:52.267

您可以尝试使用 IfElse 插件来确保不输出 IfElse 条件。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-08T22:18:45.950

您可以使用统计模块（如约翰所说），但以下代码将按照您的要求输出评论或条目数据：

```
{exp:stats}
  {if last_comment_date > last_entry_date}
    {!-- Comment is more recent --}
    {last_comment_date format="..."}
  {if:else}
    {!-- Entry is more recent --}
    {last_entry_date format="..."}
  {/if}
{/exp:stats} 
```

# python - 如何添加到导航 pinax（0.9a2）的链接？

> ID：13296185
> 
> 赞同：0
> 
> 时间：2012-11-08T19:21:06.250
> 
> 标签：python, django, error-handling, navigation, pinax

我想在 pinax 中添加到标准引导主题的新链接。我试图在我的网站中实现：

```
{% block nav %}
    {% if user.is_authenticated %}
        <ul>{% spaceless %}
            <li id="tab_profile"><a href="{% url profile_detail user.username %}">{% trans "Profile" %}</a></li>
            <li id="tab_notices"><a href="{% url notification_notices %}">{% trans "Notices" %}{% if notice_unseen_count %} ({{ notice_unseen_count }}){% endif %}</a></li>
        {% endspaceless %
            <li id="tab_first">
                <a href="#">First Link</a>
            </li>
        }</ul>
    {% endif %}
{% endblock %} 
```

但我收到一个错误：

> / 处的模板语法错误
> 
> 无效的块标签：“endif”，预期为“endspaceless”

因此，如何向导航栏添加新链接？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T06:08:55.303

你有一个语法错误，你没有`endspaceless`正确终止：

```
{% endspaceless %
    <li id="tab_first">
        <a href="#">First Link</a>
    </li>
}</ul> 
```

应该：

```
{% endspaceless %}
    <li id="tab_first">
        <a href="#">First Link</a>
    </li>
</ul> 
```

# c# - 从引用网站获取主域名

> ID：13296187
> 
> 赞同：0
> 
> 时间：2012-11-08T19:21:13.667
> 
> 标签：c#, asp.net, blogspot

当我们从安装了我们的小部件的用户那里获取请求时，我们依赖于引用 url，它只是 iframe，类似于 Google plus 按钮、Facebook Like 等。

最近我们注意到 Google 的 blogspot 博客可以使用多个具有不同结尾的 url 访问，例如：

```
*.blogspot.com
*.blogspot.fr 
*.blogspot.co.uk 
... 
```

现在我们的数据库充满了重复的网站。有什么方法可以像 *.blogspot.com 这样每次都获得真实地址

有没有其他网站可以做这样的事情，通过不同的域提供它们而不重定向到真实的域，或者是 blogspot 特定的？

facebook 如何处理这个问题，在 blogspot 上拥有博客的人是否对不同的域有不同的喜欢计数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T19:32:58.477

您可以对 CNAME 条目进行[dns 查找](http://msdn.microsoft.com/en-us/library/system.net.dns.aspx)。

```
var host = Dns.GetHostByName("www.blogspot.com").HostName;
// host == "blogger.l.google.com" 
```

如果主机 DNS 包含 CNAME，则该`HostName`属性将返回 CNAME。

以下描述可能会有所帮助：

> CNAME 记录或规范名称记录是域名系统 (DNS) 中的一种资源记录类型，它指定域名是另一个规范域名的别名。这里的“规范”通常意味着：一个更普遍接受或标准的名称。（[维基百科](http://en.wikipedia.org/wiki/CNAME_record)）

# iphone - 本地通知“每天早上 7:00”未通知

> ID：13296190
> 
> 赞同：1
> 
> 时间：2012-11-08T19:21:20.557
> 
> 标签：iphone, ios, xcode, ipad, uilocalnotification

我希望每天 7:00 发出通知，但它不会发出。我也希望它显示在锁定屏幕中。这是我到目前为止的所有代码。

```
-(void)EveryDayNotify

{

    NSLog(@"Good Morning Working");

    UILocalNotification *localNotification = [[UILocalNotification alloc] init];

    [localNotification setAlertBody:@"Good Morning! Have a great day!"];
    localNotification.soundName = UILocalNotificationDefaultSoundName;
    localNotification.applicationIconBadgeNumber = 1;

    localNotification.repeatInterval = NSDayCalendarUnit;

    NSCalendar *calendar = [NSCalendar currentCalendar]; // gets default calendar
    NSDateComponents *components = [calendar components:(NSYearCalendarUnit | NSMonthCalendarUnit |  NSDayCalendarUnit | NSHourCalendarUnit | NSMinuteCalendarUnit) fromDate:[NSDate date]]; // gets the year, month, day,hour and minutesfor today's date
    [components setHour:07];
    [components setMinute:0];

    localNotification.fireDate = [calendar dateFromComponents:components];

    [localNotification release];
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-08T19:32:30.790

尝试使用这个：

```
- (void)applicationDidEnterBackground:(UIApplication *)application 
{

NSCalendar *calendar = [NSCalendar autoupdatingCurrentCalendar];

NSDateComponents *componentsForReferenceDate = [calendar components:(NSCalendarUnitDay | NSCalendarUnitYear | NSCalendarUnitMonth ) fromDate:[NSDate date]];

[componentsForReferenceDate setDay:9];
[componentsForReferenceDate setMonth:11];
[componentsForReferenceDate setYear:2012];

NSDate *referenceDate = [calendar dateFromComponents:componentsForReferenceDate];

// set components for time 7:00 a.m.

NSDateComponents *componentsForFireDate = [calendar components:(NSCalendarUnitYear | NSCalendarUnitHour | NSCalendarUnitMinute | NSCalendarUnitSecond ) fromDate: referenceDate];

[componentsForFireDate setHour:7];
[componentsForFireDate setMinute:0];
[componentsForFireDate setSecond:0];

NSDate *fireDateOfNotification = [calendar dateFromComponents:componentsForFireDate];

// Create the notification

UILocalNotification *notification = [[UILocalNotification alloc] init];

notification.fireDate = fireDateOfNotification;
notification.timeZone = [NSTimeZone localTimeZone];
notification.alertBody = [NSString stringWithFormat: @"Good Morning! Have a great day!"];
notification.alertAction = @"go back";
notification.userInfo= @{@"information": [NSString stringWithFormat:@"Some information"]};
notification.repeatInterval= NSCalendarUnitDay;
notification.soundName = UILocalNotificationDefaultSoundName;
notification.applicationIconBadgeNumber = 1;
[[UIApplication sharedApplication] scheduleLocalNotification:notification];

} 
```

如果这有帮助，请竖起大拇指！:D

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T19:25:05.397

你需要打电话

```
[[UIApplication sharedApplication] scheduleLocalNotiication:localNotification]; 
```

在你释放之前`localNotification`。您的代码完成了所有设置，但实际上并没有安排它，这就是您永远不会得到它的原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-19T08:41:54.603

尽管这是一个非常古老的问题，但我刚从谷歌来到这里，是的，每个人都通过复制其他人的答案来回答这不是很有趣吗？

因此，对于所有像我这样来自谷歌的人，请对 mite 让您花一两分钟想知道为什么它不起作用的拼写错误大笑。

```
[[UIApplication sharedApplication] scheduleLocalNotification:localNotification]; 
```

有效，但是

```
[[UIApplication sharedApplication] scheduleLocalNotiication:localNotification]; 
```

通知不...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-10-30T07:16:23.740

## 它正在工作

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {
        // Override point for customization after application launch.

        NSCalendar *calendar = [NSCalendar autoupdatingCurrentCalendar];

        NSDateComponents *componentsForReferenceDate = [calendar components:(NSCalendarUnitDay | NSCalendarUnitYear | NSCalendarUnitMonth ) fromDate:[NSDate date]];

        [[UIApplication sharedApplication] cancelAllLocalNotifications];

        [componentsForReferenceDate setDay:27];
        [componentsForReferenceDate setMonth:10];
        [componentsForReferenceDate setYear:2016];

        NSDate *referenceDate = [calendar dateFromComponents:componentsForReferenceDate];

        // set components for time 7:00 a.m.

        NSDateComponents *componentsForFireDate = [calendar components:(NSCalendarUnitYear | NSCalendarUnitHour | NSCalendarUnitMinute | NSCalendarUnitSecond ) fromDate: referenceDate];

        [componentsForFireDate setHour:8];
        [componentsForFireDate setMinute:0];
        [componentsForFireDate setSecond:0];

        NSDate *fireDateOfNotification = [calendar dateFromComponents:componentsForFireDate];

        // Create the notification

        UILocalNotification *notification = [[UILocalNotification alloc] init];

        notification.fireDate = fireDateOfNotification;
        notification.timeZone = [NSTimeZone localTimeZone];
        notification.alertBody = [NSString stringWithFormat: @"БЛАГОСЛОВИТЕ ПРОРОКА (с.а.в)"];
        notification.repeatInterval= NSCalendarUnitDay;
        notification.soundName = UILocalNotificationDefaultSoundName;
        [[UIApplication sharedApplication] setApplicationIconBadgeNumber: 1];
        [[UIApplication sharedApplication] scheduleLocalNotification:notification];
        [[UIApplication sharedApplication] setApplicationIconBadgeNumber: 0];

        return YES;

    } 
```

# perforce - Perforce 不同步所有文件

> ID：13296191
> 
> 赞同：0
> 
> 时间：2012-11-08T19:21:29.877
> 
> 标签：perforce

在这里，我面临的情况略有不同。当我从 depot 获得最新版本时，在 48,805 个文件中我只有 48,771 个。其余 34 个文件显示如下错误

**“文件大小太长”** 这个问题有什么更好的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T17:07:21.900

这个问题[在这里](http://forums.perforce.com/index.php?/topic/418-the-file-name-is-too-long/)得到了很好的回答。文件名长度限制来自 Windows。如果可以的话，缩短你的`Workspace root`路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-21T05:16:53.483

正如@emartel 给出的链接中所解释的那样，这是一个 Windows 限制 Perforce 不能帮助您，但是您可以巧妙地选择您的工作区。默认情况下，Perforce 将工作空间设置为与服务器路径相同（通常会更大）。[这](https://stackoverflow.com/questions/7030296/how-do-i-move-a-perforce-workspace-folder)将帮助你改变它。

# visual-studio-2012 - 从我的模板创建新项目时收到错误消息

> ID：13296197
> 
> 赞同：5
> 
> 时间：2012-11-08T19:21:56.193
> 
> 标签：visual-studio-2012, project-template

我从现有项目创建了一个项目模板，在本例中它只是一个资源 DLL。

我用 $projectname$ 标记替换了项目中的一些数据，以便内容和文件名采用我输入的值作为项目名称。当我从模板创建一个新项目时，我看到 2 个对话框，第一个似乎表明成功，即

```
The operation completed successfully. 
```

第二个表示存在访问冲突，即

```
Access is denied. (Exception from HRESULT: 0x80070005 (E_ACCESSDENIED)) 
```

我按下确定按钮，新项目没有出现。我检查了磁盘，只创建了项目文件（vcxproj），在这种情况下它看起来很好，没有创建其他文件。

我检查了 vcxproj 文件，它看起来很好。

其他信息：

*   我正在使用 VS 2012
*   VS 以管理员模式启动
*   目标位置是我的文档文件夹

任何想法？

//*蛋盒

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-06T11:07:03.207

SolutionName.vcxproj 文件包含有关其他编译文件的信息。解决方案必须编译的所有文件必须位于与 SolutionName.vcxproj 文件相同的文件夹下。

这是一个非常有趣的问题，与*vcxproj 文件的下一行相关*

```
<ItemGroup>
<ClCompile Include="Example\AdditionCompiledFile.cpp" />
<ClCompile Include="ConsoleApplication1.cpp" />
<ClCompile Include="stdafx.cpp">
  <PrecompiledHeader Condition="'$(Configuration)|$(Platform)'=='DebugMD|Win32'">Create</PrecompiledHeader>
</ClCompile> 
```

该问题也在 VS 2013 上重现。

# asp.net-mvc - 格式化来自 ASP.Net MVC 4 Web API 的 JSON 输出

> ID：13296198
> 
> 赞同：2
> 
> 时间：2012-11-08T19:22:02.573
> 
> 标签：asp.net-mvc, json, asp.net-mvc-4

我有一个 Web API 项目，其模型如下所示：

```
public class Account{

string FirstName{get;set;}
string LastName{get;set;}
} 
```

我希望 JSON 响应对属性使用不同的格式和大小写，如下所示：

```
first_name
last_name 
```

有没有办法通过某种 json 格式化程序全局执行此操作，或者最好创建具有​​适当大小写的单独 ViewModel 类？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T19:29:56.923

出于多种原因，您应该创建单独的视图模型类。

最好使用单独的视图模型类，以免模型过度曝光。如果您使用具有 10 个字段的实体类作为视图模型，并且您只想公开其中的 5 个，那么恶意用户可能会使用查询字符串发布额外的数据，并且自动绑定可能会在您没有意识到的情况下将其融合.

在您的示例情况下，您可能希望对字段使用完全不同的名称。这是为您的实体类制作自定义视图模型的完美候选者。

分离这些关注点将有助于您的应用程序在未来更加可重用，并且在当前更容易测试/调试。如果您发现自己处于视图模型过多的情况，请考虑将这些不同的控制器、视图和模型分解为单独的区域（[关于区域的博客](http://www.codeguru.com/csharp/.net/net_asp/mvc/article.php/c20227/Using-Areas-in-ASPNET-MVC-Application.htm)）。

附带说明一下，如果您想格式化 JSON，那么在事后用 javascript 而不是事前进行可能更容易，因为通常编辑 JSON 序列化程序类是一项很大的工作。您可以编写一个脚本，该脚本会自动将驼峰大小写转换为`_`单独的小写。这样做的一个缺点是，如果您不期望功能会像那样执行，它可能会在未来产生意想不到的影响。

# c - Valgrind：在分配内存时跳转或移动取决于未初始化的值

> ID：13296203
> 
> 赞同：2
> 
> 时间：2012-11-08T19:22:18.463
> 
> 标签：c, memory-management, valgrind

我似乎无法弄清楚为什么会收到此错误。我运行 valgrind，它说 newNode = (NodeType *)malloc(sizeof(NodeType)); 正在创建错误，但我不知道为什么...基本上我要做的是初始化传入的大小为 n 的链表并将头部设置为第一个节点。

```
typedef struct {
  int number;
  AnotherNodeType *anotherLinkedList;
} Type;

typedef struct Node{
  Type *data;
  struct Node *next;
} NodeType;

int main(){
  NodeType *nodePointer = NULL;
  initLinkedList(&nodePointer, 10);
  return 0;
}

void initLinkedList(NodeType **nodePointer, int n){
  int i;
  NodeType *prevNode, *newNode;
  prevNode = NULL;
  for (i = 0; i < n; i++){
    newNode = (NodeType *)malloc(sizeof(NodeType));
    newNode->data = (Type *)malloc(sizeof(Type));
    newNode->data->number = i;
    newNode->data->anotherLinkedList = NULL;
    if (prevNode == NULL){
      *nodePointer = newNode;
    }
    else{
      prevNode->next = newNode;
    }
    prevNode = newNode;
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T19:41:33.127

您没有`newNode->next`在`initLinkedList`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T19:46:05.530

正如@aib 所说，您没有初始化列表最后一项的“下一个”元素。

您应该在 malloc 之后将其初始化为 null。

问题是：当您遍历列表时，当您到达最后一项时，它的“下一个”值将未初始化，并且您可能会结束段错误，您必须将其初始化为 null 才能知道您已经到达列表的末尾。

# c# - 如何在 c# 中将字符串从 koi8-r 转换为 windows-1251？

> ID：13296212
> 
> 赞同：0
> 
> 时间：2012-11-08T19:22:36.730
> 
> 标签：c#, character-encoding

> **可能重复：**
> [C# 中的西里尔文编码](https://stackoverflow.com/questions/12013659/cyrillic-encoding-in-c-sharp)

我有的

```
string str = "уРБУЙВП ЧБН ЪБ ЧБЫХ РПНПЭШ"; //cyrillic
//I check this on 
site == http://2cyr.com/decode/?lang=en

str == koi8-r
if ( I decoder from the site)
  readeble text == windows-1251; 
```

如何将 koi8 转换为 windows-1251 ？

# php - 正确使用 PHP switch 语句

> ID：13296213
> 
> 赞同：2
> 
> 时间：2012-11-08T19:22:38.027
> 
> 标签：php

> **可能重复：**
> [如何在 PHP 中使用 switch case 'or'？](https://stackoverflow.com/questions/207002/how-to-use-a-switch-case-or-in-php)

我想用switch做一个测试，这是我写的代码：

```
<?php

    $moisActuelle = date("n");
    switch($moisActuelle)
    {
        case 1 || 2 || 3 : 
             echo'L\'hiver';
             break;
        case 4 || 5 || 6 : 
             echo'Le printemp';
             break;
        case 7 || 8 || 9 : 
             echo'L\'été';
             break;
        case 10 || 11 || 2 : 
             echo'L\'automne';
             break;

    }

?> 
```

但是无论 $moisActuelle 是什么，这段代码总是执行第一种情况。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T19:24:29.080

```
switch($moisActuelle)
{
    case 1: 
    case 2: 
    case 3: 
         echo'L\'hiver';
         break;
} 
```

Switch 语句将寻找第一个真正的案例，在该语句之后将继续执行所有操作，直到找到`break`或`default`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T19:24:51.937

我不确定你是否可以这样做，但这是一种方法：

```
<?php

    $moisActuelle = date("n");
    switch($moisActuelle)
    {
        case 1:
        case 2:
        case 3: 
             echo'L\'hiver';
             break;
        // etc
    }

?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T19:32:26.937

我更喜欢使用这种方式：

```
<?php
    $decisionTable = array(
        '1' => 'L\'hiver',
        '2' => 'L\'hiver',
        '3' => 'L\'hiver',

        '4' => 'Le printemp',
        '5' => 'Le printemp',
        '6' => 'Le printemp',

        '7' => 'L\'été',
        '8' => 'L\'été',
        '9' => 'L\'été',

        '10' => 'L\'automne',
        '11' => 'L\'automne',
        '12' => 'L\'automne',
    );

    $moisActuelle = date("n");
    echo $decisionTable[$moisActuelle];
?> 
```

或者，如果你想使用`swicth`：

```
<?php

    $moisActuelle = date("n");
    switch(true)
    {
        case in_array($moisActuelle, array(1, 2, 3)): 
             echo'L\'hiver';
             break;
        case in_array($moisActuelle, array(4, 5, 6)): 
             echo'Le printemp';
             break;
        case in_array($moisActuelle, array(7, 8, 9)): 
             echo'L\'été';
             break;
        case in_array($moisActuelle, array(10, 11, 12)): 
             echo'L\'automne';
             break;
    }

?> 
```

# mathml - 在 mathml 中保留括号

> ID：13296214
> 
> 赞同：0
> 
> 时间：2012-11-08T19:22:43.423
> 
> 标签：mathml, sbml

我正在使用 SBML，它是一种用于捕获数值模拟的 XML 格式。这使用 MathML 来捕获与模拟中不同事物的数量相关的方程式。当我手工写下方程式时，我添加了一些不是严格需要的括号，但这样可以使方程式更易于阅读。例如，我可能有一个方程式，我会手写如下：

```
z = (ax + by) + (cx + dy) 
```

当它进入 MathML 时，这些括号被去掉了，一旦我漂亮地打印了 MathML，它就会出现：

```
z = ax + by + cx + dy 
```

这让我很难过。有没有办法在 MathML 表达式中捕获这些（冗余）括号？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T22:40:09.127

是的，您没有说您使用的是演示文稿还是内容 mathml。我会猜测内容，因为您很少会在演示文稿渲染中丢失括号。

内容 MathML，您可以将其标记为

```
<apply><sum/>
  <apply><csymbol>bracket</csymbol>
    <apply><sum/>
      <apply><product/><mi>a</mi><mi>x</mi></apply>
      <apply><product/><mi>b</mi><mi>y</mi></apply>
    </apply>
   </apply>
  <apply><csymbol>bracket</csymbol>
    <apply><sum/>
      <apply><product/><mi>c</mi><mi>x</mi></apply>
      <apply><product/><mi>d</mi><mi>y</mi></apply>
    </apply>
   </apply>
</apply> 
```

你给 csymbol 括号一个表示规则，在它的参数周围加上一个括号。

# c# - 在 Visual Studio 的设计器中，为什么没有任何图像显示在“选择资源”窗口中？

> ID：13296223
> 
> 赞同：7
> 
> 时间：2012-11-08T19:23:12.377
> 
> 标签：c#, visual-studio-2010, resources, embedded-resource

![为什么没有图像显示](../Images/75b11ef60e9453c529a72ba370a0d8d0.png)

我通过在设计器中单击`Button`我的 a `Form`，进入“属性”窗口，找到“图像”属性，然后点击`...`出现在文本框右侧的按钮。

如果我在设计器中打开 Properties\Resources.resx 文件，我会看到我的项目中的所有图像，但我无法在此列表中查看它们。我想我可以从目录中导入我想要的图像，但是我会有重复的。

如何从此对话框中选择资源文件中的图像？我怎样才能让他们出现？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T19:37:42.270

您可能应该`Import`先单击该按钮，然后再添加图像。这会将它们添加到资源文件夹中。您应该从视觉工作室执行此操作，而不是通过资源管理器

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-18T17:24:34.653

我有同样的问题，但这是一个简单的答案。我的解决方案中有多个项目，并将我的公共资源整合到一个单独的程序集中。资源必须位于同一项目（程序集）中，以便您使用的任何想要使用图像的控件的设计者可以访问这些资源。否则，您必须在运行时获取图像。

# asp.net - div中的Asp.Net控件未显示在浏览器中

> ID：13296224
> 
> 赞同：1
> 
> 时间：2012-11-08T19:23:17.383
> 
> 标签：asp.net

我有一张由 div 组成的表格。有一个主 div 作为表格，然后 div 作为表格单元格和表格行。在单元格内，我有一个标签和一个文本框。都是 Asp.Net 控件（文本框，标签）。除了一个特定的列之外，所有内容似乎都显示在浏览器中，我不知道为什么。“娘家姓”栏不会显示。

代码：

```
<div class="block">
           <div class="line">

                <div class="labelcell">
                    <asp:Label ID="lblPersonLastName" runat="server" Text="Last Name: "  meta:resourcekey="lblPersonLastNameResource1"/>
                </div>
                <div class="cell"> 
                    <asp:TextBox ID="txtPersonLastName" runat="server" MaxLength="200" Width="120px" meta:resourcekey="txtPersonLastNameResource1"/>
                </div>

                 <div class="labelcell">
                    <asp:Label ID="lblPersonDateOfBirth" runat="server" Text="Date of Birth:" meta:resourcekey="lblPersonDateOfBirthResource1"/>
                </div>
                <div class="cell">
                    <asp:TextBox ID="txtPersonDateOfBirth" runat="server" MaxLength="20" Width="120px" meta:resourcekey="txtPersonDateOfBirthResource1"/>
                    <asp:RegularExpressionValidator ID="regValDate" runat="server" ControlToValidate="txtPersonDateOfBirth" ErrorMessage="Date format must be YYYY/MM/DD or YYYY-MM-DD" ValidationExpression="(^[0-9]{4,4}(/|-)[0-1][0-9](/|-)[0-3][0-9]$)" ValidationGroup="AddPerson" meta:resourcekey="regValDateResource1">*</asp:RegularExpressionValidator>
                </div>

            </div>

            <div class="line">
               <div class="labelcell"> 
                    <asp:Label ID="lblPersonFirstName" runat="server" Text="First Name: " meta:resourcekey="lblPersonFirstNameResource1"/>
                </div>
                <div class="cell">    
                    <asp:TextBox ID="txtPersonFirstName" runat="server" MaxLength="200" Width="120px" meta:resourcekey="txtPersonFirstNameResource1"/>
                </div>

                <div class="labelcell">
                    <asp:Label ID="lblPersonAgeRange" runat="server" Text="Age Between:" meta:resourcekey="lblPersonAgeRangeResource1"/>
                </div>
                <div class="cell">
                    <asp:TextBox ID="txtPersonAgeRangeLow" runat="server" Width="30px" meta:resourcekey="txtPersonAgeRangeLowResource1"/>
                    &nbsp;<asp:Label ID="lblPersonAgeRangeAnd" runat="server" Text="and" Height="25px" meta:resourcekey="lblPersonAgeRangeAndResource1"/>&nbsp;
                    <asp:TextBox ID="txtPersonAgeRangeHigh" runat="server" Width="30px" meta:resourcekey="txtPersonAgeRangeHighResource1" />
                </div>
            </div>

            <div class="line">
                <div class="labelcell">
                     <asp:Label ID="lblPersonMiddleName" runat="server" Text="Middle Name: " meta:resourcekey="lblPersonMiddleNameResource1"/>
                </div>
                <div class="cell"> 
                    <asp:TextBox ID="txtPersonMiddleName" runat="server" MaxLength="128" Width="120px" meta:resourcekey="txtPersonMiddleNameResource1"/>
                </div>
                <div class="labelcell">
                    <asp:Label ID="lblPersonSex" runat="server" Text="Sex:" meta:resourcekey="lblPersonSexResource1"/>
                </div>
                <div class="cell">
                    <asp:RadioButton ID="rdbPersonSexMale" runat="server" AutoPostBack="True" OnDataBinding="SexChange" OnCheckedChanged="SexChange" GroupName="PersonSex" Text="Male " meta:resourcekey="rdbPersonSexMaleResource1"/>
                    <asp:RadioButton ID="rdbPersonSexFemale" runat="server" AutoPostBack="True" OnDataBinding="SexChange"  OnCheckedChanged="SexChange" GroupName="PersonSex" Text="Female " meta:resourcekey="rdbPersonSexFemaleResource1" />
                </div>
            </div>

            <div class="line">

            <div class="labelcell">
                <asp:Label ID="lblPersonStatus" runat="server" Text="Status:"  meta:resourcekey="lblPersonStatusResource1"/>
              </div>
              <div class="cell"> 
                 <asp:DropDownList ID="ddlPersonStatus" runat="server" AppendDataBoundItems="True" DataSourceID="dsPersonStatus" DataTextField="Status" DataValueField="StatusID" OnPreRender="ddlPersonStatus_PreRender" Width="120px" meta:resourcekey="ddlPersonStatusResource1">
                    <asp:ListItem Value="-1" meta:resourcekey="ListItemResource2">--Select--</asp:ListItem>
                </asp:DropDownList>
            </div>
                 <div class="labelcell">
                     <asp:Label ID="lblPersonMaidenName" runat="server" Text="Maiden Name:" meta:resourcekey="lblPersonMaidenNameResource1"/>
                </div>
                <div class="cell">
                     <asp:TextBox ID="txtPersonMaidenName" runat="server" MaxLength="200" Width="120px" meta:resourcekey="txtPersonMaidenNameResource1"/>
                </div>

            </div>

            <div class="line">
              <div class="labelcell">
                     <asp:Label ID="lblPersonThirdName" runat="server" Text="Third Name: " meta:resourcekey="lblPersonThirdNameResource1"/>
                </div>
                <div class="cell"> 
                    <asp:TextBox ID="txtPersonThirdName" runat="server" MaxLength="128" Width="120px" meta:resourcekey="txtPersonThirdNameResource1"/>
                </div>
                <div class="labelcell">
                    <asp:Label ID="lblPersonFps" runat="server" Text="FPS: "  meta:resourcekey="lblPersonFpsResource1"/>
                </div>
                <div class="cell"> 
                    <asp:TextBox ID="txtPersonFps" runat="server" MaxLength="200" Width="120px" meta:resourcekey="txtPersonFpsResource1"/>
                </div>
            </div> 
            <div class="line">
                <div class="labelcell">
                     <asp:Label ID="lblPersonForthName" runat="server" Text="Fourth Name: " meta:resourcekey="lblPersonForthNameResource1"/>
                </div>
                <div class="cell"> 
                    <asp:TextBox ID="txtPersonForthName" runat="server" MaxLength="128" Width="120px" meta:resourcekey="txtPersonForthNameResource1"/>
                </div>
                 <div class="labelcell">
                    <asp:Label ID="lblPersonEthnicity" runat="server" Text="Ethnicity:"  meta:resourcekey="lblPersonEthnicityResource1"/>
                 </div>
                <div class="cell">
                   <asp:DropDownList ID="ddlPersonEthnicity" Width="120px" runat="server" AppendDataBoundItems="True" DataSourceID="dsPersonEthnicity" DataTextField="Ethnicity" DataValueField="EthnicityID" OnPreRender="ddlPersonEthnicity_PreRender" meta:resourcekey="ddlPersonEthnicityResource1">
                        <asp:ListItem Value="-1" meta:resourcekey="ListItemResource1">--Select--</asp:ListItem>
                    </asp:DropDownList>
                 </div>

            </div> 
        </div> 
```

这部分似乎不会出现在浏览器中：

```
 <div class="labelcell">
                     <asp:Label ID="lblPersonMaidenName" runat="server" Text="Maiden Name:" meta:resourcekey="lblPersonMaidenNameResource1"/>
                </div>
                <div class="cell">
                     <asp:TextBox ID="txtPersonMaidenName" runat="server" MaxLength="200" Width="120px" meta:resourcekey="txtPersonMaidenNameResource1"/>
                </div> 
```

它在 HTML 中的显示方式（娘家姓部分）：

```
<div class="labelcell"></div>

<div class="cell"></div> 
```

这是确实出现的“线”：

```
<div class="line">
              <div class="labelcell">
                     <span id="lblPersonThirdName">Third Name: </span>
                </div>
                <div class="cell"> 
                    <input name="txtPersonThirdName" type="text" maxlength="128" id="txtPersonThirdName" style="width:120px;">
                </div>
                <div class="labelcell">
                    <span id="lblPersonFps">FPS: </span>
                </div>
                <div class="cell"> 
                    <input name="txtPersonFps" type="text" maxlength="200" id="txtPersonFps" style="width:120px;">
                </div>
            </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T19:51:14.447

将 Visible 属性设置为 false 的 ASP.NET 服务器控件不会呈现到页面 html。确保控件 lblPersonMaidenName 和 txtPersonMaidenName 在页面呈现之前可见。

# c - 将整数解释为指向动态字符串的指针，来自指向指针的指针指向的动态块

> ID：13296228
> 
> 赞同：2
> 
> 时间：2012-11-08T19:24:01.633
> 
> 标签：c, string, pointers, dynamic, casting

我说得有道理吗？这就是我想要做的：

```
unsigned int *a = 0;
unsigned int **b = &a;
// b -> a -> null

*b = (unsigned int*)malloc(12);
// b -> a -> [xxxx|xxxx|xxxx]

*(*b+1) = (unsigned int)malloc(sizeof("come on!"));
// b -> a -> [xxxx|xxxx|xxxx]
//                 v
//                [xxxxxxxxx]

strcpy((char*)*(*b+1),"come on!");  // FAILS! why? 
```

我不确定我还能描述什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T19:46:02.100

它在 32 位环境下运行良好。但是@Blagovest Buyukliev 是正确的，因为您不应该对指针的大小做出假设（即使它似乎有效）。您最好将那些*unsigned int*更改为*char* *´s。请参见下面稍作修改的版本：

```
char* *a = 0;
char* **b = &a;
// b -> a -> null

*b = malloc(12);
// b -> a -> [xxxx|xxxx|xxxx]

*((*b)+1) = malloc(sizeof("come on!"));
// b -> a -> [xxxx|xxxx|xxxx]
//                 v
//                [xxxxxxxxx]

strcpy(*((*b)+1),"come on!");  // FAILS! why?

printf("%s", a[1]); 
```

也就是说，即使它有效并且可能是学习指针和内存的好方法，您也应该检查语言的使用情况。
我添加了一个*printf()*来查看字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T19:52:25.753

我不知道这个程序的真正意图，但考虑到可视化，我认为你错了，我会重写如下：

```
// why do you need a at all? b can be initialised to NULL without a second variable
// unsigned int *a = NULL;
unsigned int **b = NULL;

// you are allocating 3 pointers here
b = malloc(sizeof(unsigned int *) * 3);
// b -> [xxxx|xxxx|xxxx]

// the second pointer is made to point to newly allocated memory
*(b + 1) = malloc(sizeof("come on!"));
// b -> [xxxx|xxxx|xxxx]
//            v
//           [xxxxxxxxx]

strcpy((char *) *(b + 1), "come on!"); 
```

还要注意使用`sizeof(unsigned int *)`来确定指针的大小，而不是依赖硬编码的、不可靠的假设。

# c# - 如何将多维数组传递给 ASP.NET MVC 3 JsonResult Controller

> ID：13296229
> 
> 赞同：1
> 
> 时间：2012-11-08T19:24:00.830
> 
> 标签：c#, jquery, ajax, asp.net-mvc, json

我有两个 javascript 数组，我需要将它们传递到 MVC 3 控制器，然后将值输入数据库。我有两个复选框列表和两个列表容器的更改事件，以获取它们的复选框 id 和选中值，然后将它们添加到数组中。

```
 @{
        ViewBag.Title = "JS Arrays in ASP.NET MVC 3";
    }

<script type="text/javascript">
    $(document).ready(function () {
        $("#tabs").tabs();
    });
</script>
<p>Use the form below to check items from the lists and save them to the database.</p>

<div id="tabs">
    <ul>
        <li><a href="#tabs-1">Pre-Accept</a></li>
        <li><a href="#tabs-2">Post-Accept</a></li>
    </ul>
    <div id="tabs-1">
        <div id="checklist1">
            <table>
                <tbody>
                    <tr>

                        <td>
                            <input type="checkbox" id="StudentPreAccept.Transcripts" />
                        </td>
                        <td>Transcripts
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <input type="checkbox" id="StudentPreAccept.BiographicalInfo" />
                        </td>
                        <td>Biographical Info
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <input type="checkbox" id="StudentPreAccept.PersonalEssay" />
                        </td>
                        <td>Personal Essay
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <br />
        <button id="savePreAccept" onclick="saveAcceptList();">Save Pre-Accept</button>
    </div>
    <div id="tabs-2">
        <div id="checklist2">
            <table>
                <tbody>
                    <tr>

                        <td>
                            <input type="checkbox" id="StudentPostAccept.EnrollmentFee" />
                        </td>
                        <td>Enrollment Fee
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <input type="checkbox" id="StudentPostAccept.Photo" />
                        </td>
                        <td>Photo
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <input type="checkbox" id="StudentPostAccept.TravelItinerary" />
                        </td>
                        <td>Travel Itinerary
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <br />
        <button id="savePostAccept" onclick="saveAcceptList();">Save Post-Accept</button>
    </div>
</div>
<div id="results"></div>

<script type="text/javascript">
    var preAcceptArray = { };
    var postAcceptArray = { };

    $(" #checklist1 [type='checkbox']").change(function() {                       
        // add to the preAcceptArray
        var id = $(this).attr('id');
        var checked = $(this).is(':checked') ? 'True' : 'False';
        preAcceptArray[id] = checked;

        console.log(JSON.stringify(preAcceptArray));
    });
    $(" #checklist2 [type='checkbox']").change(function () {
        // add to the postAcceptArray
        var id = $(this).attr('id');
        var checked = $(this).is(':checked') ? 'True' : 'False';
        postAcceptArray[id] = checked;

        console.log(JSON.stringify(postAcceptArray));
    });

    function saveAcceptList() {
        $.post('/Home/UpdateLists', {
                preAcceptList  : preAcceptArray,
                postAcceptList : postAcceptArray
            }, function(response) {
                $("#results").html(response);
            }, "json");
    }

</script> 
```

然后在控制器方面，我有一个 JsonResult 操作，它接受两个参数作为输入。

```
 [HttpPost]
    public JsonResult UpdateLists(string[][] preAcceptList, string[][] postAcceptList)
    {
        // do something with the lists             

        // return the result
        return Json("List(s) updated successfully.", JsonRequestBehavior.AllowGet);
    } 
```

问题是无论我传入什么类型的参数，我都无法从 ajax 帖子中获取值。我应该将它们作为 JSON 传递，然后只解析 JSON 吗？

我知道我错过了一些东西，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T22:47:32.540

试试这个，你在复选框的选择器中有一些错误等等，当你使用 jQuery 时，你可以为按钮分配点击事件：

JS：

```
$(function () {

    var save_EventClickButton = function (event) {

        var data = {}, index = 0;

        $('#checklist1 input[type="checkbox"]').each(function (i, el) {
            data['PreAcceptList[' + index + '].Key'] = $(this).attr('id');
            data['PreAcceptList[' + (index++) + '].Value'] = $(this).is(':checked') ? 'true' : 'false';
        });

        $('#checklist2 input[type="checkbox"]').each(function (i, el) {
            data['PostAcceptList[' + index + '].Key'] = $(this).attr('id');
            data['PostAcceptList[' + (index++) + '].Value'] = $(this).is(':checked') ? 'true' : 'false';
        });

        //data['PreAcceptList'] = preAcceptArray;
        //data['PostAcceptList'] = postAcceptArray;

        $.post('/Grilla/UpdateLists', data, function (response) {
            $("#results").html(response);
        }, "json");

        return false;
    };

    $('#savePostAccept').bind('click', save_EventClickButton);
    $('#savePreAccept').bind('click', save_EventClickButton);

}); 
```

HTML（仅按钮）：

```
 ...
    <button id="savePreAccept">Save Pre-Accept</button>
    ...
    <button id="savePostAccept">Save Post-Accept</button>
    ... 
```

.NET (C#)：

```
 [HttpPost]
    public JsonResult UpdateLists(IDictionary<string, string> PreAcceptList, IDictionary<string, string> PostAcceptList)
    {
        return Json("List(s) updated successfully.");
    } 
```

# ios - iOS：如何为新的自动布局约束（高度）设置动画

> ID：13296232
> 
> 赞同：126
> 
> 时间：2012-11-08T19:24:04.620
> 
> 标签：ios, uiview, autolayout, nslayoutconstraint

我以前从未使用过**自动布局**约束。我有一个正在开发的小型新应用程序，并注意到 NIB 的视图默认为自动布局。所以，我想我会借此机会*与*它合作，并试图弄清楚苹果公司的发展方向。

第一个挑战：

我需要调整 MKMapView 的大小，并且想将其动画到新位置。如果我按照我习惯的方式这样做：

```
[UIView animateWithDuration:1.2f
     animations:^{
         CGRect theFrame = worldView.frame;
         CGRect newFrame = CGRectMake(theFrame.origin.x, theFrame.origin.y, theFrame.size.width, theFrame.size.height - 170);
         worldView.frame = newFrame;
}]; 
```

`[myUISegmentedControl setTitle:newTitle forSegmentAtIndex:0]`...然后，只要兄弟视图更新（在我的情况下，UISegmentedControl 的标题正在更新），MKMapView 就会“捕捉”回其原始高度。

所以，我*想*我想做的是将 MKMapView 的约束从等于父视图的高度更改为相对于它所覆盖的 UISegmentedControl 的*顶部*：`V:[MKMapView]-(16)-[UISegmentedControl]`

我想要的是缩短 MKMapView 的高度，以便显示地图视图下方的一些控件。为此，我*认为*我需要将约束从固定的全尺寸视图更改为底部被约束到 UISegmentedControl 顶部的约束......并且我希望它在视图缩小到新尺寸时进行动画处理。

怎么办？

编辑 -虽然视图的底部确实立即向上移动了 170，但**此动画*没有*动画：**

```
 [UIView animateWithDuration:1.2f
         animations:^{
             self.nibMapViewConstraint.constant = -170;

    }]; 
```

并且`nibMapViewConstraint`在 IB 中连接到底部垂直空间约束。

* * *

## 回答 #1

> 赞同：182
> 
> 时间：2013-03-13T04:30:50.197

**更新约束后：**

```
[UIView animateWithDuration:0.5 animations:^{[self.view layoutIfNeeded];}]; 
```

替换`self.view`为对包含视图的引用。

* * *

## 回答 #2

> 赞同：87
> 
> 时间：2014-09-25T14:00:31.980

这对我有用（iOS7 和 iOS8+）。单击您要调整的自动布局约束（在界面构建器中，例如顶部约束）。接下来将其设为 IBOutlet；

```
@property (strong, nonatomic) IBOutlet NSLayoutConstraint *topConstraint; 
```

向上动画；

```
 self.topConstraint.constant = -100;    
    [self.viewToAnimate setNeedsUpdateConstraints]; 
    [UIView animateWithDuration:1.5 animations:^{
        [self.viewToAnimate layoutIfNeeded]; 
    }]; 
```

动画回到原来的地方

```
 self.topConstraint.constant = 0;    
    [self.viewToAnimate setNeedsUpdateConstraints];  
    [UIView animateWithDuration:1.5 animations:^{
        [self.viewToAnimate layoutIfNeeded];
    }]; 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2013-08-07T09:15:11.927

苹果本身有一个非常好的教程，解释了如何使用带有自动布局的动画。点击这个[链接](https://developer.apple.com/videos/wwdc/2012/)，然后找到名为“Auto layout by example”的视频，它提供了一些关于自动布局的有趣内容，最后一部分是关于如何使用动画。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-02-12T14:16:44.017

我已经提供了[这个小演示](https://github.com/marchv/AutoLayoutAnimationDemo)。它通过一个非常简单的示例展示了如何更改自动布局约束并为其设置动画。只需看一下[DemoViewController.m](https://github.com/marchv/AutoLayoutAnimationDemo/blob/master/AutoLayoutAnimationDemo/DemoViewController.m)。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-11-15T21:26:52.193

大多数人使用自动布局在他们的视图上布局项目并修改布局约束以创建动画。

无需大量代码即可完成此操作的一种简单方法是创建要在 Storyboard 中制作动画的 UIView，然后创建一个隐藏的 UIView，您希望 UIView 结束。您可以使用 xcode 中的预览来确保两个 UIView 都在您想要的位置。之后，隐藏结束 UIView 并交换布局约束。

如果您不想自己编写，有一个用于交换布局约束的 podfile，称为 SBP。

[这是一个教程](https://www.youtube.com/watch?v=8KVKXlh6sKI)。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-11-29T19:25:07.890

不需要使用更多`IBOutlet reference`的约束来代替这个，您可以直接`access`或`update`已经应用约束，无论是由使用该库的任何视图应用`Programmatically`还是从应用该约束。该库还管理.`Interface Builder`[`KVConstraintExtensionsMaster`](https://github.com/keshavvishwkarma/KVConstraintExtensionsMaster/)`Cumulative``NSLayoutConstraint`

在 containerView 上添加高度约束

```
 CGFloat height = 200;
 [self.containerView applyHeightConstrain:height]; 
```

用动画更新 containerView 的高度约束

```
[self.containerView accessAppliedConstraintByAttribute:NSLayoutAttributeHeight completion:^(NSLayoutConstraint *expectedConstraint){
        if (expectedConstraint) {
            expectedConstraint.constant = 100;

            /* for the animation */ 
            [self.containerView  updateModifyConstraintsWithAnimation:NULL];
      }
    }]; 
```

# c# - 将 Long Integer 类型与集合方法一起使用

> ID：13296233
> 
> 赞同：0
> 
> 时间：2012-11-08T19:24:12.170
> 
> 标签：c#, collections, long-integer

我遇到了一个问题，最好用这个代码段来说明：

```
public static void Foo(long RemoveLocation) 
{
    // Code body here...

    // MyList is a List type collection object.
    MyList.RemoveAt(RemoveLocation);
} 
```

问题：RemoveLocation 是一个`long`. RemoveAt 方法只接受`int`类型。我该如何解决这个问题？

我宁愿避免的解决方案（因为这是项目的关键时间）：

*   拆分`MyList`成两个或多个列表；这将需要重写大量代码。
*   使用`int`而不是`long`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T20:52:14.660

理论上，一个列表中元素的最大数量是`int.MaxValue`，大约是 20 亿。

但是，使用列表类型来存储数量极大的元素是非常低效的。它根本就不是为此而设计的，而您使用树状数据结构做得更好。

例如，如果您查看 Mono 的列表类型实现，您会发现它们使用单​​个数组来保存元素，我假设 .NET 的版本也是如此。由于 .NET 中元素的最大大小为 2 GB，因此实际最大元素数为 20 亿除以元素大小。因此，例如，64 位机器上的字符串列表最多可以包含大约 2.68 亿个元素。

当使用可变（非只读）列表类型时，在添加项目时需要将该数组重新分配到更大的大小（通常使用旧大小的两倍），从而需要复制整个内容。这是非常低效的。

除此之外，拥有太大的对象也会对垃圾收集器产生负面影响。

**更新**

如果您真的需要一个非常大的列表，您可以简单地编写自己的数据类型，例如使用数组或大型数组作为内部存储。

这里也有一些有用的评论：http: [//blogs.msdn.com/b/joshwil/archive/2005/08/10/450202.aspx](http://blogs.msdn.com/b/joshwil/archive/2005/08/10/450202.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T21:05:34.850

如果有一种方法可以将相似的项目组合在一起，你能否将总数降低到限制以下？例如，如果您的数据包含大量重复的 X、Y 坐标，您可以通过创建频率计数字段来减少元素数量并仍然保留一个列表。例如（x，y，计数）

# php - 如何在 PHP 中去除除打印字符之外的所有内容？

> ID：13296234
> 
> 赞同：2
> 
> 时间：2012-11-08T19:24:13.837
> 
> 标签：php, regex

我正在处理这个每日数据馈送。令我惊讶的是，其中一个字段在 MySQL 中看起来并不正确。（我无法控制谁提供提要。）

所以我做了一个 mysqldump 并发现该记录的邮政编码和城市包含一个非打印字符。它在“vi”中显示为：<200e>

我正在使用 PHP，我解析这些数据并将其放入 MySQL 数据库。我已经使用了修剪功能，但这并没有摆脱它。问题是，如果您对 MySQL 数据库中的邮政编码进行查询，它不会找到具有非打印字符的记录。

我希望在将其放入 MySQL 数据库之前对其进行清理。

我可以在 PHP 中做什么？起初我认为正则表达式只允许 az、AZ 和 0-9，但这对地址不利。地址使用句点、逗号、连字符，也许还有其他我目前没有想到的东西。

最好的方法是什么？除了只允许打印字符之外，我不知道它被称为什么来定义它。是否有另一个像 trim 这样的 PHP 函数可以完成这项工作？还是正则表达式？如果是这样，我想要一个例子。谢谢！

我已经研究过使用 PHP 函数，并在 PHP.NET 上看到了这个：

```
<?php
$a = "\tcafé\n";
//This will remove the tab and the line break
echo filter_var($a, FILTER_SANITIZE_STRING, FILTER_FLAG_STRIP_LOW);
//This will remove the é.
echo filter_var($a, FILTER_SANITIZE_STRING, FILTER_FLAG_STRIP_HIGH);
?> 
```

虽然使用 FILTER_FLAG_STRIP_HIGH 确实去除了我在“vi”中提到的 <200e>，但我担心它会去除 André 等名称中的字母重音。

也许正则表达式是解决方案？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T19:31:46.603

您可以使用 PHP 过滤器：[http ://www.php.net/manual/en/function.filter-var.php](http://www.php.net/manual/en/function.filter-var.php)

我建议使用`FILTER_SANITIZE_STRING`过滤器或任何适合您需要的东西。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T19:32:11.813

我认为您可以使用这个小正则表达式替换：

```
preg_replace( '/[^[:print:]]+/', '', $your_value); 
```

它基本上从 $your_value 中删除了所有非打印字符

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-08T22:10:33.817

我试过这个：

```
<?php
$string = "\tabcde éç ÉäÄéöÖüÜß.,!-\n";
$string = preg_replace('/[^a-z0-9\!\.\, \-éâëïüÿçêîôûéäöüß]/iu', '', $string);
print "[$string]"; 
```

它给出了：

```
[abcde éç ÉäÄéöÖüÜß.,!-] 
```

将您需要的所有特殊字符添加到正则表达式中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-08T19:28:15.540

如果你用英语工作并且不需要支持 unicode 字符，那么只允许`[\x20-\x7E]`

...并删除所有其他人：

```
$s = preg_replace('/[^\x20-\x7E]+/', '', $s); 
```

# javascript - Window.location 间歇性无法在 IE 中加载

> ID：13296237
> 
> 赞同：2
> 
> 时间：2012-11-08T19:24:20.423
> 
> 标签：javascript, internet-explorer, reload

我有一个带有 JS 调用 window.location.reload(true) 的 aspx 页面，以在调用函数时强制刷新页面。

这似乎工作了几次，页面按预期重新加载，但到达调用函数的场景（即函数中的警报可见）但重新加载不会发生。我也尝试过设置具有相同结果的 window.location - 它工作 2 或 3 次然后失败。

这不会发生在 Firefox (16) 中，但会发生在不同版本的 IE (7 & 9) 中

使用Fiddler监控浏览器流量，reload运行时一切正常，但是reload停止时没有流量报告，提示浏览器没有向服务器发送请求？IE 窗口确实会随着加载微调器的旋转而变为空白，但最终 IE 会显示错误页面：

> ```
> Internet Explorer cannot display the webpage 
> 
> Most likely causes:
> You are not connected to the Internet. 
> The website is encountering problems. 
> There might be a typing error in the address. 
> ```

这似乎锁定了浏览器。尝试访问另一个网站会在 Fiddler 中产生相同的输出（无）。打开一个新的 IE 窗口意味着我可以毫无问题地访问该站点。

这最初导致通过 __doPostBack 更新 UpdatePanels 时出现问题，因此页面的这种 JS 重新加载被视为一种快速解决方法，但似乎并非如此。

我倾向于认为这是与服务器相关的，但我无法在 Firefox 中复制该问题。然而不幸的是，这确实必须在 IE 中工作。

任何想法都非常感谢！

下面的 JS 片段（虽然这是非常简单的东西）

```
function ReloadWindow() {
    alert(window.location); // Can see this alert, even when page fails to reload

    window.location.reload(true);

} 
```

# tilestache - 启用tilestache日志记录

> ID：13296239
> 
> 赞同：0
> 
> 时间：2012-11-08T19:24:21.387
> 
> 标签：tilestache

我试图让 TileStache 生成一些图块，但它没有调用我指定的 url 模板。TS 文档说我可以通过添加“日志记录”：“调试”来启用配置文件中的日志记录。我已经这样做了，但是在任何地方都没有看到任何类型的日志记录。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-13T00:23:24.813

您可以查看通过 Web 服务器日志生成的错误。如果您使用的是 apache wsgi，则可以在 apache 错误日志文件中看到。如果您使用 Werkzeug wsgi，您可以看到通过控制台生成的错误。有时它有助于观察对萤火虫请求的响应。大多数情况下，错误是由于缺少依赖项或错误的 url 模板造成的。

# youtube-api - 当我使用新的 YouTube 数据 API (V3) 将我的第一个视频上传到 YouTube 时，为什么会出现配额错误？

> ID：13296242
> 
> 赞同：0
> 
> 时间：2012-11-08T19:24:30.273
> 
> 标签：youtube-api

在发布之前我是测试版的一部分，我注意到自删除白名单以来配额水平增加了很多。我尝试上传到 YouTube，以为我有新的配额，但在白名单期间创建的项目配额没有改变。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T18:49:31.383

您需要在 Google API 控制台中手动增加配额。以下是详细信息：

1.  登录 Google API 控制台 (https://code.google.com/apis/console/)
2.  选择您与 YouTube 数据 API 一起使用的项目
3.  单击配额选项卡
4.  单击标记为“设置每个用户限制...”的按钮
5.  将 YouTube 数据 API 单位/秒/用户从“2.0”更改为“30,000”
6.  点击“更新项目”
7.  运行您的应用程序以上传视频并在其工作时哭泣喜悦的泪水 =)

# mysql - 追加空白结果以按字母顺序结束

> ID：13296243
> 
> 赞同：0
> 
> 时间：2012-11-08T19:24:41.173
> 
> 标签：mysql, sql-order-by

我想按字母顺序返回项目列表，但将“空”结果附加到末尾而不是出现在开头。有没有办法使用 MySQL ORDER 语句或其他方式来做到这一点？

```
SELECT * FROM persons WHERE status = 'active' ORDER BY lastName; 
```

我得到什么：

```
Jason
Peter
Frank Asimov
Reda Banks
Scott Sorrel 
```

我想要的是：

```
Frank Asimov
Reda Banks
Scott Sorrel
Jason 
Peter 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T19:32:35.313

```
 SELECT * FROM persons WHERE status = 'active' 
 ORDER BY case when ifnull(lastName,'') = '' then 1 else 0 end, lastname 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T19:34:29.977

您可以使用 FIELD 语句来完成。它是这样的：

```
SELECT [...] ORDER BY FIELD(lastName, '') DESC 
```

这会将所有空字符串姓氏附加到末尾。如果您的数据库中有 NULL 而不是空字符串：

```
SELECT [...] ORDER BY FIELD(lastName, NULL) DESC; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-08T19:28:07.190

我相信您所需要的`ORDER BY`只是`firstName`：

```
SELECT * FROM persons WHERE status = 'active' ORDER BY lastName, firstName 
```

# asp.net-mvc - 在实施被认为安全的 Web 服务时将使用主登录用户名和密码

> ID：13296254
> 
> 赞同：1
> 
> 时间：2012-11-08T19:25:15.000
> 
> 标签：asp.net-mvc, asp.net-mvc-3, web-services, security

我正在开发一个 asp.net mvc-4 Web 应用程序，并且我已经开始实施一些 Web 服务，这些服务提供有关我的站点的统计信息。但是为了确保只有经过授权和身份验证的消费者才能调用和使用 Web 服务，我正在考虑为每个消费者定义一个主登录用户名和密码，当消费者发送 Web 服务请求时，他应该包括这些主登录用户名和密码（存储为哈希值）在 Web 服务调用中。

例如，从我的网站调用特定 Web 服务的 Web 服务链接如下所示：-

```
/web/json/statistic/getsummaryinfo/areacode?j_username=masterusername&hash=D012B772672A55A0B561EAA53CA7734E 
```

**所以我的问题是我所遵循的方法是否会为我的 Web 服务和消费者提供安全的解决方案？或者我的方法有我不知道的安全漏洞？**

**:::已编辑::**

我正在使用 WebAPI 控制器在我的 asp.net mvc-4 中实现 Web 服务。**

此致

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T19:34:39.797

有几种方法可以确保事情是安全的。

1.  [http://techcrunch.com/2012/11/08/soa-softwares-api-management-platform-and-how-it-compares-to-its-sexy-counterparts/](http://techcrunch.com/2012/11/08/soa-softwares-api-management-platform-and-how-it-compares-to-its-sexy-counterparts/)这篇文章今天刚出来，重点介绍了一些 API 工具. 我不确定你有多大或计划有多大，但如果你正在寻找规模，这些工具似乎很受欢迎（注意：我自己没有大型 API 项目，所以我没有t 使用这些）。
2.  您可以使用 ServiceStack 之类的东西来构建您的 API 层。它具有内置的授权和身份验证，其中包含大量身份验证提供程序。它可以很好地扩展，并且在调用身份验证之后是基于会话的，因此您不必对每个调用进行身份验证。
3.  您可以使用“签名”请求。签名请求通常看起来像这样：“将请求的所有参数作为查询字符串，在请求的末尾附加一个‘秘密消费者密钥’，然后通过附加结果的 md5 哈希来对请求进行签名**（没有密钥！！）**请求。” 这是一种安全的做事方式，因为即使请求是在客户端 (AJAX) 发出的，它也是使用密钥在服务器端生成的。所以你可以确保事情没有被篡改。
4.  你可以走 oauth/token 路线（通常仍然使用上面的方法#3）。
5.  您可以使用可以撤销的简单 API 密钥（同样，fotne 与方法 #3 一起使用）。bit.ly 使用我认为的这种方法。

选项＃2是我最喜欢的。我喜欢 ServiceStack。但老实说，您的第一个项目的学习曲线可能有点陡峭。

主用户名和散列密码对我来说感觉很弱，所以我强烈考虑至少看看其他人是如何做的。

高温高压

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T20:28:10.913

我不认为你的方式是安全的。如果我可以在线收听并缓存请求，我将获得服务的登录名和密码。密码是否经过哈希处理甚至都没有关系。我喜欢 Eli Gassert 的回答中的第 3 点。这听起来非常有用且重量轻，您不会暴露密码，因为它在请求中的“某处”被散列。

# java - 计算文件中出现任意数量的字符？

> ID：13296255
> 
> 赞同：2
> 
> 时间：2012-11-08T19:25:15.803
> 
> 标签：java

我找到了几种方法来计算 Java 文件中单个字符的出现次数。我的问题很简单：有没有办法同时计算文件中列表中任何字符的出现，还是我必须遍历每个字符？

为了澄清，我想要的东西相当于：对于文件中的每个字符，如果列表“abcdefg”中的字符增加 1。

背景：我正在计算文件中的谓词，我能想到的最好方法是搜索 <、>、== 等的出现。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T19:28:22.727

使用 a`Map<Character, Integer>`并浏览文件。对于您测试的每个角色，看看它是否在地图中。如果不是加上值1，否则获取当前值，将其递增并放回。测试两者`TreeMap`，`HashMap`看看哪个最适合你。现在您有了一个完整的直方图，您可以轻松添加有趣的总和。

**更新**：看到您对查找序列感兴趣。如果你想以良好的性能做到这一点，我会使用像 lex 这样的工具，但用于 Java。一个快速的谷歌把我带到了这个：[http](http://www.cs.princeton.edu/~appel/modern/java/JLex/) ://www.cs.princeton.edu/~appel/modern/java/JLex/应该很直接地定义你感兴趣的令牌，然后它应该很计算它们很简单。

**更新 2**：我忍不住想玩它。这是一个使用上述工具似乎可以工作的示例（免责声明：我没有使用该工具，所以这可能是完全错误的......）：

```
import java.lang.System;
import java.util.Map;
import java.util.TreeMap;

class Sample {
  public static void main(String argv[]) throws java.io.IOException {
    Map<String,Integer> map = new TreeMap<>();

    Yylex yy = new Yylex(System.in);
    Yytoken t;
    while ((t = yy.yylex()) != null) {
      String text = t.mText;

      if (!text.isEmpty()) {
        Integer i = map.get(text);
        if (i == null) {
          map.put(text, 1);
        }
        else {
          map.put(text, map.get(text)+1);
        }
      }
    } 

    System.out.println(map);
  }
}

class Yytoken {
  public String mText;

  Yytoken(String text) {
   mText = text;
  }

  public String toString() {
    return "Token: " + mText;
  }
}

%%

OTHER=(.|[\r\n])

%% 

<YYINITIAL> "," { return (new Yytoken(yytext())); }
<YYINITIAL> ":" { return (new Yytoken(yytext())); }
<YYINITIAL> ";" { return (new Yytoken(yytext())); }
<YYINITIAL> "(" { return (new Yytoken(yytext())); }
<YYINITIAL> ")" { return (new Yytoken(yytext())); }
<YYINITIAL> "[" { return (new Yytoken(yytext())); }
<YYINITIAL> "]" { return (new Yytoken(yytext())); }
<YYINITIAL> "{" { return (new Yytoken(yytext())); }
<YYINITIAL> "}" { return (new Yytoken(yytext())); }
<YYINITIAL> "." { return (new Yytoken(yytext())); }
<YYINITIAL> "+" { return (new Yytoken(yytext())); }
<YYINITIAL> "-" { return (new Yytoken(yytext())); }
<YYINITIAL> "*" { return (new Yytoken(yytext())); }
<YYINITIAL> "/" { return (new Yytoken(yytext())); }
<YYINITIAL> "=" { return (new Yytoken(yytext())); }
<YYINITIAL> "<>" { return (new Yytoken(yytext())); }
<YYINITIAL> "<"  { return (new Yytoken(yytext())); }
<YYINITIAL> "<=" { return (new Yytoken(yytext())); }
<YYINITIAL> ">"  { return (new Yytoken(yytext())); }
<YYINITIAL> ">=" { return (new Yytoken(yytext())); }
<YYINITIAL> "&"  { return (new Yytoken(yytext())); }
<YYINITIAL> "|"  { return (new Yytoken(yytext())); }
<YYINITIAL> ":=" { return (new Yytoken(yytext())); }
<YYINITIAL> "#" { return (new Yytoken(yytext())); }
<YYINITIAL> {OTHER} { return (new Yytoken("")); } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T19:49:43.500

*   阅读

由于您要计算超过 1 个字符（==、!=、<-、>=）的谓词，因此您需要一个[PushBackReader](http://tutorials.jenkov.com/java-io/pushbackreader.html)以便您可以查看下一个字符以确定实际谓词。

*   发生频率

如果你能负担得起额外的依赖，那么我的建议是使用[Multiset](https://code.google.com/p/guava-libraries/wiki/NewCollectionTypesExplained)来计算频率。如果你不能，那么你可以使用基于 Map 或数组的计数器（如果你的谓词集是有限的，我更喜欢这个，因为这简化了代码）。

*   并行化？

使用上述方法更简单，因为您可以通过 1 次单程获得频率。如果您的文件很大或者必须计算许多文件的频率，那么您可以选择使用 java Executors 并行化它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-08T20:01:50.403

## 存储

如果我理解正确，您不仅希望找到单个字符的出现次数，还希望找到短字符序列（即字符串）的出现次数，例如`==`. 在这种情况下， a`Map<Character, Integer>`是不够的，您需要 a`Map<String, Integer>`为每个字符串存储一个计数。

您也可以使用[Guava](https://code.google.com/p/guava-libraries/)的[Multiset](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/Multiset.html)，这对于一个知道它包含多少次重复（相同）元素的集合来说基本上是一个很好的接口。

我相信定义了您想要计算的谓词/运算符/任何短字符串的数量，您可以定义一个数组/一个列表来存储您感兴趣的所有谓词，例如：

```
List<String> operators = Arrays.asList("==", "<=", ">=", "<", ">"); 
```

然后，您将“倾倒”所有这些运算符作为映射的键并将它们的值初始化为零：

```
Map<String, Integer> counts = new HashMap<>();
for (String operator : operators)
    counts.put(operator, 0); 
```

## 解析

[至于解析，您可以使用Scanner](http://docs.oracle.com/javase/7/docs/api/java/util/Scanner.html)轻松逐行读取文件。对于每一行，您可以使用这样的方法来计算它包含给定子字符串的次数：

```
static int occurrences(String source, String subString) {
    int count = 0;
    int index = source.indexOf(subString);

    while (index != -1) {
        count++;
        index = source.indexOf(subString, index + 1);
    }
    return count;
} 
```

然后以与此类似的方式使用此方法：

```
Scanner scanner = new Scanner(new File("input.txt"));
while (scanner.hasNextLine()) {
    String line = scanner.nextLine();
    for (String operator : operators) {
        int oldOccurences = counts.get(operator);
        counts.put(operator, oldOccurences + occurrences(line, operator));
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-08T19:27:54.933

我相信java列表接口有一个`Contains()`方法，所以你可以做类似的事情

```
if(someList.Contains('<'))
{
    x++
} 
```

IT 实际上并没有一次检查所有这些，但无论如何这些东西对你是隐藏的

[http://docs.oracle.com/javase/1.4.2/docs/api/java/util/List.html](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/List.html)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-08T19:29:15.950

对“ `count the occurrence of any of the characters in a list in a file simultaneously`”：

*   您可以使用 HashTable，其中键是字符，值是您看到该字符的次数。
*   每次读取一个字符时，检查它是否在 HashTable 中：
    *   如果是，则将其值增加 1
    *   如果不是，则将键、值对添加到初始化为 1 的 HashTable

如果您关心的字符集很小（例如您的示例中的`"abcdefg"`or `"<, >, =="`），则 switch 语句就足够了，而不是使用 HashTable 来解决问题

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-08T19:31:48.850

一个简单的方法是使用数组：

```
final int[] occurs = new int[65536];
for (char c : file) occurs[c]++; 
```

如果您知道不会遇到太奇特的字符，则可以减小数组的大小。

# spotify - spotify models.Track 对象

> ID：13296262
> 
> 赞同：3
> 
> 时间：2012-11-08T19:25:54.430
> 
> 标签：spotify

spotify models.Track 对象是否仅限于非本地轨道？

我已经构建了一个小的 spotify 应用程序，它将计算一些随机放入侧边栏中的曲目的总播放时间，但似乎 Track 对象没有从本地文件中获取任何信息。

这是我到目前为止得到的：

```
models.application.observe(models.EVENT.LINKSCHANGED, function () {
    totalTime = 0;
    var links = models.application.links;
    if (links.length) {
        for (var i = 0; i < links.length; i++) {
            var track = models.Track.fromURI(links[i], function(t) {
                totalTime = totalTime + t.duration;
            });
        }
    }

    document.getElementById("time").innerHTML = secondsToString(Math.round(totalTime/1000))  ;
}); 
```

一切都正常启动并且在 Spotify 轨道上运行良好，但我编写这个小应用程序的全部原因是为了计算我的一些非常长的有声读物文件的总时间。有人知道解决方案吗？

[链接到文档页面](https://developer.spotify.com/technologies/apps/docs/beta/4f52ebf870.html)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T09:04:33.023

如果确实如此，我认为您已经发现了错误/疏忽。

但是，本地文件 URI 如下所示：`spotify:local:Coldplay:Mylo+Xyloto:Paradise:277`

最后一个参数是轨道的长度，以整数秒为单位。这是一个 hacky 解决方法，但您可以解析 URI 并使用其中的数字而不是`models.Track`.

# php - PHP - 运行多个查询以将结果输出到 excel 文件中

> ID：13296263
> 
> 赞同：-3
> 
> 时间：2012-11-08T19:26:09.333
> 
> 标签：php, mysql

所以我有一个excel文件。我有多个返回的查询。但是我需要一次运行所有这些查询并将结果输出到 excel 文件。

```
$col = 1;
while($row_data = mysql_fetch_assoc($result)) {
$row = 1;
if ($col == 1) {
    $row_headings = array_keys($row_data);
       foreach($row_headings as $value) {
    $h = preg_split('/X/', $value);

if ($h[0] = $id and $h[2] != null){
$results="select question from lime_questions where sid =".$h[0]." and gid =".$h[1]." and qid =".$h[2]."; ";
echo $results;
//This is where the queries are returned. 
//They are echoed to the first cell of the excel file
//They are returned as "query1;query2;..."
//This is where I am messing up. 
//I am attempting to run the queries. I have been attempting many different approaches

$query_result = mysql_query($results[0]); //this does not return results of the queries
echo $query_result;
//attempting to show the results in the first cell of the excel file
     }
//ideally at this point this foreach would print each query result in its own cell
 foreach(mysql_query($results) as $value2){
        $objPHPExcel->getActiveSheet()->setCellValueByColumnAndRow($col, $row, $value2);
        $row++;
     }
    $row = 1;
    $col++;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T19:59:04.460

您可以在 PHP 5 中尝试 mysqli_multi_query。

[http://us2.php.net/manual/en/mysqli.multi-query.php](http://us2.php.net/manual/en/mysqli.multi-query.php)

除此之外，嵌套查询“应该”工作。您可能有错误的键/值元素被定位。如果无法访问正在使用的架构，我很难说。

但我同意，旧功能将被弃用，因此需要使用更新的脚本方法进行更新。

```
<?php
$mysqli = new mysqli("localhost", "my_user", "my_password", "world");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

$query  = "SELECT CURRENT_USER();";
$query .= "SELECT Name FROM City ORDER BY ID LIMIT 20, 5";

/* execute multi query */
if ($mysqli->multi_query($query)) {
    do {
        /* store first result set */
        if ($result = $mysqli->store_result()) {
            while ($row = $result->fetch_row()) {
                printf("%s\n", $row[0]);
            }
            $result->free();
        }
        /* print divider */
        if ($mysqli->more_results()) {
            printf("-----------------\n");
        }
    } while ($mysqli->next_result());
}

/* close connection */
$mysqli->close();
?> 
```

# java - 如何同时遍历 2 个链接列表？

> ID：13296266
> 
> 赞同：-2
> 
> 时间：2012-11-08T19:26:20.183
> 
> 标签：java, arrays, list, traversal

我知道我可以做一个循环，但是我如何让它同时遍历其中的两个？？？另外，我不知道列表的大小，所以我不能使用 for 循环。相反，可能需要使用一个while循环......它会是一个大布尔表达式吗？

我会尽我所能，感谢一些想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T19:36:06.667

这是用两个迭代器完成的：

```
for (Iterator<String> it1 = list1.iterator(), it2 = list2.iterator(); 
     it1.hasNext() && it2.hasNext();) 
{
   final String s1 = it1.next(), s2 = it2.next();
   // stuff to do
} 
```

# ajax - ajax 没有更新位于另一个中的组件 嗨，我有一个命令链接，所以当单击它时，当字段集 处于相同状态时，我将渲染action="#{projectAdminisrationMB.showGroups(userObj)}"一个字段集，但当我将它放在单独的 ui:define 中时，它将不会被渲染。 <p:fieldset legend="Manage User Groups" id="manage
问问题
问问题 2012-11-08T19:26:24.690
2361 次
This question shows research effort; it is useful and clear
0
This question does not show any research effort; it is unclear or not useful
Bookmark this question.
Show activity on this post.
嗨，我有一个命令链接，所以当单击它时，当字段集 处于相同状态时，我将渲染action=" #{projectadminisrationmb.showgroups(userobj)}"一个字段集，但当我将它放在单独的="" ui:define="" 中时，它将不会被渲染。<p:fieldset="" rendered="#{projectAdminisrationMB.manageUserGroupsFSFlag}"><ui:define name="body">这是代码： <ui:define name="body"><h:form id="manageProjeUFform"><p:growl id="growl" showdetail="true" sticky="true"><h:panelgrid columns="2" cellpadding="10"><p:column><p:fieldset legend=" Users "><h:panelgrid columns="2" cellpadding="10"><p:datatable border="1" value="#{projectAdminisrationMB.projectUsersList}" id="projectUserDt" var="userObj" rowkey="#{userObj.name}" selection="#{projectAdminisrationMB.selectedExistingProjectUser}" selectionmode="single" rowindexvar="rowIndex" binding="#{table1}"><p:column id="column1"><f:facet name="header"></f:facet></p:column><p:column id="column2"><f:facet name="header"></f:facet></p:column><p:column id="column5"><f:facet name="header"></f:facet><p:commandlink id="manageUG" title="Manage User Groups" style="margin-right:5px" update=":rightContentform:manageUserGroupsFS" action="#{projectAdminisrationMB.showGroups(userObj)}" ajax="true"><h:graphicimage value="../images/cssImg/manage-groups-icon.png"><f:setpropertyactionlistener target="#{projectAdminisrationMB.selectedUserRow}" value="#{userObj}"><f:setpropertyactionlistener target="#{projectAdminisrationMB.selectedUserRow.dbRowIndex}" value="#{table.rowIndex}"></f:setpropertyactionlistener></f:setpropertyactionlistener></h:graphicimage></p:commandlink></p:column><f:facet name="footer"><p:commandbutton id="addProjectUserdlg" value=" Add " onclick="dlg1.show()"><p:commandbutton id="deleteProjectUserdlg" value=" Delete " onclick="confirmation.show()"></p:commandbutton></p:commandbutton></f:facet></p:datatable></h:panelgrid></p:fieldset></p:column></h:panelgrid></p:growl></h:form></ui:define><h:panelgrid columns="3"><h:panelgrid id="display" header="User Detail" columns="2" cellpadding="4"><f:facet name="header"><p:graphicimage value="/images/users/user.png"></p:graphicimage></f:facet></h:panelgrid><p:picklist id="pickList" value="#{projectAdminisrationMB.selectedUserGroups}" var="group" itemlabel="#{group}" itemvalue="#{group}" converter="groupConverter"><f:facet name="sourceCaption">Belong To</f:facet> <f:facet name="targetCaption">Exclude From</f:facet> <p:column style="width:25%"><p:graphicimage value="/images/group/#{group.name}.gif"></p:graphicimage></p:column><p:column style="width:75%;">#{group.name}</p:column> <p:ajax event="transfer" listener="#{projectAdminisrationMB.onTransferGroup}" update=":manageProjeUFform:growl"></p:ajax></p:picklist><p:commandbutton id="saveGroupsBtn" value="Save" update=":manageProjeUFform:growl" actionlistener="#{projectAdminisrationMB.saveUserGroupsModif}"></p:commandbutton></h:panelgrid></ui:define></p:fieldset>任何帮助将不胜感激 。 这是解决方案享受它:) <p:commandlink id="manageUG" title="Manage User Groups" style="margin-right:5px" update="@all" action="#{projectAdminisrationMB.showGroups(userObj)}" ajax="true"><h:graphicimage value="../images/cssImg/manage-groups-icon.png"><f:setpropertyactionlistener target="#{projectAdminisrationMB.selectedUserRow}" value="#{userObj}"><f:setpropertyactionlistener target="#{projectAdminisrationMB.selectedUserRow.dbRowIndex}" value="#{table.rowIndex}"></f:setpropertyactionlistener></f:setpropertyactionlistener></h:graphicimage></p:commandlink>我使用@all 来更新 ui 定义部分 ajaxjsfprimefaces 4 1 回答 1 This answer is useful 1 这是解决方案享受它:) <p:commandlink id="manageUG" title="Manage User Groups" style="margin-right:5px" update="@all" action="#{projectAdminisrationMB.showGroups(userObj)}" ajax="true"><h:graphicimage value="../images/cssImg/manage-groups-icon.png"><f:setpropertyactionlistener target="#{projectAdminisrationMB.selectedUserRow}" value="#{userObj}"><f:setpropertyactionlistener target="#{projectAdminisrationMB.selectedUserRow.dbRowIndex}" value="#{table.rowIndex}"></f:setpropertyactionlistener></f:setpropertyactionlistener></h:graphicimage></p:commandlink>我使用@all 来更新 ui 定义部分 于 2012-11-08T19:40:07.573 回答 Related 3 c# - 使用 LINQ 确定序列不包含任何元素 2 sharepoint - 获取网站所有列表的正确方法是什么 1 c++ - 无法将对象上的指针添加到集合中 3 python - python csv unicode'ascii'编解码器无法在位置 1 编码字符 u'\xf6'：序数不在范围内（128） 3 r - 精算生存分析，分为区间 2 android - java.lang.OutOfMemoryError：位图大小超过 ListView 中的 VM 预算和延迟加载图像 2 python - Python在样条插值中保留点 3 c# - 指数超出范围。必须为非负数且小于 datagridview 中 collection.parameter 名称的大小？ 1 ios - 我可以在 iOS 应用程序的文档目录中写入文件吗？ 3 javascript - jquery在asp.net中选择一个下拉列表控件 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：13296268
> 
> 赞同：0
> 
> 时间：
> 
> 标签：ajax, jsf, primefaces

嗨，我有一个命令链接，所以当单击它时，当字段集 处于相同状态时，我将渲染`action="#{projectAdminisrationMB.showGroups(userObj)}"`一个字段集，但当我将它放在单独的 ui:define 中时，它将不会被渲染。`<p:fieldset legend="Manage User Groups" id="manageUserGroupsFS" rendered="#{projectAdminisrationMB.manageUserGroupsFSFlag}">``<ui:define name="body">`

这是代码：

```
<ui:define name="body">

         <h:form id="manageProjeUFform">  

            <div class="right">

             <p:growl id="growl" showDetail="true" sticky="true" />  

             <br/><br/><br/><br/>

<h:panelGrid columns="2" cellpadding="10">  

   <p:column>
            <p:fieldset legend=" Users ">  
               <h:panelGrid columns="2" cellpadding="10">  

             <p:dataTable border="1" value="#{projectAdminisrationMB.projectUsersList}"
                    id="projectUserDt" 
                    var="userObj"
                    rowKey="#{userObj.name}"
                     selection="#{projectAdminisrationMB.selectedExistingProjectUser}"
                     selectionMode="single"
                     rowIndexVar="rowIndex"
                      binding="#{table1}">
                        <p:column id="column1">
                            <f:facet name="header">
                                <h:outputText value="Login"></h:outputText>
                            </f:facet>

                           <h:outputText value="#{userObj.name}"/>  

                        </p:column>
                        <p:column id="column2">
                            <f:facet name="header">
                                <h:outputText value="Entire Name"></h:outputText>
                            </f:facet>
                            <h:outputText value="#{userObj.lastName}"></h:outputText>

                            <h:outputText value="#{userObj.firstName}"></h:outputText>
                         </p:column>

                                <p:column id="column5">
                            <f:facet name="header">
                                <h:outputText value="Groups"></h:outputText>
                            </f:facet>

                             <p:commandLink id="manageUG"  title="Manage User Groups" style="margin-right:5px"  update=":rightContentform:manageUserGroupsFS"   action="#{projectAdminisrationMB.showGroups(userObj)}"  ajax="true"> 
                                   <h:graphicImage value="../images/cssImg/manage-groups-icon.png"   />

                                 <f:setPropertyActionListener target="#{projectAdminisrationMB.selectedUserRow}" value="#{userObj}" />
                                 <f:setPropertyActionListener target="#{projectAdminisrationMB.selectedUserRow.dbRowIndex}" value="#{table.rowIndex}" />

                            </p:commandLink>   

                         </p:column>

                         <f:facet name="footer">  

                  <p:commandButton id="addProjectUserdlg" value=" Add " onclick="dlg1.show()"  />  
                  <p:commandButton id="deleteProjectUserdlg" value=" Delete "  onclick="confirmation.show()"/>  

                          </f:facet> 

                </p:dataTable> 
```

```
 </h:panelGrid>  
             </p:fieldset>  

        </div>

         </h:form>
     </ui:define> 
```

```
 <h:panelGrid columns="3">
    <h:panelGrid id="display" header="User Detail" columns="2" cellpadding="4">  

                           <f:facet name="header">  
                             <p:graphicImage value="/images/users/user.png"/>  
                          </f:facet>   

                            <h:outputText value="Login:" />  
                            <h:outputText value="#{projectAdminisrationMB.selectedUserRow.lastName}" />  

                            <h:outputText value="Name:" />  
                            <h:outputText value="#{projectAdminisrationMB.selectedUserRow.lastName}" />  

                            <h:outputText value="First Name:" />  
                            <h:outputText value="#{projectAdminisrationMB.selectedUserRow.firstName}" />  

                            <h:outputText value="Email:" />  
                            <h:outputText value="#{projectAdminisrationMB.selectedUserRow.email}" />  

                            <h:outputText value="Phone:" />  
                            <h:outputText value="#{projectAdminisrationMB.selectedUserRow.phoneNumber}" />  

                      </h:panelGrid>  

           <p:pickList id="pickList" value="#{projectAdminisrationMB.selectedUserGroups}" var="group"   
            itemLabel="#{group}" itemValue="#{group}" converter="groupConverter" > 

             <f:facet name="sourceCaption">Belong To</f:facet>  
             <f:facet name="targetCaption">Exclude From</f:facet> 

              <p:column style="width:25%">  
                    <p:graphicImage value="/images/group/#{group.name}.gif" />  
               </p:column>  

             <p:column style="width:75%;">  
                  #{group.name}  
             </p:column> 
              <p:ajax event="transfer" listener="#{projectAdminisrationMB.onTransferGroup}" update=":manageProjeUFform:growl" />  
             </p:pickList>

             <p:commandButton id="saveGroupsBtn" value="Save"  update=":manageProjeUFform:growl" actionListener="#{projectAdminisrationMB.saveUserGroupsModif}"/>  

          </h:panelGrid>
  </p:fieldset>
</h:form>
  </ui:define> 
```

任何帮助将不胜感激 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T19:40:07.573

这是解决方案享受它:)

```
<p:commandLink id="manageUG"  title="Manage User Groups" style="margin-right:5px"  
 update="@all"   action="#{projectAdminisrationMB.showGroups(userObj)}"  ajax="true"> 
                                   <h:graphicImage value="../images/cssImg/manage-groups-icon.png"   />

                                 <f:setPropertyActionListener target="#{projectAdminisrationMB.selectedUserRow}" value="#{userObj}" />
                                 <f:setPropertyActionListener target="#{projectAdminisrationMB.selectedUserRow.dbRowIndex}" value="#{table.rowIndex}" />

                            </p:commandLink> 
```

我使用@all 来更新 ui 定义部分

# android - 在 Fragment 上强制调用 onCreateView

> ID：13296270
> 
> 赞同：0
> 
> 时间：2012-11-08T19:26:29.573
> 
> 标签：android, fragment

我的应用程序在使用任务杀手后崩溃了很多，因为显然视图已被删除，使 getView() 返回 null。如果片段碰巧为空，我如何强制片段重新创建它的视图？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-17T02:17:59.720

您可以使用 newInstance 方法将您的片段设置为静态。

```
public static ProfileMainView newInstance(int sectionNumber) {
        Fragment fragment = new YourFragmentView();
        Bundle args = new Bundle();
        args.putInt(ARG_SECTION_NUMBER, sectionNumber);
        fragment.setArguments(args);
        return fragment;
    } 
```

然后以这种方式提出自己的看法。您需要检查您的视图是否为空。如果为空，请再次查看。如果不是，请使用它。我希望它对你有帮助。

```
@Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        if(view == null){
             // Make your view here by inflater or whatever
        }
        return view;
    } 
```

# php - 从二维数组的每一列中获取最大值

> ID：13296273
> 
> 赞同：0
> 
> 时间：2012-11-08T19:26:34.537
> 
> 标签：php, arrays, multidimensional-array, max, array-column

我在数组中有一个数组，例如：

```
[ 
    [0, 20, 5], 
    [5, 0, 15], 
    [5, 10, 0]
] 
```

我需要获得每列中的最大数量。

*   的最大值`[0 , 5 , 5]`是`5`，所以它进入结果数组。
*   的最大值`[20, 0, 10]`是`20`，所以它进入结果数组。
*   的最大值`[5, 15, 0]`是`15`，所以它进入结果数组。

最终结果数组必须包含`[5, 20, 15]`.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T19:41:17.813

首先，必须转置数组（翻转行和列）：

```
function array_transpose($arr) {
   $map_args = array_merge(array(NULL), $arr);
   return call_user_func_array('array_map', $map_args);
} 
```

（取自[Is there better way to transpose a PHP 2D array?](https://stackoverflow.com/questions/3460022/is-there-better-way-to-transpose-a-php-2d-array) - 阅读该问题以了解其工作原理）

然后，您可以将`max`函数映射到新数组上：

```
$maxes = array_map('max', array_transpose($arr)); 
```

示例：[http ://codepad.org/3gPExrhO](http://codepad.org/3gPExrhO)

输出 [我认为这是您的意思，而不是 (5, 15, 20)，因为您说索引 1 应该是 (20, 0, 10) 的最大值]：

```
Array
(
    [0] => 5
    [1] => 20
    [2] => 15
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-08-29T17:43:51.533

如果没有 splat 运算符，`array_map()`with`max()`将返回每行的最大值。( `[20, 15, 10]`)

使用 splat 运算符转置数据结构，返回每列的最大值。

代码：（[演示](https://3v4l.org/pp1D4)）

```
$array = [ 
    [0, 20, 5], 
    [5, 0, 15], 
    [5, 10, 0]
];

var_export(
    array_map('max', ...$array)
); 
```

输出：

```
array (
  0 => 5,
  1 => 20,
  2 => 15,
) 
```

# javascript - 字符串到日期的转换在 Javascript 中无法正常工作

> ID：13296275
> 
> 赞同：1
> 
> 时间：2012-11-08T19:26:37.390
> 
> 标签：javascript, html, date

我需要使用 Javascript 以这种格式获取时差：“HH:MM:SS”。

我试过这个：

```
var diff = Date.parse( time2) - Date.parse( time1 );
var total_time = (diff / 1000 / 60 / 60) + ":" + (diff / 1000 / 60) + ":" + (diff / 1000); 
```

还有这个：

```
var diff = new Date( time2) - new Date( time1 );
var total_time = (diff / 1000 / 60 / 60) + ":" + (diff / 1000 / 60) + ":" + (diff / 1000); 
```

这些是 time2 和 time1 的值：

```
time1: "2012-11-07 15:20:32.161"
time2: "2012-11-07 17:55:41.451" 
```

在这两种情况下我得到的结果是：

```
total_time= 0.5250819444444444:31.504916666666666:1890.295 
```

你可以看到是不正确的

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T19:36:27.343

我认为你得到了**错误的差异值**，因为**日期中的毫秒部分由`.`. 它没有被数据解析器正确接受。**

尝试使用不包括毫秒的日期和时间部分，如下所示：

```
 var diff = Date.parse(time2.split(".")[0]) - Date.parse( time1.split(".")[0]); 
```

此外，当你得到错误的差异`diff`时，**你的时间计算也是错误的。**

它应该是：

```
 var second = Math.floor(diff /1000);
        //convert the seconds into minutes and remainder is updated seconds value
       var minute = Math.floor(second /60);
       second = second % 60;

        //convert the minutes into hours and remainder is updated minutes value
       var hour = Math.floor(minute/60);
       minute = minute %60;

       var total_time= hour+":" minute+":"+second; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T19:42:42.830

您忘记删除已计算的毫秒数`diff`。这是一个非常详细的示例，说明您如何以适当的方式进行操作。

```
var time1 = "2012-11-07 15:20:32.161",
    time2 = "2012-11-07 17:55:41.451",

    SECOND = 1000,
    MINUTE = SECOND* 60,
    HOUR = MINUTE* 60;

var diff = new Date(time2) - new Date(time1);

var hours = Math.floor(diff / HOUR); // Calculate how many times a full hour fits into diff
diff = diff - (hours * HOUR); // Remove hours from difference, we already caluclated those
var minutes = Math.floor(diff / MINUTE); // Calculate how many times a full minute fits into diff
diff = diff - (minutes * MINUTE); // Remove minutes from difference
var seconds = Math.floor(diff / SECOND); // As before
diff = diff - (seconds * SECOND);
var rest = diff;

var total_time = hours + ":" + minutes + ":" + seconds + " " + rest ; 
```

[**演示**](http://jsfiddle.net/Nm7Ka/)

# ruby-on-rails - Rails - 访问位于不同端口的文件

> ID：13296276
> 
> 赞同：0
> 
> 时间：2012-11-08T19:26:43.303
> 
> 标签：ruby-on-rails, open-uri

我有两个 Web 服务器实例。一个在 3000 端口上运行，一个在 9090 上运行。我想访问位于 9090 端口中的 JSON 文件。

在 rails 模型中，我可以在使用时很好地访问 JSON 文件

```
stream = open("http://localhost:9090/file.json") 
```

但我想做的是更像

```
stream = open(":9090/file.json") # OUTPUT: No such file or directory - :9090/file.json 
```

我想避免对 URL 进行硬编码（显然），如果我还想避免将“域”从 Rails 控制器传递到 Rails 模型。

或者是否有一个包可以处理访问不同的端口，如果 openURI 不这样做？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T19:37:34.983

您可以创建一个全局 CONFIG 变量，例如，它将加载 config/config.yml 的内容。

您可以在初始化程序中加载此文件，这是我的：

```
if !defined? CONFIG
  CONFIG = YAML.load_file(File.join(Rails.root, "config", "config.yml"))[Rails.env] rescue []
end 
```

然后在你的模型中：

```
stream = open("#{CONFIG['url']}:9090/file.json") 
```

假设您的 config.yml 看起来像这样：

```
development:
  url: http://localhost

production:
  url: http://what.ever 
```

# java - 删除 Box2D 实体会导致 AndEngine 崩溃

> ID：13296277
> 
> 赞同：1
> 
> 时间：2012-11-08T19:26:51.147
> 
> 标签：java, android, box2d, andengine, physics

在此先感谢您的帮助！

我正在构建一个 Arkanoid/Breakout 风格的游戏，并且由于身体移除而遇到了一些问题（至少这是我怀疑问题所在）。当我运行游戏时，大多数时候一切正常，但时不时地，游戏崩溃。在这次崩溃中，所有附着在身体上的精灵都消失了，任何没有身体的精灵都留在了屏幕上。没有 LogCat 错误，但 FPS 急剧下降。另外，我注意到有时联系人在触发联系人监听器中的代码之前注册了两次（您可以在下面的 ContactListener 中看到我在哪里实现日志文件输出）。

在游戏中，我使用的是螺栓而不是砖块，下面列出了我用来生成螺栓的代码。之后，我展示了我是如何使用 ContactListener 的，然后我给出了删除 body/sprite 组合的代码。非常感谢任何帮助或建议！

谢谢，

亚当

创建在接触时将被移除的 body/sprite 项目。

```
//BOLTS
    final FixtureDef boltFixtureDef = PhysicsFactory.createFixtureDef(1, 1.0f, 0.1f);
    final Body[] boltBody=new Body[BOLT_NUMBER];
    final Sprite[] boltSprite=new Sprite[BOLT_NUMBER];
    final PhysicsConnector[] facePhysicsConnector= new PhysicsConnector[BOLT_NUMBER];
    String[] bodyNames=new String[BOLT_NUMBER];

        for(int i=0; i<BOLT_NUMBER; i++){
            boltSprite[i] = new Sprite(-100,-100, sceneManager.mBolt, sceneManager.activity.getVertexBufferObjectManager());
            boltSprite[i].setCullingEnabled(true);
            boltBody[i] = PhysicsFactory.createBoxBody(mPhysicsWorld, boltSprite[i], BodyType.KinematicBody, boltFixtureDef);
            mPhysicsWorld.registerPhysicsConnector(new PhysicsConnector(boltSprite[i], boltBody[i], true, true));
            bodyNames[i]="bolt"+Integer.toString(i);
            boltBody[i].setUserData(bodyNames[i]);
            facePhysicsConnector[i] = mPhysicsWorld.getPhysicsConnectorManager().findPhysicsConnectorByShape(boltSprite[i]);
            boltBody[i].setTransform(xLocations[i]/PMR, yLocations[i]/PMR, 0);}

            for(int i=0; i<BOLT_NUMBER; i++){       
                scene.attachChild(boltSprite[i]);} 
```

联系人监听器：

```
final ContactListener contact = new ContactListener(){

    @Override
    public void postSolve(Contact contact, ContactImpulse impulse) {

        String a = (String) contact.getFixtureA().getBody().getUserData();
        String b = (String) contact.getFixtureB().getBody().getUserData();
        if(a != null && b != null) {
            for(int i=0; i<BOLT_NUMBER; i++){
                if(a.equals("wrench") && b.equals(facePhysicsConnector[i].getBody().getUserData()) ||
                             a.equals(facePhysicsConnector[i].getBody().getUserData()) && b.equals("wrench")) {
                               //boltCollision[i]=true;
                    Log.i("contact","bolt contact" + i);
                               myDestroyer(facePhysicsConnector[i], true);
                               Log.i("contact","bolt POSTcontact" + i);}

                else if((a.equals("wrench") && b.equals("paddle")) ||
                        (a.equals("paddle") && b.equals("wrench"))) {
                    Log.i("contact","paddle contact");
                       SpringNoise=true;}

                else if((a.equals("wrench") && b.equals("door")) ||
                         (a.equals("door") && b.equals("wrench"))) {
                    Log.i("contact","door contact");
                           WoodNoise=true;}
            }}

    }
    @Override
    public void endContact(final Contact contact) {}

    @Override
    public void beginContact(Contact contact) {}

    @Override
    public void preSolve(Contact contact, Manifold oldManifold) {}
        }; 
```

这是删除 body/sprite 组合的代码：

```
private void myDestroyer(final PhysicsConnector facePhysicsConnector2, final Boolean bodyToo){
            if(killingInProcess == false){
                    killingInProcess = true;
                    //final PhysicsConnector facePhysicsConnector2 = mPhysicsWorld.getPhysicsConnectorManager().findPhysicsConnectorByShape(myShape);
                    sceneValue.engine.registerUpdateHandler(new IUpdateHandler(){
                            @Override
                            public void onUpdate(float pSecondsElapsed) {
                                sceneValue.engine.unregisterUpdateHandler(this);
                                sceneValue.engine.runOnUpdateThread(new Runnable(){
                                                    @Override
                                                    public void run() {
                                                        Log.i("contact","removing bolt");
                                                            mPhysicsWorld.unregisterPhysicsConnector(facePhysicsConnector2);
                                                            Vibrator v = (Vibrator) sceneValue.activity.getSystemService(Context.VIBRATOR_SERVICE);
                                                            //myFixture.getBody().destroyFixture(myFixture);
                                                    if(bodyToo == true){
                                                                    mPhysicsWorld.destroyBody(facePhysicsConnector2.getBody());
                                                    }
                                                    facePhysicsConnector2.getShape().registerEntityModifier(new ParallelEntityModifier(new RotationModifier(3,180,0),
                                                    new ScaleModifier(3, 1, 0)));
                                                    sceneValue.mBlockSound.play();
                                                    v.vibrate(75);

                                                    //mScene.detachChild(mySprite);
                                                    System.gc();
                                                    killingInProcess = false;
                                                    }
                                            });
                            }
                            @Override
                            public void reset() {
                            }
                    });    
            }} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T00:36:03.347

我不确定崩溃问题，但我确实知道为什么移除尸体发生得太晚了。

该方法`postSolve` **是**从 UpdaeThread 调用的。但不是在那里删除身体，而是注册另一个更新处理程序（所以它的代码在下一次游戏更新中运行）。在这段代码中，您运行另一个代码，`runOnUpdateThread`以便它**在下一次游戏更新中**再次运行。您无缘无故地跳过了 2 次更新 :) 这可能会产生问题（它可能确实如此）

我建议你解决这个问题，这寻找另一个问题（这可能很严重，很容易解决）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T15:12:47.030

我不确定，但我认为问题可能在于您删除了精灵。我遇到了这个问题，现在我正试图像这样在更新处理程序中杀死身体（IUpdateHandler 中的 onUpdate 方法）：

```
 final PhysicsConnector physicsConnector = physicsWorld
                        .getPhysicsConnectorManager().findPhysicsConnectorByShape(
                                body);
                body.clearEntityModifiers();
                physicsWorld.unregisterPhysicsConnector(physicsConnector );
                physicsWorld.destroyBody(physicsConnector.getBody());
                scene.detachChild(body);
                activity.getEngine().unregisterUpdateHandler(this); 
```

# iphone - 将 NSString 从解析粘贴到 UILabel

> ID：13296278
> 
> 赞同：1
> 
> 时间：2012-11-08T19:26:53.313
> 
> 标签：iphone, objective-c, ios, parsing, uilabel

如果视图加载，我想获取我在 parse.com 上创建的 NSString 并将其粘贴到标签中。我[从 Parse.com 尝试了这个 Grab NSString 并将其粘贴到 UILabel](https://stackoverflow.com/questions/10776809/grab-nsstring-from-parse-com-and-paste-it-into-uilabel)中，但它似乎不起作用。有没有人可以解决我的问题？

我在这里 parse 设置了一些东西：

![在此处输入图像描述](../Images/0f8d5b98758db53a52fc89366f0b109a.png)

并尝试了这段代码。但是，没有任何效果...

```
PFQuery *query = [PFQuery queryWithClassName:@"TextObject"];

PFObject *textu = [query getObjectWithId:@"zhfk6bWd5r"];
label.text = [textu objectForKey:@"text"]; 
```

我很高兴有人可以帮助我解决这个问题。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T19:39:28.307

您的对象`TestObject`在图像中，但`TextObject`在代码中。请将代码更改为：

```
PFQuery *query = [PFQuery queryWithClassName:@"TestObject"];
PFObject *textu = [query getObjectWithId:@"zhfk6bWd5r"];
label.text = [textu objectForKey:@"text"]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T19:43:53.327

拼写不正确，所以这是我的解决方案：

```
PFQuery *query = [PFQuery queryWithClassName:@"TestObject"];

PFObject *textu = [query getObjectWithId:@"zhfk6bWd5r"];
label.text = [textu objectForKey:@"text"]; 
```

谢谢大家！

# windows-7 - 来自 VBScript 的权限提升

> ID：13296281
> 
> 赞同：6
> 
> 时间：2012-11-08T19:27:09.333
> 
> 标签：windows-7, vbscript

我们运行 Dynamics GP。由于它存储表单/报告的方式，我需要一些将 .SET 文件复制到程序目录中的安装脚本。这可以手动完成，但是让用户运行安装程序脚本来为他们​​安装正确的文件会更快。

我一直在构建一个复制必要文件的 VBScript 安装程序。棘手的部分是一些客户端运行的是 Windows XP，而一些客户端运行的是 Windows 7（甚至 8）。UAC 已启用，因此权限开始发挥作用。

我尝试这样做的方法是盲目地尝试复制文件，如果检测到权限错误，它会以管理员权限重新启动脚本。我们遇到的问题是一些（全部？）Windows 7 机器启用了虚拟文件/注册表写入，因此当脚本尝试将文件复制到 C:\Program Files\Microsoft Dynamics\GP2010 时，它会默默地失败并复制它们到用户的 AppData\Local\VirtualStore 目录。这不适用于 GP。

所以我需要做的是让脚本将文件复制到 C:\Program Files （不是 VirtualStore 目录），并仅在必要时提升权限。如果我让它全面提升，这会导致 Windows XP 机器在启动脚本时简单地弹出一个神秘的“运行方式”对话框。

这是我到目前为止所拥有的：

```
Dim WSHShell, FSO, Desktop, DesktopPath
Set FSO = CreateObject("Scripting.FileSystemObject")
Set WSHShell = CreateObject("WScript.Shell")
Desktop = WSHShell.SpecialFolders("Desktop")
DesktopPath = FSO.GetAbsolutePathName(Desktop)

'Set working directory to directory the script is in.
'This ends up being C:\Windows\System32 if the script is
'started from ShellExecute, or a link in an email, thus breaking
'relative paths.
WSHShell.CurrentDirectory = FSO.GetFile(WScript.ScriptFullName).ParentFolder

On Error Resume Next

If FSO.FolderExists("C:\Program Files (x86)") Then
    WScript.Echo "Installing 64-bit."
    FSO.CopyFile "64-bit\*.set", "C:\Program Files (x86)\Microsoft Dynamics\GP2010\", True
    FSO.CopyFile "64-bit\*.lnk", DesktopPath, True
ElseIf FSO.FolderExists("C:\Program Files\Microsoft Dynamics\GP2010\Mekorma MICR") Then
    WScript.Echo "Installing 32-bit (with MICR)."
    FSO.CopyFile "32-bit MICR\*.set", "C:\Program Files\Microsoft Dynamics\GP2010\", True
    FSO.CopyFile "32-bit MICR\*.lnk", DesktopPath, True 
Else
    WScript.Echo "Installing 32-bit."
    FSO.CopyFile "32-bit\*.SET", "C:\Program Files\Microsoft Dynamics\GP2010\", True
    FSO.CopyFile "32-bit\*.lnk", DesktopPath, True
End If

If Err.Number = 70 Then
    CreateObject("Shell.Application").ShellExecute "wscript.exe", """" & WScript.ScriptFullName & """" , "", "runas", 1
    WScript.Quit
ElseIf Err.Number <> 0 Then
    MsgBox "Error " & Err.Number & vbCrLf & Err.Source & vbCrLf & Err.Description
Else
    MsgBox "Installed successfully."
End If 
```

总之：我如何让 VBScript 提升权限*而不*导致 XP 在“运行方式”对话框中停止，并且*不会*导致 Windows 7 将文件复制到 AppData\Local\VirtualStore？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2016-01-07T02:07:29.060

改进了@db2 答案：

*   真正的海拔测试，不依赖于传递的参数
*   将所有原始参数传递给提升的脚本
*   使用与初始脚本相同的主机：`wscript.exe`, `cscript.exe`, 不管

**代码：**

```
Set OSList = GetObject("winmgmts:").InstancesOf("Win32_OperatingSystem")
For Each OS In OSList
    If InStr(1, OS.Caption, "XP") = 0 And InStr(1, OS.Caption, "Server 2003") = 0 Then
        With CreateObject("WScript.Shell")
            IsElevated = .Run("cmd.exe /c ""whoami /groups|findstr S-1-16-12288""", 0, true) = 0
            If Not IsElevated Then
                Dim AllArgs
                For Each Arg In WScript.Arguments
                    If InStr( Arg, " " ) Then Arg = """" & Arg & """"
                    AllArgs = AllArgs & " " & Arg
                Next
                Command = """" & WScript.ScriptFullName & """" & AllArgs
                With CreateObject("Shell.Application")
                    .ShellExecute WScript.FullName, " //nologo " & Command, "", "runas", 1
                    WScript.Echo WScript.FullName & " //nologo " & Command
                End With
                WScript.Quit
            End If
        End With
    End If
Next

' Place code to run elevated here 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-09T13:26:46.093

似乎这是最简单的方法。

1.  检查操作系统版本。
2.  如果不是 XP 或 2003（我预计不会在任何旧版本上运行），请使用提升重新执行。

这是我添加到脚本开头的代码块：

```
Dim OSList, OS, UAC
UAC = False
If WScript.Arguments.Count >= 1 Then
    If WScript.Arguments.Item(0) = "elevated" Then UAC = True
End If

If Not(UAC) Then
    Set OSList = GetObject("winmgmts:").InstancesOf("Win32_OperatingSystem")
    For Each OS In OSList
        If InStr(1, OS.Caption, "XP") = 0 And InStr(1, OS.Caption, "Server 2003") = 0 Then
            CreateObject("Shell.Application").ShellExecute "wscript.exe", """" & WScript.ScriptFullName & """ elevated" , "", "runas", 1
            WScript.Quit
        End If
    Next
End If 
```

# xml - XML 作为参数传递给 XSL，无法使用 Datapower 转换为节点集

> ID：13296285
> 
> 赞同：2
> 
> 时间：2012-11-08T19:27:27.273
> 
> 标签：xml, xslt

我将以下 XML 作为参数传递到下面的 XSL 中（通过 Java）。

```
<roles><role>USA</role><role>GB</role><role>EU</role></roles> 
```

我无法对其进行评估，但如果我在变量中定义完全相同的 xml 字符串，它就可以正常工作。

我正在使用数据电源。

这是我的 XSL：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0" 
xmlns:xsl="http://www.w3.org/1999/XSL/Transform" 
xmlns:fo="http://www.w3.org/1999/XSL/Format"
xmlns:exslt="http://exslt.org/common"
xmlns:dyn="http://exslt.org/dynamic"
>

<xsl:param name="roles"/>

<xsl:variable name="roles2"><roles><role>USA</role><role>GB</role><role>EU</role></roles></xsl:variable>

<xsl:template match="/">

    <xsl:if test="exslt:node-set($roles)/roles/role = 'GB'">
        YES 1
    </xsl:if>

    <xsl:if test="exslt:node-set($roles2)/roles/role = 'GB'">
        YES 2
    </xsl:if>

    <xsl:if test="$roles2/roles/role = 'GB'">
        YES 3
    </xsl:if>

    roles = <xsl:value-of select="$roles" />
    roles2 = <xsl:value-of select="$roles2" />

</xsl:template> 
```

当我运行它时，我得到以下输出：

```
YES 2 YES 3 roles = <roles><role>USA</role><role>GB</role><role>EU</role></roles> roles2 = USAGBEU 
```

有人可以帮助我了解正在发生的事情以及如何将其修复为 YES 1 出现吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T20:13:08.143

当您将它作为参数传递时，它是一个字符串值，而不是一个节点集。即它没有被解析为XML。AFAIK 无法在 XSLT1 或 2 上实现这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-02T13:24:08.840

您可以使用 exsl:node-set 来解决这个问题。

# function - 带有 IF 语句的向量函数的 MATLAB 返回

> ID：13296290
> 
> 赞同：3
> 
> 时间：2012-11-08T19:28:01.217
> 
> 标签：function, matlab, if-statement, vector, return

我正在调用这样的向量的自写函数“func”：

```
x_values=[0 1 2];
result=func(x_values); 
```

问题是在这个函数中我有一个`if`语句来确定输出。如果我将此函数应用于标量，我没有问题，但如果我将它应用于数字向量，则该`if`语句无法完成他的工作。为什么？我该如何修复它？

```
function [y]=func(x)
if(x==0)
  y=0
else
  y=1./sin(x);
end
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T19:52:52.890

您需要分别处理零和非零条目。这可以通过索引轻松实现：

```
function [y]=func(x)
xIsZero = x==0;

%# preassign y
y = x;

%# fill in values for y
y(xIsZero) = 0

y(~xIsZero) = 1./sin(x(~xIsZero)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T19:58:14.220

[答案在IF](http://www.mathworks.com/help/matlab/ref/if.html)的帮助文档中有解释：

> 当结果为非空且包含所有非零元素（逻辑或实数）时，计算表达式为真。否则，表达式为假。

结论：要么添加一个 for 循环，要么找到一种更好的方法来矢量化你的表达式

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T19:53:36.317

您只想分配向量的一个子集。例如：

```
function [y]=func(x)
    y=zeros(size(x));
    mask = x ~= 0;
    y(mask) = 1 ./ sin(x(mask));
end 
```

# c# - 在没有 Stackoverflow 异常的情况下循环运行异步方法

> ID：13296296
> 
> 赞同：1
> 
> 时间：2012-11-08T19:28:16.653
> 
> 标签：c#, multithreading, asynchronous, windows-8, windows-runtime

这段代码一直抛出 a `stackoverflow exception`，我感觉要么是因为`await`关键字导致堆栈填满，要么是线程可用性问题。但是，我不确定解决此问题的最佳方法是什么。

该`results`变量只是一个集合，`StorageFiles`如果超过 1020 左右，则抛出异常；否则*通常*没问题。

```
private async void GetMusicTest()
{
    var sfolder = await StorageFolder.GetFolderFromPathAsync(dir);

    var query =  sfolder.CreateFileQueryWithOptions(queryOptions);

    var results = await query.GetFilesAsync();

    for (int i = 0; i < results.Count; i++)
    {
        MusicProperties mp = await results[i].Properties.GetMusicPropertiesAsync();
        Debug.WriteLine(mp.Title);
    }
} 
```

此代码在控制台应用程序中运行良好，但在桌面 WinForm 应用程序中使用时会引发错误。

有趣的是，如果`result.Count()`使用 if 代替，则在三次迭代后抛出错误，而`results.Count`在迭代至少一半集合（如果不是全部的话）后抛出它（它似乎有所不同）。它们都返回相同的值。在不导致 stackoverflow 异常或用完所有可用线程的情况下循环遍历的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T21:56:10.403

我[认为这是一个](http://social.msdn.microsoft.com/Forums/en-US/parallelextensions/thread/03f49531-7e49-404a-a77f-36edb3069b9c)应该解决的错误。

如果我是对的，你可以通过偶尔`await Task.Yield()`在你的循环中做一个来解决它。

# c# - how to extract digits and letters

> ID：13296300
> 
> 赞同：-2
> 
> 时间：2012-11-08T19:28:29.947
> 
> 标签：c#, token

how can i make a function that extracts digits and letters from tokens,i am trying to work on a lexical analyzer in c sharp which extracts variables datatypes liberaries from a cpp file i want my function to extract digits and letters i have managed to make functions that extract variables ,datatypes n libraries

for example i want a combination of these two functions

```
bool IsDigit(char ch)
{
    return (ch >='0' && ch <= '9');
}

bool IsAlpha(char ch)
{
    return (ch >='a' && ch <= 'z'|| ch>'A '&& ch<'Z');

} 
```

any ideas??

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T19:40:50.983

Are you trying to do this:

```
private bool IsAlphaNumeric(string letter)
{
     return Regex.IsMatch(letter, @"^[a-zA-Z0-9]");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T19:30:38.187

You can try this:-

```
 Match match = regex.Match("10ABCD");
 string letter = match.Groups["letter"].Value;
  int number = int.Parse(match.Groups["number"].Value); 
```

or try a regular expression:-

```
 ((?<number>\d+)(?<letter>[a-zA-Z])|(?<letter>[a-zA-Z])(?<number>\d+)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T19:31:17.230

Well first off, you should be doing this on `IsAlpha` (notice the extra brackets)

```
((ch >='a' && ch <= 'z')||(ch>'A '&& ch<'Z')) 
```

# javascript - JavaScript if 语句需要帮助

> ID：13296302
> 
> 赞同：0
> 
> 时间：2012-11-08T19:28:35.103
> 
> 标签：javascript, jquery, if-statement, html-helper

将鼠标悬停在列表上时，我正在使用 JavaScript 来实现预览框。我会告诉你我的代码，然后是一个关于它是如何工作的实时网站，然后我会说这个问题。

HTML

```
<div id="content">

<div id="theDiv"><h1>Custom </h1></div>

<div id="theDiv1"><h1>Custom One</h1> </div>

<div id="theDiv2"><h1>Custom Two</h1></div>

<div id="theDiv3"><h1>Custom Three</h1></div>

<div id="theDiv4"><h1>Custom Four</h1></div>

<div id="theDiv5"><h1>Custom Five</h1></div>

<div id="theDiv6"><h1>Custom Six</h1></div>

<div id="theDiv7"><h1>Custom Seven</h1></div>

<ul id="nav">
  <li><a href="#"><b>Austria ></b></a> <br/>
    <ul>
      <li><a href="#" class="theLink">Factsheet </a></li><br/>
      <li><a href="#" class="theLink1">Stylesheet </a></li><br/>
      <li><a href="#" class="theLink2">References </a></li><br/>
    </ul>
  </li>
  <li><a href="#"><b>Switzerland ></b></a> <br/>
    <ul>
      <li><a href="#" class="theLinka">Factsheet </a></li><br/>
      <li><a href="#" class="theLinka1">Stylesheet </a></li><br/>
      <li><a href="#" class="theLinka2">References </a></li><br/>
    </ul>
  </li>
  <li><a href="#"><b>Explanation Page ></b></a> <br/>
    <ul>
      <li><a href="#" class="theLinkb">Stylesheet </a></li><br/>
      <li><a href="#" class="theLinkb1">References </a></li><br/>
    </ul>
  </li>
</ul>

        </div> 
```

CSS

```
ul {
    padding-left:10px;
    list-style: none;
    width:150px;
}

ul li {
    position: relative;
    left:10px;
    width:148px;
}

li ul {
    position: relative;
    display:none;
}
/* Styles for Menu Items */
ul li a {
    display:block;
    text-decoration: none;
    line-height:2em;
    height:2em; 
    padding:0 5px;
    color:#666;
}
a:hover {color:#999;}
li ul li {width:139px; }
li.on ul { display:block; }
li.off ul{display:none; }
.linkhover:hover {text-decoration:underline; }
.linkxp:hover {text-decoration:underline; }

#theDiv, #theDiv1, #theDiv2, #theDiv3, #theDiv4, #theDiv5, #theDiv6, #theDiv7, #theDiv8 {
    padding:10px;
    float:right;
    margin:0px 50px 0 0;
    width:300px;
    height:500px;
    border:1px solid #000;
    display:none;
} 
```

JavaScript

```
$(window).load(function(){
 $(".theLink").hover(
        function () {
            $("#theDiv").fadeIn();
        },
        function () {
            $("#theDiv").fadeOut();
        }
    );
});

$(window).load(function(){
 $(".theLink1").hover(
        function () {
            $("#theDiv1").fadeIn();
        },
        function () {
            $("#theDiv1").fadeOut();
        }
    );
});

$(window).load(function(){
 $(".theLink2").hover(
        function () {
            $("#theDiv2").fadeIn();
        },
        function () {
            $("#theDiv2").fadeOut();
        }
    );
});

$(window).load(function(){
 $(".theLinka").hover(
        function () {
            $("#theDiv3").fadeIn();
        },
        function () {
            $("#theDiv3").fadeOut();
        }
    );
});

$(window).load(function(){
 $(".theLinka1").hover(
        function () {
            $("#theDiv4").fadeIn();
        },
        function () {
            $("#theDiv4").fadeOut();
        }
    );
});

$(window).load(function(){
 $(".theLinka2").hover(
        function () {
            $("#theDiv5").fadeIn();
        },
        function () {
            $("#theDiv5").fadeOut();
        }
    );
});

$(window).load(function(){
 $(".theLinkb").hover(
        function () {
            $("#theDiv6").fadeIn();
        },
        function () {
            $("#theDiv6").fadeOut();
        }
    );
});

$(window).load(function(){
 $(".theLinkb1").hover(
        function () {
            $("#theDiv7").fadeIn();
        },
        function () {
            $("#theDiv7").fadeOut();
        }
    );
}); 
```

这是一个实时视图的链接； [http://tubebackgrounds.co.uk/uni/demo/explanation.html#](http://tubebackgrounds.co.uk/uni/demo/explanation.html#)

如您所见，如果在显示列表样式时将鼠标悬停在列表样式上的速度过快，则会显示其他样式。我想知道是否可以使用 if 语句，所以只有一个

```
$(window).load(function(){
 $(".theLink").hover(
        function () {
            $("#theDiv").fadeIn();
        },
        function () {
            $("#theDiv").fadeOut();
        }
    );
}); 
```

可以一次性启用吗？或者也许是一种使淡入和淡出更快的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T20:49:56.543

问题的一部分只是你的CSS。您的每个 div（#theDiv、#theDiv1、#theDiv2 等）都彼此相邻浮动。所以当你隐藏一个时，下一个会在它的位置弹出。如果您将他们的显示属性设置为 display:block 您将设置我所说的内容。你真正想要的是将这些 div 一个一个堆叠在另一个之上，就像一副纸牌一样，然后淡入淡出。要实现这一点，请尝试添加此 css：

```
#content { 
   position:relative;
} 
#theDiv, #theDiv1, #theDiv2, #theDiv3, #theDiv4,#theDiv5, #theDiv6, #theDiv7, #theDiv8 {
    border: 1px solid #000000;
    display: none;
    height: 500px;
    margin: 0 50px 0 0;
    padding: 10px;
    position: absolute;
    right: 0;
    width: 300px;
} 
```

现在你的javascript应该可以正常工作了。您可以通过使用@beerwin 建议和使用回调使 javascript 更好一些。这样 div 淡入只会在前一个淡出后才会淡入

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T19:35:09.787

使用回调函数：

```
$(window).load(function(){
  $(".theLink").hover(
    function () {
        $("#theDiv").fadeOut(function(){
            $("#theDiv1").fadeIn();
        });
    });
}); 
```

# regex - 使用 Sublime Text 的正则表达式进行数组搜索和替换

> ID：13296307
> 
> 赞同：2
> 
> 时间：2012-11-08T19:28:53.447
> 
> 标签：regex, sublimetext2

如何使用正则表达式搜索多个单词并用特定单词替换每个单词？在 PHP 中它将是：

```
$string = 'The quick bar foo jumps over the bazzy qux';
$patterns = array('foo', 'bar');
$replacements = array('baz', 'qux');
echo preg_replace($patterns, $replacements, $string);
// Outputs: The quick qux baz jumps over the bazzy qux 
```

我想在 Sublime Text 中执行它，它使用 Boost 语法进行搜索和替换（[参考](http://docs.sublimetext.info/en/latest/search_and_replace/search_and_replace_overview.html)），这似乎是珍珠语法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-30T20:13:15.470

我会使用启用正则表达式的搜索来查找一个单词的所有内容，然后点击全部查找。然后只需输入您的替换词。对每个要替换的词重复此操作。

# postgresql - 是否可以在写保护的文件系统上运行 Postgres？还是共享文件系统？

> ID：13296311
> 
> 赞同：5
> 
> 时间：2012-11-08T19:29:02.417
> 
> 标签：postgresql, parallel-processing, distributed-computing

我正在尝试建立一个分布式处理环境，所有数据都位于一个共享网络驱动器中。我不会给它写任何东西，只是从中读取，所以我们也在考虑对网络驱动器进行写保护。

我记得当我使用 MSSQL 时，我可以将数据库备份到 DVD 并将其作为只读数据库直接加载。

如果我可以在 Postgres 中做类似的事情，我应该能够像只读 DVD 一样给它一个抽象，一切都会好起来的。

在 Postgres 中是否有可能发生这样的事情，如果没有，还有其他选择吗？（MySQL？甚至是sqlite？）

或者，如果这不可能，是否有某种方法可以指定共享文件系统？（让它知道其他进程也在从中读取？）

由于各种原因，无法使用并行 dbms，我需要两个并行运行的 DB 进程......

任何帮助是极大的赞赏。谢谢！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T01:00:58.900

对数据目录进行写保护会导致 PostgreSQL 无法启动，因为它需要能够写入`postmaster.pid`. PostgreSQL 还需要能够编写临时文件和表空间、设置提示位、管理可见性映射等等。

理论上，可以修改 PostgreSQL 服务器以支持在只读数据库上运行，但目前不支持 AFAIK。不要指望它会起作用。您需要为每个实例克隆数据目录。

如果出于性能原因要运行多个 PostgreSQL 实例，让它们争夺共享存储无论如何都会适得其反。如果数据库足够小以适合 RAM 就可以了……但在这种情况下，只需将其克隆到每台机器上也很容易。如果数据库不够大，无法缓存在 RAM 中，那么两个数据库实例都会出现 I/O 瓶颈，并且不太可能比不受存储争用影响的单个数据库更好（可能略差于）。

您有可能通过以下方式使其工作：

*   将常量数据移动到一个新的表空间到只读共享存储上
*   对数据库进行基本备份，减去新分离的共享数据表空间
*   复制数据库的基本备份以读取/写入将运行数据库的每个主机上的私有存储
*   挂载共享存储并将表空间链接到 Pg 期望的位置
*   起始页

...至少如果您首先强制提示位设置和`VACUUM FREEZE`共享表空间中的所有内容。它不受支持，没有经过测试，它可能无法工作，运行私有实例没有任何好处，我肯定不会这样做，但如果你真的坚持你可以尝试。崩溃、错误的查询结果和其他奇怪的行为并非不可能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T19:43:03.957

我从未尝试过，但如果您的所有使用确实是只读的，则可以使用主要位于 RO 文件系统上的数据目录运行 postgres。您需要确保禁用 autovacuum。我认为即使读取活动也可能会产生 xlog 突变，因此您可能必须将`pg_xlog`目录符号链接到可写文件系统上。有时读取查询会因大型排序或其他临时要求而溢出到磁盘，因此您还应该链接`base/pgsql_tmp`到可写磁盘区域。

正如理查德指出的那样，数据堆中有可见性提示位。可能想[`VACUUM FULL FREEZE ANALYZE`](http://www.postgresql.org/docs/current/static/sql-vacuum.html)在将它放在 RO 文件系统之前先在 db 上尝试一下。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-27T17:04:53.220

“在 Postgres 中这样的事情是否可能，如果没有，还有其他选择吗？（MySQL？甚至是 sqlite？）”

我试图弄清楚我是否也可以使用 postgres 来执行此操作，以便从 sqlite 移植系统。我可以确认这适用于只读 NFS 共享上的 sqlite3 数据库文件。Sqlite 确实可以很好地用于此目的。

使用 sqlite 完成后，只要有更新，我们就会切换到包含新 sqlite 文件的新目录。我们永远不会插入到正在使用的数据库中。我不确定插入是否会造成任何问题（对于任一数据库）。如果另一个数据库实例以读写方式挂载了目录，则在操作系统级别缓存只读数据可能会成为问题。这是我最希望能够做到的事情。

# sql - SQL: FOREIGN KEY 防止破坏表之间的链接

> ID：13296313
> 
> 赞同：0
> 
> 时间：2012-11-08T19:29:03.307
> 
> 标签：sql, foreign-keys

参考：[w3schools-SQL](http://www.w3schools.com/sql/sql_foreignkey.asp)

它指出：

**FOREIGN KEY 约束用于防止会破坏表之间链接的操作。**有人可以举一个外键会阻止的动作的例子吗？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T19:35:25.567

假设我们有两张表**Employees**和**Departments**。每个部门都有一个唯一的编号，对于每个员工，我们都会列出他或她所在部门的编号。我们也将其声明为外键。

在这种情况下，外键会阻止一些操作：

*   插入在不存在的部门工作的新员工
*   删除有员工在工作的部门
*   通过将员工工作的部门更改为不存在的部门来更新员工
*   如果有在该部门工作的员工，则通过更改其编号来更新该部门
*   销毁部门表

所有这些都是为了确保当数据库说某个员工在某个部门工作时，该部门将实际存在于数据库中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T19:33:55.213

表 Employee 的主键设置为 empid。

Table Employee 中的表地址引用（外键约束）empid

如果您尝试从 Table Employee 中删除员工“1011”，并且该员工在 Table Address 中有一条记录，则由于依赖关系，删除将不会通过。除非您设置了级联删除..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T19:36:23.770

表用户

```
ID   UserName
1    msmucker0527
2    Jake 
```

表格电子邮件（外键：UserID = Users.ID）

```
UserID    Email
1         msmucker0527@email.net
2         jake@email.net 
```

您不能使用用户表中不存在的用户 ID 将记录添加到电子邮件表。这样，您就没有未“链接”到用户的电子邮件地址。您也将被阻止在不先删除电子邮件地址的情况下删除用户，以免它陷入困境

# php - AJAX 无法将数据发送到 PHP 页面

> ID：13296314
> 
> 赞同：0
> 
> 时间：2012-11-08T19:29:04.237
> 
> 标签：php, ajax

我有一个带有此 AJAX 代码的 php 页面，它从表单中获取数据并将它们传递到另一个 php 页面。问题是它不起作用，我不知道为什么！

这里是 AJAX 代码的形式：

```
 <form name="modulo" id="alter_tarea">
                    <table id="alter_tarea_table">
                        <tr>
                            <td>Descrizione</td>
                            <td><input type="text" name="descrizione" id="descrizione" value="<?php echo $x['descrizione']; ?>"></td>
                        </tr>
                        <tr>
                            <td>Data Limite</td>
                            <td><input type="text" name="data_limite" id="sel3" size="10" value="<?php echo $x['data_limite']; ?>"><input type="reset" value=" ... "
        onclick="return showCalendar('sel3', '%Y-%m-%d');"></td>
                        </tr> 
                        <tr>
                            <td>Realizzato</td>
                            <?php 
                                if($x['realizzato'] == 1)
                                    echo"<td><input type=\"checkbox\" name=\"realizzato\" id=\"realizzato\" /></td>";
                                else
                                    echo"<td><input type=\"checkbox\" name=\"realizzato\" id=\"realizzato\" checked=\"checked\"/></td>";  
                            ?>
                        </tr>                 
                        <tr>
                            <td><input type="button" value="Modifica" id="modifica_button" name="modifica_button"></td>
                        </tr>
                    </table>  
                </form>

                         <script type="text/javascript">
                            $(document).ready(function() {
                                $("#modifica_button").click(function(){

                                var descrizione = $("#descrizione").val();
                                var data = $("#data_limite").val();
                                var realizzato = $("#realizzato").val();

                                $.ajax({

                                //imposto il tipo di invio dati (GET O POST)
                                type: "POST",

                                //Dove devo inviare i dati recuperati dal form?
                                url: "modifica_tarea.php",

                                //Quali dati devo inviare?
                                data: "descrizione=" + descrizione + "&data_limite=" + data + "&realizzato=" + realizzato,
                                dataType: "html",

                                //Inizio visualizzazione errori
                                success: function(msg)
                                {
                                    $("#mostra_tarea").replaceWith(msg); 
                                },
                                error: function()
                                {
                                    alert("Chiamata fallita, si prega di riprovare..."); //sempre meglio impostare una callback in caso di fallimento
                                }
                                });
                            });
                           });
                    </script> 
```

这里是简单的 .php 页面：

```
<?php

$descrizione = $_POST['descrizione'];
$data_limite = $_POST['data'];
$realizzato = $_POST['realizzato'];

echo $descrizione;
echo $data_limite;
echo $realizzato;
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T19:33:44.210

看起来你忘记包含 jQuery 库了......它对我来说很好用。

```
<!-- ADD THIS LINE //-->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
<form name="modulo" id="alter_tarea">
                    <table id="alter_tarea_table">
                        <tr>
                            <td>Descrizione</td>
                            <td><input type="text" name="descrizione" id="descrizione" value="<?php echo $x['descrizione']; ?>"></td>
                        </tr>
                        <tr>
                            <td>Data Limite</td>
                            <td><input type="text" name="data_limite" id="sel3" size="10" value="<?php echo $x['data_limite']; ?>"><input type="reset" value=" ... "
        onclick="return showCalendar('sel3', '%Y-%m-%d');"></td>
                        </tr> 
                        <tr>
                            <td>Realizzato</td>
                            <?php 
                                if($x['realizzato'] == 1)
                                    echo"<td><input type=\"checkbox\" name=\"realizzato\" id=\"realizzato\" /></td>";
                                else
                                    echo"<td><input type=\"checkbox\" name=\"realizzato\" id=\"realizzato\" checked=\"checked\"/></td>";  
                            ?>
                        </tr>                 
                        <tr>
                            <td><input type="button" value="Modifica" id="modifica_button" name="modifica_button"></td>
                        </tr>
                    </table>  
                </form>

                         <script type="text/javascript">
                            $(document).ready(function() {
                                $("#modifica_button").click(function(){

                                var descrizione = $("#descrizione").val();
                                var data = $("#data_limite").val();
                                var realizzato = $("#realizzato").val();

                                $.ajax({

                                //imposto il tipo di invio dati (GET O POST)
                                type: "POST",

                                //Dove devo inviare i dati recuperati dal form?
                                url: "modifica_tarea.php",

                                //Quali dati devo inviare?
                                data: "descrizione=" + descrizione + "&data_limite=" + data + "&realizzato=" + realizzato,
                                dataType: "html",

                                //Inizio visualizzazione errori
                                success: function(msg)
                                {
                                    // CHANGE THIS LINE TO $("#mostra_tarea").replaceWith(msg); 
                                    $("#mostra_tarea").empty().append(msg);  
                                },
                                error: function()
                                {
                                    alert("Chiamata fallita, si prega di riprovare..."); //sempre meglio impostare una callback in caso di fallimento
                                }
                                });
                            });
                           });
                    </script> 
```

# string - 如何在 JavaCC 中为新行使用反斜杠转义字符？

> ID：13296318
> 
> 赞同：2
> 
> 时间：2012-11-08T19:29:14.850
> 
> 标签：string, escaping, newline, lexical-analysis, javacc

我的任务是创建一个词法分析器，除了一点点之外，我已经完成了所有工作。我需要创建一个将接受新行的字符串，并且该字符串由双引号分隔。该字符串接受分隔符内的任何数字、字母、某些指定的标点符号、反斜杠和双引号。我似乎无法弄清楚如何转义换行符。是否有某种转义字符的方法，例如换行符和制表符？

这是我的一些代码可能会有所帮助

```
< STRING : ( < QUOTE> (< QUOTE > | < BACKSLASH > | < ID > | < NUM > | " " )* <QUOTE>) >
< #QUOTE : "\"" >
< #BACKSLASH : "\\" > 
```

所以我的字符串应该允许一个引号，然后是以下任何字符，如反斜杠、空格、数字等，然后是另一个引号。像 "\n" 这样的换行符不起作用。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T22:54:10.593

对于字符串文字，JavaCC 借用了 Java 的语法。因此，包含回车的单字符文字转义为`"\r"`，而包含换行符的单字符文字转义为“ `\n`”。

但是，处理后的字符串值只是单个字符；这不是逃避本身。因此，假设您为换行定义了一个标记：

```
< LF : "\n" > 
```

标记的匹配`<LF>`将是单个换行符。当在另一个记号的定义中替换记号时，单个字符被有效地替换。因此，假设您有更高级别的定义：

```
< STRING : "\"" ( <LF> ) "\"" > 
```

令牌的匹配`<STRING>`将是三个字符：引号，后跟换行符，后跟引号。相反，您似乎想要的是识别转义序列：

```
< STRING : "\"" ( "\\n" ) "\"" > 
```

Now a match of the token `<STRING>` will be four characters: a quotation mark, followed by an escape sequence representing a line feed, followed by a quotation mark.

In your current definition, I see that other often-escaped metacharacters like quotation mark and backslash are also being recognized literally, rather than as escape sequences.

# python - 分布式应用程序的 Python 部署

> ID：13296320
> 
> 赞同：4
> 
> 时间：2012-11-08T19:29:31.463
> 
> 标签：python, web-applications, deployment

我们正在用 Python 开发一个分布式应用程序。现在，我们即将重新组织我们的一些系统组件并将它们部署在单独的服务器上，因此我希望更多地了解有关此类应用程序的部署。我们将有几个后端代码服务器，几个数据库服务器（不同类型），可能还有几个前端服务器。

我的问题是：什么/哪些是分布式应用程序（Python 或一般情况下）的良好部署模式？如何管理将代码推送到多个服务器（其 IP 应在部署系统中参数化）、将静态文件推送到多个前端、启动/停止服务器中的进程等？我们正在寻找一种可能易于使用的解决方案，但大多数情况下，一旦设置好，我们就会摆脱困境，让我们尽可能轻松地部署。

澄清一下：我们知道对于这个特定的应用程序没有**一个**标准的解决方案，但是这个问题更倾向于针对不同类型/部分部署的最佳实践指南，而不是一个单一的、统一的解决方案。

非常感谢！非常感谢有关此或其他部署/架构指针的任何建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T19:38:15.873

这完全取决于您的应用程序。

你可以：

*   使用 Puppet 部署服务器，
*   使用 Fabric 远程连接服务器并执行特定任务，
*   使用 pip 分发 Python 模块（甚至是非公共模块）并安装依赖项，
*   为特定任务使用其他工具（例如使用 boto 与 Amazon Web Services API 一起工作，例如启动新实例），

它并不总是那么简单，您很可能需要定制的东西。看看你的系统：它不是那么“标准”，所以不要指望它以“标准”的方式处理。

# php - 为什么我在从 PHP 输出 JavaScript 时会收到 Illegal Token？

> ID：13296322
> 
> 赞同：2
> 
> 时间：2012-11-08T19:29:37.717
> 
> 标签：php, javascript, jquery, wordpress

我正在尝试将 Google 翻译代码从 PHP（wordpress 插件）输出到页面，即使我将完全相同的代码行直接粘贴到控制台并运行它，它也会给我 Illegal Token 错误。

这是我的PHP：

```
 function AddTranslateSidebar(){
  echo "<script>
    jQuery(document).ready(function(){
      gt = escape('<div id=\"google_translate_element\"></div><script type=\"text/javascript\">function googleTranslateElementInit() {new google.translate.TranslateElement({pageLanguage: \"en\", layout: google.translate.TranslateElement.InlineLayout.SIMPLE}, \"google_translate_element\");}</script><script type=\"text/javascript\" src=\"http://translate.google.com/translate_a/element.js?cb=googleTranslateElementInit\"></script>');
      jQuery('#sidebar').prepend(unescape(gt));
    });
  </script>";
} 
```

该代码将以下内容作为 HTML/JavaScript 输出到页面中：

```
<script>
    jQuery(document).ready(function(){
      gt = escape('<div id="google_translate_element"></div><script type="text/javascript">function googleTranslateElementInit() {new google.translate.TranslateElement({pageLanguage: "en", layout: google.translate.TranslateElement.InlineLayout.SIMPLE}, "google_translate_element");}</script><script type="text/javascript" src="http://translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>');
      jQuery('#sidebar').prepend(unescape(gt));
    });
  </script> 
```

导致错误的原因

```
Uncaught SyntaxError: Unexpected token ILLEGAL 
```

在 gt = escape( ... ); 线。

但是，如果我使用检查器直接从 HTML 源代码复制该代码，然后将其粘贴到控制台并运行它，它就会工作，并且会显示翻译下拉菜单。

为什么会这样？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T19:34:23.647

字符序列`</script>`总是意味着结束当前脚本块。我怀疑这是导致问题的原因。

您不能`</script>`在 JavaScript 字符串中逐字包含。相反，您需要将其分解并重新连接各个部分。

例如这个：

```
"</script>" 
```

应该变成这样：

```
"<" + "/script>" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T19:32:29.543

改为`gt = escape('...')`刚刚`gt = '...'`

# grails - Groovy 中的分组和求和收集

> ID：13296325
> 
> 赞同：2
> 
> 时间：2012-11-08T19:29:42.883
> 
> 标签：grails, groovy

我有一组对象，我想按月份、名称和总和进行分组：

```
def things = [
    [id:1, name:"fred", total:10, date: "2012-01-01"],
    [id:2, name:"fred", total:10, date: "2012-01-03"],
    [id:3, name:"jane", total:10, date: "2012-01-04"],
    [id:4, name:"fred", total:10, date: "2012-02-11"],
    [id:5, name:"jane", total:10, date: "2012-01-01"],
    [id:6, name:"ted", total:10, date: "2012-03-21"],
    [id:7, name:"ted", total:10, date: "2012-02-09"]
]; 
```

我希望输出为：

```
[
 "fred":[[total:20, month:"January"],[total:10, month:"February"]],
 "jane":[[total:20,month:"January"]],
 "ted" :[[total:10, month:"February"],[total:10, month:"March"]]
] 
```

或类似的规定。使用 groovy/grails 完成此任务的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T20:36:58.087

以下几行

```
things.inject([:].withDefault { [:].withDefault { 0 } } ) { 
    map, v -> map[v.name][Date.parse('yyyy-MM-dd', v.date).format('MMMM')] += v.total; map 
} 
```

会给你这个结果：

```
[fred:[January:20, February:10], jane:[January:20], ted:[March:10, February:10]] 
```

（适用于 Groovy >= 1.8.7 和 2.0）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T20:39:28.617

我结束了

```
things.collect { 
  // get the map down to name, total and month
  it.subMap( ['name', 'total' ] ) << [ month: Date.parse( 'yyyy-MM-dd', it.date ).format( 'MMMM' ) ]
  // Then group by name first and month second
}.groupBy( { it.name }, { it.month } ).collectEntries { k, v ->
  // Then for the names, collect
  [ (k):v.collectEntries { k2, v2 ->
    // For each month, the sum of the totals
    [ (k2): v2.total.sum() ]
  } ]
} 
```

得到与安德烈相同的结果，更短，更好的答案;-)

## 编辑

有点短，但仍然没有那么好......

```
things.groupBy( { it.name }, { Date.parse( 'yyyy-MM-dd', it.date ).format( 'MMMM' ) } ).collectEntries { k, v ->
  [ (k):v.collectEntries { k2, v2 ->
    [ (k2): v2.total.sum() ]
  } ]
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-07T23:31:54.493

这是一个与其他解决方案执行相同操作的解决方案，但同时使用 GPars。可能有一个更严格的解决方案，但这个解决方案确实适用于测试输入。

```
@Grab(group='org.codehaus.gpars', module='gpars', version='1.0.0')

import static groovyx.gpars.GParsPool.*

//def things = [...]

withPool {
    def mapInner = { entrylist ->
         withPool{
             entrylist.getParallel()
                 .map{[Date.parse('yyyy-MM-dd', it.date).format('MMMM'), it.total]}
                 .combine(0) {acc, v -> acc + v}
         }
    }

    //for dealing with bug when only 1 list item
    def collectSingle = { entrylist ->
        def first = entrylist[0]
        return [(Date.parse('yyyy-MM-dd', first.date).format('MMMM')) : first.total]
    }

    def result = things.parallel
        .groupBy{it.name}.getParallel()
        .map{ [(it.key) : (it.value?.size())>1?mapInner.call(it.value):collectSingle.call(it.value) ] }
        .reduce([:]) {a, b -> a + b}

    println "result = $result"
} 
```

# asp.net - ASP.NET 刷新文化定义

> ID：13296326
> 
> 赞同：0
> 
> 时间：2012-11-08T19:29:49.140
> 
> 标签：asp.net, .net, globalization

我目前正在开发一个全球化的 ASP.NET 应用程序（需要用英语和法语工作）。

我的问题是，Windows 中的法国文化已被修改（数字和货币小数点分隔符已设置为“。”而不是“，”，这是默认值），我需要它具有默认值。长话短说，这会弄乱`decimal.TryParse()`功能，我不想用代码修补它（问题是设置问题，所以我需要修复设置，而不是代码）。

所以我去了 Windows 控制面板，重置了文化默认值（数字/货币小数点分隔符从“。”回到“，”），并期望更改在我的 Web 应用程序中生效。不，没有工作。

好吧，也许它需要一个好旧`iisreset`的才能生效。做到了，再次测试......不，同样的错误。

好吧好吧，这可能很深，所以为什么不重新启动机器。重新启动，重新测试，然后……不，……小数点分隔符仍然是“.”。

这令人沮丧……让我们看看一个简单的控制台应用程序会做什么。在控制台中，它就像一个魅力。它始终与 Windows 设置相同。

难道 ASP.NET 的文化定义是在安装时定义的，之后就无法更改？`aspnet-regiis -i`只是为了确定并猜猜是什么？没用！

那么，谁能告诉我 ASP.NET 如何管理它的文化定义以及如何让它更新它们？

提前致谢！

## 更新（调试信息）：

从我的计算机上的这个配置开始（只显示小数点分隔符，但我正在更改小数点和货币分隔符）：

![之前的 Windows 配置](../Images/aee3ec0bb2859ebb417669439881c198.png)

我在 ASP.NET 应用程序调试中得到了这个：

![之前的 ASP.NET 调试](../Images/5e303f544be37a62180b12ef6eb7f6f9.png)

这在一个普通的控制台应用程序中：

![之前的控制台调试](../Images/acf8483290f996d145b060d0508e9797.png)

然后我将 Windows 配置更改为：

![之前的 Windows 配置](../Images/ae6a4735493b1e4b6d95537b43bf23ef.png)

这让我在 ASP.NET 调试中得到了这个（之后`iisreset`，重新启动等）：

![ASP.NET 调试后](../Images/5fd3b1e4d576a7805dab077e8bbd22de.png)

以及控制台应用程序中的正确设置：

![之后的控制台调试](../Images/76d84fea3895c70ba29e4a09fa5b8746.png)

## 更新 2（注册表信息）：

我的一位同事指出，本地化信息保存在一些注册表项下：

`HKEY_USERS\.DEFAULT\Control Panel\International`

`HKEY_USERS\S-1-5-20\Control Panel\International`

Wich 让我们认为，如果本地化是用户定义的，并且 IIS 使用 DefaultAppPool 用户运行，那么更改我的用户本地化设置不会有任何效果。

Windows 提供了为系统帐户和新用户刷新本地化设置的可能性：

![Windows 区域设置窗口](../Images/a6f77c17276c122a3da2a8bb0add2954.png) ![Windows 复制设置窗口](../Images/9a8f39575a04e1b4d8efd1a3b6b64e22.png)

检查这两个复选框似乎重置了一切，但 DefaultAppPool 设置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T22:07:15.023

基于注册表信息的第二次更新，我们采取了简单的方法：将默认本地化设置从默认复制到 DefaultAppPool 用户使用的设置。

所以：

1.  出口

    `HKEY_USERS\.DEFAULT\Control Panel\International`

2.  导出（用于备份 -> 重要！！，如果出现问题，您将需要它）

    `HKEY_USERS\S-1-5-82-3006700770-424185619-1745488364-794895919-4004696415\Control Panel\International`

    `S-1-5-82-3006700770-424185619-1745488364-794895919-4004696415`DefaultAppPool 用户使用的密钥在哪里

3.  修改第一个导出的key路径和第二个一样

4.  导入修改后的注册表项

即使这确实解决了问题，**也可能有更好的解决方案**，我仍然很想听听。

# c# - .NET assemblyResolve 事件处理程序是否进行版本验证

> ID：13296327
> 
> 赞同：1
> 
> 时间：2012-11-08T19:29:51.200
> 
> 标签：c#, .net, assemblyresolve

我有一些依赖于一些共享组件的应用程序。我正在将应用程序本地目录之外的这些共享程序集移动到共享目录。我的目标是每次发布新版本的共享程序集时，我只需将新版本放在共享目录中，而不必更改我的应用程序中的任何内容。我认为 assemblyResolve 事件是一个很好的解决方案。关于处理程序的工作方式，我有一个具体问题要问。

假设我附加此处理程序以解决共享目录中缺少的程序集。我只使用程序集名称在目录中查找相应的 dll 并使用 Assembly.LoadFrom(dllpath) 加载它。

我的应用程序引用程序集：名称：A，版本：1.0，公钥：... 程序集升级到版本：2.0 我将新程序集放在共享目录中。

应用程序会正确选择新版本吗？在加载新程序集并从处理程序返回后，C# 是否进行任何匹配？

根据我的测试，它工作正常。.NET 在注册从处理程序返回的程序集时会忽略版本。我只是想确保我没有错并且没有警告

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T20:23:05.220

它在[MSDN 文章](http://msdn.microsoft.com/en-us/library/ff527268.aspx)中明确提到：

> 事件处理程序可以返回与所请求版本不同的程序集版本。

# ruby-on-rails - 找不到用于 rake 任务的 app/utils 类

> ID：13296329
> 
> 赞同：0
> 
> 时间：2012-11-08T19:29:59.963
> 
> 标签：ruby-on-rails, rake

我在 Date 上添加了一个方法，如下所示：

```
class Date
  def days_different(date)
    Float(self-date)
  end
end 
```

这在我的应用程序的其余部分工作得很好，但是我在 lib/tasks/database.rake 中也有一个 rake 任务，它使用这个没有被加载的地方，尽管有 => :environment 对任务的依赖（大大简化了测试版本如下所示）。

```
task :test_days_different => :environment do
  date = 2.days.ago
  puts date.days_different(DateTime.now)
end 
```

奇怪的是， rake:test 在加载其环境时加载了辅助函数，所以我完全不明白为什么它没有加载到 rake db

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T21:17:08.270

你没有提到你把扩展的 Date 类放在哪里，但我认为你必须在 rake 文件中要求'date'。

如果没有 require 语句，此代码段将无法工作：

```
require 'date'
class Date
  def days_different(date)
    Float(self-date)
  end
end

date = Date.new(2001,2,1)
puts date.days_different(DateTime.now) 
```

# android - 从 url 检索 json 数组给出错误 android？

> ID：13296330
> 
> 赞同：-1
> 
> 时间：2012-11-08T19:30:01.207
> 
> 标签：android, json

我想从此 json url 检索数据，但给出了错误。我放了最后一个我有另一个json，这个代码可以完美地工作，但是在这里不起作用，那么问题是什么以及如何解决？

[http://ajax.googleapis.com/ajax/services/search/local?v=1.0&q=restaurant&rsz=8&sll=-27.5595451,-48.6206452&radius=1000&output=json](http://ajax.googleapis.com/ajax/services/search/local?v=1.0&q=restaurant&rsz=8&sll=-27.5595451,-48.6206452&radius=1000&output=json)

> JsonParserSearch.java

```
 public class JsonParserSearch 
 {
static InputStream is = null;
static JSONObject jObj = null;
static String json = "";

// constructor
public JsonParserSearch() {

}

public JSONObject getJSONFromUrl(String url) {

    // Making HTTP request
    try {
        // defaultHttpClient
        DefaultHttpClient httpClient = new DefaultHttpClient();
        HttpPost httpPost = new HttpPost(url);

        HttpResponse httpResponse = httpClient.execute(httpPost);
        HttpEntity httpEntity = httpResponse.getEntity();
        is = httpEntity.getContent();          

    } catch (UnsupportedEncodingException e) {
        e.printStackTrace();
    } catch (ClientProtocolException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }

    try {
        BufferedReader reader = new BufferedReader(new InputStreamReader(
                is, "iso-8859-1"), 8);
        StringBuilder sb = new StringBuilder();
        String line = null;
        while ((line = reader.readLine()) != null) {
            sb.append(line + "\n");
        }
        is.close();
        json = sb.toString();
    } catch (Exception e) {
        Log.e("Buffer Error", "Error converting result " + e.toString());
    }

    // try parse the string to a JSON object
    try {
        jObj = new JSONObject(json);
    } catch (JSONException e) {
        Log.e("JSON Parser finaal", "Error parsing data " + e.toString());
    }

    // return JSON String
    return jObj;

} 
```

}

> SearchListActivity.java

公共类 SearchlistActivity 扩展 Activity {

```
private static String url="http://ajax.googleapis.com/ajax/services/search/local?v=1.0&q=restaurant&rsz=8&sll=-27.5595451,-48.6206452&radius=1000&output=json";
private static final String TAG_RESULTS = "results";
private static final String TAG_RESPONSEDATA="responseData";    

@Override
public void onCreate(Bundle savedInstanceState)

{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    //JSONArray results = null;       
     JSONArray responseData=null;
 // Hashmap for ListView
    ArrayList<HashMap<String, String>> contactList = new ArrayList<HashMap<String, String>>();

    // Creating JSON Parser instance
    JsonParserSearch jParser = new JsonParserSearch();

    // getting JSON string from URL
    JSONObject json = jParser.getJSONFromUrl(url);

    try {
        // Getting Array of Contacts

         responseData = json.getJSONArray(TAG_RESPONSEDATA);
         Log.e("jsonnn data","sfsssss00000-------->"+responseData);

        }
    catch (JSONException e) {
        e.printStackTrace();
    }

} 
```

}

```
11-09 01:18:14.241: E/Buffer Error(275): Error converting result java.lang.NullPointerException
11-09 01:18:14.241: E/JSON Parser finaal(275): Error parsing data org.json.JSONException: End of input at character 0 of 
11-09 01:18:14.251: D/AndroidRuntime(275): Shutting down VM
11-09 01:18:14.251: W/dalvikvm(275): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
11-09 01:18:14.261: E/AndroidRuntime(275): FATAL EXCEPTION: main
11-09 01:18:14.261: E/AndroidRuntime(275): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.ssss/com.example.ssss.SearchlistActivity}: java.lang.NullPointerException
11-09 01:18:14.261: E/AndroidRuntime(275):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
11-09 01:18:14.261: E/AndroidRuntime(275):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
11-09 01:18:14.261: E/AndroidRuntime(275):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
11-09 01:18:14.261: E/AndroidRuntime(275):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
11-09 01:18:14.261: E/AndroidRuntime(275):  at android.os.Handler.dispatchMessage(Handler.java:99)
11-09 01:18:14.261: E/AndroidRuntime(275):  at android.os.Looper.loop(Looper.java:123)
11-09 01:18:14.261: E/AndroidRuntime(275):  at android.app.ActivityThread.main(ActivityThread.java:4627)
org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:348)
11-09 00:45:17.072: W/System.err(302):  at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:555)
11-09 00:45:17.072: W/System.err(302):  at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:487)
11-09 00:45:17.072: W/System.err(302):  at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:465)
11-09 00:45:17.072: W/System.err(302):  at com.example.sss.JsonParserSearch.getJSONFromUrl(JsonParserSearch.java:38)
11-09 00:45:17.072: W/System.err(302):  at com.example.sss.SearchlistActivity.onCreate(SearchlistActivity.java:39)
11-09 00:45:17.072: W/System.err(302):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
11-09 00:45:17.082: W/System.err(302):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
11-09 00:45:17.082: W/System.err(302):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
11-09 00:45:17.082: W/System.err(302):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
11-09 00:45:17.082: W/System.err(302):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
11-09 00:45:17.082: W/System.err(302):  at android.os.Handler.dispatchMessage(Handler.java:99)
11-09 00:45:17.082: W/System.err(302):  at android.os.Looper.loop(Looper.java:123)
11-09 00:45:17.082: W/System.err(302):  at android.app.ActivityThread.main(ActivityThread.java:4627)
11-09 00:45:17.082: W/System.err(302):  at java.lang.reflect.Method.invokeNative(Native Method)
11-09 00:45:17.082: W/System.err(302):  at java.lang.reflect.Method.invoke(Method.java:521)
11-09 00:45:17.092: W/System.err(302):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
11-09 00:45:17.092: W/System.err(302):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
11-09 00:45:17.092: W/System.err(302):  at dalvik.system.NativeStart.main(Native Method)
11-09 00:45:17.092: E/Buffer Error(302): Error converting result java.lang.NullPointerException
11-09 00:45:17.092: E/JSON Parser finaal(302): Error parsing data org.json.JSONException: End of input at character 0 of 
11-09 00:45:17.103: D/AndroidRuntime(302): Shutting down VM
11-09 00:45:17.103: W/dalvikvm(302): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
11-09 00:45:17.112: E/AndroidRuntime(302): FATAL EXCEPTION: main
11-09 00:45:17.112: E/AndroidRuntime(302): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.sss/com.example.sss.SearchlistActivity}: java.lang.NullPointerException
11-09 00:45:17.112: E/AndroidRuntime(302):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
11-09 00:45:17.112: E/AndroidRuntime(302):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
11-09 00:45:17.112: E/AndroidRuntime(302):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
11-09 00:45:17.112: E/AndroidRuntime(302):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
11-09 00:45:17.112: E/AndroidRuntime(302):  at android.os.Handler.dispatchMessage(Handler.java:99)
11-09 00:45:17.112: E/AndroidRuntime(302):  at android.os.Looper.loop(Looper.java:123)
11-09 00:45:17.112: E/AndroidRuntime(302):  at android.app.ActivityThread.main(ActivityThread.java:4627)
11-09 00:45:17.112: E/AndroidRuntime(302):  at java.lang.reflect.Method.invokeNative(Native Method)
11-09 00:45:17.112: E/AndroidRuntime(302):  at java.lang.reflect.Method.invoke(Method.java:521)
11-09 00:45:17.112: E/AndroidRuntime(302):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
11-09 00:45:17.112: E/AndroidRuntime(302):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
11-09 00:45:17.112: E/AndroidRuntime(302):  at dalvik.system.NativeStart.main(Native Method)
11-09 00:45:17.112: E/AndroidRuntime(302): Caused by: java.lang.NullPointerException
11-09 00:45:17.112: E/AndroidRuntime(302):  at com.example.sss.SearchlistActivity.onCreate(SearchlistActivity.java:44)
11-09 00:45:17.112: E/AndroidRuntime(302):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
11-09 00:45:17.112: E/AndroidRuntime(302):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
11-09 00:45:17.112: E/AndroidRuntime(302):  ... 11 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T19:36:05.330

您的手机/模拟器似乎无法解析 ajax.googleapis.com 的主机名。(java.net.UnknownHostException)。我建议您检查您的手机/模拟器与互联网的连接（例如：将提到的 URL 放在手机浏览器窗口中并检查它是否有效）。

# ruby - Ruby 电子表格：错误的文件描述符 - test.xls (Errno::EBADF)

> ID：13296331
> 
> 赞同：1
> 
> 时间：2012-11-08T19:30:22.947
> 
> 标签：ruby, spreadsheet

我对制作简单 .xls 文件并将数据写入一个单元格的脚本有疑问。这是简单的代码：

```
require 'spreadsheet'

class Filter
  def filter
    @excel = Spreadsheet::Workbook.new
    @sheet = @excel.create_worksheet

    @sheet[0, 0] = "test"
        @excel.write 'test.xls'
  end
end

f = Filter.new
f.filter 
```

但它会引发错误：

> C:/Ruby193/lib/ruby/gems/1.9.1/gems/ruby-ole-1.2.11.5/lib/ole/storage/base.rb:62:in `write_nonblock': Bad file descriptor - test.xls (Errno::EBADF) from C:/Ruby193/lib/ruby/gems/1.9.1/gems/ruby-ole-1.2.11.5/lib/ole/storage/base.rb:62:in` initialize'
> 
> ```
>  from C:/Ruby193/lib/ruby/gems/1.9.1/gems/ruby-ole-1.2.11.5/lib/ole/storage/base.rb:78:in 
> ```
> 
> `new' from C:/Ruby193/lib/ruby/gems/1.9.1/gems/ruby-ole-1.2.11.5/lib/ole/storage/base.rb:78:in` 从 C:/Ruby193/lib/ruby/gems/1.9.1/gems/spreadsheet-0.7.4/lib/spreadsheet/excel/writer/workbook.rb:4 打开' 53:in `write_from_scratch' from C:/Ruby193/lib/ruby/gems/1.9.1/gems/spreadsheet-0.7.4/lib/spreadsheet/excel/writer/workbook.rb:6 31:in`write_workbook' 从 C:/Ruby193/ lib/ruby/gems/1.9.1/gems/spreadsheet-0.7.4/lib/spreadsheet/writer.rb:15:in `block in write' from C:/Ruby193/lib/ruby/gems/1.9.1/gems/spreadsheet-0.7.4/lib/spreadsheet/writer.rb:14:in` open' 来自 C:/Ruby193/lib/ruby/gems/1.9.1/gems/spreadsheet -0.7.4/lib/spreadsheet/writer.rb:14:in `write' from C:/Ruby193/lib/ruby/gems/1.9.1/gems/spreadsheet-0.7.4/lib/spreadsheet/workbook.rb:116:in` write'
> 
> ```
>  from filter.rb:10:in `filter'
>     from filter.rb:15:in `<main>' 
> ```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T02:47:08.937

因为 ruby​​-ole 1.2.11.5 不支持 windows 平台，更多细节：[ruby-ole issue](https://github.com/aquasync/ruby-ole/issues/11)

你可以使用 ruby​​-ole 1.2.11.4 来避免这个问题。

```
require 'rubygems'
gem 'ruby-ole','1.2.11.4'
require 'spreadsheet' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T00:48:06.790

我以前见过这些。首先验证您是否可以写入该文件的位置。我的猜测是文件已经在 Excel 中打开，或者您的防病毒软件阻止了“威胁”。

# c# - C# 如何根据 LINQ 查询中的字符串数组声明新的 Dictionary 对象

> ID：13296333
> 
> 赞同：1
> 
> 时间：2012-11-08T19:30:25.083
> 
> 标签：c#, linq

我有一些这样的代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Xml.Linq;

class Program
{
    static void Main(string[] args)
    {
        string xml = @"<Root>
  <Report1>
    <Row>
      <Field1>data1-1</Field1>
      <Field2>data1-2</Field2>
      <!-- many more fields -->
    </Row>
    <Row>
      <Field1>data2-1</Field1>
      <Field2>data2-2</Field2>
      <!-- many more fields -->
    </Row>
  </Report1>
</Root>";

        XDocument doc = XDocument.Parse(xml);

        var report1 = from report in doc.Root.Elements("Report1").Elements("Row")
                      select new Dictionary<string, string>()
                          {
                              {"Field1", report.Elements("Field1").First().Value},
                              {"Field2", report.Elements("Field2").First().Value}
                          };

        var i = 1;
        foreach (Dictionary<string, string> dict in report1)
        {
            Console.WriteLine(String.Format("Row{0}: ", i));
            Console.WriteLine("  Field1: {0}", dict["Field1"]);
            Console.WriteLine("  Field2: {0}", dict["Field2"]);
            i++;
        }

        Console.ReadLine();
    }
} 
```

是否可以定义一个字符串数组或其他一些我可以用来声明这些字典对象的数据结构？这是一些愚蠢的伪代码帮助展示我的想法：

**编辑**下面伪代码中的变量 fieldNames 将是我期望的名称数组，而不是基于 xml 源字段名称。我将忽略 xml 源中未在 fieldNames 数组中明确设置的任何字段名称。

```
var report1 = from report in doc.Root.Elements("Report1").Elements("Row")
              select new Dictionary<string, string>()
           {
              foreach (var fieldName in fieldNames)
              {
                  {fieldName, report.Elements(fieldName).First().Value}
              }
           }; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-08T19:37:49.507

使用`Enumerable.ToDictionary`：

```
var report1 = 
    from report in doc.Root.Elements("Report1").Elements("Row")
    select new[] {"Field1", "Field2", "Field3"}
        .ToDictionary(x => x, x => report.Elements(x).First().Value) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T19:44:33.863

伪代码实际上非常接近您真正可以做的事情。我假设您在那里准备了一个单独的 fieldNames 集合。

```
IEnumerable<string> fieldNames = ...;
XDocument doc = ...;
var report1 = doc.Root.Elements("Report1").Elements("Row")
    .Select(report =>
    {
        var d = new Dictionary<string, string>();
        foreach (var fieldName in fieldNames)
        {
            d.Add(fieldName, report.Elements(fieldName).First().Value);
        }
        return d;
    }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-08T19:39:06.977

不要试图在一个集合初始化器中做所有事情。

对于这样的事情，我会创建一个单独的方法：

```
public static Dictionary<string, string> MapReport(XElement report)
{
    var output = new Dictionary<string, string>();
    foreach(var field in report.Elements())
    {
        output.Add(field.Name, ...);
    }
} 
```

那么查询会简单得多：

```
var report1 = from report in doc.Root.Elements("Report1").Elements("Row")
              select MapReport(report) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-08T19:50:49.790

This will give you a list of type `List<Dictionary<string,string>>`

```
var rows = doc.Descendants("Row")
           .Select(r => r.Elements()
                         .ToDictionary(x => x.Name.LocalName, x => x.Value))
           .ToList(); 
```

..

```
var data = rows[i]["Field1"]; 
```

# batch-file - 批量查找特定路径映射的所有驱动器号

> ID：13296334
> 
> 赞同：0
> 
> 时间：2012-11-08T19:30:26.747
> 
> 标签：batch-file

我们推出了一个脚本来映射一个新的驱动器，但`R: /Delete`没有使用 net use，因此驱动器仍然存在，并且对于数百个用户来说，下一个可用字母的映射不正确。我需要删除所有不正确的映射，并希望有一个批处理脚本可以扫描特定映射，然后通过管道传输驱动器号。

```
Set Path = \\Drive\Folder
Set DriveLetter = ?Scan all mapped drives for %Path%?
Net Use %DriveLetter% /Delete 
```

想在这里填空。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T20:30:44.727

请不要将 PATH 变量用于您自己的目的。它是一个保留变量，将其用于预期用途以外的任何用途都会对批处理会话造成严重破坏。

这是一个使用 WMIC 的解决方案。传递给 WMIC 时，反斜杠必须用另一个反斜杠转义。检查第二个令牌是 FOR /F 如何处理 WMIC 的 unicode 输出的工件。

```
@echo off
setlocal enableDelayedExpansion
set "remotePath=\\Drive\Folder"
for /f "usebackq skip=1 tokens=1,2" %%A in (
  `wmic netuse where "RemotePath='!remotePath:\=\\!'" get localName 2^>nul`
) do if "%%B" neq "" <nul net use %%A /delete >nul 2>&1 || net use %%A /delete 
```

我不确定发生了什么，但第一次尝试删除映射驱动器失败并显示以下消息：*“有打开的文件和/或未完成的目录搜索正在等待与 n: 的连接。”* . 第二次尝试成功。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T20:03:24.920

`net use`将显示驱动器映射（连接或未连接）

示例输出：

```
将记住新的连接。

状态 本地 远程 网络

-------------------------------------------------- -----------------------------------------
断开连接问：\\Server1\Drive
                                                 微软视窗网络
好的 S：\\Server2\Drive2
                                                 微软视窗网络
命令成功完成。
```

查看此输出，第 2 列为我们提供驱动器号，第 3 列为我们提供路径。将其放入`for /f`循环以检查路径，如果匹配，则删除第二部分中的驱动器号

```
for /f "tokens=2,3" %%a in ('net use') do if .%%b==.\\Server\DriveCaseSensitive net use %%a /Delete 
```

这意味着如果驱动器已被多次映射，它还将检测并删除映射

# java - JCombobox 的圆形弹出窗口

> ID：13296337
> 
> 赞同：8
> 
> 时间：2012-11-08T19:30:49.420
> 
> 标签：java, swing, popup, jcombobox, rounded-corners

我使用 nimbus 作为 L&F，但我真的很喜欢像[seaglass](https://code.google.com/p/seaglass/) L&F 这样的圆形组合框下拉菜单。见下图。

雨云

![在此处输入图像描述](../Images/6f6875b51121f40fe61636b2993cd9e9.png)

海玻璃

![在此处输入图像描述](../Images/f262a0ca3032b6a1927f0212539b2ddc.png)

我怎样才能达到这种效果？覆盖油漆在这里有用吗？方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-16T17:09:09.327

Nimbus 可以通过更新 UIManager 属性来定制。[示例](http://docs.oracle.com/javase/tutorial/uiswing/lookandfeel/color.html)：

```
UIManager.put("nimbusBase", new Color(...));
UIManager.put("nimbusBlueGrey", new Color(...));
UIManager.put("control", new Color(...)); 
```

画家也可以更新。例如，自定义滑块：

![在此处输入图像描述](../Images/022a8b750e1a38f69f8ad305e9588ef1.png)

实际做法：

```
sliderDefaults.put("Slider.thumbWidth", 20);
sliderDefaults.put("Slider.thumbHeight", 20);
sliderDefaults.put("Slider:SliderThumb.backgroundPainter", new Painter() {
  public void paint(Graphics2D g, JComponent c, int w, int h) {
     g.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);
     g.setStroke(new BasicStroke(2f));
     g.setColor(Color.RED);
     g.fillOval(1, 1, w-3, h-3);
     g.setColor(Color.WHITE);
     g.drawOval(1, 1, w-3, h-3);
   }
}); 
```

资源：

*   在此处查看完整示例：[使用 nimbus 为滑块蒙皮](http://www.jasperpotts.com/blog/2008/08/skinning-a-slider-with-nimbus/)
*   Nimbus 默认值在此处列出：[Nimbus 默认值](http://docs.oracle.com/javase/tutorial/uiswing/lookandfeel/_nimbusDefaults.html#primary)

# ruby-on-rails - Rails Omniauth - AuthenticationsController#create 中的 NoMethodError

> ID：13296339
> 
> 赞同：0
> 
> 时间：2012-11-08T19:30:54.863
> 
> 标签：ruby-on-rails, ruby, omniauth

我正在关注教程：[http ://railscasts.com/episodes/235-omniauth-part-1?autoplay=true](http://railscasts.com/episodes/235-omniauth-part-1?autoplay=true)

我有自己的登录和注销流程。但是当我尝试验证 twitter 登录时，我有

**AuthenticationsController#create 中的 NoMethodError**

```
undefined method `authentications' for nil:NilClass

app/controllers/authentications_controller.rb:8:in `create' 
```

我的路线是：

```
match '/auth/:provider/callback', to: 'authentications#create' 
```

在我的身份验证控制器中，创建方法是：

```
def create
    auth =  request.env["omniauth.auth"]
    current_user.authentications.create(:provider => auth[:provider], :uid => auth[:uid])
    flash[:notice] = "Success"
    redirect_to authentications_url
  end 
```

我不知道是什么问题：/

如果你能帮助我，那就太好了。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T19:36:34.740

我已经弄清楚了问题所在。由于我没有登录到系统，current_user 为空，因此它给出了一个错误。

+

现在我写了我所有的经验并使用源代码制作了一个教程，它提供了 Facebook 和 Twitter 的多重身份验证： [http ://www.orhancanceylan.com/rails-twitter-and-facebook-authentications-with-omniauth-and -设计/](http://www.orhancanceylan.com/rails-twitter-and-facebook-authentications-with-omniauth-and-devise/)

# javascript - 如何在 Array.prototype 和 Object.prototype 上的 javascript 中定义方法，使其不会出现在 for in 循环中

> ID：13296340
> 
> 赞同：17
> 
> 时间：2012-11-08T19:31:05.077
> 
> 标签：javascript, function

我想在 Array.prototype 和 Object.prototype 上定义辅助方法。我目前的计划是做类似的事情：

```
Array.prototype.find = function(testFun) {
   // code to find element in array
}; 
```

这样我就可以做到这一点：

```
var arr = [1, 2, 3];
var found = arr.find(function(el) { return el > 2; }); 
```

它工作正常，但如果我在循环中循环数组，`for in`方法将显示为值：

```
for (var prop in arr) { console.log(prop); }
// prints out:
// 1
// 2
// 3
// find 
```

这将搞砸其他任何依赖于`for in`显示值的人（尤其是在对象上）。更高版本的 javascript 在数组中内置了 .map 和 .filter 函数，但这些函数不会出现在`for in`循环中。如何创建更多不会出现在`for in`循环中的方法？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-11-08T20:06:08.657

这很简单：不要[在 Arrays 中使用 for-in 循环](https://stackoverflow.com/q/500504/1048572)。责备所有这样做的人 -[这是一个很好的片段](https://stackoverflow.com/q/11507509/1048572)，可以在开发过程中告诉他们。

当然，如果一个人在泛型函数中进行枚举并且不知道他得到的是一个数组、一个普通对象还是一个具有自定义原型的对象，你可以[`hasOwnProperty`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/hasOwnProperty)这样使用：

```
for (var prop in anyObj )
    if (Object.prototype.hasOwnProperty.call(anyObj, prop))
        // do something 
```

注意`Object.prototype`获取函数的显式使用 - 可能有覆盖它的对象（特别是在数据映射中，值甚至可能不是函数），[不支持它](https://stackoverflow.com/q/8157700/1048572)的对象或不从 Object.prototype 继承的对象一点也不。另请参见[此处](https://stackoverflow.com/a/13240607/1048572)。

然而，只有意识到这个问题的脚本作者才会过滤他所有的 for-in-loops - 有些人只是因为[它被推荐](https://stackoverflow.com/q/1107681/1048572)而这样做- 并且大部分情况下都是错误的，他应该使用 for-loop 数组迭代来代替。但我们的问题是那些不知道它的作者。

一个有趣但仅限 Mozilla 的方法是通过 覆盖数组上的枚举行为[`__iterate__`](https://developer.mozilla.org/en-US/docs/JavaScript/New_in_JavaScript/1.7#Iterators)，如此[处所示](https://stackoverflow.com/a/1809873/1048572)。

幸运的是，EcmaScript 5.1 允许我们将属性设置为*不可枚举*。当然，这在旧浏览器中是不支持的，但何必呢？对于所有很酷的高阶数组的东西，我们无论如何都需要使用[es5-shims](https://github.com/kriskowal/es5-shim)[`defineProperty`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/defineProperty) :-)像这样使用：

```
Object.defineProperty(Array.prototype, "find", {
    enumerable: false,
    writable: true,
    value: function(testFun) {
        // code to find element in array
    }
}); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-08T19:54:13.437

根据您的限制：

```
// In EcmaScript 5 specs and browsers that support it you can use the Object.defineProperty
// to make it not enumerable set the enumerable property to false
Object.defineProperty(Array.prototype, 'find', {
    enumerable: false,  // this will make it not iterable
    get: function(testFun) {
       // code to find element in array
    };
}); 
```

在此处阅读有关**Object.defineProperty的更多信息**[https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/defineProperty](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/defineProperty)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T19:38:42.253

这是因为必须检查`hasOwnProperty`：

```
for (var prop in arr) { 
  if (arr.hasOwnProperty(prop)) { 
    console.log(prop) 
  }
} 
```

现在这记录了 1、2、3。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-07-02T14:21:12.633

上面的答案漏掉了一点：

> 可枚举...**默认为 false**。( [mdn](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/defineProperty) )

因此，只需使用`Object.defineProperty(Array.prototype, 'myFunc' myFunc)`而不是就`Array.prototype.myFunc = myFunc`可以解决问题。

# magento - CMS页面上的Magento品牌名称列表

> ID：13296344
> 
> 赞同：1
> 
> 时间：2012-11-08T19:31:13.780
> 
> 标签：magento

这应该很容易实现，但因为我是一个法师菜鸟（（（我似乎无法让它工作。

我基本上有所有品牌的类别，我想做的是在单独的 CMS 页面（品牌）上显示品牌名称和链接（不带图像）。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T21:06:25.113

假设您创建的类别具有作为品牌的子类别，请按品牌类别将 x 替换为您商店的 id。

```
<?php    
    $brands = Mage::getModel('catalog/category')->load(x)->getChildrenCategories();
?>

<?php foreach($brands as $brand): ?>
    <ul>
    <li>
        <a href="<?php echo $brand->getUrl() ?>">
             <?php echo htmlspecialchars($brand->getName()) ?>
        </a>
    </li>
    </ul>
 <?php endforeach ?> 
```

# php - PHP 函数和文件路径

> ID：13296352
> 
> 赞同：0
> 
> 时间：2012-11-08T19:31:36.307
> 
> 标签：php, html, path

我的网站包含多个按目录组织的文件。更具体地说，这是我的结构：

*   索引.php
*   页面/帐户/viewaccount.php
*   页面/帐户/createaccount.php
*   页面/帐户/editaccount.php
*   页面/aboutus/aboutus.php
*   src/php/functions.php

*如果您无法理解这一点或需要更多信息，请添加评论*

在我的functions.php 中，我创建了一个链接来引用我的索引文件。由于我的所有主要 .php 文件都调用了此函数，因此索引文件的路径因调用该函数的页面而异。

例如，如果我的索引文件调用该函数，则路径显然是“index.php”。但是，如果从我的 viewaccount.php 文件中调用该函数，则所需的路径将是“../../index.php”

因此我的问题是：

**如何设置一个通用路径，该路径独立于我调用函数的文件，它将始终正确链接到我的索引文件。**

一旦快速解决方法是将我所有的主要 php 文件作为同级文件放入我的索引，但我想保持所有文件井井有条

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T19:33:39.423

大多数 php 框架的工作方式类似于以下，zend 框架的工作方式是这样的：

声明一个常量 APPLICATION_PATH，然后使所有路径都与此相关。

```
define("APPLICATION_PATH", "/var/www/mysite"); 
```

然后您的所有要求都将与您的 APPLICATION_PATH 相关。

```
require_once APPLICATION_PATH ."/system/helpers/{$helper}.php"; 
```

***使用这种方法，您可以毫无问题地包含来自任何脚本的文件。因为所有路径都将与您的 APPLICATION_PATH 相关。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T19:33:57.740

像这样的东西：

```
require_once($_SERVER['DOCUMENT_ROOT'] . '/src/php/functions.php'); 
```

# javascript - 单页 Web 应用程序应该与服务器保持一个还是多个 Web Socket 连接？

> ID：13296354
> 
> 赞同：7
> 
> 时间：2012-11-08T19:31:42.977
> 
> 标签：javascript, backbone.js, websocket

我正在开发一个将使用 Web 套接字的单页 Backbone 应用程序。该应用程序相当复杂，有 6 个或更多主要区域（屏幕）。

Web 套接字的语法似乎很简单，我现在想知道架构。

使用 Web 套接字时，采用第一种方法还是第二种方法最有效？

**1**：在应用程序的任何屏幕或区域上为所有实时服务器通信打开一个 websocket，然后在客户端过滤这些消息？

或者...

**2**：一次打开多个 websocket，其中每个 web socket 代表应用程序中的某些功能区域

（我看过这个页面，但它是关于服务器端的，我对客户端感兴趣：[WebSocket 服务器的最佳实践是什么？](https://stackoverflow.com/questions/4415862/what-is-the-best-practice-for-websocket-servers)）

更新：服务器正在使用 Jetty（一种与 Tomcat 不同的 Java 技术）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T00:13:06.190

我只会打开一个连接，更易于管理。为了便于调试，您可以使用区域名称命名所有事件。[socket.io 也支持命名空间，请参阅http://socket.io/#how-to-use](http://socket.io/#how-to-use)中的“将自己限制在命名空间”部分。

此外，如果您与 websocket 进行大量通信，您可以使用 Visibility API 将其关闭，例如：[https ://developer.mozilla.org/en-US/docs/DOM/Using_the_Page_Visibility_API](https://developer.mozilla.org/en-US/docs/DOM/Using_the_Page_Visibility_API)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T00:23:01.447

不是对您的问题的直接回答，但是，因为您说您在客户端上使用骨干网，并假设您在服务器上使用节点（如果没有，这可能是这样做的一个令人信服的论据），您可能会感兴趣在[本文](http://blog.andyet.com/2011/feb/15/re-using-backbonejs-models-on-the-server-with-node/)中详细讨论了客户端和（节点）服务器之间共享模型数据以同步状态。如果您不知道，Backbone 可以作为模块安装在 node.js 中。

正如您所描述的，由于您的应用程序相当复杂，因此您可能会受益于在客户端和服务器之间直接共享相同复杂模型的能力。

# svn - nmap 和 svnlib_client 不能一起工作

> ID：13296361
> 
> 赞同：2
> 
> 时间：2012-11-08T19:32:18.223
> 
> 标签：svn, debian, nmap

我在 Debian 6 Squeeze 上安装了 nmap，64 位。当我运行 nmap 时，它说：

> nmap：加载共享库时出错：libsvn_client-1.so.0：无法打开共享对象>文件：没有这样的文件或目录

所以我用谷歌搜索并找到了一个解决方案。

> ln -s /usr/lib/x86_64-linux-gnu/libsvn_client-1.so.1 /usr/lib/libsvn_client-1.so.0

我这样做了。但我仍然遇到同样的问题。它成功创建了链接，但它说 nmap 仍然给我同样的错误。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T03:29:05.280

Nmap 不应该链接到`libsvn_client`，但如果它是在支持“nmap-update”（一种更新 Nmap 脚本引擎 (NSE) 脚本的实验性方法）的情况下构建的，则可以。大多数人不应该构建此功能，因为它需要一个帐户，并且目前没有办法获得一个帐户。

要构建没有 nmap-update 功能的 Nmap，您应该`make clean`，然后`configure`使用`--without-nmap-update`标志运行，如下所示：

```
sh-$ ./configure --without-nmap-update 
```

该`ln`命令没有解决您的问题的原因是它创建了一个指向错误版本的 libsvn_client 的符号链接。二进制文件正在寻找版本 0，而您链接了版本 1。它不会有相同的符号和接口。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T03:57:57.577

问题很容易解决，打开突触并下载所需版本的libsvn（我希望libsvn1）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-17T13:00:29.543

我用了

```
ln -s /usr/lib/i386-linux-gnu/libsvn_client-1.so.0 /usr/lib/i386-linux-gnu/libsvn_client-1.so.0 
```

......它奏效了。这似乎是原来的命令

```
ln -s /usr/lib/x86_64-linux-gnu/libsvn_client-1.so.0 /usr/lib/libsvn_client-1.so.0 
```

...我看到的是缺少第二根中的一部分。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-06-02T05:21:57.153

`sudo dnf install subversion -y`解决了 Fedora 32 中的问题

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-02-05T15:59:50.887

在 SUSE 中安装 subversion 为我解决了这个问题

```
#zypper in subversion 
```

或在 Debian 中：

```
#apt-get install subversion 
```

# informatica-powercenter - 更新动态查找值

> ID：13296368
> 
> 赞同：1
> 
> 时间：2012-11-08T19:32:39.410
> 
> 标签：informatica-powercenter, informatica

如何以以下方式更新动态查找中的值：

假设我在查找中有一个整数列，在下一次查找中我得到一个应该添加到现有值的新整数。

我怎样才能实现它？

例如：

我有空的源表

emp_id | 价值

```
row insert                        emp_id | value
1) 101, 1000  expecting insert      101    1000
2) 101, 1005  expecting update      101    2005    
3) 101, -300  expecting update      101    1705 
```

我希望我的例子很清楚

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T10:59:01.643

查找转换的“属性”选项卡中有一个选项可以为您提供所需的内容。

但是，如果设置这可能会导致映射中的性能下降，并且我通常会尝试避免设置。我通常可以通过在源限定符 SQL 覆盖中包含更多逻辑来避免设置此参数，例如在您的示例中，以确保我只返回每个员工的最新记录。

# python - 从文本文件中提取数据

> ID：13296369
> 
> 赞同：2
> 
> 时间：2012-11-08T19:32:42.297
> 
> 标签：python, python-3.x, text-files, extraction

我有以下输入：

```
ID,       Last,      First,   Lecture, Tutorial, A1,  A2, A3,   A4,  A5
10034567, Smith,     Winston, L01,     T03,      6,   5.5, 8,   10,  8.5
10045678, Lee,       Bruce,   L02,     T05,      4.5, 6.5, 7,   7,   8.5
00305678, Obama,     Jack,    L01,     T05,      10,  10,  9,   9.5, 10
00567890, Brown,     Palin,   L02,     T03,      4,   7.5, 6.5, 0,   5
10012134, Harper,    Ed,      L01,     T03,      10,  9,   7.5, 10,  6.5
10014549, Johnson,   Andrew,  L01,     T05,      10,  0,   10,  5.5, 7
10020987, Clockwork, Milan,   L02,     T03,      10,  8.5, 8,   9,   9
10021234, Freeman,   Skyski   L01,     T02,      0,   10,  10,  10,  8.5
EOF 
```

文件的第一行解释了每一列数据。设 n 为学生总数，则文件的下 n 行每行对应班级中的一名学生，并包含 10 个字段：

1.  学生卡

2.  姓

3.  名

4.  讲座部分

5.  教程部分

6.  作业 1 的成绩*（等等......）*

假设成绩存储在一个文件中，`grades.txt`那么您可以使用以下 Python 语句将文件的整行读入 Python 字符串 s：

```
file = open (‘grades.txt’, ‘r’)
s = file.readline() 
```

您只需打开文件一次，然后您可以`readline()`多次使用该功能，每次读取连续的一行。在学生记录的 n 行之后，文件以最后一行表示`EOF`short for结束`End of File`。

数字 n 不是已知的优先级。样本输入无关紧要，它可以包含 100 到 300 名学生，在一个名为`grades.txt`“我们希望最终为作业 1 的成绩分布绘制直方图”的文件中。因此，您需要通过处理他/她来提取每个学生的 A1 成绩文件中的对应行。构建一个列表，每个学生都有一个条目，存储他/她的 A1 成绩。每次提取新的 A1 成绩时，将其附加到此列表中。

到目前为止，这就是我所做的：

```
file = open('grades.txt','r')
s = file.readline()

for line in file:
    newline = str(line)
    grades = newline.split(",")
    if len(grades)<=4:
        break
    elif len(grades)>5:
        break
    else:
        grades = [float(x) for x in grades]
gradeA1 = grades[5]
print(gradeA1) 
```

但是，我只得到第一级`6`而不是任何连续行的其他 A1 成绩，所有 A1 成绩都应该汇总到一个列表中。

我有这个作为我编辑的代码，但我仍然得到一个错误。

```
file = open('grades.txt','r')
s = file.readline()

for s in file:
    s = file.readline()
    grades = s.split(",")
    if grades=='EOF\n':
        break
A1grades = [float(x) for x in grades[5]]   
print(A1grades) 
```

我得到一个索引超出范围错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T19:38:17.590

对于任何格式良好的数据，csv 模块是一个很好的起点——我建议您阅读相关文档，然后尝试一下。应该让你朝着正确的方向前进。否则，我怀疑您对列表的内容有些混淆 - 最近一行的结果列表或行列表。该代码当前在每一行上重新创建成绩，这可能不是您想要做的......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T20:05:35.993

我认为问题可能是你没有从文件中读取所有行......也许你可以做这样的事情

```
firstLine = file.readline()
#extract from first line, the number of lines that next

for x in range(1,number_of_line)
    line = file.readline()
    #process the information for all next lines 
```

这是一种方法，希望这可以帮助你......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-09T10:07:54.047

我可能弄错了，但是，有了这个输入：

```
ID,       Last,      First,   Lecture, Tutorial, A1,  A2, A3,   A4,  A5
10034567, Smith,     Winston, L01,     T03,      6,   5.5, 8,   10,  8.5
10045678, Lee,       Bruce,   L02,     T05,      4.5, 6.5, 7,   7,   8.5
00305678, Obama,     Jack,    L01,     T05,      10,  10,  9,   9.5, 10 
```

这个（部分）代码：

```
for line in file:
    newline = str(line)
    grades = newline.split(",")
    if len(grades)<=4:
        break
    elif len(grades)>5:
        break 
```

只有当正好有 5 列时，您才会继续循环。我数了 10 列（用逗号分隔）。因此，您在第一行之后立即中断（也不要将成绩转换为浮点数），并且只从第一行获取结果。

您的代码中还有其他几个错误，但您可能需要先修复它。

顺便说一句，我假设这是来自 Python 课程（看到你问题中的措辞），所以我认为你只是在学习基础知识。如果没有，或者您想做得更好，我会选择 KevinL 并使用[CSV 模块](http://docs.python.org/3/library/csv.html)。

**编辑**

从新代码（在编辑的问题中）：

1.  您不必检查`EOF`. 循环遍历文件 ( `for s in file`) 为您完成此操作。

2.  `for s in file`已经读了一行。没必要`s = file.readline()`再来了。

3.  对于每条分割线，找到成绩。将此附加到您在开始时创建（空）的*不同列表中。*此列表包含您的 A1 成绩。

    Grades = [] for s in file: columns = s.split(",") grades.append(columns[5])

但是：我认为您需要退后一步，非常仔细地编写您的代码正在做什么（或我的代码），或者需要做什么（不是在代码中，而是在文字中，一步一步地）。在编程方面（甚至不是 Python 方面），你缺少很多东西。

如果这是家庭作业，也许最好与其他做这件事的人讨论。此外，还有[Python 导师邮件列表](http://mail.python.org/mailman/listinfo/tutor)，可能更适合。

无意冒犯，只是想提供一些实用的建议。

# webgl - 收集 webGL 应用程序帧率直方图数据

> ID：13296371
> 
> 赞同：3
> 
> 时间：2012-11-08T19:32:45.570
> 
> 标签：webgl, three.js, scenejs, copperlicht

我正在考虑坚持一个特定的框架来为我的学术课程工作，但只基于我应该证明的结果。我想为所有三个框架绘制图表，其中顶点数为一个轴，FPS（阈值为 60）在另一个轴上。这是否足以采用 obj、collada、json 等格式的单个预定义模型并将其加载到三个框架中？然后将帧速率和顶点数记录到某个外部文件中，然后使用数据绘制图表，根据性能参数报告三个框架中的最佳框架。但我正在为所有这些框架寻找一些样板代码来加载不同的模型（可用于我图中的顶点维数）并将每秒的帧速率记录到外部文件。这是我一直在思考的方法。但不能 在互联网上找不到太多帮助。我希望有人能帮助我吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-15T10:25:49.240

您可以使用与所有 Three.js 示例捆绑在一起的 stats.js 库获取 FPS 直方图数据

[https://github.com/mrdoob/stats.js](https://github.com/mrdoob/stats.js)

可以使用 HTML5 文件系统 API 将收集的数据导出到文件中。

[http://www.html5rocks.com/en/tutorials/file/filesystem/](http://www.html5rocks.com/en/tutorials/file/filesystem/)

# c - 时间处理期间的警告和运行时错误

> ID：13296374
> 
> 赞同：1
> 
> 时间：2012-11-08T19:32:49.823
> 
> 标签：c, segmentation-fault

以下代码应该可以正常工作（这是stackoveflow中公认的答案），但不知何故我收到了两个警告，因此我收到了分段错误。怎么了？

```
time_t timer;
char buffer[25];
struct tm* tm_info;

time(&timer);
tm_info = localtime(&timer);

strftime(buffer, 25, "%Y:%m:%d%H:%M:%S", tm_info); 
```

bead.c:61: 警告：赋值使指针从没有强制转换的整数 bead.c:63: 警告：内置函数âstrftimeâ 的隐式声明不兼容

```
line 61 is tm_info = localtime(&timer);
and line 63 is strftime(buffer, 25, "%Y:%m:%d%H:%M:%S", tm_info); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T19:51:37.240

所以...编译器认为`localtime`返回一个整数并且`strftime`不存在？

你确定你包括 `<time.h>`？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T19:48:43.017

我已经在“gcc version 4.4.3 (Ubuntu 4.4.3-4ubuntu5)”中对其进行了测试，一切正常！

谢谢！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T19:52:25.477

如果我不包含 time.h，则此代码会出现段错误，如果我这样做，则不会出现段错误。

如果没有 time.h，您的编译器将不知道函数的签名并假定它是一个返回 int 的函数（如果我的记忆很好的话）。

长话短说，包括 time.h

# regex - 正则表达式获取括号和逗号之间的值

> ID：13296381
> 
> 赞同：1
> 
> 时间：2012-11-08T19:33:07.560
> 
> 标签：regex, linux, unix, grep

我有一些这样的字符串：

> 新的 google.maps.LatLng(52.80359, -4.7127),
> 
> 新的 google.maps.LatLng(53.80645306, -5.45455287),
> 
> 新的 google.maps.LatLng(51.8035914546, -4.7123622894287),

我需要同时获得经度和纬度，因此每个数字都有一个正则表达式， - 符号需要尽可能包括在内。

我在网上尝试了一些工具，但似乎都没有一个像样的模式

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T19:38:18.007

只需使用 grep`grep -oE '[-0-9]+\.[0-9]+'`

```
$ echo "new google.maps.LatLng(52.80359, -4.7127)," | grep -oE '[-0-9]+\.[0-9]+'
52.80359 
-4.7127

$ echo "new google.maps.LatLng(53.80645306, -5.45455287)," | grep -oE '[-0-9]+\.[0-9]+'
53.80645306 
-5.45455287

$ echo "new google.maps.LatLng(51.8035914546, -4.7123622894287)," | grep -oE '[-0-9]+\.[0-9]+'
51.8035914546 
-4.7123622894287 
```

`Grep`*是用于将文件（或标准输出）*中的行与特定模式匹配的命令行工具，`-o`它告诉 grep 在匹配的行的一部分上显示（默认情况下，grep 显示与给定模式匹配的整行）。`-E`告诉 grep 使用 grep 使用扩展的正则[表达式](http://www.gnu.org/software/sed/manual/html_node/Extended-regexps.html)。

该`regexp`模式`[-0-9]`匹配减号`-`或`digit`以下`+`表示重复前一项或多次，即*匹配*`abc123xyz`不`123`只是匹配我们必须转义的小数位，`1`因为单个匹配任何字符，然后匹配小数位后的任何数字再次使用。 `\.``\``.``regexp``[0-9]+`

有关更多信息，请参阅[参考资料](http://www.regular-expressions.info/reference.html)`regular expressions`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T19:39:35.323

我会使用这种方法：

```
LatLng\((-*\d+\.*\d+),\s(-*\d+\.*\d+)\) 
```

虽然它比您可能需要的更多匹配，但它将纬度放在捕获组 1 中，将经度放在捕获组 2 中，两者都不包括周围的括号和逗号。

在此处查看实际操作：[http ://regexr.com?32od6](http://regexr.com?32od6)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-08T19:42:38.570

在 C# 中使用[Regex.Match](http://www.dotnetperls.com/regex-match)如下：

```
using System.Text.RegularExpressions;
...
Match match = Regex.Match(input, @"([-]?\d+(?:[.]\d+)?)\D+?([-]?\d+(?:[.]\d+)?)");
if (match.Success)
{
  string Lat = match.Groups[1].Value;
  string Lng = match.Groups[2].Value;
} 
```

# javascript - 需要帮助编写 js 函数来更改调用它的按钮的类

> ID：13296382
> 
> 赞同：0
> 
> 时间：2012-11-08T19:33:10.110
> 
> 标签：javascript, jquery

我对js不是很好，但基本上我有一个按钮

```
<%=button_to_function "✓", checkButton(), :class => "buttonGrey"%> 
```

那就是调用我做的一个js函数。但是，我的函数语法出现错误。

```
function checkButton()
{
if (this.className="buttonGrey") {
    this.removeClass('buttonGrey');
    this.addClass('buttonGreen');
}

if (this.className="buttonGreen") {
   this.removeClass('buttonGreen');
   this.addClass('buttonGrey');
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T19:35:10.420

用于`==`比较`strings`而不是`=`。
您的按钮将始终是`buttonGrey`，因为如果它在第一个`if`语句中更改，它将在第二个语句中再次更改，因为它不在`else`语句中。
您也可以使用`toggleClass`切换类。

```
function checkButton() {
    $(this).toggleClass("buttonGrey buttonGreen");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T19:38:35.293

如果您有一个带有“buttonID”的按钮，那么您可以像这样更改类..

```
$("#buttonID").removeClass("buttonGrey").addClass("buttonGreen"); 
```

或者使用jquery的切换功能

```
$("#buttonID").click(function () {
      $(this).toggleClass("buttonGrey buttonGreen");
    }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-08T20:07:14.630

I don't know much about Ruby/Rails, but the ideal solution would be to separate the HTML markup from the JavaScript. While you can still use the "onClick" event on the HTML element, it is generally a good practice to give the element an ID and/or Name and then allow JavasScript to bind to that element.

Here is a rough markup of using an ID value:

```
<%=button_to_function "✓", :class => "buttonGrey" :id => "myButton"%> 
```

Then in your checkButton() method, update the calls to:

```
function checkButton()
{
if ($("#myButton").className=="buttonGrey") {
    $("#myButton").removeClass('buttonGrey');
    $("#myButton").addClass('buttonGreen');
}

if ($("#myButton").className=="buttonGreen") {
   $("#myButton").removeClass('buttonGreen');
   $("#myButton").addClass('buttonGrey');
}
} 
```

Hope that helps, or at least steers you in the right direction :)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-08T19:41:49.583

上述答案部分正确。为了比较，您应该使用`==`（`===`最好在适当的时候使用）。

但是，在上面的代码中，`this`不会是您所期望的。在您的情况下，它很可能是全局`window`对象。您必须使用函数传递输入的引用，如下所示：

```
<%=button_to_function "✓", checkButton(this), :class => "buttonGrey"%>

function checkButton(in)
{
 if (in.className === "buttonGrey") {
    $(in).removeClass("buttonGrey");
    $(in).addClass("buttonGreen");
 }

 if (in.className === "buttonGreen") {
   $(in).removeClass('buttonGreen');
   $(in).addClass('buttonGrey');
 }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-08T19:48:14.043

嗨，问题是您在 if 语句中使用了赋值运算符

我不确定您尝试做什么：

当我编写这样的事件处理程序时，我会这样写：

```
$('#mybutton').click(function(){
  if ($(this).attr('class') === "buttonGreen") {
     $(this).removeClass('buttonGreen');
     $(this).addClass('buttonGrey');
  }
}); 
```

要从 asp.net 实际获取按钮 ID，请使用以下代码：

```
$('#<%=btnMyButton.ClientID %>').click(function()..... 
```

祝你好运 ; )

# neo4j - 支持 neo4j 中的“最受欢迎”查询

> ID：13296388
> 
> 赞同：0
> 
> 时间：2012-11-08T19:33:37.773
> 
> 标签：neo4j, cypher

如果我想在 neo 4j 中进行“最喜欢”的文章查询，其中“喜欢”是用户和文章之间的关系，最好的方法是：

1.  在文章本身中保留一个 totalLikes 计数属性，并在密码查询中对该属性进行排序？每当有人喜欢一篇文章时，该属性就会更新。

或者

1.  为每篇文章保留一个带有 totalLikes 的索引。每次喜欢文章时，我都必须删除并重新添加索引条目。

我想我在文档中读到查询不能按总关系计数排序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T00:27:25.537

So, you can do:

```
start user=node(*)
match user-[rel:liked]->article
return count(rel) as likeCount, article
order by likeCount desc; 
```

[http://console.neo4j.org/r/5do0qr](http://console.neo4j.org/r/5do0qr)

# php - 在控制器中运行数据库功能..如何转移到模型？

> ID：13296390
> 
> 赞同：0
> 
> 时间：2012-11-08T19:33:40.097
> 
> 标签：php, codeigniter

好的，我的控制器中有一个可以工作的功能。但是，我不应该在控制器中调用数据库（众所周知）。我通常可以轻松地将信息从模型迁移到控制器，但我很难使用这个。我什至不会分享我的模型版本……你怎么把它写给模型？

```
 $this -> db -> select('title, price, number_sites, number_entries, white_label'); 
    $query = $this -> db -> get('pricing', 3); // limit 3 rows

    $row1 = $query->row(0); // 0 grabs first row in table: Package 1        
    $data['row1'] = $row1;

    $row2 = $query->row(1); // 1 grabs second row in table: Package 2        
    $data['row2'] = $row2;

    $row3 = $query->row(2); // 2 grabs third row in table: Package 3        
    $data['row3'] = $row3; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T19:36:54.893

只需将其复制并粘贴到您要调用的函数中的模型中：

```
function dbstuff(){
    $this -> db -> select('title, price, number_sites, number_entries, white_label'); 
    $query = $this -> db -> get('pricing', 3); // limit 3 rows

    $row1 = $query->row(0); // 0 grabs first row in table: Package 1        
    $data['row1'] = $row1;

    $row2 = $query->row(1); // 1 grabs second row in table: Package 2        
    $data['row2'] = $row2;

    $row3 = $query->row(2); // 2 grabs third row in table: Package 3        
    $data['row3'] = $row3;
    return $data;
} 
```

然后在你的控制器中：

```
$this->load->model('MyModel');
$data=$this->MyModel->dbstuff();
$this->load->view('view',$data); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T19:43:22.327

我建议您创建一个模型类，其中包含一个静态方法，用于包装查询以从数据库中选择并返回模型类的实例。

例如：

```
class MyModelClass {

// Your class code here

static function findByPricing($price){

    $output = array();

   //run your query here using your db handler

   foreach($resultingrows as $row){

       $object = new MyModelClass();
       $object->setAttributeOne($row['attribute_one');
       $object->setAttributeTwo($row['attribute_two');
       $object->setAttributeThree($row['attribute_three');

       $output[] = $object;

   }

   return $output;

}

} 
```

然后从您的控制器中执行以下操作：

```
 $objects = MyModelClass::findByPricing(3); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T19:51:58.853

首先查阅文档总是一个好主意。

[模型](http://codeigniter.com/user_guide/general/models.html)用户指南

一旦你有了编写模型类的信息，就创建一个并将这个函数放入其中。

```
public function getPricing(){
  return  $this -> db -> select('title, price, number_sites, number_entries, white_label') -> get('pricing', 3) -> result_array();
} 
```

# c# - MVVM 数据网格绑定

> ID：13296399
> 
> 赞同：8
> 
> 时间：2012-11-08T19:33:57.880
> 
> 标签：c#, wpf, mvvm, binding, datagrid

我正在为我的项目使用 MVVM，并且正在尝试将数据库中的表与 DataGrid 绑定。但是当我运行我的应用程序时，数据网格是空的。

**MainWindow.xaml.cs：**

```
 public MainWindow(){
        InitializeComponent(); 
        DataContext = new LecturerListViewModel()
    } 
```

**MainWindow.xaml：**

```
 <DataGrid AutoGenerateColumns="False" ItemsSource="{Binding Source=Lecturers}" >
            <DataGrid.Columns>
                <DataGridTextColumn Header="Name" Binding="{Binding Name}"/>
                <DataGridTextColumn Header="Surname" Binding="{Binding Surname}"/>
                <DataGridTextColumn Header="Phone" Binding="{Binding Phone_Number}" />
            </DataGrid.Columns>
 </DataGrid> 
```

**LecturerListViewModel.cs：**

```
public class LecturerListViewModel : ViewModelBase<LecturerListViewModel> 
{

    public ObservableCollection<Lecturer> Lecturers;
    private readonly DataAccess _dataAccess = new DataAccess();

    public LecturerListViewModel()
    {
        Lecturers = GetAllLecturers();
    } 
```

并且 ViewModelBase 实现了 INotifyPropertyChanged。

**讲师.cs**

```
public class Lecturer
{
    public Lecturer(){}

    public int Id_Lecturer { get; set; }
    public string Name { get; set; }
    public string Surname { get; set; }
    public string Phone_Number { get; set; } 
```

我做错什么了？我用调试器检查了它，DataContext 包含所有讲师，但数据网格中没有显示。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-08T19:59:38.957

你有一个绑定错误。试试这个：

```
<DataGrid AutoGenerateColumns="False" ItemsSource="{Binding Lecturers}" > 
```

代码隐藏：

```
private ObservableCollection<Lecturer> _lecturers = new ObservableCollection<Lecturer>();
public ObservableCollection<Lecturer> Lecturers
{
   get { return _lecturers; }
   set { _lecturers = value; }
} 
```

[这](http://sdrv.ms/S1onGY)是简单的示例代码 (LecturerSimpleBinding.zip)。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-08T20:23:21.650

开始了

```
 <DataGrid AutoGenerateColumns="False" ItemsSource="{Binding Path=Lecturers}" > 
```

然后

```
private ObservableCollection<Lecturer> lecturers;

public ObservableCollection<Lecturer> Lecturers
{
    get { return lecturers; }
    set
    {
        lecturers = value;
        this.NotifyPropertyChanged("Lecturers");
    }
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-11-09T02:35:19.397

上面的赛义德萨阿德是正确的。我发现您的设置存在两个潜在问题，Sayed 都解决了这两个问题。

1.  问题中发布的示例未实现 INotifyPropertyChanged
2.  绑定到的 CLR 属性必须是 PUBLIC PROPERTY。字段将不起作用，因为数据绑定通过反射工作。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-08T20:18:03.303

`Lecturers`是一个字段，但数据绑定仅适用于属性。尝试声明`Lecturers`如下：

```
public ObservableCollection<Lecturer> Lecturers { get; set; } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-02-27T16:13:45.760

**MainWindow.xaml.cs**：好的

**MainWindow.xaml**：好的

**LecturerListViewModel.cs**：好的——假设该`GetAllLecturers()`方法返回一个`ObservableCollection`of `Lecturer`。

**讲师.cs**：

```
public class Lecturer : INotifyPropertyChanged
{
    //public Lecturer(){} <- not necessary

    private int _id;
    public int Id 
    {
        get { return _id; }
        set
        {
            _id = value;
            OnPropertyChanged("Id");
        }
    }
    // continue doing the above property change to all the properties you want your UI to notice their changes.

    ...

    public event PropertyChangedEventHandler PropertyChanged;
    private void OnPropertyChanged(string propertyName)
    {
        var handler = PropertyChanged;
        if (handler != null)
        {
            handler(this, new PropertyChangedEventArgs(propertyName));
        }
    }
} 
```

检查这个答案： [将 INotifyPropertyChanged 添加到模型？](https://stackoverflow.com/questions/14869928/adding-inotifypropertychanged-to-model/28768910#28768910)

# sql - MSSQL 选择单行并计算所有引用

> ID：13296400
> 
> 赞同：1
> 
> 时间：2012-11-08T19:33:58.893
> 
> 标签：sql, sql-server, sql-server-2008

我正在尝试使用 MSSQL 做一些我认为可能（很容易）的事情，但我不知道如何发出正确的搜索字符串。我有以下情况。

```
Table A
UID  | Value....
1    | a
2    | b
3    | c

Table B
PartTypes_uid_fk   | Value....
1           | a
1           | b
1           | c
1           | d
1           | e
3           | 67
3           | 1354 
```

我试图得到以下结果，查询表 A 的所有结果 {TableA.*} 并在同一行结果显示表 b 引用的数量 {count TableB.tableA_fk} 到目前为止我所拥有的如下。

`SELECT DISTINCT t1.uid, CONVERT(varchar(MAX), t1.Name) AS Name, CONVERT(varchar(MAX), t1.Description) AS Description, Count(t2.Items_uid_fk) OVER (Partition By t2.PartTypes_uid_fk) as Count FROM [Table1] as t1 left outer join Table2 as t2 on t2.PartTypes_uid_fk=t1.uid;`

这适用于表 B 中具有关联记录的所有表 A 记录，但如果表 B 中有 0 个条目，它将不起作用。由于它们是 ntext 格式并且它是不同的，因此需要转换 varchars。

感谢您提前提供的所有帮助。斯蒂芬

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T19:38:44.297

与其遇到`GROUP BY on N/TEXT`列问题并运行得更快，不如预先聚合 B 表并将其与 A 进行 LEFT JOIN。

```
select t1.*, ISNULL(t2.c, 0) AS CountOfB
from table1 t1
left join
(
    select parttypes_uid_fk, count(*) c
    from table2
    group by parttypes_uid_fk
) t2 on t2.PartTypes_uid_fk=t1.uid 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T19:37:44.797

比这更容易：

```
SELECT t1.uid, t1.Name, COUNT(*)
FROM [Table1] t1
LEFT JOIN [Table2] t2 ON t2.PartTypes_uid_fk = t1.uid
GROUP BY t1.uid, t1.Name 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T19:38:14.813

您的查询应该是

```
SELECT t1.uid, 
CONVERT(varchar(MAX), t1.Name) AS Name, 
CONVERT(varchar(MAX), t1.Description) AS Description, 
Count(t2.Items_uid_fk) CountItems 
FROM [Table1] as t1 left outer join Table2 as t2 on t1.uid = t2.PartTypes_uid_fk
GROUP BY uid, t1.name, t1.Description; 
```

# java - 抽象初始化

> ID：13296404
> 
> 赞同：0
> 
> 时间：2012-11-08T19:34:22.720
> 
> 标签：java, abstract-class, javafx-2, abstract, abstraction

我有一些类，只有在传递的参数为真时才想初始化。事实证明，这个方法的每个实现都是相同的，只是用于不同的类。

```
public static NamedScene getScene(boolean init) {
    if (mainMenu == null) {
        mainMenu = new MainMenu();
    }
    if (init) mainMenu.init();
    return mainMenu;
} 
```

我想抽象这个方法，所以我不必通过调用手动访问它，`MainMenu.init(true);` 而是使用`scene.init(true);`场景扩展抽象类的地方。

每个类都有一些默认属性，例如通过抽象方法 getName() 访问的名称。我希望该方法有时会在没有 init() 的情况下返回类实例，有时会使用 init()。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T20:06:28.927

考虑为此使用通用方法。
这不是您想要的确切代码，但您会从中理解：

```
 public static <T> T conditionalInit(Class<T> clazz, boolean okToInit) {
    try {
      return okToInit?clazz.newInstance() : null;
    } catch (Exception e) {
      return null;
    }
 } 
```

用法：

```
Person p = conditionalInit(Person.class, true); //not null
Person p2 = conditionalInit(Person.class, false); //null 
```

评论：
1\. 如果你必须执行“init”方法，我建议你所有的类都实现一个包含“init”方法的 Initializable 接口。
然后方法的签名将是：
public static T conditionalInit(Class clazz, boolean okToInit)

2.我提醒你，静态泛型方法可以存在于非泛型类中。

# scala - 这是带有反斜杠的多行字符串中的 Scala 2.10 字符串插值中的错误吗？

> ID：13296411
> 
> 赞同：8
> 
> 时间：2012-11-08T19:34:40.313
> 
> 标签：scala, scala-2.10, string-interpolation

使用 Scala 2.10.0-RC1，我尝试在 Windows 文件路径中使用字符串插值，例如：

```
val path = s"""c:\foo\bar\$fileName.csv""" 
```

并得到了一个例外

```
java.lang.StringIndexOutOfBoundsException: String index out of range: 11 
```

没有多行字符串文字 ( `"""`) 它工作得很好 val path = s"""c:\foo\bar\$fileName.csv""" val path = s"c:\foo\bar\${fileName}.csv " //> 路径：字符串 = c:\foo\bar\myFile.csv

进一步测试以重现该问题：

```
object wcScala10 {

  util.Properties.versionString   //> res0: String = version 2.10.0-RC1
  val name = "James"              //> name  : String = James
  val test1 = s"Hello $name"      //> test1  : String = Hello James
  val test2 = s"""Hello $name"""  //> test2  : String = Hello James
  val test3 = """Hello \$name"""  //> test3  : String = Hello \$name
  val test4 = s"""Hello \$name""" //> java.lang.StringIndexOutOfBoundsException: 
                                  //>   String index out of range: 7
} 
```

**这个异常是由于错误吗？还是我在进行字符串插值时根本不允许在 $ 符号之前使用反斜杠？**

这是更多的堆栈跟踪：

```
java.lang.StringIndexOutOfBoundsException: String index out of range: 7
    at java.lang.String.charAt(String.java:686)
    at scala.collection.immutable.StringOps$.apply$extension(StringOps.scala :39)
    at scala.StringContext$.treatEscapes(StringContext.scala:202)
    at scala.StringContext$$anonfun$s$1.apply(StringContext.scala:90)
    at scala.StringContext$$anonfun$s$1.apply(StringContext.scala:90)
    at scala.StringContext.standardInterpolator(StringContext.scala:120)
    at scala.StringContext.s(StringContext.scala:90)
    at wcScala10$$anonfun$main$1.apply$mcV$sp(wcScala10.scala:9)
    at org.scalaide.worksheet.runtime.library.WorksheetSupport$$anonfun$$exe
 cute$1.apply$mcV$sp(WorksheetSupport.scala:76)
    at org.scalaide.worksheet.runtime.library.WorksheetSupport$.redirected(W
 orksheetSupport.scala:65)
    at org.scalaide.worksheet.runtime.library.WorksheetSupport$.$execute(Wor
 ksheetSupport.scala:75)
    at wcScala10$.main(wcScal
 Output exceeds cutoff limit. 
```

**更新：**

现在标记为 Scala 2.10.1-RC1 已修复

[https://issues.scala-lang.org/browse/SI-6631](https://issues.scala-lang.org/browse/SI-6631)

顺便说一句，即使在修复之后，进行插值和避免转义的正确方法是使用`raw`：

```
val path = raw"c:\foo\bar\$fileName.csv" 
```

例如

```
val fileName = "myFileName"               //> fileName  : String = myFileName
val path = raw"c:\foo\bar\$fileName.csv"  //> path  : String = c:\foo\bar\myFileName.csv 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-08T20:43:11.427

字符串插值表示法控制字符串是否为原始字符串。三重引号让您能够引用单引号。如果您不想插值，请`raw"Hi $name"`改用。（除了`raw`2.10.0 中的错误；2.10.1 AFAIK 中有一个修复程序。）

也就是说，这不是一种非常友好的方式来处理格式错误的字符串。我将它归类为错误，只是因为它返回了一个越界异常，而不是说无法完成转义代码。

注意：这些中断也：

```
s"Hi \$name"
s"""Hi \""" 
```

# c# - 更新语句在 SSMS 中有效，但在代码中无效

> ID：13296412
> 
> 赞同：0
> 
> 时间：2012-11-08T19:34:43.970
> 
> 标签：c#, sql, sql-server-2008

我已经用头撞墙了 2 天了。此更新语句在 ssms 中运行时有效

```
update dbo.DEMOGRAPHICS 
set ETHNICITY = (select distinct(ethnicity) from dbo.DEMOGRAPHICS where PEOPLE_CODE_ID = 'P000084716' and ACADEMIC_SESSION != '')
, GENDER = (select distinct(GENDER) from dbo.DEMOGRAPHICS where PEOPLE_CODE_ID = 'P000084716' and ACADEMIC_SESSION != '')
, MARITAL_STATUS = (select distinct(MARITAL_STATUS) from dbo.DEMOGRAPHICS where PEOPLE_CODE_ID = 'P000084716' and ACADEMIC_SESSION != '')
, RELIGION = (select distinct(RELIGION) from dbo.DEMOGRAPHICS where PEOPLE_CODE_ID = 'P000084716' and ACADEMIC_SESSION != '')
, VETERAN = (select distinct(VETERAN) from dbo.DEMOGRAPHICS where PEOPLE_CODE_ID =  'P000084716' and ACADEMIC_SESSION != '')
, CITIZENSHIP = (select distinct(CITIZENSHIP) from dbo.DEMOGRAPHICS where PEOPLE_CODE_ID = 'P000084716'and ACADEMIC_SESSION != '')
,RETIRED = (select distinct(RETIRED) from dbo.DEMOGRAPHICS where PEOPLE_CODE_ID = '000084716' and ACADEMIC_SESSION != '')
, LEGAL_RESIDENCE = (select distinct(LEGAL_RESIDENCE) from dbo.DEMOGRAPHICS where   PEOPLE_CODE_ID = 'P000084716' and ACADEMIC_SESSION != '')
where PEOPLE_CODE_ID = 'P000084716'  and ACADEMIC_SESSION = '' 
```

但是在代码中进行更新并没有

```
string updDemoRecords = @"update dbo.DEMOGRAPHICS 
set ETHNICITY = (select distinct(ethnicity) from dbo.DEMOGRAPHICS where PEOPLE_CODE_ID = '{0}' and ACADEMIC_SESSION != '')
, GENDER = (select distinct(GENDER) from dbo.DEMOGRAPHICS where PEOPLE_CODE_ID = '{0}' and ACADEMIC_SESSION != '')
, MARITAL_STATUS = (select distinct(MARITAL_STATUS) from dbo.DEMOGRAPHICS where PEOPLE_CODE_ID = '{0}' and ACADEMIC_SESSION != '')
, RELIGION = (select distinct(RELIGION) from dbo.DEMOGRAPHICS where PEOPLE_CODE_ID = '{0}' and ACADEMIC_SESSION != '')
, VETERAN = (select distinct(VETERAN) from dbo.DEMOGRAPHICS where PEOPLE_CODE_ID = '{0}' and ACADEMIC_SESSION != '')
, CITIZENSHIP = (select distinct(CITIZENSHIP) from dbo.DEMOGRAPHICS where PEOPLE_CODE_ID = '{0}'and ACADEMIC_SESSION != '')
,RETIRED = (select distinct(RETIRED) from dbo.DEMOGRAPHICS where PEOPLE_CODE_ID = '{0}' and ACADEMIC_SESSION != '')
, LEGAL_RESIDENCE = (select distinct(LEGAL_RESIDENCE) from dbo.DEMOGRAPHICS where PEOPLE_CODE_ID = '{0}' and ACADEMIC_SESSION != '')
where PEOPLE_CODE_ID = '{0}'  and ACADEMIC_SESSION = ''";
updDemoRecords = string.Format(updDemoRecords, peopleOrgCodeID);
pcCon = new SqlConnection(pcConnString);
SqlCommand doUpdDemoRecords = new SqlCommand(updDemoRecords, pcCon);
pcCon.Open();
doUpdDemoRecords.ExecuteNonQuery();
pcCon.Close(); 
```

也从存储的过程中尝试过，它也没有更新相关的行。它是 sql server 2008 和 c#.net

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T19:38:45.730

在我看来，问题是您使用的是实际数字 ( `peopleOrgCodeID`) - 这不会有`0`您在 SSMS 版本中使用的前导 es（使用字符串）。

因此，如果`peopleOrgCodeId`是一个带有 value 的整数（或 long），那么`84716`您的`WHERE`子句将最终为：

```
where PEOPLE_CODE_ID = '84716' 
```

并不是：

```
where PEOPLE_CODE_ID = '000084716' 
```

您可以通过使用[复合格式化字符串](http://msdn.microsoft.com/en-us/library/txafckwd.aspx)或传入带有前导零的字符串值来解决该问题。

* * *

我会提到 SQL 注入作为一个可能的问题，但如果`peopleOrgCodeID`确实是一个整数，那么在这种情况下你是安全的。但是，我仍然会使用参数化查询而不是`string.Format`。

# lazarus - lazarus-在 lazarus 中编译数据库驱动程序时出错

> ID：13296413
> 
> 赞同：0
> 
> 时间：2012-11-08T19:34:50.757
> 
> 标签：lazarus, delphi

我正在尝试使用带有 lazarus 的 postgresql 数据库创建一个程序。

我在编译时遇到以下错误：

`registersqldb.pas(72,3) Fatal: Can not find unit mysql55conn used by registersqldb.`

怎么了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T12:30:31.260

该项目可能是使用 FPC 的开发版本创建的。（2.7.1 或 2.6.1），您可能正在尝试使用库存版本（2.6.0）编译它。

解决方案：安装基于 2.6.1 的 lazarus 快照，或更改程序以使用较旧的 mysql 库。

我建议不要使用基于 2.7.1 的快照。太多是坏的atm。

免责声明：我不使用 mysql，所以不知道版本之间的确切兼容性细节，除了它并不总是那么容易。

# css - Sass负变量值？

> ID：13296419
> 
> 赞同：121
> 
> 时间：2012-11-08T19:35:31.337
> 
> 标签：css, sass, compass-sass

我有几个 scss 选择器，我使用相同数量的正面和负面，如：

```
padding: 0 15px 15px;
margin: 0 -15px 20px -15px; 
```

我更喜欢对所有 15px 的数量使用一个变量，但这不起作用：

```
$pad: 15px;
padding: 0 $pad $pad;
margin: 0 -$pad 20px -$pad; 
```

保证金金额转换为正数。我错过了什么吗？

* * *

## 回答 #1

> 赞同：238
> 
> 时间：2012-11-08T19:44:32.930

像这样试试

```
margin: 0 (-$pad) 20px (-$pad); 
```

* * *

## 回答 #2

> 赞同：42
> 
> 时间：2017-12-27T10:41:39.627

根据 sass 指南，一个更理智的解决方案是`interpolate`变量，如下例所示：

```
margin: 0 -#{$pad} 20px -#{$pad}; 
```

一个例子：[https ://www.sassmeister.com/gist/c9c0208ada0eb1fdd63ae47830917293](https://www.sassmeister.com/gist/c9c0208ada0eb1fdd63ae47830917293)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2020-01-08T11:58:14.173

在考虑了前两个答案之后，我添加了我的二分之一，但随后阅读了这个（强调我的）：

> 你应该**特别避免使用像`#{$number}px`**. 这实际上并没有创建一个数字！它创建了一个看起来像数字的不带引号的字符串，但不适用于任何数字运算或函数。尝试使您的数学单元干净，以便`$number`已经拥有 unit `px`，或编写**`$number * 1px`**.
> 
> [资源](https://sass-lang.com/documentation/values/numbers)

因此，我认为正确的方法如下，它保留了 SASS/SCSS 的数学能力：

```
$pad: 15px;
padding: 0 $pad $pad;
margin: 0 $pad*-1 20px $pad*-1; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-06-09T14:49:37.237

创建一个函数

```
@function neg($val) {
  @return $val * -1
}; 
```

然后我像这样使用它

```
$gutter: 30px;

.header {
  margin: $gutter neg($gutter);
} 
```

# android - Android - 对话框不显示，而不是 Source Not Found 错误弹出

> ID：13296422
> 
> 赞同：0
> 
> 时间：2012-11-08T19:35:47.410
> 
> 标签：android, android-asynctask, android-alertdialog

我设法通过**AsyncTask**成功处理了*JSON 对象的**HttpPost*。众所周知，整个编码都在*doInBackground()*方法中，然后是*onPostExecute()*任何需要在 UI 中显示的内容。因此，我想显示一个带有 OK 按钮的对话框，表明该过程已成功完成。

 *****但是我在调​​试/运行时遇到了那个*臭名昭著*的“**未找到源**”运行时错误。这是我所犯错误的 scrshot 的链接： [Dialog.class missing！](http://postimage.org/image/el7hz6gup/)

代码是这样的：

```
 protected void onPostExecute(JSONObject result)
    {
        if (statusCode==HttpStatus.SC_CREATED) 
        {
            AlertDialog.Builder msgBox = new AlertDialog.Builder(getBaseContext());
            msgBox.setTitle("User registration");
            msgBox.setIcon(R.drawable.confirmed_icon);
            msgBox.setMessage("Registration succesfully completed!");
            msgBox.setPositiveButton("OK", new OnClickListener() 
            {                   
                public void onClick(DialogInterface dialog, int which)
                {
                    dialog.dismiss();
                    /*Intent intent = new Intent(getApplicationContext(), ScardsMainActivity.class);
                    startActivity(intent);*/
                }
            });
            msgBox.create();
            msgBox.show();
        }//if statement ends.       
    }//onPostExecute ends. 
```

我知道这是多余的，可能是一个愚蠢的问题，并且在 SO 中被问了好几次，但我是 Android 新手，因此我需要更多帮助和有关遇到错误等问题的信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T20:04:04.420

如果您在从崩溃中调试堆栈跟踪时遇到此问题，则需要附加 Android 源代码才能查看内置类的代码，例如`Dialog.java`. 网上有一些教程显示了正确的步骤，例如[这个](http://johnsenf.blogspot.com/2011/04/android-sources-in-eclipse.html)。

**编辑**：

我提供的链接中对 Android 源代码的引用已经过时，但是您可以通过从Github 上的[platform_frameworks_base存储库克隆来获取相关的 Java 类。](https://github.com/android/platform_frameworks_base.git)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T20:01:53.690

这并不是真正的错误，仅表明调试器找不到 Dialog 类的源。如果您正常运行代码，则不应发生这种情况。*****

# bash - 如何在bash中检查给定文件的父文件夹的权限

> ID：13296428
> 
> 赞同：1
> 
> 时间：2012-11-08T19:36:11.473
> 
> 标签：bash, find, output

我将此命令存储在此变量中：

```
filelist=$(find $dir_name -size $sizeFileTmp -printf '%M %n %u %g %-s %Tb %Td %Tk:%TM %P\n')
echo "$filelist" | sort -rnk5 | awk '{printf "%s %s %s %s %6s %3s %2s %5s %s\n", $1, $2, $3, $4, $5, $6, $7, $8, $9}' 
```

产生这个输出：

```
-rwx------ 1 juanpa juanpa 135838 Nov 04 20:47 sample.dir2/testdir2/subdir2/phones
-rwx------ 1 juanpa juanpa 135838 Nov 04 20:47 sample.dir2/testdir2/phones
-rwx------ 1 juanpa juanpa 135838 Nov 04 20:47 sample.dir1/testdir1/subdir1/phones
-rwx------ 1 juanpa juanpa 135838 Nov 04 20:47 sample.dir1/testdir1/phones
-rwx------ 1 juanpa juanpa 135838 Nov 04 20:47 sample.dir1/.phones
-rwx------ 1 juanpa juanpa  26615 Nov 04 20:47 sample.dir2/vimtutor
-rwx------ 1 juanpa juanpa  26615 Nov 04 20:47 sample.dir2/testdir2/vimtutor
-rwx------ 1 juanpa juanpa  26615 Nov 04 20:47 sample.dir2/testdir2/subdir2/vimtutor
-rwx------ 1 juanpa juanpa  26615 Nov 04 20:47 sample.dir1/vimtutor
-rwx------ 1 juanpa juanpa  26615 Nov 04 20:47 sample.dir1/testdir1/vimtutor
-rwx------ 1 juanpa juanpa  26615 Nov 04 20:47 sample.dir1/testdir1/subdir1/vimtutor
-rwx------ 1 juanpa juanpa  25557 Nov 04 20:47 sample.dir2/testdir2/subdir2/cdlist
-rwx------ 1 juanpa juanpa  25557 Nov 04 20:47 sample.dir2/testdir2/cdlist
-rwx------ 1 juanpa juanpa  25557 Nov 04 20:47 sample.dir2/cdlist
-rwx------ 1 juanpa juanpa  25557 Nov 04 20:47 sample.dir1/testdir1/subdir1/cdlist
-rwx------ 1 juanpa juanpa  25557 Nov 04 20:47 sample.dir1/testdir1/cdlist
-rwx------ 1 juanpa juanpa  25557 Nov 04 20:47 sample.dir1/cdlist
-rwx------ 1 juanpa juanpa  20558 Nov 04 20:47 sample.dir2/testdir2/subdir2/sample.txt
-rwx------ 1 juanpa juanpa  20558 Nov 04 20:47 sample.dir2/testdir2/sample.txt
-rwx------ 1 juanpa juanpa  20558 Nov 04 20:47 sample.dir2/sample.txt
-rwx------ 1 juanpa juanpa  20558 Nov 04 20:47 sample.dir1/testdir1/subdir1/sample.txt
-rwx------ 1 juanpa juanpa  20558 Nov 04 20:47 sample.dir1/testdir1/sample.txt
-rwx------ 1 juanpa juanpa  20558 Nov 04 20:47 sample.dir1/sample.txt 
```

我的问题是我应该如何检查包含这些文件的文件夹是否没有写入和执行权限，然后突出显示这些行？？？？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T22:21:25.677

以下命令可以识别 $dir 下没有读/写权限的目录，但不会将报告限制为可能已被`-size`用于生成列表的谓词排除的文件夹：

```
find $dir -type d ! \( -readable -a -writable \) -printf '%p\n' 
```

以下内容似乎相当复杂，但它前面加上了“！” “突出显示”没有用户可读/可写目录的项目（尽管有人可能会问，如果文件夹的读取权限不存在，如何获得文件列表）。

```
filelist=$(find $dir_name -size $sizeFileTmp -printf '%M %n %u %g %-s %Tb %Td %Tk:%TM %P\n')
if [ -z "${filelist}" ];
then
  echo "No files."
else
  echo "$filelist" | \
  sort -rnk5 | \
  awk \
    '{ DIR = gensub(/[/][^/]*$/, "", "", $9);
       CMD = "stat -c +%A " DIR;
       CMD | getline PERMS;
       if (PERMS !~ /^..rw/)
       {
         printf("!");
       }
       printf("%s %s %s %s %6s %3s %2s %5s %s\n", \
         $1, $2, $3, $4, $5, $6, $7, $8, $9);
    }' -
fi 
```

这不会检查目录的每一级，而只检查叶子文件夹。

感谢 F. Hauri 提出使用`stat`.

# java - Java 电子邮件异常 - 无法连接到 SMTP 主机

> ID：13296435
> 
> 赞同：0
> 
> 时间：2012-11-08T19:36:36.347
> 
> 标签：java, email, exception

这个错误让我发疯。当我的应用程序抛出异常时，我正在尝试向自己发送电子邮件，但我刚刚开始收到此错误。我能够成功 ping 主机，并且在使用 nslookup 时可以获得本地 IP 地址。有任何想法吗？谢谢

```
 try
    {
        java.util.Date d = new Date();
        Properties props = new Properties();

        props.setProperty("mail.transport.protocol", "smtp");
        props.setProperty("mail.host", "My server address");
        props.setProperty("mail.smtp.auth", "true");
        props.setProperty("mail.smtp.port", "25");

        Authenticator authenticator = new SmtpAuthenticator();

        Session mailSession = Session.getDefaultInstance(props, authenticator);
        Transport transport = mailSession.getTransport();

        MimeMessage message = new MimeMessage(mailSession);
        message.setFrom(new InternetAddress("My email"));
        message.setSubject("Voicemail Notification");
        message.setContent("You are receiving this automatic message because there has been a voicemail left in the system on " +d.toString() + " for the division of the company you work for. \n" +
        "Please respond promptly.  Thanks!\n" +
        "Private Ip address?file=" + messageName + ".gsm", "text/plain");
        message.addRecipient(Message.RecipientType.TO, new InternetAddress(emailTo));
        transport.connect();
        transport.sendMessage(message,
                message.getRecipients(Message.RecipientType.TO));
        transport.close();

        System.out.println("Email Sent!");

    }
    catch(Exception ex)
    {
        ex.printStackTrace();
        System.out.println("Unable to send email notification to: " + emailTo);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T20:29:29.080

尝试使用命令行尝试`telnet mailserveraddress 25`这将告诉您邮件服务器是否实际上正在运行并侦听端口 25。如果您在 telnet 中收到相同的错误，则表示您的邮件服务器运行不正常。

# sql - 我是否必须在数据库设计中列出所有可能的 FK？

> ID：13296436
> 
> 赞同：0
> 
> 时间：2012-11-08T19:36:39.840
> 
> 标签：sql, database

情况如下：

我有一个数据库，记录了客户与订单、发票、付款等之间的关系。

我目前的设计是：CUSTOMER 链接到 ORDER，ORDER 链接到 INVOICE，INVOICE 链接到 PAYMENT。

我的问题是，我实际上想知道哪个客户正在处理订单、发票和付款。那么我是否必须将 CUSTOMER_ID 放在我想将 CUSTOMER 显示为 FK 的每个表中？会吗

或者我可以通过查询来呈现它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T19:45:01.597

不，你没有。如果您的目标是遵循正确的数据库设计并避免冗余数据存储，您应该只编写具有多个连接的查询。

例如：

```
SELECT c.CUSTOMER_ID, ..., p.PAYMENT_ID, ...
FROM CUSTOMER c,ORDER o,INVOICE i,PAYMENT p
WHERE c.CUSTOMER_ID = o.CUSTOMER_ID
and o.ORDER_ID = i.ORDER_ID
and i.INVOICE_ID = p.INVOICE_ID 
```

# datetime - 如何使用 Org-mode 格式化 html-export 中的日期？

> ID：13296438
> 
> 赞同：0
> 
> 时间：2012-11-08T19:36:46.300
> 
> 标签：datetime, org-mode

我最近将 org-mode 从 7.8 升级到 7.9，html postamble 中“%d”的输出从半合理的“2012-09-11 11:35:11 PDT”更改为 ISO8601 格式“2012-11- 08T10:34-0800”。是否可以自定义它以仅显示日期而不显示时间？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T18:10:15.287

我找到了答案。可以自定义变量

```
org-export-html-date-format-string 
```

获得任何所需的格式。

# directx - 尝试使用 TriangleStrip Topologu 创建三角形时的奇怪行为

> ID：13296440
> 
> 赞同：1
> 
> 时间：2012-11-08T19:36:50.820
> 
> 标签：directx, directx-11, directx-10

我尝试在 Input Assembler 设置为三角形带的情况下创建这个 2D 三角形：

```
1.(0.0f, 0.0f, 0.5f)
2.(-0.5f, 0.0f, 0.5f)
3.(-0.5f, -0.5f, 0.5f) 
```

但是，没有绘制三角形，实际上在渲染目标上没有绘制任何内容，甚至没有绘制一条线。我搞砸了，然后我交换了坐标`2`和`3`，它起作用了。三角形是按照我的意图绘制的。这种奇怪行为的原因是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-09T01:31:13.793

您按逆时针顺序定义顶点，Direct3D 默认情况下会剔除按逆时针顺序定义的面，因此您的三角形在背面剔除期间被剔除，因此您没有渲染任何内容。

在 DirectX 中绘制三角形时应该考虑两件事。

1.  您定义顶点的顺序。
2.  当前使用的剔除模式。

您定义顶点的顺序决定了正面和背面。正面是按顺时针顺序定义顶点的正面，请尝试按顺时针顺序定义顶点。

![在此处输入图像描述](../Images/995c03de4cbc7f370c3a7ee9e61c48e6.png)

[正面和顶点法线](http://msdn.microsoft.com/en-us/library/windows/desktop/bb173380%28v=vs.85%29.aspx)

剔除模式指定如何剔除背面三角形，尝试使用 D3D11_CULL_NONE 来测试您的代码，这将确保每个三角形都将被渲染，而不管顶点的定义顺序如何。

[剔除状态](http://msdn.microsoft.com/en-us/library/windows/desktop/bb204882%28v=vs.85%29.aspx)

[DirectX11 的剔除模式](http://msdn.microsoft.com/en-us/library/windows/desktop/ff476108%28v=vs.85%29.aspx)

绘制三角形条带时应该小心，因为背面剔除标志会在偶数三角形上自动翻转。考虑下图。对于第一个三角形v1v2v3，剔除模式是逆时针的，它将被渲染，对于第二个三角形v2v3v4，剔除模式翻转为顺时针，它也会被渲染。对于第三个三角形，剔除模式再次变回，依此类推。如果要渲染这样的三角形带，则应按以下顺序定义顶点：v1、v2、v3、v4、... vn。

![三角带](../Images/1f8c32652fe738bb93285093ebaa364e.png)

[三角带](http://msdn.microsoft.com/en-us/library/windows/desktop/bb206274%28v=vs.85%29.aspx)

# iphone - iOS 从 Web 服务器加载数据 - 最佳实践？

> ID：13296443
> 
> 赞同：1
> 
> 时间：2012-11-08T19:36:53.127
> 
> 标签：iphone, xcode, ios6

我一直在开发我的第一个 iOS 应用程序，我终于有了我想要的东西。这个应用程序读取一个 XML 文件，解析该数据并显示需要列出的内容 - 实际上是一个配置文件列表。我想知道的是让应用程序检查 Web 服务（我将在 PHP 中对此进行编码）并检索此 XML 文件。

所以我的问题是：处理这个问题的最佳实践是什么？我应该将数据保存在 XML 文件中还是使用其他东西（我认为是 JSON）？更有经验的开发人员会采用哪些标准方法？

我设想有一个网站，用户可以在其中输入他们的信息，然后将他们的个人资料信息存储在数据库中。然后，Web 服务只需提取此数据并将其提供给手机。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T20:28:19.120

无论是 json 还是 xml，永远不要在主线程上检索数据。它会使您的应用程序的 UI 无响应。

她是两个教程，可以帮助你很多。

1.  [JSON](http://www.raywenderlich.com/5492/working-with-json-in-ios-5)
2.  [XML](http://wiki.cs.unh.edu/wiki/index.php/Parsing_XML_data_with_NSXMLParser)

# php - 在 FireBug 中显示 PHP 标头

> ID：13296447
> 
> 赞同：0
> 
> 时间：2012-11-08T19:37:17.093
> 
> 标签：php, apache, http-headers, wamp

我在 WAMP 上运行 index.php，我想做的就是返回 200 Ok 标头。我有：

```
echo "Index3<br />";
//All I need to do is execute a method.
$request_method = strtolower($_SERVER['REQUEST_METHOD']);
echo "Serving " .$request_method;
//And send back a response header.
header('HTTP/1.1 200 Ok');
foreach (getallheaders() as $name => $value) {
    echo "$name: $value\n<br />";
} 
```

我在 Firebug 中什么也看不到（在控制台和网络选项卡中）。在 foreach 中，我看到所有关于 Accept、Connect、Cache 等的标题，但没有 200？当我在上面的代码中更改为 400 响应时，我只会在控制台中得到一些东西，为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T19:39:15.883

标头必须是发送到浏览器的第一件事。你`echo`在你的`header`. 你不可以做这个。

此外，`HTTP/1.1 200 OK`不被视为“标题”，如`Accept`, `Cache`are。它通常在某些`statusCode`属性下可用。Firebug 应该在“网络”选项卡中显示它。它将列在每个请求旁边。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T19:42:07.890

您的电话`header()`需要在任何`echo`陈述之前进行。一旦开始回显内容，修改 HTTP 标头就为时已晚。

这是因为标头在 HTTP 正文之前。如果您无法控制`echo`before 标头调用的使用，您可以使用输出缓冲区--- [ob_start()](http://www.php.net/manual/en/function.ob-start.php)和[ob_end_flush()](http://www.php.net/manual/en/function.ob-end-flush.php) --- 以防止它们干扰标头。

# design-patterns - 规范数据模型的缺点是什么？

> ID：13296452
> 
> 赞同：6
> 
> 时间：2012-11-08T19:37:48.760
> 
> 标签：design-patterns, data-modeling

我可以找到很多支持使用[Canonical Model](http://en.wikipedia.org/wiki/Canonical_Model)的信息，但我想了解它的一些缺点或弱点，并可能获得有关创建此类模型的各种方法的一些知识。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T19:41:29.320

### 缺点

1.  有时可能需要更多的定制工作，而不是从头开始构建模型
2.  可能会与您自己经验丰富的数据建模师产生意见分歧和潜在障碍
3.  可能会降低商业智能和分析的竞争优势（因为竞争对手可能使用相同的模型）
4.  与需要小型、快速、切实可交付成果的“敏捷”BI 原则背道而驰
5.  与自上而下的绩效管理设计和建模最佳实践背道而驰，其中一个不是从逻辑数据模型开始，而是：
    *   定义部门、业务线战略
    *   链接实现这些战略所需的目标和目标
    *   定义衡量目标和目标进度所需的指标
    *   定义需要根据指标做出的战略、战术和运营决策
    *   然后，然后才定义支持指标和决策所需的逻辑模型

**创建模型的实用方法：**

1.  从创建参考表开始（标准域定义 valuta、国家、婚姻状况、城市等）
2.  如果有超过 2 个消费者，则标准化常见概念（客户、地址）
3.  如果可用，请使用或参考公共标准（ISO，本体，例如都柏林核心）明确分配模型的所有权。

# c++ - (Im) 使用可变参数模板完美转发

> ID：13296461
> 
> 赞同：14
> 
> 时间：2012-11-08T19:38:30.290
> 
> 标签：c++, c++11, variadic-templates, sfinae, variadic-functions

# 概要

给定具有将参数转发给实现类的可变参数模板构造函数的类型，是否可以限制使用 SFINAE 转发的类型？

# 细节

首先，考虑构造函数采用通用引用的非可变情况。在这里，可以通过 SFINAE 禁用非常量左值引用的转发，以改用复制构造函数。

```
struct foo
{
  foo() = default;

  foo(foo const&) 
  {
      std::cout << "copy" << std::endl;
  }

  template <
    typename T,
    typename Dummy = typename std::enable_if<
      !std::is_same<
          T,
          typename std::add_lvalue_reference<foo>::type
      >::value
    >::type
  >
  foo(T&& x)
    : impl(std::forward<T>(x))
  {
      std::cout << "uref" << std::endl;
  }

  foo_impl impl;
}; 
```

`foo`通用引用的这种限制很有用，因为否则实现类将接收到它不知道的类型的非 const 左值引用。[LWS 的](http://liveworkspace.org/code/32662d3222396202a9bdb6e9703bc8d1)完整示例。

# 问题

但是这如何与可变参数模板一起工作？有可能吗？如果是这样，怎么做？天真的扩展不起作用：

```
template <
  typename... Args,
  typename Dummy = typename std::enable_if<
    !std::is_same<
        Args...,
        typename std::add_lvalue_reference<foo>::type
    >::value
  >::type
>
foo(Args&&... args)
  : impl(std::forward<Args>(args)...)
{
    std::cout << "uref" << std::endl;
} 
```

（也在[LWS](http://liveworkspace.org/code/98da783837eb749ff561b45792a9f3fe)。）

*编辑：*我发现 R. Martinho Fernandez 在 2012 年写了一篇关于这个问题的变体的博客：http: [//flamingdangerzone.com/cxx11/2012/06/05/is_related.html](http://flamingdangerzone.com/cxx11/2012/06/05/is_related.html)

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-11T04:12:16.870

以下是编写适当约束的构造函数模板的不同方法，按照复杂性的递增顺序以及相应的特征丰富性递增顺序和陷阱数量递减顺序。

[将使用这种特殊形式的 EnableIf](https://rmf.io/cxx11/almost-static-if/)，但这是一个实现细节，不会改变此处概述的技术的本质。还假设存在`And`和`Not`别名来组合不同的元计算。eg`And<std::is_integral<T>, Not<is_const<T>>>`比 更方便`std::integral_constant<bool, std::is_integral<T>::value && !is_const<T>::value>`。

我不推荐任何特定的策略，因为对于构造函数模板而言，*任何*约束都比没有约束要好得多。如果可能，请避免前两种具有非常明显缺点的技术——其余的都是对同一主题的阐述。

## 约束自己

```
template<typename T>
using Unqualified = typename std::remove_cv<
    typename std::remove_reference<T>::type
>::type;

struct foo {
    template<
        typename... Args
        , EnableIf<
            Not<std::is_same<foo, Unqualified<Args>>...>
        >...
    >
    foo(Args&&... args);
}; 
```

**好处：**避免构造函数在以下场景中参与重载决议：

```
foo f;
foo g = f; // typical copy constructor taking foo const& is not preferred! 
```

**缺点**：参与*所有*其他类型的重载解决方案

## 构造表达式的约束

由于构造函数具有构造`foo_impl`from的道德效果`Args`，因此表达对这些确切术语的约束似乎很自然：

```
 template<
        typename... Args
        , EnableIf<
            std::is_constructible<foo_impl, Args...>
        >...
    >
    foo(Args&&... args); 
```

**好处：**这现在正式成为一个受约束的模板，因为它仅在满足某些语义条件时才参与重载决议。

**缺点：**以下是否有效？

```
// function declaration
void fun(foo f);
fun(42); 
```

例如，如果`foo_impl`是`std::vector<double>`，那么是的，代码是有效的。因为`std::vector<double> v(42);`是*构造*此类向量的有效方法，所以从*转换*`int`为是有效的`foo`。换句话说，`std::is_convertible<T, foo>::value == std::is_constructible<foo_impl, T>::value`抛开其他构造函数的问题为`foo`（注意参数的交换顺序——这是不幸的）。

### 明确地约束构造表达式

很自然地，以下内容立即浮现在脑海中：

```
 template<
        typename... Args
        , EnableIf<
            std::is_constructible<foo_impl, Args...>
        >...
    >
    explicit foo(Args&&... args); 
```

标记构造函数的第二次尝试`explicit`。

**好处：**避免了上述缺点！而且它也不需要太多——只要你不忘记这一点`explicit`。

**缺点：**如果`foo_impl`是`std::string`，那么以下可能不方便：

```
void fun(foo f);
// No:
// fun("hello");
fun(foo { "hello" }); 
```

例如，这取决于是否`foo`意味着对`foo_impl`. 这是我认为更烦人的缺点，假设`foo_impl`是`std::pair<int, double*>`.

```
foo make_foo()
{
    // No:
    // return { 42, nullptr };
    return foo { 42, nullptr };
} 
```

我觉得`explicit`实际上并没有把我从这里拯救出来：大括号中有两个参数，所以它显然不是转换，并且类型`foo`已经出现在签名中，所以当我觉得它是多余的。`std::tuple`遭受这个问题的困扰（尽管工厂喜欢`std::make_tuple`确实减轻了这种痛苦）。

## 分别约束转换与施工

让我们分别表达*构造*和*转换*约束：

```
// New trait that describes e.g.
// []() -> T { return { std::declval<Args>()... }; }
template<typename T, typename... Args>
struct is_perfectly_convertible_from: std::is_constructible<T, Args...> {};

template<typename T, typename U>
struct is_perfectly_convertible_from: std::is_convertible<U, T> {};

// New constructible trait that will take care that as a constraint it
// doesn't overlap with the trait above for the purposes of SFINAE
template<typename T, typename U>
struct is_perfectly_constructible
: And<
    std::is_constructible<T, U>
    , Not<std::is_convertible<U, T>>
> {}; 
```

用法：

```
struct foo {
    // General constructor
    template<
        typename... Args
        , EnableIf< is_perfectly_convertible_from<foo_impl, Args...> >...
    >
    foo(Args&&... args);

    // Special unary, non-convertible case
    template<
        typename Arg
        , EnableIf< is_perfectly_constructible<foo_impl, Arg> >...
    >
    explicit foo(Arg&& arg);
}; 
```

**效益：**现在的建设和改造`foo_impl`是建设和改造的充分必要条件`foo`。也就是说，`std::is_convertible<T, foo>::value == std::is_convertible<T, foo_impl>::value`两者`std::is_constructible<foo, Ts...>::value == std::is_constructible<foo_impl, T>::value`都（几乎）成立。

**退税？** 如果is eg`foo f { 0, 1, 2, 3, 4 };`则不起作用，因为约束是根据 style 的构造。可以添加一个受约束的进一步超载承受（作为练习留给读者），甚至是超载承受（约束也作为练习留给读者——但请记住，从多个“转换”论证不是构造！）。请注意，我们不需要修改以避免重叠。`foo_impl``std::vector<int>``std::vector<int> v(0, 1, 2, 3, 4);``std::initializer_list<T>``std::is_convertible<std::initializer_list<T>, foo_impl>``std::initializer_list<T>, Ts&&...``is_perfectly_convertible_from`

我们当中更谄媚的人也会确保将*狭隘*的皈依与其他类型的皈依区分开来。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-08T20:22:23.000

您可以放入`Args`更复杂的表达式并将其扩展为`expression(Args)...`. 所以

```
!std::is_same<Args, typename std::add_lvalue_reference<foo>::type>::value... 
```

将为您`is_same`提供每个参数的逗号分隔列表。您可以将其用作模板参数，并相应地组合这些值，从而为您提供如下内容。

```
template<bool... Args> struct and_;

template<bool A, bool... Args>
struct and_<A, Args...>{
  static constexpr bool value = A && and_<Args...>::value;
};
template<bool A>
struct and_<A>{
  static constexpr bool value = A;
};

//...
template <typename... Args,
          typename Dummy = typename std::enable_if<
              and_<!std::is_same<Args, 
                                 typename std::add_lvalue_reference<foo>::type
                                >::value...>::value
              >::type
         >
foo(Args&&... args) : impl(std::forward<Args>(args)...)
{
  std::cout << "uref" << std::endl;
} 
```

我不完全确定你想如何限制论点。因此我不确定这是否会做你想要的，但你应该能够使用这个原则。

# java - 窗口调整大小后重新调整组件大小

> ID：13296463
> 
> 赞同：0
> 
> 时间：2012-11-08T19:38:37.163
> 
> 标签：java, applet, resize, gridbaglayout, doublebuffered

我正在编写一个 Applet 游戏，我希望 Applet 重新调整大小以填充浏览器窗口。我知道这可以用 HTML 来做，现在我只是假设我有一个小程序，它偶尔会强制改变大小。

使用 GridBagLayout，我在重新调整大小时遇到​​了很多闪烁的问题（它似乎在重绘期间清除了每个 JPanel - 我已经尝试覆盖每个 JPanel 的 update() 方法）。我决定将游戏的大小调整推迟到窗口大小调整完成之后——既是为了避免闪烁，也不必在我的游戏代码中处理许多快速和小规模的调整。

我有这方面的工作代码，我将在下面附上（虽然稍微简化了）。但是，这仅在窗口在两个方向上拉伸得更大时才有效。如果宽度或高度中的任何一个暂时缩小，游戏就会立即折叠成左上角的一个小方块。

我该如何解决这个问题，让游戏继续正常运行，但在调整大小时让图像暂时被覆盖？

为了解释我的代码，我有一个 JPanel，其中包含我的整个游戏布局，位于顶部 GridBagLayout 的 0,0 位置，没有任何重量。我在位置 1,1 有一个空标签（称为 emptySpace），每个方向的权重为 1.0：

![布局](../Images/14d3380b83b7c5c21f8d713a3c6dbe37.png)

我使用以下代码使游戏窗口占据了整个空间，除了在重新调整大小期间：

```
public class Isometric extends Applet {

//last measured width/height of the applet
public int APPWIDTH;
public int APPHEIGHT;

boolean resizing = false;
int resizeNum = 0;

//Game extends JPanel
Game game;
JPanel window;
JLabel emptySpace;

//one-time startup
public void init(){
    APPWIDTH = this.getWidth();
    APPHEIGHT = this.getHeight();

    addComponents();

    //calls checkSize() every 200ms
    Timer timer = new Timer();
    timer.schedule(new TimerTask(){
          public void run(){
              checkSize();
          }
    },200, 200);
}

private void checkSize(){
    //if the dimensions have changed since last measured
    if(APPWIDTH != this.getWidth() || APPHEIGHT != this.getHeight()){
        APPWIDTH = this.getWidth();
        APPHEIGHT = this.getHeight();
        resizing = true;
    }
    else if(resizeNum > 2){ //didn't resize in last 400ms
        resizing = false;
        resizeNum = 0;
        resize();
    }
    if(resizing){
        resizeNum++;
    }
}

private void resize(){
    APPWIDTH = this.getWidth();
    APPHEIGHT = this.getHeight();

    //set new preferred size of game container
    window.setPreferredSize(new Dimension(APPWIDTH, APPHEIGHT));

    GridBagConstraints c = new GridBagConstraints();
    c.gridx = 1;
    c.gridy = 1;
    c.gridwidth = 1;
    c.gridheight = 1;
    c.weightx = 1.0;
    c.weighty = 1.0;
    this.remove(emptySpace); //remove empty space to allow container to stretch to preferred size
    this.add(emptySpace, c); //add empty space again now with zero width/height

    validate(); //recalculates everything so changes occur properly
}

private void addComponents(){
    setLayout(new GridBagLayout());
    GridBagConstraints c = new GridBagConstraints();

    window = new JPanel();
    window.setLayout(new GridBagLayout());

    window.setPreferredSize(new Dimension(APPWIDTH, APPHEIGHT));

    c.anchor = GridBagConstraints.NORTHWEST;
    c.fill = GridBagConstraints.BOTH;

    c.gridx = 0;
    c.gridy = 0;
    c.gridwidth = 1;
    c.gridheight = 1;
    c.weightx = 0.0;
    c.weighty = 0.0;
    this.add(window,c);

    emptySpace = new JLabel();
    c.gridx = 1;
    c.gridy = 1;
    c.gridwidth = 1;
    c.gridheight = 1;
    c.weightx = 1.0;
    c.weighty = 1.0;
    this.add(emptySpace, c);
}

//app close
public void destroy(){
    System.exit(0);
}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T20:39:08.420

作为一般规则，最好*不要*将旧的重量级 AWT 与较新的轻量级 Swing 组件混合使用。AWT 组件请求本机系统执行其绘制，并且经常“绘制”应用程序中可能使用的任何 Swing 组件。

Swing 具有增强的绘画模型，可减少闪烁。

在这里，您可以使用`JApplet`而不是旧的`java.awt.Applet`. Swing`JApplet`将在调整大小期间为您提供更平滑的重绘。

*另一方面：*不要`System.exit()`从小程序调用。这可能*会*导致整个浏览器被关闭（！）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-05T19:19:45.873

使用组布局。这里链接[http://docs.oracle.com/javase/tutorial/uiswing/layout/groupExample.html](http://docs.oracle.com/javase/tutorial/uiswing/layout/groupExample.html)

尝试水平调整对话框大小以查看布局如何自动调整为新大小。

# android - 在 Android 中，在 xml 中创建的 ui 或使用 java 代码创建的 ui 的性能方面更快的 ui

> ID：13296469
> 
> 赞同：0
> 
> 时间：2012-11-08T19:38:48.057
> 
> 标签：android, android-ui

任何人都可以让我知道哪种方法是为 android 应用程序创建 UI、在 XML 中创建 UI 或在 Java 代码中创建 UI 的好方法，并且这些技术中的任何一种都会影响应用程序的性能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T19:44:37.023

理论上，本机代码会更快。我不确定它在现实生活中的速度有多快，因为如果您在本地创建布局，则必须调用一堆方法来设置视图，而 XML 使用 AttributeSet 来设置属性。

就个人而言，我认为性能优势（如果有的话）不会超过使用 XML 布局的可读性。例如，您可以`onClick`在 XML 中定义一个使用属性调用的方法，但在代码中，您必须定义一个`OnClickListener`对象，通常是一个匿名内部类。XML onClick 使在代码中查找内容变得更加容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T19:46:46.703

虽然我从未测试过，但我猜想在 Java 代码中创建相同的 UI 会比在 XML 上创建它快一点。但是这样做的性能优势可能可以忽略不计，使用 XML 布局将使您的 UI 完成得更快，代码更简洁，更易于维护和更灵活。

正如您所见，使用 XML 的好处远大于坏处。所以，我想说最好的做法是使用 XML。

# android - 无法连接到添加视图中的按钮

> ID：13296471
> 
> 赞同：0
> 
> 时间：2012-11-08T19:38:59.387
> 
> 标签：android, android-layout, android-widget

在这个类中，我将布局作为新页面放入浏览器中。这很好，但现在我想在布局中的按钮上放置一个监听器，但我找不到它。

```
public class questionListView extends LinearLayout {

public questionListView(Context context, AttributeSet attrs) {
    super(context, attrs);
    init();
}

public questionListView(Context context) {
    super(context);

     init();
}

private void init() {

    LayoutInflater factory = LayoutInflater.from(getContext());
    View myView = factory.inflate(R.layout.view1,null);

    LayoutParams params=new LinearLayout.LayoutParams(LinearLayout.LayoutParams.MATCH_PARENT, LinearLayout.LayoutParams.MATCH_PARENT);
    myView.setLayoutParams(params);

    addView(myView);

    Button btAddPhoto = (Button) myView.findViewById(R.layout.btAddPhoto);

} 
```

}

在 R.layout 中找不到 btAddPhoto。

布局 view1 中的控件均不可访问。

如何访问作为视图添加的布局中的控件？

rg，埃里克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T22:17:47.120

解决了它....它是一个按钮，所以我应该使用 R.id.btAddPhoto 而不是 R.layout

我现在觉得很傻......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T19:49:12.543

你在用eclipse开发吗？有时编辑不明白。因此，您可能必须删除 /gen 文件夹中的 R.java 并再次编译它。当 Eclipse 生成 R.java 时，它会找到您的 R.layout.btAddPhoto id。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-08T20:00:29.123

如果您在布局文件夹中定义了 btAddPhoto.xml，那么您的 IDE 没有正确地重新生成您的 R.java。清理您的项目并重建以解决此问题（项目 --> 在 Eclipse 中清理）

# templates - 如何在 ExpressionEngine 中处理带有 Stash 的评论？

> ID：13296472
> 
> 赞同：0
> 
> 时间：2012-11-08T19:38:59.243
> 
> 标签：templates, comments, dry, expressionengine, expressionengine-stash

使用 stash 获取当前条目的评论的最佳方式（DRY）是什么？

到目前为止，我使用嵌入模板来呈现所有评论和评论表单。但这在 stash 中不起作用——难道没有比嵌入式模板更聪明的方法吗？

```
{exp:channel:entries channel='news' limit='1' dynamic='on' require_entry='yes' track_views='one'}
…
{exp:stash:set name='entry_comments' parse_tags='yes'}{embed='_interactive/comments' channel='{channel_short_name}' comment_total='{comment_total}' {if allow_comments}allow='yes'{/if}}{/exp:stash:set}
…
{/exp:channel:entries} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T22:40:11.300

来自 Mark Croxton 的这个[要点](https://gist.github.com/3973821)适用于包含评论的文章列表页面。它的作用比您在场景中描述的要多一些，但您也许可以使用其中的一些概念。

# c# - Windows 8 ListBox TextAlignment 不工作

> ID：13296477
> 
> 赞同：0
> 
> 时间：2012-11-08T19:39:10.210
> 
> 标签：c#, windows-8

我有一个 ListBox - ListBox.ItemTemplate - DataTemplate xaml 设置，我正在尝试将 ListBox (TextBlock) 中的文本居中。TextAlignment 属性似乎不起作用。有任何想法吗？这是我的代码：

```
 <ListBox x:Name="listBox1" HorizontalAlignment="Left" Height="520" Margin="190,220,0,0" VerticalAlignment="Top" Width="295" SelectionChanged="listBox1_SelectionChanged" FontSize="20" FontWeight="Bold" >
        <ListBox.ItemTemplate>
            <DataTemplate>
                <TextBlock Text="{Binding name}" FontSize="25" Foreground="Black" TextAlignment="Center"/>
            </DataTemplate>
        </ListBox.ItemTemplate>
    </ListBox> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T22:25:21.487

ListBox 在内部使用 StackPanel 来包含每个 itemtemplate 默认情况下，itemtemplate 的大小仅足以容纳其子项。在您的模板中，文本块只会调整自身大小以适应绑定文本，因此，没有“中心”，因为边界文本块与文本大小完全匹配。明确设置文本块的大小，或者您可以将以下内容添加到列表框中（或在页面资源中声明为可重用样式）

```
<ListBox.ItemContainerStyle>
                <Style TargetType="ListBoxItem">
                    <Setter Property="HorizontalContentAlignment" Value="Stretch"></Setter>
                </Style>
</ListBox.ItemContainerStyle> 
```

# python - 在 python 中使用文件 I/O 进行用户输入

> ID：13296486
> 
> 赞同：-2
> 
> 时间：2012-11-08T19:39:34.867
> 
> 标签：python, io

想知道我是否可以在“打开”文件时输入 .txt 文件的名称。因为现在，当我输入名称时，我遇到的问题是我无法将 .txt 后缀附加到它，因此它不会创建 .txt 文件。这里：

```
name = input("enter a name: ")    
text1 = open(name,"wt") 
```

那么如何附加 .txt 后缀呢？由于 input 和 open 方法都只接受有限数量的参数？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T19:42:48.753

您应该使用旧式或新式的字符串格式。

老式：

```
text1 = open('%s.txt' % (name,), 'wt') 
```

新风格：

```
text1 = open('{}.txt'.format(name), 'wt') 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-08T19:40:33.403

要在 Python 中连接字符串，请使用`+`：

```
text1 = open(name + ".txt", "wt") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T19:42:49.270

您可以使用字符串连接运算符来连接文件名和后缀。

像 name + ".txt" 这样的东西应该给你 name.txt 字符串格式

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-08T19:52:23.050

确保也使用 raw_input 来获取字符串。

# asp.net - 如何在不重新输入所有方法的情况下实现 IDataReader？

> ID：13296488
> 
> 赞同：1
> 
> 时间：2012-11-08T19:39:48.647
> 
> 标签：asp.net, vb.net, class, implements

我有一个实现 IDataReader 的类并编写了所需的函数，但我收到一条错误消息说明

> 类“CSVDataReader”必须为接口“System.Data.IDataRecord”实现“函数 GetBoolean(i As Integer) As Boolean”。

IDataReader 具有许多功能和属性。如何在不重写所有功能的情况下实现这些功能？

这是我的课

```
 Public Class CSVDataReader
    Implements IDataReader
    Private stream As StreamReader
    Private columnsByName As New Dictionary(Of String, Integer)()
    Private columnsByOrdinal As New Dictionary(Of Integer, String)()
    Private currentRow As String()
    Private _isClosed As Boolean = True

    Public Sub New(fileName As String)
        If Not File.Exists(fileName) Then
            Throw New Exception("File [" & fileName & "] does not exist.")
        End If

        Me.stream = New StreamReader(fileName)

        Dim headers As String() = stream.ReadLine().Split(",")
        For i As Integer = 0 To headers.Length - 1
            columnsByName.Add(headers(i), i)
            columnsByOrdinal.Add(i, headers(i))
        Next

        _isClosed = False
    End Sub

    Public Sub Close()
        If stream IsNot Nothing Then
            stream.Close()
        End If
        _isClosed = True
    End Sub

    Public ReadOnly Property FieldCount() As Integer
        Get
            Return columnsByName.Count
        End Get
    End Property

    ''' <summary>
    ''' This is the main function that does the work - it reads in the next line of data and parses the values into ordinals.
    ''' </summary>
    ''' <returns>A value indicating whether the EOF was reached or not.</returns>
    Public Function Read() As Boolean
        If stream Is Nothing Then
            Return False
        End If
        If stream.EndOfStream Then
            Return False
        End If

        currentRow = stream.ReadLine().Split(",")
        Return True
    End Function

    Public Function GetValue(i As Integer) As Object
        Return currentRow(i)
    End Function

    Public Function GetName(i As Integer) As String
        Return columnsByOrdinal(i)
    End Function

    Public Function GetOrdinal(name As String) As Integer
        Return columnsByName(name)
    End Function

    Public Function GetOrdinal(name As String) As Integer
        Return columnsByName(name)
    End Function
End Class 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T19:43:15.073

您必须实现所有方法和属性。

接口是一种契约——如果一个对象说它可以提供接口上列出的服务，它必须提供所有这些服务。接口不是基类——如果你不实现某些东西，就没有“模板”代码可以依靠。

不将任何代码放在您不感兴趣的方法/属性中是可以的（我通常放`Throw New NotImplementedException`这样我知道什么时候我无意中调用了我不打算调用的方法）。但是存根必须在那里。

# ios - Airplay 和 MPMoviePlayerController (AVPlayer)

> ID：13296494
> 
> 赞同：1
> 
> 时间：2012-11-08T19:40:07.383
> 
> 标签：ios, mpmovieplayercontroller, avfoundation, avplayer, airplay

Airplay 有一些奇怪的问题。我正在使用带有 Airplay 的 MPMoviePlayerController 播放视频（不是镜像）。我想暂停视频并使用 AVPlayerLayer (AVPlayer) 播放视频广告。AVPlayer 成功地使用 Airplay 播放广告（不知道为什么，但我猜这很好）。然而，在商业广告之后，MPMoviePlayerController 想要再次从零开始（在某些设备上而不是其他设备上），因此时间变得一团糟。有时它会跳回到暂停的时间。

我怀疑 Airplay 就像一个单例，只允许一个流在任何时候处于活动状态。MPMoviePlayerController 一次只能显示一个嵌入视频的方式。

我最终使用两个 MPMoviePlayerControllers 进行分支和测试，并得到了相同的结果，除了设置 currentplaybacktime （和 initialplaybacktime 以进行良好测量）并且没有用。它只是从零开始视频。我很想对当前播放时间设置进行延迟，但这似乎很老套。我可以使用相同的 MPMPC，但我不希望在 url 之间切换时终止缓冲区。

在 ipad 上一切正常。我正在为 MPMoviePlayerController 使用 http 流，但广告是网络上的原始 mp4。我怀疑这也可能是一个问题。这是带有 Apple TV 的 5.1 ipad。

我的 AV 大师在哪里？（无效的名字，你在外面吗？） :) Airplay 怎么了？我没有看到太多的文档。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T20:31:40.490

解决方案是在开始下一个电影流之前完全销毁第一个电影流。暂停一个流，播放另一个流，然后回到暂停的流，这简直是不行。我什至通过在开始下一个流之前监听状态通知来确保流完全停止。这似乎解决了这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-16T07:28:52.480

AVQueue 不能支持这个？

我认为 iOS 7/8 的新功能应该支持多流 AV 解码或下载。

# jquery - 选择列表中的选择列表描述

> ID：13296497
> 
> 赞同：0
> 
> 时间：2012-11-08T19:40:27.000
> 
> 标签：jquery, html, select

是否可以在实际选择列表中显示选择列表的描述？单击选择列表时，描述应消失并显示列表。

例子：

```
<select description="cars">
  <option value="volvo">Volvo</option>
  <option value="saab">Saab</option>
  <option value="opel">Opel</option>
  <option value="audi">Audi</option>
</select> 
```

[http://jsfiddle.net/auMPm/](http://jsfiddle.net/auMPm/)

我想在选择框中包含“汽车”一词，单击它时它应该消失并显示选择列表。

我知道这对于文本输入字段是可能的，这可以通过选择标签实现吗？可能用jquery？

编辑：“占位符”是一个神奇的词。本主题涉及它：[如何为“选择”框制作占位符？](https://stackoverflow.com/questions/5805059/select-placeholder)

Edit2：显然有人为我的问题发布了一个更好的解决方案，但删除了他的答案......奇怪。我很幸运能够及时链接到 jsFiddle :)

[http://jsfiddle.net/hxr3P/3/](http://jsfiddle.net/hxr3P/3/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T19:47:00.367

添加新属性以选择标签

```
 <select id='ddl' desc="this is description" >
      <option value="volvo">Volvo</option>
      <option value="saab">Saab</option>
      <option value="opel">Opel</option>
      <option value="audi">Audi</option>
    </select> 
```

使用 jquery 获取该属性

```
$(document).ready(function() {
   var val=$('#ddl').attr('desc').val();
     alert(val);
 })​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T20:08:55.577

```
var val = $('#ddl').attr('description'); 
```

您确定 select 具有描述属性吗？

那应该可行，我自己没有尝试过。希望它有助于祝你好运。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T20:05:18.393

这是使用 ExtJs 的解决方案：

[http://dev.sencha.com/deploy/ext-4.1.0-gpl/examples/form/forum-search.html](http://dev.sencha.com/deploy/ext-4.1.0-gpl/examples/form/forum-search.html)

ExtJS 实现起来可能很麻烦，但它的功能非常强大，请看一下。

（在示例中键入“表格”，它将显示我认为您正在寻找的内容）

# python - 深思熟虑：没有找到“模块”+版本号的 Python 文档

> ID：13296498
> 
> 赞同：1
> 
> 时间：2012-11-08T19:40:28.867
> 
> 标签：python, python-module, enthought

我希望能够在我的 Python Enthought 发行版中列出已安装的模块及其版本号。当我打开终端并输入

```
$ help('modules') 
```

我明白了

```
>> no Python documentation found for 'modules' 
```

如果我在 mac (/usr/bin/python/) 上为我的标准 python 发行版做同样的事情，虽然我仍然缺少模块版本，但它工作正常。

知道如何正确列出所有已安装的模块及其相应的版本吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T19:50:29.873

列出所有模块：

```
import sys
print sys.modules 
```

对于版本信息......这有点棘手。因为如果相应的包/模块未提供此信息，则您将在底层打包机制上进行中继。

如果你使用 pip 你可以做一个 pip show 或 freeze 或者你可以使用[yolk](http://pypi.python.org/pypi/yolk)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-21T20:43:06.560

您可能正在寻找`enpkg`命令。跑步

`enpkg -l`

从命令行将列出安装在 EPD 中的所有软件包以及版本信息。

以下是有关 enpkg 的更多信息：https: [//support.enthought.com/entries/22415022-using-enpkg-to-update-epd-packages](https://support.enthought.com/entries/22415022-using-enpkg-to-update-epd-packages)

**更新：**

关于 help('modules') 本身：它在 Enthought 的 Python 中被故意禁用，因为它可靠地导致标准 EPD 包集的段错误（以及其他原因）。

# sql - 以低成本优化查询

> ID：13296501
> 
> 赞同：1
> 
> 时间：2012-11-08T19:40:37.070
> 
> 标签：sql, oracle

我一直在通过索引和集群对我的 SQL 查询进行一些基本的优化，但遇到了一个奇怪的问题。我的大多数查询的成本从数百到数千不等，我为它们添加了索引，从而降低了它们的成本。

但是，我的一些查询的成本已经很低，通常是个位数。我可以忘记这些吗？仍然值得优化这些查询还是我不应该付出努力？

基本上，我想知道是否有一个通用范围或指标可以用来确定是否应该进一步优化查询。如果我应该根据具体情况确定这一点，那么在决定要优化哪些查询时使用一些指导方针会很有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T19:51:16.453

简单的答案是，如果执行次数使低成本查询变得如此重要，那么低成本查询就很重要。

棘手的部分是低*估计*成本可能并不意味着低*执行*成本——这同样适用于高成本查询。

我肯定会查看 AWR 或 Statspack 报告以了解您最重要的查询是什么，并应用您自己的常识来判断执行计划是否看起来最适合查询的目的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T19:49:39.350

没有严格的指导方针。您可能希望获得有关查询持续多长时间和执行次数的统计信息。还取决于查询的重要性（是针对实时数据还是针对运行单个报告）。

如果查询需要 10 秒但每天执行 1 次，那么您可能不需要优化它。
如果查询需要 1 秒但每天执行 10000 次，那么您可能需要对其进行优化。

# visual-studio-2010 - IIS：向网站添加子目录（Visual Studio 应用程序）

> ID：13296502
> 
> 赞同：1
> 
> 时间：2012-11-08T19:40:45.570
> 
> 标签：visual-studio-2010, iis, web-config, directory, virtual

我在 IIS 上的 RootFolder 文件夹下有几个项目/应用程序*，*我正在尝试向该文件夹添加一个应用程序。我在*RootFolder*中添加了一个名为*ProjectFolder*的虚拟目录，并将其链接到我的新应用程序在*wwwroot*文件夹中的位置。但是，在尝试导航到 Web 浏览器上的页面时，我不断收到以下错误。

 **> 配置错误
> 
> 说明：处理 > 服务此请求所需的配置文件期间发生错误。请查看下面的具体错误详细信息并适当地修改您的配置文件。
> 
> 解析器错误消息：在应用程序级别之外使用注册为 allowDefinition='MachineToApplication' 的部分是错误的。此错误可能是由未在 IIS 中配置为应用程序的虚拟目录引起的。
> 
> 源错误：

```
Line 43:     </authorization>
Line 44:     <customErrors mode="Off"/>
Line 45:     <authentication mode="Forms">
Line 46:       <forms loginUrl="~/LogOn" timeout="2880" />
Line 47:     </authentication> 
```

> 源文件：C:\inetpub\wwwroot\RootFolder\ProjectFolder\web.config 行：45

为了确保这是我的应用程序的问题，我将另一个运行良好的应用程序的内容复制到我的*ProjectFolder*中，但显示了相同的错误。我还尝试右键单击虚拟目录文件夹并选择更改为应用程序（这改变了虚拟目录文件夹的图标。但是，我的 ISS 上正在工作的其他应用程序的图标都没有像这样新图标），但这给出了同样的错误。我正在考虑可能删除此虚拟目录并重新创建它，但是当我右键单击该文件夹时，我没有属性或删除目录的选项。

任何人都可以帮忙吗？

谢谢**

# maven - Maven、JNI、本机代码和传递依赖项

> ID：13296508
> 
> 赞同：1
> 
> 时间：2012-11-08T19:41:13.480
> 
> 标签：maven, java-native-interface, dependencies

我有一个示例/玩具 JNI 项目，我正在尝试使用 Maven 来管理和构建。子项目有：

*   **MathFuncs** : 纯本机代码 (C++)
*   **JMathFuncsNative**：在 JNI 中包装 MathFuncs 类的本机代码
*   **JMathFuncs**：加载 JMathFuncsNative 并调用其方法的 Java 存根代码
*   **JHello**：使用 JMathFuncs 的 Java 应用程序代码

每个项目应该只直接依赖于它上面的工件，并且应该对它上面的所有东西都有传递依赖。

当我`mvn dependency:tree`在每个项目上运行时：

*   MathFuncs 不依赖任何东西（正如预期的那样）。
*   JMathFuncsNative 依赖于 MathFuncs（如预期的那样）：运行时为 dll，编译时为 lib 和 inczip。
*   JMathFuncs 依赖于 JMathFuncsNative（运行时范围），但不获取传递的 MathFuncs 依赖项。
*   JHello 依赖于一切（如预期的那样）。

当我`mvn dependency:tree`从父目录运行时：

*   MathFuncs 不依赖任何东西（正如预期的那样）。
*   JMathFuncsNative 依赖于 MathFuncs（如预期的那样）：运行时为 dll，编译时为 lib 和 inczip。
*   JMathFuncs 依赖于 JMathFuncsNative（运行时范围），但不获取传递的 MathFuncs 依赖项。
*   JHello 依赖于 JMathFuncs（编译范围），它依赖于 JMathFuncsNative（运行时范围），但 MathFuncs 依赖项不存在。

谁能帮我解决这些依赖关系？

编辑：
这是 POM。我已经编辑了上面的项目名称以匹配下面的 POM 中显示的内容。

父 POM：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">

<modelVersion>4.0.0</modelVersion>
<groupId>com.mycompany.samples</groupId>
<artifactId>maven-test-sample</artifactId>
<version>1.0-SNAPSHOT</version>
<packaging>pom</packaging>

<modules>
    <module>MathFuncs</module>
    <module>JMathFuncs</module>
    <module>JMathFuncsNative</module>
    <module>JHello</module>
</modules>
</project> 
```

数学函数 POM：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"  xsi:schemaLocation="http://maven.apache.org/POM/4.0.0   http://maven.apache.org/maven-v4_0_0.xsd">
<modelVersion>4.0.0</modelVersion>
<groupId>com.mycompany.samples</groupId>
<artifactId>MathFuncs</artifactId>
<packaging>dll</packaging>
<version>1.0-SNAPSHOT</version>

<parent>
    <groupId>com.mycompany.samples</groupId>
    <artifactId>maven-test-sample</artifactId>
    <version>1.0-SNAPSHOT</version>
</parent>

<build>
    <plugins>
        <plugin>
            <groupId>org.codehaus.mojo</groupId>
            <artifactId>native-maven-plugin</artifactId>
            <extensions>true</extensions>
            <version>1.0-alpha-7</version>

            <configuration>
                <compilerProvider>msvc</compilerProvider>
                <compilerStartOptions>
                    <compilerStartOption> /EHsc /W4</compilerStartOption>
                    <compilerStartOption>-D_WIN32_WINNT=0x0500</compilerStartOption>
                </compilerStartOptions>

                <sources>
                    <source>
                        <directory>src/main/native</directory>
                        <includes>
                            <include>**/*.cpp</include>
                            <include>**/*.c</include>
                        </includes>
                    </source>
                    <source>
                        <directory>src/main/native/include</directory>
                        <deployable>true</deployable>
                    </source>
                </sources>

                <linkerProvider>msvc</linkerProvider>
                <linkerSecondaryOutputExtensions>lib</linkerSecondaryOutputExtensions>
                <linkerStartOptions>
                    <linkerStartOption> /INCREMENTAL:NO /DLL </linkerStartOption>
                </linkerStartOptions>
            </configuration>

        </plugin>
    </plugins>
</build> 
```

JMathFuncsNative POM：

```
<project xmlns="http://maven.apache.org/POM/4.0.0"  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"   xsi:schemaLocation="http://maven.apache.org/POM/4.0.0   http://maven.apache.org/maven-v4_0_0.xsd">

<modelVersion>4.0.0</modelVersion>
<groupId>com.mycompany.samples</groupId>
<artifactId>JMathFuncsNative</artifactId>
<packaging>dll</packaging>
<version>1.0-SNAPSHOT</version>

<parent>
    <groupId>com.mycompany.samples</groupId>
    <artifactId>maven-test-sample</artifactId>
    <version>1.0-SNAPSHOT</version>
</parent>

<dependencies>
    <dependency>
        <groupId>com.mycompany.samples</groupId>
        <artifactId>MathFuncs</artifactId>
        <version>1.0-SNAPSHOT</version>
        <scope>runtime</scope>
        <type>dll</type>
    </dependency>
    <dependency>
        <groupId>com.mycompany.samples</groupId>
        <artifactId>MathFuncs</artifactId>
        <version>1.0-SNAPSHOT</version>
        <scope>compile</scope>
        <type>lib</type>
    </dependency>
    <dependency>
        <groupId>com.mycompany.samples</groupId>
        <artifactId>MathFuncs</artifactId>
        <version>1.0-SNAPSHOT</version>
        <scope>compile</scope>
        <type>inczip</type>
    </dependency>
</dependencies>

<build>
    <plugins>
        <plugin>
            <groupId>org.codehaus.mojo</groupId>
            <artifactId>native-maven-plugin</artifactId>
            <extensions>true</extensions>
            <version>1.0-alpha-7</version>

            <configuration>
                <compilerProvider>msvc</compilerProvider>
                <compilerStartOptions>
                    <compilerStartOption> /EHsc /W4</compilerStartOption>
                    <compilerStartOption>-D_WIN32_WINNT=0x0500</compilerStartOption>
                </compilerStartOptions>

                <sources>
                    <source>
                        <directory>src/main/native</directory>
                        <includes>
                            <include>**/*.cpp</include>
                            <include>**/*.c</include>
                        </includes>
                    </source>
                    <source>
                        <directory>src/main/native/include</directory>
                        <deployable>true</deployable>
                    </source>
                    <source>
                        <directory>${java.home}\..\include</directory>
                    </source>
                    <source>
                        <directory>${java.home}\..\include\win32</directory>
                    </source>
                </sources>

                <linkerProvider>msvc</linkerProvider>
                <linkerSecondaryOutputExtensions>lib</linkerSecondaryOutputExtensions>
                <linkerStartOptions>
                    <linkerStartOption> /INCREMENTAL:NO /DLL </linkerStartOption>
                </linkerStartOptions>
            </configuration>

        </plugin>
    </plugins>
</build> 
```

JMathFuncs POM：

```
<project xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd" xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">

<modelVersion>4.0.0</modelVersion>
<parent>
    <groupId>com.mycompany.samples</groupId>
    <artifactId>maven-test-sample</artifactId>
    <version>1.0-SNAPSHOT</version>
</parent>
<groupId>com.mycompany.samples</groupId>
<artifactId>JMathFuncs</artifactId>
<version>1.0-SNAPSHOT</version>
<name>JMathFuncs</name>
<url>http://maven.apache.org</url>
<properties>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
</properties>

<dependencies>
    <dependency>
        <groupId>com.mycompany.samples</groupId>
        <artifactId>JMathFuncsNative</artifactId>
        <version>1.0-SNAPSHOT</version>
        <type>dll</type>
        <scope>runtime</scope>
    </dependency>
</dependencies>

</project> 
```

JHello POM：

```
<project xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd" xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">

<modelVersion>4.0.0</modelVersion>

<parent>
    <groupId>com.mycompany.samples</groupId>
    <artifactId>maven-test-sample</artifactId>
    <version>1.0-SNAPSHOT</version>
</parent>

<groupId>com.mycompany.samples</groupId>
<artifactId>JHello</artifactId>
<version>1.0-SNAPSHOT</version>
<name>JHello</name>
<url>http://maven.apache.org</url>

<properties>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
</properties>

<dependencies>
    <dependency>
        <groupId>com.mycompany.samples</groupId>
        <artifactId>JMathFuncs</artifactId>
        <version>1.0-SNAPSHOT</version>
        <scope>compile</scope>
   </dependency>
</dependencies>

<build>
    <plugins>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-dependency-plugin</artifactId>
            <version>2.5.1</version>
            <executions>
                <execution>
                    <id>copy-libs</id>
                    <phase>package</phase>
                    <goals>
                        <goal>copy-dependencies</goal>
                    </goals>
                    <configuration>
                        <outputDirectory>${project.build.directory}</outputDirectory>
                        <stripVersion>true</stripVersion>
                    </configuration>
                </execution>
            </executions>
        </plugin>
    </plugins>
</build>
</project> 
```

以及父目录的输出`mvn dependency:tree`：

```
[INFO] Scanning for projects...  
[INFO] ------------------------------------------------------------------------  
[INFO] Reactor Build Order:  
[INFO]   
[INFO] maven-test-sample  
[INFO] MathFuncs  
[INFO] JMathFuncsNative  
[INFO] JMathFuncs  
[INFO] JHello  
[INFO]                                                                           
[INFO] ------------------------------------------------------------------------  
[INFO] Building maven-test-sample 1.0-SNAPSHOT  
[INFO] ------------------------------------------------------------------------  
[INFO]   
[INFO] --- maven-dependency-plugin:2.1:tree (default-cli) @ maven-test-sample ---  
[INFO] com.mycompany.samples:maven-test-sample:pom:1.0-SNAPSHOT  
[INFO]                                                                           
[INFO] ------------------------------------------------------------------------  
[INFO] Building MathFuncs 1.0-SNAPSHOT  
[INFO] ------------------------------------------------------------------------  
[INFO]   
[INFO] --- maven-dependency-plugin:2.1:tree (default-cli) @ MathFuncs ---  
[INFO] com.mycompany.samples:MathFuncs:dll:1.0-SNAPSHOT  
[INFO]                                                                           
[INFO] ------------------------------------------------------------------------  
[INFO] Building JMathFuncsNative 1.0-SNAPSHOT  
[INFO] ------------------------------------------------------------------------  
[INFO]   
[INFO] --- maven-dependency-plugin:2.1:tree (default-cli) @ JMathFuncsNative ---  
[INFO] com.mycompany.samples:JMathFuncsNative:dll:1.0-SNAPSHOT  
[INFO] +- com.mycompany.samples:MathFuncs:dll:1.0-SNAPSHOT:runtime  
[INFO] +- com.mycompany.samples:MathFuncs:lib:1.0-SNAPSHOT:compile  
[INFO] \- com.mycompany.samples:MathFuncs:inczip:1.0-SNAPSHOT:compile  
[INFO]                                                                           
[INFO] ------------------------------------------------------------------------  
[INFO] Building JMathFuncs 1.0-SNAPSHOT  
[INFO] ------------------------------------------------------------------------  
[INFO]   
[INFO] --- maven-dependency-plugin:2.1:tree (default-cli) @ JMathFuncs ---  
[INFO] com.mycompany.samples:JMathFuncs:jar:1.0-SNAPSHOT  
[INFO] \- com.mycompany.samples:JMathFuncsNative:dll:1.0-SNAPSHOT:runtime  
[INFO]                                                                           
[INFO] ------------------------------------------------------------------------  
[INFO] Building JHello 1.0-SNAPSHOT  
[INFO] ------------------------------------------------------------------------  
[INFO]   
[INFO] --- maven-dependency-plugin:2.5.1:tree (default-cli) @ JHello ---  
[INFO] com.mycompany.samples:JHello:jar:1.0-SNAPSHOT  
[INFO] \- com.mycompany.samples:JMathFuncs:jar:1.0-SNAPSHOT:compile  
[INFO]    \- com.mycompany.samples:JMathFuncsNative:dll:1.0-SNAPSHOT:runtime  
[INFO] ------------------------------------------------------------------------  
[INFO] Reactor Summary:  
[INFO]   
[INFO] maven-test-sample ................................. SUCCESS [0.905s]  
[INFO] MathFuncs ......................................... SUCCESS [0.327s]  
[INFO] JMathFuncsNative .................................. SUCCESS [0.063s]  
[INFO] JMathFuncs ........................................ SUCCESS [0.062s]  
[INFO] JHello ............................................ SUCCESS [0.546s]  
[INFO] ------------------------------------------------------------------------  
[INFO] BUILD SUCCESS  
[INFO] ------------------------------------------------------------------------  
[INFO] Total time: 2.777s  
[INFO] Finished at: Fri Nov 09 14:05:26 EST 2012  
[INFO] Final Memory: 10M/125M  
[INFO] ------------------------------------------------------------------------ 
```

# tiff - 反正有没有使用英特尔 IPP 加载 TIFF 图像？

> ID：13296511
> 
> 赞同：3
> 
> 时间：2012-11-08T19:41:22.250
> 
> 标签：tiff, libtiff, intel-ipp

我在 Windows 7 32/64 位上使用 VS2008。

我正在尝试使用 IPP 处理 tiff 图像。我做了一些搜索，但没有发现英特尔 IPP 加载 tiff 图像的任何可能性。所以我使用 libtiff 来加载 tiff 图像。但问题是，图像的数据类型与 libtiff 相关，例如 TIFFRGBAImage。英特尔 IPP 似乎无法接受这些格式。

那么，如何使用英特尔 IPP 处理 tiff 图像？或者无论如何让英特尔 IPP 接受像 TIFFRGBAImage 这样的数据类型？非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T15:15:24.913

不，我不这么认为。但是您可以使用 libTIFF 将 tiff 文件加载到缓冲区，然后使用 IPP 函数处理缓冲区。

# node.js - 为 expressjs 选择服务器端口的命令行选项是什么？

> ID：13296513
> 
> 赞同：0
> 
> 时间：2012-11-08T19:41:32.160
> 
> 标签：node.js, express

我正在使用这个家伙[https://github.com/twilson63/express-coffee](https://github.com/twilson63/express-coffee)

要启动服务器，文档说要发出以下命令： `cake dev`

有没有办法通过命令行选择端口号？类似于`rails s --port 3010`?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T20:51:29.797

将“PORT=XXXX”放在“cake dev”之前:)

```
PORT=2000 cake dev 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T19:58:24.720

```
$ NODE_PORT=3000 node ./app.js 
```

在 app.js 里面

```
var port = process.env.NODE_PORT; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-08T19:48:54.313

基于`Cakefile`它看起来不是一个选项，但它应该很容易修复。看看 frappe 中的 Cakefile [（](https://github.com/dweldon/frappe)一个类似的项目）。

# matlab - 如何在 matlab 中使用 if 和 or 语句比较数字？

> ID：13296517
> 
> 赞同：0
> 
> 时间：2012-11-08T19:41:31.983
> 
> 标签：matlab, comparison, logic

如果数组的元素`b=[1,2,3,4,5]`等于 1 或 2 或 5，我想返回 true。我该怎么做？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-08T19:50:12.350

There are different ways to do that:

*   Test an individual element against one number

    `b(1) == 5`

*   Test an individual element against several numbers, i.e. is the first element either 1 or 2 or 5?

    `b(1) == 1 || b(1) == 2 || b(1) == 5`

    `%# which is equivalent to`

    `any(b(1) == [1 2 5];`

*   Test all (or many) elements against one number

    `b == 1; %# a vector with t/f for each element`

*   Test all elements against several numbers

    `b == 1 | b == 2 | b == 5 %# note that I can't use the shortcut ||`

    `%# this is equivalent to`

    `ismember(b,[1 2 5])`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-08T19:43:43.263

这很简单。要测试数字的相等性，您只需使用`==`运算符。

```
if (b(1) == 5)
    %% first element of b is 5 
    %% now implement code you require 
```

同样，您可以测试矩阵中任何元素的相等性。要测试多个值，请使用逻辑或运算符`||`，`==`例如

```
if (b(1) == 5 || b(1) == 2 || b(1) == 1)
    %% first element of b is 1,2 or 5 
    %% now implement code you require 
```

# database - 身份类别数据库设计

> ID：13296518
> 
> 赞同：0
> 
> 时间：2012-11-08T19:41:36.567
> 
> 标签：database, database-design

所以，我正在学习（和使用）一个数据库，到目前为止我认为我正在理解它

今天，以下示例出现了一个问题：

我有一个带有身份的表（例如，对象，它有一个名称和一个物理描述，当然还有一个主要的自动增量整数索引）。而且我有与之交互的身份（例如人）。

有没有办法在我的数据库中对这些身份进行分类？例如，假设机械师只与一组非常特定的对象（工具、汽车部件等）进行交互。因此，将机制对对象的任何搜索限制在该系列中是有意义的。

关于解决这个问题的自然方式（如果有的话）的任何提示？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T19:47:22.983

您需要一个带有 id 和描述的表类别

一个对象可以有很多类别，一个类别可以有很多对象。所以我们面临着[多对多的关系](http://en.wikipedia.org/wiki/Many-to-many_%28data_model%29)。

您需要第三张表，我们称之为[联结表](http://en.wikipedia.org/wiki/Junction_table)。该表将具有类别的 id 和对象的 id。

设计看起来像这样

```
Category
Id | Description

Object
Id | Description

Person
id | Type | ...

Categories_Objects
Id | CategoryId | ObjectId 
```

然后，如果您想为类别 1 的机制选择对象（这是一个示例，您需要先找到 id）

你会做这样的选择

```
SELECT Object.Description 
FROM Object 
     INNER JOIN Categories_Objects ON Object.id = Categories_Objects.ObjectID 
WHERE CategoryID = 1 
```

或者

```
SELECT Object.Description 
FROM Object 
     INNER JOIN Categories_Objects ON Object.id = Categories_Objects.ObjectID
     INNER JOIN Category ON Categories_Objects.CategoryId = Category.id
WHERE category.description = "Mechanic" 
```

**注意：**如果一个人可以使用许多类别的工具，您将需要另一个像这样的连接表

```
Persons_Categories
ID | PersonID | CategoryID 
```

# windows - 从 Windows 手机应用程序使用 EventBrite oAuth

> ID：13296523
> 
> 赞同：2
> 
> 时间：2012-11-08T19:41:55.273
> 
> 标签：windows, mobile, oauth, eventbrite

我正在尝试通过 Windows Phone 应用程序将 oAuth 与 Event Brite 一起使用。是否有移动版本的登录页面在 Windows 移动设备上会更友好？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-28T17:54:06.533

目前没有针对移动设备优化的 Eventbrite 登录页面。

# vb.net - vb.net 获取鼠标选中控件

> ID：13296526
> 
> 赞同：0
> 
> 时间：2012-11-08T19:42:04.130
> 
> 标签：vb.net, winforms

我正在创建一个 Windows 窗体应用程序。按下某些键盘快捷键后，我必须执行一些操作。我有这部分：

```
Protected Overrides Function ProcessCmdKey(ByRef msg As Message, keyData As Keys) As Boolean
    If keyData = Keys.Control & Keys.T Then
        'Wait till mouse clicks one of application controls
        'And get selected control information
    Else
        MyBase.ProcessCmdKey(msg, keyData)
    End If
End Function 
```

此外，按下此键盘组合键后，我必须获得一个通过鼠标单击选择的控件。我无法在每个主要表单控件上进行事件（好吧，即使有可能，我相信这是一个愚蠢的选择）。

我拥有的解决方案之一是 Me.ActiveControl 但它不能专注于标签和其他一些无法聚焦的控件。所以这可能不是正确的选择。

我发现的另一个解决方案是全局挂钩，但我不明白如何使用它。我正在寻求您的帮助和建议。如果您有全局钩子示例或更好的解决方案如何获得鼠标点击控制分享它:) 任何帮助表示赞赏，请随时写下您的意见 :)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T20:05:15.430

对于 Windows 编程，您当前的方法是倒退的。

正确的方法是在按下 Ctrl+T 时检查控件的单击事件并做出相应的响应。

1.  导入 Win API 'GetKeyState'
2.  使用“GetKeyState”检查 Ctrl 键和 T 键是否按下。

有关详细信息，请参阅[PInvoke 页面](http://www.pinvoke.net/default.aspx/user32.getkeystate)。

[为所有控件处理单击事件](https://stackoverflow.com/questions/247946/handling-a-click-for-all-controls-on-a-form)的正确方法是为所有控件添加一个中央单击事件处理程序，将您的按键逻辑放置在该处理程序中。

这些是高级技术，需要对 WinForms 有更深入的了解。

# oracle - 第一次遇到错误的绑定错误，有人可以帮我解决吗

> ID：13296528
> 
> 赞同：1
> 
> 时间：2012-11-08T19:42:08.977
> 
> 标签：oracle, plsql, triggers

你能告诉我我在这里做错了什么得到错误的绑定错误吗？

代码是管理库存。我必须确定库存何时达到最低库存量，然后重新订购该产品。

```
 CREATE OR REPLACE TRIGGER REORDER_STOCK
 BEFORE INSERT OR UPDATE OF STK_QOH,STK_MIN ON STOCK
 FOR EACH ROW

 DECLARE
 V_STK_QOH stock.STK_QOH%TYPE;
 V_STK_MIN stock.STK_MIN%TYPE;
 V_STK_REORDER STOCK.STK_REORDER%TYPE;

BEGIN 

 SELECT STK_QOH, STK_MIN, STK_REORDER
INTO V_STK_QOH, V_STK_MIN, V_STK_REORDER
FROM STOCK
WHERE STK_ID= :NEW.STK_ID;

IF:V_STK_QOH<= :STK_MIN THEN
:V_STK_REORDER := 1;
ELSE :V_STK_REORDER :=0;
END IF;

 END;
/ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T19:48:42.887

这部分：

```
IF:V_STK_QOH<= :STK_MIN THEN
:V_STK_REORDER := 1;
ELSE :V_STK_REORDER :=0;
END IF; 
```

应该只是：

```
IF V_STK_QOH <= STK_MIN THEN
    V_STK_REORDER := 1;
ELSE 
    V_STK_REORDER :=0;
END IF; 
```

不确定“重新订购该产品”需要什么，但如果您只想设置`STOCK.STK_REORDER`为“1”，如果它达到其最低手头数量，那么这就是您所需要的：

```
CREATE OR REPLACE TRIGGER REORDER_STOCK
 BEFORE INSERT OR UPDATE OF STK_QOH,STK_MIN ON STOCK
 FOR EACH ROW

BEGIN

   IF :NEW.STK_QOH <= :NEW.STK_MIN THEN
      :NEW.STK_REORDER := 1;
   ELSE
      :NEW.STK_REORDER := 0;
   END IF;

END;
/ 
```

# css - CSS - 如何制作响应式图片

> ID：13296529
> 
> 赞同：0
> 
> 时间：2012-11-08T19:42:10.627
> 
> 标签：css, responsive-design

我一直在涉足响应式网页设计。我正在尝试更改我现有的网站，以便它可以在移动设备和桌面设备上运行。我一直在查看 Internet 上的一些示例，例如[http://2012.inspireconf.com/](http://2012.inspireconf.com/)。

我的问题是 - 当涉及到图像时......让它们缩放到不同浏览器尺寸的正确方法是什么？我在我的 CSS 中尝试了以下测试：

```
 @media only screen and (max-width: 980px) {        
.hero-unit {
  background: url("../img/1.jpg") 100% no-repeat;
  height: 7em;
  width: 14em;    
  padding: 0.5em;
  margin-bottom: 2em;
  background-color: #eeeeee;
  -webkit-border-radius: 4px;
     -moz-border-radius: 4px;
          border-radius: 4px;
}   
 }

 @media only screen  and (min-width: 981px) and (max-width: 1081px) {   
.hero-unit {
  background: url("../img/2.jpg") 100% no-repeat;
  height: 7em;
  width: 14em;    
  padding: 0.5em;
  margin-bottom: 2em;
  background-color: #eeeeee;
  -webkit-border-radius: 4px;
     -moz-border-radius: 4px;
          border-radius: 4px;
}   
 }

 @media only screen  and (min-width: 1082px) and (max-width: 1181px) {  
.hero-unit {
  background: url("../img/3.jpg") 100% no-repeat;
  height: 7em;
  width: 14em;    
  padding: 0.5em;
  margin-bottom: 2em;
  background-color: #eeeeee;
  -webkit-border-radius: 4px;
     -moz-border-radius: 4px;
          border-radius: 4px;
}   
 }

 @media only screen  and (min-width: 1182px) and (max-width: 1281px) {  
.hero-unit {
  background: url("../img/4.jpg") 100% no-repeat;
  height: 7em;
  width: 14em;    
  padding: 0.5em;
  margin-bottom: 2em;
  background-color: #eeeeee;
  -webkit-border-radius: 4px;
     -moz-border-radius: 4px;
          border-radius: 4px;
}   
 } 
```

图像文件只是具有不同数字的简单图片 - 从 1-4 开始。这只是为了给我一个关于正在加载哪个图像文件的视觉队列。当我在桌面上调整浏览器的大小时，我可以看到我的媒体查询正在工作......正在加载不同的图像。

但后来我突然想到，如果我是为一个真实的网站做这个，这意味着我必须为同一张图片创建 5 个不同的版本！

那么创建一张巨大的图片/图像，然后在我继续进行时缩小它的“正确”方法是什么？意思是，如果我的 CSS 看起来像这样：

```
 @media only screen and (max-width: 980px) {        
.hero-unit {
  background: url("../img/1.jpg") 40% no-repeat;
  height: 7em;
  width: 14em;    
  padding: 0.5em;
  margin-bottom: 2em;
  background-color: #eeeeee;
  -webkit-border-radius: 4px;
     -moz-border-radius: 4px;
          border-radius: 4px;
}   
 }

 @media only screen  and (min-width: 981px) and (max-width: 1081px) {   
.hero-unit {
  background: url("../img/1.jpg") 60% no-repeat;
  height: 7em;
  width: 14em;    
  padding: 0.5em;
  margin-bottom: 2em;
  background-color: #eeeeee;
  -webkit-border-radius: 4px;
     -moz-border-radius: 4px;
          border-radius: 4px;
}   
 }

 @media only screen  and (min-width: 1082px) and (max-width: 1181px) {  
.hero-unit {
  background: url("../img/1.jpg") 80% no-repeat;
  height: 7em;
  width: 14em;    
  padding: 0.5em;
  margin-bottom: 2em;
  background-color: #eeeeee;
  -webkit-border-radius: 4px;
     -moz-border-radius: 4px;
          border-radius: 4px;
}   
 }

 @media only screen  and (min-width: 1182px) and (max-width: 1281px) {  
.hero-unit {
  background: url("../img/1.jpg") 100% no-repeat;
  height: 7em;
  width: 14em;    
  padding: 0.5em;
  margin-bottom: 2em;
  background-color: #eeeeee;
  -webkit-border-radius: 4px;
     -moz-border-radius: 4px;
          border-radius: 4px;
}   
 } 
```

我试过了，但图像似乎没有缩放，但我不确定这是否只是因为我一开始没有正确创建图像。（我不是平面设计师）。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T20:39:56.627

## 解决方案 1：CSS 媒体查询

如果您不关心与较小分辨率匹配的设备的带宽，您可以使用此解决方案。

不必为每个媒体查询覆盖相同的 css 属性。您可以设置一次边框、边距、填充等`.hero-unit`，所有媒体查询都将从它继承。

background-size 属性具有**contains**关键字。它缩放图像以适应容器。背景图像按比例调整大小。

**包含：**

> 该关键字指定背景图像在确保其尺寸小于或等于背景定位区域的对应尺寸的同时，应尽可能地进行缩放。

根据您正在处理的图像类型，您还可以尝试使用[background-size](https://developer.mozilla.org/en-US/docs/Web/CSS/background-size#Values)属性的**封面**关键字。

**覆盖：**

> 该关键字指定背景图像在确保其尺寸大于或等于背景定位区域的对应尺寸的同时，应尽可能缩小。

### 例子：

```
background-size: contain; 
```

我还在这里为您设置了一个工作演示[http://jsfiddle.net/qBuzR/5/](http://jsfiddle.net/qBuzR/5/)

* * *

## 解决方案 2：Javascript 和服务器端调整大小（自托管）

如果您关心带宽，您应该根据客户端请求的分辨率调整服务器端的照片大小。

有一个名为[Adaptive Images](http://adaptive-images.com/)的库，它对我来说在服务器端与 PHP 配合得很好。我想你可以找到你需要的任何语言的库。

* * *

## 解决方案 3：Javascript 和服务器端调整大小（第三方）

如果您懒得设置，您可以尝试第三方服务，例如[mobify.com API](http://ir0.mobify.com/)。换句话说，我将其称为 Resizing-as-a-Service。

### 例子：

`http://ir0.mobify.com/jpg80/100/100/http://farm4.staticflickr.com/3113/3831295511_2c004d9059_o.jpg`

此 API 调用将图像转换为图像格式 JPG，最大高度和宽度为 100 像素，质量级别为 80%。

# sugarcrm - SugarCRM 6.5 密码重置

> ID：13296530
> 
> 赞同：3
> 
> 时间：2012-11-08T19:42:18.520
> 
> 标签：sugarcrm

我用 md5 替换了管理员密码，现在我无法重置密码。它似乎被加密了。有谁知道如何再次获得糖？电子邮件不工作。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-08T20:09:09.580

对 Sugar 数据库运行以下命令，将管理员密码重置为“test”，然后登录并重置您的密码。

```
update users set user_hash = '098f6bcd4621d373cade4e832627b4f6' where user_name = 'admin'; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-12-31T02:21:17.883

如果数据库是 MySQL，您可以使用内置的 md5 函数轻松地将密码设置为您喜欢的任何内容：

`update users set user_hash = md5('mynewpassword') where id = '1';`

# haskell - 取决于 Cabal 中二进制文件的存在

> ID：13296542
> 
> 赞同：2
> 
> 时间：2012-11-08T19:43:04.113
> 
> 标签：haskell, cabal

为了简单起见，我想编写一个包，它需要系统上存在某个（非 Haskell）程序，即 PHCPack。

如果它是一个库，我可以添加一个`extra-libraries`字段。我如何依赖特定二进制文件的存在？

目前，如果一个具有正确名称的二进制文件位于`PATH`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T10:23:03.103

好的，这就是我想出的（感谢 nm 的建议）。我的（有点简单的）Setup.hs 看起来像这样：

```
import Distribution.Simple

import Distribution.Simple.Utils(warn)
import Distribution.Verbosity(normal)
import System.FilePath(getSearchPath,(</>))
import System.Directory(doesFileExist,getPermissions,executable)
import Control.Monad(filterM,unless)

main = do
  let hooks = simpleUserHooks {
        preConf = \args cnfFlags -> do
           info <- (preConf simpleUserHooks) args cnfFlags
           checkPHC
           return info
        }
  defaultMainWithHooks hooks

checkPHC :: IO ()
checkPHC = do
  locations <- phcLocations
  (if null locations then 
     warn normal "No PHC binary found in PATH."
   else do
     p <- mapM getPermissions locations
     unless (any executable p) $ warn normal "PHC file found, but not executable.")

phcLocations :: IO [FilePath]
phcLocations = do
  paths <- getSearchPath
  filterM doesFileExist $ map (</> "phc") paths 
```

它在 PATH 中检查名为“phc”的二进制文件。

# .net - 正则表达式查找未注释的行（或匹配不包含'的行）

> ID：13296545
> 
> 赞同：2
> 
> 时间：2012-11-08T19:43:17.823
> 
> 标签：.net, regex

我正在尝试使用 RegEx 解析一些代码，并且我需要匹配任何包含未被注释掉的代码的行。

例如：

```
Public Function SomeFunc(SomeVar As Integer) As Boolean
               Dim APSHSwitch, objDB, sql, iCnt, vADOConn, result As New Object
    '''        Dim BPSHSwitch, objDB, sql, iCnt, vADOConn, result As New Object
               'Dim CPSHSwitch, objDB, sql, iCnt, vADOConn, result As New Object\
End Function 
```

我需要匹配：

```
Dim APSHSwitch, objDB, sql, iCnt, vADOConn, result As New Object 
```

到目前为止，我有以下内容，这三个都匹配。

```
Dim\s
(?<varNames>([A-Z0-9]+(,\s){1})+[A-Z0-9]+)
\sAs\s
(?<newKeyWord>(New\s)?)
(?<varType>([A-Z]+)) 
```

我只需要匹配没有评论的第一行。我想不通。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T19:49:21.560

首先，如果您使用 /* */ 或任何嵌套评论，我什至不会尝试正则表达式。

但是，如果您只是在寻找以 开头的行`"'''"`，那么我会匹配注释行而不是未注释的行，然后相应地调整您的条件。

例子

```
"^\s*'''\s*.*$ 
```

将匹配注释行

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T19:50:02.930

在你的正则表达式的开头添加一个否定的后视

```
(?<!^\s*\')

Explanation: The line doesN'T (?<!) start with (^) any amount of white space (\s*) and an apostrophe (\'). 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T00:29:41.900

我能够使用以下正则表达式与多行 ON 获得此匹配

```
(?<!^\s*\'+\s*)
Dim\s
(?<varNames>([A-Z0-9]+(,\s){1})+[A-Z0-9]+)
\sAs\s
(?<newKeyWord>(New\s)?)
(?<varType>([A-Z]+)) 
```

感谢 LastCoder！

# ruby-on-rails - Rails 错误 H10 显示 NameError 和 const_missing_from_s3_library

> ID：13296548
> 
> 赞同：2
> 
> 时间：2012-11-08T19:43:26.697
> 
> 标签：ruby-on-rails, heroku

我们有一个应用程序正在从 Bamboo 升级到 Cedar，但我们遇到了一个重大问题。部署顺利进行，但我们立即收到应用程序错误。任何想法表示赞赏。

```
2012-11-08T19:26:03+00:00 heroku[router]: Error H10 (App crashed) -> GET secure-bayou-3300.herokuapp.com/ dyno= queue= wait= service= status=503 bytes=
2012-11-08T19:26:56+00:00 heroku[web.1]: State changed from crashed to down
2012-11-08T19:26:56+00:00 heroku[web.1]: State changed from down to starting
2012-11-08T19:26:59+00:00 heroku[web.1]: Starting process with command `bundle exec thin start -p 3557 -e production`
2012-11-08T19:27:07+00:00 app[web.1]: >> Using rack adapter
2012-11-08T19:27:07+00:00 app[web.1]: /app/vendor/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/ext/module.rb:36:in `const_missing': uninitialized constant Rack::Builder::App (NameError)
2012-11-08T19:27:07+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/aws-s3-0.6.2/lib/aws/s3/extensions.rb:206:in `const_missing_from_s3_library'
2012-11-08T19:27:07+00:00 app[web.1]:   from /app/config.ru:9:in `block (2 levels) in <main>'
2012-11-08T19:27:07+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/builder.rb:51:in `instance_eval'
2012-11-08T19:27:07+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/builder.rb:51:in `initialize'
2012-11-08T19:27:07+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/builder.rb:141:in `new'
2012-11-08T19:27:07+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/builder.rb:141:in `block in generate_map'
2012-11-08T19:27:07+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/builder.rb:141:in `each'
2012-11-08T19:27:07+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/builder.rb:141:in `generate_map'
2012-11-08T19:27:07+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/builder.rb:128:in `to_app'
2012-11-08T19:27:07+00:00 app[web.1]:   from /app/config.ru:1:in `<main>'
2012-11-08T19:27:07+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/thin-1.5.0/lib/rack/adapter/loader.rb:33:in `eval'
2012-11-08T19:27:07+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/thin-1.5.0/lib/rack/adapter/loader.rb:33:in `load'
2012-11-08T19:27:07+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/thin-1.5.0/lib/rack/adapter/loader.rb:42:in `for'
2012-11-08T19:27:07+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/thin-1.5.0/lib/thin/controllers/controller.rb:169:in `load_adapter'
2012-11-08T19:27:07+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/thin-1.5.0/lib/thin/controllers/controller.rb:73:in `start'
2012-11-08T19:27:07+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/thin-1.5.0/lib/thin/runner.rb:187:in `run_command'
2012-11-08T19:27:07+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/thin-1.5.0/lib/thin/runner.rb:152:in `run!'
2012-11-08T19:27:07+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/thin-1.5.0/bin/thin:6:in `<top (required)>'
2012-11-08T19:27:07+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/bin/thin:19:in `load'
2012-11-08T19:27:07+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/bin/thin:19:in `<main>'
2012-11-08T19:27:08+00:00 heroku[web.1]: Process exited with status 1
2012-11-08T19:27:08+00:00 heroku[web.1]: State changed from starting to crashed 
```

# javascript - TypeScript 增强的 SharedWorker PortMessage 通道合约

> ID：13296549
> 
> 赞同：5
> 
> 时间：2012-11-08T19:43:30.927
> 
> 标签：javascript, rpc, typescript, web-worker, json-rpc

**对于 Windows 和 Worker 之间的 RPC 样式的通信通道，利用 TypeScript 语言功能的良好通用设计是什么？**

**SharedWorkers**是由浏览器在特定浏览器窗口上下文之外运行的 JavaScript 代码列表。一个 SharedWorker（通过脚本 URI）被所有打开的浏览器窗口共享，它们自己的代码请求它。`worker.port`Windows 和工作线程通过发送者可以 postMessage() 和接收者可以监听“消息”事件的纠缠对象进行通信。允许发布的最一致支持的类型是单一的`string`，它可以很容易地成为`JSON.stringify(ofSomeObject)`但可以是任何自定义格式。

**TypeScript**是 JavaScript 的扩展，它提供了一些有用的类型安全和其他有用的应用程序代码管理功能。

**远程过程调用**库（如 WCF）使用由通信通道的（所有）双方共享的 SOA 样式的合同接口，并抽象出单调且容易出错的序列化和反序列化请求的必要性。

* * *

浏览器 Windows 和它们的 Worker 之间的通信类似于 RPC，因为我们不能通过通道将代码作为数据传递。一个主要区别是通信是单向的。发件人可以发布消息，但不能阻止并等待结果。相反，应用层负责将接收到的数据与发送的请求进行匹配（如果合适）。

为了利用 TypeScript 的打字特性，在我看来遵循 Contract 范式是一个不错的选择。我们需要：

1.  每个接收者的服务合约都有一个接口。
2.  每个合约的接收者实现
3.  每个合约的代理实现

首先，我们需要向 TypeScript 介绍基于 lib.d.ts 定义构建的 SharedWorkers。SharedWorker.d.ts：

```
interface ConnectEvent extends Event {
    ports: MessagePort[];
};

interface SharedWorker extends EventTarget, AbstractWorker {
    port: MessagePort;
};

declare var SharedWorker: {
    prototype: SharedWorker;
    new (scriptURL: any, name: any): SharedWorker;
    new (scriptURL: any): SharedWorker;
} 
```

在 WCF 中，我们有一个环境 OperationContext 来了解连接的客户端。在大多数情况下，我们还会返回一个值来发送对请求的响应。

在 JavaScript 中，我们没有 ThreadStatic，我怀疑我们能否可靠地提供 OperationContext 的环境等价物。（每个代码清单都是单线程运行的，但是异步方式是通过计时器回调实现的，并且可能由 Worker 实现使用，我认为我们无法正确跟踪它。）

使用 MessagePorts，我们无法返回值。相反，我们必须向请求者发送另一个单向响应，因此我们需要返回 MessagePort 的句柄。但是，此返回 MessagePort 不能是 Contact 的一部分，因为 Proxy 实现不需要它。我所能想到的就是创建一个新的实现类实例，该实例使用接收器/代理特定的差异进行初始化，例如返回的 MessagePort 和任何其他数据，例如所有连接的用于广播消息的 MessagePort 的数组。然后实现的成员方法可以引用它们，因为它们可能是 OperationContext。

以及消息事件处理程序的示例：

```
worker.port.addEventListener('message', (e: MessageEvent) => {
    var data = JSON.parse(e.data);
    new ReceiverImplementation(worker.port)[data.name].apply(this, data.params);
}, false); 
```

代理实现可能具有以下功能：

```
SessionLogin(username: string) {
    this.worker.port.postMessage(Command('SessionLogin', arguments));
} 
```

消息事件处理程序将接收到的参数应用于指定的方法名称。ReceiverImplementation 对象应该如图所示独立于任何其他类，因为我们希望避免方法名称冲突。也许不是——我们正在谈论在客户端机器上运行的客户端代码。没有相同的安全问题（也没有执行警卫的能力）。

发布整个原型太长/太复杂，并且由于主题，它不适合 jsfiddle。无论如何，我所拥有的并不是那么好。它看起来仍然像一堆样板代码，功能很少。

而且我很确定所有这些也适用于非共享网络工作者，但是由于沟通的所有这些麻烦，我看不到非共享品种的价值主张！

*这是一个庞大的问题*，但我希望我在解释它方面做得很好。你对解决这个 Window-Worker 通信有什么想法？如何利用 JavaScript 的轻松性质和 TypeScript 的安全假象来实现更简单且不易出错的通信？我怀疑我正在采用 .NET-limitations-inspired WCF 并将它们过于接近地移植到 JavaScript。

谢谢。

# java - 对 getter/setter 或 AtomicReference 使用 synhronize

> ID：13296553
> 
> 赞同：2
> 
> 时间：2012-11-08T19:43:44.670
> 
> 标签：java, concurrency, atomic, java.util.concurrent

据我了解，情况如下：

```
class Case1{
        private Object object;
        public synchronized Object getObject() {
            return object;
        }
        public synchronized void setObject(Object object) {
            this.object = object;
        }
    } 
```

与以下相比，将被视为已弃用：

```
class Case2{
    private AtomicReference<Object> object = new AtomicReference<Object>();
    public Object getObject() {
        return object.get();
    }
    public void setObject(Object object) {
        this.object.set(object);
    }
} 
```

我对吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T19:47:39.987

在这两种情况下，getter 和 setter 中的操作都是原子的（引用分配）。因此，一个更有效（至少在可读性方面）的习惯用法是：

```
class Case3 {
    private volatile Object object = new Object();
    public Object getObject() {
        return object;
    }
    public void setObject(Object object) {
        this.object = object;
    }
} 
```

至于您的实际问题，`AtomicReference`提供了一些简单的原子操作，如果您需要它们，这将使其成为 volatile 的不错选择。并使整个块原子化，这`synchronized`使您能够以原子方式进行更复杂的操作。

换句话说，`volatile`和`AtomicReference`都有`synchronized`其特殊性，并不等价。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T21:08:06.300

挥发性应该是足够的。AtomicReference 添加了更多有用的操作，例如 getAndSet() 和 compareAndSet()。但如果你只做 get 和 set，volatile 应该更便宜。

# javascript - clearInterval 和 clearTimer 在 Wordpress 上不起作用

> ID：13296554
> 
> 赞同：0
> 
> 时间：2012-11-08T19:43:45.003
> 
> 标签：javascript, clearinterval

我查看了所有 clearInterval/clearTimeout 答案，他们都说要做我已经在做的事情。不过，我的超时和间隔仍不清楚。我在想可能是因为它在 Wordpress 中？IDK，请帮助...

```
jQuery(document).ready(function($){
var slideshow_timer;
var slideshow_delay;

    function initSlideshow() {
  slideshow_delay = setInterval(startSlideshow, 5000);
}

function startSlideshow() {
    if(!slideshow_timer){
        clearInterval(slideshow_delay);
        slideshow_timer = setTimeout(startSlideshow, 5000);
    }
}

function stopSlideshow() {
    if(slideshow_timer){
        clearTimeout(slideshow_timer);
    }else{  
        clearInterval(slideshow_delay);
    }
}
}); 
```

当我 console.log 变量时，我仍然得到数字。

*我删除了许多使幻灯片动画化的附加废话，并将其分解为间隔和超时。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T19:49:20.410

即使在清除计时器之后，您存储其返回值的变量也将保持不变。即使它有效，它也不会被设置回 0 或未定义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T19:50:18.590

Clearing the intervals does not reset the actual variables..

It just stops the timers.

* * *

If you need to restart the slideshow, then you will have to manually reset the variables once you stop the timers.

```
jQuery(document).ready(function($){
    var slideshow_timer;
    var slideshow_delay;

        function initSlideshow() {
      slideshow_delay = setInterval(startSlideshow, 5000);
    }

    function startSlideshow() {
        if(!slideshow_timer){
            clearInterval(slideshow_delay);
            slideshow_delay = null;
            slideshow_timer = setTimeout(startSlideshow, 5000);
        }
    }

    function stopSlideshow() {
        if(slideshow_timer){
            clearTimeout(slideshow_timer);
            slideshow_timer = null;
        }else{  
            clearInterval(slideshow_delay);
            slideshow_delay = null;
        }
    }
}); 
```

# android - 如何从已在android上按下的另一个按钮设置文本

> ID：13296558
> 
> 赞同：0
> 
> 时间：2012-11-08T19:44:00.803
> 
> 标签：android, button, view

在我的程序中，当用户按下按钮时，我想根据已有的内容将文本设置为其他内容，但它不起作用。当我单击按钮时，没有任何反应，文本保持不变 这是制作按钮的 xml 布局。他们调用函数 nextVal

```
<Button
                android:id="@+idk/kbutton1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:onClick="nextVal"
                android:text="@string/zero" />

            <Button
                android:id="@+idk/kbutton3"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:onClick="nextVal"
                android:text="@string/x" />

            <Button
                android:id="@+idk/kbutton4"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:onClick="nextVal"
                android:text="@string/one" /> 
```

被调用的函数

```
public void nextVal(View view)
    {

        Button b = (Button) findViewById(view.getId());
        System.out.println(b.getText().toString());

        switch(view.getId())
        {
        case R.idk.kbutton4:
            if(b.getText().toString() == "0")
                b.setText("1");
            else if(b.getText().toString() == "1")
                b.setText("x");
            else if(b.getText().toString() == "x")
                b.setText("0");
            break;
        case R.idk.kbutton3:
            if(b.getText().toString() == "0")
                b.setText("1");
            if(b.getText().toString() == "1")
                b.setText("x");
            if(b.getText().toString() == "x")
                b.setText("0");
            break;
        case R.idk.kbutton2:
            if(b.getText().toString() == "0")
                b.setText("1");
            if(b.getText().toString() == "1")
                b.setText("x");
            if(b.getText().toString() == "x")
                b.setText("0");
            break;
        }

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T19:55:32.060

您已经使用`@+idk/`，`case R.idk`而不是`id`在整个代码中，切换所有这些，以便`view.getId()`知道要返回什么。例如：

```
<Button
    android:id="@+id/kbutton3"
    ... /> 
```

和：

```
case R.id.kbutton3: 
```

（我猜`view.getId()`目前`View.NO_ID`每个按钮都会返回。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T19:52:43.937

您正在使用 == 运算符比较两个字符串。== 运算符检查引用是否相同，而不是内容是否相等。

相反，您应该使用 b.getText.ToString().equals("x");

话虽如此，我还有一些额外的建议。您正在使用 findViewById() 来查找您已经通过的视图。您可以替换 findViewById(view.getId()) 并将 View 转换为 Button 。

此外，您可以摆脱 switch 语句，因为它真的对您没有任何好处，只会使代码混乱。无论如何，您都在做完全相同的事情，那何必呢？只需将其替换为其中一种可能性的内容即可。

所以你的 nextVal() 可能看起来像：

```
 public void nextVal(View view)
    {
        Button b = (Button) view;

        if(b.getText().toString().equals("0")){
                b.setText("1");
        }else if(b.getText().toString().equals("1")){
                b.setText("x");
        }else if(b.getText().toString().equals("x")){
                b.setText("0");
        }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T19:57:57.820

== 运算符不比较字符串中的字符。使用 .equals() 代替。

# asp.net - 是否可以在 ajax 仍在 vb.net 中加载时更新标签对象的文本？

> ID：13296561
> 
> 赞同：0
> 
> 时间：2012-11-08T19:44:25.183
> 
> 标签：asp.net, ajax, vb.net

基本上我要跟踪正在循环的函数的进度。该函数由 Ajax 调用。

例如，我有一个更新面板：

```
<form runat="server">
<asp:ScriptManager ID="ScriptManager1" runat="server">
</asp:ScriptManager> 

<asp:UpdatePanel ID="UpdatePanel1" runat="server" ChildrenAsTriggers="True" UpdateMode="Always">

<ContentTemplate> 

<div>
<asp:Label ID="testing" runat="server"></asp:Label>
</div>          

</ContentTemplate> 
<Triggers>

<asp:AsyncPostBackTrigger ControlID="myButton" EventName="Click"/>
</Triggers>
</asp:UpdatePanel>

<div style="display:none;">
<asp:Button ID="myButton" Text="SomeFunction" OnClick="myFunc" runat="server">
/asp:Button>
</div>

...
</form> 
```

假设我在后面的代码中的功能是：

```
Protected Sub myFunc

  Dim i As Integer

    For = 0 to 1000

      'Some other function here consumes time

      testing.text = i.ToString

    Next

End Sub 
```

了解 Response.write 不与 ajax 混合，所以我想使用标签对象更新文本并跟踪函数循环的进度。

但是，似乎在 ajax 调用完全完成之前文本不会更新，它只会更改为循环的最后一个数字。

我的问题是，有什么方法可以让文本对象在循环功能仍在服务器端运行时实时变化？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T15:02:26.270

为了其他访问者，我将从另一个页面复制我的答案：

你不能用 .net 更新面板来做到这一点，至少我不相信这很容易。虽然你可以用 2 个单独的 AJAX 调用来做到这一点..

此示例使用 JQuery 进行 AJAX，代码隐藏在 vb.net 中。

本质上，您需要做的是进行第一次调用以开始漫长的过程，然后反复进行第二次调用，使用第二种方法来获取长期的状态。

AJAX

这是您对漫长过程的主要要求。如果需要，您需要将数据传递给该方法。注意有一个processName。这应该是一个随机字符串，以确保您仅获得此进程的状态。其他用户将有不同的随机 processName，因此您不会混淆状态。

```
 var processName = function GenerateProcessName() {

        var str = "";
        var alhpabet = "abcdefghijklmnopqrstuvwxyz";
        for (i = 1; i < 20; i++) {
            str += alhpabet.charAt(Math.floor(Math.random() * alhpabet.length + 1));
        }
        return str;
    }

    function StartMainProcess(){
    $j.ajax({
            type: "POST",
            url: "/MyWebservice.asmx/MyMainWorker",
            data: "{'processName' : '" + processName + "','someOtherData':'fooBar'}",
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success: function (msg) {
                if (msg.d) {                        
                    // do a final timerPoll - process checker will clear everything else
                    TimerPoll();
                }
            }
        });
        TimerPoll();
     } 
```

您的第二次 AJAX 调用将使用另一种方法来获取进度。这将通过计时器方法每 XXX 次调用一次。

这是 TimerPoll 函数；在这种情况下，它将每 3 秒触发一次

```
function TimerPoll() {
        timer = setTimeout("GetProgress()", 3000)
    } 
```

最后，GetProgress() 函数用于获取进度。我们必须传入上面使用的相同 processName，才能获取此用户调用的进程

```
function GetProgress() {
        // make the ajax call
        $j.ajax({
            type: "POST",
            url: "/MyWebService.asmx/MyMainWorkerProgress",
            data: "{'processName' : '" + processName + "'}",
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success: function (msg) {

                // Evaulate result..
                var process = msg.d

                if (process.processComplete) {
                    // destroy the timer to stop polling for progress
                    clearTimeout(timer);

            // Do your final message to the user here.                      

                } else {

                   // show the messages you have to the user.
                   // these will be in msg.d.messages

                    // poll timer for another trip
                    TimerPoll();
                }
        });

    } 
```

现在，在后端，您将拥有几个与 AJAX 通信的 Web 方法。您还需要一个共享/静态对象来保存所有进度信息，以及您想要传回给用户的任何内容。

在我的例子中，我创建了一个类，它的属性填充并在每次调用 MyMainWorkerProcess 时传回。这看起来有点像这样。

```
 Public Class ProcessData
        Public Property processComplete As Boolean
        Public Property messages As List(Of String) = New List(Of String)
    End Class 
```

我也有一个使用这个类的共享属性，它看起来像......（这个共享属性能够保存多个用户的多个进程进度 - 因此是字典。字典的键将是进程名称。所有进度数据将属于 ProcessData 类

```
Private Shared processProgress As Dictionary(Of String, ProcessData) = New Dictionary(Of String, ProcessData) 
```

我的主要工作函数看起来有点像这样。请注意，我们首先确保没有另一个 processProgress 具有相同的

```
<WebMethod()> _
<ScriptMethod(ResponseFormat:=ResponseFormat.Json)> _
Public Function MyMainWorker(ByVal processName as string, ByVal SomeOtherData as string) as Boolean

        '' Create progress object - GUI outputs process to user
        '' If the same process name already exists - destroy it
        If (FileMaker.processProgress.ContainsKey(processName)) Then
            FileMaker.processProgress.Remove(processName)
        End If

        '' now create a new process
        dim processD as ProcessData = new ProcessData() with {.processComplete = false}

        '' Start doing your long process.

        '' While it's running and after whatever steps you choose you can add messages into the processData which will be output to the user when they call for the updates
         processD.messages.Add("I just started the process")

         processD.messages.Add("I just did step 1 of 20")

         processD.messages.Add("I just did step 2 of 20 etc etc")

         '' Once done, return true so that the AJAX call to this method knows we're done..
        return true

End Function 
```

现在剩下的就是调用 progress 方法了。所有这一切都要做的是返回字典 processData 与我们之前设置的 processName 相同。

```
<WebMethod()> _
    <ScriptMethod(ResponseFormat:=ResponseFormat.Json)> _
    Public Function MyMainWorkerProgress(ByVal processName As String) As ProcessData

        Dim serializer As New JavaScriptSerializer()

        If (FileMaker.processProgress.ContainsKey(processName)) Then
            Return processProgress.Item(processName)
        Else
            Return New ProcessData()
        End If

    End Function 
```

瞧..

所以回顾一下..

1.  创建 2 个 Web 方法 - 一个用于执行漫长的过程，一个用于返回它的进度
2.  对这些 Web 方法创建 2 个单独的调用。第一个是给主要工作人员，第二个是重复 xx 秒，给一个将提供进度的工作人员
3.  以您认为合适的方式将您的消息输出给用户...

免责声明......我之前没有在这里提供这么长时间的答案......它可能不符合人们习惯看到的格式。抱歉，如果这一切看起来有点混乱 :) 我已经从正在运行的项目中复制了大部分代码，所以它应该可以工作.. 如果有一些错别字，请不要开枪 :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T20:52:15.673

对的，这是可能的。但这不是一个简单的解决方案。Dino Esposito 有很多关于这个主题的好文章：

使用 ASP.NET AJAX 取消服务器任务 - [http://msdn.microsoft.com/en-us/magazine/cc163380.aspx](http://msdn.microsoft.com/en-us/magazine/cc163380.aspx) 使用 SignalR 构建进度条 - [http://msdn.microsoft.com/en-us/magazine /hh852586.aspx](http://msdn.microsoft.com/en-us/magazine/hh852586.aspx)

至于我，我使用了我的一个项目的第一篇文章中描述的方法。

# javascript - 将 View 的触摸位置转换为 WebView 的 HTML 屏幕位置

> ID：13296562
> 
> 赞同：6
> 
> 时间：2012-11-08T19:44:27.537
> 
> 标签：javascript, android, drag-and-drop

我有一个`WebView`在资产文件夹中显示本地 HTML 页面。`WebView`是较大布局的一部分`Activity`。我试图允许用户将文本从小`EditText`部件拖到`WebView`. 除了将拖动侦听器接收到的屏幕坐标转换为`document.elementFromPoint`. 他们不匹配。它会不断地将文本放入输入框中，这些输入框比用户的手指更远。任何帮助，将不胜感激。警告：我的 javascript 知识非常可悲。

基本流程：

1.  WebView 的 onDrag 事件捕获 ACTION_DROP 事件。
2.  事件的 x、y 位置被传递给 Javascript 函数
3.  Javascript函数根据点查找元素并更新值

在我的活动中：

```
private class OnWebViewDragListener implements OnDragListener {
    public boolean onDrag(View v, DragEvent event) {
        switch (event.getAction()) {
            case DragEvent.ACTION_DROP:
                String dropText = event.getClipData().getItemAt(0).getText().toString();
                mJavaScript._dropText(mWebView, dropText, event.getX(), event.getY());
                return true;

            default:
                break;
        }

        return false;
    }
} 
```

Javascript包装器：

```
public void _dropText(WebView wv, String text, float x, float y) {
    wv.loadUrl("javascript:dropText('" + text + "', " + x + ", " + y + ")");
} 
```

Javascript函数：

```
<script type="text/javascript">
function dropText(text, x, y) {
    var elem = document.elementFromPoint(x, y);

    if (elem.tagName == "INPUT") {
        elem.value = text;
    }
}
</script> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-12T19:13:07.250

弄清楚了。使转换变得比它需要的更复杂。Android 的 WebView 和 WebPage 都有基于其可见视口大小的自己的坐标系。是的，两者都报告不同大小的视口。即使两个视口都可以滚动，也不需要包含那些滚动的更改。简单的公式：

DE = DragEvent
WV = WebView

x = DE.getX() * (window.innerWidth / WV.getWidth());
y = DE.getY() * (window.innerHeight / WV.getHeight());

我的代码现在看起来如何：

**在活动中：**

```
private class OnWebViewDragListener implements OnDragListener {
    public boolean onDrag(View v, DragEvent event) {
        switch (event.getAction()) {
            case DragEvent.ACTION_DROP:
                String dropText = event.getClipData().getItemAt(0).getText().toString();
                mJavaScript._dropText(mWebView, dropText, event.getX(), event.getY());
                return true;

            default:
                break;
        }

        return false;
    }
} 
```

**Javascript包装器：**

```
public void _dropText(WebView wv, String text, float x, float y) {
    wv.loadUrl("javascript:dropText('" + text + "', " + x + ", " + y + ", " + wv.getHeight()
            + ", " + wv.getWidth() + ")");
} 
```

**Javascript函数：**

```
<script type="text/javascript">
function dropText(text, x, y, height, width) {
    x *= (window.innerWidth / width);
    y *= (window.innerHeight / height);

    var elem = document.elementFromPoint(x, y);

    if (elem.tagName == "INPUT") {
        elem.value = text;
    }
}
</script> 
```

# php - 使用 strstr() 排除两个值

> ID：13296566
> 
> 赞同：0
> 
> 时间：2012-11-08T19:44:33.533
> 
> 标签：php, strstr

我有这个代码：

```
if(!strstr($value, '<p>')){...} 
```

这会将数据库中的数据输出到 Excel 文件，不包括包含`<p>`.

我还想排除包含`</script>`

我试过这两个代码片段没有成功：

```
if((!strstr($value, '<p>')) and (!strstr($value, '</script>'))) 
```

和：

```
if(!strstr($value, '<p>', '</script>')) 
```

基本上我的问题是如何从我的excel文件中排除`<p>`和排除？`</scrpit>`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T19:49:21.783

您可以为此使用正则表达式和 preg_match 函数：

```
if(!preg_match("/(<p>|<\/script>)/", $value)) {
    // Do your magic!   
} 
```

您可以在此处阅读有关 preg_match 的更多信息：[PHP preg_match](http://php.net/manual/en/function.preg-match.php) 如果您在使用正则表达式时遇到问题，请查看以下示例：[示例](http://rubular.com/r/OZ8pNqbme5)并使用它来掌握正则表达式。

据我所知，您的逻辑应该可以正常工作。也许您的 $value 变量包含错误的数据。无论如何，你有一些东西可以让你前进。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T19:51:31.423

这行得通。

```
<?php

$a = array('ok0', 'somthing <p>','2222 </script>', 'ok1');
foreach ($a as $value)
    if((!strstr($value, '<p>')) && (!strstr($value, '</script>')))
        echo $value; 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-11-08T19:50:14.750

我建议`strpos`改用，但这应该可以正常工作：

```
if(!strstr($value, '<p>') and !strstr($value, '</script>')){
    // Write your file
} 
```

......如果没有，其他事情正在发生。例如，您`$value`可能不是您所期望的。

**编辑**替换`&&`为`and`每个操作的代码示例

# javascript - MobiScroll 中的自动增量轮

> ID：13296569
> 
> 赞同：0
> 
> 时间：2012-11-08T19:44:42.280
> 
> 标签：javascript, mobiscroll

我在网站上使用 mobiscroll 作为日期输入的方法。滚动条是这样启动的：

```
$(function(){
var curr = new Date().getFullYear();
$('#date').scroller({
    preset: 'date',
    height: 30,
    width: 20,
    theme: 'default',
    display: 'inline',
    mode: 'scroller',
    dateOrder: 'MD ddyy',
    startYear: curr,
    endYear: curr + 3,
    minDate: new Date(),
    showLabel: false,
    onChange:function(){ upDATE(); }
});    
$('#date').scroller('setValue', [11,9,'2012']); 
```

如您所见，它以最短日期（今天）启动。当用户尝试从 2012 年 12 月滚动到 1 月时，就会出现我的问题。您会期望这一年会提前到 2013 年 1 月，但事实并非如此。相反，它会回到当年的第一个有效日期。这不是很直观。

有谁知道如何使滚动条按预期运行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T20:58:14.433

如果我理解正确，您想滚动月份……一旦月份到 12 月，然后您尝试滚动过去 12 月，它应该切换到 1 月并增加年份？如果是这种情况，那么我认为 Mobiscroll 不会那样工作。它的工作方式似乎是您独立选择月份、日期和年份。

* * *

如果我无法理解您的问题，那么我建议设置 minDate 和 maxDate 并查看是否有帮助（请注意，月份索引为零）：

```
 minDate: new Date(2000, 0, 1),
 maxDate: new Date(2020, 11, 31), 
```

另外，我认为它已经默认为当前的实际年份，因此除非您想要不同的年份，否则我会删除 startYear 。

* * *

编辑：如果上个月是 12 月，新月份是 1 月，您可能可以使用 OnChange 事件和 SetValue 方法来增加年份，如果上个月是 1 月，新月份是 12 月，则减少年份。等等。请参阅[http://docs.mobiscroll.com/mobiscroll-core](http://docs.mobiscroll.com/mobiscroll-core)。不过，这似乎确实有很多额外的工作和开销。

# iphone - 建立 NSURLConnection 及其响应

> ID：13296576
> 
> 赞同：0
> 
> 时间：2012-11-08T19:45:44.167
> 
> 标签：iphone, objective-c, ios, xcode4.5

您好我正在开发一个 iPhone 应用程序。我需要从 B 类委托给 B 类创建一个 NSURLConnection。在建立连接的时候，我导航回之前的视图，即 A 类。所以 B 类对象被释放，我从 NSURLConnection 收到一个错误，因为它是委托给 B 类。那么我该如何建立连接，以便即使我已经导航到 A 类也不会崩溃。我们是否使用 GCD 或其他一些不同的线程在不设置不同委托的情况下使这项工作正常工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T19:49:27.560

例如，您必须强烈引用 B 类中的连接，`@property (strong, nonatomic) NSURLConnection * connection`然后当您摆脱 B 类时，您可以调用`[self.connection cancel];`

来自 Apple 的 NSURLConnection 参考文档：

> > 调用此方法后，连接的委托不再接收任何有关该连接的消息。如果你想重新尝试连接，你应该创建一个新的连接对象。

放这个的好地方是`-[UIViewController viewDidDisappear];`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T22:32:26.423

在您的 ClassA 中，您应该为 ClassB 的实例创建一个强属性，否则，当您返回 ClassA 时，ClassB 会从堆栈中弹出并被释放。此外，如果您想在再次推送时转到同一个 CLassB 实例，则推送到 ClassB 的代码应如下所示（假设您有一个名为 classB 的属性）：

```
if (! self.classB){
    ClassB self.classB = [[ClassB alloc] init]; 
}
[self.navigationController pushViewController:self.classB]; 
```

# actionscript-3 - 位图数据混合模式和 alpha

> ID：13296580
> 
> 赞同：0
> 
> 时间：2012-11-08T19:46:17.057
> 
> 标签：actionscript-3, flash

无论如何在使用位图数据绘制时应用 alpha 和 BlendMode.HardLight 吗？

```
var processImageBmd:BitmapData=new BitmapData(900,900);
processImageBmd.draw(backgroundImage);  //backgroundImage is a sprite                               

processImageBmd.draw(frontImage,null,null,BlendMode.HARDLIGHT);//frontImage is a sprite 
```

基本上我需要将 alpha（假设 alpha = 0.4）和 BlendMode.HardLight 应用于 frontImage。我成功地将混合模式硬光应用于正面图像，但无法弄清楚如何使其成为 alpha。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T21:29:39.990

您应该能够`colorTransfrom`通过传递给绘图函数来做到这一点。

因此，对于您的情况，这应该可以解决问题：

```
var ct:ColorTransform = frontImage.transform.colorTransform; //copy the current colorTransform so you don't have to mess with colors
ct.alphaMultiplier = .4; //set it's alpha to .4;
processImageBmd.draw(frontImage,null,ct,BlendMode.HARDLIGHT); //pass your color transform to the draw command 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T21:26:43.500

是的，这是可能的。您必须传递 a `ColorTransform`，其中包含一个 alphaMultiplier 参数。

```
BitmapData.draw(IDrawable, Matrix, ColorTransform, BlendMode, ClipRect, smoothing) 
```

# .net - 使用 wcf 服务部署 silverlight 应用程序

> ID：13296581
> 
> 赞同：1
> 
> 时间：2012-11-08T19:46:16.917
> 
> 标签：.net, wcf, silverlight, deployment, xap

我尝试部署一个使用 wcf 服务的 silverlight 应用程序。我知道我可以通过将 .xap 文件放到 apache Web 服务器并在 html 中引用它来简单地部署 silverlight 应用程序。

现在我不清楚的是，我必须单独部署 web 服务（silverligh 项目的 .Web 文件夹中的 .svc 文件）还是包含在 .xap 文件中？

谢谢

# java - Java XML：ClassCastException DeferredTextImpl

> ID：13296583
> 
> 赞同：8
> 
> 时间：2012-11-08T19:46:22.330
> 
> 标签：java, xml, parsing, nodelist

这是我的代码：

```
// get the factory
DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();

try {

    // Using factory get an instance of document builder
DocumentBuilder db = dbf.newDocumentBuilder();

// parse using builder to get DOM representation of the XML file
    dom = db.parse(file);

} catch (ParserConfigurationException pce) {
    pce.printStackTrace();
} catch (SAXException se) {
    se.printStackTrace();
} catch (IOException ioe) {
    ioe.printStackTrace();
}

NodeList n1 = dom.getChildNodes();
Element e1 = (Element) n1.item(0);

System.out.println(n1.getLength());
System.out.println(e1.getNodeName());

NodeList n2 = n1.item(0).getChildNodes();
Element e2 = (Element) n2.item(0);   //Line 61

System.out.println(n2.getLength());
System.out.println(e2.getNodeName()); 
```

这是我的 XML 文件：

```
<?xml version="1.0" encoding="utf-8"?>

<test-fw:test
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns:test-fw="http://simitar/test-fw"> 

<rule-tree>
<rule class="matchlines">
<property name="contiguous"> true</property>
<property name="inOrder">false</property>
<property name="exact">false</property>
<property name="lines">modelInstantiated</property>
</rule>
<rule class="matchlines">
<property name="contiguous"> true</property>
<property name="inOrder">true</property>
<property name="exact">false</property>
<property name="lines">InitEvent</property>
</rule>
</rule-tree>

</test-fw:test> 
```

这是我的输出：

```
1
test-fw:test
Exception in thread "main" java.lang.ClassCastException: com.sun.org.apache.xerces.internal.dom.DeferredTextImpl cannot be cast to org.w3c.dom.Element
    at testpack.Main.run(Main.java:61)
    at testpack.Main.main(Main.java:86) 
```

我不断收到此错误。我完全迷路了。我不知道该怎么做。我希望能够拥有一个节点，并且能够获取它的所有子节点并将它们放入数组或列表中，这样我就可以遍历它们。

这是我所有的进口：

```
import java.io.File;
import java.io.IOException;
import java.util.List;
import java.util.Stack;

import javax.xml.parsers.DocumentBuilder;
import javax.xml.parsers.DocumentBuilderFactory;
import javax.xml.parsers.ParserConfigurationException;

import org.w3c.dom.Document;
import org.w3c.dom.Element;
import org.w3c.dom.NodeList;
import org.xml.sax.SAXException; 
```

我一直在努力让这个 Java 解析这个 XML 文件。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-08T19:51:57.210

```
NodeList n1 = dom.getChildNodes();
Element e1 = (Element) n1.item(0); 
```

该节点不是一个`Element`，而是一个`Node`。

尝试这个：

```
Node no1 = (Node) n1.item(0); 
```

例如，节点可以是文本节点或元素。尤其是，

```
<root>
<element/>
</root> 
```

是**4**个节点。一个`root` *元素*，一个包含的*文本节点*`\n`，该`element` *元素*和另一个包含的*文本节点*`\n`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-05-19T08:09:06.213

只需要检查`Node`is an `Element`or not 。以下是转换`Node`为`Element`.

```
NodeList nodes = root.getChildNodes();
for (int i = 0; i < nodes.getLength(); i++) {
    if(nodes.item(i).getNodeType() == Node.ELEMENT_NODE){
         Element element = (Element) nodes.item(i);
         ............................
    }
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-08T20:01:16.253

请注意，它`NodeList.item`返回一个`Node`对象，它可以但不必是`Element`.

在您的情况下，该方法返回一个[`DeferredTextImpl`](http://xerces.apache.org/xerces2-j/javadocs/xerces2/org/apache/xerces/dom/DeferredTextImpl.html)实例，该实例表示一个文本节点。该类实现了[`DeferredNode`](http://xerces.apache.org/xerces2-j/javadocs/xerces2/org/apache/xerces/dom/DeferredNode.html)接口，而该接口又是[`Node`](http://docs.oracle.com/javase/1.4.2/docs/api/org/w3c/dom/Node.html).

为了处理`Node`实例，您必须确保可以安全地执行转换。该`Node`接口提供了允许您检查节点类型的方法，该节点[`getNodeType`](http://docs.oracle.com/javase/1.4.2/docs/api/org/w3c/dom/Node.html#getNodeType%28%29)返回一个`short`值，您可以将其与同一接口中定义的常量进行比较，例如[`ELEMENT_NODE`](http://docs.oracle.com/javase/1.4.2/docs/api/org/w3c/dom/Node.html#ELEMENT_NODE)

# blackberry - 黑莓 SendListener 被多次调用

> ID：13296585
> 
> 赞同：0
> 
> 时间：2012-11-08T19:46:25.193
> 
> 标签：blackberry, java-me, sms, listener

我的应用程序中有以下代码，它在发送短信时侦听并增加计数器。

```
 SendListener smsListener = new net.rim.blackberry.api.sms.SendListener() {

        public boolean sendMessage(Message message) {
            ++smsCount;
            return true;
        }
    }; 
```

但是，由于某种原因，`sendMessage`当只发送一条短信时（即使短信很短），该方法会被多次调用（通常是 3 次）。

为什么是这样 ？这个问题有解决方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T12:35:34.710

我没有在 bb dev 论坛上找到有关此问题的提及。正如 Emmanuel 建议的那样，您可能会多次注册 listener。请查看此线程：

[http://supportforums.blackberry.com/t5/Java-Development/sendListener-sms-and-folder-listner-invalk-multiple-times/mp/1978915/highlight/true#M211297](http://supportforums.blackberry.com/t5/Java-Development/sendListener-sms-and-folder-listner-invalk-multiple-times/m-p/1978915/highlight/true#M211297)

# c# - 带有小结果字符串的简单字符串加密/解密

> ID：13296586
> 
> 赞同：11
> 
> 时间：2012-11-08T19:46:33.987
> 
> 标签：c#, encryption

我需要加密一个字符串，然后才能再次解密它。

我在[这里](https://stackoverflow.com/questions/10168240/encrypting-decrypting-a-string-in-c-sharp)实现了解决方案并且效果很好，但是生成的字符串不合适，因为它需要简单且足够短以供用户使用。

我正在加密递增的数据库 ID（从 1 开始）并且不会超过 500。理想情况下，我希望加密字符串的长度不超过 6 个字符。

任何想法表示赞赏..

**编辑：**这是一个冗长的表格，用户可以在以后使用此生成的字符串恢复

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-08T21:21:19.927

[您可以在CTR 模式](http://en.wikipedia.org/wiki/Block_cipher_modes_of_operation#Counter_.28CTR.29)下使用 AES，无需任何填充。在这种模式下，有一个计数器被加密，然后结果与你的明文进行异或，即数字。结果应该很小，并且您将获得 AES 的加密，这将比您使用的任何替代密码更好（您可能会手动破解）。您将必须获得[BouncyCastle 加密库，但是因为](http://www.bouncycastle.org/)[Rijndael](http://msdn.microsoft.com/en-us/library/system.security.cryptography.rijndael.aspx)的 Microsoft 实施没有 CTR 作为[可用模式](http://msdn.microsoft.com/en-us/library/system.security.cryptography.ciphermode%28v=vs.110%29.aspx)。下面是您需要实现的 AES 类的示例。以及加解密的例子。

```
using System;
using System.Text;
using Org.BouncyCastle.Crypto;
using Org.BouncyCastle.Crypto.Engines;
using Org.BouncyCastle.Crypto.Modes;
using Org.BouncyCastle.Crypto.Parameters;

public class AES
{
    private readonly Encoding encoding;

    private SicBlockCipher mode;

    public AES(Encoding encoding)
    {
        this.encoding = encoding;
        this.mode = new SicBlockCipher(new AesFastEngine());
    }

    public static string ByteArrayToString(byte[] bytes)
    {
        return BitConverter.ToString(bytes).Replace("-", string.Empty);
    }

    public static byte[] StringToByteArray(string hex)
    {
        int numberChars = hex.Length;
        byte[] bytes = new byte[numberChars / 2];

        for (int i = 0; i < numberChars; i += 2)
        {
            bytes[i / 2] = Convert.ToByte(hex.Substring(i, 2), 16);
        }

        return bytes;
    }

    public string Encrypt(string plain, byte[] key, byte[] iv)
    {
        byte[] input = this.encoding.GetBytes(plain);

        byte[] bytes = this.BouncyCastleCrypto(true, input, key, iv);

        string result = ByteArrayToString(bytes);

        return result;
    }

    public string Decrypt(string cipher, byte[] key, byte[] iv)
    {
        byte[] bytes = this.BouncyCastleCrypto(false, StringToByteArray(cipher), key, iv);

        string result = this.encoding.GetString(bytes);

        return result;
    }

    private byte[] BouncyCastleCrypto(bool forEncrypt, byte[] input, byte[] key, byte[] iv)
    {
        try
        {
            this.mode.Init(forEncrypt, new ParametersWithIV(new KeyParameter(key), iv));

            BufferedBlockCipher cipher = new BufferedBlockCipher(this.mode);

            return cipher.DoFinal(input);
        }
        catch (CryptoException)
        {
            throw;
        }
    }
} 
```

**示例用法**

```
string test = "1";

AES aes = new AES(System.Text.Encoding.UTF8);

RNGCryptoServiceProvider rngCsp = new RNGCryptoServiceProvider();
byte[] key = new byte[32];
byte[] iv = new byte[32];

// Generate random key and IV
rngCsp.GetBytes(key);
rngCsp.GetBytes(iv);

string cipher = aes.Encrypt(test, key, iv);

string plaintext = aes.Decrypt(cipher, key, iv);

Response.Write(cipher + "<BR/>");

Response.Write(plaintext); 
```

**输出示例**

```
CB
1 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-08T20:31:39.763

```
//encryption   
string output="";   
char[] readChar = yourInput.ToCharArray();   
for (int i = 0; i < readChar.Length; i++)  
{   
    int no = Convert.ToInt32(readChar[i]) + 10;   
    string r = Convert.ToChar(no).ToString();   
    output+=r;   
}  
//decryption  
string output="";   
char[] readChar = yourInput.ToCharArray();   
for (int i = 0; i < readChar.Length; i++)   
{   
    int no = Convert.ToInt32(readChar[i]) - 10;   
    string r = Convert.ToChar(no).ToString();   
    output+=r;   
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-08T19:58:28.423

if you want it to be simple maybe use a main key of 6 letter add it to the 6 letters input do a modulo based on the allowed input chars

its like a =1

b =2

c = 3

and then simply add a number a + 13 mod 24 > ...

wont say its secure but its simple as you requested You might also do some combinations like for the next char is deoded prev char as +xx

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-08T20:33:27.863

既然您说这些是递增的数据库 ID，我假设我们正在谈论正整数。限制加密确实不是一个好主意，因为加密越有限，就越容易破解。我不确定您的目标，但听起来您可能只想通过“加密”来隐藏最终用户的 ID。所以，如果我假设这些是 1 到 999 之间的正整数，那么我的建议如下。一，简单的字符替换。这将很容易弄清楚，因为您将被限制为 10 个字符。二，将它们转换为十六进制。不会欺骗很多人，但普通的最终用户可能无法识别它。第三，将数字转换为Base64。这不会像十六进制那样容易被识别。最后的，想出某种公式，您可以将其应用于始终产生唯一结果的数字。但是我真的不建议这样做，因为它非常困难。

# android - Android 三星 Galaxy S3 imageview 无法正确显示

> ID：13296587
> 
> 赞同：2
> 
> 时间：2012-11-08T19:46:39.200
> 
> 标签：android, imageview, galaxy, samsung-mobile

我正在开发一个使用大图像（超过 2000 像素高度）的应用程序。我为不同的密度缩放制作了图像，并且在所有模拟器和物理手机上的测试都给出了很好的结果。全部，三星 Galaxy S3 实体手机除外。它拒绝正确渲染超过 2000px 高度的图像。（它绘制了图像的完全缩小版本）。在 S3 的模拟器上运行我的应用程序可以得到很好的结果。使图像高度小于 2000 像素也能正确显示图像。这种奇怪行为的原因是什么？

我正在为我的图像视图使用以下布局：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
      xmlns:tools="http://schemas.android.com/tools"
      android:layout_width="match_parent"
      android:layout_height="match_parent"
      android:orientation="vertical" >
      <TextView
        android:id="@+id/textView1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:background="@drawable/test"
        android:text="@string/test"
        android:textSize="20dp" />
      <ScrollView
        android:id="@+id/scrollView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >
        <LinearLayout
            xmlns:android="http://schemas.android.com/apk/res/android"
            xmlns:tools="http://schemas.android.com/tools"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:orientation="vertical" >

            **<ImageView
                android:id="@+id/map"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:background="#FFFFFF"
                android:scaleType="center" />**
           </LinearLayout>                            
        </ScrollView>
   </LinearLayout> 
```

图像工作正常的模拟器具有以下详细信息：

```
 Target: Google APIs (Google Inc) - API Level 15
 SD Card: size: 1024mb
 Skin:Built In: WXGA720
 Hardware:
        Abstracted LCD Density: 320
        VM application heap size: 48
        Device ram size: 1024 
```

# 3d - 面临错误“无法打开包含文件 iwanim.h”

> ID：13296595
> 
> 赞同：1
> 
> 时间：2012-11-08T19:47:21.510
> 
> 标签：3d, marmalade

我正在关注**Marmalade SDK的**[本教程](http://docs.madewithmarmalade.com/native/examplesandtutorials/tutorials/animatedcharactertutorial.html)，我已经按照每个步骤进行操作，现在当我尝试构建项目时，它向我显示了一个错误

 **```
cannot open include file iwanim.h 
```

任何帮助都将是可观的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T05:53:25.667

这意味着您可能没有`iwanim`在 mkb 的子项目部分中包含该子项目。完成每个 marmalade 教程的最佳方法是使用 marmalade's`launchpad`并从那里打开示例项目。iwanim 项目可以在启动板的 Studio 部分中找到。它将包括所有基本文件、`example`子项目，并且准备好运行而不会出现错误。

或者，您可以在`$Marmalade_Root/examples`. 在我的电脑中是`C:/Marmalade/6.1/examples`. 从未在我的 Mac 上使用过果酱。**

# node.js - 如何使用 Passport JS 对用户服务器端进行身份验证？

> ID：13296597
> 
> 赞同：5
> 
> 时间：2012-11-08T19:47:32.243
> 
> 标签：node.js, express, passport.js

我想通过生成一个随机的用户名和密码来自动生成用户帐户，然后用户自动登录（用户不知道他的用户名/密码，他的浏览器只存储会话cookie）。

Passport 用作中间件，那么如何验证我刚刚生成的用户呢？`app.post('/login')`或者，以某种方式重定向到我的路线并发送这些变量会更好吗？（但以某种方式将这些发送到浏览器，只是为了发送回服务器似乎不是很安全或有效）。

```
app.get('/signup', function(req, res) {
if(req.isAuthenticated()) { res.redirect('/'); }
else {
    var today = new Date();
    var weekDate = new Date();
    weekDate.setDate(today.getDate() + 7);

    var key1 = Math.random().toString();
    var key2 = Math.random().toString();
    var hash1 = crypto.createHmac('sha1', key1).update(today.valueOf().toString()).digest('hex');
    var hash2 = crypto.createHmac('sha1', key2).update(weekDate.valueOf().toString()).digest('hex');

    var newUser = new models.User({
        username: hash1,
        password: hash2,
        signupDate: today,
        accountStatus: 0,
        expirationDate: weekDate,
    });

    newUser.save(function(err) {
        if(err) {}
        console.log("New user created.");

        //HOW CAN I PASS USERNAME AND PASSWORD ARGUMENTS???
        passport.authenticate('local')();
        res.redirect('/login');
    })
}
}); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-09T09:14:53.360

将您的呼叫替换`passport.authenticate('local')();`为

```
req.logIn(user, function(err) {
  if (err) { return next(err); }
  //copied from the docs, you might want to send the user somewhere else ;)
  return res.redirect('/users/' + user.username); 
}); 
```

让我知道情况如何。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-14T23:43:50.597

rdrey 的回答非常有帮助。对大多数人来说可能很明显但对我来说不是的一个细节是模型 .save () 出错并且回调中的记录。所以整个模式是

```
newuser.save(function(err,user) {
req.logIn(user, function(err) {
if (err) { return next(err); }
//copied from the docs, you might want to send the user somewhere else ;)
return res.redirect('/users/' + user.username); 
}); 
```

# .net - WPF 绑定到 ObservableCollection - 控制行？

> ID：13296604
> 
> 赞同：1
> 
> 时间：2012-11-08T19:47:59.597
> 
> 标签：.net, wpf

我想显示一个包含两列的网格 - 名称和进度。名称应该是一个字符串，进度是一个介于 0.00 和 1.00 之间的百分比值。我希望百分比显示为进度条或类似的东西。

我的窗口中有一个 DataGrid，创建了一个带有双精度和文件名的简单类。我的主要代码是这样的：

```
public ObservableCollection<DownloadFile> files = new ObservableCollection<DownloadFile>(); 
```

然后我将 设置`ItemsSource`为这个集合，自动生成列设置为 true。到目前为止它工作正常，包括更新。

现在类中的 double Value 是 0 到 1 之间的值，一个百分比。由于没有进度条，我决定可以更改相应行的背景颜色，如下所示：

```
row.cell.Style.Background = new LinearGradientBrush(
    Brushes.Green.Color,
    Brushes.White.Color,
    new Point(percentage, 0.5),
    new Point(percentage + 0.1, 0.5)); 
```

有没有办法以某种方式..控制网格显示的内容？现在，我要么对差异感到不知所措，要么 DataGrid 与旧的 DataGridView 相比是一个巨大的退步，这也不是很好。但这似乎完全绑定到一些我不能轻易手动更改的真实数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T21:03:05.637

如果您知道列数及其类型，最好显式创建它们并设置`AutoGenerateColumns`为`false`. 第一个将是 a `DataGridTextColumn`，第二个我们将创建一个自定义模板：

```
<DataGrid AutoGenerateColumns="False" ItemsSource="{Binding FilesDownloading}">
    <DataGrid.Columns>
        <DataGridTextColumn Header="File" Binding="{Binding Name}"/>
        <DataGridTemplateColumn Header="Progress">
            <DataGridTemplateColumn.CellTemplate>
                <DataTemplate>
                    <ProgressBar Minimum="0" Maximum="1" Value="{Binding Progress}"/>
                </DataTemplate>
            </DataGridTemplateColumn.CellTemplate>
        </DataGridTemplateColumn>
    </DataGrid.Columns>
</DataGrid> 
```

似乎您将在文件下载时更新进度，因此您需要您的`DownloadFile`类来实现`INotifyPropertyChanged`接口。此外，这使得在下载完成时发送消息变得容易：

```
public class DownloadFileInfo : INotifyPropertyChanged
{
    public string Name { get; set; }

    private double _progress;
    public double Progress
    {
        get { return _progress; }
        set
        {
            _progress = value;
            RaisePropertyChanged("Progress");
        }
    }

    public event PropertyChangedEventHandler PropertyChanged;
    private void RaisePropertyChanged(string propertyName)
    {
        if (PropertyChanged != null)
            PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
    }
} 
```

# drupal - 更新有关 drupal 商务的字段

> ID：13296606
> 
> 赞同：0
> 
> 时间：2012-11-08T19:48:00.580
> 
> 标签：drupal, drupal-modules, drupal-commerce

我有一个产品字段，它需要一个数字作为输入（数量），有时这个数量会变成空，所以我想使用 Commerce Feeds 模块将此字段从某事更新为空。但它一直没有更新该字段，没有任何内容（空）。

我可能会说我需要自动而不是手动完成

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T21:13:03.027

1.  You may want to look into the commerce stock module. That's what you sound like your using this quantity field for. [http://drupal.org/project/commerce_stock](http://drupal.org/project/commerce_stock)

2.  Did you create this product via feeds? Feeds can only update items that are created with feeds.

# .net - 使用 API 搜索 Google Doc 电子表格

> ID：13296610
> 
> 赞同：1
> 
> 时间：2012-11-08T19:48:27.590
> 
> 标签：.net, google-drive-api, spreadsheet

我是这个 Drive API 的新手，我正在寻找 Visual Basic .NET 示例代码，该代码显示如何在 Google Doc 电子表格中搜索值。

例如，假设我想搜索位于...的电子表格文件... [https://docs.google.com/a/XXXX.com/spreadsheet/ccc?key=0Alk;k;z-7X7s-dFBDMGg1bHZnTm9mWmtCUEVzdUR5aHc#gid= 0](https://docs.google.com/a/XXXX.com/spreadsheet/ccc?key=0Alk;k;z-7X7s-dFBDMGg1bHZnTm9mWmtCUEVzdUR5aHc#gid=0)

对于价值.....这是一个测试

在 B 列中，如果找到，则返回找到该值的行的 D 列和 E 列。

对于我的生活，我找不到任何好的例子。

# wpf - 在方法完成之前，文本框不会更新

> ID：13296615
> 
> 赞同：5
> 
> 时间：2012-11-08T19:48:48.617
> 
> 标签：wpf, data-binding, textbox

我正在尝试使用文本框来显示任务完成。基本上就像控制台应用程序如何显示正在发生的事情一样。

然而，文本框中的文本仅在 Window_Loaded_1 完成后更新，然后所有文本都会显示而不是实时显示。

xml代码：

```
<Window x:Class="timelineTesting.Windows.CreateNewProject"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="CreateNewProject" Height="300" Width="579" Loaded="Window_Loaded_1">
<Grid>
    <Grid.RowDefinitions>
        <RowDefinition/>
    </Grid.RowDefinitions>
    <TextBox Text="{Binding Path=LogData, UpdateSourceTrigger=PropertyChanged}" />
</Grid> 
```

C#代码：

```
public partial class CreateNewProject : Window, INotifyPropertyChanged
{
    private string _data;
    public String LogData
    {
        get
        {
            return _data;
        } 
        set
        {
            _data = value;
            OnPropertyChanged("LogData");
        }
    }

    public CreateNewProject()
    {
        InitializeComponent();
        this.DataContext = this;   
    }

    private void Window_Loaded_1(object sender, RoutedEventArgs e)
    {
        Task t = new Task(() => Directory.CreateDirectory(this.ProjectName));

        LogData+="Starting new project creation...." + Environment.NewLine;
        LogData += "Creating project directory '" + ProjectName + "'....";
        try
        {
            t.Start();
            t.Wait();
        }
        catch (Exception ex)
        {
            LogData += "Error:" + Environment.NewLine;
            LogData += ex.InnerException.ToString();
        }

        LogData+= "Done!" + Environment.NewLine;

        t = new Task(() => File.Copy(this.VideoFilePath, newVideoPath));
        LogData+= "Copying video file to project directory....";
        try
        {
            t.Start();
            t.Wait();
        }
        catch (Exception ex)
        {
            LogData+= "Error:" + Environment.NewLine;
            LogData+= ex.InnerException.ToString();
        }

        LogData+= "Done!" + Environment.NewLine;
        // many more tasks
    }

    public event PropertyChangedEventHandler PropertyChanged;

    protected virtual void OnPropertyChanged(string propertyName)
    {
        PropertyChangedEventHandler handler = this.PropertyChanged;
        if (handler != null)
        {
            handler(this, new PropertyChangedEventArgs(propertyName));
        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T19:52:06.637

`t.Wait()`是阻塞调用。这意味着你真的没有做多线程。您开始任务，然后等待它完成。您应该做的是`await`完成任务。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T19:55:02.633

使用具有 ProgressChanged 事件的[后台工作人员](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx)，该事件可以使用并发状态更新您的文本框。

请参阅文章：[C# WPF：线程、控制更新、状态栏和取消操作示例 All In One](http://omegacoder.com/?p=642)，其中提供了一个示例。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-08T20:03:19.097

使用`await`：

```
private async void Window_Loaded_1(object sender, RoutedEventArgs e)
{
  Task t = Task.Run(() => Directory.CreateDirectory(this.ProjectName));
  LogData += "Starting new project creation...." + Environment.NewLine;
  LogData += "Creating project directory '" + ProjectName + "'....";
  try
  {
    await t;
  }
  catch (Exception ex)
  {
    LogData += "Error:" + Environment.NewLine;
    LogData += ex.ToString();
  }

  LogData += "Done!" + Environment.NewLine;

  t = Task.Run(() => File.Copy(this.VideoFilePath, newVideoPath));
  LogData += "Copying video file to project directory....";
  try
  {
    await t;
  }
  catch (Exception ex)
  {
    LogData += "Error:" + Environment.NewLine;
    LogData += ex.ToString();
  }

  LogData += "Done!" + Environment.NewLine;

  // many more tasks
} 
```

# javascript - jQuery验证抛出设置错误

> ID：13296617
> 
> 赞同：1
> 
> 时间：2012-11-08T19:48:58.427
> 
> 标签：javascript, jquery, jquery-validate

我在我`.html` `head`的第 1 页上有一个表单，在第 2 页上再次有相同的表单。但是，如果我从第 1 页开始，则转到第 2 页。当字段尝试验证时，我收到设置错误，并且反之亦然，从第 2 页到第 1 页。经过研究，问题似乎源于

```
// constructor for validator
$.validator = function( options, form ) {
//  console.log('validator construct');
    this.settings = $.extend( true, {}, $.validator.defaults, options );
//  console.log(this.settings);
    this.currentForm = form;
    this.init();
}; 
```

如果我允许其中任何一个 2 `console.logs`，则不会显示错误。但是，如果我不这样做并在之后抛出一个 console.log，`this.init();`那么错误仍然会显示。

> 未捕获的类型错误：无法读取未定义 jquery.validate.js:894 的属性“设置”

我猜它需要几毫秒才能在`init()`运行之前完成设置变量？有没有更好的方法来防止这种错误而不做`console.log()`？并非所有浏览器都支持`console.log`，所以我不希望出现错误并导致脚本无法完成执行。

*   jQuery 1.8.2
*   jQuery 验证 1.11.0pre
*   jQuery 移动 1.2

# jsp - Java EE 文件上传到服务器：无法部署 web-app

> ID：13296619
> 
> 赞同：0
> 
> 时间：2012-11-08T19:49:09.040
> 
> 标签：jsp, jakarta-ee, tomcat, servlets

我尝试使用 apache.fileupload 将简单的文件上传到服务器。我尝试了很多教程，所有教程都给了我相同的结果：项目无法部署在服务器上。但是我可以部署我的其他项目，所以 Servlet 类肯定有问题。
**这是**：

```
public class UploadServlet extends javax.servlet.http.HttpServlet implements
        javax.servlet.Servlet {
    static final long serialVersionUID = 1L;

    private static final String DATA_DIRECTORY = "data";
    private static final int MAX_MEMORY_SIZE = 1024 * 1024 * 2;
    private static final int MAX_REQUEST_SIZE = 1024 * 1024;

    protected void doPost(HttpServletRequest request,
            HttpServletResponse response) throws ServletException, IOException {
        // Check that we have a file upload request
        boolean isMultipart = ServletFileUpload.isMultipartContent(request);

        if (!isMultipart) {
            return;
        }

        // Create a factory for disk-based file items
        DiskFileItemFactory factory = new DiskFileItemFactory();

        // Sets the size threshold beyond which files are written directly to disk.
        factory.setSizeThreshold(MAX_MEMORY_SIZE);

        // Sets the directory used to temporarily store files that are larger
        // than the configured size threshold. We use temporary directory for java
        factory.setRepository(new File(System.getProperty("java.io.tmpdir")));

        // constructs the folder where uploaded file will be stored
        String uploadFolder = getServletContext().getRealPath("")
                                    + File.separator + DATA_DIRECTORY;

        // Create a new file upload handler
        ServletFileUpload upload = new ServletFileUpload(factory);

        // Set overall request size constraint
        upload.setSizeMax(MAX_REQUEST_SIZE);

        try {
            // Parse the request
            List items = upload.parseRequest(request);
            Iterator iter = items.iterator();
            while (iter.hasNext()) {
                FileItem item = (FileItem) iter.next();

                if (!item.isFormField()) {
                    String fileName = new File(item.getName()).getName();
                    String filePath = uploadFolder + File.separator + fileName;
                    File uploadedFile = new File(filePath);

                    // saves the file to upload directory
                    item.write(uploadedFile);
                }
            }

            // displays done.jsp page after upload finished
            getServletContext().getRequestDispatcher("/done.jsp").forward(request, response);

        } catch (FileUploadException ex) {
            throw new ServletException(ex);
        } catch (Exception ex) {
            throw new ServletException(ex);
        }       
    }
} 
```

这是我的**web.xml**以防万一：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app id="WebApp_ID" version="2.4"
    xmlns="http://java.sun.com/xml/ns/j2ee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd">
    <display-name>CodeWeb</display-name>
    <servlet>
        <description></description>
        <display-name>UploadServlet</display-name>
        <servlet-name>UploadServlet</servlet-name>
        <servlet-class>UploadServlet</servlet-class>
    </servlet>
    <servlet-mapping>
        <servlet-name>UploadServlet</servlet-name>
        <url-pattern>/UploadServlet</url-pattern>
    </servlet-mapping>
    <welcome-file-list>
        <welcome-file>upload.jsp</welcome-file>
        <welcome-file>index.htm</welcome-file>
        <welcome-file>index.jsp</welcome-file>
        <welcome-file>default.html</welcome-file>
        <welcome-file>default.htm</welcome-file>
        <welcome-file>default.jsp</welcome-file>
    </welcome-file-list>
</web-app> 
```

**上传.jsp**：

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
   pageEncoding="ISO-8859-1"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>File Upload</title>
</head>
<body>
<form method="post" action="UploadServlet" enctype="multipart/form-data">
Select file to upload:
<input type="file" name="dataFile" id="fileChooser"/><br/><br/>
<input type="submit" value="Upload" />
</form>
</body>
</html> 
```

**完成.jsp**：

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
   pageEncoding="ISO-8859-1"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Upload Done</title>
</head>
<body>
<h3>Your file has been uploaded!</h3>
</body>
</html> 
```

当我尝试在服务器上部署它时，我得到：

```
ноя 08, 2012 11:48:35 PM org.apache.catalina.core.AprLifecycleListener init
INFO: The APR based Apache Tomcat Native library which allows optimal performance in production environments was not found on the java.library.path: C:\Program Files\Java\jre7\bin;C:\Windows\Sun\Java\bin;C:\Windows\system32;C:\Windows;C:\Program Files (x86)\NVIDIA Corporation\PhysX\Common;C:\Program Files\Common Files\Microsoft Shared\Windows Live;C:\Program Files (x86)\AMD APP\bin\x86_64;C:\Program Files (x86)\AMD APP\bin\x86;C:\Windows\system32;C:\Windows;C:\Windows\System32\Wbem;C:\Windows\System32\WindowsPowerShell\v1.0\;C:\Program Files (x86)\ATI Technologies\ATI.ACE\Core-Static;C:\Program Files (x86)\QuickTime\QTSystem\;C:\Program Files\Java\jdk1.7.0_02\bin;C:\Program Files (x86)\Calibre2\;C:\Program Files\Microsoft\Web Platform Installer\;C:\Program Files (x86)\Microsoft ASP.NET\ASP.NET Web Pages\v1.0\;C:\Program Files (x86)\Windows Kits\8.0\Windows Performance Toolkit\;C:\Program Files\Microsoft SQL Server\110\Tools\Binn\;C:\Program Files (x86)\Microsoft SQL Server\110\Tools\Binn\;C:\Program Files\Microsoft SQL Server\110\DTS\Binn\;C:\Program Files (x86)\Microsoft SQL Server\110\Tools\Binn\ManagementStudio\;C:\Program Files (x86)\Microsoft SQL Server\110\DTS\Binn\;.
ноя 08, 2012 11:48:35 PM org.apache.tomcat.util.digester.SetPropertiesRule begin
WARNING: [SetPropertiesRule]{Server/Service/Engine/Host/Context} Setting property 'source' to 'org.eclipse.jst.jee.server:CodeWeb' did not find a matching property.
ноя 08, 2012 11:48:35 PM org.apache.coyote.AbstractProtocol init
INFO: Initializing ProtocolHandler ["http-bio-8080"]
ноя 08, 2012 11:48:35 PM org.apache.coyote.AbstractProtocol init
INFO: Initializing ProtocolHandler ["ajp-bio-8009"]
ноя 08, 2012 11:48:35 PM org.apache.catalina.startup.Catalina load
INFO: Initialization processed in 1000 ms
ноя 08, 2012 11:48:35 PM org.apache.catalina.core.StandardService startInternal
INFO: Starting service Catalina
ноя 08, 2012 11:48:35 PM org.apache.catalina.core.StandardEngine startInternal
INFO: Starting Servlet Engine: Apache Tomcat/7.0.32
ноя 08, 2012 11:48:36 PM org.apache.catalina.core.ContainerBase startInternal
SEVERE: A child container failed during start
java.util.concurrent.ExecutionException: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost].StandardContext[/CodeWeb]]
    at java.util.concurrent.FutureTask$Sync.innerGet(Unknown Source)
    at java.util.concurrent.FutureTask.get(Unknown Source)
    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:1123)
    at org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:800)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1559)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1549)
    at java.util.concurrent.FutureTask$Sync.innerRun(Unknown Source)
    at java.util.concurrent.FutureTask.run(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)
Caused by: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost].StandardContext[/CodeWeb]]
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:154)
    ... 7 more
Caused by: java.lang.NoClassDefFoundError: org/apache/commons/fileupload/FileUploadException
    at java.lang.Class.getDeclaredFields0(Native Method)
    at java.lang.Class.privateGetDeclaredFields(Unknown Source)
    at java.lang.Class.getDeclaredFields(Unknown Source)
    at org.apache.catalina.util.Introspection.getDeclaredFields(Introspection.java:87)
    at org.apache.catalina.startup.WebAnnotationSet.loadFieldsAnnotation(WebAnnotationSet.java:261)
    at org.apache.catalina.startup.WebAnnotationSet.loadApplicationServletAnnotations(WebAnnotationSet.java:140)
    at org.apache.catalina.startup.WebAnnotationSet.loadApplicationAnnotations(WebAnnotationSet.java:67)
    at org.apache.catalina.startup.ContextConfig.applicationAnnotationsConfig(ContextConfig.java:405)
    at org.apache.catalina.startup.ContextConfig.configureStart(ContextConfig.java:881)
    at org.apache.catalina.startup.ContextConfig.lifecycleEvent(ContextConfig.java:369)
    at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:119)
    at org.apache.catalina.util.LifecycleBase.fireLifecycleEvent(LifecycleBase.java:90)
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5173)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    ... 7 more
Caused by: java.lang.ClassNotFoundException: org.apache.commons.fileupload.FileUploadException
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1714)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1559)
    ... 21 more

ноя 08, 2012 11:48:36 PM org.apache.catalina.core.ContainerBase startInternal
SEVERE: A child container failed during start
java.util.concurrent.ExecutionException: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost]]
    at java.util.concurrent.FutureTask$Sync.innerGet(Unknown Source)
    at java.util.concurrent.FutureTask.get(Unknown Source)
    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:1123)
    at org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:302)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.StandardService.startInternal(StandardService.java:443)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:732)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.startup.Catalina.start(Catalina.java:684)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:322)
    at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:451)
Caused by: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost]]
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:154)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1559)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1549)
    at java.util.concurrent.FutureTask$Sync.innerRun(Unknown Source)
    at java.util.concurrent.FutureTask.run(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)
Caused by: org.apache.catalina.LifecycleException: A child container failed during start
    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:1131)
    at org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:800)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    ... 7 more

ноя 08, 2012 11:48:36 PM org.apache.catalina.startup.Catalina start
SEVERE: Catalina.start: 
org.apache.catalina.LifecycleException: Failed to start component [StandardServer[8005]]
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:154)
    at org.apache.catalina.startup.Catalina.start(Catalina.java:684)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:322)
    at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:451)
Caused by: org.apache.catalina.LifecycleException: Failed to start component [StandardService[Catalina]]
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:154)
    at org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:732)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    ... 7 more
Caused by: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina]]
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:154)
    at org.apache.catalina.core.StandardService.startInternal(StandardService.java:443)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    ... 9 more
Caused by: org.apache.catalina.LifecycleException: A child container failed during start
    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:1131)
    at org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:302)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    ... 11 more

ноя 08, 2012 11:48:36 PM org.apache.catalina.startup.Catalina start
INFO: Server startup in 1092 ms 
```

我究竟做错了什么？请帮帮我！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T19:57:04.167

你应该在应用程序的库中有 commons-fileupload.jar

# javascript - 如何用自定义警报框替换默认警报框

> ID：13296631
> 
> 赞同：1
> 
> 时间：2012-11-08T19:49:52.933
> 
> 标签：javascript, alert

我尝试使用 html 表格进行一项考试，该表格会找到不正确的答案，并会使用警告框写出正确的答案

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T19:59:08.037

您可以使用其中之一........

[http://www.trentrichardson.com/Impromptu/index.php](http://www.trentrichardson.com/Impromptu/index.php)

[http://www.jacklmoore.com/colorbox](http://www.jacklmoore.com/colorbox)

[http://davidwalsh.name/facebook-lightbox](http://davidwalsh.name/facebook-lightbox)

# html - 支持马尔代夫语言

> ID：13296636
> 
> 赞同：4
> 
> 时间：2012-11-08T19:50:07.050
> 
> 标签：html, lang

我正在构建一个支持 20 种语言的测验。一种是[**马尔代夫**](https://en.wikipedia.org/wiki/Maldivian_language)。我怎么支持这个。现在我有一堆正方形。我想知道： - 我应该使用什么字体。- 是否有英语-马尔代夫语的在线翻译器？（谷歌翻译不支持这个）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T20:19:06.560

Maldivian 使用 Thaana 脚本，该脚本在字体中并未得到广泛支持。有两种基本策略：指定一个`font-family`规则，列出已知包含 Thaana 字母的字体，希望用户至少安装其中一个，或者使用带有`@font-family`. 在这种情况下，后者听起来更现实。为此，您需要一种可以合法使用的字体。

支持 Thaana 的免费字体包括[MPH 2B Damase](http://www.wazu.jp/gallery/views/View_MPH2BDamase.html)和[TITUS](http://titus.uni-frankfurt.de/indexe.htm?/unicode/unitest2.htm) Cyber​​bit Basic。

有关一般性，请参阅我[在 HTML 中使用特殊字符的指南](http://www.cs.tut.fi/~jkorpela/html/characters.html)。

看到像马尔代夫这样的小语言的自动翻译器，我会感到非常惊讶，我也会对看到自动翻译器在翻译网站时产生不错的结果感到惊讶。

# java - Web services not available in Eclipse WTP

> ID：13296640
> 
> 赞同：1
> 
> 时间：2012-11-08T19:50:13.323
> 
> 标签：java, eclipse, web-services, client, eclipse-wtp

I need to develop a new web java service client. However, the "web services" does not appear. I expected something like this : [http://gerardnico.com/wiki/ide/eclipse/eclipse_how_to_consume_a_webservice_with_wtp](http://gerardnico.com/wiki/ide/eclipse/eclipse_how_to_consume_a_webservice_with_wtp)

Desperate, i have alse installed separately the WTP plugin. That does not resolve the issue. :-(

Configuration : Windows XP Eclipse 4.2.1 Juno (http://www.eclipse.org/downloads/packages/eclipse-ide-java-ee-developers/junosr1)

I would be very grateful for any help. :-)

Mario

# c++ - OpenCV and Unsharp Masking Like Adobe Photoshop

> ID：13296645
> 
> 赞同：3
> 
> 时间：2012-11-08T19:50:39.903
> 
> 标签：c++, opencv, image-processing, reverse-engineering, photoshop

I am trying to implement unsharp masking like it's done in Adobe Photoshop. I gathered a lot of information on the interent but I'm not sure if I'm missing something. Here's the code:

```
void unsharpMask( cv::Mat* img, double amount, double radius, double threshold ) {

// create blurred img
cv::Mat img32F, imgBlur32F, imgHighContrast32F, imgDiff32F, unsharpMas32F, colDelta32F, compRes, compRes32F, prod;
double r = 1.5;
img->convertTo( img32F, CV_32F );
cv::GaussianBlur( img32F, imgBlur32F, cv::Size(0,0), radius );
cv::subtract( img32F, imgBlur32F, unsharpMas32F );
// increase contrast( original, amount percent ) 
imgHighContrast32F = img32F * amount / 100.0f;
cv::subtract( imgHighContrast32F, img32F, imgDiff32F );
unsharpMas32F /= 255.0f;
cv::multiply( unsharpMas32F, imgDiff32F, colDelta32F );
cv::compare( cv::abs( colDelta32F ), threshold, compRes, cv::CMP_GT );
compRes.convertTo( compRes32F, CV_32F );

cv::multiply( compRes32F, colDelta32F, prod );
cv::add( img32F, prod, img32F );

img32F.convertTo( *img, CV_8U );
} 
```

At the moment I am testing with a grayscale image. If i try the exact same parameters in Photoshop I get much better result. My own code leads to noisy images. What am I doing wrong.

The 2nd question is, how i can apply unsharp masking on RGB images? Do I have to unsharp mask each of the 3 channels or would it be better in another color space? How are these things done in Photoshop?

Thanks for your help!

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-04-27T11:28:36.023

我也在尝试复制 Photoshop 的 Unsharp Mask。让我们暂时忽略阈值。

我将向您展示如何使用其高斯模糊来复制 Photoshop 的 Unsharp Mask。

假设 O 是原始图像层。

创建一个新层 GB，它是应用在 O 上的高斯模糊。
创建一个新层，它是 O - GB（使用应用图像）。
通过反转 GB - invGB 创建一个新层。
使用 Image Apply 创建一个 O + invGB 的新层。
创建一个新层，它是前一层的反转，即 inv(O + invGB)。
创建一个新层，即 O + (O - GB) - inv(O + invGB)。

当您在 Photoshop 中执行此操作时，您将获得 Unsharp Mask 的完美再现。

如果您回忆一下 inv(L) = 1 - L 进行数学运算，您会得到 Unsharp Mask 是 USM(O) = 3O - 2B。

然而，当我直接在 MATLAB 中执行此操作时，我没有得到 Photoshop 的结果。

希望有人会知道确切的数学。

## 更新

好的，
我想通了。
在 Photoshop 中 USM(O) = O + (2 * (Amount / 100) * (O - GB))
其中 GB 是 O 的高斯模糊版本。

然而，为了复制 Photoshop 的结果，您必须执行上述步骤并将每个步骤的结果剪辑到 [0, 1] 中，就像在 Photoshop 中所做的那样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-27T13:13:09.817

# According to docs:

> C++: void GaussianBlur(InputArray src, OutputArray dst, Size ksize, double sigmaX, double sigmaY=0, int borderType=BORDER_DEFAULT )

4th parameter is not "radius" it is "sigma" - gaussian kernel standard deviation. Radius is rather "ksize". Anyway Photoshop is not open source, hence we can not be sure they use the same way as OpenCV to calculate radius from sigma.

# Channels

Yes you should apply sharp to any or to all channels, it depends on your purpose. Sure you can use any space: if you want sharp only brightness-component and don't want to increase color noise you can covert it to HSL or Lab-space and sharp L-channel only (Photoshop has all this options too).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-05-08T21:12:27.660

作为对@Royi 的回应，2x 乘数是在此公式中假设没有钳位的结果：

```
USM(Original) = Original + Amount / 100 * ((Original - GB) - (1 - (Original + (1 - GB)))) 
```

不正确地忽略钳位会减少到：

```
USM(Original) = Original + 2 * Amount / 100 * (Original - GB) 
```

但是，正如您还指出的那样，`(Original - GB)`并且`(Original + inv(GB))`被限制为 [0, 1]：

```
USM(Original) = Original + Amount / 100 *
   (Max(0, Min(1, Original - GB)) - (1 - (Max(0, Min(1, Original + (1 - GB)))))) 
```

这正确地减少为：

```
USM(Original) = Original + Amount / 100 * (Original - GB) 
```

以下是说明原因的示例：

[https://legacy.imagemagick.org/discourse-server/viewtopic.php?p=133597#p133597](https://legacy.imagemagick.org/discourse-server/viewtopic.php?p=133597#p133597)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2016-07-04T02:55:20.483

这是我所做的代码。我正在使用此代码来实现 Unsharp Mask，它对我来说效果很好。希望它对你有用。

```
void USM(cv::Mat &O, int d, int amp, int threshold)
{
    cv::Mat GB;
    cv::Mat O_GB;
    cv::subtract(O, GB, O_GB);

    cv::Mat invGB = cv::Scalar(255) - GB;

    cv::add(O, invGB, invGB);

    invGB = cv::Scalar(255) - invGB;

    for (int i = 0; i < O.rows; i++)
    {
        for (int j = 0; j < O.cols; j++)
        {
            unsigned char o_rgb = O.at<unsigned char>(i, j);
            unsigned char d_rgb = O_GB.at<unsigned char>(i, j);
            unsigned char inv_rgb = invGB.at<unsigned char>(i, j);

            int newVal = o_rgb;
            if (d_rgb >= threshold)
            {
                newVal = o_rgb + (d_rgb - inv_rgb) * amp;
                if (newVal < 0)      newVal = 0;
                if (newVal > 255)    newVal = 255;
            }

            O.at<unsigned char>(i, j) = unsigned char(newVal);
        }
    }

} 
```

# c99 - MAX INT in C99?

> ID：13296646
> 
> 赞同：1
> 
> 时间：2012-11-08T19:50:43.987
> 
> 标签：c99

I'm going crazy in here, what is the "command" for the max int value? I want to put it in a variable but I dont want to put the specific number, I remember there is a Saved word for it.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T20:03:39.567

宏`INT_MAX`定义在`<limits.h>`. （它存在于 1989 年的所有 C 标准版本中。）

# google-chrome - 通过批处理文件在弹出窗口中在 Google chrome 上启动网站

> ID：13296647
> 
> 赞同：2
> 
> 时间：2012-11-08T19:50:45.570
> 
> 标签：google-chrome, batch-file, popup

我试图创建一个简单的批处理文件来在 Google Chrome 中打开 Grooveshark 播放列表，但我对播放列表在新选项卡中打开而不是在弹出窗口中的事实不满意。

我尝试了很多方法，但找不到是否有可能通过批处理文件在 Chrome 中打开新的弹出窗口。

我也在考虑在 .exe 中用 Visual Basic 之类的东西创建它，但我是那里的初学者，所以我不知道该怎么做。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-10T18:27:24.760

*凹槽鲨.cmd*

```
@echo off
start "Chrome" chrome --new-window www.grooveshark.com 
```

[http://peter.sh/experiments/chromium-command-line-switches/](http://peter.sh/experiments/chromium-command-line-switches/)

# ios - 如何将内存中的 NSDictionary 上传到 Dropbox、IOS

> ID：13296648
> 
> 赞同：1
> 
> 时间：2012-11-08T19:50:46.707
> 
> 标签：ios, memory, file-upload, nsdictionary, dropbox

我有一个要作为 .plist 上传到保管箱文件夹的 xml 字符串。

目前我创建一个 NSDictionary 并创建一个临时文件夹，我将字典作为 plist 写入该临时文件夹，并将该临时文件夹中的 .plist 上传到保管箱。

我猜这不是一个好的编程解决方案；

这工作正常

```
if([title isEqualToString:@"Upload to Dropbox"])
    {

        //pass string in memory to nsdictionary
        NSData * data = [_uploadPlistString dataUsingEncoding:NSUTF8StringEncoding];
        NSString *errorDesc = nil;
        NSPropertyListFormat format;
        NSDictionary *uploadFile= (NSDictionary*)[NSPropertyListSerialization
                                         propertyListFromData:data
                                         mutabilityOption:NSPropertyListMutableContainersAndLeaves
                                         format:&format
                                         errorDescription:&errorDesc];

        //create a temp folder
        NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
        NSString *documentsDirectory = [paths objectAtIndex:0];
        NSString *dataPath = [documentsDirectory stringByAppendingPathComponent:@"temp"];
        NSLog(@"documents datapath: %@",dataPath);
        //check if folder exist
        NSError *error = nil;
        if (![[NSFileManager defaultManager] fileExistsAtPath:dataPath])
            [[NSFileManager defaultManager] createDirectoryAtPath:dataPath withIntermediateDirectories:NO attributes:nil error:&error]; //Create folder

        //write dictionary to plist
        NSString *pathTemp = [dataPath stringByAppendingPathComponent:@"agenda.plist"];
        // write plist to disk
        [uploadFile writeToFile:pathTemp atomically:YES];

        //get last created file name from singleton
        SingletonClass *sharedInstance=[SingletonClass sharedInstance];
        NSString *destDirectory= sharedInstance.lastCreatedFolderName;

        //set file name for dropbox
        NSString *filename = @"agenda.plist";
        [[self restClient] uploadFile:filename toPath:destDirectory
                        withParentRev:nil fromPath:pathTemp];

    } 
```

**但是如何将内存中的 NSDictionary 直接上传到 Dropbox？**

无需将其写入捆绑软件或类似的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T20:21:28.270

Dropbox SDK 的公共 API 仅支持直接从文件上传。

但是，由于 SDK 是开源的，您可以轻松地对其进行扩展。

主要上传发生在

```
- (void)uploadFile:(NSString*)filename toPath:(NSString*)path fromPath:(NSString *)sourcePath
params:(NSDictionary *)params 
```

在 DBRESTClient.m 中。

您可以向 DBRESTClient 添加一个类别，并为上传添加一个类似的方法，该方法采用 NSData 而不是文件路径。

您可以复制他们的大部分实现，但您可以使用 NSData 代替文件名。更改 dropbox 上文件名生成的工作方式，并使用 NSData 而不是文件来实例化 NSInputStream。

要从字典中获取 NSData，您可以使用 NSKeyedArchiver。

# javascript - 如何防止在 iPad 或 iPhone 上单击和拖动 Safari 的视口？

> ID：13296650
> 
> 赞同：3
> 
> 时间：2012-11-08T19:50:51.430
> 
> 标签：javascript, jquery, iphone, ipad, safari

我有一个更大的问题是没有注册刷卡。我相信它是因为 SDK 假设您想要单击拖动 Safari 的整个视口，而不是其中可能包含的任何 div。

如何防止这种默认值？

![屏幕](../Images/9135a84a9f3abf21c1b13aba7433ff04.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T19:58:02.923

我相信您想监听该[`touchmove`](http://developer.apple.com/library/iOS/#documentation/AppleApplications/Reference/SafariWebContent/HandlingEvents/HandlingEvents.html)事件并`event.preventDefault()`在其中调用您不想为视口移动做出贡献的任何元素。

jQuery 示例：

```
$('.interestingElements').on('touchmove', function(event) {
  event.preventDefault();
}); 
```

`touchmove`在移动 Safari 中，涉及单次触摸的默认行为是滑动视口。

如果涉及两次触摸，则默认行为是触发`gesture`事件。阻止 touchmove 的默认设置会阻止手势事件触发。您可以使用该`changedTouches`数组找出此 touchmove 事件涉及多少次触摸。祝你好运！

# sql - SQL 多列索引

> ID：13296654
> 
> 赞同：0
> 
> 时间：2012-11-08T19:51:18.290
> 
> 标签：sql, sql-server-2005, sql-server-2008-r2

我正在使用 SQL Server 2012。索引单个非聚集非键列和放置多个列然后索引之间有什么区别？

如果我有桌子

> *   员工ID
> *   部门编号
> *   位置 ID
> *   姓名
> *   地址

如果我在

> *   员工ID
> *   部门编号

而不仅仅是

> *   员工ID

有什么不同？我创建了`EmployeeID, DepartmentID`索引，当我使用 搜索任何员工时`DepartmentID = X`，SQL Management Studio 实际执行计划建议我创建一个索引，`DepartmentID`即使表上有一个非聚集索引`EmployeeID, DeparmentID`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T19:55:36.893

一个区别是列顺序。

如果您有一个索引`(EmployeeID, DepartmentID)`并且您的查询仅过滤器`DepartmentID`，则不会使用该索引。索引从左到右工作。

另一个考虑因素是空间和性能。`UPDATE`索引越宽，执行、`DELETE`或时刷新的时间就越长`INSERT`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T19:56:49.260

在索引中，顺序很重要。您希望首先拥有**最大**的子集，然后是较小的子集。因此，您可能会寻找属于某个部门的员工，而不是寻找特定员工的部门。换句话说，每个部门的员工数量可能多于每个员工的部门数量——或者至少，搜索的结果可能首先是按部门分组的。

因此，如果您将单个索引从 更改为`EmployeeID+DepartmentID`，`DepartmentID+EmployeeID`您可能会看到该建议消失。

更多阅读：[http ://weblogs.sqlteam.com/joew/archive/2008/02/13/60510.aspx](http://weblogs.sqlteam.com/joew/archive/2008/02/13/60510.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T19:56:57.470

您可以单独使用多列索引的前导部分进行搜索，但不能使用尾随部分。

如果您在 EmployeeID、DepartmentID 上有一个索引，则可以使用它来按 EmployeeID 搜索，或者同时搜索 EmployeeID 和 DepartmentID，但如果不指定 EmployeeID，它就不能用于搜索 DepartmentID。无论索引是否聚集，这都是相同的。

如果要单独搜索 DepartmentID 或 EmployeeID，请创建两个单独的索引。

# java - 我应该在哪里关闭我的activemq连接（java，jersey）

> ID：13296655
> 
> 赞同：3
> 
> 时间：2012-11-08T19:51:27.247
> 
> 标签：java, jersey, activemq

我有一个用 @Path 注释的类，在这个类中我有一个处理 PUT 请求的方法。在此方法中，每次调用此方法时，我都使用 ActiveMQ 将消息发布到 JMS 主题。一切正常。

但现在我想添加一些清理代码（主要是关闭 ActiveMQ 连接）。我怎样才能做到这一点？

```
@PUT
@Consumes(MediaType.TEXT_PLAIN)
public void putString(String myString) throws JMSException {  
   if (txtmessage != null && producer != null ){
           txtmessage.clearBody();
           txtmessage.setText(myString);
           producer.send(txtmessage);
         }    
      } 
```

所有的初始化都是在一个静态块中完成的。

因此，只要服务器正在侦听，我希望连接保持正常，但我想在服务器关闭时显式关闭它。球衣有没有办法让你处理近距离事件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T06:15:22.027

实施

ServletContextListener：http: [//tomcat.apache.org/tomcat-7.0-doc/servletapi/javax/servlet/ServletContextListener.html](http://tomcat.apache.org/tomcat-7.0-doc/servletapi/javax/servlet/ServletContextListener.html)

```
import javax.jms.Connection;
import javax.jms.Destination;
import javax.jms.JMSException;
import javax.jms.MessageProducer;
import javax.jms.Session;
import javax.servlet.ServletContext;
import javax.servlet.ServletContextEvent;
import javax.servlet.ServletContextListener;

import org.apache.activemq.ActiveMQConnectionFactory;
import org.apache.log4j.Logger;

public class MyContextListener implements ServletContextListener {
    public final static String ACTIVE_MQ_SESSION = "ActiveMQSession";
    public final static String ACTIVE_MQ_PRODUCER = "ActiveMQProducer";

    Logger logger = Logger.getLogger(this.getClass());
    private static final int ackMode = Session.AUTO_ACKNOWLEDGE;
    private static final boolean transacted = false;

    private static final String brokerUrl = "vm://localhost:61616";

    private Connection connection;
    private Session session;
    private MessageProducer producer;

    @Override
    public void contextDestroyed(ServletContextEvent sce) {
        try {
            this.producer.close();
            this.session.close();
            this.connection.close();
        } catch (JMSException e) {
            logger.warn("tearDown()", e);
        }

    }

    @Override
    public void contextInitialized(ServletContextEvent sce) {
        ActiveMQConnectionFactory connectionFactory = new ActiveMQConnectionFactory(
                brokerUrl);

        try {
            connection = connectionFactory.createConnection();
            connection.start();
            session = connection.createSession(transacted, ackMode);
            Destination destination = session.createQueue("queue");
            producer = session.createProducer(destination);

            ServletContext sc = sce.getServletContext();
            sc.setAttribute(ACTIVE_MQ_SESSION, session);
            sc.setAttribute(ACTIVE_MQ_PRODUCER, producer);
        } catch (JMSException e) {
            logger.warn("setup() failed to setup connection brokerUrl="
                    + brokerUrl);
        }
    }

} 
```

在 web.xml 中注册监听器：

```
<web-app...>
    <listener>
        <listener-class>package.MyContextListener</listener-class>
    </listener>
</web-app> 
```

然后是 servlet（从您使用生产者和会话的地方）：

```
import javax.jms.JMSException;
import javax.jms.MessageProducer;
import javax.jms.Session;
import javax.jms.TextMessage;
import javax.servlet.http.HttpServlet;
import javax.ws.rs.Consumes;
import javax.ws.rs.PUT;
import javax.ws.rs.core.MediaType;

public class MessageServlet extends HttpServlet {

    @PUT
    @Consumes(MediaType.TEXT_PLAIN)
    public void putString(String myString) throws JMSException {
        MessageProducer producer = (MessageProducer) getServletContext()
                .getAttribute(MyContextListener.ACTIVE_MQ_PRODUCER);

        Session session = (Session) getServletContext().getAttribute(
                MyContextListener.ACTIVE_MQ_SESSION);
        TextMessage txtmessage = session.createTextMessage();
        if (txtmessage != null && producer != null) {
            txtmessage.clearBody();
            txtmessage.setText(myString);
            producer.send(txtmessage);
        }
    }
} 
```

# ruby-on-rails - 为什么“提交”按钮显示在前面 ?

> ID：13296663
> 
> 赞同：1
> 
> 时间：2012-11-08T19:51:42.613
> 
> 标签：ruby-on-rails, forms, dom, views

这有点令人惊讶。尽管在我看来我的提交标签应该出现在表单中，但它显示在表单之前。html 源代码对我来说看起来不错，但结果显示和 DOM 是错误的。不知道什么会洗牌。提交按钮显示在表单之前。

你能看到什么吗？

查看文件：

```
<%= content_tag :table do %>
  <%= content_tag :thead do %>
    <% 5.times do |q| %>
      <%= content_tag :th, "1" %>
    <% end %>
  <% end %>
  <%= content_tag :tbody do %>
    <%= form_tag program_participant_round_survey_path(
        program_id: @program.id, participant_id: @participant.id, round_id: @current_round.id), :method => 'put'  do %>
      <%= render partial: 'value', collection: @values  %>
      <%= submit_tag "Save" %>
    <% end %>
  <% end %>
<% end %> 
```

html的关键部分：

```
...
<tr>
  <td>
    Scaling Up vs. Scaling Out
</td>
    <td>
      <input id="values__q0" name="values[]" type="radio" value="q0" />
</td>    <td>
      <input id="values__q1" name="values[]" type="radio" value="q1" />
</td>    <td>
      <input id="values__q2" name="values[]" type="radio" value="q2" />
</td>    <td>
      <input id="values__q3" name="values[]" type="radio" value="q3" />
</td></tr>
      <input name="commit" type="submit" value="Save" />
</form></tbody></table>
  </div>
</div>
</body>
</html> 
```

这是页面在浏览器中的样子：![浏览器中的图片](../Images/6ebca3b3fa52f288742fdf1010bfbd3c.png)

这是 DOM 的样子：![在此处输入图像描述](../Images/be19b8250fa9daa3fc51d3562f8bf677.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T20:00:28.360

这就是浏览器处理表格中不属于那里的元素的方式——它假定它们是标题并将它们移动到表格之前。

在生成的代码中，您有一个`<input type="submit">`内部表格但没有内部 a 。`<tr>`

如果将 in 包裹起来`<input>`，`<tr><td>`它将不再移动到桌子之前。请注意，不建议使用表格进行布局。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T19:57:03.273

我不知道发生了什么的确切原因，但我个人会这样做：

```
<%= form_tag program_participant_round_survey_path(
        program_id: @program.id, participant_id: @participant.id, round_id: @current_round.id), :method => 'put'  do %>
  <%= content_tag :table do %>
    <%= content_tag :thead do %>
      <% 5.times do |q| %>
        <%= content_tag :th, "1" %>
      <% end %>
    <% end %>
    <%= content_tag :tbody do %>        
      <%= render partial: 'value', collection: @values  %> 
    <% end %>
  <% end %>
  <%= submit_tag "Save" %>
<% end %> 
```

# php - 无法存储会话变量

> ID：13296664
> 
> 赞同：0
> 
> 时间：2012-11-08T19:51:45.577
> 
> 标签：php, mysql

我有一个登录脚本，当前存储 2 个变量一个有效变量和一个用户名变量。我现在正在尝试添加一个名称变量，因此我更改了 MySQL 查询以从数据库中获取名称，并尝试将名称存储在会话变量中，但由于某种原因它只是不存储它。可能最好只是向您展示脚本，我学习 PHP 仅 2 个月，非常感谢您的帮助。

```
<?php
ob_start(); // Start output buffering

session_start(); //must call session_start before using any $_SESSION variables3
$_SESSION['username'] = $username;

function validateUser($username)
{

    session_regenerate_id (); //this is a security measure
    $_SESSION['valid'] = 1;
    $_SESSION['username'] = $username;
    $_SESSION['name'] = $userData['name'];
}

      $username = isset($_POST['username'])?$_POST['username']:'';
     $password = isset($_POST['password'])?$_POST['password']:'';

//connect to the database here

$hostname_Takeaway = "localhost";
$database_Takeaway = "diningtime";
$username_Takeaway = "root";
$password_Takeaway = "root";
$Takeaway = mysql_pconnect($hostname_Takeaway, $username_Takeaway, $password_Takeaway) or trigger_error(mysql_error(),E_USER_ERROR); 
mysql_select_db($database_Takeaway, $Takeaway);

$username = mysql_real_escape_string($username);

$query = "SELECT name, password, salt FROM admin_users WHERE username = '$username';";

$result = mysql_query($query) or die(mysql_error());

if(mysql_num_rows($result) < 1) //no such user exists
{
    header('Location: http://localhost/diningtime/admin-home.php?login=fail');

    die();
}
$userData = mysql_fetch_array($result, MYSQL_ASSOC);
$hash = hash('sha256', $userData['salt'] . hash('sha256', $password) );
if($hash != $userData['password']) //incorrect password

{
    header('Location: http://localhost/diningtime/admin-home.php?login=fail');

    die();
}
else
{

   validateUser($username); //sets the session data for this user
}
//redirect to another page or display "login success" message
header('Location: http://localhost/diningtime/main');
die();

//redirect to another page or display "login success" message

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T20:05:36.847

您的`validateUser()`函数在范围内没有`$userData`变量，因此您将 NULL 分配给 $_SESSION['name']。

要么使 $userData 成为全局变量，因此它在函数范围内可见，或者将其作为参数传递：

```
function validateUser($user, $userData) {
                             ^^^^^^^^^-- pass as arg
   global $userData;
   ^^^^^^^^^^^^^^^^^--- bring var in-scope
   ...
   $_SESSION['name'] = $GLOBALS['userData']['name'];
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^--- refer to global scope
} 
```

这三个选项中的任何一个都可以解决问题（只是不要同时做这三个）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T20:06:22.767

您的**validateUser**函数没有从 $userData 数组中获取值，您需要在其中添加另一个参数，例如

```
function validateUser($username, $name) 
```

然后从您的代码中传递这些值，或者您可以在此函数中移动 mysql 身份验证，然后它将起作用。通常，函数无法识别您在该函数之外定义的任何变量。

PS第五行应该是什么

```
$_SESSION['username'] = $username; 
```

做？我怀疑它在那个地方完全没用:-)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T20:06:53.947

这里有很多错误。

```
<?php
ob_start(); // Start output buffering

session_start(); //must call session_start before using any $_SESSION variables3
$_SESSION['username'] = $username; 
```

从哪里来`$username`？

```
 $username = isset($_POST['username'])?$_POST['username']:'';
 $password = isset($_POST['password'])?$_POST['password']:''; 
```

现在您正在检查它的存在。

```
 $Takeaway = mysql_pconnect($hostname_Takeaway, $username_Takeaway, $password_Takeaway) or trigger_error(mysql_error(),E_USER_ERROR); 
mysql_select_db($database_Takeaway, $Takeaway); 
```

`mysql_*`弃用过程已经开始。*与您的问题无关，但值得一提*

然后来了`validateUser($username); //sets the session data for this user`

现在您正在调用该函数。让我们看一下函数。

```
function validateUser($username)
{

    session_regenerate_id (); //this is a security measure
    $_SESSION['valid'] = 1;
    $_SESSION['username'] = $username;
    $_SESSION['name'] = $userData['name'];
} 
```

`$username`你作为参数传递，但`$userData['name']`从哪里来？（有关范围，请参阅 MarcBs 解决方案）

所以你有很多事情要弄清楚。

# asp.net-mvc - ASP.NET MVC4 WebApi 参数为空 - 仅在一台机器上

> ID：13296675
> 
> 赞同：4
> 
> 时间：2012-11-08T19:52:17.130
> 
> 标签：asp.net-mvc, asp.net-mvc-4, asp.net-web-api

我有 MVC4 WebApi 项目，该项目在我的开发机器上运行良好，但在已部署的服务器上运行异常。两个盒子都是带有 IIS 7.5 的 Server 2008

我有一个带有单个 Post 方法的控制器，该方法将复杂类型作为参数。我强行使用`XmlMediaType`格式化程序等`XmlSerialization`， `HttpConfiguration.Formatters.XmlFormatter.UseXmlSerializer = true`复杂类型是“老派” `XmlSerializable`。

对于相同的请求，我的开发框正确地将正文中的 XML 反序列化为复杂类型的实例，并且从该`Post`方法返回给客户端的结果是正确的。在另一台机器上，参数实例`null`到达`Post`方法中。

我必须重申，这是相同的代码和相同的请求（主机名除外）。这让我认为机器之间的环境必须有所不同。不幸的是，经过大量搜索，我仍然不知道那可能是什么。

我还应该指出，如果我修改我的`Post`方法以采用字符串参数，然后自己在内部进行反序列化，那么两个盒子上的行为是相同且正确的。

我还实现了一个自定义序列化程序（`XmlFormatter.SetSerializer`），并且开发框再次工作；另一个产生一个`null`参数。有趣的是，在这种情况下，当我在反序列化之前记录请求的主体时，我在两台机器上看到了相同的 XML。只是一个盒子在通往方法的途中将反序列化的值丢弃在某处`Post`。

任何人都可以就如何继续解决这种奇怪的行为提供一些建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T21:54:19.447

检查控制器上的 ModelState。如果反序列化由于任何原因失败，它会被记录为 ModelState 异常。它至少可以帮助你弄清楚发生了什么。

# json - 使用 Jersey 进行 JSON 设计和查询

> ID：13296680
> 
> 赞同：0
> 
> 时间：2012-11-08T19:52:33.507
> 
> 标签：json, curl, jersey, jackson

我正在尝试设计一个可以与 Jersey 和 Jackson 一起使用的 JSON 对象。

我对 JSON / Restful 编程相当陌生，所以我想知道以下是否可行。

```
{
"name": "myservice",

"orders": [
    {
        "name": "iphone",
        "description": "iPhone 5",
        "providers": [
            {
                "name": "a",
                "description": "AT&T",
                "pricing": ["$40", "$70", "$120"]
            },
            {
                "name": "b",
                "description": "Verizon",
                "pricing": ["$45", "$60", "$85"]
            }
        ]
    },
    {
        "name": "galaxy3",
        "description": "Samsung Galaxy 3",
        "providers": [
            {
                "name": "a",
                "description": "AT&T",
                 "pricing": ["$45", "$60", "$85"]

            }
        ]
    }
]
} 
```

获取有关 iPhone 的 Verizon 提供商的所有信息：

```
 curl GET -H'Content-Type: application/json' https://mydomain/myservice/iphone/b 
```

会返回：

```
{
   "name": "b",
   "description": "Verizon",
   "pricing": ["$45", "$60", "$85"]
} 
```

获取 iPhone 的 AT&T 提供商的定价列表：

```
curl GET -H'Content-Type: application/json' https://mydomain/myservice/iphone/a?pricing 
```

将返回：

```
{

   ["$40", "$70", "$120"]

} 
```

任何示例或反馈将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T23:05:58.593

这是关于定义 REST API 的一个很好的讨论：[REST Complex/Composite/Nested Resources](https://stackoverflow.com/questions/7104578/rest-complex-composite-nested-resources)

这是我要在您的 json 中更改的内容： 1\. 订单 -> 订单，因为资源被声明为单数名词 2\. 提供者 -> 提供者，因为相同

如果我知道我需要得到什么（使用复合资源），这就是我从客户那里打电话的方式：

1.  `https://<mydomain>/myservice/order/iphone/provider/b`
2.  `https://<mydomain>/myservice/order/iphone/provider/a/pricing`

如果您需要搜索订单，您可以定义如下请求：

1.  `https://<mydomain>/myservice/order?name=iphone`-> 它将返回“订单”列表中的第一个元素

假设“名称”是各个资源（订单和提供者）的关键

# python - Python excel 集成，#VALUE 错误

> ID：13296681
> 
> 赞同：3
> 
> 时间：2012-11-08T19:52:36.190
> 
> 标签：python, excel, xlwt

我有一个集成了 python 和 Excel 的工作程序（感谢 xlwt）。我正在读取 csv 文件并复制到 excel 中。在执行此操作时，我还使用 xlwt 中的公式模块包含了一些公式。具体来说，代码是

```
ws_xlwt.write(3,3, Formula("MMULT(MINVERSE(C11:D12),"+col_char+"2:"+col_char+"3)"), style) 
```

col_char 是循环中生成的 ASCII 码。数组 (C11:D12) 包含使用以下代码生成的数据：

```
ws_xlwt.write(10,2, Formula("SUMPRODUCT($C$36:$C$161,$C$36:$C$161)"), style) 
```

当程序运行时，它会将公式正确地放入特定的单元格中。但单元格显示错误“#VALUE”而不是结果。有趣的一点是，当我打开 excel 文件时，双击这个特定的单元格进行编辑，然后在不更改任何内容的情况下按 Enter，结果就会显示出来。我不确定这是 python 集成问题还是 Excel 问题。

```
OS - Windows 7 64-bit
Python - 2.7 32-bit 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T20:15:00.550

我最好的猜测是，这是由于对公式的评估。我不相信`xlwt`在插入公式时会对其进行评估，这意味着您会收到值错误，因为在评估函数`SUMPRODUCT`时结果不存在。`MMULT`当您双击并按 Enter 时它起作用的原因是 Excel 现在正在重新计算所有内容，从而为您提供有效的结果。

# mongoose - 检查 Mongoose DB 是否为空

> ID：13296684
> 
> 赞同：3
> 
> 时间：2012-11-08T19:52:46.473
> 
> 标签：mongoose

我知道我无法使用 find 方法查询数据库并检查它是否返回一个空数组，但是 Mongoose 中是否有任何特定方法来检查数据库中是否没有对象？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T20:02:02.073

在 mongo shell 中，你可以这样做：

```
 if (db.getCollectionNames().length === 0) {
     // It's empty
     ...
 } 
```

每种语言的驱动程序都应该有等效的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-10-02T10:52:22.607

你应该考虑到你正在处理一个异步调用，所以你应该使用这个：

```
collection.countDocuments(function (err, count) {
    if (!err && count === 0) {
        // It's empty
    }
}); 
```

# sas - SAS替换重复值

> ID：13296685
> 
> 赞同：0
> 
> 时间：2012-11-08T19:52:47.433
> 
> 标签：sas

我有一个具有重复值 v1 的数据集。我希望将 v2 值替换为 v2 的第一个值。

```
Data one;  
v1   v2  
1    20  
1    23  
1    21  
2    36  
3    51  
4    44  
4    20 
```

我希望将 data=one 更改为：

```
Data one;  
v1    v2  
1     20  
1     20  
1     20  
2     36  
3     51    
4     44    
4     44 
```

我需要使用什么程序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T20:00:53.097

数据步骤将执行（假设数据已经按照您想要的方式排序）：

```
data one;
   set one;
      by v1;
   if first.v1 
      then keeper=v2;
      else v2=keeper;
   retain keeper;
   drop keeper;
run; 
```

# .htaccess - .htaccess 查询重写规则

> ID：13296689
> 
> 赞同：1
> 
> 时间：2012-11-08T19:52:56.443
> 
> 标签：.htaccess, mod-rewrite, rewrite, apache

我试图在客户加载网站时做到这一点：

```
http://www.example.com/docs/example 
```

要实际加载地址：

```
http://www.example.com/docs.php?doc=example 
```

但不要让它重定向。我在这方面取得了喜忧参半的成功，但似乎没有关于如何制定这个特定的重写规则的明确文档。如果我真的知道正则表达式，那么它会让我更容易理解，但我正在寻求一些关于如何执行此操作的帮助。

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T02:12:33.417

在文档根目录的 htaccess 文件中，添加以下规则：

```
RewriteEngine On
RewriteRule ^/?docs/(.*)$ /docs.php?doc=$1 [L] 
```

不要使用`http://hostname/`or`R`标志，它不应该重定向。

# javascript - 我可以在单击事件后使用 mouseout 事件切换弹出窗口吗？

> ID：13296699
> 
> 赞同：0
> 
> 时间：2012-11-08T19:53:47.467
> 
> 标签：javascript, jquery, twitter-bootstrap

我正在使用 twitter bootstrap 来显示带有点击事件的弹出框。我通过点击事件请求信息，但我想在它失去焦点后隐藏弹出框，这样用户就不需要再次点击它。这可能吗？

基本上我想用点击事件显示弹出框，但是当启动点失去鼠标的焦点时，弹出框被隐藏了。

这是来自 twitter-bootstrap 的 popover 文档的链接：http: [//twitter.github.com/bootstrap/javascript.html#popovers](http://twitter.github.com/bootstrap/javascript.html#popovers)

这就是我目前正在做的事情：

jQuery：

```
$('.knownissue').on('click', function() {

    var el = $(this);

    if (el.data('showissue') == 'true') {
        el.popover('toggle');
        el.data('showissue', 'false');
        return;
    }

    $.post('functions/get_known_issues.php', function(data) {
       if (data.st) {
           el.attr('data-content', data.issue);
           el.popover('toggle');
           el.data('showissue', 'true');
       }
    }, "json");

}); 
```

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T20:02:10.887

以下应该工作。

```
$('.knownissue').mouseleave(function() {
    $(this).popover('hide');
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T20:05:40.147

这是一个自定义的 jQuery 事件，我称之为“clickoutside”。当且仅当您在目标元素*之外单击鼠标时才会触发它。*它可以很容易地适应其他事件类型（mousemove、keydown 等）。在您的情况下，当它被触发时，它可能会关闭您的模态。

```
(function ($) {
    var count = 0;

    $.fn.clickoutside = function (handler) {
        // If the source element does not have an ID, give it one, so we can reference it
        var self = $(this);
        var id = self.attr('id');
        if (id === '') {
            id = 'clickoutside' + count++;
            self.attr('id', id);
        }

        // Watch for the event everywhere
        $('html').click(function (e) {
            var source = $(e.target);

            // ... but, stop it from propagating if it is inside the target 
            // element. The result being only events outside the target
            // propagate to the top.
            if (source.attr('id') == id || source.parents('#' + id).length > 0) {
                return;
            }

            handler.call(this, e);
        })
    };
})(jQuery);

 $('#targetElement').clickoutside(function(){ 
 }); 
```

编辑：示例[JSFiddle。](http://jsfiddle.net/ZETYc/)

# jquery - 捕获 jQuery ajax 异常的问题

> ID：13296700
> 
> 赞同：0
> 
> 时间：2012-11-08T19:54:00.447
> 
> 标签：jquery, ajax

我想做的是捕捉所有错误并自己处理。

但是当 jQuery.ajax() 发生错误时，我可以知道错误选项是否出错。但是我的 window.onerror 事件无法捕捉到它。

```
window.onerror = function(e) {
    console.log("i was here! ERROR: ", e);
    console.log("-----------");
    return true; //dont show errors on console
}

$(function() {

    $.ajax({
        url: "asdasdasd/as/da/sdtest/asdasd",
        error: function() {
            // ok i know here is an error and it catches on my window.onerror. BUT look at your console, still have a GET error. That error I want to handle. Can be with try/catch or inside the window.onerror. I want that Exception object. Not this one that I created.
            throw new Error("it catches, but still have errors on my console");
        }
    });

    test[0].test = "it fails";

}); 
```

你可以在这里测试：http: [//jsfiddle.net/uHPXm/4/](http://jsfiddle.net/uHPXm/4/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T20:11:06.967

[文档.onerror](https://developer.mozilla.org/en-US/docs/DOM/window.onerror)

> 运行时脚本错误的事件处理程序。

在您的情况下，脚本中没有运行时错误。脚本没问题，但请求中有一些错误。基本上，不会抛出任何异常。在 jQuery 内部会有这样的东西（它不是完全来自 jquery 代码，但它会很相似）：

```
xmlhttp.onreadystatechange=function(){
  if (xmlhttp.readyState != 4) return

  if (xmlhttp.status == 200) {
      // Everything is ок
      ...
      alert(xmlhttp.responseText);
      ...
  } else {
      handleError(xmlhttp.statusText) // Something went wrong, error handler called
  }
}

xmlhttp.send();

function handleError(message) {
      alert("Error: "+message)
} 
```

基本上，404 对浏览器来说也不例外。

您可以尝试查看[jQuery.ajaxError](http://api.jquery.com/ajaxError/) 它将捕获 ajax 请求中发生的所有错误。

同时它可能会抛出一个错误，`window.onerror`如果你设置它会被捕获`$.ajax({... dataType:'json'...})`并会得到一个 HTML 作为响应（解析响应时会发生错误）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T20:10:11.977

错误函数接受三个参数，`error(jqXHR, textStatus, errorThrown)`

jqXHR 是 XMLHTTPRequest 对象，textStatus 是字符串，例如`timeout`or `abort`，errorThrown 是原始错误消息，例如未找到或内部服务器错误。

如果您愿意，您可以[阅读文档](http://api.jquery.com/jQuery.ajax/)并前往该部分并阅读更多内容。`error`

# apache - 同一路径的多个 Apache 位置指令

> ID：13296701
> 
> 赞同：3
> 
> 时间：2012-11-08T19:54:04.917
> 
> 标签：apache, web-applications, location, shibboleth

我有一个 Web 应用程序当前在两个 HTTPS 端口上提供服务 - 比如说*443*和*8443*。该应用程序有一个 Apache HTTP 服务器作为前端，我在*设置 Apache 配置以排除其中一个端口上的某些路径时*遇到了麻烦。我在*Apache中设置了如下配置*

```
<Location /MyApp>
  AuthType SOME_AUTH_MODULE
  require user valid-user
</Location>

<Location ~ "/MyApp/(Login.html|Welcome.html)">
  Satisfy Any
  Allow from all
  AuthType None
  Require all granted
</Location> 
```

我在 Apache 中设置了我的虚拟主机，如下所示

```
<VirtualHost _default_:443>
  DocumentRoot /path/to/my/files
  Servername www.example.com:443
  Other details go here

</VirtualHost>

<VirtualHost _default_:8443>
  DocumentRoot /path/to/my/files
  Servername www.example.com:8443
  Other details go here

</VirtualHost> 
```

*考虑到Location*指令不获取*主机*和*端口*信息，上述配置的预期问题是什么？*Location 指令是使用第一个匹配条目还是会使用一个之后的条目*？

**了解 Shibboleth 的人的更多详细信息**

第一个位置条目允许用户在 SSO（单点登录）环境中访问应用程序。第二个条目旨在允许用户在不通过 SSO 的情况下访问不同端口 (8443) 上的同一虚拟主机。我们看到的是，请求标头在处理链的末端丢失了。当我删除第二个 Location 条目时，一切正常。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T20:42:35.260

将`/Location`指令放在要保护的 vhost 指令中。

```
<VirtualHost _default_:443>
  DocumentRoot /path/to/my/files
  Servername www.example.com:443
  <Location /MyApp>
  AuthType SOME_AUTH_MODULE
  require user valid-user
</Location>
  Other details go here

</VirtualHost>

<VirtualHost _default_:8443>
  DocumentRoot /path/to/my/files
  Servername www.example.com:8443
  Other details go here

</VirtualHost> 
```

# php - php 事件日历。javascript按钮不会按下

> ID：13296705
> 
> 赞同：0
> 
> 时间：2012-11-08T19:54:16.503
> 
> 标签：php, javascript, css, xampp

我一直在关注一个关于如何制作 php 日历的非常烦人的教程。我已经到了最后一点，但是当我单击它时，我有一个按钮可以在某些日期显示数据库中的信息，但没有任何反应。它应该会弹出一个显示信息的框。当您单击它时，没有错误消息或任何事情都没有发生。也许我犯了一个简单的错误？有没有人有任何想法？我今晚需要完成这个:(谢谢

事件.php

```
<?php
$deets = $_POST['deets'];
$deets = preg_replace('#[^0-9/]#i', '', $deets);

include ("connect.php");

$events = '';
$query = mysql_query('SELECT description FROM events WHERE evdate = "'.$deets.'"');
$num_rows = mysql_num_rows($query);
if($num_rows > 0) {
$events .= '<div id="eventsControl"><button onMouseDown="overlay()">Close</button><br /><br /><b> ' . $deets . '</b><br /><br /></div>';

while($row = mysql_fetch_array($query)){
  $desc = $row['description'];
  $events .= '<div id="eventsBody">'. $desc . '<br /><hr><br / ></div>';
 }
}
echo $events;
?> 
```

连接.php

```
<?php
$db_host = "localhost";
$db_username = "root";
$db_pass = "heyman";
$db_name = "ecalandar";
$conn = mysql_connect("$db_host", "$db_username","$db_pass") or die ("could not connect                          
to mysql");
mysql_select_db("$db_name") or die ("no database");
?> 
```

calCSS.css

```
#calendar_wrap {
width: 924px;
margin-left: auto;
margin-right: auto;
overflow: hidden;
}
.title_bar {
width: 100%; 
height: 30px;
}
.previous_month {
float: left;
width: 308px;
height: 30px;
text-align: left;
}
.show_month {
float: left;
width: 308px;
height: 30px;
text-align: center;
}
.next_month {
float: left;
width: 308px;
height: 30px;
text-align: right;
}
.week_days {
width: 100%;
}       
.days_of_the_week  {
float: left;
width: 14%;
text-align: center;
}      
.cal_day {
position: relative;
float: left;
margin-right: 4px;
margin-bottom: 4px;
width: 128px;
height: 95px;
background-color: #9C9;
}
.day_heading {
position: relative;
float: left;
width: 40px;
height: 16px;
padding: 6px;
color: #000;
font-family: Arial;
font-size: 14px;
}    
.openings {
width: 100%;
clear:left;
text-align: center;
}
.non_cal_day {
position: relative;
float: left;
margin-right: 4px;
margin-bottom: 4px;
width: 128px;
height: 95px;
background-color: #CCC;
}

.clear {
clear: both;
}

<!-- overlay --!>
body {
height:100%;
margin:0;
padding:0;
}
#overlay {
display: none;
position: absolute;
left: 0px;
top: 0px;
width: 100%;
height: 100%;
z-index: 2000;
background: #000;
opacity: .9;
}
#events {
display: none;
width:500px;
border:4px solid #9C9;
padding:15px;
z-index: 3000;
margin-top: 100px;
margin-right: auto;
margin-left: auto;
background-color: #FFF;
height: 400px;
overflow: scroll;
}

#eventControl {
display: none;
width: 100%;
height:30px;
z-index: 3000;
}
#eventBody {
display: none;
width: 100%;
z-index: 3000;
} 
```

calendar_start.php

```
<?php
$showmonth = $_POST['showmonth'];
$showyear = $_POST['showyear'];
$showmonth = preg_replace('#[^0-9]#i', '', $showmonth);
$showyear = preg_replace('#[^0-9]#i', '', $showyear);

$day_count = cal_days_in_month(CAL_GREGORIAN, $showmonth, $showyear);
$pre_days = date('w', mktime(0,0,0, $showmonth, 1, $showyear));
$post_days = (6 - (date('w', mktime(0,0,0, $showmonth, $day_count,$showyear))));

echo '<div id="calendar_wrap">';
echo '<div class="title_bar">';
echo '<div class="previous_month"><input name="myBtn" type="submit" value="Previous             
Month" onClick="javascript:last_month();"></div>';
echo '<div class="show_month">' . $showmonth . '/' . $showyear . '</div>';
echo '<div class="next_month"><input name="myBtn" type="submit" value="Next Month"         
onClick="javascript:next_month();"></div>';
echo '</div>';
echo '<div class="week_days">';
echo '<div class="days_of_the_week">Mon</div>';
echo '<div class="days_of_the_week">Tue</div>';
echo '<div class="days_of_the_week">Wed</div>';
echo '<div class="days_of_the_week">Thur</div>';
echo '<div class="days_of_the_week">Fri</div>';
echo '<div class="days_of_the_week">Sat</div>';
echo '<div class="days_of_the_week">Sun</div>';
echo '<div class="clear"></div>';
echo '</div>';

/* Previous Month Filler Days */
if ($pre_days != 0) {
for($i = 1 ; $i<=$pre_days;$i++) {
echo '<div class="non_cal_day"></div>';
}
}

/* Current Month */

//connect to mysql
include ("connect.php");
//
for($i=1; $i<= $day_count; $i++) {
//get events logic
$date = $showmonth.'/'.$i.'/'.$showyear;
$query = mysql_query('SELECT id FROM events WHERE evdate = "'.$date.'"');
$num_rows = mysql_num_rows($query);
if($num_rows > 0) {
 $event = "<input name = '$date' type = 'submit' value='Details' id='$date' onClick =     
'javascript:show_details(this);'>";
}
//end get events

echo '<div class="cal_day">';
echo '<div class="day_heading">' . $i . '</div>';

//show events button
if($num_rows != 0) { echo "<div class='openings'><br />".$event."</div>";
}
//end button
echo '</div>';

      }
/* Next Month Filler Days */
if ($post_days != 0) {
for ($i=1; $i<=$post_days; $i++) {
 echo '<div class="non_cal_day"></div>';
}
}
echo '</div>';
?> 
```

show_calendar.php

```
 <!DOCTYPE html>
<html>
<head>
<link href="calCss.css" rel="stylesheet" type="text/css" media="all" />

<script language="JavaScript" type="text/javascript">
function initialCalendar(){
var hr = new XMLHttpRequest();
var url = "calendar_start.php";
var currentTime = new Date();
var month = currentTime.getMonth() + 1;
var year = currentTime.getFullYear();
showmonth = month;
showyear = year;
var vars = "showmonth="+showmonth+"&showyear="+showyear;
hr.open("POST", url, true);
hr.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
hr.onreadystatechange = function() {
    if(hr.readyState == 4 && hr.status == 200) {
        var return_data = hr.responseText;
        document.getElementById("showCalendar").innerHTML = return_data;
    }
}
hr.send(vars);
document.getElementById("showCalendar").innerHTML = "processing...";
}
</script>

<script language="JavaScript" type="text/javascript">
function next_month(){
var nextmonth = showmonth + 1;
if (nextmonth > 12) {
   nextmonth = 1;
   showyear = showyear + 1;
 }
 showmonth = nextmonth;
 var hr = new XMLHttpRequest();
var url = "calendar_start.php";
var vars = "showmonth="+showmonth+"&showyear="+showyear;
hr.open("POST", url, true);
hr.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
hr.onreadystatechange = function() {
    if(hr.readyState == 4 && hr.status == 200) {
        var return_data = hr.responseText;
        document.getElementById("showCalendar").innerHTML = return_data;
    }
}
hr.send(vars);
document.getElementById("showCalendar").innerHTML = "processing...";
}
</script>

<script language="JavaScript" type="text/javascript">
function last_month(){

var lastmonth = showmonth - 1;
if (lastmonth < 1) {
   lastmonth = 12;
   showyear = showyear - 1;
 }
 showmonth = lastmonth;

 var hr = new XMLHttpRequest();
var url = "calendar_start.php";
var vars = "showmonth="+showmonth+"&showyear="+showyear;
hr.open("POST", url, true);
hr.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
hr.onreadystatechange = function() {
    if(hr.readyState == 4 && hr.status == 200) {
        var return_data = hr.responseText;
        document.getElementById("showCalendar").innerHTML = return_data;
    }
}
hr.send(vars);
document.getElementById("showCalendar").innerHTML = "processing...";
}
</script>

<script type="text/javascrip">
function overlay() {
  el = document.getElementById("overlay");
  el.style.display = (el.style.display == "block") ? "none" : "block";
  el = document.getElementById("events");
  el.style.display = (el.style.display == "block") ? "none" : "block";
  el = document.getElementById("eventsBody");
  el.style.display = (el.style.display == "block") ? "none" : "block";
}
</script>

<script language="JavaScript" type="text/javascript">
function show_details(theId){
 var deets = (theId);
 el = document.getElementById("overlay");
 el.style.display = (el.style.display == "block") ? "none" : "block";
 el = document.getElementById("events");
 el.style.display = (el.style.display == "block") ? "none" : "block";
 var hr = new XMLHttpRequest();
 var url = "events.php";
 var vars = "deets="+deets;
 hr.open("POST", url, true);
 hr.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
 hr.onreadystatechange = function() {
     if(hr.readyState ==4 && hr.status == 200 {
         var return_data = hr.responseText;
         document.getElementById("events").innerHTML = return_data;
  }
 }
 hr.send(vars);
 document.getElementById("events").innerHTML = "processing...";
 }
</script>

</head>
<body onLoad="initialCalendar();">
<div id="showCalendar"></div>
<div id="overlay"></div>
<div id="events"></div>
</div>
</body>

</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T20:01:30.007

在没有仔细查看您的代码的情况下，我注意到您正在将字符串传递给您的（过时且危险的）mysql函数

```
$db_host = "localhost";
$db_username = "root";
$db_pass = "heyman";
$db_name = "ecalandar";
$conn = mysql_connect($db_host, $db_username,$db_pass) or die ("could not connect  to mysql");
mysql_select_db($db_name) or die ("no database"); 
```

你应该阅读 pdo/mysqli

# c++ - 地址不能取什么样的左值？

> ID：13296706
> 
> 赞同：4
> 
> 时间：2012-11-08T19:54:18.063
> 
> 标签：c++, c++11, lvalue

在[本次会议](http://www.facebook.com/photo.php?v=10151094464083109&set=vb.9445547199&type=2)中，Scott Meyers 首先说“左值通常是您可以获取地址的表达式”。我一般都在强调这个词：你不能获取地址的左值是什么？（如果存在）。

**编辑**：请提供您的答案的代码片段，它使事情更清楚。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-08T20:41:37.310

我认为位域满足你的条件......我相信`f.x`是一个左值，但你不能取它的地址。有趣的是，你也不能这样做`auto & x = f.x`。

> **C++11 Section 8.3.1 Part of Paragraph 4：**由于无法获取位域（9.6）的地址，因此指针永远不能指向位域。

```
struct foo {
    int x : 3;
    int y : 3;
    int z : 3;
};

int main() {
    foo f;

    f.x = 3;
} 
```

* * *

*我对这个其他想法更不确定，但标准说你不允许**使用**main 函数。如果获取 main 的地址正在使用它，那也足够了。C++11 3.6.1 第 5 段。*

* * *

*从我留下的评论中，我知道 TI 扩展了他们的 C 和 C++ 编译器，因此有一个名为的存储类`cregister`，您无法获取其地址。（因为它指的是一个物理寄存器，它没有地址的概念）。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T20:13:44.443

您可以从命名符号中获取地址（例如与临时实例）。就我理解这个解释而言，这就是构成左值的原因。

# objective-c - Monotouch绑定Objective c类扩展/类别

> ID：13296707
> 
> 赞同：2
> 
> 时间：2012-11-08T19:54:18.387
> 
> 标签：objective-c, xamarin.ios

我正在尝试将我的第一个 3th 方库绑定到我的 monotouch 项目。大多数绑定都有效，但我在绑定目标 C 类扩展时遇到了麻烦。我知道[Binding Objective-C Types](http://docs.xamarin.com/ios/Guides/Advanced_Topics/Binding_Objective-C_Libraries)文档中的“Binding Class Extensions”部分，但不幸的是它并没有帮助我。

这些是我要绑定的 2 个扩展：

```
// category on UIViewController to provide access to the viewDeckController in the 
// contained viewcontrollers, a la UINavigationController.
@interface UIViewController (UIViewDeckItem) 

@property(nonatomic,readonly,retain) IIViewDeckController *viewDeckController; 

@end

// category on WrappedController to provide access to the viewDeckController in the 
// contained viewcontrollers, a la UINavigationController.
@interface UIViewController (WrapControllerItem) 

@property(nonatomic,readonly,assign) WrapController *wrapController; 

@end 
```

这就是我试图绑定它们的方式：

```
[BaseType (typeof(UIResponder))]
interface UIViewController
{
    [Export ("viewDeckController", ArgumentSemantic.Retain)]
    IIViewDeckController ViewDeckController { get; set; }

    [Export ("wrapController", ArgumentSemantic.Assign)]
    WrapController WrapController { get; set; }
} 
```

然后当我试图在我的应用程序中编译它时：

公共部分类 AgendaView : UIViewController

我收到以下错误：

'UIViewController' 是 'MonoTouch.UIKit.UIViewController' 和 'ViewDeck.UIViewController' 之间的模糊引用

我试图在网上搜索解决方案，但我找不到它，所以如果有人能进一步帮助我，我会很高兴。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T21:17:28.993

您必须指定命名空间。要么明确：

```
public partial class AgendaView : MonoTouch.UIKit.UIViewController
public partial class AgendaView : MyBindingsNamespace.UIViewController 
```

或通过`using`：

```
using MyBindingsNamespace;
public partial class AgendaView : UIViewController 
```

# java - ObjectInputStream 在读取时抛出异常

> ID：13296709
> 
> 赞同：0
> 
> 时间：2012-11-08T19:54:31.183
> 
> 标签：java, objectinputstream

我在使用 ObjectInputStream 时遇到了困难。我写了一个简单的测试，它在读取时因 EOF 错误而失败。任何投入将不胜感激。

```
public class Test
{  
    @Test
    public void testObjectStreams( ) throws IOException, ClassNotFoundException
    {     
        ByteArrayOutputStream baos = new ByteArrayOutputStream();
        ObjectOutputStream oos = new ObjectOutputStream(baos);

        String stringTest = "TEST";
        oos.writeObject( stringTest );

        oos.close();
        baos.close();

        byte[] bytes = baos.toByteArray();
        String hexString = DatatypeConverter.printHexBinary( bytes);
        byte[] reconvertedBytes = DatatypeConverter.parseHexBinary(hexString);

        assertArrayEquals( bytes, reconvertedBytes );

        ByteArrayInputStream bais = new ByteArrayInputStream(reconvertedBytes);
        ObjectInputStream ois = new ObjectInputStream(bais);

        String readString = (String) ois.readObject();

        assertEquals( stringTest, readString);
    }
} 
```

# javascript - 坐标鼠标画布

> ID：13296710
> 
> 赞同：2
> 
> 时间：2012-11-08T19:54:33.700
> 
> 标签：javascript, html, canvas, mouseevent, onmouseover

所以......我用jquery创建了canvas元素：

```
var canvasElement = $("<canvas id='map' width='" + CANVAS_WIDTH + "' height='" + CANVAS_HEIGHT + "'></canvas");
var canvas = canvasElement.get(0).getContext("2d");
canvasElement.appendTo('body'); 
```

现在我想获取鼠标坐标，但下一个代码不起作用：

```
canvasElement.onmousemove = mousemove;
function mousemove(evt) {
  var mouseX = evt.pageX - canvasElement.offsetLeft;
  var mouseY = evt.pageY - canvasElement.offsetTop;
  alert(mouseX+":"+mouseY);
} 
```

canvasElement.offsetLeft 不工作，evt.pageX 太...帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T19:58:12.130

这些属性不是跨浏览器的。

我知道获得画布位置的两种解决方案：

*   最简单的一个：使用[jQuery 偏移量](http://api.jquery.com/offset/)
*   另一个：使用自定义和复杂的代码：

    ```
     if (!canvasElement.offsetX) {
        // firefox
        var obj = canvasElement;
        var oX = obj.offsetLeft;var oY = obj.offsetTop;
        while(obj.parentNode){
            oX=oX+obj.parentNode.offsetLeft;
            oY=oY+obj.parentNode.offsetTop;
            if(obj==document.getElementsByTagName('body')[0]){break}
            else{obj=obj.parentNode;}
        }
        canvas_position_x = oX;
        canvas_position_y = oY;
    } else {
        // chrome
        canvas_position_x = canvasElement.offsetX;
        canvas_position_y = canvasElement.offsetY;
    } 
    ```

由于存在循环，您最好`canvas_position_x`在`canvas_position_y`每个文档`resize`而不是在每个`mousemove`.

[示范](http://jsfiddle.net/CrvgB/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T20:28:57.487

**[现场演示](http://jsfiddle.net/loktar/3AdAk/)**

没有jQuery，它实际上很容易。下面是小提琴的重要部分。`cX`并且`cY`是被点击的画布的坐标。

```
function clicked(e) {
    var cX = 0,
        cY = 0;

    if (event.pageX || event.pageY) {
        cX = event.pageX;
        cY = event.pageY;
    }
    else {
        cX = event.clientX + document.body.scrollLeft + document.documentElement.scrollLeft;
        cY = event.clientY + document.body.scrollTop + document.documentElement.scrollTop;
    }

    cX -= canvas.offsetLeft;
    cY -= canvas.offsetTop;

    ctx.fillRect(cX, cY, 2, 2);

}​ 
```

**[鼠标移动演示](http://jsfiddle.net/3AdAk/2/)**

# javascript - jQuery Deferred/Promises 动态数组未按正确顺序执行回调

> ID：13296711
> 
> 赞同：5
> 
> 时间：2012-11-08T19:54:37.080
> 
> 标签：javascript, jquery, asynchronous, jquery-deferred, promise

感谢您对我在这里误解的任何见解。我的要求如下：

我有一组 URL。我想同时为每个 URL 触发一个 AJAX 请求，一旦第一个请求完成，就调用第一个回调。然后，如果第二个请求完成，则调用该回调，依此类推。

**选项1：**

```
for (var i = 0; i < myUrlArray.length; i++) {
    $.ajax({
        url: myUrlArray[i]
    }).done(function(response) {
        // Do something with response
    });
} 
```

显然这不起作用，因为不能保证响应会以正确的顺序完成。

**选项 2：**

```
var promises = [];
for (var i = 0; i < myUrlArray.length; i++) {
    promises.push($.ajax({
        url: myUrlArray[i]
    }));
}
$.when.apply($, promises).then(function() {
    // Do something with each response
}); 
```

这应该可以工作，但缺点是它会等到**所有**AJAX 请求都完成后，才会触发任何回调。

理想情况下，我应该能够在第一个回调完成后立即调用它，然后在收到该响应时链接第二个回调以执行（或者如果它已经解决，则立即执行），然后是第三个，依此类推。

数组长度是完全可变的，并且可以在任何给定时间包含任意数量的请求，因此仅对回调链进行硬编码不是一种选择。

**我的尝试：**

```
var promises = [];
for (var i = 0; i < myUrlArray.length; i++) {
    promises.push($.ajax({
        url: myUrlArray[i] // Add each AJAX Deferred to the promises array
    }));
}
(function handleAJAX() {
    var promise;
    if (promises.length) {
        promise = promises.shift(); // Grab the first one in the stack
        promise.then(function(response) { // Set up 'done' callback
            // Do something with response

            if (promises.length) {
                handleAJAX(); // Move onto the next one
            }
        });
    }
}()); 
```

问题是回调以完全随机的顺序执行！例如，如果我将 'home.html'、'page2.html'、'page3.html' 添加到数组中，响应的顺序不一定是 'home.html'、'page2.html'、'page3 .html'。

我显然从根本上误解了承诺的工作方式。任何帮助感激不尽！

干杯

**编辑**

好吧，现在我更困惑了。我使用[Alnitak 的答案](https://stackoverflow.com/a/13296876/752213)和另一个使用[JoeFletch 的答案](https://stackoverflow.com/a/13297005/752213)的数组制作了[这个 JSFiddle](http://jsfiddle.net/eByPk/1/)，但它们都没有像我预期的那样工作！谁能看到这里发生了什么？

**编辑 2**

得到它的工作！根据下面 JoeFletch 的回答，我对解决方案进行了如下调整：

```
var i, responseArr = [];

for (i = 0; i < myUrlArray.length; i++) {
    responseArr.push('0'); // <-- Add 'unprocessed' flag for each pending request
    (function(ii) {
        $.ajax({
            url: myUrlArray[ii]
        }).done(function(response) {
            responseArr[ii] = response; // <-- Store response in array
        }).fail(function(xhr, status, error) {
            responseArr[ii] = 'ERROR';
        }).always(function(response) {
            for (var iii = 0; iii < responseArr.length; iii++) { // <-- Loop through entire response array from the beginning
                if (responseArr[iii] === '0') {
                    return; // As soon as we hit an 'unprocessed' request, exit loop
                }
                else if (responseArr[iii] !== 'done') {
                    $('#target').append(responseArr[iii]); // <-- Do actual callback DOM append stuff
                    responseArr[iii] = 'done'; // <-- Set 'complete' flag for this request
                }
            }
        });
    }(i)); // <-- pass current value of i into closure to encapsulate
} 
```

**TL;DR：**我不理解 jQuery 承诺，没有它们就可以工作。:)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-08T20:05:18.833

不要忘记您不需要立即注册回调。

我*认为*这会起作用，与您的代码的主要区别在于我使用`.done`而不是`.then`重构了几行代码。

```
var promises = myUrlArray.map(function(url) {
    return $.ajax({url: url});
});

(function serialize() {
    var def = promises.shift();
    if (def) {
        def.done(function() {
            callback.apply(null, arguments);
            serialize();
        });
    }
})(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-08T20:04:51.233

异步请求不能保证按照它们发送的顺序完成。根据服务器负载和正在传输的数据量，有些可能比其他需要更长的时间。

唯一的选择是要么等到它们全部完成，一次只发送一个，要么只是处理它们可能被无序调用。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-08T20:12:35.847

这是我解决这个问题的尝试。我更新了我的答案以包括对失败`.ajax`呼叫的错误处理。我还将一些代码移到了调用的`complete`方法中。`.ajax`

```
var urlArr = ["url1", "url2"];
var responseArr = [];
for(var i = 0; i < length; i++) {
    responseArr.push("0");//0 meaning unprocessed to the DOM
}

$.each(urlArr, function(i, url){
    $.ajax({
        url: url,
        success: function(data){
            responseArr[i] = data;
        },
        error: function (xhr, status, error) {
            responseArr[i] = "Failed Response";//enter whatever you want to place here to notify the end user
        },
        complete: function() {
           $.each(responseArr, function(i, element){
                if (responseArr[i] == "0") {
                    return;
                }
                else if (responseArr[i] != "done")
                {
                    //do something with the response
                    responseArr[i] = "done";
                }
            });
        }
    });
}) 
```

# c++ - 这种发送打包结构的多播消息的方式有什么问题？

> ID：13296714
> 
> 赞同：0
> 
> 时间：2012-11-08T19:54:48.583
> 
> 标签：c++, multicast

这是不正确的吗？

```
ssize_t rc;
do
{
    rc = ::sendto(fd_, (char*) &fooStruct, sizeof(fooStruct), 0, &sockAddr_, sizeof(sockAddr_));
} while ((rc == -1 && errno == EINTR));

if (rc < 0)
    cout << "failed to mcast message " << endl; 
```

它似乎一直在失败，我想知道我是否应该这样做：

```
ssize_t rc = ::sendto(fd_, (char*) &fooStruct, sizeof(fooStruct), 0, &sockAddr_, sizeof(sockAddr_));
if (rc < 0) 
    cout << "failed to mcast message " << endl; 
```

# java - 双值的Java迭代器

> ID：13296715
> 
> 赞同：-1
> 
> 时间：2012-11-08T19:54:51.297
> 
> 标签：java, math, loops, double, iteration

我正在尝试将 I 的值从 1 迭代到 0 或从 0 到 1。但我遇到了一些问题。请检查以下代码：

```
double i = 1.0;
loop{  // Just use a loop to iterate the i. This is just a pseudocode. 
       // We can use while-loop or for-loop or timer. 
       // (I know there is no keyword "loop" in java)

   i -=0.1;

   if( i == 0.0){
     // stop the loop
   }
} 
```

在上面的代码中，循环永远不会停止，因为在循环期间当 i = 0.8 - 0.1 时变量 i 将变为 0.7000000001。当 i = 0.1 - 0.1 时，我将有很多十进制数。所以它永远不会等于 0.0。

如果我对问题的描述对您来说不够清楚，我深表歉意。对于专业程序员来说，这可能是一个非常简单的问题。但我无法弄清楚。请让我知道我做错了什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T20:01:29.000

我会推荐使用 BigDecimal。
我知道 BigDecimal 用于金融系统，而不是 Double 或 Float，用于描述带有小数点的精确数字（即价格）。

[在这里](https://stackoverflow.com/questions/3413448/double-vs-bigdecimal)阅读更多

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T20:44:44.803

使用整数进行迭代并适当地缩放它们。

```
i = 10;
while (i != 0)
{
    double d = i / 10.0;
    // do stuff with d

    i--;
} 
```

即使比例因子不能以十进制表示，这也将起作用。

使用`BigDecimal`仅适用于小数。例如，如果您想以三分之一的步长进行迭代，它将无法工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T20:06:29.997

为什么不喜欢从 1...10 迭代并将当前值除以 10？像这样的东西：

```
for(int i = 0; i <= 10; i++) {
   double value = (double) i / 10d;
} 
```

或者，如果您不想遇到精度问题，您可以使用 BigDecimal：

```
BigDecimal value = BigDecimal.ZERO;

for(int i = 0; i <= 10; i++) {
   value = value.add(BigDecimal.valueOf(0.1d));
   double doubleVal = value.doubleValue();
} 
```

# objective-c - 将 NSDictionary 用于具有相同键的 HTTP POST 请求

> ID：13296717
> 
> 赞同：0
> 
> 时间：2012-11-08T19:55:02.060
> 
> 标签：objective-c, http, http-post, nsdictionary, afnetworking

我有一个应用程序向用户显示许多消息。我需要通知服务器用户已阅读消息。为此，我需要发送一个`/api/mark_as_read/`带有消息 ID 的 HTTP POST 请求以标记为已读，例如：

```
ID: 1234
ID: 5678
ID: 90AB 
```

请注意，HTTP 规范允许可能重复的密钥，API 在这种情况下使用。

我目前正在使用 AFHTTPClient（AFNetworking 库的一部分）。POST 参数作为 NSDictionary 传递给 AFHTTPClient，它当然具有唯一的键，这意味着我只能传入一个名为“ID”的值。

我已经搜索了一段时间的解决方案，但无法挖掘任何东西。但我相信很多人之前都遇到过这个问题。如何在 Objective-C 中向我的 HTTP 客户端传递具有非唯一键的字典？

**更新**- 我能够通过更新 AFNetworking 库并将一组 ID 放入一个 NSDictionary 值中来解决该问题。（见下文。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T20:17:57.813

尝试为值传递一个数组：

```
NSArray *values = [NSArray arrayWithObjects:@"1234", @"5678", @"90AB", nil]; 
NSDictionary *params = [NSDictionary dictionaryWithObjectAndKey:values, @"ID"]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T22:44:45.303

字典是一个集合，键是“定义”唯一的，这不能用标准字典来完成

但是可以继承 set 并且只使用 keys 数组和 dups 数组。afnetwork 会将其用作字典，并提供您想要的输出。

他们可能有这样的课程，或者您可以轻松编写一种类似的 [http://cocoaheads.byu.edu/code/CHDataStructures](http://cocoaheads.byu.edu/code/CHDataStructures)

**这是低效的，只能用于此目的**

# c# - Using ExceptionFilterAttribute in upgraded MVC project

> ID：13296721
> 
> 赞同：2
> 
> 时间：2012-11-08T19:55:04.870
> 
> 标签：c#, asp.net-mvc, asp.net-web-api, custom-attributes, asp.net-mvc-migration

Is it possible to use ExceptionFilterAttribute in a project the was created with MVC2 and upgraded to MVC4? It is not a Web API project, and I cannot seem to get the exception to catch using the ExceptionFilterAttribute. Is there any way to make this happen or am I better off just sticking to inheriting from ActionFilterAttribute and implementing IExceptionFilter. This is for an API section within our MVC project

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T01:43:24.510

MVC 属性和 Web API 属性不兼容。

MVC 属于`System.Web.Mvc.Filter`[1] 类型，而 Web API 属于`System.Web.Http.Filters.Filter`[2] 类型 - 因此在尝试将属性应用于 Web API 之前，您需要确保您的基类正确无误。

[1] - [http://msdn.microsoft.com/en-us/library/system.web.mvc.filter(v=vs.98).aspx](http://msdn.microsoft.com/en-us/library/system.web.mvc.filter(v=vs.98).aspx)

[2] - [http://msdn.microsoft.com/en-us/library/system.web.http.filters.filter(v=vs.108).aspx](http://msdn.microsoft.com/en-us/library/system.web.http.filters.filter(v=vs.108).aspx)

# ruby-on-rails - 单击按钮时如何调用javascript函数？

> ID：13296723
> 
> 赞同：5
> 
> 时间：2012-11-08T19:55:13.187
> 
> 标签：ruby-on-rails

现在我正在使用：

```
<%=button_to_function "✓", checkButton(), :class => "buttonGrey"%> 
```

但是 javascript 函数需要传递一些东西，以便它可以切换类（我希望在按下它时更改按钮类）我将作为参数传递什么来表示按钮？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2015-05-18T13:44:33.493

由于“ **button_to_function** ”自 Rails 4.0.2 起已弃用，现在您可以使用“ **button_tag** ”助手。

示例：

```
<%= button_tag "Do It", type: 'button', onclick: "myFunction()", class: 'btn btn-default' %> 
```

**注意**：如果您使用 CoffeeScript，请将您的函数声明为：

```
window.myFunction =>
  ... 
```

因为在 CofeeScript 中，默认情况下函数不是全局范围的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-08T20:09:56.483

您可以直接在 button_to_function 中执行 javascript。

在你的情况下：

`<%= button_to_function "✓", '$(this).toggleClass("buttonGrey buttonGreen");', :class => "buttonGrey" %>`

希望这可以帮助！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-08T19:59:31.353

在内部`checkButton()`，您应该能够`this`使用 jQuery 或任何您的框架来访问和操作它。

例如，使用 jquery：

```
$(this).toggleClass("buttonGrey buttonGreen"); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-08T20:01:21.903

只需直接使用jquery。

```
$(".buttonGrey").on("click", function() {
  // do something
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-08T20:26:57.713

使用按钮标签内的点击事件

# sql - JOIN-ON vs just = in WHERE clause

> ID：13296725
> 
> 赞同：-3
> 
> 时间：2012-11-08T19:55:30.253
> 
> 标签：sql

Most RDBMSs support both syntaxes:

```
SELECT ...
FROM table1 t1 JOIN table2 t2
ON t1.jfield = t2.jfield 
```

as well as

```
SELECT ...
FROM table1 t1, table2 t2
WHERE t1.jfield = t2.jfield 
```

Personally, I prefer the latter version because of less verbosity but does it presents any difference in performance and query execution? I have seen people on this forum making remarks that the 2nd style is obsolete and does not perform as well.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T20:07:22.093

There is no difference in performance. But a lot in robustness. Leave the WHERE clause out in the second example and you wind up with an unwanted cartesian product. Leave out the ON in the first example and you just get a syntax error. That might be obvious for a two table join, but once you have 10 or 15 tables, those errors are hard to spot.

Additionally when you start using outer joins, using `LEFT OUTER JOIN` will work across all DBMS, whereas any DBMS specific outer join syntax is just that: DBMS specific (and e.g. Oracle's `(+)` operator can't do everything a `LEFT OUTER JOIN` can do.

So do get used to using the `JOIN` keyword.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T20:07:54.567

Have a look at the execution plans of both forms and you'll see that they are identical (certainly true for MSSQL but I would eat my hat if it isn't for all databases) Since execution plan is identical there will be no performance difference between the 2 forms.

The reason a lot of people (me included) try to rid the world of the 2nd form is because:

*   Joins describe a relationship between 2 tables
*   Where clauses define filters on the result set

Those 2 are functionally very different and using the 2nd form makes it much harder to read and understand queries.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T20:42:49.797

我建议使用第一种语法。它为更新后的代码提供了很好的代码。第二种语法真的很旧，不能更喜欢这个，因为连接所有来自表的结果和过滤数据之后。也许我错了，但我认为如果你有索引和 PK，你可以通过连接获得更高的性能，因为 SQL Server 可以为这个操作提供更好的支持（例如排序、过滤、子查询等）。Where 子句用于过滤您的数据最终结果。
**JOINS**是非常强大的工具，因为您可以根据需要仅加入过滤后的数据，而不是加入所有表结果。可能更适合 RAM 或缓存​​。

*1st - 您可以添加过滤数据，如下所示的语法* *- 下一个语法显示您也可以使用的子查询，它仅连接过滤的行并仅返回该表的特定列*
`SELECT A.*, B.*
FROM table_a as A
INNER JOIN table_B as B ON B.id = A.id -- join table b
AND B.name = 'bob' AND B.active = 1 -- lets filter more and return only rows for clause`

 *`SELECT a.*, b.*, c.flag
FROM table_a as a
INNER JOIN table_B as b ON b.id = a.id -- join table b
AND b.name = 'bob' AND b.active = 1 -- lets filter more and return only rows for clause
INNER JOIN (
SELECT id, flag
FROM table_C
WHERE active = 1
) as c ON c.id = a.id` 

它是一种简单、易读且易于维护的代码。* 

 *看看这个链接，它不是漂亮的代码吗？
[http://www.dpriver.com/products/sqlpp/sqlexamples4.php](http://www.dpriver.com/products/sqlpp/sqlexamples4.php)

比 WHERE 子句中的 x 条件 ... ofc 你不能在这里使用聚合和子查询 ...我建议了解更多关于连接的信息，你会很高兴程序员 =]
[http://www.w3schools.com/sql/ sql_join.asp](http://www.w3schools.com/sql/sql_join.asp)

希望有帮助*

# privileges - 在 Openshift 上安装 ruby gem 的 root 权限

> ID：13296732
> 
> 赞同：1
> 
> 时间：2012-11-08T19:55:40.893
> 
> 标签：privileges, openshift, root

如何在我的 Openshift 应用程序中获得 root 权限？我需要在我的 Openshift 虚拟机上安装额外的 gems，如果没有超级用户权限是不可能的。

对于登录，我使用 SSH：ssh generated-hash@myapp-myns.rhcloud.com

我已经在 Openshift Web 界面中输入了我的 id_key.pub，并且我正在使用没有密码的 SSH。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T21:07:28.117

要在 openshift 中安装其他 gem，请参阅[此](https://openshift.redhat.com/community/forums/openshift/problems-installing-the-ruby-gem-whois)论坛，从 ramr 答案复制：

> 因此，您需要做的是在您的应用程序中添加一个 Gemfile + Gemfile.lock，然后执行 git push——有关 Gemfile+Gemfile.lock 的示例，请参见[https://github.com/openshift/rails-example 。](https://github.com/openshift/rails-example)
> 
> 步骤： 1\. 创建一个合适的 Gemfile —— 可能类似于：

```
source 'http://rubygems.org'  

gem 'whois'  
gem "minitest"  

local_gemfile = File.join(File.dirname(__FILE__), "Gemfile.local")  
if File.exists?(local_gemfile)  
  puts "Loading Gemfile.local ..." if $DEBUG # `ruby -d` or `bundle -v`  
  instance_eval File.read(local_gemfile)  
end 
```

> 在您的工作站上执行 bundler install bundle install （您可能需要先 gem install bundler 才能使用 bundler）。这应该创建一个 Gemfile.lock - 添加它和 Gemfile 并提交 git add Gemfile Gemfile.lock, git commit Gemfile Gemfile.lock -m ' added deps' 将更改推送到您的 OpenShift 应用程序 git push HTH

# ruby-on-rails-3.2 - What available ways are there to write libraries that can be used in rails? How they works? How to "install" them?

> ID：13296733
> 
> 赞同：0
> 
> 时间：2012-11-08T19:55:40.713
> 
> 标签：ruby-on-rails-3.2

Sorry for the title but I can't find words to explain this exactly. I'm a bit confused in rails when I have to choose where should I place my external libraries.

For example, if I want to prepare a gem which will contain a lot of helpers that I can share across all my applications, what should it do? Should it install those helpers under my app/helpers dir?

Actually these are all directories I know where I could place external libraries:

*   vendor/assets
*   app/helpers
*   vendor/plugins [**which has been deprecated if I'm not wrong**]
*   lib/assets
*   lib/tasks

What if I want create a method that can be used in controllers if they include something, where should I place such a file?

If I create a gem that can be used in rails, where should it install files?

I'm a bit lost, I always create a file but I feel a bit uncomfortable because I always don't know where should I place it.

**Edit 1:**

I want to add also a special case, where do you place a library written in javascript which directory structure is hardly tied up toghether, so you can't move css/images into different directories. How do you handle this? I created a directory in vendor/assets to make it works, but I don't know if it's the best way to solve this issue.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T16:09:26.707

实际上阅读并获取有关 IRC 聊天的信息，我理解了这些事情：

*   vendor/assets 应该用于“完全”在 Rails 外部的库，例如与 C++ 库交互的东西或类似的东西。
*   app/helpers 用于仅对此应用程序有用的助手
*   供应商/插件已被弃用
*   lib/assets 用于您想要使用的库（例如 javascript 库），您不希望将其存储在 gem 中（或不作为 gem 发布）。

这绝对不是一个完整的答案，但实际上是我找到的唯一一个。

关于宝石以及它们应该如何构建，我会提出一个新问题。

# qt - C++ Qt - QSignalMapper 可以清除并重新使用吗？

> ID：13296742
> 
> 赞同：0
> 
> 时间：2012-11-08T19:57:05.807
> 
> 标签：qt

考虑一个纸牌游戏。卡片从一副牌中抽出并显示在屏幕上。这些卡片是可点击的，并且导致相同的效果，因此使用`QSignalMapper`很明显。

现在，考虑弃掉那些牌，去抓新牌。

有没有办法清除`QSignalMapper`，或者`QSignalMapper`从 UI 中删除对象时自动清除？

我想过，`[QSignalMapper::removeMappings][1] ( QObject * sender )`但我不确定“发件人”是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T20:07:10.720

该`sender`参数与您作为第一个参数提供的对象相同`setMapping()`

此外，值得注意的是文档在以下内容中必须说明的内容`removeMappings()`：

> 这是在映射对象被销毁时自动完成的。

因此，如果您要销毁您提供给 a 的对象，那么`SignalMapper`当这些对象被删除时，它会自行清理。

# java - Spring MVC 中的杰克逊

> ID：13296746
> 
> 赞同：1
> 
> 时间：2012-11-08T19:57:42.760
> 
> 标签：java, json, spring, spring-mvc, jackson

我有两个用于将 jason 单独解析为 java 的 java 类。除此之外，这些类不用于任何事情。下面是两个类。

```
import java.util.ArrayList;

public class PaymentsPaid {

    public ArrayList<PaidDetailAmounts> amount;
} 
```

和

```
public class PaidDetailAmounts {

    public Long invoiceFeeId;

    public Double amountPaid;
} 
```

这里是字符串和对象映射器的使用。

```
 "amount": [{"invoiceFeeId": 12085, "amountPaid": 100},{"invoiceFeeId": 12084, "amountPaid": 100},{"invoiceFeeId": 12086, "amountPaid": 500}] 
```

和映射器代码

```
ObjectMapper mapper = new ObjectMapper();        
try {
    PaymentsPaid paymentsPaidModel = mapper.readValue(httpServletRequest.getParameter("amount"), PaymentsPaid.class);
   /*
    Iterator<PaidDetailAmounts> iterator = paymentsPaidModel.amount.iterator();
    while (iterator.hasNext()) {
        System.out.println(iterator.next().invoiceFeeId);
    }
    */
} catch (JsonParseException e) {
    e.printStackTrace();
} catch (IOException e) {
    e.printStackTrace();
} 
```

这是我的例外：

**org.codehaus.jackson.map.exc.UnrecognizedPropertyException：无法识别的字段“invoiceFeeId”（类 PACKAGE_NAME.PaymentsPaid），未标记为可忽略**

我一定是在做一些破旧的事情，因为我使用这种方法构建了一个搜索功能，它目前在我的应用程序中并且运行良好。请指教。我认为它可能是一个格式错误的 json 字符串，因为它应该是一个数组。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T07:51:44.377

问题接缝是杰克逊试图访问`invoiceFeeId`类的领域`PaymentsPaid`，但它是一个类的领域`PaidDetailAmounts`。

我认为您的 Json 字符串中缺少一些括号：

```
{  // <-- missing?
  "amount": [{"invoiceFeeId":...}]
}  // <-- missing? 
```

但我不是 JSON 专家，所以我会尝试编写一个简单的测试用例，从一些 Java 对象创建一个 JSON 字符串，然后将这些字符串解析回 Java 对象。这样测试就可以断言两个（组）对象是相等的。

然后您可以使用测试创建的 JSON 字符串并将其与您的输入进行比较，我希望（缺少的）括号是它们之间的区别。

# jquery - XMLHttpRequest 在浏览器关闭时的行为如何？

> ID：13296750
> 
> 赞同：0
> 
> 时间：2012-11-08T19:58:01.150
> 
> 标签：jquery, ajax, events, browser, xmlhttprequest

如果在触发选项卡或浏览器窗口的 onClose 事件时启动 XMLHttpRequest，我会期待什么？如果 XMLHttpRequest 耗时过长会发生什么？当窗口关闭时，请求会被中止或缩短吗？是否可以保证请求将被允许运行它的自然过程（并随着超时而终止，200、303、404 或 500）？

使用 jQuery 会有什么不同吗？

我无法模拟慢速连接以在浏览器上进行测试。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T20:05:22.357

您永远无法*保证*任何请求都会完成，这种情况也不例外。

`onunload`或者[`onbeforeunload`](https://developer.mozilla.org/en-US/docs/Mozilla_event_reference/beforeunload)事件，尤其是后者，你可能会有更好的运气。

# c - 如何在 C 中的#define 语句中包含括号

> ID：13296752
> 
> 赞同：2
> 
> 时间：2012-11-08T19:58:08.980
> 
> 标签：c, c-preprocessor

假设我有一个函数 C。

```
uint8_t readPin(uint8_t);

uint8_t readPin(uint8_t pin_num)
{
    switch pin_num
    {
        case 0:
            return(PORTAbits.RA3);
            break;
        case 1:
        ...and so on
    }
} 
```

我想使用更易读的名称（可以重新映射）来调用 pin。例如，我希望能够编写：

```
openDoor(); 
```

打电话

```
readPin(2); 
```

我尝试使用

```
#define openDoor() readPin(2) 
```

但这不起作用，因为括号。有没有人建议如何最好地做到这一点？我不能只重命名 readPin 函数，因为我想根据我包含的头文件为其拥有超过 1 个不同的别名。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T20:04:17.027

```
#define openDoor() readPin(2) 
```

你所拥有的很好。宏可以有参数列表，甚至是空的参数列表，所以这会做你想要的。

但是，我警告不要像这样使用预处理器。最好避免使用预处理器，特别是当语言可以做完全相同的事情时。一方面，调试器看不到预处理器宏。

```
void openDoor()
{
    readPin(2);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T20:03:18.523

`#define openDoor() readPin(2)`

它应该可以正常工作。因为 ,`#define`仅用于在编译前用为它定义的适当值替换它找到的替换标记，这是预处理。

因此，如果您编写`openDoor()`它将替换为`readPin(2)`编译前

# python - Good strategy to perform unit tests on program that prints to stdout?

> ID：13296753
> 
> 赞同：3
> 
> 时间：2012-11-08T19:58:11.253
> 
> 标签：python, testing

I have a python program of about 500 lines that writes to stdout (using print statements). Now I'd like to make some changes and do refactoring of the program, but I want to make sure that in the process of doing so I keep getting the same output (given the same input, of course).

What would be a good strategy to do so, without rewriting the functions to return strings (allowing for easier testing) instead of the current `print`-ing?

I though of redirecting the initial output (before I start changing it) to a text file. How can I then easily and automatically check the output of the modified program with the textfile (without redirecting that output again to a temporary text file and comparing the files)?

**Edit: This is the solution I settled on:**

```
def test_something():
    # using lambda because we might test function with parameters
    f = lambda: thing_to_test
    test_generic('expect_output.txt', f)

def test_generic(filename_expected, function_to_test):

    #Run and write to tmp file
    tmpfile = 'test-tmp.txt'
    sys.stdout = open(tmpfile, 'w')
    function_to_test()
    sys.stdout = sys.__stdout__

    #compare with expected output
    expected = open(filename_expected).read()
    result = open(tmpfile).read()
    d = difflib.Differ()
    diff = d.compare(expected.splitlines(), result.splitlines())

    #print result (different lines only)
    diff_lines_only = [line for line in diff if line[0] in "+-?"]
    if not diff_lines_only:
        print "Test succeeded (%s)\n" % filename_expected
        os.remove(tmpfile)
    else:
        print "Test FAILED (%s):\n" % filename_expected
        print '\n'.join(list(diff_lines)) 
```

**Edit 2:** Actually, I think the `doctest` solution which I provided as an answer below is much nicer.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T20:12:27.797

您可以获得代表程序重定向输出的字符串`sys.stdout`。要比较输出，您可以使用该[`difflib`](http://docs.python.org/2/library/difflib.html)模块。特别是`Differ`该类或多或少地执行`diff`命令：

```
>>> import difflib
>>> text = '''bar
... baz
... '''
>>> text2 = '''foo
... bar
... '''
>>> d = difflib.Differ()
>>> for line in d.compare(text.splitlines(), text2.splitlines()):
...     print line
... 
+ foo
  bar
- baz 
```

如果我没记错 unittest2`assertEqual`已经尝试显示字符串的差异，但我不知道在什么级别以及输出是否足够简单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T10:35:17.377

有趣的小示例问题 - 我用它创建了一个[使用 pytest 的打印/捕获/差异比较解决方案](http://pytest.org/latest/example/capture.html#working-and-comparing-against-print-output)。请注意，此示例对 pytest 功能进行了高级使用，但这些功能已链接并完全记录在案，并且在许多其他情况下也很有用。实际上，该解决方案所需的代码不到当前顶级解决方案的一半，您可能会发现能够有选择地运行测试或其他[一些 pytest 功能非常好](http://pytest.org)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-09T10:44:00.700

使用[**doctest**](http://docs.python.org/2/library/doctest.html)库的解决方案，我认为它实际上更好且独立，因为测试代码和预期的输出现在放在一个文件中。

在 python 脚本中（实际上，我将它包含在我的主程序中，如果我提供“test”作为第一个命令行参数，则执行）：

```
import doctest
doctest.testfile('test-program.txt', optionflags = doctest.NORMALIZE_WHITESPACE) 
```

测试文件`test-program.txt`现在遵循以下内容：

```
>>> import my_python_script
>>> whatever_I want_to_test_or_call_goes_here
and_here_I pasted_the_expected_output 
```

这具有访问所有`doctest`功能的额外好处（例如`-v`用于更详细输出的开关）。因此，我只需从命令行执行以下操作即可获得完整报告：

```
 C:\wherever> python my_python_script test -v 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-08T20:05:16.147

假设你正在运行 Bash，你可以运行`diff -u orig-file <(python my-program.py)`. 这将在原始文件（您已经将原始输出写入其中）和您的程序将写入的命名管道之间进行比较。

这是一个简单的简单示例，使用`echo`而不是实际的 Python 脚本：

```
$ diff -u <(echo $'foo\nbar\nbaz') <(echo $'foo\nbar\nquux')
--- /dev/fd/63  2012-11-08 15:07:09.000000000 -0500
+++ /dev/fd/62  2012-11-08 15:07:09.000000000 -0500
@@ -1,3 +1,3 @@
 foo
 bar
-baz
+quux 
```

# mobile - P2P payments with PayPal on mobile devices

> ID：13296756
> 
> 赞同：1
> 
> 时间：2012-11-08T19:58:22.490
> 
> 标签：mobile, paypal

I'm looking into supporting P2P payments for a mobile app, iOS as well as Android. I do not think the PayPal API has support for this, what would be the best way to achieve this?

I need a verification preferably of a payment made to another user.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T23:55:29.467

贝宝绝对支持这一点。你有很多选择。您可以使用他们实际[的移动 SDK](https://developer.paypal.com/webapps/developer/docs/integration/mobile/mobile-sdk-overview/)，也可以像往常一样向 API 端点构建标准 HTTP 请求。

当使用 Express Checkout 或 Adaptive Payments 时，他们的系统将在使用移动设备时自动切换到使用移动结账体验。通过这种方式，您可以构建您的应用程序以在移动设备或普通计算机上运行（例如，使用 jQuery Mobile），并为用户提供他们期望的体验。

# .htaccess - 带参数的 URL 重写

> ID：13296761
> 
> 赞同：1
> 
> 时间：2012-11-08T19:58:32.930
> 
> 标签：.htaccess, mod-rewrite, url-rewriting

我是 url 重写的菜鸟，我真的需要帮助来解决这个问题：

我有这个 url：section/news.php?url=section/news/27-how_to_make_rewrite.html 我想用 url 参数访问这个新闻，链接是：section/news/27-how_to_make_rewrite.html

.htacess 文件在根目录中，我有一个名为 section 的文件夹，在这个文件夹中我有 news 文件夹

这对我不起作用。

我有 ：

```
重写引擎开启
RewriteBase /section/
RewriteRule news/^([a-zA-Z0-9-+/]+)/$ news/news.php?url=$1

```

我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T20:36:47.493

我没有将它与子文件夹一起使用，但我会尝试这样的事情。

```
RewriteRule ^news/([^/\.]+)/?$ news/news.php?url=section/news/$1 [L] 
```

**编辑**

试试这种方式：

```
RewriteRule ^section/news/([^/.]+)/?$ news.php?url=section/news/$1 [L] 
```

您通常只想将变化的内容放入变量中。section/news/ 总是被使用，所以你应该把它放在替换之外。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T02:16:37.760

如果您要重写的 URI*如下*所示：`section/news.php?url=section/news/27-how_to_make_rewrite.html`

那么你的目标中有太多的“新闻”。您还需要修复正则表达式模式以匹配`27-how_to_make_rewrite.html`.

你想要这样的东西：

```
RewriteEngine on
RewriteBase /section/
RewriteRule news/(.+)/?$ news/news.php?url=section/news/$1 
```

# html - 如何在 div 周围环绕文本？

> ID：13296762
> 
> 赞同：15
> 
> 时间：2012-11-08T19:58:32.540
> 
> 标签：html, css

我的硬币滑块周围有一个容器 div。我想在这个容器 div 周围环绕文本。如何实现这一目标？

现在我的 HTML 设置如下：

```
<p> <!-- LOTS OF TEXT --> </p>
<div id="mycontainer"> <!-- coinslider inside --></div> 
```

我的 CSS 设置如下：

```
#mycontainer {
position: relative;
float: right;
width: 500;
height: 334;
} 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2014-02-07T13:50:44.377

```
<div>
    <div  style="float:left; width: 150px; height: 150px; margin: 10px; background-color: #ff0000;">
        <!--your image or text--> 
    </div>
    <p>But I must explain to you how all this mistaken idea of denouncing pleasure and praising pain was born and I will give you a complete account of the system, and expound the actual teachings of the great explorer of the truth, the master-builder of human happiness. No one rejects, dislikes, or avoids pleasure itself, because it is pleasure, but because those who do not know how to pursue pleasure rationally encounter consequences that are extremely painful. Nor again is there anyone who loves or pursues or desires to obtain pain of itself, because it is pain, but because occasionally circumstances occur in which toil and pain can procure him some great pleasure. To take a trivial example, which of us ever undertakes laborious physical exercise, except to obtain some advantage from it? But who has any right to find fault with a man who chooses to enjoy a pleasure that has no annoying consequences, or one who avoids a pain that produces no resultant pleasure?</p>
    <p>But I must explain to you how all this mistaken idea of denouncing pleasure and praising pain was born and I will give you a complete account of the system, and expound the actual teachings of the great explorer of the truth, the master-builder of human happiness. No one rejects, dislikes, or avoids pleasure itself, because it is pleasure, but because those who do not know how to pursue pleasure rationally encounter consequences that are extremely painful. Nor again is there anyone who loves or pursues or desires to obtain pain of itself, because it is pain, but because occasionally circumstances occur in which toil and pain can procure him some great pleasure. To take a trivial example, which of us ever undertakes laborious physical exercise, except to obtain some advantage from it? But who has any right to find fault with a man who chooses to enjoy a pleasure that has no annoying consequences, or one who avoids a pain that produces no resultant pleasure?</p>
</div>
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-08T20:12:31.400

将您的 Div 包含在另一个 div 中并为其赋予 float 属性...

```
<div id="main">
    <div id="mycontainer"> <!-- coinslider inside --></div>
</div>
<p> <!-- LOTS OF TEXT --> </p>

#main
{
    float:right;
}
#mycontainer 
{
    width: 500px;
    height: 334px;
    background-color:  gold;
} 
```

**[检查小提琴](http://jsfiddle.net/sushanth009/k8NSK/)**

**或者**

P 应该在 Div 之后

```
 <div id="mycontainer"> <!-- coinslider inside --></div>

    <p> <!-- LOTS OF TEXT --> </p>

#mycontainer 
{
    float:right;
    width: 500px;
    height: 334px;
    background-color:  gold;
} 
```

**

**[小提琴](http://jsfiddle.net/sushanth009/k8NSK/)**

**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T21:18:58.013

```
<div id="mycontainer"> <!-- coinslider inside --><p> <!-- LOTS OF TEXT --> </p></div> 
```

您的文本需要进入 div 容器。希望有效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-08T20:05:58.227

将此添加到您的 CSS 中，您应该会很好：

```
display: block; 
```

# python - Tornado 对函数的异步调用

> ID：13296763
> 
> 赞同：8
> 
> 时间：2012-11-08T19:58:35.027
> 
> 标签：python, class, function, asynchronous, tornado

我正在使用 Python + Tornado 制作一个 Web 应用程序，它基本上为用户提供文件。我没有数据库。

如果文件可用，则直接提取和提供文件，如果不可用，则动态生成。

我希望以异步方式为客户端提供服务，因为有些文件可能已经可用，而另一些文件需要生成（因此他们需要等待，我不希望他们阻止其他用户）。

我有一个管理文件选择或生成的类，我只需要从 Tornado 调用它。

实现这一目标的最佳方法是什么（在 CPU 和 RAM 上最有效）？我应该使用线程吗？子进程？像这样一个简单的[gen.Task](https://stackoverflow.com/questions/11679040/using-gen-task-with-tornado-for-a-simple-function)？

另外，我希望我的实现可以在 Google App Engines 上运行（我认为它们不允许产生子进程？）。

我对异步 Web 服务比较陌生，所以欢迎任何帮助。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-08T23:19:44.510

我找到了我的问题的答案： genTask 示例确实是实现异步调用的最佳方式，这是因为该示例确实使用了**Python coroutine**，我乍一看并不理解，因为我认为**yield**仅用于为生成器返回一个值。

具体例子：

```
class MyHandler(tornado.web.RequestHandler):

    @asynchronous
    @gen.engine
    def get(self):
        response = yield gen.Task(self.dosomething, 'argument') 
```

这里重要的是两件事的结合：

*   **yield**，它实际上产生了一个协程（或伪线程，它非常高效并且对并发高度友好）。 [http://www.python.org/dev/peps/pep-0342/](http://www.python.org/dev/peps/pep-0342/)

*   `gen.Task()`这是一个非阻塞（异步）函数，因为如果您在阻塞函数上生成协程，它将不是异步的。`gen.Task()`由 Tornado 提供，专门用于 Python 的协程语法。更多信息： [http ://www.tornadoweb.org/documentation/gen.html](http://www.tornadoweb.org/documentation/gen.html)

因此，使用协程在 Python 中进行异步调用的典型示例：

```
response = yield non_blocking_func(**kwargs) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-01-23T14:23:32.660

现在[文档](http://www.tornadoweb.org/en/stable/guide/async.html#examples)有解决方案。

简单的例子：

```
import os.path
import tornado.web
from tornado import gen

class MyHandler(tornado.web.RequestHandler):

    @gen.coroutine
    def get(self, filename):
        result = yield self.some_usefull_process(filename)
        self.write(result)

    @gen.coroutine
    def some_usefull_process(self, filename):
        if not os.path.exists(filename):
            status = yield self.generate_file(filename)
            result = 'File created'
        else:
            result = 'File exists'

        raise gen.Return(result)

    @gen.coroutine
    def generate_file(self, filename):
        fd = open(filename, 'w')
        fd.write('created')
        fd.close() 
```

# c# - 通过 https 协议 c# 在安全的 FTP 上上传文件

> ID：13296765
> 
> 赞同：1
> 
> 时间：2012-11-08T19:58:35.797
> 
> 标签：c#, httpwebrequest, ftps

我必须使用 HTTPS 在 FTP 上上传和下载文件。如果我想对了，我必须使用 HTTPWebRequest 类，因为 ftp 使用的是 HTTPS 协议。

现在我正在尝试下载一个文件，但我得到的所有响应流只是“登录的虚拟用户'XXX'”。

可能是我没有设置正确的方法类型或其他问题。

```
 WebRequest ftp1 = HttpWebRequest.Create(u1);
            ftp1.PreAuthenticate = true;
            ftp1.Credentials = netCred;

            ftp1.Method = WebRequestMethods.Ftp.DownloadFile;
            try
            {
                response = (HttpWebResponse)ftp1.GetResponse();            
                remoteStream = response.GetResponseStream();
                localStream = File.Create("c:/TEST1.txt");
                int bytesProcessed = 0;
                byte[] buffer = new byte[4096];
                int bytesRead;

                do
                {
                    // Read data (up to 1k) from the stream
                    bytesRead = remoteStream.Read(buffer, 0, buffer.Length);

                    // Write the data to the local file
                    localStream.Write(buffer, 0, bytesRead);

                    // Increment total bytes processed
                    bytesProcessed += bytesRead;
                } while (bytesRead > 0);
            }
            catch (Exception e)
            {
                Console.WriteLine(e.Message);
            }
      finally
      {
        // Close the response and streams objects here 
        // to make sure they're closed even if an exception
        // is thrown at some point
        if (response != null) response.Close();
        if (remoteStream != null) remoteStream.Close();
        if (localStream != null) localStream.Close();
      } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T21:22:27.367

它没有使用 HTTPS；它正在使用 FTPS（或可能的 SFTP）。该类通过将属性设置为 来`FtpWebRequest`支持显式 FTPS 。`EnableSsl``true`

如果这不起作用，您可能需要使用第三方组件。看看关于[这个 SO question](https://stackoverflow.com/questions/1842186/does-net-ftpwebrequest-support-both-implicit-ftps-and-explicit-ftpes)的建议。

# c++ - 旋转两个球体

> ID：13296775
> 
> 赞同：1
> 
> 时间：2012-11-08T19:59:26.903
> 
> 标签：c++, opengl

我想以不同的旋转连续旋转两个球体。我的代码目前似乎没有得到任何旋转。这是我的代码：

```
void renderScene(void) {
    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);

    glPushMatrix();
        glTranslated(0.0,1.2,-6);
        glRotatef(angle,0,1.2,-6);
        glutSolidSphere(1,50,50);           
    glPopMatrix();

    glPushMatrix();
        glTranslatef(0.0,-1.5,-6);
        glRotatef(angle,0,1.5,-6);
        glutSolidSphere(0.4,50,50);
    glPopMatrix();

    angle=+0.1;
    glutSwapBuffers();
} 
```

有什么我没有添加的吗？我到处都尝试过旋转，它似乎只能在推送和弹出矩阵之外工作，这不是我想要的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T12:33:09.613

```
angle=+0.1; // assign the value +0.1 to angle 
```

你的意思是：

```
angle += 0.1; // increment angle by 0.1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T20:08:28.383

`glutSolidSphere`围绕原点绘制一个球体：(0,0,0)。`glRotatef`也围绕通过原点的轴旋转。现在，您可能应该知道，围绕其中心旋转球体根本不会改变球体的外观。

你应该做的是先旋转*然后*平移。像这样：

```
glPushMatrix();
    glRotatef(angle,0,1.2,-6);
    glTranslated(0.0,1.2,-6);
    glutSolidSphere(1,50,50);           
glPopMatrix(); 
```

# java - 如何在不使用 @SuppressWarnings("unchecked") 的情况下创建具体参数化类型的数组

> ID：13296776
> 
> 赞同：1
> 
> 时间：2012-11-08T19:59:28.817
> 
> 标签：java, generics, arraylist, warnings, suppress-warnings

我刚开始学习 Java，我得到了“@SuppressWarnings("unchecked")"

我确信我的一个静态变量正在制造麻烦

```
static ArrayList<Integer>[] docNumber = (ArrayList<Integer>[]) new ArrayList[20]; 
```

eclipse 说*“类型安全：从 ArrayList[] 到 ArrayList[] 的未经检查的强制转换”* ，但我不确定如何避免这个问题

你能告诉我如何解决这个问题吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T20:06:41.433

数组无法避免。

改用 a `List<List<Integer>>`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T20:09:20.347

为了避免这种情况，`@SuppressWarnings(“unchecked”)`您应该向编译器提供执行所有类型检查所需的信息，以确保类型安全，请参阅[未检查的常见问题解答](http://www.angelikalanger.com/GenericsFAQ/FAQSections/TechnicalDetails.html#FAQ001)。

在您的情况下，我假设您正在尝试维护文档整数列表，为此您将需要：

```
List<Integer> docNumber=new ArrayList<Integer>(); 
```

如果您想保留列表列表，则可以执行以下操作：

```
List<List<Integer>> docNumber=new ArrayList<List<Integer>>(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T20:14:20.357

Are you trying to achieve this (`List of Array Of Integer`)?

```
 static ArrayList<Integer[]> docNumber = new ArrayList<Integer[]>(); 
```

# ruby-on-rails - Rails：ActionMailer 创建错误链接 https://link.com 而不是 https://link.com

> ID：13296777
> 
> 赞同：2
> 
> 时间：2012-11-08T19:59:30.287
> 
> 标签：ruby-on-rails

我有一个带有设置的 actionmailer：

配置/初始化程序/setup_mail.rb

```
ActionMailer::Base.smtp_settings = {
  :address              => "smtp.gmail.com",
  :port                 => 587,
  :user_name            => "cool@gmail.com",
  :password             => "cool",
  :authentication       => "plain",
  :enable_starttls_auto => true
}

ActionMailer::Base.default_url_options[:host] = "https://pacific-ravine-3563.herokuapp.com/" 
```

在创建用户时发送电子邮件。但是，我检查了发送的电子邮件，但链接不起作用。这是电子邮件的模板：

```
Dear <%= @user.name %>,

<p>
    Welcome to Pholder! Get started by finding and inviting <%= link_to "friends", users_url %> so that you can exclusively upload and view pictures with each other.
</p>

<p>
    <%= link_to "View profile", user_url(@user) %>
    <%= link_to "Edit profile", edit_user_url(@user) %>
</p>

<p>
    Sincerely, <br>
    Pholder Staff
</p> 
```

当我检查实际电子邮件时：

```
Dear Ellen,

Welcome to Pholder! Get started by finding and inviting friends so that you can exclusively upload and view pictures with each other.

View profile Edit profile

Sincerely,
Pholder Staff 
```

所有链接都不起作用。应该发送给我的第一个链接将我`users_url`发送到：`https//pacific-ravine-3563.herokuapp.com/users`而不是。这适用于其他 2 个链接（`user_url(@user)`将我发送到`https//pacific-ravine-3563.herokuapp.com/users/9`等）

是因为我错误地设置了 default_url 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T20:33:33.323

尝试以这种方式使用配置：

```
config.action_mailer.default_url_options = { :protocol => 'https', :host => 'pacific-ravine-3563.herokuapp.com' } 
```

而不是设置您当前正在做的方式。

如果它不生成绝对 URL，则必须设置`:only_path => false`，但这只是在[文档](http://api.rubyonrails.org/classes/ActionMailer/Base.html)`url_for`中使用as时发生的一种行为。

# python - 如何从 html 表中获取值？

> ID：13296779
> 
> 赞同：0
> 
> 时间：2012-11-08T19:59:31.280
> 
> 标签：python, web-scraping

我正在尝试从以下站点获取信息：[http](http://www.ebi.ac.uk/intact/) : //www.ebi.ac.uk/intact/，然后搜索 Q9SUE8。使用 urllib 我得到页面的 html：

```
import urllib2
import urllib
url = 'http://www.ebi.ac.uk/intact/'
values = {'queryTxt':'Q9SUE8'}

data = urllib.urlencode(values)
req = urllib2.Request(url, data)
response = urllib2.urlopen(req)
the_page = response.read()
print the_page 
```

从浏览器搜索 Q9SUE8 时，结果如下表：

```
#    Molecule 'A'    Links 'A'    Molecule 'B'    Links 'B'    some more columns
--------------------------------------------------------------------------------
1    T13J8.10        Q9SUE8       GRF7            Q96300
                     EBI-4459886 
```

我想提取值 Q96300。我可以在 html 中找到列标题：

```
<tr>
  <td>
    <input id="mainPanels:columnSelection:3" type="checkbox" name="mainPanels:columnSelection" checked="checked" value="moleculeB.links" />
    <label for="mainPanels:columnSelection:3">&#160;Links 'B'</label>
  </td>
</tr> 
```

我对 html 不熟悉，但我猜 Q96300 来自 value="moleculeB.links"。我怎样才能得到那个值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T21:16:57.810

我不确定您是否需要担心 javascript。很可能是会话/隐藏输入问题。

但以下代码有效：

```
import mechanize
import re

b = mechanize.Browser()

# Visit search page
url = 'http://www.ebi.ac.uk/intact'
resp = b.open(url)
page = resp.read()

# Fill out and submit form
b.select_form(name="intactForm")
b["queryTxt"] = 'Q9SUE8'
resp = b.submit()
page = resp.read()

# Parse Page
matches = re.findall('<td role="gridcell" class="cellTextCompound"><div class="ui-dt-c"><a href=".*?" target="_blank">(.*?)</a>', page)

linksB = matches[0]
print linksB 
```

输出：

```
Q96300 
```

请注意，它需要[mechanize](http://wwwsearch.sourceforge.net/mechanize/)模块（可在 Fedora 存储库中以`python-mechanize`.

# django - django javascript本地化问题

> ID：13296781
> 
> 赞同：2
> 
> 时间：2012-11-08T19:59:36.583
> 
> 标签：django

我目前正在为我的项目使用 django 1.3。我正在对项目进行本地化。我能够本地化 python 代码和模板，但我在 javascript 本地化方面遇到了问题。我收到 TemplateSyntaxError 消息，说“渲染时捕获 NoReverseMatch：''django.views.i18n.javascript_catalog'' 的反向参数'（）'和关键字参数'{}'未找到。” 我将部分 url.py 和模板 home.html 代码放在下面。我使用 python manage.py shell 检查了 django.views.i18n.javascript_catalog，这很好。

你能告诉我我做错了什么吗？

模板中的 url 函数不应该导致 http:///jsi18n/ 吗？

谢谢！

敏

=== urls.py ===

```
js_info_dict = {
    'domain': 'djangojs',
    'packages': ('messages',),
}

urlpatterns = patterns('',

    url(r'^$', 'messages.views.home', name='home'),
    url(r'^messages/$', include('messages.urls')),

    # Localization
    url(r'^i18n/', include('django.conf.urls.i18n')),
    url(r'^jsi18n/$', 'django.views.i18n.javascript_catalog', js_info_dict),
) 
```

=== 结束 ===

=== home.html ===

```
<body>
    <script type="text/javascript" src="{% url 'django.views.i18n.javascript_catalog' %}"></script>
</body> 
```

=== 结束 ===

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-12T22:04:41.017

我终于找到了这个错误的原因。该错误与本地化无关。如果你改变

```
<script... {% url 'django.views.i18n.javascript_catalog' %}"></script> 
```

至

```
<script... {% url django.views.i18n.javascript_catalog %}"></script> 
```

错误消失了。

请注意，在 中`urls.py`，它是

```
url(r'^jsi18n/$', 'django.views.i18n.javascript_catalog', js_info_dict), 
```

简而言之，在 html 模板文件中，没有引号，`django.views.i18n.javascript_catalog`而`urls.py`文件，在`django.views.i18n.javascript_catalog`. 在此之后，我能够让 javascript 翻译工作。

敏

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-11T15:49:35.913

有同样的错误，但发现我有这个：

```
url(r'^jsi18n/$', 'django.views.i18n.javascript_catalog',js_info_dict),
url(r'^i18n/', include('django.conf.urls.i18n')), 
```

而不是这个：

```
url(r'^i18n/', include('django.conf.urls.i18n')),
url(r'^jsi18n/$', 'django.views.i18n.javascript_catalog', js_info_dict), 
```

# c# - 如何从 Java 和 C# 调用 OSB 代理

> ID：13296785
> 
> 赞同：0
> 
> 时间：2012-11-08T19:59:55.510
> 
> 标签：c#, java, proxy, client-server, osb

我需要两种情况的示例：如何从 Java 客户端调用 OSB 代理以及如何从 C# 客户端调用。我也在寻找简单的例子和​​先进的最佳实践。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T09:10:25.690

答案将取决于您创建的代理类型和它使用的协议。代理的传输类型是什么？

如果您的代理服务基于 WSDL 并接受 SOAP/HTTP，那么您可以像进行任何 WebService 调用一样调用该服务。

[PS：你已经在OTN](https://forums.oracle.com/forums/thread.jspa?messageID=10682962)上问过这个问题。

# php - 使用 preg_match 检查 POST

> ID：13296786
> 
> 赞同：-5
> 
> 时间：2012-11-08T20:00:01.933
> 
> 标签：php, forms, preg-match

> **可能重复：**
> [正则表达式将字符数限制为 10](https://stackoverflow.com/questions/1649435/regular-expression-to-limit-number-of-characters-to-10)

我将 POST 检索到标准表单，我需要测试两件事：

*   该值必须为 40 个字符
*   该值只能包含字母和数字

我认为使用 preg_match 可以做到这一点，但我不知道如何。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T20:11:49.577

在全局 $_POST 中，您拥有关于 http 请求的所有发布数据。

然后：

```
$myvar = $_POST['your_posted_variable_here'];

$result = preg_match('/^([\w\d]){40}$/i', $myvar); 
```

如果您发布的数据仅包含字母和数字并且长度为 40 个字符，$result 将为 true，否则将为 false。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T20:12:11.970

PHP 提供了一个检查字母数字字符的函数[ctype_alnum](http://php.net/manual/en/function.ctype-alnum.php)和[strlen](http://php.net/manual/en/function.strlen.php)来检查字符串的长度，所以使用这两个函数你可以验证它

```
$yourInput=$_POST['yourInput'];
if(ctype_alnum($yourInput) && strlen($strlen)==40)
{
    //...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T20:05:58.727

*正好*40 个字符：

`^[a-zA-Z0-9]{40}$`

*至少*40 个字符：

`^[a-zA-Z0-9]{40,}$`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-08T20:06:10.747

**关于 preg_match 的信息**

[http://php.net/manual/en/function.preg-match.php](http://php.net/manual/en/function.preg-match.php)

```
if (preg_match("@^[a-z0-9]{40}$@mis", $_POST['username'])) {
    print 'matched';
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-08T20:08:24.503

您还可以先使用 strlen() 检查字符串的长度，然后如果它满足所需的长度，则继续检查字母数字。

但将军的想法是对的……

这是另一种方式：

```
preg_match("/^[0-9a-zA-Z_]{40,}$/", $_POST["something"]) 
```

这是字母数字，并检查至少 40 个字符，但会接受更多。逗号后面的缺失值意味着它可以是等于或大于 40 的任何值。

# sql - oracle 中的 NULL & Distinct

> ID：13296788
> 
> 赞同：0
> 
> 时间：2012-11-08T20:00:07.240
> 
> 标签：sql, oracle

我有一种情况，我想从客户表中返回空值，并且本质上相当于在账单表中的账单代码上选择不同的值。

我该怎么做？

表客户

```
ID
姓名
客户编号
帐单代码

```

表账单

```
ID
帐单代码

```

我正在尝试做类似的事情

```
Select Null ID, Null NAME, Null CUSTNUMBER
from CUSTOMER
RIGHT JOIN ID, BILLCODE 
on customer.billcode = bill.billcode 
```

我只想要表中每个账单代码的 1 条记录。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T20:05:08.710

```
with billcodes as (select distinct billcode from bill)
select b.billcode, c.id, c.name, c.custnumber
from billcodes b
left outer join customer c on c.billcode=b.billcode 
```

或者：

```
select b.billcode, c.id, c.name, c.custnumber
from (select distinct billcode from bill) b
left outer join customer c on c.billcode=b.billcode 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T20:13:52.370

I am guessing that the question is: how can I return all customers from the customer table with a list of each bill code they have?

If so, you want to use `group by` and `left outer join`:

```
select b.billcode, c.id, c.name, c.custnumber
from customer c left outer join
     bill b
     on c.billcode = b.billcode
group by b.billcode, c.id, c.name, c.custnumber 
```

# css - 是否可以让浏览器搜索 CSS 生成的内容？

> ID：13296789
> 
> 赞同：10
> 
> 时间：2012-11-07T10:34:56.597
> 
> 标签：css, search, css-content

我运行一个使用 CSS 伪元素在这里和那里插入文本的网站。其中之一插入了 CSS 计数器的值（因此需要对系统进行大量重新设计才能在*没有*CSS 文本注入的情况下执行此操作）。具体的CSS规则是：

```
.num_defn .theorem_label:after {
    content: " " counter(definition, decimal);
    counter-increment: definition;
} 
```

这将“**定义**”转换为“**定义 1** ”（比如说）。

但是，浏览器无法搜索注入的文本。它看不到`1`: 如果我搜索“定义 1”，那么它就找不到它，如果我搜索“定义。无论定义文本是什么”，那么浏览器会愉快地突出显示除插入的`1`. 因此，如果您将粗体文本想象为突出显示，它将如下所示：

**定义**1 **。无论定义文本是什么**

这并不理想！人们喜欢通过编号来引用定义，并说“查看 XYZ 页面上的定义 1”（以及在超链接不可用的情况下 - 我知道这很奇怪，但确实会发生）。

因此：

1.  有什么方法可以让我在服务器端将注入的文本指定为“可搜索”？
2.  如果没有，浏览器端是否有一种**简单**的方法可以启用它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T14:05:56.460

据我所知没有办法。您可能可以使用 JS 来访问该信息，但这将是某种“黑客”的事情。

当您考虑 HTML 和 CSS 的目的时，我认为这有点道理。您可能知道 HTML 旨在描述内容的语义，而 CSS 旨在控制页面的外观。因此，简而言之，如果您使用 CSS 将任何文本添加到您的页面，那么它应该只是出于文体目的。

如果它是对您的网站访问者有意义的实际文本，您需要将其作为 HTML 直接放在您的网站中。

您这样做的方式也违反了最佳实践。因为如果你禁用 CSS，一些内容就会消失。

# c++ - 指向 C++ 的 Obj-c 指针已更改

> ID：13296794
> 
> 赞同：0
> 
> 时间：2012-11-08T20:00:45.693
> 
> 标签：c++, objective-c, pointers

我有一个 C++ 类 FooCpp、一个 C++ 接口 IFOO 和一个 Obj-c 类 FooObjC，在 IFOO 上我有：

```
public:
    virtual ~IFOO() {};
    virtual void seePointer(FooCpp* p); 
```

在 FooCpp 我有：

在.h

```
class FooCpp : virtual public IFOO {
public:
    virtual ~FooCpp() {};
    void seePointer(FooCpp* p);
} 
```

和.cpp

```
void FooCpp::seePointer(IFOO* p){
    printf("%p\n",p);
} 
```

在 FooObjC 我称之为：

```
FooCpp *foo = new FooCpp();
FooCpp *f = new FooCpp();
printf("%p\n",f);
foo->seePointer(f); 
```

当我这样做时，我得到了以下日志：

```
0x848f520
0x61630002 
```

为什么点地址被改变了？因为这是我的程序出错，有人知道为什么会这样以及如何解决它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T20:55:17.337

基本子对象具有与完整对象不同的地址并不罕见，尤其是在涉及虚拟继承时。

但是，两个指针之间的差异应该很小（小于`sizeof (FooCpp)`.

要么你有某种损坏（可能是不匹配的调用约定），要么 Objective-C++ 正在做一些非常奇怪的事情，比如撕掉代理对象。

# c - 奇怪的可变大小数组声明

> ID：13296797
> 
> 赞同：4
> 
> 时间：2012-11-08T20:01:01.227
> 
> 标签：c, arrays

阅读[这个跳过列表实现](http://256.com/sources/skip/docs/skipLists.c)我遇到了这个代码片段：

```
typedef struct nodeStructure{
    keyType key;
    valueType value;
    node forward[1]; /* variable sized array of forward pointers */
    }; 
```

对我来说，这似乎`forward[1]`表示一个元素数组。评论称它为*可变大小的数组*。

我是否误解了某些东西，或者这只是我正在阅读的来源中的一个错误？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-08T20:02:39.113

它被称为*struct hack*。它是C99 中引入的*灵活数组成员的**旧*形式。

 *这在过去被用来模拟结构的最后一个成员中的变量数组，但它不是 C 中严格符合的构造。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-08T20:04:33.923

这是您有时会看到的 C 中的程序范例。分配结构体时，会分配sizeof(struct nodeStructure + numNodes * sizeof(node))。

这允许您为该结构拥有多个前向节点，即使它仅被声明为有一个。这有点丑陋，但它确实有效。

通常，当您这样做时，还会有一个名为“count”之类的文件，以便您知道节点之后有多少额外的条目。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-08T20:03:11.720

这是较旧的 C 编译器（C99 之前）的常见技巧：当 ;`forward`的最后一个元素时，编译器允许您取消引用超过声明长度末尾的元素`struct`。然后，您可以为其他元素`malloc`提供足够的内存，如下所示：`node`

```
nodeStructure *ptr = malloc(sizeof(nodeStructure)+4*sizeof(node));
for (int i = 0 ; i != 5 ; i++) { // The fifth element is part of the struct
    ptr->forward[i] = ...
}
free(ptr); 
```

该技巧使您可以在结构中嵌入可变大小的数组，而无需单独的动态分配。另一种解决方案是声明`node *forward`，但随后您需要将其`malloc`与`free`分开`nodeStructure`，不必要地将 s 的数量加倍`malloc`并可能增加内存碎片：

以下是没有 hack 的上述片段的外观：

```
typedef struct nodeStructure{
    keyType key;
    valueType value;
    node *forward;
};

nodeStructure *ptr = malloc(sizeof(nodeStructure));
ptr->forward = malloc(5*sizeof(node));
for (int i = 0 ; i != 5 ; i++) {
    ptr->forward[i] = ...
}
free(ptr->forward);
free(ptr); 
```

**编辑**（回应 Adam Rosenfield 的评论）：C99 允许您定义没有大小的数组，如下所示：`node forward[];`这称为*灵活数组成员*，它在 C99 标准的第 6.7.2.1.16 节中定义。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-08T20:05:55.247

数据结构实现很可能是针对 C90 标准编写的，该标准没有*灵活的数组成员*（在 C99 中添加）。那时，在结构的末尾使用 1 甚至 0 大小（*）的数组是很常见的，以允许访问那里动态可变数量的元素。

该注释不应被解释为 C99 风格的可变长度数组；此外，在 C99 中，成员的惯用且符合标准的定义`forward`将是`node forward[];`. 具有此类`struct nodeStructure`成员的类型称为*不完整类型*。您可以定义一个指向它的指针，但您不能定义这种类型的变量或获取它的大小、所有允许`node forward[0]`或`node forward[1]`允许的操作，尽管这些操作可能与程序员的意图不匹配。

(*) 标准禁止使用 0 大小的数组，但 GCC 接受了这些数组作为这种用途的扩展。*

# android - 片段标签与务实地在布局中添加片段

> ID：13296799
> 
> 赞同：0
> 
> 时间：2012-11-08T20:01:11.367
> 
> 标签：android, static, calendar

**最终更新**

原来我的问题全错了。这就是我使用 Fragment 标签的方式。请参阅下面的答案以获得完整的解释。

**更新 3**：所以我继续搞砸了几个小时，没有这样的运气。我已经能够让它不会崩溃。但现在我相信我知道问题可能出在哪里。它让我`calendarAdapter`的 as null 因为它是 null，但不是出于我的意图。它似乎`onCreateView`运行了两次，一次显然是在发送任何内容之前和在我正式发送一些参数之后。这当然不应该发生......我想。我将在底部提供我的 ActionBar 设置的部分，以便您可以让我知道我是否做错了什么，以便按原样设置此行为。

* * *

由于某种原因，我对这个特定的事情有疑问，我不知道为什么。我有一个 Activity`MainDisplayActivity`和一个 Fragment `MainDislpayFragment`。可以想象，Activity 在应用启动时设置了 Fragment。现在这就是问题所在，我一直在尝试将`newInstance`来自日历的三个数字作为参数发送到构造函数中。然后我从构造函数中创建了日历。但是我的应用程序崩溃了。奇怪的是，当我阻止日历被静态字段使用时，应用程序按预期工作，但尝试使用来自构造函数的任何内容的日历会导致它崩溃。这是一个示例方法：

```
private static Calendar cal;

static MainDisplayFragment newInstance(Context context, int y, int m, int d) {

    c = context;
    MainDisplayFragment f = new MainDisplayFragment();
    //static global Calendar now
            cal = Calendar.getInstance();
            cal.set(y, m, d);
}//end of static newInstance method 
```

现在重要的是要注意，即使我尝试将 Calendar 取出并将其放入 onCreate 并且仅将静态整数作为全局返回并将它们设置在那里，它仍然会导致崩溃。值得注意的错误和奇怪的事情是它似乎认为 Calendar 出于某种原因为空。正如你所知道的那样，它肯定是被创造出来的。但现在我开始认为日历和静态字段存在问题。如果没有，那么我可能有一个错误，但如果可以的话，我想排除它。感谢任何人的回应。

**更新：**我应该提到我使用该日历信息只不过是传递到我的`MyCalendarAdapter`. 无论我是只发送数字作为参数还是日历本身，它都会崩溃。我看到的第一个空异常是我试图设置`MyCalendarAdapter`.

第 75 行将是这里的最后一行：

```
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {

    view = inflater.inflate(R.layout.main_fragment, container, false);
    calendarAdapter = new MyCalendarAdapter(cal.get(Calendar.YEAR), cal.get(Calendar.MONTH), cal.get(Calendar.DAY_OF_MONTH)); 
```

**更新 2**：

* * *

经过更多的混乱，我意识到问题出在`MyCalendarAdapter`，但这是一个没有意义的问题。如果您实例化一个不带参数的 calendarAdapter ，它似乎可以完美地工作，但是带参数它会崩溃。这是两个构造函数，`MyCalendarAdapter`因此人们可以看到看起来没有任何问题，这使情况变得更糟，因为我不知道如何解决这个问题。同样重要的是要知道我试图移动到片段的这段代码最初来自一个运行良好的活动。

```
public MyCalendarAdapter() {
    thisMonth = Calendar.getInstance();
    now = new MonthDisplayHelper(thisMonth.get(Calendar.YEAR), thisMonth.get(Calendar.MONTH));//creating Helper for month display
    currentDay = thisMonth.get(Calendar.DAY_OF_MONTH);//sets current day

    ...

}

public MyCalendarAdapter(int year, int month, int currentDay) {
    thisMonth = Calendar.getInstance();
    now = new MonthDisplayHelper(year, month);
    this.currentDay = currentDay;

    ...

} 
```

**完整的错误列表**：

* * *

```
11-08 18:26:35.710: E/AndroidRuntime(7839): FATAL EXCEPTION: main
11-08 18:26:35.710: E/AndroidRuntime(7839): java.lang.RuntimeException: Unable to start 
activity ComponentInfo{com.zeroe/com.zeroe.MainDisplayActivity}:   
android.view.InflateException: Binary XML file line #9: Error inflating class fragment
11-08 18:26:35.710: E/AndroidRuntime(7839):     at 
android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2059)
11-08 18:26:35.710: E/AndroidRuntime(7839):     at   
android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
11-08 18:26:35.710: E/AndroidRuntime(7839):     at 
android.app.ActivityThread.access$600(ActivityThread.java:130)
11-08 18:26:35.710: E/AndroidRuntime(7839):     at 
android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
11-08 18:26:35.710: E/AndroidRuntime(7839):     at 
android.os.Handler.dispatchMessage(Handler.java:99)
11-08 18:26:35.710: E/AndroidRuntime(7839):     at 
android.os.Looper.loop(Looper.java:137)
11-08 18:26:35.710: E/AndroidRuntime(7839):     at 
android.app.ActivityThread.main(ActivityThread.java:4745)
11-08 18:26:35.710: E/AndroidRuntime(7839):     at 
java.lang.reflect.Method.invokeNative(Native Method)
11-08 18:26:35.710: E/AndroidRuntime(7839):     at 
java.lang.reflect.Method.invoke(Method.java:511)
11-08 18:26:35.710: E/AndroidRuntime(7839):     at 
com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
11-08 18:26:35.710: E/AndroidRuntime(7839):     at    
com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
11-08 18:26:35.710: E/AndroidRuntime(7839):     at 
dalvik.system.NativeStart.main(Native Method)
11-08 18:26:35.710: E/AndroidRuntime(7839): Caused by: android.view.InflateException: 
Binary XML file line #9: Error inflating class fragment
11-08 18:26:35.710: E/AndroidRuntime(7839):     at 
android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:704)
11-08 18:26:35.710: E/AndroidRuntime(7839):     at 
android.view.LayoutInflater.rInflate(LayoutInflater.java:746)
11-08 18:26:35.710: E/AndroidRuntime(7839):     at 
android.view.LayoutInflater.inflate(LayoutInflater.java:489)
11-08 18:26:35.710: E/AndroidRuntime(7839):     at 
android.view.LayoutInflater.inflate(LayoutInflater.java:396)
11-08 18:26:35.710: E/AndroidRuntime(7839):     at 
android.view.LayoutInflater.inflate(LayoutInflater.java:352)
11-08 18:26:35.710: E/AndroidRuntime(7839):     at 
com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:256)
11-08 18:26:35.710: E/AndroidRuntime(7839):     at 
android.app.Activity.setContentView(Activity.java:1867)
11-08 18:26:35.710: E/AndroidRuntime(7839):     at 
com.zeroe.MainDisplayActivity.onCreate(MainDisplayActivity.java:60)
11-08 18:26:35.710: E/AndroidRuntime(7839):     at 
android.app.Activity.performCreate(Activity.java:5008)
11-08 18:26:35.710: E/AndroidRuntime(7839):     at 
android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
11-08 18:26:35.710: E/AndroidRuntime(7839):     at 
android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023)
11-08 18:26:35.710: E/AndroidRuntime(7839):     ... 11 more
11-08 18:26:35.710: E/AndroidRuntime(7839): Caused by: java.lang.NullPointerException
11-08 18:26:35.710: E/AndroidRuntime(7839):     at 
com.zeroe.MainDisplayFragment.onCreateView(MainDisplayFragment.java:80)
11-08 18:26:35.710: E/AndroidRuntime(7839):     at 
android.app.FragmentManagerImpl.moveToState(FragmentManager.java:807)
11-08 18:26:35.710: E/AndroidRuntime(7839):     at 
android.app.FragmentManagerImpl.moveToState(FragmentManager.java:1013)
11-08 18:26:35.710: E/AndroidRuntime(7839):     at 
android.app.FragmentManagerImpl.addFragment(FragmentManager.java:1112)
11-08 18:26:35.710: E/AndroidRuntime(7839):     at 
android.app.Activity.onCreateView(Activity.java:4664)
11-08 18:26:35.710: E/AndroidRuntime(7839):     at 
android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:680)
11-08 18:26:35.710: E/AndroidRuntime(7839):     ... 21 more 
```

**设置 Fragment 的 ActionBar 部分**

```
@Override
public boolean onNavigationItemSelected(int itemPosition, long itemId) {
    Toast.makeText(this, "Position is "+itemPosition, Toast.LENGTH_SHORT).show();
    if(itemPosition == 0) {
        FragmentTransaction ft = getFragmentManager().beginTransaction();

        //check to see if one already exists and remove it
        Fragment prev = getFragmentManager().findFragmentByTag(MAIN_FRAGMENT);
        if(prev!=null) {
            ft.remove(prev);
            Toast.makeText(this, "Fragment was found", Toast.LENGTH_SHORT).show();
        }
        MyCalendarAdapter calendarAdapter = new MyCalendarAdapter(year, month, day);
        //Log.d("MAINDISPLAYACTIVTY", "calendarAdapter year is "+calendarAdapter.getCalendar().getYear());
        currentFragment = MainDisplayFragment.newInstance(this, year, month, day, calendarAdapter);
        ft.add((MainDisplayFragment)currentFragment, MAIN_FRAGMENT);
        ft.setTransition(FragmentTransaction.TRANSIT_FRAGMENT_OPEN);
        //ft.addToBackStack(null); //i do not want this behavior
        ft.commit();
        return true;
    }
... continues on with the other cases 
```

**设置 ActionBar 的 Activity 中的 onCreate**

```
final ActionBar bar = getActionBar();
    bar.setDisplayShowTitleEnabled(false);
    bar.setNavigationMode(ActionBar.NAVIGATION_MODE_LIST);
    bar.setListNavigationCallbacks(new ArrayAdapter<String>(bar.getThemedContext(), android.R.layout.simple_list_item_1, android.R.id.text1,
                                                    new String[]{"MONTH", "WEEK", "DAY"}), this);

    if(savedInstanceState == null) {
        bar.setSelectedNavigationItem(0);
    } else {
        bar.setSelectedNavigationItem(savedInstanceState.getInt(SELECTED_NAVIGATION_STATE));
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T06:10:57.517

所以我弄清楚我的问题是什么。在有关 Fragments 的 Android 文档中，这一点并不太清楚。我在 main.xml 文件中使用了该`<fragment/>`标签。我正确使用了它，并且在创建我的 Fragment 时，我也正确设置了它。不幸的是，我没有得到我希望的行为。

事实证明，如果您在 xml 中使用片段标签，那么在`setContentView`运行时它也会立即运行您的 Fragment 类（至少当它在文件中遇到标签时）。这意味着如果您的 Fragment 依赖于您从中启动它的 Activity 的信息，它将没有它，并且基本上运行两次；当 setContentView 运行时，以及当您实际运行 Fragment 时。这很重要，因为我假设您可以选择任何一种方式来运行您的 Fragment。但实际上，你设计应用程序或处理它的方式实际上决定了你应该走哪条路，硬编码片段或在运行中务实。

也许这对 android 专家来说是显而易见的，但我是 Fragments 的新手，所以我猜这是一个菜鸟错误。无论哪种情况，这都应该在 Android 文档中详细说明。希望这可以帮助其他对这个问题完全困惑的人。

# c# - 如何在 C# 中验证组合框的值

> ID：13296801
> 
> 赞同：0
> 
> 时间：2012-11-08T20:01:20.893
> 
> 标签：c#, .net, winforms, c#-2.0

![在此处输入图像描述](../Images/36cb1c24002cdd8eb42efd2c4d0562cc.png)我有 6 个 C# 形式的组合框，它们都从同一列的数据库中填充。即用于使学生结果组合框填充主题名称。现在我想要的是如果已经在前一个组合框中选择了主题，如何从第二个组合框中删除主题名称。我使用组合框属性从数据库中填充每个组合框。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T21:09:25.293

首先，您可以通过以下方式创建一个`List<ComboBox>`并为每个`ComboBox`添加项目和`SelectedValueChanged`事件处理程序：

```
List<ComboBox> comboBoxes = new List<ComboBox>();
//here add your comboboxes to the list using the Add() method

foreach(ComboBox cb in comboboxes){
   cb.SelectedValueChanged += new EventHandler(comboBox_SelectedValueChanged);
   //add items to the ComboBox
} 
```

然后，当事件被触发时，使用属性和方法`SelectedValueChanged`从其他 ComboBoxes 中删除选定的项目：`SelectedItem``Items.Remove()`

```
private void comboBox_SelectedValueChanged(object sender, EventArgs e){
    //Fill the comboboxes
    ComboBox comboBox = (ComboBox)sender;
    if(comboBox.SelectedItem != null){
      foreach(ComboBox cb in comboboxes)
        cb.Items.Remove(comboBox.SelectedItem);
    }
} 
```

**PS：**如果用户从 ComboBox 中多次选择元素，则此方法效果不佳，因为它将从其他 ComboBox 中删除它们。所以这只是一个例子，它给你一些关于如何开发它的建议。总而言之，你必须改进它。

* * *

**编辑：** 因为你可能有一些问题来解决这个问题，所以我为你改进了它：

```
private void comboBox_SelectedValueChanged(object sender, EventArgs e){
   foreach(ComboBox cb in comboBoxes){
      //Here listItems is a list of elements you added firstly to the comboboxes
      if(cb.Items.Count < listItems.Count)
         foreach(object item in listItems){ 
             if(!cb.Items.Contains(item))
               cb.Items.Add(item);
         }
      }
   }

   //Remove the selected items in all the comboboxes
   ComboBox comboBox = (ComboBox)sender;
   if(comboBox.SelectedItem != null){
      for(int i = 0; i < comboBoxes.Count; i++){
         for(int j = 0; j < comboBoxes.Count; j++){
            if(i != j && comboBoxes[j].SelectedItem != null && comboBoxes[j].Contains(comboBoxes[j].SelectedItem))
              comboBoxes[i].Items.Remove(comboBoxes[j].SelectedItem);
         }
      }
   }
} 
```

如果你有太多的组合框，这可能会很慢，所以我试图让它尽可能快。但是在这种情况下，如果您有 6 个 ComboBox 控件，它应该可以很好地工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T21:39:19.323

您需要有一个被选中的项目列表，然后在事件 selectedValueChanged() 之后，您必须删除旧的组合框值并再次填充每个组合框。

```
 List<object> coll = new List<Object>();
    List<Object> dbItems = new List<Object>();
    private void FillComboBox(object currSelected, ComboBox control)
    {
        control.Items.Clear();
        foreach (object c in dbItems)
        {
            if ((coll.Contains(c) == false) || (c == currSelected))
            {
                control.Items.Add(c);
            }
        }
        control.SelectedItem = currSelected;
    }
    private void SelectedItemChanged()
    {
        foreach (object c in coll) {
            if ((comboBox1.SelectedItem != null && c.Equals(comboBox1.SelectedItem)) ||
                (comboBox2.SelectedItem != null && c.Equals(comboBox2.SelectedItem)) ||
                (comboBox3.SelectedItem != null && c.Equals(comboBox3.SelectedItem)))
            {
            }else{
                coll.Remove(c);
            }
        }
    }

    private void comboBox1_SelectedValueChanged(object sender, EventArgs e)
    {
        // That code must be in every combobox_selectedValueChanged
        SelectedItemChanged();
        FillComboBox(coll, comboBox1);
        FillComboBox(coll, comboBox2);
        FillComboBox(coll, comboBox3);
    } 
```

**PS：**对不起，但我不记得如何在组合框中获取以前选择的项目，所以当任何组合框选择的项目已更改时，我编写了附加方法。

# iphone - MPMediaQuery：搜索时查找元音变音和特殊字符

> ID：13296803
> 
> 赞同：1
> 
> 时间：2012-11-08T20:01:24.767
> 
> 标签：iphone, ios, ipad, cocoa-touch, mpmediaquery

我正在使用`MPMediaQuery`搜索用户库中的歌曲标题：

```
MPMediaPropertyPredicate *titlePredicate = [MPMediaPropertyPredicate predicateWithValue:titleString
                                                                            forProperty:MPMediaItemPropertyTitle
                                                                         comparisonType:MPMediaPredicateComparisonContains];

MPMediaQuery *query = [[MPMediaQuery alloc] init];
[query addFilterPredicate: titlePredicate];

NSArray* result = query.items; 
```

`titleString`是用户输入的`NSString`，取自`UISearchField`。这在大多数情况下都可以正常工作，但在某些情况下会失败：当您在桌面上使用 iTunes 时，您可以搜索“holle”，它会找到“Der Hölle Rache”。这不适用于我的方法。同样，搜索“que”不会找到“Qué pasa?”。有没有办法来解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T02:43:27.357

`MPMediaPropertyPredicate`当前不允许您指定任何`NSStringCompareOptions`. 这种情况需要一个变音符号不敏感搜索，它会忽略任何重音符号或其他变音符号。

一种解决方法（尽管根据库大小比理想的要慢）是使用变音符号和不区分大小写的搜索遍历整个媒体库，`NSString` `rangeOfString:options:`方法是：

```
MPMediaQuery *query = [[MPMediaQuery alloc] init];
NSArray *result = query.items;
NSString *searchString = @"que";

NSIndexSet *filteredSet = [result indexesOfObjectsWithOptions:NSEnumerationConcurrent
                                                  passingTest:^BOOL(MPMediaItem *song, NSUInteger idx, BOOL *stop) {
    NSString *songTitle = [song valueForProperty:MPMediaItemPropertyTitle];
    NSRange foundRange = [songTitle rangeOfString:searchString
                                          options:NSDiacriticInsensitiveSearch | NSCaseInsensitiveSearch];

    // rangeOfString:options: returns {NSNotFound, 0} if "que" is not found during search.
    if (foundRange.location != NSNotFound) { 
        return YES;
    } else
        return NO; 
}];

NSArray *filteredResult = [result objectsAtIndexes:filteredSet]; 
```

# c# - 通过绑定到不同的 TreeView selectedItem 来使用不同的数据模板

> ID：13296805
> 
> 赞同：2
> 
> 时间：2012-11-08T20:01:28.783
> 
> 标签：c#, wpf, treeview, selecteditem

我已经构建了一个显示不同元素的 WPF MVVM TreeView。

BaseElement
- CatA
-- SubItemA
- CatB
-- SubItemB

基于类，我想使用不同的数据模板。对于每种类型。

到目前为止，我可以连接到选定的项目，但我不确定如何管理不同的数据模板。

```
public class SubItem
{
    public string Type { get; set; }
    public string Name { get; set; }
} 
```

```
 <StackPanel Grid.Column="2" DataContext="{Binding ElementName=myTreeView, Path=SelectedItem}">
        <TextBox Text="{Binding Parent.Name}" />
        <TextBox Text="{Binding Path=Name, Mode=TwoWay}" />
    </StackPanel> 
```

[11 月 15 日更新]

```
 <HierarchicalDataTemplate x:Key="L3Template" ItemsSource="{Binding L4Collection}" ItemTemplate="{StaticResource L4Template}">
                <StackPanel Orientation="Horizontal">
                    <TextBlock Text="{Binding Name}" />
                </StackPanel>
            </HierarchicalDataTemplate>

            <HierarchicalDataTemplate x:Key="CategoryTemplate" ItemsSource="{Binding L3Collection}" ItemTemplate="{StaticResource L3Template}">
                <StackPanel>
                    <TextBlock Text="{Binding Name}" />
                </StackPanel>
            </HierarchicalDataTemplate>

            <HierarchicalDataTemplate x:Key="L1Template" ItemsSource="{Binding CategoryCollection}" ItemTemplate="{StaticResource CategoryTemplate}">
                <StackPanel>
                    <TextBlock Text="{Binding Name}" />
                </StackPanel>
            </HierarchicalDataTemplate> 
```

[/11 月 15 日更新]

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T21:25:33.897

如果子项是不同的类，则相当简单：将每个类的数据模板添加到资源部分。如果子项需要基于枚举属性值的不同模板，那么您将需要一个 datatemplateselector。这有点麻烦。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T08:03:33.810

假设您将类命名为 L1Class、L3Class en Category 和 local 指向这些类的命名空间：

```
 <TreeView ...>
        <TreeView.Resources>
                <HierarchicalDataTemplate DataType="{x:Type local:L3Class}" ItemsSource="{Binding L4Collection}" >
                    <StackPanel Orientation="Horizontal">
                        <TextBlock Text="{Binding Name}" />
                    </StackPanel>
                </HierarchicalDataTemplate>

                <HierarchicalDataTemplate DataType="{x:Type local:Category}" ItemsSource="{Binding L3Collection}" >
                    <StackPanel>
                        <TextBlock Text="{Binding Name}" />
                    </StackPanel>
                </HierarchicalDataTemplate>

                <HierarchicalDataTemplate DataType="{x:Type local:L1Class}" ItemsSource="{Binding CategoryCollection}" >
                    <StackPanel>
                        <TextBlock Text="{Binding Name}" />
                    </StackPanel>
                </HierarchicalDataTemplate>
            </TreeView.Resources>
    </TreeView> 
```

请注意资源部分中隐式数据模板的使用（没有键，但是 DataType！）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-20T12:28:37.937

以防万一它会帮助别人：

```
 <ContentPresenter Grid.Column="2" Content="{Binding ElementName=myTreeView, Path=SelectedItem}">
            <ContentPresenter.Resources>
                <DataTemplate DataType="{x:Type local:L1ViewModel}">
                    <StackPanel>
                        <TextBlock Text="{Binding Name}" />
                    </StackPanel>
                </DataTemplate>
                <DataTemplate DataType="{x:Type local:CategoryViewModel}">
                    <StackPanel>
                        <TextBlock Text="{Binding Name}" />
                    </StackPanel>
                </DataTemplate>

                <DataTemplate DataType="{x:Type local:L3ViewModel}">
                    <StackPanel>
                        <TextBlock Text="{Binding Name}" />
                    </StackPanel>
                </DataTemplate>

                <DataTemplate DataType="{x:Type local:L4ViewModel}">
                    <StackPanel>
                         <TextBox Text="{Binding Parent.Name}" />
                        <TextBlock Text="{Binding Name}" />
                    </StackPanel>
                </DataTemplate>
            </ContentPresenter.Resources>
          </ContentPresenter> 
```

# selenium - 使用 Selenium 网格和测试套件并行执行

> ID：13296808
> 
> 赞同：0
> 
> 时间：2012-11-08T20:01:37.140
> 
> 标签：selenium, selenium-webdriver, selenium-grid

我正在研究 Selenium，我目前有一个集线器连接到两个运行 linux 和所有浏览器的 vm。

我能够启动浏览器。但是，尽管我有两个 vm，但我的所有测试都在单个 vm 上的单个浏览器上运行。Selenium 不会在 vm 中启动多个浏览器。我已将最大实例设置为 5，它反映在我的 gris 控制台中。我有需要在 linux 和 windows vm 上运行的测试套件，并且它必须同时运行。我使用 WebDriver 像这样调用我的网格。

```
 capabilities = new DesiredCapabilities();
           capabilities.setBrowserName("firefox");
           driver = new RemoteWebDriver(new URL("http://XXX.XXX.XXX.:4444/wd/hub"), capabilities); 
```

这就是我创建测试套件的方式：

```
testNames.add(SupportPortalTestSuite.class.getName());
        JUnitCore.main(testNames.toArray(new String[testNames.size()])); 
```

此外，当我注册我的节点时，我得到：

```
11:28:47.403 INFO - using the json request : {"class":"org.openqa.grid.common.RegistrationRequest","capabilities":[{"platform":"LINUX","seleniumProtocol":"Selenium","browserName":"*firefox","maxInstances":5},{"platform":"LINUX","seleniumProtocol":"Selenium","browserName":"*googlechrome","maxInstances":5},{"platform":"LINUX","seleniumProtocol":"Selenium","browserName":"*iexplore","maxInstances":1},{"platform":"LINUX","seleniumProtocol":"WebDriver","browserName":"firefox","maxInstances":5},{"platform":"LINUX","seleniumProtocol":"WebDriver","browserName":"chrome","maxInstances":5},{"platform":"WINDOWS","seleniumProtocol":"WebDriver","browserName":"internet explorer","maxInstances":1}],"configuration":{"port":5555,"register":true,"host":"10.235.132.161","proxy":"org.openqa.grid.selenium.proxy.DefaultRemoteProxy","maxSession":5,"hubHost":"10.235.1.50","role":"node","registerCycle":5000,"hub":"http://10.235.1.50:4444/grid/register","hubPort":4444,"url":"http://10.235.132.161:5555","remoteHost":"http://10.235.132.161:5555"}}
11:28:47.407 INFO - starting auto register thread. Will try to register every 5000 ms. 
```

我需要同时在 vms 上的所有可用浏览器上运行测试。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T20:19:19.937

Selenium Grid 使您能够并行运行测试，但不会自动处理它。这通常由为您处理它的测试运行程序完成。一些框架，如 TestNG 有这个内置的，但可能需要根据您的代码进行一些自定义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-17T11:41:46.987

虽然首选使用一些框架，例如 testNG，但您也可以使用普通的 java Threaded 方式运行它们。

# android - 如何使用 eclipse 在我的模拟器上运行 apk 文件？

> ID：13296811
> 
> 赞同：0
> 
> 时间：2012-11-08T20:01:50.150
> 
> 标签：android, eclipse, android-emulator, emulation, apk

我尝试使用 adb 命令提示符，但它一直说 apk not found

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T20:05:19.617

尝试这个：

```
adb -s your-emulator-name install C:/path/to/file.apk 
```

或者，如果您只运行一个模拟器：

```
adb install C:/path/to/file.apk 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T20:13:21.953

当我不注意时，我有时会不小心碰到这个。如果它显示“找不到 APK”，您可能在 shell 中，因此它正在设备中搜索 APK 而不是您计算机上的位置。

确保在执行安装之前查看提示并确保没有输入类似“adb -e shell”之类的内容。

要安装到您的模拟器上，命令是：

```
adb -e install /path/name/apkname.apk 
```

# ember.js - 使用带有 ember-data 的 ember.js 无法获取嵌入的对象属性

> ID：13296812
> 
> 赞同：7
> 
> 时间：2012-11-08T20:01:50.837
> 
> 标签：ember.js, ember-data

我是 ember 的新手，并尝试了解它是如何工作的。

我已经定义了一个带有fixturesAdapter 作为适配器的商店（rev 7）。我定义了两个模型：

```
App.Tag = DS.Model.extend({
    name: DS.attr('string'),
    item: DS.belongsTo('App.Item')
}); 
```

和：

```
App.Item = DS.Model.extend({
    name: DS.attr('string'),
    tags: DS.hasMany(App.Tag, { embedded:true }),
}) 
```

我还填充了它们相关的固定装置，最后填充了一个控制器：

```
App.itemsController = Ember.ArrayController.create({
    content: App.store.findAll(App.Item)
}); 
```

我在 App.Item 模型中定义了一个函数：

```
tagline: function(){
    return this.get('tags').toArray().map(function(tag){
        return tag.get('name');
    }).join(',');
}.property('tags.@each.isLoaded') 
```

这是相应的jsfiddle：http: [//jsfiddle.net/K286Q/29/](http://jsfiddle.net/K286Q/29/)

我的问题是：

*   我究竟做错了什么？
*   为什么它会看到与第一项关联的多个标签，但无法获取它们的名称？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-09T03:04:11.823

您在当前版本的 ember-data 中遇到了一些重大更改。

第一个是，自 ember-data 修订版 6 以来，ID 是字符串规范化的，并且必须在夹具中表示为字符串。请注意，REST 适配器将转换数字/字符串，但夹具适配器不进行任何转换。这是一个常见的混淆来源（参见[上一个问题](https://stackoverflow.com/questions/13296022/my-computed-values-stopped-working-with-latest-version-of-ember-data-js)）。

第二个是对嵌入数据对象的支持已暂时从 ember-data 中删除。`{embedded: true}`我很确定会以比在属性中支持更好的方式重新引入此功能。IMO，嵌入更多的是适配器问题，并不真正属于模型的定义。

我调整了你的固定装置，让你的例子在这里工作：http: [//jsfiddle.net/dgeb/zHz4Y/](http://jsfiddle.net/dgeb/zHz4Y/)

# java - 线程“main”java.lang.ArrayIndexOutOfBoundsException 中的错误消息异常：

> ID：13296816
> 
> 赞同：1
> 
> 时间：2012-11-08T20:01:55.223
> 
> 标签：java, exception, error-handling

我有此代码，但我不断收到此错误消息，我不知道为什么？

> 线程“主”java.lang.ArrayIndexOutOfBoundsException 中的异常：2 在 javaapplication28.JavaApplication28.main(JavaApplication28.java:38) 1 2 Java 结果：1

```
public static void main(String[] args) {   

    Scanner input = new Scanner(System.in);
        System.out.println("This program transposes a matrix.");
        System.out.println("Please enter the number of rows");
        int rows = input.nextInt();
        System.out.println("User enters: "+rows);
        System.out.println("Please enter the number of columns");
        int columns = input.nextInt();
        System.out.println("User enters: "+columns);
        int [][]matrix=new int[rows][columns];
        for(int i=0;i<matrix.length;i++){
            for(int j=0;j<matrix[i].length;j++){
             System.out.print("Enter value for row [" +i+ "] column [" +j+"]:");
                matrix[i][j]=input.nextInt();  
            }
        }
        for(int i=0;i<=matrix.length;i++){
             System.out.println();
             for(int j=0;j<=matrix.length;j++){
                 System.out.print(matrix[i][j]+"  ");           
             }
         }
        System.out.println("The transpose of this matrix has" +columns+"rows and"+rows+"columns and the transpose is:");
        for(int i=0;i<=matrix.length;i++){
             System.out.println();
             for(int j=0;j<=matrix.length;j++){
                 System.out.print(matrix[j][i]+"  ");
    }
}}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T20:10:59.353

您从 0 循环运行到 length+1 `i<=matrix.length`。`=`从语句中删除`for`并在内部循环中添加：`matrix[i].length`而不是`matrix.length`获取列数而不是行。

这是有效的代码：

```
for(int i=0;i<matrix.length;i++){
        System.out.println();
        for(int j=0;j<matrix[i].length;j++){
            System.out.print(matrix[i][j]+"  ");           
        }
    }
    System.out.println("The transpose of this matrix has" +columns+"rows and"+rows+"columns and the transpose is:");
    for(int i=0;i<matrix.length;i++){
        System.out.println();
        for(int j=0;j<matrix[i].length;j++){
            System.out.print(matrix[j][i]+"  ");
        }
    }} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T20:27:55.457

如果你从`for`0 开始你的循环索引迭代器，你应该使用`<`而不是`<=`当它是数组的长度时，因为否则它就像你试图获取 (size n) 数组的 (n+1)th 元素是什么导致了`ArrayIndexOutOfBoundsException`异常

# c++ - C++ 着色控制台输出

> ID：13296819
> 
> 赞同：0
> 
> 时间：2012-11-08T20:02:03.707
> 
> 标签：c++, winapi

如何从字符数组中为特定项目着色？所以我有类似的东西：char a[50] where a[4] = "c"。我怎样才能为那个角色着色？我只知道如何使用这样的东西为所有字符着色：

```
HANDLE hConsole;
hConsole = GetStdHandle (STD_OUTPUT_HANDLE);
SetConsoleTextAttribute
(hConsole, FOREGROUND_RED | FOREGROUND_INTENSITY); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T20:05:13.743

好吧，您必须一次打印一个字符，然后在 color1 和 2 之间切换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T15:32:02.813

您也可以使用[WriteConsoleOutput()](http://msdn.microsoft.com/en-us/library/windows/desktop/ms687404%28v=vs.85%29.aspx)但您需要明确管理这些字符的定位，因为它不使用光标。

# facebook - facebook JS API 登录在新选项卡中打开，而不是在 IE 7-8 中弹出

> ID：13296821
> 
> 赞同：0
> 
> 时间：2012-11-08T20:02:08.500
> 
> 标签：facebook, internet-explorer, fbconnect, facebook-login, fbjs

我有一个带有 facebook 连接的网站和一个 facebook 页面选项卡，用户必须登录到 facebook。

我使用 JS API 并打开一个弹出窗口让用户连接。

它在任何地方都可以正常工作，但在 7 和 8 中。

而不是在弹出窗口中打开，而是在新选项卡中打开。用户可以登录，但在它保持打开状态并重定向到空白页面后（https://www.facebook.com/dialog/permissions.request）。

登录成功，如果页面被刷新，则用户已登录，但我需要它是一个弹出窗口并在之后自行关闭并执行回调，以便我可以像在其他浏览器中一样刷新页面。

任何人都知道如何解决这个问题，尝试了我能找到的一切，但没有任何效果。

我的代码的一部分：$`

```
<div id="fb-root"></div>
            <script type="text/javascript">
                window.fbAsyncInit = function() {
                    FB.init({
                          appId   : '<cfoutput>#appId#</cfoutput>',
                          cookie  : true, // enable cookies to allow the server to access the session
                          oauth   : true, // OAuth 2.0
                          status  : true, // check login status
                          xfbml   : true, // parse XFBML
                          channelUrl: 'http://192.168.1.96/gocoupons/OngletFacebook/channelUrl.cfm' //custom channel
                    });
                };

                (function(d){
                 var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
                 if (d.getElementById(id)) {return;}
                 js = d.createElement('script'); js.id = id; js.async = true;
                 js.src = "//connect.facebook.net/en_US/all.js";
                 ref.parentNode.insertBefore(js, ref);
                }(document));

                /*(function() {
                    var e = document.createElement('script');
                    e.src = document.location.protocol + '//connect.facebook.net/en_US/all.js';
                    e.async = true;
                    document.getElementById('fb-root').appendChild(e);
                }());*/
                function login() {
                    //$.cookie('fbsr_<cfoutput>#appId#</cfoutput>',null);
                    FB.login(function(response) {
                        if (response.authResponse) {
                            window.location.reload();
                        }
                    }, {scope: 'email,user_checkins'});
                }
                function addToPage() {
                    FB.ui({method: 'pagetab'}, function(response){
                        $('#pageid').val(JSON.stringify(response));
                        $('#formAjoutPage').submit();
                    });
                }
            </script> 
```

`

# c# - Deserialize KeyValuePair Json.Net

> ID：13296824
> 
> 赞同：6
> 
> 时间：2012-11-08T20:02:18.680
> 
> 标签：c#, json.net, deserialization

I need to deserialize a `string` like this

```
{
  "example": {
    "id": "12345",
    "name": "blabla"
  }
}
```

into a `KeyValuePair<string, string>` or something similiar.

I tried:

```
var pair = JsonConvert.DeserializeObject<KeyValuePair<string, string>>(d["example"].ToString()); 
```

(`d["example"]` returns the json string like shown above)

The result was an empty `KeyValuePair<string, string>`.

Is there any way to solve this?

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-08T20:07:42.820

```
string json = 
     @"{
          ""example"": {
          ""id"": ""12345"",
          ""name"": ""blabla""
          }
        }";

var jobj =  JObject.Parse(json);
var dict = jobj["example"]
            .Children().Cast<JProperty>()
            .ToDictionary(x => x.Name, x => (string)x.Value); 
```

or

```
var dict = jobj["example"].ToObject<Dictionary<string, string>>(); 
```

# c++ - 在C ++中从向量读取字符串直到空格

> ID：13296830
> 
> 赞同：0
> 
> 时间：2012-11-08T20:02:52.597
> 
> 标签：c++

这可能很容易，但我不确定如何。我尝试搜索多个网站，是的，谷歌并在此找不到任何内容。

我的矢量`result[0]`看起来像这样

```
A3 * * B4 * * 
```

宣言

```
vector<string> result = v.formVectorFile("Prj3 Config.txt"); 
```

我知道它`cin`会一直读取到空格，所以我试图用它来解决这个问题。如果我直接阅读，`fstream`我可以阅读直到空白，但我试图用向量内的字符串来做到这一点，而类似的东西`result[0] >> s;`显然不起作用。

我需要阅读直到它碰到一个空白然后阅读下一个直到空白。等等......所以`A3`自己提取。对其进行操作然后提取`*`等...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T20:12:03.157

您的问题不清楚，因为您没有准确地告诉我们是什么`result`。

如果我们可以假设它`result`是 a `std::vector<std::string>`，那么您可以执行以下操作：

```
std::istringstream iss(result[0]); // consider only first string in vector
std::string item;
while(iss >> item) {
  std::cout << "I found: " << item << "\n";
} 
```

如果我们假设`result`是`std::vector<char>`，那么您可以这样做：

```
std::string s(result.begin(), result.end()); // consider entire vector as single string
std::istringstream iss(s);
while(iss >> item) {
  std::cout << "I found: " << item << "\n";
} 
```

# html - 如何在 CSS 中正确设置宽度 - 需要修复 Mac 和 iPad 上 Safari 的错误

> ID：13296832
> 
> 赞同：0
> 
> 时间：2012-11-08T20:03:04.173
> 
> 标签：html, ios, css, macos, safari

我正在制作页面[http://www.rhemapress.pl/www_physis/index.php?id=1](http://www.rhemapress.pl/www_physis/index.php?id=1)。如您所见，标题背景为 100% 宽度（橙色）。它是 中的第一个元素`<body>`。代码是：`<div id="header"></div>`. 这个元素的 CSS 是：

```
#header {
width: 100%;
height: 174px;
background-image: url("img/top-line.jpg");
position: absolute;
z-index: 6; 
margin: 0px 0px 0px 0px;
} 
```

在 Mac 上的 Safari 上没问题。当我在 iPad 上使用 Safari 时，标题设置不正确 - 它不是 100% 宽度。

问题出在哪里？你能帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T20:23:28.783

在查看您的代码后，我打赌您需要元视口标签..

```
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T20:25:47.500

尝试添加

```
<meta name="viewport" content="width=device-width, initial-scale=1.0"> 
```

给你的`<head></head>`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T21:03:07.903

谢谢大家的回答。我认为不可能正确地做到这一点，但如果我错了，那就用正确的答案来回应。我将`#header`背景移到`<body>`CSS 中并设置`repeat-x`. 现在它工作正常，但它不能解决`100% width`笔记本和移动设备（ipad）上的元素问题。

# actionscript-3 - 在一些音频按钮上添加暂停按钮的操作脚本

> ID：13296834
> 
> 赞同：1
> 
> 时间：2012-11-08T20:03:09.160
> 
> 标签：actionscript-3

我目前正在使用以下代码播放项目库中的录音。

```
import flash.media.Sound;
import flash.media.SoundChannel;
import flash.events.MouseEvent;

var sound1:Sound = new audio1();
var sound2:Sound = new audio2();

var mySoundChannel:SoundChannel = new SoundChannel();

function stopSound():void
{
   //This stops all sound in the sound channel. 
   //If there is nothing playing, nothing happens.
   mySoundChannel.stop();
}

//In this function, we create an argument that allows us to tell the function 
//what sound to we want it to play.
function playSound(soundname:String):void
{
   try
   {
      mySoundChannel = this[soundname].play(0, 0);
   }
   catch(error:ReferenceError)
   {
      trace("playSound: That sound name doesn't exist.");
      return;
   }
 }

//Hook up buttons-->
button1.buttonMode = true;
button1.useHandCursor = true;

button2.buttonMode = true;
button2.useHandCursor = true;

button1.addEventListener(MouseEvent.CLICK, button1click);
button2.addEventListener(MouseEvent.CLICK, button2click);

function button1click(evt:Event):void
{
   stopSound();
   playSound("sound1");
}

function button2click(evt:Event):void
{
   stopSound();
   playSound("sound2");
} 
```

单击按钮时，我需要暂停当前播放的音频。我该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T20:35:58.953

您需要对当前代码执行五项操作才能暂停和恢复当前播放的声音：

1.  创建一个存储当前播放声音名称的变量，以及一个存储音频暂停位置的变量。
2.  创建暂停功能。
3.  创建简历功能。
4.  展开当前 playSound 和 stopSound 函数以使用新变量。
5.  连接按钮事件监听器。

**步骤1：**

```
var currentSound:String = "";
var pausePosition:Number = 0; 
```

**第 2 步：**我们将在刚刚创建的第二个变量中保存音频的当前位置。[我们可以使用mySoundChannel.position](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/media/SoundChannel.html#position)属性获取音频的当前播放位置，该属性返回一个 Number 值（与我们给 pausePosition 变量的 Number 类型匹配）。

```
function pauseSound():void
{
   //If there's a song to pause...
   if(currentSound != "")
   {
      //Get pause position.
      pausePosition = mySoundChannel.position;
      //Stop the sound directly.
      mySoundChannel.stop();
   }
} 
```

请注意，我们没有调用 stopSound()。这是有充分理由的。我们很快将在该函数中添加一行我们不想在 pauseSound() 中使用的额外代码。

**第 3 步：**现在我们创建恢复音频的功能。请注意，这与 playSound() 不同。我们告诉它从 pausePosition 开始播放，而不是从 0（声音片段的开头）开始播放。

```
function resumeSound():void
{
   //If there's a song to resume...
   if(currentSound != "")
   {
      //Start playing the current audio from the position we left off at.
      mySoundChannel = this[currentSound].play(pausePosition);
   }
} 
```

**第 4 步：**由于我们现在正在使用在第 1 步中声明的变量，因此我们需要调整 playSound() 和 stopSound() 的工作方式。

在 playSound() 中，我们不只是将 soundname 传递给声道，而是将 soundname 保存到 currentSound。

```
function playSound(soundname:String):void
{
   try
   {
      currentSound = soundname
      mySoundChannel = this[currentSound].play(0, 0);
   }
   catch(error:ReferenceError)
   {
      trace("playSound: That sound name doesn't exist.");
      return;
   }
} 
```

在 stopSound() 中，我们需要在停止时实际清除 currentSound 和 pausePosition 变量，以确保 resumeSound 在我们完全停止后不会启动音频。

```
function stopSound():void
{
   //This stops all sound in the sound channel. 
   //If there is nothing playing, nothing happens.
   mySoundChannel.stop();

   //Clear our variables.
   currentSound = "";
   pausePosition = 0;
} 
```

**问题警告：**通常，您可以通过在以下代码中的第二个参数（我有 5）中传递除 0 以外的整数来循环音频：

```
mySoundChannel = this[currentSound].play(0, 5); 
```

在上面的代码中，声音将从头开始播放，并重复五次。

但是，如果您从 0 以外的任何位置开始播放音频，实际上会发生的是音频将在您开始的位置循环，而不是在开头。

也就是说，如果你使用这段代码：

```
mySoundChannel = this[currentSound].play(1000, 5); 
```

声音将循环五次，但每次声音在循环中重新开始时，它将从位置 1000 开始播放，而不是声音的开头 (0)。

我希望这能回答你的问题！

# ruby - 将哈希数组转换为哈希数组

> ID：13296841
> 
> 赞同：3
> 
> 时间：2012-11-08T20:03:31.647
> 
> 标签：ruby, arrays, hash, multidimensional-array, permutation

我有一组哈希数组。

```
items = 
[{ "item_9": 152 }, { "item_2": 139 }, { "item_13": 138 }, { "item_72": 137 }, { "item_125": 140 }, { "item_10": 144 }]
[{ "item_9": 152 }, { "item_2": 139 }, { "item_13": 138 }, { "item_72": 137 }, { "item_125": 140 }, { "item_10": 146 }]
[{ "item_9": 152 }, { "item_2": 139 }, { "item_13": 138 }, { "item_72": 137 }, { "item_125": 140 }, { "item_10": 147 }]
[{ "item_9": 152 }, { "item_2": 139 }, { "item_13": 138 }, { "item_72": 137 }, { "item_125": 140 }, { "item_10": 148 }]
[{ "item_9": 152 }, { "item_2": 139 }, { "item_13": 138 }, { "item_72": 137 }, { "item_125": 140 }, { "item_10": 153 }]
.
.
.
[{ "item_9": 152 }, { "item_2": 145 }, { "item_13": 150 }, { "item_72": 154 }, { "item_125": 141 }, { "item_10": 144 }]
[{ "item_9": 152 }, { "item_2": 145 }, { "item_13": 150 }, { "item_72": 154 }, { "item_125": 141 }, { "item_10": 146 }]
[{ "item_9": 152 }, { "item_2": 145 }, { "item_13": 150 }, { "item_72": 154 }, { "item_125": 141 }, { "item_10": 147 }]
[{ "item_9": 152 }, { "item_2": 145 }, { "item_13": 150 }, { "item_72": 154 }, { "item_125": 141 }, { "item_10": 148 }]
[{ "item_9": 152 }, { "item_2": 145 }, { "item_13": 150 }, { "item_72": 154 }, { "item_125": 141 }, { "item_10": 153 }] 
```

我想做的是将它更改为哈希数组...

```
items =
{"item_9"=>152, "item_2"=>145, "item_13"=>150, "item_72"=>154, "item_125"=>141, "item_10"=>146}
{"item_9"=>152, "item_2"=>145, "item_13"=>150, "item_72"=>154, "item_125"=>141, "item_10"=>147}
{"item_9"=>152, "item_2"=>145, "item_13"=>150, "item_72"=>154, "item_125"=>141, "item_10"=>148}
{"item_9"=>152, "item_2"=>145, "item_13"=>150, "item_72"=>154, "item_125"=>141, "item_10"=>153} 
```

我相信我可以使用...

```
items.map! { |item| item.reduce({}, :merge) } 
```

但是，它的性能不是很好。至少当您拥有 1.4 亿条记录时，它的性能还不够。有一个更好的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T20:38:25.967

也许更长一点，但它的工作速度更快：

```
require 'benchmark'

items = [
  [{ item_9: 152 }, { item_2: 139 }, { item_13: 138 }, { item_72: 137 }, { item_125: 140 }, { item_10: 146 }],
  [{ item_9: 152 }, { item_2: 139 }, { item_13: 138 }, { item_72: 137 }, { item_125: 140 }, { item_10: 147 }],
  [{ item_9: 152 }, { item_2: 139 }, { item_13: 138 }, { item_72: 137 }, { item_125: 140 }, { item_10: 148 }],
  [{ item_9: 152 }, { item_2: 139 }, { item_13: 138 }, { item_72: 137 }, { item_125: 140 }, { item_10: 153 }],
  [{ item_9: 152 }, { item_2: 145 }, { item_13: 150 }, { item_72: 154 }, { item_125: 141 }, { item_10: 144 }],
  [{ item_9: 152 }, { item_2: 145 }, { item_13: 150 }, { item_72: 154 }, { item_125: 141 }, { item_10: 146 }],
  [{ item_9: 152 }, { item_2: 145 }, { item_13: 150 }, { item_72: 154 }, { item_125: 141 }, { item_10: 147 }],
]

n = 100_000
Benchmark.bm do |b|
  b.report do
    n.times do |i|
      items.map { |item| item.reduce({}, :merge) }
    end
  end
  b.report do
    n.times do |i|
      # the winer
      items.map { |item| item.reduce({}, :update) }
    end
  end
  b.report do
    n.times do |i|
      items.map { |i| i.inject({}) { |f,c| f.update c } }
    end
  end
end 
```

正如@tokland 建议的那样，`item.reduce({}, :update)`速度更快：

```
 user     system      total        real
6.300000   0.080000   6.380000 (  6.386180)
1.840000   0.020000   1.860000 (  1.860073)
2.220000   0.020000   2.240000 (  2.237294) 
```

谢谢@tokland

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T20:29:53.143

由于性能是一个问题，可能是时候进行`for`循环`yield`了，并注意有关数据的有趣事实（如果有的话）。例如，您的数据似乎有许多重复项。这是规律还是巧合？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-30T03:50:51.160

如果您确定您有一个两级数组（对中没有其他数组）并且每对中有两个项目，那么使用它会更快更短：

```
array = [['A', 'a'], ['B', 'b'], ['C', 'c']]
hash = Hash[*array.flatten] 
```

对于超过两级的深度数组，这将给出错误的结果甚至错误（对于某些输入）。

```
array = [['A', 'a'], ['B', 'b'], ['C', ['a', 'b', 'c']]]
hash = Hash[*array.flatten]
# => {"A"=>"a", "B"=>"b", "C"=>"a", "b"=>"c"} 
```

但是，如果您运行的是 Ruby 1.8.7 或更高版本，您可以将参数传递给 Array#flatten 并使其仅展平一层：

```
# on Ruby 1.8.7+
hash = Hash[*array.flatten(1)]
# => {"A"=>"a", "B"=>"b", "C"=>["a", "b", "c"]} 
```

# windows-phone-7 - 如何在不暂停背景音频播放器的情况下重复单个声音？

> ID：13296843
> 
> 赞同：6
> 
> 时间：2012-11-08T20:03:50.940
> 
> 标签：windows-phone-7, windows-phone-7.1

我需要后台播放器在一个循环中播放单个曲目，而结束和开始之间没有暂停。我怎么能实现它？

我试图通过 AudioPlayerAgent 来实现它，但它无法删除短暂但留在这里的暂停。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T09:04:47.410

也许你应该看看BackgroudAudioPlayer。

更多信息和一些示例可在此处获得 =>

[http://msdn.microsoft.com/en-us/windowsphonetrainingcourse_musicplayerlab_topic2.aspx](http://msdn.microsoft.com/en-us/windowsphonetrainingcourse_musicplayerlab_topic2.aspx)

也许您可以使用事件 PlayStateChanged 再次启动相同的音乐。

希望能帮助到你 ：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T19:43:08.783

使用 XNA 库怎么样？

```
Song song = Content.Load<Song>("BackgroundMusic");
MediaPlayer.Play(song);
MediaPlayer.Volume = 0.5f;
MediaPlayer.IsRepeating = true; 
```

我不确定它是否按您的意愿工作。

# wcf - 具有多个文件的 WCF 多部分/表单数据

> ID：13296850
> 
> 赞同：0
> 
> 时间：2012-11-08T20:04:12.217
> 
> 标签：wcf, multipartform-data

我在任何地方都找不到任何关于如何处理请求中包含多个文件的多部分/表单数据的示例。

我正在尝试构建一个 WCF 服务端点，它在一个文本文件中包含一组参数，然后是两个图像文件，总而言之，在一篇文章中包括三个文件。使用 Fiddler，我能够构建请求，它看起来像这样：

```
HEADERS: Content-Type: multipart/form-data; boundary=-------------------------acebdf13572468
         User-Agent: Fiddler
         Host: dhiibews.brandonb.com
         Content-Length: 107865
REQUESTBODY: ---------------------------acebdf13572468
             Content-Disposition: form-data; name="Json"; filename="depositcheckrequest.txt"
             Content-Type: application/json

             <@INCLUDE *C:\depositcheckrequest.txt*@>
             ---------------------------acebdf13572468
             Content-Disposition: form-data; name="frontImage"; filename="front.jpg"
             Content-Type: image/jpeg

             <@INCLUDE *C:\front.jpg*@>
             ---------------------------acebdf13572468
             Content-Disposition: form-data; name="rearImage"; filename="rear.jpg"
             Content-Type: image/jpeg

             <@INCLUDE *C:\rear.jpg*@>
             ---------------------------acebdf13572468-- 
```

包含标签基本上最终将文件内容作为原始数据吐出。

我一直在搜索，我能找到的只是能告诉我如何获取一个文件信息的人，在我的情况下，这个文件最终是第一个文件。我不想只得到一个文件；如您所见，我正在尝试上传三个文件。

如何在单个多部分/表单数据 POST 请求中解析多个文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T23:45:15.103

好的，我想出了一个解决方案。事实证明，[Nancyfx](https://github.com/NancyFx/Nancy/tree/master/src/Nancy)框架包括一个多部分数据处理器，它为您将边界分成子流。所以我从 Nancy 的源代码中窃取了相关文件并将它们复制到我的项目中。相关文件为：

**HttpMultipart.cs：**

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;

namespace MyProjectNamespace
{
    using System.Collections.Generic;
    using System.IO;
    using System.Linq;
    using System.Text;

    /// <summary>
    /// Retrieves <see cref="HttpMultipartBoundary"/> instances from a request stream.
    /// </summary>
    public class HttpMultipart
    {
        private const byte LF = (byte)'\n';
        private readonly byte[] boundaryAsBytes;
        private readonly HttpMultipartBuffer readBuffer;
        private readonly MemoryStream requestStream;
        private readonly byte[] closingBoundaryAsBytes;

        /// <summary>
        /// Initializes a new instance of the <see cref="HttpMultipart"/> class.
        /// </summary>
        /// <param name="requestStream">The request stream to parse.</param>
        /// <param name="boundary">The boundary marker to look for.</param>
        public HttpMultipart(Stream requestStream, string boundary)
        {
            this.requestStream = new MemoryStream(ToByteArray(requestStream));
            this.boundaryAsBytes = GetBoundaryAsBytes(boundary, false);
            this.closingBoundaryAsBytes = GetBoundaryAsBytes(boundary, true);
            this.readBuffer = new HttpMultipartBuffer(this.boundaryAsBytes, this.closingBoundaryAsBytes);
        }

        /// <summary>
        /// Gets the <see cref="HttpMultipartBoundary"/> instances from the request stream.
        /// </summary>
        /// <returns>An <see cref="IEnumerable{T}"/> instance, containing the found <see cref="HttpMultipartBoundary"/> instances.</returns>
        public IEnumerable<HttpMultipartBoundary> GetBoundaries()
        {
            return
                (from boundaryStream in this.GetBoundarySubStreams()
                 select new HttpMultipartBoundary(boundaryStream)).ToList();
        }

        private static byte[] GetBoundaryAsBytes(string boundary, bool closing)
        {
            var boundaryBuilder = new StringBuilder();

            boundaryBuilder.Append("--");
            boundaryBuilder.Append(boundary);

            if (closing)
            {
                boundaryBuilder.Append("--");
            }
            else
            {
                boundaryBuilder.Append('\r');
                boundaryBuilder.Append('\n');
            }

            var bytes =
                Encoding.ASCII.GetBytes(boundaryBuilder.ToString());

            return bytes;
        }

        private IEnumerable<HttpMultipartSubStream> GetBoundarySubStreams()
        {
            var boundarySubStreams = new List<HttpMultipartSubStream>();
            var boundaryStart = this.GetNextBoundaryPosition();

            while (MultipartIsNotCompleted(boundaryStart))
            {
                var boundaryEnd = this.GetNextBoundaryPosition();
                boundarySubStreams.Add(new HttpMultipartSubStream(
                    this.requestStream,
                    boundaryStart,
                    this.GetActualEndOfBoundary(boundaryEnd)));

                boundaryStart = boundaryEnd;
            }

            return boundarySubStreams;
        }

        private bool MultipartIsNotCompleted(long boundaryPosition)
        {
            return boundaryPosition > -1 && !this.readBuffer.IsClosingBoundary;
        }

        //we add two because or the \r\n before the boundary
        private long GetActualEndOfBoundary(long boundaryEnd)
        {
            if (this.CheckIfFoundEndOfStream())
            {
                return this.requestStream.Position - (this.readBuffer.Length + 2);
            }
            return boundaryEnd - (this.readBuffer.Length + 2);
        }

        private bool CheckIfFoundEndOfStream()
        {
            return this.requestStream.Position.Equals(this.requestStream.Length);
        }

        private long GetNextBoundaryPosition()
        {
            this.readBuffer.Reset();
            while (true)
            {
                var byteReadFromStream = this.requestStream.ReadByte();

                if (byteReadFromStream == -1)
                {
                    return -1;
                }

                this.readBuffer.Insert((byte)byteReadFromStream);

                if (this.readBuffer.IsFull && (this.readBuffer.IsBoundary || this.readBuffer.IsClosingBoundary))
                {
                    return this.requestStream.Position;
                }

                if (byteReadFromStream.Equals(LF) || this.readBuffer.IsFull)
                {
                    this.readBuffer.Reset();
                }
            }
        }

        private byte[] ToByteArray(Stream stream)
        {
            byte[] buffer = new byte[32768];
            using (MemoryStream ms = new MemoryStream())
            {
                while (true)
                {
                    int read = stream.Read(buffer, 0, buffer.Length);
                    if (read <= 0)
                    {
                        return ms.ToArray();
                    }
                    ms.Write(buffer, 0, read);
                }
            }
        }
    }
} 
```

**HttpMultipartBuffer.cs：**

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;

namespace MyProjectNamespace
{
    public class HttpMultipartBuffer
    {
        private readonly byte[] boundaryAsBytes;
        private readonly byte[] closingBoundaryAsBytes;
        private readonly byte[] buffer;
        private int position;

        /// <summary>
        /// Initializes a new instance of the <see cref="HttpMultipartBuffer"/> class.
        /// </summary>
        /// <param name="boundaryAsBytes">The boundary as a byte-array.</param>
        /// <param name="closingBoundaryAsBytes">The closing boundary as byte-array</param>
        public HttpMultipartBuffer(byte[] boundaryAsBytes, byte[] closingBoundaryAsBytes)
        {
            this.boundaryAsBytes = boundaryAsBytes;
            this.closingBoundaryAsBytes = closingBoundaryAsBytes;
            this.buffer = new byte[this.boundaryAsBytes.Length];
        }

        /// <summary>
        /// Gets a value indicating whether the buffer contains the same values as the boundary.
        /// </summary>
        /// <value><see langword="true"/> if buffer contains the same values as the boundary; otherwise, <see langword="false"/>.</value>
        public bool IsBoundary
        {
            get { return this.buffer.SequenceEqual(this.boundaryAsBytes); }
        }

        public bool IsClosingBoundary
        {
            get { return this.buffer.SequenceEqual(this.closingBoundaryAsBytes); }
        }

        /// <summary>
        /// Gets a value indicating whether this buffer is full.
        /// </summary>
        /// <value><see langword="true"/> if buffer is full; otherwise, <see langword="false"/>.</value>
        public bool IsFull
        {
            get { return this.position.Equals(this.buffer.Length); }
        }

        /// <summary>
        /// Gets the the number of bytes that can be stored in the buffer.
        /// </summary>
        /// <value>The number of butes that can be stored in the buffer.</value>
        public int Length
        {
            get { return this.buffer.Length; }
        }

        /// <summary>
        /// Resets the buffer so that inserts happens from the start again.
        /// </summary>
        /// <remarks>This does not clear any previously written data, just resets the buffer position to the start. Data that is inserted after Reset has been called will overwrite old data.</remarks>
        public void Reset()
        {
            this.position = 0;
        }

        /// <summary>
        /// Inserts the specified value into the buffer and advances the internal position.
        /// </summary>
        /// <param name="value">The value to insert into the buffer.</param>
        /// <remarks>This will throw an <see cref="ArgumentOutOfRangeException"/> is you attempt to call insert more times then the <see cref="Length"/> of the buffer and <see cref="Reset"/> was not invoked.</remarks>
        public void Insert(byte value)
        {
            this.buffer[this.position++] = value;
        }
    }
} 
```

**HttpMultipartBoundary.cs：**

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Text.RegularExpressions;
using System.Web;

namespace DHIWebSvc.Models
{
    public class HttpMultipartBoundary
    {
        private const byte LF = (byte)'\n';
        private const byte CR = (byte)'\r';

        /// <summary>
        /// Initializes a new instance of the <see cref="HttpMultipartBoundary"/> class.
        /// </summary>
        /// <param name="boundaryStream">The stream that contains the boundary information.</param>
        public HttpMultipartBoundary(HttpMultipartSubStream boundaryStream)
        {
            this.Value = boundaryStream;
            this.ExtractHeaders();
        }

        /// <summary>
        /// Gets the contents type of the boundary value.
        /// </summary>
        /// <value>A <see cref="string"/> containing the name of the value if it is available; otherwise <see cref="string.Empty"/>.</value>
        public string ContentType { get; private set; }

        /// <summary>
        /// Gets or the filename for the boundary value.
        /// </summary>
        /// <value>A <see cref="string"/> containing the filename value if it is available; otherwise <see cref="string.Empty"/>.</value>
        /// <remarks>This is the RFC2047 decoded value of the filename attribute of the Content-Disposition header.</remarks>
        public string Filename { get; private set; }

        /// <summary>
        /// Gets name of the boundary value.
        /// </summary>
        /// <remarks>This is the RFC2047 decoded value of the name attribute of the Content-Disposition header.</remarks>
        public string Name { get; private set; }

        /// <summary>
        /// A stream containig the value of the boundary.
        /// </summary>
        /// <remarks>This is the RFC2047 decoded value of the Content-Type header.</remarks>
        public HttpMultipartSubStream Value { get; private set; }

        private void ExtractHeaders()
        {
            while (true)
            {
                var header =
                    this.ReadLineFromStream();

                if (string.IsNullOrEmpty(header))
                {
                    break;
                }

                if (header.StartsWith("Content-Disposition", StringComparison.CurrentCultureIgnoreCase))
                {
                    this.Name = Regex.Match(header, @"name=""(?<name>[^\""]*)", RegexOptions.IgnoreCase).Groups["name"].Value;
                    this.Filename = Regex.Match(header, @"filename=""(?<filename>[^\""]*)", RegexOptions.IgnoreCase).Groups["filename"].Value;
                }

                if (header.StartsWith("Content-Type", StringComparison.InvariantCultureIgnoreCase))
                {
                    this.ContentType = header.Split(new[] { ' ' }).Last().Trim();
                }
            }

            this.Value.PositionStartAtCurrentLocation();
        }

        private string ReadLineFromStream()
        {
            var readBuffer = new StringBuilder();

            while (true)
            {
                var byteReadFromStream = this.Value.ReadByte();

                if (byteReadFromStream == -1)
                {
                    return null;
                }

                if (byteReadFromStream.Equals(LF))
                {
                    break;
                }

                readBuffer.Append((char)byteReadFromStream);
            }

            var lineReadFromStream =
                readBuffer.ToString().Trim(new[] { (char)CR });

            return lineReadFromStream;
        }
    }
} 
```

最后...

**HttpMultipartSubStream.cs：**

```
using System;
using System.Collections.Generic;
using System.IO;
using System.Linq;
using System.Web;

namespace DHIWebSvc.Models
{
    public class HttpMultipartSubStream : Stream
    {
        private readonly Stream stream;
        private readonly long end;
        private long start;
        private long position;

        /// <summary>
        /// Initializes a new instance of the <see cref="HttpMultipartSubStream"/> class.
        /// </summary>
        /// <param name="stream">The stream to create the sub-stream ontop of.</param>
        /// <param name="start">The start offset on the parent stream where the sub-stream should begin.</param>
        /// <param name="end">The end offset on the parent stream where the sub-stream should end.</param>
        public HttpMultipartSubStream(Stream stream, long start, long end)
        {
            this.stream = stream;
            this.start = start;
            this.position = start;
            this.end = end;
        }

        /// <summary>
        /// When overridden in a derived class, gets a value indicating whether the current stream supports reading.
        /// </summary>
        /// <returns><see langword="true"/> if the stream supports reading; otherwise, <see langword="false"/>.</returns>
        public override bool CanRead
        {
            get { return true; }
        }

        /// <summary>
        /// When overridden in a derived class, gets a value indicating whether the current stream supports seeking.
        /// </summary>
        /// <returns><see langword="true"/> if the stream supports seeking; otherwise, <see langword="false"/>.</returns>
        public override bool CanSeek
        {
            get { return true; }
        }

        /// <summary>
        /// When overridden in a derived class, gets a value indicating whether the current stream supports writing.
        /// </summary>
        /// <returns><see langword="true"/> if the stream supports writing; otherwise, <see langword="false"/>.</returns>
        public override bool CanWrite
        {
            get { return false; }
        }

        /// <summary>
        /// When overridden in a derived class, gets the length in bytes of the stream.
        /// </summary>
        /// <returns>A long value representing the length of the stream in bytes.</returns>
        /// <exception cref="NotSupportedException">A class derived from Stream does not support seeking. </exception><exception cref="T:System.ObjectDisposedException">Methods were called after the stream was closed.</exception>
        public override long Length
        {
            get 
            { 
                return this.end - this.start; 
            }
        }

        /// <summary>
        /// When overridden in a derived class, gets or sets the position within the current stream.
        /// </summary>
        /// <returns>
        /// The current position within the stream.
        /// </returns>
        /// <exception cref="T:System.IO.IOException">An I/O error occurs. </exception><exception cref="T:System.NotSupportedException">The stream does not support seeking. </exception><exception cref="T:System.ObjectDisposedException">Methods were called after the stream was closed. </exception><filterpriority>1</filterpriority>
        public override long Position
        {
            get { return this.position - this.start; }
            set { this.position = this.Seek(value, SeekOrigin.Begin); }
        }

        public void PositionStartAtCurrentLocation()
        {
            this.start = this.stream.Position;
        }

        /// <summary>
        /// When overridden in a derived class, clears all buffers for this stream and causes any buffered data to be written to the underlying device.
        /// </summary>
        /// <remarks>In the <see cref="HttpMultipartSubStream"/> type this method is implemented as no-op.</remarks>
        public override void Flush()
        {
        }

        /// <summary>
        /// When overridden in a derived class, reads a sequence of bytes from the current stream and advances the position within the stream by the number of bytes read.
        /// </summary>
        /// <returns>The total number of bytes read into the buffer. This can be less than the number of bytes requested if that many bytes are not currently available, or zero (0) if the end of the stream has been reached. </returns>
        /// <param name="buffer">An array of bytes. When this method returns, the buffer contains the specified byte array with the values between <paramref name="offset"/> and (<paramref name="offset"/> + <paramref name="count"/> - 1) replaced by the bytes read from the current source. </param>
        /// <param name="offset">The zero-based byte offset in <paramref name="buffer"/> at which to begin storing the data read from the current stream.</param>
        /// <param name="count">The maximum number of bytes to be read from the current stream. </param>
        public override int Read(byte[] buffer, int offset, int count)
        {
            if (count > (this.end - this.position))
            {
                count = (int)(this.end - this.position);
            }

            if (count <= 0)
            {
                return 0;
            }

            this.stream.Position = this.position;

            var bytesReadFromStream =
                this.stream.Read(buffer, offset, count);

            this.RepositionAfterRead(bytesReadFromStream);

            return bytesReadFromStream;
        }

        /// <summary>
        /// Reads a byte from the stream and advances the position within the stream by one byte, or returns -1 if at the end of the stream.
        /// </summary>
        /// <returns>The unsigned byte cast to an Int32, or -1 if at the end of the stream.</returns>
        public override int ReadByte()
        {
            if (this.position >= this.end)
            {
                return -1;
            }

            this.stream.Position = this.position;

            var byteReadFromStream = this.stream.ReadByte();

            this.RepositionAfterRead(1);

            return byteReadFromStream;
        }

        /// <summary>
        /// When overridden in a derived class, sets the position within the current stream.
        /// </summary>
        /// <returns>The new position within the current stream.</returns>
        /// <param name="offset">A byte offset relative to the <paramref name="origin"/> parameter.</param>
        /// <param name="origin">A value of type <see cref="SeekOrigin"/> indicating the reference point used to obtain the new position.</param>
        public override long Seek(long offset, SeekOrigin origin)
        {
            var subStreamRelativePosition =
                this.CalculateSubStreamRelativePosition(origin, offset);

            this.ThrowExceptionIsPositionIsOutOfBounds(subStreamRelativePosition);

            this.position = this.stream.Seek(subStreamRelativePosition, SeekOrigin.Begin);

            return this.position;
        }

        /// <summary>
        /// When overridden in a derived class, sets the length of the current stream.
        /// </summary>
        /// <param name="value">The desired length of the current stream in bytes.</param>
        /// <remarks>This will always throw a <see cref="InvalidOperationException"/> for the <see cref="HttpMultipartSubStream"/> type.</remarks>
        public override void SetLength(long value)
        {
            throw new InvalidOperationException();
        }

        /// <summary>
        /// When overridden in a derived class, writes a sequence of bytes to the current stream and advances the current position within this stream by the number of bytes written.
        /// </summary>
        /// <param name="buffer">An array of bytes. This method copies <paramref name="count"/> bytes from <paramref name="buffer"/> to the current stream. </param>
        /// <param name="offset">The zero-based byte offset in <paramref name="buffer"/> at which to begin copying bytes to the current stream. </param>
        /// <param name="count">The number of bytes to be written to the current stream. </param>
        /// <remarks>This will always throw a <see cref="InvalidOperationException"/> for the <see cref="HttpMultipartSubStream"/> type.</remarks>
        public override void Write(byte[] buffer, int offset, int count)
        {
            throw new InvalidOperationException();
        }

        private void ThrowExceptionIsPositionIsOutOfBounds(long subStreamRelativePosition)
        {
            if (subStreamRelativePosition < 0 || subStreamRelativePosition > this.end)
            {
                throw new InvalidOperationException();
            }
        }

        private long CalculateSubStreamRelativePosition(SeekOrigin origin, long offset)
        {
            var subStreamRelativePosition = 0L;

            switch (origin)
            {
                case SeekOrigin.Begin:
                    subStreamRelativePosition = this.start + offset;
                    break;

                case SeekOrigin.Current:
                    subStreamRelativePosition = this.position + offset;
                    break;

                case SeekOrigin.End:
                    subStreamRelativePosition = this.end + offset;
                    break;
            }
            return subStreamRelativePosition;
        }

        private void RepositionAfterRead(int bytesReadFromStream)
        {
            if (bytesReadFromStream == -1)
            {
                this.position = this.end;
            }
            else
            {
                this.position += bytesReadFromStream;
            }
        }
    }
} 
```

对于我尝试做的事情，用法相对简单。我只是定义了一个边界，只寻找特定的部分名称。因此，对于我的问题中的示例，我使用了`"-------------------------acebdf13572468"`三个文件的边界：`Json`、`frontImage`和`rearImage`.

# sql - SQL Server：如何从历史表中获取数据？

> ID：13296853
> 
> 赞同：4
> 
> 时间：2012-11-08T20:04:17.417
> 
> 标签：sql, sql-server, tsql

你能帮我建立一个 SQL 查询来从历史表中检索数据吗？

我是一个只有一周编码经验的新手。到目前为止，我一直在尝试简单的 SELECT 语句，但遇到了一个绊脚石。

我的足球俱乐部的数据库有三个表。第一个将球与球员联系起来：

```
BallDetail

| BallID | PlayerID | TeamID |
|-------------------|--------|
|      1 |       11 |     21 |
|      2 |       12 |     22 | 
```

第二个列出了球发生的事情：

```
BallEventHistory

| BallID | Event |  EventDate |
|--------|------ |------------|
|      1 |  Pass | 2012-01-01 |
|      1 | Shoot | 2012-02-01 |
|      1 |  Miss | 2012-03-01 |
|      2 |  Pass | 2012-01-01 |
|      2 | Shoot | 2012-02-01 | 
```

第三个是历史变化表。球易手后，记录历史：

```
HistoryChanges

| BallID | ColumnName | ValueOld | ValueNew |
|--------|------------|----------|----------|
|      2 |   PlayerID |       11 |       12 |
|      2 |     TeamID |       21 |       22 | 
```

我正在尝试获取一张表格，该表格将列出球员 11 在球传给其他球员之前对所有球所做的所有传球和射门。像这样：

```
| PlayerID | BallID | Event | Month |
|----------|--------|-------|-------|
|       11 |      1 |  Pass |   Jan |
|       11 |      1 | Shoot |   Feb |
|       11 |      2 |  Pass |   Jan | 
```

我开始这样：

```
SELECT PlayerID, BallID, Event, DateName(month, EventDate)
FROM BallDetail bd INNER JOIN BallEventHistory beh ON bd.BallID = beh.BallID
WHERE PlayerID = 11 AND Event IN (Pass, Shoot) ... 
```

但是，如何确保 Ball 2 也被包括在内，尽管现在与另一名球员在一起？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T20:19:41.640

```
Select PlayerID,BallID,Event,datename(month,EventDate) as Month,Count(*) as cnt from
(
Select 
Coalesce(
(Select ValueNew from #HistoryChanges where ChangeDate=(Select max(ChangeDate) from #HistoryChanges h2 where h2.BallID=h.BallID and ColumnName='PlayerID' and ChangeDate<=EventDate) and  BallID=h.BallID and ColumnName='PlayerID')
,(Select PlayerID from #BallDetail where BallID=h.BallID)
) as PlayerID,
h.BallID,h.Event,EventDate
from #BallEventHistory h
) a
Group by PlayerID, BallID, Event,datename(month,EventDate) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T15:18:50.953

```
SELECT d.PlayerID, d.BallID, h.Event, DATENAME(mm, h.EventDate) AS Month
FROM BallDetail d JOIN BallEventHistory h ON d.BallID = h.BallID 
WHERE h.Event IN ('Pass', 'Shoot') AND d.PlayerID = 11
  OR EXISTS (SELECT 1
             FROM dbo.HistoryChanges c
             WHERE c.ValueOld = 11 AND c.ValueNew = d.PlayerID AND c.ColumnName = 'PlayerID' and c.ChangeDate = h.EventDate) 
```

# file - VBA 使用 cmd.exe 合并当前目录中的文件

> ID：13296858
> 
> 赞同：1
> 
> 时间：2012-11-08T20:04:39.177
> 
> 标签：file, shell, vba, merge, cmd

我在一个文件夹中有一张 Excel 表，并尝试使用以下代码将此文件夹中的某些文件合并到一个文件中：

```
Private Sub CommandButton1_Click()
  Dim RET As Variant
  RET = Shell("cmd.exe copy  files1.txt + file2.txt out.txt", 0)
End Sub 
```

作为 RET 的返回值，我得到 1560。调试时没有错误，但也没有“out.txt”。我的代码有什么问题？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T20:19:46.523

我认为您错过了 cmd 参数和路径中的 /C 。

```
Private Sub CommandButton1_Click()
  Dim RET As Variant
  RET = Shell("cmd.exe /C copy  C:\Data\files1.txt + C:\Data\file2.txt C:\Data\out.txt", 0)
End Sub 
```

返回值不等于0表示进程已启动（是实际的进程id）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T12:03:01.000

VBA方式；

```
Function readFile(path) As String
    On Error GoTo ERR_IO
    Dim hF As Integer: hF = FreeFile
    Open path For Input As #hF
    readFile = Input$(LOF(hF), hF)
ERR_IO:
    Close #hF
End Function

Function writeFile(path, buffer) As Boolean
    On Error GoTo ERR_IO
    Dim hF As Integer: hF = FreeFile
    Open path For Output As #hF
    Print #hF, buffer
    writeFile = True
ERR_IO:
    Close #hF
End Function

Sub merge()
    Dim buffer As String
    buffer =          readFile("C:\xxx\files1.txt")
    buffer = buffer & readFile("C:\xxx\files2.txt")

    writeFile "c:\xxx\out.txt", buffer
End Sub 
```

# arrays - 构建成功，但堆已损坏。使用二维数组

> ID：13296862
> 
> 赞同：2
> 
> 时间：2012-11-08T20:04:47.930
> 
> 标签：arrays, c, malloc, 2d, heap-memory

我创建了一个二维数组，但失败了，我得到“lab10.exe 中 0x77a415de 处的未处理异常：0xC0000374：堆已损坏。” 不知道从这里去哪里或如何调试。我相信这与我的数组大小或使用 malloc() 有关。非常感谢您提前提供的帮助！

```
//Get the number of Columns from the user
printf("Enter the number of rows and columns:\n");
scanf("%d", &dimension);

//Allocate 1-D Array of Pointers, Array 'a'
a = (int** ) malloc( sizeof(int)*dimension);
if(a == NULL)
{
    printf("\nError Allocating Memory");
    exit(1);
}

//Allocate Rows for 2-D Array; Array 'a'
for(r = 0; r < dimension; r++)
{
    a[r] = (int*) malloc( sizeof(int) * dimension);
    if (a[r] == NULL)
    {
        for(i = 0; i< r; i++)
            free(a[i]);
        printf("\nError Allocating Memory");
        exit(1);
    }
} 
```

还有更多，但我从相同的整数“维度”执行了 4 次不同的操作。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T21:11:29.913

第一的：

```
a = (int** ) malloc( sizeof(int)*dimension); 
```

您正在分配指针数组，因此您想要：

```
a = (int** ) malloc( sizeof(int*)*dimension); 
```

int 和 int* 的大小不保证是一样的！

第二：

```
if (a[r] == NULL)
{
    for(i = 0; i< r; i++)
        free(a[i]);
    printf("\nError Allocating Memory");
    exit(1);
} 
```

你释放所有行的内存，但你不释放“a”本身的内存。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T21:04:56.420

这一行是错误的：

```
a = (int** ) malloc( sizeof(int)*dimension); 
```

您`dimension`为 type 的元素数组分配了足够的空间`int`，但随后您将其用作`int*`. 如果您正在编译 64 位程序，`sizeof(int*)`则为 8 但`sizeof(int)`为 4，因此您没有分配足够的空间。您需要使用`sizeof(int*)`：

```
a = (int** ) malloc( sizeof(int*)*dimension);
//                          ^^^^^ 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-08T21:05:17.740

在片段中

```
//Allocate 1-D Array of Pointers, Array 'a'
a = (int** ) malloc( sizeof(int)*dimension); 
```

注释与实际代码不符。在代码中，您为`dimension`整数分配空间，而不是指针。

由于指针可能大于 int，因此分配行的循环超出了分配的内存。

初始分配应为

```
a = malloc( sizeof(int*)*dimension); 
```

或者

```
a = malloc( dimension * sizeof *a); 
```

第二种形式的优点是它对于分配任何大小的数组总是正确的`dimension`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-08T21:30:35.953

我发现了我的错误！这是一个无限 for 循环，位于我的其他“for”循环之一中！另外，正如上面许多人所说，我应该乘以 (int*) 而不仅仅是 (int)！太感谢了！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-08T20:22:59.410

我花点时间编译了你的第一个示例，它运行良好，我认为错误可能是`a`必须是 type 的`int **a`。我还必须将类型添加到`r`变量`i`中。如果这不起作用，那么我认为您必须指定错误所在的行，并添加变量声明和`#includes`. 希望这可以帮助...

# bash - 等待和睡眠的区别

> ID：13296863
> 
> 赞同：349
> 
> 时间：2012-11-08T20:04:50.250
> 
> 标签：bash, shell, wait, sleep

`wait`和有什么区别`sleep`？

* * *

## 回答 #1

> 赞同：412
> 
> 时间：2012-11-08T20:08:12.540

`wait`等待进程完成；`sleep`睡眠一定的秒数。

* * *

## 回答 #2

> 赞同：129
> 
> 时间：2012-11-08T20:09:54.587

wait 是 BASH 内置命令。来自`man bash`：

```
 wait [n ...]
        Wait  for each specified process and return its termination sta-
        tus.  Each n may be a process ID or a job  specification;  if  a
        job  spec  is  given,  all  processes in that job's pipeline are
        waited for.  If n is not given, all currently active child  pro-
        cesses  are  waited  for,  and  the return status is zero.  If n
        specifies a non-existent process or job, the  return  status  is
        127\.   Otherwise,  the  return  status is the exit status of the
        last process or job waited for. 
```

sleep 不是 shell 内置命令。它是一种延迟指定时间量的实用程序。

该`sleep`命令可以支持各种时间单位的等待。GNU coreutils 8.4`man sleep`说：

```
 SYNOPSIS
        sleep NUMBER[SUFFIX]...

    DESCRIPTION
        Pause for NUMBER seconds.  SUFFIX may be ‘s’ for seconds (the default),
        ‘m’ for minutes, ‘h’ for hours or ‘d’ for days.  Unlike most  implemen-
        tations  that require NUMBER be an integer, here NUMBER may be an arbi-
        trary floating point number.  Given two or more  arguments,  pause  for
        the amount of time specified by the sum of their values. 
```

* * *

## 回答 #3

> 赞同：96
> 
> 时间：2012-11-08T20:10:22.990

`sleep`只是将 shell 延迟给定的秒数。

`wait`使外壳等待给定的工作。例如：

```
workhard &
[1] 27408
workharder &
[2] 27409
wait %1 %2 
```

延迟 shell 直到两个子进程都完成

# php - 合并和排序 PHP 多维数组

> ID：13296866
> 
> 赞同：0
> 
> 时间：2012-11-08T20:05:00.030
> 
> 标签：php, arrays, multidimensional-array

我想尝试合并和排序一个多维数组。目前该数组如下所示：

```
Array
(
[0] => Array
    (
        [customerID] => 1234
        [service]    => Car
        [CSA]        => Jack
        [status]     => 3
    )

[1] => Array
    (
        [customerID] => 1234
        [service]    => Cap
        [CSA]        => Jill
        [status]     => 3
    )

[2] => Array
    (
        [customerID] => 1234456
        [service]    => Plate
        [CSA]        => Jack
        [status]     => 1
    ) 
```

)

在这个多维数组中，customerID 将是唯一的，但是，许多二级数组具有相同的 customerID。同样，在这些阵列中，CSA 可能与状态相同。

我希望结束数组如下所示：

```
Array
(
[0] => Array
    (
        [customerID] => 1234
        [service]    => Car <br/> Cap
        [CSA]        => Jack <br /> Jill
        [status]     => 3 
    )

[2] => Array
    (
        [customerID] => 1234456
        [service]    => Plate
        [CSA]        => Jack
        [status]     => 1
    ) 
```

)

现在，如果在 customerID 为索引的集合中服务相同，则不应将其添加到值字符串中。除了 CustomerID 之外的所有其他内容也是如此。

我如何用 PHP 做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T20:12:52.040

您可以将 customerID 控制为数组键。

基础示例：

```
$arr = array(/** **/);

$arrayResult = array();

foreach ($arr as $itemResult) {
  if (!isset($arrayResult[$itemResult['customerID']])) {
    $arrayResult[$itemResult['customerID']] = $itemResult;
    continue;
  }

  // Adding service
  $arrayResult[$itemResult['customerID']]['service'] .= '<br />' . $itemResult['service'];
  // Adding CSA
  $arrayResult[$itemResult['customerID']]['CSA'] .= '<br />' . $itemResult['CSA'];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T20:13:18.637

如果您不介意使用客户 ID 作为数组键的输出数组，请尝试以下操作：

```
$finalArray = array(); // This will be the output array.
foreach ($mainArray as $subArray) { // Iterate through the multidimensional array.
    $currentCustomerID = $subArray['customerID'];
    if (!array_key_exists($currentCustomerID, $finalArray)) { // If the customer hasn't been loaded into the output array yet, load the current array in.
        $finalArray[$currentCustomerID] = $subArray;
    }
    else { // If the customer has already been loaded into the output array, concatenate the service and CSA values.
        $finalArray[$currentCustomerID]['service'] .= ' <br /> '.$subArray['service'];
        $finalArray[$currentCustomerID]['CSA'] .= ' <br /> ' . $subArray['CSA'];
        // Not sure how you want to handle the status, but you can do something like:
        // if ($subArray['status'] > $finalArray[$currentCustomerID]['status']) {
        //     $finalArray[$currentCustomerID]['status'] = $subArray['status'];
        // }
        // ...or using whatever other conditions you need to handle it.
    }

} 
```

# python - Python，使用ip和win32api连接打印机

> ID：13296867
> 
> 赞同：3
> 
> 时间：2012-11-08T20:05:01.670
> 
> 标签：python

我想使用 win32api 打印文件。我有一台使用此 ip 的网络打印机：**192.168.1.50**

所以我使用了这段代码：

```
import win32api
file_path="test.txt"
win32api.ShellExecute(0, "print", file_path, None, ".", 0) 
```

如何在没有名称但有 ip 的打印机上打印此文件？

# css - -webkit-font-smoothing：Firefox 中的抗锯齿等效项？

> ID：13296868
> 
> 赞同：22
> 
> 时间：2012-11-08T20:05:06.913
> 
> 标签：css, firefox, fonts

我在 webkit 浏览器中使用**非常**有用的 CSS 属性`-webkit-font-smoothing: antialiased`来确保标题等上的精美文本。Firefox 中是否有等效的属性？

WebKit 中的字体`-webkit-font-smoothing: antialiased`：

![在此处输入图像描述](../Images/cf96a09311383b97e7059d8880c938c0.png)

Firefox 中的字体：

![在此处输入图像描述](../Images/e9642267ba2eaa94bd1e34c87dd3efbb.png)

如您所见，Firefox 中的文本比 Webkit 中的要胖。如果没有`-webkit-font-smoothing: antialiased`，则 Webkit 中的文本看起来与 Firefox 中的相同。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-11-03T19:55:13.007

Firefox 25+ (2013-10-29) 支持新的 macOS 非标准 CSS 属性[`-moz-osx-font-smoothing`](https://bugzilla.mozilla.org/show_bug.cgi?id=857142)，与 WebKit 的`-webkit-font-smoothing`.

所以这段代码应该在 Firefox 和 WebKit 中提供一致的结果：

```
.example {
    -moz-osx-font-smoothing: grayscale;   /* Firefox */
     -webkit-font-smoothing: antialiased; /* WebKit  */
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-12T16:03:36.210

问题是`-webkit-font-smoothing: antialiased`，它禁用了标准的亚像素字体平滑。试试看[这个](http://www.usabilitypost.com/2012/11/05/stop-fixing-font-smoothing/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-08T20:34:07.280

曾经， firefox 有一个`font-smooth`，但它已被删除，据我所知，它根本不包含在当前曲目中。我做了一些谷歌搜索，没有看到任何迹象表明会有任何改变。

作为替代方案，您可以尝试以下解决方法：[http](http://www.elfboy.com/blog/text-shadow_anti-aliasing/) ://www.elfboy.com/blog/text-shadow_anti-aliasing/ 。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-09T08:05:43.417

据我所知，Firefox 默认具有您所追求的行为，因此无需明确请求它...

# vba - Excel VBA 类型不匹配（十三）

> ID：13296869
> 
> 赞同：4
> 
> 时间：2012-11-08T20:05:07.067
> 
> 标签：vba, excel

我在 VBA 中遇到类型不匹配错误，我不知道为什么。

此宏的目的是遍历 Excel 电子表格中的列并将所有电子邮件添加到数组中。将每封电子邮件添加到第一个数组后，还应该将其添加到第二个数组，但在`@`符号处分成两部分，以便将名称与域分开。像这样：`person@gmail.com`到`person`和`gmail.com`。

我遇到的问题是，当它到达应该拆分电子邮件的地步时，它会引发类型不匹配错误。

具体这部分：

`strDomain = Split(strText, "@")`

这是完整的代码：

```
Sub addContactListEmails()
    Dim strEmailList() As String    'Array of emails
    Dim blDimensioned As Boolean    'Is the array dimensioned?
    Dim strText As String           'To temporarily hold names
    Dim lngPosition As Long         'Counting

    Dim strDomainList() As String
    Dim strDomain As String
    Dim dlDimensioned As Boolean
    Dim strEmailDomain As String
    Dim i As Integer

    Dim countRows As Long
    'countRows = Columns("E:E").SpecialCells(xlVisible).Rows.Count
    countRows = Range("E:E").CurrentRegion.Rows.Count
    MsgBox "The number of rows is " & countRows

    'The array has not yet been dimensioned:
    blDimensioned = False

    Dim counter As Long
    Do While counter < countRows
        counter = counter + 1

        ' Set the string to the content of the cell
        strText = Cells(counter, 5).Value

        If strText <> "" Then

            'Has the array been dimensioned?
            If blDimensioned = True Then

                'Yes, so extend the array one element large than its current upper bound.
                'Without the "Preserve" keyword below, the previous elements in our array would be erased with the resizing
                ReDim Preserve strEmailList(0 To UBound(strEmailList) + 1) As String

            Else

                'No, so dimension it and flag it as dimensioned.
                ReDim strEmailList(0 To 0) As String
                blDimensioned = True

            End If

            'Add the email to the last element in the array.
            strEmailList(UBound(strEmailList)) = strText

            'Also add the email to the separation array
            strDomain = Split(strText, "@")
            If strDomain <> "" Then
                    If dlDimensioned = True Then
                        ReDim Preserve strDomainList(0 To UBound(strDomainList) + 1) As String
                    Else
                        ReDim strDomainList(0 To 0) As String
                        dlDimensioned = True
                    End If
                strDomainList(UBound(strDomainList)) = strDomain
            End If

        End If

    Loop

    'Display email addresses, TESTING ONLY!

    For lngPosition = LBound(strEmailList) To UBound(strEmailList)

        MsgBox strEmailList(lngPosition)

    Next lngPosition

    For i = LBound(strDomainList) To UBound(strDomainList)

        MsgBox strDomainList(strDomain)

    Next

    'Erase array
    'Erase strEmailList

End Sub 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-08T20:07:39.450

`ReDim`ing arrays is a big hassle. Welcome to the world of `collection`s and `Dictionary`s. [Collection](http://en.wikipedia.org/wiki/Collection_%28computing%29#Lists) objects are always accessible. [Dictionaries](http://en.wikipedia.org/wiki/Associative_array) require a reference to `Microsoft Scripting Runtime` (Tools>References>scroll down to find that text and check the box> OK). They dynamically change size for you, you can add, remove items very easily compared to arrays, and Dictionaries especially allow you to organize your data in more logical ways.

In the below code I used a dictionary there the key is the domain (obtained with the split function). Each `value` for a `key` is a collection of email addresses with that domain.

Put a break point on `End Sub` and look at the contents of each of these objects in your locals window. I think you'll see they make more sense and are easier in general.

Option Explicit

```
Function AllEmails() As Dictionary

    Dim emailListCollection As Collection
    Set emailListCollection = New Collection 'you're going to like collections way better than arrays
    Dim DomainEmailDictionary As Dictionary
    Set DomainEmailDictionary = New Dictionary 'key value pairing. key is the domain. value is a collection of emails in that domain
    Dim emailParts() As String
    Dim countRows As Long
    Dim EmailAddress As String
    Dim strDomain As String

    'countRows = Columns("E:E").SpecialCells(xlVisible).Rows.Count
    Dim sht As Worksheet 'always declare your sheets!
    Set sht = Sheets("Sheet1")

    countRows = sht.Range("E2").End(xlDown).Row

    Dim counter As Long
    Do While counter < countRows
        counter = counter + 1

        EmailAddress = Trim(sht.Cells(counter, 5))

        If EmailAddress <> "" Then

            emailParts = Split(EmailAddress, "@")
            If UBound(emailParts) > 0 Then
                strDomain = emailParts(1)
            End If

            If Not DomainEmailDictionary.Exists(strDomain) Then
                'if you have not already encountered this domain
                DomainEmailDictionary.Add strDomain, New Collection
            End If

            'Add the email to the dictionary of emails organized by domain
            DomainEmailDictionary(strDomain).Add EmailAddress

            'Add the email to the collection of only addresses
            emailListCollection.Add EmailAddress
        End If
    Loop

    Set AllEmails = DomainEmailDictionary
End Function 
```

and use it with

```
Sub RemoveUnwantedEmails()

    Dim allemailsDic As Dictionary, doNotCallSheet As Worksheet, emailsSheet As Worksheet
    Set doNotCallSheet = Sheets("DoNotCallList")
    Set emailsSheet = Sheets("Sheet1")
    Set allemailsDic = AllEmails

    Dim domain As Variant, EmailAddress As Variant
    Dim foundDoNotCallDomains As Range, emailAddressesToRemove   As Range

    For Each domain In allemailsDic.Keys
        Set foundDoNotCallDomains = doNotCallSheet.Range("A:A").Find(domain)
        If Not foundDoNotCallDomains Is Nothing Then
            Debug.Print "domain found"
            'do your removal
            For Each EmailAddress In allemailsDic(domain)
                Set emailAddressesToRemove = emailsSheet.Range("E:E").Find(EmailAddress)
                If Not emailAddressesToRemove Is Nothing Then
                    emailAddressesToRemove = ""
                 End If
            Next EmailAddress
        End If
    Next domain

End Sub 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-08T20:17:35.513

strDomain 必须存储拆分文本的数组，因此，

```
Dim strDomain As Variant 
```

之后，strDomain 应该被索引引用，如果将进行某些片段的操作：

```
If strDomain(i) <> "" Then 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-08T20:31:27.843

*split*函数根据提供的分隔符返回一个字符串数组。

如果您确定原始字符串是一封电子邮件，其中只有一个“@”，那么您可以安全地使用以下代码：

```
strDomain = Split(strText, "@")(1) 
```

这将为您提供您正在寻找的“@”之后的部分。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-08T20:13:26.853

`Split`返回一个数组：

```
Dim mailComp() As String
[...]
mailComp = Split(strText, "@")
strDomain = mailComp(1) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-08T20:15:08.163

Try `strDomain = Split(strText,"@")(1)` to get the right hand side of the split where `(0)` would be the left. And of course works with more than 2 splits as well. You could dim you string variable as an array `strDomain()` and then `Split(strText,"@")` will place all the seperated text into the array.

# eclipse - Xtext - 操作

> ID：13296871
> 
> 赞同：1
> 
> 时间：2012-11-08T20:05:09.630
> 
> 标签：eclipse, xtext, emf

我有一个关于 Xtext 的问题。我知道 Xtext 为 .xtext 文件中编程的 DSL 创建了一个 Ecore Modell。xtext 仅在 Ecore 模型中创建 EClass、EAttribute、EEnum 和 ERefernce 我是否正确？有没有办法创建一个规则的属性来拥有一个 EOperaption？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T21:05:23.187

Xtext 允许导入现有的 EPackage 或从语法定义中推断出新的 EPackage。由于 EOperations 与具体语法无关，因此无法推断它们。如果您想使用 EOperations，我建议您切换到手动维护的导入包。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T13:19:04.477

添加到塞巴斯蒂安的答案：如果您仍想使用推断模型，您可以使用模型后处理器来调整模型。如果您只想调整模型中的一两个东西，比如添加*额外*的操作，这会更容易。

# android - Possible ways of programmatically/normally securing settings tab on lenovo tablet? (Includes android programs to password protect it)

> ID：13296878
> 
> 赞同：1
> 
> 时间：2012-11-08T20:05:20.483
> 
> 标签：android, security, configuration

I would like to secure settings tab on lenovo tablet device with a password. What is a simple way of going about this? Code is welcome too (I think I might need to code but if you think an google play marketplace app would solve my problem please post your suggestion below).

Edit: I have researched and posted on lenovo forums already which I always do before posting here and it takes them a week just for simple question sometimes to respond. Please if iam too vague say so below because -2 does not help me one bit.

Here's more more information for why iam trying to do this:

I work at a K-12 system with high students always testing my wits. Without the password kids/students can add their own account or change settings for the tablet doing things that could hurt the school system legally (download playboy, using the devices to distribute viruses and malware, and the list goes on

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T21:18:51.793

Unfortunately for the purposes of what you're doing, Android doesn't really allow for keeping the "primary user", so to speak, out of the settings application. I'm not personally aware of any existing "lock" type applications, but they might exist; you might be better off asking on [Android Enthusiasts](http://android.stackexchange.com) for that.

There are a few hack-y type things you can do programmatically, however, without modifying the OS. The one I've seen work the most effectively for similar tasks is to code a [`Service`](http://developer.android.com/reference/android/app/Service.html) with a `Thread` more or less continuously polling the [`ActivityManager`](http://developer.android.com/reference/android/app/ActivityManager.html) for a list of running tasks (`getRunningTasks()`), checking on fixed intervals (perhaps once a second?) then, if the unwanted `Activity` is detected in the foreground (I believe that the Settings app component name is `android.app.Settings`), Launch a Password `Activity`. If the user successfully authenticates, simply `finish()` the password `Activity`. Otherwise, start the home activity (effectively clearing the Activity stack) `with an android.action.HOME` intent

# apache-pig - 如何编写这个 Pig 查询？

> ID：13296880
> 
> 赞同：1
> 
> 时间：2012-11-08T20:05:23.433
> 
> 标签：apache-pig

我在两个集合之间有一个多对多映射表。映射表中的每一行代表一个可能的带有权重分数的映射。

```
mapping(id1, id2, weight) 
```

查询：生成 id1 和 id2 之间的一对一映射。使用最低权重删除重复映射。如果有平局，则输出任意一个。

示例输入：

```
(1, X, 1)
(1, Y, 2)
(2, X, 3)
(2, Y, 1)
(3, Z, 2) 
```

输出

```
(1, X)
(2, Y)
(3, Z) 
```

1 和 2 都映射到 X 和 Y。我们选择映射 (1, X) 和 (2, Y)，因为它们的权重最低。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T22:53:01.167

我假设您只对权重在涉及 id1 的任何映射中最低的映射感兴趣，并且在涉及 id2 的任何映射中也是最低的。例如，如果您另外有映射 (2, Y, 4)，它不会与 (1, X, 1) 冲突。我将排除这样的映射，因为权重小于 (1, Y, 2) 和 (2, X, 3)，这是不合格的。

我的解决方案如下：找到每个 id1 的最小映射权重，然后将其加入映射关系以供将来参考。使用[嵌套的 foreach 遍历](http://ofps.oreilly.com/titles/9781449302641/advanced_pig_latin.html "嵌套的 foreach")每个 id2：使用 ORDER 和 LIMIT 选择该 id2 的权重最小的记录，然后仅当权重也是该 id1 的最小值时才保留它。

这是完整的脚本，在您的输入上进行了测试：

```
mapping = LOAD 'input' AS (id1:chararray, id2:chararray, weight:double);

id1_weights =
    FOREACH (GROUP mapping BY id1)
    GENERATE group AS id1, MIN(mapping.weight) AS id1_min_weight;
mapping_with_id1_mins =
    FOREACH (JOIN mapping BY id1, id1_weights BY id1)
    GENERATE mapping::id1, id2, weight, id1_min_weight;

accepted_mappings =
    FOREACH (GROUP mapping_with_id1_mins BY id2)
    {
        ordered = ORDER mapping_with_id1_mins BY weight;
        selected = LIMIT ordered 1;
        acceptable = FILTER selected BY weight == id1_min_weight;
        GENERATE FLATTEN(acceptable);
    };

DUMP accepted_mappings; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T22:49:18.627

通过使用Java UDF解决了它。从某种意义上说，它并不完美，它不会最大化一对一映射的数量，但它已经足够好了。

猪：

```
d = load 'test' as (fid, iid, priority:double);
g = group d by fid;
o = foreach g generate FLATTEN(com.propeld.pig.DEDUP(d)) as (fid, iid, priority);
store o into 'output';

g2 = group o by iid;
o2 = foreach g2 generate FLATTEN(com.propeld.pig.DEDUP(o)) as (fid, iid, priority);
store o2 into 'output2'; 
```

Java UDF：

```
package com.propeld.pig;

import java.io.IOException;
import java.util.Iterator;

import org.apache.pig.Algebraic;
import org.apache.pig.EvalFunc;
import org.apache.pig.PigException;
import org.apache.pig.backend.executionengine.ExecException;
import org.apache.pig.data.DataBag;
import org.apache.pig.data.Tuple;
import org.apache.pig.data.TupleFactory;

public class DEDUP extends EvalFunc<Tuple> implements Algebraic{
    public String getInitial() {return Initial.class.getName();}
    public String getIntermed() {return Intermed.class.getName();}
    public String getFinal() {return Final.class.getName();}
    static public class Initial extends EvalFunc<Tuple> {
        private static TupleFactory tfact = TupleFactory.getInstance();
        public Tuple exec(Tuple input) throws IOException {
            // Initial is called in the map.
            // we just send the tuple down
            try {
                // input is a bag with one tuple containing
                // the column we are trying to operate on
                DataBag bg = (DataBag) input.get(0);
                if (bg.iterator().hasNext()) {
                    Tuple dba = (Tuple) bg.iterator().next();
                    return dba;
                } else {
                    // make sure that we call the object constructor, not the list constructor
                    return tfact.newTuple((Object) null);
                }
            } catch (ExecException e) {
                throw e;
            } catch (Exception e) {
                int errCode = 2106;
                throw new ExecException("Error executing an algebraic function", errCode, PigException.BUG, e);
            }
        }
    }
    static public class Intermed extends EvalFunc<Tuple> {
        public Tuple exec(Tuple input) throws IOException {
            return dedup(input);
        }
    }
    static public class Final extends EvalFunc<Tuple> {
        public Tuple exec(Tuple input) throws IOException {return dedup(input);}
    }

    static protected Tuple dedup(Tuple input) throws ExecException, NumberFormatException {
        DataBag values = (DataBag)input.get(0);
        Double min = Double.MAX_VALUE;
        Tuple result = null;
        for (Iterator<Tuple> it = values.iterator(); it.hasNext();) {
            Tuple t = (Tuple) it.next();

            if ((Double)t.get(2) < min){
                min = (Double)t.get(2);
                result = t;
            }
        }
        return result;
    }

    @Override
    public Tuple exec(Tuple input) throws IOException {
        return dedup(input);
    }
} 
```

# ios - AFHTTPClient.h 神秘地想在接口前添加@end，但随后拒绝了自己的建议

> ID：13296881
> 
> 赞同：-1
> 
> 时间：2012-11-08T20:05:28.677
> 
> 标签：ios, xcode, afnetworking

这真让我抓狂！我什至有一个不同的项目，它使用完全相同的 h 文件可以正常工作，但事实并非如此。Xcode一直迫使我必须通过将@end（粗体）放入红色来放置它，然后它以红色错误“@end必须出现在目标c上下文中”拒绝自己的建议。我究竟做错了什么！！！！！！

```
 #import <Foundation/Foundation.h>

    @class AFHTTPRequestOperation;
    @protocol AFHTTPClientOperation;
    @protocol AFMultipartFormData;

    #ifdef _SYSTEMCONFIGURATION_H
    extern NSString * const AFNetworkingReachabilityDidChangeNotification;
    #endif

    #ifdef _SYSTEMCONFIGURATION_H
    typedef enum {
        AFNetworkReachabilityStatusUnknown          = -1,
        AFNetworkReachabilityStatusNotReachable     = 0,
        AFNetworkReachabilityStatusReachableViaWWAN = 1,
        AFNetworkReachabilityStatusReachableViaWiFi = 2,
    } AFNetworkReachabilityStatus;
    #endif

    typedef enum {
        AFFormURLParameterEncoding,
        AFJSONParameterEncoding,
        AFPropertyListParameterEncoding,
    } AFHTTPClientParameterEncoding;

    extern NSString * AFURLEncodedStringFromStringWithEncoding(NSString *string, NSStringEncoding encoding);

    extern NSString * AFQueryStringFromParametersWithEncoding(NSDictionary *parameters, NSStringEncoding encoding);

    **@end** //Here it keeps trying to force me to place an @end, then gives the error "@end must appear in objective c context"
    @interface AFHTTPClient : NSObject <NSCoding, NSCopying>
...
@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T20:25:16.550

很可能您在不同的 .h 文件中丢失和 @end。所以可能你有一个文件#importing损坏的.h（缺少@end）然后你#import这个文件。这将解释错误。

# facebook - 获取 facebook 画廊图像缩略图 206px

> ID：13296883
> 
> 赞同：0
> 
> 时间：2012-11-08T20:05:30.203
> 
> 标签：facebook, facebook-graph-api

我正在寻找复制 facebook 当前画廊中的方形缩略图。它们似乎在最短边上使用 206 像素的图像。然后通过将它们设置为背景图像（水平和垂直居中），它们基本上会裁剪掉多余的部分。

你能帮我举一个例子 fql 查询吗？

希望我遗漏了一些明显的东西，但似乎无法从照片表中的 src_small 或 src_big 做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T15:32:15.117

我设法弄清楚了:)

我从照片中获取 src_big url，然后简单地获取文件名并附加到[https://fbcdn-sphotos-da.akamaihd.net/hphotos-ak-ash3/p206x206/](https://fbcdn-sphotos-d-a.akamaihd.net/hphotos-ak-ash3/p206x206/)

不确定它是否是“真正的”解决方案，但它目前肯定有效！

[http://new.tickett.net/portfolio.php](http://new.tickett.net/portfolio.php)

屏幕截图作为网站目前正在开发中，可能会改变...... ![在此处输入图像描述](../Images/6200c82058efb986b05c46e2979d1976.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T23:03:11.763

你甚至不需要 FQL。如果您有用户 ID，则您要查找的图像是：

`https://graph.facebook.com/USERID/picture?type=square&width=206`

这是我使用相同的请求：

![https://graph.facebook.com/825212940/picture?type=square&width=206](../Images/495001781bccf3b4327ad98bfc53a459.png)

您可以在[Graph API 用户对象/图片连接参考](https://developers.facebook.com/docs/reference/api/user/)中看到它的来源，它被描述为：

> HTTP 302 重定向到用户头像的 URL（使用 ?type=square | small | normal | large 来请求不同的照片）。如果您指定 ?redirect=false，此连接将返回个人资料图片的 URL，而不会进行 302 重定向。此外，您可以指定宽度和高度 URL 参数来请求特定尺寸的图片。这将返回最接近请求大小和请求纵横比的可用个人资料图片。如果只指定宽度或高度，我们将分别返回宽度或高度最接近请求尺寸的图片；如果宽度=高度，我们将始终返回一个方形图片。

# codeigniter - CodeIgniter 中的自动加载控制器

> ID：13296886
> 
> 赞同：0
> 
> 时间：2012-11-08T20:05:37.520
> 
> 标签：codeigniter, autoload

我有问题要问你。我尝试添加到我的页面日历和此日历中的一些事件。我知道如何在页面中加载日历，但我现在不知道如何在每个页面上自动加载此日历。

控制器：

```
<?php  if ( ! defined('BASEPATH')) exit('No direct script access allowed');

class Calendar extends CI_Controller {

    function index()
    {
        $data = array(
                3  => 'Polska - Anglia',
        );

        $this->load->library('calendar');

        $vars['calendar'] = $this->calendar->generate('', '', $data);

        $this->load->view('main/calendar', $vars);
    }
} 
```

鉴于我呼吁：

```
<?php echo $calendar;?> 
```

我使用 CodeIgniter 2.1.3

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T20:22:00.533

不要为日历创建控制器，而是创建一个库类，然后将其添加到自动加载配置文件中

```
class MyCalendar{

public function get()
    {
        $CI =& get_instance(); 
        $data = array(
                3  => 'Polska - Anglia',
        );

        $CI->load->library('calendar');

        return $CI->calendar->generate('', '', $data);
    } 
} 
```

将此库添加到自动加载文件，然后您可以使用此语句在任何您想要的地方调用它。

```
$data['calendar'] = $this->MyCalendar->get(); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-08T20:13:49.920

您可以通过更改`application/config/autoload.php`文件来自动加载库。

寻找 ：

```
$autoload['libraries'] = array(); 
```

替换为：

```
$autoload['libraries'] = array('calendar'); 
```

`application/core`要在所有页面上加载相同的日历，我建议在文件夹中构建一个父控制器。

```
abstract class BaseController extends CI_Controller
{
    protected $data;

    public function __construct()
    {
        parent::__construct();
        $this->data = array();    

        $calendarData = array(
            3  => 'Polska - Anglia'
        );

        $this->data['calendar'] = $this->calendar->generate('', '', $calendarData);
    }
} 
```

`BaseController`然后，您可以在所有控制器上扩展该类。

```
class Calendar extends BaseController {

    function index()
    {
        $this->load->view('main/calendar', $this->data);
    }
} 
```

确保始终使用`$this->data`来构建类的受保护成员。

最后，您`BaseController`不会自动加载，您可能不想在任何地方都包含它。我建议您在自动加载或配置文件的末尾添加以下方法。

```
/**
 * Extra autoload function. Loads core classes automatically.
 * @param type $class The class to load.
 */
function __autoload($class)
{
    if (strpos($class, 'CI_') !== 0)
    {
        if (file_exists($file = APPPATH . 'core/' . $class . EXT))
        {
            include $file;
        }
    }
} 
```

这将允许您自动加载`application/core`文件夹中的任何类。此解决方案可能看起来很复杂，但一旦设置完成。您可以添加`BaseController`适用于所有页面的功能，例如页眉和页脚。

希望这可以帮助！

# c# - 将信息从类发送到文本框到表单

> ID：13296891
> 
> 赞同：0
> 
> 时间：2012-11-08T20:05:48.267
> 
> 标签：c#, winforms, forms, instances

几天前，我问了一个关于在课堂上的表单上填充列表框的问题。它有效并且很棒！但是我现在想对文本框或标签做同样的事情。该问题的答案如下：

> 您正在做的是创建表单的新实例 - 我假设您正在尝试在现有表单的列表框中添加项目？
> 
> 如果是这样，请这样做。
> 
> 使用列表框在表单上创建一个函数，例如：
> 
> ```
>  public void addItemToListBox(string item)
>     {
>          listBox1.Items.Add(item);
>     } 
> ```
> 
> 然后，在类中（记得添加 using System.Windows.Forms 引用）
> 
> ```
>  public void doStuff()
>     {
>  //Change Form1 to whatever your form is called
>  foreach (Form frm in Application.OpenForms)
>  {
>       if (frm.GetType() == typeof(Form1))
>       {
>            Form1 frmTemp = (Form1)frm;
>            frmTemp.addItemToListBox("blah");
> 
>       }
>  }
>     } 
> ```

这很好用。现在我想对文本框做同样的事情。我想知道是否有人可以解释或是否有人对此有链接？

我有一个表格和一个班级。该表单创建了一个类的新实例并在该类中启动一个方法，例如数学方程式 4+4；我希望从类中的方法中将答案“8”显示在 form1 上的文本框或标签中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T20:35:47.793

您通过编辑描述的是一个模型，其中您`Form` *使用*了另一个类。正在使用的类应该不知道`Form`它的控件，或者它的计算结果如何可能被使用。

你的其他类不应该找到表单，它不应该调用表单的任何方法或字段，或者任何东西。它应该做的只是返回一个值：

```
public class OtherClass
{
    public int Add(int first, int second)
    {
        return first + second;
    }
} 
```

然后表单可以执行以下操作：

```
private void button1_Click(object sender, EventArgs e)
{
    //create an instance of the other class
    OtherClass other = new OtherClass();
    //call it's add method, and then use the result to set the textbox's text
    textbox1.Text = other.Add(4, 4).ToString(); 
} 
```

另一个类应该负责进行计算，创建结果，但不根据这些结果更新用户界面。所有的用户界面逻辑都应该包含在`Form`类中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T20:10:14.340

把它放在 Form1.cs 中：

```
public void SetText(string text)
{
    textBox1.Text = text;
} 
```

在类文件中：

```
frmTemp.SetText("XYZ"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-08T20:10:45.757

循环遍历所有打开的表单似乎是一种……新颖的……获取相关表单的方法。

相反，您应该保留对表单的引用，直到最终关闭它，并直接通过它访问表单上的变量（如列表框和文本框）。

所以，在你创建表单的地方，做类似的事情

```
Form1 form1 = new Form1(); 
```

// 打开对话框或您要对 form1 执行的任何操作

// 当你需要访问一个文本控件时：

```
form1.textBox1.Text = "Some value"; // Assumes the control is called textBox1 
```

如果*doStuff*是从一个模型（一个模拟现实世界行为的某些方面的类）中发生的，那么您正在遵循一个糟糕的设计模式。

模型不应该知道它们是如何呈现的。相反，在典型的 WinForms 应用程序中，父窗体可能会保存变量*form1*。在较新类型的 UI 项目中，您会看到 MVC 或 MVVM 模式来分离模型、视图（表示/表单）和控制器（流控制）。也可以使用 WinForms 遵循 MVC 模式，尽管我见过的许多/大多数 WinForms 应用程序都没有这样做。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-08T20:12:30.410

~~如果您使用的是 Visual Studio，您可以指定每个成员的可见性，例如`private`或`public`。`private`是默认值（如果我没记错的话）。~~

~~如果将其更改为`public`，则可以执行以下操作：~~

```
public void doStuff()
{
 //Change Form1 to whatever your form is called
 foreach (Form frm in Application.OpenForms)
 {
  if (frm is Form1)
  {
       var frmTemp = (Form1)frm;
       frmTemp.listBox1.Items.Add("blah");
       frmTemp.textBox1.Text += "hello world";
  }
 }
} 
```

**编辑 1**
更好的方法是告诉 Form1 它需要更新一些东西，它如何呈现数据与调用该方法的类无关。

```
private Form1 _FindForm()
{
   //assuming you can use Linq
   return Application.OpenForms.OfType<Form1>().Single();
}

public void displaySomething()
{
   var form = _FindForm();
   form.displaySomething();
} 
```

* * *

```
public class Form1
{
  public void displaySomething()
  {
    //add an item to the list box
    listBox1.Items.Add("foo");

    //and change the text somewhere
    textBox1.Text += "bar";
  }
} 
```

Form1 现在负责更改它所拥有的控件，而不是其他（可能是不相关的）类来操作它们。这将所有 UI 逻辑保留在`encapsulated`Form1 中，并且所有业务逻辑都可以保存在其他地方。

# c# - 查找旧 NHibernate DLL 的引用位置

> ID：13296892
> 
> 赞同：1
> 
> 时间：2012-11-08T20:05:50.857
> 
> 标签：c#, asp.net-mvc, nhibernate, dll

我正在开发一个 ASP.NET MVC C# 项目，在启动 Web 应用程序时出现以下错误：

无法加载文件或程序集“NHibernate，Version=2.1.0.1001，Culture=neutral，PublicKeyToken=aa95f207798dfdb4”或其依赖项之一。找到的程序集的清单定义与程序集引用不匹配。（来自 HRESULT 的异常：0x80131040）

基于错误和一些谷歌搜索，似乎很明显有一些东西引用了 NHibernate dll 版本 2.1.0.1001。但是，我们的项目使用的是 NHibernate 版本 2.1.2.4000（旧的，我知道）。我在整个解决方案中搜索了对该版本 NHibernate 的任何引用，但找不到。我假设我们正在使用的另一个 DLL 正在引用它，但我不知道开始找出哪个 DLL 的最佳位置。

我是否针对问题可能是什么？任何人都可以推荐的任何（希望是免费的）依赖工具？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T20:33:15.830

我认为您在基本问题上是正确的。还要考虑您的解决方案中的陈旧输出文件。重建（即清理和构建）应该涵盖这种可能性。

[Telerik JustDecompile](http://www.telerik.com/products/decompiler.aspx)是一个很好的免费工具，用于检查您引用的程序集中的引用。

此外，[Fuslogvw.exe（程序集绑定日志查看器）](http://msdn.microsoft.com/en-us/library/e74a18c4%28v=vs.100%29.aspx)可能会对加载错误有所了解。

# .net - 升级的.net，水晶 - 无效的 resx 文件？

> ID：13296896
> 
> 赞同：0
> 
> 时间：2012-11-08T20:06:03.070
> 
> 标签：.net, crystal-reports, resx

我用谷歌搜索了很多，但到目前为止还没有发现任何有用的东西。我将一个被扔给我的旧 VB .net1 应用程序升级到 .net4。

现在，当我编译时，出现以下错误：

> Resx 文件无效。无法加载用于 .RESX 文件的类型 CrystalDecisions.ReportAppServer.InternalEnterpriseLogonInfo、CrystalDecisions.CrystalReports.Engine、Version=11.5.3300.0、Culture=neutral、PublicKeyToken=692fbea5521e1304。确保已将必要的引用添加到您的项目中。

我使用二进制文件附带的 DLL 文件，它们是 Crystal 13.0.2，除了两个 Enterprise DLL 是 11.5。

我不知道该怎么做，所以任何提示都会有所帮助！

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T07:23:41.600

猜猜这都是关于不匹配的 DLL 文件。我强迫与应用程序一起服务的那些进入 GAC，然后编译。

# c - new to OpenGL: glutMouseFunc

> ID：13296906
> 
> 赞同：2
> 
> 时间：2012-11-08T20:07:09.607
> 
> 标签：c, opengl, glut

I'm trying to change the sphere position after a mouse click but it doesnt work when using the x and y from glutMouseFunc ,, here is the code :

//

```
 #include "stdafx.h"
    #include <stdlib.h>
    #include <GL/glut.h>

    bool Cone=false , ConeSelected=false,
    Cube=false, CubeSelected=false,
    Sphere=false, SphereSelected=false,
    Teapot=false, TeapotSelected =false,
    Torus=false, TorusSelected=false;
    static float XSphere=0, YSphere=-1.5 ,ZSphere=0;

    void init(void) 
    {
    GLfloat blankMaterial[] = {1.0, 0.0, 0.0};
    GLfloat whiteDiffuseLight[] = {30}; 
    glClearColor (0.0, 0.1, 0.2, 0.0);
    glClearDepth(1.0);
    glShadeModel (GL_FLAT);
    glEnable(GL_LIGHTING);
    glEnable(GL_LIGHT0);
    glEnable(GL_DEPTH_TEST);
    glMaterialfv(GL_FRONT_AND_BACK, GL_DIFFUSE, blankMaterial);
    glMaterialfv(GL_FRONT_AND_BACK, GL_SPECULAR, blankMaterial);
    glMaterialfv(GL_FRONT_AND_BACK, GL_SHININESS,  whiteDiffuseLight);
     }

    void display(void)
    {
      glClear (GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT); 
      glEnable(GL_DEPTH_TEST);

      //Drawing Cube
       if(Cube)
        {
        glPushMatrix();
        glColor3f(0, 1, 0);
        glTranslatef(-3,0,-3);
        glRotatef(20, 1,0,0);
        glutSolidCube(2);
        glPopMatrix() ;
        }

      //drawing cone
       if(Cone)
      {
        glPushMatrix();
        glColor3f (1.0, 0.0, 1.0);
        glTranslatef(0,2,0);
        glRotatef(50, 1,0,0);
        glutSolidCone(.5,1,10,10);
        glPopMatrix() ;
       }

      //Drawing Solid Sphere
      if(Sphere)
      { 
       glPushMatrix();
       glTranslatef(XSphere,YSphere,ZSphere);
       glutSolidSphere(.5, 20, 20);
       glPopMatrix();
       glDisable(GL_DEPTH_TEST);
   }
   glColor3f (1.0f, 1.0f, 1.0f);

   //drawing Torus
   if(Torus)
   {
        glPushMatrix();
        glColor3f (1.0, 1.0, 1.0);
        glTranslatef(2,2,0);
        glRotatef(60, 1,0,0);
        glutSolidTorus(.2,.5,40,30);
        glPopMatrix() ;
   }

   //Drawing teapot
   if(Teapot)
   {
       glPushMatrix ();
       glTranslatef (2.0, 0.0, 0.0);
       glutSolidTeapot(.5);
       glPopMatrix ();
   }

glFlush();
glutSwapBuffers();

}

void reshape (int w, int h)
{
   glViewport (0, 0, (GLsizei) w, (GLsizei) h); 
   glMatrixMode (GL_PROJECTION);
   glLoadIdentity ();
   gluPerspective(60.0, (GLfloat) w/(GLfloat) h, 1.0, 20.0);

   glMatrixMode(GL_MODELVIEW);
   glLoadIdentity();
   gluLookAt (0.0, 0.0, 5.0, 0.0, 0.0, 0.0, 0.0, 1.0, 0.0);
}

void keyboard (unsigned char key, int x, int y)
{int modifiers = glutGetModifiers();

   switch (key) {
       case 'A':
               Teapot=Cone=Sphere=Cube=Torus=true;
               glutPostRedisplay();
               break;
        case 'D':
               Teapot=Cone=Sphere=Cube=Torus=false;
               glutPostRedisplay();
               break;
        case 'S':
                Teapot=Cone=Cube=Torus=false;
                Sphere=true;
                TeapotSelected=ConeSelected=CubeSelected=TorusSelected=false;
                SphereSelected=true;

               break;       
      case 27:
         exit(0);
         break;
      default:
         break;
   }
} 
```

Here in the mouse section I tried to set the gltranslation in the above drawing sphere but when I checked the results for x and y they were large and that's why I couldnt see the sphere after clicking the mouse , how can i fix this ??

```
void MyMouse(int button, int state, int x, int y)
{

switch (button)
{
    case GLUT_LEFT_BUTTON:

        if(state == GLUT_UP)
        {
            if (SphereSelected)
            {
                Cone=Cube=Torus=Teapot=false;
                Sphere=true;
                XSphere=x;
                YSphere=y;
                ZSphere=1;
                glutPostRedisplay();
            }

        }
    break;
    }
}

int main(int argc, char** argv)
{
   glutInit(&argc, argv);
   glutInitDisplayMode (GLUT_DOUBLE | GLUT_RGB|GLUT_DEPTH);
   glutInitWindowSize (900, 900); 
   glutInitWindowPosition (0, 100);
   glutCreateWindow ("Scene Modeling and Interaction");
   init (); 
   glutDisplayFunc(display); 
   glutReshapeFunc(reshape);
   glutKeyboardFunc(keyboard);
   glutMouseFunc(MyMouse);
   glutMainLoop();
   return 0;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-08T23:17:01.647

鼠标功能为您提供的`x`and`y`位于屏幕像素坐标中，而不是您的场景使用的坐标中。为此，您必须将坐标居中（通过减去屏幕尺寸的一半）并将它们缩放到大约您的屏幕尺寸（通过将它们除以屏幕尺寸的顺序）。

因此，您可能想做类似的事情

```
XSphere = (x - 450) * 3.0 / 900;
YSphere = (450 - y) * 3.0 / 900; 
```

并玩弄 3.0 直到它给你一些合理的东西。

# c++ - COleSafeArray 与 CComSafeArray

> ID：13296910
> 
> 赞同：0
> 
> 时间：2012-11-08T20:07:30.930
> 
> 标签：c++, windows, com, mfc

我的情况是，我有一个 COM 对象，我需要在仅 Windows 的 C++ 代码中使用该对象。COM 对象具有接受 SAFEARRAY 作为参数以传递字节数组的函数。在查看了 SAFEARRAY API ( [http://msdn.microsoft.com/en-us/library/windows/desktop/ms221145(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms221145(v=vs.85).aspx) ) 之后，我决定这不是我想要的，我应该找到一个面向对象的包装器。我尝试寻找开源的，但没有找到。我发现微软创建了两个似乎封装了 SAFEARRAY 的对象。看起来 CComSafeArray 正是我所需要的，并且 COleSafeArray 可能很有用，但只能用于遗留兼容性。

COleSafeArray 只是为了历史兼容性还是我缺少什么？

何时应使用 COleSafeArray 代替 CComSafeArray？

是否有任何值得研究的开源实现？

各自的优点和缺点是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T21:59:28.747

从类名可以看出区别。

MFC`COleSafeArray`旨在支持 OLE 自动化，实际上是 OLE`VARIANT`结构（可以包含`SAFEARRAY`）的包装器。它通常适用于数组元素，因为它们是`VARIANT`类型，因此您需要手动选择和提取适当的类型。

ATL`CComSafeArray`旨在支持`SAFEARRAY`通用 COM，实际上是`SAFEARRAY`结构的包装器。它是使用数组元素类型参数化的模板类。

一般来说，您应该使用`CComSafeArray`，它更容易和更简单，访问元素的方式几乎与常规数组/向量相同。

`COleSafeArray`如果您使用大量使用`VARIANT`参数的 OLE 自动化接口，例如自动化 MS Office、使用 Visual Basic 组件等，有时可能会更可取。为了在这种情况下与`CComSafeArray`您进行比较，您需要手动将其包装/解包到`VARIANT`对象。

# formatting - On-Air Now Feature - ExpressionEngine

> ID：13296913
> 
> 赞同：4
> 
> 时间：2012-11-08T20:07:39.403
> 
> 标签：formatting, conditional, expressionengine

EE v2.5.3

I'm trying to accomplish the following:

*   6 Radio Shows (Mon-Fri)
*   1 Radio Show (Sun)
*   Default Setting (Logo)

I'd like to be able to tell EE the following:

```
If Monday - Friday AND
0600 - 1000 
Morning Show

else if

1000 - 1500
Midday Show

etc etc..

else if
Sunday AND
0600 - 1200
Sunday Show

else if 
1700-1900
Sunday Night Show

else 
Default display of Logo 
```

My (non-working) Example:

```
<div id="in_studio_now_content" class="container_4">

{if
    '{current_time format="%l"}' == Thursday AND
    '{current_time format="%H%i"}' >= '1000' AND
    '{current_time format="%H%i"}' <= '1700'
}

<div class="showContainer">
    <img src="http://placehold.it/75x75" class="container_1" />
    <div class="showInfo left">
        <h5>The Midday Show</h5>
    <p>with Jenn</p>
    <p class="timeslot">Weekdays 10:00 - 3:00 pm</p>
        <div id="facebookLike">F like 32k</div>
    </div>
    <a href="#" class="showLink container_3">More about this show &rsaquo;</a>
</div><!-- /show -->

{/if}

</div><!-- studio content --> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T20:34:15.113

这应该对你进行排序

```
{if
'{current_time format='%l'}' == 'Thursday' &&
'{current_time format='%H%i'}' >= '1000' &&'{current_time format='%H%i'}' <= '1700'} 
```

请注意，我已将星期四放在单引号中，并将您的时间格式也替换为单引号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T20:37:23.293

我建议使用来自 Croxton 的[Switchee](http://devot-ee.com/add-ons/switchee)和[IFElse](http://devot-ee.com/add-ons/ifelse)的组合来加快解析速度，因为它是一个相当复杂的条件。例如，这样的事情怎么样？

```
{exp:switchee var="{current_time format='%l'}" parse="inward"}
    {case value="Monday|Tuesday|Wednesday|Thursday|Friday"}
       {exp:ifelse parse="inward"}
           {if '{current_time format="%H%i"}' >= '0600' AND '{current_time format="%H%i"}' <= '0959'}
               Morning show
           {if:elseif '{current_time format="%H%i"}' >= '1000' AND '{current_time format="%H%i"}' <= '1459'}
               Midday Show
           {/if}
       {/exp:ifelse}
     {/case}
     {case value="Saturday"}
         Do the same sort of thing for Saturday
     {/case}
     {case value="Sunday"}
         Do the same sort of thing for Sunday
     {/case}
{/exp:switchee} 
```

另请注意，我已将时间调整了 1 分钟 - 否则，同一组中的两个条件（因为您使用的是等于或小于/大于）可能同时为真。

# mysql - Replication Issues with MySQL on Windows server 2008 r2 standard edition

> ID：13296917
> 
> 赞同：1
> 
> 时间：2012-11-08T20:07:48.813
> 
> 标签：mysql, windows-server-2008-r2

I have one Dell Server Intel(R) Xeon(R) 4Cores 16GB 250GB/SATA/RAID5 running MySQL 5.5.28/innodb 45GB of data on Windows server 2008 r2 standard edition.

My situation:

I cant seem to get the Replication Slave IO thread to be just as fast as the SQL thread. The SQL thread catches up to the IO thread so often, while the IO thread always play catch up with the mysql master(installed on

windows server 2003).

With that you get seconds behind master fluctuating between 0 and large number(up to 2000+)

I have ruled out network as a problem. Since I installed 2 instances on same box to replicate from each other (master on port 3308 slave on 3309). And i still experience same issue.

I have done numerous searches on-line and implemented these suggestions and yet non seems to work.

[http://bugs.mysql.com/bug.php?id=15318](http://bugs.mysql.com/bug.php?id=15318) (is an example). I have tweaked the registry and yet no solution.

Please don't say you should use *nix system since I make do with what am provided with.

Kindly let me know what I could be missing. If you need more details to my situation feel free to ask and I will provide.

If you currently run MySQL on Windows server 2008 r2 standard your advice will be appreciated.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T17:18:49.993

在 Windows 上安装 Mysql：不要使用以下变量：

```
# sync_master_info               = 1
# sync_relay_log                 = 1
# sync_relay_log_info            = 1
# sync_binlog                    = 1 
```

请注意，他们已被评论。最好将它们保留为默认值 0。

这是一个糟糕的一周，试图弄清楚为什么复制从属 io 线程总是滞后。

也许有人可能会从这些信息中受益。

# php - 通过单个复选框传递多个变量

> ID：13296923
> 
> 赞同：0
> 
> 时间：2012-11-08T20:07:58.143
> 
> 标签：php, html, mysql

我不确定执行此操作的最佳方法，或者是否可能。基本上我有一个看起来像这样的复选框：

php

```
foreach($clients as $client){
    echo'
    <input type="checkbox"  name="client_data[]" value="'.$class_id.'">
    '.$client['first_name'].' ('.$client['nickname'].') '.$client['last_name'].'
            <br />';
   } // foreach($client 
```

HTML 看起来像这样

```
<form method="post" action="">
<input type="checkbox" value="?" name="client_data[]">
Dwayne (The Rock) Johnson<br>

<input type="checkbox" value="?" name="client_data[]">
Steve (Puddin) Robinson<br>

<input type="submit" value="Add" name="exist_to_class">
</form> 
```

提交表单后，我想插入

```
$first_name, $nickname, $lastname 
```

使用如下所示的查询进入数据库：

```
mysql_query("INSERT INTO `clients` (`user_id`, `first_name`, `last_name`, `nickname` `class_id`) 
VALUES ('$user_id', '$first_name, '$last_name', '$nickname', '$class_id')"); 
```

这是可能的，还是我什至接近我试图设置它的方式？到目前为止，我还没有多少运气。

我的数据库表如下所示：

![客户表](../Images/c01fcff8153c571a09f5487e18f7e80b.png)

我需要能够使用不同的 class_id 多次输入客户端。

实现这一目标的最佳方法是什么？

这是调用该函数将数据插入数据库的代码：

```
if (isset($_POST['exist_to_class'])){
if (empty($_POST['client_data']) === true){
    $errors [] = 'You much select a client to be added to the class.';
} else {
    if (isset($_POST['client_data']) && !empty($_POST['client_data']));
     list($first_name, $nickname, $last_name) = explode('|', $_POST['client_data']);
     exist_client_to_class($class_id);
     header('Location: view_class.php?class_id='.$class_id.' ');

}

} //isset 
```

这是我的查询：

```
function exist_client_to_class($class_id, $user_id){
$class_id = (int)$class_id;
$user_id = (int)$user_id;

mysql_query("INSERT INTO `clients` (`user_id`, `first_name`, `last_name`, `nickname` `class_id`) 
VALUES ('$user_id', '$first_name, '$last_name', '$nickname', '$class_id')");
} 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T20:19:29.140

您不能通过单个复选框传递多个变量。Marc B 是对的，如果这是一个数据库支持的应用程序，那么正确的做法是让复选框发送所选人员的 ID，并使用该 ID 查找您需要的有关他们的任何信息.

如果您不使用数据库，那么一种快速而简单的方法是将有关人员的信息放入一个数组中，然后运行它`serialize()`以将其转换为字符串并将其用作值属性。在另一端，您可以运行它`unseialize()`以取回具有您想要的值的数组。

请记住，如果您这样做，您需要转义您的 sql 查询或（非常推荐）使用准备好的查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T20:36:47.353

好的，您可以按照 Asad 的建议在值中路径字符串，然后在服务器上拆分它，就像这样

```
foreach($clients as $client){
    echo'
    <input type="checkbox"  name="client_data" value="'.$class_id.'|'.$client['first_name'].'|'.$client['nickname'].'|'.$client['last_name'].'">
    '.$client['first_name'].' ('.$client['nickname'].') '.$client['last_name'].'
    <br />';
} // foreach($client 
```

在服务器上有类似的东西

```
list($class_id, $first_name, $nickname, $last_name) = explode('|', $_POST['client_data'])
mysql_query("INSERT INTO `clients` (`user_id`, `first_name`, `last_name`, `nickname` `class_id`) 
VALUES ('$user_id', '$first_name, '$last_name', '$nickname', '$class_id')"); 
```

我不确定模板中的 $class_id 变量和模型中的 $user_id 来自哪里，所以你必须弄清楚，这里的缺点是如果在某些变量中将放置分隔符 | 数据将被错误地拆分。为避免这种情况，您可以使用与主复选框以某种方式关联的隐藏输入（javascript、逻辑或whaterver在您的情况下会发挥最佳作用）

UPD：哦，是的，您可以将数据序列化/反序列化为数组[http://us3.php.net/serialize](http://us3.php.net/serialize)作为 octern 建议

# c# - 查找 URL 响应？默认 WebBrowser 控件的替代方案？

> ID：13296925
> 
> 赞同：0
> 
> 时间：2012-11-08T20:08:10.180
> 
> 标签：c#, webbrowser-control

大家好，在过去的几周里，我有一个问题困扰着我。

我要完成的工作：我需要一个能够更改用户代理（在启动时）和引用者的网络浏览器控件。但最重要的是查看 url 响应的能力。我的意思是，例如，如果您导航到一个网站，您会返回图像/Javascripts 文件/动态 URL 作为响应，我需要访问其中一些具有动态变量的那些 url（常规 Web 浏览器控制不会向您显示这些并且您可以除了使用提琴手核心之外，不要以任何方式访问它）。

我可以使用 webbrowser + fiddlercore 来做到这一点，我可以使用这些 url 地址查看并执行任何操作。问题是如果你运行这个程序的几个实例（或者有时如果程序有一些自动化来处理 url 响应）它会卡住或不起作用。我尝试修复它并使其工作，但这是一种无法正常工作的 hacky 解决方案。我需要一种简单的方法来访问这些 url，就像你使用 httpwebrequest 一样，但是作为一个 webbrowser。为什么我需要它作为网络浏览器？我的工作方式我需要执行所有跟踪像素、脚本和图像等。httpwebrequest 中的普通 webbrowser 行为你不能只是导航，所有脚本都将作为 webbrowser 执行，或者你可以吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T20:14:12.263

使用 WinForms 应用中的 System.Windows.Forms.WebBrowser 控件，将 webBrowser.URL 属性设置为您感兴趣的页面的 URL。

webbrowser 的 DocumentCompleted 事件在页面加载后触发。任何动态加载的 JavaScript 都应该在那时完成。挂钩 DocumentCompleted 事件并使用 webbrowser.Document.Images 获取页面上所有图像元素的列表。从这些图像中，您可以获取它们的 SRC 属性，其中包含它们的 URL，包括任何挂在末尾的查询参数。您可以使用 webbrowser.Document.Links 获取页面上所有超链接的列表。对于其他感兴趣的 HTML 元素，您可以使用 GetElementsByTagName("foo") 从页面中获取具有该标签名称的所有元素，然后挖掘它们的属性以提取 URL 属性。

使用 webbrowser.Document，您可以访问任何 HTML 元素，无论是静态创建的还是动态创建的。

您无法通过 webbrower.Document 获得的是使用 XMLHttpRequest() 异步加载的数据，因为该数据不是浏览器文档对象模型的一部分。带有脚本错误按钮的网页将难以拦截。

但是，如果您知道页面上执行的 JavaScript 将数据存储在何处，则可以使用 webbrowser.Document.InvokeScript() 访问它。例如，如果页面上的 JavaScript 将 URL 存储在窗口对象的 mydata 属性中，您可以尝试使用 webbrowser.Document.InvokeScript("window.mydata") 或一些变体来将 mydata 的值检索到 C# 应用程序中。

# jquery - 将 html 值添加到图像的属性中

> ID：13296928
> 
> 赞同：1
> 
> 时间：2012-11-08T20:08:14.703
> 
> 标签：jquery, html

我对此有疑问..是否添加了值，但仅添加了第一个`h2`标签。我错过了什么？

**谢谢**

**我的目标**是获取标签的值并将值作为和标签`h2`添加到图像中。`alt``title`

下面是我的 HTML 和 JS。这是我的[jsFiddle 文件](http://jsfiddle.net/jv7M7/)。

**HTML**

```
<ul class="list">
  <li>
    <img title="Product" src="/img.jpg" />
    <h2>Blue</h2>
  </li>
  <li>
    <img title="Product" src="/img.jpg" />
    <h2>Red</h2>
  </li>
  <li>
    <img title="Product" src="/img.jpg" />
    <h2>Yellow</h2>
  </li>
</ul> 
```

​</p>

**JS**

```
var imageID = $('.list').find('h2').html();

$("img").attr('title', imageID + ' Product');​ 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T20:10:35.740

尝试这个

```
$(".list img").each(function() {
    var txt = $(this).siblings("h2").text();
    $(this).prop("alt", txt).prop("title", txt + " Product");
}); 
```

[**DEMO**](http://jsfiddle.net/jv7M7/3/) -*使用 Firebug 或类似软件进行审核*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T20:10:43.260

尝试这个 ：

```
$("img").each(function(){
   $(this).attr('title', $(this).closest("li").find("h2").text()+ ' Product');​
}) 
```

# git - 使用 git 管理一本书的示例源代码：如何传播更改？

> ID：13296931
> 
> 赞同：3
> 
> 时间：2012-11-08T20:08:31.930
> 
> 标签：git

我正在写一本技术书籍。它有一个我在整本书中建立的示例项目。当然，以常规方式使用 git 是没有问题的。

但是当软件的新版本出现时：这可能意味着代码开头的某个地方有一个小改动……初始生成的代码有一个小改动。我如何在第二个变更集中进行更改并让它在整个示例中传播？

或者我可能决定在第二章更改一个变量名。这*必须*在以下所有章节的示例中传播。

可能有一个 git 技巧可以用来解决这个问题，所以我全神贯注于一个有用的提示。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T20:24:15.527

好的，由于您试图管理在 git 提交时引导用户完成的步骤，因此您基本上拥有二维历史记录。在一个维度上，当您为新版本的软件更新项目、修复示例中的错误等时，您拥有正常的 git 历史记录。在另一个维度上，您拥有引导读者完成的步骤。

```
O-->O-->O-->O-->O  Third edition
^   ^   ^   ^   ^
|   |   |   |   |
O-->O-->O-->O-->O  Second edition
^   ^   ^   ^   ^
|   |   |   |   |
O-->O-->O-->O-->O  First edition

^   ^   ^   ^   ^
|   |   |   |   |
|   |   |   |   Add Step 5
|   |   |   Add Step 4
|   |   Add Step 3
|   Add Step 2
Step 1 
```

您引导用户完成的每个修改都应该是一个分支。要更新示例，请检查该分支，制作并提交您的修改。然后，为了确保您在该示例中所做的任何更改都反映在后续步骤中，您应该按顺序检查每个后续示例的分支，并**合并**到您刚刚更新的分支中。重新定位将是一个错误，因为这会丢弃沿图书版本维度的历史关系，而只会保留您引导读者完成的步骤的历史。

假设您必须更新第 1 步，并且您需要在第 3 步中进行错误修复

```
git checkout step_1
# update step_1
git commit -a -m "update initialization example for v9.0"
git checkout step_2
git merge step_1
git checkout step_3
# bug fix
git commit -a -m "fix bug reported by reader..."
git merge step_2
git checkout step_4
git merge step_3
git checkout step_5
git merge step_4
git tag fourth_edition

       >X-->X-->X  Fourth edition
      / ^   ^   ^
     /  |   |   |
A-->X   B   |   |
^   ^   ^   |   |
|   |   |   |   |
O-->O-->O-->O-->O  Third edition
^   ^   ^   ^   ^
|   |   |   |   |
O-->O-->O-->O-->O  Second edition
^   ^   ^   ^   ^
|   |   |   |   |
O-->O-->O-->O-->O  First edition 
```

提交 B 是错误修复，提交 A 是对步骤 1 的更新。Xs 正在合并先前步骤的更新。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-08T20:14:56.180

It sounds like you're arranging the Git repository so that a "commit" corresponds to a "chapter" (or something similar). Assume that each revision is tagged with a tag name `chapter-x` for the following:

First, go back to the chapter you want to change:

```
git checkout chapter-2 
```

Make the change to the code, and commit it, amending the original `chapter-2` commit:

```
# edit file here
git add test.c
git commit --amend 
```

Update the `chapter-2` tag to point to the new, amended commit:

```
git tag chapter-2 
```

Switch back to the end of your book:

```
git checkout master 
```

and finally, rebase against the *new* `chapter-2`:

```
git rebase chapter-2 
```

This will rewrite chapters 3 and beyond so that they are based off the change you made in chapter 2\. Note that you may encounter a lot of conflicts doing this (especially if, in later chapters, you modify code involving whatever you changed in chapter 2). Git can help, but unfortunately it can't do *all* the work for you.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-08T20:28:32.103

要以这种方式修改历史，通用工具是`git rebase -i`. 有一个警告：你不能用它来重写第*一个*提交，因为你必须指定一个提交开始（不包括在内）。

运行；这将打开一个编辑器列出提交。在您需要修改的提交上将命令更改为“编辑”，然后保存并退出。`git rebase -i *startcommit*`

然后，Rebase 将“停止修改”您指定的提交；进行必要的代码更改，使用 应用它们`git commit --amend`，或在适当的情况下将它们作为新的附加提交提交。完成更改后，请执行`git rebase --continue`; 这将应用所有先前存在的“稍后”提交，并在您需要解决冲突时停止。

我强烈建议之后使用查看器查看历史记录，`gitk`以确保整个画面仍然是您想要的；您可能还想将最终版本与旧的最终版本`git diff master@{1} master`（或您使用的任何分支名称）进行比较。

# python - 输入数据以在 Quickdraw 中创建直方图

> ID：13296938
> 
> 赞同：0
> 
> 时间：2012-11-08T20:09:09.907
> 
> 标签：python, animation, histogram, quickdraw

我被一个问题困住了。如果我在列表中有一组数据（比如学生人数和他们相应的年级），我将如何编码以在 quickdraw 中创建直方图？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T19:48:17.053

[Quickdraw](http://pages.cpsc.ucalgary.ca/QuickDraw/docs/index.html)不*支持*开箱即用的图表。一切都需要自己绘制和映射，这里是一个例子：

```
#!/bin/python 

import random

#create 40 random grades 
grades = [(float(int(float(20*random.random())))/2)+0.5 for i in xrange(40)]

#count the occurrence of each grade
histogram = []
for i in sorted(set(grades)): histogram.append([int(i*50),grades.count(i)])

#some grid information
gridsize = 500
griddiv = 20
topleft = 50

#graph title
print 'text', '"','Histogram of Grades','"', 220, 25

#x axis title
for i in range(1,21):
    print 'text', '"',float(i)/2,'"', (i+1)*25, 570

#y axix title
for i in range(0,11):
    print 'text', '"',i,'"', 25, 600-(i+1)*50

#grid
print 'grid', topleft, topleft, gridsize, gridsize, griddiv, griddiv

#chart rectangles 
print 'color 0 140 0'
for i in histogram:
    print 'fillrect',i[0]-25+topleft, gridsize-(50*i[1])+topleft,gridsize/griddiv,50*i[1],'b'+str(i[0])
    print 'fillrect', 'color','b'+str(i[0]) 
```

保存代码`histogram.py`并运行`python histogram.py | java -jar quickdraw.jar`被警告它不是很漂亮！更好的方法是使用 python 库`matplotlib`

![在此处输入图像描述](../Images/cccf75195fa0b71f783196fa11c7a59e.png)

# java - 我如何知道文件类型是否为 PDF？

> ID：13296939
> 
> 赞同：9
> 
> 时间：2012-11-08T20:09:14.910
> 
> 标签：java, pdf

*   这个答案[如何确定文件是否为 PDF 文件？](https://stackoverflow.com/questions/941813/how-can-i-determine-if-a-file-is-a-pdf-file)建议下载另一个库，但我的要求是我只需要检查文件目录是否为 PDF 类型

*   为这种用途使用完整的库看起来有点矫枉过正

*   有什么方法可以知道 Java 文件是 PDF 类型的吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-08T20:13:32.480

好吧，根据[维基百科](http://en.wikipedia.org/wiki/Magic_number_%28programming%29)PDF 文件以幻数开头：`"%PDF" (hex 25 50 44 46)`所以也许你应该检查文件中的 InputStream 并检查它。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-09-28T16:55:44.510

[*SimpleMagic*](https://github.com/j256/simplemagic)是一个用于解析内容类型的 Java 库：

```
<!-- pom.xml -->
    <dependency>
        <groupId>com.j256.simplemagic</groupId>
        <artifactId>simplemagic</artifactId>
        <version>1.8</version>
    </dependency> 
```

* * *

```
import com.j256.simplemagic.ContentInfo;
import com.j256.simplemagic.ContentInfoUtil;
import com.j256.simplemagic.ContentType;
// ...

public class SimpleMagicSmokeTest {

    private final static Logger log = LoggerFactory.getLogger(SimpleMagicSmokeTest.class);

    @Test
    public void smokeTestSimpleMagic() throws IOException {
        ContentInfoUtil util = new ContentInfoUtil();
        File possiblePdfFile = new File("/path/to/possiblePdfFile.pdf");
        ContentInfo info = util.findMatch(possiblePdfFile);

        log.info( info.toString() );
        assertEquals( ContentType.PDF, info.getContentType() );
    } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-08T20:11:00.187

好吧，一种骇人听闻的解决方案是查看完整的文件名，看看它是否以“.pdf”结尾。以下内容应该有所帮助：

```
import javax.activation.*;  

public class ShowMimeType  
{  
    public static void main(String[] args) {  
        FileDataSource ds = new FileDataSource(args[0]);  
        String contentType = ds.getContentType();  
        System.out.println("The MIME type of the file " + args[0] + " is: " + contentType);  
    }  
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-08T20:14:03.310

If checking the file extension is not satisfactory, you coudl try checking the files [magic number](http://en.wikipedia.org/wiki/Magic_number_%28programming%29) by reading a few bytes of the file

```
PDF files start with "%PDF" (hex 25 50 44 46). 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-06-04T10:26:17.113

尝试了下面的代码，它工作。

```
public static boolean isSelectedFilePdf(Uri uri, ContentResolver contentResolver) {
if (uri != null) {
        if (uri.getScheme().equals("content")) {
            String type = contentResolver.getType(uri);
            return type != null && type.startsWith("application/pdf");
        } else {
            String fileName = uri.getLastPathSegment();
            String extension = fileName.substring(fileName.lastIndexOf("."));
            return extension != null && extension.equalsIgnoreCase(".pdf");
        }
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-06-05T03:31:39.453

[Check if a PDF-File is valid (Python)](https://stackoverflow.com/questions/559096/check-whether-a-pdf-file-is-valid-python)中提到了以下解决方案

在我的项目中，我需要检查某些上传文件的 mime 类型。我只是像这样使用文件命令：

```
from subprocess import Popen, PIPE
filetype = Popen("/usr/bin/file -b --mime -", shell=True, stdout=PIPE, stdin=PIPE).communicate(file.read(1024))[0].strip() 
```

您当然可能希望将实际命令移动到某个配置文件中，因为命令行选项也因操作系统（例如 mac）而异。

如果您只需要知道它是否是 PDF 并且无论如何都不需要处理它，我认为 file 命令是比 lib 更快的解决方案。当然也可以手动进行，但如果您想检查不同的类型，文件命令可能会为您提供更大的灵活性。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-03-21T20:28:37.097

将更轻的 URLCONnection.guessContentTypeFromStream() 与更重的 AutoDetectParser 相结合，该方法为某些 mimeTypes 返回 null。

```
if(currentImageType ==null){
                ByteArrayInputStream is = new ByteArrayInputStream(image);
                String mimeType = URLConnection.guessContentTypeFromStream(is);
                if(mimeType == null){
                    AutoDetectParser parser = new AutoDetectParser();
                    Detector detector = parser.getDetector();
                    Metadata md = new Metadata();
                    mimeType = detector.detect(is,md).toString();

                    if (mimeType.contains("pdf")){
                        mimeType ="pdf";
                    }
                    else if(mimeType.contains("tif")||mimeType.contains("tiff")){
                        mimeType = "tif";
                    }
                }
                if(mimeType.contains("png")){
                    mimeType ="png";
                }
                else if( mimeType.contains("jpg")||mimeType.contains("jpeg")){
                    mimeType = "jpg";
                }
                else if (mimeType.contains("pdf")){
                    mimeType ="pdf";
                }
                else if(mimeType.contains("tif")||mimeType.contains("tiff")){
                    mimeType = "tif";
                }

                currentImageType = ImageType.fromValue(mimeType);
            } 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2012-11-08T20:10:41.240

这可能听起来有点太明显了，但请检查文件名上的扩展名。

如果它对 explorer 足够好，它应该对你足够好

# facebook-graph-api - 无法在播放框架中安装 fbgraph 模块

> ID：13296941
> 
> 赞同：0
> 
> 时间：2012-11-08T20:09:19.793
> 
> 标签：facebook-graph-api, playframework, playframework-2.0, sbt, fb-graph

所以我正在尝试安装 fbgraph 模块以在游戏框架中对其进行测试。根据文档（http://www.playframework.org/modules/fbgraph-0.3/home），我应该下载 fb graph 模块，然后使用以下命令安装它：

```
play install fbgraph-{version} 
```

当我这样做时，我得到这个错误：

```
[error] Not a valid command: install (similar: initialize, inspect, shell)
[error] Not a valid project ID: install
[error] Not a valid configuration: install (similar: optional)
[error] Not a valid key: install (similar: initialize, dist, stage)
[error] install
[error]        ^ 
```

有没有更好的方法来做到这一点？Maven依赖可能是？

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T20:53:55.397

您在播放 1 和播放 2 中使用了插件： [http ://www.playframework.org/modules](http://www.playframework.org/modules)

> 这些模块仅适用于 Play 1.x 系列。

Play 1 与 play 2 不兼容。您可以在其中找到 play 2 的插件： [https ://github.com/playframework/Play20/wiki/Modules](https://github.com/playframework/Play20/wiki/Modules)

也许您对[http://restfb.com/](http://restfb.com/)感到满意。

您可以添加 /project/Build.scala

```
val appDependencies = Seq(
     "com.restfb" % "restfb" % "1.6.11" //this line should be new
) 
```

# html - 防止相对定位的div下推内容

> ID：13296946
> 
> 赞同：8
> 
> 时间：2012-11-08T20:09:38.770
> 
> 标签：html, css

如何防止相对定位的 div 下推后面的内容？在下面的示例中，我试图在较大的红色 div 上显示一个小的绿色 div，但是当绿色 div 出现时，下一个红色 div 被推下。

如果有更好的方法可以做到这一点，我会很感激提示。

这是一个运行示例：http: [//jsfiddle.net/38Rqh/](http://jsfiddle.net/38Rqh/)

```
<html>
<head>
<style type="text/css" media="screen">

.top {
  display: none;
  background-color: green;
  width: 100px;
  position: relative;
  top: -50px;
}

.bottom {
  width: 200px;
  height: 200px;
  background-color: red;
  border: 1px solid black;
}

.bottom:hover + div {
    display: block;
}

</style>
</head>
<body>

<div class="bottom">

</div>
<div class="top">Displaying data</div>

<div class="bottom">

</div>
<div class="top">Displaying data</div>

<div class="bottom">

</div>
<div class="top">Displaying data</div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-08T20:25:49.097

`relative`仍然占用空间。你需要的是`absolute`. 一种可能性是将`.bottom`元素设置为`position: relative`，然后将`.top`元素放置在其中并绝对定位它们。

[http://jsfiddle.net/38Rqh/1/](http://jsfiddle.net/38Rqh/1/)

```
.top {
  display: none;
  background-color: green;
  width: 100px;
  position: absolute;
  top: 150px;
}

.bottom {
  width: 200px;
  height: 200px;
  background-color: red;
  border: 1px solid black;
    position: relative;
}

.bottom:hover .top {
    display: block;
} 
```

```
<div class="bottom">
<div class="top">Displaying data</div>
</div>

<div class="bottom">
<div class="top">Displaying data</div>
</div> 
```

这样，`.top`元素将相对于它们的包含来定位`.bottom`。

这有一个额外的好处，即`.top`当悬停在`.top`自身上时不会隐藏，导致您在示例中看到的闪烁。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T20:21:24.230

我可能把它和应该出现的地方混在一起了，但是使用包装器 div 和绝对位置而不是相对位置会消除额外的空间。

```
<html>
<head>
<style type="text/css" media="screen">

.top {
  display: none;
  background-color: green;
  width: 100px;
  position: absolute;
  bottom: 50px;
}

.bottom {
  width: 200px;
  height: 200px;
  background-color: red;
  border: 1px solid black;
}

.bottom:hover + .top {
    display: block;
}

.wrapper { position: relative; }

</style>
</head>
<body>

<div class="wrapper">
  <div class="bottom">

  </div>
  <div class="top">Displaying data</div>
</div>
<div class="wrapper">
  <div class="bottom">

  </div>
  <div class="top">Displaying data</div>
</div>
<div class="wrapper">
  <div class="bottom">

  </div>
  <div class="top">Displaying data</div>
</div>
</body>
</html> 
```

# string - 两个替换作为参数

> ID：13296947
> 
> 赞同：2
> 
> 时间：2012-11-08T20:09:39.847
> 
> 标签：string, haskell, substitution

我正在编写一个以 2 个替换作为参数的 Haskell 函数。我已经处理了如果任何一个参数是`Nothing`，那么函数将返回的情况`Nothing`。如果两者都不是`Nothing`，则应将它们组合成一个替换。我做了以下事情：

```
args :: Maybe (Subst a) -> Maybe (Subst a) -> Maybe (Subst a)
args (Just v) (Just v') = Just (v ++ v')
args _        _         = Nothing 
```

但是，我收到预期类型与实际类型不匹配的错误。我很困惑为什么。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T20:19:09.833

的类型`++`是

```
(++) :: [a] -> [a] -> [a] 
```

但是您试图将其应用于 type 的两个值`Subst a`。

你可以写一个`combineSubs`这样的辅助函数：

```
combineSubs :: Subst a -> Subst a -> Subst a
combineSubs (S xs) (S ys) = S (xs ++ ys) 
```

您还可以`S`在函数的参数中进行模式匹配`args`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T07:32:35.853

只是对您的架构的评论：

没有替换（会在`Nothing`这里）和“空”替换之间真的有区别`S []`吗？如果没有，您可能应该将`Maybe`级别和代码缺失替换简单地删除为`S []`. 如果有*差异*，您可以考虑将这种情况添加到`Subst`，例如`data Subst a = S [(String,a)] | None`。

# spring - 在 @Query 注释中指定查询时，如何使用 Spring Data JPA 初始化惰性关联？

> ID：13296954
> 
> 赞同：1
> 
> 时间：2012-11-08T20:10:00.573
> 
> 标签：spring, hibernate, jpa, spring-data-jpa

这是我转换为 Spring Data JPA*之前的查询。*请注意我过去是如何`Hibernate.initialize()`手动获取小部件的消息的。

```
public Object findWidget(final Widget findMe) {
    Widget widget = getJpaTemplate().execute(new JpaCallback<Widget>() {
        public Widget doInJpa(EntityManager em) throws PersistenceException {
            Query q = em.createQuery("SELECT h FROM " + entityClass.getName() + " h where h.widgetId = ? ");
            q.setParameter(1, findMe.getId());

            Widget found = (Widget)q.getSingleResult();

            //Initialize lazy associations
            if(found!= null){
                Hibernate.initialize(widget.getMessages());
            }

            return found;
        }
    });
    return widget;
} 
```

这就是我的查询函数现在的样子。请注意，没有实体可以放入`Hibernate.initialize()`。

```
@Query("SELECT h FROM Widget h where h.widgetId = ?1 ")
public AccessPoint findWidget(String widgetId); 
```

那么如何指定小部件的消息是主动获取而不是延迟获取呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-08T20:17:10.700

尝试获取连接，如下所示：

```
@Query("SELECT h FROM Widget h LEFT JOIN FETCH h.messages WHERE h.widgetId = ?1 ")
public AccessPoint findWidget(String widgetId); 
```

[http://docs.oracle.com/html/E24396_01/ejb3_langref.html#ejb3_langref_fetch_joins](http://docs.oracle.com/html/E24396_01/ejb3_langref.html#ejb3_langref_fetch_joins)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T15:37:24.700

在我发布这个问题后不久，我意识到我正在尝试将功能放入真正属于服务层的 DAO 层。

所以现在我`Hibernate.initialize(widget.getMessages())` 在`WidgetService`调用`WidgetDAO.findWidget()`.

我真的应该一直这样做。

编辑：@MikeN 有一个很好的观点。**fetch join**是真正的答案，因为它独立于实现并在原始查询中获取所有必要信息。

# php - 脚本下载 DI.FM 列表仅在 Opera 下有效

> ID：13296955
> 
> 赞同：1
> 
> 时间：2012-11-08T20:10:04.673
> 
> 标签：php, javascript, jquery

你好，stackoverflow 的朋友们！今天我厌倦了我最喜欢的网络电台的旧链接，所以我决定为 di.fm 的所有频道制作一个下载器。这个想法很简单：下载页面，进入菜单并解析它。之后创建一个播放列表并让用户下载它。

所以我创建了一个 PHP 脚本作为我的 JS 脚本的 API。PHP 函数用于下载页面（JS 不能真正做到这一点），将通过 POST 发送的播放列表保存在 cookie 中，并将其作为文件提供。Cookies 应该是 JS 和 PHP 之间的通信渠道（使用 POST 我不能真正让文件下载本身）。

到目前为止，一切都很好。在 Opera 下，一切都像魅力一样。Chrome 和 Firefox 中的事情变得越来越复杂。Chrome 在没有下载对话框的情况下重新加载页面，Firefox 的工作原理大致相同，只是有时让我下载列表……那是空的。

任何想法如何解决它？下面是代码（喜欢的话可以自己使用）： `http://pastebin.com/dcEzxV9w`

谢谢指教，

德拉科

# java - 使用单例与扩展 Application 类

> ID：13296958
> 
> 赞同：1
> 
> 时间：2012-11-08T20:10:18.743
> 
> 标签：java, android, singleton

我正在尝试确定在整个 android 应用程序中实现对对象集合的访问的最佳方式。我需要所有活动都能够访问我的对象列表，这些对象在启动时从服务器检索并在需要时刷新。假设它是特定用户的订单集合，它将显示在列表中并使用应用程序进行更新。

我已经阅读了有关使用两者的原因的详尽解释，但我正在尝试确定最适合我的应用程序的方法。

- 不会在平板电脑上使用 - 不会与其他 Android 应用程序交互

我已经实现了一个名为 UserData 的类，它扩展了`Application`该类并在应用程序加载时构建。可以随时通过将其转换为 UserData 类型来检索它`getApplicationContext()`

这是最好的方法吗？为了便于在设备上本地存储数据，以便在应用程序运行时立即加载数据，然后在互联网连接可用时在后台刷新，是否首选任何一种方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T21:10:01.177

我的直接反应是您应该使用exported="false" 的内容提供程序。对象中的数据肯定会保留，您可以随时更新它，并且即使设备没有连接，您也可以显示有用的数据。即使您的整个应用程序被杀死，数据仍然存在。

我不愿将数据“持久化”在内存中，因为 Android 应用程序的世界充满了危险 :)。系统不仅可以杀死我，而且用户愿意杀死任务（错误地认为他们正在以某种方式提高性能）甚至关闭手机。简而言之，除非我向文件系统写入内容，否则我不能指望持久性。

请注意，您可以注册一个游标来观察内容提供程序中的变化，然后将游标调整为 ListView。这样，只要数据发生变化，您就会收到通知。

除此之外，我会搜索“Application”，然后搜索“Singleton”，看看共识是什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T21:25:16.753

如果您决定不按照@Joe Malin 提到的那样做，请使用单例模型。保存您的数据不是应用程序类的责任。这是模特的角色。但是请注意，如果您的应用程序进入后台，操作系统可能会终止该应用程序并且您的模型将会死掉。只要应用程序在前台，它就不会死。这可能包括您启动外部浏览器或视频播放器之类的事情。如果操作系统需要申请内存，您的应用程序和模型可能会在视频播放器完成时死掉。

# html - 在 html “A” 元素中应用背景图像是错误的吗？

> ID：13296960
> 
> 赞同：0
> 
> 时间：2012-11-08T20:10:32.743
> 
> 标签：html, css

我曾经使用以下结构来保存带有 div 内链接的徽标：

```
 <a href="http://mysite.com">
        <div class="logo"></div>
    </a> 
```

使用以下 CSS：

```
 .logo {
        float: left;
        width: 120px;
        height: 24px;
        background: url('logo.png') no-repeat;
    } 
```

如果我删除 DIV 并将“徽标”类直接应用于 A 元素，是错误的还是兼容性有任何问题？像这样：

```
 <a href="http://mysite.com" class="logo"></a> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T20:12:04.827

这样做并没有错。您将需要添加 display:block 以将尺寸应用于非块级元素，但至于网站的读取和爬网方式，不，它不会伤害您。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T20:12:09.247

不，这没什么错。这样做实际上更好，减少冗余标记。

其他一些需要注意的事项：

*   除了`HTML5`将**块元素**（在本例中为`div`）放入`<a>`
*   `<a>`您应该在SEO/屏幕阅读器中放置一个文本，并使用`text-indent:-999px`和隐藏文本`overflow:hidden`。`display:block`是不必要的，因为`float:left`它是隐式设置的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T20:20:27.447

您可以使用以下方法使 img 成为块元素：

```
 .logo {
        float: left;
        width: 120px;
        height: 24px;
        background: url('logo.png') no-repeat;
        display:block;
    } 
```

正如其他人所说，使用带有背景的 a-tag 是安全的，但通常我在 div 中有徽标，在顶部有一个锚点。祝你好运 ; )

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-08T20:33:29.547

它造成了一个重大的可访问性问题，直接违反了现代可访问性指南 WCAG 2.0 的[指南 1.1](http://www.w3.org/TR/WCAG/#text-equiv)：“为任何非文本内容提供文本替代品，以便将其更改为人们需要的其他形式，例如大字体、盲文、语音、符号或更简单的语言。” 元素内容`a`为空，显示背景图片，开启CSS并开启图片加载；但没有文字替代品。

而且您不能为*背景*图像指定替代文本。改用*内容*图像：

```
<a href="..."><img src="logo.png" alt="ACME"></a> 
```

这里的“ACME”将被链接页面的描述性名称或缩写替换。

默认情况下，作为链接的图像具有彩色边框，与链接文本颜色相同。您可以通过`border="0"`在`img`标签或`a img { border: none }`CSS 中使用来删除它。

# c++ - Qt 和 OpenGL，对多个小部件使用一个上下文

> ID：13296970
> 
> 赞同：2
> 
> 时间：2012-11-08T20:10:55.070
> 
> 标签：c++, qt, opengl

我最近问了一个关于如何解决跨多个上下文共享顶点数组对象和帧缓冲区对象的问题，然后我确信使用多个上下文只会引起比解决方案更多的麻烦。

我正在使用 Qt，目前我的设置是我有一个不可见的 QGLWidget，然后我在可见 QGLWidget 的构造函数中使用它来共享资源，这很好接受我不能在上下文中共享某些东西。

我希望找到一个解决方案，我可以使用单个上下文来呈现我所有不同的小部件，[这个问题](https://stackoverflow.com/questions/8496728/multiple-qglwidgets-with-a-single-opengl-context-in-c)是指使用 QGLWidget 构造函数，您可以在其中传递您希望共享的 QGLContext ，但是这似乎没有使用一个常见的上下文，而是设置一个 QGLWidget 使用的上下文，当您尝试在第二个小部件上使用它时，会调用 qWarning 通知您 QGLContext 必须引用您将其传递给的小部件。

我的应用程序的目标是拥有 2 个单独的 GUI，它们呈现不同的场景，但共享相同的上下文。目前我有一个“世界”编辑器，它可以编辑一个场景并将其保存到一个文件中以在我的游戏引擎中使用，我还有一个“材质”编辑器，它允许您以图形方式编辑类似于 UDK 材质编辑器的材质，那里是一个使用 OpenGL 的预览窗口。

理想情况下，我希望保持我目前的设计，即拥有一个可通过选项卡导航的统一游戏编辑器，而不是为编辑器的每个部分设置单独的程序。

唯一看起来像是一个不错的解决方案的是使用 QGraphicsView 并将 QGLWidget 设置为视口，但这似乎根本不起作用。我可以渲染基本的原语，但如果再多的话，它就会崩溃。

有没有人有处理多个 OpenGL 小部件的问题的经验，如果有，你能解释一下你为实现目标所采取的过程吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T08:10:25.670

我不太明白你为什么遇到这么多麻烦，我正在构建一个类似 CAD 的应用程序，所以分享一些上下文，如下所示：

*   我使用应用程序范围的隐藏`QGLWidget`作为主窗口类的成员，这是加载的上下文着色器。
*   对于每个文档窗口，窗口类都有一个隐藏`QGLWidget`成员，这是加载上下文几何图形。着色器上下文用作它的“共享”小部件，允许文档访问应用程序范围的着色器。
*   每个文档窗口中的 5 个视口中的每一个都是可见的`QGLWidget`，这是实际渲染发生的地方。文档窗口几何图形`QGLWidget`用作“共享”小部件，因此视口可以访问文档范围的几何数据和应用程序范围的着色器。

shared 小部件参数允许您创建上下文的“继承”树，每个上下文都可以访问它自己的和所有它的祖先数据（但不是它的孩子或兄弟姐妹）。

# ruby-on-rails - rails模型子类化->多表继承或多态

> ID：13296973
> 
> 赞同：12
> 
> 时间：2012-11-08T20:11:00.523
> 
> 标签：ruby-on-rails, ruby-on-rails-3

这是我的设置，然后解释了我要完成的工作。

```
class Layer < ActiveRecord::Base
  has_and_belongs_to_many :components
end

class Component < ActiveRecord::Base
  has_and_belongs_to_many :layers 
end

class ImageComponent < Component
  # I want this table to inherit from the Component table
  # I should be able to add image-specific fields to this table
end

class VideoComponent < Component
  # I want this table to inherit from the Component table
  # I should be able to add video-specific fields to this table
end 
```

我想能够做什么：

```
layer.components << ImageComponent.create
layer.components << VideoComponent.create 
```

在实践中，我意识到`ImageComponent`并且`VideoComponent`实际上必须继承自`ActiveRecord::Base`. 有什么方法可以很好地在 Rails 中实现模型子类化？

现在我的`Component`模型设置是`polymorphic`这样的`ImageComponent`，`VideoComponent`每个`has_one :component, as: :componentable`. 这给我的代码增加了一层烦恼和丑陋：

```
image_component = ImageComponent.create
component = Component.create
component.componentable = image_component
layer.components << component 
```

我想一个简单的解释方法是我想在层和组件之间实现一个 habtm 关系。我有多种类型的组件（即 ImageComponent、VideoComponent），它们各自具有相同的基本结构，但与它们相关联的字段不同。关于如何实现这一点的任何建议？我觉得我错过了一些东西，因为我的代码感觉很hackish。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-13T09:21:17.320

在 Rails 中实现这一点的“官方”方法是使用单表继承。ActiveRecord 内置了对 STI 的支持：[http ://api.rubyonrails.org/classes/ActiveRecord/Base.html#class-ActiveRecord::Base-label-Single+table+inheritance](http://api.rubyonrails.org/classes/ActiveRecord/Base.html#class-ActiveRecord::Base-label-Single+table+inheritance)

如果你想使用多表继承，你必须自己实现它......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T08:10:25.450

这里的主要问题是**组件及其类型**之间，而不是层和组件之间。我有一个类似的问题。将解释针对您的问题的解决方案。

将类型（图像/视频）存储为组件的资源，并为组件提供一个控制器，而不是所有类型（）

让模型结构为

```
Component < ActiveRecord::Base
  accepts_nested_attributes_for :resource
  belongs_to :resource, :polymorphic => true, :dependent => :destroy

  def resource_attributes=(params = {})
    self.resource = spec_type.constantize.new unless self.resource
    self.resource.attributes = params.select{|k| self.resource.attribute_names.include?(k) || self.resource.class::ACCESSOR.include?(k.to_sym)}
  end

#component will be either image or video and not both

Image < ActiveRecord::Base
  has_one :component, as :resource 

Video < ActiveRecord::Base
  has_one :component, as :resource 
```

以及单个控制器作为组件 CRUD 的 ComponentsController。由于组件接受资源（即图像/视频）的属性，因此您可以保存组件以及资源并为每个资源添加正常验证。

添加组件的基本视图可以是

```
= form_for(@component, :url => components_path, :method => :post) do |f|
  = fields of Component
  = f.fields_for :resource, build_resource('image') do |image|
    = fields of resource Image
  = f.fields_for :resource, build_resource('video') do |video|
    = fields of resource Video 
```

可以使用辅助方法添加图像/视频的字段

```
module ComponentsHelper
  def build_resource(klass)
    klass  = "{klass.capitalize}"
    object = eval("#{klass}.new")
    if @component.resource.class.name == klass
      object = @component.resource
    end
    return object
  end
end 
```

由于组件只能有一个相关资源（图像/视频），您需要在视图上选择资源类型（在我的情况下，它是一个下拉列表）并根据所选资源显示其字段并隐藏/删除所有其他资源字段（如果选择了图像，请使用 javascript 删除视频字段）。提交表单时，来自组件模型的方法过滤掉预期资源的所有键值对，并创建组件及其相关资源。

还

1）在提交表单时保持每个资源的字段名称唯一原因，隐藏的资源（不需要的资源）字段被提交，覆盖预期的资源字段。

2) 上述模型结构**仅对资源 attr_accessor**产生问题（在 rails 控制台上无法访问它们）。它可以解决为

```
ACCESSOR = ['accessor1', 'accessor2'] #needed accessors
has_one :component, :as => :resource
attr_accessor *ACCESSOR 
```

了解[如何实现具有 3 个固定类别的职位发布功能](https://stackoverflow.com/questions/10534270/how-to-implement-jobpost-functionality-that-has-3-fixed-categoris/12154330#12154330)

我希望这有帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-19T15:37:56.560

使用 STI，您将与多个模型类共享同一个表，因此如果您希望子类模型具有唯一字段（数据库列），那么它们需要在该公用表中表示。从您示例中的评论来看，这似乎是您想要的。

但是，您可以使用一个技巧，即在表中拥有一个字符串列，每个模型都可以使用该列来存储自定义序列化数据。为了做到这一点，这些数据元素没有被索引是可以的，因为您将无法在 SQL 中轻松地搜索它们。假设您将此字段称为`aux`。把它放在父模型中：

```
 require 'ostruct'
  serialize :aux, OpenStruct 
```

现在假设您希望在子类模型中调用字段`manager`，`experience`但其他 STI 模型都不需要此字段，您不需要根据这些属性进行搜索。所以你可以在子类模型中做到这一点：

```
# gets the value
def manager
  return self.aux.manager
end

# sets the value
def manager=(value)
  self.aux.manager = value
end

 # gets the value
def experience
  return self.aux.experience
end

# sets the value
def experience=(value)
  self.aux.experience = value
end 
```

在此示例中，单表继承仍然可以正常工作，并且您还可以获得子类模型的自定义持久属性。这为您提供了在多个模型之间共享代码和数据库资源的好处，而且还允许每个模型具有独特的属性。

# php - MVC PHP 分页

> ID：13296976
> 
> 赞同：0
> 
> 时间：2012-11-08T20:11:11.223
> 
> 标签：php, pagination

我一直在思考如何在我的个人网站上对博客文章进行分页。该站点的结构是 MVC（允许我通过浏览器对其进行内容管理）

该模型：

```
function displayBlog()
{
  global $BEAR;

  $data = array();

$stmt = $BEAR->Database->query
("SELECT id, type, published_on, height, width, title, body FROM blog_posts ORDER BY id DESC");

$i = 0;

while($row = $stmt->fetch_assoc())
{

  $data[$i]['id'] = $row['id'];
  $data[$i]['title'] = $row['title'];
  $data[$i]['content'] = $row['content'];

  $i++;
}
 return $data;
} 
```

这将从数据库中收集所需的博客信息，并将其传递给控制器​​：

```
$data = $BEAR->Blog->displayBlog();
for($i=0, $i < count($data);$i++)
{
  $id = $data[$i]['id'];
  $title = $data[$i]['title'];
  $content = $data[$i]['content'];

  $result = $title;
  $result .= $content;
}
$BEAR->Template->setData('blog', $result, FALSE); 
```

从上面的代码中，我只是使用 get data 函数在我的视图中显示博客，这很好用。但是我不知道如何对结果进行分页，如果有人可以给我任何形式的指导，那就太好了。多谢你们。

# c# - 如何在 MonoTouch 中绑定这些？

> ID：13296977
> 
> 赞同：2
> 
> 时间：2012-11-08T20:11:20.337
> 
> 标签：c#, objective-c, xamarin.ios

下面的 ObjectiveC 代码如何转换为 MonoTouch？

```
@interface PSPDFBookmarkViewController : UITableViewController <PSPDFStyleable>
- (instancetype)initWithDocument:(PSPDFDocument *)document;
@property (nonatomic, weak) id<PSPDFBookmarkViewControllerDelegate> delegate;
@property (nonatomic, assign) BOOL isInPopover;
@end 
```

*   我真的不知道该怎么处理这个`instancetype`东西（这是什么？）
*   是什么`id<PSPDFBookmarkViewControllerDelegate>`。
*   该怎么办`PSPDFStyleable`？

这就是我认为的结果：

```
[BaseType(typeof(UITableViewController)]
    interface PSPDFBookmarkViewController
    {
    void InitWithDocument(PSPDFDocument document);
    [NullAllowed]
    PSPDFBookmarkViewControllerDelegate Delegate { get; set; }
    bool IsInPopover { get; set; }
    } 
```

那么这个界面呢？

```
@interface PSPDFBookmarkViewController (SubclassingHooks)
- (void)createBarButtonItems;
@end 
```

什么是`(SubclassingHooks)`关于它的 C# 表亲是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T20:22:54.053

很多问题......这里有一些答案：

ObjectiveC`init*`选择器是 .NET 构造函数。所以：

```
- (instancetype)initWithDocument:(PSPDFDocument *)document; 
```

应该是这样的：

```
[Export ("initWithDocument:")]
IntPtr Constructor (PSPDFDocument document); 
```

并且您的其他 C# 绑定缺少它们的`[Export]`属性。例如

```
[Export ("isInPopover")]
bool IsInPopover { get; set; } 
```

其他问题：

`<PSPDFStyleable>`是一个 Objective-C 协议，它与 .NET 接口非常相似。现在，如果您不需要`PSPDFStyleable`，则不必绑定它。

> 是什么`id<PSPDFBookmarkViewControllerDelegate>`。

那是一个实现`PSPDFBookmarkViewControllerDelegate`. 您通常会将 this 绑定`PSPDFBookmarkViewControllerDelegate`为`Delegate`属性，并添加 a`WeakDelegate`以便可以使用任何`NSObject`实现*正确选择器的选项。*例如

```
[Export ("delegate", ArgumentSemantic.Assign)][NullAllowed]
NSObject WeakDelegate { get; set; }

[Wrap ("WeakDelegate")]
PSPDFBookmarkViewControllerDelegate Delegate { get; set; } 
```

您需要添加`Delegates=new string [] { "WeakDelegate" }`到您的`[BaseType]`属性。`Events=`如果您想将委托成员转换为事件，还可以添加。例如

```
[BaseType (typeof (UITableViewController), Delegates=new string [] { "WeakDelegate" }, Events=new Type [] {typeof (PSPDFBookmarkViewControllerDelegate)})] 
```

`(SubclassingHooks)`是一个 Objective-C 类别，与 .NET 扩展方法非常相似。这需要与现有生成器进行一些手动绑定。

最后确保阅读Xamarin 文档门户上提供的[绑定文档。](http://docs.xamarin.com/ios/Guides/Advanced_Topics/Binding_Objective-C_Libraries)它不是很复杂（您的示例在很少的几行中就遇到了很多案例），但是有很多数据需要消化（如果您不太了解 Objective-C，则需要消化更多数据）。

# gradle - 用gradle复制树并改变结构？

> ID：13296986
> 
> 赞同：14
> 
> 时间：2012-11-08T20:12:02.893
> 
> 标签：gradle, build, copy, rename

gradle 可以在复制时改变树的结构吗？

**原来的**

*   模组/a/src
*   模组/b/src

**想要的**

*   目标/mod-a/源
*   目标/mod-b/源
*   目标/mod-c/源

我不确定我应该在哪里创建一个闭包并覆盖复制树逻辑

我想做与 ant 的 globmapper 功能等效的 gradle

```
<property name="from.dir" location=".."/>      
<property name="to.dir" location="dbutil"/>
<copy>
    <fileset dir="${from.dir}" ... />
    <globmapper from="${from.dir}/*/db" to="${to.dir}"/> 
</copy> 
```

谢谢

彼得

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-11-09T22:25:26.933

更改文件名时，重命名似乎是一个好方法。更改路径时，您可以覆盖*eachFile*并修改目标路径。

这工作得很好。

```
 copy {
    from("${sourceDir}") {
        include 'modules/**/**'
    }
    into(destDir)
    eachFile {details ->

        // Top Level Modules
        def targetPath = rawPathToModulesPath(details.path)
        details.path = targetPath
    }
}
....
def rawPathToModulesPath(def path) {
// Standard case modules/name/src -> module-name/src
def modified=path.replaceAll('modules/([^/]+)/.*src/(java/)?(.*)', {"module-${it[1]}/src/${it[3]}"})
return modified
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-11-09T18:28:28.493

请参阅下面的示例。Gradle 4.3 没有重命名/移动方法，因此我们可以即时重命名。

发生了什么：

1.  将文件树加载到内存中。我在示例中使用了依赖项中的 zip 文件
2.  筛选项目，位于目标文件夹中
3.  所有结果项都将具有相同的前缀：如果我们从目录“A/B/C/”过滤文件，那么所有文件将类似于“A/B/C/file.txt”或“A/B/C/D” /file.txt”。例如，所有这些都将以相同的单词开头
4.  在每个文件的最后一条语句*中，*我们将通过剪切目录前缀来更改最终名称（例如，我们将剪切“A/B/C”）。
5.  **重要提示：**使用任务类型“复制”，它对增量编译进行了优化。如果以下所有项目都为真，Gradle 将不会进行文件复制：
    *   输入与以前的构建相同（对于我的情况 - 范围“nativeDependenciesScope”的所有依赖项）
    *   您的函数返回与先前构建相同的项目
    *   目标文件夹具有相同的文件哈希，与以前的构建

```
task copyNativeDependencies(type: Copy) {
    includeEmptyDirs = false
    def subfolderToUse = "win32Subfolder"

    def nativePack = configurations.nativeDependenciesScope.singleFile // result - single dependency file

    def nativeFiles = zipTree(nativePack).matching { include subfolderToUse + "/*" } // result - filtered file tree

    from nativeFiles
    into 'build/native_libs'
    eachFile {
        print(it.path)

        // we filtered this folder above, e.g. all files will start from the same folder name
        it.path = it.path.replaceFirst("$subfolderToUse/", "")
    }
}

// and don't forget to link this task for something mandatory
test.dependsOn(copyNativeDependencies)
run.dependsOn(copyNativeDependencies) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-08T20:49:56.243

以下工作，但有没有更gradle-ish的方式来做到这一点？

```
 ant.copy(todir: destDir) {
      fileset( dir: "${srcDir}/module", includes: '**/src/**')
      regexpmapper(from: '^(.*)/src/(.*)$', to: /module-\1\/src\/\2/)
    } 
```

# python - python程序的中大型便携式数据库选项

> ID：13296989
> 
> 赞同：2
> 
> 时间：2012-11-08T20:12:05.800
> 
> 标签：python, mysql, database, mysql-python

我正在创建一个简单的 python 程序，它需要搜索一个有点大的数据库（大约 40 个表，总共 600 万行左右）。

目前，我使用 MySQLdb 来查询我的本地 MySQL 数据库，然后我有一些其他 python 函数可以处理数据并返回一些统计信息和其他内容。我想与其他不想构建自己的数据库的人分享。此时，数据库仅用于查询。

我怎样才能最好地将数据库和 python 程序作为“包”共享。我是否必须放弃 SQL 方法并切换到某种文本文件数据库，或者是否有更简单的方法......也许是 sqlite？

如果答案是 sqlite，我该如何将当前的 SQL 数据库导出到 sqlite 数据库？有什么我应该知道的问题吗？

目前，我使用带有几个 WHERE 语句的简单 SELECT 采石场来定位我需要的数据。恐怕如果我切换到基于文本的数据库，我最终将不得不编写大量代码来进行这些查询。

提前感谢您的任何建议。

**编辑**

所以我用 sqlite3 数据库编写了我的小 python 程序，它运行良好。

我最终使用了一个名为 mysql2sqlite.sh 的 shell 脚本[来](https://gist.github.com/943776)将我的 MySQL 数据库转换为 sqlite。它完美无缺。

我只需要更改 2 行 python 代码。惊人的。

我的小程序在 osx、windows 和 linux（ubuntu 和 redhat）中运行，没有任何更改或麻烦。感谢您的建议！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T20:26:43.093

根据数据库的复杂性，转换数据库可以像 sql-dump 然后导入一样简单。有关策略和替代方案，请参阅此[帖子](https://stackoverflow.com/questions/3890518/convert-mysql-to-sqlite)。

# javascript - 如何调试和检查响应鼠标点击或焦点变化而变化的事物？

> ID：13296992
> 
> 赞同：4
> 
> 时间：2012-11-08T20:12:14.670
> 
> 标签：javascript, firebug, google-chrome-devtools

我目前正在玩弄一些自动完成表单字段，并且发现很难检查生成的下拉项目。一旦我单击“检查元素”按钮或尝试右键单击下拉菜单，原始的自动完成输入就会运行一个 onclick 事件（或触发焦点更改的事件）并隐藏、删除或以其他方式修改我的元素试图检查。

有没有办法使用调试器，以便我给它的鼠标点击和其他命令不会被我试图调试的脚本截获？

我目前在 Firebug 和 Chrome 的检查器上都有这种问题。我现在能想到的唯一解决方案是在适当的事件处理程序中设置一些智能断点，但如果我不知道要查找哪些事件处理程序或它们隐藏在原始代码中的什么位置，这很难做到……

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-08T20:17:38.827

您可以设置断点并在触发后进行检查，我注意到它会冻结 DOM。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T20:16:48.667

您需要使用断点。至于追踪发生的事情，Chrome 的“调用堆栈”窗口非常有用。

干杯

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-15T21:08:35.377

在 Firebug 中，您在面板中有一个`Break on next`项目。`Script`从 Firebug 1.10 开始，有一个[键盘快捷键](https://getfirebug.com/wiki/index.php/Keyboard_and_Mouse_Shortcuts#Global)： Windows 上的`Ctrl`++ （即使焦点在页面中，它也可以工作，而不是在 Firebug 中）`Alt`。`B`

您可能需要将`Script`面板集中在 Firebug 中，因为这是`Break on...`每个面板中不同的共享快捷方式。

它通常会冻结 DOM，尽管它不是 100% 可靠的。

它也不理想，因为它会在任何 JavaScript 执行时停止，并且如果在后台有一些激进的轮询或键盘事件的全局捕获，它将无济于事。不管怎样，总比没有好。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-03-08T01:03:44.757

Chrome 暂停 Javascript 的执行`F8`；它需要一些重复，但`F8`在正确的时间按下阻止了 JS 散焦元素。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-16T09:37:49.920

1.  首先打开停靠的 DevTools（由于操作系统限制，未停靠的方法将不起作用。）
2.  显示自动完成框后，右键单击它并在上下文菜单中选择“检查元素”。焦点将移至 DevTools，但仍会显示自动完成框（这对我在 Linux、树尖 Chromium、M25 上有效。您的里程可能会有所不同。）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-09T06:42:52.047

如果您在选择元素时遇到问题，您可以尝试在 Mac 上使用 ++`cmd`来选择元素，而无需右键单击它。`shift``c`

如果它的 DOM 操作问题，您可以尝试通过右键单击“元素”面板中的元素来强制输入元素的状态并将强制状态设置为焦点。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-11-08T09:11:51.873

```
/**
 * Utility to freeze actual DOM state, for example dropdown menu
 */
function easyBreak() {
    function doBreak() {
        // put breakpoint here to freeze actual dom and write to console easyBreak()
        // you have 3 seconds to get to desired state
        var a = 0;
    }

    window.setTimeout(doBreak, 3000);
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-11-05T16:21:21.913

您可以使用**DOM 断点**。

我在这里遇到了类似的情况：我想检查仅在输入具有焦点时才显示的下拉项。

在 Chrome 上，我右键单击父元素并选择`Break on`> `Subtree modifications`。
它会暂停——就像它对 JS 断点所做的那样——只要 DOM 在该父级中发生更改。然后，您可以在 DOM 冻结时检查子项。

# iphone - 解析 NSString 加载时间很长

> ID：13296993
> 
> 赞同：0
> 
> 时间：2012-11-08T20:12:15.670
> 
> 标签：iphone, objective-c, ios, parsing

我设置了一个 UILabel，它从 parse.com 获取其内容。一切正常，直到我启用飞行模式。在加载标签的视图中，加载时间很长，控制台为我提供了该代码：

```
 2012-11-08 21:07:41.179 My App[5275:907] Warning: A long-running Parse operation is being executed on the main thread. 
 Break on warnParseOperationOnMainThread() to debug.
2012-11-08 21:07:41.231 My App[5275:907] Error: Error Domain=NSURLErrorDomain Code=-1009 "Es besteht anscheinend keine Verbindung zum Internet." UserInfo=0x1e5c2f00 {NSErrorFailingURLStringKey=https://api.parse.com/2/find, NSErrorFailingURLKey=https://api.parse.com/2/find, NSLocalizedDescription=Es besteht anscheinend keine Verbindung zum Internet., NSUnderlyingError=0x1e5c1d70 "Es besteht anscheinend keine Verbindung zum Internet."} (Code: 100, Version: 1.1.14)
2012-11-08 21:07:41.232 My App[5275:907] Network connection failed. Making attempt 2 after sleeping for 1.287663 seconds.
2012-11-08 21:07:42.582 My App[5275:907] Error: Error Domain=NSURLErrorDomain Code=-1009 "Es besteht anscheinend keine Verbindung zum Internet." UserInfo=0x1e5c6f00 {NSErrorFailingURLStringKey=https://api.parse.com/2/find, NSErrorFailingURLKey=https://api.parse.com/2/find, NSLocalizedDescription=Es besteht anscheinend keine Verbindung zum Internet., NSUnderlyingError=0x1e5c6f40 "Es besteht anscheinend keine Verbindung zum Internet."} (Code: 100, Version: 1.1.14)
2012-11-08 21:07:42.583 My App[5275:907] Network connection failed. Making attempt 3 after sleeping for 2.575326 seconds.
2012-11-08 21:07:45.215 My App[5275:907] Error: Error Domain=NSURLErrorDomain Code=-1009 "Es besteht anscheinend keine Verbindung zum Internet." UserInfo=0x1f88bd90 {NSErrorFailingURLStringKey=https://api.parse.com/2/find, NSErrorFailingURLKey=https://api.parse.com/2/find, NSLocalizedDescription=Es besteht anscheinend keine Verbindung zum Internet., NSUnderlyingError=0x1f88c840 "Es besteht anscheinend keine Verbindung zum Internet."} (Code: 100, Version: 1.1.14)
2012-11-08 21:07:45.216 My App[5275:907] Network connection failed. Making attempt 4 after sleeping for 5.150652 seconds.
2012-11-08 21:07:50.383 My App[5275:907] Error: Error Domain=NSURLErrorDomain Code=-1009 "Es besteht anscheinend keine Verbindung zum Internet." UserInfo=0x1f88c310 {NSErrorFailingURLStringKey=https://api.parse.com/2/find, NSErrorFailingURLKey=https://api.parse.com/2/find, NSLocalizedDescription=Es besteht anscheinend keine Verbindung zum Internet., NSUnderlyingError=0x1f88b4a0 "Es besteht anscheinend keine Verbindung zum Internet."} (Code: 100, Version: 1.1.14)
2012-11-08 21:07:50.384 My App[5275:907] Network connection failed. Making attempt 5 after sleeping for 10.301305 seconds.
2012-11-08 21:08:00.743 My App[5275:907] Error: Error Domain=NSURLErrorDomain Code=-1009 "Es besteht anscheinend keine Verbindung zum Internet." UserInfo=0x1e5c8160 {NSErrorFailingURLStringKey=https://api.parse.com/2/find, NSErrorFailingURLKey=https://api.parse.com/2/find, NSLocalizedDescription=Es besteht anscheinend keine Verbindung zum Internet., NSUnderlyingError=0x1f88e450 "Es besteht anscheinend keine Verbindung zum Internet."} (Code: 100, Version: 1.1.14) 
```

“Es besteht anscheinend keine Verbindung zum Internet”表示没有连接到互联网。

有没有办法解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T20:45:00.703

不要在主线程上进行网络 - 永远:)

**dispatch_async**一个块并且只在主线程上设置标签的文本。

```
- (void)doLongOperation:(id)someParam withCompletionHandler:(void (^)(NSString *newLabelString))completionHandler {
    dispatch_async(dispatch_get_global_queue(0,0), ^{
        NSString *labelString = /*do call to parse OR any other long running operation*/

        if ( completionHandler ) {
            dispatch_async(dispatch_get_main_queue(), ^{
            completionHandler(labelString); 
        });
    });
}

// now in your main app call it
[self doLongOperation:nil /*we dont need anything here*/ withCompletionHandler:^(NSString *newLabelString) {
    self.label.text = newLabelString;
}]; 
```

# c# - 实体框架迁移重命名表和列

> ID：13296996
> 
> 赞同：144
> 
> 时间：2012-11-08T20:12:24.567
> 
> 标签：c#, sql-server, entity-framework, entity-framework-5, entity-framework-migrations

我重命名了一对实体及其导航属性，并在 EF 5 中生成了一个新的迁移。与 EF 迁移中的重命名一样，默认情况下它会删除对象并重新创建它们。这不是我想要的，所以我几乎不得不从头开始构建迁移文件。

```
 public override void Up()
    {
        DropForeignKey("dbo.ReportSectionGroups", "Report_Id", "dbo.Reports");
        DropForeignKey("dbo.ReportSections", "Group_Id", "dbo.ReportSectionGroups");
        DropForeignKey("dbo.Editables", "Section_Id", "dbo.ReportSections");
        DropIndex("dbo.ReportSectionGroups", new[] { "Report_Id" });
        DropIndex("dbo.ReportSections", new[] { "Group_Id" });
        DropIndex("dbo.Editables", new[] { "Section_Id" });

        RenameTable("dbo.ReportSections", "dbo.ReportPages");
        RenameTable("dbo.ReportSectionGroups", "dbo.ReportSections");
        RenameColumn("dbo.ReportPages", "Group_Id", "Section_Id");

        AddForeignKey("dbo.ReportSections", "Report_Id", "dbo.Reports", "Id");
        AddForeignKey("dbo.ReportPages", "Section_Id", "dbo.ReportSections", "Id");
        AddForeignKey("dbo.Editables", "Page_Id", "dbo.ReportPages", "Id");
        CreateIndex("dbo.ReportSections", "Report_Id");
        CreateIndex("dbo.ReportPages", "Section_Id");
        CreateIndex("dbo.Editables", "Page_Id");
    }

    public override void Down()
    {
        DropIndex("dbo.Editables", "Page_Id");
        DropIndex("dbo.ReportPages", "Section_Id");
        DropIndex("dbo.ReportSections", "Report_Id");
        DropForeignKey("dbo.Editables", "Page_Id", "dbo.ReportPages");
        DropForeignKey("dbo.ReportPages", "Section_Id", "dbo.ReportSections");
        DropForeignKey("dbo.ReportSections", "Report_Id", "dbo.Reports");

        RenameColumn("dbo.ReportPages", "Section_Id", "Group_Id");
        RenameTable("dbo.ReportSections", "dbo.ReportSectionGroups");
        RenameTable("dbo.ReportPages", "dbo.ReportSections");

        CreateIndex("dbo.Editables", "Section_Id");
        CreateIndex("dbo.ReportSections", "Group_Id");
        CreateIndex("dbo.ReportSectionGroups", "Report_Id");
        AddForeignKey("dbo.Editables", "Section_Id", "dbo.ReportSections", "Id");
        AddForeignKey("dbo.ReportSections", "Group_Id", "dbo.ReportSectionGroups", "Id");
        AddForeignKey("dbo.ReportSectionGroups", "Report_Id", "dbo.Reports", "Id");
    } 
```

我要做的就是重命名`dbo.ReportSections`为`dbo.ReportPages`，然后重命名`dbo.ReportSectionGroups`为`dbo.ReportSections`. 然后我需要将外键列重命名为`dbo.ReportPages`from `Group_Id`to `Section_Id`。

我删除将表链接在一起的外键和索引，然后重命名表和外键列，然后再次添加索引和外键。我以为这会起作用，但我收到了一个 SQL 错误。

> 消息 15248，级别 11，状态 1，过程 sp_rename，第 215 行参数 @objname 不明确或声明的 @objtype (COLUMN) 错误。消息 4902，级别 16，状态 1，第 10 行找不到对象“dbo.ReportSections”，因为它不存在或您没有权限。

我很难弄清楚这里出了什么问题。任何见解都会非常有帮助。

* * *

## 回答 #1

> 赞同：173
> 
> 时间：2012-11-08T20:27:43.730

没关系。我让这种方式变得比它真正需要的更复杂。

这就是我所需要的。重命名方法只是生成对[sp_rename](https://docs.microsoft.com/en-us/sql/relational-databases/system-stored-procedures/sp-rename-transact-sql)系统存储过程的调用，我猜这会处理所有事情，包括具有新列名的外键。

```
public override void Up()
{
    RenameTable("ReportSections", "ReportPages");
    RenameTable("ReportSectionGroups", "ReportSections");
    RenameColumn("ReportPages", "Group_Id", "Section_Id");
}

public override void Down()
{
    RenameColumn("ReportPages", "Section_Id", "Group_Id");
    RenameTable("ReportSections", "ReportSectionGroups");
    RenameTable("ReportPages", "ReportSections");
} 
```

* * *

## 回答 #2

> 赞同：61
> 
> 时间：2016-07-23T07:40:19.720

如果您不喜欢手动编写/更改 Migration 类中所需的代码，您可以按照两步方法自动`RenameColumn`生成所需的代码：

**第一步**使用`ColumnAttribute`引入新的列名，然后添加迁移（例如`Add-Migration ColumnChanged`）

```
public class ReportPages
{
    [Column("Section_Id")]                 //Section_Id
    public int Group_Id{get;set}
} 
```

**第二步**更改属性名称并再次应用于`Add-Migration ColumnChanged -force`包管理器控制台中的相同迁移（例如）

```
public class ReportPages
{
    [Column("Section_Id")]                 //Section_Id
    public int Section_Id{get;set}
} 
```

如果您查看 Migration 类，您可以看到自动生成的代码是`RenameColumn`.

* * *

## 回答 #3

> 赞同：39
> 
> 时间：2018-06-16T08:16:16.047

在 EF Core 中，我使用以下语句重命名表和列：

至于重命名表：

```
 protected override void Up(MigrationBuilder migrationBuilder)
    {
        migrationBuilder.RenameTable(
            name: "OldTableName",
            schema: "dbo",
            newName: "NewTableName",
            newSchema: "dbo");
    }

    protected override void Down(MigrationBuilder migrationBuilder)
    {
        migrationBuilder.RenameTable(
            name: "NewTableName",
            schema: "dbo",
            newName: "OldTableName",
            newSchema: "dbo");
    } 
```

至于重命名列：

```
 protected override void Up(MigrationBuilder migrationBuilder)
    {
        migrationBuilder.RenameColumn(
            name: "OldColumnName",
            table: "TableName",
            newName: "NewColumnName",
            schema: "dbo");
    }

    protected override void Down(MigrationBuilder migrationBuilder)
    {
        migrationBuilder.RenameColumn(
            name: "NewColumnName",
            table: "TableName",
            newName: "OldColumnName",
            schema: "dbo");
    } 
```

* * *

## 回答 #4

> 赞同：27
> 
> 时间：2017-05-31T02:16:51.587

要扩展 Hossein Narimani Rad 的答案，您可以分别使用 System.ComponentModel.DataAnnotations.Schema.TableAttribute 和 System.ComponentModel.DataAnnotations.Schema.ColumnAttribute 重命名表和列。

这有几个好处：

1.  这不仅会自动创建名称迁移，而且
2.  它还将很好地删除任何外键并根据新的表和列名重新创建它们，为外键和容器提供正确的名称。
3.  所有这些都不会丢失任何表数据

例如，添加`[Table("Staffs")]`：

```
[Table("Staffs")]
public class AccountUser
{
    public long Id { get; set; }

    public long AccountId { get; set; }

    public string ApplicationUserId { get; set; }

    public virtual Account Account { get; set; }

    public virtual ApplicationUser User { get; set; }
} 
```

将生成迁移：

```
 protected override void Up(MigrationBuilder migrationBuilder)
    {
        migrationBuilder.DropForeignKey(
            name: "FK_AccountUsers_Accounts_AccountId",
            table: "AccountUsers");

        migrationBuilder.DropForeignKey(
            name: "FK_AccountUsers_AspNetUsers_ApplicationUserId",
            table: "AccountUsers");

        migrationBuilder.DropPrimaryKey(
            name: "PK_AccountUsers",
            table: "AccountUsers");

        migrationBuilder.RenameTable(
            name: "AccountUsers",
            newName: "Staffs");

        migrationBuilder.RenameIndex(
            name: "IX_AccountUsers_ApplicationUserId",
            table: "Staffs",
            newName: "IX_Staffs_ApplicationUserId");

        migrationBuilder.RenameIndex(
            name: "IX_AccountUsers_AccountId",
            table: "Staffs",
            newName: "IX_Staffs_AccountId");

        migrationBuilder.AddPrimaryKey(
            name: "PK_Staffs",
            table: "Staffs",
            column: "Id");

        migrationBuilder.AddForeignKey(
            name: "FK_Staffs_Accounts_AccountId",
            table: "Staffs",
            column: "AccountId",
            principalTable: "Accounts",
            principalColumn: "Id",
            onDelete: ReferentialAction.Cascade);

        migrationBuilder.AddForeignKey(
            name: "FK_Staffs_AspNetUsers_ApplicationUserId",
            table: "Staffs",
            column: "ApplicationUserId",
            principalTable: "AspNetUsers",
            principalColumn: "Id",
            onDelete: ReferentialAction.Restrict);
    }

    protected override void Down(MigrationBuilder migrationBuilder)
    {
        migrationBuilder.DropForeignKey(
            name: "FK_Staffs_Accounts_AccountId",
            table: "Staffs");

        migrationBuilder.DropForeignKey(
            name: "FK_Staffs_AspNetUsers_ApplicationUserId",
            table: "Staffs");

        migrationBuilder.DropPrimaryKey(
            name: "PK_Staffs",
            table: "Staffs");

        migrationBuilder.RenameTable(
            name: "Staffs",
            newName: "AccountUsers");

        migrationBuilder.RenameIndex(
            name: "IX_Staffs_ApplicationUserId",
            table: "AccountUsers",
            newName: "IX_AccountUsers_ApplicationUserId");

        migrationBuilder.RenameIndex(
            name: "IX_Staffs_AccountId",
            table: "AccountUsers",
            newName: "IX_AccountUsers_AccountId");

        migrationBuilder.AddPrimaryKey(
            name: "PK_AccountUsers",
            table: "AccountUsers",
            column: "Id");

        migrationBuilder.AddForeignKey(
            name: "FK_AccountUsers_Accounts_AccountId",
            table: "AccountUsers",
            column: "AccountId",
            principalTable: "Accounts",
            principalColumn: "Id",
            onDelete: ReferentialAction.Cascade);

        migrationBuilder.AddForeignKey(
            name: "FK_AccountUsers_AspNetUsers_ApplicationUserId",
            table: "AccountUsers",
            column: "ApplicationUserId",
            principalTable: "AspNetUsers",
            principalColumn: "Id",
            onDelete: ReferentialAction.Restrict);
    } 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-12-21T11:42:51.947

我刚刚在 EF6 中尝试了相同的操作（代码优先实体重命名）。我只是重命名了该类并使用包管理器控制台添加了一个迁移，瞧，使用 RenameTable(...) 的迁移是自动为我生成的。我必须承认，我确保对实体的唯一更改是重命名它，因此没有新列或重命名列，所以我无法确定这是 EF6 的事情还是只是 EF （总是）能够检测到如此简单的迁移。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2018-05-07T08:26:25.383

表名和列名可以指定为 的映射的一部分`DbContext`。那么在迁移中就不需要这样做了。

```
public class MyContext : DbContext
{
    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        modelBuilder.Entity<Restaurant>()
            .HasMany(p => p.Cuisines)
            .WithMany(r => r.Restaurants)
            .Map(mc =>
            {
                mc.MapLeftKey("RestaurantId");
                mc.MapRightKey("CuisineId");
                mc.ToTable("RestaurantCuisines");
            });
     }
} 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2019-09-08T10:33:10.810

在 ef core 中，您可以更改添加迁移后创建的迁移。然后做更新数据库。下面给出了一个示例：

```
protected override void Up(MigrationBuilder migrationBuilder)
{
    migrationBuilder.RenameColumn(name: "Type", table: "Users", newName: "Discriminator", schema: "dbo");
}

protected override void Down(MigrationBuilder migrationBuilder)
{            
    migrationBuilder.RenameColumn(name: "Discriminator", table: "Users", newName: "Type", schema: "dbo");
} 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2020-10-15T11:48:55.860

对于 EF Core`migrationBuilder.RenameColumn`通常可以正常工作，但有时您也必须处理索引。

```
migrationBuilder.RenameColumn(name: "Identifier", table: "Questions", newName: "ChangedIdentifier", schema: "dbo"); 
```

更新数据库时的示例错误消息：

> Microsoft.Data.SqlClient.SqlException (0x80131904)：索引“IX_Questions_Identifier”依赖于“标识符”列。
> 
> 索引“IX_Questions_Identifier”取决于“标识符”列。
> 
> 重命名列标识符失败，因为一个或多个对象访问此列。

在这种情况下，您必须像这样进行重命名：

```
migrationBuilder.DropIndex(
    name: "IX_Questions_Identifier",
    table: "Questions");

migrationBuilder.RenameColumn(name: "Identifier", table: "Questions", newName: "ChangedIdentifier", schema: "dbo");

migrationBuilder.CreateIndex(
    name: "IX_Questions_ChangedIdentifier",
    table: "Questions",
    column: "ChangedIdentifier",
    unique: true,
    filter: "[ChangedIdentifier] IS NOT NULL"); 
```

# javascript - JQuery 将相同的事件附加到 2 个对象

> ID：13296997
> 
> 赞同：2
> 
> 时间：2012-11-08T20:12:25.163
> 
> 标签：javascript, jquery, html

我有几个对象要附加相同的事件处理程序。到目前为止，我正在这样做：

```
$(object).bind(event, function(event) {
    // Code
});
$(object2).bind(event, function(event) {
    // Same code
});
$(object3).bind(event, function(event) {
    // Same code again
}); 
```

我知道这种方法没有问题（或者是否存在），但我想知道是否有一种速记方法可以将同一事件的同一处理程序绑定到几个不同的对象。

编辑：我的意思是，`object1.bind(stuff); object2.bind(stuff); object3.bind(stuff); etc`我想要的不是写，而是`allObjects.bind(stuff)`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T20:13:40.537

您可以使用[.add](http://api.jquery.com/add/)方法一次选择它们：

```
$(object1).add(object2).add(object3).bind(event,handler); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T20:13:39.463

```
var myFunc = function(event){
  // do something
};

$(object).bind(event, myFunc);
$(object2).bind(event, myFunc);
$(object3).bind(event, myFunc);` 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-08T20:15:21.877

How about,

```
$('selector1, selector2, selector3').bind(event, function(event) {
    // Same code again
}); 
```

**Note:** Assuming the `object1` is selector string.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-08T20:14:30.817

Just define an variable containing the function an then bass the object to each bind. Like this:

```
var fn = function(event) {};
$(object).bind(fn);
$(object2).bind(fn);
$(object3).bind(fn); 
```

Apendix: you can store your objecs in an array an iterate over them:

```
$([object, object2, object3]).each(function(){
    this.bind(fn);
}); 
```

However I don't think this is a good coding style....