# StackOverflow 问答 15682000-15682999

# c++ - QTableWidget::setItem 上的 Qt4 SegmentationFault

> ID：15682001
> 
> 赞同：0
> 
> 时间：2013-03-28T12:35:58.317
> 
> 标签：c++, qt4, qtablewidget

我在这里有一个非常奇怪的问题。我的程序是`SegmentationFault`当我将项目设置为表格时。这是我的代码。

标题：

```
class Program : public QMainWindow {
    Q_OBJECT
    public:
        Program();

    private:
        QTableWidget *table;

    private slots:
        void newSlot();
} 
```

cp文件：

```
Program::Program() : QMainWindow() {
    ....
    ....
    ....
    ....
    table = new QTableWidget();
    table->setRowCount( 0 );
    table->setColumnCount( 2 );
    ....
    ....
    ....
}

void Program::newSlot() {
    ....
    ....
    ....
    table->insertRow( table->rowCount() );
    table->setItem( table->rowCount() - 1, 0, new QTableWidgetItem( "something" ) );
    table->setItem( table->rowCount() - 1, 1, new QTableWidgetItem( "something" ) );
    ....
    ....
    ....
} 
```

问题是当程序到达`table->setItem( ... )`in 时`newSlot()`，我得到一个分段错误。我是不是在某个地方犯了一些愚蠢的错误而导致了这个混乱？'因为我在其他地方使用了完全相同的代码，没有任何问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T12:59:04.117

您必须指定列数：

```
table->setColumnCount( 2 ); 
```

去做

```
table->setItem( table->rowCount() - 1, 0, new QTableWidgetItem( "something" ) );
... 
```

# image - 可以在加载的 SWF 中平滑图像吗？

> ID：15682002
> 
> 赞同：1
> 
> 时间：2013-03-28T12:36:00.460
> 
> 标签：image, actionscript-3, flash, smoothing

我正在尝试将 SWF 加载到 AS3/Haxe 中的另一个中。加载的 SWF 包含一些图像 - 但仅在某些`Shape.graphics`元素上。（像`graphics.beginBitmapFill();`...）这个图像没有平滑，锯齿状。在运行时无论如何都可以平滑这些图像吗？任何有兴趣的黑客！:)

提前致谢！汤姆

**更新：**对不起，但我忘了提及，我正在使用[AVM2Loader](http://code.google.com/p/flexpaper/source/browse/trunk/FlexPaper/src/com/devaldi/streaming/AVM2Loader.as)将更多的 AS2-SWF (AVM1) 加载到一个 AS3-SWF (AVM2) 中，这会破解加载的字节，并将 AVM1 SWF 转换为 AVM2 - 它非常有效好。:)

因此，在这些 SWF 中，我需要找到图像/位图，但只找到了具有“图像”`Shapes`的`graphics`元素。如果我清除它`graphics`，那么所有图像都消失了，所以我认为，图像在一些`graphics.beginBitmapFill(...);`，没有平滑。如果可能的话，我想接触它们，并在运行时打开平滑。（对不起，如果我第一次不够清楚。）

编辑（2014 年 1 月 23 日）：我找到了解决方案。它速度不快，需要 Flash Player 11.6。每个`MovieClip`图形属性都有一个新`readGraphicsData`函数，它给出所有图形命令 ( `Vector IGraphicsData`) 来绘制整个 MC。并在这些命令中进行迭代，如果我将每个`bitmapFill`命令`smooth`参数都更改为 true，然后重新绘制 MC，它将变得平滑且美观。就是这样。不快，但工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-23T09:10:56.823

我找到了解决方案。它速度不快，需要 Flash Player 11.6。每个`MovieClip`图形属性都有一个新`readGraphicsData`函数，它给出所有图形命令 ( `Vector IGraphicsData`) 来绘制整个 MC。并在这些命令中进行迭代，如果我将每个`bitmapFill`命令`smooth`参数都更改为 true，然后重新绘制 MC，它将变得平滑且美观。就是这样。不快，但工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T12:39:59.787

```
function onLoad(event):Void
{
   pic.forceSmoothing  = true;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T16:12:50.267

平滑是默认关闭[的位图属性。](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/Bitmap.html#smoothing)

```
var image = new Bitmap(bitmapData);
image.smoothing = true; 
```

通常，在外部加载时，您的 bitmapData 将位于 loader.content.bitmapData 中，但是否存储它取决于您。

* * *

**更新：**

如果您想在不了解 SWF 结构的情况下平滑加载的 SWF 中的所有图像，则必须递归地挖掘该 SWF 的层次结构，并根据对象是否为位图，打开平滑。

```
function recursivelySmooth(obj):void {
    for (var i:int = 0; obj.getChildAt(i); i++) {
        var item:* = obj.getChildAt(i);
        if (item is Bitmap) {
            item.smoothing = true;
        } else if (item.hasOwnProperty("numChildren") == true) {
            recursivelySmooth(item);
        }
    }
} 
```

这是徒手写的，因此您可能必须仔细检查所有内容是否正确，但这是基本思想。只需在您的 swf 上调用 recursivelySmooth()，它就会挖掘所有可以具有子元素的对象并平滑它们。

# c++ - 运行 OpenCv 代码时出现系统错误“程序无法启动，因为缺少 opencv_core244.dll”

> ID：15682004
> 
> 赞同：1
> 
> 时间：2013-03-28T12:36:01.097
> 
> 标签：c++, opencv

当我运行我的代码时，发生了这个错误： [![一只忙碌的猫](../Images/94a409582410f39cdfa4fb71932712ac.png)](https://i.stack.imgur.com/VHZcz.jpg)

我的代码是：

```
#include "cv.h"
#include "highgui.h"

using namespace cv;

int main(int, char**)
{
    VideoCapture cap(0);
    if(!cap.isOpened()) return -1;

    Mat frame, edges;
    namedWindow("edges",1);
    for(;;)
    {
        cap >> frame;
        cvtColor(frame, edges, CV_BGR2GRAY);
        GaussianBlur(edges, edges, Size(7,7), 1.5, 1.5);
        Canny(edges, edges, 0, 30, 3);
        imshow("edges", edges);
        if(waitKey(30) >= 0) break;
    }
    return 0;
} 
```

我检查了opencv bin和dll，但这个dll存在

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T17:31:41.050

将相关的 opencvcore_244.dll 从您的 openCV 安装复制到 %systemroot%\system32（如果 DLL 或您的程序是 64 位，则复制到 %systemroot%\sysWOW64）。

# ruby - 如何在运行时在 ruby 中创建二维数组并存储值

> ID：15682005
> 
> 赞同：1
> 
> 时间：2013-03-28T12:36:02.423
> 
> 标签：ruby, arrays

我使用以下代码创建了二维数组。但我不能在数组中存储值。数组的行和列动态增长。之前无法预测。

```
arr = Array.new {Array.new} 
```

并且不能做这种事情......

```
arr[0][0] = "Ruby" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T12:55:55.847

您可以在标准数组上创建一个抽象，就像这样

```
class MyArray < Array
    def [](idx)
        self.at(idx) ? self.at(idx) : self[idx] = []
    end
end 
```

或者，您可以使用`default_proc`在指定索引处创建新数组的 Hash。或键为 [row, column] 的哈希。这将是大型数据集的最佳选择，因为您的操作将在 O(1) 时间内完成。

# c# - FocusedRowChanged

> ID：15682007
> 
> 赞同：0
> 
> 时间：2013-03-28T12:36:14.367
> 
> 标签：c#

我使用 FocusedRowChanged 事件从另一个表单传递数据。

```
 private void gridView7_FocusedRowChanged(object sender, FocusedRowChangedEventArgs e)
    {
        documents j = (documents)gridView7.GetRow(e.FocusedRowHandle);
        frmDocumentum doc = new frmDocumentum(Convert.ToInt32(j.document_id));
        doc.Show(); 
    } 
```

我的问题是这个函数总是在应用程序启动时运行。我怎样才能防止它每次都运行该功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T12:41:33.873

如果您只想运行一次，请使用布尔变量：

```
bool bStartedOnce=false;

{
     if(!bStartedOnce)
     {
         ...
         bStartedOnce=true;
     }
} 
```

# php - php页面中的客户端验证不起作用

> ID：15682008
> 
> 赞同：0
> 
> 时间：2013-03-28T12:36:16.273
> 
> 标签：php, javascript, html

我有以下代码： //head 部分

```
<script type="text/javascript">
function check_form()
{
var id = document.forms[0].txtbid.value;
var bname = document.forms[0].txtbtitle.value;
if (id.length==0)
{
    alert("Please enter a valid Book ID.");
    return false;
}
if (id.length>8)
{
    alert("Book ID cannot exceed 8 digit.");
    return false;
}
if (bname.length==0)
{
    alert("Please enter the Book Title.");
    return false;
}
return true;
} 
```

//正文部分：

```
<form action="addnewbook.php" method="post" onsubmit="return check_form()">
<table border="0" cellspacing="0" cellpadding="5" width="400px"> 
<tr> <td> Book ID </td> <td> <input type="text" name="txtbid" size="30px"> </td> </tr>
<tr> <td> Book Title </td> <td> <input type="text" name="txtbtitle" size="30px"></td>     </tr>
<tr> <td> <input type="reset" value="Clear">
<input type="submit" name="add" value="Add Book"> </td></tr>
</table>
</form> 
```

但是当我单击提交按钮时，会打开 addnewbook.php 而不进行任何客户端验证。之前的某个时候，同一段代码运行良好。我尝试使用“this”关键字对其进行修改，但没有成功。

所以我再次编写了之前的代码，但它没有工作。我重新启动系统认为必须清除缓存。[只是尝试] 但它仍然无法正常工作。我的语法错了吗？？

伙计们，我向您发送了简化的代码，它工作正常，完整的代码如下，这不起作用：

```
<html>
<head>
<link rel="stylesheet" type="text/css" href="../style.css" />
<title>Library Manager | Major Project 2013</title>
<script type="text/javascript">
function check_form()
{
var id = document.forms[0].txtbid.value;
var bname = document.forms[0].txtbtitle.value;
var bauthor = document.forms[0].txtbauthor.value;
var bpub = document.forms[0].txtbpublication.value;
var bedition = document.forms[0].txtbedition.value;
var byear = document.forms[0].txtbyear.value;
var bpages = document.forms[0].check_form.txtbpages.value;
if (id.length==0)
{
alert("Please enter a valid Book ID.");
return false;
}
if (id.length>8)
{
alert("Book ID cannot exceed 8 digit.");
return false;
}
if (bname.length==0)
{
alert("Please enter the Book Title.");
return false;
}
return true;
}
</script>

</head>
<body>
<div id="container">
<?php include 'books_header.php'; ?>
<div id="leftmenu">
<div id="leftmenu_top"></div>
<?php include "books_link.php" ?>
<div id="leftmenu_bottom"></div>
</div>
<div id="content">
<div id="content_top"></div>
<div id="content_main">
<h2> Add New: </h2> Option marked with * are compulsary.
<p>&nbsp;</p>
<form action="addnewbook.php" method="post" onsubmit="javascript:return check_form()">
<table border="0" cellspacing="0" cellpadding="5" width="400px"> 
<tr> <td> Book ID <font id="error"> * </font> </td> <td> <input type="text" name="txtbid" size="30px"> </td> </tr>
<tr> <td> Book Title <font id="error"> * </font></td> <td> <input type="text" name="txtbtitle" size="30px"> </td> </tr>
<tr> <td> Book Author <font id="error"> * </font></td> <td> <input type="text" name="txtbauthor" size="30px"> </td></tr>
<tr> <td> Book Publication </td> <td> <input type="text" name="txtbpublication" size="30px"> </td></tr>
<tr> <td> Edition </td> <td> <input type="text" name="txtbedition" size="30px"> </td></tr>
<tr> <td> Published Year <font id="error"> * </font></td> <td> <input type="text" name="txtbyear" size="30px"> </td></tr>
<tr> <td> Total Pages <font id="error"> * </font></td> <td> <input type="text" name="txtbpages" size="30px"> </td></tr>
<tr> <td> Book Category </td> <td> 
<!-- <input type="text" name="txtbcategory" size="30px"> -->
<select name="txtbcategory"> 
<?php                   
include("../connect.php");    
$query = mysql_query("SELECT * FROM categories");   
while ($row = mysql_fetch_array($query)) {
print "<option value=".$row{'Category'}.">".$row{'Category'}."</option>";
}
mysql_close($dbhandle);
?>                      
</select> 

</td></tr>
<tr> <td> Remark </td> <td> <textarea rows="4" cols="24" name="txtbremark"> </textarea>   </td></tr>
<tr><td>  </td>
<td> <input type="reset" value="Clear">
<input type="submit" name="add" value="Add Book"> </td></tr>
</table>
</form>
<p>&nbsp;</p>
</div>
<div id="content_bottom"></div>
<?php include '../footer.php'; ?>
</div>
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T13:05:15.993

您的代码在我的系统上运行良好：

```
<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title> - jsFiddle demo</title>

  <style type='text/css'>

  </style>

<script type='text/javascript'>//<![CDATA[ 
function check_form()
{
var id = document.forms[0].txtbid.value;
var bname = document.forms[0].txtbtitle.value;
if (id.length==0)
{
    alert("Please enter a valid Book ID.");
    return false;
}
if (id.length>8)
{
    alert("Book ID cannot exceed 8 digit.");
    return false;
}
if (bname.length==0)
{
    alert("Please enter the Book Title.");
    return false;
}
return true;
}
//]]>  

</script>

</head>
<body>
  <form action="addnewbook.php" method="post" onsubmit="return check_form()">
<table border="0" cellspacing="0" cellpadding="5" width="400px"> 
<tr> <td> Book ID </td> <td> <input type="text" name="txtbid" size="30px"> </td> </tr>
<tr> <td> Book Title </td> <td> <input type="text" name="txtbtitle" size="30px"></td>     </tr>
<tr> <td> <input type="reset" value="Clear">
<input type="submit" name="add" value="Add Book"> </td></tr>
</table>
</form>

</body>

</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T12:44:18.603

尝试这个：

```
<form action="addnewbook.php" method="post" onsubmit="javascript:return check_form()"> 
```

在表格中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T12:47:17.603

你错过了一个 ; 尝试这个：

```
<form action="addnewbook.php" method="post" onsubmit="return check_form();"> 
```

# c++ - “访问冲突读取位置 0x0000000c”错误

> ID：15682009
> 
> 赞同：2
> 
> 时间：2013-03-28T12:36:17.143
> 
> 标签：c++

代码片段：

- 将实例插入对象管理器

```
Object* o;
for(int i=0; i<10; i++) 
{
    o = new Tile(32*i, 0);
    o->ID = i+2;
    o_manager.Create(i+2,o);
}
o = new Player(50.,50.);
o->ID = 1;
o_manager.Create(1,o); 
```

- 将管理器中的实例插入四叉树

```
CollisionDetector = new QuadTree(0, bounds);
for(std::map<unsigned int, Object*>::iterator it = Instances.begin(); it !=  Instances.end(); it++)
{
  std::cout << it->second->COL << std::endl;
  if(it->second->COL) //probable place of error
  {
     std::cout << "Object (" << it->first << ")... ";
     CollisionDetector->insert(it->second);
  }
  std::cout << "inserted into QuadTree" << std::endl;
} 
```

我有一个问题，原因对我来说完全未知。我有一个对象管理器类，我在其中放置了 11 个实例（放入地图容器中）。然后每一步它都会将带有冲突标志的实例传递给四叉树列表。

执行后我收到一个错误：**“访问冲突读取位置 0x0000000c”**。

根据我从 stdout 得到的信息，**将第 11 个实例插入四叉树时出现错误（stdout 打印标志值，但不打印“对象（ID）...”）。当我将实例数量减少到 10 个或更少时，一切正常**。

我会很感激任何建议，因为我不知道在哪里可以找到解决方案。对不起我的英语，我不是母语人士。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T12:41:51.267

“我有一个对象管理器类，我在其中放置了 11 个实例（到地图容器中）。”

但这只是 10 个实例：

```
for(int i=0; i<10; i++) 
```

如果这不能解决您的问题，您应该发布更多代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T12:41:52.573

您遇到的问题肯定是一个为空的指针。这`0x0000000c`是相对于对象起始地址的成员地址。（可能`COL`，如果你给我们标题`Object`）

确保您添加到地图的元素不为空。

# continuous-integration - 将 Octopack nuget 版本号更改为 teamcity 的内部版本号

> ID：15682012
> 
> 赞同：3
> 
> 时间：2013-03-28T12:36:28.110
> 
> 标签：continuous-integration, teamcity, nuget, teamcity-7.0, octopus-deploy

我使用 team-city 创建了一个 asp.net mvc 网站的 Octopack nuget 包。我还添加了构建参数，即包版本号以使用团队城市的构建号`%build.number%`，而不是 AssemblyInfo.cs 中的默认值。但是，无论我设置的构建参数如何，我的包号仍然显示为 1.0.0.0。

我曾尝试在 AssemblyInfo.cs 中使用 .* 来自动生成版本号，但我想使用我定义的 team-city 的内部版本号。

还有什么我想念的吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-28T14:48:52.773

Paul Stovell 创建了一个 TeamCity 插件。你可以在[这里](http://octopusdeploy.com/documentation/integration/teamcity)阅读。

安装完成后，您应该将构建步骤配置为如下所示：

![在此处输入图像描述](../Images/a1c9e777eca225362cfec0a7ba3a0155.png)

# arrays - 高效的并行（向量）矩阵时间 matlab

> ID：15682016
> 
> 赞同：0
> 
> 时间：2013-03-28T12:36:50.017
> 
> 标签：arrays, matlab

有谁知道如何在matlab中进行数组矩阵乘法？即我有两个 3 维数组，由前 2 维中的矩阵集组成，我想将第一个数组中的每个矩阵与第二个数组中的对应矩阵相乘。所以，即如果

```
A=randn(3,3);
B=cat(3,A,A); 
```

我想要 [[operation]] 这样

```
B[[operation]]B = cat(3,A*A, A*A) 
```

以有效的向量形式完成。

提前谢谢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T12:41:44.297

我之前使用过 Mathworks FileExchange 中的[MULTIPROD](http://www.mathworks.co.uk/matlabcentral/fileexchange/8773-multiple-matrix-multiplications-with-array-expansion-enabled)进行 ND 数组乘法。它基本上是`bsxfun`对 ND 阵列的扩展，并且工作得非常好（而且**速度很快**）——尽管界面有点麻烦。

# shell - 获取用于启动脚本的命令

> ID：15682021
> 
> 赞同：2
> 
> 时间：2013-03-28T12:37:01.033
> 
> 标签：shell, get, command

如何获取以前用于启动 shell 脚本的命令？

例如：

```
nohup /script_name.sh & 
```

在脚本本身内部，如何检查“nohup”是否已被使用？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T13:22:31.073

您想在脚本中使用 $_ 参数。

示例：shell.sh

```
#!/bin/bash
echo $_;

user@server [~]# sh shell.sh
/usr/bin/sh
user@server [~]# 
```

此外：

如果您想摆脱该完整路径 - /usr/bin/sh - 使用 basename 命令。

```
#!/bin/bash
echo `basename $_`;

user@server [~]# sh shell.sh
sh
user@server [~]# 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T12:54:02.967

嗯，这取决于有问题的脚本。有很多方法可以执行脚本，例如：

```
 ./<scriptname> #chmod 700 <scriptname> should be done before executing this script
 bash <scriptname> # provided bash is used for executing the script. 
```

或者如果您只想在 script1 中获取 script2 的名称，则使用 sed 或 awk 使用正则表达式 => /script2/ 解析 script1。

试试这个：

```
cat <script1> | awk '{ if( $0 ~ /^[^#].* \/scriptname.sh/ ){ print $1}}' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T13:42:49.960

@codebaus 谢谢，做这样的事情是可行的，但使用 strace 绝对不行。

```
#!/bin/bash
# echo $_
# echo $0

if grep "sh" $_ >/dev/null ; then
exit 1
fi ;
echo "string" ; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T13:57:54.050

我相信你想运行这个？：

```
#!/bin/bash
# echo $_
# echo $0

if grep "sh" $_ 2> /dev/null ; then
exit 1
fi ;
echo "string";

user@server [~]# sh shell.sh
Binary file /usr/bin/sh matches
user@server [~]# 
```

不确定您在最终游戏中要完成什么。但是 $_ 应该根据您最初的问题为您提供所需的内容。

此外：

由于我没有回答您的 strace 评论，因此很抱歉。基于上面前面的代码。

```
strace sh shell.sh

wait4(-1, Binary file /usr/bin/strace matches
[{WIFEXITED(s) && WEXITSTATUS(s) == 0}], 0, NULL) = 874
rt_sigprocmask(SIG_SETMASK, [], NULL, 8) = 0
--- SIGCHLD (Child exited) @ 0 (0) --- 
```

# python - 使用python用新数据替换旧数据

> ID：15682025
> 
> 赞同：0
> 
> 时间：2013-03-28T12:37:11.210
> 
> 标签：python, mysql, sql, database

我有 2 张表 TBL1 和 TBL2。

`TBL1`有 2 列`id`, `nSql`.
`TBL2`有 3 列`date`, `custId`, `userId`.
我在 TBL1 中有 17 行，id 为 1 到 17。每个 nSql 中都有一个 SQL 查询。

例如 nSql 为

id == 1 是：`"select date, pId as custId, tId as userId from TBL3"`
id == 2 是：`"select date, qId as custId, rId as userId from TBL4"`...

nSql 结果总是相同的 3 列。

下面的查询运行并将数据放入表 TBL2。如果 TBL2 中已经有当天的数据，我希望查询用新数据替换数据。如果 TBL2 中没有数据，我想以正常方式放置数据。

例如，如果我在早上运行查询，如果我想在晚上再次运行它，我希望新数据替换当天的旧数据，因为每天都会将数据插入到 TBL2 中。

如果数据已经存在（如果由同事运行），我也不希望那天有重复的数据，这也是一种预防措施。

我该怎么做？

谢谢你。

（我是python的新手，如果有人可以分步解释并在代码中显示，我将不胜感激）

```
import MySQLdb

# Open connection
con = MySQLdb.Connection(host="localhost", user="root", passwd="root", db="test")

# create a cursor object 
cur = con.cursor()

selectStatement = ("select nSql from TBL1") 
cur.execute(selectStatement)
res = cur.fetchall()
for outerrow in res:
    nSql = outerrow[0]
    cur.execute(nSql)
    reslt = cur.fetchall()

    for row in reslt:
        date = row[0]
        custId = row[1]
        userId = row[2]
        insertStatement = ("insert into TBL2( date, custId, userId) values ('%s', %d, %d)" % (date, custId, userId))
        cur.execute(insertStatement)
        con.commit() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T12:39:39.317

时间戳（使用`datetime`）插入到表中的所有数据。在插入之前，从日期时间当天是今天的表中删除。

对于 MySQL，您可以使用`to_days()`带有日期的函数来获取日期时间所在的日期：[https ://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_to-days](https://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_to-days)

插入新行时，`now()`会让你使用当前时间对应的日期时间值：[https ://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_now](https://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_now)

# mongodb - MongoDB文档实例

> ID：15682031
> 
> 赞同：6
> 
> 时间：2013-03-28T12:37:30.667
> 
> 标签：mongodb, nosql

我想学习如何正确设计 MongoDB 文档。我知道[MongoDB 手册，其中有关于](http://docs.mongodb.org/manual/)[文档设计](http://docs.mongodb.org/manual/core/data-modeling/)的特殊部分。我在哪里可以找到一些社交网络、cms 站点、日志应用程序的实用文档示例？我可以研究和学习的代码。

感谢您的宝贵时间，祝您有美好的一天！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-29T04:01:43.213

如果您真的想从 mongodb 的创建者那里看到详细的方法，请查看这里；这真的很好：[http](http://docs.mongodb.org/ecosystem/use-cases/) ://docs.mongodb.org/ecosystem/use-cases/ 。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-28T17:58:40.247

[MongoDB](http://www.10gen.com/presentations)有一些很棒的例子。我会特别专注于模式设计讨论。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-17T11:16:36.073

我从[Rick Copeland那里买了一本名为](http://blog.pythonisito.com/)[MongoDB Applied Design Patterns](http://shop.oreilly.com/product/0636920027041.do)的关于 Amazon 的书。这是一本“简短”的书，其中包含有关如何使用 MongoDB 的实际用例。它实际上描述了如何在 CMS、社交网络、在线游戏、电子商务等中使用 MongoDB……正是我想要的。:)

# android - 处理多个文本视图的 if 语句的更好方法？

> ID：15682035
> 
> 赞同：1
> 
> 时间：2013-03-28T12:37:48.340
> 
> 标签：android

我有一些文本视图，我想检查它们并返回第一个为空的。我已经设法做到了：

```
public TextView CurrentPos(){

    if (!wordLetter1.getText().toString().equals("*") &&
    !wordLetter2.getText().toString().equals("*") &&
    !wordLetter3.getText().toString().equals("*") &&
    !wordLetter4.getText().toString().equals("*") &&
    !wordLetter5.getText().toString().equals("*") &&    
    !wordLetter6.getText().toString().equals("*") &&
    !wordLetter7.getText().toString().equals("*")){

        if (wordLetter1.getText().toString().equals("") &&
                wordLetter2.getText().toString().equals("") &&
                wordLetter3.getText().toString().equals("") &&
                wordLetter4.getText().toString().equals("") &&
                wordLetter5.getText().toString().equals("") &&  
                wordLetter6.getText().toString().equals("") &&
                wordLetter7.getText().toString().equals(""))
            return wordLetter1;
        else if (!wordLetter1.getText().toString().equals("") &&
                wordLetter2.getText().toString().equals("") &&
                wordLetter3.getText().toString().equals("") &&
                wordLetter4.getText().toString().equals("") &&
                wordLetter5.getText().toString().equals("") &&  
                wordLetter6.getText().toString().equals("") &&
                wordLetter7.getText().toString().equals(""))
            return wordLetter2;
        else if (!wordLetter1.getText().toString().equals("") &&
                !wordLetter2.getText().toString().equals("") &&
                wordLetter3.getText().toString().equals("") &&
                wordLetter4.getText().toString().equals("") &&
                wordLetter5.getText().toString().equals("") &&  
                wordLetter6.getText().toString().equals("") &&
                wordLetter7.getText().toString().equals(""))
            return wordLetter3;
        else if (!wordLetter1.getText().toString().equals("") &&
                !wordLetter2.getText().toString().equals("") &&
                !wordLetter3.getText().toString().equals("") &&
                wordLetter4.getText().toString().equals("") &&
                wordLetter5.getText().toString().equals("") &&  
                wordLetter6.getText().toString().equals("") &&
                wordLetter7.getText().toString().equals(""))
            return wordLetter4;
        else if (!wordLetter1.getText().toString().equals("") &&
                !wordLetter2.getText().toString().equals("") &&
                !wordLetter3.getText().toString().equals("") &&
                !wordLetter4.getText().toString().equals("") &&
                wordLetter5.getText().toString().equals("") &&  
                wordLetter6.getText().toString().equals("") &&
                wordLetter7.getText().toString().equals(""))
            return wordLetter5;
        else if (!wordLetter1.getText().toString().equals("") &&
                !wordLetter2.getText().toString().equals("") &&
                !wordLetter3.getText().toString().equals("") &&
                !wordLetter4.getText().toString().equals("") &&
                !wordLetter5.getText().toString().equals("") && 
                wordLetter6.getText().toString().equals("") &&
                wordLetter7.getText().toString().equals(""))
            return wordLetter6;
        else if (!wordLetter1.getText().toString().equals("") &&
                !wordLetter2.getText().toString().equals("") &&
                !wordLetter3.getText().toString().equals("") &&
                !wordLetter4.getText().toString().equals("") &&
                !wordLetter5.getText().toString().equals("") && 
                !wordLetter6.getText().toString().equals("") &&
                wordLetter7.getText().toString().equals(""))
            return wordLetter7;

    }   
    return null;
} 
```

以上工作正常，但我认为这必须是一种更兼容的方式，可以用更少的代码行来实现相同的目标。我对java没有太多经验，我找到了一些类似情况的答案，我不能完全理解。我尝试使用上面的代码减少 CurrentPos() 方法的代码：

```
public TextView CurrentPos(){

    TextView wordletters[] = {wordLetter1, wordLetter2, wordLetter3,
            wordLetter4, wordLetter5, wordLetter6, wordLetter7};

    TextView currentPos = null;
    for(int i=0; i<wordletters.length; i++){
    if(!wordletters[i].toString().equals(("*")) && wordletters[i].equals("")){      
        currentPos = wordletters[i];
        return currentPos;
        }

        }   
    return null;
} 
```

这给出了错误 NulPointerException。显然我做错了什么，我不明白。我的代码是完全错误的还是只是缺少了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T12:39:49.383

在第二种方式中，您需要调用`getText`方法来比较 TextView 的文本，因为目前您正在尝试将 Array 中的 TextView 实例比较为：

```
for(int i=0; i<wordletters.length; i++){
    if(!wordletters[i].getText().toString().equals(("*")) && 
                       wordletters[i].getText().toString().equals("")){      
        currentPos = wordletters[i];
        return currentPos;
    }

} 
```

# java - 如何在 Eclipse 断点中降低 Java 测试运行程序的优先级？

> ID：15682036
> 
> 赞同：7
> 
> 时间：2013-03-28T12:37:54.617
> 
> 标签：java, eclipse, multithreading, thread-priority

如果我在 Eclipse 中调试一些多线程 Java 代码 - 使用主类 RunTest 和一个有趣的类 QueueListener。

假设：

*   初始化 RunTest 时 - QueueListener 在后台运行。
*   当 RunTest 完成时 - QueueListener 被终止
*   RunTest 中只有一个方法——其中有一个断点
*   QueueListener 中有一个方法，其中有一个断点
*   QueueListener 可以反复运行
*   RunTest 每次执行只运行一次（父类）

在 Eclipse 中调试时 - 两个断点都会出现。但是 Eclipse 优先考虑 RunTest - 我必须通过在调试器中选择该线程来手动将其翻转到 QueueListener - 并一遍又一遍地重复这一点。

有没有办法告诉 Eclipse 我对 QueueListener 更感兴趣，并认为 testrunner 的优先级较低——当它选择要显示的调试断点时？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T13:40:02.720

答案可以在 eclipse 源代码中的`ThreadEventHandler`方法中找到。有一个挂起的线程队列，如下所示：

```
/**
 * Queue of suspended threads to choose from when needing
 * to select a thread when another is resumed. Threads
 * are added in the order they suspend.
 */
private Set fThreadQueue = new LinkedHashSet(); 
```

再往下，每次遇到断点，挂起的线程就会被添加到这个队列中：

```
protected void handleSuspend(DebugEvent event) {
   ...
   queueSuspendedThread(event);
   ...
} 
```

获取下一个挂起线程的方法是：

```
protected synchronized IThread getNextSuspendedThread() {
    if (!fThreadQueue.isEmpty()) {
        return (IThread) fThreadQueue.iterator().next();
    }
    return null;
} 
```

所以答案是否定的，没有对顺序的控制，它将严格按照每个线程命中断点并添加到底层队列的顺序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T13:27:34.980

不涉及优先级，但这仅取决于应用程序的时序行为。可能您的 2 个断点会在很短的时间内被击中，但总是以相同的顺序。然后 Eclipse 将始终只打开其中一个的编辑器（并滚动到线程）（我不完全知道选择的策略，但我猜是发生的第一个断点）。

在调试多线程应用程序并每隔几秒打断点时，您真的不想让您的编辑器/视图一直更改，对吗？

# java - JTable 数据刷新问题

> ID：15682042
> 
> 赞同：1
> 
> 时间：2013-03-28T12:38:16.700
> 
> 标签：java, swing, jtable, defaulttablemodel

我想通过单击一个按钮来刷新 JTable 数据。

问题是JTable中的旧数据无法删除，新数据只是添加到表中。我尝试了以下方法来删除旧数据，但它们都不起作用。

```
1\. table.setModel(new DefaultTableModel());
2\. ((DefaultTableModel)table.getModel()).setRowCount(0);
3\. ((DefaultTableModel)table.getModel()).fireTableDataChanged();
4\. ((DefaultTableModel)table.getModel()).getDataVector().removeAllElements();
5\. table.repaint();
6\. model = (DefaultTableModel)table.getModel();
   while(model.getRowCount() > 0) {
       model.removeRow(0);
   } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T13:07:09.053

JTable 有一个刷新按钮是非常可疑的。这让我认为您没有正确添加数据，因为每次添加或删除数据时 JTables 都应该刷新。

使用 DefaultTableModel 时，我会验证几件事：

1.  确保仅使用[addRow添加数据](http://docs.oracle.com/javase/7/docs/api/javax/swing/table/DefaultTableModel.html#addRow%28java.lang.Object%5B%5D%29)
2.  只能使用[insertRow插入数据](http://docs.oracle.com/javase/7/docs/api/javax/swing/table/DefaultTableModel.html#insertRow%28int,%20java.lang.Object%5B%5D%29)
3.  [使用removeRow](http://docs.oracle.com/javase/7/docs/api/javax/swing/table/DefaultTableModel.html#removeRow%28int%29)删除数据

*切勿*直接修改内部向量。它不会导致事件触发，并且您会遇到刷新按钮。我不知道他们为什么还要暴露它。JavaDocs 至少应该特别警告这一点。

如果一切都失败了，启动一个调试器，看看会发生什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T12:52:19.573

您的更多代码可能适合此处。很难准确说出您在哪里调用这些方法和顺序。如果您更改模型然后调用 fireTableDataChanged() 它应该可以工作......假设您已经更新了正确的 TableModel。有一个很好的使用表的 Java 教程：http: [//docs.oracle.com/javase/tutorial/uiswing/components/table.html](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-10-28T15:15:16.980

我自己也有同样的问题，但我的解决方案不同。在检查了几乎所有内容后，我通过控制台检查了表格的内容，发现内容确实在更新。但是，更新并未反映在屏幕上可见的表格上。

其实这段代码：

```
model = (DefaultTableModel)table.getModel();

while(model.getRowCount() > 0) {
       model.removeRow(0);
   } 
```

不仅删除了行，还删除了表。

我的解决方案是从表格中删除表格，然后在表格数据发生更改时重新添加它。

在我的情况下，我生成表格的编码似乎没有任何问题，但是布局管理器不喜欢覆盖或更新我想要放置它的区域已经有东西的组件。

我认为发生了一些奇怪的事情，但最终这对我有用。

# c# - 如何定义可以返回 DataTable 或 List 的方法 ?

> ID：15682047
> 
> 赞同：1
> 
> 时间：2013-03-28T12:38:38.017
> 
> 标签：c#, interface, datatable, generic-collections

我正在尝试定义一个可以返回数据列表的通用方法。我想让它灵活地允许返回 DataTable 或 List<T>。例如

```
 *SomeGenericDataTypeInterface* GetResult(IDictionary IDictParams); 
```

DataTable 和 List 似乎没有任何通用的基本接口。这可能吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-28T12:40:33.350

您将需要两种不同的方法，一种返回 DataTable，另一种返回 List。虽然可能有一些方法（如一些建议），但最佳实践是有两个方法，每个方法都返回一个显式类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T12:40:20.833

将输出定义为`object`。但是会很笼统

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T12:40:52.743

你为什么不使用`dynamic`关键字ie

```
public dynamic GetResult(IDictionary IDictParams)
{
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T12:41:21.513

DataTable 和 List 继承自`object`type，因此返回一个对象类型。在调用方法中，您可以检查返回类型为`if(result is DataTable){//do this}`.

# php - 亚马逊阻止 cURL 请求？

> ID：15682049
> 
> 赞同：1
> 
> 时间：2013-03-28T12:38:42.110
> 
> 标签：php, curl

我正在尝试使用 php cURL 来获取亚马逊网页，但得到的是 HTTP/1.1 503 Service Temporarily Unavailable。亚马逊阻止 cURL 吗？

[http://www.amazon.com/gp/offer-listing/B003B7Q5YY/](http://www.amazon.com/gp/offer-listing/B003B7Q5YY/)

```
<?php

function get_html_content($url) {
    // fake user agent
    $userAgent = 'Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.8.1.2) Gecko/20070219 Firefox/2.0.0.2';

    $ch = curl_init();
    curl_setopt($ch, CURLOPT_URL, $url);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt($ch, CURLOPT_HEADER, 1);
    curl_setopt($ch, CURLOPT_USERAGENT, $userAgent);
    curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1);
    curl_setopt($ch,CURLOPT_COOKIEFILE,'cookies.txt');
    curl_setopt($ch,CURLOPT_COOKIEJAR,'cookies.txt');

    $string = curl_exec($ch);
    curl_close($ch);

    return $string;
}

echo get_html_content("http://www.amazon.com/gp/offer-listing/B003B7Q5YY");

?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-06T12:03:33.047

我用简单

```
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, $offers_page);
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, true);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_USERAGENT, 'Mozilla/5.0 (Windows; U; Windows NT 6.1; en-US; rv:1.9.1.2) Gecko/20090729 Firefox/3.5.2 GTB5');
$html = curl_exec($ch);
curl_close($ch); 
```

但我还有另一个问题。如果您向亚马逊发送大量查询 - 他们开始向您发送 500 页。

# linux - 如何为linux中的文件夹生成清单（文件及其大小和数量的列表）

> ID：15682063
> 
> 赞同：1
> 
> 时间：2013-03-28T12:39:17.300
> 
> 标签：linux, shell

如何生成包含除特定文件名之外的所有文件的清单，如填充文件。

实际要求

```
4
issue1425.tgz       3096209598  
issue1426.TGZ       3096209591
issue1427.ZIP       3096209592
issue1428.zip       3096209593 
```

=> 文件总数：4

文件名：issue1425.tgz

文件大小：123333

……

我在做这样

```
ls i2*.* |wc -l >>manifest.txt
vdir i2*.* >>manifest.txt 
```

“manifest.txt”中的输出是

```
4
-rwxr-Sr-t 1 root root 3096209598 2013-03-28 05:46 issue1425.tgz
-rwxrw-r-- 1 root root 3096209591 2013-03-20 06:46 issue1426.TGZ
-rwxr-Sr-t 1 root root 3096209592 2013-03-28 07:46 issue1427.ZIP
-rwxrw-r-- 1 root root 3096209593 2013-03-20 08:46 issue1428.zip 
```

有没有人有解决方案来获得我的确切要求：

编辑 2：@jarnbjo 您的命令给了我错误的输出查看文件的实际大小，但它给了我错误的信息。

```
root@aim-deb:/mnt/arch1/batchfiles/siva/20130328094916142/received# vdir
total 108816
drwxrwxrwx 5 1330 sno      4096 2013-03-20 00:30 i23321367
-rw-rw-r-- 1 1330 sno  39934457 2013-03-20 03:20 i23321367.tgz
drwxrwxrwx 5 1330 sno      4096 2013-03-20 00:33 i23321376
-rw-rw-r-- 1 1330 sno  36030069 2013-03-20 03:20 i23321376.tgz
drwxrwxrwx 5 1330 sno      4096 2013-03-20 00:34 i23321436
-rw-rw-r-- 1 1330 sno  35310600 2013-03-20 03:20 i23321436.tgz
-rw-r--r-- 1 root root       69 2013-03-29 00:57 manifest_QAG.txt
-rw-rw-r-- 1 1330 sno        75 2013-03-20 03:20 manifest.txt
root@aim-deb:/mnt/arch1/batchfiles/siva/20130328094916142/received# ls -1s --    block-size=1 i*.* $dir| awk '{print $2"\t"$1}'
i23321367.tgz   39981056
i23321376.tgz   36073472
i23321436.tgz   35352576
root@aim-deb:/mnt/arch1/batchfiles/siva/20130328094916142/received# 
```

答案：@jarnbjo 谢谢，我终于明白了它为什么会发生。如果磁盘上的文件大小不是文件的实际大小，则块大小给我大小。这里我想要文件的大小，所以我可以使用 vdir i*.* $dir| awk '{打印 $8"\t"$5}'

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T12:53:19.447

如果您只想要文件的数量及其大小，请尝试以下操作：

```
ls -1hs $dir 
```

*   `h`代表人类可读
*   `s`代表尺寸
*   `1`（一）只显示文件名，每行一个。

如果您希望它是名字，然后是大小，请使用：

```
ls -1hs $dir | awk '{print $2" "$1}' 
```

**从评论中编辑**
，您希望它的大小以字节为单位，因此您可以这样做：

```
ls -1s --block-size=1 $dir 
```

**进一步编辑**
如果你不想显示目录，你必须`cd $dir`事先。还有其他方法，但这似乎是最干净的。

```
cd $dir; ls -1s --block-size=1 is*.* | awk '{print $2"\t"$1}' 
```

# javascript - 谷歌地图 api v3 javascript 单击仅标记

> ID：15682065
> 
> 赞同：0
> 
> 时间：2013-03-28T12:39:20.067
> 
> 标签：javascript, cordova, jquery-mobile, google-maps-api-3, jquery-ui-map

我有一个问题，我在带有 jquery mobile 的 phonegap 中使用 google maps api v3 并设置了标记，但我希望能够仅单击它们，但我可以单击地图上的目的地，例如医院。我如何禁用该选项，只留下可点击的标记？当来自不同页面时，我还需要关闭打开的信息窗口，我可以关闭我的标记的信息窗口，但医院信息窗口保持打开状态。

我如何关闭信息窗口或不让用户单击除标记之外的任何其他内容？

# grails - 通过 Grails 的自动生成 ID 在 GSP 中显示数据时出错 - 获取数据类型错误

> ID：15682066
> 
> 赞同：0
> 
> 时间：2013-03-28T12:39:21.253
> 
> 标签：grails, gsp

我是 Grails 的新手，一点一点地学习，但我真的很挣扎。

好的，所以我正在尝试从 Grails 中的一个类中呈现数据。它将数据存储在 mySQL 数据库中。当我们在类中有一个名为“id”的整数参数时，一切正常，但我们发现 Grails 会自动在数据库表中分配一个“id”行，因此我们将其删除。现在，当我在 gsp 中运行此代码时：

```
<g:each in="${Proposal.where {id == 1} }" var="proposal">
 <h3>
  ${proposal.name}
 </h3>
 <p>
  Starting date: <g:formatDate format="dd.MM.yyyy" date="${proposal.date_started}" />
 </p>
 <p>
  ending date:: <g:formatDate format="dd.MM.yyyy" date="${proposal.date_ended}" />
 </p>
 <p>
  description: ${ proposal.description }
 </p>   
</g:each> 
```

'id == 1' 部分只是为了获取一些虚拟数据，我确保数据库中有一行 id 为 1。稍后将更改为采用输入参数，以显示动态详情页面。
当我尝试导航到此页面时，我收到此错误：

> URI /site/proposal/
> Class java.lang.ClassCastException
> 消息 java.lang.Integer 无法转换为 java.lang.Long

堆栈跟踪似乎只是告诉我发生这种情况的位置，将我指向上述代码的位置。数据库表有一个名为“id”的列，它是一个 bigint。Grails 不应该能够处理这种数据类型不匹配吗？无论哪种方式，不是 Integer 类的 long 和 bigint 子集吗？

我是否试图以向后的方式列出数据？有没有更好的标签可以使用？我很困惑，需要一杯茶。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T12:57:02.103

首先，最好将表示（视图）与数据库查询分开，因此如果查询更复杂且有更多变体，则此查询的更好位置是控制器或服务。

```
class PropsalController {
  def showFirst() {
    def proposal = Proposal.get(1) //or Proposal.where{ id == 1L }
    [proposal: proposal]
  }
} 
```

由于您只过滤了对象的一个​​实例，因此您不需要每个标签。

```
 <h3>
  ${proposal.name}
 </h3>
 <p>
  Starting date: <g:formatDate format="dd.MM.yyyy" date="${proposal.date_started}" />
 </p>
 <p>
  ending date:: <g:formatDate format="dd.MM.yyyy" date="${proposal.date_ended}" />
 </p>
 <p>
  description: ${ proposal.description }
 </p> 
```

您面临的转换异常发生是因为默认情况下，Grails 将使用类型创建一个字段 id，`Long`并且条件不处理此转换。为此创建了一个[JIRA 。](http://jira.grails.org/browse/GRAILS-9447)如果您需要使用 where 查询，请确保转换为 Long 您的 id。

# opengl - glTexImage1D 和 glTexImage2D 的区别

> ID：15682067
> 
> 赞同：3
> 
> 时间：2013-03-28T12:39:30.177
> 
> 标签：opengl, textures

`glTexImage2D()`和 和有什么不一样`glTexImage1D()`？实际上，我无法想象一维纹理。东西怎么会有一维纹理？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-28T23:20:30.650

纹理不是您在三角形上绘制的图片。纹理是值的查找表，着色器可以访问并从中获取数据。您*可以将*纹理用作“在三角形上绘制的图片”，但不应仅限于此。

一维纹理是只有一个维度的纹理：宽度。这是一条线。它是一维的函数：`f(x)`。您提供一个纹理坐标，并获得一个值。

2D 纹理是具有两个维度的纹理：宽度和高度。它是一个矩形。它是两个维度的函数：`f(x, y)`. 您提供两个纹理坐标，并获得一个值。

一维纹理可用于任何一维函数的离散逼近。您可以预先计算一些[菲涅耳镜面反射因子](http://en.wikipedia.org/wiki/Fresnel_equations)并访问一维纹理来获取它们，而不是在着色器中计算它们。一维纹理可以代表高斯镜面反射项，就像我在[书中关于纹理的第一章中](https://nicolbolas.github.io/oldtut/Texturing/Tutorial%2014.html)所做的那样。

一维纹理可以是任何一维函数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T12:52:15.440

2D 纹理同时具有高度和宽度，而 1D 纹理只有 1 个像素的高度。这基本上意味着纹理是一行像素。当我们想要将一些数值映射到颜色或将颜色映射到不同的颜色时（如在单元格着色技术中），它们经常使用。

# php - 查找日期 id 未来与否

> ID：15682072
> 
> 赞同：-4
> 
> 时间：2013-03-28T12:39:43.817
> 
> 标签：php, html, cakephp, date, joomla

我需要找出日期是否过期。

这是我的日期。但这对我不起作用，

```
$ActualDate    = "2013-03-19 05:05:23";
$ExpiryDate    = "2013-04-18 05:05:23";

$elapsedTime = new DateTime($ActualDate);
$now         = new DateTime($ExpiryDate);
echo ($now < $elapsedTime ? 'Future' : 'Past'); 
```

我无法得到准确的结果......如果有人知道这一点，请发布一个答案，这将对我有所帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T12:43:22.050

问题是`$elapsedTime`设置为`$ActualDate`和。你可能想交换它们。`$now``$ExpiryDate`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T13:01:27.570

```
<?php
$expires_at = new DateTime('2013-04-19 05:05:23');
$now        = new DateTime();

echo $now < $expires_at ? 'Future' : 'Past'; 
```

# zend-framework - 前端控制器在 Zend 框架中无法正常工作

> ID：15682076
> 
> 赞同：0
> 
> 时间：2013-03-28T12:39:48.723
> 
> 标签：zend-framework, front-controller

我已经完全在 zend 框架中创建了模块（管理员）。现在我想从前端开始工作，这样我就可以从后端管理我的整个站点。但我无法为此获得解决方案。如果我在本地主机上运行我的页面，那么它会自动调用后端的 css 和后端的主题，并显示错误消息“异常信息”，这里我将我的 application.ini 文件代码

```
[production]
phpSettings.display_startup_errors = 0
phpSettings.display_errors = 0
includePaths.library = APPLICATION_PATH "/../library"
bootstrap.path = APPLICATION_PATH "/Bootstrap.php"
bootstrap.class = "Bootstrap"

admin.bootstrap.path = APPLICATION_PATH "/modules/admin/Bootstrap.php"
admin.bootstrap.class = "Admin_Bootstrap"

appnamespace = "Application"
resources.frontController.controllerDirectory = APPLICATION_PATH "/controllers"
resources.frontController.params.displayExceptions = 1

resources.session.name = "ZendSession"
;resources.session.save_path = APPLICATION_PATH "/../data/session"
resources.session.use_only_cookies = true
resources.session.remember_me_seconds = 86400

resources.layout.layout = "layout"
resources.layout.layoutPath = APPLICATION_PATH "/layouts/scripts/"
admin.resources.layout.layout = "admin"
admin.resources.layout.layoutPath = APPLICATION_PATH "/modules/admin/layouts/scripts"

resources.view.encoding = "UTF-8"
resources.view.basePath = APPLICATION_PATH "/views/"
resources.view[] =

resources.frontController.moduleDirectory = APPLICATION_PATH "/modules"
resources.modules[] =
resources.view[] =
admin.resources.view[] = 

resources.db.adapter = Pdo_Mysql
resources.db.params.username = root
resources.db.params.password = 
resources.db.params.dbname = myproject
resources.db.isDefaultTableAdapter = true

[staging : production]

[testing : production]
phpSettings.display_startup_errors = 1
phpSettings.display_errors = 1
[development : production]
phpSettings.display_startup_errors = 1
phpSettings.display_errors = 1
resources.frontController.params.displayExceptions = 1 
```

在引导文件中，我没有初始化任何函数或插件

```
class Bootstrap extends Zend_Application_Bootstrap_Bootstrap
{

} 
```

我为模块管理员创建了单独的 bootsrap.php 文件，如下所示：-

```
<?php
class Admin_Bootstrap extends Zend_Application_Module_Bootstrap
{
    /*protected function _initAppAutoload()
    {
        $autoloader = new Zend_Application_Module_Autoloader(array(
            'names pace' => 'admin',
            'basePath' => APPLICATION_PATH . '/modules/admin/'
        ));
        return $autoloader;
    }*/

    protected function _initDoctype()
    {
      global $adminModuleCssPath;
      global $adminModuleJsPath;
      $this->bootstrap( 'view' );
      $view = $this->getResource( 'view' );

      $view->headTitle('Projects for learning');
      $view->headScript()->appendFile($adminModuleJsPath.'jquery-1.7.2.js');
      $view->headScript()->appendFile($adminModuleJsPath.'jquery-ui.js');     
      $view->headScript()->appendFile($adminModuleJsPath.'tinybox.js');
      $view->headScript()->appendFile($adminModuleJsPath.'common.js');
      $view->headLink()->appendStylesheet($adminModuleCssPath.'jquery-ui.css');
      $view->headLink()->appendStylesheet($adminModuleCssPath.'style.css');
      $view->headLink()->appendStylesheet($adminModuleCssPath.'theme.css');
      $view->headLink()->appendStylesheet($adminModuleCssPath.'tinybox.css');
      $view->doctype( 'XHTML1_STRICT' );
      //$view->navigation = $this->buildMenu();
    }

    protected function _initLayoutPlugin()
    {
         $layout = Zend_Controller_Front::getInstance();
         $layout->registerPlugin(new Admin_Plugin_AdminLayout());

    }

    protected function _initAuthPlugin()
    {
       $checkAuth = Zend_Controller_Front::getInstance();
       $checkAuth->registerPlugin(new Admin_Plugin_CheckAuth(Zend_Auth::getInstance()));
    }

    protected function _initRouter()
    {
        $frontController = Zend_Controller_Front::getInstance();
        $router = $frontController->getRouter();
        $route = new Zend_Controller_Router_Route(
                 ':module/:controller/:action/*',
                 array('module' => 'admin')
              );
        $router->addRoute('default', $route);

        $usersRoute = new Zend_Controller_Router_Route_Regex(
                      ':module/:controller/:action/(?:/page/(\d+)/?)?',
                      array(
                            'module' => 'admin',
                            'controller' => 'users',
                            'action' => 'index',
                            'page' => 1,
                            ),
                      array(
                              'page' => 1,
                            )
                    );

        $router->addRoute('users-index', $usersRoute);

    }

    protected function _initActionHelpers()
    { 
        Zend_Controller_Action_HelperBroker::addPath(APPLICATION_PATH . "/modules/admin/views/helpers");
        Zend_Controller_Action_HelperBroker::addPrefix('Admin_View_Helper');
    }

    /*protected function _initAutoload()
    {
        $autoloader = new Zend_Loader_Autoloader_Resource(array(
            'namespace' => '',
            'basePath' => APPLICATION_PATH."/modules/admin",
            'resourceTypes' => array(
                'form' => array(
                    'path' => 'forms',
                    'namespace' => 'Form',
                ),
                'model' => array(
                    'path' => 'models',
                    'namespace' => 'Model',
                ),
            )
        ));
        return $autoloader;
    }*/

} 
```

我在哪里犯了错误，我不知道，我是 Zend Framework 的新手，请任何人帮我解决这个问题，这样我就可以调用我的前端控制器和操作并使用后端模块（管理员）管理它

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T13:25:44.993

每次请求都会调用*所有*模块的引导类。

如果您需要执行特定于模块的设置（例如，初始化您的视图），则使用`routeShutdown()`钩子注册一个前端控制器插件。在调度周期的那个时刻，你知道哪个模块被调用，所以你知道你想如何配置你的视图。

有关更多信息，请参阅[此答案](https://stackoverflow.com/a/9533263/131824)和 MWOP 关于[ZF1 模块引导](http://mwop.net/blog/234-Module-Bootstraps-in-Zend-Framework-Dos-and-Donts)的帖子。

# php - 从 SQL 中检索数据

> ID：15682084
> 
> 赞同：-2
> 
> 时间：2013-03-28T12:40:15.153
> 
> 标签：php, mysql, mysqli

```
<?php
$sql = mysql_query("SELECT * FROM users;");

    while($row = mysql_fetch_array($sql))
    {
    $dbCon=mysqli_connect("localhost", "root", "", "dbusers")
       or die(mysqli_error()."Connection disconnected");
    echo "<tr>";
        echo "<td>" . $row['UserID'] . "</td>";
        echo "<td>" . $row['Firstname'] . "</td>";
        echo "<td>" . $row['Lastname'] . "</td>";
        echo "<td>" . $row['Gender'] . "</td>";
        echo "<td>" . $row['Email'] . "</td>";
        echo "<td>" . $row['Status'] . "</td>";
        echo "<td>" . $row['Date_joined'] . "</td>";
    echo "</tr>";
    }

?> 
```

*   我的代码有什么问题？

这是我总是得到的错误：警告：mysql_fetch_array() 期望参数 1 是资源，在第 4 行的 C:\xampp\htdocs\CRUD\CRUD_Act\includes\dbdisp.php 中给出的布尔值

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T12:42:20.203

先连接数据库！

```
<?php
 $dbCon=mysql_connect("localhost", "root", "", "dbusers")
       or die(mysql_error()."Connection disconnected");
$sql = mysql_query("SELECT * FROM users;");

    while($row = mysql_fetch_array($sql))
    {

    echo "<tr>";
        echo "<td>" . $row['UserID'] . "</td>";
        echo "<td>" . $row['Firstname'] . "</td>";
        echo "<td>" . $row['Lastname'] . "</td>";
        echo "<td>" . $row['Gender'] . "</td>";
        echo "<td>" . $row['Email'] . "</td>";
        echo "<td>" . $row['Status'] . "</td>";
        echo "<td>" . $row['Date_joined'] . "</td>";
    echo "</tr>";
    }

?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T12:50:35.467

正如他们所说：你必须连接到数据库

包括您的文件连接：

喜欢 ：

```
include("connexion.php"); 
```

或者像他们建议的那样做，因为你在连接到它之前查询了 ​​mysql 数据库。

接着 ：

```
 <?php
   $sql ="SELECT * FROM users";
   $res=mysql_query($sql) or die("erreur");
    while($row=mysql_fetch_row($res))
    {
    echo "<tr>";
        echo "<td>" . $row['UserID'] . "</td>";
        echo "<td>" . $row['Firstname'] . "</td>";
        echo "<td>" . $row['Lastname'] . "</td>";
        echo "<td>" . $row['Gender'] . "</td>";
        echo "<td>" . $row['Email'] . "</td>";
        echo "<td>" . $row['Status'] . "</td>";
        echo "<td>" . $row['Date_joined'] . "</td>";
    echo "</tr>";
    }

?> 
```

PS：查询字符串不应以分号结尾

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T12:42:39.817

在连接到它之前，您正在查询 mysql 数据库。在你做任何数据库工作之前，你必须连接到它，然后检查你是否有连接。错误返回 false，因为它无法运行查询，因为没有要查询的数据库。

```
<?php
$dbCon=mysql_connect("localhost", "root", "", "dbusers")
   or die(mysql_error()."Connection disconnected");
$sql = mysql_query("SELECT * FROM users;");

while($row = mysql_fetch_array($sql))
{
    echo "<tr>";
    echo "<td>" . $row['UserID'] . "</td>";
    echo "<td>" . $row['Firstname'] . "</td>";
    echo "<td>" . $row['Lastname'] . "</td>";
    echo "<td>" . $row['Gender'] . "</td>";
    echo "<td>" . $row['Email'] . "</td>";
    echo "<td>" . $row['Status'] . "</td>";
    echo "<td>" . $row['Date_joined'] . "</td>";
    echo "</tr>";
} 
```

这应该在 php 标签下

# hibernate - hibernate JPA：可选值生成

> ID：15682091
> 
> 赞同：2
> 
> 时间：2013-03-28T12:40:46.260
> 
> 标签：hibernate, jpa, sequence

是否可以在休眠中设置一个字段以在它为空时生成一个值？

这不是主键而是业务键。基本上我有一个带有条形码字段的容器。如果没有指定条形码，则自动生成（例如，前缀 + 序列号）。

这是可能的还是我需要创建一个自定义方法来访问下一个序列值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T12:55:43.287

看看这个：[Hibernate JPA Sequence (non-Id)](https://stackoverflow.com/questions/277630/hibernate-jpa-sequence-non-id) 这个想法是为生成的值创建一个实体，`BarCode`然后将其用作主实体的属性：

```
@Entity
public class BarCode{

    private static final String PREFIX = "PREFIX";

    @Id
    @GeneratedValue(...)
    private Long number;

    public String getBarCodeValue(){
        return PREFIX + getNumber();
    }
}

@Entity 
public class MyEntity {
    @Id ..
    private Long id;

    @OneToOne(...)
    private BarCode barCode;

    public String getBarCodeValue(){
        return barCode.getBarCodeValue();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T12:54:44.563

从类本身为条形码分配值。尝试这样的事情。

```
int sequencenumber = generateSequence();
String barcode = prefix + sequencenumber; 
```

我没有试过这个。所以我不确定这是否可行。试试看。

另请查看： [为 JPA 中的列设置默认值](https://stackoverflow.com/questions/197045/setting-default-values-for-columns-in-jpa)

# arrays - 从一个数组到另一个数组的计算数据

> ID：15682092
> 
> 赞同：0
> 
> 时间：2013-03-28T12:40:48.900
> 
> 标签：arrays, matlab, kernel

我有两个数组，第一个是 data_array(50,210)，第二个是 dest_array(210,210)。目标是使用 data_array 中的数据来计算 dest_array 在特定索引处的值，而不使用 for 循环。

我这样做：

```
function [ out ] = grid_point( row,col,cg_row,cg_col,data,kernel )
ker_len2 = floor(length(kernel)/2);
op1_vals = data((row - ker_len2:row + ker_len2),(col - ker_len2:col + ker_len2));
out(cg_row,cg_col) = sum(sum(op1_vals.*kernel)); %incorre
end

function [ out ] = sm(dg_X, dg_Y)
%dg_X, dg_Y - arrays of size 210x210, the values - coordinates of data in data_array,
%index of each element - position this data at 210x210 grid

data_array = randi(100,50,210); %data array

kernel = kernel_sinc2d(17,'hamming'); %sinc kernel for calculations
ker_len2 = floor(length(kernel)/2);

%adding the padding for array, to avoid 
%the errors related to boundaries of data_array
data_array = vertcat(data_array(linspace(ker_len2+1,2,ker_len2),:),...
                     data_array,...
                     data_array(linspace(size(data_array,1)-1,size(data_array,1) - ker_len2,ker_len2),:));

data_array = horzcat(data_array(:,linspace(ker_len2+1,2,ker_len2)),...
                     data_array,...
                     data_array(:,linspace(size(data_array,2)-1,(size(data_array,2) - ker_len2,ker_len2)));

%cg_X, cg_Y - arrays of indicies for X and Y directions
[cg_X,cg_Y] = meshgrid(linspace(1,210,210),linspace(1,210,210));

%for each point at grid(210x210) formed by cg_X and cg_Y, 
%we should calculate the value, using the data from data_array(210,210).

%after padding, data_array will have size (50 + ker_len2*2, 210 + ker_len2*2)

dest_array = arrayfun(@(y,x,cy,cx) grid_point(y, x, cy, cx, data_array, kernel),...
                      dg_Y, dg_X, cg_Y, cg_X);
end 
```

但是，arrayfun 似乎无法解决我的问题，因为我使用了不同大小的数组。有人有这个想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T14:44:03.523

我不完全确定，但从标题来看，这可能是你想要的：

```
%Your data
data_array_small = rand(50,210)
data_array_large = zeros(210,210)
%Indicating the points of interest
idx = randperm(size(data_array_large,1));
idx = idx(1:size(data_array_small,1))

%Now actually use the information:
data_array_large(idx,:)  = data_array_small 
```

# javascript - 返回引导输入的结果？

> ID：15682095
> 
> 赞同：0
> 
> 时间：2013-03-28T12:41:02.573
> 
> 标签：javascript, jquery, ajax, twitter-bootstrap

我试图在执行 ajax 请求后返回 bootstrap typeahead 的结果，但它不起作用但是当我不启动 ajax 请求时它确实起作用。

这不起作用：

```
$(".typeahead").typeahead({
  source: function(query, process) {
    return $.ajax({
      url: "/typeahead",
      type: "GET",
      data: "action=" + query,
      success: function(result) {
        return result;  // this returns an array checked with console
      }
    });
  }
}); 
```

没有ajax它可以工作：

```
 $(".typeahead").typeahead({
      source: function(query, process) {
          return ["option1", "option2", "option3"]
      }
    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T13:02:27.813

您应该返回 process(result) 而不是只返回结果。

```
$(".typeahead").typeahead({
  source: function(query, process) {
    return $.ajax({
      url: "/typeahead",
      type: "GET",
      data: "action=" + query,
      success: function(result) {
        return process(result);  // this returns an array checked with console
      }
    });
  }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T12:58:04.077

在一个函数中设置ajax调用..

```
function typeahead()
    {
    $.ajax({
          url: "/typeahead",
          type: "GET",
          data: "action=" + query,
          success: function(result) {
            return result;  // this returns an array checked with console
          }
        });
    } 
```

在initilze之后你把这样的代码

```
$(".typeahead").typeahead({
      source: function(query, process) {
         var data=typeahead(query);
         process(data);

      }
    }); 
```

# haskell - Haskell 基本 [Either ab] 输入参数

> ID：15682096
> 
> 赞同：0
> 
> 时间：2013-03-28T12:41:03.213
> 
> 标签：haskell

我如何为以下函数编写输入参数？

一个词是这些符号的列表，它的类型为 [Either sigma var]。所以，我的第二个输入将是一个词，我不知道从哪里开始。我想我不能写 [Left sigma] 或 [Right var]，因为两者都是单词的类型。请帮帮我，或者请指向我可以阅读的地方:)

```
genstep :: CFG sigma var -> [Either sigma var] -> [[Either sigma var]] 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T13:35:11.420

这是让你开始的事情。给定一个特定的 type 值`CFG sigma var`，第二个参数只能是三件事之一——要么是空的，要么第一个元素是 a `Left`，或者第一个元素是 a `Right`。

这意味着您的函数定义可以从

```
genstep :: CFG sigma var -> [Either sigma var] -> [[Either sigma var]]
genstep cfg []             = -- your definition here
genstep cfg (Left  s:rest) = -- your definition here
genstep cfg (Right v:rest) = -- your definition here 
```

这足以让你开始吗？

# magento - Magento 1.7.0.2 在目录页面悬停时更改产品图片

> ID：15682097
> 
> 赞同：0
> 
> 时间：2013-03-28T12:41:09.323
> 
> 标签：magento, magento-1.7

我想更改目录页面中鼠标悬停时的产品图像，如您在此 magento 主题中所见：

[http://www.ethemeuk.com/dresscode/index.php/women-10/club-dresses.html](http://www.ethemeuk.com/dresscode/index.php/women-10/club-dresses.html)

谢谢你，我等待你的回复。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-02T09:15:51.363

如果您想在鼠标悬停和鼠标移出后显示小图像时显示缩略图，请执行以下操作：

```
app->design->frontend->default->your theme->template->catalog->product->list.pthml 
```

在此搜索此代码：

```
 <a href="<?php echo $_product->getProductUrl() ?>" title="<?php echo $this->stripTags($this->getImageLabel($_product, 'small_image'), null, true) ?>" class="product-image"><img src="<?php echo $this->helper('catalog/image')->init($_product, 'small_image')->resize(135); ?>" width="135" height="135" alt="<?php echo $this->stripTags($this->getImageLabel($_product, 'small_image'), null, true) ?>" /></a> 
```

取而代之的是这个代码： -

```
 <a href="<?php echo $_product->getProductUrl() ?>" title="<?php echo $this->stripTags($this->getImageLabel($_product, 'small_image'), null, true) ?>" class="product-image"><img src="<?php echo $this->helper('catalog/image')->init($_product, 'small_image')->constrainOnly(FALSE)->keepAspectRatio(TRUE)->keepFrame(FALSE)->resize(135); ?>" width="135" height="135" alt="<?php echo $this->stripTags($this->getImageLabel($_product, 'small_image'), null, true) ?>" onmouseover="this.src='<?php echo $this->helper('catalog/image')->init($_product, 'thumbnail')->constrainOnly(FALSE)->keepAspectRatio(TRUE)->keepFrame(FALSE)->resize(135) ?>';" onmouseout="this.src='<?php echo $this->helper('catalog/image')->init($_product, 'small_image')->constrainOnly(FALSE)->keepAspectRatio(TRUE)->keepFrame(FALSE)->resize(135) ?>';" /> 
```

现在在管理员中为缩略图和小图像分配不同的图像。当您将鼠标悬停在产品图像上时，将显示缩略图。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T12:43:58.493

```
<a href="<?php echo $_product->getProductUrl() ?>" title="<?php echo $this->stripTags($this->getImageLabel($_product, 'small_image'), null, true) ?>" class="product-image"><img src="<?php echo $this->helper('catalog/image')->init($_product, 'small_image')->constrainOnly(FALSE)->keepAspectRatio(TRUE)->keepFrame(FALSE)->resize(217); ?>" width="147" height="217" alt="<?php echo $this->stripTags($this->getImageLabel($_product, 'small_image'), null, true) ?>" onmouseover="this.src='<?php echo $this->helper('catalog/image')->init($_product, 'thumbnail')->constrainOnly(FALSE)->keepAspectRatio(TRUE)->keepFrame(FALSE)->resize(217) ?>';" onmouseout="this.src='<?php echo $this->helper('catalog/image')->init($_product, 'small_image')->constrainOnly(FALSE)->keepAspectRatio(TRUE)->keepFrame(FALSE)->resize(217) ?>';" />

</a> 
```

注意：我将图片限制为不超过 217 像素宽 - 您需要更新它以反映您的设计。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-24T11:02:48.807

对于使用 1.9 附带的 RWD 主题的任何人，请将第 59 行的标记替换为：

```
<img id="product-collection-image-<?php echo $_product->getId(); ?>"
                 src="<?php echo $this->helper('catalog/image')->init($_product, 'small_image')->keepFrame(false)->resize($_imgSize); ?>"
                 onmouseover="this.src = '<?php echo $this->helper('catalog/image')->init($_product, 'thumbnail')->constrainOnly(FALSE)->keepAspectRatio(TRUE)->keepFrame(FALSE)->resize($_imgSize) ?>';" 
                 onmouseout="this.src = '<?php echo $this->helper('catalog/image')->init($_product, 'small_image')->constrainOnly(FALSE)->keepAspectRatio(TRUE)->keepFrame(FALSE)->resize($_imgSize) ?>';"
                 alt="<?php echo $this->stripTags($this->getImageLabel($_product, 'small_image'), null, true) ?>" /> 
```

# algorithm - 线性时间和就地排序

> ID：15682100
> 
> 赞同：13
> 
> 时间：2013-03-28T12:41:30.843
> 
> 标签：algorithm, sorting, time-complexity, space-complexity, in-place

**假设 n 条记录的键在 1 到 k 的范围内。**

*   编写一个算法，在 O(n+k) 时间内对记录进行排序。
*   您可以在输入数组之外使用 O(k) 存储。
*   你的算法稳定吗？

如果我们使用计数排序，我们可以在 O(n+k) 时间内完成，并且稳定但不到位。
如果 k=2，它可以就地完成，但它不稳定（使用两个变量来维护数组中 k=0 和 k=1 的索引）
但是对于 k>2，我想不出任何好的算法

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-30T15:04:42.533

首先，让我们重新讨论计数排序的工作原理：

*   计算要排序的数组中每个键存在的频率。这些计数被写入 size 的数组`k`。
*   计算键计数的部分总和。这给出了排序数组中每个相等键的起始位置。
*   将数组中的项目移动到它们的最终位置，增加每个项目的相应 bin 的起始位置。

现在的问题是如何就地执行最后一步。就地排列的标准方法是选择第一个元素并将其与占据正确位置的元素交换。对交换的元素重复此步骤，直到我们找到属于第一个位置的元素（一个循环已完成）。然后对第二、第三等位置的元素重复整个过程，直到处理完整个数组。

计数排序的问题是最终位置不容易获得，而是通过在最终循环中增加每个 bin 的起始位置来计算的。为了永远不会将元素的起始位置增加两次，我们必须找到一种方法来确定某个位置的元素是否已经移动到那里。这可以通过跟踪每个箱的原始起始位置来完成。如果一个元素位于原始起始位置和 bin 的下一个元素的位置之间，则它已经被触摸过。

这是 C99 中的一个实现，`O(n+k)`它只需要两个大小的数组`k`作为额外的存储空间。最后的置换步骤是不稳定的。

```
#include <stdlib.h>

void in_place_counting_sort(int *a, int n, int k)
{
    int *start = (int *)calloc(k + 1, sizeof(int));
    int *end   = (int *)malloc(k * sizeof(int));

    // Count.
    for (int i = 0; i < n; ++i) {
        ++start[a[i]];
    }

    // Compute partial sums.
    for (int bin = 0, sum = 0; bin < k; ++bin) {
        int tmp = start[bin];
        start[bin] = sum;
        end[bin]   = sum;
        sum += tmp;
    }
    start[k] = n;

    // Move elements.
    for (int i = 0, cur_bin = 0; i < n; ++i) {
        while (i >= start[cur_bin+1]) { ++cur_bin; }
        if (i < end[cur_bin]) {
            // Element has already been processed.
            continue;
        }

        int bin = a[i];
        while (bin != cur_bin) {
            int j = end[bin]++;
            // Swap bin and a[j]
            int tmp = a[j];
            a[j] = bin;
            bin = tmp;
        }
        a[i] = bin;
        ++end[cur_bin];
    }

    free(start);
    free(end);
} 
```

**编辑：**`k`这是基于 Mohit Bhura 方法的仅使用单个大小数组的另一个版本。

```
#include <stdlib.h>

void in_place_counting_sort(int *a, int n, int k)
{
    int *counts = (int *)calloc(k, sizeof(int));

    // Count.
    for (int i = 0; i < n; ++i) {
        ++counts[a[i]];
    }

    // Compute partial sums.
    for (int val = 0, sum = 0; val < k; ++val) {
        int tmp = counts[val];
        counts[val] = sum;
        sum += tmp;
    }

    // Move elements.
    for (int i = n - 1; i >= 0; --i) {
        int val = a[i];
        int j   = counts[val];

        if (j < i) {
            // Process a fresh cycle. Since the index 'i' moves
            // downward and the counts move upward, it is
            // guaranteed that a value is never moved twice.

            do {
                ++counts[val];

                // Swap val and a[j].
                int tmp = val;
                val  = a[j];
                a[j] = tmp;

                j = counts[val];
            } while (j < i);

            // Move final value into place.
            a[i] = val;
        }
    }

    free(counts);
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-08-27T06:51:31.553

这是我在 O(n+k) 时间内运行的代码，并且仅使用 1 个额外的大小为 k 的数组（除了大小为 n 的主数组）

```
#include <stdio.h>
#include <string.h>

#include <stdlib.h>

int main(int argc, char const *argv[])
{
int n = atoi(argv[1]);
int k = atoi(argv[2]);

printf("%d\t%d",n,k);

int *a,*c;
int num,index,tmp,i;
a = (int*)malloc(n*sizeof(int));
c = (int*)calloc(k,sizeof(int));

srand(time(NULL));

for(i=0;i<n;i++)
{
    num =  (rand() % (k));
    a[i] = num;
    c[num]++;
}

printf("\n\nArray is : \n");
for(i=0;i<n;i++)
{
    printf("\t%d",a[i]);
    if(i%8==7)
        printf("\n");
}

printf("\n\nCount Array is : \n");
for(i=0;i<k;i++)
{
    printf("\t%d(%d)",c[i],i);
    if(i%8==7)
        printf("\n");
}

//Indexing count Array
c[0]--;
for(i=1;i<k;i++)
{
    c[i] = c[i-1] + c[i];       
}

printf("\n\nCount Array After Indexing is : \n");
for(i=0;i<k;i++)
{
    printf("\t%d(%d)",c[i],i);
    if(i%8==7)
        printf("\n");
} 

// Swapping Elements in Array
for(i=0;i<n;i++)
{
    index = c[a[i]];
    //printf("\na[%d] = %d, going to position %d",i,a[i],index);
    c[a[i]]--;
    if(index > i)
    {
        tmp = a[i];
        a[i] = a[index];
        a[index] = tmp;
        i--;
    }
}

printf("\n\n\tFinal Sorted Array is : \n\n");
for(i=0;i<n;i++)
{
    printf("\t%d",a[i]);
    if(i%8==7)
        printf("\n");
}

printf("\n\n");

return 0;
} 
```

即使这个算法也不稳定。所有元素的顺序相反。

Ps : 键在 0 到 (k-1) 的范围内

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-03T06:47:38.717

整数值序列的示例。排序不稳定。虽然它不像 Mohit 提供的答案那么简洁，但通过跳过已经在正确 bin 中的元素（时间渐近相同），它的速度略快（对于 k << n 的常见情况）。在实践中，我更喜欢 Mohit 的排序，因为它的循环更紧凑、更简单。

```
def sort_inplace(seq):
    min_ = min(seq)
    max_ = max(seq)
    k = max_ - min_ + 1
    stop = [0] * k
    for i in seq:
        stop[i - min_] += 1
    for j in range(1, k):
        stop[j] += stop[j - 1]
    insert = [0] + stop[:k - 1]
    for j in range(k):
        while insert[j] < stop[j] and seq[insert[j]] == j + min_:
            insert[j] += 1
    tmp = None
    for j in range(k):
        while insert[j] < stop[j]:
            tmp, seq[insert[j]] = seq[insert[j]], tmp
            while tmp is not None:
                bin_ = tmp - min_
                tmp, seq[insert[bin_]] = seq[insert[bin_]], tmp
                while insert[bin_] < stop[bin_] and seq[insert[bin_]] == bin_ + min_:
                    insert[bin_] += 1 
```

使用更紧密的循环但仍然跳过已经重新定位的元素：

```
def dave_sort(seq):
    min_ = min(seq)
    max_ = max(seq)
    k = max_ - min_ + 1
    stop = [0] * k

    for i in seq:
        stop[i - min_] += 1

    for i in range(1, k):
        stop[i] += stop[i-1]
    insert = [0] + stop[:k - 1]

    for meh in range(0, k - 1):
        i = insert[meh]
        while i < stop[meh]:
            bin_ = seq[i] - min_
            if insert[bin_] > i:
                tmp = seq[insert[bin_]]
                seq[insert[bin_]] = seq[i]
                seq[i] = tmp
                insert[bin_] += 1
            else:
                i += 1 
```

编辑：Mohit 在 Python 中的方法带有额外的位来验证对排序稳定性的影响。

```
from collections import namedtuple
from random import randrange

KV = namedtuple("KV", "k v")

def mohit_sort(seq, key):
    f = lambda v: getattr(v, key)
    keys = map(f, seq)
    min_ = min(keys)
    max_ = max(keys)
    k = max_ - min_ + 1
    insert = [0] * k

    for i in keys:
        insert[i - min_] += 1

    insert[0] -= 1
    for i in range(1, k):
        insert[i] += insert[i-1]

    i = 0
    n = len(seq)
    while i < n:
        bin_ = f(seq[i])
        if insert[bin_] > i:
            seq[i], seq[insert[bin_]] = seq[insert[bin_]], seq[i]
            i -= 1
        insert[bin_] -= 1
        i += 1

def test(n, k):
    seq = []
    vals = [0] * k
    for _ in range(n):
        key = randrange(k)
        seq.append(KV(key, vals[key]))
        vals[key] += 1
    print(seq)
    mohit_sort(seq, "k")
    print(seq)

if __name__ == "__main__":
    test(20, 3) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-06-26T16:00:47.057

我真的不知道为什么这里发布的所有源代码都如此不必要地复杂化。
这是一个python解决方案：

```
def inplaceCtsort(A):
    b, e = min(A), max(A)
    nelems = e - b + 1
    CtsBeforeOrIn = [0]*nelems
    for i in A:
        CtsBeforeOrIn[i-b] += 1
    for i in range(1, nelems):
        CtsBeforeOrIn[i] += CtsBeforeOrIn[i-1]
    for i in range(0, len(A)):
        while i < CtsBeforeOrIn[A[i]-b] - 1:
            validPosition = CtsBeforeOrIn[A[i]-b] - 1
            A[i], A[validPosition] = A[validPosition], A[i]
            CtsBeforeOrIn[A[i]-b] -= 1 
```

# mysql - 使用外部 mysql 数据库

> ID：15682109
> 
> 赞同：0
> 
> 时间：2013-03-28T12:41:39.620
> 
> 标签：mysql, external

我只能在我当前的主机上创建一个已经制作好的数据库。问题是我需要另一个。

所以我的问题是，是否可以将我的文件上传到第一台主机，然后注册另一台可以选择创建 mysql 数据库的主机，然后将该数据库连接到我的第一台主机？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T12:47:25.450

您可能应该添加更多表，但在它们上使用表前缀以保持它们井井有条并且看起来不凌乱。也许您的表可能看起来像 opencart_users、opencart_items、otherapplication_users、otherapplication_pages 等，大多数 CMS 开箱即用地支持这样的东西。

获得另一个支持 MySQL 的主机，虽然*可能*，但绝对不是最好的主意，因为您可能会通过更大的网络（甚至可能是 Internet）发送每个 MySQL 查询，这可能会导致严重的性能（和安全）问题.

# web-applications - 无法在脚本化 Web 应用程序中创建发布网站集

> ID：15682118
> 
> 赞同：1
> 
> 时间：2013-03-28T12:42:03.703
> 
> 标签：web-applications, sharepoint-2013, sitecollection

我的 SharePoint 2013 服务器场出现问题。我有一个脚本可以在我的场中创建 Web 应用程序，但是当我这样做时，我无法在该 Web 应用程序中创建发布网站集。（最初发布在这里：[https ://sharepoint.stackexchange.com/questions/64308/fails-to-create-publishing-site-collection-in-scripted-web-application](https://sharepoint.stackexchange.com/questions/64308/fails-to-create-publishing-site-collection-in-scripted-web-application)

因此，环境设置如下：

1.  我们正在为应用程序使用主机头。
2.  我们在注册表中设置了 BackConnectionHostNames。
3.  现在我们使用 Farm 管理员帐户来运行应用程序池。
4.  我们有 mysites 设置并且显然工作。
5.  没有设置搜索。
6.  我们有一个内容类型中心设置并且显然可以工作。

所以，症状在我看来是这样的：

1.  当我从脚本创建基于主机标头的新 Web 应用程序时，我无法在它中创建发布网站集。当我通过 GUI 创建发布网站集时，它会说“正在处理它”一段时间，然后在仍然旋转“正在处理它”时向我显示一个错误。在事件日志中有这样的阅读：

    ```
    Event log message was: 'The site template was not provisioned successfully. Delete this
    site collection in Central Administration, and then create a new site collection.'. 
    Exception was: 'Microsoft.SharePoint.SPException: Provisioning did not succeed. Details:  
    Failed to initialize some site properties for Web at Url: '' 
    OriginalException: Access is denied. (Exception from HRESULT: 0x80070005 
    (E_ACCESSDENIED)) ---> System.UnauthorizedAccessException: Access is denied. (Exception
    from HRESULT: 0x80070005 (E_ACCESSDENIED)) 
    ```

2.  如果我从 Central Admin GUI 创建了 Web 应用程序，我可以在其中成功地创建一个发布门户。

3.  如果我使用我的脚本创建了 Web 应用程序，我可以成功地创建一个团队网站。

下面是我的脚本，任何人都可以看到这显然有问题吗？我是否忘记了 CA GUI 处理的某些内容？

```
$ver = $host | select version
if ($ver.Version.Major -gt 1)  {$Host.Runspace.ThreadOptions = "ReuseThread"}
Add-PsSnapin Microsoft.SharePoint.PowerShell -ErrorAction SilentlyContinue
Import-Module WebAdministration -ErrorAction SilentlyContinue

Function CreateWebApplication($WebApplicationURL, $HttpPort, $WebApplicationName,     
                              $ContentDatabase, $ApplicationPoolDisplayName,  
                              $ApplicationPoolIdentity, $ApplicationPoolPassword, 
                              $PortalSuperReader, $PortalSuperUser) {

Write-Progress -Activity "Creating Web Application" -Status "Creating Web Application $WebapplicationURL"

if($WebApplicationURL.StartsWith("http://")) 
{ 
    $HostHeader = $WebApplicationURL.Substring(7) 
    $HTTPPort = "80" 
} 
elseif($WebApplicationURL.StartsWith("https://")) 
{ 
    $HostHeader = $WebApplicationURL.Substring(8) 
    $HTTPPort = "443" 
}

$AppPoolManagedAccount = Get-SPManagedAccount $ApplicationPoolIdentity

$AuthenticationProvider = New-SPAuthenticationProvider –UseWindowsIntegratedAuthentication
#Create a new web application using the existing parameters, assign it to the WebApp variable such that object cache user accounts can be configured
$WebApp = New-SPWebApplication -ApplicationPool $ApplicationPoolDisplayName -ApplicationPoolAccount $AppPoolManagedAccount.Username -AuthenticationProvider $AuthenticationProvider -Name $WebApplicationName -url $WebApplicationURL -port $HTTPPort -DatabaseName $ContentDatabase -HostHeader $HostHeader

Write-Progress -Activity "Creating Web Application" -Status "Configuring Object Cache Accounts"

#Assign Object Cache Accounts
$WebApp.Properties["portalsuperuseraccount"] = $PortalSuperUser
$WebApp.Properties["portalsuperreaderaccount"] = $PortalSuperReader

Write-Progress -Activity "Creating Web Application" -Status "Creating Object Cache User Policies for Web Application"

#Create a New Policy for the Super User
$SuperUserPolicy = $WebApp.Policies.Add($PortalSuperUser, "Portal Super User Account")
#Assign Full Control To the Super User

$SuperUserPolicy.PolicyRoleBindings.Add(
    $WebApp.PolicyRoles.GetSpecialRole(
    [Microsoft.SharePoint.Administration.SPPolicyRoleType]::FullControl))

#Create a New Policy for the Super Reader
$SuperReaderPolicy = $WebApp.Policies.Add($PortalSuperReader, "Portal Super Reader Account")
#ASsign Full Read to the Super Reader
$SuperReaderPolicy.PolicyRoleBindings.Add(
$WebApp.PolicyRoles.GetSpecialRole(
[Microsoft.SharePoint.Administration.SPPolicyRoleType]::FullRead))

Write-Progress -Activity "Creating Web Application" -Status "Updating Web Application Properties"

#Commit changes to the web application
$WebApp.update()

}

CreateWebApplication "http://add.ress.lan" 80 "Intranet 3"
"sp_intranet3_content" "Intranet3 Pool" "sp_farm" "P4sswd!" 
"sp_superreader" "sp_superuser" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-18T06:23:41.413

尝试以管理员身份从 SharePoint 命令行管理程序运行。我的脚本非常相似。确保 AD 中存在 SuperUser 和 SuperReader 帐户。

在错误中，URL 为空白。

您的脚本是创建经典模式 Web 应用程序，而不是基于声明的 Web 应用程序。

# java - 临时更改可绘制颜色

> ID：15682127
> 
> 赞同：6
> 
> 时间：2013-03-28T12:42:26.017
> 
> 标签：java, android

在我正在开发的一个应用程序中，我试图以编程方式创建一个`ImageButton`selected 的副本`ImageButton`，但图像以不同的方式着色，比如说红色。

如果我使用`PowerDuff.Mode.MULTIPLY`：

```
clonebutton.getDrawable().setColorFilter(0xFFFF0000,Mode.MULTIPLY); 
```

然后即使是原件也`ImageButton`将其颜色变为红色，因为它们共享相同的`drawable`. 有没有办法只在 clonebutton 上应用过滤器而不使用两个不同的`drawables`？例如，是否可以在不编辑的情况下以某种方式在 clonebutton 顶部放置一个着色层`drawable`？

**更新** 我将drawable设置为可变：

```
Drawable d = swipebutton.getDrawable();
d.mutate();
d.setColorFilter(0xFFFF0000,Mode.MULTIPLY);
swipebutton.setImageDrawable(d); 
```

这可以防止我的 clonebutton 将其状态共享`drawable`给其他`views`.

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-28T12:45:56.630

```
Drawable buttonBackground = clonebutton.getDrawable();
buttonBackground = buttonBackground.mutate();
buttonBackground.setColorFilter(0xFFFF0000,Mode.MULTIPLY); 
```

> 使这个drawable可变。此操作无法撤消。保证可变的可绘制对象不会与任何其他可绘制对象共享其状态。当您需要修改从资源加载的可绘制对象的属性时，这尤其有用。默认情况下，从同一资源加载的所有可绘制实例共享一个公共状态；如果您修改一个实例的状态，所有其他实例将收到相同的修改。在可变的 Drawable 上调用此方法将无效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-09T17:11:12.057

在 Lollipop 上，如果您不想这样做，则根本不必执行此程序化操作，即颜色过滤器。您只需在 xml 可绘制对象上设置色调即可。

```
<?xml version="1.0" encoding="utf-8"?>
<bitmap
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:src="@drawable/ic_back"
    android:tint="@color/red_tint"/> 
```

如果您有无限数量的颜色，这可能不起作用，但如果颜色有限，这是一个非常好的选择。[查看我的博客文章了解更多信息](http://toastdroid.com/2014/12/06/byte-of-toast-tinting-drawables-on-lollipop/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T12:45:33.283

```
Drawable d=clonebutton.getDrawable()
d.setColorFilter(0xFFFF0000,Mode.MULTIPLY);
clonebutton.setDrawable(d); 
```

试试这个：或根据您的需要使用以下代码

```
 switch(v.getId())
{
case R.id.bt1:
    Drawable d=b11.getBackground();
    d.setColorFilter(Color.CYAN,PorterDuff.Mode.MULTIPLY);

    b11.setBackgroundDrawable(d);
    b12.setBackgroundResource(android.R.drawable.btn_default);
break;

case R.id.bt2:
//b2.getBackground().setColorFilter(Color.CYAN,PorterDuff.Mode.MULTIPLY);
Drawable dd=b12.getBackground();
dd.setColorFilter(Color.CYAN,PorterDuff.Mode.MULTIPLY);

b12.setBackgroundDrawable(dd);
b11.setBackgroundResource(android.R.drawable.btn_default);
break;
} 
```

[onclick后切换按钮颜色](https://stackoverflow.com/questions/12106262/switching-color-of-buttons-after-onclick/12106856#12106856)

# fiddler - 如何在通过 Fiddler 发送的请求中设置断点？

> ID：15682129
> 
> 赞同：4
> 
> 时间：2013-03-28T12:42:32.550
> 
> 标签：fiddler

在提琴手中，如何在请求到达主机之前终止请求。例如，我发送一个请求，我想在该请求中放置一个断点，这样我就无法接收到响应。基本上，我想在响应返回给原始调用者之前检查响应，以及如果连接丢失或请求无法到达服务器的其他终止，我的服务的行为方式。任何答案都非常感谢。抱歉有任何缺陷，我是使用 Fiddler 的新手。:)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-28T20:27:03.403

Fiddler 提供了几种干扰请求的机制。如果您的目标是简单地终止请求而不返回响应，您可以在 Fiddler 的 AutoResponder中创建一个带有***drop**或***reset规则的 Action 规则。**

`*drop`将立即关闭客户端连接而不发送响应。关闭在 TCP/IP 级别是优雅的，向客户端返回一个 FIN。

`*reset`将立即关闭客户端连接而不发送响应。关闭在 TCP/IP 级别是突然的，向客户端返回一个 RST。

或者，您可以让 Fiddler 返回任何 HTTP/4xx 或 HTTP/5xx 给客户端。

最后，您可以使用**断点**来允许您在将请求发送到服务器之前手动操作请求，和/或在将请求发送到客户端之前操作服务器的响应。使用`bpu`QuickExec 框中的命令来中断给定的 URL（例如`bpu sample.asp`）。

# javascript - 在javascript中通过ID查找元素

> ID：15682131
> 
> 赞同：0
> 
> 时间：2013-03-28T12:42:39.873
> 
> 标签：javascript

有一个包含锚标记的段落，我想在javascript中使用id获取元素：

```
<p>Please visit <a id="myblog" href="/myblog/"> My Blog </a></p> 
```

我在 .js 文件中使用以下代码来获取标签：

```
var target = document.getElementById("myblog"); 
```

结果目标是空的？为什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-28T12:44:30.530

最可能的解释是您的脚本是在相关元素添加到页面之前运行的。

最简单的解决方案是将您的脚本放在页面末尾的`</body>`标记之前。

# android - 在按钮上单击自动删除选定的微调器项目

> ID：15682139
> 
> 赞同：0
> 
> 时间：2013-03-28T12:43:10.330
> 
> 标签：android, adapter, android-spinner

我有一个显示我的数组数据列表和删除按钮的微调器。我想要做的是当我单击删除按钮时，它会自动删除选定的微调器值，但我不确定如何执行此操作。

在删除按钮单击功能中，再次调试我的活动后删除了选定的微调器值，但我想在单击删除按钮时自动删除选定的微调器值。

```
package quesansw.the1;

import java.util.ArrayList;
import android.app.Activity;
import android.app.Dialog;
import android.database.Cursor;
import android.database.sqlite.SQLiteDatabase;
import android.net.NetworkInfo.State;
import android.os.Bundle;
import android.view.View;
import android.view.Window;
import android.view.WindowManager;
import android.widget.AdapterView;
import android.widget.ArrayAdapter;
import android.widget.Button;
import android.widget.EditText;
import android.widget.Spinner;
import android.widget.AdapterView.OnItemSelectedListener;

public class View1 extends Activity { 
    SQLiteDatabase db;
    ArrayAdapter adapter; 
    private String array_spinner[];

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        db = openOrCreateDatabase("mydatabase.db",
                SQLiteDatabase.CREATE_IF_NECESSARY, null);

        final Dialog d1 = new Dialog(this);
        Window window = d1.getWindow();
        window.setFlags(WindowManager.LayoutParams.FLAG_BLUR_BEHIND,
                WindowManager.LayoutParams.FLAG_BLUR_BEHIND);

        //d1.setTitle("Login");

        d1.setContentView(R.layout.view);
        d1.show();
        Button Click = (Button) d1.findViewById(R.id.Click);
        Button Save = (Button) d1.findViewById(R.id.Save);
        Button Delete = (Button) d1.findViewById(R.id.Delete);

        ArrayList<String> list = new ArrayList<String>();
        Cursor cursor = db.rawQuery("select * from records", null);
        list.add("");
        if (cursor.moveToFirst())
        {
            do
            {
                list.add(cursor.getString(0));
            }
            while (cursor.moveToNext());
        }

        /*array_spinner=new String[20];
        array_spinner[0]=list.get(0);*/
        Spinner s = (Spinner) d1.findViewById(R.id.tittle_spinner);
        adapter = new ArrayAdapter<Object>(this,android.R.layout.simple_spinner_item, list.toArray());

        adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
        s.setAdapter(adapter);

        /*Save.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {

                Spinner s = (Spinner) d1.findViewById(R.id.tittle_spinner);
                String str = s.getSelectedItem().toString();
                System.out.println("********"+str);
                Cursor cur1=db.rawQuery("select * from records where tittle='"+str+"' ",null);
                cur1.moveToNext();
                String str1=cur1.getString(1);

                EditText ans = (EditText) d1.findViewById(R.id.text);
                ans.setText(str1);

            }
            });*/

        Delete.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {

                Spinner s = (Spinner) d1.findViewById(R.id.tittle_spinner);
                String str = s.getSelectedItem().toString();
                db.execSQL("delete from records where tittle='"+str+"' ");

            }
            });

        Click.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {

                Spinner s = (Spinner) d1.findViewById(R.id.tittle_spinner);
                String str = s.getSelectedItem().toString();
                System.out.println("********"+str);
                Cursor cur1=db.rawQuery("select * from records where tittle='"+str+"' ",null);
                cur1.moveToNext();
                String str1=cur1.getString(1);

                EditText ans = (EditText) d1.findViewById(R.id.text);
                ans.setText(str1);

            }
            });
    }
} 
```

1）这是我的活动截图

![活动截图](../Images/cb9c3b3f31d065d063b364265870526d.png)

2）另一个带有微调器值的屏幕截图：

![微调器值](../Images/7b0c15ac86baa1536682cf99bf7b1f9b.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T13:03:57.077

在 deleteButton 的 onClickListener 中，从数组数据列表中删除选定的微调器值，并在删除后使用新的数组列表调用 onnotifydatasetChanges 或再次 setSpinner 适配器。

```
public class MainActivity extends Activity {

Spinner spin;
Button delete;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    delete  = (Button) findViewById(R.id.button1);
    spin = (Spinner) findViewById(R.id.spinner1);

    final ArrayList<String> spinneritems = new ArrayList<String>();

    spinneritems.add("item 1");
    spinneritems.add("item 2");
    spinneritems.add("item 3");
    spinneritems.add("item 4");
    spinneritems.add("item 5");

    final ArrayAdapter<String> adp = new ArrayAdapter<String>(this,android.R.layout.simple_spinner_item,spinneritems );
    adp.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    spin.setAdapter(adp);

    delete.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {

            String selectedSpinner = spin.getSelectedItem().toString();
            spinneritems.remove(selectedSpinner);
            adp.notifyDataSetChanged();
        }
    });
}
}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T13:05:17.727

你为什么要`Spinner`多次声明和初始化你的？只做一次

```
public class View1 extends Activity { 
    SQLiteDatabase db;
    ArrayAdapter adapter; 
    private String array_spinner[];
    Spinner spinner;               // Declare your spinner here 
```

然后在`onCreate()`

```
public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        db = openOrCreateDatabase("mydatabase.db",
            SQLiteDatabase.CREATE_IF_NECESSARY, null);
        spinner = (Spinner) d1.findViewById(R.id.tittle_spinner);  //initialize your spinner here

        final Dialog d1 = new Dialog(this); 
```

然后当您单击`delete button`呼叫`adapter.notifyDataSetChanged()`以更新您的`Array`和微调器时

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T13:21:27.657

在删除按钮上单击侦听器添加以下代码

```
Spinner s = (Spinner) d1.findViewById(R.id.tittle_spinner);
String str = s.getSelectedItem().toString();
adapter.remove(str);
adapter.notifyDataSetChanged();
s.setSelection(0); 
```

# java - 适用于平板电脑的 Android 应用分辨率

> ID：15682140
> 
> 赞同：0
> 
> 时间：2013-03-28T12:43:10.620
> 
> 标签：java, android, eclipse

我最近将我的应用程序添加到 google play 商店。它设置了以下分辨率。

```
layout-sw600,
layout-sw720 
```

但是似乎 google play 并没有让这个应用程序不支持 800*1280 设备。我怎样才能把决议？仅仅通过layout-sw800？根据在android教程中支持多个屏幕，似乎也有hdpi等。这一切都令人困惑，任何人都可以解释一下吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T12:58:00.433

如果要为 800*1280 创建特定布局，则可以使用以下布局目录名称。

```
Xoom (medium density large but 1280x800 res) (160 dpi):

layout-xlarge (800 x 1280)
layout-xlarge-land (1280 x 800) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T13:02:58.303

我所做的是将文件夹命名为：

> layout-xlarge-mdpi ---> 用于 10.1 英寸标签。
> 
> layout-large-hdpi ---> 用于 7 英寸高密度标签。
> 
> layout-large-mdpi ---> 用于中等密度的 7 英寸标签。

当然，您可以在 dpi 之后添加分辨率。

# delphi - 帕斯卡集行为怪异

> ID：15682141
> 
> 赞同：3
> 
> 时间：2013-03-28T12:43:11.913
> 
> 标签：delphi, pascal

我不明白为什么这段代码不能正常工作：

```
program selection;
var 
    n : integer;
begin
    readln(n);
    if (n in [100..1000]) then writeln('Selected!');
    readln;
end. 
```

这对我来说适用于 1 到 233 之间的值，如果我输入 233 或更多，writeln.. 不会被执行。这很奇怪。我也尝试过其他值，结果或多或少相同，唯一不同的是它失败的值。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-28T12:52:01.410

Delphi 集最多只能达到 255 个；最大值为 1000 的集合不起作用。我对您编译的代码感到有些惊讶。

当截断为 8 位时，值 1000 为 232，这解释了为什么大于该值的值会失败。

相反，您可以使用该[`InRange`](http://docwiki.embarcadero.com/Libraries/en/System.Math.InRange)功能；它像集合构造函数一样使用封闭范围。

```
if InRange(n, 100, 1000) then ... 
```

您还可以使用普通的旧不等式运算符来测试该值是否在给定范围内：

```
if (100 <= n) and (n <= 1000) then ... 
```

最后，您可以使用`case`语句。案例语句选择器不是集合，因此它们不受与集合相同的规则的约束。

```
case n of
  100..1000: begin ... end;
end; 
```

缺点是当只有一个 case 分支时，它看起来有点笨拙。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-28T14:43:23.827

[Rob 解释](https://stackoverflow.com/questions/15682141/pascal-set-acts-weirdly/15684774#15682315)了为什么你不能使用 Delphi 集来满足你的需要。我还要强调 a`set`是一种非常重量级的类型，用于存储相当于间隔的内容。一旦认识到这一点，就可以使用类似`InRange`在间隔上运行的函数。

作为一个有趣的练习，您可以编写一个表示区间的简单记录。然后您可以使用运算符重载来实现一个`in`将测试区间包含的运算符。这使您可以使用可读的符号，并自然存储一段时间。当然，元素大小没有限制。

这是一个简单的演示：

```
{$APPTYPE CONSOLE}

type
  TInterval = record
  public
    Low: Integer;
    High: Integer;
  public
    class operator In(const Value: Integer; 
      const Interval: TInterval): Boolean; inline;
  end;

class operator TInterval.In(const Value: Integer; 
   const Interval: TInterval): Boolean;
begin
  Result := (Value>=Interval.Low) and (Value<=Interval.High);
  // or implement with a call to Math.InRange()
end;

function Interval(Low, High: Integer): TInterval; inline;
begin
  Result.Low := Low;
  Result.High := High;
end;

begin
  Writeln(25 in Interval(10, 100));
  Writeln(125 in Interval(10, 100));
  Writeln(2500 in Interval(1000, 10000));
  Writeln(12500 in Interval(1000, 10000));
  Readln;
end. 
```

# html - Twitter Bootstrap - 无法让 Carousel 更改图像

> ID：15682142
> 
> 赞同：1
> 
> 时间：2013-03-28T12:43:18.057
> 
> 标签：html, twitter-bootstrap

我已经复制了下面的 HTML - 我不知道为什么，但是当我在浏览器中打开它时，它卡在第一个图像上并且不会转换......我已经包含了我的 html 下面的所有代码。CSS 和 JS 文件是提供的通用引导文件。

```
<!DOCTYPE html>
<html>
<head>
<title>Bootstrap test site</title>

<link rel="stylesheet" href="css/bootstrap.css" type="text/css">

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script src="js/bootstrap.js"></script>

<script>
    $(document).ready(function(){
        $('.carousel').carousel();
    });
    </script>

</head>

<body>
    <div class="container">

    <div class="span8"> <img src="img/logo_title.png"> </div> 

        <div>

            <div id="this-carousel-id" class="carousel slide">
              <div class="carousel-inner">
                <div class="item active">
                  <img src="http://placehold.it/1200x480" alt="" />
                  <div class="carousel-caption">
                    <p>Caption text here1</p>
                  </div>
                </div>
                <div class="item">
                  <img src="http://placehold.it/1200x480" alt="" />
                  <div class="carousel-caption">
                    <p>Caption text here2</p>
                  </div>
                </div>
                <div class="item">
                  <img src="http://placehold.it/1200x480" alt="" />
                  <div class="carousel-caption">
                    <p>Caption text here3</p>
                  </div>
                </div>
                <div class="item">
                  <img src="http://placehold.it/1200x480" alt="" />
                  <div class="carousel-caption">
                    <p>Caption text here4</p>
                  </div>
                </div>
              </div><!-- /.carousel-inner -->
              <!--  Next and Previous controls below
                    href values must reference the id for this carousel -->
                <a class="carousel-control left" href="#this-carousel-id" data-slide="prev">&lsaquo;</a>
                <a class="carousel-control right" href="#this-carousel-id" data-slide="next">&rsaquo;</a>
            </div><!-- /.carousel -->
        </div>  

    </div>

<script src="js/bootstrap.js"></script>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T13:00:45.617

对于引导程序中的任何 JS 库，请确保包含实际的库。在您的情况下，您忽略了轮播库。其他需要单独 js 文件的 Bootstrap 插件包括模式、下拉菜单和工具提示。将其添加到：

```
 <script src="/js/bootstrap-carousel.js"></script>
<script src="/js/jquery.js"></script> 
```

您还两次包含 bootstrap.js。

# sublimetext2 - Sublime Text 2“在文件中查找”在底部打开抽屉而不是在选项卡中显示结果

> ID：15682143
> 
> 赞同：32
> 
> 时间：2013-03-28T12:43:19.040
> 
> 标签：sublimetext2

在这方面需要帮助！当我过去使用“在文件中查找”功能时，它会在选项卡中显示结果，以便我以后可以回去参考它。

出于某种原因，有一天它切换了结果，结果在 sublime 窗口底部的抽屉中打开。

1.  这并不理想，因为它占用了窗口空间。
2.  每次我需要参考结果时都必须去切换结果面板，这很烦人。如果它在标签中会容易得多。

我试过查看我所有的偏好，但似乎没有什么不同，所以我迷失了这个。

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2013-03-28T16:16:04.113

找到了！原来它是“在文件中查找”上的“使用缓冲区”按钮，看起来我在搜索时错误地点击了它。

# c++ - 用于为迭代器 + n 抛出 out_of_range 的 GCC 选项

> ID：15682149
> 
> 赞同：2
> 
> 时间：2013-03-28T12:43:34.117
> 
> 标签：c++, iterator, g++

假设我有以下代码：

```
std::vector< int > from( 5 );
std::vector< int > to( 10 );
std::copy( from.begin(), from.begin() + 10, to.begin() ); 
```

或者它也许

```
std::vector< int >::iterator e = from.begin();
std::advance( e, 10 );
std::copy( from.begin(), e, to.begin() ); 
```

当我在调试模式下使用 Visual Studio 运行它时，我得到一个断言失败，并显示文本“迭代器超出范围”。当我使用 GCC - [LWS 链接](http://liveworkspace.org/code/jgipc%245)运行它时- 我什么也没得到，但工作不正确。

现在的问题是：是否有 GCC 选项可以打开运行时比较迭代器以获得正确的范围，或者抛出适当的异常，或者`assert`在迭代器超出范围时调用。

PS我清楚地知道，该代码**不**正确，可能有UB。而且我知道如何纠正它，但我希望 GCC 将来能帮助我））

# wcf - 在 Biztalk 动态请求请求响应端口中将 http 服务转换为 https

> ID：15682151
> 
> 赞同：0
> 
> 时间：2013-03-28T12:43:38.880
> 
> 标签：wcf, http, https, biztalk

我遇到了一个非常奇怪的职位，我正在 BizTalk 中开展一个项目，最初我不得不使用部署在**http**上的 WCF 服务。现在做了很多工作。他们刚刚将绑定更新为**https**。现在我有什么选择。我如何改变我的编排。当我尝试更新服务发送端口（**http 到 https**）。我在 Biztalk 上收到以下错误消息。

![在此处输入图像描述](../Images/f8cdc98537b656f70257de7f8b8c40ab.png)

请指导我如何解决这个问题。

问候，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T05:04:25.333

如果要使用 ，则需要将选项卡中的`Security mode`属性更改为（或）。`Security``Transport``TransportWithMessageCredential``https`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T01:08:47.943

我相信您需要使用另一种端口类型，例如 WCF-Custom。

# entity-framework - LINQ To Entities“无法为可组合函数创建函数导入”

> ID：15682154
> 
> 赞同：0
> 
> 时间：2013-03-28T12:43:46.473
> 
> 标签：entity-framework, linq-to-entities

我的 SQL Server 中有一个标量值函数，它根据文本条目**(varchar(max))返回一个 ID** **(int)**，该函数用于返回某个序列号的产品 SKU ID)。

 **这是 SQL 函数。

```
CREATE function [dbo].[fGetPSKU]
(
  @SerialNumber varchar(MAX)
)
returns int
begin

  /*
    local variables  
  */
  declare cmodel cursor local for
    select PSKU.ProductSKUID, PSKU.ProductSKUValadationStart, PSKU.ProductSKUValadationEnd, PSKU.ProductSKUValadationMask, PSKU.PruductSKUValadationLength
      from SCM.dbo.ProductSKU PSKU
      where PSKU.ProductSKUActive = 0
        and PSKU.ProductSKURequiresValadation = 1
      order by PSKU.ProductSKUValadationEnd - PSKU.ProductSKUValadationStart desc, len(PSKU.ProductSKUValadationMask) desc, PSKU.ProductSKUDateCreated desc, PSKU.ProductSKUID desc
  declare @mid int
  declare @mstart int
  declare @mend int
  declare @masks varchar(max)
  declare @lengths varchar(255)
  declare @found int
  declare @model int

  /* 
    main code 
  */
  set @found = 0
  set @model = -1

  open cmodel

  fetch next from cmodel into @mid, @mstart, @mend, @masks, @lengths

  while @@fetch_status = 0 and @found = 0
  begin

    if exists
      (
        select null
          from SCM..fParseDelimited(@masks, ',')
          where ids = substring(@SerialNumber, @mstart, @mend - @mstart + 1)
      )
      and exists
      (
        select null
          from SCM..fParseDelimited(@lengths, ',')
          where ids = convert(varchar, len(@SerialNumber))
      )
    begin
      set @found = 1
      set @model = @mid

    end

    fetch next from cmodel into @mid, @mstart, @mend, @masks, @lengths

  end

  close cmodel

  return @model

end 
```

在我的实体框架上导入它后，我会收到以下错误：当我尝试创建函数导入时，**无法为可组合函数创建函数导入。**我已经阅读了这篇类似**[的帖子](https://stackoverflow.com/questions/5866705/function-imports-cannot-be-created-for-composable-functions)** ，但不清楚在 EF 中创建的位置和内容以成功执行该功能。

任何建议/帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T13:01:02.050

您需要将功能导入添加到 EDMX 的 SSDL 部分。如果您使用 XML 编辑器打开 EDMX，您将看到 EDMX 由三个部分组成：

*   固态硬盘
*   CSDL
*   CS 映射

SSDL 在`edm:StorageModels`节点内部。这就是您需要添加函数导入的地方。如果您在 Visual Studio 中以 XML 格式打开 EDMX 文件，您将获得 IntelliSense，显示您可以添加一个 Function 节点。**

# asp.net-mvc - 创建自定义多项目 MVC 4 Web 应用程序模板 vs2012 中的问题

> ID：15682155
> 
> 赞同：0
> 
> 时间：2013-03-28T12:43:51.570
> 
> 标签：asp.net-mvc, asp.net-mvc-4, visual-studio-2012, vsix, project-template

我正在研究具有 1\. 4 个类库项目 2\. 一个 MVC 4 Web 应用程序的自定义多解决方案项目结构。

我已经在 VSIX 包中构建了多解决方案结构。直到这里一切都很好。

安装 VSIX 后，我可以在 Visual Studio 2012 项目中看到我的多解决方案项目类型。

当我尝试从中创建时，它会在为 MVC 4 应用程序的“\Content\themes\base\images”中存在的每个图像创建时显示以下错误

“在项目模板中找不到文件 ui-bg_flat_75_ffffff_40x100.png。继续运行，但生成的项目可能无法正确构建”

尽管我将所有图像都作为 WEB 项目模板的一部分。

有什么建议么

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-28T14:54:54.127

验证项目模板中的图像是否已`Build Action`设置为*Content*并`Include in VSIX`设置为*True*。此外，在您的 vstemplate 文件中验证图像是否作为*ProjectItem*包含在正确的文件夹中。

或者，如果您将 JQuery UI 作为 Nuget 包包含在内，则可以将该包安装为模板的一部分。然后，您甚至不需要将图像包含在您的 vsix 中。[http://docs.nuget.org/docs/reference/packages-in-visual-studio-templates](http://docs.nuget.org/docs/reference/packages-in-visual-studio-templates)

# reporting-services - 将字段参数发送到 SSRS 操作链接

> ID：15682158
> 
> 赞同：3
> 
> 时间：2013-03-28T12:44:08.743
> 
> 标签：reporting-services

我试图将字段参数传递给 SSRS 中的操作链接，例如 [http://mysite.aspx?id=](http://mysite.aspx?id=) "+Fields!ID.Value

但它的意思是，输入字符串的格式不正确。当我尝试使用[http://mysite.aspx?id=10(10](http://mysite.aspx?id=10(10)是静态的不是动态的) 格式时。它没有显示任何错误。

请告诉我我能做什么，因为我对这个问题很感兴趣。

在此先感谢，拉加瓦。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-28T12:54:07.633

右键单击要创建超链接的字段并选择`TextBox Properties`，然后转到`Action`出现的弹出窗口中的选项卡。

并选择`Go To Url`选项并单击表达式并设置以下给定表达式。

```
="http://mysite.aspx?id=" & Fields!ID.Value 
```

它应该工作。

![在此处输入图像描述](../Images/a79ea55ce7c8283ecc2ee92641341f60.png)

# iphone - iPhone-从我的应用程序 iOS 6 打开设置

> ID：15682164
> 
> 赞同：18
> 
> 时间：2013-03-28T12:44:17.380
> 
> 标签：iphone, ios, objective-c

我知道有很多与此相关的问题。

1)[是否可以使用 openURL 打开设置应用程序？](https://stackoverflow.com/questions/1090373/is-it-possible-to-open-settings-app-using-openurl)

2）[从另一个应用程序打开设置应用程序](https://stackoverflow.com/questions/5655674/opening-the-settings-app-from-another-app)

3) [iOS 启动设置 -> 限制 URL 方案](https://stackoverflow.com/questions/8246070/ios-launching-settings-restrictions-url-scheme)

我已按照这些问题作为参考，但这并不能解决我的问题。我知道使用`openURL`方法可以打开设置，但这仅适用于 iOS 5.0 - 5.0.1。在 iOS 5.1 中，它已被弃用。

```
 [[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"prefs://"]]; 
```

我仍然看到很多应用程序主要是基于位置的，它们要求用户允许打开位置服务并在**设置->隐私**下直接进入**位置服务。**下面是安装在运行 iOS 6.1 的设备上的 App 的屏幕截图，显示点击 Settings 可以直接进入**Location Services**。

 ****我试图在我的应用程序中运行代码，但它不起作用（我想将用户带到设置页面以允许我的应用程序直接从我的应用程序访问联系信息）。如果 Apple 为此禁用了 URL 方案，为什么还有很多应用程序仍在使用它？

![在此处输入图像描述](../Images/726160b4947da551765750d4df7659db.png)

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-03-28T12:46:47.763

对于与定位等服务相关的应用程序，当它们第一次请求访问时，操作系统将通过链接到设置的按钮发出警报。这不是由应用程序执行的，而是由操作系统的底层安全性执行的。

正如您所提到的，iOS 6 删除了自己执行此操作的功能。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2014-11-27T09:23:34.523

您可以在 iOS8 中以编程方式打开设置应用程序，但不能在早期版本的 iOS 中打开。

**在斯威夫特：**

```
UIApplication.sharedApplication().openURL(NSURL(string:UIApplicationOpenSettingsURLString)); 
```

**斯威夫特 4：**

```
if let url = NSURL(string: UIApplicationOpenSettingsURLString) as URL? {
    UIApplication.shared.openURL(url)
} 
```

**在 Objective-C 中**

```
[[UIApplication sharedApplication] openURL:[NSURL URLWithString:UIApplicationOpenSettingsURLString]]; 
```****

# php - Zend Framework2 中的“IsImage 验证”或“MimeType 验证器”

> ID：15682166
> 
> 赞同：3
> 
> 时间：2013-03-28T12:44:22.367
> 
> 标签：php, zend-framework2, zend-form

我正在使用 formFilter 方法（工厂方法）来验证**Zend Framework 2**中的表单。请有人帮助添加文件上传验证。

请指定如何在 formfilter 中使用“ **IsImage 验证**”或“ **MimeType Validator** ”。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-26T11:49:34.200

试试这个

```
public function getInputFilter()
{
    if (!$this->filter) {
        $this->filter = new InputFilter();
        $factory = new InputFactory();
        $this->filter->add($factory->createInput(array(
                    'name' => 'image',
                    'required' => true,
                    'validators' => array(
                        array(
                            'name' => 'NotEmpty',
                            'options' => array(
                                'messages' => array(
                                    'isEmpty' => 'Please select an icon to upload.',
                                ),
                            ),
                        ),
                        array(
                            'name' => '\Zend\Validator\File\IsImage',
                            'options' => array(
                                'messages' => array(
                                    'fileIsImageFalseType' => 'Please select a valid icon image to upload.',
                                    'fileIsImageNotDetected' => 'The icon image is missing mime encoding, please verify you have saved the image with mime encoding.',
                                ),
                            ),
                        ),
                    ),
        )));
    }
    return parent::getInputFilter();
} 
```

[关联](https://github.com/zendframework/zf2/pull/3764)

# iphone - 将 adbannerview 添加到 ipad 底部

> ID：15682170
> 
> 赞同：0
> 
> 时间：2013-03-28T12:44:42.867
> 
> 标签：iphone, objective-c, ipad

我正在尝试在我的 ios 应用程序中添加 adbannerview 我已经为 iPhone 添加了它，它在设备底部正确显示但是当我尝试对 iPad 做同样的事情时，它显示在屏幕中间请帮助我谢谢进步

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T15:25:39.767

使用 Interface Builder 中的自动布局并保持“广告”的视图底部对齐，仅此而已。无论您要支持什么设备，它总是会出现在底部。

像这样的东西：

![在此处输入图像描述](../Images/2f5e9e6e09b83148fa22e170476f934f.png)

# arrays - 复制二维数组

> ID：15682171
> 
> 赞同：4
> 
> 时间：2013-03-28T12:44:51.150
> 
> 标签：arrays, scala, for-loop

我想复制一个二维数组。我想用 for 循环来做到这一点，我知道如何做到这一点，但我无法完成其余的工作。

```
def copy(bild:Array[Array[Int]]):Unit = {

    for(x <- 0 until bild.length)
    for(y <- 0 until bild(x).length) {
        bild(x)(y) = 
        //i don't know how to create the new array
    }

} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-28T13:03:31.260

你也可以使用`clone`方法！

```
def copy(bild: Array[Array[Int]]): Unit = {
    val copy = bild.clone
} 
```

**更新 ：**

因为， Array[Int] 仍然是可变引用，克隆仍然不能解决问题.. 正如 Andriy Plokhotnyuk 在他的评论中提到的那样..

*问题 ：*

```
val og = Array(Array(1, 2, 3), Array(4,5,6))      //> og  : Array[Array[Int]] = Array(Array(1, 2, 3), Array(4, 5, 6))
val copy = og.clone                               //> copy  : Array[Array[Int]] = Array(Array(1, 2, 3), Array(4, 5, 6))
copy(0)(0) = 7
og                                                //> res2: Array[Array[Int]] = Array(Array(7, 2, 3), Array(4, 5, 6))
copy                                              //> res3: Array[Array[Int]] = Array(Array(7, 2, 3), Array(4, 5, 6)) 
```

这里的任何更新`copy`都会反映到`og`..

*溶胶：*

所以我主要也需要克隆 Array[Int] .. 因此..

```
val og = Array(Array(1, 2, 3), Array(4,5,6))      //> og  : Array[Array[Int]] = Array(Array(1, 2, 3), Array(4, 5, 6))
val copy = og.map(_.clone)                        //> copy  : Array[Array[Int]] = Array(Array(1, 2, 3), Array(4, 5, 6))
copy(0)(0) = 7
og                                                //> res2: Array[Array[Int]] = Array(Array(1, 2, 3), Array(4, 5, 6))
copy                                              //> res3: Array[Array[Int]] = Array(Array(7, 2, 3), Array(4, 5, 6)) 
```

因此..将问题中的复制方法重构为..

```
def copy(bild: Array[Array[Int]]): Unit = {
    val copy = bild.map(_.clone) 
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T13:04:37.007

```
def copy(bild: Array[Array[Int]]):Unit = {
  val result = Array.ofDim[Array[Int]](bild.length)
  for(x <- 0 until bild.length) {
    result(x) = Array.ofDim[Int](bild(x).length)
    for(y <- 0 until bild(x).length) {
      result(x)(y) = bild(x)(y)
    }
  }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T12:48:43.567

非常简单：

```
scala> Array.ofDim[Int](3)
//res0: Array[Int] = Array(0, 0, 0)
scala> Array.ofDim[String](4)
//res1: Array[String] = Array(null, null, null, null) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-04-26T13:15:28.333

您还可以使用以下方法`Array.tabulate`：

```
val source = Array.fill[Int](5, 5)(1)
val target = Array.tabulate[Int](5, 5)((x, y) => source(x)(y)) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-28T13:27:04.247

复制二维数组的最简单方法是`array.clone`，但如果您想通过理解自行完成，可以使用以下代码：

```
def copy[A](arr: Array[Array[A]]) = for (x <- 0 until arr.length) yield for (y <- 0 until arr(x).length) yield arr(x)(y) 
```

这会给你一个`Vector[Vector[A]]`.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-28T14:25:20.713

对于大型数组更有效：

```
scala> :paste
// Entering paste mode (ctrl-D to finish)

def copyOf(as: Array[Array[Int]]): Array[Array[Int]] = {
  val cas = Array.ofDim[Array[Int]](as.length)
  for(i <- 0 until as.length) {
    val a = as(i)
    cas(i) = java.util.Arrays.copyOf(a, a.length)
  }
  cas
}

// Exiting paste mode, now interpreting.

copyOf: (as: Array[Array[Int]])Array[Array[Int]]

scala> Array(Array(0, 1), Array(2, 3))
res0: Array[Array[Int]] = Array(Array(0, 1), Array(2, 3))

scala> copyOf(res0)
res1: Array[Array[Int]] = Array(Array(0, 1), Array(2, 3))

scala> res0(0)(0) = 7

scala> res0
res3: Array[Array[Int]] = Array(Array(7, 1), Array(2, 3))

scala> res1
res4: Array[Array[Int]] = Array(Array(0, 1), Array(2, 3)) 
```

# android - 试图以反向纵向旋转应用程序但它不起作用

> ID：15682177
> 
> 赞同：3
> 
> 时间：2013-03-28T12:45:02.870
> 
> 标签：android, android-layout, android-orientation

> 尝试以纵向/横向/反向纵向/反向横向旋转应用程序。它的旋转应用程序仅在三种模式下，但无法以反向纵向旋转应用程序。
> 
> 我的代码：

```
public void onConfigurationChanged(Configuration newConfig) {
        super.onConfigurationChanged(newConfig);
        if (isRecording == false) {
            Log.v("new orientation", "yes");
            if (newConfig.orientation == Configuration.ORIENTATION_PORTRAIT) {

                setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);
                wholeView.setOrientation(1);
            }
            else if (newConfig.orientation == Configuration.ORIENTATION_LANDSCAPE) {

                setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);
                wholeView.setOrientation(0);
            }else if (newConfig.orientation == Configuration.ORIENTATION_UNDEFINED) {
                setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_REVERSE_LANDSCAPE);
                wholeView.setOrientation(0);
            }else if (newConfig.orientation == ActivityInfo.SCREEN_ORIENTATION_REVERSE_PORTRAIT)
            {

                setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_SENSOR);
                wholeView.setOrientation(LinearLayout.VERTICAL);
            } 
```

# java - Display.getDefault().addFilter() 无法按预期用于 SWT.ARROW_LEFT 和 SWT.ARROW_RIGHT

> ID：15682178
> 
> 赞同：0
> 
> 时间：2013-03-28T12:45:05.417
> 
> 标签：java, swt

我有一个用 SWT 编写的 Eclipse 插件项目。我添加了一个全局监听器来监听键`SWT.ARROW_LEFT`和`SWT.ARROW_RIGHT`. 这是通过`Display.getDefault().addFilter()`方法完成的。这在大多数情况下都可以正常工作。但是我在面板中有一组按钮，当按钮具有焦点时，按`SWT.ARROW_LEFT`and`SWT.ARROW_RIGHT`键不会触发相应的事件，它只是在一组键之间遍历。有谁知道如何克服这个问题？谢谢。

```
Display.getDefault().addFilter(SWT.ALL, new Listener() {
            @Override
            public void handleEvent(Event event) {
                if ((event.keyCode == SWT.ARROW_LEFT) || (event.keyCode == SWT.ARROW_RIGHT)) {
      }
   }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T13:50:30.733

通过使用 TransverseEvent 解决问题并将 doit 字段设置为 false。

# java - 有没有办法判断 JFrame 是否“最大化”（MS Windows）

> ID：15682182
> 
> 赞同：4
> 
> 时间：2013-03-28T12:45:29.230
> 
> 标签：java, windows, swing, jframe, window-managers

我一直是 OS X 上的 Java 应用程序，还没有机会在不同的地方进行全面测试。

有2个不同`JFrame`的s。第二个完全加载在第一个的位置，因此需要将其大小和位置设置为与第一个相同。

这很好用，但我注意到很多 Windows 用户似乎最大化了第一个窗口。当第二个 JFrame 加载时，它具有相同的大小，但没有“最大化”。

MS Windows 世界中的最大化窗口状态稍有不同，操作系统的处理方式也不同。

如何判断一个 JFrame 是否已最大化，以及如何自己最大化一个？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T12:47:45.930

```
frame.setExtendedState( f.getExtendedState()|JFrame.MAXIMIZED_BOTH ); 
```

# android - Android - Spinner 无法选择项目

> ID：15682185
> 
> 赞同：1
> 
> 时间：2013-03-28T12:45:36.783
> 
> 标签：android, spinner

我的微调器有问题。当按下按钮时，我从编辑文本中动态地添加微调器上的项目。按下微调器时，项目会正确显示，但无法进行选择且微调器上没有显示。

这是代码：

```
 final ArrayList<String> players = new ArrayList<String>();
    ArrayAdapter<String> adapter = new ArrayAdapter<String> (this, android.R.layout.simple_spinner_dropdown_item, players); 
    final Spinner spinnerplayers = (Spinner)findViewById(R.id.spinnerplayers);

    final ImageButton addbutton = (ImageButton)findViewById(R.id.addbutton);
    final EditText editname = (EditText)findViewById(R.id.editname);
    final EditText editnum = (EditText)findViewById(R.id.editnum);
    addbutton.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View arg0) {
            players.add(editname.getText().toString()+ " " + editnum.getText().toString());
            editname.setText("");
            editnum.setText("");
        }
    });

    spinnerplayers.setAdapter(adapter);

    final ImageButton removebutton = (ImageButton)findViewById(R.id.removebutton);
    removebutton.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View arg0) {
            //players.remove(spinnerplayers.getSelectedItem().toString());
        }
    }); 
```

如果需要，微调器 xml 是：

```
<Spinner
        android:id="@+id/spinnerplayers"
        android:layout_width="wrap_content"
        android:layout_height="match_parent"
        android:layout_weight="1" /> 
```

关于问题出在哪里的任何想法？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T12:58:03.723

如果您的意思是您的按钮上的 clicklistenrs 不起作用，您必须为此制作一个自定义适配器。您将在适配器的 getView 方法中应用侦听器。

添加你必须添加 OnItemSelectedListener。

```
 YOUR_SPINNER.setOnItemSelectedListener(new OnItemSelectedListener() {

                @Override
                public void onItemSelected(AdapterView<?> arg0, View arg1,
                        int position, long arg3) {
                            }

                @Override
                public void onNothingSelected(AdapterView<?> arg0) {

                }

            }); 
```

该职位为您提供您的项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T13:24:19.760

原因是您使用 android.R.layout.simple_spinner_item 设置它。

您可以编写自己的适配器类：

```
Spinner spinner = (Spinner) findViewById(R.id.mySpinner);
spinner.setAdapter(new MyCustomAdapter(CLASS.this, R.layout.spinner_layout, players)); 
```

然后它看起来就像你在 spinner_layout 中设计的方式

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T13:14:34.680

您是否尝试过指定：

```
adapter.setNotifyOnChange(true); 
```

刷新显示您所做的每个添加/删除的适配器？

# asp.net - 将动态表格附加为 pdf 并在 asp.net 中通过 emal 发送

> ID：15682189
> 
> 赞同：-1
> 
> 时间：2013-03-28T12:45:53.293
> 
> 标签：asp.net, email, pdf, attachment

我想附加一个通过c#代码生成的动态表，并将其附加为pdf文档

并通过电子邮件发送给asp.net中的客户

请帮忙

提前致谢

问候。赞恩

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T12:53:34.197

您可以使用：

[iTextSharp](http://sourceforge.net/projects/itextsharp/)：

iTextSharp 是 iText 的 C# 端口，是用于 PDF 生成和操作的开源 Java 库。它可用于从头开始创建 PDF 文档、将 XML 转换为 PDF（使用额外的 XFA Worker DLL）、填写交互式 PDF 表单、在现有 PDF 文档上标记新内容、拆分和合并现有 PDF 文档，以及多得多。

另外，参考：

[在 ASP.NET 中创建 PDF - iTextSharp 入门](http://www.mikesdotnetting.com/Article/80/Create-PDFs-in-ASP.NET-getting-started-with-iTextSharp)

[使用 ASP.NET 和 iTextSharp 创建 PDF 文档](http://www.4guysfromrolla.com/articles/030911-1.aspx)

# css - 带有附加按钮的引导搜索输入 - 在所有侧面显示圆角

> ID：15682192
> 
> 赞同：6
> 
> 时间：2013-03-28T12:45:57.670
> 
> 标签：css, twitter-bootstrap

我正在使用[Twitter Bootstrap](http://twitter.github.com/bootstrap/index.html)。

这是[我的代码的一个小提琴](http://jsfiddle.net/adamdehaven/wQ2s5/1/)。这是打开的[Github 问题](https://github.com/twitter/bootstrap/issues/7411)

* * *

[根据 Bootstrap 文档](http://twitter.github.com/bootstrap/base-css.html#forms)，我已经实现了一个带有附加按钮的搜索输入。我`HTML`的表格显示在这里

```
<form class="form-search text-center" method="get" action="#">
  <div class="input-append">
    <input type="search" class="span7 search-query" name="q" autocomplete="off" placeholder="SEARCH" tabindex="1">
    <button type="submit" class="btn"><i class="icon-search icon-large"></i> </button>
  </div>
</form> 
```

出于某种原因，在移动设备（即 iPhone 5）上查看表单时，会出现如下屏幕截图所示的搜索框： ![Bootstrap 搜索输入附加圆角](../Images/23d39f2793fe27fdc7442eb54d08cb11.png)

当我在桌面浏览器中查看搜索表单并将其调整为“移动大小”时，搜索框**正确**显示，如第二个屏幕截图所示（*忽略较浅的边框和大小差异*）：

![桌面上的引导搜索输入](../Images/32b013834c967eb524fbfe03b64a29b2.png)

---------**问题**---------

如何防止搜索输入像第一个屏幕截图一样显示不正确？什么可能导致这种情况？我查看了两个搜索输入的源样式和计算样式，一切似乎都是一样的。帮助？

如果我将其更改`input type="search"`为`type="text"`问题不存在，那么它必须在 CSS 中的某个地方，但我无法弄清楚。什么 CSS 实际应用了这种效果？

---------**更新**---------

如果我切换`<div class="input-append">`到`<div class="input-prepend">`搜索输入显示正确。此外，当该字段具有焦点时，右侧的圆角变为“方形”并正确显示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T21:20:17.710

看起来你不能。看到这个链接

[webkit html5 搜索输入](http://css-tricks.com/webkit-html5-search-inputs/)

**引用：**

> WebKit 对您可以在搜索输入中更改的内容有很大的时间限制。我猜这个想法是一致性。特别是在 Safari 中，搜索字段看起来就像浏览器右上角的搜索框。下面的 CSS 在 WebKit 中“无论如何”都会被忽略，例如，你甚至不能用 !important 规则来对抗它。

换句话说，Safari 将忽略您的样式，并应用标准外观。

# jquery - Jquery Mobile 1.3 自定义 CSS 样式

> ID：15682193
> 
> 赞同：0
> 
> 时间：2013-03-28T12:45:59.480
> 
> 标签：jquery, css, jquery-mobile, jquery-mobile-navbar

我正在尝试使用 CSS 在 jquery 中设置页面样式，但它似乎不起作用。目前正在使用 jquery 1.3.0 css 但是我无法将我的对齐`#navgroup`到页脚的中心，我也无法从滑块中删除额外的白色计数器。我的代码如下：

```
<!doctype html>
<html lang="en">
<head>
    <title>Player</title>
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.3.0/jquery.mobile-1.3.0.min.css" />
    <script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
    <script src="http://code.jquery.com/mobile/1.3.0/jquery.mobile-1.3.0.min.js"></script>
        <style>

    #navgroup {text-align:center;}
    #navgroup div {display:inline-block;}

        .containing-element .ui-slider-switch
    {
        width: 100%;
    }

    input.ui-slider-input {display: none;}

    .slider-shit .ui-btn
    {
        margin-left: -15px;
        margin-top: -15px;
    }

    .slider-shit .ui-slider
    {
        width: 100%;
        top: 3px;
        margin: 0;
        opacity: 1;
    }

    .slider-shit
    {
        padding: 0 20px;
    }
    </style>
</head>
<body>
    <!--Player for indivdual and playlist songs-->
    <div data-role="page" data-add-back-btn="true" id="player">
        <div data-role="header" data-position="fixed">
            <h1 id="songName">Nothing Playing...</h1>
            <a href="#" id="favourite" data-role="button" data-icon="star" data-iconpos="notext" class="ui-btn-right">mark as favourite</a>
        </div>
        <div data-role="content" style="height: 100%;" id="songPicture">
        </div>
        <div data-role="footer" data-position="fixed">
            <table style="margin-left: 5px; margin-right: 5px;">
                <tr>
                    <td><p id="songCurrentpos">0:00</p></td>
                    <td width="100%" class="slider-shit"><input type="range" name="slider" id="posSlider" value="0" min="0" max="100" width="100%" data-theme="d" data-highlight="true"/></td>
                    <td><p id="songDuration">0:00</p></td>
                </tr>
            </table>
            <div id="navgroup">
                <div data-role="controlgroup" data-type="horizontal">
                    <a data-role="button" data-iconpos="top" data-icon="back" id="previousSong" data-inline="true">Previous</a>
                    <a data-role="button" data-iconpos="top" data-icon="arrow-r" id="playSong" data-inline="true">Play</a>
                    <a data-role="button" data-iconpos="top" data-icon="forward" id="nextSong" data-inline="true">Next</a>
                    <a href="#songOptionsPage" id="songOptionsButton" data-role="button" data-iconpos="top" data-icon="gear" data-iconpos="notext" data-rel="dialog" data-inline="true">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a>
                </div>
            </div>
        </div>
    </div>
</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T12:55:42.003

这应该这样做。

工作示例：http: [//jsfiddle.net/Gajotres/YKY3y/](http://jsfiddle.net/Gajotres/YKY3y/)

```
#navgroup {text-align:center;}
#navgroup div {display:inline-block;}

    .containing-element .ui-slider-switch
{
    width: 100%;
}

input.ui-slider-input {display: none;}

.slider-shit .ui-btn
{
    margin-left: -15px;
    margin-top: -15px;
}

.slider-shit .ui-slider
{
    width: 100%;
    top: 3px;
    margin: 0;
    opacity: 1;
}

.slider-shit
{
    padding: 0 20px 0 0;
}

.ui-slider div {
    margin:  0 15px 0 38px !important;
}

.ui-slider div div {
    margin:  0 !important;
}

#posSlider {
     display: none;           
} 
```

# javascript - 通过按钮恢复页面缩放/缩放

> ID：15682194
> 
> 赞同：1
> 
> 时间：2013-03-28T12:46:01.417
> 
> 标签：javascript, html

不幸的是，我根本没有代码。在 Google 和 Stackoverflow 上进行长时间搜索后，我似乎找不到与此相关的任何内容。

基本上我的网页上有一个按钮，例如“恢复比例”，这样当有人点击它时，页面的缩放/比例恢复到 100%。虽然我不知道如何做到这一点。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T13:04:35.107

JQuery 和 CSS 解决方案：

```
$('body').css('MozTransform','scale(1)'); 
```

# ios - 通过触摸停止和启动动画。目标 C

> ID：15682195
> 
> 赞同：6
> 
> 时间：2013-03-28T12:46:03.750
> 
> 标签：ios, objective-c, cocoa-touch, core-animation

我制作了一个在屏幕上移动的动画，我的动画不断循环。如何在您点击动画图像时停止动画，然后在您解除触摸时让动画继续？

我知道如何使用 TouchesMoved 移动指定的按钮，如下所示：

```
CGPoint point = [[[event allTouches] anyObject] locationInView:self.view];
UIControl *control = sender;
control.center = point; 
```

但是让它与我的动画一起工作。我希望动画在我触摸它后继续。

SelectedCellViewController.h

```
//  SelectedCellViewController.h

#import <Accounts/Accounts.h>
#import <QuartzCore/QuartzCore.h>

@interface SelectedCellViewController : UIViewController {
IBOutlet UIImageView *imageView;
UIImageView *rocket;
}

@end 
```

viewControllertoShow.m

```
#import "SelectedCellViewController.h"

@interface SelectedCellViewController ()

@end

@implementation SelectedCellViewController

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil {
if ((self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil])) {
}
return self;
}

- (void)didReceiveMemoryWarning {
[super didReceiveMemoryWarning];
}

#pragma mark - View lifecycle

- (void)viewDidLoad {

[super viewDidLoad];

[self performSelector:@selector(imageSpawn:) withObject:nil afterDelay:3];

}

- (void) imageSpawn:(id) sender
{

UIImage* image = [UIImage imageNamed:@"ae"];
rocket = [[UIImageView alloc] initWithImage:image];
rocket.frame = CGRectMake(-25, 200, 25, 40);
[UIView animateWithDuration:5
                      delay:0.2f
                    options:UIViewAnimationCurveEaseInOut | UIViewAnimationOptionRepeat | UIViewAnimationOptionAutoreverse
                 animations:^(){rocket.frame=CGRectMake(345, 200, 25, 40);}
                 completion:^(BOOL fin) {
                 }];

[self.view addSubview:rocket];
UITapGestureRecognizer *tapped = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(ballTapped:)];
tapped.numberOfTapsRequired = 1;
[rocket addGestureRecognizer:tapped];
[rocket setUserInteractionEnabled:YES];

}

-(void)ballTapped:(UIGestureRecognizer *)gesture
{
CGPoint location = [gesture locationInView:gesture.view];

//then write code to remove the animation
[self.view.layer removeAllAnimations];
NSLog(@"Tag = %d", gesture.view.tag);
rocket.frame = CGRectMake(location.x,location.y,25,40);
}

- (void)dismissView {
[self dismissViewControllerAnimated:YES completion:NULL];
}

- (void)viewDidUnload {

}

@end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T12:50:04.383

正如您在问题中已经说过的那样，您可以使用

```
CGPoint point = [[[event allTouches] anyObject] locationInView:self.view]; 
```

然后检查该点是否在动画的坐标内`UIImageview`，然后停止动画。但是如果您使用的是滚动视图，您将无法使用它，因为滚动视图不会返回任何`UIView`触摸事件。

由于您的图像视图正在制作动画，因此更好的选择是在添加子视图时将 UITapGestureRecogniser 添加到图像视图中，如下所示

```
- (void) imageSpawn:(id) sender
{

UIImage* image = [UIImage imageNamed:@"ae"];
UIImageView *rocket = [[UIImageView alloc] initWithImage:image];
rocket.frame = CGRectMake(-25, 200, 25, 40);
[UIView animateWithDuration:5
                      delay:0.2f
                    options:UIViewAnimationCurveEaseInOut | UIViewAnimationOptionRepeat | UIViewAnimationOptionAutoreverse
                 animations:^(){rocket.frame=CGRectMake(345, 200, 25, 40);}
                 completion:^(BOOL fin) {
                 }];

[myScrollView addSubview:rocket];
UITapGestureRecognizer *tapped = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(ballTapped:)];
    tapped.numberOfTapsRequired = 1;
    [self.rocket addGestureRecognizer:tapped];
    [rocket setUserInteractionEnabled:YES];
} 
```

并在目标函数中编写代码来停止动画：

```
 -(void)ballTapped:(UIGestureRecognizer *)gesture
    {
    //here also you can get the tapped point if you need
        CGPoint location = [gesture locationInView:gesture.view];

    //then write code to remove the animation
        [self.view.layer removeAllAnimations]; 
     } 
```

**编辑：**

如果您试图在触摸点停止图像视图，您可以将其添加到 ballTapped 事件中：

```
rocket.frame = CGRectMake(location.x,location.y,25,40); 
```

但是为此，您必须`UIImageView *rocket`在此特定方法之外声明，即在您的头文件中声明。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T13:19:41.633

另一种方法是将其添加到动画的父视图中 -

```
- (UIView *)hitTest:(CGPoint)point withEvent:(UIEvent *)event
{
    self.animating = NO;
    return [super hitTest:point withEvent:event];
} 
```

使用（原子）属性，然后检查动画中的属性以查看是否应该停止。我们使用它来停止正在运行的照片库，以便用户可以手动移动照片。如有必要，如果该点位于特定区域，您也可以在此处签到。此方法在调用任何触摸方法之前运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T13:03:56.847

尝试这样可能会对您有所帮助，如果您在动画中间触摸 imageview，那么动画将从视图中删除。

```
 - (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{

    UITouch *touch = [[event allTouches] anyObject];
    CGPoint lastLocation = [touch locationInView: self.view];

    if([[touch view] isKindOfClass:[UIImageView class]]){
        [youImageView.layer removeAllAnimations]; 
        youImageView.center=lastLocation;//assign your image view center when the animation removes from the view.
    }
} 
```

并添加 `#import <QuartzCore/QuartzCore.h>`框架。

# validation - 在 ui:repeat 中使用带有变量属性的验证器

> ID：15682196
> 
> 赞同：7
> 
> 时间：2013-03-28T12:46:07.420
> 
> 标签：validation, jsf, uirepeat, validatelongrange

我正在使用`com.sun.faces`版本`2.1.18`。在我的应用程序中，我有一个动态的问题列表。我`<ui:repeat>`用来呈现每个问题。根据问题的类型，我呈现一种输入组件和验证。如果是数字范围问题，我`<h:inputText>`使用`<f:validateLongRange>`.

我遇到的问题是`minimum`和`maximum`上的属性`<f:validateLongRange>`总是设置为第一个问题的最小值和最大值。因此，当您在任何其他问题上使用验证器时，第一个问题就会失败。这应该发生吗？有没有办法对动态生成的组件进行验证？我希望它可以在不切换到`<c:forEach>`.

代码片段：

```
<ui:repeat value="#{questionnaire.questionsCollection}"
           var="question">
  ..
  <h:inputText value="..">
    <f:validateLongRange minimum="#{question.minimumValue}"
                         maximum="#{question.maximumValue}"/>
  </h:inputText>
  ..
</ui:repeat> 
```

我已经输出了`#{question.minimumValue}`and `#{question.maximumValue}`，它们对我的问题有正确的值。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-28T12:53:52.247

这确实是指定/预期的行为。`<f:validateXxx>`在视图构建时评估标签处理程序的属性。因此他们不能引用仅在视图渲染期间可用的变量，例如当前迭代的`<ui:repeat>`. 当您使用像 JSTL 这样在视图构建期间运行的迭代器时，它确实会起作用`<c:forEach>`。这里给出了关于视图构建时间与视图渲染时间的更详细的解释：[JSTL in JSF2 Facelets... 有意义吗？](https://stackoverflow.com/questions/3342984/jstl-in-jsf2-facelets-makes-sense)

您遇到的问题与此处详细说明的问题基本相同：[如何为数据表的每一行设置转换器属性？](https://stackoverflow.com/questions/7530560/how-to-set-converter-properties-for-each-row-of-a-datatable/7531284#7531284)它详细概述了各种解决方案。在您的特定情况下，其中一种解决方案是使用[OmniFaces](http://omnifaces.org) [`<o:validator>`](http://showcase.omnifaces.org/taghandlers/validator)，它可以对所有属性进行渲染时评估，这样您就可以替换

```
<f:validateLongRange minimum="#{question.minimumValue}"
                     maximum="#{question.maximumValue}" /> 
```

经过

```
<o:validator validatorId="javax.faces.LongRange" 
             minimum="#{question.minimumValue}"
             maximum="#{question.maximumValue}" /> 
```

为了让它按需要工作。

也可以看看：

*   [使用基于 ui:repeat var 的 EL 设置验证器属性](https://stackoverflow.com/questions/9194871/setting-a-validator-attribute-using-el-based-on-uirepeat-var)

# java - 私有字符串还是公共静态字符串？

> ID：15682199
> 
> 赞同：10
> 
> 时间：2013-03-28T12:46:24.420
> 
> 标签：java, android, private, public, final

在我实习的时候，我的一位同事给了我一个提示。我想知道这是否是一种好习惯。

我所做的是创建仅用于它们包含的值的类，并且没有任何实际执行某些操作的函数（除了具有 getter、setter 和构造函数）。我这样声明我的变量：

```
public class ObjectIUse{
  Private String name;

  public ObjectIUse(String name){
    this.name = name;
  }

  public String getName(){
    return name;
  }
} 
```

所以我没有使用 setter，因为它应该始终保持不变。我的同事说我也可以这样做：

```
public class ObjectIUse{
  public final String name;

  public ObjectIUse(String name){
    this.name = name;
  }
} 
```

因为现在我们不需要任何 getter 或 setter，因为它是公共的，但是它也永远不能更改，因为它是 final 的。

哪个会更好？还是将其设为私有但也是最终的可能会更好？我的意思是所有选项都有效，显然。我只想知道哪个更好以及为什么。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-28T12:49:12.237

将变量设为私有，因为这样做会将变量[封装](http://en.wikipedia.org/wiki/Encapsulation_%28object-oriented_programming%29)在类中。这有很多好处，[信息隐藏](http://en.wikipedia.org/wiki/Information_hiding)就是其中之一，如果您转到上面的链接，您将了解这一点。

如果您希望它在创建后永远不会更改，那么也将其设为最终版本。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-28T12:53:01.463

这现在有效，因为 a`String`是不可变的。但是，当您公开对可变类的引用并且该类不是线程安全的时会发生什么？如果您愿意，您甚至不能返回[防御副本。](http://www.javapractices.com/topic/TopicAction.do?Id=15)

更不用说这也破坏了封装。使用私有变量和吸气剂。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T12:49:48.937

> 哪个会更好？还是将其设为私有但也是最终的可能会更好？

如果您想成为成功的开发人员，您应该正确、高效且安全地进行编程。安全性和性能是第一位的。

当您将其公开时，您将打破非常重要且有很多好处的**封装。**每次你想要获取 Object 的属性时，getter 都会成为你的朋友。

通常，您不应直接访问 Object 的属性（仅在极端情况下，但也可以以更好的方式解决这些问题）。Getter 和 Setter 被指定用于这些目的 - 保持封装并安全地处理对象。

`final variables`通常用于在一段时间内不可更改的数据。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-28T12:50:16.373

不为变量提供 setter 方法的想法使其成为只读字段，也就是说，这意味着我们只能读取而不能写入，因此通过使用`final`关键字使其成为常量来概括一切。

我认为常数更好。`final`关键字提高性能。[在这里](http://javarevisited.blogspot.com/2011/12/final-variable-method-class-java.html)阅读更多

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-28T12:50:48.103

您绝对应该有一个吸气剂并将您的字段设为私有。也就是我们所说的封装。

此外，通过使其成为最终对象并且没有设置器，您的对象是不可变的，这对于并行编程来说是一件非常好的事情。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-28T12:51:14.230

封装原则的正确使用是将所有类字段设为私有并通过 setter 和 getter 访问它们。除此之外，您可能希望在调用`getName()`. 虽然有时会使用第二种变体，但第一种更好。希望这可以帮助。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-03-28T12:59:46.350

我猜他们的理由是`public`让代码更简单。Java 因在这种情况下过于冗长而受到批评。在诸如 Javascript 之类的语言上（通常）总是`public`.

但这种简单性是对拥有安全、稳定和可扩展代码的权衡。

要了解为什么这很重要，请查看一个大型 Javascript 项目，该项目已将所有内容都公开。每个类的代码可能很简单……但它们的关系以及由此产生的架构最终成为维护的噩梦。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-03-28T13:06:42.880

我认为这取决于。例如：如果你使用 getter - 你可以覆盖它。有时它非常有用。

# php - 比较php中的两个日期

> ID：15682200
> 
> 赞同：1
> 
> 时间：2013-03-28T12:46:24.960
> 
> 标签：php

我需要比较两个日期

```
d1= 12-11-01(YY-MM-DD) and d2=2008-05-02(YYYY-MM-DD) 
```

比较`d2 <= d1`

它没有按要求工作

在这里请注意，我需要比较不同日期格式的日期。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T12:48:26.710

尝试：

```
$d1 = strtotime('12-11-01');
$d2 = strtotime('2008-05-02');

if ( $d2 <= $d1 ) {} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T12:51:07.120

[DateTime](http://www.php.net/manual/en/book.datetime.php)比它更好，`strtotime()`因为它可以考虑时区和夏令时

```
$dt1 = new DateTime('12-11-01');
$dt2 = new DateTime('2008-05-02');
if ( $dt2 <= $dt1 ) {

} 
```

[看到它在行动](http://3v4l.org/8849f)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T12:49:05.810

做这个 ：

```
if(strtotime('12-11-01') <= strtotime('2008-05-02'))
{
     // do your task here
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T12:48:49.637

您可以使用以下代码：

```
$d1 = strtotime($date1);
$d2 = strtotime($date2);
if($d2 <= $d1){
    // $date2 is before $date1
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-28T12:49:40.257

试试这个

```
if(strtotime('12-11-01') <= strtotime('2008-05-02'))
{   } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-28T12:49:56.440

如下图，

```
if(strtotime($date1) < strtotime($date2)) {
    // do something
} 
```

在这里进一步研究

[http://php.net/manual/en/function.strtotime.php](http://php.net/manual/en/function.strtotime.php)

# javascript - 在圆柱体内绘制一个带有摄像头视图的 html5 画布圆柱体

> ID：15682201
> 
> 赞同：0
> 
> 时间：2013-03-28T12:46:26.420
> 
> 标签：javascript, jquery, html, canvas

我认为标题是不言自明的。我需要用圆柱体中心的相机视图构建 html5 画布圆柱体。在圆柱体的壁上，我需要构建类似图片的东西，圆柱体可以旋转和缩放。

如果有人对从哪里开始使用相机和气缸有一些指示，请提供帮助。

为了帮助您理解我的描述，我发布了一张图片 [http://s21.postimg.org/fpnmukbef/inside_cilindre.jpg](http://s21.postimg.org/fpnmukbef/inside_cilindre.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T16:22:39.643

我认为您必须处理 2d 图片并在最后一步转换所需的部分

要将好的部分转换为 3d，我认为您必须根据您选择的抛物线方程拉伸每个冒号

```
function getStretch(x,maxx)
{ /* here i choice :
     f(x) = (x*x)+3 for top
     f(x) = -(x*x)+1 for bottom
     when y >= 0 and y <= 4
     x >= -1 and x <= +1
  */

   // convert x ~ maxx to -1 ~ 1
   var ratio = 2/maxx; // -1 to 1 === 2
   x = x * ratio;
   x -= 1; // switch from 0 ~ 2 to -1 ~ 1

   var sizeY = 4;
   var y = -(x*x)+1; // bottom get y >= 0 and y <= 1 result, easier to compute
   y *= 2; // double to add up and bottom
   var colonHeight = sizeY - y;
   var colonRatio = colonHeight / sizeY;
   return colonRatio; // return the height ratio for this colon
} 
```

101 个冒号视图的值：http: [//jsfiddle.net/L9YgL/1/](http://jsfiddle.net/L9YgL/1/)

```
var view_start_x = 200; // current view start at 200px from left source image
var view_size_x  = 399; // current view work on 400 px width

// get our stretch ratio for each colon
var stretch_values = [];
for(var x=0;x<=view_size_x;x++) stretch_values[x] = getStretch(x,view_size_x);

// now we need a function to get the colon height and position

var colonHeight = 400; // height of source image, and max height of out

function getColonInfo(x)
{ if(x < 0 || x > view_size_x) return {h:42,y:0};
  // compute current colon height
  var ratio  = stretch_values[x];
  var height = parseInt( colonHeight * ratio ,10);
  var posY = parseInt( (colonHeight - height)/2 ,10);
  return {h:height,y:posY};
}

// save this info for each out colon
var colon_info = [];
for(var x=0;x<=view_size_x;x++) colon_info[x] = getColonInfo(x);

// now a function to render a colon with a zoom

function renderColon(x,sourceX)
{    var info = colon_info[x];
     var originalHeight = colonHeight;
     var height = info.h;
     var y = info.y;
     // now do your reduce/blit magic here
     // render at "x","y" a colon with height of "height"
     // from source colon "sourceX" who get height of "originalHeight"

}

// and a function to iterate each colon and do the magic  

function my2dTo3d()
{
    for(x=0; x<=view_size_x; x++)
    {    var offset = x + view_start_x;
         renderColon(x,offset);
    }
} 
```

好的，当然有更好的方法来做到这一点，我现在就在手边做，也许是 css3 ？

# iphone - 如何重命名文档目录中的文件？

> ID：15682202
> 
> 赞同：4
> 
> 时间：2013-03-28T12:46:33.493
> 
> 标签：iphone, ios, objective-c, xcode

我将文件保存在名为`1.png`, `2.png`, `3.png`, `4.png`,的文档目录中`5.png`。如果我删除原始文件`3.png`，如何重命名文件`4.png`并分别`5.png`调用`3.png`和`4.png`？

这是我首先用来编写文件的代码：

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,
                                                     NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];
[appDel.photo addObject:@"photo"];
NSString *imageName = [NSString stringWithFormat:@"%i.png", [appDel.photo count]];
appDel.numberPhoto = [appDel.photo count];
NSString* path = [documentsDirectory stringByAppendingPathComponent:
                  imageName];
NSData* data = UIImagePNGRepresentation(image); 
[data writeToFile:path atomically:YES]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T12:53:36.667

要获取`NSDocuments`目录使用：

```
 NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectory = [paths objectAtIndex:0];

    NSString *filePath = [documentsDirectory stringByAppendingPathComponent:@"MyFile.txt"]; 
```

如何重命名文件，您可以在此处找到：

[如何使用 NSFileManager 重命名文件](https://stackoverflow.com/questions/3500469/how-to-rename-file-using-nsfilemanager)

如果您不知道文档目录中文件的名称，您可以使用：

```
NSArray *directoryContent = [fileManager contentsOfDirectoryAtPath:documentsDirectory error:nil]; 
```

该数组包含您需要的所有文件名。所以你可以重命名它们。

# database - 在android上使用phonegap创建多个数据库sqlite

> ID：15682212
> 
> 赞同：0
> 
> 时间：2013-03-28T12:47:09.347
> 
> 标签：database, sqlite, cordova

我正在尝试在 android 2.2 上使用 apache cordova 2.5 在同一个应用程序上创建多个数据库，但我不能。当我创建第二个数据库时，window.openDatabase 返回 null。有没有办法做到这一点？

感谢和问候！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-13T14:58:08.467

很久以前我有同样的问题。但是现在，有了phonegap 2.9，我不再有这个问题了。

如果更新到新版本的 phonegap 对您来说不是一个选项，您可以尝试使用这个插件：[SQLitePlugin](https://github.com/pgsqlite/PG-SQLitePlugin-Android)。

[他们在这里](http://brodyspark.blogspot.com.br/2012/12/improvements-to-phonegap-sqliteplugin.html)解释了如何使用多个数据库。

（顺便说一下，phonegap 3 引入了一个新的更好的工作流程，你应该试试看 -[更多信息在这里](http://phonegap.com/blog/2013/07/19/adobe-phonegap-3.0-released/)）

# jquery - 当页面加载在 IE 7 和 8 中不起作用时加载/淡入 HTML

> ID：15682219
> 
> 赞同：0
> 
> 时间：2013-03-28T12:47:34.197
> 
> 标签：jquery, internet-explorer-8, internet-explorer-7

以下代码适用于 safari、firefox、IE9 和 chrome，但在 IE8 和 7 中它只显示加载图像，并且在包含所有内容的 .wrap 中不会淡出。有什么问题？

这是在文档就绪功能中，但即使我将它移出那里它也不起作用。

```
 $(window).on('load', function() {

            var firstBackgroundImage = new Image();
                    firstBackgroundImage.src = "img/bg-img.jpg";        
                    firstBackgroundImage.onload = function () {
                        $('#loading-image').hide();
                        $(".wrap").fadeIn(300);
                        loadContent();
                    };
        }); 
```

CSS

```
 .wrap{
         height: 678px; 
         background: url("../img/bg-img.jpg") no-repeat scroll 0 0 transparent;
         margin-top:18px;
         padding-top:1px;
         position:relative;
         display:none;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T13:59:44.130

您准备好文档内的窗口加载事件了吗？您不需要同时指定两者；只需使用准备好的文件。

将两者放在一起很容易导致奇怪的结果。

# ruby - Ruby 数组一次访问 2 个连续（链接）元素

> ID：15682223
> 
> 赞同：31
> 
> 时间：2013-03-28T12:47:45.827
> 
> 标签：ruby, arrays, each

现在，这是数组，

```
[1,2,3,4,5,6,7,8,9] 
```

我想，

```
[1,2],[2,3],[3,4] upto [8,9] 
```

当我这样做时， each_slice(2) 我得到，

```
[[1,2],[3,4]..[8,9]] 
```

我目前正在这样做，

```
arr.each_with_index do |i,j|
  p [i,arr[j+1]].compact #During your arr.size is a odd number, remove nil.
end 
```

有没有更好的办法？？

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2013-03-28T12:50:41.107

Ruby 读懂了你的想法。你想要**连续**的元素吗？

```
[1, 2, 3, 4, 5, 6, 7, 8, 9].each_cons(2).to_a
# => [[1, 2], [2, 3], [3, 4], [4, 5], [5, 6], [6, 7], [7, 8], [8, 9]] 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-28T12:49:17.940

`.each_cons`做你想要的。

```
[1] pry(main)> a = [1,2,3,4,5,6,7,8,9]
=> [1, 2, 3, 4, 5, 6, 7, 8, 9]
[2] pry(main)> a.each_cons(2).to_a
=> [[1, 2], [2, 3], [3, 4], [4, 5], [5, 6], [6, 7], [7, 8], [8, 9]] 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-03-28T12:49:48.377

你几乎是对的:)

```
arr = [1,2,3,4,5,6,7,8,9]
arr.each_cons(2) do |chunk|
  p chunk
end
# >> [1, 2]
# >> [2, 3]
# >> [3, 4]
# >> [4, 5]
# >> [5, 6]
# >> [6, 7]
# >> [7, 8]
# >> [8, 9] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-02-16T12:09:21.993

如果您想实现自己的`each_cons`：

```
arr = [1, 2, 3, 4, 5, 6, 7, 8, 9]
cons = 2

0.upto(arr.size - cons) do |i|
  p arr[i, cons]
end 
```

输出：

```
[1, 2]
[2, 3]
[3, 4]
[4, 5]
[5, 6]
[6, 7]
[7, 8]
[8, 9] 
```

# sql - 按日期分组并检查连续日期

> ID：15682224
> 
> 赞同：0
> 
> 时间：2013-03-28T12:47:48.133
> 
> 标签：sql, tsql, group-by, common-table-expression

我有一组这样的数据

```
date1       Price  Availability  ServiceID
2012-10-01  50     1             5
2012-10-02  60     1             5
2012-10-03  60     1             5
2012-10-04  60     1             5
2012-10-06  60     1             5
2012-10-07  60     0             5
2012-10-08  60     1             5 
```

现在我想检查特定时期的总价格、最低可用性和 serviceid 是多少

例如

```
from 2012-10-01 to 2012-10-03 results would be 170, availability 1 and serviceID 5
from 2012-10-06 to 2012-10-08 results would be 180, availability 0! and serviceID 5
from 2012-10-04 to 2012-10-06 results would be 120, availability 1! and serviceID 5 BUT there is a date missing so availability is 0! 
```

我尝试了类似的东西

```
select date1, sum(price), min(availability), service from #t
group by date1, price, availability, service
having count(date1) = datediff(day, @startdate, @enddate) 
```

这不起作用，因为如果我按 date1 分组，则计数无效。不知道如何获取总和、最小可用性和检查连续日期。

**编辑** 如果我想要一个包含详细规范的结果集。并过滤掉 min(availability) = 0 或非连续日期的结果

```
For example
from 2012-10-01 to 2012-10-03 results would be 170, availability 1 and serviceID 5

date1       Price  Availability  ServiceID
    2012-10-01  50     1             5
    2012-10-02  60     1             5
    2012-10-03  60     1             5

from 2012-10-06 to 2012-10-08 results would be 180, availability 0! and serviceID 5
date1       Price  Availability  ServiceID

from 2012-10-04 to 2012-10-06 results would be 120, availability 1! and serviceID 5 BUT 
date1       Price  Availability  ServiceID 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T13:07:00.117

试试这个：

```
select  sum(price) As TotalPrice, 
        service,
        Case When Count(*) = DateDiff(Day, @Startdate, @EndDate) + 1 
                Then Min(Availability)
                Else 0 End As Availability
from    #T
Where   Date1 >= @StartDate
        And Date1 <= @endDate
group by service 
```

通过根据日期过滤 where 子句中的日期，而不是按日期分组，这允许您获取一个计数或行，然后您可以将其与日期差异匹配。请注意，您需要将 1 添加到日期差异，因为从昨天到今天的 DateDiff 仅为 1，但将代表源数据中的 2 行。

我还应该提到，这实际上并不是在检查连续日期。它只是寻找相应的行数来匹配计算的天数。

根据您的评论和编辑，您可能想尝试这个派生表解决方案。

```
Select  T.date1,
        SummaryData.TotalPrice,
        SummaryData.Availability,
        T.Service
From    #T T
        Inner Join (
            select  sum(price) As TotalPrice, 
            service,
                Case When Count(*) = DateDiff(Day, @Startdate, @EndDate) + 1 
                     Then Min(Availability)
                     Else 0 End As Availability
            from    #T
            Where   Date1 >= @StartDate
                    And Date1 <= @endDate
            group by service
            Having Case When Count(*) = DateDiff(Day, @Startdate, @EndDate) + 1 
                        Then Min(Availability)
                        Else 0 End = 1 
            ) As SummaryData
            On T.Service = SummaryData.Service
Where   Date1 >= @StartDate
        And Date1 <= @endDate 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T13:13:23.953

如果没有缺少日期的曲线球，查询将非常简单：

```
SELECT SUM(price), MIN(availability) AS Availibility, MIN(serviceID) AS serviceID FROM #t
WHERE date1 BETWEEN @Startdate AND @enddate 
```

然而，查找丢失的日期需要一个额外的 CTE，我将使用[t-sql 中的想法获取 2 个日期之间的所有日期](https://stackoverflow.com/questions/3946121/t-sql-get-all-dates-between-2-dates)，它看起来像这样：

```
;WITH dates AS (
  SELECT @startdate AS dt
  UNION ALL
  SELECT DATEADD(dd, 1, dt)
    FROM dates s
   WHERE DATEADD(dd, 1, dt) <= @enddate
)
SELECT SUM(price), 
CASE 
    WHEN EXISTS (SELECT * FROM dates WHERE dt NOT IN (SELECT date1 FROM #t WHERE date1 BETWEEN @Startdate AND @enddate)) THEN 0
    ELSE MIN(availability) 
END AS Availibility, 
MIN(serviceID) AS serviceID FROM #t
WHERE date1 BETWEEN @Startdate AND @enddate 
```

# json - Jsonp代理示例，发送请求到我们自己的站点而不是sencha站点

> ID：15682227
> 
> 赞同：0
> 
> 时间：2013-03-28T12:47:54.613
> 
> 标签：json, extjs4.1

我正在设计一个 jsonp 示例，我想在其中调用一些不同的域，所以我正在调用[http://www.walkingtree.in/forums/topics-browse-remote.php](http://www.walkingtree.in/forums/topics-browse-remote.php)，而不是[http ://www.sencha.com/forum/topics-browse-remote.php](http://www.sencha.com/forum/topics-browse-remote.php)。

在这两种情况下，数据都打印相同的格式，但是在执行时在控制台中出现了一些错误

> Uncaught SyntaxError: Unexpected token : topics-browse-remote.php:1，但没有这样的错误。

当我查看回复时，回复只有一个变化，即当我打电话给 sencha 论坛时，回复就在里面`Ext.data.JsonP.callback1({......})`

在另一个论坛案例中，它就像这样`{.............}`

非常感谢任何帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T12:27:14.600

我得到了解决方案。问题出在 php 文件中。在这种类型的请求中，通常一个查询字符串会带有回调，因此我们需要获取回调并将其附加到我们的响应中，以便响应正确到来。

```
Sample php code :
<? php
$callback = $_REQUEST['callback'];
$output = array('a'=>'any text', 'b'=>'some other Text');
if ($callback) {
    header('Content-Type: text/javascript');
    echo $callback . '(' . json_encode($output) . ');';
} else {
    header('Content-Type: application/x-json');
    echo json_encode($output);
}
?>

Thanks
Tapaswini 
```

# java - 返回整数或字符串的方法

> ID：15682228
> 
> 赞同：0
> 
> 时间：2013-03-28T12:47:56.847
> 
> 标签：java

我必须从控制台读取菜单选项，选项可以是整数或字符串。我的问题是是否有另一种检查输入的方法是字符串还是整数

```
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;

public class Read { 

    public Object read(){
        String option = null;
        BufferedReader buffer = new BufferedReader(new InputStreamReader(System.in));
        try {
            option = buffer.readLine();
            if(isInt(option)){
                return Integer.parseInt(option);
            } else if(isString(option)){
                return option;
            }
        } catch (IOException e) {
            System.out.println("IOException " +e.getMessage());
        }
        return null;
    }

    private boolean isString(String input){
        int choice = Integer.parseInt(input);
        if(choice >= 0){
            return false;
        }
        return true;
    }

    private boolean isInt(String input){
        int choice = Integer.parseInt(input);
        if(choice >= 0){
            return true;
        }
        return false;
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T12:50:03.997

像这样的东西？

```
boolean b = true:
try 
{ 
     int a = Integer.parseInt(input); 
} 
catch(NumberFormatException ex) 
{ 
      b = false;
} 
```

如果它不是整数`b`将是假的，否则仍然存在`true`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T12:55:53.307

这取决于您所说的“整数”是什么意思。

如果您的意思是“整数”，最简单和最好的方法是使用正则表达式：

```
private boolean isInt(String input){
    return input.matches("\\d+");
} 
```

如果您的意思是“java `int`”，那么您必须尝试解析它并将异常视为无效的证明`int`：

```
private boolean isInt(String input){
    try {
        Integer.parseInt(input);
        return true;
    } catch (NumberFormatException ignore) {
        return false;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T12:55:29.853

您可以使用正则表达式，然后该方法如下所示：

```
private boolean isInt(String input){
    return input.matches("\\d+");
} 
```

然后检查它：

```
 if (isInt(option)){
            return Integer.parseInt(option);
        } else {
            return option;
        } 
```

# java - 以编程方式使用 ClassPathXmlApplicationContext 来 crateBean 但无法获取 bean；春天

> ID：15682231
> 
> 赞同：3
> 
> 时间：2013-03-28T12:48:18.103
> 
> 标签：java, spring

```
ClassPathXmlApplicationContext ct = new ClassPathXmlApplicationContext();

ct.refresh();
ConfigurableListableBeanFactory bf = ct.getBeanFactory();

Ad bean = (Ad) bf.createBean(Ad.class);
System.out.println("bean ="+bean);  
System.out.println("size= "+bf.getBeansOfType(Ad.class).size()); // print  0 
```

广告类，这里是广告类信息，AD扩展了AbstractAd类：

```
public class Ad {

 @Override
   public String toString() {
       return "ad[adid=" + this.getId() + "]";
   } 
```

}

这是日志：

```
[DEBUG] Creating instance of bean 'com.Ad'
[DEBUG] Finished creating instance of bean 'com.Ad'
bean = ad[adid=null]
size= 0 
```

在我看来，**大小应该是 1**，有什么问题？

**ps：**最后我使用 GenericApplicationContext 和 BeanDefinition 并成功 createBean 并从上下文中获取，

```
 GenericApplicationContext ct = new GenericApplicationContext();

    ct.refresh();

    ConfigurableListableBeanFactory bf = ct.getBeanFactory();
    System.out.println("--------------start------------/n--------------------------/n-------------------/n");

    BeanDefinition definition = new RootBeanDefinition(Ad.class);
     ct.registerBeanDefinition("sampleService", 
    System.out.println(bf.getBeansOfType(Ad.class).size()); //print 1 
```

日志：

```
[DEBUG] Creating instance of bean 'sampleService'
[DEBUG] Eagerly caching bean 'sampleService' to allow for resolving potential circular    references
[DEBUG] Finished creating instance of bean 'sampleService'
1 
```

但我仍然想知道：**为什么 getBeansOfType(Ad.class).size()**在 ClassPathXmlApplicationContext creteBean 之后为 0 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T07:46:59.790

在 ClassPathXmlApplicationContext 中，您没有传递任何 XML，如果您传递任何 spring config xml，那么它将显示预期的结果。也`Ad bean = (Ad) bf.createBean(Ad.class);`只会创建一个类的bean。但它不会将其添加到小枝上下文中。

在第二个代码中，您使用 registerBeanDefinition 方法注册您的 bean。这样它就显示出预期的结果。

我已经尝试过以下代码并且它可以工作

```
ClassPathXmlApplicationContext classPathXmlApplicationContext = new ClassPathXmlApplicationContext("/Beans.xml");
        classPathXmlApplicationContext.refresh();
        ConfigurableListableBeanFactory beanFactory = classPathXmlApplicationContext.getBeanFactory();
        System.out.println(beanFactory.getBeansOfType(HelloWorld.class).size()); 
```

# bash - 比较关联数组

> ID：15682234
> 
> 赞同：0
> 
> 时间：2013-03-28T12:48:29.147
> 
> 标签：bash

我有一个包含文件名的关联数组。我想对它们使用 cmp 来查看它们是否彼此不同。

```
declare -A configfiles
configfiles["file1"]="file2"

for k in "${!configfiles[@]}"
    do
        if cmp $k $configfiles[$k]; then
            echo Do something
        fi
    done 
```

Bash 返回： cmp: [file1]: No such file or directory

如何在调用 cmp 时让 bash 省略括号？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T12:54:32.233

您需要使用正确的语法来访问数组元素：

```
if cmp "$k" "${configfiles[$k]}"; then 
```

# php - 在 hook_menu 实现中拒绝 Drupal 访问

> ID：15682236
> 
> 赞同：1
> 
> 时间：2013-03-28T12:48:35.247
> 
> 标签：php, drupal, drupal-7, drupal-modules

我试图创建一个 drupal 模块，但是当我进入页面 /polcode 时，我收到了这个通知：

拒绝访问 您无权访问此页面。

这是我的模块：

```
<?php
// $Id$

/**
 * @file
 * A module exemplifying Drupal coding practices and APIs.
 *
 * This module provides a block that lists all of the
 * installed modules. It illustrates coding standards,
 * practices, and API use for Drupal 7.
 */

/**
 * Implements hook_menu().
 */

function polcode_menu() 
{
 $items['polcode'] = array
 (
    'title' => 'tytuł',
    'description' => 'opis',
    'page callback' => 'drupal_get_form',
    'page arguments' => array('input_simple_form'),
    'access calback' => TRUE,
 );
 return $items;
}

/*
 * Form
 */

function input_simple_form($form, &$form_submit)
{
    $form['color'] = array
    (
    '#title' => t('Color'),
    '#type' => 'textfield',
    '#required' => TRUE,
    '#description' => t('Opis'),
    );
    $form['submit'] = array
    (
        '#type' => 'submit',
    '#value' => 'submit',
    );
    return $form;
} 
```

我已经清除了缓存，并在后端启用了模块，而且我以管理员身份登录，怎么了？这是信息：

```
;$Id$

name = polcode
description = A first module.
package = Drupal 7 Development
core = 7.x
files[] = polcode.module

;dependencies[] = autoload
;php = 5.2 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T13:01:13.757

你拼错`access callback`了，把它改成：

```
'access calback' => TRUE, 
```

成为：

```
'access callback' => TRUE, 
```

# javascript - setInterval 在 Chrome 中工作一次，但在其他浏览器中很好

> ID：15682240
> 
> 赞同：0
> 
> 时间：2013-03-28T12:48:44.843
> 
> 标签：javascript

我有以下幻灯片代码：

**HTML**

```
<div id="slideshow"><img src="common/images/background/Slide1b.jpg" />
   <img src="common/images/background/Slide2b.jpg" />
   <img src="common/images/background/Slide3b.jpg" />
   <img src="common/images/background/Slide4b.jpg" />
</div> 
```

**jQuery**

```
var opt1 = 1;
$(document).ready(function() {

    $('#slideshow').supersize();
    all_images = $('#slideshow > img');
    all_images.hide();

    first = $('#slideshow > img:eq(0)');
    first.show().attr('class', 'power');

    setInterval(function() { 
        var total = $('#slideshow > img').length;

            if(opt1 < total) {
                var current = $('.power');
                var next = $('.power').next();              

                current.removeClass('power').fadeOut('slow');
                next.fadeIn('slow').addClass('power');

                ++opt1;
            } else {
                opt1 = 1;
                all_images.removeClass('power').fadeOut('slow');
                first.addClass('power').fadeIn('slow');             
            }
    }, 2000);       

}); 
```

它在所有其他浏览器中运行良好，除了在 Google Chrome 中它只触发一次。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T00:16:21.907

这是一个有效的答案，我不知道为什么 chrome 比 setInterval 更喜欢 setTimeout，但确实如此。我也使用 .animate 代替 .fadeIn 和 .fadeOut。

```
$(document).ready(function()
{
    $('#slideshow').supersize();
    var images = $('#slideshow>img');
    images.css('opacity', 0)

    var first = images.eq(0);
    first.css('opacity', 1).addClass('power');

    setTimeout(on_timer, 2000);

    function on_timer()
    {
       var current = $('.power');
       var next = $('.power').next();       

       if (next.length == 0)
          next = first;

       current.removeClass('power').animate({opacity: 0}, 1000);
       next.css('opacity', 0).animate({opacity: 1}, 1000).addClass('power');

       setTimeout(on_timer, 2000);
    }
}); 
```

演示

```
http://62.168.145.82/slideshow/ 
```

# javascript - 搜索实现

> ID：15682243
> 
> 赞同：0
> 
> 时间：2013-03-28T12:48:48.903
> 
> 标签：javascript, html, regex, search

我的网站上的搜索是使用正则表达式实现的：

```
RegExp(name, 'i') 
```

其中“名称”是输入块的值。问题是点匹配任何字符，当我输入点时，搜索会给出错误的结果。我应该如何改变正则表达式的模式来排除这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T12:52:31.177

如果您不想允许某些正则表达式，那么您可以进行搜索/替换以转义这些值，例如`.`变成`\.`.

您需要在提示中澄清某些正则表达式将被视为文字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T12:52:59.267

您应该创建一些正则表达式转义器来转义所有元字符。

我认为这个函数会适合：（在[Is there a RegExp.escape function in JavaScript? 中](https://stackoverflow.com/questions/3561493/is-there-a-regexp-escape-function-in-javascript)找到）

```
RegExp.escape= function(s) {
    return s.replace(/[-\/\\^$*+?.()|[\]{}]/g, '\\$&')
}; 
```

# php - MySQL 错误：您的 SQL 语法有错误

> ID：15682251
> 
> 赞同：1
> 
> 时间：2013-03-28T12:49:17.567
> 
> 标签：php, mysql, sql, sql-insert

我从 mySQL 收到此错误消息：

```
You have an error in your SQL syntax; check the manual that corresponds to your 
MySQL server version for the right syntax to use near 'key,time) 
VALUES ('FreeTest','86400')' at line 2 
```

这是代码：

```
if ((isset($_POST['key'])) && (isset($_POST['days']))) {

  $key = mysql_escape_string($_POST['key']);
  $days = mysql_escape_string($_POST['days'] * 86400);

  $add = "INSERT INTO licence
  (key,time)
  VALUES
  ('$key','$days')";

  $addkey = mysql_query($add);
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-28T12:50:02.777

列名`KEY`，它是列名之一，**恰好是一个保留关键字**，你需要用反引号转义，这样你就不会出现语法错误，`TIME`也是一个保留的关键字，但 mysql 允许它在没有反引号的情况下使用。

```
INSERT INTO licence (`key`,time) VALUES ('$key','$days') 
```

*   [MySQL 保留关键字列表](http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html)

作为旁注，[`SQL Injection`](http://bobby-tables.com/)如果变量的值（*s*）来自外部，则查询很容易受到攻击。请看下面的文章，了解如何预防。通过使用`PreparedStatements`，您可以摆脱在值周围使用单引号。

*   [如何*防止*PHP 中的 SQL 注入？](https://stackoverflow.com/questions/60174/how-to-prevent-sql-injection-in-php)

# ruby-on-rails - 将我的网站的根设置为命名空间中的控制器

> ID：15682253
> 
> 赞同：0
> 
> 时间：2013-03-28T12:49:19.033
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, routing, root

我将在我的复活节假期里花一些时间在 Rails 上学习红宝石。我的路由遇到了问题。我希望你能帮我解决这个问题。

我要做的是将命名空间*主页中的控制器**索引*设置为根目录（当我访问网站的根目录时我想使用的控制器）。请注意，我的控制器称为索引，而我要使用的方法也称为索引。

 ***这是我的控制器的结构：**

```
app
  -controllers
     -home
        -index_controller.rb 
```

**我的 index_controller.rb 看起来像这样：**

```
class Home::IndexController < ApplicationController
  def index
     @testing = 1
  end
end 
```

**我的 routes.rb 文件如下所示：**

```
MyFirstRail::Application.routes.draw do
    namespace :home do
        get "/" => "index#index"
    end
end 
```

我看了一下[这个](https://stackoverflow.com/questions/12857996/rails-define-root-to-namespace)问题 - 但我无法让它发挥作用。

我正在使用 rails 3 和 Rubymine 作为 IDE（如果有帮助的话）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T12:55:01.310

这就是我在项目中的做法：

```
root :to => "home::index#index" 
```

结构总是相同的`root :to`（这是用来定义根路由的:)）

```
root :to => "controller_name#action" 
```

您的命名空间控制器在这里被简单地命名为`home::index`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T12:53:03.470

您可以尝试在路线中这样做，

```
root :to => "controller#action" 
```*

# c - 是否可以使用 CUDA 中的推力库为 2D 数组使用推力::device_vector 和推力::fill

> ID：15682254
> 
> 赞同：4
> 
> 时间：2013-03-28T12:49:27.887
> 
> 标签：c, optimization, cuda, thrust

我是新来使用推力库。我有使用全局二维数组的 CUDA C 代码。我在我的代码中使用内核函数对其进行初始化。

我必须知道是否可以使用`thrust::device_vector`或`thrust::fill`初始化和填充二维数组。

例如：

```
// initialize 1D array with ten numbers in a device_vector 
    thrust::device_vector<int> D(10); 
```

可以给吗。。

```
thrust::device_vector<int> D[5][10]; 
```

如果可能的话，我将如何使用`thrust::fill`功能。

我的目标是使用推力库优化代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T14:49:30.543

在 STL 和推力中，[向量](http://www.cplusplus.com/reference/vector/vector/)是数据元素的容器，遵循严格的线性序列，因此本质上基本上是一维的。总之，这些数据元素可以是普通类型，甚至是结构体和对象，但它们不能是其他向量（与 STL 不同）。

您可以创建一个向量数组，但对它们的推力操作通常需要对数组中的每个向量一个接一个地完成。

关于语法，您不能这样做：

```
thrust::device_vector D[5][10]; 
```

你可以这样做：

```
thrust::device_vector<int> D[5][10]; 
```

但是，这将创建一个 2-D*向量*数组，这不是您想要的，我不认为。

在许多情况下，二维数组可以被“展平”以像一维一样处理，并且在不了解您的情况的情况下，这是我建议调查的内容。如果您可以使用指针索引将您的二维数组视为一维数组，那么您可以使用单个推力::fill 调用填充整个事物，例如。

我还建议您熟悉推力[快速入门指南](https://github.com/thrust/thrust/wiki/Quick-Start-Guide)。

这是一个工作示例，显示了主机上的二维数组，并进行了基本的展平：

```
#include <thrust/host_vector.h>
#include <thrust/device_vector.h>
#include <thrust/sequence.h>

#define H 5
#define W 10
__global__ void kernel(int *data, int row, int col) {

  printf("Element (%d, %d) = %d\n", row, col, data[(row*W)+col]);

}

int main(void)
{
    int h[H][W];
    thrust::device_vector<int> d(H*W);

    thrust::copy(&(h[0][0]), &(h[H-1][W-1]), d.begin());
    thrust::sequence(d.begin(), d.end());
    kernel<<<1,1>>>(thrust::raw_pointer_cast(d.data()), 2, 3);
    cudaDeviceSynchronize();

    return 0;
} 
```

# jquery - 递归 Ajax 延迟对象

> ID：15682259
> 
> 赞同：3
> 
> 时间：2013-03-28T12:49:35.193
> 
> 标签：jquery, jquery-deferred, promise

我有以下情况。我想从服务器加载文件 A，该服务器又会尝试加载文件 A1、A2、A3、... An 并且每个文件 A[1-n] 将依次加载其他文件，这可以继续；但它已经结束了。我想使用延迟对象来设置它（以免使用 async: false 挂起浏览器），但是加载和解析文件的递归让我对如何设置对象感到困惑。此外，还要求必须完成最高递归深度级别 (l)，然后我才能继续级别 (l-1)。对于没有递归的情况，此代码有效，但递归情况使我无法理解。

```
var loadFile = function (index, url, scope, callback) {
    $.ajax ({url: url, type: 'GET', dataType: 'text'})
    .done (function (responseText) {
        // store response in array
        scope.requests[index] = responseText;
    })
    .fail (function (xhr, status, error) {
        scope.requests[index] = 'error';
    })
    .always (function (responseText) {
        // loop through entire response array from the beginning
        for (var j = 0; j < scope.requests.length; j++)
        {
            if (scope.requests[j] === 'unprocessed') return;
            else if (scope.requests[j] === 'error')
                scope.requests[j] = 'done';
            else if (scope.requests[j] !== 'done')
            {
                parseFile (scope.requests[j], scope, callback);
                scope.requests[j] = 'done';
            }
        }

        // if all are done then reset the array and run the callback
        delete scope.requests;

        if (callback) callback();
    });
}

var parseFile = function (responseText, scope, callback) {
    var lines = responseText.split("\n");

    for (var l = 0; l < lines.length; l++) {
        var line = lines[l];
        line = line.replace (/^\s+/, ''); // remove leading white space
        if (line.charAt(0) === '1') // file reference
        {
            var attrs = line.split (/\s+/);

            // the file will exist in any of the paths in pathList
            for (var i = 0; i < scope.pathList.length; i++) {
                scope.requests.push ('unprocessed');
                loadFile (++index, scope.pathList[i] + attrs[14], scope, callback);
            }
        }
    }
}

var index = 0;
var this.requests = [];
this.requests.push ('unprocessed');
loadFile (index, fileAi, this, callback); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T14:37:32.197

基本思想是这样的：

1.  为当前级别的每个文件发送`ajax`请求。
2.  完成整个级别后，解析所有响应。
3.  如果有更多，递归。如果没有，请调用回调。

由于您请求的某些文件不存在（这是意料之中的），您需要创建自己的 Deferreds。然后你可以从 ajax`done`和`fail`回调中解决它们，有效地忽略失败。

另外，我根据您的要求添加了一个缓存对象。该对象将 url 映射到 Promise。当您将`done`回调附加到已解决的承诺时，会立即使用相同的`response`参数调用回调。这是缓存内容的好方法，因为第一个请求不必完成就可以在缓存中，因为您正在缓存请求而不是响应。因此，如果您在第一个请求完成之前请求同一个文件 4 次，它仍然只会导致一次`ajax`调用。

注意：由于我添加了 function `getFile`，我们评论中的作用域/闭包问题不再是问题（因为每个`dfd`变量现在都在函数作用域中），所以我认为代码不会那么混乱。问题是非常常见的循环[范围](https://stackoverflow.com/questions/1451009/javascript-infamous-loop-problem) [问题](https://stackoverflow.com/questions/3273210/javascript-closures-variable-scope-question)。

代码：

```
// load all files, starting with startUrl.  
// call callback when done.
var loadAll = function(startUrl, callback) {
    var pathList = []; // assuming this has some base urls in it.
    var dfds = []; // dfds for the current level.
    var urls = [startUrl]; // urls for current level.
    var responses = []; // responses for current level.
    var cache = {}; // object to map urls to promises.

    // given the responseText, add any referenced urls to the urls array
    var parseFile = function (responseText) {
        var lines = responseText.split("\n");

        for (var l = 0; l < lines.length; l++) {
            var line = lines[l];
            line = line.replace (/^\s+/, ''); // remove leading white space
            if (line.charAt(0) === '1') // file reference
            {
                var attrs = line.split (/\s+/);

                // the file will exist in any of the paths in pathList
                for (var i = 0; i < pathList.length; i++) {
                    // add new path to urls array
                    urls.push (pathList[i] + attrs[14]);
                }
            }
        }
    };

    // load one file.
    // check cache for existing promise for the url.
    var getFile = function(url) {
        var dfd;

        if(cache.hasOwnProperty(url)){
            // use cached promise.
            // if it is already resolved, any callback attached will be called immediately.
            dfd = cache[url];
            dfds.push(cache[url]);
        } else {
            dfd = $.Deferred();
            $.ajax ({url: url, type: 'GET', dataType: 'text'}).done(function(response){
                // resolve and pass response.
                dfd.resolve(response);
            }).fail(function(){
                // resolve and pass null, so this error is ignored.
                dfd.resolve(null);
            });
            dfds.push(dfd.promise());
            cache[url] = dfd.promise();
        }

        // when the request is done, add response to array.
        dfd.done(function(response) {
            if(response){
                // add to responses array.
                // might want to check if the same response is already in the array.
                responses.push(response);
            }
        });
    };

    // request each file in the urls array.
    // recurse when all requests done, or call callback.
    var loadLevel = function () {
        dfds = [];
        responses = [];

        for (var l = 0; l < urls.length; l++) {
            getFile(urls[l]);
        }

        $.when.apply($, dfds).done(function(){
            // entire level is done loading now.
            // each done function above has been called already, 
            // so responses array is full.
            urls = [];

            // parse all the responses for this level.
            // this will refill urls array.
            for (var i = 0; i < responses.length; i++) {
                parseFile(responses[i]);
            }

            if(urls.length === 0) {
                // done
                callback();
            } else {
                // load next level
                loadLevel();
            }
        });
    };

    // load first level
    loadLevel();
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T13:07:19.773

我认为您无法使用按原样结构化的代码实现“逐级”块，因为编写的代码将始终尝试在递归展开之前完成整个分支，即给定以下结构：

```
 1
    / \
   2   6
  /|\  |
 3 4 5 7 
```

它会按照显示的数字顺序跟随节点，而不是`[1] [2 6] [3 4 5 7]`（或者您的意思是`[3 4 5 7] [2 6] [1]`？）

我无法提供完整的解决方案，只有一些我认为会有所帮助的提示。

1.  您需要为每个级别创建一个数组，其中包含该级别每个请求文件的延迟对象。

2.  您不能为此使用该`jqXHR`对象，因为您也在这种`.fail`情况下递归，因此您必须自己创建一个单独的对象`$.Deferred()`，然后`.resolve`在您的`.always`处理程序中创建一个。

3.  用于`$.when.apply($, myArray).done(...)`触发仅在*所有*元素`myArray`都已完成时发生的回调。

# visual-studio-2010 - 将 Visual C++ 控制台项目转换为 Forms 项目 (Visual Studio 2010)

> ID：15682261
> 
> 赞同：0
> 
> 时间：2013-03-28T12:49:36.230
> 
> 标签：visual-studio-2010, visual-c++

在 Visual Studio 2010 中，我有一个 CLR C++ 控制台项目，我想将其更改为 Forms 项目，这样我就可以添加一个表单并使用设计器等等。有没有好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T13:42:14.803

比较旧的项目模板，然后进行必要的更改，例如添加对 winforms 的引用以及将入口点函数从 winmain 更改回 main。

详见[http://jiangsheng.net/2012/12/17/how-to-migrating-a-clr-console-visual-c-project-to-windows-forms/](http://jiangsheng.net/2012/12/17/how-to-migrating-a-clr-console-visual-c-project-to-windows-forms/)。这篇文章是为 2012 年写的，但应该在 2010 年工作。

# actionscript-3 - 错误 #1009：无法访问空对象引用的属性或方法

> ID：15682268
> 
> 赞同：-1
> 
> 时间：2013-03-28T12:49:48.423
> 
> 标签：actionscript-3, flash

`imgLoader`在此 Flash AS3 应用程序上工作，当我尝试制作可点击时，我不断收到此错误。

imgLoader 是一个动态加载器，它将从 XML 文件加载图像并使用 ActionScript 创建。

这是我得到的完整错误：

```
TypeError: Error #1009: Cannot access a property or method of a null object reference.
    at apptest_fla::MainTimeline/frame1()[apptest_fla.MainTimeline::frame1:65]
    at runtime::ContentPlayer/loadInitialContent()
    at runtime::ContentPlayer/playRawContent()
    at runtime::ContentPlayer/playContent()
    at runtime::AppRunner/run()
    at ADLAppEntry/run()
    at global/runtime::ADLEntry() 
```

这是使`imgLoader`可点击的代码：

```
imgLoader.addEventListener(MouseEvent.CLICK, doSomething);
function doSomething(event:MouseEvent){
nextFrame() 
```

有谁知道为什么会这样？

**编辑**

这是我的全部代码：

```
stop();

import flash.display.Loader;
import flash.events.Event;
import flash.net.URLRequest;
import flash.display.Sprite; 
import flash.filters.DropShadowFilter; 

var xmlLoader11:URLLoader;
var xml11:XML;

var uRequest11 = new URLRequest("my.xml");
xmlLoader11 = new URLLoader(uRequest11);
xmlLoader11.addEventListener(Event.COMPLETE, onXMLLoad11);
var imgLoader11:Loader;
var nameLoader11:Loader;
var myString11:String = 'loading';

function onXMLLoad11(e:Event) {
    xml11 = new XML(e.target.data);
    imgLoader11 = new Loader();
    imgLoader11.contentLoaderInfo.addEventListener(Event.COMPLETE, onImgLoaded11);
    imgLoader11.load(new URLRequest(xml11.Data.Image.text()[0]));
    Nametxt11.text =  "" + xml11.Data.Name.text()[0];
}

function onImgLoaded11(e:Event) {
    addChild(imgLoader11);
    imgLoader11.height = 300;
    imgLoader11.width = 300;

    var bitmapContent11:Bitmap = Bitmap( e.target.content );
    bitmapContent11.smoothing = true;
    addChild( bitmapContent11 );
    bitmapContent11.height = 150;
    bitmapContent11.width = 150;
    bitmapContent11.y = 65;
    bitmapContent11.x = 85;
}
imgLoader11.addEventListener(MouseEvent.CLICK, doSomething);
function doSomething(event:MouseEvent){
nextFrame() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T13:19:19.613

调用它时是否会中断：

```
imgLoader.addEventListener(MouseEvent.CLICK, doSomething); 
```

或者当它被调用时：

```
nextFrame() 
```

在第一种情况下，imgLoader 为空。在第二种情况下，您在调用 nextFrame() 之后尝试访问字段或方法的内容为空。

编辑：

尝试移动这个：

```
imgLoader11.addEventListener(MouseEvent.CLICK, doSomething);
function doSomething(event:MouseEvent){
nextFrame()
} 
```

到 onXMLLoad11() 的底部。

```
function onXMLLoad11(e:Event) {
    xml11 = new XML(e.target.data);
    imgLoader11 = new Loader();
    imgLoader11.contentLoaderInfo.addEventListener(Event.COMPLETE, onImgLoaded11);
    imgLoader11.load(new URLRequest(xml11.Data.Image.text()[0]));
    Nametxt11.text =  "" + xml11.Data.Name.text()[0];

    imgLoader11.addEventListener(MouseEvent.CLICK, doSomething);
    function doSomething(event:MouseEvent){
    nextFrame()
    }
} 
```

# javascript - 当我在 window.open 中设置位置 no 时，地址栏详细信息不会隐藏

> ID：15682281
> 
> 赞同：0
> 
> 时间：2013-03-28T12:50:14.617
> 
> 标签：javascript, jquery, html

在我的应用程序中，我想显示带有地址栏详细信息的网页应该被隐藏。因此，我尝试了以下代码并设置 location=no。

```
var strStyle  = 'status=yes,menubar=no,location=no,toolbar=no,scrollbars=no,height='+strHeight+'px,width='+strWidth+'px,left='+strLeft+'px,top='+strTop+'px';
var newWindow = window.open(strFileName, strLaunchLocation, strStyle); 
```

不幸的是，它无法隐藏每个人都可以看到的地址栏。如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T12:54:15.853

现代浏览器不再隐藏地址栏。

将 location=no 添加到 window.open 只会使地址栏只读。

# asp.net - 当我尝试在弹出窗口中显示 RDLC 报告时如何避免安全问题？

> ID：15682283
> 
> 赞同：0
> 
> 时间：2013-03-28T12:50:17.800
> 
> 标签：asp.net, .net, report, rdlc

作为标题，我尝试在弹出窗口中显示 RDLC 报告。但无法显示图表类型报告，而是显示“未找到图像”图片，而表格类型报告可以正确显示。而且我也尝试在父页面中显示报告，然后它工作正常。我认为它是由浏览器的安全设置带来的。如何避免这个问题？因为我不希望每个用户在运行报告时都更改他们的设置...

# php - PHP 中 RABBITMQ 的连接池

> ID：15682284
> 
> 赞同：0
> 
> 时间：2013-03-28T12:50:25.070
> 
> 标签：php, rabbitmq, connection-pooling, pecl

我想在我的项目中使用 RabbitMQ。它主要是用 Apache2 服务器托管的 PHP 编写的。为了处理 RabbitMQ，我选择了 PECL 扩展。我在某处读过类似的内容：“*连接很昂贵，所以我们使用通道。你每个连接可以有多个通道*“

问题是我无法弄清楚 - 在这样的环境中 - 如何重用连接并制作类似池的东西。

所以有什么帮助吗？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T05:39:14.000

我不认为你可以汇集连接，但你可以创建一个，它可以拥有你想要的任意数量的频道。

该连接是一个长期存在的 tcp 连接，因此您如何将这些连接起来以重用。

您可以使用 videla 的 phpamqp_lib，它使用简单。

# java - 双击运行jar文件时如何增加堆栈大小

> ID：15682289
> 
> 赞同：0
> 
> 时间：2013-03-28T12:50:46.630
> 
> 标签：java

我知道我可以在使用命令提示符运行 jar 文件时使用`-Xss<size>`参数修改堆栈大小。但是，当我双击 jar 文件运行它时，有什么办法吗？我的意思是，我希望 jar 文件在我双击它时以增加的堆栈大小运行。我必须修改清单文件吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T12:57:30.340

您可以修改 JVM 的默认属性。您可以通过在我认为的 Windows 上设置环境变量 JAVA_TOOL_OPTIONS 来做到这一点（待确认）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T13:21:53.480

创建一个批处理文件并为 .jar 类型添加一个关联。当您右键单击 jar 时，您可以选择如何启动。在批处理文件中添加您想要的任何参数。您甚至可以将其设为默认启动器。

![在此处输入图像描述](../Images/f0b01114f44c66937b451794f3c796a9.png)

为了让您开始，这里是我的一个更简单的批处理文件的示例：

```
call setjdk jre7_64bit
call java -jar %1
pause 
```

# computer-vision - 人脸跟踪或“动态识别”

> ID：15682295
> 
> 赞同：1
> 
> 时间：2013-03-28T12:51:02.153
> 
> 标签：computer-vision, video-processing, face-detection, face-recognition

考虑到以下情况，人脸检测/跟踪的最佳方法是什么：

当人进入场景/帧时，应该在下一帧中检测和识别，直到他/她离开场景。

也应该能够同时为多个用户执行此操作。

我有中提琴琼斯检测和费希尔人脸识别的经验。但是我只对之前准备好的学习集使用了ff识别，现在我需要任何进入场景的用户的东西..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T18:42:14.520

我也对不同的解决方案感兴趣。我对多张人脸和 rekognition api ( [http://rekognition.com](http://rekognition.com) ) 使用了 opencv 人脸检测，并经常推送人脸并重新训练数据集。从我们的角度来看是轻量级的，但我相信有更强大的解决方案可以解决这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T09:01:03.377

你试过[VideoSurveillance](http://opencv.willowgarage.com/wiki/VideoSurveillance)吗？也称为 OpenCV blob 跟踪器。它是一个基于运动的跟踪器，具有跨帧数据关联 (1)，如果您想用面部检测替换运动，您必须通过用检测响应替换前景蒙版来调整代码。这种方法在文献中被称为跟踪检测。

(1) “遮挡处理的外观模型”，Andrew Senior 等人。

# android - Android ADT Eclipse：com.android.common 和 com.android.ex 导入无法解析

> ID：15682297
> 
> 赞同：3
> 
> 时间：2013-03-28T12:51:09.967
> 
> 标签：android, eclipse, google-calendar-api, importerror

我正在尝试为 Android 构建 Google 的开源日历应用程序（来源：[https](https://github.com/android/platform_packages_apps_calendar) ://github.com/android/platform_packages_apps_calendar ），以便我可以稍微分离它的代码。当我将新克隆的项目导入 Eclipse 时，我得到了一堆`____ cannot be resolved to a type`错误。仔细查看未解决的类型，根本原因似乎是：

```
The import com.android.common cannot be resolved
The import com.android.ex cannot be resolved 
```

我一直在谷歌搜索，我似乎无法弄清楚发生了什么？我一定错过了一些图书馆？我已经安装了 Android SDK Manager 中的所有内容，甚至是可选库。我已经尝试清理和修复构建路径属性等。错误仍然存​​在。

有人知道我能做些什么来编译这个东西吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-27T17:34:28.760

我已经设法添加了几乎所有必需的依赖项，现在我得到了一个几乎可以运行的版本。请从[这里查看](https://github.com/mohelsaka/google-calendar-almost-running)

您还可以检查最后一次[提交](https://github.com/mohelsaka/google-calendar-almost-running/commit/bfd1ef8d334b243e9d5b5637fb5501eb7f720acf)，它包含我为获得此运行版本所做的所有工作。

祝你今天过得愉快 ：）

# c# - ado.net 使用从数据库中获取记录

> ID：15682304
> 
> 赞同：-2
> 
> 时间：2013-03-28T12:51:20.873
> 
> 标签：c#, .net, windows, service, ado.net

在将数据填充到数据集中时出现此错误

```
try
{

    cnn.Open();

    SqlCommand cmd = new SqlCommand(temp, cnn);

    cmd.CommandTimeout = 999600000;
    cmd.CommandType = CommandType.Text;
    cmd.ExecuteNonQuery();

    DataSet ds = new DataSet();
    SqlDataAdapter dscmd = new SqlDataAdapter(cmd);

    dscmd.Fill(ds);
    dt = ds.Tables[0];

} 
```

SQL 查询包含 80000 条记录。

> 由于内存使用过多，会话已终止。尝试修改您的查询以处理更少的行。当前命令发生严重错误。结果，如果有的话，应该丢弃。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T13:07:14.783

这是一种 SQL azure 保护机制（具体为错误 40553），与调用 C#/.NET/ADO.NET 无关。解决此问题的唯一方法是通过*处理更少的数据*或至少以让 SQL azure 满意的方式来使 SQL azure 快乐。没有您的 sql 命令 ( `temp`) 的可见性，我们无法提供任何内容。

另请参阅深入了解[SQL Azure – 第 2 部分 – 保护机制](http://blogs.msdn.com/b/psssql/archive/2011/06/15/dipping-my-toes-into-sql-azure-part-2-protection-mechanisms.aspx)。

MSDN 上有关于此错误的[相关说明：](http://msdn.microsoft.com/en-us/library/windowsazure/ff394106.aspx)

> 减少 Transact-SQL 代码中 ORDER BY 和 GROUP BY 操作的数量有助于减少查询的内存需求。

# c++ - C++ stringstream 到 char* 转换内存分配

> ID：15682308
> 
> 赞同：0
> 
> 时间：2013-03-28T12:51:33.753
> 
> 标签：c++, arrays, memory-management, stringstream, istringstream

谁能解释以下代码如何工作并且不会**使**应用程序崩溃？

```
int main() {
    char *tempStr = new char[5];
    tempStr[0] = '\0';
    string stemp = "helloworld";
    stringstream sstream;
    sstream.str(stemp);
    cout << "len before = " << strlen(tempStr);
    sstream >> tempStr;
    cout << "len after = " << strlen(tempStr) << endl;
    cout << tempStr << endl;
    delete[] tempStr;
    return 1;
} 
```

我得到的输出为

```
len before = 0
len after = 10
helloworld 
```

1.  是否`stringstream`为 char 指针中的额外字符分配内存？
2.  还想知道将数据从`stringstream`char* 数组复制到不超过分配的内存的正确方法`char*`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T12:55:20.367

> stringstream 是否为 char 指针中的额外字符分配内存？

不，您的代码会调用未定义的行为。

> 还想知道将数据从 stringstream 复制到 char* 数组的正确方法，而不超出为 char* 分配的内存？

读入`char*`. 用于`std::string`从流中读取输入。但是，如果您仍然想为了知识而了解，请使用[`std::istream::read()`](http://en.cppreference.com/w/cpp/io/basic_istream/read).

```
if ( sstream.read(tempStr, 5 ) )
{
   //read succeeded
} 
```

* * *

顺便说一句，您可以合并这两行：

```
stringstream sstream;
sstream.str(stemp); 
```

合为一：

```
stringstream sstream(stemp); 
```

或者简单地说：

```
stringstream sstream("helloworld"); //no need of stemp! 
```

希望有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T12:54:05.577

1.  不。你覆盖了内存，调用了未定义的行为，但没有发生任何明显的事情，所以错误没有被注意到。没有要求做这样的事情应该触发任何人类可见的错误或特殊动作，因此措辞*undefined behavior*。
2.  您将不得不逐块进行，`char`如果空间不足，则重新分配数组。在 C++ 中，手动执行此操作毫无意义。只需使用`std::string`并完成。

# java - 如何保护客户端-服务器应用程序中的通信？

> ID：15682310
> 
> 赞同：0
> 
> 时间：2013-03-28T12:51:44.123
> 
> 标签：java, spring, security, https

我在tomcat服务器上运行后端，在浏览器中运行客户端。应用程序建立在 Spring 3 MVC + Spring 安全框架之上。如何保证通信安全？除了将服务器设置为仅通过 HTTPS 访问之外，还有其他选择吗？我没有这方面的经验，所以这可能是一个愚蠢的问题，但这会影响我的应用程序吗？当服务器通过 GET/POST 请求通过 https 与客户端通信时，我是否必须在我的应用程序中进行设置？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T13:08:37.867

这在某种程度上取决于您所说的“安全”是什么意思。如果您想要隐私，则必须使用 TLS (SSL) 作为传输。

如果您只关心**authentication**，那么您还有另一个选择：*Digest Authentication*。

摘要式身份验证允许客户端（通常是浏览器）和服务器以安全的方式交换身份验证凭据，而无需保护整个通信。如果您使用摘要式身份验证，那么第三方仍然可以：

1.  查看客户端和服务器交换了哪些数据
2.  将自己插入客户端和服务器之间并更改交换

第三方*不能*做的是欺骗身份验证或在传输过程中窃取用户名/密码。

如果这还不够安全，则需要 TLS。您不一定要购买证书。您可以使用 OpenSSL 生成您自己的。但是，此证书不会自动被浏览器信任，因此您不能真正将其用于公共站点。

您需要查阅服务器文档以了解如何设置 HTTPS 或摘要式身份验证，具体取决于您的需要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T13:10:11.163

您的应用程序不应受到从 HTTP 切换到 HTTPS 的影响，Tomcat 会处理这个问题，或者可能是前面的 Apache。重要的是要理解，HTTPS 是服务器的东西，而不是应用程序的主题，因为客户端与服务器 (Tomcat) 建立连接，而不是与您的应用程序建立连接。查看 Tomcat 文档，很清楚事情是如何工作的。

而且，就像其他人所说：从你所说的最好使用 HTTPS (TLS/SSL)。证书一开始有点吓人，但值得花时间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T12:56:08.250

HTTPS 是 HTTP 的 (S)ecure 形式，因为您有一个 HTTP 客户端服务器应用程序，我当然会使用 HTTPS。您只需要为您的网站创建一个 SSL 证书并将对您网站的访问限制为仅 HTTPS，那么您的安全性就达到了 99.99%。您的证书可以是来自 Versign 的商业证书或等效证书，也可以是某些开源引擎。对于客户端，不需要做任何事情来支持 HTTPS

# javascript - 将数据发布到外部表单

> ID：15682318
> 
> 赞同：0
> 
> 时间：2013-03-28T12:52:15.097
> 
> 标签：javascript, forms, http, post

我需要将数据发布到不受我控制的外部网站上。我正在构建工具以允许用户在一个地方填写数据，然后发布到包含类似表单的多个外部站点，而不是单独填写每个表单。

基本上，工作流程是这样的：

1.  用户在我的页面上填写综合表格
2.  这些数据被存储到我的数据库中
3.  用户被重定向到感谢页面，并带有指向外部表单的链接
4.  单击任何链接时，应打开新窗口，其中部分字段包含我的表单中的匹配字段

最后一步是骇人听闻的。我依靠外部表单来正确编码，所以当我在数据不足的情况下发布到它（验证码和缺少其他必填字段）时，我指望该页面重新加载已发布的数据并合并到表单中，和标记有缺失数据的字段。这样，用户可以只填写那些丢失的数据（理想情况下只有验证码），而不必再花一个小时重新输入相同的数据。

这意味着做 curl post 不会削减它，所以我采用了以下 JS 方法。

```
function repostForm(id, url) {    

var map = fieldMap[id];  // this is map between my field names and external form field names

// construct form 
var form = document.createElement('form');
form.setAttribute('method', 'post');
form.setAttribute('action', url);   
form.setAttribute('target', '_blank');

for (i=0; i<map.length; i++) {
    var input = document.createElement('input');
    input.setAttribute('name', map[i].external);
    input.setAttribute('value', submissionData[map[i].local]);
    form.appendChild(input);
}

document.body.appendChild(form);
form.submit(); 
```

}

这段代码执行得很好，我可以看到数据被发布到外部表单。但是，我没有向我显示部分填写的表格缺少一些字段，而是得到了空白表格。

我现在用两种不同的形式尝试了这个，它们都是这样的。

我是不是很倒霉，所以这些表单有额外的安全检查（比如检查 HTTP 引用字段），或者我错过了更基本的东西？我无法发送这些表格的链接，因为该信息可能很敏感，所以我很感兴趣这个基本想法是否应该有效，在理想情况下，如果一切都合适，或者它是否有一些基本缺陷。

我知道会有很多极端情况，我只对原则感兴趣。

感谢提前分配

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T13:04:50.623

“但是，我没有向我显示部分填写但缺少某些字段的表单，我只是得到空白表单”
好吧，服务器端部分仍然需要显示部分填写的表单，并且如果那个“后接收者”的编码器没有编码该功能然后，就像所有与计算机相关的东西一样，进入该代码的通用规则是正确的：“如果你没有告诉它做某事，它就不会做。”

这以及诸如 HTTP Referer 字段之类的东西以及人们用来保护他们免受外部表单发布的其他技巧。

如果您的用户通过您控制的代理服务器导航到外部站点，您就可以摆脱它......提示。您可以在 php 中编写一个代码，解析 html/ecmascript（在 php 中）（或尝试对其进行正则表达式），在源中设置字段并将修改后的源发送给用户。这有点像“中间人”（攻击）。

使用此解决方案时，请记住，这最终会使您受到黑客的注意：因为您拥有的用户越多，破解您的系统并获得所有这些美味的用户数据的“奖池”就越大！同样，如果“他们”设法接管了该代理服务器（您的用户相信您不会滥用该代理服务器），他们就可以访问您所有用户的无数用户帐户！

祝你好运！

# java - GWT AsyncCallback 不填充静态成员

> ID：15682322
> 
> 赞同：1
> 
> 时间：2013-03-28T12:52:20.913
> 
> 标签：java, gwt, asynchronous, smartgwt

我有一个`AsyncCallback`电话联系我的 GWT-RPC 服务并检索一些数据。我正在尝试将该数据存储到一个类中，该类具有存储查询结果的静态方法。但是，我注意到静态数据成员中没有填充数据。如果我通过在 AsyncCallback 调用中放置一个 SC.logWarn(...) 来“减慢” AsyncCallback 调用，那么静态数据成员将被正确填充。

```
final AsyncCallback<Set<MyData>> dataCallback =
         new AsyncCallback<Set<MyData>>() 
         {
            @Override
            public void onSuccess(Set<MyData> aDataType)
            {
               for (MyData data : aDataType)
               {
                  String someData = aDataType.getData();

                  Record rec = new Record();
                  rec.setAttribute("data", someData);
                  getDataSource().addData(rec);                  
               }                   
               LocalUiCache.setLocalCache(new ResultSet(getDataSource()));
            }
         };
      MyDataService.RPC.getInstance().getData(dataCallback); 
```

...

```
public class LocalUiCache
{
   private static ResultSet localCache;

   /**
    * @return the localCache
    */
   public static ResultSet getLocalCache()
   {
      return localCache;
   }

   /**
    * @param aLocalCache the localCache to set
    */
   public static void setLocalCache(ResultSet aLocalCache)
   {
      localCache = aLocalCache;
   }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T13:22:38.537

我对此不确定，但我想 SmartGWT 不会快速重新加载您的更改。您可以尝试调整数据源缓存或显式调用[无效](http://www.smartclient.com/smartgwt/javadoc/com/smartgwt/client/data/DataSource.html#invalidateCache%28%29)方法。

其他建议肯定会奏效，但它是“肮脏的黑客”。您可以进行异步回调计划调用：

```
new Timer() {    
  public void run() {
    LocalUiCache.setLocalCache(new ResultSet(getDataSource()));
  }
}.schedule(50); 
```

# sql - 如何使用 between 子句获取两个日期之间的数据？

> ID：15682326
> 
> 赞同：2
> 
> 时间：2013-03-28T12:52:39.943
> 
> 标签：sql, sql-server

我在数据库中有日期字段，格式为**2012-03-17 19:50:08.023**。

我想创建一个选择查询，它为我提供三月份收集的**数据**。但我无法做到这一点。

我正在尝试以下查询。

```
select * from OrderHeader where
Convert(varchar,UploadDt,103) between '01/03/2013' and '31/03/2013' 
and DistUserUniqueID like  '6361%' 
```

此查询为我提供所有日期的数据。

```
select * from OrderHeader where
UploadDt between '01/03/2013' and '31/03/2013' and DistUserUniqueID like  '6361%' 
```

此查询给了我错误*消息 242，级别 16，状态 3，第 1 行 varchar 数据类型到 datetime 数据类型的转换导致超出范围的值。*

请帮我解决这个问题。

提前致谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-28T12:55:12.110

第一个查询返回所有日期，因为您要将列转换为字符串。不知道你为什么要这样做。因此，当您说`BETWEEN '01/anything' AND '31/anything'`时，当您认为它现在只是一个字符串时，它将匹配列中的所有“日期”，无论月份和年份如何，因为您的`WHERE`子句将涵盖可能的每一天（嗯，除了3 月以外的第 31 个月，以及 1 月和 2 月的第一天——所以不是所有的数据，而是一个很大的百分比）。`'15/11/2026'`，例如，是`BETWEEN '01\03\2013' AND '31/03/2013'`。

这点考虑一下吧。您的数据库中有日期时间数据，并且您希望在查询之前将其转换为字符串。在比较之前，您还会将薪水转换为字符串吗？如果是这样，赚 70,000 美元的人看起来比赚 690,000 美元的人赚得更多，因为基于字符的排序从第一个字符开始，不考虑长度。

第二个查询失败，因为您使用的是区域性的、不明确的日期格式。您可能会喜欢`dd/mm/yyyy`，但显然您的服务器基于`mm/dd/yyyy`预期的美国英语格式。

解决方案是使用适当的、明确的格式，例如`YYYYMMDD`.

```
BETWEEN '20130301' AND '20130313' 
```

但是[您不应该使用`BETWEEN`](https://sqlblog.org/2011/10/19/what-do-between-and-the-devil-have-in-common)- 因为这是`DATETIME`您应该使用的列：

```
WHERE UploadDt >= '20130301'
  AND UploadDt <  '20130401' 
```

（否则您将错过任何来自 的数据`2013-03-31 00:00:00.001`。`2013-03-31 23:59:59.997`）

如果您真的喜欢`BETWEEN`2008+（您没有告诉我们您的版本），您可以使用：

```
WHERE CONVERT(DATE, UploadDt) BETWEEN '20130301' AND '20130331' 
```

更多与日期相关的提示：

*   [负责任地约会](https://sqlblog.org/dates)

最后，[在转换为`VARCHAR`（或任何可变长度数据类型）时，始终指定一个长度](https://sqlblog.org/2009/10/09/bad-habits-to-kick-declaring-varchar-without-length)。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-28T12:55:43.777

将查询重写为

```
select * from OrderHeader where
UploadDt between '01/03/2013' and '01/04/2013' 
and DistUserUniqueID like  '6361%' 
```

或者

```
select * from OrderHeader where
UploadDt between Convert(datetime,'01/03/2013', 103) and Convert(datetime,'01/04/2013',103) 
and DistUserUniqueID like  '6361%' 
```

# php - WP_Query 头痛

> ID：15682329
> 
> 赞同：0
> 
> 时间：2013-03-28T12:52:42.847
> 
> 标签：php, wordpress, loops

我正在尝试使用 WP_Query 输出带有特色标签的 3 个最新帖子。我在stackoverflow上问了这个问题，并从一个好心的人那里得到了很好的提示。这就是我现在所拥有的：

```
<?php

$home_featured = new WP_Query(array(
    'tag' => 'featured',
    'posts_per_page' => 3,
));

?>

<?php if ($home_featured->have_posts()): while ($home_featured->have_posts()) : $home_featured->the_post(); ?>

    <p>Got some</p>

<?php endwhile; ?>

<?php else: ?>

    <p>None found</p>

<?php endif; ?> 
```

现在，我有 3 篇带有该标签的帖子。由于 Wordpress 在这里使用了一个 while 循环，它应该对每个帖子进行一次迭代，最多 3 次，输出一个

得到一些

. 这应该会在屏幕上显示如下内容：

得到一些得到一些得到一些

但它只输出一次，如下所示：

得到一些

怎么了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T13:01:53.433

首先，替换`<p>Got some</p>`为`<?php the_title(); ?>`. 至少您会看到正在显示的帖子。

你也可以`print_r( $home_featured );`在开始 wordpress 循环之前做一个。您将获得传递给 的所有参数`WP_Query`、为查询生成的 SQL 以及已返回的所有帖子。

回显`$home_featured->found_posts`还将通过显示与当前查询参数匹配的帖子总数来帮助您。

# search - 公共事件搜索的地理参考搜索 Google 日历

> ID：15682330
> 
> 赞同：4
> 
> 时间：2013-03-28T12:52:43.053
> 
> 标签：search, google-api, google-calendar-api

是否有任何简单的方法可以使用地理坐标作为查询参数来搜索 google 公共日历提要中包含的事件？

# ms-access - 在 ms 访问中以编程方式更改链接表的连接

> ID：15682332
> 
> 赞同：5
> 
> 时间：2013-03-28T12:52:55.187
> 
> 标签：ms-access, odbc, vba, linked-tables

我已经为我的问题参考了其他页面，但我仍然无法让它工作。鉴于我在下面有三个示例，但我仍然无法弄清楚这一点，我觉得有点慢。

[以编程方式更改链接表位置](https://stackoverflow.com/questions/4928134/changing-linked-table-location-programatically)

[链接表 ms 访问 2010 更改连接字符串](https://stackoverflow.com/questions/12606326/linked-table-ms-access-2010-change-connection-string?lq=1)

[更新 Access 链接表以使用 UNC 路径](https://stackoverflow.com/questions/15473263/ms-access-2010-change-the-path-of-a-linked-table)

这是我正在使用的代码：

```
Dim tdf As TableDef
Dim db As Database
Set db = CurrentDb
Set tdf = db.TableDefs("DeviceListT")
tdf.Connect = "ODBC;DATABASE=" & CurrentProject.path _
                               & "\HarmonicProfileDatabase_be.accdb"
tdf.RefreshLink 
```

问题是当我运行它时会弹出一个窗口。

![选择数据源](../Images/1b4f4e6a7b145b8928cb65586002f982.png)

我不确定我应该怎么做，也不希望它首先弹出，因为我会将 ms 访问文件提供给其他人，他们也不知道如何处理这个窗口.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-28T13:13:01.603

您正在使用 SQL Server 引用但链接 MS Access。对于 MS Access，您不需要 ODBC 链接，只需参考 DATABASE：

```
DBFile = CurrentProject.path & "\HarmonicProfileDatabase_be.accdb
''Check the file exists
strFile = Dir(DBFile)
If strFile <> "" Then
    With CurrentDb
        For Each tdf In .TableDefs
            ''Check that this is a linked table
            ''It can be useful to use table of tables instead
            If tdf.Connect Like "*HarmonicProfileDatabase_be.accdb*" Then
                tdf.Connect = ";DATABASE=" & DBFile 
                tdf.RefreshLink
            End If
        Next
    End With
    MsgBox "Link HarmonicProfileDatabase_be.accdb" 
Else
    MsgBox "Problem"
End If 
```

您还可以使用：

```
 sConnect = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=" _
    & DBFile & ";Jet OLEDB:Database Password=pw;" 
```

# xpath - 如何在 Saxon 中向 XPath 添加字符串函数？

> ID：15682339
> 
> 赞同：0
> 
> 时间：2013-03-28T12:53:05.170
> 
> 标签：xpath, saxon

我想创建一个函数，它会在一个字符串中找到一个单词，比如

```
word(@class, 'items') 
```

这将等于

```
fn:matches(@class, "(^|\s)items(\s|$)") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T22:43:31.250

有多种方法可以做到这一点，但最简单的解决方案是使用 XQuery，它允许您在语言中定义函数：

```
declare function local:word($a as xs:string, $b as xs:string) as xs:boolean {
  matches($a, concat("(^|\s)", $b, "(\s|$)"))
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T18:20:12.860

这是我为 XSLT 2.0 找到的

```
<x:transform version="2.0"
         xmlns:x="http://www.w3.org/1999/XSL/Transform"
         xmlns:find="http://user.com/namespace">

<x:output method="html"/>

<x:function name="find:word">
    <x:param name="src"/>
    <x:param name="word"/>
    <x:sequence select="matches($src, concat('(^|\s)', $word, '(\s|$)'))"/>
</x:function>

<x:template match="//*[find:word(@class, 'items')]">
    <x:copy>
        <x:copy-of select="@*"/>
    </x:copy>
</x:template>

</x:transform> 
```

# wso2 - ESB 不会从因 NPE 失败的 GET 服务返回任何内容

> ID：15682344
> 
> 赞同：0
> 
> 时间：2013-03-28T12:53:10.397
> 
> 标签：wso2, wso2esb, wso2carbon

我已经配置了一个代理服务来运行一些 XSBRL 验证东西，这些东西接受一个 get 请求并返回 XML 验证结果。这是代理服务配置：

```
<proxy xmlns="http://ws.apache.org/ns/synapse" name="XBRLValidationRESTService" transports="https,http" statistics="disable" trace="disable" startOnLoad="true">
   <target>
      <inSequence>
         <log level="full"/>
         <property name="REST_URL_POSTFIX" value="/example.xbrl/validation/xbrl?media=xml" scope="axis2"/>
         <property name="HTTP_METHOD" value="GET" scope="axis2"/>
         <send>
            <endpoint>
               <address uri="http://localhost:10000/rest/xbrl" format="pox"/>
            </endpoint>
         </send>
      </inSequence>
      <outSequence>
         <log level="full"/>
         <send/>
  </outSequence>
   </target>
   <description></description>
</proxy> 
```

在日志文件中，我可以看到底层服务以预期的响应进行响应，但是客户端没有收到任何回复，因为 ESB 由于某种原因出现 NPE 失败。

来自本地主机的请求：

```
curl -k  https://localhost:9443/services/XBRLValidationRESTService 
```

完整日志： http: [//pastebin.com/A5jB9wMF](http://pastebin.com/A5jB9wMF)

造成这种情况的潜在原因是什么以及如何解决。

谢谢，弗拉基米尔。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T17:38:38.313

您是否使用阻塞传输运行 ESB？默认情况下 esb 使用 NIO 传输，端口为 8280。您的代理服务 url 将是；

```
http://localhost:8280/services/XBRLValidationRESTService 
```

而是将日志完整状态，使用描述性日志来识别消息路径，

# unit-testing - 如何对谷歌应用程序脚本进行单元测试？

> ID：15682346
> 
> 赞同：51
> 
> 时间：2013-03-28T12:53:19.427
> 
> 标签：unit-testing, google-apps-script

我正在尝试为谷歌应用脚​​本设置单元测试，我发现了两个项目：

[https://code.google.com/p/gas-unit/](https://code.google.com/p/gas-unit/) [https://code.google.com/p/gasunit/](https://code.google.com/p/gasunit/)

所以我很困惑使用哪个:-)

我刚刚尝试了未连字符的gasunit，它似乎期望脚本嵌入到电子表格中，我有点不清楚如何做......而且我要测试的脚本是基于网络的脚本而不是电子表格那些

我在测试带连字符的气体单元时运气更好，它成功地向我发送了测试的电子邮件输出并在我的谷歌网站上生成了一个结果页面：

[https://sites.google.com/site/testappscript2/TestResults](https://sites.google.com/site/testappscript2/TestResults)

所以我现在打算使用gas-unit，但我真的很想看到谷歌整合了一些官方测试框架。特别是我想找到一些方法让这些脚本以某种频率运行以向我发送结果。我也很想获得一些 BDD；见我的其他帖子：

[如何让 Cucumber/Capybara/Mechanize 与外部非 Rails 站点一起工作](https://stackoverflow.com/questions/15665106/how-to-get-cucumber-capybara-mechanize-to-work-against-external-non-rails-site) [如何使用 capybara has_text](https://stackoverflow.com/questions/15681615/how-to-use-capybara-has-text)

来吧谷歌，你所有的浴室里都有“测试石头，调试糟粕”吗？如何更好地支持 Google Apps 脚本测试？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-16T10:23:10.073

您可以试用[QUnit for Google Apps Script](https://github.com/simula-innovation/qunit/tree/gas/gas)。它是一个将[QUnit的](http://qunitjs.com)[补丁](https://github.com/simula-innovation/qunit/compare/master...gas)变成一个带有[API 文档](https://script.google.com/macros/library/versions/d/MxL38OxqIK-B73jyDTvCe-OBao7QLBR4j)的 Google Apps 脚本库。

您所需要的只是一个脚本项目，该项目导入一个 QUnit 库（例如带有项目 key 的库`MxL38OxqIK-B73jyDTvCe-OBao7QLBR4j`）并具有一个 doGet 函数，该函数使用 URL 参数配置 QUnit，也可以选择使用您自己的设置，加载一个运行测试的函数，以及最后返回 QUnit.getHtml()。这是一个例子：

```
function doGet( e ) {
  QUnit.urlParams( e.parameter );
  QUnit.config({ title: "Unit tests for my project" });
  QUnit.load( myTests );
  return QUnit.getHtml();
};

// Imports the following functions:
// ok, equal, notEqual, deepEqual, notDeepEqual, strictEqual,
// notStrictEqual, throws, module, test, asyncTest, expect
QUnit.helpers(this);

function myTests() {
  module("dummy module");

  test("dummy test", 1, function() {
    ok(true);
  });
} 
```

然后授权脚本，保存它的版本，发布脚本项目（“部署为 Web 应用程序”）并使用浏览器转到测试 URL（“最新代码”）。您的测试将运行，结果将通过 HtmlService 显示。[您可以单击它们以查看它们的断言，但在撰写本文时，由于Caja 问题 1688](https://code.google.com/p/google-caja/issues/detail?id=1688)，您可能无法在 Firefox 20 和 21 中执行此操作。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2015-12-01T18:15:23.260

我刚刚为我的谷歌电子表格插件开发和测试编写了另一个名为 GasT 的测试框架。

GasT 是适用于 Google Apps Script 的 TAP 兼容测试框架。它提供了一种简单的方法来验证您编写的 GAS 程序是否按预期运行。[https://github.com/huan/gast](https://github.com/huan/gast)

我的目标是获得一个简单的点击工具，如磁带（用于 javascript）或 bats（用于 bash）。测试套件格式非常清晰：

```
var gastLibUrl = 'https://raw.githubusercontent.com/zixia/gast/master/src/gas-tap-lib.js'
eval(UrlFetchApp.fetch(gastLibUrl).getContentText())

var test = GasTap.setPrintDriver('Logger') 

function gast() {

  test('do calculation right', function (t) {    
    var i = 3 + 4
    t.equal(i, 7, 'I can calc 3 + 4 = 7')
  })

  test('Spreadsheet exist', function (t) {
    var ss = SpreadsheetApp.openById('1TBJpvlW3WWney4rk1yW5N9bAP8dOMkWxI97dOtco-fc')
    t.ok(ss, 'I can open spreadsheet')
  })

  test.finish()
} 
```

希望有人会喜欢它。:)

有一个在线版本，您可以在这里查看：[https ://docs.google.com/spreadsheets/d/19M2DY3hunU6tDQFX5buJmZ_f3E8VFmlqAtodyC-J8Ag/edit#gid=0&vpid=A1](https://docs.google.com/spreadsheets/d/19M2DY3hunU6tDQFX5buJmZ_f3E8VFmlqAtodyC-J8Ag/edit#gid=0&vpid=A1)

[![GasT - Google Apps 脚本测试框架，兼容测试任何协议](../Images/1653b33a995b1c2044cb8bdc4bbbbc1d.png)](https://i.stack.imgur.com/JWasS.png)

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2016-05-05T17:30:09.223

该[`clasp`工具](https://developers.google.com/apps-script/guides/clasp)提供了从命令行在本地开发和部署 Apps 脚本项目的能力。

从[`clasp`回购](https://github.com/google/clasp)：

1.  `npm install -g @google/clasp`
2.  启用 Apps 脚本 API：[https ://script.google.com/home/usersettings](https://script.google.com/home/usersettings)
3.  本地开发，使用`clasp`工具部署。

**编辑**`node-google-apps-script`项目已被弃用以支持`clasp`

有[node-google-apps-script](https://github.com/danthareja/node-google-apps-script)包允许使用标准 JavaScript 包和自动化测试工具。

1.  `npm install -g node-google-apps-script`.
2.  完成[授权步骤](https://www.npmjs.com/package/node-google-apps-script)以提供客户端机密，以允许上传和导入 Apps 脚本项目。
3.  使用`gulp`或`grunt`用于测试运行正常 JavaScript 项目的任何东西。

有一个使用此工作流程的[官方 Google 示例可用。](https://github.com/google/google-apps-script-samples/tree/master/import_export_development)

有关更多详细信息，请参阅[Google Apps 开发人员博客公告](http://googleappsdeveloper.blogspot.com/2015/12/advanced-development-process-with-apps.html)。

下载文件后，将它们重命名为以结尾`.ts`而不是`.js`. 一旦它们是 TypeScript，`ava`就可以用来测试它们。将它们转换为 TypeScript 还可以让人们使用 ES6 语言功能。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-18T13:24:23.447

我创建了 gas-unit ( [https://code.google.com/p/gas-unit/](https://code.google.com/p/gas-unit/) ) 并且在过去的几天里花了一些时间整理示例并添加了一个 HTML 测试运行器。

我自己一直在使用它进行一些电子表格操作，我一直在取得相当的成功。我也一直在将 Jasmine 用于非 GAS 客户端 js 工作，并且非常喜欢。我怀念 gas-unit 轻松创建间谍的能力，我喜欢 BDD 规范编写风格。

gas-unit 对我来说是一个很好的学习练习，它确实有效，尽管范围和闭包可能存在未被发现的问题——这是我在 DOM 操作之外的第一个重要的 js 练习。

我认为在 GAS 中进行测试的未来必须使用 QUnit（正如 Adam 建议的那样）或 Jasmine 的端口。我快速浏览了移植 Jasmine 需要什么，但还没有找到时间来解决它。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2020-08-02T08:22:04.433

查看 QUnitGS2 - 一个使用最新版本 QUnit (v2.10.1) 的新应用程序脚本库。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2018-06-28T07:27:30.523

另一个用于在 Google Scripts 中进行单元测试的库是[GSUnit](https://sites.google.com/site/scriptsexamples/custom-methods/gsunit)。

项目密钥： **MIUhnnCDES0N3YHPEWX9DUtkh30YExdAc**

> GSUnit 是一个基于 Google Apps 脚本的测试框架，基于 Kent Beck 的 JUnit 和 Edward Hieatt 的 JSUnit

# ios - OpenGLES 2.0 通过 touchesMoved 旋转

> ID：15682348
> 
> 赞同：-1
> 
> 时间：2013-03-28T12:53:33.470
> 
> 标签：ios, touchesmoved

我想使用该`touchesMoved`方法在屏幕上旋转图像。因此，如果我将手指从右侧移动到左侧，我希望我的图像从左到右旋转。

这有可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T06:13:17.023

找到了解决方案！

```
- (void)handleDragFrom:(CGPoint)start to:(CGPoint)end
{
    [super handleDragFrom:start to:end];

    float rotationCenterX = self.player.position.x - (self.player.contentSize.width / 2);
    float rotationCenterY = self.player.position.y - (self.player.contentSize.height / 2);

    float dXStart = start.x - rotationCenterX;
    float dYStart = start.y - rotationCenterY;
    float radianStart = atan2(dYStart, dXStart);

    float dXEnd = end.x - rotationCenterX;
    float dYEnd = end.y - rotationCenterY;
    float radianEnd = atan2(dYEnd, dXEnd);

    float radian = GLKMathRadiansToDegrees(radianEnd - radianStart);

    self.player.rotation -= radian;
} 
```

“开始”和“结束”是从触摸移动给出的两个点：

```
- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
{
    UITouch *touch = [[event allTouches] anyObject];

    CGPoint end = [touch locationInView:self.view];
    CGPoint start = [touch previousLocationInView:self.view];

    [self.scene handleDragFrom:start to:end];
} 
```

# delphi - 同一应用程序的两个不同版本

> ID：15682358
> 
> 赞同：4
> 
> 时间：2013-03-28T12:54:06.293
> 
> 标签：delphi, delphi-2010, delphi-xe3, delphi-ide

我有一个用 Delphi 2010 制作的软件，它需要由两个不同的部门使用，它们共享相同的数据和相同的 UI，除了一些更改，如隐藏/添加按钮、表单和网格列。因此，需要具有相同应用程序的两个版本。

无法在应用程序启动时提示用户选择部门我必须使用单独的 EXE。

在 Delphi 2010 或 XE3（稍后会升级）中做到这一点的最佳方法（概念）是什么？是否可以使用不同的 exe 名称进行编译？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-28T13:24:52.903

听起来像是一场维护噩梦，所以请考虑其他解决方案，例如登录或设置文件等评论中建议的解决方案。

如果您确实想制作单独的 exe，那么您可以使用[编译器定义](http://docwiki.embarcadero.com/RADStudio/XE3/en/Conditional_compilation_%28Delphi%29)并基于代码的定义/排除部分：

添加新配置：

![在此处输入图像描述](../Images/eae7b9a9b80d49227b1581843c2128b1.png)

将定义添加到配置中： ![在此处输入图像描述](../Images/e1fcbfce32376fd678a469700880e370.png)

在代码中使用定义：

```
{$IFNDEF ADVANCED}
   // Remove Event Handler
   Button1.OnClick := nil;
   // Hide Button
   Button1.Visible := False;
{$ENDIF} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-28T13:37:33.363

我可以想到几个解决方案：

*   为您的发布应用程序提供一个 INI 文件（或在客户端计算机上创建一个注册表项）以指定/确定您的应用程序服务于哪个部门。[`TIniFile`](http://docs.embarcadero.com/products/rad_studio/delphiAndcpp2009/HelpUpdate2/EN/html/delphivclwin32/IniFiles_TIniFile.html)然后通过或读取值[`TRegistry`](http://docs.embarcadero.com/products/rad_studio/delphiAndcpp2009/HelpUpdate2/EN/html/delphivclwin32/Registry_TRegistry.html)。例如一个 INI 文件 ( `MyApp.ini`):

    *[选项]
    部门=销售*

*   为您的程序创建一个快捷方式并使用参数，例如`"MyApp.exe /sales"`或`"MyApp.exe /support"`（`ParamStr(1)`将告诉您它是否`/sales`与`/support`部门相关）

*   使用 2 个单独的项目文件，并在每个项目选项中定义您的`Conditionals`指令，例如`SALES`or `SUPPORT`，然后在您的代码中使用`{$IFDEF SALES}...{$ENDIF}`- 使用此选项完全**重建**所有项目单元非常重要。（我有一个预构建脚本，它会在编译之前删除项目 *.dcu 文件）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T13:25:07.803

您需要在您的应用程序中设置权限系统，该系统可以针对不同的组和配置文件进行定制，并且您可以为将使用该应用程序的所有最终用户分配角色或特定权限，您可以自己开发，也可以依赖第三方，如[TMS 安全系统](http://www.tmssoftware.com/site/tss.asp)

![在此处输入图像描述](../Images/60556726ba1d3757a0db20931774e9c6.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T23:02:53.070

一种可能的做法是制作第一个项目。做你的申请。

然后在同一个文件夹中创建第二个项目，并将第一个项目中的所有单元添加到该项目中。

现在在您的第二个项目中，如果您只需要小的更改，例如，您可以从您的第一个项目中的主窗体派生一个新类，并将更改放在上面。

这样你就有 2 个 exe，但有一个共享的代码库。

# html - 图片沿文字

> ID：15682361
> 
> 赞同：0
> 
> 时间：2013-03-28T12:54:07.907
> 
> 标签：html, css, image

我必须在网站上提供一些关于使用带有精美图形按钮的表单的信息。
我希望它像这样：

```
To show info press <info buttton icon>, to configure preferences press <preferences button icon>. 
```

并且图标按图标排列在一个大文件中。
因此，例如`<info buttton icon>`来自 icons.png 文件并且具有偏移量（20px，20px）并且`<preferences button icon>`来自同一个文件并且具有偏移量（20px，40px）。
我可以使用纯 HTML 和 CSS。
我尝试使用`div`with`background-position`属性，但`div`不能在段落内。

对于如何实现这一目标的任何解决方案或提示，我将不胜感激。

编辑：阅读响应后，我使用了以下代码：

```
<p>To show info press 
<span style="background: url(./img/icons.png); height: 18px; width: 18px;"></span>
, to configure preferences press 
<span style="background: url(./img/icons.png); height: 18px; width: 18px; background-position: -18px 0px !important;"></span></p>
<img src="./img/icons.png"> 
```

跨度中的图标未显示（跨度不可见，只是文本），但在`img`标签中显示，因此图像路径是正确的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T12:58:27.103

段落从不支持 div 内部，因此您可以使用其他内联组标签，如 span、label、em .....

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T09:36:16.860

尝试使用此代码：

```
<p>To show info press 
<span style="background: url(./img/icons.png); height: 18px; width: 18px; display:inline-block"></span>
, to configure preferences press 
<span style="background: url(./img/icons.png); height: 18px; width: 18px; background-position: -18px 0px !important; display:inline-block"></span></p>
<img src="./img/icons.png"> 
```

# c++ - 移动到块代码的中间

> ID：15682365
> 
> 赞同：1
> 
> 时间：2013-03-28T12:54:20.620
> 
> 标签：c++, vim, vi

使用 Vim 我试图将光标移动到代码块的中间，但我不知道该怎么做：

```
//cursor is for instance here.

{
    //or here

    //some code
    // .... **** move cursor here ****
    //some more code 

} 
```

最后的想法是有一个快捷方式，保存当前位置，将光标移动到代码块中间，将当前行设置到屏幕中间（用快捷方式“zz”），然后移回保存的位置。

我更喜欢内置的 vim 功能，但插件也可以。

编辑：这是用于 c++ 的，所以我希望它用于括号 {}。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T14:13:42.520

我给了它一个（快速而肮脏的）去：

```
function! Middleize()

  " use ]M to jump to either the end of the current method if we are in it
  " or the start of the next method if we are above the method
  normal! ]M

  " we record the current line number
  let first_line = line('.')

  " we go to the other end of the method
  normal! %

  " we record the current line number
  let second_line = line('.')

  " we started either from the top or from the bottom of the method
  " so we have to take that into account when calculating the number
  " of the line we want to jump to
  if first_line < second_line
    let middle_line = first_line + ((second_line - first_line) / 2)
  else
    let middle_line = ((first_line - second_line) / 2) + second_line
  endif

  " let's go!
  execute "normal! " . middle_line . "Gzz"
endfunction

nnoremap <F5> :call Middleize()<CR> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T13:51:49.210

更多的是通用解决方案，但可能有用 - [easy-motion](https://github.com/Lokaltog/vim-easymotion)插件可让您以极高的精度在整个地方跳跃。

例如：

![初始状态](../Images/6c55fc428c24d279827c9508bf1545b0.png)

`<Leader><Leader>w`（默认） - '[词动](https://github.com/Lokaltog/vim-easymotion#usage-example)'

![字动作启用](../Images/85f72b9e0d256ce7f33b227e7fd6be94.png)

`g`

![光标在中间](../Images/d5a3d9e3938bcf345a7d00a4bf6f1660.png)

然后跳回来，你只需向后做同样的事情（在这种情况下，`<Leader><Leader>b g`.

这不会将当前行设置到屏幕中间，尽管您可以`:set scrolloff=9999`让屏幕中间跟随光标。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T14:10:23.640

这不会给你你想要的东西，但它会在屏幕上获得函数的文本（假设它不是太长）。

1.  `m``a`- 在当前光标位置设置一个标记。
2.  反复按`}`（向前跳一段），直到您可以看到您想要的代码。
3.  ````a`- 返回到您设置的标记。

vim 术语中的“段落”是一组连续的非空行。这是代码块的一个很好的近似值。另请注意，您可以将任何字母用于标记命令，因此一次最多可以有 52 个处于活动状态。

# jquery - 如何使用 jquery 找到最后一个 li 元素？

> ID：15682370
> 
> 赞同：0
> 
> 时间：2013-03-28T12:54:37.520
> 
> 标签：jquery

我有以下html内容....

我只需要搜索元素中的`li`(s) 文本`ul`

例如，

```
$("#ul_first").find(li).each(function(index,value)
{
    alert(index)
}); 
```

这里的问题是 find 方法`li`在`#ul_second`元素中找到。我只希望它`li`在某个`ul`元素中找到元素，而不是子`ul`元素。

```
<ul id="ul_first">
     <li>a</li>
     <li>b</li>
     <li>c</li>
     <li>d</li>
     <li>c
             <ul id="ul_second">
                               <li>a</li>
                               <li>b</li>
                               <li>c</li>
                               <li>d</li>
             </ul>    
     </li>
</ul> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T12:56:08.953

尝试添加子选择器。`>`将只选择直接子级。使用 find 就像省略`>`which 将选择所有后代。

```
$("#ul_first > li").each(function(index,value) { alert(index) }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T13:10:41.090

你可以像下面这样尝试......它会帮助你

小提琴：http: [//jsfiddle.net/RYh7U/119/](http://jsfiddle.net/RYh7U/119/)

```
Traversing/children

$('#ul_first').children('li').each(function(index,value) 
{     
 alert(index); 
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T12:57:12.463

尝试使用 `$("#ul_first > li")$? 这应该找到 li 直接在 ul_first 下面的元素

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T12:57:16.453

将您的选择器更改为`'#ul_first > li'`. 这将检查所有属于#ul_first 的孩子的li。

`>`当下一个选择器是其父选择器的直接子代时，子选择器匹配。

**来源：** [http ://www.w3.org/TR/CSS2/selector.html#child-selectors](http://www.w3.org/TR/CSS2/selector.html#child-selectors)

# javascript - .remove() 在 IE 和 Firefox 中不起作用

> ID：15682375
> 
> 赞同：0
> 
> 时间：2013-03-28T12:54:56.930
> 
> 标签：javascript, jquery

我正在通过 jQuery .load() 方法加载 div 元素，如下所示：

```
$(document).ready(function() {
    $(".module-wrapper").load("index.php?option=com_k2&view=itemlist&Itemid=974 .genericItemList");
}); 
```

通过它我得到了项目列表，比如说其中的 5 个。

```
<div class="module-wrapper">
    <div class="genericItemList">
        <div class="genericItemView">Item 1</div>
        <div class="genericItemView">Item 2</div>
        <div class="genericItemView">Item 3</div>
        <div class="genericItemView">Item 4</div>
        <div class="genericItemView">Item 5</div>
    </div>    
</div> 
```

现在我想使用 jQuery .remove() 因为我只想显示前 3 个项目。上面的 HTML 只是示例，实际上每个项目都有很多 HTML 代码，所以我想使用 jQuery .remove() 而不是 CSS display:none。

我这样做：

```
$(window).load(function() {
    $(".module-wrapper .genericItemView:gt(2)").remove();
}); 
```

这仅适用于 Chrome，但不适用于 Firefox 或 IE，我可以在其中看到所有 5 个项目。

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T12:57:52.073

为了确保代码只在元素加载后运行，你应该把它放在传递给[load()](http://api.jquery.com/load/)的回调函数中：

```
$(document).ready(function() {
    $(".module-wrapper").load(
        "index.php?option=com_k2&view=itemlist&Itemid=974 .genericItemList",
        function() {
            $(".module-wrapper .genericItemList:gt(2)").remove();
        }
    );
}); 
```

你的类选择器也可能是错误的，我试图在上面的代码中纠正它。看起来您想要匹配`.module-wrapper`公开类的后代，但您的原始选择器匹配同时公开和类`genericItemList`的元素。`module-wrapper``genericItemView`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T12:58:03.257

可以使用`load()`方法的成功回调来编写dom操作

```
$(document).ready(function() {
    $(".module-wrapper").load("index.php?option=com_k2&view=itemlist&Itemid=974 .genericItemList", function(){
        $(".genericItemView:gt(2)", this).remove();
    });
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T12:59:54.943

更改`genericItemList`为 `genericItemView`

```
 $(".module-wrapper .genericItemView:gt(2)").remove(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-28T13:01:09.650

将您的类名 genericItemView 更改为 genericItemList。

```
$(".module-wrapper .genericItemList:gt(2)").remove(); 
```

[看演示](http://jsfiddle.net/Dineshkani/mk7hm/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-28T13:01:32.700

将其更改`$(".module-wrapper.genericItemView:gt(2)").remove();`为`$(".module-wrapper .genericItemList:gt(2)").remove();`

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-28T13:02:16.553

在 .genericItemList 之前添加空格

```
$(".module-wrapper .genericItemList:gt(2)").remove(); 
```

# php - 当用户登录时将他们发送到他们自己的个人资料页面

> ID：15682376
> 
> 赞同：1
> 
> 时间：2013-03-28T12:54:57.290
> 
> 标签：php, user-profile

当用户登录时，他们被重定向到 member.php，下面是登录代码，后面是 member.php 代码。

登录.php

```
 <?php

        session_start ();
        include 'core/init.php';

        $username = '';
        $password = '';
        $dbusername = '';
        $dbpassword = '';
        if (isset($_POST['Email']) && isset($_POST['Password']))
        {
            $username = $_POST['Email'];
            $password = md5($_POST['Password']);

        $query = mysql_query("SELECT * FROM member WHERE Email ='$username' AND Password='$password'");

        $numrow = mysql_num_rows ($query);
        // user login
        if ($numrow!=0)
        {
            while ($row = mysql_fetch_assoc($query))
            {
                $dbusername = $row['Email'];
                $dbpassword = $row['Password'];
            }

            //Check to see if they match
            if ($username==$dbusername&&$password==$dbpassword)
            {

                $_SESSION ['Email']=$username;
                header("Location: member.php");

            }
            }
            else 
            {
                // admin login
                $query2 = mysql_query("SELECT * FROM admin WHERE Email ='$username' AND Password ='$password'");
                $numrow2 = mysql_num_rows ($query2);
                if ($numrow2!=0)
                {
                    while ($row = mysql_fetch_assoc($query2))
                    {
                        $dbusername = $row['Email'];
                        $dbpassword = $row['Password'];
                    }

                    //Check to see if they match
                  if ($username==$dbusername&&$password==$dbpassword)
                    {

                        $_SESSION ['Email']=$username;
                        header("Location: admin.php");

                    }
                    else{

                        echo "Incorrect password";
                    }

                }
                    else{
                if ($username!=$dbusername&&$password!=$dbpassword)
                {die("That user does not exist!");
                }
                }
            }
        }
                /*if ($numrow2!=0)
                {
                    while ($row = mysql_fetch_assoc($query2))
                    {
                $dbusername = $row['Email'];
                if ($username!=$dbusername)
                {die("That user does not exist!");
                }
                }
                }

        else
            die("Please enter your email address and password");
        */
  ?> 
```

member.php 代码（我知道这很乱。抱歉，现在只需要让它工作）

```
 <div id="header"> 

                            <div id= "logout"> 
                            <?php
                                if(isset($_GET['username']) === true & empty ($_GET['username']) === false) 
                                        $username = $_GET ['username'];

                                            if (user_exists($username) === true) {

                                        echo "<p>Welcome, ".$_SESSION['Email']. "!<br><a href='logout.php'>Logout</a>\n<a href='index.php'>Back to homepage</a></p>";
                            ?></div>
                            </div>  

                            <div id="main-content">
                            <?php
                                //get username from user id
                                $MemberID  = user_id_from_username($username);
                                $profile_data =user_data($MemberID, 'Name','Email');//Need to pull out stuff from oddjob table
                            ?>
                                    <h1><?php echo $profile_data['Name']; ?>'s profile</h1>
                                    <p><?php echo $profile_data['Email'];?></p>
                            <?php
                                } else {
                                    echo '<p>Sorry, cannot find that user on system.</p>';
                                }

                            ?> 
```

目前我已经设置了 member.php，这样如果我在 URL 中输入用户名（即用户的电子邮件地址），它就会显示一些特定于该用户的个人资料数据。

但是，当我以用户身份登录并重定向到 member.php 时，我只看到一个空白页面，并且用户名没有显示在 URL 中，只是一条错误消息显示该用户的“未定义变量：用户名”和我不知道如何编辑它以使其正常工作并将成员发送到他们自己的个人资料页面。

相关函数如下：functions.php

```
 function logged_in() {
            return (isset($_SESSION['MemberID'])) ? true : false; //Email
        }

        function user_data($MemberID){
                $data = array();
                $MemberID =(int)$MemberID;

                $func_num_args = func_num_args();
                $func_get_args = func_get_args();

                if ($func_num_args >1) {
                    unset($func_get_args[0]);

                    $fields = '`' . implode('`,`', $func_get_args) . '`';   
                    $data = mysql_fetch_assoc(mysql_query("SELECT $fields FROM `member` WHERE `MemberID` = $MemberID"));//expects parameter 1 to be resourse

                    return $data;
                }
        }

        function user_id_from_username($username) {
            $username = sanitize($username);
            return mysql_result(mysql_query("SELECT `MemberID` FROM `member` WHERE `Email` = '$username'"),0, 'MemberID'); 
```

初始化.php：

```
 if (logged_in() ===true) {
                $session_MemberID = $_SESSION['MemberID'];//undefined?
                $user_data= user_data($session_MemberID,'MemberID','Name','Address','Postcode','DOB','Mobile','Email','Password','RepeatPassword');
                exit();
                } 
```

老实说，我已经看这段代码很久了，我完全不知道如何解决这个问题。如果可以的话请帮忙。

索引.php

```
 <div id= "login">
            <form action="login.php" method="post">
            <?php

                if (logged_in() === true) {
                    echo "<p>Welcome, ".$_SESSION['Email']. "!<br><a href='logout.php'>Logout</a>";
                        }else

                            echo"<h4>Username: <input type='text' name='Email'><br>
                                Password: <input type='Password' name='Password'>
                                <input type='submit' value='Log In'><br> 
                                <a href='register2.php'>Register?</a>

            </form>"
            ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T12:59:22.503

在您的 member.php 页面上，您尝试从 $_GET 获取用户名，但是当您在 login.php 中重定向用户时，您没有传递任何参数。

要么仅依赖于您设置的 $_SESSION，要么更改您的重定向：

```
header('Location: member.php?username='.$username); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T22:22:40.883

此标头命令：

```
header("Location: member.php"); 
```

必须在头顶。只有在没有向用户发送其他 html 代码时才能调用它。例如：

```
<?php
header("Location: member.php");
?>
<html>
<head>
</head>
<body>
</body>
</html> 
```

# xcode - 一个项目，两个版本？（沙盒和非沙盒版本）？有什么简单的方法来维护代码吗？

> ID：15682384
> 
> 赞同：1
> 
> 时间：2013-03-28T12:55:11.663
> 
> 标签：xcode, cocoa, repository, sandbox

我开发了一个可可项目，现在它有两个版本，沙盒版和非沙盒版。

沙盒版和非沙盒版之间存在一些差异，但大部分是相同的。IE。对于沙盒版本，我将限制对某些目录的访问，并且为了访问某些目录（如桌面），我必须添加权利。对于非沙盒版本，我对目录没有限制，我也可以添加“检查更新”又名 sparkle 框架等。

两者仍处于测试模式（即尚未提交到 mac 应用商店），现在，我如何将它们分开，我有非沙盒版本的主分支，以及沙盒版本的新分支。

但是更新代码是一件很痛苦的事情。一旦我为非沙盒版本实现了一些功能，我必须提交更改，然后将更改合并回沙盒分支。问题是，我不能只将所有更改合并到沙盒版本，我必须小心，只合并我所做的功能更改。

所以对于那些为沙盒和非沙盒开发应用程序的人，你如何处理这种情况。有没有简单的方法来维护代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T13:34:20.857

我认为一个好的方法是使用定义（例如 SANDBOX）并创建两个目标，一个用于沙盒版本，其中包括权利文件和 SANDBOX 定义，另一个没有权利文件和 SANDBOX 定义。

在程序必须表现不同的类和函数中，您可以使用此定义（SANDBOX）轻松分离沙盒和非沙盒版本的代码。

# eclipse - 我在哪里可以获得 Eclipse-GUI 代码？

> ID：15682386
> 
> 赞同：-3
> 
> 时间：2013-03-28T12:55:18.950
> 
> 标签：eclipse, user-interface

在德国汉诺威参观 CeBit IT 博览会时，我遇到了两三个基于 Eclipse GUI 的应用程序（例如 [Talend Open Studio](http://www.talend.com/products/talend-open-studio)）。有谁知道 Eclipse GUI 是否可供公众使用，如果是，如何最容易地访问它？

先感谢您！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-28T13:02:34.170

我想您说的是 Eclipse Rich Client Platform (RCP)，它允许您创建基于 Eclipse 的应用程序。

在这里查看更多信息和教程：[http ://wiki.eclipse.org/index.php/Rich_Client_Platform](http://wiki.eclipse.org/index.php/Rich_Client_Platform)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T12:59:54.503

是的。您需要查看 Eclipse 插件。这里有一个教程：[http ://www.vogella.com/articles/EclipsePlugIn/article.html](http://www.vogella.com/articles/EclipsePlugIn/article.html)

我强烈建议你买一本详细的书，因为在 eclipse 上开发一个完整的应用程序有很多有趣的陷阱，你不想陷入其中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T13:07:01.780

Eclipse 的源代码作为 Eclipse 的一部分包含[在 RCP 和 RAP 开发人员](http://www.eclipse.org/downloads/packages/eclipse-rcp-and-rap-developers/junosr2)中。

plugins 目录下文件名中带有“source”字样的Java JAR 文件为源代码jar 文件。

# perl - 如何防止 Mojolicious 对存储数据进行字符转义？

> ID：15682391
> 
> 赞同：9
> 
> 时间：2013-03-28T12:55:32.697
> 
> 标签：perl, html-entities, mojolicious

我正在尝试将 HTML 发送到 Mojolicious 中的模板，并且发现 html 在途中被安全字符串替换。

```
$self->stash(portalHeaderHtml => "<html>"); 
```

变成

```
 &lt;html&gt; 
```

在源

模板：

```
<%= $portalHeaderHtml %> 
```

我如何告诉它显示 HTML 而不是替换标签？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-28T13:15:18.063

[`Mojolicious::Guides::Rendering`](https://metacpan.org/pod/Mojolicious::Guides::Rendering#Embedded-Perl)建议使用`==`禁用字符转义。

> 额外的等号可用于禁用 Perl 表达式结果中字符 <、>、&、' 和 " 的转义，这是防止对您的应用程序进行 XSS 攻击的默认设置。
> 
> ```
> <%== '<p>test</p>' %> 
> ```

谨慎行事。

# mongodb - 在 MongoDB 中正确实现散列分片键

> ID：15682392
> 
> 赞同：6
> 
> 时间：2013-03-28T12:55:32.940
> 
> 标签：mongodb

我有一个当前由内置“_id”（ObjectId）索引/查询的集合。我不想在这个键上分片，因为它是顺序的（以日期为前缀）。Mongo 2.4 的文档说我可以对这个键的哈希进行分片，这听起来很棒。像这样：

sh.shardCollection("records.active", { _id: "hashed" } )

问题：我是否必须首先在活动集合上创建散列索引：

db.active.ensureIndex({ _id: "hashed" })

还是没有必要？我不想用不必要的索引来浪费空间。

相关问题：如果我确实使用 ensureIndex({ _id: "hashed"}) 创建了一个散列索引，我可以删除默认的“ *id* ”索引吗？Mongo 会知道对 _id 字段进行查询，对它们进行哈希处理并针对哈希索引运行它们吗？

谢谢...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T15:03:23.387

**_id**索引和**散列的 _id**索引都需要。在 MongoDB 2.4 中，您不必在对集合进行分片之前显式调用**db.active.ensureIndex({ _id: "hashed" })**，但如果您不这样做，则**sh.shardCollection("records.active", { _id:" hashed" } )**将为您创建散列索引。

复制需要**_id**索引。

要在 MongoDB 中对集合进行分片，您必须在分片键上有一个索引。这在 MongoDB 2.4 中没有改变，分片工作需要**散列 _id索引。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-16T06:36:49.403

我自己尝试过，使用 mongoDB 2.4.11。

我创建文档并将其插入到新集合中。查询被触发到 mongos 服务器。我插入的所有 1,000,000 个文档都作为分片集群主分片 A 进入（您可以使用 sh.status() 进行检查）。

但是，当我尝试按照以下命令执行分片收集时，

```
sh.shardCollection("database.collection",{_id:"hashed"}) 
```

它显示错误如下

```
{
    "proposedKey" : {
        "_id" : "hashed"
    },
    "curIndexes" : [
        {
            "v" : 1,
            "name" : "_id_",
            "key" : {
                "_id" : 1
            },
            "ns" : "database.collection"
        }
    ],
    "ok" : 0,
    "errmsg" : "please create an index that starts with the shard key before sharding."
} 
```

所以答案是

1.  是的，它需要散列索引
2.  您必须事先创建它，MongoDB 要求您使用以下命令手动创建它：

    db.collection.ensureIndex( { _id: "hashed" } )

# php - 有一个从 url 下载许多图像的 php 脚本，我可以让脚本运行得更快吗？

> ID：15682397
> 
> 赞同：0
> 
> 时间：2013-03-28T12:55:44.173
> 
> 标签：php

首先，我制作了一个包含图像的 url 数组（1 个 url = 1 个图像，该 url 中没有其他内容）：

```
$image_endings = array();
for($x=1;$x<=25;$x++) {
    for($y=1;$y<=48;$y++) {
        $image_endings[] ="${x}n${y}w.png";
    }
} 
```

现在我运行每个 url，如果该 url 存在，我下载图像：

```
foreach ($image_endings as $se){
    $url = 'http://imgs.xkcd.com/clickdrag/'.$se;

if (@GetImageSize($url)) {

//echo  "image exists ";
    $img = file_get_contents($url);
    file_put_contents("tiles/".$se,$img);

    $width = 50;
    $height = 50;
    $filename = 'tiles/'.$se;
    $image = imagecreatefrompng ( $filename );
    $new_image = imagecreatetruecolor ( $width, $height ); // new wigth and height
    imagealphablending($new_image , false);
    imagesavealpha($new_image , true);
    imagecopyresampled ( $new_image, $image, 0, 0, 0, 0, $width, $height, imagesx ( $image ), imagesy ( $image ) );
    $image = $new_image;

    // saving
    imagealphablending($image , false);
    imagesavealpha($image , true);
    imagepng ( $image, $filename );

} else {

// echo  "image does not exist "; 
```

}

这个脚本的问题 - 完全完成需要大约 5 分钟。我想知道我是否可以让它运行得更快？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T13:04:11.340

与其检查`GetImageSize`每一个，因为这可能会花费不必要的时间，不如只检查一次（当你去获取它时）：

```
...

foreach ($image_endings as $se){
    $url = 'http://imgs.xkcd.com/clickdrag/'.$se;

/* Don't do this... time consuming...
if (@GetImageSize($url)) {
echo  "image exists ";
*/

$img = file_get_contents($url);

// Check here if it existed.
if ($img !== false) {

    file_put_contents("tiles/".$se,$img);
... 
```

根据@GeraldSchneider 的评论……有`file_put_contents(...)`必要吗？

# perl - 全局文件句柄

> ID：15682398
> 
> 赞同：0
> 
> 时间：2013-03-28T12:55:49.843
> 
> 标签：perl, file

我需要在几个 perl 模块中使用相同的文件句柄。这是我的示例 a.pl

```
#!/usr/bin/perl -w

our $OUT_FILE_HANDLE;

require b;

open($OUT_FILE_HANDLE, ">./a.log");
print $OUT_FILE_HANDLE "text1\n";

b::f($OUT_FILE_HANDLE); // this works 
```

下午

```
package b;

sub f($) {
  my $a = shift;
  print $a "text2\n";  // get error here
}

f($main::OUT_FILE_HANDLE);
1; 
```

我收到错误“不能使用未定义的值作为符号引用”

如果我直接在 b.pm 中使用句柄（不将其作为参数传递给函数）它工作正常

下午

```
package b;

sub f() {
  print $main::OUT_FILE_HANDLE "text2\n";  // this works
}

f();
1; 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-28T13:03:44.557

由于执行顺序，您的示例失败：[所有 b.pm 在您执行时执行`require b;`](http://perldoc.perl.org/functions/require.html)。因此，您试图在打开文件句柄之前使用它。

作为一般原则，模块应该只通过可以调用的函数来做事。当需要模块时，只有初始化的东西才应该运行。

在这种情况下，最好的设计是使用*词法*文件句柄并将其传递给任何需要它的函数。不要使用全局。

```
open(my $OUT_FILE_HANDLE, '>', './a.log') or die "Ouch: $!";
print $OUT_FILE_HANDLE "text1\n";

b::f($OUT_FILE_HANDLE); 
```

使用全局变量与模块进行通信很少是一个好主意。有时，模块向调用代码公开全局变量可能很有用，但反过来也不是一个好的设计。模块不应依赖于特定包中存在的特定变量才能工作。

最后，您几乎不应该在 Perl 中使用子例程原型。只需省略原型，除非您完全了解 Perl 原型并且有充分的理由使用它们：

```
sub f { 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-28T14:42:02.190

你的代码有很多问题。

*   *始终* 位于程序的顶部或`use strict`语句之后`use warnings``package`

*   用于`CamelCase`包名称和`snake_case`本地标识符。熟悉 Perl 的人会感谢你

*   对所有标识符使用描述性的内容。特别是有一个名为`B`（Perl Compiler Backend）的核心包，所以这不会做

*   *永远不要*`main`期望辅助模块从包中访问数据。流动应严格自下而上

*   *永远不要*为你的子程序使用原型。Perl 在这方面与其他语言不同，原型做了一些非常特殊的事情。如果你不知道这些东西是什么，那么你当然不应该使用原型

*   `require`除非你知道它的作用，否则不要使用。你几乎肯定想要`use`

*   使用 的三参数形式`open`，*经常*检查是否成功。如果`open`失败，那么您应该`die`使用一个字符串，包括`$!`说明失败的*原因*

您的代码未按预期工作的主要原因是`require`(and ) 语句将在包含辅助模块*时*`use`执行辅助模块中的任何可执行语句。通常，此类模块将仅包含用于调用代码的*定义*和*声明*，如果包含任何可执行代码，则必须非常小心，因为如您所见，它可能会导致依赖关系不可用的问题。

 ***这是您的代码的工作版本

**主文件**

```
use strict;
use warnings;

use BB;

open my $fh, '>', 'a.log' or die $!;
print $fh "text1\n";

BB::f($fh); 
```

**下午**

```
package BB;

use strict;
use warnings;

sub f {
  my ($a) = @_;
  print $a "text2\n";
}

1; 
```

**输出**（到`a.log`）

```
text1
text2 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T13:25:05.873

B 对模块来说是个坏名字，因为它是[Perl 核心模块](http://search.cpan.org/~rjbs/perl-5.16.3/ext/B/B.pm)。用 BB 重命名它（例如）。此外，Perl 注释使用“#”，也不是“//”。这是我修改后的代码（效果很好）：

**主文件**

```
use BB;

our $OUT_FILE_HANDLE;
open($OUT_FILE_HANDLE, ">", "./a.log") or die $!;
print $OUT_FILE_HANDLE "text1\n";
BB::f($OUT_FILE_HANDLE); 
```

**下午**

```
package BB;

sub f {
  my $a = shift;
  print $a "text2\n";  
}
1; 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-28T13:04:14.730

也许移动“我们的 $OUT_FILE_HANDLE;” 在您的 b.pm 包中。***

# javascript - 使用 jquerymobile 滚动标题文本

> ID：15682403
> 
> 赞同：1
> 
> 时间：2013-03-28T12:56:03.407
> 
> 标签：javascript, jquery, css, jquery-mobile

我正在开发网站的移动版本，并且需要在文本长于某些像素时添加滚动功能。我正在尝试在我的项目中实现以下逻辑

[滚动示例的来源](http://jsfiddle.net/ranadeep/Ybq37/)

[到目前为止，我想在我的示例中实现相同的](http://jsfiddle.net/rZHMv/5/)功能，但我的基本结构将保持不变，我只想在屏幕很小的情况下滚动文本以显示完整的标题。

```
$("div.aaa h2").each(function(){    
  var m = $(this).width();
  var n = $(this).find("div.aaa h2").width();
  var o = m - n;
  var z = $(this).find("div.aaa h2");

    $(this).mouseenter(function(){
        //alert ("title: " + m + " text: " + n + " diff: " + o);
        if (n > m) {
             z.animate({
             left: o                    
         }, 2000);
       }
    }).mouseleave(function(){
            z.animate({
            left: "0"
         }, 2000);    
    });        

}); 
```

我对任何有效的解决方案持开放态度并检测完整标题是否可见，那么它应该为那些标题较长的元素实现滚动。

我尝试的其他方法也失败了，因为它滚动了所有元素而不是我鼠标悬停的元素

[http://jsfiddle.net/yVtVE/21/](http://jsfiddle.net/yVtVE/21/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T13:43:53.577

在 animateTitle 函数中添加了额外的参数“elem”，elem 在悬停事件完成时定义。我从课堂上删除了`width:330px`CSS 代码。添加了对元素宽度的`.aaa`额外控制（在悬停类元素时）。`.aaa``.aaa`

这是您的解决方案： [jsfiddle.net/yVtVe/22/](http://jsfiddle.net/yVtVe/22/)

# html - 扫描电子邮件并更改字段名称

> ID：15682405
> 
> 赞同：0
> 
> 时间：2013-03-28T12:56:08.723
> 
> 标签：html, vba, text, outlook

我目前有：

```
Sub Confirmation()
    myMessage = "You recently made a request on the IT website, the details of your request can be seen below:" & vbCr & vbCr & "Thank you, " & vbCr & "IT Support"
    Dim sAddress As String ' Well need this to store the address
    Dim itmOld As MailItem, itmNew As MailItem

    Set itmOld = ActiveInspector.CurrentItem
    Set itmNew = itmOld.Forward

    sAddress = GetAddressFromMessage(itmOld) ' This is our new function
    If Len(sAddress) > 0 Then
        itmNew.To = sAddress ' If our new function found a value apply it to the To: field.
        '!!! This should be checked as a valid address before continuing !!!
    End If

    itmNew.HTMLBody = myMessage & vbCr & vbCr & itmOld.HTMLBody
    itmNew.Subject = "IT Web Request Confirmation"
    itmNew.Display

    Set itmOld = Nothing
    Set itmNew = Nothing
End Sub

Private Function GetAddressFromMessage(msg As MailItem) As String
    ' Grabs the email from the standard HTML form described in the SO question.
    Dim lStart As Long
    Dim lStop As Long
    Dim sItemBody As String
    Const sSearchStart As String = "Requestee_Email: </b></td><td>" ' We will look for these tags to determine where the address can be found.
    Const sSearchStop As String = "</td>"

    sItemBody = msg.HTMLBody ' Read the body of the message as HTML to retain TAG info.

    lStart = InStr(sItemBody, sSearchStart) + Len(sSearchStart)
    If lStart > 0 Then ' Make sure we found the first TAG.
        lStop = InStr(lStart, sItemBody, sSearchStop)
    End If

    GetAddressFromMessage = vbNullString

    If lStop > 0 And lStart > 0 Then ' Make sure we really did find a valid field.
        GetAddressFromMessage = Mid(sItemBody, lStart, lStop - lStart)
    End If

End Function 
```

我稍微调整了您的代码，以将表格保留在使用 HTMLBody 而不仅仅是 Body 创建的新消息中。然后将标签保留在新电子邮件中，我现在将如何更改电子邮件中的字段名称？

邮件格式如下（表格除外）：

```
Fullname:   Alex Carter
OPS_Access:     Yes
Email_Account_Required:     Yes
Office_Email_Required:  Yes
Website_Access_Required:    Yes
Web_Access_Level:   Staff
Forum_Access_Required:  Yes
Date_Account_Required:  03/08/2013
Requested_By:   Alex Carter
Requestee_Email:    alex.carter@driverhire.co.uk
Office_Requesting:  Swindon 
```

我需要改变：

```
Fullname to New User's Name:
OPS_Access to dhOps Access Required:
Email_Account_Required - Email Account Required:
Office_Email_Required - Access to Office Email Required:
Website_Access_Required - Website Access Required:
Web_Access_Level - Level of web access:
Forum_Access_Required - Forum Access Required:
Date_Account_Required - Date Account Required:
Requested_By - Requested by:
Requestee_Email - Email of requesting user:
Office_Requesting - Requested office: 
```

另外，如果可能的话，我是否可以使用 vba 代码为表格添加边框？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T13:28:10.787

**要更改您已识别的字段**，请更改此行 ( `itmNew.HTMLBody = myMessage & vbCr & vbCr & itmOld.HTMLBody`)，将其替换为以下行（为简单起见，添加我遗漏的内容）：

```
Dim tempBody As String

tempBody = itmOld.HTMLBody

'Change values to new desired output
tempBody = Replace(tempBody, "Fullname", "New User's Name:")
tempBody = Replace(tempBody , "OPS_Access", "dhOps Access Required:")
tempBody = Replace(tempBody , "Email_Account_Required", "Email Account Required:")
' ... continue as needed...

itmNew.HTMLBody = myMessage & vbCr & vbCr & tempBody 
```

**要为您的表格添加边框，请**使用它，根据需要更改参数，并将其放在上述块的最后一行之前。

```
' This adds a border to the original HTML table.
tempBody = Replace(tempBody, "<table>", "<table border = 1>") 
```

如果您只想要外部边框，请改为以下内容：

```
' This adds another table (with border) to the HTML and puts the original table (no border) inside it.
tempBody = Replace(tempBody, "<table>", "<table border = 1><tr><td><table>") 
tempBody = Replace(tempBody, "</table>", "</table></td></tr></table>") 
```

# mysql - 如何设计具有动态账单明细的账单表

> ID：15682407
> 
> 赞同：1
> 
> 时间：2013-03-28T12:56:14.020
> 
> 标签：mysql, ruby-on-rails, database-design

我有不同的模块，例如绘画，chasis_repair，over_oiling 部分每个模块都有单独的账单表，例如painting_bills，chasis_repair_bills，over_oiling_bills

现在我必须为 Delivery 模块创建账单。交付模块与其他模块有关系（涂装、底盘维修、过油）

注意：喷漆、底盘修理、过油部分账单和交付特定账单是可选的。

示例 1：交货单包含喷漆和底盘维修账单 示例 2：交货单包含过度涂油、喷漆和交货特定账单

```
class DeliveryBill < ActiveRecord::Base
  attr_accessible :date, :total_amount, :discount
  has_many :delivery_detail_bills
end 
```

我对构建delivery_detail_bills 模型感到困惑，我有两个想法

1)

```
id
date
tot_amount
bill_item_type # name of section as text for example painting/chasis_repair/over_oiling/other
bill_item_amount # for example, respective total amount of painting/chasis_repair/over_oiling/other
bill_item_klass # for example, here I store the respective class name, PaintingBill, ChasisRepairBill...
bill_item_klass_id # id value of respective object 
```

这样就没有关系表了。我通过 bill_item_type 列处理交付特定计费项目如果我想去相应的账单，我必须使用 bill_item_klass、bill_item_klass_id 列手动建立相应的链接

2）创建has_many：通过delivery_bill与painting_bills、chasis_repair_bills之间的关联表

```
class DeliveryBill < ActiveRecord::Base
  has_many :painting_bills, :through => :delivery_bill_painting_bills

  has_many :chasis_repair_bills, :through => :delivery_bill_chasis_repair_bills
  .....
end

class DeliverBillPaintingBill < ActiveRecord::Base
  belongs_to :delivery_bill
  belongs_to :painting_bill
end

class DeliverBillChasisRepairBill < ActiveRecord::Base
  belongs_to :delivery_bill
  belongs_to :chasis_repair_bill
end

.... 
```

这里的关系很清楚，但如果我按照这种方式，我无法处理“其他”的账单，因为没有额外/其他账单的关联表。此方法将增加表数

哪一个是性能方面的最佳解决方案，还是有其他更好的解决方案？

# javascript - 扩展数组属性 javascript

> ID：15682410
> 
> 赞同：0
> 
> 时间：2013-03-28T12:56:26.787
> 
> 标签：javascript

我想用简单的函数扩展所有数组的属性（这是我的作业）

```
Array.prototype.remove=(function(value){
var i;
var cleanedArray = new Array();
for(i= 0;i<this.length;i++)
{
    if(value !== this[i])
    {
        cleanedArray.push(this[i]);
    }
}

 this.length = cleanedArray.length;
 for(i=0;i<this.length;i++)
 {
     this[i] = cleanedArray[i];
 } })();

 var simpleArray = new Array(3,5,6,7,8,1,1,1,1,1,1,1);
 simpleArray.remove(1); console.log(simpleArray); 
```

但是我在控制台中遇到错误，有人可以帮助我吗？

错误 ：

```
Uncaught TypeError: Property 'remove' of object [object Array] is not a function 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T12:58:59.203

要声明一个函数，您不需要这些括号，也不需要调用它。

您可以将其声明为

```
 Array.prototype.remove=function(value){ // <== no opening parenthesis before function
     var i;
     var cleanedArray = new Array();
     for(i= 0;i<this.length;i++) {
        if(value !== this[i])
        {
            cleanedArray.push(this[i]);
        }
     }
     this.length = cleanedArray.length;
     for(i=0;i<this.length;i++) {
         this[i] = cleanedArray[i];
     } 
  }; // <== simply the end of the function declaration 
```

看起来您对[IIFE](http://benalman.com/news/2010/11/immediately-invoked-function-expression/)感到困惑，但您在这里不需要该构造。

如果您希望您的函数不可枚举，您可以使用[Object.defineProperty](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/defineProperty)来实现：

```
Object.defineProperty(Array.prototype, "remove", {
    enumerable: false, // not really necessary, that's implicitly false
    value: function(value) {
        var i;
         var cleanedArray = new Array();
         for(i= 0;i<this.length;i++) {
            if(value !== this[i])
            {
                cleanedArray.push(this[i]);
            }
         }
         this.length = cleanedArray.length;
         for(i=0;i<this.length;i++) {
             this[i] = cleanedArray[i];
         } 
    }
}); 
```

[示范](http://jsbin.com/uvekem/2/edit)

# ajax - 为什么我对部分使用 :remote 的请求不起作用？

> ID：15682411
> 
> 赞同：1
> 
> 时间：2013-03-28T12:56:27.160
> 
> 标签：ajax, ruby-on-rails-3, partial-views, cancan

我正在创建一个简单的 Rails 应用程序，作为我的项目的基础应用程序，并且在用户编辑配置文件页面中，我无法通过异步请求加载部分。

这是我编辑个人资料页面的基本视图：

**应用程序/视图/用户/edit.html.haml**

```
container-fluid
  .row-fluid
    .span3
      .well
        %ul.nav.nav-pills.nav-stacked
          %li.nav-header Profile
          %li
            = link_to 'Personal Infos', 'settings', remote: true 
```

我在控制器上的设置操作：

**应用程序/控制器/users_controller.erb**

```
...

def settings
  @user = User.find(params[:id])
  respond_to do |format|
    format.js
  end
end

... 
```

**应用程序/视图/用户/settings.js.erb**

```
$('div#settings_body').html("<%= escape_javascript(render('edit_profile'))%>") 
```

最后，我的部分：

**应用程序/视图/用户/_edit_profile.html.haml**

```
= form_for(@user) do |f|
  = f.text_field :email
  = f.submit "Save" 
```

但是当我点击“个人信息”链接时，什么也没有发生。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T12:56:27.160

我为这个问题苦苦挣扎了三天 - 不要问我为什么 - 我`remote: true`从链接中删除了命令以查看会发生什么。当我点击链接时，我的应用程序发现了授权问题。

我正在使用 CanCan 处理此应用程序中的授权，这是我的能力文件：

**应用程序/模型/ability.rb**

```
class Ability
  include CanCan::Ability

  def initialize(resource)
    if resource.is_a?(User)
     can [:read, :edit], User, :id => resource.id
    end
  end

end 
```

问题是我向用户控制器添加了一个新的操作*设置*，CanCan 阻止控制器运行此操作，并且部分没有被加载。

我改变了我的能力文件如下：

**应用程序/模型/ability.rb**

```
class Ability
  include CanCan::Ability

  def initialize(resource)
    if resource.is_a?(User)
     can [:read, :edit, :settings], User, :id => resource.id
    end
  end

end 
```

它奏效了。

# angularjs - 仅在两列上的角度 ng-grid 过滤器

> ID：15682414
> 
> 赞同：4
> 
> 时间：2013-03-28T12:56:27.960
> 
> 标签：angularjs

我想在 ng-grid 上执行一种或一种查询，它使用相同的过滤器文本搜索两列。

我已经想出了如何在每列的基础上进行过滤，但我想做的是在具有相同输入的两列上进行过滤。

var searchQuery = 'college:' + collegeText + ";" + '课程名称：' + $scope.filterText + '部门：' + $scope.filterText + ';';

似乎不起作用。我必须删除部门或课程名称才能获得结果。显然，它认为需要在两列中都找到它才能返回结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T12:38:56.440

这个[资源](https://github.com/angular-ui/ng-grid/blob/master/workbench/index5.html)上有一个例子。签出 repo 并在浏览器中加载页面。

基本上，您可以依赖`filterChanged`事件。假设您在 HTML 中有如下搜索栏：

```
<input type="text" ng-model="filteringText" placeholder="Search..." class="search-query"/> 
```

JavaScript 部分将如下所示：

```
// Initialize
$scope.filteringText = '';

$scope.filterOptions = {
    filterText: 'filteringText',
    useExternalFilter: false
};

// Configure ng-grid.
$scope.gridOptions = {
    ...
    filterOptions: $scope.filterOptions,
    ...
};

$scope.$on('filterChanged', function (evt, text) {
    console.log(text);
    $scope.filteringText = text;
}); 
```

# c# - 禁用 WCF 绑定

> ID：15682418
> 
> 赞同：1
> 
> 时间：2013-03-28T12:56:49.320
> 
> 标签：c#, wcf, web-services

我的应用程序运行具有 2 个不同绑定（每个具有不同接口）的 WCF 服务主机。在某些情况下，我想禁用 1 绑定，以便尝试连接到此接口/端口/绑定名称（无论如何）的客户端不会在那里找到任何东西。

这可能吗，怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T14:22:57.813

继续[Dhawalk](https://stackoverflow.com/users/1949572/dhawalk)所说的，您可以抽象出您的业务层，并使用依赖注入，注入具有“不可用”和“功能”实现的服务处理程序。不可用的实现可能只是抛出异常或总是返回错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T14:08:39.000

你将不得不装备你的 BL，并使用 WCF 检查员来回弹 unlicensesd 呼叫。检查员请参考以下链接

[http://msdn.microsoft.com/en-us/library/aa717047.aspx](http://msdn.microsoft.com/en-us/library/aa717047.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T13:53:20.277

如果两个服务合同都在同一个服务类上，除了在每个方法的开头添加一个检查“如果我启用......”之外，我看不出你会如何轻松地禁用它。

也许您可以以编程方式查看服务主机的操作合同，有可能一次删除它们。不过，可能必须暂时关闭服务主机才能进行更改。我以这种方式将方法添加到服务合同中，这些方法从未存在于与真实服务类相同的类/接口上，甚至不在同一个程序集中，但我不记得 servicehost 是否已经启动当时。

您需要查看端点： `ServiceHost.Description.Endpoints` 并选择需要编辑的端点，然后查看 `Endpoint.Contract.Operations` 以确定要添加/删除的方法。它们将从 WSDL 中消失。

**编辑**刚刚尝试过，它似乎在运行时工作，但我可以想象重新添加 OperationContracts 会更难（除非你在删除它们之前保存它们......让我知道你是如何开始的，这听起来很有趣！）

# html - 文件输入在 IE9 中不提交

> ID：15682420
> 
> 赞同：1
> 
> 时间：2013-03-28T12:56:57.770
> 
> 标签：html, forms, internet-explorer-9

```
<html>
    <body>
        <form action="/page.php" method="post" enctype="multipart/form-data"  >   
            <input type="file" name="photo" />      
            <br /><br /><br /><br /><br />
            <input type="submit"  value="verder" />             
        </form>
    </body>
</html> 
```

页面.php

```
error_log(__LINE__);
foreach ($_FILES as $key => $image) {               

$tmp_name = $image['tmp_name'];
$rand = rand(10000, 99999);

$name = 'id_scan_'.$dossier_id.'_'.substr(md5($rand), 17, 5);               

$dimensions['max_width'] = '800';
$dimensions['max_height'] = '800';
$image_type = strrchr($image["name"], ".");
Helper_Image::image_scale_and_save($tmp_name, $image_type, "$uploads_dir/$dossier_id/$name", $dimensions);

            $post_to_save[$key] = $name. $image_type;
        } 
```

这只是上传图片的简单表格。在 IE9 中没有任何反应。输入框被清空，表单不提交。我是否必须寻找服务器设置或其他东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T07:41:19.093

@Bart就提交表单的问题而言，我前段时间也在寻找类似的东西，发现下面给出的代码：

```
if(isset($_POST['submit'])){....} 
```

将其写在 HTML 表单所在的同一页面上。当您单击提交按钮时，上面给出的**IF**将检查表单是否已提交。如果是，那么它将执行您将在**IF**中编写的代码。希望这能解决您的问题。

关于上传，每当我需要时，我都会使用[这个](http://www.9lessons.info/2011/06/image-upload-and-cropping-with-php-and.html). 长时间上传，它还提供图像裁剪。

# c# - 在 Windows Phone 8 上调试挂起恢复行为

> ID：15682429
> 
> 赞同：1
> 
> 时间：2013-03-28T12:57:19.320
> 
> 标签：c#, visual-studio-2012, windows-phone-8

我相对简单的 C# windows phone 8 应用程序启动一次，然后第二次加载失败（黑屏）。我假设存在与暂停恢复相关的问题，但我似乎找不到调试方法？

对于 Windows Phone 设备和模拟器，Visual Studio 工具栏中的暂停恢复选项始终处于禁用状态。是否有可用于打印输出的控制台？有没有其他人遇到过 Windows Phone 8 从后台恢复的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T08:54:45.060

虽然我没有实际答案，但似乎我测试的一切都不正确。我对代码进行了更改，在调试器中运行它，然后假设它与我的更改匹配（它没有）从图标启动应用程序。

删除应用程序并通过应用程序加载器上传允许我尝试各种修复以使应用程序正常工作。如果有人可以回答我会接受他们的回答，我会留下这个问题。

# ruby-on-rails-3 - 包含整数列表的 Rails 模型

> ID：15682430
> 
> 赞同：3
> 
> 时间：2013-03-28T12:57:30.210
> 
> 标签：ruby-on-rails-3, model

如何将整数列表作为 Rails 模型的属性？我试过谷歌搜索，但没有任何结果。我真的必须创建一个单独的模型来保存整数然后使用 has_many 关系吗？

如果我想在模型中有多个列表怎么办？我是否为每个列表创建一个单独的模型？

我要做的是创建模型来表示名为 Ra 的棋盘游戏的状态。我想出的变量是

```
Game
    epoch - int
    currentturn - int
    auctionturn - int
    ratrack - int
    centralsun  - int
    auctiontrack - list[int]
    playerdata - list[playerdata]

PlayerData
    name - string
    suns - list[int]
    nextsuns - list[int]
    gods - int
    pharohs - int
    niles - int
    floods - int
    gold - int
    civilization - list[int]
    monuments - list[int]
    fame - int 
```

但我不确定如何实现这一点。另外，有没有人有改进设计的建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T18:12:50.367

您可以使用以下方式将任何对象存储在数据库字段中`serialize`： [http ://apidock.com/rails/ActiveRecord/AttributeMethods/Serialization/ClassMethods/serialize](http://apidock.com/rails/ActiveRecord/AttributeMethods/Serialization/ClassMethods/serialize)

顺便说一下，R​​ails 4 将添加对实际数组对象（至少在 PostGres 中）的支持： [http ://reefpoints.dockyard.com/ruby/2012/09/18/rails-4-sneak-peek -postgresql-array-support.html](http://reefpoints.dockyard.com/ruby/2012/09/18/rails-4-sneak-peek-postgresql-array-support.html)

# javascript - 如何获取字符串中第一个数字的索引

> ID：15682434
> 
> 赞同：23
> 
> 时间：2013-03-28T12:57:34.953
> 
> 标签：javascript, regex

我需要找出如何获取字符串中第一个数字的索引。我知道如何使用一些循环来做到这一点，但它真的很难看，所以我更喜欢一些正则表达式。有人可以告诉我如何使用正则表达式来做到这一点吗？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-28T13:03:46.947

```
firstDigit = 'Testi2ng4'.match(/\d/) // will give you the first digit in the string
indexed = 'Test2ing4'.indexOf(firstDigit) 
```

好吧，我想我需要更仔细地查看我的方法，你可以这样做`'Testin323g'.search(/\d/)`；

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-03-28T13:04:23.317

**搜索：**【最快的方式】

```
var str = "asdf1";
var search = str.search(/\d/)
console.log(search); 
```

**匹配：** [比 for 循环慢，只是展示了另一种方式]

```
var str = "asdf1";
var match = str.match(/(\D+)?\d/)
var index = match ? match[0].length-1 : -1;
console.log(index); 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2017-04-22T09:40:43.477

for 循环比基于正则表达式的解决方案最快：

```
function indexOfFirstDigit(input) {
  let i = 0;
  for (; input[i] < '0' || input[i] > '9'; i++);
  return i == input.length ? -1 : i;
}

function indexOfNaN(input) {
  let i = 0;
  for (; input[i] >= '0' && input[i] <= '9'; i++);
  return i == input.length ? -1 : i;
} 
```

[在线尝试！](https://tio.run/##nZDBDoIwDEDvfEVPDEIkoF4U0YvxiB9gPAzYsIZsZAxjon47Ah5EEwzx2Pa1fe2ZXmiZKCz0RMiU1TWvRKJRCkCRsuueRzSyUBSVtuFmAORMA0IIXtAEXCqwAujKBzzCOgTiETDNd2rVpBakYRzHblsU05US7YjwBbk5E5k@wQYmPiwBA@NhGN8SO1Sl3mKGerTLqlO533t2/5gkUpQyZ24uM6v3EUL9eErsZtAQ4E9n8yGgdw6hcZKO4n4s/ODKlPstWNdP "JavaScript (Node.js) – 在线试用")

jsbench（越高越好）：

```
TestCase results for your browser Firefox version 54.0
Test name               Benchmark results
indexOfFirstDigit        11,175,400 (±2.77)
regex search             3,787,617 (±5.22) (epascarello)
regex match              2,157,958 (±6.49) (epascarello)
regex match + indexOf    1,131,094 (±4.63) (VoronoiPotato) 
```

我再次进行了一些快速测试。仍然最快：

[![比赛图表](../Images/2295deba3d75233ca86738d73822ce67.png)](https://i.stack.imgur.com/wJKfJ.png)

[自己运行吧！](http://jsben.ch/EwRKc)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-03-28T13:03:42.173

使用[string.search](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/search)使用正则表达式查找索引`\d`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-02-15T23:33:17.483

如果您只是在寻找一个衬里，您也可以尝试一种函数式编程方法，并且可以执行以下操作：

```
let myStr = "ID12345";
let myStrIndex = myStr.indexOf(myStr.split('').filter(x => !isNaN(parseInt(x, 10)))[0]); 
```

字符串被分割成一个字符数组，过滤器函数将该数组缩减为数字字符。新数组的第一个字符是字符串中的第一个数字字符，因此在该字符上使用 indexOf 可以为您提供所需的索引。

当然，如果字符串中没有数字字符，您将得到 -1 的索引。您还可以使用不同的检查 char 是否为数字函数作为 .filter() 的参数 - 如果这是一个问题，我相信会有更快的速度

# ios - 以编程方式设置视频铃声

> ID：15682436
> 
> 赞同：1
> 
> 时间：2013-03-28T12:57:50.980
> 
> 标签：ios, video, ringtone

是否有任何 iOS 框架或某些 3rd 方 API 允许应用程序启用视频铃声？苹果会批准吗？Android 上的一个类似应用是“Vringo”，它可以设置视频铃声。

有人可以帮我确定正确的 API 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T13:02:08.290

Apple 不提供任何允许第三方应用程序更改系统设置的框架或 API，更不用说设置视频铃声了。

iOS 是一个比 Android 安全得多的操作系统，主要是因为第三方应用程序不允许甚至无法更改或影响系统设置或行为，因此 iOS 上不能存在这样的应用程序，除非作为越狱调整。

您可能可以通过在越狱设备上进行一些黑客攻击来实现这一点，但绝对不能，而且它肯定不会被批准。

# c# - 如何为每个线程设置时区？

> ID：15682438
> 
> 赞同：14
> 
> 时间：2013-03-28T12:57:53.590
> 
> 标签：c#, .net, multithreading, datetime, timezone

我知道我们可以改变当前线程的当前文化。而且我知道我们无法从中获取`TimeZoneInfo`信息，`CurrentCulture` **因为一种文化可能有许多时区** *，例如美国*

但是要使用相同的技术来处理**当前线程的 TimeZone**。

***如果我们能做出这样的事情，那就太好了：***

```
TimeZone.CurrentTimeZone = TimeZoneInfo.FindSystemTimeZoneById("timezone id"); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-28T14:22:11.330

不幸的是，“当前”时区的任何概念都与运行代码的机器的操作系统设置相关。有一些用于更改时区的 Win32 api，但我不建议使用它们。它们不仅不是“线程安全的”，而且也不是“进程安全的”。时区设置会影响机器上运行的所有内容。

也就是说，我很好奇你的用例到底是什么。如果您可以为每个线程设置时区，那么您可能根本不依赖本地设置。您可能可以改用转换方法`TimeZoneInfo`。

例如，假设您正在寻找其他时区的当前时间。您可能正在寻找执行此操作的能力：

```
using (TimeZone.CurrentTimeZone = ...  )
{
    var now = DateTime.Now;
} 
```

但是，您应该在适当的情况下简单地从 UTC 转换：

```
var now = TimeZoneInfo.ConvertTimeBySystemTimeZoneId(
                       DateTime.UtcNow, "some other timezone id"); 
```

# mysql - 在一个语句中选择最近的位置和稍远的位置

> ID：15682439
> 
> 赞同：1
> 
> 时间：2013-03-28T12:57:55.277
> 
> 标签：mysql, sql

我目前正在尝试从位置表中进行选择。结果应该是最近的位置，另外应该是距离至少 30 公里的位置。

所以我想做一个

```
SELECT * FROM locations WHERE (distance = minimumdistance OR distance > 30) AND some other parameters LIMIT 2 
```

但是如果没有第二个选择，我就无法获得最小距离，该选择也具有所有其他参数，这将使语句非常长。

MIN(distance) 需要一个分组，但这会导致我只得到一个结果而不是 2...

有什么方法可以更简单地做到这一点吗？在语句中创建没有完整 WHERE 子句两次的语句。

目前是

```
SELECT * FROM locations WHERE (distance = (SELECT MIN(distance) FROM locations WHERE some other parameters ) OR distance > 30) AND some other parameters LIMIT 2 
```

现在试着想象一下，如果有一些其他参数是一个很长的字符串，而距离是一个计算而不是一个静态表列，这会变得非常讨厌。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T13:09:15.487

如果您坚持在一个查询中执行此操作，那么这将按您的需要执行（更新为更标准）

```
SELECT

        -- this will have 2 records, 1 nearest and 1 with l.distance > 30
        d.*
FROM (
    SELECT 
        loc.*,
        -- this assumes locationID == the PK field, update as needed
        IF(loc.distance>30,@farLoc := loc.locationID,@nearLoc := loc.locationID) AS ignoreMe
    FROM locations AS loc,
    (
        SELECT @nearLoc := 0,@farLoc := 0
    ) AS v
    WHERE some other parameters
    ORDER BY loc.distance DESC 
) AS d
WHERE d.locationID IN (@nearLoc,@farLoc) 
```

但真正简单的联合会做你应该在这种情况下使用的东西

```
(
    SELECT * FROM locations 
    WHERE some other parameters
    ORDER BY distance ASC 
    LIMIT 1
) UNION (
    SELECT * FROM locations 
    WHERE some other parameters
    AND distance > 30 
    ORDER BY distance ASC 
    LIMIT 1
) 
```

语句是否“非常长”并不重要，只要它是有效的。如果其他参数是在脚本中生成的，那么维护就不会产生额外的开销，这将是最有效的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T13:04:43.633

你可以试试这个

```
 SELECT * FROM locations WHERE  some other parameters 
    HAVING  distance > 30
    OR distance = minimumdistance 
    LIMIT 2 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T13:40:04.403

我对这种方法并不感兴趣，但它应该可以在 MySQL 中使用：

```
select l.*
from (SELECT l.*, (@rn = @rn+1) as rn
      FROM locations l cross join
           (select @rn = 0)
      WHERE some other parameters
      order by distance
     ) l
where rn = 1 or distance > 30
limit 2 
```

@rn 是一个跟踪行号的变量。在大多数其他数据库中，您会使用`row_number()`，但 MySQL 不支持。然后它选择第一行（最小距离）或大于 30 的行。如果最小值大于 30，那么您将获得两行。

在实践中，它将返回最接近 30 的值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T13:42:57.240

`The result should be the closest location and additionally a location that is at least 30km distance away`

这在 mySQL 中有效吗？它适用于 SQLite：

```
 select min(distance) from foo
     where distance > (select min(distance) from foo) and distance > 30
     union 
     select min(distance) from foo 
```

如果它确实有效，您可以使用它来创建内联视图并执行以下操作：

```
 select name, min(dist) from
     (

     select name, dist
     from   foo
     join
     (
     select min(distance) as dist from foo 
     where distance > (select min(distance) from foo) and distance > 30
     union 
     select min(distance) as dist from foo  
     ) as X         
     on foo.distance = X.dist   

   )

   union

    select name, max(dist) from

    (

     select name, dist
     from   foo
     join
     (
     select min(distance) as dist from foo 
     where distance > (select min(distance) from foo) and distance > 30
     union 
     select min(distance) as dist from foo  
     ) as X         
     on foo.distance = X.dist   

   ) 
```

使用列 [distance] 上的索引，这将非常快。

# c# - Quartz.NET - 这个单元测试不应该通过吗？

> ID：15682441
> 
> 赞同：5
> 
> 时间：2013-03-28T12:57:58.693
> 
> 标签：c#, unit-testing, timezone, quartz.net, dst

这个问题与这个问题有关[，](https://stackoverflow.com/q/15661268/1790864)但更笼统，可以独立处理。

编辑：石英版本是 v2.0.1

据我了解，以下单元测试应该通过：

```
[Test]
public void Test() {
    // run every first day of month at 14:00 hours
    CronExpression expression = new CronExpression("0 0 14 1 * ?");

    //  TimeZoneInfo.Local = {(UTC+01:00) Amsterdam, Berlin, Bern, Rom, Stockholm, Wien}
    if (!TimeZoneInfo.Local.SupportsDaylightSavingTime) {
        return;
    }

    // get "summertime" period for current timezone
    var daylightChange = TimeZone.CurrentTimeZone.GetDaylightChanges(2013);
    //  -> daylightChange.Start     {31.03.2013 02:00:00}   System.DateTime
    //  -> daylightChange.End       {27.10.2013 03:00:00}   System.DateTime

    // get one startpoint before and one after begin of summertime
    DateTimeOffset beforeSummertime = daylightChange.Start.ToUniversalTime().AddDays(-1);
    DateTimeOffset afterSummertime = daylightChange.Start.ToUniversalTime().AddDays(1);
    // -> beforeSummertime  {30.03.2013 01:00:00 +00:00}    System.DateTimeOffset
    // -> afterSummertime   {01.04.2013 01:00:00 +00:00}    System.DateTimeOffset

    DateTimeOffset? nextValidTimeFromBefore = expression.GetNextValidTimeAfter(beforeSummertime);
    DateTimeOffset? nextValidTimeFromAfter = expression.GetNextValidTimeAfter(afterSummertime);
    // nextValidTimeFromBefore  {01.04.2013 13:00:00 +00:00}    System.DateTimeOffset?
    // nextValidTimeFromAfter   {01.04.2013 12:00:00 +00:00}    System.DateTimeOffset?

    Assert.AreEqual(nextValidTimeFromBefore, nextValidTimeFromAfter);
} 
```

但是（如您所见），`nextValidTimeFromBefore`不同于`nextValidTimeFromAfter`. 结果`nextValidTimeFromAfter`是正确的。UTC 12:00 将导致夏季时间为 14:00（此时已经开始）。`GetNextValidTimeAfter()`参数指定夏令时内部还是外部的时间无关紧要。

NextValidTimes 应该相等还是我的方法有缺陷？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-28T18:22:29.257

我发现这实际上是 Quartz.NET 2.0.1 中的一个错误，但它已经在 2.1.0 中修复。

我检查了网站上的更改日志，其中没有提到相关的修复。Peter Ritchie 的评论鼓励我重新审视 Quartz 的新版本。当我查看存储库中的提交时，我注意到实际上有一个解决方法。

它已在修订版 665 中修复：

> 合并来自 Amazing-andrew/master 的拉取请求 #72
> 与 CronExpression、日历、CalendarIntervalTriggerImpl 的时区问题

包含此修复的第一个正式版本是 v2.1.0，其标记为修订版 685。

该错误位于`CronExpression.GetTimeAfter()`（由 调用`CronExpression.GetNextValidTimeAfter()`）：

```
...
d = new DateTimeOffset(year, d.Month, d.Day, d.Hour, d.Minute, d.Second, d.Offset);

// apply the proper offset for this date (this wasn't there)
d = new DateTimeOffset(d.Year, d.Month, d.Day, d.Hour, d.Minute, d.Second, this.TimeZone.GetUtcOffset(d.DateTime));
... 
```

# php - PHP Depend (pdepend) 忽略 @package 并使用命名空间作为包

> ID：15682443
> 
> 赞同：3
> 
> 时间：2013-03-28T12:58:01.270
> 
> 标签：php, metrics, phpdoc, pdepend

我试图将一些 PHP 框架的指标与 PHP Depend 进行比较，并遇到了烦人且可能是意外的行为：

注释被忽略，`@package`命名空间被视为包。这是一个问题，因为通常使用的子名称空间并不意味着单独的包（即`SomePackage\Exception`）

## 示例类文件

```
<?php
/**
 * 
 * This file is part of the Aura Project for PHP.
 * 
 * @package Aura.Di
 * 
 * @license http://opensource.org/licenses/bsd-license.php BSD
 * 
 */
namespace Aura\Di\Exception;

use Aura\Di\Exception;

/**
 * 
 * The named DI container already exists.
 * 
 * @package Aura.Di
 * 
 */
class ContainerExists extends Exception
{
} 
```

## 示例报告

```
 <package name="Aura\Di\Exception" cr="0.15" noc="5" nof="0" noi="0" nom="0" rcr="0.28114285714286">
    ...
  </package> 
```

现在我的问题是：这是什么原因，我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T20:30:35.897

在 PHP 在 5.3 中获得真正的命名空间之前，@package 是一种伪命名空间技术。因此，我认为几乎所有的静态代码处理工具都是为了在它们存在时选择命名空间而编写的，并且只有在不存在命名空间时才回退到使用 @package。有时会提到继续使用@package 作为命名空间之上的不同分组机制的想法，特别是关于 phpDocumentor，但我不知道在任何此类应用程序中真正实现此类行为的任何努力.

# html - mootools JSON 选择列表

> ID：15682448
> 
> 赞同：0
> 
> 时间：2013-03-28T12:58:10.310
> 
> 标签：html, json, select, mootools, options

我有一个 JSON 对象：

```
 var data = {"options" :[      
       {"name": "Size",  "value": "S", "price": "10", "order": "1"},
       {"name": "Size",  "value": "M", "price": "12", "order": "2"},
       {"name": "Size",  "value": "XL", "price": "14", "order":"3"},
       {"name": "Color", "value": "Red", "price": "14", "order":"2"},    
       {"name": "Color", "value": "Green", "price": "12", "order": "1"}
    ]} 
```

如何使用 mootools javascript 库将其转换为选择列表？

```
<div>
 <label>Size:</label>
 <select name="options[size]">
   <option value="10">S</option>
   <option value="12">M</option>
   <option value="14">XL</option>
 </select>
 <label>Color:</label>
 <select name="options[color]">
   <option value="12">Green</option>
   <option value="14">Red</option>
 </select>
</div> 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T14:48:49.813

它只是在玩一点数据 - 你去：http: [//jsfiddle.net/XRH6r/](http://jsfiddle.net/XRH6r/)

```
var data = {"options" :[      
       {"name": "Size",  "value": "S", "price": "10", "order": "1"},
       {"name": "Size",  "value": "M", "price": "12", "order": "2"},
       {"name": "Size",  "value": "XL", "price": "14", "order":"3"},
       {"name": "Color", "value": "Red", "price": "14", "order":"2"},    
       {"name": "Color", "value": "Green", "price": "12", "order": "1"}
    ]};

//create unique map according to the data:
var arr = data.options;
var map = {};
arr.each(function(item){
    var name = item.name;
    var o;
    if(map[name]){
       o = map[name];      
    }
    else{
        o = {};
        o.options = [];
        map[name] = o;
    }
  o.options.push({value:item.value,price:item.price,order:Number(item.order)});
});

//sort options array to be ordered by order
//and then build the select
Object.each(map,function(item,name){
    item.options.sort(function(a,b){
           return a.order > b.order;
    });
    var label = new Element('label').set('html',name);
    var combo = new Element('select');
    item.options.each(function(opt){
       combo.options[combo.options.length] = new Option(opt.value,opt.price);     
    });

    label.inject(document.body);
    combo.inject(document.body);
}); 
```

# html - 显示 3 个内联 div

> ID：15682449
> 
> 赞同：0
> 
> 时间：2013-03-28T12:58:11.617
> 
> 标签：html, css

我有这个 CSS / HTML 代码：

```
.ex1 .box-left {
    display:inline-block;
    width: 33%;
    max-width: 190px;
    float: left;
    margin:10px 0 0 70px;
}
.ex1 .box-middle {
    width: 33%; /* width of the logo */
    margin:10px auto 0 auto;
}
.ex1 .box-right {
    display:inline-block;
    width: 33%;
    max-width: 190px;
    float: right;
    margin:10px 70px 0 0;
}

<div class="ex1">
        <div class="box-left">text goes here</div>
        <div class="box-right">text goes here</div>
        <div class="box-middle">text goes here</div>
    </div> 
```

我需要它们以相同的边距彼此相邻地显示，并且在页面的中心之间具有相同的边距，但是当窗口变小时，如果它们不适合它们应该开始显示在彼此下方

有什么想法我能做什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T13:01:22.000

所有你需要的是[`Responsive Web Design`](http://johnpolacek.github.com/scrolldeck.js/decks/responsive/)

查看另一个[有用的资源](http://coding.smashingmagazine.com/2011/01/12/guidelines-for-responsive-web-design/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T13:06:17.643

您需要使用“媒体查询”——如何使用！[检查这个](http://stackcomplete.com/media-queries-for-adaptive-to-responsive-websites/)也[这个](http://stackcomplete.com/responsive-web-design-tutorial/)

您可以使用所有尺寸的样式，就像

```
@media screen and (max-width: 1024px) {
//your styles for this resolution 
}
@media screen and (max-width: 960px) {
//your styles for this resolution 
}
@media screen and (max-width: 800px) {
//your styles for this resolution 
}
@media screen and (max-width: 480px) {
//your styles for this resolution 
}
@media screen and (max-width: 320px) {
//your styles for this resolution 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T13:06:48.380

首先，你修复主 div，然后在所有 3 个 div 中给出一个浮点数。

```
<div class="ex1">
        <div class="box-left">text goes here</div>
        <div class="box-right">text goes here</div>
        <div class="box-middle">text goes here</div>
<div style="float:none; clear:both;"
    </div>

.ex1 {width:960px; margin:0 auto;}
.ex1 .box-left {
    width: 33%;
    max-width: 190px;
    float: left;
    margin:10px 0 0 70px;
}
.ex1 .box-middle {
    width: 33%; /* width of the logo */
    margin:10px 0 ;
float:left;
}
.ex1 .box-right {
    width: 33%;
    max-width: 190px;
    float: right;
    margin:10px 70px 0 0;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T13:27:02.473

删除所有浮动属性，因为您已应用 display:inline-block。

这是您能找到的最简单的方法。

这是标记：

> ```
> <div class="globalcontainer">
>     <div class="ex1">
>     <div class="ex-box">Left</div>
>     <div class="ex-box">Middle</div>
>     <div class="ex-box">Right</div>
>     </div>
> </div> 
> ```

这是CSS：

```
.globalcontainer {width:100%; height:auto; overflow:auto; background-color:#333;}
.ex1 { text-align:center; margin:0 auto;}
.ex-box{
    display:inline-block;
    min-width:100px;
    max-width: 190px;
    margin:10px 5px;
    background-color:#f90;
} 
```

此代码将满足您在完整浏览器上以相同边距居中所有 div 的要求，并且在调整大小后，它们将以其特定边距垂直向下显示。

由于中间是您的标志，只需为另一个类设置样式并添加您需要美化它的任何内容！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-28T13:15:05.663

有些人会不赞成使用此解决方案`text-align`来居中文本以外的内容，但这似乎可以满足您的要求：http: [//jsfiddle.net/3hfPZ/](http://jsfiddle.net/3hfPZ/)

这是标记：

```
<div id="main">
    <div class="box red"></div>
    <div class="box blue"></div>
    <div class="box yellow"></div>
</div> 
```

和CSS：

```
#main { margin: auto; text-align: center; }
.box {
    display: inline-block;
    width: 200px;
    height: 100px;
    margin: 10px;
}
.red { background: red; }
.blue { background: blue; }
.yellow { background: yellow; } 
```

我选择的颜色和大小是任意的，只是为了弄清楚 div 发生了什么。

# php - 作为 foreach 语句的一部分执行两个函数

> ID：15682450
> 
> 赞同：1
> 
> 时间：2013-03-28T12:58:14.977
> 
> 标签：php, foreach

这更像是一个最佳实践问题：

假设我想在 foreach 语句中执行两个函数（以组合这些函数的返回以用作循环的单个元素），我是否会将它们组合在语句中，例如：

```
foreach(function1($data).function2($data) AS $key=>$value) 
```

还是有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T13:06:28.717

如果**function1**和**function2**返回数组，则：

```
foreach(array_merge(function1($data),function2($data)) AS $key=>$value) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T13:08:14.137

首先，数组与[`+`](http://www.php.net/manual/en/language.operators.array.php)or连接[`array_merge()`](http://www.php.net/array-merge)，点仅用于字符串，所以你会得到字符串“ArrayArray”。

其次，为了更好的可读性和可维护性，您应该将函数调用和循环初始化分开：

```
$fileList = function1($data); 
$fileList += function2($data);
foreach($fileLists AS $key=>$value) {
} 
```

请注意，这不会影响代码的结果或性能，它只是有助于调试和理解（顺便说一句，这通常更重要）。

# caliper - 在线发布 Caliper 结果时出现 405

> ID：15682451
> 
> 赞同：0
> 
> 时间：2013-03-28T12:58:19.810
> 
> 标签：caliper

我检查了最新版本的卡尺并运行了一些基准测试。结果生成（作为 json）就好了，但上传到 microbenchmarks appengine 网站失败：

POST [http://microbenchmarks.appspot.com](http://microbenchmarks.appspot.com) .... 返回了 405 Method Not Allowed 的响应状态

Caliper 团队已经提出了这个问题： [https ://code.google.com/p/caliper/issues/detail?id=220](https://code.google.com/p/caliper/issues/detail?id=220)

...但被关闭为“无效”。所以我假设有另一种上传结果的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T15:43:56.980

最新版本的 web 应用程序现在正在进行一些最终的代码审查。它应该在接下来的几天内到达。

更新：新版本的 webapp 已经部署。现在一切都应该正常了。

# php - 可以通过 URL 或 POST 获取参数的函数

> ID：15682453
> 
> 赞同：0
> 
> 时间：2013-03-28T12:58:27.357
> 
> 标签：php, post, functional-programming

我遇到了一种情况，有时我需要通过 post 将参数传递给函数，例如实时数据的 ajax 调用，以及传递参数的默认样式，即`myFunc($param)`.

我已经开始通过以下方式执行此操作：

```
public function createNote($note = null)
  {
    if($note == null) // If param didn't come in by a call or url...
    {
      $note = $_POST['note']; // Use the post data.
    }
    // Do stuff with $note...
  } 
```

我正在做的事情有什么问题还是这是最好的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T13:03:35.510

由于您使用的是默认参数，因此以下是一个小的改进。

```
public function createNote($note = null)
  {
    if(!empty($note) && validate($note)) //if inside class use $this->validate($note)
    {
         // Do stuff with $note...
    }

  }

public function validate($note){
    //do your validations here
} 
```

使用 createNote($_POST['note']); 调用函数

将 URL 参数直接传递给函数也不是一个好习惯。您需要在使用前先验证它们。

# php - 如何放置 Laravel 并使用工匠命令？

> ID：15682454
> 
> 赞同：7
> 
> 时间：2013-03-28T12:58:30.873
> 
> 标签：php, frameworks, laravel

我最近正在尝试 laravel php 框架。我正在使用 Windows 7 和 XP（尝试在两者上安装）、XAMPP 1.8.1 和 PHP 5.4.7。

如此混乱。

1.  在许多文章（包括 laravel 的文档本身）中，我遇到了许多工匠编码。
    什么是工匠？我自己不能这么清楚地定义它。我最终得到的文章没有给出任何简单的解释。
    我得到了类似的命令教程`php artisan key:generate`。
    但我总是失败，在命令提示符上出现这个错误：`'php' is not recognized as an internal or external command, operable program or batch file`。
    我得到了像“将目录更改为 laravel 根目录”这样的解决方案，
    所以，我`chdir`-ed 到 C:\xampp\htdocs\laravel\public\ 但没有任何效果。

2.  我有权通过浏览器访问我的 laravel 网站`localhost/laravel/public/`？
    那么，如果我尝试将其上传到我的公共站点，我应该将这些项目放在我的根文件夹 (/) 中吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-28T14:46:02.793

调用 php.exe 时出现错误，因为 Windows 命令提示符未跟踪您的 PHP 安装。您可以通过将其添加到 PATH 环境变量中来解决此问题：

转到“我的电脑”>“属性”>“高级”>“环境变量”>“路径”，在末尾添加分号 (;)，然后添加 PHP 二进制文件夹的路径，在您的情况下为 C:\ xampp\php

重新启动命令提示符后，PHP 和 Artisan 应该可以正常工作。

至于您的第二个问题，“公共”文件夹应该是您的服务器（或虚拟主机）的 DocumentRoot。无需在您的 Web 服务器上公开整个框架。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-28T14:13:47.630

1.  该`artisan`命令必须通过 php 解释器进行解析，这就是为什么你这样称呼它`php artisan...`

    我认为，您必须使用 php.exe 才能使其在 Windows 上运行。就像是`c:\path\to\php.exe artisan command`

2.  通读 Dayle Rees 的[文档](http://laravel.com/docs/install)和[Code happy](http://codehappy.daylerees.com/getting-started) book，了解公共文件夹以及如何为您的开发设置虚拟主机

# zsh - oh-my-zsh 配置文件未加载

> ID：15682456
> 
> 赞同：37
> 
> 时间：2013-03-28T12:58:34.310
> 
> 标签：zsh, zshrc

我试图让 ZSH 配置在 Mac OSX 上正常工作。我使用 curl: 安装它`curl -L https://github.com/robbyrussell/oh-my-zsh/raw/master/tools/install.sh | sh`。然后我修改了我的 zshrc 文件以满足我的需要。它只有在我运行后才有效`source ~/.zshrc`。但是，如果我回来打开一个新选项卡或新终端，我必须`source ~/.zshrc`让配置设置再次工作。有人遇到过这个问题吗？我相信有办法做到这一点，所以我不必为`~/.zshrc`每个新标签做源代码。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-04-08T14:42:07.250

我想通了。这是由于我的配置文件。zsh 配置中未加载的部分需要在插件加载后向下移动。搬家后，一切都按预期工作。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2017-05-27T13:43:42.513

如果你为你的 shell 安装了 Powerlevel9k 之类的主题，那么在你的文件中的主题变量分配**之后**`zsh`获取 oh-my-zsh 配置文件，如下所示。**`.zshrc`**

 ****例如：**

```
........
........
POWERLEVEL9K_RIGHT_PROMPT_ELEMENTS=('status' 'load' 'ram_joined' 'time')

# source oh-my-zsh config
source $ZSH/oh-my-zsh.sh 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2019-12-02T19:07:47.463

不是理想的解决方案，但可以解决问题：

终端 -> 首选项 -> 配置文件 -> 外壳 -> 启动

选中“运行命令”框并在输入框中运行

```
source ~/.zsh/.zshrc 
```

这将在您打开新的终端窗口/选项卡时执行。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2016-11-19T12:52:25.383

我的最终解决方案是转到*Terminal --> Preferences --> General --> Shells open with --> Command (complete path)*，并将其设置为 /bin/zsh （或您的 zsh 路径），然后设置两个新窗口/选项卡都以*“相同的配置文件”*打开。这对我来说可以。

我最初的尝试是转到*Terminal --> Preferences --> Profiles*，在我的默认配置文件的*“shell”选项卡的 Startup 部分*中，我将其设置为运行命令“source ~/.zshrc”。这也解决了 /.zshrc 不加载的问题，但是在每个终端选项卡/窗口上看到该命令似乎很乏味。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-08-31T16:15:04.683

我有一个类似的问题。我发现我很久以前就将终端首选项更改为运行 tcsh 而不是默认的登录 shell。我花了很长时间才弄清楚这一点！**

# java - 在超级构造函数运行之前初始化字段？

> ID：15682457
> 
> 赞同：41
> 
> 时间：2013-03-28T12:58:35.020
> 
> 标签：java, inheritance, constructor, initialization, constructor-chaining

在Java中，有没有办法在超级构造函数运行之前初始化一个字段？

即使是我能想到的最丑陋的 hack 也会被编译器拒绝：

```
class Base
{
    Base(String someParameter)
    {
        System.out.println(this);
    }
}

class Derived extends Base
{
    private final int a;

    Derived(String someParameter)
    {
        super(hack(someParameter, a = getValueFromDataBase()));
    }

    private static String hack(String returnValue, int ignored)
    {
        return returnValue;
    }

    public String toString()
    {
        return "a has value " + a;
    }
} 
```

注意：当我从继承切换到委托时，问题就消失了，但我仍然想知道。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-03-28T13:05:33.227

不，没有办法做到这一点。

根据[语言规范](http://docs.oracle.com/javase/specs/jls/se7/html/jls-12.html#jls-12.5)，实例变量在`super()`调用之前甚至不会被初始化。

这些是在类实例创建的构造函数步骤中执行的步骤，取自链接：

> 1.  将构造函数的参数分配给此构造函数调用的新创建的参数变量。
> 2.  如果此构造函数以同一类中另一个构造函数的显式构造函数调用（第 8.8.7.1 节）开始（使用 this），则评估参数并使用这五个相同的步骤递归地处理该构造函数调用。如果该构造函数调用突然完成，则此过程出于相同原因而突然完成；否则，继续执行步骤 5。
> 3.  此构造函数不以显式构造函数调用同一类中的另一个构造函数开始（使用 this）。如果此构造函数用于 Object 以外的类，则此构造函数将以显式或隐式调用超类构造函数（使用 super）开始。使用这五个相同的步骤递归地评估超类构造函数调用的参数和过程。如果该构造函数调用突然完成，则此过程出于相同的原因突然完成。否则，继续执行步骤 4。
> 4.  执行该类的实例初始化程序和实例变量初始化程序，将实例变量初始化程序的值分配给相应的实例变量，按照它们在源代码中以文本形式出现的从左到右的顺序。如果执行这些初始化程序中的任何一个导致异常，则不会处理更多初始化程序，并且此过程会突然完成相同的异常。否则，继续执行步骤 5。
> 5.  执行此构造函数的其余部分。如果该执行突然完成，则此过程出于同样的原因突然完成。否则，此过程正常完成。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-03-28T13:19:53.903

超级构造器在任何情况下都会运行，但是由于我们正在谈论“最丑陋的黑客”，我们可以利用这一点

```
public class Base {
    public Base() {
        init();
    }

    public Base(String s) {
    }

    public void init() {
    //this is the ugly part that will be overriden
    }
}

class Derived extends Base{

    @Override
    public void init(){
        a = getValueFromDataBase();
    }
} 
```

我从不建议使用这些技巧。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-09-06T12:46:58.513

我有办法做到这一点。

```
class Derived extends Base
{
    private final int a;

    // make this method private
    private Derived(String someParameter,
                    int tmpVar /*add an addtional parameter*/) {
        // use it as a temprorary variable
        super(hack(someParameter, tmpVar = getValueFromDataBase()));
        // assign it to field a
        a = tmpVar;
    }

    // show user a clean constructor
    Derived(String someParameter)
    {   
        this(someParameter, 0)
    }

    ...
} 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2013-03-28T13:17:56.570

正如其他人所说，您不能在调用超类构造函数之前初始化实例字段。

但是有一些解决方法。一种是创建一个工厂类，它获取值并将其传递给 Derived 类的构造函数。

```
class DerivedFactory {
    Derived makeDerived( String someParameter ) {
        int a = getValueFromDataBase();
        return new Derived( someParameter, a );
    }
}

class Derived extends Base
{
    private final int a;

    Derived(String someParameter, int a0 ) {
        super(hack(someParameter, a0));
        a = a0;
    }
    ...
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-28T13:06:15.997

[Java 语言规范（第 8.8.7 节）](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.8.7)禁止这样做：

> **构造函数主体的第一条语句**可能是对同一类或直接超类的另一个构造函数的显式调用。

构造函数主体应如下所示：

> 构造函数体：
> 
> ```
> { ExplicitConstructorInvocationopt BlockStatementsopt } 
> ```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-07-23T10:15:57.207

虽然不能直接做，但可以尝试用嵌套对象做

所以用你的例子：

```
open class Base {
    constructor() {
        Timber.e(this.toString())
    }
}

class Derived {
    val a = "new value"

    val derivedObject : Base =  object : Base() {
        override fun toString(): String {
             return "a has value " + a;
        }
    }
} 
```

快乐的编码 - 它是 hack 但有效 :) 记得将 derivedObject 定义为**LAST** 变量

# android - 带有动态文本视图和可绘制图像的网格视图

> ID：15682458
> 
> 赞同：1
> 
> 时间：2013-03-28T12:58:41.000
> 
> 标签：android, gridview

我正在开发一个Android应用程序，它显示图像的gridview显示和textview。直到现在我用gridview显示来自drawable的图像。我从arraylist变量中的json获取文本值。

我过去只显示图像的代码：

```
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_front_page);

    GridView grid=(GridView)findViewById(R.id.maincatgrid);

     grid.setAdapter(new ImageAdapter(this));
     grid.setColumnWidth( 170 );
     grid.setVerticalSpacing(20 );
     grid.setStretchMode( GridView.STRETCH_COLUMN_WIDTH );
     grid.setNumColumns( GridView.AUTO_FIT );

}

       public class ImageAdapter extends BaseAdapter {

    private Context mContext;

    public ImageAdapter(Context c){
        mContext = c;
    }

      public Integer[] mThumbIds = {
                R.drawable.image1, 
                R.drawable.image2,
                R.drawable.image3,
                R.drawable.image4, 
                R.drawable.image5,
                R.drawable.image6, 
                R.drawable.image7, 
                R.drawable.image8, 

        };

    public int getCount() {
        // TODO Auto-generated method stub
        return mThumbIds.length;
    }

    public Object getItem(int position) {
        // TODO Auto-generated method stub
        return mThumbIds[position];
    }

    public long getItemId(int position) {
        // TODO Auto-generated method stub
        return 0;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        View MyView = convertView;
        // TODO Auto-generated method stub

        ImageView imageView;
        if (convertView == null) {

            imageView = new ImageView(mContext);
            imageView.setLayoutParams(new GridView.LayoutParams(170, 150));
            imageView.setAdjustViewBounds(false);
            imageView.setScaleType(ImageView.ScaleType.CENTER_CROP);

        } else {
            imageView = (ImageView) convertView;
        }

        imageView.setImageResource(mThumbIds[position]);

        return imageView;
    }

}
 } 
```

我从包含 15 个值的异步任务中获取 textview 值。当没有来自 mThumbIds 的图像（即 textvalues>images）时，它应该放置我的默认图像 R.drawable.no_image。有什么方法可以实现这一点，然后请建议我。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T13:27:30.023

[https://github.com/nostra13/Android-Universal-Image-Loader](https://github.com/nostra13/Android-Universal-Image-Loader)。

可以在本地或从服务器加载图像。

它基于惰性列表（工作原理相同）。但它还有很多其他配置。我更喜欢使用 Universal Image Loader，因为它为您提供了更多配置选项。如果下载失败，您可以显示错误图像。可以显示带圆角的图像。可以缓存在磁盘或内存上。可以压缩图像。

在您的自定义适配器构造函数中

```
File cacheDir = StorageUtils.getOwnCacheDirectory(activity context, "your folder");//for caching

// Get singletone instance of ImageLoader
imageLoader = ImageLoader.getInstance();
// Create configuration for ImageLoader (all options are optional)
ImageLoaderConfiguration config = new ImageLoaderConfiguration.Builder(a)
  // You can pass your own memory cache implementation
 .discCache(new UnlimitedDiscCache(cacheDir)) // You can pass your own disc cache implementation
 .discCacheFileNameGenerator(new HashCodeFileNameGenerator())
 .enableLogging()
 .build();
 // Initialize ImageLoader with created configuration. Do it once.
 imageLoader.init(config);
 options = new DisplayImageOptions.Builder()
 .showStubImage(R.drawable.stub_id)//display stub image untik image is loaded
 .cacheInMemory()
 .cacheOnDisc()
 .displayer(new RoundedBitmapDisplayer(20))
 .build(); 
```

在你的 getView()

```
 ImageView image=(ImageView)vi.findViewById(R.id.imageview); 
  imageLoader.displayImage(imageurl, image,options);//provide imageurl, imageview and options. 
```

您可以配置其他选项以满足您的需求。

与延迟加载/通用图像加载器一起，您可以查看持有者以实现平滑滚动和性能。[http://developer.android.com/training/improving-layouts/smooth-scrolling.html](http://developer.android.com/training/improving-layouts/smooth-scrolling.html)。

# web-services - 在 GMap 上放置位置

> ID：15682462
> 
> 赞同：0
> 
> 时间：2013-03-28T12:58:49.337
> 
> 标签：web-services, google-maps, netbeans

如果我有一个由经度和纬度定义的位置列表，并且我想将这些位置中的每一个作为图钉放置在谷歌地图上，并将图片作为缩略图附加到每个图钉上，如果用户按下则会放大的图片别针。用户不能真正移动引脚或自己放置引脚。

我可以通过网络服务做到这一点吗？（就像你可以在 Netbeans 中制作的一样）

如果是这样，如何？当我搜索时，我似乎根本找不到我要找的东西。

我可以找到 Google Maps API 参考，但它们根本没有帮助：/

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T13:09:00.520

您的问题有几个组成部分。google-maps 有一个我推荐使用的强大的 JS API。

帮助您入门的几个片段： 在指定位置创建新标记：

```
marker = new google.maps.Marker({
                position: new google.maps.LatLng(33.776989, -84.387000),
                map: map,
                title: '',
                draggable: true
            }); 
```

自定义标记： [https ://developers.google.com/maps/documentation/javascript/overlays#Icons](https://developers.google.com/maps/documentation/javascript/overlays#Icons)

创建一个新的调用（信息窗口）：

```
infowindow = new google.maps.InfoWindow();
var contentString = '<div id="content">Hello,World</div>';
                    infowindow.setContent(contentString); 
```

有了这个，您将能够拥有您正在寻找的大部分功能。您的网络服务可以将数据加载到客户端 JSON 中，然后由 Google-Maps API 呈现。

# php - JQuery Datepicker 未显示在我的结帐页面上

> ID：15682463
> 
> 赞同：0
> 
> 时间：2013-03-28T12:58:52.080
> 
> 标签：php, jquery, datepicker, woocommerce

jQuery datepicker 没有显示在我的结帐页面上，我不知道为什么。

交货日期字段出现，但当您单击日期选择器时不显示。

对于如何解决此问题的任何想法，我将不胜感激！

这是代码：

`

```
$wpefield_version = '1.0';

add_action('woocommerce_after_checkout_billing_form', 'my_custom_checkout_field'); 

function my_custom_checkout_field( $checkout ) {    

    wp_enqueue_script( 'jquery-ui-datepicker' );

    wp_enqueue_style( 'jquery-ui', "http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/smoothness/jquery-ui.css" , '', '', false);
wp_enqueue_style( 'datepicker', plugins_url('/css/datepicker.css', __FILE__) , '', '', true);

/*print(' <link rel="stylesheet" type="text/css" href="' . plugins_url() . '/order-delivery-date-for-woocommerce/datepicker.css">

        <script type="text/javascript" src="' . plugins_url() . '/order-delivery-date-for-woocommerce/datepicker.js"></script>'
    );
print('<script type="text/javascript" src="' . plugins_url() . '/order-delivery-date-for-woocommerce/initialize-datepicker.js"></script>');*/

echo '<script language="javascript">jQuery(document).ready(function(){
jQuery("#e_deliverydate").width("150px");
var formats = ["MM d, yy","MM d, yy"];
jQuery("#e_deliverydate").val("").datepicker({dateFormat: formats[1], minDate:1});
jQuery("#e_deliverydate").parent().after("<div id=\'order-desc\'><small style=font-size:10px;>Format (DD/MM/YY). We will try our best to deliver your order on the specified date</small></div>"); 
```

;`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T13:03:11.950

看看这里：http: [//jqueryui.com/datepicker/](http://jqueryui.com/datepicker/) 改变这个：

```
echo '<script language="javascript">jQuery(document).ready(function(){
jQuery("#e_deliverydate").width("150px");
var formats = ["MM d, yy","MM d, yy"];
jQuery("#e_deliverydate").val("").datepicker({dateFormat: formats[1], minDate:1});
jQuery("#e_deliverydate").parent().after("<div id=\'order-desc\'><small style=font-size:10px;>Format (DD/MM/YY). We will try our best to deliver your order on the specified date</small></div>"); 
```

为了这：

```
echo '<script language="javascript">jQuery(document).ready(function(){
jQuery("#e_deliverydate").width("150px");
var formats = ["MM d, yy","MM d, yy"];
jQuery("#e_deliverydate").datepicker({dateFormat: formats[1], minDate:1});
jQuery("#e_deliverydate").parent().after("<div id=\'order-desc\'><small style=font-size:10px;>Format (DD/MM/YY). We will try our best to deliver your order on the specified date</small></div>"); 
```

确保您的 jqueryui.js 已加载。从浏览器查看控制台以查找错误。

# ember.js - Ember js 和多级关系

> ID：15682466
> 
> 赞同：0
> 
> 时间：2013-03-28T12:58:57.280
> 
> 标签：ember.js, ember-data

我正在尝试一个显示驱动器的基本应用程序，它的文件夹和文件（潜水 hasMany 文件夹 hasMany 文件）......当使用车把模板实现时，所有关系都加载得很好，但是当我手动创建控制器和视图时，我遇到了一些问题。我手动实例化视图的原因如下。一个要求是根据文件模型上的属性“类型”为文件对象加载不同的视图（可能还有控制器）（例如，图像文件应该有 App.ImageFileView 而视频应该有 App.VideoFileView）。另一个要求是路由仅适用于驱动器，因此不应有文件夹或文件路由。我面临的主要问题是与当前驱动器相关的文件夹加载正常。但是当我遍历一个文件夹以加载相关文件时，我总是得到一个空集，感谢任何帮助。所以我的问题是为什么在使用把手模板时会显示文件，而不是在手动实例化控制器和视图时显示文件？以及如何强制加载关系？

小提琴位于[此处](http://jsfiddle.net/AF7vG/5/)

```
App = Ember.Application.create({});

// routing
App.Router.map(function() {
    this.resource('drives',{path:'/'});
    this.resource('drive',{path:'/:drive_id'});
});
App.DrivesRoute = Ember.Route.extend({
  model: function() {
    return App.Drive.find();
  }
});
App.DriveRoute = Ember.Route.extend({
  model: function(params) {
    rval = App.Drive.find(params.drive_id);

    App.set('activeDrive',rval);
    return rval;
  },
  setupController : function(controller, model){
  debugger;
    var rController = App.DrivesController.create({content:model.get('folders')});
    rController.populate();
  }
});

// controllers
App.DrivesController = Ember.ArrayController.extend({
    populate : function(){
        var drives = this.content;
        debugger;
        drives.forEach(function(drive){
            var rc = App.DriveController.create({content:drive});

            rc.populate();
            var rv = App.DriveView.create({controller:rc});
            rv.prepare().append('#output');
        });
    }
})
App.DriveController = Ember.ObjectController.extend({
    populate:function(){
        console.log('There are '+this.content.get('files.length')+' files');
        this.content.get('files').forEach(function(file){
            // not reaching this point ... files.length is always 0
        });
    }
});

// views 

App.DriveView = Ember.View.extend({
    template : Ember.Handlebars.compile('{{content.name}}'),
    prepare:function(){
        return this;
    }
});

//Models

App.Store = DS.Store.extend({
  revision: 11,
  adapter: DS.FixtureAdapter.create({simulateRemoteResponse: false})
});
App.Drive = DS.Model.extend({
    title : DS.attr('string'),
    folders : DS.hasMany('App.Folder')
});
App.Folder = DS.Model.extend({
    name : DS.attr('string'),
    drive : DS.belongsTo('App.Drive'),
    files : DS.hasMany('App.File')
});
App.File = DS.Model.extend({
    content : DS.attr('string'),
    type : DS.attr('string'),
    folder : DS.belongsTo('App.Folder')
});

// Fixtures
App.Drive.FIXTURES = [
    {
        id:1,
        title : 'First Drive Title',
        folders : [11,12,13]
        },
    {
        id:2,
        title: 'Second Drive Title'
    },
    {
        id:3,
        title: 'Third Drive Title'
    }
];
App.Folder.FIXTURES = [
    {
        id:11,
        name:"Docs",
        files : [111,112]
    },
    {
        id:12,
        name:"Downloads"
    },
    {
        id:13,
        name:"Music"
    },
];
App.File.FIXTURES = [
    {
        id :111,
        content : 'first file content',
        type : 'Text',
        folder: 11
    },
    {
        id :112,
        content : 'second file content',
        type : 'Image',
        folder:11
    },

]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T13:53:25.120

嗯，我对固定装置了解不多，但是您的问题可能与`widgets : [111,112]`您的`App.Folder.FIXTURES`而不是您的问题有关`files : [111,112]`吗？此外，您的文件夹似乎没有任何驱动器 ID。不过，我不知道这些是否是明确必要的。

# java - GWT 超级开发模式 - 无需预编译即可启动

> ID：15682475
> 
> 赞同：1
> 
> 时间：2013-03-28T12:59:18.037
> 
> 标签：java, gwt, gwt-compiler, gwt-hosted-mode

在 GWT 2.5.1 发行说明中，有一个新选项（-noprecompile）可以在启动超级开发模式时添加。但是当我将它添加到运行配置中时，我收到了消息

```
Unknown argument: -noprecompile
Google Web Toolkit 2.5.1 
```

我究竟做错了什么 ？

# sass - 用于开发正确处理 Compass 项目结构和导入的 SASS 代码的编辑器/IDE？

> ID：15682477
> 
> 赞同：1
> 
> 时间：2013-03-28T12:59:24.720
> 
> 标签：sass, compass-sass

我的 Compass 项目的结构已经超出了 Sublime Text 或 TextMate/E 等文本编辑器的能力。例子：

[![在此处输入图像描述](../Images/cf25a45cd82886514852c01e1c3eaad2.png)](http://d.pr/i/AjNx+)

我迫切需要变量/混合名称aoutcompletion和重构功能：全局重命名变量/混合，在不破坏导入的情况下移动文件等。

我尝试过最新的 JetBrains IDE（RubyMine、PhpStorm、WebStorm、PyCharm），但它们无法处理 Compass 项目结构。所有变量都被认为是未定义的，重构工具失败和其他令人讨厌的事情发生。例子：

[![在此处输入图像描述](../Images/5876570892532c5c2b375972310ff8ea.png)](http://d.pr/i/xxy8+)

因此，当涉及到 Compass 驱动的 SASS 开发时，那些付费的 IDE 会屈服于像 vim 这样的普通程序员的编辑器，这些编辑器至少具有愚蠢但有效的自动完成功能。

**问题是：哪些编辑器和 IDE 具有完整的 Compass 支持？**

PS 我在 Windows 上，但请建议任何操作系统的匹配软件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T14:40:25.877

我最近遇到了同样的限制。这就是我所做的。只需转到您的 sass 样式表目录并创建指向位于 Compass gem 目录中的 compass 框架源文件的符号链接。

我在这里假设几件事：

*   你正在使用 RVM 来管理你的 Ruby 版本
*   您正在使用捆绑器来管理您的宝石
*   您在基于 linux 或 os x 的系统上

如果不是这种情况，请不要害怕！我们会找到方法的。

如何找到这个 Gem 的 Sass 源文件的位置？只需执行：

```
bundle show compass 
```

path_to_rvm_files/gems/your_ruby_version@your_gemset/gems/compass-version

当然，您的路径可能会有所不同，但这就是想法。

您应该导航到该目录，您将在其中找到一个名为 frameworks 的目录，其中包含一些其他目录：

```
...
|_compass-xxxxx
  |_frameworks
    |_compass
      |_stylesheets
        |_compass 
```

在最新版本中，**指南针**是您重要的指南针文件所在的位置。因此，您必须在项目中创建一个指向该目录的符号链接，然后您的 IDe 将*“找出包含或导入的东西在哪里”*，可以这么说。

如何创建这个符号链接？在终端上进入项目样式表目录并执行：

```
ln -s path_to_rvm_files/gems/your_ruby_version@your_gemset/gems/compass-version/frameworks/compass/stylesheets/compass/ compass 
```

希望这将解决 Compass 自己的变量、mixins 等问题。

关于您的自定义，我的建议是将它们全部导入 _base.scss/sass。

我自己使用 Rubymine，这是我目前为止的方式。

问候！

# jquery - jQuery / CSS / AJAX Popup-Style DIV 在结果包含 div 时关闭

> ID：15682481
> 
> 赞同：2
> 
> 时间：2013-03-28T12:59:30.550
> 
> 标签：jquery, css, html, overlay, wrapper

我制作了一个 jQuery / CSS Popup-Style Div。div 的内容通过 ajax-request 加载并放入 .ajax_popup_wrapper ！

当您将鼠标悬停在 TIPP 上时，会创建 div 并将其附加到“BODY”。(.ajax_popup_wrapper_wrapper)

我在 div 函数中使用这些行：

```
$('.ajax_popup_wrapper_wrapper').mouseout(function(){
        // REMOVE DIV's
}); 
```

检查鼠标是否在 .ajax_popup_wrapper_wrapper 上（如果不是 -> 关闭它！）

如果 ajax_popup_wrapper 只包含文本和图像（或类似的东西！），这很好。如果结果包含另一个 div（在图片中：RESULT DIV），那么您不能悬停此 RESULT DIV，因为 .ajax_popup_wrapper_wrapper 已删除。结果 DIV 应位于 wrapper_wrapper 之下，但仍必须**可点击！**

我试图将 wrapper_wrapper 放在 RESULT DIV 的顶部并且有效（该 div 不会关闭！），但是我无法单击 RESULT DIV 内的链接。

这很奇怪，请帮助我！谢谢！

**编辑：我添加了一个 JSFIDDLE 示例** [http://jsfiddle.net/dH55F/19/](http://jsfiddle.net/dH55F/19/)

![在此处输入图像描述](../Images/518071547b8c6dfddc31d7e267eda8b5.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T13:19:35.693

检测我们将鼠标移入的元素是否具有类[*希望您可以在其中的 div 中添加一个标识符*]，如果有，则返回 false，否则，只需执行正常的删除代码。

```
$('.ajax_popup_wrapper_wrapper').mouseout(function(e){
    if($(e.toElement).hasClass('other')){
        return false;   
    }
    //do your remove code here
}); 
```

我不确定元素是否已从 DOM 中完全删除，因此以下代码将事件处理程序委托给`other`单击时 DOM 树中存在的类的任何元素；不管它是否是在 DOM 准备好之后添加的。

```
$(document).on('mouseout', '.other', function(e){
    e.stopPropagation();
}); 
```

注意我们使用，`.stopPropagation()`我们这样做是为了它不会随意触发`.mouseout()`.`.ajax_popup_wrapper_wrapper`

[理论实现（jsFiddle）](http://jsfiddle.net/ug5L6/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T13:26:36.740

像这样使用，

```
var mouse_is_inside = false;
$(document).ready(function()
{
    $('.ajax_popup_wrapper_wrapper').hover(function(){ 
        mouse_is_inside=true; 
    }, function(){ 
        mouse_is_inside=false; 
    });

}); 
```

参考：[看到这个](http://stackcomplete.com/use-jquery-to-hide-a-div-when-the-user-clicks-outside-of-div-or-element/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T15:07:29.363

问题解决了！谢谢！

我唯一需要改变的是删除 mouseout() 并将其替换为 mouseleave() ...

```
$('.ajax_popup_wrapper_wrapper').mouseleave(function(){
// remove div 
```

# node.js - 多个客户端在节点 js 中发布数据

> ID：15682482
> 
> 赞同：1
> 
> 时间：2013-03-28T12:59:34.877
> 
> 标签：node.js, post, request

我读过在 Node js 中应该仔细处理 POST 请求，因为发布数据可能以块的形式到达，所以必须像这样处理它，连接：

```
function handleRequest(request, response) {
    if (request.method == 'POST') {
        var body = '';
        request.on('data', function (data) {
            body += data;
        });
        request.on('end', function () {
            //data is complete here
        });
    }
} 
```

我不明白的是这个代码片段将如何同时处理多个客户端。假设两个单独的客户端开始上传大型 POST 数据。它们将被添加到同一个主体中，混合数据......

或者是处理这个问题的框架？触发不同的handleRequest函数实例，使它们不会在body变量中混淆？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T13:25:51.330

鉴于`request, response`您的方法的签名，它看起来像是[请求事件](http://nodejs.org/api/http.html#http_event_request)的侦听器。

假设这是正确的，那么对于每个新请求都会发出此事件，因此只要您仅将新数据连接`body`到该处理程序唯一的对象（如您当前的示例中所示），您就可以开始了。

# magento - 如何在 Magento 中为访客用户获取最近查看的产品

> ID：15682483
> 
> 赞同：5
> 
> 时间：2013-03-28T12:59:36.153
> 
> 标签：magento

当我想为来宾用户显示最近的产品时，我面临一个问题，有没有办法为来宾用户显示最近查看的产品，

Magento 支持注册用户最近查看产品，但访客用户如何显示该特定访客最近查看的产品...

我在等你的善意回应，

希望我能得到一些答复。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T07:32:07.527

这是.html

```
<?php if ($_products = $this->getRecentlyViewedProducts()):
$ids = '';
foreach ($_products as $_item) {
    $ids .= $_item->getId() . ';';
}
?>
<div class="lftHeading">
<span
        style="text-transform:capitalize;background:url(<?php echo $this->getSkinUrl('css/images/clo_left_heading_bullet2.gif') ?>) top left no-repeat;"
        >recently viewed</span>
</div>
<div class="innerRgtMenu recently_viewed_block">
<table id="recently-viewed-items">
    <?php $i = 0; foreach ($_products as $_item): if ($i == 3) {
    continue;
} ?>
    <?php $product = $_item ?>
    <tr>
        <td><a style="border:1px solid #DDDDDD;float:left;margin:5px;padding:5px;"
               href="<?php echo $this->getProductUrl($_item, array('_nosid' => true)) ?>" class="product-image"><img
                src="<?php echo $this->helper('catalog/image')->init($product, 'thumbnail')->resize(50) ?>"
                width="50" alt="<?php echo $this->escapeHtml($_item->getName()) ?>"/></a></td>
        <td><a style="position:relative;top:3px;font-size:11px;"
               href="<?php echo $this->getProductUrl($_item, array('_nosid' => true)) ?>"><?php echo $this->escapeHtml($_item->getName()) ?></a>
        </td>

    </tr>
    <?php $i++;
endforeach; ?>
</table>
<div style="margin: 5px 0px 5px 2px; text-align: center; width: 140px;">
    <input type="button" class="button recently_viewed_btn" value="<?php echo $this->__('Email These To Me') ?> "
           onClick="email_recently('<?php echo $ids; ?>')"/>
</div>
<div style="margin:5px;">
    <a href="<?php echo $this->getBaseUrl() ?>recently-viewed-items/"><?php echo $this->__('See All Recently Viewed') ?></a>
</div>
<script type="text/javascript">decorateList('recently-viewed-items');</script> 
```

和php文件

```
class Mage_Reports_Block_Product_Viewed extends Mage_Reports_Block_Product_Abstract
{
const XML_PATH_RECENTLY_VIEWED_COUNT    = 'catalog/recently_products/viewed_count';

/**
 * Viewed Product Index model name
 *
 * @var string
 */
protected $_indexName       = 'reports/product_index_viewed';

/**
 * Retrieve page size (count)
 *
 * @return int
 */
public function getPageSize()
{
    if ($this->hasData('page_size')) {
        return $this->getData('page_size');
    }
    return Mage::getStoreConfig(self::XML_PATH_RECENTLY_VIEWED_COUNT);
}

/**
 * Added predefined ids support
 */
public function getCount()
{
    $ids = $this->getProductIds();
    if (!empty($ids)) {
        return count($ids);
    }
    return parent::getCount();
}

/**
 * Prepare to html
 * check has viewed products
 *
 * @return string
 */
protected function _toHtml()
{
    if (!$this->getCount()) {
        return '';
    }
    $this->setRecentlyViewedProducts($this->getItemsCollection());
    return parent::_toHtml();
}
} 
```

如果它对客人不起作用 - 尝试将 php 文件中的最后一个函数更改为

```
 protected function _toHtml()
{
 /*   if ($this->_hasViewedProductsBefore() === false) {
        return '';
    } */

    $this->setDisplayMinimalPrice('1');
    $collection = $this->_getRecentProductsCollection();

    $hasProducts = (bool)count($collection);
//        if (is_null($this->_hasViewedProductsBefore())) {
//           Mage::getSingleton('reports/session')->setData('viewed_products', $hasProducts);
//        }
    if ($hasProducts) {
        $this->setRecentlyViewedProducts($collection);
    }

    return parent::_toHtml();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-12-12T19:36:57.200

在 magento 1.6-1.9.2.2 中阻止最近查看的产品工作正常，无需任何代码修改
如果未显示块，您需要检查：

1.  块已正确添加到可见容器中的页面（默认情况下，块添加到右侧边栏）
2.  日志已启用。检查系统->配置->系统->日志选项“启用日志”=是
3.  重建索引“类别产品”（catalog_category_product）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T13:39:01.617

据我所知 - 它应该对客人很好。至少它适用于我的网站，这是我将其放在页面上的方式：

```
<block type="reports/product_viewed" name="reports.product.recently.viewed" template="reports/recently_viewed.phtml" /> 
```

# hibernate - Spring+jsp 会话

> ID：15682484
> 
> 赞同：0
> 
> 时间：2013-03-28T12:59:42.923
> 
> 标签：hibernate, jsp, spring-mvc

嗨，我对 Spring 很陌生。我的项目涉及spring+hibernate+jsp。我非常担心交给我的任务

任务：

我想在会话中存储一个jsp文本框值，然后在步骤之后我想在spring控制器中检索它以继续数据库过程......请帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T13:03:53.117

在jsp中：

```
 <c:set var="name" value="yourname" scope="session"  /> 
```

在春天

```
 ServletRequestAttributes attr = (ServletRequestAttributes)  
     RequestContextHolder.currentRequestAttributes();
   HttpSession session = attr.getRequest().getSession();
   session.getAttribute("name"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T10:03:44.600

如果您想使用 Spring 项目进行 4 步注册过程，我建议您查看 Spring Web Flow。您可以[在此处](https://github.com/SpringSource/spring-webflow-samples)找到示例教程[，](http://springinpractice.com/2008/05/05/build-a-shopping-cart-with-spring-web-flow-2-part-1/)并在 stackoverflow 和网络上进行搜索。它用于完全按照您的意愿行事。

否则，您需要将@SessionAttributes 添加到您的控制器并声明@ModelAttributes。这是一个例子：

```
 @SessionAttributes({"oneDto","secondDto", [...as many as you want...]})
    public class MyController {

        [...Declaration and init of forms and modelAttributes...]

        @RequestMapping(method = RequestMethod.POST)
        public String processFirstPage(
            @ModelAttribute("oneDto") OneDto infoFromFirstPage,
            BindingResult result, SessionStatus status) {

                    [...Do whatever you need...]

            //return form success view
            return "secondPageView"; //uses secondDto

        }

        @RequestMapping(method = RequestMethod.POST)
        public String processSecondPage(
            @ModelAttribute("oneDto") OneDto infoFromFirstPage, @ModelAttribute("secondDto") SecondDto infoFromSecondPage
            BindingResult result, SessionStatus status) {

                    [...Do whatever you need...]

            //return form success view
            return "thirdPageView";

        }
    } 
```

从 JSP 的角度来看，dto 在表单的“modelAttribute”中声明，所有字段都在输入、选择等路径中：

```
<form:form method="post" modelAttribute="oneDto" action="matchResquestMappingURL" enctype="application/x-www-form-urlencoded">
<form:input path="oneField"/> 
etc. 
```

[完整的 TLD 描述在这里](http://static.springsource.org/spring/docs/2.0.x/reference/spring-form.tld.html)

您不必使用多个 DTO，您可以使用同一个并在每个页面上添加更多信息。使用完数据后，请致电`status.setComplete();`清理会话。

这只是您理解该概念的基础，但还有许多其他方法可以解决此问题。例如，您可以在[这里查看](http://www.mkyong.com/spring-mvc/spring-mvc-handling-multipage-forms-with-abstractwizardformcontroller/)。（多页表格）

# ios - 带有 loginViewController 的 xcode 选项卡式应用程序

> ID：15682487
> 
> 赞同：0
> 
> 时间：2013-03-28T12:59:51.167
> 
> 标签：ios, uitabbarcontroller

我对 xcode 还很陌生，如果我问了不好的问题，我深表歉意。我的问题是我创建了一个选项卡式应用程序，但希望在选项卡显示之前显示一个登录屏幕。有很多关于这个的帖子，共识是你需要让你的 tabBarController 来呈现一个视图控制器。这是有道理的，但由于某种原因，我的应用程序没有显示登录屏幕。我将在下面粘贴我的 appDelegate.m 代码。任何帮助将非常感激。

Tks

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    sleep(3);
    self.window = [[[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]] autorelease];

    // Override point for customization after application launch.
    LoginViewController *loginViewController = [[[LoginViewController alloc] initWithNibName:@"LoginViewController" bundle:nil] autorelease];
    UIViewController *viewController1 = [[[SecondViewController alloc] initWithNibName:@"FirstViewController" bundle:nil] autorelease];
    UIViewController *viewController2 = [[[SecondViewController alloc] initWithNibName:@"SecondViewController" bundle:nil] autorelease];

    self.tabBarController = [[[UITabBarController alloc] init] autorelease];
    self.tabBarController.viewControllers = @[viewController1, viewController2];

    self.window.rootViewController = self.tabBarController;

    [loginViewController setModalTransitionStyle:UIModalTransitionStyleCoverVertical];
    [_tabBarController presentViewController:loginViewController animated:YES completion:nil];

    [self.window makeKeyAndVisible];
    return YES;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T15:36:47.320

您应该从第一个选项卡中的控制器进行演示（假设这是您要在登录屏幕关闭后显示的控制器）。从 viewDidAppear 方法进行演示，动画参数设置为 NO。

# php - 带有选择和/或添加新的 Symfony 2 实体字段类型

> ID：15682494
> 
> 赞同：11
> 
> 时间：2013-03-28T13:00:23.530
> 
> 标签：php, forms, symfony, doctrine-orm

## 语境：

假设有两个实体（正确映射为 Doctrine）。

1.  `Post`具有属性 { `$id`(integer, autoinc), `$name`(string), `$tags`(collection of `Tag`)}
2.  `Tag` 具有属性 { `$id`(integer, autoinc), `$name`(string), `$posts`(collection of `Post`)}

这两者的关系是`Many-To-Many`。

## 问题：

创建新的`Post`时，我想立即为其添加标签。

如果我想添加`Tags`已经被保留的，我会创建[实体字段类型](http://symfony.com/doc/current/reference/forms/types/entity.html)，这没问题。

**但是**，如果我也想添加全新的内容，我会怎么做`Tags`？（检查一些已经存在的标签，为新标签填写名称，也许添加一些新标签，然后在提交后将所有内容正确分配给`Post`实体）

```
    创建新帖子：
     姓名： [__________]

    添加标签
    |
    |[x] 阿尔法
    |[ ] 测试版
    |[x] 伽玛
    |
    |我的标签不存在，新建一个：
    |
    |姓名：[__________]
    |
    |+添加另一个新标签

```

有没有办法做到这一点？我知道 Symfony 2 的基础知识，但不知道如何处理这个问题。也让我感到惊讶，我没有在任何地方找到我的答案，这对我来说似乎是一个常见问题。我错过了什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-28T13:27:13.403

我的标签实体有一个标签名称的唯一字段。对于添加标签，我使用新的表单类型和转换器。

表格类型：

```
namespace Sg\RecipeBundle\Form\Type;

use Symfony\Component\Form\AbstractType;
use Symfony\Component\Form\FormBuilderInterface;
use Symfony\Bridge\Doctrine\RegistryInterface;
use Symfony\Component\Security\Core\SecurityContextInterface;
use Sg\RecipeBundle\Form\DataTransformer\TagsDataTransformer;

class TagType extends AbstractType
{
    /**
     * @var RegistryInterface
     */
    private $registry;

    /**
     * @var SecurityContextInterface
     */
    private $securityContext;

    /**
     * Ctor.
     *
     * @param RegistryInterface        $registry        A RegistryInterface instance
     * @param SecurityContextInterface $securityContext A SecurityContextInterface instance
     */
    public function __construct(RegistryInterface $registry, SecurityContextInterface $securityContext)
    {
        $this->registry = $registry;
        $this->securityContext = $securityContext;
    }

    /**
     * {@inheritdoc}
     */
    public function buildForm(FormBuilderInterface $builder, array $options)
    {
        $builder->addViewTransformer(
            new TagsDataTransformer(
                $this->registry,
                $this->securityContext
            ),
            true
        );
    }

    /**
     * {@inheritdoc}
     */
    public function getParent()
    {
        return 'text';
    }

    /**
     * {@inheritdoc}
     */
    public function getName()
    {
        return 'tag';
    }
} 
```

变压器：

```
<?php

/*
 * Stepan Tanasiychuk is the author of the original implementation
 * see: https://github.com/stfalcon/BlogBundle/blob/master/Bridge/Doctrine/Form/DataTransformer/EntitiesToStringTransformer.php
 */

namespace Sg\RecipeBundle\Form\DataTransformer;

use Symfony\Component\Form\DataTransformerInterface;
use Symfony\Component\Security\Core\SecurityContextInterface;
use Symfony\Component\Security\Core\Exception\AccessDeniedException;
use Symfony\Component\Form\Exception\UnexpectedTypeException;
use Symfony\Bridge\Doctrine\RegistryInterface;
use Doctrine\ORM\EntityManager;
use Doctrine\Common\Collections\Collection;
use Doctrine\Common\Collections\ArrayCollection;
use Sg\RecipeBundle\Entity\Tag;

/**
 * Tags DataTransformer.
 */
class TagsDataTransformer implements DataTransformerInterface
{
    /**
     * @var EntityManager
     */
    private $em;

    /**
     * @var SecurityContextInterface
     */
    private $securityContext;

    /**
     * Ctor.
     *
     * @param RegistryInterface        $registry        A RegistryInterface instance
     * @param SecurityContextInterface $securityContext A SecurityContextInterface instance
     */
    public function __construct(RegistryInterface $registry, SecurityContextInterface $securityContext)
    {
        $this->em = $registry->getEntityManager();
        $this->securityContext = $securityContext;
    }

    /**
     * Convert string of tags to array.
     *
     * @param string $string
     *
     * @return array
     */
    private function stringToArray($string)
    {
        $tags = explode(',', $string);

        // strip whitespaces from beginning and end of a tag text
        foreach ($tags as &$text) {
            $text = trim($text);
        }

        // removes duplicates
        return array_unique($tags);
    }

    /**
     * Transforms tags entities into string (separated by comma).
     *
     * @param Collection | null $tagCollection A collection of entities or NULL
     *
     * @return string | null An string of tags or NULL
     * @throws UnexpectedTypeException
     */
    public function transform($tagCollection)
    {
        if (null === $tagCollection) {
            return null;
        }

        if (!($tagCollection instanceof Collection)) {
            throw new UnexpectedTypeException($tagCollection, 'Doctrine\Common\Collections\Collection');
        }

        $tags = array();

        /**
         * @var \Sg\RecipeBundle\Entity\Tag $tag
         */
        foreach ($tagCollection as $tag) {
            array_push($tags, $tag->getName());
        }

        return implode(', ', $tags);
    }

    /**
     * Transforms string into tags entities.
     *
     * @param string | null $data Input string data
     *
     * @return Collection | null
     * @throws UnexpectedTypeException
     * @throws AccessDeniedException
     */
    public function reverseTransform($data)
    {
        if (!$this->securityContext->isGranted('ROLE_AUTHOR')) {
            throw new AccessDeniedException('Für das Speichern von Tags ist die Autorenrolle notwendig.');
        }

        $tagCollection = new ArrayCollection();

        if ('' === $data || null === $data) {
            return $tagCollection;
        }

        if (!is_string($data)) {
            throw new UnexpectedTypeException($data, 'string');
        }

        foreach ($this->stringToArray($data) as $name) {

            $tag = $this->em->getRepository('SgRecipeBundle:Tag')
                ->findOneBy(array('name' => $name));

            if (null === $tag) {
                $tag = new Tag();
                $tag->setName($name);

                $this->em->persist($tag);
            }

            $tagCollection->add($tag);

        }

        return $tagCollection;
    }
} 
```

config.yml

```
recipe.tags.type:
    class: Sg\RecipeBundle\Form\Type\TagType
    arguments: [@doctrine, @security.context]
    tags:
        - { name: form.type, alias: tag } 
```

使用新类型：

```
 ->add('tags', 'tag', array(
            'label' => 'Tags',
            'required' => false
            )) 
```

类似“symfony”和“smfony”可以通过自动完成功能来避免：

标签控制器：

```
<?php

namespace Sg\RecipeBundle\Controller;

use Symfony\Bundle\FrameworkBundle\Controller\Controller;
use Symfony\Component\HttpFoundation\Response;
use Sensio\Bundle\FrameworkExtraBundle\Configuration\Method;
use Sensio\Bundle\FrameworkExtraBundle\Configuration\Route;

/**
 * Tag controller.
 *
 * @Route("/tag")
 */
class TagController extends Controller
{
    /**
     * Get all Tag entities.
     *
     * @Route("/tags", name="tag_tags")
     * @Method("GET")
     *
     * @return \Symfony\Component\HttpFoundation\Response
     */
    public function getTagsAction()
    {
        $request = $this->getRequest();
        $isAjax = $request->isXmlHttpRequest();

        if ($isAjax) {
            $em = $this->getDoctrine()->getManager();

            $search = $request->query->get('term');

            /**
             * @var \Sg\RecipeBundle\Entity\Repositories\TagRepository $repository
             */
            $repository = $em->getRepository('SgRecipeBundle:Tag');

            $qb = $repository->createQueryBuilder('t');
            $qb->select('t.name');
            $qb->add('where', $qb->expr()->like('t.name', ':search'));
            $qb->setMaxResults(5);
            $qb->orderBy('t.name', 'ASC');
            $qb->setParameter('search', '%' . $search . '%');

            $results = $qb->getQuery()->getScalarResult();

            $json = array();
            foreach ($results as $member) {
                $json[] = $member['name'];
            };

            return new Response(json_encode($json));
        }

        return new Response('This is not ajax.', 400);
    }
} 
```

form.html.twig：

```
<script type="text/javascript">

    $(document).ready(function() {

        function split(val) {
            return val.split( /,\s*/ );
        }

        function extractLast(term) {
            return split(term).pop();
        }

        $("#sg_recipebundle_recipetype_tags").autocomplete({
            source: function( request, response ) {
                $.getJSON( "{{ path('tag_tags') }}", {
                    term: extractLast( request.term )
                }, response );
            },
            search: function() {
                // custom minLength
                var term = extractLast( this.value );
                if ( term.length < 2 ) {
                    return false;
                }
            },
            focus: function() {
                // prevent value inserted on focus
                return false;
            },
            select: function( event, ui ) {
                var terms = split( this.value );
                // remove the current input
                terms.pop();
                // add the selected item
                terms.push( ui.item.value );
                // add placeholder to get the comma-and-space at the end
                terms.push( "" );
                this.value = terms.join( ", " );
                return false;
            }
        });

    });

</script> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-05-17T14:47:27.173

[我使用Select2 的标签输入](https://select2.github.io/examples.html#tags)采取了稍微不同的方法：

[![Select2 标签输入](../Images/9f5a0ad95ae1a2348a1072f4919a764a.png)](https://i.stack.imgur.com/3Lwof.png)

它的优点是它可以防止客户端重复并且看起来很漂亮。

为了创建新添加的实体，我使用的是 EventSubscriber 而不是 DataTransformer。

有关更多详细信息，[请参阅我的要点](https://gist.github.com/foaly-nr1/3a58c3d849253812874bb2c2030bd889)。下面是 TagType 和 AddEntityChoiceSubscriber。

*AppBundle/Form/Type/TagType*：

```
<?php

namespace AppBundle\Form\Type;

use Symfony\Component\Form\AbstractType;
use Symfony\Component\Form\FormBuilderInterface;
use AppBundle\Form\EventListener\AddEntityChoiceSubscriber;
use Symfony\Bridge\Doctrine\Form\Type\EntityType;

class TagType extends AbstractType
{
    /**
     * {@inheritdoc}
     */
    public function buildForm(FormBuilderInterface $builder, array $options)
    {
        $subscriber = new AddEntityChoiceSubscriber($options['em'], $options['class']);
        $builder->addEventSubscriber($subscriber);
    }

    /**
     * {@inheritdoc}
     */
    public function getParent()
    {
        return EntityType::class;
    }

    /**
     * {@inheritdoc}
     */
    public function getName()
    {
        return 'tag';
    }
} 
```

*AppBundle/Form/EventListener/AddEntityChoiceSubscriber*：

```
<?php

namespace TriprHqBundle\Form\EventListener;

use Symfony\Component\EventDispatcher\EventSubscriberInterface;
use Doctrine\ORM\EntityManager;
use Symfony\Component\Form\FormEvents;
use Symfony\Component\Form\FormEvent;

class AddEntityChoiceSubscriber implements EventSubscriberInterface
{
    /**
     * @var EntityManager
     */
    protected $em;

    /**
     * The name of the entity
     *
     * @var string
     */
    protected $entityName;

    public function __construct(EntityManager $em, string $entityName)
    {
        $this->em = $em;
        $this->entityName = $entityName;
    }

    public static function getSubscribedEvents()
    {
        return [
            FormEvents::PRE_SUBMIT => 'preSubmit',
        ];
    }

    public function preSubmit(FormEvent $event)
    {
        $data = $event->getData();

        if (!is_array($data) && !($data instanceof \Traversable && $data instanceof \ArrayAccess)) {
            $data = [];
        }

        // loop through all values
        $repository = $this->em->getRepository($this->entityName);
        $choices = array_map('strval', $repository->findAll());
        $className = $repository->getClassName();
        $newChoices = [];
        foreach($data as $key => $choice) {
            // if it's numeric we consider it the primary key of an existing choice
            if(is_numeric($choice) || in_array($choice, $choices)) {
                continue;
            }
            $entity = new $className($choice);
            $newChoices[] = $entity;
            $this->em->persist($entity);
        }
        $this->em->flush();

        // now we need to replace the text values with their new primary key
        // otherwise, the newly added choice won't be marked as selected
        foreach($newChoices as $newChoice) {
            $key = array_search($newChoice->__toString(), $data);
            $data[$key] = $newChoice->getId();
        }

        $event->setData($data);
    }
} 
```

# ajax - 重复的“Access-Control-Allow-Origin：*”标头会破坏 CORS 吗？

> ID：15682496
> 
> 赞同：2
> 
> 时间：2013-03-28T13:00:31.623
> 
> 标签：ajax, https, http-headers, cors

所以我们有一个提供 JSON 的 http 资源。它增加了一个

```
Access-Control-Allow-Origin: * 
```

旗帜。所以这可以用 CORS 加载......*除了*（我被告知）有一些 IE9 怪癖，这意味着这仍然无法在 IE9 中工作，但如果这是一个 https 资源，它会工作。

所以我们设置了一个现有的 https 代理来包含这个资源。只有那个 https 资源还添加了 Access-Control-Allow-Origin: * 标头，因此响应包含两个这样的标头。

这似乎根本不起作用。从实验上看，如果我从“内部”http 资源中删除标头，代理版本（现在只包含一个标头）确实可以工作。只是在 Chrome、Firefox 中使用 jQuery CORS 进行测试。

是对的吗？所以我需要做的就是（有人）修复https代理以“设置”标题而不是“添加”它？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-28T14:53:59.357

[CORS 规范](http://www.w3.org/TR/cors/)明确指出：

> 如果响应包含零个或多个 Access-Control-Allow-Origin 标头值，则返回失败并终止此算法。

所以你是对的，你应该只有一个`Access-Control-Allow-Origin`标题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-09-08T16:04:22.400

如果重复的标头具有不同的值，那么它们将被连接成一个值。正如 monsur 指出的那样，这将导致标头无效，如规范中所述。

具有相同值的重复标头可能适用于某些客户端（Chrome 让我们通过，至少在撰写本文时），但正如[Mozilla 开发者网络所说](https://developer.mozilla.org/en-US/docs/Web/HTTP/Access_control_CORS#Access-Control-Allow-Origin)：

> 返回的资源可能有一个 Access-Control-Allow-Origin 标头...

所以，一个标题来控制它们。

# javascript - 评估在 IE8 中不起作用

> ID：15682497
> 
> 赞同：0
> 
> 时间：2013-03-28T13:00:36.790
> 
> 标签：javascript

我找不到这个小代码片段在 IE8 中不起作用的原因，

```
var a = {"ff": "test"};
eval('('+a+')'); 
```

我收到错误

> ']' 预期的”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T13:03:43.733

当连接对象`a`以形成 eval'd 字符串的一部分时，`a.toString()`将调用`[object Object]`. 您*想要*的是`{"ff": "test"};`连接到 eval'd 字符串中，因此您需要使用它`JSON.stringify()`来实现这一点。

尝试这个：

```
eval('('+JSON.stringify(a)+')'); 
```

或者，您也可以在第一行的对象声明周围加上引号：

```
var a = '{"ff": "test"}'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T13:07:24.527

```
var a = {"ff": "test"};
eval('('+a+')'); 
```

这被评估为：

```
([object Object]) 
```

这显然不是有效的 JavaScript。如果要保留数据结构，可以使用`JSON.stringify()`and `JSON.parse()`。

```
var a_to_json = JSON.stringify(a);
var a_from_json = JSON.parse(a_to_json); 
```

# c# - 实现单例...带锁？

> ID：15682498
> 
> 赞同：1
> 
> 时间：2013-03-28T13:00:41.593
> 
> 标签：c#

在多线程应用程序（ASP.NET MVC）上，我需要一个全局设置类，其中包含从 Web.Config 获取的常量和值。

我想让这个类静态，作为单例......并锁定？

```
public static class Settings {

  public static LoggerSettings Logger;
  public static MailerSettings Mailer;

  public class LoggerSettings {
    public String Levels { get { return ConfigurationManager.AppSettings["Logger.Levels"]; } }
    public const String Report = "team@xyz.com";
  } // LoggerSettings

  public class MailerSettings {
    public String Contact { get { return ConfigurationManager.AppSettings["Mailer.Contact"]; } }
  } // MailerSettings

} 
```

我想我应该实施双锁？不？

我不确定执行此操作的最佳方法。请问，我能得到一些帮助吗？

谢谢你，米格尔

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-28T15:11:24.967

> 我想让这个类静态，作为单例

要在 C# 中正确实现单例，请参阅 Jon Skeet 对哪些有效和无效的出色总结：

[http://cshapindepth.com/Articles/General/Singleton.aspx](http://csharpindepth.com/Articles/General/Singleton.aspx)

> 我想我应该实施双锁？不？

不。双重检查锁定是一种低锁定技术，因此在弱内存模型硬件上非常危险。当您偏离“有福的”模式时，您已经放弃了对程序可预测行为的所有希望。

我会使用双重检查锁定的唯一情况是当以下**所有**条件都为真时：

*   是否有*大量的经验证据*表明单检查锁定会产生较差的性能？
*   让我们假设单检查性能是不可接受的。单检查锁通常会因为争用而产生不好的性能，所以第一步是*消除争用*。您能否消除争用并获得可接受的性能？*如果无法消除争用*，或者*性能问题是由获得无争用锁所需的几纳秒引起的，*我只会使用双重检查锁定。在后一种情况下：哇，这是一个快速程序，那些纳秒是*最慢的*，哇，*如果你计算单个纳秒，你有非常严格的性能要求*。
*   让我们假设单检查的性能是不可接受的并且无法修复。**是否有另一种低锁定技术，例如使用 Interlocked.CompareExchange**或`Lazy<T>`具有可接受的性能？至少您知道 CompareExchange`Lazy<T>`是由专家编写的，并在所有硬件上适当地强制执行内存屏障。如果已经实现了更好的工具，请不要使用双重检查锁定。
*   让我们假设这些工具都没有提供可接受的性能。 **双重检查锁定是否提供可接受的性能**？如果没有，*请不要使用它*。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-28T13:03:40.907

如我所见，您只读取数据。所以你不需要锁定这里IMO。使用静态构造函数来初始化您的变量，例如 Report（使其也是静态的）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T13:24:29.353

如果你喜欢它是静态的并且是单例的，试试这种方式：

```
public static class Settings {
  private static readonly object LockObject = new object();
  private static LoggerSetting LoggerInstance;

  public static LoggerSetting LoggerSettings {
    get {
      lock (LockObject) {
         if (LoggerInstance == null)
           LoggerInstance = new LoggerInstance(); 

         return LoggerInstance;
       }
     }
   }

   public class LoggerSetting {
     public String Levels {
       get { return ConfigurationManager.AppSettings["Logger.Levels"]; }
     } 

     public const String Report = "team@xyz.com";
   }
} 
```

并通过以下方式使用它：

```
string x = Settings.LoggerSEttings.Report; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-28T15:54:07.483

看看 Jon Skeet 的文章[在 C# 中实现单例模式](http://csharpindepth.com/Articles/General/Singleton.aspx#cctor)

最简单且足够好的选择：

```
public sealed class Settings
{
    private static readonly Settings instance = new Settings();

    public LoggerSettings Logger { get; private set; }
    public MailerSettings Mailer { get; private set; }

    // Explicit static constructor to tell C# compiler
    // not to mark type as beforefieldinit
    static Settings()
    {
    }

    private Settings()
    {
       Logger = new LoggerSettings();
       Mailer = new MailerSettings();
    }

    public static Settings Instance { get { return instance;} }
}

public class LoggerSettings {

    public LoggerSettings()
    {
        Levels = ConfigurationManager.AppSettings["Logger.Levels"];
    }

    public String Levels { get; private set; }
    public const String Report = "team@xyz.com";

}

// Mailer settings would look similar 
```

由于您只从该实例中读取数据，因此您不需要任何锁定。单例实例是在任何其他线程可以访问它之前创建的，因此也不需要在那里锁定。

用法：

```
 Settings.Instance.Mailer.Contact 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-03-28T13:10:02.990

如果您仍然想继续并拥有一个单例实例

```
 public class MySettings{
    private static Object lockObj = new Object();
    private MySettings() {} // private .ctor

    private static MySettings _instance;

    public static MySettings MySingleSettings{
     get{
      if(_instance == null){
      lock(lockObj){
        if(_instance == null)
          _instance = new MySettings();
        }
      }
       return _instance;
    }
} 
```

# php - 使用 MY_Log 扩展 CI_Log 时日志文件出错

> ID：15682500
> 
> 赞同：4
> 
> 时间：2013-03-28T13:00:43.467
> 
> 标签：php, codeigniter, codeigniter-2

当我尝试加载 MY_Log 时，我看到整个应用程序日志文件中出现以下错误。

**错误 - 26-03-2013 22:52:20—> 严重性：警告 —> include_once(application/core/MY_Log.php) [function.include-once]：无法打开流：没有这样的文件或目录 C:\开发\我的站点\应用程序\配置\config.php 377**

我的自动加载文件有以下内容：

```
$autoload['libraries'] = array('parser', 'session', 'log'); 
```

MY_Log 类在 application/libraries/MY_Log.php 中定义

```
class MY_Log extends CI_Log 
```

位于 application/libraries/MY_Parser.php 中的 MY_Parser 类可以正常加载。

```
class MY_Parser extends CI_Parser 
```

当我调试加载程序以查看为什么 Parser 的行为与 Log 不同时，它似乎在应用程序/核心中查找 MY_Log，但在应用程序/库中查找（并找到）MY_Parser ok。

我正在使用 CI 2.1.1

任何想法为什么会有这种差异？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-07T04:46:56.907

当您**扩展**核心库时，`CI_Log`您**不会**自动加载它。为什么？因为 CI_Log 是由 CI Core 自动加载的。CI_Parser （不熟悉这个）**不是**核心库，所以这就是它从`application/libraries`.

只是不要将它包含在您的自动加载数组（）中

此外，请考虑更新您的 CI 版本（如果您还没有）以利用最新的安全补丁/修复。

# php - PHP Require 会导致错误 500 ......只是有时。这是什么错误？

> ID：15682502
> 
> 赞同：3
> 
> 时间：2013-03-28T13:00:46.330
> 
> 标签：php, path, require

我有一个网站，它连接到一个 mysql 数据库，它使用一些其他密码，这些密码在位于 /home/user/public_html/inc/instance-config.php 的文件中定义。

为了安全起见，我想将我的密码保存在 /public_html 目录之上。基本上我创建了一个名为**/home/user/secrets.php**的文件，主配置文件应该需要这个文件并从中获取密码。但事实并非如此。

**我的文件/home/user/public_html/inc/instance-config.php**中的这段代码没有错误：

```
$secrets = str_replace ( 'public_html', '', getcwd() )  . 'secrets.php';

if ( file_exists( $secrets ) ){
    include $secrets ;
}

**// confirm that the values where imported**
moo( 'The secret value is ' . $secret_value );

$config['db']['type'] = 'mysql';
$config['db']['server'] = 'localhost';
$config['db']['database'] = 'xxxxxxx';
$config['db']['user'] = 'xxxxxxx';

$config['db']['password'] = 'xxxxxxx';
$config['cookies']['mod'] = 'xxxxxxxx';
$config['cookies']['salt'] = 'xxxxxx'; 
```

我的文件**secrets.php**的最后七行与配置和密码相同，还有一个名为“ **secret_value** ”的变量，我基本上使用它来检查文件是否被正确包含。所以，我这样做了，因为我的“ **moo** ”函数输出到一个日志文件，我得到了类似的东西：

```
03/28/2013 07:36:52 am -- The secret value is Everything OK!
03/28/2013 07:36:55 am -- The secret value is Everything OK!
03/28/2013 07:36:55 am -- The secret value is Everything OK!
03/28/2013 06:36:56 am -- The secret value is Everything OK!
03/28/2013 07:36:57 am -- The secret value is Everything OK!
03/28/2013 06:36:57 am -- Rebuilt page 1 from ALL
03/28/2013 07:36:57 am -- The secret value is Everything OK!
03/28/2013 06:36:58 am -- The secret value is Everything OK!
03/28/2013 06:36:58 am -- The secret value is Everything OK!
03/28/2013 06:36:58 am -- The secret value is Everything OK!
03/28/2013 06:36:58 am -- The secret value is Everything OK!
03/28/2013 06:36:58 am -- The secret value is Everything OK!
03/28/2013 06:36:58 am -- The secret value is Everything OK!
03/28/2013 06:36:58 am -- The secret value is Everything OK!
03/28/2013 06:36:58 am -- The secret value is Everything OK!
03/28/2013 06:36:58 am -- The secret value is Everything OK!
03/28/2013 06:36:59 am -- The secret value is Everything OK!
03/28/2013 06:36:59 am -- The secret value is Everything OK!
03/28/2013 06:36:59 am -- The secret value is Everything OK!
03/28/2013 06:36:59 am -- The secret value is Everything OK!
03/28/2013 06:36:59 am -- The secret value is Everything OK!
03/28/2013 06:36:59 am -- The secret value is Everything OK!
03/28/2013 06:36:59 am -- The secret value is Everything OK!
03/28/2013 06:36:59 am -- The secret value is Everything OK!
03/28/2013 06:36:59 am -- The secret value is Everything OK!
03/28/2013 07:36:59 am -- The secret value is Everything OK! 
```

因此，似乎正确地需要该文件。我试图从我的实例配置文件中删除这些行，以便它们只出现在 secret.php 文件中。但首先，我尝试分支代码，检查文件是否存在。如果文件存在，那么它应该从中获取配置变量。这是我的代码：

```
 moo(':: GET READY');
if ( file_exists( $secrets ) ){
    require $secrets ;
    if ( isset ($secret_value) )
        moo( 'The secret value is ' . $secret_value);
    else
        moo('Required but could not find the secret value');
}else{
    $config['db']['type'] = 'mysql';
    $config['db']['server'] = 'localhost';
    $config['db']['database'] = 'xxxxxx';
    $config['db']['user'] = 'xxxxxxxx';
    $config['db']['password'] = 'xxxxxxxxxx';
    $config['cookies']['mod'] = 'xxxxxxxxxxxxx';
    $config['cookies']['salt'] = 'xxxxxxxxx';
    moo( 'The secret value was not obtained');
} 
```

哦，是的，我得到了一个输出行列表，例如：

```
03/28/2013 07:41:07 am -- :: GET READY ::
03/28/2013 07:41:07 am -- The secret value is Everything OK! 
```

而每一个“GET READY”后面都跟着相应的“Everything is OK!”。在日志文件中，我没有看到“未获得秘密值”或“需要但找不到...”行。

**但是**：

在浏览器中，我收到一条**错误 500**消息并且页面停止加载。为什么，哦，为什么？我检查了 Internet，大多数人说这可能是 PHP 找不到您的文件的问题。我试图帮助代码尽可能多地找到文件：

```
 // this adds /home/user to the include path, because secret.php
    // is located at /home/user/secret.php

if ( false == strpos( ini_get('include_path'), exec('echo ~') ) ) {
    ini_set('include_path', ini_get('include_path') . ':' . exec('echo ~') );
}

    // log errors to see if we can find the cause of the problem
ini_set('log_errors', 1);
ini_set('error_log', '/home/user/errors.log');
ini_set('error_reporting', E_ALL);

    // get absolute path of the file
$secrets = str_replace ( 'public_html', '', getcwd() )  . 'secreto.php'; 
```

没有任何效果，总是相同的 500 错误。我能做些什么？我几乎什么都试过了。正如我在所有执行过程中得到的输出所示，该文件的位置似乎正确。然而，服务器给了我一个错误 500 页面。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T13:32:47.067

你看到什么是php错误了吗？错误 500 是 webserver/apache 说 php 有问题。问题本身很可能出在 webserver/apache error_log 文件中。

或者，从命令行运行您的 php 文件（`php -l somefile.php`可以进行语法检查），php 会告诉您问题（语法或运行时），从您托管它的同一目录运行文件`php somefile.php`。

# php - 将关联数组存储到单行以进行 sql 更新

> ID：15682503
> 
> 赞同：0
> 
> 时间：2013-03-28T13:00:49.977
> 
> 标签：php

我想获取一个关联数组并解析它以放入查询的`SET`一部分`UPDATE`：

我对关联数组的调用：

```
$this->ccQuery( 'emails', array('user_id' => $id, 'email_address' => $request->email) );

function ccQuery( $t, $a, $id=null )
{
        foreach($a as $key=>$value)
        {
            $setfields[] = $key . "='" . $value . "'";
        } 
        $setfields = implode(', ', $setfields);

        $testquery2 = 'UPDATE mytable_'.$t.' SET ' .$setfields. ' WHERE user_id="'.$user_id;
...
} 
```

`setfields`是空的。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T13:11:19.443

也许是这样的：

```
...

$testquery2 = "UPDATE mytable_"

foreach($a as $key=>$value)
        {
           $testquery2 = $testquery2 ."$t SET '$value' WHERE user_id= '$id'";
        } 

... 
```

# c++ - 如何正确处理静态库的依赖关系？

> ID：15682505
> 
> 赞同：0
> 
> 时间：2013-03-28T13:00:52.750
> 
> 标签：c++, visual-studio-2010, static-libraries

我有一个项目LibA，它是一个静态库，使用第三方库Lib3。项目 LibA 构建和执行得很好。

我有另一个项目 Exe，它是一个可执行文件并使用 LibA。这可以编译，但链接器找不到来自 Lib3 的函数，这些函数仅在 LibA 中使用。

我尝试过的事情：

*   将 Lib3 的位置添加到项目 Exe 中的库目录路径中（与 LibA 中引用 Lib3 的方式相同）
*   将 Lib3 的位置添加到链接器的附加库目录中
*   将 Lib3 *.lib 文件复制到项目 LibA 的输出文件夹（因此包含 LibA *.lib 文件）

无论我尝试什么，我仍然得到`LNK2019: Unresolved external symbol`。只有当我在 LibA 中删除实际调用 Lib3 的代码时，我才能正确编译和链接项目 Exe。

如何正确处理静态库的依赖关系？

编辑：一些代码澄清：

LibA 包含 LibA.h 和 LibA.cpp：

LibA.h：

```
class LibA {
    void doSomething();
} 
```

LibA.cpp：

```
#include "LibA.h"
#include "Lib3.h"

void LibA::doSomething() {
    //call stuff in Lib3.h
} 
```

exe.cpp：

```
#include "LibA.h"

int _tmain(int argc, _TCHAR* argv[])
{
   LibA a = new LibA();
   a.doSomething();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T13:34:08.147

尝试使用 Visual Studio`dumpbin`来查看 lib3.lib 是否导出了您需要的函数。如果不这样做，则需要在`lib3.h`with中声明您的函数`__declspec(dllexport)`，以使它们对尝试链接到您的库的其他模块可见。

# php - 验证用户和显示页面

> ID：15682513
> 
> 赞同：0
> 
> 时间：2013-03-28T13:01:10.217
> 
> 标签：php

我已经创建了我的页面，并尝试在授予用户访问该页面的权限之前对用户进行身份验证。我的问题是我正在使用这样的方法：

```
if($_SESSION['username']){
echo 'PAGE CONTENT HERE';

}else{
 SEND BACK TO LOGIN PAGE
} 
```

这适用于我的某些页面，但在我的主页上，使用我的数据库中的 php 填充选择框，当我使用上述方法时，我的所有选项都显示在选择之外（如果我不回显页面，则工作正常)

我在这里错过了一个技巧吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T13:07:45.337

尝试使用这个。

```
session_start();

if(empty($_SESSION['username'])){
    header("Location: page-to-redirect.php");
}

//Rest of the code.... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T13:10:58.837

不要使用 echo，尝试使用 php if/else 的替代语法：[http ://www.php.net/manual/en/control-structures.alternative-syntax.php](http://www.php.net/manual/en/control-structures.alternative-syntax.php)

我使用它，它不会妨碍我的任何页面内容或脚本。

```
<?php if(conditional): ?>
<p>plain html and what not here</p>
<?php else: ?>
<a href="#">more html here</a>
<?php endif; ?> 
```

或使用 header("Location: redirect.php"); 的重定向 基于会话检查代码。

# sublimetext2 - ST2 -- split_selection_into_lines -- 块的左侧

> ID：15682519
> 
> 赞同：0
> 
> 时间：2013-03-28T13:01:25.217
> 
> 标签：sublimetext2, sublimetext

是否可以`split_selection_into_lines`在块的**左侧**而不是右侧？

最好选择几行（一口气），然后在每行之前键入一些内容。我一直在使用 command+left-click 作为左侧边距，但很难知道每一行是否真的被选中，因为每一行都是垂直对齐的（例如，flush-left）——这也很耗时手动选择每一行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T13:10:32.127

一种简单的方法是查找替换，并用“\n [此行之前的文本]”替换分隔符

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T03:30:18.380

选择“split_selection_into_lines”（ctrl+shift+l）后，键盘快捷键命令+左箭头将多个光标移动到突出显示块的左侧。

或者，按住 option(alt) 键并按住鼠标左键单击，可以让用户选择通过向上或向下移动鼠标定义的垂直线内的所有内容。

[https://tutsplus.com/lesson/multiple-cursors-and-incremental-search/](https://tutsplus.com/lesson/multiple-cursors-and-incremental-search/)

# javascript - 选择特定 iframe 内的所有 iframe？

> ID：15682522
> 
> 赞同：0
> 
> 时间：2013-03-28T13:01:43.200
> 
> 标签：javascript, jquery

Jquery：如何选择特定 iframe 内的所有 iframe？我有一个特定的 iframe，`id="main_frame"` 到目前为止我尝试了这个，但它不起作用：

```
$("#main_frame").contents().find("iframe").each(function() { 
  data = $(this);
  //somecode
}); 
```

这仅获取#main_frame 的数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T13:05:53.923

给定这样的 HTML：

```
<body>
    <div>Outer Stuff</div>
    <iframe id="main_frame">            
        <iframe id="inner1">
            <div>
                <span>Some content</span>
            </div>
            <iframe>
                <div>Inner X2</div>
                </iframe>
            </iframe>
            <iframe id="inner2">
            <div>
                <span>Some more stuff in iframe #2</span>
            </div>
        </iframe>
    </iframe>
</body> 
```

此脚本将选择除最外层之外的所有 iframe 元素：

```
<script type="text/javascript">

    $(function() {      
        $(document).find('iframe').each(function() {
            console.log($(this).html());
        });
    });     

</script> 
```

# javascript - Node.js 循环中的 setTimeout

> ID：15682524
> 
> 赞同：15
> 
> 时间：2013-03-28T13:01:47.357
> 
> 标签：javascript, node.js, asynchronous, settimeout

我对如何`setTimeout`工作感到有点困惑。我试图`setTimeout`在一个循环中进行，以便循环迭代相隔 1 秒。每次循环迭代都会发出一个 HTTP 请求，而另一端的服务器似乎无法在如此短的时间内处理那么多请求。

```
for (var i = 1; i<=2000 && ok; i++) {
    var options = {
        host:'www.host.com',
        path:'/path/'+i
    };

    setTimeout(makeRequest(options, i), 1000);
}; 
```

为什么这不起作用，我该如何实现？

谢谢

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2015-06-01T14:03:36.250

[setTimeout](https://nodejs.org/api/timers.html#timers_settimeout_callback_delay_arg)是**非阻塞**的，它是异步的。你给它一个回调，当延迟结束时，你的回调被调用。

以下是一些实现：

# 使用递归

您可以在回调中使用[递归调用。](http://en.wikipedia.org/wiki/Recursion_%28computer_science%29)`setTimeout`

```
function waitAndDo(times) {
  if(times < 1) {
    return;
  }

  setTimeout(function() {

    // Do something here
    console.log('Doing a request');

    waitAndDo(times-1);
  }, 1000);
} 
```

以下是如何使用您的功能：

```
waitAndDo(2000); // Do it 2000 times 
```

**关于堆栈溢出错误**：`setTimeout`清除调用堆栈（请参阅[此问题](https://stackoverflow.com/questions/8058612/does-calling-settimeout-clear-the-callstack)），因此您不必担心`setTimeout`递归调用的堆栈溢出。

# 使用生成器（io.js，ES6）

如果您已经在使用[io.js （使用](https://iojs.org)[ES6](https://iojs.org/en/es6.html)的“下一个”Node.js ），您可以通过一个优雅的解决方案来解决您的问题，而无需递归：

```
function* waitAndDo(times) {
  for(var i=0; i<times; i++) {

    // Sleep
    yield function(callback) {
      setTimeout(callback, 1000);
    }    

    // Do something here
    console.log('Doing a request');
  }
} 
```

以下是如何使用您的功能（使用[co](https://github.com/tj/co)）：

```
var co = require('co');

co(function* () {
  yield waitAndDo(10);
}); 
```

顺便说一句：这实际上是在使用循环；）

[生成器函数文档](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/function*)。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-28T13:11:32.240

你需要这样的东西

```
var counter = 5;

function makeRequst(options, i) {
    // do your request here
}

function myFunction() {
    alert(counter);

    // create options object here
    //var options = {
    //    host:'www.host.com',
    //    path:'/path/'+counter
    //};
    //makeRequest(options, counter);

    counter--;
    if (counter > 0) {
        setTimeout(myFunction, 1000);    
    }
} 
```

另见[这个小提琴](http://jsfiddle.net/barts2108/tsCqb/4/)

此时，`alert(count);`您可以调用服务器。请注意，计数器的工作方式相反（倒计时）。我更新了一些评论在哪里做你的事。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-28T13:21:32.453

现在，您正在安排所有请求同时发生，就在脚本运行后一秒钟。您需要执行以下操作：

```
var numRequests = 2000,
    cur = 1;

function scheduleRequest() {
    if (cur > numRequests) return;

    makeRequest({
        host: 'www.host.com',
        path: '/path/' + cur
    }, cur);

    cur++;
    setTimeout(scheduleRequest, 1000)
} 
```

请注意，每个后续请求仅在当前请求完成后安排。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-05-08T06:43:10.140

我可能在聚会上迟到了，但这是另一个（更易读）的解决方案，无需省略`for`循环。

您的代码所做的是创建 2000 个（实际上是 1999 个）对象，这些对象将在 1 秒***后***`setTimeout`调用该`makeRequest`函数。看，他们都不知道其他s 的存在。*`setTimeout`*

 *如果您希望它们彼此相隔 1 秒，则您有责任创建它们。

这可以通过使用您的***计数器***（在这种情况下`i`）和超时***延迟***来实现。

```
for (var i = 1; i<=2000 && ok; i++) {
    var options = {
        host:'www.host.com',
        path:'/path/'+i
    };

    setTimeout(makeRequest(options, i), i * 1000); //Note i * 1000
}; 
```

第一个超时对象将从现在开始设置*1 秒*，第二个将从现在开始设置*2 秒*，依此类推；意思是彼此相隔***1秒。***

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-28T13:05:22.510

您在 setTimeout 调用中调用 makeRequest() - 您应该将函数传递给 setTimeout，而不是调用它，所以类似于

```
setTimeout(makeRequest, 1000); 
```

没有 ()

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-03-13T23:53:57.190

我很惊讶上面没有人提到这一点，但听起来你需要 setInterval 而不是 setTimeout。

```
vat poller = setInterval(makeRequestFunc, 3000) 
```

上面的代码将每 3 秒发出一次请求。由于您将对象保存到变量`poller`中，因此您可以通过清除对象来停止轮询，如下所示：

```
cleanInterval(poller) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-04-30T15:03:53.437

```
 let i = 20;
        let p = Promise.resolve(i)
        while (i > 0) {
        (i => {
            p = p.then(() => {
            return new Promise(function (resolve, reject) {
                setTimeout(function () {
                    console.log(i);
                resolve()
                }, 2000)
            })
            })
        })(i)
        i--
        }
        p = p.then(data => console.log('execution ends')) 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-09-14T16:27:42.787

我在这个主题上已经很晚了（像往常一样......;）但我发现将请求循环到慢速响应 API 并在没有 HTTP 504 的情况下获得响应的唯一方法是使用承诺。

```
async function LoadDataFromAPI(myParametersArray) {
    for(var i = 0; i < myParametersArray.length; i++) { 
        var x = await RunOneRequest(myParametersArray[i]); 
        console.log(x); // ok
    }
} 
```

异步函数调用的函数：

```
function RunOneRequest(parameter) {
    return new Promise(resolve => {
        setTimeout(() => {
            request(parameter, (error, response, body) => {
                // your request
            });
        resolve('ok);
        }, 2000); // 2 secs
    });
} 
```*

# git - 如何半手动控制git中的文件？

> ID：15682525
> 
> 赞同：1
> 
> 时间：2013-03-28T13:01:50.040
> 
> 标签：git, githooks, git-config

**我的问题是这样的：**
我有一个包含 .gitconfig 文件的点文件存储库。我将此存储库存储在 github 上，不想在那里显示我的电子邮件/姓名。

**简单的解决方案：**
使用`--assume-unchanged`或`--skip-worktree`在修改文件时手动添加文件。

**更好的解决方案的想法：**
使用`--assume-unchanged`或`--skip-worktree`结合一些`pre-commit`尝试应用补丁的钩子来查看文件是否有任何修改，除了索引版本中缺少电子邮件。如果有则停止提交。

关于如何实施这样的事情的任何想法？

编辑：棘手的部分当然是让 git status 显示文件在工作目录中没有被修改，即使它有一个用户名/密码并且索引没有但如果它有其他更改则显示它已修改。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T13:04:59.363

我知道这不是您问题的一般性质的解决方案。

但是对于您的特定问题，如果您使用 git 有一个简单的解决方案`> 1.7`：您可以将您的用户名和电子邮件存储在不同的文件中，并将其包含在您的全局文件中`.gitconfig`

请参阅[http://git-scm.com/docs/git-config#_includes](http://git-scm.com/docs/git-config#_includes)

# python - 计算器的 Python 解析器

> ID：15682528
> 
> 赞同：-1
> 
> 时间：2013-03-28T13:01:54.683
> 
> 标签：python, regex, stack, automata

我正在尝试编写一个解析器，它将表达式作为文件的输入。

表达式可以是 A=B=10 或 B=(CA)-4 等。

到目前为止我所尝试的是。我正在阅读一个文件 IP.txt

```
import re

opert = '+-/*()_='
fileName = "input.txt"
f = open(fileName,'r')

variableDict = {}
lines = f.readlines()

for i in lines:

    for x in  re.finditer(r'[A-Z_]\w*', i):
        print x.group() # prints list containing all the alphabets.

    for z in  re.finditer(r'[0-9]\d*', i):
        print z.group() # prints list containing all the numbers.

    for c in i:
        if c in opert:
            print c # prints all the operators.

   # '_' has special meaning. '_' can only be used before numbers only like _1 or _12 etc
   #And i have parsed this also using
       print re.findall(r'[_][0-9]\d+',i) # prints the _digits combination. 
```

现在的问题是我已经意识到我应该如何进行表达式评估。首先，我必须提到的关于上述输入的一些规则是。任何行不得超过 50 个字符。最左边的运算符将始终是 '=' 赋值运算符。'=' 总是以变量[AZ] 开头，运算符为{'+','-','/','*','_'}，数字{0-9}。

我应该如何首先提取第一个变量然后将其推入python列表然后'='运算符，然后要么'（'，'AZ'将其推入堆栈等等

有人可以帮我解决这个问题。我被问题压得喘不过气来。。

如果任何人无法理解描述，请[转到此链接](http://www.blogosfera.co.uk/2013/03/calculator-language-cl-supports-assignment-positive-and-negative-integers-and-simple-arithmetic-closed/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T13:29:16.847

因此，您询问了堆栈问题，当然您需要评估。我会做这样的事情：

```
import re #1
stack = [] #2 FIX: NOT NECESSARY (since fourth line returns a list anyway)
inputstr = "A=B=C+26-(23*_2 )-D" #3

stack =  re.findall(r'(?:[A-Z])|(?:[0-9]+)|(?:[/*+_=\(\)-])', inputstr) #4

while len(stack): #5
    print stack.pop() #6 
```

前三行只是一些初始化的东西。在那之后，我会在第四行用正则表达式做一个堆栈。`(?:[A-Z])`匹配变量，`(?:[0-9]+)`匹配数字（可能有多个数字）并`(?:[/*+_=\(\)-])`匹配所有运算符。大括号已转义，并且`-`在最后，因此您不必转义它。

第五和第六行打印堆栈。

我使用`(?: ...)`是因为我不想匹配任何一组。很难解释 - 只要尝试不运行它`?:`，您就会看到效果。

# ios - Phonegap 2.4.0 价值转换问题

> ID：15682531
> 
> 赞同：0
> 
> 时间：2013-03-28T13:02:03.637
> 
> 标签：ios, objective-c, cordova

当我在 CDVLocation.m 文件中使用 phonegap 2.4 创建新的项目框架时出现错误。我得到的错误是
`if ([cdvViewController supportsOrientation:currentOrientation])`
*从枚举类型“UIDeviceOrientation”（又名“枚举 UIDeviceOrientation”）到不同枚举类型“UIInterfaceOrientation”（又名“枚举 UIInterfaceOrientation”）的隐式转换*

我不是 100% 确定这里发生了什么，因为我不知道 OBJ -C，有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T13:23:24.383

`currentOrientation`是`UIDeviceOrientation`具有更多值的类型`UIInterfaceOrientation`

由于该方法需要 a`UIInterfaceOrientation`而不是 a`UIDeviceOrientation`

**代替：**

*   ~~`supportsOrientation:currentOrientation`~~ 和
*   `supportsOrientation:[[UIApplication sharedApplication] statusBarOrientation]]`

尝试更改 CDVLocation.m 中的方法：

```
if ([self.locationManager respondsToSelector:@selector(headingOrientation)]) {
    UIDeviceOrientation currentOrientation = [[UIDevice currentDevice] orientation];
    if (currentOrientation != UIDeviceOrientationUnknown) {
        CDVViewController* cdvViewController = (CDVViewController*)self.viewController;

        //change this line
        if ([cdvViewController supportsOrientation:[[UIApplication sharedApplication] statusBarOrientation]]) {
            self.locationManager.headingOrientation = (CLDeviceOrientation)currentOrientation;
            // FYI UIDeviceOrientation and CLDeviceOrientation enums are currently the same
        }
    }
} 
```

# javascript - 使用 TypeScript 的自定义剔除验证规则

> ID：15682533
> 
> 赞同：0
> 
> 时间：2013-03-28T13:02:09.100
> 
> 标签：javascript, knockout.js, this, typescript, knockout-validation

这与我提出的另一个问题非常相似，但也可以提出不同的问题，并且可能会被不同的受众发现有用。

我有一个用于淘汰验证的自定义规则：

```
ko.validation.rules["sameAs"] = {
    validator: function (val, otherObservable) {
        return val === otherObservable();
    },
    message: "Value should be same as {0}, but differs"
}; 
```

现在在原始 javascript 中，这工作得很好，因为用法如下所示：

```
function SomeObject() {
   this.Email = ko.observable().extend({ required: true, email: true });
   this.ConfirmationEmail = ko.observable().extend({ required: true, email: true, sameAs: this.Email });
} 
```

但是，如果我尝试写这个，现在在 Typescript 土地上：

```
class SomeObject {
   public Email = ko.observable().extend({ required: true, email: true });
   public ConfirmationEmail = ko.observable().extend({ required: true, email: true, sameAs: this.Email });
} 
```

我现在得到错误：

> 不能在类主体的初始化程序或超级构造函数调用中引用关键字“this”

这是有道理的，但是我不确定我该如何做我最初会做的事情，除非我尝试将它破解到构造函数或其他东西中，这使得我的类现在看起来有点可怕。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T13:44:18.380

我找不到写作的任何缺点：

```
class SomeObject {
    public Email = ko.observable();
    public ConfirmationEmail = ko.observable();

    constructor() {
        this.Email.extend({ required: true, email: true });
        this.ConfirmationEmail.extend({ required: true, email: true, sameAs: this.Email })
    }
} 
```

除了 2 行额外的代码。

在我看来，代码的可读性要好一些，您不必阅读整条长线来查看它是什么类型的变量。进行这种分离可以更好地显示代码中发生的事情。也许它是一种美学的东西，但我发现将变量声明与“扩展”表达式混合有时难以阅读，尤其是当“扩展”非常错误时......扩展:)。

# ios - 在 iOS 中在后台上传超过 10 分钟的照片

> ID：15682534
> 
> 赞同：0
> 
> 时间：2013-03-28T13:02:09.727
> 
> 标签：ios, onedrive, background-music

我有一个 iPhone 应用程序需要在应用程序处于后台时上传照片。目前我在**applicationDidEnterBackground中使用****beginBackgroundTask**方法。使用这种方法，我的应用程序在后台继续上传照片 10 分钟，然后被挂起。但我的要求是即使在 backgroundTimeRemaining 的值变为零之后也继续在后台**上传**。

 ****Microsoft **SkyDrive**应用程序只是做同样的事情，事实证明他们在**info.plist中使用“*****音乐***”作为“***背景模式***” 。但我没有在应用程序包中找到任何音乐文件。知道他们是如何完成这项任务的吗？

 **当应用程序进入后台时，我已经尝试过播放无声音乐。但是有了这个，当我使用音量控制键时，iOS 会显示媒体音量而不是铃声音量。

有什么建议可以让我的应用在后台上传照片超过 10 分钟吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-01-20T01:04:51.563

创建一个[`NSURLSessionUploadTask`](https://developer.apple.com/reference/foundation/nsurlsessionuploadtask?language=objc)在后台上传您的内容。******

# ansi-escape - ANSI 颜色特定 RGB 序列 Bash

> ID：15682537
> 
> 赞同：45
> 
> 时间：2013-03-28T13:02:14.770
> 
> 标签：ansi-escape

我知道在 bash 终端中更改颜色的可靠方法是使用 ANSI 转义序列。例如：

```
echo -e "\033[0;31mbrown text\033[0;00m" 
```

应该输出

```
brown text (in brown) 
```

有没有办法使用带有 ANSI 的特定 RGB 集输出颜色？说我想要鲜红色：

```
echo -e "**\033[255:0:0m**red text\033[0;00m" 
```

这种事情存在吗？

我只想使用标准 bash。

* * *

## 回答 #1

> 赞同：89
> 
> 时间：2014-10-31T01:06:45.557

这里的两个答案都没有提到[Truecolor](https://en.wikipedia.org/wiki/Color_depth#True_color_.2824-bit.29) [ANSI](http://en.wikipedia.org/wiki/ANSI_escape_code#graphics)对 8bpc 颜色的支持。这将获得 OP 最初要求的 RGB 颜色。

在以下三个控制段中`;5`，使用`;2`并指定*R*、*G*和*B*值 (0-255)代替。

```
\x1b[38;2;40;177;249m 
```

要测试[您的终端是否支持 Truecolor](https://gist.github.com/XVilka/8346728#now-supporting-truecolor)：

```
printf "\x1b[38;2;40;177;249mTRUECOLOR\x1b[0m\n" 
```

在我的机器上，XTerm 愉快地输出了正确的颜色；虽然，以现代 RGB 颜色之前的终端为模型的终端通常不支持真彩色 - 在使用转义码的这个特定变体之前，请确保您知道您的目标。

* * *

我还想指出`38`和`;5`/ `;2`- Blue Ice[提到](https://stackoverflow.com/a/15712766/510036)的`38`路线然后`5`改变颜色。这有点不正确。

`38`是 xterm-256 扩展前景色代码；`30`-只是所有 vt100/xterm 兼容的彩色终端都支持的 16 色前景代码（在某些系统上`37`亮度由转义代码控制，并且可以说是支持的非标准“明亮”代码）。`1``90``97`

`;2`和指示颜色的`;5`格式，最终告诉终端要提取多少序列：`;5`指定仅需要 1 个控制段的 8 位格式（如 Blue Ice 所述），并`;2`指定需要 3 个完整的 24 位 RGB 格式控制段。

这些扩展模式在*技术上*是“未记录的”并且是完全实现定义的。据我所知并可以研究，它们*不受*ANSI 委员会的管辖。

* * *

对于这种倾向，`5;`（256 色）格式以 16 种原始颜色（深色/浅色，因此 30-37 和 90-97）作为颜色 0-15 开始。

前面的 216 种颜色 (16-231) 由偏移 16 的 3bpc RGB 值形成，打包成一个值。

最后的 24 种颜色 (232-256) 是灰度的，从比黑色稍浅的阴影开始，一直到比白色稍暗的阴影。一些模拟器将这些步骤解释为所有三个通道上 ( ) 的线性增量`256 / 24`，尽管我遇到了一些似乎明确定义这些值的模拟器。

这是一个执行这种转换的 Javascript 函数，它考虑了所有的灰色。

```
function rgbToAnsi256(r, g, b) {
    // we use the extended greyscale palette here, with the exception of
    // black and white. normal palette only has 4 greyscale shades.
    if (r === g && g === b) {
        if (r < 8) {
            return 16;
        }

        if (r > 248) {
            return 231;
        }

        return Math.round(((r - 8) / 247) * 24) + 232;
    }

    var ansi = 16
        + (36 * Math.round(r / 255 * 5))
        + (6 * Math.round(g / 255 * 5))
        + Math.round(b / 255 * 5);

    return ansi;
} 
```

因此，在某种程度上，您可以通过将初始 RGB 值从 8 位减少到 3 位来[计算](https://github.com/Qix-/color-convert/blob/427cbb70540bb9e5b3e94aa3bb9f97957ee5fbc0/conversions.js#L555-L580)256 种 ANSI 颜色，以便在您想在不支持 Truecolor 的终端上以编程方式执行此操作时形成 256 编码值。

* * *

## 回答 #2

> 赞同：52
> 
> 时间：2013-03-29T23:02:15.003

这确实存在，但不是 OP 正在寻找的 16777216 (256^3) 种颜色，而是在更大的 256 种颜色集中有 216 种 (6^3) 种均匀分布的颜色。例子：

```
echo -e "\033[38;5;208mpeach\033[0;00m" 
```

这将输出一种令人愉悦的桃色文本。

* * *

拆开这个命令：**\033[38;5;208m**

**\033**是转义码。[ **38;** 将命令引导到**前台**。如果您想更改背景颜色，请使用**[48;** 反而。5 **;** 只是改变颜色的序列的一部分。最重要的部分**208m**选择实际颜色。

* * *

在此转义的 256 色序列中可以找到 3 组颜色。第一组是基本的“糖果”颜色组，或值 0-15。然后是一个分布颜色的立方体，从 16 到 231。最后有一个从 232 到 255 的详细灰度集。

您可以在此处找到包含所有这些值的表格：http: //bitmote.com/index.php?post/2012/11/19/ [Using-ANSI-Color-Codes-to-Colorize-Your-Bash-Prompt- on-Linux#256%20(8-bit)%20Colors](http://web.archive.org/web/20131009193526/http://bitmote.com/index.php?post/2012/11/19/Using-ANSI-Color-Codes-to-Colorize-Your-Bash-Prompt-on-Linux)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2020-07-08T06:27:11.280

这将起作用

```
echo -e "**\033[38;2;255;0;0m**red text\033[0;00m" 
```

格式：`"\033[38;2;R;G;Bm"`

*   R 是 RGB 的 RED 分量
*   G 是 RGB 的绿色分量
*   B 是 RGB 的蓝色分量

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-04-16T23:36:14.260

当前，某些终端仿真器支持真彩色转义序列 (\e[38;2;R;G;Bm)，包括 gnome-terminal (vte >= 0.36)、konsole 和 st [suckless]。

某些其他功能*不*支持该功能，例如 pterm [putty]、terminology [enlightenment]、urxvt。

xterm 介于两者之间：它识别转义序列，但将每种颜色四舍五入到 256 色调色板中最接近的一种。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-28T13:08:35.273

不，没有。

对于 nitpick，这些在技术上不是“ANSI 转义序列”，而是[VT100 控制代码](http://www.termsys.demon.co.uk/vtansi.htm)（早在出现图形终端和“RGB”等术语之前就已定义）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2022-01-29T12:42:19.117

# [在bash](/questions/tagged/bash "show questions tagged 'bash'")中使用 RGB（和 HSV）

## *终端*中的 ANSI 序列。

在 bash 中有两种打印颜色的方法。

在使用[xterm 的源代码树上](https://github.com/ThomasDickey/old-xterm/tree/master/vttests)找到的好工具后，以下是`vttests/256colors2.pl`我的*gnome-terminal*上的显示方式：

[![vttests/256colors2.pl](../Images/1660d9250f4bf9a811101984f389e1bb.png)](https://i.stack.imgur.com/UJC0p.png)

这使用 ANSI 语法`\e[48;5;COLORm`：

```
printf '\e[48;5;%sm' $color; 
```

而不是`\e[48;2;RED;GREEN;BLUEm`：

```
printf '\e[48;2;%s;%s;%sm' $red $green $blue; 
```

我已经完成了一些[bash](/questions/tagged/bash "显示标记为“bash”的问题")函数来使用 RGB 和 HSV：

### RGB 转 HSV

```
hsv() {
    local -n _result=$4
    local -i _hsv_min _hsv_t
    local _hsv_s
    local -i _hsv_max=" $1 > $2 ?
                (_hsv_min=($2 > $3 ? $3:$2 ), ( $1 > $3 ? $1 : $3 )) :
                (_hsv_min=($1 > $3 ? $3:$1 ), $2) > $3 ? $2 : $3 "
    case $_hsv_max in 
        $_hsv_min) _hsv_t=0 ;;
        $1) _hsv_t=" ( 60 * ( $2 - $3 ) / ( _hsv_max-_hsv_min )+ 360 )%360";;
        $2) _hsv_t=" 60 * ( $3 - $1 ) / ( _hsv_max-_hsv_min )+ 120 " ;;
        $3) _hsv_t=" 60 * ( $1 - $2 ) / ( _hsv_max-_hsv_min )+ 240 " ;;
    esac
    _hsv_s=0000000$(( _hsv_max==0?0 : 100000000-100000000*_hsv_min / _hsv_max ))
    printf -v _hsv_s %.7f ${_hsv_s::-8}.${_hsv_s: -8}
    _result=($_hsv_t $_hsv_s $_hsv_max)
} 
```

然后

```
RED=255 GREEN=240 BLUE=128
hsv $RED $GREEN $BLUE hsvAr
echo ${hsvAr[@]}
52 0.4980392 255
printf 'Hue: %d, Saturation: %f, Value: %d\n' "${hsvAr[@]}"
Hue: 52, Saturation: 0.498039, Value: 255 
```

### HSV 转 RGB

```
rgb() {
    local -n _result=$4
    local -i _rgb_i=" (($1%360)/60)%6 "
    local -i _rgb_f=" 100000000*($1%360)/60-_rgb_i*100000000 "
    local _rgb_s
    printf -v _rgb_s %.8f "$2"
    _rgb_s=$((10#${_rgb_s/.}))
    local -i _rgb_l=" $3*(100000000-_rgb_s)/100000000 "
    case $_rgb_i in
        0 )
            local -i _rgb_n="$3*(100000000-(100000000-_rgb_f)*_rgb_s/100000000)/
                                100000000 "
            _result=("$3" "$_rgb_n" "$_rgb_l") ;;
        1 )
            local -i _rgb_m=" $3*(100000000-_rgb_f*_rgb_s/100000000)/100000000 "
            _result=("$_rgb_m" "$3" "$_rgb_l") ;;
        2 )
            local -i _rgb_n="$3*(100000000-(100000000-_rgb_f)*_rgb_s/100000000)/
                                100000000 "
            _result=("$_rgb_l" "$3" "$_rgb_n") ;;
        3 )
            local -i _rgb_m=" $3*(100000000-_rgb_f*_rgb_s/100000000)/100000000 "
            _result=("$_rgb_l" "$_rgb_m" "$3") ;;
        4 )
            local -i _rgb_n="$3*(100000000-(100000000-_rgb_f)*_rgb_s/100000000)/
                                100000000 "
            _result=("$_rgb_n" "$_rgb_l" "$3") ;;
        * )
            local -i _rgb_m=" $3*(100000000-_rgb_f*_rgb_s/100000000)/100000000 "
            _result=("$3" "$_rgb_l" "$_rgb_m") ;;
    esac
} 
```

然后

```
rgb 160 .6 240 out
echo ${out[@]}
96 240 192
printf '\e[48;5;%d;%d;%dm    \e[0m\n' "${out[@]}" 
```

会产生一堆彩色空间。

### 进一步：[hsvrgb-browser.sh](https://f-hauri.ch/vrac/hsvrgb-browser.sh.txt)

**前言：**将前两个函数存储到一个名为 的文件中，与下载[的 hsvrgb-browser.sh](https://f-hauri.ch/vrac/hsvrgb-browser.sh.txt)`hsvrgb.sh`存储在**同一**目录中。

[![在此处输入图像描述](../Images/235d94621c8875b46006adad4733ecf5.png)](https://i.stack.imgur.com/XeYoV.png)

```
HSV-RGB Color browser - Usage: 

  [RrGgBbVb] Incrase/decrase value by step ('1'), from 0 to 255..
  [HhTt]     Incrase/decrase Hue (tint), loop over 0 - 359.
  [Ss]       Increase/decrase Saturation by .006 x step (1).
  [Cc]       Toggle Color bar rendering (upper C fix HSV)
  [+-]       Incrase/decrase step.
  [u]        show this.
  [q]        quit. 
```

# sql-server - 加入和分组结果

> ID：15682539
> 
> 赞同：1
> 
> 时间：2013-03-28T13:02:21.980
> 
> 标签：sql-server, join, group-by, limit

概括; 通过某些列连接某些表具有相似的结果。我们如何对它们进行分组并选择 max(column)。

我的查询是；

```
SELECT DISTINCT TOP (1000) LG_070_ITEMS.CODE AS PRODCODE,
                LG_070_01_SERILOTN.CODE AS CODE,
                LG_070_01_SLTRANS.OUTCOST,
                LG_070_01_SLTRANS.LOGICALREF AS LREF,
                LG_070_01_SLTRANS.INSLTRANSREF,
                LG_070_01_SLTRANS.INVENNO,
                LG_070_01_SLTRANS.INTRANSREF,
                LG_070_01_SLTRANS.STTRANSREF
FROM LG_070_01_SERILOTN
INNER JOIN LG_070_01_SLTRANS ON LG_070_01_SLTRANS.SLREF = LG_070_01_SERILOTN.LOGICALREF
INNER JOIN LG_070_ITEMS ON LG_070_ITEMS.LOGICALREF = LG_070_01_SERILOTN.ITEMREF
WHERE [TIGERDB].[dbo].[LG_070_01_SERILOTN].CODE = '868328002749220' 
```

并且来自数据库的答案是；

Prodcode code---------------COST--LREF ------一三四

K-3773 868328002749220 50,85 46255------- 0 10 0 33584

K-3773 868328002749220 50,85 46504------- 46255 10 33584 33639

K-3773 868328002749220 50,85 46524------- 46504 11 33639 33640

K-3773 868328002749220 50,85 51273------- 46524 11 33640 38581

K-3773 868328002749220 50,85 51285------- 51273 9 38581 38587

K-3773 868328002749220 50,85 52275------- 51273 11 38581 39823

K-3773 868328002749220 50,85 52276------- 52275 9 39823 39824

现在我的问题是，我如何选择最后一行。它可以大于 LREF Column 或 column-one。

我的查询是一样的。我在状态和结果与此相同的情况下使用数字。

我尝试使用 max(columname) 和 group by othercolumns 等。我使用了带有 microsoft sql server 管理工具的查询设计器。

在这三个表中，未选择的列对我来说并不重要。使用 mysql 我可以使用 select ...max(lref) from ... joins ... group by code 执行此操作，但我必须使用 mssql 执行此操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T20:21:08.137

查询（可能会很昂贵）：

```
SELECT DISTINCT TOP (1000) t3.CODE AS PRODCODE,
                t.CODE AS CODE,
                t2.OUTCOST,
                t2.LOGICALREF AS LREF,
                t2.INSLTRANSREF,
                t2.INVENNO,
                t2.INTRANSREF,
                t2.STTRANSREF
FROM LG_070_01_SERILOTN t
INNER JOIN LG_070_01_SLTRANS t2 ON t2.SLREF = t.LOGICALREF
INNER JOIN LG_070_ITEMS t3 ON t3.LOGICALREF = t.ITEMREF
WHERE t.CODE = '868328002749220'
AND t2.LOGICALREF = (SELECT MAX(tt2.LOGICALREF)
                         FROM LG_070_01_SERILOTN tt
                         INNER JOIN LG_070_01_SLTRANS tt2 
                          ON tt2.SLREF = tt.LOGICALREF
                         INNER JOIN LG_070_ITEMS tt3 
                          ON tt3.LOGICALREF = tt.ITEMREF
                          WHERE tt.CODE = t.CODE) 
```

示例查询**[SQLFIDDLEExample](http://sqlfiddle.com/#!3/12a7c/9)**：

```
SELECT DISTINCT TOP (1000) t.*
FROM Table1 t
WHERE t.LREF = (SELECT MAX(tt.LREF)
                FROM Table1 tt
                WHERE tt.CODE = t.CODE) 
```

结果：

```
| PRODCODE |            CODE |  COST |  LREF |   ONE | TWHO | THREE |  FOUR |
-----------------------------------------------------------------------------
|   K-3773 | 868328002749220 | 50,85 | 52276 | 52275 |    9 | 39823 | 39824 | 
```

# xslt-1.0 - 将以小时和分钟表示的时间转换为十进制，并使用 xslt 1.0 以小时为单位计算总和

> ID：15682541
> 
> 赞同：1
> 
> 时间：2013-03-28T13:02:24.083
> 
> 标签：xslt-1.0

我想使用 XSLT 1.0 来实现这一点。小时以小时和分钟表示（例如：10:30 基本上是 10 小时 30 分钟）。我需要将其转换为仅小时（10.50），然后计算所有小时节点的总和。

这是一个源 XML 文档：

```
<Record>
   <hours>10:30</hours> 
   <hours>20:30</hours>
   <hours>10:60</hours> 
 </Record> 
```

输出：

```
 <Record>
   <TotalHours>42.0</TotalHours>
 </Record> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T03:00:17.490

**请注意，Joepie 的答案中的解决方案会在任何兼容的 XSLT 1.0 处理器中导致编译时语法错误（如果使用 XSLT 2.0 处理器，它只能在没有编译错误的情况下执行）：**

```
SAXON 6.5.4 from Michael Kay
Java version 1.6.0_31
Error at xsl:value-of on line 11 of file:/(Untitled):
  Error in expression                      sum(hours/number(substring-before(., ':'))) +                     sum(hours/number(substring-after(., ':'))) div 60                 : Unexpected token [<function>] in path expression
Transformation failed: Failed to compile stylesheet. 1 error detected.
Press any key to continue . . . 
```

**这是一个真正有效的、真正的 XSLT 1.0 解决方案**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
 xmlns:ext="http://exslt.org/common" exclude-result-prefixes="ext">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="/*">
     <xsl:copy>
       <xsl:variable name="vrtfTimes">
         <xsl:for-each select="*">
           <t>
               <xsl:value-of select=
               "substring-before(., ':') + substring-after(.,':') div 60"/>
           </t>
         </xsl:for-each>
       </xsl:variable>
       <TotalHours>
         <xsl:value-of select="floor(sum(ext:node-set($vrtfTimes)/*))"/>
       </TotalHours>
     </xsl:copy>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时：**

```
<Record>
    <hours>10:30</hours>
    <hours>20:30</hours>
    <hours>10:60</hours>
</Record> 
```

**产生了想要的正确结果：**

```
<Record>
   <TotalHours>42</TotalHours>
</Record> 
```

**注意**：

如果您不仅想从总和中获得小时数，还想获得剩余的分钟数 - 作为分钟数：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
 xmlns:ext="http://exslt.org/common" exclude-result-prefixes="ext">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="/*">
   <xsl:copy>
     <xsl:variable name="vrtfTimes">
       <xsl:for-each select="*">
         <t>
           <xsl:value-of select=
             "substring-before(., ':') + substring-after(.,':') div 60"/>
         </t>
       </xsl:for-each>
     </xsl:variable>

     <xsl:variable name="vSum" select="sum(ext:node-set($vrtfTimes)/*)"/>
     <TotalHours>
             <xsl:value-of select="floor($vSum)"/>
             <xsl:text>:</xsl:text>
             <xsl:value-of select="round(60* ($vSum - floor($vSum)))"/>
     </TotalHours>
   </xsl:copy>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于以下（稍微复杂一点的）XML 文档时：**

```
<Record>
    <hours>10:30</hours>
    <hours>20:30</hours>
    <hours>10:60</hours>
    <hours>1:15</hours>
    <hours>1:03</hours>
</Record> 
```

**产生正确的结果：**

```
<Record>
   <TotalHours>44:18</TotalHours>
</Record> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T14:21:54.657

在 XSLT 1.0 中：

```
<?xml version="1.0" encoding="UTF-8" ?>
<xsl:transform xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
    <xsl:output indent="yes"/>

    <xsl:template match="Record">
        <Record>
            <TotalHours>
                <xsl:value-of select="
                    sum(hours/number(substring-before(., ':'))) + 
                    sum(hours/number(substring-after(., ':'))) div 60
                "/>
            </TotalHours>
        </Record>
    </xsl:template>

</xsl:transform> 
```

**[工作示例](http://xsltransform.net/nbUY4kh/4)**

如果您还想要分钟而不是一小时的一小部分：

```
<?xml version="1.0" encoding="UTF-8" ?>
<xsl:transform xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
    <xsl:output indent="yes"/>

    <xsl:template match="Record">
        <Record>
            <TotalHours>
                <xsl:value-of select="
                    concat(
                        sum(hours/number(substring-before(., ':'))) + floor(sum(hours/number(substring-after(., ':'))) div 60),   
                    '.',
                        format-number(floor(sum(hours/number(substring-after(., ':'))) mod 60), '00')
                    )
                "/>
            </TotalHours>
        </Record>
    </xsl:template>

</xsl:transform> 
```

**[工作示例](http://xsltransform.net/nbUY4kh/3)

# c# - 使用 Graphics.FromHwnd 在屏幕上绘图和清除

> ID：15682543
> 
> 赞同：4
> 
> 时间：2013-03-28T13:02:31.460
> 
> 标签：c#, winforms, graphics, screen, handle

我正在尝试创建一个程序来获取光标下窗口的句柄，显示一些关于它的数据并在整个窗口的顶部绘制一个填充的矩形（具有非常低的 alpha）。我正在使用 C# 和 winforms。

我已经成功地这样做了，但问题是我的绘图方法在 BackgroundWorker 的循环中，它不断在窗口上制作越来越多的矩形（-> 具有更高 alpha 的矩形），或者当将鼠标移动到另一个窗口时，旧的仍然存在.

我还没有设法找到一种方法来清除绘制的矩形，因为它只是在屏幕上“存在”并且没有绑定到图形对象或任何东西。

我尝试过使用某些本机方法，例如

```
[DllImport("User32.dll")]
public static extern Int64 SendMessage(IntPtr hWnd, uint msg, IntPtr wParam, IntPtr lParam);

[DllImport("user32.dll")]
public static extern bool InvalidateRect(IntPtr hWnd, IntPtr lpRect, bool bErase);

[DllImport("user32.dll")]
public static extern bool UpdateWindow(IntPtr hWnd);

[DllImport("user32.dll")]
public static extern bool RedrawWindow(IntPtr hWnd, IntPtr lprcUpdate, IntPtr hrgnUpdate, RedrawWindowFlags flags); 
```

但以上都没有正常工作。其中一些确实有效，但随着消息进入队列，重绘不会立即发生，或者非常缓慢且出现故障（闪烁等）。

所以，问题是，我将如何“删除”我使用 Graphics.FromHwnd(handleOfWindowUnderCursor) 绘制的矩形？实际上，我认为在其他窗口上绘制它并不重要，因为我之前在尝试摆脱我自己表单上的绘图时也遇到了同样的问题（也从来没有解决过这个问题！）。

或者，关于如何在不使用我现在的方法的情况下完成绘制和删除光标下窗口上的矩形的任何建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T14:54:39.373

我注意到绘图使用

```
Graphics g = Graphics.FromHwnd(form.Handle); 
```

在其控件下绘制表单背景。是你想要完成的吗？

```
// draw the rectangle
Brush b = new SolidBrush(Color.FromArgb(20, 0, 0, 255));
g.FillRectangle(b, new Rectangle(5, 5, 200, 200));

// clear the rectangle
g.Clear(this.BackColor); 
```

如果我直接在屏幕上绘制，则：

```
Graphics g = Graphics.FromHwnd(IntPtr.Zero); 
```

Windows 刷新屏幕后，矩形立即消失。

还有第三种选择，这不是很简单。

不要绘制一个矩形，而是创建一个不透明度较低的表单，TopMost 属性设置为 true 并且没有边框。然后使其对事件透明：

```
protected override void WndProc(ref Message m)
        {
            const int WM_NCHITTEST = 0x0084;
            const int HTTRANSPARENT = (-1);

            if (m.Msg == WM_NCHITTEST)
            {
                m.Result = (IntPtr)HTTRANSPARENT;
            }
            else
            {
                base.WndProc(ref m);
            }
        } 
```

之后您唯一需要注意的是此表单的可见性、位置和大小属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-04T18:54:05.460

```
 bool change = false;
private void timer1_Tick(object sender, EventArgs e)
    {
        try
        {
            if (change)
            {
                 InvalidateRect(IntPtr.Zero, IntPtr.Zero, true);
                change = false;
            }
            else
            {
                PaintRectangleToScreen();
                change = true;
            }

        }
        catch (System.Exception caught)
        {

            MessageBox.Show(caught.Message);
        }
    } 
```

# c++ - 通过异常处理错误

> ID：15682547
> 
> 赞同：0
> 
> 时间：2013-03-28T13:02:37.913
> 
> 标签：c++

我正在清理我的代码并通过异常切换到错误处理（因为这会在某些地方显着缩短代码）。

这意味着我需要设计自己的异常类层次结构。

现在它看起来像这样：

```
 namespace error
  {
  /** Generic error */
  class generic : public std::except
    {
    public:
      generic(const std::string& s) : std::except(s) {}
    };

  /** Namespace for network related errors */
  namespace network
    {
    /** Generic network error */
    class generic : public ::error::generic
      {
      public:
        generic(const std::string& s) : ::error::generic(s) {}
      };

    /** Network timeout */
    class timeout : public ::error::network::generic
      {
      public:
        timeout(const std::string& s) : ::error::network::generic(s) {}
      };
    }
  } 
```

问题是这看起来不是特别可读。在处理异常类的层次结构时是否有一些首选风格？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T13:22:28.183

当一个类名没有描述它将要扮演的角色时，这是一个明确的迹象，表明该类不应该存在。您有两个名为`generic`. 他们有什么意义？

实际上，您只介绍了一种异常类型，`timeout`. 我会简单地重写你给出的内容：

```
namespace error
{
  namespace network
  {
     class timeout : public std::exception 
     {
       public:
         timeout(const std::string& s);
         const char* what();
     }
  }
} 
```

# html - 移除水平滚动

> ID：15682548
> 
> 赞同：0
> 
> 时间：2013-03-28T13:02:38.773
> 
> 标签：html, css, twitter-bootstrap

我正在使用引导程序。出于某种原因，右侧有空间，我可以水平滚动，我不想允许。我试图删除一些样式以找出为什么使用 firebug 并看到它来自`<html>`标签，当我将鼠标悬停在`<body>`标签上时，我可以看到右侧有额外的空间`body`不是覆盖而是`html is`覆盖。

如何删除该空间以删除水平滚动？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T13:14:49.867

```
#footer {
  background: none repeat scroll 0 0 #010627;
  border-top: 1px solid #111111;
  box-shadow: 0 1px 0 rgba(255, 255, 255, 0.2) inset;
  clear: both;
  color: #BBBBBB;
  margin: 2.5em -50px 0; /* <-- margin-right:-50px? */
  padding: 20px 50px;
} 
```

在使用一些 hoverflow:hidden 进行“修补”之前，尝试弄清楚是什么从视口中取出内容。

**边距：2.5em -50px 0；/* <-- margin-right:-50px? */**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T13:11:02.950

没有代码很难识别您的问题，但这可能值得一试。在 css 的正文部分中，添加以下行：

```
overflow: hidden; 
```

请参阅[此处](http://www.w3schools.com/cssref/pr_pos_overflow.asp)了解更多溢出选项，这些选项可能有助于您设计与滚动条相关的页面。没有保证，但值得一试！

# ember.js - 重新输入路线不会加载内容

> ID：15682550
> 
> 赞同：2
> 
> 时间：2013-03-28T13:02:39.133
> 
> 标签：ember.js

我有这样的路线设置：

```
App.UserRoute = Ember.Route.extend({
    renderTemplate: function() {
        this.render('settings/user', {into: 'application', controller: 'User'});
        this.render('settings/user_left', {outlet: 'left_menu'});
    },
    setupController: function(controller, user){
        this.controllerFor('users').set('content', App.User.find());
    }
} 
```

控制器是：

```
App.UsersController = Ember.ArrayController.extend();
App.UserController = Ember.ObjectController.extend({
    needs: 'users',
    contentBinding: 'controllers.users.firstObject',
}); 
```

如果我导航到`/user`它就可以了。如果我然后导航到其他地方并按 BACK（或只是打开路线），则模板的内容永远不会填写，即使 App.User.find() 正确返回数据并且 controllerFor 也找到了一个控制器。我想我在控制器上做错了，但找不到什么……如果页面被刷新，它当然可以正常工作。

谢谢

# java - 从树结构文本文件中提取信息

> ID：15682553
> 
> 赞同：0
> 
> 时间：2013-03-28T13:02:57.520
> 
> 标签：java, algorithm

我有一个大文本文件，其结构类似于一棵大树，如下所示：

```
{ SomeType
    - parameter1 = value;
    - parameter2 = { SomeType2
         -paramter 1 = { SomeType3
                ...
         }
     - parameter3 = { SomeType4
         ...
         - name = "name";
         ...
         }
    - name = "name";
    - more paramters;
}{ SomeType
    - parameter1 = value;
    - parameter2 = { SomeType2
         -paramter 1 = { SomeType3
                ...
         }
     - parameter3 = { SomeType4
         ...
         - name = "name";
         ...
         }
    - name = "name";
    - more paramters;
} 
```

该文件有超过 10k 行，现在我需要找到与某种类型关联的所有名称。

我遇到的问题是，对于某种类型，名称行通常是类型之后的第一行，但在其他地方，它位于许多其他具有自己名称的子类型之后，依此类推。所以我不能只逐行搜索类型，然后获取包含“名称”的下一行。同样的类型也可以在更深的层次上找到。

我似乎找不到有效的算法，我可以用 java 实现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T13:13:41.397

如果在您的情况下可行，我建议您将数据表示更改为 XML 或 JSON 等已知表示模型之一，并为具体的数据表示格式使用解析器机制。幸运的是，有很多稳定有效的 XML 和 JSON 解析器。

# svn - 获取 SVN HEAD 版本并制作文件夹

> ID：15682561
> 
> 赞同：1
> 
> 时间：2013-03-28T13:03:25.140
> 
> 标签：svn, batch-file, command, mkdir

我想获取 SVN Revison 并使用当前日期和修订号创建一个文件夹。我不知道如何制作这个文件夹。

我的想法是这样的：

```
cd c:\Program Files\SlikSvn\bin
set var = svn info svn://SVNTRUNC|find "Revision"
mkdir C:\%DATE% - %var%
pause 
```

但是设置变量不起作用。

谢谢，马库斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T13:14:24.490

要从过程输出设置变量：

方法一

```
for /f "delims=" %%i in ('svn info svn://SVNTRUNC ^|find "Revision" ') do set var=%%i 
```

方法二

```
svn info svn://SVNTRUNC|find "Revision" >tempfile
set /p var=<tempfile 
```

其中任何一个都应设置`var`为包含`Revision`in`svn`输出的行的全部内容。

如果您向我们展示该行的一般格式是什么，也许我们可以对其进行改进。

**但是**批处理***确实***可以识别并在一个简单的`set`语句中包含空格，因此如果您的第一次尝试成功，环境变量`"var "`就会被设置。

# sql-server - 按连接表上的性能问题排序

> ID：15682567
> 
> 赞同：4
> 
> 时间：2013-03-28T13:03:40.627
> 
> 标签：sql-server, tsql, join

我有两个表：“警报”和“设备”以及一个视图“vwAlarms”警报表有 250K 行，而设备表只有 50 行。

vwAlarms 只是两个表的连接。

我的问题是当我添加 Top(x) 并按 id desc 排序以从 vwAlarm 中选择 * 时，执行查询需要 10 秒。然而，同样的查询在表 Alarm 上运行得很快。

```
select * from Alarm --in milliseconds.
select * from vwAlarms --in milliseconds
select top (100) * from Alarms order by id desc --in milliseconds
select top (100) * from vwAlarms order by id desc --takes 10 seconds 
```

这是我的视图定义：

```
 CREATE VIEW [dbo].[vwAlarms]
AS  SELECT 
    dbo.Devices.Id ,
    dbo.Devices.Name ,
    dbo.Devices.PortsTagPrefix ,
    dbo.Devices.ControlCenterNumber ,
    dbo.Devices.AlarmNumber1 ,
    dbo.Devices.AlarmNumber2 ,
    dbo.Devices.SimCardNumber ,
    dbo.Devices.StationNumber ,
    dbo.Devices.SlaveId ,
    dbo.Devices.TypeId ,
    dbo.Devices.RegionId ,
    dbo.Devices.EnquiryPassword ,
    dbo.Devices.SetupPassword ,
    dbo.Devices.ProtocolId ,
    dbo.Devices.UploadedPacketsCount ,
    dbo.Devices.LastPort ,
    dbo.Devices.LastIp ,
    dbo.Devices.IsForTesting ,
    dbo.Devices.Latitude ,
    dbo.Devices.Longitude ,
    dbo.Devices.X ,
    dbo.Devices.Y ,
    dbo.Devices.MainSchematicId ,
    dbo.Devices.MainTimeChartId ,
    dbo.Devices.MainCategoryChartId ,
    dbo.Alarms.Id ,
    dbo.Alarms.DeviceId ,
    dbo.Alarms.LogId ,
    dbo.Alarms.PortId ,
    dbo.Alarms.TypeId ,
    dbo.Alarms.DateTime ,
    dbo.Alarms.AcknowledgerId ,
    dbo.Alarms.AcknowledgeDateTime ,
    dbo.Alarms.Acknowledged ,
    dbo.Alarms.PortValue
FROM    Devices
        INNER JOIN Alarms ON Devices.Id = Alarms.DeviceId
ORDER BY dbo.Alarms.Id DESC 
```

这是执行计划： ![在此处输入图像描述](../Images/64e0eb6be3910849593e2c1bddad8423.png)

某种警告信息： ![在此处输入图像描述](../Images/4cd8917dfa2293e360aa0f4c29217bc9.png)

报警表架构：

```
CREATE TABLE [dbo].[Alarms](
[Id] [int] IDENTITY(1,1) NOT NULL,
[DeviceId] [int] NOT NULL,
[LogId] [int] NOT NULL,
[PortId] [int] NOT NULL,
[TypeId] [int] NOT NULL,
[DateTime] [datetime2](0) NOT NULL,
[AcknowledgerId] [int] NULL,
[AcknowledgeDateTime] [datetime2](0) NULL,
[Acknowledged] [bit] NULL,
[PortValue] [numeric](19, 4) NULL,
 CONSTRAINT [PK_Alarms] PRIMARY KEY CLUSTERED 
(
    [Id] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
) ON [PRIMARY]

GO

ALTER TABLE [dbo].[Alarms]  WITH CHECK ADD  CONSTRAINT [FK_Alarms_AlarmTypes] FOREIGN KEY([TypeId])
REFERENCES [dbo].[AlarmTypes] ([Id])
GO

ALTER TABLE [dbo].[Alarms] CHECK CONSTRAINT [FK_Alarms_AlarmTypes]
GO

ALTER TABLE [dbo].[Alarms]  WITH CHECK ADD  CONSTRAINT [FK_Alarms_Devices] FOREIGN KEY([DeviceId])
REFERENCES [dbo].[Devices] ([Id])
GO

ALTER TABLE [dbo].[Alarms] CHECK CONSTRAINT [FK_Alarms_Devices]
GO

ALTER TABLE [dbo].[Alarms]  WITH CHECK ADD  CONSTRAINT [FK_Alarms_ExtendedUsers] FOREIGN KEY([AcknowledgerId])
REFERENCES [dbo].[ExtendedUsers] ([Id])
GO

ALTER TABLE [dbo].[Alarms] CHECK CONSTRAINT [FK_Alarms_ExtendedUsers]
GO

ALTER TABLE [dbo].[Alarms]  WITH CHECK ADD  CONSTRAINT [FK_Alarms_Logs] FOREIGN KEY([LogId])
REFERENCES [dbo].[Logs] ([Id])
ON UPDATE CASCADE
ON DELETE CASCADE
GO

ALTER 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T15:29:57.637

这不是聪明的排序。
你有定义FK吗？

我会尝试连接表提示的所有选项，以尝试更早地推送该排序。

[连接提示 (Transact-SQL)](http://msdn.microsoft.com/en-us/library/ms173815.aspx)

如果表格提示不起作用，我会尝试交叉应用。
我认为 Cross Apply 在排序方面应该很聪明。
但以“加入”速度不快为代价。
因此，返回前 1000 或 10,000 个会很好，但根本就不好。

```
SELECT  t1.*, t2o.*
FROM    t1
CROSS APPLY
        (
        SELECT *
        FROM    t2
        WHERE   t2.t1_id = t1.id
        ) t2o 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T15:59:16.980

必须使用视图吗？如果没有，您可能应该先获得 100 个警报，然后再加入设备。这就是你想要的最终结果对吧？

# c - 如何用c判断一行的结尾

> ID：15682570
> 
> 赞同：3
> 
> 时间：2013-03-28T13:03:43.420
> 
> 标签：c, text, encode

我不知道该行是否以 '\n' 或 '\r' 或 '\r\n' 结尾，并且不知道文本是由什么编码的，除了如果编码是 utf-8，它可以是没有炸弹。是否有函数或库可以做到这一点，或者只是告诉我一行的终止。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T13:07:40.697

使用 wcslen 获取 utf8 字符串的字节大小。

[http://linux.die.net/man/3/wcslen](http://linux.die.net/man/3/wcslen)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T13:22:34.013

您是否偶然在为阅读文本而打开的文件上使用`fgets`, `fread`, `fputs`,等？`fwrite`如果是这样，该实现将在读取时自动将特定于操作系统的行终止符（例如`"\r\n"`）转换为，并在写入时转换为特定于操作系统的行终止符。`'\n'``'\n'`

* * *

还有*其他两种情况*，其中一种是 OP：

1.  OP 正在努力`"\r\n"`从其他操作系统软件中继承，因此打开文件以在他的（可能是类 Unix）操作系统中读取将不再转换它。我的建议是使用`dos2unix`这些一次性转换，而不是用可能永远不会再次运行的东西来膨胀你的代码。
2.  您没有使用这些功能之一。这可能是因为您正在使用诸如套接字之类的流，并且协议可能需要`"\r\n"`. 在这种情况下，您应该使用`strstr`查找确切的序列`"\r\n"`。

* * *

UTF-8 在设计时考虑到了与 ASCII 的一定程度的兼容性，因此您可以假设任何使用 UTF-8 的系统也将使用 ASCII 或一些类似的字符集。任何使用大于一个字节的序列的字符将只使用 0x80 或更大的值来表示。由于`'\n'`位于 0x00-0x7F 范围内，因此可以保证它是一个单字节，并且不会作为多字节字符的一部分存在。

# python - Linux服务器上的Django应用程序部署

> ID：15682571
> 
> 赞同：0
> 
> 时间：2013-03-28T13:03:43.470
> 
> 标签：python, django, configuration, mod-wsgi

我正在尝试在服务器上部署`django`应用程序。`Linux``mod_wsgi`

以下是我在 httpd.conf 文件中对 apache 的设置 -

```
<VirtualHost 127.0.0.1:8080>
AddDefaultCharset utf-8
LogLevel warn
ServerName myappletrade.com
#WSGIProcessGroup appletrade
WSGIScriptAlias / /var/www/html/appletrade/django.wsgi
DocumentRoot /var/www/html/appletrade
#WSGIDaemonProcess frontend user=vasim group=www
ServerAlias myappletrade.com 
CustomLog /var/www/html/appletrade/access_log   combined
ErrorLog /var/www/html/appletrade/error_log
<Directory /var/www/html/appletrade>
     Order allow,deny
     Allow from all
</Directory>
</VirtualHost> 
```

django.wsgi 文件设置 -

```
import os
import sys

sys.path.insert(0, "appletrade")
sys.path.insert(0, "/var/www/html/appletrade/noneapp/env/lib/python2.6/site-packages" )

os.environ['DJANGO_SETTINGS_MODULE'] = 'noneapp.settings.development'

import django.core.handlers.wsgi
application = django.core.handlers.wsgi.WSGIHandler() 
```

在文件夹里面`noneapp`我有开发，生产服务器的设置文件。

当我尝试在浏览器中访问 myappletrade.com 时，没有任何反应。它显示 500 内部服务器错误。

我检查了错误日志。它在哪里说-

```
[Sat Mar 30 18:07:55 2013] [error] [client 127.0.0.1] mod_wsgi (pid=2828): Exception occurred processing WSGI script '/var/www/html/appletrade/django.wsgi'.
[Sat Mar 30 18:07:55 2013] [error] [client 127.0.0.1] Traceback (most recent call last):
[Sat Mar 30 18:07:55 2013] [error] [client 127.0.0.1]   File "/usr/lib/python2.7/site-packages/django/core/handlers/wsgi.py", line 241, in __call__
[Sat Mar 30 18:07:55 2013] [error] [client 127.0.0.1]     response = self.get_response(request)
[Sat Mar 30 18:07:55 2013] [error] [client 127.0.0.1]   File "/usr/lib/python2.7/site-packages/django/core/handlers/base.py", line 179, in get_response
[Sat Mar 30 18:07:55 2013] [error] [client 127.0.0.1]     response = self.handle_uncaught_exception(request, resolver, sys.exc_info())
[Sat Mar 30 18:07:55 2013] [error] [client 127.0.0.1]   File "/usr/lib/python2.7/site-packages/django/core/handlers/base.py", line 224, in handle_uncaught_exception
[Sat Mar 30 18:07:55 2013] [error] [client 127.0.0.1]     if resolver.urlconf_module is None:
[Sat Mar 30 18:07:55 2013] [error] [client 127.0.0.1]   File "/usr/lib/python2.7/site-packages/django/core/urlresolvers.py", line 323, in urlconf_module
[Sat Mar 30 18:07:55 2013] [error] [client 127.0.0.1]     self._urlconf_module = import_module(self.urlconf_name)
[Sat Mar 30 18:07:55 2013] [error] [client 127.0.0.1]   File "/usr/lib/python2.7/site-packages/django/utils/importlib.py", line 35, in import_module
[Sat Mar 30 18:07:55 2013] [error] [client 127.0.0.1]     __import__(name)
[Sat Mar 30 18:07:55 2013] [error] [client 127.0.0.1]   File "/var/www/html/appletrade/noneapp/urls/production.py", line 4, in <module>
[Sat Mar 30 18:07:55 2013] [error] [client 127.0.0.1]     from noneapp.urls.default import urlpatterns as default_urlpatterns
[Sat Mar 30 18:07:55 2013] [error] [client 127.0.0.1]   File "/var/www/html/appletrade/noneapp/urls/default.py", line 6, in <module>
[Sat Mar 30 18:07:55 2013] [error] [client 127.0.0.1]     url(r'^catalog/', include('appletrade.urls', namespace = "catalog")),
[Sat Mar 30 18:07:55 2013] [error] [client 127.0.0.1]   File "/usr/lib/python2.7/site-packages/django/conf/urls/__init__.py", line 24, in include
[Sat Mar 30 18:07:55 2013] [error] [client 127.0.0.1]     urlconf_module = import_module(urlconf_module)
[Sat Mar 30 18:07:55 2013] [error] [client 127.0.0.1]   File "/usr/lib/python2.7/site-packages/django/utils/importlib.py", line 35, in import_module
[Sat Mar 30 18:07:55 2013] [error] [client 127.0.0.1]     __import__(name)
[Sat Mar 30 18:07:55 2013] [error] [client 127.0.0.1] ImportError: No module named urls 
```

请检查我的配置设置，如果我遗漏了什么，请告诉我。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T18:01:55.753

您正试图强制 Python 2.7 使用 Python 2.6 库。您的 django.wsgi 列出了路径中的 python2.6 站点包，但错误都列出了 python2.7。

您是否也在使用 virtualenv 环境？确保您使用的是安装在该虚拟环境中的 python，而不是系统版本 - 您将丢失您拥有的任何 pip 安装包。

经过进一步审查 - 您也没有在 VirtualHost 配置中为 mod_wsgi 定义所有变量。

# javascript - 计算两列中两个总和的平均值，并将其显示在 JQGrid 的下一列中

> ID：15682574
> 
> 赞同：0
> 
> 时间：2013-03-28T13:03:45.253
> 
> 标签：javascript, jquery, jqgrid, jqgrid-formatter

我在分组级别使用带有夏季行的 Jqgrid！现在我想知道一件事，是否可以显示根据不同列的两个摘要计算的平均值？因为 Sum 是通过 JQGrid 功能计算的。这就是为什么我不确定这是否可能！在这里，我附上了我的屏幕截图，请参考。![在此处输入图像描述](../Images/62065618ee2988b0707bc63de7551cc8.png)

在此，预测和收入的总和显示正确。我需要在准确度列的总和行位置显示收入和预测和 *100 的平均值。是否也可以通过任何 JavaScript 编码或 JQGrid 功能来实现它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T14:43:04.370

是的，这样做应该相当简单。

首先在 colModel 的正确位置添加名称，然后在您的 jqGrid 设置中，您可以通过以下方式注入一个空白列：

```
 beforeProcessing: function (data, status, xhr) {
            //add a "blank" column that will be built
            for (var x = 0, length = data.rows.length; x < length; x++) {
                data.rows[x].cell.splice(ColumnIndexValueToAddBlank,0, "");
            }//for
        }, //beforeProcessing 
```

然后在 jqGrid 中的该列设置中（在 colModel 设置中的正确位置）

```
 { name: "CalculatedColumn", .... , formatter: CalculatedFormatFunction 
```

自定义格式化程序功能：

```
 function CalculatedFormatFunction(cellval, opts, rowObject, action) {

   return rowObject[ColumnOneIndex] * rowObject[ColumnTwoIndex]; 
  } 
```

# hibernate - JPA Hibernate父/子映射混淆

> ID：15682580
> 
> 赞同：0
> 
> 时间：2013-03-28T13:04:02.417
> 
> 标签：hibernate, jpa, mapping

希望有人可以帮助我解决这个问题。

我正在尝试使用 JPA / Hibernate 在两个实体之间创建双向连接。

我遇到了这个问题，这似乎表明我的数据库列名需要与我的值对象属性名匹配——但这看起来很奇怪。希望有人可以通过提供一些清晰度来帮助我。

不幸的是，我所处的位置是一些明亮的火花用无意义的名称命名了列名。 **我无法更改列名-相信我-如果可以的话-我会的！**

所以这就是我的架构的样子： -

```
Customer
========
CS1 -- The ID column
CS2 -- Customer Description

ContactDetails
==============
CD1 -- The ID column
CD2 -- The FK to the Customer table
... 
```

正如您所期望的那样，我的应用程序中有两个值对象 - 它们看起来像这样：-

**客户.java**

```
@Entity
@Table("Customer")
public class Customer {
  @Id
  @GeneratedValue(strategy = IDENTITY)
  @Column(name = "CS1", nullable=false, columnDefinition="INTEGER")
  private int id;
}

@OneToMany  (cascade = CascadeType.ALL, mappedBy = "customerId", fetch = FetchType.EAGER) 
private Set <ContactDetailsVO> contactDetails = new HashSet <CustomerDetailsVO> ();
} 
```

**ContactDetails.java**

```
public class ContactDetails {
  @Id
  @GeneratedValue(strategy = IDENTITY)
  @Column(name = "CD1", nullable=false, columnDefinition="INTEGER")
  private int id;

@Column(name = "CD2")
long customerId;

@ManyToOne(optional = false)
@JoinColumn(name = "customerId", referencedColumnName = "id")
private CustomerVO customer;

public CustomerVO getCustomer() {
    return customer;
}

public void setCustomer(CustomerVO customer) {
    this.customer = customer;
}
} 
```

不幸的是，这种引用对象属性名称的方法，因为映射关系似乎不起作用 - 我在启动时得到以下信息： -

```
Caused by: org.hibernate.HibernateException: Missing column: customerId in TestDB.dbo.ContactDetails
    at org.hibernate.mapping.Table.validateColumns(Table.java:276)
    at org.hibernate.cfg.Configuration.validateSchema(Configuration.java:131 
```

因此，如果我随后更改映射以使用实际的表列名，我会得到以下信息：-

**客户.java**

```
@Entity
@Table("Customer")
public class Customer {
  @Id
  @GeneratedValue(strategy = IDENTITY)
  @Column(name = "CS1", nullable=false, columnDefinition="INTEGER")
  private int id;
}

@OneToMany  (cascade = CascadeType.ALL, mappedBy = "CD2", fetch = FetchType.EAGER) 
private Set <ContactDetailsVO> contactDetails = new HashSet <CustomerDetailsVO> ();
} 
```

**ContactDetails.java**

```
public class ContactDetails {
  @Id
  @GeneratedValue(strategy = IDENTITY)
  @Column(name = "CD1", nullable=false, columnDefinition="INTEGER")
  private int id;

@Column(name = "CD2")
long customerId;

@ManyToOne(optional = false)
@JoinColumn(name = "CD2", referencedColumnName = "CS1")
private CustomerVO customer;

public CustomerVO getCustomer() {
    return customer;
}

public void setCustomer(CustomerVO customer) {
    this.customer = customer;
}
} 
```

然后我得到以下信息：-

```
Caused by: org.hibernate.MappingException: Could not determine type for: 
com.myCompany.model.vo.CustomerVO, at table: ContactDetails, for columns: 
      [org.hibernate.mapping.Column(customer)]
    at org.hibernate.mapping.SimpleValue.getType(SimpleValue.java:306) 
```

正如我所说，解决这个问题的明显方法是命名我的对象属性，与表列名称相同 - 但考虑到命名表列的愚蠢，我宁愿将我的应用程序与它隔离开来。

有人可以帮助阐明这种奇怪的行为吗？

提前致谢。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-28T15:18:35.650

好的 - 所以我认为这是 Hibernate 中的一个真正问题。基本上，如果您混合使用属性和方法注释装饰方法，Hibernate 会给您带来虚假的、无意义的错误。希望这可以节省我刚刚浪费的 6 个小时。

# java - Eclipse 中的链式方法格式化

> ID：15682587
> 
> 赞同：7
> 
> 时间：2013-03-28T13:04:26.747
> 
> 标签：java, eclipse, formatter

我想将 Eclipse java 格式化程序配置为像这样格式化链式方法调用：

```
lblName
        .setX(last.getX() + last.getWidth())
        .setY(0)
        .setHeight(this.height)
        .setWidth(80); 
```

我的问题是，如果第一个方法调用已经放在第二行，我不知道如何使它只像这样格式化。此调用应保持不变：

```
lblName.setX(last.getX() + last.getWidth()).setY(0).setHeight(this.height).setWidth(80); 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-28T14:03:43.073

你说：

```
...if the first method call already is placed...call should be untouched... 
```

如果您不希望格式化程序包装已经换行的行，请查看此面板：

![在此处输入图像描述](../Images/e051f5365b6ff4c62a8512eca859b5a2.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T13:13:02.410

那是不可能的。您可以在每个方法调用后、每行的特定字符限制后换行，或者根本不换行。

也就是说，您的要求也没有经过深思熟虑。编写两次相同的代码，仅在换行符处有所不同（例如，由同一团队中的两个不同的人编写）应该导致获得*相同*格式的代码以提交到公共存储库。

# javascript - 移动设备上的 Kineticjs 设置 2 种不同的宽度和大小

> ID：15682589
> 
> 赞同：0
> 
> 时间：2013-03-28T13:04:29.577
> 
> 标签：javascript, canvas, kineticjs

在 Kinetic.Stage() 上设置高度和宽度时，我遇到了一个非常奇怪的问题。如果我在桌面上将高度设置为 300，我会得到：

```
<canvas width="300" style="width: 300px; height: 300px; position: absolute;" height="300"></canvas> 
```

但是当我在移动设备上检查它时，我得到了

```
<canvas width="600" style="width: 300px; height: 300px; position: absolute;" height="600"></canvas> 
```

这将定位全部抛出。我想知道是否有人知道这个问题，如果它是我遗漏的东西。

谢谢，汤姆

# django - Django 模板标签 - 返回多个值或对象

> ID：15682590
> 
> 赞同：5
> 
> 时间：2013-03-28T13:04:30.280
> 
> 标签：django, django-templates

我有一个 Django (1.5) 模板标签，我在部分视图中使用它来呈现一些随机内容。该标记对单个记录进行查询。我退回单个物品没有问题，但是当我尝试退回完整的物品以供使用或多个物品时，我遇到了麻烦。

**这是我的标签**

```
@register.inclusion_tag('_footer.html')
def get_random_testimonial():
    # Grab random record
    record = Testimonials.objects.order_by('?')[0]
    return record.text 
```

我希望能够将 record.text 和 record.id 返回到模板标签

**为了呈现标签，我在 _footer.html 视图中有这个**

```
{% load current_tags %}
{% get_random_testimonial %} 
```

有没有办法我可以只返回记录对象，并能够通过以下方式获取该对象的所有值：

```
 {% get_random_testimonial.text %}
 {% get_random_testimonial.id %} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-28T13:12:12.200

作为包含标签，这没有意义。特别是当您似乎在与您告诉它渲染相同的模板中使用它时。

您需要的是一个[分配标签](https://docs.djangoproject.com/en/1.5/howto/custom-template-tags/#assignment-tags)：

```
@register.assignment_tag
def get_random_testimonial():
    return Testimonials.objects.order_by('?')[0] 
```

然后你可以这样做：

```
{% get_random_testimonial as my_testimonial %}
{{ my_testimonial.text }}
{{ my_testimonial.id }} 
```

# ios - 无法在应用程序购买中使用 iPhone 中的沙盒测试用户帐户

> ID：15682594
> 
> 赞同：0
> 
> 时间：2013-03-28T13:04:37.467
> 
> 标签：ios

我在 iTunes Connect 中创建了一个测试用户帐户。我将它们用于应用内购买测试。我尝试使用这些凭据登录。给出错误弹出窗口，如 . “Apple ID 尚未在 iTunes Store 中使用”，时钟正常后，第二个弹出窗口如“Apple ID 尚未在 iTunes Store 中使用”，请查看。在这里，我们正在测试应用内购买。所以我们需要提供信用卡/借记卡详细信息吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T13:10:11.097

确保您从创建 InApp 购买产品 ID 的同一开发人员配置文件中创建了测试用户。

# iphone - 在 MKMapkit 中如何获取文本字段或表格视图中的当前位置详细信息

> ID：15682595
> 
> 赞同：1
> 
> 时间：2013-03-28T13:04:39.773
> 
> 标签：iphone, objective-c, ipad, ios6, iphone-5

```
RootViewController *objYourViewController = [[RootViewController alloc] initWithNibName:@"RootViewController" bundle:nil];
CATransition* transition = [CATransition animation];
transition.duration = 1.0;
transition.type = kCATransitionPush;
transition.subtype = kCATransitionPush;
[self.navigationController.view.layer addAnimation:transition forKey:kCATransition];
[self.navigationController pushViewController:objYourViewController animated:YES]; 
```

这用于指向当前位置。现在我想在文本字段或表格视图中获取当前位置的详细信息，所以如果有人知道，请帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T13:11:26.043

我用过下面的代码..

首先添加文件`MKReverseGeocoderDelegate`..`.h`

`MKReverseGeocoder`在文件中创建对象后，`.h`如下所示..

```
MKReverseGeocoder *mkReverseGeocoder; 
```

然后在您的`UIButton`Action 事件中像下面一样使用它

```
-(IBAction)btnFindMe_Clicked:(id)sender{
    if(mkReverseGeocoder)
    {
        [mkReverseGeocoder autorelease];
    }

    mkReverseGeocoder = [[MKReverseGeocoder alloc] initWithCoordinate:[currLocation coordinate]];

    [mkReverseGeocoder setDelegate:self];
    [mkReverseGeocoder start];
} 
```

下面的方法是委托方法`MKReverseGeocoder`

```
//mkreversegeocoder protocol methods

- (void)reverseGeocoder:(MKReverseGeocoder *)geocoder didFailWithError:(NSError *)error
{

    [appDelegate hideLoadingView];
    UIAlertView *alt=[[UIAlertView alloc]initWithTitle:@"Error" message:@"Try Again After Sometime" delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil, nil];
    [alt show];
    [alt release];
//    NSLog(@"\n\n Error is %@",[error description]);
}

- (void)reverseGeocoder:(MKReverseGeocoder *)geocoder didFindPlacemark:(MKPlacemark *)placemark
{

    [appDelegate hideLoadingView];
    NSLog(@"\n\n Address Dict : %@",[[placemark addressDictionary] description]);
    txtCity.text=[[placemark addressDictionary] objectForKey:@"City"];
    txtState.text=[[placemark addressDictionary] objectForKey:@"State"];
    txtAddress1.text=[[placemark addressDictionary] objectForKey:@"Street"];
    txtAddress2.text=[[placemark addressDictionary] objectForKey:@"SubLocality"];
    //[NSString stringWithFormat:@"%@", [[gpsTextView addressDictionary] description], ];
} 
```

另请参阅此链接的示例，但它的另一个代码.. 以上是我的自定义代码... [how-to-get-current-latitude-and-longitude-in-iphone/](http://www.edumobile.org/iphone/miscellaneous/how-to-get-current-latitude-and-longitude-in-iphone/)

# c# - 使用 C# 访问 OpenERP

> ID：15682604
> 
> 赞同：1
> 
> 时间：2013-03-28T13:05:13.813
> 
> 标签：c#, database, openerp

我们有一个 OpenERP 安装。Web 界面有时过于严格。我们想用 c# 编写自己的桌面应用程序来连接到 openERP 数据库并读取一些数据。为了安全起见，我们最初只是读取一些数据，但随后我们希望能够通过我们自己的应用程序添加产品并做一些其他简单的事情。

OpenERP可以做到这一点吗？谁能指点我一个简单的 C# 应用程序，它可以连接和读取 OpenERP 中的一些记录？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T01:27:19.550

听起来您会想要使用 XMLRPC。 [这是链接](http://doc.openerp.com/v6.0/developer/6_22_XML-RPC_web_services/)

# php - 使用 MSSQL 进行 PDO 查询编码

> ID：15682609
> 
> 赞同：1
> 
> 时间：2013-03-28T13:05:17.747
> 
> 标签：php, sql-server, encoding, pdo

我有可怕的问题让我生病:) 这是我的问题的简单示例：

```
$driver="SQL Server; TDS_Version=7.2; Port=1433";
$dbh = new PDO("odbc:Driver=$driver;Server=$server;Database=$database;charset=utf-8;Uid=$username;Pwd=$password;");
$query="select * from table where f_name like '%aleš%'";
$sth = $dbh->prepare($query);
$sth->execute();
$result = $sth->fetchAll(); 
```

我对捷克名称 (aleš) 的编码有疑问。然而，这个查询应该返回一些结果，它不会。当我使用名称女巫进行相同的查询时，它不包含任何捷克语特定的字母（petr），它工作得很好。

我在 MS 网站上发现了一些评论，即 mssql 服务器只接受 ucs-2 编码的 vartext 查询。我也以某种方式尝试过，但没有运气。有任何想法吗？非常感谢！（对不起 - 这是我第一次使用 mssql）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-17T15:25:21.133

我的设置与您（SQL Server，PDO）大致相同，并且遇到了同样的问题。现在，我通过 jQuery AJAX 调用将表单数据发送到 PHP，当我构造 GET 字符串时，我会执行“encodeURIComponent”，它会正确编码特殊字符 (ščžýáí)。

```
var formdata = $('#test_form').serializeArray();
req = '';
$.each(formdata, function(i,element){
    req += element.name + "=" + encodeURIComponent(element.value) + "&";
}); 
```

# c# - 特定次数

> ID：15682611
> 
> 赞同：0
> 
> 时间：2013-03-28T13:05:25.023
> 
> 标签：c#, asp.net, asp.net-mvc-3

我试图在我的 HTML 中做这样的事情：

```
@foreach (var item in Model) { 
```

但是，我只想要模型中的前 6 个项目，而不是对每个条目都这样做。有谁知道语法？试了几次都没有成功。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-28T13:06:10.467

如何使用`Take`LINQ 方法

```
@foreach (var item in Model.Take(6)) 
```

不要忘记`System.Linq`在视图中添加命名空间

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T13:06:29.467

你可以使用一个简单的`for`循环。

例如`for(int i = 0; i < 6; i++)`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T13:08:23.583

您可以使用`Enumerable.Take<TSource> Method`：从序列的开头返回指定数量的连续元素。

例如。

```
@foreach (var item in Model.Take(5)) { 
```

参考：

[Enumerable.Take 方法](http://msdn.microsoft.com/en-us/library/bb503062.aspx)

# mysql - Mysql不识别数学运算

> ID：15682612
> 
> 赞同：-2
> 
> 时间：2013-03-28T13:05:26.820
> 
> 标签：mysql, sql, select

我有以下查询来计算地理距离：

```
SELECT (
   (ACOS(SIN(39 * PI() / 180) * 
         SIN(`latitude` * PI() / 180) +
         COS(39 * PI() / 180) *
         COS(`latitude` * PI() / 180) *
         COS((32–`poi.longitude`) * PI()/180)
        ) * 180 / PI()
   ) * 60 * 1.1515
       ) AS distance
FROM     `poi`
HAVING   distance <= 10
ORDER BY distance ASC 
```

当我运行查询时出现错误：

> 语法错误或访问冲突：1064 您的 SQL 语法有错误；查看与您的 MySQL 服务器版本相对应的手册，了解在 '– `poi.longitude`) * PI()/180...附近使用的正确语法

因此，如果我将 (32–<code>poi.longitude) 替换为 (3) 之类的数字，那么它可以工作，但即使我使用 (32–21) 作为数学运算，它也会引发错误。我`poi.longitude`用 `longitude`（带引号）、经度等替换，但似乎没有任何效果。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T13:06:56.757

语法错误的原因是因为您将表名和列名用反引号括起来，导致服务器查找未知列。

```
`poi.longitude` -- searches for column name [poi.longitude] and not
                -- [longitude] from table [poi] 
```

* * *

它应该是

```
`poi`.`longitude` 
```

或者

```
poi.longitude 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T13:44:41.990

您没有使用正确的减号 -。

# c# - Linq、XmlNodes、foreach 和异常

> ID：15682613
> 
> 赞同：9
> 
> 时间：2013-03-28T13:05:28.643
> 
> 标签：c#, linq, exception, deferred-execution

考虑以下代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Xml;
using System.Xml.Linq;

namespace ConsoleApplication1
{
    class Program
    {
        static void Main(string[] args)
        {
            XmlDocument xmlDoc = new XmlDocument();

            xmlDoc.LoadXml(@"<Parts>
  <Part name=""DisappearsOk"" disabled=""true""></Part>
  <Part name=""KeepMe"" disabled=""false""></Part>
  <Part name=""KeepMe2"" ></Part>
  <Part name=""ShouldBeGone"" disabled=""true""></Part>  
</Parts>");

            XmlNode root = xmlDoc.DocumentElement;
            List<XmlNode> disabledNodes = new List<XmlNode>();

            try
            {

                foreach (XmlNode node in root.ChildNodes.Cast<XmlNode>()
                                             .Where(child => child.Attributes["disabled"] != null &&
                                                             Convert.ToBoolean(child.Attributes["disabled"].Value)))
                {
                    Console.WriteLine("Removing:");
                    Console.WriteLine(XDocument.Parse(node.OuterXml).ToString());
                    root.RemoveChild(node);
                }
            }
            catch (Exception Ex)
            {
                Console.WriteLine("Exception, as expected");
            }

            Console.WriteLine();
            Console.WriteLine(XDocument.Parse(root.OuterXml).ToString());

            Console.ReadKey();
        }
    }
} 
```

**当我在Visual Studio Express 2010**中运行此代码时，正如预期的那样，我没有遇到异常。我期待一个，因为我在迭代列表时从列表中删除了一些东西。

我得到的是一个列表，只删除了第一个子节点：

![在此处输入图像描述](../Images/9b7554a7326462ce52d8593320ba37c5.png)

**为什么我没有收到无效操作异常？**

**请注意，IDEOne.com 中的等效代码确实给出了预期的异常**：http: [//ideone.com/qoRBbb](http://ideone.com/qoRBbb)

**另请注意，如果我删除所有 LINQ ( `.Cast().Where()`)，我会得到相同的结果，只删除一个节点，没有例外。**

我在 VSExpress 中的设置有问题吗？

* * *

请注意，我知道涉及延迟执行，但我希望 where 子句在迭代源枚举（子注释）时迭代，这将给出我期望的异常。

我的问题是我在 VSexpress 中没有得到那个异常，但在 IDEOne 中得到了（我希望在两种/所有情况下都会出现这种情况，或者至少如果没有，我希望得到正确的结果）。

* * *

从[Wouter 的回答](https://stackoverflow.com/a/15682776/593627)看来，当第一个孩子被删除时，它似乎使迭代器无效，而不是给出异常。有没有官方这么说的？在其他情况下是否会出现这种行为？我会调用以静默方式使迭代器无效，而不是使用“静默但致命”异常。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T13:12:24.713

因为您正在迭代`ChildNodes`，所以删除第一个孩子会使迭代器无效。因此，迭代将在第一次删除后停止。

如果您拆分过滤和迭代，您的代码将删除所有项目：

```
var col = root.ChildNodes.Cast<XmlNode>()
                             .Where(child => child.Attributes["disabled"] != null &&
                                             Convert.ToBoolean(child.Attributes["disabled"].Value)).ToList();

foreach (XmlNode node in col)
{
    Console.WriteLine("Removing:");
    Console.WriteLine(XDocument.Parse(node.OuterXml).ToString());
    root.RemoveChild(node);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T13:55:08.493

即使是下面的代码也不会抛出任何异常：

```
foreach (XmlNode node in root.ChildNodes)
    root.RemoveChild(node); 
```

它将只删除一个元素。我不是 100% 我的解释是正确的，但它是在正确的轨道上。当你遍历一个集合时，你检索它的枚举数。对于 XmlNode，它是一个集合，这是一个名为`XmlChildEnumerator`.

如果您通过 Reflector 查找 MoveNext 实现，您会看到枚举器记住了它当前正在查看的节点。当您调用 MoveNext 时，您将移动到下一个同级。

上面代码中发生的事情是您从集合中获取第一个节点。在 foreach 循环体中隐式生成的枚举器将第一个节点作为其当前节点。然后，在 foreach 循环的主体中删除该节点。

现在该节点已从列表中分离出来，执行将再次调用 MoveNext。但是，由于我们刚刚从集合中删除了第一个节点，因此它与集合分离并且节点没有兄弟节点。由于节点没有兄弟节点，迭代停止并退出 foreach 循环，因此只删除单个元素。

这不会引发异常，因为它不检查集合是否已更改，它只是想移动到它可以找到的下一个节点。但是由于被移除（分离）的节点不属于集合，所以循环停止。

希望这可以解决问题。

# javascript - 如何使用我的长（60 天）访问令牌从 facebook（离线）获取用户数据

> ID：15682617
> 
> 赞同：2
> 
> 时间：2013-03-28T13:05:39.017
> 
> 标签：javascript, facebook-graph-api, facebook-javascript-sdk, facebook-login

我在 facebook dev 上找不到任何示例。或者在stackoverflow上，所以我需要发表这篇我认为不需要的帖子。

我有一个使用 facebook JavaScript SDK 让用户登录的网站。当我登录用户时，我使用

```
FB.login(), scope:{'email, offline_access'} 
```

登录完成后，我得到短暂的访问令牌并将其传递给：

```
https://graph.facebook.com/oauth/access_token?  
    grant_type=fb_exchange_token&           
    client_id=APP_ID&
    client_secret=APP_SECRET&
    fb_exchange_token=SHORT_LIVED_ACCESS_TOKEN 
```

所以我得到了长寿的 60 天令牌作为回应。这是在服务器端完成的，我将新的持久令牌与 facebook id 等一起保存在我的数据库中。

现在到我的问题。每天在某个时间，我想使用访问令牌更新我的数据库中的用户数据，我已经读过它可以。但我该怎么做？

**我习惯在 FB.login() 之后这样做，但现在当用户不登录时，我不知道如何使用我的持久令牌调用 FB.api？**

```
FB.api(/me....) 
```

问候，克里斯托弗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T13:18:11.073

由于您必须在用户未登录时同步/更新信息，因此您将不得不使用服务器端交互。您可以使用您保存的[扩展访问令牌](https://developers.facebook.com/docs/howtos/login/extending-tokens/)并使用[setAccessToken()](http://developers.facebook.com/docs/reference/php/facebook-setAccessToken/)方法将其设置到[Facebook PHP SDK中。](http://developers.facebook.com/docs/reference/php/)

```
$facebook->setAccessToken($extended_access_token); 
```

在此之后，您可以调用**$facebook->api(...)**方法来执行您打算执行的任务。

# xpages - 如何使用链接控制创建到另一个数据库的链接？

> ID：15682618
> 
> 赞同：1
> 
> 时间：2013-03-28T13:05:45.557
> 
> 标签：xpages

如何使用链接控制创建到另一个数据库的链接？我以为我只是用斜杠开始 URL，但它不起作用，因为 xpages 将当前数据库的路径添加到此链接，并且我得到了错误的链接：/app/projects.nsf/database.nsf/page.xsp

```
<xp:link escape="true" text="Link" id="link1" value="/database.nsf/page.xsp">   
</xp:link> 
```

我知道我可以创建以 http:// 开头的绝对链接，但我想避免这种情况......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T13:40:26.247

如果数据库位于服务器上的同一子目录中，则可以使用 ../xxx.nsf 对于要返回的每个子文件夹，您可以在前面加上 ../

你的例子：

```
<xp:link escape="true" text="Link" id="link1" value="../database.nsf/page.xsp">
</xp:link> 
```

如果数据库是当前数据库文件夹上方的一个文件夹，您可以使用：

```
<xp:link escape="true" text="Link" id="link1" value="../../database.nsf/page.xsp">
</xp:link> 
```

希望有帮助。迈克尔

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T15:00:14.820

您可以使用 xp:text 元素并将其转换为锚点：

```
<xp:text escape="true" id="link1" tagName="a" value="Link">
   <xp:this.attrs>
      <xp:attr name="href" value="/database.nsf/page.xsp"></xp:attr>
   </xp:this.attrs>
</xp:text> 
```

或将链接添加为直通标签。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-26T14:05:00.230

为了建立 Sven 的答案，我计算了 URL，并将目标设置为新选项卡。所以我的 xp:text 元素是：

```
<xp:text id="label4" escape="true"
    styleClass="btn btn-default" value="Open Fastworks Document"
        tagName="a">
    <xp:this.attrs>
        <xp:attr name="href">
        <xp:this.value><![CDATA[#{javascript:var sUNID = document1.getItemValueString("FWUNID");
var sNSF = document1.getItemValueString("FWNSF").replace("\\","/");
//sys_all/A4DC4CFDA12A1A4E80257F48003DD8F9?OpenDocument
"/"+sNSF + "/sys_all/"+sUNID;}]]></xp:this.value>
        </xp:attr>
        <xp:attr name="target"
                value="_blank">
        </xp:attr>
    </xp:this.attrs>
</xp:text> 
```

然后生成 HTML，例如：

`<a class="btn btn-default" id="view:_id1:_id2:callback2:label4" href="/Fastworks/Version52m/Accident.nsf/sys_all/31F7D581D23BCFE580257FA1002E3B43" target="_blank">Open Fastworks Document</a>`

# css - CSS：位置：固定和水平滚动

> ID：15682619
> 
> 赞同：1
> 
> 时间：2013-03-28T13:05:47.323
> 
> 标签：css, html, position

我遇到了 100% 高度 div 的问题。

到目前为止，如果您使用and`position:fixed`向下滚动，我已经习惯避免出现空白。这很好用，但是如果您水平滚动，则 div 不会随着页面的其余部分滚动。`top:0``bottom:0`

我已将其定位在距其容器左侧 20px 的位置，并且当浏览器不比文档窄时它保持在正确的位置，但是当它是问题开始时。

编辑：绿色的 div 应该表现得像灰色的，当你水平滚动而不是停留在原地时会移动。

在这里你可以找到代码：

```
<div style="width: 1200px; margin: 0 auto; padding-bottom:50px">
  <div style="background-color: #CFC; width: 340px; position:fixed; margin-left: 20px; top:0px; bottom:0px"></div>
  <div style="background-color: #CCC; width: 340px; height: 395px; position: absolute; margin-left: 20px; top: 0px"></div>
  <div style="box-shadow: 0px 0px 15px rgba(0, 0, 0, 0.8); margin-top: 60px">
    <div style="background-color: #FFF; width: 1200px; height: 260px"></div>
    <div style="background-color: #666; width: 1200px; height: 26px"></div>
    <div style="background-color: #FFF; width: 1200px; min-height: 500px"></div>
  </div>
</div> 
```

jsFiddle - [http://jsfiddle.net/q7tEE/](http://jsfiddle.net/q7tEE/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T13:08:08.327

这是一个[工作 jsFiddle](http://jsfiddle.net/q7tEE/4/)。

您需要`position:absolute`在绿色 div 上使用，而不是`position:fixed`希望它像灰色 div 那样水平滚动。

```
.greenbg {
    background-color: #CFC;
    width: 340px;
    height:896px;
    position:absolute;
    margin-left: 20px;
    top:0px;
    bottom:0px
} 
```

# performance - 参数变量导致查询慢，为什么？

> ID：15682621
> 
> 赞同：14
> 
> 时间：2013-03-28T13:05:47.703
> 
> 标签：performance, sql-server-2008, select, join, parameters

我有 3 个版本的查询最终返回相同的结果。

当向相对较小的表中添加额外的内部连接并且在 where 子句中使用参数变量时，其中一个会变得非常慢。

快速查询和慢速查询（包含在每个查询下方）的执行计划非常不同。

我想了解为什么会发生这种情况以及如何预防。

此查询需要 < 1 秒。它没有额外的内部连接，但它在 where 子句中使用参数变量。

```
 declare @start datetime = '20120115'
    declare @end datetime = '20120116'

    select distinct sups.campaignid 
    from tblSupporterMainDetails sups
    inner join tblCallLogs calls on sups.supporterid = calls.supporterid
    where calls.callEnd between @start and @end

  |--Parallelism(Gather Streams)
       |--Sort(DISTINCT ORDER BY:([sups].[campaignID] ASC))
            |--Parallelism(Repartition Streams, Hash Partitioning, PARTITION COLUMNS:([sups].[campaignID]))
                 |--Hash Match(Partial Aggregate, HASH:([sups].[campaignID]))
                      |--Hash Match(Inner Join, HASH:([calls].[supporterID])=([sups].[supporterID]))
                           |--Bitmap(HASH:([calls].[supporterID]), DEFINE:([Bitmap1004]))
                           |    |--Parallelism(Repartition Streams, Hash Partitioning, PARTITION COLUMNS:([calls].[supporterID]))
                           |         |--Index Seek(OBJECT:([GOGEN].[dbo].[tblCallLogs].[IX_tblCallLogs_callend_supporterid] AS [calls]), SEEK:([calls].[callEnd] >= '2012-01-15 00:00:00.000' AND [calls].[callEnd] <= '2012-01-16 00:00:00.000') ORDERED FORWARD)
                           |--Parallelism(Repartition Streams, Hash Partitioning, PARTITION COLUMNS:([sups].[supporterID]))
                                |--Index Scan(OBJECT:([GOGEN].[dbo].[tblSupporterMainDetails].[AUTOGEN_IX_tblSupporterMainDetails_campaignID] AS [sups]),  WHERE:(PROBE([Bitmap1004],[GOGEN].[dbo].[tblSupporterMainDetails].[supporterID] as [sups].[supporterID],N'[IN ROW]'))) 
```

此查询需要 < 1 秒。它有一个额外的内部连接，但在 where 子句中使用参数常量。

```
 select distinct camps.campaignid 
    from tblCampaigns camps
    inner join tblSupporterMainDetails sups on camps.campaignid = sups.campaignid
    inner join tblCallLogs calls on sups.supporterid = calls.supporterid
    where calls.callEnd between '20120115' and '20120116'

  |--Parallelism(Gather Streams)
       |--Hash Match(Right Semi Join, HASH:([sups].[campaignID])=([camps].[campaignID]))
            |--Bitmap(HASH:([sups].[campaignID]), DEFINE:([Bitmap1007]))
            |    |--Parallelism(Repartition Streams, Hash Partitioning, PARTITION COLUMNS:([sups].[campaignID]))
            |         |--Hash Match(Partial Aggregate, HASH:([sups].[campaignID]))
            |              |--Hash Match(Inner Join, HASH:([calls].[supporterID])=([sups].[supporterID]))
            |                   |--Bitmap(HASH:([calls].[supporterID]), DEFINE:([Bitmap1006]))
            |                   |    |--Parallelism(Repartition Streams, Hash Partitioning, PARTITION COLUMNS:([calls].[supporterID]))
            |                   |         |--Index Seek(OBJECT:([GOGEN].[dbo].[tblCallLogs].[IX_tblCallLogs_callend_supporterid] AS [calls]), SEEK:([calls].[callEnd] >= '2012-01-15 00:00:00.000' AND [calls].[callEnd] <= '2012-01-16 00:00:00.000') ORDERED FORWARD)
            |                   |--Parallelism(Repartition Streams, Hash Partitioning, PARTITION COLUMNS:([sups].[supporterID]))
            |                        |--Index Scan(OBJECT:([GOGEN].[dbo].[tblSupporterMainDetails].[AUTOGEN_IX_tblSupporterMainDetails_campaignID] AS [sups]),  WHERE:(PROBE([Bitmap1006],[GOGEN].[dbo].[tblSupporterMainDetails].[supporterID] as [sups].[supporterID],N'[IN ROW]')))
            |--Parallelism(Repartition Streams, Hash Partitioning, PARTITION COLUMNS:([camps].[campaignID]))
                 |--Index Scan(OBJECT:([GOGEN].[dbo].[tblCampaigns].[IX_tblCampaigns_isActive] AS [camps]),  WHERE:(PROBE([Bitmap1007],[GOGEN].[dbo].[tblCampaigns].[campaignID] as [camps].[campaignID],N'[IN ROW]'))) 
```

此查询需要 2 分钟。它有一个额外的内部连接并且它在 where 子句中使用参数变量。

```
 declare @start datetime = '20120115'
    declare @end datetime = '20120116'

    select distinct camps.campaignid 
    from tblCampaigns camps
    inner join tblSupporterMainDetails sups on camps.campaignid = sups.campaignid
    inner join tblCallLogs calls on sups.supporterid = calls.supporterid
    where calls.callEnd between @start and @end

  |--Nested Loops(Inner Join, OUTER REFERENCES:([camps].[campaignID]))
       |--Index Scan(OBJECT:([GOGEN].[dbo].[tblCampaigns].[IX_tblCampaigns_isActive] AS [camps]))
       |--Top(TOP EXPRESSION:((1)))
            |--Nested Loops(Inner Join, OUTER REFERENCES:([calls].[callID], [Expr1007]) OPTIMIZED WITH UNORDERED PREFETCH)
                 |--Nested Loops(Inner Join, OUTER REFERENCES:([sups].[supporterID], [Expr1006]) WITH UNORDERED PREFETCH)
                 |    |--Index Seek(OBJECT:([GOGEN].[dbo].[tblSupporterMainDetails].[AUTOGEN_IX_tblSupporterMainDetails_campaignID] AS [sups]), SEEK:([sups].[campaignID]=[GOGEN].[dbo].[tblCampaigns].[campaignID] as [camps].[campaignID]) ORDERED FORWARD)
                 |    |--Index Seek(OBJECT:([GOGEN].[dbo].[tblCallLogs].[IX_tblCallLogs_supporterID_closingCall] AS [calls]), SEEK:([calls].[supporterID]=[GOGEN].[dbo].[tblSupporterMainDetails].[supporterID] as [sups].[supporterID]) ORDERED FORWARD)
                 |--Clustered Index Seek(OBJECT:([GOGEN].[dbo].[tblCallLogs].[AUTOGEN_PK_tblCallLogs] AS [calls]), SEEK:([calls].[callID]=[GOGEN].[dbo].[tblCallLogs].[callID] as [calls].[callID]),  WHERE:([GOGEN].[dbo].[tblCallLogs].[callEnd] as [calls].[callEnd]>=[@s2] AND [GOGEN].[dbo].[tblCallLogs].[callEnd] as [calls].[callEnd]<=[@e2]) LOOKUP ORDERED FORWARD) 
```

### 笔记：

*   我相信缓慢是由 Clustered Index Seek on 引起的`tblCallLogs`，但是我不知道为什么 SQL Server 会选择这个执行计划。
*   我应该使用查询优化器提示吗？我需要并且不愿意告诉 SQL Server 如何完成它的工作......
*   该问题似乎是由多种因素引起的 - 额外的连接和变量。
*   执行计划在为查询找到变量时是否会尝试重用“坏”计划？
*   在现实生活中，我将不得不使用参数变量。常数不好！所以这个问题可能存在于我的许多查询/存储过程中！
*   我已经在 和 上重建了索引并更新了统计`tblCampaigns`数据`tblSupporterMainDetails`。这没有效果。
*   两个表在主键（标识整数）上都有聚集索引。
*   外键列`campaignid`被索引。
*   所有查询都使用相同的参数值——不管它被用作变量还是常量。

### 表中的记录数：

*   tblSupporterMainDetails = 12,561,900
*   tblCallLogs = 27,242,224
*   tblCampaigns = 756

更新：

*   我还重建了索引并更新了`tblcalllogs`. 没有效果。
*   我已经使用清除了执行计划缓存`DBCC FREEPROCCACHE`
*   tblCallLogs.callEnd 是一个日期时间。

### 涉及列的架构：

```
tblCampaign.campaignid int not null
tblSupporterMainDetails.campaignid int not null
tblSupporterMainDetails.supporterid int not null
tblCallLogs.supporterid int not null
tblCallLogs.callEnd datetime not null 
```

### 索引：

![索引](../Images/9fe1cd958dca7b9abbf8fb2014b58eaf.png)

更新 2：将索引添加到 tblCallLogs.supporterId 后 - 包含列： callEnd
“慢”查询加速到 40 秒。更新的执行计划：

```
 |--Nested Loops(Inner Join, OUTER REFERENCES:([camps].[campaignID]))
   |--Index Scan(OBJECT:([GOGEN].[dbo].[tblCampaigns].[IX_tblCampaigns_isActive] AS [camps]))
   |--Top(TOP EXPRESSION:((1)))
        |--Nested Loops(Inner Join, OUTER REFERENCES:([sups].[supporterID], [Expr1006]) WITH UNORDERED PREFETCH)
             |--Index Seek(OBJECT:([GOGEN].[dbo].[tblSupporterMainDetails].[AUTOGEN_IX_tblSupporterMainDetails_campaignID] AS [sups]), SEEK:([sups].[campaignID]=[GOGEN].[dbo].[tblCampaigns].[campaignID] as [camps].[campaignID]) ORDERED FORWARD)
             |--Index Seek(OBJECT:([GOGEN].[dbo].[tblCallLogs].[IX_tblCallLogs_supporterid_callend] AS [calls]), SEEK:([calls].[supporterID]=[GOGEN].[dbo].[tblSupporterMainDetails].[supporterID] as [sups].[supporterID]),  WHERE:([GOGEN].[dbo].[tblCallLogs].[callEnd] as [calls].[callEnd]>=[@s2] AND [GOGEN].[dbo].[tblCallLogs].[callEnd] as [calls].[callEnd]<=[@e2]) ORDERED FORWARD) 
```

### 解决方案：

额外的连接实际上并没有直接导致问题，但它显然改变了语句，以便 sql server 为其持有不同的执行计划。
通过将 OPTION(RECOMPILE) 添加到慢语句的末尾，我能够获得预期的快速性能。即<1秒。我仍然不确定这个解决方案是否有效 - 为什么不刷新所有计划工作？这是参数嗅探的经典案例吗？当我知道确切的答案时，我会更新这篇文章 - 或者直到有人能给出明确的答案。感谢@LievenKeersmaekers 和@JNK 到目前为止提供的帮助......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T18:12:44.383

导致解决方案的摘要：

**在 上添加覆盖索引`supporterid, callEnd`。**

这里的假设是优化器**可以**使用这个索引*（相对于 callEnd, supporterid）*来

*   首先加入`tblSupporterMainDetails`并`tblCallLogs`
*   `where`在选择子句中进一步使用它`callEnd`

**添加选项`OPTION(RECOMPILE)`**

*所有 cudo 都向 TiborK 和 Hunchback 解释了优化器使用硬编码常量或变量的区别。*

[性能影响 - 常数值 -vs- 变量](http://social.msdn.microsoft.com/Forums/en-US/transactsql/thread/bd432d12-f296-4f94-9c33-5d2670c7fee7/)

> 当您使用常量时，优化器知道该值，因此它可以根据该值确定选择性（以及可能的索引使用）。当您使用变量时，优化器不知道该值（因此它必须通过一些硬连线值或可能的密度信息）。因此，从技术上讲，这不是参数嗅探，但是您在该主题上找到的任何文章也应该解释常量和变量之间的区别。使用 OPTION(RECOMPILE) 实际上会将变量转换为参数嗅探情况。
> 
> 本质上，常量、变量和参数（可以嗅探）之间存在很大差异。

# iphone - 使用 iPhone/iPad 以 480x480 分辨率录制视频？如何在 Xcode 中设置此分辨率？

> ID：15682624
> 
> 赞同：0
> 
> 时间：2013-03-28T13:05:58.660
> 
> 标签：iphone, xcode, video, resolution, record

问题是：我想知道是否可以用 iPhone/iPad 以 480x480 的分辨率录制视频？这将如何在 Xcode 中以编程方式设置？有任何想法吗？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T12:58:15.677

Try this:

use camera of [GPUImage](https://github.com/BradLarson/GPUImage%5d)

```
.... [[GPUImageMovieWriter alloc] initWithMovieURL:movieURL size:CGSizeMake(480, 480)]; 
```

and for GPUImage [this link](http://www.sunsetlakesoftware.com/2012/02/12/introducing-gpuimage-framework) is also useful.

# c# - 用 AJAX 填充的 DropDown 不会回发它的值？

> ID：15682626
> 
> 赞同：0
> 
> 时间：2013-03-28T13:06:07.260
> 
> 标签：c#, javascript, jquery, asp.net, ajax

我有一个asp Dropdown，我在运行时通过ajax 在客户端上填写。

当我回发到我的代码隐藏时，虽然它没有任何值，也没有选定的值。

我可以将值转储并解析到隐藏字段中，但有更好的方法吗？

谢谢

在后面的代码中：

```
protected void btnEdit_Click(object sender, EventArgs e)
{
    elemSchedule = ScheduleManager.GetSchedule(elemScheduleID);
    KezErrorList errors = new KezErrorList();

    using (var scope = new TransactionScope())
    {
        try
        {
            int priority = int.Parse(ddlPriority.SelectedValue); 
```

在前端：

```
 fillPriorityList("#<%= ddlPriority.ClientID %>",
   $("#<%= txtID.ClientID %>").val(), $("#<%= ddlEmp.ClientID %>").val(),
             $("#<%= txtStartDate.ClientID %>").val(), $("#<%= txtPriority.ClientID %>").val()); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T13:10:43.647

您可以尝试使用 Updatepanel Ajax 而不是 jQuery Ajax，看看您是否仍然面临这个问题？我相信客户端和服务器之间的下拉列表的数据不同步。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T13:08:43.333

（假设您使用的是 asp.net webforms），您需要确保在服务器上也放置与客户端（通过 ajax）相同的值。否则你会得到你所描述的效果。

# java - 使用 Mockito，如何存根返回类型为 void 的方法，该方法在传递某个参数时会引发异常？

> ID：15682631
> 
> 赞同：5
> 
> 时间：2013-03-28T13:06:22.143
> 
> 标签：java, unit-testing, junit, mockito

这是stubbing [void methods with exceptions的主要](http://docs.mockito.googlecode.com/hg/latest/org/mockito/Mockito.html#5)**Mockito**文档。但是，Mockito 文档中的示例存根了无**参数**方法。**如果方法有参数**，如果 a 参数不符合约定，方法抛出*异常怎么办？*

 *****所以对于下面的课程......

```
public class UserAccountManager {    
   /**
    * @throws Exception if user with provided username already exists
    */
    public void createAccount(User user) throws Exception {
        // db access code ...
    }
} 
```

...如何使用**Mockito 模拟****UserAccountManager.createAccount**以便在**某个 User 对象**作为参数传递给该方法时**抛出异常？**

 ******* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-28T13:06:22.143

Mockito[文档](http://docs.mockito.googlecode.com/hg/latest/org/mockito/Mockito.html#5)已经展示了如何使用异常存根无*参数*void 方法的示例。

但是，要**使用参数和异常来存根 void 方法**，请执行以下操作：

由于**createAccount 的返回类型是 void**，因此您必须使用[doThrow](http://docs.mockito.googlecode.com/hg/org/mockito/Mockito.html#12)：

```
User existingUser = ... // Construct a user which is supposed to exist
UserAccountManager accountMng = mock(UserAccountManager.class);    

doThrow(new Exception()).when(accountMng).createAccount(eq(existingUser)); 
```

注意[eq](http://mockito.googlecode.com/svn/branches/1.6/javadoc/org/mockito/Matchers.html#eq%28T%29)匹配器的使用。如果参数的类型（在本例中为 User）本身没有实现*equals*，您也可以尝试使用[refEq](http://mockito.googlecode.com/svn/branches/1.6/javadoc/org/mockito/Matchers.html#refEq%28T%29)匹配器。***********

# ruby-on-rails - 使用单表继承在 Rails 中复制模型实例

> ID：15682634
> 
> 赞同：1
> 
> 时间：2013-03-28T13:06:28.550
> 
> 标签：ruby-on-rails, copy, clone, sti, dup

我有`BaseProject`，`ProjectTemplate`并且`Project`

```
class ProjectTemplate << BaseProject; end
class Project << BaseProject; end 
```

我想将 project_template 属性复制到一个新的项目实例作为默认值。

问题是如果我使用`dup`项目将`type`设置为`ProjectTemplate`

```
project_template = ProjectTemplate.first
project = project_template.dup 
```

我可以手动设置类型

```
project.type = "Project" 
```

但我不喜欢那样，或者我可以这样做

```
project_template = ProjectTemplate.first
project = Project.new( project_template.attributes.except("id", "type") ) 
```

但我读[了这个](https://stackoverflow.com/questions/1262546/copy-model-instances-in-rails)建议反对第二种解决方案的问题。

解决此问题的推荐方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T13:53:00.297

我认为不会有比 , 方法“更好”的`dup`方式`type=`。您可以在 Project 上创建一个类方法，然后可以在需要创建项目时使用：

```
class Project < BaseProject
  def new_from_template(template)
    project = template.dup
    project.type = 'Project'
    project
  end
end 
```

然后你只需要使用这个：

```
project = Project.new_from_template(ProjectTemplate.first) 
```

# ruby - 我可以在黄瓜场景中强制执行什么结果

> ID：15682637
> 
> 赞同：1
> 
> 时间：2013-03-28T13:06:28.873
> 
> 标签：ruby, cucumber, scenarios

使用 ruby​​ / cucumber，我知道您可以显式调用 a `fail("message")`，但是您的其他选择是什么？

我问的原因是我们有 0... 我再说一遍，绝对不能控制我们的测试数据。我们有黄瓜测试来测试我们的数据库中可能有也可能没有用户的边缘案例。我们（出于显而易见的原因）不想丢弃测试，因为它们很有价值；然而，由于我们的数据集无法测试这种边缘情况，它会失败，因为 sql 语句返回一个空数据集。现在，我们只是让这些测试失败，但是如果 sql 语句返回一个空数据集，我希望看到类似“no_data”或类似的东西。所以输出看起来像

```
Scenarios:  100 total (80 passed, 5 no_data, 15 fail) 
```

如果有功能，我愿意使用已经实现的“跳过” `skip("message")`。

我有什么选择，所以我们可以看到，使用当前数据，我们只是没有这些测试的任何测试数据？进行这些手动测试也不是一种选择。它们需要每周通过我们的自动化运行，但以某种方式与故障分开。失败意味着缺陷，no_data found 意味着它不是可测试的条件。这是警告：我们没有测试过这种极端情况和警告：代码损坏之间的区别。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T21:58:51.067

您不能调用“已跳过”，但您当然可以`pending`在有或没有错误消息的情况下调用。我在与您类似的情况下使用过它。除非您在严格模式下运行，否则挂起的场景不会导致任何故障。我遇到的问题是，有时某个步骤会拼写错误，导致 cucumber 将其标记为待处理，因为它与步骤定义不匹配。然后，它在“合法”未决场景的海洋中迷失了，并且在我们发现它之前几周。

# c++ - 调试/发布中的控制台程序

> ID：15682639
> 
> 赞同：0
> 
> 时间：2013-03-28T13:06:33.270
> 
> 标签：c++, winapi, console-application

我使用 C++ 中的 Microsoft Visual Studio 2012 Ultimate IDE 构建了非常简单的 win32 控制台程序；

这是代码：

```
int _tmain(int argc, _TCHAR* argv[])
{
    int i = 0;
    i++;
    return = 0
} 
```

逐行调试代码，我注意到了这一点：

在调试 x64 模式下`argc = 1`，`argv[0] = the program's path`

在发布 x64 模式下`argc = some random large number`，`argv[0] = some random path or simply 0x00000001`

为什么是这样？

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-28T13:22:45.270

发布模式的默认构建选项不会让您在发布模式下进行合理的调试。编译器在发布模式下使用的优化意味着编译后的代码看起来可能与您编写的代码完全不同（但逻辑上相同）。

已经有一个很好的答案，请参阅[如何在发布模式下调试？](https://stackoverflow.com/questions/11253334/how-to-debug-in-release-mode)

# iphone - jquery mobile 和 iphone - 页面底部的空白

> ID：15682642
> 
> 赞同：3
> 
> 时间：2013-03-28T13:06:42.193
> 
> 标签：iphone, jquery-mobile

我有一个 jquery 移动网页。它在桌面浏览器和 android 上看起来都不错。

但在 iphone 的 safari 中，页面底部有一个奇怪的空白区域。.ui-page 的 min-height 看起来有问题，因为空白与 safari 的 title-bar + url-bar 一样高。

有任何想法吗？

编辑：我发现了问题：它是：

```
 html, body {
    overflow-x: hidden !important;
    position: relative !important;
 } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T14:51:09.513

我希望这段代码能解决你的问题。

**[例子](http://jsfiddle.net/Palestinian/KmYgP/)**

```
// Get height of the document
var screen = $(document).height();

// Get height of the header
var header = $('[data-role=header]').height();

// Get height of the footer
var footer = $('[data-role=footer]').height();

// Simple calculation to get the remaining available height
var content = screen - header - footer;

// Change the height of the `content` div
$('[data-role=content]').css({'height': content }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-30T11:41:30.983

问题在于 min.css 中的 min-height 属性。改变

ui-page { min-height:"400px" }

希望它有效:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-02T16:21:23.610

很抱歉在一个老问题上发帖，但我最近遇到了这个问题。

原来这个问题是由人们提供的隐藏地址栏的 JS 函数在某些浏览器中引起的。

如

```
function hideAddressBar(){
  if(document.documentElement.scrollHeight<window.outerHeight/window.devicePixelRatio)
    document.documentElement.style.height=(window.outerHeight/window.devicePixelRatio)+'px';
  setTimeout(window.scrollTo(1,1),0);
}
window.addEventListener("load",function(){hideAddressBar();});
window.addEventListener("orientationchange",function(){hideAddressBar();}); 
```

# excel - 如何锁定包含公式的单元格中的数据，使其无法使用 vba 在 excel 中进行编辑

> ID：15682645
> 
> 赞同：0
> 
> 时间：2013-03-28T13:06:44.407
> 
> 标签：excel, cells, vba

我在 VBA 中处于一个非常奇怪的情况。我是 VBA 新手，几天以来一直在努力解决这个问题。

我想锁定我的 excel 表的前三行和前三列进行编辑。但是，这些单元格包含公式，我不希望最终用户对其进行编辑和更改。所以基本上，我需要的是，单元格应该执行所有操作，但不应该被编辑。怎么能，我在VBA中做到这一点。我正在使用 Excel 2010。

还有一件事，我在顶行有一个按钮，`($B$2:$C$3)`占据了四个单元格。此按钮分配给一个宏，该宏执行清除除我打算锁定的单元格之外的所有单元格中的内容的工作。简而言之，在其他单元格中，用户可以从记事本中导出数据，然后锁定单元格中的公式将完成这项工作。当用户需要导出新的数据集时，他将点击 中的按钮`($B$2:$C$3)`，这将清除现有数据，用户可以从记事本中导入新的数据集。

当我使用

```
Worksheets("Sheet1").Range("B2:C3").Locked = False

Worksheets("Sheet1").Protect UserInterfaceOnly:=True 
```

我的按钮`($B$2:$C$3)`无法正常工作。任何人的任何帮助都将受到强烈要求。提前非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T13:59:51.280

尝试这个：

```
Worksheets("Sheet1").Range("B2:C3").Locked = true

Worksheets("Sheet1").Protect UserInterfaceOnly:=True 
```

这应该可以解决问题。

# javascript - 自执行函数参数

> ID：15682653
> 
> 赞同：0
> 
> 时间：2013-03-28T13:07:03.483
> 
> 标签：javascript, jquery

为了防止prototype.js与jquery发生冲突，我将我的jquery代码包装在以下代码段中：

```
(function($) {

})(jQuery); 
```

如果我正确地理解了这一点，`$ === jQuery`那么在我的功能中将是正确的。`jQuery`但是在这种情况下，实际的“参数”是`$`在我的函数中获取别名吗？

如果我的假设是正确的，我是否需要传递`jQuery`两个地方才能调用它`jQuery`，还是只在函数末尾传递它可以吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T13:08:24.747

在您的 IIFE 中，您可以使用其中一个`$`或`jQuery`- 它们都在范围内。

只有`(jQuery)`实际作为*参数*传递-`$`只是函数*参数*（因此别名为`jQuery`）。

要看到这一点，您的代码*几乎*等同于：

```
var f = function($) {
    ...
};

f(jQuery); 
```

除了你的 IIFE 是一个匿名函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T13:11:37.307

> 如果我正确理解这一点，$ === jQuery 在我的函数中将是正确的。但是在这种情况下，实际的“参数”jQuery 是在我的函数中获取别名 $ 吗？

是的。`$`是参数名称，变量`jQuery`是作为参数传入的 - 它可以是任何表达式。

> 如果我的假设是正确的，我是否需要在两个地方都传递 jQuery 才能将其称为 jQuery，或者只在函数末尾传递它是否可以？

是的，您需要重命名参数。只是它没有多大意义，因为你可以只引用全局`jQuery`变量（除非你打算覆盖它，例如使用不同的 jQuery 版本）——`$`别名只是为了简洁。如果您想避免与 Prototype 混淆，请`jQ`改用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T13:12:58.767

在闭包内部，只`$`可靠地引用 jQuery 库；更具体地说，当时的库版本。

之后加载另一个版本的库时，`$`仍然指向您期望的内容；该`jQuery`符号将被后一个版本替换。

如果您希望`jQuery`在函数内使用别名，则需要在函数参数中重命名`$`为。`jQuery`

# iphone - 添加 .a 文件后架构 armv7 的未定义符号

> ID：15682660
> 
> 赞同：3
> 
> 时间：2013-03-28T13:07:23.720
> 
> 标签：iphone, ios, xcode

我正在尝试使用从某个供应商处收到的 *.a、*.h 文件构建一个小型应用程序。这是我第一次将外部文件添加到项目中。

我添加了文件，我收到了这些错误。

> 架构 armv7 的未定义符号：
> 
> “_vDSP_fft_zropD”，引用自：_fft_hr_estimation in libmyTrekSDK_armv7.a(hr_calc.o) “_vDSP_vclrD”，引用自：_fft_hr_estimation in libmyTrekSDK_armv7.a(hr_calc.o) “_vDSP_vdbconD”，引用自：_fft_hr_estimation(hr_calcaSDK_armv7.o. ) “_vDSP_vmulD”，引用自：libmyTrekSDK_armv7.a中的_fft_hr_estimation(hr_calc.o) “_vDSP_hamm_windowD”，引用自：libmyTrekSDK_armv7.a中的_fft_hr_init(hr_calc.o) “_vDSP_zaspecD”，引用自：libmyTrekSDK_armv7.a中的_fft_hr_estimation( o) “_OBJC_CLASS_$_EAAccessoryManager”，引用自：libmyTrekSDK_armv7.a(hrMonitor.o) 中的 objc-class-ref，“_EAAccessoryDidDisconnectNotification”，引用自：- [HRMonitor startup] in libmyTrekSDK_armv7.a(hrMonitor.o) "_vDSP_create_fftsetupD"，引用自：_fft_hr_init in libmyTrekSDK_armv7.a(hr_calc.o) "_EAAccessoryDidConnectNotification"，引用自：-[HRMonitor startup] in libmyTrekSDK_armv7.a(hrMonitor. o）“_OBJC_CLASS_$_EASession”，引用自：libmyTrekSDK_armv7.a(hrMonitor.o)中的objc-class-ref，“_vDSP_ctozD”，引用自：libmyTrekSDK_armv7.a(hr_calc.o)中的_fft_hr_estimation，引用自：_fft_hr_estimation在 libmyTrekSDK_armv7.a(hr_calc.o) "_vDSP_destroy_fftsetupD" 中，引用自：libmyTrekSDK_armv7.a(hr_calc.o) 中的 _fft_hr_free ld：未找到架构 armv7 的符号 clang：错误：链接器命令失败，退出代码为 1（使用 -v 查看调用）

到目前为止，我已经尝试过：（在其他帖子中提到）

1.  我已确保 *.a 文件包含在*Link Binary With Library*中。
2.  试图将 C++ 语言方言和 C++ 标准库更改为编译器默认值。

更多信息：

1.  这些文件位于项目文件夹中。
2.  我使用的是 iPhone 4S v.6.1.3，项目的部署目标是 iOS 6.1。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2017-08-07T13:51:22.293

只是为了将来我得到了`"_OBJC_CLASS_$_EASession", referenced from:`错误。它是通过添加`ExternalAccessory.framework`到`Targets > myApp > Build Phases > Link Binary with Libraries`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T13:13:51.613

1.  检查框架搜索路径/库搜索路径中的库路径是否正确
2.  检查您的 lib 源所需的其他链接器标志

[请参阅此答案以获取更多详细信息](https://stackoverflow.com/a/6429568/1357774)

# unity3d - 在 Unity Physics.gravity 中，x 和 z 方向不能在一个脚本中工作

> ID：15682664
> 
> 赞同：0
> 
> 时间：2013-03-28T13:07:29.643
> 
> 标签：unity3d

我有一个球体，我想根据倾斜（Input.acceleration）改变重力（在 X 和 Z 中）。但它不起作用。为了改变重力，我使用以下代码：

```
if((Input.acceleration.x) > 0)
    {
        Physics.gravity = new Vector3(9.81f, 0, 0);
    }
    if((Input.acceleration.x) < 0)
    {
        Physics.gravity = new Vector3(-9.81f, 0, 0);
    } 
```

对于 Z：`if((Input.acceleration.y) > 0) { Physics.gravity = new Vector3(0, 0, 9.81f); } if((Input.acceleration.y) < 0) { Physics.gravity = new Vector3(0, 0, -9.81f); }`

我在 FixedUpdate 函数中编写这些代码。谁能告诉我我在哪里犯错？我也是统一的新手。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T11:48:50.987

如果我从评论中正确理解，您的问题是重力正在起作用，但一次只能在一个轴（x 或 z）上。为了让重力一次同时作用于多个轴，请尝试以下代码：

```
Vector3 newGravity = Physics.gravity;
if((Input.acceleration.x) > 0)
    {
        newGravity.x = 9.81f;
    }
else if((Input.acceleration.x) < 0)
    {
        newGravity.x = -9.81f;
    }
else
    {
        newGravity.x = 0;
    }

if((Input.acceleration.y) > 0)
    {
        newGravity.y = 9.81f;
    }
else if((Input.acceleration.y) < 0)
    {
        newGravity.y = -9.81f;
    }
else
    {
        newGravity.y = 0;
    }

if((Input.acceleration.z) > 0)
    {
        newGravity.z = 9.81f;
    }
else if((Input.acceleration.z) < 0)
    {
        newGravity.z = -9.81f;
    }
else
    {
        newGravity.z = 0;
    }

Physics.gravity = newGravity; 
```

然而，即使是很小的倾斜，这也会产生最大的重力。如果您希望重力根据倾斜角度逐渐增加，则需要将 9.81f 乘以一个变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T20:11:13.833

我[对此的评价为零](http://forum.unity3d.com/threads/52083-resolved-accelerometer-to-affect-gravity-or-world-rotation)，而它又是从 Unity iOS 示例中提取的（链接在我链接的论坛帖子中），该示例似乎不再存在：

```
public float force = 9.8f;
void FixedUpdate ()
{
    Vector3 dir = new Vector3(Input.acceleration.x,0.0f,Input.acceleration.y);
    Physics.gravity = dir * force;
} 
```

# python - 如何在 PyQt4 中向 QMessageBox 添加自定义按钮

> ID：15682665
> 
> 赞同：11
> 
> 时间：2013-03-28T13:07:29.930
> 
> 标签：python, pyqt

我正在编写一个需要 QMessageBox 中的自定义按钮的应用程序。我设法在 QT 设计器中创建了一个示例，如下所示。

![在此处输入图像描述](../Images/6e60180a0f52c791e04e127eb0c0823a.png)

我想在 QMessageBox 中执行此操作。

我正在使用 python 2.6.4 和 PyQt4。拜托，任何人都可以帮忙。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-03-28T14:06:24.693

这是一个从头开始构建自定义消息框的示例。

```
import sys
from PyQt4 import QtCore, QtGui

class Example(QtGui.QDialog):
    def __init__(self, parent=None):
        super(Example, self).__init__(parent)

        msgBox = QtGui.QMessageBox()
        msgBox.setText('What to do?')
        msgBox.addButton(QtGui.QPushButton('Accept'), QtGui.QMessageBox.YesRole)
        msgBox.addButton(QtGui.QPushButton('Reject'), QtGui.QMessageBox.NoRole)
        msgBox.addButton(QtGui.QPushButton('Cancel'), QtGui.QMessageBox.RejectRole)
        ret = msgBox.exec_()

if __name__ == "__main__":
    app = QtGui.QApplication(sys.argv)
    ex = Example()
    ex.show()
    sys.exit(app.exec_()) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-08-17T15:12:33.060

[manuel-gutierrez](https://stackoverflow.com/users/1279003/manuel-gutierrez)，你为什么要从 QDilaog 继承？您可以从 QMessageBox 继承。它更简单，代码更少

```
import sys
from PyQt4.QtGui import QMessageBox, QPushButton, QApplication
from PyQt4.QtCore import Qt

class ErrorWindow(QMessageBox):
    def __init__(self, parent=None):
        QMessageBox.__init__(self, parent)
        self.setWindowTitle("Example")

        self.addButton(QPushButton("Yes"), QMessageBox.YesRole )
        self.addButton(QPushButton("No"), QMessageBox.NoRole)
        self.addButton(QPushButton("Cancel"), QMessageBox.RejectRole)

if __name__ == "__main__":
    app = QApplication(sys.argv)
    ex = ErrorWindow()
    ex.setText("some error")
    ex.show()

    sys.exit(app.exec_()) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-10-14T09:20:25.023

标准 QMessageBox “对响应进行解释”，被接受、拒绝或取消。这是一个允许任意按钮的版本，尽可能多的，并将解释留给用户。而且它稍微简化了源代码。参数“buttons”给出了一个文本列表，这使得按钮。返回值是点击按钮的文本。所以用户可以用它做他想做的事。注意：这可能违反 UI 标准，因此不太健壮，但是，嘿。注意 2：由于是 2021 年，我使用 PyQt5 和 python 3.7 我刚刚发布了这个，以防有人更喜欢这种更通用的方法。

```
#!/usr/bin/python3
# -*- coding: utf-8 -*-

""" A more generic, a bit simplified message box also known as 'popup' """

from PyQt5 import QtWidgets as QW  

class Popup(QW.QMessageBox):
    def __init__(
            self, 
            title, 
            text, 
            buttons = ["Ok"]
        ):

        super(Popup, self).__init__()
        self.setWindowTitle(title)
        self.setText(text)
        self.buttons = buttons
        for txt in self.buttons:
            b = QW.QPushButton(txt)
            self.addButton(b, QW.QMessageBox.NoRole)

    def do(self):
        answer = self.exec_()
        text = self.buttons[answer]
        return text

if __name__ == "__main__": # test

    class Tester(QW.QWidget):
        def __init__(self):
            super(Tester, self).__init__()

            btn = QW.QPushButton("do it")
            btn.clicked.connect(self.klick)

            layout = QW.QHBoxLayout(self)
            layout.addWidget(btn)

        def klick(self, text):
            r = Popup(
                "choose a letter", 
                "What is your favorite\nLetter\namong a to e ?", 
                buttons = "a,b,c,d,e".split(","))

            print("result = ",r.do())

    import sys
    app = QW.QApplication(sys.argv)
    widget = Tester()
    widget.setGeometry(400,400,100,100)
    widget.show()
    sys.exit(app.exec_()) 
```

# asp.net-mvc - MVC 查询字符串 - 多参数集合

> ID：15682668
> 
> 赞同：0
> 
> 时间：2013-03-28T13:07:35.380
> 
> 标签：asp.net-mvc

我正在尝试从查询字符串中获取可选的字符串列表，例如，

```
http://host/test/arg?mylist=cat&mylist=dog 
```

据我所知，它应该像在我的控制器中声明一个集合一样简单，例如，

```
public string GetTest(string uriArg, ICollection<string> mylist) 
```

当我尝试这个时，`mylist`它是空的。

如果我将控制器切换到

```
public string GetTest(string uriArg, string mylist) 
```

然后 mylist 以`"(Collection)"`.

[http://haacked.com/archive/2008/10/23/model-binding-to-a-list.aspx](http://haacked.com/archive/2008/10/23/model-binding-to-a-list.aspx)等文章说它应该像在这里使用 ICollection 一样简单。为什么这不起作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T22:48:46.640

我无法重现您描述的问题。这应该有效。

1.  使用默认 Internet 模板创建新的 ASP.NET MVC 3 应用程序
2.  修改 HomeController 使其看起来像这样：

    ```
    public class HomeController : Controller
    {
        public ActionResult Index(ICollection<string> myList)
        {
            return Content(string.Join(",", myList));
        }
    } 
    ```

3.  运行应用程序并导航到`/home/index?mylist=cat&mylist=dog`

4.  正如预期`cat,dog`的那样显示在屏幕上。

# java - 如何打印出输入或 JTextFiled

> ID：15682674
> 
> 赞同：0
> 
> 时间：2013-03-28T13:07:53.597
> 
> 标签：java, jtextfield, printstream

作为我程序的一部分，我只想打印出用户在 jTextField 中输入的内容

这就是我所做的，但根本不起作用。

```
JTextField myInput = new JTextField();
String word = myInput.getText();

myInput.addActionListener(new ActionListener(){
public void actionPerformed(ActionEvent e) 
{
System.out.print(word);
}

}); 
```

任何的想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T13:09:19.663

在 actionlistener 中，您需要从文本字段中检索值。

```
 System.out.print(myInput.getText()); 
```

目前，您得到一个空值，因为在您调用 getText() 时，文本字段中没有任何内容，因为用户没有时间输入内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T13:09:43.377

您没有更新 中的文本 ( `word`) `actionPerformed`，因此它保持不变。尝试：

```
myInput.addActionListener(new ActionListener(){
public void actionPerformed(ActionEvent e) 
{
System.out.print(myInput.getText());
} 
```

因此，您甚至根本不需要申报`word`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T13:10:09.400

```
final JTextField myInput = new JTextField();

myInput.addActionListener(new ActionListener(){
    public void actionPerformed(ActionEvent e) {
        System.out.print(myInput.getText());
    }
}); 
```

`myInput.getText()`在外部调用`actionListener`会将空分配`string`给`word`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-28T13:11:17.490

在执行的操作方法中取第二行

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-28T13:29:31.467

谢谢大家的回答。事实上，你很好，我只需要将变量作为最终变量。我仍然不知道为什么要添加它，但它现在可以工作了。我希望'final'以后不会有任何问题。

# c# - 使用 2Darrays 在 XNA 中绘制棋盘游戏 Ludo

> ID：15682677
> 
> 赞同：0
> 
> 时间：2013-03-28T13:08:00.153
> 
> 标签：c#, xna-4.0, sprite, spritebatch

我是 C# 和 XNA 的初学者，目前正在尝试制作棋盘游戏 LUDO。我以前做过一些 java 编程，在面向对象编程中很常见。所以我现在卡在的事情是绘制“板”的精灵。

我在 MS Paint 中制作了我自己使用的所有精灵，所有不同的精灵（26 个不同的精灵）都具有相同的大小 45px X 45px。我在想的是制作一个包含数字的 2Darray，这些数字将引用纹理数组中的特定精灵。示例：这是我正在设置的板类型的链接：http: [//upload.wikimedia.org/wikipedia/commons/thumb/6/6c/Klassisk_ludo-spill.JPG/220px-Klassisk_ludo-spill.JPG](http://upload.wikimedia.org/wikipedia/commons/thumb/6/6c/Klassisk_ludo-spill.JPG/220px-Klassisk_ludo-spill.JPG)

我的 2Darray 设置如下：它从板的顶部开始，然后从左到右。所以这就是我制作 2Darray 的方式：

```
//Create the full grid of the board, where the numbers refer to the sprites that is supposed to be
    // placed here. the array starts from the top of the bord from left to right and then goes downwards.
    int[,] myArray = new  int[,] {{3,3,3,3,3,3,4,4,4,0,0,0,0,0,0},
                                  {3,24,25,23,25,3,4,0,0,0,12,13,12,13,0},
                                  {3,22,23,22,23,3,4,0,4,0,10,11,10,11,0},
                                  {3,24,25,23,25,3,4,0,4,0,12,13,12,13,0},
                                  {3,22,23,22,23,3,4,0,4,0,10,11,10,11,0},
                                  {3,3,3,3,3,3,4,0,4,0,0,0,0,0,0},
                                  {4,3,4,4,4,4,6,0,5,4,4,4,4,4,4},
                                  {4,3,3,3,3,3,3,9,1,1,1,1,1,1,4},
                                  {4,4,4,4,4,4,7,2,8,4,4,4,4,1,4},
                                  {2,2,2,2,2,2,4,2,4,1,1,1,1,1,1},
                                  {2,20,21,20,21,2,4,2,4,1,16,17,16,17,1},
                                  {2,18,19,18,19,2,4,2,4,1,14,15,14,15,1},
                                  {2,20,21,20,21,2,4,2,4,1,16,17,16,17,1},
                                  {2,18,19,18,19,2,2,2,4,1,14,15,14,15,1},
                                  {2,2,2,2,2,2,4,4,4,1,1,1,1,1,1}}; 
```

就像我说的，这些数字应该对应于另一个纹理数组中的特定精灵。以下是什么数字对应什么精灵的概述：

```
textureArray = newTexture2D[26];
0 = blueblock;
1 = redblock;
2 = yellowBlock;
3 = greenBlock;
4 = whiteBlock;
5 = blueredBlock;
6 = greenblueBlock;
7 = greenyellowBlock;
8 = yellowredBlock;
9 = xcenterBlock;
10 = BlueBottomLeftBlock;
    11 = BlueBottomRightBlock;
    12 = BlueTopLeftBlock;
    13 = BlueTopRightBlock;
    14 = RedBottomLeftBlock;
    15 = RedBottomRightBlock;
    16 = RedTopLeftBlock;
    17 = RedTopRightBlock;
    18 = YellowBottomLeftBlock;
    19 = YellowBottomRightBlock;
    20 = YellowTopLeftBlock;
    21 = YellowTopRightBlock;
    22 = GreenBottomLeftBlock;
    23 = GreenBottomRightBlock;
    24 = GreenTopLeftBlock;
    25 = GreenTopRightBlock; 
```

目前我已经在我的后台类中创建了一个内容管理器，如下所示：

```
// ContentManager that is loadedes textures and position for the objects in to game1
    public void LoadContent(ContentManager content)
    {
        this._BlueBlock = content.Load<Texture2D>("blue-block");
        this._RedBlock = content.Load<Texture2D>("red-block");
        this._YellowBlock = content.Load<Texture2D>("yellow-block");
        this._GreenBlock = content.Load<Texture2D>("green-block");
        this._WhiteBlock = content.Load<Texture2D>("white-block");
        this._BlueRedBlock = content.Load<Texture2D>("blue-red-block");
        this._GreenBlueBlock = content.Load<Texture2D>("green-blue-block");
        this._GreenYellowBlock = content.Load<Texture2D>("green-yellow-block");
        this._YellowRedBlock = content.Load<Texture2D>("yellow-red-block");
        this._XCenterBlock = content.Load<Texture2D>("x-center-block");
        this._BlueBottomLeftBlock = content.Load<Texture2D>("blue-bottomleft-block");
        this._BlueBottomRightBlock = content.Load<Texture2D>("blue-bottomright-block");
        this._BlueTopLeftBlock = content.Load<Texture2D>("blue-topleft-block");
        this._BlueTopRightBlock = content.Load<Texture2D>("blue-topright-block");
        this._RedBottomLeftBlock = content.Load<Texture2D>("red-bottomleft-block");
        this._RedBottomRightBlock = content.Load<Texture2D>("red-bottomright-block");
        this._RedTopLeftBlock = content.Load<Texture2D>("red-topleft-block");
        this._RedTopRightBlock = content.Load<Texture2D>("red-topright-block");
        this._YellowBottomLeftBlock = content.Load<Texture2D>("yellow-bottomleft-block");
        this._YellowBottomRightBlock = content.Load<Texture2D>("yellow-bottomright-block");
        this._YellowTopLeftBlock = content.Load<Texture2D>("yellow-topleft-block");
        this._YellowTopRightBlock = content.Load<Texture2D>("yellow-topright-block");
        this._GreenBottomLeftBlock = content.Load<Texture2D>("green-bottomleft-block");
        this._GreenBottomRightBlock = content.Load<Texture2D>("green-bottomright-block");
        this._GreenTopLeftBlock = content.Load<Texture2D>("green-topleft-block");
        this._GreenTopRightBlock = content.Load<Texture2D>("green-topright-block");

    } 
```

这就是我偶然发现我的主要问题的地方。我应该像这样加载内容吗？如果是这样，我应该如何引用 textureArray 中的纹理，以便数字与它们应该在我的 2DArray 中具有的纹理相对应？

我正在考虑制作一个嵌套的 for 循环，将所有精灵放在正确的位置，因为板是 15 X 15 精灵（总共 225 个）。我还应该在我的“public void Draw(SpriteBatch spriteBatch)”方法中使用 foreach 语句吗？

我真的希望有人能给我一些指示，他们将不胜感激！

此致！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T20:02:17.573

I have coded it for fun without bitmaps... :)

[https://dl.dropbox.com/u/59983887/ludo.rar](https://dl.dropbox.com/u/59983887/ludo.rar)

```
 protected override void Draw( GameTime gameTime ) {
        GraphicsDevice.Clear( Color.CornflowerBlue );

        var ss = 3 * BLOCK_TOTAL_SIZE + BLOCK_GAP;
        var bounds = new Rectangle( S, S, ss, ss );                         // Triangle background
        spriteBatch.Begin( SpriteSortMode.Deferred, BlendState.Opaque );
        spriteBatch.Draw( white, bounds, BackColor );
        spriteBatch.End( );

        Matrix transform = Matrix.Identity;

        for (int i = 0; i < 4; i++) {
            // Player area by color
            spriteBatch.Begin( SpriteSortMode.Deferred, BlendState.Opaque, null, null, null, null, transform );
            DrawPlayerAreaByColor( colors[i] );
            spriteBatch.End( );

            transform = Matrix.CreateRotationZ( -MathHelper.PiOver2 ) * Matrix.CreateTranslation( 0, BLOCK_TOTAL_SIZE * 15 - BLOCK_GAP, 0 ) * transform; 

            // Triangle
            for (int j = 0; j < vertex.Length; j++) vertex[j].Color = colors[i];
            basicEffect.World = Matrix.CreateRotationZ( -i * MathHelper.PiOver2 ) * Matrix.CreateTranslation( bounds.Center.X, bounds.Center.Y, 0 );
            basicEffect.CurrentTechnique.Passes[0].Apply( );
            GraphicsDevice.DrawUserPrimitives<VertexPositionColor>( PrimitiveType.TriangleList, vertex, 0, 1 );
        }

        base.Draw( gameTime );
    }

    void DrawPlayerAreaByColor( Color color ) {
        Rectangle bounds = new Rectangle( 0, 0, S, S );
        spriteBatch.Draw( white, bounds, color );                       // Big area
        bounds.Inflate( -BLOCK_SIZE, -BLOCK_SIZE );
        spriteBatch.Draw( white, bounds, BackColor );                   // Background inside big area
        bounds.Inflate( -BLOCK_GAP, -BLOCK_GAP );
        spriteBatch.Draw( white, bounds, Color.White );                 // White area inside big area

        for (int x = 0; x < 2; x++)
            for (int y = 0; y < 2; y++) {
                var mw = bounds.Width - 2 * BLOCK_SIZE - 4 * BLOCK_GAP;
                var mh = bounds.Height - 2 * BLOCK_SIZE - 4 * BLOCK_GAP;
                mw /= 3;
                mh /= 3;
                var mb = new Rectangle( bounds.X + mw, bounds.Y + mh, BLOCK_TOTAL_SIZE, BLOCK_TOTAL_SIZE );
                mb.X += x * ( mw + BLOCK_SIZE + 2 * BLOCK_GAP );
                mb.Y += y * ( mh + BLOCK_SIZE + 2 * BLOCK_GAP );

                spriteBatch.Draw( white, mb, BackColor );
                mb.Inflate( -BLOCK_GAP, -BLOCK_GAP );
                spriteBatch.Draw( white, mb, color );
            }

        bounds = new Rectangle( 0, S, S, 3 * BLOCK_TOTAL_SIZE + BLOCK_GAP );
        spriteBatch.Draw( white, bounds, BackColor );
        for (int x = 0; x < 6; x++)
            for (int y = 0; y < 3; y++) {
                bounds = new Rectangle( x * BLOCK_TOTAL_SIZE, S + BLOCK_GAP + y * BLOCK_TOTAL_SIZE, BLOCK_SIZE, BLOCK_SIZE );
                spriteBatch.Draw( white, bounds, ( x == 1 && y == 0 || x > 0 && y == 1 ) ? color : Color.White );
            }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T12:14:59.410

很好，我最终在我问这个问题的那天晚些时候自己解决了这个问题。这就是我的代码的样子：

```
namespace Ludo 
```

{类背景{

```
 //Create the full grid of the board, where the numbers refer to the sprites that is supposed to be
    // placed here. the array starts from the top of the bord from left to right and then goes downwards.
    int[,] myArray = new  int[,] {
        {3,3,3,3,3,3,4,4,4,0,0,0,0,0,0},
        {3,24,25,23,25,3,4,0,0,0,12,13,12,13,0},
        {3,22,23,22,23,3,4,0,4,0,10,11,10,11,0},
        {3,24,25,23,25,3,4,0,4,0,12,13,12,13,0},
        {3,22,23,22,23,3,4,0,4,0,10,11,10,11,0},
        {3,3,3,3,3,3,4,0,4,0,0,0,0,0,0},
        {4,3,4,4,4,4,6,0,5,4,4,4,4,4,4},
        {4,3,3,3,3,3,3,9,1,1,1,1,1,1,4},
        {4,4,4,4,4,4,7,2,8,4,4,4,4,1,4},
        {2,2,2,2,2,2,4,2,4,1,1,1,1,1,1},
        {2,20,21,20,21,2,4,2,4,1,16,17,16,17,1},
        {2,18,19,18,19,2,4,2,4,1,14,15,14,15,1},
        {2,20,21,20,21,2,4,2,4,1,16,17,16,17,1},
        {2,18,19,18,19,2,2,2,4,1,14,15,14,15,1},
        {2,2,2,2,2,2,4,4,4,1,1,1,1,1,1}};

    //Create array that will gives the numbers in myArray the right sprites.
    Texture2D[] textureArray = new Texture2D[26];

    // ContentManager that is loadedes textures and position for the objects in to game1
    public void LoadContent(ContentManager content)
    {

        // Binds the places in textureArray with the right sprites
        textureArray[0] = content.Load<Texture2D>("blue-block");
        textureArray[1] = content.Load<Texture2D>("red-block");
        textureArray[2] = content.Load<Texture2D>("yellow-block");
        textureArray[3] = content.Load<Texture2D>("green-block");
        textureArray[4] = content.Load<Texture2D>("white-block");
        textureArray[5] = content.Load<Texture2D>("blue-red-block");
        textureArray[6] = content.Load<Texture2D>("green-blue-block");
        textureArray[7] = content.Load<Texture2D>("green-yellow-block");
        textureArray[8] = content.Load<Texture2D>("yellow-red-block");
        textureArray[9] = content.Load<Texture2D>("x-center-block");
        textureArray[10] = content.Load<Texture2D>("blue-bottomleft-block");
        textureArray[11] = content.Load<Texture2D>("blue-bottomright-block");
        textureArray[12] = content.Load<Texture2D>("blue-topleft-block");
        textureArray[13] = content.Load<Texture2D>("blue-topright-block");
        textureArray[14] = content.Load<Texture2D>("red-bottomleft-block");
        textureArray[15] = content.Load<Texture2D>("red-bottomright-block");
        textureArray[16] = content.Load<Texture2D>("red-topleft-block");
        textureArray[17] = content.Load<Texture2D>("red-topright-block");
        textureArray[18] = content.Load<Texture2D>("yellow-bottomleft-block");
        textureArray[19] = content.Load<Texture2D>("yellow-bottomright-block");
        textureArray[20] = content.Load<Texture2D>("yellow-topleft-block");
        textureArray[21] = content.Load<Texture2D>("yellow-topright-block");
        textureArray[22] = content.Load<Texture2D>("green-bottomleft-block");
        textureArray[23] = content.Load<Texture2D>("green-bottomright-block");
        textureArray[24] = content.Load<Texture2D>("green-topleft-block");
        textureArray[25] = content.Load<Texture2D>("green-topright-block");

    }
    // Method that draws the sprites to the screen.
    public void Draw(SpriteBatch spriteBatch)
    {
        for (int y = 0; y < 15; y++) {
            for (int x = 0; x < 15; x++) {
                spriteBatch.Draw(textureArray[myArray[x, y]], new Rectangle(x * 45, y * 45, 45, 45), Color.White);
            }
        }

    }
} 
```

}

# bash - 使用 bash 在日志文件中搜索值

> ID：15682683
> 
> 赞同：0
> 
> 时间：2013-03-28T13:08:21.407
> 
> 标签：bash, file-io, scripting, logparser

我正在尝试创建一个脚本，该脚本将查询一个（或多个）日志文件以获取特定值，并使用给定的值不仅打印出它所在的行，而且打印出它周围的所有行，只要它们不是空白的。

基本上我想像这样运行它：

logSearch.sh -f FilenameToSearch.log -s SearchTerm -b "20130323 12:00:00" e-"20130323 14:21:00"

FilenameToSearch.log 包含以下内容：

```
03-10-2013 12:11:30
JunkData
JunkData

03-23-2013 12:00:00
JunkStill
Since
ValueLooking
ForIs
NotHere

03-23-2013 12:10:00
NotJunk
SearchTerm
ValueHere
NeedTo
GetAll
Yay

03-23-2013 12:10:30
BackToJunk
Blah

03-23-2013 12:11:00
SearchTerm
MorePrint

03-23-2013 15:10:00
SearchTerm
ButAfterGiven
Time
So
Junk 
```

它将搜索日志文件并在给定的日期时间值之间找到与第一个搜索词匹配的任何内容（它们是可选的）。

因此它将返回以下内容并将其通过管道传输到一个新文件：

```
03-23-2013 12:10:00
NotJunk
SearchTerm
ValueHere
NeedTo
GetAll
Yay

03-23-2013 12:11:00
SearchTerm
MorePrint 
```

我这里有基本代码，我还没有真正处理数据，所以你们都可以提供帮助的任何东西都会非常感激！我将在整个星期内继续努力，并随着时间的推移进一步充实它，但你有任何想法（因为你们可能更擅长编写这些脚本）都会很有用

# 代码

```
#!/bin/bash -eu

sytax="Proper invocation is logSearch.sh -s search-term -f filename-directory [b - datetimevalue1] [e - datetimevalue2]";
necVal="Error. -s and -f need to be specified";

usage () { echo $sytax; exit 1;}
error () { echo $necVal; usage; exit 2;}

options='s:f:b:e:x'

while getopts $options option
do
    case $option in

        s)
            searchFor=$OPTARG
            ;;
        f)
            inFilesLike=$OPTARG
            ;;
        b)
            betweenThis=$OPTARG
            ;;
        e)
            andThis=$OPTARG
            ;;
        *)
            usage;
            ;;
    esac
done

shift $(($OPTIND - 1))

if [ -z ${searchFor:-} ] || [ -z ${inFilesLike:-} ]
then
    error;
else
    echo "Search for : " $searchFor;
    echo "in files like: " $inFilesLike;
fi

if [ ! -z ${betweenThis:-} ]
then
    echo "Starting search at first occurance of: " $betweenThis;
else
    echo "No value to start search from. Beginning from the start of file(s).";
fi

if [ ! -z ${andThis:-} ]
then
    echo "Ending search at first occurance of: " $andThis;
else
    echo "No value to end search at. Will search to the end of file(s).";
fi

#BEGIN CODE TO SEARCH THROUGH $INFILESLIKE FILES FOR PARTICULAR VALUES 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T14:21:26.430

这是我在您的示例输入上测试的 Python 3 程序：

```
#!/usr/bin/env python

import re

# TODO: use argparse to get these values from the command line
filename = "t.txt"
term = "SearchTerm"
start = "20130323 12:00:00"
end = "20130323 14:21:00"

lineCache = None # will be a list once we find the start time
lineMatch = False # will be True when the search term was found in a block

for line in open(filename):
    match = re.match('(\d{2})-(\d{2})-(\d{4})( \d{2}:\d{2}:\d{2})\n', line)
    if match: # got a timestamp
        time = ''.join(map(match.group, [3, 1, 2, 4])) # "YYYYMMDD HH:MM:SS"
        if time > end:
            break;
        if time >= start:
            lineCache = [line]
            lineMatch = False
    elif lineCache is not None: # got a regular text line
        if term in line:
            lineMatch = True
            print(''.join(lineCache), end='') # print earlier lines from block
            lineCache = []
        if lineMatch:
            print(line, sep='')
        else: # haven't found the search term yet; store line in case we do
            lineCache.append(line) 
```

# sql - SSDT 无法加载 Package.Dtsx

> ID：15682690
> 
> 赞同：0
> 
> 时间：2013-03-28T13:08:32.320
> 
> 标签：sql, sql-server, ssis, sql-server-2012-datatools

我有以下环境来开发 SSIS 包：Windows Server 2008 R2，安装了 2 个 SQL Server 2012 实例（Express 和 Standard）并安装了 SSDT。SQL Server Express 实例的服务已停止。

当我启动 SSDT 以创建新的 SSIS 项目时，出现以下错误：“Microsoft Visual Studio 无法加载此文档：在 SQL Server Data Tools (SSDT) 中设计集成服务包。SSDT 必须由其中之一安装SQL Server 2012 的版本：标准。企业。开发人员或评估。要安装 SSDT，请运行 SQL Server 安装程序并选择 SQL Server Data Tools。"。

问题是……这台机器上安装了SQL Server 2012 Standard！我尝试重新安装 SSDT，但错误仍然存​​在。

我相信卸载 SQL Express 可能会解决问题。但 ：

*   这会解决这个问题吗？
*   如何卸载特定实例？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T13:57:17.393

要卸载实例，请转到控制面板，卸载程序。

转到“Microsoft SQL Server 2012 (64)”——取决于您安装的内容。

单击以卸载它，将打开一个小窗口，其中包含 3 个选项，选择“删除”。

将运行“设置支持规则”窗口并检查一些内容，单击“确定”。

将出现一个新窗口，您可以在其中选择要删除的实例。选择它并继续卸载它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-21T22:08:06.853

我遇到了这个错误，不幸的是不得不卸载我的 Express 实例，就像海报说的那样。我卸载了所有 SQL Server 2012（完整实例和 Express 实例），然后使用所有数据工具和报告服务重新安装了完整实例，错误消失了。

# php - PHP中的C#正则表达式？

> ID：15682694
> 
> 赞同：0
> 
> 时间：2013-03-28T13:08:42.570
> 
> 标签：php

我希望我的 PHP 程序从 html 文件中提取所有 URL。当我编写一个 C# 程序来提取 html 文件中的所有 URL 时，我使用了以下正则表达式。然后将“http”部分添加到开头以获得完整的 URL 列表。你能告诉我如何使用我在以下代码中使用的正则表达式来处理 PHP 吗？

```
 List<string> links = new List<string>();
        Regex regEx;
        Match matches;

        regEx = new Regex("href=\"http\\s*(?:\"(?<1>[^\"]*)\"|(?<1>\\S+))\"", RegexOptions.IgnoreCase | RegexOptions.Compiled);
        for (matches = regEx.Match(downloadString); matches.Success; matches = matches.NextMatch())
        {
            links.Add("http" + matches.Groups[1].ToString());
        } //Add all the URLs to a list and return the list

        return links; 
```

**如果您能举个例子给我看，我将不胜感激：**

* * *

@julian 非常感谢您的详细解释。我稍微修改了代码并按以下方式使用它：

```
$html = file_get_contents('http://mysmallwebpage.com/');
$dom = new DOMDocument;
$dom->loadHTML($html);
$links = $dom->getElementsByTagName('a');

foreach ($links as $link)
{      
    $returnLink =  $link->getAttribute('href');
echo "<br />",$returnLink;
} 
```

但结果没有显示确切的 URL 地址。它输出如下内容：

```
/nmsd-gallery/
/home/?currentPage=3
javascript:noop(); 
```

你能告诉我是否有办法只获取 URL 地址吗？如： `http://mysmallwebpage.com/`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T13:15:18.583

尝试使用 DOM 框架提取 URL

```
 $html = file_get_contents($aktPage);
    $dom = new DOMDocument;
    $dom->loadHTML($html);
    $links = $dom->getElementsByTagName('a');

    foreach ($links as $link)
    {      
            $returnLinks[] =  $link->getAttribute('href');
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T13:56:36.557

嗯，这是页面的内部链接..在这种情况下，您必须过滤 js 链接（或其他不需要的文件，如图像等）并添加 HTTP_REFERER 作为前缀

...

```
foreach ($links as $link)
{      
    $returnLink =  $link->getAttribute('href');
    if (stripos($returnLink,"javascript")!=false) // or other unwanted calls
    {
        if (stripos($returnLink,"http://") ==false)
        {
            $retunLink = $_SERVER['HTTP_REFERER'].$returnLink
        }
    } 
echo "<br />++",$returnLink;
} 
```

还有更多的案例要检查..但我认为这给了你一个例子......

# java - SharedPreferences 无法加载

> ID：15682697
> 
> 赞同：0
> 
> 时间：2013-03-28T13:08:47.573
> 
> 标签：java, android

我想在 SharedPreferences 中保存我的应用程序暂停时的状态，并在调用 onResume 时加载它：

在我的 onPause 方法中：

```
@Override
protected  void onPause()
{
    super.onPause();
    SharedPreferences prefs = getSharedPreferences("MyPrefName", 0);
    if(socket!=null && socket.isConnected())
    {
        releaseOutputSocket();
        prefs.edit().putString("started", "started");
    }
    else
        prefs.edit().putString("started", "stoped");
    boolean res = prefs.edit().commit(); //res == true
} 
```

在 onResume 方法中，我这样做：

```
@Override
public void onResume()
{
    super.onResume();
    SharedPreferences prefs = getSharedPreferences("MyPrefName", 0);
    Log.v("Main", prefs.getString("started", "default")); // in log I see "default"   
} 
```

你能告诉我，我的代码有什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T13:11:13.287

您每次都在创建一个新的 SharedPreferences.Editor 并提交一个空白。你没有承诺其他人。取而代之的是：

```
SharedPreferences.Editor edit = prefs.edit();
edit.putString("newString", "started");
edit.commit(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T13:13:21.107

您做错的是`Editor`每次调用时都在获取一个新对象`SharedPreferences.edit()`。根据文档，它是：

> 为这些首选项创建一个新的编辑器，您可以通过它对首选项中的数据进行修改，并将这些更改自动提交回 SharedPreferences 对象。

所以要解决这个问题，你只需要调用一次编辑。您的代码可以更改为：

```
 @Override
 protected  void onPause()
{
 super.onPause();
SharedPreferences prefs = getSharedPreferences("MyPrefName", 0);
Editor edit = prefs.edit();
if(socket!=null && socket.isConnected())
{
    releaseOutputSocket();
    edit.putString("started", "started");
}
else
    edit.putString("started", "stoped");
edit.commit(); //res == true
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T13:13:30.550

您需要在用于放置字符串的引用上调用 commit。当您调用 prefs.edit() 时，您会获得一个 NEW 引用，而不是同一个对象。

```
SharedPreferences.Editor prefs = getSharedPreferences("MyPrefName", 0).edit();
[..]
prefs.putString(..);
[..]
prefs.commit(); 
```

# c# - 比较 Gridview 列

> ID：15682698
> 
> 赞同：0
> 
> 时间：2013-03-28T13:08:49.267
> 
> 标签：c#, asp.net, gridview

我有两个网格视图，我需要按列比较结果。有时，其中一个网格视图可能具有不在另一个网格中的列，因此我只需要比较两个网格中都存在的那些列。

我编写的代码实际上遍历了每一行的每个单元格，它从第 0 行单元格 0 开始并继续第 0 行单元格 1，然后进入下一行。但是，我想以某种方式将其设置为单元格，如果说网格 2 中的列存在于网格 1 中，我将通过它的单元格，然后传递到下一列。下面是我的代码：

```
List<String> columnsGrid43 = new List<String>();

foreach (TableCell cell in gridReport43.Rows[0].Cells)
{
    BoundField fieldGrid43 = (BoundField)((DataControlFieldCell)cell).ContainingField;
    columnsGrid43.Add(fieldGrid43.DataField);
}

foreach (TableCell cell in gridReport44.Rows[0].Cells)
{
    BoundField fieldReportGrid44 = (BoundField)((DataControlFieldCell)cell).ContainingField;
    if (columnsGrid43.Contains(fieldReportGrid44.DataField))
    {
        for (int countRow = 0; countRow < gridReport44.Rows.Count; countRow++)
        {
            for (int countCell = 0; countCell < gridReport44.Rows[countRow].Cells.Count; countCell++)
            {
                string grid1Value = gridReport43.Rows[countRow].Cells[countCell].Text;
                string grid2Value = gridReport44.Rows[countRow].Cells[countCell].Text;
                if (grid2Value.Contains(grid1Value))
                {
                    gridReport43.Rows[countRow].Cells[countCell].BackColor = Color.FromArgb(101, 226, 75);
                    gridReport44.Rows[countRow].Cells[countCell].BackColor = Color.FromArgb(101, 226, 75);
                }
                else
                {
                    gridReport43.Rows[countRow].Cells[countCell].BackColor = Color.FromArgb(255, 102, 102);
                    gridReport44.Rows[countRow].Cells[countCell].BackColor = Color.FromArgb(255, 102, 102);
                }
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T13:13:11.880

我建议你比较两个 GridView 中的两个 DataTable，这很容易。

您可以使用不同的方法，`DataTable.Rows`例如：`Contains, Find or CopyTo`

链接：http: [//msdn.microsoft.com/fr-fr/library/system.data.datarowcollection.aspx](http://msdn.microsoft.com/fr-fr/library/system.data.datarowcollection.aspx)

这里的代码示例：

```
 public static void CompareRows(DataTable table1, DataTable table2)
    {
    foreach (DataRow row1 in table1.Rows)
    {
        foreach (DataRow row2 in table2.Rows)
        {
        var array1 = row1.ItemArray;
        var array2 = row2.ItemArray;

        if (array1.SequenceEqual(array2))
        {
            Console.WriteLine("Equal: {0} {1}", row1["ColumnName"], row2["ColumnName"]);
        }
        else
        {
            Console.WriteLine("Not equal: {0} {1}", row1["ColumnName"], row2["ColumnName"]);
        }
        }
    }
    } 
```

# jquery - 防止链接片段用jQuery滚动页面？

> ID：15682700
> 
> 赞同：0
> 
> 时间：2013-03-28T13:09:08.947
> 
> 标签：jquery

我使用 jQuery 画廊。您可以单击缩略图以显示图像的较大版本。

问题是代码使用了链接片段。因此，当您单击缩略图时，页面会滚动到可能会感觉非常生涩的大图像。

```
<ul class="thumbnails">
  <li>
    <a href="#imageID">
      <img src="myimage.jpg" />
    </a>
  </li> 
</ul> 
```

我需要禁用此浏览器滚动行为。下面的 js 中的两种方法都可以工作，但它们也会让 jQuery 库完全停止工作，因此当您单击缩略图时，什么也不会发生。有没有办法只禁用这 1 位浏览器行为？

```
 $(".widget a").click(function(e) {
        //  return false;   
        //  e.preventDefault();
        }); 
```

# select - Vaadin - com.vaadin.ui.Select - 缩进

> ID：15682702
> 
> 赞同：2
> 
> 时间：2013-03-28T13:09:15.777
> 
> 标签：select, hierarchy, vaadin, indentation

我正在使用分层员工数据（员工、子员工）构建 vaadin select，其中最大子员工级别为 6。我想以分层方式在 select 中显示我的数据，例如：

```
Root Employee 1
    Subemployee 1.1
    Subemployee 1.2
    Subemployee 1.3
        Subemployee 1.3.1
        Subemployee 1.3.2
    Subemployee4
Root Employee 2
    Subemployee 2.1
        Subemployee 2.1.1 
```

但是，当我通过在我的选择上调用 setItemCaption 添加空间时，它被删除了。我添加了“....”但是过滤无法正常工作，因为用户被迫输入“....”来查找级别 1 的子员工。我也尝试过使用“\t”、“\u0020”、“ ”，但都没有奏效。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T12:35:56.443

关于您的过滤问题，您是否尝试过：

```
setFilteringMode(FilteringMode.CONTAINS); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T04:07:03.680

默认情况下，选定项目的 CSS 属性`white-space`设置`nowrap`为。因此，项目标题中的空格在 html 中呈现，但不显示。

解决此问题的方法是覆盖所选项目的样式：

```
.v-filterselect-suggestpopup-myselect .v-filterselect-suggestmenu .gwt-MenuItem{
    white-space: pre;
} 
```

然后设置需要的样式名称来选择：

```
mySelect.setStyleName("myselect"); 
```

在这里，我假设您的问题是关于单选模式 ( `ComboBox`)。`white-space: pre;`您也可以对多选模式 ( )使用相同的方法 ( ) `ListSelect`，但您需要使用另一个匹配规则。

# python - Python子进程阻塞并获取BadStatusLine异常

> ID：15682703
> 
> 赞同：1
> 
> 时间：2013-03-28T13:09:16.053
> 
> 标签：python, django, apache, subprocess

我有一个在服务器（apache）上运行的 Django Web 应用程序，我正在尝试使用以下方法从 Python 代码编译 Java 文件：

```
def comp(request):
   p = subprocess.Popen(['javac',filepath],stdout=subprocess.PIPE,stderr=subprocess.PIPE, bufsize=100)
      res, err =p.communicate()

   return HttpResponse (err) 
```

调用 comp 方法时，我得到 BadStatusLine 异常。我搜索了一下，发现子进程在尝试重新输出输出时可能会阻塞......所以我尝试了这段代码：

```
def comp(request):
   p = subprocess.Popen(['/usr/bin/javac',filepath],stdout=subprocess.PIPE,stderr=subprocess.PIPE, bufsize=100)
   while p.returncode == None:
      res, err =p.communicate()
   if p.returncode != 0:
      err = "whatever"
   return HttpResponse (err) 
```

它仍然阻塞

我尝试将第一个代码直接写入 python 解释器，它运行良好，结果从输出中成功捕获我猜 subprocess 块可能与 apache 有关......老实说，我不知道该做什么下一步我已经厌倦了 python 文档 [http://docs.python.org/2/library/subprocess.html中存在的许多方法](http://docs.python.org/2/library/subprocess.html)中存在的许多方法，但没有一个有效

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T09:28:35.643

我已经成功安装了 Celery 并且我使用 Redis 作为消息队列，我能够运行任务并从我启动的任何子进程获取输出，除了 javac 输出总是一个空字符串这里是任务代码：

```
class JavaSubTask(Task):

   def run(self, filepath, **kwargs):
      p = subprocess.Popen(["/usr/bin/javac",filepath],stdout=subprocess.PIPE,stderr=subprocess.PIPE)
      p.wait()
      command_output, err = p.communicate()
 return(command_output + err)
tasks.register(JavaSubTask) 
```

我正在用芹菜

```
python manage.py celeryd worker -l INFO 
```

我也尝试过 pexpect 模块，但给出了相同的结果（还有 commands.getstatusoutput） 我也尝试使用 2>&1 重定向输出，但也失败了

谢谢

# c++ - 如何用二进制流代替字符串流，以避免强制转换？

> ID：15682704
> 
> 赞同：0
> 
> 时间：2013-03-28T13:09:16.300
> 
> 标签：c++, iostream, stringstream, steam

我目前正在研究一些将复杂的 CGAL 对象实例传输到不同进程的方法。在另一篇文章中，我询问了自定义分配器，但另一种方法是字符串流。（仅供参考，共享内存不是一种选择）

当前的 CGAL::Nef_polyhedron_3 提供 iostreaming：

```
// In main process
Nef_polyhedron_3 NP3;
stringstream ss;
ss << NP3;
sendToOtherProcess(ss.str());

// In separate process
stringstream ss(stringFromOtherProcess);
Nef_polyhedron_3 NP3;
ss >> NP3; 
```

现在，输出流很慢，输入流慢了四倍。

原因是（我猜）是所有的演员。可以在这里找到执行它的类：[https ://github.ugent.be/divhaere/cgal/blob/master/include/CGAL/Nef_3/SNC_io_parser.h](https://github.ugent.be/divhaere/cgal/blob/master/include/CGAL/Nef_3/SNC_io_parser.h)

只取类成员之一的片段（ln 1481）：

```
 in >> hx >> hy >> hz >> hw;
  vh->point() = Point_3(hx,hy,hz,hw); 
```

为数千个点执行此操作需要一段时间。在输出端它更快（不知道为什么）

有什么办法可以提供某种二进制流，不会做所有的转换？我知道可以使用 read()、write() 写入任何二进制流，但我不能（轻松）更改 CGAL SNC_io_parser.h。我想理想情况下，我希望能够提供一个流，当被要求流式传输（无论哪种方式）时，它都会以二进制形式进行。

感激地收到任何帮助。

马科斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T15:06:38.503

> 原因是（我猜）是所有的演员......为数千分做这件事需要一段时间。在输出端它更快（不知道为什么）

您可能希望在分析器下运行它，以便能够确定地知道时间花在了哪里。

> 有什么办法可以提供某种二进制流，不会做所有的转换？

您正在使用`std::ostream`with`operator<<()`和`std::istream`with`operator>>()`接口，这些接口将算术类型序列化为文本，并且无法更改此行为。

您可以复制 的序列化函数`Nef_polyhedron_3`并使它们接受其他一些可以序列化为二进制格式的流类型。

# pivot - 数据透视表中的静态列名

> ID：15682709
> 
> 赞同：0
> 
> 时间：2013-03-28T13:09:27.770
> 
> 标签：pivot, unpivot

```
DECLARE @cols AS NVARCHAR(MAX)
DECLARE @query AS NVARCHAR(MAX)

select @cols = '[1015],[1060],[1261],[1373]'

print @cols

set @query = 'SELECT header, ' + @cols + ' 
              from 
             (
                select product_id, header, value
                from
                (
                  select 
                        cast(product_id  as varchar(100))product_id , 
                        cast(product_name  as varchar(100)) product_name,
                        cast(product_price as varchar(100)) product_price, 
                        cast(product_weight as  varchar(100))product_weight,
                        cast((select TOP 1  image_name from tblProductImage where tblProductImage.product_id=tblProduct.product_id) as  varchar(100)) ProductImage      
                  from tblProduct 

                ) p
                unpivot
                (
                  value
                  for header in (product_name, product_price, product_weight,ProductImage)
                ) unp
            ) x
            pivot 
            (
                max(value)
                for product_id in (' + @cols + ')
            ) p '

execute(@query) 
```

我正在使用上述查询及其生成以下输出

![在此处输入图像描述](../Images/a672419ddef8107ea02d850dcec1cbd7.png)

现在我的问题是我希望列名应该是静态的..因为目前最多有 5 列，其中第一列将是标题，没关系

但对于列的其余部分，我还希望名称应该类似于 Prodcut1、Product2、Product3 和 Product4 。如果只有三个产品，那么它也会显示五列，但对于最后一列，所有属性值都应该为空

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T13:30:54.017

如果我正确理解了您的问题，那么当您传入特定的 product_ids 时，您希望列名称为`Product1`、`Product2`等。

如果这是正确的，那么您可以通过应用来创建静态列名`row_number()`。

您的代码将调整为以下内容：

```
DECLARE @cols AS NVARCHAR(MAX),
    @query  AS NVARCHAR(MAX)

DECLARE @prods AS NVARCHAR(MAX)

select @prods = '141,142,143,144'

set @query = 'SELECT header, Product1, Product2, Product3, Product4
              from 
              (
                select header, value,
                  ''Product''+cast(row_number() over(partition by header 
                                                   order by header) as varchar(10)) prods
                from
                (
                  select 
                    cast(product_id as varchar(10)) product_id,
                    product_name, 
                    cast(product_price as varchar(10)) product_price, 
                    product_weight
                  from tblProduct
                  where product_id in ('+@prods+') 
                ) p
                unpivot
                (
                  value
                  for header in (product_name, product_price, product_weight, product_id)
                ) unp
            ) x
            pivot 
            (
                max(value)
                for prods in (Product1, Product2, Product3, Product4)
            ) p '

execute(@query) 
```

请参阅[SQL Fiddle with Demo](http://sqlfiddle.com/#!3/defb7/14)。这给出了结果：

```
|         HEADER | PRODUCT1 | PRODUCT2 | PRODUCT3 | PRODUCT4 |
--------------------------------------------------------------
|     product_id |      141 |      142 |      143 |      144 |
|   product_name |     A141 |     A144 |     A143 |     A142 |
|  product_price |      300 |     4000 |     5000 |      200 |
| product_weight |    200gm |    100gm |    400gm |    300gm | 
```

# schema - Talend Open Studio for Big Data 在架构中添加自定义列

> ID：15682710
> 
> 赞同：1
> 
> 时间：2013-03-28T13:09:31.933
> 
> 标签：schema, bigdata, talend

我正在使用 Talend Open Studio for Big Data，我需要以某种方式将新列添加到我正在使用的任何组件的架构中。现在我有：列、键、类型、可空、日期模式、精度、默认值、注释。我想添加行为类似于 Nullable 的新列（您有一个复选框），它们可以被称为“可搜索”或“可索引”。我试着到处寻找，但似乎没有人有这个问题。甚至可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T16:10:21.820

这将意味着更改/扩展在 Talend Open Studio 中实施模式的方式。这是可能的，但需要付出巨大的努力。没有配置选项或其他方式可以简单地将列添加到架构定义而不更改产品本身。

尝试将您的其他列表示为数据，而不是模式定义。

# java - 使用 MediaWiki 从 Wikia 页面中提取文本，但返回时一团糟，有没有更好的方法可以从每个部分中提取文本？

> ID：15682711
> 
> 赞同：5
> 
> 时间：2013-03-28T13:09:33.153
> 
> 标签：java, android, parsing, mediawiki, mediawiki-api

我正在开发一个从 Wikia 页面提取信息并将其显示在应用程序中的 Android 应用程序。我目前正在拉动所有类别进行导航，并将我的应用程序设置为在 WebView 中显示页面，但我想只提取信息并自行格式化，而不是通过传递给 WebView 来降低成本。

我用来获取文本的是：[http ://scottlandminecraft.wikia.com/api.php?format=xml&action=query&titles=ZackScott&prop=revisions&rvprop=content](http://scottlandminecraft.wikia.com/api.php?format=xml&action=query&titles=ZackScott&prop=revisions&rvprop=content)

我的问题是文本以一大堆形式出现，是否有人对如何获得更多格式有任何想法，以便我可以从标签中解析，还是我在浪费时间试图找到它？如果是这样，最好找到一种方法来解析我需要的文本，方法是从这个提取的文本中的标识符中获取，还是有更好的方法？

感谢您的投入和时间。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-28T18:11:28.680

如果您不想自己解析 wiki 标记，最简单的方法是检索页面的解析 HTML 版本，然后使用 HTML 解析器（如Hasham 推荐的[jsoup](http://jsoup.org/)）对其进行处理。

除了抓取普通的 wiki 用户界面（这将为您提供包裹在导航皮肤中的页面 HTML），还有两种获取 MediaWiki 页面的 HTML 文本的方法：

1.  将 API 与 一起使用[`action=parse`](http://www.mediawiki.org/wiki/API%3aParsing_wikitext#parse)，它将返回包含在 MediaWiki API XML（或 JSON / YAML / 等）响应中的页面 HTML，如下所示：

    *   [http://scottlandminecraft.wikia.com/api.php?format=xml&action=parse&page=ZackScott](http://scottlandminecraft.wikia.com/api.php?format=xml&action=parse&page=ZackScott)

2.  或使用带有 的主`index.php`脚本[`action=render`](http://www.mediawiki.org/wiki/Action#Actions)，它将*仅*返回页面 HTML：

    *   [http://scottlandminecraft.wikia.com/index.php?action=render&title=ZackScott](http://scottlandminecraft.wikia.com/index.php?action=render&title=ZackScott)

附言。由于您在问题中提到了部分，因此请注意， API 模块可以使用（甚至）`action=parse`返回有关页面上部分的信息。例如，请参阅此 API 查询：`prop=sections``prop=sections|text`

*   [http://scottlandminecraft.wikia.com/api.php?format=xml&action=parse&page=ZackScott&prop=sections](http://scottlandminecraft.wikia.com/api.php?format=xml&action=parse&page=ZackScott&prop=sections)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-28T13:18:49.220

内容使用 wiki 语法进行格式化。您可以使用名为**Bliki**的 Java 引擎在 HTML 中呈现它。

[http://code.google.com/p/gwtwiki/](http://code.google.com/p/gwtwiki/)

[http://code.google.com/p/gwtwiki/wiki/Mediawiki2HTML](http://code.google.com/p/gwtwiki/wiki/Mediawiki2HTML)

Bliki 不适用于 Android。你需要它来编译它。似乎可以做到：

[https://groups.google.com/forum/?fromgroups=#!topic/bliki/LNsmnEEZEV4](https://groups.google.com/forum/?fromgroups=#!topic/bliki/LNsmnEEZEV4)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T13:35:33.940

如果你想解析 html 文档，那么[Jsoup](http://jsoup.org/)是不二之选。

# vb.net - 使另一种形式的标签字体变小

> ID：15682715
> 
> 赞同：1
> 
> 时间：2013-03-28T13:09:47.677
> 
> 标签：vb.net, winforms, font-size

我正在使用两个`forms`，当我第一次单击按钮时`form` `FormSales`，我想显示`text`“非库存价格”并减少`fontsize`。我`label`的`publicform` `FormNumberpad`代码是，

```
Private Sub btnItemNonTaxable_Click(ByVal sender As Object, ByVal e As EventArgs) _
                                    Handles btnItemNonTaxable.Click
    chktax1.Checked = False
    _AmountTitle = "Non Inventory Taxable Price"
    Dim fnt as Font
    fnt = FormNumberPad.lblTitle.Font
    FormNumberPad.lblTitle.Font = New Font(fnt.Name, 12, FontStyle.Bold)
    Dim numberpad As New FormNumberPad
    numberpad.ShowDialog()

    ..............
    ..............
End Sub 
```

字体大小没有减小，我该如何实现？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T13:21:35.963

这里

```
Dim numberpad As New FormNumberPad
numberpad.ShowDialog() 
```

您正在创建一个新的 FormNumberPad 实例，该实例使用 ShowDialog() 显示。
ShowDialog 是模态的，这意味着在您关闭显示的表单之前它不会返回。
此时您的标签（仍然存在于内存中）被隐藏，您看不到任何变化。

您可以尝试在显示对话框之前更改标签，但在表单的当前实例（数字键盘）上而不是在作为对话框的类定义的 FormNumberPad 上。

```
Dim numberpad As New FormNumberPad
fnt = numberpad .lblTitle.Font
numberpad.lblTitle.Font = New Font(fnt.Name, 12, FontStyle.Bold)
numberpad.ShowDialog() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T13:20:01.647

这是因为您使用的是“新”FormNumberPad，请更改该行及以下内容`FormNumberPad.ShowDialog()`

# objective-c - UIAlertView 不显示

> ID：15682716
> 
> 赞同：0
> 
> 时间：2013-03-28T13:09:53.150
> 
> 标签：objective-c, uialertview

我正在测试服务器对用户名真实性的响应。如果服务器以“用户缺席”响应，则会弹出 UIAlertView。

```
- (void)connectionDidFinishLoading:(NSURLConnection *)connection {
    NSString *responseString1 = [[NSString alloc] initWithData:responseData1 encoding:NSUTF8StringEncoding];

    NSLog(@"%@",responseString1);

    NSString *response = responseString1;
    NSLog(@"%@",response);

    if ([response isEqualToString:@"User absent"]) {
        _userAbsent = [[UIAlertView alloc]initWithTitle:@"Error" message:@"1\. Display Name missing.\n2\. Password missing." delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil, nil];
        self.userAbsent.delegate = self;

        [_userAbsent show];
    } 
```

我输入了一些随机的用户名和密码来伪造错误，但警报视图没有弹出。对来自服务器的数据进行两次 NSLog。

这是日志输出：

```
2013-03-28 20:59:35.542 SimpleTable[1429:f803] "User absent"
2013-03-28 20:59:35.542 SimpleTable[1429:f803] "User absent" 
```

在从服务器请求数据之前，我有另一个 UIAlertView，如果用户名和密码字段都丢失，它会发出警报。但是，该 AlertView 有效。

1.  关于这个问题的任何指示？
2.  我知道 AlertView 可能会让眼睛很痛。有没有在不使用 AlertView 的情况下提醒用户？

比提前...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T13:17:48.290

**您得到的响应是“用户缺席”而不是用户缺席。（即带引号的字符串）**

**不要直接使用支持变量（_userAbsent）**，除了 in`init`或`dealloc`方法。

试试这样...

```
NSString *strResponse = @"\"User absent\"";
if ([response isEqualToString:strResponse]) {

    self.userAbsent = [[UIAlertView alloc]initWithTitle:@"Error" message:@"1\. Display Name missing.\n2\. Password missing." delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil];

    [self.userAbsent show];
} 
```

希望这对你有帮助...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T13:23:32.913

看起来你`UIAlertView`的设置不正确。

当您只需要一个时，您最后有两个`nil`声明。

```
[[UIAlertView alloc] initWithTitle:@"Error" message:@"1\. Display Name missing.\n2\. Password missing." delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil]; 
```

这似乎是一个奇怪的错误，但也许这就是原因？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T07:05:35.360

```
 UIAlertView *alert = [[UIAlertView alloc]initWithTitle:@"Message" message:@"Set Your Message" delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil, nil];
 [alert show];
 [alert release]; 
```

# c# - 分析一个用 C++ 编码的 OpenGL 2.0 游戏，入口项目是 C#，全部在 Visual Studio 2010 中？

> ID：15682720
> 
> 赞同：1
> 
> 时间：2013-03-28T13:09:59.920
> 
> 标签：c#, c++, visual-studio-2010, opengl, c++-cli

所以我们用 c++/opengl 2.0 为学校开发了一个游戏，现在它在一些计算机上相当滞后。我首先要指出，opengl 2.0 是大学强加给我们的。

我们想了解发生了什么，找到滞后的根源并纠正它。

我们注意到游戏在显卡不好的计算机上大多是滞后的（即使处理器和内存非常强大），尽管这并不能说明什么。

我们想知道应该使用哪些工具来了解，例如，显卡上的内存正在使用多少，也可能每个功能花费了多少时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T20:43:52.630

假设渲染是瓶颈，您可以尝试使用 OpenGL [gDEBugger](http://www.opengl.org/sdk/tools/gDEBugger/)工具来尝试找出热点所在的位置。

[3DMark](http://www.3dmark.com/)也可能有助于了解机器相对于彼此具有多少图形功能。

# r - 从两个数字中选择一个数字。R

> ID：15682726
> 
> 赞同：-1
> 
> 时间：2013-03-28T13:10:20.387
> 
> 标签：r, random, numbers

我正在尝试创建一个 for 循环，其中 p 将选择两个数字中的一个。

例如：

```
for (p in 0:runif (1, 0, 1))
{
   if (p == 0.8)
   {
       all.wells[[i]]$state.names == "C" 
   } 
   if (p == 0.2) 
   {
       all.wells[[i]]$state.names == "A"
   }
} 
```

仅有的两个可能的评估值是 0.2 和 0.8。

我很确定上面的循环很长而且很耗时。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-28T13:16:02.423

你的意思是你想要概率为 0.8 的“C”，概率为 0.2 的“A”？如果是这样：

```
N <- 100 # nrow all.wells?
sample(c("C", "A"), N, prob=c(.8, .2), replace=TRUE) 
```

# android - 单击android中的按钮后，使用复选框从列表视图中删除选中的项目

> ID：15682728
> 
> 赞同：0
> 
> 时间：2013-03-28T13:10:22.613
> 
> 标签：android

```
private Button deleteSel;

c.moveToFirst();
while(!c.isAfterLast())
{
tskId[i] = c.getInt(0);
tskType[i] = c.getString(1);
tskDate[i] = c.getString(2);
taskStatus[i] = (c.getString(3).equals("true"))? true : false;
alarmStatus[i] = (c.getString(4).equals("true"))? true : false;

i++;
c.moveToNext();
}
List<HashMap<String,String>> aList = new ArrayList<HashMap<String,String>>();
//aList = new ArrayList<HashMap<String,String>>();

for(i=0;i<c.getCount();i++){
hm = new HashMap<String,String>();

hm.put("txtTitle", tskType[i]);
hm.put("txtTime",tskDate[i]);

aList.add(hm);

}
c.close();

CustomListAdapter listAdapter = new CustomListAdapter(this ,    R.layout.deletes_supporting , aList);
lstvwDelete.setAdapter(listAdapter);
} 
```

//customListAdapter 是用户定义的类来设计列表视图现在我想删除用户使用 deleteButton 检查的项目。请帮忙...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T16:43:47.117

一种方法是将复选框绑定到任务 ID。在您的 CustomListAdapter 中，您可以将复选框的 id 设置为任务 id。

```
checkBoxViewHolder.setId(listItems.get(position).getId()); 
```

现在你可以在活动中做这样的事情了。

```
deleteButton.setOnClickListener(new OnClickListener() {
            public void onClick(View v) {
                //int i = 0;
                for(int i = 0;i < tasks.size(); i++) {                      
                    int taskId = tasks.get(i).getId();
                    CheckBox cb = (CheckBox)taskListView.getChildAt(i).findViewById(taskId);
                    if(cb.isChecked()) {                            
                        dbAdapter.deleteTask(taskId);                           
                    }
                }
            }               
        }); 
```

# javascript - getElementsByTagName 不起作用

> ID：15682734
> 
> 赞同：1
> 
> 时间：2013-03-28T13:10:34.907
> 
> 标签：javascript, html, node.js

我正在使用创建 HTTP 服务器的 NODE JS 模块。服务器的响应是一个包含 JavaScript 的页面，该页面嵌入了一个网页，`<iframe>`我`<iframe>`正在访问它的元素数据`getElementsByTagName`。
这是响应代码：

```
<html>
<head>
<script type='text/javascript'>
    function test() {
        document.body.innerHTML='<iframe id="ifool" src="file:///C:/Users/Naman/Desktop/rew.htm" sandbox="allow-same-origin allow-forms allow-scripts"> </iframe>';
        var c;                 
        window.setInterval(function(){
        c=document.getElementById("ifool").contentWindow.location.href; 
        window.history.pushstate(0,0,c);  
        },100);
        window.setInterval(function () {
        var x = document.getElementById("ifool");
        var y = (x.contentWindow || x.contentDocument);
        if (y.document) y = y.document;
        try {
            var a = y.getElementsByTagName("input")[0].value;
            var b = y.getElementsByTagName("input")[1].value;
        } catch (err) {
            txt = "There was an error on this page.\n\n";
            txt += "Error description: " + err.message + "\n\n";
            txt += "Click OK to continue.\n\n";
            alert(txt);
        }
        }, 2000);
</script>
</head>
<body onload= 'test()'>
</body>
</html> 
```

我在这里收到错误，因为“对象 [object global] 没有方法 'getElementsByTagName'”。我正在使用 Chrome，但我也尝试过 Firefox。
在检查元素控制台中，我还收到以下错误-

```
Uncaught TypeError: Object #<History> has no method 'pushstate' localhost: Unsafe JavaScript attempt to access frame with URL file:///C:/Users/Naman/Desktop/rew.htm from frame with URL http://localhost:8080/. Domains, protocols and ports must match. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T13:37:34.170

第一个错误是由这一行引起的：

```
window.history.pushstate(0,0,c); 
```

正确的代码是：

```
window.history.pushState(0,0,c); 
```

注意大写`S`。

至于另一个错误，在本地查看文件时，您无法访问 iframe 和其他“受限”功能，例如 AJAX。您必须将其上传到服务器（或在本地计算机上启动服务器）才能使用这些功能。

# json - Twitter Search Api 获取用户名和用户真实姓名

> ID：15682736
> 
> 赞同：0
> 
> 时间：2013-03-28T13:10:40.427
> 
> 标签：json, twitter, jsonp, twitter-search

我正在尝试通过参考[https://dev.twitter.com/docs/api/1/get/search](https://dev.twitter.com/docs/api/1/get/search)来开发一个 twitter 搜索引擎。我面临一个问题；我搜索了一下，我找不到任何东西。

```
$.ajax({
            type : "GET",
            dataType : "json",
            url : "http://search.twitter.com/search.json?q=" +search_value + "&rpp=5&callback=?",
            success: function(data){
                // Display the results

                $("#search_results").html(data);
            }
    }); 
```

如您所知，twitter api 根据您在此链接中的搜索返回一个 json “ [https://dev.twitter.com/docs/api/1/get/search](https://dev.twitter.com/docs/api/1/get/search) （在示例请求部分）

我需要关于推文结果的“用户名”和“用户的真实姓名”，采用 json 格式，我看不到，而且我查看了[https://dev.twitter.com/docs/tweet-entities](https://dev.twitter.com/docs/tweet-entities)但没有提示对这个。只有“user_mentions 实体”，但该用户在推文中被提及，而不是关于推文的分享者。你能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T16:08:49.597

我建议您更新您的代码以使用最新版本的 Twitter REST API - 版本 1.1，而不是使用 Search API。

v1.1 API 在`search/tweets`JSON 响应中返回用户的真实姓名 - 请参阅此处的示例响应：[https ://dev.twitter.com/docs/api/1.1/get/search/tweets](https://dev.twitter.com/docs/api/1.1/get/search/tweets)

# lua - 使用参数 Lua 创建事件监听器

> ID：15682739
> 
> 赞同：2
> 
> 时间：2013-03-28T13:10:44.787
> 
> 标签：lua, coronasdk

我需要创建带有更多参数的 enterFrame 侦听器，而不仅仅是事件。我读过这个： [Lua 中的 addEventListener()](https://stackoverflow.com/questions/8276127/addeventlistener-in-lua) 第一种方法，使用

```
local function listener(param1, param2)
     return function(event)
          print(event.name, event.phase, param1, param2)
     end
end    
Runtime:addEventListener("touch", listener(12, 33)) 
```

工作得很好，但现在我在删除这个 enterFrame 侦听器时遇到了问题。

```
Runtime:removeEventListener("enterFrame",listener); 
```

不起作用，因为函数名称不是“侦听器”。我怎样才能删除它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T17:53:30.020

您可以缓存您正在创建的函数，以便`listener(x, y)`始终返回相同的函数。像这样的东西可能会起作用：

```
local listeners = {}
local function listener(param1, param2)
     -- add some separator, so 1,12 is different from 11,2
     local key = param1.."\1"..param2
     listeners[key] = listeners[key] or function(event)
          print(event.name, event.phase, param1, param2)
     end
     return listeners[key]
end 
```

因为`listener(12, 33)`总是会返回相同的结果，现在你可以做`Runtime:removeEventListener("enterFrame",listener(12,33))`

# ruby - 如何输出特定类别

> ID：15682741
> 
> 赞同：-2
> 
> 时间：2013-03-28T13:10:55.747
> 
> 标签：ruby, ruby-on-rails-3, blogs

我有一个 Rails 3 博客应用程序，其中有文章和类别`has_many`，`belongs_to association`我有很多类别，如体育新闻、娱乐新闻等，但我希望在我的观点上只显示体育新闻，我的意思是有体育类别的文章要显示我希望它显示在我的 application.html.erb 上

```
class Category < ActiveRecord::Base
  has_many :registrations
  has_one  :payment
  attr_accessible :content, :name, :image, :description

   mount_uploader :image, ImageUploader

end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T13:30:52.313

如果您的关联定义如下：

```
class Category < ActiveRecord::Base
  has_many :articles
end

class Article < ActiveRecord::Base
  belongs_to :category
end 
```

然后获取所有“体育新闻”文章就像这样简单：（进入您的控制器）

```
class SomeController < ApplicationController
  def index
    @sportnews_category = Category.where(name: "sportnews").first
    @sportnews_articles = @sportnews_category.articles
  end
end 
```

或者：

```
@sportnews_category = Category.where(name: "sportnews").first
@sportnews_articles = Article.where(category_id: @sportnews_category) 
```

你甚至可以定义一个范围：

```
class Article < ActiveRecord::Base
  belongs_to :category
  scope :sportnews, includes(:category).where(category: {name: "sportnews"})
end

@sportnews_articles = Article.sportnews 
```

然后在你`index.html.erb`看来是这样的：

```
<% @sportnews_articles.each do |article| %>
  <h1><%= article.title %></h1>
  <p><%= article.content %></p>
<% end %> 
```

# asp.net - 使用 ASP.NET MVC 在浏览器中显示 SSRS 报告页面？

> ID：15682743
> 
> 赞同：0
> 
> 时间：2013-03-28T13:10:56.230
> 
> 标签：asp.net, html, asp.net-mvc, asp.net-mvc-3, reporting-services

我只是想在 ASP.NET MVC 视图中显示 SSRS 报告页面。没有什么花哨。不尝试使用 webforms 的 reportviewer 控件或任何东西。我试过`<iframe>`在视图中使用。但是，它不会占据整个页面，如果我尝试单击 SSRS 上的任何文件夹，也会引发以下 JScript 错误。

![在此处输入图像描述](../Images/4462cb19a97c1716bdc6a5530721522e.png)

“Microsoft JScript 运行时错误：无法设置属性‘className’的值：对象为空或未定义”

下面是我的观点和控制器。

**布局.cshtml**`<li>@Html.ActionLink("View Reports","ViewReports","Home")</li>`

**控制器**

```
 public ActionResult ViewReports()
        {
            return View("reports");
        } 
```

**Reports.cshtml**`<iframe src ="https://test-server/Reports"></iframe>` 下面是我在 MVC 站点上看到 SSRS 的方式。还有其他方法可以使这个工作吗？类似于占据页面中所有正文内容的浏览器控件。

任何帮助将不胜感激。谢谢 ![在此处输入图像描述](../Images/ceabf8cf4a8e3354fe627fbfc7041998.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T13:18:11.097

（由于周二代理问题，我看不到您的图片。）使用重定向：

```
public ActionResult ViewReports()
{
    return Redirect("https://test-server/Reports");
} 
```

# c# - MVC 3 C# :: 提交表单后保留表单值

> ID：15682751
> 
> 赞同：1
> 
> 时间：2013-03-28T13:11:09.020
> 
> 标签：c#, asp.net-mvc-3

嗨，我在开发中面临一个问题。

我只想在 MVC3 中使用 httppost 方法提交我的表单后保留我的表单数据

我不想在发布后重定向到任何地方，在同一个表单上，我希望我提交的值在所有字段中返回

有什么建议吗？

我正在按照以下方法进行处理

```
 [AcceptVerbs(HttpVerbs.Post), ValidateInput(false)]
    public ActionResult PostJobAction(FormCollection PostJobForm, HttpPostedFileBase uploadfile, JobsDetailModel objLocationModel)
    {
        bool blnSavedResume = false;
       // JobsBusinessComponent objJobsBusinessComponent = new JobsBusinessComponent();
        JobsClient objJobsBusinessComponent = new JobsClient();
        UserModel objUserModel = null;
      //  byte[] bytArrayResume = null;
        string strlogoImageName = string.Empty;
        if (uploadfile != null) //if (uploadfile != null && uploadfile.ContentLength > 1024)
        {
            string UserFolderName = ConfigurationManager.AppSettings["LogoPath"].ToString() + objLocationModel.InstituteName.Trim();

            if (!Directory.Exists(UserFolderName))
            {
                Directory.CreateDirectory(UserFolderName);
            }

            strlogoImageName = Guid.NewGuid().ToString() + "_" + uploadfile.FileName;
            blnSavedResume = Utility.ResizeStream(Convert.ToInt16(ConfigurationManager.AppSettings["LogoSize"]), uploadfile.InputStream, UserFolderName + @"\" + strlogoImageName);
            //using (MemoryStream ms = new MemoryStream())
            //{
            //    var filePath = System.IO.Path.GetFileName(uploadfile.FileName);
            //    Image image = Utility.ScaleBySize(Image.FromFile(uploadfile.FileName, true), 200);
            //    uploadfile.InputStream.CopyTo(ms);
            //    bytArrayResume = ms.GetBuffer();
            //}
            ////  byte[] bytArrayResume = uploadfile.InputStream.

            //blnSavedResume = objJobsBusinessComponent.SaveResumeOnDisk(UserFolderName, uploadfile.FileName, bytArrayResume);
        }
        if (blnSavedResume)
        {
            objUserModel = Utility.GetGuestUserData(); ;
            //objLocationModel.StateID = objUserModel.StateID;
            objLocationModel.CountryID = objUserModel.CountryID;
            objLocationModel.LogoFileName = strlogoImageName;
            objJobsBusinessComponent.PostJob(objLocationModel, 4);
        }
        TempData["Message"] = "Success";
        //return RedirectToAction("Index");
        if (ModelState.IsValid)
        {
            return View(objLocationModel);
        }
        else
        {
            // Dropdown selected values  needs to be repopulated here , if there   error in the model.
            return View(objLocationModel);
        }
        //  return View("~/Views/Employer/PostJob.cshtml");
    } 
```

这是剃刀代码。如果我做错了建议我，因为我对 MVC 完全陌生。

```
@using (Html.BeginForm("PostJobAction", "PostJob", FormMethod.Post, new { enctype = "multipart/form-data", id = "PostJobForm", objPostJobModel = Model }))
{

<div class="post_job" align="center" style="margin-left: 1px">
    <div id="tabs_container">
        <div class="my_profile_header">
            <img src="images/high_school.png" width="21" height="20" hspace="5" vspace="3" align="left" /><strong>Post
                Job</strong>
            <label style="float: right; color: Red; font-family: Calibri; font-style: italic;
                margin-top: 10px">
                Fields marked with '*' are mandatory</label>
        </div>
        <div class="my_profile" id="InstituteDetail" style="display: block;">
            <div class="header_title_form">
                <img src="images/photo.png" width="24" height="24" hspace="5" vspace="2" align="left" /><div
                    align="left" style="vertical-align: middle; margin-left: 40px; margin-top: 3px;
                    font-weight: normal;">
                    Institute Detail</div>
            </div>
        </div>
        <div class="my_profile_container" align="center" style="background: none">
            <div class="clear">
            </div>
            <div class="emolyer_box">
                <div align="center" class="mailbox">
                    <table width="100%" border="0" align="center" cellpadding="0" cellspacing="0">
                        <tr>
                            <td height="30" align="left">
                                @Html.Label("Institute Type:")<label style="color: Red">*</label>
                            </td>
                            <td width="319" height="30" align="left">
                                @Html.DropDownListFor(x => x.InstituteType, (SelectList)ViewBag.InstituteType, "--Please Select Institute Type--", new { @class = "select", id = "ddlInstituteType", name = "InstituteType" })
                            </td>
                        </tr>
                        <tr>
                            <td colspan="2">
                                &nbsp;
                            </td>
                        </tr>
                        <tr>
                            <td height="30" align="left" valign="middle">
                                @Html.Label("Institute Category:")<label style="color: Red">*</label>
                            </td>
                            <td width="319" height="30" align="left" valign="middle">
                                <select name="InstituteCategory" id="ddlInstituteCategory" class="select" disabled="disabled">
                                </select>
                                <img id="LoadingImage" style="width: 30px; height: 30px; vertical-align: middle;
                                    visibility: hidden" src="../../Content/images/LoadingImage.gif" alt="Loading.." />
                            </td>
                        </tr>
                        <tr>
                            <td colspan="2">
                                &nbsp;
                            </td>
                        </tr>
                        <tr>
                            <td height="30" align="left">
                                @Html.Label("Institute Name:")<label style="color: Red">*</label>
                            </td>
                            <td width="319" height="30" align="left" valign="middle">
                                @Html.TextBoxFor(x => x.InstituteName, new { id = "txtInstituteName", Name = "InstituteName", @class = "input" })
                                <a style="text-decoration: none; color: Gray; cursor: default;" title="Subscription required for this feature">
                                    <u>Add More</u></a>
                            </td>
                        </tr>
                        <tr>
                            <td colspan="2">
                                &nbsp;
                            </td>
                        </tr>
                        <tr>
                            <td height="30" align="left">
                                @Html.Label("Zip Code:")
                            </td>
                            <td width="319" height="30" align="left" valign="middle">
                                @Html.TextBoxFor(x => x.InstituteName, new { id = "txtZipCode", Name = "ZipCode", @class = "input" })
                            </td>
                        </tr>
                    </table>
                </div>
            </div>
            <div class="emolyer_box">
                <div align="left" class="mailbox">
                    <table width="100%" border="0" align="center" cellpadding="0" cellspacing="0">
                        <tr>
                            <td height="30" align="left">
                                @Html.Label("Institute State:")<label style="color: Red">*</label>
                            </td>
                            <td width="319" height="30" align="left" valign="middle">
                                @Html.DropDownListFor(x => x.StateID, (SelectList)ViewBag.StateList, "---Please Select State---", new { @class = "select", ID = "ddlState", Name = "StateID" })
                            </td>
                        </tr>
                        <tr>
                            <td colspan="2">
                                &nbsp;
                            </td>
                        </tr>
                        <tr>
                            <td height="30" align="left" valign="middle">
                                @Html.Label("Institute City:")<label style="color: Red">*</label>
                            </td>
                            <td width="319" height="30" align="left" valign="middle">
                                <select name="CityID" id="ddlCity" class="select" runat="server">
                                </select>
                            </td>
                        </tr>
                        <tr>
                            <td colspan="2">
                                &nbsp;
                            </td>
                        </tr>
                        <tr>
                            <td height="30" align="left">
                                @Html.Label("Institute Address:")
                            </td>
                            <td width="319" height="30" align="left" valign="middle">
                                @Html.TextAreaFor(x => x.InstituteAddress, new { @class = "input", id = "txtInstituteAddress", style = "height:60px" })
                            </td>
                        </tr>
                    </table>
                </div>
            </div>
            <div class="clear">
            </div>
        </div>
        <!-- End of Institute Div -->
        <div class="my_profile" id="JobDetail" style="display: block">
            <div class="header_title_form">
                <img src="images/photo.png" width="24" height="24" hspace="5" vspace="2" align="left" /><div
                    align="left" style="vertical-align: middle; margin-left: 40px; margin-top: 3px;
                    font-weight: normal">
                    Job Detail</div>
            </div>
        </div>
        <div class="my_profile_container" align="center">
            <div class="clear">
            </div>
            <div class="emolyer_box">
                <div align="center" class="mailbox">
                    <table width="100%" border="0" align="center" cellpadding="0" cellspacing="0">
                        <tr>
                            <td height="30" align="left">
                                @Html.Label("Job Title:")<label style="color: Red">*</label>
                            </td>
                            <td width="319" height="30" align="left" valign="middle">
                                @Html.TextBoxFor(x => x.JobTitle, new { id = "txtJobTitle", Name = "JobTitle", @class = "input" })
                            </td>
                        </tr>
                        <tr>
                            <td colspan="2">
                                &nbsp;
                            </td>
                        </tr>
                        <tr>
                            <td height="30" align="left" valign="middle">
                                @Html.Label("Role:")
                            </td>
                            <td width="319" height="30" align="left" valign="middle">
                                @Html.DropDownListFor(x => x.RoleID, (SelectList)ViewBag.RoleList, "---Please Select Role---", new { @class = "select", ID = "ddlRole" })
                            </td>
                        </tr>
                        <tr>
                            <td colspan="2">
                                &nbsp;
                            </td>
                        </tr>
                        <tr>
                            <td height="30" align="left">
                                @Html.Label("Subject:")
                            </td>
                            <td width="319" height="30" align="left" valign="middle">
                                @Html.DropDownListFor(x => x.SubjectID, (SelectList)ViewBag.SubjectList, "---Please Select Subject---", new { @class = "select", ID = "ddlSubject" })
                            </td>
                        </tr>
                        <tr>
                            <td colspan="2">
                                &nbsp;
                            </td>
                        </tr>
                        <tr>
                            <td height="30" align="left">
                                @Html.Label("Qualification:")
                            </td>
                            <td width="319" height="30" align="left" valign="middle">
                                @Html.DropDownListFor(x => x.QualificationID, (SelectList)ViewBag.QualificationList, "---Please Select Qualification---", new { @class = "select", ID = "ddlQualification" })
                            </td>
                        </tr>
                    </table>
                </div>
            </div>
            <div class="emolyer_box">
                <div align="left" class="mailbox">
                    <table width="100%" border="0" align="center" cellpadding="0" cellspacing="0">
                        <tr>
                            <td height="30" align="left">
                                @Html.Label("Job Type:")
                            </td>
                            <td width="319" height="30" align="left" valign="middle">
                                @Html.DropDownListFor(x => x.JobType, (SelectList)ViewBag.JobTypeList, "---Please Select Job Type---", new { @class = "select", ID = "ddlJobType" })
                            </td>
                        </tr>
                        <tr>
                            <td colspan="2">
                                &nbsp;
                            </td>
                        </tr>
                        <tr>
                            <td height="30" align="left" valign="middle">
                                @Html.Label("Experience:")
                            </td>
                            <td width="319" height="30" align="left" valign="middle">
                                <div class="clear">
                                </div>
                                <div style="text-align: left">
                                    <select name="MinExperience" id="MinExperienceDropDown" style="width: 32%" class="select">
                                        <option value="">--Minimum--</option>
                                        <option value="0">0</option>
                                        <option value="1">1</option>
                                        <option value="2">2</option>
                                        <option value="3">3</option>
                                        <option value="4">4</option>
                                        <option value="5">5</option>
                                    </select>
                                    <select name="MaxExperience" id="MaxExperienceDropDown" style="width: 32%; float: right;
                                        margin-right: 82px" class="select">
                                        <option value="">--Maximum--</option>
                                        <option value="0">0</option>
                                        <option value="1">1</option>
                                        <option value="2">2</option>
                                        <option value="3">3</option>
                                        <option value="4">4</option>
                                        <option value="5">5</option>
                                    </select>
                                </div>
                                <div class="clear">
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td colspan="2">
                                &nbsp;
                            </td>
                        </tr>
                        <tr>
                            <td height="30" align="left">
                                @Html.Label("Salary:")
                            </td>
                            <td width="319" height="30" align="left" valign="middle">
                                <div class="clear">
                                </div>
                                <div style="text-align: left">
                                    <select name="MinSalary" id="MinSalaryDropDown" style="width: 32%" class="select">
                                        <option value="">--Minimum--</option>
                                        <option value="0">0</option>
                                        <option value="1000">1000</option>
                                        <option value="2000">2000</option>
                                        <option value="3000">3000</option>
                                        <option value="4000">4000</option>
                                        <option value="5000">50000</option>
                                    </select>
                                    <select name="MaxSalary" id="MaxSalaryDropDown" style="width: 32%; float: right;
                                        margin-right: 82px" class="select">
                                        <option value="">--Maximum--</option>
                                        <option value="0">0</option>
                                        <option value="1000">1000</option>
                                        <option value="2000">2000</option>
                                        <option value="3000">3000</option>
                                        <option value="4000">4000</option>
                                        <option value="5000">5000</option>
                                    </select>
                                </div>
                                <div class="clear">
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td colspan="2">
                                &nbsp;
                            </td>
                        </tr>
                        <tr>
                            <td height="30" align="left">
                                @Html.Label("No Of Position:")
                            </td>
                            <td width="319" height="30" align="left" valign="middle">
                                @Html.TextBoxFor(x => x.NoOfPosition, new { id = "txtNoOfPosition", Name = "NoOfPosition", @class = "input" })
                            </td>
                        </tr>
                    </table>
                </div>
            </div>
            <div class="clear">
            </div>
        </div>
        <!-- End of Job Detail Div -->
        <div class="my_profile" id="JobDescription" style="display: block">
            <div class="header_title_form">
                <img src="images/photo.png" width="24" height="24" hspace="5" vspace="2" align="left" /><div
                    align="left" style="vertical-align: middle; margin-left: 40px; margin-top: 3px;
                    font-weight: normal">
                    Job Description<label style="color: Red">*</label></div>
            </div>
        </div>
        <div class="my_profile_container" align="center">
            <div class="clear">
            </div>
            <div class="emolyer_box">
                <div align="center" class="mailbox">
                    <table width="100%" border="0" align="center" cellpadding="0" cellspacing="0">
                        <tr>
                            <td height="30" align="left" id="HtmlEditor">
                                @Html.TextAreaFor(x => x.JobDescriptionText, new { name = "inputHtmlEditor", id = "JobDescriptionText", rows = "5", })
                                @*<textarea id="inputHtmlEditor" name="inputHtmlEditor" rows="5"></textarea>*@
                            </td>
                        </tr>
                    </table>
                </div>
            </div>
            <div class="clear">
            </div>
        </div>
        <div class="my_profile" id="ContactInfo" style="display: block">
            <div class="header_title_form">
                <img src="images/photo.png" width="24" height="24" hspace="5" vspace="2" align="left" /><div
                    align="left" style="vertical-align: middle; margin-left: 40px; margin-top: 3px;
                    font-weight: normal">
                    Contact Info</div>
            </div>
        </div>
        <div class="my_profile_container" align="center">
            <div class="clear">
            </div>
            <div class="emolyer_box">
                <div align="center" class="mailbox">
                    <table width="100%" border="0" align="center" cellpadding="0" cellspacing="0">
                        <tr>
                            <td height="30" align="left">
                                @Html.Label("Contact Person Name:")<label style="color: Red">*</label>
                            </td>
                            <td width="319" height="30" align="left" valign="middle">
                                @Html.TextBoxFor(x => x.ContactPersonName, new { id = "txtContPersonName", Name = "ContactPersonName", @class = "input" })
                            </td>
                        </tr>
                        <tr>
                            <td colspan="2">
                                &nbsp;
                            </td>
                        </tr>
                        <tr>
                            <td height="30" align="left" valign="middle">
                                @Html.Label("Phone No:")<label style="color: Red">*</label>
                            </td>
                            <td width="319" height="30" align="left" valign="middle">
                                @Html.TextBoxFor(x => x.InstitutePhoneNo, new { id = "txtInstitutePhoneNo", Name = "InstitutePhoneNo", @class = "input" })
                            </td>
                        </tr>
                        <tr>
                            <td colspan="2">
                                &nbsp;
                            </td>
                        </tr>
                        <tr>
                            <td height="30" align="left">
                                @Html.Label("Logo On Home Page:")
                            </td>
                            <td width="319" height="30" align="left" valign="middle">
                                <input type="checkbox" disabled="disabled" title="Subscription required for this feature" />
                                <a style="text-decoration: none; color: Gray; cursor: default;" title="Subscription required for this feature">
                                    <u>Add/Edit Details</u></a>
                            </td>
                        </tr>
                    </table>
                </div>
            </div>
            <div class="emolyer_box">
                <div align="left" class="mailbox">
                    <table width="100%" border="0" align="center" cellpadding="0" cellspacing="0">
                        <tr>
                            <td height="30" align="left">
                                @Html.Label("E-Mail:")<label style="color: Red">*</label>
                            </td>
                            <td width="319" height="30" align="left" valign="middle">
                                @Html.TextBoxFor(x => x.ContactPersonEmailID, new { id = "txtContactPersonEmailID", Name = "ContactPersonEmailID", @class = "input" })
                            </td>
                        </tr>
                        <tr>
                            <td colspan="2">
                                &nbsp;
                            </td>
                        </tr>
                        <tr>
                            <td height="30" align="left" valign="middle">
                                @Html.Label("Web Site URL:")
                            </td>
                            <td width="319" height="30" align="left" valign="middle">
                                @Html.TextBoxFor(x => x.InstituteWebSite, new { id = "txtInstituteWebSite", Name = "InstituteWebSite", @class = "input" })
                            </td>
                        </tr>
                        <tr>
                            <td colspan="2">
                                &nbsp;
                            </td>
                        </tr>
                        <tr>
                            <td height="30" align="left">
                                @Html.Label("Upload Logo Image:")
                            </td>
                            <td width="319" height="30" align="left" valign="middle">
                                @Html.TextBox("uploadfile", "", new { @class = "input", id = "fileupload", type = "file" })
                            </td>
                        </tr>
                    </table>
                </div>
            </div>
            <div class="clear">
            </div>
        </div>
        <input type="text" value="@TempData["Message"]" />
    </div>
    <!-- End of contact info -->
    <input type="button" class="green_btn" value="Save" disabled="disabled" style="cursor: default"
        title="Subscription required for this feature" />
    <input type="submit" class="blue_btn" value="Post" />
    <input type="button" class="blue_btn" value="Cancel" />
    <input type="text" value="@TempData["Message"]" />
    @Html.Hidden("HiddenField", TempData["Message"])
</div>

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T13:12:58.720

只需返回填充模型的视图；

```
return View(objLocationModel); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T14:17:42.600

好的，问题是您的页面上有一些来自 ViewBags 的 DropDownList，但这些 ViewBags 没有在`PostJobAction`. 让我重申一下 Hari Gillala 所说的使用 ViewBag 并不是很好，至少不是那样。

让我们首先解决您的问题，当您返回带有模型的视图时，任何绑定到模型的控件都将保留其值，如下所示：

```
[AcceptVerbs(HttpVerbs.Post), ValidateInput(false)]
public ActionResult PostJobAction(FormCollection PostJobForm, HttpPostedFileBase uploadfile, JobsDetailModel objLocationModel)
{
    return View(objLocationModel);
} 
```

接下来要做的是在下拉列表中包含这些值，因此您需要重新创建 ViewBags：

```
[AcceptVerbs(HttpVerbs.Post), ValidateInput(false)]
public ActionResult PostJobAction(FormCollection PostJobForm, HttpPostedFileBase uploadfile, JobsDetailModel objLocationModel)
{
    // do this code after you are done doing your stuff
    // you always need to do this since you want to have the same form whether there is an error or your operation is a success
    ViewBag.JobTypeList = create_this_list();
    ViewBag.InstituteType = = create_this_list_also();
    return View(objLocationModel);
} 
```

但是有一个更好的方法来做你现在正在做的事情，那就是创建一个包含一些属性的模型，包括你的列表：

```
// The Model
public class JobActionFormModel {
    public  JobsDetailModel InputModel {get;set;}
    public IEnumerable<JobType> JobTypes {get;set;}
    public IEnumerable<InstituteType> InstituteTypes {get;set;}
}

// The way you build it
[AcceptVerbs(HttpVerbs.Post), ValidateInput(false)]
public ActionResult PostJobAction(FormCollection PostJobForm, HttpPostedFileBase uploadfile, JobsDetailModel objLocationModel)
{
    var model = new JobActionFormModel {
      InputModel = objLocationModel,
      JobTypes = create_this_list(),
      InstituteTypes = create_this_list_also(),
    }
    return View(objLocationModel);
}

// The way you consume it on your view
<td width="319" height="30" align="left">
    @Html.DropDownListFor(x => x.InstituteType, new SelectList(Model.InstituteTypes, "Id", "Value", Model.InstituteType, new { @class="select" })
</td>
// same goes for all your lists 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T13:19:45.817

```
 [HttpPost]
        public ActionResult PostJobAction(FormCollection PostJobForm, HttpPostedFileBase uploadfile, JobsDetailModel objLocationModel)
        {
           if(ModelState.IsValid)
           {
                 return View(objLocationModel);
           }
           else
           {
               // Dropdown selected values  needs to be repopulated here , if there   error in the model.
               return View(objLocationModel);
           }
        } 
```

# flash - Flowplayer 在 Firefox 中为空

> ID：15682754
> 
> 赞同：3
> 
> 时间：2013-03-28T13:11:18.473
> 
> 标签：flash, security, firefox, flowplayer

我正在配置 flowplayer 并且播放器在 Firefox 中根本不显示。转换后的html是这样的：

```
<a id="player-247" style="display:block; width:640px; height:360px" href="http://example.de/path/video.flv">

    <div class="fluid-width-video-wrapper" style="">
         <object type="application/x-shockwave-flash" 
              data="http://example.de/path/js/lib/flowplayer-3.2.16.swf" 
              name="player-247_api" id="player-247_api" style="">
              <param value="true" name="allowfullscreen">
              <param value="always" name="allowscriptaccess">
              <param value="high" name="quality">
              <param value="#000000" name="bgcolor">
              <param value="config=
              {
                   "playlist":[
                   {
                       "url":"http://example.de/path/image.jpg",
                       "scaling":"orig"
                   },
                   {
                        "url":"http://example.de/path/video.flv",
                        "autoPlay":false, 
                        "autoBuffering":false
                   }], 
                  "playerId":"player-247",
                  "clip":{"url":"http://example.de/path/video.flv"}
             }" 
             name="flashvars">
        </object>
    </div>
</a> 
```

当我复制上面的 html 并在**本地尝试时，我**在 firefox 中收到了一个安全警告，指出我即将运行一个**可能不安全的操作**，但在关闭提示后，**视频显示正常**。

这是一个完整的示例[页面](http://5back5.com/dev/test/flowplayer/example.html)，视频在 chrome、opera、ie 等中运行，但不在 Firefox 中。

这可能是什么原因和/或如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-06T20:16:33.543

罪魁祸首是页面顶部包含的这个第三方 javascript 文件：

```
<script type='text/javascript' src='http://tsbgruppe.bagelsystem.de/wp-content/themes/canvas/includes/js/third-party.js?ver=3.4.2'></script> 
```

我将您页面的整个源代码复制到 jsbin.com，验证该视频无法在 FireFox 中运行，然后删除了该`<script>`标签，它现在可以在 Firefox 中运行：

[http://jsbin.com/esijob/1/edit](http://jsbin.com/esijob/1/edit)

# c# - 是否可以将自定义属性的属性使用仅限于特定类型/超类型的类？

> ID：15682762
> 
> 赞同：1
> 
> 时间：2013-03-28T13:11:45.480
> 
> 标签：c#, .net, c#-4.0

标题几乎问了一切。我有一个属性，我希望仅限于在`ApiFunction`派生类上使用。这是否可以以任何方式在属性构造函数中检查目标类型并在一切都不正确时抛出错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T13:26:56.697

不，属性没有提供有关它所应用的代码元素的信息。您将需要一个方法来检查库中的每种类型/方法，以确保该属性仅放置在允许的项目上。

您可以通过创建在构建过程之后运行的 MSBuild 任务来验证已编译的程序集，从而实现*几乎*您所追求的功能，如果该属性被滥用，则允许您产生自己的编译时错误。

# jsf - Primefaces dataExporter 和嵌套数据表

> ID：15682763
> 
> 赞同：3
> 
> 时间：2013-03-28T13:11:50.203
> 
> 标签：jsf, primefaces, datatable, data-export

我正在使用一个`dataTable`inside another `dataTable`。当我尝试使用导出（以任何格式）时，`dataExporter`我得到了类似：“ `org.primefaces.component.datatable.DataTable@1b675ca`”而不是内部数据表值。

是极限`dataExporter`吗？我必须实现这个功能扩展`dataExporter`？有什么选择吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T09:57:33.540

由于我的外部`DataTable`只有一列，并且每一行都是一个子`DataTable`，我以这种方式扩展了 PDFExporter：

```
@Override
    protected String exportValue(FacesContext context, UIComponent component) {
        if (component instanceof DataTable) {
            DataTable tab = (DataTable) component;
            try {
                document.add(exportPDFTable(context, tab, false, false, "UTF-8"));
            } catch (DocumentException ex) {
                Logger.getLogger(ExtendedPDFExporter.class.getName()).log(Level.SEVERE, null, ex);
            }
             return "";       
        else {
            return super.exportValue(context, component);
        }
    } 
```

where`document`是由`export`方法创建的。

现在的问题是每个 sub 都`DataTable`使用动态列，对于导出的 PDF 中的那些列，我得到了`DataTable`每个 sub 中复制的第一个 sub 的值`DataTable`。对此有什么想法吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T13:18:09.363

这是`dataExporter`您必须让自己的出口商来执行此操作的限制。我认为最好尝试覆盖类中的方法（这是所有`exportValue`自`Export`定义导出类的超类）。在这里，如果 value 不是 instance of`HtmlCommandLink`或`ValueHolder`只是`toString()`被使用，这就是为什么你会看到 this 被打印出来。此外，您将必须制作您的动作侦听器，它将实例化您的自定义类以进行导出。

# c# - 从后面的代码创建 HTML 隐藏控件

> ID：15682764
> 
> 赞同：0
> 
> 时间：2013-03-28T13:11:53.640
> 
> 标签：c#, asp.net, master-pages, hidden-field

我有一个 Masterpage 应用程序，我想在其中创建一个隐藏字段
`<asp:HiddenField ID="hdnField" runat="server" Value=""/>`

为了获得客户端时间，所以我遵循建议的选项[“我怎样才能获得客户端机器的时区？”](http://forums.asp.net/post/1647824.aspx) . 但是，由于我的应用程序是 Masterpage 应用程序，我的问题是：我应该在哪里创建 aspx 文件中的隐藏控件（在 .master 文件中......或在子 aspx 页面中，或者我应该在 page_load 事件上创建它.cs 页面）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T13:16:19.313

只需在 .master 页面中添加问题中的标记即可。确保它位于`<form>`标签内。

您的脚本（也在母版页中）如下所示：

```
document.getElementById("<%=this.hdnField.ClientID%>").value = "..."; 
```

# xcode - 从 Xcode 导出并导入 Eclipse

> ID：15682769
> 
> 赞同：0
> 
> 时间：2013-03-28T13:12:08.780
> 
> 标签：xcode, eclipse, import, export

我正在用 C 语言为学校开发一个项目，我使用 Xcode，我所有其他同学都在使用带有 C/C++ 透视图的 Eclipse，所以，有什么方法可以导出我的 Xcode 项目并将其导入另一台带有 eclipse 的 PC ?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T13:18:41.143

在 Eclipse 中建立一个新项目并将您的文件导入到新项目中。也许您将不得不使用文件夹等重新创建您的个人结构，但我认为您无论如何都无法从 xcode-projectfile 中获得它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-23T22:05:25.850

我处于同样的情况，我只是在我的工作空间中压缩项目文件，它变成了我的 TA 通常能够运行的 zip。

# iphone - iOS 6 iAd 奇怪警告

> ID：15682770
> 
> 赞同：0
> 
> 时间：2013-03-28T13:12:11.133
> 
> 标签：iphone, ios, ios6, iad, adbannerview

我已经在我的 iPhone 应用程序中实现了 iAd。我正在使用情节提要并有两个视图控制器。我在两个 viewController 中都实现了 AdBannerView，并将委托设置为 self。我已经导入并实施了 AdBanner delegate 。我还实现了这两种方法`-(void)bannerView:(ADBannerView *)banner didFailToReceiveAdWithError:(NSError *)error`，`-(void)bannerViewDidLoadAd:(ADBannerView *)banner`根据是否有可用的广告来隐藏和显示 adView。但是当我运行应用程序并在两个视图控制器之间来回切换大约 10 次时，我在 Xcode 的记录器中打印了这个。我还在方法中设置`adView = nil`了`-(void)viewDidDisappear:(BOOL)animated`

`WARNING: More than 10 instances of ADBannerView or ADInterstitialView currently exist. This is a misuse of the iAd API, and ad performance will suffer as a result. This message is printed only once.`

这是什么意思？我在实施 iAd 时是否做错了什么？这是否意味着我的应用程序将被 Apple 拒绝？

**解决了：**

`[adView removeFromSuperview];`在`-(void)viewDidDisappear:(BOOL)animated`方法做到了！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T13:59:08.993

试试这个，我认为你的问题解决了

```
- (void) viewWillDisappear:(BOOL)animated 
{
[_adView removeFromSuperview];
_adView.delegate = nil;
_adView = nil;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T13:56:52.930

如错误所示，您的应用中有超过 10 个横幅视图。这通常是由于导航控制器场景中的广告处理不当造成的。您需要使用横幅视图的单例实例。

谷歌`uibannerview single instance`。

# c++ - C++ wstring 发现编译错误

> ID：15682772
> 
> 赞同：0
> 
> 时间：2013-03-28T13:12:13.667
> 
> 标签：c++, find, wstring

我试图在 wstring 中找到制表符的位置。

但是它对我不起作用。

```
 int n = wline.find(L"\t"); 
```

n 是 -1，尽管我确定 wstring 中有一个制表符。

有人看到我的错误吗？我在想也许 L"\t" 可能不正确，但是当我删除 L 时，它就不再编译了。

编辑：我现在发布整个代码，也许问题出在其他地方：

```
void clsCharacterTranslations::LoadSerializedCharacters(string file)
{

FILE* inFile =  fopen(file.c_str(), "rb");

wchar_t signature[2];
fread(signature, sizeof(wchar_t), 1, inFile);

wstring wline;

while (GetLineW(inFile, wline))
{
    udtCharacterTranslation st;

    int b = 0;
    int n = wline.find(L"\t");
    wstring ws1 = wline.substr(0,n-b);

    b = n+1;
    n = wline.find(L"\t",b);
    wstring ws2 = wline.substr(b,n-b);

    st.Text = ws1;
    st.Translation = ws1;

    m_content.push_back(st);
}

fclose(inFile);

}

bool GetLineW(FILE *inFile, wstring &result)
{
wchar_t data[2]={0,0};

result = L"";
do{
    fread(data, sizeof(wchar_t), 1, inFile);

    if (data[0]>=L' ')
        result += data;

    if (data[0]==0x0A)
        break;
}while(!feof(inFile));

if (result.size()>0)
    return true;
else
    return false;
} 
```

我正在读取 void 开头的 2 个第一个字符，因为文本文件是 Windows“Unicode”格式。

谢谢！

# c# - 实现日期/时间选择器的简单方法

> ID：15682775
> 
> 赞同：0
> 
> 时间：2013-03-28T13:12:23.467
> 
> 标签：c#, asp.net-mvc-3, razor, twitter-bootstrap

任何人都知道在 bootstrap/razor html 代码中实现日期/时间选择器的最简单方法是什么？我目前通过直接输入以下方式使程序运行良好：

```
 <div class="editor-label">
        @Html.LabelFor(model => model.date)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.date)
        @Html.ValidationMessageFor(model => model.date)
    </div> 
```

但是希望在选择日期时弹出一个日期/时间选择器吗？有什么建议么？

简单性是这里的关键，因为代码是供一些基础学生查看的。

编辑但不工作：

我的新头，仍然无法正常工作：

```
<meta charset="utf-8">
<title>App Title</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="">
<meta name="author" content="">
<link href="@Url.Content("~/Content/bootstrap/css/bootstrap.css")" rel="stylesheet">
<link href="@Url.Content("~/Content/Site.css")" rel="stylesheet" type="text/css" />
<script src="@Url.Content("~/Scripts/jquery-1.5.1.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/modernizr-1.7.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Content/bootstrap/js/bootstrap.min.js")" type="text/javascript"></script>
<script type="text/javascript">
    $(document).ready(function () {
        $("#date").datepicker();
    });
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T13:23:46.720

jQuery UI 日期选择器

[http://jqueryui.com/datepicker/](http://jqueryui.com/datepicker/)

```
<head>
<link rel="stylesheet" type="text/css" media="screen" href="http://code.jquery.com/ui/1.10.2/themes/smoothness/jquery-ui.css" />
<script src="http://code.jquery.com/jquery-1.9.1.js"></script>
<script src="http://code.jquery.com/ui/1.10.2/jquery-ui.js"></script>

<script type="text/javascript">
    $(document).ready(function () {
        $( "#date" ).datepicker();
    });
</script>
</head> 
```

**更新：**

是`#date`指模型中的名称。如果您需要添加其他日期选择器，只需确保更改`#date`为新的属性名称

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T13:17:57.293

我使用 AjaxControlToolkit 库中的日历控件，非常好。您可以在此链接中了解如何实现它：

[http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/Calendar/Calendar.aspx](http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/Calendar/Calendar.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T14:01:54.703

使用 MVC，您可能需要查看以下帖子。无论模型中的字段名称如何，所有日期或日期/时间字段都可以正常工作。

[http://blogs.msdn.com/b/stuartleeks/archive/2011/01/25/asp-net-mvc-3-integrating-with-the-jquery-ui-date-picker-and-adding-a- jquery-validate-date-range-validator.aspx](http://blogs.msdn.com/b/stuartleeks/archive/2011/01/25/asp-net-mvc-3-integrating-with-the-jquery-ui-date-picker-and-adding-a-jquery-validate-date-range-validator.aspx)

# gwt - 如何在 GWT 中将 Widget 设置为 Anchor 内容而不是通常的 String？

> ID：15682779
> 
> 赞同：1
> 
> 时间：2013-03-28T13:12:27.370
> 
> 标签：gwt, hyperlink, widget, anchor, gxt

我处于一种情况，我希望整个小部件成为另一个页面的链接。两者都只接受字符串或`Anchor`作为视觉表示。但是，我需要例如 a作为链接。`Hyperlink``SafeHTML``<div>...</div>`

这将类似于：

```
<a href="somesite"><div><p>This whole thing is a link</p></div></a> 
```

有没有办法做到这一点，而无需自定义编码我自己的 SafeHTML？更具体地说，我希望 GXT`HBoxLayoutContainer`可以点击和收藏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T13:34:48.057

最简单的解决方案是使用 UiBinder：

```
<ui:UiBinder
  xmlns:ui="urn:ui:com.google.gwt.uibinder"
  xmlns:container="urn:import:com.sencha.gxt.widget.core.client.container">

 ...
 <g:HTMLPanel>
     <a href="somesite">
       <container:HBoxLayoutContainer>...</container:HBoxLayoutContainer>
     </a>
 </g:HTMLPanel> 
```

# iphone - 在 iPhone 应用程序中自动上传相机胶卷？

> ID：15682782
> 
> 赞同：4
> 
> 时间：2013-03-28T13:12:38.793
> 
> 标签：iphone, ios, objective-c, camera

我正在努力寻找一些有用的东西来自动将照片从照片库上传到我的服务器端。在我的 iphone 应用程序中，我想在用户拍摄新照片时自动将照片上传到服务器。facebook、Dropbox 和 google plus 应用程序的做法。

任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T13:28:34.750

大多数情况下，这是一个**3 步过程：**

**1)**获取照片。将其存储到**Documents Directory**中。苹果在这里很好地描述了它：[PhotoPicker](https://developer.apple.com/library/ios/#samplecode/PhotoPicker/Introduction/Intro.html#//apple_ref/doc/uid/DTS40010196)

**2）从****文档目录**中获取照片：

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];
NSString *dataPath = [documentsDirectory stringByAppendingPathComponent:@"Images"];
UIImage *image = [[UIImage alloc] initWithContentsOfFile:[dataPath stringByAppendingPathComponent:[NSString stringWithFormat:@"yourImage.png"]]]; 
```

**3)**现在，您可以将您的照片上传到服务器。该过程在这里得到了很好的描述： [将图像从iphone上传到服务器文件夹](https://stackoverflow.com/questions/1939335/upload-image-from-iphone-to-the-server-folder)

# c++ - MS Visual C++ 运行时库在启动时出错 - 任何调试技巧？

> ID：15682783
> 
> 赞同：1
> 
> 时间：2013-03-28T13:12:39.223
> 
> 标签：c++, msvcrt

启动我的应用程序时，我收到以下错误对话框。我了解这表明加载运行时库时出现问题。问题是，我没有看到任何获取更具体信息的方法。哪个图书馆？加载时遇到的确切问题是什么？等等。系统事件查看器没有任何条目。是否有任何技巧可以准确找出它遇到错误时尝试加载的库以及具体问题是什么？

* * *

```
Microsoft Visual C++ Runtime Library

Runtime Error!

Program: exe path

R6034
An application has made an attempt to load the C runtime library incorrectly.
Please contact the application's support team for more information.* 
```

我目前处理运行时库依赖项的方法是扫描安装目录，提取 .dll 和 .exe 文件的嵌入式清单，然后生成 .config 和 .2.config 文件以重定向到次要版本我随附的运行时库。在过去，这总是能让事情正常进行。在这种情况下并非如此。

由于调用代码是本机 C++ 但某些 DLL 使用 .NET，这可能会有些复杂。我正在调用一个 C++ API，但在后台它最终使用了一些本身使用 .NET 的 DLL。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T14:23:36.067

使用 SysInternals Process Monitor 来监控文件系统访问。过滤进程名称和操作 (CreateFile) 以查看进程找不到哪些 DLL。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T13:16:53.500

它可能表示 msvcr*.dll 的错误版本。

您可以尝试 Dependency Walker ( [http://www.dependencywalker.com/](http://www.dependencywalker.com/) ) 来找出它的链接位置。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T13:22:04.820

确保您拥有尝试附加的代码的调试版本。在“调试”菜单上，选择“附加到进程”。使用 processID -

还要检查这个 - [http://support.microsoft.com/kb/235434](http://support.microsoft.com/kb/235434) 分辨率 1

您应该能够使用任务管理器附加到进程： 启用即时调试 (JIT)：在 Visual C++ 的“工具”菜单上，单击“选项”。在“调试”选项卡上，确保选中“即时调试”。运行任务管理器并选择要附加到的进程。右键单击并选择调试。

决议 2

运行任务管理器并获取要调试的进程的进程 ID。在命令提示符处输入以下内容：msdev -p 这将启动 Visual C++ 并附加到指定的进程。

# jquery - 鼠标悬停仅在一个元素上（同一类）

> ID：15682784
> 
> 赞同：0
> 
> 时间：2013-03-28T13:12:41.653
> 
> 标签：jquery, html, css

我在鼠标悬停时进行颜色更改和图像更改时遇到问题（使用 Jquery，或者如果可能的话使用 CSS 不会发生变化），但我遇到的问题是只有第一个元素或所有元素都发生了变化（使用 ID /CLASS 用于 deisgn 的每个元素），现在这是我的 html 和 CSS 用于我的设计

CSS：

```
#button_id {
    margin: 5px;
    display: block;
}

#button_nav {
    display: inline;
}

#button_img {
    background-image: url('images/left_nav_button.gif');
    width: 11px;
    height: 11px;
    float: left;
} 
```

HTML：

```
<div id="button_id" class="button_id">
    <div id="button_nav"> 
        <div id="button_img" class="button_img"></div>
        <div id="button_name" class="button_name">Employment & skills</div>
        <div id="clear"></div>
    </div>
</div> 
```

我尝试像这样使用 jQuery：

```
$(".button_id").mouseover(function() {
    $("#button_img").css('background-image', 'url(images/left_nav_button_hover.gif)');
    $(".button_id").css('color','#0365b9');
}).mouseout(function() {
    $(".button_img").css('background-image', 'url(images/left_nav_button.gif)');
    $(".button_id").css('color','#8C8C8C');
}); 
```

我试着玩它，我遇到了两种情况：

1.  当每个人都改变颜色+背景图像
2.  只有第一个 div ( id="button_id" class="button_id" ) 有变化。

我尝试切换并使用类/ id 但无法解决它，我也尝试使用`$("#this")`它仅适用于颜色（因为图像是其他 div，我也尝试使用 .children 但我不确定如何在其他 div 上设置它，我尝试了类似的方法

```
$(this).children(("#element")).css(..) 
```

但它没有用:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T13:38:05.523

试试这个：

```
$(document).ready(function() {
    $(".button_id").hover(function() {
    $("#button_img", this).css('background-image', 'url(images/left_nav_button_hover.gif)');
    $(this).css('color', '#0365b9');
}, function() {
    $(".button_img", this).css('background-image', 'url(images/left_nav_button.gif)');
    $(this).css('color', '#8C8C8C');
   });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T13:32:38.340

尝试使用`mouseenter()`和`mouseleave()`

现场演示[**在这里**](http://jsfiddle.net/c3SFr/1/)

**HTML**

```
<div id="button_1" class="button_id">
    <div id="button_nav"> 
        <div id="button_img" class="button_img"></div>
        <div id="button_name" class="button_name">Employment & skills</div>
        <div id="clear"></div>
    </div>
</div><br/>
<div id="button_2" class="button_id">
    <div id="button_nav"> 
        <div id="button_img" class="button_img"></div>
        <div id="button_name" class="button_name">Contact Us</div>
        <div id="clear"></div>
    </div>
</div><br/>
<div id="button_3" class="button_id">
    <div id="button_nav"> 
        <div id="button_img" class="button_img"></div>
        <div id="button_name" class="button_name">Corporate Queries</div>
        <div id="clear"></div>
    </div>
</div> 
```

**CSS**

```
.button_id {
    margin: 5px;
    display: block;
    border:1px dotted red;
}

#button_nav {

    display: inline;
}

#button_img {
    background-image: url('images/left_nav_button.gif');
    width: 11px;
    height: 11px;
    float: left;
} 
```

**jQuery**

```
 $(".button_id").mouseenter(function() {
    $("#button_img", this).css('background-image', 'url(images/left_nav_button_hover.gif)');
    $(this).css('color', '#0365b9');
}).mouseleave(function() {
    $(".button_img", this).css('background-image', 'url(images/left_nav_button.gif)');
    $(this).css('color', '#8C8C8C');
   }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T13:40:27.087

如果我正确理解您的问题，有多个`<div id="button_id" class="button_id">`容器..？

如果是这样，那可能就是问题所在——每个都`id`必须是独一无二的。尝试删除`id`s 并坚持使用类（例如[JSFiddle](http://jsfiddle.net/ABgF2/1/)）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T13:40:31.720

我会放弃所有这些努力并使用 css sprites 来做你想做的事情，不要让自己变得更难。使图像恰好是高度的两倍，将悬停图像放在底部。然后将该图像作为背景添加到您的 a href 中，然后当用户将鼠标悬停在您的 a href 或 div 或任何适用于所有内容的任何内容上时。在 div 之后添加 :hover 在你的 CSS 中。将背景位置更改为底部而不是顶部。完成.. 如果您需要演示，我可以为您提供一个，但简而言之，这是一个精灵。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-28T13:42:18.563

在您给我们的情况下，您不需要使用任何 javascript 来进行简单的悬停更改，因为无论如何您只在其中进行 CSS 更改：

CSS

```
.button_id {
    background: #000000 url(/path/to/image) top left no-repeat;
}
.button_id:hover {
    background: #ff0000 url(/path/to/image2) top left no-repeat;
} 
```

HTML

```
<div id="button_id" class="button_id">
    <div id="button_nav"> 
        <div id="button_img" class="button_img"></div>
        <div id="button_name" class="button_name">Employment & skills</div>
        <div id="clear"></div>
    </div>
</div> 
```

如果你想做非 css 的事情，那么你可以使用这个函数`hover()`：

```
jQuery( function($) {
    $('.button_id').hover(
        function() {
            // Do mouseover stuff here
        },
        function() {
            // Do mouseout stuff here
        }
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-28T13:56:06.273

（首先：由于 ID 必须是唯一的，我假设您在问题中发布的 html 对您的页面也是唯一的）

试图弄清楚你实际上在寻找代码要做的事情——老实说，不要太理解它。要更改单个元素：

```
<div id="button_id">
      <div id="button_nav"> 
            <div id="button_img"></div>
            <div id="button_name">Employment & skills</div>
            <div id="clear"></div>
      </div>
</div>

$("#button_id").mouseover(function() {
    $("#button_img").css('background-image', 'url(images/left_nav_button_hover.gif)');
    $("#button_id").css('color','#0365b9');
}).mouseout(function() {
    $("#button_img").css('background-image', 'url(images/left_nav_button.gif)');
    $("#button_id").css('color','#8C8C8C');
}); 
```

要更改您通常使用类的几个元素，但是 css 看起来会有所不同：

```
.button_Class {
    /*foo*/
}

<div class="button_Class">

$(".button_Class").css('foo','bar'); 
```

等等

# asp.net-mvc - SaaS - 最佳技术选择

> ID：15682785
> 
> 赞同：-2
> 
> 时间：2013-03-28T13:12:41.707
> 
> 标签：asp.net-mvc, saas

我必须开发一个类似于 Google Docs 的应用程序，但有一些特殊要求：成为 SaaS 并同时在线和离线工作？

哪些技术最适合？ASP.NET MVC 是否兼容这种需求？如果是这样，如何使它离线工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T13:18:19.747

> ASP.NET MVC 是否兼容这种需求？

您可以使用任何您喜欢的服务器端技术。

> 如果是这样，如何使它离线工作？

结合[Cache Manifest](http://en.wikipedia.org/wiki/Cache_manifest_in_HTML5)（注意：[有限的浏览器支持](http://caniuse.com/#feat=offline-apps)）使应用程序的文件可以离线使用，并使用[Web 存储](http://en.wikipedia.org/wiki/Web_storage)技术（注意：[合理](http://caniuse.com/#search=web%20storage)的浏览器支持）来存储数据（您必须与服务器同步）如果它希望在系统/浏览器之间共享它，它就会变得可用）。

# windows - 自动删除另一个文件夹中的文件夹的脚本

> ID：15682789
> 
> 赞同：0
> 
> 时间：2013-03-28T13:12:53.573
> 
> 标签：windows, file, batch-file, directory

我遇到了几篇关于 .batch 文件的帖子甚至在线代码以删除文件夹和文件。但是，我仍然对互联网上的无数信息感到困惑。是否有编写脚本的特定方法可以自动删除超过 30 天的文件夹（脚本必须足够聪明才能自行运行，而不是手动完成）

感谢您的帮助，我愿意在这里学习。谢谢！

PS 我附上了一个我想删除的文件夹的例子。如您所见，这些文件夹可以追溯到 2008 年

![在此处输入图像描述](../Images/847ce1a7def6e9edbea9fbd4038d4832.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T13:16:38.253

脚本不能自动运行它们，但操作系统提供了使用计划任务执行此操作的工具。所以你需要自己创建一个批处理文件来删除你需要的东西，然后添加一个重复的计划任务来完成这项工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T13:19:01.957

没有内置批处理命令只能处理具有特定年龄的文件。但是您可以从 Microsoft下载[forfiles 工具。](http://technet.microsoft.com/de-de/library/cc753551%28v=ws.10%29.aspx)它只允许对特定年龄的文件执行命令（在命令行上）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T19:14:30.717

这将删除整个目录树，因此请与 coution 一起使用并删除`echo`，如果输出正常：

```
forfiles /d -30  /c "cmd /c if @isdir==TRUE echo rd /s /q @fname" 
```

# ajax - 使用带有 AJAX 的 API 向 Mailchimp 发送/包含“名称”字段

> ID：15682795
> 
> 赞同：7
> 
> 时间：2013-03-28T13:13:04.580
> 
> 标签：ajax, forms, api, mailchimp

我需要知道如何将“名称”字段发送到 Mailchimp，以便它显示用户在 Mailchimp 的“订阅者”页面上的名称列下提交的“名称”。

**表格如下所示：**

```
<div id="email">
<form action="subscribe.php" id="invite" method="POST">
            <input type="text" placeholder="Enter your name.." name="name" id="name" class="name" data-validate="validate(name)"/>
            <input type="email" placeholder="and your email address.." name="email" id="MCE-email" class="email" data-validate="validate(required, email)"/>
<p>If you agree with the Terms and Privacy, please press the submit button below.</p>

<div class="clear"><input type="submit" value="Submit" name="subscribe" id="mc-embedded-subscribe" class="button"></div>
</form>
<div id="clear"></div>
<div id="result"></div>
</div>
</div>

<script type="text/javascript">
$(document).ready(function() {
$('#invite').ketchup().submit(function() {
if ($(this).ketchup('isValid')) {
var action = $(this).attr('action');
$.ajax({
url: action,
type: 'POST',
data: {
email: $('#MCE-email').val()
},
success: function(data){
$('#result').html(data).css('color', '#a1a1a1', 'padding', '10px 0px 0px 0px');
},
error: function() {
$('#result').html('Sorry, an error occurred.').css('color', 'white');
}
});
}
return false;
});
});
v</script> 
```

**subscribe.php 脚本如下所示：**

```
<?php
$apiKey = 'MYAPIKEY';
$listId = 'MYLISTID';
$double_optin=false;
$send_welcome=false;
$email_type = 'html';
$email = $_POST['email'];
$name = $_POST['name'];
//replace us2 with your actual datacenter
$submit_url = "http://us5.api.mailchimp.com/1.3/?method=listSubscribe";
$data = array(
'email_address'=>$email,
'apikey'=>$apiKey,
'id' => $listId,
'double_optin' => $double_optin,
'send_welcome' => $send_welcome,
'email_type' => $email_type
);
$payload = json_encode($data);

$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, $submit_url);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_POST, true);
curl_setopt($ch, CURLOPT_POSTFIELDS, urlencode($payload));

$result = curl_exec($ch);
curl_close ($ch);
$data = json_decode($result);
if ($data->error){
echo $data->error;
} else {
    echo "Thank you for your email. We'll keep you up to date..";
}

?> 
```

**我在 Mailchimp 中的表单上的“姓名”字段的字段标签是“姓名”**

我希望这是您需要的所有信息，并且有意义..

非常感谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-08T20:33:48.923

从此处找到的 Mailchimp 列表订阅函数文档：http: [//apidocs.mailchimp.com/api/1.3/listsubscribe.func.php](http://apidocs.mailchimp.com/api/1.3/listsubscribe.func.php)

您只需要创建一个 merge_vars 数组，该数组将包含与订阅电子邮件关联的任何其他字段。例如：

```
$merge_vars = array('FNAME'=>'first name', 'LNAME'=>'last name'); 
```

然后只需将该数组传递给您的 $data。

# restlet - AMQP QPID 客户端连接器？

> ID：15682797
> 
> 赞同：0
> 
> 时间：2013-03-28T13:13:09.997
> 
> 标签：restlet, amqp, qpid

我的下一个项目是一个 RESTful 应用程序，因此 Restlet 似乎是实现的绝佳选择。但是，我找不到对 AMQP 的任何支持。向我的项目添加 AMQP 支持（尤其是 QPID）的最佳方式是什么？我正在考虑扩展 org.restlet.Client 但不知道如何开始。任何指针表示赞赏。

谢谢，科亚

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T13:18:23.590

QPID 是 AMQP 协议的一种实现——如果你想要一个 ESB，或者你连接到的服务器。通常您通过 JNDI 或 AMQPConnectionFactory 获得与它的连接（如果我没记错名字的话）。Restlet 与 Servlet 相关。老实说，我看不出一个人和另一个人之间的联系。例如，使用 Restlet，您可以将 HTTP GET 映射到某个路径，但在 GET 之后执行的操作（例如连接到 QPID）完全是您的事。

# android - 在哪里可以找到用户安装的证书 android 4.0 及更高版本

> ID：15682802
> 
> 赞同：26
> 
> 时间：2013-03-28T13:13:20.373
> 
> 标签：android, security, certificate, ssl-certificate

我已经按如下方式安装了我的证书（.crt）：将设备连接到我的计算机->将证书复制到内部存储->在设备上转到设置->安全->从存储安装->并得到“安装成功”或其他东西（它要求我输入设备的密码）。

然后我尝试在“设置”->“安全”->“受信任的凭据”中查找它，但在“系统”和“用户”选项卡中都找不到它……（我知道它应该在“用户”选项卡中，但它是空的）。

我认为安装过程没有问题，因为它要求我输入密码（并且在我通过单击安全菜单中的“清除凭据”删除所有证书之前不允许我撤消它）

帮助一些？

谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-18T02:22:09.433

也有同样的问题。确保您正在安装的证书实际上是 CA 证书，而不仅仅是简单的 x509 证书。不幸的是，ICS 附带的证书安装程序会很乐意安装证书，即使它不是 CA 证书。它会误导性地说证书已成功安装。它甚至会将文件放在 /data/misc/keystore 下。但是，它不会向用户提供无法真正将该证书用于预期目的的反馈。

对于开发/测试，这里有一个关于如何创建这个自签名 CA 证书的方便指南：http: [//langui.sh/2009/01/18/openssl-self-signed-ca/](http://langui.sh/2009/01/18/openssl-self-signed-ca/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-05T17:03:01.803

完成所有步骤后（将文件放在 /data/misc/keystore 下并确保证书是 CA），重新启动您的设备，证书应该会出现。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-11-18T12:35:37.930

自 API 24 (Android 7.0) 以来，您已将其签入

***设置-->安全-->用户凭证***

您可以在其中列出所有用户证书。**在 API 24 以下**，设置中没有显示用户证书的选项（带有私钥的 PKCS12）。**我在API 19 21 22 23**上检查的最简单的选项是安装证书，完成后转到需要使用**Google Chrome应用程序****进行双向 SSL**身份验证的服务器。谷歌浏览器应该会显示已安装证书的列表。如果在没有 Google Chrome 的情况下使用虚拟设备，您可以从**[该站点](https://www.apkmirror.com/apk/google-inc/chrome/variant-%7B%22arches_slug%22%3A%5B%22x86%22%5D%7D/)**下载它。在虚拟设备的屏幕上下载拖放应用程序后。

 *** * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-03-13T23:48:49.183

[这里](https://stackoverflow.com/a/16073479/3739540 "这里")的答案是一个很好的提示，但是由于 Chrome 接受的正确证书（主题替代名称、摘要算法）的变化，链接帖子中的某些内容已过时

到今天为止，这里是完整的：如果你有一个适当的 CA 证书，它会说“包括：... 1 CA”，如果它只是说一个证书，它将安装但不充当 CA。

首先，创建 myca.conf

```
[ ca ]
default_ca = myca

[ crl_ext ]
# issuerAltName=issuer:copy  #this would copy the issuer name to altname
authorityKeyIdentifier=keyid:always

[ myca ]
new_certs_dir = /tmp
unique_subject = no
certificate = root.cer
database = certindex
private_key = privkey.pem
serial = serialfile
default_days = 365
default_md = sha1
policy = myca_policy
x509_extensions = myca_extensions

[ myca_policy ]
commonName = supplied
stateOrProvinceName = supplied
countryName = supplied
emailAddress = optional
organizationName = supplied
organizationalUnitName = optional

[ myca_extensions ]
basicConstraints = CA:false
subjectKeyIdentifier = hash
authorityKeyIdentifier = keyid:always
keyUsage = digitalSignature,keyEncipherment
extendedKeyUsage = serverAuth
crlDistributionPoints = URI:http://mp-test.com.au/myca.crl

subjectAltName = @alt_names 
```

仅在第一次运行这些命令：

```
openssl req -newkey rsa:2048 -days 3650 -x509 -nodes -out root.cer
openssl pkcs12 -export -out root.pfx -inkey privkey.pem -in root.cer
cp privkey.pem root.pem
touch certindex
echo 01 > serialfile 
```

现在为每个域运行这些：

```
domain=www.example.org
openssl req -newkey rsa:2048 -days 3650 -x509 -nodes -out root.cer
openssl req -newkey rsa:2048 -nodes -out ${domain}.csr -keyout ${domain}.key
cat myca.conf > temp.conf
printf "[alt_names]\nDNS.1=${domain}\n" >> temp.conf
openssl ca -md sha512 -batch -config temp.conf -notext -in ${domain}.csr -out ${domain}.cer
openssl x509 -noout -text -in ${domain}.cer
openssl pkcs12 -export -out root.pfx -inkey privkey.pem -in root.cer 
```

root.pfx 是您可以安装在设备上的 CA 证书。${domain.cer} 是您的网站证书，一旦安装了 root.pfx，就应该信任它。**

# ruby - 从哈希中提取键值对

> ID：15682811
> 
> 赞同：0
> 
> 时间：2013-03-28T13:13:32.780
> 
> 标签：ruby, ruby-on-rails-3, hash, erb

我有这个哈希：

```
{
  "results"=>[
    {
      "name"=>"Pete Gallego",
      "party"=>"D",
      "state"=>"TX",
      "district"=>"23",
      "phone"=>"202-225-4511",
      "office"=>"431 Cannon House Office Building",
      "link"=>"http://gallego.house.gov"
    },
    {
      "name"=>"John Cornyn",
      "party"=>"R",
      "state"=>"TX",
      "district"=>"Senior Seat",
      "phone"=>"202-224-2934",
      "office"=>"517 Hart Senate Office Building",
      "link"=>"http://www.cornyn.senate.gov"
    },
    {
      "name"=>"Ted Cruz",
      "party"=>"R",
      "state"=>"TX",
      "district"=>"Junior Seat",
      "phone"=>"202-224-5922",
      "office"=>"B40b Dirksen Senate Office Building",
      "link"=>"http://www.cruz.senate.gov"
    }
  ]
} 
```

我试图在这样的视图中显示信息：

```
name Pete Gallego
Party D
state TX
district 23
. . . 
```

依此类推，每个键都放在其值之前。

当我尝试这样的事情时：

```
<ul>
    <% @my_hash.values[0].each do |key, value| %> 
      <li><%= "#{key.to_s} #{value.to_s}" %> </li>
    <% end %> 
</ul> 
```

我得到的视图类似于：

```
- {"name"=>"Pete Gallego", "party"=>"D", "state"=>"TX", "district"=>"23", "phone"=>"202-225-4511", "office"=>"431 Cannon House Office Building", "link"=>"http://gallego.house.gov"}
- {"name"=>"John Cornyn", "party"=>"R", "state"=>"TX", "district"=>"Senior Seat", "phone"=>"202-224-2934", "office"=>"517 Hart Senate Office Building", "link"=>"http://www.cornyn.senate.gov"}
- {"name"=>"Ted Cruz", "party"=>"R", "state"=>"TX", "district"=>"Junior Seat", "phone"=>"202-224-5922", "office"=>"B40b Dirksen Senate Office Building", "link"=>"http://www.cruz.senate.gov"} 
```

我不确定为什么，如果我打印 key`to_s`后跟 value `to_s`，我会得到每个行项目的整个散列。我误解了一些东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T13:27:39.867

您正在循环数组，但您还需要遍历每个数组项中的每个键值对（这是一个哈希）。这可能会解决它：

```
<ul>
    <% @my_hash.values[0].each do |item| %>
        <% item.each do |key,value| %>
            <li><%= "#{key.to_s} #{value.to_s}" %> </li>
        <% end %>
    <% end %>
</ul> 
```

# python - 如何在 django 测试中伪造某些南迁移（在自定义测试运行器中）？

> ID：15682814
> 
> 赞同：1
> 
> 时间：2013-03-28T13:13:46.550
> 
> 标签：python, django, django-south

我的项目使用第三方应用程序，它不使用 south 进行迁移。我们编写了一个依赖于 3d 方应用程序的数据迁移，因此我们的测试现在失败了。

所以我想自定义我们的测试运行器，以伪造某些迁移，但我找不到正确的位置或函数来覆盖以调用伪造迁移。

谁能指出我应该在哪里做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-28T13:24:55.540

放：

```
SOUTH_TESTS_MIGRATE = False 
```

在您的设置中，South 迁移不会作为您的测试的一部分运行，而是根据您的模型中定义的内容创建数据库作为常规同步数据库。

这也将加快您的测试。

# entity-framework - 将存储过程映射到 EF 中的复杂类型

> ID：15682816
> 
> 赞同：0
> 
> 时间：2013-03-28T13:13:50.483
> 
> 标签：entity-framework, stored-procedures

我有一个存储过程，它返回带有可能连接的数据选择，当我将它映射到 EF 时，正在为该存储过程创建一个复杂的类型模型。我可以为具有更多存储过程返回的列的另一个模型类更改此复杂类型吗？还是必须返回相同数量的列？

谢谢

例如，我有一个返回客户选择的存储过程：

```
 CREATE PROCEDURE [dbo].[CustomersSelect]
AS

    SELECT [CustomerID]
          ,[CompanyName]
          ,[ContactName]
          ,[ContactTitle]
          ,[Address]
          ,[City]      
      FROM [Northwind].[dbo].[Customers] 
```

我在 EF 中导入这个存储过程，而不是使用特定的复杂类型，我想将它映射到 Customer 类

```
public partial class Customer
    {
        public Customer()
        {
            this.Orders = new HashSet<Order>();
        }

        public string CustomerID { get; set; }
        public string CompanyName { get; set; }
        public string ContactName { get; set; }
        public string ContactTitle { get; set; }
        public string Address { get; set; }
        public string City { get; set; }
        public string Region { get; set; }
        public string PostalCode { get; set; }
        public string Country { get; set; }
        public string Phone { get; set; }
        public string Fax { get; set; }

        public virtual ICollection<Order> Orders { get; set; }
    } 
```

在控制器中我尝试使用这个存储过程：

```
public ActionResult About()
{
       var model = context.CustomersSelect();
       return View(model);
} 
```

当我运行此 About() 操作时，我收到此错误：

> 数据读取器与指定的“EfMvc4Model.Customer”不兼容。类型的成员“区域”在数据读取器中没有同名的对应列。

对此有什么帮助吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T21:33:02.903

不幸的是，你不能做你想做的事。如果您有两个单独的存储过程，它们返回两组不同的数据（即使一个是另一个的超集），您将需要使用两个单独的复杂类型将这些存储过程映射到。

正如您所见：当您尝试为第二个存储过程（返回更少的列）“重用”复杂类型时，您将遇到如下错误：

> System.Data.EntityCommandExecutionException 未处理
> 
> 数据读取器与指定的“xxxxxxx”不兼容。类型的成员“ABC”在数据读取器中没有同名的对应列。
> 源=系统.数据.实体

你的第二个电话永远不会奏效。我看不出你怎么能解决这个问题——除了使用**两个****完全匹配**存储过程的输出“形状”的不同的、独立的复杂类型。

# google-maps - 如何检查 KML 图层是否有活动供稿？

> ID：15682818
> 
> 赞同：0
> 
> 时间：2013-03-28T13:13:53.513
> 
> 标签：google-maps, kml, feed, layer

我为 URL 创建了一个 KML 层 - [http://www.nhc.noaa.gov/gis/kml/nhc.kmz](http://www.nhc.noaa.gov/gis/kml/nhc.kmz)。

该图层应用在地图上，我看不到任何图层。原因是此 KML 图层没有活动供稿。

有什么方法可以检查 KML 图层是否有活动供稿？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T13:46:01.817

如果提要未处于活动状态（意味着无法加载 URL），Google 地球将显示带有红色网络链接错误图标的 NetworkLink 图标。网络链接获取状态以不同的图标显示，如下图所示：

![Google 地球项目图标](../Images/b499eac882d80bac4a9b61e18fcd1f60.png)

另请注意，KML 中有两个验证错误，都在目标 KML 中。
网址：[http ://www.nhc.noaa.gov/gis/kml/nhc_active.kml](http://www.nhc.noaa.gov/gis/kml/nhc_active.kml)

1) NetworkLinkControl 过期时间被格式化为非 KML 日期格式。

```
<NetworkLinkControl>
  <minRefreshPeriod>120</minRefreshPeriod>
  <expires>Thu, 28 Mar 2013 17:01:37 UTC</expires>
 </NetworkLinkControl> 
```

kml : *DateTime*字段定义如下：

```
<simpleType name="kml:dateTimeType">
    <union memberTypes="dateTime  date  gYearMonth  gYear"/>
</simpleType> 
```

推荐 ISO-8601 格式：*YYYY-MM-DD'T'HH:MM:SS'Z'* 像这样：**2013-03-28T17:01:37Z**

参考：

*   [http://www.w3schools.com/schema/schema_dtypes_date.asp](http://www.w3schools.com/schema/schema_dtypes_date.asp)
*   [http://www.w3.org/TR/xmlschema-2/#dateTime](http://www.w3.org/TR/xmlschema-2/#dateTime)

* * *

2) 文档的名称定义了两次。第二个名称似乎应该包含一个缺少的`<Folder>`元素。

```
<Document id="active">
   <name>Current Forecasts and Data</name>
   ...
   <ScreenOverlay id="activeLegend">
   </ScreenOverlay>

   ** following 3 tags don't belong here ***
   <name>Active Tropical Cyclones</name>
   <visibility>1</visibility>
   <open>1</open>

</Document> 
```

当 KML 不像您期望的那样工作时，建议使用[KML 验证器来验证它。](http://kmlvalidator.com/home.htm)

# sql-server - 使用新旧值更新审计表的触发器

> ID：15682819
> 
> 赞同：-4
> 
> 时间：2013-03-28T13:13:56.847
> 
> 标签：sql-server, sql-server-2008, triggers

我有两个表，一个是 Products 和 Products_audit，我想像审计表一样使用 Products_audit，所以我想在更新后使用触发器。我写了触发器，但不明白如何连接两个表“已插入”和“已删除”

```
CREATE TRIGGER Super2
ON Products
AFTER Update
AS
BEGIN

INSERT INTO Products_audit

      (ProductID,
       ProductName,
       SupplierID,
       CategoryID,
       QuantityPerUnit,
       UnitPrice,
       UnitsInStock,
       UnitsOnOrder,
       ReorderLevel,
       Discontinued,
       Date,
       [User])

SELECT 

       ProductID,
       ProductName,
       SupplierID,
       CategoryID,
       QuantityPerUnit,
       UnitPrice,
       UnitsInStock,
       UnitsOnOrder,
       ReorderLevel,
       Discontinued,
       getdate(),
       suser_sname()

       FROM deleted

inserted 
    inner join deleted d on i.id = d.id

      END 
```

请帮我写下lastes字符串

```
FROM deleted
inserted 
    inner join deleted d on i.id = d.id

      END 
```

因为我不知道如何以正确的方式编写它们。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T13:27:09.927

好的，因此，如果您只想将行的旧版本和新版本都放入审计表中，那么您不需要 a `JOIN`，而是需要`UNION ALL`.

（正如我在上面的评论中提到的，我根本不理解这个逻辑，我保证你以后意识到它有多么错误时会改变它。）

```
CREATE TRIGGER dbo.Super2
ON dbo.Products FOR UPDATE
AS
BEGIN

  SET NOCOUNT ON;

  INSERT dbo.Products_audit
  (
       ProductID,
       ...other columns...,
       Date,
       [User]
  )
  SELECT 
       ProductID,
       ...other columns...,
       getdate(),
       suser_sname()
    FROM deleted -- <--- ****** deleted ******
  UNION ALL
  SELECT 
       ProductID,
       ...other columns...,
       getdate(),
       suser_sname()
    FROM inserted;
END
GO 
```

我认为您至少需要在审计表上增加一列，指示“更新前”和“更新后”。让我们称之为`ChangeStatus`（您也可以将其重新用于插入和删除操作）：

```
CREATE TRIGGER dbo.Super2
ON dbo.Products FOR UPDATE
AS
BEGIN

  SET NOCOUNT ON;

  DECLARE @d DATETIME = GETDATE(), @u SYSNAME = SUSER_SNAME();

  INSERT dbo.Products_audit
  (
       ProductID,
       ...other columns...,
       ChangeStatus,
       Date,
       [User]
  )
  SELECT 
       ProductID,
       ...other columns...,
       'before update',
       @d,
       @u
    FROM deleted -- <--- ****** deleted ******
  UNION ALL
  SELECT 
       ProductID,
       ...other columns...,
       'after update',
       @d,
       @u
    FROM inserted;
END
GO 
```

# java - 在罐子里运行一个类？

> ID：15682822
> 
> 赞同：0
> 
> 时间：2013-03-28T13:14:02.130
> 
> 标签：java

好的，所以我正在尝试在我的 jar 中执行一个类

我将如何让它在 jar 中运行类？如果这甚至可能的话。

```
 button1.addActionListener(new ActionListener(){
        public void actionPerformed(ActionEvent e) {
            try {
                Runtime.getRuntime().exec("java -Dfile.encoding=Cp1252 -classpath MiddleEarth728/src/bin;MiddleEarth728/src/lib/libs.jar;MiddleEarth728/src/lib/graphics.jar; MiddleEarth728.src.Loader");
                dispose();
            } catch (Exception err) {
                err.printStackTrace();
            }
        }

    });

    button2.addActionListener(new ActionListener(){
        public void actionPerformed(ActionEvent e) {
            try {
                Runtime.getRuntime().exec("Java -Xmx500m client 0 0 highmem members 0");
                dispose();
            } catch (Exception err) {
                err.printStackTrace();
            }
        }

    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T13:18:51.343

为什么不在你的类路径中包含 jar 而只是调用类？

无论如何，如果您确实需要在运行时加载 jar，则必须使用类加载器：

```
URL[] urls = { new URL("jar:file:" + path + "!/") };
cl = URLClassLoader.newInstance(urls);
cl.loadClass(className); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T14:18:29.573

你不想'运行一个类'，你想执行那个类的主要方法。您可以使用反射来做到这一点。

```
URL[] urls = { new URL("jar:file:" + path + "!/") };
cl = URLClassLoader.newInstance(urls);
Class clazz = cl.loadClass(className);
Method mainMethod = clazz.getDeclaredMethod("main", String[].class);
mainMethod.invoke(null, new String[]{}); //can add args here if needed 
```

生成不同 JVM 的唯一优势是安全性。

# php - 我可以在函数声明中省略花括号吗？

> ID：15682825
> 
> 赞同：1
> 
> 时间：2013-03-28T13:14:10.520
> 
> 标签：php, javascript, function

目前，我在 PHP 中声明函数，例如：

```
function theFunction($theVar) {
   ...
} 
```

在 JavaScript 中，例如：

```
function theFunction(theVar) {
   ...
} 
```

当函数只包含一行时，我可以省略花括号吗？像：

```
function theFunction($theVar)
   doSomething(); 
```

和：

```
function theFunction(theVar)
   doSomething(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T13:15:37.097

不，大括号是必需的。（试试看，自己看看）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-28T13:16:45.390

不，PHP 和 JS 都不支持这种声明。`try`和块也是`catch`如此，出于某种原因，它总是需要花括号，即使条件和循环语句不需要。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-28T13:20:09.463

据我所知，这两种语言都不允许这样做。

它们都允许它用于单语句`if()`和循环，但不允许用于函数（对于 PHP，也不允许用于类）。

但即使它被允许，我强烈建议不要这样做；大括号的存在是有原因的，以提高可读性并避免歧义。出于同样的原因，我建议始终将它们用于`if()`s 和 loops，即使它们在那里并不是严格要求的。

像 Python 这样的语言没有大括号，因为它们有非常严格的缩进规则。如果没有这些规则，语言就需要大括号（或其他一些块标记）；如果你不使用它们，你的代码就有很高的逻辑错误风险。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T13:15:44.323

不，无论主要语句如何包含在函数声明中，函数声明都需要一个块。

```
function f()
    console.log(x); // error: unexpected identifier 
```

# c++ - 将结构作为 char 缓冲区传递给 proc 条目

> ID：15682829
> 
> 赞同：0
> 
> 时间：2013-03-28T13:14:17.023
> 
> 标签：c++, c, linux, data-structures, character-encoding

我想将一个字符缓冲区从我的程序传递给一个 proc 条目（比如 /proc/my_file）。此字符缓冲区包含我的结构的元素，其形式为：

```
struct my_table { char src_ip[4]; char dest_ip[4]; int out_flag; }my_t; 
```

我分配 my_table 的元素并将其内容复制到 unsigned char 缓冲区，如下所示：

```
memcpy(buffer, &my_t, sizeof(struct my_table)); 
```

然后我将缓冲区的内容写入我创建的 proc 条目（名称为 my_file），如下所示：

```
write(fd, buffer, sizeof(buffer)); 
```

其中 fd 是使用 O_WRONLY 打开 /proc/my_file 后 open() 返回的文件描述符 | O_APPEND 标志。

我无法理解的是，在这种情况下，我只能看到第一个字符串，即 my_t.src_ip 被写入 /proc/my_file （做了

> 猫 /proc/my_file

检查写入的内容），随后我观察到 /proc/my_file 的 write() 操作在缓冲区内容中遇到空字符时立即结束。

我可以知道为什么会发生这种情况以及如何解决将结构的内容写入 /proc 条目的问题吗？

编辑：SSCCE 我的问题：结构：

```
struct my_iptable { 
    char protocol[5];                   // to check whether the protocol mentioned is tcp/udp/icmp 
    char src_ip[16];                    // source ip address
    char dest_ip[16];                   // destination ip address
    char src_net_mask[16];              // source net mask
    char dest_net_mask[16];             // destination net mask
    int src_port;                       // source port number
    int dest_port;                      // destination port number
    char action[8];                     // either block or unblock
    int delete_rule;                    // gets the rule number to be deleted
    int print_flag;                     // is set if we are asked to print the rules that have been set         
    int out_flag;                       // is set if the packet is outbound, else set to 0;
}; 
```

将 my_ipt 赋值为 null：

结构 my_iptable my_ipt; memset(&my_ipt, '\0', sizeof(struct my_iptable));

我已经正确分配了 my_ipt 的字段。

复制到缓冲区和写入 proc 部分：

```
unsigned char write_buf[sizeof(struct my_iptable)];     
    memcpy(write_buf, &my_ipt, sizeof(struct my_iptable));
int proc_fp = open("/proc/minifw", O_WRONLY | O_APPEND);
    if(proc_fp < 0) {
        printf("Couldn't open /proc/minifw for writing\n");
        exit(EXIT_FAILURE);}

   if(write(proc_fp, write_buf, sizeof(struct my_iptable)) == -1) {
        printf("There was an error writing to minifw buffer\n");
        exit(EXIT_FAILURE);
    } 
```

我希望这可以为您提供有关我想了解的内容的适当信息。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T13:17:24.580

`sizeof(struct my_table)`改为使用

```
write(fd, buffer, sizeof(struct my_table)); 
```

如果你`buffer`被定义为指针：

```
struct my_table *buffer; 
```

那么 的大小`buffer`将等于指针的大小（32 位系统为 4，64 位系统为 8），而不是实际大小`struct my_table`

# qt - 在任何重叠的兄弟小部件前面制作 QMessageBox 或 QmainWindow？

> ID：15682833
> 
> 赞同：2
> 
> 时间：2013-03-28T13:14:28.117
> 
> 标签：qt, pyqt, pyside

如果活动窗口属于其他进程，如何在超时时使本示例的 QMessageBox 或 QmainWindow 在任何重叠的兄弟窗口小部件前面？我试过 raise_(​​) 和 activateWindow() ，但都不能在 WinXP 上工作

```
import sys
from PyQt4.QtGui import *
from PyQt4.QtCore import *

class MainWindow(QWidget):
    def __init__(self, parent=None):
        super(MainWindow, self).__init__(parent)
        self.resize(800,600)

        self.lcdNumber = QLCDNumber()
        self.lcdNumber.setNumDigits(8)

        layout =  QVBoxLayout(self)
        layout.addWidget(self.lcdNumber)

        self.currentTime = QTime(0,0,0)
        self.lcdNumber.display(self.currentTime.toString('hh:mm:ss'))

        self.timer = QTimer(self)
        self.timer.timeout.connect(self.updateLcdNumberContent)
        self.timer.start(1000)

    def updateLcdNumberContent(self):

        self.currentTime = self.currentTime.addSecs(1)
        self.lcdNumber.display(self.currentTime.toString('hh:mm:ss'))

        if self.currentTime == QTime(0,0,4) :
            msgBox = QMessageBox(self)
            msgBox.setWindowTitle('iTimer')
            msgBox.setIcon (QMessageBox.Information)
            msgBox.setText("Time Out !!")

            stopButton = msgBox.addButton("Stop", QMessageBox.ActionRole)
            ignoreButton = msgBox.addButton(QMessageBox.Ignore)

            stopButton.clicked.connect(self.timer.stop)

            msgBox.show()
#            self.raise_()
#            self.activateWindow()

if __name__ == '__main__':
    app =QApplication(sys.argv)
    frame = MainWindow()
    frame.show()
    sys.exit(app.exec_()) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T14:25:43.990

尝试使用`QWidget::setWindowFlags()`QMessageBox 或 QMainWindow 的方法修改窗口标志。你应该`Qt::WindowStaysOnTopHint`为你的目的使用标志。
这将是类似的东西`window->setWindowFlags(window->windowFlags() | Qt::WindowStaysOnTopHint)`。
如果使用 just 不能成功`setWindowFlags(window->windowFlags() | Qt::WindowStaysOnTopHint)`，则需要使用`Qt::CustomizeWindowHint | Qt::WindowStaysOnTopHint`其他标志。尝试一下，你就会成功。

# sql - 在 ANSI SQL 中使用多个 AND 和 OR

> ID：15682834
> 
> 赞同：-3
> 
> 时间：2013-03-28T13:14:33.643
> 
> 标签：sql, select

我有一个简单的 SQL 查询：

```
SELECT
    w.fizz
FROM
    widgets w
WHERE
    w.special_id = 2394
    AND w.buzz IS NOT NULL
    AND w.foo = 12 
```

在伪代码中，这个`WHERE`子句可以被认为是：

```
if(specialId == 2394 && buzz != null && foo == 12) 
```

我现在想更改此查询，使其返回所有 special_id 为 2394、buzz 不为 null、foo 为 12、**或**special_id 为 2394、blah 为 'YES'、num 为 4 的小部件. 在伪代码中：

```
if(specialId == 2394 && (buzz != null && foo == 12) || (blah == "YES" && num == 4)) 
```

我尝试了以下，只是得到错误：

```
SELECT
    w.fizz
FROM
    widgets w
WHERE
    w.special_id = 2394
    AND
    (
        w.buzz IS NOT NULL
        AND w.foo = 12
    )
    OR
    (
        w.blah = 'YES'
        AND w.num = 4
    ) 
```

有任何想法吗？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T13:18:49.983

```
SELECT
    w.fizz
FROM
    widgets w
WHERE
    w.special_id = 2394
    AND
    (
        (
            w.buzz != null
            AND w.foo = 12
        )
        OR
        (
            w.blah = 'YES'
            AND w.num = 4
        )
    ) 
```

在“OR”周围添加额外的括号，因为“OR”的优先级低于“AND”。

# css - bootstrap - 按钮组 - 左侧的按钮被切断

> ID：15682836
> 
> 赞同：0
> 
> 时间：2013-03-28T13:14:37.770
> 
> 标签：css, twitter-bootstrap, responsive-design

**问题：** 我使用 bootstrap css 创建的按钮组出现在左侧被截断，如下所示。

![在此处输入图像描述](../Images/15d6cd3ad0657d77bfb83486a77c1135.png)

**代码：**

我有以下 HTML 逻辑：

```
<div class="span5">
        <div class="row show-grid"> 
        <div class="btn-group>
            <button class="btn dropdown-toggle hidden-desktop visible-phone btn-warning" data-toggle="dropdown">show info&nbsp;<span class="caret"></span></button>
            <ul class="dropdown-menu">
              <li><div id="address"><?php echo anchor("mycontroller/method1/".$objectid,'addresses'); ?></div></li>
              <li><div id="logs"><?php echo anchor("mycontroller/method2/",'logs'); ?></div></li>
              <li><div id="status"><?php echo anchor("mycontroller/method3/",'status'); ?></div></li>
            </ul>
        </div>
        <br/>
            <div class="span2"><?php echo anchor("mycontroller/method4/","Back to List")?></div>
  </div><!-- end class row show-grid-->     
  <br/> 
</div> 
```

**到目前为止我尝试过的：**

我一直在使用 Firefox 的 Inspect 工具来尝试找出顶部按钮和底部按钮之间的差异，但我不知道我应该寻找什么属性。我试过修改属性，如：

```
padding-left
padding-right
margin-left 
margin-right 
```

我还尝试减少应用于按钮的类数量，以便我只有：

```
<button class="btn btn-warning dropdown-toggle" data-toggle="dropdown"> 
```

但这并没有解决问题。有人可以指出我正确的方向吗？也许通过命名我应该追踪的属性类型？这可能是一个 CSS 特异性问题......因为我没有修改任何引导程序的东西。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T13:20:06.303

给这个 CSS

```
.btn{
display:block;
padding:XXpx;
margin:XXpx;
height:XXpx;
width:XXpx;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T13:24:16.543

为什么要为未组合在一起的按钮使用按钮组？它被“切断”的原因是按钮组应该合并在一起。

无论如何，它是这样显示的，因为按钮的内边框没有圆角边缘。您可以通过手动应用边框半径来修复它：

```
border-top-left-radius: 4px; border-bottom-left-radius: 4px 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T13:55:16.910

OMG，答案是：

更改为：

```
<div class="btn-group> 
```

到：

```
<div class="btn-group"> 
```

你忘了`"`

您可以在此处查看实时修复：http: [//jsfiddle.net/kCsEs/](http://jsfiddle.net/kCsEs/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T13:57:47.333

这是一个 hack 修复，但在包含在按钮周围的 div 上 - 你可能只是有

溢出：隐藏

用 firebug 在 chrome 中检查并向上走，你很可能会看到这个。引导程序隐藏了溢出列的数据。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-02-15T16:04:12.117

**以下解决了我的问题**

```
.btn {
     width:auto !important;
} 
```

# iphone - 在 ios 中创建自定义注释类时遇到问题

> ID：15682838
> 
> 赞同：1
> 
> 时间：2013-03-28T13:14:39.927
> 
> 标签：iphone, ios, objective-c, mkmapview, mkannotation

我正在尝试制作一个自定义 MKAnnotation 类，以便它可以保存其他信息，但我不断收到此错误：

```
Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-    [AnnotationForId setCoordinate:]: unrecognized selector sent to instance 0x16f63340' 
```

我已经尝试查找如何创建一个，并且我已经按照我在网上找到的内容进行了操作，但我对为什么我不断收到此错误感到困惑。

这是我的自定义注释类。

```
#import <MapKit/MapKit.h>
#import <UIKit/UIKit.h>

@interface AnnotationForId : NSObject <MKAnnotation >{
    NSString *title;
    NSString *subtitle;
    CLLocationCoordinate2D coordinate;
    NSInteger shopId;
}
@property(nonatomic)NSInteger shopId;
@property (nonatomic,  copy) NSString * title;
@property (nonatomic, copy) NSString * subtitle;
@property (nonatomic, readonly) CLLocationCoordinate2D  coordinate;
@end 
```

我已经在 .m 类中合成了属性变量。

我尝试在我的主控制器中调用自定义类：

```
for(Shop *shops in feed.shops){
        NSLog(@"reached");
        AnnotationForId *shop = [[AnnotationForId alloc] init];
        CLLocationCoordinate2D coords = CLLocationCoordinate2DMake(shops.latitude, shops.longitude);
        shop.coordinate = coords;
        //[[CLLocationCoordinate2DMake(shops.latitude, shops.longtitude)]];
        shop.title = shops.name;
        shop.subtitle = @"Coffee Shop";
        [map addAnnotation:shop];
    } 
```

对为什么这不起作用的任何帮助都会很棒。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T13:17:14.923

似乎您正在尝试设置您的只读属性。

您将其声明为只读：

```
@property (nonatomic, readonly) CLLocationCoordinate2D  coordinate; 
```

但随后您尝试使用 setter：

```
shop.coordinate = coords; 
```

**readonly**意味着不会为其他类定义设置器来利用。

**编辑：** 我认为你应该在你的`AnnotationForId`类中添加便利初始化器，比如：

```
-(id)initWithCoordinate:(CLLocationCoordinate2D)coord
{ 
    self = [super init]; // assuming init is the designated initialiser of the super class
    if (self)
    { 
        coordinate = coord;
    }
    return self;  
} 
```

因此，您的代码将如下所示：

```
for(Shop *shops in feed.shops){
        NSLog(@"reached");
        CLLocationCoordinate2D coords = CLLocationCoordinate2DMake(shops.latitude, shops.longitude);
        AnnotationForId *shop = [[AnnotationForId alloc] initWithCoordinate:coords];
        //[[CLLocationCoordinate2DMake(shops.latitude, shops.longtitude)]];
        shop.title = shops.name;
        shop.subtitle = @"Coffee Shop";
        [map addAnnotation:shop];
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T13:23:27.507

**这是关于如何创建自定义 AnnotationView 的简单示例。**

创建自定义`AnnotationView`：

```
#import <MapKit/MapKit.h>

@interface AnnotationView : MKPlacemark

@property (nonatomic, readwrite, assign) CLLocationCoordinate2D coordinate;

@property (nonatomic, strong) NSString *title;
@property (nonatomic, strong) NSString *subtitle;

// you can put here any controllers that you want. (such like UIImage, UIView,...etc)

@end 
```

而在`.m file`

```
#import "AnnotationView.h"

@implementation AnnotationView

- (id)initWithCoordinate:(CLLocationCoordinate2D)coordinate addressDictionary:(NSDictionary *)addressDictionary
{
    if ((self = [super initWithCoordinate:coordinate addressDictionary:addressDictionary]))
    {
        self.coordinate = coordinate;
    }
    return self;
}

@end 
```

// 使用注释添加`#import "AnnotationView.h"`你的相关`.m file`：

```
CLLocationCoordinate2D pCoordinate ;
pCoordinate.latitude = LatValue;
pCoordinate.longitude = LanValue;

// Create Obj Of  AnnotationView class  

AnnotationView *annotation = [[AnnotationView alloc] initWithCoordinate:pCoordinate addressDictionary:nil] ;

    annotation.title = @"I m Here";
    annotation.subtitle = @"This is Sub Tiitle";

[self.mapView addAnnotation:annotation]; 
```

**以上是如何创建的简单示例`AnnotationView`。**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T13:19:15.773

您已将该属性设置为只读，它只为该属性设置了一个 getter 方法。因此，请保留该属性并再次尝试。

# java - 从文件中读取加密数据

> ID：15682840
> 
> 赞同：1
> 
> 时间：2013-03-28T13:14:48.303
> 
> 标签：java, encryption, des

我正在阅读有关使用私钥进行加密的 IBM 教程。我写的代码如下

```
import java.security.*;
import javax.crypto.*;

// encrypt and decrypt using the DES private key algorithm

public class PrivateExample {

  public static void main (String[] args) throws Exception {
    String text=new String();
     text="THIS IS AN ENCRYPTION TEST";
     byte[] plainText = text.getBytes("UTF8");

    // get a DES private key
    System.out.println( "\nStart generating DES key" );
    KeyGenerator keyGen = KeyGenerator.getInstance("DES");
    keyGen.init(56);
    Key key = keyGen.generateKey();
    System.out.println( "Finish generating DES key" );

    // get a DES cipher object and print the provider
    Cipher cipher = Cipher.getInstance("DES/ECB/PKCS5Padding");
    System.out.println( "\n" + cipher.getProvider().getInfo() );
    //
    // encrypt using the key and the plaintext
    System.out.println( "\nStart encryption" );
    cipher.init(Cipher.ENCRYPT_MODE, key);
    byte[] cipherText = cipher.doFinal(plainText);
    System.out.println( "Finish encryption: " );
    System.out.println( new String(cipherText, "UTF8") );

    //
    // decrypt the ciphertext using the same key
    System.out.println( "\nStart decryption" );
    cipher.init(Cipher.DECRYPT_MODE, key);
    byte[] newPlainText = cipher.doFinal(cipherText);
    System.out.println( "Finish decryption: " );

    System.out.println( new String(newPlainText, "UTF8") );
  }
} 
```

上面的代码效果很好。我能够看到结果和一切。但我想对其进行如下修改，以便可以将密文存储在文件中。然后另一个程序从文件中读取加密文本并对其进行解密。以下是我到目前为止所做的，但我不明白如何进行。只是关于如何进行的一点提示将有所帮助。

```
import java.security.*;
import javax.crypto.*;

// encrypt and decrypt using the DES private key algorithm
public class PrivateExample {

  public static void main (String[] args) throws Exception {
    String text=new String();
    text="This is an encryption test";

    byte[] plainText = text.getBytes("UTF8");

    // get a DES private key
    System.out.println( "\nStart generating DES key" );
    KeyGenerator keyGen = KeyGenerator.getInstance("DES");
    keyGen.init(56);
    Key key = keyGen.generateKey();
    System.out.println( "Finish generating DES key" );
    //
    // get a DES cipher object and print the provider
    Cipher cipher = Cipher.getInstance("DES/ECB/PKCS5Padding");
    System.out.println( "\n" + cipher.getProvider().getInfo() );
    //
   // encrypt using the key and the plaintext
    System.out.println( "\nStart encryption" );
    cipher.init(Cipher.ENCRYPT_MODE, key);
    byte[] cipherText = cipher.doFinal(plainText);
    System.out.println( "Finish encryption: " );
    System.out.println( new String(cipherText, "UTF8") );

   //Now writing to an ouput file the cipherText
   try{
       FileOutputStream fs=new FileOutputStream("c:/test.txt");
      fs.write(cipherText);
     }catch(Exception e){
       e.printStackTrace();
     }
//How to proceed from here

}
} 
```

现在这个程序的工作已经完成。它已成功将加密字符串写入文件。新程序只需解密数据。如何从文件中读取加密字节？新程序显然不知道原始字符串是什么，但我将使用与算法中相同的密钥。请帮忙！我是加密新手

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T14:04:17.150

以下是您将密钥写入文件的方法：

```
 //Write your key to an output file.
        byte[] keyAsByte = key.getEncoded();
        FileOutputStream keyfos = new FileOutputStream("key.txt");
        keyfos.write(keyAsByte);
        keyfos.close(); 
```

我不建议将带有加密文本的密钥放在同一个文件中。

以下是您读取加密文本和密钥并解密的方法：

```
 //Read your key
    FileInputStream keyFis = new FileInputStream("key.txt");
    byte[] encKey = new byte[keyFis.available()];
    keyFis.read(encKey);
    keyFis.close();
    Key keyFromFile = new SecretKeySpec(encKey, "DES");
    //Read your text
    FileInputStream encryptedTextFis = new FileInputStream("test.txt");
    byte[] encText = new byte[encryptedTextFis.available()];
    encryptedTextFis.read(encText);
    encryptedTextFis.close();
    //Decrypt
    Cipher decrypter = Cipher.getInstance("DES/ECB/PKCS5Padding");
    decrypter.init(Cipher.DECRYPT_MODE, keyFromFile);
    byte[] decryptedText = decrypter.doFinal(encText);
    //Print result
    System.out.println("Decrypted Text: " + new String(decryptedText)); 
```

**注意**：我没有使用与您相同的路径来编写信息。

# mysql - 嵌套的 GROUP_CONCAT 查询不返回所有值

> ID：15682842
> 
> 赞同：0
> 
> 时间：2013-03-28T13:14:53.123
> 
> 标签：mysql, group-concat

我有一个带有几个子查询的查询，但奇怪的是子查询不会返回与我手动执行查询相同的值。起初我在查询中使用了“IN”，但没有索引被使用，所以我将它们转换为'='。结果与“IN”或当我使用转换为“=”变体时相同。

```
SELECT * 
FROM partners
WHERE id = ( 

SELECT GROUP_CONCAT( partner_id
SEPARATOR  ' OR id = ' ) 
FROM product_feeds
WHERE id = ( 

SELECT GROUP_CONCAT( DISTINCT feed_id
SEPARATOR  ' OR id = ' ) 
FROM product_data
WHERE category_id = ( 

SELECT GROUP_CONCAT( id
SEPARATOR  ' OR category_id = ' ) 
FROM product_categories
WHERE parent_id = ( 

SELECT GROUP_CONCAT( id
SEPARATOR  ' OR parent_id = ' ) 
FROM product_categories
WHERE parent_id =1 ) 

ORDER BY NULL ) 

ORDER BY NULL ) 

ORDER BY NULL ) 
```

例如，当我手动执行嵌套最深的 3 个子查询时，我得到 10,11,12,33,34,35 作为最终结果。当我一次执行完整的 3 个子查询时，它们返回 10、11、12。

我缺少结果..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T13:22:15.827

与其尝试依赖 GROUP_CONCAT，不如让 INNER JOIN 从存在关系的多个表中获取结果。

```
SELECT 
    -- Best to specify the precise fields you want here instead of *
    *

FROM partners p

INNER JOIN product_feeds pf
ON pf.partner_id = p.id

INNER JOIN product_data pd
ON pd.feed_id = pf.id

INNER JOIN product_categories pc
ON pc.id = pd.category_id

INNER JOIN product_categories pcparent
ON pcparent.id = pc.parent_id
AND pcparent.parent_id = 1 
```

# visual-studio-2012 - 用VS2012调试MPI

> ID：15682843
> 
> 赞同：5
> 
> 时间：2013-03-28T13:14:56.510
> 
> 标签：visual-studio-2012, mpi, visual-studio-debugging

群集调试选项已从 Visual Studio 2012 中删除。那么有没有办法在 VS2012 中调试 MPI 应用程序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-05-10T17:25:17.710

Visual Studio 2012 及更高版本不支持 MPI 调试。但是有一个解决方法：

通过将 mpiexec.exe 指定为命令和相关参数以及可执行文件的名称作为命令参数来开始调试：

```
Command-> mpiexec.exe
CommandArguments-> -n 2 myapp.exe 
```

执行开始时，使用 Debug->Attach to process... 将调试器附加到您的进程。有时我添加一个简单的按任意键来继续我的应用程序的逻辑，只是为了暂停程序，直到我完成这个附加过程。为了减轻麻烦，您可以使用一个名为[Reattach](https://visualstudiogallery.msdn.microsoft.com/8cccc206-b9de-42ef-8f5a-160ad0f017ae "重新连接")的扩展程序，它可以让您通过一键单击附加到您附加的最后一个处理程序。

此解决方法的一个问题是您无法选择附加的 MPI 进程:(

# jquery - 处理 jQuery $.ajax 响应数据

> ID：15682844
> 
> 赞同：2
> 
> 时间：2013-03-28T13:15:00.343
> 
> 标签：jquery, ajax, http, oauth, get

我正在请求一个带有`jQuery $.ajax`. 我将令牌作为 HTTP 响应：

`oauth_token=TX5AybIM&oauth_token_secret=g6WMacNyJy0AkJYEtCP1VOjdZB9e9ksh&oauth_callback_confirmed=true`

控制台上的错误消息：

`ReferenceError: invalid assignment left-hand side`和

`SyntaxError: identifier starts immediately after numeric literal`

我希望能够处理我的 OAauth 授权响应。

```
 //Request Access Token
        $.ajax({
            url: "http://localhost:5000/oauth/request_token",
            type: "GET",
            dataType: "text",
            jsonp: false,
            cache: true,
            contentType: "application/x-www-form-urlencoded; charset=UTF-8",
            data: params_get,
            processData: false,
            cache : true,
            success: function (data) {
                console.log("success");
                alert(data);
            },
            abort: function (data) {
                console.log(data);
                console.log("abort"); 
            },
            error: function (data) {
                console.log("error");
                alert(data);
            }
        }); 
```

# c# - 如何将数据从一个数据网格传递到另一个数据网格，但列数不同

> ID：15682848
> 
> 赞同：0
> 
> 时间：2013-03-28T13:15:09.517
> 
> 标签：c#, winforms, data-binding, datagridview

这是我第一次来这里，所以我会尽力描述我的问题：

我有一个表格，在那个表格上我有两个数据网格，我们称它们为**dg1**和**dg2**。

**dg1**通过 dataadapter 连接到 mssql 数据库，而**dg2**不是！假设我在**dg1**中有关于产品的信息：

*   产品编号
*   描述
*   价格

在**dg2 中，**我有一些我们可以称之为 bill 的东西。所以在**dg2**我有列

*   账单ID
*   帐号ID
*   产品编号
*   描述
*   价格
*   数量

正如您可能预测的那样， billID 是主键，所有其他的都是外键。由于**dg1**填充了数据库中的数据，因此当用户单击**dg1**中的一行以将数据传递给**dg2**时，我想要，而需要以某种方式插入来自 dg2 的其他数据（无论如何这是我的问题）。我有数据库表账单，但我想通过 将数据从一个传递到另一个`celldoubleclickevent`，并将所有数据存储在数据库的账单表中。

```
public void loadData() 
{ 
    try 
    { 
        SqlConnection con1 = getConnection();
        con1.Open();
        SqlCommand com1 = new SqlCommand();
        com1.Connection = con1;
        com1.CommandType = CommandType.Text;
        com1.CommandText = "select * from bill";
        SqlDataReader reader = com1.ExecuteReader();
        dataGridView2.Rows.Clear();
        while (reader.Read()) 
        {

            dataGridView1.AutoGenerateColumns = false; 
            dataGridView2.Rows.Add();
            dataGridView2.Rows[i].Cells[0].Value = reader["billID"].ToString();
            dataGridView2.Rows[i].Cells[1].Value = reader["acountnumberID"].ToString(); 
            dataGridView2.Rows[i].Cells[2].Value = reader["productID"].ToString();
            dataGridView2.Rows[i].Cells[3].Value = reader["Quantity"].ToString();
            dataGridView2.Rows[i].Cells[4].Value = reader["Description"].ToString();
            dataGridView2.Rows[i].Cells[5].Value = reader["price"].ToString();
            i++; 
        }
    } 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T13:48:37.587

这里有几个步骤。

首先，您需要从 dg1 获取信息。您可以使用`RowIndex`事件参数的属性来执行此操作，但您需要检查用户是否没有双击标题。

```
//This will depend on how the grid is bound
var dg1ProductID = GetProductID(dg1.datasource, e.RowIndex); 
```

这个方法的主体可能很简单

```
private void GetProductID(Int32 RowIndex)
{
    return (Int32)(dg1.Rows[RowIndex].Cells[0]);
} 
```

其次，您需要将信息放入 dg2。

```
var newRow = dataGridView2.Rows.Add();

var bill = dataSet1.Tables[0].NewRow();
var accountNumber = GetCurrentAccountNumber();
var userQuantity = AskUserForQuantity();

dataGridView2.Rows[newRow].Cells[0].Value = -1;
dataGridView2.Rows[newRow].Cells[1].Value = accountNumber;
dataGridView2.Rows[newRow].Cells[2].Value = dg1ProductID;
dataGridView2.Rows[newRow].Cells[3].Value = userQuantity;
dataGridView2.Rows[newRow].Cells[4].Value = dg1Description;
dataGridView2.Rows[newRow].Cells[5].Value = dg1price; 
```

由于账单 ID 是主键，我假设它是自动填写的。

第三，您想将数据保存到账单中，不确定是否要在双击事件或单独的按钮单击事件中执行此操作（例如当用户点击时`OK`）。

如果您在双击中执行此操作，则只需将刚刚添加到方法中的相同值传递到将它们保存到数据库中。

```
Save(accountNumber, dg1ProductID, userQuantity, dg1Description, dg1price); 
```

如果没有，那么您可以枚举数据并从单元格值中保存

```
foreach(DataGridViewRow Row in dg2.Rows)
{
    if (Row.Cells[0] == -1)
    {
        Save(Row.Cells[1], Row.Cells[2], Row.Cells[3], Row.Cells[4], Row.Cells[5]);
    }
} 
```

# android - 如何实现 onTouch 监听器？

> ID：15682852
> 
> 赞同：0
> 
> 时间：2013-03-28T13:15:21.540
> 
> 标签：android, touch-event

我想向我的应用程序添加一个侦听器，它允许屏幕上键的位置功能显示地址和消息。我使用下面的函数来获取位置，但我不知道在哪里调用该函数以及如何调用。

```
public boolean onTouch(View v, MotionEvent event) {
    int x = (int) event.getX();
    int y = (int) event.getY();
    Log.d("Screen", String.valueOf(x));
    Log.d("Screen", String.valueOf(y));
    return true;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T13:35:27.203

你可以像下面这样使用

```
yourView.setOnTouchListener(new OnTouchListener(){
   public boolean onTouch(View arg0, MotionEvent event){
        int x = (int) event.getX();
        int y = (int) event.getY();
        Log.d("Screen", String.valueOf(x));
        Log.d("Screen", String.valueOf(y));
        return true;
   } 
); 
```

# javascript - 为什么这个 Facebook javascript-sdk 登录代码会一次又一次地自动记录用户？

> ID：15682853
> 
> 赞同：0
> 
> 时间：2013-03-28T13:15:35.723
> 
> 标签：javascript, facebook, facebook-javascript-sdk

在这里，一旦用户从我的站点按下注销按钮，我就无法让用户退出。他被重定向到登录页面，但使用他再次登录的相同凭据再次调用 updateButton 函数。我尝试了几种方法，但问题仍然存在。我想我在这里的 updateButton 函数中没有正确执行操作，并且 FB.logout() 也没有正确完成，因为我在控制台中收到错误“FB.logout called without a access token”。代码如下：-

```
 $(function(){

           var button; 

           window.fbAsyncInit = function(){

            FB.init({ appId      : 'myAppId',

            status     : true,
            cookie     : true,
            xfbml      : true,
            oauth      : true
        });

         function updateButton(response) {// I am not sure I am doing it right here
             console.log("Update Button Fired.");
             console.log(response);

               button  = document.getElementById('fb-auth');

                if(response.status === 'connected')
                {
                    FB.api('/me', function(info)
                    {
                        login(response,info); 
                    });
                 } 
                else
                {
                     FB.login(function(response)
                     {
                            if(response.status === 'not_authorized')
                           {
                                FB.api('/me', function(info){
                                    login(response, info); 
                                });
                            } 
                            else
                            {

                            }  
                    }, {scope:'email, user_birthday,user_about_me' });
                }
            }  

          }

        FB.getLoginStatus(updateButton);
        FB.Event.subscribe('auth.statusChange', updateButton);

        };

        (function() {
            var e = document.createElement('script');
            e.async = true;
            e.type = 'text/javascript';
            e.src = document.location.protocol +  '//connect.facebook.net/en_US/all.js';
            document.getElementById('fb-root').appendChild(e);
        })();

        function login(response,info){
            console.log('login Showloader called');
            if (response.authResponse) { 
                var accessToken = response.authResponse.accessToken;
              $.post("/web/register/faceBookRegistration",{ data:info,accessTokenValue:accessToken}).done(                       function(data){
                            if(typeof(data) != undefined){
                                window.location = "/web/login/loadViewFaceLogin";

                            }
                        });
            }

        }
        function logout(response){
           FB.logout(function(response){
              console.log("User is now logged out"); 
           });
        }

      }); 
```

我也认为我的注销即

```
 function logout(response){ 
        FB.logout(function(response){
          console.log("User is now logged out"); 
    });
  } 
```

是不正确的。在控制台中，它显示 FB.logout 在没有访问令牌的情况下调用。可能是什么原因

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-30T16:21:46.783

我冒昧地重写了您的代码，保留了您的基础：

```
 // File - fb-init.js

    window.fbAsyncInit = function() {
        FB.init({
            appId      : app_id,
            status     : false,
            cookie     : true,
            xfbml      : true
        });
    };

    (function(d){
        var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
        if (d.getElementById(id)) {return;}
        js = d.createElement('script'); js.id = id; js.async = true;
        js.src = "//connect.facebook.net/en_US/all.js";
        ref.parentNode.insertBefore(js, ref);
    }(document)); 
```

-

```
 // File - main.js

    $('#fb-login').on('click', function() {
        FB.getLoginStatus(function(responseStatus) {
            if (responseStatus.status === 'connected') {
                FB.api('/me', function(responseMe) {
                    if (!responseMe.id) 
                        return false;
                    var accessToken = responseMe.authResponse.accessToken;
                    $.post('/web/register/faceBookRegistration' {
                        data                : responseMe,
                        accessTokenValue    : accessToken
                    }).done(function(data) {
                        if (typeof(data) !== 'undefined')
                            window.location = '/web/login/loadViewFaceLogin';    
                    });   
                });
            }
            else if (responseStatus.status === 'not_authorized') {
                FB.login(function(responseLogin) {
                    FB.api('/me', function(responseMe) {
                    if (!responseMe.id) 
                            return false;
                        var accessToken = responseMe.authResponse.accessToken;
                        $.post('/web/register/faceBookRegistration' {
                            data                : responseMe,
                            accessTokenValue    : accessToken
                        }).done(function(data) {
                            if (typeof(data) !== 'undefined')
                                window.location = '/web/login/loadViewFaceLogin';    
                        });   
                    });
                }, {scope:'email, user_birthday,user_about_me' });    
            }
            else
                return false;
        });    
    });

    $('#fb-logout').on('click', function() {
        FB.logout(function(responseLogout) {

        });    
    }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-29T01:00:48.600

因为*状态*设置为**true**。如果当前用户已经登录 Facebook，它会强制他在网站上自动登录。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-29T15:12:15.713

无论如何，使用 FB.logout() 不是一个好主意，除非您想强制用户从 Facebook（而不是您的网站）注销。

关于弹出窗口，我认为这是因为 FB.getLoginStatus(updateButton); 它在每个页面加载时调用函数 updateButton()。

您应该通过 onclick 功能改进它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-29T09:00:23.090

当我看到这个 Post [FB.logout() 在没有访问令牌的情况下被调用时，](https://stackoverflow.com/questions/8430474/fb-logout-called-without-an-access-token)它证实了我一直在想我的注销没有正确完成。如果能做到这一点，我会没事的。

这是为我完成的注销功能代码：-

```
 function logout(response){

              if(!response.authResponse){
                 window.location = "/web/login/";
                 return;
                }

               FB.logout(function(response){
                 FB.Auth.setAuthResponse(null,'unknown');  
                 logout(response);
              });
        } 
```

正如上面的链接所说，我们应该继续发送注销请求，直到它在 Facebook 端被销毁。我做了一个递归调用，出路是当检查确认它时。

我是一个菜鸟，如果有人致力于当前的解决方案构建一个更优雅的 hack，我会很高兴。

也感谢“ZeNy”。

# c# - 显示组合框（项目）的值

> ID：15682855
> 
> 赞同：2
> 
> 时间：2013-03-28T13:15:37.100
> 
> 标签：c#, combobox

我创建了一个名为 ComboBoxItem 的自己的类

```
public class ComboBoxItem
{
    public string _value;
    public string _text;

    public ComboBoxItem(string val, string text)
    {
        _value = val;
        _text = text;
    }

    public override string ToString()
    {
        return _text;
    }
} 
```

我以这种方式在组合框中输入了一些带有值的文本：

```
busstops = new ComboBoxItem("410000015503", "New Bridge Street-St Dominics");
comboBox1.Items.Add(busstops);
busstops = new ComboBoxItem("410000015552", "Bothal Street (N-Bound), Byker ");
comboBox1.Items.Add(busstops); 
```

现在我喜欢单击一个项目并单击一个按钮，一个消息框会出现，显示所选项目的值。

但问题是组合框只能显示像“新桥街...”这样的文本，因为只有文本在我的组合框中，我喜欢显示它的值..

像这样的东西：

```
Messagebox.show(combobox.selectedCombboxItem.Value); 
```

我需要做什么？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T13:22:42.143

Combobox 将返回一个对象，您需要将其转换`ComboBoxItem`为才能访问`Value`.

```
Messagebox.show(((ComboBoxItem)combobox.SelectedItem).Value); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T13:22:22.200

selectedCombboxItem 返回一个对象，`MessageBox.Show()`将调用`ToString()`.

您需要将 selectedCombboxItem 转换为您自己的类型

```
Messagebox.show(((ComboBoxItem)combobox.selectedCombboxItem).Value); 
```

# php - 如何将此 $_POST 语句从 PHP 转换为coldfusion

> ID：15682857
> 
> 赞同：0
> 
> 时间：2013-03-28T13:15:40.557
> 
> 标签：php, javascript, coldfusion, reference

我想通过使用[此处](http://www.wilhelser.com/2012/04/stop-bot-submitted-form-spam/)描述的网络表单混淆方法来捕获垃圾邮件发送者。

唯一的问题是我在[ColdFusion](http://www.adobe.com/products/coldfusion-family.html)服务器上，而且我的`mailto`表单是 cfm 格式的。

```
if( !isset($_POST['name'])) { die("No Direct Access"); }  // Make sure the form has      actually been submitted

$name = $_POST['name'];
$email = $_POST['email'];
$spam = $_POST['username']; // This is our Honeypot field

if($spam) {  // If the Honeypot field has been filled in
die("No spamming allowed!"); 
} else {
// Process the form like normal
} 
```

**（更新：评论中的代码）**

我的表格：

```
<tr style="display: none;"> 
    <td> <li id="user" style="display: none;"> 
            <label for="spamCatch">spamCatch</label> 
            <input type="text" name="spamCatch"> 
         </li> 
    </td> 
</tr> 
```

我的邮件cfm：

```
<cfparam name="form.Notform1" default=""> 
<cfset spam = false> 
<cfif structKeyExists(form,'name')> 
    <cfset spamCheck = form.spamCheck> 
    <cfif spam> 
         No spam. 
         <cfabort> 
    <cfelse> 
        <cfmail from="title" to="email" subject="subject" server="servername" type="html"> 
            <style type="text/css"> 
            <cfinclude template="../css/cfForms.css"> 
            </style> 
             HTML HERE FROM FORM 
        </cfmail> 
    </cfif> 
</cfif> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T13:31:06.090

这是基本概念。我强烈建议看看[learncfinaweek.com](http://learncfinaweek.com)

```
<cfset spam = false>
// run code to check for spam
<cfif structKeyExists(form,'name')>
    <cfset name = form.name>
    <cfset email = form.email>
    <cfset username = form.username>

    <cfif spam>
        No spam.<cfabort>
    <cfelse>
        <cfmail to="email" from="email" subject="email">
            text
        </cfmail>
    </cfif>
<cfelse>
    No Direct Access.<cfabort>
</cfif> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T14:58:50.637

使用`<cfset spam = len(trim(form.userName))>`阅读下面的解释。

在 PHP[中，空字符串被认为是假的，任何有长度的字符串都被认为是真](http://php.net/manual/en/language.types.boolean.php)。ColdFusion 没有相同的隐式布尔转换。

```
// PHP
var_dump((bool) "");        // bool(false)
var_dump((bool) "foo");     // bool(true)
<!--- CFML --->
yesNoFormat("") <!--- ERROR: cannot convert the value "''" to a boolean --->
yesNoFormat("foo") <!--- ERROR: cannot convert the value "foo" to a boolean --->

$spam = $_POST['username'];
if($spam){} 
```

是相同的

```
<cfset spam = form.userName>
<cfif spam></cfif> 
```

如果表单字段为空，则将产生相同的**无法将值“''”转换为布尔**错误，您希望它会是。

您要做的是检查蜜罐字段的长度或检查空字符串。

```
<cfif len(trim(form.userName))>
<!--- or <cfif trim(form.userName) neq ""> --->
no spam <cfabort>
</cfif> 
```

如果您仍想使用 spam 变量，您可以这样做：

```
<cfset spam = len(trim(form.userName))>
<cfif spam>
    No spam<cfabort>
</cfif> 
```

现在你有`<cfset spam = false>`，但是代码没有做任何事情来改变布尔值。如果您将该行更改为`<cfset spam = len(trim(form.userName))>`您的代码将起作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T13:38:28.023

如果垃圾邮件是隐藏字段，则垃圾邮件将始终存在，因此请检查其是否为空

```
<cfif !structkeyexists(form, "name")>
    <cfdump var="no direct access" abort>
</cfif>

<cfparam name="form.name" default="">
<cfparam name="form.email" default="">
<cfparam name="form.spam" default=""> 

<cfif len(form.spam)>
    <cfdump var="No spamming allowed!" abort>
<cfelse>

</cfif> 
```

# ios - UIImagePicker 调整焦点观察者？

> ID：15682859
> 
> 赞同：0
> 
> 时间：2013-03-28T13:15:44.417
> 
> 标签：ios, objective-c, uiimagepickercontroller, avfoundation

有没有办法找出相机当前是否正在使用 UIImagePicker 对焦？类似于adjustingFocus 观察者使用AVFoundation 的方式。

我目前正在使用 AVFoundation，但我希望能够获得使用 UIImagePicker 实现的图像质量。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T13:45:37.323

您需要在此处定义您的确切要求 - 您想要调整焦点观察器的目的是什么？顾名思义，这是一种向您发出信号的方式`AVCaptureDevice`（参考“真实”设备 -[这些设备](https://developer.apple.com/library/mac/documentation/AVFoundation/Reference/AVFoundation_Constants/Reference/reference.html#//apple_ref/doc/uid/TP40009539-CH4g-SW223)之一）正在调整其焦点。`UIImagePicker`只不过是一个文件打开对话框，而不是真正的设备。它适用于相机或图像文件的静态列表。在相机模式下，您可以观察调整焦点。

如果这是您的要求，[这里](https://stackoverflow.com/a/9110038/1506363)是您可以参考的最近的。请参阅[UIImagePickerController 文档](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIImagePickerController_Class/UIImagePickerController/UIImagePickerController.html)来定义如何根据自己的需要实现它。

# zend-framework - Zend 框架：如何 UNION 两个不同的数据库表

> ID：15682860
> 
> 赞同：0
> 
> 时间：2013-03-28T13:15:45.980
> 
> 标签：zend-framework

我是 Zend 框架的新手。我必须通过在 Zend Framework 中加入两个数据库表来进行查询。这是代码：

```
Select 'DB1',Item1,Item2,Item3,Item4 FROM DB1.Table where condition='20' 
UNION 
Select 'DB2',Item1,Item2,Item3,Item4 FROM DB2.Table where condition='0' LIMIT 50 
```

# python - python中的高效内存使用

> ID：15682863
> 
> 赞同：1
> 
> 时间：2013-03-28T13:15:51.167
> 
> 标签：python, memory-management, matplotlib, pyodbc

我编写了一个 Python 脚本，使用 pyodbc 将数据从 excel 表传输到 ms 访问，还使用 ​​matplotlib 使用 excel 表中的一些数据来创建绘图并将它们保存到文件夹中。当我运行脚本时，它完成了我的预期；然而，我用任务管理器监控它，它最终使用了超过 1500 MB 的 RAM！

我什至不明白这怎么可能。它创建了 560 张图像，但这些图像的总大小仅为 17 MB。excel表格为8.5 MB。我知道，如果不查看我的所有代码，您可能无法确切地告诉我问题出在哪里（我不知道到底是什么问题，所以我只需要发布整个内容，我认为这不合理要求您阅读我的整个代码），但一些一般准则就足够了。

谢谢。

**更新**

我按照@HYRY 的建议做了，并拆分了我的代码。我首先只使用 matplotlib 函数运行脚本，然后不使用它们。正如迄今为止评论过的人所怀疑的那样，内存猪来自 matplotlib 函数。现在我们已经缩小了范围，我将发布我的一些代码。请注意，下面的代码在两个 for 循环中执行。内部 for 循环将始终执行四次，而外部 for 循环执行但需要执行多次。

```
#Plot waveform and then relative harmonic orders on a bar graph.
#Remember that table is the sheet name which is named after the ExperimentID
cursorEx.execute('select ['+phase+' Time] from ['+table+']')
Time = cursorEx.fetchall()                   
cursorEx.execute('select ['+phase+' Waveform] from ['+table+']')
Current = np.asanyarray(cursorEx.fetchall())                                                               
experiment = table[ :-1]                
plt.figure()
#A scale needs to be added to the primary current values
if line == 'P':
    ratioCurrent = Current / 62.5
    plt.plot(Time, ratioCurrent)
else:
    plt.plot(Time, Current)
plt.title(phaseTitle)
plt.xlabel('Time (s)')
plt.ylabel('Current (A)')
plt.savefig(os.getcwd()+'\\HarmonicsGraph\\'+line+'H'+experiment+'.png')

cursorEx.execute('select ['+phase+' Order] from ['+table+']')
cursorEx.fetchone() #the first row is zero
order = cursorEx.fetchmany(51)
cursorEx.execute('select ['+phase+' Harmonics] from ['+table+']')
cursorEx.fetchone()
percentage = np.asanyarray(cursorEx.fetchmany(51))

intOrder = np.arange(1, len(order) + 1, 1)  
plt.figure()                
plt.bar(intOrder, percentage, width = 0.35, color = 'g')                
plt.title(orderTitle)
plt.xlabel('Harmonic Order')
plt.ylabel('Percentage')
plt.axis([1, 51, 0, 100])
plt.savefig(os.getcwd()+'\\HarmonicsGraph\\'+line+'O'+experiment+'.png') 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-20T04:00:12.797

我认为 plt.close() 是一个非常困难的解决方案，因为您将在脚本中执行多个绘图。很多时候，如果您保留图形参考，您可以在它们上完成所有工作，之前调用：

```
plt.clf() 
```

您将看到您的代码如何更快（每次生成画布都不一样！）。当您在没有适当清理的情况下调用多个轴 o 图形时，内存泄漏是可怕的！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-13T19:24:50.373

我在您的代码中没有看到清理部分，但我敢打赌，问题在于您没有打电话

```
plt.close() 
```

在你完成每个情节之后。在完成每个图形后添加一行，看看它是否有帮助。

# html - 我想让 div （包含文本）与文本字段在同一行

> ID：15682865
> 
> 赞同：0
> 
> 时间：2013-03-28T13:15:52.333
> 
> 标签：html, css, position

我有一个带有一些描述的 div、一个文本字段和另一个带有一些错误消息的 div，只有在输入不正确时才会出现。这一切都包含在 ap Tag 中。我的问题是我希望错误消息与文本字段和描述出现在同一行中，并且只有当文本太长时，才会出现在下一行中的单词。但是我不知道该怎么做，我尝试的一切都会导致出现在下一行的整个错误消息。有人知道如何解决吗？

代码： HTML：

```
<p><div class="text">Benutzername</div><input id="bname" class="button" onkeyup="valid('#bname','#bntext')" onkeydown="valid('#bname','#bntext')" type="text" /><div id="bntext" class="hiddentext">Der Benutzername muss mindestens 4 Zeichen und darf maximal 8 Zeichen enthalten.</div></p> 
```

CSS

```
.button{
    position:relative;
    left:0%;
}

.text{
    display:inline-block;
    position:relative;
    text-align:left;
    width:20%;
}
.hiddentext {
    /*display:none;*/
    color:#FF0000;  
} 
```

这是小提琴：http: [//jsfiddle.net/LGp8k/](http://jsfiddle.net/LGp8k/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T13:20:06.617

使用`span`而不是`div`错误消息。

您希望错误消息内联显示。`span`“自然”是一个内联元素。如果使用`div`which 是块元素，则必须将其样式设置为`display: inline`. 如果您使用 jQuery，您可能会使用`.show()`有条件地显示错误消息，并且默认情况下会设置`display: block;`为您的 div 标签。用`span`默认的显示样式是内联的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T13:22:59.503

采用

```
 float:left; 
```

对于 .button 和 .text

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T13:30:53.943

当您想显示错误时，可以将此类设置为`div#bntext`

```
.hiddentext-show {
      display:inline;           
 } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-28T13:36:46.360

```
float:left

<p><div class="text">Benutzername</div><input id="bname" class="button" onkeyup="valid(this.value)" type="text" /><div id="bntext" class="hiddentext">Der Benutzername muss mindestens 4 Zeichen und darf maximal 8 Zeichen enthalten.</div></p>
<script>
    function valid(val)
    {
     var elem = document.getElementById("bntext");
         if(val.length>8)
          {
             elem.style.display='block';
          }
    else
    {
      elem.style.display='none';
    }
    }
</script> 
```

CSS：

```
.button{
    position:relative;
    left:0%;
}
.p
{
    float:left;
}
.text{
    display:inline-block;
    position:relative;
    text-align:left;
    width:20%;
}
.hiddentext {
    display:none;
    float:right;
    color:#FF0000;  
} 
```

这里jsfiddle：

[http://jsfiddle.net/TNLZh/](http://jsfiddle.net/TNLZh/)

# spring - SBT / Spring-AspectJ / 编译时编织

> ID：15682868
> 
> 赞同：2
> 
> 时间：2013-03-28T13:16:02.270
> 
> 标签：spring, scala, maven, sbt, aspectj

我正在使用 scala 2.10、sbt 0.12.2 和 Spring。

我想用 SBT 启用 Spring-AspectJ 编译时编织。我知道一个很棒的 Maven 插件可以做到这一点：

```
 <plugin>
            <groupId>org.codehaus.mojo</groupId>
            <artifactId>aspectj-maven-plugin</artifactId>
            <configuration>
                <complianceLevel>1.6</complianceLevel>
                <aspectLibraries>
                    <aspectLibrary>
                        <groupId>org.springframework</groupId>
                        <artifactId>spring-aspects</artifactId>
                    </aspectLibrary>
                </aspectLibraries>
            </configuration>
            <executions>
                <execution>
                    <goals>
                        <goal>compile</goal>
                    </goals>
                </execution>
            </executions>
        </plugin> 
```

SBT 方面是否存在做同样事情的有效方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T17:57:14.113

免责声明：我不是 SBT 或 Scala 用户。但你的意思是这样的吗？

[https://github.com/sbt/sbt-aspectj](https://github.com/sbt/sbt-aspectj)

# php - 显示一个表的所有结果以及有多少在哪个区

> ID：15682870
> 
> 赞同：0
> 
> 时间：2013-03-28T13:16:07.107
> 
> 标签：php, mysql, join

我有一张汽车记录表。我想查询该表，以便检索所有（找到的）记录，并在结果之外显示一个带有地区名称以及该地区有多少汽车的表。

就像普通的 craigslist 结果页面或类似网站一样，显示结果，左侧是一个表格，显示结果在哪里（在哪个地区等）以及每个地区有多少等。

目前我通过两个查询实现了这一点，但我问我是否不能只用一个查询来完成？

我的表看起来像这样简化：

```
 name | color | year | district
    ------------------------------
    ford | blue  | 1998 | 1010
    opel | red   | 2001 | 1030
    vw   | green | 1999 | 1010
    ...  | ...   | ...  | ... 
```

所以结果应该是这样的：

```
districts       results
---------       ----------
1010 (2)        ford, 1998
1030 (1)        opel, 2001
....            vw, 1999
                ... 
```

希望你明白我的意思。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T13:22:23.613

您不能从单个查询中生成两个视图。如果您想查看所有记录，那就是一个查询。如果您想查看按地区分组的记录，那是一个单独的查询。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T13:24:41.273

您不能从一个查询中生成两个结果集。

要获取包含汽车总数的地区名称，请执行以下操作：

```
SELECT d.name, COUNT(c.id) as total
FROM districts AS d
LEFT JOIN cars AS c ON c.district = d.id
GROUP BY d.id; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T13:22:27.677

我的猜测是您必须为此使用 GROUP BY。

[http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html)

```
SELECT c.name, 
       c.color, 
       c.year, 
       c.district, 
       COUNT(c.id) counted,
FROM   cars c
GROUP BY district, name 
```

# entity-framework-5 - 实体框架 5 在 createObject 上初始化非空属性

> ID：15682875
> 
> 赞同：1
> 
> 时间：2013-03-28T13:16:18.537
> 
> 标签：entity-framework-5

在实体框架 5 中创建实体实例时遇到问题。我通过反射创建它：

```
var method = this.objectContextinstance().GetType().GetMethod("CreateObject");
method = method.MakeGenericMethod(Type.GetType("PERSON"));
var entity = method.Invoke(this.objectContextinstance(), null); 
```

问题是非空属性被初始化为零，我不希望它这样做。原因是，如果我保存它，它会引用另一个键为零的对象，从而创建错误的数据。

有没有一种创建实例的方法，它不会自动设置非空属性，或者是否有配置将非空属性设置为“-1”之类的值？

我提到的问题发生在通过“新”子句创建某个实体的实例。

我正在使用数据库优先方法。

任何帮助，将不胜感激！提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-04-06T16:18:49.507

为了解决这个问题，我在创建后将所有属性设置为默认值：

```
 public void InitializeCreatedEntity(object entity)
    {
        Type tipoObj = entity.GetType();

        string nomeEntidade = GetNomeEntidade(entity);

        foreach (EntityType entityType in EntityTypes)
        {
            if (entityType.Name.Equals(nomeEntidade))
            {
                foreach (EdmProperty property in entityType.Properties)
                {
                    if (!property.Nullable)
                    {
                        PropertyInfo info = tipoObj.GetProperty(property.Name);

                        switch (property.TypeUsage.EdmType.Name)
                        {
                            case "String": info.SetValue(entity, "", null);
                                break;
                            case "Int32": info.SetValue(entity, DefaultInt, null);
                                break;
                            case "Int64": info.SetValue(entity, DefaultInt, null);
                                break;
                            case "Int16": info.SetValue(entity, DefaultInt, null);
                                break;
                            case "Binary": Byte[] initByteArray = { };
                                info.SetValue(entity, initByteArray, null);
                                break;
                            case "DateTime": info.SetValue(entity, DateTime.Now, null);
                                break;
                        }
                    }
                }
            }
        }
    } 
```

# sql - 更新表中的重复字段

> ID：15682877
> 
> 赞同：2
> 
> 时间：2013-03-28T13:16:20.440
> 
> 标签：sql, sql-server, tsql, sql-server-2008-r2, sql-update

我有大约 100000 条记录的表。我需要像这样更新相同的字段。例如这是我的桌子

```
id     name
 1     sss
 2     bbb
 3     ccc
 4     avg
 5     bbb
 6     bbb
 7     sss
 8     mmm
 9     avg 
```

执行脚本后我需要得到

```
id     name
 1     sss
 2     bbb
 3     ccc
 4     avg
 5     bbb-5
 6     bbb-6
 7     sss-7
 8     mmm
 9     avg-9 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T13:19:09.720

通过使用`CTE`

```
WITH greaterRecord 
AS 
(
    SELECT  id, 
            name, 
            ROW_NUMBER() OVER(PARTITION BY name ORDER BY id) RN
    FROM    TableName
)
UPDATE greaterRecord
SET    name = name + '-' + CAST(id AS VARCHAR(10))
WHERE  RN > 1 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!3/508ba/1)

这是适用于大多数 RDBMS 的常见查询

```
UPDATE  a
SET     a.Name = a.Name + '-' + CAST(ID AS VARCHAR(10))
FROM    tableName a
        LEFT JOIN
        (
            SELECT  MIN(ID) min_ID, name
            FROM    tableName
            GROUP   BY name
        ) b ON  a.name = b.name AND
                a.ID = b.Min_ID
WHERE   b.Name IS NULL 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!3/df4854/1)

更新语句执行后的输出

```
╔════╦═══════╗
║ ID ║ NAME  ║
╠════╬═══════╣
║  1 ║ sss   ║
║  2 ║ bbb   ║
║  3 ║ ccc   ║
║  4 ║ avg   ║
║  5 ║ bbb-5 ║
║  6 ║ bbb-6 ║
║  7 ║ sss-7 ║
║  8 ║ mmm   ║
║  9 ║ avg-9 ║
╚════╩═══════╝ 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-28T13:20:05.740

这应该这样做：

```
;WITH CTE AS 
(
    SELECT  id, 
            name, 
            RN = ROW_NUMBER() OVER(PARTITION BY name ORDER BY id)
    FROM YourTable
)
UPDATE CTE
SET name = name + '-' + CAST(id AS VARCHAR(8))
WHERE RN > 1 
```

# java - 想将java值传递给jsp中的javascript函数

> ID：15682881
> 
> 赞同：3
> 
> 时间：2013-03-28T13:16:26.323
> 
> 标签：java, jsp, struts

在我的基于 struts 的项目中，我试图通过从 JSP 中的请求参数中获取字符串值到 JavaScript 函数。这是代码：

```
<%
String timeVal = "Not found";   
    if(request.getAttribute("myDate")!=null){       
        timeVal= (String)request.getAttribute("myDate");
    } 
%> 
```

然后将其作为参数传递给函数

```
<html:submit property = "save" styleClass = "button_c" onclick = "return SubmitPage('update', <%=timeVal %>)">Save</html:submit> 
```

JavaScript 函数在哪里

```
function SubmitPage(action, aa)
{   

alert("Date is  ...." + aa);

} 
```

但是当我尝试运行它时，它给了我一个错误

```
HTTP Status 400 - Request[/AMResourceLibraryListAction] does not contain handler parameter named ref 
```

与网页上的消息。

```
Request[/AMResourceLibraryListAction] does not contain handler parameter named ref 
```

提前致谢。

**编辑**这是堆栈跟踪

```
[ERROR] DispatchAction - -Request[/AMResourceLibraryListAction] does not contain handler parameter named ref 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T13:43:55.860

而不是使用它，我会建议你在你的 JavaScript 函数中使用这样的值

```
var tt = <%=(String)request.getAttribute("myDate")%>
alert(tt+ "Done this...."); 
```

希望这会帮助你。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-28T13:55:05.800

这对我有用：

```
<html:submit property = "save" styleClass = "button_c" onclick = "return SubmitPage('<%=timeVal %>')">Save</html:submit> 
```

('<%=timeVal %>') // 单引号之间

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T13:40:35.687

使用 ' `<%=timeVal %>`' 而不是`<%=timeVal %>`Javascript 方法：

```
<html:submit property = "save" styleClass = "button_c" onclick = "return SubmitPage('update', '<%=timeVal %>')">Save</html:submit> 
```

# ajax - 由于 CanCan 授权，我的部分没有加载。我该如何调试呢？

> ID：15682883
> 
> 赞同：0
> 
> 时间：2013-03-28T13:16:32.877
> 
> 标签：ajax, ruby-on-rails-3, debugging, partial-views, cancan

我在尝试通过来自我的用户视图的异步请求来呈现部分时遇到[了这个问题。](https://stackoverflow.com/questions/15682411/why-does-my-request-for-a-partial-using-remote-isnt-working/15682412#15682412)

问题是 CanCan 没有授权调用，因为它位于我在*user_controller.rb*上创建的新操作中。我是 Rails 的新手，我认为`:edit`上能力课就足够了。

我发现了这个错误，因为我`remote: true`从我的链接中删除了，所以它可以通过 http 请求呈现视图。不要像我为什么那样做。初学者的运气！

我的问题是：如果不是运气，我怎么能调试该错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T13:22:35.233

您可以添加测试用例来解释该部分的呈现，例如（使用 rspec）：

```
response.should render_template(:partial => 'partial_name') 
```

# python - 在python中使用google的protobuf而不安装它

> ID：15682889
> 
> 赞同：7
> 
> 时间：2013-03-28T13:16:46.463
> 
> 标签：python, protocol-buffers

在我看来，当我在 python 中使用 protobuf 时，我需要先安装它，以便我还安装了 setuptools。对我来说，这似乎严重限制了可移植性，因为我必须在每台我想使用任何类型的 python 代码的机器上安装 protobuf。

所以我的问题是：有没有办法以这样的方式为 python 打包 protobuf，它可以与使用它的 python 代码一起分发？

任何有关此的信息将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T13:21:33.407

该包包含一个实验性的 C++ 扩展，安装文件生成 Python 文件，但默认情况下禁用扩展，您应该能够在`setup.py build`脚本中包含结果。

请注意，Python 包仍然需要安装命令行工具。该工具用于为您生成一些 Python。

一旦可用，运行：

```
cd python
python setup.py build 
```

并将`build/lib/google`目录复制到您的脚本分发中，它需要在您的文件`sys.path`中才能导入。

或者，使用`setup.py bdist --formats=zip`生成的 zip 文件（位于 中`dist/protobuf-<version>.<platform>-<architecture>.zip`）的路径并将其添加到您的`sys.path`. 改名应该没问题。

请注意，包使用命名空间，因此`pkg_resources`模块也需要可用。它仅用于`google`在`google/__init__.py`.

# c++ - 将运算符 new() 分配给函数指针？

> ID：15682890
> 
> 赞同：0
> 
> 时间：2013-03-28T13:16:53.453
> 
> 标签：c++, function-pointers, new-operator

我正在尝试定义一个可以传递“对象分配器”函数并将模板对象的运算符 new() 作为默认参数的类。我有以下代码：

```
template<class _Obj>
class Foo
{
private:
    typedef _Obj (_Obj::*fp_alloc_type)();

public:
    Foo(fp_alloc_type t=_Obj::operator new ());

...
}; 
```

这给出了一个编译器错误 C2039: *'new' : is not a member of 'SomeObj'*

编译器不会为没有定义自己的对象生成“新”的默认实现吗？我错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T13:52:12.053

无论它是什么，该`operator new`函数*都不* 是任何类的非静态成员函数。即使您声明并定义了一个特定于类的运算符 new，它也被视为静态成员函数；如果它需要一个`size_t` 参数，那么指向它的指针就是`void* (*ptrToNew)( size_t )`. （如果是新的安置，当然会有更多的争论。）

当您这样做`new Foo`时，编译器 首先在（如果是类类型）`operator new`的范围内进行名称查找，然后在全局命名空间中进行名称查找。（有趣的是，编译器*不会*在声明的命名空间中查找。ADL 也不会应用。在全局命名空间之外的命名空间中的函数永远不会被发现。）除非您在类中声明了 an，否则将使用全局函数。`Foo``Foo`*`Foo``operator new``operator new``operator new`*

# javascript - jquery 没有功能错过元素

> ID：15682896
> 
> 赞同：1
> 
> 时间：2013-03-28T13:16:57.537
> 
> 标签：javascript, jquery

我使用工具提示在页面上显示错误消息，当我单击视图中的其他位置时需要将其关闭。我使用以下代码来控制此操作：

```
$(':not(.qtip)').click(function(){
   $('.qtip').hide();
}); 
```

“.qtip”用于标记工具提示区域。工具提示本身会在出现时创建一个新的，这里发生的是当我单击工具提示时，它会消失。

但是当我使用较小比例的选择器而不是整个身体时，它工作正常，这有点奇怪，例如：

```
$("#id").not('.qtip').click(function (){
    $('.qtip').hide();
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T13:19:30.383

建议只`document`针对处理工具提示之外的点击；选择器`:not(.qtip)`可能会返回一个非常大的结果集。

```
$(document).on('click', function() {
    $('.qtip').hide();
} 
```

在工具提示本身上，您需要防止单击事件冒泡到文档级别，如果您还没有这样做：

```
$('.qtip').on('click', false); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T13:20:13.010

使用事件冒泡来发挥你的优势

```
$(document).on("mouseup", function (e) {
    var target = e.target || e.srcElement;
    var container = $(".qtip");

    if (container.not(target) && container.has(target).length === 0)
    {
        container.hide();
    }
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T13:26:03.643

我建议你做两件事：

```
$(document).click(function() {
    $('.qtip').hide();
});

$('.qtip').click(function(e){
    e.stopPropagation();
}); 
```

1.  单击文档以隐藏`.qtip`
2.  停止点击的事件冒泡`.qtip`，这里点击不会遍历父级。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T13:21:55.100

尝试

```
$(document).on("click", function(e) {
    var qtip = $(e.target).closest('.qtip');
    if(!qtip.length)
        $('.qtip').hide();
}); 
```

# maven - 如何在 vmargs 中创建相对路径？

> ID：15682899
> 
> 赞同：0
> 
> 时间：2013-03-28T13:17:11.917
> 
> 标签：maven, eclipse-plugin, tycho, vmargs, cdo-emf

在我的项目中，我有一个 eclipse cdo-server，它的设置如下所述：http: [//wiki.eclipse.org/Setting_up_a_CDO_Server](http://wiki.eclipse.org/Setting_up_a_CDO_Server)。

我的项目结构是这样的：

```
-cdo-server plugin
 |- config folder with cdo-server.xml
 |- pom.xml
-cdo-server-product
 |-pom.xml
-master
 |-pom.xml 
```

当我将 cdo-server.product 作为 Eclipse 应用程序启动时，一切正常。

当我用 Maven 构建它并实现它时，它也有一个 BUILD SUCCESS。但是当我启动使用 Maven 构建的 CDO-CommonRepositoryServer.app 时，出现错误：

```
!MESSAGE CDO server configuration not found:
/Users/pathtoCDO-Server/CDO-CommonRepositoryServer.app/Contents/MacOS/${resource_loc:/cdo.server/config}/cdo-server.xml. 
```

这是合乎逻辑的，因为这是错误的道路。当我在 vmargs ( `-Dnet4j.config=/Users/pathtoCDO-config/cdo-server.xml`) 中输入 cdo-server.xml 的绝对路径时，它也可以工作。但是，我想让它成为相对的，以便我们 git-repo 中的每个人都可以使用它，而不仅仅是在我的文件夹结构中。

有没有可能使这条路径相对？

只有当`-Dnet4j.config="${resource_loc:/cdo.server/config}"`我将它作为 Eclipse 应用程序运行时，它才有效，但不能作为 maven 构建的 .app 文件运行。

**更新：**

现在我可以启动 CDO-CommonRepository.app 文件，如果我采取

```
-Dnet4j.config=../../../../../../../../../../cdo.server/config 
```

作为路径，但是我只能使用 maven 构建文件启动它，并且我不能再从 Eclipse 内部启动它了......

我为这个新问题创建了一个新问题：[pom.xml 中的属性名称中的斜线](https://stackoverflow.com/questions/16233879/slash-in-property-name-in-pom-xml)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-15T09:35:01.137

我刚刚解决了在这个愚蠢的 /Users/pathtoCDO-Server/CDO-CommonRepositoryServer.app/Contents/MacOS/${resource_loc:/cdo.server/config}/cdo-server 中使用 Maven 复制资源复制文件的问题。 xml 文件夹。

# ms-access - SSIS 包在移动到 64 位后失败

> ID：15682901
> 
> 赞同：3
> 
> 时间：2013-03-28T13:17:23.407
> 
> 标签：ms-access, ssis, jet, ms-jet-ace

我们有一系列 SQL Server 集成服务包，可将数据从几个 MS Access 数据库复制到 SQL Server 2008 数据库中。有一个父包调用各种子包，并且该父包由运行 .bat 文件的用户启动，该文件执行该包，如下所示：

```
dtexec /f "\\networkshare\package.dtsx" /CHECKPOINTING OFF /REPORTING EWCDI 
```

这已经工作了好几年了。我们的 IT 部门已经开始将我们的 32 位 Windows XP 工作站升级到 64 位 Windows 7，并且由于他们已经升级了这些用户的工作站，所以软件包一直失败，给出了错误

> -1071607037,0x,SSIS 错误代码 DTS_E_OLEDB_NOPROVIDER_64BIT_ERROR。请求的 OLE DB 提供程序 MICROSOFT.JET.OLEDB.4.0 未注册 -- 可能没有 64 位提供程序可用。错误代码：0x00000000。OLE DB 记录可用。来源：“Microsoft OLE DB 服务组件”Hresult：0x80040154 描述：“类未注册”。

我的工作站尚未从 Windows XP 升级，我仍然能够运行这些程序包，但我推迟升级的能力已经耗尽，我需要尽快找出解决方案。在我努力解决这个问题的过程中，我发现了许多与此相关的文章和帖子。我尝试过的事情包括：

*   在确保用户安装了客户端工具和商业智能开发工作室并且路径有效后，将 .bat 文件的内容更改为专门引用“C:\Program Files (x86)\Microsoft SQL Server\100\DTS \Binn\dtexec.exe”，希望使用 32 位 JET 提供程序
*   研究了 Run64BitRuntime 设置，但这似乎只在调试时有效，对我没有帮助
*   研究将 /X86 标志添加到命令行，但根据 dtexec 上的 MSDN 文章，这仅在 SQL Server 代理正在运行任务时才有效
*   我尝试的最后一件事是安装 Microsoft Access Database Engine 2010 Redistributable 并将连接字符串从“Provider=Microsoft.Jet.OLEDB.4.0;”更改为 到“提供者=Microsoft.ACE.OLEDB.12.0；”。我似乎无法从这个开始。如果我尝试在 BIDS 中创建新连接并将提供程序设置为“Microsoft Office 12.0 Access Database Engine OLE DB 提供程序”并测试连接，则会收到错误消息“由于初始化提供程序时出错，测试连接失败。未指定的错误” .

我几乎不知道我还能尝试什么并寻求任何帮助，即使它正在尝试我已经尝试过的东西，也许我在最初尝试它们时配置了错误，不确定。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-11-05T14:09:59.950

In SQL Agent job or by just executing the package by itself there is a tab called "Execution options", you can select "Use 32 bit runtime" option

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-29T05:47:13.050

默认情况下，SQL Server 将 64 位版本的 DTEXEC 放在路径中。32 位版本应位于 C:\Program Files(x86)\Microsoft SQL Server\100\DTS\Binn 之类的位置，需要直接调用。我对 ACE 驱动程序和 Excel 文件也有同样的问题。

有关更多信息，请参阅[此](http://msdn.microsoft.com/en-us/library/ms162810(v=sql.105).aspx)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-11-12T19:48:00.340

通过更改项目属性页面中的调试设置，我能够成功运行它。要更改的属性是 Run64BitRuntime -> 将此设置为 false。

# java - 平滑地为分形树设置动画

> ID：15682903
> 
> 赞同：0
> 
> 时间：2013-03-28T13:17:30.567
> 
> 标签：java, animation, fractals

我有一个 Java 程序，它将基于递归方法绘制分形树，我想让它看起来平滑增长，但我不知道该怎么做。

以下是我的代码。这是一项学校作业，只是为了说明这一点，但基本作业只是绘制分形树，我已经完成了，动画是次要的，更多的是我希望完成的个人目标。

```
package Question4;

import java.awt.BasicStroke;
import java.awt.Canvas; 
import java.awt.Color;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.RenderingHints;
import javax.swing.JFrame;

public class FractalTree1 extends Canvas {

  // fields for drawing
  private JFrame frame;
  private final int WINDOW_WIDTH = 1280;
  private final int WINDOW_HEIGHT = 720;

  public FractalTree1() {
    frame = new JFrame("Fractal Tree");
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.setSize(WINDOW_WIDTH, WINDOW_HEIGHT);
    frame.setLocationRelativeTo(null);
    frame.setResizable(true);
    frame.add(this);
    frame.setVisible(true);
  }

  public static void main(String[] args) {
    FractalTree1 ft = new FractalTree1();
    ft.setVisible(true);
    ft.setBackground(Color.black);
  }

  @Override
  public void paint(Graphics g) {
    g.setColor(Color.green);
    drawFractalTree(g, WINDOW_WIDTH / 2, WINDOW_HEIGHT - 75, -90, 11);
  }

  public void drawFractalTree(Graphics g, int x1, int y1, double angle, int depth) {
    if (depth == 0) {
    } else {
      int x2 = x1 + (int) (Math.cos(Math.toRadians(angle)) * depth * 10.0);
      int y2 = y1 + (int) (Math.sin(Math.toRadians(angle)) * depth * 10.0);

      Graphics2D g2d = (Graphics2D) g;
      g2d.setRenderingHint(RenderingHints.KEY_ANTIALIASING,     RenderingHints.VALUE_ANTIALIAS_ON);

      g2d.setStroke(new BasicStroke(0.5f * depth));
      g2d.drawLine(x1, y1, x2, y2);

      drawFractalTree(g, x2, y2, angle + 30, depth - 1);
      drawFractalTree(g, x2, y2, angle - 30, depth - 1);
    }
  } 
} 
```

编辑作为现在的后续行动......当我将 Thread.sleep() 添加到它时，它会笨拙地绘制它，因为这就是递归绘制它的方式。是否可以强制它从“树干”向上绘制，以便模拟实际的树“生长”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T13:25:12.750

要使其正常工作，您可能需要使用[双缓冲](http://old.koalateam.com/jml/java/tricks/double-buffering.html)。本质上，您在屏幕外缓冲区上绘制并在绘制完成后将其刷新到屏幕上。

在您的 drawFractalTree() 方法中，您必须添加一个 Thread.sleep() 调用来延迟绘图。在 g2d.drawLine(x1, y1, x2, y2); 之后直接添加这个 应该做的伎俩。它最终可能会非常缓慢。为了抑制这种情况，您可以使用计数器并在每 10 次调用后休眠 1 毫秒。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T13:30:16.510

要开始看到一些动画，请在 drawFractalTree() 的开头添加一个 Thread.sleep(100) 调用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-10T22:08:56.717

```
Thread.sleep(100); 
```

如果您使用图像从其图形中绘制而不是直接绘制，这将非常有用。因此，每次在其上绘制时，图像像素的颜色都不会改变。

```
package Question4;

import java.awt.BasicStroke;
import java.awt.Canvas; 
import java.awt.Color;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.RenderingHints;
import javax.swing.JFrame;

public class FractalTree1 extends Canvas {

// fields for drawing
private JFrame frame;
private final int WINDOW_WIDTH = 1280;
private final int WINDOW_HEIGHT = 720;

private Image buffer = createImage(WINDOW_WIDTH,WINDOW_HEIGHT);
private Graphics bufferg = buffer.getGraphics();
public FractalTree1() {
    frame = new JFrame("Fractal Tree");
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.setSize(WINDOW_WIDTH, WINDOW_HEIGHT);
    frame.setLocationRelativeTo(null);
    frame.setResizable(true);
    frame.add(this);
    frame.setVisible(true);
}

public static void main(String[] args) {
   FractalTree1 ft = new FractalTree1();
   ft.setVisible(true);
   ft.setBackground(Color.black);
   bufferg.setColor(Color.green);
}

@Override
public void paint(Graphics g) {
    g.drawImage(buffer,0,0,null);
    drawFractalTree(g, WINDOW_WIDTH / 2, WINDOW_HEIGHT - 75, -90, 11);
}

public void drawFractalTree(Graphics g, int x1, int y1, double angle, int depth) {

    if (depth == 0) {
    } else {
    Thread.sleep(100);//It has a catch exception here;
    int x2 = x1 + (int) (Math.cos(Math.toRadians(angle)) * depth * 10.0);
    int y2 = y1 + (int) (Math.sin(Math.toRadians(angle)) * depth * 10.0);

    Graphics2D g2d = (Graphics2D) bufferg;
    g2d.setRenderingHint(RenderingHints.KEY_ANTIALIASING,           RenderingHints.VALUE_ANTIALIAS_ON);

    g2d.setStroke(new BasicStroke(0.5f * depth));
    g2d.drawLine(x1, y1, x2, y2);
    repaint();
    drawFractalTree(g, x2, y2, angle + 30, depth - 1);
    drawFractalTree(g, x2, y2, angle - 30, depth - 1);
    }
   } 
} 
```

# c# - C# 取大负号。作为正值

> ID：15682904
> 
> 赞同：-2
> 
> 时间：2013-03-28T13:17:33.547
> 
> 标签：c#, if-statement, double, eulers-number

切入正题，在我的代码中执行一些计算时，我得到的结果类似于。7.6742332E-30，我将此值存储在双精度变量中，例如，双精度结果 = 7.6742332E-30；

当我稍后检查该值是否大于 0 时，结果为真，即大于 0，我假设是由于 7.6742332。

所以我的问题是，为什么不考虑 E-30，我该如何解决？

任何建议都会很棒，非常感谢我提前！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-28T13:19:36.163

7.6742332E-30 是 0.0000000000000000000000000000076742332，这是一个正数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T13:21:45.893

7.6742332E-30 数学上等于是`7.6742332 x 10^-30`一个正数

# session - 如何在 sessionDestroyed 方法中获取请求对象？

> ID：15682914
> 
> 赞同：0
> 
> 时间：2013-03-28T13:17:59.790
> 
> 标签：session, servlets, cookies, request

我需要`sessionDestroyed`方法中的 Request 对象，因为我需要在那里检索 Cookie。

```
public void sessionDestroyed(HttpSessionEvent httpSessionEvent) 
{
// Here I need to get Request object so that I can retrieve Cookies.
} 
```

是否可以获取`request`对象以便我可以在那里检索 Cookie？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T13:32:19.377

不，当会话被销毁时，不一定意味着 HTTP 请求。它可以在超时期间被销毁，因为客户端没有发送任何请求，例如 30 分钟。HTTP 请求可用的唯一情况是您`HttpSession#invalidate()`在按下注销按钮时显式调用自己的情况。但是在您调用该方法的那一刻，您手头已经有一个 HTTP 请求。然后，您可以在同一时刻而不是在会话侦听器中执行 cookie 工作。

您不清楚您错误地认为这将是正确解决方案的具体功能要求，因此我无法就如何正确解决该问题给出一个非常合适的答案。但其中一种方法是将存储在 cookie 中的信息的副本存储为会话的属性。如果您需要在每个请求的基础上执行此操作，例如，因为 cookie 值可以由客户端的 JS 操作，那么您可以为此使用[servlet 过滤器](https://stackoverflow.com/tags/servlet-filters/info)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T13:40:15.120

不，没办法。

Session Destroy 可能是异步发生的，并且超出了请求生命周期的范围。

在请求生命周期范围之外获取对请求对象的引用，你的想法是不正确的。

# php - 当前时间戳的 php time() vs mktime()

> ID：15682916
> 
> 赞同：12
> 
> 时间：2013-03-28T13:18:00.910
> 
> 标签：php, time, mktime

**使用带有默认参数的函数time()**和**mktime()**来获取当前时间戳之间有什么区别吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-28T13:18:42.223

“从 PHP 5.1 开始，当不带参数调用时，mktime() 会抛出 E_STRICT 通知：请改用 time() 函数。”

[http://php.net/manual/en/function.mktime.php](http://php.net/manual/en/function.mktime.php)

如果你想使用日期/时间，我推荐 DateTime。

# python - 从列表中分离点值

> ID：15682917
> 
> 赞同：0
> 
> 时间：2013-03-28T13:18:01.430
> 
> 标签：python, python-2.7

我有一个 csv 文件。在一个特定的列中，比如 c3，我有用点格式化的数据。例如，这些列包含：

```
c3={[12.14.01],[12.14.02],[12.14.03],[12.14.04].....} 
```

我想将它们分成三个部分：12 14 01，分别，并将它们放回同一个 csv 文件中，作为特定列附加。例子：

```
column10=12 column11=14 columnn12=01  append row 1
column10=12 column11=14 columnn12=02 append  row 2
column10=12 column11=14 columnn12=03 append  row 3 
```

如何使用 python 做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T13:24:17.300

它只是一个字符串，您可以将其拆分为`.`：

```
>>> '12.14.01'.split('.')
['12', '14', '01'] 
```

从那里开始，构造一个新列表并传递回 a`csv.writer()`以写入新文件是微不足道的。

# unit-testing - 单元测试和集成测试定义和 Maven

> ID：15682922
> 
> 赞同：0
> 
> 时间：2013-03-28T13:18:12.153
> 
> 标签：unit-testing, integration-testing, terminology, layer, definition

您如何定义单元测试和集成测试之间的边界？

它究竟在哪里？层测试在哪一部分？

[测试每一层及其下层的集成测试的](https://stackoverflow.com/questions/15679212/terminology-for-integration-tests-which-test-each-layer-and-the-layers-below-it)相关术语（Jenga 测试）
[集成测试和单元测试有什么区别？](https://stackoverflow.com/questions/10752/what-is-the-difference-between-integration-and-unit-tests)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T13:24:22.607

我建议使用 Apache Maven 定义：您在获得包后运行的那些测试是集成测试。

[构建生命周期简介](http://maven.apache.org/guides/introduction/introduction-to-the-lifecycle.html)

> *   package - 获取编译后的代码并将其打包成可分发的格式，例如 JAR。
>     
>     
> *   集成测试 - 如有必要，将包处理并部署到可以运行集成测试的环境中

然后层测试是单元测试的一部分。

# objective-c - 将 NSColor 转换为 RGB

> ID：15682923
> 
> 赞同：6
> 
> 时间：2013-03-28T13:18:13.557
> 
> 标签：objective-c, cocoa, nscolor

我正在尝试将 NSColor 转换为 RGB，但它似乎给出了完全错误的结果：

```
NSColor *testColor = [NSColor colorWithCalibratedWhite:0.65 alpha:1.0];

const CGFloat* components = CGColorGetComponents(testColor.CGColor);
NSLog(@"Red: %f", components[0]);
NSLog(@"Green: %f", components[1]);
NSLog(@"Blue: %f", components[2]);
NSLog(@"Alpha: %f", CGColorGetAlpha(testColor.CGColor)); 
```

我回来了：红色 = 0.65 - 绿色 = 1.0 - 蓝色 = 0.0 并且 alpha 为 1.0 - 这导致颜色完全不同。（它应该是灰色的，现在是绿色的）。

难道我做错了什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2015-12-06T08:42:12.753

## 从 NSColor 中提取 RGBA 值：（Swift 3）

```
let nsColor:NSColor = NSColor.red
let ciColor:CIColor = CIColor(color: nsColor)!
print(ciColor.red)//1.0
print(ciColor.green)//0.0
print(ciColor.blue)//0.0
print(ciColor.alpha)//1.0 /*or use nsColor.alphaComponent*/ 
```

**注意：** NSColor.blackColor().redComponent 会使应用程序崩溃，但上面的代码不会

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2017-07-21T09:56:55.877

当我想将选择的颜色转换为十六进制时，我遇到了同样的问题。NSColor 组件值不正确。我设法通过您上面的[评论](https://stackoverflow.com/a/15682981/657988)解决了我的问题。

斯威夫特的例子：

```
let colorTest = NSColor.init(calibratedWhite: 0.65, alpha: 1.0)
let color = colorTest.usingColorSpace(NSColorSpace.deviceRGB) ?? colorTest
print(colorTest)
// NSCalibratedWhiteColorSpace 0.65 1
print(colorTest.colorSpace) 
// Generic Gray colorspace
print("red: \(color.redComponent) green:\(color.greenComponent) blue:\(color.blueComponent)") 
// red: 0.708725869655609 green:0.708725869655609 blue:0.708725869655609 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-03-28T13:20:37.307

您需要[`NSColorSpace`](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/NSColorSpace_Class/Reference/Reference.html#//apple_ref/doc/c_ref/NSColorSpace)首先使用对象将颜色转换为 RGB 颜色空间，然后您可以使用各种[`NSColor`](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/NSColor_Class/Reference/Reference.html)访问器方法获取组件

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-03-28T13:22:44.177

为一个`NSColor * color`

```
CGFloat red = [color redComponent];
CGFloat green = [color greenComponent];
CGFloat blue = [color blueComponent]; 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-28T13:23:54.517

我过去曾使用过它，它对我有用。

```
 NSColorSpace *colorSpace = [NSColorSpace sRGBColorSpace];
    NSColor *testColor = [NSColor colorWithColorSpace:colorSpace components:SRGB];

    CGFloat red = [testColor redComponent];

    CGFloat green = [testColor greenComponent];

    CGFloat blue = [testColor blueComponent]; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-28T13:29:51.220

您必须先检查色彩空间

那么如果是 rgb 你可以使用

```
CGFloat red = [testColor redComponent];
... 
```

对于灰度，您必须以不同方式转换它

```
CGFloat red = [testColor whiteComponent];
CGFloat blue = [testColor whiteComponent];
CGFloat green = [testColor whiteComponent]; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-05-19T23:28:24.197

这是一个安全的 Swift 5`SKColor`扩展，用于获取`NSColor`or的 RGB 组件`UIColor`。（注意`SKColor`只是基于平台的一个或另一个的类型别名。）

```
public extension SKColor {
    var sRGBAComponents: (red: CGFloat , green: CGFloat, blue: CGFloat, alpha: CGFloat) {
        #if os(iOS)
        let rgbColor = self // lolz no color conversion on iOS, but on iOS it'll respond to getRed(...) anyhow
        #elseif os(macOS)
        let rgbColor = usingColorSpace(.extendedSRGB) ?? SKColor(red: 1, green: 1, blue: 1, alpha: 1) // will return 'self' if already RGB
        #endif

        var red: CGFloat = 0, green: CGFloat = 0, blue: CGFloat = 0, alpha: CGFloat = 0
        rgbColor.getRed(&red, green: &green, blue: &blue, alpha: &alpha)
        return (red: red, green: green, blue: blue, alpha: alpha)
    }
} 
```

# php - XML 无效问题

> ID：15682931
> 
> 赞同：0
> 
> 时间：2013-03-28T13:18:34.367
> 
> 标签：php, .net, xml, http, cdata

我正在尝试请求具有以下 XML 的文件：

```
<?xml version='1.0' encoding='UTF-8'?>
<store>

<TOS><![CDATA[STANDARD LICENSE AGREEMENT: as �the Beat�) FOR ]]> </TOS>

</store> 
```

有人可以建议为什么这是无效的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T13:30:56.163

在 Visual Studio 中使用 UTF-8 编码保存文件。（文件|另存为|使用保存按钮上的下拉菜单选择“使用编码保存”并选择“Unicode（带有签名的UTF-8）-代码页65001”。

# php - 在 codeigniter 中创建帮助程序或复制函数

> ID：15682943
> 
> 赞同：0
> 
> 时间：2013-03-28T13:19:02.750
> 
> 标签：php, codeigniter, software-design

我有一组从 2 个不同模型调用的函数 [将来可能还会更多] 处理这个问题的最佳方法是什么：1 - 在每个模型中重复 2 - 为这些函数创建一个助手并从每个模型中加载该助手模型您是否建议任何其他方法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T13:24:30.333

这是我的方法，我不知道它是否合适。如果您在整个站点中使用此功能，您可以使用这些功能创建类并将其添加到库中。

如果您愿意，也可以根据需要进行自动加载。根据您的使用情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T02:45:35.027

您可以创建一个基础模型，由您的各个模型扩展，为它们提供各种共享的祖先。

创建文件`application/core/MY_Model.php`

```
class MY_Model extends CI_Model {

    public function common_method($param)
    {
        // Stuff goes here
    }
} 
```

然后，您希望在其中使用常用方法的任何模型都应该简单地扩展`MY_Model`而不是`CI_Model`.

请注意，`MY_`前缀是 CI 的默认值，但您可以在`application/config/config.php`文件中更改它。

# jquery - jQuery break .each() 超时

> ID：15682944
> 
> 赞同：0
> 
> 时间：2013-03-28T13:19:08.713
> 
> 标签：jquery, google-maps, settimeout, each, break

我正在使用谷歌地图并希望显示多个标记。如果您输入一个城市的名称，地图会跳转到该位置，您会获得该地区所有公司的列表。通过按一个按钮，每个公司都将显示在地图上。标记会以一个小的延迟下降，所以我做了一个这样的函数：

```
$('#show_markers').click(function()
{
  $('.div_with_information').each(function(index)
  {
    var location = $(this);//includes multiple infomations like lat, lng, name, info...
    setTimeout(function()
    {
      set_marker(location);//function to create google marker with infobox ect.
    },100*index);
  });
}); 
```

这工作得很好。我需要延迟以获得漂亮的拖放动画并检查标记的坐标。但有时有很多标记要删除一个脚本需要很多时间。

我正在寻找的是完全停止“标记雨”的功能。

```
$('#stop_button').click(stop_drop); 
```

我尝试了很多东西，但都没有如我所愿。我希望你有一些好的想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T13:28:23.187

```
var is_running = false;
var timeout;

$('#show_markers').click(function()
{
  if (is_running)
    return;

  is_running = true;

  var index = 0;
  var divs = $('.div_with_information');
  var num = divs.length;

  timeout = setTimeout(on_set_marker_event, 100);

  function on_set_marker_event()
  {
    var location = divs.eq(index);
    set_marker(location);

    index++;

    if (is_running && index < num)
       timeout = setTimeout(on_set_marker_event, 100);
  });
});

$('#stop_button').click(function()
{      
  is_running = false;
  clearTimeout(timeout);
}); 
```

# javascript - 随机脚本标签从何而来？

> ID：15682951
> 
> 赞同：0
> 
> 时间：2013-03-28T13:19:26.727
> 
> 标签：javascript

我在我的网络应用程序中找到了这个。

```
<script async="" src="http://www.shopathome.com/Injection/Inject.aspx?cid=74179042&amp;guid=0c179887-0d15-4009-860f-3f2c3d602885&amp;ver=6.0.9.2&amp;domain=www.google.com" type="text/javascript" id="sahinjectionScript"></script> 
```

我知道它是如何到达那里的。

这是某种注入攻击吗？我怎样才能摆脱它？

**研究和参考**

[http://en.wikipedia.org/wiki/Cross-site_scripting](http://en.wikipedia.org/wiki/Cross-site_scripting)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T13:21:47.967

根据[我应该删除它](http://www.shouldiremoveit.com/ShopAtHome-com-Toolbar-18424-program.aspx)的信息- 清理您在工作站上安装的附加组件。

如果令人担忧的代码出现在来自服务器的页面中（并且不是，就像这里的情况，由您安装的浏览器扩展注入）：

1.  让您的服务器离线
2.  更改您的密码并对您的工作站进行病毒扫描，以确保这不是攻击媒介
3.  启动干净的服务器
4.  从未污染的源重新安装您的应用程序
5.  监控新的live版本，看看攻击是否再次发生
6.  分析您已脱机的服务器以了解攻击的工作原理
7.  修复任何安全问题并部署到新的干净服务器

# java - java.util.NoSuchElementException：文件中存在行时找不到行

> ID：15682956
> 
> 赞同：0
> 
> 时间：2013-03-28T13:19:33.550
> 
> 标签：java, java.util.scanner

我有一个代码，我正在使用 Scanner Class 扫描行并循环直到没有行。

我的代码如下所示：

```
File file = new File(filePath);

if (file.exists()) {
    Scanner s = new Scanner(file);
    String tmp = null;
    int result = 0;
    try {
        while (true) {
            tmp = s.nextLine();
            if (tmp != null && tmp.equals("")) {
                result += Integer.parseInt(tmp);
            }
            System.out.println(runSequence(Integer.parseInt(tokens[0])));
        }
    } catch (Exception e) {
        e.printStackTrace();
    }
    System.out.println(result);
} 
```

它给出了错误

> tmp = s.nextLine();
> 
> java.util.NoSuchElementException：找不到行

这很奇怪，因为之前相同的代码运行良好。

为什么这条线会出错？

编辑：

我的错误是我没有正确说明问题，我特别将 try catch 块留在了 while 循环之外，这样我就可以在行结束时退出...我的问题是为什么我无法读取任何行...我在 txt 文件中有大约 3-4 行要读取，它没有读取任何内容，并且在第一行读取自身时给出异常...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T13:21:06.477

我认为更好的编码方法是使用[**Scanner#hasNextLine()**](http://docs.oracle.com/javase/7/docs/api/java/util/Scanner.html#hasNextLine%28%29)在 while 循环中设置一个条件。Scanner#hasNextLine() 将确保其中的代码只有在 file= 中有一行时才会运行。

```
 while (s.hasNextLine()) {
                tmp = s.nextLine();
                if (tmp != null && tmp.equals("")) {
                    result += Integer.parseInt(tmp);
                } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T13:21:40.820

```
while (s.hasNextLine())  
{  
   //...  
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T13:23:57.667

```
if (tmp != null && tmp.equals("")) 
```

应该是（如果你试图检查给定的字符串不是空字符串）

```
if (tmp != null && !tmp.isEmpty()) 
```

我认为您到达文件末尾没有剩余行并且您的条件是 while(true) 所以它也尝试读取那个时间。所以你得到 NoSuchElementException（如果没有找到行）

所以最好将你的while循环更改为

```
while (s.hasNextLine()){  
   tmp = s.nextLine();
   // then do something

} 
```

# android - Android 拖动视图并更改其父级

> ID：15682957
> 
> 赞同：2
> 
> 时间：2013-03-28T13:19:35.143
> 
> 标签：android, android-layout

我需要一种在子视图到父视图之间进行拖放的方法。所以我会放一张图片来更好地解释：

![在此处输入图像描述](../Images/94cb8576dd92cc0305bd8723f15e500a.png)

黄色代表一个扩展RelativeLayout 的类。黑色代表一个扩展 ViewGroup 的类 白色代表 ImageViews 红色代表一个 View

所以我需要将 White Blocks(ImageViews) 放在 Yellow View 上，但我只拖过 Black View，因为 ImageView 有一个像父亲一样的 BlackView，所以我现在的解决方案是更改父亲的拖动视图，但是当我添加视图时在 YellowView 上，这会取消我的拖动事件，所以当我在视图之间切换时需要继续拖动。请注意，WhiteView 的唯一方法是放置在 RedView 上，如果 Touch up 和 White view 远离 RedView 白色块将返回 BlackView。

所以，我使用从网上获得的这段代码：

```
 public boolean onTouch(View v, MotionEvent event) {
    int action = event.getAction();
    switch (action & MotionEvent.ACTION_MASK) {
        case MotionEvent.ACTION_DOWN:
            touchDown(event);
            break;
        case MotionEvent.ACTION_MOVE:
            touchMove(event);
            break;
        case MotionEvent.ACTION_UP:
            touchUp(event);
            break;
    }
    if (aViewIsDragged())
        return true;
    return false;
}
private void touchDown(MotionEvent event) {
    initialX = (int)event.getRawX();
    initialY = (int)event.getRawY();
    lastTouchX = (int)event.getRawX() + (gridPageWidth);
    lastTouchY = (int)event.getRawY();
}

public boolean onLongClick(View v) {        
    if(positionForView(v) != -1) {
        movingView = true;
        dragged = positionForView(v);
        return true;
    }
    return false;
}
private void touchMove(MotionEvent event) {

    if (movingView && aViewIsDragged()) {
        lastTouchX = (int) event.getX();
        lastTouchY = (int) event.getY();

        moveDraggedView(lastTouchX, lastTouchY);
        manageSwapPosition(lastTouchX, lastTouchY);
        manageEdgeCoordinates(lastTouchX);
        manageDeleteZoneHover(lastTouchX, lastTouchY);
    }
}
private void moveDraggedView(int x, int y) {
    ImageView child = null;
    View childAt = getChildAt(dragged);
    int width = childAt.getMeasuredWidth();
    int height = childAt.getMeasuredHeight();
    int left = x - (1 * width / 2);
    int t = y - (1 * height / 2);
    childAt.layout(left, t, left + width, t + height);
    //TODO at this point if left less than 0, I detect part of view is out and I need to change this view to Yello
    if (left <0){
            child = (ImageView) childAt;
            ViewGroup parent = (ViewGroup) getParent();
            cloneimage = new ImageView(getContext());
            cloneimage.setBackgroundDrawable(child.getDrawable());
            parent.addView(cloneimage);             
    }
} 
```

所以我认为这有点困难，但如果有人帮助我将 WhiteView 从 Black 更改为 Yellow 并继续拖动，我会很感激。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-02-23T14:23:28.790

使用 ViewDragHelper！

在这里你可以找到文档：[https ://developer.android.com/reference/android/support/v4/widget/ViewDragHelper.html](https://developer.android.com/reference/android/support/v4/widget/ViewDragHelper.html)

像这样覆盖你的 onTouch 事件

```
@Override
public boolean onInterceptTouchEvent(MotionEvent ev) {
    final int action = ev.getActionMasked();
    if (action == MotionEvent.ACTION_CANCEL || action == MotionEvent.ACTION_UP) {
        mDragHelper.cancel();
        return false;
    }
    return mDragHelper.shouldInterceptTouchEvent(ev);
}

@Override
public boolean onTouchEvent(MotionEvent ev) {
    mDragHelper.processTouchEvent(ev);
    return true;
} 
```

然后使用 viewDragViewHelper

```
ViewDragHelper.create(DragCoordinatorLayout.this, 1.0f, new ViewDragHelper.Callback() {

                @Override
                public boolean tryCaptureView(View child, int pointerId) {
                    return true;
                }

                @Override
                public int clampViewPositionHorizontal(View child, int left, int dx) {
                    return left;
                }

                @Override
                public int clampViewPositionVertical(View child, int top, int dy) {
                    return top;
                }
} 
```

# php - WordPress - 页面名称

> ID：15682966
> 
> 赞同：0
> 
> 时间：2013-03-28T13:19:52.723
> 
> 标签：php, wordpress

我是 WordPress 新手。我安装了插件“html-on-pages”。此插件在 URL 中的页面名称后添加“.html”。

我在我的 WordPress 项目中添加了一些页面。

我想在某些情况下删除某些页面的“.html”。我尝试使用 WordPress 的 $wp_rewrite 获取页面名称，但没有找到任何方法。

请建议任何返回页面名称的方式或任何将返回页面名称的 WordPress 功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T13:23:10.453

试试这个

```
$page_name = basename(get_permalink()); 
```

# php - 饲料离线访问

> ID：15682974
> 
> 赞同：1
> 
> 时间：2013-03-28T13:20:11.457
> 
> 标签：php, facebook, feed, offline

我有一个应用程序，当用户访问该应用程序时，会在他的提要中搜索特定帖子。（我有 read_stream）。但是我需要该应用程序随时阅读他们的提要，例如每小时一次。如果他们不在应用程序中，我如何阅读他们的提要？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T20:48:52.897

每次用户进入您的应用程序时，您必须保存的是数据库中的 fb_id，并且您必须保存扩展令牌。此令牌的有效期为 60 天，因此每次用户访问您的应用时，您都应该更新它，这样就不会过期。

我不知道您是否使用 PHP SDK，但您可以通过以下方式获取 facebook 扩展令牌：

```
 require_once("facebook.php");

  $config = array();
  $config[‘appId’] = 'YOUR_APP_ID';
  $config[‘secret’] = 'YOUR_APP_SECRET';
  $config[‘fileUpload’] = false; // optional

  $facebook = new Facebook($config);
  $facebook->setExtendedAccessToken();
  $access_token = $facebook->getAccessToken();
  $uid = $facebook->getUser();
  //now that you have the extended token and the user id save it on your database. 
```

现在，下次您想离线读取用户的提要时，只需从数据库中获取用户 ID 并

```
//the next time you want to read the user feed, just grab the uid from your database and access token and set it
  $facebook->setAccessToken($new_access_token); 
```

# php - 如何将参数从 cron 命令传递给 codeigniter 函数？

> ID：15682977
> 
> 赞同：1
> 
> 时间：2013-03-28T13:20:18.767
> 
> 标签：php, codeigniter, cron, crontab, cron-task

我正在使用代码点火器并从 cron 作业中运行一个函数。

```
class event extends CI_Controller {
  public function newEvent()
    {
         //some process here using the parameter
    }

} 
```

cron 命令：

```
* */2 * * * /usr/bin/php /var/www/project/index.php 'event/newEvent/parameter' 
```

我想像写在 cron 命令中一样传递参数，并在 newEvent 函数中使用该参数进行一些处理。

我应该在我的函数中编写什么额外的代码来接收来自 cron 命令的参数。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T14:04:29.443

您可以简单地为您的函数添加一个参数。

```
class event extends CI_Controller {

    public function newEvent($parameter)
    {
        //some process here using the parameter
        echo $parameter;
    }

} 
```

默认路由引擎将处理您的参数并将其传递给您的函数。如果该参数是可选的，请随意将其初始化为默认值。

```
 public function newEvent($parameter = 'default')
    {
        //some process here using the parameter
        echo $parameter;
    } 
```

[编辑：阅读@dm03514 的答案后，文档](http://ellislab.com/codeigniter/user-guide/general/cli.html)似乎建议使用空格而不是斜杠来调用您的应用程序。

cron 命令应该是

```
* */2 * * * /usr/bin/php /var/www/project/index.php event newEvent parameter 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T14:08:10.287

CI在他们的文档中[解释了](http://ellislab.com/codeigniter/user-guide/general/cli.html)如何从命令行执行命令

`php index.php event newEvent parameter`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-28T14:19:42.577

我已经尝试过了，它对我有用。

```
* */2 * * * /usr/bin/curl http://domain.com/index.php/event/newEvent/parameter 
```

# windows - 如何输入外部程序从批处理文件中询问的密码

> ID：15682978
> 
> 赞同：1
> 
> 时间：2013-03-28T13:20:29.840
> 
> 标签：windows, command-line, batch-file

我正在编写一个批处理文件来执行程序并执行一些要求。经过一些步骤后，它会询问我密码。

这是我从命令提示符处执行的 .bat 文件；

```
C: 
cd "C:\PROGRAM FILES (X86)\GNUPT\GPG"
gpg -se -r "Someone <s.s@s.com>" "D:\20130328pcs0CONTAINER0035017310.txt" 
```

所以，在这一步之后，那个 gpg 程序会询问我的密码；

![在此处输入图像描述](../Images/19ff8ba62a4bd9f080e965b9e06645ae.png)

任何人都知道如何从批处理文件在这里写密码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T13:34:08.303

从[http://www.gnupg.org/documentation/manpage.en.html](http://www.gnupg.org/documentation/manpage.en.html)，您是否尝试使用：

```
--passphrase-fd n 
```

> 从文件描述符 n 中读取密码。如果 n 使用 0，则将从标准输入读取密码。仅当仅提供一个密码时才能使用此功能。如果可以避免，请不要使用此选项。

不确定这样的事情是否可行，设置`n`为`1`从`passphrase``sdtout`

也许

```
gpg -se -r "Someone <s.s@s.com>" "D:\20130328pcs0CONTAINER0035017310.txt --passphrase-fd 1 & echo somePassword" 
```

这使得一个独立于另一个，所以它可能有效。请告诉发生了什么

编辑：

Mtok 解决了这个问题：

```
gpg --trust-model always --passphrase some password --yes -se -r "<someone s@s.com>" "D:abc.txt" 
```

# php - 从 3 个表 SQL 和 PHP 中获取信息

> ID：15682983
> 
> 赞同：0
> 
> 时间：2013-03-28T13:20:40.583
> 
> 标签：php, mysql, join

我正在使用 HTML、CSS、PHP 和 MySQl 制作一个类似系统的博客。该站点由三个表组成。

用户（**id**，用户名，密码，电子邮件）
帖子（**postid**，title，post）
评论（**postid**，**id**，comment，commentid）来自帖子的postid和来自用户的id。

我正在尝试显示为某个帖子留下的所有评论和用户名。

当我在 phpmyadmin 中使用此查询时：SELECT user.username, comments.comment FROM user INNER JOIN comments on user.id=comments.id where postid=1

它显示了我需要什么。

当我将它添加到 php 中时，我得到一个空白页。

```
<?php
//echo "1";
session_start();

$connect = mysql_connect('localhost', 'root', 'root') or die("Couldn't connect");
mysql_select_db("com541blog") or die("Couldn't connect to database");

//echo "2";
//$postid = $_GET['type'];
$_SESSION['postid'] = $postid;

//echo "3";
$query_comments = mysql_query("SELECT user.username as username, comments.comment as comment     FROM user INNER JOIN comments on user.id=comments.id WHERE postid='1'");

$info = mysql_fetch_array($query_comments);

$username = $info['username'];
$comment = $info['comment'];

echo $username;                         
echo $comment;

?> 
```

在此先感谢您的帮助 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T13:50:12.187

您没有执行任何查询。

```
$rs = mysql_query($query_comments);
$info = mysql_fetch_array($rs); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T13:23:09.037

您需要`mysql_query`在 PHP 中指定...否则您的查询将不会被执行

像 ：

```
$query_comments = mysql_query("SELECT user.username, comments.comment FROM user INNER JOIN comments on user.id=comments.id where where postid=1"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T13:26:11.947

我怀疑您的第一行有一个错误，即在“连接”末尾缺少“c”。

`include("db_connet.php");`应该`include("db_connect.php");`

此外，缺少一个分号`;`。这：

```
$query_comments = ("SELECT user.username, comments.comment 
                    FROM user INNER JOIN comments on user.id=comments.id 
                    where postid=1") 
```

应该读：

```
$query_comments = ("SELECT user.username, comments.comment 
                    FROM user INNER JOIN comments on user.id=comments.id 
                    where postid=1"); 
```

此外，使用表名限定每个列名也是不错的做法，例如`user.username`，正如您正在做的那样。但是您可能更喜欢以下使用表别名的更简洁的语法：

```
$query_comments = ("SELECT u.username, c.comment 
                    FROM user u INNER JOIN comments c on u.id = c.id 
                    where c.postid = 1"); 
```

（请注意，表别名不必是单个字母，因此可以方便地将表名（例如“ManufacturerSuppliedPartsListData_Feb01”）简化为“mpl”，而不会失去其含义。或者例如，如果您有“客户”和“Credit” 而不是“c”，您可以使用例如“cust”和“cred”）

# objective-c - 在 Objective-C 中通过 FTP 上传文件

> ID：15682986
> 
> 赞同：0
> 
> 时间：2013-03-28T13:20:54.757
> 
> 标签：objective-c, xcode, ftp

我的软件有点问题。我想`xml`通过 FTP 将一个简单的文件上传到服务器。我不太确定如何在 Objective-C 中做到这一点。我看到了这样的东西，但它确实没有帮助我上传文件：

```
url = [NSURL URLWithString:@"ftp://username:pw@189.92.32.34"]; 
```

我对 C# 更熟悉，但我将如何通过 FTP 上传文件？

谢谢，

精英玩家

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T13:33:24.277

**例子**

您执行请求并设置流委托：

```
NSURL* url = [NSURL URLWithString:@"ftp://username:pw@189.92.32.34"];
CFReadStreamRef stream = CFReadStreamCreateWithFTPURL(NULL, (__bridge CFURLRef) url);
stream.delegate= self;
[stream scheduleInRunLoop:[NSRunLoop currentRunLoop] forMode:NSDefaultRunLoopMode];
[stream open]; 
```

然后你用这个方法处理它：

```
- (void)stream:(NSStream *)aStream handleEvent:(NSStreamEvent)eventCode; 
```

**PS**：当你不再需要它时，使用 CFRelease() 释放流。

**参考**

CFNetworking 框架（查看 CFFTP API）：[https ://developer.apple.com/library/mac/#documentation/Networking/Conceptual/CFNetwork/Concepts/Concepts.html](https://developer.apple.com/library/mac/#documentation/Networking/Conceptual/CFNetwork/Concepts/Concepts.html)

示例：http: [//developer.apple.com/library/ios/#samplecode/SimpleFTPSample/Introduction/Intro.html](http://developer.apple.com/library/ios/#samplecode/SimpleFTPSample/Introduction/Intro.html)

# vb.net - 在安装 vb.net 项目期间添加连接字符串

> ID：15682988
> 
> 赞同：0
> 
> 时间：2013-03-28T13:20:57.233
> 
> 标签：vb.net, visual-studio-2010, connection, connection-string

我想创建一个安装程序，其中用户指定数据库的连接字符串在哪里。

我看过这样的文章，但它们是用 C# 编写的。像这样： http: [//www.codeproject.com/Tips/446121/Adding-connection-string-during-installation](http://www.codeproject.com/Tips/446121/Adding-connection-string-during-installation)

我也尝试将代码翻译成 vb.net，但有些错误我无法修复。

如果有人能告诉我怎么做或任何可能对我有帮助的文章真的是一个很大的帮助。

我想在我的 vb.net 项目中而不是在 C# 中执行此操作

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-29T07:33:09.690

这是转换为 VB .NET 的代码

```
'Installer.vb
Dim dataSource As String = "Data Source=" & Context.Parameters("DataSource")
Dim initialcatalog As String = "Initial Catalog=" & Context.Parameters("InitialCatalog")
Dim user As String = "User ID=" & Context.Parameters("UserID")
Dim password As String = "Password=" & Context.Parameters("Password")
dataSource = dataSource & ";" & initialcatalog & ";" & user & ";" & password
dataSource = dataSource
MessageBox.Show("instance=" & dataSource)

Dim map As New ExeConfigurationFileMap()
MessageBox.Show(System.Reflection.Assembly.GetExecutingAssembly().Location & ".config")

'Getting the path location 
Dim configFile As String = String.Concat(System.Reflection.Assembly.GetExecutingAssembly().Location, ".config")
map.ExeConfigFilename = configFile

Dim config As System.Configuration.Configuration = ConfigurationManager.OpenMappedExeConfiguration(map, ConfigurationUserLevel.None)
Dim connectionsection As String = config.ConnectionStrings.ConnectionStrings("MyConnectionString").ConnectionString
Dim connectionstring As ConnectionStringSettings = Nothing

If connectionsection IsNot Nothing Then
    config.ConnectionStrings.ConnectionStrings.Remove("MyConnectionString")
   'MessageBox.Show("removing existing Connection String")
End If

connectionstring = New ConnectionStringSettings("MyConnectionString", dataSource)
config.ConnectionStrings.ConnectionStrings.Add(connectionstring)
config.Save(ConfigurationSaveMode.Modified, True)
ConfigurationManager.RefreshSection("connectionStrings") 
```

# node.js - 实施 OAuthorize 示例时“无法 POST /dialog/authorize/decision”

> ID：15682989
> 
> 赞同：3
> 
> 时间：2013-03-28T13:20:57.820
> 
> 标签：node.js, heroku, oauth, express

我正在使用[OAuthorize](https://github.com/jaredhanson/oauthorize)库实现 OAuth 1.0a。我正在遵循图书馆提供的[示例。](https://github.com/jaredhanson/oauthorize/tree/master/examples/express2)

我在 Heroku 托管我的应用程序。使用[测试客户端](http://term.ie/oauth/example/client.php)，我可以`GET`请求令牌，并将其用于`/dialog/authorize`：

```
Hi Bob Smith!

Samplr is requesting access to your account.

Do you approve? 
```

当我按下`Allow`时，我得到一个`Cannot POST /dialog/authorize/decision`。

我已经在以下位置注册了端点`app.js`：

`app.post('/dialog/authorize/decision', oauth.userDecision);`

我在 OAuthorize 示例中遗漏了一些愚蠢的东西，或者我处理事务的方式存在错误。

`dialog.ejs`：

```
<form action="/dialog/authorize/decision" method="post">
  <input name="transaction_id" type="hidden" value="<%= transactionID %>">
  <div>
    <input type="submit" value="Allow" id="allow">
    <input type="submit" value="Deny" name="cancel" id="deny">
  </div>
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-06T00:50:25.763

对我来说，问题是我没有在回调中提供正确的`server.userAuthorization`callbackURL。

见[https://github.com/jaredhanson/oauthorize/blob/master/examples/express2/db/accessTokens.js#L10](https://github.com/jaredhanson/oauthorize/blob/master/examples/express2/db/accessTokens.js#L10)和[https://github.com/jaredhanson/oauthorize/blob/master/examples/express2/oauth .js#L152](https://github.com/jaredhanson/oauthorize/blob/master/examples/express2/oauth.js#L152)

# ruby-on-rails - Rails Seed.rb ncoding::UndefinedConversionError: "\xC2" 导入 CSV 时出错

> ID：15682991
> 
> 赞同：0
> 
> 时间：2013-03-28T13:21:04.577
> 
> 标签：ruby-on-rails, csv, seed

我的种子文件看起来像这样......

```
csv_file_path = 'db/coned.csv'
count = 0
CSV.foreach(csv_file_path) do |row|
  row = Section.new({
    :supervisor => row[0],
    :catagory => row[1],
    :title => row[2],
    :description=> row[3],
    :days => row[4],
    :start_date => row[5],
    :end_date => row[6],
    :start_time => row[7],
    :end_time => row[8],
    :course_id => row[9],
    :room => row[10],
    :building => row[11],
    :location => row[12],
    :tuition => row[13],
    :lab_fee => row[14],
    :insurance_fee => row[15],
    :technology_fee => row[16]
  })
  row.save!
  puts "Added row #{count}"
  count+=1
end 
```

...当我运行 rake db:seed 时出现此错误

耙中止！Encoding::UndefinedConversionError: "\xC2" from ASCII-8BIT to UTF-8: INSERT INTO "sections" ("building", "category", "course_id", "created_at", "days", "description", "end_date ”、“end_time”、“insurance_fee”、“lab_fee”、“location”、“room”、“start_date”、“start_time”、“supervisor”、“technology_fee”、“title”、“tuition”、“updated_at”）值（？，？，？，？，？，？，？，？，？，？，？，？，？，？，？，？，？，？，？）/home/johnmlocklear/.rvm/gems/ ruby-1.9.2-p320/gems/activerecord-3.2.11/lib/active_record/connection_adapters/sqlite_adapter.rb:208:in `encode' /home/johnmlocklear/.rvm/gems/ruby-1.9.2-p320/gems/activerecord-3.2.11/lib/active_record/connection_adapters/sqlite_adapter.rb:208:in`type_cast'

关于如何捕获此错误并丢弃该行并继续导入行的任何想法。或者可能是某种强制编码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T13:47:56.933

使用此默认值显示您的线路将不胜感激。

如果要捕获错误，请使用一些 Exception ：

```
CSV.foreach(csv_file_path) do |row|
  begin
    row = Section.new({
      :supervisor => row[0],
      ....
      :technology_fee => row[16]
    })
    row.save!
    puts "Added row #{count}"
    count+=1
  rescue Exception
    Rails.logger.error "Encountred error at line #{row.inspect}"
  end
end 
```