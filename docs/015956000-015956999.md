# StackOverflow 问答 15956000-15956999

# php - 如何从 PHP 运行 MATLAB 代码以识别孤立的口语单词？

> ID：15956000
> 
> 赞同：18
> 
> 时间：2013-04-11T18:19:04.573
> 
> 标签：php, matlab, matlab-deployment

如标题所示，我有用于**孤立口语识别**的 MATLAB 代码，我希望能够将此项目与另一个使用**PHP**制作的项目集成，以达到某种目的。

我以前没有处理过这样的问题。换句话说，这是我第一次需要集成 PHP 和 MATLAB，所以我真的不知道从哪里开始以及如何开始。

我已经阅读了几篇文章，但我无法使其有效。

我有 PHP 5.4.9、MATLAB R2012A 和 Windows 7。可以[在 GitHub 上](https://github.com/mamdouhweb/asra)查看 MATLAB 项目文件。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-04-19T07:59:10.677

你有几个选择：

*   如果 MATLAB 安装在将要部署 PHP 应用程序的服务器上（不是您当前的开发环境），您可以像使用任何其他程序 ( ) 一样使用PHP`matlab -r "..."`中的命令等价物直接调用它。`EXECUTE`以下是一些资源（请务必同时查看链接的问题）：

    *   [如何在退出前从命令行调用 MATLAB 并打印到标准输出](https://stackoverflow.com/a/4621554/97160)
    *   [在不弹出 GUI 的情况下运行 cmd 文件](https://stackoverflow.com/a/10847132/97160)
    *   [传递参数 _ Shell 脚本 - Octave 脚本](https://stackoverflow.com/a/4725931/97160)

    其他人评论了如何在 PHP 和您的 MATLAB 脚本之间传递输入/输出。例如，您可以设计您的 MATLAB 函数以接收 WAV 文件的路径作为输入，对其进行处理并将任何生成的图像保存到磁盘：

    ```
    function myFunc(filename)
        [y,Fs] = audioread(filename);
        img = my_process_func(y, FS);
        imwrite(img, 'out.png');
    end 
    ```

    从 PHP 调用如下：

    ```
    % Of course you have to make sure "myFunc" is available on the MATLAB path.
    % Think: "addpath(..)" or just "cd(..)" into the directory first
    matlab -wait -nodisplay -r "myFunc('audio.wav'); quit;" 
    ```

    然后您可以在 PHP 应用程序中读取输出图像。

*   如果没有，您有哪些与部署相关的工具箱？[MATLAB 编译器](http://www.mathworks.com/products/compiler/)和相关工具箱，例如[MATLAB Builder NE](http://www.mathworks.com/products/netbuilder/)和[MATLAB Builder JA](http://www.mathworks.com/products/javabuilder/)。

    这些将分别将您的程序编译成可执行/.NET 程序集/JAR 文件，并且所有这些都需要安装免费提供的[MCR 运行时](http://www.mathworks.com/products/compiler/mcr/)。换句话说，可执行文件不需要在目标机器上安装完整的 MATLAB，只需要 MCR 运行时。

    您将以与以前相同的方式运行可执行文件。

    另一种产品是[MATLAB Coder](http://www.mathworks.com/products/matlab-coder/)，它将您的 MATLAB 代码转换为 C++ 程序。编译后，无需任何外部要求即可运行。

    MathWorks 的新产品是[MATLAB Production Server](http://www.mathworks.com/products/matlab-production-server/)。我个人对此一无所知:)

*   还有一种选择是使用 TCP/IP 在 PHP 和 MATLAB 之间进行通信。服务器将在 MATLAB 端运行，使用编写为 C MEX 文件或 Java 类的套接字编程。看：

    *   *[MATLAB Mex 套接字包装库](https://stackoverflow.com/questions/7626854/matlab-mex-socket-wrapper-library/7626998#7626998)*
    *   *[在MATLAB中编写Java的pw.println()等](https://stackoverflow.com/questions/2675611/writing-javas-pw-println-etc-in-matlab/2677627#2677627)*

    客户端是您的 PHP 应用程序。这个想法是让 MATLAB 监听连接，读取客户端给出的任何输入`eval`，然后返回结果。这比其他选项涉及更多，因为您必须处理序列化和并发等其他事情。优点是 MATLAB 可以在单独的服务器上运行，甚至可以在云上的多台服务器上运行（参见[这篇文章](https://stackoverflow.com/a/6564784/97160)）。

因此，首先，决定哪种方法最适合您的项目，然后回答具体问题会更容易......请始终先查阅文档，MATLAB 工具箱的文档非常详尽，通常包含许多示例。以下是一些特定于 MATLAB Compiler 产品系列的资源：

*   [网络研讨会：使用 MATLAB 部署应用程序](http://www.mathworks.com/company/events/webinars/wbnr43250.html)
*   [PDF 文件：MATLAB 应用程序部署 - Web 示例指南](http://www.mathworks.com/help/pdf_doc/compiler/example_guide.pdf)

请注意，它们专注于 ASP.NET 和 Java JSP/servlet 应用程序。在您的情况下，PHP 应用程序将与运行使用上述两个选项之一构建的 Web 服务的中间层进行通信（或者简单地设计一个类似 CGI 的站点，运行使用 MATLAB 编译器构建的普通可执行文件，如前所述）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-15T23:12:55.597

为了帮助 OP 从 PHP 网页运行系统命令，[我的帖子](https://stackoverflow.com/questions/15668325/run-external-programs-on-virtual-server/15669033#15669033)是相关的（复制如下）。

我们一直都在这样做。我称它们为巫毒教页面。这是一些工作代码：

```
<?php
    $command="uptime"; $output; $retval; $errors="";
    exec ($command, &$output, &$retval);
    echo $output[0] . "\n";
    unset($output);
?> 
```

网页的输出为：

```
13:40:19 up 22 days, 23:14,  0 users,  load average: 0.04, 0.02, 0.00 
```

我在下面的评论中添加的附加说明：相对路径与绝对路径可能很痛苦......`$command`可能需要是`/usr/bin/uptime`或另一个可能是`/usr/bin/ls /home/chris/ftp`。通常，脚本的工作目录是它们在文件系统中的位置。MATLAB是一个Windows程序，是吗？我的经验是，您将需要程序的绝对路径以及作为参数传递的任何文件，例如：`$command="c:\\matlab\\matlab.exe c:\\www\\somefile.wav"`然后愚蠢的 NTFS 名称需要单引号，TAB 命令行完成对于示例非常有效。或者使用带有 ~ 的正确 8.3 名称。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-16T07:08:16.183

我的回答将分为两部分：

1.  如何从终端运行 MATLAB 脚本？我将给出一些关于从终端运行 MATLAB 脚本的示例：

    ```
    matlab -nojvm -nodesktop -r "run <the-script>.m"
    matlab -nojvm -nodesktop -r "<the-script>"
    matlab -nojvm -nodesktop -r "run <the/path>/<the-script>.m" 
    ```

    `matlab`in Windows 必须在您的环境路径中。[操作方法](http://www.nextofwindows.com/how-to-addedit-environment-variables-in-windows-7/)。

    如果您需要将脚本编译为 Java：

    ```
    java -jar yourjarfile.jar 
    ```

2.  如何从 PHP 执行终端命令？我认为前面的答案很好，没有必要重复。

更多注释：

1.  注意您的安全。你可能`XSS`很容易上当。
2.  抽象您的代码并改进它以保存参数并输出到数据库。[在Parallels](http://en.wikipedia.org/wiki/Parallels_Desktop_for_Mac)或队列管理器中运行您的代码 。您可以创建一个[REST](http://en.wikipedia.org/wiki/Representational_State_Transfer)服务。
3.  单元测试。
4.  使用 Linux。它更强大。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-04-11T22:26:47.530

一种快速的技巧是将您的 MATLAB 代码编译成[可执行文件](https://stackoverflow.com/questions/1926089/how-to-create-an-executable-exe-file-from-a-m-file)，然后使用 PHP 的`shell_exec()`.

困难的部分是以如下方式调整您的 MATLAB 代码（抱歉，我没有阅读）：

1.  它将以命令行界面样式（作为`char`字符串）接收其输入；
2.  它将其结果作为文本输出到标准输出（MATLAB 中的文件 id #1）。

然后只需将 MATLAB 输出解析回 PHP ......

# ruby-on-rails - 多个值组合在选择辅助导轨中

> ID：15956001
> 
> 赞同：0
> 
> 时间：2013-04-11T18:19:08.857
> 
> 标签：ruby-on-rails, select, form-helpers, grouped-collection-select

这给了我一个只有`first_name`as 值的选择框。我想将 the`first_name`和 the结合起来`last_name`以将全名显示为一个值。

我想我必须创建一个变量来组合这些变量，然后将此变量插入我的代码中。但是我放的任何其他东西都`first_name`只是错误的替代品。

```
<%= f.grouped_collection_select :submitter_id, Building.order(:name), :submitters, :name, :id, :first_name, :prompt => "Select name"%> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T18:27:20.527

您可以通过在模型中简单地创建一个方法来做到这一点。

在您的模型（Building 还是 Submitter？）中，添加以下内容：

```
def full_name
  self.first_name + self.last_name
end 
```

然后在分组集合助手方法中使用此方法，例如：

```
<%= f.grouped_collection_select :submitter_id, Building.order(:name), :submitters, :name, :id, :full_name, :prompt => "Select name"%> 
```

# compiler-construction - C-bison-flex 中的字符串连接

> ID：15956004
> 
> 赞同：2
> 
> 时间：2013-04-11T18:19:14.760
> 
> 标签：compiler-construction, bison, flex-lexer

我正在使用 flex 和 bison 编写语义分析器。在那里，我有一个矩阵文字，类似于 [1,2,3;3,4;5]。假设它们是整数。我有以下规则：

在弹性文件中：

```
int {yylval.type_id.Type=1;return tINTTYPE;} 
```

在野牛文件中：

```
char m[80]; //to keep the value of matrix literal

%union semrec
{
    struct
    {
       int Type;
       char *id;
    }type_id;
}

matrixLit : '[' row ';' rows ']'

row : value
      | value ',' row

rows : row           
       | row ';'  rows 

value : tINT      {$$.id=$1.id;}
  | tREAL      {$$.id=$1.id;}  
  | tIDENT   {$$.id=$1.id;} 
```

通过使用这些，我试图获取矩阵文字的值。例如，如果矩阵文字是 [1;2;3,4;5,6]，我尝试得到 1;2;3,4;5,6。我尝试使用 $$.id=$1.id 和 strcat(m, $1.id)、strcpy(m,$1.id) 等，但无论我做什么，我都无法按此顺序获取值。我得到类似 4,2;1;3,5,6 的东西。谁能帮我这个？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T18:46:24.727

对于初学者，总是在野牛中使用左递归。Bison 的解析器能够折叠树的左侧，创建一个更快、更高效的解析器。

我将假设矩阵文字为空是非法的。如果这不是您想要的行为，您将不得不玩一点。

```
%type <list> rows row
%%
matrixLit : '[' rows ']'

rows :  row            { $$ = create_list();  $$->add($1); }
     |  rows ';' row   { $$->add($3); }   
     ;  

row  : value           { $$ = create_list(); $$->add($1); }
     | row ',' value   { $$->add($3); }
     ; 
```

您将需要向您的野牛联盟添加某种列表类型。Rows 是行条目的列表，row 是值条目的列表。

# python - 将熊猫面板对象转换为 rpy2.robjects.vectors.Array 对象

> ID：15956006
> 
> 赞同：0
> 
> 时间：2013-04-11T18:19:23.423
> 
> 标签：python, r, pandas, rpy2

是否有将熊猫面板（3维）对象转换为`rpy2.Array`对象的功能？

我能够这样做以仅将数据转换为`rpy2.Array`. 但这并没有设置数组对象的暗名/名称。

```
arrayobj = rpy2.robjects.numpy2ri.numpy2ri(panelobj.values) 
```

有没有一种干净的方法可以将面板转换为`rpy2.Array`?

# javascript - 还有另一种优化这种冒泡排序的方法吗？

> ID：15956018
> 
> 赞同：0
> 
> 时间：2013-04-11T18:19:59.613
> 
> 标签：javascript, algorithm, sorting, optimization, bubble-sort

我有这段代码，它使用冒泡排序算法对数字数组进行排序。

```
var a = [34, 203, 3, 746, 200, 984, 198, 764, 9];

function bubbleSort(a)
{
    var swapped;
    do {
        swapped = false;
        for (var i=0; i < a.length-1; i++) {
            if (a[i] < a[i+1]) {
                var temp = a[i];
                a[i] = a[i+1];
                a[i+1] = temp;
                swapped = true;
            }
        }
    } while (swapped);
}

bubbleSort(a);
alert(a); 
```

你可以在这里看到它：http: [//jsfiddle.net/x7VpJ/](http://jsfiddle.net/x7VpJ/)

好吧，正如您可以检查的那样，它工作得很好，但我想知道是否有另一种方法可以优化它以使用实际方法执行更少的循环。我的意思是，使用*交换*变量。也许省略排序的项目......一些想法？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T21:04:59.683

如果我坚持原来的问题（我不会建议完全不同的算法......）。

是的，还有另一个改进——双向冒泡排序，称为[振动器排序](http://en.algoritmy.net/article/40270/Shaker-sort)。它消除了乌龟和兔子的问题。在单向冒泡排序中，轻气泡向阵列末端（兔子）快速移动，而重气泡向阵列起点移动非常缓慢。但是如果你以双向方式排序，这两种类型的气泡排序都非常快（仍然在 O(n^2) 中，但通常比传统的冒泡排序更快）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T18:34:42.763

这是 JS 中不同排序算法的列表。我制作了一个比较排序时间的页面，并且我注意到“快速”似乎是最好的选择。

冒泡排序：

```
var arrBubble= new Array();
var tmpBubble;
function srtBubble(){
    tmpDate=new Date();
    timBegin=tmpDate.getTime();

    var blnBubbleSwitch;
    do {
        blnBubbleSwitch=false;
        for(var i=0;i<arrBubble.length-1;i++){
            if(arrBubble[i]>arrBubble[i+1])
            {
                tmpBubble=arrBubble[i];
                arrBubble[i]=arrBubble[i+1];
                arrBubble[i+1]=tmpBubble;
                blnBubbleSwitch=true;
            }
        }
    } while(blnBubbleSwitch);
} 
```

插入：

```
var arrinsertion= new Array();
var tmpinsertion;
function srtinsertionion(){
    var j;
    blninsertionSwitch=false;
    for(var i=0;i<arrinsertion.length;i++){
        tmpinsertion=arrinsertion[i];
        j=i;
        while((j>=0)&&arrinsertion[j-1]>tmpinsertion)
        {
            arrinsertion[j]=arrinsertion[j-1];
            j--;
            //blninsertionSwitch=true;
        }
        arrinsertion[j]=tmpinsertion;
    }
} 
```

壳：

```
function srtShell(){
var arrShell= new Array();
    for (var h = arrShell.length; h = parseInt(h / 2);) {
        for (var i = h; i < arrShell.length; i++) {
            var k = arrShell[i];
            for (var j = i; j >= h && k < arrShell[j - h]; j -= h)
                arrShell[j] = arrShell[j - h];
            arrShell[j] = k;
        }
    }
} 
```

快的：

```
function srtQuick()
{
    var arrQuick= new Array();
    qsort(arrQuick, 0, arrQuick.length);
}
function qsort(array, begin, end)
{
    if(end-1>begin) {
        var pivot=begin+Math.floor(Math.random()*(end-begin));

        pivot=partition(array, begin, end, pivot);

        qsort(array, begin, pivot);
        qsort(array, pivot+1, end);
    }
}
Array.prototype.swap=function(a, b)
{
    var tmp=this[a];
    this[a]=this[b];
    this[b]=tmp;
}
function partition(array, begin, end, pivot)
{
    var piv=array[pivot];
    array.swap(pivot, end-1);
    var store=begin;
    var ix;
    for(ix=begin; ix<end-1; ++ix) {
        if(array[ix]<=piv) {
            array.swap(store, ix);
            ++store;
        }
    }
    array.swap(end-1, store);

    return store;
} 
```

合并：

```
function merge_inplace(array, begin, begin_right, end)
{
    var arrMerge= new Array();
    for(;begin<begin_right; ++begin) {
        if(array[begin]>array[begin_right]) {
            var v=array[begin];
            array[begin]=array[begin_right];
            insertion(array, begin_right, end, v);
        }
    }
}

function insertion(array, begin, end, v)
{
    while(begin+1<end && array[begin+1]<v) {
        array.swap(begin, begin+1);
        ++begin;
    }
    array[begin]=v;
}

function msort(array, begin, end)
{
    var size=end-begin;
    if(size<2) return;

    var begin_right=begin+Math.floor(size/2);

    msort(array, begin, begin_right);
    msort(array, begin_right, end);
    merge_inplace(array, begin, begin_right, end);
}

function srtMerge()
{
    msort(arrMerge, 0, arrMerge.length);
} 
```

内置JS排序：

```
function srtJSSort()
{
    var arrJSSort= new Array();
    arrJSSort.sort(function(a,b){return a-b});
} 
```

当然我会建议在函数之外使用你的数组，这样你就可以在数据排序后继续使用它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-13T23:09:35.330

这是我一直在寻找的解决方案：

```
var a = [34, 203, 3, 746, 200, 984, 198, 764, 9, 1, 32423, 3455, 23, 4234,23];

function bubbleSort(a)
{
    var swapped;
    var n = a.length-1;
    var j = 0;
    do {
        swapped = false;
        for (var i=0; i < n; i++) {
            if (a[i] < a[i+1]) {
                var temp = a[i];
                a[i] = a[i+1];
                a[i+1] = temp;
                swapped = true;
            }
        }
        n--;
    } while (swapped);
}

bubbleSort(a);
alert(a); 
```

[http://jsfiddle.net/x7VpJ/1/](http://jsfiddle.net/x7VpJ/1/)

感谢所有回复。

# c# - 任何人都可以帮我改进这个语音到文本的代码或建议一种更准确的语音到文本听写方法吗？

> ID：15956019
> 
> 赞同：0
> 
> 时间：2013-04-11T18:20:00.770
> 
> 标签：c#, winforms, visual-studio, richtextbox, speech-recognition

我正在使用以下代码通过麦克风将文本输入到 RichTextBox：

```
private void button1_Click(object sender, EventArgs e)
    {
        SpeechRecognitionEngine recognizer = new SpeechRecognitionEngine();
        Grammar dictationGrammar = new DictationGrammar();
        recognizer.LoadGrammar(dictationGrammar);
        try
        {
            MessageBox.Show("Ready to talk?", "Speak", MessageBoxButtons.OKCancel);
            recognizer.SetInputToDefaultAudioDevice();
            RecognitionResult result = recognizer.Recognize();
            richTextBoxPrintCtrl1.SelectedText = result.Text;
        }
        catch (InvalidOperationException exception)
        {
            MessageBox.Show("Could not recognize input from default audio device. Is a microphone or sound card available?", "Error", MessageBoxButtons.OK, MessageBoxIcon.Error);
        }
        finally
        {
            recognizer.UnloadAllGrammars();

        } 
```

但是，结果不是很准确。我想在我的应用程序中实现一个相当准确的语音到文本听写服务。有人知道我可以改进此代码的方法，或者知道实现语音到文本的任何其他方法吗？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T19:00:19.260

**显而易见的答案**

最终，这取决于进入程序的声音质量。这几乎完全取决于硬件。改进硬件意味着更可靠的数据。所以真的，买一个更好的麦克风。

**训练你的电脑**

Microsoft PC 具有语音训练选项，因此计算机可以“习惯”您的声音。通过这个过程，计算机将能够以更高的准确度分析和识别您所说的单词。

# javascript - 如何将数组绑定到 ListView

> ID：15956021
> 
> 赞同：4
> 
> 时间：2013-04-11T18:20:07.517
> 
> 标签：javascript, windows-store-apps

我知道如何用 Json 解析并将这样的文件绑定到列表视图：

```
[
{
    "key": "Arthur Schopenhauer",
    "numeroFrasi": 3,
    "foto" : "images/TEST.jpg",
},
{
    "key": "Nietzsche",
    "numeroFrasi": 1,
    "foto" : "images/TEST.jpg",
},
......... 
```

但我无法理解，也无法在 Web 上找到如何将每个“frasi”（即一个数组）绑定到这样的文件中：

```
[
{
    "key": "Arthur Schopenhauer",
    "numeroFrasi": 3,
    "foto" : "images/TEST.jpg",
    "frasi": [
        "Fras1",
        "Frase 2 schopenahuer",
        "Frase 3 schopenhahuer"
    ]
},
{
    "key": "Nietzsche",
    "numeroFrasi": 1,
    "foto" : "images/TEST.jpg",
    "frasi": [
        "Frase 2 nietzsche",
        "Frase 3 nietzsche"
    ]
},
............... 
```

我的对象不是一个数组，但它是这样定义的，它是一个用 Json 解析的 txt 文件：

这是通用定义：

```
 (function () {
"use strict";

var list = new WinJS.Binding.List();
var groupedItems = list.createGrouped(
    function groupKeySelector(item) { return item.group.key; },
    function groupDataSelector(item) { return item.group; }
);

WinJS.xhr({ url: "/data/frasi.txt" }).then(function (xhr) {
    var items = JSON.parse(xhr.responseText);

    // Add the items to the WinJS.Binding.List
    items.forEach(function (item) {
        list.push(item);
    });
}); 
```

那么这是具体的定义（因为当我导航到我的页面时，我只选择了一个“项目”，所以只有一个“键”、“numeriFrasi”、“foto”、“frasi”：

```
 WinJS.UI.Pages.define("/pages/itemDetail/itemDetail.html", {

    ready: function (element, options) {
        item = options && options.item ? Data.resolveItemReference(options.item) : Data.items.getAt(0); 
```

"resolveItemReference" 从所有创建的项目中获取一项

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T18:30:05.383

首先将 s剥离`frasi`到一个 Array 中。您可以使用 underscore.js

```
frasis = YOUROBJECT.map(function(el){return el.frasi;});
frasis = _(frasis).faltten(); 
```

然后用它来构建你的`ListView`

# cuda - 重载CUDA shuffle函数使原来的不可见

> ID：15956022
> 
> 赞同：1
> 
> 时间：2013-04-11T18:20:08.313
> 
> 标签：cuda, shuffle, ptx

我正在尝试在 CUDA 中实现我自己的 64 位随机播放功能。但是，如果我这样做：

```
static __inline__ __device__ double __shfl_xor(double var, int laneMask, int width=warpSize)
{
    int hi, lo;
    asm volatile( "mov.b64 { %0, %1 }, %2;" : "=r"(lo), "=r"(hi) : "d"(var) );
    hi = __shfl_xor( hi, laneMask, width );
    lo = __shfl_xor( lo, laneMask, width );
    return __hiloint2double( hi, lo );
} 
```

对 __shfl_xor 的所有后续调用都将从这个 64 位版本实例化，无论参数的类型是什么。例如，如果我正在做

```
int a;
a = __shfl_xor( a, 16 ); 
```

它仍然会使用双重版本。解决方法可能是使用不同的函数名称。但是由于我是从模板函数中调用这个 shuffle 函数，所以使用不同的名称意味着我必须为 64 位浮点制作不同的版本，这不是很整洁。

那么如何在重载 __shfl_xor(double,...) 函数的同时仍然确保可以适当地调用 __shfl_xor(int,...) 呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T06:31:19.290

所有整数类型和浮点数都可以向上转换为双精度。当在内置函数和您的专用双函数之间进行选择时，这里的编译器可能会为所有类型选择您的。

您是否尝试过创建一个具有不同名称的函数并使用它来创建您的专用双变量和其他类型的虚拟变量？

例如：

```
static __inline__ __device__ double foo_shfl_xor(double var, int laneMask, int width=warpSize)
{
    // Your double shuffle implementation
}

static __inline__ __device__ int foo_shfl_xor(int var, int laneMask, int width=warpSize)
{
    // For every non-double data type you use
    // Just call the original shuffle function
    return __shfl_xor(var, laneMask, width);
}

// Your code that uses shuffle
double d;
int a;
foo_shfl_xor(d, ...); // Calls your custom shuffle
foo_shfl_xor(a, ...); // Calls default shuffle 
```

# bash - Matlab 中的 Bash 式编程引用功能？

> ID：15956024
> 
> 赞同：0
> 
> 时间：2013-04-11T18:20:15.017
> 
> 标签：bash, matlab

我会在 Bash 中使用这样的编程引用

```
$ export b=`ls /`
$ echo $b
Applications Library Network System Users Volumes tmp usr var 
```

现在我想在 Matlab 中找到类似的功能。另外，我想找到一个输出相对路径的命令，而不是像 Matlab 那样的绝对路径`ls`——如果我用正则表达式解析它，我感觉就像是在重新发明轮子。我需要找到这个命令来调试[这里](https://stackoverflow.com/questions/15939754/what-does-shadows-it-in-the-matlab-path-mean-how-to-do-it-in-a-file)的命名空间有什么问题。熟悉的 Bash 风格的功能会很酷。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T19:18:57.570

对于您的第一个问题，我认为您可以使用匿名函数获得这种行为：

```
b = @() ls('C:\');  %I'm on windows
b() 
```

该表达式`b()`现在返回我的 C 驱动器的内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T20:02:00.523

bash 反引号的 Matlab 等效项是调用该`system()`函数并使用第二个输出参数。它将运行外部命令并捕获输出。

```
[status,b] = system('ls /'); 
```

如果它是您想要运行并捕获控制台输出的 Matlab 代码字符串，请使用`evalc`.

但是要获取文件列表，您需要 Matlab`dir`函数。比解析该输出字符串容易得多，并且您可以获得更多信息。请参阅[Matlab 目录文档](http://www.mathworks.com/help/matlab/ref/dir.html "Matlab 目录文档")或`doc dir`了解更多详细信息。

```
children = dir('/');
childNames = { children.name };
childIsDir = [ children.isdir ]; 
```

# r - R中的分类/预测

> ID：15956025
> 
> 赞同：1
> 
> 时间：2013-04-11T18:20:15.587
> 
> 标签：r, machine-learning, nlp, classification

我有一个包含**N**个文档的语料库，分类为*spam* / *no-spam*。我正在按照标准程序对 R 中的数据进行预处理（[此处为代码](https://gist.github.com/elyase/5365552)）。预处理以`DocumenTermMatrix`使用权重作为**tfidf**结束。

现在我想用我的模型对新文档进行分类。

如何计算单个新文档的对应`DocumentVector`（使用文档的**tf和语料库的****idfs ）？**我想避免重新计算`DocumentTermMatrix`整个语料库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T19:55:55.083

过去我遇到过类似的问题，并且此功能不包含在 tm 包中。Ingo Feinerer 建议构建一个函数来获取 DocumentVector。该函数需要使用语料库和新文档中先前构建的 tm 或 dtm。首先以与语料库相同的方式预处理新文档，并使用单词和 tf. 您可以合并 tm/dtm 中的单词（例如 tdm$dimnames$Terms），将新文档转换为具有与文档的 tf 值相同的语料库术语（简单合并）。然后以标准方式将 tf 除以语料库的 idfs：

```
cs<-row_sums(tm>0)
 lnrs<-log2(nDocs(tm)/cs)
 tf*lnrs  # 
```

完成返回您的 DocumentVector。然后，您可以在直接使用 SVM 进行预测时将向量用作 data.frame。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T08:51:16.503

我不知道您使用什么 svm 库，但您的 SVM 模型似乎存储在`Corpus.svm` - 对吗？

对于新文档的预测，您可以按照以下所述的过程进行操作：http: [//planatscher.net/svmtut/svmtut.html](http://planatscher.net/svmtut/svmtut.html)任务 2。如果您使用其他库，过程将类似。IRIS 数据集也有实际示例。唯一的区别是您的新文档必须以与训练示例相同的方式处理（即删除停用词、tf-idf、...）

# python - Python 3 中的 PDF 合并

> ID：15956027
> 
> 赞同：1
> 
> 时间：2013-04-11T18:20:18.677
> 
> 标签：python, pdf, python-3.x, pypdf

是否有适用于 Python 3 的 PDF 操作模块？我已经尝试过 Pypdf，但是当我尝试使用 PIP 安装时它会出现故障。我想合并 PDF 文件。如果我使用 Pypdf2，我会使用此代码收到以下消息：

```
from pypdf2 import merger, PdfFileReader    

with open('test1.pdf', 'rb') as f:
        with open('test2.pdf', 'rb') as f2:
            merger = PdfFileMerger()
            merger.merge(position=0, fileobj=f2)
            merger.merge(position=0, fileobj=f)
            merger.write(open("test_out.pdf", 'wb')) 
```

```
“文件“c:\...merger.py”，第 97 行，在合并中
elif 类型（fileobj）== 文件：
NameError：未定义全局名称“文件””

```

merge.py 的第 97 行是：

```
elif type(fileobj) == file: 
```

使用代码时，我自己的代码中出现了类似的错误，例如

`input1 = PdfFileReader(file("document1.pdf", "rb"))`[- 这是来自http://www.blog.pythonlibrary.org/2012/07/11/pypdf2-the-new-fork-of-pypdf/](http://www.blog.pythonlibrary.org/2012/07/11/pypdf2-the-new-fork-of-pypdf/)的复制和粘贴

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T19:36:42.183

这似乎是 PyPDF2 中的一个错误……`file`在 python3 中消失了，这就是你在这里得到错误的原因。

一个快速的解决方法是将其添加到导入中`merger.py`：

```
from io import FileIO as file 
```

# android - Android - RelativeLayout - 在图像中心放置一个复选框

> ID：15956030
> 
> 赞同：1
> 
> 时间：2013-04-11T18:20:28.690
> 
> 标签：android, android-relativelayout

我对Android很陌生...

我想知道如何在我的 RelativeLayout 视图上将复选框居中放置在图像上 - 没有这样的属性......

这是我的代码： http: [//pastebin.com/tGAxju3Z](http://pastebin.com/tGAxju3Z)

请注意：图像大于复选框...

提前感谢，丁。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T18:40:42.537

对以下内容使用框架布局

```
<FrameLayout 
android:id="@+id/button1"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:background="@drawable/image1"
>

<Button
android:id="@+id/button2"
android:layout_gravity="center"
android:src="@drawable/image2" />

</FrameLayout> 
```

希望这有效...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T18:33:05.100

如果您使用的是相对布局，最好将线性布局及其背景作为图像，然后将复选框放在线性布局上...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T19:15:37.690

确保 CheckBox 的 layout_height 与 ImageView 的 layout_height 相同，layout_width 相同，并添加重力。确保 ImageView 和 Checkbox 位于另一个布局中（layout_width 和 layout_height 设置为 wrap_content），而不是 TextView。

```
<RelativeLayout 
     android:id="@+id/relativeLayout1"
     android:layout_width="wrap_content" 
     android:layout_height="wrap_content"
     xmlns:android="http://schemas.android.com/apk/res/android"
     android:padding="5dp" 
     android:layout_gravity="center"
     android:background="#e2e2e2"
 >
     <ImageView 
         android:contentDescription="Icon" 
         android:layout_width="74dp"
         android:layout_height="64dp"
         android:id="@+id/imgThumbnail"
         android:scaleType="centerInside" 
     />

     <CheckBox 
         android:id="@+id/chkEdit" 
         android:layout_width="match_parent"
         android:layout_height="match_parent"
         android:gravity="center" 
         android:visibility="visible" 
     />
</RelativeLayout>
<TextView /> 
```

提示：将 android:background="#FF0000" (=RED) 和 android:background="#00FF00" (=GREEN) 添加到不同的小部件，这样您就可以准确地看到项目所覆盖的内容。

# c# - 如何比较两个图像的直方图？

> ID：15956031
> 
> 赞同：0
> 
> 时间：2013-04-11T18:20:30.107
> 
> 标签：c#

我将两个直方图转换为整数数组，现在我有两个大小为 array1[65536] 和 array2[65536] 的数组，其中不同索引处的值范围为 0 -255。现在我想匹配两个这样的数组，这样我就可以得到这两个图像匹配多少的结果？？？？？？请尽快帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T18:31:34.197

你不能。

图像直方图为您提供给定颜色在图像中出现的次数。将图像 A 想象为 25 像素的黑色垂直线，将图像 B 想象为 5x5 像素的黑盒图像。

A 和 B 都有完全相同的直方图，但显然不是相似的图像。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T18:42:56.883

好吧，您无法比较图像是否匹配。正如 Tergiver 所说，图像直方图是图像中色调（亮度）分布的图形表示。

如果您想比较您的直方图并检查它们之间的差异，您可以按照以下示例进行操作（这是一个包含 5 个元素大小的数组的示例，只是为了简化）：

```
int[] array1 = {0,255,100,200,78 };
int[] array2 = {255, 0, 250, 15, 34 };
float[] diff = new float[5];
for (int i = 0; i < 5; i++)
{
    diff[i] = ((float)Math.Abs(array1[i] - array2[i])) / 255;
}

float degreeOfDiff = diff.Sum()/array1.Length*100;
bool sameDistribution = degreeOfDiff == 0;

Debug.WriteLine(degreeOfDiff + "%");
Debug.WriteLine(sameDistribution); 
```

我要强调的是，这**不会**检查图像是否相等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T18:42:10.193

这个问题有点含糊，但如果你想要的是对称差异，那么这里有一个单行 LINQ 查询：

```
int[] foo = new int[] { 1,2,3 };
int[] bar = new int[] { 4,5,6 };

int distance = foo.Zip(bar, (x,y)=>Math.Abs(x-y)).Aggregate( (x,y)=>x+y );

Console.WriteLine("Symmetric difference between foo and bar: {0}", distance); 
```

可能有更好的方法来计算相似度。这在很大程度上取决于您要考虑“相似”的图像。我怀疑您还可以使用较小的阵列（即将相似的色调放在一起）获得更好的结果，以便“几乎”相同颜色的图像与“相似”记录。

**编辑**：看起来[**地球移动器的距离**](http://en.wikipedia.org/wiki/Earth_mover%27s_distance)就是你想要的：维基百科的页面将图像比较列为 EMD 的一个很好的应用程序。

> EMD 在计算机科学中的早期应用是比较两个可能因抖动、模糊或局部变形而不同的灰度图像。 [4] 在这种情况下，区域是图像的域，光（或墨水）的总量是要重新排列的“污垢”。
> 
> EMD 广泛用于基于内容的图像检索，以计算两个数字图像的颜色直方图之间的距离。在这种情况下，区域是 RGB 颜色立方体，每个图像像素都是“污垢”的包裹。相同的技术可用于任何其他量化像素属性，例如亮度、梯度、视频帧中的视在运动等。

Wikipedia 页面还包含用于计算 EMD 的算法的伪代码，我相信这是您问题的正确答案。

# android - 使用节标题将自定义字体应用于列表视图

> ID：15956032
> 
> 赞同：1
> 
> 时间：2013-04-11T18:20:31.683
> 
> 标签：android, listview, fonts

我正在运行以下代码：

```
public class SeparatedListAdapter extends BaseAdapter
    {
        public final Map<String, Adapter> sections = new LinkedHashMap<String, Adapter>();
        public final ArrayAdapter<String> headers;
        public final static int TYPE_SECTION_HEADER = 0;

        public SeparatedListAdapter(Context context)
            {
                headers = new ArrayAdapter<String>(context, R.layout.list_header);
            }

        public void addSection(String section, Adapter adapter)
            {
                this.headers.add(section);
                this.sections.put(section, adapter);
            }

        @Override
        public Object getItem(int position)
            {
                for (Object section : this.sections.keySet())
                    {
                        Adapter adapter = sections.get(section);
                        int size = adapter.getCount() + 1;

                        // check if position inside this section
                        if (position == 0) {
                            return section;
                        }
                        if (position < size) {
                            return adapter.getItem(position - 1);
                        }

                        // otherwise jump into next section
                        position -= size;
                    }
                return null;
            }

        @Override
        public int getCount()
            {
                // total together all sections, plus one for each section header
                int total = 0;
                for (Adapter adapter : this.sections.values()) {
                    total += adapter.getCount() + 1;
                }
                return total;
            }

        @Override
        public int getViewTypeCount()
            {
                // assume that headers count as one, then total all sections
                int total = 1;
                for (Adapter adapter : this.sections.values()) {
                    total += adapter.getViewTypeCount();
                }
                return total;
            }

        @Override
        public int getItemViewType(int position)
            {
                int type = 1;
                for (Object section : this.sections.keySet())
                    {
                        Adapter adapter = sections.get(section);
                        int size = adapter.getCount() + 1;

                        // check if position inside this section
                        if (position == 0) {
                            return TYPE_SECTION_HEADER;
                        }
                        if (position < size) {
                            return type + adapter.getItemViewType(position - 1);
                        }

                        // otherwise jump into next section
                        position -= size;
                        type += adapter.getViewTypeCount();
                    }
                return -1;
            }

        public boolean areAllItemsSelectable()
            {
                return false;
            }

        @Override
        public boolean isEnabled(int position)
            {
                return (getItemViewType(position) != TYPE_SECTION_HEADER);
            }

        @Override
        public View getView(int position, View convertView, ViewGroup parent)
            {
                int sectionnum = 0;
                for (Object section : this.sections.keySet())
                    {
                        Adapter adapter = sections.get(section);
                        int size = adapter.getCount() + 1;

                        // check if position inside this section
                        if (position == 0) {
                            return headers.getView(sectionnum, convertView, parent);
                        }
                        if (position < size) {
                            return adapter.getView(position - 1, convertView, parent);
                        }

                        // otherwise jump into next section
                        position -= size;
                        sectionnum++;
                    }
                return null;
            }

        @Override
        public long getItemId(int position)
            {
                return position;
            }

    } 
```

头文件.xml

```
<!-- list_header.xml -->
<TextView
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/list_header_title"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:paddingTop="2dip"
    android:paddingBottom="2dip"
    android:paddingLeft="5dip"
    android:textSize="20sp"
    style="?android:attr/listSeparatorTextViewStyle" /> 
```

LIST_ITEM.xml

```
<?xml version="1.0" encoding="utf-8"?>
<!-- list_item.xml -->
<TextView
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/list_item_title"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:paddingTop="15dip"
    android:paddingBottom="15dip"
    android:paddingLeft="15dip"
    android:textSize="24sp"/> 
```

我是这样设置的：

```
adapter.addSection(header, new ArrayAdapter<String>(this, R.layout.list_item, array)); 
```

一切正常。现在我需要以编程方式将自定义字体 .ttf 添加到标题和部分，该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T18:33:10.227

在您的`getView`方法中，您可以替换以下行

```
if (position == 0) {
    return headers.getView(sectionnum, convertView, parent);
}
if (position < size) {
    return adapter.getView(position - 1, convertView, parent);
} 
```

和

```
View view = null;
if (position == 0) {
    view = headers.getView(sectionnum, convertView, parent);
    if(view != null) {
        TextView text = (TextView) view.findViewById(R.id.list_header_title);
        if(text != null) {
            text.setTypeface(myTypeface);
        }
    }
    return view;
}
if (position < size) {
    view = adapter.getView(position - 1, convertView, parent);
    TextView text = (TextView) view.findViewById(R.id.list_item_title);
    if(view != null) {
        if(text != null) {
            text.setTypeface(myTypeface);
        }
    }
    return view;
} 
```

where`myTypeFace`是 type 的成员，`TypeFace`正在构造函数中加载，如下所示：

```
private TypeFace myTypeFace = null;    

public SeparatedListAdapter(Context context)
{
    headers = new ArrayAdapter<String>(context, R.layout.list_header);
    myTypeface = Typeface.createFromAsset(context.getAssets(), "fonts/myFont.ttf");
} 
```

这会将放置的字体分配`assets/fonts/myFont.ttf`给您的文本视图。但是你应该注意，如果你在你的应用程序的其他地方需要字体，你可能不应该把它放在适配器中，而是从自定义字体管理器或其他东西中加载它，因为旧版本的 android 不会缓存字体`createFromAsset`时调用，这将导致不必要的内存消耗。

# image - 将坐标转移到新系统

> ID：15956033
> 
> 赞同：0
> 
> 时间：2013-04-11T18:20:31.993
> 
> 标签：image, math, opencv, line, coordinate-systems

我想将点坐标转换为新生成的坐标系，原始系统从图像的左上角开始（0,0）

我在新系统中的信息是： 1- 我在图像中的某些位置有新原始 (x0,y0) 的值 2- 我在两个新轴上也有 2 个点（总共 4 个点 2 in每条线）使用它我可以计算两条轴的线方程（y = a1x + b1），（y = a2x + b2）3-我有每条线的向量（Vx，Vy）

注意：有时新轴会旋转（线条不完全水平或垂直）

如何将点坐标转换为这个新系统

任何帮助将不胜感激

这是图像

![http://i.imgur.com/ByDR7Vq.png](https://i.stack.imgur.com/POMeD.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T19:24:39.293

首先表达你的线条`a1*(x-x0)+b1*(y-y0)=0`和`a2*(x-x0)+b2*(y-y0)=0`它们的交点`x0`，`y0`已经在方程中占了。

**更新的标志**

`x`从,`y`到`z`,的变换`w`是

> ```
> z = -sqrt(a1^2+b1^2)*(a2*(x-x0)+b2*(y-y0))/(a2*b1-a1*b2)
> w =  sqrt(a2^2+b2^2)*(a1*(x-x0)+b1*(y-y0))/(a1*b2-a2*b1) 
> ```

和相反的

> ```
> x = x0 - b1*z/sqrt(a1^2+b1^2) + b2*w/sqrt(a2^2+b2^2)
> y = y0 + a1*z/sqrt(a1^2+b1^2) - a2*w/sqrt(a2^2+b2^2) 
> ```

将系数缩放为`sqrt(a1^2+b1^2)=1`和会很有帮助`sqrt(a2^2+b2^2)=1`。

请注意，这也适用于非正交线。只要它们不平行，`a2*b1-a1*b2!=0`它就会起作用。

***例子***

`z`线 `(-2)*(x-3) + (1)*(y-1) = 0`和`w`线在`(-1)*(x-3) + (-4)*(y-1) = 0`处相遇`(3,1)`。因此，系数为`a1=-2`, `b1=1`, `a2=-1`, `b2=-4`。

坐标`(x,y)=(2,1)`变换为

```
z = -sqrt((-2)^2+1^2) ((-1) (x-3)+(-4) (y-1))/((-1) 1-(-2) (-4)) = 0.2484
w = sqrt((-1)^2+(-4)^2) ((-2) (x-3)+1 (y-1))/((-2) (-4)-(-1) 1) = 0.9162 
```

与逆

```
x = -1 z/sqrt((-2)^2+1^2)+(-4) w/sqrt((-1)^2+(-4)^2)+3 = 2
y = (-2) z/sqrt((-2)^2+1^2)-(-1) w/sqrt((-1)^2+(-4)^2)+1 = 1 
```

**发展**

对于一条线`a1*(x-x0)+b1*(y-y0)=0`，沿该线的方向矢量为`e1 = [e1x,e1y]= [-b1/sqrt(a1^2+b1^2),a1/sqrt(a1^2+b1^2)]`。另一条线也是如此。

本地点的屏幕坐标`[z,w]`是从原点开始`x0`，沿着第一条线`y0`移动`z`，然后`w`沿着第二条线移动。所以

```
x = x0 + e1x*z + e2x*w = x0 -b1/sqrt(a1^2+b1^2)*z - b2/sqrt(a2^2+b2^2)*w
y = y0 + e1y*z + e2y*w = y0 +a1/sqrt(a1^2+b1^2)*z + a2/sqrt(a2^2+b2^2)*w 
```

现在我需要通过反转`w`.

要找到`z`，`w`从`x`，`y`反转上述两个方程。

# r - 批量读取netcdf文件并平均一个变量

> ID：15956034
> 
> 赞同：0
> 
> 时间：2013-04-11T18:20:34.497
> 
> 标签：r, variables, netcdf

我是新的 R 用户。我现在有 1979 年的每日 netcdf 数据，例如：
sm19790101.1.nc
sm19790102.1.nc
。
.
.
sm19791231.1.nc

我需要将一个名为“sm”的变量平均到每月分辨率。我现在可以这样做：

```
glob2rx("sm197901*.1.nc")  
jan<-list.files(pattern=glob2rx("sm197901*.1.nc"),full.names=TRUE) 
```

将所有 1 月数据移植到 jan，但我不知道如何打开每个文件并获取特定变量（我已经安装了 Rnetcdf 包）。如果我要手动执行此操作，则应该是：

```
s19790101<-open.nc("sm19790101.1.nc")  
sm19790101<-var.get.nc(s19790101,"sm",na.mode=0) 
```

然后平均它们...

我想问题是如何读取带有变量（例如 01-31）的文件作为文件名的一部分，然后循环整个月。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-04-07T17:37:00.680

如果您有大量数据要汇总，您可以使用 NetCDF Operator 工具[http://nco.sourceforge.net/nco.html#ncra-netCDF-Record-Averager将每日数据汇总为每月平均值](http://nco.sourceforge.net/nco.html#ncra-netCDF-Record-Averager)

```
ncra DAILY/sm197901[*].1.nc MONTHLY/sm197901.1.nc 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T19:37:58.507

看起来您可以将文件名组件“sm197901”、“天”、“.1.nc”粘贴在一起构造所需的文件名。

```
#make sure it has a leading 0
days = formatC(1:31, width=2, flag="0")
ncfiles = lapply(days, function(d){
    filename = paste("sm197901", d, ".1.nc", sep="")
    #print(filename)
    open.nc(filename)
}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-28T13:43:32.660

与戴夫的 ncra 回答平行，您也可以使用 cdo

```
cdo mergetime sm1979????.1.nc year.nc
# you only need this next step if there is more than one variable in the file:
cdo selvar,sm year.nc yearsm.nc  
cdo monmean year.nc month.nc 
```

在某些系统上，打开文件的数量限制为 256 - 如果这是您的情况，您可以将“mergetime”替换为“cat”，我认为它应该仍然有效，因为文件将按时间顺序列出。

# javascript - 仅在 IE10 上加载页面时，AngularJS 表单字段脏且无效

> ID：15956037
> 
> 赞同：9
> 
> 时间：2013-04-11T18:20:46.813
> 
> 标签：javascript, angularjs

我有一个简单的登录表单，它在 IE10 上总是在页面加载时表单字段无效，而用户没有做任何事情。

表单字段非常简单：

```
<input type="text" required class="input-block-level" placeholder="username" ng-model="username" name="username" tabindex="1">
<p class="text-error" ng-show="loginForm.username.$dirty && loginForm.username.$invalid">
    <span ng-show="loginForm.username.$error.required">required</span>
</p> 
```

[http://plnkr.co/edit/DNUanGGaZDgFWYrm3gLK?p=preview](http://plnkr.co/edit/DNUanGGaZDgFWYrm3gLK?p=preview)

在上面的 plunker 中，您可以通过关注该字段来重现问题，而在我的应用程序内部，页面加载时会显示错误字段。在其他浏览器中它工作得很好。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-30T20:01:16.453

有人为此写了一个[要点](https://gist.github.com/sunnycyk/5603832)，我在下面复制了所有必要的样板：

> **角-hacks.js：**

```
(function (window, angular, undefined) {
    'use strict';
    var hacks = angular.module('hacks', []);
    hacks.config(['$provide', function ($provide) {
        $provide.decorator('$sniffer', ['$delegate', function ($sniffer) {
            var msie = parseInt((/msie (\d+)/.exec(angular.lowercase(navigator.userAgent)) || [])[1], 10);
            var _hasEvent = $sniffer.hasEvent;
            $sniffer.hasEvent = function (event) {
                if (event === 'input' && msie === 10) {
                    return false;
                }
                _hasEvent.call(this, event);
            }
            return $sniffer;
        }]);
    }]);
})(window, window.angular); 
```

到目前为止，我还没有遇到任何问题，尽管我不会假装我已经通过任何严肃的回归测试。它过滤掉了 IE10 的*所有*输入事件，可能需要更具体。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-21T09:18:51.500

我的解决方法：

添加`ng-if="true"`到输入元素。

仅在角度 1.2.28 上测试。

# shutdown - 关闭 kvm 以创建备份映像

> ID：15956042
> 
> 赞同：-1
> 
> 时间：2013-04-11T18:21:04.817
> 
> 标签：shutdown, kvm

我正在尝试使用`virsh shutdown vm1`命令关闭 centos 上的 kvm。我检查了使用的规范 xml 中是否存在 ACPI 功能，`virsh dumpxml vm1 | grep -F acpi`并且确实存在。我在这里想念什么？我不想强制关闭虚拟机。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T12:49:25.580

守护`acpid`进程必须在 VM 来宾中运行，否则它将不会响应来自管理程序的请求。

从客人内部：

```
service acpid status 
```

应该返回正在运行的 acpid。如果它不尝试：

```
sudo yum install acpid
sudo chkconfig acpid on
sudo service acpid start 
```

# c# - 使用 WatiN 测试下拉列表

> ID：15956043
> 
> 赞同：1
> 
> 时间：2013-04-11T18:21:06.710
> 
> 标签：c#, visual-studio-2010, watin

我正在使用 WatiN 测试网站并自动化流程。我可以成功打开网站，但是当我尝试从选择列表中选择一个选项时出现问题：

```
<select id="form:Dropdown" name="form:Dropdown" size="1" title="Select Option"> <option value="0">Select Code</option>
    <option value="234890/NA/1">23FA4890</option>
    <option value="237014/NA/1">23FA7014</option>
</select> 
```

代码：

```
 Settings.AttachToBrowserTimeOut = 240;
            Settings.WaitUntilExistsTimeOut = 240;
            Settings.WaitForCompleteTimeOut = 240;    

            browser = new IE();
            browser.GoTo(url);
            browser.WaitForComplete();
            //Thread.Sleep(10000);
            browser.SelectList(Find.ById("form:Dropdown")).WaitUntilExists(); //ERROR OCCURS HERE
            SelectList dList = browser.SelectList(Find.ById("form:Dropdown"));
            dList.Select("23FA4890"); 
```

这看起来应该可以工作，但我不断收到错误消息“等待 240 秒以显示元素时超时”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T18:28:44.207

我不相信你需要打电话`WaitUntilExists`，因为`WaitForComplete`在页面完全加载之前已经阻塞了。我知道这并不能完全回答您的问题，但我想向您展示我在生产中使用了一年多的一些代码示例，这些代码从未成为问题。

请注意，我从 iframe 中抓取一个框架并从下拉列表中选择“ID”的值：

```
Regex regex = new Regex(@"^.*\/globalframeset\.esp.*$");
using (var browser = IE.AttachTo<IE>(Find.ByUrl(regex), 12))
{
    if (browser != null)
    {
        browser.AutoClose = false;

        var iFrame = browser.Frame(Find.ById("GlobalWrapper"));

        if (iFrame != null)
        {
            var frame = iFrame.Frame(Find.ByName("frGlobalNav"));

            if (frame != null)
            {
                frame.TextField(Find.ByName("findtext")).Value = person.MedicalRecordNumber;

                // This code is setting the DDL called "filtertype" to a value of "ID"
                frame.SelectList(Find.ByName("filtertype")).SelectByValue("ID");

                Regex buttonRegex = new Regex(@"^.*\/go_text\.gif.*$");
                frame.Image(Find.BySrc(buttonRegex)).ClickNoWait();
            }
        }

        browser.BringToFront();
    }
} 
```

# regex - M/D/YYYY 和 MM/DD/YYYY (InfoPath) 的正则表达式日期验证

> ID：15956044
> 
> 赞同：4
> 
> 时间：2013-04-11T18:21:08.217
> 
> 标签：regex, forms, sharepoint, webforms, infopath

我正在寻找一些 RegEx 用于 InfoPath 2010 中日期字段的自定义模式验证。接受的日期格式是 m/d/yyyy 或 mm/dd/yyyy。

尝试1：`(\d{1,2})/(\d{1,2})/(\d{4})`

尝试2：`(0?[1-9]|[12][0-9]|3[01])/(0?[1-9]|1[012])/((19|20)\d\d)`

尝试 1 的运气更好，尝试 2 的运气并不好。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-09T03:21:28.800

我在 InfoPath 2010 中遇到了一些日期和时间验证问题，正则表达式模式匹配可能是一种有用的方法。用于验证 m/d/yyyy 的基本正则表达式（不考虑一个月中的特定日期并允许在月份或日期前加上 '0' 前缀）将类似于以下内容（未经测试）：

```
(0?[1-9]|1[012])\/(0?[1-9]|[12][0-9]|3[01])\/\d{4} 
```

对于更复杂的东西，你可以看看[这个 SO answer](https://stackoverflow.com/a/8768241/132599)。

但是，在 InfoPath 中，显示的日期格式可能与内部格式完全不同，您的正则表达式需要匹配的正是这种内部格式。如果您在表单上放置一个计算字段并将其设置为您要验证的日期字段，您将看到如下内容：

```
2013-05-08T12:13:14 
```

因此，验证其日期部分所需的正则表达式（再次忽略每月的特定天数）是：

```
\d{4}-(0[1-9]|1[012])-(0[1-9]|[12][0-9]|3[01]) 
```

但这与示例日期不匹配，因为它不考虑“T”之后的时间部分。所以诀窍是使用表达式仅对日期子字符串执行匹配，例如在我的情况下，以下工作：

```
not(xdUtil:Match(substring-before(dfs:dataFields/my:SharePointListItem_RW/my:DateCreated, "T"), "\d{4}-(0[1-9]|1[012])-(0[1-9]|[12][0-9]|3[01])")) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-20T01:27:40.487

我有同样的问题。

我在日期字段上使用规则将另一个隐藏文本字段设置为

```
string(datefield). 
```

那总是出现 YYYY-MM-DD ，创建正则表达式并不难。我用过这个。

```
((19|20)\d\d)-(0?[1-9]|1[012])-(0?[1-9]|[12][0-9]|3[01]) 
```

请记住，它必须是具有一些限制的 XML 正则表达式。

然后我在隐藏字段上设置另一个规则来设置布尔 IsDateValid。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-18T10:29:14.193

我尝试了以下方法并且成功了：

```
 \d{4}-\d{1,2}-\d{1,2} 
```

正如大卫指出的那样，内部格式可能与显示的格式不同，因为当我尝试`\d\d/\d\d/\d\d\d\d`它时它不起作用，即使它符合日期的显示格式。

# android - 获得更准确的 GPS SNR/PNR/Elevation/Azimuth 精度

> ID：15956053
> 
> 赞同：1
> 
> 时间：2013-04-11T18:21:31.407
> 
> 标签：android

现在我正在使用 a`gpsStatus`从 android SDK 获取卫星列表。我正在使用以下方法检索变量：

```
float az = item.getAzimuth();
float el = item.getElevation();
int p = item.getPrn();
float s = item.getSnr(); 
```

到目前为止，我得到的精度值只有 1 点，主要是 0.0，例如：

(173.0, 47.0, 74, 30.0) 对于浮点数，是否有更高的精度？我能够使用 a`Criteria`从准确度、纬度和经度中获得更高的精度。我也需要尝试获取尽可能精确的卫星信息数据。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-26T09:18:11.323

我对此不是 100% 确定的，但我相信大多数（如果不是全部）GPS 接收器只会输出最接近度数的方位角和仰角数据。同样，SNR 值仅给出最接近的整数（也许专业级接收器会提供更精确的 SNR 测量值，但我没有任何基于智能手机的接收器会这样做。）。当然，PRN 只是整数值。

所以我担心你的问题的答案（如果我对 GPS 接收器的看法是正确的）是不可能使用任何 Android API 获得更准确的方位角、仰角和 SNR 信息，因为 API 只是检索任何内容接收机输出。

我能想到的获得更准确方位角和仰角值的唯一可能性是从一些在线资源中检索 GPS 卫星历书，然后使用大地测量公式计算您当前位置的预期方位角和仰角。换句话说，这不是一件容易的事……

顺便说一句，你提到输出是“**主要是**.0”，但我认为如果你回去检查，所有值都以 .0 结尾。

# python - Python：如何冻结/禁用 wxCheckListBox 中的某些项目？

> ID：15956054
> 
> 赞同：2
> 
> 时间：2013-04-11T18:21:31.493
> 
> 标签：python, wxpython, freeze, checklistbox

我正在尝试`wx.CheckListBox`在 Python 中实现一个，我希望始终检查列表中的某些项目。我曾尝试`SetCheckedStrings(stringList)`在事件上使用`wx.EVT_CHECKLISTBOX`。但是我得到了相反的结果，当我取消选中 中的一项时`stringList`，它是未选中的；当我再次单击它进行检查时，它永远不会让我再次检查。

谁能给我一些提示，让某些项目`wx.CheckListBox`始终被检查或使这些项目无法检查？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T10:27:55.070

If event steps in your way, you can always disable it for a while using `self.box.Unbind(wx.EVT_CHECKLISTBOX)`. However this sample works for me even without unbinding:

```
import wx

CHOICES = ["One", "Two", "Three", "Four", "Five"]
ALWAYS_ON = ["One", "Three"]

class MainWindow(wx.Frame):
    def __init__(self, *args, **kwargs):
        wx.Frame.__init__(self, *args, **kwargs)

        self.panel = wx.Panel(self)
        self.box = wx.CheckListBox(self.panel, choices=CHOICES)

        self.sizer = wx.BoxSizer()
        self.sizer.Add(self.box)

        self.panel.SetSizerAndFit(self.sizer)  
        self.Show()

        self.box.Bind(wx.EVT_CHECKLISTBOX, self.OnCheckBoxList)
        self.box.SetCheckedStrings(ALWAYS_ON)

    def OnCheckBoxList(self, e):       
        index = e.GetSelection()
        label = self.box.GetString(index)
        if label in ALWAYS_ON:
            self.box.Check(index)           

app = wx.App(False)
win = MainWindow(None)
app.MainLoop() 
```

# python - 与帐户关联后如何更新用户的`extra_data`？

> ID：15956058
> 
> 赞同：5
> 
> 时间：2013-04-11T18:21:50.107
> 
> 标签：python, django, django-socialauth, django-1.4

我已经成功地将`django-socialauth`一个帐户（在本例中为 Instagram 帐户）与现有用户帐户相关联。我还设置了我的管道来收集其他用户详细信息：

```
def update_social_auth(backend, details, response, social_user, uid, user,
                   *args, **kwargs):

    if getattr(backend, 'name', None) in ('instagram', 'tumblr'):
        social_user.extra_data['username'] = details.get('username')

    social_user.save() 
```

这在第一次关联帐户时非常有用。但是，如果帐户已经关联，则该`username`字段将不会出现在 中`extra_data`。

**`extra_data`建立关联后如何更新用户？**有没有办法`django-socialauth`在不断开连接和重新连接或使用帐户（例如 Instagram 的）API 的情况下做到这一点？

如果有帮助，这是我目前的管道：

```
SOCIAL_AUTH_PIPELINE = (
    'social_auth.backends.pipeline.social.social_auth_user',
    'social_auth.backends.pipeline.social.associate_user',
    'social_auth.backends.pipeline.social.load_extra_data',
    'social_auth.backends.pipeline.user.update_user_details',
    'apps.utils.social.utils.update_social_auth'
) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-09T11:07:44.743

这是我用来向现有 Django 用户添加 'admin' 和 'staff' 选项的代码片段；我不知道`django-socialauth`这个`extra_data`领域，但我猜这样的事情可能适用：

```
 :
userqueryset = User.objects.filter(username=user_name)
if not userqueryset:
    print("User %s does not exist"%user_name, file=sys.stderr)
    return am_errors.AM_USERNOTEXISTS
# Have all the details - now update the user in the Django user database
# see:
#   https://docs.djangoproject.com/en/1.7/ref/contrib/auth/#django.contrib.auth.models.User
#   https://docs.djangoproject.c om/en/1.7/ref/contrib/auth/#manager-methods
user = userqueryset[0]
user.is_staff     = True
user.is_superuser = True
user.save()
 : 
```

FWIW，我的应用程序使用 3rd 方身份验证（特别是通过 Google+ 的 atm OpenId Connect），所以我认为这里有一些共同目标。就我而言，我希望能够将 Django 管理员权限添加到已经创建的用户。

包含上述代码的完整模块位于[github.com/gklyne/annalist/blob/develop/src/annalist_root/annalist_manager/am_createuser.py#L231](https://github.com/gklyne/annalist/blob/develop/src/annalist_root/annalist_manager/am_createuser.py#L231)

# java - 使用 CDI (Seam 3) 视图范围时的 JSF 转换器范围

> ID：15956072
> 
> 赞同：2
> 
> 时间：2013-04-11T18:22:38.277
> 
> 标签：java, jsf, ejb, cdi, seam3

我目前正在查看代码并发现 CDI 转换器，例如：

```
@Named
@RequestScoped
public class BankConverter implements Converter, Serializable
{
    @EJB
    private BankService bankService;

    @Override
    public Object getAsObject( FacesContext ctx, UIComponent comp, String identifier )
    {
        if ( identifier == null || identifier.trim().isEmpty() )
        {
            return null;
        }

        Bank bank = null;

        try
        {       
            bank = this.bankService.findByPrimaryKey( Long.valueOf( identifier ) );
        }
        catch( Exception e )
        {
            // omitted
        }

        return bank;
    }

    @Override
    public String getAsString( FacesContext ctx, UIComponent comp, Object obj )
    {
        if ( obj == null || ( ( Bank ) obj ).getId() == null )
        {
            return null;
        }

        return ( ( Bank ) obj ).getId().toString();
    }

} 
```

转换器基本上总是这样使用（注意`converter="#{bankConverter}"`）：

```
<p:autoComplete id="bank"
                value="#{employeeDepotManager.selectedBank}"
                var="bnk"
                converter="#{bankConverter}"
                completeMethod="#{autoCompleter.completeBankSearch}"
                itemLabel="#{bnk.name}"
                itemValue="#{bnk}"
                forceSelection="false"
                minQueryLength="3"
                global="true"
                validator="#{employeeDepotManager.validateBank}"
                scrollHeight="200">
    <p:ajax event="itemSelect" update="bank-code bank-name" />
    <p:column>#{bnk.code}</p:column>
    <p:column>#{bnk.name}</p:column>
</p:autoComplete> 
```

我目前正在与一位同事讨论**哪种范围最**适合转换器...

从 JSF 页面引用的 95% 的管理器 bean 是`@ViewScoped`，所以我认为最好让转换器`@ViewScoped`也是如此（而不是 @RequestScoped，据我所知，它会为每个 AJAX 请求重新创建一个转换器实例）。

然后我的同事补充说，转换器可能应该是这样`@Dependent`，因为这会自动将转换器放入周围 bean 所在的范围内。我的感觉是，这行不通。但是，我真的不能不同意，因为我的知识几乎到此为止。

那么，当几乎所有从 JSF 引用的 bean 都是 时，转换器的最佳范围**可能**`@ViewScoped`是什么？

PS：注意我们使用Seam 3来混合`@Named`和`@ViewScoped`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T18:48:24.090

由于大多数转换器实际上是无状态的，因此它们很容易成为`@ApplicationScoped`，在我看来，这是它们最自然的范围。尽管如此，有些转换器实际上并非如此。例如，`DateTimeConverter`后面的`<f:convertDateTime>`标签确实持有一些状态。此外，默认实现`@FacesConverter`使用`Application#createConverter(String converterId)`在需要时创建新的转换器实例，因此每个请求可以多次创建它。

此外，就我而言，就范围而言，自定义转换器与引用的支持 bean 没有任何交集，因此它们是否无关紧要`ViewScoped`。在选择转换器范围时，真正重要的是转换器实例中保存的状态范围，正如 BalusC 正确发现的那样。

至于您问题中的转换器实际上*是无状态*的，它可以是安全的`@ApplicationScoped`。

# uml - 将 UML 图从 Entreprise Architect 导出到 OCL 工具（USE 或 OCLE）

> ID：15956080
> 
> 赞同：0
> 
> 时间：2013-04-11T18:23:21.220
> 
> 标签：uml, ocl

我在 Enterprise Architect 上制作了一些图表，我想将它们导出到 OCL 工具“USE”或“OCLE”。我尝试了选项导出并将图表转换为 xml 扩展名，但它在 OCL 工具上不起作用。我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T23:28:11.600

你不能。[实时调频](http://sourceforge.net/apps/mediawiki/useocl/index.php?title=Quick_Tour#2._USE_Specifications);-)

> USE 的一个可能扩展是导入由 CASE 工具创建的 XMI 文件

# maps - 如何筛选抓取谷歌地图的地方？

> ID：15956084
> 
> 赞同：3
> 
> 时间：2013-04-11T18:23:33.360
> 
> 标签：maps, screen, scrape

我有这张地图，[https://maps.google.com/maps/ms?msa=0&msid=211195694269703855460.0004a7072cf25d4660761&ie=UTF8&ll=41.40205,2.157927&spn=0.103847,0.133132&source=embed](https://maps.google.com/maps/ms?msa=0&msid=211195694269703855460.0004a7072cf25d4660761&ie=UTF8&ll=41.40205,2.157927&spn=0.103847,0.133132&source=embed)

我想下载所有位置并将它们复制到数据库中

我在哪里可以找到 JSON？

有谁知道如何做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-14T00:51:40.547

您可以单击共享图标并将地图下载为 KML 文件。然后，您将获得一个 XML 文件中的所有位置，您可以对其进行解析并添加到数据库中。

![在此处输入图像描述](https://i.stack.imgur.com/cqY27.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T19:04:47.017

屏幕刮擦没有简单的方法。但是，有一种简单的方法可以访问相同的信息：Google Places API。请参阅 [https://developers.google.com/places/documentation/](https://developers.google.com/places/documentation/)

# java - 从没有 Java 值的哈希表中获取键

> ID：15956095
> 
> 赞同：0
> 
> 时间：2013-04-11T18:24:17.047
> 
> 标签：java, key, hashtable

我有一个像这样的哈希表

```
hashtable = new Hashtable(); 
```

如何在不知道键的值对的情况下从哈希表中获取键（任何键都可以）？如果我可以从哈希表中随机选择一个键，那将是非常棒的，但我真正需要的只是从哈希表中提取一个键。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T18:26:46.807

你可以这样做：

```
if (!hashtable.isEmpty()) {
   Object firstKey = hashtable.keySet().iterator().next();
   ...
} 
```

除此之外，此`Hashtable`方法具有同步的开销，并且类本身已过时。考虑使用`Map`集合 API 中的 a，例如 a`HashMap`或`LinkedHashMap`。还要使用泛型类型而不是原始类型来避免强制转换。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T18:27:17.783

`hashtable.keySet()`将返回一组键。要获取随机密钥，请使用

```
Object[] keys = hashtable.keySet().toArray();
Object key = keys[new Random().nextInt(keys.length)]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-11T18:27:09.983

您可以`keySet()`从哈希表中获取。

它将返回`Collection`所有键中的所有键，这些键在您的情况下将为空，因为您没有将任何内容放入哈希表中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-11T18:27:55.060

使用 hashtable.keys() 方法获取哈希表的所有键。

# database - 来自服务的 CreateProcessAsUser 在访问远程计算机时存在安全问题

> ID：15956096
> 
> 赞同：0
> 
> 时间：2013-04-11T18:24:32.470
> 
> 标签：database, security, permissions, createprocessasuser

我正在尝试将我的本地（远程）数据库与服务器上的集中统一数据库（使用 Sybase 数据库）同步。同步必须在预定的时间发生，我正在使用“CreateProcessByUser”。为了启动同步过程，我使用的是 sybase 提供的 dbremote.exe。

构造的命令行参数为：
commandLine = dbremote.exe -l 512K -x -k -c "dsn=HOME* *** *;uid=dba;pwd=* *******;cs=none;DBKEY=* ***" -os 10000000 -o "c:\data\test\dbremote.log" "c:\data\test"*

 *```
BOOL startA_Process( HANDLE hToken, _TCHAR *commandLine, PROCESS_INFORMATION *pi, BOOL wait, _TCHAR *errBuf){

STARTUPINFO sStartupInfo;

DWORD   dwExitCode;
DWORD   dwStatus        = 0;
DWORD   dwCreationFlags = CREATE_NEW_CONSOLE;
int     iResult;
BOOL    bInheritHandles = FALSE;

LPCTSTR     pszApplicationName      = NULL;
LPCTSTR     pszCurrentDirectory     = NULL;
LPVOID      pvEnvironment           = NULL;

LPSECURITY_ATTRIBUTES psProcessAttributes   = NULL;
LPSECURITY_ATTRIBUTES psThreadAttributes    = NULL;

//
// Initilize STARTUPINFO structure
//
ZeroMemory( &sStartupInfo, sizeof( sStartupInfo ) );
sStartupInfo.cb = sizeof( sStartupInfo );
sStartupInfo.lpTitle = _T("AutoSychDBRemote");
sStartupInfo.lpDesktop = _T("winsta0\\default");
//
// Initilize PROCESS_INFORMATION structure
//
ZeroMemory( pi, sizeof( PROCESS_INFORMATION ) );

iResult = ::CreateProcessAsUser(
    hToken,                     // handle to a token representing the logged-on user
    pszApplicationName,             // name of executable module
    (LPTSTR)commandLine,            // command line string
    psProcessAttributes,            // process security attributes
    psThreadAttributes,             // thread security attributes
    bInheritHandles,                // whether new process inherits handles
    dwCreationFlags,                // creation flags
    pvEnvironment,                  // pointer to new environment block
    pszCurrentDirectory,            // pointer to current directory name
    &sStartupInfo,                  // pointer to STARTUPINFO
    pi                              // pointer to PROCESS_INFORMATION
); 
```

该过程在远程机器上执行，当同步发生时，应该在远程数据库和统一数据库之间交换消息。

如果我从 Windows 命令提示符执行上述命令行，则同步成功。但是，当 CreateProcessAsUser 在预定时间触发时，我在日志文件中看到以下错误消息：

> 日志文件：
> 
> 一、2013-04-11 11:17:11。发送消息给“BTI”
> I. 2013-04-11 11:17:11。sopen "\\IPaddress\Databases\Production\messages\consolid\Rem00005.g" 失败 1326：无效参数
> I. 2013-04-11 11:17:11。sopen "\\IPaddress\Databases\Production\messages\consolid\Rem00005.h" 失败 1326：无效参数
> I. 2013-04-11 11:17:13。sopen "\\IPaddress\Databases\Production\messages\consolid\Rem00005.i" 失败 1326：无效参数
> I. 2013-04-11 11:17:13。sopen "\\IPaddress\Databases\Production\messages\consolid\Rem00005.j" 失败 1326：无效参数
> I. 2013-04-11 11:17:13。sopen "\\IPaddress\Databases\Production\messages\consolid\Rem00005.k" 失败 1326: 无效参数
> E. 2013-04-11 11:17:
> 一、2013-04-11 11:17:13。重新发送请求正在排队
> I. 2013-04-11 11:17:14。执行完成

其中“\\IP address\Databases\Production\messages\consolid”是服务器上复制来自远程计算机的消息的文件夹

我请求你的帮助。为什么我能够从命令提示符同步，为什么不能从“CreateProcessAsUser”同步？为什么进程无法将消息发送到服务器上的上述路径。

我已经尝试过的几件事：

1.  我正在使用我的 Windows 域名和凭据以及在代码中使用 ::LogonUser() 登录到应用程序。我已经仔细检查了我发送的凭据是否有效。

2.  使用资源管理器，我可以成功导航到服务器上的上述路径并可以添加/删除文件。

3.  我已将我的用户 ID 添加到管理工具 >> 本地安全策略下的“本地安全设置”中。

任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T21:49:51.187

我能够找出答案：我的远程数据库和统一数据库位于属于不同域的两台不同机器上。我用来登录远程数据库的用户无法访问统一机器上的文件夹。授予用户对合并计算机的访问权限解决了该问题。*

# sql - postgres 窗口函数 - over()

> ID：15956098
> 
> 赞同：-1
> 
> 时间：2013-04-11T18:24:34.877
> 
> 标签：sql, postgresql

我的选择查询应该返回总计数和其他具有限制和偏移的字段。我的总计数将是 1000，但我会将结果限制为 5。我的期望是 sql 将返回总计数为 1000 和其他 5 个不同的 id。

是否可以通过 over() 或任何其他方式。限制不应该适用于计数！

```
SELECT DISTINCT id, total  OVER (
    count( DISTINCT las.id )
    FROM asset 
    WHERE TRUE AND model = 12 AND l status = 'Done'
    )
WHERE TRUE AND model = 12 AND l status = 'Done'
FROM asset limit 0,10 ; 
```

sql无论如何都不起作用！

预期结果

```
id   count 
1     1000
2     1000
3     1000
4     1000
5     1000 
```

基于条件的总数和基于条件和限制的 id

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T19:00:57.267

```
select id, count(*) total
from asset
where model = 12 and status = 'Done'
group by id
order by id
limit 5 
```

# python - 使用 boto 的 bucket.copy_key() 函数在 S3 帐户之间传输文件会收取费用吗？

> ID：15956099
> 
> 赞同：1
> 
> 时间：2013-04-11T18:24:39.243
> 
> 标签：python, amazon-web-services, amazon-s3, boto, data-transfer

我编写了一个小脚本，将文件从一个 S3 帐户的存储桶复制到另一个 S3 帐户的存储桶。

在此脚本中，我使用`bucket.copy_key()`函数从另一个存储桶中的一个存储桶复制密钥。我对其进行了测试，它工作正常，但问题是：在同一区域的 S3 到 S3 之间复制文件是否需要付费？

我担心的可能是我错过了`boto`源代码中的某些内容，我希望它不会将文件存储在我的机器上，而不是将其发送到另一个 S3。

另外（抱歉，如果一个主题有很多问题）如果我从 EC2 实例上传并运行此脚本，我会收取带宽费用吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T19:18:49.217

如果您`copy_key`在 boto 中使用该方法，那么您正在执行服务器端复制。与所有 S3 操作一样，COPY 操作的每次请求费用非常小，但如果您在同一区域的两个存储桶之间进行复制，则无需支付网络传输费用。无论您是在本地机器上还是在 EC2 实例上运行复制操作，都是如此。

# apache - Apache：使用虚拟主机

> ID：15956102
> 
> 赞同：0
> 
> 时间：2013-04-11T18:24:56.447
> 
> 标签：apache, xampp, mamp, vhosts

我已经向 vhosts 添加了一个新条目，`d3test`. 当我进入`d3test/`谷歌浏览器时，找不到该页面，`Oops! Google Chrome could not find d3test`.

我所有的其他条目都可以正常工作，例如`graphgram/`显示正确的站点。

这是我的虚拟主机：

```
#
# Use name-based virtual hosting.
#
NameVirtualHost 127.0.0.1:80

<VirtualHost 127.0.0.1:80>
DocumentRoot /Users/donald/Projects/graphgram
ServerName graphgram
</VirtualHost>

<VirtualHost 127.0.0.1:80>
DocumentRoot /Users/donald/Projects/lookgram
ServerName lookgram
</VirtualHost>

<VirtualHost 127.0.0.1:80>
DocumentRoot /Users/donald/Projects/d3test
ServerName d3test
</VirtualHost> 
```

为什么除了最后一个条目之外所有条目都有效？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T19:00:43.330

您是否也将该条目添加到 /etc/hosts 中？以防万一。并在那之后重新启动您的服务..应该可以工作，检查日志所说的......

# jquery - 在窗口调整大小时保持元素定位在同一位置

> ID：15956111
> 
> 赞同：2
> 
> 时间：2013-04-11T18:25:35.950
> 
> 标签：jquery, html, css

我的网页由两部分组成：一个将调整大小以适应任何窗口大小的图像，然后是一个带有 4 个文本框的表单，位于图像顶部的特定位置。

我的问题是文本框在窗口调整大小时移出位置。我已经花了 6 个多小时在 css 和 jquery 中尝试一切，但我什么也做不了。

[http://jsfiddle.net/ndqna/](http://jsfiddle.net/ndqna/)

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title></title>
<style type="text/css">
    body
    {
        margin: auto;
        width: 100%;
    }

    .Wrapper
    {
        position:relative;
        min-width: 500px;
        width: 100%;
        margin:auto;
    }

    .Image
    {
        max-width: 1150px;
        max-height: 1453px;
        width: 100%;
    }

    .Form
    {
        position: relative;
        top:-260px;
        left: 200px;
        width: 130px;
        border: solid 1px #000;
    }
</style>
</head>
  <body>
      <div class="Wrapper">
        <div>
            <img src="image.png" class="Image" />
        </div>
        <div class="Form">
            <input type="text" />
            <br />
            <input type="text" />
            <br />
            <input type="text" />
            <br />
            <input type="text" />
        </div>
    </div>
 </body>
</html> 
```

全窗口：![在此处输入图像描述](https://i.stack.imgur.com/sNnjj.jpg)

调整大小的窗口：![在此处输入图像描述](https://i.stack.imgur.com/NbmR2.jpg)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T18:58:08.707

首先，您应该为包装器设置最大尺寸，并使图像占据 100% 的宽度。此外，您应该将表单定位为绝对而不是相对，并将其从底部定位。像这样的东西：http: [//jsfiddle.net/ndqna/2/](http://jsfiddle.net/ndqna/2/)

话虽如此，效果还不是100%完美无瑕。随着图像的缩放，表格的位置需要改变。您可以尝试使用百分比来接近该位置。像这样的东西：http: [//jsfiddle.net/ndqna/3/](http://jsfiddle.net/ndqna/3/)

```
.Form
{
    position: absolute;
    bottom: 10%;
    left: 15%;
    border: solid 1px #000;
} 
```

你会注意到它仍然不完美。如果您真的想要精确定位，则需要编写一些脚本来计算精确位置。然而，在开始编写 jQuery 代码之前，为什么不将“框”设置为表单的背景，并通过分割源图像将其从页面的背景图像中删除？这样定位不需要像素完美，因为盒子会随着表格移动......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T18:33:31.927

这可能是因为你的包装器 css。尽量不要使用最小或最大宽度，只需使用固定宽度。

```
.Wrapper
    {
        position:relative;
        width: 945px;
        margin:auto;
    } 
```

[**小提琴**](http://jsfiddle.net/mohammadAdil/r9wSX/)

# jquery - 使用 svg 路径作为触发器通过 jquery 显示 div

> ID：15956115
> 
> 赞同：0
> 
> 时间：2013-04-11T18:25:41.833
> 
> 标签：jquery, svg

我正在尝试使用 SVG 路径来触发 div 显示，但是当我尝试使用 jquery 执行此操作时，我对复杂图形没有任何运气

这是示例 html：http: [//ifelseifelse.com/public/svg/test.html](http://ifelseifelse.com/public/svg/test.html)

我有一个使用简单图形的小提琴，所以我知道它可能，但不知道我做错了什么，虽然[http://jsfiddle.net/EzfwV/210/](http://jsfiddle.net/EzfwV/210/)

```
$("#trigger").hover(function(){
    $('.hoverMe').removeClass('hidden');
},function(){
    $('.hoverMe').addClass('hidden');
});

<div class="hoverMe hidden">I was hidden</div>
<svg xmlns="http://www.w3.org/2000/svg" version="1.1">
  <path id="trigger" d="M150 0 L75 200 L225 200 Z" />
</svg>

.hidden { display:none } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T19:35:12.380

您的测试代码在其标记中有两次 #trigger（一次在 html 中，一次在 svg 中），因此`svg #trigger`如果有另一个`div#trigger`. 如果**id**不是唯一的，你会变成意想不到的结果，或者什么也没有发生。这来自 jquery 的查找机制，id 是唯一的，因此它会在您的 DOM 中第一次命中后分解寻找其他人

看到不同

```
$("svg #trigger").hover(function(){
    $('.hoverMe').removeClass('hidden');
  },function(){
    $('.hoverMe').addClass('hidden');
  }
);
$("div#trigger2").hover(function(){
    $('.hoverMe').removeClass('hidden2');
  },function(){
    $('.hoverMe').addClass('hidden2');
  }
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T20:15:53.723

这样的事情怎么办。。

```
$("path").hover(function(e){
    var tooltip=(e.target.id).split('_');
    var whichone='#tooltip'+tooltip[1];
    $(whichone).show();
});

<div id="tooltip1">I was hidden1</div>
<div id="tooltip2">I was hidden2</div>
<svg xmlns="http://www.w3.org/2000/svg" version="1.1">
    <path id="trigger_1" d="M150 0 L75 200 L225 200 Z" />
    <path id="trigger_2" d="M40 100 L25 300 L225 100 Z" />
</svg> 
```

# c# - 如何在 C# windowsForm 中单击按钮时暂停和恢复命令

> ID：15956116
> 
> 赞同：1
> 
> 时间：2013-04-11T18:25:46.740
> 
> 标签：c#, visual-studio-2010

我想在我的程序运行 `while`一次命令后暂停我的程序，并等待`button4_click`继续进行一次迭代。每次单击 button4 都应运行`while`一次循环。

代码：

```
private void button2_Click(object sender, EventArgs e)
{
    SqlConnection conn = new SqlConnection(connectString);
    conn.Open();
    if (this.textBox3.Text != "")
    {
        this.listView1.Items.Clear();
        SqlCommand cmd = new SqlCommand("select * from customer", conn);
        SqlDataReader read = cmd.ExecuteReader();

        while (read.Read())
        {
            this.listView1.Items.Add(read.GetValue(0).ToString());
            this.listView1.Items.Add(read.GetValue(1).ToString());
            this.listView1.Items.Add(read.GetValue(2).ToString());
        }

        read.Close();
        conn.Close();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T18:53:59.017

如果您希望在每次单击按钮后处理单个客户记录，您不想要`while`循环。

您想要做的是存储您的记录，关闭您的数据库连接，并在每次单击按钮 4 时处理一条记录。

您也不能真正以您想要的方式终止while循环，这完全违背了他们的目的。

尝试这样的事情：

```
private void button2_click()
{
    /* Open your database connection, retrieve your results, store them in 'read' as previously */
    recordList = new List<YourObject>(); //Define this at the class level, not the method level, so it is accessible to other methods
    while(read.Read())
    {
        recordList.Add(new YourObject(read.GetValue(0).ToString(), read.GetValue(1).ToString(), read.GetValue(2).ToString());
    }
    /* Close your connections */
}

private void button4_click()
{
    //You should probably check to make sure recordList[0] isn't null first
    this.listView1.Items.Add(recordList[0].A);
    this.listView1.Items.Add(recordList[0].B);
    this.listView1.Items.Add(recordList[0].C);
    recordList.removeAt[0];
} 
```

在您的类之外（但在命名空间内）创建有限范围类“YourObject”。

```
private class YourObject
{
    string A,B,C;

    public YourObject( string a, string b, string c)
    {
        A = a;
        B = b;
        C = c;
    }
} 
```

# python - 在 wxPython 中绘制笛卡尔平面

> ID：15956121
> 
> 赞同：0
> 
> 时间：2013-04-11T18:26:01.413
> 
> 标签：python, wxpython, cartesian

我希望在我的 python 应用程序 GUI 中包含一个笛卡尔平面。我正在使用 wxPython 构建 GUI。我想知道最好的方法是什么？平面应根据轴在不同位置填充图像。

任何有关此问题的帮助将不胜感激。

问候，丹

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T08:19:03.043

虽然线条的位置并不完全正确（不知道为什么）。您可以像这样绑定到面板并直接绘制到它，

```
import wx

class Cartesian(wx.Frame):
    def __init__(self, parent=None, id=-1, title=""):
        wx.Frame.__init__(self, parent, id, title, size=(640, 480))

        self.panel = wx.Panel(self)
        self.panel.Bind(wx.EVT_PAINT, self.OnPaint)

    def OnPaint(self, event):
        dc = wx.PaintDC(event.GetEventObject())
        dc.Clear()
        dc.SetPen(wx.Pen(wx.BLACK))
        dc.DrawLine(320, 0, 320, 480)
        dc.DrawLine(0, 240, 640, 240)

app = wx.App(False)
frame = Cartesian()
frame.Show()
app.MainLoop() 
```

因此，此代码基于框架创建要在其上绘制的面板，然后使用该方法用黑色笔绘制，该`dc.DrawLine()`方法接受 4 个参数，第一个 x/y 坐标和第二个 x/y 坐标。

或者，您可以`wx.StaticLine()`以类似的方式使用：

```
import wx

class Cartesian(wx.Frame):
    def __init__(self, parent=None, id=-1, title=""):
        wx.Frame.__init__(self, parent, id, title, size=(640, 480))

        self.panel = wx.Panel(self)

        wx.StaticLine(self.panel, pos=(320, 0), size=(1, 480), style=wx.LI_VERTICAL)
        wx.StaticLine(self.panel, pos=(0, 240), size=(640, 1), style=wx.LI_HORIZONTAL)

app = wx.App(False)
frame = Cartesian()
frame.Show()
app.MainLoop() 
```

# opencv - MinAreaRect 角度 - 不确定返回的角度

> ID：15956124
> 
> 赞同：37
> 
> 时间：2013-04-11T18:26:10.920
> 
> 标签：opencv, angle

从 MinAreaRect 的函数中，它是否返回 0-360 度范围内的角度？我不确定，因为我有一个方向为 90 度左右的对象，但我一直得到 -1 或 -15 度。这可能是openCV错误吗？

非常感谢任何指导。

谢谢

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2013-04-16T16:55:38.277

我假设您使用的是 C++，但如果您使用的是 C 或 Python，答案应该是相同的。

该函数`minAreaRect`似乎给出了从 -90 到 0 度的角度，不包括零，因此区间为 [-90, 0)。

如果它输出的矩形没有旋转，则该函数给出-90 度，即矩形有两条完全水平的边和两条完全垂直的边。随着矩形顺时针旋转，角度增加（趋向于零）。当达到零时，函数给出的角度再次回到 -90 度。

因此，如果您从 有一个长矩形`minAreaRect`，并且它平躺，`minAreaRect`则将角度称为 -90 度。如果您旋转图像直到给出的矩形`minAreaRect`完全直立，那么角度将再次显示 -90 度。

我实际上对此一无所知（我拖延了我的 OpenCV 项目以了解它是如何工作的：/）。无论如何，这是一个 OpenCV 程序，它演示了`minAreaRect`我是否还没有足够清楚地解释它：

```
#include <stdio.h>

#include <opencv\cv.h>
#include <opencv\highgui.h>

using namespace cv;

int main() {
    float angle = 0;
    Mat image(200, 400, CV_8UC3, Scalar(0));
    RotatedRect originalRect;
    Point2f vertices[4];
    vector<Point2f> vertVect;
    RotatedRect calculatedRect;

    while (waitKey(5000) != 27) {
        // Create a rectangle, rotating it by 10 degrees more each time.
        originalRect = RotatedRect(Point2f(100,100), Size2f(100,50), angle);

        // Convert the rectangle to a vector of points for minAreaRect to use.
        // Also move the points to the right, so that the two rectangles aren't
        // in the same place.
        originalRect.points(vertices);
        for (int i = 0; i < 4; i++) {
            vertVect.push_back(vertices[i] + Point2f(200, 0));
        }

        // Get minAreaRect to find a rectangle that encloses the points. This
        // should have the exact same orientation as our original rectangle.
        calculatedRect = minAreaRect(vertVect);

        // Draw the original rectangle, and the one given by minAreaRect.
        for (int i = 0; i < 4; i++) {
            line(image, vertices[i], vertices[(i+1)%4], Scalar(0, 255, 0));
            line(image, vertVect[i], vertVect[(i+1)%4], Scalar(255, 0, 0));
        }
        imshow("rectangles", image);

        // Print the angle values.
        printf("---\n");
        printf("Original angle:             %7.2f\n", angle);
        printf("Angle given by minAreaRect: %7.2f\n", calculatedRect.angle);
        printf("---\n");

        // Reset everything for the next frame.
        image = Mat(200, 400, CV_8UC3, Scalar(0));
        vertVect.clear();
        angle+=10;
    }

    return 0;
} 
```

这使您可以轻松查看手动绘制的矩形的角度和形状`minAreaRect`与相同矩形的解释的比较。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2014-01-29T10:09:29.263

改进@Adam Goodwin 的答案我想添加我的小代码来稍微改变行为：

我想要长边和垂直之间的角度（对我来说，这是考虑旋转矩形的最自然的方式）：

![看我的绘画技巧](https://i.stack.imgur.com/043ee.png)

如果您需要相同的内容，只需使用以下代码：

```
void printAngle(RotatedRect calculatedRect){
    if(calculatedRect.size.width < calculatedRect.size.height){
        printf("Angle along longer side: %7.2f\n", calculatedRect.angle+180);
    }else{
        printf("Angle along longer side: %7.2f\n", calculatedRect.angle+90);
    }
} 
```

要查看它的实际效果，只需将其插入 Adam Goodwins 代码中：

```
printf("Angle given by minAreaRect: %7.2f\n", calculatedRect.angle);
printAngle(calculatedRect);
printf("---\n"); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-12-19T13:45:33.417

经过大量实验，我发现矩形方向和输出角度之间的关系`minAreaRect()`。可以概括为下图

[![在此处输入图像描述](https://i.stack.imgur.com/LhZRi.png)](https://i.stack.imgur.com/LhZRi.png)

下面的描述假设我们有一个长宽不相等的矩形，即它不是正方形。

如果矩形垂直放置（宽度 < 高度），则检测到的角度为 -90。如果矩形水平放置，则检测到的角度也是 -90 度。

如果矩形的顶部在第一象限，则检测到的角度随着矩形从水平位置旋转到垂直位置而减小，直到检测到的角度变为-90度。在第一象限中，检测到的矩形的宽度大于其高度。

如果检测到的矩形的顶部位于第二象限，则角度会随着矩形从垂直位置旋转到水平位置而减小。**但是第二象限和第一象限是有区别的。如果矩形接近垂直位置但尚未处于垂直位置，则其角度接近 0。如果矩形接近水平位置但尚未处于水平位置，则其角度接近 -90 度**。

[这里](https://namkeenman.wordpress.com/2015/12/18/open-cv-determine-angle-of-rotatedrect-minarearect/)的这篇文章也很好地解释了这一点。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-05-05T09:26:53.270

经过实验，我发现如果长边在底点的左边，角度值在长边和Y+轴之间，但是如果长边在底点的右边，角度值在长边和Y+轴之间边和 X+ 轴。所以我使用这样的代码（java）：

```
 rRect = Imgproc.minAreaRect(mop2f);
       if(rRect.size.width<rRect.size.height){
            angle = 90 -rRect.angle;
        }else{
            angle = -rRect.angle;
        } 
```

角度从 0 到 180。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-12-20T05:48:04.657

这取决于 opencv 的版本，至少对于 Python 而言。

对于 opencv-python='4.5.4.60'。该角度是正 x 轴与轴逆时针旋转时遇到的第一条线之间的角度。以下是要摘录的代码。

```
import cv2
import numpy as np

box1 = [[0, 0], [1, 0], [1, 2], [0, 2]]
cv2.minAreaRect(np.asarray(box1))  # angel = 90.0

box2 = [[0, 0], [2, 0], [2, 1], [0, 1]]
cv2.minAreaRect(np.asarray(box2))  # angel = 90.0

box3 = [[0, 0], [2**0.5, 2**0.5], [0.5*2**0.5, 1.5*2**0.5], [-0.5*2**0.5, 0.5*2**0.5]]
cv2.minAreaRect(np.asarray(box3, dtype=np.float32))  # angle = 44.999

box4 = [[0, 0], [-2**0.5, 2**0.5], [-0.5*2**0.5, 1.5*2**0.5], [0.5*2**0.5, 0.5*2**0.5]]
cv2.minAreaRect(np.asarray(box4, dtype=np.float32))  # angle = 45.0

box5 = [[0, 0], [-0.5*2**0.5, 0.5*2**0.5], [-2**0.5, 0], [-0.5*2**0.5, -0.5*2**0.5]]
cv2.minAreaRect(np.asarray(box5, dtype=np.float32))  # angle = 45.0 
```

对于 opencv-python='3.4.13.47'。该角度是正 x 轴和轴顺时针旋转时遇到的第一条线之间的角度。以下是要摘录的代码。

```
import cv2
import numpy as np

box1 = [[0, 0], [1, 0], [1, 2], [0, 2]]
cv2.minAreaRect(np.asarray(box1))  # angel = -90.0

box2 = [[0, 0], [2, 0], [2, 1], [0, 1]]
cv2.minAreaRect(np.asarray(box2))  # angel = -90.0

box3 = [[0, 0], [2**0.5, 2**0.5], [0.5*2**0.5, 1.5*2**0.5], [-0.5*2**0.5, 0.5*2**0.5]]
cv2.minAreaRect(np.asarray(box3, dtype=np.float32))  # angle = -44.999

box4 = [[0, 0], [-2**0.5, 2**0.5], [-0.5*2**0.5, 1.5*2**0.5], [0.5*2**0.5, 0.5*2**0.5]]
cv2.minAreaRect(np.asarray(box4, dtype=np.float32))  # angle = -45.0

box5 = [[0, 0], [-0.5*2**0.5, 0.5*2**0.5], [-2**0.5, 0], [-0.5*2**0.5, -0.5*2**0.5]]
cv2.minAreaRect(np.asarray(box5, dtype=np.float32))  # angle = -45.0 
```

# c# - 如何从作为模型中的属性公开的类引用更新 ViewModel

> ID：15956126
> 
> 赞同：0
> 
> 时间：2013-04-11T18:26:14.233
> 
> 标签：c#, mvvm

我有三个 C# 类 A、B 和 C，其中

*   A 是一个视图模型
*   B 是一个模型
*   C 是一个状态类（包含有关设备的一些状态信息，例如 IsConnected）

它们连接在一起，使得 B 具有 C 类型的属性。C 包含近 30 个表示设备状态的属性。我决定让 B 通过 INotifyPropertyChanged 更新 A，现在我正在寻找一种方法让 A 在 C 中的属性发生更改时得到通知。

实现这一目标的最简单方法是什么？

**更新：**

这段代码可以解决问题。

```
class Gun : INotifyPropertyChanged
{
    public event PropertyChangedEventHandler PropertyChanged;

    public GunState GunState { get; private set; }

    public Gun()
    {
        GunState = new GunState();
        GunState.PropertyChanged += GunStateOnPropertyChanged;
    }

    private void GunStateOnPropertyChanged(object sender, PropertyChangedEventArgs propertyChangedEventArgs)
    {
        NotifyPropertyChanged(propertyChangedEventArgs.PropertyName);
    }

    protected virtual void NotifyPropertyChanged(string propertyName)
    {
        PropertyChangedEventHandler handler = PropertyChanged;
        if (handler != null) handler(this, new PropertyChangedEventArgs(propertyName));
    }
}

class GunState : INotifyPropertyChanged
{
    private bool _isLoaded;
    public event PropertyChangedEventHandler PropertyChanged;

    public bool IsLoaded
    {
        get { return _isLoaded; }
        private set
        {
            if (_isLoaded != value)
            {
                _isLoaded = value;
                NotifyPropertyChanged("IsLoaded");
            }
        }
    }

    public void SimulateLoadGun(bool isLoaded)
    {
        IsLoaded = isLoaded;
    }

    protected virtual void NotifyPropertyChanged(string propertyName)
    {
        PropertyChangedEventHandler handler = PropertyChanged;
        if (handler != null) handler(this, new PropertyChangedEventArgs(propertyName));
    }

}

class GunViewModel : INotifyPropertyChanged
{
    private readonly Gun _gun;

    public GunViewModel()
    {
        _gun = new Gun();
        _gun.PropertyChanged += OnGunOnPropertyChanged;
    }

    public string IsLoaded
    {
        get { return _gun.GunState.IsLoaded ? "Gun is loaded!" : "Gun is not loaded."; }
    }

    private void OnGunOnPropertyChanged(object sender, PropertyChangedEventArgs args)
    {
        NotifyPropertyChanged(args.PropertyName);
    }

    public event PropertyChangedEventHandler PropertyChanged;

    protected virtual void NotifyPropertyChanged(string propertyName)
    {
        PropertyChangedEventHandler handler = PropertyChanged;
        if (handler != null) handler(this, new PropertyChangedEventArgs(propertyName));
    }

    public void LoadGun()
    {
        _gun.GunState.SimulateLoadGun(!_gun.GunState.IsLoaded);
    }
} 
```

XAML：

```
<Window x:Class="ModelViewModelInteraction.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:vm="clr-namespace:ModelViewModelInteraction"

        Title="MainWindow" Height="350" Width="525">
    <Window.DataContext>
        <vm:GunViewModel x:Name="_model" />
    </Window.DataContext>

    <Grid>
        <Label Content="{Binding IsLoaded}" Margin="0,0,313,262" />
        <Button Content="Load gun" Click="Button_Click_1" Margin="73,83,283,59" />
    </Grid>
</Window> 
```

XAML.cs

```
public partial class MainWindow : Window
{
    public MainWindow()
    {
        InitializeComponent();
        _viewModel = new GunViewModel();
        DataContext = _viewModel;
    }

    private GunViewModel _viewModel;

    private void Button_Click_1(object sender, RoutedEventArgs e)
    {
        _viewModel.LoadGun();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T18:32:45.113

我会遵循得[墨忒耳法则](http://en.wikipedia.org/wiki/Law_of_Demeter)；`A`不应该需要知道发生了什么`C`。相反，应该注意*相关*属性发生变化时`A`的通知。`B`*`C`*

 *例如，您的模型`B`可能有自己的`IsConnected`属性，并且您可以继续使用`INotifyPropertyChanged`机制。*

# git - Git：变基一个完整的项目，包括分支结构

> ID：15956128
> 
> 赞同：0
> 
> 时间：2013-04-11T18:26:16.777
> 
> 标签：git, version-control, rebase

在要从 Mercurial 转移到 git 的项目中，需要重写 Mercurial 特定文件（在历史的早期阶段）（`X`如下图所示）。在这一步之后，应该传输整个历史记录，就好像该文件一直处于新状态一样，幸运的是，这本身不会导致任何合并冲突。

```
A---B---X
     \
      \--C---D---G---H          master
          \     /
           E---F---I            feature_branch 
```

应该导致

```
A---B---X---C'---D'---G'---H'   master
             \       /
              E'----F'---I'     feature_branch 
```

我能得到的最接近的方法是使用该选项重新定位，但这仍然会产生合并冲突，尽管从to的差异可以毫无问题地应用`master`。`X``-p``G'``D``G`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T20:19:39.813

Rebase 不是这种复杂历史重写的正确工具。[filter-branch](http://www.kernel.org/pub/software/scm/git/docs/git-filter-branch.html)是正确的工具。最简单的方法可能是将您的文件放在不在您的存储库中的某个文件夹中，然后在该文件夹上运行一个树过滤器`--all --not A`，将该文件复制到您的工作目录中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T16:13:58.397

根据 Chronial 的回答，这是我使用的命令（当然是在备份之后）：

```
B=abcd
X=1234
git filter-branch --parent-filter "sed -e s/$B/$X/g" --tree-filter \
  "git checkout X $(git diff-tree --no-commit-id --name-only -r $X | tr '\n'  ' ')" \
  -- --all --not X 
```

*在这里，首先所有的父引用`B`都被替换为对 的引用`X`，然后这个提交更改的文件被插入到树中。此操作适用于所有不是其祖先的修订`X`。*

然后，在检查一切都按预期工作并进行另一个备份之后（以防我将来需要它以供参考）：

```
git for-each-ref --format='%(refname)' refs/original | xargs -n1 git update-ref -d 
```

*这会删除所有`refs/original/...`为备份目的自动创建的 refs `git filter-branch`。*

如果一个人想要不可撤销地删除以前历史的所有痕迹并节省磁盘空间，现在可能是收集垃圾的好时机：

```
git gc --prune=now 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T18:30:36.760

其他人没有编写详细的解决方案，而是使任何答案变得非常容易。这是一个可视化（交互式教程），它将向您解释您需要做什么。

[http://pcottle.github.io/learnGitBranching/](http://pcottle.github.io/learnGitBranching/)

# php - rewrite_mod 已启用，但 .htaccess 不起作用

> ID：15956131
> 
> 赞同：2
> 
> 时间：2013-04-11T18:26:35.737
> 
> 标签：php, apache, .htaccess, mod-rewrite, url-rewriting

我在 Amazon EC2 的 ubuntu 12.04 中使用 apache 2.2。我启用了 mod_rewrite 使用

```
sudo a2enmod rewrite 
```

并且能够看到

```
apache2ctl -M 
```

现在我编写了 .htaccess 代码如下但不工作

```
# Redirect everything in this directory to "good.html"

    Options +FollowSymlinks
    RewriteEngine on
    RewriteRule .* good.html 
```

这是我的 /etc/apache2/sites-available/default [http://pastebin.com/urNfmqan的内容](http://pastebin.com/urNfmqan)

当我添加 `LoadModule rewrite_module modules/mod_rewrite.so`到 httpd.conf 时，我得到了这个 `waiting [Thu Apr 11 18:44:12 2013] [warn] module rewrite_module is already loaded, skipping`并且 htaccess 即使在那时也无法正常工作（我假设在 apache2.2 我们不编辑 httpd.conf 以启用 rewrite_mod 但根据 anubhava 评论我修改了问题）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T18:54:41.957

看起来你会有一个重写循环。Apache rewrite 不会运行一次规则，而是每次请求路径时运行一次。所以在第一次加载时它重写`.*`为`good.html`. 然后它再次对规则进行内部请求`good.html`并重新处理，再次重写并向无穷大发出另一个内部请求。Revent 的回答试图通过检查文件是否存在来解决这个问题。`index.html`因为`index.html`存在，所以你会遵守他的规则。如果您删除`index.html`该文件将不存在，则重写条件将匹配并且规则将重写为`good.html`. 重新处理规则时，文件存在，条件失败，此后重定向停止。

要解决此问题，您可以`[L]`在重写规则之后添加标志，以告诉 apache 在此规则运行后停止处理规则，这应该停止循环。如果这没有帮助，您可以添加一个`rewriteCond`以检查重定向后`request_filename`是否不会`good.html`导致规则失败。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T18:31:34.797

尝试这个：

```
<IfModule mod_rewrite.c>
RewriteEngine on
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ /good.html [QSA,L]
</IfModule> 
```

您应该将重写规则中的 Base 和第二个元素更改为您的目录（如果它不是根目录）。

# java - 杰克逊编组与不一致的数据

> ID：15956134
> 
> 赞同：0
> 
> 时间：2013-04-11T18:26:48.330
> 
> 标签：java, spring, jackson

我遇到了从 Web 服务返回的不稳定数据的问题。当一个对象不存在时，我可能会在响应中返回一个布尔值。

快乐之路：

```
{
    "foo": {"msg": bar}
} 
```

不愉快的路径：

```
{
    "foo": false
} 
```

当返回布尔值时，我想将其存储为空 Foo 对象，但到目前为止，我还没有在 Jackson 中找到解决此问题的好方法。

到目前为止，我所做的主要是使用 @JsonProperty 注释将我的对象映射到什么 json 响应。

```
 //... Omitted code
 @JsonProperty("foo")
 public void setBar( Bar bar ) {
     this.bar = bar
 }

class Bar {
    String msg;
    // ... Getter and setter below ...
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T23:45:34.490

我找到了解决方案。它不是很优雅，但不需要任何主要的代码重写。我能够在我的 foo 属性设置器中使用 JsonNode 对象。不过，我会看看我是否能想出更好的东西。

```
@JsonProperty("foo")
public void setBar( JsonNode barJsonNode) {
    if( barJsonNode.isBoolean() ){
       bar = null;
    } else {
        // Magic goes here
    }

} 
```

# php - 如何在 Wordpress 中按缩略图的存在排序？

> ID：15956135
> 
> 赞同：3
> 
> 时间：2013-04-11T18:26:53.327
> 
> 标签：php, wordpress, thumbnails

我的客户要求我按缩略图排序帖子，所以我需要先用缩略图对帖子进行排序，然后再不使用缩略图。

这是我的代码：

```
$the_query = new WP_Query(array(
               'post_type' => 'veiculos',
               'posts_per_page'=> -1,
               'meta_key' => '_thumbnail_id',
               'orderby' => 'meta_value_num',
               'order' => 'DESC',
               'tax_query' => array(
                 array(
                   'taxonomy' => 'categoria-veiculo',
                   'field' => 'id',
                   'terms' => 5
                 )
               )
           )); 
```

但是发生的情况是，当我将 meta_key 放在没有缩略图不显示的帖子时。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T19:08:36.113

这是一个有趣的问题。**WordPress**目前没有一种方法可以使用其内置`WP_Query`方法在一个查询中获取所有带有缩略图和没有缩略图的帖子。但是我们可以为此做一个hack，可能不是我认为的最好的，但会起作用:)

在你的主题**functions.php**文件中添加这个函数

```
function remove_metakey ($where) {

    global $wpdb;

    $where = str_replace("AND (".$wpdb->postmeta.".meta_key = '_thumbnail_id' )", "", $where);

    return $where;
} 
```

`new WP_Query`在调用Object之前添加此过滤器

```
add_filter ('posts_where_request', 'remove_metakey'); 
```

所以完整的东西看起来像：

```
add_filter ('posts_where_request', 'remove_metakey');

$the_query = new WP_Query(array(
               'post_type' => 'veiculos',
               'posts_per_page'=> -1,
               'meta_key' => '_thumbnail_id',
               'orderby' => 'meta_value_num',
               'order' => 'DESC',
               'tax_query' => array(
                 array(
                   'taxonomy' => 'categoria-veiculo',
                   'field' => 'id',
                   'terms' => 5
                 )
               )
           )); 
```

您必须在调用 WP_QUery 对象之前添加过滤器，否则它将不起作用。也不要在你的functions.php文件中添加这个过滤器，因为这样它就会在制作时被渲染`posts_where_request`。

它的作用是，当我们使用`WP_Query`对象执行查询时，它会调用`posts_where_request`. 我们将我们自己的函数与`posts_where_request`. 所以当`posts_where_request`被调用时，我们的函数将被渲染。在我们的函数中，我们`str_replace`用来替换`$where`值中的 meta_key 部分并返回它。这将删除查询中 where 部分的 meta_key 条件。

**更新 ：**

我找到了使用 WordPress 钩子从 where 条件中删除元键的正确方法。这是更好，更清洁的方法：

在调用 WP_Query 对象之前添加这个钩子。而不是早期的钩子使用这个。

```
add_filter ('get_meta_sql', 'remove_metakey'); 
```

现在用这个替换之前的函数：

```
function remove_metakey ($array) {

    $array['where'] = ''; //you can also use unset, but setting the value to null is better to avoid warnings

    return $array;
} 
```

完整的事情将是：

```
add_filter ('get_meta_sql', 'remove_metakey');

$the_query = new WP_Query(array(
               'post_type' => 'veiculos',
               'posts_per_page'=> -1,
               'meta_key' => '_thumbnail_id',
               'orderby' => 'meta_value_num',
               'order' => 'DESC',
               'tax_query' => array(
                 array(
                   'taxonomy' => 'categoria-veiculo',
                   'field' => 'id',
                   'terms' => 5
                 )
               )
           )); 
```

这是正确的做法。它将`where`值设置为`null`从而防止 SQL 查询中出现额外的元键条件。

**请记住仅在需要时添加此过滤器。也不要在functions.php中添加这个，那么每次调用get_meta_sql函数时都会执行。**

希望这可以帮助你:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T18:43:05.257

为什么不进行两个查询：第一个只返回带有缩略图的帖子，按您喜欢的方式排序，第二个只返回不带缩略图的帖子，也按您喜欢的方式排序。

换句话说，您的第一个查询将包含带有缩略图的帖子，第二个查询将包含您的所有帖子，其中使用`has_post_thumbnail`函数在循环内带有条件语句。

我认为这种方法会让您赢得时间，因为您要解决的问题需要更多时间来搜索以通过一个查询找到解决方案。

祝你好运

# aggregate-functions - 是否存在将字段值连接到特定字符的 join() 聚合函数之类的东西？

> ID：15956136
> 
> 赞同：1
> 
> 时间：2013-04-11T18:26:55.777
> 
> 标签：aggregate-functions, aggregate, teradata

假设我有一个名为和`cities`字段的表。数据如下所示：`state``city`

```
State     City
Ohio      Eaton
Ohio      Columbus
Ohio      Dayton
Ohio      Greenville
New York  New York
New York  Albany
New York  Syracuse 
```

我希望能够做到这一点：

```
select state, join(city,',') from cities
group by state 
```

...返回这个：

```
State     City
Ohio      Eaton,Columbus,Dayton,Greenville
New York  New York,Albany,Syracuse 
```

我需要为此创建一些疯狂的 UDF 吗？如果没有函数，有没有办法应用一些 SQL 魔法来实现这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T23:32:24.770

递归 CTE 应该能够做到这一点。我模拟了要为每个状态重置的序列号。您可能需要根据您的实际表格进行调整，但它至少应该让您思考正确的方向。（类似于 Marc B 在 Teradata 论坛上链接的内容，但希望这更容易阅读。）

```
WITH RECURSIVE city_list (state, cities, seq) AS
(
  SELECT s.state
       , s.city
       , ROW_NUMBER() OVER (PARTITION BY State ORDER BY State, City) AS seq
  FROM   states s
  QUALIFY  seq = 1
  UNION ALL
  SELECT c.cities ||’, ’|| s.city
       , ROW_NUMBER() OVER (ORDER BY State, City) AS seq
  FROM   city_list c, states s
  WHERE  s.seq = c.seq + 1
    AND  s.state = c.state
)
SELECT r.state, r.cities
FROM   city_list r
WHERE  r.seq = (SELECT MAX(h.seq) FROM city_list h 
                WHERE h.state = r.state 
                GROUP BY h.state)
; 
```

# html - 在没有缓存的 SoundManager 中循环音频

> ID：15956139
> 
> 赞同：0
> 
> 时间：2013-04-11T18:27:04.537
> 
> 标签：html, html5-audio, soundmanager2

有没有办法在没有缓存的情况下循环 SoundManager，以便每次都强制重新加载源音频文件？我可以让它循环，但我不能让它不缓存。

```
<script type="text/javascript">
soundManager.url = '../../swf/soundmanager2.swf';
soundManager.debugMode = true;
soundManager.consoleOnly = true;

soundManager.onload = function() {
soundManager.createSound({
id:'mySound1',
url:'path/to/audio.mp3',
stream: true
});
loopSound('mySound1');
}

function loopSound(soundID) {
window.setTimeout(function() {
soundManager.play(soundID,{onfinish:function(){loopSound(soundID);}});
},1);
}</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T21:49:08.283

目前，这是我想出的解决方案：

```
<script>
soundManager.setup({
  url: '../swf/',
  // optional: use 100% HTML5 mode where available
  // preferFlash: false,
  onready: function() {
   var sound = soundManager.createSound({
 id: 'mySound1',
 url: 'path/to/audio.mp3',
 onfinish: function() {
  soundManager._writeDebug(this.id+' has finished the current track, now loading next track.');
  // destroy this sound
  this.unload();
  soundManager.createSound({
 id: 'mySound1',
 url: 'path/to/audio.mp3',
});
  soundManager.play('mySound1');
 },
 autoPlay: true
 });

  }
});
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-02T02:31:06.237

将 id: 更改为不同的将避免需要清除缓存。

似乎即使 URL 的路径不同，如果 ID 相同，也会重播歌曲。

如果更改：

```
id: 'mySound1', 
```

这样它对于新歌曲将播放的每个独特曲目都是独一无二的。

```
id: 'mySound1'+id, 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-13T20:15:11.047

```
...
onload: function(){
                  if(this.readyState==2){ //ERROR HTML5 player
                      console.log('ERRORS readyState');
                      stop_play(id); // function stop play id
                      start_play(url); // function start play
                  }
},
... 
```

# google-apps-script - Google Apps 脚本的一般帮助

> ID：15956141
> 
> 赞同：0
> 
> 时间：2013-04-11T18:27:17.453
> 
> 标签：google-apps-script

好的，我已经厌倦了寻找具体问题来帮助项目、寻找答案、改变我的实现而只是增加了更多问题、意识到有更好的方法来做事等等。所以请允许我寻求一般帮助，我然后将尽我所能研究如何做到这一点，并在需要时提出进一步的问题。

*   我正在编写一个脚本，用作 Google 网站页面中的小工具（如果有人想看的话，我非常愿意分享这个）；现在我只是为我做这个，但我想写这个以方便其他人使用。
*   这将列出指定文件夹中所有用户的 Google 文档；从列表中选择文档时，内容将显示在另一个字段中进行编辑。
*   用户将能够定义以句号开头的某些行，以“标记”为可以通过按下按钮自动移调的和弦；也就是说，用户单击一个按钮，所有 A 转到 A#、B 到 C、C 到 C# 等等，但仅限于指定的“Chord”行。
*   然后，如果需要，用户可以将此文档保存回 Google Docs 以供打印。

我主要有布局。我遇到的一些问题：

*   执行 a`.find`显然会找到名称和内容中具有给定字符串的所有文档。解决方法是将文档 ID 放入 Hidden 中，但 List 似乎不会返回您单击的编号项目，那么我怎样才能获得存储在其他地方的 ID？
*   我希望 TextArea 是用于粗体和其他内容的富文本；Google Apps 是否有文本编辑器（如果我可以将 Google 文档编辑器放在面板中，那就太好了）？RichTextArea 已被弃用，有替代品吗？
*   为了进行转置，我打算只将文本区域的每个字符放入一个数组中，当它看到一个“\n”后跟一个“。”时，逐步遍历该数组。翻转 var “on”，然后更改任何后续字符，然后如果它看到另一个“\n”，则将 var “off”；有一个更好的方法吗？
*   或者，有没有办法将脚本添加到可以进行转置的 Google 文档中（我知道您可以为电子表格执行宏，但似乎没有文档的等价物）？这样我就可以发出这个宏并告诉人们在他们现有的文档上使用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T02:15:35.047

既然你问了，是的，单独的问题是合适的，因为问题的组合非常专业，而个别问题可能更普遍，对更多人有用。不过还是让我试一试吧……

> [结果`find()`]...我怎样才能获得存储在其他地方的ID？

[DocsList.find()](https://developers.google.com/apps-script/reference/docs-list/docs-list#find%28String%29)返回[文件对象](https://developers.google.com/apps-script/reference/docs-list/file)列表。Class File 有一个`getId()`方法可以返回您在 Google Drive 中看到的文档 ID。要获取所有文件的 ID：

```
var files = DocsList.getAllFiles();
for (var i in files) {
  Logger.log(files[i].getId());
} 
```

您还应该查看[DocsListDialog](https://developers.google.com/apps-script/reference/ui/docs-list-dialog)以创建适用于 Google Drive 的文件选择器。

> RichTextArea 已被弃用，有替代品吗？

不，不在应用程序脚本中。你刚刚得到了[TextArea](https://developers.google.com/apps-script/reference/ui/text-area)。但是，您可以在 UI 中嵌入第三方富文本编辑器。

> 要进行转置，...有没有更好的方法来做到这一点？

将 TextArea.value 更改为行数组，然后对其进行操作，而无需管理开/关状态。请参阅[如何在单击按钮时从 Google App Script 中的 TextArea 获取信息？](https://stackoverflow.com/questions/12047576/how-do-i-get-information-out-of-textarea-in-google-app-script-on-the-button-clic)和[Javascript：将 textarea 转换为 array](https://stackoverflow.com/questions/2299604/javascript-convert-textarea-into-an-array)。

```
// aTextArea contains user's input. Probably a Johnny Cash song.
var inputText = e.parameter.aTextArea;
var inputLines = inputText.split('\n');
for (var i in inputLines) {
  if (inputLines[i].charAt(0) == '.') {
    // Transpose
  }
}
// Put lines back together, if you wish
var outputText = inputLines.join('\n'); 
```

> ..有没有办法将脚本添加到可以进行转置的 Google 文档中...

是（自最初提出问题以来，此功能已扩展到文档和表单）。~~不，电子表格是目前唯一可以作为脚本容器的文档类型。~~

或者，您可以使用独立脚本直接在 Docs 上操作！或许通过将脚本部署为[Web 应用程序](https://developers.google.com/apps-script/execution_web_apps)，让用户从他们的 Google Drive 上的文档中选择要转置的目标音乐，然后编写一个新的文档副本，转置？

# spring - Spring - Jaxb2Marshaller - 如何使用注释自动添加 JAXB2 类

> ID：15956150
> 
> 赞同：1
> 
> 时间：2013-04-11T18:27:47.127
> 
> 标签：spring, rest, cxf

我将 Spring 3.1.x 和 CXF 2.6.1 用于 REST 服务。我使用 jaxbXmlProvider 如下所示。

```
<jaxrs:server ...
<jaxrs:providers>
   <ref bean="jaxbXmlProvider" />
</jaxrs:providers>
...
</jaxrs:server>

<bean id="jaxbXmlProvider" class="org.apache.cxf.jaxrs.provider.JAXBElementProvider">
     <property name="jaxbElementClassNames" ref="elements" /> 
</bean>

<util:list id="elements">
    <value>com.model.City</value>
    <value>com.model.Cities</value>
</util:list> 
```

我想使用 jaxb2-marshaller 扫描包（com.model）中的所有 POJOS。任何使用帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T17:47:14.840

您可以调用另一个提供类列表的 bean 的方法，例如：

`<property name="jaxbElementClassNames" value="#{ myBean.classNamesFromPackage}"/>`

配置以包名作为属性并具有 getClassNamesFromPackage 方法的 myBean：

`<bean id="myBean" class="x.y.z.MyBean">`
`<property name="packageName" value="com.model" />`
`</bean>`

在 MyBean 的 getClassNamesFromPackage 方法中，您可以使用[如何从类路径中的 Java 包中读取所有类中建议的代码？](https://stackoverflow.com/questions/1456930/how-do-i-read-all-classes-from-a-java-package-in-the-classpath).

# asp.net - 网页上文本字段的“智能感知”

> ID：15956152
> 
> 赞同：0
> 
> 时间：2013-04-11T18:27:56.797
> 
> 标签：asp.net, sql, textfield

我不知道如何描述这一点，但我会尝试。因此，您在网页上有一个文本字段，并在此字段中输入您想要发表评论的某人的姓氏。如果有人已经评论过这个确切的人，那么当您输入 smith,john 时，当您到达文本框下方的“Smit”时，它将显示“Smith,John”，您只需单击它即可。如果 Smith,John 不存在，那么它将在数据库中创建一条新记录，因此当下一个人尝试评论 Smith, John 时，它将为他们显示。它就像文本框的智能感知，它会检查数据库中的记录。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T18:33:44.277

听起来您想要[jQuery UI Autocomplete Widget 之类的东西。](http://jqueryui.com/autocomplete/ "jQuery UI 自动完成")

# ruby-on-rails - 生产环境正在使用暂存数据库而不是生产数据库

> ID：15956154
> 
> 赞同：1
> 
> 时间：2013-04-11T18:28:00.820
> 
> 标签：ruby-on-rails, deployment, passenger

我有 4 个 Rails 环境。

*   测试
*   发展
*   分期
*   生产

Rails 完美地部署到登台和生产，除了生产 Rails 使用登台数据库而不是生产数据库这一事实。我究竟做错了什么？我还没有检查什么？Capistrano 中是否需要设置数据库？

这里有一些注意事项。

**我`config/database.yml`清楚地区分了暂存数据库和生产数据库。**

```
staging:
  adapter: mysql2
  encoding: utf8
  database: some_app
  pool: 5
  username: some_user
  password: some_pass
  host: staging.zzzzz.com
  port: 1911

production:
  adapter: mysql2
  encoding: utf8
  database: some_app
  pool: 5
  username: some_user
  password: some_pass
  host: production.zzzzz.com
  port: 1611 
```

**用于生产和登台的 Rails 环境是相同的。**换句话说，`config/environments/staging.rb`和`config/environments/staging.rb`是相同的。

**生产环境中的乘客服务器应该在生产环境中运行 Rails 应用程序。**看线`RailsEnv production`

```
<VirtualHost *:80>

LoadModule passenger_module /opt/ruby-enterprise-1.8.7-2011.12/lib/ruby/gems/1.8/gems/passenger-3.0.11/ext/apache2/mod_passenger.so
PassengerRoot /opt/ruby-enterprise-1.8.7-2011.12/lib/ruby/gems/1.8/gems/passenger-3.0.11
PassengerRuby /opt/ruby-enterprise-1.8.7-2011.12/bin/ruby
PassengerMaxPoolSize 20

Include conf/rhapcom.conf
Include conf/maintenance.conf
Include conf/redirects.conf

DocumentRoot /var/rails80/current/public
<Directory /var/rails80/current/public>
    RailsEnv production
    AllowOverride all
    Options -MultiViews
</Directory>

</VirtualHost>

Include conf/oldrotw.conf 
```

* * *

经过一番调查，我发现生产应用程序实际上是在集成环境中运行的。我通过`Rails.env`. 如何向生产应用程序指定它应该在`production`环境中运行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T19:11:50.593

用于`RackEnv production`指定生产环境。

* * *

另外，我不禁在您的`config/database.yml`：

```
staging:
  # ...
  database: some_app
  # ...

production:
  # ...
  database: some_app
  # ... 
```

登台环境和生产环境都配置为使用相同的数据库。

> *Rails 使用的是暂存数据库而不是生产数据库。*

不，它们都共享一个公共数据库。

我相信你想做这样的事情：

```
staging:
  # ...
  database: some_app_staging
  # ...

production:
  # ...
  database: some_app_production
  # ... 
```

现在有两个不同的数据库，每个都在其适当的环境中使用。

# java - 已部署动态 Web 项目的 WebSphere ClassNotFoundException

> ID：15956156
> 
> 赞同：4
> 
> 时间：2013-04-11T18:28:06.207
> 
> 标签：java, websphere, classpath, classnotfoundexception, openfaces

## 问题

我目前在 WebSphere 7.0 应用程序服务器上使用已部署的 EAR（带有 OpenFaces Web 项目）遇到 ClassNotFoundException。EAR 部署没有问题，但是当我从 Web 项目（包含在 EAR 中）访问页面时，我得到 ClassNotFoundException（如下）。我已经导出了 EAR 以确保一切都在那里并且包含了 WAR 文件。当我查看 WAR 文件时，未找到的类包含在 WEB-INF/classes 文件夹中。例外是指 Web 项目中的类，而不是 JAR 中的类（如果有帮助的话）。我猜我的项目配置中缺少一些东西。非常感谢任何和所有反馈！

## 错误

```
[4/3/13 15:42:49:462 EDT] 0000001b Digester      E org.apache.commons.digester.Digester startElement Begin event threw exception
                             java.lang.ClassNotFoundException: org.openfaces.demo.services.MenuItem
at java.net.URLClassLoader.findClass(URLClassLoader.java:434)
at com.ibm.ws.bootstrap.ExtClassLoader.findClass(ExtClassLoader.java:191)
at java.lang.ClassLoader.loadClass(ClassLoader.java:660)
at com.ibm.ws.bootstrap.ExtClassLoader.loadClass(ExtClassLoader.java:111)
at java.lang.ClassLoader.loadClass(ClassLoader.java:626)
at com.ibm.ws.classloader.ProtectionClassLoader.loadClass(ProtectionClassLoader.java:62)
at com.ibm.ws.classloader.ProtectionClassLoader.loadClass(ProtectionClassLoader.java:58)
at com.ibm.ws.classloader.CompoundClassLoader.loadClass(CompoundClassLoader.java:510)
at java.lang.ClassLoader.loadClass(ClassLoader.java:626)
at org.apache.commons.digester.ObjectCreateRule.begin(ObjectCreateRule.java:205)
at org.apache.commons.digester.Rule.begin(Rule.java:175)
at org.apache.commons.digester.Digester.startElement(Digester.java:1453)
at oracle.xml.parser.v2.NonValidatingParser.parseElement(NonValidatingParser.java:1296)
at oracle.xml.parser.v2.NonValidatingParser.parseRootElement(NonValidatingParser.java:340)
at oracle.xml.parser.v2.NonValidatingParser.parseDocument(NonValidatingParser.java:307)
at oracle.xml.parser.v2.XMLParser.parse(XMLParser.java:212)
at org.apache.commons.digester.Digester.parse(Digester.java:1765)
at org.openfaces.demo.services.MenuService.loadMenu(MenuService.java:75)
at org.openfaces.demo.services.MenuService.<init>(MenuService.java:215)
at java.lang.J9VMInternals.newInstanceImpl(Native Method)
at java.lang.Class.newInstance(Class.java:1345)
at com.sun.faces.mgbean.BeanBuilder.newBeanInstance(BeanBuilder.java:190)
at com.sun.faces.mgbean.BeanBuilder.build(BeanBuilder.java:107)
at com.sun.faces.mgbean.BeanManager.createAndPush(BeanManager.java:374)
at com.sun.faces.mgbean.BeanManager.create(BeanManager.java:222)
at com.sun.faces.el.ManagedBeanELResolver.getValue(ManagedBeanELResolver.java:88)
at javax.el.CompositeELResolver.getValue(CompositeELResolver.java:143)
at com.sun.faces.el.FacesCompositeELResolver.getValue(FacesCompositeELResolver.java:73)
at org.apache.el.parser.AstIdentifier.getValue(AstIdentifier.java:45)
at org.apache.el.parser.AstValue.getValue(AstValue.java:91)
at org.apache.el.ValueExpressionImpl.getValue(ValueExpressionImpl.java:263)
at org.apache.jasper.el.JspValueExpression.getValue(JspValueExpression.java:100)
at javax.faces.component.UIOutput.getValue(UIOutput.java:184)
at com.sun.faces.renderkit.html_basic.HtmlBasicInputRenderer.getValue(HtmlBasicInputRenderer.java:201)
at com.sun.faces.renderkit.html_basic.HtmlBasicRenderer.getCurrentValue(HtmlBasicRenderer.java:284)
at com.sun.faces.renderkit.html_basic.HtmlBasicRenderer.encodeEnd(HtmlBasicRenderer.java:154)
at javax.faces.component.UIComponentBase.encodeEnd(UIComponentBase.java:860)
at javax.faces.component.UIComponent.encodeAll(UIComponent.java:946)
at javax.faces.render.Renderer.encodeChildren(Renderer.java:148)
at javax.faces.component.UIComponentBase.encodeChildren(UIComponentBase.java:836)
at javax.faces.component.UIComponent.encodeAll(UIComponent.java:936)
at javax.faces.component.UIComponent.encodeAll(UIComponent.java:942)
at org.openfaces.ajax.AjaxViewRoot.encodeAll(AjaxViewRoot.java:124)
at com.sun.faces.application.ViewHandlerImpl.doRenderView(ViewHandlerImpl.java:292)
at com.sun.faces.application.ViewHandlerImpl.renderView(ViewHandlerImpl.java:223)
at org.openfaces.ajax.ViewHandlerWrapper.renderView(ViewHandlerWrapper.java:64)
at org.openfaces.ajax.AjaxViewHandler.renderView(AjaxViewHandler.java:413)
at com.sun.faces.lifecycle.RenderResponsePhase.execute(RenderResponsePhase.java:114)
at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:100)
at com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:139)
at javax.faces.webapp.FacesServlet.service(FacesServlet.java:266)
at com.ibm.ws.webcontainer.servlet.ServletWrapper.service(ServletWrapper.java:1657)
at com.ibm.ws.webcontainer.servlet.ServletWrapper.service(ServletWrapper.java:1597)
at com.ibm.ws.webcontainer.filter.WebAppFilterChain.doFilter(WebAppFilterChain.java:131)
at org.openfaces.util.ResourceFilter.doFilter(ResourceFilter.java:99)
at com.ibm.ws.webcontainer.filter.FilterInstanceWrapper.doFilter(FilterInstanceWrapper.java:188)
at com.ibm.ws.webcontainer.filter.WebAppFilterChain.doFilter(WebAppFilterChain.java:116)
at com.ibm.ws.webcontainer.filter.WebAppFilterChain._doFilter(WebAppFilterChain.java:77)
at com.ibm.ws.webcontainer.filter.WebAppFilterManager.doFilter(WebAppFilterManager.java:908)
at com.ibm.ws.webcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:934)
at com.ibm.ws.webcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:502)
at com.ibm.ws.webcontainer.servlet.ServletWrapperImpl.handleRequest(ServletWrapperImpl.java:179)
at com.ibm.ws.webcontainer.webapp.WebApp.handleRequest(WebApp.java:3935)
at com.ibm.ws.webcontainer.webapp.WebGroup.handleRequest(WebGroup.java:276)
at com.ibm.ws.webcontainer.WebContainer.handleRequest(WebContainer.java:931)
at com.ibm.ws.webcontainer.WSWebContainer.handleRequest(WSWebContainer.java:1592)
at com.ibm.ws.webcontainer.channel.WCChannelLink.ready(WCChannelLink.java:186)
at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.handleDiscrimination(HttpInboundLink.java:452)
at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.handleNewRequest(HttpInboundLink.java:511)
at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.processRequest(HttpInboundLink.java:305)
at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.ready(HttpInboundLink.java:276)
at com.ibm.ws.tcp.channel.impl.NewConnectionInitialReadCallback.sendToDiscriminators(NewConnectionInitialReadCallback.java:214)
at com.ibm.ws.tcp.channel.impl.NewConnectionInitialReadCallback.complete(NewConnectionInitialReadCallback.java:113)
at com.ibm.ws.tcp.channel.impl.AioReadCompletionListener.futureCompleted(AioReadCompletionListener.java:165)
at com.ibm.io.async.AbstractAsyncFuture.invokeCallback(AbstractAsyncFuture.java:217)
at com.ibm.io.async.AsyncChannelFuture.fireCompletionActions(AsyncChannelFuture.java:161)
at com.ibm.io.async.AsyncFuture.completed(AsyncFuture.java:138)
at com.ibm.io.async.ResultHandler.complete(ResultHandler.java:204)
at com.ibm.io.async.ResultHandler.runEventProcessingLoop(ResultHandler.java:775)
at com.ibm.io.async.ResultHandler$2.run(ResultHandler.java:905)
at com.ibm.ws.util.ThreadPool$Worker.run(ThreadPool.java:1604)

[4/3/13 15:42:49:587 EDT] 0000001b webapp        I com.ibm.ws.webcontainer.webapp.WebApp log SRVE0296E: [OlympusAetherUIEAR#OlympusAetherUI.war][/OlympusAetherUI][Servlet.LOG]:.Error at line 26 char 12: org.openfaces.demo.services.MenuItem:.java.lang.ClassNotFoundException: org.openfaces.demo.services.MenuItem
at org.apache.commons.digester.Digester.createSAXException(Digester.java:3181)
at org.apache.commons.digester.Digester.createSAXException(Digester.java:3207)
at org.apache.commons.digester.Digester.startElement(Digester.java:1456)
at oracle.xml.parser.v2.NonValidatingParser.parseElement(NonValidatingParser.java:1296)
at oracle.xml.parser.v2.NonValidatingParser.parseRootElement(NonValidatingParser.java:340)
at oracle.xml.parser.v2.NonValidatingParser.parseDocument(NonValidatingParser.java:307)
at oracle.xml.parser.v2.XMLParser.parse(XMLParser.java:212)
at org.apache.commons.digester.Digester.parse(Digester.java:1765)
at org.openfaces.demo.services.MenuService.loadMenu(MenuService.java:75)
at org.openfaces.demo.services.MenuService.<init>(MenuService.java:215)
at java.lang.J9VMInternals.newInstanceImpl(Native Method)
at java.lang.Class.newInstance(Class.java:1345)
at com.sun.faces.mgbean.BeanBuilder.newBeanInstance(BeanBuilder.java:190)
at com.sun.faces.mgbean.BeanBuilder.build(BeanBuilder.java:107)
at com.sun.faces.mgbean.BeanManager.createAndPush(BeanManager.java:374)
at com.sun.faces.mgbean.BeanManager.create(BeanManager.java:222)
at com.sun.faces.el.ManagedBeanELResolver.getValue(ManagedBeanELResolver.java:88)
at javax.el.CompositeELResolver.getValue(CompositeELResolver.java:143)
at com.sun.faces.el.FacesCompositeELResolver.getValue(FacesCompositeELResolver.java:73)
at org.apache.el.parser.AstIdentifier.getValue(AstIdentifier.java:45)
at org.apache.el.parser.AstValue.getValue(AstValue.java:91)
at org.apache.el.ValueExpressionImpl.getValue(ValueExpressionImpl.java:263)
at org.apache.jasper.el.JspValueExpression.getValue(JspValueExpression.java:100)
at javax.faces.component.UIOutput.getValue(UIOutput.java:184)
at com.sun.faces.renderkit.html_basic.HtmlBasicInputRenderer.getValue(HtmlBasicInputRenderer.java:201)
at com.sun.faces.renderkit.html_basic.HtmlBasicRenderer.getCurrentValue(HtmlBasicRenderer.java:284)
at com.sun.faces.renderkit.html_basic.HtmlBasicRenderer.encodeEnd(HtmlBasicRenderer.java:154)
at javax.faces.component.UIComponentBase.encodeEnd(UIComponentBase.java:860)
at javax.faces.component.UIComponent.encodeAll(UIComponent.java:946)
at javax.faces.render.Renderer.encodeChildren(Renderer.java:148)
at javax.faces.component.UIComponentBase.encodeChildren(UIComponentBase.java:836)
at javax.faces.component.UIComponent.encodeAll(UIComponent.java:936)
at javax.faces.component.UIComponent.encodeAll(UIComponent.java:942)
at org.openfaces.ajax.AjaxViewRoot.encodeAll(AjaxViewRoot.java:124)
at com.sun.faces.application.ViewHandlerImpl.doRenderView(ViewHandlerImpl.java:292)
at com.sun.faces.application.ViewHandlerImpl.renderView(ViewHandlerImpl.java:223)
at org.openfaces.ajax.ViewHandlerWrapper.renderView(ViewHandlerWrapper.java:64)
at org.openfaces.ajax.AjaxViewHandler.renderView(AjaxViewHandler.java:413)
at com.sun.faces.lifecycle.RenderResponsePhase.execute(RenderResponsePhase.java:114)
at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:100)
at com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:139)
at javax.faces.webapp.FacesServlet.service(FacesServlet.java:266)
at com.ibm.ws.webcontainer.servlet.ServletWrapper.service(ServletWrapper.java:1657)
at com.ibm.ws.webcontainer.servlet.ServletWrapper.service(ServletWrapper.java:1597)
at com.ibm.ws.webcontainer.filter.WebAppFilterChain.doFilter(WebAppFilterChain.java:131)
at org.openfaces.util.ResourceFilter.doFilter(ResourceFilter.java:99)
at com.ibm.ws.webcontainer.filter.FilterInstanceWrapper.doFilter(FilterInstanceWrapper.java:188)
at com.ibm.ws.webcontainer.filter.WebAppFilterChain.doFilter(WebAppFilterChain.java:116)
at com.ibm.ws.webcontainer.filter.WebAppFilterChain._doFilter(WebAppFilterChain.java:77)
at com.ibm.ws.webcontainer.filter.WebAppFilterManager.doFilter(WebAppFilterManager.java:908)
at com.ibm.ws.webcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:934)
at com.ibm.ws.webcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:502)
at com.ibm.ws.webcontainer.servlet.ServletWrapperImpl.handleRequest(ServletWrapperImpl.java:179)
at com.ibm.ws.webcontainer.webapp.WebApp.handleRequest(WebApp.java:3935)
at com.ibm.ws.webcontainer.webapp.WebGroup.handleRequest(WebGroup.java:276)
at com.ibm.ws.webcontainer.WebContainer.handleRequest(WebContainer.java:931)
at com.ibm.ws.webcontainer.WSWebContainer.handleRequest(WSWebContainer.java:1592)
at com.ibm.ws.webcontainer.channel.WCChannelLink.ready(WCChannelLink.java:186)
at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.handleDiscrimination(HttpInboundLink.java:452)
at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.handleNewRequest(HttpInboundLink.java:511)
at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.processRequest(HttpInboundLink.java:305)
at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.ready(HttpInboundLink.java:276)
at com.ibm.ws.tcp.channel.impl.NewConnectionInitialReadCallback.sendToDiscriminators(NewConnectionInitialReadCallback.java:214)
at com.ibm.ws.tcp.channel.impl.NewConnectionInitialReadCallback.complete(NewConnectionInitialReadCallback.java:113)
at com.ibm.ws.tcp.channel.impl.AioReadCompletionListener.futureCompleted(AioReadCompletionListener.java:165)
at com.ibm.io.async.AbstractAsyncFuture.invokeCallback(AbstractAsyncFuture.java:217)
at com.ibm.io.async.AsyncChannelFuture.fireCompletionActions(AsyncChannelFuture.java:161)
at com.ibm.io.async.AsyncFuture.completed(AsyncFuture.java:138)
at com.ibm.io.async.ResultHandler.complete(ResultHandler.java:204)
at com.ibm.io.async.ResultHandler.runEventProcessingLoop(ResultHandler.java:775)
at com.ibm.io.async.ResultHandler$2.run(ResultHandler.java:905)
at com.ibm.ws.util.ThreadPool$Worker.run(ThreadPool.java:1604) 
```

## 网页项目配置

*   Web 项目 src 的构建路径：OlympusAetherUI/WebContent/WEB-INF/classes
*   src 的部署路径：WEB-INF/classes

## EAR 部署组件

*   来源：OlympusAetherUI 部署路径：OlympusAetherUI.war
*   来源：OlympusCommon 部署路径：lib/OlympusCommon.jar
*   来源：OlympusGenerated 部署路径：lib/OlympusGenerated.jar

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T13:21:05.737

找到了问题的根源。commons-digester.jar 需要位于 WEB-INF/lib 中，以便能够找到 MenuItem 类，因为 EAR 类路径对 Web 类路径不可见。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T01:54:13.150

我认为你的类路径是错误的。

在**WEB-INF/classes**下，检查这些文件夹 >> **org/openfaces/demo/services**然后检查最后一个目录**Services中的****MenuItem**类。

 **问候，**

# php - 导入 Facebook 帖子，而不仅仅是嵌入它们

> ID：15956159
> 
> 赞同：0
> 
> 时间：2013-04-11T18:28:19.767
> 
> 标签：php, facebook, import

我正在考虑导入 Facebook 帖子，而不仅仅是在页面中嵌入 Facebook iframe。我希望能够获得通过我的 Facebook 页面一直更新我的网站新闻页面的 SEO 好处，我相信如果我只使用 Facebook 嵌入代码，这将无法改进它？有谁知道将帖子/图片导入基于 php 的网站的教程或插件？谢谢伊恩:-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T18:30:59.010

为此，您可能想查看他们的图形 api，[https://developers.facebook.com/docs/reference/api/post/](https://developers.facebook.com/docs/reference/api/post/)

[https://developers.facebook.com/blog/post/490/](https://developers.facebook.com/blog/post/490/)

您需要对 facebook 进行身份验证并使用 api 检索帖子

或者您可以使用他们的插件在您的网站上显示粉丝专页帖子，这要简单得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-11-30T18:23:16.920

Social2blog ( [http://www.social2blog.com/](http://www.social2blog.com/) ) 在您的博客中导入 Facebook 帖子，创建 Wordpress 帖子，然后获得真正的 SEO 优势。此外，Social2blog 允许决定是否要将规范 url 指向 Facebook 帖子。Social2blog 的问题在于它仅适用于 facebook 页面。否则您可以创建自己的 php 脚本，请参考：

[如何将 Facebook 页面帖子作为博客帖子拉入 WordPress？](https://stackoverflow.com/questions/9714020/how-to-pull-in-facebook-page-posts-as-blog-posts-to-wordpress/38221115)

# mysql - 从 DBI 查询中获取 perl 中文本字段的 2 种不同长度

> ID：15956161
> 
> 赞同：0
> 
> 时间：2013-04-11T18:28:22.813
> 
> 标签：mysql, perl, dbi

我已加密存储为文本字段的 mysql 表中的数据。一切最初都是用 Windows perl 编写的，并且仍然可以正常工作。我的问题是我在 Linux 上运行相同的代码，当我查询表时，perl 中的文本结果告诉我它更长（这导致我的解密因为太长而爆炸）。

这发生在运行相同的脚本，所以我知道没有代码差异。
Mysql 服务器是 5.1.63，在 OpenSuSE Linux 11.4 x64 上运行。Linux perl 是 v5.12.3 Windows perl 是 5.10.1 有问题的字段定义为文本，utf8_general_ci，当我通过 JDBC 访问它时，数据报告 128 字节，有问题的 SQL 很简单（精简到这里重要的部分）

```
my $gatherSQL = "select 
                  table.encryptedText from action.theTable table
                  where table.custno=" . $dbHandle->quote($custno) 
  my $getHandle = $dbHandle->prepare($gatherSQL);
  $getHandle->execute();
  my $arrayRef = $getHandle->fetchall_arrayref();
  foreach my $myrow (@$arrayRef)
  {
    $type = $$myrow[0];
  }
  $getHandle->finish();
#DB Handle is opened with a simple  
my $workSQLhandle = DBI->connect("dbi:mysql:$dataDB:$dataServer:$dataPort", $userToUse, $pwToUse);
return($workSQLhandle); 
```

当我在 Windows 中运行代码（通过 samba 共享）时，我得到的字段长度为 128（解密）从命令提示符运行的同一台机器上的相同代码告诉我相同的返回字符串是 193 个字符长（并且赢了'不解密）我对返回的结果进行了比较，它们是相同的，但 perl 告诉我一个比另一个长。

关于如何解决这个问题以及根本原因是什么的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T15:16:20.787

检查是否 mysql/perl 正在对文本进行一些翻译。例如`select length(table.encryptedText)`，看看 mysql 认为长度是多少。加密文本往往看起来像二进制垃圾，如果您将其存储在 TEXT 类型的字段中，它将受到自动字符集转换的影响。加密数据应该进入 BLOB 字段，在其他方面与 TEXT 相同，但不区分字符集。

# mysql - Tomcat 7 (JBoss EWS 2.0) + MySQL 5.1 + Hibernate - OpenShift - 找不到持久性单元

> ID：15956163
> 
> 赞同：2
> 
> 时间：2013-04-11T18:28:25.953
> 
> 标签：mysql, hibernate, tomcat7, jta, openshift

每次我尝试在 OpenShift 上访问我的应用程序时，都会收到“No Persistence provider for EntityManager named appname”错误。

我连续两天一直在努力解决这个问题，但我仍然没有找到答案。

我已经尝试了我在网上找到的所有可能的配置。

我目前的配置：

### META-INF\persistence.xml

```
<persistence version="2.0"
xmlns="http://java.sun.com/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd">
<persistence-unit name="appname" transaction-type="JTA">
    <provider>org.hibernate.ejb.HibernatePersistence</provider>
    <jta-data-source>java:/comp/env/jdbc/appname</jta-data-source>

    <class>myorg.mypackage.MyClass</class>

    <properties>
        <property name="hibernate.show_sql" value="true" />
        <property name="hibernate.hbm2ddl.auto" value="create-drop" />
        <property name="hibernate.transaction.factory_class" value="org.hibernate.transaction.JDBCTransactionFactory" /> 
    </properties>

</persistence-unit>
</persistence> 
```

### .openshift\config\context.xml

```
<Context>
<Resource auth="Container" driverClassName="com.mysql.jdbc.Driver"
    maxActive="20" maxIdle="10" maxWait="-1" name="jdbc/appname" password="mypass"
    type="javax.sql.DataSource" url="jdbc:mysql://myurl:3306/appname"
    username="myuser" />
    <WatchedResource>WEB-INF/web.xml</WatchedResource>
</Context> 
```

### .openshift\config\server.xml

```
<Host name="localhost" appBase="webapps" unpackWARs="false" autoDeploy="true">
    <Context docBase="appname" path="/appname" reloadable="true"                    source="org.eclipse.jst.jee.server:appname" />
</Host> 
```

### 例外

```
javax.persistence.PersistenceException: No Persistence provider for EntityManager named appname
    at javax.persistence.Persistence.createEntityManagerFactory(Persistence.java:69)
    at javax.persistence.Persistence.createEntityManagerFactory(Persistence.java:47)
    at org.andvicoso.shopand.model.dao.base.GenericDaoJPA.<init>(GenericDaoJPA.java:20)
    at org.andvicoso.shopand.model.dao.ProductDaoJPA.<init>(ProductDaoJPA.java:8)
    at org.andvicoso.shopand.web.ViewHelper.getProductDao(ViewHelper.java:31)
    at org.andvicoso.shopand.web.ViewHelper.getHighlights(ViewHelper.java:37)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at javax.el.BeanELResolver.getValue(BeanELResolver.java:87)
    at javax.el.CompositeELResolver.getValue(CompositeELResolver.java:67)
    at org.apache.el.parser.AstValue.getValue(AstValue.java:183)
    at org.apache.el.ValueExpressionImpl.getValue(ValueExpressionImpl.java:185)
    at org.apache.jasper.el.JspValueExpression.getValue(JspValueExpression.java:106)
    at org.apache.jsp.index_jsp._jspx_meth_c_005fset_005f6(index_jsp.java:260) 
```

谁能帮我？？？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-20T05:20:40.863

我遇到了这个问题，发现我的 META-INF 在 src\main\java 下，这导致了这个错误。当我将 META-INF 移动到 src\main\resources... 时，它起作用了。

# assembly - TASM 中的“dup (?)”是什么意思？

> ID：15956164
> 
> 赞同：16
> 
> 时间：2013-04-11T18:28:43.200
> 
> 标签：assembly, x86, tasm

我这里有这段代码，但我不熟悉语法。

```
STACK16_SIZE    =       100h
stack16         db      STACK16_SIZE dup (?) 
```

我认为`dup`意味着我们声明了一个数组类型的变量，因为这是一个堆栈，但我不确定。那么`dup`在 TASM 中究竟是什么意思呢？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-04-11T18:30:20.060

`STACK16_SIZE dup (?)`表示按`STACK16_SIZE`次数复制括号中的数据。相当于写`?, ?, ?, ?,`...（100h次）

括号中的数据是“未初始化的数据”。也就是说，内存已分配，但未在加载时设置为任何特定值。

程序集不提供数组“类型”。如果是这样，则它仅供调试器在检查数据时使用。然而，在这个代码片段中，`stack16`是一个以字节内存块开头的地址的符号——这是违反直觉的，并且可能是一个微妙错误的来源。对于 CPU 堆栈，它确实应该定义为 16 位字 ( `dw`) 或 32 位字 ( `dd`)。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-11-06T17:53:56.983

让我们从一个不同的例子开始。您可以阅读`20 DUP (0)`为“零的二十个重复项”。整个表达式`INPUTSTR DB 20 DUP (0)`等价于`INPUTSTR DB 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0`。

现在，因为`?`意思是“未初始化的值”，`20 DUP (?)`会给你 20 个未初始化的字节。而且，在这种特定情况下，如果你有`STACK16_SIZE DUP (?)`，你会得到`STACK16_SIZE`未初始化的字节。

此语法不是 TASM 特定的。MASM 也支持它；查看[Microsoft 的官方 MASM 参考](http://msdn.microsoft.com/en-us/library/3h2ye0a0.aspx)。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-04-11T18:31:23.790

`?`表示没有特定值，未初始化。`DUP`意味着重复。

所以你得到了 100h 个未初始化的字节。

# entity-framework - 错误“无法设置 MyNamespace.MyCustomInitializer、MyAssembly 类型的数据库初始化程序”无法加载 MyContext 类型

> ID：15956166
> 
> 赞同：4
> 
> 时间：2013-04-11T18:28:59.127
> 
> 标签：entity-framework, webforms, entity-framework-6

我正在使用 .NET4.5 和 Entity Framework 6 alpha3 创建一个 Web 应用程序，该应用程序使用新的 SQL Compact 数据库。该数据库尚不存在。

我在 Web 表单中有以下代码：

```
public IQueryable<Job> listJobs_GetData()
{
    var db = new JournalistContext();
    IQueryable<Job> query = db.Jobs.Where(d => d.JobStart > DateTime.Now)
        .OrderBy(s => s.JobStart)
        .Take(10);
    return query;
} 
```

其中 JournalistContext 派生自 DbContext。它创建了 JournalistContext 的实例 ok，但是在执行下一行时，它抛出了下面的异常。我猜由于数据库不存在，它试图调用初始化程序，但这失败了。

```
System.InvalidOperationException was unhandled by user code
  HResult=-2146233079
  Message=Failed to set database initializer of type 'TSJ.Models.MyCustomInitializer, TSJ' for DbContext type 'TSJ.JournalistContext, TSJ' specified in the application configuration. See inner exception for details.
  Source=EntityFramework
  StackTrace:
       at System.Data.Entity.Internal.InitializerConfig.TryGetInitializer(Type requiredContextType, String contextTypeName, String initializerTypeName, Boolean isDisabled, Func`1 initializerArgs, Func`3 exceptionMessage)
       at System.Data.Entity.Internal.InitializerConfig.<>c__DisplayClass6.<TryGetInitializerFromEntityFrameworkSection>b__1(ContextElement e)
       at System.Linq.Enumerable.WhereSelectEnumerableIterator`2.MoveNext()
       at System.Linq.Enumerable.FirstOrDefault[TSource](IEnumerable`1 source, Func`2 predicate)
       at System.Data.Entity.Internal.InitializerConfig.TryGetInitializerFromEntityFrameworkSection(Type contextType)
       at System.Data.Entity.Internal.InitializerConfig.TryGetInitializer(Type contextType)
       at System.Data.Entity.Config.AppConfigDependencyResolver.GetServiceFactory(Type type, String name)
       at System.Data.Entity.Config.AppConfigDependencyResolver.<>c__DisplayClass1.<GetService>b__0(Tuple`2 t)
       at System.Collections.Concurrent.ConcurrentDictionary`2.GetOrAdd(TKey key, Func`2 valueFactory)
       at System.Data.Entity.Config.AppConfigDependencyResolver.GetService(Type type, Object key)
       at System.Data.Entity.Config.ResolverChain.<>c__DisplayClass3.<GetService>b__0(IDbDependencyResolver r)
       at System.Linq.Enumerable.WhereSelectArrayIterator`2.MoveNext()
       at System.Linq.Enumerable.FirstOrDefault[TSource](IEnumerable`1 source, Func`2 predicate)
       at System.Data.Entity.Config.ResolverChain.GetService(Type type, Object key)
       at System.Data.Entity.Config.CompositeResolver`2.GetService(Type type, Object key)
       at System.Data.Entity.Config.IDbDependencyResolverExtensions.GetService(IDbDependencyResolver resolver, Type type)
       at System.Data.Entity.Internal.InternalContext.PerformDatabaseInitialization()
       at System.Data.Entity.Internal.LazyInternalContext.<InitializeDatabase>b__4(InternalContext c)
       at System.Data.Entity.Internal.RetryAction`1.PerformAction(TInput input)
       at System.Data.Entity.Internal.LazyInternalContext.InitializeDatabaseAction(Action`1 action)
       at System.Data.Entity.Internal.LazyInternalContext.InitializeDatabase()
       at System.Data.Entity.Internal.InternalContext.Initialize()
       at System.Data.Entity.Internal.InternalContext.GetEntitySetAndBaseTypeForType(Type entityType)
       at System.Data.Entity.Internal.Linq.InternalSet`1.Initialize()
       at System.Data.Entity.Internal.Linq.InternalSet`1.get_InternalContext()
       at System.Data.Entity.Infrastructure.DbQuery`1.System.Linq.IQueryable.get_Provider()
       at System.Linq.Queryable.Where[TSource](IQueryable`1 source, Expression`1 predicate)
       at TSJ.MainOverview.listJobs_GetData() in ....\Visual Studio 2012\Projects\TSJ\TSJ\MainOverview.aspx.cs:line 27
  InnerException: System.TypeLoadException
       HResult=-2146233054
       Message=Could not load type 'TSJ.JournalistContext' from assembly 'TSJ'.
       Source=mscorlib
       TypeName=TSJ.JournalistContext
       StackTrace:
            at System.RuntimeTypeHandle.GetTypeByName(String name, Boolean throwOnError, Boolean ignoreCase, Boolean reflectionOnly, StackCrawlMarkHandle stackMark, IntPtr pPrivHostBinder, Boolean loadTypeFromPartialName, ObjectHandleOnStack type)
            at System.RuntimeTypeHandle.GetTypeByName(String name, Boolean throwOnError, Boolean ignoreCase, Boolean reflectionOnly, StackCrawlMark& stackMark, IntPtr pPrivHostBinder, Boolean loadTypeFromPartialName)
            at System.RuntimeType.GetType(String typeName, Boolean throwOnError, Boolean ignoreCase, Boolean reflectionOnly, StackCrawlMark& stackMark)
            at System.Type.GetType(String typeName, Boolean throwOnError)
            at System.Data.Entity.Internal.InitializerConfig.TryGetInitializer(Type requiredContextType, String contextTypeName, String initializerTypeName, Boolean isDisabled, Func`1 initializerArgs, Func`3 exceptionMessage) 
```

如此处所述[http://msdn.microsoft.com/en-us/data/jj556606](http://msdn.microsoft.com/en-us/data/jj556606)我创建了一个自定义数据库初始化程序，目前是一个空白类：

```
 internal sealed class MyCustomInitializer : MigrateDatabaseToLatestVersion<JournalistContext, TSJ.Migrations.Configuration>
    {

    }

    public class JournalistContext : DbContext 
    {
        public JournalistContext() : base("TSJ")
        {
        }
... 
```

我的 web.config 文件引用了这个初始化器，如下所示：

```
 <entityFramework>
    <defaultConnectionFactory type="System.Data.Entity.Infrastructure.SqlCeConnectionFactory, EntityFramework">
      <parameters>
        <parameter value="System.Data.SqlServerCe.4.0" />
      </parameters>
    </defaultConnectionFactory>
    <contexts>
      <context type="TSJ.JournalistContext, TSJ">
        <databaseInitializer type="TSJ.Models.MyCustomInitializer, TSJ" />
      </context>
    </contexts>
    <providers>
      <provider invariantName="System.Data.SqlServerCe.4.0" type="System.Data.Entity.SqlServerCompact.SqlCeProviderServices, EntityFramework.SqlServerCompact, Version=6.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" />
    </providers>
  </entityFramework> 
```

我难住了！有任何想法吗？

我注意到的另一件事：这些行出现在我的 web.config 文件中。我不确定它们是如何添加的，或者为什么。

```
 <system.data>
    <DbProviderFactories>
      <remove invariant="System.Data.SqlServerCe.4.0" />
      <add name="Microsoft SQL Server Compact Data Provider 4.0" invariant="System.Data.SqlServerCe.4.0" description=".NET Framework Data Provider for Microsoft SQL Server Compact" type="System.Data.SqlServerCe.SqlCeProviderFactory, System.Data.SqlServerCe, Version=4.0.0.0, Culture=neutral, PublicKeyToken=89845dcd8080cc91" />
    </DbProviderFactories>
  </system.data> 
```

非常感谢，马克。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-26T10:16:24.273

我的猜测是您的初始化程序类是内部的。在我的项目中，我从另一个程序集中加载它，但它看不到它。一旦我改为公开，它就像魔术一样工作。我认为即使您将所有内容都放在同一个程序集中，它也可能是正确的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-13T17:53:20.243

我的问题与我的连接字符串有关。

伙计，在尝试了以下链接后，我没有成功。我试图连接到我的 SQLEXPRESS 实例。我试过了：

[使用 EF6 加载数据库初始化程序时出错](https://stackoverflow.com/questions/24542605/error-loading-database-initializer-with-ef6)

[重置实体框架迁移](https://stackoverflow.com/questions/11679385/reset-entity-framework-migrations)

试试这个 - 这终于对我有用。如果您不使用 localdb，请将数据源替换为您的 SqlExpress/SqlServer 实例。

```
Enable-Migrations -ConnectionString "Data Source=.\SQLEXPRESS;Initial Catalog=[your database name];User Id=[your user name];Password=[your password];Integrated Security=SSPI;" -ConnectionProviderName "System.Data.SqlClient" -Force -Verbose

Add-Migration -Name "Initial" -ConnectionString "Data Source=.\SQLEXPRESS;Initial Catalog=[your database name];User Id=[your user name];Password=[your password];Integrated Security=SSPI;" -ConnectionProviderName "System.Data.SqlClient" -Force -Verbose

Update-Database -Force -ConnectionString "Data Source=.\SQLEXPRESS;Initial Catalog=[your database name];User Id=[your user name];Password=[your password];Integrated Security=SSPI;" -ConnectionProviderName "System.Data.SqlClient" -Verbose 
```

请随时发表评论，如果您仍然遇到此问题，我可以继续尝试提供帮助。

这是我最终发现的资源，它帮助我了解了很多我正在做的事情。

[https://coding.abel.nu/2012/03/ef-migrations-command-reference/](https://coding.abel.nu/2012/03/ef-migrations-command-reference/)

# java - JavaMail 在 Amazon EC2 上不起作用

> ID：15956167
> 
> 赞同：9
> 
> 时间：2013-04-11T18:29:03.507
> 
> 标签：java, amazon-ec2, tomcat7, jakarta-mail, ubuntu-12.04

* * *

## 问题：

我正在尝试使用 JavaMail 从 EC2 Ubuntu 12.04 服务器发送电子邮件，但它不起作用。

* * *

## 背景：

我打算将自动生成的邮件从 Tomcat 服务器发送给几个团队成员。我使用 JavaMail 1.4.7 来完成这项任务，并且我已经**成功地**在本地安装的 Tomcat（在个人笔记本电脑上）上尝试了它。

下一步是我将此模块放在 EC2 服务器上，但它开始失败并出现以下错误：

* * *

## 错误：

调试 SMTP：AUTH LOGIN 失败 javax.mail.AuthenticationFailedException：535-5.7.1 用户名和密码不被接受。如需了解详情，请访问 535 5.7.1 [http://support.google.com/mail/bin/answer.py?answer=14257](http://support.google.com/mail/bin/answer.py?answer=14257) j13sm1603739pat.17 - gsmtp

```
at com.sun.mail.smtp.SMTPTransport$Authenticator.authenticate(SMTPTransport.java:826)
at com.sun.mail.smtp.SMTPTransport.authenticate(SMTPTransport.java:761)
at com.sun.mail.smtp.SMTPTransport.protocolConnect(SMTPTransport.java:685)
at javax.mail.Service.connect(Service.java:295)
at javax.mail.Service.connect(Service.java:176) 
```

* * *

## 代码片段：

```
Security.addProvider(new com.sun.net.ssl.internal.ssl.Provider());
Properties props = new Properties();
props.put("mail.smtps.host","smtp.gmail.com");
props.put("mail.transport.protocol", "smtp");
props.put("mail.smtps.auth", "true");
props.put("mail.smtp.debug", "true");
props.put("mail.smtp.port", 465);
props.put("mail.smtp.socketFactory.port", 465);
props.put("mail.smtp.socketFactory.class", "javax.net.ssl.SSLSocketFactory");
props.put("mail.smtp.socketFactory.fallback", "false");
props.put("mail.smtp.ssl.enable", true);

Session session = Session.getDefaultInstance(props);
session.setDebug(debug);

Message msg = new MimeMessage(session);
InternetAddress addressFrom = new InternetAddress("fromId@gmail.com");
msg.setFrom(addressFrom);

InternetAddress[] addressTo = new InternetAddress[recipients.length];
for (int i = 0; i < recipients.length; i++) {
addressTo[i] = new InternetAddress(recipients[i]);
}
msg.setRecipients(Message.RecipientType.TO, addressTo);
msg.setSubject("test subject");
msg.setContent("test message", "text/plain");
Transport tp = session.getTransport("smtp");
tp.connect(SMTP_HOST_NAME, "dummyId@gmail.com", "dummypassword");
tp.sendMessage(msg, addressTo);
tp.close(); 
```

* * *

## 附加信息：

1.  我已经为 EC2 实例上的所有端口添加了权限。此外，我还为端口 465(SMTPS) 和 25(SMTP) 添加了显式权限。
2.  我已经交叉检查了代码中提供的用户名和密码的正确性。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-19T03:31:41.623

过去，从 EC2 内的服务器发送的垃圾邮件一直是亚马逊和邮件服务提供商的主要问题。最初，亚马逊故意没有足够的 DNS 信息来通过常见电子邮件服务的反垃圾邮件检查（缺少 DNS 反向查找 PTR 记录），然后亚马逊引入了低邮件配额，遵循批准流程以完全访问 EC2 或 SES 邮件（提供特定的技术设置以完全启用外发电子邮件）。

这是一个描述一些历史的链接： http: [//shlomoswidler.com/2009/07/sending-email-from-ec2.html](http://shlomoswidler.com/2009/07/sending-email-from-ec2.html)

虽然您收到的错误是 Gmail 服务器上的身份验证失败，但可能是（*可能是*）因为 Gmail 将您的发件人 IP 地址识别为潜在的垃圾邮件发送者，因为您没有正确设置 Amazon 反向 DNS 查找属性。

1.  设置 Amazon Reverse DNS 查找详细信息，以便 Gmail 不会将您的邮件检测为垃圾邮件。看来这只能通过提交申请表以取消电子邮件发送配额来完成。来自 Amazon EC2 IP 信息常见问题：

    > *问：我可以为我的弹性 IP 地址配置反向 DNS 记录吗？*
    > 
    > *是的，您可以配置您的弹性 IP 地址的反向 DNS 记录（提交[请求删除电子邮件发送限制表单](http://portal.aws.amazon.com/gp/aws/html-forms-controller/contactus/ec2-email-limit-rdns-request)）。请注意，在我们创建反向 DNS 记录之前，必须存在指向该弹性 IP 地址的相应正向 DNS 记录。*

    以下是电子邮件配额用尽时亚马逊发送的电子邮件示例 - 再次说明 DNS PTR 配置的请求和批准：http: [//www.practicalclouds.com/content/guide/sending-email-ec2-instances](http://www.practicalclouds.com/content/guide/sending-email-ec2-instances)

2.  请严格按照 Gmail 错误消息中包含的链接中的所有说明进行操作：http: [//support.google.com/mail/bin/answer.py](http://support.google.com/mail/bin/answer.py?answer=14257) ?answer=14257 。如果 Gmail 认为您的帐户正在从您的 IP 地址发送垃圾邮件，这将重置您的 Gmail 帐户状态。

3.  或者，您可以通过 Amazon SES 发送邮件，同样需要请求、批准和 Amazon 提供的适当配置。这允许通过 发送邮件 `com.amazonaws.services.simpleemail.AmazonSimpleEmailServiceClient.sendEmail`。如果您使用它，请将您的代码授权添加到 sendmail：[Unable to send email from Amazon EC2 Server in Java](https://stackoverflow.com/questions/11155921/unable-to-send-email-from-amazon-ec2-server-in-java)。

# .net - 实体框架 5：具有具体基类的 Table-per-Type 映射

> ID：15956168
> 
> 赞同：4
> 
> 时间：2013-04-11T18:29:10.240
> 
> 标签：.net, entity-framework, inheritance, ef-code-first, table-per-type

我正在开发一个 EF5 Code First 应用程序，到目前为止一切进展顺利，但我遇到了一个障碍，我希望有人能提出解决方案。

基本上，我有一个基类和一些派生类，我想知道如何处理它们的映射。这是一个可笑的简化示例：

```
[Table("Person")]
public class Person
{
  public int PersonId { get; set; }
  public string Name { get; set; }
}

[Table("EmployeePerson")]
public class EmployeePerson : Person
{
  public int HoursWorked { get; set; }
}

[Table("CustomerPerson")]
public class CustomerPerson : Person
{
  public int DollarsSpent { get; set; }
} 
```

到目前为止，这是一个典型的 Table-per-Type 场景，除了基类*不是*抽象的障碍——可能有一个`Person`who 不是 an`EmployeePerson`或一个`CustomerPerson`. 我在让 EF 接受这一点时遇到了一些麻烦，当我尝试按 ID 加载这样的实体时，EF 生成的丑陋查询不返回任何行。

以前有没有人实施过这样的事情？TPT 风格的映射是否总是要求基类是抽象的？我还没有找到任何相反的例子，但也没有真正的证实。如果必须，我可以想到一些我可以使用的丑陋的解决方法，但如果有的话，我更喜欢更优雅的解决方案。

（另一个障碍：我正在使用第三方数据库，因此我无法对架构进行任何更改。）

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T19:05:12.087

如果您的“丑陋”解决方案是引入一个抽象基类`PersonBase`（或类似的）并创建`Person`一个空的派生类，我的评论是：去做吧！它一点也不难看，因为它在`Person`不影响其他派生类的情况下为以后的更改留出了空间。目前，这将更加困难。稍后您必须引入抽象类，这是对现有代码的一个更剧烈的变化。

关于您的问题：我无法使用 EF 5（VS 2012 .Net 4.5）重现该问题。也许你的真实模型中发生了更多的事情。

# python - 在python中解析管道分隔文件

> ID：15956169
> 
> 赞同：17
> 
> 时间：2013-04-11T18:29:11.180
> 
> 标签：python, python-3.x, parsing, csv

我正在尝试解析管道分隔文件并将值传递到列表中，以便稍后我可以从列表中打印选择性值。

该文件如下所示：

```
name|age|address|phone|||||||||||..etc 
```

它有 100 多列。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-04-11T18:44:57.797

使用[csv 库](http://docs.python.org/2/library/csv.html)。

首先，注册您的方言：

```
import csv
csv.register_dialect('piper', delimiter='|', quoting=csv.QUOTE_NONE) 
```

然后，在文件上使用您的方言：

```
with open(myfile, "rb") as csvfile:
    for row in csv.DictReader(csvfile, dialect='piper'):
        print row['name'] 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-04-11T18:40:46.720

`|`如果您正在解析一个在实际字段值中不包含任何字符的非常简单的文件，您可以使用[`split`](http://docs.python.org/2/library/stdtypes.html#str.split)：

```
fileHandle = open('file', 'r')

for line in fileHandle:
    fields = line.split('|')

    print(fields[0]) # prints the first fields value
    print(fields[1]) # prints the second fields value

fileHandle.close() 
```

**编辑：**解析表格数据的一种更强大的方法是使用[下面提到](https://stackoverflow.com/a/15956440/365796)`csv`的库。

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2017-02-01T14:57:02.967

```
import pandas as pd

pd.read_csv(filename,sep="|") 
```

这会将文件存储在数据框中。对于每一列，您可以应用条件来选择要打印的所需值。执行时间很短。我尝试了 111047 行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-03-01T13:27:13.827

在 2022 年，使用 python 3.8 或更高版本，您可以简单地执行以下操作：

```
 with open(file_path, "r") as csvfile:
            reader = csv.reader(csvfile, delimiter='|')
            for row in reader:
              print(row) 
```

# java - 什么是 Java EE 有效负载提取器模式？

> ID：15956174
> 
> 赞同：2
> 
> 时间：2013-04-11T18:29:41.777
> 
> 标签：java, jakarta-ee, ejb, design-patterns

任何人都可以简要概述 Java EE 6“有效负载提取器”模式吗？

Oracle 似乎将其作为 Java EE 6 的关键模式进行宣传，但除了在一本书（我目前没有）之外，我在网上没有看到任何关于它的信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T18:51:22.377

我认为它是在本书中定义的：[Real World Java EE Pattern](https://rads.stackoverflow.com/amzn/click/com/0557078326) based on this [article](http://java.dzone.com/articles/book-real-world-java-ee)，所以你最好的选择是购买这本书。

# c# - XNA 键盘输入

> ID：15956178
> 
> 赞同：0
> 
> 时间：2013-04-11T18:29:55.767
> 
> 标签：c#, xna, switch-statement

我在注册键盘输入时遇到了一个小错误。

```
 case GameState.InGame:
                {
                    **if (PlayerInput.IsKeyUp(Keys.P)&& oldInput.IsKeyDown(Keys.P))**
                         this.gameState = GameState.Paused;

                }
                   break;
            case GameState.Paused:
                {
                    **if (PlayerInput.IsKeyDown(Keys.P) && oldInput.IsKeyUp(Keys.P))**
                          this.gameState = GameState.InGame;
                }
                break; 
```

* * *

发生的事情是它进入暂停游戏状态就好了。但是，当尝试从暂停状态进入游戏中状态时，只要按下“P”键，它就会返回暂停状态。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T18:35:09.700

在第一种情况下，您正在测试从 UP 到 DOWN 的键转换，在第二种情况下，您正在测试从 DOWN 到 UP 的键转换。对这两种情况使用相同的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T18:38:49.807

只需在按下按钮时切换游戏状态。

```
if (PlayerInput.IsKeyDown(Keys.P) && oldInput.IsKeyUp(Keys.P))
{
  switch (this.gameState)
  {
    case GameState.Paused:
      this.gameState = GameState.InGame;
      break;
    case GameState.InGame:
      this.gameState = GameState.Paused;
      break;
  }
} 
```

或者，如果您愿意：

```
if (PlayerInput.IsKeyDown(Keys.P) && oldInput.IsKeyUp(Keys.P))
{
  this.gameState = this.gameState == GameState.Paused ? GameState.InGame : GameState.Paused;
} 
```

# java - Java数据库添加到我删除的行？

> ID：15956179
> 
> 赞同：2
> 
> 时间：2013-04-11T18:29:56.147
> 
> 标签：java, mysql, database

好的，所以我有一个程序，可以在其中将新玩家添加到数据库中，并将用户加载到列表中。问题是当我删除一个用户，然后去添加一个新用户时，新玩家被添加到旧用户所在的位置。基本上是因为那个位置现在是免费的，我使用：

```
rs.moveToInsertRow(); 
```

有没有一种方法可以在添加新玩家时“始终”添加到数据库的末尾。就像您从表中删除一行以使数据库压缩以使其没有间隙一样？

这是代码：

```
public static void Save() { try {

String Name = "#####";
 String Pass= "#####";
String Host = "######";
    Connection con = DriverManager.getConnection(String.format(
"jdbc:mysql://%s:%s/%s", Host, "####", "####"),
Name, Pass);
  Statement stmt = con.createStatement (ResultSet.TYPE_SCROLL_SENSITIVE,ResultSet.CONCUR_UPDATABLE);

String sql = "SELECT * FROM Accounts";
    ResultSet rs = stmt.executeQuery(sql);

 rs.moveToInsertRow( );

    String userName= TestForm.UsernameTextField.getText(); //make this equal to whats in textfield
    String password= TestForm.PasswordTextField.getText(); //make this equal to whats in textfield

    String insertQuery="insert into Accounts (`Username`,`Password`) values ('"+userName+"','"+password+"');";
    stmt.executeUpdate(insertQuery);

 stmt.close();
 rs.close();
}

catch(Exception e)
{
System.out.println("ERROR");
e.printStackTrace();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T18:33:56.867

你的表创建语句是什么？`SHOW CREATE TABLE Accounts ;`

似乎[`AUTO_INCREMENT`](https://dev.mysql.com/doc/refman/5.0/en/example-auto-increment.html)表中的整数主键会帮助您解决问题。

# javascript - document.getElementById 不返回 null，但也不做我想做的事。javascript控制台中没有错误

> ID：15956182
> 
> 赞同：0
> 
> 时间：2013-04-11T18:30:06.730
> 
> 标签：javascript, google-chrome-extension

在本例中，我加载了一个贝宝页面，提示我登录。一旦我登录，页面就会改变，通过使用贝宝端的其他 javascripts。该地址不会在此转换中更改，源代码也不会以任何实质性方式更改。我试图找到一种方法让我的脚本在第一次单击后等待足够长的时间，以便能够获取之后加载的元素。我想我可以使用以下方法相当简单地做到这一点：

```
document.getElementById("submitLogin").click();

window.onload = function() {
    document.getElementById("continue").click();
}; 
```

执行脚本时，单击第一个按钮，页面转换，但不会单击加载的第二个按钮。我的 javascript 控制台没有报告任何错误，表明它能够“获取”该元素。不知道为什么它不会点击它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T19:04:43.677

如果不出意外，您总是可以每隔一段时间轮询“继续”元素的存在：

```
function clickContinue() {
    var button = document.getElementById("continue");
    return button ? button.click() : setTimeout(clickContinue, 100);
}

document.getElementById("submitLogin").click();
clickContinue(); 
```

如果你走这条路，你可能想要包括一个故障保护，这样它就不会运行太久，以防发生意外情况。像这样的东西应该工作：

```
clickContinue.interval = 100; // Look for "continue" button every 0.1 second
clickContinue.ttl = 10000; // Approximate time to live: 10 seconds ~ 10,000 ms
clickContinue.tries = clickContinue.ttl / clickContinue.interval | 0;

function clickContinue() {
    var button = document.getElementById("continue"),
        interval = clickContinue.interval;
    return button ? button.click() : 
        clickContinue.tries-- && setTimeout(clickContinue, interval);
}
// ... 
```

不过，请查看 PayPal 的 API 文档，看看它们是否提供了一种设置回调来处理此问题的方法。这种轮询技术可能只应作为最后的手段使用。

# r - 如何使用 tcltk 将数据框作为 CSV 保存到用户选择的位置

> ID：15956183
> 
> 赞同：62
> 
> 时间：2013-04-11T18:30:09.237
> 
> 标签：r, csv, save, dataframe

我有一个名为`Fail`.

我想`Fail`在用户选择的位置另存为 CSV。下面是我找到的一些示例代码，但我不知道如何合并`Fail`到其中。

```
require(tcltk)
fileName <- tclvalue(tkgetSaveFile())
if (!nchar(fileName)) {
    tkmessageBox(message = "No file was selected!")
} else {
    tkmessageBox(message = paste("The file selected was", fileName))
} 
```

* * *

## 回答 #1

> 赞同：100
> 
> 时间：2013-04-11T18:40:11.657

看看`write.csv`或`write.table`功能。您只需将用户选择的文件名提供给`file`参数，并将数据框提供给`x`参数：

```
write.csv(x=df, file="myFileName") 
```

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2016-07-27T16:08:26.620

你甚至不需要使用包“tcltk”。您可以简单地执行如下所示：

```
write.csv(x, file = "c:\\myname\\yourfile.csv", row.names = FALSE) 
```

尽管有“c:\myname\yourfile.csv”，但请给出您的路径。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2018-03-25T23:15:21.230

```
write.csv([enter name of dataframe here],file = file.choose(new = T)) 
```

运行上述脚本后，此窗口将打开：

[![在此处输入图像描述](https://i.stack.imgur.com/pUZlr.png)](https://i.stack.imgur.com/pUZlr.png)

**在“文件名**”字段中键入带有扩展名的新文件名，然后单击“**打开**”，它会要求您创建一个新文件，您应该选择**“是”**，该文件将被创建并保存在所需的位置。

# jquery - symfony 中的滚动分页插件

> ID：15956185
> 
> 赞同：1
> 
> 时间：2013-04-11T18:30:15.053
> 
> 标签：jquery, symfony, scroll-paging

我尝试了三个小时来解决问题（Symfony 2.2），但我没有找到任何解决方案。我不知道如何在 contentpage 中编写页面的 url：

```
$('#container_sub_ejob').scrollPagination({
            'contentPage': '/tts/list', 
            .......
        }); 
```

在我的路由中，我写道：

```
tts_show:
    pattern:  /tts/list
    defaults: { _controller: bgsBundle:bgs:show } 
```

和控制器：

```
public function showAction()
    {
        return $this->render('bgsBundle:bgss:all_content.php');
    } 
```

# java - 从 ArrayList 创建 JTable

> ID：15956187
> 
> 赞同：0
> 
> 时间：2013-04-11T18:30:22.247
> 
> 标签：java, swing, arraylist, jtable, abstracttablemodel

现在我设法将文件中的对象放入 a`ArrayList`中，我必须将它们显示到`JTable`.

这些是我的 3 个对象`ArrayList`

```
Lieu<Double, String>(45.573715, -73.900295, "p1");
Lieu<Double, String>(45.573882, -73.899748, "p2");
Lieu<Double, String>(45.574438, -73.900099, "p3"); 
```

在`Lieu`课堂上，我有方法`getX()`和`getY()`

但我不知道如何将它们显示在`JTable`.

```
Longitude           Latitude
45.573715           -73.900295
45.573882           -73.899748
45.574438           -73.900099 
```

这是我的开始：

```
public class MonModel extends AbstractTableModel{

    @Override
    public int getColumnCount() {
        return 2;
    }

    @Override
    public int getRowCount() {
        return l.size();//l is the arraylist that contains the 3 elements
    }

    @Override
    public Object getValueAt(int rowIndex, int columnIndex) {
        if(columnIndex==0){
            return l.get(rowIndex).getX();
        }
        else if(columnIndex==1){
            return l.get(rowIndex).getY();
        }
        return null;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T01:28:26.143

使用 your`TableModel`创建 a`JTable`并将其添加到`JFrame`. 还要考虑覆盖，如此[处](https://stackoverflow.com/a/9134371/230513)`getColumnName()`所示。另请参阅[*如何使用表格*](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html)。[](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html)

 *```
MonModel model = new MonModel();
JTable table = new JTable(model);
JFrame f = new JFrame();
f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
f.add(new JScrollPane(table), BorderLayout.CENTER);
f.pack();
f.setLocationByPlatform(true);
f.setVisible(true); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T03:52:21.063

使用 a`TableModel`在 中显示数据`JTable`。例如：

在 UI 类中，将表格模型设置为表格。

```
JTable table = new JTable(new MonModel()); 
```

表模型类

```
class MonModel extends AbstractTableModel {

    private List<LatNLon> l;
    private String[] columnNames = {"Longitude", "Latitude"};

    public MonModel() {
        l = new ArrayList<LatNLon>();

        l.add(new LatNLon("45.573715", "-73.900295"));
        l.add(new LatNLon("45.573715", "-73.900295"));
        l.add(new LatNLon("45.573715", "-73.900295"));
    }

    @Override
    public String getColumnName(int column) {
        return columnNames[column];
    }

    public int getColumnCount() {
        return 2;
    }

    public int getRowCount() {
        return l.size();
    }

    public Object getValueAt(int rowIndex, int columnIndex) {
        if(columnIndex==0){
            return l.get(rowIndex).getX();
        }
        else if(columnIndex==1){
            return l.get(rowIndex).getY();
        }
        return null;
    }
} 
```

纬度和经度类。

```
class LatNLon {
    private String x;
    private String y;

    public LatNLon(String x, String y) {
        this.x = x;
        this.y = y;
    }
// Code: For Getters and Setters.
} 
```

另请阅读[如何使用表格](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html)。*

# c++ - 删除等于另一个成员的链表成员的嵌套循环正在中断。将问题隔离到一行

> ID：15956188
> 
> 赞同：3
> 
> 时间：2013-04-11T18:30:35.763
> 
> 标签：c++, linked-list

在导师的帮助下，我一直在研究我的链表实验室，但不幸的是不久前与他们失去了联系，我自己也无法解决这个问题。

我的第一个 while 循环一次遍历链表一个节点，然后进入第二个 while 循环，该循环遍历第二个节点并将其与第一个节点进行比较。这似乎工作正常。然而问题在于，当它删除一个成员时，它实际上会继续删除两个。它会删除它之前的那个，以及它应该删除的节点。

我已将问题隔离到 list.cpp 的第 80 行（如下）。我认为 cursorOne 的 link_field 指向光标 2 的链接字段正在删除两个光标之间的所有节点，这不是我想要的。

所以我想我应该让光标 1 的链接字段指向光标 1 的下一个链接字段？我感觉如此接近.. 这个实验室的困难部分已经完成，但我还没有得到最后一个 Eureka 时刻，但我已经看了很多。

这是程序：它应该是不言自明的。它使用节点类，然后使用列表类对其进行变异。

再想一想，我想我无法链接到 ideone.com 上的代码。所以我会尽量让这个尽可能简短，然后发布循环。这是[节点](http://ideone.com/UnL0jv)和[list.cpp](http://ideone.com/Ln0Oma)

```
 while(currentItem != NULL)
    {
        cout << "Enter Second Loop" << endl;
        cout << currentItem->data_field << " Curse 2" << endl;

        //compare it
        if (nodeToFindDuplicatesOf->data_field == currentItem->data_field)
        {

         //prev->next = current->next to delete
            // in order to delete only one, I must find a way to set the link_field of the previous node to cursor 1 to
            // the link field of the node that's to be deleted
            cout << nodeToFindDuplicatesOf->data_field << "being removed" << endl;
            predecessor = currentItem->link_field;
            delete currentItem;

            currentItem = nodeToFindDuplicatesOf; //set cursor2 to cursor1

        }
        currentItem = currentItem->link_field;
    }
    nodeToFindDuplicatesOf = nodeToFindDuplicatesOf->link_field;
    if (nodeToFindDuplicatesOf)
        currentItem = nodeToFindDuplicatesOf->link_field;
} 
```

}

我的节点类中是否需要前一个节点指针？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T18:45:33.707

您定位错误的分析是正确的。要从列表中删除一个项目，您需要一个指向要删除的项目`currentItem`（又名`cursorTwo`）及其前身的指针。但是，您的`cursorOne`指针*不是*的前身`cursorTwo`，而是指向您要查找其副本的某个节点的指针。

要修复错误，*首先*为变量使用有意义的名称。`cursorOne`并且`cursorTwo`根本没有意义，它们的名字很可能是你错误的根源。为什么不叫他们`nodeToFindDuplicatesOf`and `currentItem`？（或者也许你可以想出更好的东西。）

然后你需要引入一个新的指针来跟踪`currentItem`.

当`currentItem`需要删除时，设置`link_field`其前身的，然后`delete currentItem`（不`NULL`预先设置）。

# php - 在浏览器中使用 PHP 在 PDF 上注释和绘图并再次保存为 PDF 格式

> ID：15956192
> 
> 赞同：2
> 
> 时间：2013-04-11T18:30:48.197
> 
> 标签：php, javascript, pdf, browser, edit

很长一段时间以来，我一直在网上寻找一个 pdf 编辑工具。因此，对这个问题提出一些建议/建议会很好。

我已经阅读了有关 StackOverflow 的许多其他主题，但还没有完全找到完整的解决方案。

**案例：** 我有一个在 linux 服务器上用 php/javascript 编写的应用程序，最近我的客户要求他们能够直接在浏览器中编辑 Pdf 文档。我需要的功能主要是能够进行注释和在 PDF 上绘图。这意味着。他们加载已上传的 PDF 文档并对其进行编辑，然后再次将其保存为 PDF 格式。全部在浏览器中完成。

第二个要求是程序必须再次以 PDF 格式保存 pdf 文档，因为我有一个具有所有这些功能的 Ipad 应用程序，并且我需要它们很好地一起玩。因此，保存类似的 html 图像不是一种选择。

我阅读了一条建议 Zend 框架的评论，它听起来确实很有用。但是我已经从地面开发了自己的平台，因此我的第二个问题是，是否可以仅嵌入 Zend 的 PDF 工具或其他东西？

先感谢您。

附言。如果我错过了一个可以准确回答这个问题的类似主题，请告诉我，我会再次删除。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T05:38:10.803

有几个库可用于编辑 PDF 文件。仅举几例：Tcpdf、fpdf 和 Zend_Pdf。

即使没有完整的 ZendFramework，也可以使用后者。但要小心：目前它只允许编辑最高版本为 1.4 的 PDF 文件。

如果您需要速度，您还应该查看可以调整以支持您的用例的 PDFlib

# java - 在子类中覆盖@jsonIgnore

> ID：15956197
> 
> 赞同：25
> 
> 时间：2013-04-11T18:31:19.107
> 
> 标签：java, json, jackson

我有一个班级家长

```
public class Parent
{
   private int id;

   @JsonIgnore
   int getId() {}

   void setId(int id) {}
} 
```

我有一个从 Parent 派生的子类

```
public class Child extends Parent
{
    @JsonProperty   // just to explicitly tell jackson to serialize this
    @Override
    int getId() {}

    @Override
    void setId(int id) {}
} 
```

我实际上不希望在返回 Parent 的对象时序列化 id 属性，但是在返回 Child 类的对象时应该序列化它。

我认为如果 Parent 是一个接口，则覆盖可见性会起作用，但我不确定行为是否与超类相同。

有一个简单的解决方案吗？我真的很感激你的回答。德克萨斯州。

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2013-04-11T19:24:53.873

您在 Child 类中想要的不是`@JsonProperty`，而是`@JsonIgnore(false)`。

# android - 库解析为没有 project.properties 文件的路径

> ID：15956199
> 
> 赞同：12
> 
> 时间：2013-04-11T18:31:24.093
> 
> 标签：android, ant, jenkins, actionbarsherlock

我无法使用 Jenkins 构建我的项目并引用 Sherlock 项目库。

我可以在本地系统上使用 ant 构建项目。问题似乎是在构建服务器上引用 Sherlock 库。

我使用 Sherlock 库项目的相对路径将环境变量传递给 ant：

```
android.library.reference.1=../../buildlibraries/androidlibraries/sherlock/library 
```

我收到这个错误。

```
**BUILD FAILED**
/SDK/android-sdk-macosx/tools/ant/build.xml:595: 
The following error occurred while executing this line:
/SDK/android-sdk-macosx/tools/ant/build.xml:571: 
../../buildlibraries/androidlibraries/sherlock/library resolve to a path with 
no project.properties file for project /Users/Jenkins/buildlibraries/androidlibraries/sherlock/library 
```

我检查并发现该位置确实存在 project.properties 文件。

它具有以下属性：

```
android.library=true
# Project target.
target=android-14 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-05-14T15:43:18.050

我刚才也发生了同样的事情。我同时使用 Windows 和 Mac 进行开发。我想在两个平台上测试我的项目。它在我的 Windows 机器上构建得很好，但在我的 Mac 上坏了。当我在 Mac 上查看我的 Android 应用程序（不是库项目）中的 project.properties 时，我看到我的库项目是这样引用的：

```
android.library.reference.1=LibraryProjects\\my_lib_project 
```

我将其更改为下面的行，它工作得很好！

```
android.library.reference.1=LibraryProjects/my_lib_project 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-12T19:19:45.233

我通过编辑和签入具有相同属性的 project.properties 文件解决了这个问题：`android.library.reference.1=../../buildlibraries/androidlibraries/sherlock/library`

我不确定它为什么有效。为什么 ant 会关心属性是由 Jenkins 传入还是在项目的属性文件中声明？

现在我的 project.properties 文件中有两条路径：一条用于本地构建，一条用于在 Jenkins 上构建。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-14T05:55:46.130

我遇到了类似的错误*../google-play-services_lib resolve to a path with no project.properties file for project 的*问题。它必须在 Jenkins CI (Cloudbees) 中工作，因此无需手动编辑 project.properties。

我的解决方案是`android update lib-project --path ...`用丑陋但`echo "android.library.reference.1=../../../..$ANDROID_HOME/extras/google/google_play_services/libproject/google-play-services_lib" >> project.properties`在 Jenkins shell 命令中工作的替换。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-29T21:22:24.647

我遇到了这个问题，因为我没有使用该`android`工具下载 google play 服务包。当我检查我的 android sdk 目录 ($ANDROID_HOME) 时，没有“$ANDROID_HOME/extras/google”文件夹。

我通过运行`android`和下载附加部分中的“Google Play 服务”解决了这个问题。

# javascript - 按下回车时使用 Javascript

> ID：15956200
> 
> 赞同：0
> 
> 时间：2013-04-11T18:31:24.183
> 
> 标签：javascript, html, submit, enter

当我在输入字段中按 enter 时，我想调用一个函数。问题是，它此时只是重新加载页面，而不调用 JavaScript。当我按下按钮时，JavaScript 可以正常工作。现在，当我按下回车键时，我想得到相同的结果。

这是我的表格

```
<form onSubmit="changeView()">
<input type="text" value="London" name="region" id="region">
<input type="button" onClick="changeView()" name="mySubmit" value="Search" >
</form> 
```

我也尝试将其放入文本字​​段`onKeydown="Javascript: if (event.keyCode==13) changeView();`

但这并没有真正帮助。这是我的 JavaScript 函数

```
function changeView(){
var region = document.getElementById('region').value;
$.ajax({
    type: 'GET',
    url: 'webservice.php',
    data: {region: region},
    success: function(response, textStatus, XMLHttpRequest) { 
        alert("SUCCESS");
        map.panTo(new L.LatLng(response[0].lat,response[0].lon));
    }
});
return false;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T18:38:45.770

HTML：

```
<form action="webservice.php" method="post">
    <input type="text" value="London" name="region" id="region">
    <input type="submit" name="mySubmit" value="Search" >
</form> 
```

Javascript：

```
$('#region').on('keydown', function(e) {
     if (e.which === 13) {
                $(this).parent('form').submit(); 
            }

    });

    $('.form').on('submit', function(e) {
        var self = $(this);

         $.ajax({
                type: self.attr('method') ,
                url: self.attr('action'),
                data: {region: $('#region').val()},
                success: function(response, textStatus, XMLHttpRequest) { 
                    alert("SUCCESS");
                    map.panTo(new L.LatLng(response[0].lat,response[0].lon));
                    }
            });
        e.PreventDefault();
        return false;
    }); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-11T18:37:17.057

看起来你正在使用 jQuery，你有没有想过只是将一个事件投标到文本框

像这样的东西

```
$(document).ready(function(){ // binds when the document has finished loading
    $("#region").on('keypress', function(e){
        if (e.which === 13){  // enter key
            changeView();
        }
    });
}); 
```

# google-maps - 如何在谷歌地图上搜索从源到目的地的路线上保存的gps坐标？

> ID：15956208
> 
> 赞同：0
> 
> 时间：2013-04-11T18:31:37.233
> 
> 标签：google-maps

我正在尝试开发网站，使用谷歌地图显示从源头到目的地的所有主要地标。

我已将这些主要地标 GPS 坐标保存在我的数据库中。

但是，我不知道如何搜索我保存的 GPS 坐标并找出其中哪些在谷歌地图显示的路线上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T20:36:21.840

您可以从路线的路径创建一条折线（例如，可以通过 检索[`route.overview_path`](https://developers.google.com/maps/documentation/javascript/reference?hl=en#DirectionsRoute)），然后使用[几何库](https://developers.google.com/maps/documentation/javascript/geometry)[`google.maps.geometry.poly.isLocationOnEdge()`](https://developers.google.com/maps/documentation/javascript/reference?hl=en#poly)的方法来对照折线检查地标坐标。

# css - 将 div 设置为浏览器窗口的 100% 高度

> ID：15956216
> 
> 赞同：4
> 
> 时间：2013-04-11T18:32:11.720
> 
> 标签：css

我的网站有两列，现在背景颜色在左列的最后一段内容处结束（用于导航）。

我试过 height:100%, min-height:100%; 等似乎不起作用。这是CSS。

```
.container {
    width: 100%;
    height:100%;
    min-width: 960px;
    background: #fbf6f0;
    margin: 0 auto; 
    overflow: hidden;
}

#sidebar1 {
    float: left;
    position:absolute;
    width: 20%;
    height:100%;
    min-width:220px;
    background: none repeat scroll 0% 0% #007cb8;
    z-index:9999;
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-06-29T05:25:19.210

使用视口高度 - vh。

```
.container {
height: 100vh;
} 
```

**更新**

请注意，在 Safari iOS 上使用 VH 存在潜在问题。有关更多信息，请参阅此线程：[Chrome / Safari notfill 100% height of flex parent](https://stackoverflow.com/questions/33636796/chrome-safari-not-filling-100-height-of-flex-parent)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-11T18:35:16.937

也设置身体高度

```
body,html{
  height:100%;
}

div {
  height:100%
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T18:36:24.790

`div`默认情况下它不会填满整个窗口的原因是因为它是父标签，所以`<body>`标签可能只会拉伸到它需要的高度。在样式表的顶部添加这个（我喜欢以与标记中的标签类似的顺序对样式进行排序）：

```
html, body {
    height:100%;
    min-height:100%;
} 
```

*编辑：语法*

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-28T20:32:08.243

```
overflow-y: auto; 
```

此 CSS 代码适用于您的解决方案。

# java - 递归调用占用内存

> ID：15956218
> 
> 赞同：0
> 
> 时间：2013-04-11T18:32:25.103
> 
> 标签：java, tree

我已经在学校开始学习数据结构，并且我有一个作业，我必须实现一个二叉搜索树并告诉数据结构占用的内存。

我已经创建了我的 BST，我相信一切都按预期工作，但我不知道如何计算使用的内存。

这是我为数据结构和插入代码创建的代码：

```
class Node {

    int key, totalValue;
    public Node left;
    public Node right;

    public Node (int key, int totalValue) {
        this.key= key;
        this.totalValue = totalValue;
        this.left = null;
        this.right = null;
    }

    public int getkey() {
        return key;
    }

    public int getTotalValue() {
        return totalValue;
    }
}

class Tree {

    private Node root;

    public Tree() {
        this.root = null;
    }

    public Node getRoot() {
        return this.root;
    }

    public void setRoot(Node node) {
        this.root = node;
    }
} 
```

这是插入的代码：

```
private static void addNode(Node node, Node tempNode) {

    if (tempNode.getkey() < node.getkey()) {
        if (node.left == null) {
            node.left = tempNode;
        } else {
            addNode(node.left, tempNode);
        }
    } else if (tempNode.getkey() > node.getkey()){
        if (node.right == null) {
            node.right = tempNode;
        } else {
            addNode(node.right, tempNode);
        }
    }else{
        node.totalValue += tempNode.getTotalValue();
    }
} 
```

我知道对于每个节点我需要 2 个 int 的 8 个字节，但我不知道每个指针占用多少。

第二个问题。想象一下，我从 10000 个键中插入 25000 个条目。每个插入都将递归使用，直到新节点找到它的“位置”。如何计算占用的内存？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T18:36:01.383

递归方法背后的基本概念是

```
GetMemoryUsed(node)
{

    if(node is leaf)
        return (node.localMemory)

    return(GetMemoryUsed(node.left) + GetMemoryUsed(node.right) + node.localMemory);
} 
```

其中`node.localMemory`只是特定节点使用的内存量（不包括子节点）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T18:37:12.933

至于获得精确的数字，这里有几个您可能感兴趣的工具：

[Java 仪器](http://docs.oracle.com/javase/6/docs/api/java/lang/instrument/Instrumentation.html)

[JMap 内存映射](http://docs.oracle.com/javase/6/docs/technotes/tools/share/jmap.html)

# html - 使用 XSL 转换进行 XML 到 HTML 的转换

> ID：15956220
> 
> 赞同：0
> 
> 时间：2013-04-11T18:32:37.833
> 
> 标签：html, xml, xslt

我编写了一个 XSL 文件，用于以 HTML 表格格式显示 XML 文件，但它不起作用。它只显示标题，即`uri`和`literal`. 请仔细阅读我的代码并用解决方案回复我。

```
<?xml version="1.0"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="html" encoding="UTF-8"/>
  <xsl:template match="/">
    <html>
      <head>
        <title>Query</title>
      </head>
      <body>
        <table width="100%" border="1">
          <THEAD>
            <TR>
              <TD width="35%">
                <B>URI</B>
              </TD>
              <TD width="15%">
                <B>Literal</B>
              </TD>
            </TR>
          </THEAD>
          <TBODY>
            <xsl:for-each select="sparql/results/result">
              <TR>
                <TD width="35%">
                  <xsl:value-of select="uri" />
                </TD>
                <TD width="15%">
                  <xsl:value-of select="literal" />
                </TD>
              </TR>
            </xsl:for-each>
          </TBODY>
        </table>
      </body>
    </html>
  </xsl:template>
</xsl:stylesheet> 
```

我的输入是：

```
<?xml version="1.0"?>
<?xml-stylesheet type="text/xsl" href="style.xsl"?>
<sparql xmlns="http://www.w3.org/2005/sparql-results#">
  <head>
    <variable name="c1"/>
    <variable name="callret-1"/>
  </head>
  <results>
    <result>
      <binding name="c1">
        <uri>http://dbpedia.org/resource/SVIST</uri>
      </binding>
      <binding name="callret-1">
        <literal>
          Swami Vivekananda &lt;b&gt;Institute&lt;/b&gt; &lt;b&gt;of&lt;/b&gt; Science and      &lt;b&gt;Technology&lt;/b&gt;, a non profit making trust has been set up to... the technological and professional institution &lt;b&gt;of&lt;/b&gt; high standards and to encourage research and... In this era &lt;b&gt;of&lt;/b&gt; economic...
        </literal>
      </binding>
    </result>
    <result>
      <binding name="c1">
        <uri>http://dbpedia.org/resource/Haldia_Institute_of_Technology</uri>
      </binding>
      <binding name="callret-1">
        <literal>
          &lt;b&gt;Haldia&lt;/b&gt; &lt;b&gt;Institute&lt;/b&gt; &lt;b&gt;of&lt;/b&gt; &lt;b&gt;Technology&lt;/b&gt;.
        </literal>
      </binding>
    </result>
  </results>
</sparql> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T18:35:42.623

您需要在样式表中使用 XML 命名空间来匹配您的输入文档。

您的输入文档使用默认命名空间

```
http://www.w3.org/2005/sparql-results# 
```

没有显式引用此命名空间（带有前缀）的选择器*将不起作用*。

您需要像这样向样式表添加名称空间

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
                              xmlns:spa="http://www.w3.org/2005/sparql-results#"> 
```

（请注意，您可以使用任何您想要的前缀。）

然后修改您的 XPath 选择器以使用此前缀：

```
<xsl:for-each select="spa:sparql/spa:results/spa:result">
    <TR>    
       <TD width="35%"><xsl:value-of select="spa:uri" /></TD>   
       <TD width="15%"><xsl:value-of select="spa:literal" /></TD> 
    </TR>
</xsl:for-each> 
```

此外，使用缩进并注意 HTML 元素是小写的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T05:50:06.193

Harpo 是对的，您只需在 XSLT 中包含命名空间并相应地更改您的 XPATH。我为你做了这个：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"  xmlns:sq="http://www.w3.org/2005/sparql-results#">
  <xsl:output method="html" encoding="UTF-8"/>
  <xsl:template match="/">
    <html>
      <head>
        <title>Query</title>
      </head>
      <body>
        <table width="100%" border="1">
          <THEAD>
            <TR>
              <TD width="35%">
                <B>URI</B>
              </TD>
              <TD width="15%">
                <B>Literal</B>
              </TD>
            </TR>
          </THEAD>
          <TBODY>
            <xsl:for-each select="sq:sparql/sq:results/sq:result">
              <TR>
                <TD width="35%">
                  <xsl:value-of select="sq:binding/sq:uri" />
                </TD>
                <TD width="15%">
                  <xsl:value-of select="sq:binding/sq:literal" />
                </TD>
              </TR>
            </xsl:for-each>
          </TBODY>
        </table>
      </body>
    </html>
  </xsl:template>
</xsl:stylesheet> 
```

# r - 应用按因子拆分的函数

> ID：15956227
> 
> 赞同：1
> 
> 时间：2013-04-11T18:33:09.047
> 
> 标签：r

我有一个股票数据的数据框架，其中包含 10 多只股票的 10 年前信息。我试图在 quantmod 中对此数据运行 MACD 函数，但无法弄清楚如何按不同股票拆分计算。例如，我的数据框的一部分如下所示：

```
 data<-structure(list(market = structure(c(1L, 1L, 1L, 1L, 2L, 2L, 2L, 
2L, 3L, 3L), .Label = c("AD1", "AD2", "AD3"), class = "factor"), 
date = structure(c(15623, 15624, 15625, 15628, 15623, 15624, 
15625, 15628, 15625, 15628), class = "Date"), open = c(101.52, 
101.68, 102.1, 101.99, 100.73, 100.85, 101.57, 101.01, 100.56, 
100.42), high = c(102.07, 102.39, 102.36, 102.07, 101.4, 
101.59, 101.62, 101.35, 100.56, 100.71), low = c(101.26, 
101.56, 101.63, 101.5, 100.59, 100.85, 101.07, 100.97, 100.56, 
100.41), last = c(101.78, 102.08, 101.76, 101.91, 101.08, 
101.37, 101.06, 101.21, 100.41, 100.56)), .Names = c("market", 
"date", "open", "high", "low", "last"), row.names = c(1L, 2L, 
3L, 4L, 5L, 6L, 7L, 8L, 11L, 12L), class = "data.frame", na.action = structure(9:10,.Names = c("9", 
"10"), class = "omit")) 
```

如何将此数据帧传递给 MACD 函数，同时让它分别计算每个市场。感谢您的帮助。我是 R 的新手。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T18:49:10.270

您可以使用`by`此处进行分组`market`并将该功能应用于每个组。

```
library(quantmod)
by(data,data$market,function(x)
{
  ## coerece the group to an xts object
  dat.xts <- xts(x[,-c(1:2)],x$date)
  ## EMA ~ MACD with type 'EMA'
  EMA( dat.xts,n=min(nrow(dat.xts),10))

})

data$market: AD1
               [,1]
2012-10-10       NA
2012-10-11       NA
2012-10-12       NA
2012-10-15 101.8225
--------------------------------------------------------------------------------------------------------------- 
data$market: AD2
             [,1]
2012-10-10     NA
2012-10-11     NA
2012-10-12     NA
2012-10-15 101.04
--------------------------------------------------------------------------------------------------------------- 
data$market: AD3
             [,1]
2012-10-12     NA
2012-10-15 100.49 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T18:40:16.807

首先，`MACD`函数 in不`quantmod`期望。`xts``data.frame`

所以你需要做的是首先拆分`data.frame`然后`market`将每个结果`data.frame`转换为`xts`然后应用`macd`函数。

```
LL <- split(data, data$market)

result <- lapply(LL, 
       function(DF) { 
           XTS <- xts(DF[, -2], order.by = as.POSIXct(DF$date, format="%Y-%m-%d", tz="GMT"),tzone='GMT')
           return(MACD(XTS$last))                
       }
      ) 
```

# java - 这个线程连接代码是什么意思？

> ID：15956231
> 
> 赞同：166
> 
> 时间：2013-04-11T18:33:31.803
> 
> 标签：java, multithreading

在这段代码中，这两个 join 和 break 是什么意思？`t1.join()`导致`t2`停止直到`t1`终止？

```
Thread t1 = new Thread(new EventThread("e1"));
t1.start();
Thread t2 = new Thread(new EventThread("e2"));
t2.start();
while (true) {
   try {
      t1.join();
      t2.join();
      break;
   } catch (InterruptedException e) {
      e.printStackTrace();
   }
} 
```

* * *

## 回答 #1

> 赞同：335
> 
> 时间：2013-04-11T18:35:21.043

> 这个线程连接代码是什么意思？

引用[`Thread.join()`javadocs 方法](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Thread.html#join%28%29)：

> `join()`等待这个线程死掉。

有一个线程正在运行您的示例代码，它可能是[主线程](http://www.go4expert.com/articles/main-thread-java-t4178/)。

1.  主线程创建并启动`t1`和`t2`线程。两个线程开始并行运行。
2.  主线程调用`t1.join()`以等待`t1`线程完成。
3.  `t1`线程完成，方法`t1.join()`在主线程中返回。请注意，`t1`在调用之前可能已经完成，`join()`在这种情况下`join()`调用将立即返回。
4.  主线程调用`t2.join()`以等待`t2`线程完成。
5.  `t2`线程完成（或者它可能在线程完成之前完成）`t1`并且`t2.join()`方法在主线程中返回。

重要的是要了解`t1`和`t2`线程一直**在并行**运行，但是启动它们的主线程需要等待它们完成才能继续。这是一种常见的模式。此外，`t1`和/或`t2`可能在主线程调用它们*之前*`join()`完成。如果是这样，则`join()`不会等待，而是会立即返回。

> `t1.join()`意味着导致 t2 停止直到 t1 终止？

不会。正在调用的*主*`t1.join()`线程将停止运行并等待`t1`线程完成。线程并行运行，`t2`完全不受调用影响`t1`。`t1.join()`

就 try/catch 而言，`join()`throws`InterruptedException`意味着正在调用的主线程`join()`本身可能被另一个线程中断。

> ```
> while (true) { 
> ```

在`while`循环中加入连接是一种奇怪的模式。通常，您会进行第一次连接，然后`InterruptedException`在每种情况下进行适当处理的第二次连接。无需将它们置于循环中。

* * *

## 回答 #2

> 赞同：75
> 
> 时间：2013-04-11T18:38:35.087

这是一个**最受欢迎的 Java 面试**问题。

```
Thread t1 = new Thread(new EventThread("e1"));
t1.start();
Thread e2 = new Thread(new EventThread("e2"));
t2.start();

while (true) {
    try {
        t1.join(); // 1
        t2.join(); // 2  These lines (1,2) are in in public static void main
        break;
    }
} 
```

`t1.join()`意思是，t1 说“**我想先完成**”。情况也是如此`t2`。无论是谁启动`t1`或`t2`线程（在本例中为`main`方法），main 都会等到`t1`并`t2`完成他们的任务。

但是，需要注意的重要一点是，`t1`它们`t2`本身**可以并行运行，而与 和 上的加入调用**`t1`顺序 无关`t2`。它是必须**等待**`main/daemon`的线程。

 *** * *

## 回答 #3

> 赞同：52
> 
> 时间：2013-04-11T18:37:18.037

`join()`表示等待线程完成。这是一种拦截方法。`join()`您的主线程`t1.join()`（`t1`执行`t2.join()`.

* * *

## 回答 #4

> 赞同：42
> 
> 时间：2017-11-24T07:25:39.973

一张图片胜过千言万语。

```
 Main thread-->----->--->-->--block##########continue--->---->
                 \                 |               |
sub thread start()\                | join()        |
                   \               |               |
                    ---sub thread----->--->--->--finish 
```

希望有用，更多详情请点击[这里](http://www.henryxi.com/java-thread-join-example)

* * *

## 回答 #5

> 赞同：12
> 
> 时间：2016-07-13T14:51:32.850

当线程 tA 调用 tB.join() 时，其原因不仅是等待 tB 死亡或 tA 自身被中断，而且会在 tB 中的最后一条语句和 tA 线程中 tB.join() 之后的下一条语句之间创建发生前的关系。

> [线程中的所有操作都发生在任何其他线程从该线程上的 join() 成功返回之前。](https://docs.oracle.com/javase/specs/jls/se7/html/jls-17.html#jls-17.4.5)

是程序的意思

```
class App {
    // shared, not synchronized variable = bad practice
    static int sharedVar = 0;
    public static void main(String[] args) throws Exception {
        Thread threadB = new Thread(() -> {sharedVar = 1;});
        threadB.start();
        threadB.join();

        while (true) 
            System.out.print(sharedVar);
    }
} 
```

始终打印

```
>> 1111111111111111111111111 ... 
```

但是程序

```
class App {
    // shared, not synchronized variable = bad practice
    static int sharedVar = 0;
    public static void main(String[] args) throws Exception {
        Thread threadB = new Thread(() -> {sharedVar = 1;});
        threadB.start();
        // threadB.join();  COMMENT JOIN

        while (true)
            System.out.print(sharedVar);
    }
} 
```

不仅可以打印

```
>> 0000000000 ... 000000111111111111111111111111 ... 
```

但

```
>> 00000000000000000000000000000000000000000000 ... 
```

始终只有“0”。

因为Java内存模型不需要在没有heppens-before关系的情况下将'sharedVar'的新值从threadB'传输'到主线程（线程启动，线程连接，'synchonized'关键字的使用，AtomicXXX变量的使用等）。

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2018-04-27T18:26:14.653

简单地说：完成
`t1.join()`后返回`t1`。除了等待它完成之外，
它不会对 thread 做任何事情。 自然，后面的代码 只会在 返回后执行。`t1`
`t1.join()``t1.join()`

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2016-04-19T19:06:33.823

来自关于 Joins 的 oracle 文档[页面](https://docs.oracle.com/javase/tutorial/essential/concurrency/join.html)

> 该`join`方法允许一个线程等待另一个线程完成。

如果 t1 是`Thread`其线程当前正在执行的对象，

```
t1.join() : causes the current thread to pause execution until t1's thread terminates. 
```

如果 t2 是`Thread`其线程当前正在执行的对象，

```
t2.join(); causes the current thread to pause execution until t2's thread terminates. 
```

`join`API是低级API，在java早期版本中已经引入。在一段时间内（尤其是 jdk 1.5 版本），在并发方面发生了很多变化。

您可以使用 java.util.concurrent API 实现相同的目的。一些例子是

1.  使用[invokeAll](https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ExecutorService.html#invokeAll-java.util.Collection-) _`ExecutorService`
2.  使用[CountDownLatch](https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CountDownLatch.html)
3.  使用[ForkJoinPool](https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ForkJoinPool.html)或[newWorkStealingPool](https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/Executors.html#newWorkStealingPool--)（`Executors`从 java 8 开始）

参考相关的SE问题：

[等到所有线程在java中完成它们的工作](https://stackoverflow.com/questions/7939257/wait-until-all-threads-finish-their-work-in-java/36797569#36797569)

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2019-03-23T21:27:53.143

对我来说，Join() 行为总是令人困惑，因为我试图记住谁会等待谁。不要试图那样记住它。

> 下面是纯 wait() 和 notify() 机制。

我们都知道，当我们在任何 object(t1) 上调用 wait() 时，调用 object(main) 会被发送到等候室（阻塞状态）。

在这里，主线程正在调用 join()，这实际上是 wait()。所以主线程会一直等到收到通知。t1 完成运行（线程完成）时会发出通知。

收到通知后，main 走出等候室，继续执行。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-07-14T12:01:45.463

希望能帮助到你！

```
package join;

public class ThreadJoinApp {

    Thread th = new Thread("Thread 1") {
        public void run() {
            System.out.println("Current thread execution - " + Thread.currentThread().getName());
            for (int i = 0; i < 10; i++) {
                System.out.println("Current thread execution - " + Thread.currentThread().getName() + " at index - " + i);
            }
        }
    };

    Thread th2 = new Thread("Thread 2") {
        public void run() {
            System.out.println("Current thread execution - " + Thread.currentThread().getName());

            //Thread 2 waits until the thread 1 successfully completes.
            try {
            th.join();
            } catch( InterruptedException ex) {
                System.out.println("Exception has been caught");
            }

            for (int i = 0; i < 10; i++) {
                System.out.println("Current thread execution - " + Thread.currentThread().getName() + " at index - " + i);
            }
        }
    };

    public static void main(String[] args) {
        ThreadJoinApp threadJoinApp = new ThreadJoinApp();
        threadJoinApp.th.start();
        threadJoinApp.th2.start();
    }

    //Happy coding -- Parthasarathy S
} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2022-02-14T08:51:26.660

join() 方法用于保持当前正在运行的线程的执行，直到指定的线程死亡（完成执行）。

**为什么我们使用 join() 方法？**

一般情况下我们一般有多个线程，线程调度器调度线程，不保证线程的执行顺序。

我们来看一个例子，新建项目，复制如下代码：

这是 activity_main.xml 代码：

```
<?xml version="1.0" encoding="utf-8"?>

<androidx.constraintlayout.widget.ConstraintLayout
xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:app="http://schemas.android.com/apk/res-auto"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
tools:context=".MainActivity">

<Button
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:id="@+id/btn_without_join"
    app:layout_constraintTop_toTopOf="parent"
    android:text="Start Threads Without Join"/>
 <Button
     android:layout_width="match_parent"
     android:layout_height="wrap_content"
     android:id="@+id/btn_with_join"
     app:layout_constraintTop_toBottomOf="@id/btn_without_join"
     android:text="Start Threads With Join"/>
 <TextView
     android:layout_width="match_parent"
     android:layout_height="wrap_content"
     android:id="@+id/tv"
     app:layout_constraintTop_toBottomOf="@id/btn_with_join"
     />

 </androidx.constraintlayout.widget.ConstraintLayout> 
```

这是 MainActivity.java 的代码：

```
public class MainActivity extends AppCompatActivity {

TextView tv;
volatile  String threadName = "";
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    tv = findViewById(R.id.tv);
    Button btn_without_join = findViewById(R.id.btn_without_join);
    btn_without_join.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {
            withoutJoin();
        }
    });
    Button btn_with_join = findViewById(R.id.btn_with_join);
    btn_with_join.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {
            withJoin();
        }
    });
}
private void withoutJoin()
{
    tv.setText("");
    Thread th1 = new Thread(new MyClass2(), "th1");
    Thread th2 = new Thread(new MyClass2(), "th2");
    Thread th3 = new Thread(new MyClass2(), "th3");
    th1.start();
    th2.start();
    th3.start();
}
private void withJoin()
{
    tv.setText("");
    Thread th1 = new Thread(new MyClass2(), "th1");
    Thread th2 = new Thread(new MyClass2(), "th2");
    Thread th3 = new Thread(new MyClass2(), "th3");
    th1.start();
    try {
        th1.join();
    } catch (InterruptedException e) {
        e.printStackTrace();
    }
    th2.start();
    try {
        th2.join();
    } catch (InterruptedException e) {
        e.printStackTrace();
    }
    th3.start();
}
class MyClass2 implements Runnable{

    @Override
    public void run() {
        Thread t = Thread.currentThread();
        runOnUiThread(new Runnable() {
            public void run() {
                tv.setText(tv.getText().toString()+"\n"+"Thread started: "+t.getName());
            }
        });
        try {
            Thread.sleep(1000);
        } catch (InterruptedException ie) {
            ie.printStackTrace();
        }
        runOnUiThread(new Runnable() {
            public void run() {
                tv.setText(tv.getText().toString()+"\n"+"Thread ended: "+t.getName());
            }
        });

    }
}
} 
```

如果您按下第一个按钮（Start Threads without Join），这将是结果： [![在此处输入图像描述](https://i.stack.imgur.com/wc8pc.jpg)](https://i.stack.imgur.com/wc8pc.jpg)

如果您按下第二个按钮（Start Threads With Join），这将是结果： [![在此处输入图像描述](https://i.stack.imgur.com/trcUH.jpg)](https://i.stack.imgur.com/trcUH.jpg)

* * *

## 回答 #11

> 赞同：-3
> 
> 时间：2018-04-05T07:13:33.023

假设我们的主线程启动线程 t1 和 t2。现在，当调用 t1.join() 时，主线程会挂起自己，直到线程 t1 死亡然后恢复自己。类似地，当 t2.join() 执行时，主线程再次挂起自己，直到线程 t2 死亡然后恢复。

所以，这就是它的工作原理。

此外，这里并不真正需要 while 循环。**

# math - 如何从余数系统转换为混合基数系统？

> ID：15956233
> 
> 赞同：3
> 
> 时间：2013-04-11T18:33:33.280
> 
> 标签：math, numbers, modular-arithmetic, mixed-radix

我了解[残数系统](http://en.wikipedia.org/wiki/Residue_number_system)的概念和[混合基数系统](http://en.wikipedia.org/wiki/Mixed_radix)的概念，但我很难让我发现的任何转换方法在一个简单的案例研究中起作用。

我从 Knuth 的《计算机编程艺术》开始，但是这对转换的理论有点过多，一旦提到欧拉，我就迷路了。维基百科有一个关于这个主题的[好部分，我](http://en.wikipedia.org/wiki/Residue_number_system#Associated_mixed_radix_system)[在这里](http://mathbin.net/163024)和[这里](http://mathbin.net/163082)尝试过，但两次我都无法回到我开始时的号码。

我在这里找到了一篇好文章[(PDF)](http://www.liafa.univ-paris-diderot.fr/~cf/M2/wei.pdf)，我在[此处](http://mathbin.net/163080)浓缩了相关部分，但我不了解乘法逆元及其符号。具体来说，如何 y_2 = |(3 - 19)|(1/31)|_7|_7 = |5 * 5|_7 特别是如何 |1/31|_7 = 5

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T16:26:51.573

乘法逆元将针对模数（此处为 7）进行。由于模 7 是素数，因此每个数（模 7）都有一个倒数。特别是 31_7 = 3_7（因为 31 = 4*7 +3 - 对不起，如果我太说教了），它的倒数是 5，因为 3 * 5 = 15 = 1_7。所以我们可以写成 |1/31|_7 = 5。

现在

```
y_2 = |(3 - 19) |(1/31)|_7 |_7
    = | (-16) * 5 |_7
    = | 5 * 5 |_7            since -16 = (-3)*7 + 5
    = 4 
```

# ios - 添加 AdSupport.framework 后应用崩溃

> ID：15956234
> 
> 赞同：3
> 
> 时间：2013-04-11T18:33:33.837
> 
> 标签：ios, objective-c, ios5, ios6

嗨，我在启动时收到此错误：

```
dyld: Library not loaded: /System/Library/Frameworks/AdSupport.framework/AdSupport
  Referenced from: /Users/owner12/Library/Application Support/iPhone Simulator/5.1/Applications/823A0485-7443-4206-B9F5-A84C03DBFB89/BusinessPlan.app/BusinessPlan
  Reason: image not found 
```

我将该框架添加到目标 --> 构建阶段 --> 将二进制文件与库链接。

奇怪的是，这个框架开始出现在我的项目中文件所在主要区域的导航器中，而不是在项目/框架中。

有人知道如何解决这个问题吗？谢谢！

此外，我在“其他链接器标志”下的构建设置中添加了一些参数，它们看起来像这样：

![在此处输入图像描述](https://i.stack.imgur.com/lwup0.png)

但实际上它们应该是这样的：

```
-all_load *
-ObjC 
```

这可能是错误的原因吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-11T18:42:36.587

“引用自：/Users/owner12/Library/Application Support/iPhone Simulator/ **5.1** /”——AdSupport 不是[仅在 iOS 6.0 及更高版本中](https://developer.apple.com/library/ios/#releasenotes/General/WhatsNewIniOS/Articles/iOS6.html)可用吗？

# java - MediaPlayer 在 JavaFX 中陷入无限循环

> ID：15956235
> 
> 赞同：2
> 
> 时间：2013-04-11T18:33:39.807
> 
> 标签：java, javafx-2, javafx

我正在尝试从 JavaFX 媒体播放器中检索元数据。我创建了一个类，它将歌曲的所有元数据提取到字典中，然后将其添加到其他歌曲元数据的列表中。我一直在尝试在提取元数据时锁定此列表，但是每次我添加某种同步对象时，媒体播放器都会陷入循环。目前，这看起来像：

```
 Media track = new Media(f.toURI().toString());          
        MediaPlayer mp = new MediaPlayer(track);
        while(mp.getStatus() != Status.READY) {
            // Wait until ready
            try {
                Thread.sleep(1000);

            }
            catch (InterruptedException e) {
                e.printStackTrace();

            }
            System.out.println(mp.getStatus().toString());
            // Check for errors
            if (mp.getError() != null) {
                System.out.println(mp.getError());
                try {
                    Thread.sleep(10000);
                }
                catch (InterruptedException e) {
                    e.printStackTrace();

                }

            }

        }

        // Construct dictionary and add it to this.db
        Hashtable<String, String> entry = new Hashtable<String, String>();
        for (String key : mp.getMedia().getMetadata().keySet()) {
            entry.put(key, mp.getMedia().getMetadata().get(key).toString());

        }
        if (entry != null) {
            entry.put("file_path", mp.getMedia().getSource());
            db.add(entry);
            System.out.println(getByIndex(0).toString());

        } 
```

状态打印总是打印 UNKNOWN，并且不会抛出任何错误。知道这里可能会发生什么吗？谢谢！

编辑-应该提到，我要播放的媒体是 MP3 文件，它们在我的代码的不同部分中工作（所以，编解码器不是问题）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T20:00:52.740

您正在暂停 JavaFX 应用程序线程，以便它可以做任何事情。

而不是 while true with thread sleep 构造，而是为媒体播放器提供一个[onReady](http://docs.oracle.com/javafx/2/api/javafx/scene/media/MediaPlayer.html#onReadyProperty)处理程序，并在播放器告诉您它准备好时查询和处理元数据。

# c# - 使用计数器在 c# 中将行批量提交到数据库

> ID：15956236
> 
> 赞同：0
> 
> 时间：2013-04-11T18:33:40.193
> 
> 标签：c#, sql-server, database

我正在用 C# 开发一个文件解析器，这样我就有一个包含很多行的文件。我想将其写入数据库。

我创建了一个循环，在其中读取文件并发出插入。

但是，我想做的是读取 100 行然后提交所有 100 行，然后读取下 100 行并提交它们，依此类推。

我的问题（有点概念性）是如何找出最后一组行，因为它可能小于 100。

例如，如果我的文件有 550 行，我可以读取 5 块 100 并在行计数器上使用模运算符提交它们，但最后一批 50 会发生什么？

这方面的任何想法都将受到高度赞赏。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T18:43:01.210

在这里顶一下我的想法：

第一个选项，快速计算'\n'，从而获得行数。然后，以 2 的倍数读取块，使得结果非常接近行数，例如如果存在 501 行，则读取 250 和 250 的块。然后只剩下 1 行。首次运行代码时，请检查奇数或偶数。如果奇数，记得提交最后一行，否则如果行数是偶数，则不需要对最后一行进行补偿。希望这可以帮助。

PS：将数字除以2的倍数后，如果很大，可以进一步除以2（分而治之！）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T22:27:10.567

大概是这样的吧？以下是伪代码：

```
int rowCount = 0;
while more records to read
{
   // Get record
   // Parse record
   // Do something with results

   if(++rowCount % 100 == 0)
   {
      // Commit
      rowCount = 0;
   }
}
// If you have 0 records, you just did a commit (unless you had zero records to read,
// but I assume you can code your way around that!)  So you only need a final commit 
// if you had more than 0 records still uncommitted. 

if(rowCount > 0) 
{
   // Commit remaining records
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T20:29:49.440

如果您的 read 函数在没有其他内容可读取时返回 false。那么你可以试试这个。

```
int i = 1;
while (read())
{
     if (i % 100 == 0)
     {
        for int (j = 0; j < 100; j++)
        { 
            write();
        }
     }
     i++;
}
for (int j = 0; j < i % 100; j++)
{
     write();
} 
```

# xcode - 在 XCode 4 中使用 Poco 编译时出错

> ID：15956239
> 
> 赞同：1
> 
> 时间：2013-04-11T18:33:45.677
> 
> 标签：xcode, poco-libraries

我正在开发一个项目，其中包括一个使用 Poco 库构建的项目。当我尝试编译项目时，XCode 给了我许多与 STL 相关的错误。在互联网上进行了一些搜索后，我能够推断出包括 Poco 可能是导致此问题的原因，但没有关于如何解决此问题的答案。

以下是错误：

> /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.8.sdk/usr/include/c++/4.2.1/bits/stl_algobase.h:298:9：没有成员命名命名空间“std”中的“memmove”
> 
> /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.8.sdk/usr/include/c++/4.2.1/bits/stl_algobase.h:321:7：使用未声明标识符“ostreambuf_iterator”
> 
> /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.8.sdk/usr/include/c++/4.2.1/bits/stl_algobase.h:321:27: '_CharT'不引用值
> 
> /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.8.sdk/usr/include/c++/4.2.1/bits/stl_algobase.h:321:35：预期不合格- ID
> 
> /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.8.sdk/usr/include/c++/4.2.1/bits/stl_algobase.h:326:9：使用未声明标识符“ostreambuf_iterator”
> 
> /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.8.sdk/usr/include/c++/4.2.1/bits/stl_algobase.h:326:29: '_CharT'不引用值
> 
> /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.8.sdk/usr/include/c++/4.2.1/bits/stl_algobase.h:326:37：预期不合格- ID
> 
> /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.8.sdk/usr/include/c++/4.2.1/bits/stl_algobase.h:331:5：变量'__copy_aux ' 声明为模板
> 
> /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.8.sdk/usr/include/c++/4.2.1/bits/stl_algobase.h:331:16：使用未声明标识符“istreambuf_iterator”
> 
> /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.8.sdk/usr/include/c++/4.2.1/bits/stl_algobase.h:331:36: '_CharT'不引用值
> 
> /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.8.sdk/usr/include/c++/4.2.1/bits/stl_algobase.h:331:43：预期表达式
> 
> /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.8.sdk/usr/include/c++/4.2.1/bits/stl_algobase.h:407:18：使用未声明标识符“ostreambuf_iterator”
> 
> /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.8.sdk/usr/include/c++/4.2.1/bits/stl_algobase.h:407:38: '_CharT'不引用值
> 
> /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.8.sdk/usr/include/c++/4.2.1/bits/stl_algobase.h:407:46：预期不合格- ID
> 
> /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.8.sdk/usr/include/c++/4.2.1/bits/stl_algobase.h:446:9：未命名成员命名空间“std”中的“memmove”
> 
> /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.8.sdk/usr/include/c++/4.2.1/bits/stl_algobase.h:600:10：没有成员命名命名空间“std”中的“memset”
> 
> /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.8.sdk/usr/include/c++/4.2.1/bits/stl_algobase.h:608:10：没有成员命名命名空间“std”中的“memset”
> 
> /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.8.sdk/usr/include/c++/4.2.1/bits/stl_algobase.h:616:10：没有成员命名命名空间“std”中的“memset”
> 
> /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.8.sdk/usr/include/c++/4.2.1/bits/stl_algobase.h:908:31：没有成员命名命名空间“std”中的“memcmp”

任何帮助将不胜感激。我应该注意，我没有直接调用 Poco 库，而是来自其他项目的一些代码引用了它。

# push-notification - Azure 移动服务 Toast 通知

> ID：15956243
> 
> 赞同：0
> 
> 时间：2013-04-11T18:34:16.387
> 
> 标签：push-notification, toast, mpns, azure-mobile-services

关于为什么我在任何手机中都看不到 toast 通知的任何想法？我可以成功接收并看到磁贴翻转通知，但不能看到 toast。

在日志中，我可以看到 toast 作为接收状态，我正在使用脚本发送通知。

在应用程序中，我无法在 ShellToastNotificationReceived 事件中捕获任何内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T18:49:19.577

好的，我做了两件事：重新启动手机并在发布中部署，我认为前者是问题：S

# c# - Gridview 初始化后 TH/TD 为空

> ID：15956248
> 
> 赞同：0
> 
> 时间：2013-04-11T18:34:34.087
> 
> 标签：c#, asp.net, gridview

```
<asp:GridView ID="GridView_Stores" runat="server" OnRowDataBound="GridView1_RowDataBound" ShowFooter="True" AllowSorting="false" HTMLEncoded="false" AutoGenerateColumns="true" DataSourceID="myDataSource" ShowHeaderWhenEmpty="True"/>... 
```

无论源/连接/自动生成与否，正文标题或项目模板中的第一行始终包含空白`<tr><th scope="col">`或`<tr><td>`；它不会结束，也不会终止。我找不到删除的方法。

```
 protected void GridView1_RowDataBound(object sender, GridViewRowEventArgs e) 
  {
    string ptn = "$#,###;<span style='color:rgb(255,0,0);'>($#,###)</span>;-";
    if (e.Row.RowType == DataControlRowType.DataRow) 
    {
      SalesTotal += Convert.ToInt32(DataBinder.Eval(e.Row.DataItem, "sales"));
      RentalTotal += Convert.ToInt32(DataBinder.Eval(e.Row.DataItem, "rental"));
      PartsTotal += Convert.ToInt32(DataBinder.Eval(e.Row.DataItem, "parts"));
      ServiceTotal += Convert.ToInt32(DataBinder.Eval(e.Row.DataItem, "service"));
      OverallTotal += Convert.ToInt32(DataBinder.Eval(e.Row.DataItem, "total"));
    }
    if (e.Row.RowType == DataControlRowType.Footer) 
    {
      Literal TtalSales = (Literal)e.Row.FindControl("TtalSales");
      TtalSales.Text = SalesTotal.ToString(ptn);
      Literal TtalRental = (Literal)e.Row.FindControl("TtalRental");
      TtalRental.Text = RentalTotal.ToString(ptn);
      Literal TtalParts = (Literal)e.Row.FindControl("TtalParts");
      TtalParts.Text = PartsTotal.ToString(ptn);
      Literal TtalService = (Literal)e.Row.FindControl("TtalService");
      TtalService.Text = ServiceTotal.ToString(ptn);
      Literal TtalTotal = (Literal)e.Row.FindControl("TtalTotal");
      TtalTotal.Text = OverallTotal.ToString(ptn);
    }
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T18:38:45.183

您可以手动定义标题列：

```
<asp:GridView ID="GridView_Stores" runat="server" OnRowDataBound="GridView1_RowDataBound" ShowFooter="True" AllowSorting="false" HTMLEncoded="false" AutoGenerateColumns="false" DataSourceID="myDataSource" ShowHeaderWhenEmpty="true">
    <Columns>
        <asp:BoundField HeaderText="Sales Total" />
        <asp:BoundField HeaderText="Rental Total" />
        <asp:BoundField HeaderText="Parts Total" />
        <asp:BoundField HeaderText="Service Total" />
        <asp:BoundField HeaderText="Overall Total" />
    </Columns>
</asp:GridView> 
```

# ruby - 是否可以重新定义“描述”？

> ID：15956249
> 
> 赞同：0
> 
> 时间：2013-04-11T18:34:34.657
> 
> 标签：ruby, rspec, dsl

有什么方法可以重新定义`describe`，例如，我可以写

```
new_describe MyModule::MyClass do
  it "does this" do
  end
  it "does that" do
  end
end 
```

代替

```
describe "something" do
  def app
    MyModule::MyClass
  end
  it "does this" do
  end
  it "does that" do
  end
end 
```

?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T18:43:01.540

您已经可以使用可用的语法描述一个特定的类：

```
describe MyModule::MyClass do
  it "is available as described_class" do
    described_class.should eq(MyModule::MyClass)
  end
end 
```

更多信息：[Rspec](https://www.relishapp.com/rspec/rspec-core/docs/metadata/described-class)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T03:21:53.223

我想知道[David Chelimsky 的这篇博文](http://blog.davidchelimsky.net/2012/05/13/spec-smell-explicit-use-of-subject/)是否在谈论您正在尝试做的事情？如果是这样：

```
describe MyModule::MyClass do
  subject(:app){ MyModule::MyClass.new }
  it { should_not be_nil }
  it "does that" do
    app.that == "that"
  end
end 
```

# android - 在 android 字典应用程序中使用 sqlite3 fts3 片段功能

> ID：15956250
> 
> 赞同：1
> 
> 时间：2013-04-11T18:34:34.760
> 
> 标签：android, sqlite, android-cursor, fts3

我已经使用 sqlite3 fts3 虚拟表构建了一个 android 字典应用程序。我希望能够使用 fts3 片段函数执行搜索，如下所示：

从 my_dictionary WHERE my_dictionary MATCH query_string 中选择片段（my_dictionary）；

我无法在 android 上使用 sqlite3 执行这样的搜索——我收到有关我在光标中传递 sqlite 的列数的错误消息。我试图通过使用 rawQuery 来执行这个搜索，即明确地写出查询；并将游标查询的“String[] columns”变量分配给“snippet(my_dictionary)”。

所以我的问题是：android上的sqlite光标是否必须包含所有列才能正确执行（很确定答案是“是”）？有没有人让 fts3 snippet() 搜索在 android 上正常工作？如果是这样，你到底是怎么做到的？

感谢您对这个相当晦涩的问题的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T16:13:26.227

更新——好的，我已经让它工作了。导致该错误的直接原因是我没有更改我的代码操作/格式化光标内容的方式到我的列表视图适配器的门。我寄给它一列，而它却期待着几列。呃。

因此，如果有人真的想知道，您实际上可以将 fts3 片段函数与 android sqlite 一起使用*。*是的，标准的 sqlite3 语法工作得很好。它是否真的对显示搜索结果有用是另一回事。

# sql - 将 IF 转移到 WHERE 子句中

> ID：15956252
> 
> 赞同：2
> 
> 时间：2013-04-11T18:34:38.463
> 
> 标签：sql, sql-server

以下作品

```
IF OBJECT_ID('TEMPDB..#Users') IS NOT NULL 
BEGIN 
    DROP TABLE #Users 
END;

CREATE TABLE #Users(UserAccountKey INT);

IF @Period IN ('Overall', 'Week1', 'Week2', 'Week3', 'Week4') 
BEGIN
   INSERT INTO #Users
      SELECT UserAccountKey
      FROM XXX c
      WHERE c.Name NOT IN ('X', 'Y', 'Z', 'J', 'Q')
      GROUP BY UserAccountKey
END
ELSE
BEGIN
   INSERT INTO #Users
      SELECT UserAccountKey
      FROM XXX c
      WHERE c.Name NOT IN ('X', 'Y')
      GROUP BY UserAccountKey;
END; 
```

是否可以将其缩短为单个 sql 语句？条件可以`IF`转移到`WHERE`条款吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T21:01:25.437

可以再简化一点：

```
 INSERT INTO #Users
  SELECT UserAccountKey
  FROM XXX c
  WHERE c.Name NOT IN ('X', 'Y')
        OR (@Period IN ('Overall', 'Week1', 'Week2', 'Week3', 'Week4')
             AND c.Name NOT IN ('Z', 'J', 'Q'))
  GROUP BY UserAccountKey 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T18:42:13.453

处理此问题的最佳方法是将 转换`if`为单个条件。我相信这将提供相同的结果：

```
 INSERT INTO #Users
      SELECT UserAccountKey
      FROM XXX c
      WHERE (@Period NOT IN ('Overall', 'Week1', 'Week2', 'Week3', 'Week4')
             and c.Name NOT IN ('X', 'Y'))
         or (@Period IN ('Overall', 'Week1', 'Week2', 'Week3', 'Week4')
            and c.Name NOT IN ('X', 'Y', 'Z', 'J', 'Q'))
      GROUP BY UserAccountKey 
```

* * *

这一直困扰着我，因为我认为它应该可以简化，但我不知道如何。我最初的答案与@Pirion 的相同，但我改变了它，因为我意识到它不等同于原始脚本。下面是一个简化的脚本，我认为它提供了与我之前的答案相同的功能：

```
 INSERT INTO #Users
      SELECT UserAccountKey
      FROM XXX c
      WHERE not (c.Name IN ('X', 'Y')
                 or (@Period IN ('Overall', 'Week1', 'Week2', 'Week3', 'Week4')
                     and c.Name IN ('Z', 'J', 'Q'))
      GROUP BY UserAccountKey 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-11T18:43:19.557

```
INSERT INTO #Users
SELECT userAccountKey
FROM XXX c
WHERE ( c.Name NOT IN ('X','Y','Z','J','Q')
AND @Period IN ('Overall','Week1','Week2','Week3','Week4'))

OR
(
c.Name NOT IN ('X','Y')
AND @Period NOT IN ('Overall','Week1','Week2','Week3','Week4')
)
GROUP BY UserAccountKey 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-11T18:41:06.973

```
INSERT INTO #Users
SELECT userAccountKey
FROM XXX c
WHERE c.Name NOT IN ('X','Y','Z','J','Q')
AND @Period IN ('Overall','Week1','Week2','Week3','Week4')
GROUP BY UserAccountKey

INSERT INTO #Users
SELECT UserAccountKey
FROM xxx C
WHERE c.Name NOT IN ('X','Y')
AND @Period NOT IN ('Overall','Week1','Week2','Week3','Week4')
GROUP BY UserAccountKey 
```

# ubuntu - Heroku - 权限被拒绝？

> ID：15956258
> 
> 赞同：1
> 
> 时间：2013-04-11T18:35:08.087
> 
> 标签：ubuntu, heroku

当我尝试恢复备份时，出现以下错误： Permission denied - /var/www/.netrc

我想知道如何解决？提前致谢！

> ```
> Error:       Permission denied - /var/www/.netrc (Errno::EACCES)
> Backtrace:   /usr/local/heroku/vendor/gems/netrc-0.7.7/lib/netrc.rb:37:in `read'
>              /usr/local/heroku/vendor/gems/netrc-0.7.7/lib/netrc.rb:37:in `read'
>              /usr/local/heroku/lib/heroku/auth.rb:119:in `netrc'
>              /usr/local/heroku/lib/heroku/auth.rb:143:in `read_credentials'
>              /usr/local/heroku/lib/heroku/auth.rb:84:in `get_credentials'
>              /usr/local/heroku/lib/heroku/auth.rb:74:in `password'
>              /usr/local/heroku/lib/heroku/auth.rb:17:in `api'
>              /usr/local/heroku/lib/heroku/command/base.rb:40:in `api'
>              /usr/local/heroku/lib/heroku/command/pgbackups.rb:204:in `config_vars'
>              /usr/local/heroku/lib/heroku/command/pgbackups.rb:208:in`pgbackup_client'
>              /usr/local/heroku/lib/heroku/command/pgbackups.rb:53:in `url'
>              /usr/local/heroku/lib/heroku/command.rb:206:in `run'
>              /usr/local/heroku/lib/heroku/cli.rb:28:in `start'
>              /usr/bin/heroku:25:in `<main>'
> 
> Command:     heroku pgbackups:url -a sony-staging-hannibal-mobovivo
> Version:     heroku-toolbelt/2.36.1 (x86_64-linux) ruby/1.9.2 
> ```

**解决方案** 根据以下说明重新安装 heroku-toolbelt：

[https://toolbelt.heroku.com/](https://toolbelt.heroku.com/)

解决了这个问题。再次感谢你！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-25T12:01:40.723

尝试使用

须藤heroku登录

它在 debian linux 上对我有用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T20:44:24.480

尝试使用`$ heroku update`. 当前版本是 2.37

# magento - 从 magento 结帐中删除某些州/省

> ID：15956259
> 
> 赞同：2
> 
> 时间：2013-04-11T18:35:09.610
> 
> 标签：magento, checkout

我想从magento 1.12.0.2结帐（onestepcheckout）页面中删除某些州/省，例如“美属萨摩亚”我尝试更改“/app/code/local/Mage/Directory/”中的Data.php文件

```
 public function getRegionJson()
    {
        $exclude_regions = array ('AS','FM');
        Varien_Profiler::start('TEST: '.__METHOD__);
        if (!$this->_regionJson) 
        {
            $cacheKey = 'DIRECTORY_REGIONS_JSON_STORE'.Mage::app()->getStore()->getId();
            if (Mage::app()->useCache('config')) {
            $json = Mage::app()->loadCache($cacheKey);
        }
        if (empty($json)) 
        {
            $countryIds = array();
            foreach ($this->getCountryCollection() as $country) 
            {
            $countryIds[] = $country->getCountryId();
            }
        $collection = Mage::getModel('directory/region')->getResourceCollection()
        ->addCountryFilter($countryIds)
        ->load();
        $regions = array();
        foreach ($collection as $region) {
        $rg = $region->getCode();
        //if ($rg!='AL'){
        if(!in_array($rg, $exclude_regions)) {
        if (!$region->getRegionId()) {
        continue;
        }
        $regions[$region->getCountryId()][$region->getRegionId()] = array(
        'code' => $region->getCode(),
        //'name' => $region->getName()
        'name' => $this->__($region->getName())
        );
        }
        }
        $json = Mage::helper('core')->jsonEncode($regions);
        if (Mage::app()->useCache('config')) {
        Mage::app()->saveCache($json, $cacheKey, array('config'));
        }
        }
        $this->_regionJson = $json;
        }
        Varien_Profiler::stop('TEST: '.__METHOD__);
        return $this->_regionJson;
    } 
```

但没有任何运气，任何帮助将不胜感激如何做到这一点

先感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T18:25:14.320

上面的代码工作正常，我只需要刷新 Magento 缓存存储。

# workspace - 在 Accurev 上共享工作区

> ID：15956261
> 
> 赞同：2
> 
> 时间：2013-04-11T18:35:09.713
> 
> 标签：workspace, accurev

我是 Accurev 的新手。我在工作区工作，我看到一个问题，我需要团队成员的帮助来查看该问题。让其他团队成员通过 Accurev 访问我工作区中的文件的最简单方法是什么？

使用 Subversion，任何人都可以签出我的分支并查看我的更改、构建代码并重现问题。但是使用 Accurev，我不知道如何做同样的事情。

阅读 Accurev 文档，它看起来就像一个工作区充当流，但不能在开发人员之间共享。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T18:41:34.850

我使用 Accurev 已经有几个月了，但如果我没记错的话，您的团队成员可以浏览您的工作区。如果您正在使用 GUI 工具浏览可用的流，则底部应该有一个设置来显示所有用户的工作区。这将允许他们至少浏览您的工作区。如果您希望其他开发人员能够更改这些文件，则必须将它们推送到流中。如有必要，您始终可以创建一个新流并重新设置您的工作区。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-16T13:25:48.137

如果您在工作区中保留了任何文件，则其他用户可以在其工作区中查看该元素的“版本浏览器”并查看您保留的版本并查看您的更改。

或者，您可以创建一个新流，将您的工作区重新设置为该流，并将您的更改推广到流中。

# python - 使用 Python 在 Twitter 1.1 中发出仅限应用程序的请求

> ID：15956270
> 
> 赞同：5
> 
> 时间：2013-04-11T18:35:48.757
> 
> 标签：python, twitter, oauth-2.0, http-post

我想使用仅应用程序身份验证访问 Twitter 1.1 搜索端点。为此，我正在尝试在此处实施 Twitter API 文档中给出的步骤 - [https://dev.twitter.com/docs/auth/application-only-auth](https://dev.twitter.com/docs/auth/application-only-auth) （滚动到“发出仅限应用程序的请求”）

我无法在第 2 步中获取“承载令牌”。当我运行以下代码时，我收到“响应：302 Found”，这是对位置的重定向：[https](https://api.twitter.com/oauth2/token) ://api.twitter.com/oauth2/token 理想情况下应该是“200 OK”

```
import urllib
import base64
import httplib

CONSUMER_KEY = 'my_key'
CONSUMER_SECRET = 'my_secret'

encoded_CONSUMER_KEY = urllib.quote(CONSUMER_KEY)
encoded_CONSUMER_SECRET = urllib.quote(CONSUMER_SECRET)

concat_consumer_url = encoded_CONSUMER_KEY + ":" + encoded_CONSUMER_SECRET

host = 'api.twitter.com'
url = '/oauth2/token'
params = urllib.urlencode({'grant_type' : 'client_credentials'})
req = httplib.HTTP(host)
req.putrequest("POST", url)
req.putheader("Host", host)
req.putheader("User-Agent", "My Twitter 1.1")
req.putheader("Authorization", "Basic %s" % base64.b64encode(concat_consumer_url))
req.putheader("Content-Type" ,"application/x-www-form-urlencoded;charset=UTF-8")
req.putheader("Content-Length", "29")
req.putheader("Accept-Encoding", "gzip")

req.endheaders()
req.send(params)

# get the response
statuscode, statusmessage, header = req.getreply()
print "Response: ", statuscode, statusmessage
print "Headers: ", header 
```

我不想使用任何 Twitter API 包装器来访问它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T00:55:54.507

问题是必须使用 HTTPS 连接调用 URL。请检查修改后的代码是否有效。

```
import urllib
import base64
import httplib

CONSUMER_KEY = 'my_key'
CONSUMER_SECRET = 'my_secret'

encoded_CONSUMER_KEY = urllib.quote(CONSUMER_KEY)
encoded_CONSUMER_SECRET = urllib.quote(CONSUMER_SECRET)

concat_consumer_url = encoded_CONSUMER_KEY + ":" + encoded_CONSUMER_SECRET

host = 'api.twitter.com'
url = '/oauth2/token/'
params = urllib.urlencode({'grant_type' : 'client_credentials'})
req = httplib.HTTPSConnection(host)
req.putrequest("POST", url)
req.putheader("Host", host)
req.putheader("User-Agent", "My Twitter 1.1")
req.putheader("Authorization", "Basic %s" % base64.b64encode(concat_consumer_url))
req.putheader("Content-Type" ,"application/x-www-form-urlencoded;charset=UTF-8")
req.putheader("Content-Length", "29")
req.putheader("Accept-Encoding", "gzip")

req.endheaders()
req.send(params)

resp = req.getresponse()
print resp.status, resp.reason 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-28T13:55:12.143

虽然这有点晚了，但您可能会在这个 github 页面上找到一些帮助。我已经开始为 twitter 应用程序唯一的身份验证方法创建一个库。

[http://jonhurlock.github.io/Twitter-Application-Only-Authentication-OAuth-Python/](http://jonhurlock.github.io/Twitter-Application-Only-Authentication-OAuth-Python/)

# javascript - 使用 Kineticjs 在一个舞台上绘制多个图形？

> ID：15956272
> 
> 赞同：1
> 
> 时间：2013-04-11T18:35:52.530
> 
> 标签：javascript, html, canvas, kineticjs

我想通过不同的按钮点击在画布上绘制多个图形。

HTML

```
<body>

<div id="container">
</div>

<div id="option">
<button value="rect" onclick="rect();">rect</button>
<button value="circle" onclick="circle();">circle</button>
</div>
</body> 
```

Javascript：

```
var stage = new Kinetic.Stage({
        container: 'container',
        width: 500,
        height: 500
      });
var layer = new Kinetic.Layer();

function rect(){
var redLine = new Kinetic.Line({
        points: [100, 5, 100, 300, 450,300],
        stroke: 'black',
        strokeWidth: 3,
        lineCap: 'square',
        lineJoin: 'mitter'
      });
// add the shape to the layer

layer.add(redLine);
// add the layer to the stage
stage.add(layer);
}

function circle(){
      var wedge = new Kinetic.Wedge({
        x: stage.getWidth() / 2,
        y: stage.getHeight() / 2,
        radius: 70,
        angleDeg: 60,
        fill: 'red',
        stroke: 'black',
        strokeWidth: 4,
        rotationDeg: -120
      });

      // add the shape to the layer
      layer.add(wedge);

      // add the layer to the stage
      stage.add(layer);
} 
```

但由于未定义层和阶段，它会产生错误。我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T13:55:16.307

未定义阶段和层的原因是它们超出了范围，或者您的代码在它们首先被实例化之前就被破坏了。

首先，确保你的 stage 和 layer 在任何函数之外；全球范围。

其次，通过单击按钮调用您的函数“circle()”和“rect()”，我怀疑这会破坏您的代码。您想从内联中删除此 onclick 处理程序：

```
 <button value="circle" onclick="circle();">circle</button> 
```

创建舞台后，使用 javascript 分配 onclick。您可以使用 jQuery 轻松分配处理程序。所以你的代码应该是这样的：

HTML

```
<button value="rect" id='rect'>rect</button>  //assign an id to your button 
```

JS

```
var stage = new Kinetic.Stage({
    container: 'container',
    width: 500,
    height: 500
  });
var layer = new Kinetic.Layer();

$('#yourButtonId').click(function(){ // button id here would be '#rect' if you use the id above
    rect();
}); 
```

# ios - 迁移restkit v0.20

> ID：15956275
> 
> 赞同：0
> 
> 时间：2013-04-11T18:36:02.513
> 
> 标签：ios, restkit

迁移到 v0.20 并且看起来 RKClient 已弃用。

知道如何设置用户名和密码吗？我曾经在 1.0 中这样做过

```
[[RKClient sharedClient] setUsername:@"username"];
[[RKClient sharedClient] setPassword:@"password"]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T13:56:32.760

而不是 RKClient RestKit 0.20 现在使用 AFNetworking 和它的客户端方法。但是，您可以通过调用 RKObjectManager 的客户端`HTTPClient`，因此设置授权标头应该看起来像

```
[[RKObjectManager sharedManager].HTTPClient setAuthorizationHeaderWithUsername:@"username" 
                                                                      password:@"password"]; 
```

对于所有其他方法（此处未列出授权），请查看[wiki 文档](https://github.com/RestKit/RestKit/wiki/Upgrading-from-v0.10.x-to-v0.20.0)。

# php - 使用 jquery 中的表单操作转到 php

> ID：15956276
> 
> 赞同：0
> 
> 时间：2013-04-11T18:36:04.740
> 
> 标签：php, jquery

如何使用 html 表单中的操作，以便我可以发送表单中的所有数据

我试过`$("#formupload").attr('action')`似乎不起作用

这是我的代码：

```
$(".clickupload").click(function () {
        $("#dialog-form").dialog("open");
    });
    $("#dialog-form").dialog({
        autoOpen: false,
        closeOnEscape: true,
        title: "Upload Picture",
        width: 400,
        height: 300,
        modal: true,
        buttons: {
            Cancel: function () {
                $(this).dialog("close");
            },
            Upload: function () {
                $(document).ready(function () {

                    $("#formupload").attr('action');
                });

    }

        }
    });

<div id="dialog-form">
<form id="formupload" action="ProfileImages/FileUpload.php" method="POST" enctype="multipart/form-data">
<input  type="file" name="uploadProfilePicture"/>
</form>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T18:38:37.993

你是说最终`$("#formupload").sumbit();`？你正在做的是读取属性然后什么都不做？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T18:47:04.257

bweobi 说了什么，并最终将所有 jQuery 初始化内容放在文档上，以确保在将事件处理程序添加到其元素之前，该文档已全部初始化：

```
(function($) { // Allows you to create variables locally so
               // there are no conflict with other stuffs.

    $(document).ready(function() {

        // You can name jQuery variables with a dollar so you can easily make
        // the difference betwen jQuery and non-jquery objects.
        $dialogForm = $('#dialog-form'); // Half queries, double speed.

        $(".clickupload").click(function () {
            $dialogForm.dialog("open");
        });

        $dialogForm..dialog({
            autoOpen:      false,
            closeOnEscape: true,
            title:         "Upload Picture",
            width:         400,
            height:        300,
            modal:         true,
            buttons: {
                Cancel: function () {
                    $(this).dialog("close");
                },
                Upload: function () {
                    $("#formupload").submit();
                }
            }
        });

    });

})(jQuery); // Alows you not to use $ in global scope in case
            // you use multiple libraries that use the $. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T18:39:45.350

尝试简单`$("#formupload").submit()`

# javascript - 用于 onblur 事件的 Javascript

> ID：15956283
> 
> 赞同：0
> 
> 时间：2013-04-11T18:36:40.457
> 
> 标签：javascript, asp.net, webmatrix, onblur

使用 webmatrix、asp.net 和 Javascript、sql server CE 构建注册表单。我正在为用户名文本框编写一个 onblur 事件。当焦点离开文本框时，它会检查数据库中是否存在现有用户名，如果是则显示标签。如下所示。代码不起作用，因为如果在“@{}”块内，则忽略 js 代码。它在“@{}”块之外工作正常，但我不能在那里给出条件。请帮帮我。

```
<html>
<head>
<script>
function RegUsernameLeave()
{
  @{
     regusername=Request.Form["regusername"];
     if(!regusername.IsEmpty())
      {
        var db = Database.Open("myshop");
        int usercount = db.QueryValue("select count(*) from webusers where username=@0",regusername);
        db.Close();
        if(usercount!=0){
        document.getElementById("msg").innerHTML="Username already exists";}
      }
   }
}
</script>
</head>
<body>
<label>Username:</label>
<p><input type="text" id="regusername" onblur="RegUsernameLeave()"/>
<label id="msg"></label></p>
</body>
 </html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T19:01:17.053

我在这里完全在黑暗中刺伤..但也许是这些方面的东西？

基本上 - 我假设任何 @{} 都打印到 JS - 所以如果我们可以执行服务器端代码并​​将其输出等于您的 JS 变量 userCount 那么您可以使用该 JS 变量进行检查并输出错误信息（如有必要）

```
@functions{ 
   public int GetUserCount() {
     string regusername = Request.Form["regusername"].ToString();
     if(!regusername.IsEmpty())
      {
        var db = Database.Open("myshop");
        int usercount = db.QueryValue("select count(*) from webusers where username='@0'",regusername);
        db.Close();
        return usercount;
      }
      return 0;
   }
}

function RegUsernameLeave()
{
    var userCount = @GetUserCount();

   if (userCount > 0)
   document.getElementById("msg").innerHTML="Username already exists";

} 
```

# xml - jquery xml加载和解析

> ID：15956284
> 
> 赞同：0
> 
> 时间：2013-04-11T18:36:42.033
> 
> 标签：xml, google-chrome, jquery, xml-parsing, get

Chrome 和 IE 不会加载或解析我的 xml。我在非本地服务器上测试它。Chrome 在错误函数中跳转。在FF上一切正常。

```
$.ajax({
        type: 'GET',
        url: XML_PATH,
        dataType: "xml",
        aSync: false,
        success: function onXMLloaded(xml) 
        {       
            console.log('Success');
            // loop for each item
            $(xml).find('item').each(function loopingItems(value){  
                // create an object
                var obj={urls:$(this).find("urls").text()};
                // push in object
                videos_array.push(obj);
            });
        },
        error: function() {
            console.log('Error');
        },
        complete: function() {
            console.log('Complete');
                    } 
```

有人有想法吗？非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T20:29:34.020

好的。以下是 ist 的工作原理：

> `console.log('Beginne XML zu laden'); $.ajax({ type: 'GET',
> url: XML_PATH, dataType: "text", aSync: false, success: function (text) { console.log('Success'); // 循环每个项目 $(text ).find('item').each(function loopingItems(value){ // 创建一个对象 var obj={urls:$(this).find("urls").text()}; // 推入对象videos_array.push(obj); }); },

`

DataType 是问题所在。现在工作正常:-) 谢谢大家！

# java - GWTTestCase：测试私有方法

> ID：15956288
> 
> 赞同：2
> 
> 时间：2013-04-11T18:36:52.997
> 
> 标签：java, gwt, reflection, junit, gwttestcase

我是 GWT / Java 的新手，需要一些关于如何解决这个（似乎应该是）简单问题的想法。

我有一个 GWT 对象，我正在尝试测试一个私有方法：

```
public class BarChart extends FlowPanel {

    public BarChart() {
        super();
        privateMethod();
    }

    privateMethod() { 
        //want to test this 
    }
} 
```

我尝试过 JUnit，但它需要是 GWTTestCase，因为该对象需要 GWT.create()，并且我尝试过反射，但 GWTTestCase 不支持它。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-11T19:28:23.847

我知道这不会是您正在寻找的答案，但是单元测试私有方法是不好的形式。

您可能应该重构您的代码，以便可以通过公共 API 测试/观察私有方法的效果。

由于您提供的代码示例很短，很难提供具体的策略，但我可以就用例做一些一般性的陈述。

测试私有方法的最佳方法是通过另一种公共方法。如果无法做到这一点，则以下条件之一为真：

1.  私有方法是不可达（死）代码
2.  您正在测试的课程附近有一种设计气味；私有方法仍然应该对类有可观察的影响
3.  您尝试测试的方法不应该是私有的；在这种情况下，也许改变方法的可见性是完全可以接受的。

[此外，您可以使用GWT UIBinder](https://developers.google.com/web-toolkit/doc/latest/DevGuideUiBinder)将 UI 代码与应用程序逻辑分开。分离出 UI 后，您可以使用 JUnit 测试来测试剩余的代码。GWTTestcases 仅适用于需要 GWT.create(...) 并且它们运行非常缓慢（与 junit 相比）的类，因此最好构造代码，以便可以使用 junit 完成大部分测试，然后使用 gwttestcase覆盖其余部分。如果你能实现这种结构，那么它为使用 easymock/mockito/reflection 等进行测试开辟了额外的途径。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-11T19:46:35.607

在 GWT 客户端（包括 GWTTestCase）中，您可以使用 JSNI 调用私有或受保护的方法，这被称为`violator pattern`

给定一个具有私有方法的类

```
package com.example;
public class MyClass {
  private MyObjectReturn myMethod(MyObjectParam param) {
     return null
  }
} 
```

创建一个 jsni 方法并访问它

```
native MyObjectReturn myViolatorMethod(MyClass instance, MyObjectParam param) /*-{
  return instance.@com.example.MyClass::myMethod(*)(param);
}-*/; 
```

# jquery - 怎样才能更好地编写这个 jQuery 脚本？

> ID：15956292
> 
> 赞同：0
> 
> 时间：2013-04-11T18:36:55.333
> 
> 标签：jquery, variables, href

下面是工作脚本。

```
<script type="text/javascript">
window.lang = new jquery_lang_js();
$(document).ready(function() {  
    window.lang.run();
 $(".jp").click(function (e) {
 e.preventDefault();      
    var $this = $(this);        
    var id = $this.attr('href');
    window.lang.change('jp');
});

 $(".en").click(function (e) {
 e.preventDefault();      
    var $this = $(this);        
    var id = $this.attr('href');
    window.lang.change('en');
});
});

</script>

<a href="#" class="en">Switch to English</a>
<a href="#" class="jp">Switch to Japanese</a> 
```

//////////////////////////////////

现在，在快速告诉我“如果它起作用了，那有什么问题？” 我还有几个课程要添加，所以我试图摆脱冗余。我知道如何将 href 与相同的函数结合起来，但在这里，每个类都有可变函数，我自己无法弄清楚。

这是我到目前为止所尝试的。

```
<script type="text/javascript">
window.lang = new jquery_lang_js();
$(document).ready(function() {  
    window.lang.run();
  $this.each(function(){ 
 $("a").click(function (e) {
 e.preventDefault();      
  // var $this = $(this);       
    var id = $this.attr('href');
    window.lang.change('jp');
    window.lang.change('en');
});
});
});

</script> 
```

这是行不通的。

评论说我应该在问问题之前先学习 jQuery 的基础知识是不是有点苛刻，因为我不能替换 var $this = $(this); 到 $this.each(function(){ 正确吗？

我是 jQuery 新手，我想通过在这里提问来学习。说我应该先学习基础知识并不是很有建设性。如果您没有帮助那么好，但是所有这些批评是为了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-11T18:46:43.173

我喜欢在这种场景中使用数据属性......

```
var lang = new jquery_lang_js();
$(function() {  
    lang.run();

    $(".lang").click(function (e) {
        var ln = $( this ).data( "lang" );

        if ( ln ) { 
            lang.change( ln );
        }

        e.preventDefault();
    });
});

<a href="#" class="lang" data-lang="en">Switch to English</a>
<a href="#" class="lang" data-lang="jp">Switch to Japanese</a> 
```

此外，`this`在这样的事件侦听器的回调中，about 将引用被单击的实际 DOM 元素。您可以获取该 DOM 元素并将其包装起来`$( this )`，它基本上为您提供了一个包含单击元素的 jQuery 对象。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-11T18:47:49.607

我想澄清一些关于`$this = $(this);`一般使用的事情，以及你对它的使用。

Using`$(this)`与`this`使用`$()`. 本质上， if`this`与 element 相同`span.test`，则`$(this)`相当于`$("span#test")`在您正在查看的“索引”处获取（我松散地使用“索引”一词）。

现在，这在性能方面意味着什么？这意味着每次使用时，`$(this)`您都在从中获取`this`和创建对象。这样做通常比最初查找`$(this)`并将其设置为变量（例如`$this`. *但是*`$(this)`，（它来了！）在您的情况下，每次声明它时，您只使用一次。由于程序`$(this)`无论如何都必须执行一次（因为它必须找到它以将其设置为变量或立即使用），*在您的情况下*，最好不要使用`$this`，而是跳过创建和使用变量（这实际上会使您的情况更加昂贵），而是`$(this)`直接使用 , 。

但是，通常情况下，您应该使用`$this`. 为了理智起见，当我编码时，我总是使用`$this`, 最初，并在我完成后删除它，如果有必要的话。

# jquery - 无效的 json 原语：将唯一标识符传递给 asmx Web 方法

> ID：15956294
> 
> 赞同：1
> 
> 时间：2013-04-11T18:37:02.523
> 
> 标签：jquery, asp.net, ajax, json

我终于让我的网络方法有点工作了，但现在我正试图让它只返回 json 对象。我的javascript方法如下：

```
function PopulateRooms(e) {
           var idx = e.selectedIndex;
           var dcId = JSON.stringify('{ dataCenterId:' + e.options[idx].value + '}', null, 2);
           var pageUrl = '<%=ResolveUrl("~/WebService/AVWebService.asmx")%>';

           $.ajax({
               url: pageUrl + '/GetRooms',
               type: 'post',
               contentType: 'application/json; charset=utf-8',
               dataType: 'json',
               data: dcId,
               success: OnRoomsReceived,
               error: OnErrorCall
           });
       } 
```

dcId 是唯一标识符。我只针对新浏览器，所以我读到我不需要另一个库，我可以使用 JSON.stringify() 方法。但是当我这样做时，我得到一个错误 500：无法将类型为 \u0027\System.String\u0027 的对象转换为类型 ...IDictionary。

但是，如果我将 JSON.stringify() 取出，我会收到 Invalid JSON primitive 错误。如何将 id 传递给我的 web 方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T18:41:47.407

您正在尝试将 js 字符串转换为 json，您想要的是将对象转换为 json，

```
var dcId = JSON.stringify({ dataCenterId: e.options[idx].value }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T18:42:52.017

我不确定你是否需要 stringify，因为 $.Ajax 数据属性需要一个 javascript 对象：

```
var dcId = { dataCenterId: e.options[idx].value }; 
```

# c - 时代和wireshark捕获

> ID：15956296
> 
> 赞同：1
> 
> 时间：2013-04-11T18:37:09.870
> 
> 标签：c, wireshark, epoch, wireshark-dissector

我有一个 .pkt 嗅探器捕获。当我从我的 C 应用程序读取捕获中的每个数据包时，我观察到附加了一个无线电标头。无线电报头包含每个数据包的纪元时间。我想以毫秒为单位找出两个数据包之间的时间差。我不确定如何区分两个纪元值并找出以毫秒为单位的时间差。请帮我解决一下这个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-23T07:27:39.130

> 我有一个 .pkt 嗅探器捕获。

什么是“.pkt 嗅探器捕获”？您是否使用 Wireshark 捕获数据包？如果是这样，那么它是 pcap 或 pcap-ng 捕获。

> 无线电报头包含每个数据包的纪元时间。

在大多数嗅探器格式中，数据包的时间戳是“记录头”的一部分，而不是无线电信息头的一部分。对于 802.11 捕获，某些捕获文件格式可能会提供包含 802.11 定时同步功能计时器的无线电信息标头，但该计时器没有指定的时期。

数据包时间戳的纪元取决于捕获文件格式。pcap 和 pcap-ng 使用 1970 年 1 月 1 日 00:00:00 UTC 的 UN*X 纪元，因为 pcap 最初用于 UN*X 并且 pcap-ng 受 pcap 的影响。例如，其他文件格式可能使用 1601 年 1 月 1 日 00:00:00 "UTC" 的 Windows FILETIME 纪元（使用预测的[公历](https://en.wikipedia.org/wiki/Proleptic_Gregorian_Calendar)）或其他时间来源。

但如果你想要的只是

> 以毫秒为单位找出两个数据包之间的时间差

那么纪元是无关紧要的——如果时间表示为“自某个纪元以来的*X秒）（其中**X*不一定是整数；它可能有小数部分），那么“自纪元以来的*X*秒”和“ *Y* seconds since the epoch" 是*X* - *Y*，并且 epoch 本身抵消了。

那么，最大的问题是“自某个时代以来的秒数”如何表示。秒的整数计数？{纳秒、十分之一微秒、微秒、毫秒等}的整数计数？秒和{纳秒、微秒等}的组合？这就是为什么我们需要知道这是文件格式时间戳还是 802.11 TSFT，如果是文件格式时间戳，那是什么文件格式。

如果，正如您似乎指出的那样，这是一个 Wireshark 捕获（即，使用 Wireshark 进行的捕获，而不仅仅是 Wireshark 碰巧能够读取的捕获 - 它可以从不使用其本机 pcap 的程序中读取捕获或pcap-ng 格式），那么文件格式是 pcap 或 pcap-ng（在这种情况下，纪元是纪元，即 1970 年 1 月 1 日，00:00:00 UTS）并且时间戳是自 32 位秒纪元和自那一秒以来的 32 位微秒，对于 pcap，或自纪元以来的 64 位单位计数（单位由捕获相关数据包的接口的接口描述块指定；默认值为微秒）。

要计算两个 pcap 数据包的时间戳之间的差异，以微秒为单位，取秒值之间的差异，将其乘以 1,000,000，然后将微秒值之间的差异加上（两个差异都有符号）。要将其转换为毫秒，请将其除以 1,000。

要计算两个 pcap-ng 数据包的时间戳之间的差异，取时间戳值之间的差异；这是一秒的分数，其中分数由接口描述块中的指定值定义。要将其转换为毫秒，请根据分数进行适当调整（例如，如果是微秒，则将其除以 1,000）。

要计算两个 802.11 数据包的 TSFT 值之间的差异，只需从另一个值中减去一个值即可；TSFT 值（至少对于 radiotap 而言）以微秒为单位，因此，要将其转换为毫秒，请将其除以 1,000。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-23T06:17:37.643

“时代”不是单位或格式；这是一个时间点。具体来说，它是 1970 年 1 月 1 日的午夜 UTC。

[Unix 时间戳](http://en.wikipedia.org/wiki/Unix_time)只是从那时起经过的秒数。用较大的减去较小的以秒为单位，然后乘以 1000 以得到毫秒数。

# c# - 如何使用 C# 将数据集上传到我们的大型机并指定 LOCSITE、BLOCKSIZE 和 RECFM？

> ID：15956300
> 
> 赞同：4
> 
> 时间：2013-04-11T18:37:14.007
> 
> 标签：c#, ftp, mainframe, ftpwebrequest

我在这里找到了关于如何通过 FTP 上传文件的 MSDN 文章：

[如何：使用 FTP 上传文件](http://msdn.microsoft.com/en-us/library/ms229715.aspx)

但是我不确定我是否可以通过使用这种方法来实现我的目标。我想基本上指定块大小、位置和记录格式以及上传，但我不确定我能做到这一点。实际上，这是我希望能够通过 C# 执行的命令，而不必产生 CMD 提示符并通过它执行它：

```
LOCSITE LRECL=158 BLKSIZE=32706 RECFM=FB         
PUT 'your text file' XX.YY.ZZ.AA.BB(+1) 
```

我的文件上传位置末尾的 (+1) 表示结尾需要自动生成，我不确定这是否同样有效。

任何人都可以对我如何通过 C# 处理上述命令有所了解吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T19:04:48.160

请参阅[如何在 C# 中发送任意 FTP 命令](https://stackoverflow.com/questions/2321097/how-to-send-arbitrary-ftp-commands-in-csharp)。您最好尝试使用第三方 FTP 实现。

# java - 如何在 Java 中创建事件

> ID：15956302
> 
> 赞同：0
> 
> 时间：2013-04-11T18:37:16.823
> 
> 标签：java, multithreading, events, serversocket

我目前正在开发一个基于多线程套接字的 Java 程序，该程序应该允许多个线程向该程序发送请求。这应该通过事件激活来处理，但我很难理解事件及其实现。下面是应该允许超过 1 个线程与程序通信的代码，但我那里只有 1 个线程。有人可以对此进行更多说明吗？非常感激。

```
//this is a a threads class 
import java.io.BufferedOutputStream;
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.net.Socket;
import java.util.logging.Level;
import java.util.logging.Logger;

public class Niti implements Runnable {

    public String line;
    public Socket soc;
    public boolean active=true;

    public Niti(Socket soc)
    {
        this.soc=soc;
        this.line=line;
        this.active=active;
    }

    public synchronized void run() {
        try {
            BufferedReader br = new BufferedReader(new InputStreamReader(soc.getInputStream()));
            line=br.readLine();
            while(line!=null && !line.equals("")){

                if(!this.active)
                   break;

                System.out.println(line);
                line=br.readLine();
            }

            BufferedOutputStream bos = new BufferedOutputStream(soc.getOutputStream());
            bos.write("Poruka iz Programa".getBytes());

        }
        catch (IOException ex) {
            Logger.getLogger(Niti.class.getName()).log(Level.SEVERE, null, ex);
        }
        try {        
           soc.close(); 

        } catch (IOException ex) {
            Logger.getLogger(Niti.class.getName()).log(Level.SEVERE, null, ex);
        }
    }
}

import java.io.BufferedOutputStream;
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.net.ServerSocket;
import java.net.Socket;

//and this is the main class
public class Server{

    public static synchronized void main(String[] args) throws IOException, InterruptedException{

        ServerSocket ss = new ServerSocket(1000);

        while(true){
            Socket sokit = ss.accept();
            Niti n = new Niti(sokit);
            while(true){

                Thread t = new Thread(n);
                t.start();

                //Thread.sleep(4000);
                //n.active=false;
                System.out.println("nit broj:" + Thread.currentThread().getId()); 
            }   
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T19:33:02.630

好吧，如果不看 Niti 类（我想那是客户端处理程序类），你会在这里遇到一个逻辑错误：

```
 while(true){
        Socket sokit = ss.accept();
        Niti n = new Niti(sokit);
        while(true){ // LOGIC ERROR!!!

            Thread t = new Thread(n);
            t.start();

            //Thread.sleep(4000);
            //n.active=false;
            System.out.println("nit broj:" + Thread.currentThread().getId()); 
        }   
    } 
```

使用上面的代码，您在第一次通过 accept 方法后创建无限线程。您需要做的是删除第二个 while(true)，如下所示：

```
 while(true){
        Socket sokit = ss.accept();
        Niti n = new Niti(sokit);

        Thread t = new Thread(n);
        t.start();

        //Thread.sleep(4000);
        //n.active=false;
        System.out.println("nit broj:" + Thread.currentThread().getId());               
    } 
```

# oracle11g - Oracle 11g，关于 ROUND

> ID：15956305
> 
> 赞同：0
> 
> 时间：2013-04-11T18:37:22.450
> 
> 标签：oracle11g, rounding

我对 SQL 比较陌生。我正在尝试编写一个查询，其中“date_requested”列将四舍五入到最近的一天，并将结果放入一个新列中。我知道代码不是最漂亮的，但它可以在另一个报告中完成工作。我添加了 ROUND 函数的代码，但我不断收到错误消息：“ORA-0933：SQL 命令未正确结束”。

```
SELECT "RIT"."RIT_REQUEST_V".*   
FROM "RIT"."RIT_REQUEST_V"  
ROUND(to_date(''DATE_REQUESTED'') "DAY_REQUESTED"
WHERE (("FORM_ID" = 2011) 
OR ("FORM_ID" = 2014) 
OR ("FORM_ID" = 5007) 
OR ("FORM_ID" = 5036) 
OR ("FORM_ID" = 5039) 
OR ("FORM_ID" = 7007) 
OR ("FORM_ID" = 10000) 
OR ("FORM_ID" = 10001) 
OR ("FORM_ID" = 10005) 
OR ("FORM_ID" = 10007) 
OR ("FORM_ID" = 10011) 
OR ("FORM_ID" = 10020) 
OR ("FORM_ID" = 10024) 
OR ("FORM_ID" = 10025) 
OR ("FORM_ID" = 10029) 
OR ("FORM_ID" = 10032) 
OR ("FORM_ID" = 10033) 
OR ("FORM_ID" = 10034) 
OR ("FORM_ID" = 10035) 
OR ("FORM_ID" = 10036) 
OR ("FORM_ID" = 10037) 
OR ("FORM_ID" = 11011) 
OR ("FORM_ID" = 11013) 
OR ("FORM_ID" = 11999) 
OR ("FORM_ID" = 36001))
AND (("STATUS" LIKE 'OPEN%')
OR ("STATUS" LIKE 'Open%')) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T18:53:11.837

两个小错误：

1.  你把计算的列`DAY_REQUESTED`放在后面`FROM`
2.  末尾缺少一个括号`ROUND`

最后你可以使用`IN`而不是 many `OR`'s 。这使代码更易于维护：

```
SELECT "RIT"."RIT_REQUEST_V".*,
        ROUND(to_date(E_DATREQUESTED)) "DAY_REQUESTED"
  FROM "RIT"."RIT_REQUEST_V"
 WHERE FORM_ID IN (2011,2014,5007,5036,5039,7007,10000,
                   10001,10005,10007,10011,10020,10024,
                   10025,10029,10032,10033,10034,10035,
                   10036,10037,11011,11013,11999,36001)   
   AND (("STATUS" LIKE 'OPEN%') OR
        ("STATUS" LIKE 'Open%')); 
```

**ps**修正了一个小错字`FORM_ID IN`

# c# - 使用 ITextSharp XMLWorkerHelper 和解析 HTML 的性能缓慢

> ID：15956306
> 
> 赞同：1
> 
> 时间：2013-04-11T18:37:23.233
> 
> 标签：c#, performance, pdf, itextsharp, xmlhelper

我最近遇到了一个性能问题，涉及 ITextSharp 需要很长时间（*通常是 30 多秒*）来呈现 HTML 内容（*从 CKEditor、TinyMCE 等 HTML 编辑器传递*）。

以前，HTMLWorker 用于解析内容，效果很好。它快速且相当准确，但是当开始传入更复杂的 HTML（*例如表格、有序列表和无序列表*）时，它开始动摇：

```
//The HTML Worker was quick, however it's weaknesses began to show with more 
//complex HTML
List<IElement> objects = HTMLWorker.ParseToList(sr, ss); 
```

在这种情况下，复杂的标记是必需的，我没有尝试执行正则表达式手术和其他讨厌的事情来尝试解决这些问题，而是选择使用 XMLWorker 来处理解析。

```
//This outputs everything perfectly and retains all of the proper styling that is
//needed. However, when things get complex it gets sluggish
XMLWorkerHelper.GetInstance().ParseXHtml(writer,document,stringReader); 
```

XMLWorker 结果令人难以置信，它输出了我们需要的所有内容，但它的性能使它几乎无法使用。随着内容的复杂性增加（*通过额外的表格、样式和列表*），加载时间也增加了。

上面的行似乎是性能瓶颈，使用它尝试几种不同的替代方案根本没有帮助（*例如创建一个基本的自定义 XmlHandler*）。

**可能的原因和想法**

*   我尝试检查并从传入的内容中删除任何无关的和无效的标记，但这并没有起到什么作用。

*   问题可能出在 iTextSharp 本身以及 XMLWorkerHelper 的工作方式上吗？我尝试在[这里的 iText XML Helper Demo](http://demo.itextsupport.com/xmlworker/)中使用 SAME 输入，而且速度非常快。我认为性能至少具有可比性。

*   当前的考虑是使用一种存储方法来实际存储呈现的 PDF，然后按需检索它们，而不是动态生成它们。我宁愿避免这种情况，但它在桌面上。

*   内容是从 Microsoft Word ( *cringe* ) 中粘贴的，我已尝试尽可能多地清理它，但我认为这不是一个大问题，因为上面提到的 iText 演示对于相同的内容没有大问题。

*   使用 iTextSharp 的可能替代方法？

我很乐意提供任何其他详细信息和代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-08-10T14:32:33.407

虽然这个问题已经有几年了，但我想我会让任何未来的读者知道我最终通过[TuesPechkin 项目选择使用](https://github.com/tuespetre/TuesPechkin)[wkhtmltopdf](http://wkhtmltopdf.org/)库。

与 iTextSharp 相比，它的性能有了显着的改进，它有很好的文档，其中包含适用于您现有项目的各种场景的实现示例。

# c# - TFS API：GetLocalWorkspaceInfo 始终返回 null

> ID：15956307
> 
> 赞同：31
> 
> 时间：2013-04-11T18:37:24.090
> 
> 标签：c#, tfs-sdk

在我的一台机器上，我从任何`GetLocalWorkspaceInfo`调用中得到 null 的返回值。我已经将问题隔离到这个简单程序甚至失败的地方：

```
namespace WorkstationTest
{
    using Microsoft.TeamFoundation.VersionControl.Client;

    class Program
    {
        static void Main()
        {
            string workspaceLocalPath = @"C:\Dev";
            var info = Workstation.Current
                          .GetLocalWorkspaceInfo(workspaceLocalPath);

            // info is always null here
        }
    }
} 
```

我已经检查过的内容：

*   完全相同的代码以应有的方式在我的另一台机器上运行。

*   我已经确认我有一个工作区`C:\Dev`

    ![工作区截图](https://i.stack.imgur.com/UeFTd.png)

*   我在不同的目录中创建了一个新的工作区，并更改了`workspaceLocalPath`代码中的变量以匹配。

*   我查阅[了说明](http://msdn.microsoft.com/en-us/library/bb139693.aspx)返回值将为 null的文档`if the path is not in a workspace`。从上图中，路径应该在工作区中。

然而，一切似乎都表明这应该可行。有什么我可能会丢失的吗？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2017-04-11T14:23:30.957

在我工作的公司从 TFS2013 迁移到 TFS2017 后，Workstation.Current.GetLocalWorkspaceInfo 遇到了同样的问题。

对我有用的是调用[`Workstation.EnsureUpdateWorkspaceInfoCache`](https://msdn.microsoft.com/en-us/library/microsoft.teamfoundation.versioncontrol.client.workstation.ensureupdateworkspaceinfocache(v=vs.120).aspx)：

```
TfsTeamProjectCollection tpc = TfsTeamProjectCollectionFactory.GetTeamProjectCollection(new Uri("<your-tfs-uri-here>"));
VersionControlServer tfServer = tpc.GetService<VersionControlServer>();
Workstation.Current.EnsureUpdateWorkspaceInfoCache(tfServer, tfServer.AuthorizedUser); 
```

我将上述代码行添加到使用 GetLocalWorkspaceInfo 的 TFS 代理类的构造函数中。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-04-11T22:00:03.370

**`tf workspaces`**在 Visual Studio 2010 命令提示符中执行（在我的计算机上）时，它会显示**`No workspace matching * found on this computer`**，但在 Visual Studio 2012 中执行相同的命令时，它会返回我所有预期的工作区。

可以通过执行以下任一操作来解决此问题：

*   引用`Microsoft.TeamFoundation.VersionControl.Client`与 Visual Studio 2012 连接的 dll 版本，而不是与 Visual Studio 2010 连接的 dll。

*   打开 Visual Studio 2010 并将其连接到 TFS，它将为 Visual Studio 2010 创建工作区

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2016-04-21T03:22:28.223

我知道这是一篇旧帖子，但只是想分享我们拥有的解决方法，通过使用 VersionControlServer.QueryWorkspaces 在他/她的机器上为用户查询所有工作区。

```
private static Workspace FindWorkspaceByPath(TfsTeamProjectCollection tfs, string workspacePath)
{ 
    VersionControlServer versionControl = tfs.GetService<VersionControlServer>();

    WorkspaceInfo workspaceInfo = Workstation.Current.GetLocalWorkspaceInfo(workspacePath);

    if (workspaceInfo != null)
    {
        return versionControl.GetWorkspace(workspaceInfo);
    }

    // No Workspace found using method 1, try to query all workspaces the user has on this machine.
    Workspace[] workspaces = versionControl.QueryWorkspaces(null, Environment.UserName, Environment.MachineName);
    foreach (Workspace w in workspaces)
    {
        foreach (WorkingFolder f in w.Folders)
        {
            if (f.LocalItem.Equals(workspacePath))
            {
                return w;
            }
        }
    }

    throw new Exception(String.Format("TFS Workspace cannot be determined for {0}.", workspacePath));
} 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2016-06-11T19:50:33.043

就我而言，发生此问题的原因是`VersionControl.config`放置在 TFS 缓存文件夹 ( `C:\Users\DeepakR\AppData\Local\Microsoft\Team Foundation\5.0\Cache\Volatile\0cb76a25-2556-4bd6-adaa-5e755ac07355_http`) 下的文件经过折腾，即配置的工作区信息无法按预期使用。

所以，它基本上需要刷新`VersionControl.config`文件。再次加载 Visual Studio 时会发生自动刷新，即它从服务器中提取配置的工作区信息并更新配置文件，或者即使我们执行 tf 命令实用程序 ( `tf.exe workspaces /collection:TFSURL`)

`Microsoft.TeamFoundation.VersionControl.Client`的 (v12.0.0.0)`Workstation`类有一个函数`EnsureUpdateWorkspaceInfoCache`可以做同样的事情

```
VersionControlServer vcs = (VersionControlServer)tpc.GetService(typeof(VersionControlServer));
Workstation.Current.EnsureUpdateWorkspaceInfoCache(vcs, Environment.UserName); 
```

[https://msdn.microsoft.com/en-us/library/microsoft.teamfoundation.versioncontrol.client.workstation.ensureupdateworkspaceinfocache(v=vs.120).aspx](https://msdn.microsoft.com/en-us/library/microsoft.teamfoundation.versioncontrol.client.workstation.ensureupdateworkspaceinfocache(v=vs.120).aspx)

希望建议有助于解决问题。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-04-08T03:41:35.953

我最近（今天）在使用 Visual Studio 2017 以及安装的其他几个版本和一些本地工作区时遇到了这个问题。

我最终`15.x`通过“管理 NuGet 包”菜单将“Team Foundation Server Client”NuGet 包更新到最新版本 () 并修复了它。

我也确实首先删除了现有的项目引用，但这部分可能取决于您的需要。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-08-08T12:16:36.597

在我的`C:\Users\<username>\AppData\Local\Microsoft\Team Foundation`文件夹中，我有 2 个文件夹：

*   `7.0`

*   `8.0`

在 8.0 文件夹中有以下文件夹：

```
\Cache\Volatile\c1dbda02-c575-4dd2-b221-e83f7cb63665_http 
```

但在 7.0 文件夹中，该`\Cache\Volatile`文件夹为空

所以我所做的只是将`c1dbda02-c575-4dd2-b221-e83f7cb63665_http`文件夹复制到`7.0\Cache\Volatile\`

此`GetLocalWorkspaceInfo`调用成功返回工作区信息后

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-03-08T12:38:57.003

**简单地运行技巧**。

如果没有正确的 DLL 引用，任何事情都无法正常工作。下面解决了我 5 天以来遇到的同样问题，因为它搞砸了我的时间。

将以下 DLL 放在项目的 bin 文件夹中，并为所有 DLL 提供整个解决方案的参考。如果出现任何错误，例如“无法给出参考”，请忽略它并跳过该 DLL 提供参考，而只需将创建 DLL 的错误放入项目将在构建期间自动执行的 bin 文件夹中

> DLL 的：

```
Microsoft.TeamFoundation.Client.dll                                  
Microsoft.TeamFoundation.Common.dll                                   
Microsoft.TeamFoundation.Core.WebApi.dll                              
Microsoft.TeamFoundation.TestManagement.Client.dll                    
Microsoft.TeamFoundation.TestManagement.Common.dll                    
Microsoft.TeamFoundation.Work.WebApi.dll                              
Microsoft.TeamFoundation.WorkItemTracking.Client.DataStoreLoader.dll  
Microsoft.TeamFoundation.WorkItemTracking.Client.dll                  
Microsoft.TeamFoundation.WorkItemTracking.Common.dll                  
Microsoft.TeamFoundation.WorkItemTracking.Controls.dll                
Microsoft.TeamFoundation.WorkItemTracking.Proxy.dll                   
Microsoft.TeamFoundation.WorkItemTracking.WebApi.dll                  
Microsoft.VisualStudio.Services.Client.Interactive.dll                
Microsoft.VisualStudio.Services.Common.dll                            
Microsoft.VisualStudio.Services.WebApi.dll                            
Microsoft.WITDataStore32.dll                                          
Microsoft.WITDataStore64.dll 
```

如果系统安装了 MTM 或 TFS，则可以在以下路径中找到上述 dll

**路径：** C:\Program Files (x86)\Microsoft Visual Studio\2017\Enterprise\Common7\IDE\CommonExtensions\Microsoft\TeamFoundation\Team Explorer

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-07-20T12:09:44.707

这是当您拥有服务器路径时如何查找工作区的方法：

```
 Workspace[] workspaces = _versionControl.QueryWorkspaces(null, Environment.UserName, Environment.MachineName);
  return workspaces.FirstOrDefault(w => !string.IsNullOrEmpty(w.TryGetLocalItemForServerItem(ConstDefaultFlowsTfsPath))); 
```

`ConstDefaultFlowsTfsPath`服务器路径在哪里`"$"`，例如：`"$/MyCompany/Services/DiagnosticsFlows"`

您还可以将最后一行替换为：

```
return workspaces.FirstOrDefault(w => !string.IsNullOrEmpty(w.GetServerItemForLocalItem(myLocalPath))); 
```

这也应该对你有用。

# c++ - 堆栈字符问题

> ID：15956308
> 
> 赞同：0
> 
> 时间：2013-04-11T18:37:25.333
> 
> 标签：c++, char, stack

我正在学习如何创建堆栈和链表。我现在正在编写的程序专注于模板堆栈类。当我制作了一堆 . 时一切都很顺利`int`，但是当我开始实现`char`. 具体来说，当我尝试在`char`.

`char`你们能否验证我是否正确执行此操作，并让我知道我在堆栈上做错了什么？

这是我的代码：

```
#include<iostream>
using namespace std;

#ifndef STACK_H
#define STACK_H

//STACK CLASS
template<typename T>
class Stack
{
 public:
        Stack(int = 10);
        ~Stack(){ delete stackPtr;};

        bool isEmpty() const
        { return top == -1; }

        bool isFull() const
        { return top == size - 1; }

        //push and pop
        bool push(const T&);
        bool pop(T&);

 private:
         int size;
         int top;
         T *stackPtr;
};

//CONSTRUCTOR
template<typename T>
Stack<T>::Stack(int newSize)
     : top(-1), size(newSize), 
     stackPtr(new T[size]) //allocate array using ptr ********
{
     //empty constructor
};

//PUSH VALUES ONTO STACK
template<typename T>
bool Stack<T>::push(const T &pushVal)
{
     if(!isFull())
     {
            stackPtr[++top] = pushVal;
            return true;      
     }

     return false;
};

//POP VALUES OFF OF STACK
template<typename T>
bool Stack<T>::pop(T &popVal)
{
     if(!isEmpty())
     {
            popVal = stackPtr[top--];
            return true;              
     }

     return false;
};

#endif

//DRIVER
int main()
{
    //STACK OF INT
    Stack<int> intStack(5);
    int intValue = 1;

    cout << "Pushing values onto intStack: " << endl;

    while(intStack.push(intValue))
    {
        cout << intValue << ' ';
        intValue++;                               
    }
    cout << "\nStack is full, cannot push..."
         << endl << endl;

    cout << "Popping values off of intStack: " << endl;

    while(intStack.pop(intValue))
         cout << intValue << ' ';

    cout << "\nStack is empty, cannot pop..."
         << endl;

    //STACK OF CHAR
    Stack<char> charStack(5);
    string greeting = "hello";
    int strSize = greeting.length();

    cout << "\nPushing values onto charStack: " << endl;

    for(int i = 0; i < strSize; i++)
    {
         charStack.push(greeting.at(i));
         cout << greeting.at(i) << ' ';
    }        

    cout << endl;

    cout << "Popping values off of charStack: " << endl;

    for(int i = (strSize - 1); i >= 0; i++) //PROBLEM OCCURS
    {
            charStack.pop(greeting.at(i));
            cout << greeting.at(i) << ' ';        
    }

    system("pause");   
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T18:41:49.483

```
for(int i = (strSize - 1); i >= 0; **i--**) //PROBLEM not anymore
{
        charStack.pop(greeting.at(i));
        cout << greeting.at(i) << ' ';        
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T18:47:58.590

可能它不是您特定问题的根源，但您确实应该 在析构函数中使用`delete[] stackPtr` 而不是。[维基百科解释了原因](http://en.wikipedia.org/wiki/Delete_%28C++%29)`delete stackPtr`

# python - 对 numpy 数组的每 n 个元素进行平均

> ID：15956309
> 
> 赞同：78
> 
> 时间：2013-04-11T18:37:28.760
> 
> 标签：python, numpy, average

我有一个 numpy 数组。我想创建一个新数组，它是每个连续三元组元素的平均值。所以新数组的大小将是原始数组的三分之一。

举个例子：

```
 np.array([1,2,3,1,2,3,1,2,3]) 
```

应该返回数组：

```
 np.array([2,2,2]) 
```

任何人都可以提出一种有效的方法吗？我在画空白。

* * *

## 回答 #1

> 赞同：130
> 
> 时间：2013-04-11T18:39:30.427

如果您的数组`arr`的长度可被 3 整除：

```
np.mean(arr.reshape(-1, 3), axis=1) 
```

重塑为更高维度的数组，然后在其中一个附加维度上执行某种形式的 reduce 操作是 numpy 编程的主要内容。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2020-04-24T16:01:40.850

对于寻找多维数组的简单概括的谷歌用户：模块`block_reduce`中的函数`scikit-image`（[链接到文档](https://scikit-image.org/docs/dev/api/skimage.measure.html?#block-reduce)）。

它有一个非常简单的接口，可以通过应用诸如 的函数来对数组进行下采样`numpy.mean`，但也可以使用其他函数（最大值、中值、...）。通过为块提供具有不同大小的元组，可以通过不同的因素为不同的轴进行下采样。这是一个二维数组的例子；使用平均值仅对轴 1 下采样 5：

```
import numpy as np
from skimage.measure import block_reduce

arr = np.stack((np.arange(1,20), np.arange(20,39)))

# array([[ 1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19],
#        [20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38]])

arr_reduced = block_reduce(arr, block_size=(1,5), func=np.mean, cval=np.mean(arr))

# array([[ 3\. ,  8\. , 13\. , 17.8],
#        [22\. , 27\. , 32\. , 33\. ]]) 
```

正如在另一个答案的评论中所讨论的那样：如果缩减维度中的数组不能被块大小整除，则填充值由参数提供`cval`（默认为 0）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-09-03T23:44:47.003

要将接受的答案应用于每个列/特征的二维数组：

```
arr.reshape(-1, downsample_ratio, arr.shape[1]).mean(axis = 1) 
```

# jquery - SlidesJS 无法在 JSFiddle 上运行

> ID：15956311
> 
> 赞同：0
> 
> 时间：2013-04-11T18:37:39.420
> 
> 标签：jquery, jquery-plugins, jsfiddle

我在 JSFiddle 上尝试了自己的示例，但没有成功，所以我认为我做错了什么。

但后来我尝试了一些其他的例子，比如[这个](http://goo.gl/S4jVi)，但它们似乎都不起作用。

SlidesJS 是不是不能在 JSFiddle 上工作，还是对我来说是特定的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T18:42:21.893

如果您检查控制台，您将看到：

```
GET http://slidesjs.com/examples/simple/js/slides.min.jquery.js 404 (Not Found) 
```

这意味着您的`slides.min.jquery.js`文件未加载（404 File Not Found）。

改为使用`http://slidesjs.com/js/jquery.slides.min.js`，主要方法也是 no `.slides()`but `.slidesjs()`，请参阅[**working fiddle**](http://jsfiddle.net/bzrDK/51/)。

# methods - 如何从 C++ 中的线程访问非静态方法

> ID：15956313
> 
> 赞同：0
> 
> 时间：2013-04-11T18:37:53.883
> 
> 标签：methods, c++-cli

//在啊我有以下代码

# 包括“afxwin.h”

# 包括“msclr\auto_gcroot.h”

使用命名空间系统；

使用 msclr::auto_gcroot；

命名空间 A

{

公共参考 A 类

{

上市：

虚拟布尔函数（）；

一个（）;

〜A（）；

虚拟布尔连接（）；

受保护：

DWORD WINAPI threadConnect(void* pParam);

};

公开课 AHelper

{

上市：

auto_gcroot A;

};

}

//在A.cpp我有下面的代码

// 这是主 DLL 文件。

# 包括“stdafx.h”

# 包括“啊”

# 包括“字符串”

# 包括“流”

# 包括“stdlib.h”

# 包括“strsafe.h”

# 包括“windows.h”

# 包括“tchar.h”

命名空间 A

{

A::A()

{

m_FuncHandle = mpsNil;

}

A::~A()

{

}

布尔 A::Func()

{

返回真；

}

布尔 A::Connect()

{

AHelper* AHelper；

m_retVal = 假；

AHelper = 新的 AHelper();

AHelper->A = 这个；

HANDLE Handle_Of_Thread = 0;

DWORD dwThreadId;

//DWORD WINAPI threadConnect(void* pParam);

//如果我在这里声明函数声明，我会得到

//错误 LNK2001：无法解析的外部符号“unsigned long __stdcall threadConnect(void *)”(?threadConnect@@YGKPAX@Z)

Handle_Of_Thread = CreateThread (NULL, 0, threadConnect, AHelper, 0, &dwThreadId); // 有了这段代码，我得到了

//error C3867: 'A::A::threadConnect': 函数调用缺少参数列表；使用 '&A::A::threadConnect' 创建指向成员的指针

返回 m_retVal；

}

DWORD WINAPI A::threadConnect(void* pParam)

{

AHelper* AHelper = reinterpret_cast(pParam);

//这里需要调用Func

返回0；

}

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T18:49:27.497

通常的技巧是有一个静态函数，它接受某种 id，这个函数确定调用哪个 someFunc()（因为每个对象都有自己的 someFunc，你显然需要知道哪个）要么使用查找，要么在 C/C++ 应用程序中很常见，直接传递对象的地址。

所以你有类似的东西：

```
static bool thread_func(object o)
{
    return o->someFunc();
} 
```

诀窍是静态函数必须是可重入的，因此它本身不保留任何状态以供线程干扰（或者如果确实如此，请确保其线程安全）

这一切都假设您正在调用不是在线程中创建的对象的方法。如果您只是调用一个函数并且已经在线程中创建了对象，那么只需调用该函数！

# php - 提供错误消息并提交给自己的登录页面

> ID：15956316
> 
> 赞同：0
> 
> 时间：2013-04-11T18:38:07.547
> 
> 标签：php, mysql, forms, login

我目前坚持尝试创建一个提交给自己的登录表单，这样如果有任何错误，它们将显示在登录表单上方，而不是被发送到另一个页面。此外，如果登录成功，则会将它们发送到所需的页面。下面是我的代码，感谢您的帮助，谢谢！

```
<?php
if ((isset($_REQUEST['username'])) && (isset($_REQUEST['password']))) {
    $adminusername = $_POST["username"];
    $adminpassword = $_POST["password"];
    if ($adminusername == '' || $adminpassword == '') {
        echo "<b>You must complete all sections</b><br/>";
    } 

    $query = mysql_query("SELECT * FROM admin WHERE username = '$adminusername' AND password = '$adminpassword'");

    $numrows = mysql_num_rows($query);
    if ($numrows != 0) {

        while ($row = mysql_fetch_assoc($query)) {
            $dbusername = $row['username'];
            $dbpassword = $row['password'];
        }             

        if ($adminusername == $dbusername && ($adminpassword == $dbpassword)) {
            $_SESSION['username'] = $adminusername;
            header("Location: admin.php");
        }
    } else {
        echo " ($error) Username and password do not match";
    }                 
}
?>
<h3>Admin Login</h3>
<form name="login" action="<?= $SERVER['PHP_SELF'] ?>" method="POST">
    Username: <input type="text" name="username"><br/>
    Password: <input type="password" name="password"><br/><br/>
    <button type="submit">Log In</button>
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T19:25:47.690

我已经缩进了您的代码，以便您可以更清楚地看到结构。

如果用户名和密码为空，则会输出错误，但仍会查询数据库。

您不是在检查数据库查询是否真的有效。你应该检查`$query`是不是假的，如果是就报错。

您正在检查用户名和密码是否匹配两次（一次在 SQL 中，然后再一次），这太过分了，此外，如果第二次检查失败，您不会报告。

`header()`只有在您还没有发送任何输出的情况下才会起作用......如果在您显示的代码之前有任何输出，即使是 PHP 之外的空白行，那么标题将不起作用。

就其本身而言，这对我有用（除了sql注入潜力）：

```
<?php
if ($_SERVER['REQUEST_METHOD'] == 'POST') {
    $adminusername = $_POST["username"];
    $adminpassword = $_POST["password"];
    if ($adminusername == '' || $adminpassword == '') {
        echo "<b>You must complete all sections</b><br/>";
    } else {
        $sql = "SELECT * FROM admin WHERE username = '$adminusername' AND password = '$adminpassword'";
        $query = mysql_query($sql);

        if ($query === false) {
            echo "Could not successfully run query ($sql) from DB: " . mysql_error();
            exit;
        }

        if (mysql_num_rows($query) > 0) {
            $_SESSION['username'] = $adminusername;
            header('Location: /admin.php');
            exit;
        }

        echo "<b>Username and password do not match</b><br/>";
    }
}
?>
<h3>Admin Login</h3>
<form name="login" action="<?= $_SERVER['PHP_SELF'] ?>" method="POST">
    Username: <input type="text" name="username"><br/>
    Password: <input type="password" name="password"><br/><br/>
    <button type="submit">Log In</button>
</form> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-27T03:38:36.530

我的解决方案在`div`. 我还在学习，但我希望它可以帮助别人。

```
<div>
  <?php
    //make sure the form action='' is set to itseslf 
echo "
        <form action='self_page_name' method='post'>
          <table>
            <tr>    
              <td>UserName:</td>
            </tr>
            <tr>
              <td><input type='text' name='username' required='required' /></td>
            </tr>
            <tr>
              <td>Password: </td>
            </tr>
            <tr>
              <td><input type='password' name='password' required='required' /></td>
            </tr>
            <tr>
              <td><input type='submit' name='submit' value='Login' /></td>
            </tr>
          </table>
        </form>
     ";
//////////your php validation script here////////////
  ?>
</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T18:45:33.563

要提交`<form>`，您需要一个提交按钮；你有：

```
<button type="submit">Log In</button> 
```

尝试：

```
<input type="submit" value="Log In" /> 
```

我不认为您当前正在提交表单，因此单击提交时不会发生任何事情。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-11T18:46:59.113

而不是 header("Location: admin.php");

试试java脚本

```
echo "<script>window.location = 'admin.php';</script> 
```

如果您已经输出到页眉将不起作用

# c# - System.Runtime.Remoting.RemotingException：未找到请求的服务

> ID：15956320
> 
> 赞同：4
> 
> 时间：2013-04-11T18:38:26.547
> 
> 标签：c#, .net, class-library, .net-remoting

我`Web.Config`的远程项目中有以下代码，该项目引用了另一个类库的 dll。类库里面有以下类：

```
public class Generator: MarshalByRefObject, IGenerator
    {
} 
```

当我为暴露上述类的已配置 uri 运行远程处理项目时，我在问题标题中收到上述错误。

我运行的网址是这样的： `http://localhost/documentgenerationserver/Generator.rem`

```
<application>
      <service>
        <wellknown mode="SingleCall" objectUri="Generator.rem" type="ABC.Generator, Generator" />
      </service>
      <channels>
        <channel ref="http" />
        <serverProviders>
          <formatter ref="binary" typeFilterLevel="Full" />
        </serverProviders>
      </channels>
    </application> 
```

有人可以建议我，如何解决这个问题？

`EDIT 1:`在浏览了一篇关于谷歌远程处理的文章后，我尝试附加`?wsdl`到我的`URL`上面并且它有效。它显示了我的远程对象的 WSDL 文件。在我`Client Project`托管的 asp.net Web 应用程序中`IIS 7.5`，当我使用以下方法实例化远程对象时：

`Activator.GetObject()`

它成功实例化，但是当我使用这个远程代理调用它的方法时，它没有到达那个方法并立即返回。

有人可以帮助我知道，我如何至少调试它并查看发生了什么。为什么它没有到达远程对象方法？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2014-09-04T06:26:05.883

消息“System.Runtime.Remoting.RemotingException：未找到请求的服务”是远程服务在浏览器上的预期行为。

# c++ - 作为构造函数参数的构造函数调用将声明评估为函数指针

> ID：15956326
> 
> 赞同：1
> 
> 时间：2013-04-11T18:38:49.743
> 
> 标签：c++, compiler-construction, constructor, ambiguity

我刚刚遇到了一个奇怪的歧义，我花了很长时间才将其隔离出来，因为它在一个小的 API 更改后突然出现在一些模板混乱的中间。

下面的示例探讨了调用构造函数的不同方法（或者我认为），其中一些对我来说非常模糊。在所有这些中，我都试图声明一个 type 的对象`A`。

```
#include <vector>
#include <cstdlib>
#include <iostream>
#include <typeinfo>
using namespace std;

// just a dummy class to use in the constructor of the next class
struct V {
   V(const std::vector<size_t> &){}
};

// the class we are interested in
struct A{
   A(const V &){}
   A(int, const V &){}
   A(const V &, int){}
   A(const V &, const V &){}
};

// a dummy function to delegate construction of V
V buildV(std::vector<size_t> &v){ return V(v); }

int main(){
   std::vector<size_t> v = {1024,1024};
   V vw(v);

   // I am using macros to make the constructor argument more visible
   #define BUILD_A(X) { A a(X); std::cerr << typeid(a).name() << std::endl; }
   #define BUILD_A2(X,Y) { A a(X, Y); std::cerr << typeid(a).name() << std::endl; }

   // All of the following call the constructor of A with different parameters
   // the comment on the right shows the type of the declared a
   /* 1 */ BUILD_A( vw )                       // object
   /* 2 */ BUILD_A( V(v) )                     // function pointer
   /* 3 */ BUILD_A( v )                        // object
   /* 4 */ BUILD_A( std::vector<size_t>() )    // function pointer
   /* 5 */ BUILD_A( (V)V(v) )                  // object
   /* 6 */ BUILD_A( ( V(v) ) )                 // object
   /* 7 */ BUILD_A( buildV(v) )                // object

   /* 8 */ BUILD_A2(10,V(v))                   // object
   /* 9 */ BUILD_A2(V(v),10)                   // object
   /* 10 */ BUILD_A2(vw,V(v))                  // object
   /* 11 */ BUILD_A2(V(v), vw)                 // object

   /* 12 */ //BUILD_A2(V(v), V(v))             // doesn't compile
   /* 13 */ BUILD_A2(V(v), (V)V(v))            // object
} 
```

第二个和第四个例子似乎声明了一个函数指针而不是一个对象，这引发了几个问题：

1.  为什么被`V(v)`解释为类型而不是对象`A a(V(v))`？
2.  如何以不同的方式重新`V(v)`转换`(V)V(v)`？
3.  为什么编译器无法推断强制转换本身？
4.  6中的双括号是否`((...))`具有语义意义，还是只是有助于消除解析器的歧义？我不明白这怎么可能是一个优先问题。
5.  如果`V(v)`评估为类型而不是对象，为什么`A a(V(v), V(v))`在 12 中不合法？
6.  有趣的是，添加一个标量值也会突然让编译器意识到另一个也是 8 到 11 中的对象。
7.  我是否错过了任何会重现歧义的语法？你知道其他令人困惑的案例吗？
8.  GCC 不应该警告我那里可能有问题吗？铿锵声。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T18:52:09.267

这被称为**最令人头疼的解析**：尝试的声明被解析为函数声明。

C++ 规则是，如果某些东西可以被解析为函数声明，那么它就是。

有一些变通方法，例如 write `A a(( V(v) ))`，它不能被解析为`a`带有`V`参数和返回的函数的声明`A`。

* * *

关于警告，该标准不需要对此进行任何诊断。毕竟，潜在的歧义已经解决。有利于功能。:-)

# c++ - 卷曲慢速多线程 dns

> ID：15956328
> 
> 赞同：0
> 
> 时间：2013-04-11T18:38:50.353
> 
> 标签：c++, ubuntu, curl, dns, libcurl

该程序是用 C++ 编写的，它对网页进行索引，因此所有域都是来自网络的随机域名。奇怪的是dns `fail`/`not found`百分比很小（> 5％）。

这是 pmp 堆栈跟踪：

```
 3886 __GI___poll,send_dg,buf=0xADDRESS,__libc_res_nquery,__libc_res_nquerydomain,__libc_res_nsearch,_nss_dns_gethostbyname3_r,gaih_inet,__GI_getaddrinfo,Curl_getaddrinfo_ex
    601 __GI___poll,Curl_socket_check,waitconnect,singleipconnect,Curl_connecthost,ConnectPlease,protocol_done=protocol_done@entry=0xADDRESS),Curl_connect,connect_host,at
    534 __GI___poll,Curl_socket_check,Transfer,at,getweb,athread,start_thread,clone,??
    498 nanosleep,__sleep,athread,start_thread,clone,??
     50 __GI___poll,Curl_socket_check,Transfer,at,getweb,getweb,athread,start_thread,clone,??
     15 __GI___poll,Curl_socket_check,Transfer,at,getweb,getweb,getweb,athread,start_thread,clone
      7 nanosleep,usleep,main 
```

为什么会有这么多线程`_nss_dns_gethostbyname3_r`？我该怎么做才能加快速度。

可能是因为我使用 curl 的默认同步 DNS 解析器`CURLOPT_NOSIGNAL`吗？

该程序在英特尔 I7（8 核 HT）、16GB 内存、Ububtu 12.10 上运行。

带宽从 6MB/s（ISP 限制）-> 2MB/s 不定期变化，有时甚至会下降到 100KB/s。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T22:24:34.673

您看到的线程可能正在等待 DNS 答案。一种加快速度的方法是事先进行查找，因此它们会缓存在您的邻居递归 DNS 服务器中。还要确保没有人要求自动回答，这总是*很*慢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T09:25:27.817

我发现解决方案是将默认 curl dns 解析器更改为`c-ares`并特别要求，`ipv4`因为`ipv6`我的网络尚不支持。

更改为`c-ares`还允许我添加更多设置的 dns 服务器并将它们圈起来，以提高 dns 查询/秒的数量。

结果：

```
//set to ipv4 only
curl_easy_setopt(curl, CURLOPT_IPRESOLVE, CURL_IPRESOLVE_V4);

//cicle dns Servers
dns_index=DNS_SERVER_I;
pthread_mutex_lock(&running_mutex);
    if(DNS_SERVER_I>DNS_SERVERS.size())
    {
        DNS_SERVER_I=1;
    }else
    {
        DNS_SERVER_I++;
    }
pthread_mutex_unlock(&running_mutex);

string dns_servers_string=DNS_SERVERS.at(dns_index%DNS_SERVERS.size())+","+DNS_SERVERS.at((dns_index+1)%DNS_SERVERS.size())+","+DNS_SERVERS.at((dns_index+2)%DNS_SERVERS.size());

// set curl DNS (option available only when curl is built with c-ares)
curl_easy_setopt(curl, CURLOPT_DNS_SERVERS, &dns_servers_string[0]); 
```

# sql - 仅选择特殊行

> ID：15956334
> 
> 赞同：0
> 
> 时间：2013-04-11T18:39:06.347
> 
> 标签：sql

我有一张像这样的桌子：

```
ID, Val 
```

具有以下值：

```
1,2
1,NULL
2,NULL
3,2 
```

我怎样才能得到只有

```
1,2
2,null
3,2 
```

这意味着获取所有行`val = 2`，或者如果行的 ID 没有任何`Val = 2`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T18:48:58.063

我将“获取所有 val = 2 的行，或者如果 ID 没有任何 Val = 2 的行”解释为：

```
select * from table x
where x.val = 2
or not exists (select 1 from table where id = x.id and val = 2) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T18:44:08.700

尝试：

```
select t.id, t2.val
from (select distinct id from myTable) t
left join myTable t2 on t.id=t2.id and t2.val=2 
```

SQLFiddle[在这里](http://sqlfiddle.com/#!2/91959/4)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T18:45:22.577

```
SELECT DISTINCT *
FROM `table`
WHERE `Val` = 2
   OR ( `ID` = 2 AND ( `Val` != 2 OR `Val` IS NULL ) ) 
```

# linux - 将多行日志文件转换为 CSV

> ID：15956337
> 
> 赞同：1
> 
> 时间：2013-04-11T18:39:08.340
> 
> 标签：linux, shell, csv, sed, awk

我有如下文件：

```
----------------------------------------
#Timestamp: 4/11/2013 12:00:48 AM
#Title: MDS error
#Category: Errors

----------------------------------------
#Timestamp: 4/11/2013 12:03:27 AM
#Title: MDS error
#Category: Errors

----------------------------------------
#Timestamp: 4/11/2013 12:05:39 AM
#Title: MDS error
#Category: Errors

---------------------------------------- 
```

我需要将其转换为如下所示的 CSV 文件：

```
4/11/2013 12:00:48 AM,MDS error,Errors
4/11/2013 12:03:27 AM,MDS error,Errors
4/11/2013 12:05:39 AM,MDS error,Errors 
```

需要以命令行 (awk/sed) 的形式执行某些操作吗？因为我有一系列像这样的文件需要转换为 CSV。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-12T07:11:19.547

```
awk -F: '/^#Timestamp/{line=$2","}/^#Title/{line=line""$2}/^#Category/{print line","$2;}' your_file 
```

测试：

```
> cat temp
----------------------------------------
#Timestamp: 4/11/2013 12:00:48 AM
#Title: MDS error
#Category: Errors

----------------------------------------
#Timestamp: 4/11/2013 12:03:27 AM
#Title: MDS error
#Category: Errors

----------------------------------------
#Timestamp: 4/11/2013 12:05:39 AM
#Title: MDS error
#Category: Errors

----------------------------------------
> awk -F: '/^#Timestamp/{line=$2","}/^#Title/{line=line""$2}/^#Category/{print line","$2;}' temp
 4/11/2013 12, MDS error, Errors
 4/11/2013 12, MDS error, Errors
 4/11/2013 12, MDS error, Errors 
```

如果对 OP 没问题，则可以使用更短的解决方案：

```
awk -F: '/^#/{line=line","$2}/^-/{print substr(line,3);line="";}' your_file 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T00:58:36.507

这可能对您有用（GNU sed）：

```
sed '/^#Timestamp:/{N;N;y/\n/,/;s/#[^ ]* //gp};d' file 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-11T18:44:48.483

```
#!/bin/bash

while true; do
    read             || break
    read _ timestamp || break
    read _ title     || break
    read _ category  || break
    read             || break

    printf '%s,%s,%s\n' "$timestamp" "$title" "$category"
done < logfile.txt 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-11T18:44:14.077

```
$ awk -F": " '/^#T/{printf "%s,",$2}/^#C/{printf "%s\n",$2}' file
4/11/2013 12:00:48 AM,MDS error,Errors
4/11/2013 12:03:27 AM,MDS error,Errors
4/11/2013 12:05:39 AM,MDS error,Errors 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-11T21:00:11.003

假设每条记录只包含三行，您可以清理输入并将其“粘贴”在一起：

```
<infile sed '/^---/d; /^ *$/d; s/[^:]*: *//' | paste -d, - - - 
```

输出：

```
4/11/2013 12:00:48 AM,MDS error,Errors
4/11/2013 12:03:27 AM,MDS error,Errors
4/11/2013 12:05:39 AM,MDS error,Errors 
```

如果您有可变数量的行，您可以使用 GNU awk（也许 mawk 也是如此）来执行此操作：

```
<infile awk 'NF>0 {gsub("\n\n+", "\n"); gsub("\n[^:]+: *", ","); sub(",",""); print}' RS='-{40}' ORS='' 
```

第一个替换删除空行，第二个替换用逗号替换标题，第三个删除无关的逗号。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-11T21:21:26.840

这是我的：

```
sed -ne '/----/{N;N;N;s/\n/,/g;s/[^:]*: \([^,]*,\)[^:]*: \([^,]*,\)[^:]*: \(.*\)/\1\2\3/;p;}' file 
```

这确实假设在虚线之后有三条感兴趣的线。如果它是可变的，则必须发生一些循环。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-16T09:53:30.623

```
awk -F ": " '!(i%3)&&i{print s;s=i=""}/#/{s=s!=""?s","$2:$2;i++}' 
```

# scala - Play for Scala 和 Anorm：无法创建简单的解析器

> ID：15956338
> 
> 赞同：1
> 
> 时间：2013-04-11T18:39:11.520
> 
> 标签：scala, playframework-2.0, anorm

这里应该有一些简单的东西，虽然我完全想念它，因为我是 Scala 和 Play 的菜鸟。这是代码：

```
case class ExceptionInfo(ExceptionType: String, Message: String, StackTrace: Seq[String])

object ExceptionInfo
    {
      val excInfoParser = {
        get[String]("ExceptionInfo.ExceptionType") ~ 
        get[String]("Message") ~ 
        get[String]("ExceptionInfo.StackTrace") map {
          case ExceptionType ~ Message ~ StackTrace => ExceptionInfo(ExceptionType, Message, StackTrace.split("\r\n"))
        }
      }
    } 
```

这不会编译，输出如下：

```
Description Resource            Path                Location                        Type
not found: value ExceptionType  Application.scala   /testme/app/controllers line 40 Scala Problem
not found: value Message        Application.scala   /testme/app/controllers line 40 Scala Problem
not found: value StackTrace     Application.scala   /testme/app/controllers line 40 Scala Problem
not found: value ExceptionType  Application.scala   /testme/app/controllers line 40 Scala Problem 
```

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T18:49:54.577

当您以小写字母命名变量时应该可以工作：

```
case exceptionType ~ message ~ stackTrace => ExceptionInfo(exceptionType, message, stackTrace.split("\r\n")) 
```

小写是区分要绑定的变量（您要查找的内容）与要匹配的常量的区别。有关更多信息，请参见[此处](https://stackoverflow.com/questions/12636972/how-to-pattern-match-into-an-uppercase-variable)和[此处](http://scala-programming-language.1934581.n4.nabble.com/scala-Question-about-naming-conventions-tp2003522p2003525.html)。

# github - github分叉混淆

> ID：15956343
> 
> 赞同：1
> 
> 时间：2013-04-11T18:39:34.037
> 
> 标签：github, merge, fork, local, repository

我按照这个[https://help.github.com/articles/fork-a-repo](https://help.github.com/articles/fork-a-repo)帖子在本地克隆了一个存储库。之后，另一个开发人员创建了一个到主存储库的分支，并向该分支添加了一些功能。我的问题是

1.  我如何将该分支放入我的叉子中。
2.  我可以使用**git pull upstream/missing_branch**命令将丢失的分支再次获取到我的本地吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T19:28:13.057

您需要`upstream`在本地 repo 中添加一个远程 repo ' '（它具有您的 fork 的来源）

![上游和分叉](https://i.stack.imgur.com/L9Xis.png)

（[`git remote`手册页](http://git-scm.com/docs/git-remote)）

```
git remote add upstream url://upstream/repo 
```

[OP opensourcelover](https://stackoverflow.com/users/2068301/opensourcelover)提到[看到](https://stackoverflow.com/questions/15956343/github-fork-confusion/15957211#comment22741620_15957211)这个：

```
git remote -v, 

origin git@github.com:username/project.git (fetch) 
origin git@github.com:username/project.git (push) 
upstream git@github.com:username/project.git (fetch) 
upstream git@github.com:username/project.git (push) 
```

如果您与远程仓库`origin`相同`upstream`，则可以用 https 替换该 URL `upstream`：

```
git remote set-url upstream https://github.com/originalDevName/originalRepoName 
```

这样，您就`git fetch upstream`可以获得新的分支。

如果您需要在该新分支上*工作*，您现在可以声明它：

```
git branch -u upstream/foo foo 
```

请参阅“[如何使现有的 Git 分支跟踪远程分支？](https://stackoverflow.com/a/2286030/6309) ”。

# c# - 如何制作深拷贝字典模板

> ID：15956352
> 
> 赞同：-2
> 
> 时间：2013-04-11T18:40:00.553
> 
> 标签：c#, .net, templates, dictionary

我有以下制作`deep copy`字典的方法：

```
public static Dictionary<string, MyClass> deepCopyDic(Dictionary<string, MyClass> src)
{
    //Copies a dictionary with all of its elements
    //RETURN:
    //      = Dictionary copy
    Dictionary<string, MyClass> dic = new Dictionary<string, MyClass>();
    for (int i = 0; i < src.Count; i++)
    {
        dic.Add(src.ElementAt(i).Key, new MyClass(src.ElementAt(i).Value));
    }

    return dic;
} 
```

我想知道，我可以以某种方式将其制成模板吗？我需要`MyClass`成为一个模板。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-11T18:43:47.740

您可以使用带有`where TValue : ICloneable`约束的泛型：

```
public static Dictionary<TKey, TValue> deepCopyDic<TKey, TValue>(Dictionary<TKey, TValue> src)
    where TValue : ICloneable
{
    //Copies a dictionary with all of its elements
    //RETURN:
    //      = Dictionary copy
    Dictionary<TKey, TValue> dic = new Dictionary<TKey, TValue>();
    foreach (var item in src)
    {
        dic.Add(item.Key, (TValue)item.Value.Clone());
    }

    return dic;
} 
```

您必须[`ICloneable`](http://msdn.microsoft.com/en-us/library/system.icloneable.aspx)在要传递给该方法的每个类中实现接口。

或者稍微改进的版本，`Key`也克隆了：

```
public static Dictionary<TKey, TValue> deepCopyDic<TKey, TValue>(Dictionary<TKey, TValue> src)
    where TValue : ICloneable
    where TKey : ICloneable
{
    return src.ToDictionary(i => (TKey)i.Key.Clone(), i => (TValue)i.Value.Clone());
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-11-16T09:17:12.020

您可以使用复制构造函数选项：

```
Dictionary<string, int> copy = new Dictionary<string, int>(dictionary); 
```

通过这种方式，您可以制作字典的深层副本。 [链接](http://www.dotnetperls.com/copy-dictionary)到原始帖子。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-11T19:09:01.590

如上所述，序列化方法是唯一的方法。ICloneable 不保证被克隆对象中的所有属性都不会分配引用，除非您完全控制对象，这绝不是一个好的假设，尤其是在大型团队中。

序列化方法的唯一需要注意的是字典中传递的所有对象都是可序列化的。此外，由于过度使用反射，序列化并不总是非常有效，这不应该在代码的高性能区域中使用。

我使用一种称为快速序列化的方法解决了这个问题，但它要求您计划克隆的所有对象都支持特定的接口。它总是速度与复杂性。

# angularjs - 使用 AngularJS 向 ng-grid 表添加新行的最简单方法是什么？

> ID：15956368
> 
> 赞同：5
> 
> 时间：2013-04-11T18:41:02.917
> 
> 标签：angularjs

我有一个填充了数据的 ng-grid 表。我浏览了文档并在 Google 上进行了搜索，但我找不到如何向网格添加新行的示例。

人们是否有任何特殊的方式来添加新数据。我只是希望能找到一些我可以借鉴的例子。到目前为止，我什么也没发现。我希望 ng-grid 站点只有一个示例。我确定我不是唯一需要向 ng-grid 添加行的人。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-15T04:44:52.343

这是示例：~~[http ://plnkr.co/edit/1uLcok?p=preview](http://plnkr.co/edit/1uLcok?p=preview)~~

（修复了图书馆的断开链接）： [http ://plnkr.co/edit/GdstXN?p=preview](http://plnkr.co/edit/GdstXN?p=preview)

您可以简单地修改数组。angularJs 负责更新视图。（如果数据修改发生在 angularjs 之外，那么您需要调用`$apply` . `scope`）

# jquery - jQuery自定义插件，保持与所选项目相关的设置变量？

> ID：15956374
> 
> 赞同：0
> 
> 时间：2013-04-11T18:41:22.163
> 
> 标签：jquery, plugins

这是我第一次开发 jQuery 插件。基本上我只是写这个来将函数合并在一起并使使用这些函数更容易，就像用方法编写一个类一样。

我遇到的问题是，在我对元素使用 jQuery 命令后 - 该函数中的所有信息都丢失了，我无法将其用于以后使用。我想将插件用作一种类，将函数用作方法。我想将 Raphael 创建的对象保存在其中，并在以后需要时对其进行操作。这是我的例子：

```
(function($) {
    $.fn.myPlugin = function(step) {
        if(step == 'step1') {
            var test = 'Function OK!';
            console.log(test);
        }
        if(step == 'step2') {
            console.log(test);
        }
    }
})(jQuery);

$('#elem').myPlugin('step1');
$('#elem').myPlugin('step2'); 
```

当然，第一个控制台日志打印出变量，但是第二个返回未定义。

有没有办法让 jQuery 作为一个自依赖的类，带有封闭的变量？正如我所提到的，我想创建 Raphael 对象，然后再操作它们。所以我需要将 Raphael 对象分配给一个变量（`var graph = Raphael('#elem', options);`），所以稍后我需要通过调用一个函数来访问它，比如`graph.somefunction(doThis);`

我怎样才能做到这一点？难道我做错了什么？谢谢..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T18:45:46.567

将数据存储在每个元素上。

```
$.fn.myPlugin = function(step){

    return this.each(function(){
        var $elem = $(this);
        if(step == 'step1') {
            $elem.data('test','Function OK!');
            console.log('step1',this.id,$elem.data('test'));
        }
        if(step == 'step2') {
            console.log('step2',this.id,$elem.data('test'));
        }
    });

};

$('#elem').myPlugin('step1').myPlugin('step2'); 
```

它现在还一次支持多个具有不同步骤进度的元素。

```
$('#elem1').myPlugin('step1');
$('#elem2').myPlugin('step1').myPlugin('step2');
$('#elem1').myPlugin('step2'); 
```

[http://jsfiddle.net/FaaBV/](http://jsfiddle.net/FaaBV/)

# php - 如何使用 php 脚本提交远程表单并获取服务器响应？

> ID：15956382
> 
> 赞同：0
> 
> 时间：2013-04-11T18:41:57.547
> 
> 标签：php, forms, post, bots

我需要每小时编写一个脚本（我将使用 cronjob），提交一个表单并检查来自服务器的响应，打印我的输出。我知道如何发出远程发布请求，但对如何捕获响应一无所知。脚本应该在 php.ini 中。有什么建议吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T18:51:52.833

注意：$url 是远程表单的 url，例如 www.-----.com/??????.php

尝试这个：

```
$ch = curl_init();

            $timeout = 0;

            curl_setopt ($ch, CURLOPT_URL, $url);

            curl_setopt ($ch, CURLOPT_RETURNTRANSFER, 1);

            curl_setopt($ch, CURLOPT_USERAGENT , "Mozilla/4.0 (compatible; MSIE 8.0; Windows NT 6.1)");

            curl_setopt ($ch, CURLOPT_CONNECTTIMEOUT, $timeout);

            $rawdata = curl_exec($ch);

            curl_close($ch);

            $data = explode(',', $rawdata);

            return $data; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T18:44:53.970

你需要 curl 来做到这一点，看看： http: [//guzzlephp.org/](http://guzzlephp.org/)

# javascript - JavaScript gl-matrix：来自 mat4 的四元数

> ID：15956385
> 
> 赞同：1
> 
> 时间：2013-04-11T18:41:58.850
> 
> 标签：javascript, math

我正在使用 gl-matrix lib ( [https://github.com/toji/gl-matrix](https://github.com/toji/gl-matrix) ) 有可能从 quat 创建 mat3 并从 mat3 创建 quat：

*   mat3.fromQuat
*   quat.fromMat3

但我有 mat4 旋转矩阵。我这样创建它：

```
var turnmat = mat4.create();
mat4.identity(turnmat);

mat4.rotate(turnmat,turnmat, yaw,   [0, 1, 0]);
mat4.rotate(turnmat,turnmat, pitch, [1, 0, 0]);
mat4.rotate(turnmat,turnmat, roll,  [0, 0, 1]); 
```

然后我想要这个矩阵中的quat。但是只有quat.fromMat3，没有quat.fromMat4。我在这里做错了什么？

refs（没有代表添加为链接）：

http://glmatrix.net/docs/2.2.0/symbols/mat3.html#.fromQuat

http://glmatrix.net/docs/2.2.0/symbols/quat.html#.fromMat3

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T19:09:31.767

gl-matrix 中定义的四元数仅适用于 3D 空间。您想要做的是从您的 Mat4 中取出 3D 旋转组件并将其转换为四元数。

# javascript - 使用引导工具提示时仅获取 html 标准工具提示

> ID：15956386
> 
> 赞同：0
> 
> 时间：2013-04-11T18:42:01.680
> 
> 标签：javascript, twitter-bootstrap

我正在尝试在元素上使用引导工具提示，因为我没有得到引导样式，只有 html 样式：

![在此处输入图像描述](https://i.stack.imgur.com/LLpkD.png)

我已经用过很多次了，但我觉得我已经起床太久了，而且越来越马虎......有人可以指出我的错误吗？

代码：

主页.php

```
<a href="#" id='award-value' rel='tooltip' data-toggle='tooltip' title='My Tooltip'>450</a>

<script src="//ajax.aspnetcdn.com/ajax/jQuery/jquery-1.9.1.min.js"></script>    
    <script src='assets/js/chosen.jquery.js'></script>
    <script type="text/javascript"> 
        $(".chzn-select").chosen(); 
        $(".chzn-select-deselect").chosen({
            allow_single_deselect:true
        }); 
    </script>
    <script src="assets/js/jquery-form.js"></script>
    <script src="assets/bootstrap/js/bootstrap.js"></script>
    <script src="assets/js/session.js"></script> 
```

我包括引导 css

* * *

编辑：我修复了它，我想要动态添加工具提示的元素，使用 ajax 获取...我只是将 $(this).tooltip() 放在 .ajax() 调用的成功回调中，如下所示：

```
function fetch_live_feed(){
    $.ajax({
        type: "GET",
        url:"includes/php/live_feed.php",
        success:function(data){
            $("#live-feed-loading-port").html(data);
            $(".live-feed-row a").tooltip();
        }
    });
} 
```

如果这是错误的做法，请告诉我...

谢谢 ：）

# pyqt - PyQT：覆盖 TableView 中突出显示的文本颜色

> ID：15956391
> 
> 赞同：1
> 
> 时间：2013-04-11T18:42:16.657
> 
> 标签：pyqt

我有一个表格视图，其中每个单元格都有自定义文本颜色。选择行时，颜色将更改为默认的 highlightText 值（白色）。当行也被选中时，如何保持定义的 ForegroundRole 分配颜色？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T14:52:01.687

您可能可以使用自定义委托来实现此目的。

试试这里的[提示](http://www.saltycrane.com/blog/2008/01/pyqt4-qitemdelegate-example-with/)。

```
from PyQt4 import QtGui, QtCore
import sys

class CustomSelectColorDelegate(QtGui.QStyledItemDelegate):

    def __init__(self, parent = None):
        super(CustomSelectColorDelegate, self).__init__(parent)

    def paint(self, painter, option, index):
        painter.save()

        # set background color
        if option.state & QtGui.QStyle.State_Selected:
            painter.setBrush(QtGui.QBrush(QtCore.Qt.white))
        else:
            painter.setBrush(QtGui.QBrush(QtCore.Qt.red))
        painter.drawRect(option.rect)

        # set text color
        if option.state & QtGui.QStyle.State_Selected:
            painter.setPen(QtGui.QPen(QtCore.Qt.red))
        else:
            painter.setPen(QtGui.QPen(QtCore.Qt.white))

        value = index.data(QtCore.Qt.DisplayRole)
        if value.isValid():
            text = value.toString()
            painter.drawText(option.rect, QtCore.Qt.AlignLeft | QtCore.Qt.AlignCenter, text)

        painter.restore()

if __name__ == '__main__':

    app = QtGui.QApplication(sys.argv)
    mw = QtGui.QWidget()

    tableViewer0 = QtGui.QTableWidget()

    newitem1 = QtGui.QTableWidgetItem('this is standard text')
    newitem2 = QtGui.QTableWidgetItem('this is custom text')

    tableViewer0.setColumnCount(2)
    tableViewer0.insertRow(0)
    tableViewer0.setItem(0, 0, newitem1)
    tableViewer0.setItem(0, 1, newitem2)

    customSelectColorDelegate = CustomSelectColorDelegate()
    tableViewer0.setItemDelegateForColumn(1, customSelectColorDelegate)

    vbox = QtGui.QVBoxLayout()
    vbox.addWidget(tableViewer0)
    mw.setLayout(vbox)
    mw.show()
    sys.exit(app.exec_()) 
```

# python - 自动将音轨与配音截屏的时间对齐

> ID：15956392
> 
> 赞同：4
> 
> 时间：2013-04-11T18:42:19.503
> 
> 标签：python, audio-recording, audio

我们有一些需要被配音为各种语言的屏幕截图，我们有目标语言的文本脚本，如下所示：

```
开始时间音频旁白

0:0 blah nao lorep iposm...

1:20 xao dok dkjv dwv....

..

```

我们可以分别记录上述每个单元，然后按照上述脚本中的说明在适当的开始时间将其对齐。

**例子：**

**输入：**

输入N个定时值：0:0,1:20 ... 然后输入N个录音

**输出：**

与上述时间一致的录音。系统应单独检测上溢，而下溢则由静默填充。

是否有任何独立于平台的音频 apis \ 软件或最好在 python 中的代码片段，允许我们根据提供的时间对齐这些音频单元？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T15:29:16.117

如果输入的音频文件是未压缩的（即WAV文件等），我喜欢使用的音频库是libsndfile。它似乎在这里有一个 python 包装器：[https](https://code.google.com/p/libsndfile-python/) ://code.google.com/p/libsndfile-python/ 。考虑到这一点，其余的可以这样完成：

使用 libsndfile 打开输出音频流以将音频数据写入

对于每个输入音频文件，使用 libsndfile 打开一个输入流

根据您的文本描述“脚本”提取给定音频文件的元数据信息

将所需的任何静音写入主输出流，然后将数据从输入流写入输出流。注意当前位置/时间。对每个输入音频文件重复此步骤，检查音频剪辑的目标开始时间是否始终 >= 前面提到的当前位置/时间。如果没有，那么你有一个重叠。

当然，您必须担心采样率匹配等问题，但这应该足以开始。另外，我不确定您是要编写一个输出文件，还是为每个输入文件编写一个输出文件，但这个答案应该足够周到。假设它支持输入文件格式，libsndfile 将为您提供所需的所有信息（例如剪辑长度等）。

# iphone - 如何使用在 viewDidLoad 之外创建的变量

> ID：15956393
> 
> 赞同：0
> 
> 时间：2013-04-11T18:42:21.680
> 
> 标签：iphone, objective-c, function, viewdidload

嘿，我对 Objective C 编程很陌生，我被困住了。为什么当我创建函数时，它不能使用我为标签或文本视图等创建的变量。每当我在 viewDidLoad 函数中调用它们时，我必须执行 self.(variableName) 或 _(variableName)它不会让我在 viewDidLoad 函数之外这样做。有没有办法在它之外访问它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T19:07:30.577

> **为什么我创建函数时，它不能使用我为标签或文本视图等创建的变量。**

一方面，您需要区分函数和实例方法。在 Objective-C 中，类可以具有实例变量（作为该类实例的一部分的变量）和实例方法（类似于与该类的实例相关联的函数）。类也可以有属性，这些属性的使用很像实例变量，因为它们是与对象关联的值，但它们是通过访问器方法访问的。另一方面，函数不属于任何类。因此，一个类有一个接口，其中声明了实例变量和方法，如下所示：

```
@interface Person : NSObject
{
    NSString *firstName;
    NSString *lastName;
}

@property (readonly) NSString *fullName;
@property (strong) NSArray *friends;
@property (assign) int age;

- (id)initWithFirstName:(NSString*)first lastName:(NSString*)last;
- (void)addFriend:(Person*)friend;

@end 
```

还有一个实现，像这样：

```
@implementation Person

- (id)initWithFirstName:(NSString*)first lastName:(NSString*)last
{ /* code goes here */ }

- (void)addFriend:(Person*)friend
{ /* code goes here */ }

- (NSString *)fullName
{ return [NSString stringWithFormat:@"%@ %@", firstName, lastName; }

@end 
```

实现中的那些东西是实例方法，如`-`开头所表示的以及它们在`@implementation`块中定义的事实。（如果它们有`+`而不是`-`，它们将是类方法而不是实例方法——我会让你在文档中了解这一点。）通过使用普通方法调用或点表示法调用适当的访问器方法来访问属性，所以如果你有：

```
Person *george = [[Person alloc] initWithFirstName:@"George" lastName:@"Bailey"] 
```

所有这些都是有效的：

```
NSString *name1 = george.fullName;
NSString *name2 = [george fullName];
george.age = 45;
[george setAge:45];
int years1 = george.age;
int years2 = [george age]; 
```

另外，`self`是指向“当前对象”的指针。您可以在实例方法中使用它，以便对象可以调用自己的方法并访问自己的属性。例如，`Person`该类可以包含这样的方法：

*   (NSString *)nameAndAge { NSString *nameAndAge = [NSString stringWithFormat:@"%@: %d", self.fullName, self.age]; }

另一方面，函数不是任何类的一部分，使用 C 函数语法而不是 Objective-C 方法语法，并且不在`@implementation`块中定义：

```
BOOL isMiddleAged(Person* person)
{
    return (person.age > 30) && (person.age < 60);
} 
```

你不能`self`在函数中使用，因为函数与对象没有关联，所以没有什么`self`可以指向的。但是，您可以使用您知道的其他对象的属性，`person.age`例如上面的示例。

> **每当我在 viewDidLoad 函数中调用它们时，我都必须执行 self.(variableName) 或 _(variableName) 并且它不会让我在 viewDidLoad 函数之外执行此操作。**

您必须访问视图控制器的属性。如上所述，`self.(variableName)`是访问属性的方式。`_(variableName)`指存储属性值的变量（通常由编译器生成）。（您通常不应该在初始化方法之外直接访问这些变量，`-dealloc`而是使用属性访问器。）您可以在类的任何*实例方法*中使用这些属性，而不仅仅是`-viewDidLoad`. 您还可以通过替换`self`为指向对象的指针的名称来访问其他对象的属性，就像我对 in 所做的`person`那样`isMiddleAged()`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T18:46:22.130

好像您正在使用自动合成属性。使用 Auto Synthesized 属性，您不需要 @syhtesize 对象。 `@sythesize object = _object;` 在这种情况下将被隐式实现。

因此，您可以使用 self.object 或 _object 访问对象。

您可以@synthesize 避免通过 self.varName 或 _varName 使用对象。您可以使用 varName 直接使用它。

# android - 无法从 PostExecute 中调用的 AlertDialog 关闭 Activity

> ID：15956395
> 
> 赞同：0
> 
> 时间：2013-04-11T18:42:23.907
> 
> 标签：android, android-activity, sdk, android-asynctask, android-alertdialog

我有几个活动都将文件发送到互联网。

我想将发布过程放入一个单独的类文件中，以便为每个活动调用相同的过程。

我将调用活动的上下文传递给主 AsyncTask 方法，该方法依次调用 preExecute、doInbackground、Postexecute。

我有一个 AlertDialog，使用传递给 AsyncTask 的上下文构建，在 postexecute 方法中显示服务器返回的消息，并使用 OnClickListener 将其关闭。单击按钮时，警报对话框关闭，但底层活动屏幕未关闭。

我尝试了几种不同的 finish() 组合，包括：-

```
dialog.cancel();
finish(); 
```

和

```
dialog.cancel();
MyActivity ma = new MyActivity();
ma.this.finish(); 
```

但是，没有什么会关闭活动。

我做错了什么，我需要做什么才能关闭它？

到目前为止，我可以让它工作的唯一方法是在两个活动中嵌入完全相同的代码，这在我看来既低效又容易出错。

任何帮助都会非常受欢迎。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T18:49:34.610

> 我将调用活动的上下文传递给主 AsyncTask

而不是只传递 Activity 的上下文，您需要将 Activity 实例传递给扩展`AsyncTask`类的类，因为完成方法来自`Activity`类而不是来自`Context`.so 尝试如下：

```
public class Networkasynctask extends AsyncTask<...>{

Activity activity;
Context context;

public Networkasynctask(Context context,Activity activity,...){
  this.activity=activity;
  .....
}
....
} 
```

并从 Activity 传递 Activity 实例：

```
Networkasynctask networktaskobj=new Networkasynctask(this); 
```

现在`Networkasynctask.this.activity.finish()`用于从非 Activity 类关闭 Activity

# ruby-on-rails - Rails 嵌套关联和范围

> ID：15956396
> 
> 赞同：0
> 
> 时间：2013-04-11T18:42:25.867
> 
> 标签：ruby-on-rails, ruby

我正在尝试在 Rails 中学习 arel/scopes.. 我有以下模型..

```
Class Category
  has_many :questions

Class Question
  belongs_to :category
  has_many :answers

Class Answer
  belongs_to :question
  # attributes: owner_name 
```

我正在尝试查找与 owner_name 有答案的类别，例如“bob”。为此，我正在考虑添加一个 has_many :through 类别和答案之间的关系，然后使用..访问类别的答案

```
Category.find_each do |c|
  c.answers.find_by_owner_name("bob")
end 
```

..但这似乎有点矫枉过正，而且很冗长。我可以使用 Category 类中定义的范围更好地做到这一点吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T18:52:40.383

```
@categories = Answer.where(:owner_name => "Bob").collect(&:category) 
```

您可以使用委托来实现这一点：

```
Class Answer
  belongs_to :question
  delegate :category, :to => :question, :allow_nil => true
end 
```

或者，如果您不想使用该`delegate`方法，则可以这样做：

```
@categories = Answer.where(:owner_name => "Bob").collect(&:question).collect(&:category) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T19:36:05.990

find_each 方法肯定会在性能方面扼杀你。您对创建 has_many :through 类别和答案之间的关系是正确的。一旦你有了它，它就是直截了当的：

```
Category.joins(:answers).where("answers.owner_name = ?", "Bob") 
```

# javascript - 将函数值切换为当前日期而不是确切日期

> ID：15956399
> 
> 赞同：0
> 
> 时间：2013-04-11T18:42:45.677
> 
> 标签：javascript, jquery, sharepoint

我将如何修改下面的函数以分配当前日期的值而不是 2013 年 4 月 11 日？

```
<script type="text/javascript">
$('#FormsPageID table tr:nth-child(12) td:nth-child(2) div span span input')
  .on('focus', function(){
      var $this = $(this);
      if($this.val() == '4/11/2013'){
          $this.val('');
      }
  })
  .on('blur', function(){
      var $this = $(this);
      if($this.val() == ''){
          $this.val('4/11/2013');
      }
  });
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T18:49:33.780

这会起作用

```
var date = new Date();
var strDate = (date.getMonth() + 1) + "/" + date.getDate() + "/" +date.getFullYear() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T18:52:23.107

根据 Parthik 的答案，您可以将其设为一个函数，在 .val() 中调用它

```
function getCurrentDate() {
    var date = new Date();
    var strDate = (date.getMonth() + 1) + "/" + date.getDate() + "/" +date.getFullYear()
    return strDate;
} 
```

在您的代码中，更改：

```
$this.val('4/11/2013'); 
```

至

```
$this.val(getCurrentDate()); 
```

# vim - 在替换中后跟捕获组的寄存器值给出错误

> ID：15956400
> 
> 赞同：0
> 
> 时间：2013-04-11T18:42:47.660
> 
> 标签：vim, replace

我正在尝试使用 vim 将汇编语言文件移植到新的汇编程序。新的汇编器不支持本地标签。所以我试图在每个本地标签之前插入标签名称。但是尝试使用寄存器后跟捕获组会导致“无效表达式错误”。

**示例输入：**

```
LABEL_NAME:

        MOV     SP,#STACK_POINTER
        MOV     R7,#12                          ;WAIT LOOP (3)
12$:    MOV     R6,#255                         ;TIME WASTER
11$:    MOV     R5,#255                         ;MUST WAIT !!!!
10$:    RESET_WATCH_DOG
        DJNZ    R5,10$
        DJNZ    R6,11$
        DJNZ    R7,12$ 
```

**期望的输出：**

```
LABEL_NAME:

                  MOV     SP,#STACK_POINTER
                  MOV     R7,#12                          ;WAIT LOOP (3)
LABEL_NAME12$:    MOV     R6,#255                         ;TIME WASTER
LABEL_NAME11$:    MOV     R5,#255                         ;MUST WAIT !!!!
LABEL_NAME10$:    RESET_WATCH_DOG
                  DJNZ    R5,LABEL_NAME10$
                  DJNZ    R6,LABEL_NAME11$
                  DJNZ    R7,LABEL_NAME12$ 
```

当然，这有效：

`:.,10s/\(\d\+\$\)/LABEL_NAME\1/`

将标签名称拉入 register`a`后，这：

`:.,10s/\(\d\+\$\)/\=@a/`

给我这个：

```
LABEL_NAME:

               MOV     SP,#STACK_POINTER
               MOV     R7,#12                          ;WAIT LOOP (3)
LABEL_NAME:    MOV     R6,#255                         ;TIME WASTER
LABEL_NAME:    MOV     R5,#255                         ;MUST WAIT !!!!
LABEL_NAME:    RESET_WATCH_DOG
               DJNZ    R5,LABEL_NAME
               DJNZ    R6,LABEL_NAME
               DJNZ    R7,LABEL_NAME 
```

但是这个：

`:.,10s/\(\d\+\$\)/\=@a\1/`

只产生这个：

`E15: Invalid expression: @a\1`

我正在使用 gVim 7.3。理想情况下，我想知道为什么我不能在替换语句中使用寄存器扩展后跟捕获组扩展。但替代解决方案也将受到赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T20:33:57.440

如果在替换部分使用表达式，则必须使用整个部分的表达式，而不是混合表达式。这应该工作：

```
:.,10s/\(\d\+\$\)/\=@a . submatch(1)/g 
```

简短说明：

```
\=          " the replacement will be expression
@a          " read the value from register 'a'
.           " the string concatenation
submatch(x) " (function) get the matched group from your :s command, x=0,1,2... 
```

帮助项目：

```
:h :s
:h submatch() 
```

# javascript - 可以在 IE 上运行但不能在 chrome 和 FF 上运行的 JS

> ID：15956401
> 
> 赞同：0
> 
> 时间：2013-04-11T18:42:50.523
> 
> 标签：javascript

好的，这确实是一个非常奇怪的问题，但它确实发生在我身上，我写了一个在 IE 上工作的 JS，它不在 firefox 或 chrome 上。

我希望有人能告诉我为什么会这样......

我的 HTML 代码是下一个

```
<h4>What kind of animals do you like the most?</h4>
<select id="animalName" name="animalName">
    <option selected="selected" disabled="disabled">Which animal is it?</option>
    <option value="Cat">Cat</option>
    <option value="Dog">Dog</option>
    <option value="Lion">Lion</option>
    <option value="Other">Other</option>
</select>
<div id="otherAnimalNameDiv">
    <h4>As you picked the other, would you like to write it down to let us know?</h4>
    <input type="text" name="otherAnimalName" size="40" id="otherAnimalName" />
</div> 
```

我的 JS 代码是下一个：

```
 var animalName = document.getElementById("animalName");
    var animalOtherName = document.getElementById("otherAnimalNameDiv");

    function animalSelect (){
        animalName.onchange = function (){
            if (animalName.options.value == "Other"){
                animalOtherName.style.display = "block";
            }
        };
        animalOtherName.style.display = "none";
    }

window.onload = function () {
    firstNameFunc();
    familyNameFunc ();
    emailAddressFunc ();
    passwordFunc ();
    rewritePasswordFunc ();
    colorPickerFunc ();
    animalSelect ();
    } 
```

为什么它可以在 IE 上运行，而不能在 Chrome 或 FF 上运行？...

当您从选择标记中选择“其他”选项时，它应该将 div 显示设置为阻止，这会在 IE 上发生，但不会在 FF 或 chrome 上发生。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T18:52:02.487

我敢打赌，问题出在您的 if 语句上：

```
if (animalName.options.value == "Other"){ 
```

如果您尝试获取所选选项的值，则应该尝试更多类似的方法：

```
if (animalName.options[animalName.selectedIndex].value == "Other"){ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T18:51:54.327

您尝试获取选项值是错误的。它应该是：

```
if( this.options[this.selectedIndex].value == "Other") { 
```

# javascript - 元标记和 javascript 浏览器重定向 - 哪个优先？

> ID：15956405
> 
> 赞同：4
> 
> 时间：2013-04-11T18:42:54.383
> 
> 标签：javascript, redirect, curl, meta-tags

我正在使用 PHP 进行开发，使用 Curl 跟踪指向其最终目的地的链接。我偶尔会到达带有元标记重定向或 javascript 重定向的页面，并希望足够聪明地关注它们。如果一个页面两者都有，我应该遵循哪个（即哪个会先触发）？

示例元标记刷新：

```
<meta http-equiv="refresh" content="0;URL='http://location1.com/'"> 
```

示例 javascript 刷新：

```
<script>
window.location.href='http://location2.com/';
</script> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-11T18:47:33.147

刚刚创建了这个文件（我们称之为`test.html`）

```
<html>
  <head>
    <meta http-equiv="refresh" content="0;URL='http://location1.com/'">
    <script type="text/javascript">
      window.location.href='http://location2.com/';
    </script>
  </head>
  <body>
    Hello
  </body>
</html> 
```

您可以复制并保存它。打开后会跳转到`http://location2.com`

请注意，如果`<script>`标签不在`<head>`标签中，则`<meta>`标签将首先执行。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-11T18:55:20.333

Hexblot 的回答是一个好主意——如果你想看看会发生什么，就试试吧。但是，当我尝试时，Chrome 去了 location2，而 IE 去了 location1。所以它似乎依赖于实现。您可能希望将此作为脚本中的可配置选项。但是，在实践中，任何在元标记中具有一个重定向而在脚本中具有不同重定向的站点，(a) 不太可能，并且 (b) 没有很好地编码，因为他们不知道你会在哪里结束。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T18:50:03.017

我不认为有一个很好的方法来检测哪个会先开火。

元标记具有`content`可用于指定超时的属性。然而，在 JavaScript 中几乎不可能检测到重定向何时会发生，因为有无数种编写方式。至少在不执行它的情况下不会。例子：

```
var t = 100;
setTimeout(function () {
    window.location.href='http://location2.com/';
}, t * 2); 
```

# ruby-on-rails - 在 RoR 中模拟现金、信用卡交易的最佳方法

> ID：15956412
> 
> 赞同：0
> 
> 时间：2013-04-11T18:43:06.753
> 
> 标签：ruby-on-rails

我想要一个名为“事务”的表，但具有不同的类（CashTransaction 和 CreditCardTransaction），其中“类型”列确定哪一行是什么。

关于如何做到这一点的任何建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T18:57:18.270

如果两种事务类型都具有相同的属性（表列），则可以使用 STI，创建三个模型，例如

```
class Transaction < ActiveRecord
    # create table called transactions and add type column to it.  
    # add common methods inside this class
end

class CashTransaction < Transaction
     # the type column will be CashTransaction and used to determine entry for this class in transactions table 
end

class CreditCardTransaction < Transaction    
    # the type column will be CreditCardTransaction and used to determine entry for this class in  transactions table 
end 
```

然后您可以使用子类创建这些事务

```
CreditCardTransaction.new 
CreditCardTransaction.find 
 #..etc
 # or 
CashTransaction.new
CashTransaction.find .. 
```

# java - 从文件读取错误

> ID：15956415
> 
> 赞同：0
> 
> 时间：2013-04-11T18:43:19.957
> 
> 标签：java, file-not-found

我正在做一个关于阅读文件的样本。我将一个 txt 文件放入项目文件夹并编写了此代码，但出现异常`FileNotFound`，并且当我尝试关闭`dataInputStream`时，我收到编译错误（注释掉的行）。我想我把一切都搞砸了

```
 String  str=null;
   try {
       FileInputStream fileInputStream=new FileInputStream("myfile.txt");
       DataInputStream dataInputStream=new DataInputStream(fileInputStream);
       BufferedReader bufferedReader=new BufferedReader(new InputStreamReader(dataInputStream));
       str=bufferedReader.readLine();

       } catch (Exception e) {
           System.out.println(e.getMessage());
       }

       System.out.println(str);
       //dataInputStream.close(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T18:48:38.403

Java 对相对路径非常挑剔，因此“myfile.txt”可能应该存在于构建项目的任何地方。

至于关闭`dataInputStream`，不在范围内。在 try 块之外声明它。无论如何，我建议将实际`close()`调用放在 finally 块中以确保它始终完成（如果引用不为空）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T18:55:07.347

我同意吉列尔莫

myfile.txt 需要在您的类路径中。

如果您在命令行中运行此代码，它应该位于与此代码执行相同的文件夹或相同的包中。

至于数据输入流，它超出了范围

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T19:51:22.200

bufferedReader.close() 必须在关闭此操作的最后使用..

# c# - 如何创建视图以将新项目添加到视图模型中的列表？

> ID：15956417
> 
> 赞同：0
> 
> 时间：2013-04-11T18:43:36.270
> 
> 标签：c#, asp.net-mvc, viewmodel

如何创建视图以将新项目添加到视图模型中的列表？

所以我有一个包含对象列表的视图模型（视图模型中还有另一个对象）。基本上列表将是评论（所以我可能有零到 x 条评论）。

我正在使用 VS 2010（我不认为它是剃刀视图引擎？）

这是我的观点，我希望可以选择将新项目添加到列表中

```
<%@ Page Title="" Language="C#" MasterPageFile="~/Views/Shared/Site.Master" Inherits="System.Web.Mvc.ViewPage<JPROCommunitydataListings.ViewModels.dataWithCommentsViewModel>" %>

<asp:Content ID="Content1" ContentPlaceHolderID="TitleContent" runat="server">
    data Solution
</asp:Content>

<asp:Content ID="Content2" ContentPlaceHolderID="MainContent" runat="server">
    <p>data Description#    <%: Model.data.Description %></p>
    <p>data ParameterID#    <%: Model.data.ParameterID %></p>
    <%--<h2>dataWithComments</h2>--%>

        <table class="table table-striped table-hover">
        <tr>
            <th>
                Comment
            </th>
            </tr>
        <% foreach (var Comment in Model.Comments) { %>
             <td>
                <%: Comment.comment1%>
            </td>
        <% } %>
        </table>
            <% using (Html.BeginForm()) {%>
        <%: Html.ValidationSummary(true) %>

    <fieldset>
        <legend>Add Comment</legend>        

        <div class="editor-label">
        <"label">
        What to do here????????
                <%--<%: Html.LabelFor(model => model.Comments[0].comment1) %>--%>
            </div>
            <div class="editor-field">
                <%: Html.TextBoxFor(model => model.Comments.comment1)%>
                <%: Html.ValidationMessageFor(model => model.Comments[0].comment1)%>
            </div>
        What to do here????????                        
            <p>
                <input type="submit" value="Search" />
            </p>
        </fieldset>

    <% } %>
    </fieldset>
    <p>
        <%: Html.ActionLink("Search", "Search") %>
    </p>

</asp:Content> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T19:00:01.987

“在这里做什么”

你需要一个表格：

```
<form action="/ControlerName/AddComment" method="POST">
   ...
   <%: Html.TextBox("CommentToAdd")%>
   <%: Html.Hidden("PostIdToAddComment")%>
   <input type="submit" value="Search" />
</form> 
```

在控制器中，您将您的评论保存到数据库，然后重定向回将显示页面的原始操作，因此假设您正在查询数据库以获取所有评论，则应该显示评论：

```
[HttpPost]
public ActionResult AddComment(string commentToAdd, int postIdToAddComment)
{
   //do your database stuff here to add comment
   return RedirectToAction("DataWithCommentsOrWhateverTheNameOfTheActionIsForTheOriginalPage")
} 
```

# objective-c - UIImage 旋转和方向问题

> ID：15956420
> 
> 赞同：0
> 
> 时间：2013-04-11T18:43:42.713
> 
> 标签：objective-c, rotation, uiimage, cgcontext, uiimageorientation

我正在使用标准代码来旋转图像，但是当 UIImageRotatation 不等于 2 时，图像旋转不正确。

任何修复 UIImageRotation 并将图像旋转 X 度的代码？尝试几乎所有东西。

```
NSLog(@"Image orientation %d",self.imageOrientation);
CGSize rotatedSize  = CGSizeApplyAffineTransform(self.size, CGAffineTransformMakeRotation(rad(degrees)));

if (rotatedSize.width < 0) {
    rotatedSize.width *= -1;
}
if (rotatedSize.height < 0) {
    rotatedSize.height *= -1;
}

// Create the bitmap context
UIGraphicsBeginImageContextWithOptions(rotatedSize, YES, 0.0);
CGContextRef bitmap = UIGraphicsGetCurrentContext();

// Move the origin to the middle of the image so we will rotate and scale around the center.
CGContextTranslateCTM(bitmap, rotatedSize.width/2, rotatedSize.height/2);

//   // Rotate the image context
CGContextRotateCTM(bitmap, rad(degrees));

// Now, draw the rotated/scaled image into the context
CGContextScaleCTM(bitmap, 1.0, -1.0);
CGContextDrawImage(bitmap, CGRectMake(-self.size.width / 2, -self.size.height / 2, self.size.width, self.size.height), [self CGImage]);

UIImage *newImage = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();

return newImage; 
```

# java - 线程 Java 代码问题

> ID：15956422
> 
> 赞同：1
> 
> 时间：2013-04-11T18:43:50.087
> 
> 标签：java, multithreading

我是这里的初学者，开始学习java编程。

我写了一个程序来尝试线程。在一个类中，我编写了一个程序来显示从 1 到 100 的数字，在另一个类中显示从 999 到 100 的数字。现在，我主要为类（r1，r2））创建了一个对象引用并创建了一个线程对象并将它们作为参数传递（r1，r2-我的类的对象引用）。现在我得到的输出在某种程度上不像预期的那样我觉得我的第二个线程没有被执行。我不确定我的逻辑或程序是否有任何问题。任何帮助/建议将不胜感激。我的代码如下供参考。

第一类：

```
public class Run implements Runnable {

@Override
public void run() {

    for (int i = 0; i < 100; i++) {
        try {

            Thread.sleep(200);
        } catch (InterruptedException ex) {
            Logger.getLogger(Run.class.getName()).log(Level.SEVERE, "...", ex);
        }
        System.out.println(i);
    }
}
} 
```

第 2 类：公共类 Run2 扩展 Thread {

```
public void run2() {

    for(int i=999;i>0;i--){
        try {

            Thread.sleep(500);
        } catch (InterruptedException ex) {
            Logger.getLogger(Run2.class.getName()).log(Level.SEVERE, "....", ex);
        }
        System.out.println(i);

    }

}
} 
```

主类：

```
public class Threading {

/**
 * @param args the command line arguments
 */
public static void main(String[] args) {

    Run r= new Run();
    Thread t1=new Thread(r);
     t1.start();

    Run2 r2=new Run2();
    Thread t2=new Thread(r2);

    t2.start();

}

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-11T18:50:58.470

将 Run2 的方法重命名`run2`为`run`. 你是线程的子类，所以你得到一个不做任何事情的 run 方法（实际上它检查它是否被传递到一个可运行的目标中，在这种情况下它调用目标上的 run，但由于目标是 null 它什么都不做），这就是正在运行的东西。

养成实现 Runnable 而不是扩展 Thread 的习惯，并使用 @Override 注释来捕捉你认为你正在覆盖某些东西但你没有覆盖的错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T18:51:21.727

你的类 Run2 的方法应该命名为 run 而不是 run2。

# c# - GDI+ 错误：透明度上的抗锯齿白色

> ID：15956424
> 
> 赞同：1
> 
> 时间：2013-04-11T18:43:57.457
> 
> 标签：c#, gdi+, transparent, antialiasing

以下代码将创建一个透明位图，然后在其上绘制一个带有抗锯齿的白色椭圆。

```
using(var background = new Bitmap(500, 500))
using (var graphics = Graphics.FromImage(background))
{
    graphics.SmoothingMode = SmoothingMode.AntiAlias;

    graphics.Clear(Color.Transparent);

    graphics.DrawEllipse(new Pen(Color.White, 50), 250, 250, 150, 150);

    background.Save("test.png", ImageFormat.Png);
 } 
```

我发现的错误是椭圆边缘周围的抗锯齿像素具有意想不到的颜色。它们的 RGB 值为 (254,254,254) 而不是 (255,255,255)。由于 GDI+ 将透明定义为 ARGB (0,255,255,255)，将白色定义为 (255,255,255,255)，为什么混合后我会看到 254？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-02-05T10:08:26.717

当我在 Mono (Mac OS X) 中从 SVG 生成 PNG 时遇到了同样的问题，但由于某种原因不在 Windows 上。

为了解决这个问题，我将图中最近的 rgb 值复制到了抗锯齿像素，但保留了抗锯齿 alpha 值。

该代码基于以下示例：[https ://msdn.microsoft.com/en-us/library/ms229672(v=vs.90).aspx](https://msdn.microsoft.com/en-us/library/ms229672(v=vs.90).aspx)

在保存方法之前作为最后一步运行的代码：

```
var pxf = PixelFormat.Format32bppArgb;
var rect = new Rectangle(0, 0, image.Width, image.Height);
BitmapData bmpData = image.LockBits(rect, ImageLockMode.ReadWrite, pxf);

IntPtr ptr = bmpData.Scan0;

int numBytes = image.Width * image.Height * 4;
byte[] rgbValues = new byte[numBytes];
Marshal.Copy(ptr, rgbValues, 0, numBytes);

for (int argb = 0; argb < rgbValues.Length; argb += 4) {
    var a = rgbValues [argb + 3]; //A
    if(a > 0x00 && a < 0xFF) { //Antialiasing:
        //Scan for neares solid with 0 transparency:
        for (int i = 0; i < 3; i++) { //3 pixels scan seems to be enough

            var right = argb + i * 4;
            var left = argb - i * 4;
            var up = argb - i * image.Width * 4;
            var down = argb + i * image.Width * 4;

            if (right < rgbValues.Length && rgbValues [right + 3] == 0xFF) {
                rgbValues [argb+2] = rgbValues [right + 2]; //R
                rgbValues [argb+1] = rgbValues [right + 1]; //G
                rgbValues [argb] = rgbValues [right];       //B
                break;
            } else if (left > 0 && rgbValues [left + 3] == 0xFF) {
                rgbValues [argb+2] = rgbValues [left + 2];
                rgbValues [argb+1] = rgbValues [left + 1];
                rgbValues [argb] = rgbValues [left];
                break;
            } else if (up > 0 && rgbValues [up + 3] == 0xFF) {
                rgbValues [argb+2] = rgbValues [up + 2];
                rgbValues [argb+1] = rgbValues [up + 1];
                rgbValues [argb] = rgbValues [up];
                break;
            } else if (down < rgbValues.Length && rgbValues [down + 3] == 0xFF) {
                rgbValues [argb+2] = rgbValues [down + 2];
                rgbValues [argb+1] = rgbValues [down + 1];
                rgbValues [argb] = rgbValues [down];
                break;
            }
        }
        //rgbValues [argb+3] = a; //Keep old alpha.
    }
}

Marshal.Copy(rgbValues, 0, ptr, numBytes);

image.UnlockBits(bmpData); 
```

`

# python - 将 python 日期变量与选择查询中的时间戳进行比较

> ID：15956425
> 
> 赞同：-2
> 
> 时间：2013-04-11T18:44:01.273
> 
> 标签：python, mysql

我想根据比较两个日期采取一些行动。日期 1 存储在 python 变量中。在 select 语句中从数据库中检索日期 2。例如，我想从数据库中检索一些记录，其中记录中的关联日期（以时间戳的形式）晚于 python 变量定义的日期。最好，我希望比较采用可读的日期格式，而不是时间戳。

我是python的初学者。

----编辑 ----- 抱歉含糊不清。这是我想做的事情：

从日期时间导入 MySQLdb 作为 mdb 从日期时间导入日期时间 导入日期 导入时间

conn = mdb.connect('localhost','root','root','my_db') cur = conn.cursor()

right_now = date.today()// python 日期

# 这是我想弄清楚的部分

数据库有一个带有时间戳的表。我想将该时间戳与该日期进行比较，然后根据该比较检索记录。例如，我想检索时间戳高于此日期的所有记录 cur.execute("SELECT created from node WHERE timestamp > right_now") results = cur.fetchall() for row in results: print row

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T19:38:53.097

首先，我猜 Date 1 （python 变量）是一个 datetime 对象。[http://docs.python.org/2/library/datetime.html](http://docs.python.org/2/library/datetime.html)

就我使用它而言，如果 sql 类型是 datetime，MySQLdb 会为您提供 (python) datetime 对象的结果。

所以实际上你什么都不做，你可以使用python datetime比较方法与日期1和日期2。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T19:53:10.763

我对“以可读日期格式而不是时间戳进行比较”有点困惑。我的意思是时间戳足够可读，对吧？

如果 Date 1 是时间戳数据，那么您只需进行比较。如果没有，则将其转换为时间戳或将数据库中的日期转换为日期类型，两种方式都可以。

如果您询问如何编写代码来进行比较，您可以使用“_mysql”或 sqlalchemy 来帮助您。详细的语法可以在任何地方找到。

反正问题本身还不够清楚，所以答案也很模糊。

# windows-mobile - Intermec CK30 BarcodeReader 错误

> ID：15956431
> 
> 赞同：1
> 
> 时间：2013-04-11T18:44:16.293
> 
> 标签：windows-mobile, compact-framework2.0, intermec

我正在为 Intermec CK3 和 CK30 使用 .NET CF 2.0 开发应用程序。

我正在为两个版本的应用程序使用最新且相同版本的 IntermecDataCollection，并使用相同的代码来读取条形码。

该应用程序在 CK3（最新型号）上完美运行，但是当我尝试使用 CK30 读取某些内容时，结果是与预期不同的代码。

通常一些字符出现在正确的代码前面，但在某些情况下，结果与原来的完全不同。

已经成功使用谷歌搜索。

谁能帮我？

在 CK3 而不是 CK30 上工作的代码示例：

```
using System;

using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Text;
using System.IO;
using System.Windows.Forms;

using WOPT_Coletor.ConectorWOPT;

using Intermec.DataCollection;

namespace WOPT_Coletor.view.CriarOT
{
    public partial class frmCriarOT_5 : Form
    {

        public BarcodeReader leitor;

        public frmCriarOT_5(int areaSelecionada, int tipoOT, long nlenr, int qtdEtq)
        {
            InitializeComponent();

            //Instanciete the barcode reader class.
            model.LeitorCodigoDeBarras classeLeitor = new model.LeitorCodigoDeBarras();
            leitor = classeLeitor.LerCodigoDeBarras();
            leitor.BarcodeRead += new BarcodeReadEventHandler(this.eventoLeitorCodigoDeBarras);

        }

        void eventoLeitorCodigoDeBarras(object sender, BarcodeReadEventArgs e)
        {
            tbMaterial.Text = e.strDataBuffer.Trim().ToUpper();
        }

       }
}

using System;

using System.Collections.Generic;
using System.Text;
using System.Windows.Forms;

using Intermec.DataCollection;

namespace WOPT_Coletor.model
{
    class LeitorCodigoDeBarras
    {
        public BarcodeReader LerCodigoDeBarras()
        {
            try
            {
                BarcodeReader meuLeitor = new BarcodeReader("default", 4096);
                meuLeitor.ScannerEnable = true;
                meuLeitor.ThreadedRead(true);

                return meuLeitor;
            }
            catch (BarcodeReaderException bx)
            {
                MessageBox.Show("Não foi possível inicializar o leitor de código de barras. Contate seu supervisor. \n" + bx.Message, "Erro", MessageBoxButtons.OKCancel, MessageBoxIcon.Exclamation, MessageBoxDefaultButton.Button1);

                return null;
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T16:03:53.923

有几件事浮现在脑海。

首先，您`BarcodeReadEventHandler`可能无法保证一次性发送所有数据。

*   您如何处理`BarcodeReadEventHandler`触发多个事件？

换句话说，此代码可能**不会**收集整个条形码：

```
void eventoLeitorCodigoDeBarras(object sender, BarcodeReadEventArgs e)
{
  tbMaterial.Text = e.strDataBuffer.Trim().ToUpper();
} 
```

接下来，`Trim()`可能`ToUpper()`会弄乱您的数据。您可以尝试删除这些以查看您的数据是否已清除。

您可能希望使用静态缓冲区来存储数据，这样您就可以确定您正在显示发送的所有内容。

**我没有你的 Intermec BarcodeReader 控件，所以我无法测试和验证下面的代码是否有效**，但这是我建议的方法。

```
private const int BARCODE_BEGIN = '\u001C'; // our devices start a barcode with a File Separator
private const int BARCODE_END = '\u000A'; // our devices are set to send a Line Feed
private const int MAX_BUFFER = 1024; // set to whatever you want
private const int NULL_CHAR = '\u0000';
private static byte[] buffer;
public BarcodeReader leitor;

public frmCriarOT_5(int areaSelecionada, int tipoOT, long nlenr, int qtdEtq)
{
  InitializeComponent();
  //Instanciete the barcode reader class.
  model.LeitorCodigoDeBarras classeLeitor = new model.LeitorCodigoDeBarras();
  leitor = classeLeitor.LerCodigoDeBarras();
  leitor.BarcodeRead += new BarcodeReadEventHandler(this.eventoLeitorCodigoDeBarras);
  ResetBuffer();
}

private void ResetBuffer()
{
  buffer = new byte[MAX_BUFFER];
  for (int i = 0; i < MAX_BUFFER; i++) {
    buffer[i] = NULL_CHAR;
  }
}

void eventoLeitorCodigoDeBarras(object sender, BarcodeReadEventArgs e)
{
  byte[] data = Encoding.UTF8.GetBytes(e.strDataBuffer);
  int buffIndex = 0;
  for (int i = 0; i < MAX_BUFFER; i++) {
    if (buffer[i] == NULL_CHAR) {
      buffIndex = i;
      break;
    }
  }
  for (int i = 0; (i < data.Length) && (i < MAX_BUFFER); i++) {
    byte c = data[i];
    if (c != BARCODE_END) {
      buffer[i + buffIndex] = c;
    } else {
      tbMaterial.Text = Encoding.UTF8.GetString(buffer, buffIndex, i);
      ResetBuffer();
    }
  }
} 
```

# visual-studio-2010 - vs2010 : 给缩进/缩进行一个热键

> ID：15956437
> 
> 赞同：0
> 
> 时间：2013-04-11T18:44:48.297
> 
> 标签：visual-studio-2010, visual-studio

在VS2010中通过`edit/advanced/increase line indent`and`decrease line indent`命令，可以很方便的控制多行的缩进。问题是没有为他们分配热键，我找不到一些明显的方法来给他们热键。我怎样才能做到这一点？如果不可能，我希望至少将它们放在我的编辑器上下文菜单上，而不是西北角。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T18:47:33.990

您可以选择要更改缩进的行，然后按`Tab`或`Shift`+ `Tab`。

# c++ - 构建 mongodb 驱动程序（视觉工作室）

> ID：15956443
> 
> 赞同：0
> 
> 时间：2013-04-11T18:45:09.580
> 
> 标签：c++, visual-studio, mongodb

是否可以在 Visual Studio 2012 下将 mongodb 驱动程序构建为共享库？在文档中找不到任何内容。

当我将它构建为静态库时，它的大小超过 200MB（发布版本）=> 似乎不对

任何人都知道是否有努力构建另一个没有依赖关系的 c++ 驱动程序？（有一个 c 驱动程序就是这种情况）

# java - 使用 lsof 对“打开的文件过多”进行故障排除

> ID：15956452
> 
> 赞同：13
> 
> 时间：2013-04-11T18:45:34.847
> 
> 标签：java, ioexception, lsof

我有一个在 PID 25426 的 Linux 上运行的 Java 应用程序。运行时`lsof -p 25426`，我注意到：

```
java    25426 uid  420w  FIFO                0,8      0t0 273664482 pipe
java    25426 uid  421r  FIFO                0,8      0t0 273664483 pipe
java    25426 uid  461r  FIFO                0,8      0t0 273622888 pipe
java    25426 uid  463w  FIFO                0,8      0t0 273633139 pipe
java    25426 uid  464r  FIFO                0,8      0t0 273633140 pipe
java    25426 uid  465r  FIFO                0,8      0t0 273622889 pipe
java    25426 uid  471w  FIFO                0,8      0t0 273623682 pipe
java    25426 uid  472r  FIFO                0,8      0t0 273633141 pipe 
```

这个结果应该如何解释？

我正在对打开文件过多的问题进行故障排除，并试图了解此观察结果是否相关。

随着应用程序继续运行，`pipe`条目数会发生变化（上升和下降）。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-04-11T19:25:24.103

# 定义

> *   **java** - 打开文件的进程。
> *   **25426** - 这应该是真正的 PID。如果没有，请通过发布标题让我们知道它是什么。
> *   **420** w - 文件描述符编号，后跟打开文件的模式。（读/写）
> *   **0,8** - 主要次要设备标识。
> *   **273664482** - 文件的 inode。
> *   **pipe** - 在您的应用程序中打开的 FIFO 管道。

# 解释

您没有关闭所有流。有许多处于读取或写入模式的打开文件描述符正在写入未命名的管道。发生这种情况的最常见情况是人们使用[Runtime.getRuntime.exec()](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Runtime.html#exec%28java.lang.String%29)然后继续保持与进程关联的流打开。您可以使用 commons IO utils 库来[关闭它们](http://mark.koli.ch/2011/01/leaky-pipes-remember-to-close-your-streams-when-using-javas-runtimegetruntimeexec.html)，也可以[自己关闭它们](https://github.com/GreenGroup/RMG-Java/commit/c56ff8d)。

```
 try
    {
        p = Runtime.getRuntime().exec("something");
    }
    finally
    {
        if (p != null)
        {
            IOUtils.closeQuietly(p.getOutputStream());
            IOUtils.closeQuietly(p.getInputStream());
            IOUtils.closeQuietly(p.getErrorStream());
        }
    } 
```

如果这不是问题，您将需要深入研究您的代码库并确定泄漏流的位置并插入它们。

# asp.net - 将 ASP.Net GridView 列设置为固定大小并进行自动换行

> ID：15956457
> 
> 赞同：0
> 
> 时间：2013-04-11T18:45:51.563
> 
> 标签：asp.net, gridview, word-wrap, fixed-width

在 ASP.Net Web 表单中有一个 GridView。我们希望此 GridView 中的 1 列具有固定大小，并且其中的文本也进行自动换行。我们无法让它工作。

这是我尝试过的标记：

```
<asp:BoundField DataField="AssignmentDetails" HeaderText="Assignment" 
    SortExpression="AssignmentDetails" ItemStyle-Width="20" ItemStyle-Wrap="true">

    <HeaderStyle HorizontalAlign="Left" />
    <ItemStyle HorizontalAlign="Left" />
</asp:BoundField> 
```

我们认为这会使列宽 20 个字符并使单词换行，但事实并非如此。

*** 更新 ***

它现在基于 Darren 的编码示例工作。这是 GridView 的完整标记和使用他的技术的代码隐藏：

```
 <asp:GridView
            ID="GridViewSummary" 
            runat="server" 
            AllowSorting="True" 
            AutoGenerateColumns="False" 
            DataKeyNames="ID" 
            Width="691px" 
            AllowPaging="True"
            PageSize="5"
            OnRowDataBound="GridViewSummary_RowDataBound">

            <Columns>
                <asp:BoundField DataField="AssignmentDate" HeaderText="Date" 
                    SortExpression="AssignmentDate" DataFormatString="{0:MM/dd/yyyy}">

                    <HeaderStyle HorizontalAlign="Left" />
                    <ItemStyle HorizontalAlign="Left" />
                </asp:BoundField>

                <asp:BoundField DataField="AssignmentDueDate" HeaderText="Date Due" 
                    SortExpression="AssignmentDueDate" DataFormatString="{0:MM/dd/yyyy}">

                    <HeaderStyle HorizontalAlign="Left" />
                    <ItemStyle HorizontalAlign="Left" />
                </asp:BoundField>

                <asp:BoundField DataField="Class" HeaderText="Class" 
                    SortExpression="Class">

                    <HeaderStyle HorizontalAlign="Left" />
                    <ItemStyle HorizontalAlign="Left" />
                </asp:BoundField>

                <asp:BoundField DataField="TeacherName" HeaderText="Teacher" 
                    SortExpression="TeacherName">

                    <HeaderStyle HorizontalAlign="Left" />
                    <ItemStyle HorizontalAlign="Left" />
                </asp:BoundField>

                <asp:TemplateField HeaderText="Assignment" SortExpression="AssignmentDetails">
                    <ItemTemplate>
                        <asp:Label ID="LabelAssignment" runat="server" Text='<%# Bind("AssignmentDetails") %>'></asp:Label>
                    </ItemTemplate>

                    <HeaderStyle HorizontalAlign="Left" />
                    <ItemStyle HorizontalAlign="Left" Wrap="True" />
                </asp:TemplateField>

                <asp:TemplateField ShowHeader="False">
                    <ItemTemplate>
                        <asp:Button 
                            ID="ButtonSelect" 
                            runat="server" 
                            CausesValidation="False" 
                            CommandName="Select" 
                            Text="Select Assignment Details" />
                    </ItemTemplate>
                </asp:TemplateField>
            </Columns>
        </asp:GridView> 
```

代码隐藏：

```
Protected Sub GridViewSummary_RowDataBound(sender As Object, e As GridViewRowEventArgs)

    ' Deal with Data type rows, and not headers etc.
    '-----------------------------------------------
    If (e.Row.RowType = DataControlRowType.DataRow) Then

        Dim lblAssignment As Label = e.Row.FindControl("LabelAssignment")

        ' Call a recursive method and insert a line break every 20 chars.
        '----------------------------------------------------------------
        lblAssignment.Text = InsertlineBreak(lblAssignment.Text)
    End If
End Sub

Function InsertlineBreak(ByVal original As String) As String

    Dim MaxStringLength As Int16 = 20

    If original.Length > MaxStringLength Then
        Dim indexOfSpace = original.IndexOf(" ", MaxStringLength - 1)
        If indexOfSpace <> -1 AndAlso indexOfSpace <> original.Length - 1 Then
            Dim firstString As String = original.Substring(0, indexOfSpace)
            Dim secondString As String = original.Substring(indexOfSpace)

            Return firstString & "<br/>" & InsertlineBreak(secondString)
        Else
            Return original
        End If
    Else
        Return original
    End If
End Function 
```

我还将这项技术应用于我们的 DetailsView 以及在此标记和代码隐藏中显示：

```
 <asp:TemplateField HeaderText="Details:" SortExpression="AssignmentDetails">
                    <EditItemTemplate>
                        <asp:TextBox ID="TextBoxAssignmentDetails" runat="server" Text='<%# Bind("AssignmentDetails") %>' TextMode="MultiLine"
                            rows="5"></asp:TextBox>
                    </EditItemTemplate>

                    <InsertItemTemplate>
                        <asp:TextBox ID="TextBoxAssignmentDetails" runat="server" Text='<%# Bind("AssignmentDetails") %>' TextMode="MultiLine"
                            rows="5"></asp:TextBox>
                    </InsertItemTemplate>

                    <ItemTemplate>
                        <asp:Label 
                            ID="LabelAssignmentDetails" 
                            runat="server" 
                            Text='<%# Bind("AssignmentDetails") %> '
                            OnDataBinding="LabelAssignmentDetails_DataBinding">
                        </asp:Label>
                    </ItemTemplate>

                    <ItemStyle ForeColor="Blue" />
                </asp:TemplateField> 
```

代码隐藏：

```
Protected Sub LabelAssignmentDetails_DataBinding(sender As Object, e As EventArgs)

    Dim lblAssignment As Label = DetailsView.FindControl("LabelAssignmentDetails")

    ' Call a recursive method and insert a line break every 20 chars.
    '----------------------------------------------------------------
    lblAssignment.Text = InsertlineBreak(lblAssignment.Text)
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T19:27:16.333

好的，所以项目宽度不起作用，因为它是基于像素的，而不是 Jason 所说的基于字符的。

您需要为网格中的每一行处理 RowDataBound 事件。

这个例子是在 VB 中，虽然我敢肯定将它转换为 C# 对你来说不会太难。

在你的代码隐藏中做这样的事情 - 用你的网格名称替换“MyGridView”。

首先，将您的绑定字段更改为模板字段；更容易控制..在那个模板中放一个`Literal`可以保存你的文本，在这个例子中调用这个 MyLit

```
Private Sub MyGridView(ByVal sender As Object, ByVal e As System.Web.UI.WebControls.GridViewRowEventArgs) Handles MyGridView.RowDataBound
        '' only want to deal with Data type rows, and not headers etc
        If (e.Row.RowType = DataControlRowType.DataRow) Then

             '' get this instance of the object you're binding (assuming object is Assignment)
             Dim assignment As Assignment = CType(e.Row.DataItem, Assignment)
             '' now get the literal control where you will be putting your text
            Dim MyLit as Literal = row.FindControl("MyLit")

            '' you can now call a recursive method and insert a line break every 20 chars
            MyLit.Text = InsertlineBreak(assignment.TextToSplitUp)

        End If

End Sub

 Function InsertlineBreak(ByVal original As String) As String
        Dim MaxStringLength As Int16 = 20

        If original.Length > MaxStringLength Then
            Dim indexOfSpace = original.IndexOf(" ", MaxStringLength - 1)
            If indexOfSpace <> -1 AndAlso indexOfSpace <> original.Length - 1 Then
                Dim firstString As String = original.Substring(0, indexOfSpace)
                Dim secondString As String = original.Substring(indexOfSpace)

                Return firstString & Chr(10) & InsertlineBreak(secondString)
            Else
                Return original
            End If
        Else
            Return original
        End If
    End Function 
```

**我还没有测试过这段代码**——例如，我刚刚敲过它，尽管它会给你一个关于如何继续的想法。请不要只是复制/粘贴然后评论它不能直接使用。需要知道更多才能给出一个确切的工作示例。:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-23T05:12:30.653

设置`ItemStyle-CssClass="WrappedText"`，并在 CSS 中执行：

```
.WrappedText
{
  word-break: break-all;
  word-wrap: break-word;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T18:49:18.857

`ItemStyle-Width`设置列的像素宽度，而不是字符数。如果内容不能以 20 像素包装，则会扩展列。

# android - Android SQLite 使用 execSQL 捕获错误

> ID：15956458
> 
> 赞同：0
> 
> 时间：2013-04-11T18:45:53.297
> 
> 标签：android, sql, sqlite

我有一种方法可以运行从外部资源而不是从 android 设备获取的 INSERT SQL 语句。传入的语句可能会导致重复记录，如果它们导致重复，我希望 android 设备忽略 sql 语句。方法是：

```
 ourDatabase.execSQL(sql) 
```

将数据插入其中的表具有防止重复的以下列

```
 KEY_CONCATA + " TEXT PRIMARY KEY , " + 
```

这应该是唯一的而不是主键吗？

目前系统识别出它导致重复并结束程序，我希望它捕获错误并停止将其插入到数据库中，如果它是重复的。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T18:54:07.903

声明`KEY_CONCATA TEXT NOT NULL UNIQUE`并在插入时`insertWithOnConflict`与`SQLiteDatabase.CONFLICT_IGNORE`标志一起使用

# asp.net-mvc - 如何在 C# 中使用泛型将类转换为接口？

> ID：15956460
> 
> 赞同：0
> 
> 时间：2013-04-11T18:45:56.467
> 
> 标签：asp.net-mvc, class, c#-4.0, generics, interface

我有这个界面：

```
public interface IRepository<T>
{
    List<T> List();
    T Get(int Id);        
    bool Add(T entity);
    bool Update(T entity);
} 
```

我有这门课：

```
public class Customer<T> : IRepository<Entities.Customer>
{
   public Entities.Customer Get(int Id)
   {
      var c = new Entities.Customer();
      return c;
   }

   //continue...
} 
```

如何将泛型类转换为这样的泛型接口：

```
//Other method
public IRepositorio<T> DoStuff<T>(int Id)
{  
   var a = (IRepository<Entities.Customer>)Activator.CreateInstance(typeof(T)); // ok               
   var b = (IRepository<T>)Activator.CreateInstance(typeof(T)); // Exception: unable to cast       

   return object; // an object
} 
```

我从这个 MCV 控制器调用：

```
 public ActionResult Home()
  {
     var repo = new Repository();
     repo.DoStuff<Customer<Entities.Custormer>>(10);

     return View();
  } 
```

我的受孕还好吗？没有动态这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T19:22:01.650

`Activator.CreateInstance(typeof(T));`- 这会为您创建 的新实例`T`，这`Entities.Customer`在您的示例中，但看起来您想要创建 的实例`Customer<Entities.Customer>`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T18:54:16.813

根据提供的代码，我尝试了以下编译好的

```
public class Entities {
    public class Customer {
    }
}

public interface IRepository<T> {
    T Get(int Id);
}

public class Customer<T> : IRepository<Entities.Customer> {
    public Entities.Customer Get(int Id) {
        var cliente = new Entities.Customer();
        return cliente;
    }
}

public class foo {

    public static IRepository<T> DoStuff<T>(int Id) {
        var a = (IRepository<Entities.Customer>)Activator.CreateInstance(typeof(T));
        var b = (IRepository<T>)Activator.CreateInstance(typeof(T));

        return b; // an object
    }

} 
```

但是，我不确定 T 是什么意思。当我跑步和打电话时

```
foo.DoStuff<Entities.Customer>(0); 
```

然后我就`var a`行了一个运行时错误，因为该类`Entities.Customer`没有实现接口`IRepository<T>`。如果我打电话

```
foo.DoStuff<Customer<Entities.Customer>>(0); 
```

然后我在'var b'行上得到运行时错误，因为类`Customer<Entities.Customer>`实现`IRepository<Entities.Customer>`而不是`IRepository<Customer<Entities.Customer>>`

这两个例外都是正确的，所以希望问题的作者可以从这个答案中找出问题所在。

# paypal - Broadleaf Commerce 无法与 Paypal 快递模块集成

> ID：15956461
> 
> 赞同：0
> 
> 时间：2013-04-11T18:45:56.567
> 
> 标签：paypal, e-commerce, broadleaf-commerce

我按照 Broadleaf 的文档（这里是链接：[http](http://docs.broadleafcommerce.org/2.2/PayPal-Quick-Start.html) : //docs.broadleafcommerce.org/2.2/PayPal-Quick-Start.html ）将 Broadleaf 的 DemoSite 环境与 Paypal express 模块集成。为了在开发环境中实现这一点，我创建了一个沙盒帐户并将其相关值设置为站点。

但是，当我通过将商品添加到购物车并单击“快速结帐”按钮来测试我的 DemoSite 时，它​​导致我的 DemoSite 出现以下错误：

```
org.broadleafcommerce.core.payment.service.exception.PaymentException: Unable to execute payment for order -- id: 1
    at org.broadleafcommerce.core.payment.service.CompositePaymentServiceImpl.executePayment(CompositePaymentServiceImpl.java:69)
    at org.broadleafcommerce.core.payment.service.CompositePaymentServiceImpl.executePayment(CompositePaymentServiceImpl.java:74)
    at org.broadleafcommerce.core.payment.service.CompositePaymentServiceImpl.executePaymentForGateway(CompositePaymentServiceImpl.java:90)
    at org.broadleafcommerce.vendor.paypal.service.payment.PayPalCheckoutServiceImpl.initiateExpressCheckout(PayPalCheckoutServiceImpl.java:87)
    at org.broadleafcommerce.vendor.paypal.web.controller.BroadleafPayPalController.paypalCheckout(BroadleafPayPalController.java:84)
    at com.mycompany.controller.paypal.PayPalController.paypalCheckout(PayPalController.java:21)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.springframework.web.method.support.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:219)
    at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:132)
    at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:100)
    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:604)
    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:565)
    at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:80)
    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:923)
    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:852)
    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:882)
    at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:778)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:735)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:848)
    at org.eclipse.jetty.servlet.ServletHolder.handle(ServletHolder.java:643)
    at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1331)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:330)
    at org.broadleafcommerce.cms.web.URLHandlerFilter.doFilterInternal(URLHandlerFilter.java:74)
    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:192)
    at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:166)
    at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:346)
    at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:259)
    at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1302)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:330)
    at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:118)
    at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:84)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:113)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    at org.broadleafcommerce.profile.web.core.security.SessionFixationProtectionFilter.doFilter(SessionFixationProtectionFilter.java:96)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:113)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    at org.broadleafcommerce.core.web.order.security.CartStateFilter.doFilter(CartStateFilter.java:58)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    at org.broadleafcommerce.profile.web.core.security.CustomerStateFilter.doFilter(CustomerStateFilter.java:54)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:54)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:45)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:183)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    at org.broadleafcommerce.common.security.handler.CsrfFilter.doFilter(CsrfFilter.java:83)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:105)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:87)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    at org.springframework.security.web.access.channel.ChannelProcessingFilter.doFilter(ChannelProcessingFilter.java:144)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:192)
    at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:166)
    at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:346)
    at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:259)
    at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1302)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:330)
    at org.broadleafcommerce.common.web.BroadleafRequestFilter.doFilterInternal(BroadleafRequestFilter.java:98)
    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    at org.springframework.orm.jpa.support.OpenEntityManagerInViewFilter.doFilterInternal(OpenEntityManagerInViewFilter.java:147)
    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:192)
    at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:160)
    at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:346)
    at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:259)
    at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1302)
    at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:448)
    at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:131)
    at org.eclipse.jetty.security.SecurityHandler.handle(SecurityHandler.java:524)
    at org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:231)
    at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1067)
    at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:377)
    at org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:192)
    at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:1001)
    at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:129)
    at org.eclipse.jetty.server.handler.ContextHandlerCollection.handle(ContextHandlerCollection.java:250)
    at org.eclipse.jetty.server.handler.HandlerCollection.handle(HandlerCollection.java:149)
    at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:111)
    at org.eclipse.jetty.server.Server.handle(Server.java:360)
    at org.eclipse.jetty.server.AbstractHttpConnection.handleRequest(AbstractHttpConnection.java:454)
    at org.eclipse.jetty.server.AbstractHttpConnection.headerComplete(AbstractHttpConnection.java:890)
    at org.eclipse.jetty.server.AbstractHttpConnection$RequestHandler.headerComplete(AbstractHttpConnection.java:944)
    at org.eclipse.jetty.http.HttpParser.parseNext(HttpParser.java:630)
    at org.eclipse.jetty.http.HttpParser.parseAvailable(HttpParser.java:230)
    at org.eclipse.jetty.server.AsyncHttpConnection.handle(AsyncHttpConnection.java:77)
    at org.eclipse.jetty.io.nio.SelectChannelEndPoint.handle(SelectChannelEndPoint.java:622)
    at org.eclipse.jetty.io.nio.SelectChannelEndPoint$1.run(SelectChannelEndPoint.java:46)
    at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:603)
    at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:538)
    at java.lang.Thread.run(Thread.java:662)
Caused by: org.broadleafcommerce.core.workflow.WorkflowException: org.broadleafcommerce.core.workflow.WorkflowException: org.broadleafcommerce.core.payment.service.exception.PaymentException: The PaymentResponseItem instance did not contain one or more of the following: transactionAmount, transactionTimestamp or transactionSuccess
    at org.broadleafcommerce.core.workflow.DefaultErrorHandler.handleError(DefaultErrorHandler.java:57)
    at org.broadleafcommerce.core.workflow.SequenceProcessor.doActivities(SequenceProcessor.java:84)
    at org.broadleafcommerce.core.payment.service.CompositePaymentServiceImpl.executePayment(CompositePaymentServiceImpl.java:55)
    ... 101 more
Caused by: org.broadleafcommerce.core.workflow.WorkflowException: org.broadleafcommerce.core.payment.service.exception.PaymentException: The PaymentResponseItem instance did not contain one or more of the following: transactionAmount, transactionTimestamp or transactionSuccess
    at org.broadleafcommerce.core.workflow.DefaultErrorHandler.handleError(DefaultErrorHandler.java:57)
    at org.broadleafcommerce.core.workflow.SequenceProcessor.doActivities(SequenceProcessor.java:84)
    at org.broadleafcommerce.core.payment.service.workflow.CompositeActivity.execute(CompositeActivity.java:35)
    at org.broadleafcommerce.core.workflow.SequenceProcessor.doActivities(SequenceProcessor.java:75)
    ... 102 more
Caused by: org.broadleafcommerce.core.payment.service.exception.PaymentException: The PaymentResponseItem instance did not contain one or more of the following: transactionAmount, transactionTimestamp or transactionSuccess
    at org.broadleafcommerce.core.payment.service.workflow.PaymentActivity.execute(PaymentActivity.java:151)
    at org.broadleafcommerce.core.workflow.SequenceProcessor.doActivities(SequenceProcessor.java:75)
    ... 104 more 
```

因此，谁能指导我如何解决上述问题。提前致谢。

顺便说一句，我的 DemoSite 是根据 Broadleaf 2.2 和 Broadleaf-paypal 2.0.1 构建的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T09:43:10.310

问题出在方法 PayPalPaymentModule.reverseAuthorize() 中。在第一行 responseItem.setAmountPaid(paymentContext.getPaymentInfo().getAmount()); 它使用不推荐使用的方法 setAmountPaid()。我认为应该有 setTransactionAmount()。也许您可以将其发布到阔叶论坛！

我正在使用 Broadleaf 2.3.0-SNAPSHOT 和 BL paypal 2.2.0-SNAPSHOT

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T12:33:18.937

我为这个问题编写了一个解决方法！

```
package de.naschkammer.payment.service.module;

import org.broadleafcommerce.core.payment.domain.PaymentResponseItem;
import org.broadleafcommerce.core.payment.service.PaymentContext;
import org.broadleafcommerce.core.payment.service.exception.PaymentException;
import org.broadleafcommerce.payment.service.module.PayPalPaymentModule;
import org.broadleafcommerce.vendor.paypal.service.payment.type.PayPalTransactionType;

// TODO remove this workaround for paypal, don't forget to adjust /site/src/main/webapp/WEB-INF/applicationContext.xml
public class NaschkammerPayPalPaymentModule extends PayPalPaymentModule {

    @Override
    public PaymentResponseItem authorizeAndDebit(PaymentContext paymentContext) throws PaymentException {
        PaymentResponseItem item = commonAuthorizeOrSale(paymentContext, PayPalTransactionType.AUTHORIZEANDCAPTURE);
        if ( item != null ) {
            item.setTransactionAmount(item.getAmountPaid());
        }
        return item;
    }

} 
```

将以下代码段添加到文件 /site/src/main/webapp/WEB-INF/applicationContext.xml

```
<!-- workaround for paypal -->
<bean id="blPayPalModule" class="de.naschkammer.payment.service.module.NaschkammerPayPalPaymentModule">
    <property name="payPalPaymentService" ref="blPayPalVendorOrientedPaymentService"/>
</bean> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T15:37:56.430

看起来目前还有其他问题使 PayPal 模块无法用于 Broadleaf 2.3 版。这些在[GitHub 问题页面](https://github.com/BroadleafCommerce/blc-paypal/issues)中进行了概述。

另一个注意事项：我们已经更改了 PayPal 模块的一些版本控制。如果您的目标是 Broadleaf 版本 2.3.0-SNAPSHOT，那么您应该使用 PayPal 版本 2.4.0-SNAPSHOT（这是[GitHub 上](https://github.com/BroadleafCommerce/blc-paypal/tree/develop)的“开发”分支。

如果您对那里列出的这些问题有一些修复，我们希望您提交拉取请求。否则，我们将尝试在下周的某个时间修复这些问题。

# shell - 系统调用、shell 命令和程序

> ID：15956462
> 
> 赞同：4
> 
> 时间：2013-04-11T18:46:08.227
> 
> 标签：shell, executable, system-calls

我试图了解程序、shell 命令和操作系统是如何工作的。请原谅我的无知，因为我是新手。

当我在命令行上使用 C 编译器时，当我键入 cc [filename] 时，我想 shell 使用 fork() 系统调用来复制其进程，然后 exec() 系统调用会将 cc 编译器可执行文件加载到子进程的核心形象。然后包含 cc 可执行文件的子进程将在执行 shell 的父进程等待或不等待时执行它的操作。这样对吗？

像 cp、mv、ls 等 shell 命令呢？这些是什么？它们是可执行程序，也将在 shell 派生的新子进程中执行吗？shell脚本呢？假设我创建了一个像这样的简单 shell 脚本（请忽略我还不知道如何执行此操作的任何错误）：

```
echo "Hello" 

date

echo

cc -o test file1.c file2.c file3.c 
```

然后我使用命令行执行这个脚本。命令行会 fork() 一个新进程并在新进程中 exec() 这个脚本吗？然后这个包含脚本 fork() 的新进程是否会在其他进程中执行日期、cc 编译器等？

我希望这听起来不会太令人困惑，因为我是 =/。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-11T18:56:10.190

是的！你有这个想法。

> 当我在命令行上使用 C 编译器时，当我键入 cc [filename] 时，我想 shell 使用 fork() 系统调用来复制其进程，然后 exec() 系统调用会将 cc 编译器可执行文件加载到子进程的核心形象。然后包含 cc 可执行文件的子进程将在执行 shell 的父进程等待或不等待时执行它的操作。这样对吗？

这是正确的。父进程（shell）调用子进程[`wait()`](http://linux.die.net/man/2/wait)的 PID 并等待它退出。

> 像 cp、mv、ls 等 shell 命令呢？这些是什么？它们是可执行程序，也将在 shell 派生的新子进程中执行吗？

一样。这些是二进制文件，就像编译器一样，shell 为它们做同样的事情。

现在有一些命令不是称为“内置”的外部二进制文件。这些是 shell 识别自己的命令，不需要调用外部二进制文件。为什么？

*   有些具有特殊语法，例如`if`and `while`，因此必须将其内置到 shell 中。
*   有些，比如`cd`and `read`，会改变 shell 进程的状态，所以必须是内置的。（外部二进制文件不可能更改 shell 的当前目录，因为分叉的进程只能更改自己的 PWD，而不是父进程的。）
*   其他的，比如`echo`and `printf`，可能是单独的二进制文件，只是碰巧由 shell 实现。

这是我通过输入获得的 bash 内置函数的完整列表`help`：

```
 job_spec [&]                                                          history [-c] [-d offset] [n] or history -anrw [filename] or histor>
 (( expression ))                                                      if COMMANDS; then COMMANDS; [ elif COMMANDS; then COMMANDS; ]... [>
 . filename [arguments]                                                jobs [-lnprs] [jobspec ...] or jobs -x command [args]
 :                                                                     kill [-s sigspec | -n signum | -sigspec] pid | jobspec ... or kill>
 [ arg... ]                                                            let arg [arg ...]
 [[ expression ]]                                                      local [option] name[=value] ...
 alias [-p] [name[=value] ... ]                                        logout [n]
 bg [job_spec ...]                                                     mapfile [-n count] [-O origin] [-s count] [-t] [-u fd] [-C callbac>
 bind [-lpvsPVS] [-m keymap] [-f filename] [-q name] [-u name] [-r k>  popd [-n] [+N | -N]
 break [n]                                                             printf [-v var] format [arguments]
 builtin [shell-builtin [arg ...]]                                     pushd [-n] [+N | -N | dir]
 caller [expr]                                                         pwd [-LP]
 case WORD in [PATTERN [| PATTERN]...) COMMANDS ;;]... esac            read [-ers] [-a array] [-d delim] [-i text] [-n nchars] [-N nchars>
 cd [-L|[-P [-e]]] [dir]                                               readarray [-n count] [-O origin] [-s count] [-t] [-u fd] [-C callb>
 command [-pVv] command [arg ...]                                      readonly [-aAf] [name[=value] ...] or readonly -p
 compgen [-abcdefgjksuv] [-o option]  [-A action] [-G globpat] [-W w>  return [n]
 complete [-abcdefgjksuv] [-pr] [-DE] [-o option] [-A action] [-G gl>  select NAME [in WORDS ... ;] do COMMANDS; done
 compopt [-o|+o option] [-DE] [name ...]                               set [-abefhkmnptuvxBCHP] [-o option-name] [--] [arg ...]
 continue [n]                                                          shift [n]
 coproc [NAME] command [redirections]                                  shopt [-pqsu] [-o] [optname ...]
 declare [-aAfFgilrtux] [-p] [name[=value] ...]                        source filename [arguments]
 dirs [-clpv] [+N] [-N]                                                suspend [-f]
 disown [-h] [-ar] [jobspec ...]                                       test [expr]
 echo [-neE] [arg ...]                                                 time [-p] pipeline
 enable [-a] [-dnps] [-f filename] [name ...]                          times
 eval [arg ...]                                                        trap [-lp] [[arg] signal_spec ...]
 exec [-cl] [-a name] [command [arguments ...]] [redirection ...]      true
 exit [n]                                                              type [-afptP] name [name ...]
 export [-fn] [name[=value] ...] or export -p                          typeset [-aAfFgilrtux] [-p] name[=value] ...
 false                                                                 ulimit [-SHacdefilmnpqrstuvx] [limit]
 fc [-e ename] [-lnr] [first] [last] or fc -s [pat=rep] [command]      umask [-p] [-S] [mode]
 fg [job_spec]                                                         unalias [-a] name [name ...]
 for NAME [in WORDS ... ] ; do COMMANDS; done                          unset [-f] [-v] [name ...]
 for (( exp1; exp2; exp3 )); do COMMANDS; done                         until COMMANDS; do COMMANDS; done
 function name { COMMANDS ; } or name () { COMMANDS ; }                variables - Names and meanings of some shell variables
 getopts optstring name [arg]                                          wait [id]
 hash [-lr] [-p pathname] [-dt] [name ...]                             while COMMANDS; do COMMANDS; done
 help [-dms] [pattern ...]                                             { COMMANDS ; } 
```

除了内置函数之外，还有函数和别名。这些是无需创建单独的脚本/二进制文件即可定义新功能的方法。

```
uppercase() {
    tr '[:lower:]' '[:upper:]' <<< "$*"
}

alias ls='ls --color=auto -F' 
```

函数和别名通常是为了方便或添加补充功能。

> shell脚本呢？...命令行会 fork() 一个新进程并 exec() 这个脚本在新进程中吗？然后这个包含脚本 fork() 的新进程是否会在其他进程中执行日期、cc 编译器等？

是的，完全正确。当一个 shell 脚本运行时，父 shell 会派生一个子进程并且脚本在那里运行。脚本中的命令，因此分叉出这个子进程；他们是原始贝壳的孙子。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-11T19:00:20.873

当你执行一个 shellscript 时，它会 fork 并创建一个新的 shell，通过单独的 fork/exec 机制解释每个命令。但是，有一些 shell 内置函数，例如，即使 echo 在 /usr/bin 中作为可执行文件可用，它也可能内置在某些 shell 中。cp 和 mv 确实是通过 fork/exec 机制执行的可执行文件。您可能错过的一件事是可执行文件需要位于`PATH`变量中包含的目录中。尝试将当前目录中的 hello world 代码可执行文件重命名为，`ls`并将当前目录 (.) 指定为路径中的第一个目录。`type`您还可以使用和`which`命令了解可执行文件。

# sql-server - 使用 SQL Server Management Studio 远程连接到托管在 Azure 虚拟机上的 SQL Server Express 实例

> ID：15956465
> 
> 赞同：55
> 
> 时间：2013-04-11T18:46:12.927
> 
> 标签：sql-server, azure, remote-access, ports

# 初步尝试

我有一个带有 Windows Server 2012 的 Azure VM，我刚刚在其上安装了 SQL Server 2012 Express 数据库引擎组件。然后，我按照[此处](http://www.windowsazure.com/en-us/manage/windows/common-tasks/install-sql-server/#SSMS)的说明远程连接 SQL Server Management Studio。

> 1.  为虚拟机创建 TCP 端点
> 2.  在 Windows 防火墙中打开 TCP 端口
> 3.  配置 SQL Server 以侦听 TCP 协议
> 4.  为混合模式身份验证配置 SQL Server
> 5.  创建 SQL Server 身份验证登录
> 6.  确定虚拟机的 DNS 名称
> 7.  从另一台计算机连接到数据库引擎

在第七步之后，我收到以下错误：

> 与 SQL Server 建立连接时发生网络相关或特定于实例的错误。服务器未找到或无法访问。验证实例名称是否正确以及 SQL Server 是否配置为允许远程连接。（提供程序：命名管道提供程序，错误：40 - 无法打开与 SQL Server 的连接）（Microsoft SQL Server，错误：53）

在远程连接之前我还需要配置什么？

# 故障排除

我一直在按照[此处](http://social.technet.microsoft.com/wiki/contents/articles/2102.how-to-troubleshoot-connecting-to-the-sql-server-database-engine.aspx)的故障排除说明进行操作。下面的每个块引用都是描述该链接的一个步骤。

> 确认 SQL Server 数据库引擎的实例已安装并正在运行。

完毕。我们安装了 SQL Server Express，它作为一个名为 SQLEXPRESS 的命名实例运行。

> 如果您尝试连接到命名实例，请确保 SQL Server Browser 服务正在运行。

完毕。我们按照[此处](http://msdn.microsoft.com/en-us/library/ms165734%28v=sql.90%29.aspx)的步骤打开 SQL Server Browser 服务。

> 获取计算机的 IP 地址。

完毕。稍后我们将使用这些来测试连接性，并可能为 SQLEXPRESS 设置静态端口。

10.241.62.155

fe80::45c:8c29:e19f:f78b%15

> 获取 SQL Server 使用的 TCP 端口号。

完毕。[SQL Server Management Studio](http://www.microsoft.com/en-ca/download/details.aspx?id=29062)服务器日志显示服务器正在侦听端口 49169。

> 启用协议

完毕。我们已经在配置管理器中启用了 TCP/IP，但我们重新启动了 SQL Server 服务以防万一。

> 测试 TCP/IP 连接

完毕。我们使用[tcping.exe](http://www.elifulkerson.com/projects/tcping.php)测试连接性（cmd ping 在 Azure 中无法快速运行。）我们能够连接到端口 80。

*   tcping.exe buddha.cloudapp.net > 成功
*   tcping.exe buddha.cloudapp.net 80 > 成功

> 测试本地连接

完毕。我们在命令提示符下使用了[sqlcmd.exe](http://msdn.microsoft.com/en-us/library/ms162773.aspx)，并且能够通过 TCP 使用用户名和密码进行本地连接。

*   sqlcmd -S Buddha\SQLEXPRESS（通过共享内存协议成功）
*   sqlcmd -S tcp:Buddha\SQLEXPRESS（通过 TCP 成功）
*   sqlcmd -S tcp:Buddha\SQLEXPRESS -U sa -P（使用用户名通过 TCP 成功）
*   sqlcmd -S tcp:10.241.62.155\SQLEXPRESS -U sa -P（内部IP成功）

> 在防火墙中打开端口

我们打开了 SQLEXPRESS 侦听的端口。服务器日志（上图）显示 SQLEXPRESS 正在侦听端口 49169，但这只是众多动态端口之一，我们想设置静态端口 1435。

*   使用 WF.msc 为端口 1435 创建入站 TCP 规则。
*   使用 Azure 管理门户为端口 1435 创建 TCP 终结点。

故障排除说明还说：

> 如果要连接到**命名实例**或 TCP 端口 1433 以外的端口，则还必须为 SQL Server Browser 服务打开**UDP 端口 1434**。

由于我们正在连接 SQLEXPRESS（命名实例），因此我们需要为 UDP 打开端口 1434。

*   使用 WF.msc 为端口 1434 创建入站**UCP**规则。
*   使用 Azure 管理门户为端口 1434创建**UDP终结点**

关于连接到命名实例的进一步研究揭示了动态端口问题。我们使用端口 1435（静态）而不是端口 49169（许多有效选项之一）的原因。

> SQL Server Express、SQL Server Compact 的实例和数据库引擎的命名实例使用动态端口。若要将这些实例配置为使用特定端口，请参阅[配置服务器以侦听特定 TCP 端口（SQL Server 配置管理器）。](http://msdn.microsoft.com/en-us/library/ms177440.aspx)[在](http://blogs.msdn.com/b/sqlblog/archive/2009/07/17/how-to-configure-sql-server-to-listen-on-different-ports-on-different-ip-addresses.aspx)这里 。

完毕。我们转到 SQL 配置管理器 > SQL Server 网络配置 > SQLEXPRESS 的协议 > TCP/IP，我们执行了以下操作。

协议选项卡 > 全部听 > 否。

IP 地址选项卡 > 对于每个列出的地址

*   启用 > 是
*   TCP 动态端口 > 空白（删除零）
*   TCP 端口 > 1435（或您的选择）

重启SQLEXPRESS服务后，我们再次查看SQL Server Management Studio日志，发现Server is Listening on port 1435！！！万岁！

> 测试连接

完毕。我们在本地（非 Azure）计算机上打开了 SQL Server Management Studio 并进行了连接。

*   buddha.cloudapp.net,1435 或 buddha.cloudapp.net\SQLEXPRESS
*   萨
*   密码

成功。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-11T23:25:18.960

以下是我们找到答案的三个网页。最困难的部分是为 SQLEXPRESS 设置静态端口。

[在 Windows Azure 上配置 SQL Server 虚拟机](http://www.windowsazure.com/en-us/manage/windows/common-tasks/install-sql-server/)。这些初始说明提供了 25% 的答案。

[如何排除连接到 SQL Server 数据库引擎的故障](http://social.technet.microsoft.com/wiki/contents/articles/2102.how-to-troubleshoot-connecting-to-the-sql-server-database-engine.aspx)。仔细阅读本文提供了另外 50% 的答案。

[如何配置 SQL Server 以侦听不同 IP 地址上的不同端口？](http://blogs.msdn.com/b/sqlblog/archive/2009/07/17/how-to-configure-sql-server-to-listen-on-different-ports-on-different-ip-addresses.aspx). 这使得为​​命名实例（例如 SQLEXPRESS）设置静态端口成为可能。我们花了最后 25% 的时间才得到答案。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-04-11T19:22:36.477

您从 Names Pipes Provider 收到错误的事实告诉我们，当您尝试建立连接时，您没有使用 TCP/IP 协议。尝试添加“tcp”前缀并指定端口号：

```
tcp:name.cloudapp.net,1433 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-07-21T07:39:26.373

我也为类似的事情而苦苦挣扎。我的猜测是您的实际问题是连接到在另一台机器上运行的 SQL Express 实例。执行此操作的步骤可总结如下：

1.  确保为 SQL 身份验证和 Windows 身份验证（默认）配置了 SQL Express。您可以通过 SQL Server Management Studio (SSMS) 服务器属性/安全性执行此操作
2.  在 SSMS 中创建一个名为“sqlUser”的新登录名，例如，使用合适的密码“sql”。确保为 SQL 身份验证设置此新登录名，而不是 Windows 身份验证。SSMS 服务器安全/登录/属性/常规。还要确保未选中“强制执行密码策略”
3.  在属性/服务器角色下确保这个新用户具有“系统管理员”角色
4.  在 SQL Server 网络配置/SQLExpress 协议下的 SQL Server 配置管理器 SSCM（如果找不到 SSCM，请在 Windows\SysWOW64 中搜索 SQLServerManagerxx.msc 文件）确保 TCP/IP 已启用。如果需要，您可以禁用命名管道
5.  右键单击协议 TCP/IP 并在 IPAddresses 选项卡上，确保每个 IP 地址都设置为 Enabled Yes，以及 TCP 端口 1433（这是 SQL Server 的默认端口）
6.  在 Windows 防火墙 (WF.msc) 中创建两个新的入站规则 - 一个用于 SQL Server，另一个用于 SQL Browser 服务。对于 SQL Server，您需要打开 TCP 端口 1433 （如果您使用 SQL Server 的默认端口）**，非常重要的是，对于 SQL Browser 服务，您需要打开 UDP 端口 1434**。在您的防火墙中适当地命名这两个规则
7.  使用 SSCM 或 Services.msc 管理单元停止并重新启动 SQL Server 服务
8.  在 Services.msc 管理单元中，确保 SQL Browser 服务启动类型为自动，然后启动此服务

此时您应该可以远程连接，使用 SQL 身份验证，用户“sqlUser”密码“sql”到如上配置的 SQL Express 实例。最后一个提示和简单的检查方法是创建一个带有 .UDL 扩展名的空文本文件，在桌面上说“Test.UDL”。双击编辑此文件会调用 Microsoft 数据链接属性对话框，您可以使用该对话框快速测试远程 SQL 连接

# css - Bootstrap - 仅在 Internet Explorer 上由点包裹的控制焦点

> ID：15956472
> 
> 赞同：0
> 
> 时间：2013-04-11T18:46:28.900
> 
> 标签：css, twitter-bootstrap

为什么 IE 上的每个控件在获得焦点时都会被点包裹？
我正在使用 Bootstrap，我没有编辑样式脚本，它们是默认的。
来自 Google 的文本框与我的文本框非常相似，但它不会被点包裹。
我怎样才能隐藏这些点？

这是显示问题的屏幕截图：http:
[//i.stack.imgur.com/bMw7y.png](http://i.stack.imgur.com/bMw7y.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T18:48:41.407

它可以`outline:0;`在您的 CSS中使用

```
a, a:hover, a:active, a:focus {
  outline:0;
} 
```

有关 CSS 技巧的更多信息：http: [//css-tricks.com/removing-the-dotted-outline/](http://css-tricks.com/removing-the-dotted-outline/)

# jquery - 淘汰赛清除和克隆阵列

> ID：15956478
> 
> 赞同：0
> 
> 时间：2013-04-11T18:46:47.820
> 
> 标签：jquery, knockout.js

我正在尝试在 if 语句中清除和克隆一个淘汰赛数组。首先点击它工作正常。之后它不断添加到数组中而不是删除它。因此 ee_pp_summarylist 会随着额外的点击而不断增长，而不是清除和加载另一个。

```
if ($("#idee").prop("class") == "detail") {
    $("#idee").removeClass("detail").addClass("full");
    $("#idee").val("Collapse");
    self.ee_pp_summarylist.removeAll();
    self.ee_pp_summarylist(self.ee_pp_summarylist_detail.slice(0));
}
else {
    $("#idee").removeClass("full").addClass("detail");
    $("#idee").val("Detail");
    self.ee_pp_summarylist.removeAll();
    self.ee_pp_summarylist(self.ee_pp_summarylist_ag.slice(0));
} 
```

添加了一个小提琴。在小提琴中工作，但不在我的项目中。数字.... [jsfiddle](http://jsfiddle.net/a8Vdd/)

我检查了 self.ee_pp_summarylist 中的长度确实反映正确。但屏幕仍然没有正确改变。

弄清楚了。data-bind="tablesort: ee_pp_summarylist" 我用来利用 tablesorter 插件的自定义绑定。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T20:10:22.657

弄清楚了。data-bind="tablesort: ee_pp_summarylist" 我用来利用 tablesorter 插件的自定义绑定。

# android - Android NDK：为什么这个 malloc() 没有明显的效果？

> ID：15956481
> 
> 赞同：4
> 
> 时间：2013-04-11T18:47:08.893
> 
> 标签：android, android-ndk

这是我正在使用的代码的简化版本

爪哇：

```
private native void malloc(int bytes);
private native void free();

// this is called when I want to create a very large buffer in native memory
malloc(32 * 1024 * 1024);

// EDIT: after allocating, we need to initialize it before Android sees it as anythign other than a "reservation"
memset(blob, '\0', sizeof(char) * bytes);

...

// and when I'm done, I call this
free() 
```

C：

```
static char* blob = NULL;

void Java_com_example_MyClass_malloc(JNIEnv * env, jobject this, jint bytes)
{

    blob = (char*) malloc(sizeof(char) * bytes);

    if (NULL == blob) {
    __android_log_print(ANDROID_LOG_DEBUG, DEBUG_TAG, "Failed to allocate memory\n");
    } else {
        char m[50];
        sprintf(m, "Allocated %d bytes", sizeof(char) * bytes);
        __android_log_print(ANDROID_LOG_DEBUG, DEBUG_TAG, m);
    }
}

void Java_com_example_MyClass_free(JNIEnv * env, jobject this)
{
    free(blob);
    blob = NULL;
} 
```

现在，当我从 MyClass.java 调用 malloc() 时，我希望看到分配了 32M 的内存，并且我可以在某处观察到可用内存的下降。`adb shell dumpsys meminfo`但是，无论是在或中，我都没有看到任何迹象`adb shell cat /proc/meminfo`。我对 C 很陌生，但有很多 Java 经验。我正在寻找在 Dalvik 堆之外分配一堆内存（因此它不由 Android/dalvik 管理）用于测试目的。Hackbod 让我相信 Android 目前对 Native 代码中分配的内存量没有限制，所以这似乎是正确的做法。我这样做对吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T21:03:24.183

您应该会看到在`memset()`. 如果您在设备上安装了额外的开发人员命令行实用程序，您可以轻松运行`procrank`或`showmap <pid>`查看它。需要有根设备。

`/proc/self/maps`如果做不到这一点，让进程在分配之前和之后将内容复制到文件中。（最简单的方法是将其写入外部存储；您需要`WRITE_EXTERNAL_STORAGE`在清单中获得许可。）通过比较地图输出，您应该看到一个新的 32MB 区域，或者一个现有区域扩大了 32MB。这是可行的，因为 32MB 高于 dlmalloc 的内部堆阈值，因此应该使用对 mmap() 的调用来分配内存。

您可以从本机代码分配的内存量没有固定限制。然而，你分配的越多，你对内核的低内存进程杀手的期待就越大。

# sql - SQL Server 2008 用逗号将多行合并为 1 + 3 个表

> ID：15956482
> 
> 赞同：0
> 
> 时间：2013-04-11T18:47:19.617
> 
> 标签：sql, sql-server-2008

我有 3 张桌子：

**电影数据库**

```
movieID | Title
1       | Star War 
```

**StarringDB**

```
movie ID | nameID
1        | 1
1        | 2
1        | 3
1        | 4
1        | 5 
```

**名称数据库**

```
nameID | Name
1      | Harrison Ford
2      | Mark Hamill
3      | Carrie Fisher
4      | Peter Cushing
5      | Alec Guinness 
```

我希望输出是：

```
ID | Title    | Starrings
1  | Star War | Harrison Ford, Mark Hamill, Carrie Fisher, Peter Cushing, Alec Guinness 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T18:52:51.560

SQL Server 没有为您连接值的函数，因此您可以使用它`FOR XML PATH`来获取结果：

```
select m.movieID,
  m.title,
  STUFF((SELECT  ', ' + n.name
         from name n
         inner join starring s
           on n.nameID = s.nameid
         where s.movieID = m.movieID
         group by n.name, n.nameid
         order by n.nameid
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,2,'') starrings
from movie m; 
```

请参阅[SQL Fiddle with Demo](http://sqlfiddle.com/#!3/2ed6f/4)。

或者您可以使用`FOR XML PATH`and `CROSS APPLY`：

```
select m.movieID,
  m.title,
  left(c.stars, len(c.stars)-1) stars
from movie m
cross apply
(
  select n.name + ', '
  from name n
  inner join starring s
    on n.nameID = s.nameid
  where s.movieID = m.movieID
  group by n.name, n.nameid
  order by n.nameid
  FOR XML PATH('')
) c (stars); 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/2ed6f/9)

# join - Mvc Code First db context linq 包含令人头疼

> ID：15956484
> 
> 赞同：1
> 
> 时间：2013-04-11T18:47:26.950
> 
> 标签：join, asp.net-mvc-4, datatable, ef-code-first

在我的应用程序中，结构如下所示：

```
public class Route
{
    [Key]
    public int RouteId {get; set;}
    public Address virtual AddressA {get; set;}
    public Address virtual AddressB {get; set;}
}

public class Address 
{
    [Key]
    public int AddressId {get; set;}
    public string Name {get; set;}
} 
```

和

```
public class DbConnection : DbContext
{
    public DbSet<Route> Routes{get; set;}
    public DbSet<Address> Addresses{get; set;}
} 
```

我拿这样的数据：

```
public ActionResult GetList()
{
    using(DbConnection db = new DbConnection)
    {
        var query = db.Routes.ToList();
    }

    return PartialView(query);
} 
```

然后显示数据：

```
@foreach (var r in Model)
{
    <div>@r.AddressA.Name - @r.AddressB.Name</div>
} 
```

但是问题是在括号关闭后呈现 View/PartialView，`using`因此它尝试访问 AddressA 的名称，这给了我一个错误，因为表没有加载满。是的，我可以这样做：

```
public ActionResult GetList()
{
    using(DbConnection db = new DbConnection)
    {
        var query = db.Routes.Include("Address").ToList();
    }

    return PartialView(query);
} 
```

但是，当我使这个查询变得稍微复杂一点时，所有包含的代码都开始变得非常难看。有没有办法用一行简单的代码或不那么难看的东西来克服这个问题`.Include("A").Include("B").Include("X.Y.Z")`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T12:21:01.057

您可以使用[lambda 版本](http://msdn.microsoft.com/en-us/library/gg671236%28v=vs.103%29.aspx)，`Include`它只提供类型安全，但不能解决您的问题。

或者您可以完全[关闭延迟加载](https://stackoverflow.com/questions/9033966/how-do-i-disable-lazy-loading-entity-framework-4-1-using-code-migrations-config)，这将解决您的“包含问题”，但会禁用延迟加载功能的一些有效用例。

或者最好的解决方案是**不在视图中使用实体，而是创建视图模型**`using`并在块 内填充所需的数据。

所以你的视图模型看起来像这样：

```
public class AddressViewModel
{
   public string AddressAName { get; set; }
   public string AddressBName { get; set; }
} 
```

然后在您的控制器中，您可以创建视图模型：

```
public ActionResult GetList()
{
    using(DbConnection db = new DbConnection)
    {
        var query = db.Routes.Select(r => 
           new AddressViewModel 
               { 
                   AddressAName = r.AddressA.Name, 
                   AddressBName = r.AddressB.Name, 

               }).ToList();
    }

    return PartialView(query);
} 
```

在您的视图中可以轻松使用：

```
@foreach (var r in Model)
{
    <div>@r.AddressAName  - @r.AddressBName</div>
} 
```

# c# - monodevelop 中的 Windows 错误声音（哔声）

> ID：15956495
> 
> 赞同：0
> 
> 时间：2013-04-11T18:48:07.267
> 
> 标签：c#, monodevelop

我想添加窗口播放的哔声，我的项目在单声道开发中有错误，但找不到。在视觉工作室是`SystemSounds.Beep.Play()`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T18:55:09.690

您不能以可移植的方式进行操作，因此您将编写特定于 Windows 的内容（当然，如果需要，您可以支持更多操作系统）。

只需导入[MessageBeep](http://msdn.microsoft.com/en-us/library/windows/desktop/ms680356%28v=vs.85%29.aspx)函数：

```
[DllImport("user32")]
static extern bool MessageBeep(uint uType); 
```

您可以从上面的链接中获取常量`uType`，我建议您将它们放在一个枚举中，然后创建一个像这样的公共辅助函数（来自[pinvoke.net](http://www.pinvoke.net/default.aspx/user32.messagebeep)）：

```
public static void Beep(BeepType type)
{ MessageBeep((uint)type); } 
```

在哪里：

```
public enum beepType : uint
{
    SimpleBeep = 0xFFFFFFFF,
    OK = 0x00,
    Question = 0x20,
    Exclamation = 0x30,
    Asterisk = 0x40,
 } 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-11T18:57:00.793

`*.WAV`文件存储在目录`C:\Windows\Media`中。您可以将其作为资源包含到您的项目中。

```
SoundPlayer simpleSound = new SoundPlayer(Properties.Resources.Error);
simpleSound.Play(); 
```

# scroll - 保存和恢复 NSTextView 的位置

> ID：15956497
> 
> 赞同：4
> 
> 时间：2013-04-11T18:48:13.587
> 
> 标签：scroll, nstextview, nslayoutmanager

我希望能够保存 NSTextView 的当前文本和可见区域并恢复它。使用 visibleRect 和 scrollRectToVisible: 似乎会提供不一致的结果。如果我这样做：

```
- (void)restorePosition
{
    NSRect r = [self.textView visibleRect];

    [self.textView.layoutManager replaceTextStorage: self.textView.textStorage];
    [self.textView scrollRectToVisible: r];
} 
```

当视图位于距顶部不到 85 行的位置时，视图将保持原位，但越往下走，它就越远离。在距顶部 200 行处，它以 277 结尾，在 300 处以 408 结尾，依此类推。

如果没有 replaceTextStorage，它也可以按预期工作，但是替换文本并找到上一个位置才是重点。关于替换文本的某些事情会导致线条矩形计算变得不稳定。

显然，我打算从真实应用程序中保存的对象中获取新的 visibleRect 和 textStorage ，但这说明了最少代码的问题。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-06-22T16:46:28.143

我在恢复滚动位置时遇到了类似的问题。对我来说，解决方案是在更改可见矩形之前强制文本视图布局：

```
[textView.layoutManager ensureLayoutForTextContainer:textView.textContainer]; 
```

# java - 如何连续播放音乐

> ID：15956498
> 
> 赞同：0
> 
> 时间：2013-04-11T18:48:15.900
> 
> 标签：java, android, animation, media-player, gif

我想要一个简单的应用程序，它在启动时开始播放音乐并连续运行 gif 动画，我该怎么做，我无法启动媒体播放器。这就是我到目前为止所拥有的

```
public class Main extends Activity {
    MediaPlayer music;
    AnimationDrawable background;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        music = MediaPlayer.create(Main.this, R.raw.thesong);

    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T18:51:40.830

您在新的 MediaPlayer 实例下方缺少 2 行：

```
music = MediaPlayer.create(Main.this, R.raw.thesong); 
music.setLooping(true);
music.start(); 
```

这并不重要，你真的应该远离主 UI 线程来播放你的音乐，而你不是。

# sublimetext2 - 如何设置 sublime-text 以始终 显示自动完成建议

> ID：15956499
> 
> 赞同：1
> 
> 时间：2013-04-11T18:48:16.650
> 
> 标签：sublimetext2, code-completion, modula-2

当我输入 Java 代码时，代码完成功能非常有效，但我最近为 Modula-2 制作了一个构建系统，虽然当我按下 ctrl+space 时自动完成功能有效，但它并没有暗示上面的文字是自己的。我每次都必须按 ctrl+space，这（有点）违背了目的。

我意识到 modula-2 不是一种非常流行的语言，但 sublimetext 有一个很好的功能，它可以记住用户写的每个单词，并在代码完成中使用它。这就是为什么 ctrl+space 组合首先起作用的原因。有谁知道如何启用建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T23:59:20.803

触发弹出的内容由`auto_complete_selector`设置控制。您需要为此添加适当的范围。如果您没有对这些文件使用语法荧光笔，我相信这会将源范围应用于文件，然后会导致弹出窗口显示。

```
{ 
    "name": "Modula-2",
    "scopeName": "source.modula-2",
    "fileTypes": [""],
    "patterns": [
    ],
    "uuid": "f8005a03-62cf-460b-84be-1184508464ed"
} 
```

这是 JSON 形式，可以使用[PlistJsonConverter](https://github.com/facelessuser/PlistJsonConverter)转换为 plist。然后将其保存为`.tmLanguage`包文件夹中的文件，可能是用户目录，或者如果您有与这些类型的文件相关联的其他内容，则可能是 Modula-2 目录。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-02T18:07:49.567

你应该试试[Modula-2 Language Sintax](https://github.com/harogaston/Sublime-Modula-2)它是一个新包。您可以使用 Package Control 或简单地安装它`git clone git://github.com/harogaston/Sublime-Modula-2.git`

# json - Spring MVC：如何使用 JSON 对象和视图一起响应 http 请求？

> ID：15956501
> 
> 赞同：2
> 
> 时间：2013-04-11T18:48:36.760
> 
> 标签：json, spring, spring-mvc

就像用户单击一个链接，在 Spring 控制器类中，一个方法将使用一个对象和一个视图名称来响应请求`JSON`（意思是，它不仅应该返回一个 JSON 对象，还应该返回一个包含该 JSON 对象的 HTTP 视图，所以`@ResponseBody`可能还不够）？我们是否必须将其拆分为两种方法（一种用于视图，另一种用于 JSON 对象）？任何想法将不胜感激。

通常我们有

```
@RequestMapping(value="/someValue")
public @ResponseBody someMethod1(@RequestParam String param){
    .....
    return someJSONObject
} 
```

处理 JSON 对象，以及

```
@RequestMapping(value="/someValue")
public String someMethod2(@RequestParam String param){
    .....
    return someViewInString;
} 
```

返回视图。

我们如何将它们结合在一起？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T19:02:26.470

您应该返回带有 JSON 占位符的视图。

在控制器代码中，以编程方式创建 JSON，将其转换为 String 格式，然后将其放入模型中（我们称之为 json_string）

在视图中应该有一个 JSON 字符串的占位符，例如：

```
<!-- other view stuff -->
var v = ${json_string};
<!-- more view stuff --> 
```

# c# - 无法读取 kinect 的骨架

> ID：15956502
> 
> 赞同：0
> 
> 时间：2013-04-11T18:48:37.727
> 
> 标签：c#, kinect, kinect-sdk

我是 kinect 编程的新手，我正在尝试映射骨架，但它无法正常工作我正在使用 1.6 版本的 kinect sdk 并且我的代码运行但是当它到达这部分时它会停止：

```
void kinectsensor_SkeletonFrameReady(object sender, SkeletonFrameReadyEventArgs e)
        {
           SkeletonFrame skeletonSet = e.OpenSkeletonFrame();

     //   Skeleton skeletonData = new Skeleton[kinectsensor.SkeletonStream.FrameSkeletonArrayLength];

        **Skeleton skeletonData = (from s in skeletons
                             where s.TrackingState == SkeletonTrackingState.Tracked
                             select s).FirstOrDefault();**
        if (skeletonData != null)

        {
            SetEllipsePosition(Head, skeletonData.Joints[JointType.Head]);
            SetEllipsePosition(leftHand, skeletonData.Joints[JointType.HandLeft]);
            SetEllipsePosition(rightHand, skeletonData.Joints[JointType.HandRight]);
            ProcessGesture(skeletonData.Joints[JointType.Head], skeletonData.Joints[JointType.HandLeft], skeletonData.Joints[JointType.HandRight]);
        }
    } 
```

我得到的警告信息是：

> 'KinectSkeletonApplication3.MainWindow.skeletons' 从未分配给，并且始终具有其默认值 null

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T00:54:18.613

典型的`SkeletonFrameReady`回调如下所示：

```
private Skeleton[] skeletonData;

private void SkeletonsReady(object sender, SkeletonFrameReadyEventArgs e)
{
    using (SkeletonFrame skeletonFrame = e.OpenSkeletonFrame())
    {
        if (skeletonFrame != null)
        {
            int skeletonSlot = 0;

            if ((this.skeletonData == null) || (this.skeletonData.Length != skeletonFrame.SkeletonArrayLength))
            {
                this.skeletonData = new Skeleton[skeletonFrame.SkeletonArrayLength];
            }

            skeletonFrame.CopySkeletonDataTo(this.skeletonData);

            foreach (Skeleton skeleton in this.skeletonData)
            {
                if (SkeletonTrackingState.Tracked == skeleton.TrackingState)
                {
                    // `skeleton` is an actively tracked skeleton
                }
            }
        }
    }
} 
```

[您可以在Kinect for Windows Developer Toolkit](http://www.microsoft.com/en-us/kinectforwindows/develop/developer-downloads.aspx)和[Kinect for Windows CodePlex](http://kinectforwindows.codeplex.com/)站点中找到许多这样的示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T19:19:16.543

我对 Kinect 的编程了解不多，但是您需要从某些东西中分配骨架数组，也许使用[copySkeletonDataTo()](http://msdn.microsoft.com/en-us/library/microsoft.kinect.skeletonframe.copyskeletondatato.aspx)

# android - 在 Galaxy S3 上使用 facebook sdk 3 登录失败

> ID：15956504
> 
> 赞同：0
> 
> 时间：2013-04-11T18:48:38.400
> 
> 标签：android, facebook, login, sdk, galaxy

当我尝试通过我的应用程序登录 Facebook 时，会发生奇怪的行为。但是，此行为不会出现在模拟器和其他两个设备（Galaxy Y，Android 2.3.5/2.3.6）上。

我想在我的墙上发布一些文字。我单击发布按钮，然后它检测到用户未登录，显示一个对话框，告诉用户我的应用程序想要代表我发布一些信息。直到这里，没有什么不寻常的。

问题是用户按下“确定”按钮后，会出现一个加载对话框，然后立即消失。facebook 登录屏幕未显示，用户也未登录。

我收到一个异常（在其他设备上不存在）：

```
SpannableStringBuilder(24080): SPAN_EXCLUSIVE_EXCLUSIVE spans cannot have a zero length 
```

代码：

```
private void OpenPublishingConnection() {
  if (Session.getActiveSession().isClosed()) {
    Session.openActiveSession(this, true, status);
  }
  if (Session.getActiveSession().isOpened() == false && Session.getActiveSession().isClosed() == false) {
    Session.getActiveSession().openForPublish(new OpenRequest(this).setPermissions(Arrays.asList(PERMISSION_PUBLISH)).setCallback(status));
  } else {
    if (Session.getActiveSession().isClosed() == true) {
      Session.getActiveSession().requestNewPublishPermissions(new NewPermissionsRequest(this, Arrays.asList(PERMISSION_PUBLISH)));
    } else {}
  }
}
public void Publish(Bundle b) {
  OpenPublishingConnection();
  Request req = new Request(Session.getActiveSession(), "me/feed", b, HttpMethod.POST, callback);
  RequestAsyncTask rat = new RequestAsyncTask(req);
  rat.execute();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T19:45:57.150

事实证明，我的应用程序与 Facebook 应用程序存在某种冲突，所以我只是卸载并重新安装了后者，一切都开始正常工作。

# multithreading - perl 线程创建 - 如何正确指定类实例方法？

> ID：15956507
> 
> 赞同：0
> 
> 时间：2013-04-11T18:48:49.743
> 
> 标签：multithreading, perl

线程有问题。使用类实例方法作为子例程创建线程时不断出错。method 和 params 变量是根据其他东西设置的，所以我必须这样调用类实例方法。没有线程，它工作得很好。无法找出为线程创建指定它的正确方法：

```
my $instance = someclass->new();
my $method = 'get';
my $params = { 'abc' => 123 };
my $thread = threads->create($instance->$method,$params); 
```

这给了我错误“不是代码参考”。我认为这可能实际上是调用该方法，并使用 return 作为参数。好的，试过这个：

```
my $thread = threads->create(\&{$instance->$method},$params); 
```

这给了我错误“不是子程序引用”。我将不胜感激这方面的任何帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T18:54:02.253

```
my $thread = threads->create(sub { $instance->$method(@_) }, $params); 
```

或者，您也可以将实例和方法传递给第一个参数：

```
package SomeClass;

sub new {
    my $class = shift;
    bless { args => [ @_ ] };
}

sub get {
    my $self = shift;
    my $args = shift;
    return join(" ", @{ $self->{args} }, $args->{abc});
}

package main;

use 5.012;
use threads;

my $x = SomeClass->new("An instance");

threads->create(sub { say $x->get(@_) }, {'abc' => 123 })->join;

threads->create(
    sub {
        my $instance = shift;
        my $method = shift;
        say $instance->$method(@_);
    }, $x, 'get', { 'abc' => 123 }
)->join; 
```

事实上，我更喜欢后者，以避免关闭`$instance`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T19:04:08.033

调用不带括号的方法与调用不带参数的方法是一样的：

```
$foo->bar eq $foo->bar() 
```

要创建 coderef，您可以指定包装方法调用的 lambda，例如

```
threads->create(sub{ $instance->get($params) }) 
```

（请参阅 Sinan Ünürs 的回答），或者您可以使用通用`can`功能。

该`can`方法解析方法的方式与调用方法的解析方式相同，如果找到该方法，则返回该方法的 coderef，或者返回`undef`. 这使其可用作布尔测试。

请注意，方法只是子程序，第一个参数是调用者（对象）：

```
my $code = $instance->can($method) or die "Can't resolve $method";
threads->create($code, $instance, $params); 
```

但是，`can`对于使用`AUTOLOAD`.

# c# - C# windows 窗体容器菜单在子窗体上

> ID：15956509
> 
> 赞同：0
> 
> 时间：2013-04-11T18:48:57.683
> 
> 标签：c#, winforms

我在 C# 中创建了一个计算器应用程序作为练习。在这个应用程序中，我有一个带有子表单的容器。在容器中，我有一个菜单，当我向容器 MDI 添加一个子项时，我会调整容器的大小以适合该子项。

我的问题是菜单隐藏了孩子的某些部分 - 计算器的显示 - 我看不到数字。

**示例**：

Container 的菜单隐藏在计算器显示的顶部： ![容器的菜单隐藏在计算器显示的顶部](https://i.stack.imgur.com/XpCHk.jpg)

手动调整应用程序大小后 - 我可以看到显示屏的顶部： ![手动调整应用程序大小后 - 我可以看到显示屏的顶部](https://i.stack.imgur.com/4HFEy.jpg)

如何设置容器 MDI 中可放置子项的第一个位置是 - 在菜单下？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T20:45:07.473

确保为每个控件正确设置了 Anchor 属性——它们是能够调整表单大小并让事物按你想要的方式运行的关键。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T18:52:04.493

首先，您不需要任何 MDI 即可拥有如此简单的界面。使用单个表单，其他所有内容都使用用户 UserControl。

**更新**

为每个计算器创建一个用户控件，将每种类型分配给菜单项单击，例如：删除或隐藏控件。

# jquery - jQuery .addType()

> ID：15956511
> 
> 赞同：4
> 
> 时间：2013-04-11T18:49:02.467
> 
> 标签：jquery, function, add-type

jquery 有 .addType() 函数吗？我知道有一个 .addClass() 来添加类，但是我正在使用速记方式将一个输入元素附加到一个 div 并且想知道是否有一个 .addType() 来将类型添加到输入区域，即文本，密码，提交。

```
$(document).ready(function(){
  $("#newnum").click(function(){
    $("#equation").append(
      $("<input/>")
    );
  });
}); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-11T18:53:51.450

你可以只使用速记

```
$('<input type="text">'); 
```

还有一个`attr()`可以让你做同样的事情

```
$('<input>').attr('type', 'text'); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-11T18:54:08.190

您可以像这样传递 type 属性：

```
$("<input/>").attr('type','text') 
```

如果您需要设置多个属性：

```
$('<input />', {type:'text', class:'css-class', value:"Hello"}) 
```

# java - 通过外部 IP 连接到 Java Server

> ID：15956514
> 
> 赞同：0
> 
> 时间：2013-04-11T18:49:09.207
> 
> 标签：java, connection, ip

我开发了一个应用程序，将一个设备的坐标传输到另一个设备，并计算每个设备之间的距离。我编写了一个 java 服务器，并且一直在本地连接两个设备。但是，现在我想在更远的距离上进行测试，为此我需要将一台设备连接到外部 ip 并使用 3g 以便将设备携带到超过 500m。

我认为这可能只是找到我的外部 ip 并将其放在我有本地 ip 的地方，但是，没有连接..我仍然在本地连接另一个设备，这很好，因为没有 3g无论如何。

有人对我在这方面需要做什么有任何想法或建议吗？

在此先感谢，加里

# css-float - 将 div 与容器顶部对齐

> ID：15956518
> 
> 赞同：0
> 
> 时间：2013-04-11T18:49:19.563
> 
> 标签：css-float, vertical-alignment

您可以在此[JSFiddle](http://jsfiddle.net/wWg7F/)中看到`search`div 居中对齐，如何使其与顶部对齐？

HTML：

```
<div id="wrapper">
    <div id="banner">
        <a href="#"><h1>Title</h2><br />
        <h2>Subtitle</h2></a>
        <div id="search">
            <label>Search</label>
            <input type="textbox"/>
            <input type="submit" />
            <img src="images/logo.png" alt="logo"/>
        </div>
</div> 
```

CSS：

```
#wrapper{
    width:85%;
    margin:35px auto;
}

#banner{
    height:150px;
    padding:30px;
    padding-bottom:5px;
}
#search{
    float:right;
    display:inline;
    width:38%;
}

#banner h1, #banner h2{
margin:0;padding:0;color:#A2A2A2;display:inline;
}
#banner h1{
font-size:50px;
}
#banner h2{
font-size:35px;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T19:36:55.263

你至少有两个选择。如果要将搜索`div`向右浮动，请在`html`代码中将其向上移动。*现在搜索 div 会浮动到代码中它之后*的元素。（请注意，您在原始代码中有一个未关闭的 div。）

[见小提琴](http://jsfiddle.net/wWg7F/10/)

```
<div id="wrapper">
  <div id="banner">
    <div id="search">
      <label>Search</label>
      <input type="textbox"/>
      <input type="submit" />
      <img src="images/logo.png" alt="logo"/>
    </div>
    <a class="" href="#"><h1>Title</h2><br />
    <h2 class="">Subtitle</h2></a>
  </div>
</div> 
```

其他选项是使前面的元素 (`a`和`h2`) 浮动到搜索的左侧，`div`但这看起来不太好，因为搜索`div`不在浏览器窗口的右边缘。

# sorting - Prolog中的代码排序

> ID：15956521
> 
> 赞同：0
> 
> 时间：2013-04-11T18:49:31.393
> 
> 标签：sorting, syntax, prolog

我正在用 prolog 编写一个程序，需要一些帮助。这可能被认为是一个家庭作业问题。

我有两种排序算法编写和工作。我的目标是传入一个列表，如果它大于或等于长度 5，使用排序方法 1。如果小于 5，使用排序方法 2。排序方法都返回排序列表，而 main 方法它们用于应该返回排序列表。

这是我正在使用的主要方法：

```
%Main method to run program
main(List, Result) :-
size(List, N),
(   N => 5;
    sort1(List, X),
sort2(List, X)). 
```

但是，每次我尝试运行它时，都会出现错误：

?- 主要（[1,5,1,4,2,6,1]）。错误：未定义的过程：main/1 错误：但是，有以下定义：错误：main/2 false。

我不确定这个错误是什么意思。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T19:05:00.193

您必须更正语法。根据您的描述：

```
main(List, Result) :-
    length(List, N),
    (   N >= 5
    ->  sort1(List, Result)
    ;   sort2(List, Result)
    ). 
```

# java - 应用程序运行时无法编辑静态资产

> ID：15956524
> 
> 赞同：1
> 
> 时间：2013-04-11T18:49:42.133
> 
> 标签：java, spring, intellij-idea, grizzly

当我的应用程序正在运行时，我无法保存正在服务的静态资产。这对于调试来说是一种痛苦，因为我希望在编辑 css、js 和 html 时能够刷新页面。

我认为`listener.getFileCache().setEnabled(false);`下面的行可以解决问题，但它仍然不允许我编辑这些文件。我在配置中还有什么遗漏吗？

![在此处输入图像描述](https://i.stack.imgur.com/fjed9.png)

这是我的申请...

```
 final HttpServer server = HttpServer.createSimpleServer(".", 8181);

    WebappContext ctx = new WebappContext("Socket", "/");

    //enable annotation configuration
    ctx.addContextInitParameter("contextClass", "org.springframework.web.context.support.AnnotationConfigWebApplicationContext");
    ctx.addContextInitParameter("contextConfigLocation", "com.production");

    //allow spring to do all of it's stuff
    ctx.addListener("org.springframework.web.context.ContextLoaderListener");

    //enable web socket support
    final WebSocketAddOn addon = new WebSocketAddOn();
    for (NetworkListener listener : server.getListeners()) {
        listener.registerAddOn(addon);

        //if false, local files (html, etc.) can be modified without restarting the server
        listener.getFileCache().setEnabled(false);
    }

    //add jersey servlet support
    //@todo add spring support to jersey
    ServletRegistration jerseyServletRegistration = ctx.addServlet("JerseyServlet", new ServletContainer());
    jerseyServletRegistration.setInitParameter("com.sun.jersey.config.property.packages", "com.production.resource");
    jerseyServletRegistration.setLoadOnStartup(1);
    jerseyServletRegistration.addMapping("/api/*");

    //add atmosphere servlet support
    AtmosphereServlet atmosphereServlet = new AtmosphereServlet();
    AtmosphereFramework f = atmosphereServlet.framework();

    ReflectorServletProcessor r = new ReflectorServletProcessor();
    r.setServletClassName("com.sun.jersey.spi.spring.container.servlet.SpringServlet");

    f.addAtmosphereHandler("/socket/*", r);

    ServletRegistration atmosphereServletRegistration = ctx.addServlet("AtmosphereServlet", atmosphereServlet);
    atmosphereServletRegistration.setInitParameter("org.atmosphere.websocket.messageContentType", "application/json");
    atmosphereServletRegistration.setInitParameter("com.sun.jersey.config.property.packages", "com.production.resource");
    atmosphereServletRegistration.setInitParameter("com.sun.jersey.api.json.POJOMappingFeature", "true");
    //atmosphereServletRegistration.addMapping("/socket/*");
    atmosphereServletRegistration.setLoadOnStartup(1);

    //serve static assets
    StaticHttpHandler staticHttpHandler = new StaticHttpHandler("src/main/web");
    server.getServerConfiguration().addHttpHandler(staticHttpHandler, "/"); 
```

**更新：**

由于 AngularJS 的性质不需要成为 java 项目的一部分，我最终将我的 AngularJS 应用程序迁移到 java 世界之外。

# visual-studio-2010 - Visual Studio 2012 在解决方案资源管理器中突出显示所有打开的文件？

> ID：15956527
> 
> 赞同：0
> 
> 时间：2013-04-11T18:49:55.210
> 
> 标签：visual-studio-2010, visual-studio, visual-studio-2012, visual-studio-extensions, solution-explorer

问题：有没有办法在解决方案资源管理器中突出显示在 Visual Studio 中打开的所有文件？（我知道有一个过滤器可以过滤它以仅显示打开的文件，但这对我没有任何意义我正在寻找一个可能未打开的文件，我什至不确定文件的名称是什么，直到我打开它并说它在那里。）

示例想象的 GUI 结果：（不同的颜色很好） [https://docs.google.com/file/d/0B31DHM9TkK99S3pWSms3QXR2Qk0/edit?usp=sharing](https://docs.google.com/file/d/0B31DHM9TkK99S3pWSms3QXR2Qk0/edit?usp=sharing) （我在想什么，现在不能发布图像）

**解决方案资源管理器**
-Solution
     +Stuff
     +More stuff
     -Code
          +MyOpenFile.cs（突出显示）
          +MyNotOpenFile.cs
          +MyOtherOpenFile.cs（突出显示）
          +MyCurrentlyOpenFile.cs（突出显示，可能是不同的颜色）

（带有红色下划线的可能是活动选项卡）

背景：我不知道这是否发生在其他人身上，但我多年来一直在这样做。在处理某些事情时，我在解决方案资源管理器中打开了一个文件，结果发现该文件已经打开，因此 Visual Studios 只是将该文件设置为活动选项卡。如果我只在一个窗口中工作，但是我的标签窗口几乎没有主窗口，它们通常在差异显示器上，所以当标签变得活跃时，我根本看不到它，因为它是不在主窗口上。当我去预览文件时，情况更糟。

锦上添花： - 如果它可以选择突出显示打开文件的父节点，那么示例“控制器”和“内容”文件夹也会突出显示。- 如果有什么东西可以为 vs 2010 做到这一点，那就太好了。

在这一点上，我正在寻找几乎所有的东西，一个扩展，一个可以编辑的样式表，或者作为最后的手段，一个很好的参考“如何为 Visual Studios 编写扩展”网站。

编辑：
作为澄清点，我不是在寻找在解决方案资源管理器中定位特定文件的方法，而是在寻找一种方法来使打开的文件在视觉上有所不同，以便我知道环顾四周在认为 VS2012 崩溃或文件混乱之前。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T21:15:38.980

尝试一个名为 VS 命令的扩展。它将帮助您找到解决方案中的文件。

或者这个扩展：http: [//visualstudiogallery.msdn.microsoft.com/d0d33361-18e2-46c0-8ff2-4adea1e34fef/](http://visualstudiogallery.msdn.microsoft.com/d0d33361-18e2-46c0-8ff2-4adea1e34fef/)

# css - 文本换行的 CSS2 替代方案：无

> ID：15956534
> 
> 赞同：0
> 
> 时间：2013-04-11T18:50:04.097
> 
> 标签：css

我有一个元素，我希望我的文本行永远不会中断，即使文本到达边界也不行。在那种情况下，我只是希望文本溢出，就像它只是一个长词一样。

经过一番研究，我发现 CSS3 属性 text-wrap 可以做到这一点。但是任何现代浏览器都不支持它。[http://www.w3schools.com/cssref/css3_pr_text-wrap.asp](http://www.w3schools.com/cssref/css3_pr_text-wrap.asp)

有没有我可以使用的替代方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T18:52:43.153

尝试[溢出](https://developer.mozilla.org/en-US/docs/CSS/overflow)和[空白](https://developer.mozilla.org/en-US/docs/CSS/white-space)？他们有相当好的浏览器支持。

[**在 JSFiddle 上查看它们**](http://jsfiddle.net/mqYr7/1/)

```
#overflow {
  white-space: nowrap;
  overflow: visible;
} 
```

作为对未来的建议，[我建议不要使用 w3schools](http://w3fools.com/)，因为他们的数据通常不完整，有时甚至是错误的。MDN 是一个更可靠的选择！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T18:56:54.463

将代码包装在`<pre>`这意味着您的文本是预先格式化的，并且只有在您实际声明它时才会换行 DEMO [http://jsfiddle.net/kevinPHPkevin/zcSFP/](http://jsfiddle.net/kevinPHPkevin/zcSFp/)

```
<div>
    <pre><p>this is a long paragraph this is a long paragraph this is a long paragraph this is a long paragraph this is a long paragraph this is a long paragraph this is a long paragraph this is a long paragraph this is a long paragraph this is a long paragraph this is a long paragraph this is a long paragraph </p></pre>
</div> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-11T18:57:30.200

这只是关于 CSS 规范的非常非常奇怪的事情之一。与您正在寻找的最接近的属性是`word-wrap`. 不幸的是，它没有不包装的价值，但`white-space`确实如此。尝试将此添加到您的元素中：

```
selector {
    white-space:nowrap; /* Sets no wrapping */
overflow:hidden; /* Hides the text that overflows the container. */
} 
```

例如，您还可以使用 jmeas 的解决方案添加省略号。来源：[http ://css-tricks.com/almanac/properties/w/whitespace/](http://css-tricks.com/almanac/properties/w/whitespace/)

# django - 解析django测试结果

> ID：15956535
> 
> 赞同：2
> 
> 时间：2013-04-11T18:50:10.783
> 
> 标签：django, parsing, testing

我最近为我的一个 django 项目写了一些测试。我现在要做的是从脚本中调用测试命令。

我正在寻找解析测试结果并保存它们。django 测试框架有可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T19:44:40.003

最简单的方法是使用标准测试输出格式，例如 JUnit XML，已经有[库](https://pypi.python.org/pypi/django-jux)。现在，我正在使用 django-jenkins，它提供了一个很好的输出，我可以在我们的 CI 工具中查看。

如果您想推出自己的解决方案，我建议您编写自己的测试运行程序，并自定义[suite_result](https://docs.djangoproject.com/en/dev/topics/testing/advanced/#django.test.simple.DjangoTestSuiteRunner.suite_result)方法。

# java - Java，Weka：NaiveBayesUpdateable：无法处理数字类

> ID：15956537
> 
> 赞同：3
> 
> 时间：2013-04-11T18:50:16.177
> 
> 标签：java, weka, bayesian

我正在尝试使用 Weka 的 NaiveBayesUpdateable 分类器。我的数据包含名义属性和数字属性：

```
 @relation cars
  @attribute country {FR, UK, ...}
  @attribute city {London, Paris, ...}
  @attribute car_make {Toyota, BMW, ...}
  @attribute price numeric   %% car price 
  @attribute sales numeric   %% number of cars sold 
```

我需要根据其他属性预测销售数量（数字！）。当我运行时：

```
 // Train classifier
    ArffLoader loader = new ArffLoader();
    loader.setFile(new File(trainFileName));
    Instances structure = loader.getStructure();
    structure.setClassIndex(structure.numAttributes() - 1);

    // train NaiveBayes
    NaiveBayesUpdateable nb = new NaiveBayesUpdateable();
    nb.setUseKernelEstimator(true);
    nb.buildClassifier(structure); 
```

我得到例外：

```
 Exception in thread "main" weka.core.UnsupportedAttributeTypeException: weka.classifiers.bayes.NaiveBayesUpdateable: Cannot handle numeric class!
      at weka.core.Capabilities.test(Capabilities.java:954)
      at weka.core.Capabilities.test(Capabilities.java:1110)
      at weka.core.Capabilities.test(Capabilities.java:1023)
      at weka.core.Capabilities.testWithFail(Capabilities.java:1302)
      at weka.classifiers.bayes.NaiveBayes.buildClassifier(NaiveBayes.java:213)
      at foo.bar.IncrementalClassifier.trainEvalPredict(IncrementalClassifier.java:65)
      at foo.bar.IncrementalClassifier.main(IncrementalClassifier.java:36) 
```

如何在 Weka 中使用数字属性进行贝叶斯分类？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T19:29:02.553

您不能在 Weka 中使用贝叶斯分类器进行数字预测。他们都不支持这一点。

# php - 如何在具有多个控制器的 codeigniter 中显示活动记录？

> ID：15956538
> 
> 赞同：0
> 
> 时间：2013-04-11T18:50:16.393
> 
> 标签：php, codeigniter

我正在构建我的评论模块并试图让活动记录显示在视图中。看起来很简单，但是我有很多事情要做，并使用单独的模型和控制器，然后生成视图。

所以我有一个个人资料页面（我试图在其中显示结果）

控制器：

```
public function profile() 
      {
            $this->load->helper('url'); //Include this line
            $this->load->helper('date');
            $this->load->library('session');
            $this->load->library('form_validation');
            $session_id = $this->session->userdata('id'); //Ensure that this session is valid

            //TRYING TO MAKE A VARIABLE WITHT THE $_GET VALUE
            $user_get = $this->uri->segment(3); // Modify this line

            // LOAD THE CORRECT USER
            $this->load->model('account_model');
            $user = $this->account_model->user($user_get); //(suggestion) you want to pass the id here to filter your record

            $data['user'] = $user;
            $data['session_id'] = $session_id;

            if($user_get != $user['id'] || !$user_get)
            {
                $data['main_content'] = 'account/notfound';
                $this->load->view('includes/templates/profile_template', $data);
            }
            else
            {

            if($user_get == $session_id) //Modify this line also
            {
                $data['profile_icon'] = 'edit';
            }
            else
            {
                $data['profile_icon'] = 'profile';
            }
            $sharpie = $this->sharpie($user);
            $data['sharpie'] = $sharpie;
            $data['main_content'] = 'account/profile';
            $this->load->view('includes/templates/profile_template', $data);
            }

        } 
```

现在我有一个新的控制器来显示我想要显示的评论：

```
public function airwave() {
        $this->load->helper('date');
        $this->load->library('session');
        $airwave_get = $this->uri->segment(3); 
        $this->load->model('community_model');
        $airwave = $this->coummunity_model->airwave($airwave_get); 
        $data['airwave'] = $airwave;
        $data['main_content'] = 'account/profile';
        $this->load->view('includes/templates/main_page_template', $data);
    } 
```

使用此模型：

```
public function airwave($id=null) 
        {
            if(is_null($id)) {
                $session = $this->session->userdata('is_logged_in');
                $commenter_id = $this->session->userdata('id');
            }else{
                $commenter_id = intval($id);
            }

            $query = $this->db->query("SELECT * FROM airwaves_comments WHERE from_id=$commenter_id");
            if($query->num_rows()==1)
            {
               $data = $query->result_array();
               return $data[0];
            //above returns the single row you need to the controller as an array.
            //to the $data['user'] variable.

            }

        } 
```

并尝试在此视图上显示它（由配置文件功能生成）

```
<div class="profile_airwave_comment_text">
    <?php echo $airwave['comment'];?>
</div> 
```

我似乎无法让它将我正确创建的数组变量传递给该视图？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T11:09:27.550

我看到错误的第一件事是在你模型的电波函数中：

```
 if($query->num_rows()==1)
        {
           $data = $query->result_array();
           return $data[0]; 
```

您假设查询中只有一个结果，因此如果多于或少于一个，您的 $data 数组将被设置。

此外，即使那样，您也只返回数组中的第一个元素。在您的问题中，我没有看到您只想返回一个。

最后，在您看来，如果您现在返回整个数组，而不仅仅是一个元素，您将不得不执行一个 foreach 语句。

编辑：请参阅建议的解决方案。

在您的模型中，不必担心检查结果数组中的数据量。这将在稍后出现。只需这样做：

```
return $query->result_array(); 
```

现在，保持你的控制器不变，但调整你的视图：

```
<div class="profile_airwave_comment_text">
<?php 
    if (isset($airwave) && is_array($airwave) && !empty($airwave))
    {
        foreach ($airwave as $wave)
        {
            echo $wave['comment'];
        }
    }
    else
    {
        echo 'No comments found...';
    }
?>
</div> 
```

这应该有效，如果没有，至少让您知道没有评论是喜欢的，从而检查您的数据库。

！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T06:13:09.923

如果您使用 HMVC，只需从配置文件视图中调用模块，即：

```
echo Modules::run('comments/profileComments', $user->id); 
```

否则：您需要在加载器类中创建一个新方法，以便在控制器中加载与路由分开。

如果你真的在快速修复之后直到你想出一个更好的选择，你可以（取决于两个控制器是否位于同一个目录中）只需在你的'profile'控制器中包含'comments'控制器并尝试这样的事情：

**{缺点：CI 分页不起作用！}**

**应用程序/控制器/profile.php**

```
include 'Comments' . EXT;

class Profile extends CI_Controller{

    public function __construct ()
    {
        parent::__construct () ;

    }

    public function index( $user_id ){

        $commentsPartialView = call_user_func_array(array(new Comments(), "getProfileComments"), array($user_id));

        return $this->load->view($this->template, array(
               'view' => 'profiles/_index',
               'comments' => $commentsPartialView
        ));
    }

} 
```

-

**应用程序/控制器/Comments.php**

```
class Comments extends CI_Controller{

    public function __construct ()
    {
        parent::__construct () ;

    }

    public function getProfileComments( $user_id ){

        $user_comments = ''; //pull from DB

        //set third param to TRUE for partial view, without main template
        return $this->load->view('comments/show', array(
               'user_comments' => $user_comments
        ), TRUE);
    }

} 
```

# java - 源代码的 IDE 独立性 - 例如在 Eclipse 之外

> ID：15956539
> 
> 赞同：-1
> 
> 时间：2013-04-11T18:50:35.493
> 
> 标签：java, ide

最近我在 Stack Overflow 上发布了一个问题，寻找一些关于如何在[Eclipse](https://en.wikipedia.org/wiki/Eclipse_%28software%29)中创建具有依赖关系的[JAR](https://en.wikipedia.org/wiki/JAR_%28file_format%29)文件的说明。

当我提出这个问题时，我很快就发现我的问题措辞很糟糕，这让回答的人感到困惑，但那次事故引起了我想稍微解释一下的兴趣点。因此，当我发布关于如何在 Eclipse 中执行此操作的问题时，我几乎立即得到了响应“切换到[Maven](https://en.wikipedia.org/wiki/Apache_Maven)，不要依赖您的 IDE 来完成构建工具的工作”。这对我来说似乎有点回避而不是帮助，特别是考虑到我已经提到我已经在使用[Ant](https://en.wikipedia.org/wiki/Apache_Ant)为我的项目生成 JAR 文件。当我问为什么，我得到了回复“因为你的代码应该能够独立于编写代码的 IDE 构建”。

所以首先，以什么方式能够创建一个 JAR 文件，它的依赖关系要么在 JAR 文件中，要么在库文件夹中，使我的代码依赖于 IDE？

我的代码，无论有没有 dist 目录，仍然包含一个*src*目录，具有典型的 Java 源目录结构。这似乎是不合逻辑的。我觉得如果我说使用类库，并进行一些小的更改并需要部署到开发机器进行测试，我应该能够在我的 IDE 中轻松构建一个包含所有依赖项的 JAR 文件以进行部署它在某个地方。

拥有这种能力是构建步骤，而不是设计步骤。它不会改变源代码目录的结构，也不会改变任何关于代码的东西。它不会创建任何部分类或其他专门为我正在使用的 IDE 设计的鬼鬼祟祟的 Visual Studio 类型的东西；它只是请求一个具有有效清单及其依赖项的 JAR 文件。对 IDE 的要求真的那么多，还是我有这个错误？

在我看来，从一个 IDE 到另一个 IDE 的任何更改都需要一些转换工作。我用 Java 编写的代码没有明确说明给定程序集的位置，并且假设它不是某个 API，其在磁盘上的位置在安装期间被添加到环境变量中，您将始终必须手动解析这些引用。

如果我错了，请纠正我，但 Java 编译器不会强制执行源代码的目录结构（如果不正确则抛出 NoClassDef 类型异常），因此 IDE（至少对于 Java）是围绕该要求构建的?

我也觉得 IDE 的变化是一个罕见的事件。人们对他们的工具感到满意，而不是随机决定开始使用全新的 IDE，用于相同的项目，使用相同的语言。其他情况需要迫使一个人做出改变（新技术或其他）。

我还认为，许多开发人员在同一个地方工作、使用同一种语言并使用多个 IDE 的可能性几乎是不存在的。我工作过的每个地方，整个开发团队都使用相同的工具集，而开发团队正在从事相同类型的项目。Android 开发人员正在使用 Eclipse，[ASP.NET](https://en.wikipedia.org/wiki/ASP.NET)开发人员正在使用 Visual Studio 等。我知道会发生这种情况，但根据我的经验，IDE 的更改通常意味着转换到最近发布的同一 IDE 的任何新版本，并且通常会出现具有某种类型的向后兼容性或转换向导。

我不想开玩笑，也不想攻击我之前帖子中涉及的人，我对他们的推理很感兴趣。鉴于他们的答案获得的赞成票数量，似乎大多数社区都同意，并且为了不成为绵羊，请帮助我理解。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T18:59:23.033

您通常希望有一种方法可以通过自动化构建工具从 IDE 外部构建 jar，因为它可以实现可重复的自动化过程。假设您从 Eclipse 构建 jar，并通过包含源代码和 lib 目录来实现。然后其他人去构建它，他们忘记包含 lib 目录。随着您的构建变得越来越复杂，可能难以追踪问题。

例如，如果您在构建服务器上运行代码，则没有 ide，因此需要一种自动构建它的方法。您当然可以编写自己的脚本，但是有专门的工具可以让这变得更容易——即 gradle、maven 和 ant（无论如何在 java 世界中）。

您始终可以在 IDE 中使用该构建脚本，但需要有一种方法可以在没有 IDE 的情况下进行构建，并且所有构建都应该是一致的。

像 maven 这样的工具不仅可以构建，还可以帮助管理依赖关系。使用存储库管理器来存储您的项目需要的工件，因此您无需担心拥有 lib 文件夹并手动管理您的依赖项。您只需说出您想要什么，构建工具就会知道如何获得它。

能够快速构建也很重要。运行构建脚本比手动打包要快得多。

希望这可以让您深入了解为什么其他人建议使用构建工具。这是个好主意，任何严肃的项目都需要它们。

# buildroot - 为 Buildroot 应用 OpenEmbedded 补丁

> ID：15956540
> 
> 赞同：-2
> 
> 时间：2013-04-11T18:50:37.643
> 
> 标签：buildroot, openembedded

如何将为 OpenEmbedded 创建的补丁修改为 BuildRoot？它们之间有什么区别？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T12:46:59.993

这个补丁有什么作用？如果它是修改给定软件组件源代码的补丁，那么它应该很容易适应。另一方面，如果它是向 OpenEmbedded 添加新包或修改某些 OpenEmbedded 配方的补丁，则它不能用于 Buildroot：OpenEmbedded 和 Buildroot 是两个完全不同的构建系统。

也就是说，如果您不提供更多详细信息，就不可能准确回答您的问题。你能指出你所指的具体补丁吗？

# database - 我怎样才能让我的搜索框从一个关键字跳转到另一个关键字而不检查数据库的每一行？

> ID：15956541
> 
> 赞同：0
> 
> 时间：2013-04-11T18:50:48.350
> 
> 标签：database, delphi, firebird, zeos

我让这段代码适用于我的应用程序的搜索框，不幸的是，当它搜索或过滤时，它会检查数据库中的每一行，然后当找到搜索的单词时，它将显示在 tlabels 上，

```
procedure Tspcb.dccolbtnClick(Sender: TObject);
begin
  zdctable.First;
  while not zdctable.EOF do
  begin
     if (zdctable.FieldByName('Collector').AsString = dcedit.Text)
     then begin
        cn.Caption := zdctable.FieldByName('Client_Name').AsString;
        col.Caption := zdctable.FieldByName('Collector').AsString;
        pay.Caption := zdctable.FieldByName('Daily_Payment').AsString;
        date.Caption := zdctable.FieldByName('Date').AsString;
        ddate.Caption := zdctable.FieldByName('Due_Date').AsString;
        id.Caption := zdctable.FieldByName('ID').AsString;
        la.Caption := zdctable.FieldByName('Loan').AsString;
        tc.Caption := zdctable.FieldByName('Total_Collectibles').AsString;
     end;

     ShowMessage('click ok for next profile');
     zdctable.Next;
  end;
end; 
```

我想要做的是检查包含搜索词的行，而不是搜索数据库中的每一行。

我需要帮助分析这段代码，我只是一个正在学习如何使用 delphi 7 和编程的初学者。

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T04:05:59.083

问题基本上出在线路上

```
if (zdctable.FieldByName('Collector').AsString = dcedit.Text) 
```

在这里，您正在寻找相等性，因此您永远无法匹配部分字符串。我建议您更改查询（即 zdctable），使其看起来像这样

```
select * from zdctable
where collector like :p1 
```

您的程序将是

```
zdctable.params[0].asstring:= '%' + dcedit.text + '%';
zdctable.open; 
```

如果您的表通过数据源链接到网格，则将显示所有匹配的记录；无需提取每个字段并将其显示在不同的标签中。如果您想使用导航器一次显示一条记录，则将您的标签转换为链接到数据集的 dbtext 组件；如果这些组件设置正确，那么数据集中的每个字段都将显示在不同的 dbText 组件中。

另一种可能性是使用“定位”方法。如果我将您的语句转换为使用“定位”，那么您已经编写了相当于

```
zdctable.locate ('collector', dcedit.text, []) 
```

为了找到部分匹配，您需要编写

```
zdctable.locate ('collector', dcedit.text, [loPartialKey]) 
```

# c# - 显示多个表格

> ID：15956542
> 
> 赞同：3
> 
> 时间：2013-04-11T18:50:50.303
> 
> 标签：c#, visual-studio

在我的代码中，我有一个主窗体（名为 frmMain）和一个 About Box（名为 AboutBox1）。我想要发生的是当用户单击菜单条中的帮助菜单，然后单击关于我希望显示 AboutBox1 表单时。我已经研究过如何做到这一点，但是当我尝试打字时智能感知无法识别第二种形式，我不知道为什么。有任何想法吗？

我假设我在我的菜单按钮点击中输入的代码是：

```
AboutBox1 aboutbox = new aboutbox();
aboutbox.ShowDialog(); 
```

但是 AboutBox1 给出了找不到类型或命名空间的错误。

这是我目前拥有的代码。除此之外，还有一个新创建的表单，其中只有初始代码：

[https://gist.github.com/anonymous/5366535](https://gist.github.com/anonymous/5366535)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-11T18:52:30.870

尝试这个 ：

```
AboutBox1 aboutbox = new AboutBox1();
aboutbox.ShowDialog(); 
```

`ShowDialog()`创建一个模态窗口，如果你需要创建一个非模态窗口你可以使用`Show()`方法。

* * *

在 C# 中

初始化对象的典型方法是

```
Classname variable_name = new Classname(); // assuming that constructor does not take any parameter 
```

* * *

读一遍这篇文章：[`Objects (C# Programming Guide)`](http://msdn.microsoft.com/en-us/library/ms173110.aspx)它将帮助你理解一些基本的东西。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-11T18:52:41.783

如果您的班级被命名`AboutBox1`，您需要使用

```
AboutBox1 aboutbox = new AboutBox1(); 
```

实例化`aboutbox`该类型的对象`AboutBox1`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T18:57:23.593

这一行：

```
AboutBox1 aboutbox = new aboutbox(); 
```

不是 C# 语言中对象的正确初始化。您应该尝试通过以下方式初始化对象：

```
AboutBox1 aboutbox = new AboutBox1(); 
```

在 MSDN 上阅读更多内容：

*   [使用构造函数（C# 编程指南）](http://msdn.microsoft.com/en-us/library/ms173115.aspx)
*   [如何：使用对象初始化器初始化对象（C# 编程指南）](http://msdn.microsoft.com/en-us/library/vstudio/bb397680.aspx)
*   [类和结构（C# 编程指南）](http://msdn.microsoft.com/en-us/library/ms173109.aspx)

# javascript - 对字段求和的问题

> ID：15956549
> 
> 赞同：2
> 
> 时间：2013-04-11T18:51:14.847
> 
> 标签：javascript

这是一个基本的 html/javascript 代码，但我在获取所有字段的总和时遇到问题。（*原来项目中有50个字段，但现在我只留下5个*）

如果该字段为空白，则只需忽略它，并仅添加已填充字段的字段。

HTML 代码：

```
value1:<input type="text" id="total_1" ><br>
value2:<input type="text" id="total_2" ><br>
value3:<input type="text" id="total_3" ><br>
value4:<input type="text" id="total_4" ><br>
value5:<input type="text" id="total_5" ><br>
total:<input type="text" id="totalresult" >
<button type="button" onclick="getTotal(); return false;">Get total</button> 
```

Javascript：

```
function getTotal() {
var sum;
for (i = 1; i <=5 ; i++) {
    var total = document.getElementById('total_' + i.toString()).value;
    if (total != '') {
        sum = parseFloat(total) + sum;
        document.getElementById('totalresult').value = sum;
    }

  }

} 
```

我不知道为什么我的代码不起作用。

这是我的[小提琴](http://jsfiddle.net/xvrtM/3/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T18:53:06.640

您的代码第一次运行时， sum 将是未定义的。

初始化

```
var sum = 0; 
```

为了让它在小提琴中工作，你需要改变

左上角的 onLoad 到 'No wrap - in'

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T19:00:53.880

你需要做两件事。1、将sum初始化为零。2、检查输入值是否不是数字。

```
function getTotal() {
    var sum = 0;
    for (i = 1; i <= 5; i++) {
        var total = document.getElementById('total_' + i).value;
        if (!isNaN(parseFloat(total))) sum = parseFloat(total) + sum;
        document.getElementById('totalresult').value = sum;
    }
} 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/xvrtM/12/)**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-11T18:54:28.853

我不知道为什么你的小提琴无法弄出`getTotal`一个全球性的。但是您的主要问题是总和未定义为开始。这将导致`NaN`(Not a Number) ：

```
var sum;

sum = 1 + sum; // NaN 
```

……

```
sum = 1 + undefined; // NaN

sum = 1 + NaN; // NaN 
```

[jsbin.com 上的演示](http://jsbin.com/abasuz/1/edit)

您应该首先将 sum 设置为零：

```
var sum = 0;
for ( ... ) { ... 
```

[adrianp 指出的工作演示：`It would probably be more clear if you uploaded the working code to jsbin.`](http://jsbin.com/abasuz/2/edit)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-11T18:55:47.620

您尚未定义 sum 变量，因此 javascript 将其视为 NaN，这意味着不是数字。您需要对其进行初始化以正确设置。

```
 function getTotal() {
            var sum = 0;
    for (i = 1; i <=5 ; i++) {
    var total = document.getElementById('total_' + i.toString()).value;
if(isNaN(total) || total.indexOf(' ') == 1) {
    alert("Please type a number");
    document.getElementById("totalresult").value = "I cant sum alphanumerics";
    return false;
} 

if (total != '') {
    sum = parseFloat(total) + sum;
    document.getElementById('totalresult').value = sum;
} 
```

} }

**[小提琴](http://jsfiddle.net/xvrtM/19/)**

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-11T19:26:03.140

使用`IsNumeric`函数检查输入字段是否有有效数字。请参阅：[在 JavaScript 中验证十进制数字 - IsNumeric()](https://stackoverflow.com/questions/18082/validate-numbers-in-javascript-isnumeric)

这是我改进 for 循环中代码的建议：

```
var elementValue = document.getElementById('total_' + i).value
IsNumeric(elementValue) ? elementValue : elementValue = 0; 
```

# php - 在 php 和 android 之间进行数据通信的最简单方法

> ID：15956561
> 
> 赞同：1
> 
> 时间：2013-04-11T18:51:57.290
> 
> 标签：php, android

我正在尝试构建一个基于酒店管理的 android 应用程序。该应用程序只是向用户提供交易列表。该网站存储有关用户的数据并在数据库中的 sql 表中进行交易。

是否有任何简单的方法可以将交易详细信息和用户详细信息（如用户名、酒店名称等）从网站传递到 Android 应用程序，反之亦然。

我知道使用 json 可以做到这一点。但我发现很难实施。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T19:12:13.030

在 android 上使用[https://code.google.com/p/google-gson/](https://code.google.com/p/google-gson/)并在 PHP 中使用 json_encode() 非常轻松（还可以查看 blackpanthers 的响应），这里是如何在 java 中绑定该东西的简短摘录在具体样品上：

首先在 PHP 中实现 json_encode() 并在浏览器中调用，这样你就可以看到结果，比如说，你会得到类似的东西：

{“用户名”：“我的名字”，“用户姓氏”：“我的姓氏”，“电话”：{“手机”：“11111”}}

现在，您有一个 JSON 实体，其中包含属性“user_name”、“user_surname”和“phones”。而“phones”是一个嵌套实体，包含一个属性“mobile”。

现在您为每个实体创建一个 java 类，所以我们需要两个，一个包含“电话”，另一个包含所有属性，包括实体“电话”

```
class Phones {
    // with this annotation you can bind to
    // properties from JSON named differently than
    // the property in this class
    @SerializedName("mobile")
    String thePhone;
}

class MyJson {
    String user_name;
    String user_surname;
    Phones phones;
} 
```

好吧，就是这样：）啊，好吧，最后一部分

```
 ...
    InputStream is = new URL("http://www.my.php.returning.json").openStream();
    InputStreamReader isr = new InputStreamReader();
    MyJson myJson = new Gson().fromJson(isr , MyJson.class);
    ... //close stream, handle exceptions, etc.

    // now you've got that all in the myJson object... 
```

干得好！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T18:54:41.750

您可能会发现以下教程很有用：[http ://www.helloandroid.com/tutorials/connecting-mysql-database](http://www.helloandroid.com/tutorials/connecting-mysql-database)

本教程展示了如何使用 MySQL 数据库和 PHP 将 JSON 发送到 android 应用程序。

（这是假设您使用的是 MySQL 数据库，如果没有，它仍然是一个有用的教程）。

您还可以使用 GSON、Google 的 API 和以下教程： [http ://www.techrepublic.com/blog/app-builder/use-gson-to-work-with-json-in-your-android-apps/1386](http://www.techrepublic.com/blog/app-builder/use-gson-to-work-with-json-in-your-android-apps/1386)

# lua - 碰撞后重新设置生成

> ID：15956568
> 
> 赞同：0
> 
> 时间：2013-04-11T18:52:12.667
> 
> 标签：lua, coronasdk, collision

基本上发生的情况是对象在随机位置从屏幕生成，然后流入和流出屏幕视图。随着屏幕的流动，它们再次在屏幕外的随机位置重置，但是如果玩家与它发生碰撞，我无法做到这一点。

总而言之，我如何让对象位置在与玩家碰撞时再次从屏幕上重生？

这是目标代码。

```
UFO = display.newImage("ufo.png")
  UFO.name = "UFO"
  UFO.x = 640
  UFO.y = 100
  UFO.speed = math.random(2,6)
  UFO.initY = UFO.y
  UFO.amp = math.random(20,100)
  UFO.angle = math.random(1,360)
  physics.addBody(UFO, "static") 
```

* * *

```
function moveUFO(self,event)
  if self.x < -50 then
     self.x = math.random(500,1500)
     self.y = math.random(90,220)
     self.speed = math.random(2,6)
     self.amp = math.random(20,100)
     self.angle = math.random(1,360)
else 
    self.x = self.x - self.speed
    self.angle = self.angle + .1
    self.y = self.amp*math.sin(self.angle)+self.initY
end 
```

这是碰撞检测的代码

```
 function ship:collision(event)
            if (event.other.name == 'UFO') then
                    event.other:removeSelf(self)
                    scoreAnim = display.newText('+10', ship.x, ship.y-10, native.systemFontBold, 16)
                    transition.to(scoreAnim, {time = 1000, y = scoreAnim.y - 30, alpha = 0, onComplete = function() display.remove(scoreAnim) scoreAnim = nil end})
                    scoreAnim:setTextColor(0,255,12)
                   --increases score
                    collectedN.text = tostring(tonumber(collectedN.text) + 1) 
```

ship:addEventListener("collision", onCollision, ship, addTime)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T21:35:26.637

如果我没有误解你不知道碰撞检测。你应该研究这个页面：http: [//developer.coronalabs.com/content/game-edition-collision-detection](http://developer.coronalabs.com/content/game-edition-collision-detection)

编辑部分：

```
function ship:collision(event)
    if (event.other.name == 'UFO') then
          timer.performWithDelay( 50, function() event.other.x = math.random( 0, 320 ); event.other.y = math.random( 0.480 ); end, 1 )
          scoreAnim = display.newText('+10', ship.x, ship.y-10, native.systemFontBold, 16)
          transition.to(scoreAnim, {time = 1000, y = scoreAnim.y - 30, alpha = 0, onComplete = function() display.remove(scoreAnim) scoreAnim = nil end})
          scoreAnim:setTextColor(0,255,12)
          --increases score
          collectedN.text = tostring(tonumber(collectedN.text) + 1) 
```

这样就可以了..您可以在那里修改随机值。而且你不能在碰撞时间内移动你的物体，因为电晕物理会在碰撞时间内锁定所有物理对象。所以你应该在碰撞后立即移动你的物体。

# c# - 在 CheckedChange 事件中禁用/启用多个项目

> ID：15956569
> 
> 赞同：3
> 
> 时间：2013-04-11T18:52:14.200
> 
> 标签：c#, winforms, checkbox

我有几个复选框和一个文本框。当我选中某个复选框时，它将禁用文本框和其他指定的复选框。

该代码适用于文本框。当我添加`else`语句时，它仍然适用于文本框，但不适用于复选框。如果我省略`else`并且只使用`if`来禁用它们，它就可以工作。如果未选中该复选框，我需要它来重新启用它们。

我在面板中有所有有问题的复选框。

```
 private void noModemChkbox_CheckedChanged(object sender, EventArgs e)
    {
        if (noModemChkbox.Checked == true)
        {
            custModemText.Enabled = false;
            pwrCbx.Enabled = false;
            e1Cbx.Enabled = false;
            e2Cbx.Enabled = false;
            e3Cbx.Enabled = false;
            e4Cbx.Enabled = false;
            dslblinkCbx.Enabled = false;
            enetCbx.Enabled = false;
            dslCbx.Enabled = false;
            inetCbx.Enabled = false;
            inetredCbx.Enabled = false;
            wlanCbx.Enabled = false;
            activityChkbox.Enabled = false;
        }
        else
            custModemText.Enabled = true;
        pwrCbx.Enabled = true;
        e1Cbx.Enabled = true;
        e2Cbx.Enabled = true;
        e3Cbx.Enabled = true;
        e4Cbx.Enabled = true;
        dslblinkCbx.Enabled = true;
        enetCbx.Enabled = true;
        dslCbx.Enabled = true;
        inetCbx.Enabled = true;
        inetredCbx.Enabled = true;
        wlanCbx.Enabled = true;
        activityChkbox.Enabled = true;
    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-11T18:54:48.000

您忘记在 else 语句周围加上大括号：

```
private void noModemChkbox_CheckedChanged(object sender, EventArgs e)
{
    if (noModemChkbox.Checked == true)
    {
        custModemText.Enabled = false;
        pwrCbx.Enabled = false;
        e1Cbx.Enabled = false;
        e2Cbx.Enabled = false;
        e3Cbx.Enabled = false;
        e4Cbx.Enabled = false;
        dslblinkCbx.Enabled = false;
        enetCbx.Enabled = false;
        dslCbx.Enabled = false;
        inetCbx.Enabled = false;
        inetredCbx.Enabled = false;
        wlanCbx.Enabled = false;
        activityChkbox.Enabled = false;
    }
    else
    {
        custModemText.Enabled = true;
        pwrCbx.Enabled = true;
        e1Cbx.Enabled = true;
        e2Cbx.Enabled = true;
        e3Cbx.Enabled = true;
        e4Cbx.Enabled = true;
        dslblinkCbx.Enabled = true;
        enetCbx.Enabled = true;
        dslCbx.Enabled = true;
        inetCbx.Enabled = true;
        inetredCbx.Enabled = true;
        wlanCbx.Enabled = true;
        activityChkbox.Enabled = true;
    }
} 
```

这不会简单得多吗？：

```
private void noModemChkbox_CheckedChanged(object sender, EventArgs e)
{
    bool bEnabled = !noModemChkbox.Checked;

    custModemText.Enabled = bEnabled;
    pwrCbx.Enabled = bEnabled;
    e1Cbx.Enabled = bEnabled;
    e2Cbx.Enabled = bEnabled;
    e3Cbx.Enabled = bEnabled;
    e4Cbx.Enabled = bEnabled;
    dslblinkCbx.Enabled = bEnabled;
    enetCbx.Enabled = bEnabled;
    dslCbx.Enabled = bEnabled;
    inetCbx.Enabled = bEnabled;
    inetredCbx.Enabled = bEnabled;
    wlanCbx.Enabled = bEnabled;
    activityChkbox.Enabled = bEnabled;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T18:54:24.610

您需要在 else 周围使用括号，如下所示：

```
else
{
    custModemText.Enabled = true;
    pwrCbx.Enabled = true;
    e1Cbx.Enabled = true;
    e2Cbx.Enabled = true;
    e3Cbx.Enabled = true;
    e4Cbx.Enabled = true;
    dslblinkCbx.Enabled = true;
    enetCbx.Enabled = true;
    dslCbx.Enabled = true;
    inetCbx.Enabled = true;
    inetredCbx.Enabled = true;
    wlanCbx.Enabled = true;
    activityChkbox.Enabled = true;
} 
```

您的原始代码实际上是这样解释的：

```
else
{
    custModemText.Enabled = true;
}

pwrCbx.Enabled = true;
e1Cbx.Enabled = true;
e2Cbx.Enabled = true;
e3Cbx.Enabled = true;
e4Cbx.Enabled = true;
dslblinkCbx.Enabled = true;
enetCbx.Enabled = true;
dslCbx.Enabled = true;
inetCbx.Enabled = true;
inetredCbx.Enabled = true;
wlanCbx.Enabled = true;
activityChkbox.Enabled = true; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-11T18:56:43.223

您需要在 else 子句中包含所有您想要的内容的括号`{}`（如果您有多个语句）：

```
private void noModemChkbox_CheckedChanged(object sender, EventArgs e)
{
    if (noModemChkbox.Checked == true)
    {
        custModemText.Enabled = false;
        pwrCbx.Enabled = false;
        e1Cbx.Enabled = false;
        e2Cbx.Enabled = false;
        e3Cbx.Enabled = false;
        e4Cbx.Enabled = false;
        dslblinkCbx.Enabled = false;
        enetCbx.Enabled = false;
        dslCbx.Enabled = false;
        inetCbx.Enabled = false;
        inetredCbx.Enabled = false;
        wlanCbx.Enabled = false;
        activityChkbox.Enabled = false;
    }
    else
    {
        custModemText.Enabled = true;
        pwrCbx.Enabled = true;
        e1Cbx.Enabled = true;
        e2Cbx.Enabled = true;
        e3Cbx.Enabled = true;
        e4Cbx.Enabled = true;
        dslblinkCbx.Enabled = true;
        enetCbx.Enabled = true;
        dslCbx.Enabled = true;
        inetCbx.Enabled = true;
        inetredCbx.Enabled = true;
        wlanCbx.Enabled = true;
        activityChkbox.Enabled = true;
    }
} 
```

# python - 重载类方法时引用self

> ID：15956572
> 
> 赞同：2
> 
> 时间：2013-04-11T18:52:27.780
> 
> 标签：python, default, self

如果这里的“重载”不是正确的术语，请原谅我......

我正在尝试做这样的事情：

```
class Length:

    def __init__(self, length = 0):
        self._length = length

    def twice(self, length = self._length):
        return length*2 
```

如您所见，我试图`self._length`在`twice()`. Python 不喜欢这样。我明白了`NameError: name 'self' is not defined`。

有没有一种好方法可以分配这样的默认值并得到我想要的？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-11T18:53:56.877

您不能将实例属性用作方法的默认参数。方法及其默认参数值是在定义类时定义的，但实例属性直到稍后实例化类时才存在。

你所要做的：

```
def twice(self, length=None):
    if length is None:
        length = self._length
    return length*2 
```

# nullpointerexception - JavaDoc 警告可能的 NullPointerException

> ID：15956585
> 
> 赞同：0
> 
> 时间：2013-04-11T18:53:14.873
> 
> 标签：nullpointerexception, javadoc

我编写了一个方法，可以返回 Android 上最有可能的 LAN 接口。由于用户可能未连接到 LAN，因此此方法可能返回 null。我应该如何在 JavaDoc 中警告调用者这种可能性？我认为我不应该使用@throws，因为该方法实际上并没有抛出 NullPointerException。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T19:01:56.597

我认为正确的方法是在 return 子句中：

```
/**
 * ...
 * @return {@code null} if the user is not connected to a LAN, else the most
 * likely LAN interface.
 */
public LanInterface getMostLikelyInterface(); 
```

调用者有责任知道这意味着在检查之前不要使用返回的值。

尽管您可以改用 Guavas 的`Optional`课程：

```
/**
 * ...
 * @return Optional.absent if the user is not connected to a Lan interface,
 *    else the most likely one.
 */
public Optional<LanInterface> getMostLikelyInterface(); 
```

然后用户必须使用`if(iface.isPresent())`，它比 . 可读性强得多`if(iface != null)`。

# wolfram-mathematica - 枚举一个“地图”变量

> ID：15956587
> 
> 赞同：0
> 
> 时间：2013-04-11T18:53:23.420
> 
> 标签：wolfram-mathematica

我有以下“地图”变量：

```
permutation[100]=-2;
permutation[3]=-1;
permutation[19]=0;
permutation[-20]=1; 
```

有没有办法枚举所有的值？我不在乎枚举顺序。我的意思是这样的（不工作的代码）：

```
Do[i+=3,{i,permutation}] 
```

我告诉他们受 C++ 启发的“映射”变量。他们的正确名称是什么，以找到更好的搜索结果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T18:42:01.103

这是“元数学”变量或函数的定义存储在内部，可以使用 DownValues[] 提取，因此，如果您想要定义排列的“输入值”集，请使用

```
Cases[DownValues[permutation], permutation[x_] :> x, \[Infinity]] 
```

结果是

```
{-20, 3, 19, 100} 
```

耶胡达

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T20:45:43.747

您所做的基本上是定义离散值的函数。如果您维护一个值列表，您可以这样做：

```
permutation[100] = -2;
permutation[3] = -1;
permutation[19] = 0;
permutation[-20] = 1;
vals = {100, 3, 19, -20} 
```

像这样使用：

```
f /@ permutation /@ vals  -> {f[-2], f[-1], f[0], f[1]} 
```

或循环..

```
Do[ Print[permutation[vals[[i]]]], {i, Length[vals]}] 
```

首先可能有更好的方法来定义您的数据..

这是一个有时有用的技巧（虽然只适用于正参数）

```
permutation = SparseArray[{}, {200}, Null]
permutation[[100]] = -2;
permutation[[3]] = -1;
permutation[[19]] = 0;
f /@ Select[ permutation, ! (TrueQ[# == Null]) &]

out: {f[-1], f[0], f[-2]} 
```

最简单的方法是将排列变成一个列表：

```
permutation={}
AppendTo[permutation,{100,2}]
AppendTo[permutation,{3,-1}] 
```

然后做

```
 f[#[[2]]]& /@ permutation -> {f[2],f[-1]} 
```

# php - 属性的静态属性的PHP语法

> ID：15956588
> 
> 赞同：0
> 
> 时间：2013-04-11T18:53:24.203
> 
> 标签：php, syntax, static, attributes

我已经实现了一个单例模式类，并且可以在这样的其他类中使用：

```
class myClass {

private $attr;

public function __construct() {

    $this->attr = Singleton::getInstance;

    echo $this->attr::$sngtAttr; // Throw an error

        // witch syntax use whithout pass by a temp var ? 

    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T19:01:27.900

你的问题到底是什么？这就是你如何做一个单例：

```
<?php

class ASingletonClass
{
    // Class unique instance. You can put it as a static class member if
    // if you need to use it somewhere else than in yout getInstance
    // method, and if not, you can just put it as a static variable in
    // the getInstance method.
    protected static $instance;

    // Constructor has to be protected so child classes don't get a new
    // default constructor which would automatically be public.
    protected final function __construct() 
    {
        // ...
    }

    public static function getInstance() 
    {
        if( ! isset(self::$instance)) {
            self::$instance = new self;
        }

        return self::$instance;
    }

    // OR :

    public static function getInstance() 
    {
        static $instance;

        if( ! isset($instance)) {
            $instance = new self;
        }

        return $instance;

        // In that case you can delete the static member $instance.
    }

    public function __clone()
    {
        trigger_error('Cloning a singleton is not allowed.', E_USER_ERROR);
    }
}

?> 
```

另外不要忘记调用getInstance时的()，它是一个方法，而不是一个成员。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T18:59:57.033

$sngtAttr 是静态属性吗？

如果没有，那么只是：
`echo $this->attr->sngtAttr; instead of echo $this->attr::$sngtAttr;` 会这样做。

否则因为是静态的：

`echo Singleton::$sngtAttr;`

# asp.net - 将 Subgurim GMap 坐标转换为字符串

> ID：15956589
> 
> 赞同：0
> 
> 时间：2013-04-11T18:53:29.590
> 
> 标签：asp.net, vb.net, coordinates, subgurim-maps

我已经开始使用`Subgurim's Map`控件，`ASP.NET`并且需要将其转换`coordinates`为 a`string`或类似的东西，以便我可以将其放入我的`database`.

这是我的代码：

> ```
>  Protected Sub lnkShowMap_Click(ByVal sender As Object,
>     ByVal e As System.EventArgs) Handles lnkShowMap.Click
>     Dim strFullAddress As String
>     Dim sMapKey As String =
>     ConfigurationManager.AppSettings("googlemaps.subgurim.net")
>     Dim GeoCode As Subgurim.Controles.GeoCode
> 
>     ' Combine our address fields to create the full address.  The street,
>     ' suburb and country should be seperated by  periods (.)
>     strFullAddress = txtStreetAddress.Text & ". " & txtSuburb.Text & ". " & txtCountry.Text
> 
>     ' Work out the longitude and latitude
>     GeoCode = GMap1.geoCodeRequest(strFullAddress, sMapKey)
> Dim gLatLng As New Subgurim.Controles.GLatLng(GeoCode.Placemark.coordinates.lat,
>     GeoCode.Placemark.coordinates.lng)
>     ' Display the map
>     GMap1.setCenter(gLatLng, 16, Subgurim.Controles.GMapType.GTypes.Normal)
>     Dim oMarker As New Subgurim.Controles.GMarker(gLatLng)
>     GMap1.addGMarker(oMarker)
> 
>     ' Create coordinates in stored mem ' 
>     Dim coordinates As GeoCode = GMap1.getGeoCodeRequest(GeoCode.Placemark.coordinates)
>     System.Diagnostics.Debug.WriteLine(coordinates)
> End Sub 
> ```

我对此的最后两行有疑问`sub`，我将其定义`'coordinates'`为 的结果`Gmap1's placemarker's coordinates`，但尽管在此期间`debugging`， 的值`GeoCode.Placemark.coordinates`并未归因于`'coordinates'`

这是一个截图`debugging process`： http: [//www.wherelionsroam.co.uk/debug.png](http://www.wherelionsroam.co.uk/debug.png)

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T09:22:23.340

首先，如果您调用`GMap1.getGeoCodeRequest()`将`GLatLng`对象作为参数传递，您将浪费地理编码调用，因为返回的坐标将与您作为参数传递的坐标相同。实际上，在您的代码中，您拥有所需的一切`GeoCode.Placemark.coordinates`。

```
Dim coordinates as GLatLng = GeoCode.Placemark.coordinates 
```

在坐标变量中，您将拥有`lat`和`lng`属性，其中包含您需要的信息并保存一个地理编码调用（保存调用很重要，因为它们受到 Google 的限制）。

# css - 需要帮助调整 div 类的 css

> ID：15956590
> 
> 赞同：0
> 
> 时间：2013-04-11T18:53:31.807
> 
> 标签：css, html

我将此代码粘贴到我的 header.php 文件中以获得选择加入按钮：

```
<div class="createsend-button" style="height:27px;display:inline-block;"data-listid="r/72/191/0E3/389738A3FFEDFFA8">
</div>
<script type="text/javascript">....</script> 
```

我似乎无法控制放置 - 如果我将 .createsend-button 添加到 css 则没有效果。当我在 Firebug 中看到这个时，它说这个 div 类实际上是 .subscribe-button-inner 但在 css 中自定义该类也没有效果。

我在这里想念什么？

我的网站位于：[http ://tinyurl.com/c5eujcj](http://tinyurl.com/c5eujcj)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T18:57:24.483

创建结束按钮的 iframe 具有内联 CSS，包括`position: absolute`. 如果createsend 提供更改按钮的选项，那将是您的最佳选择。如果没有，请使用：

```
<div class="applyStylesToThis">
   <div class="createsend-button" style="height:27px;display:inline-block;" data-listid="r/72/191/0E3/389738A3FFEDFFA8"></div>
</div> 
```

# excel - 如果两个单元格之一为空白，我需要一个公式来计算两个单元格之间的差异。

> ID：15956592
> 
> 赞同：-1
> 
> 时间：2013-04-11T18:53:40.467
> 
> 标签：excel, formula

示例：A2 = 4，C2 = 2；它会将差异计算为 2，但如果 C2 为空，我需要它显示空白

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T18:57:00.140

您可以使用`IF`.

用法：`IF(condition, execute_if_true, execute_if_false)`

所以，我们想先看看C2是否为空。`IF(C2="", execute_if_true, execute_if_false)`

如果 C2 为空白，则返回空白：`IF(C2="", "", execute_if_false)`

否则，返回 A2 和 C2 之间的差：`IF(C2="", "", A2-C2)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T19:04:27.017

您可以在 OR 函数中测试许多逻辑条件：

=IF(OR(ISBLANK(A2);ISBLANK(C2));"";A2-C2)

# angularjs - 在指令中设置类时出现AngularJS错误

> ID：15956593
> 
> 赞同：1
> 
> 时间：2013-04-11T18:53:43.053
> 
> 标签：angularjs, angularjs-directive

我正在创建一个指令，该指令从通过属性传入的方法呈现内容列表。除了传递一个从中获取数据的方法之外，它还接受两个属性来为列表中呈现的 ul 和 li 元素设置一个类。当我在 li 元素上设置类时，它工作正常。当我尝试在 ul 上设置一个类时，随之而来的是混乱：ng-repeat 不再按预期工作，并引发异常“未定义不是函数”

这是有问题的指令的简化版本。

```
var myApp = angular.module('myApp',[]).
directive('contentList',function(){
   return {
       restrict: 'E',
       replace: true,
       transclude: true,
       scope: {
           method:'&',
           ulclass: '@',
           liclass: '@'
       },
       template: '<div class="content-list-wrapper"> ' +
                    '<div class="content-loader" ng-show="loading"><i>Loading...</i></div>' +
       '<ul class="content-list {{ulclass}}">' +
                        '<li class="content-list-repeat {{liclass}}" ng-repeat="item in items" ng-transclude></li>' +
                    '</ul>' +
                '</div>',
       link: function(scope,iElement,iAttrs){
           scope.items = scope.method();
       }
   } ;
}); 
```

如果在 ul 元素的 class 属性中删除 {{ulclass}}，一切正常。我很困惑为什么它适用于 li，但不适用于 ul。

我在[http://jsfiddle.net/woogychuck/wqU63/设置了一个 jsfiddle](http://jsfiddle.net/woogychuck/wqU63/)

# python - BeautifulSoup，在文本文件中解析和写入数据

> ID：15956597
> 
> 赞同：0
> 
> 时间：2013-04-11T18:53:48.423
> 
> 标签：python, file, io, beautifulsoup

```
from bs4 import BeautifulSoup

soup = BeautifulSoup(open("youtube.htm"))

for link in soup.find_all('img'):
    print  link.get('src')

file = open("parseddata.txt", "wb")
file.write(link.get('src')+"\n")
file.flush() 
```

您好，我想尝试一下 BeautifulSoup 并解析了一些 youtube 网站。它得到约。25行链接由此而来。但是，如果我查看文件，则只有最后一个已写入（其中的一小部分）。我尝试了不同的打开模式，或者 file.close() 函数。但没有任何效果。有人有线索吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-11T19:04:02.343

您正在遍历这一行中的每个 img 标签并打印每个标签：

```
for link in soup.find_all('img'):
    print  link.get('src') 
```

但是，您不是在该循环中写入文件，您只是`link.get('src')+'\n'`在最后写入。

这只会写入当前分配给的链接，这只是您在上面的循环中找到的**最后一个img 标记。**这就是为什么只有一个 'src' 值将写入输出文件的原因。

您需要将每一行写入循环中的文件，该文件会遍历您感兴趣的每个 img 标签。您需要进行一些重新排列才能做到这一点：

```
from bs4 import BeautifulSoup

soup = BeautifulSoup(open("youtube.htm"))

file = open("parseddata.txt", "wb")

for link in soup.find_all('img'):
    print  link.get('src')
    file.write(link.get('src')+"\n")

file.flush()
file.close() 
```

您还应该记得关闭文件，因为我在上面代码段的最后一行中添加了该文件。

`with`编辑：根据下面 Hooked 的评论，如果您使用关键字，这就是这个片段的样子。一旦缩进块结束，使用`with`将自动为您关闭文件，这样您甚至不必考虑它：

```
from bs4 import BeautifulSoup

soup = BeautifulSoup(open("youtube.htm"))

with open("parseddata.txt", "wb") as file:
    for link in soup.find_all('img'):
        print  link.get('src')
        file.write(link.get('src')+"\n") 
```

# jquery - Tabs/JQuery - 填充所有容器区域

> ID：15956610
> 
> 赞同：0
> 
> 时间：2013-04-11T18:54:22.940
> 
> 标签：jquery, html, css

有以下用于制作标签的 HTML 代码：

```
<div id="content">
    <div id="tabset">
        <ul>
            <li><a href="#panel1">Tab One</a></li>
            <li><a href="#panel2">Tab Two</a></li>
        </ul>
        <div id="panel1">123</div>
        <div id="panel2">456</div>
    </div>
</div> 
```

和简单的JS代码：

```
$('#tabset').tabs(); 
```

它有效，一切都很好。但问题如下：具有“内容” id 的 div 的“最小高度”css 值为 600 像素，并且选项卡标题区域填充了所有“内容”div。我该如何解决？

![结果](https://i.stack.imgur.com/iGIUd.png)

所有CSS：

```
body {
    font: 10pt Arial, Helvetica, sans-serif;
    background: #dcdcdc;
}

#container {
    width: 800px; 
    margin: 0 auto; 
}

#body {
    min-height: 600px;
}

#header {
    margin-top: 25px;
    padding: 10px;
    background: #ffffff;
}

#content {
    margin-top: 25px;
    padding: 10px;
    background: #ffffff;
    min-height: 600px;
    position: relative;
}

#footer {
    margin-top: 25px;
    background: #ffffff;
    padding: 10px;
}

.left-part {
    float: left;
    width: 50%;
}

.right-part {
    height: 100%;
    text-align: right;
    vertical-align: middle;
}

table.align  {
    width:  100%;
    border-spacing: 0;
}

table.align td {
    width: 50%;
    vertical-align: middle;
}

table.align td.right {
    text-align: right; 
    vertical-align: middle;
   }

table.bottom_table {
    color: #000000; 
    font-weight: bold;      
    width:  100%;
    border-spacing: 0;
}

table.bottom_table td {
    vertical-align: top;
}

table.bottom_table a {
    text-decoration:none;
    color: #000000;
}

#copyright {
    color: #8B8B83; 
    font-style: italic;
    font-weight: bold;
}

#title {
    font-size: 2.0em;
    font-weight: bold;
}

#login {
    font-weight: bold;
}

#about_project {
    width: 25%;
}

#faq {
    width: 25%;
}

#social {
    width: 50%;
}
#sidebar {
    background: #ffffff;
    margin-top: 25px; 
    width: 220px;
    min-height: 600px;
    padding: 10px;
    float: left;
}

#content {
    margin-left: 260px;
}

table.align td.checkbox_cell {
    width: 10%;
}

table.align td.department_cell {
    width: 25%;
}

.sidebar-list {
    list-style-type: none;
    margin: 0px;
    padding: 0px;
}

.list-departments {
    margin
}

p.vacancy-date {
    margin: 0px;
    padding: 0px;
}

p.vacancy-status {
    margin: 0px;
    padding: 0px;
}

#dialogg {
    display: none;
}

/* New vacancy styles */

.vacancy-field {
    width: 100%;
}

textarea.vacancy-textarea {
    height: 200px;
} 
```

# robohelp - RoboHelp CSH 总是转到第一个帮助页面

> ID：15956613
> 
> 赞同：0
> 
> 时间：2013-04-11T18:54:25.943
> 
> 标签：robohelp

我有一个使用 RoboHelp 9 创建的 WebHelp 内容目录。从一个 Web 应用程序中，我尝试使用他们的 CSH JavaScript API 显示一个特定的帮助页面：

```
RH_ShowHelp(0, "WebHelp/index.htm>MainWindow", HH_HELP_CONTEXT, <some map id>); 
```

问题是，无论我通过什么地图 ID，生成的弹出窗口总是显示第一个帮助主题。为 RoboHelp 项目创建的地图文件是否需要包含在生成的 WebHelp 目录中的某个位置？我认为 RoboHelp 会处理在生成的内容中包含它需要的任何内容。

我认为更有可能是我在生成地图文件/ID时搞砸了。为了生成地图 ID，我执行了以下操作：

*   创建了一个新的地图文件
*   双击打开地图文件窗口
*   从右侧列表块中选择所有内容（所有主题和帮助部分）
*   点击“自动生成”

在 CSH 起作用之前，我还需要采取哪些进一步的步骤？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-21T14:06:11.960

您是否在内容目录中使用已发布的输出（而不是生成的输出）？

如果这没有帮助，您可以使用这样的简单链接，在帮助框架的帮助中打开指定的主题：

```
http://example.com/WebHelp/index.htm#someSubfolderThatIsAChildOfTheRootHelpFolder/theTopicYouWant.htm 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-06T11:56:36.170

也许您忘记在生成的输出中包含您的地图文件。这是在 Web 帮助中的内容类别下完成的。

然后，您可以在 RH_ShowHelp 的最后一个参数中指定主题编号。

# maven-3 - 在多模块 Maven 项目中更新版本

> ID：15956619
> 
> 赞同：1
> 
> 时间：2013-04-11T18:54:40.433
> 
> 标签：maven-3

我正在尝试发布我们的多模块 Maven 项目，但我不知道如何正确更新 POM 中的版本号。

maven 发布插件不会更新父 POM 依赖管理部分中的版本 - 这似乎是一个已知错误。

我尝试使用版本插件，但我有两个问题：

*   该插件仅更新我的顶级 POM；可能是因为多模块项目 POM*不是*模块 POM的 paremt POM
*   更重要的是，我怎样才能模仿发布插件的行为来自动计算从 POM 中的当前版本（例如 1.0.0-SNAPSHOT）中设置的版本（例如 1.0.0）......而不需要进入 perl 脚本？

任何不涉及脚本且不需要我在dependencyManagement 之外声明依赖版本的建议将不胜感激！

以下是 4 个 POM（模块子目录中的模块 POM）：

```
============ pom-parent.xml ==================
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
    <modelVersion>4.0.0</modelVersion>

    <groupId>com.acme</groupId>
    <artifactId>dummy-parent</artifactId>
    <version>2.5</version>

    <packaging>pom</packaging>

    <dependencyManagement>
        <dependencies>
            <dependency>
                <groupId>com.acme</groupId>
                <artifactId>module1</artifactId>
                <version>1.0.0-SNAPSHOT</version>
            </dependency>
        </dependencies>
    </dependencyManagement>
</project> 
```

============= 多模块pom: pom.xml ================

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">

    <modelVersion>4.0.0</modelVersion>

    <parent>
        <groupId>com.acme</groupId>
        <artifactId>dummy-parent</artifactId>
        <relativePath>pom-parent.xml</relativePath>
        <version>2.5</version>
    </parent>

    <groupId>com.acme</groupId>
    <artifactId>multi-module</artifactId>
    <version>1.0.0-SNAPSHOT</version>

    <packaging>pom</packaging>

    <modules>
        <module>module1</module>
        <module>module2</module>
    </modules>
    <scm>
           <developerConnection>scm:svn:https://svnserver.fairisaac.com:8443/nowhere</developerConnection>
       </scm>
</project> 
```

============== module1 POM: module1/pom.xml ================

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">

    <modelVersion>4.0.0</modelVersion>

    <parent>
        <groupId>com.acme</groupId>
        <artifactId>dummy-parent</artifactId>
        <relativePath>../pom-parent.xml</relativePath>
        <version>2.5</version>
    </parent>

    <groupId>com.acme</groupId>
    <artifactId>module1</artifactId>
    <version>1.0.0-SNAPSHOT</version>

    <packaging>jar</packaging>
</project> 
```

============= 模块 2 POM：module2/pom.xml =============

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">

    <modelVersion>4.0.0</modelVersion>

    <parent>
        <groupId>com.acme</groupId>
        <artifactId>dummy-parent</artifactId>
        <relativePath>../pom-parent.xml</relativePath>
        <version>2.5</version>
    </parent>

    <groupId>com.acme</groupId>
    <artifactId>module2</artifactId>
    <version>1.0.0-SNAPSHOT</version>

    <packaging>jar</packaging>

    <dependencies>
        <dependency>
            <groupId>com.acme</groupId>
            <artifactId>module1</artifactId>
        </dependency>
    </dependencies>
</project> 
```

========= 编辑 ===============

...如果我将dependencyManagement部分中的显式版本替换为

```
<version>${project.version}</version> 
```

... maven 3.0.4 因 NPE 而失败：

```
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 4.478s
[INFO] Finished at: Fri Apr 12 12:09:08 CEST 2013
[INFO] Final Memory: 9M/120M
[INFO] ------------------------------------------------------------------------
[ERROR] Failed to execute goal org.apache.maven.plugins:maven-release-plugin:2.0:prepare (default-cli) on project multi-
module: Execution default-cli of goal org.apache.maven.plugins:maven-release-plugin:2.0:prepare failed. NullPointerExcep
tion -> [Help 1] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T19:23:27.163

这不是错误，您显示的第一个 pom.xml 在您的多模块项目之外。maven-release-plugin 将其视为外部依赖项，因此不会更改版本。

但是你的设计有一个缺陷，你必须移动

```
<dependencyManagement>
    <dependencies>
        <dependency>
            <groupId>com.acme</groupId>
            <artifactId>module1</artifactId>
            <version>1.0.0-SNAPSHOT</version>
        </dependency>
    </dependencies>
</dependencyManagement> 
```

到你的多模块 pom。

我假设您的想法是在一个地方声明模块版本并在所有模块之间共享。因此，模块版本进入多模块 pom 依赖管理。

通常像这样的外部 pom 用于放置公司信息、存储库路径之类的东西，并且它们被许多不同的项目共享。

# jquery - 查找使用特定类选中的复选框

> ID：15956629
> 
> 赞同：2
> 
> 时间：2013-04-11T18:55:01.837
> 
> 标签：jquery

我在下面有这段 jquery - 它正在查找所有已检查的复选框输入。

我想让这个更具体 - 是否可以添加到查找选择器中，例如“查找所有检查过的具有正确类的输入”？

```
 $(this).find("input:checked").each(function(){
        checkedlist.push($(this).val());
    }); 
```

如果是这样，我该怎么做？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-11T18:55:57.917

只需将类添加到您的选择器：

```
$(this).find("input.correct:checked").each(function () {
    checkedlist.push( this.value );
}); 
```

* * *

为了稍微提高性能，您可以`:checked`从选择器中删除该部分：

```
$(this).find("input.correct").each(function () {
    if ( this.checked ) checkedlist.push( this.value );
}); 
```

# scala - 在单行中缓存中间变量

> ID：15956632
> 
> 赞同：6
> 
> 时间：2013-04-11T18:55:10.280
> 
> 标签：scala

我可以以某种方式缓存`i.toString`这个简单的函数定义吗？

```
def palindrome(i: Int) = i.toString == i.toString.reverse 
```

我想保持这个功能简单，没有经典的多行，大括号封闭的功能..

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-11T19:04:16.827

你可以这样做：

```
def palindrome(i: Int) = ((s:String) => s == s.reverse)(i.toString) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-11T19:18:09.773

好吧，Scala 没有像一些传统函数式语言那样的 let 语句，但这主要是因为 val + 大括号实现了相同的目的。您是反对多行部分还是反对大括号？因为它很难被击败：

```
def palindrome(i: Int) = { val s = i.toString; s == s.reverse } 
```

尝试省略大括号可能只会增加字符数。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-04-11T19:20:21.533

使用正向管道运算符：

```
scala> implicit class PipedObject[A](value: A) {
     |   def |>[B](f: A => B): B = f(value)
     | }
defined class PipedObject

scala> def palindrome(i: Int) = i.toString |> (s => s == s.reverse)
palindrome: (i: Int)Boolean 
```

虽然这可以优雅地解决您的问题，但我建议更改`palindrome`from`palindrome(Int)`的签名并使用（并将其重命名为）`palindrome(String)`调用它。`palindrome(i.toString)``isPalindrome`

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-04-11T19:17:13.593

它是单线的，但大括号仍然在这里。不过，它对我来说似乎更短：

```
def palindrome(i: Int) = { val s = i.toString; s == s.reverse } 
```

如果你有很多这样的功能，你也可以这样做：

```
@inline def let[T, R](expr: =>T)(body: T => R): R = body(expr)

def palindrome(i: Int) = let(i.toString) { s => s == s.reverse } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-10-03T22:00:59.310

开始`Scala 2.13`，标准库提供了链接操作[`pipe`](https://www.scala-lang.org/api/2.13.x/scala/util/ChainingOps.html#pipe[B](f:A=%3EB):B)，可用于转换/管道`i.toString`检查字符串是否为回文的函数：

```
import scala.util.chaining._

def palindrome(i: Int) = i.toString.pipe(s => s == s.reverse) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-11T20:20:25.620

需要准确地引用某事物两次的情况经常出现，因此将其丰富到一个方法中是很有用的：

```
implicit class DiamondMapper[A](val a: A) extends AnyVal {
  def diamond[B](f: (A,A) => B) = f(a,a)
} 
```

然后：

```
scala> 575.toString.diamond(_ == _.reverse)
res1: Boolean = true 
```

这是管道运算符的一个特例（`|>`如果您喜欢符号表示法），但它是一个足够常见的用例，您可能想要创建自己的用例。

（这里的 Diamond 是因为它取一个值，将其一分为二，然后再次合并。）

# java - Java 正则表达式在两个模式之间插入单个字符

> ID：15956633
> 
> 赞同：1
> 
> 时间：2013-04-11T18:55:15.800
> 
> 标签：java, regex

假设我有一个字符串...
`2*Math.sqrt(5265+Math.sin(53*2*Math.exp(3+(5+5)*3`

我想通过使用正则表达式来获取以下字符串...
`2*Math.sqrt(5265)+Math.sin(53)*2*Math.exp(3)+(5+5)*3`

所以如果我是对的，我只需要插入`)`一个字符串，就在一个未知长度的数字 [0-9] 和一个运算符之间，它可以是`* - / +`.

此外，我想知道是否（如何？）可以获得支持`Math.pow`以上示例的扩展版本。目前，我只使用单参数`Math.*`方法，这对于上述尚未实现的解决方案是可以的。但是如果我想使用`Math.pow`呢？

所以让我们说，例如，输入字符串是......
`2*Math.sqrt(5265+Math.sin(53*2*Math.exp(3+(5+5)*3*24Math.pow(3*5*Math.sin(5`

而我希望的输出看起来像......
`2*Math.sqrt(5265)+Math.sin(53)*2*Math.exp(3)+(5+5)*3*Math.pow(24,3)*5*Math.sin(5)`

*（我在问，因为那时我想将编辑后的字符串传递给`ScriptEngine` `eval`.）*

**编辑**
是的，对不起，我还没有说清楚。我实际上不在乎我是否得到`*2*`，或者`*(2)*`因为 ScriptEngine 的方法 eval 两者兼而有之，目前我无法想象这些形式有任何问题。
其次，我想为每个 operator 提供通用解决方案，`* - / +`上面提到的字符串只是示例。我会尝试更具体。所以现在忽略第二`Math.pow`部分，主字符串，我们称之为`A`，基本上由一个或多个字符串组成，形式如下......
`QWMath.[a-z](XWY`，其中`Q`is `[0-9]`，`W`是其中之一`* - / +`，`X`再次是`[0-9]`。
`QW`并且`Y`都是可选的，其中`Y`是另一个`A`字符串或`[0-9]`，它通过运算符连接到前一个字符串`W`。

但看起来，femtoRgon 的解决方案替换`(Math\.[a-z]+\(\d+)`为`$1)`OK。

对于 Math.pow 部分：femtoRgon 的解决方案替换`(\d+)(Math.pow\()(\d+)`为`$2$1$3)`也很好，除了缺少`,`. `$2$1$3)`应该是`$2$1,$3)`，其次，`replace`我必须添加额外的反斜杠：`(\\d+)(Math.pow\\()(\\d+)`，与
`(Math\.[a-z]+\(\d+)`...

所以最后我似乎做这样的事情就足够了......

```
 String evalString = "2*Math.sqrt(5265+Math.sin(53*2*Math.exp(3+(5+5)*3*2554Math.pow(451";
       String firstPattern = "(\\d+)(Math.pow\\()(\\d+)";
       String secondPattern = "(Math\\.[a-z]+\\(\\d+)";

       String tempString = evalString.replaceAll(firstPattern, "$2$1,$3)");
       System.out.println(tempString.replaceAll(secondPattern, "$1")); 
```

...也许它可以更短。当然，这不是确切的解决方案，但其余的现在只是一个装饰细节。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T00:48:26.180

根据您的解释，您的第一个案例听起来很简单。只需更换：

```
(\(\d*) 
```

和

```
$1) 
```

但是，这不会产生您想要的输出，而是会为您提供：

```
2*Math.sqrt(5265)+Math.sin(53)*2*Math.exp(3)+(5)+5)*3 
```

阻止你`(5+5)`以这种方式转变的逻辑是什么？

也许您只想使用以 开头的函数来执行此操作`Math.`？在这种情况下，您可以尝试替换：

```
 (Math\.[a-z]+\(\d+) 
```

和

```
$1) 
```

但是不要运行它两次。没有什么能阻止这`Math.pow(3)`变成`Math.pow(3))`

要转换`24Math.pow(3`为`Math.pow(24,3)`，您可以替换：

```
(\d+)(Math.pow\()(\d+) 
```

和

```
$2$1$3) 
```

# wpf - 无法从 Style ResourceDictionary 引用链接 ResourceProject 中的 BrushResource

> ID：15956639
> 
> 赞同：0
> 
> 时间：2013-04-11T18:55:28.477
> 
> 标签：wpf, xaml, resourcedictionary

我的应用程序中有一个项目，其中保留了所有资源和可重用的自定义控件类（包括样式、画笔、自定义控件等）。

我的应用程序的“主”项目的 App.xaml 文件引用了引用我所有组织的 ResourceDictionary 文件的 ResourceLibrary 文件，如下所示：

```
 <Application.Resources>
   <ResourceDictionary>
        <ResourceDictionary.MergedDictionaries>
            <ResourceDictionary Source="/ControlResources;component/ResourceDictionaries/ResourceLibrary.xaml"/>
            <ResourceDictionary Source="Simple Styles.xaml"/>     
        </ResourceDictionary.MergedDictionaries>

        <Style TargetType="{x:Type Window}">
            <Setter Property="FontFamily" Value="Segoe UI" />
        </Style>

        <Style TargetType="{x:Type Rectangle}" /> 

    </ResourceDictionary>

</Application.Resources> 
```

注意：我在[这里](http://projekt202.com/blog/2010/xaml-organization/)关注这篇文章，其中包括一个大修复（上面包含的 Rectangle 样式）。

下面是我的“ControlResources”项目的快照。

![这就是我的](https://i.stack.imgur.com/W9k1p.png)

当我从我的主项目“GlenwareMaster”中引用样式和 customControl 资源时，它们的引用效果很好，但是当从任何样式资源中引用“画笔”下的画笔资源时，应用程序显然找不到它们。

我的问题：我可以只添加一个项目自引用链接（固有的右键单击混合功能吗？）。如何获得样式 ResourceDictionaries 以在同一项目中定位 Brush ResourceDictionaries？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T19:46:46.073

您如何在样式字典中引用画笔资源字典？确保您使用的是包 URI 并且它们是正确的。

我的标准做法是在我计划在另一个资源字典中引用的任何资源字典中使用绝对包 uri 格式 - 如果您最终将其移动到另一个项目中，会导致更少的错误。当您在常用样式资源字典中引用画笔时，请尝试以下操作：

```
<ResourceDictionary Source="pack://application:,,,/ControlResources;component/ResourceDictionaries/Brushes/MyBrushes.xaml"/> 
```

您可以在此处阅读有关 Pack URI 的更多信息：http: [//msdn.microsoft.com/en-us/library/aa970069.aspx](http://msdn.microsoft.com/en-us/library/aa970069.aspx)

# bash - 如何使用通配符在 if 语句中指定存在条件？

> ID：15956647
> 
> 赞同：2
> 
> 时间：2013-04-11T18:56:00.273
> 
> 标签：bash, if-statement, for-loop

我在 Ubuntu 机器上运行的 bash 脚本中有以下语句：

```
for l in foo_????
do
     # do something with $l
done 
```

如果没有与模式匹配的文件，这将无法正常工作。

我在 for 循环前面加上：

```
if [ -f foo_??? ]
then
   for l in foo_??? 
```

如果有 0 或 1 个文件与该模式匹配，它会工作，但当消息有更多文件时会失败`line 4: [: foo_123: binary operator expected`

如果有> = 1个文件与模式匹配，我如何需要修改此块以仅循环？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T18:58:20.577

如果没有与模式匹配的文件并且您不希望循环失败，请设置`nullglob`指令：

```
~/foo $ echo *
*
~/foo $ shopt -s nullglob
~/foo $ echo *

~/foo $ 
```

您的`if`语句失败的原因与您的循环失败的原因相同`for`：未扩展的 glob 仍然存在。如果您想要`sh`脚本的兼容版本，您可以使用`if`语句代替`nullglob`指令，但您必须对其进行调整：

```
for file in foo_???; do
    if [ -f "$file" ]; then
        …
    fi
done 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T21:27:10.613

而不是测试您的模式是否已正确扩展，您使用一些结构来确保您只获得与您的模式匹配的现有文件。

例如

```
 find . -maxdepth 1 -type f -name "foo_???" | while read file
 do
     ...
 done 
```

# .net - Qt 创建者 + .NET 框架

> ID：15956648
> 
> 赞同：4
> 
> 时间：2013-04-11T18:56:06.600
> 
> 标签：.net, qt, c++-cli, qt-creator, kinect

我想在 Qt Creator 中启动一个项目，我需要使用一些 .net 库，例如 Kinect for Windows SDK。

如果这是可能的，我应该如何进行？我在哪里可以找到要包含在我的项目中的库。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T22:09:31.147

Qt Creator 是一个 C++ IDE，它独立于任何库。所以这是可能的。首先下载并安装[MSVC 2008 或 2010 的 Qt 库](http://qt-project.org/downloads)。然后将此 Qt 版本添加到您的 QtCreator 中，您的 IDE 将知道 Windows SDK 和其他 Windows 开发组件的标准包含目录。如果您暴露了链接错误，只需为您的项目文件添加适当的链接选项。例如，为了使用 COM 对象，您应该将其添加`LIBS += -lOle32` 到项目文件中。

# java - 写入后使用 iText 打开 PDF 文档

> ID：15956650
> 
> 赞同：0
> 
> 时间：2013-04-11T18:56:11.553
> 
> 标签：java, pdf, itext, jfreechart, paragraphs

我在 JFrame 中使用 iText 和 Document 类来编写 PDF，但是如果我在创建后尝试使用 Runtime 类来运行它，我会得到一个异常，我无法打开它，因为锁仍然在它上面，如果我在它上面运行 Unlocker ，我的 JFrame 上有一个锁定令牌。如果我想写入 PDF，如何打开它？

```
Document d = new Document();
.... code
d.close();
Runtime.getRuntime().exec("D:/PDFChartStuff.pdf"); 
```

为什么这篇文章不符合 stackoverflow 的“质量标准”？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T09:37:09.977

如果您使用的是 Windows，您可以使用它`rundll32`来启动 pdf 文件。

尝试这样的事情

```
String pdfFile="D:/PDFChartStuff.pdf";
if (pdfFile.toString().endsWith(".pdf")) {
                Runtime.getRuntime().exec("rundll32 url.dll,FileProtocolHandler " + pdfFile);
            } else {
               //For cross platform use
                Desktop desktop = Desktop.getDesktop();
                desktop.open(pdfFile);
            } 
```

# azure - Amazon Route 53 的 Windows Azure 响应

> ID：15956651
> 
> 赞同：3
> 
> 时间：2013-04-11T18:56:18.863
> 
> 标签：azure, dns, amazon-web-services, routing

在 Amazon Route 53 中，我可以托管我的域并路由到 AWS 上的多个服务器，对吗？！是否可以在 Windows Azure 上做同样的事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T20:50:54.167

不可以。您需要使用 GoDaddy 或 DNSimple 等服务来注册您的域名。从那里您可以设置 CName 或 A 记录规则以访问您的 Azure Windows 托管服务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-28T00:21:22.620

现在没有像 Amazon Route 53 这样具有确切功能的服务，但 Traffic Manager 将在未来配备更多功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-10T06:46:22.157

微软已发布“Azure DNS 服务”（目前为预览版）

[http://azure.microsoft.com/en-us/services/dns](http://azure.microsoft.com/en-us/services/dns)

# asp.net-mvc - MVC 3 Web API 路由不起作用

> ID：15956653
> 
> 赞同：1
> 
> 时间：2013-04-11T18:56:30.390
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp.net-web-api, asp.net-web-api-routing

我正在解决 MVC 3 Web API 中的路由问题。看起来应该很简单，但我没有取得任何进展。

我的错误是：

```
 <Error>
     <Message>The request is invalid.</Message>
       <MessageDetail>
           The parameters dictionary contains a null entry for parameter 'id' of non-nullable type 'System.Int32' for method 'Boolean NewViolationsPublished(Int32)' in 'BPA.API.Controllers.CacheManagementController'. An optional parameter must be a reference type, a nullable type, or be declared as an optional parameter.
       </MessageDetail>
   </Error> 
```

我的 RegisterRoutes 是这样的：

```
public static void RegisterRoutes(RouteCollection routes)
        {
            routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

            routes.MapHttpRoute(
              name: "NukeAllItemsFromCache",
              routeTemplate: "api/CacheManagement/NukeAllItemsFromCache");

            routes.MapHttpRoute(
                 name: "ControllerAndAction",
             routeTemplate: "api/{controller}/{action}"
             );

            routes.MapHttpRoute(
                 name: "ControllerAndActionAndId",
                 routeTemplate: "api/{controller}/{action}/{id}",
                    defaults: new { id = RouteParameter.Optional, action = "Get" },
              constraints: new { id = @"^\d+$" } // Only integers 
             );

            routes.MapHttpRoute(
                name: "ControllerAndId",
                routeTemplate: "api/{controller}/{id}",
                  defaults: new { id = RouteParameter.Optional },
          constraints: new { id = @"^\d+$" } // Only integers 
            );
        } 
```

我的控制器是（为了便于阅读，我取出了代码）：

```
 public class CacheManagementController : ApiController
    {
        public CacheManagementController()        

        [HttpGet]
        public bool NewViolationsPublished(int id)

        [HttpGet]
        public bool IsCached(CachedItemLabels label, int clientId)

        [HttpGet]
        public void RemoveItemFromCache(int clientId, CachedItemLabels cacheLabel, string test)

        [HttpGet]
        public string NukeAllItemsFromCache()    
    } 
```

**当我尝试调用时出现错误：**

```
http://localhost/api/CacheManagement/NukeAllItemsFromCache 
```

TIA

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-11T19:44:23.470

你确定你在正确的地方定义你的路线吗？应使用 System.Web.Http.GlobalConfiguration.Configuration.Routes.MapHttpRoute 配置 Web API 路由（通常在 App_Start 的 WebApiConfig.cs 文件中），如[http://www.asp.net/web-api/overview所示/extensibility/configuring-aspnet-web-api](http://www.asp.net/web-api/overview/extensibility/configuring-aspnet-web-api)，这与 vanilla MVC 使用的路由配置不同。

我想你可能只是在使用默认的 Web API 路由，即 api/{controller}/{id}，ID 是可选的。该操作由 HTTP 动词确定，在本例中为 GET，并且您的所有方法都通过 [HttpGet] 匹配。

编辑：示例

**全球.asax**

```
 protected void Application_Start()
    {
        AreaRegistration.RegisterAllAreas();

        WebApiConfig.Register(GlobalConfiguration.Configuration);
        FilterConfig.RegisterGlobalFilters(GlobalFilters.Filters);
        RouteConfig.RegisterRoutes(RouteTable.Routes);
        BundleConfig.RegisterBundles(BundleTable.Bundles);

        GlobalModifiers.ApplyGlobalConfiguration(this, true);
    } 
```

**WebApiConfig.cs**

```
public static class WebApiConfig
{
   public static void Register(HttpConfiguration config)
   {
        config.Routes.MapHttpRoute(
            name: "action-specific",
            routeTemplate: "api/{controller}/{action}/{id}",
            defaults: new { id = RouteParameter.Optional }
    );
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T19:19:28.000

我相信你的问题出在这条路上：

```
routes.MapHttpRoute(
  name: "ControllerAndActionAndId",
  routeTemplate: "api/{controller}/{action}/{id}",
  defaults: new { id = RouteParameter.Optional, action = "Get" },
  constraints: new { id = @"^\d+$" } // Only integers 
); 
```

您指定`id`为可选参数，同时将其约束为实际上不可为空的数字。如果`/api/CacheManagement/NukeAllItemsFromCache`是一个例外，则为它添加额外的路线，否则`@"^\d*$"`如果可能的话，将约束放宽到类似的东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-19T17:10:05.863

您尝试将参数 id 设置为可为空，例如：

```
[HttpGet]
public bool NewViolationsPublished(int? id) 
```

或者

```
 [HttpGet]
    public bool NewViolationsPublished(Nullable<Int32> id) 
```

也许这行得通...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-12T13:04:44.393

您缺少配置的路由的默认操作：

```
routes.MapHttpRoute(
          name: "NukeAllItemsFromCache",
          routeTemplate: "api/CacheManagement/NukeAllItemsFromCache"); 
```

应该

```
routes.MapHttpRoute(
          name: "NukeAllItemsFromCache",
          routeTemplate: "api/CacheManagement/NukeAllItemsFromCache",
          defaults: new { action = "NukeAllItemsFromCache" }
); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-02-10T16:56:42.753

仔细检查您的控制器是否扩展了 ApiController 而不是 Controller

```
 public class CacheManagementController : ApiController 
```

而不是

```
 public class CacheManagementController : Controller 
```

# c# - 需要深入了解 /Example of Task Parallelism 从数据库/活动目录读取数据并在网格中显示它们

> ID：15956659
> 
> 赞同：0
> 
> 时间：2013-04-11T18:56:44.593
> 
> 标签：c#, multithreading, parallel-processing, task-parallel-library, task

我有一个场景，我从活动目录中获取数据并将其显示在 radGrid 中，但是数据的集合非常大，以百万计，因此检索它并在网格中同步显示它需要太多时间。因此，为了提高性能，我们正在处理两个任务/线程的异步调用，其中一个任务读取某个数据单元，第二个任务/线程在网格中显示这些数据。根据我的研究，这很容易使用 Task Parallelism，但由于我没有使用 4.0 的这个特性，我需要任何创建多个任务并且它们在相同数据上并行工作以解决我的查询并探索 Task Parallelism 的示例.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-11-16T19:55:18.840

任务并行库和 async/await 编程模型是您案例的不错选择。

你做这样的事情：

```
 async Task MainRoutine()
    {
        ConcurrentQueue<string> dataQueue = new ConcurrentQueue<string>();
        CancellationTokenSource cts = new CancellationTokenSource();
        Task tRead = ReadAsync(dataQueue);
        Task tWrite = InsertIntoGridAsync(dataQueue, cts.Token);

        await tRead;
        cts.Cancel();

        await tWrite;
        //Done
    }

    async Task ReadAsync(ConcurrentQueue<string> queue)
    {

        await Task.Run(() =>
        {
            while (!IsEndOfList)
            {
                string data = //Read data from database/active directory/ ...
                queue.Enqueue(data);
            }
        });
    }

    async Task InsertIntoGridAsync(ConcurrentQueue<string> queue, CancellationToken cancellationToken)
    {
        await Task.Run(async () =>
        {
            while (!cancellationToken.IsCancellationRequested)
            {
                string data;
                if (queue.TryDequeue(out data))
                {
                    //insert data to grid
                }
                else
                {
                    await Task.Delay(100);
                }
            }
        }, cancellationToken);
    } 
```

# ruby - 我的实例变量没有保存它的值

> ID：15956661
> 
> 赞同：1
> 
> 时间：2013-04-11T18:56:53.617
> 
> 标签：ruby, instance-variables

好的，所以我正在构建一些东西，它需要一个文本文件并将其分解为多个部分，这些部分进一步分为条目，然后`<a>`在每个条目的一部分周围放置标签。我有一个实例变量 ，`@section_name`我需要在创建链接时使用它。问题是，`@section_name`如果我看错了，它似乎就失去了价值。一些代码：

```
def find_entries
  @sections.each do |section|
    @entries = section.to_s.shatter(/(some) RegEx/)
    @section_name = $1.to_s
    puts @section_name
    add_links
  end
end

def add_links
  puts "looking for #{@section_name} in #{@section_hash}"
  section_link = @section_hash.fetch(@section_name)
end 
```

如果我注释掉对 的调用`add_links`，它会吐出所有部分的名称，但如果我包含它，我只会得到：

```
looking for  in {"contents" => "of", "the" => "hash"} 
```

任何帮助深表感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T19:09:47.983

`$1`是一个全局变量，可以在以后的代码中使用。`$n`包含`n-th (...)`最后一场比赛的捕获

```
"foobar".sub(/foo(.*)/, '\1\1')
 puts "The matching word was #{$1}" #=> The matching word was bar

"123 456 789" =~ /(\d\d)(\d)/
 p [$1, $2] #=> ["12", "3"] 
```

所以我认为`@entries = section.to_s.shatter(/(some) RegEx/)`line 没有正确匹配。因此您的第一个匹配组不包含任何内容。所以`$1`打印为零。

# powershell - 如何优化所有这些管道？

> ID：15956665
> 
> 赞同：0
> 
> 时间：2013-04-11T18:56:59.963
> 
> 标签：powershell, pipe

```
get-command | where-object { $_.commandtype -eq "cmdlet" } | sort-object -property name | select-object -property name | where-object { $_.name -match "^get" } | out-file "getcommands.txt"

$content = get-content "getcommands.txt"

$content | Foreach-Object { $_.TrimEnd() } | where { $_ -match "\w" } | Out-File "getcommands.txt" -encoding Ascii

compare-object -referenceobject $(Get-Content "oldcommands.txt") -differenceobject $(Get-Content "getcommands.txt") -includeequal 
```

此代码检索所有以“get”开头的 cmdlet，并将它们与文本文件中的列表进行比较。它还消除了超额收益和空白，因此比较确实有效。

一切正常，但很难阅读。我只是在学习如何编写 PowerShell 脚本，所以我不确定如何使用更优雅的代码完成相同的任务。

我打赌有一种方法可以在没有所有管道的情况下做到这一点。如果没有一大堆额外的空格和返回，我也无法从第一行代码中获取输出以输出到文本文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T19:05:05.133

我认为这也是如此：

```
get-command -CommandType "cmdlet" -name get*  | SELECT -expand name | 
out-file "getcommands.txt" -encoding Ascii

compare-object -referenceobject (Get-Content "oldcommands.txt") -differenceobject (Get-Content "getcommands.txt") -includeequal 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T23:37:12.140

如果你有 V3，这似乎有点快：

```
(get-command -CommandType "cmdlet" -name get*).name |
set-content getcommands.txt 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-11T19:35:57.930

使用 过滤源中的 cmdlet 列表`-verb`。最佳做法是在管道的左侧（最靠近数据源）尽可能多地进行过滤

```
get-command -verb get |where-object{$_.CommandType -eq "Cmdlet"}|select-object -expandpropertyproperty name|out-file getcommands.txt -encoding ascii
compare-object -referenceobject $(Get-Content "oldcommands.txt") -differenceobject $(Get-Content "getcommands.txt") -includeequal 
```

*应该*有一种方法`Where-Object`可以消除`-CommandType`参数 for`get-command`但我不能让它在这里工作。我希望以下其中一项能够工作，但也不能：

```
get-command -verb get -CommandType Cmdlet
get-command -verb get -CommandType [system.management.automation.commandtypes]::Cmdlet 
```

# navigation - 均匀空间 li 使用百分比

> ID：15956669
> 
> 赞同：1
> 
> 时间：2013-04-11T18:57:03.340
> 
> 标签：navigation, html-lists, responsive-design

有没有办法均匀分布元素？我正在研究响应式设计，并希望将`li`'s 均匀分布在菜单中。

HTML

```
<div id="navigation">
    <ul>
        <li><a href="shop.html">Shop</a></li>
        <li><a href="/blog">Blog</a></li>
        <li><a href="about.html">About</a></li>
        <li>|</li>
        <li><a href="freebies.html">Freebies</a></li>
        <li><a href="lookbook.html">LookBook</a></li>
        <li><a href="gift-finder.html">Gift Finder</a></li>
    </ul>
</div> 
```

CSS：

# 导航 ul{

边距：0；填充：0；

}

# 导航栏{

```
display:inline-block;
font-size:30px;
font-family: 'delicious_smallcapsregular'; 
```

}

# 导航 {

宽度：100%；}

# 导航李一个{

```
color:#737373;
text-decoration: none; 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T18:58:32.613

尝试像这样在 % 中使用边距；

```
#navigation li{
display:inline-block;
font-size:1.8em;
margin:0 2%;
font-family: 'delicious_smallcapsregular';
list-style-type: none;
} 
```

不仅是利润，而且还在不断减少`font-size`，并`padding`为每台设备获得更快的响应和平均分配。

# linq - 在 linq 中创建扩展方法

> ID：15956675
> 
> 赞同：-1
> 
> 时间：2013-04-11T18:57:18.780
> 
> 标签：linq, entity-framework

如何为字符串创建扩展方法以获取总和创建 Sumstring 扩展方法

```
List<myclass> obj=new List<myclass>()
{
    new myclass(){ID=1,name="ali",number=1},
    new myclass(){ID=1,name="karimi",number=2},
    new myclass(){ID=2,name="mohammad",number=4},
    new myclass(){ID=2,name="sarbandi",number=5},
};

var query = (from p in obj 
             group p by p.ID into g
             select new 
             { id = g.Key, sum = g.Sumstring(p => p.name) }).ToList();

dataGridView1.DataSource=query; 
```

我连接数据库的代码是什么

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T21:39:14.363

如果您只想连接该组中的字符串，则可以使用内置[`Aggregate`](http://msdn.microsoft.com/en-us/library/bb548651.aspx)函数：

```
var query = (from p in obj 
             group p by p.ID into g
             select new 
             { id = g.Key, sum = g.Aggregate((tot, next) => tot + "," + next) }
            ).ToList(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T19:06:26.667

您尚未指定`SumString`真正返回的内容，但看起来您正在谈论所有源集合元素的字符串连接。

可以使用`String.Join`以下方法轻松完成：

```
public static class EnumerableOfString
{
    public static string SumString<TSource>(this IEnumerable<TSource> source, Func<TSource, string> selector, string separator = null)
    {
        return String.Join(separator ?? string.Empty, source.Select(i => selector(i)));
    }
} 
```

该方法允许以下调用：

```
g.SumString(p => p.name) 
```

使用`string.Empty`默认分隔符并指定自定义分隔符：

```
g.SumString(p => p.name, ",") 
```

# javascript - JSON / Jade - 无法将 JSON 变量输出到 Jade 模板

> ID：15956683
> 
> 赞同：0
> 
> 时间：2013-04-11T18:57:58.740
> 
> 标签：javascript, json, node.js, pug

我将一些 JSON 数据传递给 Jade 模板，但似乎无法将 JSON 数据打印到我的 Jade 模板。这是存储并传递给 Jade 模板的 JSON 示例：

```
{ name: 'Team 1',
  _id: 5134d71192cf972226000003,
  __v: 0,
  key: 1362417425623 } 
```

它像这样传递给 Jade 模板：

```
res.render('tournamentDetails', { 'tournamentData' : tournamentData, seedsSerialized : JSON.stringify(tournamentData.teams) } ); 
```

Jade 模板的格式为：

```
script(type='text/javascript')
                var seeds = [#{tournamentData.teams}]; 
```

我正在尝试`seeds`在单独的 JavaScript 文件中访问此变量，但似乎无法访问它们。我一直在测试`alert`用于测试 JavaScript 文件中种子中的内容，而不是团队。

这也是从 Jade 生成的 HTML：

```
var seeds = [{ name: 'Team 1',
  _id: 5134d71192cf972226000003,
  __v: 0,
  key: 1362417425623 },{ name: 'Team 2',
  _id: 5139dc66b48da58d0e000001,
  __v: 0,
  key: 1362746470498 },{ name: 'Team 3',
  _id: 5139dda45f1598440f000001,
  __v: 0,
  key: 1362746788314 },{ name: 'Team 4',
  _id: 513b2c66cfd50dce11000001,
  __v: 0,
  key: 1362832486554 }]; 
```

如何访问 JavaScript 文件中的团队？我想将 的输出`names`到`teams`Jade 模板。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T19:49:28.590

这可能不是一个确切的答案，但评论太长了......

看看这个jsfiddle：http: [//jsfiddle.net/KvXTA/](http://jsfiddle.net/KvXTA/)

```
var seeds = [{ name: 'Team 1',
  _id: 5134d71192cf972226000003,
  __v: 0,
  key: 1362417425623 },{ name: 'Team 2',
  _id: 5139dc66b48da58d0e000001,
  __v: 0,
  key: 1362746470498 },{ name: 'Team 3',
  _id: 5139dda45f1598440f000001,
  __v: 0,
  key: 1362746788314 },{ name: 'Team 4',
  _id: 513b2c66cfd50dce11000001,
  __v: 0,
  key: 1362832486554 }];

console.log(seeds); 
```

注意控制台如何输出

```
Uncaught SyntaxError: Unexpected token ILLEGAL 
```

那是因为 _id 字段。我很惊讶你说序列化版本有同样的问题，因为它应该用引号括住 ID。如果您根本不需要 ID，您可以使用替换功能在序列化版本中删除它们。

```
var seedsSerialized = JSON.stringify(teams, function (key, val) {
    return key === '_id' ? undefined : val;
);
res.render('tournamentDetails', { seedsSerialized: seedsSerialized }); 
```

然后使用该序列化版本`seeds`在模板中进行初始化。

```
script
    var seeds = !{seedsSerialized}; 
```

我之前关于包含脚本的顺序的评论并不是担心另一个文件正在创建种子变量，而是您可能已经包含了`seeds`之前`seeds`实际声明过的文件。

例如：

```
<script src='logSeeds.js'></script>
<script>
    var seeds = [ ... ];
</script> 
```

其中 logSeeds.js 是：

```
console.log(seeds); 
```

显然会输出`undefined`，因为`seeds`尚未声明。这只是一个想法，不一定是你的情况。

# jquery - 两个Jqgrids焦点和数据提交

> ID：15956685
> 
> 赞同：0
> 
> 时间：2013-04-11T18:58:11.793
> 
> 标签：jquery, jqgrid

我一直在尝试在具有两个 JqGrid 的页面中（两个网格都在单元格中使用编辑）获得此功能。

这是一个示例的问题： - 如果您在 Grid1 中并编辑一个单元格，然后单击 Grid1 中的另一个单元格 JqGrid 发送输入。- 如果您在Grid1中编辑一个单元格，然后单击Grid2的一个单元格，JqGrid不发送内容，Grid1的单元格保持输入“样式”进行编辑。

我试图通过以下方式完成此操作： - editoptions > dataInit 事件 - 使用 aj('#Grid1).live("click", function(){ });

在那里，我保存了 elem 输入的值，然后尝试模拟 enter 事件，因此 JqGrid 可以将数据发送到服务器，在这两种情况下都没有成功。

想法？

# javascript - 人脸检测并保存图像

> ID：15956687
> 
> 赞同：-1
> 
> 时间：2013-04-11T18:58:22.033
> 
> 标签：javascript, canvas, face-detection

我正在开发一个项目，该项目将使用用户的网络摄像头，并且在检测到人脸并且人脸位于特定区域内时始终寻找人脸（以确保他们面向前方）。然后拍摄脸部照片并将其保存到网络服务器。

我发现了一些面部检测项目，它们使用 usergermedia 并使用画布将图像叠加在检测到的面部之上： [https ://github.com/neave/face-detection](https://github.com/neave/face-detection)

代码让像我这样的新手感到困惑，我发现我可能应该使用 face.html 文件和检测对象函数。但是不是让它画眼镜，我怎么能把它保存为图像呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T19:01:59.833

您可以使用 canvas 元素方法[toDataURL()](http://www.html5canvastutorials.com/advanced/html5-canvas-get-image-data-url/)来提取解码为 base64 的图像位图并将其发送到您的服务器。在那里，您可以解码 base64 字符串并将内容保存到新文件中，或者您可以使用图形库（取决于您的服务器和选择的编程语言）在将位图保存到图像文件之前对其进行操作。

这可以帮助您：[如何将 HTML5 画布保存为服务器上的图像](https://stackoverflow.com/questions/13198131/how-to-save-a-html5-canvas-as-image-on-a-server)

# php - 遍历文件夹中的 CSV 文件并使用 PHP 将数据加载到 MySQL

> ID：15956688
> 
> 赞同：1
> 
> 时间：2013-04-11T18:58:22.743
> 
> 标签：php, mysql, sql

我使用以下代码遍历文件夹中的文件并将数据加载到 MYSQL 表中。我无法完成这项工作。有没有更好的解决方案？

```
if ($handle = opendir('C:\Documents and Settings\Desktop\CSV Files')) {
while(false !== ($entry = readdir($handle)))
{
mysql_query("LOAD DATA LOCAL INFILE %handle
                          INTO TABLE main_table
                          FIELDS
                          TERMINATED BY ','
                          OPTIONALLY ENCLOSED BY '"'
                          ESCAPED BY '"'
                          LINES TERMINATED BY '\r\n'
                          IGNORE 1 LINES")
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T19:55:12.903

您的代码有很多错误，很难选择从哪里开始......

*   您的目录路径未转义。
*   您没有任何信息可以告诉您该目录无法打开。
*   `%handle`不是 PHP 变量，而且它是错误的变量。
*   `$entry`只是文件名，而不是完整路径。
*   `mysql_query()`通话结束时没有分号。
*   您的 'enclose' 和 'escape' 字符都是`"`，两者都没有被转义。
*   `echo`查询而不是运行它以确保它在不工作时正确形成。
*   您从未真正检查查询是否成功。
*   打开错误报告，因为你有一些明显的解析错误应该使这个脚本在它运行之前就失败。
*   和流行的：`mysql_*`函数已被弃用，您应该使用 PDO 或 MySQLi。

所以这应该可以工作：

```
<?php
error_reporting(E_ALL);
define('DEBUG', true);

$basedir = 'C:\\Documents and Settings\\Desktop\\CSV Files\\';
if ($handle = opendir($basedir)) {
  while(false !== ($entry = readdir($handle))) {
    $query = "LOAD DATA LOCAL INFILE $basedir$entry
                INTO TABLE main_table
                FIELDS
                TERMINATED BY ','
                OPTIONALLY ENCLOSED BY '\"'
                ESCAPED BY '\\'
                LINES TERMINATED BY '\r\n'
                IGNORE 1 LINES");
    if(DEBUG) { echo $query . "\n"; }
    if(!mysql_query($query)) {
      die('Query failed: ' . mysql_error());
    }
  }
} else {
  echo "Could not open $basedir";
} 
```

# bash - 请解释一下：trap 'sudo kill -9 -- -$$' EXIT

> ID：15956689
> 
> 赞同：9
> 
> 时间：2013-04-11T18:58:28.100
> 
> 标签：bash, shell, unix, command

这个 shell 命令在做什么？

```
 trap 'sudo kill -9 -- -$$' EXIT 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-11T19:05:06.170

*   `$$`是脚本本身的进程ID
*   `-$$`表示使用进程组 ID
*   `--`表示期权的结束

所以在退出时`trap`将杀死脚本的所有子进程。

[§ 内部变量](http://tldp.org/LDP/abs/html/internalvariables.html)

# ruby-on-rails-3 - 你什么时候在 Rails 中使用动态查找器与范围和范围方法？

> ID：15956691
> 
> 赞同：0
> 
> 时间：2013-04-11T18:58:33.760
> 
> 标签：ruby-on-rails-3

我在文档中看到，在 ROR 3.2 中，通常最好在模型中使用范围方法来检索带参数的记录，而不是 lamda 范围

> 使用类方法是接受范围参数的首选方式。这些方法仍然可以在关联对象上访问

但是你什么时候使用动态查找器（例如 find_by_* 而不是范围和作用域方法？动态查找器也可以接收参数，并且它们似乎更容易直接从视图中使用。

如果我想检索所有有

`attribute1 == [boolean] AND attribute2 IN [array]`

哪种方法是可取的（范围、范围方法或动态查找器？）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T02:47:51.260

1.  您不应该在视图中使用*任何查找器。*
2.  我可能会使用类方法来编写它。

像这样的东西：

```
class Dog < ActiveRecord::Base

  attr_accessible :chewed, :color    

  def self.toys chewed = false, colors = []
    where chewed: chewed, color: colors
  end

end 
```

# google-api - 谷歌地理编码，获取州首府城市或州城市列表

> ID：15956696
> 
> 赞同：1
> 
> 时间：2013-04-11T18:59:11.247
> 
> 标签：google-api, google-geocoder

是否可以使用谷歌地理编码获得州首府或该州所有城市的列表？

当您进行这样的查询时：

[http://maps.googleapis.com/maps/api/geocode/json?address=Salto,%20Uruguay&sensor=true](http://maps.googleapis.com/maps/api/geocode/json?address=Salto,%20Uruguay&sensor=true)

结果按位置、administrative_area_level_1、国家等类型分开。

那么，有没有办法获取“administrative_area_level_1”并获取所有“localities”？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2017-03-16T09:25:58.930

简单的答案是否定的。

您可以搜索目的地，但无法通过简单的查询获得所有地点。

# cocoa - NSAttributedString initWithHTML 字符编码不正确？

> ID：15956698
> 
> 赞同：25
> 
> 时间：2013-04-11T18:59:25.853
> 
> 标签：cocoa, nsattributedstring

`-[NSMutableAttributedString initWithHTML:documentAttributes:]`似乎破坏了特殊字符：

```
NSString *html = @"“Hello” World"; // notice the smart quotes
NSData *htmlData = [html dataUsingEncoding:NSUTF8StringEncoding];
NSMutableAttributedString *as = [[NSMutableAttributedString alloc] initWithHTML:htmlData documentAttributes:nil];
NSLog(@"%@", as); 
```

打印`â€œHelloâ€ World`后跟一些 RTF 命令。在我的应用程序中，我将属性字符串转换为 RTF 并将其显示在 中`NSTextView`，但那里的字符也已损坏。

根据文档，默认编码是 UTF-8，但我尝试显式，结果是一样的：

```
NSDictionary *attributes = @{NSCharacterEncodingDocumentAttribute: [NSNumber numberWithInt:NSUTF8StringEncoding]};
NSMutableAttributedString *as = [[NSMutableAttributedString alloc] initWithHTML:htmlData documentAttributes:&attributes]; 
```

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-04-11T19:42:07.990

`[html dataUsingEncoding:NSUnicodeStringEncoding]`在创建 NSData 并在将 HTML 解析为属性字符串时设置匹配编码选项时使用：

的文档`NSCharacterEncodingDocumentAttribute`有点令人困惑：

> NSNumber，包含一个指定`NSStringEncoding`文件的 int；用于读取和写入纯文本文件和编写 HTML；纯文本的默认值是默认编码；HTML 的默认值为 UTF-8。

所以，你的代码应该是：

```
NSString *html = @"“Hello” World";
NSData *htmlData = [html dataUsingEncoding:NSUTF8StringEncoding];
NSDictionary *options = @{NSDocumentTypeDocumentAttribute: NSHTMLTextDocumentType,
                                    NSCharacterEncodingDocumentAttribute: @(NSUTF8StringEncoding)};
NSMutableAttributedString *as =
    [[NSMutableAttributedString alloc] initWithHTML:htmlData
                                            options: options
                                 documentAttributes:nil]; 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-02-19T22:42:29.543

这里之前的答案有效，但主要是偶然的。

使用`NSData`with`NSUnicodeStringEncoding`往往会起作用，因为该常量是 的别名`NSUTF16StringEncoding`，并且 UTF-16 很容易被系统识别。比 UTF-8 更容易，后者显然被识别为 ASCII 的其他超集（`NSWindowsCP1252StringEncoding`在您的情况下看起来像，可能是因为它是为数不多的具有 0x8_ 和 0x9_ 映射的基于 ASCII 的编码之一）。

这个答案在引用文档时是错误的`NSCharacterEncodingDocumentAttribute`，因为“属性”是你从中*得到*的`-initWithHTML`。这就是为什么它是`NSDictionary **`而不只是`NSDictionary *`。您可以传入一个指向 的指针`NSDictionary *`，然后您将得到诸如 TopMargin/BottomMargin/LeftMargin/RightMargin、PaperSize、DocumentType、UTI 等键。您尝试通过“属性”字典传入*的任何值都将被忽略。*

您需要使用“选项”来传递值*，*并且相关的选项键是`NSTextEncodingNameDocumentOption`，它没有记录的默认值。它将字节传递给 WebKit 进行解析，所以如果你不指定编码，大概你得到的是 WebKit 的编码猜测启发式。

`NSData`为了保证你的和之间的编码类型匹配`NSAttributedString`，你应该做的是：

```
NSString *html = @"“Hello” World";
NSData *htmlData = [html dataUsingEncoding:NSUTF8StringEncoding];

NSMutableAttributedString *as =
    [[NSMutableAttributedString alloc] initWithHTML:htmlData
                                            options:@{NSTextEncodingNameDocumentOption: @"UTF-8"}
                                 documentAttributes:nil]; 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2020-04-04T13:20:27.700

接受答案的 Swift 版本是：

```
let htmlString: String = "Hello world contains html</br>"
let data: Data = Data(htmlString.utf8)

let options: [NSAttributedString.DocumentReadingOptionKey: Any] = [
    .documentType: NSAttributedString.DocumentType.html,
    .characterEncoding: String.Encoding.utf8.rawValue
]

let attributedString = try? NSAttributedString(data: data,
    options: options,
    documentAttributes: nil) 
```

# matlab - 在点 i 处连续变量 A 方差的有效方法？MATLAB

> ID：15956700
> 
> 赞同：1
> 
> 时间：2013-04-11T18:59:32.183
> 
> 标签：matlab

我有一个连续变量`A=gamrnd(5,0.4,1000,28)`和一个输出变量`Y=lognrnd(7,1.9,1000,28)`

```
 A
    7.6472    3.4284    6.3352    8.0480    8.1021
   12.3371    5.1611    6.3986    9.3687    9.5652
    8.7700    5.2980    6.0307    2.8651   12.6011
   12.2042    4.5636    6.0570    7.1348    8.6586
    7.8960    5.5213    3.7105    6.4875    7.4891

 Y
    1.9733   14.0951   14.0951   14.0951   14.0951
    9.4284   11.7573   15.6730   25.4495   24.6680
    3.4724    4.4953    7.1237    9.4191   18.4504
    8.9548    8.9548    8.9548    8.9548    8.9548
    1.4834    2.5393    2.5393    2.5393    2.5393 
```

我想计算那个红框的 A（或宽度）的特定值`variance`？`Y`假设我将域`A`分成 20 个红色框，我想计算`Y`每个框的方差。也就是说：

$Var(Y|A=a_i)$

有没有想过我会怎么做？

到目前为止我的想法：

```
[i j]=find(9.5<=A & A<=10.5)
sig=var(reshape((Y([i j])),length(i)*2,1)) 
```

但这是正确的，而是临时的。假设我在 A 有一百个部门。是否可以使用更有效的方法？ ![在此处输入图像描述](https://i.stack.imgur.com/5HbdN.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T19:22:56.273

`accumarray`救援！

```
%# split A into 100 chunks
nChunks = 100;

Aidx = round(A/maxA*(nChunks-1))+1;

%# get the number of data points just in case
nDataPoints = histc(Aidx,1:nChunks);

%# calculate the variance
varA = accumarray(Aidx,Y,[100,1],@var,NaN); 
```

# html - HTML：在 div 中垂直对齐 div

> ID：15956702
> 
> 赞同：0
> 
> 时间：2013-04-11T18:59:41.850
> 
> 标签：html, css, vertical-alignment

我想在另一个 div 中垂直居中一个 div，但我没有让它工作。图像 div 需要在父（黑色）div 中居中。我已经尝试过

```
position: absolute; 
```

修复，以及

```
display: table-cell; 
```

但它们似乎都不起作用。问题似乎是我的父母 div 是 100% .. 有人可以帮帮我吗？示例在这里：

[http://jsfiddle.net/mkGXx/](http://jsfiddle.net/mkGXx/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T19:03:23.950

```
<div style="display: table; height: 800px; #position: relative; overflow: hidden;">
    <div style=" #position: absolute; #top: 50%;display: table-cell; vertical-align: middle;">
      <div class="greenBorder" style=" #position: relative; #top: -50%">
        any text<br />
        any content<br /><br /><br />
        everything is vertically centered
      </div>
    </div>
  </div> 
```

见：http: [//jsfiddle.net/9eDXM/](http://jsfiddle.net/9eDXM/)

# javascript - 使用javascript检测视口宽度是否大于Mobile Safari上的可见宽度

> ID：15956703
> 
> 赞同：2
> 
> 时间：2013-04-11T18:59:50.417
> 
> 标签：javascript, screen, mobile-safari, viewport

我在页面上有一个位置固定（固定到任何角落）的元素（我不一定可以控制元视口标签 - 它是第三方网站的嵌入式小部件）。在 Mobile Safari 上，当用户在某个点捏缩放页面时，视口会变得大于可见区域。此时，固定位置元素保持连接到视口，并且不一定在可见区域中。

**我想比较两个宽度：可见区域的宽度和视口的宽度。我相信可见区域的大小是window.innerWidth。我不确定如何测量视口。**

我一直在尝试查看以下之间的关系：

*   document.documentElement.clientWidth
*   屏幕宽度
*   window.innerWidth
*   window.outerWidth

......但是还没有看到任何明显的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-09-28T04:44:54.760

这很丑陋，但它确实显示了一些几乎可以工作的代码（在 iOS 上查看以查看它是否正常工作。使用桌面并单击页面右上角的编辑以查看或编辑代码）：

[https://jsbin.com/jopamu](https://jsbin.com/jopamu)（仅限 iOS）

“过度缩放”计算的技巧很讨厌，但它确实在一定程度上补偿了*多个*视口缩放。这是一个需要解决的复杂问题，因为存在相互竞争的问题：

*   捏缩放
*   由于输入焦点而缩放
*   “位置：固定”缩放
*   可能是操作系统（可访问性）缩放

我发现的可能解决方案是：

1.  使用上面的计算和 position:absolute 定位菜单 - 在 onscroll 事件中更新左侧/顶部。有丑陋的抖动（可以通过隐藏并仅在缩放/滚动完成时显示）来改善一点。

2.  使用 position:fixed 定位菜单，但在发生缩放/滚动时更改左侧/顶部以更正菜单位置。少得多的颤抖，但我不能完全得到它 100% 可靠（一些比赛条件）。

3.  不适合您的情况（并且由于存在损坏东西的风险而非常不推荐）：您可以通过取消 touchstart 的默认设置来[防止捏缩放和 iOS10 双击缩放](https://stackoverflow.com/questions/37808180/disable-viewport-zooming-ios-10-safari#38573198)。困难，因为它需要许多其他解决方法才能正常触摸工作，并且需要合成滚动和缩放（但具有丑陋的副作用，例如有时会阻止滚动工作并且还会干扰可访问性，例如，如果语音可访问性打开等）。

如果您只想查看宽度，请使用旧版本：[https ://output.jsbin.com/jopamu/6](https://output.jsbin.com/jopamu/6)

# php - 快速模式解释

> ID：15956709
> 
> 赞同：1
> 
> 时间：2013-04-11T19:00:11.793
> 
> 标签：php, regex, pattern-matching

我想要这个字符串：

```
value="1,'goahead'" your='56' so='"<br />"' 
```

我希望 php 正则表达式返回结果数组，如下所示：

```
value="1,'goahead'"
your='56'
so='"<br />"' 
```

我试过这个正则表达式：

```
preg_match_all("#([\d\w_]+)\s*=\s*(\"|')([^'\"]*)(\"|')*#isx") 
```

但它未能获取此值：`value="1,'goahead'"`

我认为这是因为值内的单引号。请帮助我改进模式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T19:10:39.333

我建议查看[DOMDocument](http://us3.php.net/DOMDocument)：

如果您的输入是一个完整的标签...

```
<p value="1,'goahead'" your='56' so='"<br />"'> 
```

...然后你可以这样做：

```
$DOM = new DOMDocument;
$DOM->loadHTML($str);
foreach ($DOM->getElementsByTagName('p')->item(0)->attributes as $attr) {
  $attributes[$attr->nodeName] = $attr->nodeValue;
} 
```

这为您提供了您正在寻找的数组：

```
Array
(
    [value] => 1,'goahead'
    [your] => 56
    [so] => "<br />"
) 
```

工作示例：http: [//3v4l.org/TIIZ2](http://3v4l.org/TIIZ2)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T19:04:34.073

使用这个正则表达式会更好：

```
/(\w+)\s*=\s*(["'])(.*?)\2/ 
```

这将给出第一个子模式中的属性名称，第二个中使用的引号类型，以及第三个中的属性值。

特别重要的是`.*?`, 懒惰匹配（即最不可能）和`\2`匹配第二个子模式（在这种情况下，使用的引号）。但是，这不允许使用`\"`or进行转义`\'`。这涉及更多一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T19:07:21.760

我不敢问你最终会如何做到这一点，以及为什么，无论如何，这可能会对你有所帮助：

`if (preg_match('%(value="\d+,(\s+)?\'[a-z]+\'"(\s+)?)?(your=\'\d+\'(\s+)?)?(so=\'"<br(\s+)?\/>"\')?%six', $subject, $matches)) { }`

# javascript - 如何检查数组中的@（at），并在检查后删除此符号

> ID：15956710
> 
> 赞同：0
> 
> 时间：2013-04-11T19:00:15.030
> 
> 标签：javascript, jquery, validation

我有一个包含多个条目的数组。其中一些包含`@`在开头。这是一个数组的例子：

```
some string  
@another string  
@one more string  
the best string  
string with email@mail.com 
```

对于验证和分组，我使用这部分代码（现在只检查`@`）

```
 if(linesArray[i] ===  '@'){
    $('#test').append('<li class="string_with_at">'+linesArray[i]+'</li>');
  }else{
    $('#test').append('<li class="string_no_at">'+linesArray[i]+'</li>');
  } 
```

我的问题是：

1.  如何检查`@`第一组的排队开始？
2.  如何从结果中删除此符号 ('li'+linesArray+'/li') - 可能只留下类以了解它是`@`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T19:04:19.453

那个怎么样：

```
if(linesArray[i][0] ===  '@') { //checking the first symbol
   //remove first element from result
   $('#test').append('<li class="string_with_at">'+linesArray[i].substring(1)+'</li>');
}
else {
   $('#test').append('<li class="string_no_at">'+linesArray[i]+'</li>');
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T19:04:23.223

如果在位置 0，则删除“@”并返回新格式化的字符串的函数：

```
removeAt = function(s){
    if(s.charAt(0) == '@')
      return s.substring(1);
    return s;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T19:20:18.623

这应该可以解决问题：

```
function addElement (val) {
    var match = val.match(/^(@)(.*)/),
        at    = match[1],
        str   = match[2],
        li    = $('<li/>').html(str)

    li.addClass('string_' + (at ? 'with' : 'no') + '_at');

    $('#test').append(li);
}

linesArray.forEach(addElement); 
```

# c# - 使用 LINQ 如何根据范围确定 IEnumerable 的优先级？

> ID：15956716
> 
> 赞同：1
> 
> 时间：2013-04-11T19:00:30.250
> 
> 标签：c#, linq, data-structures

如果我的数据是 a`List<Cat>`并且每只猫的年龄分别为 10、9、8、7、6、5、4、3、2、1

我想根据范围 1-3、4-8、9-10 重新排序列表

这样结果列表将是

3、2、1、8、7、6、5、4、10、9

我怎样才能做到这一点？

我首先考虑创建三个查询：

```
var band1 = myList.Where(c => c <= 3);
var band2 = myList.Where(c => c => 4 && c <= 8);
var band3 = myList.Where(c => c >= 9); 
```

但后来我不知道如何使用 LINQ 组合结果，因为我有三个`IEnumerable<Cat>`.

什么是正确的使用方法，或者我必须使用一个`foreach`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T19:02:51.073

创建一个`GetRange(Cat cat)`按它排序您的列表的方法：

```
myCatList.OrderBy(cat=>GetRange(cat)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T19:04:46.110

您可以使用[Concat](http://msdn.microsoft.com/en-us/library/vstudio/bb302894.aspx)。

```
var band1 = myList.Where(c => c <= 3);
var band2 = myList.Where(c => c => 4 && c <= 8);
var band3 = myList.Where(c => c >= 9);

var result = band1.Concat(band2).Concat(band3); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-11T19:08:29.273

这就是您将如何使用单个 LINQ 语句来执行您所要求的操作。

```
var ordered = items
    .OrderBy(x => {
        if(x <= 3) return 0;
        if(x <= 8) return 1;
        return 2;
    })
    .ThenByDescending(x => x); 
```

或者（假设项目已经按降序排列）：

```
var ordered = myList
    .OrderBy(x => {
        if (x <= 3) { return 1; }
        if (x <= 8) { return 2; }
        return 3;
    }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-11T19:07:39.050

```
//define your ranges  
var ranges = new[] { 3,8,10};

var grouped = listOfCats.GroupBy( x => ranges.FirstOrDefault( r => r >= x.Age ) ); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-11T19:07:41.840

所有你需要的是连接`IEnumerable<int>`与`IEnumerable<int>.Concat()`

```
var band1 = myList.Where(c => c <= 3);
var band2 = myList.Where(c => c >= 4 && c <= 8);
var band3 = myList.Where(c => c >= 9);

List<int> finalList = band1.Concat(band2).Concat(band3).ToList(); 
```

# php - 如何使用 jQuery 上传动态添加的图像或文件？

> ID：15956723
> 
> 赞同：0
> 
> 时间：2013-04-11T19:00:50.893
> 
> 标签：php, jquery

填写表单详细信息并单击添加更多按钮，然后表单详细信息以表格格式即时添加，实际上并没有存储在任何地方。我需要插入数据库并上传选定的图像。

截图网址： [http ://www.orsatechnology.com/conv.jpg](http://www.orsatechnology.com/conv.jpg)

请帮我解决它。

生成网格的代码

```
 //  To Generate conveyance Grid

$(document).ready(function(){
            var i = 0;
            $('#addMore').click(function(){

            $('#dailyReportFrm').validate();  

            $('#gridDiv').show();

                var conNature       = $('#con_nature').val();
                var conNatureval    = $('#con_nature :selected').text();
                var noofKM          = $('#no_of_km').val();
                var perKMcost       = $('#cost_per_km').val();
                var noofDay         = $('#no_of_day').val();
                var bill            = $('#bill').val();
                var billAttach      = $('#bill_attach').val();
                var claimAmount     = $('#claim_amt').val();
                var empRemark       = $('#emp_remark').val();

                var str='';

                var id = i++;

        str ='<tr id="removeTR_'+i+'"><td>'+conNatureval+'<input type="hidden" id="con_nature_'+i+'" name="con_nature[]" value="'+conNature+'"><input type="hidden" id="no_of_km_'+i+'" name="no_of_km[]" value="'+noofKM+'"><input type="hidden" name="cost_per_km[]" id="cost_per_km_'+i+'" value="'+perKMcost+'"><input type="hidden" id="no_of_day_'+i+'" name="no_of_day[]" value="'+noofDay+'">'+bill+'<input type="hidden" id="bill_'+i+'" name="bill[]" value="'+bill+'"><input type="hidden" id="bill_attach_'+i+'" name="bill_attach[]" value="'+billAttach+'"></td><td>'+empRemark+'<input type="hidden" id="emp_remark_'+i+'" name="emp_remark[]" value="'+empRemark+'"></td><td>'+claimAmount+'<input type="hidden" id="claim_amt_'+i+'" name="claim_amt[]" value="'+claimAmount+'"></td><td align="center"><img class="delGridRow" onclick="delGridRow('+i+')" id="delConv_'+i+'" src="../../../public/images/delete_icon.png" style="cursor:hand; cursor:pointer;" title="Click to Delete"></td></tr>';

            $('#convGrid').before("<tr></tr>",str);
            $("#convGrid").val('');

            $('#con_nature').val('');
            $('#no_of_km').val('');
            $('#cost_per_km').val('');
            $('#no_of_day').val('');
            $('#bill').val('');
            $('#bill_attach').val('');
            $('#claim_amt').val('');
            $('#emp_remark').val('');

            $("#KMDiv").hide();
            $('#expenseNatureBoarding').hide();
            $('#billAvailableDiv').hide();
            $('#billAttachDiv').hide();

        });

    });

    function delGridRow(id)
    {
        if(id!="")
        {
            var ans = confirm('Are you sure want to delete?');
            if(ans==true)
            {
                $('#removeTR_'+id).remove();

            /* if(id=='1')
                {
                    $('#gridDiv').hide();
                }*/

                return true;
            }
            else
            {
                return false;
            }
        }
    }

HTML code
        <form name="dailyReportFrm" id="dailyReportFrm" method="post" onsubmit="return validate(this)" enctype="multipart/form-data">

                 <div id="conveyanceDiv">

                    <div style="overflow: auto;display:none;" id="gridDiv">
                        <table class="data display datatable" id="example">
                        <thead>
                            <tr>
                                <th>Nature of Expense</th>
                                <!-- th>Bill</th -->
                                <th>Amount</th>
                                <th>Remarks</th>
                                <th>Action</th>
                            </tr>
                        </thead>
                            </tr>
                                <tr class="odd gradeX" id="convGrid"></tr>
                        </table>
                        </div>

                <!-- ###################  Conveyance form start here ###################  -->

                 <div class="add-conveyance-heading_bg"><b>Fill Expense Details</b></div>

                 <div class="daily-report-form">
                 <div id="Conveyance-feild">
                <ul>

                <li id="natureOfExpenseDiv">
                <label>Nature of Expense <span class="red">*</span></label>
                <div class="inputarea">
                <select name="con_nature[]" id="con_nature" class="required" title="Select a Nature of conveyance">
                <option value="">- Select -</option>    
                    <?php foreach($natureofconvArray as $cn=>$cnv): ?>
                        <option value="<?php echo $cnv['nature_id'];?>"> <?php echo $cnv['nature_name']; ?> </option>
                    <?php endforeach; ?>
                </select></div>                
                <div class="clear"></div>
                </li>

            <li id="KMDiv">
            <label>No. of KMs <span class="red">*</span></label>
            <div class="inputarea">
            <select name="no_of_km[]" id="no_of_km" class="required" title="Select no. of K.M.">
            <option value="">--Select--</option>
            <?php for($km = 1; $km <= 500; $km++) { ?>
                <option value="<?php echo $km; ?>">  <?php echo $km; ?> </option>
            <?php } ?>
            </select> &nbsp;&nbsp;&nbsp;
            Amount per KM &nbsp;&nbsp;&nbsp;Rs.<input type="text" name="cost_per_km[]" id="cost_per_km" style="background-color:#FFFFFF;border:0px;font-weight:bold;padding-bottom:4px;" readonly="readonly" maxlength="5" value="<?php echo $perKMcost;?>" /> </div>
            <div class="clear"></div>
            </li>

                <li id="expenseNatureBoarding" style="display:none;">
                <label>No. of Days <span class="red">*</span></label>
                <div class="inputarea">
                <select name="no_of_day[]" id="no_of_day" class="required" title="Select no. of Day">
                <option value="">--Select--</option>
                <?php for($day = 1; $day <= 20; $day++) { ?>
                    <option value="<?php echo $day;?>"> <?php echo $day; ?> </option>
                <?php } ?>
                </select></div>
                <div class="clear"></div>
                </li>

                <li id="billAvailableDiv" style="display:none;">
                <label>Bill Available <span class="red">*</span></label>
                <div class="inputarea">
                    <select name="bill[]" id="bill" class="required" title="Select bill availability">
                        <option value="">- Select -</option>
                        <option value="Y">Yes</option>
                        <option value="N">No</option>
                </select></div>
                <div class="clear"></div>
                </li>

                 <li id="billAttachDiv" style="display:none;">
                <label>Attach</label>
                <div class="inputarea"><input type="file" name="bill_attach[]" id="bill_attach" /></div>
                <div class="clear"></div>
                </li>

                 <li id="amountClaimDiv">
                <label>Amount Claimed <span class="red">*</span></label>
                <div class="inputarea">
                    <input name="claim_amt[]" id="claim_amt" type="text" maxlength="5" readonly="readonly" class="text-box required number" title="Enter amount" />
                </div>
                <div class="clear"></div>
                </li>

                 <li id="conveyanceRemarkDiv">
                <label>Remarks <span class="red">*</span></label>
                <div class="inputarea"><textarea name="emp_remark[]" id="emp_remark" cols="" rows=""></textarea></div>
                <div class="clear"></div>
                </li>

                </ul>
                </div>

                <div  style="text-align:right; margin-top:10px;">
                    <a href="javascript:void(0)"><img src="<?php echo $this->baseurl();?>/public/images/add-more-btn.jpg" alt="Add more" id="addMore" /></a></div>

                <p class="red" id="msg"><b>Note:</b> In case of 1st and Last Visit, Claimed Amt. will be 0.00 upto 20 km.</p>

                </div>
            </div>

                <div style="text-align:center; margin-top:10px;">
                    <input type="submit" class="submit-btn" value="Save &amp; Next Visit" /> &nbsp;&nbsp;
                    <input type="submit" class="submit-btn" value="Save &amp; Exit" />
                </div>
                <div>&nbsp;</div>

                 </form> 
```

# cluster-analysis - “友敌”，或如何让青少年在生日聚会上开心

> ID：15956728
> 
> 赞同：4
> 
> 时间：2013-04-11T19:01:22.703
> 
> 标签：cluster-analysis, combinatorics, mathematical-optimization

我有一个我正在努力解决的组合优化问题。这个问题的技术细节很麻烦，所以我把事情翻译成一个虚构的甜蜜 16 岁生日派对。显然，青少年是 NP 困难的，但这与我试图解决的实际问题是分开的。

假设我有一个即将满 16 岁的儿子。他邀请所有朋友参加他的生日聚会，但并非所有朋友都彼此喜欢。事实上，我儿子的每个朋友都至少有一个不喜欢的人，有些人还有更多。如果一个或多个宣誓的“友敌”坐在同一张桌子上，这些“友敌”拒绝坐在同一张桌子上。我儿子向我提供了他所有邀请朋友的名单，还有谁不喜欢谁。这个信息是对称的（如果朋友 ​​A 不喜欢朋友 B，朋友 B 不喜欢朋友 A），但它不是传递的（如果朋友 ​​A 不喜欢朋友 B，但喜欢朋友 C，朋友 C 仍然是随意喜欢或不喜欢朋友 B)。我的问题是：如何确定满足没有两个“友敌”的条件的最小表数

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T20:15:19.017

这是一个组合优化问题，而不是机器学习问题。

实际上，这是一个着色问题：创建一个图`G`，其中每个顶点对应一个人。`(u, v)`如果两个人彼此不喜欢`u`，则存在优势。`v`您现在要求的是最小的`k`-colorable 。着色告诉您坐在哪张桌子上。`G``k``c(v)``v`

现在你只需要[选择一个算法](http://en.wikipedia.org/wiki/Graph_coloring#Algorithms)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T19:23:52.843

对我来说，这听起来更像是一个受约束的优化问题，而不是机器学习问题。我将建模如下。

*   每个朋友一个变量，值是表格，
*   表格的附加约束（根据列表）`friendX !- friendY`表示这两个不能坐在同一张桌子上。

这是您可以使用您选择的约束求解器解决的基本模型（我推荐[Minion](http://minion.sf.net)）。您可以最小化最大表数（这将需要一些额外的约束），或者只是尝试找到具有给定表数（即变量域中的值）的解决方案，直到找到不存在解决方案的解决方案.

根据问题的大小（即朋友和桌子的数量），这可能有效，也可能无效。您可能需要考虑的是问题中的对称性（即 A 表上的人可以移动到 B 表，反之亦然，这仍然是一个解决方案），这可能会因额外的约束而被打破。

# biztalk - 带有 MSH 尾随分隔符的 BizTalk HL7 适配器 (BTAHL7) 错误

> ID：15956731
> 
> 赞同：0
> 
> 时间：2013-04-11T19:01:29.427
> 
> 标签：biztalk, biztalk-2010, btahl7

我设置了接收端口/位置，部署了模式并设置了 RAD 方以允许尾随分隔符。

如果我向 BizTalk 发送没有尾随分隔符的消息，一切正常：

> MSH|^~\&|RAD|测试|ITS||201304111010||ORU^R01|J1908877|D|2.3|||AL|NE

如果我向 BizTalk 发送带有尾随分隔符的消息，这就是它从我们的 HCIS 中出来的样子：

> MSH|^~\&|RAD|TEST|ITS||201304111010||ORU^R01|J1908877|D|2.3|||AL|NE|||||||||

我从 BizTalk 收到以下 ACK：

> MSH^1^21^102&数据类型错误&HL7nnnn: MSH|^~\&|ITS||RAD|TEST|201304111010||ACK^R01^ACK|7788091J|D|2.3 MSA|CR|J1908877 ERR|MSH^1^21 ^102&数据类型错误&HL7nnnn

和事件日志中的错误：

> 解析错误＃1期间发生在正文中的错误
> 
> 备用错误号：301 备用错误说明：未找到架构 [http://microsoft.com/HealthCare/HL7/2X#ORU_R01_23_GLO_DEF](http://microsoft.com/HealthCare/HL7/2X#ORU_R01_23_GLO_DEF)备用编码系统：HL7-BTA

我知道问题不在于架构，因为如果我手动删除尾随分隔符，它可以正常工作......

![派对配置](https://i.stack.imgur.com/JW4vb.jpg)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T21:25:28.613

Allow Trailing Delimiters 设置允许对可选字段使用分隔符，但不允许对额外字段使用分隔符。HL7 2.3 中的 MSH 段中只有 19 个字段。

# ios - 使用 GCD 线程确保 FOR 循环的运行顺序？iOS

> ID：15956732
> 
> 赞同：1
> 
> 时间：2013-04-11T19:01:31.480
> 
> 标签：ios, objective-c, multithreading, queue, grand-central-dispatch

我有一个串行队列，其中包含加载和图像两种方法，然后，一旦完成，将图像添加到子视图中。这些图像位于 NSMutableArray 中，因此我正在迭代 For 循环以将它们加载如下：

```
dispatch_queue_t queue = dispatch_queue_create("com.example.MyQueue", NULL); 
for (int i =0; i<=[pictureThumbnailArray count]-1; i++) {
    dispatch_async(queue, ^{

    NSLog(@"Thumbnail count is %d", [pictureThumbnailArray count]);

        finishedImage = [self setImage:[pictureThumbnailArray objectAtIndex:i]:i];

        if (finishedImage !=nil) {
        dispatch_async(dispatch_get_main_queue(), ^ {
        [self.view addSubview:finishedImage];
    });

        }
    });
                   } 
```

问题是图像似乎是随机加载的。我想要实现的是 For 循环的每次迭代在下一次迭代开始之前运行并完成 - 这样图像每次都应该以相同的方式加载。

谁能建议实现这一目标的最佳方法 - 我想我可能需要同步 setImage 方法（队列中的第一个方法）？

变成 ：

```
for (int i =0; i<=[pictureThumbnailArray count]-1; i++) {

    NSLog(@"Thumbnail count is %d", [pictureThumbnailArray count]);

        finishedImage = [self setImage:[pictureThumbnailArray objectAtIndex:i]:i];

        if (finishedImage !=nil) {
        dispatch_async(dispatch_get_main_queue(), ^ {
        [self.view addSubview:finishedImage];
    });

        }
                   }
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T19:28:01.070

您还有其他问题 - 也许您的图像数组不是您认为的顺序。queue 和 mainQueue 都是串行队列。为了验证这一点，我只是做了一个快速测试，并以预期的顺序获取了日志消息。我建议您尝试添加日志消息左右来找出为什么顺序不符合您的预期：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.

static dispatch_queue_t queue;
    queue = dispatch_queue_create("com.example.MyQueue", NULL);

    for (int i =0; i<=20; i++) {
        dispatch_async(queue, ^{
            dispatch_async(dispatch_get_main_queue(), ^ {
                NSLog(@"Image %d", i);
            });
        } );
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T21:44:14.400

如果我们在没有 GCD 的情况下做更简单的事情会怎样？我建议摆脱它并使用 NSURLConnectionDelegate 方法。

此方法下载下一张图片：

```
-(void)startDownload
{
    if (index < URLs.count)
    {
        NSURL *URL = [NSURL URLWithString:URLs[index]];
        _connection = [[NSURLConnection alloc] initWithRequest:[NSURLRequest requestWithURL:URL] delegate:self];
    }
} 
```

委托方法将`connectionDidFinishLoading:`图像放置到视图中并开始下一次下载。

```
- (void)connectionDidFinishLoading:(NSURLConnection *)connection
{
    UIImage *image = [UIImage imageWithData:_data];
    _data = nil;
    _connection = nil;
    UIImageView *imageView = (UIImageView *)[self.view viewWithTag:100+index];
    imageView.image = image;
    index++;
    [self startDownload];
} 
```

这是完整的示例：[https](https://github.com/obrizan/TestImageDownload) ://github.com/obrizan/TestImageDownload图像相当大，所以请给一些时间来加载它们。

# javascript - Knockout.js 改变颜色 使用“选项”绑定时？

> ID：15956735
> 
> 赞同：8
> 
> 时间：2013-04-11T19:01:37.543
> 
> 标签：javascript, knockout.js

在选择列表上使用“选项”绑定时，是否可以更改选择列表选项元素的样式（使用“样式”或“CSS”绑定）？或者这只能通过在选择列表上使用“foreach”并更改每个样式的样式来完成？

我在代码中有这个：

```
<select id="components-select" size="4" name="components-select"
                        data-bind=" options: combinedComponents, 
                                    optionsText: 'displayName', 
                                    optionsValue: 'id', 
                                    value: chosenComponent"></select> 
```

但如果我追加，则如果返回 false `style: {color: isDefault() === true ? 'black' : 'red'}`，则整个列表将变为红色。`isDefault`

以这种方式对其进行编码是实现此目的的唯一方法：

```
<select id="components-select" size="4" name="components-select"
                        data-bind="foreach: combinedComponents">
    <option data-bind="value: id, text: displayName, style: {color: isDefault() === true ? 'black' : 'red'}"></option>
</select> 
```

或者是否有某种我不知道的 Knockout.js 魔法？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-10-01T23:13:41.773

为了扩展 Thomas Wiersema 的答案，您希望按行处理该问题的方式类似于：

```
<select id="components-select" size="4" name="components-select"
                    data-bind="foreach: combinedComponents">
<option data-bind="value: id, text: displayName, style: {color: getColorFor.call(null, $data) }"></option>
</select> 
```

然后，在 JavaScript 中，像这样将一个函数附加到您的父对象（当然，我正在做一些假设，例如您的父对象被调用`vm`并`isDefault`属于组合组件）：

```
vm.getColorFor = function(component) {
    return component.isDefault() === true ? 'black' : 'red';
} 
```

如果您不确定是什么`call`，请查看[bind vs apply vs call](http://javascriptissexy.com/javascript-apply-call-and-bind-methods-are-essential-for-javascript-professionals/)

我希望这会有所帮助——如果我能详细说明，请告诉我！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T19:56:15.480

要回答您的问题，是的，这是我认为的最佳方式。

使用`style: {color: isDefault() === true ? 'black' : 'red'}`您将样式绑定（添加）到关联的 DOM 元素的代码。在这种情况下，整个`<select>`标签。不是`<option>`你想要的标签。这就是你的*整个*列表改变颜色的原因。

查看[knockoutjs 文档](http://knockoutjs.com/documentation/style-binding.html)以获取有关样式绑定的更多信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-09-13T18:19:05.193

尝试“optionsAfterRender”绑定，在这种情况下可以正常工作。[http://jsfiddle.net/cZRJN/243/](http://jsfiddle.net/cZRJN/243/)

```
var viewModel = function() {

  this.combinedComponents = ko.observableArray([{
displayName: 'item1',
id: 1,
isDefault:true
  }, {
displayName: 'item2',
id: 2,
isDefault:false
  }, {
displayName: 'item3',
id: 3,
isDefault:true
  }]);

  OptionsAfterRender = (option, item) => {

    ko.applyBindingsToNode(option, {style: { color: item.isDefault ? 'red' : 'black'}}, item);
};

  this.chosenComponent= ko.observable(1);
}

ko.applyBindings(new viewModel());
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/knockout/3.4.1/knockout-min.js"></script>
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet"/>

<select id="components-select" size="4"  name="components-select"
                    data-bind=" options: combinedComponents, 
                                optionsText: 'displayName', 
                                optionsValue: 'id', 
                                value: chosenComponent,
                                  optionsAfterRender:OptionsAfterRender
                                "></select> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-11-18T16:21:27.690

总结一下已经说过的内容，我发现 Knockout 的一个功能被忽略了很多，并且在这些情况下非常方便：`$index`. 例如，我正在制作一个列表，我希望列表中的第一个选项为黑色，其余选项为红​​色。所以我可以像这样修改你的第二个选项：

`<select id="components-select" size="4" name="components-select" data-bind="foreach: combinedComponents"> <option data-bind="value: id, text: displayName, style: {color: $index === 0 ? 'black' : 'red'}"></option> </select>`

或者，如果您想替换颜色，只需使用模数检查。

`<select id="components-select" size="4" name="components-select" data-bind="foreach: combinedComponents"> <option data-bind="value: id, text: displayName, style: {color: $index % 2 === 1 ? 'black' : 'red'}"></option> </select>`

# asp.net-mvc - 全局 ajaxError 事件

> ID：15956737
> 
> 赞同：1
> 
> 时间：2013-04-11T19:01:54.683
> 
> 标签：asp.net-mvc, asp.net-mvc-3, jquery

我的 base.master 中有一个全局 ajaxError 事件，类似这样

```
$(document).ajaxError(function(event, request, settings,thrownError) {
    $("#results").append( "<li>some error msg.</li>" );
    }); 
```

但我不想使用“#results”。我希望它是动态的。我希望该函数始终在 update-target 元素中显示错误消息。如何在错误事件中找到从我的 ajax 调用中使用的 UpdateTarget Id？谢谢。

```
using (Ajax.BeginForm("action", null, 
           new AjaxOptions { 
           UpdateTargetId = "results", <--find this element in my error event
           LoadingElementId = "loading", 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T19:15:47.467

我不熟悉 ASP，但它`ajaxError`接收传递给`ajax`恰当命名`settings`变量中的方法的所有设置。

因此，如果您有这样的 AJAX 调用：

```
$.ajax({
    url: '/some/url.asp',
    data: myData,
    resultsEle: $('#myResults')
}); 
```

您可以`resultsEle`像`ajaxError`这样访问：

```
$(document).ajaxError(function(event, request, settings, thrownError) {
    settings.resultsEle.append( "<li>some error msg.</li>" );
}); 
```

同样，我不熟悉您在 ASP 代码中调用 AJAX 方法的方式，但我猜您可以通过以下方式访问元素：

```
$(document).ajaxError(function(event, request, settings, thrownError) {
    $('#'+settings.UpdateTargetId).append( "<li>some error msg.</li>" );
}); 
```

# c# - 遍历垂直于另一条线的 N 个点

> ID：15956742
> 
> 赞同：6
> 
> 时间：2013-04-11T19:02:13.417
> 
> 标签：c#, winforms

我有 1 行有 2 个已知点：

```
PointF p2_1 = new PointF();
p2_1.X = 100; // x1
p2_1.Y = 150; // y1

PointF p2_2 = new PointF();
p2_2.X = 800; // x2
p2_2.Y = 500; // y2

float dx = p2_2.X - p2_1.X;
float dy = p2_2.Y- p2_1.Y;

float slope = dy / dx; // slope m
float intercept = p2_1.Y - slope * p2_1.X; // intercept c 
// y = mx + c 
```

我想向左（或向右）迭代 10 个像素到 1 行（在 x1，y1 处）。

![在此处输入图像描述](https://i.stack.imgur.com/zhtvN.png)

红点是我想要处理的。例子：

```
for (int i = 10; i > 0; i--)
{
   // start with distant coordinates
   PointF new_point = new Point(); // (grab x,y, coords accordingly)
   // repeat until I'm at (x1, y1)
} 
```

我如何遍历这些坐标？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T19:10:45.443

垂直向量将采用以下形式： [-dy dx] 其中 [dx dy] 是您的当前向量。获得垂直向量后，您可以对其进行归一化（单位长度），然后按设定的量进行迭代：

```
float perp_dx = -dy / Math.sqrt(dy*dy+dx*dx); //normalized
float perp_dy = dx /Math.sqrt(dy*dy+dx*dx); //normalized

for(int i =0; /*logic here*/){
 float new_x = perp_dx * i + start_x;
 float new_y = perp_dy * i + start_y;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T19:08:43.673

垂直于给定线的线的斜率等于给定线斜率的负倒数。

给定线的斜率为`(y2-y1) / (x2-x1)`

所以红线有斜率= `- 1 / [(y2-y1) / (x2-x1)]`

所以这条线上的每个第i个点都有坐标（xi，yi），其中

```
 (yi - y1) / (xi - x1)  = - 1 / (y2-y1) / x2-x1) 
```

并且是一个像素固定距离的倍数（x1，y1），即，其中

```
 (yi-y1) * (yi-y1) +  (xi-x1) * (xi-x1) =  i * i 
```

我要做的是计算这个增量向量 (dx, dy) 对于红线上的每个点或在红线上的每个点之间是什么，然后在一个迭代 10 次的循环中继续添加该增量。

# php - 创建一个库 php

> ID：15956745
> 
> 赞同：-1
> 
> 时间：2013-04-11T19:02:27.900
> 
> 标签：php, class, protocols

我正在尝试创建一个代表 NXCP 消息的类（它是与监控系统 NetXMS 一起使用的协议），我正在尝试对其进行修改[http://wiki.netxms.org/wiki/Communication_Protocol_Reference_Guide](http://wiki.netxms.org/wiki/Communication_Protocol_Reference_Guide)

..这是我到目前为止的代码

NXCP.inc.php：

```
<?php
class message_nxcp {

        public $message;
        public $header;
        public $payload;
        public $padding;

        function header ($name,$ID,$eof,$de,$ro,$eos,$c )
        {   //CODE
            $sql= "select value from nxcp_code where name = '$name'" ;
            $code=mysql_query($sql);
            //FLAG
            //$sql1="select Value from flag where name = '$flag'"; $flag=mysql_query($sql1);
            if     ($eof=true){ $flag =0x0002;}
            elseif ($de=true) {$flag = 0x0004;}
            elseif ($eos=true) {$flag = 0x0008;}
            elseif ($ro=true) {$flag = 0x0010;}
            elseif ($c=true) {$flag = 0x0020;
                              $payload= ' ';}
            //SIZE
            $size=strlen($message); 
            //ID
            $this->id= $ID;
            // HEADER
            $header= $code.$flag.$size.$id.$df_count;
        }

        function payload ($var_id,$d_type,$value)
        {   //VARIABLE id
            $sql= "select value from nxcp_code where name = '$var_id'" ;
            $vid=mysql_query($sql);
            //data type  ,padding ,data  
                if ($d_type = 'integer')
                {   $data_type =0;
                    $padding1= 00;
                    $data=$value;
                }
            if ($d_type ='string' )
                {   $data_type =1;
                    $padding1= 00;
                    $data= strlen($value).$value;
                }
            if ($d_type = 'int64')
                { $data_type =2;
                    $padding1=00 ;
                    $data=$value;
                }
            if ($d_type ='int32')
                {   $data_type =3;
                    $padding1= '';
                    $data=$value;
                }
            if ($d_type ='binary')
                {   $data_type =4;
                    $padding1= 00;
                    $data=strlen($value).$value;
                }
            if ($d_type ='float')
                {   $data_type =5;
                    $padding1= 00;
                    $data=$value;
                }

        $payload=$vid.$data_type.$padding1.$data ;      
        }

        function padding ()
        {
            $i =0 ;
            $pad = 262160 - (strlen($header)+strlen($payload));
            if ($pad > 0)
            {
            for ($i=0 ; $i<$pad ; $i++)
                    {
                    $padding= $padding.'0' ; 
                    }
            }

        }

        function message()
         {  $message = $header.$payload.$padding;
            return $message;
         }
    }
?> 
```

然后我`message_nxcp`在 new.php 中创建我的类的一个新对象：

```
<?php

require_once('NXCP.inc.php');

$message=new message_nxcp;
$message->header('CMD_LOGIN' ,'1',true,false,false,false,false);
$message->payload('VID_LOGIN_NAME','string','admin');
$message->padding();
$message->message();
echo $message;

?> 
```

任何帮助，并提前感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T19:15:19.293

首先我不知道如何实现 NXCP 消息类，但我看到了代码中的基本问题。

所以所有这些和这里的解释：

```
 <?php
  class message_nxcp {

    //use private keyword (i think you does not want to reach this variables directly from outside of the class
    private $message;
    private $header;
    private $payload;
    private $padding;
    //
    private $id; //somewhere down i saw you use it so declared here

    function header ($name,$ID,$eof,$de,$ro,$eos,$c )
    {   //CODE
        $sql= "select value from nxcp_code where name = '$name'" ;

        /* Have you already connected to database with `mysql_connect` function? */
        $res=mysql_query($sql); 
        /* the type of $res is mysqlResult (not a string), you should fetch that like this: */
        //we should examine , is there error in the query
        if( !$res ) throw new Exception(mysql_error(),mysql_errno());
        $codeArray = mysql_fetch_assoc($res); //This fetch the first row of the result to an array with numeric indexes.
        //Here you should examine is the result empty
        if( !$codeArray ) throw new Exception('Code not found'); //somevhere you should catch it          
        $code = $codeArray[0]; 

        //FLAG
        //$sql1="select Value from flag where name = '$flag'"; $flag=mysql_query($sql1);
        if     ($eof=true){ $flag =0x0002;}
        elseif ($de=true) {$flag = 0x0004;}
        elseif ($eos=true) {$flag = 0x0008;}
        elseif ($ro=true) {$flag = 0x0010;}
        elseif ($c=true) {$flag = 0x0020; 
                          // $this keyword
                          $this->payload= ' ';}
        //SIZE
        // $this keyword
        $size=strlen($this->message); 
        //ID
        $this->id= $ID;
        // HEADER
        /* the this keyword missing */
        $this->header= $code.$flag.$size.$id.$df_count;
    }

    function payload ($var_id,$d_type,$value)
    {   //VARIABLE id
        /* do the same as the previus function*/
        $sql= "select value from nxcp_code where name = '$var_id'" ;
        $vid=mysql_query($sql);
        // see the example in the previus function

        //data type  ,padding ,data  
            if ($d_type = 'integer')
            {   $data_type =0;
                $padding1= 00;
                $data=$value;
            }
        if ($d_type ='string' )
            {   $data_type =1;
                $padding1= 00;
                $data= strlen($value).$value;
            }
        if ($d_type = 'int64')
            { $data_type =2;
                $padding1=00 ;
                $data=$value;
            }
        if ($d_type ='int32')
            {   $data_type =3;
                $padding1= '';
                $data=$value;
            }
        if ($d_type ='binary')
            {   $data_type =4;
                $padding1= 00;
                $data=strlen($value).$value;
            }
        if ($d_type ='float')
            {   $data_type =5;
                $padding1= 00;
                $data=$value;
            }
    // $this keyword missing, in php you must use this to access class variables
    $this->payload=$vid.$data_type.$padding1.$data ;      
    }

    function padding ()
    {
        $i =0 ;
        //$this keyword
        $pad = 262160 - (strlen($this->header)+strlen($this->payload));
        if ($pad > 0)
        {
        for ($i=0 ; $i<$pad ; $i++)
                {
                //$this keyword
                $this->padding= $this->padding.'0' ; 
                }
        }

    }

    function message()
     {  
         //$this keyword
        $this->message = $this->header.$this->payload.$this->padding;
        return $this->message;
     }
?> 
```

以及其他代码的问题：

```
 <?php

         require_once('NXCP.inc.php');
         try{
              $message=new message_nxcp();  //() missed
              $message->header('CMD_LOGIN' ,'1',true,false,false,false,false);
              $message->payload('VID_LOGIN_NAME','string','admin');
              $message->padding();
              echo $message->message();  //echo the message
         }catch(Exception $e){  //if we throw exceptions, somewhere here we should catch them
               //when you debuging:
               print '<pre>'.$e->getMessage()."\n".$e->getTraceAsString().'</pre>';
               //in production mode, we dont want to show users the details, just this: 
               print 'Error while processing the request';
               exit;

         }
      ?> 
```

其他一些事情：

`mysqli_*`不使用`mysql_*`（`mysql_*`将在 php 中弃用）或者如果您需要 Databasde Access 的 OOP 解决方案，您可以使用`PDO`

阅读以下页面：

[http://php.net/manual/en/language.oop5.php，http://php.net/manual/en/book.mysqli.php，http://php.net/manual/en/language](http://php.net/manual/en/language.oop5.php) [。](http://php.net/manual/en/language.exceptions.php) _ [_](http://php.net/manual/en/book.mysqli.php) _ [exceptions.php](http://php.net/manual/en/language.exceptions.php)，[http ://php.net/manual/en/book.pdo.php](http://php.net/manual/en/book.pdo.php)

# ios - AVFoundation 图像方向在预览中偏离了 90 度，但在相机胶卷中很好

> ID：15956750
> 
> 赞同：14
> 
> 时间：2013-04-11T19:02:48.043
> 
> 标签：ios, avfoundation

发生了一些非常奇怪的事情，我正在尝试使用 AVFoundation 捕获图像，相机胶卷图像看起来还不错，但图像预览将图像旋转了 90 度。

这是我用来捕获图像的代码

```
AVCaptureConnection *videoConnection = nil;
for (AVCaptureConnection *connection in stillImageOutput.connections)
{
    for (AVCaptureInputPort *port in [connection inputPorts])
    {
        if ([[port mediaType] isEqual:AVMediaTypeVideo] )
        {
            videoConnection = connection;
            break;
        }
    }
    if (videoConnection)
    {
        break;
    }
}

//NSLog(@"about to request a capture from: %@", stillImageOutput);
[stillImageOutput captureStillImageAsynchronouslyFromConnection:videoConnection completionHandler: ^(CMSampleBufferRef imageSampleBuffer, NSError *error)
 {
     CFDictionaryRef exifAttachments = CMGetAttachment( imageSampleBuffer, kCGImagePropertyExifDictionary, NULL);
     if (exifAttachments)
     {
         // Do something with the attachments.
         //NSLog(@"attachements: %@", exifAttachments);
     } else {
         NSLog(@"no attachments");
     }

     NSData *imageData = [AVCaptureStillImageOutput jpegStillImageNSDataRepresentation:imageSampleBuffer];

     UIImage *image = [[UIImage alloc] initWithData:imageData];

     self.vImage.image = image;

     UIImageWriteToSavedPhotosAlbum(image, nil, nil, nil);
 }]; 
```

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2013-04-18T04:39:04.063

是的，当您以设备的纵向方向捕获图像并在应用程序中使用该图像时会发生这种情况，因为图像的默认方向在任何 IOS 设备中都是横向的，因此您需要在从图库中选择后更改图像的方向以使用在您的应用程序中。

我已经放了代码来实现这一点

**Objective-C 代码**

```
- (UIImage *)fixOrientationOfImage:(UIImage *)image {

    // No-op if the orientation is already correct
    if (image.imageOrientation == UIImageOrientationUp) return image;

    // We need to calculate the proper transformation to make the image upright.
    // We do it in 2 steps: Rotate if Left/Right/Down, and then flip if Mirrored.
    CGAffineTransform transform = CGAffineTransformIdentity;

    switch (image.imageOrientation) {
        case UIImageOrientationDown:
        case UIImageOrientationDownMirrored:
            transform = CGAffineTransformTranslate(transform, image.size.width, image.size.height);
            transform = CGAffineTransformRotate(transform, M_PI);
            break;

        case UIImageOrientationLeft:
        case UIImageOrientationLeftMirrored:
            transform = CGAffineTransformTranslate(transform, image.size.width, 0);
            transform = CGAffineTransformRotate(transform, M_PI_2);
            break;

        case UIImageOrientationRight:
        case UIImageOrientationRightMirrored:
            transform = CGAffineTransformTranslate(transform, 0, image.size.height);
            transform = CGAffineTransformRotate(transform, -M_PI_2);
            break;
        case UIImageOrientationUp:
        case UIImageOrientationUpMirrored:
            break;
    }

    switch (image.imageOrientation) {
        case UIImageOrientationUpMirrored:
        case UIImageOrientationDownMirrored:
            transform = CGAffineTransformTranslate(transform, image.size.width, 0);
            transform = CGAffineTransformScale(transform, -1, 1);
            break;

        case UIImageOrientationLeftMirrored:
        case UIImageOrientationRightMirrored:
            transform = CGAffineTransformTranslate(transform, image.size.height, 0);
            transform = CGAffineTransformScale(transform, -1, 1);
            break;
        case UIImageOrientationUp:
        case UIImageOrientationDown:
        case UIImageOrientationLeft:
        case UIImageOrientationRight:
            break;
    }

    // Now we draw the underlying CGImage into a new context, applying the transform
    // calculated above.
    CGContextRef ctx = CGBitmapContextCreate(NULL, image.size.width, image.size.height,
                                             CGImageGetBitsPerComponent(image.CGImage), 0,
                                             CGImageGetColorSpace(image.CGImage),
                                             CGImageGetBitmapInfo(image.CGImage));
    CGContextConcatCTM(ctx, transform);
    switch (image.imageOrientation) {
        case UIImageOrientationLeft:
        case UIImageOrientationLeftMirrored:
        case UIImageOrientationRight:
        case UIImageOrientationRightMirrored:
            // Grr...
            CGContextDrawImage(ctx, CGRectMake(0,0,image.size.height,image.size.width), image.CGImage);
            break;

        default:
            CGContextDrawImage(ctx, CGRectMake(0,0,image.size.width,image.size.height), image.CGImage);
            break;
    }

    // And now we just create a new UIImage from the drawing context
    CGImageRef cgimg = CGBitmapContextCreateImage(ctx);
    UIImage *img = [UIImage imageWithCGImage:cgimg];
    CGContextRelease(ctx);
    CGImageRelease(cgimg);
    return img;
} 
```

**SWIFT代码**

```
func fixOrientationOfImage(image: UIImage) -> UIImage? {
   if image.imageOrientation == .Up {
      return image
   }

   // We need to calculate the proper transformation to make the image upright.
   // We do it in 2 steps: Rotate if Left/Right/Down, and then flip if Mirrored.
   var transform = CGAffineTransformIdentity

   switch image.imageOrientation {
   case .Down, .DownMirrored:
      transform = CGAffineTransformTranslate(transform, image.size.width, image.size.height)
      transform = CGAffineTransformRotate(transform, CGFloat(M_PI))
   case .Left, .LeftMirrored:
      transform = CGAffineTransformTranslate(transform, image.size.width, 0)
      transform = CGAffineTransformRotate(transform, CGFloat(M_PI_2))
   case .Right, .RightMirrored:
      transform = CGAffineTransformTranslate(transform, 0, image.size.height)
      transform = CGAffineTransformRotate(transform, -CGFloat(M_PI_2))
   default:
      break
   }

   switch image.imageOrientation {
   case .UpMirrored, .DownMirrored:
      transform = CGAffineTransformTranslate(transform, image.size.width, 0)
      transform = CGAffineTransformScale(transform, -1, 1)
   case .LeftMirrored, .RightMirrored:
      transform = CGAffineTransformTranslate(transform, image.size.height, 0)
      transform = CGAffineTransformScale(transform, -1, 1)
   default:
      break
   }

   // Now we draw the underlying CGImage into a new context, applying the transform
   // calculated above.
   guard let context = CGBitmapContextCreate(nil, Int(image.size.width), Int(image.size.height), CGImageGetBitsPerComponent(image.CGImage), 0, CGImageGetColorSpace(image.CGImage), CGImageGetBitmapInfo(image.CGImage).rawValue) else {
      return nil
   }

   CGContextConcatCTM(context, transform)

   switch image.imageOrientation {
   case .Left, .LeftMirrored, .Right, .RightMirrored:
      CGContextDrawImage(context, CGRect(x: 0, y: 0, width: image.size.height, height: image.size.width), image.CGImage)
   default:
      CGContextDrawImage(context, CGRect(origin: .zero, size: image.size), image.CGImage)
   }

   // And now we just create a new UIImage from the drawing context
   guard let CGImage = CGBitmapContextCreateImage(context) else {
      return nil
   }

   return UIImage(CGImage: CGImage)
} 
```

**斯威夫特 3.0**

```
func fixOrientationOfImage(image: UIImage) -> UIImage? {
    if image.imageOrientation == .up {
        return image
    }

    // We need to calculate the proper transformation to make the image upright.
    // We do it in 2 steps: Rotate if Left/Right/Down, and then flip if Mirrored.
    var transform = CGAffineTransform.identity

    switch image.imageOrientation {
       case .down, .downMirrored:
        transform = transform.translatedBy(x: image.size.width, y: image.size.height)
        transform = transform.rotated(by: CGFloat(Double.pi))
    case .left, .leftMirrored:
        transform = transform.translatedBy(x: image.size.width, y: 0)
        transform = transform.rotated(by:  CGFloat(Double.pi / 2))
    case .right, .rightMirrored:
        transform = transform.translatedBy(x: 0, y: image.size.height)
        transform = transform.rotated(by:  -CGFloat(Double.pi / 2))
    default:
        break
    }

    switch image.imageOrientation {
    case .upMirrored, .downMirrored:
        transform = transform.translatedBy(x: image.size.width, y: 0)
        transform = transform.scaledBy(x: -1, y: 1)
    case .leftMirrored, .rightMirrored:
        transform = transform.translatedBy(x: image.size.height, y: 0)
        transform = transform.scaledBy(x: -1, y: 1)
    default:
        break
    }

    // Now we draw the underlying CGImage into a new context, applying the transform
    // calculated above.
    guard let context = CGContext(data: nil, width: Int(image.size.width), height: Int(image.size.height), bitsPerComponent: image.cgImage!.bitsPerComponent, bytesPerRow: 0, space: image.cgImage!.colorSpace!, bitmapInfo: image.cgImage!.bitmapInfo.rawValue) else {
        return nil
    }

    context.concatenate(transform)

    switch image.imageOrientation {
      case .left, .leftMirrored, .right, .rightMirrored:
        context.draw(image.cgImage!, in: CGRect(x: 0, y: 0, width: image.size.height, height: image.size.width))
       default:
          context.draw(image.cgImage!, in: CGRect(origin: .zero, size: image.size))
    }

    // And now we just create a new UIImage from the drawing context
    guard let CGImage = context.makeImage() else {
        return nil
    }

    return UIImage(cgImage: CGImage)
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-15T18:16:55.753

接受的答案有效，但比它需要的要复杂得多。您可以使用以下方法来旋转图像。

```
- (UIImage *)cropImage:(UIImage*)image toRect:(CGRect)rect {
    CGFloat (^rad)(CGFloat) = ^CGFloat(CGFloat deg) {
        return deg / 180.0f * (CGFloat) M_PI;
    };

    // determine the orientation of the image and apply a transformation to the crop rectangle to shift it to the correct position
    CGAffineTransform rectTransform;
    switch (image.imageOrientation) {
        case UIImageOrientationLeft:
            rectTransform = CGAffineTransformTranslate(CGAffineTransformMakeRotation(rad(90)), 0, -image.size.height);
            break;
        case UIImageOrientationRight:
            rectTransform = CGAffineTransformTranslate(CGAffineTransformMakeRotation(rad(-90)), -image.size.width, 0);
            break;
        case UIImageOrientationDown:
            rectTransform = CGAffineTransformTranslate(CGAffineTransformMakeRotation(rad(-180)), -image.size.width, -image.size.height);
            break;
        default:
            rectTransform = CGAffineTransformIdentity;
    };

    // adjust the transformation scale based on the image scale
    rectTransform = CGAffineTransformScale(rectTransform, image.scale, image.scale);

    // apply the transformation to the rect to create a new, shifted rect
    CGRect transformedCropSquare = CGRectApplyAffineTransform(rect, rectTransform);
    // use the rect to crop the image
    CGImageRef imageRef = CGImageCreateWithImageInRect(image.CGImage, transformedCropSquare);
    // create a new UIImage and set the scale and orientation appropriately
    UIImage *result = [UIImage imageWithCGImage:imageRef scale:image.scale orientation:image.imageOrientation];
    // memory cleanup
    CGImageRelease(imageRef);

    return result;
} 
```

要仅旋转图像而不进行裁剪，您可以简单地这样称呼它：

```
UIImage *image;
[self cropImage:image toRect:rect.bounds]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-03-04T13:42:00.343

Dipen Panchasara 的回答很棒，但可能存在一个问题。当您处理大图像（例如来自 iPhoneX）时，会出现大量内存峰值，这在某些情况下可能是一个问题。

所以，也许你想改变那行：

```
context.draw(image.cgImage!, in: CGRect(x: 0, y: 0, width: image.size.height, height: image.size.width)) 
```

对于一些内存优化的东西。例如，这将在 16 (4*4) 个步骤中中断图像绘制，从而显着减少内存消耗：

```
let partInAxis: CGFloat = 4
let partWidth = image.size.height/partInAxis
let partHeight = image.size.width/partInAxis
for i in 0...Int(partInAxis)-1 {
   for j in 0...Int(partInAxis)-1 {
      let partialImage = image.cgImage?.cropping(to: CGRect(x: CGFloat(i)*partWidth, y: CGFloat(j)*partHeight, width: partWidth, height: partHeight))
      context.draw(partialImage!, in: CGRect(x: CGFloat(i)*partWidth, y: CGFloat(Int(partInAxis)-1-j)*partHeight, width: partWidth, height: partHeight))
   }
} 
```

**请注意，在这种情况下，图像的高度和宽度必须除以 4。**

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-10-15T04:49:46.703

**斯威夫特 5.5 +**

您应该在捕获图像之前设置输出的方向。

```
// set the image orientation in output
  if let photoOutputConnection = self.photoOutput.connection(with: .video) {
        photoOutputConnection.videoOrientation = videoPreviewLayerOrientation!
    }

self.photoOutput.capturePhoto(with: photoSettings, delegate: photoCaptureProcessor) // capture image 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-11-15T17:08:15.903

我建议使用[Yodagama 的答案](https://stackoverflow.com/a/69580115/3151675)，因为它是单行且更清洁的。但是，如果您需要以另一种方式更正方向，这是[Dipen 的答案](https://stackoverflow.com/a/16074603/3151675)，没有强制选项，作为 UIImage 扩展。为了更好的内存优化，将它与[这个答案](https://stackoverflow.com/a/54984526/3151675)混合。

```
extension UIImage {
    var fixedOrientation: UIImage? {
        if imageOrientation == .up {
            return self
        }

        // We need to calculate the proper transformation to make the image upright.
        // We do it in 2 steps: Rotate if Left/Right/Down, and then flip if Mirrored.
        var transform = CGAffineTransform.identity

        switch imageOrientation {
        case .down, .downMirrored:
            transform = transform.translatedBy(x: size.width, y: size.height)
            transform = transform.rotated(by: .pi)
        case .left, .leftMirrored:
            transform = transform.translatedBy(x: size.width, y: 0)
            transform = transform.rotated(by: .pi / 2)
        case .right, .rightMirrored:
            transform = transform.translatedBy(x: 0, y: size.height)
            transform = transform.rotated(by:  -.pi / 2)
        default: break
        }

        switch imageOrientation {
        case .upMirrored, .downMirrored:
            transform = transform.translatedBy(x: size.width, y: 0)
            transform = transform.scaledBy(x: -1, y: 1)
        case .leftMirrored, .rightMirrored:
            transform = transform.translatedBy(x: size.height, y: 0)
            transform = transform.scaledBy(x: -1, y: 1)
        default: break
        }

        guard let cgImage = cgImage,
              let colorSpace = cgImage.colorSpace else {
            return nil
        }

        // Now we draw the underlying CGImage into a new context, applying the transform
        // calculated above.
        let context = CGContext(
            data: nil,
            width: Int(size.width),
            height: Int(size.height),
            bitsPerComponent: cgImage.bitsPerComponent,
            bytesPerRow: 0,
            space: colorSpace,
            bitmapInfo: cgImage.bitmapInfo.rawValue
        )

        guard let context = context else {
            return nil
        }

        context.concatenate(transform)

        switch imageOrientation {
          case .left, .leftMirrored, .right, .rightMirrored:
            context.draw(cgImage, in: .init(x: 0, y: 0, width: size.height, height: size.width))
           default:
              context.draw(cgImage, in: .init(origin: .zero, size: size))
        }

        // And now we just create a new UIImage from the drawing context
        guard let newCgImage = context.makeImage() else {
            return nil
        }

        return .init(cgImage: newCgImage)
    }
} 
```

# facebook - Facebook 没有显示我的链接图片或信息

> ID：15956752
> 
> 赞同：0
> 
> 时间：2013-04-11T19:02:55.917
> 
> 标签：facebook, wordpress, hyperlink, translate

我在我的博客中使用 wordpress 我也用西班牙语添加了它，但是当我在 Facebook 上分享链接时，它没有显示任何图像，只是链接信息我该如何解决这个问题？

我进行了 Facebook 调试，它说： 'og:url' 属性是必需的，但不存在。我使用的链接是 www.zabiknowsitall.com/es

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-11T19:10:33.933

尝试添加图像元标记。

```
<meta property="og:image" content="http://zabiknowsitall.com/wp-content/uploads/2013/01/cropped-header1.png" /> 
```

我发现 Facebook 非常积极地缓存页面，因此您可能需要等待一段时间才能更新。

Facebook 根本无法读取 og 元数据的原因是您的服务器返回了 HTTP 状态代码 500（服务器错误）。它应该返回 200，因此您需要探索为什么会发生这种情况。

可以在这里找到一个方便的测试 opengraph 的工具：

[https://developers.facebook.com/tools/debug/og/object?q=http%3A%2F%2Fzabiknowsitall.com%2Fes](https://developers.facebook.com/tools/debug/og/object?q=http%3A%2F%2Fzabiknowsitall.com%2Fes)

# mysql - 将mysql类型从varchar转换为decimal

> ID：15956756
> 
> 赞同：0
> 
> 时间：2013-04-11T19:03:10.623
> 
> 标签：mysql

菜鸟的时候，我开发了一个网站来存储日常开支，并将开支保存为varchar。现在我只想将数据库的结构（其中包含所有数千个数据）更改为十进制（我发现这是存储货币内容的最佳方式）。我的问题是，所有费用数据都会完好无损吗？还是会损坏任何东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T19:06:13.227

我建议采用分层方法：

*   更改数据库结构并添加十进制字段。
*   将数据库中的数据选择为您选择的编程语言。
*   用语言转换数据，写一个 SQL 脚本来插入（或直接插入）。
*   删除 VARCHAR 字段
*   将 DECIMAL 字段重命名为 VARCHAR 字段的名称。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T19:12:41.167

取决于你有多少...？如果您有常量小数（例如总是 2 个小数），那么您可以将类型更改为`decimal(8,2)`6 个整数和 2 个小数。**如果数据的小数点少于 2 位 2.1 => 2.10**但另一方面，如果小数点位多于 2 位，那么它将是**2.118 => 2.11**所以要小心这一点。

进行一些 CAST 测试，您可能想阅读这个问题：[Problem convert column values from VARCHAR(n) to DECIMAL](https://stackoverflow.com/questions/2589103/problem-convert-column-values-from-varcharn-to-decimal)

# django - 在 Django+South 中添加非空 ForeignKey 字段

> ID：15956757
> 
> 赞同：7
> 
> 时间：2013-04-11T19:03:14.077
> 
> 标签：django, django-south

我使用 Django 和 South 作为我的数据库。现在我想在现有模型中添加一个新模型和一个字段，引用新模型。例如：

```
class NewModel(models.Model):
    # a new model
    # ... 

class ExistingModel(models.Model):
    # ... existing fields

    new_field = models.ForeignKey(NewModel)  # adding this now 
```

现在 South 显然抱怨我添加了一个非空字段并要求我输入一次性值。但我真正想要的是`NewModel`为每个现有实例创建一个新实例`ExistingModel`，从而满足数据库要求。这有可能吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-07-11T18:38:49.820

执行此操作的最简单方法是编写使列更改的架构迁移，然后编写数据迁移以正确填写值。根据您使用的数据库，您必须以稍微不同的方式执行此操作。

## 方镁石

对于 Sqlite，您可以为关系添加一个标记值并使用数据迁移来填写它，而不会出现任何问题：

`0001_schema_migration_add_foreign_key_to_new_model_from_existing_model.py`

```
from south.db import db
from south.v2 import SchemaMigration
from django.db import models

class Migration(SchemaMigration):

    def forwards(self, orm):
        db.add_column('existing_model_table', 'new_model',
                      self.gf('django.db.models.fields.related.ForeignKey')(default=0, to=orm['appname.new_model']), keep_default=False) 
```

`0002_data_migration_for_new_model.py`：

```
class Migration(DataMigration):

    def forwards(self, orm):
        for m in orm['appname.existing_model'].objects.all():
            m.new_model = #custom criteria here
            m.save() 
```

这将工作得很好，没有问题。

## Postgres 和 MySQL

使用 MySql，你必须给它一个有效的默认值。如果`0`它实际上不是一个有效的外键，你会得到错误告诉你。

您*可以*默认为 1，但在某些情况下这不是有效的外键（发生在我身上是因为我们有不同的环境，并且某些环境发布到其他数据库，因此 ID 很少匹配（我们使用 UUID 进行交叉数据库识别，如上帝所愿）。

您遇到的第二个问题是 South 和 MySQL 不能很好地协同工作。部分原因是 MySQL 没有 DDL 事务的概念。

为了解决您将不可避免地遇到的一些问题（包括我上面提到的错误以及 South 要求您将`orm`SchemaMigration 中的项目标记为`no-dry-run`），您需要更改上述`0001`脚本以执行以下操作：

`0001_schema_migration_add_foreign_key_to_new_model_from_existing_model.py`

```
from south.db import db
from south.v2 import SchemaMigration
from django.db import models

class Migration(SchemaMigration):

    def forwards(self, orm):
        id = 0
        if not db.dry_run:
            new_model = orm['appname.new_model'].objects.all()[0]
            if new_model:
                id = new_model.id
        db.add_column('existing_model_table', 'new_model',
                      self.gf('django.db.models.fields.related.ForeignKey')(default=id, to=orm['appname.new_model']), keep_default=False) 
```

然后您可以`0002_data_migration_for_new_model.py`正常运行该文件。

我建议对 Postgres 和 MySql 使用上面相同的示例。我不记得第一个示例与 Postgres 的任何问题，但我确信第二个示例适用于两者（经过测试）。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-11T19:20:39.973

在这种情况下，您希望数据迁移来补充您的架构迁移。

South 有一个很好的分步教程，关于如何在文档中实现这一点，[这里](http://south.readthedocs.org/en/latest/tutorial/part3.html#data-migrations)。

在南方，将期望的结果分布在两个或三个模式/数据迁移上并不少见，因为它并不总是可能在一次大命中中做到这一点（有时取决于底层数据库是否可以容忍添加一个没有默认值的非空列）。因此，在这种情况下，您可能会添加一个具有默认值的模式迁移，然后是使用您的对象操作进行数据迁移，然后是最终模式迁移。

# scala - 如何使用范围方面

> ID：15956759
> 
> 赞同：0
> 
> 时间：2013-04-11T19:03:21.700
> 
> 标签：scala, lift, facets

我正在使用构面将分区搜索结果划分为范围。搜索返回一个列表项，每个项都有一个分数。在列表中，项目按分数从高到低排序。有些项目也可能有相同的分数。

我使用构面来获得前 10 名，然后是下 100 名。

我的想法是使用范围方面。问题是我从来不知道格言分数。每次都不一样。但是由于搜索结果是按分数顺序返回的，我可能可以使用范围方面而不关心范围：
`//top 10 best matches with score: [0-infinity) but since they items are ordered I think it will return top 10 items` `FacetBuilders.rangeFacet("top10Matches").field("score").addUnboundedTo(0).size(10)`

这很简单。现在我不知道如何获得下一个块，它是前一个方面停止的地方，大小为 100。我可能会检查结果中最后一项的分数，第一个方面返回并将其用作我的顶部范围，但如果有具有该精确分数的项目，它们将被跳过。

有没有办法用方面做我需要的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T21:25:59.317

有一种`setFrom(Int)`方法我可以使用。不需要刻面。

```
val queryString = client.get.prepareSearch()
  .setQuery(QueryBuilders.matchQuery(NODE_PATH_TO_SEARCH, query))
  .setFrom(currentPageNumber*MAX_DISPLAYABLE_RESULTS)
  .setSize(MAX_DISPLAYABLE_RESULTS)
queryString.execute().actionGet() 
```

# web-services - 为什么我的 WebService 客户端在使用服务时会向服务器请求 WSDL？

> ID：15956760
> 
> 赞同：0
> 
> 时间：2013-04-11T19:03:22.550
> 
> 标签：web-services, redirect, wsdl, cxf

我在 linux 下的 Websphere 容器中部署了一个 WS 客户端，它成功调用了由不同应用程序发布的 WebService（我使用了 CXF 实现）。当我在 Windows 下的 Tomcat 容器中尝试相同的客户端时，它的行为会有所不同：wireshark 捕获显示：

1.  在调用 web 服务调用之前，我的客户端从 URL A 的服务器请求 WSDL
2.  服务器将客户端重定向到不同的 URL B
3.  客户端从 URL B 获取 WSDL。
4.  由于 WSDL 引用了 XSD 文件，因此客户端从 URL B 请求 XSD，假设重定向也适用于 XSD 文件
5.  服务器响应未找到错误，通信失败

我的问题是：

*   A) 客户端怎么会假设 XSD 位于 URL B，但它实际上位于 URL A？
*   B) 为什么同一个客户端在 Linux 下的 Websphere 上运行时不要求 WSDL，而在 Windows 下的 Tomcat 上运行时却要求 WSDL？有什么方法可以阻止它请求 WSDL 从而避免重定向问题？

非常感谢提前！！！

# java - JScrollPane 和大小问题

> ID：15956763
> 
> 赞同：1
> 
> 时间：2013-04-11T19:03:29.233
> 
> 标签：java, swing, layout, user-interface, jpanel

关于处理“打包”JPanel 并允许滚动条的正确方法，我遇到了很大的问题。

我遗漏了一些代码，但我相信提供的内容就足够了。

问题是 JScrollBar 要么不显示，要么无法与之交互（如果我将滚动条设置为始终具有垂直条）。

这是描述此情况的图像：

![不存在滚动条][1]

ProjectPanel（扩展 JPanel）具有固定大小，并且如您所见，扩展得比可见视口更远。没有办法获得 JPanel (ProjectSelector) 的计算高度，因为 ProjectPanels 也可以这样转换：

![他们需要填充为网格][2]

如果有人可以帮助提供有关如何执行此操作的一些见解，那就太好了。到目前为止，我不惜一切代价不使用外部 API，因为这弊大于利。

**问题：**

如何将首选尺寸的高度设置为“灵活”，以便添加可以扩展的组件？如果这不理想/不可能，我怎么能正确地允许 JScrollPane 有效地显示 JPanel 的所有组件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T19:11:16.147

> 如果我不这样做，那么 Flow Layout 会水平组织它们

也许您应该使用 GridLayout。

如果没有，那么您可以尝试[Wrap Layout](http://tips4java.wordpress.com/2008/11/06/wrap-layout/)，它是一个 FlowLayout，可以根据需要换行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T19:25:13.873

如果您正在寻找不同的布局，为什么不尝试[MiGLayout](http://www.miglayout.com/)呢？它是一个非常强大和灵活的布局管理器。

[请参阅此处](https://stackoverflow.com/a/15851946/679982)的详细示例。

从该链接，重写`initUI`方法以查看您的问题感兴趣的行为：

```
public void initUI() {
    this.setPreferredSize(new Dimension(100, 100));
    this.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    this.setJMenuBar(initMenuBar());
    this.getContentPane().add(new JScrollPane(mainPanel = initMainPanel()));
    this.setLocationByPlatform(true);
    this.pack();        
} 
```

# php - 似乎无法使用 php 使电子邮件和名称字段可编辑

> ID：15956767
> 
> 赞同：1
> 
> 时间：2013-04-11T19:03:53.473
> 
> 标签：php, html, css

我对 PHP 非常陌生，并且不经常使用它，并且遇到了一些问题，我想知道有人可能知道答案。

[http://madaxedesign.co.uk/dev/contact.php](http://madaxedesign.co.uk/dev/contact.php)

上面的链接显示了我的问题，我似乎无法编辑并在空白处输入电子邮件和姓名，但消息文本区域似乎没问题。我不确定这是否是已编写的 php 或 css 的问题。

如果有人能看到任何其他错误，我将不胜感激，就像我说的那样，我对 PHP 的整个概念是新手。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T19:09:30.320

它是 CSS，`position:relative;`从本节中删除：

```
#popup #MessageSubmit {
 position: relative;
} 
```

# javascript - AngularJS 默认缓存 JSONP

> ID：15956768
> 
> 赞同：1
> 
> 时间：2013-04-11T19:03:54.147
> 
> 标签：javascript, angularjs, jsonp

我是 AngularJS 的新手，我正在编写一个应用程序，它通过 $http jsonp 方法接收带有回调的 JSON 数据。未设置缓存参数，但浏览器缓存数据。我该如何解决？

```
$scope.fetch=function () {
$http({method: 'JSONP', url: 'http://angularjs.org/greet.php?callback=JSON_CALLBACK&name=Super%20Hero'})
.success(function(data) {
$scope.current =  data.salutation.toLowerCase();
console.log($scope.current);
$scope.dim=$scope.current; doIt();}).error(function(data) { 
$scope.current =   data.salutation.toLowerCase() || "Request failed";   $scope.dim=$scope.current;}); 
```

};

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T19:06:26.337

不确定 Angular 到底在做什么，但这通常是通过在 url 上附加时间戳来完成的。从以下位置更改您的原始 URL：

```
'http://angularjs.org/greet.php?callback=JSON_CALLBACK&name=Super%20Hero' 
```

至：

```
'http://angularjs.org/greet.php?callback=JSON_CALLBACK&name=Super%20Hero&_=' + (new Date().getTime()) 
```

# c - 成功执行 3 行后出现分段错误

> ID：15956776
> 
> 赞同：1
> 
> 时间：2013-04-11T19:04:17.040
> 
> 标签：c, gcc, libc

这个程序工作，
它逐行读取一个大日志文件，读取3行后，它显示segmentation fault。

```
int main(int argc, char *argv[])
{
  char *line;
  FILE *my_stream;
  char *my_filename = "log";
  my_stream = fopen (my_filename, "r");
  while(fscanf (my_stream, "%s", &line)!= EOF)
  {
  printf ("==> %s\n", &line);
  }
  fclose (my_stream);   
  return 0;
 } 
```

输出

```
==> 123    ==> 12345    ==> 1234568 Segmentation fault 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-11T19:07:24.693

您还没有为`line`. 要么将其声明为：

```
char line[256]; 
```

或者`malloc`为它做一个。

`&`注意：如果您正在处理字符串（%s 格式说明符），则不需要在 scanf 和 printf 中

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-11T19:07:52.623

您需要`line`在堆栈或堆上分配空间。也不要将 line 的地址传递给`fscanf`and `printf`。

```
int main(int argc, char *argv[])
{
    char line[256];
    FILE *my_stream;
    char *my_filename = "log";
    my_stream = fopen (my_filename, "r");
    while(fscanf (my_stream, "%255s", line)!= EOF)
    {
        printf ("==> %s\n", line);
    }
    fclose (my_stream);

    return 0;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-11T19:08:23.640

您根本没有为该行分配任何空间。 `fscanf`因此，将您的日志文件的行写入某个随机位置的内存中，并破坏那里发生的任何事情。你幸运了三遍，然后它就爆炸了。

对于此任务，您最好使用[getline](http://linux.die.net/man/3/getline)。如果你没有，[fgets](http://linux.die.net/man/3/fgets)会做，但你需要为其分配一些空间。想想`char linebuf[SOME LARGE NUMBER]`。

[永远不要使用`*scanf`.](https://stackoverflow.com/questions/15664664/scanf-regex-c/15664816)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-11T19:09:19.617

在这一行中`char *line`，您为一个指向 char 的指针分配空间。在您的`fscanf`陈述中，您将整行文本读入该地址。您永远不会为使用 fscanf 读取的文本分配任何空间，因此您会覆盖大量用于其他事情的内存。

# android - 如何从 clickListener 中提取变量以在另一个 clickListener 中使用

> ID：15956787
> 
> 赞同：1
> 
> 时间：2013-04-11T19:04:42.317
> 
> 标签：android

我想要做的是有一个供用户选择的平台列表。通过单击一个平台，它会将相应的 sql 表名的名称放入一个变量中。但我不知道如何在我的提交按钮 clickListener 中使用该变量。这是我正在使用的代码部分。

```
String platformText;

platform.setOnItemClickListener(new OnItemClickListener()
{
   @Override
   public void onItemClick(AdapterView<?> arg0, View v, int position, long id)
   {
     String temp;

       if(position == 1)
       {
            temp = "ps3games";
       }
       else if(position == 2)
       {
            temp = "xbox360games";
       }
    }
});
platformText = temp;        

    submitButton.setOnClickListener(new OnClickListener()
{
     public void onClick(View v)
     {
             addProduct(platformText)
         }
    }); 
```

我已经删掉了对这个问题不重要的代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T19:06:45.000

尝试这个：

```
String platformText;

platform.setOnItemClickListener(new OnItemClickListener()
{
    @Override
    public void onItemClick(AdapterView<?> arg0, View v, int position, long id)
    {
        String temp;

        if(position == 1)
        {
            temp = "ps3games";
        }
        else if(position == 2)
        {
            temp = "xbox360games";
        }
        platformText = temp; 
      }
 });

submitButton.setOnClickListener(new OnClickListener()
{
     public void onClick(View v)
     {
         addProduct(platformText)
     }
}); 
```

你需要`platformTitle=temp`在你的内部设置`onClickListener`，你之前在它之外做。

# macos - 如何在 Mac 上的浏览 器中编写键盘点击脚本

> ID：15956793
> 
> 赞同：1
> 
> 时间：2013-04-11T19:04:57.657
> 
> 标签：macos, testing, scripting, macros, automation

标题说明了一切。我正在尝试在浏览器（最好是 Chrome）中编写键盘点击脚本。很简单，从当前页面中，我想通过 5 个元素来制表符，然后单击 enter，然后重复。

现在我正在使用 mac App “Fake” 的试用版，但对于我想要做的事情来说似乎过于复杂。我是 Mac 的新手，无法找出实现这一目标的最简单方法。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T01:08:34.413

我会看看[Sikuli](http://www.sikuli.org/)。它有很多优点：

*   附带一个不错的入门 IDE（或者，您可以在自己的编辑器中编写脚本）
*   您可以在 Jython 中编写 Sikuli 脚本，如果您已经了解（或想学习）Python，那就太好了
*   如果你想使用纯 Java，还有一个 Java API
*   Sikuli 对屏幕截图进行模糊匹配的能力非常强大
*   一旦您脱离 IDE（或想要将脚本插入持续集成系统），就可以从命令行运行脚本

# javascript - Javascript FF 和 IE

> ID：15956795
> 
> 赞同：-1
> 
> 时间：2013-04-11T19:04:59.737
> 
> 标签：javascript, html

我确实有以下脚本。它仅在 Chrome 中运行。我无法选中或激活该复选框。如何让它在 FF 和 IE 中运行？

```
<script type="text/javascript">
    function checkHoverButton() {
        var lis = document.getElementsByTagName('li');
        for( var i = 0, l = lis.length; i < l; i++ ) {
            lis[i].onclick = function() {

                var c = this.getElementsByTagName('input')[0];

                if ( c.checked ){
                    c.checked = 0;
                    this.style.background = 'white';    
                }
                else{
                    c.checked = 1;
                    this.style.background = '#eceff5';
                }
            };
        }
    }
</script>

<li class="friends-li">
  <span class="green">
     <input type="checkbox" value="<?php echo $value; ?>" id="form_friend_<?php echo $value; ?>" name="form[friend][]" />
  </span>
  <span class="pink">
    <img id="img_friend_<?php echo $value; ?>" src="">
  </span>
  <span class="blue">
    <label for="form_friend_<?php echo $value;?>" ><?php echo $label;?></label>
  </span>
</li> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T19:17:19.420

首先，我假设您`checkHoverButton`在代码中的某个地方调用。

问题是事件冒泡。

当您单击复选框或标签时，您基本上取消了该操作。您需要确保您没有点击这些元素。

```
lis[i].onclick = function(e) {

    var clickedOn = (e.srcElement || e.target).nodeName;
    if(clickedOn==="INPUT"||clickedOn==="LABEL") return;     
    var c = this.getElementsByTagName('input')[0]; 
```

- 编辑 -

```
lis[i].onclick = function(e) {

    var clickedOn = (e.srcElement || e.target).nodeName;
    var setState = clickedOn!=="INPUT" && clickedOn!=="LABEL";     
    var c = this.getElementsByTagName('input')[0];
    if (setState) {
        c.checked = !c.checked;
    }
    this.style.background = c.checked ? "#eceff5" : "#fff";
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T19:35:30.267

@epascarello 方法非常好。

我做了一个例子，也许它有帮助。

[JSFiddle](http://jsfiddle.net/fernandosavio/tT8a3/3/)

```
var lis = document.getElementsByTagName('li'),
      checkHandler = function(event){
           event.stopPropagation();
      },
      clickHandler = function (event) {
            var c = this.getElementsByTagName('input')[0];
                  c.onclick = checkHandler;
            if (c.checked) {
                  c.checked = 0;
                  this.classList.remove('darker');
                  this.classList.add('white');
            } else {
                  c.checked = 1;
                  this.classList.remove('white');
                  this.classList.add('darker');
            }
            return false;
      };

for (var i = 0, l = lis.length; i < l; i++) {
      lis[i].onclick = clickHandler;
} 
```

# ios - 另一个 ViewController 的 UIPopoverController 按钮选择方法但不更新其视图 iOS

> ID：15956801
> 
> 赞同：0
> 
> 时间：2013-04-11T19:05:27.850
> 
> 标签：ios, mkmapview, mapkit, uipopovercontroller

我有一个地图视图，其中有 2 种方法。

方法一：

```
-(void)refreshMap{
//Refresh code here....

} 
```

方法二：

```
-(void)recenterMap{

[theMap setCenterCoordinate:theMap.userLocation.location.coordinate animated:YES];

} 
```

我在 mapView 中有一个导航栏按钮，当按下它时会显示一个带有 2 个按钮的 popOverController，并且它的动作连接起来调用位于上面的 mapView 类中的方法

按下时弹出窗口中的 2 个按钮在我的 MapView 中调用上述 2 个方法。我已经记录了这些方法，它们确实被弹出框按钮调用，但位于弹出框后面的 mapView 视图永远不会更新。如果我直接在 MapView 中调用相同的方法，即不使用弹出窗口中的按钮，视图会按预期更新吗？

示例图像，即当我触摸中心地图时，bg 中的 ui 不会更新，但如果我不能从弹出窗口而是直接在地图视图中进行方法，则会更新：

![带有 Popover 的 mapView](https://i.stack.imgur.com/teljm.png)

# php - 使用从 iOS 设备发送的 multipart/form-data 检索 HTTP POST 变量

> ID：15956805
> 
> 赞同：2
> 
> 时间：2013-04-11T19:05:37.040
> 
> 标签：php, ios, objective-c, http-post

我需要检索从我的 iOS 应用程序发送的 POST 变量，但到目前为止我还没有运气。这里有一些背景：

我有一个 iOS 应用程序将图像和一些变量一起发布到 php 页面，该页面只是将变量保存在文件中（用于调试）并将图像移动到当前目录（服务器端）。我可以使用 $_FILE 变量毫无问题地处理图像，但是我似乎根本无法获得任何 POST 参数。

一些一般信息和我尝试过的内容：

*   尝试使用 $_POST 获取 post 变量，然后转储 $_POST ...它是空的
*   尝试转储 $HTTP_RAW_POST_DATA（尽管[此页面](http://www.php.net/manual/en/ini.core.php#ini.always-populate-raw-post-data)说使用 multipart/form-data 时未填充）
*   [看到这篇文章后](https://stackoverflow.com/questions/1075513/php-parsing-multipart-form-data)检查了“post_max_size”变量（它是 8MB，我在 KB 范围内发送）
*   使用wireshark验证变量确实被服务器接收

我正在使用[从这里修改的示例代码](https://stackoverflow.com/questions/8564833/ios-upload-image-and-text-using-http-post?answertab=votes#tab-top)

```
// create request
NSMutableURLRequest *request = [[NSMutableURLRequest alloc] init];
[request setCachePolicy:NSURLRequestReloadIgnoringLocalCacheData];
[request setHTTPShouldHandleCookies:NO];
[request setTimeoutInterval:30];
[request setHTTPMethod:@"POST"];

NSMutableDictionary* _params = [[NSMutableDictionary alloc] init];
[_params setObject:@"1.0" forKey:@"ver"];
[_params setObject:@"en" forKey:@"lan"];
[_params setObject:[NSString stringWithFormat:@"%@", @"myUserName"] forKey:@"userId"];

// the boundary string : a random string, that will not repeat in post data, to separate post data fields.
NSString *BoundaryConstant = @"V2ymHFg03ehbqgZCaKO6jy";

// string constant for the post parameter 'file'
NSString *FileParamConstant = @"media";

//Setup request URL
NSURL *requestURL = [[NSURL alloc] initWithString:@"http://myWebAddress/myAction.php"];

// set Content-Type in HTTP header
NSString *contentType = [NSString stringWithFormat:@"multipart/form-data; boundary=%@", BoundaryConstant];
[request setValue:contentType forHTTPHeaderField: @"Content-Type"];

// post body
NSMutableData *body = [NSMutableData data];

// add params (all params are strings)
for (NSString *param in _params) {
    [body appendData:[[NSString stringWithFormat:@"--%@\r\n", BoundaryConstant] dataUsingEncoding:NSUTF8StringEncoding]];
    [body appendData:[[NSString stringWithFormat:@"Content-Disposition: form-data; name=\"%@\"\r\n\r\n", param] dataUsingEncoding:NSUTF8StringEncoding]];
    [body appendData:[[NSString stringWithFormat:@"%@\r\n", [_params objectForKey:param]] dataUsingEncoding:NSUTF8StringEncoding]];
}

// add image data
NSData *imageData = UIImageJPEGRepresentation([self.imageButtonOutlet backgroundImageForState:UIControlStateNormal], 1.0);
if (imageData) {
    printf("appending image data\n");
    [body appendData:[[NSString stringWithFormat:@"--%@\r\n", BoundaryConstant] dataUsingEncoding:NSUTF8StringEncoding]];
    [body appendData:[[NSString stringWithFormat:@"Content-Disposition: form-data; name=\'%@\'; filename=\"image.jpg\"\r\n", FileParamConstant] dataUsingEncoding:NSUTF8StringEncoding]];
    [body appendData:[@"Content-Type: image/jpeg\r\n\r\n" dataUsingEncoding:NSUTF8StringEncoding]];
    [body appendData:imageData];
    [body appendData:[[NSString stringWithFormat:@"\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];
}

[body appendData:[[NSString stringWithFormat:@"--%@--\r\n", BoundaryConstant] dataUsingEncoding:NSUTF8StringEncoding]];

// setting the body of the post to the reqeust
[request setHTTPBody:body];

// set the content-length
NSString *postLength = [NSString stringWithFormat:@"%d", [body length]];
[request setValue:postLength forHTTPHeaderField:@"Content-Length"];

// set URL
[request setURL:requestURL];

NSURLConnection *postConnection = [[NSURLConnection alloc] initWithRequest:request delegate:self];
[postConnection start];
[postConnection release]; 
```

另外，这里是 myAction.php，就像它现在一样：

```
<?php

$fp_file = fopen("./output_files.txt", "w");
$fp_post = fopen("./output_post.txt", "w");

$post_content = var_export($_POST , TRUE);
$file_content = var_export($_FILES, TRUE);
fwrite($fp_file, $file_content);
fwrite($fp_post, $post_content);

fclose($fp_file);
fclose($fp_post);

move_uploaded_file( $_FILES['media']['tmp_name'], "test.jpg");

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T21:44:51.527

经过 4 小时的调试，问题出在我的 php 代码中……它已被编辑以反映更改。变量**$post_content**是用名称**$post_contnet**创建的。希望这至少可以作为其他尝试实现类似服务的代码指南。

你不能解决愚蠢的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T19:20:19.723

自己实现 HTTP 协议有什么理由吗？

那里有几个网络包

[https://github.com/AFNetworking/AFNetworking](https://github.com/AFNetworking/AFNetworking)

我相信支持多部分表单数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T04:41:43.430

使用以下代码上传我仅在此函数的最后一行进行了更改，您可以`NSURLConnection`根据您的要求设置委托。

```
-(void)upload
{
    // create request
    NSMutableURLRequest *request = [[NSMutableURLRequest alloc] init];
    [request setCachePolicy:NSURLRequestReloadIgnoringLocalCacheData];
    [request setHTTPShouldHandleCookies:NO];
    [request setTimeoutInterval:30];
    [request setHTTPMethod:@"POST"];

    NSMutableDictionary* _params = [[NSMutableDictionary alloc] init];
    [_params setObject:@"1.0" forKey:@"ver"];
    [_params setObject:@"en" forKey:@"lan"];
    [_params setObject:[NSString stringWithFormat:@"%@", @"myUserName"] forKey:@"userId"];

    // the boundary string : a random string, that will not repeat in post data, to separate post data fields.
    NSString *BoundaryConstant = @"V2ymHFg03ehbqgZCaKO6jy";

    // string constant for the post parameter 'file'
    NSString *FileParamConstant = @"media";

    //Setup request URL
    NSURL *requestURL = [[NSURL alloc] initWithString:@"http://myWebAddress/myAction.php"];

    // set Content-Type in HTTP header
    NSString *contentType = [NSString stringWithFormat:@"multipart/form-data; boundary=%@", BoundaryConstant];
    [request setValue:contentType forHTTPHeaderField: @"Content-Type"];

    // post body
    NSMutableData *body = [NSMutableData data];

    // add params (all params are strings)
    for (NSString *param in _params) {
        [body appendData:[[NSString stringWithFormat:@"--%@\r\n", BoundaryConstant] dataUsingEncoding:NSUTF8StringEncoding]];
        [body appendData:[[NSString stringWithFormat:@"Content-Disposition: form-data; name=\"%@\"\r\n\r\n", param] dataUsingEncoding:NSUTF8StringEncoding]];
        [body appendData:[[NSString stringWithFormat:@"%@\r\n", [_params objectForKey:param]] dataUsingEncoding:NSUTF8StringEncoding]];
    }

    // add image data
    NSData *imageData = UIImageJPEGRepresentation([self.imageButtonOutlet backgroundImageForState:UIControlStateNormal], 1.0);
    if (imageData) {
        printf("appending image data\n");
        [body appendData:[[NSString stringWithFormat:@"--%@\r\n", BoundaryConstant] dataUsingEncoding:NSUTF8StringEncoding]];
        [body appendData:[[NSString stringWithFormat:@"Content-Disposition: form-data; name=\'%@\'; filename=\"image.jpg\"\r\n", FileParamConstant] dataUsingEncoding:NSUTF8StringEncoding]];
        [body appendData:[@"Content-Type: image/jpeg\r\n\r\n" dataUsingEncoding:NSUTF8StringEncoding]];
        [body appendData:imageData];
        [body appendData:[[NSString stringWithFormat:@"\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];
    }

    [body appendData:[[NSString stringWithFormat:@"--%@--\r\n", BoundaryConstant] dataUsingEncoding:NSUTF8StringEncoding]];

    // setting the body of the post to the reqeust
    [request setHTTPBody:body];

    // set the content-length
    NSString *postLength = [NSString stringWithFormat:@"%d", [body length]];
    [request setValue:postLength forHTTPHeaderField:@"Content-Length"];

    // set URL
    [request setURL:requestURL];

    NSURLResponse *response = nil;
    NSError *err = nil;
    NSData *data = [NSURLConnection sendSynchronousRequest:request returningResponse:&response error:&err];
    NSString *str = [[NSString alloc] initWithBytes:[data bytes] length:[data length] encoding:NSUTF8StringEncoding];
    NSLog(@"Response : %@",str);
} 
```

并在`myAction.php`文件中编写以下`PHP`代码以读取您的参数

```
<?php
    echo "FileType :". $_FILES["media"]["type"] ;
    echo "FileName :". $_FILES["media"]["name"] ;
    echo "FileSize :".($_FILES["media"]["size"] / 1024)/100 ;
    echo "Version :".$_REQUEST["ver"];
    echo "Language :".$_REQUEST["lan"];
?> 
```

# asp.net - asp.net 中的路由问题无法在 asp.net 中实现动态路由

> ID：15956808
> 
> 赞同：0
> 
> 时间：2013-04-11T19:05:53.400
> 
> 标签：asp.net

我知道静态路由。但无法实现动态路由。ex www.shp.com/default.aspx?cat=1-p20 我需要这个看起来像这样 www.shp.com/product/productname 。

那么如何从数据库中获取数据，如何将此值传递给查询字符串。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T19:08:32.800

不确定您是不是这个意思，但是您可以使用 /controler/action{youVar} 之类的东西创建动态路由

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T21:30:39.937

你需要在global.asax中定义路由 你需要的路由格式为：www.shp.com/product/{productname} 产品名称可以在页面中使用Page.RouteData.Values集合获取

这是有关如何执行此操作的入门指南：http: [//msdn.microsoft.com/en-ca/library/dd329551 (v=vs.100).aspx](http://msdn.microsoft.com/en-ca/library/dd329551(v=vs.100).aspx)

# ios - 与附件ActionSegueTemplate 相关的异常

> ID：15956810
> 
> 赞同：1
> 
> 时间：2013-04-11T19:05:54.840
> 
> 标签：ios, ios5

我有例外`dequeueReusableCellWithIdentifier:`

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"pointcell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];// Here is exception 
    if( cell == nil)
    {
        cell = [[UITableViewCell alloc]initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }

    ...

    return cell;
} 
```

例外：

```
*** Terminating app due to uncaught exception 'NSUnknownKeyException', reason: '[<UITableViewCell 0xca51470> setValue:forUndefinedKey:]: this class is not key value coding-compliant for the key accessoryActionSegueTemplate.' 
```

我确实在情节提要中将标识符设置为自定义类型单元格。我在 Storyboard 中设置了 Accessory Action segue。我认为它与该特定类型有关，但我不明白我应该怎么做才能防止崩溃。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-17T08:37:57.737

似乎为时已晚，但我刚刚遇到了同样的问题并找到了解决方案。

当您在 Interface Builder 中从 UITableViewCell 控制 + 拖动 segue 时，它​​可以让您为单元格或附件视图创建 segue。如果您为附件视图创建它并在 iOS 5 下运行您的应用程序，您将遇到麻烦，因为该版本不支持附件 segues。

您可以改为从 ViewController 拖动一个 segue 并包含此代码（[取自此处](https://stackoverflow.com/a/13000184/629961)）：

```
- (void)tableView:(UITableView *)tableView accessoryButtonTappedForRowWithIndexPath:(NSIndexPath *)indexPath
{
    [self performSegueWithIdentifier:@"SegueID" 
                              sender:[tableView cellForRowAtIndexPath:indexPath]];
} 
```

# svg - 潮SDK + less.js + SVG 字体

> ID：15956811
> 
> 赞同：0
> 
> 时间：2013-04-11T19:05:56.507
> 
> 标签：svg, less, font-face, tidesdk

我刚开始尝试使用 TideSDK 将网站部署到 .exe 和 .app，这在很大程度上非常棒。

我目前遇到的问题是我所有的 CSS 样式都是使用 less.js 框架以 .less 样式编写的。在这里，我声明了自定义字体，当部署到标准 Web 浏览器时，它们适用于所有使用它们的元素。

当通过 Tide 部署时，除非我将所有样式从 .less 样式表中取出并将它们放回常规 .CSS 文件中，否则它似乎不会坚持下去，这让我相信 Tide 存在某种编译时更改在部署应用程序的实际视图时在内部使用。

我不知道如何解决这个问题。作为一个说明，我没有得到任何

```
[Error] Error finding 
```

来自潮汐控制台的错误，这让我相信.svg 正在被发现，只是没有应用。

更新：

看来我在 src: url('...') 中使用了错误的语法，所以 .less 文件中的 CSS 实际上是默默地失败了。我现在收到一个非常奇怪的 [Error] Error Finding... .svg 文件。这行 CSS 中的 URL 由 app: 3 次添加。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T16:45:35.207

经过几个小时的研究，我终于弄明白了。使用这些框架的组合时需要注意以下几点：

1.  less.js 在使用时会吐出非常奇怪的路径目录

    src: url('...');

    作为解决方案，您可以使用 less 中可用的 import 指令，并将 @font-face 声明放在该 .css 样式表中。通过导入一个普通的 .css 样式表，您告诉 less.js 将其视为常规 .css，并且不会发生吐出的混合 url。

    @import "../css/style.css";

2.  在放置导入指令并确认 SVG 确实是在 Chrome 检查器中的 Resources - Fonts 下生成后，我继续查看 SVG 文件本身以确定 SVG 文件的 CSS 命名约定是否有问题. 根据这个[答案](https://stackoverflow.com/questions/14404352/google-webfonts-with-tidesdk/14817492#14817492)，以及其中的[博客文章](http://www.neologotech.com/2013/03/19/custom-fonts-in-windows-desktop-apps-created-with-tidesdk-1-3-1-beta/)，您的 SVG 名称应该使用：

    字体系列

来自 SVG 元数据的命名方案中的值

```
src: url('YourSVGFont.svg#Silkscreen') format('svg'); 
```

实际上，您应该使用字体ID，至少在我的情况下这是解决方案：

```
src: url('YourSVGFont.svg#slkscrb') format('svg'); 
```

这是嵌入在博客文章中的[图像](http://www.neologotech.com/wp-content/uploads/2013/03/font_family.png)，以便您可以看到我在说什么，并查看这两个名称在 SVG 元数据中的位置。

# cakephp - 在模型回调中获取模型数据的正确方法

> ID：15956816
> 
> 赞同：1
> 
> 时间：2013-04-11T19:06:26.243
> 
> 标签：cakephp, cakephp-2.0

在 afterSave 中，获取有关`$this`.

例如。如果我`debug($this->read())`，我会得到我需要知道的关于我正在使用的当前记录的所有信息（相关模型等）。

```
array(
    'Comment' => array(
        'id' => '12',
        'user_id' => '38'
        'body' => 'test',
        'created' => '2013-04-11 18:56:26',
        'modified' => '2013-04-11 18:56:26'
    ),
    'User' => array(
        'password' => '*****',
        'id' => '38',
        'username' => 'example',
        'created' => '2013-01-26 18:25:39',
        'modified' => '2013-01-26 18:25:39',
        'first_name' => '',
        'last_name' => ''
    )
) 
```

但这是否意味着我要再次查询数据库？不应该`$this`已经包含所有这些信息吗？

获得结果的`$this->read()`正确方法是什么，或者这是正确的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T19:28:02.080

这是正确的方法 ( `$this->read`)，*具体取决于*您想要有关刚刚保存的记录的信息。例如，如果您正在执行插入操作，并且您的 $data （使用 like `Comment->save($data)`）是：

```
array(
    'Comment' => array(
        'id' => '12',
        'user_id' => '38'
        'body' => 'test',
        'created' => '2013-04-11 18:56:26',
        'modified' => '2013-04-11 18:56:26'
    ),
    'User' => array(
        'password' => '*****',
        'id' => '38',
        'username' => 'example',
        'created' => '2013-01-26 18:25:39',
        'modified' => '2013-01-26 18:25:39',
        'first_name' => '',
        'last_name' => ''
    )
) 
```

我的意思是*完全*一样的，那么`$this->data`仍然会有你刚刚保存的相同信息。`$this->data`仅在 之后才设置为 false `afterSave`。

但是，如果你做类似的事情

```
$this->Comment->saveField('body', 'othertest'); 
```

`$this->data`afterSave 中的数组将只包含类似

```
Array
(
    [id] => 6
    [body] => 'othertest'
    [modified] => 2013-04-11 15:17:45
) 
```

换句话说，如果您想获取与模型相关的*所有*信息，而不考虑作为参数在 save() 中传递的数据，则必须执行 $this->read()（或 find()）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T19:21:13.400

您应该能够像这样访问数据：

```
public function afterSave($var = null){
    parent::afterSave($var);
    echo '<pre>';
    print_r($this->data);
    echo '</pre>';
    die();
} 
```

尝试该代码并查看输出。这将使您可以访问已发布的数据，如果保存成功，这些数据应该与记录匹配。另外，您使用的是什么版本的 CakePHP，您想做什么？

读起来还是不错的。

# networking - P2P 应用程序中的自动发现

> ID：15956819
> 
> 赞同：5
> 
> 时间：2013-04-11T19:06:35.927
> 
> 标签：networking, language-agnostic, p2p, autodiscovery

我想在互联网上创建一个 P2P 应用程序。什么是最好的，或者如果没有足够好的方法来自动发现分散网络中的其他节点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-11T21:15:30.943

来自[GNUnet](https://gnunet.org/)项目（一个匿名的抗审查文件共享网络）的[Grothoff 和 GauthierDickey研究了在没有任何中央主机列表的情况下引导 p2p 网络的问题。](https://gnunet.org/sites/default/files/bootstrap.pdf)

他们发现，对于 Gnutella (Limewire) 网络，随机 ip 搜索平均需要 2500 次连接尝试才能找到对等点。

在论文中，他们提出了一种方法，可以将 Gnutella 所需的连接尝试次数减少到 817 次，而 E2DK 网络则减少到 51 次。

这是通过为每个 DNS 组织创建 p2p 用户的统计配置文件来实现的，这个小型（大约 100kb）发现数据库必须提前创建并与 p2p 客户端一起提供。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-11T19:31:37.593

这是 P2P 的圣杯。真的没有什么神奇的解决方案——如果没有一个众所周知的点作为参考，节点是不可能发现其他节点的（嗯，你可以在局域网上使用广播，但不能在互联网上这样做）。P2P 文件共享往往通过让已知网站分发“起点”来进行发现，然后进一步的发现（我希望）可以来自询问节点他们知道哪些其他节点。

开始研究的一个好地方是[分布式哈希表](https://en.wikipedia.org/wiki/Distributed_hash_table)。

至于安全性，我认为该主题将出现在文献中的某个地方——我再次推荐维基百科。不存在的会被简单地处理：如果您无法联系 IP/端口，请不要将其保留在列表中，并且如果节点定期提供不存在的指针，请考虑取消优先级或将其从您的完整列出。

对于邪恶节点，这取决于您的用例，但假设您正在进行文件共享。如果您请求文件的一部分，请与多个节点检查文件部分的哈希应该是什么，然后通过哈希请求。如果邪恶节点为您提供了具有不同哈希的块，那么您可以再次取消优先级或忘记该节点。

分布式处理系统的工作方式略有不同：它们倾向于要求几个不相关的节点执行相同的工作，然后使用投票系统（可能再次使用散列）来确定邪恶是否在手。如果某个节点始终提供错误的结果，则会联系管理员或将 IP 从已知节点列表中删除。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T19:41:43.117

好的，为了让两个对等方找到彼此，他们都必须知道一个共同的，比如说，调解员交换一次 IP。您可以在这种第一次握手中使用任何东西，同时能够从该“通道”进行写入和读取。即：DNS（您的知名域）、电子邮件、IRC、Twitter、Facebook、Dropbox 等。

# memory-leaks - LoadRunner 和调步的需要

> ID：15956821
> 
> 赞同：0
> 
> 时间：2013-04-11T19:06:48.150
> 
> 标签：memory-leaks, loadrunner

运行一个只有两个用户的单个脚本作为一个**没有任何节奏**的场景，只需将时间设置为 3 秒和随机 (50%-150%) 我体验到 Web 应用程序服务器每次运行 10 分钟后都会耗尽内存（我已经运行了几次测试，并且每次都在同一时间发生）。首先，我认为这是应用程序中的内存泄漏，但经过一番思考，我认为这可能与场景设计有关。整个脚本只有一个动作，包括在唯一的动作块中登录和注销，运行大约需要 50 秒，我*在上一次迭代结束后立即*设置默认值，而不是在*上一次迭代结束后延迟*或*固定/随机间隔*设置。

不能使用*固定/随机间隔*会导致这种“内存泄漏”发生吗？我猜提到的所有设置实际上都不会在前一个结束之前开始一个新的迭代，这显然会导致服务器上的内存积累导致这种“内存泄漏”。但是，如果没有设置节奏，是否有发生这种情况的风险？

而且我的脚本中没有迭代，我还能使用起搏吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T23:00:36.437

回答你的最后一个问题：不。

当一个新的迭代开始时，Pacing 被显式使用。根据起搏设置延迟迭代开始。

推测/结论：

如果网络服务器真的在 10 分钟后内存不足，而你只有 2 个 vu，那么你的网络服务器端就有问题了。可以手动实现这种 2vu 加载并使 Web 服务器崩溃。脚本中的节奏或手动用户速度无关紧要。如果网络服务器可以从远程崩溃，它有需要修复的错误。

建议：

尝试使用 4 个用户运行场景。5 分钟后，您是否在网络服务器上出现内存不足？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-03T19:40:41.423

如果确实存在泄漏，则您的脚本/场景不应该导致它，但我认为您可能会根据您运行它的方式更快地导致它出现问题。

例如，假设有 5 个用户和合理的节奏和思考时间，服务器在 16 小时内不会死机。但是如果有 50 个用户，它会在 2 小时内死掉。问题不是你造成的，只是早点暴露。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-09T08:59:16.097

我希望它的网络服务器问题。起搏只是迭代之间的时间间隔，它不会影响脚本中的操作或事务

# java - MP4 视频无法在 Android 2.3 上播放

> ID：15956822
> 
> 赞同：0
> 
> 时间：2013-04-11T19:06:48.373
> 
> 标签：java, android, video-streaming, android-videoview, avd

我有一个 videoView，我想在其中显示来自 URL 的 MP4 视频。我在 Andoird 4.0.2 模拟器上试过，效果很好。然而，在 A GingerBread 硬件上尝试它时，它崩溃了。我还在 Gingerbread 模拟器上尝试过，认为我的设备可能有问题，但仍然没有进展。当我点击播放按钮时，logcat 会一次又一次地重复这些操作。

`04-11 23:49:27.438: V/VideoViewDemo(413): path: http://173.193.24.66/~kanz/video/mp4/9.mp4 04-11 23:49:28.796: D/MediaPlayer(413): Couldn't open file on client side, trying server side 04-11 23:49:38.207: D/MediaPlayer(413): getMetadata 04-11 23:49:39.343: W/MediaPlayer(413): info/warning (701, 0) 04-11 23:49:39.346: I/MediaPlayer(413): Info (701,0) 04-11 23:49:45.556: W/MediaPlayer(413): info/warning (702, 0) 04-11 23:49:45.556: I/MediaPlayer(413): Info (702,0) 04-11 23:51:11.467: W/MediaPlayer(413): info/warning (701, 0) 04-11 23:51:11.467: I/MediaPlayer(413): Info (701,0) 04-11 23:51:22.096: W/MediaPlayer(413): info/warning (702, 0) 04-11 23:51:22.096: I/MediaPlayer(413): Info (702,0) 04-11 23:51:25.636: W/MediaPlayer(413): info/warning (701, 0) 04-11 23:51:25.636: I/MediaPlayer(413): Info (701,0) 04-11 23:51:37.127: W/MediaPlayer(413): info/warning (702, 0) 04-11 23:51:37.127: I/MediaPlayer(413): Info (702,0) 04-11 23:51:41.717: W/MediaPlayer(413): info/warning (701, 0) 04-11 23:51:41.717: I/MediaPlayer(413): Info (701,0) 04-11 23:51:54.086: W/MediaPlayer(413): info/warning (702, 0) 04-11 23:51:54.097: I/MediaPlayer(413): Info (702,0)`

它没有显示任何错误，因此我可以知道是哪一行导致了问题。这是播放按钮的代码：

```
try {
        final String path = mPath.getText().toString();
        Log.v(TAG, "path: " + path);
        if (path == null || path.length() == 0) {
            Toast.makeText(MainActivity.this, "File URL/path is empty",
                    Toast.LENGTH_LONG).show();

        } else {
            // If the path has not changed, just start the media player
            if (path.equals(current) && mVideoView != null) {

                mVideoView.setVideoURI(Uri.parse("http://173.193.24.66/~kanz/video/mp4/9.mp4"));

                mVideoView.requestFocus();

                mVideoView.start();
                return;
            }
             current = path;

            mVideoView.setVideoURI(Uri.parse(getDataSource(path)));

            mVideoView.requestFocus();
            mVideoView.start();

        }
    } catch (Exception e) {
        Log.e(TAG, "error: " + e.getMessage(), e);
        if (mVideoView != null) {
            mVideoView.stopPlayback();
        }
    }
} 
```

任何帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T19:15:10.440

您可能想尝试此代码，

```
String videoSource = "http://173.193.24.66/~kanz/video/mp4/9.mp4";

myVideoView.setMediaController(new MediaController(this));
myVideoView.setVideoPath(videoSource);
myVideoView.requestFocus();
myVideoView.setOnPreparedListener(new MediaPlayer.OnPreparedListener() {
  public void onPrepared(MediaPlayer mp) {
    myVideoView.start();
  }
}); 
```

# jquery - fancybox 2 afterClose 没有触发

> ID：15956824
> 
> 赞同：1
> 
> 时间：2013-04-11T19:06:54.307
> 
> 标签：jquery, fancybox, fancybox-2

我在触发 afterClose fancybox 2.1.4 事件时遇到问题。

我有一个像这样的初始化脚本

```
$.fancybox({
  maxWidth    : 900,
  maxHeight   : 600,
  fitToView   : false,
  width       : '70%',
  height      : '70%',
  autoSize    : false,
  closeClick  : false,
  openEffect  : 'none',
  closeEffect : 'none',
  afterClose  : function() {
    alert('Hi!');
    return;
  }
}); 
```

我有一个 DIV，它触发一个用 HTML 数据填充 DIV 的函数

```
<div onclick="projectDetail('+project.id+')">View Details</div> 
```

填充fancybox内容DIV的触发函数是这个

```
function proyectDetail(id) {
  var project = $('#project');

  var result = '<h2>Lorem ipsum dolor sit amet</h2>\
                 <p>\
                   Lorem ipsum dolor sit amet, consectetur adipiscing elit.\
                 </p>';
  project.append(result);

  $.fancybox(project);
} 
```

问题是**afterClose**事件没有被触发！

我只需要单击该 div，打开 fancybox 并在 fancybox 关闭后清除内容，因为弹出窗口可能会填充不同的数据，具体取决于给定的项目 ID。

谢谢指教！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T20:25:02.327

`afterClose`不会因为您没有设置而被解雇。你这样打开fancybox

```
$.fancybox(project); 
```

...但为了触发`afterClose`，您必须将其设置为该函数中的 API 选项，例如

```
$.fancybox(project, {
    afterClose: function () {
        alert("you have closed fancybox");
    }
}); 
```

见**[JSFIDDLE](http://jsfiddle.net/EaE4k/1/)**

# java - 覆盖等于不工作

> ID：15956826
> 
> 赞同：2
> 
> 时间：2013-04-11T19:07:03.210
> 
> 标签：java, overriding, equals

这是我的问题：当我尝试覆盖“我的班级”的equals方法时，它根本不起作用，调用的函数是最抽象的，而不是“我的班级”的equals方法！这是我的程序的一些代码：这是“我的班级”等于代码：

```
@Override
public boolean equals(Object o){
    StudentProxy s = (StudentProxy)o;
    return Matricola == s.Matricola && Name == s.Name && Surname == s.Surname;
} 
```

这是我的断言失败的地方：

```
@Test
public void storeStudentTest() throws Exception{
    StudenteProxy s = new StudenteProxy(100, "Gianni", "Rosso", 27.2, 132);
    DB.storeStudent(s);
    StudentProxy ret = (StudentProxy)DB.retrieveStudentData(s.getMatricola());
    DB.deleteStudent(s);
    assertEquals(ret, s); // HERE ! ! ! 
} 
```

我也尝试过 assertTrue ：

```
assertTrue(ret.equals(s)); 
```

但我得到 AssertionError; 我认为这是由于调用了最抽象的equals这一事实引起的，并且由于这两个对象不是同一个对象，因此它给了我消息AssertionError。

有任何想法吗？？？:(

PS：它们应该是等于我已经以不同的方式检查了很多次所以这不是问题，我已经多次测试了这段代码，发现问题是equals没有覆盖;）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-11T19:12:06.507

没有更多信息很难判断，但您的`Matricola`,`Name`和`Surname`字段似乎是`Object`s，可能是`String`s。在这种情况下，您应该像这样比较它们：

```
return Matricola.equals(s.Matricola) && Name.equals(s.Name) && Surname.equals(s.Surname); 
```

否则，您正在比较参考。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T19:09:47.893

为了比较 String 你应该使用 equals

# ruby-on-rails - 如何避免将文件保存到会话（带有 CarrierWave 文件的多步表单）

> ID：15956834
> 
> 赞同：1
> 
> 时间：2013-04-11T19:07:36.633
> 
> 标签：ruby-on-rails, ruby, carrierwave

我正在实现一个多步表单 - 如[#217 Multistep Forms - Railscasts](http://railscasts.com/episodes/217-multistep-forms)所示- 并遇到了一个错误：

```
can't dump File 
```

以下是`new`和`create`行动：

```
def new
  session[:batch_params] ||= {}
  @batch = current_user.batches.build

  respond_to do |format|
    format.html # new.html.erb
    format.json { render json: @batch }
  end
end

def create
  session[:batch_params].deep_merge!(params[:batch]) if params[:batch]
  @batch = current_user.batches.build(session[:batch_params])

  if @uploaded
    @batch.file = @uploaded
  end

  @batch.current_step = session[:batch_step]

  if params[:back_button]
    @batch.previous_step
  elsif @batch.last_step?
    @batch.file = session[:file]
    @batch.save
  else
    @batch.next_step
  end
  session[:batch_step] = @batch.current_step

  if @batch.new_record?
    render 'new'
  else
    session[:batch_step] = session[:batch_params] = nil
    flash[:notice] = "Batch was successfully created"
    redirect_to @batch
  end
end 
```

问题是：文件需要在第一步更新，因为我需要读取它并获取要在第二步中使用的行数。所以我试图在会话中存储一个文件，并且由于无法对其进行序列化，所以我收到了这个错误。

如何避免这样做？我相信我应该在第一步上传文件，然后只需将其网址提供给以下步骤；这是对的吗？

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T20:12:44.097

我建议您在第一个表单上创建记录，并使用状态机跟踪对象的步骤，直到您在最后一个表单上完全构建它。宝石之类的`state_machine`将允许您按步骤进行验证。唯一的问题是您可能（将）以未完成的提交结束。您可以定期清理它。

# sql-server - 插入失败后身份密钥丢失计数

> ID：15956842
> 
> 赞同：0
> 
> 时间：2013-04-11T19:08:15.603
> 
> 标签：sql-server, entity-framework-5

我正在使用 MVC4 whit 实体框架 5，当服务器返回插入错误时，因为表具有唯一的电子邮件，我不想丢失 ID 号。在尝试插入之前，我需要检查此电子邮件是否存在，或者实体框架有任何其他方法来覆盖任何失败错误并重置身份种子计数器。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-06T20:47:58.587

[如本文](http://sqlity.net/en/792/the-gap-in-the-identity-value-sequence/)所示，没有办法防止身份生成号码出现空白，这是主要原因之一；

> 为了实现事务身份值管理，会话需要在事务期间锁定身份值本身。这将强制所有插入连续执行，并且几乎不存在并发。

关于 bigint 值的短缺，在大多数情况下，您的数据库将在即将发生之前面临大量问题。

希望这会有所帮助。

# html - 我怎样才能使它在第二个文本框中创建第二个随机数

> ID：15956843
> 
> 赞同：0
> 
> 时间：2013-04-11T19:08:21.523
> 
> 标签：html

**我不知道如何做到这一点，所以它会生成两个不同的数字并将其放入两个不同的文本框中我已经尝试了很多但我无法得到它**

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
 <html xmlns="http://www.w3.org/1999/xhtml">
 <head>
 <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
 <title>Dice Game</title>
 <style type="text/css">
 body,input{font-family:sans-serif; color:#FF0000; background-color:#990000#000000; }
 </style>
 <script type="text/javascript"language="javascript">
 function roller(){
 var num=Math.ceil(Math.random()*6);
 document.myForm.output.value=num;
 }

 </script>
 </head>

 <body>
 <form id="myForm" name="myForm"method="post"action="">
 <input type="button" name="Roll" id="Roll" value="Button" onclick="roller()"/>

 <br/>

 <input type="text" name="output" size="16" disabled="disabled" id="output"/>

 <form id="myForm" name="myForm"method="post"action="">

 <br/>

 <input type="text" name="output" size="16" disabled="disabled" id="output"/>

 </form>
 </body>
 </html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T19:20:16.230

您的 HTML 比它需要的长得多。我把它清理干净并放在小提琴中：http: [//jsfiddle.net/HxzcC/](http://jsfiddle.net/HxzcC/)

HTML：

```
<button id="roll" onclick="roller()">Roll</button>
<br/>
<input type="text" id="input1" size="16" disabled="disabled" />
<input type="text" id="input2" size="16" disabled="disabled" /> 
```

JavaScript：

```
function roller(){
    var num = Math.ceil(Math.random()*6);
    document.getElementById('input1').value = num;
    var num = Math.ceil(Math.random()*6);
    document.getElementById('input2').value = num;
} 
```

# entity-framework - 错误的日期时间返回

> ID：15956851
> 
> 赞同：0
> 
> 时间：2013-04-11T19:08:40.970
> 
> 标签：entity-framework

我的数据库有 5 行数据：

1.  {02/17/2013 00:00:00}
2.  {04/15/2013 00:00:00}
3.  {06/17/2013 00:00:00}
4.  {08/26/2013 00:00:00}
5.  {12/30/2013 00:00:00}

但是当我这样做时：

```
_db.Quarter
.Where(q => q.Begin <= DateTime.Now)
.ToList(); 
```

使用 DateTime.Now = {04/16/2013 16:02:26} 它只返回一个结果：{02/17/2013 00:00:00}

我的 EF 版本是 4.3.1。

疑问一：DateTime.Now 使用数据库服务器时钟还是应用服务器时钟？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T19:10:37.133

不确定我是否遗漏了什么，但所有其他日期都在未来（`Datetime.Now()`4 月 11 日）。我希望你得到的结果......

# maxima - 如何简化 cos(pi)？

> ID：15956853
> 
> 赞同：5
> 
> 时间：2013-04-11T19:08:42.870
> 
> 标签：maxima

我是 Maxima 的新手，想将它用于 Denavit-Hartenberg 矩阵（由许多 cos 和 sin 项组成）。问题是，最大值并没有简化以下表达式：

```
ex: x*cos(pi); 
```

我希望，Maxima 简化`ex`为`-x`. 这是怎么做到的？（`ratsimp(ex)`并且`trigsimp(ex)`没有效果）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-12T15:11:32.840

在千里马方言中，常数的正确名称是`%pi`. 有了它，它应该可以正确简化。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-18T10:58:31.453

正如其他人所说，`%pi`是Maxima中常量的正确名称。 `pi`在像 wxMaxima 这样的 GUI 中简单地呈现为 π，因为所有希腊字母都是（你可以有一个名为“π”的变量，它与常数 π=3.14159 的值无关......）。

顺便说一句，其他预定义的常量也用该`%`字符编写，例如

```
%e (=exp(1))
%i (=sqrt(-1))
%phi (the golden section) 
```

该手册的[索引](http://maxima.sourceforge.net/docs/manual/en/maxima_82.html#SEC380_3 "指数 ％")列出了所有`%`候选人。

请注意其他不能用数字表示的[有用常量](http://maxima.sourceforge.net/docs/manual/en/maxima_5.html#SEC20 "5.3.1 常量的函数和变量")`inf`，例如或`false`没有百分号字符。

# regex - 正则表达式删除某个字符之前的字符？

> ID：15956857
> 
> 赞同：0
> 
> 时间：2013-04-11T19:08:53.783
> 
> 标签：regex, perl

我对正则表达式很陌生，说实话，这让我很困惑。在所述字符串中达到某个字符后，我需要抓取该字符串。我认为最简单的方法是使用正则表达式，但是就像我说的那样，我对它很陌生。任何人都可以帮助我或指出正确的方向吗？

例如：我需要检查字符串“23444:thisstring”并将“thisstring”保存到一个新字符串中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T19:20:06.307

如果这是你的字符串：

```
I'm very new at regex, and to be completely honest it confounds me 
```

并且您想在第一个“c”之后获取所有内容，那么这个正则表达式将起作用：

```
/c(.*)/s 
```

它将在第一个匹配的组中返回此匹配：

```
"ompletely honest it confounds me" 
```

在这里的正则表达式测试器上试试：[正则表达式测试器](http://www.solmetra.com/scripts/regex/index.php)

解释：

*   `c`是你要找的角色
*   `.*`(与`/s`) 匹配剩下的所有内容
*   `(.*)`捕获`.*`匹配的内容，使其`$1`在列表上下文中可用并返回。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T19:19:38.483

> 用于删除某个字符之前的字符的正则表达式！

您可以像这样使用前瞻

```
.*(?=x) 
```

其中 x 是特定字符或单词或字符串。{使用`.`, `$`, `^`,等字符在正则表达式`*`中`+`具有特殊含义，因此在 x 中使用时不要忘记转义}

* * *

**编辑**

对于您的示例字符串，它将是

```
.*(?=thisstring) 
```

`.*`匹配 0 到多个字符直到`thisisstring`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T19:21:21.760

这是匹配“之前”之后的所有内容的单行解决方案

```
print $1."\n" if "beforeafter" =~ m/before(.*)/; 
```

编辑：虽然可以使用lookbehind，但这不是必需的。分组提供了一种更简单的解决方案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-11T19:26:54.990

要获取之前的字符串：在您的示例中，您必须使用`[^:][^:]*:\(.*\)`. 请注意，您应该至少有一个`[^:]`后跟任意数量的`[^:]`s，后跟一个实际的 :，即您要搜索的字符。

# http-status-code-404 - ServiceStack 更新导致所有服务为 404

> ID：15956859
> 
> 赞同：0
> 
> 时间：2013-04-11T19:08:58.557
> 
> 标签：http-status-code-404, servicestack

我们已经运行 servicestack 很长一段时间了，并且刚刚开始使用它来更新 OrmLite 和核心 ServiceStack 库。

更新前一切正常，但现在元页面和所有服务返回 404 - 未找到页面。

查看 web.config 没有任何改变。

为什么现在返回 404 页，我该如何解决？

网络配置：

```
<?xml version="1.0" encoding="utf-8"?>
<configuration>
  <system.web>
    <compilation debug="true" targetFramework="4.0" />
    <httpHandlers>
      <add path="*" type="ServiceStack.WebHost.Endpoints.ServiceStackHttpHandlerFactory, ServiceStack" verb="*" />
    </httpHandlers>
  </system.web>
  <runtime>
    <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
      <dependentAssembly>
        <assemblyIdentity name="MySql.Data" publicKeyToken="c5687fc88969c44d" culture="neutral" />
        <bindingRedirect oldVersion="0.0.0.0-6.5.4.0" newVersion="6.5.4.0" />
      </dependentAssembly>
    </assemblyBinding>
  </runtime>
  <system.webServer>
    <modules runAllManagedModulesForAllRequests="true" />
    <validation validateIntegratedModeConfiguration="false" />
    <handlers>
      <add path="*" name="ServiceStack.Factory" type="ServiceStack.WebHost.Endpoints.ServiceStackHttpHandlerFactory, ServiceStack" verb="*" preCondition="integratedMode" resourceType="Unspecified" allowPathInfo="true" />
    </handlers>
  </system.webServer>
</configuration> 
```

AppHost 位于此处的要点：[https ://gist.github.com/JohnACarruthers/5366462](https://gist.github.com/JohnACarruthers/5366462)

Routes 404ing 似乎是所有这些，特别是元数据和 REST url。

ServiceStack 通过 apache 托管在 mono 的 fastcgi 服务器上，两者的配置都没有改变。

我们现在使用当前的 nuget 包（3.9.43.0）并且在 3.9.25.0 上。

更新：Mysql.Data 在执行原始 SQL 时抛出了 OverflowException。回滚到旧版本，事情似乎又可以工作了。Mysql.Data 的错误版本是 6.6.4.0。

# c# - 访问其他模型的 UI 元素

> ID：15956864
> 
> 赞同：1
> 
> 时间：2013-04-11T19:09:18.523
> 
> 标签：c#, asp.net-mvc

在我的 ASP.NET MVC 4 Web 应用程序中，我有两个模型：

1.  `Block`有一个属性`Block LinkedBlock`。
2.  `BlockCollection`其中包含多个`Block`. 保证中的每个`Block`实例也在.`Block.LinkedBlock``BlockCollection`

现在，我想做的是：
如果 a`Block`有一个链接块，它应该得到一个`onchange`处理程序，将链接块的文本设置为该块的文本。

现在，原则上，这非常简单：

```
if (Model.LinkedBlock != null)
{
    var onChange = string.Format("setText({0}, this.text);", linkedBlockId);
    @Html.TextBoxFor(m => m.Text, new { onchange = onChange });
} 
```

```
<script type="text/javascript" language="javascript">
    function setText(id, text) {
        $("#" + id).val(text);
    } 
```

但问题是，我不知道如何获取链接块的正确 HTML ID。

我如何得到它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T19:27:44.827

渲染链接块时，只需将所需的任何 ID 添加到 HTML 帮助程序，例如：

```
@Html.TextBoxFor(m => m.Text, new { id = blockId }); 
```

您的唯一 ID在哪里`blockId`，比如数据库中的 ID 记录。稍后，您可以在构建`onChange`处理程序调用时引用此 ID。就像是：

```
var onChange = string.Format("setText({0}, this.text);", Model.LinkedBlock.ID); 
```

如果您提供更多上下文，我可以为您提供更多示例代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T19:38:13.820

在块模型中，您应该有一个 Id 属性。然后根据您的观点，您可以引用该 ID。例如：

```
class Block
{
    public Block LinkedBlock { get; set; }
    public int Id { get; set; }
} 
```

您的视图必须是强类型的：

```
@model Models.Block 
```

或以下取决于您在做什么：

```
@model Models.BlockCollection 
```

然后将您的代码更改为（只需添加对链接块的引用）：

```
if (Model.LinkedBlock != null)
{
    var onChange = string.Format("setText({0}, this.text);", Model.LinkedBlock.Id);
    @Html.TextBoxFor(m => m.Text, new { onchange = onChange });
} 
```

您显然必须确保所有linkedBlocks 都在页面上，并带有各自的ID。

这有帮助吗？

# javascript - 在 Angular 和 IE8 中访问查询参数

> ID：15956873
> 
> 赞同：0
> 
> 时间：2013-04-11T19:09:36.560
> 
> 标签：javascript, angularjs

我想以有角度的方式访问查询参数，但无法让它在 IE8 中工作 - 使用 Angular v1.0.3。

我正在设置 html5 模式：

```
var app = angular.module('app', [], function($locationProvider) {
 $locationProvider.html5Mode(true);
}); 
```

在我的指令中：

```
scope.location = $location;
scope.$watch('location.search()', function() {
    console.log($location.search());
}, true); 
```

在普通浏览器中工作正常，但不确定如何修复 IE8 - 谷歌帖子不清楚或旧。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T19:33:01.380

啊 - hashbang 模式：[http](http://docs.angularjs.org/guide/dev_guide.services) ://docs.angularjs.org/guide/dev_guide.services .$location

```
http://localhost/#?id=blah instead of http://localhost/?id=blah 
```

# php - PHP中的可变输入参数

> ID：15956879
> 
> 赞同：2
> 
> 时间：2013-04-11T19:10:00.510
> 
> 标签：php, variables, input

我有一个半 PHP/半算法问题。我将有 0 到 4 之间的随机输入。它们将用于相同的查询，例如

```
 <?php  SELECT * FROM `table` WHERE inputs in (input0,input1,input2)  //for 3 inputs
          SELECT * FROM `table` WHERE inputs in (input0,input1)  //for 2 inputs
         //do nothing for zero inputs ?> 
```

我相信这是起点。

```
 <?php
 function myfunc(){
   $args = func_get_args();
  foreach ($args as $arg)
   echo $arg."/n";
 }
  myfunc('hello', 'world', '.');
      ?> 
```

现在我想我可以为 n 个单独的输入运行 n 次 foreach 循环，但我无法弄清楚如何在查询中有效地使用它们。我可以创建一个数组并以某种方式将其作为输入传递给查询吗？

谢谢

阿尔达

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T19:18:16.053

您还可以将函数传递给数组：

```
function myfunc(array('input2','input1')); 
```

但是要使用以下方法回答您的问题`func_get_args`：

```
<?php
function buildQuery() {
    $args = func_get_args();

    $q = implode(', ',$args);

    return 'SELECT * FROM `table` WHERE inputs in ('.$q.');';
}

echo buildQuery('input0','input1');
?> 
```

输出：

> SELECT * FROM `table`WHERE 输入 (input0, input1);

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T19:20:03.130

不要忘记在查询中使用它们之前先清理您的输入。试试这个

```
$i = impode(", ", array_map(function($a) {
   return '"' . mysql_real_escape_string($a) . '"';
}, func_get_args()); 
```

然后用这样`(input0,input1)`的内容替换`$i`

```
$q = "SELECT * FROM `table` WHERE inputs in " . $i; 
```

# ember.js - 在新的 Ember rc1 路由器中连接到“根”路由

> ID：15956883
> 
> 赞同：0
> 
> 时间：2013-04-11T19:10:06.760
> 
> 标签：ember.js, ember-router

我正在寻找一种方法来连接路由器，因为它*在 app init 期间*转换到任何给定的叶子资源。换句话说，我想在每次加载应用程序时运行一个小初始化例程，无论“传入” url 状态是什么。

给定这样的路由器：

```
App.Router.map ->
  @resource "donkeys"
  @resource "camels" 
```

当应用程序（第一次）加载了一个悬空的 url 时，如下所示：

*本地主机：9000/#/驴*

- 或者 -

*本地主机：9000/#/骆驼*

我希望调用相同的路由器级代码。

我的第一个猜测是尝试这样的事情（**这不起作用**）：

```
App.IndexRoute = Ember.Route.extend

  activate: ->
    App.callTheBeastsOfBurden() 
```

...但事实证明 IndexRoute 没有被遍历。我只看到日志消息`Transitioned into 'donkeys'`

在过去，有一个“根路线”的概念，你可以加入其中。如果我记得，它看起来像这样（**这是旧的和“错误的”**）：

```
App.Router = Em.Router.extend
  root: Em.Route.extend
    connectOutlets: ->
      App.callTheBeastsOfBurden() 
```

那么，**Router v2 批准**的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T19:57:18.347

```
App.ApplicationRoute = Ember.Route.extend

  activate: ->
    App.callTheBeastsOfBurden() 
```

# php - 流体接口如何同时返回 $this 和值？

> ID：15956884
> 
> 赞同：4
> 
> 时间：2013-04-11T19:10:07.090
> 
> 标签：php, software-design

我对 OOP 比较陌生，所以浏览 Simple HTML DOM 的文档时，我想知道它的方法如何同时使用方法链接和返回值/对象的常规行为。

例如我可以这样做：

```
 $html = new simple_html_dom();
 $html -> find('something'); // Returns object or array of objects 
```

但我也可以这样做：

```
 $html -> find('something') -> find('something_else'); 
```

如果我正确理解方法链接，这意味着`find()`返回`$this`ie 本身。

我也理解使用方法链接你 return `$this`，之后你使用 getter 方法来实际返回一个你可以使用/想要的值。例如：

> $object -> add(1) -> add(2) -> getNumber();

我在这里想念什么？提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T19:18:37.553

实际上，在 find 的返回值上调用 find 是没有意义的，因为该返回值应该是一个数组。

您最终可以向您添加第二个参数，`find(string, array&)`以便您可以执行以下操作：

```
$result1 = [];
$resilt2 = [];

$html -> find('something', $result1)
      -> fint('something else', $result2);

var_dump($result1, $result2); 
```

和 ：

```
public function find($search, & $output) {
    $output = ...
    return $this;
} 
```

取决于你的口味。**仅当您想在同一个对象上调用多个方法（特别不返回任何内容**）以避免每次都重写变量名并因此缩短代码时，链调用才有用。

编辑：如果你想做类似的事情：

```
" $html -> find('div#results') -> find('li a'); " 
```

你有一个问题，因为 $html 代表一个 DOM，而 find 返回的值不是一个 DOM，而是一组结果。您的 find 函数最终可能会创建并返回一个较小的 DOM，其中 #result 作为根（这将是与 $html 相同类的对象，而不是数组），然后调用 find 将在该新根上执行搜索文档的根目录，但这看起来有点不直观。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T20:40:36.310

您所指的链接类型涉及返回 not `$this`，而是返回一个表示找到的数据的新对象。[诀窍是使用“魔术方法”](http://php.net/manual/en/language.oop5.magic.php)和[预定义接口](http://uk1.php.net/manual/en/reserved.interfaces.php)使该对象*像*数组或标量一样可用。

[SimpleXML 扩展](http://php.net/manual/en/book.simplexml.php)广泛使用了这个概念，因此每个对象都可以同时以多种方式使用：

*   `__toString()`，以便转换为字符串，或在明确的字符串上下文中使用，例如`echo`为您提供 XML 节点的文本内容
*   [ArrayAccess](http://uk1.php.net/manual/en/class.arrayaccess.php)以便您可以使用它`$a['href']`来访问属性，并`$li[42]`访问多个匹配节点之一
*   [迭代器](http://uk1.php.net/manual/en/class.iterator.php)，以便您可以`foreach`进行多个匹配
*   `__get()`并`__set()`通过标签名称搜索和覆盖子元素

（实际上，SimpleXML 是一个二进制扩展，所以有点作弊，但理论上它的大部分功能都可以使用上述方法在纯 PHP 中实现。）

因此，例如以下语句：

```
echo $simplexml_element->foo[42]->bar['baz']; 
```

看起来包含数组、散列和字符串，但实际上是一个完整的对象调用链，如下所示：

```
echo $simplexml_element->__get('foo')->offsetGet(42)->__get('bar')->offsetGet('baz')->__toString(); 
```

# excel - 通过数据透视表从多个电子表格中获取数据

> ID：15956886
> 
> 赞同：0
> 
> 时间：2013-04-11T19:10:20.223
> 
> 标签：excel, vba, pivot

我正在努力简化日常任务，我想了解一下你的想法。我有三个不同的数据源（两个来自我的公司，第三个来自客户），包括产品、日期、类别和数量。到目前为止，我已经转换了我可以转换的内容并遗漏了不相关的数据，并将其中两个数据合并到一个数据透视表（内部数据）中，另一个合并到一个单独的数据透视表中（外部数据下载）。我的任务是比较数据并确保内部数据与外部数据完全相同，如果有差异，请调查和更改。我一直在用尺子手动比较两个数据透视表。数据每天都在变化，有时这是一项漫长的任务。通过阅读论坛，我找到了将值与公式进行比较的方法，但我有值以及文本和日期，但不知道如何将它们全部合并。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T19:29:40.073

我假设您有一些标识符可以告诉您该产品与该产品相同，因为您使用的是数据透视表。

您可以使用的东西将是`vlookup`.

语法是`=vlookup(lookup_value, range, column_index, false)`

在您拥有内部数据的工作表中插入您将比较的每个项目的列数。如果您要比较日期、类别和数量，这将构成您将添加的 6 列，您可以将它们命名为“ext date `,`ext cat `and`ext vol”。

进行比较的工作表（我们称之为`Comparison`）：

```
 A        B        C        D        E        F        G        H        I        J
 +--------+--------+--------+--------+--------+--------+--------+--------+--------+--------+
1|Product |Int date|Int Cat |Int Vol |Ext date|Ext Cat |Ext Vol |Dif date|Dif Cat |Dif Vol |
 +--------+--------+--------+--------+--------+--------+--------+--------+--------+--------+
2|Item1   |01/01/12|Cat1    |23      |vlookup1|vlookup2|        |        |        |        |
 |        |        |        |        |        |        |        |        |        |        | 
```

找到外部数据的工作表（我们称之为`External`）：

```
 A        B        C        D      
 +--------+--------+--------+--------+
1|Product |Ext date|Ext Cat |Ext Vol |
 +--------+--------+--------+--------+
2|Item1   |01/01/12|Cat1    |23      |
 |        |        |        |        | 
```

在`E2`sheet 的单元格中`Comparison`，您将输入：

```
=vlookup(A2, External!A:B, 2, false) 
```

结果将是`01/01/2012`

代码所做的是在它找到的行`Item1`的 A 列中查找`External`并返回**第二**列中的值（这是公式中 2 的目的）`Item1`。您可以指定任何范围（`A:B`在此公式中），只要第一列包含您要查找的值，以及您希望在该范围中包含的列中返回的值。例如，您可以编写`=vlookup(A2, External!A:D, 2, false)`并且它会返回相同的值，因为索引`2`在该范围内，因为 D 是第 4 列，所以它不起作用`=vlookup(A2, External!A:D, 5, false)`，如果这有意义吗？

在`F2`sheet 的单元格中`Comparison`，您将输入：

```
=vlookup(A2, External!A:C, 3, false) 
```

并且在细胞中`G2`

```
=vlookup(A2, External!A:D, 4, false) 
```

`false`公式中的意思是完全匹配。您也可以`0`改用；这是同一件事。

然后，您可以`=B2=E2`输入单元格`H2`以比较日期或您已经使用的任何其他可能更合适的公式。

我希望它有帮助！:)

# c++ - 如何通过 jam 传递 cflags

> ID：15956889
> 
> 赞同：1
> 
> 时间：2013-04-11T19:10:29.260
> 
> 标签：c++, dll, flags, jam

我正在尝试通过 Jam 编译和链接 DLL。这是一个仅资源的 DLL，所以我需要弄清楚如何通过 Jam 将 /noentry 标志传递给链接器。

这是我的 Jamfile 现在的样子：

```
// need to figure out how to specify the /noentry CFLAG somewhere here

PackageDll foo
    : NAME foo.dll
    : DESC  "Resource File"
    : USE_C
    ;

Build foo
    : system.pkg foo.rc
    : . 
    ; 
```

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T19:56:29.827

语法看起来像 jam，但 PackageDll 和 Build 规则不是标准的（即 Perforce）jam 规则。如果这些规则以最终调用标准 jam Link 操作的方式实现，则将您的标志添加到目标 LINKFLAGS 变量中就可以了。假设目标的名称是 foo.dll（添加您的规则添加的任何 grist，如果有的话），可以这样完成：

```
LINKFLAGS on foo.dll = [ on foo.dll return $(LINKFLAGS) ] /noentry ; 
```

不知道你的规则做什么，最好在调用它们之后再做。

# python - Python：列出附加问题

> ID：15956890
> 
> 赞同：2
> 
> 时间：2013-04-11T19:10:31.570
> 
> 标签：python, dictionary, nested-lists

我有各种各样的逻辑错误，我似乎无法挑选出来。这是我所拥有的：

```
Document = 'Sample1'
locationslist = []
thedictionary = []
userword = ['the', 'a']
filename = 'Sample1'
for inneritem in userword:
     thedictionary.append((inneritem,locationslist))
     for position, item in enumerate(file_contents): 
        if item == inneritem:
            locationslist.append(position)
wordlist = (thedictionary, Document)
print wordlist 
```

所以基本上我试图从一个较小的列表（locationslist）与特定的用户词一起创建一个更大的列表（字典）。我几乎拥有它，除了输出将所有单词的所有位置（其中只有 2 个 -`'the'`和`'a'`）放在每个列表中。似乎有一个简单的逻辑问题 - 但我似乎无法发现它。输出是：

```
([('the', [5, 28, 41, 97, 107, 113, 120, 138, 141, 161, 2, 49, 57, 131, 167, 189, 194, 207, 215, 224]), 
  ('a', [5, 28, 41, 97, 107, 113, 120, 138, 141, 161, 2, 49, 57, 131, 167, 189, 194, 207, 215, 224])], 
 'Sample1') 
```

但应该是：

```
([('the', [5, 28, 41, 97, 107, 113, 120, 138, 141, 161]), 
  ('a', [2, 49, 57, 131, 167, 189, 194, 207, 215, 224])], 
 'Sample1') 
```

看看这两个位置列表是如何被附加到每个关于每个用户词`'the'`和的有问题的输出中的`'a'`？我可以就我在这里做错的事情提出建议..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T19:12:59.443

你只创造一个`locationslist`，所以你只有一个。它由两个词共享。您需要`locationslist`在每次循环迭代中创建一个新的：

```
for inneritem in userword:
    locationslist = []
    thedictionary.append((inneritem,locationslist))
    # etc. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T20:34:58.960

您只创建了一个`locationslist`，因此所有`locationslist.append()`调用都会修改该列表。您将相同的元素附加`locationslist`到. 您应该为 的每个元素创建一个位置列表。`thedictionary``userword``userword`

您拥有的算法可以编写为一组嵌套的列表推导，这将导致创建正确的列表：

```
user_word = ['the', 'a']
word_list = ([(uw, 
               [position for position, item in enumerate(file_contents) 
                if item == uw]) 
               for uw in user_word], 
             'Sample1') 
```

`enumerate(file_contents)`对于 中的每个项目，这仍然会调用一次，如果很大`user_word`，这可能会很昂贵。`file_contents`

我建议您将其重写为传递`file_contents`一次，根据 的内容检查每个位置的项目`user_word`，并将该位置仅附加到在该位置找到的特定 user_word 的列表中。我建议使用字典将 user_word 列表分开且可访问：

```
document = 'Sample1'

temp_dict = dict((uw, []) for uw in user_word)

for position, item in enumerate(file_contents):

if item in temp_dict:
    temp_dict[item].append(position)

wordlist = ([(uw, temp_dict[uw]) for uw in user_word], document) 
```

任何一种解决方案都会按照出现的顺序为您提供每个 user_word 在正在扫描的文档中的位置。它还将返回您正在寻找的列表结构。

# actionscript-3 - 基于转换后的影片剪辑绘制位图

> ID：15956894
> 
> 赞同：0
> 
> 时间：2013-04-11T19:10:38.637
> 
> 标签：actionscript-3, flash, bitmapdata

我正在绘制影片剪辑的位图，然后将其输入我的 hittest 函数以测试碰撞。但是，我不太确定如何添加到下面的代码中以考虑并为已缩放和/或旋转的电影剪辑绘制位图。下面的代码显然只适用于未转换的影片剪辑。我已经包含在我已经尝试过但没有成功的评论代码中。

将绘制的位图添加到舞台时，无论相关的影片剪辑是否被转换，绘制的位图都会被“切断”并错误地绘制 - 似乎只绘制了它的一部分。但是，这不会特别影响未转换的动画剪辑的碰撞测试，但会对已转换的动画剪辑产生不利影响。

我想要绘制的所有动画剪辑都是通过 graphics 属性创建的。

```
 //for example: 
            var mymc:MovieClip = new MovieClip();
            var g:Graphics = mymc.graphics;                        
            g.moveTo(0,0);
            g.lineTo(17.5,0);
            g.lineTo(8.75,17.5);
            g.lineTo(-8.75,17.5);
            g.lineTo(0,0); 
```

主要代码：

```
for each(var mc:MovieClip in impassable) {  

        //var bMatrix:Matrix = new Matrix();

        //bMatrix.scale(mc.scaleX, mc.scaleY);

        //bMatrix.rotate(mc.rotation * (Math.PI/180));

        var bData:BitmapData = new BitmapData(mc.width, mc.height, true, 0);

        //bData.draw(mc, bMatrix);

        bData.draw(mc);

        var bitmap:Bitmap = new Bitmap(bData);

        bitmap.x = mc.x;
        bitmap.y = mc.y;

        var HitTest:Number = newCollision(bitmap, centerX, centerY, 13.7); 
```

有什么想法吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T01:55:40.090

此函数将创建 a 的`BitmapData`克隆`DisplayObject`，同时考虑其变换矩阵，尽管它不考虑位图过滤器。（基于[这个](https://stackoverflow.com/questions/14491610/make-visual-clone-of-displayobject-thats-nested-within-other-displayobjects-an/14522452#14522452)答案。）

```
function createBitmapClone(target:DisplayObject):BitmapData {
    var targetTransform:Matrix = target.transform.concatenatedMatrix;
    var targetGlobalBounds:Rectangle = target.getBounds(target.stage);
    var targetGlobalPos:Point = target.localToGlobal(new Point());

    // Calculate difference between target origin and top left.
    var targetOriginOffset:Point = new Point(targetGlobalPos.x - targetGlobalBounds.left, targetGlobalPos.y - targetGlobalBounds.top);

    // Move transform matrix so that top left of target will be at (0, 0).
    targetTransform.tx = targetOriginOffset.x;
    targetTransform.ty = targetOriginOffset.y;

    var cloneData:BitmapData = new BitmapData(targetGlobalBounds.width, targetGlobalBounds.height, true, 0x00000000);
    cloneData.draw(target, targetTransform);

    return cloneData;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T21:38:30.820

当您在 Matrix 上调用连续变换时，排序非常重要，并且真的会搞砸。

幸运的是，有一个辅助方法可以让您一次性指定平移、旋转和缩放并避免这些问题 - [createBox](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/geom/Matrix.html#createBox%28%29)

对于您的情况，如下所示：

```
var matrix:Matrix = new Matrix();
matrix.createBox(mc.scaleX, mc.scaleY, mc.rotation*Math.PI/180, 0, 0); 
```

（两个零用于 x 和 y 平移）

# knockout.js - 在 knockout.js 中，为什么将“this”分配给“self”？

> ID：15956898
> 
> 赞同：8
> 
> 时间：2013-04-11T19:10:50.283
> 
> 标签：knockout.js

我正在学习 Knockoutjs 教程。有一件事我觉得很奇怪。我目前在第 2 部分：

[http://learn.knockoutjs.com/#/?tutorial=collections](http://learn.knockoutjs.com/#/?tutorial=collections)

在每个“类”的这一部分中，“这个”被分配给“自我”..第一个不是这样吗？

为什么有人会这样做？是否只是编写特定代码的人对 python 上瘾了，或者这有什么实际好处？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-11T19:13:35.953

由于“this”根据上下文引用不同的对象，因此可以通过将特定对象分配给另一个变量来保存对特定对象的引用，例如“self”。

# tkx - tkx 是否具有等效的 tagConfigure 以及更改文本小部件上文本颜色的方法？

> ID：15956907
> 
> 赞同：0
> 
> 时间：2013-04-11T19:11:49.030
> 
> 标签：tkx

tkx 是否具有等效的 tagConfigure 以及更改文本小部件上文本颜色的方法？

我有一个多年前基于 perl tk 创建的工具，我正在尝试使用 ActivePerl 5.x 及更高版本将其转换为 tkx。我已经取得了进展，但我很难过的项目之一是更改文本小部件中的字体颜色。对于 tk，我使用了 tagConfigure。$txt->tagConfigure('normal', -font=>"Arial 10", -foreground=>"white"); $txt->tagConfigure('bold', -font=>"Arial 10 粗体", -foreground=>"white"); $txt->tagConfigure('FC1', -font=>"Arial 10", -foreground=>"orange"); …… 然后我使用插入函数将文本附加到我想要的颜色。$txt->insert('end',$TEXT,$COLOR); tkx 似乎使用“$txt->insert_end($TEXT);”，但它似乎不允许您更改颜色。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T13:21:29.147

我终于找到了答案。这是 tkx 的正确语法： $txt->tag_configure('FC7', -font=>"Arial 10", -foreground=>"black", -background=>"white"); $txt->insert_end("我的消息\n", "FC7");

# vb.net - Format date in GridView

> ID：15956909
> 
> 赞同：0
> 
> 时间：2013-04-11T19:11:54.550
> 
> 标签：vb.net

Please see the database DDL below:

```
create table datetest (datetime1 datetime)
insert into datetest values(getdate()) 
```

Please see the presentation code below:

```
<asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="False" 
    DataSourceID="SqlDataSource1">

     <Columns>
            <asp:TemplateField HeaderText="Status">
                <ItemTemplate>
                    <asp:Label ID="Label1" runat="server" Text='<%# bind("datetime1") %>'></asp:Label>
                </ItemTemplate>
            </asp:TemplateField>
        </Columns>

    </asp:GridView> 
```

The output on the page is: 11/04/2013 19:51:40, but the database value is: 2013-04-11 19:51:40.017 (notice the milliseconds are chopped off the first value).

I have looked into this and have found a number of posts on here, which suggest using EVAL and String.Format, but I have been unsuccessful. How can I display milliseconds on the webpage?

I have tried the following code:

```
<asp:Label ID="Label1" runat="server" Text='<%
Eval("datetime1").ToString("dd/MM/yyyy hh:mm:ss.fff") %>'></asp:Label> 
```

However, I am prompted with an exception: "Conversion from string "dd/MM/yyyy" to type 'Integer' is not valid."

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T19:18:17.617

```
<asp:Label ID="Label1" runat="server" Text='<%# Eval("datetime1").ToString("dd/MM/yyyy hh:mm:ss.fff") %>'></asp:Label> 
```

Something like that should do it. If you need help with custom time formats, have a look here: [http://msdn.microsoft.com/en-gb/library/8kb3ddd4.aspx](http://msdn.microsoft.com/en-gb/library/8kb3ddd4.aspx)

You do not need to do a template to change the format though, you can add `{0:dd/MM/yyyy hh:mm:ss.fff}` in the custom format property

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T20:04:16.270

You should use `Eval` with additional format parameter instead of `Eval().ToString()` call:

```
<asp:Label ID="Label1" runat="server"
           Text='<%# Eval("datetime1", "{0:dd/MM/yyyy hh:mm:ss.fff}") %>'></asp:Label> 
```

# javascript - 如何将 Greasemonkey 脚本转换为无需重启的 Firefox 插件？

> ID：15956910
> 
> 赞同：6
> 
> 时间：2013-04-11T19:11:55.480
> 
> 标签：javascript, firefox, firefox-addon, greasemonkey

我需要将 Greasemonkey 脚本转换为无需重启的 Firefox 插件。

过去使用 Scriptify 扩展可以很容易地做到这一点，但是该扩展没有与 Firefox 浏览器的最新更改保持同步，并且不再有效。

有没有其他方法可以做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-21T14:56:38.703

事实证明，Scriptify 扩展程序的开发人员已经更新了他的扩展程序，以便与较新的 Firefox 浏览器兼容。万岁！:)

**更新**现在 Firefox 已经为 Firefox 扩展实现了 WebExtensions API，这意味着从 Greasemonkey 脚本创建无需重启的 Firefox 扩展非常容易，因为使用“Web 扩展”API 构建的 Firefox 扩展默认是无需重启的，您可以包含 gm 脚本作为 Firefox 扩展中的内容脚本。

有关如何使用新的 WebExtensions API 创建 Firefox 扩展的示例，请参见此处：[https ://developer.mozilla.org/en-US/Add-ons/WebExtensions/Your_first_WebExtension](https://developer.mozilla.org/en-US/Add-ons/WebExtensions/Your_first_WebExtension)

# excel - 如果该行的一个单元格已填充，则强制填充整行

> ID：15956923
> 
> 赞同：-2
> 
> 时间：2013-04-11T19:12:44.490
> 
> 标签：excel, excel-2007, vba

对于 ms Excel 2007。如果该行的任何一个单元格被填充，我希望用户填充一行中的所有单元格。我正在使用 ms-Excel 2007。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T23:31:24.970

我能想到的唯一方法是使用表格。表单必须是用户输入数据的唯一方式（您保护工作表并且表单代码“取消保护”它），然后当用户填写表单时，您检查字段是否有错误（不仅仅是遗漏，而是诸如“那不是一个有效的日期”等）。

要了解我的意思，您可以在[本教程](http://spreadsheets.about.com/od/datamanagementinexcel/tp/090828-excel-data-entry-form-hub.htm)中看到用于数据输入的表单。也许这就是你所需要的，虽然没有真正可靠的数据验证内置。但它会让你开始。

一旦你看到它是如何工作的，你就可以尝试设计你自己的表单来复制这个表单的功能，但其中包括错误捕获。这包括打开 VBA 编辑器 ( `<Alt-F11>`)、插入用户表单、添加字段和按钮以及编写一些在单击“确定”按钮时运行的代码。

并不是说这是一件容易实现的事情（我从这个问题中猜测您可能是新手），但请试一试。当您遇到困难时 - 发布您的问题的更新或发表评论。

# python - Python - 如何导入模块进行单元测试？

> ID：15956926
> 
> 赞同：0
> 
> 时间：2013-04-11T19:13:06.753
> 
> 标签：python, unit-testing, import, nose

我在一个模块（mod1）中有一些功能。我想对它们运行一些单元测试（特别是鼻子测试）。我见过的大多数使用 unittest/nosetests 的介绍似乎只是导入代码以使用`from mod1 import func1`. 但是，据我所知，我想避免从 mod1 导入的模块 (mod2) 中导入任何代码，这样您就只能直接在 mod1 中测试代码。相反，我应该模拟 mod1 导入的 mod2 中的函数。我是不是很傻，`from mod1 import func1`不会从 mod2 导入代码？或者是否有其他方法可以导入 func1 以便它不会从 mod2 导入任何代码？非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T19:30:47.607

这是您的设计决定，而不是 m1 与 m2 交互，因此您有选择

```
1) Test mod1 with mod2
2) Mock functions in mo2d 
```

但是有一些方法可以避免直接导入查看此代码

```
https://github.com/django/django/blob/master/django/db/models/loading.py
https://github.com/tangentlabs/django-oscar/blob/master/oscar/core/loading.py 
```

希望这可以帮助您将模块分开一点（如果确实需要）

# c++ - 我可以在编译时使用模板稳健地构建具有多种已知类型和已知最大深度的树吗？

> ID：15956929
> 
> 赞同：1
> 
> 时间：2013-04-11T19:13:15.320
> 
> 标签：c++, templates, tree

我最近想到我会尝试创建一个“列表”树。也就是说，每个级别都是一个列表的树，所以它不是二叉树。此外，我想尝试使树的每个级别都具有不同的类型，特别是四种不同的类型 - 每个级别一个。最后，我打算看看是否可以在编译时通过使用三个不同的模板来修复树的高度。

tree_middle，对于树的中间层，

```
template<typename a, typename b, typename c>
struct tree_middle
{
    tree_middle *m_prev;
    tree_middle *m_next;

    a *m_upper;

    b *m_node;

    c *m_lower;
}; 
```

tree_bottom，对于树的底部，

```
template<typename a, typename b>
struct tree_bottom
{
    tree_bottom *m_prev;
    tree_bottom *m_next;

    a *m_upper;

    b *m_node;
}; 
```

和 tree_top 为树的顶部。

```
template<typename a, typename b>
struct tree_top
{
    tree_top *m_prev;
    tree_top *m_next;

    a *m_node;

    b *m_lower;
}; 
```

在玩弄了不同的实现之后，我基本上采用了一些变通方法，其中我有一个表示倒数第二个树级别的类型：

```
template<typename a, typename b, typename c>
struct tree_prebottom
{
    tree_prebottom *m_prev;
    tree_prebottom *m_next;

    a *m_upper;

    b *m_node;

    tree_bottom<tree_prebottom, c> *m_lower;
}; 
```

通过定义另一个模板，我可以创建一个固定在三个级别的具有三种不同类型的树。请注意，three_tree 在此模板中用作 tree_top。这接近我想要的。

```
template<typename a, typename b, typename c>
struct three_tree
{
    three_tree *m_prev;
    three_tree *m_next;

    a *m_node;

    tree_prebottom<three_tree, b, c> *m_lower;
}; 
```

更进一步，我最终得到了一个模板，它可以生成我正在寻找的类型，four_tree。但是注意到这里发生的这种可笑的展示了吗？我在这里写的是一种相当松散的“通用”代码，同意吗？唯一通用的是消费类型，真的。注意：当我注意到four_tree没有正确的链接回到顶层时，这部分被编辑了。）

```
template<typename a, typename b, typename c, typename d>
struct tree_threebottom
{
    tree_threebottom *m_prev;
    tree_threebottom *m_next;

    a *m_upper;

    b *m_node;

    tree_prebottom<tree_threebottom, c, d> *m_lower;
};

template<typename a, typename b, typename c, typename d>
struct four_tree
{
    four_tree *m_prev;
    four_tree *m_next;

    a *m_node;

    tree_threebottom<four_tree, b, c, d> *m_lower;
}; 
```

问题是，有没有更好、更优雅的方法来做到这一点？我在尝试进行原始实现时遇到的障碍是，当您为模板指定类型输入时，您不能将当前“输入”的类型作为参数传递。因此，由于某种循环依赖，我的方法永远无法创建完整的类型。如果您仅将自己限制为 tree_top 和 tree_bottom，即使是两级树也会受到影响：

```
template<typename a, typename b>
struct tree_bottom
{
    tree_bottom *m_prev;
    tree_bottom *m_next;

    a *m_upper;

    b *m_node;
};

template<typename a, typename b>
struct tree_top
{
    tree_top *m_prev;
    tree_top *m_next;

    a *m_node;

    b *m_lower;
}; 
```

模板本身就很好，直到您尝试使用它们定义实际类型。例如

```
typedef tree_top< int, tree_bottom<tree_top<int, tree_bottom< /*see the problem?*/, short> > int_short_tree; 
```

请注意，树实现非常简单，但我希望模拟我在这里找到的树模板：http: [//archive.gamedev.net/archive/reference/programming/features/coretree2/index.html](http://archive.gamedev.net/archive/reference/programming/features/coretree2/index.html)我也看到了类似的其他地方的实现，但它们都假定由单一类型组成的树。对此的自然反应可能是“为什么不使用多态性？”。我也看到了这种技术的实际应用，例如在 LLVM 项目中，虽然我对此没有任何问题，但我很想知道我是否可以静态（在编译时）构造一个颠覆需要的类型对于多态性，因为在我的特定情况下，我知道所涉及的所有类型，并且我知道树有一个固定的高度（四）。

我还考虑过将继承与模板结合使用来实现更健壮的解决方案，但该解决方案让我无法理解，如果它存在的话。在我看来，我可以手动创建这种类型，包括 5 级或更多级别的树。我在这里遇到了模板系统的限制，还是不够聪明？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T20:58:56.633

我想我知道你想要什么以及如何实现它。不过，我认为它不太适合 SO 格式。

首先，创建和使用树的语法：

```
int main()
{
    // We want a tree with 4 levels.
    // The node type of the 0th level should be `int`,
    // of the 1st level `double` and so on.
    // (0th level = tree root)
    // And we initialize the root node with the `int` 42.
    auto my_tree = make_tree_root < int, double, char, float, int > (42);

    // add children and navigate through the tree
    my_tree.add_child(1.23);
    my_tree.add_child(4.56);
    my_tree.get_child(1).add_child('x');
    my_tree.get_child(1).get_child(0).add_child(1.2f);

    my_tree.print();
} 
```

而现在背景中的混乱。请注意，它只是一个概念验证，它有很多缺陷，没有评论可能是一种祝福。尤其是用于减少代码复制的多重继承产生的问题比它解决的问题多。

```
#include <cstddef>
#include <iostream>    
#include <vector>

template < typename... TP >
struct type_vector
{
private:
    template < std::size_t t_count, typename TT, typename... TTP >
    struct access_elem { using value = typename access_elem < t_count-1, TTP... > :: value; }; 
        template < typename TT, typename... TTP >
        struct access_elem < 0, TT, TTP... > { using value = TT; };

public:
    template < std::size_t t_id >
    using elem = typename access_elem < t_id, TP... > :: value;
};

template < typename, std::size_t, std::size_t >
struct tree_node;

template < typename T_type_vector, std::size_t t_level, std::size_t t_maxLevel >
struct tree_all_base
{
    using node = typename T_type_vector::template elem < t_level >;

protected:
    node m_node;

public:
    explicit tree_all_base(node p) : m_node(p) {}

    void change_node(node);
    node get_node() const { return m_node; }

    void print() const
    {
        std::cout << "node: " << m_node << std::endl;
    }
};

template < typename T_type_vector, std::size_t t_level, std::size_t t_maxLevel >
struct tree_down_base
{
    using child = tree_node < T_type_vector, t_level+1, t_maxLevel >;

private:
    std::vector<child> m_children;

public:
    void add_child(typename child::node p)
    {
        using derived_type = tree_node < T_type_vector, t_level, t_maxLevel >;
        m_children.push_back( child{p, static_cast<derived_type*>(this)} );
    } 
    child const& get_child(std::size_t id) const { return m_children.at(id); }
    child& get_child(std::size_t id) { return m_children.at(id); }
    // further methods like `remove_child` etc

protected:
    void print() const
    {
        std::cout << "children: ";
        for(child const& c : m_children)
        {
            std::cout << c.get_node() << ", ";
        }
        std::cout << std::endl;
        for(child const& c : m_children)
        {
            c.print();
        }
        std::cout << std::endl;
    }
};

template < typename T_type_vector, std::size_t t_level, std::size_t t_maxLevel >
struct tree_up_base
    : public tree_all_base < T_type_vector, t_level, t_maxLevel >
{
    using tree_all_base_ = tree_all_base<T_type_vector,t_level,t_maxLevel>;
    using parent = tree_node < T_type_vector, t_level-1, t_maxLevel >;
    using node = typename tree_all_base_::node;

protected:
    parent* m_parent;

    tree_up_base(node p_node, parent* p)
        : tree_all_base_(p_node), m_parent(p)
    {}
};

template < typename T_type_vector, std::size_t t_level, std::size_t t_maxLevel >
struct tree_node
    : public tree_up_base  <T_type_vector, t_level, t_maxLevel>
    , public tree_down_base<T_type_vector, t_level, t_maxLevel>
{
    using node = typename tree_all_base<T_type_vector,t_level,t_maxLevel>::node;
private:
    /* inherit ctor....*/
    using tree_up_base_ = tree_up_base<T_type_vector,t_level,t_maxLevel>;
    using tree_down_base_ = tree_down_base<T_type_vector,t_level,t_maxLevel>;
    using tree_node_parent = tree_node<T_type_vector,t_level-1,t_maxLevel>;

    friend struct tree_down_base < T_type_vector, t_level-1, t_maxLevel >;
    tree_node(node p, tree_node_parent* pb) : tree_up_base_(p, pb) {}

public:
    void print() const
    {
        tree_up_base_::print();
        tree_down_base_::print();
    }
};
    // tree root specialization
    template < typename T_type_vector, std::size_t t_maxLevel >
    struct tree_node < T_type_vector, 0, t_maxLevel >
        : public tree_all_base <T_type_vector, 0, t_maxLevel>
        , public tree_down_base<T_type_vector, 0, t_maxLevel>
    {
    public:
        /* inherit ctor..... */
        using tree_all_base_ = tree_all_base<T_type_vector,0,t_maxLevel>;
        using tree_down_base_ = tree_down_base<T_type_vector,0,t_maxLevel>;
        using node = typename tree_all_base_ :: node;
        tree_node(node p) : tree_all_base_(p) {}

    public:
        void print() const
        {
            tree_all_base_::print();
            tree_down_base_::print();
        }
    };

    // tree leaf specialization
    template < typename T_type_vector, std::size_t t_maxLevel >
    struct tree_node < T_type_vector, t_maxLevel, t_maxLevel >
        : public tree_up_base <T_type_vector, t_maxLevel, t_maxLevel>
    {
    private:
        /* inherit ctor.... */
        using tree_up_base_ = tree_up_base<T_type_vector,t_maxLevel,t_maxLevel>;
        using node = typename tree_up_base_ :: node;
        using tree_node_parent = tree_node<T_type_vector,t_maxLevel-1,t_maxLevel>;

        friend struct tree_down_base < T_type_vector, t_maxLevel-1, t_maxLevel >;
        tree_node(node p, tree_node_parent* pb) : tree_up_base_(p, pb) {}
    };

template < typename... TP >
tree_node < type_vector<TP...>, 0, sizeof...(TP)-1 >
make_tree_root(typename type_vector<TP...>::template elem<0> node)
{ return {node}; } 
```

# r - 在其他数据框列之间添加新列

> ID：15956931
> 
> 赞同：12
> 
> 时间：2013-04-11T19:13:23.497
> 
> 标签：r, dataframe

我想在我的数据框中添加一个带有“NA”的新列：

```
 A       B
1    14379  32094
2   151884  174367
3   438422  449382 
```

但我需要它位于上校之间。A和B，像这样：

```
 A       C      B
1    14379   NA    32094
2   151884   NA    174367
3   438422   NA    449382 
```

我知道如何添加 col。上校之后的 C。B，但这对我没有帮助......有人知道怎么做吗？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-04-11T19:19:18.220

通过 2 个步骤，您可以对列重新排序：

```
dat$C <- NA
dat <- dat[, c("A", "C", "B")]
         A  C          B
1  0.596068 NA -0.7783724
2 -1.464656 NA -0.8425972 
```

你也可以使用`append`

```
dat <- data.frame(A = rnorm(2), B = rnorm(2))
as.data.frame(append(dat, list(C = NA), after = 1))

           A   C          B
1 -0.7046408  NA  0.2117638
2  0.8402680  NA -2.0109721 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-12T00:11:05.757

如果您使用`data.table`，您可以使用该功能`setcolorder`。请注意，`NA`存储为逻辑变量，如果要将列初始化为整数、双精度或字符列，可以使用`NA_integer`,`NA_real_`或`NA_character_`

例如

```
library(data.table)
DT <- data.table(DF)
# add column `C`  = NA 

DT[, C := NA]

setcolorder(DT, c('A','C','B'))
DT
##         A  C      B
## 1:  14379 NA  32094
## 2: 151884 NA 174367
## 3: 438422 NA 449382 
```

你可以在一行中做到这一点

```
setcolorder(DT[, C: = NA], c('A','B','C')) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-11-24T14:33:32.803

您还可以使用包 tibble，它有一个非常有趣的功能（以及许多其他功能）：add_column()

```
library(tibble)
df <- data.frame("a" = 1:5, "b" = 6:10)
add_column(df, c = rep(NA, nrow(df)), .after = 1) 
```

该函数易于使用，您可以使用参数 .before 代替。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-11-21T12:39:51.750

我编写了一个函数来将列附加到（到）data.frame 上。它还允许您命名列，并进行一些检查...

```
append_col <- function(x, cols, after=length(x)) {
    x <- as.data.frame(x)
    if (is.character(after)) {
        ind <- which(colnames(x) == after)
        if (any(is.null(ind))) stop(after, "not found in colnames(x)\n")
    } else if (is.numeric(after)) {
        ind <- after
    }
    stopifnot(all(ind <= ncol(x)))
    cbind(x, cols)[, append(1:ncol(x), ncol(x) + 1:length(cols), after=ind)]
} 
```

例子：

```
# create data
df <- data.frame("a"=1:5, "b"=6:10)

# append column 
append_col(df, list(c=1:5))

# append after an column index
append_col(df, list(c=1:5), after=1)

# or after a named column
append_col(df, list(c=1:5), after="a")

# multiple columns / single values work as expected
append_col(df, list(c=NA, d=4:8), after=1) 
```

（在函数末尾调用 cbind 和索引的一个优点是 data.frame 中的字符不会被强制转换为使用 的情况`as.data.frame(append(x, cols, after=ind))`）

# facebook - 从时间线上隐藏 Open Graph 视频帖子？

> ID：15956939
> 
> 赞同：1
> 
> 时间：2013-04-11T19:13:51.673
> 
> 标签：facebook, facebook-graph-api, video, facebook-opengraph, facebook-timeline

我正在尝试使用 Open Graph API 将视频发布到 Facebook，而不将其添加到 Facebook 上的时间线，但到目前为止，我一直无法找到任何允许我执行此操作的 API。当前的 API 是否可以做到这一点，如果可以，怎么做？

# sql - Oracle - 如何创建具有 ID 的自动递增唯一键的表

> ID：15956940
> 
> 赞同：1
> 
> 时间：2013-04-11T19:14:03.610
> 
> 标签：sql, oracle

这是我第一次使用 oracle SQL，但在创建具有唯一键的表时遇到问题。

我不明白为什么这个自动递增的 id 不起作用：

```
ID BIGINT UNSIGNED NOT NULL AUTO_INCREMENT PRIMARY KEY 
```

我的下一个问题是为什么我的每个陈述都出现错误：

```
ORA-00922: missing or invalid option 
```

这是我的代码：

```
--
-- Sequence for aout incrment
--
CREATE SEQUENCE IF NOT EXISTS AUTO_INC_SEQ
START WITH 1
INCREMENT BY 1;

--
-- Table Person
--
CREATE TABLE IF NOT EXISTS FITNESS_PERSON
(
ID NUMBER NOT NULL PRIMARY KEY,
FIRST_NAME VARCHAR NOT NULL,
LAST_NAME VARCHAR NOT NULL,
NICK_NAME VARCHAR NOT NULL,
DATE_BIRTH DATE NOT NULL,
PASSWORD VARCHAR NOT NULL,
CONSTRAINT UNIQUE(NICK_NAME)
);

--
-- Table BMR
--
CREATE TABLE IF NOT EXISTS FITNESS_BMR
(
ID NUMBER NOT NULL PRIMARY KEY,
VALUE FLOAT NOT NULL,
VALUE_DATE DATE NOT NULL
);

--
-- M:N for BMR and Person
--
CREATE TABLE IF NOT EXISTS FITNESS_BMR_PERSON
(
BMR_ID NUMBER NOT NULL,
PERSON_ID NUMBER NOT NULL,
FOREIGN KEY(BMR_ID) REFERENCES FITNESS_BMR(ID),
FOREIGN KEY(PERSON_ID) REFERENCES FITNESS_PERSON(ID),
CONSTRAINT BMR_PER PRIMARY KEY(BMR_ID, PERSON_ID)
); 
```

这样做的正确方法是什么（创建一个表并使用唯一的自动递增键）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T19:33:44.873

您可以使用表、序列来生成唯一 ID 值和触发器。

例如：

桌子：

```
CREATE Table FITNESS_BMR
(
ID NUMBER NOT NULL PRIMARY KEY,
VALUE FLOAT NOT NULL,
VALUE_DATE DATE NOT NULL
); 
```

顺序：`create sequence t1_seq start with 1 increment by 1 nomaxvalue;`

扳机：

```
CREATE OR REPLACE TRIGGER test_trigger
BEFORE INSERT
ON FITNESS_BMR
REFERENCING NEW AS NEW
FOR EACH ROW
BEGIN
SELECT t1_seq.nextval INTO :NEW.ID FROM dual;
END;
/ 
```

# c# - 尝试在 C# 中不使用 tnsname 进行连接时出现 TNS 监听器错误

> ID：15956942
> 
> 赞同：0
> 
> 时间：2013-04-11T19:14:10.293
> 
> 标签：c#, oracle, tnsnames

我正在尝试连接到 Oracle DB 而不必使用 TNS 名称，但它一直给出此错误：{“ORA-12504: TNS:listener is not given the SERVICE_NAME in CONNECT_DATA”}

```
string oradb = "Data Source=(DESCRIPTION=(ADDRESS=(PROTOCOL=TCP)(HOST=105.1.12.190)(PORT=1521))(CONNECT_D‌​ATA=(SERVICE_NAME=OMP1)));User ID=user;Password=pass;";

OracleConnection conn = new OracleConnection(oradb); // C#

conn.Open();

OracleCommand cmd = new OracleCommand();
cmd.Connection = conn;
cmd.CommandText = "SELECT cast(Count(*) as varchar(20)) as trig FROM ZDMSN.TRIGGER_TEST"; 
```

这是“TNS 名称”文件中的内容：

```
OMP1=
(DESCRIPTION=
   (ADDRESS=
      (PROTOCOL=TCP)
         (HOST=105.1.12.193)
            (PORT=1521)
      )
 (CONNECT_DATA=
    (SID=OMP1)
    )
 ) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T00:08:47.190

您的 IP 地址有冲突（.193 与 .190）。此外，您连接的是 TNS 名称文件中的 SID 名称，但字符串中的 SERVICE 名称。这可能会也可能不会。尝试在连接字符串中指定 (SID=OMP1)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-13T19:22:21.660

使用以下连接字符串：

```
string cadenaDeConeccion = "User Id=AAA111;Password=BBB222;Data Source=CCC333;Connection Timeout=60;Pooling=false" 
```

在你的情况下看起来像：

```
string cadenaDeConeccion = "User Id=AAA111;Password=BBB222;Data Source=OMP1;Connection Timeout=60;Pooling=false"; 
```

有关更多详细信息，您可以查看此链接：

[http://www.systemdeveloper.info/2013/10/oracle-tnsnamesora-network-configuration.html](http://www.systemdeveloper.info/2013/10/oracle-tnsnamesora-network-configuration.html)

# curl - 为什么 curl 从命令行成功但在此脚本中失败？

> ID：15956945
> 
> 赞同：0
> 
> 时间：2013-04-11T19:14:21.327
> 
> 标签：curl, cygwin

我使用 Cygwin 运行我的 CURL 命令。

```
$ curl http://URL/update.json --connect-timeout 10000 --max-time 10000 --data-binary @bars.json -H 'Content-type:application/json;charset=utf-8;X-Vendor-Email=myemaiL@gmail.com;'
{"uploaded":true,"message":"Bars JSON received.  A email will be sent after processing has completed."} 
```

如您所见，它工作正常并上传到远程服务器。我正在尝试通过将其放入脚本文件来自动化此专业。

我的脚本文件：

```
cd /cygdrive/x
curl http://URL/update.json --connect-timeout 10000 --max-time 10000 --data-binary @bars.json -H 'Content-type:application/json;charset=utf-8;X-Vendor-Email=EMAIL@gmail.com; 
```

错误：

```
$ /bin/test.sh
: No such file or directorycygdrive/x
/bin/test.sh: line 2: unexpected EOF while looking for matching `''
/bin/test.sh: line 3: syntax error: unexpected end of file 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T19:19:31.707

您需要`'`在命令末尾添加一个结束符。

```
curl http://URL/update.json --connect-timeout 10000 --max-time 10000 \
 --data-binary @bars.json \
 -H 'Content-type:application/json;charset=utf-8;X-Vendor-Email=EMAIL@gmail.com' 
```

# c++ - 多个 WT 应用程序可以在同一个端口上运行吗？

> ID：15956947
> 
> 赞同：3
> 
> 时间：2013-04-11T19:14:39.370
> 
> 标签：c++, visual-studio-2010, port, command-line-arguments, wt

更新 1：我最近发现 WT 使用 TCP (HTTP) 进行通信，如果这对任何人都有帮助的话。

标题说明了一切，是否可以在同一个端口上运行 2 个不同的 WT 应用程序或项目？我知道 WT 已经通过它的启动参数来控制应用程序的托管方式，如下所示。我使用的是 Visual Studio 2010，在调试->命令参数框中输入以下参数，如下所示：

```
--http-address=0.0.0.0 --http-port=8080 --deploy-path=/hello --docroot=. 
```

上述参数将要求用户在以下位置打开网页

```
http://127.0.0.1:8080/hello 
```

所以我虽然，嘿，如果我使用以下参数托管另一个项目怎么办

```
--http-address=0.0.0.0 --http-port=8080 --deploy-path=/world --docroot=. 
```

所以我需要连接到

```
http://127.0.0.1:8080/world 
```

以上实际上是行不通的，它只托管第一个连接的应用程序，第二个应用程序直到第一个关闭时才会连接。所以这把我带到了这里。有没有其他方法可以在同一个端口上运行多个 WT 应用程序？

预先感谢您的任何帮助！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-13T17:18:11.223

是的，您可以实现这一点，但您需要创建自己的`WRun`并使用`addEntryPoint`. 这实际上在[教程](http://www.webtoolkit.eu/wt/doc/tutorial/wt.html)中提到，如下所示：

> **WRun() 内部**
> 
> WRun() 实际上是一个方便的函数，它创建和配置一个 WServer 实例。如果你想要更多的控制，例如如果你有多个“入口点”，或者想要控制服务器的启动和停止，你可以直接使用 WServer API。

这里有一个示例，两个应用程序都是 Hello World 应用程序，但请注意它们在按钮上以及按下它们时具有不同的标题和不同的消息。`WRun`您可以找到on`src/http/Serve.C`和的另一个实现`src/Wt/WServer`。

**two_helloworlds.cc**

```
#include <Wt/WApplication>
#include <Wt/WBreak>
#include <Wt/WContainerWidget>
#include <Wt/WLineEdit>
#include <Wt/WPushButton>
#include <Wt/WText>
#include <Wt/WException>
#include <Wt/WLogger>
#include <Wt/WServer>

class HelloApplication : public Wt::WApplication
{
public:
    HelloApplication(const Wt::WEnvironment& env, const std::string& title);

private:
    Wt::WLineEdit *nameEdit_;
    Wt::WText *greeting_;

    void greet();
};

HelloApplication::HelloApplication(const Wt::WEnvironment& env, const std::string& title)
    : Wt::WApplication(env)
{
    setTitle(title);

    root()->addWidget(new Wt::WText("Your name, please ? "));
    nameEdit_ = new Wt::WLineEdit(root());
    Wt::WPushButton *button = new Wt::WPushButton("Greet me.", root());
    root()->addWidget(new Wt::WBreak());
    greeting_ = new Wt::WText(root());
    button->clicked().connect(this, &HelloApplication::greet);
}

void HelloApplication::greet()
{    greeting_->setText("Hello there, " + nameEdit_->text());
}
class GoodbyeApplication : public Wt::WApplication{
public:
    GoodbyeApplication(const Wt::WEnvironment& env, const std::string& title);

private:    Wt::WLineEdit *nameEdit_;
    Wt::WText *greeting_;

    void greet();
};

GoodbyeApplication::GoodbyeApplication(const Wt::WEnvironment& env, const std::string& title)
    : Wt::WApplication(env)
{
    setTitle(title);

    root()->addWidget(new Wt::WText("Your name, please ? "));
    nameEdit_ = new Wt::WLineEdit(root());
    Wt::WPushButton *button = new Wt::WPushButton("Say goodbye.", root());
    root()->addWidget(new Wt::WBreak());
    greeting_ = new Wt::WText(root());
    button->clicked().connect(this, &GoodbyeApplication::greet);
}

void GoodbyeApplication::greet()
{
    greeting_->setText("Goodbye, " + nameEdit_->text());
}

Wt::WApplication *createApplication(const Wt::WEnvironment& env)
{
    return new HelloApplication(env, "First app");
}

Wt::WApplication *createSecondApplication(const Wt::WEnvironment& env)
{
    return new GoodbyeApplication(env, "Second app");
}

int YourWRun(int argc, char *argv[], Wt::ApplicationCreator createApplication, Wt::ApplicationCreator createSecondApplication)
{
  try {
    // use argv[0] as the application name to match a suitable entry
    // in the Wt configuration file, and use the default configuration
    // file (which defaults to /etc/wt/wt_config.xml unless the environment
    // variable WT_CONFIG_XML is set)
    Wt::WServer server(argv[0],"");

    // WTHTTP_CONFIGURATION is e.g. "/etc/wt/wthttpd"
    server.setServerConfiguration(argc, argv, WTHTTP_CONFIGURATION);

    // add a single entry point, at the default location (as determined
    // by the server configuration's deploy-path)
    server.addEntryPoint(Wt::Application, createApplication);
    server.addEntryPoint(Wt::Application, createSecondApplication,"/second");
    if (server.start()) {
      int sig = Wt::WServer::waitForShutdown(argv[0]);

      std::cerr << "Shutdown (signal = " << sig << ")" << std::endl;
      server.stop();

      /*
      if (sig == SIGHUP)
        WServer::restart(argc, argv, environ);
      */
      }
  } catch (Wt::WServer::Exception& e) {
    std::cerr << e.what() << "\n";
    return 1;
  } catch (std::exception& e) {
    std::cerr << "exception: " << e.what() << "\n";
    return 1;
  }
}

int main(int argc, char **argv)
{
    return YourWRun(argc, argv, &createApplication, &createSecondApplication);
} 
```

编译它

`g++ -g -o two_helloworlds two_helloworlds.cc -I/usr/local/include -L/usr/local/lib -lwthttp -lwt -lboost_random -lboost_regex -lboost_signals -lboost_system -lboost_thread -lboost_filesystem -lboost_program_options -lboost_date_time`

并执行

`./two_helloworlds --docroot . --http-address 0.0.0.0 --http-port 8080`

`localhost:8080`您将访问其中一个应用程序，您`localhost:8080/second`将访问另一个应用程序。

# python - 如何在 python 中使用 hashlib 解密？

> ID：15956952
> 
> 赞同：17
> 
> 时间：2013-04-11T19:14:48.627
> 
> 标签：python, hashlib

我知道如何加密：

```
encrypted = hashlib.sha256('1234').hexdigest() 
```

但我不确定，如何解密这个？

```
decrypted = decrypt(encrypted) 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-04-11T19:15:44.977

像 sha256 这样的散列的要点是它应该是单向函数（尽管真正的单向函数的存在仍然是一个悬而未决的问题，请参阅[http://en.wikipedia.org/wiki/One-way_function](http://en.wikipedia.org/wiki/One-way_function)） .

注意[http://en.wikipedia.org/wiki/Cryptographic_hash_function](http://en.wikipedia.org/wiki/Cryptographic_hash_function)：

理想的密码散列函数有四个主要属性：

*   1.  很容易计算任何给定消息的哈希值
*   2.  生成具有给定哈希的消息是不可行的
*   3.  在不更改哈希的情况下修改消息是不可行的
*   4.  找到具有相同哈希的两条不同消息是不可行的。

如果你能扭转它，那么你就违反了规则 2。这些规则允许一个人告诉另一方他们有一些信息（例如密码），而不会泄露这些信息。例如，参见维基百科：[http ://en.wikipedia.org/wiki/Cryptographic_hash_function#Illustration](http://en.wikipedia.org/wiki/Cryptographic_hash_function#Illustration)

如果您需要可逆性，请参阅[根据密码对字符串进行编码的简单方法？](https://stackoverflow.com/questions/2490334/simple-way-to-encode-a-string-according-to-a-password)，你可以使用像 Vignere 这样弱的东西，但也有一个使用 PyCrypto 的例子：

```
from Crypto.Cipher import AES
import base64

cipher = AES.new(secret_key,AES.MODE_ECB) # never use ECB in strong systems obviously
encoded = base64.b64encode(cipher.encrypt(msg_text))
# ...
decoded = cipher.decrypt(baes64.b64decode(msg_text)) 
```

如果您想要一个可逆散列函数，请参阅[可逆散列函数？](https://stackoverflow.com/questions/4273466/reversible-hash-function)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-11T19:17:14.463

简短的回答是您不能“解密”哈希；这是一种单向功能。加密和散列之间有一个主要区别。

**散列**

见[http://en.wikipedia.org/wiki/Cryptographic_hash_function](http://en.wikipedia.org/wiki/Cryptographic_hash_function)

注意：可以“中断”某些哈希算法，但这不是解密。您将在链接中找到更多信息以及 python 也支持的其他算法

**加密**

和[http://en.wikipedia.org/wiki/Encryption](http://en.wikipedia.org/wiki/Encryption)

**例子**

哈希的一个有用示例是将密码存储在数据库中，而加密的一个有用示例是将您的银行详细信息发送到在线商店以购买东西。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-01-26T01:30:08.133

这是一个有效的问题，但可能没有正确提出。

OP，我认为你想要做的是检查一个散列值和一个未散列的值？

```
hashed = hashlib.sha256('1234').hexdigest()
hashedstring = '1234' + ',' + hashed 
```

现在检查散列 == 原始值。所以解析出逗号前后的部分。散列 1234 并将其与散列值进行比较。

```
def check_secure_val(h):
    commapos = h.find(",")
    val = h[0:commapos]
    hashval = h[commapos+1:-1]
    rehashval = hash_str(val)
    if rehashval == hashval:
        return val 
```

> 其中输入 h 是格式为 "val,(HASHEDSTRING)" 的字符串
> 
> hash_str 是一个散列函数。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2017-08-31T10:05:54.607

不太准确的*类比*：加密就像一个伪装的人......取一个哈希就像取他们的指纹！

您可以通过移除/反转伪装来找回“原始”人，但您不能从一组指纹中做到这一点！

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-04-11T19:23:28.663

哈希是使用单向函数计算的，即它将为特定输入提供相同的输出，但由于它只是一个单向函数，无论您做什么，都无法解密它。可以尝试通过蛮力对其进行解密，即计算字典中单词的哈希值并将其与要解密的哈希值进行比较。为了节省计算字典单词散列的时间，网上有彩虹表，其中包含单词的散列。

阅读：[http ://en.wikipedia.org/wiki/Rainbow_table](http://en.wikipedia.org/wiki/Rainbow_table)

您还可以使用在线服务对哈希进行强力解密。如果您要解密的单词属于字典，则有很多可用并且效果很好。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-10-04T07:10:50.813

这可能有帮助吗？

```
import hashlib

l = ["riyad", "onni", "arman"]

def check_user(h):
    for i in l:
        if h == hashlib.md5(i.encode('utf-8')).hexdigest():
            return i

print(check_user(hashlib.md5(l[2].encode('utf-8')).hexdigest())) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2022-02-19T06:57:15.517

我认为您无法解密它，但您可以做的可能是将猜测的密码范围例如放在 for 循环中，然后将它们全部放入**“{password：hashed password”**然后检查哈希值，也许您会得到它

所以假设你想破解一个 CSV 文件中的密码，并且在 0000-9999 之间

输入 csv 文件将如下所示：

名称，哈希密码

首先我们将导入 csv 和 hashlib

```
import hashlib
import csv 
```

现在让我们编写一个函数，将散列的 csv 文件和输出 csv 文件作为参数，我们将创建一个空字符串和一个空字典

```
def decryptor(input_file_name,output_file_name):
    # makes hashes
    clear_text = ""
    mydict = {} 
```

现在让我们在 0 和 9999 范围内创建一个 for 循环，我们将加密该范围内的每个数字

```
 for i in range(0, 10000):
        i = str(i).encode('utf-8') 
        encrypted = hashlib.sha256(i).hexdigest()
        mydict[i] = encrypted 
```

现在我们将它们写在 csv 文件中

```
 with open(input_file_name, 'r') as hash_file:
        # read's from csv file
        reader = csv.reader(hash_file)
        hash_dict = {}
        # reades every line of csv file
        for row in reader:
                hash_dict[row[0]] = row[1] 
```

现在我们只需要使用我们已经拥有的哈希检查我们想要解密的哈希，我们将获得未哈希的密码

```
 check_hash = []
    for i in list(mydict):
        text = "%s" % (mydict[i])
        check_hash.append(mydict[i])
    for i in list(hash_dict):
        if hash_dict[i] in check_hash:
            hashes = list(mydict.keys())[list(mydict.values()).index(hash_dict[i])]
            names = list(hash_dict.keys())[list(hash_dict.values()).index(hash_dict[i])],
            text = "%s,%s\n" % (names[0], hashes.decode('utf-8'))
            clear_text += text 
```

现在我们将输出写入输出 csv 文件

```
 with open(output_file_name, 'w') as passwords:
        passwords.write(clear_text) 
```

我们只需调用该函数

```
decryptor(<INPUT CSV>, <OUTPUT CSV NAME>) 
```

这是我对你的想法，当然你不能使用这个这是一个想法，希望它会有所帮助:)

# android - 使用 Eclipse 的 Android 应用程序。类路径冲突（无法执行 dex：多个 dex 文件定义）

> ID：15956958
> 
> 赞同：0
> 
> 时间：2013-04-11T19:15:12.200
> 
> 标签：android, eclipse, classpath, conflict

我使用了一个类路径检查器，结果显示附加.jar（来自电子邮件库）和 droidText0.2.jar（转换 pdf）具有相同的类路径。谁能帮我解决这个问题？在过去的两周里，我一直被困住，只是找不到解决方案由于以下错误，该项目甚至无法构建；

无法执行dex：多个dex文件定义了Lorg/apache/harmony/awt/internal/nls/Messages；

我正在使用 Eclipse Indigo 和 JDK 1.6 编译器。

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-10T04:41:59.940

> > 多个dex文件定义了Lorg/apache/harmony/awt/internal/nls/Messages；

此错误消息意味着，您的项目中有多个名为“define”的文件。

在您的情况下检查项目 scr 目录：

org/apache/harmony/awt/internal/nls/Messages

应该有一个名为“define”（define.java）的文件。

如果有额外的“定义”文件，请检查其他 scr 目录。

如果是，请删除此“定义”文件之一。

如果不删除“定义”中

org/apache/harmony/awt/internal/nls/Messages

然后清理你的项目。

就是这样。

# php - 上传文件权限

> ID：15956959
> 
> 赞同：0
> 
> 时间：2013-04-11T19:15:19.060
> 
> 标签：php, apache

我正在为上传的 zip 文件的文件权限而苦苦挣扎，然后将这些文件解压缩并分类到正确的目录中。

例如：

1.  用户上传 FileA.zip

2.  FileA.zip 移动到 parent/uploads/ 目录（仍然压缩）

3.  FileA.zip 解压到 parent/module1/FolderA （在解压 zip 的同时创建文件夹 A）

上传和提取过程工作正常，但我无法删除`folderA`其中包含的单个文件或任何单个文件。使用`SSH`or连接时`FTP`，我收到一条`permission denied`错误消息。

我唯一可以删除文件夹或文件的时间是`sudo`在`SSH connection`.

我也在`chmod($target_path, 0777)`文件上传到服务器时运行了，但我仍然遇到相同的文件权限错误。

注意：`module1`创建时权限设置为`0777`，但所有给我带来问题的提取文件都设置为`0644`。

我该怎么做才能将每​​个提取文件的权限设置为**0777**或通过**WinSCP**连接以默认运行**sudo ？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T19:26:04.947

sudo chmod 777 文件名，还要检查您尝试访问的文件/目录的所有权。检查日志是否有错误，它会告诉你权限被拒绝的确切原因

# ios - 为什么视口元常数设备宽度不为 ipad 3 返回 1536 像素而不是 768 像素？

> ID：15956964
> 
> 赞同：0
> 
> 时间：2013-04-11T19:15:26.077
> 
> 标签：ios, meta-tags, viewport, ipad-3, metatag

我不明白你还能如何让每个设备弄清楚页面在所有设备上的屏幕显示方式，如果它只是返回与像素密度较小的旧 ipad 相同的宽度。ipad 3 应该如何知道如何仅使用 viewport 元标记来显示页面？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T19:24:19.787

`window.devicePixelRatio`在视网膜设备上应设置为 2；在 Apple 术语中，提供的宽度是以点而不是像素为单位的屏幕宽度，然后像素比率告诉您每个点有多少像素。

# html - 以 html 形式设置验证消息的样式

> ID：15956967
> 
> 赞同：0
> 
> 时间：2013-04-11T19:15:32.373
> 
> 标签：html, css, forms

我正在尝试为我的 ASP.NET MVC 3 应用程序生成的表单 HTML 设置样式。使用默认样式，标签堆叠在输入控件的顶部，如下所示：

![在此处输入图像描述](https://i.stack.imgur.com/626y8.png)

我已经更改了 css，使标签位于输入控件的左侧，如下所示：

![在此处输入图像描述](https://i.stack.imgur.com/W0JRY.png)

但是，当输入控件是文本区域并且显示验证消息时，我遇到了问题：

![在此处输入图像描述](https://i.stack.imgur.com/f95fs.png)

如您所见，验证消息与文本区域的底部对齐。**我希望它与文本区域的顶部对齐。**

这是 MVC 脚手架生成的 HTML 的一个很好的近似值（结构相同，但我省略了一些 HTML 属性）：

```
<Fieldset>
    <Legend>Form Title</Legend>

    <div class="editor-label">
        <label>Town / City</Label>
    </div>

    <div class="editor-field">
        <textArea></textArea>
        <span class="field-validation-error">
            <span>The town / city field is required</span>
        </span>
    </div>

</Fieldset> 
```

这是我目前的CSS：

```
.editor-label {
    margin: .8em 0 0 .5em;
    clear: left;
    float:left;
    width: 160px;
}

.editor-field {
    margin: .5em 0 0 0;
    float: left;
} 
```

我尝试添加一个样式，该样式以`<span>`和 的类为目标`field-validation-error`，并将`<textarea>`其`display`属性设置为，`inline-block`但这不会改变验证错误的显示方式。

```
.field-validation-error {
    color: #FF0000;
    display: inline-block;
}

textarea {
    font: inherit;
    min-height: 75px;
    display: inline-block;
} 
```

有没有办法定位 span 元素并与 textarea 的顶部对齐显示？理想情况下，我不想更改 HTML（因为这是由 ASP.NET MVC 自动生成的）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T19:20:59.937

将文本区域浮动到左侧 -

```
textarea {
  float:left;
} 
```

新演示[http://jsfiddle.net/kevinPHPkevin/wCVK2/1/](http://jsfiddle.net/kevinPHPkevin/wCVK2/1/)

# python - 插入拼接列表时的奇怪行为？

> ID：15956969
> 
> 赞同：1
> 
> 时间：2013-04-11T19:15:36.773
> 
> 标签：python, python-2.7

我想要实现的是将一个小的二维列表插入一个大的列表中（我使用的是 Python 2.7.3）。

为什么我得到不同的结果`var1`和`var2`？

```
def modify(foo):
    small = [[1]*2]*2
    for y, line in enumerate(small):
        foo[y+1][1:3] = line
    return foo

var1 = [[0]*4]*4
var2 = [
    [0, 0, 0, 0],
    [0, 0, 0, 0],
    [0, 0, 0, 0],
    [0, 0, 0, 0]]

print modify(var1)
print modify(var2)

# Result:
# var1 = [
#   [0, 1, 1, 0],
#   [0, 1, 1, 0],
#   [0, 1, 1, 0],
#   [0, 1, 1, 0]]
#
# var2 = [
#   [0, 0, 0, 0],
#   [0, 1, 1, 0],
#   [0, 1, 1, 0],
#   [0, 0, 0, 0]] 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-11T19:20:54.823

通过使用`[[0]*4]*4`，您实际上是在创建一个列表 ( `[0]*4`) 并对其进行四次引用。

```
>>> var1 = [[0]*4]*4
>>> var1
[[0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0]]
>>> var1[0][0] = 2
>>> var1
[[2, 0, 0, 0], [2, 0, 0, 0], [2, 0, 0, 0], [2, 0, 0, 0]]
>>> var1[0] is var1[1]
True 
```

如果将内部内容替换为变量会更清楚一些

```
>> inner = [0]*4
>> var1 = [inner, inner, inner, inner]
>>> var1
[[0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0]]
>>> inner[0] = 1
>>> var1
[[1, 0, 0, 0], [1, 0, 0, 0], [1, 0, 0, 0], [1, 0, 0, 0]] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T19:21:17.087

`[0]*4``[0, 0, 0, 0]`但是，creates`[[0,0,0,0]]*4`会创建一个包含`[0,0,0,0]`. 这意味着，所有内部列表都是相同的。

# weinre - 设置 weinre 远程调试

> ID：15956974
> 
> 赞同：6
> 
> 时间：2013-04-11T19:15:45.347
> 
> 标签：weinre

[运行 weinre](http://people.apache.org/~pmuellr/weinre/docs/latest/Running.html)状态的说明，我需要插入以下脚本：

```
<script src="http://a.b.c:8081/target/target-script-min.js"></script> 
```

`http://a.b.c`我的服务器 IP 或主机名在哪里。

几个问题：

这是否意味着我必须在远程服务器上打开端口 8081？

还有什么`target-script-min.js`？看来我需要将其上传到`target`文件夹？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-10-18T00:17:56.073

启动 weinre 服务器的方式是运行命令

```
weinre 
```

在你的命令行中。然后，只要您仍在使用 weinre，就让它一直运行。您可以按类型找到此命令的选项`weinre --help`，但重要的是`--boundHost`, 和`--httpPort`。`--boundHost`默认为 localhost，`--httpPort`默认为 8080。所以运行

```
weinre --boundHost 192.168.1.2 
```

其中 192.168.3.4 是您的 IP 地址，您可以通过运行 ipconfig 找到该地址。将以下内容放入您的代码中：

```
<script src="http://192.168.1.2:8080/target/target-script-min.js#whatever"></script> 
```

然后，在您的浏览器中，转到

```
http://192.168.1.2:8080/client/#whatever 
```

我在这里写了一篇关于它的博客文章：[https ://adam.garrett-harris.com/how-to-setup-remote-debugging-in-phonegap](https://adam.garrett-harris.com/how-to-setup-remote-debugging-in-phonegap)

要回答您的第二个问题，target-script-min.js 只是一个 javascript 文件，无论何时安装它都是 weinre 的一部分。当您运行时，您可以访问

```
http://192.168.1.2:8080/target/target-script-min.js 
```

如果需要，可以查看文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-26T17:08:36.470

通过执行此命令“启动” weinre 服务器，`weinre --boundHost a.b.c.d`其中`a.b.c.d`代表用于调试的桌面的本地 IP。该端口`8080`将被打开（默认端口，但您可以配置其他端口）。

此时，该脚本`http://a.b.c.d:8080/target/target-script-min.js`在您的本地网络上可用，并且可以由位于同一本地网络中的其他设备上的应用程序调用。

如果您的应用程序或测试的网页调用此脚本，您的桌面将看到它。

因此，你没有任何东西可以上传到你的目标......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-01-11T13:53:21.973

**维日调试简历**

成功安装weiri后，

1 - 使用您的 IP 地址运行此命令：

```
 weinre --boundHost 192.168.12.3 
```

2 - 在您的代码标题中附加：

```
<script src="http://192.168.12.3:8080/target/target-script-min.js#anonymous"></script> 
```

3 - 在平板电脑或任何设备上访问您的网站

3 - 打开 wenri 调试屏幕：

```
 http://localhost:8080/client/#anonymous 
```

Obs：“匿名”一词可以用您选择的另一个词代替。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-29T08:06:17.027

*[如果您在完成诺基亚开发者文章](http://developer.nokia.com/community/wiki/How_to_debug_Windows_Phone_HTML5_Apps)中提到的所有步骤后***仍无法调试***您的 html 页面，请检查您的 windows 防火墙设置。请确保**专用**网络**的防火墙设置已关闭**。*

 *![windows 8.1 防火墙设置窗口](https://i.stack.imgur.com/QO6z5.png)*

# macos - 使用 Mac OS bless 命令后出错：“no bootable device”

> ID：15956978
> 
> 赞同：0
> 
> 时间：2013-04-11T19:16:09.860
> 
> 标签：macos, operating-system, applescript, bless

我创建了一个从雪豹引导到狮子的苹果脚本，但是 bless 命令失败了。这是命令：

```
do shell script "bless -mount /Volumes/bootdrive/ -legacy -setBoot -nextonly" password "mypassword" with administrator privileges 
```

重新启动时，出现“无可启动设备”错误的黑屏。我已经以 root 身份（而不是作为 applescript）直接在终端中运行该命令，并得到了相同的结果。是的，我已经三重检查了我使用的磁盘路径是否正确并且可以引导。

知道问题可能是什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T20:27:00.853

我没有合适的设置来测试，但这个`-legacy`选项对我来说看起来很可疑。根据[手册页](https://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man8/bless.8.html)，它用于支持基于 BIOS 的操作系统，而 OS X 不支持。尝试删除`-legacy`，看看它是否效果更好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-10-18T13:50:07.127

**工作解决方案**

SIP 是我在 Big Sur 上遇到的第一个问题。关闭它看起来是个坏主意。第二个问题是目标卷列表项没有操作。这使得无法通过点击或“点击”功能点击它们，这可能是因为 Big Sur 上有一些新的额外保护。由于新的 MacOS 限制，使用 AST 和其他脚本单击也不起作用。我发现的唯一方法是使用 python click（但这会在脚本选择目标卷时导致轻微延迟）。

所以这里是一个全自动切换：

```
property targetVolume : "BOOTCAMP" # find name of required volume inside System Preference > Startup Disk
property passwordValue : "yourSystemPassword" # Can be empty

tell application "System Events"
    tell application "System Preferences"
        set current pane to pane id "com.apple.preference.startupdisk"
        activate
    end tell
    tell application process "System Preferences"
        tell window "Startup Disk"
            set volumePosition to {0, 0}
            set lockFound to false

            # Check if auth required
            set authButtonText to "Click the lock to make changes."
            if exists button authButtonText then
                click button authButtonText

                # Wait for auth modal
                set unlockButtonText to "Unlock"
                repeat
                    if (exists sheet 1) and (exists button unlockButtonText of sheet 1) then exit repeat
                end repeat

                # Autofill password if setted
                if passwordValue is not equal to "" then
                    set value of text field 1 of sheet 1 to passwordValue
                    click button unlockButtonText of sheet 1
                end if

                # Wait for auth success
                repeat
                    if exists button "Click the lock to prevent further changes." then exit repeat
                end repeat
            end if

            # Wait until loading volumes list
            repeat
                if exists group 1 of list 1 of scroll area 1 then exit repeat
            end repeat

            # Click on target volume (posible a slight delay because of shell script executing)
            repeat with m in (UI element of list 1 of scroll area 1)
                if (value of first static text of m = targetVolume) then
                    tell static text targetVolume of m
                        set volumePosition to position
                    end tell
                end if
            end repeat
            set volumePositionX to item 1 of volumePosition
            set volumePositionY to item 2 of volumePosition
            my customClick(volumePositionX, volumePositionY)

            click button "Restart…&quot;

            # Wait for restart modal appears
            repeat
                if (exists sheet 1) and (exists value of first static text of sheet 1) then exit repeat
            end repeat

            click button "Restart" of sheet 1
        end tell
    end tell
end tell

# shell script to make click work on target volume
on customClick(x, y)
    do shell script " 

/usr/bin/python <<END

import sys

import time

from Quartz.CoreGraphics import * 

def mouseEvent(type, posx, posy):

          theEvent = CGEventCreateMouseEvent(None, type, (posx,posy), kCGMouseButtonLeft)

          CGEventPost(kCGHIDEventTap, theEvent)

def mousemove(posx,posy):

          mouseEvent(kCGEventMouseMoved, posx,posy);

def mouseclick(posx,posy):

          mouseEvent(kCGEventLeftMouseDown, posx,posy);

          mouseEvent(kCGEventLeftMouseUp, posx,posy);

ourEvent = CGEventCreate(None); 

currentpos=CGEventGetLocation(ourEvent);             # Save current mouse position

mouseclick(" & x & "," & y & ");

mousemove(int(currentpos.x),int(currentpos.y));      # Restore mouse position

END"
end customClick

on simpleEncryption(_str)
    set x to id of _str
    repeat with c in x
        set contents of c to c + 100
    end repeat
    return string id x
end simpleEncryption

on simpleDecryption(_str)
    set x to id of _str
    repeat with c in x
        set contents of c to c - 100
    end repeat
    return string id x
end simpleDecryption 
```

您只需要更改两个属性**targetVolume**和**passwordValue**。密码可以为空，在这种情况下，您可以手动提供。然后只需复制此脚本，将其粘贴到脚本编辑器并通过文件 -> 导出 -> 文件格式 - 应用程序导出，选择仅运行 -> 保存。您可以对您拥有的所有系统执行相同的过程，例如 Big Sur 1、Big Sur 2、Bootcamp。

# javascript - jquery如何获取Youtube视频信息

> ID：15956979
> 
> 赞同：1
> 
> 时间：2013-04-11T19:16:12.433
> 
> 标签：javascript, jquery, html, api, youtube

我正在尝试弄清楚如何使用 jquery 获取 Youtube 视频的所有信息，并且只取得了一点成功。

我使用以下代码获取视频标题和描述...

```
var url = "http://gdata.youtube.com/feeds/api/videos?q=" + id + "&max-results=1&v=2&alt=jsonc";
var title;

$.getJSON(url,
    function(response)
    {
        title = response.data.items[0].title;
        description = response.data.items[0].description;
        author = response.data.items[0].name;

        $('#details-title').text("Title: " + title);
        $('#details-desc').text("Description: " + description);
    }
); 
```

我如何确定使用此方法可以接收哪些其他字段？例如，我正在尝试获取上传者名称和视频长度。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T19:25:15.013

您可以`id`用有效的查询替换您的 url 并访问该 url，它将返回一个 JSON 对象。

现在复制该 JSON 对象并将其放在美化器中（在我的情况下，我使用[jsbeautifier](http://jsbeautifier.org/)）并检查子级`items`并选择您需要的其他字段。

# ruby-on-rails - 实例变量设置与获取

> ID：15956981
> 
> 赞同：0
> 
> 时间：2013-04-11T19:16:20.173
> 
> 标签：ruby-on-rails, ruby

有Permission Model，没有相关的db表，用于授权。使用 before_filter 授权方法创建新的权限对象，这取决于用户和可选的 test_id（另一个模型）。这个想法是它检查测试是否属于用户，它允许这个用户删除这个测试，如果不是，它取消交易。所以我的初始化方法：

```
class Permission
 def initialize(user, *test_id)
   @user = user
   if !test_id.empty?
     test_id.each do |t|
       test = Test.find_by_id(t)  #finding real test record
       self.instance_variable_set(:"@test_#{t}", test) #should set @test_{id} 
           #an instance of this new permission refering to actual test record
     end
   end
   allow :users, [:new,:create]
   allow :root,[]
   allow :session, [:create, :destroy]
   allow :tests, [:new, :create]
   if !test_id.empty?
     for i in 0...test_id.length
       t = self.instance_variable_get(:"@test_#{i}")  #getting this test record.
       if t.user_id == @user.id
         allow :tests, [:edit,:lock,:unlock, :destroy ]
       end
     end
   end
 end 
```

问题是 rails 得到的结果`instance_variable_get`是 nil。所以要么我设置实例@test_{id} 错误，要么得到它。提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T19:44:31.677

您在顶部设置的每个实例变量的格式为`@test_{record_id}`. 您在 for 循环中获得的实例变量的格式为`@test_{loop_index}`. 只需使用与顶部相同的循环即可。

```
test_id.each do |t|
  trec = self.instance_variable_get(:"@test_#{t}")  #getting this test record.
  if trec.user_id == @user.id
    allow :tests, [:edit,:lock,:unlock, :destroy ]
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T19:42:21.723

好吧，伙计们，我刚刚发现，我几乎没有把事情复杂化。在我的情况下，我真的不需要设置或获取实例变量，所以

```
if !test_id.empty?
   test_id.each do |t|
   test=Test.find_by_id(t)
   if test.user_id==user.id
     allow :tests, [:edit,:lock,:unlock, :destroy ]
   end
   end
   end 
```

工作正常

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T19:44:50.460

您将实例变量用作数据库，其主键基于变量名称本身。不用说（我认为？），这不是一个好习惯。您可以使用`instance_variable_set`设置动态实例变量名称，但总的来说，我觉得这会使您的类变得不可预测，因为跟踪数据的行为是如何实现的更加困难。

如果您需要在实例中缓存多个对象，您可以使用数组或哈希等数据结构，并将其设置为自己的实例变量。

# c - 不同操作系统版本的 OpenMP 性能差异

> ID：15956982
> 
> 赞同：0
> 
> 时间：2013-04-11T19:16:21.933
> 
> 标签：c, performance, openmp

我有一段我前段时间写的代码。它的唯一目的是使用 openMP 进行实验。但我最近从 MacBook Pro Lion（2011 年初）切换到 MacBook Pro Mountain Lion（2013 年初）。如果它有助于获得更多其他信息的硬件，我很乐意给他们。该代码在旧代码上运行良好，这意味着 8 个线程在我的处理器上获得了 100%（98% 分钟）的负载。现在，在我的新机器上重新编译的相同代码只能获得 62% 的最大处理器负载。即使我提高线程。处理器负载均使用“istat pro”测量。

我的问题是什么会导致这种情况发生？

编辑：如果我删除 for in ，问题似乎就解决了`#pragma omp parallel for shared(largest_factor, largest)`。所以我明白`#pragma omp parallel shared(largest_factor, largest)` 了但我仍然不明白它为什么有效。

有问题的代码：

```
#include <stdio.h>
#include <omp.h>

double fib(double n);

int main()
{
    int data[] = {124847,194747,194747,194747,194747,
                  194747,194747,194747,194747,194747,194747};
    int largest, largest_factor = 0;

    omp_set_num_threads(8);
    /* "omp parallel for" turns the for loop multithreaded by making each thread
     * iterating only a part of the loop variable, in this case i; variables declared
     * as "shared" will be implicitly locked on access
     */
    #pragma omp parallel for shared(largest_factor, largest)
    for (int i = 0; i < 10; i++) {
            int p, n = data[i];

            for (p = 3; p * p <= n && n % p; p += 2);
            printf("\n%f\n\n",fib(i+40));
            if (p * p > n) p = n;
            if (p > largest_factor) {
                    largest_factor = p;
                    largest = n;
                    printf("thread %d: found larger: %d of %d\n", 
                            omp_get_thread_num(), p, n);
            } 
            else 
            {
                    printf("thread %d: not larger:   %d of %d\n", 
                           omp_get_thread_num(),     p, n);
            }
    }

    printf("Largest factor: %d of %d\n", largest_factor, largest);
    return 0;
} 

double fib(double n)
{ 
if (n<=1)
{
    return 1;
}
else
{
    return fib(n-1)+fib(n-2);
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T08:41:36.823

您没有看到所有线程都在使用的主要原因是每个线程花费不同的时间（由于递归函数或内部循环）并且您只有 10 次迭代。快速线程快速完成，然后只剩下几个线程可以运行。当你第一次运行你的代码时，它会 100% 开始运行，然后随着快速线程的完成和最后几个慢速线程仍在运行而下降。如果您将迭代次数更改为 100（并增加数据数组），您将看到 CPU 使用率保持在 100% 的时间会更长。我在您的代码中添加了一些计时打印输出。

此外，我认为您的共享变量存在竞争条件，因此我放入了一个关键部分。

要回答关于没有“for”语句的代码的问题，这样做是在八个不同的线程上运行相同的代码！它们不是运行特定迭代的线程，而是每个运行所有 10 次迭代。这不会比运行单个线程快，甚至可能更慢。

最后，由于每次迭代通常需要不同的时间，您应该像这样使用“schedual(dynamic)”

```
#pragma omp parallel for shared(largest_factor, largest) schedule(dynamic) 
```

但是，由于您只有 10 次迭代，我认为在这种情况下不会有太大的不同。这是我对您的代码所做的操作，以了解发生了什么：

```
#include <stdio.h>
#include <omp.h>

double fib(double n);

int main()
{
    int data[] = {124847,194747,194747,194747,194747,
                  194747,194747,194747,194747,194747,194747};
    int largest, largest_factor = 0;

    omp_set_num_threads(8);
    /* "omp parallel for" turns the for loop multithreaded by making each thread
     * iterating only a part of the loop variable, in this case i; variables declared
     * as "shared" will be implicitly locked on access
     */
    #pragma omp parallel for shared(largest_factor, largest)
    for (int i = 0; i < 10; i++) {
            int p, n = data[i];
        double time = omp_get_wtime();
        for (p = 3; p * p <= n && n % p; p += 2);
        printf("\n iteratnion %d, fib %f\n\n",i, fib(i+40));
        time = omp_get_wtime() - time;
        printf("time %f\n", time);

        if (p * p > n) p = n;
        #pragma omp critical
        {
           if (p > largest_factor) {        
              largest_factor = p;
              largest = n;      
              printf("thread %d: found larger: %d of %d\n", 
                    omp_get_thread_num(), p, n);
            } 
            else {
                printf("thread %d: not larger:   %d of %d\n", 
                        omp_get_thread_num(),     p, n);
            }
        }
    }

    printf("Largest factor: %d of %d\n", largest_factor, largest);
    return 0;
} 

double fib(double n) { 
if (n<=1) {
    return 1;
}
else {
    return fib(n-1)+fib(n-2);
}
} 
```

# html - 如何设置一个 div 与另一个 div 具有相同的高度？

> ID：15956992
> 
> 赞同：0
> 
> 时间：2013-04-11T19:17:03.787
> 
> 标签：html, css

有以下简单的结构：

```
<div id="container">
   <div id="header">...</div>
   <div id="menu">...</div>
   <div id="content">...</div>
   <div id="footer">...</div>
</div> 
```

我需要菜单和内容具有相同的高度，但我不能设置为常数。我将这两个项目的“最小高度”设置为“600px”，但现在“内容”超过 600 像素，但“菜单”有 600 像素。我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T19:29:42.263

如果你不太关心IE6和IE7，最简单的答案是设置

`display: table-cell;`

在你的每一列。只需检查[http://ie7nomore.com/css2only/table-layout/](http://ie7nomore.com/css2only/table-layout/)这个纯 CSS2.1 解决方案（两列都是 contenteditable，因此您可以轻松地在一个和/或另一列中添加行和文本行）
不它不是不要像某些人所说的那样“使用表格”：`table`CSS 属性的值`display`与 HTML 元素的呈现方式相同，`table`但它仍然是 a 的语义`div`（即没有）或它应用于的任何元素；）

然后对于 IE6 和 IE7，您可以使用条件注释进行简单的回退（例如将背景应用到其中一列，如果另一列在某些页面中较长...没关系，忘记它，它是旧 IE，您的文本仍然可读)

另一种方法（视觉技巧）是*假列技术*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T20:43:42.693

我使用了 display: inline-block，这是你要找的吗？

[http://jsfiddle.net/SMxRs/1/](http://jsfiddle.net/SMxRs/1/)

```
#header, #menu, #content, #footer {
 width: 600px;
 height: 500px;
 background: #ccc;
 padding-left: 10px;
 display: inline-block;
}
#container {
width: 2500px;
 } 
```

# encryption - 如何在脚本中解码奇怪的加密？

> ID：15956993
> 
> 赞同：-1
> 
> 时间：2013-04-11T19:17:10.920
> 
> 标签：encryption

我为海盗湾经营代理。我不认为我被允许链接到脚本本身，但它被称为“畅通无阻的海盗湾”。

而且这个脚本没有我所知道的*正常代码。*它加密（？）一切，我有点怀疑。它看起来有点像这样（但没有空格）。

```
eval(
    gzinflate(
        str_rot13(
        base64_decode('')
        )
    )
); 
```

在 base64_decode 内部是一个很长的随机字符串列表（约 8000 个字符）。有没有一种快速简便的方法来解码？所以我可以看到发生了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T19:19:56.393

是的。答案就在你的问题中。拿可怕的字符串，[base64解码](http://en.wikipedia.org/wiki/Base64)，[ROT13](http://en.wikipedia.org/wiki/Rot13)，然后[GZ膨胀](http://en.wikipedia.org/wiki/Gzip)。当您这样做时，您将拥有可执行的 JavaScript 代码。我怀疑它会被高度混淆并且不是很可读，但它至少是有效的 JavaScript。

# excel - 单元格中的 InStr 搜索和逗号

> ID：15956999
> 
> 赞同：3
> 
> 时间：2013-04-11T19:17:26.647
> 
> 标签：excel, vba

我有一堆包含文本的行列，例如：

```
dog,cat,mouse
bat,dog,fly
fish,beaver,horse 
```

我正在尝试搜索并突出显示包含特定单词的行：

```
Public Sub MarkDuplicates()
Dim iWarnColor As Integer
Dim rng As Range
Dim rngCell As Variant
Dim LR As Long
Dim vVal
Dim tRow

LR = Cells(Rows.Count, "B").End(xlUp).Row

Set rng = Range("B1:B" & LR)
iWarnColor = xlThemeColorAccent2

For Each rngCell In rng.Cells
    tRow = rngCell.Row
    If InStr(rngCell.Value, "dog") = 1 Then
        rngCell.Interior.ColorIndex = iWarnColor

    Else
        rngCell.Interior.Pattern = xlNone
    End If
Next 
```

结束子

只要单词“dog”是逗号字符串中的第一个单词，它就可以正常工作，因此它将突出显示第一行而不是第二行，因为单词“dog”出现在“bat”之后。我需要先去掉逗号还是有更好的方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-11T19:33:24.820

看起来您的最终目标是根据“狗”是否在单元格中为行着色。这是一种甚至不涉及 VBA 的不同方法（此示例假设您的数据都在 A 列中）：

1.  在右侧创建一个新列。使用公式`=IF(NOT(ISERROR(FIND("dog",A1))),1,0)`。您可以稍后隐藏该列，以便用户看不到它。基本上，如果它在某处有“狗”这个词，则返回 1，否则返回 0。
2.  选择整个第一行
3.  在**条件格式**下，转到**新规则**
4.  选择**使用公式**
5.  对于您的公式，请尝试`=$B2=1`
6.  现在您已经有条件地为一行着色，将**格式复制并粘贴**到其他行。

现在所有行都应该自动更新。

额外积分：如果此数据被格式化为表格对象，则条件格式应在添加新行时自动延续到新行。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-11T19:35:22.503

除了我上面的评论

**示例 1**（使用`.Find`和`.Findnext`）

```
Option Explicit

Public Sub MarkDuplicates()
    Dim ws As Worksheet
    Dim iWarnColor As Integer
    Dim rng As Range, aCell As Range, bCell As Range
    Dim LR As Long

    Set ws = ThisWorkbook.Sheets("Sheet1")

    iWarnColor = xlThemeColorAccent2

    With ws
        LR = .Range("B" & .Rows.Count).End(xlUp).Row

        Set rng = .Range("B1:B" & LR)

        rng.Interior.ColorIndex = xlNone

        Set aCell = rng.Find(What:="dog", LookIn:=xlValues, _
                    LookAt:=xlPart, SearchOrder:=xlByRows, SearchDirection:=xlNext, _
                    MatchCase:=False, SearchFormat:=False)

        If Not aCell Is Nothing Then
            Set bCell = aCell
            aCell.Interior.ColorIndex = iWarnColor
            Do
                Set aCell = rng.FindNext(After:=aCell)

                If Not aCell Is Nothing Then
                    If aCell.Address = bCell.Address Then Exit Do
                    aCell.Interior.ColorIndex = iWarnColor
                Else
                    Exit Do
                End If
            Loop
        End If
    End With
End Sub 
```

**截屏**

![在此处输入图像描述](https://i.stack.imgur.com/Q3wbi.png)

**示例 2**（使用自动过滤器）

为此，请确保单元格中有一个标题`B1`

```
Option Explicit

Public Sub MarkDuplicates()
    Dim ws As Worksheet
    Dim iWarnColor As Integer
    Dim rng As Range, aCell As Range
    Dim LR As Long

    Set ws = ThisWorkbook.Sheets("Sheet1")

    iWarnColor = xlThemeColorAccent2

    With ws

        '~~> Remove any filters
        .AutoFilterMode = False

        LR = .Range("B" & .Rows.Count).End(xlUp).Row

        Set rng = .Range("B1:B" & LR)

        With rng
            .AutoFilter Field:=1, Criteria1:="=*dog*"
            Set aCell = .Offset(1, 0).SpecialCells(xlCellTypeVisible)
        End With

        If Not aCell Is Nothing Then aCell.Interior.ColorIndex = iWarnColor

        '~~> Remove any filters
        .AutoFilterMode = False
    End With
End Sub 
```