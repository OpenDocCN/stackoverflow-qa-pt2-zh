# StackOverflow 问答 14911000-14911999

# php - php sleep() 或记录失败的登录尝试次数？

> ID：14911002
> 
> 赞同：1
> 
> 时间：2013-02-16T13:48:52.850
> 
> 标签：php

目的是防止（尽可能）暴力攻击。

一种解决方案 php sleep()，但读取它使用大量服务器资源（例如，这里[http://bytes.com/topic/php/answers/745681-how-does-sleep-work](http://bytes.com/topic/php/answers/745681-how-does-sleep-work)）。

其他解决方案，在 mysql 中记录登录次数，在第 2 次或第 3 次登录失败后，回显和验证验证码，在 5-6 次登录失败后设置一些时间限制（如何在没有 sleep() 的情况下进行操作）......等等。问题是：这样做方法会使用更少的系统资源吗？

请就一些防止暴力攻击的好方法提出建议......可能是在一定次数的登录尝试失败后重定向到某个地方，或者显示一些不同的内容......？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T14:08:34.780

您的问题`"Prevention against bruteforce"`极具争议性和技术性。
我同意`sleep()`用于预防暴力破解根本不是一个好的选择。但是针对暴力破解的防弹保护是不可能的。是的，我们能做的就是让它尽可能地难。

**我的算法**：
1）3 次登录尝试。如果用户登录正常，否则第 2 步。第一个问题是第一步。在进一步导航之前，您必须记录所有尝试并对其进行计数。与第 2 步相同。

2) 3 个验证码验证。如果用户登录正常，否则步骤 3。

3）在阻止列表中添加用户名并在特定时间限制后将其删除。当然，这种添加和删除它会使用一些额外的资源，并且在实现方面肯定会增加一些复杂性。

4) 每当任何用户尝试登录时，首先检查该用户名是否在阻止列表中。如果不在阻止列表中，则执行第 1 步。如果在阻止列表中，则显示一条消息。

但是，让我明确一点，为了建立一个***真正***能够抵抗暴力破解的系统，你必须研究关于暴力破解的细节和操作方法。它不是小菜一碟。不要指望在 SO 或其他任何地方得到完整的答案。

我还想从其他人那里了解他们的想法。

# jquery - 使用 window.location.hash 链接并打开特定选项卡

> ID：14911003
> 
> 赞同：0
> 
> 时间：2013-02-16T13:48:55.043
> 
> 标签：jquery, function, hash, tabs

我有以下代码在单击时打开和关闭选项卡。想要一个 ahref 链接来打开一个选项卡（通过 window.location.hash），但我无法实现。关于如何在链接到哈希变量时打开特定选项卡的任何想法？

编码：

```
jQuery(document).ready(function() {
// Initialize to closed
jQuery('.wp-super-faq-answer').hide();  

// If a closed question is clicked
jQuery('.wp-super-faq-question-closed').live('click', function(event) {
    event.preventDefault();
    window.location.hash = jQuery(this).attr('id');
    var wp_super_faq_id = '#' + jQuery(this).attr('id') + '-answer';
    jQuery(this).removeClass().addClass('wp-super-faq-question-open');
    jQuery(wp_super_faq_id + ' .wp-super-faq-triangle').html('&#9660;');
    jQuery('.wp-super-faq-answer' + wp_super_faq_id).slideDown();

});

// If an open question is clicked
jQuery('.wp-super-faq-question-open').live('click', function(event) {
    event.preventDefault();
    var wp_super_faq_id = '#' + jQuery(this).attr('id') + '-answer';
    jQuery(this).removeClass().addClass('wp-super-faq-question-closed');
    jQuery(wp_super_faq_id + ' .wp-super-faq-triangle').html('&#9654;');
    jQuery('.wp-super-faq-answer' + wp_super_faq_id).slideUp();
});

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T14:16:53.200

您可以在 hashchange 上使用事件侦听器来触发所需的方法。

```
$(window).on("hashchange",function() {
   ...
}); 
```

进一步请使用[.on()](http://api.jquery.com/on/)而不是[.live()](http://api.jquery.com/live/)。

# perl - 为什么我不能通过 typeglob 访问词法变量？

> ID：14911006
> 
> 赞同：3
> 
> 时间：2013-02-16T13:49:15.703
> 
> 标签：perl

我不明白为什么下面的示例会失败（测试 2）。为什么我不能从 *bb glob 访问变量 bb？

```
use Test::More tests => 4;

$aa = 1;
my $bb = 2;   # HERE!
local $cc = 3;
our $dd = 4;

is(${*aa}, 1, "$ \*aa should be 1");
is(${*bb}, 2, "$ \*bb (my) should be 2");
is(${*cc}, 3, "$ \*cc (local) should be 3");
is(${*dd}, 4, "$ \*dd (our) should be 4"); 
```

输出是

```
1..4
ok 1 - *aa should be 1
#   Failed test '*bb (my) should be 2'
#   at untitled line 10.
#          got: undef
#     expected: '2'
# Looks like you failed 1 test of 4.
not ok 2 - *bb (my) should be 2
ok 3 - *cc (local) should be 3
ok 4 - *dd (our) should be 4 
```

perl 5.16.0 下

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-16T14:12:26.477

词法变量（用创建的）不是符号表的一部分，因此*glob*`my`无法访问它们。另请参见[符号表和 Glob](http://www.perlmonks.org/?node_id=211441)。

# java - 用MPL写的Java代码，说错了？

> ID：14911010
> 
> 赞同：-2
> 
> 时间：2013-02-16T13:49:22.430
> 
> 标签：java

我需要写一些代码，但 MPL 说错了？无法弄清楚出了什么问题？

编写一个 Counter 类的定义，其中包含：

*   一个名为 counter 的 int 类型的实例变量。
*   一个名为 limit 的 int 类型的实例变量。
*   一个名为 nCounters 的静态 int 变量，初始化为 0 。
*   构造函数采用两个 int 参数，将第一个分配给 counter ，将第二个分配给 limit 。它还将静态变量 nCounters 加一。
*   一个名为 increment 的方法。它不带参数或返回值；如果实例变量 counter 小于 limit，则 increment 只会将实例变量 counter 加一。
*   一个名为 decrement 的方法，它也不接受参数或返回值；如果 counter 大于零，它只是从 counter 中减一。
*   一个名为 getValue 的方法，它返回实例变量 counter 的值。
*   一个名为 getNCounters 的静态方法，它返回静态变量 nCounters 的值。

我写的代码：

```
public class Counter {

    private int counter;
    private int limit;
    private static int nCounters = 0;

    public Counter(int counter, int limit) {
        nCounters++;

    }

    public void increment() {
        if (counter < limit) {
            counter++;
        }
    }

    public void decrement() {
        if (counter > 0) {
            counter--;
        }
    }

    public int getValue() {
        return counter;
    }

    public static int getNCounters(){
        return nCounters;
    }
} 
```

MPL 说：

> 备注：
>      ⇒您的构造函数没有正确初始化计数器
>      ⇒您的代码在执行过程中出错
> 
> 检测到的问题：
>      ⇒ 计数器的值不正确

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-16T13:52:06.997

当然，至少来自 MPL 的第一个“评论”很清楚？（它应该对 . 说同样的话`limit`。）这是说你的构造函数从不初始化`counter`. 事实上，它没有。你的构造函数是：

```
public Counter(int counter, int limit) {
    nCounters++;

} 
```

在其中，您希望设置实例变量`this.counter`和`this.limit`某些东西（可能您希望将它们设置为具有相同名称的参数的值）。

* * *

回复您的评论：

> 如果我知道你在说什么，我可以自己弄清楚。也许有关 this.counter 部分的更多解释？

如果您不理解上述内容（我们曾经都是新手！！），我建议您退后一步，阅读一本好的、基本的 Java 书籍和/或教程。

“构造函数”是作为创建类（对象）实例的一部分自动调用的函数。（“实例”是一个特定的内存对象。）例如，当你这样做时

```
Counter c = new Counter(1, 10); 
```

...您正在调用该类的构造函数`Counter`来创建该类的*实例*。Java 中的构造函数的定义很像方法的定义，但没有返回值，所以我上面引用的是`Counter`类的构造函数。

“实例字段”（或“实例数据成员”）实际上是与特定对象相关的变量。您的班级中有两个：`counter`和`limit`，您已这样声明：

```
private int counter;
private int limit; 
```

您还有一个名为的类（或“静态”）字段`nCounters`：

```
private static int nCounters = 0; 
```

构造函数的“参数”是您在构造函数定义中放在括号中的内容，因此您的`counter`and `limit`. 即使它们与您的实例字段具有相同的名称（在您的示例中），但它们与它们没有任何关系。你可以打电话给他们`c`，`l`如果你喜欢的话。

MPL 告诉您的是，您没有`counter`在构造函数中为 ("initialized") 设置初始值。它应该告诉你同样的事情`limit`。它们将具有 Java 的默认字段初始值`int`，即`0`. 但是由于您在构造函数中接受参数，因此您可能想要使用这些参数。例如：

```
public Counter(int counter, int limit) {
    this.counter = counter;
    this.limit = limit;
    nCounters++;
} 
```

我不得不写`this.counter =`，而不仅仅是`counter =`因为参数与实例字段具有相同的名称。如果没有，`this.`将是可选的。（我不喜欢放弃它，但很多人都喜欢。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T14:04:02.663

@TJ Crowder 已经给出了解释

他的意思是：像这样修改你的构造函数：

```
public Counter(int counter, int limit) {
  this.counter = counter;
  this.limit = limit;  
  nCounters++;

} 
```

在您的代码中，您的构造函数没有初始化那些实例变量

# javascript - 如何应用 twitter 等可切换主题？

> ID：14911011
> 
> 赞同：0
> 
> 时间：2013-02-16T13:49:45.657
> 
> 标签：javascript, html, css

我是一个新手程序员，一个对设计知之甚少的大学生。我正在开发一个像 twitter 这样的微博网站，我想使用像 twitter 这样的预加载样式（或主题），我看到一个网站的页面源具有相同的功能，他们似乎没有使用不同的 CSS 文件可能是我不明白。我的问题是，如何将其应用于我的网站？请从基本描述，因为我对这件事了解不多！提前致谢。！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T13:55:13.767

好吧，首先您需要让您的用户能够进行一些更改。假设您已经拥有了。

您需要的是一个基本 CSS 文件，它包含所有规则和样式，除了您允许用户指定的规则和样式（或为它们设置一些默认值）。

在用户指定规则后，生成一个 css 文件，将其存储在他们的用户文件夹（或数据库，但我不建议这样做）中，然后在有人登录时加载该 css 以及您拥有的基本 css 文件用户的个人资料。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T13:55:28.963

您可能会有一个中央 CSS 文件定义一堆不变的东西，然后是一个提供“主题”的辅助 CSS 文件。您将拥有几个这样的辅助文件，每个主题一个。构建页面时，您只需包含`link`其中一个文件的元素。

如果您想允许即时更改主题，您可以通过更改该`href`元素`link`的 来实现。

例如，如果我们假设`link`这样：

```
<link id="themeStyle" href="green.css" rel="stylesheet"> 
```

然后这段代码改变了它：

```
document.getElementById("themeStyle").href = "blue.css": 
```

完整示例：[Live Copy](http://jsbin.com/olepuh/1) | [资源](http://jsbin.com/olepuh/1/edit)

HTML：

```
<!DOCTYPE html>
<html>
<head>
<meta charset=utf-8 />
<title>JS Bin</title>
  <link id="themeStyle" href="/acofoy/1" rel="stylesheet">
</head>
<body>
  <div id="group">
  <div><label><input name="theme" type="radio" value="1" checked>Green</label></div>
  <div><label><input name="theme" type="radio" value="2">Blue</label></div>
  <div><label><input name="theme" type="radio" value="3">Red</label></div>
  </div>
</body>
</html> 
```

JavaScript：

```
(function() {

  var buttons = document.getElementById("group").getElementsByTagName("input");
  var index;

  for (index = 0; index < buttons.length; ++index) {
    buttons[index].onclick = setStyle;
  }

  function setStyle() {
    document.getElementById("themeStyle").href = "/acofoy/" + this.value;
  }

})(); 
```

注意：我使用数字而不是名称作为值，因为我使用的是 JSBin。当然，在现实生活中，我会使用名称（`green.css`、`blue.css`、`red.css`等）。

# libgdx - 更改 IosGraphics.java 后为 iOS 更新和重建 libGDX

> ID：14911017
> 
> 赞同：0
> 
> 时间：2013-02-16T13:50:35.950
> 
> 标签：libgdx

在我的游戏中，当我触摸广告然后按返回按钮返回我的游戏时，我得到了一个黑屏。我提到了这个论坛讨论[http://badlogicgames.com/forum/viewtopic.php?f=11&t=7673](http://badlogicgames.com/forum/viewtopic.php?f=11&t=7673)，它建议在 libGDX 库中解决问题。

我试图改变`IosGraphics.java`，但改变并没有反映在 monotouch 项目中。

我做了以下事情：

1.  提取 nightly.zip 并打开`gdx-backend-iosmonotouch-sources`
2.  从那里我改变了`IosGraphics.java`。
3.  然后我制作了一个新的 jar 文件`gdx-backend-iosmonotouch.jar`，并将其替换为 nightly 文件夹中的原始 jar 文件。
4.  将 nightly 文件夹中的所有文件压缩到一个新的 .zip 文件中。
5.  我使用我的新 .zip 文件通过 .zip 创建了一个新项目`gdx-setup-ui.jar`。
6.  我试图在 monotouch 中打开我的项目，并且从 com-gdx-backendios.dll 中我发现其中的更改`IosGraphics`没有得到反映。

我错过了什么吗？或者还有其他更好的方法吗？

我什至尝试`gdx-backend-iosmonotouch-sources.jar`用winrar打开并编辑`IosGraphics.java`并保存它。这也没有用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T15:37:56.597

libGDX 构建过程中可能有一些你没有做过的时髦步骤，因此以官方方式进行构建可能是最安全的。我不知道具体与您所做的有什么不同...

需要注意的`gdx-backend-iosmonotouch-sources.jar`是，提供它是为了在构建您自己的项目时可以从您的编辑器中查找和读取 libGDX 代码。它不是为重建 libGDX 代码而打包的。

以下是重建 libGDX 的官方步骤：

1.  [从github](https://github.com/libgdx/libgdx)下载源代码树（使用 git 或者您可以获取`.zip`源代码树）。
2.  （`ant`如果您还没有安装它。）
3.  获取最新的二进制文件以与源一起使用：`ant -f fetch.xml`
4.  更改为`./backends/gdx-backend-iosmonotouch/src/com/badlogic/gdx/backends/ios/IOSGraphics.java`
5.  构建一个新的发行版 .zip：`ant`
6.  通过 .zip 安装生成的 .zip `gdx-setup-ui.jar`。

# python - Python中的线程 - 如何等待未知数量的其他线程

> ID：14911018
> 
> 赞同：0
> 
> 时间：2013-02-16T13:50:36.033
> 
> 标签：python, multithreading

我确信有一个非常简单的解决方案 - 我只是不知道在哪里寻找它。

我有一种方法如下：

```
 @staticmethod  
def serverstart(self):
    '''
    This binds the serverobject to a port (here: 50001) and creates a list of clients.
    For each client, a new clientthread object is created. There exist two different lists, one for the 
    sockets (literally) and one for the clientthreads
    '''
    logging.getLogger(__name__).info("Servergestartet(Verbindung usw)") 
    self.server = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
    self.server.setsockopt(socket.SOL_SOCKET, socket.SO_REUSEADDR, 1)
    self.server.bind(("", 50001)) 
    self.server.listen(1)
    #the list for the sockets
    self.clients = []
    #the list for the clientthreads
    self.clientthreads = []
    #hallo = "hallo" 
    self.clientnumber = 0          

    try: 
        while True: 
            lesen, schreiben, oob = select.select([self.server] + self.clients, 
                                         [], [])

            for sock in lesen: 
                if sock is self.server: 
                    client, addr = self.server.accept() 
                    myclient = clientthread.Clientthread(client, self.clientnumber, self)
                    self.clientnumber= self.clientnumber+1
                    myclient.start()
                    self.clients.append(client) 
                    self.clientthreads.append(myclient)
                    print "+++ Client %s verbunden" % addr[0] 
                #else: 
                    #nachricht = sock.recv(1024) 
                    #ip = sock.getpeername()[0] 
                    #if nachricht: 
                        #print "[%s,%d] %s" % (ip, self.clients.index(sock),nachricht) 
                    #else: 
                        #print "+++ Verbindung zu %s beendet" % ip 
                        #sock.close() 
                        #self.clients.remove(sock) 
    finally:
        logging.getLogger(__name__).info("serverstart ist durchgelaufen") 
```

因此，每当有新客户端连接时，就会创建一个新的 Clientthread 实例。

Clientthread 现在继承自 Threading：

```
class Clientthread(threading.Thread):

   def __init__(self,clientsocket, clientnumber, server):

         threading.Thread.__init__(self)

       def run(self):
    from modules.logic import game
    '''
    as clientthread inherits from threading.Thread, this is this Thread's run-method.
    All it does is start the thread with the processkeysmethod - by now.
    '''
    logging.getLogger(__name__).info("Runmethode des Clientsockets läuft")
    logging.getLogger(__name__).info("Daten aus dem Client werden verarbeitet")

    while True:
        try:
            Clientthread.prepareDataforClient(self)
            Clientthread.processkeys(self)
        except Exception as e:
            print e 
```

现在，当然每个 Clientthread 实例都在同一个全局数据上工作。

我的问题是现在，我该如何同步呢？事实上，其中一个客户端线程无法知道还有多少其他客户端线程 - 从技术上讲，它可以是从零开始的任何数字。

有没有简单的方法来解决这个问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T23:41:16.943

您需要一个互斥锁来同步线程对共享资源的访问。然后，您可以像这样使用互斥锁：

```
with mtx:
    # access shared data 
```

也就是说，还有几个问题：

*   您究竟需要什么并不是 100% 清楚的。如果 RLock 解决了您的问题，那么这与您正在编写而不只是阅读的陈述有何对应？
*   此外，请稍微清理一下您的代码，删除不必要的内容，例如注释代码。
*   缩进是关闭的，这在 Python 中是一种罪过。
*   @staticmethod 的使用很奇怪。
*   调用`ClassName.function(self)`可能最好写成`self.function()`.
*   使用 super() 调用基类的 init 函数。
*   如果您在客户端和客户端线程之间有 1:1 的关系，那么通过将它们聚合在一个公共类中可以更好地建模。

最后，我不确定我是否能正确解释这一点，我宁愿不从 Thread 派生。对象不是线程，而是代表一个，类似于文件。创建一个将创建一个线程，但例如销毁一个不会停止线程，因此我发现推导不自然。然后看起来像这样：

```
s = accept(...)
th = threading.Thread(target=connection_handler_function, args=(s,))
th.daemon = True # you probably want that
th.start() 
```

# ruby-on-rails - DB2 Adapter for Ruby on Rails 与 ActiveRecord JDBC 适配器

> ID：14911022
> 
> 赞同：2
> 
> 时间：2013-02-16T13:51:06.523
> 
> 标签：ruby-on-rails, jdbc, db2, jruby, adapter

谁能指出使用“DB2 Adapter for Ruby on Rails”和“Active Record JDBC Adapter”之间的区别和好处？

通常，我将使用“jRUby on Rails”和“DB2 Express-C”，到目前为止，我认为将 IBM DB2 数据库与 RoR 应用程序连接的唯一方法是使用[ActiveRecord JDBC Adapter](https://github.com/jruby/activerecord-jdbc-adapter)。

无论如何，在[DB2 Express C](http://www-01.ibm.com/software/data/db2/express-c/download.html)下载页面上，有一个指向[Rails Driver 和 Apdater for DB2](http://rubygems.org/gems/ibm_db) gem 的链接。

我应该使用哪一个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T00:47:15.097

如果您打算使用 Jruby 进行 Web 开发，那么您只能使用`ActiveRecord JDBC Adapter`

您不能使用`IBM_DB`gem，因为它会在安装过程中构建原生 C 库。更多细节在[这里](https://github.com/jruby/jruby/wiki/GettingStarted)

您`database.yml`可以如下所示（据我所知）。如果您遇到与`CLASSPATH`

```
 development:
    adapter: jdbc
    driver: com.ibm.db2.jcc.DB2Driver
    url: localhost:50001/devdb
    host: localhost
    port: 50001
    database: devdb
    username: username
    password: password 
```

# asp.net-mvc - Azure 云服务部署：类型或命名空间名称“助手”不存在

> ID：14911024
> 
> 赞同：1
> 
> 时间：2013-02-16T13:52:02.283
> 
> 标签：asp.net-mvc, azure, asp.net-mvc-4, azure-web-roles

我在 Azure 项目上配置了 MVC4 Web 角色。在本地（在模拟器上）它工作正常。我在运行时不断收到此错误：

> 命名空间“Microsoft.Web”中不存在类型或命名空间名称“Helpers”（您是否缺少程序集引用？）

我试过了：

*   将 System.Web.Helpers DLL 直接添加到 BIN 文件夹中
*   在项目上引用程序集并设置 CopyLocal=true
*   连接到 azure 云服务上的远程桌面并在服务器上安装 MVC 以查看是否是问题所在。它仍然存在。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T19:48:44.980

好的，所以我最终删除了对 System.Web.Helpers 的引用并安装了 nuget Package Microsoft-Web-Helpers。

这解决了问题。

# java - 如何构建（gwt + jsf 2.0 + spring），jboss

> ID：14911027
> 
> 赞同：0
> 
> 时间：2013-02-16T13:52:10.253
> 
> 标签：java, spring, gwt, maven, jboss7.x

我要做的是创建两个依赖于第三个项目的项目，例如：

1.  GWT Project - 用于我的管理界面
2.  JSF 2 Project - 用于我的前端界面
3.  Spring - 用于业务逻辑

你要我做什么？如何使用 maven 创建这些项目，以及当我运行 package 以打包我的 GWT、JSF、Spring 项目然后将它们添加到耳朵中时？

*   GWT--战争
*   JSF-战争
*   Spring - jar（我将使用 spring-data 从数据库中获取内容）

**我必须拥有什么？2个maven模块和1个maven项目？哪些是maven模块？哪个是maven项目？**

我怎样才能编写一个构建（我不知道在什么 -`ant`或`maven`）来归档所有这些项目（在一个`ear`）并将其部署到`jboss`？这是正确的方法吗？

是否可以直接在`jboss`from中运行所有这些项目`eclipse`？这样我就不必每次更改某些内容时都重新构建和部署？

*   我应该使用maven吗？
*   我应该用什么来清理我的项目？
*   我应该使用`ant`and`maven`吗？难道只能用`maven`吗？
*   当我想进行部署时应该发生的确切过程是什么？

**已编辑**

1.  我创建了 1 个 Maven 项目 ProjectEAR
2.  我使用[GWT 原型创建了 1 个 maven 模块](http://mojo.codehaus.org/gwt-maven-plugin/)
3.  我使用 spring-data 原型创建了 1 个 maven 模块

我将 2`modules`作为依赖项添加到我的`maven project`，然后我添加了一个构建，`ear`如下`maven-ear-plugin`所示：

```
<plugin>
    <artifactId>maven-ear-plugin</artifactId>
    <version>2.8</version>
    <configuration>
        <finalName>project</finalName>
        <version>5</version>
        <generatedDescriptorLocation>${basedir}/src/main/application/META-INF</generatedDescriptorLocation>
        <modules>
            <javaModule>
                <groupId>ro.myproject</groupId>
                <artifactId>business-logic</artifactId>
                <bundleFileName>busineeLogic.jar</bundleFileName>
            </javaModule>
            <webModule>
                <groupId>ro.myproject</groupId>
                <artifactId>admin</artifactId>
                <bundleFileName>admin.war</bundleFileName>
                <contextRoot>/admin</contextRoot>
            </webModule>
        </modules>
    </configuration>
</plugin> 
```

但是现在，当我`ear`在`jboss-as-7.1.1`我的`admin.war`内部部署时`ear`，没有正确部署......它没有提取生成的 GWT 文件夹......

![部署细节](../Images/f818166f362592ebd69c0684b2a72ee8.png)

因此，我`GWT application`的加载不正确=>它无法正常工作，因为我`*.nocache.js`位于该文件夹中...

我现在能做什么？我做错什么了吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T13:59:45.913

通常你会有一个父项目，下面有 4 个子项目：

1.  GWT
2.  JSF
3.  常见（您的业务逻辑）
4.  耳朵

GWT 和 JSF 依赖共同点。EAR 依赖于 GWT 和 JSF

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T13:55:41.357

我用一个解决方案编辑了我的帖子，它是这样工作的。

我遇到的问题是我使用但未添加但正在创建它自己的项目添加`EAR application`到 JBOSS ... .`eclipse``eclipse``ear``jboss`

# linux - CVSROOT 只能指定一个正的、非零的整数端口

> ID：14911028
> 
> 赞同：1
> 
> 时间：2013-02-16T13:52:11.357
> 
> 标签：linux, version-control, cvs

我正在尝试在 Linux 服务器机器上编译和构建我们的项目，从 Windows 存储库获取源代码。由于此错误，似乎无法从 Ubuntu 访问存储库路径“c:\repository”：

```
cvs login: CVSROOT may only specify a positive, non-zero, integer port (not `c:').
cvs login: Perhaps you entered a relative pathname? 
```

如何在不使用 eclipse 或任何 gui 客户端的情况下从 Ubuntu 机器上从 Windows 存储库中签出源代码？（无法使用）。

# php - Display three dot (...) after description?

> ID：14911030
> 
> 赞同：0
> 
> 时间：2013-02-16T13:52:18.667
> 
> 标签：php

I usage this php code to display recent post with description. Max desc 100 word. How to display 3 dot after 100 word (like this: **this is content of bla bla bla...** ).

Can someone help me, please!

This is my php code:

```
<?php
$rss = new DOMDocument();
$rss->load('http://domain.com/feed/');
$feed = array();
foreach ($rss->getElementsByTagName('item') as $node) {
$item = array (
'title' => $node->getElementsByTagName('title')->item(0)->nodeValue,
'desc' => $node->getElementsByTagName('description')->item(0)->nodeValue,
'link' => $node->getElementsByTagName('link')->item(0)->nodeValue,
'date' => $node->getElementsByTagName('pubDate')->item(0)->nodeValue,
);
array_push($feed, $item);
}
$limit = 5;
for($x=0;$x<$limit;$x++) {
$title = str_replace(' & ', ' &amp; ', $feed[$x]['title']);
$link = $feed[$x]['link'];
$description = $feed[$x]['desc'];
$description = substr($description, 0, 138); 
$date = date('d F Y - H:m', strtotime($feed[$x]['date']));
echo '<li><strong><a href="'.$link.'" title="'.$title.'">'.$title.'</a></strong>';
echo '<br><small>'.$date.'</small>';
echo '<br>'.$description.'</br></li>';
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T14:00:14.310

如果我像这样查看您的代码，但这是在计算每个符号，而不是单词：

```
if(strlen($description) > 138) {
    $description = substr($description, 0, 138).'&hellip;'; 
} 
```

如果您想使用单词，请执行以下操作：

```
// put this function above your code....
function string_limit_words($string, $word_limit=100, $ending = '&hellip;') { 
    $words = explode(' ', $string); 
    if(count($words) > $word_limit) {
        return implode(' ', array_slice($words, 0, $word_limit)).$ending; 
    }
    return $string;
}

// and use it like this...
echo '<br>'.string_limit_words($description).'</br></li>'; 
```

# html - Twitter Bootstrap centering responsive navbar

> ID：14911033
> 
> 赞同：1
> 
> 时间：2013-02-16T13:52:51.650
> 
> 标签：html, css, twitter-bootstrap

I am attempting to create a website in Twitter Bootstrap, but I am having an issue with centering the navigation links when using responsive design.

Basically, for tablet and phone devices I want a two row navigation bar, so brand name at the top and the navigation links below it.

I am able to center the brand name on the screen no problem, but when I try to apply the same styling to the navigation links it gets stuck on the left.

**Here is the fiddle to demonstrate this issue:** [http://jsfiddle.net/AsGHB/5/](http://jsfiddle.net/AsGHB/5/)

Here is the relevant CSS:

```
@media (max-width: 767px) { 

 #bn-logo {
  width: 100%;
  float: none;
  margin: 0 auto;
  text-align: center;
  }

 .navbar .nav {
   width: 100%;
   float: none;
   margin: 0 auto;
   text-align: center;
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T15:26:13.060

添加以下代码：

```
@media (max-width: 767px)and (min-width: 480px) { 
  header{
    text-align:center;
  }
  .navbar .nav {
    float:none;
  }
  .navbar .nav > li {
    float: none;
    display: inline-block;
  }
} 
```

# php - Associative subarrays in Javascript

> ID：14911035
> 
> 赞同：1
> 
> 时间：2013-02-16T13:53:25.887
> 
> 标签：php, javascript, arrays, multidimensional-array, associative-array

How can the equivalent in PHP be done in JS?:

```
$this->gridColumnData[] = array('field' => 'id', 'width' => 50, 'title' => 'Enquiry Id') ;
$this->gridColumnData[] = array('field' => 'Name', 'width' => 90, 'title' => 'Name') ; 
```

I know how to create a simple array like:

```
var myArray = [[23, 45, 12], ['stringA', 'stringB']] ; 
```

But is it possible to do something like:

```
var myArray = ["numbers" => ["A" => 23, "B" => 45, "C" => 12], "strings" => ["firstone" => 'stringA', "secondone" => 'stringB']]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T13:57:56.573

你所描述的是一个对象文字，一个异构键值对的容器。在这种情况下，我们必须将它与数组结合起来以获得您所描述的行为：

```
var myArray = {
    numbers: [{ A: 23, B: 45, C: 12 }],
    strings: { firstone: "stringA", secondone: "stringB" }
}; 
```

前任。要访问`B`对象中的属性，您必须执行`myArray.numbers[0].B`. 要获得 的值`"secondone"`，请执行`myArray.strings.secondone`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T13:57:35.373

它是 JS 中的一个对象：

```
var myObjArray = {
    numbers : { A : 23, B : 45, C : 12 }, 
    strings : {firstone : 'stringA', secondone : 'stringB'}
}; 
```

访问方式：

```
myObjArray['numbers']['A']; 
```

# php - Large file uploads using FileReader, AJAX and PHP - security issues

> ID：14911037
> 
> 赞同：1
> 
> 时间：2013-02-16T13:53:42.817
> 
> 标签：php, javascript

I am developping a tool which enables the user to upload large files (and by large i mean "size doesn't matter" large). I have pasted bellow the part of the code that actually handles the "upload" in JavaScript. The code itself works great, absolutely no problem. I have uploaded a 500 MB file in aprox. 15 minutes That is, on a crappy computer which also serves as a server. I expect it to work a lot better on an actual server.

What i'm asking for is suggestions for security that won't have to big an impact on performance and, also, performance upgrades. The way i see it, any attempt to encode/pack the data sent to the server will have a BIG impact on the performance.

Another issue is the chunkSize. I let the programmer choose how big a "slice" of file should be. However the limit is the server's max_post_size. By default it is set to 1024 * 512 bytes.

I have noticed(by countless test) that if I increase the chunk size the entire proccess of uploading works faster. The reason is obvious : The progress event and the communication with the server triggers less often. However, in case of a progress bar, the accuracy will be very low and it might cause the user to believe the application has crashed and close the page.

So basically i have these 2 questions :

1: how to encode/pack the data without affecting (too much) the performance

2: How could i increase the overall performance of the tool

Meanwhile, i will do some research myself.

Here is code that handles the upload :

```
Uploader.UploadFile = function (file, instance) {
    var fr = new FileReader;
    chunkSize = instance.settings.chunkSize > window.maxPost ? window.maxPost : instance.settings.chunkSize;
    var chunks = Math.ceil(file.size / chunkSize);
    var chunk = 0;
    var startTime = (new Date()).getTime();
    function SendSlice() {
        var start, end;
        start = chunk * chunkSize;
        if (start > file.size) {
            start = end + 1;
        }
        end = start + (chunkSize) >= file.size ? file.size : start + (chunkSize);
        status = chunk == 0 ? "start" : (chunk == chunks ? "end" : "progress");
        if (status == 'start') {
            if(instance.settings.onStartUpload && instance.settings.onStartUpload.call) {
                var event = new Uploader.Event.StartUpload({
                    time : (new Date()).getTime(),
                    file : file,
                    target : instance.element
                });
                instance.settings.onStartUpload(event);
            }
        }
        fr.onload = function(e) {
            var sliceData = e.target.result;
            $.ajax({
                type : "POST",
                url : "uploader.php",
                data : {
                    filename : file.name,
                    path : instance.settings.path,
                    status : status,
                    slice : sliceData
                }
            }).success(function(data) {
                if (++chunk <= chunks) {
                    if(instance.settings.onProgress && instance.settings.onProgress.call) {
                        var event = new Uploader.Event.Progress({
                            time : (new Date()).getTime(),
                            file : file,
                            target : instance.element,
                            pieces: chunks,
                            currentPiece : chunk,
                            percent : (chunk / chunks) * 100,
                            bytesUploaded : end,
                            bytesRemaining : file.size - end
                        });
                        instance.settings.onProgress(event);
                    }
                    SendSlice();
                } else {
                    if(instance.settings.onCompleteFile && instance.settings.onCompleteFile.call) {
                        var time = (new Date()).getTime();
                        var duration = time - startTime;
                        var event = new Uploader.Event.FileComplete({
                            time : time,
                            file : file,
                            target : instance.element,
                            duration : duration
                        });
                        instance.settings.onCompleteFile(event);
                    }
                }
            });
        };
        fr.readAsDataURL(file.slice(start, end));
    }
    SendSlice();
} 
```

# html - nav role=navigation

> ID：14911038
> 
> 赞同：39
> 
> 时间：2013-02-16T13:53:45.137
> 
> 标签：html, semantic-markup

I'm a little confused with roles. If I have in my page a navigation that is enclosed in a `nav` element and specify a `role="navigation"`.

```
<nav role="navigation">
    ...
</nav> 
```

Isn't it already semantically explicit that the `nav` section is navigation?

Or if I have some other navigation sections on my page, and specify role for only one of them, this section becomes the most important on a page? And those without `role="navigation"` just boring navigations?

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-02-16T14:03:19.183

确实，大多数现代浏览器/技术都将 HTML5`<nav>`元素识别为导航并给予同样的关注。但是明确设置`role="navigation"`属性只是确保更多的技术可以接受它。

例如，针对残障用户的屏幕阅读器和其他技术很少完全符合标准（特别是如果他们必须一直工作到 IE6 或更低版本！）因此明确添加角色属性始终确保您涵盖所有基础尽可能多的用户。

此外（这只是一个猜测）一些鲜为人知的搜索引擎可能还不能完全识别 HTML5，因此添加这些角色应该有助于网站的抓取能力。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2014-09-24T10:50:26.113

从 W3C看[一下这个。](http://www.w3.org/TR/html5/dom.html#sec-strong-native-semantics)它说：

> 在*大多数*情况下，设置与默认隐式 ARIA 语义匹配的 ARIA 角色和/或 aria-* 属性是*不必要的，也不推荐*，因为这些属性已经由浏览器设置。

这样做`<main role="main">`是*不必要的，不推荐*。也就是说，[Bootstrap 的导航栏示例](http://getbootstrap.com/components/#navbar)（每个人 - 包括我 - 复制粘贴）都附带`<nav role="navigation">`.

老实说，我不确定什么是正确的。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-08-11T08:53:52.110

W3C 建议：“但是，为了使支持 ARIA 的用户代理更容易访问该结构，并确保不支持 HTML5 的用户代理也可以理解该结构，建议添加 ARIA 角色="navigation"。 " [https://www.w3.org/WAI/GL/wiki/Using_HTML5_nav_element](https://www.w3.org/WAI/GL/wiki/Using_HTML5_nav_element)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2021-05-12T12:16:08.333

使用该`<nav>`元素将自动传达一个部分具有的角色`navigation`。开发人员应该总是更喜欢使用正确的语义 HTML 元素而不是 ARIA。

来源：[MDN 关于 ARIA 的文章：导航角色](https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA/Roles/Navigation_Role)

# vb.net - List(Of Person) ORDER

> ID：14911041
> 
> 赞同：0
> 
> 时间：2013-02-16T13:53:52.410
> 
> 标签：vb.net, design-patterns

Please take a look at the code below:

```
Public Class PersonTest

    Public Function ListTest()
        Dim list As List(Of Person) = New List(Of Person)
        Dim p1 As Person = New Person(1, "Ian")
        Dim p2 As Person = New Person(2, "Steven")
        Dim p3 As Person = New Person(3, "Sharon")
        list.Add(p1)
        list.Add(p2)
        list.Add(p3)
        For Each p As Person In list
            MsgBox(p.IDNumber)
        Next

    End Function

End Class

Public Class Person
    Public IDNumber As Integer
    Public Name As String

    Public Sub New(ByVal id As Integer, ByVal name As String)
        IDNumber = id
        name = name
    End Sub

End Class

Public Class Form1

    Private Sub Form1_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
        Dim pt As PersonTest = New PersonTest
        pt.ListTest()
    End Sub
End Class 
```

I expect the Message Box to print: 1,2,3 which it does. Can you confirm that List uses insertion order. I am planning to store the results of database queries in a list i.e:

SELECT * FROM Person ORDER BY ID

The SQL statement is ordered by ID. Can I assume that the List will also be ordered by ID?

The reason I ask is because the answerer to my question here: [Data Access Layer returns DataTable](https://stackoverflow.com/questions/14467167/data-access-layer-returns-datatable), suggests using a List to return an object from a Data Access Layer.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T13:57:29.083

是的，列表将存储您输入的对象。见[列表（T）。添加](http://msdn.microsoft.com/en-us/library/3wcytfd1.aspx)：

> 将对象添加到 List(Of T) 的末尾。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-16T13:58:25.030

您可以假设[an`IList`](http://msdn.microsoft.com/en-us/library/5y536ey6.aspx)将以这种方式行事，是的。除了枚举之外，它还提供索引，因此列表的类型需要保持不变以支持它。

但是，如果你想明确，你总是可以明确排序：

```
For Each p As Person In list.OrderBy(Function(pe) pe.IDNumber) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-16T15:45:52.817

另一种选择是使用 a `SortedList`，它在内部根据指定的键和默认比较器维护其顺序（除非您提供自己的比较器）。

```
 Dim list As New SortedList(Of Integer, Person)

    Dim p1 As Person = New Person(1, "Ian")
    Dim p2 As Person = New Person(2, "Steven")
    Dim p3 As Person = New Person(3, "Sharon")
    list.Add(p3.IDNumber, p3)
    list.Add(p1.IDNumber, p1)
    list.Add(p2.IDNumber, p2)

    For Each p As Person In list.Values
        MsgBox(p.IDNumber)
    Next 
```

我故意打乱了将项目添加到列表中的顺序。每当列表更改时，它都会运行排序算法以确保项目保持正确的顺序。根据您打算如何使用它，这可能会增加相当多的开销。

# jquery - 防止打印 ul 菜单

> ID：14911045
> 
> 赞同：0
> 
> 时间：2013-02-16T13:54:25.877
> 
> 标签：jquery, printing, menu, html-lists, superfish

我正在使用 Joel Birch 的基于元素的 jQuery Superfish 菜单，它工作正常，但是当用户打印页面时，“菜单”被解释为无序列表......就像这样：

[（此处的示例图片...）](http://wip.bolhazul.com/superfish-printing.jpg "（图片在这里...）")

我想知道是否有一种解决方法可以避免打印此元素（菜单栏）使其不可见或使其可打印，就像在浏览器中看到的一样？

的代码是基础：

```
<ul class="sf-menu" id="example">
  <li>
    <a href="#">sobre nós</a>
  </li>
  <li class="current"><a href="#a">tratamentos e produtos</a>
  <ul>
    <li><a href="#aa">menu item that is quite long</a></li>
    <li class="current"><a href="#ab">menu item</a>
    ...
</ul> 
```

任何帮助或提示表示赞赏。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T13:58:40.537

创建隐藏菜单的css文件，如下所示：

```
.sf-menu{display:none;} 
```

保存该文件并将其链接到您的页面 <head> 中：

```
<LINK REL="stylesheet" TYPE="text/css" 
 MEDIA="print" HREF="urlofyourcssfilehere.css"> 
```

这将仅在打印页面时隐藏菜单。

MEDIA 属性是关键。使用它，您可以为每种媒体指定不同的 css：打印、手持等。

请参阅此链接：[http ://www.w3.org/TR/CSS2/media.html](http://www.w3.org/TR/CSS2/media.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-31T18:56:43.637

如果您不想为打印机创建一个完整的额外样式表，您可以在现有样式表中使用媒体查询。

```
@media print {
    .sf-menu: {
        display: none;
    }
} 
```

# c - 符号循环错误：libgobject-2.0.so.0：未定义符号：g_bytes_unref

> ID：14911046
> 
> 赞同：5
> 
> 时间：2013-02-16T13:54:38.640
> 
> 标签：c, qt, gstreamer, rtsp

我正在尝试使用 Qt creator 在 ubuntu 12.10 下编译 gstreamer rtsp 服务器。

代码成功编译但给了我这个异常和程序退出：

> 符号循环错误：libgobject-2.0.so.0：未定义符号：g_bytes_unref

这是我的 .pro 文件（链接了所有需要的库）

```
QT       += core

QT       -= gui

TARGET = gstreamer
CONFIG   += console
CONFIG   -= app_bundle

CONFIG += link_pkgconfig
PKGCONFIG += gstreamer-0.10

TEMPLATE = app

SOURCES += main.cpp

INCLUDEPATH += /home/kato/ew-gst-sdk-linux-x86_64-2012.03-0/include/gstreamer-0.10
INCLUDEPATH += /usr/include/glib-2.0
INCLUDEPATH += /usr/lib/x86_64-linux-gnu/glib-2.0/include
INCLUDEPATH += /usr/include/libxml2

LIBS += -L/home/kato/ew-gst-sdk-linux-x86_64-2012.03-0/lib \
-lgstreamer-0.10 \
-lgstrtsp-0.10 \
-lgstrtspserver-0.10 \
-lgobject-2.0 \
-lglib-2.0 \
-lgio-2.0 \
-lgthread-2.0 \
-lgdk_pixbuf-2.0 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T14:19:45.680

安装了什么版本的 glib？ `GBytes`比较新，才从[2.32开始](http://developer.gnome.org/glib/2.31/glib-Byte-Arrays.html#g-bytes-ref)

# php - 如何从数据库中获取 ext.js 网格

> ID：14911052
> 
> 赞同：0
> 
> 时间：2013-02-16T13:55:43.653
> 
> 标签：php, javascript, extjs

我一直在尝试让一个简单的 Ext.js 应用程序工作，它从数据库中获取数据并将其显示在 ext.js 网格中，但我总是得到的唯一东西是“Failure:true”。也许您可以向我指出错误。

这是 index.php：

```
<html>
    <head>
        <script src="extjs/ext-dev.js" type="text/javascript"></script>
        <script src="mainscript.js" type="text/javascript"></script>

    </head>
<body>
<?php
$conn = mysql_connect('localhost','admin','1234','cdcol') or die ('Error connecting to mysql');

$task = '';
if ( isset($_POST['task'])){
    $task = $_POST['task'];
}   
switch($task){
    case "LISTING":              
        getList();
        break;
    default:
        echo "{failure:true}"; 
        break;
}

function getList(){
$query = mysql_query("SELECT * FROM cdcol.cds");
$cds = array();
while($row = mysql_fetch_array($query)){
$cds[] = array('titel' => $row['titel'], 'jahr' => $row['jahr'],'interpret' => $row['interpret'], 'id' => $row['id']);
}
$jsonresult = json_encode(array('cds'=>$cds));
}
?>
</body> 
```

这将是 mainscript.js：

```
var cdDataStore;         
var cdColumnModel;       
var cdEditorGrid;
var cdWindow;

Ext.onReady(function(){
Ext.QuickTips.init();

cdDataStore = new Ext.data.Store({
  id: 'cdDataStore',
  proxy: new Ext.data.HttpProxy({
            url: 'index.php',      
            method: 'POST'
        }),
        baseParams:{task: "LISTING"},
  reader: new Ext.data.JsonReader({   

    root: 'results',
    totalProperty: 'total',
    id: 'id'
  },[ 
    {name: 'titel', type: 'string', mapping: 'titel'},
    {name: 'interpret', type: 'string', mapping: 'interpret'},
    {name: 'jahr', type: 'int', mapping: 'jahr'},
    {name: 'id', type: 'int', mapping: 'id'}
  ]),
  sortInfo:{field: 'jahr', direction: "ASC"}
});

cdColumnModel = new Ext.grid.ColumnModel(
[{
    header: '#',
    readOnly: true,
    dataIndex: 'id', 
    width: 50,
    hidden: false
  },{
    header: 'titel',
    dataIndex: 'titel',
    width: 150,

  },{
    header: 'interpret',
    dataIndex: 'interpret',
    width: 150,

  },{
    header: 'jahr',
    readOnly: true,
    dataIndex: 'jahr',
    width: 50,                    
  },{
    header: 'id',
    dataIndex: 'id',
    width: 150,
    readOnly: true
  }]
);
cdColumnModel.defaultSortable= true;

cdEditorGrid =  new Ext.grid.EditorGridPanel({
  id: 'cdListingEditorGrid',
  store:cdDataStore,     
  cm: cdColumnModel,      
  enableColLock:false,
  clicksToEdit:1,
  selModel: new Ext.grid.RowSelectionModel({singleSelect:false})
});

cdListingWindow = new Ext.Window({
  id: 'cdListingWindow',
  title: 'some cds',
  closable:true,
  width:700,
  height:350,
  plain:true,
  layout: 'fit',
  items: cdListingEditorGrid
});

cdDataStore.load();     
cdListingWindow.show();   

}); 
```

任何帮助或不同的方法将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T10:26:07.123

您使用哪个 extjs 版本？

你确定参数“任务”是发送的吗？（例如使用 Firefox 和 Firebug - 网络 - XHR - 发布）

我认为代理本身没有方法属性。

```
proxy: {
     type: 'ajax',
     url: 'index.php',
     reader: {
         type: 'json',
         root: 'cds'
     },
     extraParams: {
         'task': "LISTING"
     },
     actionMethods: {
        read: 'POST'
    }
 } 
```

您的 php 脚本必须返回一个 json 字符串！例如`{'success': true, 'cds':[{"id":"27","titel":"xyz"`

你的架构看起来也很奇怪。为什么没有单独的 php 文件？为什么不使用列模型？为什么将任何内容声明为 var？

# actionscript-3 - 1046：未找到类型或不是编译时常量：dude

> ID：14911056
> 
> 赞同：0
> 
> 时间：2013-02-16T13:56:44.873
> 
> 标签：actionscript-3, flash, flash-cs6

```
package  {
    import flash.display.MovieClip
    import flash.events.Event
    public dynamic class dude extends MovieClip{
        try
            {
        //public var _dude:dude;
        public const TYNGDE:Number = 2;

        private var _vx:Number = 0;
        private var _vy:Number = 0;
        public var _dude:dude;

        public function Test():void {
            try
            {
            _dude.x = 100;
            _dude.y = 100;
            }
            catch ( e:Error )
            {
                trace("Feilen er: " + e);
            }

            addEventListener(Event.ENTER_FRAME, nyskjerm);
        }

        private function nyskjerm(e:Event):void{
            _vy += TYNGDE;
            try
            {
                _dude.x += _vx;
                _dude.y += _vy;
            }
            catch ( e:Error )
            {
                trace("Feilen er: " + e);
            }

            SjekkBrett();
        }

        private function SjekkBrett():void{
            if (_dude.x < 0 && _vx < 0){
                _dude.x = 0;
                _vx *= -1;
            }
            else if ((_dude.x+100) > stage.stageWidth && _vx > 0){
                _dude.x = stage.stageWidth - 100;
                _vx *= -1;
            }
            else if (_dude.y <0 && _vy <0){
                _dude.y = 0;
                _vy *= -1;
            }
            else if ((_dude.y+200) > stage.stageHeight && _vy > 0){
                _dude.y = stage.stageHeight - 200;
                _vy *= -0.8;
            }
        }

    }
    catch ( e:Error )
            {
                trace("Feilen er: " + e);
            }

}} 
```

我试过给这个类赋予与舞台相同的名称。我试过不实例化花花公子，直接访问它，也不起作用。该错误表明故障起源于第 1 行，但这对我来说没有多大意义。帮助？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T15:15:00.427

你在你的花花公子类中声明了一个花花公子对象——我认为那不是你想要的？

当您设置“_dude.x = 100;”时，_dude 尚未实例化（即：为 null），因此您无法在其上设置属性 - 导致错误。

如果我对您的要求正确，只需在您的代码中将“_dude”替换为“this”并删除“public var _dude:dude;” 完全地。

正如 user1875642 所说；删除 try/catch 声明。

# php - 设置自适应支付选项，接收方不能为空

> ID：14911058
> 
> 赞同：1
> 
> 时间：2013-02-16T13:56:57.183
> 
> 标签：php, paypal, paypal-adaptive-payments

这是我设置付款选项的请求对象。

```
SetPaymentOptionsRequest Object
(
    [requestEnvelope] => RequestEnvelope Object
        (
            [detailLevel] => 
            [errorLanguage] => en_US
        )

    [payKey] => AP-0MG8529097707340X
    [initiatingEntity] => 
    [displayOptions] => 
    [shippingAddressId] => 
    [senderOptions] => 
    [receiverOptions] => Array
        (
            [0] => ReceiverOptions Object
                (
                    [description] => 
                    [customId] => 
                    [invoiceData] => InvoiceData Object
                        (
                            [item] => Array
                                (
                                    [0] => InvoiceItem Object
                                        (
                                            [name] => my Item
                                            [identifier] => 1
                                            [price] => 138
                                            [itemPrice] => 69
                                            [itemCount] => 2
                                        )

                                )

                            [totalTax] => 
                            [totalShipping] => 
                        )

                    [receiver] => ReceiverIdentifier Object
                        (
                            [email] => test@test.com
                            [phone] => 
                        )

                    [referrerCode] => 
                )

        )

) 
```

我按照 sdk 示例进行操作，但收到此错误响应

```
SetPaymentOptionsResponse Object
(
    [responseEnvelope] => ResponseEnvelope Object
        (
            [timestamp] => 2013-02-16T05:38:38.298-08:00
            [ack] => Failure
            [correlationId] => f17a8e24e1375
            [build] => 4992011
        )

    [error] => Array
        (
            [0] => ErrorData Object
                (
                    [errorId] => 580022
                    [domain] => PLATFORM
                    [subdomain] => Application
                    [severity] => Error
                    [category] => Application
                    [message] => Invalid request parameter: receiverOption.receiver(0).email
                    [exceptionId] => 
                    [parameter] => Array
                        (
                            [0] => ErrorParameter Object
                                (
                                    [name] => 
                                    [value] => receiverOption.receiver(0).email
                                )

                            [1] => ErrorParameter Object
                                (
                                    [name] => 
                                    [value] => test@test.com
                                )

                        )

                )

        )

) 
```

如果我不设置电子邮件，错误将变为`Invalid request parameter: receiver cannot be null`
*Edit* : [Here](https://www.x.com/developers/paypal/documentation-tools/api/SetPaymentOptions-api-operation) and [here](https://github.com/paypal/adaptivepayments-sdk-php/blob/master/samples/SetPaymentOptionsReceipt.php) you have some reference。也许你看到了我没有看到的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T16:24:48.373

我遇到了同样的问题，发现您需要为接收者提供一个有效的电子邮件地址`SetPaymentOptions`才能成功。

就我而言，我使用的是链式付款，并且我使用主要接收者的电子邮件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-19T21:00:14.263

我有同样的问题。尝试使用命名空间实例化 Receiver 类

```
$receiver[0] = new PayPal\Types\AP\Receiver(); 
```

它对我有用。

# 3d - 如何处理 COLLADA 指数？

> ID：14911061
> 
> 赞同：5
> 
> 时间：2013-02-16T13:57:35.140
> 
> 标签：3d, mesh, collada, indices

我为文件格式写了一个简单的阅读器`COLLADA`，它似乎工作正常。现在，我有一个 Blender 导出的立方体网格，它是边缘分割和三角化的，所以它应该有 12 个三角形（每个面 2 个）、24 个顶点（每个面 4 个）和 36 个索引（每个面 6 个）。该网格还具有法线数据和 UV 贴图。

该`COLLADA`文件有 24 个顶点、12 个法线和 36 个 UV，所以我假设法线是每个三角形的，UV 是每个索引的。三角形的`polylist`计数是 12，这是正确的，并且`vcount`有 12 个 '3'，所以这也是正确的。现在，`<p>`索引列表有 108 个条目，其中 0、3、6 等是顶点索引，1、4、7 等是普通索引，2、5、8 等是 UV 索引。

我有一个用于顶点的内部结构，它由位置 ( `vec3`)、法线 ( `vec3`) 和 UV 坐标 ( `vec2`) 组成。为了绘制网格，我使用 OpenGL 的顶点缓冲区，并有一个单独的索引列表。

问题是，加载网格后我不应该有 24 个顶点吗？中的 108 个条目`<p>`转换为 36 个顶点。索引有什么问题？

我可能在这里遗漏了一些非常简单的东西，但不能只是看到它。

`COLLADA`文件在[这里](http://pastebin.com/UFRzGVXm)。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-16T16:38:53.217

好的，我找到了解决方案，只好用一个简单的飞机来理清思路。由于每个面都是一个三角形，因此最终的顶点数是 polylist 的 count 属性中描述的数量的三倍。因此，对于立方体，它是 36 - 而不是 24。最后，36 确实正确绘制了立方体。所以，主要是我的大脑发疯了。

# html - 停止浮动：从阻止我的 div 占用另一个 div 中的空间离开

> ID：14911063
> 
> 赞同：0
> 
> 时间：2013-02-16T13:57:37.210
> 
> 标签：html, css

如何设置“a”的样式，使其占据空间并同时向左浮动？

```
<div style="background:#111">
    <div id="a" style="float:left; height:30px"></div>
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T14:00:39.140

在父级上使用`overflow`样式，而不为父级指定大小：

```
<div style="background:#111;overflow:hidden;">
  <div id="a" style="float:left; height:30px"></div>
</div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T14:02:26.977

`<div style="clear:both"></div>`在 "#a" div 之后插入

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-16T14:07:01.227

浮动元素不会影响父元素的尺寸。您需要添加一个*清除元素*，即`clear`规则设置为的元素`both`，如下所示：

```
<div style="background:#111">
    <div id="a" style="float:left; height:30px"></div>
    <div style="clear:both"></div>
</div> 
```

# php - PHP中的安全按钮命令处理

> ID：14911070
> 
> 赞同：0
> 
> 时间：2013-02-16T13:58:32.407
> 
> 标签：php, sql, identifier

我有一个带有订单的数据库，第一个条目是：

> id(int) = 1
> 
> info_1(varchar) = '一'
> 
> info_2(varchar) = '二'

我正在使用一个 PHP scipt 遍历订单并创建 HTML 按钮：

```
while ($temp = mysql_fetch_assoc($query3))
{
   echo "<button id=\"".$temp['id']."\" name=\"delete_but\">Delete</button>";
   // plus some conditions
} 
```

结果：

```
<button id="1" name="delete_but">Delete</button>
<button id="2" name="delete_but">Delete</button>
<button id="3" name="delete_but">Delete</button>
...
<button id="10" name="add_but">Add</button>
<button id="11" name="add_but">Add</button>
<button id="12" name="add_but">Add</button>
... 
```

**如何创建一个 PHP 脚本，该脚本将在按钮单击时触发？**我想从表中删除条目（id ==“clicked_button_id”）。

另外，我想知道将订单的 ID 放在按钮的 ID 中是否安全，因为每个用户都可以看到我页面的 HTML（以及所有 ID）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T14:13:17.320

jQuery：

```
$('button[name=delete_but]').click(function() {
  $.ajax({
    url: 'deleteEntry.php?id=' + $(this).attr('id')
  }).done(function() {
    $(this).hide();
  });
}); 
```

删除条目.php：

```
$entryId = $_GET['id'];

// ...database work to remove the entry with that id... 
```

# mysql - 使用 mysql 进行地理位置搜索查询

> ID：14911071
> 
> 赞同：0
> 
> 时间：2013-02-16T13:58:38.050
> 
> 标签：mysql, cakephp-2.0

我尝试使用我附近的位置列表进行 MySQL 查询（按最近的顺序排列）。我不知道该怎么做。我发现了这个有趣的帖子： http: [//funkjedi.com/technology/308-search-using-geolocation-data-in-mysql/](http://funkjedi.com/technology/308-search-using-geolocation-data-in-mysql/)

一切对我来说都很清楚。但查询不起作用。我做了以下 SQL 查询：

```
SELECT *, ($distance_formula) AS distance FROM restaurants 
    WHERE (geolatitude BETWEEN $lat_b1 AND $lat_b2) 
    AND (geolongitude BETWEEN $lng_b1 AND $lng_b2) 
    HAVING distance < $radius ORDER BY distance ASC 
```

我得到的错误如下：

```
Error: SQLSTATE[42S22]: Column not found: 1054 Unknown column '$distance_formula' in 'field list' 
```

关键是，$distance_formula 是在脚本中生成的，不是字段列表，没错。但是我应该怎么做才能让 MySQL 知道这是要执行而不是字段？

如果您有任何其他帮助或其他解决方案（从绿色开始），我将非常高兴。最后，我需要一个 cakephp 的解决方案。

非常感谢

伊沃

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T15:24:19.707

我认为文件的 windows 和 unix 格式肯定有错误，或者有时示例有一些写作问题，因此要求您稍微更改命令并将命令编写为：

```
 $sql = "SELECT *, (" . $distance_formula . ") AS distance FROM listings WHERE (latitude BETWEEN " . $lat_b1 . " AND " . $lat_b2 . ") AND ( longitude BETWEEN " . $lng_b1 . " AND . " $lng_b2 . ") HAVING distance < " . $radius . "ORDER BY distance ASC"; 
```

# java - 正则表达式 [1-57-9] 如何解释？

> ID：14911074
> 
> 赞同：2
> 
> 时间：2013-02-16T13:58:44.437
> 
> 标签：java, regex, expression

这是在Java中：`[1-57-9]`

我今天遇到了这个正则表达式，我试图找出它的确切含义。有人能帮我一下吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-16T13:59:44.920

它允许数字 1-5 和 7-9。所以它相当于`[12345789]`.

[`Pattern`](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html)有关Java 中正则表达式的详细信息，请参阅文档，特别是“字符类”下的示例：

> *   `[abc]`- `a`, `b`, 或`c`（简单类）
> *   `[^abc]``a`- 除, `b`, 或`c`(否定)以外的任何字符
> *   `[a-zA-Z]`-`a`通过`z`或`A`通过`Z`，包括（范围）
> *   `[a-d[m-p]]`-`a`通过`d`，或`m`通过`p`：（`[a-dm-p]`联合）
> *   `[a-z&&[def]]`- `d`, `e`, 或`f`（交叉点）
> *   `[a-z&&[^bc]]`-`a`通过`z`，除了`b`和`c`：（`[ad-z]`减法）
> *   `[a-z&&[^m-p]]`-`a`通过`z`，而不是`m`通过`p`：（`[a-lq-z]`减法）

另请参阅[regular-expressions.info](http://www.regular-expressions.info)网站及其[关于字符类的部分](http://www.regular-expressions.info/charclass.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-16T14:00:26.677

读`[1-57-9]`作“1 到 5 或 7 到 9”

它匹配 1、2、3、4、5、7、8、9 中的数字。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-16T14:00:42.447

它只是一个[字符类](http://docs.oracle.com/javase/tutorial/essential/regex/char_classes.html)，指定您可以匹配范围内的单个数字：1 到 5 和 7 到 9。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-16T14:00:10.470

它表示以下字符之一：1,2,3,4,5,7,8,9

# symfony - Symfony2 表单上传工作在创建但不在更新

> ID：14911075
> 
> 赞同：1
> 
> 时间：2013-02-16T13:58:49.250
> 
> 标签：symfony

我在 symfony2 上的表单有问题我想为用户上传一些背景图像和配置文件图像。问题是表单正确上传文件并将它们设置为我的配置文件创建配置文件但如果我想编辑配置文件（例如我更改用户名和配置文件图片）任何编辑都会保存但不上传。

我按照 symfony2 文档管理我的上传，这是我的结构：

类简介 {

```
/**
 * @var integer
 *
 * @ORM\Column(name="id", type="integer")
 * @ORM\Id
 * @ORM\GeneratedValue(strategy="AUTO")
 */
private $id;

/**
 * @var string
 *
 * @ORM\Column(name="firstname", type="string", length=255)
 */
private $firstname;

/**
 * @var string
 *
 * @ORM\Column(name="lastname", type="string", length=255)
 */
private $lastname;

/**
 * @var string
 *
 * @ORM\Column(name="surname", type="string", length=255)
 */
private $surname;

/**
 * @var string
 *
 * @ORM\Column(name="description", type="text")
 */
private $description;

/**
 * @ORM\OneToOne(targetEntity="Adel\MpsnBundle\Entity\Document", cascade={"persist"})
 */
private $profilPicture;

/**
 * @ORM\OneToOne(targetEntity="Adel\MpsnBundle\Entity\Document", cascade={"persist"})
 */
private $backgroundPicture;

/**
 * @var \DateTime
 *
 * @ORM\Column(name="created", type="datetime")
 */
private $created;

/**
 * Constructor
 */
public function __toString() {
    return $this->surname;
}

/**
 * Constructor
 */
public function __construct() {
    }

/**
 * Get id
 *
 * @return integer 
 */
public function getId() {
    return $this->id;
}

/**
 * Set firstname
 *
 * @param string $firstname
 * @return Profil
 */
public function setFirstname($firstname) {
    $this->firstname = $firstname;

    return $this;
}

/**
 * Get firstname
 *
 * @return string 
 */
public function getFirstname() {
    return $this->firstname;
}

/**
 * Set lastname
 *
 * @param string $lastname
 * @return Profil
 */
public function setLastname($lastname) {
    $this->lastname = $lastname;

    return $this;
}

/**
 * Get lastname
 *
 * @return string 
 */
public function getLastname() {
    return $this->lastname;
}

/**
 * Set surname
 *
 * @param string $surname
 * @return Profil
 */
public function setSurname($surname) {
    $this->surname = $surname;

    return $this;
}

/**
 * Get surname
 *
 * @return string 
 */
public function getSurname() {
    return $this->surname;
}

/**
 * Set description
 *
 * @param string $description
 * @return Profil
 */
public function setDescription($description) {
    $this->description = $description;

    return $this;
}

/**
 * Get description
 *
 * @return string 
 */
public function getDescription() {
    return $this->description;
}

/**
 * Set profilPicture
 *
 * @param \Adel\MpsnBundle\Entity\Document $profilPicture
 * @return Profil
 */
public function setProfilPicture(\Adel\MpsnBundle\Entity\Document $profilPicture = null)
{
    $this->profilPicture = $profilPicture;

    return $this;
}

/**
 * Get profilPicture
 *
 * @return \Adel\MpsnBundle\Entity\Document 
 */
public function getProfilPicture()
{
    return $this->profilPicture;
}

/**
 * Set backgroundPicture
 *
 * @param \Adel\MpsnBundle\Entity\Document $backgroundPicture
 * @return Profil
 */
public function setBackgroundPicture(\Adel\MpsnBundle\Entity\Document $backgroundPicture = null)
{
    $this->backgroundPicture = $backgroundPicture;

    return $this;
}

/**
 * Get backgroundPicture
 *
 * @return \Adel\MpsnBundle\Entity\Document 
 */
public function getBackgroundPicture()
{
    return $this->backgroundPicture;
} 
```

}

/** * @ORM\HasLifecycleCallbacks * @ORM\Entity */ 类文档 {

```
/**
 * @ORM\Id
 * @ORM\Column(type="integer")
 * @ORM\GeneratedValue(strategy="AUTO")
 */
public $id;

/**
 * @Assert\File(maxSize="6000000")
 */
public $file;

/**
 * @ORM\Column(type="string", length=255, nullable=true)
 */
public $path;

/**
 * @ORM\PrePersist()
 * @ORM\PreUpdate()
 */
public function preUpload() {
    if (null !== $this->file) {
        // do whatever you want to generate a unique name
        $filename = sha1(uniqid(mt_rand(), true));
        $this->path = $filename . '.' . $this->file->guessExtension();
    }
}

/**
 * @ORM\PostPersist()
 * @ORM\PostUpdate()
 */
public function upload() {
    if (null === $this->file) {
        return;
    }

    // if there is an error when moving the file, an exception will
    // be automatically thrown by move(). This will properly prevent
    // the entity from being persisted to the database on error
    $this->file->move($this->getUploadRootDir(), $this->path);

    unset($this->file);
}

/**
 * @ORM\PostRemove()
 */
public function removeUpload() {
    if ($file = $this->getAbsolutePath()) {
        unlink($file);
    }
}

public function getAbsolutePath() {
    return null === $this->path ? null : $this->getUploadRootDir() . '/' . $this->path;
}

public function getWebPath() {
    return null === $this->path ? null : $this->getUploadDir() . '/' . $this->path;
}

protected function getUploadRootDir() {
    // the absolute directory path where uploaded
    // documents should be saved
    return __DIR__ . '/../../../../web/' . $this->getUploadDir();
}

protected function getUploadDir() {
    // get rid of the __DIR__ so it doesn't screw up
    // when displaying uploaded doc/image in the view.
    return 'uploads/documents/images/';
}

/**
 * Get id
 *
 * @return integer 
 */
public function getId()
{
    return $this->id;
}

/**
 * Set path
 *
 * @param string $path
 * @return Document
 */
public function setPath($path)
{
    $this->path = $path;

    return $this;
}

/**
 * Get path
 *
 * @return string 
 */
public function getPath()
{
    return $this->path;
} 
```

}

类 ProfileType 扩展 AbstractType {

```
var $profilmanager;

public function __construct(\Adel\MpsnBundle\Service\ProfilManager $profilmanager) {

    $this->profilmanager = $profilmanager;
}

public function buildForm(FormBuilderInterface $builder, array $options) {

    //$profilManager = $this->container->get("Adel_mpsn.profilmanager");
    $builder->add('firstname', 'text')
            ->add('lastname', 'text')
            ->add('surname', 'text')
            ->add('description', 'textarea')
            ->add('profilPicture',new DocumentType())
            ->add('backgroundPicture', new DocumentType);
}

public function setDefaultOptions(OptionsResolverInterface $resolver) {
    $resolver->setDefaults(array(
        'data_class' => 'Adel\MpsnBundle\Entity\Profil'
    ));
}

public function getName() {
    return 'adel_mpsnbundle_profiltype';
} 
```

}

类 DocumentType 扩展 AbstractType {

```
public function buildForm(FormBuilderInterface $builder, array $options) {

    //$profilManager = $this->container->get("Adel_mpsn.profilmanager");
    $builder->add('file');
}

public function setDefaultOptions(OptionsResolverInterface $resolver) {
    $resolver->setDefaults(array(
        'data_class' => 'Adel\MpsnBundle\Entity\Document'
    ));
}

public function getName() {
    return 'adel_mpsnbundle_documenttype';
} 
```

}

最后在我的控制器中：

```
 $current_profil = $profilManager->getCurrentProfil(true);
    $form = $this->createForm(new ProfilType($profilManager), $current_profil);
    $request = $this->get('request');
    if ($request->getMethod() == 'POST') {
        // On fait le lien Requête <-> Formulaire
        $form->bind($request);

        // On vérifie que les valeurs rentrées sont correctes
        if ($form->isValid()) {

            // On l'enregistre notre objet $article dans la base de données
            $em = $this->getDoctrine()->getEntityManager();

            $em->persist($current_profil);

            $em->flush();
        }
    } 
```

难道我做错了什么 ？

# image - 调整图像大小而不从磁盘再次读取它？

> ID：14911077
> 
> 赞同：1
> 
> 时间：2013-02-16T13:58:58.040
> 
> 标签：image, javafx-2, image-manipulation

我需要根据图像的最长边调整图像的大小，例如最长边（可以是宽度或高度）应该只有 100 像素长。

目前我正在使用这种方法：

```
private Image resizeImageByLongestSide(File imageFile, int lengthLongestSide)
{
    String uri ="file:" + imageFile.getAbsolutePath();
    Image image = new Image(uri); // raed to determine width/height

    // read image again for resizing
    if(image.getWidth() >= image.getHeight())
        return new Image(uri, lengthLongestSide, 0, true, false);
    else
        return new Image(uri, 0, lengthLongestSide, true, false);
} 
```

因此，首先必须通过磁盘读取图像以确定哪一边是最长的一边，而不是再次从磁盘读取，因为调整大小似乎只能通过使用 Image 构造函数...任何提示/改进这？谢谢 ：-）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T03:01:38.247

所有你需要的是[ImageView](http://docs.oracle.com/javafx/2/api/javafx/scene/image/ImageView.html)

在内存中加载一次图像，然后在需要时对图像视图进行操作。

示例代码：

```
//load image to memory
final static Image MY_IMAGE = new Image(path of image file);
//create different imageviews pointing to image in memory and do manipulations
ImageView myImage = new ImageView(MY_IMAGE);
myImage.setFitHeight(value);
myImage.setFitWidth(value); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T14:13:46.060

不变量接近最终解决方案，最终解决方案的[功劳归于 oracle 论坛中的 l2p](https://forums.oracle.com/forums/thread.jspa?messageID=10857430)：

> ImageView 不会改变实际的图像，无论它是否在场景中。它只渲染给定图像中的可见节点。如果你想让它从当前可见状态渲染一个新图像，你必须创建一个快照（）。所以：

```
Image resizedImage = myImageView.snapshot(null, null); // after using myImageView.setFitHeight()/setFitWidth/( etc. 
```

**修正：**

当前方法失去了透明度，因为默认控件（此处：imageview）背景为白色。白色的透明度截图（来自我们的图像）给出了白色，所以我们失去了原来的透明度。解决此问题：将背景本身设置为透明。

所以，固定代码：

```
SnapshotParameters params = new SnapshotParameters();
params.setFill(Color.TRANSPARENT); 
return imageView.snapshot(params, null); 
```

见鬼，这东西很棘手；-)

# php - UNIX 时间戳 (0)：欧洲/伦敦返回 UTC+1

> ID：14911078
> 
> 赞同：5
> 
> 时间：2013-02-16T13:59:00.783
> 
> 标签：php, timezone, timestamp, unix-timestamp, timezone-offset

学习约会，他们现在让我很难过。

```
$london = new DateTime();
$london->setTimestamp(0);
$london->setTimeZone(new DateTimeZone('Europe/London'));

echo $london ->format('d-m-Y H-i-s'); 
```

结果：

```
01-01-1970 01-00-00 
```

`UTC +0:00`因此午夜不应该是伦敦吗？例如，New York 返回上一个日期的 19:00，这是正确的`UTC -5:00`。莫斯科返回`01-01-1970 03-00-00`这又是不正确的（`UTC +3:00`而不是`UTC +4:00`）

但是，当不使用`->setTimestamp`时，伦敦当前时间会正确呈现。

[实时代码： http](http://sandbox.onlinephpfunctions.com/code/fddf5e479f19441f6bbda0b3fde41b3a0ab02a2e) ://sandbox.onlinephpfunctions.com/

另外，我的本地时区是`Europe/Prague`（`UTC +1:00`）。也经过测试`date_default_timezone_set('Europe/London')`。

我认为我的逻辑有一些错误？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-16T14:04:38.967

这是因为显然，英国在1970 年 1 月 1 日是[英国夏令时，比 UTC 早一小时（强调我的）：](http://en.wikipedia.org/wiki/British_Summer_Time)

> 在 1959-60 年冬季进行的一项调查中，咨询了 180 个国家组织，结果显示，他们略微倾向于更改为全年 GMT+1，但夏季时间的长度被延长为试验而非国内使用取消格林威治标准时间。 [6] 1966-67 年间的进一步调查导致哈罗德威尔逊政府引入了英国标准时间实验，**英国全年保持 GMT+1。**这发生在 1968 年 10 月 27 日至 1971 年 10 月 31 日之间，当时恢复了之前的安排。

timeanddate.com 的[时区转换器](http://www.timeanddate.com/worldclock/converted.html?iso=19700101T01&p1=136&p2=0&p3=&p4=&p5=&p6=&p7=&p8=&p9=&p10=&p11=&p12=)是查找此类内容的绝佳工具。

# iphone - iPhone中新联系人表单中的预填充字段和完成按钮将保存联系人

> ID：14911079
> 
> 赞同：1
> 
> 时间：2013-02-16T13:59:05.583
> 
> 标签：iphone, ios, abaddressbook

我在 iPhone 的新联系表单中以编程方式添加字段时遇到困难。

我可以通过查看示例“快速联系”来打开新的联系表单，但是我不知道如何在字段中添加详细信息，这样用户就不必手动添加它们，用户可以选择完成或只能取消，但他/她可以更改字段中的字段详细信息。

我正在使用下面的代码来带来新的联系表格。

```
ABNewPersonViewController *picker = [[ABNewPersonViewController alloc] init];
picker.newPersonViewDelegate = self;
UINavigationController *navigation = [[UINavigationController alloc] initWithRootViewController:picker];
[self presentModalViewController:navigation animated:YES];  
[picker release];
[navigation release]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T14:51:49.487

我通过下面的代码做到了。

```
ABRecordRef person = ABPersonCreate();
CFErrorRef  error = NULL;

// firstname
ABRecordSetValue(person, kABPersonFirstNameProperty, @"Don Juan", NULL);

// email
ABMutableMultiValueRef email = ABMultiValueCreateMutable(kABMultiStringPropertyType);
ABMultiValueAddValueAndLabel(email, @"expert.in@computer.com", CFSTR("email"), NULL);
ABRecordSetValue(person, kABPersonEmailProperty, email, &error);
CFRelease(email);

// Start of Address
ABMutableMultiValueRef address = ABMultiValueCreateMutable(kABMultiDictionaryPropertyType);
NSMutableDictionary *addressDict = [[NSMutableDictionary alloc] init];
[addressDict setObject:@"The awesome road numba 1" forKey:(NSString *)kABPersonAddressStreetKey];
[addressDict setObject:@"0568" forKey:(NSString *)kABPersonAddressZIPKey];
[addressDict setObject:@"Oslo" forKey:(NSString *)kABPersonAddressCityKey];
ABMultiValueAddValueAndLabel(address, addressDict, kABWorkLabel, NULL);
ABRecordSetValue(person, kABPersonAddressProperty, address, &error);
[addressDict release];
CFRelease(address);
ABNewPersonViewController *picker = [[ABNewPersonViewController alloc] init];
picker.displayedPerson = person;
picker.newPersonViewDelegate = self;

UINavigationController *navigation = [[UINavigationController alloc] initWithRootViewController:picker];
[self presentModalViewController:navigation animated:YES];

[picker release];
[navigation release]; 
```

# android - 在android中隐藏特定的ListView单元onTouch

> ID：14911082
> 
> 赞同：0
> 
> 时间：2013-02-16T13:59:21.330
> 
> 标签：android, listview

我非常需要这样的效果

![触摸前](../Images/32d339cf9057daf96b3d82884df7d62c.png)

![触碰](../Images/6250a6e192e3efd00936dca97fbffbc0.png)

看看列表视图如何折叠被触摸项目的子项？我怎样才能达到这个效果？

我能够拖放列表项。我的列表视图由扩展光标适配器的自定义适配器支持。我可以在我的 BindView 方法中实现这种效果吗？这怎么可能？（我需要当前位置和被触摸的视图）我的列表视图基本上来自这个库： [https ://github.com/bauerca/drag-sort-listview](https://github.com/bauerca/drag-sort-listview)

截图来自 gtasks 应用

谢谢

问候帕尔瓦兹·巴斯卡

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T09:49:04.613

我终于通过在选择项目时更改适配器的光标来做到这一点。在我的 onclick 方法中，我重新查询了数据库并更改了我想要隐藏的列值。然后创建了一个新的游标，省略了那些我不需要的列，并用新的游标更改了游标。

希望这可以帮助某人。

问候， 帕尔瓦兹·巴斯卡

# objective-c - libcurl，如何在 Cocoa 中使用

> ID：14911083
> 
> 赞同：1
> 
> 时间：2013-02-16T13:59:26.277
> 
> 标签：objective-c, cocoa, libcurl

我已经安装`libcurl`在我的 Mac 上，需要在我的程序中实现它才能将文件上传到 FTP 服务器。我从未使用过外部框架，并且几乎是 Cocoa/Objective-C 的新手。请有人指点我一个好的教程或告诉我如何在我的项目中开始使用这个库？我什至无法找到如何将它实施到我的项目中。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-16T14:25:17.170

首先，libcurl 默认作为动态库 (dylib) 安装在您的 OS X 上，因此无需使用 macports 等显式下载它，除非您想要最新版本的 libcurl。例如，在我的 OS X 10.8.2 上，默认安装 libcurl.3.dylib、libcurl.4.dylib 和 libcurl.dylib。

要在您的程序中使用 libcurl 中的函数，您需要告诉 Xcode 否则 Xcode 会将您应用程序中的 libcurl 函数标记为未定义。

在您的 Xcode 项目中，单击 Project，然后单击 Target，然后单击 Build Phases，您将在其中看到“Link Binary with Libraries”。单击 + 符号并在搜索中输入 libcurl。你应该看到类似的东西 ![在此处输入图像描述](../Images/3d07a28af196f213fcc4d8dd362c1e0c.png)

单击添加以添加所需的 libcurl。

# c++ - 为什么 `equal` 在 C++ 中适用于 const char*？

> ID：14911085
> 
> 赞同：3
> 
> 时间：2013-02-16T13:59:33.030
> 
> 标签：c++, string, algorithm, stl, char

代码是这样的，它输出`1`：

```
int main(int argc, char *argv[])
{
    vector <const char*> vec = {"nima","123"};
    vector <const char*> vec2 = {"nima","123"};
    auto result = equal(vec.cbegin(), vec.cend(), vec2.cbegin());
    cout << result << endl;
    return 0;
} 
```

我知道我只能通过 using 来测试两个 c 风格的字符串是否相等`strcmp`（因为`char*`它不是我理解的对象）。但这里`equal`有一个来自 的函数`<algorithm>`。它是否使运算符重载，`==`以便它可以测试两个的相等性`char*`？

@Damon 说它们是相等的，因为据我了解，将相同的字符串文字合并到相同的地址中。但是，当我尝试`char*`使用不同的地址时，它仍然给我相同的结果：

```
int main(int argc, char *argv[])
{
char* k = "123";
char* b = "123";
vector <const char*> vec = {"nima"};
vector <const char*> vec2 = {"nima"};
cout << &k << endl;
cout << &b << endl;
vec.push_back(k);
vec2.push_back(b);

auto result = equal(vec.cbegin(), vec.cend(), vec2.cbegin());
cout << result << endl;
return 0;
} 
```

结果是：

```
 0x7fff5f73b370
 0x7fff5f73b368
 1 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-16T14:02:39.860

这里可能发生的是编译器/链接器将其中两个相同的四个字符串文字合并为两个文字。因此，两者`"nima"`都`"123"`具有相同的地址。

您将地址存储在向量中并比较它们（`operator==`在地址上）。由于地址相同，因此比较相等。

请注意，这是**偶然**的。由于两个原因，它只能“起作用”：

1.  字符串是文字（也就是说，不是从 eg 读取的某些字符串`stdin`）。
2.  允许编译器，但不需要合并相同的文字（是否发生这种情况是实现定义的）。

这可能会导致两种情况，您会得到一个有趣的惊喜（如果您必须找出为什么它在它一直“工作”时突然不工作，那就不是那么有趣了），无论是当您使用不同的编译器，甚至是相同的编译器时具有不同优化设置的编译器，或者当您分配非文字字符串时。

# iphone - 如何从选择器列表中获取值并执行计算？

> ID：14911095
> 
> 赞同：0
> 
> 时间：2013-02-16T14:00:41.653
> 
> 标签：iphone, ios, xcode4.2

我需要创建两个下拉列表（选择器视图）并检索用户在两个下拉列表中选择的值并对它们执行计算？是否可以在 Xcode 中创建下拉列表？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T14:55:15.413

Maybe try a two-component picker view.

```
- (NSInteger)numberOfComponentsInPickerView:(UIPickerView *)pickerView{
return 2;
} 
```

Say you have two arrays, self.firstArray and self.secondArray to populate the two components.

```
- (UIView *)pickerView:(UIPickerView *)pickerView viewForRow:(NSInteger)row    forComponent:(NSInteger)component reusingView:(UIView *)view
{
if (component == 0) {
    UILabel *numberLabel = [[UILabel alloc] init];
    NSString *numberString = [self.firstArray objectAtIndex:row];
    numberLabel.font = [UIFont systemFontOfSize:14];
    numberLabel.text = numberString;
    return numberLabel;
} else {
    UILabel *alphabetLabel = [[UILabel alloc] init];
    NSString *alphabet = [self.secondArray objectAtIndex:row];
    alphabetLabel.font = [UIFont systemFontOfSize:14];
    alphabetLabel.text = alphabet;
    return alphabetLabel;
}
} 
```

Then you can get to the user selected values like this:

```
- (void)pickerView:(UIPickerView *)pickerView didSelectRow:(NSInteger)row inComponent:   (NSInteger)component
{
NSLog(@"selected number: %@", self.firstArray[[self.pickerView selectedRowInComponent:0]]);
NSLog(@"selected alphabet: %@", self.secondArray[[self.pickerView selectedRowInComponent:1]]);
} 
```

# java - Java Hashmap 删除数据并替换为新数据

> ID：14911100
> 
> 赞同：0
> 
> 时间：2013-02-16T14:01:24.327
> 
> 标签：java, hashmap

假设我有 HashMap 调用`HashMap<Integer, List<String>> storeR`；它存储“11，name1，name2”，我想将那个 11 更改为其他数字？我该怎么做？希望你们能帮助我。谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-16T14:06:35.040

鉴于您正在尝试更改*key*，您基本上需要删除旧条目并插入一个新条目。`remove`您可以使用从正在删除的条目中返回值的事实：

```
List<String> oldValue = map.remove(oldKey);
map.put(newKey, oldValue); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T14:05:40.883

您应该删除旧密钥，并使用新密钥添加列表。

# java - AChartEngine 功能

> ID：14911105
> 
> 赞同：0
> 
> 时间：2013-02-16T14:01:57.787
> 
> 标签：java, android, android-layout, achartengine

我为孕产妇和新生儿开发了一个 mHealth 应用程序。可以看到（[https://www.facebook.com/photo.php?fbid=10151513093909365&set=a.10150478362674365.421812.731814364&type=1&theater](https://www.facebook.com/photo.php?fbid=10151513093909365&set=a.10150478362674365.421812.731814364&type=1&theater)），应用中有一个折线图需要有两条固定线命名为“alert线”和“行动线”。此外，将添加到折线图中的每条线都应检查警报线和动作线的位置，以指定它们在它们的左侧/右侧。我将在应用程序中使用 AChartEngine，但我真的需要知道：

1.  AChartEngine 是否可以有两条固定位置的静态线？
2.  是否可以指定新添加的线朝向“行动线”和“警报线”的位置？

请让我知道上述问题。如果无法使用 AChartEngine（应用程序的上述要求），请向我建议其他解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T16:14:27.850

1.  是的，只需创建 2 个单独的数据系列来定义静态线。
2.  您添加到数据集的所有点都在您的数据坐标中。由您决定相对于任何其他线的位置。

其他选项：自己画线，不使用 AChartEngine。

# proxy - OpenLayers GeoServer 跨域问题

> ID：14911113
> 
> 赞同：3
> 
> 时间：2013-02-16T14:02:26.460
> 
> 标签：proxy, cross-domain, gis, openlayers, geoserver

我正在尝试从基于 openlayers 的应用程序向 GeoServer 发出 WMS GetFeatureInfo 请求。但我遇到了跨源问题，因为它知道我的源是 http:localhost。

希望有人可以帮助我这是我的设置

我在 IP xxxx 的 Windows 服务器上安装了地理服务器，它通过端口 8080 访问。我在 IIS 7.5 中本地安装了我的 openlayers 应用程序，我使用它来引用它

```
http://localhost/Application/Application.html 
```

在 GeoServer 服务器上，我配置了以下内容

GeoServer 作为 GeoSuite v2.2 的一部分安装，它使用 Jetty Web 服务。GeoServer 代理扩展已安装。（[http://geoserver.org/display/GEOS/GeoServer+Proxy+Extension](http://geoserver.org/display/GEOS/GeoServer+Proxy+Extension)）。

我已将其余代理设置为使用匿名身份验证。我必须在 config.xml 中执行此操作，因为此版本的 GeoServer 管理中有一个错误，它会停止保存身份验证过滤器。我还确保在 rest.properties 文件中配置为允许匿名身份验证。在代理配置中，我允许 localhost

在 openlayers 应用程序中，我将代理服务器设置如下

```
OpenLayers.ProxyServer = "http://x.x.x.x:8080/geoserver/rest/proxy?url=" 
```

这仍然不起作用，我仍然遇到跨源问题。我没有设置 geoserver 工作区 Base Proxy Url，因为我不确定它是否相关。我需要设置这个吗？如果是的话怎么办？

如果有人解决了这个问题请告诉我

感谢所有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T23:18:12.880

如上所述，您需要在 IIS 中创建代理。你如何做到这一点可能会有很大的不同，有很多方法可以做到这一点。为简单起见，这是一个预构建的代理。如果您需要它们，应该很容易搜索更多内容。他们是一角钱。

*   [http://netproxy.codeplex.com/](http://netproxy.codeplex.com/)

好消息是 GeoServer 2.3 beta 包含对 GetFeatureInfo 请求的 JSONP 支持。 [http://blog.geoserver.org/2013/01/29/geoserver-2-3-beta-released/](http://blog.geoserver.org/2013/01/29/geoserver-2-3-beta-released/)如果您可以检查最新的前沿，这就是要走的路。您将不再需要代理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-01-29T08:39:58.073

只需设置[`Base Proxy URL`](https://docs.geoserver.org/latest/en/user/configuration/globalsettings.html#proxy-base-url)为用户从外部使用的内容，因此从 geoserver 交付的所有生成内容都应仅提供使用此基础的链接，从而避免跨域问题。

（在您的情况下，您可能是您机器上唯一的（**dev**）用户=>将其设置为`http://localhost:8080/geoserver`...如果您以这种方式访问​​它进行测试，您也可以将其设置为您的机器 IP 或 DNS 名称）

（对于**产品**安装，它可能类似于`https://example.com/geoserver`或者`http://...`如果您不想在外面保护它）

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-12T14:18:46.183

对我来说，我使用 PHP Curl 作为代理，不需要配置太多，只是一个 PHP Curl 页面，然后一切顺利，无需繁琐的设置。;)

问候，纳斯

# python - 与 Python2 相比，Python3 中的相同代码更慢

> ID：14911122
> 
> 赞同：5
> 
> 时间：2013-02-16T14:03:24.397
> 
> 标签：python, performance, python-2.7, python-3.x

我[在 CodeChef 对这个问题进行了](http://www.codechef.com/problems/INTEST)编码，并将其作为 Python3 解决方案提交：

```
import sys

n,k = map(int,sys.stdin.readline().split(" "))
nos = map(int,sys.stdin.readlines())
ans = 0
for i in nos:
    if i>0 and i%k == 0:
        ans += 1
print(ans) 
```

但是，如果我将代码编写为：

```
import sys

n,k = map(int,sys.stdin.readline().split(" "))
nos = map(int,sys.stdin.readlines())
ans = 0
for i in nos:
    if i>0 and i%k == 0:
        ans += 1
print ans 
```

并将其作为 Python2 解决方案提交，然后该解决方案被接受。

我只是不明白这是怎么回事？...

====### 更新###====

**Sebastian**的解决方案适用于 Python3，但比我的 python2.7 解决方案**慢10 秒。**我仍然没有得到答案，为什么与以前相比，最新版本的语言性能会下降？...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T17:09:24.257

我可以确认完全相同的解决方案通过了 python 2.7 上的测试，但它在 python 3.1 上超时：

```
import sys
try:
    from future_builtins import map # enable lazy map on Python 2.7
except ImportError:
    pass 

file = sys.stdin
n, k = map(int, next(file).split())
print(sum(1 for i in map(int, file) if i % k == 0)) 
```

`file`是一个迭代器。该代码支持大文件，因为`map`它很懒（不会一次消耗整个文件）。

以下代码通过了 python 3.1 上的测试：

```
import sys
n, k, *numbers = map(int, sys.stdin.buffer.read().split())
print(sum(1 for i in numbers if i % k == 0)) 
```

注意：它不支持任意大输入（以及问题中的代码）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T14:27:06.373

在 python3 中`map`，`zip`返回生成器而不是列表。我认为生成器会带来使您的代码 TLE 的开销。要制作真正的列表，请使用列表推导`[int(line) for line in std.sys]`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T14:27:43.680

错误出现在显示`n,k = map(int,sys.stdin.readline().split(" "))`. 我试图将`n`和分开，但是一旦调用该命令`k`，它似乎仍然卡住了。`map`这是一个解释该`map`函数的页面：[http](http://docs.python.org/2/library/functions.html#map) : //docs.python.org/2/library/functions.html#map 我或 IDLE 都找不到的语法似乎有些奇怪。希望这可以帮助

# java - Google Feed API - Json 对象为空

> ID：14911125
> 
> 赞同：0
> 
> 时间：2013-02-16T14:03:37.207
> 
> 标签：java, json, api

我尝试从谷歌提要 api 获取提要。这是我的代码：

```
try{
        JSONObject googleAPI = JsonReader.readJsonFromUrl(url);
        if (googleAPI!=null){
            if (JSONUtils.isNull("feed")){
                System.out.println("No Results from this source");
            }else{  
                JSONObject feed = googleAPI.getJSONObject("feed");                      
                JSONArray entries = feed.getJSONArray("entry");                                               
                for (int i=0;i<entries.size();i++){   
                    JSONObject rItem = entries.getJSONObject(i);
                    items.add(this.parseResultItem(rItem));
                }                        

            }                
        }            
    }catch(IOException ex){
        System.out.println("Cannot read url: " + url);
    } 
```

网址是“ [https://ajax.googleapis.com/ajax/services/feed/find?v=1.0&q=](https://ajax.googleapis.com/ajax/services/feed/find?v=1.0&q=) ”，最后加上一个查询。当我创建提要 JsonObject 时，我尝试打印它的大小 (feed.size())，它是 0。

另外，我得到一个错误：net.sf.json.JSONException：该行的空对象：

```
JSONArray entries = feed.getJSONArray("entry"); 
```

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T19:05:47.153

我不知道您为函数*JsonReader.readJsonFromUrl*使用的是什么库，如果您告诉我从哪里获取它，我可以在您粘贴示例时对其进行测试。

我已经设法使用库[http://www.json.org/javadoc/org/json/JSONObject.html](http://www.json.org/javadoc/org/json/JSONObject.html)重建您的示例。这个例子工作正常

在示例中，我使用任何 URL 进行测试，也许您想告诉我们您正在尝试什么 URL。

```
try{
    String url="https://ajax.googleapis.com/ajax/services/feed/find?v=1.0&q=Official%20Google%20Blog";
    String jsonData = getUrlContent(url);
    JSONObject googleAPI = new JSONObject(jsonData);
    if (googleAPI!=null){
        JSONObject feed = googleAPI.getJSONObject("responseData");                      
        JSONArray entries = feed.getJSONArray("entries");                                               
        for (int i=0;i<entries.length();i++){
            JSONObject rItem = entries.getJSONObject(i);
            System.out.println("found one entry: " + rItem.toString());
        }                        
    }            
}catch(IOException ex){
    System.out.println("Cannot read url: " + ex.getMessage());
}catch(JSONException ex){
    System.out.println("Problem with JSON: " + ex.getMessage());
} 
```

这里唯一的自定义函数是*getUrlContent*，它只接收 URL 并返回其内容。如果你给我更多细节，我可以让这个例子更类似于你的。

由于此示例有效，并且我不知道的唯一库是*JsonReader.readJsonFromUrl*，因此问题可能出在该库上

希望这可以帮助

**编辑**：1）你在评论中提到的错误是因为，正如我所说，我在这个例子中使用了另一个库，你可以从[这里](http://www.java2s.com/Code/Jar/j/Downloadjavajsonjar.htm)下载它，但我认为你不需要这样做，因为

2）感谢您的代码，我能够重建您的示例，并且我发现，至少在我的示例中，因为我得到的响应中没有“提要”实体，所以正如您提到的那样，有一个错误，我的意思是排队

```
JSONArray entries = feed.getJSONArray("entry"); 
```

但是，当我尝试获取在我的情况下存在的*responseData*和*条目时，您的示例。*奇怪的是它存在线

```
if (JSONUtils.isNull("feed")){ 
```

这应该可以防止这种情况发生，好吧，正如我在[docs](http://json-lib.sourceforge.net/apidocs/jdk15/net/sf/json/util/JSONUtils.html#isNull%28java.lang.Object%29)中发现的那样，这个检查 javascripts nulls。也许您的困惑是因为您正在阅读[此文档](http://www.json.org/javadoc/org/json/JSONObject.html#isNull%28java.lang.String%29)，该文档适用于我在我构建的示例中使用的库！所以你应该用这一行替换那一行

```
if (JSONUtils.isNull(googleAPI.getJSONObject("feed"))){ 
```

我已经做到了，它工作正常。因此，总而言之，检查您收到的响应是否实际包含*提要*对象。如果您仍然有问题，也许您想给我您正在查询的 URL。

问候

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T00:02:05.997

这是功能：

```
public static JSONObject readJsonFromUrl(String url) throws IOException, JSONException {
        InputStream is = new URL(url).openStream();
        try {
            BufferedReader rd = new BufferedReader(new InputStreamReader(is, Charset.forName("UTF-8")));
            String jsonText = readAll(rd);
            JSONObject json = JSONObject.fromObject(jsonText);
            return json;
        } finally {
            is.close();
        }
        } 
```

# python - 如何让windows自动为文件添加扩展名？

> ID：14911126
> 
> 赞同：4
> 
> 时间：2013-02-16T14:03:37.923
> 
> 标签：python, windows, python-2.7, tkinter

**背景**

我目前正在制作一个基本的文本编辑器，希望对 Tkinter 有一个基本的了解。我想制作我自己的文件格式，`.mydoc`我试图将其更改`filetype`为`.mydoc`不占上风。这是我目前拥有的代码：

**代码**

```
def openMe(self):
    #import the Tk file dialogue
    import tkFileDialog as tkF
    myFormat = [('Example Format', '*.mydoc')]
    direct = tkF.askopenfilename(initialdir='D:\\', filetypes = myFormat, title = "Open a .mydoc")
    try:
        #open the text file
        txt_file = open(direct,"r")
    except UnboundLocalError, IOError:
        print "You either did not select a file, or the filetype was incorrect.\nPlease try again."
    #Read the data
    currentTEXT = txt_file.read()
    #Delete current text
    self.write.delete(0.0, END)
    #insert new text
    self.write.insert(0.0, currentTEXT) 
```

**问题**

1.  如何让计算机自动添加我的分机？（是的，我已经关闭了该`hide extensions`选项。

**技术规格**

语言：Python 2.7.3

操作系统：Windows 7

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T14:56:25.527

Try using `defaultextension`:

```
tkF.askopenfilename(initialdir='D:\\',
filetypes=myFormat,
title="Open a .mydoc",
defaultextension=".mydoc") 
```

# java - Java 不下载完整文件

> ID：14911127
> 
> 赞同：2
> 
> 时间：2013-02-16T14:03:48.710
> 
> 标签：java, http

我从 HTTP 服务器下载文件有一点问题。下面的代码仅下载约 30MB 的文件（文件大小为 52MB）。我的浏览器下载文件没有任何问题。怎么了？

```
URL website = new URL("http://www.website.com/information.asp");
ReadableByteChannel rbc = Channels.newChannel(website.openStream());
FileOutputStream fos = new FileOutputStream("information.html");
fos.getChannel().transferFrom(rbc, 0, 1 << 24); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-16T14:15:43.387

[FileChannel.transferFrom()](http://docs.oracle.com/javase/7/docs/api/java/nio/channels/FileChannel.html#transferFrom%28java.nio.channels.ReadableByteChannel,%20long,%20long%29) Java 文档说：

> 将字节从给定的可读字节通道传输到此通道的文件中。
> 
> 尝试从源通道读取 count 个字节并将它们从给定位置开始写入此通道的文件。此方法的调用可能会也可能不会传输所有请求的字节；是否这样做取决于通道的性质和状态。如果源通道剩余的字节数少于计数，或者源通道是非阻塞的并且其输入缓冲区中立即可用的字节数少于计数，则将传输少于请求的字节数。

```
URL website = new URL("http://www.website.com/information.asp");
URLConnection connection = website.openConnection();
ReadableByteChannel rbc = Channels.newChannel( connection.getInputStream());
FileOutputStream fos = new FileOutputStream("information.html" );
long expectedSize = connection.getContentLength();
System.out.println( "Expected size: " + expectedSize );
long transferedSize = 0L;
while( transferedSize < expectedSize ) {
   transferedSize +=
      fos.getChannel().transferFrom( rbc, transferedSize, 1 << 24 );
   System.out.println( transferedSize + " bytes received" );
}
fos.close(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-29T06:26:53.930

```
 try {

        InputStream inputStream = url.openStream();
        ReadableByteChannel rbc = Channels.newChannel(inputStream);
        FileOutputStream fos = new FileOutputStream("your-pc-path");

        fos.getChannel().transferFrom(rbc, 0, Long.MAX_VALUE);
        inputStream.close();

    } catch (Exception e) {
        e.printStackTrace();
    } 
```

# gnuplot - 在 gnuplot 绘图文件中使用相对路径

> ID：14911128
> 
> 赞同：5
> 
> 时间：2013-02-16T14:03:54.417
> 
> 标签：gnuplot, relative-path

在 gnuplot 指令文件中，是否可以指示数据源文件和输出的相对路径？路径必须相对于 gnuplot 指令文件路径。

**上下文** 我有包含 12 到 50 条 xy 曲线的大型数据文件，我使用 PHP 脚本和 gnuplot 处理这些数据文件，以便提供漂亮的数据图形视图。这些视图是使用 gnuplot 生成的，对于每个视图，我都有一个 .csv 文件、一个 gnuplot 绘图指令文件和一个图形。

一切都很好地分类到文件夹中。通常，在文件夹中，图形位于顶层，然后在源/子文件夹中是 .csv 和 gnuplot 文件。

有时，我需要稍微更改图形。所以我编辑了 gnuplot 文件，并通过直接调用 gnuplot 再次绘制它。一切都很好，直到我将文件夹移到其他地方。我经常这样做。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T14:55:48.457

Yes, you can specify relative paths in the gnuplot file:

```
set output '../path/to/outputs/output.eps'
plot '../path/to/csv/input.csv' 
```

works fine. If you want to specify paths as arguments to the script, I recommend a bash wrapper:

```
#!/bin/bash

# argument 1 is path to input
# argument 2 is path to output

gnuplot << EOF
set terminal ...
set output '$2/output'

plot '$1/input1.csv', \
     '$1/input2.csv' ...
EOF 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-29T17:14:01.270

我偶然发现使用`loadpath`来加载相对于一个的数据`$HOME`：

```
set loadpath system('readlink -f ~/.gnuplot.scripts') 
```

当然，这是针对 un*x 系统的。

# ios - 通过 AS3 在 iOS (iPhone 5) 上的原生振动导致崩溃

> ID：14911129
> 
> 赞同：0
> 
> 时间：2013-02-16T14:03:55.433
> 
> 标签：ios, actionscript-3, air, flash-cs6, vibration

我正在尝试在 iPhone 上测试振动，但在设备上测试时振动不起作用。一旦应用程序运行，它就会崩溃（并关闭）而不振动。我已经按照[这个问题和答案](https://stackoverflow.com/questions/14777563/getting-native-vibration-to-work-on-ios-through-as3)导入了所有相关的扩展并链接到相关的 Adob​​e AIR 库类。

```
package  
{
    import flash.display.Sprite;
    import com.adobe.nativeExtensions.Vibration; 

    public class Test extends Sprite
    {
        public function Test()
        {
            run();
        }

        public function run(): void {
            var vibe:Vibration;
            if (Vibration.isSupported)
            {
                vibe = new Vibration();
                vibe.vibrate(25000);
            }
        }
    }
} 
```

# ruby - 在当前范围内找不到变量？

> ID：14911134
> 
> 赞同：0
> 
> 时间：2013-02-16T14:05:08.940
> 
> 标签：ruby, erb

当尝试将跟踪输出添加到 ERB 模板时，我在尝试查找变量`ex_title`的来源时遇到了以下问题。

试图列出当前范围内所有可能的变量，但根本不存在：

```
<%= instance_variables.grep(/ex_title/) %>  # renders an empty array
<%= global_variables.grep(/ex_title/) %>    # renders an empty array
<%= local_variables.grep(/ex_title/) %>     # renders an empty array

<%= instance_variables.sort %>   # renders array with many elements
<%= global_variables.sort %>     # renders array with many elements
<%= local_variables.sort %>      # renders array with many elements 
```

而`ex_title`变量可证明确实存在：

```
<%= ex_title %>                  # renders "Categories - Online store"
<%= ex_title.class %>            # renders "String"
<%= ex_title.object_id %>        # renders "15825900" 
```

如果不在全局、局部或实例变量中，还能在哪里找到？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T14:24:24.330

那么你必须断定它是一种方法。用于[`defined?`](http://www.ruby-doc.org/docs/ProgrammingRuby/tut_expressions.html#definedandorandnot)确定是什么`ex_title`。例如：

```
defined? ex_title  #=> nil

def ex_title; end
defined? ex_title  #=> "method"

ex_title = Object.new
defined? ex_title  #=> "local-variable" 
```

# c - 快速排序字符数组（字符串） C 编程

> ID：14911142
> 
> 赞同：0
> 
> 时间：2013-02-16T14:05:53.870
> 
> 标签：c, arrays, character, short

我有一个字符数组

```
char word[30]; 
```

保留用户将输入的单词，我想对字母进行排序，例如，如果单词是 **“猫”** ，我希望它使其成为**“行为”** ，我认为这是相当容易的任务，但作为 C 编程的初学者，我发现网上的例子比较混乱。

这是我尝试进行冒泡排序的代码...

还是不行

```
#include <stdio.h>
#include<string.h>

#define MAX_STRING_LEN 30

main()
{
char w1[30], w2[30];
char tempw1[30], tempw2[30];
int n,i,k;
char temp;  
    printf("Give the first word: ");
    scanf("%s",&w1);
    printf("Give the second word: ");
    scanf("%s",&w2);
        if(strlen(w1)==strlen(w2)) /* checks if words has the same length */
            {
            strcpy(tempw1,w1); /*antigrafei to wi string sto tempw1 */ 
            strcpy(tempw2,w2); /*antigrafei to w2 string sto tempw2 */ 
            n=strlen(w1);

             for (i=1; i<n-1; i++)
               {
                                for (k=n;k>i+1;k--)
                    {
                        if (w1[k] < w1[k-1])
                            {
                                temp=w1[k-1];
                                w1[k-1]=w1[k];
                                w1[k]=temp;
                            }
                     }
            }
             for (i=1; i<n-1; i++)
               {
                                for (k=n;k>i+1;k--)
                    {
                        if (w2[k] < w2[k-1])
                            {
                                temp=w2[k-1];
                                w2[k-1]=w2[k];
                                w2[k]=temp;
                            }
                     }
                } 
            printf("%s \n",tempw1);
            printf("%s \n",w1);
            printf("%s \n",tempw2);
            printf("%s \n",w2);
            /* call qsort */
            /* call compare */
            }
        else printf(" \n H lexh %s den einai anagrammatismos tis lexhs %s",w1,w2);
    return 0;St 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-16T14:21:41.183

`qsort()`从 C 标准库中使用：

```
int compare(const void *a, const void *b)
{
    return *(const char *)a - *(const char *)b;
}

char arr[] = "dbaurjvgeofx";

printf("Unsorted: %s\n", arr);
qsort(arr, strlen(arr), 1, compare);
printf("Sorted: %s\n", arr); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T14:20:27.723

这是基本的编程知识，你自己解决它会帮自己一个忙。

话虽如此，这是一个快速的伪

```
for i is equal to 1 to length of array
  for k is equal to i to length of array
   if i > k
    temp = i
    i = k
    k = temp
   endif
  endfor
endfor 
```

# php - 使用付款方式的 Magento 优惠券折扣规则

> ID：14911146
> 
> 赞同：1
> 
> 时间：2013-02-16T14:06:37.610
> 
> 标签：php, magento, e-commerce, cart

用户选择付款方式后，我需要添加优惠券折扣。我不知道最好的方法是什么，我把它放在付款步骤之后还是添加到审查步骤？

我尝试添加评论，但当我发送表单以计算此重定向到购物车页面的折扣时，我无法更改帖子的 URL。有人已经在 Magento 中实现了这个功能，可以帮助我吗？

我使用 Magento 1.6.2！

编辑：

我将规则与付款方式一起使用。 [http://www.magentocommerce.com/boards/viewthread/228664/#t322601](http://www.magentocommerce.com/boards/viewthread/228664/#t322601)

并更改某些功能以使用相同的优惠券代码添加两个或多个购物车规则。

但我无法验证优惠券，因为付款方式是在单页结账时选择的，并且优惠券表格在购物车上。

我该怎么做才能解决这个问题？

# java - 无法扩展 MapActivity 类？

> ID：14911153
> 
> 赞同：1
> 
> 时间：2013-02-16T14:08:26.590
> 
> 标签：java, android, api, google-maps

我正在我的应用程序上实施谷歌地图。

我已经获取了我的 API 密钥等，目前正在学习一系列教程。我需要扩展 MapActivity 超类，但我目前无法这样做。

我已经在我的清单中实现了地图库，并在我的 XML 布局中插入了 API 密钥。

但仍然收到“MapActivity 无法解析为类型”错误。这是我的清单：

```
<?xml version="1.0" encoding="utf-8"?> 
```

```
<uses-sdk android:minSdkVersion="8" />

<uses-permission android:name="android.permission.INTERNET"/>

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >
    <activity
        android:name=".MainMap"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
  <uses-library android:name="com.google.android.maps" />
</application>
</manifest> 
```

这是我的 XML：

```
 <?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android" 
android:layout_width="fill_parent" 
android:layout_height="fill_parent">

<com.google.android.maps.MapView 
    android:id="@+id/mapView"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:enabled="true"
    android:clickable="true"
    android:apiKey="AIzaSyCJSfjl_7lU7-HKV3yIf5nnMODl6qiG2_g"
    />

 </RelativeLayout> 
```

我的班级：

```
package com.example.map;

import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;

public class MainMap extends MapActivity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.maplayout);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.maplayout, menu);
    return true;
}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T14:10:04.957

确保您的构建目标（例如，Eclipse 中的 Project > Properties > Android）适用于 Android SDK 的“Google API”版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T14:12:12.763

试试这个：

您选择**项目构建目标**是使用您的项目属性的 Google API

# tomcat - Tomcat 无法启动

> ID：14911154
> 
> 赞同：0
> 
> 时间：2013-02-16T14:08:28.727
> 
> 标签：tomcat, raspberry-pi

我在我得到的 Raspberry Pi 上安装了 Tomcat，一切都运行良好。但是，昨天，它似乎停止了工作。我注意到的第一件事是，当我尝试运行启动脚本时，出现以下错误...

```
touch: cannot touch `/opt/lib/apache-tomcat-7.0.35/logs/catalina.out': Permission denied
/opt/lib/apache-tomcat-7.0.35/bin/catalina.sh: 391: /opt/lib/apache-tomcat-7.0.35/bin/catalina.sh: cannot create /opt/lib/apache-tomcat-7.0.35/logs/catalina.out: Permission denied 
```

这以前没有发生过，但是无论如何......我做了一个 chmod catalina.out 并且错误消失了。不幸的是，我没有运气打到 Tomcat 管理器（即：8080）。我查看了启动脚本的输出，发现 JRE home 设置为 /usr，这似乎不正确，因此我将 Tomcat 启动脚本更改为将 JRE_HOME 指向 /usr/lib/jvm/java-1.6.0 -openjdk-armhf。不过，我仍然无法访问 Tomcat 管理器。此外，当我查看在我的 Pi 上运行的进程时，找不到 Tomcat。

谁能帮我这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T14:55:18.813

我写了一个别名来运行启动脚本，忘记在脚本路径之前包含 sudo 。嗬！

# c - 如何正确重用卷曲手柄

> ID：14911156
> 
> 赞同：24
> 
> 时间：2013-02-16T14:08:47.417
> 
> 标签：c, curl, libcurl, handle

我想正确地重用 curl 句柄，这样它就不会给我错误并正常运行。

假设我有这段代码：

```
 CURL *curl;

    curl_global_init(CURL_GLOBAL_ALL);
    curl = curl_easy_init();

    curl_easy_setopt(curl, CURLOPT_USERAGENT, "Mozilla/5.0...");
    curl_easy_setopt(curl, CURLOPT_URL, "http://www.google.com");
    curl_easy_perform(curl);

    curl_easy_setopt(curl, CURLOPT_URL, "http://www.bbc.com");
    curl_easy_perform(curl);

    curl_easy_cleanup(curl);
    curl_global_cleanup(); 
```

这是重用卷曲手柄的好方法还是正确方法？还是我需要`curl_easy_reset()`在那个手柄上使用？

如果有人建议您应该避免在 curl 中做什么，我也将不胜感激。也许有人可以给我一个已经存在的信息源的链接？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2015-02-03T14:18:54.823

如果我正确理解了这个问题，您想知道您是否可以拨打电话[`curl_easy_perform()`](https://curl.haxx.se/libcurl/c/curl_easy_perform.html)，然后只更改网址[`curl_easy_setopt()`](https://curl.haxx.se/libcurl/c/curl_easy_setopt.html)，然后再拨打第二次电话？这应该可以正常工作，因为该函数不会更改任何先前设置的句柄选项。这是一个简短的工作示例：

```
size_t writeCallback(char* contents, size_t size, size_t nmemb, std::string* buffer) {
  size_t realsize = size * nmemb;
  if(buffer == NULL) {
    return 0;
  }
  buffer->append(contents, realsize);
  return realsize;  
}

int main(int argc, char** argv) {
  std::string buffer;

  // Initialize global.
  curl_global_init(CURL_GLOBAL_ALL);

  // Start a libcurl easy session.
  CURL* ch = curl_easy_init();
  if (ch) {
    // Something went wrong
    curl_global_cleanup();
    return -1;
  }

  // These options will only be set once.
  curl_easy_setopt(ch, CURLOPT_VERBOSE, 0);
  curl_easy_setopt(ch, CURLOPT_FOLLOWLOCATION, 1);
  curl_easy_setopt(ch, CURLOPT_USERAGENT, "Crawler");
  curl_easy_setopt(ch, CURLOPT_WRITEFUNCTION, &writeCallback);
  curl_easy_setopt(ch, CURLOPT_WRITEDATA, &buffer);

  // Push a couple of URLs onto queue.
  std::vector<const char*> queue;
  queue.push_back("http://www.google.com");
  queue.push_back("http://www.stackoverflow.com");

  const char* url;
  CURLcode code;

  do {
      // Grab an URL from the queue.
      url = queue.back();
      queue.pop_back();

      // Only change the CURLOPT_URL option for the handle
      // the rest will stay intact.
      curl_easy_setopt(ch, CURLOPT_URL, url);

      // Perform transfer.
      code = curl_easy_perform(ch);

      // Check if everything went fine.
      if(code != CURLE_OK) {
        // Handle any errors.
      }

      // Clear the buffer.
      buffer.clear();
  } while(queue.size() > 0);

  // Cleanup.
  curl_easy_cleanup(ch);
  curl_global_cleanup();

  return 0;
} 
```

> 或者我需要在那个句柄上使用 curl_easy_reset() 吗？

答案是***否定***的，因为[`curl_easy_perform()`](https://curl.haxx.se/libcurl/c/curl_easy_perform.html)not 将重置您的代码应该没问题的任何选项，您可以坚持只更改 url 之类的`curl_easy_setoption(curl, CURLOPT_URL, <newurl>);`。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-02-23T23:51:40.240

在简易界面上使用环境 libcurl 时，首先必须调用：

*   `curl_easy_init()`，它初始化了简单的句柄，
*   `curl_global_init()`，大多数情况下标志选项必须是`CURL_GLOBAL_ALL`

这两个函数中的每一个在开始时只被调用一次，并且需要它们相反的清理：

*   `curl_easy_cleanup()`当你完成你声明的句柄时，
*   `curl_global_cleanup()`当你用完 libcurl，

为了获得更好的结果，请尽可能多地检查错误。Libcurl 为此提供了`curl_easy_strerror()`功能。它返回一个描述 CURLcode 错误的字符串。此外，如果一切正常，某些函数会返回值 CURL_OK 或特定整数。

例如，这是使用 CURLOPT_URL 选项的正确方法：

```
#include <curl.h>

int main(void)
{
    /* declaration of an object CURL */
    CURL *handle;                   

    /* result of the whole process */
    CURLcode result;              

    /* the first functions */
    /* set up the program environment that libcurl needs */
    curl_global_init(CURL_GLOBAL_ALL);
    /* curl_easy_init() returns a CURL easy handle that you're gonna reuse in other easy functions*/
    handle = curl_easy_init();

    /* if everything's all right with the easy handle... */
    if(handle) 
    {
            /* ...you can list the easy functions */
            /* here we just gonna try to get the source code of http://example.com */
            curl_easy_setopt(handle, CURLOPT_URL, "http://example.com");

            /* but in that case we also tell libcurl to follow redirection */
            curl_easy_setopt(handle, CURLOPT_FOLLOWLOCATION, 1L);

            /* perform, then store the expected code in 'result'*/ 
            result = curl_easy_perform(handle);

            /* Check for errors */ 
            if(result != CURLE_OK)
            {
                    /* if errors have occured, tell us wath's wrong with 'result'*/
                    fprintf(stderr, "curl_easy_perform() failed: %s\n", curl_easy_strerror(result));

                    return 1;
            }
    }
     /* if something's gone wrong with curl at the beginning, we'll appriciate that piece of code */  
    else 
    {
            fprintf(stderr, "Curl init failed!\n");

            return 1;
    }

    /* cleanup since you've used curl_easy_init */ 
    curl_easy_cleanup(handle);

    /* this function releases resources acquired by curl_global_init() */
    curl_global_cleanup();

    /* make the programme stopping for avoiding the console closing befor you can see anything */
    system("PAUSE");

    return 0;
} 
```

如果您想将该句柄重用于完全不同的目的，您最好使用不同的 CURL 简单句柄。您的代码仍然可以正常工作，但我会使用不同的句柄，因为它显然是两个单独的操作。

但是，有时您需要使用相同的句柄，如果您不想自动重置它，请使用适当的功能：

```
void curl_easy_reset(CURL *handle); 
```

请注意，它不会更改实时连接、会话 ID 缓存、DNS 缓存、cookie 和句柄中的共享。

我还没有尝试过，但是使用您的代码应该会给我们类似的东西：

```
#include <curl.h>

int main(void)
{
    CURL *handle;                   
    CURLcode result; 

    int error = 0;
    int error2 = 0;             

    curl_global_init(CURL_GLOBAL_ALL);
    handle = curl_easy_init();

    if(handle) 
    {
            curl_easy_setopt(handle, CURLOPT_USERAGENT, "Mozilla/5.0 (Windows; U; Windows NT 6.1; fr; rv:1.9.2) Gecko/20100115 Firefox/3.6");
            curl_easy_setopt(handle, CURLOPT_URL, "http://www.google.com");
            result = curl_easy_perform(handle);

            if(result != CURLE_OK)
            {
                    fprintf(stderr, "curl_easy_perform() failed: %s\n", curl_easy_strerror(result));

                    error++;
            }

            Sleep(5000);         // make a pause if you working on console application

            curl_easy_reset(handle);

            curl_easy_setopt(handle, CURLOPT_USERAGENT, "Mozilla/5.0 (Windows; U; Windows NT 6.1; fr; rv:1.9.2) Gecko/20100115 Firefox/3.6");      // have to write it again
            curl_easy_setopt(handle, CURLOPT_URL, "http://www.bbc.com");
            result = curl_easy_perform(handle);

            if(result != CURLE_OK)
            {
                    fprintf(stderr, "curl_easy_perform() failed: %s\n", curl_easy_strerror(result));

                    error2++;
            }

            if(error == 1 || error2 == 1)
            {
                    return 1;
            }
    }
    else 
    {
            fprintf(stderr, "Curl init failed!\n");

            return 1;
    }

    curl_easy_cleanup(handle);
    curl_global_cleanup();

    system("PAUSE");

    return 0;
} 
```

如果您对 有任何问题，请`Sleep`尝试将其替换为`sleep`或`_sleep`或将 5000 替换为 5。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-16T14:18:27.390

> 或者我需要在那个句柄上使用 curl_easy_reset() 吗？

您要么重置它 XOR 清理它（在`curl_easy_init()`再次分配返回值之前） - 两者都做不好。有关详细信息，请参阅[文档](http://curl.haxx.se/libcurl/c/libcurl-easy.html)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-09-04T09:09:55.377

我通常在每次请求后使用我的 curl 句柄调用[curl_easy_reset](https://curl.se/libcurl/c/curl_easy_reset.html)，这允许我通过获取新的 curl 句柄 ( [curl_easy_init](https://curl.se/libcurl/c/curl_easy_init.html) ) 获得的默认选项重新使用句柄，从而跳过销毁句柄并要求一个新的！

# jquery - 使用 jQuery 可排序后重新编号输入标签名称字段

> ID：14911157
> 
> 赞同：0
> 
> 时间：2013-02-16T14:09:02.563
> 
> 标签：jquery, input, jquery-ui-sortable

我正在使用 jQuery 的可排序方法来重新排序输入标签组。这些标签的名称属性的形式`foo[n]`是（当组中有一个输入时）或`foo[n][fieldname]`（当组中有多个输入时），其中 n 是某个数字。

我遇到的问题是，提交整体表单时，PHP代码存储在数据库中的输入组的顺序是索引的顺序，而不是屏幕上的顺序。我需要更新名称索引以反映屏幕排序顺序的结果。我不确定该怎么做。jQuery 的文档并不是特别有用。

生成的 HTML 看起来像这样：

```
<ul id="deepwoods_meta_rightbutton-repeatable" class="deepwoods_metabox_repeatable">
  <li><span class="sort hndle">||</span><textarea name="deepwoods_meta_rightbutton[0]" id="deepwoods_meta_rightbutton" cols="60" rows="4">(some text)</textarea><a class="repeatable-remove button" href="#">-</a></li>
  <li> (same as above, except [0] replaced with [1]) </li>
  ...
  <li> (same as above, except [0] replaced with [n]) </li>
</ul> 
```

或者它可能是这样的：

```
<ul id="deepwoods_meta_buybuttons-repeatable" class="deepwoods_metabox_repeatable">
  <li><span class="sort hndle">||</span>
    <div class="form-table deepwoods-metabox div-as-table">
       <div class="div-as-table-row">
          <span class="span-as-th"><label for="deepwoods_meta_buybuttons">Link</label</span>
          <span class="span-as-td"><input type="text" name="deepwoods_meta_buybuttons[0][thelink]" id="deepwoods_meta_buybuttons" value="..." size="60" class="scrollable" /></span></div>
       <div class="div-as-table-row">
          <span class="span-as-th"><label for="deepwoods_meta_buybuttons">Button</label></span>
          <span class="span-as-td"><input type="text" name="deepwoods_meta_buybuttons[0][thebutton]" id="deepwoods_meta_buybuttons" value="..." size="60" class="scrollable" /></span></div>
       <div class="div-as-table-row">
           <span class="span-as-th"><label for="deepwoods_meta_buybuttons">Text</label></span>
           <span class="span-as-td"><textarea name="deepwoods_meta_buybuttons[0][text]" id="deepwoods_meta_buybuttons" cols="60" rows="4">...</textarea></span></div></div><a class="repeatable-remove button" href="#">-</a></li>
   <li> (much like the previous list item, but [0] replaced with [1] ) </li>
   ...
   <li> nth ([n]) item </li>
</ul> 
```

也就是说，每个可排序的列表项可以包含单个输入字段（输入、textarea 或 select 标记），或者每个列表项可以包含一组输入、textarea 或一起出现的选择项。将其视为简单缩放器值的向量或对象值的向量。

我在表单中有多个（可单独排序的）块。我正在使用一个 jQuery 代码，看起来像：

```
jQuery('.deepwoods_metabox_repeatable').sortable({
            opacity: 0.6,
            revert: true,
            cursor: 'move',
            handle: '.sort',
            containment: 'parent'
}); 
```

我想我需要添加一个更新事件处理程序，但我不知道如何从那里开始。jQuery 文档不清楚（对我来说）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-16T15:24:52.657

您有 2 个选择：

从`input`标签中删除所有索引，表单将默认按顺序发送它们

或者

使用`stop`事件更改名称：

```
jQuery('.deepwoods_metabox_repeatable').sortable({
   stop: function (event, ui) {
        updateNames($(this))
    }
})

function updateNames($list) {
    $list.find('li').each(function (idx) {
        var $inp = $(this).find('input');
        $inp.each(function () {
            this.name = this.name.replace(/(\[\d\])/, '[' + idx + ']');            
        })
    });
} 
```

演示：http: [//jsfiddle.net/gszfD/](http://jsfiddle.net/gszfD/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T14:32:29.707

在对 Firebug 进行了几个小时的折腾后，我制定了一个似乎可行的解决方案。可能不是特别优雅，可能过于冗长。

```
jQuery('.deepwoods_metabox_repeatable').sortable({
    opacity: 0.6,
    revert: true,
    cursor: 'move',
    handle: '.sort',
    containment: 'parent',
    update: function(event,ui){ renumber(ui.item); }
});

function renumber(item) {
  ul = item[0].parentNode;
  jQuery('li',ul).each(function(index,element) { 
    renumber_helper(index,element); 
  });
}

function renumber_helper(index,element) {
  inputs = jQuery('input', element);
  for (j = 0; j < inputs.length; j++) {
    input = inputs[j];
    name = input.name;
    input.name = name.replace(/(\d+)/,index);
  }
  textareas = jQuery('textarea',element);
  for (j = 0; j < textareas.length; j++) {
     textarea = textareas[j];
     name = textarea.name;
     textarea.name = name.replace(/(\d+)/,index);
  }
  selects = jQuery('select',element);
  for (j = 0; j < selects.length; j++) {
    select = selects[j];
    name = select.name;
    select.name = name.replace(/(\d+)/,index);
  }
} 
```

# jsf - JSF 中的“绑定”属性如何工作？何时以及如何使用它？

> ID：14911158
> 
> 赞同：79
> 
> 时间：2013-02-16T14:09:17.633
> 
> 标签：jsf, jsf-2, binding, components

JSF中有很多区分`value`属性和属性的材料。`binding`

我对这两种方法有何不同感兴趣。鉴于：

```
public class User {
    private String name;
    private UICommand link;

    // Getters and setters omitted.
} 
```

```
<h:form>
    <h:commandLink binding="#{user.link}" value="#{user.name}" />
</h:form> 
```

`value`指定属性时发生的事情非常简单。getter 运行以返回bean的`name`属性值。`User`该值被打印到 HTML 输出。

但我无法理解它是如何`binding`工作的。生成的 HTML 如何与bean的`link`属性保持绑定？`User`

下面是手动美化和注释后生成的输出的相关部分（注意 id`j_id_jsp_1847466274_1`是自动生成的，并且有两个隐藏的输入小部件）。我正在使用 Sun 的 JSF RI，版本 1.2。

```
<form action="/TestJSF/main.jsf" enctype="application/x-www-form-urlencoded"
    id="j_id_jsp_1847466274_1" method="post"  name="j_id_jsp_1847466274_1">
    <input name="j_id_jsp_1847466274_1" type="hidden" value="j_id_jsp_1847466274_1">
    <a href="#" onclick="...">Name</a>
    <input autocomplete="off" id="javax.faces.ViewState" name="javax.faces.ViewState"
        type="hidden" value="-908991273579182886:-7278326187282654551">
</form> 
```

这里的`binding`存储在哪里？

* * *

## 回答 #1

> 赞同：135
> 
> 时间：2013-02-17T02:41:07.070

## 它是如何工作的？

当构建/恢复 JSF 视图（Facelets/JSP 文件）时，将生成 JSF 组件树。在那一刻，[视图构建时间](https://stackoverflow.com/questions/31890433/whats-the-view-build-time)，所有`binding`属性都被评估（[以及属性`id`和标签处理程序，如 JSTL](https://stackoverflow.com/questions/3342984/jstl-in-jsf2-facelets-makes-sense)）。当需要创建 JSF 组件才能添加到组件树中时，JSF 会检查该`binding`属性是否返回一个预先创建的组件（即 non- `null`），如果是，则使用它。如果它不是预先创建的，那么 JSF 将“以通常的方式”自动创建组件，并使用自动创建的组件实例作为参数调用 setter`binding`属性。

实际上，它将组件树中组件实例的引用绑定到范围变量。此信息在生成的组件本身的 HTML 表示中是不可见的。无论如何，此信息与生成的 HTML 输出无关。当提交表单并恢复视图时，JSF 组件树只是从头开始重建，所有`binding`属性都将重新评估，如上段所述。重新创建组件树后，JSF 会将 JSF 视图状态恢复到组件树中。

## 组件实例是请求范围的！

重要的是要知道和理解具体的组件实例是有效的请求范围。它们是在每个请求上新创建的，并且它们的属性在恢复视图阶段由来自 JSF 视图状态的值填充。因此，如果您将组件绑定到支持 bean 的属性，那么支持 bean**绝对不**应该在比请求范围更广泛的范围内。另请参阅[JSF 2.0 规范](http://download.oracle.com/otndocs/jcp/jsf-2.0-fr-full-oth-JSpec/)第 3.1.5 章：

> ### 3.1.5 组件绑定
> 
> ...
> 
> 组件绑定通常与通过托管 Bean 创建工具动态实例化的 JavaBean 一起使用（请参阅第 5.8.1 节“VariableResolver 和默认变量解析器”）。**强烈建议应用程序开发人员将组件绑定表达式指向的托管 bean 放在“请求”范围内。**这是因为将它放在会话或应用程序范围内需要线程安全，因为 UIComponent 实例依赖于在单个线程内运行。将组件绑定置于“会话”范围内时，还可能对内存管理产生负面影响。

否则，组件实例在多个请求之间共享，可能导致“[重复组件 ID](https://stackoverflow.com/questions/2101755/im-getting-duplicate-id-error-after-adding-binding-attribute) ”错误和“奇怪”行为，因为视图中声明的验证器、转换器和侦听器从先前的请求重新附加到现有组件实例。症状很明显：它们被执行多次，每个请求在与组件绑定到的相同范围内执行一次。

而且，在重负载下（即，当多个不同的 HTTP 请求（线程）同时访问和操作同一个组件实例时），您可能迟早会面临应用程序崩溃，例如[在 UIComponent.popComponentFromEL 处卡住线程](https://stackoverflow.com/questions/30093791/stuck-thread-at-uicomponent-popcomponentfromel)，或[线程卡住在 JSF saveState() 期间，HashMap 中的 CPU 利用率为 100%](https://stackoverflow.com/questions/32879014/java-threads-at-100-cpu-utilization-using-richfaces-uidataadaptorbase-and-its-i)，甚至在 JSF 忙于保存或恢复视图状态（即堆栈跟踪指示或方法等）时，一些“奇怪”`IndexOutOfBoundsException`或`ConcurrentModificationException`直接来自 JSF 实现源代码。`saveState()``restoreState()`

此外，由于单个组件基本上通过`getParent()`and引用整个组件树的其余部分`getChildren()`，当将单个组件绑定到视图或会话范围的 bean 时，您实际上将整个 JSF 组件树保存在 HTTP 会话中。当视图中有相对较多的组件时，这将在可用服务器内存方面变得非常昂贵。

## 在 bean 属性上使用`binding`是不好的做法

无论如何，使用`binding`这种方式，将整个组件实例绑定到 bean 属性，即使在请求范围的 bean 上，在 JSF 2.xa 中也是相当罕见的用例，通常不是最佳实践。它表示设计气味。您通常在视图端声明组件并将它们的运行时属性（例如`value`、`styleClass`、等`disabled`）绑定`rendered`到普通的 bean 属性。然后，您只需准确地操作您想要的 bean 属性，而不是抓取整个组件并调用与该属性关联的 setter 方法。

如果需要基于静态模型“动态构建”组件，最好使用[JSTL 之类的视图构建时间标签](https://stackoverflow.com/questions/13596456/display-a-list-of-images-in-a-table-format-in-jsf/)，如果需要，可以在[标签文件](https://stackoverflow.com/questions/5713718/how-to-make-a-grid-of-jsf-composite-component)中使用，而不是`createComponent()`,等等。另请参阅[如何将旧 JSP 片段重构为一些等效的 JSF？](https://stackoverflow.com/questions/31732567/how-to-refactor-snippet-of-old-jsp-to-some-jsf-equivalent)`new SomeComponent()``getChildren().add()`

或者，如果需要基于动态模型“动态渲染”组件，则只需使用[迭代器组件](https://stackoverflow.com/questions/3409053/jsf2-can-i-add-jsf-components-dynamically/)（`<ui:repeat>`、`<h:dataTable>`等）。另请参阅[如何动态添加 JSF 组件](https://stackoverflow.com/questions/3409053/how-to-dynamically-add-jsf-components)。

复合组件是一个完全不同的故事。[将a内的](https://stackoverflow.com/questions/6358066/how-to-implement-a-dynamic-list-with-a-jsf-2-0-composite-component/)[组件](https://stackoverflow.com/questions/17235721/split-java-util-date-over-two-hinputtext-fields-representing-hour-and-minute-wi/)绑定到`<cc:implementation>`支持组件（即由`<cc:interface componentType>`.[一个 JSF 2.0 复合组件？](https://stackoverflow.com/questions/6358066/how-to-implement-a-dynamic-list-with-a-jsf-2-0-composite-component/)

## 仅`binding`在本地范围内使用

但是，有时您想从特定组件内部了解不同组件的状态，这比与动作/值相关验证相关的用例更常见。为此，`binding`可以使用属性，但*不能*与 bean 属性结合使用。`binding`您可以像这样在属性中指定本地 EL 范围唯一变量名称，`binding="#{foo}"`并且组件在同一视图中的其他位置呈现响应期间直接作为`UIComponent`可用的引用`#{foo}`。以下是在答案中使用此类解决方案的几个相关问题：

*   [仅当按下某个命令按钮时才根据需要验证输入](https://stackoverflow.com/questions/14729982)

*   [仅在未渲染另一个组件时如何渲染组件？](https://stackoverflow.com/questions/14715574)

*   [没有dataModel的JSF 2 dataTable行索引](https://stackoverflow.com/questions/14633008)

*   [Primefaces 依赖 selectOneMenu 和 required="true"](https://stackoverflow.com/questions/14537567)

*   [至少填写一个字段时，根据需要验证一组字段](https://stackoverflow.com/questions/14458829)

*   [验证失败时如何更改输入字段和标签的 css 类？](https://stackoverflow.com/questions/14452594)

*   [使用 Javascript 获取 JSF 定义的组件](https://stackoverflow.com/questions/14402601)

*   [使用 EL 表达式将组件 ID 传递给 JSF 中的复合组件](https://stackoverflow.com/questions/14271380)

    *（那只是上个月的……）*

### 也可以看看：

*   [如何在 JSF 中正确使用组件绑定？（会话范围 bean 中的请求范围组件）](https://stackoverflow.com/questions/18667927)
*   [查看范围：java.io.NotSerializableException: javax.faces.component.html.HtmlInputText](https://stackoverflow.com/questions/31485892)
*   [绑定属性导致在视图中发现重复的组件 ID](https://stackoverflow.com/questions/2101755)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T15:50:12.550

每个 JSF 组件都将自己呈现为 HTML，并且可以完全控制它生成的 HTML。JSF 可以使用许多技巧，具体使用哪些技巧取决于您使用的 JSF 实现。

*   确保每个 from 输入都有一个完全唯一的名称，这样当表单被提交回呈现它的组件树时，很容易判断每个组件可以从哪里读取其值表单。
*   JSF 组件可以生成 javascript 提交回服务器，生成的 javascript 也知道每个组件的绑定位置，因为它是由组件生成的。
*   对于 hlink 之类的内容，您可以在 url 中包含绑定信息作为查询参数或作为 url 本身的一部分或作为 matrx 参数。举些例子。

    `http:..../somelink?componentId=123`将允许 jsf 查看组件树以查看链接 123 已被单击。或者它可以`htp:..../jsf;LinkId=123`

回答这个问题的最简单方法是创建一个只有一个链接的 JSF 页面，然后检查它产生的 html 输出。这样，您将确切地知道使用您正在使用的 JSF 版本是如何发生这种情况的。

# c++ - IOCP - 发布重叠或读取数据包？

> ID：14911166
> 
> 赞同：1
> 
> 时间：2013-02-16T14:10:07.883
> 
> 标签：c++, sockets, networking, tcp, iocp

我应该读取前 9 个字节，其中应包括数据包的协议和传入大小。

当完成端口返回 9 个字节时，哪个更好？（性能/良好实践或美学明智）

1.  在套接字上发布另一个重叠读取，这次是数据包的大小，以便它在下一次完成时接收它？
2.  使用阻塞套接字在例程中读取整个数据包，然后发布另一个与recv重叠的9字节？
3.  读入块（决定大小）说 - 4096 并有一个计数器来继续读取每个重叠的完成，直到读取数据（比如说它将完成 12 次，直到读取所有数据包）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T14:41:50.200

答案取决于您使用的基础设施。一般来说，最好的事情是什么都不做。我知道这听起来很奇怪，所以让我解释一下。当操作系统与 NIC 通信时，它通常具有至少一对 RX/TX 环形缓冲区，并且在商品硬件的情况下，很可能通过 PCIe 总线与设备通信。在 PCIe 总线之上有一个 DMA 引擎，它使 NIC 可以在不使用 CPU 的情况下从主机内存读取和写入主机内存。换句话说，当 NIC 处于活动状态时，它将始终自行读取和写入数据包，而 CPU 干预最少。当然，有很多细节，但是您通常可以认为在驱动程序级别上正在发生的事情 - 读取和写入始终由 NIC 使用 DMA 执行，无论您的应用程序是否读取/写入任何内容或不。现在，在它之上有一个操作系统基础设施，允许用户空间应用程序向/从 NIC 发送和接收数据。当您打开一个套接字时，操作系统将确定您的应用程序对哪种数据感兴趣，并将一个条目添加到与网络接口通信的应用程序列表中。发生这种情况时，应用程序开始接收放置在内核中某种应用程序队列中的数据。不管你是否调用 read ，数据都放在那里。放置数据后，应用程序就会收到通知。内核中的通知机制各不相同，但它们都有一个相似的想法——让应用程序知道数据可以调用 操作系统将确定您的应用程序对哪种数据感兴趣，并将一个条目添加到与网络接口通信的应用程序列表中。发生这种情况时，应用程序开始接收放置在内核中某种应用程序队列中的数据。不管你是否调用 read ，数据都放在那里。放置数据后，应用程序就会收到通知。内核中的通知机制各不相同，但它们都有一个相似的想法——让应用程序知道数据可以调用 操作系统将确定您的应用程序对哪种数据感兴趣，并将一个条目添加到与网络接口通信的应用程序列表中。发生这种情况时，应用程序开始接收放置在内核中某种应用程序队列中的数据。不管你是否调用 read ，数据都放在那里。放置数据后，应用程序就会收到通知。内核中的通知机制各不相同，但它们都有一个相似的想法——让应用程序知道数据可以调用 无论您是否调用 read，数据都会放在那里。放置数据后，应用程序就会收到通知。内核中的通知机制各不相同，但它们都有一个相似的想法——让应用程序知道数据可以调用 无论您是否调用 read，数据都会放在那里。放置数据后，应用程序就会收到通知。内核中的通知机制各不相同，但它们都有一个相似的想法——让应用程序知道数据可以调用`read()`. 一旦数据在那个“队列”中，应用程序可以通过调用来获取它`read()`. 阻塞和非阻塞读取之间的区别很简单——如果读取是阻塞的，内核将简单地暂停应用程序的执行，直到数据到达。在非阻塞读取的情况下，无论有没有数据，控制权都会返回给应用程序。如果后者发生，应用程序可以继续尝试（也就是在套接字上旋转），或者等待来自内核的通知说数据可用，然后继续读取它。现在让我们回到“什么都不做”。这意味着套接字被注册为只接收一次通知。注册后，应用程序无需执行任何操作，只需收到“数据已存在”的通知即可。所以应用程序应该做的是监听该通知并在数据存在时执行只读。一旦收到足够的数据，应用程序就可以开始以某种方式处理它。了解了这一切，让我们看看这三种方法中哪一种更好……

> 在套接字上发布另一个重叠读取，这次是数据包的大小，以便它在下一次完成时接收它？

这是一个很好的方法。理想情况下，您不必“发布”任何内容，但这取决于操作系统界面的好坏。如果您不能“注册”您的应用程序一次，然后在每次有新数据可用时继续接收通知并在有新数据时调用 read()，那么发布异步读取请求是下一个最佳选择。

> 使用阻塞套接字在例程中读取整个数据包，然后发布另一个与recv重叠的9字节？

如果您的应用程序完全没有其他事情可做并且您只有一个套接字可供读取，那么这是一种很好的方法。换句话说——这是一种简单的方法，非常容易编程，操作系统自己负责完成，等等。请记住，一旦你有多个套接字可供读取，你将不得不做一个非常愚蠢的事情，例如每个套接字都有一个线程（可怕！），或者使用第一种方法重新编写您的应用程序。

> 读入块（决定大小）说 - 4096 并有一个计数器来继续读取每个重叠的完成，直到读取数据（比如说它会完成 12 次直到读取所有数据包）。

这是要走的路！事实上，这与方法#1 几乎相同，但有一个很好的优化，可以尽可能少地执行到内核的往返，并尽可能多地一次性读取。首先，我想用这些细节来纠正第一种方法，但后来我注意到你自己做了。

希望能帮助到你。祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-20T11:01:43.673

弗拉德的回答很有趣，但有点操作系统不可知论和理论。这里更侧重于 IOCP 的设计注意事项。

您似乎正在从 TCP 连接读取消息流，其中消息包含一个标头，该标头详细说明了完整消息的长度。标头的大小固定，为 9 个字节。

请记住，每个重叠的读取完成将返回 1 字节和缓冲区大小之间，您不应假设您可以发出 9 字节读取并始终获得完整的标头，并且您不应假设您随后可以发出读取具有足够大的缓冲区以容纳完整的消息，并在读取完成时完整接收该消息。您将需要处理返回的字节数少于预期的完成，处理此问题的最佳方法是将 WSABUF 指针调整到缓冲区的开头，以便随后的重叠读取将在该位置将更多数据读入缓冲区就在阅读完成时...

读取数据的最佳方式取决于以下几点：

*   它有多大（平均和最大可能的消息大小）
*   您可能要处理多少个连接
*   是否可以分段处理消息或仅作为完整消息处理。
*   对等方是否可以在没有您响应的情况下发送多条消息，或者它是否是“消息-响应”样式协议。

关于如何使用 IOCP 读取数据的大多数决定归结为数据复制将发生的位置以及您希望如何方便地处理正在处理的数据。假设您没有关闭套接字级别的读取缓冲，那么每当您读取数据时都可能存在数据副本。TCP 堆栈将在其每个套接字读取缓冲区中累积数据，并且您的重叠读取会将其复制到您自己的缓冲区中并将其返回给您。

最简单的情况是您是否可以在消息到达时对其进行分段处理。在这种情况下，只需为您的完整缓冲区大小发出重叠读取并处理完成（缓冲区将包含 1 个字节和数据的缓冲区大小之间），发出新的读取（可能进入同一缓冲区的末尾），直到您足够的数据来处理，然后处理数据，直到您需要阅读更多内容。这样做的好处是您发出最小数量的重叠读取（对于您的缓冲区大小），这减少了用户模式到内核模式的转换。

如果您必须将消息作为完整消息处理，那么您如何处理它们取决于它们可以有多大以及您的缓冲区有多大。您可以对标头发出读取（通过指定缓冲区长度仅为 9 个字节），然后发出更多重叠读取以将完整消息累积到一个或多个缓冲区中（通过调整缓冲区开始和长度）和在“每个连接”数据结构中将缓冲区链接在一起。或者，不要为标头发出“特殊”读取，并处理单次读取返回多条消息的可能性。

我有一些示例 IOCP 服务器可以完成大部分此类工作，您可以从[此处](http://www.serverframework.com/products---the-free-framework.html)下载它们并在随附的文章中阅读它们。

# sql - SQL Server 2008 中的拆分功能

> ID：14911167
> 
> 赞同：2
> 
> 时间：2013-02-16T14:10:12.717
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我有这样`Table1`的列：

```
+--+------+
|ID|Name  |
+--+------+
|1 |MSSQL |
+--+------+
|2 |MySQl |
+--+------+
|3 |Oracle|
+--+------+ 
```

在`Table2`中，我有一个类似的列

```
+------------+
|Databasename|
+------------+
|1,3         |
+------------+
|2           |
+------------+
|1,2         |
+------------+ 
```

我的输出应该是：

```
+------------+
|Databasename|
+------------+
|MSSQL,Oracle|
+------------+
|MySQL       |
+------------+
|MSSQL,MYSQL |
+------------+ 
```

我如何得到这个，我需要查询这个..

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-16T15:18:55.020

首先，您最好的解决方案是不要将数据存储在数据库中以逗号分隔的列表中。您应该考虑修复表结构。

如果您无法更改表结构，则需要将列表中的数据拆分为行以分配正确的名称。拆分数据后，您可以将数据连接回列表中。

您可以在网上找到许多不同的`split`功能，但这是我通常使用的一个版本：

```
CREATE FUNCTION [dbo].[Split](@String varchar(MAX), @Delimiter char(1))       
returns @temptable TABLE (items varchar(MAX))       
as       
begin      
    declare @idx int       
    declare @slice varchar(8000)       

    select @idx = 1       
        if len(@String)<1 or @String is null  return       

    while @idx!= 0       
    begin       
        set @idx = charindex(@Delimiter,@String)       
        if @idx!=0       
            set @slice = left(@String,@idx - 1)       
        else       
            set @slice = @String       

        if(len(@slice)>0)  
            insert into @temptable(Items) values(@slice)       

        set @String = right(@String,len(@String) - @idx)       
        if len(@String) = 0 break       
    end   
return 
end; 
```

为了得到你的结果，我将首先应用`split`函数和 a`row_number()`因为我没有看到与每一行关联的唯一键。如果您在每一行上都有一个唯一键，那么您将不需要`row_number()`：

```
;with cte as
(
  select rn, name, id
  from
  (
    select row_number() over(order by (select 1)) rn,
      databasename
    from table2
  ) t2
  cross apply dbo.split(t2.databasename, ',') i
  inner join table1 t1
    on i.items = t1.id
) 
select *
from cte 
```

此查询将您的逗号分隔列表分为以下内容：

```
| RN |   NAME | ID |
--------------------
|  1 |  MSSQL |  1 |
|  1 | Oracle |  3 |
|  2 |  MySQl |  2 |
|  3 |  MSSQL |  1 |
|  3 |  MySQl |  2 | 
```

一旦您拥有正确的多行数据`name`，您就可以使用`STUFF()`and`FOR XML PATH`将其连接到列表中。您的完整查询将与此类似：

```
;with cte as
(
  select rn, name, id
  from
  (
    select row_number() over(order by (select 1)) rn,
      databasename
    from table2
  ) t2
  cross apply dbo.split(t2.databasename, ',') i
  inner join table1 t1
    on i.items = t1.id
) 
select  
  STUFF(
         (SELECT ', ' + c2.name
          FROM cte c2
          where c1.rn = c2.rn
          order by c2.id
          FOR XML PATH (''))
          , 1, 1, '') Databasename
from cte c1
group by c1.rn
order by c1.rn; 
```

请参阅[SQL Fiddle with Demo](http://www.sqlfiddle.com/#!3/c0113/15)。

完整查询的结果是：

```
|   DATABASENAME |
------------------
|  MSSQL, Oracle |
|          MySQl |
|   MSSQL, MySQl | 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-17T07:16:31.917

您要求使用拆分功能，但您不必拆分您的值以获得您想要的结果。

此查询使用`for xml`连接值的技巧在相关子查询中构建逗号分隔的名称列表。它用于确定`like`从.`Table1``Table2`

```
select (
       select ', '+T1.Name
       from Table1 as T1
       where ','+T2.Databasename+',' like '%,'+cast(T1.ID as varchar(10))+',%'
       for xml path(''), type
       ).value('substring(text()[1], 3)', 'varchar(max)') as Databasenames
from Table2 as T2 
```

[SQL小提琴](http://sqlfiddle.com/#!3/5c6a1/1)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T14:27:48.323

没有拆分，也没有 XML 路径，但达到了正确的结果。

```
;with cte as (
    select *, cast(null as varchar(1024)) as str, cast(0 as int) as ID
    from Table2

    union all

    select DatabaseName, (case when DatabaseName like cast(t.ID as varchar(32)) + ',%' 
                                    or DatabaseName like '%,' + cast(t.ID as varchar(32)) + ',%'
                                    or DatabaseName like '%,' + cast(t.ID as varchar(32)) 
                                    or DatabaseName = cast(t.ID as varchar(32)) then cast(isnull(str, '') + ',' + t.Name as varchar(1024)) else str end), cte.ID + 1 as ID
    from cte
    inner join Table1 t on cte.ID + 1 = t.ID
)
select DatabaseName, (case when str like ',%' then substring(str, 2, len(str)) else null end) as str
from cte c
where ID = (select max(ID) from cte where DatabaseName = c.DatabaseName) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-13T14:30:53.877

```
--Here it goes:

----------------
-- FieldCount --
----------------
CREATE FUNCTION [dbo].[FieldCount](@S VARCHAR(8000), @Separator VARCHAR(10))
  RETURNS INT
AS

BEGIN

  /*
  @Author: Leonardo Augusto Rezende Santos
  @Contact: http://www.linkedin.com/pub/leonardo-santos/0/2b1/890
  */

  DECLARE @Ptr INT, @p INT, @LenS INT, @LenSep INT, @Result INT

  IF @Separator = ' ' 
    BEGIN
      SET @S = REPLACE(@S, ' ', '|-|')
      SET @Separator = '|-|'
    END

  WHILE CHARINDEX(@Separator + @Separator, @S) > 0
    SET @S = Replace(@S, @Separator + @Separator, @Separator + '_-_' + @Separator)
  IF @S <> ''
    SET @Result = 1
  ELSE
    BEGIN
      SET @Result = 0
      RETURN(@Result)
    END
  SET @Ptr = 0
  SET @LenS = LEN(@S)
  SET @LenSep = LEN(@Separator)
  SET @p = CHARINDEX(@Separator, @S)
  WHILE @p > 0
    BEGIN
      SET @Result = @Result + 1
      SET @Ptr = @Ptr + @p + @LenSep
      SET @p = CHARINDEX(@Separator, SUBSTRING(@S, @Ptr, @LenS - @Ptr + 1))
    END

  RETURN(@Result)

END

--------------
-- GetField --
--------------
CREATE FUNCTION [dbo].[GetField](@S VARCHAR(8000), @Separator VARCHAR(10), @Field INT)
  RETURNS VARCHAR(8000)
AS

BEGIN

  /*
  @Author: Leonardo Augusto Rezende Santos
  @Contact: http://www.linkedin.com/pub/leonardo-santos/0/2b1/890
  */

  DECLARE @Ptr INT, @p INT, @LenS INT, @LenSep INT, @Fld INT, @Result VARCHAR(8000)

  IF @Separator = ' ' 
    BEGIN
      SET @S = REPLACE(@S, ' ', '|-|')
      SET @Separator = '|-|'
    END

  IF @Field > dbo.FieldCount(@S, @Separator)
    BEGIN
      SET @Result = ''
      RETURN(@Result)
    END
  SET @Fld = 1
  SET @Ptr = 1
  SET @LenS = LEN(@S)
  SET @LenSep = LEN(@Separator)
  SET @p = CHARINDEX(@Separator, @S)
  WHILE (@p > 0) and (@Fld < @Field)
    BEGIN
      SET @Fld = @Fld + 1
      SET @Ptr = @Ptr + @p + @LenSep - 1
      SET @p = CHARINDEX(@Separator, SUBSTRING(@S, @Ptr, @LenS - @Ptr + 1))
    END
  IF (@p = 0) and (@Fld = @Field)
    SET @p = @LenS - @Ptr + 2
  SET @Result = SUBSTRING(@S, @Ptr, @p - 1)

  RETURN(@Result)

END

/* USAGE*/

select dbo.FieldCount('A1 A2 A3 A4 A5', ' ')

--It will return 5

select dbo.GetField('A1 A2 A3 A4 A5', ' ', 3)

--It will return 'A3'

select dbo.GetField('A1/A2/A3/A4/A5', '/', 3)

--It will return 'A3'

--Hope it works for you.

--Leonardo Augusto 
```

# android - 为 2D 垂直滚动射击游戏创建表面的最佳方法是什么？

> ID：14911169
> 
> 赞同：0
> 
> 时间：2013-02-16T14:10:21.280
> 
> 标签：android, android-canvas, surfaceview, game-engine

我为安卓开发了第一款游戏（2D 垂直滚动射击游戏）。我考虑如何制作游戏表面。有两种选择。

*   首先，飞机可以在单个窗口内飞行，动画将来自不断变化的背景。
*   其次，我大概可以做一个长画布。飞机将在整个游戏表面上飞行，动画将自然发生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T18:40:58.473

你可以看看[AndEngine](http://www.andengine.org/)。

它是适用于 Android 的免费开源 Java 引擎。

*   [演示应用程序](https://play.google.com/store/apps/details?id=org.anddev.andengine.examples)，检查*背景*>*使用 AutoParallaxBackground*。这些示例的源代码也是免费的。
*   [很好的教程](http://www.raywenderlich.com/12065/how-to-create-a-simple-android-game)，开始吧。
*   [GameEngine 源及其扩展](https://github.com/nicolasgramlich/AndEngine)。

# .net - 将项目添加到vb中的类型列表

> ID：14911170
> 
> 赞同：0
> 
> 时间：2013-02-16T14:10:54.887
> 
> 标签：.net, vb.net, list

如何将值添加到列表中的项目。列表类型是此类：-

```
<SoapType("TOBWeeksHeld", "urn:daeoverbrandIntf")> _
Public Class TOBWeeksHeld
    Public siteID As String
    Public checkIn As String
    Public resortName As String
    Public country As String
    Public region As String
    Public locality As String
    Public weekId As String
    Public bedrooms As String
    Public sleeps As String
    Public bookingType As String
    Public resortId As String
    Public timeToExpiry As String
    Public specialFlag As String
    Public extMemberNo As String
End Class 
```

我尝试的一切，例如：-

```
Dim newWeeksOnHold As New List(Of TOBWeeksHeld)
With newWeeksOnHold(0)
.siteID = siteID
.checkIn = weeksOnHold.daeWeeksHeld(i).checkIn()
.resortName = weeksOnHold.daeWeeksHeld(i).resortName()
.country = weeksOnHold.daeWeeksHeld(i).country()
.region = weeksOnHold.daeWeeksHeld(i).region()
.locality = weeksOnHold.daeWeeksHeld(i).locality()
.weekId = weeksOnHold.daeWeeksHeld(i).weekId()
.bedrooms = weeksOnHold.daeWeeksHeld(i).bedrooms()
.sleeps = weeksOnHold.daeWeeksHeld(i).sleeps()
.bookingType = weeksOnHold.daeWeeksHeld(i).bookingType()
.resortId = weeksOnHold.daeWeeksHeld(i).resortId()
.timeToExpiry = weeksOnHold.daeWeeksHeld(i).timeToExpiry()
.specialFlag = weeksOnHold.daeWeeksHeld(i).specialFlag()
.extMemberNo = weeksOnHold.daeWeeksHeld(i).extMemberNo()
End With 
```

在调试器中给我同样的错误，即索引超出“With newWeeksOnHold(0)”行的范围。我猜这是因为列表是空的，我告诉它去一个特定的索引。但是，我尝试过添加、插入和其他一些操作，但均无济于事。

这样做的目的是读入 Web 服务结果并将其作为不同的类输出。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T14:12:24.263

您没有在列表中插入任何内容，因此列表为空。

```
Dim newWeeksOnHold As New List(Of TOBWeeksHeld)
newWeeksOnHold.Add(New TOBWeeksHeld) ' <-- insert a new item
With newWeeksOnHold(0)
'...
End With 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T17:36:13.547

在设置元素之前，您需要在列表中添加一个条目。newWeeksOnHold 仍为空

# wordpress - WordPress，复制插件还是更好的建议？

> ID：14911172
> 
> 赞同：1
> 
> 时间：2013-02-16T14:11:03.343
> 
> 标签：wordpress, plugins, portfolio

我需要帮助来解决一个大问题。我在网站上使用了这个不错的插件：[http ://wordpress.org/extend/plugins/awesome-filterable-portfolio/](http://wordpress.org/extend/plugins/awesome-filterable-portfolio/)

该插件运行良好，但问题是：我只能将 1 个投资组合添加到我的网站；相反，我需要在两个不同的页面中有两个不同的投资组合。我试图复制插件，更改函数名称，但它可能与收集数据的数据库有问题。该插件似乎并不难满足我的需求，但我对 php 和 javascript 不太擅长。

任何建议和帮助将不胜感激......非常感谢。

布鲁诺

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T14:15:35.110

检查一下，也许它符合您的需求：[http ://wordpress.org/extend/plugins/wp-portfolio/](http://wordpress.org/extend/plugins/wp-portfolio/)

# java - 更改设置时，Google Maps Android API v2 不显示地图

> ID：14911173
> 
> 赞同：1
> 
> 时间：2013-02-16T14:11:10.947
> 
> 标签：java, android, google-maps, google-maps-android-api-2

**更改设置时，** Google Maps Android API v2 不显示地图。

**例如：**当用户选择我的位置按钮时，地图**会动画到用户的当前位置，但不会渲染地图。**

```
public class MapView extends android.support.v4.app.FragmentActivity {

    private GoogleMap mMap;
    private UiSettings mUiSettings;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.map_view);

        setUpMapIfNeeded();
    }

    private void setUpMapIfNeeded() {
        // Do a null check to confirm that we have not already instantiated the map.
        if (mMap == null) {
            // Try to obtain the map from the SupportMapFragment.
            mMap = ((SupportMapFragment) getSupportFragmentManager().findFragmentById(R.id.googleMap))
                    .getMap();
            // Check if we were successful in obtaining the map.
            if (mMap != null) {
                setUpMap();
            }
        }
    }

    private void setUpMap() {

        mMap.setMyLocationEnabled(true);

        mUiSettings = mMap.getUiSettings();

        mUiSettings.setZoomControlsEnabled(true);
        mUiSettings.setMyLocationButtonEnabled(true);
        mUiSettings.setCompassEnabled(true);
    } 
```

}

** **布局/地图视图** **

```
<fragment xmlns:android="http://schemas.android.com/apk/res/android"
          android:id="@+id/googleMap"
          android:layout_width="match_parent"
          android:layout_height="match_parent"
          class="com.google.android.gms.maps.SupportMapFragment"/> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T09:15:37.597

您错过了 OnCreate() 下的重要代码，如下所示。在下面添加代码；

```
@Override
protected void onResume() {
    super.onResume();
    setUpMapIfNeeded();
} 
```

你的代码必须是这样的；

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.map_view);

    setUpMapIfNeeded();
}

@Override
protected void onResume() {
    super.onResume();
    setUpMapIfNeeded();
}

private void setUpMapIfNeeded() {
    // Do a null check to confirm that we have not already instantiated the map.
    if (mMap == null) {
        // Try to obtain the map from the SupportMapFragment.
        mMap = ((SupportMapFragment) getSupportFragmentManager().findFragmentById(R.id.googleMap))
                .getMap();
        // Check if we were successful in obtaining the map.
        if (mMap != null) {
            setUpMap();
        }
    }
}

private void setUpMap() {... 
```

祝你好运...

# autohotkey - 在 Windows 7 中检测显示器？

> ID：14911174
> 
> 赞同：3
> 
> 时间：2013-02-16T14:11:14.730
> 
> 标签：autohotkey

是否可以让 Windows 7 使用自动热键检测显示器？

我的意思是，好像您通过控制面板，显示，检测监视器。

如果我的电脑闲置了一段时间，它就会丢失我的高清电视。如果我在楼上，我只需通过控制面板并重新检测。这解决了问题，但是，我想使用自动热键，这样我就可以在客厅使用遥控器重新检测。

提前感谢您的帮助。

乔恩

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T17:12:20.487

很可能，你需要这样的东西......

```
Run, "C:\Windows\System32\rundll32.exe" shell32`.dll`,Control_RunDLL desk`.cpl
Sleep, 400
Send, !c ; Send Alt+c for deteCt
Sleep, 1000
Send, {Enter} ; Send Enter to close
Return 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T16:01:41.487

这是来自[SysGet](http://www.autohotkey.com/docs/commands/SysGet.htm)文档的修改示例。

```
SysGet, MouseButtonCount, 43
SysGet, VirtualScreenWidth, 78
SysGet, VirtualScreenHeight, 79

SysGet, MonitorCount, MonitorCount
SysGet, MonitorPrimary, MonitorPrimary
Message .= "Monitor Count:`t" MonitorCount "`nPrimary Monitor:`t" MonitorPrimary
Loop, %MonitorCount%
{
    SysGet, MonitorName, MonitorName, %A_Index%
    SysGet, Monitor, Monitor, %A_Index%
    SysGet, MonitorWorkArea, MonitorWorkArea, %A_Index%
    Message .= "`n`nMonitor:`t#" A_Index "`nName:`t" MonitorName "`nLeft:`t" MonitorLeft "(" MonitorWorkAreaLeft " work)`nTop:`t" MonitorTop " (" MonitorWorkAreaTop " work)`nRight:`t" MonitorRight " (" MonitorWorkAreaRight " work)`nBottom:`t" MonitorBottom "(" MonitorWorkAreaBottom " work)"
}

msgbox % Message 
```

样本输出：

![在此处输入图像描述](../Images/6a37f70d46f63dd2912720db0dcf32f5.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-06-19T16:18:33.693

罗伯特，谢谢你的回答（我还不能直接评论你的帖子）。我已经对代码进行了一些清理，并使其可以与其他语言一起使用：

```
HOTKEY::
   Run, "C:\Windows\System32\rundll32.exe" shell32`.dll`,Control_RunDLL desk`.cpl
   WinWaitActive, ahk_class CabinetWClass 
   SendInput, +{Tab 2}{Space}{Enter} ;Select & press "Detect" button, then press "OK" button
Return 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-16T14:14:56.900

您可以通过高级显示属性或驱动程序管理实用程序禁用图形卡的自动检测功能。通常越来越多的显卡会发送信号来测试显示器是否盖好，这样他们就可以“拔掉”它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-16T14:34:49.833

使用 autohotkey您可以使用[SysGet](http://www.autohotkey.com/docs/commands/SysGet.htm)。

```
SysGet, monitorCount, MonitorCount 
```

还有许多其他参数可以使用。检查上面的链接。

# c# - Outlook 2007 的共享加载项捕获 ReplyToAll 事件

> ID：14911177
> 
> 赞同：0
> 
> 时间：2013-02-16T14:11:39.297
> 
> 标签：c#, .net, outlook, add-in, outlook-addin

我正在使用 VS 2010 和 Dot Net Framework 2.0。我在 Extensibility->Shared Add-ins for Outlook 中创建了一个项目。我正在尝试捕获没有被解雇的 ReplyToAll 事件。请看下面的代码：

**OnConnection 方法**

```
inspectors = applicationObject.Inspectors;                        
inspectors.NewInspector += new Outlook.InspectorsEvents_NewInspectorEventHandler(inspectors_NewInspector);

void inspectors_NewInspector(Microsoft.Office.Interop.Outlook.Inspector Inspector)
    {
        mailItem = null;
        try
        {
            Outlook.NameSpace ns = Inspector.Session;
            Outlook.MAPIFolder inbox = ns.GetDefaultFolder(
              Outlook.OlDefaultFolders.olFolderInbox);

            foreach (object o in inbox.Items)
            {
                mailItem = o as Outlook.MailItem;
                if (mailItem != null)
                {
                    break;
                }
            }
            if (mailItem == null)
            {
                MessageBox.Show("Couldn't find a mail item.");
            }
            else
            {
                ((Outlook.ItemEvents_10_Event)mailItem).ReplyAll += new
                    Outlook.ItemEvents_10_ReplyAllEventHandler(Connect_ReplyAll);
            }                              
        }
        catch (Exception ex)
        {
            MessageBox.Show("asdgh"+ex.StackTrace);
        }        
    }

void Connect_ReplyAll(object Response, ref bool Cancel)
    {
        MessageBox.Show(Response+"Hello You have Clikced ReplyTOAll");
    } 
```

但是 Connect_ReplyAll 方法被调用了有什么问题吗？

正在运行但事件已注册的新代码

```
public void OnConnection(object application, Extensibility.ext_ConnectMode connectMode, object addInInst, ref System.Array custom)
    {
        try
        {
             applicationObject = (Outlook.Application)application;
            if (connectMode != Extensibility.ext_ConnectMode.ext_cm_Startup)
            {
                OnStartupComplete(ref custom);
            }
            addInInstance = addInInst;
            inspectors = applicationObject.Inspectors;
            explorer = applicationObject.Explorers.Application.ActiveExplorer();

            explorer.SelectionChange += new Outlook.ExplorerEvents_10_SelectionChangeEventHandler(explorer_SelectionChange);                                                
            inspectors.NewInspector += new 
                Outlook.InspectorsEvents_NewInspectorEventHandler(inspectors_NewInspector);               
        }
        catch(Exception ex)
        {
            MessageBox.Show(""+ex.StackTrace);
        }
        //((Microsoft.Office.Interop.Outlook.ItemEvents_10_Event)mailItem).Reply += new Microsoft.Office.Interop.Outlook.ItemEvents_10_ReplyEventHandler(ReplyToAllEvent);
    }

void explorer_SelectionChange()
    {
        try
        {
            Outlook.MailItem mailExplorer=null;
            mailTO = "";
            mailCC = "";
            mailBCC = "";
            foreach (object selectedItem in explorer.Selection)
            {
                mailExplorer = selectedItem as Outlook.MailItem;
                //MessageBox.Show("" + mailItem.EntryID.ToString());
                break;
            }               
            if (mailExplorer != null)
            {
                if (selectedItems.Contains(mailExplorer.EntryID.ToString()))
                {
                    selectedItems.Remove(mailExplorer.EntryID);
                    ((Outlook.ItemEvents_10_Event)mailExplorer).ReplyAll -= new Outlook.ItemEvents_10_ReplyAllEventHandler(Connect_ReplyAll);
                    ((Outlook.ItemEvents_10_Event)mailExplorer).Reply -= new Outlook.ItemEvents_10_ReplyEventHandler(Connect_Reply);                        
                }                    
                ((Outlook.ItemEvents_10_Event)mailExplorer).ReplyAll +=
                    new Outlook.ItemEvents_10_ReplyAllEventHandler(Connect_ReplyAll);
                ((Outlook.ItemEvents_10_Event)mailExplorer).Reply +=
                    new Outlook.ItemEvents_10_ReplyEventHandler(Connect_Reply);
                selectedItems.Add(mailExplorer.EntryID);
                mailTO = mailExplorer.To;
                mailCC = mailExplorer.CC;
                mailBCC = mailExplorer.BCC;
            }
        }
        catch(Exception ex)
        {                
            MessageBox.Show(""+ex.StackTrace);
        }                                 
    } 
```

“一旦我使用 ReplyAll 事件注册了邮件项，如果选择了相同的邮件项，则该事件会触发多次。” 使用上面的代码解决了这个问题，但是当我分离事件时出现新错误请帮助我

我收到此错误

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T19:15:56.530

您希望引发事件的 COM 对象需要处于活动状态。上面的代码循环遍历收件箱中的所有项目（哎哟！为什么？）并在每次迭代中使用相同的变量，从而消除先前的值。
要回复一条消息，首先需要选择它，因此您只需要遍历选定的项目（Explorer.Selection 集合）。通过挂钩 Explorer.SelectionChanged 事件来跟踪选择，在该事件处理程序中，循环浏览 Explorer.Selection 集合中的所有项目并将它们放入您自己的`List<MailItem>`列表中。这样，对象将一直存在，直到您将它们从列表中删除。
比这更好，而不是使用`List<MailItem>`列表，创建您自己的包装器，将 MailItem 存储为私有成员，并在该包装器中连接 ReplyAll 事件。这样，当事件触发时，您将知道哪个 MailItem 对象引发了事件。然后可以将每个选定 MailItem 的包装器存储在一个`List<MyMailItemWrapper>`集合中。

# sql - 用户登录失败

> ID：14911179
> 
> 赞同：1
> 
> 时间：2013-02-16T14:11:42.883
> 
> 标签：sql, visual-studio-2010, connection-string

我下载了 SQL Server 2012 并创建了一个名为“Test”的本地数据库。然后我尝试通过我在 VS 中的 c# 代码访问它，如下所示：

```
 class sqlTOdataTable
{
    DataTable IndexWordsTable;
    SqlDataAdapter sqlAdapter;
    private string connectionString = @"Server=localhost\SQLExpress;Database=Test"; 

    public sqlTOdataTable(string TableName)
    {
        using (SqlConnection connection = new SqlConnection(connectionString))
        {
            connection.Open();
            Console.WriteLine("Enter command");
            SqlCommand cmd = new SqlCommand(Console.ReadLine(),connection);
            SqlDataReader Reader = cmd.ExecuteReader();

        }
    }

} 
```

每当它到达“connection.Open();” 出现“用户登录失败”错误。连接字符串有问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-16T14:15:07.990

如果您尝试使用已登录的帐户访问，请尝试添加：

```
Trusted_Connection=True; 
```

如果不是，您需要指定在 SSMS 中创建的用户名和密码：

```
User Id=myUsername;Password=myPassword; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-16T14:15:10.253

添加

```
Trusted_Connection=True; 
```

所以你的连接字符串将是

```
private string connectionString = @"Server=localhost\SQLExpress;Database=Test;Trusted_Connection=True;"; 
```

请参阅[www.connectionstrings.com](http://www.connectionstrings.com/sql-server-2012#sqlconnection)

这假定您已安装 SqlServer Express 以将 Windows 模式用作[身份验证模式。](http://msdn.microsoft.com/en-us/library/ms143705%28v=SQL.90%29.aspx)通过这种方式，您的 SqlExpress 接受您的 Windows 用户凭据。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-16T14:23:11.270

试试这个方法

```
string connectionString = @"Data Source=.\SQLExpress;Initial Catalog=test;Integrated Security=True"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-16T14:15:31.923

如果在您的服务器实例中允许混合模式身份验证，您必须在连接字符串中提供 SQL Server 登录名/密码。如果只`Windows Mode`允许，您必须使用 Windows 凭据登录。

# performance - 如何提高 LWJGL 的性能？

> ID：14911189
> 
> 赞同：1
> 
> 时间：2013-02-16T14:12:26.910
> 
> 标签：performance, opengl, lwjgl

我是 LWJGL 的新手。当我尝试制作一个由 100*100 立方体组成的关卡（我使用 QUADS 来创建它）时，我的笔记本电脑上的速度约为 8 fps。当我删除立方体的 5 个面并只渲染顶部时，我得到 10fps。怎么会这样？当我删除立方体的 5 个面时，我期望获得 5 或 6 倍的性能。我得出的结论是，顶点的数量不会像对象的数量那样影响性能。我还创建了 BLOCK 类的新实例来为立方体的所有 6 个面存储一些随机颜色。有人可以帮我吗？如何大幅度提高性能？（只是一般性地询问。不是一步一步）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T14:31:02.577

嗯，一般来说，为了提高性能，不要使用 glBegin/glEnd。（我猜这就是您正在使用的，如果不是，请忽略此答案）。这就是所谓的即时模式，比创建顶点/索引缓冲区然后从这些缓冲区渲染要慢得多。如果您的几何图形是静态的，那么在足够现代的 GPU 上以 60 fps 渲染 10000 个立方体应该没有问题。[这里](http://www.lwjgl.org/wiki/index.php?title=The_Quad_with_DrawArrays)有关于 lwjgl 站点的教程，还有关于 opengl wiki[的](http://www.opengl.org/wiki/Vertex_Specification#Vertex_Array_Object)更多信息。

# java - 如何使用 Java 运行操作系统命令

> ID：14911197
> 
> 赞同：2
> 
> 时间：2013-02-16T14:13:48.443
> 
> 标签：java, windows, command, cmd

我正在制作一个程序，它*必须*用`clafer -m=xml Case5.cfr`.

所以我用

```
ProcessBuilder pb = new ProcessBuilder("clafer -m=xml " + "Case5.cfr");
pb.directory(new File("C:\\Users\\unituser\\workspace\\com.unitbilisim.clafer2Ecore\\src\\model\\"));
Process P = pb.start(); 
```

但总是出现以下错误：

```
Exception in thread "main" java.io.IOException: Cannot run program "clafer -m=xml Case5.cfr" (in directory "C:\Users\unituser\workspace\com.unitbilisim.clafer2Ecore\src\model"): CreateProcess error=2, The system cannot find the file specified
    at java.lang.ProcessBuilder.start(Unknown Source)
    at EmfCompare.emfCompareDeneme.main(emfCompareDeneme.java:54)
Caused by: java.io.IOException: CreateProcess error=2, The system cannot find the file specified
    at java.lang.ProcessImpl.create(Native Method)
    at java.lang.ProcessImpl.<init>(Unknown Source)
    at java.lang.ProcessImpl.start(Unknown Source)
    ... 2 more 
```

我不明白为什么。谁能帮我？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T15:19:50.977

尝试作为

```
Process p = Runtime.getRuntime().exec("clafer -m=xml Case5.cfr", null, new File("C:\\Users\\unituser\\workspace\\com.unitbilisim.clafer2Ecore\\src\\model\\")); 
```

或者

```
Process p = new ProcessBuilder("clafer", "-m=xml", "Case5.cfr")
   .directory(new File("C:\\Users\\unituser\\workspace\\com.unitbilisim.clafer2Ecore\\src\\model\\"))
   .start(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T14:22:27.373

你可以使用这个：

```
final Runtime rt = Runtime.getRuntime();
rt.exec("OS command"); 
```

**编辑** 你也可以使用`ProcessBuilder`

检查[此链接](http://blog.art-of-coding.eu/executing-operating-system-commands-from-java/)以获取两者的示例

# php - file_put_content() 方法错误

> ID：14911207
> 
> 赞同：-1
> 
> 时间：2013-02-16T14:15:25.417
> 
> 标签：php, mysql

我将一些内容放入名为“index.php”的文件中，代码如下：

```
$put=<<<DEMO
<div id='container' style='width:100%'>
<style>
h1 {font-size:45px;}
</style>
<div id='header' style='background-color:#FFFFFF;'>
<h1 style='margin-bottom:0;margin-top:0;height:20%;float:center;'>
while($row = mysql_fetch_array($result))
{ 
```

第 108 行

```
<table align='left'><tr><td><img src="$row['Website_Name']/index.jpg" align='center' width='240' height='170'></td></tr></table>
 <table align='center'><br><tr><td><h1>$row['Business_Name']</td></tr></table>
 }

</h1></div>
</div>

DEMO;
file_put_contents("$str/index.php","$put"); 
```

但是在浏览器中运行代码时，出现错误：

```
Parse error: syntax error, unexpected T_ENCAPSED_AND_WHITESPACE, expecting T_STRING or T_VARIABLE or T_NUM_STRING in E:\Program Files\xampp\htdocs\registration.php on line 108 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T14:21:11.450

你的问题是你的变量插值语法。要么是

```
"$var[foo]" 
```

或者

```
"{$var['foo']}" 
```

不是

```
"$var['foo']" 
```

阅读： http: [//php.net/manual/en/language.types.string.php#language.types.string.parsing](http://php.net/manual/en/language.types.string.php#language.types.string.parsing)。

# grails - 我如何知道 Grails 应用程序已满载？

> ID：14911213
> 
> 赞同：2
> 
> 时间：2013-02-16T14:15:59.040
> 
> 标签：grails

我想在我的 Grails 2.2 应用程序代码中设置这样一个监听器......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T16:15:40.653

我尝试了开发和产品中的`init()`方法。`BootStrap`看起来它在服务器准备好服务请求之前就被调用了。

# sql - 如何编写此 SQL Server 查询？

> ID：14911214
> 
> 赞同：0
> 
> 时间：2013-02-16T14:16:05.950
> 
> 标签：sql, sql-server, vba, dataset

我研究了一些 SQL，但我忘记了一切，现在我正在尝试做这个数据库模式：

![在此处输入图像描述](../Images/fc16708f7a6b9abdb504360fddb53e44.png)

我想减去 (all `INGRESADO`- all `CANTIDAD`) 并返回一个唯一值，如下所示：

```
SELECT SUM(ingresado) - SUM(cantidad) FROM Nomina, Gasto; 
```

但我认为，它并没有返回我想要的真正价值......

谢谢！

编辑：

```
DECLARE @nomina FLOAT;
DECLARE @gasto FLOAT;
SELECT @nomina = SUM(ingresado) FROM Nomina;
SELECT @gasto = SUM(cantidad) FROM Gasto;
SELECT @nomina - @gasto; 
```

这将返回我想要的值，但我希望它在一个唯一的查询中，谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T14:19:19.817

试试这个：

```
SELECT(SELECT SUM(ingresado) FROM Nomina - SELECT SUM(cantidad) FROM Gasto) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-16T14:22:57.763

```
SELECT ( SELECT SUM(ingresado) FROM Nomina ) - ( SELECT SUM(cantidad) FROM Gasto ) as Delta 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-16T14:19:55.590

```
Select (SELECT SUM(ingresado) from Nomina) - (select SUM(cantidad)) FROM Gasto); 
```

检查这个：[如何使用 SQL 求和和减法？](https://stackoverflow.com/questions/6715095/how-to-sum-and-subtract-using-sql)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-16T14:22:52.060

如果您没有关联 2 个表，而您只想减去 2 个总和，那么这应该有效：

```
SELECT (SELECT SUM(ingresado) 
   FROM Nomina) - 
   (SELECT SUM(cantidad)
   FROM Gasto) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-16T14:23:48.630

我认为你想做两个单独的查询，然后在你的代码中做减法。像：

```
SELECT SUM(ingresado) FROM Nomina;
SELECT SUM(cantidad) FROM Gasto; 
```

然后你在你的代码中做减法。

我敢肯定，通过使用一些嵌套查询，也可以直接在 SQL 内部进行减法运算，但这只是麻烦而没有优势。

# c# - DataGridViewCell 获取选中单元格旁边的单元格值

> ID：14911215
> 
> 赞同：0
> 
> 时间：2013-02-16T14:16:22.903
> 
> 标签：c#, datagridview

我有一个包含两列（`id`和`Description`）的 DataGridView 表。当用户选择描述列中的单元格时，我希望能够获取`id`左侧单元格旁边的值。

这是我到目前为止所拥有的：

```
 dataGridView1.CellClick += (s, e) =>
        {
            int id;
            DataGridViewCell cell = dataGridView1.SelectedCells[0];

            //Instead of this, what do I put to get the ID column?
            if (cell.ColumnIndex == 0)
                id = Convert.ToInt32(cell.Value);
            else 
                return;

            string[] data = UnitData[id];

            txtNum.Text = id.ToString();
            txtName.Text = data[0];
            txtDesc.Text = data[1];
        }; 
```

我希望能够检查选择的列是否是描述，如果是，则获取它旁边的单元格。

我将如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T14:51:54.643

```
if (IsDescriptionColumnIndex)            
{ 
  //Next
  dataGridView1.CurrentCell = dataGridView1[1, e.rowIndex];
} 
```

# c - C中的按位逻辑

> ID：14911216
> 
> 赞同：2
> 
> 时间：2013-02-16T14:16:23.430
> 
> 标签：c, binary, operator-keyword, bit

我对按位运算有些熟悉，但这个函数只是让我头疼。

```
void binary_print(unsigned int value) {
  unsigned int mask = 0xff000000;   // Start with a mask for the highest byte.
  unsigned int shift = 256*256*256; // Start with a shift for the highest byte.
  unsigned int byte, byte_iterator, bit_iterator;

  for (byte_iterator=0; byte_iterator < 4; byte_iterator++) {
    byte = (value & mask) / shift; // Isolate each byte.
    printf(" ");

    for (bit_iterator=0; bit_iterator < 8; bit_iterator++) {
      // Print the byte's bits.
      if (byte & 0x80) // If the highest bit in the byte isn't 0,
        printf("1");   // print a 1.
      else
        printf("0");   // Otherwise, print a 0.

      byte *= 2;       // Move all the bits to the left by 1.
    }
    mask /= 256;       // Move the bits in mask right by 8.
    shift /= 256;      // Move the bits in shift right by 8.
  }
} 
```

此函数接收函数的位标志，`open()`并在添加适当标签的 display_flags 函数的帮助下生成以下输出：

```
O_RDONLY : 0 : 00000000 00000000 00000000 00000000
O_WRONLY : 1 : 00000000 00000000 00000000 00000001
O_RDWR : 2 : 00000000 00000000 00000000 00000010
O_APPEND : 1024 : 00000000 00000000 00000100 00000000
O_TRUNC : 512 : 00000000 00000000 00000010 00000000
O_CREAT : 64 : 00000000 00000000 00000000 01000000
O_WRONLY|O_APPEND|O_CREAT : 1089 : 00000000 00000000 00000100 01000001 
```

我理解输出没有问题，但我不理解实际过程：

1.  如何`byte = (value & mask) / shift`隔离各个位？
2.  为什么`if(byte & 0x80)`意味着“如果字节中的最高位不是 0？”
3.  这些行如何：`byte *= 2;`和`mask /= 256;`移动`shift /= 256;`位以及为什么此操作很重要？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-16T14:26:55.657

**1\. 如何`byte = (value & mask) / shift`隔离各个位？**

`mask`是一种位模式，始终将 8 个连续位设置为 1，其余位设置为 0（它以 开头`0xff000000`，然后`0x00ff0000`，依此类推。因此，当您对 and 进行按位与时`mask`，`value`所有位`value`都将设置为 0，除了那些对应于由 . 指定的字节`mask`。那些保留它们的值。

`shift`被设置为相应的值，通过与`shift`那些在掩码中幸存下来的位进行除法，最终将出现在最右边的位中（参见问题 3 的答案如何工作）。

所以假设`value`是`0xDEADBEEF`，`mask`有它的初值`0xff000000`，也`shift`有它的初值`256*256*256`。然后`value & mask`是`0xDE000000`，最后的结果是`0x000000DE`。

在二进制中，示例是

```
value       = 11011110101011011011111011101111
mask        = 11111111000000000000000000000000
byte & mask = 11011110000000000000000000000000
result      = 00000000000000000000000001101111 
```

**2\. 为什么`if(byte & 0x80)`意思是“如果字节中的最高位不是0？”**

这里代码作者认为`byte`是一个 8 位变量。虽然它在技术上更大，但这里从未使用过更高的位。因此，当作者提到“最高位”时，请考虑右边的第 8 位（如果`byte`实际上只有一个字节大小，那么最高位）。

现在注意它`0x80`是`10000000`二进制的。因此，当您使用 时，除“最高”（右起第 8 个）之外的`byte & 0x80`所有位`byte`都将设置为 0。`byte & 0x80`如果来自的最高位为零，则为零，如果来自的“最高”位为 1 `byte`，则大于零。`byte`

**`byte *= 2;`3\. 这些行： ,`mask /= 256;`和移动位是如何进行`shift /= 256;`的，为什么这个操作很重要？**

乘以 2 相当于将位向左移动 1。例如考虑`1001`二进制的值 9。乘以 2 得到 18，它是`10010`二进制的。

与除以 2 类似，这是右移 1。除以 256 相当于 8 除以 2，因此除以 256 相当于右移 8 位。例如，这里使用这些操作将值`mask`从更改`0xff000000`为`0x00ff0000`、`0x0000ff00`，最后更改为`0x000000ff`。

**全功能说明**

有了这些知识，我们就可以看到完整的函数做了什么。在外部循环中，它遍历 in 中的 4 个字节`value`，从最左边的字节开始，到最右边的字节结束。它通过屏蔽当前字节并将其存储在`byte`.

然后内部循环遍历存储在`byte`. 它总是从右边开始查看第 8 位并相应地打印 1 或 0。然后将位向左移动，以便在第二次迭代中，从右数第 7 位现在是从右数第 8 位并将被打印，然后是下一位，依此类推，直到所有 8 位都以右到-左订单。

编写此函数的另一种方法是

```
for (int i = 31; i >= 0; i--) {
  if (value & (1 << i))
    printf("1");
  else
    printf("0");

  if (i % 8 == 0)
    printf(" ");
} 
```

这将简单地`value`按从左到右的顺序遍历所有位。表达式从 中`value (1 << i)`选择所需的位`value`，从右起第 32 位开始（当`i`为 31），并以右起第 1 位结束（当`i`为 0 时）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T14:33:10.360

要记住的最重要的事情是`bitwise`逻辑依赖于对`bits`. 因此，出于所有意图和目的，按位`& (and)`是模 1 的乘法，而按位是模 1`| (or)`的加法。查看这一点的最简单方法是通过示例：

如果您有一些字节`0xF0`并且您想查看是否设置了最高位，您将`and`使用`0x80`. 这是发生的事情：

```
 11110000 = 0xF0
x 10000000 = 0x80
==========
  10000000 = 0x80 
```

因此，如果实际未设置 in 的最高位`0xF0`，则结果将是`0`and 而不是`0x80`. 您可以通过制作二进制数来处理任何位位置或位位置序列。例如，`0x88 = 10001000`这将检查字节中的最高位以及第 4 位。

二进制的重要一点是要注意每个位置都是乘以 2。所以`00000001 = 1`但是然后`00000010 = 2`等等`00000100 = 4`。因此，乘以`2`就像左移 ( `<<`) 乘以 1。除以 256 是右移 ( `>>`) 乘以 8。这很容易通过思考 2 的幂来看出。`2^8 = 256`. 因此，由于每一位都是其中的一个`2`，因此除法`256`相当于右移 8（所需的指数/二进制数）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-16T14:33:51.990

1) value & mask 导致除您感兴趣的字节之外的所有字节都被清零。除以 shift 将其移动到字节 0 中（我个人会使用 >> 运算符）。

2) byte & 0x80 删除除最高位之外的所有位。0x80 是二进制的 10000000，1 位集合匹配一个字节中的最高位。结果现在的值为 0 或 10000000（十六进制 0x80）。只有设置了最高位，IF 才会为真。

3) byte *= 2 是左移 1 位。我会使用 byte <<= 1\. 似乎更明显。

mask /= 256 是右移 8 位。我会使用掩码 >>= 8。同上

如果您使用 2 的幂，则除法和倍数可以用作移位运算符。对我来说，使用移位运算符似乎更明显。

顺序很重要，以正确顺序获取值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-16T14:24:06.197

您可以通过乘以或除以 2 的幂来移动任何二进制值，这就是二进制数学的工作原理。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-16T14:26:51.443

好吧，听起来您的困难在于了解按位运算与算术的关系。

*   首先，乘以 2 与将二进制左移 1 步相同。
*   其次，如果你多次这样做，你就会向左移动几个步骤。
*   第三，如果你除以 2，你就向右移动了一步。

所有这些操作的更好表示法是使用“真正的”移位运算符：

```
(value & mask) / (256*256*256) 
```

最好写成

```
(value & mask) >> (3*8) 
```

这有帮助吗？

我曾经喜欢考虑使用“DIV”和“MOD”将一个数字分成两部分 - 其中`N DIV 256`是丢弃余数的整数除法 - 所以这有效地向右移动了 8 位，丢弃了最低字节。相反的是`N MOD 256`，*它只*取余数。这实际上`AND`是 255，并且只留下最低字节。根据 a`DIV`和`MOD`结果，您可以重建原始数字：

```
LO = X & 255;   // equivalent to (byte)X if X is unsigned
HI = X >> 8 ;   // equivalent to (X / 256) in this case
original = LO | (HI << 8) 
 // equivalent to LO + (HI * 256), in this case 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-16T14:29:11.847

`mask`关闭除第一个字节中的那些以外的所有打开的位，例如

```
 0110 0000 0000 0000 0000 0000 0000 0110 0000
& 1111 1111 0000 0000 0000 0000 0000 0000 0000   
= 0110 0000 0000 0000 0000 0000 0000 0000 0000 
```

因为`1 & 0 or 0 & 1 or 0 & 0 == 0 and 1 & 1 == 0`

除以 2 将所有位右移，乘以 2 将所有位左移。

`0x80 == 1000 0000`因此`&`，使用此值会关闭除第一位之外的所有内容。

如果设置了第一位，则结果值 > 0，因此对应于布尔真值，如果不是，则为零并对应于假。

# ubuntu - Ubuntu bashrc 文件如何找到使用的文件？

> ID：14911220
> 
> 赞同：9
> 
> 时间：2013-02-16T14:17:16.933
> 
> 标签：ubuntu, ubuntu-10.04

如何`.bashrc`在 shell 启动时找到加载了哪个文件？有什么命令可以告诉我吗？

目前我认为它`/root/.bashrc`是一个 Ubuntu 服务器 10.04 LTS。

它是基于用户的还是？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-16T14:28:56.000

您寻求的命令是`man bash`，它告诉您：

```
 When  bash is invoked as an interactive login shell, or as a non-inter-
   active shell with the --login option, it first reads and executes  com-
   mands  from  the file /etc/profile, if that file exists.  After reading
   that file, it looks for ~/.bash_profile, ~/.bash_login, and ~/.profile,
   in  that order, and reads and executes commands from the first one that
   exists and is readable.  The --noprofile option may be  used  when  the
   shell is started to inhibit this behavior. 
```

和

```
 When an interactive shell that is not a login shell  is  started,  bash
   reads  and executes commands from ~/.bashrc, if that file exists.  This
   may be inhibited by using the --norc option.  The --rcfile file  option
   will  force  bash  to  read  and  execute commands from file instead of
   ~/.bashrc. 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-16T14:25:35.420

从[这里](http://www.gnu.org/software/bash/manual/html_node/Bash-Startup-Files.html)开始，除非您以 root 身份登录，否则您似乎`~/.bashrc`正在运行，就像`/root/`root 的家一样。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-16T14:26:48.760

只需使用回声。将表达式放入 bashrc

```
echo "I am in $PWD/$0" or "I am in bashrc file". 
```

这样，您将在登录时看到一条打印消息，该消息将确认您该进程使用特定的脚本文件。注意 - 例如从 bashrc 或 bash_profile 启动程序是不明智的，因为如果程序由于某种原因无法启动或启动有困难，您将不会进入 shell。

# c# - 在一台 Visual Studio 开发服务器中运行多个 Web 应用程序？

> ID：14911222
> 
> 赞同：2
> 
> 时间：2013-02-16T14:17:24.500
> 
> 标签：c#, asp.net-mvc, visual-studio-2010

我有 2 个 ASP.Net MVC Web 应用程序，ParentSite 和 ChidSite。ParentSite 有一个页面，该页面将打开一个弹出窗口，该窗口将导航到子站点，当子页面完成时，它会通知父页面。但是我收到了一个跨域错误

```
Parent is = http://localhost:49000/Home
Child is = http://localhost:50000/Home 
```

在 Visual Studio 中有没有一种方法可以在 Visual Studio 开发服务器的一个端口下运行这两个 Web 应用程序（不在本地 IIS 服务器上）。

如果我们在项目中使用相同的端口，Visual Studio 会自动选择一个动态端口，如果它已经运行了 DEV 服务器。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T18:01:16.333

不，您不能在同一个端口/应用程序空间下托管两个应用程序。想想 web.config、路由（如评论中提到的）、安全性等。这些都是该空间的一部分。

您**可以**尝试解决跨域错误，但这并不简单，也不是跨浏览器友好的（目前）。我希望情况会有所改变。

你有几个选择：

*   使用 WebAPI 在 ChildSite 上公开您需要的位，并从控制器的 ParentSite 使用它。您可以通过简单的 HTTP 获取来执行此操作，并将 JSON 返回到弹出窗口（现在将存在于 ParentSite 上）。客户端不再访问第 3 方站点。
*   使用区域或可移动区域将子项目合并到 ParentSite

要添加区域，只需在解决方案资源管理器中右键单击您的 MVC 项目，然后选择添加 -> 区域。

干杯。

# c# - sql查询按日期搜索数据库

> ID：14911223
> 
> 赞同：2
> 
> 时间：2013-02-16T14:17:33.657
> 
> 标签：c#, sql, datetime

有人可以建议我使用 sql 查询来搜索具有特定日期的 ms 数据库。

例如，我想搜索 2013 年 2 月 13 日的所有交易。在我的数据库中，我有一列称为“购买日期”，它存储了购买日期。

在数据库中，日期以这种格式存储 16/02/2013 02:47:36 AM。

我想汤姆在文本框中输入我想要的日期，然后将该值传递给查询。

```
 public DataSet OrderByDate(DateTime date)
        {
            //  string connString = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=C:\\Users\\Amrit\\Desktop\\Database.accdb ;Persist Security Info=False;";
            DataSet dataSet = new DataSet();
            OleDbConnection oleConn = new OleDbConnection(connString);

            try
            {
                oleConn.Open();
                string sql = "SELECT  Customer.[Title] + SPACE(2)  + Customer.[Customer's Name] as CustomerName, Customer.[Customer's Ebayname], Customer.[Email Address], Customer.[Phone Number], Customer.[Address 1] + SPACE(2)  +Customer.[Address 2] + SPACE(2)  + Customer.[City] + SPACE(2)  + Customer.[Post Code]+  SPACE(2)  + Customer.[Country] as Address, Customer.[Item Purchased], Customer.[Purchased Date], Customer.[Total Price] FROM Customer WHERE [Purchased Date]='" + date;
                OleDbDataAdapter dataAdapter = new OleDbDataAdapter(sql, oleConn);
                dataAdapter.Fill(dataSet, "Customer");
            }
            catch (Exception ex)
            {
                Console.WriteLine(ex.ToString());
            }
            finally
            {
                oleConn.Close();
            }
            if (dataSet.Tables.Count <= 0)
                return null;
            else
                return dataSet;
        } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-16T15:11:55.890

1.  始终尝试为您的查询使用原始/正确的数据类型。在这种情况下 - 日期时间。
2.  永远不要将参数连接到 SQL 中——尤其是字符串，尤其是当字符串是用户输入时。

以下应该工作：

```
 public DataSet OrderByDate(DateTime date)
    {
        string connString = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=C:\\Users\\Amrit\\Desktop\\Database.accdb ;Persist Security Info=False;";
        var dataSet = new DataSet();

        using(var oleConn = new OleDbConnection(connString))
        {
            try
            {
                oleConn.Open();
                var cmd = oleConn.CreateCommand();
                cmd.CommandText = "SELECT * FROM Customer WHERE [Purchased Date] BETWEEN :dateStart AND :dateEnd";
                cmd.Parameters.AddRange(new[]
                    {
                        new OleDbParameter("dateStart", date.Date),
                        new OleDbParameter("dateEnd", date.Date.AddDays(1).AddTicks(-1))
                    }
                    );

                var dataAdapter = new OleDbDataAdapter(cmd);
                dataAdapter.Fill(dataSet, "Customer");
            }
            catch (Exception ex)
            {
                Console.WriteLine(ex.ToString());
            }
        }
        return dataSet.Tables.Count <= 0 ? null : dataSet;
    } 
```

为了清楚起见，我删除了那长长的列列表。据我了解，Oracle 期望参数名称前带有冒号（:) 的参数，而不是 SQL Server 的“@”。如果上述方法不起作用，请尝试使用 @ 或者只是使用 ? 而不是参数名称并提供没有名称的参数。

即使抛出异常，“使用”部分也应该很好地处理关闭连接，并且看起来比代码中的 finally 部分更整洁。

关于这部分：

```
 new OleDbParameter("dateStart", date.Date),
                    new OleDbParameter("dateEnd", date.Date.AddDays(1).AddTicks(-1)) 
```

date.Date 仅返回日期部分（时间为 00:00:00）并且 date.Date.AddDays(1) 是下一个日期（时间也是 00:00:00）例如 2012-02-16 00:00 :00 和 2012-02-17 00:00:00 - 正好是 24 小时 - 一天。如果你愿意，你可以减去一个刻度，但想法还是一样的。这样，我们将选择日期在该范围内的所有记录（因此使用 BETWEEN）。您可以尝试使用 Oracle 日期时间函数来实现相同的目标，但我相信这更短/更清晰。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T14:23:22.963

您可以使用 it[**`LIKE`**](http://msdn.microsoft.com/tr-tr/library/ms179859.aspx)运算符进行查询；

```
string sql = "SELECT  Customer.[Title] + SPACE(2)  + Customer.[Customer's Name] as CustomerName, Customer.[Customer's Ebayname], Customer.[Email Address], Customer.[Phone Number], Customer.[Address 1] + SPACE(2)  +Customer.[Address 2] + SPACE(2)  + Customer.[City] + SPACE(2)  + Customer.[Post Code]+  SPACE(2)  + Customer.[Country] as Address, Customer.[Item Purchased], Customer.[Purchased Date], Customer.[Total Price] FROM Customer WHERE [Purchased Date] LIKE '" + "'" + date "%'"; 
```

结果是所有字符串都包含`13/02/2013`日期；

*   2013 年 13 月 2 日凌晨 2 点 47 分 36 秒。
*   13/02/2013 上午 14:24:02

ETC..

并始终**[`parameterized sql`](http://www.codinghorror.com/blog/2005/04/give-me-parameterized-sql-or-give-me-death.html)**在您的查询中使用。这种代码始终对[**`SQL Injection`**](http://en.wikipedia.org/wiki/SQL_injection). 喜欢;

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-16T14:41:35.127

当您想从 where 子句中消除时间组件时，请执行以下操作：

```
where YourDateField >= @StartDate
and YourDateField < @TheDayAfterTheEndDate 
```

使用问题中的数据，@StartDate 将是 2013-02-13，@TheDayAfterTheEndDate 将是 2013-02-14。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-16T14:45:42.817

理想情况下，为了避免任何类型的“时间”问题，我总是使用`Date`日期时间属性，无论是在我插入/更新数据库时还是在我读出它时。事实上，我编写了一些包装代码来自动在时间不重要的列上执行此操作。

这确保了在数据库中，`00:00:00`插入和更新时始终是时间。

所以查询（避免任何其他 SQL 注入/参数化查询问题）

```
"SELECT * FROM _table WHERE _date = '" + date.Date + "'"; 
```

一切都是平等的，并且知道所有插入也都使用了`.Date`，我们就可以不用担心时间了。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-16T14:46:00.390

不要使用 like，您可以为此使用普通的 WHERE 子句：

```
 DateTime start = DateTime.Now.Date; //this will get you 2/16/2013 12:00:00am
        DateTime end = start.AddDays(1); //this will get you 2/17/2013 12:00:00am

        //make sure to parameterize your query like this
        string sql = "SELECT * FROM Product WHERE PurchasedDate >= @start AND PurchasedDAte < @end";
        System.Data.SqlClient.SqlConnection conn = new System.Data.SqlClient.SqlConnection();
        using (conn)
        {
            System.Data.SqlClient.SqlCommand command = new System.Data.SqlClient.SqlCommand(sql, conn);
            System.Data.SqlClient.SqlParameter pmStart = new System.Data.SqlClient.SqlParameter("start", start);
            System.Data.SqlClient.SqlParameter pmEnd = new System.Data.SqlClient.SqlParameter("end", end);
            command.Parameters.Add(pmStart);
            command.Parameters.Add(pmEnd);
        } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-16T15:52:24.500

根据 MSDN 库，您可以使用*[DateTime.ToString Method (String)](http://msdn.microsoft.com/en-us/library/zdtaw1bw.aspx)*将 datetime 对象转换为以明确方式格式化的字符串：

```
string datestring = date.ToString("yyyyMMdd"); 
string sql = 
  " SELECT ... "
+ " FROM Customer "
+ " WHERE [Purchased Date] >= '" + datestring + "'" 
  + " AND [Purchased Date] < DATEADD(day, 1, '" + datestring + "')" ; 
```

而且我很确定有更好的方法将参数传递给查询字符串，而不是像这样使用引号。例如，请参阅此问题：**[How to proper sanitize (or parametrize) SQL Compressed Insert Statement](https://stackoverflow.com/questions/4864227/how-to-properly-sanitize-or-parameterize-sql-compressed-insert-statement)**

# android - Android:: 满屏时如何打开滑动抽屉？

> ID：14911224
> 
> 赞同：0
> 
> 时间：2013-02-16T14:17:37.983
> 
> 标签：android, slidingdrawer, sliding, drawer

我有一个全屏，所以我想在底部添加一个滑动抽屉，以便能够拉出一些我需要的按钮。问题是抽屉只会向上滑动一点，因为屏幕太满了。我希望 SD 打开大约一半（我将使用偏移量）但覆盖下面的内容。有什么线索吗？

这是我的 XML：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="#00000000"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/txtRecipeViewRecipeName"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:background="#FF005555"
        android:text="@string/recipeName"
        android:textAppearance="?android:attr/textAppearanceLarge" />

            <ScrollView
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_weight="1" >

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:orientation="vertical" >

    <TableLayout
        android:layout_width="match_parent"
        android:layout_height="124dp"
        android:background="#FF005500" >

    <TableRow
        android:layout_width="match_parent"
        android:layout_height="wrap_content">

        <ImageView
            android:id="@+id/recipeViewImage"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:layout_gravity="fill"
            android:layout_weight="10"
            android:contentDescription="@string/banner_alt"
            android:scaleType="centerCrop"
            android:src="@drawable/ic_launcher" />

        <TableLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_weight="0" >

            <RatingBar
                android:id="@+id/recipeViewRatingBar"
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:fitsSystemWindows="false"
                android:maxHeight="10dp"
                android:maxWidth="10dp"
                android:numStars="4" />

            <TableRow
                android:layout_width="fill_parent"
                android:layout_height="33dp"
                android:layout_weight="1" >

                <TextView
                    android:layout_width="wrap_content"
                    android:layout_height="match_parent"
                    android:text="@string/recipePostedBy" />

                <TextView
                    android:id="@+id/txtRecipeViewAuthor"
                    android:layout_width="wrap_content"
                    android:layout_height="match_parent"
                    android:layout_marginLeft="10dp"
                    android:text="@string/recipeAuthor"
                    android:textStyle="bold" />
            </TableRow>

                            <TableRow
                                android:layout_width="match_parent"
                                android:layout_height="20dp"
                                android:layout_weight="1" >

                             <TextView
                                 android:id="@+id/txtRecipeViewNumReviews"
                                 android:layout_width="fill_parent"
                                 android:layout_height="fill_parent"
                                 android:layout_gravity="right|center_vertical"
                                 android:layout_weight="0"
                                 android:paddingTop="12dp"
                                 android:text="@string/recipeReviewCount"
                                 android:textStyle="bold" />

                              <Button
                                  android:id="@+id/btnRecipeViewReviews"
                                  android:layout_width="wrap_content"
                                  android:layout_height="match_parent"
                                  android:layout_marginLeft="10dp"
                                  android:layout_weight="0"
                                  android:text="@string/recipeReviews" />

                            </TableRow>

        </TableLayout>

    </TableRow>

</TableLayout>

<TableLayout
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

            <TableRow
                android:layout_width="wrap_content"
                android:layout_height="match_parent" >

        <TextView
            android:id="@+id/txtRecipeViewPreptime"
            android:layout_width="wrap_content"
            android:layout_height="fill_parent"
            android:layout_gravity="center"
            android:layout_weight="1"
            android:paddingBottom="15dp"
            android:paddingLeft="15dp"
            android:paddingRight="15dp"
            android:paddingTop="15dp"
            android:text="Prep time: "
            android:textAppearance="?android:attr/textAppearanceMedium" />

        <TextView
            android:id="@+id/txtRecipeViewCooktime"
            android:layout_width="wrap_content"
            android:layout_height="fill_parent"
            android:layout_gravity="center"
            android:layout_weight="1"
            android:paddingBottom="15dp"
            android:paddingLeft="15dp"
            android:paddingTop="15dp"
            android:text="Cook time: "
            android:textAppearance="?android:attr/textAppearanceMedium" />

            </TableRow>

</TableLayout>

            <TextView
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:text="@string/ingredientList"
                android:textAppearance="?android:attr/textAppearanceMedium" />

        <TextView
            android:id="@+id/txtRecipeViewIngredientList"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_gravity="center_horizontal"
            android:layout_weight="1"
            android:background="#07000000"
            android:ems="10"
            android:padding="20dp"
            android:textColor="#EEEEEEAA" />

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/cookingDirections"
            android:textAppearance="?android:attr/textAppearanceMedium" />

        <TextView
            android:id="@+id/txtRecipeViewDirections"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_gravity="center_horizontal"
            android:layout_weight="1"
            android:background="#07000000"
            android:ems="10"
            android:padding="20dp"
            android:textColor="#EEEEEEAA" />

    </LinearLayout>
    </ScrollView>

<SlidingDrawer
    android:id="@+id/recipeViewSlidingDrawer"
    android:layout_width="wrap_content"
    android:layout_height="26dp"
    android:layout_gravity="bottom"
    android:minHeight="50dp"
    android:content="@+id/content"
    android:handle="@+id/handle" >

    <Button
        android:id="@+id/handle"
        android:layout_width="304dp"
        android:layout_height="22dp"
        android:text="@string/recipeHandle" />

    <LinearLayout
        android:id="@+id/content"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:orientation="vertical" >

        <Button
        android:layout_width="304dp"
        android:layout_height="35dp"
        android:text="@string/recipeHandle" />

        <Button
        android:layout_width="304dp"
        android:layout_height="35dp"
        android:text="@string/recipeHandle" />

        <Button
        android:layout_width="304dp"
        android:layout_height="35dp"
        android:text="@string/recipeHandle" />

    </LinearLayout>
</SlidingDrawer> 
```

无法发布它的样子（声誉不够）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T14:26:41.940

添加一个 RelativeLayout 作为新的 Root GroupView，然后在启动滑动抽屉之前关闭现有的主 LinearLayout。之后，为滑动抽屉设置 alingparent bottom true。

# c++ - 在 QT Creator 中封装 UI 或传递指向 UI 的指针更好吗？

> ID：14911227
> 
> 赞同：0
> 
> 时间：2013-02-16T14:17:51.877
> 
> 标签：c++, qt, user-interface

我正在做一个项目，我必须对像 ZORK 这样的基于文本的游戏进行 GUI 化。该项目的目标是学习C++和事件驱动编程，游戏好坏并不重要。我们已经得到了游戏代码的骨架。

所以我有一个 UI 类 GameWindow 和一个包含游戏逻辑的类。我希望游戏逻辑类从类中向 UI 写入一些文本。让 UI 公开并传递 UI 对象以直接访问屏幕上的标签是一种好的设计（这不会破坏封装吗？）：

```
ui->welcomeText->setText("Welcome to the land of the text adventure!"); 
```

或者，为私有 UI 对象提供大量 getter 和 setter 是否更好，您可以在其中获取 gamewindow 类的对象，然后说：

```
gamewindow.setWelcomeText("Welcome to the land of the text adventure!"); 
```

我对 C++ 和设计阶段真的很陌生，我不想早早搞砸并为自己创造更多的工作。对此的一些指导将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T17:14:05.763

分离 UI 和 Worker 是一种很好的做法。您可以使用多种方法。

您可以在游戏和 ui 之间使用信号槽通信。见[boost::signals](http://www.boost.org/doc/libs/1_52_0/doc/html/signals.html)。如果你使用 Qt 那么你也可以使用他们的信号槽机制。

您可以使用回调。

您可以使用类似 Java 的侦听器和事件。

```
class GameEvent{}
class GameListener{
    void event( GameEvent const& );
};
class Game{
    void addListenter( GameListener* );
    void removeListenter( GameListener* );
}; 
```

您可以将接口传递给游戏引擎。

```
class Game {
   void setUI( GameUI & );
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T14:19:50.750

将 ui 从工作人员中分离到不同的线程中总是好的。在 qt 中很容易，因为您可以使用插槽/信号概念。

# forms - 对 maltparser 的英语应用预训练模型时出错

> ID：14911231
> 
> 赞同：0
> 
> 时间：2013-02-16T14:18:27.657
> 
> 标签：forms, parsing, nlp, text-parsing

我正在着手**maltparser**。我想申请所提供的

**预训练模型** [“engmalt.linear-1.7”](http://www.maltparser.org/mco/english_parser/engmalt.html)进行解析

****命令行上的****英文**句子。**

 **我下载了**engmalt**并将其文件名从

'engmalt.linear-1.7\. **zip** '到'engmalt.linear-1.7。**行动管制令**'。我

保存**示例英文句子**（在 engmalt 的下载页面上）

在“infile.conll”中并在命令行上运行。

我无法得到结果，并且出现了一个奇怪的**错误**：

> 标签“FORM”没有可用的标签符号。

（顺便说一下，如果我测试 '/maltparser-

maltparser 的 1.7.1/examples/data/talbanken05_test.conll'

包，它可以惊人地获得依赖！)

*   Q1：我应该更改“engmalt.linear”的文件扩展名吗？

*   Q2：为什么我可以使用 engmalt 来解析 'talbanken05_test.conll'（不是

英文句子）？

*   Q3：为什么解析英文句子时会出错？是什么意思？

它的意思是？

非常感谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-11-07T01:34:59.673

这是一个老问题，我不确定 OP 是否仍然需要答案。您应该与预训练模型一起使用的正确格式是此 xml 中定义的十列格式：

```
<?xml version="1.0" encoding="UTF-8"?>
<dataformat name="conllx">
    <column name="ID" category="INPUT" type="INTEGER"/>
    <column name="FORM" category="INPUT" type="STRING"/>
    <column name="LEMMA" category="INPUT" type="STRING"/>
    <column name="CPOSTAG" category="INPUT" type="STRING"/>
    <column name="POSTAG" category="INPUT" type="STRING"/>
    <column name="FEATS" category="INPUT" type="STRING"/>
    <column name="HEAD" category="HEAD" type="INTEGER"/>
    <column name="DEPREL" category="DEPENDENCY_EDGE_LABEL" type="STRING"/>
    <column name="PHEAD" category="IGNORE" type="INTEGER" default="_"/>
    <column name="PDEPREL" category="IGNORE" type="STRING" default="_"/>

</dataformat> 
```**

# ios - 我的 ios 应用程序中使用的图像

> ID：14911232
> 
> 赞同：0
> 
> 时间：2013-02-16T14:18:43.363
> 
> 标签：ios, image

我是否需要为我的 ios 应用程序中使用的所有图像制作一个 2xpng，或者只为我的图标和启动图像制作一个 2xpng。我已将所有图像放在我的支持文件夹中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T18:05:01.107

`@2x`当您的应用在 Retina 设备上使用时，您应该为不希望出现像素化的任何图像创建图像。如果图像看起来相同，那么您不需要`@2x`该图像的版本。很少有图标，也没有图像以这种方式工作。

基本上，您需要应用程序中每个图像的两种尺寸，否则它们看起来不正确。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T14:21:17.160

不，不需要将所有图像创建为 2xpng，当您使用视网膜显示设备时使用 2xpng，但图标启动图像和背景将是 2xpng 格式。

# jquery - jquery过滤 - 根据它的数据ID返回div

> ID：14911235
> 
> 赞同：0
> 
> 时间：2013-02-16T14:19:07.873
> 
> 标签：jquery, jquery-ui, jquery-plugins, jquery-selectors, jquery-filter

如果父 div 的**data-id**不等于**0**，我正在尝试使用**class='selectthis'**选择每个 div并返回它们的兄弟 div *（也使它们不可拖动）*。

 ******这是小提琴：http:** [//jsfiddle.net/umvQJ/1/](http://jsfiddle.net/umvQJ/1/)

这是我的代码：

```
<div class="selectthis" data-id="0">
     <div class='draggable'>don't return this</div>
</div>

<div class="selectthis" data-id="1">
     <div class='draggable'>return this</div>
</div>

<div class="selectthis" data-id="2">
     <div class='draggable'>return this</div>
</div> 
```

```
$(document).ready(function() {
    $('.draggable').draggable();

    $(".selectthis").filter(function () { 
        return $(this[data-id!=="0"]).siblings(div); 
    }).draggable({revert: 'invalid'});
}); 
```

我在哪里做错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T14:27:13.003

我想这就是你需要的。

```
$(document).ready(function () {
    $(".selectthis").not('[data-id="0"]').find('.draggable').draggable();
}); 
```

[http://jsfiddle.net/umvQJ/2/](http://jsfiddle.net/umvQJ/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T14:30:40.307

试试这个：

```
$(document).ready(function () {
    $(".selectthis").filter(function () {
        return $(this).data('id') == 0
    }).siblings('div').draggable({
        revert: 'invalid'
    });
}); 
```

演示：http: [//jsfiddle.net/umvQJ/3/](http://jsfiddle.net/umvQJ/3/)****

# python - python函数中while循环的问题

> ID：14911238
> 
> 赞同：0
> 
> 时间：2013-02-16T14:19:45.287
> 
> 标签：python

我有一个要求看电影的小应用程序。当评分超过 50 时，返回观看。如果没有，请选择另一部电影。虽然当我到达movieDec中的条件时，它不会回到函数的顶部来计算电影的分数。想不通这个

```
def getScore():
   choose = raw_input("pick a movie ")
   rt = RT()
   info = rt.search(choose)
   rating1 = info[0].get('ratings').get('critics_score')
   rating2 = info[0].get('ratings').get('audience_score')
   stars = (rating1 + rating2) / 2
   return rating1, rating2, stars

def movieDec():
   critic, aud, stars = getScore()
   print 'Critics gave it a %s' %critic
   print 'Audiences gave it a %s' %aud
   print 'The average rating is %s' %stars
   while stars < 50:
       print "That's no good, pick again"
       getScore()
    print 'Good choice.' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T14:22:26.840

您没有更新`stars`循环中的变量。尝试：

```
while stars < 50:
   print "That's no good, pick again"
   critic, aud, stars = getScore() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T14:21:49.017

在您的循环中，您忽略了的返回值`getScore()`：

```
 getScore() 
```

将其更改为：

```
 critic, aud, stars = getScore() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T14:31:51.890

[上面](https://stackoverflow.com/questions/14911238/trouble-with-while-loop-in-python-function/14911270#14911270)这个更正的代码将第二次调用 getScore() 函数（如果星数 <50），但在循环如下所示之前它不会显示分数：

```
while stars < 50:
   print "That's no good, pick again"
   critic, aud, stars = getScore()
   print 'Critics gave it a %s' %critic
   print 'Audiences gave it a %s' %aud
   print 'The average rating is %s' %stars 
```

# javascript - 带有获取元素 id 的问题（未捕获的 TypeError：无法设置属性 'innerHTML' of null ）

> ID：14911240
> 
> 赞同：0
> 
> 时间：2013-02-16T14:19:47.647
> 
> 标签：javascript, ajax

我想从 div 中获取一些值并将其发送到数据库，我编写了它并且它在我的本地主机上工作但是当我在我的主机上上传源代码时它停止工作......

我在控制台中遇到这个错误

```
Uncaught TypeError: Cannot set property 'innerHTML' of null index.php:700
request.onreadystatechange 
```

ajax 在 div 所在的同一页面上

```
 <script type="text/javascript">
// create the XMLHttpRequest object, according browser
function get_XmlHttp() {
  // create the variable that will contain the instance of the XMLHttpRequest object (initially with null value)
  var xmlHttp = null;

  if(window.XMLHttpRequest) {       // for Forefox, IE7+, Opera, Safari, ...
    xmlHttp = new XMLHttpRequest();
  }
  else if(window.ActiveXObject) {   // for Internet Explorer 5 or 6
    xmlHttp = new ActiveXObject("Microsoft.XMLHTTP");
  }

  return xmlHttp;
}

// sends data to a php file, via POST, and displays the received answer
function ajaxrequest(php_file, tagID) {
  var request =  get_XmlHttp();     // call the function for the XMLHttpRequest instance

  // create pairs index=value with data that must be sent to server
  var  the_data = 'pg='+document.getElementById('template').innerHTML;
  var  the_data2 = 'memid='+document.getElementById('memid').innerHTML;
  var  the_data3 = 'proid='+document.getElementById('proid').innerHTML;
  var  the_data4 = 'taipei='+document.getElementById('taipei').innerHTML;

  request.open("POST", php_file, true);         // set the request

  // adds  a header to tell the PHP script to recognize the data as is sent via POST
  request.setRequestHeader("Content-type", "application/x-www-form-urlencoded");

  var post_data = the_data + '&' + the_data2 + '&' + the_data3 + '&' + the_data4;

  request.send(post_data);      // calls the send() method with datas as parameter
  // Check request status
  // If the response is received completely, will be transferred to the HTML tag with tagID
  request.onreadystatechange = function() {
    if (request.readyState == 4) {
      document.getElementById(tagID).innerHTML = request.responseText;
    }
  }
}
</script> 
```

div

```
<div id="template"> some html here </div>
<div id="memid" style="display:none;">4</div>
<div id="proid" style="display:none;">55</div>
<div id="taipei" style="display:none;">sav</div> 
```

按钮

```
<button value="sasasasasa" onclick="ajaxrequest('temp1.php', 'context')"></button> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T14:21:40.873

假设第 700 行是

```
document.getElementById(tagID).innerHTML = request.responseText; 
```

...那么您显然没有带有`id`in的元素`tagID`，根据您显示的示例按钮，它将是`"context"`. 事实上，您还没有展示任何定义带有`id` `"context"`.

# ios - NSMutableArray 附加 NSMutableArray

> ID：14911242
> 
> 赞同：3
> 
> 时间：2013-02-16T14:19:50.607
> 
> 标签：ios, objective-c, cocoa-touch

我正在尝试设置我的 allArticlesArray 的内容，然后在数组中附加其他对象。这是我的代码中的一个片段：

```
[self.allArticlesArray setArray:newsArray];
[self.allArticlesArray addObjectsFromArray:sportsArray]; 
```

newsArray 和sportsArray 不为空（它们各有五个项目），但是，在此代码运行后，allArticlesArray 为空。我正在使用 ARC。我究竟做错了什么？谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-16T14:21:35.177

我假设您忘记初始化 allArticleArray

```
self.allArticlesArray = [NSMutableArray array];

[self.allArticlesArray setArray:newsArray];
[self.allArticlesArray addObjectsFromArray:sportsArray]; 
```

或者有点简洁：

```
self.allArticlesArray  = [newsArray mutableCopy];
[self.allArticlesArray addObjectsFromArray:sportsArray]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T14:23:06.663

用这个

```
self.allArticlesArray=[NSMutableArray arrayWithArray:setArray];
[self.allArticlesArray addObjectsFromArray:sportsArray]; 
```

# image-processing - 517 jpg 到独特的 pdf

> ID：14911244
> 
> 赞同：0
> 
> 时间：2013-02-16T14:19:57.490
> 
> 标签：image-processing, imagemagick

我有几个 jpg(517)，我想转换为唯一的 PDF 文件。我尝试使用“convert *.jpg newfile.pdf”但系统被杀死。我认为没有足够的内存。这可能与某些算法有关吗？谢谢和对不起我的英语

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T17:38:50.680

命令“convert *.jpg newfile.pdf”将使所有图像在新文件缓冲区上相互覆盖；这可能会导致内存分配错误。

### 一个包含所有图像的独特 PDF

如果您尝试创建包含所有 jpg 照片的单个 PDF 文件，请使用 Imagemagick 的`montage`命令

```
montage *.jpg -tile 2x -geometry +2+2 newfile.pdf 
```

where`geometry`设置每个图像的间距，并`tile`设置布局。[ImageMagick 蒙太奇用法](http://www.imagemagick.org/Usage/montage/)中的示例。

### 每个图像一个唯一的 PDF

如果您尝试为每个图像创建一个 pdf，`%d`请使用目标文件名中的符号。这将创建 517 个包含单个图像的 PDF 文件。

```
convert *.jpg newfile_%d.pdf 
```

# sql - TOP 记录和 sub top 记录 sql

> ID：14911245
> 
> 赞同：-1
> 
> 时间：2013-02-16T14:20:13.133
> 
> 标签：sql, oracle

我需要一个可以提取前 100 条记录的查询，其中 50 条必须来自名为“Name”的列，该列的值为“house”，而同一列中的另外 50 条记录的值为“plane”。

下面是它的示例表：

```
ID  Item_Code   Name    Source
1   987         House   PG
2   988         House   TES
3   989         Plane   ASD
4   990         House   WAL
5   991         Plane   PG
6   992         Plane   TES 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-16T20:37:23.233

您已标记 Oracle，但接受了使用专有 TSQL 语法的答案，该语法在 Oracle 中不起作用。假设您使用 Oracle 作为标记，那么您可以使用

```
SELECT "ID",
       "Item_Code",
       "Name",
       "Source"
FROM   (SELECT YourTable.*,
               ROW_NUMBER() OVER (PARTITION BY "Name" ORDER BY "Item_Code") rn
        FROM   YourTable
        WHERE  "Name" IN ( 'House', 'Plane' ))
WHERE  rn <= 50; 
```

[SQL小提琴](http://www.sqlfiddle.com/#!4/a9bb3/1)

* * *

## 回答 #2

> 赞同：-7
> 
> 时间：2013-02-16T14:34:27.653

你可以使用这个：

```
SELECT TOP 50 *
FROM sample_table
WHERE Name = 'House'
UNION ALL
SELECT TOP 50 *
FROM sample_table
WHERE Name = 'Plane' 
```

# jquery - 使用 rails link_to 禁用 Ajax 调用

> ID：14911246
> 
> 赞同：3
> 
> 时间：2013-02-16T14:20:14.467
> 
> 标签：jquery, ruby-on-rails, jquery-mobile

我无法为`link_to`.

我有一个重定向链接

```
 <%= link_to 'test',  my_post_path, :method => :post, "data-role" => "button", "rel" => "external", "data-ajax"=>"false", "data-inline" => "true", "data-icon" => "plus",  "data-iconpos" => "left" %> 
```

这是在以下 html 中翻译的

```
<a href="/my_post" data-ajax="false" data-icon="plus" data-iconpos="left" data-inline="true" data-method="post" data-role="button" rel="external nofollow">test</a> 
```

my_post 只是一个重定向到

```
 def my_post
      redirect_to another_method_path(....)
    end 
```

我认为该设置`data-ajax=false`足以禁用此链接的 Ajax，但事实并非如此。`another_method_path`首先被调用，给我留下`my_post_path`.

如果我完全禁用 Ajax

```
 $.mobile.ajaxEnabled = false; 
```

它按预期工作。

我在本地化中做错了`link_to`吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T18:43:42.320

我认为`rel: :external`链接上的设置应该已经可以解决问题了。

请参阅此处的“无 Ajax 链接”部分：http: [//jquerymobile.com/demos/1.1.1/docs/pages/page-links.html](http://jquerymobile.com/demos/1.1.1/docs/pages/page-links.html)

我想问题出`:method => :post`在您的链接中，因为这仅适用于表单或 ajax。

# java - 向已发布的 API 添加警告如何破坏现有客户端

> ID：14911251
> 
> 赞同：2
> 
> 时间：2013-02-16T14:21:02.727
> 
> 标签：java, api, warnings

我正在阅读 Effective Java 书，并在**第 7 项：避免终结器**部分中找到以下内容：

> 被引用为显式终止方法模式示例的四个类（FileInputStream、FileOutputStream、Timer 和 Connection）具有终结器，可在未调用其终止方法时充当安全网。不幸的是，这些终结器不会记录警告。**API 发布后通常无法添加此类警告，因为它似乎会破坏现有客户端。**

我的问题是如何？我能想象这应该发生的唯一方法是，如果客户端正在解析 java 进程的输出，而这些额外的警告可能会以某种方式破坏它们的解析。

这是否有不同的原因。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T15:32:58.260

其实，我想我知道为什么。书上说：

> 它**似乎**会破坏现有客户

我认为这里暗示的是，到目前为止运行良好的客户端将突然开始发出警告消息，并且在随机时间发出警告消息，因为警告来自终结器方法。这会让客户看起来好像出了问题。

这里的关键是“出现”这个词。我想不出客户端逻辑实际上会因此而中断的情况，只是看起来会中断。

# node.js - 如何为这个 Mongoose 模型设置创建者？

> ID：14911254
> 
> 赞同：0
> 
> 时间：2013-02-16T14:21:14.000
> 
> 标签：node.js, mongoose

我必须创建社交网络，比如 Twitter 人们发布推文，但在其中有评论。我定义了

```
var Comment = new Schema();
Comment.add({
    title     : { type: String, index: true }
  , date      : Date
  , body      : String
  , created_by: { type: Schema.Types.ObjectId, ref: 'User' }
});

var TweetSchema = new Schema ({
        created_at : { type: Date, default: Date.now }
    ,   created_by: { type: Schema.Types.ObjectId, ref: 'User' }
    ,   title : String
    ,   comments : [Comment]
    ,   body : String
    ,   picture: [Url]
}) 
```

因为我通过我提供的 REST api 为移动应用程序请求编写我想问，当我创建推文时，我可以将什么发送到服务器以获得 creator_info 和评论？我在这里读过[一些东西](https://stackoverflow.com/questions/13026486/how-to-populate-a-sub-document-in-mongoose-after-creating-it)。但我不知道如何编写一个方法来创建推文或评论并为此设置创建者。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T20:29:43.443

你可以做。在保存推文之前，您尝试从数据中创建一个用户。如果失败，则传递错误。如果不是，请将 created_by 字段设置为用户的 id。

在这里查看更多信息： http: [//mongoosejs.com/docs/middleware.html](http://mongoosejs.com/docs/middleware.html)

```
TweetSchema.pre('save', function(next) {
  var user = new User(this.created_by, function(err, user) {
    if (err) return next(err);
    this.created_by = user._id;
    next();
  });
}); 
```

# node.js - 不是异步函数和 Node.js 的事件循环，这是如何工作的？

> ID：14911268
> 
> 赞同：0
> 
> 时间：2013-02-16T14:22:21.890
> 
> 标签：node.js, events

我试图了解 Node.js 中的事件循环，以及事件编程的工作原理。鉴于我的模块导出了一个函数，该函数在**event****的回调中返回一些内容`data`**：

```
var http = require('http');

module.exports.send = function send(message) {
    http.request({ hostname: 'google.com' }, function (res) {
        res.setEncoding('utf8');

        res.on('data', function (chunk) {
            return chunk;
        }
    });
}; 
```

这怎么行？

如果我理解正确，`http.request`是**异步操作**，这意味着：

1.  执行调用`http.request`；
2.  **程序控制***立即*返回 Node.js事件循环；
3.  当请求最终返回某些东西（`data`事件被发出）时，*可能在几分钟后*，`send`函数返回数据。不是以前。

因此`result`应该是`undefined`，但实际上不是：

```
var send = require('mymodule').send;

var result = send({});
console.log(result); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T19:54:36.990

要考虑的主要事情是调用`data`回调的内容。在这种情况下，该函数是从 Node 内部的一个随机位置调用的，因此当您`return chunk;`将该块返回到 Node 的该部分时，您*不会*将它返回到您自己的代码中，因为它已经完成了运行。

如果您想实际获取该数据，则需要将您自己的回调传递给该回调，该回调`send`将在数据返回时触发。

```
module.exports.send = function send(message, callback) {
  http.request({ hostname: 'google.com' }, function (res) {
    res.setEncoding('utf8');

    res.on('data', function (chunk) {
        callback(chunk);
    });
  });
}; 
```

然后像这样调用：

```
var mod = require('...');
mod.send('message data', function(result){
   console.log(result);
}); 
```

请记住，该`data`事件可以发出任意次数，因此您需要收集所有`chunk`值，然后在`end`事件触发后调用您的回调。

# blackberry-10 - 黑莓 10 级联中的推送通知

> ID：14911272
> 
> 赞同：1
> 
> 时间：2013-02-16T14:22:29.647
> 
> 标签：blackberry-10

我需要在黑莓 10 级联中进行推送通知，如果我关闭应用程序意味着无法在 Blackberry Hub 中显示我的通知

这是代码

```
 Button{
    notification.body="hai notification testing " 
    notification.notify();
    Notification {
                    id: notification
                    title: "Title"
                }
    } 
```

当用户关闭应用程序意味着，我需要在 Blackberry Hub 中显示通知如何做到这一点，谁能给我一些解决方案来解决这个问题。？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T22:05:48.120

这个问题已经在这里解决了：http: [//supportforums.blackberry.com/t5/Cascades-Development/Push-Notification-in-Blackberry-Hub/mp/2186999/highlight/true#M15290](http://supportforums.blackberry.com/t5/Cascades-Development/Push-Notification-in-Blackberry-Hub/m-p/2186999/highlight/true#M15290)

这是通知的代码，包括从集线器调用

```
Notification notification;
n.setTitle(tr("Your title"));
n.setBody(tr("your detailed description"));
n.setCategory("vibrate");

InvokeRequest request;
request.setTarget("org.xyz.yourapp.invoke");
request.setMimeType("application/vnd.yourapp");
n.setInvokeRequest(request);
n.notify(); 
```

在你的酒吧描述符里面你需要

```
<!-- Have an invoke entry here for when a notification is clicked on in the BlackBerry Hub -->
<!-- This will cause the application to be opened -->
<invoke-target id="org.xyz.yourapp.invoke">
    <type>APPLICATION</type>
    <filter>
        <action>bb.action.OPEN</action>
        <mime-type>application/vnd.yourapp</mime-type>
    </filter>
</invoke-target> 
```

并且不要忘记设置权限

```
<permission>run_when_backgrounded</permission>
<permission>post_notification</permission> 
```

# wordpress - Wordpress 缩略图，timthumb

> ID：14911273
> 
> 赞同：-1
> 
> 时间：2013-02-16T14:22:46.887
> 
> 标签：wordpress, timthumb

我对我的 WordPress 网站有疑问。我想在上面使用 Timthumb 调整大小。但是，不会出现缩略图。不显示图像。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T14:55:44.877

您需要为 timthumb 激活缓存文件夹，并且需要为 www-data 用户添加一些权限，例如 755。就是它！* 请不要将 777 用于缓存文件夹。

# graph-visualization - 可视化 HTML 文档树（DOM 树）的工具

> ID：14911274
> 
> 赞同：7
> 
> 时间：2013-02-16T14:22:47.790
> 
> 标签：graph-visualization, dom, tree-structure

我想可视化 HTML 网站的文档结构。

我想要的是这样的：

![在此处输入图像描述](../Images/6e2ad2c245702c0e710c38da56a8d381.png)

是否有任何已知的工具可以执行此操作以及可以将结果保存为位图文件的位置？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-23T12:14:00.013

我使用 LaTeX 创建 DOM 表示。

这是一个最小的工作示例：

```
\documentclass{scrreprt}
\usepackage{tikz-qtree}
\begin{document}

  \Tree[.table 
         [.thead 
           [.tr 
             [.th [.\textit{Vorname} ] ]
             [.th [.\textit{Nachname} ] ]
           ]
         ]              
         [.tbody 
           [.tr 
             [.td [.\textit{Donald} ] ]
             [.td [.\textit{Duck} ] ]
           ]
         ]
       ]

\end{document} 
```

这使：

![在此处输入图像描述](../Images/55feb12bbabd328c79ed58407d830803.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-16T19:03:38.043

我刚刚尝试使用两个库。

首先，我使用[Jsonml将 dom 转换为 JSON](http://www.jsonml.org/)

```
var jsonData = JsonML.fromHTMLText(htmlData); 
```

然后使用[Json Editor](https://github.com/DavidDurman/FlexiJsonEditor)或[Json Viewer](http://jquery-jsonviewer-plugin.googlecode.com/svn/trunk/demo.html)对其进行可视化

在 jsFiddle 中查看示例

1.  [使用 Json 编辑器](http://jsfiddle.net/UUL5k/19/)
2.  [使用 Json 查看器](http://jsfiddle.net/UUL5k/18/)

希望这可以帮助你。

# django - Django - 扩展注册表单模板不显示字段

> ID：14911279
> 
> 赞同：1
> 
> 时间：2013-02-16T14:22:57.280
> 
> 标签：django, django-templates, django-registration

我试图从`django-registration`另一个 html 文档中插入注册表单模板。原始注册模板运行良好，用户保存在数据库中：

当我尝试使用`{% extend registration/myRegistrationFormTemplate.html %}`. 不显示字段，提交按钮不起作用。

[![](../Images/05866cb17cfd4f03363ba07ba0fb716c.png)](https://i.stack.imgur.com/O25ql.png)

此外，这也是我尝试`myRegistrationFormTemplate.html`使用 Jquery 方法 .load 加载时发生的情况。显示字段，但提交按钮不起作用。

[![](../Images/955584c7d6984d1804b29a28355f5470.png)](https://i.stack.imgur.com/RSDKY.png)

**问题是**：为什么会这样？这样做的通常程序是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T16:27:09.327

您可能需要使用[include](https://docs.djangoproject.com/en/dev/ref/templates/builtins/#include)，它允许您使用当前上下文呈现包含的页面。但是，这完全取决于您如何设计模板结构以及它们如何扩展其他模板。这个答案可能解释了差异：[https ://stackoverflow.com/a/2863753/2074398](https://stackoverflow.com/a/2863753/2074398)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T21:32:25.123

感谢 FallenAngel，你是对的，我错过了视图信息。感谢您告诉我有关“包含”almalki 的信息，现在一切正常。在我的项目中，我在这个视图中使用了 2 个表单和一个 jquery 模态窗口。为了简化我的解决方案，我将只使用一种形式。我希望这对某人有用。

**解决方案：** 查看您将包含表单的模板

```
def patrimonio_view(request, 
     template_name='home/patrimonio.html'):

#OTHER DB QUERYS
pat = patrimonio.objects.all()
ciu = ciudad.objects.all()

if request.method == 'POST':
    if "Registrar_usuario" in request.POST:
        #USER REGISTRATION FORM RELATIVE
        return register_usuario()

    if "Registrar_comerciante" in request.POST:
        #MERCHANT REGISTRATION FORM RELATIVE
        return register_comerciante()

#RENDER
return render_to_response(template_name,{
   'patrimonio':pat, 
   'ciudad':ciu,
}, context_instance=RequestContext(request)) 
```

网址.py

```
url(r'^patrimonio/$','patrimonio_view',
{'backend_registro_usuario': 'Hesperides.apps.accounts.regbackend_usuario.DefaultBackend','form_class_usuario':RegistrationForm_usuario}, name='vista_patrimonio'), 
```

在模板中，您将包含以下表格：

```
{% include "registration/registration_form_usuario.html" %} 
```

# android - Android：如何制作这样的导航？

> ID：14911283
> 
> 赞同：-1
> 
> 时间：2013-02-16T14:23:14.917
> 
> 标签：android

请问如何制作类似Facebook Apps的导航菜单？是列表视图吗？谢谢。

![脸书帮助页面](../Images/74808e169743d90ec21cec278318fd57.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T14:27:31.833

试试这个[**Android facebook 风格的幻灯片**](https://github.com/gitgrimbo/android-sliding-menu-demo)示例项目

# c++ - 将 const 对象引用转换为 const 对象

> ID：14911295
> 
> 赞同：0
> 
> 时间：2013-02-16T14:24:25.330
> 
> 标签：c++

我最近了解到

```
Object const & object();

Object o = object(); 
```

会导致副本。所以我很好奇什么时候发生

```
Object const o = object(); 
```

会做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T14:26:21.537

它也会制作副本。

为避免复制，您可以创建一个与函数返回的*引用*绑定到同一对象的引用：

```
Object const & o = object(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T14:26:38.993

同样复制，`o`只要它是一个对象，就应该构造你的。在这里复制构建。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T14:37:39.490

引用不是对象，但它们只是一个别名，因此分配引用与分配对象相同。

```
Object const & object();

Object o = object();   //here o is not constant. you can do o=object() again.

Object const o = object();  //here o is constant. you can't do o=object() again after its initialization. 
```

# php - PHP 换行

> ID：14911296
> 
> 赞同：2
> 
> 时间：2013-02-16T14:24:25.377
> 
> 标签：php, wordpress, custom-fields

我目前有以下代码输出带有标题和图像的自定义字段，但我正在尝试添加换行符。据我了解，`echo "/n";`最后应该有诀窍。

它仍在输出数据，但没有换行 - 任何人都可以帮助像我这样一个相当绝望的案例:-)

```
 <?php
$value = get_post_meta( get_the_ID(), 'ecpt_location2', true);
if( !empty($value)) {
    echo '<h5>Location</h5>';
     echo '<img src="/wp-content/uploads/2013/02/Address1.gif">';
    echo $value;
    echo "\n";
}
?> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-16T14:27:13.437

试试[**nl2br**](http://php.net/manual/en/function.nl2br.php)。

```
echo nl2br($yourTextData); 
```

希望这可以帮助

# javascript - SlideToggle() 在悬停事件上无法正常工作 (jQuery 1.4.1)

> ID：14911298
> 
> 赞同：0
> 
> 时间：2013-02-16T14:24:34.783
> 
> 标签：javascript, jquery, debugging, version, jquery-1.4

我正在为导航栏创建一个新功能。当您单击它时，它曾经会下拉，但新的方式是当它们悬停在箭头（指向下方）时。

我遇到的问题是我为此编写的脚本在较新版本的 jQuery 中运行良好，但在该站点的版本中无法正常运行。

请参阅**最新版本**的 jQuery 示例：http: [//jsfiddle.net/titanium/wDEjs/](http://jsfiddle.net/titanium/wDEjs/)

请参阅**版本 1.4.1**的示例：http : [//jsfiddle.net/titanium/SmhHM/](http://jsfiddle.net/titanium/SmhHM/)

脚本本身没有问题（对于较新的脚本），但它需要更改，因此它在**版本 1.4.1**中工作以解决此版本中的错误/错误。即使有人知道错误/错误是什么并且可以为我指出正确的方向来解决这个问题，那也很棒。

*我知道最好的办法是使用更新版本的 jQuery，但我已经尝试过了，它似乎在网站周围搞砸了一些东西（而且它是一个非常大的网站）。*

这是我目前正在使用的代码（在最新版本的 jQuery 中运行良好）：

**HTML**

```
<ul>
    <li>Page <span>sub</span></li>
    <li>Page <span>sub</span></li>
    <li>Page <span>sub</span></li>
    <div class="clear"></div>
</ul>

<div class="sub">
    <p>Some stuff here for the menu</p>
</div> 
```

**CSS**

```
ul {
    margin:0;
    padding:0;
}
li {
    float:left;
    padding:0 50px;
    background-color:#eee;
}
span {
    cursor:pointer;
}
.clear {
    clear:both;
}
.sub {
    width:400px;
    height:300px;
    display:none;
    background-color:#ccc;
} 
```

**Javascript**

```
$(document).ready(function() {
    $("span, .sub").hover(function() {
        $(".sub").stop(true, false).slideToggle();
    });
}); 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-16T15:13:07.380

不`t know really why its working like that, but it does work with jquery 1.4.1 and if you change the second parameter of the stop, to true, it`工作，有点错误，但它会`ll work, cause it`跳到动画的结尾，如果你把它设置为假会发生什么，如果你不工作，`t let the animation finish, it`然后滑动到它结束的前一个点。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-16T19:37:24.933

在这种情况下有一个解决方法（不是一个很好的方法，但它可以工作，尤其是在处理旧版本的 jQuery 库时）：

```
<script src="/js/jquery-1.4.1.min.js"></script>
<script src="/js/jquery-1.9.1.min.js"></script>
<script>
  var jQuery_1_9_1 = $.noConflict(true);
</script> 
```

当您调用 jQuery 函数时，不要使用全局变量，而是使用`$`您创建的变量。在这种情况下，将是`jQuery_1_9_1`。

**最终结果将是脚本中的这种更改：**

```
$(document).ready(function() {
    $("span, .sub").hover(function() {
        jQuery_1_9_1(".sub").stop(true, false).slideToggle();
    });
}); 
```

# javascript - 如何将数据属性的内容用作哈希键？

> ID：14911300
> 
> 赞同：0
> 
> 时间：2013-02-16T14:24:50.660
> 
> 标签：javascript

我有一个 DOM 元素：

```
data-update-attribute='name' data-update-url='users/1' 
```

我想做这样的事情：

```
 $.ajax({ type: 'PUT',
        url: $el.data('update-url'),
        data: { user: { xxx: value } }
    }); 
```

我的问题是我无法弄清楚如何将 xxx 替换为`data-update-attribute`. 这在 Ruby 中是微不足道的，但我完全不知道如何在 JS 中做到这一点：-S

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T14:29:10.770

你不能在对象文字中，你需要构造一个没有键的对象，然后使用[括号表示法](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Member_Operators)：

```
var url = $el.data('update-url'),
    attr = $el.data('update-attribute'),
    user = {};
user[attr] = value;
$.ajax({
    type: 'PUT',
    url: url,
    data: { user: user }
}); 
```

# ruby-on-rails - 使用三个模型创建循环关联

> ID：14911301
> 
> 赞同：1
> 
> 时间：2013-02-16T14:24:53.440
> 
> 标签：ruby-on-rails, rails-activerecord

我有 3 个基本型号，分别是鞋子、颜色和尺码。

鞋子有多种颜色和多种尺寸，但对于每种颜色，它们都有 available_sizes。

为了能够执行此操作，我应该同时查看 shoe_id 和 color_id 并根据它们在三联模型上获取 size_ids。

相反的条件（available_colors）也存在。

然后，我们的模型将是这样的：

```
class Shoe < ActiveRecord::Base
  has_many :stocks
  has_many :colors, through: :stocks
  has_many :sizes, through: :stocks
end

class Color < ActiveRecord::Base
  has_many :stocks
  has_many :shoes, through: :stocks
end

class Size < ActiveRecord::Base
  has_many :stocks
  has_many :shoes, through: :stocks
end

class Stock < ActiveRecord::Base
  belongs_to :shoe
  belongs_to :color
  belongs_to :size
end 
```

我想要什么，查询类似`shoe.sizes.availabe_colors`or的东西`shoe.colors.available_sizes`。

我应该如何实现关联以使所有鞋子、颜色和尺码模型都能很好地协同工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T19:25:29.057

如果我理解你的正确，你想找到给定特定颜色的特定鞋子的所有可用尺寸。换句话说，红色鞋“A”的库存尺寸是多少。

由于 Stock 是加入所有其他模型的模型，因此您需要对其进行查询。首先，您可以从获取特定鞋子的库存开始，然后将库存削减为特定颜色，然后询问其独特的尺寸

```
Shoe.find(shoe_id).stocks.where(:color_id => color_id).sizes.uniq 
```

要清理它，请将其设为实例方法`Shoe`

```
class Shoe < ActiveRecord::Base
  def available_sizes_for_color(color_id)
    stocks.where(:color_id => color_id).sizes.uniq
  end
end

Shoe.find(shoe_id).available_sizes_for_color(color_id) 
```

反之亦然，按尺寸查找颜色。

使用 Stock 模型的替代方法：

```
class Stock < ActiveRecord::Base
  class << self
    def sizes(shoe_id, color_id)
      Shoe.find(shoe_id).stocks.where(:color_id => color_id).sizes.uniq
    end
  end
end

Stock.sizes(shoe_id, color_id) 
```

最后，使用 Size 模型：

```
class Size
  class << self
    def find_all_by_shoe_and_color(shoe_id, color_id)
      joins(:stock => [:shoe, :color]).where('shoes.id = ? AND colors.id = ?', size_id, color_id)
    end
  end
end

Size.find_all_by_shoe_and_color(shoe_id, color_id) 
```

# java - 向 ImageView 添加投掷手势

> ID：14911302
> 
> 赞同：1
> 
> 时间：2013-02-16T14:24:57.590
> 
> 标签：java, android, gestures

我正在尝试向 imageview 添加投掷手势。我正在使用此代码

```
public class MyActivity extends Activity {
private void onCreate() {
    final GestureDetector gdt = new GestureDetector(new GestureListener());
    final ImageView imageView  = (ImageView) findViewById(R.id.image_view);
    imageView.setOnTouchListener(new OnTouchListener() {
        @Override
        public boolean onTouch(final View view, final MotionEvent event) {
            gdt.onTouchEvent(event);
            return true;
        }
    });
}               

private static final int SWIPE_MIN_DISTANCE = 120;
private static final int SWIPE_THRESHOLD_VELOCITY = 200;

private class GestureListener extends SimpleOnGestureListener {
    @Override
    public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX, float velocityY) {
        if(e1.getX() - e2.getX() > SWIPE_MIN_DISTANCE && Math.abs(velocityX) > SWIPE_THRESHOLD_VELOCITY) {
            return false; // Right to left
        }  else if (e2.getX() - e1.getX() > SWIPE_MIN_DISTANCE && Math.abs(velocityX) > SWIPE_THRESHOLD_VELOCITY) {
            return false; // Left to right
        }

        if(e1.getY() - e2.getY() > SWIPE_MIN_DISTANCE && Math.abs(velocityY) > SWIPE_THRESHOLD_VELOCITY) {
            return false; // Bottom to top
        }  else if (e2.getY() - e1.getY() > SWIPE_MIN_DISTANCE && Math.abs(velocityY) > SWIPE_THRESHOLD_VELOCITY) {
            return false; // Top to bottom
        }
        return false;
    }
}
} 
```

但它只是行不通。日志说 nullpointerexception 它指的是这一行 `imageView.setOnTouchListener(new OnTouchListener() {`

我的错误在哪里？我错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T14:30:32.377

你的 imageView 返回 null 因为你在实际获取 imageview 之前还没有 setContentView()

`setContentView(R.layout.yourlayout)`在你的 onCreate 获取 imageview 之前

# javascript - javascript splice 跳过元素 - 为什么这种行为

> ID：14911312
> 
> 赞同：0
> 
> 时间：2013-02-16T14:26:25.063
> 
> 标签：javascript, splice

我`splice`在嵌套的 for 循环中使用，遇到了我无法理解的行为。

```
var a = [0, 1, 2, 3, 4];

for (b in a) {
    console.log(a);
    for (c in a) {
        console.log(c + '==' + a[c]);
        if (c === "1")
            a.splice(c, 1);
      }
 }

console.log(a); 
```

它的输出很奇怪

```
 [0, 1, 2, 3, 4]
    "0==0"
    "1==1"
    "2==3"  // why is index 2 referring to value 3 , whereas it should refer to 2
    "3==4"
    [0, 2, 3, 4]
    "0==0"
    "1==2"
    "2==4"  //  index 2 referring to value 4 , whereas it should refer to 3
    [0, 3, 4]
    "0==0"
    "1==3"
    [0, 4] 
```

我正在拼接索引 1，它正在跳过下一个元素。

为什么这种行为...

在这里结帐：http: [//jsbin.com/isahoj/3/edit](http://jsbin.com/isahoj/3/edit)

编辑：
好的，我知道它在拼接之后会移动索引，但是我在执行 console.log() 之后调用 splice ... 那么它是如何更早拼接的呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-16T14:32:18.007

> 为什么索引 2 引用值 3 ，而它应该引用 2

因为在上一次迭代中，您通过以下方式删除了一个条目`splice`：

```
if (c==="1")
    a.splice(c, 1); 
```

...所以一切都转移了（就是`splice`这样）。然后下一个循环继续`c`是`"2"`，索引 2 处的条目（现在）是`3`。

* * *

回复您的评论：

> 好的，我知道它在拼接后会移动索引，但是我在做console.log（）之后调用了拼接......那么它是如何更早拼接的呢？

好吧，让我们退后一步：

1.  在内部循环开始之前，`a`看起来像这样：

    ```
    [0, 1, 2, 3, 4] 
    ```

2.  在你的内部循环的第一遍，`c`是`"0"`并且索引处的条目`0`是`0`，所以你的日志语句显示`"0==0"`。**没有**`splice`被调用，也没有改变，所以它仍然看起来像这样：**`a`**

     **```
    [0, 1, 2, 3, 4] 
    ```** 
***   在你的内部循环的下一次传递中，`c`是`"1"`，并且索引处的条目`1`是`1`，所以你的日志语句显示`"1==1"`。然后`splice` **被**调用，改变`a`它看起来像这样：

    ```
    [0, 2, 3, 4] 
    ```

    *   在你的内部循环的下一次传递中，`c`是`"2"`，并且索引处的条目`2`是**`3`**（不是`2`，因为`a`已经改变），所以你的日志语句显示`"2==3"`。** 

 **稍后，当您的外部循环再次运行时，`c`又`"1"`在某一点，因此另一个条目被删除，您会看到相同的效果。

`a`您应该做的是实际观看代码实时运行，使用调试器单步执行，并实时观察变化情况。所有现代浏览器都内置了功能强大的调试器，您不必在代码中乱扔`console.log`语句，您可以实际*观察*发生的情况。

* * *

这不是您的问题的原因，但请注意，这`for-in`不是用于循环数组索引，而是用于枚举对象的属性名称（这就是您的`c==="1"`比较有效的原因，属性名称始终是字符串）。更多：[*神话和现实`for..in`*](http://blog.niftysnippets.org/2010/11/myths-and-realities-of-forin.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-16T14:32:40.153

删除元素 1 后，“a”看起来像：

```
[0, 2, 3, 4] 
```

新元素1是2。循环*的*下一次迭代，那么“c”是2，`a[2]`确实是3。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T14:35:32.417

您不应该[使用`for…in`-enumerations 来循环数组](https://stackoverflow.com/questions/500504/javascript-for-in-with-arrays)。

也就是说，您的问题是该[`.splice`方法](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/splice)修改了您的数组，删除了一个项目并在它之后调整了 indizes。然而，你没有调整你的迭代变量，所以它会跳过索引——旧索引“1”已经被访问过，下一个将是“2”而不是新的“1”。

要解决此问题，您可以向后循环或将迭代计数器减少数量或删除的项目。但是，在重新访问索引时，您的条件将始终得到满足，并且您将依次从数组中删除所有第二个元素，直到没有第二个元素 - 不确定这是否是您的目标。**

# c# - 奇异值分解 - 社交网络分析

> ID：14911315
> 
> 赞同：2
> 
> 时间：2013-02-16T14:26:38.417
> 
> 标签：c#, .net, social-networking, svd

我有一个由邻接矩阵表示的非常大的节点网络。我想减少网络中的节点数量以包含更重要的节点。我知道 SVD 可以帮助我实现这一点，我已经使用 ILNumerics 库在邻接矩阵上运行 svd() 方法。

有人可以简单地向我解释一下输出是如何帮助我减少网络维度的吗？SVD 过程给我留下了一个大小相同的矩阵，其对角线的递减值范围从 ~2 到多个 0。我如何知道要删除哪些维度被认为不重要？

我可能总体上错误地执行了此过程，因此将不胜感激任何帮助！网上的许多解释很快就会变得非常混乱。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T14:51:29.183

我对 ILNumerics 不太熟悉，因此我将尝试解释 SVD 在您的情况下通常能够做什么。首先，[Wikipedia](http://en.wikipedia.org/wiki/Singular_value_decomposition#Applications_of_the_SVD)给出了 SVD 可能应用的一些基本信息。在您的情况下，关于“范围、零空间和秩”和“低秩矩阵近似”的部分特别感兴趣。奇异值分解可以帮助您确定**真实的**你的系统矩阵的等级。如果您的邻接图是稀疏的，则您的系统矩阵（例如，N 乘以 N 矩阵）的秩 M 可能小于 N。在这种情况下，您可以计算它的低秩近似。也就是说，您构建了 M 乘以 M (M < N)，其中忽略了 N - M 个最小特征值，因为它们对结果的影响非常小。在这种情况下，小意味着什么当然在很大程度上取决于您的应用程序。

编辑：在您的示例数据中，您的原始矩阵 A 已分解为 A = outU svdOut outV。对角矩阵 svdOut 由 A 的特征值奇异值组成，而 outU 和 outV 的列/行分别是 A 的左奇异向量和右奇异向量。在您的示例中，奇异值为 1.61803、1.41421、0.61803 和 0（两次）。因此，原始矩阵的等级由非零奇异值的数量（在您的示例中为三个）给出。因此，您可以定义矩阵 B = outU svdOut* outV，其中星号表示已删除最不重要的奇异值。例如，您可以决定要忽略最小的特征值，因此

```
svdOut* =
| 1.61803  0        0  0  0 | 
| 0        1.41421  0  0  0 | 
| 0        0        0  0  0 |
| 0        0        0  0  0 |
| 0        0        0  0  0 | 
```

但是，在再次考虑之后，我认为您的邻接矩阵的 SVD 不会直接为您提供所需的内容。您必须以某种方式定义您的上下文中的**重要**节点实际上是什么。

Edit2（回应下面的评论）：SVD 没有给你关于你的节点的直接信息，但是关于你的矩阵。奇异向量形成一个正交基，可用于以不同形式表达原始矩阵。奇异值为您提供了有关每个向量的影响有多强的信息。同样，[维基百科](http://en.wikipedia.org/wiki/Singular_value_decomposition#Geometric_meaning)可能会帮助您了解如何解释这一点。回到你原来的问题，我想一个简单的 SVD 并不是你真正想要的。

# php - 用于显示页面和 ajax 调用的单一入口点

> ID：14911316
> 
> 赞同：0
> 
> 时间：2013-02-16T14:26:39.337
> 
> 标签：php, ajax

我的网站只有一个条目：`http://mysite.com/index.php?this=that&andthis=that`. 我将它用于所有任务，例如最初显示页面、提交表单和 ajax 调用。然后我将其路由到适当的任务。

是否有任何理由为什么更喜欢在站点中添加另一个条目以进行 ajax 调用，例如`http://mysite.com/ajax.php`而不是 index.php？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T14:50:30.123

正如我所知道的，根据我的经验，将这两种行为分开没有技术上的理由。

但是您可能需要进行一些特定的处理，例如当您有一个 ajax 请求时，您需要处理错误并将它们以不同的方式显示给用户。

例如：对于异常，您可能需要将代码包含在 try catch 中，并以 json 格式返回错误消息：

```
try{
    // your AJAX request code here
} catch (Exception $e){
    // threat error here
    $msgErr = $e->getMessage();

    echo json_encode( array( "success"=>"failure", "msg" => $msgErr ) );
} 
```

并且您在警报消息框中向最终用户显示该消息，因此一旦您有这样的需求，就需要更多的逻辑来为 ajax 请求创建一个单独的入口点，以便自动执行您的行为，而不是每次都重新创建。

我希望我已经足够清楚地表达了我的想法，如果不是，我很乐意再试一次。

我希望它有所帮助。

# php - PHPUnit测试shell执行

> ID：14911321
> 
> 赞同：2
> 
> 时间：2013-02-16T14:26:52.193
> 
> 标签：php, phpunit

我有负责与 shell 交互的类，有什么方法可以用**PHPUnit**测试这个函数吗？

```
public function runCommand($command, $stdin = null)
{
    $descriptorspec = array(
        array("pipe", "r"), // stdin
        array("pipe", "w"), // stdout
        array("pipe", "w"), // stderr
    );

    $environment = array();

    $proc = proc_open(
        $command,
        $descriptorspec,
        $pipes,
        __DIR__,
        $environment
    );

    if (!is_resource($proc)) {
        return false;
    }

    if ($stdin !== null) {
        fwrite($pipes[0], $stdin);
        fclose($pipes[0]);
    }

    $result = stream_get_contents($pipes[1]);
    fclose($pipes[1]);

    if (proc_close($proc) !== 0) {
        return false;
    }

    return $result;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T14:55:25.727

Here is what came to my mind just after I posted the question. Since I'm testing on linux, I created a bash script:

```
#!/bin/bash
echo -ne "exec_works" 
```

And just ran it in test:

```
public function testShellExecution()
{
    // root tests directory constant, set in PHPUnit bootstrap file
    $path = TESTDIR . "/Resources/exec_test.sh";

    $this->assertEquals(
        "exec_works",
        $this->shellCommander->runCommand("bash $path")
    );
} 
```

The downside is that test like this will only pass under linux environment (I've never used MAC so I don't know if it runs bash scripts), but will surely fail on windows since windows can't run bash scripts natively.

The soultion for this would be to just create executable script for every OS and make test check which OS server uses and run appropriate script.

# ruby-on-rails - 寻找一个好主意和一个好的 Ruby 结构

> ID：14911323
> 
> 赞同：1
> 
> 时间：2013-02-16T14:26:55.870
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3.2

我正在编写一个 Rake 任务来填充数据库以用于开发目的，以便使用一些数据。（但在测试中我使用的是 FactoryGirl，所以不谈论这个。）

所以假设我的演示数据库中有两个示例组织，所以我这样定义它们：

```
sample_organizations = [ '37 Signals', 'Fog Creek'] 
```

然后是一个像这样填充数据库的小方法：

```
def create_organizations
  sample_organization.each { |item|
    Organization.first_or_create(
        name: item,
        time_zone: 'Central'
    )
  }
end 
```

所以好消息是，从现在开始的两个月后，如果我想添加第三个组织，我只需转到我的代码顶部并在该数组中手动​​输入另一个组织名称。方法仍然有效并创建它。

**现在问题开始了：**我有更多的表格要填充！例如， **Summaries**表挂在 Organization 表上，因此每个组织可以有很多 Summaries，所以我们也有一个`organization_id foreign key`要填写的 Summary 表。但是我仍然希望有一个像上面的方法一样`create_summaries`的`create_organization`方法，但是这次填写Summaries表，棘手的部分是填写表的organization_id字段。

我应该如何处理这个？假设摘要表具有以下字段： `id (auto generate by Rails) , organization_id, name, member_count`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T14:41:24.553

尝试使用 Populator gem 来完成这样的任务。它易于使用，您可以生成复杂的结构。[截屏](http://railscasts.com/episodes/126-populating-a-database)。

由于您不能使用这些，请使用选择一个随机父对象，或在哈希中按名称指定一个。

```
summaries = [{:name => "foo", :organization => "bar"}] 
```

# php - selected=根据mysql数据库中的值选择

> ID：14911324
> 
> 赞同：-1
> 
> 时间：2013-02-16T14:27:02.837
> 
> 标签：php, html, mysql

我目前正在开发自己的 CMS，用户可以在其中添加和更新他的项目。添加它们就像一个魅力，并且更新也有效，但是当我点击一个项目（它获取基于 a 的所有信息`$_GET['id']`）时，类别值始终是我选择元素中的第一个选项。

我知道这可以通过添加`selected="selected"`到 option 元素来实现，但是我想让它与数据库中的值一起使用，这就是我感到困惑的地方。

我想让这部分动态：

```
<select  name="categorie">
   <option value="cv">CV / Boiler</option>
   <option value="onderhoudrenovatie">Onderhoud & Renovatie</option>
   <option value="sanitair">Sanitair</option>
</select> 
```

添加选项时，选项值已写入表“projecten”中的“categorie”字段中的数据库。

有没有人有办法解决吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T14:28:56.093

您必须获取值并分配给变量。然后，使用基本 PHP，您可以根据值选择打印“已选择”或不打印。

例如这样的：

```
<?php $data=$_GET['id']; ?>

<select  name="categorie">
 <option value="cv" <?php if ($data=="cv") print "selected"; ?>>CV / Boiler</option>
 <option value="onderhoudrenovatie" <?php if ($data=="onderhoudrenovatie") print "selected"; ?>>Onderhoud & Renovatie</option>
 <option value="sanitair" <?php if ($data=="sanitair") print "selected"; ?>>Sanitair</option>
</select> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T14:32:57.723

尝试做这样的事情：

```
$categories = array() ; //Fill your array with data from your database ;
$selectedId = (isset($_GET['id'])) ? $_GET['id'] : null ;

foreach ($categories as $cat){ ?>
   <option value="<?php echo $cat['name'] ;?>" <?php echo (!empty($selectedId) &&  $cat['id'] == $selectedId) ? "selected" : "") ; ?> >
      <?php echo $cat['name'] ; ?>
    </option>

 <?php
} 
```

# excel - 从多个 excel 文件中复制列的数据并将其粘贴到新的 excel 文件中

> ID：14911333
> 
> 赞同：1
> 
> 时间：2013-02-16T14:28:02.083
> 
> 标签：excel, vbscript

我想从位于文件夹中的 excel 文件中复制特定列，并将所有值粘贴到新的 excel 表中。

完全的-

1.  我能够遍历文件夹中的所有文件。
2.  我能够从特定列复制数据。

无法完成：

1.  无法粘贴复制的数据。
2.  我只想复制不同的值。
3.  我想复制列直到行在那里。就像如果有 7 行然后复制 7 个列值。我的复制命令将所有值复制到 Excel 表的最后一行。

我的代码（VBScipt）-

```
strPath="C:\Test"

Set objExcel= CreateObject("Excel.Application")
objExcel.Visible= True

Set objExcel2= CreateObject("Excel.Application")
objExcel2.Visible= True

objExcel2.Workbooks.open("C:\Test\New Folder\4.xlsx")

Set objFso = CreateObject("Scripting.FileSystemObject")
Set objFolder = objFso.GetFolder (strPath)

For Each objFile In objFolder.Files
If objFso.GetExtensionName(objFile.Path) = "xlsx" Then
    objExcel.Workbooks.Open(objFile.Path)

    Set Source=objExcel.Activeworkbook.Sheets(1).Columns("G")
    Source.Copy
    Set dest=objExcel2.Activeworkbook.Sheets(1).Columns("A")
    dest.Paste
    objExcel.Activeworkbook.save
    objExcel.Activeworkbook.close
    objExcel2.Activeworkbook.save
    objExcel2.Activeworkbook.close

End If

Next 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T15:12:10.613

此函数将返回工作表上给定列的使用范围。

```
Private Function getRange(ByVal ColumnName As String, ByVal Sheet As Worksheet) As Range
  Set getRange = Sheet.Range(ColumnName & "1", ColumnName & Sheet.Range(ColumnName & Sheet.Columns(ColumnName).Rows.Count).End(xlUp).Row)
End Function 
```

如果你使用它代替你的`Set Source=objExcel.Activeworkbook.Sheets(1).Columns("G")`它应该做你想做的事。

例如：`Set Source = getRange("G", objExcel.Activeworkbook.Sheets(1))`

您可能需要将您`dest`的单元格更改为单元格而不是列（以防 excel 抱怨它的大小错误）

`Set dest = objExcel.Activeworkbook.Sheets(1).Cells("A1")`

刚刚看到您将其标记为 VBScript，我尚未将其测试为 VBS，但它可能与 VBA 一样工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-10T18:45:14.223

我认为 PasteSpecial 将有助于在 vb 脚本中粘贴。最好在 PasteSpecial 中使用 -4163 参数以确保仅粘贴值。下面的代码在 Microsoft Visual Studio 2012 中为我工作。添加注释只是为了了解程序在代码中的位置。希望这可以帮助。

```
Imports System.Data.OleDb
Imports System.IO
Imports System.Text

Public Class Form1
 Dim objCSV, objExcel, objSourceWorkbook, objDestWorkbook, objCSVWorkSheet, objXLSWorkSheet, srcCPUXrange, srcCPUYrange, srcMEMYrange, dstCPUXrange, dstCPUYrange, dstMEMYRange
   Private Sub Form1_Load(sender As Object, e As EventArgs) Handles MyBase.Load

 'Create and open source CSV object
    Label1.Text = "Setting Source"
    objCSV = CreateObject("Excel.Application")
    objCSV.Visible = True
    objSourceWorkbook = objCSV.Workbooks.Open("C:\SourceFile.csv")
    Label1.Text = "Source set"

    'Create and open destination Excel object
    Label1.Text = "Setting Destination"
    objExcel = CreateObject("Excel.Application")
    objExcel.Visible = True
    objDestWorkbook = objExcel.Workbooks.Open("C:\DestinationFile.xlsx")
    Label1.Text = "Destination Set"

    'Select desired range from CSV file
    Label1.Text = "Copying Data"
    objCSVWorkSheet = objSourceWorkbook.Worksheets(1)
    objCSVWorkSheet.Activate()
    objSourceWorkbook.Worksheets(1).Range("A1").EntireColumn.Copy()
    Label1.Text = "Data Copied"

    'Paste in Excel workbook 
    Label1.Text = "Pasting Data"
    objXLSWorkSheet = objDestWorkbook.Worksheets(1)
    objXLSWorkSheet.Activate()
    objDestWorkbook.Worksheets(1).Range("A2").PasteSpecial(-4163)
    Label1.Text = "Data Pasted"    

  End Sub
End Class 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-01T00:28:59.610

对于使用的不同复制`.AdvancedFilter()`方法，使用`getRange()`@NickSlash 定义的单元格。对于从文件中添加数据，为每个文件创建新工作表，然后将数据过滤到其中。我希望这有帮助。
VBScript

```
Const xlFilterCopy = 2
Const xlUp = -4162
Const xlDown = -4121
strPathSrc = "C:\Test" ' Source files folder
strMaskSrc = "*.xlsx" ' Source files filter mask
iSheetSrc = 1 ' Sourse sheet index or name
iColSrc = 7 ' Source column index, e. g. 7 for "G"
strPathDst = "C:\Test\New Folder\4.xlsx" ' Destination file
iColDst = 1 ' Destination column index

Set objExcel = CreateObject("Excel.Application")
objExcel.Visible = True
Set objWorkBookDst = objExcel.Workbooks.Open(strPathDst)
Set objSheetTmp = objWorkBookDst.Worksheets.Add
objSheetTmp.Cells(1, iColDst).Value = "TempHeader"
Set objShellApp = CreateObject("Shell.Application")
Set objFolder = objShellApp.NameSpace(strPathSrc)
Set objItems = objFolder.Items()
objItems.Filter 64 + 128, strMaskSrc
objExcel.DisplayAlerts = False
For Each objItem In objItems
    Set objWorkBookSrc = objExcel.Workbooks.Open(objItem.Path)
    Set objSheetSrc = objWorkBookSrc.Sheets(iSheetSrc)
    objSheetSrc.Cells(1, iColSrc).Insert xlDown
    objSheetSrc.Cells(1, iColSrc).Value = "TempHeader"
    Set objRangeSrc = GetRange(iColSrc, objSheetSrc)
    If objRangeSrc.Cells.Count > 1 then
        nNextRow = GetRange(iColDst, objSheetTmp).Rows.Count + 1
        objRangeSrc.AdvancedFilter xlFilterCopy, , objSheetTmp.Cells(nNextRow, iColDst), True
        objSheetTmp.Cells(nNextRow, iColDst).Delete xlUp
        Set objRangeTmp = GetRange(iColDst, objSheetTmp)
        Set objSheetDst = objWorkBookDst.Worksheets.Add
        objRangeTmp.AdvancedFilter xlFilterCopy, , objSheetDst.Cells(1, iColDst), True
        objSheetTmp.Delete
        Set objSheetTmp = objSheetDst
    End If
    objWorkBookSrc.Close
Next
objSheetTmp.Cells(1, iColDst).Delete xlUp
objExcel.DisplayAlerts = True

Function GetRange(iColumn, objSheet)
    With objSheet
        Set GetRange = .Range(.Cells(1, iColumn), .Cells(.Cells(.Cells.Rows.Count, iColumn).End(xlUp).Row, iColumn))
    End With
End Function 
```

# c++ - 返回函数崩溃 - C++ Openssl

> ID：14911334
> 
> 赞同：1
> 
> 时间：2013-02-16T14:28:05.503
> 
> 标签：c++, function, openssl

从这个函数返回主函数后，我的程序意外退出。在 system("pause") 之后，按回车，它只是退出程序，不会返回主函数。希望有人可以提供一些见解。

```
 bool DecryptKeyWithCheckSum(unsigned char *userKey,unsigned char *ivec,std::string cipherStr,unsigned char *genKey)
{

//split cipher
std::string first16Cipher = cipherStr.substr(0,AES_KEY_SIZE);
std::string last16Cipher = cipherStr.substr(AES_KEY_SIZE,cipherStr.length()-1);

//convert back to char
char cipherChar1[AES_KEY_SIZE];
strcpy(cipherChar1,first16Cipher.c_str());

//convert back to char
char cipherChar2[AES_KEY_SIZE];
strcpy(cipherChar2,last16Cipher.c_str());

//convert to unsigned char
unsigned char cipher1[AES_KEY_SIZE];
memcpy(cipher1,reinterpret_cast<unsigned char*>(cipherChar1),AES_KEY_SIZE);

unsigned char cipher2[AES_KEY_SIZE];
memcpy(cipher2,reinterpret_cast<unsigned char*>(cipherChar2),AES_KEY_SIZE);

//set key
AES_KEY key;
AES_set_encrypt_key(userKey, 128, &key);

unsigned char oriKey[AES_KEY_SIZE];
unsigned char checksum[AES_KEY_SIZE];

int num1 = 0;

//decrypt cipher
AES_cfb128_encrypt(cipher1, oriKey, AES_BLOCK_SIZE, &key, ivec, &num1,AES_DECRYPT);
AES_cfb128_encrypt(cipher2, checksum, AES_KEY_SIZE, &key, ivec, &num1,AES_DECRYPT);

//generate hash checksum
unsigned char hashChecksum[AES_KEY_SIZE];
this->hashData_MD5(oriKey,AES_KEY_SIZE,hashChecksum);

//convert checksum into string to compare
char checksum1[AES_KEY_SIZE];
strncpy(checksum1,reinterpret_cast<const char*>(hashChecksum),AES_KEY_SIZE);
checksum1[AES_KEY_SIZE] = '\0';
std::string checksum1Str = checksum1;

//convert checksum into string to compare
char checksum2[AES_KEY_SIZE];
strncpy(checksum2,reinterpret_cast<const char*>(checksum),AES_KEY_SIZE);
checksum2[AES_KEY_SIZE] = '\0';
std::string checksum2Str = checksum2;

//compare last 16 & checksum
if(checksum1Str==checksum2Str)
{
              //PROGRAM ABLE TO PRINT OUT THIS
    cout << "Decrypt Key Return true" << endl;
    system("pause");
    return true;
}
else
{
    cout << "Decrypt Key Return false" << endl;
    system("pause");
    return false;
}
}//end of function

int main()
{

//get user to enter password to decrypt password
unsigned char pass[AES_KEY_SIZE] = "password";
unsigned char tempKey[AES_KEY_SIZE];

//generate random key
unsigned char ckey[AES_KEY_SIZE];
this->generateRandomNum(ckey,AES_KEY_SIZE);
this->generateRandomNum(ivec,AES_IV_SIZE);

std::string cipherStr;
EncryptKeyWithCheckSum(pass,IV2,ckey,cipherStr);

if(DecryptKeyWithCheckSum(pass,IV,cipherStr,tempKey)==true)
{
          //BEFORE PRINTING OUT THIS, THE PROGRAM CRASHES UNEXPECTEDLY
    cout << "TRUE" << endl;
    system("pause");
}
else
{
    cout << "False" << endl;
    system("pause");
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T15:04:17.390

您的大多数数组都是一个元素太小。

例如，

```
std::string first16Cipher = cipherStr.substr(0,AES_KEY_SIZE); 
```

字符`first16Cipher`也是如此`AES_KEY_SIZE`

```
char cipherChar1[AES_KEY_SIZE];
strcpy(cipherChar1,first16Cipher.c_str()); 
```

但是当您包含终止零时，此行将复制`AES_KEY_SIZE + 1`字符，这会导致未定义的行为，从而使您的整个程序未定义。

# sass - 找不到或无法读取要导入的基础文件

> ID：14911335
> 
> 赞同：0
> 
> 时间：2013-02-16T14:28:08.823
> 
> 标签：sass, zurb-foundation, yeoman, bower

使用新的 Yeoman beta 1.0
，我引导了一个 Angular 应用程序，并通过 bower 安装了基础。

当我运行我的服务器时，我得到这个错误：

```
error app/styles/main.scss (Line 7 of app/components/foundation/scss/foundation.scss: File to import not found or unreadable: modular-scale. 
```

进口是`@import "modular-scale";`

我试图将其更改为`@import "foundation/functions/modular-scale";`

但随后收到一个循环警告，说它正在尝试导入自己。

尝试在我的 grunt 文件中添加 ruby​​ gem 'modular-scale'，在罗盘下
`require: 'modular-scale'`

但它似乎也不起作用

无论如何，我不知道在这里做什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T23:36:51.900

在将应用程序迁移到 1.0 时，我遇到了类似的问题。Bower 将组件安装到顶级组件目录而不是 app/components。如果是这种情况，一种解决方法是添加一个`.bowerrc`文件

```
{
    "directory": "app/components"
} 
```

我不确定根本原因，因为使用 Yeoman 1.0 创建一个新的 webapp 不会遇到这个问题。

# c++ - boost::phoenix::insert 的评估结果

> ID：14911337
> 
> 赞同：3
> 
> 时间：2013-02-16T14:28:30.143
> 
> 标签：c++, boost, boost-fusion, boost-phoenix

我在尝试评估`boost::phoenix::insert`将元素插入地图的结果时遇到了困难。与常规`std::map::insert`返回的actor对象类似，它`boost::phoenix::insert`也返回一个`std::pair<Iterator where, bool result>`. 我对该对的第二个元素感兴趣，以检查插入是否成功。说明该问题的大量条带化代码示例如下：

```
#include <iostream>
#include <boost/phoenix/fusion.hpp>
#include <boost/phoenix/phoenix.hpp>
#include <boost/fusion/include/all.hpp>
#include <boost/fusion/include/std_pair.hpp>

int main(int, char*[])
{
  namespace phx = boost::phoenix;
  using phx::arg_names::arg1;
  using phx::arg_names::arg2;

  std::map<int, int> map;
  std::pair<int, int> value(1, 2);

  if (phx::at_c<1>(phx::insert(arg1, arg2))(map, value)) // <- Error here
    std::cout << "Success" << std::endl;
  else
    std::cout << "Fail" << std::endl;

  return 0;
} 
```

使用 MSVC2012 和 boost 1.53 时出现以下错误：

```
error C2440: 'return' : cannot convert from 'const bool' to 'bool &'
<some-path>\include\boost\proto\transform\call.hpp:258 
```

clang3.2报同样的错误：

```
Compilation finished with errors:
In file included from source.cpp:2:
In file included from /usr/local/include/boost/phoenix/fusion.hpp:14:
In file included from /usr/local/include/boost/phoenix/fusion/at.hpp:14:
In file included from /usr/local/include/boost/phoenix/core/expression.hpp:10:
In file included from /usr/local/include/boost/phoenix/core/as_actor.hpp:10:
In file included from /usr/local/include/boost/phoenix/core/actor.hpp:17:
In file included from /usr/local/include/boost/phoenix/core/domain.hpp:12:
In file included from /usr/local/include/boost/proto/matches.hpp:43:
In file included from /usr/local/include/boost/proto/transform/when.hpp:22:
/usr/local/include/boost/proto/transform/call.hpp:255:24: error: binding of reference to type 'bool' to a value of type 'const bool' drops qualifiers
                return typename detail::poly_function_traits<Fun, Fun(a0, a1)>::function_type()(
                       ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
/usr/local/include/boost/phoenix/core/meta_grammar.hpp:74:24: note: in instantiation of member function 'boost::proto::call<boost::proto::functional::at (boost::phoenix::evaluator (*)(boost::proto::_child_c<1>), boost::proto::_value (*)(boost::proto::_child_c<0>))>::impl2<const boost::phoenix::actor<boost::proto::exprns_::basic_expr<boost::phoenix::tag::at_c, boost::proto::argsns_::list2<boost::proto::exprns_::basic_expr<boost::proto::tagns_::tag::terminal, boost::proto::argsns_::term<mpl_::int_<1> >, 0>, boost::phoenix::actor<boost::proto::exprns_::basic_expr<boost::phoenix::detail::tag::function_eval, boost::proto::argsns_::list3<boost::proto::exprns_::basic_expr<boost::proto::tagns_::tag::terminal, boost::proto::argsns_::term<boost::phoenix::stl::insert>, 0>, boost::phoenix::actor<boost::proto::exprns_::basic_expr<boost::proto::tagns_::tag::terminal, boost::proto::argsns_::term<boost::phoenix::argument<1> >, 0> >, boost::phoenix::actor<boost::proto::exprns_::basic_expr<boost::proto::tagns_::tag::terminal, boost::proto::argsns_::term<boost::phoenix::argument<2> >, 0> > >, 3> > >, 2> > &, boost::phoenix::vector3<const boost::phoenix::actor<boost::proto::exprns_::basic_expr<boost::phoenix::tag::at_c, boost::proto::argsns_::list2<boost::proto::exprns_::basic_expr<boost::proto::tagns_::tag::terminal, boost::proto::argsns_::term<mpl_::int_<1> >, 0>, boost::phoenix::actor<boost::proto::exprns_::basic_expr<boost::phoenix::detail::tag::function_eval, boost::proto::argsns_::list3<boost::proto::exprns_::basic_expr<boost::proto::tagns_::tag::terminal, boost::proto::argsns_::term<boost::phoenix::stl::insert>, 0>, boost::phoenix::actor<boost::proto::exprns_::basic_expr<boost::proto::tagns_::tag::terminal, boost::proto::argsns_::term<boost::phoenix::argument<1> >, 0> >, boost::phoenix::actor<boost::proto::exprns_::basic_expr<boost::proto::tagns_::tag::terminal, boost::proto::argsns_::term<boost::phoenix::argument<2> >, 0> > >, 3> > >, 2> > *, std::map<int, int, std::less<int>, std::allocator<std::pair<const int, int> > > &, std::pair<int, int> &> &, const boost::phoenix::default_actions &, false>::operator()' requested here
                return what()(e, phoenix::env(s), actions(s));
                       ^
/usr/local/include/boost/phoenix/core/meta_grammar.hpp:34:9: note: in instantiation of member function 'boost::phoenix::evaluator::impl<const boost::phoenix::actor<boost::proto::exprns_::basic_expr<boost::phoenix::tag::at_c, boost::proto::argsns_::list2<boost::proto::exprns_::basic_expr<boost::proto::tagns_::tag::terminal, boost::proto::argsns_::term<mpl_::int_<1> >, 0>, boost::phoenix::actor<boost::proto::exprns_::basic_expr<boost::phoenix::detail::tag::function_eval, boost::proto::argsns_::list3<boost::proto::exprns_::basic_expr<boost::proto::tagns_::tag::terminal, boost::proto::argsns_::term<boost::phoenix::stl::insert>, 0>, boost::phoenix::actor<boost::proto::exprns_::basic_expr<boost::proto::tagns_::tag::terminal, boost::proto::argsns_::term<boost::phoenix::argument<1> >, 0> >, boost::phoenix::actor<boost::proto::exprns_::basic_expr<boost::proto::tagns_::tag::terminal, boost::proto::argsns_::term<boost::phoenix::argument<2> >, 0> > >, 3> > >, 2> > &, const boost::phoenix::vector2<boost::phoenix::vector3<const boost::phoenix::actor<boost::proto::exprns_::basic_expr<boost::phoenix::tag::at_c, boost::proto::argsns_::list2<boost::proto::exprns_::basic_expr<boost::proto::tagns_::tag::terminal, boost::proto::argsns_::term<mpl_::int_<1> >, 0>, boost::phoenix::actor<boost::proto::exprns_::basic_expr<boost::phoenix::detail::tag::function_eval, boost::proto::argsns_::list3<boost::proto::exprns_::basic_expr<boost::proto::tagns_::tag::terminal, boost::proto::argsns_::term<boost::phoenix::stl::insert>, 0>, boost::phoenix::actor<boost::proto::exprns_::basic_expr<boost::proto::tagns_::tag::terminal, boost::proto::argsns_::term<boost::phoenix::argument<1> >, 0> >, boost::phoenix::actor<boost::proto::exprns_::basic_expr<boost::proto::tagns_::tag::terminal, boost::proto::argsns_::term<boost::phoenix::argument<2> >, 0> > >, 3> > >, 2> > *, std::map<int, int, std::less<int>, std::allocator<std::pair<const int, int> > > &, std::pair<int, int> &> &, const boost::phoenix::default_actions &> &, boost::proto::envns_::empty_env>::operator()' requested here
        BOOST_PROTO_TRANSFORM(evaluator)
        ^
/usr/local/include/boost/proto/transform/impl.hpp:228:9: note: expanded from macro 'BOOST_PROTO_TRANSFORM'
        BOOST_PROTO_TRANSFORM_(PrimitiveTransform, void)                                                        \
        ^
/usr/local/include/boost/proto/transform/impl.hpp:213:16: note: expanded from macro 'BOOST_PROTO_TRANSFORM_'
        return boost::proto::detail::apply_transform<transform_type(Expr const &, State const &)>()(e, s, d);   \
               ^
/usr/local/include/boost/phoenix/core/meta_grammar.hpp:139:16: note: in instantiation of function template specialization 'boost::phoenix::evaluator::operator()<const boost::phoenix::actor<boost::proto::exprns_::basic_expr<boost::phoenix::tag::at_c, boost::proto::argsns_::list2<boost::proto::exprns_::basic_expr<boost::proto::tagns_::tag::terminal, boost::proto::argsns_::term<mpl_::int_<1> >, 0>, boost::phoenix::actor<boost::proto::exprns_::basic_expr<boost::phoenix::detail::tag::function_eval, boost::proto::argsns_::list3<boost::proto::exprns_::basic_expr<boost::proto::tagns_::tag::terminal, boost::proto::argsns_::term<boost::phoenix::stl::insert>, 0>, boost::phoenix::actor<boost::proto::exprns_::basic_expr<boost::proto::tagns_::tag::terminal, boost::proto::argsns_::term<boost::phoenix::argument<1> >, 0> >, boost::phoenix::actor<boost::proto::exprns_::basic_expr<boost::proto::tagns_::tag::terminal, boost::proto::argsns_::term<boost::phoenix::argument<2> >, 0> > >, 3> > >, 2> > &, const boost::phoenix::vector2<boost::phoenix::vector3<const boost::phoenix::actor<boost::proto::exprns_::basic_expr<boost::phoenix::tag::at_c, boost::proto::argsns_::list2<boost::proto::exprns_::basic_expr<boost::proto::tagns_::tag::terminal, boost::proto::argsns_::term<mpl_::int_<1> >, 0>, boost::phoenix::actor<boost::proto::exprns_::basic_expr<boost::phoenix::detail::tag::function_eval, boost::proto::argsns_::list3<boost::proto::exprns_::basic_expr<boost::proto::tagns_::tag::terminal, boost::proto::argsns_::term<boost::phoenix::stl::insert>, 0>, boost::phoenix::actor<boost::proto::exprns_::basic_expr<boost::proto::tagns_::tag::terminal, boost::proto::argsns_::term<boost::phoenix::argument<1> >, 0> >, boost::phoenix::actor<boost::proto::exprns_::basic_expr<boost::proto::tagns_::tag::terminal, boost::proto::argsns_::term<boost::phoenix::argument<2> >, 0> > >, 3> > >, 2> > *, std::map<int, int, std::less<int>, std::allocator<std::pair<const int, int> > > &, std::pair<int, int> &> &, const boost::phoenix::default_actions &> &>' requested here
        return e(expr, ctx);
               ^
/usr/local/include/boost/phoenix/core/detail/preprocessed/actor_operator_10.hpp:31:385: note: in instantiation of function template specialization 'boost::phoenix::eval<boost::phoenix::actor<boost::proto::exprns_::basic_expr<boost::phoenix::tag::at_c, boost::proto::argsns_::list2<boost::proto::exprns_::basic_expr<boost::proto::tagns_::tag::terminal, boost::proto::argsns_::term<mpl_::int_<1> >, 0>, boost::phoenix::actor<boost::proto::exprns_::basic_expr<boost::phoenix::detail::tag::function_eval, boost::proto::argsns_::list3<boost::proto::exprns_::basic_expr<boost::proto::tagns_::tag::terminal, boost::proto::argsns_::term<boost::phoenix::stl::insert>, 0>, boost::phoenix::actor<boost::proto::exprns_::basic_expr<boost::proto::tagns_::tag::terminal, boost::proto::argsns_::term<boost::phoenix::argument<1> >, 0> >, boost::phoenix::actor<boost::proto::exprns_::basic_expr<boost::proto::tagns_::tag::terminal, boost::proto::argsns_::term<boost::phoenix::argument<2> >, 0> > >, 3> > >, 2> >, boost::phoenix::vector2<boost::phoenix::vector3<const boost::phoenix::actor<boost::proto::exprns_::basic_expr<boost::phoenix::tag::at_c, boost::proto::argsns_::list2<boost::proto::exprns_::basic_expr<boost::proto::tagns_::tag::terminal, boost::proto::argsns_::term<mpl_::int_<1> >, 0>, boost::phoenix::actor<boost::proto::exprns_::basic_expr<boost::phoenix::detail::tag::function_eval, boost::proto::argsns_::list3<boost::proto::exprns_::basic_expr<boost::proto::tagns_::tag::terminal, boost::proto::argsns_::term<boost::phoenix::stl::insert>, 0>, boost::phoenix::actor<boost::proto::exprns_::basic_expr<boost::proto::tagns_::tag::terminal, boost::proto::argsns_::term<boost::phoenix::argument<1> >, 0> >, boost::phoenix::actor<boost::proto::exprns_::basic_expr<boost::proto::tagns_::tag::terminal, boost::proto::argsns_::term<boost::phoenix::argument<2> >, 0> > >, 3> > >, 2> > *, std::map<int, int, std::less<int>, std::allocator<std::pair<const int, int> > > &, std::pair<int, int> &> &, const boost::phoenix::default_actions &> >' requested here
        template <typename This, typename A0 , typename A1> struct result<This(A0 & , A1 &)> : result_of::actor<proto_base_expr, A0 & , A1 &> {}; template <typename A0 , typename A1> typename result_of::actor<proto_base_expr, A0 & , A1 &>::type operator()(A0 & a0 , A1 & a1) const { typedef vector3< const actor<Expr> *, A0 & , A1 & > env_type; env_type env = {this, a0 , a1}; return phoenix::eval(*this, phoenix::context(env, default_actions())); } template <typename A0 , typename A1> typename result_of::actor<proto_base_expr, A0 & , A1 &>::type operator()(A0 & a0 , A1 & a1) { typedef vector3< const actor<Expr> *, A0 & , A1 & > env_type; env_type env = {this, a0 , a1}; return phoenix::eval(*this, phoenix::context(env, default_actions())); } template <typename This, typename A0 , typename A1> struct result<This(A0 & , A1 const&)> : result_of::actor<proto_base_expr, A0 & , A1 const&> {}; template <typename A0 , typename A1> typename result_of::actor<proto_base_expr, A0 & , A1 const&>::type operator()(A0 & a0 , A1 const& a1) const { typedef vector3< const actor<Expr> *, A0 & , A1 const& > env_type; env_type env = {this, a0 , a1}; return phoenix::eval(*this, phoenix::context(env, default_actions())); } template <typename A0 , typename A1> typename result_of::actor<proto_base_expr, A0 & , A1 const&>::type operator()(A0 & a0 , A1 const& a1) { typedef vector3< const actor<Expr> *, A0 & , A1 const& > env_type; env_type env = {this, a0 , a1}; return phoenix::eval(*this, phoenix::context(env, default_actions())); } template <typename This, typename A0 , typename A1> struct result<This(A0 const& , A1 &)> : result_of::actor<proto_base_expr, A0 const& , A1 &> {}; template <typename A0 , typename A1> typename result_of::actor<proto_base_expr, A0 const& , A1 &>::type operator()(A0 const& a0 , A1 & a1) const { typedef vector3< const actor<Expr> *, A0 const& , A1 & > env_type; env_type env = {this, a0 , a1}; return phoenix::eval(*this, phoenix::context(env, default_actions())); } template <typename A0 , typename A1> typename result_of::actor<proto_base_expr, A0 const& , A1 &>::type operator()(A0 const& a0 , A1 & a1) { typedef vector3< const actor<Expr> *, A0 const& , A1 & > env_type; env_type env = {this, a0 , a1}; return phoenix::eval(*this, phoenix::context(env, default_actions())); } template <typename This, typename A0 , typename A1> struct result<This(A0 const& , A1 const&)> : result_of::actor<proto_base_expr, A0 const& , A1 const&> {}; template <typename A0 , typename A1> typename result_of::actor<proto_base_expr, A0 const& , A1 const&>::type operator()(A0 const& a0 , A1 const& a1) const { typedef vector3< const actor<Expr> *, A0 const& , A1 const& > env_type; env_type env = {this, a0 , a1}; return phoenix::eval(*this, phoenix::context(env, default_actions())); } template <typename A0 , typename A1> typename result_of::actor<proto_base_expr, A0 const& , A1 const&>::type operator()(A0 const& a0 , A1 const& a1) { typedef vector3< const actor<Expr> *, A0 const& , A1 const& > env_type; env_type env = {this, a0 , a1}; return phoenix::eval(*this, phoenix::context(env, default_actions())); }
                                                                                                                                                                                                                                                                                                                                                                                                ^
source.cpp:16:44: note: in instantiation of function template specialization 'boost::phoenix::actor<boost::proto::exprns_::basic_expr<boost::phoenix::tag::at_c, boost::proto::argsns_::list2<boost::proto::exprns_::basic_expr<boost::proto::tagns_::tag::terminal, boost::proto::argsns_::term<mpl_::int_<1> >, 0>, boost::phoenix::actor<boost::proto::exprns_::basic_expr<boost::phoenix::detail::tag::function_eval, boost::proto::argsns_::list3<boost::proto::exprns_::basic_expr<boost::proto::tagns_::tag::terminal, boost::proto::argsns_::term<boost::phoenix::stl::insert>, 0>, boost::phoenix::actor<boost::proto::exprns_::basic_expr<boost::proto::tagns_::tag::terminal, boost::proto::argsns_::term<boost::phoenix::argument<1> >, 0> >, boost::phoenix::actor<boost::proto::exprns_::basic_expr<boost::proto::tagns_::tag::terminal, boost::proto::argsns_::term<boost::phoenix::argument<2> >, 0> > >, 3> > >, 2> >::operator()<std::map<int, int, std::less<int>, std::allocator<std::pair<const int, int> > >, std::pair<int, int> >' requested here
  if (phx::at_c<1>(phx::insert(arg1, arg2))(map, value))
                                           ^
1 error generated. 
```

我即将用完如何正确评估插入结果的想法。任何帮助，将不胜感激。

编辑：我的问题的更广泛背景是我正在尝试使用 boost::spirit::qi 解析类似 C++ 的枚举。我发现的任何尝试实现相同目的的示例都不会检查重复的枚举成员。这里有两个相关规则的代码片段：

```
 enumerationMember = identifier[at_c<0>(_val) = _1] >
    // If there is an explicit value defined use it.
    ((lit('=') > int_[at_c<1>(_val) = _1]) |
    // Otherwise use the value of argument _r1 instead.
    eps[at_c<1>(_val) = _r1]);
  enumeration = lit("enum") > typeName[at_c<0>(_val) = _1] > lit(':') >
    enumerationType[at_c<1>(_val) = _1] > braceOpen >
    // Initialize _a with 0.
    eps[_a = 0] >
    // Zero or one comma separated list of members.
    -(enumerationMember(_a)[//_pass = boost::phoenix::at_c<1>( <- I'm looking for something like this..
      insert(at_c<2>(_val), _1)]
      // Set _a to the value of the last member + 1.
      [_a = at_c<1>(_1) + 1]
      % lit(',')) >
    braceClose; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T17:12:07.567

根据@llonesmiz 的评论，我找到了一种解决方法。核心问题似乎是在整个嵌套操作中没有正确传递参数（或者我在 boost::phoenix 上做的根本错误）：

phx::at_c<1>(phx::insert(arg1, arg2))(地图, 值)

其中由返回的动作`at_c`应该将两个参数映射和值转发给由返回的动作`insert`。

相反，以下方法确实有效：

phx::at_c<1>(phx::insert(arg1, arg2)(map, value))()

但是，在 boost::spirit::qi 解析器中，我无法直接访问 map，因为它是我的返回值之一，我需要惰性求值（这就是 boost::phoenix 的全部意义所在）。所以它似乎并不直接适用于这个（简化的）解析器规则：

```
 enumeration = lit("enum") > typeName[at_c<0>(_val) = _1] > braceOpen >
    // Initialize _a with 0.
    eps[_a = 0] >
    // Zero or one comma separated lists of members.
    -(enumerationMember(_a)
      // Only pass if the new member is unique.
      [_pass = at_c<1>(insert(at_c<2>(_val), _1))] // <- Error
      // Set _a to the value of the last member + 1.
      [_a = at_c<1>(_1) + 1]
      % lit(',')) >
    braceClose; 
```

我发现的解决方法是使用两个语义操作并将插入的结果临时存储到局部变量中：

```
 enumeration = lit("enum") > typeName[at_c<0>(_val) = _1] > braceOpen >
    // Initialize _a with 0.
    eps[_a = 0] >
    // Zero or one comma separated lists of members.
    -(enumerationMember(_a)
      // Temporarily store the result of insert into the local variable _b.
      [_b = insert(at_c<2>(_val), _1)]
      // Only pass if the previous insert was successful.
      [_pass = at_c<1>(_b)]
      // Set _a to the value of the last member + 1.
      [_a = at_c<1>(_1) + 1]
      % lit(',')) >
    braceClose; 
```

现在命名的规则的定义`enumeration`如下所示：

```
boost::spirit::qi::rule<Iterator, Enumeration(),
  boost::spirit::qi::locals<
    int, // _a
    std::pair<std::map<std::string, int>::iterator, bool> // _b
  >, space_type> enumeration; 
```

我想有一些比使用本地存储插入结果更优雅的方法。因此，我将暂时保留这个问题，以提供更优雅的答案。

# javascript - 在服务器上运行咖啡脚本

> ID：14911339
> 
> 赞同：0
> 
> 时间：2013-02-16T14:28:39.543
> 
> 标签：javascript, coffeescript

我已经从 Github 下载了[YouTube-Instant](https://github.com/feross/YouTube-Instant)，我正在尝试运行它。

它包括一个不运行的 .coffee 脚本文件。我搜索了如何运行咖啡脚本并找到[running-coffeescript-in-browser](http://forgivingworm.wordpress.com/2010/09/27/running-coffeescript-in-browser/)。我按照教程并包含了运行咖啡脚本的 javascript 文件，但我仍然无法运行该网站。

这是[我网站](http://startupsandfinance.com/yt2/)的链接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T14:53:57.383

You have to compile the main.coffee file with the command `coffee -c js/main.coffee` which will produce the main.js. Or, if you prefer the in-browser way it describes at the link you gave (which is not recommended), you also have to download [coffee-script.js](https://raw.github.com/jashkenas/coffee-script/master/extras/coffee-script.js) and have these two lines:

```
<script type="text/coffeescript" src="js/main.coffee"></script>
<script src="js/libs/coffee-script.js"></script> 
```

But then again, only the search box will be on the page(which works but it's invisible, you have to hover to see the cursor), as it states that it is 'unfinished coffee-script port' in the github repo link.

# performance - 用于实时、低延迟声音合成和快速处理的语言？

> ID：14911340
> 
> 赞同：2
> 
> 时间：2013-02-16T14:28:45.623
> 
> 标签：performance, audio, documentation, cross-platform, sound-synthesis

我是大学的一名 IT 学生，用 Visual Basic 编程了很长时间。在这里自学了 Java 和 C#（真的类似于 Java）。我也是一名音乐制作人，我想开始做一个大项目，只是为了我自己，为了好玩，为了扩展我的知识。

我想制作像 Cubase、Reaper 或 Fruity Loops 这样的 DAW（数字音频工作站）。从诸如声音音序器之类的小东西开始。我已经制作了一些流程图。

我想尽快开始编码，但 Java 是一种解释语言，如 SuperCollider 和 Python，处理起来很慢。Visual Basic 不是一个选项，我喜欢从它开始，但我不再喜欢它了。我不知道该不该用C#，我作为一个Linux爱好者，不想因为需要用Visual Studio就嫁给Windows。我知道有单声道。

什么是适合我的语言？会不会是什么东西：

1.  快速处理，尽可能不解释
2.  能够使我的软件跨平台。不需要重写所有代码，也许只是为不同的系统实现一些方法。
3.  有良好的文档。

我知道我的问题可能有点复杂，甚至可以被视为不成熟。但我需要帮助选择一门新的语言来学习。

感谢您花时间阅读本文。每一个答案都值得赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T19:52:48.630

看看用 C++ 编写的 Juce。

我知道一个非常流行的 DAW 是用 Juce 编写的。C++ 的额外好处是它功能强大且可移植。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T15:46:59.853

[Extempore](https://github.com/digego/extempore)快速且非常酷。这是一个相当新的项目，但它已被[用于一些非常酷的事情。](http://vimeo.com/52964510)

# android - 同一个包中的两个活动是否属于同一个线程？

> ID：14911345
> 
> 赞同：1
> 
> 时间：2013-02-16T14:29:09.203
> 
> 标签：android, android-activity, native-code

我在同一个包下有两个活动（主要活动和另一个活动）。有时我需要开始其他活动`startActivityForResult`。我有两个问题：

1.  这两个活动是否属于同一个线程？
2.  如果我在主要活动中加载本机库，我可以从其他活动中访问本机方法吗？

关于问题 2，假设有一个名为`NativeMethod1()`. 在主要活动中，像往常一样，我有以下声明：

```
public native void NativeMethod1(); 
```

并且在本机代码中，我将正确声明一个函数（使用 Java_com_mypackage_myapp_ 等 ..）。我为其他活动添加了类似的声明，并且在本机库中，我也添加了相应的方法声明。一切正常，但我担心我假设某些事情并不总是正确的。这将导致不可预测的崩溃。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T22:54:58.057

我不会将本机方法添加到您的`Activity`课程中。相反，创建一个可以在所有活动中使用的单例类。

现在就线程而言，是的，Android 的 UI 模型是单线程的（又名主线程或 UI 线程），因此您的所有活动都在主线程上运行。

当您执行长时间运行的操作时，不要阻塞 UI 线程，因为这会导致 ANR（活动无响应）情况，因此如果您在本机方法中做一些花哨的事情，您最好使用 an`AsyncTask`或 a`Service`或提出您自己的后台线程模型。

# javascript - 更大的 jQuery 项目是如何构建的，以及这样做的原因是什么

> ID：14911348
> 
> 赞同：1
> 
> 时间：2013-02-16T14:29:17.337
> 
> 标签：javascript, jquery, architecture

我正在使用不同的基于 OO 的语言开发桌面软件。从最近开始，我就没有接触过 Web 开发。我刚开始玩`jQuery`并`jQuery Mobile`构建简单的 Web 应用程序。

我注意到我的项目通常以一个 HTML 文件作为基础和一个包含方法、事件处理程序等的 *.js 文件结束。这有点像编程意大利面条代码，我想不出这怎么能用更多复杂的项目。（可重用性，性能，...）

通常的 jQuery-Tutorials 只是展示了一些简单的例子，这些例子可以很好地与“将所有方法放入一个脚本文件”的方法中。我还在某处读到，最好只提供一个大文件，因为只加载一个文件而不是很多小文件会更快。

有人能告诉我 jQuery 项目的结构有多大吗？原因是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-16T15:08:35.013

我将尝试将您的问题分解为较小的部分：

**“我注意到我的项目通常以一个 HTML 文件作为基础和一个包含方法、事件处理程序等的 *.js 文件结束。这有点像编程意大利面条代码，我想不出这怎么能用更复杂的项目。”**

听起来你的 OO 背景已经被你宠坏了。Javascript 不会强迫你使用它的原型继承，jQuery 也不会。尽管如此，*它还是存在的*。Douglas Crockford 写了一篇关于从经典的以 OO 为中心的继承到原型等价物的文章：[Javascript 中的原型继承](http://javascript.crockford.com/prototypal.html "Douglas Crockford 在 Javascript 中的原型继承")

**“通常的 jQuery-Tutorials 只是展示了一些简单的例子，这些例子可以很好地与“所有方法都放在一个脚本文件中”-方法一起使用。”**

是的，将所有代码放在一个文件中对于小型网站或网络应用程序来说可以正常工作，但它无法扩展。

但是，这与将所有 C 方法声明放在一个头文件中并将所有代码放在一个源文件中没有区别。我的意思是你也没有。

我建议你看看像[RequireJS](http://requirejs.org/ "要求JS")这样的脚本加载器来解决这个问题。在最坏的情况下，将脚本标签内联到 HTML 代码中仍然没有问题，但这也不能很好地扩展。

**“我还在某处读到，最好只提供一个大文件，因为只加载一个文件而不是很多小文件会更快。”**

嗯......是的，但在大多数情况下这可以忽略不计。即使您确实看到性能下降，为什么要将您的开发代码视为您的产品？使用[YUI Compressor](http://yui.github.com/yuicompressor/ "Github 上的 YUI 压缩器")等压缩工具来压缩和合并您的 JavaScript。没有污染的更小的加载时间。

最后一条建议：jQuery 不会帮助您解决 JavaScript 架构问题，就像字典不会帮助您构建句子一样。（换句话说，不要依赖 jQuery 示例来教你良好的 JavaScript 实践）。

# spring - spring jdbc 突然在 SingleColumnRowMapper 上抛出类未找到错误

> ID：14911349
> 
> 赞同：0
> 
> 时间：2013-02-16T14:29:26.333
> 
> 标签：spring, maven, spring-jdbc

我已经开发了大约 6 个月的 Spring 项目。这个项目是用 maven 和 spring 构建的。今天突然我发现代码的jdbc部分抛出了下面的错误。我最近在项目中对我的 Web 服务进行了一些更改，但自上次应用程序稳定运行以来，我没有更改任何 maven 配置或 spring 配置。我应该从哪里开始寻找错误？

任何评论表示赞赏。

```
Caused by: java.lang.NoClassDefFoundError: org/springframework/jdbc/core/SingleColumnRowMapper
    at org.springframework.jdbc.core.JdbcTemplate.getSingleColumnRowMapper(JdbcTemplate.java:1184)
    at org.springframework.jdbc.core.JdbcTemplate.queryForObject(JdbcTemplate.java:744)
    at com.pozitron.bkmtransfer.core.dao.AcsKeyAliasDaoImpl.findRsaPubKeyByBankId(AcsKeyAliasDaoImpl.java:43)
    at com.pozitron.bkmtransfer.services.core.CipherActionImpl.verify(CipherActionImpl.java:97)
    at com.pozitron.bkmtransfer.services.TransferActionImpl.transferMoney(TransferActionImpl.java:67)
    at com.pozitron.bkmtransfer.ws.endpoints.TransferEndPoint.transferMoney(TransferEndPoint.java:197)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T14:55:27.627

首先确保你的类路径中有这个类（jar）。如果您这样做，请确保您的类路径中只有一个版本的此类。如果您更改/添加了一些依赖项，则可能包含新 jar。

此外，如果您从 Eclipse 启动应用程序，那么您可能唯一需要做的就是执行 project->clean

PS您在编译时或运行时收到此错误吗？

# javascript - javascript滑块图片不居中

> ID：14911352
> 
> 赞同：0
> 
> 时间：2013-02-16T14:29:42.010
> 
> 标签：javascript, slider

我正在做一个 JavaScript 滑块来练习。

但是，滑块中的图片未居中。

这是链接：[http ://eddieli.org/flee/](http://eddieli.org/flee/)

我在编码的哪一部分做错了？

图片未与滑块对齐...

感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T15:04:17.940

好吧，我添加`position: relative; left: -40px;`到滑块的 li 中`#container #left_col #slider li`，它们对齐了，我不知道图像的大小，但是在做滑块本身之前，您必须始终检查起始位置，您必须检查所有样式是否合适。

# typo3 - TT_NEWS 在 Single/Latest implementation (TYPO3) 中强制显示最新消息

> ID：14911354
> 
> 赞同：2
> 
> 时间：2013-02-16T14:29:45.877
> 
> 标签：typo3, typoscript, tt-news

先生们，

我在同一页面上有一个很好的 SINGLE 和 Latest 的工作实现。我的真实网址运行良好。问题是，默认情况下，在您单击列出的新闻之一（由列表插件显示）之前，single 不会显示任何内容。我希望单个插件显示登陆的最新消息。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-08-10T13:41:18.243

**第一个解决方案**

[tt_news 手册](https://docs.typo3.org/typo3cms/extensions/tt_news/ExtNews/Configuration/TyposcriptExamples/Index.html)中描述了请求行为的解决方案：

> 默认新闻 ID
> 
> 如果没有请求其他记录的 SINGLE 视图，则将以下行插入到要在 SINGLE 视图中显示最新新闻项目的页面的 ext-template 的设置字段中：

```
# hide the "no news id" message
plugin.tt_news._LOCAL_LANG.default.noNewsIdMsg = &nbsp;
# set the tt_news singlePid to the current page
plugin.tt_news.singlePid = 977

# fill the content of the main-column to a tmp.object
tmp.pagecontent < page.10.subparts.contentarea

# clear the content of the main column
page.10.subparts.contentarea >

# build a new object for this column as content-object-array
page.10.subparts.contentarea = COA
page.10.subparts.contentarea {
  10 = CONTENT
  10.table = tt_news
  10.select {
# insert the pids of all pages from where you want to fetch news.
# the recursive-field has no influence on this selection
    pidInList = 1078,1079,1080,1081,1082,1083,1084
    orderBy = datetime desc
    max = 1
  }
# insert the object “10.” only if there is no SINGLE news selected
# ATTENTION, OUTDATED IN MANUAL, USE GP:... instead of GPvar:... !!!
  #10.stdWrap.if.isFalse.data = GPvar:tx_ttnews|tt_news
  10.stdWrap.if.isFalse.data = GP:tx_ttnews|tt_news
# re-insert the normal pagecontent to the page
  20 < tmp.pagecontent
} 
```

> 此示例中的页面包含 2 列。新闻列表位于左栏中。主列（page.10.subparts.contentarea）包含一个单一的新闻内容元素。

**第二个解决方案——我最喜欢的**

我个人最喜欢解决这个问题的方法更巧妙一些。它利用 noNewsIdMsg（在上述解决方案中简单地清空）并使用其 stdWrap 版本准确显示通常何时出现“无新闻 ID”消息的最新记录。

```
# use the "no news id" message position for the latest news record
plugin.tt_news.singlePid = 977
plugin.tt_news.noNewsIdMsg_stdWrap.cObject = COA
plugin.tt_news.noNewsIdMsg_stdWrap.cObject {
  10 = CONTENT
  10.table = tt_news
  10.select {
    # insert the pids of all pages from where you want to fetch news.
    # the recursive-field has no influence on this selection
    pidInList = 1078,1079,1080,1081,1082,1083,1084
    orderBy = datetime desc
    max = 1
  }
} 
```

请注意，在这两种解决方案中，用于插入默认记录的模板子部分不是###TEMPLATE_SINGLE###，而是###TEMPLATE_SINGLE_RECORDINSERT###。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T17:46:21.953

为什么不使用“单个/最新”视图显示单个视图（如果已提交）和最新的（如果没有请求单个视图）。在此插件中，将最新的新闻限制设置为“1”。

下面添加另一个最新（或列表），新闻限制设置为 3（或根据需要）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T04:35:49.163

[安全单一](http://typo3.org/extensions/repository/view/cablan_safe_single_news)新闻扩展

> 添加了一个新的 tt_news 代码：SAFE_SINGLE，它确保即使未指定任何新闻文章也会显示单个新闻文章。如果选择了一篇新闻文章，它将简单地显示它。如果没有选择，它将显示配置类别的最新新闻文章。

也许它可以帮助你。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-18T04:23:25.360

一种解决方案是更改该特定新闻插件中最新视图的文本限制，如下所示：

```
plugin.tt_news.displayLatest.subheader_stdWrap.crop = 10000 | ... | 1 
```

并且还提供了一个单独的模板文件，没有

```
<!--###LINK_ITEM###--> 
```

最新视图部分中的标记。

# java - 将 ActionListener 添加到控制器（MVC）中的 swixml 不起作用

> ID：14911355
> 
> 赞同：1
> 
> 时间：2013-02-16T14:29:49.677
> 
> 标签：java, swing, model-view-controller, swixml

嗨，我在 Java 中遇到了 swixml 的问题。我需要创建简单的应用程序，但在 MVC 中，因为应用程序的形式很少。

不幸的是，试图`ActionListener`在控制器中添加查看按钮最终缺乏响应。

在 View 类中，我有`JButton`与 XML 中的 id 按钮同名的属性。

我控制器添加了代码：

```
 actionListener = new ActionListener() {
    public void actionPerformed(ActionEvent actionEvent){
     System.exit(0);
     // menuItemControl();                
    }
 };

    view.app_close.addActionListener(actionListener); 
```

**视图是：**

```
public class View extends WindowAdapter{
public JMenuItem menuItem;
public JMenuBar menuBar;
public JMenu menu;
public JPanel film_form;
public JLabel label;
public JTextField textField;
public JTextArea textArea;
public JButton app_close;
public SwingEngine se;

public View() throws Exception {
   se = new SwingEngine(this);
   se.render("xml/view.xml");
  }
} 
```

当我单击 app_close - 应用程序没有反应。

有什么想法可以帮助我吗？谢谢

* * *

编辑

感谢您的回答，更多代码：

主班

```
 package pl.kramarczykrent;

import javax.swing.SwingUtilities;
import pl.kramarczykrent.controllers.Controller;
import pl.kramarczykrent.views.*;
public class Kramarczykrent {

       public static void main(String[] args) {           
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {                                           
                //Model model = new Model(0);
                try{
                    View view = new View();
                    view.se.getRootComponent().setVisible(true);
                     Controller controller = new Controller(view);
                controller.control();
                } catch(Exception e)
                {
                        }

            }
        });  
    }
} 
```

模型在这个时候是空的

查看课程

```
 package pl.kramarczykrent.views;
import org.swixml.SwingEngine;
import java.awt.event.WindowAdapter;
import java.awt.event.WindowEvent;
import java.awt.event.ActionListener;
import javax.swing.*;
import java.awt.event.ActionEvent;

public class View extends WindowAdapter{
    public JMenuItem menuItem;
    public JMenuBar menuBar;
    public JMenu menu;
    public JPanel film_form;
    public JLabel label;
    public JTextField textField;
    public JTextArea textArea;
    public JButton app_close;
    public SwingEngine se;

    public View() throws Exception {
       se = new SwingEngine(this);
       se.render("xml/view.xml");

}

} 
```

视图.xml

```
 <?xml version="1.0" encoding="UTF-8"?>
<frame id="frame" title="Wypożyczalnia dzikiego złesiora" size="1000,720" defaultCloseOperation="JFrame.EXIT_ON_CLOSE">
    <menubar id="mb">
        <menu id="m_film" text="Filmy">
            <menuitem id="film_new" text="Nowy"></menuitem>
            <menuitem id="film_list" text="Lista"></menuitem>
            <menuitem id="film_rent" text="Wypożycz"></menuitem>
            <menuitem id="film_return" text="Zwrot"></menuitem>
            <menuitem id="film_type" text="Gatunki"></menuitem>
        </menu>
        <menu id="m_klient" text="Klienci">
            <menuitem id="klient_new" text="Nowy"></menuitem>
            <menuitem id="klient_list" text="Lista"></menuitem>
        </menu>
        <menu id="m_pracownik" text="Pracownicy">
            <menuitem id="pracownik_new" text="Nowy"></menuitem>
            <menuitem id="pracownik_list" text="Lista"></menuitem>
            <menuitem id="pracownik_type" text="Stanowiska"></menuitem>0
        </menu>
        <menu id="m_program" text="Program">
            <menuitem id="app_close" text="Zamknij"></menuitem>
        </menu>
    </menubar>
    <panel id="film_form" visible="false">
        <vbox>
            <label text="Tytuł filmu"></label>
            <label text="Język"></label>
            <label text="Reżyser"></label>
            <label text="Rok produkcji"></label>
            <label text="Opis"></label>
            <label text="Rodzaj nośnika"></label>
            <label text="Jakość"></label>
            <label text="Czas trwania w minutach"></label>
            <label text="Ilość płyt w zestawie"></label>
            <label text="Cena za wypożyczenie"></label>
            <label text="Wiek od"></label>
            <label text="ID"></label>
        </vbox>
        <vbox>
            <textfield columns="20" text="" id="film_tytul"></textfield>
            <textfield columns="20" text="" id="film_jezyk"></textfield>
            <textfield columns="20" text="" id="film_rezyser"></textfield>
            <textfield columns="20" text="" id="film_rok_produkcji"></textfield>

        </vbox>

    </panel>
</frame> 
```

控制器

```
 package pl.kramarczykrent.controllers;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import org.swixml.SwingEngine;
import pl.kramarczykrent.views.*;

public class Controller {
    private View view;
    private ActionListener actionListener;

    public Controller( View view)
    {
        this.view=view;

    }

    public void control(){

    actionListener = new ActionListener() {
    public void actionPerformed(ActionEvent actionEvent){
     System.exit(0);
     // menuItemControl();

    }

        };

    view.app_close.addActionListener(actionListener);

    }

    private void menuItemControl(){
        System.exit(0);
    }
} 
```

每个文件都在其他包中，但导入正常。

以上是现在使用的所有类。

雷德加斯

# android - 钛指数.html

> ID：14911356
> 
> 赞同：0
> 
> 时间：2013-02-16T14:29:59.103
> 
> 标签：android, mobile, titanium, appcelerator

我刚刚安装了钛和 android sdk 进行开发。在我的项目中，我有一个 index.html，但它没有加载，当我进行构建时，它一直在加载一个“欢迎使用钛”的 html 页面，对于我的生活，我无法找到任何地方来查看它的加载位置从。

我到底如何将*我的*index.html 设置为应用程序首次加载时加载的那个？我试过添加

index2.html（index2 作为测试），但即使我创建了一个新的空白项目，它仍然会加载这个对钛 URL 的欢迎。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T16:56:00.587

Sounds like you created a default alloy project, all the `app/controllers/index.xml` file does is load another controller, probably called FirstView or something like that. Look through your `views` directory inside the `app` directory for another `.xml` file.

The structure of Alloy is that the `index.xml` file is loaded first no matter what, so it is not even recognizing your `index2.xml`. I would highly recommend you go through the [Alloy Quick Start](http://docs.appcelerator.com/titanium/latest/#!/guide/Alloy_Quick_Start) to get the general concepts first.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-01T06:13:05.767

我认为您正在使用钛合金。

如果是这样，您的文件应该是 index.xml 而不是 index.html

index.xml 包含作为节点的子节点。

对于允许项目，您可以找到 index.xml 文件，对于同一个文件，文件夹 app/controller/index.js 中有一个控制器文件。

在 index.js 文件中必须有以下行

 ****```
index.open() 
```** 

**此行将在您的应用程序中打开 index.xml 文件。**

 ****注意：**如果您在 xml 中为窗口节点提供了 id 属性，那么您应该使用 $..open()。这应该可以正常工作。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-01-26T10:07:36.493

它应该是`index.xml`，body应该是这样的：

```
<Alloy>
    <Window id="xyz">
    </Window>
</Alloy> 
```

然后应该有一个`index.js`文件，你必须通过 id 调用这个 xml 文件：

```
$.xyz.open(); 
```****

# opencv - 如何在 ubuntu 12.04 中安装 OpenCV

> ID：14911365
> 
> 赞同：14
> 
> 时间：2013-02-16T14:30:52.357
> 
> 标签：opencv, installation, ubuntu-12.04, ros

我已经`OpenCV2.4.2`在我的计算机中安装了 ROS(Fuerte) 的一部分（从 Ubuntu 软件中心安装，由于 ROS）。我应该如何独立安装 OpenCV？

我浏览了本[指南并从](http://opencv.willowgarage.com/wiki/InstallGuide)[这里](http://sourceforge.net/projects/opencvlibrary/files/opencv-unix/2.4.3/)下载了 opencv 包。我不太清楚如何进行。谁能给出安装步骤的简短列表？我想为我的项目使用 IDE，那么哪个 IDE 适合 C++ 以及如何安装正确的 IDE 并正确配置它？

另外如何检查是否安装了某些工具？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-16T23:43:47.440

[您还提到的此链接](http://opencv.willowgarage.com/wiki/InstallGuide)描述了在您的机器上编译 OpenCV 的必要步骤。你用这种方式安装的 OpenCV 版本会比随 ROS 包安装的版本更新，它们通常会有一些延迟。（也许不是富尔特。）

在一台机器上使用同一个库的多个版本可能会导致链接问题，这会让你有点头疼，所以我会避免它。

尝试运行*pkg-config opencv --libs*以查看 Fuerte 提取的 ROS 版本是否可用，您可以稍后将其用于您的项目。

对于初学者 IDE，我会推荐 Qt Creator。在 Qt Creator 中使用您的项目设置 OpenCV 的简单方法如下：

1.  创建项目
2.  打开项目的.pro文件
3.  运行*pkg-config opencv --cflags*
4.  将此添加到 .pro 文件中：INCLUDEPATH += __result__of__above
5.  *pkg-config opencv --libs*
6.  将此添加到 .pro 文件中：LIBS += __result__of__above

最后，您添加的内容应如下所示：

INCLUDEPATH += -I/opt/ros/fuerte/include

LIBS += -L/opt/ros/fuerte/lib -lopencv_calib3d -lopencv_contrib -lopencv_core -lopencv_features2d -lopencv_flann -lopencv_gpu -lopencv_highgui -lopencv_imgproc -lopencv_legacy -lopencv_ml -lopencv_nonfree -lopencv_objdetect -lopencv_photo -lopencv_stitching -lopencv_tstablopencvvideo

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-26T12:17:54.103

在 Ubuntu 上使用终端安装 OpenCV：

```
$ su -
# apt-get update
# apt-get install build-essential
# apt-get install libavformat-dev
# apt-get install x264 v4l-utils ffmpeg
# apt-get install libcv2.3 libcvaux2.3 libhighgui2.3 python-opencv opencv-doc libcv-dev libcvaux-dev libhighgui-dev 
```

OpenCV 应该安装在**/usr/local/**安装目录

您可能还想编译和查看示例

```
$ cp -r /usr/share/doc/opencv-doc/examples .
$ cd examples
$ cd c
$ sh build_all.sh 
```

[您可以在http://namhuy.net/1205/how-to-install-opencv-on-ubuntu.html](http://namhuy.net/1205/how-to-install-opencv-on-ubuntu.html)上从 Nam Huy Linux 博客阅读有关如何在 Ubuntu 上安装 OpenCV 的完整文章

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-10-06T03:58:53.860

这个 github 用户使用 shell 脚本编译了所有的安装步骤。您可以通过在内部运行适当的 shell 脚本来安装所需的任何 OpenCV 版本。

```
$ git clone https://github.com/jayrambhia/Install-OpenCV.git
$ cd Ubuntu
$ chmod +x * 
$ ./opencv_latest.sh 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-11-30T09:05:19.557

有一个适用于 Ubuntu 16.04 的安装程序，它可能在 Ubuntu 12.04 上运行良好，您可以尝试一下。我已经用它在 Ubuntu 16.04 上安装并且成功了！

[在 Ubuntu 16.04 LTS 上安装 openCV 的交互式安装脚本](https://github.com/osgee/opencv_installer/blob/master/opencv_installer.sh)

# wordpress - 在 wordpress woocommerce 中更改货币的最佳方法是什么？

> ID：14911368
> 
> 赞同：1
> 
> 时间：2013-02-16T14:31:10.020
> 
> 标签：wordpress, woocommerce

我使用的基于 n woocomeerce 的模板中的默认货币是英镑。目标国家的货币不同。根据搜索，我发现了几种更改货币的方法。什么是最好的方法？

[http://www.kriesi.at/support/topic/change-of-the-woocommerce-price-currency](http://www.kriesi.at/support/topic/change-of-the-woocommerce-price-currency)

[http://wcdocs.woothemes.com/snippets/add-a-custom-currency-symbol/](http://wcdocs.woothemes.com/snippets/add-a-custom-currency-symbol/)

此外，`function.php`代码应该包含在哪个文件中？（`wootemplate`文件夹内或`wp-includes`目录内的一个）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-13T13:13:44.770

使用上述问题中提到的任何链接。将代码添加到主题的functions.php中。如果使用子主题，请将其添加到子主题的 functions.php 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-07T10:45:15.880

在这里您可以检查此代码：

```
add_filter('woocommerce_currency_symbol', 'change_currency_symbol', 10, 2);
function change_currency_symbol( $currency_symbol, $currency ) {
switch( $currency ) {
case 'AUD': $currency_symbol = 'AUD $'; break;
}
return $currency_symbol;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-03-25T05:07:50.037

如果您想在您的商店使用多种货币，请尝试使用 wordpress 插件来实现此功能。但您必须从 woo-commerce 端更改设置以进行结帐页面和运费计算。插件将在商店切换货币，但只有少数插件能够在购物车和结帐页面以及计算运费时管理相同的货币。

# javascript - 这个 HTML 代码是什么意思？

> ID：14911369
> 
> 赞同：2
> 
> 时间：2013-02-16T14:31:15.400
> 
> 标签：javascript, html, css

我查看了一些源代码，发现了这样的内容：

```
<div class="classname {height: 300px; width: 200px}"></div> 
```

我知道元素样式可以通过使用`style=""`属性来获得。

你能告诉我这段代码是什么意思吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-16T14:32:23.033

它本身在 HTML 规范中没有任何意义。您正在查看的网站可能正在使用一些 javascript 代码来解释此`class`属性并根据其解析的值执行一些操作。没有javascript，这什么也做不了。在 HTML 中，该`class`属性用于指定与该元素关联的 CSS 类名。

例如，[jQuery.validate](http://bassistance.de/jquery-plugins/jquery-plugin-validation/)插件使用类似的技术，允许您指定内联验证规则。实际上，插件使用`data-*`属性，而不是在`class`语义上更适合这类任务。

# scala - 如何在验证数据库对象时以功能方式累积错误？

> ID：14911370
> 
> 赞同：1
> 
> 时间：2013-02-16T14:31:16.500
> 
> 标签：scala, salat

我有`Product`案例类，由 DAO 层返回（使用 Salat）。第一次创建产品的用户状态保持为“草稿”，其中没有（产品）字段是强制性的。

验证 10 个产品属性、将所有验证错误累积到一个实体中然后以 JSON 格式一次将所有错误传递到前端的最佳功能方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T15:35:56.933

我认为问题的核心是如何累积错误——JSON 格式是一个单独的问题，并不取决于您如何收集错误。

如果真的只是验证问题，可以有一系列方法

```
def problemWithX: Option[String] = ... 
```

`Some(errorMessage)`如果它们无效或正常，则返回`None`。然后就这么简单

```
List(problemWithX, problemWithY, ...).flatten 
```

创建所有错误的列表。如果您的列表是空的，那么您就可以开始了。如果没有，则列出了错误。创建一些合理的错误报告是该`problemWithX`方法的工作——当然您需要决定是否只需要一个字符串或更复杂的信息。（您甚至可能需要定义一个`Invalid`特征并让类对其进行扩展以处理不同的条件。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T17:23:51.260

这正是 ScalaZ 的`Validation`类型的用途。

# java - Android - 如何正确设计和实例化 Activity 之外的类以访问 ctx/activity？

> ID：14911371
> 
> 赞同：2
> 
> 时间：2013-02-16T14:31:28.307
> 
> 标签：java, android, oop

我的应用程序越来越大。

为了使其健壮，我决定将其拆分为活动之外的单独类，每个类代表一组活动功能。

问题是，我经常需要这些类中的上下文/活动变量。

这让我感到困惑：

我应该“扩展” MainActivity 类，然后使用 parents() 获取 context/actvitiy 方法，还是应该使用 Context/Activity 变量实例化每个类，如下所示：

```
static private BrowseHandler instance;

static public void init(Context ctx, FragmentActivity ac) {
    if (null==instance) {
        instance = new BrowseHandler(ctx, ac);
    }
}
static public BrowseHandler getInstance() {
    return instance;
} 
```

哪种方法更好？

或者，我是否错过了重点？我应该将我的活动代码保存在我的活动中吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T15:04:47.467

不要将其`Context`放在静态字段中。静态变量由类的所有实例共享，因此将上下文放在静态变量中会降低类的可重用性，因为它只能在一个上下文中使用。（用于初始化静态字段的上下文）。

相反，当您调用不在 Activity 中的代码时，将上下文作为方法参数传递。

关于您扩展 MainActivity 的想法......这似乎是一个奇怪的模式。将如何实例化它？

```
new MyExtendedMainActivity(this); 
```

扩展 MainActivity 没有真正的附加值。唯一的缺点是：你不能扩展其他东西。此外，您将拥有 Android 操作系统无法处理的 Activity 对象。请记住，在 android 中，您永远不会自己实例化活动：android 框架会为您完成它，而您只有回调来配置它。

# c# - 使用哪种 Windows Azure 技术？

> ID：14911377
> 
> 赞同：0
> 
> 时间：2013-02-16T14:31:48.280
> 
> 标签：c#, web-services, architecture, azure

我搜索了几个小时并阅读了很多东西，但我似乎太笨了，无法找到正确的答案。

我想创建一个 azure web 服务。而且我不确定应该使用 azure 的哪种技术...

在我开始深入阅读该主题之前，我想确定我正在阅读正确的主题......

我想创建一个应该能够被很多客户使用的应用程序。（因此很重要的是，100 个和 1.000.000 个用户可以很容易地与该服务进行通信。azure 易于扩展，这就是我决定使用 azure 的原因）

每个客户都可以购买订阅，然后能够使用其用户名和 ID 连接到服务。

每个客户都可以使用不同的客户端（例如浏览器、Windows 客户端、iOS、android ......）连接到服务

我已经知道的是数据层（数据访问组件连接到 azureSql，...）和业务层将如何工作。（业务层应用程序外观在 C#.net 中，并且能够在 azure 应用程序中运行）

客户端也无关紧要。

我只需要弄清楚业务外观和所有将使用它们的外部系统（即客户端）之间的通信

那么：我应该使用什么作为服务层的技术？哪些消息类型，...

重要的是，如果众多最终用户中的一个通过两个不同的客户端（使用相同的用户名和密码）与服务进行通信，并且客户端可以说正在通过业务层更改某些内容，那么将在每个客户端上呈现的数据必须更改，另一个客户端必须立即收到该更改。（同时：一个客户端的一次更改，将影响当时连接的一个用户的所有其他客户端）如果他们没有连接，他们将在下次登录时获得更改...

我的意思是，客户使用哪个客户端根本不重要（或者如果不止一个，也不重要）

因为无论如何每个客户端都提供相同的功能：有一个登录，然后用户将看到一些数据并可以处理这些数据。

如果在消息传递和沟通方面经验丰富的人可以通过告诉我正确的方式来帮助我，那将是完美的......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T18:02:37.630

你的问题很难简洁地回答。

但是，这里有一些提示可以帮助您入门：

如果您愿意，完全可以构建托管在 Azure 中的服务来处理数百万用户。这就是 Halo4 团队在 Azure 上构建所有服务的原因！

由于您希望您的用户能够从浏览器和运行在不同平台上的应用程序访问您的服务，因此您需要将服务构建为三个主要部分：

1.  公开基于 HTTP 的 API 的服务，任何可以通过 HTTP(S) 与 XML/JSON 通信的东西都可以访问，包括...
2.  一个 HTML5 网站，允许您的用户通过 Web 浏览器访问您的系统
3.  [可选] 移动应用程序提供特定于平台的系统体验。

您很可能需要将 API 层构建并公开为一个或多个[REST](http://en.wikipedia.org/wiki/Representational_State_Transfer)服务，这些服务接受包含 JSON/XML 数据的 HTTP GET/POST/PUT/DELETE 消息。

如果您打算使用 Microsoft 的 .NET 堆栈来构建此 API 层，我强烈建议您开始阅读[ASP.NET Web API](http://www.asp.net/web-api)。

当然，您的网站可以使用 ASP.NET 构建。[我更喜欢使用ASP.NET MVC](http://www.asp.net/mvc/mvc4)构建网站，因为我更喜欢[MVC](http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller)方法提供的关注点的清晰分离。话虽如此，如果您愿意，没有什么可以阻止您使用[ASP.NET Web 窗体构建您的站点。](http://www.asp.net/web-forms)

如果您想构建特别动态的服务，您还可以使用[SignalR](http://signalr.net/)等技术来构建服务，这些服务可以动态地将数据更改通知广播到多个浏览器页面、多个浏览器以及多人在多个设备上运行的多个应用程序！

当然，构建可以扩展以处理数千个并发用户的系统需要仔细考虑、计划和实验。如果你以前没有这样做过，你将不得不做大量的阅读和大量的实验，但这样做，你也会有很多乐趣:)

幸运的是，Azure 提供了几项重要的技术，使构建这样的云规模系统变得更加容易，包括缓存、排队、移动通知、关系数据库、表/队列/blob 存储、联合身份验证、PAAS 角色、IAAS 虚拟机实例、CDN 等.

老实说，我想不出有多少系统不能在 Azure 强大的基础架构上构建。

但是，我建议从小处着手。首先专注于构建系统的一个核心部分。了解它是如何工作的，如何部署它，如何监控它，如何衡量它的性能和可靠性，如何修补和更新它。然后咬下另一块并重复。

哦...如果您打算使用 PAAS/IAAS 角色/VM，请务必在不开发/测试时将其关闭并删除它们，因为您将按它们运行的​​每一小时计费，无论是不是您正在使用它们或将任何东西部署到这些实例！

至于您想要构建以访问您的服务的各种应用程序，您有很多选择。要考虑的一件事可能有助于简化您的选择是[Mono](http://mono-project.com/Main_Page)。Mono 是 .NET 的开源实现，几乎可以在您可能遇到的所有平台上运行 - Linux、Android、iOS、OSX、Windows Phone、Windows 桌面、Windows 8、Play Station、XBox 等。通过使用Mono，并仔细构建您的应用程序，您将能够在针对多个平台的多个应用程序中重用大量代码。

祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T18:01:15.017

我在这里没有看到任何特定于 Azure 的内容。

我会推荐[SignalR](http://signalr.net/)，这是 .Net 中用于“近乎实时的消息传递”的一个非常好的库。无论是否在 Azure中，都可以在 .Net 环境中轻松设置（[例如使用 Asp.Net 的 Web 应用程序）。](http://www.asp.net/signalr)

我听说过一些用于 Android 和 IO 的 signalR 客户端，但您应该看看它们是否成熟并满足您的需求。

# paypal - 一旦付款状态从待处理更改为完成/失败，paypal 是否会重新发送 IPN？

> ID：14911378
> 
> 赞同：3
> 
> 时间：2013-02-16T14:31:50.877
> 
> 标签：paypal, paypal-ipn

我已经进行了一些搜索，但找不到明确的答案！

我得到“已验证”和“待处理”，所以我可以将我的订单从“已放置”到“进行中”，但需要完整/失败，然后我可以转移到“已付款”和“已取消”。

任何人对此都有明确的结论，或者它是一个等待游戏直到测试付款完成（不使用沙盒）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T19:16:18.300

如果付款处于“待处理”状态，当付款清除、失败或被拒绝时，您会收到另一个 IPN。

此外，一旦您收到 Payment_staus=completed，这里有一些好东西要检查

*   检查“txn_id”是否重复，以防止欺诈者重复使用已完成的旧交易
*   验证“receiver_email”是在您的 PayPal 帐户中注册的电子邮件地址，以防止付款被发送到欺诈者的帐户
*   检查其他交易详情，例如商品编号和价格，以确认价格没有更改

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T23:52:30.800

你会得到另一个 IPN（*不是*“重新发送”），相同的 txn_id，payment_status='Completed'。

# c# - 从 datagridview 到 SSCE 的 DML 查询执行

> ID：14911391
> 
> 赞同：0
> 
> 时间：2013-02-16T14:33:06.193
> 
> 标签：c#, datagridview, sql-server-ce, dml

**我正在尝试做的事情：**

`SSCE`使用`Datagridview`和 命令按钮在数据库 ( ) 中执行 DML 语句。

**问题：**

我收到与这篇文章完全相同的错误：[SQL [错误]：解析查询时出错。[令牌行号= 1，令牌行偏移量= 44，错误令牌= - ]](https://stackoverflow.com/questions/9875570/sql-error-there-was-an-error-parsing-the-query-token-line-number-1-token)

基于这些答案和网络上提供的其他答案，我已经验证了查询字符串，但无法解决它。还有一个方面我有疑问。

```
private void button2_Click(object sender, EventArgs e)
        {
            using (SqlCeConnection CONN = new SqlCeConnection("Data 
                                          Source=LocalDBSSCompactEdition.sdf;"))
            {
                SqlCeCommand comm = new SqlCeCommand();
                comm.Connection = CONN;
                CONN.Open();
                int i = dataGridView2.Rows.Count-1;

                    String queryString = @"INSERT INTO tblEmployee VALUES ("
                    + dataGridView2.Rows[i].Cells["E_ID"].Value + ", "
                    + dataGridView2.Rows[i].Cells["FirstName"].Value + ", "
                    + dataGridView2.Rows[i].Cells["LastName"].Value + ", "
                    + dataGridView2.Rows[i].Cells["DeptID"].Value + ");";
                    comm.CommandText = queryString;
                    comm.ExecuteNonQuery();

            }
        } 
```

1）`E_ID`列是`IDENTITY`（自动增量）。但是我收到一个错误，说我必须包含 DataGridview 中的所有列才能匹配数据库表。这可能是我遇到的问题还是我的语法？

2）我想使用按钮单击事件将新行/更新/删除的行从 Datagridview 插入到数据库表中。这是这样做的有效方法吗？

感谢您对正确方向的一些见解。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T14:54:04.180

我设法解决了它。我不相信回答我自己的问题。刚刚添加了答案，希望将来有人参考。

1)`i`变量指的是`datagridview`...中的一个空行，因此要插入的值为 null 并且这些列是指定的`NOT NULL`...

`INSERT`2) 第一条规则是当 ID 列是自动递增时遵循通常的语句。因此，我指定了要为其插入数据的列。

3）我输入的数据没有被引用来处理`String`。固定的。

```
private void button2_Click(object sender, EventArgs e)
        {
            using (SqlCeConnection CONN = new SqlCeConnection("Data Source=LocalDBSSCompactEdition.sdf;"))
            {
                CONN.Open();
                SqlCeCommand comm = CONN.CreateCommand();                
                int i = dataGridView2.Rows.Count-1;

                    String queryString = @"INSERT INTO tblEmployee (FirstName, LastName, DeptID) VALUES ('"                    
                    + dataGridView2.Rows[5].Cells["FirstName"].Value + "','"
                    + dataGridView2.Rows[5].Cells["LastName"].Value + "',"
                     + dataGridView2.Rows[5].Cells["DeptID"].Value + ");";
                    comm.CommandText = queryString;
                    comm.ExecuteNonQuery();
                    CONN.Close();    
            }
        } 
```

# iphone - iOS - 每次应用程序从后台返回时如何设置滑块的默认值？

> ID：14911392
> 
> 赞同：0
> 
> 时间：2013-02-16T14:33:07.613
> 
> 标签：iphone, ios, slider

我的应用中有这个滑块

```
- (IBAction)slider1:(id)sender
{
    UISlider *slider = (UISlider *)sender;  //declare slider
    NSLog(@"%f",slider.value;
} 
```

每次应用程序从后台返回时，如何设置滑块的默认值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T14:36:25.287

`UIApplicationWillEnterForegroundNotification`为通知添加观察者。

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(willEnterForeground:) name:UIApplicationWillEnterForegroundNotification object:nil];

- (void)willEnterForeground:(NSNotification *)n {
    self.slider.value = 0.0f;
} 
```

# c# - 如何反序列化 Json 多个结果？

> ID：14911398
> 
> 赞同：0
> 
> 时间：2013-02-16T14:33:33.080
> 
> 标签：c#

我有如下字符串（2 行在一个字符串变量中），如何在 C# 中使用 JsonConvert 类将其分成 2 个字符串并反序列化

```
 {"operation":"waiting","wait":12121212}
 {"operation":"result","firstname":"bill", "lastname":"last"} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T14:35:06.120

您可以使用新的行分隔符将字符串拆分为字符串数组，然后 JSON 反序列化每一行。要拆分字符串，您可以使用该[`Split`](http://msdn.microsoft.com/en-us/library/system.string.split.aspx)方法。

例如：

```
string input = "... your input string ...";
string[] lines = input.Split(new[] { Environment.NewLine }, StringSplitOptions.RemoveEmptyEntries);
foreach (string line in lines)
{
    // you could use a JSON serializer here to deserialize the line
    // and possibly add it to some result collection
} 
```

# android - RestTemplate 使用 setContentType(MediaType.MULTIPART_FORM_DATA) 发布 UTF-8 数据

> ID：14911399
> 
> 赞同：1
> 
> 时间：2013-02-16T14:33:43.470
> 
> 标签：android, spring, utf-8, resttemplate

我正在为android使用spring。我想在我的 android 应用程序中创建注册表单。用户可能会使用 utf-8 格式填写表格，但是当数据发送到服务器并存储在 MySQL 数据库中时，我发现?????? 在我的数据库 field.table 的列类型设置为 utf8_general_ci。我的问题是：我需要在 php 页面中为内容类型设置一些内容，还是需要在我的 android 代码中设置 UTF-8？我应该为他们俩做些什么？这是我正在使用的代码：我和[这里一样](https://github.com/SpringSource/spring-android-samples/blob/master/spring-android-showcase/client/src/org/springframework/android/showcase/rest/HttpPostFormDataActivity.java)

```
File cacheDirectory = context.getFilesDir();
tmpFile = new File(cacheDirectory.getPath() + "/" + "avatar.png");
Resource file = new FileSystemResource(tmpFile);

MultiValueMap<String, Object> formData = new LinkedMultiValueMap<String, Object>();
formData.add("firstName", registerFields[0]);
formData.add("lastName", registerFields[1]);
formData.add("userName", registerFields[2]);
formData.add("file", file);

HttpHeaders requestHeaders = new HttpHeaders();
requestHeaders.setContentType(MediaType.MULTIPART_ FORM_DATA);
HttpEntity<MultiValueMap<String, Object>> requestEntity = new        HttpEntity<MultiValueMap<String, Object>>(formData, requestHeaders);

RestTemplate restTemplate = new RestTemplate(true);

restTemplate.getMessageConverters().add(
     new GsonHttpMessageConverter());
restTemplate.getMessageConverters().add(
new StringHttpMessageConverter());
ResponseEntity<Success[]> response = restTemplate.exchange(url, HttpMethod.POST,       requestEntity,Success[].class);
return response.getBody(); 
```

~~编辑：解决了 UTF-8 的问题我刚刚将此行添加到我的 config.php 文件中，问题就解决了~~

~~mysql_query("SET character_set_results=utf8, character_set_client=utf8, character_set_connection=utf8, character_set_database=utf8, character_set_server=utf8",$con);~~

**编辑：没有解决问题**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T14:36:53.787

在这里调试将是你的朋友。需要注意的一些事项：

1.  检查您用于查看数据的任何内容都不是问题。MySQL 是否存储 ????? 或者它只是向您展示您的应用程序？？？？
2.  检查与 MySQL 的连接上的内容格式，这可能是罪魁祸首。（您可以通过简单地编写一个应用程序将数据推送到您的数据库中来测试这一点，而无需通过网络）
3.  检查您的 Web 应用程序是否正在处理 UTF-8 格式的读取。例如，在旧版本的 JBoss 中，我使用嵌入式 apache 容器从服务器运行的机器的默认字符集中的连接中读取字符串（不是 utf-8）

# html - 如何放置元素？

> ID：14911409
> 
> 赞同：0
> 
> 时间：2013-02-16T14:34:32.347
> 
> 标签：html, css, alignment, html-table

我有最大 100 像素大小的图像的产品。表示：宽度为100px，高度小于100px，或者高度为100px，宽度小于100px。一侧始终为 100 像素。

我需要在**右侧显示产品图片，在该图片的****左下方**显示名称和价格。这是我需要的不同情况下的结构：

![在此处输入图像描述](../Images/38b73d7808c24a2f8ee8fb2b9a08b193.png)

我试过这个：

```
<table style="width: 100%;">
    <tbody>
        <tr>
          <td style="height: 100px; ">
              <a href="@Url.Action("Details", "Product", new { id = Model.Id })" > 
                 <img src="@Url.Content("~/Images/" + Model.Image)" style="float:right;" alt="" />
                <b style="margin-top: 15%; float: right;">
                    <label>@Model.Price</label>
                    <br />
                    <label>@Model.Name</label>
                </b>
              </a>
          </td>
       </tr>
    </tbody>
</table> 
```

但这仅适用于 100px 高度。`margin-top: 15%;`是静态的。当图像高度为 50px、60px 等时，它应该会改变。我怎样才能做到这一点？使用桌子并不重要。您可以建议任何元素来执行此操作。

**编辑：** 我`<td>`并排添加了一个，并将价格和名称放入 first`<td>`并将 image 放入 second `<td>`。

现在我需要`<td>`像内部元素的大小一样设置宽度。如果图像宽度`<td>`为 90px，则将`<td>`宽度设置为 90px。是否可以？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T16:20:08.317

正如已经提到的那样，使用 table 不是你应该这样做的方式。但是你可以使用 CSS 来模拟表格之类的东西，尽管我不得不提到这在 ie7 或以下版本中不起作用：

**CSS**

```
.list li {
    height:100px;
    border:5px solid #000;
    margin-bottom:5px;
    width:100%;
    display:table;

}

.list li div {
    display:table-cell;
    vertical-align:middle;
    overflow:hidden;
}

.list li div a {
    display:table;
    width:100%;
}
.list li a span {
    display:table-cell;
    overflow:hidden;
    width:100%;
    vertical-align:bottom;
}

.list li a span b {
    display:block;
    padding-right:5px;
    float:right;
}

.list img {
    float:right;
} 
```

**的HTML**

```
<ul class="list">
    <li>
        <div>
            <a href="#" > 
                <span>
                    <b>@Model.Pricexyz<br />@Model.Name</b>
                </span>
                <img src="http://placekitten.com/g/100/100" alt="" />
            </a>
        </div>
    </li>
    <!-- add other elements here -->
</ul> 
```

你可以在这里找到一个[演示](http://jsbin.com/uqohiq/1/edit)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T15:32:42.020

这就是我想出的。注意括号中的虚拟字段，更改它们以反映您的后端数据。

表格不好，因为您的列可以有不同的宽度。您的最后一个场景需要您检测图像的高度或提取它（假设您已将其保存在某处）并向项目容器添加一个类。

```
<style type="text/css">

    .products-container > .item {
        height: 100px;
    }

    .products-container > .item.image-height-60 {
        padding: 20px 0;
        height: 80px;
    }

    .products-container > .item > .column {
        float: right;
        height: 100px;
    }

    .products-container > .item > .column.info-column {
        position: relative;
    }

    .products-container > .item > .column.info-column > .inner {
        position: absolute;

        bottom: 0;
        right: 0;
    }

    .products-container img {
        /* dummy image dimensions */
        /*width: 60px;
        height: 100px;*/

        vertical-align: bottom;
    }

    .products-container .clear {
        clear: both;
    }
</style>

<div class="products-container">
    <div class="item">

        <!-- Image column comes first because it's pushed to the right using float: right -->
        <div class="column image-column">
            <a href="[link]" > 
                 <img src="[image_src]" alt="Image for [name]" />
            </a>
        </div>

        <div class="column info-column">
            <div class="inner">
                <span>[price]</span> <br />
                <span><a href="[link]">[name]</a></span>
            </div>
        </div>

        <div class="clear"></div>

    </div>

    <!-- Example where image is assumed to be 60 pixels tall. -->
    <!-- Notice I've added the class 'image-height-60' -->
    <div class="item image-height-60">

        <div class="column image-column">
            <a href="[link]" > 
                 <img src="[image_src]" alt="Image for [name]" />
            </a>
        </div>

        <div class="column info-column">
            <div class="inner">
                <span>[price]</span> <br />
                <span><a href="[link]">[name]</a></span>
            </div>
        </div>

        <div class="clear"></div>

    </div>
</div> 
```

# php - 使用 php 在 div 上单击计数器

> ID：14911412
> 
> 赞同：2
> 
> 时间：2013-02-16T14:34:47.933
> 
> 标签：php, javascript

我对javascript一无所知，但我在我的网站上的几个地方使用了javascript，以使它看起来更好一点。其中一个地方是当用户单击 div 时，它可以打开一个漂亮的弹出窗口，其中包含更多信息。但是，我还想保存 div 的点击次数。

我知道如何使用 php 来做到这一点，并且我设法找到了一些可以增加变量的 javascript 代码，但我认为这两者不能组合，除非 js 将 var 保存为 cookie，我认为如果我随后将 js 变量读回数据库，则可能存在一些安全漏洞。

我拥有的javascript代码是

```
/*Click counter*/
var clicks = 0;
function count() 
{
    document.getElementById( "cc" ).value = ++clicks;
} 
```

而且我不确定从哪里开始使用 php，因为我不知道 javascript。但是查询数据库以增加存储点击次数的列会很简单。我只是不知道如何告诉 php 使用 javascript 进行了点击。我不认为它可以在 php 中完成，除非链接转到一个 php 文件，该文件首先处理所有这些然后重定向，这在这种情况下不起作用，因为弹出窗口不会加载到新页面中.

有什么想法或伪代码可以提供帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T14:41:03.867

如果你想在服务器端保持计数器是最新的，你应该使用 AJAX 来更新服务器数据库。

基于[本教程](http://www.tutorialspoint.com/ajax/ajax_database.htm)，这里有一个简单的例子：

mydiv.phtml:

```
<?php $_GET['id']=isset($_GET['id'])?$_GET['id']:1; include 'count.php'; ?>
<html>
<body>
<script language="javascript" type="text/javascript">
<!--
var clickerid = <?php echo $_GET['id'] ?>; //counter id allows easy implementation of other counters if desired
var clicks = <?php echo $clicks ?>;
var clickLock = false;
var maxClickRate = 1000; //maximum click rate in ms, so the server won't choke
//Browser Support Code
function count(){
 if (clickLock) { 
     alert('you\'re clicking too fast!'); 
     return;
 }
 clickLock=true;
 setTimeout('clickLock=false;',maxClickRate);
 var ajaxRequest;  // The variable that makes Ajax possible!

 try{
   // Opera 8.0+, Firefox, Safari
   ajaxRequest = new XMLHttpRequest();
 }catch (e){
   // Internet Explorer Browsers
   try{
      ajaxRequest = new ActiveXObject("Msxml2.XMLHTTP");
   }catch (e) {
      try{
         ajaxRequest = new ActiveXObject("Microsoft.XMLHTTP");
      }catch (e){
         // Something went wrong
         alert("Your browser broke!");
         return false;
      }
   }
 }
 // Create a function that will receive data 
 // sent from the server and will update
 // div section in the same page.
 ajaxRequest.onreadystatechange = function(){
   if(ajaxRequest.readyState == 4){
      document.getElementById('cc').innerHTML = ++clicks;
   }
 }
 // Now pass clicks value to the
 // server script.
 var queryString = "?id=" + clickerid + "&update=true";
 ajaxRequest.open("GET", "count.php" + 
                              queryString, true);
 ajaxRequest.send(null); 
}
//-->
</script>
<div onclick='count()'>
<form name='myForm'>
<input type='button' value='clickOnDiv'/>
</form>
</div>
Clicks so far: <span id='cc'><?php echo $clicks; ?></span>
</body>
</html> 
```

计数.php：

```
<?php
try {
    $dbh = new PDO('mysql:host=localhost;dbname=test', 'user', 'password');
    if (!isset($_GET['update'])){
        $stmt = $dbh->prepare('SELECT count
        FROM clicks
        WHERE id = :clickerid');
        $stmt->bindValue(':clickerid', $_GET['id'], PDO::PARAM_INT);
        $stmt->execute();
        $result = $stmt->fetch(PDO::FETCH_ASSOC);
        $clicks = $result['count'];
    } else {
        $stmt = $dbh->prepare('UPDATE clicks
        SET count = count + 1
        WHERE id = :clickerid');
        $stmt->bindValue(':clickerid', $_GET['id'], PDO::PARAM_INT);
        $stmt->execute();
    }
    $dbh = null;
} catch (PDOException $e) {
    print "PDO Exception.";
    die();
}
?> 
```

set_database.php：

```
<?php
try {
    $dbh = new PDO('mysql:host=localhost', 'user', 'password');
    $dbh->query('CREATE DATABASE test;');
    $dbh->query('CREATE TABLE test.clicks (id INT KEY, count INT);');
    $dbh->query('INSERT INTO test.clicks VALUES (1,0);');
    $dbh = null;
} catch (PDOException $e) {
    print "PDO Exception.";
    die();
}
?> 
```

# c# - List<> 无法保存数据库的数据

> ID：14911415
> 
> 赞同：0
> 
> 时间：2013-02-16T14:35:00.660
> 
> 标签：c#, asp.net-mvc, ado.net

我有一个名为“Employee”的 sql 表。该表有 4 个字段：EMPLID、EMPNAME、EMPCONTACT 和 EMPEMAIL。我正在创建一个 Asp.net MVC 应用程序。在我的模型中，我有一个用户类，如下所示：-

```
Class Users
{
    public string ID{get; set;}
    public string Name{get;set;}
    public string Contact{get;set;}
    public string Email(get;set;}
} 
```

现在将使用 ado.net 从数据库中获取数据并将其发送到控制器的代码如下所示：-

```
Class DatabaseAccess
{
    public List<Users> GetData()
    {
        List<Users> eachemployee = new List<Users>;
        Users user = new Users();

        SqlConnection conn = new SqlConnection(Connectionstring);
        con.open();
        SqlDataAdapter adp = new Sql Data Adapter("Select * From Employee",conn);
        Dataset ds = new dataset();
        adp.fill(ds,"Employee");

        for(int i=0;i<ds.tables[0].rows.count;i++) 
        {
            user.ID = ds.Tables[0].rows[i]["EMPID"].tostring(); 
            user.Name = ds.Tables[0].rows[i]["EMPNAME"].tostring();
            user.Contact = ds.Tables[0].rows[i]["EMPCONTACT"].tostring();
            user.Email = ds.Tables[0].rows[i]["EMPEMAIL"].tostring();
            eachemployee.Add(user);
       }
       return eachemployee;
   } 
```

现在的问题是每个员工总是包含具有相同数据的行。如果表有 2 行，如下所示：

```
Emp1, Gaurav, 888888888,abc@gmail.com
Emp2, Sharma, 999999999,xyz@gmail.com 
```

然后每个员工列表包含 2 行具有相同数据的行。也就是说，这两行都包含 Emp2 数据，如下所示：

```
Emp2, Sharma, 999999999,xyz@gmail.com
Emp2, Sharma, 999999999,xyz@gmail.com 
```

我怎样才能摆脱上述问题？我什至不知道这是什么原因？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T14:38:57.477

移动你的

```
Users user = new Users(); 
```

在 for 循环内。

在您的代码中，您只创建一个对象，并且您总是在修改它并将其多次添加到列表中......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T14:40:55.193

你可以喜欢

```
for(int i=0;i<ds.tables[0].rows.count;i++){
eachemployee.Add(new User()
  { 
     ID = ds.Tables[0].rows[i]["EMPID"].tostring(),
     Name = ds.Tables[0].rows[i]["EMPNAME"].tostring(),
     Contact = ds.Tables[0].rows[i]["EMPCONTACT"].tostring(),
     Email = ds.Tables[0].rows[i]["EMPEMAIL"].tostring()
  });} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T14:40:09.520

您只需创建一个用户对象并始终将值分配给同一对象。

```
Users user = new Users(); 
```

将此声明移到您的 for 中，为每一行创建一个用户对象。

# content-management-system - 我可以在 umbraco 中创建可自定义的菜单吗

> ID：14911418
> 
> 赞同：0
> 
> 时间：2013-02-16T14:35:10.630
> 
> 标签：content-management-system, umbraco

我试图在 umbraco 中创建可自定义的菜单。即用户应该能够添加/删除/编辑菜单中的任何菜单项。（用户将不是开发人员）

但我不知道该怎么做..我听说过宏，但对它们了解不多，所以不能使用它。

我想这也曾经做过..

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T15:30:28.327

通常，您的菜单将反映您在 umbraco 中的节点结构。这是让您的客户控制网站导航的最简单方法。如果您不希望菜单中有节点，您可以使用文档类型的[umbracoNaviHide](http://our.umbraco.org/wiki/reference/umbraco-best-practices/umbraconavihide)属性。

试用一些可用的入门套件。它们将附带基于您的节点构建导航的宏，并将让您很好地了解它们的工作原理。您甚至可以从使用 starterkit 开始，然后随意修改它。当您开始使用 umbraco 时，这就是我的建议。Umbraco 有大约 4 个内置的入门套件，我们的 Umbraco 有[更多](http://our.umbraco.org/projects/starter-kits)其他用户贡献的。

**要使用 Umbraco 提供的默认导航模板：**

如果您登录 Umbraco 后台并前往开发人员部分，应该会看到脚本文件。右键单击脚本文件并选择创建。选择一个文件名，例如 Nav，然后从“选择模板”菜单中选择站点地图，然后单击创建。您应该最终得到以下剃须刀代码：

```
@*
SITEMAP
=================================
This snippet generates a complete sitemap of all pages that are published and visible (it'll filter out any
pages with a property named "umbracoNaviHide" that's set to 'true'). It's also a great example on how to make
helper methods in Razor and how to pass values to your '.Where' filters.

How to Customize for re-use (only applies to Macros, not if you insert this snippet directly in a template):
- If you add a Macro Parameter with the alias of "MaxLevelForSitemap" which specifies how deep in the hierarchy to traverse

How it works:
- The first line (var maxLevelForSitemap) assigns default values if none is specified via Macro Parameters
- Next is a helper method 'traverse' which uses recursion to keep making new lists for each level in the sitemap
- Inside the the 'traverse' method there's an example of using a 'Dictionary' to pass the 'maxLevelForSitemap' to
  the .Where filter
- Finally the 'traverse' method is called taking the very top node of the website by calling AncesterOrSelf()

NOTE: It is safe to remove this comment (anything between @ * * @), the code that generates the list is only the below!
*@

@inherits umbraco.MacroEngines.DynamicNodeContext

@helper traverse(dynamic node){
var maxLevelForSitemap = String.IsNullOrEmpty(Parameter.MaxLevelForSitemap) ? 4 : int.Parse(Parameter.MaxLevelForSitemap);

var values = new Dictionary<string,object>();
values.Add("maxLevelForSitemap", maxLevelForSitemap) ;

   var items = node.Children.Where("Visible").Where("Level <= maxLevelForSitemap", values);
   if (items.Count() > 0) {
   <ul>
            @foreach (var item in items) {
                <li>
          <a href="@item.Url">@item.Name</a>
          @traverse(item)
                </li>
            }
   </ul>
    }
}
<div class="sitemap">
    @traverse(@Model.AncestorOrSelf())
</div> 
```

这将生成您网站结构的 ul/li 菜单。您可以通过插入宏将其插入模板。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T20:59:49.667

查看 XSLT 或 Razor 的默认顶部导航模板。这应该让您了解从哪里开始以及导航通常如何在 Umbraco 中工作。我赞同道格拉斯的回答，即导航通常反映内容部分中的内容结构。

如果您真的想要一个独立于内容树结构将项目添加到导航的设置，那么在您的主页上使用多节点树选择器并将其作为顶部导航宏中的导航。

# android - 使用片段方法在所有屏幕中显示选项卡选项

> ID：14911420
> 
> 赞同：2
> 
> 时间：2013-02-16T14:35:18.353
> 
> 标签：android, android-fragments, fragment-tab-host

我正在创建 android 音乐播放器应用程序。我需要将主要的四个选项显示为选项卡。站艺人搜索更多

我有使用标签主机和标签活动创建相同类型应用程序的经验。在启动此应用程序之前，我已经阅读了片段、片段活动的文档。

我的问题是，如果我选择片段，我可以在从前一个开始的所有屏幕中显示选项卡选项。假设我选择搜索选项，然后我从动态列表视图中单击播放歌曲，如果之后我从列表中选择任何歌曲项目，我也想在新的音乐播放屏幕中显示选项卡选项。请帮忙，因为这是设计问题，我知道在这种情况下只有经验可以帮助我。

我的问题是：您是否已实现此行为以在所有屏幕中启用选项卡选项？有演示吗？请建议我实现这一目标的正确方法。这次我想按照 android 开发指南进行。

注意：在我以前的应用程序中，我通过 setcontnetview 和布局的可见选项以及我的自定义适配器实现了选项卡选项启用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T14:41:22.977

不要使用 TabHosts，它们已被弃用，使用 ActionBar 选项卡导航，它还有一个优点，即 ActionBar 可以在整个应用程序中被调用、更改、删​​除等

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T14:42:34.620

使用 ActionBar 导航选项卡来实现您想要的

[http://developer.android.com/guide/topics/ui/actionbar.html#Tabs](http://developer.android.com/guide/topics/ui/actionbar.html#Tabs)

# javascript - 简单的 javascript if 和 else。如果 url 是返回，否则滚动到 anhor

> ID：14911423
> 
> 赞同：0
> 
> 时间：2013-02-16T14:35:31.517
> 
> 标签：javascript, scroll, tags

```
<script type="text/javascript">
if (location.href == "http://www.mysitemain.com")
{
return false;
} 

else 

{

window.onload = function() {
var el = document.getElementById('wrap');
el.scrollIntoView(true);
}

}
</script> 
```

任何人都可以帮我修复此代码吗？试图做一些事情，如果网站 url 然后返回 false 否则转到锚点

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T14:39:30.953

不需要“return”声明；您的代码不在函数中。只需测试 URL 是否*不*等于字符串：

```
if (location.href != "http://www.mysitemain.com") {
  window.onload = function() {
    document.getElementById('wrap').scrollIntoView(true);
  };
} 
```

# javascript - 强平等

> ID：14911432
> 
> 赞同：-5
> 
> 时间：2013-02-16T14:37:21.783
> 
> 标签：javascript, jquery

已指示您测试如下所示变量的值：

```
var length = "50"; 
```

然后编写以下代码：

```
if (length === 50) 
```

以下哪项是这行代码的目的？

`A.`如果长度等于 50，并且数据类型是整数，它会阻止代码块触发。

`B.`如果长度等于 50，并且数据类型是字符串，它会阻止代码块触发。

`C.`如果长度等于 50，无论数据类型如何，它都允许触发代码块。

`D.`如果长度等于 50，则它允许触发代码块，具体取决于数据类型。

我可以回答上述问题吗？

`My Answer is D`.但它说错了。你的呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T14:45:53.587

```
var myInteger = 50;

if(myInteger === 50) {
  alert("Matched integer");
}

if(myInteger === "50") {   
  alert("Matched string version of integer");
} 
```

[http://jsfiddle.net/8RdLK/](http://jsfiddle.net/8RdLK/)

只有第一个`if`块匹配，所以答案是 D。

# android - Android：布局 XML：在向后兼容的对话框末尾插入空格

> ID：14911435
> 
> 赞同：1
> 
> 时间：2013-02-16T14:37:36.743
> 
> 标签：android, xml, dialog, builder, space

我正在构建一个需要向后兼容 API 10 的 Android 应用程序。

我为应用程序中的每个 Activity 构建了一系列帮助对话框，布局模式如下：

```
<ScrollView>
    <LinearLayout>
        <Series of TextViews />
        <Space />
    </LinearLayout>
<ScrollView> 
```

我发现空间视图是必要的，因为对话框用“完成”按钮（不在布局文件中，但由 AlertDialog.Builder 放置）切断了最后一个 TextView 的最后几行。

我可以使用什么来代替提供相同功能的空间视图，或者我可以对最终不需要手动创建空间的布局做些什么？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T14:59:43.690

你可以使用`View`，比如

```
<View android:layout_width="match_parent" 
      android:layout_height="8dp"
      android:visibility="invisible"/> 
```

它将显示为一个空白区域。尝试一下布局高度以获得所需的间距。

您也可以从 Android SDK 中获取空间视图的源代码并将其复制到您自己的代码中。它`draw(Canvas)`完全不做任何事情，这比`View`默认情况下要少，因此效率略高。

# android - Android转换为位图崩溃

> ID：14911438
> 
> 赞同：0
> 
> 时间：2013-02-16T14:37:49.437
> 
> 标签：android, bitmap, crash, uri

好的，所以我应该制作一个 android 应用程序，但由于某种原因，我无法将我的图片转换为位图图像。这是一个 .png 图像，当我尝试在我的代码中转换它时，我的应用程序崩溃了，没有错误代码或什么也没有。我已经尝试修复它很多次了，但我只是在编程方面不是那么好，我需要帮助，它就是行不通。

```
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
                if (requestCode == FOTO_NEMEN && resultCode == RESULT_OK)
                {
                    final File file = temp;
                    try {
                        String urienzo = "file:///sdcard/DCIM/2013-01-30_13-27-28.png";
                        Uri uri = Uri.parse(urienzo);
                        Bitmap foto = MediaStore.Images.Media.getBitmap(this.getContentResolver(), uri);
                        if (foto == null) {
                            Toast.makeText(this, Uri.fromFile(file).toString(), Toast.LENGTH_SHORT).show();
                            return;
                        }
                        ByteArrayOutputStream bos = new ByteArrayOutputStream();
                        foto.compress(Bitmap.CompressFormat.PNG, 0 , bos);
                        final byte[] bytes = bos.toByteArray();
                        bos.close();
                        AsyncTask<Void,Void,Void> taak = new AsyncTask<Void,Void,Void>() {
                            @Override
                            protected Void doInBackground(Void... params) {
                                stuurAfbeelding(bytes);
                                return null;
                            }   
                        };
                        taak.execute(null,null);
                    } catch (IOException e) {
                        Log.e("Snapper","Fout bij foto nemen: " + e);
                    }
                }
            } 
```

每当我到达位图照片部分时，它都会使我的应用程序崩溃而没有任何错误消息。我的 URI 被硬编码的原因是因为我认为 URI.fromfile 给了我错误的 URI，所以我想确定一下。现在它只是崩溃了，我不知道我的代码有什么问题。有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T14:49:25.197

在我看来，你会得到一个 outOfMemoryError。

要从 uri 获取位图，您应该使用以下内容：

```
public static Bitmap getThumbnail(Uri uri) throws FileNotFoundException, IOException{
    InputStream input = this.getContentResolver().openInputStream(uri);

    BitmapFactory.Options onlyBoundsOptions = new BitmapFactory.Options();
    onlyBoundsOptions.inJustDecodeBounds = true;
    onlyBoundsOptions.inDither=true;//optional
    onlyBoundsOptions.inPreferredConfig=Bitmap.Config.ARGB_8888;//optional
    BitmapFactory.decodeStream(input, null, onlyBoundsOptions);
    input.close();
    if ((onlyBoundsOptions.outWidth == -1) || (onlyBoundsOptions.outHeight == -1))
        return null;

    int originalSize = (onlyBoundsOptions.outHeight > onlyBoundsOptions.outWidth) ? onlyBoundsOptions.outHeight : onlyBoundsOptions.outWidth;

    double ratio = (originalSize > THUMBNAIL_SIZE) ? (originalSize / THUMBNAIL_SIZE) : 1.0;

    BitmapFactory.Options bitmapOptions = new BitmapFactory.Options();
    bitmapOptions.inSampleSize = getPowerOfTwoForSampleRatio(ratio);
    bitmapOptions.inDither=true;//optional
    bitmapOptions.inPreferredConfig=Bitmap.Config.ARGB_8888;//optional
    input = this.getContentResolver().openInputStream(uri);
    Bitmap bitmap = BitmapFactory.decodeStream(input, null, bitmapOptions);
    input.close();
    return bitmap;
}

private static int getPowerOfTwoForSampleRatio(double ratio){
    int k = Integer.highestOneBit((int)Math.floor(ratio));
    if(k==0) return 1;
    else return k;
} 
```

`THUMBNAIL_SIZE`你想得到的缩略图的大小在哪里。所以，它工作正常，我在我的应用程序中使用此代码0

链接[如何从 Uri 中获取位图？](https://stackoverflow.com/questions/3879992/get-bitmap-from-an-uri-android)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T15:34:23.920

我想它会崩溃，因为这不是您从文件加载图像的方式。

该代码比您尝试的要简单得多：

```
Bitmap bmp = BitmapFactory.decodeFile(urienzo); 
```

就这样！只要确保这条路径是正确的，因为它对我来说看起来不正确。

此外，如果您正在加载一个大图像（例如 4MP），它会因内存不足而崩溃，因为位图的想法是用来将当前大约高清到全高清分辨率的内容放在屏幕上。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T14:51:42.827

你可以这样：

```
Bitmap image;
ByteArrayOutputStream stream = new ByteArrayOutputStream();
image.compress(Bitmap.CompressFormat.PNG, 100, stream); 
```

为了从意图中获得它，你可以尝试这样的事情：

```
bitmap = android.provider.MediaStore.Images.Media.getBitmap(getContentResolver(), intent.getData());
String path = getRealPathFromURI(context, intent.getData());
bitmap = scaleImage(imageView, path); 
```

在哪里

```
private String getRealPathFromURI(Context context, Uri contentUri) {
String[] proj = { MediaStore.Images.Media.DATA };
CursorLoader loader = new CursorLoader(context, contentUri, proj, null, null, null);
Cursor cursor = loader.loadInBackground();
int column_index = cursor.getColumnIndexOrThrow(MediaStore.Images.Media.DATA);
cursor.moveToFirst();
return cursor.getString(column_index);
} 
```

# javascript - 正则表达式读取代码注释

> ID：14911439
> 
> 赞同：-1
> 
> 时间：2013-02-16T14:38:00.220
> 
> 标签：javascript, regex

我有这样的代码注释块..

```
/**
 * This method provide inheritance to the object supplied; this method inherit the 
 * public methods from the Parent class to the Child class. this also provide
 * multiple inheritance, in which the method ambiguity is solved by the overriding
 * the last inherited class's method.
 * @access public
 * @method inherit
 * @param Object Parent
 * @param Object Child
 * @return Object
 */ 
```

并忽略诸如

```
/* This is a test comment for testing regex. */ 
```

我尝试了很多使用 javascript 中的正则表达式来获取此评论，但每次都失败。任何人都可以为此建议一个正则表达式或任何其他解决方案来提取评论块。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T14:45:17.760

与您的第一个示例一样的注释块匹配的正则表达式是`/\/\*\*[\s\S]*?\*\//`. 提取整个评论后，您可以进行一些额外的解析。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T15:39:25.517

我相信这就是你要找的。

*   首先它寻找`/**`.
*   然后它匹配评论中的任何内容，只要我们发现没有`*/`
*   最后，它寻找一个`*/`结束

在[regexpal](http://regexpal.com)测试。

```
/\*{2}([^\*]|\*(?!/))*\*/ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-16T14:49:44.713

我假设您只是在寻找多行注释，这正是这样做的。

```
\/[*]+[\n\r][\s\S]+?[\n\r] *[*]+\/ 
```

# assembly - 如果不是数字，PEP8 要求新的输入

> ID：14911443
> 
> 赞同：0
> 
> 时间：2013-02-16T14:38:41.967
> 
> 标签：assembly, pep8-assembly

我有这段代码可以将年份输入（转换为chari）并将其输出为十进制。我的问题是，如果错误地输入了一个字母或空格，程序会继续输出错误消息，但不会重新输入新的输入。例如，如果输入 ABCD，它会给你 4 次错误信息并退出。

输入年份必须介于 1900 和 2049（含）之间。

要重现该错误，请尝试使用 19a0 或 abcd 每个示例。

我在哪里错了？

```
STRO    welcome,d 

entyear:STRO inptyear,d 
readnomb:NOP1                

initread:LDA     -1,i        
         STA     pos,d       
         LDA     0,i
         STA     integer,d         

readchar:LDA     0,i         
         CHARI   ascii,d     
         LDBYTEA ascii,d     
         CPA     0x000A,i  
         BREQ    exitentr    
         CPA     0x002F,i 
         BRLE    errlect     
         CPA     0x003A,i  
         BRGE    errlect     
         SUBA    48,i     
         STA     valint,d    
         LDX     pos,d       
         ADDX    1,i      
         STX     pos,d       
         BR      convint     

errlect: STRO    msgerr,d
         LDX     0,i
         STX     ascii,d   
         BR      readnomb   

multdix: LDA     integer,d   
         ASLA                 
         STA     inttemp,d   
         ASLA                
         ASLA                
         ADDA    inttemp,d   
         STA     integer,d   
         LDX     pos,d       
         SUBX    1,i         
         STX     pos,d       

convint: LDX     pos,d       
         CPX     0,i         
         BRGT    multdix     
         LDA     integer,d   
         ADDA    valint,d    
         STA     integer,d   
         BR      readchar    

exitentr:LDX     pos,d       
         CPX     0,i         
         BRLT    end         

dispint:LDA     integer,d
         CPA     datemin,i
         BRLT    errlect 
         CPA     datemax,i
         BRGT    errlect
         DECO    integer,d   
         STRO    msgspace,d
         BR      entyear
end:     STOP                

welcome:  .ASCII  "Enter a year to convert to decimal\n"
         .BYTE   0
inptyear: .ASCII  "Year ?: "
         .BYTE   0           
msgerr:  .ASCII  "\nWrong caracter detected, please enter a new year: "
         .BYTE   0           
msgspace:.WORD   0x0A0A      
         .BYTE   0                  

inttemp: .WORD   0
valint:  .WORD   0
pos:     .WORD   0
datemin: .EQUATE 1900
datemax: .EQUATE 2049
integer: .WORD   0
ascii:   .BYTE   0
         .END 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-20T14:32:23.313

如果在数字后按回车键，这些：CPA 0x000A,i
BREQ exitentr
可能会使程序终止。实际上，在每个无效键之后，读取从头开始。当然，除非 cherecter 读取被缓冲 - 终端收集字符直到换行，然后将整个缓冲区提供给程序以使用 CHARI 读取字符。

我有点猜想没有这样的缓冲。

# c# - BinaryWriter.BaseStream.Position 错误？

> ID：14911444
> 
> 赞同：1
> 
> 时间：2013-02-16T14:38:45.837
> 
> 标签：c#

```
BinaryWriter bw;
while(bw.BaseStream.Position < 192137)
bw.Write((byte) 0); 
```

最后，`bw.BaseStream.Position`等于 192152（不是 192137！）。文件大小为 192 104 字节。这怎么可能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T14:44:40.760

BinaryWriter 在将数据写入底层 Stream 之前缓冲数据。

如果要写入 192137 字节，请将 192137 字节写入 BinaryWriter，而不是等到 192137 字节写入底层 Stream：

```
for (int i = 0; i < 192137; i++)
{
    bw.Write((byte) 0);
} 
```

*经验法则：*使用 Stream 或 BinaryWriter，但不要同时使用它们。（即，如果您使用 BinaryWriter，请不要访问 BaseStream。）

# reference - 在 Firebase 中查找数据

> ID：14911445
> 
> 赞同：0
> 
> 时间：2013-02-16T14:38:46.257
> 
> 标签：reference, exists, firebase

我正在尝试检查是否使用了 Firebase 文档中给出的示例中的用户名：

* * *

```
function go() {
  var userId = prompt('Username?', 'Guest');
  checkIfUserExists(userId);
}

var USERS_LOCATION = 'https://SampleChat.firebaseIO-demo.com/users';

function userExistsCallback(userId, exists) {
  if (exists) {
    alert('user ' + userId + ' exists!');
  } else {
    alert('user ' + userId + ' does not exist!');
  }
}

// Tests to see if /users/<userId> has any data. 
function checkIfUserExists(userId) {
  var usersRef = new Firebase(USERS_LOCATION);
  usersRef.child(userId).once('value', function(snapshot) {
    var exists = (snapshot.val() !== null);
    userExistsCallback(userId, exists);
  });
} 
```

* * *

但是我引用的数据位于我在引用时遇到问题的数据层中：

firebaseio.com/{userID}/primary/{username}

151 (用户ID) | |> 初级 | |> 用户名：用户名

我想检查用户 ID 子项下主树下的用户名字段......有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T15:30:54.217

有点不清楚您的数据结构是什么；见我上面的评论。对您的数据做出几个假设，它看起来像这样：

```
{151}/primary/username/{kato} 
```

大括号中的部分是变量位，其余部分是固定键，那么您只需按如下方式更改路径：

```
// in checkIfUserExists
usersRef.child(userId).child('primary/username').on('value', ...) 
```

如果您没有用户 ID，那么您可以迭代所有用户并检查名称：

```
usersRef.once('value', function(ss) {
    ss.forEach(function(childSnapshot) {
       var userID = childSnapshot.name();
       childSnapshot.ref().child('primary/username').once('value', function(ss) {
           var userName = ss.val();
           /* do something with name and ID here */
       });
    });
}); 
```

或者，如果您怀疑您的用户列表将非常庞大（数千），您可能希望将用户名索引到单独路径中的 id 并避免任何迭代：

```
userList/{username}/{userID} 
```

然后您可以按如下方式使用：

```
 userListRef.child(username).once('value', function(ss) {
    var userID = ss.val();
    if( userID !== null ) {
        /* user exists and we have the name and id now */
    }
 }); 
```

# ruby - 代理/从其他国家获取数据

> ID：14911449
> 
> 赞同：0
> 
> 时间：2013-02-16T14:39:04.257
> 
> 标签：ruby, proxy, web-scraping, scraperwiki

某些网站要求我们有一个特定的 IP 地址来显示某些信息，例如。国家 X 的广告。我想知道是否可以在我的 ruby​​ 脚本@scraperwiki 中使用代理（最好是 ruby​​ 代理）来获得结果，就像我在那个国家 X 一样。现在脚本得到结果英国，如果我使用 HTTP 代理，我可以看到我想从中正确检索数据的网站。问题是 Scraperwiki 不会像在 X 国那样返回网页

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T15:19:10.827

是的。你应该使用机械化：

```
require 'mechanize'
agent = Mechanize.new
agent.set_proxy host, port
page = agent.get url 
```

现在打电话`page#search`或`page#at`就像你处理你的 Nokogiri 文件一样。

# javascript - 如果（！document.images）

> ID：14911452
> 
> 赞同：3
> 
> 时间：2013-02-16T14:39:16.767
> 
> 标签：javascript

我一直在使用 JavaScript 教程来帮助我在大学作业中实现一些 JavaScript。因此，我使用了一个来帮助我创建图像幻灯片，它包含一个 if 语句，如下所示。

```
if (!document.images)
    return
document.images.SlideShow1.src=eval("image"+slide+".src 
```

但是我不太确定它在做什么，尤其是这`(!document.images)`部分。

编辑

另外，正如我所看到的，我在本教程中做出了错误的选择，有人会告诉我如何制作一个好的图像幻灯片或简单地指导我学习一个好的教程吗？这是我目前使用的所有代码

```
<head>
<script type="text/javascript">
        <!--
        var image1=new Image()
        image1.src="Images/Foam2012/Misty.gif"
        var image2=new Image()
        image2.src="Images/Foam2012/Foamy.gif"
        var image3=new Image()
        image3.src="Images/Foam2012/17.gif"
        var image4=new Image()
        image4.src="Images/Foam2012/16.gif"
        var image5=new Image()
        image5.src="Images/Foam2012/2.gif"
        var image6=new Image()
        image6.src="Images/Oxjam2012/Rainbow.gif"
        var image7=new Image()
        image7.src="Images/Oxjam2012/17.gif"
        var image8=new Image()
        image8.src="Images/Oxjam2012/9.gif"
        var image9=new Image()
        image9.src="Images/Oxjam2012/2.gif"
        var image10=new Image()
        image10.src="Images/RagDay2012/GasMask.gif"
        var image11=new Image()
        image11.src="Images/RagDay2012/22.gif"
        var image12=new Image()
        image12.src="Images/RagDay2012/21.gif"
        var image13=new Image()
        image13.src="Images/RagDay2012/20.gif"
        var image14=new Image()
        image14.src="Images/RagDay2012/16.gif"
        var image15=new Image()
        image15.src="Images/RagDay2012/6.gif"
        var image16=new Image()
        image16.src="Images/RagDay2012/5.gif"       
        var image17=new Image()
        image17.src="Images/RagDay2012/4.gif"
        var image18=new Image()
        image18.src="Images/RagDay2012/1.gif"
        var image19=new Image()
        image19.src="Images/UV2012/17.gif"
        var image20=new Image()
        image20.src="Images/UV2012/14.gif"
        var image21=new Image()
        image21.src="Images/UV2012/9.gif"
        var image22=new Image()
        image22.src="Images/UV2012/7.gif"
        var image23=new Image()
        image23.src="Images/UV2012/6.gif"
        //-->
    </script>
</head>
<body>
<img id="SlideShow1" style="padding-bottom: 5px" src="Images/Foam2012/Foamy.gif"      width="350px" height="300px" alt="Image Slideshow"/>
    <script type="text/javascript">
        <!--
        var slide = 1
        //Declares a variable called slide which equals 1
        function slideit(){
        if (!document.images)
        return
        document.images.SlideShow1.src=eval("image"+slide+".src")
        if (slide<23)
        slide++
        else
        slide = 1
        //call function "slideit()" every 1.5 seconds
        setTimeout("slideit()",1500)
        }
        slideit()
        //-->
    </script>
</body> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T15:20:12.450

把这个教程放下！它是 (a) 古代...

```
if (!document.images)
   return 
```

这是对集合进行特征嗅探，这是一种获取元素`images`的老式方法。`<img>`自 Netscape 3 以来所有支持 JavaScript 的浏览器都支持该数组，因此它显示了一个 1996 年以前的脚本。

...和（b）可怕。

```
document.images.SlideShow1.src=eval("image"+slide+".src"); 
```

这是一个真正不知道自己在做什么的人的标志。您始终能够使用`[]`语法访问对象属性：

```
document.images.SlideShow1.src=window['image'+slide].src; 
```

因此，从来没有必要使用缓慢、危险、糟糕的方法在字符串中创建 JavaScript 表达式并将`eval`其 ing ——即使按照 1996 年的标准，这也很糟糕。

但即便如此，按名称访问变量`window`通常是有问题的。

预计到达时间：

> 谁能教我如何制作一个好的图像幻灯片

好吧，我不知道最好的幻灯片——我相信有人会介入来推广一个最喜欢的现有库，但我们当然可以改进你作为示例获得的代码。

因此，在单独的编号变量中保存一系列对象通常表明您真正想要的是一个数组：

```
# List of image paths inside Images/
#
var paths= [
    'Foam2012/Misty.gif', 'Foam2012/Foamy.gif', 'Foam2012/17.gif', 'Foam2012/16.gif', 'Foam2012/2.gif',
    'Oxjam2012/Rainbow.gif', 'Oxjam2012/17.gif', 'Oxjam2012/9.gif', 'Oxjam2012/2.gif',
    'RagDay2012/GasMask.gif', 'RagDay2012/22.gif', 'RagDay2012/21.gif', 'RagDay2012/20.gif', 'RagDay2012/16.gif', 'RagDay2012/6.gif', 'RagDay2012/5.gif', 'RagDay2012/4.gif', 'RagDay2012/1.gif',
    'UV2012/17.gif', 'UV2012/14.gif', 'UV2012/9.gif', 'UV2012/7.gif', 'UV2012/6.gif',
];

# Preload images
#
var images= [];
for (var i= 0; i<paths.length; i++) {
    var image= new Image();
    image.src= 'Images/'+paths[i];
    images.push(image);
}

# Rotate image every 1.5s
#
var imagei= 0;
setInterval(function() {
    imagei= (imagei+1) % images.length;
    document.getElementById('SlideShow1').src= images[imagei].src;
}, 1500); 
```

您还可以做一些其他的事情来改善这一点 - 例如，最好将所有图像作为`<img>`页面中的标签，以便它们的内容对非 JavaScript 代理（如搜索引擎）可见。`display`然后，您可以使用CSS 样式显示和隐藏它们。

> 或者干脆把我引向一个好的教程？

[这是个问题](http://www.goer.org/Journal/2011/08/search_engines_and_js_tutorials_still_appalling.html)。我有一段时间没找了，但标准通常很差。

虽然我不是 jQuery 的粉丝，但您可能会发现一些使用它的教程材料很有帮助，因为至少它倾向于以更现代的方式编写。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T14:41:36.020

~~Internet Explorer~~可能有一个浏览器在文档对象上没有“图像”属性，因此该测试只是查看幻灯片放映是否可以正常工作。像这样的测试：

```
if (!something.property_name) 
```

在 JavaScript 中是一种测试对象是否具有具有特定名称的属性的方法（根据情况略有风险）。在这种情况下，它没有风险：如果文档对象上有一个“图像”属性，那么它将是文档中图像（`<img>`DOM 元素）的列表（可能为空）。如果该属性不存在，则该测试将返回`true`。

（*编辑*——IE 确实有这个属性，尽管文档跳过了它。）

这里的共识是不值得对其进行测试。我还认为您可能会考虑您真正想要的是否是涵盖页面上*所有*图像的幻灯片。在我看来，这不太可能是现实的；真实页面有用于图标、标题、徽标、小部件等的图像。有更好的 API 可用于查找您感兴趣的图像。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T14:41:37.747

```
if (!document.images) 
```

测试`images`文档中是否存在（不为空），因为

*   不同的浏览器有不同的属性名称
*   该页面可能没有图像

因为`document.images`它似乎没有理由测试属性的存在：http: [//www.w3schools.com/jsref/coll_doc_images.asp](http://www.w3schools.com/jsref/coll_doc_images.asp)

# python - 以毫秒为单位减去时间

> ID：14911457
> 
> 赞同：0
> 
> 时间：2013-02-16T14:40:04.163
> 
> 标签：python, time

我正在尝试计算传感器读取需要多长时间，但无法让它的时间部分工作，我做错了什么？

```
import threading
import time

while True:
    program_time = time.time();
    a = program_time
    b = program_time
    c = program_time
    time = c-a
    print time 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T14:41:50.503

您正在重新分配`program_time`给各种变量。它们*不会*自动更新它们的值，您需要`time.time()`再次调用。

```
>>> import time
>>> time.time()
1361025728.405679
>>> a = time.time()
>>> b = a
>>> b
1361025731.55744
>>> a
1361025731.55744
>>> b - a
0.0
>>> time.time() - b
17.488538026809692 
```

您真的想将至少*一个*调用移到`time.time()`循环之外：

```
start = time.time()
while True:
    now = time.time()
    elapsed = now - start
    print elapsed 
```

# linux - 列出第二个字母为“c”的文件（Linux）

> ID：14911463
> 
> 赞同：1
> 
> 时间：2013-02-16T14:41:00.330
> 
> 标签：linux, shell, grep, ls

我怎样才能做到这一点？我必须使用正则表达式吗？

为了澄清，假设我在一个目录中有以下文件：*abc.sh acb.sh example.c bob.php* - 我想列出第二个字母为 'c' 的文件（即*acb.sh*）。

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-16T14:43:03.743

如果你在 shell 中工作

```
ls ?c* 
```

就是这样。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-16T14:43:12.287

关于什么

```
ls ?c* 
```

我想它会做..问号代表单个字符。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-16T14:51:36.357

```
ls | grep "^.c" 
```

也可以，这里 ^ 表示行首，所以 ^. 表示在开头匹配任何单个字符，然后匹配 c。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-27T08:53:21.293

您也可以使用`find`命令：

```
find ./ -name "?c*.*" 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-09-18T15:48:09.423

```
ls . | grep '^.c' 
```

where`.`代表当前工作目录

或者

```
find / -type d -exec grep '^.c' {}; 
```

或者

```
find / -type d | grep '^.c' 
```

# sql - 实施 BeginTransaction 后的 SQL INSERT 问题

> ID：14911468
> 
> 赞同：0
> 
> 时间：2013-02-16T14:41:12.790
> 
> 标签：sql, transactions, pdo

我的 php 站点上有一些 SQL 查询，我一个接一个地执行。

我想像一个失败一样执行事务，然后不要继续插入其余的事务。

然而，在我的代码中实现事务后，我发现插入不再发生。

谁能指出我哪里出了问题以及如何解决我面临的问题？

```
 $db = getConnection();

        try{
            /* Begin a transaction, turning off autocommit */
            $db->beginTransaction();

            $stmt = $db->prepare('INSERT INTO Orders VALUES(\'\', :ref, :date, :aid, 1)');
            $stmt->bindParam(':ref', $referenceCode);
            $stmt->bindParam(':date', $date);
            $stmt->bindParam(':aid', $agentId);
            $stmt->execute();

            $stmt = $db->prepare('UPDATE Agents SET Agent_OrderCount = :cow WHERE Agent_Id = :aid');
            $stmt->bindParam(':cow', $counter);
            $stmt->bindParam(':aid', $agentId);
            $stmt->execute();

            $db->commit();                  
            sendResponse(200, '{"Error":"0", "Message":"Successfully created order"}');
                return;
        }
        catch(PDOException $e){
        /* Recognize mistake and roll back changes */
            $db->rollBack();
            sendResponse(400, '{"Error":"3002", "Message":"'. $e->getMessage() .'"}');
            return;
        } 
```

在插入事务代码之前，我可以向您保证，所有插入查询都运行良好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T14:47:00.623

> 谁能指出我哪里出错了

当然。
你在 Stackoverflow 上问这个问题，而不是问你的服务器。
创建 PDO 连接后设置此属性

```
$db->setAttribute( PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION ); 
```

然后再次运行您的代码

人类不打算运行代码。是的，我们可以发现一些错误。但是有一个问题：您发布的代码中可能没有错误，但在其他地方。所以，仅仅看代码是没有意义的。代码必须运行。并且必须设置错误报告。因此，您自己的服务器会告诉您出了什么问题，并且这种帮助将比仅仅来自花点时间消化您的代码的人更可靠。

# objective-c - 我可以在 uitableview 中将特定字符串更改为 uibutton 吗？

> ID：14911474
> 
> 赞同：1
> 
> 时间：2013-02-16T14:41:47.720
> 
> 标签：objective-c, string, uitableview, uibutton

我可以将 uitableview 单元格中的特定字符串更改为 UIBUTTON 吗？例如，“路上有一只狐狸”<< 我想将单词 fox 更改为包含标签 fox 的 uibutton。

这是因为我想检测大文本中的特定字符串，并希望以编程方式在该按钮中插入类似超链接的操作。（或者只是在特定文本下划线即可）

问题是1.检测单词的准确点来设置uibutton的框架。当方向改变时文本流动时甚至困难。2.所以我们应该像文本字符串一样管理添加到子视图的按钮。但我不确定这是否可能。

（如果文本在 UIwebview 内，看起来很容易（用下划线标记包含字符串）但我不能在 tableviewcell 的每一行中插入 uiwebviews！）

# java - Arc2D java 上的 MouseInputListener

> ID：14911480
> 
> 赞同：0
> 
> 时间：2013-02-16T14:42:15.867
> 
> 标签：java, swing, mouselistener

我正在用java开发一些可视化。我有一个问题。我正在我的程序中绘制一个 Arc2D，我想在我的 Arc2D 中添加一个 MouseInputListener。问题是，Arc2D 对象在一个矩形上延伸，而不仅仅是正在绘制的线。因此，当我想获得鼠标悬停效果时，它适用于整个矩形，而不仅仅是 Arc2D 的线。你们有没有解决这个问题的方法？

我的代码如下所示：

```
final Arc2D arc =
   new Arc2D.Double(x_pos, 10, x2_pos-x_pos, 190, 0, 360, Arc2D.OPEN);
JPanel jp = new JPanel();
addMouseInputListener(new MouseInputAdapter() {
   @Override
   public void mouseMoved(MouseEvent e) {
      System.out.println( "X: " + e.getX() + " Y: " + e.getY() +
         " Does it touch the arc?: " + arc.contains(e.getX(), e.getY()));
   }
   // More MouseInputListener methods... 
});
ga.draw(arc); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T14:56:07.380

You need to calculate the **distance of the point from the curve**. Then see if it's within an appropriate distance from the curve. You wouldn't want a hotspot that's only 1 pixel thick?!

To do this is not as easy as it might seem. you'll need to take

```
rsquared = pow((e.getX()-circle_centre.x),2) + pow(e.getY()-circle_centre.y,2); 
```

and then see if it lies in an interval

```
rsquared<circle_radius+threshold && rsquared>circle_radius-threshold 
```

And then check the angle

```
angle = Math.atan2(e.getX()-circle_centre.y, e.getY()-circle_centre.y); 
```

which must lie in the interval you want as well.

# xml - 使用 Xpath 1.0 从 id 属性中选择 Xpath 中的不同元素？

> ID：14911482
> 
> 赞同：0
> 
> 时间：2013-02-16T14:42:32.793
> 
> 标签：xml, xslt, xpath

我正在尝试获取与名称匹配的平面列表，并且在我的 XML 中，一个平面存在两次，在我的列表中，它在 HTML 中输出两次，我怎样才能让它只显示一次？我正在为飞机分配 ID 号，因此重复的飞机将具有相同的 ID 号。

这是 XML：

```
<flights
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:noNamespaceSchemaLocation="flights.xsd">

<flight flightid="1">
    <flightno>EK98</flightno>
    <callsign>UAE98</callsign>
    <airline>Emirates Airline</airline>

    <plane planeid="1">
        <name>Airbus 330</name>
        <speed>567</speed>
        <registereddate>07-06-10</registereddate>
    </plane>

    <registration>3A6-EDJ</registration>
    <altitude height="feet">41000 feet</altitude>
    <speed ratio="mph">564 mph</speed>

    <route>
    <routename>Fiumicino-Dubai</routename>
    <course bearing="degrees">154 degrees</course>
    <distance type="miles">2697 miles</distance> 
    <duration>PT5H30M</duration>

        <from>
            <iatacode>FCO</iatacode>
            <airport>Fiumicino</airport>
            <country>Italy</country>
            <city>Rome</city>
            <latitude>41.8044</latitude>
            <longitude>12.2508</longitude>
        </from>

        <to>
            <iatacode>DXB</iatacode>
            <airport>Dubai Intl</airport>
            <country>UAE</country>
            <city>Dubai</city>
            <latitude>25.2528</latitude>
            <longitude>55.3644</longitude>
        </to>
    </route>

</flight>

<flight flightid="2">
    <flightno>BA283</flightno>
    <callsign>BAW283</callsign>
    <airline>British Airways</airline>

    <plane planeid="1">
        <name>Airbus 330</name>
            <speed>567</speed>
        <registereddate>06-12-97</registereddate>
    </plane>

    <registration>3A6-EDJ</registration>
    <altitude height="feet">41000 feet</altitude>
    <speed ratio="mph">564 mph</speed>

    <route>
        <routename>London-L.A</routename>
        <course bearing="degrees">154 degrees</course>
        <distance type="miles">5441 miles</distance> 
        <time>PT11H5M</time>
        <from>

            <iatacode>LHR</iatacode>
            <airport>Heathrow</airport>
            <country>England</country>
            <city>London</city>
            <latitude>51.4775</latitude>
            <longitude>0.4614</longitude>
        </from>

        <to>
            <iatacode>LAX</iatacode>
            <airport>Los Angeles Intl</airport>
            <country>USA</country>
            <city>L.A</city>
            <latitude>33.9471</latitude>
            <longitude>-118.4082</longitude>
        </to>
    </route>

</flight>

</flights> 
```

这是Xpath：

```
 <xsl:element name="ul">
            <xsl:attribute name="style">
                <xsl:text>width:100px; margin:0 auto; padding: 0;</xsl:text>
            </xsl:attribute>
                <xsl:for-each select="flights/flight"> 
                    <xsl:apply-templates select="plane" />
                </xsl:for-each> 
        </xsl:element>

<xsl:template match="plane">
    <xsl:element name="li">
        <xsl:attribute name="style">
            <xsl:text>list-style-type:none; width:100px; margin:0 auto;  margin-top: 20px;</xsl:text>
        </xsl:attribute>
        <a><xsl:attribute name="href">aircraft.php?a=<xsl:value-of select="name" /></xsl:attribute>
            <xsl:value-of select="name" />
        </a>
    </xsl:element>
</xsl:template> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T14:53:59.160

You can use a "Muenchian grouping" trick to achieve this. Define a key at the top level:

```
<xsl:key name="planeById" match="plane" use="@planeid"/> 
```

Then instead of

```
<xsl:for-each select="flights/flight"> 
  <xsl:apply-templates select="plane" />
</xsl:for-each> 
```

Just say

```
<xsl:apply-templates select="flights/flight/plane[generate-id() =
    generate-id(key('planeById', @planeid)[1])]"/> 
```

This has the effect of applying the `plane` template only to the first plane element with each planeid.

# ubuntu - Ubuntu 服务器 10.04 LTS - 如何安装 RVM？

> ID：14911484
> 
> 赞同：0
> 
> 时间：2013-02-16T14:42:36.600
> 
> 标签：ubuntu, rvm, ubuntu-10.04

这些是我安装 RVM 所采取的步骤：

1.  安装 Ruby：`sudo apt-get install curl git-core ruby`which ruby​​ 命令有效

2.  安装 RVM：

    curl -L [https://get.rvm.io](https://get.rvm.io) | bash -s 稳定 --ruby --rails --trace

我的用户是“loam”，`/home/loam/.bashrc`我已将此添加到文件的**最后一行**。

```
if [[ -s $HOME/.rvm/scripts/rvm ]] ; then source $HOME/.rvm/scripts/rvm ; fi

fi 
```

并替换`[ -z "$PS1" ] && return`为`if [[ -n "$PS1" ]]; then`

RVM 脚本完成后，我收到以下消息：

```
* To start using RVM you need to run `source /home/loam/.rvm/scripts/rvm`
    in all your open shell windows, in rare cases you need to reopen all shell windows. 
```

我确实尝试过并得到：

```
$ source /home/loam/.rvm/scripts/rvm
-sh: source: not found 
```

`Which rvm`是**空白**的..我可以看到有一个 .rvm 文件夹`/home/loam`

如果我写：

```
$ $HOME
-sh: /home/loam: Permission denied 
```

**更新：** 我还尝试了[单用户安装位置：~/.rvm/](https://rvm.io//rvm/install) .. 并且仍然哪个 rvm 是空白的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T18:20:07.063

使用此指令 => [https://rvm.io/integration/gnome-terminal/](https://rvm.io/integration/gnome-terminal/)将 shell 设置为`/bin/bash --login`

# spring - 带有 spring-security 的 Spring Java 配置

> ID：14911485
> 
> 赞同：4
> 
> 时间：2013-02-16T14:42:42.950
> 
> 标签：spring, spring-security

出于某种原因（我真的不记得为什么 :)）我决定只使用 Java 来配置 Spring 应用程序。另外我会尽量避免使用 web.xml

我从以下两个 java 配置文件开始。应用程序引导程序.java

```
public class ApplicationBootstrap implements WebApplicationInitializer {
    //public class Initializer 
    public void onStartup(ServletContext servletContext) throws ServletException {
        AnnotationConfigWebApplicationContext rootContext = new AnnotationConfigWebApplicationContext();
        rootContext.register(ApplicationConfig.class);
        rootContext.refresh();

    // Manage the lifecycle of the root appcontext
    servletContext.addListener(new ContextLoaderListener(rootContext));
    servletContext.setInitParameter("defaultHtmlEscape", "true");
    servletContext.setInitParameter("spring.profiles.active", "Production");

     // now the config for the Dispatcher servlet
    AnnotationConfigWebApplicationContext mvcContext = new AnnotationConfigWebApplicationContext();
        mvcContext.register(ApplicationConfig.class);
        mvcContext.getEnvironment().setActiveProfiles("Production");
        mvcContext.getEnvironment().setDefaultProfiles("Production");

    ServletRegistration.Dynamic dispatcher = servletContext.addServlet("dispatcher", new DispatcherServlet(mvcContext));
        dispatcher.setLoadOnStartup(1);
        dispatcher.addMapping("/api/*");

} 
```

和 ApplicationConfig.java

```
@Configuration()
@Profile({"Production", "ControllerUnitTest"})
@EnableWebMvc
@ComponentScan( basePackages = "com.consius.activework.server"  ) 
@EnableAspectJAutoProxy
public class ApplicationConfig extends WebMvcConfigurerAdapter {

} 
```

这按预期工作。没有我的问题开始了。我的想法是使用 spring-security，我寻找一种使用 Java 配置 spring-security 的方法。一段时间后我放弃了，我发现无法使用 Java 配置 spring-security。我决定回到 XML 进行安全配置。

我创建了一个包含以下内容的 web.xml：

```
 <filter>
        <filter-name>filterChainProxy</filter-name>
        <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
    </filter>
    <filter-mapping>
        <filter-name>filterChainProxy</filter-name>
        <url-pattern>/*</url-pattern>
    </filter-mapping> 
```

我在 ApplicationConfig.java 中添加了：

```
 @ImportResource( { "classpath:/spring-security.xml" } ) 
```

并创建了一个名为 spring-security.xml 的新 xml 文件

```
<security:http auto-config='true' create-session="never" realm="Restricted Service" use-expressions="true">
    <security:intercept-url pattern="/rest/**" access="permitAll()" />               
</security:http> 
```

根据文档，这是最低配置。

尝试运行它会出现以下错误（我不明白为什么）

```
SEVERE: Exception starting filter filterChainProxy
org.springframework.beans.factory.NoSuchBeanDefinitionException: No bean named 'filterChainProxy' is defined
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.getBeanDefinition(DefaultListableBeanFactory.java:549)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getMergedLocalBeanDefinition(AbstractBeanFactory.java:1096)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:278)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:198)
    at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1121)
    at org.springframework.web.filter.DelegatingFilterProxy.initDelegate(DelegatingFilterProxy.java:326)
    at org.springframework.web.filter.DelegatingFilterProxy.initFilterBean(DelegatingFilterProxy.java:236)
    at org.springframework.web.filter.GenericFilterBean.init(GenericFilterBean.java:194)
    at org.apache.catalina.core.ApplicationFilterConfig.initFilter(ApplicationFilterConfig.java:281) 
```

谁能帮我？我想我做了一些明显的错误，但我看不到它。

//lg

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2014-01-14T14:14:42.130

坚持使用 Java 配置怎么样？

```
@EnableWebSecurity
public class WebSecurityConfig extends WebSecurityConfigurerAdapter {
    // ...
}

public class WebSecurityInitializer 
        extends AbstractSecurityWebApplicationInitializer {
} 
```

方便的是，WebSecurityInitializer 将为您注册 Spring Security Servlet 过滤器！这是一个很好的解释，有很多细节：

[http://docs.spring.io/spring-security/site/docs/3.2.x/guides/helloworld.html](http://docs.spring.io/spring-security/site/docs/3.2.x/guides/helloworld.html)

顺便说一句......如果没有上述内容，也可以手动进行注册：

```
public class DispatcherServletInitializer 
        extends AbstractAnnotationConfigDispatcherServletInitializer {

    @Override
    public void onStartup(ServletContext servletContext) 
            throws ServletException {
        servletContext
            .addFilter("securityFilter", 
                       new DelegatingFilterProxy("springSecurityFilterChain"))
            .addMappingForUrlPatterns(null, false, "/*");

        super.onStartup(servletContext);
    }

    // Various other required methods...

} 
```

这样，您就可以忘记烦人的 web.xml。:)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-16T15:02:55.530

安全过滤器的名称应该是`springSecurityFilterChain`，即 Spring-security 命名空间分配给 Spring bean 的名称。

```
<filter>
    <filter-name>springSecurityFilterChain</filter-name>
    <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
</filter>
<filter-mapping>
    <filter-name>springSecurityFilterChain</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping> 
```

此外，您已经使用`ApplicationConfig`了根上下文（通过 ContextLoaderListener 加载）和 Web 应用程序上下文（通过 DispatcherServlet 加载），最好为两者保留不同的上下文并仅通过根上下文加载 Spring 安全性

**更新** 为了澄清您在评论中的问题 - Spring MVC 应用程序通常加载了 2 个应用程序上下文，您使用`ContextLoaderListener`(称为) 指定的一个，以及使用(称为 a )`Root Web Application Context`加载的第二个，这实际上是根上下文的子节点，并且在根上下文中定义了对它可见的 bean。根上下文包含与应用程序相关的核心 bean（服务、存储库、实体管理器、安全性等），而 servlet 应用程序上下文仅包含 Spring MVC 所需的东西（控制器、视图解析器等）。现在，在您的情况下，您已指定作为根上下文和 servlet 上下文的一部分，这不是必需的。您可以改为使用`DispatcherServlet``Servlet Web Application Context``ApplicationConfig``ApplicationConfig`只是作为根上下文并为 Web 应用程序上下文使用不同的 MVC 特定上下文。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-24T01:38:06.410

如果您使用的是 Spring 3.1+，那么您可以尝试将上下文配置片段添加到 web.xml；这会将它们联系在一起。为了简单地让它在没有 web 配置的情况下工作，请尝试以下操作：

```
servletContext.addFilter(
            "springSecurityFilterChain",
            new DelegatingFilterProxy("springSecurityFilterChain"))
        .addMappingForUrlPatterns(null, false, "/*"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-16T14:55:38.877

From [DeleagatingFilterProxy](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/web/filter/DelegatingFilterProxy.html) doc

> Proxy for a standard Servlet 2.3 Filter, delegating to a Spring-managed bean that implements the Filter interface.

By default, this implementation will delegate all calls to a bean with the same name as the filter. (in your case it is `filterChainProxy`). So you need to define a bean named `filterChainProxy` and this bean must implement the [`Filter`](http://docs.oracle.com/javaee/6/api/javax/servlet/Filter.html?is-external=true) interface

But Spring Security provides a bean named `springSecurityFilterChain` implementing `Filter` and suitable for spring security. So change the name of your filter to `springSecurityFilterChain`.

This [link](https://stackoverflow.com/questions/10013996/referencing-spring-security-configuration-within-spring-3-1-java-config) may help you

# r - R中的大协方差矩阵

> ID：14911489
> 
> 赞同：7
> 
> 时间：2013-02-16T14:42:52.963
> 
> 标签：r, covariance

从基因表达数据（40000 个基因（变量）x 30 个观察值）我想创建一个 40000 x 40000 协方差矩阵。这绝对比我的 RAM 大。使用包“ff”，我设法为相关性预分配了一个 40000x40000 的空矩阵。然而，'cov' 或 'cor' 函数在我的系统上只能管理一个 5000x5000 的协方差矩阵，所以我必须按块进行 1:5000、5001:10000 等协方差计算并沿对角线填充预分配的矩阵。有谁知道填充矩阵中“缺失补丁”的算法，即 1 和 22000 之间的协方差（或相关性）。我知道我可以做所有成对组合并一个接一个地填充矩阵，但是 'cor ' 非常快......那么，有没有办法通过使用已经计算的协方差来计算 1/22000 的 cov（或 cor）？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T15:39:41.940

您可以使用`cov`2 个参数来计算非对角块。

```
cov( x[,1:5000], x[,5001:10000] ) 
```

# javadoc - 获取文件夹中的文件夹列表？

> ID：14911496
> 
> 赞同：1
> 
> 时间：2013-02-16T14:43:25.927
> 
> 标签：javadoc, google-docs, google-docs-api

我正在尝试列出文件夹。我不想在单个 API 调用中获取所有文件夹列表。是否有任何 API 可用于获取特定文件夹中的文件夹列表？

# python - 使用 beautifulsoup 解析 HTML 页面

> ID：14911498
> 
> 赞同：4
> 
> 时间：2013-02-16T14:43:34.613
> 
> 标签：python, html, beautifulsoup

我开始研究用于解析 HTML 的 beautifulsoup。
例如对于网站“ [http://en.wikipedia.org/wiki/PLCB1](http://en.wikipedia.org/wiki/PLCB1) ”

```
import sys
sys.setrecursionlimit(10000)

import urllib2, sys
from BeautifulSoup import BeautifulSoup

site= "http://en.wikipedia.org/wiki/PLCB1"
hdr = {'User-Agent': 'Mozilla/5.0'}
req = urllib2.Request(site,headers=hdr)
page = urllib2.urlopen(req)
soup = BeautifulSoup(page)

table = soup.find('table', {'class':'infobox'})
#print table
rows = table.findAll("th")
for x in rows:
    print "x - ", x.string 
```

在某些有 url 的情况下，我得到的输出为 None。为什么会这样？

输出 ：

```
x -  Phospholipase C, beta 1 (phosphoinositide-specific)
x -  Identifiers
x -  None
x -  External IDs
x -  None
x -  None
x -  Molecular function
x -  Cellular component
x -  Biological process
x -  RNA expression pattern
x -  Orthologs
x -  Species
x -  None
x -  None
x -  None
x -  RefSeq (mRNA)
x -  RefSeq (protein)
x -  Location (UCSC)
x -  None 
```

例如，在 Location 之后，还有一个包含“pubmed search”但显示为 None。我想知道为什么会这样。

第二：有没有办法在字典中获取 th和
相应的 td 以便于解析？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-16T14:46:35.737

[`Element.string`](http://www.crummy.com/software/BeautifulSoup/bs4/doc/#string)*仅当元素中直接*有文本时才包含值。不包括嵌套元素。

如果您使用的是 BeautifulSoup 4，请[`Element.stripped_strings`](http://www.crummy.com/software/BeautifulSoup/bs4/doc/#strings-and-stripped-strings)改用：

```
print ''.join(x.stripped_strings) 
```

对于 BeautifulSoup 3，您需要搜索所有文本元素：

```
print ''.join([unicode(t).strip() for t in x.findAll(text=True)]) 
```

如果你想将`<th>`和`<td>`元素组合成一个字典，你将遍历所有`<th>`元素，然后使用`.findNextSibling()`来定位相应的`<td>`元素，并将其与上述`.findAll(text=True)`技巧结合起来构建一个字典：

```
info = {}
rows = table.findAll("th")
for headercell in rows:
    valuecell = headercell.findNextSibling('td')
    if valuecell is None:
        continue
    header = ''.join([unicode(t).strip() for t in headercell.findAll(text=True)])
    value = ''.join([unicode(t).strip() for t in valuecell.findAll(text=True)])
    info[header] = value 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-16T14:50:56.813

如果您检查 html，

```
<th colspan="4" style="text-align:center; background-color: #ddd">Identifiers</th>
</tr>
<tr class="">
<th style="background-color: #c3fdb8"><a href="/wiki/Human_Genome_Organisation" title="Human Genome Organisation">Symbols</a></th>
<td colspan="3" class="" style="background-color: #eee"><span class="plainlinks"><a rel="nofollow" class="external text" href="http://www.genenames.org/data/hgnc_data.php?hgnc_id=15917">PLCB1</a>; EIEE12; PI-PLC; PLC-154; PLC-I; PLC154; PLCB1A; PLCB1B</span></td>
</tr>
<tr class="">
<th style="background-color: #c3fdb8">External IDs</th> 
```

您会在`Identifiers`和之间看到`External IDs`一个`<th>`没有文本的标签，只有一个`<a>`标签：

```
<th style="background-color: #c3fdb8"><a href="/wiki/Human_Genome_Organisation" title="Human Genome Organisation">Symbols</a></th> 
```

这`<th>`没有文字。`x.string`也是如此`None`。

# ajax - node.js - 我如何实际获得请求？

> ID：14911501
> 
> 赞同：0
> 
> 时间：2013-02-16T14:43:39.540
> 
> 标签：ajax, node.js

我最近问了很多问题；）
所以我在创建网络聊天方面取得了一些进展。

所以我让它工作了，
我的问题是，如何在 textarea 中输入一些东西，点击输入后，消息将登录到服务器？

我更新了代码，所以它可以工作。

node.js 文件 -

```
var http = require('http');
var fs = require('fs');
var path = require('path');

var messages = [];

// Simple Function to Load all of the HTML/CSS/JavaScript Files.
function LoadHTML(html, requrl, res) {
    var filePath = '.' + requrl;
    if (filePath == './') {
        filePath = './' + html;
    }

    var extname = path.extname(filePath);
    var contentType = 'text/html';
    switch (extname) {
        case '.js':
            contentType = 'text/javascript';
        break;
        case '.css':
            contentType = 'text/css';
        break;
    }

    fs.exists(filePath, function(exists) {

        if (exists) {
            fs.readFile(filePath, function(error, content) {
                if (error) {
                    res.writeHead(500);
                    res.end();
                }
                else {
                    res.writeHead(200, { 'Content-Type': contentType });
                    res.end(content, 'utf-8');
                }
            });
        }
        else {
            res.writeHead(404);
            res.end();
        }  
    });  
}

var server = http.createServer(function (req, res) {

    var url = req.url;

    LoadHTML('index.html', url, res);

    if(url.substring(0,16) == "/ser.js?message=") {
        var message = url.substring(16, url.length);
        console.log(message);
    }

}).listen(8125); 
```

这是 HTML/CSS/JavaScript 代码 - [http://jsfiddle.net/Q79PK/1/](http://jsfiddle.net/Q79PK/1/)

**编辑：**我让它工作，我更新了代码，你可以看看和学习；）
投票会很棒！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T16:16:44.177

您不应该使用`http.get(options, callback)`它，因为它旨在执行没有数据的 HTTP GET。而是使用`http.request(options, callback)`where 您将能够向请求添加数据。请参阅：[http ://nodejs.org/api/http.html#http_http_request_options_callback](http://nodejs.org/api/http.html#http_http_request_options_callback)

对于在请求中发布的服务器端日志记录和处理数据，请将 netire`req`对象作为 loadHTML 函数的参数（而不是`req.url`）。然后您将能够向 ServerRequest 添加一个侦听器：

```
req.addListener("data", function(data) {
    console.log("data : "+data);
}); 
```

（并`var filePath = '.' + req;`相应地更新为`var filePath = '.' + req.url;`）。

如果你有它，你可以通过使用 cURL 命令模拟请求来测试它：

```
curl -d "some data" http://localhost:8125 
```

在服务器端，您有以下日志记录：

```
data : some data 
```

这是我所做的代码的完整修改：

```
var http = require('http');
var fs = require('fs');
var path = require('path');

var messages = [];

// Simple Function to Load all of the HTML/CSS/JavaScript Files.
function LoadHTML(html, req, res) {
    var filePath = '.' + req.url;
    if (filePath == './') {
        filePath = './' + html;
    }

    req.addListener("data", function(data) {
        console.log("data : "+data);
    });

    var extname = path.extname(filePath);
    var contentType = 'text/html';
    switch (extname) {
        case '.js':
            contentType = 'text/javascript';
        break;
        case '.css':
            contentType = 'text/css';
        break;
    }

    fs.exists(filePath, function(exists) {

        if (exists) {
            fs.readFile(filePath, function(error, content) {
                if (error) {
                    res.writeHead(500);
                    res.end();
                }
                else {
                    res.writeHead(200, { 'Content-Type': contentType });
                    res.end(content, 'utf-8');
                }
            });
        }
        else {
            res.writeHead(404);
            res.end();
        }  
    });  
}

var server = http.createServer(function (req, res) {
    LoadHTML('./index.html', req, res); // Calling the Function to load all of the files.
}).listen(8125); 
```

高温高压

# python - 带有南的 geodjango 导致使用 spatialight db 出现“重复的列名错误”

> ID：14911503
> 
> 赞同：2
> 
> 时间：2013-02-16T14:43:41.727
> 
> 标签：python, django, django-south, geodjango

我有 geodjango 的自定义字段：

```
from django.contrib.gis.db import models as geomodels

class PointField(geomodels.PointField):
    def formfield(self, **kwargs):
        defaults = {
            'form_class': CustomFormField
        }
        defaults.update(kwargs)
        return super(PointField, self).formfield(**defaults)

try:
    from south.modelsinspector import add_introspection_rules
    from south.introspection_plugins.geodjango import rules

    add_introspection_rules(rules, ["^project\.apps\.appname\.fields\.PointField"])
except ImportError:
    pass 
```

和 Django-South 迁移：

```
class Migration(SchemaMigration):

    def forwards(self, orm):
        # Adding field 'Address.geoposition'
        db.add_column('company_address', 'geoposition',
                      self.gf('project.apps.appname.fields.PointField')(srid=900913, geography=True),
                      keep_default=False)

    def backwards(self, orm):
        # Deleting field 'Address.geoposition'
        db.delete_column('company_address', 'geoposition') 
```

当执行此迁移时，我收到错误：

```
AddGeometryColumn() error: "duplicate column name: geoposition"
CreateSpatialIndex() error: either "company_address"."geoposition" isn't a Geometry column or a SpatialIndex is already defined 
```

我已经没有想法了，不知道如何解决这个问题。

软件：

*   姜戈 1.4
*   空间视界 3.0.1
*   gdal 1.9.2
*   南 0.7.6

db 的地理元数据已启动：

```
subprocess.call(["spatialite", settings.DATABASES['default']['NAME'], "SELECT InitSpatialMetaData();"]) 
```

并添加了 srs 条目：

```
from django.contrib.gis.utils import add_srs_entry
add_srs_entry(900913) 
```

当我禁用迁移时，我没有收到任何错误。禁用迁移的代码：

```
SOUTH_MIGRATION_MODULES = {
    'appname': 'ignore',
} 
```

但是我需要一切都可以很好地处理迁移。任何想法是什么导致了问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-07-17T05:42:03.210

深入研究代码，传统的 alter table 语句不适用于空间字段，它会尝试创建“None”列，然后使用`AddGeometryColumn`命令正确创建它。但是，South 似乎没有得到提示，因此`AddGeometryColumn`失败了，因为该列已经存在。

仍在努力寻找答案，但我希望它只是升级到新版本。我会及时向大家发布！

[Django 源码](https://github.com/django/django/blob/bc0aba7786978ec312809eae5ecb3d751608b5b7/django/contrib/gis/db/backends/spatialite/operations.py#L192)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T15:04:22.573

您正在尝试覆盖现有的模型字段，imo 您将不得不修补基类以使其工作。

例如，这样的事情应该可以解决问题

```
from django.contrib.gis.db.models import Address

class CustomPointField(geomodels.PointField):
    def formfield(self, **kwargs):
        defaults = {
            'form_class': CustomFormField
        }
        defaults.update(kwargs)
        return super(PointField, self).formfield(**defaults)

Address.add_to_class('geoposition', CustomPointField()) 
```

我不确定南是否会接受这个，所以你可能需要一个新的同步数据库或手动更改。

# iphone - 如何从 iphone 的 nsmutable 数组中删除选定的行？

> ID：14911504
> 
> 赞同：0
> 
> 时间：2013-02-16T14:43:48.987
> 
> 标签：iphone, ios, ipad

我有一个聊天应用程序，当有人向您发送消息时，我会在每个单元格中放置一个新的消息字符串。为此，我将新消息添加到数组中，就像`[newmessagearrays addObject:event.data];`在添加重新加载表格视图之后一样，以在单元格中显示新消息。如果您选择一个单元格，我会尝试从我的数组中删除该项目，例如`[self.newmessagearrays removeObjectAtIndex:indexPath.row];`. 对于第一种情况，它工作正常。当我回来并选择下一个时它崩溃了。任何人都可以帮助我实现这一目标吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T14:48:31.030

修改 UITableView 的数据源后，您需要调用`– deleteRowsAtIndexPaths:withRowAnimation:`或`reloadData`. 如果这不能解决问题，请发布您的代码和崩溃日志，因为问题出在其他地方。

# css - IcoMoon 图标在 Internet Explorer 8 中不起作用

> ID：14911505
> 
> 赞同：5
> 
> 时间：2013-02-16T14:43:49.823
> 
> 标签：css, internet-explorer-8, internet-explorer-7, font-face, haslayout

[我在我的网站上使用 IcoMoon 图标，虽然它们在所有现代浏览器中都能完美运行，但它们在Internet Explorer 7](http://en.wikipedia.org/wiki/Internet_Explorer_7)中根本不起作用，在Internet Explorer [8](http://en.wikipedia.org/wiki/Internet_Explorer_8)中显示为小框。除了字体的相对路径之外，CSS 如下来自 IcoMoon：

```
@font-face {
    font-family: 'icomoon';
    src:url ('../fonts/icomoon.eot');
    src:url('../fonts/icomoon.eot?#iefix') format('embedded-opentype'),
        url('../fonts/icomoon.woff') format('woff'),
        url('../fonts/icomoon.ttf') format('truetype'),
        url('../fonts/icomoon.svg#icomoon') format('svg');
    font-weight: normal;
    font-style: normal;
    font-variant:normal;
} 
```

我正在使用 data-icon 属性（例如`<li data-icon="&#xe003;"><a href`等）在我的导航中显示图标。

问题可能是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-05-05T15:37:23.397

在 iconmoon 上生成图标时，转到首选项并检查对 ie6 和 ie7 的支持 ![选中此框](../Images/2bc512aa33fa1b53816e7d673d24da1b.png)

你会在你的字体中得到一个单独的 ie7 文件夹，然后在你的脑海中使用类似的东西。

```
<!--[if lte IE 8]>
        <link rel="stylesheet" href="ie7/ie7.css">
<![endif]--> 
```

有两个文件可以使用 ie7.css 或 ie7.js

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-15T03:05:23.953

[当我将Joomla](http://en.wikipedia.org/wiki/Joomla) 3x 与[Bootstrap](https://en.wikipedia.org/wiki/Bootstrap_%28front-end_framework%29)和 IcoMoon一起使用时，我一直在互联网上寻找这个自我相同困境的答案。它在 Internet Explorer 7 或 Internet Explorer 6 中也不起作用。根据这个[Stack Overflow question](https://stackoverflow.com/questions/5576616/font-face-being-ignored-by-ie7)您的问题可能是：

1.  `zoom:1`通过 CSS（Internet Explorer 专有）分配有问题的元素 hasLayout 。
2.  Internet Explorer 7的`@font-face`声明不同（在对问题的最后答复中概述）。
3.  也可能是您的字体类型未得到正确支持。

而且我认为@Damonsson 指的是 Internet Explorer 的惊人能力，它永远不会按预期做任何事情......或要求......甚至恳求，哭泣乞求这样做。

狩猎愉快！

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-11-26T01:28:34.150

以下内容可能会对您有所帮助。在 Internet Explorer 8 之前不支持 PPseudo 元素。我正在尝试自己解决 Internet Explorer 8 的困境......

[http://icomoon.io/#docs/lte-ie7](http://icomoon.io/#docs/lte-ie7)

# python - Python、PyQt4、Qt Designer：选择和处理在 PyQt4 文本编辑器字段中输入的文本

> ID：14911515
> 
> 赞同：0
> 
> 时间：2013-02-16T14:45:36.230
> 
> 标签：python, pyqt4, qt-designer

我正在尝试使用 Python 创建的带有 PyQt4 GUI 的小型编辑器。

到目前为止，该程序可以打开一个文本文件、显示文本、保存对它的更改或对其完全执行操作（如按下按钮并计算单词）。

但是，我想创建一个更改选定文本的函数（在 PyQt4 的 textEdit 对象中）。例如，选择一段并计算单词的数量，或反转字母，或其他）。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T17:45:33.597

textCursor 为您提供光标，它是一个 QTextCursor。

它有一个名为 select 的插槽，您可以使用它。无论如何看看那个类，你会找到你需要的。

[http://doc.qt.digia.com/stable/qtextcursor.html](http://doc.qt.digia.com/stable/qtextcursor.html)

[http://doc.qt.digia.com/stable/qtextedit.html](http://doc.qt.digia.com/stable/qtextedit.html)

# javascript - 为什么javascript不返回样式属性？

> ID：14911516
> 
> 赞同：0
> 
> 时间：2013-02-16T14:45:37.113
> 
> 标签：javascript, dom

```
<html>
<head>
    <title>Return Width</title>
    <style type="text/css">
        #foo { background: green; width: 80px; }
    </style>
    <script type="text/javascript">
        function getWidth() {
            alert(document.getElementById("foo").style.width);
        }
    </script>
</head>
<body>
<div id="foo" onClick="getWidth()">
    Hello World
</div> 
```

我一直在尝试返回几个属性，包括`width`and`backgroundColor`我发现我可以设置属性但我不能返回它们。为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T14:49:53.967

这仅适用于内联样式。[将 getComputedStyle](https://developer.mozilla.org/en-US/docs/DOM/window.getComputedStyle)用于通过非内联样式设置的 CSS。

```
function getWidth() {
    var elem = document.getElementById("foo");
    var theCSSprop = window.getComputedStyle(elem, null).getPropertyValue("width");
    alert(theCSSprop);
} 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/rTaD5/)**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-16T14:49:04.657

`style`属性引用直接应用于元素的样式（通过属性`style`或`style`属性）。它不引用通过级联应用的样式。

为此，您想要[`getComputedStyle`](https://developer.mozilla.org/en/docs/DOM/window.getComputedStyle).

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-16T14:57:43.903

根据您需要访问的属性，您还有其他方法，例如getComputedStyles 在 ie7 和 ie8 上不起作用，尽管您可以尝试这个，是跨浏览`offsetwidth`器`offsetheight.`

```
function getStyle(el, cssprop){
 if (el.currentStyle) //IE
  return el.currentStyle[cssprop]
 else if (document.defaultView && document.defaultView.getComputedStyle) //Firefox
  return document.defaultView.getComputedStyle(el, "")[cssprop]
 else //try and get inline style
  return el.style[cssprop]
} 
```

# cakephp - CakePHP：自动搜索预先选择的下拉值

> ID：14911517
> 
> 赞同：0
> 
> 时间：2013-02-16T14:45:39.163
> 
> 标签：cakephp, search, drop-down-menu

我有一个搜索表单，它有一个文本输入框、三个复选框和一个基于数据库用户数据的下拉列表中的预选默认值。例如，如果用户住在公社 1，则在下拉列表中选择 1 作为默认值。

我希望 CakePHP 在按该值过滤的数据库中执行搜索，并返回分页结果。按下提交按钮时这很容易，但我想在没有用户交互的情况下在页面加载时执行搜索。

现在，在控制器中，我尝试从下拉列表之外的其他地方获取公社价值：

```
if ($this->request->is('post)) {
    //Perform normal search with the other input fields included.    
} else {
    //Do the filtered search only by commune value, which I get from a function.   
} 
```

问题是，那么分页将不起作用。这是预期的，因为分页使用 GET。当我尝试更改页面时，它不是一个帖子，并且搜索条件将再次设置为只有公社值的值，并且我在 SQL 语句中出现错误。

如果我上面的解释有点混乱，我很抱歉，但你必须原谅我，因为英语不是我的第一语言。

我需要有关如何以另一种方式做到这一点的建议。有可能吗？我怀疑有一个简单的解决方案，但我是 CakePHP 的新手，似乎无法理解。

### 执行搜索

```
$conditions = $this->setSearchConditions($this->request->data);
$res = $this->paginate('Ad', array($conditions));
$this->set('res', $res);

//limit is set in public $paginate variable 
```

### 设置搜索条件

```
private function setSearchConditions($data) {

    $conditions = array();
   // $this->log('Search: DATA', 'debug');
    //$this->log($data, 'debug');

    if ($this->request->is('post)) { //Submit-button is clicked, performing full search
        //$this->log('Dette er en post', 'debug');

        if ($data['Ad']['searchField']) { //Text searchfield is not empty, adding title or description to search criteria
            $this->log('Søkefeltet er ikke tomt', 'debug');
            $str_search = '%' . $data['Ad']['searchField'] . '%';
            $conditions[] = array(
                'OR' => array(
                    'Ad.title LIKE' => $str_search,
                    'Ad.description LIKE' => $str_search
                )
            );
        }//if

        if ($data['Ad']['commune_id']) { // Commune dropdown is not empty, adding   commune_id to search criteria
            $conditions[] = array(
                'Ad.commune_id' => $data['Ad']['commune_id']
            );
        }//if

        if ($data['Ad']['type_id']) { // Type checkboxes are not empty, adding type_id to search criteria
            $orArray = array();
            foreach ($data['Ad']['type_id'] as $type) {
                $orArray[] = array('Ad.type_id' => $type);
            }
            $conditions[] = array(
                'OR' => $orArray
            );
        }//if
    } else {
       $conditions[] = array(
         'Ad.commune_id' => $this->getDefaultCommune(); 
       ):
    }

    return $conditions;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T18:07:40.907

我尝试了 CakeDC 搜索插件（请参阅最初问题中对 Marks 评论的回答。）并通过电子邮件向他们发送了一个类似的问题。解决方案是设置一个具有默认搜索条件的数组，并将其与搜索条件合并。这是控制器代码：

```
public function view() {
    $this->set('title_for_layout', 'Localtrade Norway');
    $this->set('show_searchbar', true); //Shows searchbar div in view
    $this->log($this->request->data, 'debug');

    //Setting users home commune as default filter when the form is not submitted.
    $default_filter = array(
        'Ad.commune_id' => $this->Auth->user('User.commune_id')
    );

    $this->Prg->commonProcess(); //Search-plugin
    $this->paginate = array(
        'conditions' => array_merge($default_filter, $this->Ad->parseCriteria($this->passedArgs)), //If Ad.commune_id is empty in second array, then the first will be used.
        'fields' => $this->Ad->setFields(),
        'limit' => 3
    );
    $this->set('res', $this->paginate());
} 
```

# jquery - 如何使用 jquery 将背景大小设置为 100%？

> ID：14911519
> 
> 赞同：2
> 
> 时间：2013-02-16T14:45:48.013
> 
> 标签：jquery, html, css

当我使用 nivo-lazy 滑块时，会出现一个问题，即图像不适合滑块包装器。在 nivo 滑块上，我找到了一个解决方案

```
.nivoSlider img {
position:absolute;
top:0px;
left:0px;
max-width: none;

    width:100%;
    height:100% !important;
} 
```

但它不适用于 nivo-lazy 滑块。

我认为 nivo-lazy 滑块通过使用 jquery 更改背景图像来工作。当我把 background-size:100% 100%; 浏览器检查元素的元素样式；它会起作用。所以我需要通过 Jquery 将 background-size 设置为 100%。

我怎样才能做到这一点？？提前感谢您的帮助。

**更新**

我用下面的格式写。

```
slider.css('background','url("something.jpeg") no-repeat','background-size','100% 100%'); 
```

在 jquery-nivo-slider.js 第 123 行。

然后我将代码更改为

```
slider.css('background','url("'+ parse_src(vars.currentImage) +'") no-repeat'); 
document.getElementById('slider').style.backgroundSize = "100% 100%"; 
```

但是现在的问题是我使用了动态大小的图像，并且该滑块将根据每个图像的宽度适当地设置小的小 div 及其宽度。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T14:57:47.713

您可以使用 jQuery 更改任何 CSS 属性。

如果您正在使用的元素 has `id="nivo-lazy-div`，请执行以下操作：

```
$("#nivo-lazy-div").css("background-size":"100% 100%"); 
```

**更新**

如果您只是更改背景图像，那么您实际上不需要每次都设置它。只需将其添加到您的 CSS 中，任何背景图像都会重新调整大小。

```
#nivo-lazy-div{
    background-size:100% 100%;
} 
```

**更新**

做这个：

```
slider.css({
    'background' : 'url("' + parse_src(vars.currentImage) + '") no-repeat',
    'background-size' : '100% 100%',
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T17:48:31.563

您可以在文档加载后使用 jQuery 将背景设置为 100%。例如，最好将 id 用于您的 img 标签。

```
<img id="image" src="your_image.jpg"> 
```

使用下面的书面代码..

`<script>$(document).ready(function(){ $('#image').css("width":"100%","height":"100%"); }); </script>`

不要忘记添加 jQuery 库。

或者你可以简单地使用..

```
<img src="your_image.jpg" width="100%" height="100%" > 
```

我希望它会奏效。

# c - 数组 - 值跳转

> ID：14911524
> 
> 赞同：3
> 
> 时间：2013-02-16T14:45:58.730
> 
> 标签：c, arrays

我正在尝试计算字典中单词开头字母的频率，其中包含 140 000 个单词。我将频率保存在数组**count**中，count[0] 用于字母 a，count [1] 用于字母 b ...但是，当我对数组**count**求和时，该值不等于单词总数在字典里。我发现如果我将字典大小减少到 95137，数字相等，但是一旦字典超过 95137 个单词，count[0] 到 count[4] 的值突然变得非常大。我不知道为什么..这是我的代码：

```
#include <stdio.h>
#include <string.h>
#include <stdlib.h>

int main(void)
{
    FILE *fp = fopen("testdic.txt", "r");
    int count[26];
    char buffer[30];
    for (int i = 0; i < 26; i++)
        count[i] = 0;
    int total = 0;
    while (1)
    {
        fscanf(fp, "%s", buffer);
        if (feof(fp))
            break;
        count[buffer[0]-97] ++;
        total++;
        if (count[0] > total)            // I used this to find out where the jump occurs
            break;
    }
    printf("%d ", i);
    for (int i = 0; i < 26; i++)
        printf("%d " , count[i]);

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T14:54:12.597

It is difficult to know why this code produces strange outputs, since you are forgetting several debug checkings.

*   `feof` should be used only if your read function fails;
*   you don't check `fopen` return value;
*   you don't check `scanf` return value;
*   you don't check `buffer[0]` value;
*   you don't check `buffer` length in `%s`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T14:58:25.760

在此语句中`count[buffer[0]-97] ++;`，您正在考虑通过获取起始字母的 ascii 值并减去 97 即 ascii 值来导出索引`a`。我不确定您是否打算处理以大写字母开头的单词，例如`Ascii`where `buffer[0]`is 65 并且表达式的`buffer[0] - 97`计算结果为负整数。这可能会导致堆栈损坏。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T14:50:26.007

不知道这是否是问题所在，但您的代码应该关心单词中是否包含奇数字符。所以，简单地做

```
count[buffer[0]-97] 
```

如果你问我有点鲁莽！`buffer[0] >=97 & buffer[0]<97+26`在执行该行之前，我会确保这一点。否则，谁知道你在增加什么！

——会不会是你的第 95138 个单词以一个有趣的字符开头？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-16T15:01:52.830

你的`total`变量是在你的`count`数组之后声明的——所以当你超出数组的范围时，你会把一切都搞砸了。小于 'a' 的字符会特别糟糕 - 但坦率地说，第一个大写字母就足够了。使用`count[(buffer[0]-'a')%26]++`- 模除法迫使您留在阵列中。这是一个kluge，但如果这有效，你可以开始寻找坏角色。

# r - R模型拟合例程无法在函数中运行

> ID：14911525
> 
> 赞同：1
> 
> 时间：2013-02-16T14:46:03.657
> 
> 标签：r, bradleyterry2

我正在使用 Firth 和 Turner 的[BradleyTerry2](http://cran.r-project.org/web/packages/BradleyTerry2)包进行配对比较，但在使用主要拟合函数**BTm 时**遇到了一个神秘问题。这是他们自己的示例中的最小数据设置：

```
data(citations, package = "BradleyTerry2")
citations.sf <- countsToBinomial(citations)
names(citations.sf)[1:2] <- c("journal1", "journal2") 
```

因此，在控制台上，以下工作：

```
citeModel <- BTm(cbind(win1, win2), journal1, journal2, data = citations.sf) 
```

但以下*不起作用*

```
f1 <- function(x){ BTm(cbind(win1, win2), journal1, journal2, data=x) }
f1(citations.sf) 
```

虽然这个（统计上荒谬但）结构相似的线性模型示例*确实*有效，正如我所期望的那样：

```
f2 <- function(x){ lm(log(win1/win2) ~ journal1, data=x) }
f2(citations.sf) 
```

f1 的错误是“eval 中的错误（substitute(expr), data, enclos = parent.frame())：invalid 'envir' argument”。但这并没有告诉我任何我能理解的东西。

想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T12:27:53.257

感谢您在现有错误报告[[#2294] objects not found when BTm not called in global environment](https://r-forge.r-project.org/tracker/?func=detail&atid=3052&aid=2294&group_id=762)上链接到这篇文章。

在内部设置数据时，BTm 在公式环境中查找对象，然后在全局环境中查找对象。如果没有为 BTm 指定公式，则公式在内部定义，并且按照当前的实现方式，继承调用 BTm 时构建的环境，而不是调用 BTm 的环境。

在我解决这个问题之前，有一个简单的解决方法 - 在函数中使用 BTm 时始终指定一个公式，以便公式的环境是在调用函数时创建的。例如

```
> f1 <- function(x){ BTm(cbind(win1, win2), journal1, journal2, ~.., data=x) }
> f1(citations.sf)
Bradley Terry model fit by glm.fit 

Call:  BTm(outcome = cbind(win1, win2), player1 = journal1, player2 = journal2, 
    formula = ~.., data = x)

Coefficients:
..Comm Statist          ..JASA        ..JRSS-B  
       -2.9491         -0.4796          0.2690  

Degrees of Freedom: 6 Total (i.e. Null);  3 Residual
Null Deviance:  1925 
Residual Deviance: 4.293    AIC: 46.39 
```

# c - 请解释本程序中的逗号运算符

> ID：14911528
> 
> 赞同：14
> 
> 时间：2013-02-16T14:46:50.327
> 
> 标签：c, comma

请解释一下这个程序的输出：

```
int main()
{    
    int a,b,c,d;  
    a=10;  
    b=20;  
    c=a,b;  
    d=(a,b);  
    printf("\nC= %d",c);  
    printf("\nD= %d",d);  
} 
```

我得到的输出是：

```
C= 10  
D= 20 
```

我的疑问是“，”运算符在这里做什么？
我使用代码块编译并运行程序。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-02-16T14:49:22.060

`,`运算符计算一系列表达式并返回最后一个的值。

`c=a,b`是一样的`(c=a),b`。这就是为什么 c 是 10

`c=(a,b)`会将 的结果（`a,b`即 20）分配给`c`。

正如 Mike 在评论中指出的那样，赋值 ( `=`) 的优先级高于逗号

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-02-16T14:51:17.473

好吧，这是关于运算符优先级的：

```
c=a,b 
```

是

相当于

```
(c=a),b 
```

关键是，“，”运算符将返回第二个值。

因此

```
c=a,b 
```

将 a 分配给 c 并返回 b

```
d=(a,b) 
```

返回 b 并将其分配给 d

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-16T14:49:07.613

逗号运算符计算其所有操作数，然后得出最后一个表达式的值。

# php - 调用类子方法而不是其孙方法

> ID：14911529
> 
> 赞同：0
> 
> 时间：2013-02-16T14:46:52.367
> 
> 标签：php, oop, abstract-class

我的问题是 REQ 类将调用 REQ_User 的 get() 方法而不是用户的 get() 方法。

是否可以让 REQ 类调用 REQ_User 的 get() 方法。或者这是一个糟糕的 OOP 设计？有没有更好的 OOP 设计我可以做？

REQ 是处理一般路由的主要路由器。

```
abstract class REQ{
    function get(){die('get() is not available');}
    function get_id($id){die('get_id() is not available');}
    function __construct(){
        http_response_code(500);//We dont know if its gonna be an unknown error in the future.
        if($_SERVER['REQUEST_METHOD']==='GET' && isset($_GET['id']))
            $this->get_id( (int)$_GET['id'] );
        elseif( $_SERVER['REQUEST_METHOD']==='GET' )
            //Heres is the actual problem of my question.
            //This will call the youngest child class which is user's get() method.
            //I need it to call the REQ_User's get() method instead.
            $this->get();

        //Much more routes is supposed to be here like post,delete,put etc. But this is just a example.
    }
} 
```

**REQ_User**添加了比 REQ 更多的能力。仅适用于用户管理器类的能力。

```
abstract class REQ_User extends REQ{
    function session(){die('session() is not available');}
    function get(){//I need this method to be called instead of user's get() method.
        if(isset($_GET['session'])){
            $this->session();
        }else{//Call either its parent or its child but never its self.
            if(get_class($this) === __CLASS__) parent::get();
            else $this->get();
        }
    }
} 
```

**REQ_Comment**增加了比 REQ 所能做的更多的能力。仅适用于评论管理器类的能力。

```
abstract class REQ_Comment extends REQ{
    function byuser($id){die('byuser() is not available');}
    function get(){
        if(isset($_GET['byuser'])) $this->byuser( (int)$_GET['id'] );
        else{//Call either its parent or its child but never its self.
            if(get_class($this) === __CLASS__) parent::get();
            else $this->get();
        }
    }
} 
```

*请注意，get() 不会调用它自己，但只有它的父级或它的子级取决于子级是否获得方法 get()。

实际的逻辑出现在这些类中。顶级课程。这些课程非常专业。

```
class user extends REQ_User{
    //If no url parameter is set then this will get a collection of users.
    function get(){
        http_response_code(200);
        die('user1,user2...');
    }
    function session(){
        http_response_code(200);
        session_start();
        die(json_encode($_SESSION['user']));
    }
};
class comment extends REQ_Comment{
    function byuser($id){//Specialized route only for comments based classes.
        http_response_code(200);
        die('comment1,comment2... by user '.$id);
    }
    function get_id($id){//This comes directly from REQ class.
        http_response_code(200);
        die('user '.$id);
    }
};

//new comment();
//new user(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T19:09:50.020

从if 两者都应该调用`parent::get()`的`get`方法中调用。否则你应该只用另一个名字`user`给方法。`user`

关于您的 OO 设计：我不了解您的代码的目的，但仅凭您必须提出这个问题这一事实就暗示了糟糕的设计，是的。另外：可能是继承的错误使用，职责混合，命名不明确......

如果 $_GET['session'] 未设置（方法调用自身），这将导致无限递归：

```
function get(){
    echo 'REQ_user method';
    if(isset($_GET['session'])){
        $this->session();
    }else{
        $this->get();
    } 
```

# asp.net-mvc - .Net Ajax BeginForm 回调未触发

> ID：14911531
> 
> 赞同：0
> 
> 时间：2013-02-16T14:47:10.097
> 
> 标签：asp.net-mvc, unobtrusive-validation

**更新 2：**

jQuery 版本兼容性问题。

**更新1：**

我的脚本参考中有一个错字。但是我现在遇到这个问题：

```
TypeError: $(...).live is not a function

$("a[data-ajax=true]").live("click", function (evt) { 
```

======================================

当我在控制器中通过 ajax.beginform 提交有效表单时，它返回显示在视图中的 JSON，而不是由回调函数处理，我不知道为什么会这样。

我从网上拿了一个演示项目，以防万一它看起来很熟悉。

**HTML/JS**

```
@model Unobtrusive_Validation.Models.BlogPost

<html>
    <head>
    </head>
    <body>
        <script src="~/Scripts/jquery-1.9.1.js"></script>
        <script src="~/Scripts/jquery.validate.js"></script>
        <script src="~/Scripts/jquery.validate.unobtrusive.js"></script>
        <script src="~/Scripts/jquery.unobtrusive.ajax.js"></script>

        @using (Ajax.BeginForm("Test", "BlogPost",
            new AjaxOptions{
                HttpMethod = "POST",
                OnSuccess = "OnSuccess",
                OnBegin = "alert('OnBegin')",
                OnComplete = "alert('OnComplete')",
                OnFailure = "alert('OnFailure')"
            } )
        )
        {
            @Html.ValidationSummary(true)

            <fieldset>
                <legend>BlogPost</legend>

                <div class="editor-label">
                    @Html.LabelFor(model => model.PostedOn)
                </div>
                <div class="editor-field">
                    @Html.EditorFor(model => model.PostedOn)
                    @Html.ValidationMessageFor(model => model.PostedOn)
                </div>

                <div class="editor-label">
                    @Html.LabelFor(model => model.Title)
                </div>
                <div class="editor-field">
                    @Html.EditorFor(model => model.Title)
                    @Html.ValidationMessageFor(model => model.Title)
                </div>

                <div class="editor-label">
                    @Html.LabelFor(model => model.Content)
                </div>
                <div class="editor-field">
                    @Html.EditorFor(model => model.Content)
                    @Html.ValidationMessageFor(model => model.Content)
                </div>

                <div class="editor-label">
                    @Html.LabelFor(model => model.Category)
                </div>
                <div class="editor-field">
                    @Html.EditorFor(model => model.Category)
                    @Html.ValidationMessageFor(model => model.Category)
                </div>

                <p>
                    <input type="submit" value="Create" />
                </p>
            </fieldset>
        }
    </body>

    <script type='text/javascript'>
        function OnSuccess(result) {
            console.log(result);
            if (result.success == false) {
                alert("failed");
            }
        }
    </script>
</html> 
```

**控制器：**

```
public class BlogPostController : Controller
{
    // GET: /BlogPost/Create

    public ActionResult Create()
    {
        return View();
    }

    [HttpPost]
    public ActionResult Test(BlogPost _model)
    {
        return Json(new {success = false} );
    }
} 
```

**网页配置**

```
<add key="ClientValidationEnabled" value="true" />
<add key="UnobtrusiveJavaScriptEnabled" value="true" /> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-16T14:48:26.130

```
<script src="~/Scripts/jquery.unobtrusive.ajax.js"></script> 
```

应该：

```
<script src="~/Scripts/jquery.unobtrusive-ajax.js"></script> 
```

如果您使用了 javascript 调试工具（例如 FireBug 或 Chrome 开发人员工具栏）并查看了“网络”选项卡，那么当浏览器尝试检索由于输入错误而指定的不存在的文件时，您会立即看到 404 错误。

我还建议您将所有 javascript 文件放在 DOM 的末尾，就在结束`</body>`标记之前。

故事的寓意：使用 javascript 调试工具，例如 FireBug 或 Chrome 开发者工具栏。我无法想象一个人在不使用这样的工具的情况下进行 Web 开发。

* * *

更新：

还要记住，在 jQuery 1.9 中，[`.live() method has been removed`](http://jquery.com/upgrade-guide/1.9/#live-removed)这是重大更改之一。不幸的是 ASP.NET MVC 的 unobtrusive-ajax 脚本依赖于这个函数。因此，如果您想在 MVC 中使用一些不显眼的 javascript 功能，您可能需要使用旧版本的 jQuery。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-13T09:12:44.840

是的

```
jquery.unobtrusive-ajax.js
```

与更高版本的 jquery 1.9+ 不兼容

要使用它，请添加 jquery-migrate: Migrate old jQuery code to jQuery 1.9+ js files

```
<script src="http://code.jquery.com/jquery-1.9.0.js"></script>
<script src="http://code.jquery.com/jquery-migrate-1.2.1.js"<</script>

```

that would save your time.

for more detail here you go. [http://www.learnsharecorner.com/ajax-begin-form-onsuccess-is-not-working-asp-net-mvc/](http://www.learnsharecorner.com/ajax-begin-form-onsuccess-is-not-working-asp-net-mvc/)

# java - HashMap重复键替换java

> ID：14911534
> 
> 赞同：0
> 
> 时间：2013-02-16T14:47:29.093
> 
> 标签：java, hashmap

我有这个东西，假设 HashMap> 有 <> "11,name2,name1" 和 "14,name4,name5" ......所以我试图先删除 11 并且它的所有数据 name2 和 name1 将被传输到14。但问题是14自己的原始数据name4和name 5被覆盖了。我想把它们都保留在 14 岁。我应该怎么做？希望你能帮助我。谢谢你。

```
List<String> oldValue = map.remove(oldKey);
map.put(newKey, oldValue); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T14:55:08.407

您可以尝试以下方式。从旧密钥中提取旧列表。并将列表项添加到新键的列表中。

```
// remove old key
    List<String> oldValue = map.remove(oldKey);
    // add new key with empty list if not exists
    if(!map.containsKey(newKey))
    {
        map.put(newKey, new LinkedList<String>());
    }
    // new list for new value
    List<String> newValue = map.get(newKey);
    // add items from old value to new list
    for(String s : oldValue){
        // eliminate possible duplicates
        if(!newValue.contains(s)){
            newValue.add(s);
        }
    } 
```

# ruby-on-rails - 为一对多表建模的 Ruby 结构是什么？

> ID：14911547
> 
> 赞同：1
> 
> 时间：2013-02-16T14:49:41.793
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3.2

我有一个`Organization`包含以下字段的表格：

```
id
name
time_zone 
```

然后我有几个其他表格`Doctors`，例如：

```
id
organization_id  #foreign_key to Organization
name
salary 
```

如何用 Ruby 建模？是用数组吗？哈希？地图？

我对 Ruby 不是很熟悉，所以不确定我们在 Ruby 中有什么功能？例如，如果它是扁平的，我也许可以使用一个简单的数组，但是这个结构怎么样？我也希望以后能够访问和遍历层次结构。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T14:53:27.763

```
class Organization < ActiveRecord::Base
  has_many :doctors
end

class Doctor < ActiveRecord::Base
  belongs_to :organization
end 
```

确保你有`organization_id`你写的那样，然后你可以做（​​只是作为一个例子）：

```
@doctor = Doctor.first
@doctor.organization

@organization = Organization.first
@organization.doctors 
```

### 更新

你不能用类似的东西填充数据库：

```
Doctor.where(name: "Frank", specialization: "Rubber Duck Surgery").first_or_create 
```

还没有尝试过，但它可能比遍历复杂的数组更容易：

```
@organization = Organization.where(name: "Surgeons").first_or_initialize
["Bob", "Frank", "Harry"].each do |name|
  @organization.doctors.where(name: name).first_or_initialize
end
@organization.save 
```

### 更新

好的，以下内容如何：

```
@doctor_names = ["Bob", "Rob", "Fred", "Bill"]
@doctor_salaries = [10000, 15000, 30000, 400]

def return_array_of_hashes(*data)
  array = []
  data[1].each_with_index do |d, i|
    hash = {}
    (0...data.count).to_a.in_groups_of(2).each do |a,b|
      hash.merge!({data[a] => data[b][i]})
    end
    array << hash
  end
  array
end

@doctors_array = return_array_of_hashes("name", @doctor_names, "salary", @doctor_salaries)
# => [{"name"=>"Bob", "salary"=>10000}, {"name"=>"Rob", "salary"=>15000}, {"name"=>"Fred", "salary"=>30000}, {"name"=>"Bill", "salary"=>400}]

@doctors_array.each do |hash|
  Doctor.where(hash).find_or_create
end 
```

这样，您可以对正在创建的任何模型使用相同的方法，并且可以轻松地将更多数据添加到数组中。只需确保以`key`then的正确顺序添加数据`value`。

您可能需要检查所有数组的大小是否相同，尽管您的模型验证可能会丢弃任何无效数据。

# php - Soundcloud 声波

> ID：14911554
> 
> 赞同：2
> 
> 时间：2013-02-16T14:50:07.263
> 
> 标签：php, wav, soundcloud, waveform

我正在尝试生成看起来像 soundcloud 的声波。

但我不知道他们是如何让他们的声波如此清晰的，例如这是 soundcloud 和我生成的声波的一个例子：

![在此处输入图像描述](../Images/5d9b926dc747483a887b58d674a13a10.png)

我正在使用 php 来读取 wav 文件并生成图像，但是如果有任何语言的更好的库可以做得更好，我肯定想听听它。

我已经粘贴了我在 Pastebin 中使用的[**课程**](http://pastebin.com/LFKW2XKg)。

我从[**andrewfreiday.com**](http://andrewfreiday.com/2010/04/29/generating-mp3-waveforms-with-php/)获得了此代码，并对其进行了修改以适合我的网站。

我真的很迷茫，任何建议都会有很大帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-17T20:48:09.920

soundcloud.com 上的波形是用画布绘制的——而在您的示例图像中，它看起来好像是一个更大的图像，已按比例缩小到所需的大小。当您在浏览器中执行此缩放时，它将消除“一半”像素的锯齿。在画布上绘制时，我们以所需的精确分辨率精确绘制所需的像素。这意味着没有图像缩放和模糊。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-10-23T05:27:00.360

您正在寻找的工具位于[https://www.un4seen.com/](https://www.un4seen.com/)

soundcloud 使用了一些简单的策略。

说声波将是 595 像素宽.. 每个条将是 5 像素 + 2 像素空白。

595 / ( 5 + 2 ) = 85 长度 / (bar + space ) = 85 total (bars with space)

设备歌曲分为 85 个部分，假设歌曲长度为 3:00.. 3*60 = 180/85 = 2 秒分钟 * 秒 = 总秒数 / 部分 = 2 秒 / 小节所以，现在我们每 2 获得一首歌曲的峰值秒。

保存最大峰值。保存低峰值。

现在您有一个包含 85 个小节的列表，其中包含准确的最高峰值和最低峰值，可以根据歌曲相对于时间相应地显示它们。

使用正数显示上部。除以 2 OR 3 OR 4 并使用负数显示下部。将两者结合起来用作过滤器来绘制图形的颜色。轰隆隆！

# android - 运行android项目时在logcat中显示NoClassDefFoundError

> ID：14911560
> 
> 赞同：0
> 
> 时间：2013-02-16T14:50:39.287
> 
> 标签：android, google-maps, noclassdeffounderror, google-places-api

使用面向 android 地图的示例项目时出现错误。当我运行这个程序时，它在 log-cat 中显示 NoClassDefFoundError。我在这个程序中找不到任何错误，任何人都可以帮我解决这个问题..

**PlacesMapActivity.java**

```
public class MainActivity extends Activity {

    // flag for Internet connection status
    Boolean isInternetPresent = false;

    // Connection detector class
    ConnectionDetector cd;

    // Alert Dialog Manager
    AlertDialogManager alert = new AlertDialogManager();

    // Google Places
    GooglePlaces googlePlaces;

    // Places List
    PlacesList nearPlaces;

    // GPS Location
    GPSTracker gps;

    // Button
    Button btnShowOnMap;

    // Progress dialog
    ProgressDialog pDialog;

    // Places Listview
    ListView lv;

    // ListItems data
    ArrayList<HashMap<String, String>> placesListItems = new ArrayList<HashMap<String,String>>();

    // KEY Strings
    public static String KEY_REFERENCE = "reference"; // id of the place
    public static String KEY_NAME = "name"; // name of the place
    public static String KEY_VICINITY = "vicinity"; // Place area name

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        cd = new ConnectionDetector(getApplicationContext());

        // Check if Internet present
        isInternetPresent = cd.isConnectingToInternet();
        if (!isInternetPresent) {
            // Internet Connection is not present
            alert.showAlertDialog(MainActivity.this, "Internet Connection Error",
                    "Please connect to working Internet connection", false);
            // stop executing code by return
            return;
        }

        // creating GPS Class object
        gps = new GPSTracker(this);

        // check if GPS location can get
        if (gps.canGetLocation()) {
            Log.d("Your Location", "latitude:" + gps.getLatitude() + ", longitude: " + gps.getLongitude());
        } else {
            // Can't get user's current location
            alert.showAlertDialog(MainActivity.this, "GPS Status",
                    "Couldn't get location information. Please enable GPS",
                    false);
            // stop executing code by return
            return;
        }

        // Getting listview
        lv = (ListView) findViewById(R.id.list);

        // button show on map
        btnShowOnMap = (Button) findViewById(R.id.btn_show_map);

        // calling background Async task to load Google Places
        // After getting places from Google all the data is shown in listview
        new LoadPlaces().execute();

        /** Button click event for shown on map */
        btnShowOnMap.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View arg0) {
                Intent i = new Intent(getApplicationContext(),
                        PlacesMapActivity.class);
                // Sending user current geo location
                i.putExtra("user_latitude", Double.toString(gps.getLatitude()));
                i.putExtra("user_longitude", Double.toString(gps.getLongitude()));

                // passing near places to map activity
                i.putExtra("near_places", nearPlaces);
                // staring activity
                startActivity(i);
            }
        });

        /**
         * ListItem click event
         * On selecting a listitem SinglePlaceActivity is launched
         * */
        lv.setOnItemClickListener(new OnItemClickListener() {

            @Override
            public void onItemClick(AdapterView<?> parent, View view,
                    int position, long id) {
                // getting values from selected ListItem
                String reference = ((TextView) view.findViewById(R.id.reference)).getText().toString();

                // Starting new intent
                Intent in = new Intent(getApplicationContext(),
                        SinglePlaceActivity.class);

                // Sending place refrence id to single place activity
                // place refrence id used to get "Place full details"
                in.putExtra(KEY_REFERENCE, reference);
                startActivity(in);
            }
        });
    }

    /**
     * Background Async Task to Load Google places
     * */
    class LoadPlaces extends AsyncTask<String, String, String> {

        /**
         * Before starting background thread Show Progress Dialog
         * */
        @Override
        protected void onPreExecute() {
            super.onPreExecute();
            pDialog = new ProgressDialog(MainActivity.this);
            pDialog.setMessage(Html.fromHtml("<b>Search</b><br/>Loading Places..."));
            pDialog.setIndeterminate(false);
            pDialog.setCancelable(false);
            pDialog.show();
        }

        /**
         * getting Places JSON
         * */
        protected String doInBackground(String... args) {
            // creating Places class object
            googlePlaces = new GooglePlaces();

            try {
                // Separeate your place types by PIPE symbol "|"
                // If you want all types places make it as null
                // Check list of types supported by google
                // 
                String types = "cafe|restaurant"; // Listing places only cafes, restaurants

                // Radius in meters - increase this value if you don't find any places
                double radius = 1000; // 1000 meters 

                // get nearest places
                nearPlaces = googlePlaces.search(gps.getLatitude(),
                        gps.getLongitude(), radius, types);

            } catch (Exception e) {
                e.printStackTrace();
            }
            return null;
        }

        /**
         * After completing background task Dismiss the progress dialog
         * and show the data in UI
         * Always use runOnUiThread(new Runnable()) to update UI from background
         * thread, otherwise you will get error
         * **/
        protected void onPostExecute(String file_url) {
            // dismiss the dialog after getting all products
            pDialog.dismiss();
            // updating UI from Background Thread
            runOnUiThread(new Runnable() {
                public void run() {
                    /**
                     * Updating parsed Places into LISTVIEW
                     * */
                    // Get json response status
                    String status = nearPlaces.status;

                    // Check for all possible status
                    if(status.equals("OK")){
                        // Successfully got places details
                        if (nearPlaces.results != null) {
                            // loop through each place
                            for (Place p : nearPlaces.results) {
                                HashMap<String, String> map = new HashMap<String, String>();

                                // Place reference won't display in listview - it will be hidden
                                // Place reference is used to get "place full details"
                                map.put(KEY_REFERENCE, p.reference);

                                // Place name
                                map.put(KEY_NAME, p.name);

                                // adding HashMap to ArrayList
                                placesListItems.add(map);
                            }
                            // list adapter
                            ListAdapter adapter = new SimpleAdapter(MainActivity.this, placesListItems,
                                    R.layout.list_item,
                                    new String[] { KEY_REFERENCE, KEY_NAME}, new int[] {
                                            R.id.reference, R.id.name });

                            // Adding data into listview
                            lv.setAdapter(adapter);
                        }
                    }
                    else if(status.equals("ZERO_RESULTS")){
                        // Zero results found
                        alert.showAlertDialog(MainActivity.this, "Near Places",
                                "Sorry no places found. Try to change the types of places",
                                false);
                    }
                    else if(status.equals("UNKNOWN_ERROR"))
                    {
                        alert.showAlertDialog(MainActivity.this, "Places Error",
                                "Sorry unknown error occured.",
                                false);
                    }
                    else if(status.equals("OVER_QUERY_LIMIT"))
                    {
                        alert.showAlertDialog(MainActivity.this, "Places Error",
                                "Sorry query limit to google places is reached",
                                false);
                    }
                    else if(status.equals("REQUEST_DENIED"))
                    {
                        alert.showAlertDialog(MainActivity.this, "Places Error",
                                "Sorry error occured. Request is denied",
                                false);
                    }
                    else if(status.equals("INVALID_REQUEST"))
                    {
                        alert.showAlertDialog(MainActivity.this, "Places Error",
                                "Sorry error occured. Invalid Request",
                                false);
                    }
                    else
                    {
                        alert.showAlertDialog(MainActivity.this, "Places Error",
                                "Sorry error occured.",
                                false);
                    }
                }
            });

        }

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

} 
```

**日志猫**

```
02-16 20:05:33.528: E/AndroidRuntime(367): FATAL EXCEPTION: main
02-16 20:05:33.528: E/AndroidRuntime(367): java.lang.NoClassDefFoundError: com.androidhive.googleplacesandmaps.PlacesMapActivity
02-16 20:05:33.528: E/AndroidRuntime(367):  at com.androidhive.googleplacesandmaps.MainActivity$1.onClick(MainActivity.java:110)
02-16 20:05:33.528: E/AndroidRuntime(367):  at android.view.View.performClick(View.java:2408)
02-16 20:05:33.528: E/AndroidRuntime(367):  at android.view.View$PerformClick.run(View.java:8816)
02-16 20:05:33.528: E/AndroidRuntime(367):  at android.os.Handler.handleCallback(Handler.java:587)
02-16 20:05:33.528: E/AndroidRuntime(367):  at android.os.Handler.dispatchMessage(Handler.java:92)
02-16 20:05:33.528: E/AndroidRuntime(367):  at android.os.Looper.loop(Looper.java:123)
02-16 20:05:33.528: E/AndroidRuntime(367):  at android.app.ActivityThread.main(ActivityThread.java:4627)
02-16 20:05:33.528: E/AndroidRuntime(367):  at java.lang.reflect.Method.invokeNative(Native Method)
02-16 20:05:33.528: E/AndroidRuntime(367):  at java.lang.reflect.Method.invoke(Method.java:521)
02-16 20:05:33.528: E/AndroidRuntime(367):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
02-16 20:05:33.528: E/AndroidRuntime(367):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
02-16 20:05:33.528: E/AndroidRuntime(367):  at dalvik.system.NativeStart.main(Native Method)
02-16 20:05:33.528: E/AndroidRuntime(367): Caused by: java.lang.IllegalAccessError: Class ref in pre-verified class resolved to unexpected implementation
02-16 20:05:33.528: E/AndroidRuntime(367):  at dalvik.system.DexFile.defineClass(Native Method)
02-16 20:05:33.528: E/AndroidRuntime(367):  at dalvik.system.DexFile.loadClassBinaryName(DexFile.java:209)
02-16 20:05:33.528: E/AndroidRuntime(367):  at dalvik.system.PathClassLoader.findClass(PathClassLoader.java:203)
02-16 20:05:33.528: E/AndroidRuntime(367):  at java.lang.ClassLoader.loadClass(ClassLoader.java:573)
02-16 20:05:33.528: E/AndroidRuntime(367):  at java.lang.ClassLoader.loadClass(ClassLoader.java:532)
02-16 20:05:33.528: E/AndroidRuntime(367):  ... 12 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T15:47:52.487

确保在 Project > Properties > Android 中选中 Google API。如果不是这种情况，请选择它并单击应用。此更改将修改文件 project.properties 中的目标属性并更改包含的库。（例如，使用最新的 android sdk，您将拥有：target=Google Inc.:Google APIs:14）

转到 Project > Properties > Java Build Path > Libraries 并确保没有直接包含 android.jar 或 maps.jar。您应该只使用至少 maps.jar 和 android.jar 作为叶子的 Google API。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T15:40:21.330

MainActivity.java 的第 110 行是什么？鉴于您选择性地粘贴了上面的代码，因此不可能知道。如果我冒险猜测/戳穿上述内容，我会说您的目标 API 级别比您运行它的设备更高。

# postgresql - 在 postgreSQL 表中导入时如何识别文本/csv 文件标题行中的字段名？

> ID：14911561
> 
> 赞同：1
> 
> 时间：2013-02-16T14:50:44.807
> 
> 标签：postgresql, csv, import, field-names

`csv`我想在一个`postgreSQL`表中导入相当数量的文件。这些`csv`文件包含的字段数量不同，但标题行包含的字段`fieldnames`与目标表中的字段相对应。

而不是使用以下方法指定每个`csv`文件中存在的字段：

```
COPY destination_table (comma_separated_fields_in_source_file) FROM '/filepath'... 
```

我想知道是否有办法`postgres / pgAdmin`识别标题行中的字段名？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T16:23:19.470

这很顽皮，未经测试，但可能有效：

```
bash -c 'echo copy tablename \(; head -1 filename; echo \) from stdin with format csv header\;; cat filename ' | psql 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T15:01:00.767

COPY 本身不支持此功能，但是您可能会考虑编写一个函数/存储过程来处理此问题。也许使用“Foreign Data Wrapper”读取第一行并从中动态创建“COPY”SQL 语句。有关 text/csv 外国数据包装器的信息，请参见此处：[http ://www.postgresql.org/docs/current/static/file-fdw.html](http://www.postgresql.org/docs/current/static/file-fdw.html)

# javascript - 防止 Fancybox 缩略图四处移动？

> ID：14911568
> 
> 赞同：2
> 
> 时间：2013-02-16T14:51:48.230
> 
> 标签：javascript, jquery, fancybox

当你选择一个时，有没有办法让 Fancybox 缩略图不移动？当前，每次单击缩略图时，它都会重新定位缩略图行。

可以在“扩展功能 - 缩略图助手”部分下看到此行为：http: [//fancyapps.com/fancybox/](http://fancyapps.com/fancybox/)

我只是希望整个缩略图行居中且静态。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T16:06:52.573

为了使用缩略图助手，您还必须加载以下 JS 文件：

```
 <script type="text/javascript" src="/fancybox/source/helpers/jquery.fancybox-thumbs.js?v=2.1.4"></script> 
```

靠近底部的是以下代码：

```
//Center list
        onUpdate: function (opts, obj) {
            if (this.list) {
                this.list.stop(true).animate({
                    'left': Math.floor($(window).width() * 0.5 - (obj.index * this.width + this.width * 0.5))
                }, 150);
            }
        }, 
```

将其更改为：

```
//Center list
        onUpdate: function (opts, obj) {
            /* if (this.list) {
                this.list.stop(true).animate({
                    'left': Math.floor($(window).width() * 0.5 - (obj.index * this.width + this.width * 0.5))
                }, 150);
            } */
        }, 
```

这应该会阻止它制作动画。我没有测试它，因为我没有安装它，但是通过阅读代码，我认为这就是移动缩略图的原因。试试看，让我知道它是否有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T16:19:45.553

为了防止缩略图助手（居中）的默认行为，您可以简单地重新定义`onUpdate`方法：

```
// Include this somewhere after main fancybox scripts
$.fancybox.helpers.thumbs.onUpdate = function() {}; 
```

就是这样，您甚至不必弄乱 Fancybox 源代码。

它非常容易测试：打开[http://fancyapps.com/fancybox/#examples](http://fancyapps.com/fancybox/#examples)，在控制台中执行上面的代码段，然后检查fancybox 是如何工作的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-06-20T09:18:56.313

如果缩略图列表大于窗口，要保持原始移动，请在 jquery.fancybox-thumbs.js 声明之后插入以下代码：

```
<script type="text/javascript">
    // keep the Fancybox thumbnails from moving around if not needed
    $.fancybox.helpers.thumbs.onUpdate_backup = $.fancybox.helpers.thumbs.onUpdate;
    $.fancybox.helpers.thumbs.onUpdate = function(opts, obj) {
        if (this.list) {
            var thumbs_total_width = (opts.width + 4) * obj.group.length;
            if(thumbs_total_width > $(window).width())
                $.fancybox.helpers.thumbs.onUpdate_backup(opts, obj);
            else {
                this.list.stop(true).animate({
                    'left': Math.floor($(window).width() * 0.5 - (thumbs_total_width * 0.5))
                }, 150);
            }
        }
    };
</script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-16T17:10:03.133

它归结为修改以下来源：

```
<script type="text/javascript" src="/fancybox/source/helpers/jquery.fancybox-thumbs.js?v=2.1.4"></script> 
```

目前选定的缩略图（obj.index）用于计算缩略图列表的“左”css属性，无论是在初始化时还是在更新时：

```
 init: function (opts, obj) {
            ...
            this.list.width(this.width * (obj.group.length + 1)).css('left', Math.floor($(window).width() * 0.5 - (obj.index * this.width + this.width * 0.5)));
        }, 
```

...

```
 //Center list
        onUpdate: function (opts, obj) {
            if (this.list) {
                this.list.stop(true).animate({
                    'left': Math.floor($(window).width() * 0.5 - (obj.index * this.width + this.width * 0.5))
                }, 150);
            }
        }, 
```

在这两种情况下，我都需要它来使缩略图列表居中（我不能简单地摆脱'onUpdate'代码，因为它用于重新计算窗口大小何时更改以及何时选择缩略图）。

所以使用 'obj.group.length / 2' 而不是 'obj.index' 就可以了：

```
 init: function (opts, obj) {
            ...
            this.list.width(this.width * (obj.group.length + 1)).css('left', Math.floor($(window).width() * 0.5 - (obj.group.length / 2 * this.width + this.width * 0.5)));
        }, 
```

...

```
 //Center list
        onUpdate: function (opts, obj) {
            if (this.list) {
                this.list.stop(true).animate({
                    'left': Math.floor($(window).width() * 0.5 - (obj.group.length / 2 * this.width + this.width * 0.5))
                }, 150);
            }
        }, 
```

# javascript - 鼠标坐标限制为 1 个元素而不是页面大小

> ID：14911573
> 
> 赞同：0
> 
> 时间：2013-02-16T14:52:03.580
> 
> 标签：javascript, events, canvas, mouse, coordinates

嗨，伙计们，我正在研究一种用 Canvas 用鼠标绘制的方法。这是我有多远：

```
function drawdraw(){
    test = document.getElementById('test');
    ctx = test.getContext('2d');

    window.addEventListener("mousemove", drawing,false);
}

function drawing(e){
    ctx.clearRect(0,0,500,200);
    var xPos = e.pageX-test.offsetLeft;
    var yPos = e.pageY-test.offsetTop;
    ctx.fillRect(xPos, yPos,30,30);
}
window.addEventListener("load", drawdraw,false); 
```

我目前的问题是我没有正确的光标坐标。我试过 e.clientX ， e.clientX 和上面的例子。

我希望能够动态移动我的画布，并且我希望鼠标的坐标在画布的左上角为 0,0，在画布的右下角为 500,200。换句话说，我只希望我的坐标在画布内，而不是页面的坐标。任何人？:)

顺便提一句。我对 javascript 解决方案感兴趣，所以如果可以的话，我想避免使用 jQuery。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T14:55:05.070

`test` is a local variable of function `drawdraw` and you are using it also in `drawing` function. You need to declare it as global variable.

# mysql - 当它是子查询的一部分时，为什么该语句有效？

> ID：14911577
> 
> 赞同：0
> 
> 时间：2013-02-16T14:52:29.607
> 
> 标签：mysql, sql, join, subquery

我看到这个 SQL 语句有效：

```
SELECT * 
FROM Company 
LEFT JOIN (
   Departments 
   INNER JOIN Employees 
   ON Departments.dep_id = Employees.Dep_ID
   ) ON Company.compId = Departments.Comp_ID; 
```

但是这个声明：

```
 Departments INNER JOIN Employees ON Departments.dep_id = Employees.Dep_ID 
```

无法解析。

这是否意味着仅适用于子查询的简短版本？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T15:07:08.507

这：

```
Departments INNER JOIN Employees ON Departments.dep_id = Employees.Dep_ID 
```

无法解析，因为它不是一个完整的查询。它缺少开始子句，在这种情况下是一个选择子句。开头子句的其他选项是插入、更新或删除。

它也缺少关键字“来自”。此外，虽然不是强制性的，但大多数选择查询都有一个 where 子句来获取他们想要的记录，而不是整个数据库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T14:54:21.277

您可能缺少“SELECT FROM”？

# python - 在 Python Django 中打印 HTTP 请求

> ID：14911579
> 
> 赞同：11
> 
> 时间：2013-02-16T14:52:53.893
> 
> 标签：python, django

我想打印到达服务器的整个请求对象。我需要查看请求从客户端携带的所有参数，因为我没有客户端的代码（它是一个 Android 客户端）。我在 view.py 文件中，我正在使用该函数

```
def index(request):

    return HttpResponse("test params") 
```

打印请求对象

请建议代码。如果我可以在浏览器中而不是在控制台中打印请求，那就更好了。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-16T15:56:43.450

```
from django.utils.html import escape
def index(request):
    return HttpResponse(escape(repr(request))) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-16T16:16:01.953

您可以使用[Django 调试工具栏](https://github.com/django-debug-toolbar/django-debug-toolbar)，它允许您查看大量调试信息，包括请求和会话。

从其文档中：

> 目前，已编写并正在编写以下面板：
> 
> *   Django 版本
> *   请求计时器
> *   settings.py 中的设置列表
> *   常见的 HTTP 标头
> *   GET/POST/cookie/session 变量显示
> *   使用的模板和上下文，以及它们的模板路径
> *   SQL 查询，包括执行时间和指向 EXPLAIN 每个查询的链接
> *   信号列表，它们的参数和接收器
> *   通过 Python 的内置日志记录或通过 logbook 模块记录输出

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-01-28T15:49:56.123

```
import sys

def req(request)
   print(request.__dict__, file=sys.stderr) 
```

# silverlight - Windows Phone 8 - ContextMenu in ListBox for ListBoxItem

> ID：14911581
> 
> 赞同：0
> 
> 时间：2013-02-16T14:53:44.967
> 
> 标签：silverlight, xaml, windows-phone-8, silverlight-toolkit

I'm having a ListBox (binds to an observable collection) with the ListBoxItems design defined in the ItemsPanel StaticResource. The ItemsPanel is defined in the App.xml (like to have my stuff in a central place and the design for the ListBoxItem is used on different pages) Now for every Listbox I need to have a different ContextMenu, and there comes the thing, I don't get working...

In my App.xaml (small demo - didn't want to bloat the topic, here):

```
<Application.Resources>
    <DataTemplate x:Key="ListItemTemplate">
        <TextBlock Text="{Binding Title}" />
    </DataTemplate>
</Application.Resources> 
```

In my MainPage.xaml I have the Listbox defined.:

```
<ListBox ItemsSource="{Binding Items}" 
         ItemTemplate="{StaticResource ListItemTemplate}">

    <ListBox.ItemContainerStyle>
        <Style TargetType="ListBoxItem">
            <Setter Property="toolkit:ContextMenuService.ContextMenu">
                <Setter.Value>
                    <toolkit:ContextMenu>
                        <toolkit:MenuItem Header="Test" />
                    </toolkit:ContextMenu>
                </Setter.Value>
            </Setter>
        </Style>
    </ListBox.ItemContainerStyle>
</ListBox> 
```

However, if I long-press a ListBoxItem, nothing happens. I have no errors - nothing - but the Contextmenu just doesn't show up... (neither in the emulator, nor on the device).

If I add a ContextMenu to the LayoutRoot gird or something else, It works like a charm.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T19:36:22.820

您应该尝试将 ContextMenu 放入您的 ListItemTemplate

```
<Application.Resources>
<DataTemplate x:Key="ListItemTemplate">
    <StackPanel>
        <toolkit:ContextMenuService.ContextMenu>
            <toolkit:ContextMenu>
                <toolkit:MenuItem x:Name="DoneMenuItem" 
                    Header="Done"
                    Command="{Binding Main.DoneCommand, Source={StaticResource Locator}}"
                    CommandParameter="{Binding}"/>
            </toolkit:ContextMenu>
        </toolkit:ContextMenuService.ContextMenu>
        <TextBlock Text="{Binding Title}" />
    </StackPanel>
</DataTemplate> 
```

你可以删除你的 ListBox.ItemContainerStyle 标签

# perl - Curly braces surrounding variable

> ID：14911586
> 
> 赞同：16
> 
> 时间：2013-02-16T14:54:13.523
> 
> 标签：perl, syntax

I have this piece of code that I'm trying to get my head around, I don't even know if its syntactically correct (part of the exercise I guess!)

```
%{$records} 
```

What do the curly braces signify? I've seen the same case but with a `@` operator used instead of the `$` if that makes a difference.

Thanks guys!

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-16T17:03:59.673

perlref 文档的[“使用参考”部分](http://perldoc.perl.org/perlref.html#Using-References)解释了这一点。

> **2.**将标识符（或标识符链）作为变量或子例程名称的一部分放在任何地方，都可以用返回正确类型引用的 BLOCK 替换标识符。换句话说，前面的例子可以这样写：
> 
> ```
>  $bar = ${$scalarref};
>    push(@{$arrayref}, $filename);
>    ${$arrayref}[0] = "January";
>    ${$hashref}{"KEY"} = "VALUE";
>    &{$coderef}(1,2,3);
>    $globref->print("output\n"); # iff IO::Handle is loaded 
> ```

在您的情况下，`$records`必须是对哈希的引用（因为最外层`%`），`{$records}`是返回引用并`%{$records}`给出原始哈希的块。

花括号围绕一个*真正的*块。实际上，您可以将上面的代码替换为

```
%{ if ($records) { $records } else { $default_records } } 
```

但是，正如文档前面所指出的，即使是您问题中的较短版本也可以简化。

> **1.**将标识符（或标识符链）作为变量或子例程名称的一部分放在任何地方，都可以将标识符替换为包含正确类型引用的简单标量变量：
> 
> ```
>  $bar = $$scalarref;
>    push(@$arrayref, $filename);
>    $$arrayref[0] = "January";
>    $$hashref{"KEY"} = "VALUE";
>    &$coderef(1,2,3);
>    print $globref "output\n"; 
> ```

因为`$records`是一个简单的标量，`%$records`是底层的散列。

相反，如果`$records`是对数组的引用，则取消引用它的语法是`@$records`or `@{$records}`。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-02-16T15:33:37.167

与许多 Unix shell 一样，Perl 允许使用大括号来分隔变量标识符，因此`my ${scalar}`与`my $scalar`. 这很有用，例如，将变量的值插入字符串时，何时`"$scalartext"`查找具有标识符的变量`scalartext`，何时预期是`$scalar.'text'`。取而代之的是，您可以编写`"${scalar}text"`以获得正确的结果。

Perl 将接受*裸*变量标识符或返回对大括号内变量的引用的表达式，因此`%{$hashref}`与`%$hashref`. 请注意，*字符串*是不可接受的，因为它被视为符号引用，在 下是错误的`strict 'refs'`，所以`${'scalar'}`这里是错误的。

在您的情况下，`%{$records}`与 相同`%$records`，有些人更喜欢它，因为它使取消引用变得清晰。它表示散列引用`$records`所指的散列。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-02-16T15:07:40.027

这是您取消引用引用的方式。

请参阅[perldoc perlref](http://perldoc.perl.org/perlref.html)。

像往常一样`%`or`@`说明你想要什么样的数据（“哈希”或“数组”）。

后面是一个*块* `{}`，该块返回对适当数据类型的*引用。*

所以：`%{$records}`接受一个包含对哈希的引用的标量 ( `$records`)，并返回一个哈希。

# python - Can you loop through pixels in an image without loading the whole image?

> ID：14911590
> 
> 赞同：5
> 
> 时间：2013-02-16T14:54:25.170
> 
> 标签：python, matplotlib, scipy

I have some very large images. I don't want to load the whole image into memory, I just want to make a single pass through the image in row order. Is it possible to do this in Python/scipy?

EDIT: I'm using .PNG, but I could convert them to PPM, BMP or something else lossless.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T16:40:56.013

[GDAL](http://www.gdal.org/) (with Python bindings) offers some very good drivers for this. Although its a geospatial package, it works fine with BMP and PNG for example. This example show how to load a PNG row by row:

```
import gdal

# only loads the dataset
ds = gdal.Open('D:\\my_large_image.png')

# read 1 row at the time
for row in range(ds.RasterYSize):
    row_data = ds.ReadAsArray(0,row,ds.RasterXSize,1)

ds = None # this closes the file 
```

It gives you a Numpy array as a result, so ready for procesing. You could write any result in a similar fashion.

```
print type(row_data)
<type 'numpy.ndarray'>

print row_data.shape
(3, 1, 763)

print row_data
[[[  0   0 255 ..., 230 230   0]]

 [[  0   0 252 ..., 232 233   0]]

 [[  0   0 252 ..., 232 233   0]]] 
```

Installing a package specific for reading might be a bit overkill if PIL or something else can do it. But its a robust option, i have processed images of 30000*30000 pixels like this.

# ruby-on-rails - Joining a table with an unconventional column name

> ID：14911601
> 
> 赞同：2
> 
> 时间：2013-02-16T14:55:31.407
> 
> 标签：ruby-on-rails, rails-activerecord

I have the following model :

```
class SocUser < ActiveRecord::Base
  attr_accessible :email, :id, :name, :username
  has_many :friends, :class_name => 'SocFriend', :foreign_key => 'user_id', :dependent =>  :destroy
  has_many :ownlist, :class_name => 'SocOwnlist', :foreign_key => 'user_id', :dependent =>  :destroy
end

class SocFriend < ActiveRecord::Base
  attr_accessible :user_id, :friend_id
  belongs_to :user, :class_name => 'SocUser'
  belongs_to :friend, :class_name => 'SocUser'
end

class SocOwnlist < ActiveRecord::Base
  attr_accessible :user_id, :book_id
  belongs_to :user, :class_name => 'SocUser'
  belongs_to :book, :class_name => 'SocBook'
end 
```

A user can have many friends. And each friend is also a user. Any user can have many books. How do I add an association so that a user can access all the books of his friends.

If I add an association in SocUser like `has_many :avail_list, :class_name => 'SocOwnlist', :through => :friends, :source => :friend`

The sql query it generates when we call `myuser.avail_list` is:

```
SELECT "soc_ownlists".* FROM "soc_ownlists" INNER JOIN "soc_friends" ON "soc_ownlists"."id" = "soc_friends"."friend_id" WHERE "soc_friends"."user_id" = 1 
```

But the ON condition should be "soc_ownlists".**"user_id"** = "soc_friends"."friend_id", is there a way to specify it?

Or is there any other way to specify the association?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T20:31:32.447

您必须为关联设置 primary_key

```
has_many :avail_list, :class_name => 'SocOwnlist', :through => :friends, :source => :friend, :primary_key => 'user_id' 
```

# c++ - g ++错误：类没有成员命名

> ID：14911605
> 
> 赞同：-2
> 
> 时间：2013-02-16T14:55:43.530
> 
> 标签：c++, oop, g++

我正在玩我的树莓派和 gpio。一切都很好，我现在正试图在每次移动矩形碰到屏幕边缘时点亮 LED 灯。

为了帮助打开和关闭 LED，我有一个 BlinkLED 类

```
#pragma once

#include "GPIOClass.h"

class Blienter code herenkLED
{
 public:
  BlinkLED(string gpionum);

  void update(float dt);
  void setOnfor(int ms);
  void finish();

 private:
  GPIOClass m_LED;
  int m_time2Shine;

}; 
```

在另一个名为 Morph.cpp 的文件中，我尝试运行 setOnFor(1000)

```
#include "Morph.h"
#include "BlinkLED.h"

template <typename T>
Morph<T>::Morph()
{
};

template <typename T>
Morph<T>::Morph(T min, T max, T v)
  : m_min(min)
  , m_max(max)
  , m_v(v)
  , m_cycles(0)
  , m_LED(NULL)
{
  m_current = getRandom(min, max);
  m_period = getRandom(min, max);
  m_flip = (getRandom(0, 1) > 0);
};
template <typename T>
void Morph<T>::setLED(BlinkLED* LED)
{
  m_LED = LED;
}

template <typename T>
T Morph<T>::update(float dt)
{
  if(m_current >= m_max)
    {
      m_flip = true;
      if(m_LED)
    m_LED->setOnFor(1000);
    }
  else if(m_current <= m_min)
    {
      m_flip = false;
      if(m_LED)
    m_LED->setOnFor(1000);
    }
  else if(m_cycles >= m_period)
    {
      m_flip= !m_flip;
      m_period = getRandom((int)m_min, (int)m_max);
      m_cycles = 0;
    }

  float direction = m_flip ? -1.0 : 1.0;
  m_current += direction * (T)getRandom((T)0, (T)m_v);
  m_cycles += 1;

  return m_current;

};

template class Morph<int>;
template class Morph<float>; 
```

当我这样做时，我得到 2 个错误，每个 setOnFor(1000) Morph.cpp:34:9 错误：BlinkLED 类没有名为 setOnfor 的成员 Morph.cpp:40:9 错误：BlinkLED 类没有名为 setOnfor 的成员

有人有什么想法吗？我真的很想看这个作品：D

整个代码可以在 [https://github.com/Reicher/FlyingCubes找到](https://github.com/Reicher/FlyingCubes)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T14:57:41.720

您的函数声明和定义是命名的`setOnfor`，而您调用一个名为 的函数`setOnFor`。C++ 中的标识符区分大小写。您需要选择一个并保持一致。

# .net - 将用户信息（用户名、年龄等）保存在 Server.Cache 中，而不是从 db 中获取

> ID：14911611
> 
> 赞同：0
> 
> 时间：2013-02-16T14:56:06.520
> 
> 标签：.net, forms-authentication

当用户登录我的网站时，我从数据库中获取有关该用户的一些信息：

*   用户身份
*   用户名
*   电子邮件
*   ETC

然后将此信息与 .SetAuthCookie 一起保存到 FormsAuthentication 中。

这是执行此操作的最快方法还是如果我进行更改以将信息保存到 System.Cache 中怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T14:56:58.997

> 或者如果我进行更改以将信息保存到 System.Cache 中怎么办？

然后，您网站的**所有**用户将共享相同的信息。因此，您完全不想将用户特定信息存储到缓存中。FormsAuthentication cookie 的 userData 部分似乎是存储一些用户特定信息的好地方，这些信息用于所有页面，以避免在每个页面上访问您的数据库。有些人可能还会推荐您使用 Session，但我不是这些人的一部分。

# arduino - Arduino和Raspberry Pi之间的无线交换：协议的选择

> ID：14911615
> 
> 赞同：2
> 
> 时间：2013-02-16T14:56:54.633
> 
> 标签：arduino, protocols, wireless, raspberry-pi, error-correction

你好哦，强大的 StackOverflow.com 社区。

这是我一直在摆弄的问题。我有（将有）一个 Arduino 2560 使用一对 388 RF 发射器/接收器与 RPi 交谈 - 所以它实际上将是一个串行通信。更糟糕的是，会有许多发射器（Arduinos）和一个接收器（RPi）。两个我无法完全回答的问题：

1.  协议非常原始——所以如果我想要任何错误纠正，我必须自己选择它。我想用一些非常简单的东西，比如奇偶校验位开始，看看它是怎么回事。想法？

2.  说到协议本身——我们将如何对数据进行编码？实际上，我将发送一个数字 - 发射机 ID - 伴随着一个布尔标志（传感器活动/非活动）。对串行射频传输数据进行编码的最佳方式是什么？全部发短信？我也可以将它作为字节流传输，不管它有多少，但这会使进一步的移植变得困难（Big/Little Endian、字长等）。还尝试考虑一些奇异的东西，例如 NanoPB，无论协议缓冲区多么出色，它们对于这项任务来说都可能是矫枉过正的。我知道我的立场在这里很不稳定，所以我很感激你的想法。

3.  最后，我知道这听起来很蹩脚，但我很确定以前有人这样做过，甚至可能有某种跨平台库可以用来进行交换。如果确实如此，那就太好了——我可以做我想做的事，而不是重新发明轮子。

无论如何，这就是我的立场。将不胜感激任何答案。

这是我正在使用的[发射器，这是一个](https://www.sparkfun.com/products/8946)[接收器](https://www.sparkfun.com/products/8950)。

非常感谢大家！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T18:45:52.270

你看过 Arduino Virtual Wire 库吗？[http://www.pjrc.com/teensy/td_libs_VirtualWire.html](http://www.pjrc.com/teensy/td_libs_VirtualWire.html)。这适用于 Arduino 上的那些发射器和接收器，并且移植到 Raspberry Pi 应该不会太难。[在http://www.raspberrypi.org/phpBB3/viewtopic.php?t=24215&p=239410](http://www.raspberrypi.org/phpBB3/viewtopic.php?t=24215&p=239410)上有一个关于它的论坛讨论。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-14T19:44:02.307

Receive 理论上可以移植到 Raspberry，但您需要实时访问处理器才能使用 bit-banging 进行传输。不幸的是，Linux 不是实时操作系统，因为处理器花费大量时间来处理其他进程。当您尝试创建软件时钟参考时，这会造成严重破坏。它在只运行一个程序的 Arduino 上运行良好。

有一些硬件组合会涉及一些额外的成本和硬件复杂性。一种是在模式 0 下将数据发送到 SPI，并将 MOSI 和 SCLK 引脚连接到 XOR 门 IC 的输入。另一种硬件方法是使用 SPI 或 I2C 对 Arduino 或 PIC 进行编程，以充当 RF 模块和 Raspberry Pi 之间的网关来处理 RF。

注意：这个 kludge 需要一个 FIFO 缓冲的 SPI UART。一些早期的 Raspberry Pi 模型具有软件 SPI，并且不使用硬件 FIFO。检查您的特定版本的规格。

有兴趣和技术熟练的人也可以为 Pi 创建一个内核模块来处理这种类型的链接。可以在此处找到有关该主题的更多信息：

[http://www.raspberrypi.org/forums/viewtopic.php?t=39951](http://www.raspberrypi.org/forums/viewtopic.php?t=39951)

# php - 反序列化函数不返回值？

> ID：14911618
> 
> 赞同：0
> 
> 时间：2013-02-16T14:57:13.150
> 
> 标签：php, mysql, arrays, wordpress, function

大家好，我对 php 中的反序列化函数有疑问。问题是我在 $test 变量中有数据，例如

```
stdClass Object
(
   [data] => a:15:{i:0;a:7:{s:2:"id";s:2:"14";s:4:"slug";s:8:"fieldset";s:4:"name";s:8:"Fieldset";s:4:"type";s:8:"fieldset";s:7:"options";s:0:"";s:9:"parent_id";s:1:"0";s:5:"value";s:0:"";}i:1;a:7:{s:2:"id";s:2:"15";s:4:"slug";s:8:"category";s:4:"name";s:8:"category";s:4:"type";s:4:"text";s:7:"options";s:0:"";s:9:"parent_id";s:1:"0";s:5:"value";s:8:"agdjasjf";}i:2;a:7:{s:2:"id";s:1:"5";s:4:"slug";s:12:"vector-title";s:4:"name";s:12:"Vector Title";s:4:"type";s:4:"text";s:7:"options";s:0:"";s:9:"parent_id";s:1:"0";s:5:"value";s:9:"sdjsgdjgs";}i:3;a:7:{s:2:"id";s:1:"6";s:4:"slug";s:4:"tags";s:4:"name";s:4:"Tags";s:4:"type";s:4:"text";s:7:"options";s:0:"";s:9:"parent_id";s:1:"0";s:5:"value";s:10:"sjdjfsgdjg";}i:4;a:7:{s:2:"id";s:1:"7";s:4:"slug";s:11:"author-name";s:4:"name";s:11:"Author Name";s:4:"type";s:4:"text";s:7:"options";s:0:"";s:9:"parent_id";s:1:"0";s:5:"value";s:12:"jhdgshdsgsdg";}i:5;a:7:{s:2:"id";s:1:"8";s:4:"slug";s:13:"email-address";s:4:"name";s:13:"Email Address";s:4:"type";s:4:"text";s:7:"options";s:0:"";s:9:"parent_id";s:1:"0";s:5:"value";s:18:"tripathi@yahoo.com";}i:6;a:7:{s:2:"id";s:1:"9";s:4:"slug";s:11:"description";s:4:"name";s:12:"Description:";s:4:"type";s:8:"textarea";s:7:"options";s:0:"";s:9:"parent_id";s:1:"0";s:5:"value";s:33:"<p>jdfkhhgdhfgdh</p>
";}i:7;a:7:{s:2:"id";s:2:"10";s:4:"slug";s:7:"license";s:4:"name";s:8:"License:";s:4:"type";s:6:"select";s:7:"options";s:239:"a:5:{i:0;s:14:"Select options";i:1;s:23:"Free For Commercial Use";i:2;s:26:"Free for personal use only";i:3;s:49:"Creative Commons Attribution 3.0 Unported License";i:4;s:61:"Creative Commons Attribution-Share Alike 3.0 Unported License";}";s:9:"parent_id";s:1:"0";s:5:"value";s:23:"Free For Commercial Use";}i:8;a:7:{s:2:"id";s:2:"11";s:4:"slug";s:49:"additional-information-about-the-license-optional";s:4:"name";s:53:"Additional Information About The License (Optional): ";s:4:"type";s:8:"textarea";s:7:"options";s:0:"";s:9:"parent_id";s:1:"0";s:5:"value";s:31:"<p>sdfsdfsdfsd</p>
";}i:9;a:7:{s:2:"id";s:2:"12";s:4:"slug";s:5:"image";s:4:"name";s:7:"Image: ";s:4:"type";s:11:"file-upload";s:7:"options";s:31:"a:1:{i:0;s:13:"png|jpe?g|gif";}";s:9:"parent_id";s:1:"0";s:5:"value";s:82:"http://localhost/wordpress/wp-content/uploads/2013/01/happy-new-year-1024x7681.jpg";}i:10;a:7:{s:2:"id";s:2:"13";s:4:"slug";s:8:"zip-file";s:4:"name";s:9:"Zip File:";s:4:"type";s:11:"file-upload";s:7:"options";s:20:"a:1:{i:0;s:3:"zip";}";s:9:"parent_id";s:1:"0";s:5:"value";s:67:"http://localhost/wordpress/wp-content/uploads/2013/01/backup-11.zip";}i:11;a:7:{s:2:"id";s:2:"16";s:4:"slug";s:9:"copyright";s:4:"name";s:9:"copyright";s:4:"type";s:4:"text";s:7:"options";s:0:"";s:9:"parent_id";s:1:"0";s:5:"value";s:16:"djfjdsjkdhfkjsdh";}i:12;a:7:{s:2:"id";s:1:"2";s:4:"slug";s:12:"verification";s:4:"name";s:12:"Verification";s:4:"type";s:12:"verification";s:7:"options";s:0:"";s:9:"parent_id";s:1:"0";s:5:"value";s:0:"";}i:13;a:7:{s:2:"id";s:1:"3";s:4:"slug";s:53:"please-enter-any-two-digits-with-no-spaces-example-12";s:4:"name";s:56:"Please enter any two digits with no spaces (Example: 12)";s:4:"type";s:6:"secret";s:7:"options";s:0:"";s:9:"parent_id";s:1:"2";s:5:"value";s:2:"14";}i:14;a:7:{s:2:"id";s:1:"4";s:4:"slug";s:13:"submit-vector";s:4:"name";s:13:"Submit Vector";s:4:"type";s:6:"submit";s:7:"options";s:0:"";s:9:"parent_id";s:1:"2";s:5:"value";s:0:"";}}

) 
```

当我在 php 中使用反序列化函数时，传递值

```
$data=unserialize($test->data); 
```

它在 server 上的**$data**中返回空结果。但是相同的代码在本地 xamp 服务器上工作。

我从前一天开始讨论这个问题。伙计们帮我看看这段代码中的确切问题是什么。

提前致谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T15:05:13.887

看起来您的序列化数据格式错误：

> unserialize()：在 3361 字节的偏移 1293 处出错

请参阅[我的代码示例](https://ignite.io/code/511f9fbfec221e6550000000)。尝试重新序列化您的数据结构，它应该可以正常工作。

# codeigniter - Codeigniter 更新会话用户数据

> ID：14911619
> 
> 赞同：1
> 
> 时间：2013-02-16T14:57:20.550
> 
> 标签：codeigniter, session, updates

我有这些会话数据：

```
"user_id"=>4545,
"user_firstname"=>"Jhon",
"user_email"=>"jhon@myfakeemail.com" 
```

例如，如果我更新：

```
$this->session->set_userdata("user_email","mynewemail@fakeemail.com"); 
```

整个会话会更新吗？

会话会得到一个新的会话ID吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T16:42:29.847

会话的重点是持久化用户数据。如果更新该 usedata 创建了一个新的会话 ID，那么会话的目的就完全失败了。更改存储的电子邮件地址将更改该会话中的电子邮件地址，仅此而已

# macos - CVPixelBuffer 到 FBO

> ID：14911626
> 
> 赞同：0
> 
> 时间：2013-02-16T14:58:08.963
> 
> 标签：macos, opengl, quicktime, fbo, core-video

我有一个应用程序，我想使用 FBO 来显示 QuickTime 电影的图像。我对 FBO 完全陌生，只对 OpenGL 有一点了解。我在理解带有绑定纹理和东西的 FBO 范例时遇到了问题，我希望你们能提供帮助。

为了获得电影的当前图像，我正在使用

`QTVisualContextCopyImageForTime(theContext, NULL, NULL, &currentFrameTex);``currentFrameTex`CVImageBufferRef 在哪里。

为了设置 FBO，我所做的只是：

```
glGenFramebuffersEXT(1, &idFrameBuf);
glBindFramebufferEXT(GL_FRAMEBUFFER_EXT, idFrameBuf); 
```

我正在使用以下代码绘制图像：

```
// get the texture target (for example, GL_TEXTURE_2D) of the texture
GLint target = CVOpenGLTextureGetTarget(currentFrameTex);
// get the texture target name of the texture
GLint texID = CVOpenGLTextureGetName(currentFrameTex);

// get the texture coordinates for the part of the image that should be displayed
CVOpenGLTextureGetCleanTexCoords(currentFrameTex,
                                 bottomLeft, bottomRight,
                                 topRight, topLeft);
glBindTexture(target, texID);
glTexParameteri(target, GL_TEXTURE_WRAP_S, GL_REPEAT);
glTexParameteri(target, GL_TEXTURE_WRAP_T, GL_REPEAT);
glTexParameteri(target, GL_TEXTURE_MIN_FILTER, GL_NEAREST);
glTexParameteri(target, GL_TEXTURE_MAG_FILTER, GL_NEAREST);

glTexImage2D(target, 0, GL_RGBA8, 256, 256, 0, GL_BGRA, GL_UNSIGNED_BYTE, NULL);
glFramebufferTexture2D(GL_FRAMEBUFFER_EXT, GL_COLOR_ATTACHMENT0_EXT, target, texID, 0); 
```

我只是得到一个黑色的图像，我不知道我做错了什么。如有必要，可以提供更多信息。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T19:58:24.670

请参阅[http://www.opengl.org/wiki/Framebuffer_Object](http://www.opengl.org/wiki/Framebuffer_Object)。FBO 允许您将图形渲染到屏幕外缓冲区，然后对其进行处理。您的代码覆盖了 currentFrameTex 提供的纹理，这没有多大意义。一旦你用非零 idFrameBuf 调用 glBindFramebufferEXT(GL_FRAMEBUFFER_EXT, idFrameBuf) 那么所有的图形都被绘制到这个 FBO 而没有任何东西出现在屏幕上。

# android - libQCAR.so 和 libExtensionVuforia.so 无法读取或不是好的 zip 文件

> ID：14911628
> 
> 赞同：0
> 
> 时间：2013-02-16T14:58:14.357
> 
> 标签：android, wikitude

我使用 Wikiitude 来制作增强现实，除了 eclipse（在 Windows 上）无法读取文件 libQCAR.so 和 libExtensionVuforia.so 或者它们不是好的 zip 文件。

请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T15:59:19.103

.so 文件是库文件，不能打开。

在“libs”文件夹中的 Eclipse 项目中，添加一个名为“armeabi”的文件夹（不带引号）并在其中添加 .so 文件。

# html - 如何在两列布局中使右侧边栏静态

> ID：14911629
> 
> 赞同：0
> 
> 时间：2013-02-16T14:58:17.507
> 
> 标签：html, css, two-column-layout

在此 wordpress 主题中滚动时，如何使右侧边栏列静态？

[http://foxnet.fi/demot/live-wire/2012/02/25/two-columns-content-left/](http://foxnet.fi/demot/live-wire/2012/02/25/two-columns-content-left/)

我想要一个类似的功能

[http://thenextweb.com/microsoft/2013/02/15/messengers-skpe/?fromcat=all](http://thenextweb.com/microsoft/2013/02/15/messengers-skpe/?fromcat=all)

右侧栏应始终在页面上，直到页面滚动到底部。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T15:06:56.110

从 css-tricks 网站阅读这篇关于[持久标头的文章。](http://css-tricks.com/persistent-headers/)我想您将需要对代码进行一些更改，但这应该不会太麻烦。

# java - 将参数从 Activity 传递给 doInBackground 方法，异步任务

> ID：14911633
> 
> 赞同：0
> 
> 时间：2013-02-16T14:58:29.610
> 
> 标签：java, android

我正在尝试将变量“chartUrl”从 JsonActivity 传递给 doInBackground 方法，如下所示。我试图改变论点，但没有奏效。有谁知道如何做到这一点？

提前致谢

代码 ：

公共类 JsonActivity 扩展 ListActivity{

```
 private ProgressDialog progressDialog;

    // JSON Node names

    private static final String TAG_RANK = "rank";
    private static final String TAG_NAME = "name";
   String chartUrl;

    String[] urlNames = new String[] { 
            "myurls"

            };

 // chartItemList holds the chart items 
    ArrayList<HashMap<String, String>> chartItemList = new ArrayList<HashMap<String, 
        String>>();
    JsonParser Parser = new JsonParser();

    JSONArray chartItems = null;

    /** Called when the activity is first created. */    
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        //setContentView(R.layout.listlayout);

      //Get the bundle from other activity
        Bundle bundle = getIntent().getExtras();

        //Extract chart index from the bundle
        int chartIndex = bundle.getInt("chartIndex");
        String chartUrl = urlNames[chartIndex]; 

        //Check if the user has a connection

        ConnectivityManager cm = (ConnectivityManager) 
            getSystemService(Context.CONNECTIVITY_SERVICE);
        NetworkInfo info = cm.getActiveNetworkInfo();
        if (info != null) {
            if (!info.isConnected()) {
                Toast.makeText(this, "Please check your connection and try again.", 
             Toast.LENGTH_SHORT).show();
            }

            //if positive, fetch the articles in background
            else new getChartItems().execute(chartUrl);
        }

        //else show toast
        else {
            Toast.makeText(this, "Please check your connection and try again.", 
            Toast.LENGTH_SHORT).show();
        }

    }

    class getChartItems extends AsyncTask<String, String, String> {

        // Shows a progress dialog while setting up the background task
        @Override
        protected void onPreExecute() {
            super.onPreExecute();
            progressDialog = new ProgressDialog(JsonActivity.this);
            progressDialog.setMessage("Loading chart...");
            progressDialog.setIndeterminate(false);
            progressDialog.setCancelable(false);
            progressDialog.show();
        }

        //Gets the json data for chart items data and presents it in a list view
        @Override
        protected String doInBackground(String... args) {

            String json = Parser.getJSONFromUrl(chartUrl);

            String rank;

            String name;

            try{

            chartItems = new JSONArray(json);

            JSONObject json_data=null;

             for(int i=0;i<chartItems.length();i++){

                json_data = chartItems.getJSONObject(i);
                rank=json_data.getString("rank");
                name=json_data.getString("name");

                 HashMap<String, String> hashMap = new HashMap<String, String>();
                 // adding each child node to HashMap key => value
                 hashMap.put(TAG_RANK, rank);
                 hashMap.put(TAG_NAME, name);

                 // adding HashMap to ArrayList
                    chartItemList.add(hashMap);

             }

              ;
            }

            catch (JSONException e) {
                e.printStackTrace();
            }

            runOnUiThread(new Runnable() {
                public void run() {
                     System.out.println(chartItemList);

                  //updates the list view with the parsed items
                    ListAdapter adapter = new SimpleAdapter(JsonActivity.this, chartItemList,
                            R.layout.list_item,
                            new String[] {TAG_RANK,TAG_NAME, }, new int[] 

                         {R.id.rank ,R.id.name});
                    setListAdapter(adapter);
                }
            });
            return null;
        }

        //Removes the progress dialog when the data has been fetched
        protected void onPostExecute(String args) {
            progressDialog.dismiss();
        }
    }

  } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T15:00:34.767

采用

```
String json = Parser.getJSONFromUrl(args[0]); 
```

代替

```
String json = Parser.getJSONFromUrl(chartUrl); 
```

`chartUrl`在 doInBackground 方法中获取值，如果`getChartItems`是 Activity 的内部类，则只需声明`chartUrl`为类级变量即可在整个类中访问它

# java - 如何使用 java 代码刷新 Eclipse 包资源管理器？

> ID：14911634
> 
> 赞同：3
> 
> 时间：2013-02-16T14:58:30.050
> 
> 标签：java, eclipse

在我的项目中，我生成了一些文件。但每次我需要刷新 Eclipse 包资源管理器。

所以我需要通过java代码刷新资源管理器。这是可能的吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-16T15:05:12.877

如果您使用 ANT 生成文件，您可以配置“外部工具配置”以在完成时刷新项目。

![在此处输入图像描述](../Images/d091d288495725ae868e4994d43b3fa2.png)

您也可以使用本机刷新选项：

![在此处输入图像描述](../Images/c3cbba9253fcf1af3348aea3de24f2da.png)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-16T15:04:10.677

窗口 - 首选项 - 常规 - 工作区 - 使用本机挂钩或轮询刷新。

# sql-server - 在 SQL Server 中重置 varchar 表

> ID：14911637
> 
> 赞同：0
> 
> 时间：2013-02-16T14:58:53.090
> 
> 标签：sql-server, sql-server-2012

在将旧数据库导入 SQL Server 时，我设法为成千上万的人提供了相同的名字和姓氏（我太棒了）。是否有脚本可以运行以使每个人的名字列为空白或说`First Name`？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T15:04:11.037

尝试 `update [tablename] set [firstname] = ''`

# objective-c - 存储特定值列表的好解决方案？

> ID：14911638
> 
> 赞同：0
> 
> 时间：2013-02-16T14:59:00.517
> 
> 标签：objective-c, for-loop, nsmutablearray

我使用以下代码来检索文件的上传顺序。文件必须按此特定顺序上传，不能同时上传。因此，我不能将我的代码放在这个 for 循环中，因为它会挂起线程。

```
 NSSortDescriptor *sort = [NSSortDescriptor sortDescriptorWithKey:@"order" ascending:YES];
NSArray *sortedArray = [agenciescontroller.arrangedObjects sortedArrayUsingDescriptors:[NSArray arrayWithObject:sort]];

for (NSManagedObject *a in sortedArray)
{
    for (NSMutableDictionary *d in imagescontroller.arrangedObjects)
    {
        if ([[NSString stringWithFormat:@"%@",[d valueForKey:[a valueForKey:@"agency"]]] isEqualToString: @"1"])
        {

            ///////////////////////////UPLOAD FILES HERE/////////////////////////////
            checkedchecks += 1;
            NSLog(@"Uploading %@ to %@", [d valueForKey:@"filename"], [a valueForKey:@"agency"]);
        }
    }
} 
```

我的想法是使用这个 for 循环来填充`NSMutableArray`或`NSMutableDictionaries`保存要上传的文件的精确列表，然后一个一个地浏览这个列表。这是一个明智的想法还是有更好的解决方案？还要记住，一旦文件被上传，我必须在 foo 循环中更新可变字典中的值。我在哪里检查值 =“1”，一旦上传完成，特定值必须设置为 0。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T15:08:10.103

使用`NSOperationQueue`您将属性设置为 1 的位置。然后在现有循环中为每次上传`maxConcurrentOperationCount`添加一个。`NSOperation`

要更新字典中的值，您可以向`NSOperation`对象添加完成块。只需确保在更新值时使用必要的同步，因为完成块将在某个后台线程上运行。

# visual-studio-2010 - 在 R# 7.0 中并行运行多个夹具

> ID：14911639
> 
> 赞同：1
> 
> 时间：2013-02-16T14:59:07.553
> 
> 标签：visual-studio-2010, nunit, resharper

*有什么方法可以在同一个程序*集中与 R# 7.0 并行运行多个文本固定装置？

我有一个包含许多 DB 绑定测试的程序集，这些测试的运行速度比所有其他测试程序集都慢，但我非常不愿意分解它，因为它会导致很多新项目。

干杯!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T17:09:01.703

就目前而言，没有内置的 ReSharper 功能可以在同一个程序集中并行运行多个文本装置。这计划在未来的版本中使用，但从 7.0 开始尚未实施。

我建议进行几个单元测试会话，每个会话都包含您的测试集的一部分。您可以通过 ReSharper->Unit tests->Create new session (Ctrl-UN) 创建新会话，然后向它们添加不同的测试。您需要手动为每个会话调用测试运行（在每个选项卡上按运行），但是不同测试会话中的测试将并行运行。

最后一点。如果您的测试需要很长时间，那么我建议使用持续集成工具（例如 TeamCity 或 CruiseControl.NET）在服务器上运行它们。您只需提交您的更改并为它们自动运行测试，同时您可以愉​​快地进一步编码。

# python - 无法解析从频道发送的 json

> ID：14911643
> 
> 赞同：1
> 
> 时间：2013-02-16T15:00:07.367
> 
> 标签：python, google-app-engine, channel-api

好的，在我的 python 代码中。我有这个

```
 foo = "aaa"; //foo and bar are variables that change, just an example here
   bar = "bbb";
   json = {"here": foo, "there": bar} //also tried single quotes
   message = simplejson.dumps(json) //also tried just json instead of simplejson
   channel.send_message(user_id(), message) 
```

在 JavaScript 中

```
 onMessage = function(m) {
    var a = JSON.parse(m.data);
    alert(a.here); // foo should pop up but it doesnt
  } 
```

似乎 parse 方法不起作用。没有弹出警报。如果我删除 parse line 并把它比 alert 弹出，如果我只是更改 alert 并继续解析它仍然没有做任何事情；

```
alert(m.data) // this prints out {"here": "aaa", "there": "bbb"} 
```

所以我知道为什么它解析不正确。我假设它与引号有关。我想我又遇到了他们的麻烦。

**更新**

请看下面我的回答，我解决了这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T23:00:40.057

所以我这样解决了这个问题；

```
var a = JSON.parse(String(m.data)); 
```

看起来 m.data 毕竟不是字符串，所以你需要转换它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T16:41:42.067

也许试试：

`alert (m.data['here']);`

# msmq - MSMQ 丢失第一条消息

> ID：14911644
> 
> 赞同：0
> 
> 时间：2013-02-16T15:00:15.843
> 
> 标签：msmq

在 MSMQ 中，第一条消息丢失，没有在队列中接收，但之后我们的系统处于正常状态，谁能解释一下。

简单代码

公共类 MSMQExample{

```
 private MessageQueue GetQueue(){

    MessageQueue _queue=new MessageQueue(@”.\Private$\Test");
    return _queue;
 }

 public void SendMessage(){
         MessageQueue queue=GetQueue();
         Message msg = new Message();
         msg.Body ="Test"
         queue.Send(msg);
}
//Call this method in Application_Start event in new Task.
public void StartQueue(){
    MessageQueue queue=GetQueue();
    Message msg=null;
    while(true){
       msg=queue.Receive();
       //Processing Code
    }
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-02T05:16:30.860

为此，您必须将消息标记为`Recoverable`.
默认情况下，`MSMQ`消息仅保存在内存中，但`Recoverable`消息被备份到磁盘以启用可靠的`MSMQ`消息传递。

```
using System.Messaging;
Message recoverableMessage = new Message();
recoverableMessage.Body = "Sample Recoverable Message";
recoverableMessage.Recoverable = true;
MessageQueue msgQ = new MessageQueue(@".\$private\Orders");
msgQ.Send(recoverableMessage); 
```

# assembly - ATT 汇编语言算术

> ID：14911647
> 
> 赞同：0
> 
> 时间：2013-02-16T15:00:38.483
> 
> 标签：assembly, att

```
Address    Value         Register    Value
0x100      0xFF          %eax        0x100 
0x104      0xAB          %ecx        0x1
0x108      0x13          %edx        0x3
0x10C      0x11

Instruction                        Destination                Value
imull  $16, (%eax, %edx, 4)        ___________                _____ 
```

我不断将 0x10C 作为目的地（这是正确的）。但是由于某种原因，当我乘以 10C * 16（源 * 目标）时，我得到 1708，这是不正确的。有人可以帮帮我吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T15:04:48.197

你不是将 0x10C 乘以 16，而是将地址 0x10C（即 0x11）处的内容乘以 16。这样就得到了 0x110（或 272）。

# sql - 查询有时会给我重复

> ID：14911649
> 
> 赞同：0
> 
> 时间：2013-02-16T15:00:45.410
> 
> 标签：sql

我的搜索选项有这个问题。我的问题是，它给了我重复。不可能，因为如果我按 ID 搜索，它会给我两行，并且 ID 是唯一的。这是我使用的查询：

```
SELECT forma.*, SMS_MONTIME.IDTICKET, SMS_MONTIME.MBYLLUR,SMS_MONTIME.time_added
FROM forma 
LEFT JOIN SMS_MONTIME ON forma.ID = SMS_MONTIME.IDTICKET where forma.$kategoria LIKE '%$search%' ORDER BY forma.ID 
```

我可以使用什么来避免重复？也许没有离开加入。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T15:05:31.877

当您在`SMS_MONTIME`table 中有多个`IDTICKET`等于 single 的行时，就会发生这种情况`forma.ID`。例如，如果`forma`表中只有一行`ID`等于，则可能有`10`两行等于。然后你在结果中得到两行，表中的重复信息和表中的不同信息。`SMS_MONTIME``IDTICKET``10``forma``SMS_MONTIME`

除非你重新考虑你想要的结果，否则你无法避免这种情况。表的不同信息应该怎么处理`SMS_MONTIME`？您可能需要使用单独的查询来提取所需的信息，或者您可以处理结果（带有重复项）以提取所需的信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T15:04:18.227

你试过了吗`DISTINCT`

```
SELECT DISTINCT column_name(s)
FROM table_name
Where <conidition> 
```

检查[这个链接](http://www.w3resource.com/sql/select-statement/queries-with-distinct-multiple-columns.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T15:14:32.093

正如我在评论中提到的，如果您的 SMS_MONTIME 表中有多条记录，您将收到重复的记录。如果您只想接收一条记录，则可以获取 MAX(time_added) 并仅显示该记录。这是一个例子：

```
SELECT forma.*, SMS_MONTIME.IDTICKET, SMS_MONTIME.MBYLLUR,SMS_MONTIME.time_added
FROM forma 
    LEFT JOIN (
        SELECT IDTICKET, MAX(time_added) max_time_added
        FROM SMS_MONTIME 
        GROUP BY SMS_MONTIME.IDTICKET
    ) SMS_MONTIME_MAX ON forma.ID = SMS_MONTIME_MAX.IDTICKET 
    LEFT JOIN SMS_MONTIME ON 
        forma.ID = SMS_MONTIME.IDTICKET AND SMS_MONTIME.time_added AND SMS_MONTIME_MAX.max_time_added
WHERE forma.$kategoria LIKE '%$search%' 
ORDER BY forma.ID 
```

希望这可以帮助。

# php - 使用 OOP PHP 循环遍历关联数组

> ID：14911650
> 
> 赞同：0
> 
> 时间：2013-02-16T15:00:58.887
> 
> 标签：php, scope

```
<?php

class Validate
{
public $errors = array();

public function date($date)
{
    if(!strtotime($date))
    {
        $errors['date'] = "$date is not a valid date."; 
        //var_dump($errors);
    } else {
        return $date;
    }
}

public function get_errors()
{
    foreach($this->errors as $error => $val)
    {
        return $val."<br />\n";
    }

}

}

$validate = new Validate;
$validate->date('<20 Feb, 2013');
print $validate->get_errors(); 
```

它应该循环将`$errors`它们打印到浏览器。它没有。我确定`$errors`数组通过以下语句初始化：

```
var_dump($errors); 
```

印刷：

```
array(1) { ["date"]=> string(34) "<20 Feb, 2013 is not a valid date." } 
```

到屏幕。我错过了什么？

我尝试了各种形式的 foreach 构造：

```
foreach($this->errors as $this->error => $val)
    {
        return $val."<br />\n";
    } 
```

和

```
foreach($this->errors as $this->error => $this->val)
    {
        return $this->val."<br />\n";
    } 
```

但没有快乐！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T15:02:48.260

首先，您必须将错误消息分配给`$this->error`而不是`$error`：

```
public function date($date) {
    if(!strtotime($date)) {
        $this->errors['date'] = "$date is not a valid date."; 
    } else {
        return $date;
    }
} 
```

其次，您从错误数组 ( `return $val."<br />\n";`) 中返回第一个错误。您可以使用[`array_value`](http://php.net/manual/en/function.array-values.php)函数从数组中获取所有值：

```
public function get_errors() {
    return implode('<br />', array_values($this->errors));
}
// ...
print $validate->get_errors(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T15:06:24.160

一个函数只能返回一次。您不能循环并返回整个数组，因此最好一次返回整个数组：

```
public function get_errors()
{
  return $this->errors;
} 
```

然后将其完全输出到其他地方：

```
foreach($validate->get_errors() as $error => $val) {
  echo $val . "<br />"; // echo is the output command
} 
```

或者调试它：

```
var_dump($validate->get_errors()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T15:12:46.570

你也可以说

```
public function get_errors() {
  return implode('<br>', $this->errors);
} 
```

# delphi - 无法在编辑的 keydown 上显示消息

> ID：14911653
> 
> 赞同：0
> 
> 时间：2013-02-16T15:01:31.237
> 
> 标签：delphi

是这个错误还是我错过了什么？

这是用 Delphi XE2 编写的代码，但在 XE3 中不起作用......

```
procedure TForm1.Edit1KeyDown(Sender: TObject; var Key: Word;
  Shift: TShiftState);
begin

  if Key = VK_ESCAPE then //works when I press ESC!
    ShowMessage('escape');

  if Key = VK_RETURN then
    ShowMessage('enter'); //doesn't work when I press ENTER!
end; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-16T15:18:28.813

ENTER 键被认为是“对话键”；例如，它可以激活表单上的默认按钮。这不是一个错误，这就是事情的本来面目。如果您希望`TEdit`接收`ENTER`密钥，则需要对其进行子类化以处理[WM_GETDLGCODE](http://msdn.microsoft.com/en-us/library/windows/desktop/ms645425%28v=vs.85%29.aspx)并说您想要接收`ENTER`密钥。你需要做这样的事情：

```
procedure TYourEditSubclass.WMGetDlgCode(var Message: TWMGetDlgCode);
begin
  Message.Result := DLGC_WANTALLKEYS;
end; 
```

或者，您可以在 FORM 上启用[KeyPreview](http://docwiki.embarcadero.com/Libraries/XE2/en/Vcl.Forms.TCustomForm.KeyPreview)并使用它的键盘事件。当您收到 Enter 键时，测试 Edit 是否具有焦点。像这样的东西会起作用：

```
procedure TForm6.FormKeyDown(Sender: TObject; var Key: Word;
  Shift: TShiftState);
begin
  if (Key = VK_RETURN) and (Edit1.Focused) then
    ShowMessage('enter');
end; 
```

# sharepoint-2010 - 在 windows server 2008 上配置 sharepoint 2010：Microsoft.SharePoint.Upgrade.SPUpgradeException 类型的异常

> ID：14911656
> 
> 赞同：0
> 
> 时间：2013-02-16T15:02:00.157
> 
> 标签：sharepoint-2010, configuration, windows-server-2008

配置 sharepoint 2010 时发生此错误

![在此处输入图像描述](../Images/17a3e5fc119de6752f3d66bef912d9e9.png)

在谷歌搜索之后，他们说安装一个叫做“图表控件”的东西，它会被修复。

我做到了。但它并没有解决问题。

有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T15:47:34.060

谢谢sga101。我卸载了 Microsoft Office 2013 并重新启动了配置，它成功运行

# php - 仅允许从 1 个脚本/位置访问文件

> ID：14911658
> 
> 赞同：0
> 
> 时间：2013-02-16T15:02:05.900
> 
> 标签：php, .htaccess

是否可以使用 .htaccess 或类似方法来阻止通过 http 访问文件夹中的文件，但是如果通过特定页面/脚本调用则允许访问这些文件？我想确保对文件的唯一访问是如果用户登录到他们的帐户，其中将提供指向受保护文件的链接。希望这是有道理的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T15:03:55.637

将要限制访问的文件放在脚本之外`public_html`并在脚本中使用它们。这样，将无法直接访问该文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T15:03:58.803

只需将这些文件放在网络服务器根目录**之外**，并通过受保护的资源路径访问它们。

# php - 跨 jquery 刷新维护 div 的状态

> ID：14911660
> 
> 赞同：0
> 
> 时间：2013-02-16T15:02:14.123
> 
> 标签：php, jquery, html

**故事**

[现场演示](https://kund.glasgarden.com/taxibeta/?date=2013-02-16)

我使用 jQuery auto_refresh 函数，它每 5 秒重新加载一个包含预订和刷新信息的特定 div。倒计时剩余时间等等..

预订显示在列表视图中，简化如下：

```
pickup: 15:00 from: thisway 53 to: thatway 23 who: Mr. Andersson note: credit card
pickup: 15:30 from: wayout 33 to: wayoverthere 12 who: Mrs. Morgan note: wheel chair 
```

**问题：**

```
<script> 
var auto_refresh = setInterval(
function(){ $(".refresh").load('?date=<?php echo $_GET['date']; ?>&id=' +Math.random()+ ' .refresh').fadeIn("fast");
}, 5000); // refresh every 5 sec 
</script>

<div class="refresh"> [booking content] 
<a href="#info-113">Show detailed info</a>
<a href="#cancel-113">Cancel booking</a>
<div class="info" id="113">Detailed information. information code. This is hidden until requested.</div>
</div>
<div class="cancel" id="113">Cancel booking. cancel code. This is hidden until requested.</div>
</div>
</div> 
```

每次 jquery.div 重新加载时，似乎都**无法阻止 toggle.div 消失。**如果要求 div 可见，即使在自动刷新后它也需要保持可见。（因为它还处理更新/取消/分配）但似乎 jQuery 在重新加载 div 内容时也会以某种奇怪的方式删除主题标签。

如果有人可以在这里帮助我，我将非常感激，我哦，太难了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T16:15:49.220

您也可以通过其他方式执行此操作。将您的页面保存在 div 内的 iframe 中，并使用 PHP 轻松刷新它。

# javascript - 在 Android Webview 中加载远程 html 页面后添加 javascript 代码

> ID：14911665
> 
> 赞同：6
> 
> 时间：2013-02-16T15:02:58.170
> 
> 标签：javascript, android, webview

我在 Android 中的 webview 有问题。我正在使用一个有 2 个片段的应用程序；第一个有一个 EditText，第二个有一个 webview。

是否可以通过调用修改加载页面的 DOM 的 javascript 函数在 webview 中加载的页面中传递 Edittext 的字符串？

例如，在 webview 中加载后：

```
webview.loadUrl("http://google.it"); 
```

我想在谷歌搜索页面的编辑文本中插入一个从 java 传递的字符串；我尝试了这个作为第一步：

```
webview.setWebViewClient(new WebViewClient() {  
            @Override  
            public void onPageFinished(WebView view, String url)  
            {  
               webview.loadUrl("javascript:(function() {alert();})()");  
            }  
        }); 
```

但不显示警报。

感谢您的任何反馈，并为我不完美的英语感到抱歉。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2017-03-03T13:03:15.560

尝试这个：

```
webview.getSettings().setJavaScriptEnabled(true);
webview.setWebChromeClient(new WebChromeClient());
webview.setWebViewClient(new WebViewClient() {
   @Override
   public void onPageFinished(WebView view, String url){
       String javaScript ="javascript:(function() {alert();})()";
       webview.loadUrl(javaScript);
   }
});
webview.loadUrl(url); 
```

这里是源码[链接](https://code.google.com/p/android/issues/detail?id=752)！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-22T11:50:04.793

alert() 有点棘手。您需要捕获它并将其转换为 Toast。

看看这个： [https ://code.google.com/p/apps-for-android/source/browse/Samples/WebViewDemo/src/com/google/android/webviewdemo/WebViewDemo.java](https://code.google.com/p/apps-for-android/source/browse/Samples/WebViewDemo/src/com/google/android/webviewdemo/WebViewDemo.java)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-30T19:15:11.823

这对我有用

```
 webview.loadUrl("javascript:function sagvelgardkharast() { document.getElementById('gkFooter').style.display='none'; " +
                        " document.getElementById('gkBottom5').style.display='none'; " + 
                        " } sagvelgardkharast(); "); 
```

# mysql - Mysql 2搜索2表加入

> ID：14911666
> 
> 赞同：0
> 
> 时间：2013-02-16T15:03:06.020
> 
> 标签：mysql, search, join

是否可以在一个查询中以某种方式使用 JOIN 对 2 个不同的表进行两次搜索并收集它们重叠的位置？

这是人类术语的思考过程：（注意，我有两个表格；个人资料和发票）

*   从发票表中查找所有已付款列填充“已付款”的行

*   获取所有对应的“profileid”列号

*   删除重复项（或多次出现）

*   使用论文 ID 在配置文件表中查找所有配置文件

*   对这些配置文件进行进一步搜索，例如 where firstname LIKE '%$firstname%' 等

像这样的东西：

```
$query = "SELECT profileid FROM invoicetable WHERE paidcolumn LIKE '%$paid%' INNER JOIN profiletable ON 
invoicetable.profileid=profiletable.id WHERE (profiletable.firstname LIKE '%$firstname%' AND profiletable.email LIKE ........)"; 
```

我感觉我快到了...

还是我必须先通过数组来完成？

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T15:08:27.123

尝试这个：

```
SELECT DISTINCT I.profileid
FROM invoicetable I
    INNER JOIN profiletable P
        ON I.profileid=P.id
WHERE P.firstname LIKE '%$firstname%'
         AND I.paidcolumn LIKE '%$paid%'
         AND P.email LIKE ........ 
```

# php - MySQL/PHP 字符集 UTF_8 混淆

> ID：14911668
> 
> 赞同：-1
> 
> 时间：2013-02-16T15:03:13.040
> 
> 标签：php, mysql, character-encoding

我知道有很多关于这方面的问题，并且相信我已经尝试过对其进行正面或反面，但我似乎仍然很难将这些点联系起来。

所以我得到一个 xml 数据馈送 UTF_8 并将其存储在 MySQL 表中（默认字符集 utf8 排序 utf8_general_ci）。我有一个我希望能够正确搜索的 varchar(255)。在大多数情况下，它按预期工作，但我的数据中包含国际字符，例如，

1.  埃尔科拉桑
2.  埃尔科拉松

字符串 1 在浏览器中正确显示，但字符串 2 不正确。字符串 1 看起来像“El Corazón”，字符串 2 看起来像“El Coraz�n”。但是，如果我尝试选择“El Corazón”或“El Corazon”，我只会得到字符串 2。

我想要做的是： 1\. 处理和清理数据馈送以保留所有合法字符并丢弃任何损坏的字符、换行符、回车馈送、制表符等。

我的 php 脚本中有 preg_replace，但它删除了我认为是合法字符的 Ã³。或多或少所有国际字符都被删除了，我不希望发生这种情况，我只想要干净的数据。

1.  我希望能够使用“El Corazón”或“El Corazon”搜索表并检索等于“El Corazón”或“El Corazon”的行。

2.  显然，我希望浏览器的所有输出都能正确显示。

我一直在思考如何执行以下操作，

如何准确擦洗数据以免丢失国际字符？

我是否尝试将 Ã³ 转换为 ó 以便搜索功能正常工作并在 php 中转换以正确显示？

我应该创建两列，一列用于搜索，一列用于显示？

另一件事，我想在下游做一些更简单的字符串格式化，比如用 '&' 替换 'and' 和其他切换完整单词的缩写。

正如我所说，我已经搜索并尝试了 iconv、mb_convert_encoding 等，但没有得到想要的结果。

任何连接点的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T15:21:41.963

规则很简单

```
mysql_set_charset('utf8'); 
```

（或类似的功能取决于你的mysql API）连接
后

```
header('Content-type: text/html; charset=utf-8') 
```

在页面上的任何输出之前

# c - 如何处理 C 中的溢出

> ID：14911672
> 
> 赞同：-1
> 
> 时间：2013-02-16T15:04:08.227
> 
> 标签：c, overflow

我想用C做一个数学**组合计算器**。例如，5组合2是10。即使使用`unsigned long long`类型，我的程序中也会出现**溢出**问题。输入源是 n 和 m。每个数字都是 (5<= n,m <= 100) 和 (m<=n) 绑定的。另外，我在下面附上了我的代码。有没有我不知道的更大数字类型或解决方案？请告诉我。提前感谢您的帮助。

```
#include <stdio.h>
static unsigned long long gcd(unsigned long long a, unsigned long long b)
{
if(a<b)
    return gcd(b, a);
if(b==0)
    return a;
return gcd(b, a%b);
}

int main()
{
unsigned long long n, m1, m2, i, j, temp, denominator[101] = {1,}, numerator[101] = {1,}, total_de = 1, total_nu = 1, gcd_result;

scanf("%llu %llu",&n, &m1);
m2 = n - m1;
if(m2 < m1)
{
    temp = m1;
    m1 = m2;
    m2 = m1;
}// m1 is small

denominator[0] = 1; numerator[0] = 1;
for(i=1; i<=m1; i++)
{
    denominator[i] = n--;
    numerator[i] = i;
}

for(i = 1; i<=m1; i++)
{
    for(j = 1; j<=m1; j++)
    {
        gcd_result = gcd(denominator[i], numerator[j]);
        denominator[i] /= gcd_result;
        numerator[j] /= gcd_result;
    }
}

for(i = 1; i<=m1; i++)
{
    total_de *= denominator[i];
    total_nu *= numerator[i];
}
// sometimes overflow happened
printf("%llu\n",total_de/total_nu);

return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-16T15:06:42.867

我建议使用允许任意精度的库，例如[GMP](http://gmplib.org)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-16T15:10:28.447

处理大量但已知最大长度的一种方法是通过数组。您可以将数字分成几部分并将每个部分存储在单独的数组元素中。

另一种方法是，使用链表来处理大量最初未知的长度。原理保持不变，将数字分成更小的部分并存储在列表的单独节点中。

无论哪种情况，您都必须编写自己的函数来处理您需要完成的算术运算。总的来说，这将是一个有趣的编程练习 :)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-17T10:26:26.693

通过使用帕斯卡三角形，我可以更有效地解决我的解决方案。不使用乘法。溢出问题通过整数分隔数字解决。

# python - Python字典以列表元素作为键，另一个列表的元素作为值？

> ID：14911676
> 
> 赞同：4
> 
> 时间：2013-02-16T15:04:15.690
> 
> 标签：python, list, dictionary

所以我想制作一个 Python 字典，其中一个列表的元素作为键，另一个列表的列表元素作为值，这可能吗？

以便：

```
list1 = ('red', 'blue', 'green', many more strings )
list2 = (1, 2, 3, many more values)

d = { list1[0:]: list2[0:] } 
```

这显然行不通，但类似的东西？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-16T15:08:04.203

你可以这样做：

```
>>> d = dict(zip(list1, list2))
{'blue': 2, 'green': 3, 'red': 1} 
```

# javascript - 如何动态加载脚本（node js）

> ID：14911684
> 
> 赞同：4
> 
> 时间：2013-02-16T15:04:35.857
> 
> 标签：javascript, node.js

所以，在我的 nodeJS 服务器部分，我需要使用 js 文件中的函数。这个文件经常更新，所以每次客户端加载页面时我都需要动态加载这个文件。我怎么能做到这一点？谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-16T15:14:35.207

从其他文件加载代码是使用`require`. 但是，一旦你有了`require`'da 文件，再次要求它不会再次从磁盘加载文件，而是从 Node 维护的内存缓存加载文件。要再次重新加载文件，您需要在`require`再次调用文件之前删除文件的缓存条目。

假设您的文件名为`/some/path/file.js`：

```
// Delete cache entry to make sure the file is re-read from disk.
delete require.cache['/some/path/file.js'];
// Load function from file.
var func = require('/some/path/file.js').func; 
```

包含该函数的文件如下所示：

```
module.exports = {
  func : function() { /* this is your function */ }
}; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2018-07-07T13:49:45.540

除了@robertklep 的回答，这里还有任何路径的解决方案：

```
const path = require('path');

var lib_path = './test' // <-- relative or absolute path                                                                  
var file = require(lib_path);

const reset_cache = (file_path) => {
    var p = path.resolve(file_path);
    const EXTENTION = '.js';
    delete require.cache[p.endsWith(EXTENTION) ? p : p + EXTENTION];
}

// ... lib changed                                                                                                             

reset_cache(lib_path);
file = require(lib_path); // file changed 
```

不幸的是，重新加载文件的所有依赖项也没有重新加载。

此外，您可以使用[clear-require](https://www.npmjs.com/package/clear-require)模块：

```
const clear_require = require('clear-require');

require('./foo');
// ... modify
clear_require('./foo');
require('./foo'); 
```

它可以清除所有模块，并处理正则表达式。

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2013-02-17T02:53:16.320

这个非常简单的脚本让我很开心 :) github.com/isaacs/node-supervisor

第一的：

```
npm install supervisor -g 
```

第二：

```
supervisor myapp.js 
```

我有一些错误，但它的作品。

# php - 如何回显目录名称

> ID：14911685
> 
> 赞同：1
> 
> 时间：2013-02-16T15:04:42.857
> 
> 标签：php, dir

如何使用图片库回显目录名称

此代码显示随机图像，我想用图像回显目录名称，请帮助我解决此问题。

**我想要这样

例子

```
______________
|     this    |
|     is      |
|    image    |
|             |
|_____________|
 Directory Name 
```

**

```
<?php

$directory = "./*/";

//get all image files with a .jpg extension.
$images = glob("" . $directory . "*.jpg");

$imgs = '';
// create array
foreach($images as $image){ $imgs[] = "$image"; }

//shuffle array
shuffle($imgs);

//select first 20 images in randomized array
$imgs = array_slice($imgs, 0, 20);

?>

 <table id="results">
            <tr>
            </tr>
<tr>

<?php $num_of_files = 0; $i=0; foreach ($imgs as $img):?>
<td><a href="<?php echo $img ?>" target="_blank"><img class="shadow1" name="field-name" src="<?php echo $img ?>thumb.jpeg" width=165 height=135 /></td>
<?php if (++$num_of_files == 12)break; ?>
  <?php if(++$i%3==0): ?>
    </tr><tr>
  <?php endif ?>

<?php endforeach ?>

</tr>
</table> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T15:12:47.457

你为什么不在标签`echo $directory`下面？`<img>`

```
<tr>
   <?php foreach ($imgs as $img): ?>
   <td>
      <a href="<?php echo $img ?>" target="_blank">
         <img class="shadow1" name="field-name" src="<?php echo $img ?>thumb.jpeg" width=165 height=135 />
      </a>
      <p><?php echo basename($directory); ?></p>
   </td>
   <?php endforeach; ?>
</tr> 
```

您在当前范围内无权访问此参数吗？另一种选择是：

```
<p><?php echo basename(pathinfo($img, PATHINFO_DIRNAME)); ?></p> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T15:14:37.937

```
echo  basename(realpath('./')); 
```

**真实路径**：

> realpath() 扩展所有符号链接并解析输入路径中对“/./”、“/../”和额外“/”字符的引用，并返回规范化的绝对​​路径名。

和

**基本名称**：

> 给定一个包含文件或目录路径的字符串，此函数将返回尾随名称组件。

请参考官方网站上的[basename](http://www.php.net/manual/en/function.basename.php)和[realpath](http://www.php.net/manual/en/function.realpath.php)。

# mysql - Mysql主从复制——选择ip/interface（从多IP）

> ID：14911687
> 
> 赞同：0
> 
> 时间：2013-02-16T15:04:48.253
> 
> 标签：mysql, interface, ip, database-mirroring

我成功运行了 mysql 主/从复制。然后，我向从机添加了多个 IP。

现在我在从站上收到连接错误。我的猜测是这是因为从机正在尝试与 IP 连接，并且在主机上，我已经为从机的其他 IP 创建了用户。

我可以（如果是，那么如何）配置从设备以使用所有可用接口的特定固定 IP 连接到主设备？我不想在主服务器上为从服务器的不同 IP 创建不同的复制用户。

信息：运行 ubuntu 12.04 的服务器。

谢谢

# javascript - Jquery 导航栏无法正常工作

> ID：14911689
> 
> 赞同：0
> 
> 时间：2013-02-16T15:05:01.393
> 
> 标签：javascript, jquery, html, css

我正在尝试用 HTML 制作导航类型的东西，我已经为它添加了以下代码 HTML

```
<div id="sign-wrap">    <div  id="click-box" class="welcome">    
    <p class="welcome" id="name">Welcome Mr. X</p>    </div>    <div id="dropdown">
       <ul>
            <li><a href="/">Insight Pro</a></li>
            <li><p>Mobiles</p></li>
            <li><p>Cameras</p></li>
            <li><p>Laptops</p></li>
            <li><p>Settings</p></li>
            <li><p>Logout</p></li>
       </ul>    </div> </div> 
```

JQ:

```
$("#name, #click-box").hover(function(){
    if ($('#dropdown').is(":visible")) {
       $('#dropdown').slideUp(1000);
    }
    else{
        $('#dropdown').slideDown(1000);
    }
}); 
```

当我将鼠标悬停在 X 先生`#dropdown`上时会向下滑动，但是当我将鼠标`#dropdown`向上滑动时...请帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T15:35:12.010

发生这种情况是因为您`hover`在两个不同的元素上给出了事件。当调用一个元素的悬停事件时，它会显示菜单，当您尝试转到该菜单时，会触发其他元素的悬停，这会使您的菜单栏向上（向上滑动）*[您正在根据可见性，因此对于第二次触发，div 是可见的，这使它向上滑动]*

使用`mouse enter`和`mouse leave`事件
鼠标进入 slideDown 和鼠标离开 slideUp
（如果不需要在两个元素上提供事件，那么最好在一个元素上应用事件以防止闪烁效果*[如果有]*）

```
$("#name, #click-box").mouseenter(function(){
       $('#dropdown').slideDown(1000);
});

$("#name, #click-box").mouseleave(function(){
       $('#dropdown').slideUp(1000);
}); 
```

参考[鼠标进入](http://api.jquery.com/mouseenter/)和[鼠标离开](http://api.jquery.com/mouseleave/)事件

希望这能解决问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T16:04:07.537

在单击框元素上使用单击事件可能会使您的用户更容易单击菜单项。例如，您可以使用以下代码段

```
$("#click-box").click(function () { $("#dropdown").slideToggle("slow"); }); 
```

希望这对您有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T15:44:58.460

用这个...

```
var hovered = false;

$("#name, #click-box").on('hover', function(e){
        $('#dropdown').slideDown(1000);
});

$("#options").on('hover', function(e){
        hovered = true;
});

$("#dropdown").on('mouseleave', function(e){
        hovered = false;
});

$("#sign-wrap").on('mouseleave', function(e){
    if(!hovered){
        $('#dropdown').slideUp(1000);
    }
}); 
```

并查看[这个 jSfiddle 示例。](http://jsfiddle.net/z7WLd/3/)

# c# - 如何编写过滤属性方法的 LINQ 表达式树？

> ID：14911695
> 
> 赞同：1
> 
> 时间：2013-02-16T15:05:32.783
> 
> 标签：c#, linq

所以我有一组带有属性的对象：

```
ParentObject parentObj
{
    string SomeProperty1
    string SomeProperty2
} 
```

在查询这些属性之前，需要将它们设为 ToLower() 和 Trim()。我明白我可以做到：

```
Expression.Call(pe, typeof(string).GetMethod("Trim", Type.EmptyTypes)); // Or ToLower 
```

和

```
Expression.Property(pe, typeof(string).GetProperty("SomeProperty1")); 
```

但是我该如何组合它们呢？

我需要的东西相当于

```
from query in parentObjCollection
where query.SomeProperty1.Trim() == "asdf"
select query 
```

有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T15:08:35.370

`Expression.Property`返回一个表达式本身，您可以将其用作调用的第一个参数（完整示例）：

```
var parent = new ParentObject{ SomeProperty1 = "    test" };
var pe = Expression.Constant(parent);
var property = Expression.Property(pe, typeof(ParentObject).GetProperty("SomeProperty1"));
var call = Expression.Call(property, typeof(string).GetMethod("Trim", Type.EmptyTypes));

var result = Expression.Lambda(call).Compile().DynamicInvoke();

Console.WriteLine(result); // -> "test" 
```

请注意，我必须修改您的`Expression.Property`电话。

# android - 在android中使用某种基本的艺术字

> ID：14911698
> 
> 赞同：1
> 
> 时间：2013-02-16T15:06:22.547
> 
> 标签：android, text, colors

我正在编写一个应用程序，该应用程序涉及用户编写某种问候文本（“节日快乐”或那种）。我想给用户尽可能多的自由来选择文本的字体和颜色。到目前为止，我想出的是分配具有特定文本颜色的特定按钮 - 即带有红线的绿色文本按钮，带有黄色文本和蓝色背景的按钮等。
有没有更通用的方法来做到这一点？即某种可以弹出供用户使用的内置彩色调色板/字体选择屏幕？
谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T15:38:20.093

我不知道任何内置屏幕。搜索此类仅显示用户编写的库的事实使我相信没有任何可以使用的内置屏幕。

一些谷歌搜索带来了这个字体选择对话框：

[http://www.ulduzsoft.com/2012/01/fontpreference-dialog-for-android/](http://www.ulduzsoft.com/2012/01/fontpreference-dialog-for-android/)

...和一个颜色选择器对话框：

[http://code.google.com/p/android-color-picker/](http://code.google.com/p/android-color-picker/)

# android - wifiLock 和 wakeLock 在 Android 上无法正常工作

> ID：14911700
> 
> 赞同：6
> 
> 时间：2013-02-16T15:06:24.573
> 
> 标签：android, wifi, android-4.2-jelly-bean, wakelock

我正在开发一个需要同时使用 wifiLock 和 wakeLock 的应用程序，这样屏幕关闭时的音频流就不会受到干扰。我已经在Android 2.3和wakeLock上尝试了我的应用程序，看起来wifiLock按预期工作，所以屏幕打开或关闭时没有区别，但屏幕关闭时Android 4.2（Jelly-bean）上的相同应用程序不是工作正常，音频变得断断续续，这表明 wakeLock 或 wifiLock 工作不正常。这有什么原因吗？

以下是我获取和释放锁的方式，在我的主要活动中：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    PowerManager powerManager = (PowerManager) getSystemService(Context.POWER_SERVICE);
    wakeLock = powerManager.newWakeLock(PowerManager.FULL_WAKE_LOCK, "MyWirelessHeadphone");

    WifiManager wm = (WifiManager) getSystemService(Context.WIFI_SERVICE);
    wifiLock = wm.createWifiLock(WifiManager.WIFI_MODE_FULL , "MyWifiLock");
    ...
}

@Override
protected void onDestroy() {
    super.onDestroy();
    if (wakeLock.isHeld()==true) 
        wakeLock.release();
    if (wifiLock.isHeld()==true) 
        wifiLock.release();
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2015-07-17T14:54:47.013

我只是偶然发现了这个问题——对于 OP 来说可能已经晚了几年，但以防万一它对其他人有帮助，你可能需要使用[`WIFI_MODE_FULL_HIGH_PERF`](http://developer.android.com/reference/android/net/wifi/WifiManager.html#WIFI_MODE_FULL_HIGH_PERF)而不是`WIFI_MODE_FULL`，因为这可能会导致流问题：

```
wifiLock = wm.createWifiLock(WifiManager.WIFI_MODE_FULL_HIGH_PERF , "MyWifiLock"); 
```

我可能会考虑以 a`Service`而不是a 来传输音频`Activity`，尤其是当您似乎在设计它时考虑到在后台运行的想法。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2018-11-06T07:16:03.583

发布答案为时已晚，但也许它可以帮助某人。当我遇到同样的问题并得到解决方案时：

```
 WifiManager wm = (WifiManager) getApplicationContext().getSystemService(Context.WIFI_SERVICE);
        wifiLock = wm.createWifiLock(WifiManager.WIFI_MODE_FULL_HIGH_PERF , "MyWifiLock");
        wifiLock.acquire();
        PowerManager pm = (PowerManager) getApplicationContext().getSystemService(Context.POWER_SERVICE);
        wakeLock = pm.newWakeLock(PowerManager.PARTIAL_WAKE_LOCK, "MyWakeLock");
        wakeLock.acquire(); 
```

并在destroy方法中释放锁：

```
if (wakeLock != null) {
            if (wakeLock.isHeld()) {
                wakeLock.release();
            }
        }
        if (wifiLock != null) {
            if (wifiLock.isHeld()) {
                wifiLock.release();
            }
        } 
```

我认为在您的情况下缺少的是您没有获得锁。请参阅此[链接](https://developer.android.com/guide/topics/media/mediaplayer#java)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-06T12:25:27.923

您正在获取活动中的锁定，并且当您的活动进入堆栈时，系统可以删除并销毁您的活动，这可能是您的问题的原因。尝试获取服务中的锁。但是 PARTIAL lock 和 WIFI 的组合在某些设备上也不能正常工作，请参阅这个问题：[Android WifiLock not working?](https://stackoverflow.com/questions/14608658/android-wifilock-not-working?rq=1)

# ajaxcontroltoolkit - ajaxcontoltoolkit 不工作

> ID：14911701
> 
> 赞同：1
> 
> 时间：2013-02-16T15:06:31.207
> 
> 标签：ajaxcontroltoolkit, asp.net-4.5

我试图让 ajaxcontroltoolkit 与 Visual Studio 2012 和 asp.net 4.5 一起工作，但它从来没有工作过

我总是得到错误：

AjaxControlToolkit 需要 ASP.NET Ajax 4.0 脚本。确保引用了正确版本的脚本。如果您使用的是 ASP.NET ScriptManager，请切换到 AjaxControlToolkit.dll 中的 ToolkitScriptManager。

我将 ScriptManager 更改为 ToolkitScriptManager，但仍然出现相同的错误。我在下面的链接上传了项目，请任何人帮助我，因为洞项目依赖于它。

默认页面有带有 ajax 工具包控件的示例，还有登录页面，两者都失败并出现错误

链接到项目

[http://www.fileconvoy.com/dfl.php?id=g43f0a32df74171f99992249134da0707f6b9f9572](http://www.fileconvoy.com/dfl.php?id=g43f0a32df74171f99992249134da0707f6b9f9572)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-13T11:24:52.110

新版本已发布。从此站点下载：[http](http://ajaxcontroltoolkit.codeplex.com/releases/view/100852) ://ajaxcontroltoolkit.codeplex.com/releases/view/100852 然后按照以下步骤安装新版本：http: [//stephenwalther.com/archive/2012/09/20/september-2012- release-of-the-ajax-control-toolkit](http://stephenwalther.com/archive/2012/09/20/september-2012-release-of-the-ajax-control-toolkit)我刚刚安装了它，到目前为止一切正常。希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T13:00:27.897

我找到了解决方案，问题出在 Dll 名称“Microsoft.ScriptManager.MSAjax.dll”中，您必须将其从 Web 项目引用中删除并从 Web 项目的 Bin 目录中删除，之后 ajaxtoolkit 工作正常

# ios - 带有用于 UIButtons 的 swf 文件的 iOS 动画

> ID：14911706
> 
> 赞同：0
> 
> 时间：2013-02-16T15:07:19.693
> 
> 标签：ios, objective-c, animation, flash

我正在开发一个 iOS 游戏，我使用抽屉来制作动画。问题是，他给我的文件是.swf 格式的。我看到 iOS 不支持 .swf 文件，我可以将它们转换为 HTML5，例如 iOS 支持的。

我的问题是，我怎样才能将这些动画（在 .swf 中并且应该转换但在我的情况下最好的扩展名是什么？）与 UIButtons 相关联？

提前致谢 ！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T16:23:52.130

如果您获得 .fla 文件，您可以将动画转换为创建 .swf 文件的动画 .gif 文件或您可以在 iOS 中使用的其他文件。Flash Professional 有许多发布选项。如果您没有 Flash Professional，我相信有一个功能齐全的 30 天试用版。[http://www.adobe.com/cfusion/tdrc/index.cfm?product=flash](http://www.adobe.com/cfusion/tdrc/index.cfm?product=flash)

或者您可以要求艺术家提供另一种格式。

我不知道如何使用在 iOS 设备上的 Flash Player 中运行的 swf。

# php - 如何将 SQL 时间记录转换为秒？

> ID：14911710
> 
> 赞同：0
> 
> 时间：2013-02-16T15:07:53.503
> 
> 标签：php, mysql, datetime, time

我想将存储在 SQL 时间格式（例如 11:33:00）的记录的秒数计算为从一天开始的秒数（在本例中为 41580，即 (11*60*60)+ (33*60)) 使用 PHP，这样我就可以将这些秒数添加到变量中以计算 DateTime。看来我不能使用 strtotime 来做到这一点。我是否需要编写一个函数，如果需要，有人可以建议一个有效的函数吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T15:11:22.320

我认为您正在寻找 MySQL 功能[`TIME_TO_SEC`](https://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_time-to-sec)。它完全符合您的要求。您可以在这样的`SELECT`语句中使用它：

```
SELECT TIME_TO_SEC(your_time_column) AS seconds FROM ... 
```

# xml - 为什么 xslt 会产生不希望的结果

> ID：14911712
> 
> 赞同：1
> 
> 时间：2013-02-16T15:08:06.963
> 
> 标签：xml, xslt

我的 xslt：

```
<xsl:template match="node()">
    <xsl:apply-templates />
</xsl:template>

<xsl:template match="soapenv:Body//*">
    <xsl:element name="{local-name()}">
        <xsl:apply-templates select="@* | *" />
        <xsl:value-of select="." />
    </xsl:element>
</xsl:template>

<xsl:template match="soapenv:Body//@*">
    <xsl:attribute name="{local-name()}">
        <xsl:value-of select="." />
    </xsl:attribute>
</xsl:template> 
```

输入：

```
<soapenv:Body>
    <Test asdf="asdfasdf">
        <Hope>asdf</Hope>
    </Test>
</soapenv:Body> 
```

输出：

```
<Test asdf="asdfasdf">
    <Hope>asdf</Hope>
    asdf
</Test> 
```

我的问题是，为什么我在 Hope 元素之后得到额外的 asdf 文本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T15:16:49.680

因为您的`Test`元素与 匹配`<xsl:template match="soapenv:Body//*">`，它在输出中创建一个`Test`元素，将模板应用于其子元素（复制`Hope`元素），然后附加一个包含`Test`元素本身的字符串值的文本节点 - 这是其所有后代文本的连接节点，包括里面的那个`Hope`。

`<xsl:value-of>`当有问题的元素没有子元素时，您可以通过使唯一触发来解决此问题，或者将其包装在

```
<xsl:if test="not(*)"> 
```

或使用单独的模板`soapenv:Body//*[*]`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-16T15:35:18.043

您似乎想摆脱命名空间。（*为什么？这实际上不应该是必要的！*）

考虑一种更惯用的方法。

```
<!-- 1) always try to start off with the identity template -->
<xsl:template match="node() | @*">
    <xsl:copy>
        <xsl:apply-templates select="node() | @*" />
    </xsl:copy>
</xsl:template>

<!-- 2) only create templates for nodes that need extra processing -->
<xsl:template match="soapenv:*">
    <xsl:element name="{local-name()}">
        <xsl:apply-templates select="node() | @*" />
    </xsl:element>
</xsl:template> 
```

输入结果：

```
<Body>
    <Test asdf="asdfasdf">
        <Hope>asdf</Hope>
    </Test>
</Body> 
```

* * *

编辑：如果您只想在正文内容开始输出，请使用：

```
<xsl:template match="/">
    <xsl:apply-templates select="soapenv:Envelope/soapenv:Body/*" />
</xsl:template> 
```

# python - Python：如何隐藏输入

> ID：14911719
> 
> 赞同：2
> 
> 时间：2013-02-16T15:08:36.217
> 
> 标签：python

你如何隐藏的输入`raw_input`？例如，我想要：

```
password = raw_input("Password: ") 
```

成为

```
Password: ********
#or
Password: #hide the characters (i.e. no echo) 
```

而不是显示字符串。我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T15:13:06.360

使用[**`getpass`**](http://docs.python.org/3.3/library/getpass.html)：

```
import getpass

password = getpass.getpass('Password: ') 
```

# c++ - 如何在 C++ 中使用 lambda 作为词法作用域

> ID：14911720
> 
> 赞同：2
> 
> 时间：2013-02-16T15:08:41.677
> 
> 标签：c++, function, lambda, functional-programming, lexical-scope

代码是这样的：

```
int a = 1;
auto f = [a] {return a;};
a = 100;
std::cout << f() << endl;
return 0; 
```

我希望看到`100`结果。但是，在`a`中捕获时就像冻结一样`f`。结果是`1`。有没有办法在变化`a`时保持一致`a`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-16T15:09:52.753

您需要`a`通过引用捕获：

```
auto f = [&a] {return a;}; 
```

或者简单地通过引用捕获整个环境：

```
auto f = [&] {return a;}; 
```

# sql - 我的表中的不同值

> ID：14911722
> 
> 赞同：0
> 
> 时间：2013-02-16T15:09:07.560
> 
> 标签：sql, oracle

假设我有一个包含以下列和记录的表格

```
NAME            RESULT   DATE
----------------------------------------------
John            Pass    12-FEB-2013 18:03:55
Albert          Fail    12-FEB-2013 18:24:29
Chris           Pass    12-FEB-2013 18:24:28
John            Fail    12-FEB-2013 19:32:35
Chris           Pass    12-FEB-2013 19:32:35
Steve           Pass    12-FEB-2013 20:04:35 
```

现在，如果我需要 NAME 列中的不同值，我做了以下操作

```
SELECT DISTINCT(NAME) FROM TABLE_NAME; 
```

现在如果我执行以下操作

```
SELECT DISTINCT(NAME), 
       RESULT, 
       DATE 
FROM TABLE_NAME 
WHERE TRUNC(DATE) = TRUNC(SYSDATE)-4; 
```

我在名称列中获得了所有记录。但我不需要所有的记录。即使使用上述 WHERE 子句，我也只需要不同的名称。请帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T15:29:04.647

`DISTINCT`不是***函数***。您只需将括号添加到*列 name*。`select name, result ...`它与和之间的区别基本相同`select (name), result ...`

它是一个在*整个*行上工作的运算符。正因为如此，你会得到所有行，因为名称、结果、日期的组合总是不同的（顺便说一句。`date`对于一列来说这是一个可怕的名称。不仅因为它是一个保留字，而且因为它没有*记录*里面的内容列。是生日吗？终止日期？开始日期？结束日期？...）。

如果您只想要例如每个名称的最新日期，则需要`group by`：

```
select name, 
       max(result) as result,
       max(trunc(date)) as dt
from table_name 
group by name; 
```

请注意，这不一定返回属于最大日期的结果。如果您需要，请考虑以下内容：

```
select name, result, result_date
from (
    select name, 
           result,
           trunc(date) as result_date,
           row_number() over (partition by name order by date desc) as rn
    from table_name 
) t
where rn = 1;
group by name; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T15:21:44.633

你的问题有点令人困惑。如果您想`DISTINCT`使用您提供的`WHERE`条件检索名称，只需执行以下操作：

```
SELECT DISTINCT NAME 
FROM TABLE_NAME 
WHERE TRUNC(DATE) = TRUNC(SYSDATE)-4; 
```

但是，如果您希望截断日期的其他字段：

```
SELECT DISTINCT NAME, RESULT, TRUNC(DATE) dt
FROM TABLE_NAME 
WHERE TRUNC(DATE) = TRUNC(SYSDATE)-4; 
```

或者，如果您想要全职：

```
SELECT DISTINCT NAME, RESULT, DATE
FROM TABLE_NAME 
WHERE TRUNC(DATE) = TRUNC(SYSDATE)-4; 
```

希望这可以帮助。

# java - 如何在 ubuntu 上安装 Oracle 瘦 jdbc 驱动程序

> ID：14911726
> 
> 赞同：2
> 
> 时间：2013-02-16T15:09:42.693
> 
> 标签：java, jdbc, oracle10g, ubuntu-12.04

我已经从这个链接下载了驱动程序的 .jar 文件[http://www.oracle.com/technetwork/database/enterprise-edition/jdbc-10201-088211.html](http://www.oracle.com/technetwork/database/enterprise-edition/jdbc-10201-088211.html)

但是现在，我不确定如何处理这些 .jar 文件。如何安装它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T15:14:02.967

oracle jdbc 驱动程序的 jar 文件应与您的程序一起安装。如果您在应用程序服务器（如 tomcat 或 jboss）上运行应用程序，则应遵循应用程序服务器手册中有关如何将 jdbc 驱动程序安装到应用程序服务器中的说明。如果您正在创建命令行应用程序，请将文件放在 \lib 文件夹中作为应用程序的一部分，并将其放到您的应用程序类路径中。

请澄清您的问题是否在应用服务器中运行？如果在应用程序服务器中是哪一个？

您可以了解有关类路径概念的更多信息，并且您将准确了解该做什么。从这里开始 [http://en.wikipedia.org/wiki/Classpath_%28Java%29](http://en.wikipedia.org/wiki/Classpath_%28Java%29)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T15:14:17.163

只需将其添加到类路径中。它通常只在运行时需要。

# java - .class 我的程序的预期错误

> ID：14911728
> 
> 赞同：0
> 
> 时间：2013-02-16T15:09:44.317
> 
> 标签：java

无法编译此 prog 4 在数组中搜索数字.. .class 在 prog 的最后一行出现预期错误：obj.searchnumber(int arr1[],item);

```
import java.util.*; 
    public class Ans5
    {
      public void searchnumber(int arr[],int item){
          int low = 0;
          int high = arr.length-1;
          int mid;
          while (low <= high) {
            mid = (low + high) / 2;
            if (arr[mid] > item)               high = mid - 1;
            else if (arr[mid] < item)          low = mid + 1;
            else                            
                System.out.println("The searched item"+item+"is found in the array");
          }
      }

      public static void main(String args[]) {
          Ans5 obj= new Ans5();
          Scanner sc=new Scanner(System.in);
          int arr1[]={1,2,3,4,5,6,7,8,9};
          System.out.print("\fEnter the item u need to search: ");
          int item=3;//sc.next();
          obj.searchnumber(int arr1[],item); // here's the error shown at arr1[]
      }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T15:10:37.153

您不会在方法调用中传递这样的数组。您只需要像这样使用数组的名称：

```
 obj.searchnumber(arr1, item); 
```

`int arr1[]`form 仅在声明数组时使用。它只是创建一个新的数组引用，并说它`arr1`是 type `int []`。您不能在某些方法调用中使用它。它是`arr1`引用实际数组的那个。您只能通过此名称访问数组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T15:13:41.690

```
obj.searchnumber(int arr1[],item);
                  ^^^^^^^^^________________Can't declare a variable here. if ypu want to pass the array then simply name it as @Rohit said 
```

# akka - akka - Java 有状态的演员持久性

> ID：14911730
> 
> 赞同：1
> 
> 时间：2013-02-16T15:10:04.973
> 
> 标签：akka

我正在使用`AKKA`（Java API）开发应用程序。我有几个问题：

1.  在参与者类中，可以将一些数据结构（例如：HashMap）作为参与者状态（类的属性）的一部分吗？

2.  如果 actor 死亡，actor 将由 SUpervisory actor 重新启动。但是，我想知道如何恢复这些数据结构的内容。请建议？

最初，我想`Cassandra`在此参与者收到消息以将成员对象保存到`Cassandra`. 不确定这是否是正确的方法。请帮忙

谢谢你，KS

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T22:15:09.887

让一名儿童演员执行任何和所有有风险的操作，并设置你的演员的主管策略以满足你对那个孩子的需求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T11:22:14.607

一种可能的选择是将其保存在与 Redis 中的参与者相关的数据中，类似于创建持久邮箱的方式。你的演员在什么情况下会死？

# android - 使用 jsoup 抓取没有属性的表数据

> ID：14911733
> 
> 赞同：1
> 
> 时间：2013-02-16T15:10:33.053
> 
> 标签：android, jsoup

[我想要来自网站http://www.livescore.com/](http://www.livescore.com/)的匹配列表。该站点有 3 个表，但这些表没有类似`class`or的属性`id`。我使用了这些代码：

```
String URL = "http://www.livescore.com";
Document doc = doc = Jsoup.connect(URL).userAgent("Mozilla/5.0 (Macintosh; U; Intel Mac OS X; de-de) AppleWebKit/523.10.3 (KHTML, like Gecko) Version/3.0.4 Safari/523.10").get();

String output = "NO";
Elements row = doc.select("table[width=\"468\"] [bgcolor=\"#666666\"] [cellpadding=\"0\"] [border=\"0\"]").select("tr");

for (Element tr : row) {
    Elements clm = tr.getElementsByTag("td");
    output=clm.text();                           
}

t.setText(output); 
```

但是表格内容没有出现。我怎么能这样做来带来并显示表格内容？？？有人知道吗？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T07:33:09.507

这有效：

`Elements tables = doc.select("table.league-table");`

这将选择带有 的表`class=league-table`，即每个分数表。然后，您可以根据需要迭代 TR 和 TD。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T04:55:31.193

如果您获得表格内容，您可以将它们捕获到列表中并通过列表视图显示。@Imon

# php - YII 中的每个人都可以访问 $_SERVER 中的存储吗？

> ID：14911735
> 
> 赞同：0
> 
> 时间：2013-02-16T15:10:44.537
> 
> 标签：php, yii

假设我有 4 个用户从 4 台不同的机器登录。该网站是关于拍卖的。每次拍卖的日期保持不变。我可以做这样的事情：

```
$_SERVER['auctions'][0]['name'] = 'Auction 1'; 
```

然后如果 4 个用户中的任何一个登录，就会有这段代码：

```
print $_SERVER['auctions'][0]['name']; 
```

所有 4 会看到相同的结果？换句话说，这是某种全局内存，我可以使用它来缓存不经常更改的内容吗？还是有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T15:20:04.273

PHP 使用 $_SERVER 变量来返回有关您的网络服务器和基于服务器的信息的信息，它不是存储数据的地方。每次脚本运行时都会生成 $_SERVER 的内容，并且没有任何内容可以存储在那里并在脚本的另一个实例中检索。

您可以使用[memcached 之](http://php.net/manual/en/book.memcached.php)类的东西来存储常见数据。memcached 作为共享内存/缓存的一种形式工作，易于安装和使用。您还可以构建一个数组并序列化为一个文件并像 json_encode => file_put_contents 一样重新加载它以保存和 file_get_contents => json_decode 以检索它。避免会话，因为它们是每个用户的，不适合您在多个用户之间共享的要求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T15:18:07.497

我认为您应该将拍卖存储在数据库中。

如果多个用户在 cookie 中具有相同的会话标识符，那么在会话中存储数据只是他们的一种选择。但这可能会导致一些严重的安全问题。

`$_SERVER`每次重新加载页面时，数组似乎都会完全刷新。

# c++ - 我应该使用 std::size_t 来计算我的班级的实例吗？

> ID：14911741
> 
> 赞同：1
> 
> 时间：2013-02-16T15:11:41.713
> 
> 标签：c++

我有一堂课：

```
class Nothing
{

    /// Constructor, Destructor, Copy and Assignment
    public:
    Nothing();
    ~Nothing();
    Nothing(const Nothing& clone);

    /// Operators
    const Nothing& operator=(const Nothing& other);

    /// Static Members
    private:
    static unsigned long long id_counter;
    static unsigned long long instance_counter;
};

Nothing::Nothing()
{
    m_name.clear();
    id_counter ++;
    m_id = id_counter;

    instance_counter ++;
}

Nothing::~Nothing()
{
    m_name.clear();
    instance_counter --;
}

Nothing::Nothing(const Nothing& other)
{

}

unsigned long long Nothing::id_counter = 0;
unsigned long long Nothing::instance_counter = 0; 
```

请注意，我使用 unsigned long long 来计算类的实例。我应该改用 std::size_t 吗？

顺便说一句：如果我有一个类的实例，我会做这样的事情：

```
Nothing instance;
instance(Nothing()); // Calling copy constructor 
```

会在调用复制构造函数之前调用析构函数吗？问的原因是我需要在我`id_counter ++;`的`instance_counter ++;`复制构造函数内部吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T15:16:07.903

std::size_t 定义是特定于实现的，如您在[en.cppreference](http://en.cppreference.com/w/cpp/types/size_t)中所见。在大多数实现中，您会发现它被定义为`unsigned int`.

因此，要回答您的问题，您可以使用它而不是`unsigned long long`您愿意，并且您的代码将保持可移植性（只要您实际上并不要求它是 64 位长），因为 std::size_t 是有保证的在每个 c++ 编译器上定义。如果该`unsigned long long`要求是强制性的（我怀疑因为您正在使用它例如计数），那么最好坚持使用`unsigned long long`.

> ```
> instance(Nothing); // Calling copy constructor: Should this be `instance(Nothing())`? 
> ```

这是不好的语法。如果您尝试`copy ctor`在新形成的实例上调用 ，则应调用`Nothing copyInstance (Nothing());`. 当然，这是一件非常愚蠢的事情，因为您正在复制一个“干净”的实例，您也可以调用`Nothing copyInstance;`相同的效果。

> 我需要 id_counter ++；和instance_counter ++；在我的复制构造函数里面？

由于您正在构建一个新实例，因此您绝对应该增加 instance_counter 。你没有指定什么 id_counter 计数（引用计数？？）所以很难说。

> 会在调用复制构造函数之前调用析构函数吗？

在您的代码中，我没有看到将被调用的地方，`dtor`但是由于您在堆栈上进行分配，因此一旦到达其范围的末尾（下一次出现）`instance`，就会调用它的析构函数。`instance``}`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-16T16:48:39.160

`std::size_t`是`sizeof`表达式的类型，通常是 STL 容器返回的`size()`类型`capacity()`。（从技术上讲，每个 STL 容器 typedef a `size_type`，但这几乎总是等价于`std::size_t`。）

除了具有奇怪内存模型的机器（例如，区分“近”和“远”指针的机器）之外，a`std::size_t`总是足够大，可以计算一次可以放入内存的所有对象。这不是直接保证，而是定义编写方式的副作用。

**因此，`std::size_t`对于诸如实例计数之类的事物来说，它是一种自然类型。**

请注意，这`std::size_t`是一个无符号类型。许多人认为您应该避免使用无符号类型，除非是表示实际位模式（例如，请参阅[Google 样式指南](http://google-styleguide.googlecode.com/svn/trunk/cppguide.xml#Integer_Types)）。通过使用无符号类型，一些算术运算可能会以令人惊讶的方式表现。如果您有一个导致您的实例计数变为负数的错误，则可能很难检测到，因为负值将环绕为非常大的正值。

就个人而言，我觉得这个论点没有说服力。有符号算术在处理上溢和下溢时也会以令人惊讶的方式表现。此外，当您尝试使用 STL 类型时，分配`size()`给带符号的值或将带符号的值与`size()`需要显式转换或禁用编译器警告进行比较。我不喜欢禁用编译器警告，特别是因为它们可以帮助您找到人们在建议避免使用无符号类型时担心的许多错误。

我会用`std::size_t`. 没有什么问题`unsigned long long`，但在主机平台上可能无法很好地扩展。

如果你想让你的选项保持开放，那么你可以在你的 Nothing 类中添加一个 typedef ，这样以后很容易改变主意：

```
/// Static Members
private:
typedef unsigned long long CounterType;  // consider std::size_t
static CounterType id_counter;
static CounterType instance_counter; 
```

`size_type`如果您想匹配 STL 容器的样式，您甚至可以调用您的 typedef 。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-16T15:22:34.253

> 我正在使用 unsigned long long 来计算类的实例。我应该改用 std::size_t 吗？

没有使用的理由，`std::size_t`也没有不使用的理由`std::size_t`。对于数组索引之类的东西，它是一种有用的类型（请参阅：[unsigned int 与 size_t](https://stackoverflow.com/questions/131803/unsigned-int-vs-size-t)），但与您可以在任何给定程序中创建的最大对象数量完全无关。*因此，只需根据您*认为您将拥有的物品数量来选择您喜欢的物品。

> 会在调用复制构造函数之前调用析构函数吗？

您根本没有调用复制构造函数。事实上，你永远不能“调用”任何构造函数。当您创建一个新对象并从现有对象初始化它时，会自动调用复制构造函数，但您的代码中没有任何地方这样做。

> 我需要在我`id_counter ++;`的`instance_counter ++;`复制构造函数内部吗？

是的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-16T15:41:33.373

从技术上讲，至少在不久的将来，两者都应该没问题。

正如所描述的[link](https://stackoverflow.com/questions/131803/unsigned-int-vs-size-t)和[link](http://www.cplusplus.com/reference/cstring/size_t/)，`size_t`是运算符的返回值的类型，`sizeof()`并保证保持当前平台上可能的最大对象的大小。通常`unsigned`也是。

是的，使用`unsigned long long`不太可能在不久的将来造成任何问题。然而，`size_t`当您迁移到 128 位环境时，可能会在最大兼容性方面为您提供额外的优势。

* * *

但是，如果您的代码取决于*至少*`unsigned long long`具有0~2^64-1 的事实，那么切换到.*`size_t`*

 ** * *

是的，您需要更新复制构造函数中的计数器以使其正确。

* * *

PS我不明白你为什么要：

```
Nothing instance; 
instance(Nothing); 
```

也许一些成员函数喜欢`static Nothing Nothing::instance()`获取一个新实例？// 我只是不明白为什么要在*类型*而不是现有*实例*上调用复制ctor 。

顺便说一句，您总是可以从构造函数和析构函数调用`printf()`和`flush()`来检查它们的执行顺序。*

# python - 自动按下消息框按钮

> ID：14911745
> 
> 赞同：2
> 
> 时间：2013-02-16T15:12:26.093
> 
> 标签：python, win32gui

我正在编写一个 python unittest 程序。我需要自动按下消息框中的按钮。不知道win32gui里面有没有什么功能可以实现这个。任何人都可以提供链接或示例代码吗？

# node.js - 如何将 base64 编码的内存图像作为文件参数发布

> ID：14911746
> 
> 赞同：3
> 
> 时间：2013-02-16T15:12:26.737
> 
> 标签：node.js, encoding, base64

我有一个编码为 base64 字符串的图像，我正在尝试将`POST`它作为另一个 REST API ( [http://ocrapiservice.com/documentation/](http://ocrapiservice.com/documentation/) ) 的参数。

我不想将文件存储在磁盘上 - 我想将文件保存在内存中，因为最终我想`getUserMedia`在客户端上使用创建图像，并且我可能会使用不允许直接文件的托管服务IO。

我遇到的问题是，我可以使用`fs.createReadStream(somePath);`例如 [https://github.com/mikeal/request/blob/master/README.md#forms从磁盘中找到大多数示例](https://github.com/mikeal/request/blob/master/README.md#forms)

我更喜欢使用诸如[请求](https://github.com/mikeal/request)库之类的库，但也许这是不可能的。

我现在的代码是：

```
var fs = require( 'fs' );
var path = require( 'path' );

var request = require( 'request' );
var WS_URL = 'http://api.ocrapiservice.com/1.0/rest/ocr';

function ocr( postData ) {
    var r = request.post(WS_URL, completed);
    var form = r.form();

    form.append('apikey', 'REMOVED');
    form.append('language', 'en' );
    form.append('image', postData );

    function completed(error, response, body) {
        console.log( body );
    }
}

// This works
ocr( fs.createReadStream(path.join(__dirname, 'example.png' ) ) );

// This does not work
// ignore that it's being read from a file (the next line)
var base64Str = fs.readFileSync( 'example.png' ).toString('base64'); 

var buffer = new Buffer(base64Str, 'base64');
ocr( buffer.toString( 'binary' ) ); 
```

`form.append`确实允许发送其他参数，因此如果需要设置其他标头，那么这是可能的。

是否有`Stream`某种我可以使用的包装器？我已经尝试使用这个[StringReader](http://technosophos.com/content/using-string-stream-reader-nodejs)示例，并且可以将其修改为至少发送文件名和正确的 Content-Type。

如何实现将内存文件作为参数发布到 Web 服务？

**更新：**

我已经修复/更新了上面的代码。

我从上面列出的 REST API 得到的响应是：

> HTTP/1.1 400 错误请求
> 
> 未提供文件

这是我正在运行的实际代码： [https ://gist.github.com/leggetter/4968764](https://gist.github.com/leggetter/4968764)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T19:41:07.040

我相信您可以`Buffer`直接用于请求，而无需将其包装成`Stream`.

它不起作用，因为您使用了不正确的编码。`readFileSync`如果没有编码，则默认返回`Buffer`。Buffer 默认使用 utf-8 作为其编码。但是您在两者之间使用了二进制编码，这与缓冲区中的内容不一致。

```
var imageData = fs.readFileSync('example.png');//After you get imageData 
var base64Image = imageData.toString('base64');    //base64 encoded string
var decodedImage = new Buffer(base64Image, 'base64');  //base64 encoded buffer
ocr (imageData);  //You can use the file directly
ocr (base64Image); //Or you can use either the base-64 string or the base64-buffer 
```

在这里查看更多编码/解码细节 [NodeJS base64 图像编码/解码不太工作](https://stackoverflow.com/questions/8110294/nodejs-base64-image-encoding-decoding-not-quite-working)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T19:28:33.427

在流版本中，您正在处理文件的片段，但在`base64Image`版本中，您正在使用 base64 字符串。由于流版本有效，`ocr`API 显然希望表单仅包含二进制数据，因此您需要在发送之前对 base64 数据进行解码。

```
// Reading straight from a Buffer.
var imageData = fs.readFileSync('example.png');
ocr( imageData );

// Reading from a new Buffer created from a base64 string.
var base64Image = '...';
ocr(new Buffer(base64Image, 'base64')); 
```

另请注意，在您的示例代码中：

```
// This line:
var base64Image = new Buffer(imageData, 'binary').toString('base64');

// does the same thing as this, because 'imageData' is alreadya  Buffer
var base64Image = imageData.toString('base64'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-21T07:46:33.087

你应该可以使用我创建的[base64-image-upload](https://www.npmjs.com/package/base64-image-upload) NPM 包，因为我遇到了同样的问题。

这正是 user568109 概述的方法，从 base64 字符串创建一个缓冲区并发布它。重要的部分是它抽象了对编码、MIME 类型和请求标头的处理，它将大大简化您的代码。

# android - Highgui.write() 无法正常工作

> ID：14911750
> 
> 赞同：1
> 
> 时间：2013-02-16T15:12:47.673
> 
> 标签：android, opencv, computer-vision

我有两个图像 -`rectangle.jpg`和`replica.jpg`（空白图像）尺寸为 307x185 和彩色图像。

我想将内容复制`rectangle.jpg`到`replica.jpg`

我在android中的opencv代码是：

```
 String path=Environment.getExternalStorageDirectory().getAbsolutePath() +"/idag/rectangle.jpg;
    Mat m=Highgui.imread(path,1);               
    String path1=Environment.getExternalStorageDirectory().getAbsolutePath() +"/idag/replica.jpg";
    Highgui.imwrite(path1, m); 
```

两个图像都在位置 `/sdcard/idag`。代码安装后在移动设备上运行时没有出现任何错误，`Android 2.3.3 API 10`但图像也“未复制”到所需的空白图像。

我在哪里做错了？

# javascript - 在 Chrome 扩展中使用 javascript/jquery 访问框架的 DOM

> ID：14911751
> 
> 赞同：0
> 
> 时间：2013-02-16T15:12:53.120
> 
> 标签：javascript, jquery, dom, google-chrome-extension, frames

我正在开发一个 chrome 扩展，它从网页中提取元数据和一些文本元素。当该信息包含在给定页面的框架中时，我遇到了挑战。

为我正在使用的页面采用以下示例框架集（为简洁起见，实际框架名称、标题和来源已更改）。

```
<frameset id="fs" border="0" frameborder="no">
    <frame src="/src1" name="frame1" noresize="noresize" scrolling="no" frameborder="0" title="FrameNumber1">
    <frame src="/src2" name="frame2" noresize="noresize" scrolling="no" frameborder="0" title="FrameNumber2">
    <frame src="/src3" name="frame3" noresize="noresize" scrolling="auto" frameborder="0" title="FrameNumber3">
    <frame src="/src4" name="frame4" noresize="noresize" scrolling="no" title="FrameNumber4">
</frameset> 
```

并且，考虑 FrameNumber3 的以下 html 片段：（这更做作，仅出于示例的目的）

```
<html>
<head>
<title>FrameNumber3</title>
</head>
<body>
<h1 id="heading">This is what I want</h1>
</body>
</html> 
```

我尝试了许多不同的方法，其中大多数都围绕着对 jquery 选择器中正确上下文参数的不同猜测。

我已经尝试了几十个，但这里有一些我认为可以实际工作的例子：

通过[在另一个框架的上下文中运行 JQuery](https://stackoverflow.com/questions/539504/run-jquery-in-the-context-of-another-frame)

```
alert($('#heading', window.parent.frames[0].document).text());
//Uncaught TypeError: Cannot read property 'document' of undefined

alert($('#heading', window.parent.frames[2].document).text());
//Tried this, because I want the 3rd frame's information
//Uncaught TypeError: Cannot read property 'document' of undefined 
```

通过[使用对框架的 jQuery 引用访问框架中的元素](https://stackoverflow.com/questions/3358680/accessing-an-element-in-a-frame-using-a-jquery-reference-to-the-frame)

```
alert($('#heading', $('frame').get(2).contentWindow.document).text());
//Uncaught TypeError: Cannot read property 'document' of undefined 
```

通过其他页面：

```
alert($('#heading', $('frame[title="FrameNumber3"]').document).text());
//no error but returns "undefined"

alert($('#heading', $('frame[title="FrameNumber3"]').contents()).text());
//no error but returned "undefined" 
```

我认为这不是 chrome 扩展中的权限问题，因为我已经解决了这个问题。我认为我可能对进入框架 DOM 有一些不理解的地方。我还读到 jquery 在框架方面并不是最可靠的，所以我想这也可能是问题所在。

提前感谢您的任何反馈或帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-01T23:58:44.797

也许这个[问题](https://stackoverflow.com/questions/14665679/chrome-extension-access-to-frame-elements/18564015#18564015)的答案会有所帮助。

```
document.querySelector('#SomeFrameSelector').contentWindow.document.body.onload 
```

# java - 在测试方法中创建对象时出现问题

> ID：14911758
> 
> 赞同：-1
> 
> 时间：2013-02-16T15:13:42.910
> 
> 标签：java, testing, junit

当我尝试为测试方法创建对象时，我得到一个空指针异常。

这是构造函数的代码；

```
public Board(int size)
{
    setBoard(size);
    for (int row = 0; row < size; row++) {
         for (int col = 0; col < size; col++) {
             board[row][col] = 'E';
         }
    }
} 
```

setBoard(int size) 代码；

```
 public void setBoard(int size)
{
    this.size = size;
} 
```

我一直在尝试，但还没有结果...

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T15:21:14.557

场`board`是`null`。将您的代码更改为：

```
public Board(int size)
{
    setBoard(size);
    board = new char[size][size]; // initializes the board field
    for (int row = 0; row < size; row++) {
         for (int col = 0; col < size; col++) {
             board[row][col] = 'E';
         }
    }
} 
```

更好的版本是：

```
public Board(int size)
{
    setBoard(size);
    board = new char[size][size]; // initializes the board field
    for (char[] row : board) {
        Arrays.fill(row, 'E');
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T15:21:31.130

一个可能的原因`NPE`可能是您的`board` `char`数组尚未初始化。

```
board = new char[size][size]; 
```

当您在构造函数中传递大小时，当您在类级别声明数组时，您将无法确定数组的正确大小。因此，您需要在构造函数中实例化它。

# iphone - 具有禁用应用通知选项的最佳实践

> ID：14911765
> 
> 赞同：3
> 
> 时间：2013-02-16T15:14:28.910
> 
> 标签：iphone, ios, xcode, ios6

我正在开发一个经常使用通知的应用程序，我希望用户“可能”对过多的通知感到恼火。

因此，我想在应用程序设置中添加一个选项来停止接收通知，或者通过将用户选择与服务器同步，或者应用程序将取消注册通知：

```
[[UIApplication sharedApplication] unregisterForRemoteNotifications]; 
```

但是，我注意到 iPhone 设置已经具有禁用每个应用程序通知的选项。

因此，我想知道在应用程序设置中复制此选项是否是一种好的和常见的做法，或者假设用户熟悉 iphone 设置中的通知禁用选项。

我注意到例如“WhatsApp”应用程序可以选择禁用应用程序本身的通知。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T17:24:50.060

以下是根据我的经验提出的一些建议。当然，它需要服务器端设置：

1.  允许用户选择他想要接收的通知。您可能有不同类型的通知，有些可能会引起用户的兴趣，有些则不太感兴趣。

2.  iOS 并没有关于启用/禁用通知的很好的教程（对于购买 iDevice 的新用户）。所以不要指望他会预先知道如何禁用它们。有些用户甚至会为了摆脱通知而删除您的应用程序。并且不要期望禁用它们的教程会产生很大的影响。

3.  有一个“睡眠”模式，用户在一天中的一部分时间不会收到任何通知。但是iOS6，用户可以自己通过设备设置来完成，所以我真的不建议你实现它:-) 但在它“很高兴拥有”之前。

但要对你的用户坚强。通知可能是您的应用程序/业务的重要组成部分。所以不要允许太多的“定制”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T18:40:08.923

我认为在应用程序自己的设置中复制标准通知设置既不是好的做法，也不是常见的做法。例如，当您转到“设置”应用的通知部分，为您的应用打开通知时，用户可以合理地假设他们会收到通知。他们也不必记住访问您应用的特定设置。

如果您绝对需要一个用户界面来优化用户收到的通知，那么可以在您的应用程序自己的设置中提供它。但否则，我建议不要这样做。即便如此，我也会问您的应用是否真的需要这种级别的控制。丰富且细粒度的应用程序特定设置往往会使应用程序不那么优雅和不直观。有时您确实需要这种控制（在这种情况下，请执行此操作），但最优雅的应用程序往往具有最简约的界面。

我们中的许多人都是软件工程师，但我们不能让我们的“内在工程师”过多地偏向我们的用户体验。我们必须戴上“数字创意”的帽子，思考如何打造卓越的用户体验。通常，少即是多。

* * *

顺便说一句，如果您担心用户反对太多通知，那么您几乎可以肯定通知太多。查看您有哪些通知，并询问它们是否真的值得打断正在做其他事情的用户。

# c++ - OpenCV 中的 SiftDescriptorExtractor 如何转换描述符值？

> ID：14911770
> 
> 赞同：5
> 
> 时间：2013-02-16T15:14:50.873
> 
> 标签：c++, opencv, sift, feature-descriptor

我对 SiftDescriptorExtractor 工作的最后一部分有疑问，

我正在执行以下操作：

```
 SiftDescriptorExtractor extractor;
    Mat descriptors_object;
    extractor.compute( img_object, keypoints_object, descriptors_object ); 
```

现在我想检查一个 descriptors_object Mat 对象的元素：

```
std::cout<< descriptors_object.row(1) << std::endl; 
```

输出看起来像：

```
[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 3, 3, 0, 0, 0, 0, 0, 0, 32, 15, 0, 0, 0, 0, 0, 0, 73, 33, 11, 0, 0, 0, 0, 0, 0, 5, 114, 1, 0, 0, 0, 0, 51, 154, 20, 0, 0, 0, 0, 0, 154, 154, 1, 2, 1, 0, 0, 0, 154, 148, 18, 1, 0, 0, 0, 0, 0, 2, 154, 61, 0, 0, 0, 0, 5, 60, 154, 30, 0, 0, 0, 0, 34, 70, 6, 15, 3, 2, 1, 0, 14, 16, 2, 0, 0, 0, 0, 0, 0, 0, 154, 84, 0, 0, 0, 0, 0, 0, 154, 64, 0, 0, 0, 0, 0, 0, 6, 6, 1, 0, 1, 0, 0, 0] 
```

但在[Lowe 论文](http://www.cs.ubc.ca/~lowe/papers/ijcv04.pdf)中指出：

> 因此，我们通过将单位特征向量中的值阈值化到每个不大于0.2，然后重新归一化到单位长度来减少大梯度幅度的影响。这意味着匹配大梯度的大小不再那么重要，并且方向的分布更加重要。使用包含相同 3D 对象的不同照明的图像通过实验确定 0.2 的值。

因此，特征向量中的数字不应大于 0.2 值。

问题是，这些值是如何在 Mat 对象中转换的？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-16T22:58:52.833

> 因此，特征向量中的数字不应大于 0.2 值。

不，论文说 SIFT 描述符是：

1.  归一化（使用 L2 范数）
2.  截断使用`0.2`作为阈值（即循环标准化值并在适当时截断）
3.  再次归一化

因此，理论上任何 SIFT 描述符分量都介于 之间`[0, 1]`，即使在实践中观察到的有效范围更小（见下文）。

> 问题是，这些值是如何在 Mat 对象中转换的？

它们从浮点值转换为`unsigned char`-s。

这是 OpenCV`modules/nonfree/src/sift.cpp` `calcSIFTDescriptor`方法的相关部分：

```
float nrm2 = 0;
len = d*d*n;
for( k = 0; k < len; k++ )
    nrm2 += dst[k]*dst[k];
float thr = std::sqrt(nrm2)*SIFT_DESCR_MAG_THR;
for( i = 0, nrm2 = 0; i < k; i++ )
{
    float val = std::min(dst[i], thr);
    dst[i] = val;
    nrm2 += val*val;
}
nrm2 = SIFT_INT_DESCR_FCTR/std::max(std::sqrt(nrm2), FLT_EPSILON);
for( k = 0; k < len; k++ )
{
    dst[k] = saturate_cast<uchar>(dst[k]*nrm2);
} 
```

和：

```
static const float SIFT_INT_DESCR_FCTR = 512.f; 
```

这是因为经典的 SIFT 实现通过 512 乘法因子将归一化的浮点值量化为`unsigned char`整数，这相当于考虑任何 SIFT 分量在 之间变化`[0, 1/2]`，从而避免在尝试对全`[0, 1]`范围进行编码时失去精度。

# android - 将android应用程序与mysql连接

> ID：14911775
> 
> 赞同：0
> 
> 时间：2013-02-16T15:16:30.257
> 
> 标签：android, mysql

我上传了一个用于开发与 mysql 和 php 连接的 android 应用程序的代码以供学习。从这里开始：[http](http://www.androidhive.info/2012/05/how-to-connect-android-with-php-mysql/) ://www.androidhive.info/2012/05/how-to-connect-android-with-php-mysql/ 我尝试执行相同的步骤以获得更多理解。我在同一个数据库中创建了第二个表（测试）.. 我编写了 php 代码以在（测试表）中创建一个新的原始数据.. 这是 php 代码：

```
 <?php

// array for JSON response
$response = array();

// check for required fields
if (isset($_POST['name']) && isset($_POST['age'])){

    $name = $_POST['name'];
    $age = $_POST['age'];
    // include db connect class
    require_once __DIR__ . '/db_connect.php';

    // connecting to db
    $db = new DB_CONNECT();

    // mysql inserting a new row
    $result = mysql_query("INSERT INTO test (name, age) VALUES('$name', '$age')");

    // check if row inserted or not
    if ($result) {
        // successfully inserted into database
        $response["success"] = 1;
        $response["message"] = "row successfully created.";

        // echoing JSON response
        echo json_encode($response);
    } else {
        // failed to insert row
        $response["success"] = 0;
        $response["message"] = "Oops! An error occurred.";

        // echoing JSON response
        echo json_encode($response);
    }
} else {
    // required field is missing
    $response["success"] = 0;
    $response["message"] = "Required field(s) is missing";

    // echoing JSON response
    echo json_encode($response);
}
?> 
```

之后我在eclipse项目中添加了一个java类，代码如下：

```
package com.example.androidhive;

import java.util.ArrayList;
import java.util.List;

import org.apache.http.NameValuePair;
import org.apache.http.message.BasicNameValuePair;
import org.json.JSONException;
import org.json.JSONObject;

import android.app.Activity;
import android.app.ProgressDialog;
import android.content.Intent;
import android.os.AsyncTask;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;

public class NewRowActivity extends Activity{

    // Progress Dialog
        private ProgressDialog pDialog;

        JSONParser jsonParser = new JSONParser();

        EditText inputName;
        EditText inputAge;

        // url to create new row
        private static String url_create_raw = "http://10.0.2.2/test/create_row.php";

        // JSON Node names
        private static final String TAG_SUCCESS = "success";

        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.add_raw);

            // Edit Text
            inputName = (EditText) findViewById(R.id.editTextName);
            inputAge = (EditText) findViewById(R.id.editTextAge);

            // Create button
            Button btnAddRow = (Button) findViewById(R.id.buttonAdd);

            // button click event
            btnAddRow.setOnClickListener(new View.OnClickListener() {

                @Override
                public void onClick(View view) {
                    // creating new product in background thread
                    new CreateNewRow().execute();
                }
            });
        }

        /**
         * Background Async Task to Create new product
         * */
        class CreateNewRow extends AsyncTask<String, String, String> {

            /**
             * Before starting background thread Show Progress Dialog
             * */
            @Override
            protected void onPreExecute() {
                super.onPreExecute();
                pDialog = new ProgressDialog(NewRowActivity.this);
                pDialog.setMessage("Adding a raw ..");
                pDialog.setIndeterminate(false);
                pDialog.setCancelable(true);
                pDialog.show();
            }

            /**
             * Adding raw
             * */
            protected String doInBackground(String... args) {
                String name = inputName.getText().toString();
                String age = inputAge.getText().toString();

                // Building Parameters
                List<NameValuePair> params = new ArrayList<NameValuePair>();
                params.add(new BasicNameValuePair("name", name));
                params.add(new BasicNameValuePair("age", age));

                // getting JSON Object
                // Note that create product url accepts POST method
                JSONObject json = jsonParser.makeHttpRequest(url_create_raw,
                        "POST", params);

                // check log cat fro response
                Log.d("Create Response", json.toString());

                // check for success tag
                try {
                    int success = json.getInt(TAG_SUCCESS);

                    if (success == 1) {
                        // successfully created product
                        Intent i = new Intent(getApplicationContext(), MainScreenActivity.class);
                        startActivity(i);

                        // closing this screen
                        finish();
                    } else {
                        // failed to create product
                    }
                } catch (JSONException e) {
                    e.printStackTrace();
                }

                return null;
            }

            /**
             * After completing background task Dismiss the progress dialog
             * **/
            protected void onPostExecute(String file_url) {
                // dismiss the dialog once done
                pDialog.dismiss();
            }

        }
    } 
```

当应用程序在模拟器中运行时，它不起作用！模拟器停止了。

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T15:28:05.277

你的方法有点不规范。你为什么不形成一个类/方法来连接你可以稍后调用它的 php 脚本？这是一种更好的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T15:22:09.723

您是否为此示例应用配置了您的 Android 清单，以便它有权访问互联网？如果您还没有这样做，则需要将 INTERNET 权限添加到清单文件中：

```
<uses-permission android:name="android.permission.INTERNET" /> 
```

....在您的 AndroidManifest.xml 中的应用程序标记之外的某个位置

# c# - 上传图片路径

> ID：14911776
> 
> 赞同：0
> 
> 时间：2013-02-16T15:16:35.610
> 
> 标签：c#, winforms

我需要获取图像路径..以便我可以将其存储在我的数据库中..

有人可以帮我吗？

这是我的代码..

```
private void button14_Click(object sender, EventArgs e)
        {
            if (openFileDialog1.ShowDialog() == System.Windows.Forms.DialogResult.OK)
            {
                System.IO.StreamReader sr = new System.IO.StreamReader(openFileDialog1.FileName);
                MessageBox.Show(sr.ReadToEnd());
                sr.Close();
            }
        } 
```

消息框显示外星事物.. 我需要 msgbox 显示的是所选图像的路径..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T15:18:50.467

```
if (openFileDialog1.ShowDialog() == System.Windows.Forms.DialogResult.OK)
    {
        MessageBox.Show((new System.IO.FileInfo(openFileDialog1.FileName)).DirectoryName +  openFileDialog1.FileName);
    } 
```

# android - 如何调用解码函数来解码图像

> ID：14911780
> 
> 赞同：-1
> 
> 时间：2013-02-16T15:16:52.053
> 
> 标签：android

如何使用解码功能来压缩和解码我的图像？如何调用我的解码功能？

这一行：

```
image = decodeFile(getResources(),R.drawable.my); 
```

显示错误：

> SQLiteDemoActivity 类型中的方法 decodeFile(File) 不适用于参数 (Resources, int)

编码：

```
 ArrayList<Contact> imageArry = new ArrayList<Contact>();
 ContactImageAdapter adapter;
   Button BrowseButton;
  Button BrowseButton2;
 DataBaseHandler db;
  public  static Bitmap image ;
 public  static byte[] imageInByte;

 ByteArrayOutputStream stream = new ByteArrayOutputStream();
/** Called when the activity is first created. */
 @Override
 public void onCreate(Bundle savedInstanceState) {
 super.onCreate(savedInstanceState);
  setContentView(R.layout.main);
  db = new DataBaseHandler(this);

  BrowseButton=(Button)findViewById(R.id.BrowseButton);
  BrowseButton2=(Button)findViewById(R.id.BrowseButton2);

 adapter = new ContactImageAdapter(this, R.layout.screen_list,  imageArry);

  BrowseButton.setOnClickListener(new View.OnClickListener() {

  @Override
  public void onClick(View v) {

   < this line show error--->     image = decodeFile(getResources(),R.drawable.my);
    //BitmapFactory.decodeFile(photo.toString(),options);
    image.compress(CompressFormat.JPEG, 100, stream);
     imageInByte = stream.toByteArray();

    Log.d("Insert: ", "Inserting ..");
    db.addContact(new Contact("FaceBook", imageInByte));

}
   });

    BrowseButton2.setOnClickListener(new View.OnClickListener() {

@Override
public void onClick(View v) {

    List<Contact> contacts = db.getAllContacts();
    for (Contact cn : contacts) {

    String log = "ID:" + cn.getID() + " Name: " + cn.getName()      + " ,Image: " + cn.getImage();

    //Writing Contacts to log
    Log.d("Result: ", log);
    //add contacts data in arrayList
    imageArry.add(cn);

    }

    ListView dataList = (ListView) findViewById(R.id.list);
    dataList.setAdapter(adapter);

    try {
        stream.close();
        stream = null;
    } catch (IOException e) {

        e.printStackTrace();
    }

 }
   });

             private Bitmap decodeFile(File f) {
 try {
    // decode image size
    BitmapFactory.Options o = new BitmapFactory.Options();
    o.inJustDecodeBounds = true;
    BitmapFactory.decodeStream(new FileInputStream(f), null, o);

    // Find the correct scale value. It should be the power of 2.
    final int REQUIRED_SIZE = 70;
    int width_tmp = o.outWidth, height_tmp = o.outHeight;
    int scale = 1;
    while (true) {
        if (width_tmp / 2 < REQUIRED_SIZE || height_tmp / 2 < REQUIRED_SIZE)
            break;
        width_tmp /= 2;
        height_tmp /= 2;
        scale++;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T15:51:40.830

使用`BitmapFatory.decodeResource(...)`而不是`decodeFile(...)`.

# perl - 如何让 Abyss Web Server 与 Template Toolkit 一起使用？

> ID：14911781
> 
> 赞同：0
> 
> 时间：2013-02-16T15:16:58.973
> 
> 标签：perl, template-toolkit

Abyss Web 服务器似乎只喜欢 CGI，但我正在将所做的一切切换到 Template Toolkit。每当我尝试处理我的表单时，Abyss 都会抱怨 CGI 标题错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T16:04:22.640

知道了！

您绝对需要`Content-Type: text/html; charset=ISO-8859-1`页面顶部的行。

# c# - （为什么/如何）我应该使用 .designer 文件吗？

> ID：14911783
> 
> 赞同：8
> 
> 时间：2013-02-16T15:17:37.723
> 
> 标签：c#, .net, windows-forms-designer

在创建表单时，我从不喜欢 Visual Studio`[Design]`选项卡，这就是为什么我总是从头开始以编程方式创建表单并且我只使用一个`.cs`文件，例如`Form1.cs`. 就在今天，我注意到使用`[Design]`选项卡创建一个新表单还会创建一个名为 的文件`*.Designer.cs`，该文件处理所有与设计相关的内容。

由于我是手动填写表格，我还应该使用`*.Designer.cs`文件吗？如果是这样，我应该何时、如何以及为什么使用它？该`*.Designer.cs`文件是什么意思，只是将VS自动生成的代码与用户代码分开，还是有更深层次的含义？

* * *

这是我如何创建表单的示例：

```
class MyForm : Form
{
    TextBox file;
    Button open, close;

    MyForm()
    {
        InitControls();
    }

    void InitControls()
    {
        file = new TextBox();
        file.Location = Point(...);
        open = new TextBox();
        open.Text = "Open File";
        ...
    }
} 
```

我应该将我的`InitControls`方法和变量声明分开到`.Designer.cs`文件中吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-16T15:43:59.023

我不记得确切的日期，但我知道在某一点之前 Visual Studio 没有使用单独的 .designer 类，而是将所有设计器和逻辑包含在一个区域内的同一个类中。不再是这种情况的事实应该告诉您，它被广泛认为不如分离代码文件。

从那时起，Visual Studio 设计器使用`partial`修饰符将 UI 逻辑和 UI 设计分开。当您调用时，`InitializeComponent`您基本上调用了由设计器生成的所有代码来创建 UI。

我确信设计师创建了两个单独的文件来从开发人员那里抽象出生成的代码，因为它不应该手动修改。由于您不会使用设计器，因此这对您没有什么好处，这是需要考虑的。

我认为选择不使用有助于使 .NET 成为 RAD 环境的出色设计器工具是不合逻辑的，并且不能与许多其他编码器一起使用，所以我想说 - 做你喜欢的事。如果您发现在单个类中的一个区域中围绕您的设计器代码比使用单独的设计器文件更清晰、更易读，那么就这样吧。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-16T15:39:29.883

在`.Desinger.cs`Visual Studio 2005 (C# 2) 中引入了将 Windows 窗体设计器生成的代码与程序员编写的代码分开。该文件的唯一用途是保存`InitializeComponent`设计器生成的方法。但是，不建议将您自己的 UI 代码放在该文件中，因为 WinForms 设计器会解析文件的内容（实际上只有`InitializeComponent`方法）以在设计器中创建表单。将您自己的代码放入`.Designer.cs`文件中是没有意义的。

顺便说一句，WinForms 技术的设计方式是您必须使用设计器，否则会遭受很多痛苦！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-16T15:36:48.023

`*.Designer.cs`只不过`Code File`是利用的力量`partial class`将`Application Code`&保存`UI Design`在两个单独的文件中。

由于您是`Form`手动进行设计，因此不需要设计器文件。

`*.Designer.cs`包含所有`Controls`和 Method的声明`private void InitializeComponent()`，初始化控件！

# php - PHP foreach 循环返回额外

> ID：14911794
> 
> 赞同：0
> 
> 时间：2013-02-16T15:18:41.373
> 
> 标签：php, mysql

我在下面有一个 php 脚本，我希望它会返回一个 sql 表的所有值。它确实做到了这一点，但还在每个预期的行之后返回一个数字和值

```
 $condition = "usernames = '$user'  AND password = '$pass' ";
    $result = mysql_query("SELECT * FROM userbase WHERE $condition")  ;

    $row = mysql_fetch_array($result)  ;

    foreach ($row as $k => $v) {
        echo "$k / $v <br>";
        };

    ?> 
```

结果看起来像这样

```
 0 / Mick Lathrope 
      name / Mick Lathrope 
      1 / op 
      jobtitle / op 
      2 / 07998 783 989 
      phone / 07998 783 989 
      3 / mwl707 
      usernames / mwl707 
      4 / testpass
      password / testpass 
```

我需要的所有数据都在那里但为什么我还得到一个数字列表？

请问有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T15:23:40.450

采用

```
$row = mysql_fetch_array($result, MYSQL_ASSOC) ; 
```

仅按列名索引

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T15:21:31.740

因为您使用过[mysql_fetch_array](http://php.net/manual/en/function.mysql-fetch-array.php)。

如果您只想要列，请使用[mysql-fetch-assoc](http://www.php.net/manual/en/function.mysql-fetch-assoc.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T15:21:36.187

1.  放弃`mysql_*`PDO 或 mysqli；

2.  你想用它`mysql_fetch_assoc`来获取键而不是数字索引。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-16T15:22:23.867

根据[这个](http://php.net/manual/en/function.mysql-fetch-array.php)你必须指定你想要的结果类型，否则你会得到： `MYSQL_ASSOC`或`MYSQL_NUM`，

例子：

```
while ($row = mysql_fetch_array($result, MYSQL_NUM)){...} 
```

# windows - 替代 crt malloc 函数（NASM）？

> ID：14911795
> 
> 赞同：0
> 
> 时间：2013-02-16T15:18:45.647
> 
> 标签：windows, nasm

有没有其他方法可以使用 NASM 在 Windows 中创建动态内存，而不是使用`malloc()`msvcrt lib 的功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T15:24:46.547

不在计算机上.....在 Microsoft 的 msdn 中搜索以下 API VirtualAlloc HeapAlloc GlobalAlloc

每个人都有自己的使用场所

# javascript - 网站画廊滞后

> ID：14911799
> 
> 赞同：0
> 
> 时间：2013-02-16T15:19:09.140
> 
> 标签：javascript, html, gallery

我有这个画廊 - [http://www.zahabiaresort.com/gallery.html](http://www.zahabiaresort.com/gallery.html) - 问题是它加载太慢。我知道我有很多图像要加载到单个页面上，但我正在尝试找到一种方法来制作然后仅在请求时加载。我注意到滚动条的增加往往会使网站有点滞后。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T16:39:15.983

I think you should use AJAX and create some button(or something else) and ask user to click or hover it, keep your all the images at your server.

you can use something like this...

```
<button class="btn" onClick="callAJAX('your_image.jpg','div_name','<img src=some_loading_graphics.gif>')"> 
```

here attach your AJAX file into your html file.

# php - 使用 PHP 进行 MySQL 每日备份

> ID：14911801
> 
> 赞同：1
> 
> 时间：2013-02-16T15:19:22.027
> 
> 标签：php, mysql, cpanel

我在我的虚拟主机上使用 Cpanel2，它有完整的备份选项，但这不是我需要的。

我正在想办法让我的应用程序每天备份数据库并通过电子邮件将文件发送给我。

我想我可以用一个 PHP 页面来做到这一点，通过登录或运行它来做到这一点，但它不安全，它类似于 Cpanel 备份本身。

有什么方法可以让我的 phpmyadmin 或 cpanel 在邮件上向我发送数据库备份？

编辑：我试过`system("mysqldump -h $dbhost -u $dbuser -p$dbpass $dbname > $backupfile");`但我得到的只是 0KB 空文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T15:47:56.397

两种方式：

1)

```
 <?php
$db_file_name = $_GET['file_name'];
backup_tables($_GET['host'],$_GET['user'],$_GET['pass'],$_GET['database']);

/* backup the db OR just a table */
function backup_tables($host,$user,$pass,$name,$tables = '*')
{
    global $db_file_name;
  $link = mysql_connect($host,$user,$pass);
  mysql_select_db($name,$link);

  //get all of the tables
  if($tables == '*')
  {
    $tables = array();
    $result = mysql_query('SHOW TABLES');
    while($row = mysql_fetch_row($result))
    {
      $tables[] = $row[0];
    }
  }
  else
  {
    $tables = is_array($tables) ? $tables : explode(',',$tables);
  }

  //cycle through
  foreach($tables as $table)
  {
    $result = mysql_query('SELECT * FROM '.$table);
    $num_fields = mysql_num_fields($result);

    $return.= 'DROP TABLE IF EXISTS '.$table.';';
    $row2 = mysql_fetch_row(mysql_query('SHOW CREATE TABLE '.$table));
    $return.= "\n\n".$row2[1].";\n\n";

    for ($i = 0; $i < $num_fields; $i++) 
    {
      while($row = mysql_fetch_row($result))
      {
        $return.= 'INSERT INTO '.$table.' VALUES(';
        for($j=0; $j<$num_fields; $j++) 
        {
          $row[$j] = addslashes($row[$j]);
          $row[$j] = ereg_replace("\n","\\n",$row[$j]);
          if (isset($row[$j])) { $return.= '"'.$row[$j].'"' ; } else { $return.= '""'; }
          if ($j<($num_fields-1)) { $return.= ','; }
        }
        $return.= ");\n";
      }
    }
    $return.="\n\n\n";
  }  
  //save file
  $handle = fopen($db_file_name.'.sql','w+');
  fwrite($handle,$return);
  fclose($handle);
}

?> 
```

这将在您运行它的任何文件夹中保存一个 .sql 文件。然后只需做一个简单的 php-mailer 并附上这个，然后就可以了。

2) 我一直在使用 syncsage.com 进行此和网站备份。它仍处于测试阶段，但到目前为止它令人惊叹。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T15:22:43.610

根据您数据库的大小，您的主机可能不支持发送这么大的文件。您需要做的是在 phpMyAdmin 中创建一个 cron 作业（使用 PHP）或一个计划作业，这将创建数据库的转储。然后，您需要一个将此备份发送给您的脚本。

# c - 如何从文本文件中读取文本并将每个字符存储在数组中

> ID：14911803
> 
> 赞同：2
> 
> 时间：2013-02-16T15:19:30.323
> 
> 标签：c

我正在尝试从 duom.txt 文件中读取文本并将每个字符存储到数组中。但我没有得到正确的答案。我的代码有什么问题？

```
# include <stdio.h>
# include <stdlib.h>
int main()
{
FILE *in;
char ch,str[100],cw;
int j,i = 0;

in=fopen("duom.txt","r");

if(in){
   while(!feof(in)){
   ch=getc(in);
   str[i] = ch;
   i++;
}
}

for(j=0;j<i;j++){
             printf("%c",str[i]);
}
printf("\n");
  fclose(in);

   system("pause");
return 0;
} 
```

duom.txt 文件：

```
My name is Lukas 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T15:29:17.923

您的程序中有一个小错字。

```
for(j=0;j<i;j++){
     printf("%c",str[j]); //str[j] instead of str[i] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T15:27:56.253

你应该把`j`而不是`i`放在打印循环中：

```
for(j=0;j<i;j++){
         printf("%c",str[i]); // <-- here, it must be `str[j]`
} 
```

这就是为什么你应该总是使用有意义的变量名！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-16T15:23:23.363

1.  fgetc() 返回`int`so 类型的`ch`should be `int`。

2.  feof() 告诉您是否已*阅读*文件末尾。这意味着您的 while 循环将比预期多执行一次。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-07T19:48:20.767

代码中有一个小错误是

```
for(j=0;j<i;j++){
         printf("%c",str[i]); // <-- here, it must be `str[j]`
} 
```

变量的变化导致程序中的灾难，所以编辑它并尝试

# c# - 选择导航属性为空的条目的最佳方法

> ID：14911805
> 
> 赞同：0
> 
> 时间：2013-02-16T15:19:51.620
> 
> 标签：c#, linq, entity-framework

我遇到了一些性能问题。我得到了以下数据库模型。 ![模型](../Images/a8947d981faee395df7fb9a476fe83c6.png)

我希望选择 Entity2 中所有在 Entity1 中没有外键的条目，换句话说，导航属性必须为空。

我提出了以下 LINQ 查询`context.Entity2Set.Where(x => x.Entity1 == null);`，它可以工作，但是速度很慢。所以我想知道是否有更好（更快）的方式（除了索引）来选择条目。

最后我想从Entity4中选择条目，所以性能是一个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T16:15:07.293

您正在查询关系 ( `Entity2`) 中的主体，而不是依赖关系 ( `Entity1`)。这意味着外键在 table 中`Entity1`，并且生成的 SQL 查询不仅仅是对 table 中列值的查询`Entity2`。为了获得所需的结果，SQL 查询必须连接（通过`LEFT OUTER JOIN`）这两个表。

如果它是一对多关系，您的查询就像：“获取所有没有订单项目的订单。” 这不能通过`Order`单独检查表来实现，因为外键在表中`OrderItem`，并且查询必须连接两个表。实际上，在此示例中，可以通过索引 table 中的外键列来提高查询的性能`OrderItem`。

不幸的是，在您的示例中，您无法通过索引列来改进查询，因为您具有一对一的关系（而不是一对多）。由于 EF 的一对一关系始终是共享的主键关联，因此表中的外键同时`Entity1`也是它的主键 `Id`。

这意味着您的外键列已经被索引 - 即由 table 中的聚集主键索引`Entity1`。

生成的 SQL 查询如下：

```
SELECT 
[Extent1].[Id] AS [Id], 
[Extent1].[OtherColumn] AS [OtherColumn]
FROM   [dbo].[Entity2] AS [Extent1]
LEFT OUTER JOIN [dbo].[Entity1] AS [Extent2] ON [Extent1].[Id] = [Extent2].[Id]
LEFT OUTER JOIN [dbo].[Entity1] AS [Extent3] ON [Extent2].[Id] = [Extent3].[Id]
WHERE [Extent3].[Id] IS NULL 
```

如您所见，表由索引`Id`列连接。第二个也是多余`LEFT OUTER JOIN`的，是实体框架的 SQL 生成中的一个缺陷，它对 EF < 5.0 有效。我不确定它是否在 EF >= 5.0 中解决。我不知道这对查询性能是否真的很重要，因为该行通过同一列将表与自身连接起来，所以我希望 SQL 查询优化器能够识别它并忽略执行计划中的行。

本质上：您的 LINQ 查询很好，您无法提高性能，即使不向列添加任何附加索引也是如此。

但是，我建议找出真正慢的*地方。*它确实是 SQL 查询，还是从 LINQ 查询到 SQL 的转换，或者它可能是返回结果集的对象物化等？我要做的第一步是将生成的 SQL 查询粘贴到 SQL Server Management Studio 中，看看性能如何。即使您不会更改 LINQ 查询，也可能有其他机会来提高性能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T15:17:29.340

你说过

> 没有索引

但对于这个问题，那将是一个错误。索引几乎可以立即找到所有空引用。

# java - 在 Android 中使用 XML 内容填充列表

> ID：14911806
> 
> 赞同：1
> 
> 时间：2013-02-16T15:19:55.727
> 
> 标签：java, android, xml, list, parsing

我正在尝试从位于原始资源中的 XML 文件中检索信息，该文件的结构如下：

```
<?xml version="1.0" encoding="utf-8" ?>
<languages>
  <language code="ab">Abkhazian</language>
  <language code="aa">Afar</language>
  <language code="af">Afrikaans</language>
  <language code="sq">Albanian</language>
 ... 
```

我要做的是用语言的值填充一个列表，比如'Abkhazian'，'Afar'，......我尝试使用 XMLPullParser，但我不知道如何检索语言的名称，因为它不是一个领域。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T16:05:05.543

那么你会使用 normal`string-array`吗？

```
<string-array name="languages">
   <item>Abkhazian</item>
   <item>Afar</item>
   <item>Afrikaans</item>
</string-array> 
```

然后打电话`String[] langs = getResources().getStringArray(R.id.languages);`

或者尝试使用经典的**W3C DOM Parser**：

```
DocumentBuilderFactory f = DocumentBuilderFactory.newInstance();
Document doc;
doc = f.newDocumentBuilder().parse(<xml>);
NodeList langs = doc.getElementsByTagName("languages");
ArrayList<String> data = new ArrayList<String>();
String lang = null;
for (int i = 0; i < langs.getLength(); i++) {
Node n = langs.item(i);
if (n.getFirstChild().getNodeType() == Node.TEXT_NODE) {
   lang = n.getFirstChild().getNodeValue();
   data.add(lang);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T16:41:18.040

假设您已将解析器声明为：

```
XmlPullParser parser = XmlPullParserFactory.newInstance().newPullParser();
parser.setInput(is, null);   //'is' is the InputStream corresponding to your xml file 
```

到达标签后，您可以使用以下方式检索存储在其中的数据：

```
String language = parser.nextText(); 
```

通过本教程了解更多详细信息：http: [//xjaphx.wordpress.com/2011/10/16/android-xml-adventure-parsing-xml-data-with-xmlpullparser/](http://xjaphx.wordpress.com/2011/10/16/android-xml-adventure-parsing-xml-data-with-xmlpullparser/)

# cuda - cuda“需要一个类型说明符”

> ID：14911810
> 
> 赞同：0
> 
> 时间：2013-02-16T15:20:18.940
> 
> 标签：cuda, gpgpu, nvidia

我在第 10 行遇到错误`__global__ void kernel`。我一定做错了什么？这是我的代码：

```
#include <iostream>
#include <stdio.h>
#include <stdlib.h>
#include <math.h>
#include <conio.h>
#include <time.h>

#define F 20

__global__ void kernel(double* dev_fitness,double* dev_prob, F)
{
    int i = blockIdx.x;
    double maxfit;
    maxfit=dev_fitness[0];
    if(i<F)
    {
        if(dev_fitness[i]>maxfit)
            maxfit=dev_fitness[i];
    }
    if(i<F)
    {
        dev_prob[i]=(0.9*(dev_fitness[i]/maxfit))+0.1;
    }
}

double prob[F];
double fitness[F];
int main()
{   
    double* dev_fitness;
    size_t fitnessSize= F*sizeof(double);
    cudaMalloc(&dev_fitness,fitnessSize);
    cudaMemcpy(dev_fitness,fitness,fitnessSize,cudaMemcpyHostToDevice);
    //--------------
    double* dev_prob;
    size_t probSize=F*sizeof(double);
    cudaMalloc(&dev_prob,probSize);
    cudaMemcpy(dev_prob,prob,probSize,cudaMemcpyHostToDevice);

            kernel <<<F,1>>> (dev_fitness,dev_prob,F);
            cudaMemcpy (fitness,dev_fitness,fitnessSize,cudaMemcpyDeviceToHost);
            cudaMemcpy (prob,dev_prob,probSize,cudaMemcpyDeviceToHost);
            cudaFree (dev_fitness);
            cudaFree (dev_prob);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-16T15:40:48.687

> ```
> __global__ void kernel(double* dev_fitness,double* dev_prob, F)
> //                                                         ^^^ 
> ```

您正在尝试将文字（宏`F`扩展为`20`）作为函数参数传递，即：

> ```
> __global__ void kernel(double* dev_fitness,double* dev_prob, 20) 
> ```

这是不正确的。回想一下，宏是在编译代码之前发生的基本文本查找和替换。

事实上，您不应在参数列表中放置*任何*表达式。

幸运的是，您的宏已经可以在整个文件中全局访问，因此您根本不需要将它传递给函数。

也就是说，只需编写：

```
 __global__ void kernel(double* dev_fitness,double* dev_prob) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-16T15:41:09.207

当您使用`#define`时，宏会按字面意思展开：

```
#define F 20
__global__ void kernel(double* dev_fitness,double* dev_prob, F) { 
```

进入 ：

```
__global__ void kernel(double* dev_fitness,double* dev_prob, 20) { 
```

但是，您当然不能`20`在函数声明中使用！所以要么

1.  根本不要使用该参数：

    `__global__ void kernel(double* dev_fitness,double* dev_prob)` 该代码将起作用，因为宏（因此，`F`）是全局可见的（它们在编译之前进行了*预处理）。*

2.  将该参数更改为适当的变量：

    `__global__ void kernel(double* dev_fitness,double* dev_prob, double Fparam)` 以及函数内部的代码使用Fparam。

    然后，您可以将`kernel`supplying`F`作为最后一个参数调用。

# c++ - 在 Linux 上编程 C++ 与在 Windows 中的 Linux VM 上编程 C++

> ID：14911811
> 
> 赞同：1
> 
> 时间：2013-02-16T15:20:20.033
> 
> 标签：c++, linux, windows, unix

在 Linux 上学习 C++ 编程与在 Windows 上通过使用 Linux VM 学习有什么区别？

我最初的猜测是没有区别——虚拟机只是像普通的 Linux 操作系统一样工作？

我这样做是为了特别关注 Linux 上的 C++ 编程，包括 Linux 内核、Linux 的工作原理、IPC、套接字、共享内存、管道等。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-16T15:50:22.283

当您编写多线程程序或对共享数据执行 IPC 时，可能会遇到使用 VM 时遇到的最大问题。不幸的是，由于大多数 VM 的工作方式，您最终可能会掩盖时序问题，这些问题会导致在本机运行 Linux 内核的“真实”机器上崩溃，或者至少是不受欢迎的行为。例如，由于在运行时不会崩溃而在 VM 上看似良性的数据争用可能会由于物理机上固有的更快时序而导致真正的数据争用可能非常难以调试. 可能发生的与时间相关的问题的另一个示例可能是您有多个进程使用单个读取器写入管道。由于虚拟机的速度，`PIPE_MAX`...如果您针对这种类型的行为进行了编程，那么在真实机器上，您最终可能会大吃一惊，因为任何事情`PIPE_MAX`都会与写入管道的其他进程交错。

所以最后，在虚拟机上进行多线程编程或共享数据 IPC 时，您能够观察到进程数据损坏或潜在数据竞争导致崩溃的事实并不能保证您的程序实际上是数据竞争免费的，或者它不会在交错操作的时间更快的物理机器上崩溃。虚拟机的速度可能只是为您掩盖了这些问题。

# ruby - 不能用正则表达式减去字符串

> ID：14911812
> 
> 赞同：0
> 
> 时间：2013-02-16T15:20:28.547
> 
> 标签：ruby, regex

我正在玩 Ruby，但我在使用正则表达式从字符串中减去一些东西时遇到了一些问题。

我有一个这样的字符串`http://mysite.com?test=100`，我想删除 ?test=100。执行此操作的正则表达式应`\?(.*)`根据[rubular](http://rubular.com/)。

我尝试过，`"http://mysite.com?test=100".sub \?(.*),''`但我不断收到以下错误：

```
syntax error, unexpected ')', expecting $end "http://mysite.com?test=100".sub \?(.*),'' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T15:30:38.917

您真的应该使用库来执行此操作，例如Ruby 标准库中的[URI](http://ruby-doc.org/stdlib-1.9.3/libdoc/uri/rdoc/index.html)：

```
require 'uri'
uri = URI.parse 'http://mysite.com?test=100'
uri.query = nil
uri.to_s  #=> "http://mysite.com" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-16T15:26:21.500

你必须接受你的正则表达式`//`：

```
1.9.3-p286 :013 > "http://mysite.com?test=100".sub /\?(.*)/, ''
 => "http://mysite.com" 
```

但无论如何，我建议你在这种情况下使用这样的东西：

```
require 'uri'
uri = URI.parse("http://mysite.com?test=100")
uri.host # => mysite.com
uri.scheme # => http 
```

# c++ - C++ 中的 Uint32 和 unsigned int 有什么区别？

> ID：14911813
> 
> 赞同：45
> 
> 时间：2013-02-16T15:20:34.113
> 
> 标签：c++, types

是一样的吗？如果不是：有什么区别？如果是，那么为什么需要这种类型？

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2013-02-16T15:23:09.393

`uint32_t`（或者 C++11 之前的编译器调用它）保证是 32 位无符号整数；`unsigned int`是编译器最喜欢调用的无符号整数`unsigned int`，只要它符合标准的要求（要求它的最小范围为 0-65535）。

比如`int`，`unsigned int`通常是一个在当前架构下可以快速操作的整数（通常它适合一个寄存器），所以当需要一个“正常”的快速整数时使用它。

`uint32_t`相反，当您需要一个精确宽度的整数时使用，例如序列化到文件，或者当您需要该精确范围或您依赖无符号溢出恰好发生在`2^32-1`.

例如，在 16 位处理器`unsigned int`上通常是 16 位宽，而*必须*`uint32_t`是32 位宽。

 ** * *

*顺便说一句，正如@Marc Glisse*所指出的，虽然`unsigned int`总是存在，`uint32_t`但不是强制性的——特定的编译器实现可能不会提供它。这主要是因为并非所有平台都可以轻松提供这种类型（通常是字长奇怪的 DSP）。*

# ios - 中止 - 导航控制器消失

> ID：14911820
> 
> 赞同：0
> 
> 时间：2013-02-16T15:21:28.617
> 
> 标签：ios, uinavigationcontroller, storyboard, segue

按下按钮时抛出异常。该按钮与 segue 相关联（故事板的一部分。

```
*** Terminating app due to uncaught exception 'NSGenericException', reason: 'Could not find a navigation controller for segue 'changeRooms'. Push segues can only be used when the source controller is managed by an instance of UINavigationController.' 
```

调用堆栈没有提示异常抛出的位置。在尝试深入研究时，我在 prepareForSegue 中发现了以下内容：（ChooseRoomVC.m while segueing to view controller RoomsListTVC.m）

```
NSLog (@"navController1: %@", self.navigationController);
NSLog (@"navController2: %@", [[segue destinationViewController] navigationController]); 
```

创建输出：

```
2013-02-16 15:41:57.201 Wohnungsprotokoll[1906:c07] navController1: (null)
2013-02-16 15:41:57.203 Wohnungsprotokoll[1906:c07] navController2: (null) 
```

在那个阶段，我有点期望destinationViewController 还没有分配navigationController。这就是为什么我将其与其他视图控制器的 prepareForSegue 中的状态进行比较。它们都产生相同的输出：（KeysEditVC.m - 从这里它被连接到 ChooseRoomVC）

```
NSLog (@"navControllerx: %@", self.navigationController);
NSLog (@"navControllery: %@", [[segue destinationViewController] navigationController]); 
```

输出：

```
2013-02-16 15:41:52.181 Wohnungsprotokoll[1906:c07] navControllerx: <UINavigationController: 0xa22c5d0>
2013-02-16 15:41:52.182 Wohnungsprotokoll[1906:c07] navControllery: (null) 
```

因此，我检查了 viewDidLoad 中的 self.navigationController （来自chooseRoomVC.m），只是为了查看是否出现了问题，以查看有问题的视图控制器。但这看起来不错：

```
NSLog (@"navController0: %@", self.navigationController); 
```

输出：

```
2013-02-16 15:41:52.212 Wohnungsprotokoll[1906:c07] navController0: <UINavigationController: 0xa22c5d0> 
```

因此，显然，当我的视图控制器 (chooseRoomVC.m) 正在执行时，navigationController 分配不知何故在某处丢失了。我确实添加了类似的 NSLogs 到 viewWillAppear 和 viewWillDisappear 并且 self.navigationController 设置正确。

我非常乐意提供代码或屏幕截图等，但我不知道从哪里开始。请指教：

只是为了完整性：我使用故事板和 ARC、iOS 6.1、iOS 模拟器以及 iPhone 设备，在 OS-X 10.8.2 上使用 xcode 4.6。

There is just one thing that may be unusual. The view controller I am segueing to when the error is thrown, can be segued to from a number of view controllers. But I am doing that with more than this one and it works fine in all other cases.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T15:28:17.160

Now I found it after it took me ages to nail it down and put everything together for the question.

In IB I copied the button that was associated with this segue from another button of the same view. And from copying from this original there was an assignment of an action left. This IBAction method that was supposed to be associated with another button performed some business logic and called

```
[self.navigationController popViewControllerAnimated:YES]; 
```

So I was segueing further down and returning to the parent view controller at about the same time! Naturally that does not work. However, I'll leave it here so that maybe somebody with the same problem finds the root cause quicker than I did.

# javascript - 悬停时的图像效果不透明

> ID：14911827
> 
> 赞同：0
> 
> 时间：2013-02-16T15:22:05.213
> 
> 标签：javascript, html, css, image, hover

如果图像的悬停位置不透明，是否可以以某种方式使图像具有悬停效果。

因为我有一些透明的图像。

然后我想制作一个悬停效果，当鼠标悬停在图像不透明的地方时，它将首先运行。

这有可能吗？

希望是可以理解的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-25T08:11:52.187

它可以使用画布元素，我实际上为此制作了一个插件^^也许这可能对您有所帮助：[https ://github.com/Bahlor/jQuery-Pixel-Related-Object-Selection](https://github.com/Bahlor/jQuery-Pixel-Related-Object-Selection)

此脚本允许检查图像的透明/非透明区域，如果另一个元素位于重叠元素的透明区域后面，则还允许点击。使用背景图像处理图像元素和 div。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T16:56:06.923

May be it is possible, somehow you can fix the position or coordinate value, I think you should use canvas and place your image inside it and with help of mouse event you can catch the mouse function and try to use jQuery for hover effect.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T17:11:08.827

您是否尝试过使用地图标签？[http://www.w3schools.com/tags/tag_map.asp](http://www.w3schools.com/tags/tag_map.asp)

# java - Java 程序和 Windows 任务栏

> ID：14911829
> 
> 赞同：2
> 
> 时间：2013-02-16T15:22:12.853
> 
> 标签：java

我刚刚在 java-swing 中为我编写了一个桌面时钟，我希望每次登录时都能运行该时钟。
为此，我将我的 jar 文件添加到启动文件夹中，然后我让时钟运行了。
但是我的问题是-任务栏中显示的图标允许我通过单击鼠标悬停时显示的十字标记（Windows 7 样式）或右键单击->关闭来关闭我的应用程序。
我希望我的应用程序作为其他 Windows 进程（或桌面小工具）运行，而不是在任务栏中显示图标。

提前致谢 ！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T15:35:21.883

使用 JDialog 而不是 JFrame。对话框不显示在任务栏中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-16T15:31:35.077

我猜你可能对这样的东西感兴趣
把这段代码放在你创建表单的地方

```
setDefaultCloseOperation(javax.swing.WindowConstants.DO_NOTHING_ON_CLOSE); 
```

这将禁用关闭时的任何操作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-16T15:27:10.320

自己做窗户的装饰。

[http://docs.oracle.com/javase/7/docs/api/java/awt/Frame.html#setUndecorated(boolean)](http://docs.oracle.com/javase/7/docs/api/java/awt/Frame.html#setUndecorated(boolean))

另请参阅：[如何将 Java 应用程序放入系统托盘？](https://stackoverflow.com/questions/758083/how-do-i-put-a-java-app-in-the-system-tray)

# apache - 将密码从 htpasswd 转换为 htdigest

> ID：14911830
> 
> 赞同：4
> 
> 时间：2013-02-16T15:22:16.107
> 
> 标签：apache, .htpasswd, htdigest

在服务器上，出于安全原因，我喜欢从 Apache 切换`auth_basic`到。`auth_digest`

有没有办法将旧`.htpasswd`文件转换为`htdigest`格式？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-16T15:35:55.633

该`htpasswd`程序[通常会创建](http://httpd.apache.org/docs/current/programs/htpasswd.html)加密密码。如果您使用**MD5**、**SHA1**、**bcrypt**或**crypt**来加密密码，您几乎无法恢复原始数据。这些加密函数被称为*单向*函数：您可以创建一个散列，但不能恢复原始值。这是单向函数的主要目的。

据我所知，在 HTTP Digest 算法[RFC2617](http://www.rfc-editor.org/rfc/rfc2617.txt)中，引入了所谓的*realm*，一些 [unique] 字符串用于挑战。此信息用于散列密码。无法重用带有密码的文件，因为对于基本身份验证，这些密码在没有领域信息的情况下进行了哈希处理。

尝试要求您的用户在第一次身份验证后更改他们的密码。

# ruby-on-rails - 活动记录关系

> ID：14911831
> 
> 赞同：0
> 
> 时间：2013-02-16T15:22:22.260
> 
> 标签：ruby-on-rails, rails-activerecord

我的应用程序中有以下模型..

```
class User < ActiveRecord::Base
  has_many :posts
end

class Post < ActiveRecord::Base
  belongs_to :user
end 
```

我的要求是用户可以订阅许多帖子并且我想使用`has_many :through`关系，因为我想`subscription_type`在加入表中有一个额外的属性。用户与帖子有多对多的关系。

请告诉我最好的方法来做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T15:27:41.157

非常简单：

```
class User < ActiveRecord::Base
  has_many :subscriptions
  has_many :posts, :trough => :subscriptions
end

class Subscription< ActiveRecord::Base
  belongs_to :user
  belongs_to :post

  # add subscription_type to db columns
  # also user_id and post_id
end

class Post < ActiveRecord::Base
  has_many :subscriptions
  has_many :users, :trough => :subscriptions
end 
```

# php - 如何向 Symfony 2.1 添加命名空间？

> ID：14911842
> 
> 赞同：0
> 
> 时间：2013-02-16T15:23:28.857
> 
> 标签：php, symfony, symfony-2.1

我有一个使用命名空间的 3rd 方库，我想添加到供应商目录中。由于某些原因，我不能为此库使用作曲家。使用 ClassLoader 的 add 方法添加它对我不起作用（“找不到类”）。详细地：

我正在使用 Symfony 2.1.7。

```
// app/autoload.php
use Doctrine\Common\Annotations\AnnotationRegistry;
$loader = require __DIR__.'/../vendor/autoload.php';
$loader->add('Example', realpath(__DIR__.'/../vendor/example/src'));
AnnotationRegistry::registerLoader(array($loader, 'loadClass'));
return $loader; 
```

vendor目录中的目录结构：

![目录结构](../Images/2cbe7e9a2f9e2c9e7129c98f6e41c45e.png)

```
//vendor/example/src/Foo.php
namespace Example;
class Foo {

} 
```

在我的控制器中使用它：

```
 $bar = new \Example\Foo(); 
```

结果：

> 找不到类“示例\Foo”

我的错误在哪里？和/或：在 Symfony 2.1 中调试此问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T19:42:56.477

目录结构错误。UniversalClassLoader（在 Symfony < 2.1 中使用）和 Composer 的 ClassLoader（在 Symfony 2.1 中使用）都实现了 PSR-0 自动加载器标准。该标准要求具有命名空间的文件不能在根目录下，并且必须至少创建在一个目录下。

这对我有用：

目录结构 ![工作目录结构](../Images/523745a0661927bd6c35b3ce3b1c8230.png)

// 在 autoload.php 中

```
// Symfony 2.1 using Composer's ClassLoader
$loader->add('Example', realpath(__DIR__.'/../vendor/example/example/src')); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T16:05:35.633

你有不同的选择：

在您的实际自动加载器中注册命名空间。

在 app/autoload.php 中注册你的命名空间。你可以在这里看到一个例子[https://github.com/symfony/symfony-standard/blob/2.0/app/autoload.php#L9](https://github.com/symfony/symfony-standard/blob/2.0/app/autoload.php#L9)

将库添加到 PHP include_path

将命名空间添加到composer（即使库没有composer.json，您也可以在composer.json中添加自定义命名空间）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T23:54:07.490

在以下文件中，您将看到列出的一些命名空间。您可以以相同的方式添加您的：

```
// approot/vendor/composer/autoload_namespaces.php

return array(
    'Twig_Extensions_' => $vendorDir . '/twig/extensions/lib/', 
    ....
    ....
    '' => $baseDir . '/src/',
); 
```

# syntax-highlighting - microchip mplab源代码编辑器语法颜色突出显示的关键在哪里？

> ID：14911846
> 
> 赞同：0
> 
> 时间：2013-02-16T15:23:50.083
> 
> 标签：syntax-highlighting, microchip, mplab

我一定遗漏了一些明显的东西，但是，尽管在互联网上进行了大量搜索，我还是找不到 Microchip MPLAB 源代码编辑器中用于语法突出显示的颜色的关键。我确信解释这些将帮助我发现我从在线教程复制的代码中的一个模糊错误。

谁能告诉我如何找到这些颜色的钥匙？

OT，我在英国，我*必须*使用美式拼写，例如 color for colour 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T02:26:43.757

在 MPLAB v8 上按*编辑*| *属性*并在*文本*选项卡上选择*选择颜色*以查看语法突出显示设置。

在 MPLAB X 上按*工具*| *选项*，选择*字体和颜色*。浏览*突出显示*选项卡上的颜色设置。

# c# - 如何在 xaml 中剪辑图像并限制图像宽度？（温特）

> ID：14911848
> 
> 赞同：5
> 
> 时间：2013-02-16T15:24:15.870
> 
> 标签：c#, .net, xaml, windows-runtime

我有一个可以通过 api 设置的图像，我希望图像在其宽度超过 250 像素时被剪裁。那行得通。但是，图像与一些文本块一起位于堆栈面板中。即使我们看到的图像被剪裁，实际图像宽度仍然超过 250 像素。

这是xml

```
<StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                        <Button Foreground="Black" Content="Button" x:Name="BackButton" Style="{StaticResource BackButtonStyle}" Visibility="Collapsed" VerticalAlignment="Center" Margin="25,0,0,0"  Click="BackButtonClick" />
                        <Border>
                            <Image x:Name="LogoImage" Source="Images/Logo.png" Height="50"  Margin="15 0 0 0" Stretch="Uniform" VerticalAlignment="Center">
                                <Image.Clip>
                                    <RectangleGeometry Rect="0 0 50 250"></RectangleGeometry>
                                </Image.Clip>
                            </Image>

                        </Border>
                        <TextBlock Foreground="Black" x:Name="NameTextbox" Margin="15, 0, 0, 0" VerticalAlignment="Center" FontSize="26"></TextBlock>

                        <TextBlock VerticalAlignment="Bottom" x:Name="ErrorMessage" Text="Unable to reach server" Foreground="Red" Margin="15 0 0 0"  FontSize="26" FontWeight="Bold" Visibility="Collapsed"></TextBlock>
                    </StackPanel> 
```

因此，假设图像宽度为 2000 像素。然后图像后面的文本块将被推离屏幕，但只有 250 像素的图像可见。

有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T16:19:51.787

看来我采取了错误的方法。我能够使用禁用滚动的滚动查看器来实现我想要的。

```
<ScrollViewer MaxWidth="350" HorizontalScrollBarVisibility="Hidden" HorizontalScrollMode="Disabled">
     <Image x:Name="LogoImage" HorizontalAlignment="Left" Source="Images/Logo.png" Height="50" Margin="15 0 0 0" Stretch="Uniform" VerticalAlignment="Center">
     </Image>
</ScrollViewer> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T19:32:20.017

您可以只设置边框的宽度和高度并将 Image Stretch 设置为 None 并避免使用沉重的 ScrollViewer。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-10T22:03:03.607

我试过@FilipSkakun 的回答，效果很好，只做了一次调整：我`Image.Stretch`把`UniformToFill`.

我在这里发布我的代码，因为它可能对某人有帮助：

```
<Border Width="30" Height="30">
    <Border.Clip>
        <EllipseGeometry RadiusX="15" RadiusY="15" Center="15,15" />
    </Border.Clip>
    <Image Source="..." VerticalAlignment="Center" MaxWidth="30" Stretch="UniformToFill" />
</Border> 
```

另外，我可以通过`VerticalAlignment`属性控制图像定位。

# javascript - 设置表格分隔符位置

> ID：14911849
> 
> 赞同：3
> 
> 时间：2013-02-16T15:24:18.740
> 
> 标签：javascript, css, html-table

我有一个有两列的表（它只有一行）。

但是，我想让右列真正靠近左列。每当我尝试时，右列都会向右对齐。

有没有办法设置分隔符的位置，或者至少将右列的开始位置设置在左列文本的结尾附近？

我的实际代码示例：

```
<table style="width:400px;">
    <tr>
        <td>
            First
        </td>

        <td>
            100
        </td>
    </tr>
</table> 
```

建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T15:33:55.120

你可以试试

```
table{ border-collapse: collapse; } 
```

[**演示**](http://jsfiddle.net/ZNNMJ/)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-16T15:38:11.233

根据您想要实现的具体目标，您可能需要查看[border-collapse CSS 属性](http://www.w3schools.com/cssref/pr_tab_border-collapse.asp)。在您的示例中，应将其设置为：

```
border-collapse: collapse; 
```

[例子](http://jsfiddle.net/G2ruz/)

# delphi - 使用 Delphi 7 创建倒计时和加载栏

> ID：14911858
> 
> 赞同：0
> 
> 时间：2013-02-16T15:25:17.320
> 
> 标签：delphi, delphi-7

我正在使用 Delphi 7 创建程序。我有一个名为 CoinsEdit 的输入框。当用户单击提交时，他们必须等待的秒数将为 `CoinsEdit.text div 30 + 2` . 我让它显示他们必须等待的分钟数和秒数，但我希望它能够实时倒计时。我还想要一个进度条来配合它。所有这些都将在一个对话框中。并且“确定”按钮应该被禁用，直到加载完成。到目前为止我所拥有的：

```
procedure TForm1.onConnected;
var
  amount: string;
  user: string;
  pass: string;
begin
  amount := CoinsEdit.text;
  user := UserEdit.text;
  pass := PassEdit.text;    
  Form1.Visible := False;

  ShowMessage('Please wait for ' + Seg2Min(StrToInt(CoinsEdit.text) div 30 + 2));

  ShowMessage(user + ', ' + Trim(amount) + ' coins have been added to your ' +
    'account.');

  Form1.Visible := True;
  UserEdit.Text := '';
  PassEdit.Text := '';
  CoinsEdit.Text := '';
end; 
```

Seg2Min 是一个将秒转换为分钟和秒的函数。这是功能：

```
Min := Seg div 60;
Rest := Seg - (Min*60);
if Min = 0 then
  Seg2Min:= FormatFloat('0', Rest) + ' seconds'
else
  Seg2Min:= FormatFloat('0', Min) + ' minutes and ' + FormatFloat('0', Rest) + 
    ' seconds'; 
```

如何使用 a`TTimer`并将其用于倒计时？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T17:26:31.210

好的，我为解决这个问题所做的是：

1.创建2个表单。(frmLogin,frmDialog)

2.如果单击提交按钮，我将显示第二个表单“frmDialog”

3.然后我有一个更新进度条的计时器。

您感兴趣的代码是：

```
private
  { Private declarations }
    TimeRemaining,startvalue : Integer;
public
  { Public declarations }
end;

procedure TfrmDialog.FormShow(Sender: TObject);
begin
  TimeRemaining:=StrToInt(frmLogin.edtCoins.text) div 30 + 2;
  startvalue:=TimeRemaining;
end;

procedure TfrmDialog.Timer1Timer(Sender: TObject);
begin
  lblProgress.Caption:='Please wait for ' + IntToStr(TimeRemaining);
  TimeRemaining:=TimeRemaining-1;
  ProgressBar1.Max:= startvalue * 200;
  ProgressBar1.StepBy(200);
  if TimeRemaining < 0 then
    begin
    btnOk.Enabled:=true;
    lblProgress.Hide;
  end;
end; 
```

你只需要填写正确的数学。但我认为如果您不理解或需要更多帮助，请发表评论。

# php - PHP 重定向脚本不起作用。知道为什么吗？

> ID：14911860
> 
> 赞同：0
> 
> 时间：2013-02-16T15:25:35.957
> 
> 标签：php, javascript

我的主要 index.php 中有以下代码：

```
<script type="text/javascript" src="http://mydomain.com/test.php"></script> 
```

以下是test.php中的代码：

```
<?php
$referringDomain = $_SERVER['HTTP_REFERER'];
$myDomain = 'mydomain.com';
if ( preg_match("($myDomain)i", $referringDomain, $matches) == false ) {
//no match - output redirect javascript
?>
window.top.location.href=’http://realdomain.com’;
<?
Die();
} else {
// do nothing
}
?> 
```

但是，代码似乎不能实时工作。有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T15:32:31.173

不要在不必要的时候使用正则表达式——你可以`parse_url`通过这种方式获得引用者并获得它的域，然后简单地将它与你的匹配。此外，正如 PeeHaa 所指出的，在 JavaScript 中，您使用了错误的引号。

```
<?php
$referrer = $_SERVER['HTTP_REFERER'];
$referringURL = parse_url($referrer);
$myDomain = 'mydomain.com';

if ($referringURL['hostname'] !== $myDomain) {
  //no match - output redirect javascript
  echo "window.top.location.href='http://realdomain.com';";
}
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T15:32:58.880

```
<?php
$referringDomain = $_SERVER['HTTP_REFERER'];
$myDomain = 'mydomain.com';
if ( preg_match("($myDomain)i", $referringDomain, $matches) == false ) {
//no match - output redirect javascript
?>
<script>
    window.top.location.href="http://realdomain.com";
</script>
<?php
Die();
} else {
// do nothing
}
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T15:33:44.953

如果您需要在执行 PHP 代码时将用户重定向到另一个页面：您应该在浏览器中输出（回显）任何内容之前使用它：

```
<?php
  header("Location: http://www.website.com/anotherpage.php") ;
  exit() ;
?> 
```

**当前代码执行将被终止**，因此您可以减少服务器上的负载。在使用 JavaScript 时，PHP 将**执行代码直到最后**，将其输出到浏览器中，然后浏览器才会重定向用户。

但是，如果您在页面加载后需要重定向，则可以选择：

```
<script>
  window.location = "anotherpage.php" ;
  //or window.location.href = "anotherpage.php" ;
</script> 
```

编辑：`header("Location: $url")`必须包含绝对 URL - 感谢 PeeHaa

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-16T15:34:09.057

```
window.top.location.href=’http://realdomain.com’; 
```

到

```
window.top.location.href='http://realdomain.com'; 
```

引号是错误的。使用单引号。

# iphone - 在 UIImagePickerController 中编辑视频时是否可以创建固定持续时间的修剪窗口？

> ID：14911862
> 
> 赞同：0
> 
> 时间：2013-02-16T15:25:51.570
> 
> 标签：iphone, ios, video, uiimagepickercontroller, avfoundation

我在下面的代码中使用 UIImagePickerController。编辑视图显示一个修剪窗口，您可以拖动它的开头或结尾。我希望能够创建一个可以滑动的固定持续时间的修剪窗口。

有谁知道这是否可能？或者有谁知道实现这一目标的自定义控件？或者你能建议一种自己创建这个的方法（如果它不是太复杂的话）？

```
- (BOOL) startCameraControllerFromViewController: (UIViewController*) controller
                                   usingDelegate: (id <UIImagePickerControllerDelegate,
                                                   UINavigationControllerDelegate>) delegate {

    if (([UIImagePickerController isSourceTypeAvailable:
          UIImagePickerControllerSourceTypeCamera] == NO)
        || (delegate == nil)
        || (controller == nil))
        return NO;

    UIImagePickerController *cameraUI = [[UIImagePickerController alloc] init];
    cameraUI.sourceType = UIImagePickerControllerSourceTypeCamera;

    // Displays a control that allows the user to choose movie capture
    cameraUI.mediaTypes = [[NSArray alloc] initWithObjects: (NSString *) kUTTypeMovie, nil];

    // Hides the controls for moving & scaling pictures, or for
    // trimming movies. To instead show the controls, use YES.
    cameraUI.allowsEditing = YES;

    cameraUI.delegate = delegate;

    [controller presentModalViewController: cameraUI animated: YES];
    return YES;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T21:15:52.247

我已经收集到，如果您想创建一个固定的窗口修剪编辑控制器，您需要从头开始编写代码。UIImagePickerController 中没有固定窗口大小的选项。

# javascript - 为什么 javascript 中的 slice() 和 substr() 方法不适用于正则表达式？

> ID：14911863
> 
> 赞同：3
> 
> 时间：2013-02-16T15:25:51.750
> 
> 标签：javascript, expression, slice, substr

我的代码是：

```
var st="man myfile=l/p/nm.mp3 yourfile=/o/mj/nnc.mp3 ou p";
var patt=/myfile.[\W|\w]*.mp3\s/;
var s=patt.exec(st);
var s2=s.slice(3,4);
alert(s2); 
```

但是 slice() 什么也没给我，而 substr() 方法给了我一个错误：

`Object doesn't support this method`

为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T15:36:34.457

法布里西奥是对的。您的变量`s`是 RegExp 对象。要访问子字符串，您需要执行以下操作：

```
var s2 = s[0].substr(3,4); 
```

[jsFiddle 在这里](http://jsfiddle.net/3QkWX/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T15:38:32.670

`slice`： slice() 方法将数组中的选定元素作为新的数组对象返回。

`substring`: substring() 方法从字符串中提取两个指定索引之间的字符，并返回新的子字符串。

```
var st="man myfile=l/p/nm.mp3 yourfile=/o/mj/nnc.mp3 ou p";
var patt=/myfile.[\W|\w]*.mp3\s/;
var s=patt.exec(st); 
```

`s`现在是包含以下内容的数组：`["myfile=l/p/nm.mp3 yourfile=/o/mj/nnc.mp3 "]`

```
var s2=s.slice(3,4); 
```

元素`3`不存在，所以它返回`null`。

关于`substring`它不能在数组上使用:)所以你必须做这样的事情：

```
var s2=s[0].substring(3,4); 
```

# android - Android 在设置活动中菜单是否可用？

> ID：14911867
> 
> 赞同：0
> 
> 时间：2013-02-16T15:26:16.803
> 
> 标签：android, menu, settings

关于我们是否应该在设置活动期间提供主菜单（或 A 菜单）是否有任何指导方针？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T15:43:33.560

我不知道有任何文档指南这样说，但是在我手机上所有预装的 Google 应用程序上，无法从设置中访问菜单。这也是某种准则，不是吗？（：

但当然你可以考虑在设置的上下文中提供一个特殊的菜单。例如，在消息应用程序中有一个菜单项可用于将设置重置为默认值。

事实上，菜单应该与显示的活动有关。这就是为什么您可以为每个活动指定菜单，而不仅仅是为整个应用程序指定菜单。当然，提供一些像“设置”这样的全局菜单项是完全合法和合适的。

# javascript - 将值设置为属性中的对象

> ID：14911874
> 
> 赞同：-2
> 
> 时间：2013-02-16T15:26:44.040
> 
> 标签：javascript, object

在 JavaScript 对象中，我们可以

```
var myobj = {
    x: 0,
    y: {
        n: 6
    }
};
myobj['x'] = 6; // myobj.x will be 6 
```

我可以用函数做这样的事情吗？-

```
myobj['y.n'] = 6; 
```

我不想使用`myobj.y.n`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T15:28:55.197

不，没有解决这种对象路径的内置方法。但是，有很多小型库可用于此，例如[goodwin](https://github.com/logicalparadox/goodwin)。

或者你可以自己实现它。这并不难。只需拆分路径字符串，`.`然后遍历对象。

# c# - 了解 Windows Phone 开发中的 DataBinding

> ID：14911877
> 
> 赞同：2
> 
> 时间：2013-02-16T15:27:08.980
> 
> 标签：c#, data-binding, mvvm, windows-phone-8, viewmodellocator

我在理解数据绑定时遇到了一些麻烦。我正在努力学习`Windows Phone 8`发展。

我想在这里理解一些示例代码。

在`MainPage.xaml`他定义的`DataContext`：

```
<phone:PhoneApplicationPage.DataContext>
    <Binding Path = "Master"
             Source="{StaticResource Locator}" />
</phone:PhoneApplicationPage.DataContext> 
```

`Locator`是`ViewModelLocator`定义为`Resource`in`App.xaml` 并且 `Master`是类型的公共属性`MasterViewModel`。

所以我认为这意味着您现在可以访问`MasterViewModel`该类的属性。你有。但是在同一页面上，他绑定到不在的属性`MasterViewModel`，但在完全不同的`ViewModel`：

```
Text="{Binding Model.FirstName}" 
```

`Model`是不同的属性`ViewModel`。

那么他如何访问它呢？`DataContext`据我所知，他并没有超越某个地方。我错过了什么？

我没有发布很多代码，因为我想我只是还不了解数据绑定，答案对你来说是显而易见的。如果需要，我可以向您展示更多代码，这是来自 Laurent Ibugnion 的示例代码。

提前致谢

编辑：在他的视频中，他说他可以使用 dataBinding，因为在 DataTemplate 中，DataContext 设置为不同的 ViewModel ......但我看不到他在哪里设置了这个 viewModel：

```
<phone:PhoneApplicationPage.Resources>
    <DataTemplate x:Key="FriendItemTemplate">
        <Grid Width="480"
              Height="112"
              Margin="0"
              Background="#FF5E0000">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="124" />
                <ColumnDefinition />
            </Grid.ColumnDefinitions>

            <Rectangle Fill="#FF0B3100"
                       Stroke="Black"
                       Grid.ColumnSpan="2"
                       Visibility="{Binding OlderThanMeIndicatorVisibility, Mode=OneWay}" />

            <Image Source="{Binding Model.PictureUri}"
                   VerticalAlignment="Top"
                   Margin="24,6,0,0" Height="100" />

            <StackPanel Grid.Column="1">
                <StackPanel Orientation="Horizontal"
                            Margin="12,0,0,0">
                    <TextBlock TextWrapping="Wrap"
                               Text="{Binding Model.FirstName}"
                               Style="{StaticResource PhoneTextGroupHeaderStyle}"
                               Margin="0" />

                    <TextBlock TextWrapping="Wrap"
                               Text=" "
                               Style="{StaticResource PhoneTextGroupHeaderStyle}"
                               Margin="0" />

                    <TextBlock TextWrapping="Wrap"
                               Text="{Binding Model.LastName}"
                               Style="{StaticResource PhoneTextGroupHeaderStyle}"
                               Margin="0" />
                </StackPanel>

                <TextBlock TextWrapping="Wrap"
                           Text="{Binding Model.DateOfBirth}"
                           Style="{StaticResource PhoneTextLargeStyle}" />
            </StackPanel>
        </Grid>
    </DataTemplate>
</phone:PhoneApplicationPage.Resources> 
```

编辑：解决了，我终于找到了，

```
ListBox ItemsSource="{Binding Friends}"
                     ItemTemplate="{StaticResource FriendItemTemplate}" SelectedItem="{Binding SelectedFriend, Mode=TwoWay}" /> 
```

谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T16:18:20.997

您向我们展示的代码是作为资源的 ItemTemplate。数据绑定在列表框中。在那里你绑定到 SelectedFriend。

```
<ListBox ItemsSource="{Binding Friends}"
         ItemTemplate="{StaticResource FriendItemTemplate}"
         SelectedItem="{Binding SelectedFriend, Mode=TwoWay}" /> 
```

在未应用其他数据绑定时使用 DataContext 属性。

# c++ - 创建 SpriteFont 时参数无效

> ID：14911878
> 
> 赞同：0
> 
> 时间：2013-02-16T15:27:10.313
> 
> 标签：c++, graphics, directx, spritefont

我正在使用 C++ 编程，并且正在使用 DirectXTK 附带的 SpriteFont 工具。我在我的类中声明了一个变量：

```
std::unique_ptr<DirectX::SpriteFont> m_SpriteFont; 
```

我这样初始化它：

```
m_SpriteFont = std::unique_ptr<SpriteFont>(new SpriteFont(m_d3dDevice.Get(), L"Assets\\TNR.spritefont")); 
```

它给出了一个未处理的异常。通过程序调试，好像是读取文件有问题。该文件是使用工具包附带的 MakeSpriteFont.exe 生成的。字体是 Times New Roman，大小 12。我已经使用 Visual Studio 解决方案资源管理器将此文件添加到 assets 文件夹中，并且文件本身位于正确的文件夹中。

这里有什么问题？我错过了什么吗？

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T05:06:11.087

问题解决了。真的很简单，但我想把它贴在这里提醒大家不要犯我犯的愚蠢错误。

当您使用 Visual Studio 中的解决方案资源管理器添加现有项目时，检查它的属性并确保它参与构建（即项目类型标志未设置为“不参与构建”）。我将项目类型设置为“字体”并且它有效。

谢谢大家的帮助。

# xcode - IOS 6：呈现模态视图控制器

> ID：14911882
> 
> 赞同：3
> 
> 时间：2013-02-16T15:27:29.233
> 
> 标签：xcode, uiviewcontroller, ios6

我在带有 iOS 6.1 sdk 的 xcode 4.6 中有一个选项卡视图控制器和一个登录视图控制器

![在此处输入图像描述](../Images/14b8341d8664a2258d58b72ee46a874f.png)

加载应用程序启动时，“视图控制器 1”。如果用户未登录，我如何显示登录视图？在 View Controller 1 的 viewDidLoad() 中，我插入了以下代码：

```
MyNewAppAppDelegate *appDelegate = [[UIApplication sharedApplication] delegate];
if(!appDelegate.isUserLogged){

    UIStoryboard *mainStoryboard = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle:nil];
    LoginViewController *controller = (LoginViewController*)[mainStoryboard instantiateViewControllerWithIdentifier:@"LoginView"];
    [self presentViewController:controller animated:YES completion: nil]; 
```

}

但什么也没有发生。如何显示登录视图控制器？

谢谢你的支持

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T21:48:33.720

我将 Xamarin Studio 4.0 与 Xcode 4.6 和 iOS 6.1 一起使用，并且能够使用情节提要显示登录屏幕。我的代码是用 C# 编写的，但我相信你可以将它翻译成 Objective-C 的等价物。

使用情节提要时，Window 和 RootViewController 已经使用情节提要中的“初始场景”进行设置。因此，在 AppDelegate 中，我使用其“故事板 ID”实例化了 LoginViewController 的一个实例。然后我缓存当前 RootViewController 的一个实例，然后将新的 LoginViewController 设置为 RootViewController。

```
[Register ("AppDelegate")]
public partial class AppDelegate : UIApplicationDelegate
{
    LoginViewController loginController;

    public override UIWindow Window { get; set; }

    public override bool FinishedLaunching(UIApplication application, NSDictionary launchOptions)
    {
        loginController = Window.RootViewController.Storyboard.InstantiateViewController("LoginScene") as LoginViewController;
        loginController.InitialViewController = Window.RootViewController;

        Window.RootViewController = loginController;

        return true;
    }
    //... other overrides ...
} 
```

在 LoginViewController 中，我创建了一个属性来保存 InitialViewController 和登录按钮的 Action。在它完成登录工作后，我将 RootViewController 重置为缓存的 InitialViewController，然后关闭当前的 LoginViewController。

```
public partial class LoginViewController : UIViewController
{
    public UIViewController InitialViewController { get; set; }

    public LoginViewController (IntPtr handle) : base (handle)
    {
    }

    partial void OnLoginClicked(MonoTouch.UIKit.UIBarButtonItem sender)
    {
        //... do login work here ...
        UIApplication.SharedApplication.Delegate.Window.RootViewController = InitialViewController;
        DismissViewController(false, null);
    }
} 
```

LoginViewController 可以是独立的，就像您在情节提要中拥有它一样。它不需要连接到任何其他场景或需要任何转场。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-10T06:48:34.237

这是对我有用的Objective C代码。请注意，在情节提要上，我将选项卡栏控制器设置为根视图控制器（也就是说，我在“是初始视图控制器”旁边有一个复选标记）。代码会覆盖此设置以使独立登录视图控制器弹出。

```
//Note that my storyboard file's name is "Main.storyboard"--here you put the name of the storyboard file WITHOUT The extension, which is why I just say "Main" here.        
UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"Main" bundle:nil];
//On the storyboard, you must set the Storyboard ID of the Login View Controller to the name "LoginForm" that is used below, so the code can find the View Controller referred to
UIViewController *loginController = [storyboard instantiateViewControllerWithIdentifier:@"LoginForm"];
self.window.rootViewController = loginController; 
```

在登录视图控制器中，当它因为登录已被验证正确而准备关闭时，我在 App Delegate 中调用一个方法，如下所示：

```
//Be sure to import the App Delegate at the top with #import "AppDelegate.h"
AppDelegate *myAppDelegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];
[myAppDelegate showMainScreen]; 
```

在 App Delegate 中，这里是“showMainScreen”方法。请注意，我正在关闭临时设置为根视图控制器的登录视图控制器，并将主屏幕放回根视图控制器。

```
- (void)showMainScreen {
    [self.window.rootViewController dismissViewControllerAnimated:YES completion:nil];
    UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"Main" bundle:nil];
    UITabBarController *main = [storyboard instantiateViewControllerWithIdentifier:@"tabBarForm"];
    self.window.rootViewController = main;
} 
```

另一个提示：作为一种安全措施，我喜欢在每次应用程序最小化时弹出登录屏幕，所以我调用`applicationWillEnterForeground`应用程序委托中的方法作为每次出现登录控制器时交换登录控制器的一种方式：

```
- (void)applicationWillEnterForeground:(UIApplication *)application {
    [self showLoginScreenIfNecessary];
} 
```

# css - 960 网格边界混乱。

> ID：14911884
> 
> 赞同：0
> 
> 时间：2013-02-16T15:27:41.103
> 
> 标签：css, layout, 960.gs

我希望这很简单，只是我对 css 缺乏经验。我只是想向一组嵌套的 div 添加一个像素边框。

```
<div class="grid_11 suffix_1">
  <div class="borderupdown">
    <div class="grid_1 alpha">
      <p>RNK</p>
    </div>
    <div class="grid_1">
      <p>IQ</p>
    </div>
    <div class="grid_8 omega">
      <div class="grid_8 alpha">
        <p>title<p>
      </div>
      <div class="clear"></div>
      <div class="grid_8 omega">
        <p>comments stuff here</p>
      </div>
    </div>
  </div>
</div> 
```

这是borderupdown css

```
.borderupdown
{
    border-top:1px solid red;
    border-bottom:1px solid red;
    margin-bottom:2px;
} 
```

类borderupdown只是一个1px的顶部和底部边框。我的“理解”是，由于其他 div 嵌套在该类下，它应该在所有这些的顶部和底部创建一个 1px 边框。相反，我让两个边框在顶部视觉上显示，它们之间有 2px 的边距。我完全不知道为什么。（以防万一，我使用的是 960 网格系统的流体版本。）

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T15:59:42.287

听起来您偶然发现了浮动在容器中的元素不包含在容器的维度中的问题。（我相信其他人有更好的措辞方式......）。默认情况下，浮动元素不包括在任何容器的尺寸计算中。您正在寻找的东西称为“clearfix”。查看这篇文章以获得非常好的详细修复列表：[我可以使用哪些“clearfix”方法？](https://stackoverflow.com/questions/211383/which-method-of-clearfix-is-best)

# jquery - 使用 MVC4 和 jQuery 实时更新表

> ID：14911891
> 
> 赞同：0
> 
> 时间：2013-02-16T15:28:19.127
> 
> 标签：jquery, asp.net-mvc

我有一个仅用于记录我的应用程序日志的数据库，现在我需要构建一个 Web 应用程序来读取该数据库中的表并更新 UI 中的表，就像实时一样。

那么，有没有类似的 jQuery 插件呢？你能帮助我吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T15:30:24.237

您可以使用`jQuery Realtime`或`SignalR`：

jQuery实时：

[https://github.com/leggetter/jquery.realtime](https://github.com/leggetter/jquery.realtime)

信号R：

[http://signalr.net/](http://signalr.net/)

# css - Drupal 网站 CSS 在所有浏览器中停止

> ID：14911896
> 
> 赞同：0
> 
> 时间：2013-02-16T15:29:07.663
> 
> 标签：css, drupal

我维护了一个网站[http://www.cugc.org.uk/cms/](http://www.cugc.org.uk/cms/)内置于 Drupal 7.19

当我从假期回来时，我发现在我检查过的所有浏览器（IE、FF、Chrome）中，所有格式都从网站上消失了。

我相信它是一种权限，因为代码仍然链接到正确的 CSS 文件，我可以通过 FTP 查看这些文件，但在使用浏览器时无法查看。

以下是部分内容的示例

```
<style media="all" type="text/css">
@import url("http://www.cugc.org.uk/cms/modules/system/system.base.css?mia4dq");
@import url("http://www.cugc.org.uk/cms/modules/system/system.menus.css?mia4dq");
@import url("http://www.cugc.org.uk/cms/modules/system/system.messages.css?mia4dq");
@import url("http://www.cugc.org.uk/cms/modules/system/system.theme.css?mia4dq");
</style> 
```

我检查了服务器，所有这些文件的权限都设置为 774，即世界可读。但是在尝试访问浏览器中的文件时出现 403 错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T17:10:27.123

确保正确配置了 CSS 文件夹中的 .htaccess 文件。通过删除该文件中的所有代码行来编辑 .htaccess 文件，但保留 CSS 文件夹中的空 .htaccess 文件（这样 Drupal 无法在文件夹中放置新的 htaccess）。这对我有用几次。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T10:43:22.230

现在已修复，不知何故 css 文件已更改，因此一旦更改权限，问题就消失了。

# iphone - iOS - 将自定义 UIView 放在视图控制器中

> ID：14911899
> 
> 赞同：2
> 
> 时间：2013-02-16T15:29:21.573
> 
> 标签：iphone, ios, objective-c, xcode, uiview

我的 iOS 应用程序有一个根视图控制器，我想`UIView`在运行时向它添加一些自定义。我称这些自定义视图小部件是因为它们很小并且除了大小、标签文本等基本相同。

我为我的小部件和 .xib 文件创建了 .h 和 .m 。在我的根视图控制器`viewDidLoad`中，我这样做：

```
TestMyView *cell = [[[NSBundle mainBundle] loadNibNamed:@"TestMyView" owner:self options:nil] objectAtIndex:0];    
[self.view addSubview: cell]; 
```

它工作正常。但是，我仍然无法弄清楚：

*   `"[<TestViewController 0x7517210> setValue:forUndefinedKey:]: this class is not key value coding-compliant for the key mylabel"`如果我将`UILabel`mylabel 作为 IBOutlet 添加到我的自定义 UIView 类 .h 文件中，为什么会有异常。（我将 UILabel 拖放到 IB 中，然后控制拖动到 .h）创建视图时我需要更改标签文本。而且我不太明白为什么它抱怨 TestViewController 而我没有添加 IBOutlet 到它，但是我的自定义视图 .h 类？
*   那么如何以正确的方式更改标签文本。我不想为我的小部件创建视图控制器，因为我认为没有必要。我需要创建 5-6 个小部件，所以我需要为它们创建 5-6 个视图控制器？
*   当我创建小部件时，似乎没有调用 initWithCoder？我看到苹果文档库说如果从 nib 文件加载视图，这个方法将被调用。

如果您认为我不擅长解释这一点，这是我的项目代码： [https ://dl.dropbox.com/u/43017476/custom.tar.gz](https://dl.dropbox.com/u/43017476/custom.tar.gz)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-16T17:52:24.240

你很近。一些笔记。

第一 - 当您从 nip 加载视图时，“所有者”是具有 nib 引用的属性 (IBOutlets) 的类。那可能是TestMyView 的一个实例。通常，创建自定义视图并让它加载它自己的 nib（如下图所示）。

2nd - loadNibNamed 返回 NSARRAY，而不是 UIVIEW；所以你会想要把你的视图拉出数组。

这是创建自定义视图（小部件）的示例：

```
CGRect frame = CGRectMake(nextLeft, nextTop, tileWidth, tileHeight);
TestMyView *widget = [[TestMyView alloc] initWithFrame:frame andFoo:foo];
[widget setWidgetTappedBlock:^{
    // handle tap for this widget
}];
[self.widgetContainerView addSubview:widget]; 
```

这是您的自定义视图实现的一部分：

```
@implementation TestMyView

- (id)initWithFrame:(CGRect)frame andFoo:(Foo *)foo
{
    self = [super initWithFrame:frame];
    if (self) {
        [self setBackgroundColor:[UIColor clearColor]];
        NSArray *nibObjects=[[NSBundle mainBundle] loadNibNamed:@"TestMyView" owner:self options:nil];
        [self addSubview:[nibObjects objectAtIndex:0]];
        // More initialization code
    }
    return self;
}

@end 
```

和界面：

```
@interface ProductTileView : UIView

@property (nonatomic, weak) IBOutlet UIView *view;
@property (nonatomic, copy) ProductTappedBlock widgetTappedBlock;

- (id)initWithFrame:(CGRect)frame andFoo:(Foo *)foo;

@end 
```

**编辑：** PS 在您的示例中，错误是因为发送到 loadNib 的所有者是“自我”，这是您的视图控制器。您的视图控制器没有“myLabel”属性，您的自定义视图有。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T16:48:09.433

我认为您必须先启动它们才能添加到您的 rootView！

```
TestMyView *cell = [[TestMyView alloc]initWithNibName:@"TestMyView" bundle:[NSBundle mainBundle]];
[self.view addSubview: cell]; 
```

# java - 将相机旋转到一个点

> ID：14911904
> 
> 赞同：6
> 
> 时间：2013-02-16T15:29:36.437
> 
> 标签：java, math, opengl

我正在制作一款使用整个星球作为地图的游戏。我已经[使用这种技术](https://math.stackexchange.com/questions/249972/floret-tessellation-of-a-sphere)对球形行星进行了镶嵌，现在正在添加相机控制。

球体的维度为 1 到 -1，因此球体上的每个点也是一个归一化向量。在任何时候，构成球体的六边形图块之一是“选定”图块。然后，玩家可以使用 d-pad 将选择移动到相邻的图块。他们还可以使用模拟摇杆独立旋转相机

我需要对选定的瓷砖和相机做两件事。首先，我需要能够将选择切换到离相机最近的图块。其次，我需要将相机放在突出显示的瓷砖上

球体位于原点，相机位于点 (0,0,1)。图形引擎只允许我围绕 X 和 Y 轴旋转相机，所以为了解决第一个问题，我使用四元数围绕 x 和 y 轴旋转点 (0,0,1) 以找到点相机所在的 3D 空间：

```
 private Quaternion quat = new Quaternion(0,0,0,0);
    private double[] output = new double[4];
    private double[] cam = new double[3];

    private double camX = 0;
    private double camY = 0;
    private double camZ = 1;

    private double[] getCamPosition(){

        quat.setAxisAngle(1, 0, 0, Math.toRadians(-graphicsEngine.getRotationX()));
        quat.RotateVector(camX, camY, camZ, output);            
        cam[0] = output[0];
        cam[1] = output[1];
        cam[2] = output[2];   

        quat.setAxisAngle(0, 1, 0, Math.toRadians(-graphicsEngine.getRotationY()));
        quat.RotateVector(cam[0], cam[1], cam[2], output);          
        cam[0] = output[0];
        cam[1] = output[1];
        cam[2] = output[2];

        return cam;
    } 
```

然后我比较每个图块的质心与相机位置之间的距离，并取最接近新选择的图块的图块。

但是，为了解决第二个问题，我想做相反的事情。我想取质心（已经是归一化向量的形式），并找出围绕 X 的旋转和围绕 Y 的旋转，以使相机以它为中心

目前，我将相机旋转回（0,0,1），然后在（0,0,1）和质心之间获取X轴和Y轴的角度，并使用它来旋转相机第二次：

```
private double[] outputArray = new double[2];

/**
 * Cam is always (0,0,1)
 */
public void centreOnSelected(double camX, double camY, double camZ){        

    selectedTile.getCentroidAngles(outputArray);

    outputArray[0] -= Math.atan2(camZ, camY);
    outputArray[1] -= Math.atan2(camX, camZ);

    // this determines if the centroid is pointing away from the camera
    // I.e. is on the far side of the sphere to the camera point (0,0,1)
    if(!selected.getCentroidDirectionY(camX, camZ)){
        outputArray[0] = -Math.PI - outputArray[0];         
    }

    graphicsEngine.rotateCam(Math.toDegrees(outputArray[0]), Math.toDegrees(outputArray[1]));

} 
```

在`selected`（瓷砖类）

```
void getCentroidAngles(double[] outputArray){
    outputArray[0] = Math.atan2(centroidZ, centroidY);
    outputArray[1] = Math.atan2(centroidX, centroidZ);

} 
```

问题是这不起作用，（x 轴似乎总是不在），我很确定这与获取角度和进行旋转的数学有关

注意：图形引擎首先绕 X 轴旋转，然后绕 Y 轴旋转：

```
 gl.glRotatef(mRotateX, 1, 0, 0);
        gl.glRotatef(mRotateY, 0, 1, 0); 
```

质心都在正确的位置，并且相机肯定会旋转正确的量，所以我确定问题不在于图形引擎。这也不是将相机重新定位回（0,0,1），因为我已经通过逐步执行程序检查了它的工作原理

我还制作了一个视频来说明这个问题：

[http://www.youtube.com/watch?v=Uvka7ifZMlE](http://www.youtube.com/watch?v=Uvka7ifZMlE)

这已经困扰了我好几天了，因此非常感谢任何帮助解决此问题！

谢谢詹姆斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T12:45:37.853

不幸的是，我不完全了解这里发生了什么，也无法提供完整的解决方案，但至少可以指出一些需要注意的问题。

我从来没有使用过glRotatef，但是我对这里的转换顺序和符号有点困惑——例如，在给定glRotatef调用的顺序的情况下，你真的先做x旋转吗？

无论如何，这里的问题至少有一部分来自这些方程

```
outputArray[0] = Math.atan2(centroidZ, centroidY);
outputArray[1] = Math.atan2(centroidX, centroidZ); 
```

首先，你的意思是`(centroidY, centroidZ)`在第一个？更严重的是，你在这里得到的角度不能用来建立一个旋转`(0,0,1)`到你的质心，反之亦然。例如，假设您要将质心向量旋转到`(0,0,1)`. 您的 2 个旋转中的每一个都可以单独用于围绕单个轴旋转，将一个组件设置为零。例如，`outputArray[0]`围绕适当符号的 x 轴旋转会将 y 分量设置为零（假设`atan2`交换了参数）。或者旋转`outputArray[1]`关于y轴的正确符号可以将x分量设置为0。但是在首先进行x旋转（例如）将y分量设置为0之后，质心向量会发生变化 - 现在围绕y轴的旋转将设置x组件为 0 不再由`outputArray[1]`.

这些事物的正确公式总是有`atan2`一个角度和一个`acos`或另一个角度`asin`。例如，如果您想要将矢量`(1,0,0)`带到`(x,y,z)`您身上的主动旋转的角度，您可以使用

```
first_angle_around_x  = -asin(y)
second_angle_around_y = atan2(x, z) 
```

继续`(x,y,z)`你`(1,0,0)`会使用

```
first_angle_around_x  = atan2(y, z)
second_angle_around_y = -asin(x) 
```

（这些角度描述了当轴“戳你的眼睛”时围绕 x、y 轴的逆时针旋转。）

另一个问题在这里

```
outputArray[0] -= Math.atan2(camZ, camY);
outputArray[1] -= Math.atan2(camX, camZ); 
```

像这样减去角度仅适用于围绕单个轴的旋转。一旦你从围绕不同轴的旋转构建复合变换，关系就会变得更加复杂——这就是矩阵和四元数派上用场的原因。我猜如果 camX-Z 输入是冗余的，正如方法之前的注释所建议的那样，我猜这段代码可能无关紧要（尽管目前 Z 和 Y 组件在此处的方式会产生非零结果，可能是在我提到的第一个方程式中补偿它们是“错误”的方式；我不确定这是否是故意的）。

将相机移动到所选图块​​的方式还有一个基本问题，尽管它是否真的是一个问题有点主观。因为您只围绕 x 和 y 轴进行旋转，所以您的星球上的每个点都有一个独特的相机方向。问题是没有办法连续选择这样的方向 - 想象一下地球上的一个矢量场，其中每个点的矢量是一个单位矢量，当相机在该点上方时，它指向屏幕 x 方向。[根据毛球定理](http://en.wikipedia.org/wiki/Hairy_ball_theorem)，该场不能连续. 这在实践中意味着在地球上的某个时刻，对相机位置进行看似微小的调整将使行星轮在屏幕上最多旋转 180 度。如果您想避免这种情况，您可以选择基于当前相机位置的方向，以尽量减少旋转量。这确实意味着，例如，如果摄像机以闭环方式移动，那么行星最终可能会在屏幕上“滚动”，而这在您的游戏中可能并不理想。它还要求您的引擎能够在所有 3 个轴上进行旋转。

# objective-c - Objective-C 指针地址

> ID：14911906
> 
> 赞同：-1
> 
> 时间：2013-02-16T15:29:44.093
> 
> 标签：objective-c

我是一个非常新的 ObjectiveC 程序员，

我如何获得指针的值；

```
NSString *success= [jsonData objectForKey:@"Success"]; 
```

这个成功变量给了我一些内存地址，但我需要这个内存地址的值。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T15:32:50.287

你需要它做什么？A `NSString`（与 Objective-C 中的每个对象一样）并不意味着被取消引用。然后不清楚是否需要指向值的值的指针的值（例如地址值）（所以基本上你用`*`C 中的运算符获得的）

如果您需要将字符串的值作为布尔值获取，您应该考虑

```
NSString *success= [jsonData objectForKey:@"Success"];
bool value = [success boolValue]; 
```

这将自动将字符串转换为布尔值（如果适用）。

# windows - 带有 Node Js 的基本 Web 服务器发布

> ID：14911907
> 
> 赞同：0
> 
> 时间：2013-02-16T15:29:54.057
> 
> 标签：windows, node.js

我是节点 js 的新手。我正在关注链接。但这总是执行`response.writeHead(404);`所以我无法查看 index.html [http://thecodinghumanist.com/blog/archives/2011/5/6/serving-static-files-from-node-js](http://thecodinghumanist.com/blog/archives/2011/5/6/serving-static-files-from-node-js)

这是我的网络服务器节点 js 代码。

```
var http = require('http');
var path = require('path');
var fs = require('fs');

http.createServer(function (request, response) {

    console.log('request starting...');

    var filePath = "."+request.url;
    if (filePath == './')
        filePath =  '/index.html';
    else
        console.log(request.url);
    var extname = path.extname(filePath);
    var contentType = 'text/html';
    switch (extname) {
        case '.js':
            contentType = 'text/javascript';
            break;
        case '.css':
            contentType = 'text/css';
            break;
    }

    fs.exists( filePath, function (exists) {
        console.log(filePath);
        if (exists) {

            fs.readFile(filePath, function (error, content) {
                if (error) {
                    console.log(error);
                    response.writeHead(500);
                    response.end();
                }
                else {
                    response.writeHead(200, { 'Content-Type': 'text/html' });
                    response.end(content, 'utf-8');
                }
            });
        }
        else {
            response.writeHead(404);
            response.end();
        }
    });

}).listen(8125); 
```

我的问题。

1.  这没有显示 index.html。
2.  如何发送基于不同请求的响应或 html 文件？例如：`http://localhost:8125`-> index.html `http://localhost:8125/firstpage.html`-> firstpage.html
3.  我们是否需要将 html 文件放在包含 server.js（Web 服务器）的同一目录中？

我也在 cloud9 ide 中尝试过同样的方法。

![在此处输入图像描述](../Images/6088598af1c39db23f6e0c7de54e7867.png)

我在 SO 中发现了类似的问题。但我没有明确的想法如何解决它。 [Node.js - 基本节点 Web 服务器未提供 Socket.io 客户端文件](https://stackoverflow.com/questions/8459007/node-js-socket-io-client-file-not-being-served-by-basic-node-web-server) 提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T15:54:39.173

1-是的，是的。我可以重现错误。我不熟悉教程，但显然该行`filePath = '/index.html';`应该是``filePath = './index.html';``.

否则，服务器会在文件系统的根目录中查找“/index.html”，即一个名为“index.html”的文件，而不是在当前目录中。也许它在 Windows 操作系统上工作，但在 *nix 上这将不起作用。我添加了`.`index.html 。

2-为此，您需要导入“url”node.js 模块，然后您可以使用一种方便的方式来解析 URL：[http](http://nodejs.org/api/http.html#http_request_url) ://nodejs.org/api/http.html#http_request_url 基本上，在该`fs.exist ...`行之前，您可以添加以下内容：

`var requestedfile = urlparser.parse(request.url).pathname;`
`console.log("requested URL path name : " + requestedfile);`

然后您将能够处理不同的请求。

3-是的，你可以。请记住，当添加一个点“。” 在问题 1 的“index.html”之前，您提供了 index.html 的相对路径（相对于 server.js 在文件系统上的位置）。因此，您可以通过这种方式指定任何其他相对路径。

如果您将页面存储在当前文件夹之外的另一个目录中（例如 /var/www/mysite），您仍然可以通过连接包含此绝对路径的字符串变量和请求路径名称来提供这些页面。例如（尽管经过测试）

```
var pagestorage = "/var/www/mysite/";
(...)
var pathname = urlparser.parse(request.url).pathname;
var requestfile = pagestorage + pathname; 
```

这是更新文件的完整示例：

```
 var http = require('http');
var path = require('path');
var fs = require('fs');
var urlparser = require('url');

http.createServer(function (request, response) {

    console.log('request starting...');

    var filePath = "."+request.url;
    if (filePath == './')
        filePath =  './index.html';
    else
        console.log(request.url);
    var extname = path.extname(filePath);
    var contentType = 'text/html';
    switch (extname) {
        case '.js':
            contentType = 'text/javascript';
            break;
        case '.css':
            contentType = 'text/css';
            break;
    }

    // documentation at : http://nodejs.org/api/http.html#http_request_url
    var requestedfile = urlparser.parse(request.url).pathname;
    console.log("requested URL path name : " + requestedfile);

    fs.exists( filePath, function (exists) {
        console.log("looking up : " + filePath);
        if (exists) {

            fs.readFile(filePath, function (error, content) {
                if (error) {
                    console.log("error" + error);
                    response.writeHead(500);
                    response.end();
                }
                else {
                    response.writeHead(200, { 'Content-Type': 'text/html' });
                    response.end(content, 'utf-8');
                }
            });
        }
        else {
            response.writeHead(404);
            response.end();
        }
    });

}).listen(8125); 
```

高温高压

# javascript - 任何具有动态高度的滑块？

> ID：14911918
> 
> 赞同：3
> 
> 时间：2013-02-16T15:31:23.837
> 
> 标签：javascript, jquery, css, height, anythingslider

我正在使用[任何东西](http://css-tricks.com/examples/AnythingSlider/)并且有问题。

我的内容元素是从 CMS 加载的，它们的高度可能会有所不同。我想将滑块高度设置为最高元素的高度，但这似乎不起作用。

我试过这样：

```
var max_height = 0;
$(".canythingslider .ccontentelement").each(function() {
    var h = $(this).height();
    if(h > max_height) {max_height = h;}
});
$(".canythingslider").css("height", max_height + "px");
$(".canythingslider").anythingSlider(); 
```

有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-20T07:56:15.617

我现在开始工作了。AnySlider 的 resizeContents 选项必须设置为 false，然后上面的脚本会执行我想要的操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-20T11:41:27.047

我遇到了同样的问题（CMS 是 TYPO3，我尝试用 ext.gridelements 制作一个滑块）。对我来说，这个解决方案效果更好：

```
var max_height = 0;
$(".anythingslider .contentelement").each(function() {
    var h = $(this).height();
    if(h > max_height) {max_height = h;}
});
$(".anythingslider-outer").css("height", max_height + "px");
$(".anythingslider").anythingSlider(
    'expand': true
); 
```

我所做的是：在anythingslider周围包裹一个div：

```
<div class="anythingslider-outer">
    <ul class="anythingslider">...</ul>
</div> 
```

这个外部容器得到高度，宽度现在也是灵活的。任何滑块都被拉伸到这个容器的尺寸（expand=true）。

**更好的是这个 JavaScript 解决方案**，它可以在一页上处理多个滑块（不仅仅是一个滑块）：

```
$("ul.anythingslider").each(function(){
    var anythingsliderContainer = $(this).closest(".anythingslider-outer");
    anythingsliderContainer.css("height", 0);
    anythingsliderContainer.find("ul.anythingslider > li").each(function(){
        if($(this).height() > anythingsliderContainer.height()){
            anythingsliderContainer.css("height", $(this).height());
        }
    });
});

$('ul.anythingslider').anythingSlider({
    'expand': true
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T15:46:40.943

嗨，如果这有帮助，请告诉我。

`功能高度水平仪（组）{

```
 var tallest = 0;

    group.each(function () {
        thisHeight = $(this).height();
        if (thisHeight > tallest) {
            tallest = thisHeight;
        }
    });
    group.height(tallest);
} 
```

`heightLeveler(".canythingslider");`

# html - 图片没有在 IE 中显示，但在 Chrome 中显示，为什么？

> ID：14911929
> 
> 赞同：1
> 
> 时间：2013-02-16T15:33:17.213
> 
> 标签：html, image, internet-explorer, browser

我正在处理的网站上的几张图片没有在 IE 中显示，但在 Chrome 中可以正常工作。不知道是什么问题，有大神知道吗？

这是一个不会在 IE 中显示的示例图像，我得到了一个带有红色叉号的小框。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-08-28T16:21:56.310

花了很多时间寻找答案，我终于得出结论，IE9不支持32bpp位图。您可以通过在绘画中打开位图并将其保存为 24 位图来测试它。然后用IE9打开，就可以打开了。

# xhtml - 在 Primefaces 3.5 中设置 BarWidth [BarChart]

> ID：14911930
> 
> 赞同：1
> 
> 时间：2013-02-16T15:33:17.560
> 
> 标签：xhtml, primefaces, bar-chart

我想在primefaces的条形图中设置条的宽度。我尝试了这个扩展器但没有用：

```
this.cfg.seriesDefaults = {
    rendererOptions: {
      barWidth:10  
  }
}; 
```

我该如何处理？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T11:35:52.063

您应该通过设置**样式**属性来动态设置条形图的宽度，如下所示，组件自动排列条形宽度；

**style="height:720px; width:#{statisticBean.barChartWidth}px"**

例如，通过计算 barcount*barwidth+66 在 bean 一侧设置 barChart；使用 10 作为条宽。乘以 chartItemCount 并为条形标签宽度添加 66 或其他值。

```
public int getBarChartWidth() {
        return chartItemCount * 10 + 66;
    } 
```

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-12T05:34:04.967

如果您仍在寻找解决方案，我建议您尝试以下方法：

`this.cfg.seriesDefaults.rendererOptions= { barWidth:10
};`

我稍微修改了代码的语法。它对我很好。

希望能帮助到你。

# dynamic - 加载和动态链接

> ID：14911932
> 
> 赞同：2
> 
> 时间：2013-02-16T15:33:37.037
> 
> 标签：dynamic, linker, libraries, shared, libc

当进程需要动态库中的函数时，是整个库加载到内存还是仅加载函数？

例如：当我使用`printf()`libc 中的或任何函数时（假设它是一个动态库），是整个 libc 加载到内存中还是仅加载该`printf()`函数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-06T03:47:32.200

> 是整个库加载到内存中还是仅加载了函数？

答案取决于您所说的“加载到内存”的确切含义，以及您正在运行程序的操作系统。

让我们考虑一下 Linux，以及针对`libc.so`.

在那里，包含and of的整个`PT_LOAD`段在程序的第一条指令甚至执行之前就被编入内存（因为您的程序记录了它在其部分中*需要*的内容）。`.data``.text``libc.so.6``mmap()` *`libc.so.6``.dynamic`*

 *从那时起，当您访问它时，代码被*要求分页*到 RAM 中。当您调用`printf`时，包含代码的`printf`页面将从磁盘中调入，或者（更有可能）从缓冲区缓存中重用。*

# azure - 为 Windows Azure 创建联合管理员

> ID：14911938
> 
> 赞同：1
> 
> 时间：2013-02-16T15:33:59.570
> 
> 标签：azure

我已经完成了以下网址中提到的步骤

[http://msdn.microsoft.com/en-us/library/windowsazure/gg456328.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/gg456328.aspx)

它说“在电子邮件地址中，为新的共同管理员键入有效的 Windows Live ID 或公司电子邮件地址。”

公司电子邮件地址是什么意思，是来自同一域的用于登录门户网站的任何邮件 ID 还是其他？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T04:09:47.450

除非您位于配置为为您的组织联合 Azure 身份的域中，否则您需要使用实时 ID。对于大多数用户来说，他们需要的是注册的 live id。

# php - 删除无序列表中的空白行

> ID：14911940
> 
> 赞同：0
> 
> 时间：2013-02-16T15:34:06.970
> 
> 标签：php, jquery, html, zend-framework

无序列表函数我目前有来自数据库的三个变量，$firstline、$secondline、$thirdline，但有时其中一个变量是空的。当我尝试将其放入无序列表时，该字段中有一个空行。如何编写一个检查空白变量的函数，然后如果该变量为空则排除该变量。基本上是“当第一行，第二行，第三行不是空白时，然后创建这个无序列表。如果第一行为空，则将其从无序列表中删除，等等。”

```
 <ul>
    echo "<li>$this->firstline</li>";
    echo "<li>$this->secondline</li>";
    echo "<li>$this->thirdline</li>";
  </ul> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T15:35:51.073

使用 jQuery：

```
$('li').filter(function(){
    return $(this).text().trim() === '';
}).remove(); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/AmNXv/1/)

使用纯 JavaScript：

```
function removeEmpty(tags, parent){
    if (!tags) {
        return false;
    }
    else {
        tags = tags.split(/\s+/);
        parent = parent && parent.nodeType === 1 ? parent : document.body;
        var children = [], _tmp;
        for (var i = 0, len = tags.length; i < len; i++) {
            _tmp = parent.getElementsByTagName(tags[i]);
            if (_tmp.length) {
                for (var I = 0, Len = _tmp.length; I < Len; I++){
                    children.push(_tmp[I]);
                }
            }
        }
        if (children.length > -1) {
            var i = children.length - 1,
                cur, txt;
            while (i) {
                cur = children[i];
                txt = (cur.textContent || cur.innerText).replace(/(^\s+)|($\s+)/g,'');
                if (!txt.length) {
                    cur.parentNode.removeChild(cur);
                }
                i--;
            }
        }
    }
}

removeEmpty('li em', document.getElementsByTagName('div')[0]); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/AmNXv/5/)

这非常冗长，但大部分长度是允许在一个函数调用中允许多个标签，因此您可以调用该函数：

*   [`removeEmpty('li em', document.getElementsByTagName('div')[0]);`](http://jsfiddle.net/davidThomas/AmNXv/5/)（如上面的代码块）。
*   [`removeEmpty('li', document.getElementsByTagName('div')[0]);`](http://jsfiddle.net/davidThomas/AmNXv/3/).
*   [`removeEmpty('li');`](http://jsfiddle.net/davidThomas/AmNXv/4/).

使用 CSS：

```
li:empty {
    display: none;
} 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/AmNXv/)

尽管这甚至将单个空格`<li> </li>`视为非空元素。

*可能使用 PHP（自从我上次使用任何*PHP以来已经有一段时间了）：

```
echo strlen($this->firstline) > 0 ? "<li>$this->firstline</li>" : '';
echo strlen($this->secondline) > 0 ? "<li>$this->secondline</li>" : '';
echo strlen($this->thirdline) > 0 ? "<li>$this->thirdline</li>" : ''; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T15:47:17.787

一个函数可以是这样的

```
function checkEmpty($val){

if(!$val) return;
if($val) return "<li>".$val."</li>";

} 
```

现在您可以使用此功能

```
echo checkEmpty($this->firstline);
echo checkEmpty($this->secondline);
echo checkEmpty($this->thirdline); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T15:40:42.993

当您在 php 中动态显示您的列表时，请尝试这样的操作

```
echo ($this->firstline > "") ? "<li>" . $this->firstline . "</li>" : "";
echo ($this->secondline > "") ? "<li>" . $this->secondline . "</li>" : "";
echo ($this->thirdline > "") ? "<li>" . $this->thirdline . "</li>" : ""; 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-02-16T16:05:59.457

试试这个 ：）

```
 ol, ul{list-style:none;} 
```

# java - 如何从 Activity 访问偏好值？

> ID：14911942
> 
> 赞同：3
> 
> 时间：2013-02-16T15:34:10.740
> 
> 标签：java, android

我有以下显示首选项屏幕的代码：

```
Button showPreferences=(Button)findViewById(R.id.buttonShowPreferences);
showPreferences.setOnClickListener(new OnClickListener() {

    @Override
    public void onClick(View arg0) {
        startActivity(new Intent(MainActivity.this, PreferencesActivity.class));
    }           
});

Button logPreferences=(Button)findViewById(R.id.buttonLogPreferences);
logPreferences.setOnClickListener(new OnClickListener() {

    @Override
    public void onClick(View arg0) {
        SharedPreferences prefs=PreferenceManager.getDefaultSharedPreferences(getApplicationContext());
        String editText=prefs.getString("edit_text", "default_edit_text_value");
        boolean checkBox=prefs.getBoolean("check_box", true);
        String list=prefs.getString("list", "default_list_value");

        Log.i("edit_text_value", editText);
        Log.i("check_box_value", String.valueOf(checkBox));
        Log.i("list_value", list);
    }

}); 
```

如您所见，第二个按钮用于从首选项中获取值，但有一个问题：我总是从 getString()、getBoolean() 方法的第二个参数中获得默认值！

PreferenceActivity 类的布局：

```
<?xml version="1.0" encoding="utf-8"?>
<PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android">

    <PreferenceCategory
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:key="first_screen_key"
        android:summary="First summary"
        android:title="First title" >
        <CheckBoxPreference
            android:persistent="true"
            android:title="Check Box Title"
            android:key="check_box_key"
            android:defaultValue="false"/>
        <ListPreference 
            android:persistent="true"
            android:title="List Title"
            android:key="list_key"
            android:entries="@array/entries"
            android:defaultValue="second_value"
            android:entryValues="@array/entries_values"/>
        <EditTextPreference 
            android:persistent="true"
            android:title="Edit Text Title"
            android:key="edit_text_key"
            android:defaultValue="Edit Text Value"/>
    </PreferenceCategory>

</PreferenceScreen> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T09:08:48.420

1.你可以在DDMS->File Explorer->data->data->your package->shared_prefs->*_preferences.xml中看到xml文件

2.将“edit_text”/“check_box”/“list”替换为“check_box_key”/“list_key”/“edit_text_key”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-25T21:26:31.053

您的代码的问题是您的密钥与您在首选项 xml 中设置的密钥不对应。例如，在行中：

String editText=prefs.getString("edit_text", "default_edit_text_value");

但是“edit_text”在哪里？

在您的 xml 中，密钥被命名为： android:key="edit_text_key" 所以您应该将“edit_text”替换为“edit_text_key”

# java.util.scanner - 扫描仪故障。没有脚本错误，但控制台给出错误

> ID：14911948
> 
> 赞同：0
> 
> 时间：2013-02-16T15:34:35.930
> 
> 标签：java.util.scanner

我正在做一个个人项目，但我有一个我似乎无法弄清楚的问题。

```
public void setvars() {
    File file = new File("config.txt");

    try {
        Scanner sc = new Scanner(file);

        while(sc.hasNextLine()) {
            //int OESID = sc.nextInt(); this variable isnt used yet.
            String refresh = sc.next();
            sc.close();

            textFieldtest.setText(refresh);
        }
    }
    catch (Exception e) 
    {
        e.printStackTrace();
    }
} 
```

在控制台中它告诉我错误是`while(sc.hasNextLine()) {`我无法弄清楚。任何指针/建议将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T16:08:19.233

问题是您正在关闭扫描仪，而您仍在使用它。

完成后修改您的代码以关闭扫描程序：

```
 while(sc.hasNextLine()) {
        //int OESID = sc.nextInt(); this variable isnt used yet.
        String refresh = sc.next();

        textFieldtest.setText(refresh);
    }
    sc.close(); 
```

每当您处理任何资源时，这可能应该是一种通用模式 - 确保仅在您确定不再需要它时才关闭它。

如果您使用 Java 7，则可以通过使用新的 try-with-resource 功能让您的生活更加轻松，该功能将自动关闭资源：

```
 try(Scanner sc = new Scanner("/Users/sean/IdeaProjects/TestHarness/src/TestHarness.java")) {
        while(sc.hasNextLine()) {
            // do your processing here
        }
    }  // resource will be closed when this block is finished 
```

# sockets - 套接字编程中的多台计算机在一个 ip 上

> ID：14911951
> 
> 赞同：1
> 
> 时间：2013-02-16T15:34:53.093
> 
> 标签：sockets, ip, chat

我正在尝试使用套接字通过 Internet 进行通信。我不知道如何连接到互联网上且具有动态 IP 的计算机。是否可以通过全局 IP 与套接字进行通信？

有时一个全局IP上有多台计算机。我也不知道如何处理这种情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T15:47:58.583

除了不确定动态地址外，连接到动态 IP 与使用静态 IP 几乎相同。为了能够解析动态 IP 地址，您可以：

*   如果是您的机器，您可以订阅[DynDNS](http://www.dyndns.org)或[PeanutHull](http://www.oray.net)等服务，它会为您提供子域 .dyndns.org 并为您处理动态地址更改
*   如果你控制动态IP上的代码，你可以让它先连接到你的固定IP主机

对于多台计算机在路由器后面共享一个 IP 的情况，这些也会有所帮助，您仍然可以让路由器将全局 IP 的端口转发到其后面计算机的端口。在这种情况下，如果路由器后面的本地 IP 发生变化，路由器会为您处理。

正如[Seán Labastille](https://stackoverflow.com/users/1972476/sean-labastille)在评论中所说，还有 NAT 遍历。

# php - 创建带有指向详细信息页面的超链接的项目表

> ID：14911952
> 
> 赞同：0
> 
> 时间：2013-02-16T15:35:08.107
> 
> 标签：php, mysql

我创建了一个 php 页面，其中一个动态表显示来自 mysql 数据库的用户查询数据。我想要的是，当用户从表中选择一行或单击一行的第一列时，他/她应该重定向到该行中该特定项目的详细信息。如何根据点击的条目创建详情页？可以从 mysql 获取详细页面的数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T15:42:07.967

你可以这样做..

```
<table>
<tr>
<th>Item ID</th><th>Name</th><th>Details</th>
</tr>
<tr>
<td><?php echo $id ?></td>
<td><?php echo $name?></td>
<td><a href="details.php?Item_id=<?php echo $id ?>>View</a></td>
</tr>
</table> 
```

在 details.php 页面中使用此代码获取 id

```
$item_id = $_GET["Item_id"]; 
```

并使用项目 id 处理查询，并显示详细信息。

# javascript - Jquery Tools Scrollable onBeforeSeek 函数然后滑动到下一个

> ID：14911955
> 
> 赞同：1
> 
> 时间：2013-02-16T15:35:12.623
> 
> 标签：javascript, jquery, slider, scrollable

我正在尝试实现和自定义一些 jquery 工具可滚动插件的行为。我想要的是*在滑动到下一个项目之前*调用一个函数，*等待函数完成*然后滑动到下一个项目。

我从 api 尝试了**onBeforeSeek**函数，但不幸的是它调用了我想要的函数（如 f.ex.setTimeout）并且不等待它完成，它立即滑到下一个项目。

有人知道如何防止在功能完成之前滑到下一个项目吗？它不必通过 onBeforeSeek 绝对发生，但在我看来还可以，因为它总结了触发 prev/next 的几个事件的结果。

标记：

```
<section>
    <div>
        <dl>
            <dt>titre 1</dt>
            <dd><img src="http://placehold.it/350x150"></dd>
        </dl>
        <dl>
            <dt>titre 2</dt>
            <dd><img src="http://placehold.it/350x150"></dd>
        </dl>
        <dl>
            <dt>titre 3</dt>
            <dd><img src="http://placehold.it/350x150"></dd>
        </dl>
    </div>
</section>

<!-- navigation (cubes)  -->
<div class="navi"></div>
<br style="clear: both;">

<!-- navigation prev/next -->
<a class="prev browse left">prev</a> | <a class="next browse right">next</a> 
```

JS：

```
$('section').css('overflow', 'hidden');

$('section').scrollable({ circular: true }).navigator();

var api = $('section').data("scrollable");//get access to the api functions

api.onBeforeSeek(function(){

    //do something and after this start sliding to the next img

} 
```

[http://jsfiddle.net/micka/zhDGC/](http://jsfiddle.net/micka/zhDGC/)

奇怪的是，在连接到 api 的小提琴中，滑块会断裂......

任何建议都可以提供帮助。谢谢！迈克尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T18:10:03.407

# 编辑

所以，基本上你想要实现的是暂停 onBeforeSeek 事件，做你的事情然后再次触发它。为此，您可以使用一些 jquery 插件（只需 google 搜索“jquery event pause resume”），其中一个可以在[此处](https://stackoverflow.com/q/1809275/)找到。

如果您不想使用任何插件或不想处理事件，您可以使用我在这个[fiddle](http://jsfiddle.net/zhDGC/20/)中的解决方案。它不是冻结然后重新启动事件，而是第一次简单地取消它，执行动画，将动画状态更改为完成，然后再次触发它，但这次没有取消事件。

```
var event_pos_list = [false, false, false];

api.onBeforeSeek(function(event, pos){
    // if the animation is not done - do it and skip the scroll
    if(!event_pos_list[pos]){
        event.preventDefault();
        $('span').animate({marginLeft: (pos*50) + 'px'}, 2000, function(){
            // do the scroll, this time the animation is completed
            event_pos_list[pos] = true;
            api.seekTo(pos);
        });
    }
});
api.onSeek(function(event, pos){
    // after the scroll is done, reset the event_pos_list
    event_pos_list[pos] = false;
}); 
```

希望这可以帮助。

# java - Java：选择已重新绘制的对象

> ID：14911958
> 
> 赞同：-1
> 
> 时间：2013-02-16T15:35:23.247
> 
> 标签：java, swing, jpanel, paintcomponent

我是一名学生，在制作我的一个项目时遇到了麻烦，这只是我最终项目实际情况的一小部分，但我正试图尽可能地将它划分开来。

我遇到的具体问题与创建一个 java 应用程序有关，该应用程序显示一个带有按钮的框架，允许用户在屏幕上创建多个球，然后您可以通过单击它们来选择每个球。

我尝试添加一些小的修改，但没有一个可以工作，我删除了它，以便在找到解决方案时给你更多的自由。

这是`Simulation`类的代码：

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class Simulation {

   int noOfBallClicks = 0;

   Simulation() {
      buildTheGUI();
   }
   JFrame frame = new JFrame();
   JFrame frame2 = new JFrame();
   JPanel panal = new JPanel();
   JButton add = new JButton("add a new object");

   public void buildTheGUI() {
      frame.setVisible(true);
      frame.setSize(500, 500);
      frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
      frame.add(panal);
      panal.add(add);
      add.addActionListener(new ButtonClickHandler());
   }

   public static void main(String[] args) {
      new Simulation();
   }

   class ButtonClickHandler implements ActionListener {

      public void actionPerformed(ActionEvent e) {
         noOfBallClicks = noOfBallClicks++;
         frame.add(new Ball());
         frame.validate();
      }
   }
} 
```

这是`Ball`类的代码：

```
import javax.swing.*;
import java.awt.*;
import java.util.Random;

public class Ball extends JPanel {

   private int x;
   private int y;
   private int w;
   private int h;

   Ball() {
      this.x = 200;
      this.y = 200;
      this.w = 100;
      this.h = 100;
   }

   Ball(int a) {
      Random rand = new Random();
      this.w = 100;
      this.h = 100;
      this.x = rand.nextInt(300);
      this.y = rand.nextInt(300);
   }

   public void paintComponent(Graphics g) {
      super.paintComponent(g);
      g.setColor(Color.RED);
      g.fillOval(x, y, h, w);
   }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T17:25:24.863

> 我遇到的具体问题与创建一个 java 应用程序有关，该应用程序显示一个带有按钮的框架，允许用户在屏幕上创建多个球，然后您可以通过单击它们来选择每个球。
> 
> 我尝试添加一些小的修改，但没有一个可以工作，我删除了它，以便在找到解决方案时给你更多的自由。

你从来没有提到什么是错的/你想要实现什么......除了上面和标题：*选择对象，已经重新绘制*

但是我在给出的代码中看到了一些问题：

`JFrame`1）在所有组件都添加完之前不要设置可见（否则会出现内容不可见等问题）

2）不要调用`setSize`而`JFrame`不是覆盖`getPreferredSize()`和`JPanel`返回`Dimension`适合对象上的图纸`Graphics`和/或使用适当的`LayoutManager`. 比我们可以调用`pack()`而不是`setSize(...)`on `JFrame`。

3) Swing 组件应该通过块在*Event Dispatch Thread上创建和操作。*[阅读 Swing 中的并发](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html)了解更多信息。`SwingUtilities.invokeLater(Runnable r)`

4）当你使用`validate()`它时，应该跟着一个调用`repaint()`来反映所做的更改。

5）您还使用了一个默认`JFrame`布局，`BorderLayout`您向其中添加了一个面板，并且默认情况下，球（使用按钮侦听器）`BorderLayout`将添加到其`BorderLayout.CENTER`上，因此每次调用`JFrame#add(Component c)`您都将旧*球*/替换为`JPanel`另一个。

6)`JPanel`如果 2 `Ball`s 最终处于重叠位置`Ball`，则它会像您一样使用，顶部`JPanel`将覆盖底部`Ball`......您需要一个透明面板，即`JComponent#setOpaque(false)`.

7）当我做*自定义绘画*时，我很少使用`JComponent`或其扩展。我宁愿创建一个*虚拟表示*我需要绘制/显示的内容或其他内容（可能是个人喜好）`Object`。这些对象将在 my中可视化，它将调用它们的方法，将对象传递给每个对象，然后根据字段数据绘制自己。*`JPanel` `paintComponent(..)``draw(..)``Graphics``JPanel``Ball`*

 *这是我制作的一个简短示例（考虑到上述内容）：

所有绿色`balls`都被选中，即点击，而红色没有。

![在此处输入图像描述](../Images/8e92d5039b3ed6ec4f3d6991c791cc7b.png)

```
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Dimension;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.RenderingHints;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;
import java.awt.geom.Rectangle2D;
import java.util.ArrayList;
import java.util.Random;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.JTextArea;
import javax.swing.SwingUtilities;

public class Test {

    public Test() {
        JFrame frame = new JFrame();
        frame.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);

        final DrawPanel drawPanel = new DrawPanel();

        drawPanel.addMouseListener(new MouseAdapter() {
            @Override
            public void mouseClicked(MouseEvent me) {
                super.mouseClicked(me);
                for (Ball b : drawPanel.getBalls()) {//iterate through each ball
                    if (b.getBounds().contains(me.getPoint())) {//get the ball bounds and check if mouse click was within its bounds
                        if (!b.isSelected()) {//check if ball has been clicked on
                            b.setSelected(true);
                        } else {
                            b.setSelected(false);
                        }
                        drawPanel.repaint();//so ball color change will be shown
                    }
                }

            }
        });

        JPanel controlPanel = new JPanel();

        JButton createBallButton = new JButton("Add ball");
        createBallButton.addActionListener(new ActionListener() {
            Random rand = new Random();
            private int counter = 1;

            public void actionPerformed(ActionEvent e) {

                int ballRadius = 10;
                int x = rand.nextInt(drawPanel.getWidth());
                int y = rand.nextInt(drawPanel.getHeight());

                //check that we dont go offscreen by subtarcting its radius unless its x and y are not bigger than radius
                if (y > ballRadius) {
                    y -= ballRadius;
                }
                if (x > ballRadius) {
                    x -= ballRadius;
                }

                drawPanel.addBall(new Ball(x, y, ballRadius, counter));//add ball to panel to be drawn
                counter++;//increase the ball number
            }
        });

        final JTextArea jtf = new JTextArea(5, 10);
        jtf.setEditable(false);
        JButton printSelectedBallButton = new JButton("Print selected balls");
        printSelectedBallButton.addActionListener(new ActionListener() {
            Random rand = new Random();
            private int counter = 1;

            public void actionPerformed(ActionEvent e) {
                jtf.setText("");
                for (Ball b : drawPanel.getBalls()) {
                    if (b.isSelected()) {
                        jtf.append("Selected: " + b.getNumber() + "\n");
                    }
                }

            }
        });

        controlPanel.add(createBallButton);
        controlPanel.add(printSelectedBallButton);
        JScrollPane jsp = new JScrollPane(jtf);
        controlPanel.add(jsp);

        frame.add(drawPanel);
        frame.add(controlPanel, BorderLayout.SOUTH);

        frame.pack();
        frame.setVisible(true);

    }

    public static void main(String args[]) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                new Test();
            }
        });
    }
}

class DrawPanel extends JPanel {

    ArrayList<Ball> balls = new ArrayList<>();

    public void addBall(Ball b) {
        balls.add(b);
        repaint();
    }

    public ArrayList<Ball> getBalls() {
        return balls;
    }

    @Override
    protected void paintComponent(Graphics grphcs) {
        super.paintComponent(grphcs);
        Graphics2D g2d = (Graphics2D) grphcs;
        g2d.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);
        for (Ball ball : balls) {
            ball.draw(g2d);
        }
    }

    @Override
    public Dimension getPreferredSize() {
        return new Dimension(300, 300);
    }
}

class Ball {

    private Color color;
    private int x, y;
    private int radius;
    private final int number;
    private boolean selected;

    Ball(int x, int y, int radius, int counter) {
        this.x = x;
        this.y = y;
        this.radius = radius;
        this.number = counter;
        selected = false;
        this.color = Color.RED;//default color of unselected ball
    }

    public void draw(Graphics2D g2d) {
        Color prevColor = g2d.getColor();
        g2d.drawString(number + "", x + radius, y + radius);//draw the number of ball
        g2d.setColor(color);
        g2d.fillOval(x, y, radius, radius);
        g2d.setColor(prevColor);
    }

    public Rectangle2D getBounds() {
        return new Rectangle2D.Double(x, y, radius, radius);
    }

    public void setSelected(boolean selected) {
        this.selected = selected;
        if (selected) {
            color = Color.GREEN;
        } else {
            color = Color.RED;
        }
    }

    boolean isSelected() {
        return selected;
    }

    int getNumber() {
        return number;
    }
} 
```*

# php - ZF2 何时使用 getServiceLocator() 何时不使用

> ID：14911965
> 
> 赞同：9
> 
> 时间：2013-02-16T15:36:11.963
> 
> 标签：php, frameworks, zend-framework2, service-locator

我真的很困惑何时使用 getServiceLocator 以及何时不使用。举个例子：

```
+ Module
-+ Helloworld
--+ src
---+ Controller
----+ IndexController.php
----+ IndexControllerFactory.php

---+ Service
----+ LogginService.php
----+ GreetingService.php
----+ GreetingServiceFactory.php 
```

GreetingServiceFactory.php 内容如下：

```
<?php
namespace Helloworld\Service;

use Zend\ServiceManager\FactoryInterface;
use Zend\ServiceManager\ServiceLocatorInterface;

class GreetingServiceFactory implements FactoryInterface
{

    public function createService (ServiceLocatorInterface $serviceLocator)
    {
        $greetingService = new GreetingService();

        $greetingService->setEventManager($serviceLocator->get('eventManager'));

        $loggingService = $serviceLocator->get('loggingService');

        $greetingService->getEventManager()->attach('getGreeting', array(
            $loggingService,
            'onGetGreeting'
        ));

        return $greetingService;
    }
} 
```

IndexControllerFactory.php 的内容如下：

```
<?php
namespace Helloworld\Controller;

use Zend\ServiceManager\FactoryInterface;
use Zend\ServiceManager\ServiceLocatorInterface;

class IndexControllerFactory implements FactoryInterface
{

    public function createService (ServiceLocatorInterface $serviceLocator)
    {
        $ctr = new IndexController();

        $ctr->setGreetingService($serviceLocator->getServiceLocator()
            ->get('greetingService'));
        return $ctr;
    }
} 
```

如您所见，我在 ControllerFactory 中需要 $serviceLocator->getServiceLocator() 而在 ServiceFactory 中不需要。为什么？两者都使用相同的接口 ServiceLocatorInterface，它甚至没有定义 getServiceLocator() 方法。

模块.config.php：

```
'controllers' => array(
    'factories' => array(
        'Helloworld\Controller\Index' => 'Helloworld\Controller\IndexControllerFactory'
    )
)
,
'service_manager' => array(
    'invokables' => array(
        'loggingService' => 'Helloworld\Service\LoggingService'
    ),
    'factories' => array(
        'greetingService'=> 'Helloworld\Service\GreetingServiceFactory'
    ),
) 
```

我会很感激任何澄清:)

祝你今天过得愉快！

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-02-16T21:11:09.243

该方法`getServiceLocator`是在 上定义的[`AbstractPluginManager`](https://github.com/zendframework/zf2/blob/release-2.1.1/library/Zend/ServiceManager/AbstractPluginManager.php#L142-L150)，因为它实现了[`ServiceLocatorAwareInterface`](https://github.com/zendframework/zf2/blob/release-2.1.1/library/Zend/ServiceManager/ServiceLocatorAwareInterface.php). 正如 Maks3w 指出的那样，它不是 的一部分[`ServiceLocatorInterface`](https://github.com/zendframework/zf2/blob/release-2.1.1/library/Zend/ServiceManager/ServiceLocatorInterface.php)，因此在实现服务工厂时避免使用它。

无论如何，您都可以将您的工厂定义为闭包并仍然使用它：

```
class MyModule
{
    public function getControllerConfig()
    {
        return array(
            'factories' => array(
                'IndexController' => function (
                    \Zend\ServiceManager\AbstractPluginManager $pm
                ) {
                    $ctr = new IndexController();

                    $ctr->setGreetingService(
                        $pm
                            ->getServiceLocator()
                            ->get('greetingService')
                    );

                    return $ctr;
                },
            ),
        );
    }
} 
```

虽然在此示例`$pm`中确实是一个`ServiceLocatorInterface`实例，但您仍需要获取对“主”服务管理器的引用才能访问`'greetingService'`.

ZF2 对控制器、服务、视图助手、控制器插件等使用不同的服务管理器或插件管理器......主要用于类型提示（查看接口`AbstractPluginManager`以了解如何实现类型严格性）和安全性。

在这种情况下，安全问题是不允许访问非控制器的服务，尤其是带有动态`controller`参数的路由。这就是为什么控制器被保存在一个单独的插件管理器中的原因。

由于控制器插件管理器是从“主”服务管理器创建的，因此它也通过`ServiceLocatorAwareInterface`.

为了更清楚地说明这一点，我添加了关系图（不包括工厂并且不将其视为有效的 UML）：

![伪UML](../Images/8566b40c1d2aa45ba31ec40b1611ee64.png)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-17T11:28:16.490

> 如您所见，我在 ControllerFactory 中需要 $serviceLocator->getServiceLocator() 而在 ServiceFactory 中不需要。为什么？

控制器工厂由与主服务管理器实例（“ControllerLoader”）不同的服务管理器实例调用。这样调度程序就不会导致主服务管理器实例化任意类。

因此，当您想要检索“greetingService”时，控制器工厂的 $serviceLocator 不是您需要的，因为“greetingService”已在主服务管理器中注册。要从控制器中获取主服务器管理器，请使用 getServiceLocator() 并且您现在有一个主服务管理器的实例，您可以从中获取（）“问候服务”

这被称为“对等互连”。即，“ControllerLoader”服务管理器（通过配置中的“控制器”键或模块类中的 getControllerConfiguration() 配置的服务管理器）与主服务管理器一起设置为对等点。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-16T15:45:04.963

拒绝你不应该使用`getServiceLocator`，因为该方法没有定义，`ServiceLocatorInterface`而是使用`get()`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-09T20:30:01.750

我提供这个作为使用基本 module.config.php 设置的替代方案

现在我正在做类似的事情，但使用类似的东西。

```
class BaseServices extends AbstractActionController
implements ServiceLocatorAwareInterface{
    ...
  public function setServiceLocator(ServiceLocatorInterface $serviceLocator){
        if($serviceLocator instanceof ControllerManager){
          $this->service_locator = $serviceLocator->getServiceLocator();

          $this->entities_service = $this->service_locator
            ->get('entities_service');

          $this->session = new Session(array(
            'entities_service'=>$this->entities_service,
            'service_locator'=>$this->service_locator,
          ));
          return $this;
        }
      }
  }
...
} 
```

现在让我难过的事情是不得不意识到我只需要使用在扩展此类的任何控制器的实例化过程中使用的第一个服务定位器......

在实例化时：这个类首先得到一个 ControllerManager，然后是 setServiceLocator 方法的 ServiceManager。

我只想使用 ControllerManger 及其方法让 ServiceManager 实例化我的工厂；

我的 module.config.php 的部分内容

```
module.config.php
{
...
'service_manager' =>
  'abstract_factories' => array(
    'Zend\Log\LoggerAbstractServiceFactory',
   ),
  'factories' => array(
       'entities_service' => 'Service\Providers\Entities',
  ),
   'invokables' => array(
     'post'      => 'Service\Controllers\Runtime\Post',
    ),
  ),
} 
```

现在我可以使用类似下面的东西来过滤正确的 ServiceLocator ......但我喜欢使用尽可能少的样板......

```
interface AbstractFactoryInterface
{
  public function canCreateServiceWithName(ServiceLocatorInterface $serviceLocator, $name, $requestedName);

  public function createServiceWithName(ServiceLocatorInterface $serviceLocator, $name, $requestedName);
} 
```

# c - 字符串和函数的多维数组

> ID：14911967
> 
> 赞同：2
> 
> 时间：2013-02-16T15:36:29.533
> 
> 标签：c, arrays, string, multidimensional-array

在 C...

假设我有一个这样的多维字符串数组：

```
//Array declared in main. Will Contains strings from user-input later on
char myArray[10][10]; 
```

为什么我不能将数组传递给这个函数

```
//Function prototype:
void myFunc (char *mynewArray[]);

// Function call in main()
myFunc(myArray); 
```

我对数组和指针的理解是当我调用 myFunc 时，我将数组的地址传递过来。接收函数接收该地址作为指针存储。然后我应该能够访问 myFunc 中的 mynewArray[1]。然而它不起作用？

我是否错误地理解了数组和指针？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T15:38:40.653

```
void myFunc (char *mynewArray[]); 
```

在 C 中等价于：

```
void myFunc (char **mynewArray); 
```

但你数组的值是`char (*)[10]`.

你需要有类似的东西：

```
void myFunc (char (*mynewArray)[10]); 
```

或其等价物

```
void myFunc (char mynewArray[][10]); 
```

记住：

1.  数组的值是指向其第一个元素的指针（数组对象被*转换*为指针）
2.  在函数声明中，类型数组的参数`T`被*调整*为指向的类型指针`T`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T16:07:59.017

以下是有关如何阅读 C 声明的提示：

1.  查找标识符名称
2.  向右看
3.  看左边

必须用括号修改以供参考，但它可以广泛应用。

当你看到 [ 说“一个数组”

当你看到（说“一个功能”

例如：`char *mynewArray[]`

(name) mynewArray 是（向右看）一个指向 char 的（向左看）指针数组。

接下来：`char myArray[10][10];`

myArray 是一个由 10 个 10 个字符组成的数组。

有什么区别？

如果你增加`mynewArray`地址将改变一个指向 char 的指针的大小。

如果您增加`myArray`地址将改变 10 个字符的大小。

这就是为什么它们是不同的。

在函数原型中，最左边的集合`[]`应该是空的（或被替换`*`），后续的集合`[]`应该有一个大小。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T16:44:50.437

这是一个如此常见的问题，以至于`comp.lang.c`新闻组多年来一直专门针对这个问题提供一个常见问题解答条目：[那么 C 中的“指针和数组等价”是什么意思？](http://c-faq.com/aryptr/aryptrequiv.html)

TL;DR：*指针算术*和*数组索引*是等价的。因此，即使它们不同（数组分配存储，指针仅引用内存地址），指针也可用于访问数组元素或模拟数组。

标准说：

> 对出现在表达式中的数组 T 类型对象的引用衰减（除了三个例外）成指向其第一个元素的指针；结果指针的类型是指向 T 的指针。

例外情况是数组是`sizeof`or`&`运算符的操作数。

* * *

这意味着在您的代码中，`myArray`等同于`&myArray[0]`. 的类型`& myArray[0]`是`char *[10]`。这与它们的内存布局不同`char **`，甚至不同。`char *[]`因此编译器拒绝转换（这是无效的）。

混乱来自一维数组。即使是类型不同`char *`，`char []`并且`char [10]`不同（它们具有不同的内存布局），如果您定义两种数组类型的变量，它们将衰减为等价于`&a[0]`type `char *`。

# azure - Windows Azure 帐户的多个管理员

> ID：14911971
> 
> 赞同：14
> 
> 时间：2013-02-16T15:36:53.167
> 
> 标签：azure

我读到您可以订阅 Windows Azure 的共同管理员，但我可以为同一个帐户拥有多个管理员吗？我需要多个管理员，以便他们在需要时也可以订阅

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-16T17:34:49.747

在 Azure 管理控制台 ( [http://manage.windowsazure.com](http://manage.windowsazure.com) ) 中，单击页面顶部的“订阅”，然后在下拉菜单中点击“管理管理员”：

![管理管理员](../Images/8a96cbf887823d74455d56783deb92f9.png)

这将允许您添加/编辑/删除一个或多个管理员到您的订阅。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-03-28T14:02:50.860

您可以有 1 名帐户管理员和 1 名服务管理员，但每个订阅可以有 200 名共同管理员。

[http://msdn.microsoft.com/en-us/library/windowsazure/hh531793.aspx#BKMK_HowToAccess](http://msdn.microsoft.com/en-us/library/windowsazure/hh531793.aspx#BKMK_HowToAccess)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-05-05T19:39:13.193

在新版本的门户中，您必须遵循以下路径：

左侧导航面板 > 更多服务 > 订阅 > 选择您的订阅 > IAM（访问控制）> 添加

# extjs - sencha touch 2 - Store - [WARN][Ext.dataview.NestedList#applyStore] The specified Store cannot be found

> ID：14911973
> 
> 赞同：0
> 
> 时间：2013-02-16T15:36:59.490
> 
> 标签：extjs, sencha-touch-2

I'm working on small json example and I'm getting the error

```
[WARN][Ext.dataview.NestedList#applyStore] The specified Store cannot be found " 
```

when i try to access store from nested list

**> here is the code for Store**

```
 Ext.define('kids.store.vids',{
    extend: 'Ext.data.Model',
    xtype: 'vids',
    config: {
        type: 'tree',
        fields: ['id' , 'title' ],
        root: { leaf: false },
        proxy:{
            type: 'ajax',
            url: 'resources/jsonfile/jsonfile.json',
            reader: {
                type: 'json',
                rootProperty: 'items.feed.Lang.Type'
            }
        },
        autoLoad: true
    }
}); 
```

**

> **View**

```
Ext.define('kids.view.VidList',{
    extend: 'Ext.Container',
    xtype: 'vidlist',
    fullscreen: true,
    requires: [
        'Ext.NestedList',
        'Ext.tab.Panel',
        'Ext.data.*',
        'kids.store.vids',
        'Ext.data.TreeStore',
        'Ext.dataview.NestedList',
    ],
    config: {
        items: [
            {
                xtype: 'nestedlist',
                title: 'video list from model vids',
                displayField: 'title',
                layout: 'vbox',
                store: 'vids',
            }
        ]
    }
}); 
```

Am i doing anything wrong here?

I've added stores, views in app.js

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T16:34:06.583

When declaring your store, use storeId instead of xtype to identify the store:

```
Ext.define('kids.store.vids',{
    extend: 'Ext.data.Model',
    config: {
        storeId: 'vids', // use this as the value of the 'store' property in your list
        type: 'tree',
        fields: ['id' , 'title' ],
        root: { leaf: false },
        proxy:{
            type: 'ajax',
            url: 'resources/jsonfile/jsonfile.json',
            reader: {
                type: 'json',
                rootProperty: 'items.feed.Lang.Type'
            }
        },
        autoLoad: true
    }
}); 
```

# ruby-on-rails - 将枚举值存储在 ActiveRecord 中并转换为字符串以进行显示的最佳方法

> ID：14911977
> 
> 赞同：13
> 
> 时间：2013-02-16T15:37:43.567
> 
> 标签：ruby-on-rails, rails-activerecord

我试图找出将枚举值存储在 activerecord 中但将其转换为“标题”以在应用程序中显示的最佳方法是什么。

IE

审查枚举：

```
UNREVIEWED = {:title => "Unreviewed", :name => "UNREVIEWED"}
REVIEWED = {:title => "Reviewed", :name => "REVIEWED"}
FLAGGED = {:title => "Flagged as inappropriate", :name => "FLAGGED"} 
```

因此，在 java 领域，我习惯于在数据库中存储 ENUMs 名称，即（REVIEWED），然后将该名称转换为服务器上的实际枚举，以便我可以在其上调用辅助方法，即：

```
review = Review.valueOf(review)
review.title() 
```

我可以在rails中做类似的事情来完成这个吗？

仅供参考，我们正在努力保持我们的应用程序超级小，所以如果我可以在没有 GEM 的情况下轻松完成此任务或类似的事情，那就太好了。

任何“标准”方式来做到这一点，因为我想我不是第一个与这个问题作斗争的人？

谢谢！

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2014-01-13T07:18:09.683

ActiveRecord 枚举是最好的方法，因为它是框架的一部分（从 4.1 版开始）。

它的用法很简单：

**迁移**：

```
class AddEnumToMyModel < ActiveRecord::Migration
  def change
    add_column :my_model, :status, :integer, default: 0
  end
end 
```

**模型：**

```
class MyModel < ActiveRecord::Base
  enum status: [:draft, :beta, :public]
end 
```

然后随意使用它：

```
MyModel.draft # gets all drafts
MyModel.last.draft? # checks if the last model is draft
MyModel.last.status # gets the string description of the status of my model 
```

有关模式信息，请参阅[文档](http://edgeapi.rubyonrails.org/classes/ActiveRecord/Enum.html)。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-16T18:57:18.970

关于这个问题有很多帖子，我想这指向其中的大多数：[http ://thinkinginrails.com/2010/04/using-enums-for-constants/](http://thinkinginrails.com/2010/04/using-enums-for-constants/)

我认为这是一个过度设计的东西，你不需要像 ruby​​ 这样的动态类型语言。

只需使用字符串！

然后你可以使用它：

```
class Review < ActiveRecord::Base
  validates_inclusion_of :status, :in => ["UNREVIEWED", "REVIEWED", "FLAGGED"]
  def status
    read_attribute(:status)
  end
  def status= (value)
    write_attribute(:status, value)
  end
end 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-04-01T15:04:48.213

使用@Godsaur 示例。

```
class MyModel < ActiveRecord::Base
  enum status: [:draft, :beta, :public]
end 
```

您可以将字符串值获取为：

```
MyModel.last.status
=> "beta" 
```

但如果你想要一个“标题”，你可以：

```
MyModel.last.status.titleize
=> "Beta" 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-09-18T01:56:33.397

虽然我同意@Godsaur 的答案是正确的——但我个人不喜欢存储整数值来表示有意义的字符串等价物的方法（前提是建立了足够的数据库索引和/或在数据库引擎中查询字符串的成本类似于查询整数）。

我的方法通常是将文本值存储在数据库中（以便于理解数据库记录）。

### my_model.rb

```
class MyModel < ActiveRecord::Base

  STATUSES = HashWithIndifferentAccess.new({unverified: 'unverified', reviewed: 'reviewed', flagged: 'flagged'})
  #the text values are similar to their symbols key
  #you could also define additional attributes for each key if needed. Ex:
  #STATUSES = {unverified: {title: 'Unverified Text Title', txt: 'unverified'}, ...}

  # assuming a 'status' field
  scope :unverified, -> { where(status: STATUSES[:unverified]) }

  def unverified?
    status == STATUSES[:unverified]
  end

  # Or
  STATUSES.each do |sym, val|
    define_method("#{sym}?") {status == val}
  end
end 
```

### my_view.erb

```
<%= MyModel::STATUSES[@my_model.status] %> or 
<%= MyModel::STATUSES[@my_model.status].title %> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-04-29T22:24:22.313

我同意@tamersalama。这是一种使用数据库中的字符串和自定义 Enum 类的简单方法。请注意，这也支持在下拉菜单中使用人类可读的名称。

[https://gist.github.com/alexch/a7be54e1b085718473ff](https://gist.github.com/alexch/a7be54e1b085718473ff)

SQL：

```
Table name: snacks
 id                         :integer
 ice_cream                  :string 
```

导轨：

```
class Snack < ActiveRecord::Base
  FLAVORS = Enum.new [
      [:vanilla, "Vanilla"],
      [:chocolate, "Chocolate"],
      [:rocky_road, "Rocky Road"]
      ])
  ]
end 
```

HTML：

```
<%= simple_form_for @snack do |f| %>
<%= f.collection_select :ice_cream, Snack::FLAVORS, :value, :label %>
<% end %> 
```

# mysql - Mysql空间内三角奇怪结果

> ID：14911979
> 
> 赞同：1
> 
> 时间：2013-02-16T15:37:52.300
> 
> 标签：mysql, spatial

我对空间数据库的东西很陌生，不明白这个结果：

```
mysql> select astext(LOC), Within(LOC, GeomFromText('Polygon((1 1,20 1,1 20,1 1))') ) FROM events;
+--------------+------------------------------------------------------------+
| astext(LOC)  | Within(LOC, GeomFromText('Polygon((1 1,20 1,1 20,1 1))') ) |
+--------------+------------------------------------------------------------+
| POINT(10 5)  |                                                          1 |
| POINT(20 20) |                                                          1 |
| POINT(30 30) |                                                          0 |
+--------------+------------------------------------------------------------+
3 rows in set (0.00 sec) 
```

我想我查询的是直角三角形 1,1 20,1 1,20 的内容，因此我希望 20,20 不会在其中。我没有做对吗？

干杯! 网卡

# jquery - jQuery UI 显示盲排问题

> ID：14911981
> 
> 赞同：0
> 
> 时间：2013-02-16T15:37:56.270
> 
> 标签：jquery, jquery-ui, button, jquery-hover

我在尝试应用动画的按钮时遇到问题。

我试图创建的效果是，带有白色边框和透明背景的按钮在从左到右悬停时填充白色背景颜色，并在用户鼠标熄灭时从左到右再次清除。同时字体颜色也变为可读颜色。

为了实现这一点，我有一个 div，其中有两个 a，它们彼此重叠。为什么有两个a元素？因此，用户可以单击顶部/显示的任何一个。

HTML：

```
<div class="block-button"> <a href="#" class="first">Click me</a>
<a href="#" class="second"></a> 
```

CSS

```
.block-button .first {
z-index: 8;
color: #fff;
}

.block-button .second {
z-index: 7;
background-color: white; 
```

}

jQuery

```
 //Buttons
$("a.second").hide();
$(".block-button").each(function () {
    $(this).hover(function (e) {
        $(this).find("a.second").show("blind", {
            direction: "left",
            easing: 'easeOutCubic'
        },500, function () {
           //Callback
        });
    }, function (e) {
        $(this).find("a.second").hide("blind", {
            direction: "right",
            easing: 'easeOutCubic'
        }, 500, function () {
            //Callback
        });
    });
}); 
```

我在处理盲动画排队时遇到了麻烦。通常我会用 jQuery.stop() 解决这个问题，但目前它不能正常工作。

当我禁用停止时，所有动画自然会堆叠起来，因此持续悬停/取消悬停会使动画一遍又一遍地重复。

但是，当我启用停止时，当您在元素仍在动画时再次输入元素时（在动画函数中使用高持续时间时可以清楚地看到这一点），最后一个动画不会被正确调用。

这有点难以解释，但我认为这些 jFiddles 让这些非常清楚。

停止启用：[jsFiddle here](http://jsfiddle.net/g4JPz/4/)

停止禁用：[这里的 jsFiddle](http://jsfiddle.net/g4JPz/1/)

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T14:52:47.577

我使用蒂姆在他的回答中建议的技术达到了我想要的效果。动画背景跨度的宽度似乎可以解决问题！

Javascript：

```
$('a.btn-pretty').hover(function(e) {
$(this).children('span.background').stop().animate({
    'width': $(this).width()
}, 300,function(){
    $('span.background').css({'right':'0','left':'auto'});   
});
}, function(e) {
$(this).children('span.background').stop().animate({
    'width': 0
}, 300,function(){
     $('span.background').css({'left':'0','right':'auto'}); 
});
}); 
```

你可以在[这里看到 jsFiddle](http://jsfiddle.net/g4JPz/10/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T14:06:07.217

你对自己太苛刻了。您所要做的就是重叠两个元素；背景和前景。通过更改背景的大小，您可以为按钮设置动画。

我完全重写了它。[看看我的小提琴](http://jsfiddle.net/g4JPz/7/)。

使用`position: absolute;`和`position: relative;`我已经重叠了这两个元素。如果您想使用具有不同文本的多个按钮，则会保留动态宽度。

因为我正在使用该方法更改`width`悬停，似乎确实可以正常工作。`animate()``stop()`

# visual-studio - 防止一个目录的所有文件上传到svn仓库

> ID：14911984
> 
> 赞同：0
> 
> 时间：2013-02-16T15:38:15.787
> 
> 标签：visual-studio, svn, ankhsvn

我刚刚在 Visual Studio 2012 中安装了 AnkhSVN 插件，并在 assembla 上创建了一个免费存储库。

我会成功地将一个项目添加到我的 subversion 存储库中。
但我希望一些目录不要上传到存储库，比如我的`Elmah`日志（即在`xml`）和我存储数据的目录。

我尝试添加具有以下详细信息的颠覆属性（右键单击-> 颠覆-> 颠覆属性然后添加）

```
Property Name: svn:ignore  
Pattern: * 
```

但是这些文件夹中的所有新文件或更改的文件都会在提交时更新到存储库。

请帮助我如何防止目录的所有文件完全上传到svn存储库..??

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T15:51:38.017

如果文件已经在版本控制下，添加 a`svn:ignore`将无济于事。请参阅有关该主题的此[常见问题解答](http://subversion.apache.org/faq.html#ignore-commit)。

如果要忽略目录中的所有文件，请在父目录中添加子目录`svn:ignore`的名称。如果它用于特定文件或模式，请`svn:ignore`按名称添加该文件，或使用 glob（如`*.log`所有`.log`文件）。

对于那些现在在版本控制下你想从提交中删除的文件，你需要从 Subversion 中删除它们，然后添加`svn:ignore`属性。

# installation - 有没有办法从 installanywhere 安装结束时启动自述文件？

> ID：14911986
> 
> 赞同：0
> 
> 时间：2013-02-16T15:38:23.153
> 
> 标签：installation, installanywhere

有没有办法从 installanywhere 安装结束时启动自述文件？

我知道在安装盾牌中，有时会有一个“运行程序”或查看自述文件的复选框。”可以安装在任何地方做同样的事情吗？

格雷

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T17:21:42.513

在企业版（我无权访问标准版安装）中，有几个选择。

第一个是类似于“运行程序”的动作，称为“执行命令”。你给它一个命令行，它就会执行那个命令行。这可以是当前安装的任何程序，包括安装程序中包含的可执行文件。

“执行命令”的挑战在于，如果您*使用的是*InstallAnywhere，那么您可能针对的是多个安装平台。这是一个罕见的跨平台兼容的命令行。

另一种操作是“启动默认浏览器”。在这种情况下，您可以从您的安装中选择一个文件（即，您的自述文件），或者您输入一个 URL（也许您是从网站上提取自述文件）。执行此操作时，指示的文件或 URL 将加载到浏览器实例中。

此操作也可能不是跨平台兼容的。当您的安装目标是非 GUI *nix 平台时，浏览器可能不可用。例如，一个 *nix 服务器通常没有安装 X，在这种情况下，不会有一个“真正的”浏览器（你可能有`links`，`linx`或其他一些基于文本的浏览器，但这些不能保证可用，甚至可能无法与“启动默认浏览器”操作一起使用——我从未尝试过它们）。

因此，您最好的解决方案是这两个操作的组合，按规则分为 GUI 模式和控制台模式安装路径。

首先添加一个“启动默认浏览器”操作，其中包含一个检查当前模式是否为 GUI 的规则（使用“比较 InstallAnywhere 变量” where `$INSTALLER_UI$ equals GUI`）。“已安装文件”或“其他 URL”将是您的自述文件。

接下来添加一个带有规则的“执行命令”操作，该规则检查当前模式是否为控制台（与上面相同的规则，其中`$INSTALLER_UI$ equals CONSOLE`）。命令行值将使用“ `more`”命令，其参数是文本自述文件的路径。

这应该可以让您到达您想去的地方，同时仍然支持多个平台。

FWIW，所有这些信息都在 InstallAnywhere 文档中进行了详细说明，可从此链接免费获得：http: [//support.flexerasoftware.com/doc/List.aspx ?m=installation&pid=0000000000000019&pn=InstallAnywhere](http://support.flexerasoftware.com/doc/List.aspx?m=installation&pid=0000000000000019&pn=InstallAnywhere)

# java - 尝试从 ActivityManager.RunningTaskInfo 获取正在运行的应用程序图标时出错

> ID：14911993
> 
> 赞同：0
> 
> 时间：2013-02-16T15:39:38.590
> 
> 标签：java, android, android-listview, android-package-managers, activity-manager

我正在尝试制作一个在自定义列表视图中显示正在运行的应用程序图标的应用程序，并在单击图标时切换到相应的应用程序。我想我应该使用“ActivityManager.RunningTaskinfo”、“PackageManager”和“intent”来实现它，所以我正在尝试..但我的代码出错了..我在“ *topActivity* ”上出错了我该如何解决这个错误? 以及如何使用“ *Drawable[] images = new Drawable[packs.size()];* ”在自定义列表视图中显示“ *rtid* ”，这是我从自定义列表视图中的 activitymanager 和 packagemanager 获得的图标；

 *```
ActivityManager am = (ActivityManager) this.getSystemService(ACTIVITY_SERVICE);
List<ActivityManager.RunningTaskInfo> tasks = am.getRunningTasks(100);
ApplicationInfo appInfo = getPackageManager().getApplicationInfo(tasks.topActivity.getPackageName(), 0);
Drawable rtid = getPackageManager().getApplicationIcon(appInfo); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T00:24:35.797

我想你可以简单一点。

```
ActivityManager am = (ActivityManager) this.getSystemService(ACTIVITY_SERVICE);
List<ActivityManager.RunningTaskInfo> tasks = am.getRunningTasks(100);
List <Drawable> applicationDrawables = new ArrayList <Drawable>();
PackageManager pacMgr = getPackageManager();

  for (ActivityManager.RunningTaskInfo runningTask: tasks)
  {
    try {
      applicationDrawables.add (pacMgr.getApplicationIcon(runningTask.topActivity.getPackageName()));
    } catch (NameNotFoundException e) {
      e.printStackTrace();
    }
  } 
```

您的主要问题是您试图获得`topActivity`一个`List`而不是一个`RunningTaskInfo`包裹。

至于显示 Drawable，您可能必须[创建自己的自定义适配器](http://www.vogella.com/articles/AndroidListView/article.html#adapterown_custom)，这并不难。*

# java - 如何在不更改 jTable 的默认列名的情况下将 ResultSet 数据添加到 JTable

> ID：14911995
> 
> 赞同：0
> 
> 时间：2013-02-16T15:39:39.097
> 
> 标签：java, swing, jtable, resultset

我有以下课程：

```
public class customer_master extends javax.swing.JInternalFrame {

    Connection con = null;
    PreparedStatement ps = null;
    ResultSet rs = null;

    JFrame parent;
    public customer_master(JFrame parent) {

        this.parent=parent;
        initComponents();

        try {
            String qry="select customer_code, customer_name, customer_address, customer_created_time from customer";
            database.JavaConnect jc= new JavaConnect(); 
            con = jc.ConnectDB();
            ps = con.prepareStatement(qry);
            rs = ps.executeQuery();
            jTable1.setModel(DbUtils.resultSetToTableModel(rs));
            con.close();
        }
        catch(SQLException e)
        {
            JOptionPane.showMessageDialog(null, e);
        }
    }    
} 
```

它还更改了列的名称，但如果有人可以提供帮助，我想在不更改列名称的情况下添加 rs。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T16:11:57.810

您的问题意味着您正在使用新的 ResultSet 重新刷新和现有 JTable。因此，当您第一次创建 JTable 并为您需要添加的每一列分配名称时：

```
JTable table = new JTable(...);
table.setAutoCreateColumnsFromModel( false ); 
```

这将告诉表不要重新创建 TableColumnModel，因此所有列和自定义渲染器和编辑器都将保留。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-05-28T10:12:04.107

只需更改您的查询

> String qry="select customer_code, customer_name, customer_address, customer_created_time from customer";

到

> String qry="select customer_code ***AS Customer Code*** , customer_name ***AS Customer Name*** , customer_address ***AS Customer Address*** , customer_created_time ***AS DOJ*** from customer";

你会很高兴的。

# c++ - 为什么指向已释放内存的引用有效？

> ID：14911997
> 
> 赞同：1
> 
> 时间：2013-02-16T15:39:46.113
> 
> 标签：c++

我试过下面的C++代码

```
#include <iostream>
using namespace std;

int main()
{
    int *p = new int;
    *p = 10;
    int &a = *p;
    delete p;
    a = 20;
    cout<<a<<" ";
    cout<<*p;
    return 0;
} 
```

并得到输出：20 20

我认为这可能会由于访问释放的内存或一些垃圾而导致运行时错误。可能我得到了这个输出，因为程序释放的内存位置到目前为止可能还没有使用，所以仍然保留旧值。

所以我认为如果我不使用引用也应该发生

```
#include <iostream>
using namespace std;

int main()
{
    int *p = new int;
    *p = 10;
//  int &a = *p;
    delete p;
//  a = 20;
//  cout<<a;
    cout<<*p;
    return 0;
} 
```

但在这种情况下，我得到的输出为 0（通过多次运行检查）。Reference 是否与不同的输出有关？

编译器：gcc 版本 4.7.2 (Ubuntu/Linaro 4.7.2-2ubuntu1)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T15:45:48.310

您正在取消引用已释放的内存。这是未定义的行为。无法保证结果会是什么。碰巧结合编译器、操作系统和 C++ 库，程序似乎可以工作。

This is one possible outcome of undefined behaviour.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T15:57:17.890

Dereferencing `delete`-d memory is **undefined behaviour** and there's no point figuring out some *patterns* as switching to another compiler or another release of the same compile could break it.

`delete` calls destructors of *non-primitive* types. If you have a `class Integer` wrapper that clears the content when destroyed, you'll see some difference. On *primitive* types, `delete` does not re-initialize the space released. Therefore you might see the original value retained **but this is not guaranteed to work at all and you should never rely on it.**

# c++ - c++ COUT 运算符优先级

> ID：14911998
> 
> 赞同：1
> 
> 时间：2013-02-16T15:39:46.977
> 
> 标签：c++

我正在尝试一些随机程序来加强我的基本知识。我执行了 2 条语句：

```
int i = 4;
cout<<i++*i++;  //returned 16
cout<<i++*++i;  //returned 25 
```

我可以解释一下幕后发生的事情吗？

提前致谢！