# StackOverflow 问答 15573000-15573999

# jquery - 单击时选择数据表行

> ID：15573000
> 
> 赞同：1
> 
> 时间：2013-03-22T14:35:24.420
> 
> 标签：jquery, datatables

我一直在玩 datatables.net，我的表现在从一组 json 对象中加载数据。现在我想做的是当有人单击一行时获取其中一个对象的 ID（只是一个属性），这样我就可以打开一个对话框。

通过使用 fnRowCallback 将 ID 作为属性加载到 TR 元素上，我发现了一种笨拙的机制，但是当对行进行排序时，这会中断。

```
var tableData = [
            { id: 196402, name: "Joe Bloggs", age: 25, gender: "Male"},
            { id: 257820, name: "Jane Bloggs", age: 22, gender: "Female"},
            { id: 33025, name: "Sam Smith", age: 27, gender: "Female"}
        ];

oTable = $('#MyTable').dataTable({ "aaData": tableData,
            "aoColumns":
                [
                    {"mData": "name"},
                    {"mData": "age"},
                    {"mData": "gender"}
                ],
            "fnRowCallback": function( nRow, aData, iDisplayIndex, iDisplayIndexFull ) {
                $(nRow).attr('id', aData.id); // this breaks if the grid is sorted!
            }
            });

            $("#MyTable tbody tr").click( function( e ) {               
                alert($(this).attr('id'));
            }); 
```

有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T14:54:31.630

来自：[http ://www.datatables.net/api](http://www.datatables.net/api)

```
$('#example tbody td').click( function () {
    // Get the position of the current data from the node
    var aPos = oTable.fnGetPosition( this );

    // Get the data array for this row
    var aData = oTable.fnGetData( aPos[0] );

    // Update the data array and return the value
    aData[ aPos[1] ] = 'clicked';
    this.innerHTML = 'clicked';
  } ); 
```

我喜欢数据表，但真的值得花点时间学习它们……我还有很长的路要走 TBH ;-)

希望有帮助。

D

# java - 以设定的时间间隔在单独的进程上触发 Android Activity 方法

> ID：15573007
> 
> 赞同：2
> 
> 时间：2013-03-22T14:35:49.247
> 
> 标签：java, android, mobile

我正在编写我的第一个 Android 应用程序（到目前为止很有趣！）并且遇到了障碍。我正在使用面向 Android 4.2 的 SDK 工具 21.1。

我正在尝试建立一个系统，允许活动注册以在设定的时间间隔调用方法。我想以这样一种方式执行此操作，即请求的处理将在其自己的进程中处理，以避免使 UI 无响应。

我一直在阅读并探索了一些途径。首先，我认为服务将是解决此问题的好方法，但发现相当多的信息表明这不是一个好的行动方案，因为操作系统能够不加选择地终止服务。

我现在正在考虑使用 ScheduledThreadPoolExecutor。我用一个可覆盖的方法创建了这个简单的类来传递方法：

```
public abstract class BaseEvent implements EventListener {

    public abstract void onFire(Object... params);
} 
```

我创建了这个可运行的任务调用该方法：

```
public class HeartBeatTask implements Runnable {

    private BaseEvent mCallback;

    private Object mParams;

    public HeartBeatTask(BaseAioEvent callback,Object... params){
        mParams = params;

        mCallback = callback;
    }

    @Override
    public void run() {
        Log.d(LOG_TAG,"Run called");
        if(mCallback != null)
        {
            mCallback.onEvent(mParams);
        }

    }
} 
```

我将像这样使用它（在活动中）

```
 ScheduledThreadPoolExecutor threadPool = new ScheduledThreadPoolExecutor(1);
      BaseEvent callback = new BaseEvent() {
            public void onFire(Object... params){
                if(params[0] !=null)
                {
                    Context context = (Context)params[0];
                    Toast toast = Toast.makeText(context, "Task ran", Toast.LENGTH_SHORT);
                    toast.show();
                }
            }

      };

      threadPool.scheduleAtFixedRate(new HeartBeatTask(callback,(this)),0, 5, TimeUnit.SECONDS); 
```

这将每 5 秒执行一次任务，尽管回调方法只运行一次。

我在想这可能不是做事的好方法。我的感觉是我把事情复杂化了。我真正需要的是能够在主线程以外的进程上执行方法的能力，并且在设定的时间间隔内，活动可以绑定多个操作。因此，例如，我可能希望在调用数据库后更新 UI 组件，并且希望每分钟都更新一次。

有人能告诉我我是否走在正确的轨道上吗？我正在尝试做的事情是实现我的目标的可行方法吗？我可以采取更好的方法吗？任何意见或建议将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T14:58:39.760

给 Android 初学者的一些建议。

*   不要称它为`separate process`. [进程是另一回事](https://www.google.co.uk/search?q=linux%20process&aq=f&oq=linux%20process&aqs=chrome.0.59j60j0l3j62.1449&sourceid=chrome&ie=UTF-8)（谷歌“Linux 进程”），您想在同一进程内的单独线程上调用它们。

*   `ScheduledThreadPoolExecutor` **比人们在这里建议您的任何其他东西（例如 Timers 或 PostDelayed）都要好**。****

 **但我认为你在这里确实有一个哲学错误，因为 UI 更新不应该以定时方式运行，而是在事件基础上运行。一旦您的数据库、磁盘或网络操作从后台线程完成，您将回调到 UI 线程以立即更新它。

有几种工具，我会列出一些，指出我最喜欢的一个，但让你对每一个做一些研究

*   [处理程序](https://developer.android.com/reference/android/os/Handler.html#post%28java.lang.Runnable%29)：这是基本的 java 方式
*   [AsyncTask](https://developer.android.com/reference/android/os/AsyncTask.html)：不错的框架，但不处理屏幕旋转
*   [加载器](https://developer.android.com/reference/android/content/AsyncTaskLoader.html)：这是我的首选方式

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T15:03:06.503

Android 是一个移动平台，老实说，每次你想要运行某些东西时，你最好单独考虑它。您可能会无缘无故地耗尽电池或使用资源。我每天都讨厌 Zedge 应用程序一直在后台无缘无故地运行。特别是因为在 CyanogenMod 内核上，WiFi 进入睡眠状态，而显然它当前处于打开状态。

我猜这更像是一种练习，用于以指定的时间间隔运行任务。一次性的，最通用的可以通过 AlarmManager 类完成。但这可能不是最好的解决方案。

对于某些系统范围的事件，有 BroadcastReceiver 类。

在寻址时

> 因此，例如，我可能希望在调用数据库后更新 UI 组件，并且希望每分钟都更新一次。

通过接口更容易完成。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T15:06:20.973

我认为你的方法有点复杂。考虑你的例子

```
So, for instance, I may want to have a UI component update after a call is made
to a database, and would want that to happen every minute. 
```

我想我会这样做。

1.  创建一个将更新 UI 组件的 AsyncTask。
2.  创建一个线程，它将执行一个新的 AsyncTask 并在 while 循环中休眠一分钟。
3.  在某个时间点启动步骤 3 中的线程。
4.  如果您不想更新组件，请中断线程。

步骤 2 示例

```
while (true) {
    try {
        new updateTask.execute();
        Thread.sleep(60000);
    } catch (InterruptedException e) {
        Thread.currentThread().interrupt();
    }
} 
```**

# delphi - 什么取代了已弃用的 AllocMemSize

> ID：15573010
> 
> 赞同：6
> 
> 时间：2013-03-22T14:35:58.577
> 
> 标签：delphi, memory-management

我正在维护一个遗留应用程序，并且我有以下代码行：

```
sb.Panels[3].Text:= ' Memory in use: ' +  IntToStr(AllocMemSize); 
```

它给出了以下警告：

```
[dcc32 Warning] BLOB.pas(8242): W1000 Symbol 'AllocMemSize' is deprecated 
```

事实上，AllocMemSize 已被弃用（来自 System.pas）：

```
var
  AllocMemSize: Integer deprecated; {Unsupported} 
```

我的问题是：什么是替代品`AllocMemSize`？有什么意义吗？有没有其他更有意义的措施我可以放在那里？

（我想我可以完全删除调用和输出，但用户显然希望在状态栏中看到此信息）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-22T14:43:08.723

[`GetMemoryManagerState`](http://docwiki.embarcadero.com/Libraries/en/System.GetMemoryManagerState)改为打电话。它返回类似的信息，尽管不一定会简化为一个数字，例如`AllocMemSize`. 弃用是由于 Delphi 在 Delphi 2006 前后切换到使用 FastMM 作为内存管理器，并且它跟踪内存的方式与旧的内存管理器不同。

另请参阅文档中的[*监控内存使用情况*](http://docwiki.embarcadero.com/RADStudio/en/Monitoring_Memory_Usage)。

# javascript - 需要解决 Firefox Date() 错误的方法

> ID：15573012
> 
> 赞同：12
> 
> 时间：2013-03-22T14:36:03.847
> 
> 标签：javascript, firefox, date

我正在制作一个画布图表，该图表使用我们向客户显示的信息实时更新，并且正在为时钟上的 DST 更改做准备。我们的要求之一是图表能够像往常一样继续运行，而无需客户在时钟切换时刷新页面。

在解决这个问题时，我发现了 Firefox 的这个错误：

[https://bugzilla.mozilla.org/show_bug.cgi?id=127246](https://bugzilla.mozilla.org/show_bug.cgi?id=127246)

基本上 JavaScript 中的 Date() 对象不会在 Firefox 中更新，如果系统时间发生更改而无需关闭浏览器/选项卡，并且当我们使用系统时钟查询 API 时，这是一个相当大的问题。

我假设它不是固定的，因为票仍然标记为“新”，我也很确定这是导致问题的原因，而不是我的代码的另一部分，所以我怎样才能获得系统的当前时间在 Firefox 中更改时钟后无需刷新页面？

仅供参考，我使用的 Firefox 版本是 19.0.2

提前致谢

**例子**

将系统时钟设置为 12:00 并打开 Web 应用程序...

```
var currentHour = new Date().getHours() //returns 12 
```

在不重新打开网络应用程序的情况下将系统时钟设置为 13:00。

```
var currentHour = new Date().getHours() //returns 12 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-22T14:49:47.710

无论如何，您永远不能依赖客户端来设置正确的日期/时间。我能想到的唯一解决方法是从另一个来源（例如服务器）请求当前时间。

如果您不想破坏自己的服务器，您可以找到返回时间戳的公共 API，例如某种[Time API](https://stackoverflow.com/questions/489581/getting-the-current-gmt-world-time)，或具有可靠正常运行时间的服务，例如 eBay 的 Client Alerts API：

[http://clientalerts.ebay.com/ws/ecasvc/ClientAlerts?callbackname=hello&callname=GetPublicAlerts](http://clientalerts.ebay.com/ws/ecasvc/ClientAlerts?callbackname=hello&callname=GetPublicAlerts)

```
hello({"Timestamp":"2013-03-22T14:43:21.757Z","Ack":"Failure","Errors":[{"ShortMessage":"Missing required input element.","LongMessage":"Required input element is missing from the request.","ErrorCode":"1.19","SeverityCode":"Error","ErrorParameters":[{"Value":"ChannelDescriptor","ParamID":"0"}],"ErrorClassification":"RequestError"}],"Build":"E809_CORE_BUNDLED_15739296_R1","Version":"809"}); 
```

忽略所有内容，只获取 UTC 时间戳。只要确保您不会因为您并不真正需要的数据而将某些服务器撞到地狱！

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-26T21:21:17.547

## 使用网络工作者

[与其在Sergiu Toarca 的回答](https://stackoverflow.com/questions/15573012/need-workaround-for-firefox-date-bug/15654085#15654085)中创建一个新窗口，不如在每次需要更新时创建一个新的网络工作者。`Date()`每当生成新的网络工作者时，Firefox 都会更新该对象。

```
function currDate() {
    var blob = new Blob([""]),
        blobURL = window.URL ? window.URL.createObjectURL(blob) : window.webkitURL.createObjectURL(blob),
        worker = new Worker(blobURL);
    worker.terminate();
    return new Date();
} 
```

您可以像使用普通`Date()`对象一样使用它：

```
currDate().getHours(); // Gives you an updated hour 
```

请参阅[演示](http://jsfiddle.net/laucheukhim/W5ncQ/7/)（适用于 Firefox 19）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-27T07:58:13.237

对于这个问题，有一个简单（但非常hacky）的解决方法。您可以创建一个新窗口（由于某种原因会重置当前窗口的缓存），从那里获取日期，然后立即关闭窗口。

```
var getRealDate = function() {
    var w = window.open();
    var ret = new Date();
    w.close();
    return ret;
}; 
```

看到它在[jsfiddle](http://jsfiddle.net/tcuA9/)上工作。单击按钮，然后更改您的时区，然后再次单击按钮，您将获得更新的值。

注意：仅在 Firefox 19 中测试

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-26T19:31:32.127

当您谈论画布的实时更新时，我假设您正在使用某种推送技术，例如使用 Web 套接字，或者一些虚假推送技术，例如 AJAX 长轮询。

但是，由于您无论如何都不能依赖客户端时间（如另一个答案中所述），为什么不使用实时推送数据包来包含当前时间？

这样你就可以用一块石头杀死两只鸟（对不起，军事表达，但他们就是这么说的;-)）：

*   您有一个可以依赖的中央时钟：您的服务器。
*   您可以利用现有的数据更新基础设施，并且不需要其他东西。
*   客户可以将他们的时钟设置为他们想要的任何时间，他们将始终获得正确的数据。

您的客户需要做的就是获取他们最初所在的时区，然后将差值添加或减去服务器提供的时区。例如，如果您的客户端使用 UTC+1 而您的服务器使用 UTC+4，那么只需从服务器提供的每个时间戳中减去 3 小时。

由于 DST 更改每年仅出现两次，您甚至可以将其硬编码到您的客户端中并使用两种不同的加法/减法算法。您必须使用哪一个，您可以根据服务器发送给您的时间戳的日期部分来决定。

这样你应该已经解决了所有问题，它适用于每个浏览器，并且独立于客户端的任何时间设置。

希望这可以帮助 ：-）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-28T23:47:09.003

鉴于我所做的以下假设（基于他的问题和评论中所写的内容）是正确的，这是针对 OP 特定情况的超级简单解决方案：

*   该图仅适用于一位客户
*   该图将主要在 Firefox 上加载（具有相同引用错误的版本）
*   客户的机器都基于 GMT（时钟改变时变为 BST）
*   机器时钟相当准确
*   客户不会随意更改机器的时钟。

如果上述情况属实（甚至可能不是全部），这将变得非常简单。因为你真的只担心两个时区，GMT 和 BST，你可以调整你的例子如下：

在加载时/图形初始化时添加这段代码：

```
// given a date object, returns the actual hour (works for GMT/BST only)
var getDisplayHour = (function() {
  var initiallyGMT = (new Date().toString().indexOf('BST') === -1);
  return function ( date ) {
    var isGMT = (date.toString().indexOf('BST') === -1);
    var offset = initiallyGMT - isGMT;
    return date.getHours() + offset;
  }
})(); 
```

将系统时钟设置为 12:00 并打开 Web 应用程序...

```
var currentDisplayHour = getDisplayHour( new Date() ); // returns 12 
```

在不重新打开网络应用程序的情况下将系统时钟设置为 13:00。

```
// the referenced bug keeps the same time, but it successfully changes the time zone, so:
var currentDisplayHour = getDisplayHour( new Date() ); // returns 13 
```

在 Mac 和 Windows 7 上的 FF 19.0.0.2 上测试。

**注意：**由于我无法真正重现 OP 的问题，并且考虑到引用的用例，我什至不确定是否需要任何这些变通方法。人们可能期望对 OP 的用例进行更准确的测试，以同时更改时间和区域。例如，不仅仅是 12:00 -> 13:00，而是 12:00 GMT -> 13:00 BST。更准确的 DST 转换模拟是将时钟设置为 2013-03-31 00:59:00 GMT，检查`new Date().getHours()`，等待几分钟，然后再次检查小时。

但是，正如我所说，我自己无法重现引用的错误，所以我肯定是错的（在这种情况下，我会修改或删除这个答案）。

无论如何，希望这会有所帮助！

# c# - 将图形绘制到二阶函数 C# Windows 窗体

> ID：15573014
> 
> 赞同：-7
> 
> 时间：2013-03-22T14:36:06.763
> 
> 标签：c#

我有一个二阶函数，使用 Windows 窗体绘制图形的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T14:41:37.040

```
1) Set range of arguments (for example -20<x<20)
2) compute values for this points (with accuracy 0.5)
3) Scale your graph to display resolution
4) Connect points by lines 
```

# ios - 如何使用 PlistBuddy 将数组添加到 Plist？

> ID：15573017
> 
> 赞同：8
> 
> 时间：2013-03-22T14:36:19.387
> 
> 标签：ios, xcode, bash, shell, plist

这个问题是一个子问题/替代方法来解决我通过这个问题尝试做的事情：[如何使用 PListBuddy 将条目从一个文件复制到另一个文件？](https://stackoverflow.com/questions/15562946/how-can-i-use-plistbuddy-to-copy-an-entry-from-one-file-to-another)

我想使用 Bash/Shell 通过 XCode 构建脚本使用 PlistBuddy 将条目从 Plist 文件 A 复制到 Plist 文件 B。通过这样做，我无法使用 PlistBuddy 的“复制”功能。我必须复制每个单独的条目及其所有元素，因为您无法添加/设置字典，但必须通过“条目”与 PlistBuddy 交互。

我要做的是获取 Plist 文件 A 并将其标题/值数组存储为“PSMultiValueSpecifier”元素。我能够抓取数组中的元素并将它们打印到屏幕上，但是当我将它们添加到目标 Plist 文件 B 中时，数组仍然是空的。

代码：（获取添加条目的代码）

```
# Configure the Entry
${PLISTBUDDY} -c "Add PreferenceSpecifiers:$DEST_INDEX dict" ${DEST_PLIST}
${PLISTBUDDY} -c "Add PreferenceSpecifiers:$DEST_INDEX:Type string 'PSMultiValueSpecifier'" ${DEST_PLIST}

# Retrieve the Additional Field Value
preferenceTitle=`$PLISTBUDDY -c "Print PreferenceSpecifiers:$SOURCE_INDEX:Title" $SOURCE_PLIST 2>&1`
preferenceKey=`$PLISTBUDDY -c "Print PreferenceSpecifiers:$SOURCE_INDEX:Key" $SOURCE_PLIST 2>&1`
preferenceDefaultValue=`$PLISTBUDDY -c "Print PreferenceSpecifiers:$SOURCE_INDEX:DefaultValue" $SOURCE_PLIST 2>&1`
preferenceValues=`$PLISTBUDDY -c "Print PreferenceSpecifiers:$SOURCE_INDEX:Values" $SOURCE_PLIST 2>&1`
preferenceTitles=`$PLISTBUDDY -c "Print PreferenceSpecifiers:$SOURCE_INDEX:Titles" $SOURCE_PLIST 2>&1` 
```

添加新条目的代码：

```
# Set the Additional Field Values
${PLISTBUDDY} -c "Add PreferenceSpecifiers:$DEST_INDEX:Title string $preferenceTitle" ${DEST_PLIST}
${PLISTBUDDY} -c "Add PreferenceSpecifiers:$DEST_INDEX:Key string $preferenceKey" ${DEST_PLIST}
${PLISTBUDDY} -c "Add PreferenceSpecifiers:$DEST_INDEX:DefaultValue integer $preferenceDefaultValue" ${DEST_PLIST}
####BORKEN####
${PLISTBUDDY} -c "Add PreferenceSpecifiers:$DEST_INDEX:Values array $preferenceValues" ${DEST_PLIST}
${PLISTBUDDY} -c "Add PreferenceSpecifiers:$DEST_INDEX:Titles array $preferenceTitles" ${DEST_PLIST}
####BORKEN#### 
```

这是产生以下数据的代码片段：

```
echo "#########"
echo "[$THIS] adding $preference: $preferenceDict"
echo "#########"
echo "Source: "`$PLISTBUDDY -c "Print PreferenceSpecifiers:$SOURCE_INDEX:Values" $SOURCE_PLIST`
echo "Source: "`$PLISTBUDDY -c "Print PreferenceSpecifiers:$SOURCE_INDEX:Titles" $SOURCE_PLIST`
echo "#########"
echo "Destination: "`$PLISTBUDDY -c "Print PreferenceSpecifiers:$DEST_INDEX:Values" $DEST_PLIST`
echo "Destination: "`$PLISTBUDDY -c "Print PreferenceSpecifiers:$DEST_INDEX:Titles" $DEST_PLIST`
echo "#########" 
```

这是提供的数据，证明正在传输正确的字段

```
#########
[addDebugSettingsMenu.bash] adding : Dict {
    Titles = Array {
        Meters
        Feet
    }
    DefaultValue = 1
    Values = Array {
        1
        2
    }
    Key = UserPreferences_UnitsKey
    Type = PSMultiValueSpecifier
    Title = Units
}
#########
Source: Array {     1     2 }
Source: Array {     Meters     Feet }
#########
Destination: Array { }
Destination: Array { }
######### 
```

如果您对 PlistBuddy 的未记录功能有任何了解，请提供帮助。MAN 页面非常纤薄，示例很多。

我要感谢您阅读本文并感谢您的智慧来帮助我解决我脖子上的主要疼痛。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T03:01:51.147

可能有更好的方法来做到这一点，但我已经通过计算源数组中的元素然后单独复制它们来解决这个问题。

```
${PLISTBUDDY} -c "Add PreferenceSpecifiers:$DEST_INDEX:Titles array" ${DEST_PLIST}    
${PLISTBUDDY} -c "Add PreferenceSpecifiers:$DEST_INDEX:Titles:0 string 'TITLE_1'" 
${DEST_PLIST} ${PLISTBUDDY} -c "Add PreferenceSpecifiers:$DEST_INDEX:Titles:1 string 'TITLE_2'" ${DEST_PLIST} 
etc... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-06T07:24:31.993

它可能会解决您的问题，但它不是在更大的合并脚本中实现的正确方法。在下面检查我的答案。

```
/usr/libexec/PlistBuddy -x -c "Print PreferenceSpecifiers" ${FROM_PLIST} > ${TO_PLIST} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-05T04:54:46.477

对于像字符串数组这样简单的东西，这里的代码将组合任意数量的数组。此示例使用 iOS Info plist 中常见的 UIAppFonts 数组。

```
TMP_NAME=`basename $0`
TMP_DIR=`mktemp -d ${PROJECT_TEMP_DIR}/${TMP_NAME}.XXXXXX` || exit 1
FONTS_PLIST="${TMP_DIR}/Fonts.plist"

/usr/libexec/PlistBuddy -c "Add UIAppFonts array" "${FONTS_PLIST}"

# Iterate through each array, adding to the array entry in the temporary plist
index=0
for arg; do
  status=0
  inner_index=0
  while [ ${status} -eq 0 ]; do
    set +e
    # No easy way to get array length, so keep going until we go out of bounds
    entry=`/usr/libexec/PlistBuddy -c "Print UIAppFonts:${inner_index}" "${arg}" 2> /dev/null`
    status=${?}
    set -e
    if [ ${status} -eq 0 ]; then
      /usr/libexec/PlistBuddy -c "Add UIAppFonts:${index} string ${entry}" "${FONTS_PLIST}"
      index=`expr ${index} + 1`
      inner_index=`expr ${inner_index} + 1`
    fi
  done
done 
```

# php - 将 JSON 数据放入 PHP 中的变量中

> ID：15573018
> 
> 赞同：0
> 
> 时间：2013-03-22T14:36:21.797
> 
> 标签：php, json

**编辑：我不认为最终输出看起来像 JSON。如果不是，那是什么？**

我有这个代码：

```
$url = 'http://eligibility.sc.egov.usda.gov/eligibility/eligibilityservice?eligibilityType=Property&requestString=<?xml version="1.0"?><Eligibility xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="/var/lib/tomcat5/webapps/eligibility/Eligibilitywsdl.xsd"><PropertyRequest StreetAddress1="'.$street.'" StreetAddress2="" StreetAddress3="" City="'.$city.'" State="'.$state.'" County="" Zip="'.$zip.'" Program="RBS"></PropertyRequest></Eligibility>';
$url_arr = explode( 'requestString=', $url );
$xml = simplexml_load_string( $url_arr[ 1 ] ); // requires allow_url_fopen to be on
$elg = (string)$xml->Property[Eligibility];

var_dump($xml);

$xml = simplexml_load_file($url); // requires allow_url_fopen to be on
$elg = json_encode((string)$xml->Property[Eligibility]);

var_dump($elg); 
```

其中输出了这个数组：

```
object(SimpleXMLElement)#1 (1) {
    ["PropertyRequest"]=> object(SimpleXMLElement)#2 (1) {
        ["@attributes"]=> array(8) {
            ["StreetAddress1"]=> string(13) "7865 ILLINOIS" 
            ["StreetAddress2"]=> string(0) "" 
            ["StreetAddress3"]=> string(0) "" 
            ["City"]=> string(10) "CASEYVILLE" 
            ["State"]=> string(2) "IL" 
            ["County"]=> string(0) "" 
            ["Zip"]=> string(5) "62232" 
            ["Program"]=> string(3) "RBS" 
        } 
    } 
} 
string(12) ""InEligible"" 
```

我只想抓住那`string(12) ""InEligible""`部分。我如何将其放入变量中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T14:38:39.383

从您的代码中`$elg`已经保存了这个值，它是一个变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T14:48:15.887

> 编辑：我不认为最终输出看起来像 JSON。如果不是，那是什么？

```
string(12) ""InEligible"" 
```

那是JSON。JSON 中的字符串用引号括起来，不多也不少。

# asp.net-mvc - Web API 和 MVC 如何协同工作？

> ID：15573020
> 
> 赞同：3
> 
> 时间：2013-03-22T14:36:36.147
> 
> 标签：asp.net-mvc, asp.net-web-api

MVC 和 Web API 如何在应用程序中协同工作？

您是否应该使用 javascript 绑定（使用 knockout.js 和 ajax 调用）并且只将 MVC 用于实际的容器页面？

还是从 MVC 控制器（如 WCF 服务层）调用 Web API？

MVC 和 Web API 的集成对我来说并不清楚。

如果我经常需要返回 HTML（即我想使用 Partials），我应该使用 Web API 吗？

我想使用 Web API，以便可以扩展我的应用程序（从一侧返回 HTML，但保留可以返回/处理 XML 的 API）！

感谢您清理它:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T14:43:51.227

下面这张来自[链接的](http://www.asp.net/single-page-application/overview/introduction/knockoutjs-template)图片清楚地解释了 MVC 和 Web Api 如何协同工作：

![在此处输入图像描述](../Images/3bd32eae103f1b0ad2c017141b554c00.png)

从技术上讲，您可以从 MVC 调用 Web API，但这并不是真正的最佳实践，因为：

1.  从 MVC 到 Web API 的调用将通过网络（分发），这使您的应用程序更加复杂。

2.  Web Api 是 REST Api，它不像 WCF，它是大量的 SOAP Api（尽管 WCF 支持 REST Api）。因此，从 JavaScript 中，您可以使用 ajax 更轻松地调用 Web Api。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T14:45:08.307

以下是我如何设置我最新的 MVC 和 Web API 应用程序：有常规模型层 (* *M* *VC)，并且我为业务规则创建了一个服务层。我的 MVC 应用程序的控制器调用服务层来处理视图之间的数据。

我的 Web API 应用程序是服务层方法的外部接口，因此 MVC 应用程序和 Web API 应用程序上的控制器都调用服务层。我希望这有帮助。

# json - jQuery Twitter API 在服务器上返回 403 被禁止

> ID：15573025
> 
> 赞同：1
> 
> 时间：2013-03-22T14:36:55.083
> 
> 标签：json, jquery, twitter, http-status-code-403

我一直在开发一个使用 jQuery 的 $.ajax 函数实现 Twitter 的 API 的网站。当我在我的机器上运行它时它可以工作，但是当我将它上传到我的服务器并运行它时，它每次都会返回 403：禁止。我绝对没有超过他们的速率限制，所以我认为我没有被列入黑名单。从昨晚午夜开始，我的一些同事在他们的页面中发现了类似的问题。有谁知道 Twitter 是否正在改变他们的 API？他们是否贬低了 json 请求？

这是我给感兴趣的人的代码：

```
$(document).ready(function() {
        $.ajax({

            type: "GET",
            url: "http://search.twitter.com/search.json?q=not+art&rpp=100&callback=?",
            dataType: "json",
            success: function(data) {
                d = data.results;

                for(i=0;i<d.length;i++){
                    var idStr = d[i].id_str;
                    console.log(i+" = "+idStr);
                }
            }
         });
 }); 
```

我相当肯定这不是代码问题，因为它仍然可以离线运行，但是 Twitter 上没有关于我能找到的最近更改的任何消息。任何帮助或信息将不胜感激。我们都必须学习新的 API 吗？

*编辑 3/29/13* 问题似乎与使用共享 IP 地址访问 search.twitter.com API 有关。不幸的是，Twitter 开发者论坛没有更多信息，但如果您遇到类似问题，请查看。

# ruby-on-rails - twitter-bootstrap gem 支持什么版本的 twitter bootstrap

> ID：15573029
> 
> 赞同：1
> 
> 时间：2013-03-22T14:37:05.153
> 
> 标签：ruby-on-rails, twitter-bootstrap, twitter-bootstrap-rails

[http://rubygems.org/gems/twitter-bootstrap-rails](http://rubygems.org/gems/twitter-bootstrap-rails)

twitter-bootstrap gem 的当前版本是 2.2.6，我如何找到这个 gem 支持的 twitter bootstrap 版本。[可从http://twitter.github.com/bootstrap/](http://twitter.github.com/bootstrap/)下载的 twitter bootstrap 版本是 v2.3.1。

这两者之间有关联吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T14:42:19.427

根据[更新日志](https://github.com/seyhunak/twitter-bootstrap-rails#changelog)，它使用 Twitter Bootstrap 2.3.1 版。

gem 的版本号和 Twitter Bootstrap 的版本之间没有明显的关系：

```
...
Released gem v.2.1.5 (minor fixes, install generator detects javascript template engine, updated to Twitter Bootstrap 2.2.1)
Released gem v.2.1.6 (minor fixes)
Added static stylesheets support
Released gem v.2.1.8 and updated to Twitter Bootstrap 2.2.2
Released gem v.2.1.9
Released gem v.2.2.0 (Font Awesome 3)
Released gem v.2.2.1 (minor fixes and updates)
Released gem v.2.2.2 (Bootstrap 2.3.0)
...
Released gem v.2.2.5 (Bootstrap 2.3.1) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T16:48:52.760

twitter-bootstrap-rails gem 的替代方法是[bootstrap-sass](https://github.com/thomas-mcdonald/bootstrap-sass) - 尽管它使用 SASS 而不是 LESS，但它确实使用自己的版本号跟踪引导版本（请参阅 README.md 中关于版本控制的注释）。

bootstrap-sass 目前也使用 2.3.1 版本。

# smarty - 打开失败需要“Smarty_Internal_TemplateCompilerBase.php”

> ID：15573031
> 
> 赞同：0
> 
> 时间：2013-03-22T14:37:10.250
> 
> 标签：smarty

我正在使用 smarty 3.1.13 版；我的项目在本地服务器上运行良好；当我将我的网站放在服务器（www.1and1.com）上时出现以下错误：

```
 Fatal error: require_once():
 Failed opening required 'Smarty_Internal_TemplateCompilerBase.php' 
(include_path='/homepages/39/d441258317/htdocs/mtx/application:/
 homepages/39/d441258317/htdocs/mtx/application/controllers:
 /homepages/39/d441258317/htdocs/mtx/application/models:
 /homepages/39/d441258317/htdocs/mtx/application/../library:
 /homepages/39/d441258317/htdocs/mtx/application/../library/Smarty
 /sysplugins:/homepages/39/d441258317/htdocs/mtx/application/../library
 /Smarty/plugins:.:/usr/lib/php6') in /homepages/39/d441258317/htdocs/
 mtx/index.php on line 28 
```

我更改了文件夹 compile_c 的权限，但没有，仍然出现错误

感谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T15:25:43.883

看起来像一个大问题，但不是。当我在本地服务器中创建我的文件夹时，我是否将“公共”文件夹与“P”大写。因为我有一个 linux 服务器和 linux 它区分大小写它不起作用。只需将文件夹从“Public”重命名为“public”即可！

# python-2.7 - python双重迭代的问题

> ID：15573032
> 
> 赞同：1
> 
> 时间：2013-03-22T14:37:15.450
> 
> 标签：python-2.7, iteration, nested-loops

嗨，提前感谢您的帮助。

我是 Python 的初学者，我遇到了迭代问题。我知道 itertools 可能是解决我的问题的一部分，但我似乎没有正确地制定它，而且我在论坛上找不到足够相似的问题。

基于一个 numpy 索引向量 V、另一个向量 Y 和一些函数 f，我想计算如下：

```
for i in V[:-1]:
    for j in V[i+1:]:
        f(Y[i], Y[j]) 
```

...如您所知，这是行不通的，因为您比我更了解python！它似乎永远不会到达“j”（V 不可迭代两次是我到目前为止所理解的，尽管我不确定它是什么意思）。

什么是这样做的好方法？请注意，不要同时计算 f(Y[i],Y[j]) 和 f(Y[j],Y[i]) 是非常重要的，因为它是对称的并且运行时间很长。

谢谢！

# capybara - 为什么我会得到 Selenium::WebDriver::Error::JavascriptError？

> ID：15573033
> 
> 赞同：1
> 
> 时间：2013-03-22T14:37:16.827
> 
> 标签：capybara

我尝试了以下代码：

> > page.execute_script "$('#{selector}').trigger('mouseenter').click();"

我不能将 jquery 与水豚一起使用。（未知错误（**Selenium::WebDriver::Error::JavascriptError）**）

有人可以向我建议我缺少什么吗？

我正在使用 capybara (1.1.2)、selenium-webdriver(2.29)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T17:49:34.603

除非您对它们进行转义，否则您不能在字符串中使用双引号。但是，在这种情况下，这可能会很快变得混乱。试试这个

```
page.execute_script("$('#{selector}').trigger('mouseenter').click();") 
```

# objective-c - 在 UITextField 上显示过去的条目

> ID：15573035
> 
> 赞同：1
> 
> 时间：2013-03-22T14:37:21.423
> 
> 标签：objective-c, cocoa-touch, uitextfield

我正在编写一个应用程序，其中有两个`UITextFields`...

1.  起始文本
2.  目标文本

现在，一旦我放置值并点击搜索或我想调用的任何函数，我想重用这些值。应用程序应记录这些值并将其保存为缓存。并且应该在键入或单击按钮时显示它们。是否可以像字典单词一样显示它们，或者哪个更`tableView`可取`PickerView`？如果还有其他请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T14:40:41.427

绝对使用`UITableView`. A`UIPicherView`大部分时间都以模态方式使用，而不是用于可选建议。

表视图用于 Safari 和许多其他应用程序：

![在此处输入图像描述](../Images/a1e255d71fb992d16c62bb419c9aebfc.png)

至于如何缓存数据，您有很多选择。它还取决于您期望的数据量。

一种简单的方法是简单地使用`NSArray`. 您可以非常轻松地将`NSArray`plist 文件写入磁盘，并在需要时将其读回。

或者你可以使用 Core Data，如果你期望大量数据并且仍然想要高性能。但是，如果您以前从未尝试过该 API，那么要习惯该 API 会困难得多。基本上，您将需要一个简单的模型，其中包含一个称为类似实体的实体，该实体`SearchEntry`具有单个属性`text`。然后，您继续向托管对象上下文添加新实例，并且可以轻松过滤现有值。

# php - 如何通过 wikipedia api 指定或增加片段的内容长度

> ID：15573037
> 
> 赞同：2
> 
> 时间：2013-03-22T14:37:27.313
> 
> 标签：php, wikipedia, wikipedia-api

我正在使用这个 url 从维基百科中提取数据

[http://en.wikipedia.org/w/api.php?format=xml&action=query&list=search&srsearch=google&srlimit=1&prop=revisions](http://en.wikipedia.org/w/api.php?format=xml&action=query&list=search&srsearch=google&srlimit=1&prop=revisions)

这给出了片段：

> Google Inc. 是一家专门从事互联网相关服务和产品的美国跨国公司。 **...**

但它太短了..我想增加要返回的片段的长度..

是否有任何参数来指定片段的长度..

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-02-25T13:07:56.753

据我所知，不能直接增加片段的大小。但是可以将搜索结果（只需一个 API 调用）发送到[TextExtracts](https://www.mediawiki.org/wiki/Extension:TextExtracts#API)，这将返回更多页面内容。

例如，API 调用可能如下所示：

```
https://en.wikipedia.org/w/api.php?format=xml&action=query&prop=extracts&generator=search&gsrsearch=google&exlimit=max&exintro 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T03:26:54.537

将 srlimit=1 替换为 srlimit=50

```
http://en.wikipedia.org/w/api.php?format=xml&action=query&list=search&srsearch=google&srlimit=50&prop=revisions 
```

# php - 在居中的弹出窗口中打开表单提交的消息

> ID：15573038
> 
> 赞同：2
> 
> 时间：2013-03-22T14:37:28.893
> 
> 标签：php, javascript, html, forms

我正在尝试打开一个页面，让用户知道他们的表单已在屏幕中央的弹出窗口中提交。我已经让页面在弹出窗口中打开，但我不知道如何用我当前的代码使窗口居中（我使用了一个不同的 js 代码来打开/居中弹出窗口，但它也继续打开一个具有相同信息的新页面）。

这是当前表单的代码...

```
 <form method="post" action="php/sendmail.php" target="POPUPW" onsubmit="POPUPW = window.open('about:blank','POPUPW','width=600,height=175');" id="contact">
    <h2>Name: (required)</h2><br />
            <input name="name" type="text" size="55" class="required error"><br />
            <h2>Email: (required)</h2><br  />
            </span><input name="email" type="text" size="55" class="required email"/><br />
            <h2>Phone:</h2><br />
            <input name="phone" type="text" size="55" /> <br />
            <h2>Comments:</h2><br />
            <textarea name="comments" rows="15" cols="47"></textarea><br />
            <br />
    <input type="submit" value="Submit" />
     </form> 
```

该页面目前位于[http://www.concept82.com/DIS/contact.html](http://www.concept82.com/DIS/contact.html)

我知道这可能很简单，但我是新的 javascript 和 php 编码。非常感谢！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T15:25:06.157

在您的问题中使用您现有的代码，提出以下内容。

**在 FF 19.0.2 和 IE 7 中测试**

更改了 pop.htm URL 以适应和定位，*干杯*。

变量 w = 200; // 像素宽度
var h = 200; // 像素高度

```
<script>
function popupwindow(url, title, w, h) {
    var w = 200;
    var h = 200;
    var left = Number((screen.width/2)-(w/2));
    var tops = Number((screen.height/2)-(h/2));

window.open("pop.htm", '', 'toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=no, copyhistory=no, width='+w+', height='+h+', top='+tops+', left='+left);
}

</script>

<form method="post" action="php/sendmail.php" onsubmit="popupwindow()"; id="contact">
<h2>Name: (required)</h2><br />
        <input name="name" type="text" size="55" class="required error"><br />
        <h2>Email: (required)</h2><br  />
        </span><input name="email" type="text" size="55" class="required email"/><br />
        <h2>Phone:</h2><br />
        <input name="phone" type="text" size="55" /> <br />
        <h2>Comments:</h2><br />
        <textarea name="comments" rows="15" cols="47"></textarea><br />
        <br />
<input type="submit" value="Submit" />
</form> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T15:31:33.483

首先，如果这是您选择的路线，您应该使用 jquery 进行 ajax 调用。您可以在没有重定向的情况下发布到服务器端 php 脚本的唯一方法是使用 Ajax 异步执行此操作。我强烈建议为此使用 jquery 的 ajax 方法，因为它们使它变得非常简单。为此，您必须将所有表单输入值保存到变量中，然后使用它们创建数据对象。然后通过 ajax 调用将该数据对象发送到服务器。

```
<form method="" action="">
<h2>Name: (required)</h2><br />
        <input name="name" type="text" size="55" class="required error name"><br />
        <h2>Email: (required)</h2><br  />
        </span><input name="email" type="text" size="55" class="required email"/><br />
        <h2>Phone:</h2><br />
        <input name="phone" type="text" size="55" class="phone" /> <br />
        <h2>Comments:</h2><br />
        <textarea name="comments" rows="15" cols="47" class="comments"></textarea><br />
        <br />
<input type="submit" value="Submit" class="submitBtn" />
 </form> 
```

您的 html 略有不同，因为我通过删除操作和方法更改了表单，并且我添加了可以用作 jquery 选择器的类到您的输入元素。

```
$(document).ready(function(){
    $('.submitBtn').click(function(e){
        e.preventDefault();
        var name = $('.name').val();
        var email = $('.email').val();
        var phone = $('.phone').val();
        var comments = $('.comments').val();

        var dataObject = {
            name: name,
            email: email,
            phone: phone,
            comments: comments
        }

        $.Ajax({
        url: php/sendmail.php,
        type: 'post',
        dataType: "json",
        contentType: "application/json",
        data: dataObject,
        success: function(data){
                 var createdDiv = '<div class="divToBeCentered"><p class="dataText">' + data + '</p></div>';
                 $('body').append(createdDiv);
            };
        });
    });

}); 
```

在 CSS 中设置 div 居中的样式，你只需要做这样的事情。

```
.divToBeCentered{
    height: 100px;
    width:40%;
    margin:auto;
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-22T14:51:41.097

看到这个网站会帮你 [Window open() 方法](http://www.w3schools.com/jsref/met_win_open.asp)

当您想在 javascript 中打开页面时，请更改

```
left=pixels
height=pixels
top=pixels
width=pixels 
```

到你的地方

# reflection - 我将如何发出歧视性工会？

> ID：15573039
> 
> 赞同：2
> 
> 时间：2013-03-22T14:37:29.913
> 
> 标签：reflection, f#

如果我有这样的事情：

```
type public ServiceActionType =
    | ServiceRequest
    | ServiceResponse
    | ServiceEventInvocation
    | ServiceEventSubscriptionRequest
    | ServiceMetadataRequest 
```

然后如何将其中一项添加到堆栈中，如下所示：

```
IlGen.Emit(OpCodes.???, ???) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-22T15:46:19.507

现有答案很好，但请注意，`Microsoft.FSharp.Reflection`命名空间有一些帮助程序，可以轻松获取您关心的成员：

```
open Reflection
let cases = FSharpType.GetUnionCases(typeof<ServiceActionType>)
let serviceRequestMethod = FSharpValue.PreComputeUnionConstructorInfo(cases.[0]) 
```

结果是一样的，`typeof<ServiceActionType>.GetMethod("get_ServiceRequest")`但你不必担心知道编译的形式，这可能会根据联合案例是否有字段而有所不同。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-22T15:26:23.113

通常，可区分联合被编译为类层次结构（这意味着可区分联合的每个案例都有一个新的子类）。但是，在您的情况下，情况更简单，因为没有一个案例带有任何值。

如果您查看编译后的代码，您会看到生成的 .NET 表示形式为您提供如下内容：

```
class ServiceActionType {
  public static ServiceActionType ServiceRequest { get; }
  public static ServiceActionType ServiceResponse { get; }
  public static ServiceActionType ServiceEventInvocation { get; }
  // etc. for all the other cases
} 
```

这意味着，如果您想构造可区分联合的值之一，您只需要发出对代表您想要的情况的（静态）属性的 getter 方法的调用。

如果您有一个带参数的案例，例如`ServiceRequest of RequestInfo`，那么生成的类将包含一个`NewServiceRequest`方法，该方法将采用必要的参数：

```
public static ServiceActionType NewServiceRequest(RequestInfo info); 
```

也就是说，我不完全确定您为什么要这样做，因此发出代码可能不是最好的方法。您还可以考虑使用 F# 引用 - 它可以编译为动态方法 - 并且创建一个表示 DU 案例构造的引用非常容易使用`Expr.NewUnionCase`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-22T15:28:26.413

让我们举个`ServiceActionType.ServiceRequest`例子。

我将以下内容放在 LINQPad（F# 程序模式）中以获取 IL（但您可以将`ildasm.exe`其用于相同目的）：

```
type public ServiceActionType =
    | ServiceRequest
    | ServiceResponse
    | ServiceEventInvocation
    | ServiceEventSubscriptionRequest
    | ServiceMetadataRequest

ServiceRequest.Dump() 
```

它给了我：

```
IL_0001:  call        Query_qdoovg+ServiceActionType.get_ServiceRequest
IL_0006:  call        LINQPad.FSharpExtensions.Extensions.Dump

Dump:
IL_0000:  nop         
IL_0001:  ldarg.0     
IL_0002:  box         03 00 00 1B 
IL_0007:  call        LINQPad.FSharpExtensions.Extensions.Dump
IL_000C:  ret         

ServiceActionType.get_ServiceMetadataRequest:
IL_0000:  ldsfld      Query_qdoovg+ServiceActionType._unique_ServiceMetadataRequest
IL_0005:  ret         

ServiceActionType.get_IsServiceMetadataRequest:
IL_0000:  ldarg.0     
IL_0001:  call        Query_qdoovg+ServiceActionType.get_Tag
IL_0006:  ldc.i4.4    
IL_0007:  ceq         
IL_0009:  ret         

ServiceActionType.get_ServiceEventSubscriptionRequest:
IL_0000:  ldsfld      Query_qdoovg+ServiceActionType._unique_ServiceEventSubscriptionRequest
IL_0005:  ret         

ServiceActionType.get_IsServiceEventSubscriptionRequest:
IL_0000:  ldarg.0     
IL_0001:  call        Query_qdoovg+ServiceActionType.get_Tag
IL_0006:  ldc.i4.3    
IL_0007:  ceq         
IL_0009:  ret         

ServiceActionType.get_ServiceEventInvocation:
IL_0000:  ldsfld      Query_qdoovg+ServiceActionType._unique_ServiceEventInvocation
IL_0005:  ret         

ServiceActionType.get_IsServiceEventInvocation:
IL_0000:  ldarg.0     
IL_0001:  call        Query_qdoovg+ServiceActionType.get_Tag
IL_0006:  ldc.i4.2    
IL_0007:  ceq         
IL_0009:  ret         

ServiceActionType.get_ServiceResponse:
IL_0000:  ldsfld      Query_qdoovg+ServiceActionType._unique_ServiceResponse
IL_0005:  ret         

ServiceActionType.get_IsServiceResponse:
IL_0000:  ldarg.0     
IL_0001:  call        Query_qdoovg+ServiceActionType.get_Tag
IL_0006:  ldc.i4.1    
IL_0007:  ceq         
IL_0009:  ret         

ServiceActionType.get_ServiceRequest:
IL_0000:  ldsfld      Query_qdoovg+ServiceActionType._unique_ServiceRequest
IL_0005:  ret         

ServiceActionType.get_IsServiceRequest:
IL_0000:  ldarg.0     
IL_0001:  call        Query_qdoovg+ServiceActionType.get_Tag
IL_0006:  ldc.i4.0    
IL_0007:  ceq         
IL_0009:  ret         

ServiceActionType.get_Tag:
IL_0000:  ldarg.0     
IL_0001:  ldfld       Query_qdoovg+ServiceActionType._tag
IL_0006:  ret         

ServiceActionType.__DebugDisplay:
IL_0000:  ldstr       "%+0.8A"
IL_0005:  newobj      Microsoft.FSharp.Core.PrintfFormat<Microsoft.FSharp.Core.FSharpFunc<Query_qdoovg+ServiceActionType,System.String>,Microsoft.FSharp.Core.Unit,System.String,System.String,System.String>..ctor
IL_000A:  call        Microsoft.FSharp.Core.ExtraTopLevelOperators.PrintFormatToString
IL_000F:  ldarg.0     
IL_0010:  callvirt    Microsoft.FSharp.Core.FSharpFunc<Query_qdoovg+ServiceActionType,System.String>.Invoke
IL_0015:  ret         

ServiceActionType.CompareTo:
IL_0000:  nop         
IL_0001:  ldarg.0     
IL_0002:  ldnull      
IL_0003:  cgt.un      
IL_0005:  brfalse.s   IL_0027
IL_0007:  ldarg.1     
IL_0008:  ldnull      
IL_0009:  cgt.un      
IL_000B:  brfalse.s   IL_0025
IL_000D:  ldarg.0     
IL_000E:  ldfld       Query_qdoovg+ServiceActionType._tag
IL_0013:  stloc.0     
IL_0014:  ldarg.1     
IL_0015:  ldfld       Query_qdoovg+ServiceActionType._tag
IL_001A:  stloc.1     
IL_001B:  ldloc.0     
IL_001C:  ldloc.1     
IL_001D:  bne.un.s    IL_0021
IL_001F:  ldc.i4.0    
IL_0020:  ret         
IL_0021:  ldloc.0     
IL_0022:  ldloc.1     
IL_0023:  sub         
IL_0024:  ret         
IL_0025:  ldc.i4.1    
IL_0026:  ret         
IL_0027:  ldarg.1     
IL_0028:  ldnull      
IL_0029:  cgt.un      
IL_002B:  brfalse.s   IL_002F
IL_002D:  ldc.i4.m1   
IL_002E:  ret         
IL_002F:  ldc.i4.0    
IL_0030:  ret         

ServiceActionType.CompareTo:
IL_0000:  nop         
IL_0001:  ldarg.0     
IL_0002:  ldarg.1     
IL_0003:  unbox.any   Query_qdoovg.ServiceActionType
IL_0008:  call        Query_qdoovg+ServiceActionType.CompareTo
IL_000D:  ret         

ServiceActionType.CompareTo:
IL_0000:  nop         
IL_0001:  ldarg.1     
IL_0002:  unbox.any   Query_qdoovg.ServiceActionType
IL_0007:  stloc.0     
IL_0008:  ldarg.0     
IL_0009:  ldnull      
IL_000A:  cgt.un      
IL_000C:  brfalse.s   IL_0033
IL_000E:  ldarg.1     
IL_000F:  unbox.any   Query_qdoovg.ServiceActionType
IL_0014:  ldnull      
IL_0015:  cgt.un      
IL_0017:  brfalse.s   IL_0031
IL_0019:  ldarg.0     
IL_001A:  ldfld       Query_qdoovg+ServiceActionType._tag
IL_001F:  stloc.1     
IL_0020:  ldloc.0     
IL_0021:  ldfld       Query_qdoovg+ServiceActionType._tag
IL_0026:  stloc.2     
IL_0027:  ldloc.1     
IL_0028:  ldloc.2     
IL_0029:  bne.un.s    IL_002D
IL_002B:  ldc.i4.0    
IL_002C:  ret         
IL_002D:  ldloc.1     
IL_002E:  ldloc.2     
IL_002F:  sub         
IL_0030:  ret         
IL_0031:  ldc.i4.1    
IL_0032:  ret         
IL_0033:  ldarg.1     
IL_0034:  unbox.any   Query_qdoovg.ServiceActionType
IL_0039:  ldnull      
IL_003A:  cgt.un      
IL_003C:  brfalse.s   IL_0040
IL_003E:  ldc.i4.m1   
IL_003F:  ret         
IL_0040:  ldc.i4.0    
IL_0041:  ret         

ServiceActionType.GetHashCode:
IL_0000:  nop         
IL_0001:  ldarg.0     
IL_0002:  ldnull      
IL_0003:  cgt.un      
IL_0005:  brfalse.s   IL_003C
IL_0007:  ldc.i4.0    
IL_0008:  stloc.0     
IL_0009:  ldarg.0     
IL_000A:  call        Query_qdoovg+ServiceActionType.get_Tag
IL_000F:  switch      (IL_0028, IL_002C, IL_0030, IL_0034, IL_0038)
IL_0028:  ldc.i4.0    
IL_0029:  stloc.0     
IL_002A:  ldloc.0     
IL_002B:  ret         
IL_002C:  ldc.i4.1    
IL_002D:  stloc.0     
IL_002E:  ldloc.0     
IL_002F:  ret         
IL_0030:  ldc.i4.2    
IL_0031:  stloc.0     
IL_0032:  ldloc.0     
IL_0033:  ret         
IL_0034:  ldc.i4.3    
IL_0035:  stloc.0     
IL_0036:  ldloc.0     
IL_0037:  ret         
IL_0038:  ldc.i4.4    
IL_0039:  stloc.0     
IL_003A:  ldloc.0     
IL_003B:  ret         
IL_003C:  ldc.i4.0    
IL_003D:  ret         

ServiceActionType.GetHashCode:
IL_0000:  nop         
IL_0001:  ldarg.0     
IL_0002:  call        Microsoft.FSharp.Core.LanguagePrimitives.get_GenericEqualityComparer
IL_0007:  call        Query_qdoovg+ServiceActionType.GetHashCode
IL_000C:  ret         

ServiceActionType.Equals:
IL_0000:  nop         
IL_0001:  ldarg.0     
IL_0002:  ldnull      
IL_0003:  cgt.un      
IL_0005:  brfalse.s   IL_0026
IL_0007:  ldarg.1     
IL_0008:  isinst      Query_qdoovg.ServiceActionType
IL_000D:  stloc.0     
IL_000E:  ldloc.0     
IL_000F:  brfalse.s   IL_0024
IL_0011:  ldarg.0     
IL_0012:  ldfld       Query_qdoovg+ServiceActionType._tag
IL_0017:  stloc.1     
IL_0018:  ldloc.0     
IL_0019:  ldfld       Query_qdoovg+ServiceActionType._tag
IL_001E:  stloc.2     
IL_001F:  ldloc.1     
IL_0020:  ldloc.2     
IL_0021:  ceq         
IL_0023:  ret         
IL_0024:  ldc.i4.0    
IL_0025:  ret         
IL_0026:  ldarg.1     
IL_0027:  ldnull      
IL_0028:  cgt.un      
IL_002A:  ldc.i4.0    
IL_002B:  ceq         
IL_002D:  ret         

ServiceActionType.Equals:
IL_0000:  nop         
IL_0001:  ldarg.0     
IL_0002:  ldnull      
IL_0003:  cgt.un      
IL_0005:  brfalse.s   IL_0022
IL_0007:  ldarg.1     
IL_0008:  ldnull      
IL_0009:  cgt.un      
IL_000B:  brfalse.s   IL_0020
IL_000D:  ldarg.0     
IL_000E:  ldfld       Query_qdoovg+ServiceActionType._tag
IL_0013:  stloc.0     
IL_0014:  ldarg.1     
IL_0015:  ldfld       Query_qdoovg+ServiceActionType._tag
IL_001A:  stloc.1     
IL_001B:  ldloc.0     
IL_001C:  ldloc.1     
IL_001D:  ceq         
IL_001F:  ret         
IL_0020:  ldc.i4.0    
IL_0021:  ret         
IL_0022:  ldarg.1     
IL_0023:  ldnull      
IL_0024:  cgt.un      
IL_0026:  ldc.i4.0    
IL_0027:  ceq         
IL_0029:  ret         

ServiceActionType.Equals:
IL_0000:  nop         
IL_0001:  ldarg.1     
IL_0002:  isinst      Query_qdoovg.ServiceActionType
IL_0007:  stloc.0     
IL_0008:  ldloc.0     
IL_0009:  brfalse.s   IL_0013
IL_000B:  ldarg.0     
IL_000C:  ldloc.0     
IL_000D:  call        Query_qdoovg+ServiceActionType.Equals
IL_0012:  ret         
IL_0013:  ldc.i4.0    
IL_0014:  ret         

ServiceActionType..ctor:
IL_0000:  ldarg.0     
IL_0001:  call        System.Object..ctor
IL_0006:  ldarg.0     
IL_0007:  ldarg.1     
IL_0008:  stfld       Query_qdoovg+ServiceActionType._tag
IL_000D:  ret 
```

执行指令以获取堆栈上的值`IL_0001: call Query_qdoovg+ServiceActionType.get_ServiceRequest`的位在哪里。`call``ServiceActionType.ServiceRequest`

可以像这样发出：`il.Emit(OpCodes.Call, typeof<ServiceActionType>.GetMethod("get_ServiceRequest"))`

# android - 如何在 Android 中创建自己的 authTokenType？

> ID：15573042
> 
> 赞同：2
> 
> 时间：2013-03-22T14:37:43.330
> 
> 标签：android, authentication, auth-token

我想为我的帐户创建一个身份验证令牌。我创建自己的帐户类型，并将我的帐户添加到我创建应用程序的设备中，该应用程序使帐户成为我的帐户类型。我创建了另一个应用程序，为设备帐户创建身份验证令牌。

```
getAuthToken(account, "mail", false, new GetAuthTokenCallback(), null); 
```

但是这种方法我创建了一个谷歌帐户的令牌。我应该写什么而不是“邮件”来为我的帐户类型创建令牌？

# c++ - 从源代码生成类图

> ID：15573046
> 
> 赞同：5
> 
> 时间：2013-03-22T14:37:56.277
> 
> 标签：c++, uml, enterprise-architect

我正在使用 Enterprise Architect，我希望为大型项目中的一组特定 C++ 对象生成一些类图。通过右键单击特定模型并从上下文菜单中选择代码工程，我可以导入项目的整个源目录并为项目中的所有对象生成类图。

我还可以简单地为单个源文件生成类图。但是，我最理想的是为项目中的一组特定文件生成单独的类图（例如，在其名称中仅包含文本 SNMP 的文件）。任何人都可以帮我应用此过滤器，因为整个项目的类图太大且难以管理，无法以任何身份进行管理。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T16:34:08.430

在 Enterprise Architect 中，一旦您像已经完成的那样导入了整个模型，您就可以创建额外的图表来仅显示您需要的模型部分。事实上，我认为这是正常的做法。

首先使用 Add->New View -> Class View & diagram 创建一个新图表。

然后只将您想要的类从项目浏览器中的模型拖到新图表上。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-22T14:56:03.840

如果您使用 doxygen 注释您的代码，那么您可以自动生成这些类图。例如，请查看我们在 github/nvmecompliance/tnvme 上的代码。如果您不打算修改源代码，我不确定这是否直接适用于您的情况。

# api - Magento API 与 stamps.com / shippingZ 的集成（v1.6 和 v1.7）

> ID：15573049
> 
> 赞同：0
> 
> 时间：2013-03-22T14:37:58.290
> 
> 标签：api, magento, soap, magento-1.7, magento-1.6

我们已经开发了一个 Magento 实例（实际上是两个，因为我们测试了 1.6 和 1.7），我们无法让 stamps.com 访问它的 API。我检查了我们的反向代理和 Apache 中的所有日志，连接已建立，成功，并且关闭正常 - 所以没有任何东西被阻止。但是，API 调用超时，当它遇到 ShippingZmagento.php 时，我们会收到此错误：

```
<Error>
   <Code>1</Code>
   <Description>Please, make sure that you use right URL. Url is case sensitive</Description>
   <MessageDetails>http://mysubdomain.mydomain.com/index.php/api/soap/?wsdl</MessageDetails>
   <Version>3.0.0.55618</Version>
</Error> 
```

FQDN 是正确的，而且我也将直接访问 WSDL — 所以看起来糟糕的地址转换可能发生在 API 级别或其他地方。

我们已经在 DMZ 中尝试了几个测试域（包括域和子域），但无济于事。

你们中的任何人可能会对此有所启发的任何想法将不胜感激。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-05T23:56:59.653

打开 stamps.com 的 php 文件并搜索它们需要更新以在 1.7 magento 上工作的 wsdl 引用：

[Magento 1.7.0.0 上的 SOAP V2 url 是什么](https://stackoverflow.com/questions/10479705/what-is-soap-v2-url-on-magento-1-7-0-0)

# ruby-on-rails - date_select 的多参数属性错误

> ID：15573050
> 
> 赞同：0
> 
> 时间：2013-03-22T14:38:01.207
> 
> 标签：ruby-on-rails

我只将这段代码添加到应用程序中，现在它不允许任何人注册。我收到以下错误：分配多参数属性时出现 1 个错误。错误页面的标题是“ActiveRecord::MultiparameterAssignmentErrors in UsersController#create”。我不确定如何修复，因为不幸的是其他帖子没有帮助。有人有一些解决方案吗？

新的.html.erb：

```
<div class="field">
                    <%= f.label :birthday %>
                    <%= f.date_select :birthday, :start_year => 1995, :end_year => 1930 %>
                    </div> 
```

用户控制器：

```
def create
    @user = User.new(params[:user])
    if @user.save
      UserMailer.registration_confirmation(@user).deliver
      session[:user_id] = @user.id
      redirect_to root_url, notice: "Thank you for signing up!"
    else
      render "new"
    end
  end 
```

开发日志：

```
Started POST "/users" for 127.0.0.1 at 2013-03-22 10:27:31 -0400
Processing by UsersController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"7KAgvcc6yvuhKQGNrJo8UpfsUyuNG16TuMsRj6qst48=", "user"=>{"email"=>"james@james.com", "password"=>"[FILTERED]", "username"=>"james", "zip_code"=>"84784", "gender"=>"women", "age"=>"23", "age_end"=>"39", "birthday(1i)"=>"1995", "birthday(2i)"=>"3", "birthday(3i)"=>"22", "role"=>"admin"}, "commit"=>"Create User"}
Completed 500 Internal Server Error in 100ms

ActiveRecord::MultiparameterAssignmentErrors (1 error(s) on assignment of multiparameter attributes):
  app/controllers/users_controller.rb:18:in `new'
  app/controllers/users_controller.rb:18:in `create' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-13T14:26:15.723

实际问题是数据库中的值在 VARCHAR 上，而应该是 DATE。现在它工作正常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T18:54:25.487

首先确定**生日**的类型应该是`Date`。

在参数中，**生日**的值如下所示。

```
"birthday(1i)"=>"1995", "birthday(2i)"=>"3", "birthday(3i)"=>"22" 
```

但是字段 id **Date**的类型。所以我认为，在更新**生日**字段之前，我们需要生成适当的日期对象，然后需要更新对象。

```
@user.birthday = Date.strptime("#{params['birthday(3i)']}/#{params['birthday(2i)']}/#{params['birthday(1i)']}", "%d/%m/%y") 
```

现在保存对象，希望这次它不会引发任何错误。

如果仍然有错误，请告诉我。

# python - 不能减少 django 在 Windows 上的工作

> ID：15573054
> 
> 赞同：1
> 
> 时间：2013-03-22T14:38:21.043
> 
> 标签：python, django, windows, python-2.7, less

我正在使用这个库在我的 django 项目上运行lesscss： [https ://github.com/andreyfedoseev/django-less/](https://github.com/andreyfedoseev/django-less/)

它在 Mac 和 Linux 上运行良好，但在 Windows 上出现错误并且找不到解决方案。

这是 django 错误：

```
Request Method: GET
Request URL:    localhost:8000
Django Version: 1.4.5
Exception Type: WindowsError
Exception Value:    2 The system cannot find the specified file
Exception Location: C:\Python27\lib\subprocess.py in _execute_child, line 896
Python Executable:  C:\Python27\python.exe
Python Version: 2.7.3
Python Path:    
['C:\\soundgathr\\GemsBand',
 'C:\\Windows\\system32\\python27.zip',
 'C:\\Python27\\DLLs',
 'C:\\Python27\\lib',
 'C:\\Python27\\lib\\plat-win',
 'C:\\Python27\\lib\\lib-tk',
 'C:\\Python27',
 'C:\\Python27\\lib\\site-packages']
Server time:    Fri, 22 Mar 2013 23:42:11 +0100
Error during template rendering

In template C:\soundgathr\GemsBand\static\templates\blocks\head.html, error at line 7 
```

这是我在模板中对 less 的调用：

```
<link rel="stylesheet" href="{% less "less/common.less" %}" /> 
```

和我的 settings.py ：

```
# Less path settings
LESS_OUTPUT_URL = os.path.join(MEDIA_URL, 'LESS_CACHE')
LESS_OUTPUT_DIR = os.path.join(MEDIA_ROOT, 'LESS_CACHE') 
```

同样，它在 Mac 和 Linux 上运行良好。

我认为这是路径和斜杠、反斜杠的问题。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T14:53:11.207

Windows 的 django-less 存在问题。它使用 subprocess 调用*lessc*命令，但是，[正如您在此处看到的](https://stackoverflow.com/questions/3022013/windows-cant-find-the-file-on-subprocess-call)，您需要传递*shell=True*才能使其在 Windows 上运行。

尝试在 django-less/utils.py 中更改以下行

```
p = subprocess.Popen(args, stdout=subprocess.PIPE, stderr=subprocess.PIPE) 
```

经过

```
p = subprocess.Popen(args, stdout=subprocess.PIPE, stderr=subprocess.PIPE, shell=True) 
```

# wcf - 如何使用 INNO 设置部署 WCF 服务？

> ID：15573057
> 
> 赞同：0
> 
> 时间：2013-03-22T14:38:36.363
> 
> 标签：wcf, inno-setup

实际上，我使用 Advance Installer 为 WCF 服务创建了 MSI 包。 **现在我想为 WCF 服务创建 MSI 或 exe 包使用 * *INNO SETUP* *** 我正在使用 Inno Script Studio 5.5.3。我是 Inno 设置的初学者，现在只安装了 Inno 设置应用程序，所以我什么都不知道。我有在 WCF 服务的帮助下创建的 dll。然后我参考 dll 创建了窗口服务应用程序，然后使用服务应用程序创建了 exe 包。

**如何使用 INNO 设置创建 MSI 或 exe 包。可以单独在 WCF 服务 dll 的帮助下创建设置。否则，如果我需要使用 Windows 服务应用程序的 exe，为 INNO Setup 创建 msi 或 exe 包。这怎么可能？请给我一些示例应用程序（或）步骤以继续进行 INNO 设置..**

问候， Lokesh.J

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T15:41:18.643

如果您愿意[`this post`](https://stackoverflow.com/a/1450051/960757)，安装此类服务的 InnoSetup 脚本可能如下所示（只需将其复制并粘贴到 InnoSetup 代码编辑器中并将其保存在硬盘上的某个位置）：

```
[Setup]
AppName=App Name
AppVersion=1.5
DefaultDirName={pf}\Folder Name

[Files]
Source: "C:\SomeFolder\YourService.exe"; DestDir: "{app}"

[Run]
Filename: "{app}\YourService.exe"; Parameters: "--install"

[UninstallRun]
Filename: "{app}\YourService.exe"; Parameters: "--uninstall" 
```

# php - MySQL中锦标赛计分表的查询优化

> ID：15573059
> 
> 赞同：1
> 
> 时间：2013-03-22T14:38:44.513
> 
> 标签：php, mysql, database, query-optimization

我在与锦标赛相关的数据库中有两个表，我需要知道最优化的 SQL 查询以生成正确的整体结果。结果必须显示总得分，减去任何处罚，并且应根据首先达到该分数的人打破并列的分数。

在数据库表中，我有一个事件日志，其中每个分数都是随着球队进行锦标赛而添加的，我还有另一个表，显示哪个球队是哪个锦标赛的一部分。

```
Table "xTournamentTeam" (connects a team to a tournament)
=======================
+-----+------------+--------+--------------+
| nID | Team Name  | TeamID | TournamentID |
+-----+------------+--------+--------------+
|  1  | Team A     | 12     | 25           |
|  2  | Team B     | 13     | 25           |
|  3  | Team C     | 14     | 25           |
|  4  | Team D     | 15     | 25           |
|  3  | Team A     | 12     | 32           |
|  4  | Team B     | 13     | 32           |
+-----+------------+--------+--------------+

Table "nEventLog" (records scoring during a tournament)
=================
+-----+---------------+---------+----------+----------------+-----------------------+
| nID | nTournamentID | nTeamID | nPoints  | nPointsPenalty | nEventTime            |
+-----+---------------+---------+----------+----------------|-----------------------+
|  1  | 25            | 15      | 100      | 0              | 1/24/2013 6:05:14 AM  |
|  2  | 25            | 14      | 100      | 0              | 1/24/2013 6:29:55 AM  |
|  3  | 25            | 14      | 100      | 25             | 1/24/2013 7:09:34 AM  |
|  4  | 25            | 12      | 100      | 0              | 1/24/2013 7:12:28 AM  |
|  5  | 25            | 12      | 100      | 0              | 1/24/2013 8:42:59 AM  |
|  6  | 25            | 12      | 100      | 50             | 1/24/2013 8:43:36 AM  |
|  7  | 25            | 14      | 100      | 0              | 1/24/2013 9:15:24 AM  |
|  8  | 25            | 15      | 100      | 0              | 1/24/2013 9:15:27 AM  |
|  9  | 32            | 12      | 100      | 0              | 1/28/2013 8:33:49 AM  |
|  10 | 32            | 13      | 100      | 25             | 1/28/2013 2:15:12 PM  |
|  11 | 32            | 12      | 100      | 10             | 1/28/2013 7:12:25 AM  |
|  12 | 32            | 13      | 100      | 0              | 1/29/2013 7:18:06 AM  |
+-----+---------------+---------+----------+----------------+-----------------------+ 
```

在上述数据的情况下，我需要的查询应该为锦标赛 #25 生成以下结果：

```
+-------+------------+--------+--------------+---------------+---------------------+-----------------------------+
| nRank | Team Name  | TeamID | TournamentID | nTotalPoints  | nTotalPointsPenalty | nLatestEventTime            |
+-------+------------+--------+--------------+---------------+---------------------+-----------------------------+
|  1    | Team A     | 12     | 25           | 300           | 50                  | 1/24/2013 8:43:36 AM        |
|  2    | Team C     | 14     | 25           | 300           | 25                  | 1/24/2013 9:15:24 AM        |
|  3    | Team D     | 15     | 25           | 200           | 0                   | 1/24/2013 9:15:27 AM        |
|  4    | Team B     | 13     | 25           | 0             | 0                   |                             |
+-------+------------+--------+--------------+---------------+---------------------+-----------------------------+ 
```

出于加载目的，我试图不惜一切代价避免子查询，因为最终查询应尽可能优化。“nRank”列可以以编程方式生成...... MySQL 不应该返回它，但我将它作为参考。

我最接近的查询是这个，但它不返回“Team B”，因为他们在 nTournamentID #25 的“nEventLog”表中没有任何记录：

```
SELECT xTournamentTeam.nTeamName
     , sum(nEventLog.nPoints) AS nTotalPoints
     , xTournamentTeam.nTeamID
     , max(nEventLog.nEventTime) AS nLatestEventTime
     , sum(nEventLog.nPointsPenalty) AS nTotalPenaltyPoints
     , xTournamentTeam.nTournamentID
FROM
  xTournamentTeam
LEFT OUTER JOIN nEventLog
ON xTournamentTeam.nTeamID = nEventLog.nTeamID
WHERE
  xTournamentTeam.nTournamentID = 33
  AND nEventLog.nTournamentID = 33
GROUP BY
  xTournamentTeam.nID
, xTournamentTeam.nTournamentID
ORDER BY
  nTotalPoints DESC
, nLatestEventTime DESC 
```

我当然不是 MySQL 查询方面的专家，而且我已经为此工作了两天，但没有取得多大成功，因此将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T14:47:33.900

我稍微改变了你的逻辑，我认为它有效：

```
SELECT
          xTournamentTeam.TeamName
         , sum(nEventLog.nPoints) AS nTotalPoints
         , xTournamentTeam.TeamID
         , max(nEventLog.nEventTime) AS nLatestEventTime
         , sum(nEventLog.nPointsPenalty) AS nTotalPenaltyPoints
         , xTournamentTeam.TournamentID
FROM
      xTournamentTeam 
LEFT OUTER JOIN nEventLog
    ON xTournamentTeam.TournamentID = nEventLog.nTournamentID AND xTournamentTeam.TeamID = nEventLog.nTeamID
WHERE
      xTournamentTeam.TournamentID = 25          
GROUP BY
      xTournamentTeam.TeamID
    , xTournamentTeam.TournamentID 
    , xTournamentTeam.TeamName
ORDER BY 
    nTotalPoints DESC 
```

如果需要，您可以格式化空值以表示 0 或其他内容。

# c++ - 头文件中应该使用 C++ 命名空间别名吗？

> ID：15573063
> 
> 赞同：15
> 
> 时间：2013-03-22T14:38:55.183
> 
> 标签：c++, namespaces

在C++ 头文件中使用[被认为是不好的做法。](https://stackoverflow.com/questions/5849457/using-namespace-in-c-headers)[在标头中使用命名空间别名](https://stackoverflow.com/questions/1211399/in-c-what-is-a-namespace-alias)`using namespace`是否同样是一个坏主意，并且每个实现文件都应该声明它希望使用的别名？

由于标题是您倾向于使用完全指定名称的地方（因为我们不在标题中使用命名空间），所以别名会很有用，但它们仍然会在`#included`.

这里的最佳做法是什么？命名空间别名的范围是*什么*？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-22T15:46:27.970

如果您将命名空间别名放入您的标头中，该别名将成为您的（公共）API 的一部分。

有时这种技术用于执行 ABI 兼容版本控制（或至少使损坏可见），如下所示：

```
namespace lib_v1 { ... }
namespace lib_v2 { ... }
namespace lib = lib_v2; 
```

或更常见的：

```
namespace lib {
   namespace v1 {}
   namespace v2 {}
   using namespace v2;
} 
```

另一方面，如果您这样做只是为了节省一些打字，那可能不是一个好主意。（仍然比使用`using`指令好得多）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T14:53:23.830

我用这种方式使用未命名的命名空间：

```
#include <whatyouneed>
...
namespace {

typedef ...
using ..
namespace x = ...

// anything you need in header but shouldn't be linked with original name

}

// normal interface
class a: public x::... 
```

# android - Android USB OTG 读取 USB 驱动器

> ID：15573064
> 
> 赞同：5
> 
> 时间：2013-03-22T14:38:55.443
> 
> 标签：android, usb, host, mode

我目前正在开发一个需要 Android 中的 Usb 主机模式的项目（使用 4.2.2）。我需要能够执行标准文件操作，例如列出文件和从 USB 驱动器读取。使用主机模式文档，我已经能够检测到驱动器是否连接，是 USB 大容量存储，并找到各种端点。

我卡住的地方是在那之后该怎么做。我想我并不真正了解控制和批量传输之间的区别，或者在控制传输的情况下甚至发生了什么。不幸的是，我对 USB 本身的了解有些有限，而且我听说文档相当令人生畏。

任何人都可以帮助指导我完成，或指出一个工作示例，我需要做什么才能基本上“安装”USB驱动器？正如我之前所说，我只需要那些列出文件并读取它们的文件操作，而不是写入。我还应该提到目标手机是三星的 Galaxy Nexus。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-11-02T19:37:01.100

控制端点（通常）用于向 USB 设备发送命令。
批量端点（通常）用于将数据传输到 USB 设备。

批量数据的结构没有定义。
但是在控制传输中定义了数据的结构。
主机发送一个 8 字节的数据包，其中包含有关命令的信息（如请求 ID、命令参数、在数据阶段传输的数据长度等）。然后可选地接收/发送一些数据，最后主机/设备都通过移动到状态阶段来同意命令的成功。而已！
但是，魔鬼在细节中，请参阅 USB 规范。:)

* * *

所有 USB 存储器（笔式驱动器、存储卡、硬盘驱动器）都适用于 USB 大容量存储类。

使用大容量存储类，您可以执行内存读写，但其之上的文件系统（例如：EXT3、FAT ...）需要另一个驱动程序。

所以，本质上是读/写文件。您需要连接到设备：

1.  连接到设备（你已经完成了）
2.  识别并控制大容量存储接口
3.  编写大容量存储类驱动程序
4.  编写将使用大容量存储类驱动程序读取/写入文件的文件系统驱动程序
5.  在您的项目中使用文件系统驱动程序 api。

要编写大容量存储类驱动程序，您必须阅读 USB 大容量存储类规范 [http://www.usb.org/developers/docs/devclass_docs/](http://www.usb.org/developers/docs/devclass_docs/)并且您正在寻找的[只是 Bulk](http://www.usb.org/developers/docs/devclass_docs/usbmassbulk_10.pdf)

然后，参考您针对该设计和规范的文件系统。（如果可供使用的话）

* * *

AFAIK，Android 具有连接到 USB 的文件系统安装工具，因此您正在重新发明轮子。

* * *

额外说明：
某些文件系统未公开记录（尽管可能存在反向 engg 信息）（例如：NTFS）
，并且某些文件系统（部分）获得了专利。（例如：脂肪）

# android - 打开磁盘缓存时应该如何处理异常？

> ID：15573065
> 
> 赞同：0
> 
> 时间：2013-03-22T14:38:56.860
> 
> 标签：android

在某些活动中，我需要资源，但在极少数情况下可能无法获得。例如，打开磁盘缓存可能会抛出 IOException。我该如何处理？显示一个对话框，抛出一个 RuntimeException，还有什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T14:46:20.690

这实际上取决于应用程序在做什么。

那部分操作是否需要 100% 的磁盘操作？如果是，那么肯定会发出一个对话框，告诉用户无法访问存储，并且没有它，应用程序将无法运行。

但是，如果它只是一个缓存来加速应用程序的未来打开，请不要为此打扰用户。只是默默地失败，让应用程序下次再试一次。

# linux - 如何编写shell脚本来复制脚本所在目录中的文件

> ID：15573071
> 
> 赞同：-2
> 
> 时间：2013-03-22T14:39:31.253
> 
> 标签：linux, shell

我正在运行一个 shell 脚本，比如 xyz.sh。此 shell 脚本需要将存在于该脚本所在的同一目录中的所有文件复制到另一个文件夹。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T14:42:29.343

```
TARGETDIR='z';for file in *;do test "$file" != "$TARGETDIR" && cp -r "$file" "$TARGETDIR/";done 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T14:51:44.343

您应该确定目录，如果您不是从它自己的目录运行脚本，则放置脚本的位置。所以，它看起来像：

```
cp `dirname $0`/* /path/to/newdir/ 
```

现在，如果您调用脚本，`dirname $0`将为您提供放置脚本的基本路径，并且 cp 会将所有内容从该路径复制到新位置。

# sas - SAS 9.3 中的“For in”循环等效项

> ID：15573077
> 
> 赞同：7
> 
> 时间：2013-03-22T14:39:44.083
> 
> 标签：sas, sas-macro

我正在寻找SAS 9.3 宏语言中***for in*循环**（如在[Python或 R 中）的等价物。](http://docs.python.org/2/tutorial/controlflow.html#for-statements)[DO 循环](http://support.sas.com/documentation/cdl/en/lrdict/64316/HTML/default/viewer.htm#a000201276.htm)似乎是解决方案，但并没有完全按照我的意愿工作。我建立了一种在数据步骤中使用*DO 循环*执行此操作的方法，但它不适用于宏语言。例如，在数据步骤中，此代码正在运行：

```
DATA _NULL_;
  DO i = 1,3,5,9;
    PUT i;
  END;
RUN; 
```

然后按预期出现日志提示：

```
1
3
5
9 
```

当我尝试对宏中的*%DO*循环执行相同操作时，出现错误。

```
%MACRO test();
  %DO i = 1,2,4,9 ;
    %PUT i = &i;
  %END;
%MEND;

%test(); 
```

日志提示这些消息：

```
ERROR: Expected %TO not found in %DO statement.
ERROR: A dummy macro will be compiled 
```

我是 SAS 和 stackoverflow 的新手，所以我希望我的问题不会太愚蠢。在 Python 和 R 中做到这一点非常简单，那么它必须有一种简单的方法在 SAS 中做到这一点。

感谢您的帮助 - J. Muller

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-22T14:47:56.730

我在 SAS 宏语言中遇到过的最接近这种模式的是：

```
%MACRO test();

%let j=1;
%let vals=1 2 4 9;
%do %while(%scan(&vals,&j) ne );
  %let i=%scan(&vals, &j);

  %put &i;

  %let j=%eval(&j+1);
%end;
%MEND;

%test(); 
```

（警告：未经测试，因为我不再有 SAS 安装，我可以对其进行测试。）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-22T14:46:39.150

你当然可以通过这种方式解决它：

```
options mindelimiter=,;
options minoperator;
%MACRO test();
  %DO i = 1 %to 9 ;
    %if &i in (1,2,4,9) %then %do;
    %PUT i = &i;
  %END;
  %end;
%MEND;

%test(); 
```

但是，我认为您通常可以通过多次执行宏而不是尝试控制宏内部的循环来避免这种调用。例如，想象一个数据集和一个宏：

```
data have;
input x;
datalines;
1
2
4
9
;;;;
run;

%macro test(x);
%put &x;
%mend test; 
```

现在您想为该列表中的每个值调用一次 %test() 。好的，很容易做到。

```
proc sql;
select cats('%test(',x,')') into :testcall separated by ' ' from have;
quit;

&testcall; 
```

这和你的 %do in loop 一样有效，除了它是数据驱动的，这意味着如果你想更改调用，你只需更改数据集（或者如果你的数据更改，调用会自动更改！）。一般来说，SAS 在设计为数据驱动编程而不是完全编写的代码时更有效。

# r - 加载“oligo”Bioconductor 包时出错

> ID：15573088
> 
> 赞同：1
> 
> 时间：2013-03-22T14:40:12.007
> 
> 标签：r, package, bioinformatics, bioconductor

在 Windows XP 上，更新到 R 2.15.3 并更新所有库后，我不再能够从 BioConductor 加载“oligo”包。

要重新创建：

```
source("http://bioconductor.org/biocLite.R") #install the BioC installer
biocLite("oligo")  #download and install the oligo package
library("oligo") #attempt to load 
```

得到以下错误：

```
Error in inDL(x, as.logical(local), as.logical(now), ...) : 
unable to load shared object 'C:/Program Files/R/R-2.15.3/library/affxparser/libs/i386/affxparser.dll':
LoadLibrary failure:  The specified procedure could not be found. 
```

它提到的文件“C:/Program Files/R/R-2.15.3/library/affxparser/libs/i386/affxparser.dll”就在它应该在的地方。

sessionInfo() 返回：

```
R version 2.15.3 (2013-03-01)
Platform: i386-w64-mingw32/i386 (32-bit)

locale:
[1] LC_COLLATE=English_United States.1252 
[2] LC_CTYPE=English_United States.1252   
[3] LC_MONETARY=English_United States.1252
[4] LC_NUMERIC=C                          
[5] LC_TIME=English_United States.1252    

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base     

other attached packages:
[1] Biobase_2.18.0      oligoClasses_1.20.0 BiocGenerics_0.4.0

loaded via a namespace (and not attached):
[1] affyio_1.26.0        BiocInstaller_1.8.3  Biostrings_2.26.3   
[4] bit_1.1-10           codetools_0.2-8      ff_2.2-11           
[7] foreach_1.4.0        GenomicRanges_1.10.7 IRanges_1.16.6      
[10] iterators_1.0.6      parallel_2.15.3      stats4_2.15.3       
[13] tools_2.15.3         zlibbioc_1.4.0 
```

.libPaths() 返回：

```
[1] "C:/Program Files/R/R-2.15.3/library"
[2] "C:/Program Files/RStudio/R/library" 
```

# c++ - 在 C++ 中编译时间图“搜索”

> ID：15573089
> 
> 赞同：4
> 
> 时间：2013-03-22T14:40:14.947
> 
> 标签：c++, c++11

我有下一个简化的回调映射。如果代码包含一些错误，请原谅，但它是实际代码的一个非常简化的版本，能够在这里重现它。

```
struct CallbacksMap
{
    template<typename T, typename U>
    void Add(T* obj, void (T::*objCallback)(const U&))
    {
        CallbackBaseType* c = new CallbackType<T, U>(obj, objCallback);
        _callbacks[std::type_index(typeid(U))].push_back(std::unique_ptr<CallbackBaseType>(c));
    }

    template<typename T>
    void Remove(T* obj){...}

    template<typename T>
    void Call(const T& param)
    {
        std::vector<std::unique_ptr<T>>& callbacks = _callbacks[std::type_index(typeid(T))];
        for(auto callback = callbacks.begin(); callback != callbacks.end(); ++callback)
        {
            (*callback)->Call(&param);
        }
    }

    std::map<std::type_index, std::vector<std::unique_ptr<CallbackBaseType>>> _callbacks;
}; 
```

在这个示例中，我可以通过调用`Call(param)`成员函数来调用具有相同参数类型的所有函数。我的问题是`_callbacks`即使密钥在编译时已知，搜索也是在运行时完成的。

我无法根据类型的 type_index 使回调列表静态本地到模板函数，因为我需要跟踪`Remove(T* obj)`函数的所有对象。

您知道如何使内部结构能够避免这种运行时开销吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T15:14:10.737

您可以制作`CallbacksMap`一个模板：

```
template<typename T>
struct CallbacksMap
{
    template<typename U>
    static void Add(T* obj, void (T::*objCallback)(const U&))
    {
        CallbackBaseType* c = new CallbackType<T, U>(obj, objCallback);
        auto& callbacks = callbacks();
        callbacks.push_back(std::unique_ptr<CallbackBaseType>(c));
    }

    static void Remove(T* obj){...}

    static void Call(const T& param)
    {
        auto& callbacks = callbacks();
        for(auto callback = callbacks.begin(); callback != callbacks.end(); ++callback)
        {
            (*callback)->Call(&param);
        }
    }

private:
    std::vector<std::unique_ptr<CallbackBaseType>& callbacks()
    {
        static std::vector<std::unique_ptr<CallbackBaseType> _callbacks;
        return _callbacks;
    }
}; 
```

这样，类型查找由编译器完成。当然，这意味着您必须使用以下方式调用不同的回调：

```
template <typename T>
void CallCallbacks(const T& param)
{
    CallbacksMap<T>(param);
}

CallCallbacks(param); 
```

# python - 当我的用户使用 gae-simpleauth 登录时，如何从 Google 帐户中检索电子邮件地址并将其存储在我的应用程序的用户配置文件中？

> ID：15573092
> 
> 赞同：1
> 
> 时间：2013-03-22T14:40:27.520
> 
> 标签：python, google-app-engine, webapp2, user-permissions

我正在尝试使用 webapp2 的 auth 库构建一个非常简单的用户权限系统。我正在使用[gae-simpleauth](https://code.google.com/p/gae-simpleauth/)让用户使用他们的 Google 帐户登录。我希望将用户的电子邮件地址与允许的电子邮件地址列表进行比较，以确定用户是否有权访问资源，但我不清楚如何将电子邮件地址从 Google 帐户获取到我的帐户中应用程序。用户目前可以登录，但电子邮件地址似乎不是 simpleauth 默认添加到其帐户的内容。

如何使用 gae-simpleauth 从 Google 检索电子邮件地址并将其存储在我的应用程序的用户配置文件中？

我的 gae-simpleauth 实现几乎与示例相同，增加了`get_user_and_flags`获取登录用户并在用户的电子邮件位于 secrets.py 列表中时设置管理员标志的功能。不幸的是，这不起作用，因为用户没有电子邮件属性。

```
# -*- coding: utf-8 -*-
import logging, secrets, webapp2
from google.appengine.api import users
from webapp2_extras import auth, sessions, jinja2
from jinja2.runtime import TemplateNotFound
from lib.simpleauth import SimpleAuthHandler

def get_user_and_flags(self):
    """Returns the current user and permission flags for that user"""
    flags = {}
    user = None
    if self.logged_in:
        user = self.current_user
        flags = {
           'admin': user.email in secrets.ADMIN_USERS,
            }
    return user, flags

def simpleauth_login_required(handler_method):
    """A decorator to require that a user be logged in to access a handler.

    To use it, decorate your get() method like this:

        @simpleauth_login_required
        def get(self):
            user = self.current_user
            self.response.out.write('Hello, ' + user.name())
    """
    def check_login(self, *args, **kwargs):
        if self.request.method != 'GET':
            self.abort(400, detail='The login_required decorator '
                                   'can only be used for GET requests.')

        if self.logged_in:
            handler_method(self, *args, **kwargs)
        else:
            self.session['original_url'] = self.request.url.encode('ascii', 'ignore')
            self.redirect('/login/')

    return check_login

class BaseRequestHandler(webapp2.RequestHandler):
  def dispatch(self):
    # Get a session store for this request.
    self.session_store = sessions.get_store(request=self.request)

    try:
      # Dispatch the request.
      webapp2.RequestHandler.dispatch(self)
    finally:
      # Save all sessions.
      self.session_store.save_sessions(self.response)

  @webapp2.cached_property    
  def jinja2(self):
    """Returns a Jinja2 renderer cached in the app registry"""
    return jinja2.get_jinja2(app=self.app)

  @webapp2.cached_property
  def session(self):
    """Returns a session using the default cookie key"""
    return self.session_store.get_session()

  @webapp2.cached_property
  def auth(self):
      return auth.get_auth()

  @webapp2.cached_property
  def current_user(self):
    """Returns currently logged in user"""
    user_dict = self.auth.get_user_by_session()
    return self.auth.store.user_model.get_by_id(user_dict['user_id'])

  @webapp2.cached_property
  def logged_in(self):
    """Returns true if a user is currently logged in, false otherwise"""
    return self.auth.get_user_by_session() is not None

  def render(self, template_name, template_vars={}):
    # Preset values for the template
    values = {
      'url_for': self.uri_for,
      'logged_in': self.logged_in,
      'flashes': self.session.get_flashes()
    }

    # Add manually supplied template values
    values.update(template_vars)

    # read the template or 404.html
    try:
      self.response.write(self.jinja2.render_template(template_name, **values))
    except TemplateNotFound:
      self.abort(404)

  def head(self, *args):
    """Head is used by Twitter. If not there the tweet button shows 0"""
    pass

class ProfileHandler(BaseRequestHandler):
  def get(self):
    """Handles GET /profile"""    
    if self.logged_in:
      self.render('profile.html', {
        'user': self.current_user, 
        'session': self.auth.get_user_by_session()
      })
    else:
      self.redirect('/')

class AuthHandler(BaseRequestHandler, SimpleAuthHandler):
  """Authentication handler for OAuth 2.0, 1.0(a) and OpenID."""

  # Enable optional OAuth 2.0 CSRF guard
  OAUTH2_CSRF_STATE = True

  USER_ATTRS = {
    'facebook' : {
      'id'     : lambda id: ('avatar_url', 
        'http://graph.facebook.com/{0}/picture?type=large'.format(id)),
      'name'   : 'name',
      'link'   : 'link'
    },
    'google'   : {
      'picture': 'avatar_url',
      'name'   : 'name',
      'link'   : 'link'
    },
    'windows_live': {
      'avatar_url': 'avatar_url',
      'name'      : 'name',
      'link'      : 'link'
    },
    'twitter'  : {
      'profile_image_url': 'avatar_url',
      'screen_name'      : 'name',
      'link'             : 'link'
    },
    'linkedin' : {
      'picture-url'       : 'avatar_url',
      'first-name'        : 'name',
      'public-profile-url': 'link'
    },
    'foursquare'   : {
      'photo'    : lambda photo: ('avatar_url', photo.get('prefix') + '100x100' + photo.get('suffix')),
      'firstName': 'firstName',
      'lastName' : 'lastName',
      'contact'  : lambda contact: ('email',contact.get('email')),
      'id'       : lambda id: ('link', 'http://foursquare.com/user/{0}'.format(id))
    },
    'openid'   : {
      'id'      : lambda id: ('avatar_url', '/img/missing-avatar.png'),
      'nickname': 'name',
      'email'   : 'link'
    }
  }

  def _on_signin(self, data, auth_info, provider):
    """Callback whenever a new or existing user is logging in.
     data is a user info dictionary.
     auth_info contains access token or oauth token and secret.
    """
    auth_id = '%s:%s' % (provider, data['id'])
    logging.info('Looking for a user with id %s', auth_id)

    user = self.auth.store.user_model.get_by_auth_id(auth_id)
    _attrs = self._to_user_model_attrs(data, self.USER_ATTRS[provider])

    if user:
      logging.info('Found existing user to log in')
      # Existing users might've changed their profile data so we update our
      # local model anyway. This might result in quite inefficient usage
      # of the Datastore, but we do this anyway for demo purposes.
      #
      # In a real app you could compare _attrs with user's properties fetched
      # from the datastore and update local user in case something's changed.
      user.populate(**_attrs)
      user.put()
      self.auth.set_session(
        self.auth.store.user_to_dict(user))

    else:
      # check whether there's a user currently logged in
      # then, create a new user if nobody's signed in, 
      # otherwise add this auth_id to currently logged in user.

      if self.logged_in:
        logging.info('Updating currently logged in user')

        u = self.current_user
        u.populate(**_attrs)
        # The following will also do u.put(). Though, in a real app
        # you might want to check the result, which is
        # (boolean, info) tuple where boolean == True indicates success
        # See webapp2_extras.appengine.auth.models.User for details.
        u.add_auth_id(auth_id)

      else:
        logging.info('Creating a brand new user')
        ok, user = self.auth.store.user_model.create_user(auth_id, **_attrs)
        if ok:
          self.auth.set_session(self.auth.store.user_to_dict(user))

    # Remember auth data during redirect, just for this demo. You wouldn't
    # normally do this.
    self.session.add_flash(data, 'data - from _on_signin(...)')
    self.session.add_flash(auth_info, 'auth_info - from _on_signin(...)')

    # Go to the last page viewed
    target = str(self.session['original_url'])
    self.redirect(target)

  def logout(self):
    self.auth.unset_session()
    self.redirect('/')

  def handle_exception(self, exception, debug):
    logging.error(exception)
    self.render('error.html', {'exception': exception})

  def _callback_uri_for(self, provider):
    return self.uri_for('auth_callback', provider=provider, _full=True)

  def _get_consumer_info_for(self, provider):
    """Returns a tuple (key, secret) for auth init requests."""
    return secrets.AUTH_CONFIG[provider]

  def _to_user_model_attrs(self, data, attrs_map):
    """Get the needed information from the provider dataset."""
    user_attrs = {}
    for k, v in attrs_map.iteritems():
      attr = (v, data.get(k)) if isinstance(v, str) else v(data.get(k))
      user_attrs.setdefault(*attr)

    return user_attrs 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T10:54:04.620

希望这有帮助（我有同样的问题）

第一次换`secrets.py`行：

```
'google': (GOOGLE_APP_ID, GOOGLE_APP_SECRET, 'https://www.googleapis.com/auth/userinfo.profile'), 
```

至

```
'google': (GOOGLE_APP_ID,GOOGLE_APP_SECRET, 'https://www.googleapis.com/auth/userinfo.profile https://www.googleapis.com/auth/userinfo.email'), 
```

并`auth.py`改变 USER_ATTRS =

```
{
 ...
 'google'   : {
      'picture': 'avatar_url',
      'email'   : 'email', <-- new attr
      'name'   : 'name',
      'link'   : 'link'
    },
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T14:48:34.060

由于您的问题不包含代码片段，因此我只能猜测您到目前为止所做的事情。鉴于此，以下代码应该可以工作：

```
from google.appengine.api import users

user = users.get_current_user()

email = user.email() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-24T23:03:36.610

按照 nguyên 的想法，我还添加了自定义“_to_user_model_attrs”方法。这是我的一段代码：

```
 def _to_user_model_attrs(self, data, attrs_map):
    """Get the needed information from the provider dataset."""

    user_attrs = {}
    for k, v in attrs_map.iteritems():

        if v =="email":
            attr = (v, data.get(k)[0].get('value'))
        else:
            attr = (v, data.get(k)) if isinstance(v, str) else v(data.get(k))
        user_attrs.setdefault(*attr)

    return user_attrs 
```

这个对我有用！

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-22T17:23:23.000

似乎有几种身份验证方法，混合匹配不起作用。如果您还没有，请务必通读此内容，[https://developers.google.com/appengine/articles/auth](https://developers.google.com/appengine/articles/auth)

有几个部分可能是相对的，具体取决于您在 Google 上所做的其他事情。

Google Apps 帐户转换带来的变化

将 Google Apps 配置为在 Appspot 上进行身份验证

# ruby-on-rails - 用户注销后是否需要删除会话变量？

> ID：15573093
> 
> 赞同：4
> 
> 时间：2013-03-22T14:40:27.577
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, session, session-variables

在 Ruby on Rails 中：

假设我有`session[:my_var] = 'my_val'`

所以这里我的问题是：我们需要`session[:my_var]=nil`在用户退出之前进行设置吗？

或者它会自动释放它拥有的内存。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T15:10:53.990

当用户退出时，Ruby on Rails 不知道您想要保留什么。

比如说你有一个`session[:language]`对每个用户都有用的，甚至是匿名用户。在用户经历了特别选择一种语言的麻烦之后，您不希望将其删除以显示默认语言。

所以，删除你需要的会话对象，喜欢`session[:user]=nil`并保留其余的。如果您有很多要删除的内容，请让自己成为注销助手。

如果您知道可以滑动整个会话，请使用`reset_session`@adcosta 所说的那样。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T14:47:55.893

如果要清理应用会话，请使用 reset_session。

如果你只想清理一个 var 做 session[:my_var]=nil

请参阅rails 中的[会话](http://api.rubyonrails.org/classes/ActionController/Base.html#M000668)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T15:46:58.337

如果您正确设置了身份验证代码，则应该可以处理从内存中释放的问题。以下是我在我的一个应用程序中的做法：

```
#sessions_controller
  def destroy
    reset_session
    redirect_to login_path, notice: 'Logged out'
  end 
```

# uml - Visio 2010 UML 序列图 - 生命线没有足够的连接器

> ID：15573094
> 
> 赞同：9
> 
> 时间：2013-03-22T14:40:29.853
> 
> 标签：uml, visio, sequence-diagram

我正在使用 Microsoft Visio 2010。

我正在绘制一个 UML 序列图。

我添加了对象生命线并开始绘制图表。因为图表很长，所以在某一时刻将没有更多的连接器可以连接箭头。看这张图片：![没有更多的连接器](../Images/3a76993180c83fa32a0fcff6263ac8a6.png)

我知道将这么多流程放在一张图上可能不是一个好主意，但在我看来，这似乎是描述整个流程的最佳方式。我只需要更多的空间来继续这个图表！

那么，如何配置生命线来拥有更多的连接器呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T04:20:58.337

[您可以在“添加、移动或删除连接点](http://office.microsoft.com/en-us/visio-help/add-move-or-delete-connection-points-HP001231166.aspx)”中阅读如何添加更多连接点。这将允许您为创建图表的提议添加连接点，但是我不知道这是否足以让 UML 模型知道消息的来源和目的地。如果您将 UML 模型导出到代码或其他工具，这可能是一个问题。

# unit-testing - 为具有大量计算的程序生成测试用例

> ID：15573095
> 
> 赞同：0
> 
> 时间：2013-03-22T14:40:32.407
> 
> 标签：unit-testing, testing, testcase

我正在编写一个解决这个问题的程序：

[http://acmph.blogspot.com/2010/12/usaco-prime-cryptarithm.html](http://acmph.blogspot.com/2010/12/usaco-prime-cryptarithm.html)

我正在尝试编写测试用例来检查我的解决方案。但是对某个样本输入提出正确的答案需要很多时间。所以一般来说，当你编写这样的程序时，你可以使用哪些方法来绕过大量时间来决定正确的答案？

即使我确实花了那段时间，也很有可能我在某个地方出错了，这样我就没有什么可测试的了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T14:48:54.297

你有一个允许的值范围吗？通常，您应该测试边界以及有效和无效的类。假设您的范围从 1 到 100，那么您将使用 -1, 0, 1 ,99,100,101 进行测试。您还可以使用 -50,50,150 等值进行测试。将值划分为有效和无效的类，你应该没问题。

# android - 如何更改网格视图上的图像？

> ID：15573098
> 
> 赞同：0
> 
> 时间：2013-03-22T14:40:42.400
> 
> 标签：android

我正在使用 Gridview 来显示一组图像。我想要做的是，当用户点击一个图像时，它会显示一种效果，向用户显示某些信息正在无线传输，当手机接收到此类信息时，图像会恢复到其原始状态。类似于动画 gif 的东西。

这是我到目前为止用于 onclick 事件的代码：

```
 gridview.setOnItemClickListener(new OnItemClickListener() {
    public void onItemClick(AdapterView<?> parent, View v, int position, long id) {
     new Thread(new sendingThread()).start();
  } 
```

});

目前，我在图像上有一个蓝色阴影作为唯一的 onclick 事件效果，我想摆脱它并替换我提到的那个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T15:20:18.580

AnimationDrawable，您可以将其嵌入到 gridview 的单个项目中并将其设置为 View.VISIBLE 然后 View.GONE 或膨胀并将其添加到它之上。不确定哪一个是最便宜的。
抢占进一步的问题。在视图获得焦点时启动动画。

我还将通过适配器内的 SparseBooleanArray 跟踪已点击/选择了哪些按钮。你不想产生太多线程，是吗？

# java - java数组错误“需要数组但找到int”

> ID：15573101
> 
> 赞同：1
> 
> 时间：2013-03-22T14:40:48.163
> 
> 标签：java, bluej

我一直收到这个错误，但我不知道是什么原因造成的，有人可以帮我理解吗？

```
private int [] arrayFeeCode = new int [5];

/**
 * Constructor for objects of class Rally
 */
public Rally(int RC, String Venue, int NumDays, int MaxPlaces, int arrayFeeCode)
{
    // initialise instance variables

    arrayFeeCode[0] = 0.00;
    arrayFeeCode[1] = 10.00;
    arrayFeeCode[2] = 15.50;
    arrayFeeCode[3] = 17.75;
    arrayFeeCode[4] = 20.00;

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T14:42:36.057

该参数在您的方法`arrayFreeCode`中声明为 an `int`，但您将其视为`int[]`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T14:47:12.363

您是否将双打放在 int 数组中？您需要将整数放入其中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T15:25:57.007

您不能将 Double 放入整数数组中。

改变

```
private int [] arrayFeeCode = new int [5]; 
```

至

```
private double [] arrayFeeCode = new double [5]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-11-12T02:21:52.407

更改参数`arrayFeeCode`

至

```
public Rally(int RC, String Venue, int NumDays, int MaxPlaces, double[] arrayFeeCode){
     arrayFeeCode[0] = 0.00;
     arrayFeeCode[1] = 10.00;
     arrayFeeCode[2] = 15.50;
     arrayFeeCode[3] = 17.75;
     arrayFeeCode[4] = 20.00;
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2018-11-11T18:58:16.743

```
private double [] arrayFeeCode = new double [5];
public Rally(int RC, String Venue, int NumDays,int MaxPlaces,double[] arrayFeeCode)
{
    arrayFeeCode[0] = 0.00;
    arrayFeeCode[1] = 10.00;
    arrayFeeCode[2] = 15.50;
    arrayFeeCode[3] = 17.75;
    arrayFeeCode[4] = 20.00;
} 
```

# php - 如何在php中循环迭代数组循环？

> ID：15573102
> 
> 赞同：0
> 
> 时间：2013-03-22T14:40:50.737
> 
> 标签：php, arrays

假设我有一个数字，比如说 5。现在假设有 5 个成员。现在每个成员开始从1数到2。那些获得第二个数字的成员离开然后重新计数从下一个成员开始。所以最后在这种情况下，第三个成员最后留下了。

所以我试着像这样实现。首先将成员分配为数组 $v。

```
for($i=1 ; $i<=5 ; $i++)
{
    $v[] = $i;
}

$v1 = array_flip($v);

for($i=0 ; $i<=5 ; $i += 2 )
{   
    unset($v1[$i]);
}

echo "<pre>";
print_r($v1); 
```

**输出**

```
Array
(
    [1] => 0
    [3] => 2
    [5] => 4
) 
```

现在我想计算从键 5（第 5 个成员）到第 1 个（第 1 个成员）的数字，依此类推。

所以最后键 3（第 3 个成员）离开了。
我想打印最后一个离开的成员。

我怎样才能做到这一点？

**我你看不懂然后看看这个** [生存策略](http://www.hackerearth.com/problem/who-will-survive-in-the-end/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T15:13:26.360

这将从数组中删除所有其他项目，直到只剩下一个项目。

```
$members = range(1, 5);

$i = 0;

while(count($members) > 1) {
 $i++;
 if($i == count($members)) $i = 0;
 unset($members[$i]);
 $members = array_values($members);
 if($i == count($members)) $i = 0;
}

echo $members[0]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T20:01:10.077

这是一个面向对象的解决方案，具有易于遵循的 reduce 方法和多个示例。

```
class CountByTwoArrayReducer {

  public function __construct($array) {
    $this->array = $array;
    $this->size  = count($array);
  }

  public function reduce() {
    $this->initialize();

    while($this->hasMultipleItems()) {
      $this->next();
      $this->removeCurrentItem();
      $this->next();
    }

    return $this->finalItem();
  }

  protected function initialize() {
    $this->current   = 1;
    $this->removed   = array();
    $this->remaining = $this->size;
  }

  protected function hasMultipleItems() {
    return ($this->remaining > 1);
  }

  protected function next($start = null) {
    $next = ($start === null) ? $this->current : $start;

    do {
      $next++;
    } while(isset($this->removed[$next]));

    if($next > $this->size)
      $this->next(0);
    else
      $this->current = $next;
  }

  protected function removeCurrentItem() {
    $this->removed[$this->current] = 1;
    $this->remaining--;
  }

  protected function finalItem() {
    return $this->array[$this->current - 1];
  }

}

$examples = array(
  array('A', 'B', 'C', 'D', 'E'),
  range(1, 100),
  range(1, 1000),
  range(1, 10000)
);

foreach($examples as $example) {
  $start = microtime(true);

  $reducer = new CountByTwoArrayReducer($example);
  $result  = $reducer->reduce();

  $time = microtime(true) - $start;

  echo "Found {$result} in {$time} seconds.\n";
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T14:59:37.263

嗯，我可以推荐两个功能：

1.  [http://php.net/manual/en/function.array-keys.php](http://php.net/manual/en/function.array-keys.php)

    这将重新索引您的数组，索引为：0、1、2

2.  [http://php.net/manual/en/control-structures.foreach.php](http://php.net/manual/en/control-structures.foreach.php)

    有了这个，你可以通过任何数组：

    foreach($v1 as $key=>$value) { ...选择最大值等... }

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T15:20:49.617

```
<?php

function build_thieves($thieves)
{
    return range(1, $thieves);
}

function kill_thief(&$cave)
{
    if(sizeof($cave)==1)
    {
        $thief=array_slice($cave, 0, 1);
        echo $thief.' survived';
        return false;
    }

    $thief=array_slice($cave, 0, 1);
    array_push($cave, $thief);

    $thief=array_slice($cave, 0, 1);
    echo $thief.' killed';
    return true;
}

$cave=build_thieves(5);
$got_data=true;
while($got_data)
{
    $got_data=kill_thief($cave);
} 
```

调整为每 2 次，而不是每 3 次。从 1 而不是 0 开始

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-25T18:53:04.253

这个答案有点复杂，但效率更高。它不会创建项目数组然后将其删除。它以一个值（例如 1）开始并计算下一个尚未删除的项目。然后，它将其标记为已删除。如果您实际上有一个项目数组，则最终项目的索引将是 $current - 1。下面的示例使用值 1 到 10,000。在我的机器上，它只需要 0.05 秒多一点。

```
define('SIZE', 10000);

/**
 * Helper function to return the next value
 */
function get_next($current, &$removed) {
  $next = $current;
  do {
    $next++;
  } while(isset($removed[$next]));

  return ($next > SIZE) ? get_next(0, $removed) : $next;
}

$current   = 1;
$removed   = array();
$remaining = SIZE;

$start_time = microtime(true);

while($remaining > 1) {
  $current           = get_next($current, $removed);
  $removed[$current] = 1;
  $remaining         = SIZE - count($removed);
  $current           = get_next($current, $removed);
}

$total_time = microtime(true) - $start_time;

echo "Processed " . SIZE . " items\n";
echo "Winning item: {$current}\n";
echo "Total time: {$total_time} seconds\n"; 
```

# c - wchar_t valgrind 问题 - 大小为 8 的读取无效

> ID：15573104
> 
> 赞同：8
> 
> 时间：2013-03-22T14:41:00.623
> 
> 标签：c, valgrind, wchar-t

我无法弄清楚为什么 Valgrind`Invalid read of size 8`在使用`wchar_t`. 我正在运行带有 valgrind-3.7.0 和 gcc 4.7.2 的 64 位 Ubuntu (3.5.0-25) 系统。

```
#include <stdio.h>
#include <wchar.h>
#include <stdlib.h>
#include <string.h>

int main()
{
    // const wchar_t *text = L"This is a t"; // no Valgrind error
    // const wchar_t *text = L"This is a teeeeeeee"; // no Valgrind error
    const wchar_t *text = L"This is a test"; // Valgrind ERRROR

    wchar_t *new_text = NULL;

    new_text = (wchar_t*) malloc( (wcslen(text) + 1) * sizeof(wchar_t));
    wcsncpy(new_text, text, wcslen(text));
    new_text[wcslen(text)] = L'\0';

    printf("new_text: %ls\n", new_text);

    free(new_text);

    return 0;
} 
```

编译：

```
$ gcc -g -std=c99 test.c -o test
$ valgrind --tool=memcheck --leak-check=full --track-origins=yes --show-reachable=yes ./test 
```

Valgrind 结果：

```
==19495== Memcheck, a memory error detector
==19495== Copyright (C) 2002-2011, and GNU GPL'd, by Julian Seward et al.
==19495== Using Valgrind-3.7.0 and LibVEX; rerun with -h for copyright info
==19495== Command: ./test
==19495== 
==19495== Invalid read of size 8
==19495==    at 0x4ED45A7: wcslen (wcslen.S:55)
==19495==    by 0x4ED5C0E: wcsrtombs (wcsrtombs.c:74)
==19495==    by 0x4E7D160: vfprintf (vfprintf.c:1630)
==19495==    by 0x4E858D8: printf (printf.c:35)
==19495==    by 0x4006CC: main (test.c:16)
==19495==  Address 0x51f1078 is 56 bytes inside a block of size 60 alloc'd
==19495==    at 0x4C2B3F8: malloc (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)
==19495==    by 0x40066F: main (test.c:12)
==19495== 
new_text: This is a test
==19495== 
==19495== HEAP SUMMARY:
==19495==     in use at exit: 0 bytes in 0 blocks
==19495==   total heap usage: 1 allocs, 1 frees, 60 bytes allocated
==19495== 
==19495== All heap blocks were freed -- no leaks are possible
==19495== 
==19495== For counts of detected and suppressed errors, rerun with: -v
==19495== ERROR SUMMARY: 1 errors from 1 contexts (suppressed: 2 from 2) 
```

现在，如果我运行相同但使用“工作字符串”，假设

```
const wchar_t *text = L"This is a t"; // no Valgrind error
// const wchar_t *text = L"This is a teeeeeeee"; // no Valgrind error
// const wchar_t *text = L"This is a test"; // Valgrind ERRROR 
```

我没有问题：

```
==19571== Memcheck, a memory error detector
==19571== Copyright (C) 2002-2011, and GNU GPL'd, by Julian Seward et al.
==19571== Using Valgrind-3.7.0 and LibVEX; rerun with -h for copyright info
==19571== Command: ./test
==19571== 
new_text: This is a t
==19571== 
==19571== HEAP SUMMARY:
==19571==     in use at exit: 0 bytes in 0 blocks
==19571==   total heap usage: 1 allocs, 1 frees, 48 bytes allocated
==19571== 
==19571== All heap blocks were freed -- no leaks are possible
==19571== 
==19571== For counts of detected and suppressed errors, rerun with: -v
==19571== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 2 from 2) 
```

起初我认为字符串大小应该始终是 8 的倍数（可能某些 wcs 读取 8 的块），但有些情况下失败了，然后我认为我必须始终为 NULL 终止符附加 8 个字节`((wcslen(item) + 2) * sizeof(wchar_t))`，它有效，但没有'没有任何意义，因为`sizeof(wchar_t)`- 在我的系统中 - 是 4 个字节，应该足以处理`L'\0'`终止符。

我还阅读了 glibc`wcslen`源代码，但没有什么新内容。我现在正在考虑 Valgrind 问题。各位大佬能不能给个亮点？向 Valgrind 提交错误是否值得？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-22T15:07:52.867

这可能是函数的 SSE 优化造成的`wcslen`；参见例如[https://bugzilla.redhat.com/show_bug.cgi?id=798968](https://bugzilla.redhat.com/show_bug.cgi?id=798968)或[https://bugs.archlinux.org/task/30643](https://bugs.archlinux.org/task/30643)。

优化`wcslen`时，一次读取多个宽字符并使用向量化指令 (SSE) 将它们与`L'\0'`. 不幸的是，valgrind 认为这是一个未初始化的读取——它确实如此，但它是无害的，因为结果`wcslen`不依赖于未初始化的值。

修复方法是更新 valgrind，希望更新的版本能够抑制误报。

# c# - XNA spriteBatch.Draw - 闪烁的精灵

> ID：15573106
> 
> 赞同：0
> 
> 时间：2013-03-22T14:41:14.027
> 
> 标签：c#, xna, spritebatch

我正在 XNA 中编写精灵动画。我使用 spriteBatch.Draw 方法来做到这一点：

```
spriteBatch.Draw(waterTexture, waterPosition, rectWater, Color.White * 1.0f, 0f, Vector2.Zero, 1.0f, SpriteEffects.None, 1.0f);
// 'rectWater' is rect used to cut sprite image from sprite texture 
```

问题是它几乎可以工作，但在动画快结束时它会闪烁一次并继续动画。会是什么呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T16:05:58.593

好的，我知道出了什么问题。

问题是，我更改帧的算法错误，有时会跳到空白帧。看代码：

```
Rectangle rectWater = new Rectangle(((currentFrame % numerOfWaterSpriteFrames) % horizontalNumerOfWaterSpriteFrames) * (int)sizeOfWaterFrame.X, ((aktualnaFramka % numerOfWaterSpriteFrames) / horizontalNumerOfWaterSpriteFrames) * (int)sizeOfWaterFrame.Y, (int)sizeOfWaterFrame.X, (int)sizeOfWaterFrame.Y);
//The correct code 
```

我没有在第一个和第二个 Rectangle 构造函数参数中通过*numerOfWaterSpriteFrames 调制**currentFrame 。*像这样：

 *```
Rectangle rectWater = new Rectangle((currentFrame % horizontalNumerOfWaterSpriteFrames) * (int)sizeOfWaterFrame.X, (aktualnaFramka / horizontalNumerOfWaterSpriteFrames) * (int)sizeOfWaterFrame.Y, (int)sizeOfWaterFrame.X, (int)sizeOfWaterFrame.Y);
//The wrong code 
```

现在好了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T14:49:44.700

如果没有看到动画精灵的代码，我真的无能为力，但是每次在动画中的同一点闪烁都会向我暗示一个无用的帧。可能发生的事情是你在最后画了一个空白框。一个可能的原因是一个直接的错误。如果您使用循环来迭代动画的帧，那么您的索引可能会超出一个（例如，使用`>=`而不是`>`），这意味着您正在绘制一个不应该存在的额外帧。你得到一个空白帧而不是崩溃的事实表明额外的帧落在精灵表中，无论是动画算法的结构还是运气。

不过，我需要查看动画代码以确定发生了什么。*

# css - 如何混合滚动和固定元素？

> ID：15573107
> 
> 赞同：1
> 
> 时间：2013-03-22T14:41:19.750
> 
> 标签：css, wrapper

我想修复许多元素，然后让主文本块滚动。

在我开始编码之前，我想要一些关于最好的方法的建议。我应该将所有固定元素包装在一起，然后在其中包含滚动部分的相对元素吗？

这是我正在尝试做的事情：

![在此处输入图像描述](../Images/febaa982da2f3b2cbbc61d7f8b56d4c5.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T14:48:48.433

我认为您应该为您的页面创建一个主包装器，该包装器将具有相对位置并且您在页面上水平居中（`margin: 0 auto;`例如使用）。

然后在该包装器中添加`<nav>`用于顶部导航的 a 并将其 css 位置属性设置为`fixed`，然后对带有 a 的侧边栏执行相同操作`<aside>`。

然后在包装器中添加`<div id="content"></div>`例如您的内容并将其 css 位置属性设置为`relative`. 如果你想让这个 div 的内容垂直滚动，你可以添加下面的 css ：`overflow: auto;`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T14:49:58.783

如果我理解你，你希望你的内容在不重新加载页面和内容滚动的情况下改变，而不是其他的。

你可以 ：

1.  将你的内容包装成一个`iframe`，这样你就可以改变内容而不用刷新整个页面，用一个固定的`height`，
2.  只需对您的内容使用固定高度`div`，然后设置：

    ```
    #yourDivId{
        overflow:scroll;
        overflow-y:none;
        height: XXX px;    //Fixed height;
    } 
    ```

    *注意：您的鼠标必须悬停在内容上才能滚动。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T14:55:59.057

那么建议？分别创建三个块；用于固定导航、固定侧边栏（用于类别）和滚动主块（文章）。我想这很容易订购。

固定侧边栏将显示多少个类别？如果列表比窗口的屏幕高，则某些类别将被隐藏，除非您将其设为“溢出：自动”。还要考虑用户调整屏幕大小的可能性。

快乐编码！

# openldap - ldap_bind：无效的凭证 (49)

> ID：15573108
> 
> 赞同：12
> 
> 时间：2013-03-22T14:41:23.923
> 
> 标签：openldap

我在**XUBUNTU 12.04上运行****OpenLDAP 2.4-28 。**

 **我正在阅读*“掌握 OpenLDAP”*并与本书一起进行配置。

当我尝试执行以下搜索时（第 47 页）：

```
$ ldapsearch -x -W -D 'cn=Manager,dc=example,dc=com' -b "" -s base 
```

系统提示我输入密码。然后我输入“秘密”，但我收到以下错误：

```
ldap_bind: Invalid Credentials (49). 
```

以下是我的`slapd.conf`：

```
# slapd.conf - Configuration file for LDAP SLAPD
##########
# Basics #
##########
include /etc/ldap/schema/core.schema
include /etc/ldap/schema/cosine.schema
include /etc/ldap/schema/inetorgperson.schema
pidfile /var/run/slapd/slapd.pid
argsfile /var/run/slapd/slapd.args
loglevel none
modulepath /usr/lib/ldap
# modulepath /usr/local/libexec/openldap
moduleload back_hdb

##########################
# Database Configuration #
##########################
database hdb
suffix "dc=example,dc=com"
rootdn "cn=Manager,dc=example,dc=com"
rootpw secret
directory /var/lib/ldap
# directory /usr/local/var/openldap-data
index objectClass,cn eq

########
# ACLs #
########
access to attrs=userPassword
    by anonymous auth
    by self write
    by * none
access to *
    by self write
    by * none 
```

这是ldap.conf：

```
# LDAP Client Settings
URI ldap://localhost
BASE dc=example,dc=com
BINDDN cn=Manager,dc=example,dc=com
SIZELIMIT 0
TIMELIMIT 0 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-26T13:26:37.690

我看不出上面有什么明显的问题。

您*可能*会被覆盖，但命令行选项将`ldap.conf`优先，将在 main中`ldapsearch`忽略，因此唯一可能错误的参数是 URI。（顺序是then或then在*当前*目录中，尽管环境变量也会影响这一点，请参阅。）`BINDDN``ldap.conf``ETCDIR/ldap.conf``~/ldaprc``~/.ldaprc``ldaprc`*`man ldapconf`*

 *尝试显式 URI：

```
ldapsearch -x -W -D 'cn=Manager,dc=example,dc=com' -b "" -s base -H ldap://localhost 
```

或通过以下方式防止默认值：

```
LDAPNOINIT=1 ldapsearch -x -W -D 'cn=Manager,dc=example,dc=com' -b "" -s base 
```

如果这不起作用，则进行一些故障排除（您可能需要`slapd`这些二进制文件的完整路径）：

*   确保您`slapd.conf`正在使用并且正确（以root身份）

    > `slapd -T test -f slapd.conf -d 65535`

    你*可能*有一个剩余的或默认的`slapd.d` *配置目录*，它优先于你的`slapd.conf`（除非你明确指定你的配置`-f`，`slapd.conf`在 OpenLDAP-2.4 中正式弃用）。如果您没有获得多页输出，那么您的二进制文件是在*没有*调试支持的情况下构建的。

*   停止 OpenLDAP，然后`slapd`在启用调试的单独终端/控制台中手动启动（以 root 身份，^C 退出）

    > `slapd -h ldap://localhost -d 481`

    然后重试搜索，看看是否能发现问题（不幸的是，在输出的开头会有很多模式噪音）。（注意：`slapd`不带`-u`/`-g`选项运行可能会更改文件所有权，这可能会导致问题，您通常应该使用这些选项，*可能* `-u ldap -g ldap`）

*   如果启用了调试，那么也试试

    > `ldapsearch -v -d 63 -W -D 'cn=Manager,dc=example,dc=com' -b "" -s base`***

# android - Android 稀疏数组 > 初始化

> ID：15573120
> 
> 赞同：4
> 
> 时间：2013-03-22T14:41:54.687
> 
> 标签：android, initialization, sparse-array, multikey

我必须使用两个键和一个值来实现类似 Hashmap 的分类，比如说`Hashmap<K1, K2, V>`，其中两个键是整数，值是我定义的通用 MyObject。

我读[了这个](https://stackoverflow.com/questions/822322/how-to-implement-a-map-with-multiple-keys)、[这个](https://stackoverflow.com/questions/6768963/multiple-keys-to-single-value-map-java)和[这个](https://stackoverflow.com/questions/7032961/java-how-to-use-a-pair-of-keys-for-hashmap)帖子，我也知道 guava 项目提供[了表格接口](http://guava-libraries.googlecode.com/svn/tags/release09/javadoc/com/google/common/collect/Table.html)，但我不想使用外部库（如果不是严格必要的话）来让我的项目尽可能小。所以我决定使用 SparseArrays：我认为这是更好的选择，因为我的键是 int 并且不一定从零开始并增加。

我这样做初始化：

```
SparseArray<SparseArray<MyObject>> myObjectSparseArray = new SparseArray<SparseArray<MyObject>>(); 
```

现在让我们进入正题。我可以做这种操作吗：

```
MyObject myObject = new MyObject();
myObjectSparseArray.get(3).put(2,myObject); 
```

还是我应该做类似的事情：

```
MyObject myObject = new MyObject();
myObjectSparseArray.put(3, new SparseArray<MyObject>());
myObjectSparseArray.get(3).put(2,myObject) 
```

换句话说：我是否用这一行初始化两个 SparseArrays？

```
SparseArray<SparseArray<MyObject>> myObjectSparseArray = new SparseArray<SparseArray<MyObject>>() 
```

你认为我的情况有更好的实现吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T14:50:09.143

如果您有两个键和一个值，我会使用普通的`HashMap`or`SparseArray`并将这两个键组合成一个值。假设您有一个 key`String`和一个 is`Long`所以您的地图键将是： `(strKey + longKey).hashCode()`。您可以将其用作`Integer`并将其保存到`SparseArray`或用作`String`并使用`HashMap`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T14:53:25.753

有两个嵌套`SparseArray`是违背最初的目的的，因为你将为你的对中的每个唯一的第一个键`SparseArray`分配一个新的。`SparseArray``key`

一个好的解决方案是使用 hashmap 并使用一个带有两个 int 值的键对象（例如**Point**）或一个您定义的只包含两个键的对象。

# django - Django分页器错误

> ID：15573125
> 
> 赞同：0
> 
> 时间：2013-03-22T14:42:05.097
> 
> 标签：django

我一直在尝试将 django paginator 实现到我的白板应用程序中，这样我就可以将图片分成不同的页面。

当我尝试在不同页面之间移动时会出现问题。我将每个页面限制为 1 个对象并上传了几张图片以测试页面之间的分页是否有效，但是当我尝试使用分页方法在不同页面之间移动时，它没有响应.

[http://img854.imageshack.us/img854/3303/94627386.jpg](http://img854.imageshack.us/img854/3303/94627386.jpg)

我一直在研究和测试通过 django 分页文档解决这个问题的方法，我认为问题出在我的模板中的分页模块方法上。

我的观点.py

```
 def Boat(request ,animal_id):
         if not request.user.is_authenticated():
             return HttpResponseRedirect(reverse('world:LoginRequest'))

    picture = Picture.objects.filter(board=animal_id)

    paginator = Paginator(picture,1)
    page = request.GET.get('page')
    try:
             picture = paginator.page(page)

         except PageNotAnInteger:
             picture = paginator.page(1)
         picture = paginator.page(paginator.num_pages)

    return render(request,'boat.html',{'picture':picture }) 
```

我的船.html

```
 {% if picture.object_list %}
 <ul>
    {% for pet in picture.object_list %}

        {% if pet.image %}

    <br>
        <img src= "{{ pet.image.url }}" </a>
 <br>
    </a>
 </li>
        {% endif %}

 <br>
 <a href="{% url world:CommentCreator pet.id %}">View Comment</a>  <a href="{% url      world:LikePicture pet.id %}">Like</a><br/>
 {% for c in picture %}
     {% ifequal c.picture.id pet.id %}

 <br>{{ c.body }}</li>
 <br>{{ c.created}}</li>
 <br>{{ c.user}}</li>
     {% endifequal %}
 % endfor %}

 {% endfor %}
 </ul>
 {% endif %}
 <a href="{% url world:PictureCreator %}">Add Pictures to your board</a><br/>

 {% if number %}
 {{number}}
 {% endif %}
 <a href="{% url world:Profile %}">Return back to Profile</a><br/>

 <br><br><br><br><br>

 <div class="pagination">
     <span class="step-links">
         {% if picture.has_previous %}
             <a href="?page={{ picture.previous_page_number }}">previous</a>
         {% endif %}

         <span class="current">
             Page {{ picture.number }} of {{ picture.paginator.num_pages }}.
         </span>

         {% if picture.has_next %}
             <a href="?page={{ picture.next_page_number }}">next</a>
         {% endif %}
     </span>
 </div> 
```

我的模块的一部分

```
class Picture(models.Model):
    user = models.ForeignKey(User)
    board = models.ForeignKey(Board,blank=False,null=False,related_name='board')
    image = models.FileField(upload_to="images/",blank=True)
    description = models.TextField()
    is_primary = models.BooleanField(default=False)

    def __unicode__(self):
        return self.description 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T14:50:15.780

```
def Boat(request ,animal_id):
    if not request.user.is_authenticated():
        return HttpResponseRedirect(reverse('world:LoginRequest'))

    picture = Picture.objects.filter(board=animal_id)

    paginator = Paginator(picture,1)

    try:
        page = int(request.GET.get('page', '1'))
    except ValueError:
        page = 1

    try:
        picture = paginator.page(page)
    except (EmptyPage, InvalidPage):
        picture = paginator.page(paginator.num_pages)

    picture = paginator.page(paginator.num_pages)

    return render(request,'boat.html',{'picture':picture }) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-10-06T14:08:54.123

```
#this is view 
#this is views files
@login_required(login_url='/login')

# class Base_page_list2(ListView):
def Base_page_list(request,*args, **kwargs):

    # tiket      = Tiket.objects.all()

    # lastest_tiket =Tiket.objects.order_by('-id').all()[:8]
    tiket_list = Tiket.objects.all()
    paginator  = Paginator(tiket_list,2)

    page = request.GET.get('page')
    page_obj = paginator.get_page(page)

    context ={
        'tiket':None,
        'page_obj':page_obj,

    }
    context['tiket']=['page_obj']

    if request.user.is_superuser:
        context['tiket']= Tiket.objects.all()

    elif not request.user.is_hrm:
        raise Http404('شما نمی توانید به این صحفه دسترسی داشته باشید')

    elif request.user.is_mis :
        context['tiket']= Tiket.objects.filter(status_tag='s')

    elif request.user.is_mali:
        context['tiket']=Tiket.objects.filter(status_tag='m')

    elif request.user.is_mosh:
        context['tiket']=Tiket.objects.filter(status_tag='c')

    elif request.user.is_modir:
        context['tiket']=Tiket.objects.filter(status_tag='b')

    elif request.user.is_kz:
        context['tiket']=Tiket.objects.filter(status_tag='k')    

    elif request.user.is_pa:
        context['tiket']=Tiket.objects.filter(status_tag='p')  

    else:
       context['page_obj']['tiket']=Tiket.objects.filter(author=request.user) 
return render(request,'hrm_account/base.html',context)
`enter code here`error

  File "/home/ali/Desktop/testsharen2/sharen/sharen_hrm/views.py", line 128, in Base_page_list
    context['page_obj']['tiket']=Tiket.objects.filter(author=request.user)
TypeError: 'Page' object does not support item assignment 
```

# jquery - jQuery：将两个输入字段的组合镜像到第三个输入

> ID：15573128
> 
> 赞同：1
> 
> 时间：2013-03-22T14:42:18.677
> 
> 标签：jquery

我正在尝试修改现有的 jQuery，它反映了两个输入字段：

```
<script>
    $(document).ready(function()
    {
        $('#forename').bind('keypress', function() 
        {
            $('#displayname').val($(this).val());
        });
    });
</script> 
```

我真正需要的是“显示名称”字段是*两个*字段与 id 的组合：#forename + #surname ... 之间有一个空格。

非常感谢帮助:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T14:45:30.387

我也将事件添加到姓氏，改为`keyup`获取新值：

```
 $('#forename,#surname').on('keyup', function() 
    {
        $('#displayname').val($('#forename').val() + ' ' + $('#surname').val());
    }); 
```

注意：如果 displayname 不是输入，请使用`text`而不是`val`设置其内容

# android - DHCP 和代理设置 Android

> ID：15573130
> 
> 赞同：1
> 
> 时间：2013-03-22T14:42:20.360
> 
> 标签：android, android-wifi, dhcp, wifimanager, wifi

我正在为 Android 创建一个应用程序，该应用程序通过其配置连接到无线网络。我遵循了[如何在 Android 中以编程方式创建和读​​取 WEP/EAP WiFi 配置？](https://stackoverflow.com/questions/4374862/how-to-programatically-create-and-read-wep-eap-wifi-configurations-in-android/4374934#4374934), 连接到 WEP 网络，但它不起作用。当我通过 Wifi 设置连接时，它连接没有任何问题。从以编程方式添加的网络和通过 Wifi 设置添加的网络分析 WifiConfiguration，区别在于它们的 ip 分配和代理设置：

```
 # ProgrammaticallyAdded #
 ID: 8 SSID: "quickframe" BSSID: null PRIO: 40 
 KeyMgmt: NONE Protocols: WPA RSN
 AuthAlgorithms: OPEN SHARED
 PairwiseCiphers: TKIP CCMP
 GroupCiphers: WEP40 WEP104 TKIP CCMP
 PSK: 
 eap: 
 phase2: 
 identity: 
 anonymous_identity: 
 password: 
 client_cert: 
 private_key: 
 ca_cert: 
IP assignment: UNASSIGNED
Proxy settings: UNASSIGNED
LinkAddresses: [] Routes: [] DnsAddresses: [] 

# Added by Wifi Settings #
ID: 8 SSID: "quickframe" BSSID: null PRIO: 17
 KeyMgmt: NONE Protocols: WPA RSN
 AuthAlgorithms: OPEN SHARED
 PairwiseCiphers: TKIP CCMP
 GroupCiphers: WEP40 WEP104 TKIP CCMP
 PSK: 
 eap: 
 phase2: 
 identity: 
 anonymous_identity: 
 password: 
 client_cert: 
 private_key: 
 ca_cert: 
IP assignment: DHCP
Proxy settings: NONE
LinkAddresses: [192.168.0.89/24,] Routes: [0.0.0.0/0 -> 192.168.0.1,] DnsAddresses: [143.106.2.5,143.106.2.2,] 
```

我还尝试通过反射添加 IP 分配和代理设置。但它也没有奏效。

```
ID: 8 SSID: "quickframe" BSSID: null PRIO: 0
 KeyMgmt: NONE Protocols: WPA RSN
 AuthAlgorithms: OPEN SHARED
 PairwiseCiphers: TKIP CCMP
 GroupCiphers: WEP40 WEP104 TKIP CCMP
 PSK: 
 eap: 
 phase2: 
 identity: 
 anonymous_identity: 
 password: 
 client_cert: 
 private_key: 
 ca_cert: 
IP assignment: DHCP
Proxy settings: NONE
LinkAddresses: [] Routes: [] DnsAddresses: [] 
```

有人知道如何获取 IP 和代理设置吗？我相信这些数据将使连接成为可能。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T20:16:59.057

实际上问题出在我的 WEP 密钥中，我设置它就像我提到的链接中显示的那样（[如何以编程方式在 Android 中创建和读取 WEP/EAP WiFi 配置？](https://stackoverflow.com/questions/4374862/how-to-programatically-create-and-read-wep-eap-wifi-configurations-in-android/4374934#4374934)）。

```
wc.wepKeys[0] = "\"" + password + "\""; 
```

当我删除引号时，它起作用了。

```
wc.wepKeys[0] = "" + password + ""; 
```

所以设置SSID时只需要使用引号即可。

```
 wc.SSID = "\"" + ssid + "\""; 
```

希望能帮助到你。

问候。

# sql - T-SQL，可能结合了 MAX 和 BETWEEN？

> ID：15573133
> 
> 赞同：0
> 
> 时间：2013-03-22T14:42:27.937
> 
> 标签：sql, sql-server, tsql

我从 SQL Server 中的 SQL 查询中摘录以下内容：

```
 LEFT JOIN tbl_StuAssess SA (NOLOCK)
     ON CA.ASMT_PK = SA.ASMT_PK
        AND SA.DELT_FLAG = 0
        AND CA.SCRE_MTOD_PK = SA.SCRE_MTOD_PK
        AND CVS.STUD_PK = SA.STUD_PK
        AND(SA.ASMT_DATE BETWEEN @YearStartDate AND @YearEndDate) 
```

这是我的问题，如果我遇到的前 4 个条件，我希望最后一个条件`(SA.ASMT_DATE BETWEEN @YearStartDate AND @YearEndDate)`只返回介于两者之间的最新日期，`@YearStartDate`并且`@YearEndDate`满足所有其他条件。谁能告诉我我该怎么做？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T14:48:01.690

您可以使用子查询执行此操作：

```
LEFT JOIN
(select sa.*,
        row_number() over (partition by asmt_pk, scre_mtod_pk, stud_pk order by asmt_dt desc) as seqnum
 from tbl_StuAssess SA (NOLOCK)
 where SA.DELT_FLAG = 0 and (SA.ASMT_DATE BETWEEN @YearStartDate AND @YearEndDate))
) sa
ON CA.ASMT_PK = SA.ASMT_PK and
   CA.SCRE_MTOD_PK = SA.SCRE_MTOD_PK and
   CVS.STUD_PK = SA.STUD_PK and
   sa.seqnum = 1 
```

这将计算加入前的最后日期。如果连接条件没有过滤掉给定组的一些但不是全部记录，则此方法有效`asmt_pk, scre_mtod_pk, stud_pk`。

另一种方法是`row_number()`在下一个更高级别使用。相同的想法，但没有其余代码，我无法提供代码示例。

# ios - NSURLConnection 无法取消？

> ID：15573141
> 
> 赞同：0
> 
> 时间：2013-03-22T14:42:47.663
> 
> 标签：ios, nsurlconnection

我执行以下操作： `NSURLConnection`加载 url1 ，我取消它，然后， `NSURLConnection`加载 url2 ，但是连接似乎继续加载 url1 直到完成。

# c# - 首先是构造函数还是使用{}？

> ID：15573143
> 
> 赞同：2
> 
> 时间：2013-03-22T14:42:49.110
> 
> 标签：c#, .net, vb.net

我有一个 C# 类，其中默认`constructor`设置属性默认值。然后，在一个 VB.Net 项目中，我正在创建一个实例并使用`With{}`.

我的问题是，构造函数是先发生还是应该发生？我看到一些奇怪的东西，并试图找出从哪里开始寻找。

* * *

缩写代码

```
public class Contact
{
  public Guid ID {get; set;}
  public DateTime? InactiveDate {get; set;}

  public Contact()
  {
    this.ID = Guid.NewGuid();
    this.InactiveDate = null;
  }
}

Public Shared Function GetContact(ByVal contactID As Guid) As Models.Contact
  Dim results As Models.Contact = context.tblContacts.Where(Function(c) c.ID = contactID _
  .Select(Function(c) New Models.Contact() With { .ID = c.ID, .InactiveDate = c.InactiveDate}).SingleOrDefault()

  Return results
End Function 
```

我所看到的是我`InactiveDate`的设置`null`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T14:45:57.077

无论您对对象做什么，构造函数总是先行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T14:50:13.840

构造函数首先出现。顾名思义，它发生在第一次构造对象时，总是在设置属性/字段之前发生。

您可以通过一个简单的控制台应用程序看到这一点

```
Module Module1

    Sub Main()
        Dim n As New N()

        With n
            n.S = "This"
        End With

        Console.ReadKey()
    End Sub

    Class N
        Public Property S As String
            Get

            End Get
            Set(value As String)
                Console.WriteLine("Setter") //written second
            End Set
        End Property

        Sub New()
            Console.WriteLine("Constructor") //written first
        End Sub
    End Class
End Module 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T14:45:51.080

C# 中的[对象初始值设定项语法在](http://msdn.microsoft.com/en-us/library/vstudio/bb397680.aspx)构造函数运行后设置属性。

以下两个代码片段是等效的。

```
Foo x = new Foo();
x.Property1 = "Yay!";
x.Property2 = 100;

Foo x = new Foo()
{
    Property1 = "Yay!",
    Property2 = 100
}; 
```

有人会使用第二种语法有多种原因，例如能够避免在以下赋值中使用单独的局部变量。它还可以帮助澄清某些属性是有意使用对象初始化的，并且在这些分配完成之前该对象不可用。

```
fieldFoo.GetFoo().NextFoo = new Foo { Property1 = "Yay!", Property2 = 100 }; 
```

# sql-server - 在 IntelliJ 中为 SQL SERVER 2008 设置数据源时出现 NullPointerException

> ID：15573144
> 
> 赞同：1
> 
> 时间：2013-03-22T14:42:52.927
> 
> 标签：sql-server, jdbc, intellij-idea, nullpointerexception, datasource

我正在尝试使用 sqljdbc4 在 Intellij 中为 SQL SERVER 2008 设置数据源，并且收到带有 java.lang.NullPointerException 的错误窗口。

我试过的网址： `jdbc:sqlserver://localhost\.:1433;databaseName=mobitrack` `jdbc:sqlserver://localhost:1433;databaseName=mobitrack` 但结果相同。

关于什么可能导致异常的任何想法？

先感谢您。

这是异常的屏幕截图：http: [//i.imgur.com/idIwYqP.png](http://i.imgur.com/idIwYqP.png)

想法日志：

```
2013-03-22 17:13:12,770 [7171087]   INFO - ution.rmi.RemoteProcessSupport - "c:\program files\jetbrains\intellij idea 11.0\jre\jre\bin\java" -Dfile.encoding=UTF-8 -classpath "C:\Program Files\JetBrains\IntelliJ IDEA 11.0\plugins\DatabaseSupport\lib\jdbc-console.jar;C:\Program Files\JetBrains\IntelliJ IDEA 11.0\lib\util.jar;C:\Program Files\JetBrains\IntelliJ IDEA 11.0\lib\annotations.jar;D:\sqljdbc4-4.0.2206.100.jar" com.intellij.persistence.database.console.RemoteJdbcServer com.microsoft.sqlserver.jdbc.SQLServerDriver 
2013-03-22 17:13:13,532 [7171849]   INFO - ution.rmi.RemoteProcessSupport - Port/ID:30598/RemoteDriverImple39ef7c1 
2013-03-22 17:13:14,333 [7172650]  ERROR - j.javaee.dataSource.DataSource - null 
java.lang.NullPointerException
    at com.intellij.javaee.dataSource.DatabaseSchemaLoader.getSchemasToLoad(DatabaseSchemaLoader.java:77)
    at com.intellij.javaee.dataSource.DataSource$1.perform(DataSource.java:324)
    at com.intellij.javaee.dataSource.DataSource$1.perform(DataSource.java:317)
    at com.intellij.javaee.dataSource.DataSource.performJdbcOperation(DataSource.java:257)
    at com.intellij.javaee.dataSource.DataSource.refreshMetaData(DataSource.java:317)
    at com.intellij.javaee.module.view.dataSource.DataSourceUiUtil$4.run(DataSourceUiUtil.java:138)
    at com.intellij.openapi.progress.impl.ProgressManagerImpl$TaskRunnable.run(ProgressManagerImpl.java:457)
    at com.intellij.openapi.progress.impl.ProgressManagerImpl$5.run(ProgressManagerImpl.java:276)
    at com.intellij.openapi.progress.impl.ProgressManagerImpl$2.run(ProgressManagerImpl.java:178)
    at com.intellij.openapi.progress.impl.ProgressManagerImpl.executeProcessUnderProgress(ProgressManagerImpl.java:206)
    at com.intellij.openapi.progress.impl.ProgressManagerImpl.runProcess(ProgressManagerImpl.java:169)
    at com.intellij.openapi.application.impl.ApplicationImpl$8$1.run(ApplicationImpl.java:617)
    at com.intellij.openapi.application.impl.ApplicationImpl$6.run(ApplicationImpl.java:410)
    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:441)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
    at java.util.concurrent.FutureTask.run(FutureTask.java:138)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:662)
    at com.intellij.openapi.application.impl.ApplicationImpl$1$1.run(ApplicationImpl.java:135)
2013-03-22 17:13:14,334 [7172651]  ERROR - j.javaee.dataSource.DataSource - IntelliJ IDEA 11.0  Build #IU-111.69 
2013-03-22 17:13:14,334 [7172651]  ERROR - j.javaee.dataSource.DataSource - JDK: 1.6.0_29 
2013-03-22 17:13:14,334 [7172651]  ERROR - j.javaee.dataSource.DataSource - VM: Java HotSpot(TM) Client VM 
2013-03-22 17:13:14,334 [7172651]  ERROR - j.javaee.dataSource.DataSource - Vendor: Sun Microsystems Inc. 
2013-03-22 17:13:14,335 [7172652]  ERROR - j.javaee.dataSource.DataSource - OS: Windows 7 
2013-03-22 17:13:14,353 [7172670]   INFO - ution.rmi.RemoteProcessSupport - Process finished with exit code 1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T14:44:10.117

是的，那个网址不正确。尝试这个：

```
jdbc:sqlserver://localhost:1433;databaseName=mobitrack 
```

首先要做的事情是：SQL Server 侦听器是否启动并侦听端口 1433？

打开命令外壳并键入`netstat -a`. 如果`LISTENING`在端口 1433 上看不到，Java 将无法连接。

`NullPointerException`并不意味着你没有连接。我敢打赌，还有其他问题。

打印堆栈跟踪。它告诉您有空引用的文件和行号。在调试器中单步执行，看看是什么以及为什么。

我不知道您从哪里得到那个 JDBC 驱动程序 JAR，但我用于 SQL Server 的那个名为 sqljdbc.jar。尝试更新驱动程序 JAR，看看是否有帮助。

我可以用 IntelliJ 做到这一点，所以你也可以。

# python - 任何人都可以确认为什么在 Python 2.6 中返回以下错误吗？这是 3.0 语法吗？

> ID：15573147
> 
> 赞同：1
> 
> 时间：2013-03-22T14:43:13.960
> 
> 标签：python, python-2.6

```
# Get the user's first name.
first_name = input('Enter your first name: ')

# Get the user's last name.
last_name = input('Enter your last name: ')

# Print a greeting to the user.
print('Hello', first_name, last_name) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T14:45:20.783

使用`raw_input`和`print` *声明*：

```
# Get the user's first name.
first_name = raw_input('Enter your first name: ')

# Get the user's last name.
last_name = raw_input('Enter your last name: ')

# Print a greeting to the user.
print 'Hello', first_name, last_name 
```

Python 3 将旧`raw_input`函数重命名为`input`; 在 Python 2 中，`input()`is 的含义与`eval(raw_input())`相反，它将尝试将输入解释为 Python 表达式。

您可能想要安装 Python 3 或考虑切换教程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T14:44:24.147

改用`raw_input`...`input`尝试评估它在 python 2.x 中得到的任何东西

# android - 媒体查询不适用于 Android 4.2.2

> ID：15573149
> 
> 赞同：1
> 
> 时间：2013-03-22T14:43:35.880
> 
> 标签：android, media-queries, html-email

我正在发送 html 电子邮件，而我的 Android 4.2.2 (Nexus 4) 手机没有接收到我尝试过的任何媒体查询。请注意，litmus.com（在不同设备上呈现电子邮件的屏幕截图）表明媒体查询至少在 Android 4.0 上有效。

我试过了：

```
@media only screen and (max-width: 480px) {}
@media only screen and (max-width: 2000px) {}
@media only screen {} 
```

似乎没有任何效果。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T16:32:53.667

您使用的是哪个移动电子邮件客户端？媒体查询在 Android 上的 gmail 中不起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-11T12:25:45.627

答案就在这里。坏消息是，据我所知，从媒体查询中读取的唯一属性是宽度，因此虽然 100% 宽的表格可以正常显示，但请尝试调整文本大小或使链接“拇指就绪”，然后你会倒霉的。

[https://www.campaignmonitor.com/forums/topic/7636/new-gmail-app-supports-media-queries-hooraoh/](https://www.campaignmonitor.com/forums/topic/7636/new-gmail-app-supports-media-queries-hooraoh/)

# wix - WIX 强制安装版本号较低的组件

> ID：15573151
> 
> 赞同：2
> 
> 时间：2013-03-22T14:43:46.073
> 
> 标签：wix, windows-installer, ajaxcontroltoolkit, major-upgrade

我正在使用 AjaxControlToolkit，他们决定更改他们的版本编号方案。此处记录了更改：http: [//stephenwalther.com/archive/2013/01/24/new-january-2013-release-of-the-ajax-control-toolkit.aspx](http://stephenwalther.com/archive/2013/01/24/new-january-2013-release-of-the-ajax-control-toolkit.aspx)

基本上，较新的版本具有较低的文件版本（4.1.7.123 比 4.1.60501.0 新，但 7 比 60501 小。）显然，这会导致我的 MSI 出现问题，因为它现在已经看到具有更高版本号的组件在机器上，因此输出：

```
MSI (s) (7C:10) [10:04:14:996]: Disallowing installation of component: {22C7D2FC-179E-515D-B650-CE20A7B3F9E0} since the same component with higher versioned keyfile exists 
```

我将如何去强制安装这个更新但版本号较低的组件？

PS 个人咆哮：AjaxControlToolkit 家伙通过说“是的，我意识到 7.0123 小于 60,919，但我们的数字用完了。”来证明这个数字的合理性。伙计们，4.2.7.123 会起作用的。你用完了第三个数字，很好，你需要增加第二个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T15:15:03.687

最简单的方法是安装到新位置。这将完全避免检查。一个被黑的事情是伪造`File.Version`MSI中的列，但这只会让你通过一次，最终你需要去一个新的位置来解决这个问题。

您也可以将其设置`REINSTALLMODE`为包含“a”，但这只会为您带来各种悲伤，所以我不能真正推荐它作为一个选项。

注意：AjaxControlToolkit 的家伙确实让您非常头疼。如果他们重命名了他们的 .dll，那将是最有帮助的。似乎他们至少可以做，因为他们刚刚如此糟糕地破坏了他们的世界。

# ruby-on-rails - 尝试使用 Jekyll rake 命令时出错

> ID：15573153
> 
> 赞同：2
> 
> 时间：2013-03-22T14:43:58.507
> 
> 标签：ruby-on-rails, ruby, rake

我正在尝试学习 Jekyll，如果我输入以下命令

```
rake post title="Hello World" 
```

我收到以下错误：

```
rake post title="My First Post"
/usr/lib/ruby/site_ruby/1.8/rubygems/dependency.rb:296:in `to_specs': Could not find 'rake' (>= 0) among 11 total gem(s) (Gem::LoadError)
    from /usr/lib/ruby/site_ruby/1.8/rubygems/dependency.rb:307:in `to_spec'
    from /usr/lib/ruby/site_ruby/1.8/rubygems/core_ext/kernel_gem.rb:47:in `gem'
    from /usr/bin/rake:18 
```

这是我的环境：

```
gem env
RubyGems Environment:
  - RUBYGEMS VERSION: 2.0.3
  - RUBY VERSION: 1.8.7 (2011-06-30 patchlevel 352) [x86_64-linux]
  - INSTALLATION DIRECTORY: /usr/lib64/ruby/gems/1.8
  - RUBY EXECUTABLE: /usr/bin/ruby
  - EXECUTABLE DIRECTORY: /usr/bin
  - RUBYGEMS PLATFORMS:
    - ruby
    - x86_64-linux
  - GEM PATHS:
     - /usr/lib64/ruby/gems/1.8
     - /home/jsmith/.gem/ruby/1.8
  - GEM CONFIGURATION:
     - :update_sources => true
     - :verbose => true
     - :backtrace => false
     - :bulk_threshold => 1000
  - REMOTE SOURCES:
     - https://rubygems.org/ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T14:50:11.897

首先，为了简化事情，您的 Jekyll 应用程序应该使用 bundler*。`cd`到您的应用程序并运行：

```
$ bundle init 
```

这将创建一个 Gemfile。在该 Gemfile 中添加 jekyll：

```
# Gemfile
source 'https://rubygems.org'
gem 'jekyll' 
```

然后运行`bundle install`，它将安装 jekyll 及其所有依赖项：

```
$ bundle install 
```

`bundle exec`然后预先运行 rake ，如下所示：

```
$ bundle exec rake post title="Hello World" 
```

这样做是使用添加到 Gemfile（与当前项目关联的 gem 列表）的 rake 版本。

**说明取自[http://matthodan.com/2012/10/27/how-to-create-a-blog-with-jekyll.html](http://matthodan.com/2012/10/27/how-to-create-a-blog-with-jekyll.html)*

# google-cloud-messaging - 如何通过单个 Google 帐户为 Google Cloud Messaging 生成多个注册 ID

> ID：15573155
> 
> 赞同：2
> 
> 时间：2013-03-22T14:43:59.880
> 
> 标签：google-cloud-messaging

我正在开发企业级应用程序，它使用 GCM。该应用程序将分布在不同的客户及其多个不同的代理之间。由于 GCM 通过生成注册 ID（登录到 Google 帐户）以及与该 Google 帐户同步的设备来工作。如果我想要针对单个 Google 帐户的多个注册 ID 怎么办。因为创建数千个 Google 帐户并将它们同步到数千个设备是相当困难的。我希望单个帐户与执行 GCM 的多个设备同步。我在两台设备上尝试过，但只有首先注册的设备表现良好。其他没有收到推送通知。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T15:29:38.303

好吧，由于我的评论帮助您找到了解决方案，我将根据它们写一个答案：

GCM 为每台设备分配了不同的注册 ID，即使它们都使用相同的 Google 帐户。为了将消息推送到两个设备，只需将消息发送到两个注册 ID。

# python - 列出完整的句子，我需要从列表的其余部分切分并计算一个单词

> ID：15573157
> 
> 赞同：-1
> 
> 时间：2013-03-22T14:44:07.743
> 
> 标签：python, list, slice

我需要从列表中的句子中切出一个单词，然后计算该单词在文件中使用了多少次。我首先阅读列表中的文件。这将整个句子放入列表的一个位置。我希望从字符 7 到 14 中分割句子，将我需要的单词删掉，然后计算该单词在整个文件或列表的其余部分中使用了多少次！需要帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T15:12:54.027

```
file = open("file.txt","r")
substring = file.readline()[6:14]
print(file.read().replace("\n"," ").split(" ").count(substring+1)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T14:46:35.417

> 我想从字符 7 - 14 中切出句子

您应该查看[Python 中的字符串切片](https://stackoverflow.com/questions/509211/the-python-slice-notation)。获取字符串中从位置 7（包括）到 14（不包括）的字符：

```
example = "this is an example string"
what_you_want = example[7:14] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T14:54:53.343

您可以使用 split 方法将一个句子变成一个单词列表，如下所示：

```
sentence = "this is a sentence"
setence_list = sentence.split(" ") 
```

把我们的句子变成

```
['this', 'is', 'a', 'sentence'] 
```

这使您可以使用以下内容对句子进行索引： list[2]

您基本上可以对文件执行相同的操作，然后使用 for 循环来计算单词出现的次数。

# css - 如何在具有许多 img 标签的 div 中选择第一个 img 标签？

> ID：15573159
> 
> 赞同：15
> 
> 时间：2013-03-22T14:44:10.277
> 
> 标签：css, css-selectors

我有这个 html：

```
<div class="image">
   <img src=... />
   <img src= .../>
</div> 
```

而且我只想将css应用于类图像的div的第一个图像，而不必向我的第一个img添加一个类（在这种情况下，我会这样做，`.image .img1`但还有其他方法吗？

非常感谢你的帮助

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-03-22T14:50:26.460

您可以使用`:first-child`选择器来执行此操作。

您也可以使用`:nth-child(1)` （其中 1 是 = 第一个孩子，2 等于第二个孩子等）

最后，更合适的方法是使用`:first-of-type`

例如：

```
div.image img:first-child {} 
```

或者：

```
div.image img:nth-child(1) {} 
```

或者（如果有其他元素，说一个`<h1>`在任何图像之前的元素：

```
div img:first-of-type 
```

如果您有可能拥有一个带有类图像的 div，其中包含图像，并且还有另一个包含图像的 div，如下所示：

**HTML：**

```
<div class="image">
   <img src=... />
   <img src= .../>
   <div class="image">
      <img src=... />
      <img src= .../>
   </div>
</div> 
```

然后使用这些选择器：

例如：

```
div.image > img:first-child {} 
```

或者：

```
div.image > img:nth-child(1) {} 
```

或者：

```
div > img:first-of-type 
```

[关于:first-child](http://www.w3.org/wiki/CSS/Selectors/pseudo-classes/:first-child)和[:nth-child()](http://www.w3.org/wiki/CSS/Selectors/pseudo-classes/:nth-child)以及[:first-of-type](http://www.w3.org/wiki/CSS/Selectors/pseudo-classes/:first-of-type)和[child combinator](http://www.w3.org/wiki/CSS/Selectors/combinators/child)的文档。

请注意，`:nth-child()`and`:first-of-type`是 CSS3 选择器，在使用 IE 时提供了一些有限的支持。有关浏览器支持的详细信息，请参阅[我可以使用 CSS3 选择器。](http://caniuse.com/#feat=css-sel3)

考虑像[Selectivizr](http://selectivizr.com/)这样的东西来帮助标准化 IE。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-22T14:46:23.900

您可以使用`first-child`选择器来做到这一点

```
.image img:first-child
{
  height:500px;
  width:200px;
  border:15px solid Red;    
} 
```

[JS 小提琴示例](http://jsfiddle.net/sAFAm/)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-22T14:46:11.130

':first-child' 选择器似乎是您需要的。

[http://www.w3schools.com/cssref/sel_firstchild.asp](http://www.w3schools.com/cssref/sel_firstchild.asp)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-22T14:59:29.680

如果您想要 DIV 中的第一个图像（并且可能在它之前有其他元素），您需要`first-of-type`而不是`first-child`

```
div > img:first-of-type {} 
```

考虑以下**html**

```
<div>
    <p>paragraph, this is :first-child</p>
    <img src="..."><!-- this is img:first-of-type -->
</div> 
```

更多细节可以在[https://developer.mozilla.org/en-US/docs/CSS/:first-of-type找到](https://developer.mozilla.org/en-US/docs/CSS/:first-of-type)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-01-01T02:45:17.513

```
article>img:first-child {
   border:1px solid #f00;
}
```

```
<article class="image">
   <img src=... />
   <img src= .../>
   <div class="image">
      <img src=... />
      <img src= .../>
      <img src= .../>

   </div>
   <img src= .../>
      <img src= .../>
</div>
```

# ios - 如何使 UISearchBar 的书签图标可访问？

> ID：15573161
> 
> 赞同：9
> 
> 时间：2013-03-22T14:44:19.530
> 
> 标签：ios, objective-c, uisearchbar, voiceover, uiaccessibility

我正在尝试改进应用程序中的旁白支持。我有一个`UISearchBar`. 我已将`showBookMarks`属性设置为`YES`. 我已经设置了一个自定义图像：

```
[searchbar setImage:icon forSearchBarIcon:UISearchBarIconBookmark state:UIControlStateNormal]; 
```

我遇到的问题是，打开 Voice Over 后，无法激活书签图标。如果我输入文本，则会出现“清除”图标，并且可以按预期选择和激活它。但是一旦文本被清除并且我的书签图标出现，它就不能被选中。无论我在哪里点击，画外音矩形总是围绕整个搜索栏，包括图标。

我尝试在图标上设置`accessibilityLabel`和`accessibilityTraits`属性。`UIImage`我已将`UIImage`'`isAccessibilityElement`属性设置为`YES`. 似乎没有任何效果。

有谁知道使书签图标`UISearchBar`可访问需要哪些步骤？

这是搜索栏的完整代码：

```
UISearchBar *bar = [[UISearchBar alloc] init];
[bar sizeToFit];
bar.autoresizingMask = UIViewAutoresizingFlexibleWidth;
bar.placeholder = @"Search listed items";
bar.autocapitalizationType = UITextAutocapitalizationTypeNone;
bar.autocorrectionType = UITextAutocorrectionTypeNo;
bar.keyboardType = UIKeyboardTypeDefault;
bar.showsBookmarkButton = YES;
bar.text = @"";

UIImage *icon = [UIImage imageNamed:@"bookmarks.png"];
icon.accessibilityLabel = @"Bookmarks";
icon.accessibilityTraits = UIAccessibilityTraitButton;
icon.isAccessibilityElement = YES;
[bar setImage:icon forSearchBarIcon:UISearchBarIconBookmark state:UIControlStateNormal];
[bar setPositionAdjustment:UIOffsetMake(-1, -1) forSearchBarIcon:UISearchBarIconBookmark]; 
```

附加信息：

我应该提到，搜索栏与 a 一起使用，`UITableViewController`它与 a 相连`UISearchDisplayController`。搜索栏被设置为表格视图的`headerView`.

所有这些都是在代码中完成的。不涉及故事板或 xib。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-22T22:33:45.177

经过一堆调试，我找到了答案。为了让 Voice Over 识别 的书签图标的自定义图标，图标的`UISearchBar`大小必须完全正确。

使用的图像必须为 40x29 像素（视网膜版本为 80x58 像素）。Voice Over 无法识别任何其他尺寸和图标。

我的图像是 38x31 像素（和 68x62 像素）。

我在原始问题中发布的代码都是正确的。图像大小更新后，一切都开始按预期工作。代码中唯一的变化是删除了`setPositionAdjustment:forSearchBarIcon:`不再需要的调用。

我无法想象为什么图标大小的如此微小差异会是 Voice Over 使用自定义图标和不工作之间的区别。但它就在那里。我希望这对将来的某人有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T14:56:40.450

我已经运行了您问题中的代码，并且书签按钮似乎可以通过 VoiceOver 访问。

![在此处输入图像描述](../Images/d2f1fb4cbef43baa81a8285bdcf33871.png)

会不会有其他东西干扰了您的界面？任何可能在书签按钮顶部找到的不可见视图？您是否正在设置自定义清除按钮？您可以提供任何其他详细信息吗？

但是，它确实没有使用`accessibilityLabel`您传递的 ；它只是使用“按钮”，这很糟糕。我会说这可能是 UIKit 中的一个错误——你应该[提交一个错误](http://bugreport.apple.com)。

# git - 恢复到合并分支之前

> ID：15573167
> 
> 赞同：4
> 
> 时间：2013-03-22T14:44:38.630
> 
> 标签：git

我有我的主分支，然后我正在开发另一个功能，将其合并到我的本地主分支，然后将其推送到 Github。

现在我需要删除由于此合并而发生的所有更改，直到另行通知，但能够在稍后的时间点将它们合并回来。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T15:06:21.253

您必须弄清楚哪些预合并提交代表“主线”，即您要保留的部分。您可以使用以下方法执行此操作`git log`：

```
commit b556759a560650506da58e59f6a7c6a2c4bcb8f4
Merge: e3dac0d 090ad85 
```

...以及对两个父提交的目视检查。（*似乎*总是`git merge foo`会放在`HEAD`父母列表的第一位和`foo`第二位的首位，但我不确定这是否能保证。）

假设`e3dac0d`是主线，所以我们要还原 的合并`090ad85`，那就是

```
git revert -m e3dac0d b556759 
```

有关更多详细信息，请参阅Torvalds 和 Hamano的[恢复错误合并操作指南。](https://www.kernel.org/pub/software/scm/git/docs/howto/revert-a-faulty-merge.txt)

# r - 在 R 中修改 data.table 中的值

> ID：15573171
> 
> 赞同：7
> 
> 时间：2013-03-22T14:45:00.963
> 
> 标签：r, data.table

我是 data.table 的新手，我遇到了这个类的问题。我有一个`data1`包含 2 列的表 ( )：`Couple`和`Ratio`. `Couple`是`Key`data.table 的。我正在尝试修改表中的值。

在以下代码中，`cple`是 的现有值`Couple`。当我运行它时，我得到了评论中显示的结果：

```
data1[cple]$Ratio[1]<-0 # I get more than 50 warnings and it doesn't work
data1$Ratio[1]<-0 # It works perfectly (but it's not the same as the above code) 
```

该错误似乎与 Keys 有关，但我无法弄清楚它的含义。

下面是一个例子：

```
>data1<-data.table(Couple=c("a","a","b","b"),Ratio=1:4)
>data1
   Couple Ratio
1:      a     1
2:      a     2
3:      b     3
4:      b     4

>setkey(data1,Couple)

>data1["a"]$Ratio[1]<-2 #doesn't work warning message

WARNING:
#In `[<-.data.table`(`*tmp*`, "a", value = list(Couple = c("a", "a" :
 # Coerced 'double' RHS to 'integer' to match the column's type; may have truncated precision. Either change the target column to 'double' first (by creating a new 'double' vector length 4 (nrows of entire table) and assign that; i.e. 'replace' column), or coerce RHS to 'integer' (e.g. 1L, NA_[real|integer]_, as.*, etc) to make your intent clear and for speed. Or, set the column type correctly up front when you create the table and stick to it, please.

>data1$Ratio[1]<-2 #works 
>data1
   Couple Ratio
1:      a     2
2:      a     2
3:      b     3
4:      b     4 
```

所以我可以在通过索引访问元素时更改值，但在通过值访问值时不能。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-22T15:10:12.660

当您 ASSIGN是的子类时，您不应该使用`$`with但它会更好，因为它可以通过引用进行更新，而无需副本。每次您尝试使用like分配时，它都会复制整个表格。您应该查看[小插图](http://cran.r-project.org/web/packages/data.table/data.table.pdf)，尤其是更新运算符。在你的情况下 `data1[Couple=='a',Ratio:=c(0L,Ratio[-1])] 就是你想要的。`data.table``data.table``data.frame``$``data1$Ratio[1]<-2``:=`

您可能也想阅读这篇非常好的[帖子](https://stackoverflow.com/questions/10225098/understanding-exactly-when-a-data-table-is-a-reference-to-vs-a-copy-of-another/14293056#14293056)。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-22T16:24:12.087

从您问题的第一部分来看，您实际上想要执行以下操作：

```
data1[cple,Ratio:=c(0L,Ratio[-1])] 
```

这会对 data.table 键中的值进行二进制搜索，`cple`然后在这个子集上工作。整数零与`Ratio`除第一个以外的值组合，结果向量通过引用分配`Ratio`。

# jquery - 使用对象和自执行匿名函数的 jQuery 命名空间

> ID：15573179
> 
> 赞同：4
> 
> 时间：2013-03-22T14:45:25.453
> 
> 标签：jquery, namespaces

我正在研究使用对象和自执行匿名函数创建命名空间。哪个被认为是更好的选择？

使用对象，是否提供一个唯一的名称“myAppName”足以防止冲突？

```
var myAppName = { 
    val1: "abc", 
    val2: "xyz",
    myFunc1: function() {
      return this.val2;  
    }
}

console.log(myAppName.val1);  // abc
console.log(myAppName.myFunc1());  // xyz 
```

使用自执行匿名函数：

```
(function () {
val1 = "abc";
    var val2 = "xyz";

    myFunc1 = function() {
        return val1;   
    }

    var myFunc2 = function() {
        return val2;
    }
})();

console.log(val1);  // abc
console.log(myFunc1());  // abc
console.log(myFunc2());  // xyz 
```

在上面的自执行功能代码中，它们似乎都在执行。在变量和函数名之前使用和不使用 var 是否有含义？我不太明白。有没有办法使变量和函数成为私有和公共的？还是自执行函数中的所有内容都是私有的？

如果我在下面的自执行函数之前使用“var”会发生什么？

```
var myAppName = (function () {
val1 = "abc";
    var val2 = "xyz";

    myFunc1 = function() {
        return val1;   
    }

    var myFunc2 = function() {
        return val2;
    }
})(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T15:36:06.573

将所有代码放在一个命名空间下肯定有助于避免名称冲突。如果确实发生了冲突，那么更改代码来处理它会容易得多。

如果所有内容都需要公开，那么您的第一个代码示例很好。如果您希望某些东西是私有的，请使用匿名的、立即执行的函数，如下所示：

```
var myApp = (function() {
    var privateValue = 'abc'; // Don't forget "var" here.

    function privateFunction() {
        return privateValue;
    }

    return {
        publicValue: 'xyz',

        publicFunction: function() {
            return privateFunction();
        }
    }
})(); 
```

注意匿名函数如何返回一个包含公共变量和函数的对象。如果你没有把“var”放在“privateValue”之前，那么你就没有定义一个局部变量；相反，您正在引用一个全局变量（这实际上是“窗口”对象的一个​​属性。）

如果您使用的是 jQuery，我推荐以下内容：

```
(function(window, $, undefined) {

    var myApp = (function() {
        var privateValue = 'abc'; // Don't forget "var" here.

        function privateFunction() {
            return privateValue;
        }

        return {
            publicValue: 'xyz',

            publicFunction: function() {
                return privateFunction();
            }
        }
    })();

    // Put myApp in the global scope.
    window.myApp = myApp; 

})(window, jQuery); 
```

这样，您可以安全地使用`$()`而不是`jQuery()`. 您也可以安全地`undefined`视为常数。您还可以更轻松地处理有人覆盖了窗口对象的情况。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-23T04:01:58.320

我的第一个答案试图解决您最初的问题并展示如何设置命名空间。我决定添加第二个答案，而不是添加到该答案中，以解决您对我的第一个答案的评论中的问题。

全局变量实际上是`window`对象的属性。如果`var`在函数外部使用，则定义了一个全局变量。如果`var`在函数内部使用，则定义了一个局部变量。如果你引用一个变量`someValue`而不用声明它`var`，它与引用相同`window.someValue`。

以下代码显示了设置全局变量的不同方法，以及定义局部变量的一种方法。

```
window.global1 = 'abc';
global2 = 'def';
var global3 = "ghi";

(function() {
    window.global4 = 'jkl';
    global5 = 'mno';
    var local1 = 'xyz';
})();

console.log(global1); // 'abc'
console.log(global2); // 'def'
console.log(global3); // 'ghi'
console.log(global4); // 'jkl'
console.log(global5); // 'mno'
console.log(local1);  // ReferenceError: local1 is not defined 
```

通常，您希望限制设置全局变量（至少在创建 JavaScript 库时）。命名空间基本上只是一个全局变量。当您将其他所有内容放在该名称空间下时，您只添加了一个全局变量。

`global2`我认为避免设置类似及`global5`以上的全局变量也是一种最佳做法。相反，您应该使用`var`函数的 oustide（如`global3`）或在`window`对象上设置属性（如`global1`and `global4`）。

从我的另一个答案中借用代码示例，我们可以创建一个这样的命名空间：

```
var myApp = (function() {
    var privateValue = 'abc'; // Don't forget "var" here.

    function privateFunction() {
        return privateValue;
    }

    return {
        publicValue: 'xyz',

        publicFunction: function() {
            return privateFunction();
        }
    }
})(); 
```

我们可以通过执行以下操作来实现相同的效果，但我认为这种风格很糟糕：

```
(function() {
    var privateValue = 'abc'; // Don't forget "var" here.

    function privateFunction() {
        return privateValue;
    }

    myApp = {
        publicValue: 'xyz',

        publicFunction: function() {
            return privateFunction();
        }
    }
})(); 
```

在这两种情况下，我们都设置了`myApp`全局变量，但我认为前者比后者更清楚。

需要明确的是，在这两种情况下，我们都会将公共变量称为`myApp.publicValue`并使用 调用公共函数`myApp.publicFunction()`，而在匿名函数之外，我们将无法引用`privateValue`or `privateFunction`。

# php - 将时间格式化为一位数

> ID：15573180
> 
> 赞同：-1
> 
> 时间：2013-03-22T14:45:25.993
> 
> 标签：php, time

```
$value = 90;
echo gmdate("i:s", $value)."<br>"; 
```

输出是：01:30

如何格式化：

```
 1:30 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T14:46:46.763

该`i`字符是指带有前导零的分钟。您可以使用`intval`删除前导零：

```
echo intval(gmdate("i", $value)) . gmdate(":s", $value)  . "<br />"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T14:49:43.077

从技巧箱中：

```
$str = '01:30';

echo substr_replace($str, '', 0, min(1, strspn($str, '0'))); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-22T14:52:03.590

尝试 gmdate("g:s",$value)) （或大写 G 表示 24 小时格式）

查看所有格式选项：[PHP 日期格式](http://www.php.net/manual/en/function.date.php)

# ruby - ruby、程序和后台处理：混合使用的策略

> ID：15573183
> 
> 赞同：1
> 
> 时间：2013-03-22T14:45:34.093
> 
> 标签：ruby, marshalling, background-process, proc

我正在设计一个解决方案，它需要一批对象并将它们传送到一个队列中，以便异步/稍后处理。我的目标是针对delayed_job/resque/sidekiq 的解决方案，其中工作人员被编组/ yamled/任何内容到数据存储中并在单独的进程中处理。

所以，按照我的设计方式，我有这个工人，它接受对象 ID、它的类和必须在每个对象上运行的特定操作。为什么要存储 id 和类名？这些是易于编组的元素（字符串、整数），并且大多数数据存储对编组的数据有一定的限制（是的，列 TEXT 等）。到目前为止，一切都很好。

现在，罪魁祸首：看到那边的动作了吗？它不是方法标识符。它代表一个闭包（它将每个对象作为参数，并发挥其魔力）。这个闭包是一个 Proc，并且 procs (WHY, LORD, WHY????) 不可编组。

所以，这打乱了我的计划。我正在设计一种策略，在某处拥有一个单例标识符，并动态插入一个辅助隐藏方法，该方法返回闭包。因此，作业将使用 id、类名和此辅助方法标识符进行编组。当作业运行时，会在所有对象上运行该操作，最后我将从单例实例中动态删除此方法。为此，此标识符必须是唯一的，为此我使用了 proc 闭包的 object_id。到目前为止，一切都很好。问题是，通常后台队列在与将它们排入队列的进程不同的进程上运行作业。这意味着，当作业运行时，返回我的过程的动态注入方法不可用。

所以，我的问题细分为子问题：

1.  如何有效地将一批对象排队以供以后处理，其中要对它们运行的​​操作不一定是现有方法？
2.  如何解决proc编组？
3.  如何建立进程通信（不使用一些 3rd 方技术消息队列，如果可能的话，只使用普通的 ruby​​）

有谁知道关于我的问题的其他策略？可能是共享内存、进程间通信等等？或者也许是“编组” procs 的策略？

更新：

我设计了一个使用 DRb 的解决方案，其中我分配辅助方法的这个单例对象作为 DRb 对象提供给外部进程。有向它添加危险的公共 API 的缺点。有人知道优点/缺点/替代方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T15:47:46.633

至于 2\. 担心我必须通过“单人娱乐”来实现它。那是在我重新创建 Marshal.dump / Marshal.load 之后（不是 DRY！）

```
def recreate_singleton( obj )
  class << obj
    def method
    end
  end
  return obj
end 
```

# java - 通过java机制反转数组

> ID：15573184
> 
> 赞同：-7
> 
> 时间：2013-03-22T14:45:34.910
> 
> 标签：java, arrays

我是 Java 世界的新手，我正在研究数组，在一次采访中，有人要求我编写一个反转数组的代码，我经历了以下方法.. 使用 Apache commons ArrayUtils 类，但是请告知如何通过java本身来实现同样的事情，下面是我的方法

```
 int[] iArray = new int[] {101,102,103,104,105};
     String[] sArray = new String[] {"one", "two", "three", "four", "five"}; 
     System.out.println("Original int array : " + Arrays.toString(iArray));
     ArrayUtils.reverse(iArray); System.out.println("reversed int array : " + Arrays.toString(iArray)); 
     System.out.println("Original String array : " + Arrays.toString(sArray)); ArrayUtils.reverse(sArray); System.out.println("reversed String array in Java : " + Arrays.toString(sArray)); 
```

输出 ：-

```
Original int array : [101, 102, 103, 104, 105] reversed int array : [105, 104, 103, 102, 101] Original String array : [one, two, three, four, five] reversed String array in Java : [five, four, three, two, one] 
```

请告知我们如何在 java 本身中实现相同的目标。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T14:50:16.600

您可以像这样反转数组：

```
public void reverse(Object [] a){
    for(int i = 0; i < a.length / 2; i++){
        Object temp = a[i]; // swap using temporary storage
        a[i] = a[a.length - i - 1];
        a[a.length - i - 1] = temp;
    }
} 
```

值得注意的是，数组长度是否为奇数并不重要，因为中值将保持不变。我不得不承认我没有测试过这个，但它应该可以工作。

[工作示例](http://ideone.com/3qqRAm)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T14:54:56.733

这里我写了一个例子：

[http://ideone.com/OUA4r9](http://ideone.com/OUA4r9)

```
import java.util.Arrays;

public class Main {
    public static void main(String[] args) {
        String[] array = {"one", "two", "three"};
        String[] reverse = new String[array.length];
        for (int i = 0; i < array.length; i++) {
            reverse[i] = array[array.length - i - 1];
        }
        System.out.println(Arrays.toString(array));
        System.out.println(Arrays.toString(reverse));
    }
} 
```

输出

> 【一二三】
> 【三二一】

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T14:48:11.133

```
for(int i=0; i<iArray.length/2; i++)
{
    int temp;
    iArray[i] = temp;
    iArray[i] = iArray[jArray.length-i-1];
    iArray[jArray.length-i-1] = temp;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T15:00:31.563

写起来应该很简单，只要有逻辑地思考任务即可。

该数组的索引从 0 到 N。要反转顺序，索引 0 处的元素需要与索引 N 交换位置，1 与 N-1 交换位置，依此类推。

当每对索引 i(0...N) k(0...N) 恰好经历了一次交换操作时，您就完成了。

这可以用代码中非常少的逻辑来表达：

```
for (int i=0, j=array.length-1; i<j; ++i, --j) {
    temp = array[i];
    array[i] = array[j];
    array[j] = temp;
} 
```

就是这样。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-22T15:07:14.533

您可以在 Java 中尝试类似的方法来反转给定的数组。

```
Collections.reverse(Arrays.asList(sArray)); 
```

# java - 实现侧边导航以在活动之间切换

> ID：15573191
> 
> 赞同：1
> 
> 时间：2013-03-22T14:45:52.850
> 
> 标签：java, android, android-side-navigation

所以我试图在我的应用程序中实现侧面导航，但我似乎无法找到一种方法来按照我想要的方式实现它。我已经看过多个示例，我从 korovyansk 遇到了这个，它非常适合我想要的模式，但是当按下菜单项时，我似乎无法在活动之间切换。我通过调整“onListItemClick”并启动新的 Intent 让应用程序在活动之间切换，但是当活动启动时，它会占据整个屏幕并与侧边栏动画重叠，因此看起来很草率。我希望它在右侧布局中加载活动，而侧面导航靠近左侧，有点像 facebook。有什么简单的方法可以做到这一点吗？

SampleActivity.java

```
public class SampleActivity extends FragmentActivity {

@TargetApi(11)
@Override

public void onCreate(Bundle savedInstanceState) {
    int poss;

    super.onCreate(savedInstanceState);
    setContentView(R.layout.sample);

    if(Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB){
        getActionBar().hide();
    }
    findViewById(R.id.sample_button).setOnClickListener(
            new View.OnClickListener() {
                @Override
                public void onClick(View v) {
                    int width = (int)TypedValue.applyDimension(TypedValue.COMPLEX_UNIT_DIP, 40, getResources().getDisplayMetrics());
                    SlideoutActivity.prepare(SampleActivity.this, R.id.inner_content, width);
                    startActivity(new Intent(SampleActivity.this,
                            MenuActivity.class));
                    overridePendingTransition(0, 0);
                }
            });
}

} 
```

MenuActivity.java

```
public class MenuActivity extends FragmentActivity{

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    mSlideoutHelper = new SlideoutHelper(this);
    mSlideoutHelper.activate();
    getSupportFragmentManager().beginTransaction().add(com.korovyansk.android.slideout.R.id.slideout_placeholder, new MenuFragment(), "menu").commit();
    mSlideoutHelper.open();
}

@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
    if(keyCode == KeyEvent.KEYCODE_BACK){
        mSlideoutHelper.close();
        return true;
    }
    return super.onKeyDown(keyCode, event);
}

public SlideoutHelper getSlideoutHelper(){
    return mSlideoutHelper;
}

private SlideoutHelper mSlideoutHelper;

} 
```

SlideoutHelper.java

```
public class SlideoutHelper {

private static Bitmap sCoverBitmap = null;
private static int sWidth = -1;

public static void prepare(Activity activity, int id, int width) {
    if (sCoverBitmap != null) {
        sCoverBitmap.recycle();
    }
    Rect rectgle = new Rect();
    Window window = activity.getWindow();
    window.getDecorView().getWindowVisibleDisplayFrame(rectgle);
    int statusBarHeight = rectgle.top;

    ViewGroup v1 = (ViewGroup) activity.findViewById(id).getRootView();
    v1.setDrawingCacheEnabled(true);
    Bitmap source = Bitmap.createBitmap(v1.getDrawingCache());
    v1.setDrawingCacheEnabled(false);
    if (statusBarHeight != 0) {
        sCoverBitmap = Bitmap.createBitmap(source, 0, statusBarHeight, source.getWidth(), source.getHeight() - statusBarHeight);
        source.recycle();
    } else {
        sCoverBitmap = source;
    }
    sWidth = width;
}

public SlideoutHelper(Activity activity) {
    this(activity, false);
}

public SlideoutHelper(Activity activity, boolean reverse) {
    mActivity = activity;
    mReverse = reverse;
}

public void activate() {
    mActivity.setContentView(R.layout.slideout);
    mCover = (ImageView) mActivity.findViewById(R.id.slidedout_cover);
    mCover.setImageBitmap(sCoverBitmap);
    mCover.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {
            close();
        }
    });
    int x = (int) (sWidth * 1.2f);
    if (mReverse) {
        @SuppressWarnings("deprecation")
        final android.widget.AbsoluteLayout.LayoutParams lp = new android.widget.AbsoluteLayout.LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT, x, 0);
        mActivity.findViewById(R.id.slideout_placeholder).setLayoutParams(lp);
    } else{
        @SuppressWarnings("deprecation")
        final android.widget.AbsoluteLayout.LayoutParams lp = new android.widget.AbsoluteLayout.LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT, 0, 0);
        mActivity.findViewById(R.id.slideout_placeholder).setLayoutParams(lp);
    }
    initAnimations();
}

public void open() {
    mCover.startAnimation(mStartAnimation);
}

public void close() {
    mCover.startAnimation(mStopAnimation);
}

protected void initAnimations() {
    int displayWidth = ((WindowManager) mActivity.getSystemService(Context.WINDOW_SERVICE)).getDefaultDisplay().getWidth();
    final int shift = (mReverse ? -1 : 1) * (sWidth - displayWidth);
    mStartAnimation = new TranslateAnimation(
            TranslateAnimation.ABSOLUTE, 0,
            TranslateAnimation.ABSOLUTE, -shift,
            TranslateAnimation.ABSOLUTE, 0,
            TranslateAnimation.ABSOLUTE, 0
            );

    mStopAnimation = new TranslateAnimation(
            TranslateAnimation.ABSOLUTE, 0,
            TranslateAnimation.ABSOLUTE, shift,
            TranslateAnimation.ABSOLUTE, 0,
            TranslateAnimation.ABSOLUTE, 0
            );
    mStartAnimation.setDuration(DURATION_MS);
    mStartAnimation.setFillAfter(true);
    mStartAnimation.setAnimationListener(new AnimationListener() {

        @Override
        public void onAnimationStart(Animation animation) {
        }

        @Override
        public void onAnimationRepeat(Animation animation) {
        }

        @Override
        public void onAnimationEnd(Animation animation) {
            mCover.setAnimation(null);
            @SuppressWarnings("deprecation")
            final android.widget.AbsoluteLayout.LayoutParams lp = new android.widget.AbsoluteLayout.LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT, -shift, 0);
            mCover.setLayoutParams(lp);
        }
    });

    mStopAnimation.setDuration(DURATION_MS);
    mStopAnimation.setFillAfter(true);
    mStopAnimation.setAnimationListener(new AnimationListener() {

        @Override
        public void onAnimationStart(Animation animation) {
        }

        @Override
        public void onAnimationRepeat(Animation animation) {
        }

        @Override
        public void onAnimationEnd(Animation animation) {
            mActivity.finish();
            mActivity.overridePendingTransition(0, 0);
        }
    });
}

private static final int DURATION_MS = 400;
private ImageView mCover;
private Activity mActivity;
private boolean mReverse = false;
private Animation mStartAnimation;
private Animation mStopAnimation;
} 
```

MenuFragment.java 公共类 MenuFragment 扩展 ListFragment {

```
@Override
public void onActivityCreated(Bundle savedInstanceState) {
    super.onActivityCreated(savedInstanceState);
    setListAdapter(new ArrayAdapter<String>(getActivity(),
            android.R.layout.simple_list_item_1, new String[] { " First", " Second", " Third", " Fourth", " Fifth", " Sixth"}));
    getListView().setCacheColorHint(0);
}

@Override
public void onListItemClick(ListView l, View v, int position, long id) {
    super.onListItemClick(l, v, position, id);

     ((MenuActivity)getActivity()).getSlideoutHelper().close();

}

} 
```

xml..

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/inner_content"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:background="@drawable/bg_android" >

<RelativeLayout
    android:layout_width="fill_parent"
    android:layout_height="45dip"
    android:paddingLeft="2dip"
    android:paddingRight="2dip"
    android:background="#bb000000">

    <Button style="@android:style/Widget.Button.Small"
        android:id="@+id/sample_button"
        android:layout_width="35dip"
        android:layout_height="wrap_content"
        android:layout_marginRight="10dip"
        android:layout_centerVertical="true"
        android:layout_alignParentLeft="true"
        android:text=">" />

    <TextView android:layout_width="wrap_content"

        android:layout_height="wrap_content"
        android:layout_toRightOf="@id/sample_button"
        android:layout_centerVertical="true"
        android:textSize="19sp"
        android:textColor="#ffffff"
        android:text="Facebook-like slide-out nav"/>
</RelativeLayout> 
```

滑出.xml

```
<AbsoluteLayout xmlns:android="http://schemas.android.com/apk/res/android"
 android:layout_width="fill_parent"
 android:layout_height="fill_parent">

<FrameLayout
    android:id="@+id/slideout_placeholder"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="#777777"/>

<ImageView
    android:id="@+id/slidedout_cover"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:scaleType="fitXY" />

</AbsoluteLayout> 
```

编辑：好的试图避免这种情况，但现在似乎不可避免。所以我试图使用 FragmentTransaction。

在 onListItemClick 下的 MenuFragment.java 中，我有：

```
 @Override
     public void onListItemClick(ListView l, View v, int position, long id) {
    super.onListItemClick(l, v, position, id);

     ((MenuActivity)getActivity()).getSlideoutHelper().close();
     Fragment dummy = new Dummy();
     FragmentTransaction transaction = getFragmentManager().beginTransaction();

     // Replace whatever is in the fragment_container view with this fragment,
     // and add the transaction to the back stack
     transaction.replace(R.id.inner_content, dummy);
     transaction.addToBackStack(null);

     // Commit the transaction
     transaction.commit();
} 
```

Dummy.java

```
public class Dummy extends Fragment{
 View blag;
 @TargetApi(11)

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

}
 public View onCreateView(LayoutInflater inflater, ViewGroup container,
                      Bundle savedInstanceState) {

   blag = inflater.inflate(R.layout.samplex, container, false);
  //(samplex is same as sample.xml just different logo
  return blag;
}

} 
```

但是它现在崩溃并出现错误消息：03-22 11:54:24.469: E/AndroidRuntime(31673): java.lang.IllegalArgumentException: No view found for id 0x7f060000 for fragment Dummy{42540328 #1 id=0x7f060000} 任何想法为什么会这样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T15:08:13.257

这是一个简单的答案：

不要使用活动！

只有一个 Activity 的布局包含 R.id.menu（菜单）和 R.id.content（示例名称），然后您将使用 Fragment 和 FragmentTransaction 以及 FragmentManager 来操作 R.id.content 中的片段（而菜单的动画效果很好）。

此外，我建议您将这个库用于菜单：[https](https://github.com/jfeinstein10/SlidingMenu) ://github.com/jfeinstein10/SlidingMenu我以前使用过它，它真的很好用。

快乐编码。

# gridview - 连接 Extjs 存储中的两个字段

> ID：15573197
> 
> 赞同：3
> 
> 时间：2013-03-22T14:46:15.580
> 
> 标签：gridview, extjs, store

嗨，我正在尝试在网格中插入一个新行，但其中的一列实际上是两个值的串联，我想做这样的事情：

```
 var scopename = newScopeRef.down('textfield[id=scope_name]').getValue();
    var prodname = newScopeRef.down('combobox[id=prd]').getRawValue();
    var relname = newScopeRef.down('combobox[id=p_rls]').getRawValue();

 var editscopegrid = newScopeRef.down('gridpanel[id=editedscope_grid]'); //my grid
    editscopegrid.getView().getStore().removeAll();
    editscopegrid.getView().getStore().add({
                       name_scope : scopename,
                       prodrel : concat(prodrel + ',' prodname + ' ' + relname)});  
    editscopegrid.getView().refresh(); 
```

如您所见，我想`prodrel`将网格列的现有值与组合框的值连接起来，`prodname`并`relname`用空格分隔。

我正在使用带有 MVC 架构的 Extjs 4.x，上面是我面板上按钮“更新”的单击事件的处理程序。

请问我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T22:06:45.703

如果您有明确的模型定义，您可以添加一个`prodrel`带有`convert`函数的字段并在那里进行连接。

```
Ext.define('MyModel', {
    extend : 'Ext.data.Model', 
    fields : [
        'name_scope',
        'prodname',
        'relname',
        {
            name    : 'prodrel', 
            convert : function (v, rec) {
               return rec.get('prodname') + ' ' + rec.get('relname');
            }
        }
    ]
} 
```

然后你可以像这样向你的商店添加一个实例......

```
editscopegrid.getView().getStore().add({
                       name_scope : scopename,
                       prodname   : prodname,
                       relname    : relname}); 
```

# javascript - 找不到 Javascript 函数

> ID：15573202
> 
> 赞同：1
> 
> 时间：2013-03-22T14:46:20.803
> 
> 标签：javascript, jquery

我在 document.ready() 中有以下代码

```
if ($("#site-master").length > 0) {

    setMinContentHeight();

    function setMinContentHeight() {

        // removed for clarity
    }
} 
```

我只是检查页面是否正确（#site-master），然后调用我的最小高度函数，但是我在 firebug 中收到以下错误：ReferenceError: setMinContentHeight is not defined。

我不是 javascript 专家，但这怎么可能呢？如果我将它移到 document.ready() 之外，该函数就可以工作。我已经检查并到达了 if 语句中的代码。

另外，这是实现我想要的最佳方式吗？

提前致谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-22T14:48:53.023

**永远不要**`if`在or语句中声明你的函数`for`：

```
function setMinContentHeight() {
    // removed for clarity
}

if ($("#site-master").length > 0) {
    setMinContentHeight();
} 
```

如果我们处理[**ECMAScript 规范**](http://www.ecma-international.org/ecma-262/5.1/)，根据[**第 12 章**](http://www.ecma-international.org/ecma-262/5.1/#sec-12)，`if`子句被认为是一个*语句*（以及`for`, `while`, `with`,`try/catch`等）。

因此，遵循*语义*部分的*注释：*

 *> 众所周知，一些广泛使用的 ECMAScript 实现支持`FunctionDeclaration`使用`Statement`. 然而，应用于此类*FunctionDeclarations*的语义实现之间存在显着且不可调和的变化。由于这些不可调和的差异，使用 a`FunctionDeclaration`作为 `Statement`结果会导致代码在实现之间不能可靠地移植。建议 ECMAScript 实现要么禁止这种用法，`FunctionDeclaration`要么在遇到这种用法时发出警告。`Statement`ECMAScript 的未来版本可能会定义用于在上下文中声明函数的替代可移植方式 。

这意味着在这种情况下我们不能保证一致的行为，因此，`strict mode`如果在*语句*中声明了函数，我们总是会得到异常。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-22T14:53:59.237

首先，阅读[和](https://stackoverflow.com/questions/336859/javascript-var-functionname-function-vs-function-functionname?rq=1)理解函数声明与表达式[之间的区别。`var functionName = function() {}``function functionName() {}`](https://stackoverflow.com/questions/336859/javascript-var-functionname-function-vs-function-functionname?rq=1)现在你有什么？两者都没有，因为函数声明需要位于函数/脚本代码的顶层 -[不允许](http://kangax.github.com/nfe/#function-declarations-in-blocks)将它们嵌套在块中。它被称为[*函数语句*](http://kangax.github.com/nfe/#function-statements)，是非标准的并且工作方式不同。

把它放在`if`-block 之外：

```
// here
if ($("#site-master").length > 0) {
    setMinContentHeight();
}
// or here:
function setMinContentHeight() {
    …
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-22T14:48:19.647

```
if ($("#site-master").length > 0) {
    setMinContentHeight();
}
function setMinContentHeight() {
        // removed for clarity
} 
```

您需要在全局范围内声明您的函数。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-22T14:48:24.687

**在定义函数后**调用，不要在 if 块内定义函数：

```
function setMinContentHeight() {
    // removed for clarity
}

if ($("#site-master").length > 0) {
    setMinContentHeight();
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-22T14:51:34.230

也许你的浏览器兼容性有问题，但它的工作原理是这样的：

对：

```
n();
function n(){ alert('1'); } 
```

错误的：

```
n();
var n = function(){ alert('1'); } 
```*

# android - Android - 以编程方式添加视图会忽略某些样式属性

> ID：15573206
> 
> 赞同：5
> 
> 时间：2013-03-22T14:46:34.643
> 
> 标签：android, android-layout, android-view

当用户点击另一个按钮时，我正在以编程方式将一个按钮添加到我现有的 Android 视图中。它在功能方面起作用，但某些样式信息似乎被忽略了。

我通过使用仅包含按钮的单独布局来添加按钮，并预先填充样式值。

`<Button xmlns:android="http://schemas.android.com/apk/res/android" style="@style/FileStorageDeleteButton"></Button>`

通过使用`getLayoutInflater`，我可以将此按钮添加到布局中。

`buttonDelete = (Button) getLayoutInflater().inflate(R.layout.pete_button_filedelete, null);`

`LinearLayout layout = (LinearLayout)findViewById(R.id.layoutFileStorage);`

`layout.addView(buttonDelete, 1);`

我在 values 目录中有一个 XML 文件，它为 设置颜色、文本等`@style/FileStorageDeleteButton`，其中大部分在添加时被按钮使用。但是由于某种原因，四个边距属性`layout_below`被忽略了。

当此按钮出现时，我在 LogCat 中没有收到任何错误，就好像样式根本没有被应用。如果我在该布局的 XML 中手动包含按钮，它会成功使用所有样式。

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T14:58:55.547

您需要在调用时传递布局参数，`addView()`因为布局参数与单个视图无关，它们总是在**周围视图**的上下文中获取。有一些变体`addView()`需要`LayoutParams`争论。

**编辑添加更多细节**

您应该创建一组`LinearLayout.LayoutParams`并在其中设置边距，然后将其传递给`addView()`

`layout_below`无论如何都会被忽略`LinearLayout`（该属性仅与 a 相关`RelativeLayout`。当您调用时，`addView(buttonDelete, 1)`您会告诉它在线性布局中放置视图的位置。

# php - 致命错误：在非对象上调用成员函数 format()

> ID：15573213
> 
> 赞同：0
> 
> 时间：2013-03-22T14:46:55.830
> 
> 标签：php, mysql, date

我正在使用 PHP 脚本来获取以下字符串日期：

```
"Wednesday, 6 March, 2013" 
```

我想将其格式化为 MySQL `date`，以便可以将其插入 MySQL 数据库。

我收到以下错误。

```
Fatal error: Call to a member function format() on a non-object in 
C:\easyphp\www\twinfocus\submitcalendaritem.php on line 13 
```

PHP 脚本：

```
if (isset($_POST['weddingdate'])){
    $weddingdate = $_POST['weddingdate'];
}
else {
    $weddingdate = '';
}

$date = Date::createFromFormat("D F d, Y", $weddingdate);
$processedweddingdate = $date->format("Y-m-d");

echo $processedweddingdate; 
```

我不确定发生了什么。这个错误是什么意思？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T15:08:41.610

```
"Wednesday, 6 March, 2013"

"D F d, Y" 
```

这些如何组合在一起？

请阅读手册中对格式参数的说明。

# node.js - 在 CQL 查询中更改 Helenus 一致性级别

> ID：15573215
> 
> 赞同：7
> 
> 时间：2013-03-22T14:47:02.093
> 
> 标签：node.js, cassandra, thrift, helenus

我正在使用 Cassandra 及其 Node.JS 驱动程序 Helenus 进行一些测试。有没有办法使用 CQL 更改查询的一致性级别？

Helenus 文档仅显示了使用 Helenus Thrift 连接器执行此操作的示例，但我想使用 CQL 连接器。

我试图像这样查询 Cassandra

```
conn.cql(cqlRead, vals, {ConsistencyLevel:ANY, gzip:true}, cb); 
```

但是节点抛出了这个错误

```
ReferenceError: ANY is not defined 
```

然后，我将 'ANY' 更改为 '1' 并且 node 运行了代码，但我没有注意到任何区别。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T14:59:42.480

问题是您不能将 CL.ANY 用于读取，只能用于写入。ANY 表示将提交日志写入计为成功，即使没有可用的副本也是如此。由于查询无法读取提交日志，因此使用 CL.ANY 进行读取没有意义，因此 Cassandra 不会让您这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-11T16:54:09.280

我看过[Helenus 文档](https://github.com/simplereach/helenus#thrift)，他们以这种方式设置了一致性

```
cf.get('foo', {consistency:helenus.ConsistencyLevel.ONE}, function(err, row){
     // Your code here
}) 
```

您是否尝试过一致性：helenus.ConsistencyLevel.ANY。我认为您可能会得到与**ReferenceError不同的另一个**

# ruby-on-rails - 在rails中重定向后如何防止“表单重新提交”

> ID：15573217
> 
> 赞同：1
> 
> 时间：2013-03-22T14:47:03.130
> 
> 标签：ruby-on-rails, forms, google-chrome

我在成功提交表单时遇到问题。它重定向到显示动作。如果我刷新页面（ctrl+r），它会打开一个提示，询问我是否要“确认重新提交表单”，我不想这样做。

有没有人以前见过这个问题并且知道如何解决它？

这是一些代码：

表单视图：

```
= simple_form_for @book_request do |f|
  = f.input :title
  .actions= f.submit 
```

演出视图

```
%dl
  %dt Title
  %dd= @book_request.title 
```

我的控制器：

```
...

respond_to :html

def show
  respond_with(@book_request = BookRequest.find(params[:id]))
end

def new
  respond_with(@book_request = BookRequest.new)
end

def create
  @book_request = BookRequest.new(params[:book_request])
  @book_request.save
  respond_with(@book_request)
end

def edit
  respond_with(@book_request = BookRequest.find(params[:id]))
end

def update
  @book_request = BookRequest.find(params[:id])
  @book_request.update_attributes(params[:book_request])
  respond_with(@book_request)
end

... 
```

更新：

这个问题看起来已经解决了。我刚刚更新到 chrome 版本 26.0.1410.43，它按预期工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T09:53:29.733

这是 chrome 中的错误。应该很快修复。有关更多信息，请参阅[https://code.google.com/p/chromium/issues/detail?id=177855](https://code.google.com/p/chromium/issues/detail?id=177855)

编辑：如果您想要临时修复（出于开发目的），您可以将任何 get 参数添加到提交 url。处理 POST 后，像往常一样重定向。

```
= simple_form_for @book_request, url: books_url(time: DateTime.now) do |f|
  = f.input :title
  .actions= f.submit 
```

# wicket - 通过 Wicket 中的 URL 使操作可用

> ID：15573220
> 
> 赞同：3
> 
> 时间：2013-03-22T14:47:14.643
> 
> 标签：wicket, wicket-1.6

对于 Facebook 等服务的身份验证，我们重定向到 Facebook，他们进行身份验证，然后重定向回来。一旦他们重定向回来，我们的代码就会运行，它会做一些事情，然后显示一个响应页面。显示哪个响应页面取决于许多事情。

我们现在做的是：

```
class RedirectTargetPage extends WebPage {
    @Override public void onBeforeRender() {
        String getParam = getRequest().getQueryParameters()
            .getParamterValue("get-param");
        ......
        if (...) setResponsePage(PageOne.class);
        else if (...) setResposnePage(PageTwo.class);
        else ... // etc
    }
} 
```

然后我们使用[`urlFor(Class<Page>)`](http://ci.apache.org/projects/wicket/apidocs/6.0.x/org/apache/wicket/request/cycle/RequestCycle.html#urlFor%28java.lang.Class,%20org.apache.wicket.request.mapper.parameter.PageParameters%29)找到该页面的 URL，将其传递给 Facebook，Facebook 在身份验证后重定向回我们，一切正常。

然而，这真的不是一个页面吗？我的意思是它只是位于 URL 后面的一段代码，最后调用`setResponsePage`. 在我看来，我所写的只是处理请求的东西，似乎我可以创建一个`IRequestHandler`并使用以下内容获取它的 URL [`urlFor(IRequestHandler)`](http://ci.apache.org/projects/wicket/apidocs/6.0.x/org/apache/wicket/request/cycle/RequestCycle.html#urlFor%28org.apache.wicket.request.IRequestHandler%29)：

```
class RedirectTarget implements IRequestHandler {
    @Override public void respond(IRequestCycle requestCycle) {
        String getParam = requestCycle.getRequest().getQueryParameters()
            .getParameterValue("get-param");
        ....
        if (...) requestCycle.setResposnePage(..)
    }
} 
```

唉，`urlFor(new RedirectTarget())`交付`null`！怎么了？我能做些什么？压倒`onBeforeReder`一切的作品，但它似乎并不优雅....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T16:31:34.503

虽然您可以`RedirectTargetPage`通过基于您现在用于定义将使用哪个重定向页面的相同条件加载不同的组件来创建页面，但您也应该能够走这`IRequesthandler`条路。

来自 JavaDoc：

> 返回请求处理程序的呈现 URL，如果无法呈现处理程序，则返回 null。

由于某种原因，您的处理程序似乎无法呈现。你有没有走过`urlFor`来看看哪里出了问题？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-22T09:20:30.387

我有同样的问题，还使用了`IRequestHandler`. 不过，我不确定这是否是一个好主意，因为这样的处理程序是*按实例*安装的，而不是像页面那样*按类型安装的。*

因此，与页面不同，您可以挂载请求处理程序的单个实例，例如：

`mount(new MountMapper("path", CustomHandler.get()));`

get() 方法检索 CustomHandler 的单例实例。然后，您可以像这样生成链接：

```
CharSequence relativeUrl = RequestCycle.get().urlFor(CustomHandler.get());
String link = RequestCycle.get().getUrlRenderer().renderFullUrl(Url.parse(relativeUrl)); 
```

这对我有用。

但是，我看不到在生成链接时如何指定查询参数。对于页面，您将使用其自己的特定参数映射创建页面的新实例，但由于我们必须使用已安装的一个实例，所以这不起作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-13T14:24:58.750

我可能会误解，但是为什么您需要所有这些额外的非页面内容？

您将与用户做某事，为什么不将他们直接发送到他们想要访问的页面并使用命名参数来引导他们？

例子：

```
@MountPath(value = "/handlerpage/${fromparam}")
public class MyHandlerPage extends WebPage {
    public MyHandlerPage(PageParameters parameters) {
    super(parameters);
    final StringValue fromParam = parameters.get("fromparam");
        // Do my thing with page depending on the param.
    }
} 
```

这将允许您跳过所有时髦的请求处理程序代码。如果需要，您甚至可以使用选项参数进行设置。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T17:35:37.313

您可以为此使用自定义请求映射器：

```
public class FacebookResponseMapper implements IRequestMapper {

  @Override
  public int getCompatibilityScore(Request request) {
    if (getPage(request.getUrl()) != null) {
      return Integer.MAX_VALUE;
    }
    return 0;
  }

  @Override
  public IRequestHandler mapRequest(Request request) {
    Class<? extends Page> page = getPage(request.getUrl());
    if (page != null){
      return new RenderPageRequestHandler(new PageProvider(page));
    }

    return null;
  }

  /**
   * Get a page for the given url.
   */
  protected Class<? extends Page> getPage(Url url) {
    if (!url.getPath().startsWith("from-facebook") {
      return null;
    }

    // detect proper page depending on url parameters
    ...
  }

  @Override
  public Url mapHandler(IRequestHandler requestHandler) {
    return null;
  }
} 
```

在您的应用程序中注册它：

```
getRootRequestMapperAsCompound().add(new FacebookResponseMapper()); 
```

# java - HttpSession 超时后重定向

> ID：15573221
> 
> 赞同：10
> 
> 时间：2013-03-22T14:47:14.963
> 
> 标签：java, jsf, jakarta-ee, timeout

我一直在查看有关此主题的许多帖子，但找不到适合我的解决方案。

我正在使用带有 JSF 2.0 的 Java EE 6（部署在 JBoss AS 7.1 上）

在我的`web.xml`我有：

```
 <session-config>
        <session-timeout>1</session-timeout>
    </session-config> 
```

我**希望在会话自动超时时将用户重定向到登录页面。**

我尝试过的：

**方法一：使用过滤器**

我尝试了以下过滤器：

```
@WebFilter()
public class TimeOutFilter implements Filter {

        @Override
        public void init(FilterConfig filterConfig) throws ServletException { 
        }

        @Override
        public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain) throws IOException,
        ServletException {
        System.out.println("filter called");
        final HttpServletRequest req = (HttpServletRequest) request;
        final HttpSession session = req.getSession(false);
        if (session != null && !session.isNew()) {
            chain.doFilter(request, response);
        } else {
            System.out.println("Has timed out");
            req.getRequestDispatcher("/logon.xthml").forward(request, response);
        }
    }

    @Override
    public void destroy() {
    }
} 
```

在`web.xml`我尝试过的

```
<filter-mapping>
    <filter-name>TimeOutFilter</filter-name>
    <url-pattern>*.xhtml</url-pattern>
</filter-mapping> 
```

和

```
<filter-mapping>
    <filter-name>TimeOutFilter</filter-name>
    <servlet-name>Faces Servlet</servlet-name>
</filter-mapping> 
```

过滤器在每个请求上都被调用（在控制台中记录“fiter called”）。**但是，会话超时时不会调用它。**

**方法二：HttpSessionLister**

我曾尝试使用`HttpSessionListerner`. 调用的方法具有以下签名：

```
public void sessionDestroyed(HttpSessionEvent se) {
} 
```

我无法重定向到特定页面。当我想重定向用户时，我通常使用`NavigationHandler`from ，`FacesContext`但在这种情况下没有`FacesContext`（`FacesContext.getCurrentInstance()`返回`null`）。

根据这篇[文章](https://stackoverflow.com/questions/953572/how-can-i-get-httpservletrequest-when-in-an-httpsessionlistener)， HttpListener 无法重定向用户，因为它不是请求的一部分。

**问题**

解决这个问题的最佳方法是什么？我该怎么做才能使上述两种方法之一起作用？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-22T15:01:53.087

只要客户端没有发送 HTTP 请求，您就无法发送 HTTP 响应。就那么简单。这就是 HTTP 的工作原理。如果任何网站能够在没有客户端请求的情况下不经意地推送 HTTP 响应，那么 Internet 看起来会非常不同。

如果您基本上是单页 web 应用程序，则基于客户端键盘/鼠标活动的基于 JavaScript 的心跳（如[在此处](https://stackoverflow.com/questions/3201991/auto-log-off-once-the-session-expires/3203250#3203250)回答）或元`refresh`标头（如在[此处](https://stackoverflow.com/questions/2543094/how-to-redirect-to-index-page-if-session-time-out-happend-in-jsf-application/2544766#2544766)回答）将是解决方案（因此，您实际上没有使用会话范围但视图范围），但如果您在同一会话中的多个选项卡/窗口中打开页面，则效果不佳。

从理论上讲，Websockets 是向客户端推送内容的正确解决方案，但这又需要一个活动会话。鸡蛋问题。此外，它不适用于目前仍然相对广泛使用的旧浏览器，因此它目前应该仅用于渐进增强。

最好的办法是只定义一个错误页面来处理最终用户在会话过期时调用操作的情况。另请参阅[javax.faces.application.ViewExpiredException：无法恢复视图](https://stackoverflow.com/questions/3642919/javax-faces-application-viewexpiredexception-view-could-not-be-restored/3642969#3642969)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-06T05:20:26.103

在 HttpSessionListerner 中，您不能向用户发送任何响应。实现此目的的一种好方法是轮询，浏览器定期发送 HTTP 请求并立即收到响应。
有很多方法可以做到这一点：

1.  您可以使用普通的旧 javascript 进行轮询：这将在跨浏览器环境中工作。

    函数刷新（）{

    ```
    // make Ajax call here, inside the callback call:

    setTimeout(refresh, 5000);

    // ... 
    ```

    }

    ```
    // initial call, or just call refresh directly 
    ```

    设置超时（刷新，5000）；

2.  您可以使用 Web 套接字。Web 套接字规范位于以下链接：

    [http://dev.w3.org/html5/websockets/](http://dev.w3.org/html5/websockets/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-08-03T16:43:35.997

我知道您正在使用 java-EE6 和 JSF，但如果您可以尝试使用 JSP 代码或将下面的代码转换为在 servlet 中工作。假设您使用用户名检查会话，在 web.xml 文件中设置会话超时后。请注意 JSP 代码和 servlet 代码相似。您的会话验证代码可能如下所示。（JSP 格式）如果用户名用作数据库中的主键。

```
 <%
    String un = (String)session.getAttribute("un");

    if(un == null){
   response.sendRedirect(login page);
   return;
}else{
      code to process login form
}
    %> 
```

Servlet 代码可能如下所示

```
String un = (String)session.getAttribute("un");
if(un == null){
   response.sendRedirect(loginPage);
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2015-08-14T06:52:05.077

您可以使用过滤器并执行以下测试：

```
HttpSession session = request.getSession(false);
if(session != null && !session.isNew()) {
    chain.doFilter(request, response);
}
 else {enter code here
    response.sendRedirect("/login.jsp");
 } 
```

# api - 将联系人自动导入 Infusionsoft

> ID：15573222
> 
> 赞同：-1
> 
> 时间：2013-03-22T14:47:15.297
> 
> 标签：api, infusionsoft

我们使用潜在客户生成服务，该服务会定期向我们发送潜在客户电子邮件。我们收到的电子邮件与访问者的姓名、电话号码、电子邮件地址和联系表文本格式一致。他们还有一个包含所有这些信息的 API 提要。

现在我们手动输入每个联系人，这是相当低效的。

根据 InfusionSoft 的文档，我能想到的唯一真正的实现是创建一个 cron 作业，该作业从潜在客户生成服务 API 提要中提取数据，然后通过他们的 API 将其推送到我们的 Infusionsoft 帐户。但这似乎非常迂回。我错过了一些明显的进口方式吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T03:12:54.573

您所描述的是将数据从一台计算机获取到另一台计算机的相当典型的过程。一点都不迂回。一旦实施，它是快速有效的。

棘手的部分是在不经过双重选择过程的情况下激活新联系人。我使用以下内容通过单选项获取联系人。

1.  使用 ContactService.add 添加联系人
2.  使用 ContactService.addToGroup 标记新联系人
3.  使用 APIEmailService.optIn 选择新的电子邮件地址

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-25T16:44:52.387

您没有说您使用的是哪个潜在客户生成 API。也许他们提供了一种将信息发布到您选择的 URL 的方法，这使您可以轻松地使用 Infusionsoft API 创建联系人。

如果他们不提供发布此信息的方法，那么您始终可以将电子邮件视为侦听器，而不是使用 cron。当您收到来自特定潜在客户的电子邮件时，请查找联系信息。但是，如果您无法抓住最新的领先优势，这将不是很有效。

您可以使用[此方法](http://help.infusionsoft.com/api-docs/contactservice#add)将联系人添加到 Infusionsoft。如果您使用 PHP SDK，联系人将被设置为选择加入，因为 SDK 将在创建联系人后调用 APIEmailService.optIn 方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-12T05:42:04.397

你的解决方案是正确的。您可以使用 Infusionsoft SDK 轻松完成此操作。这是 C# SDK 创建联系人（潜在客户）的代码。

```
 const string application = "ab123";
        const string apiKey = "<API Key>";

        var customer = new Customer(application, apiKey);
        var client = customer.Connect();

        client.MethodListener = new ConsoleMethodListener();

        client.ContactService.Add(setter =>
        {
            setter.Set(c => c.FirstName, "FirstName1");
            setter.Set(c => c.LastName, "LastName1");
            setter.Set(c => c.Company, "FirstCompany");
            setter.Set(c => c.Email, "firstlast1@xyz.com");
            setter.Set(c => c.Leadsource, "Website");
            setter.Set(c => c.Phone1, "0405879856");
        }); 
```

# macos - xcode 4.5 目标 Mac OS 10.7 和 10.6.8

> ID：15573225
> 
> 赞同：0
> 
> 时间：2013-03-22T14:47:19.977
> 
> 标签：macos, xcode4.5

除了 10.8 之外，我还想为 Mac OS 10.7 和 10.6.8 构建我的应用程序。它适用于 10.8，但如果我将部署目标更改为 10.7 或 10.6 并希望在具有 10.7 或 10.6.8 的 Mac 上运行它，它会在一开始就崩溃。

我必须改变更多吗？我找不到任何相关文件。我添加了一些图片来显示我更改了哪些设置。

谢谢

![10.7 的设置](../Images/a387d3637b74e5622fcebabf1c513b7a.png)

![10.6.8 的设置](../Images/e2741cbb6d29993a432dc09a987743f8.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T14:49:09.890

将 Base SDK 设置为 Mac 的当前版本（例如 10.8）

将部署 SDK 设置为旧版本（例如 10.6）

# java - 如何在 Java 中表示一天中的时间（即 19:00）？

> ID：15573226
> 
> 赞同：7
> 
> 时间：2013-03-22T14:47:24.397
> 
> 标签：java, jodatime

在 Java 中表示一天中时间的正确方法是什么？

例如：09:00、19:30 等。

基本上，这是与实际日期/日期无关的一天中的时间。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-22T14:51:41.377

您已经使用 jodatime 对此进行了标记。

用于存储时间的 Joda Time 类型是[`org.joda.time.LocalTime`](http://joda-time.sourceforge.net/apidocs/index.html?org/joda/time/LocalTime.html). 请参阅 Joda Time [API 文档](http://joda-time.sourceforge.net/apidocs/index.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T14:52:01.397

尝试这个：

```
Calendar cal = Calendar.getInstance();

        cal.get(Calendar.HOUR_OF_DAY);
        cal.get(Calendar.MINUTE); 
```

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2013-03-22T14:49:39.293

通常，当不需要显示它时，使用*long*。

请参阅 System.currentTimeMillis()。

* * *

## 回答 #4

> 赞同：-4
> 
> 时间：2013-03-22T14:54:21.520

就像 Eng.Fouad 建议的那样，您仍然应该使用 Date 对象。这样，您仍然可以访问 Date 对象存在的所有实用程序。每当您展示它时，只需忽略它的日期部分。

```
Date date = new Date();
DateFormat df = new SimpleDateFormat("hh:mm");
String timeOfDay = df.format(date); // ex: "18:00" 
```

或者创建一个特定的时间

```
Calendar cal = Calendar.getInstance();
cal.set(Calendar.HOUR_OF_DAY, 18);
cal.set(Calendar.MINUTE, 00);
DateFormat df = new SimpleDateFormat("hh:mm");
String timeOfDay = df.format(cal.getTime()); // "18:00" 
```

# python - 在 python 中，我将如何从头开始创建一个包含 Meta 类的新类型

> ID：15573229
> 
> 赞同：3
> 
> 时间：2013-03-22T14:47:28.650
> 
> 标签：python, metaprogramming

我想使用`type(...)`. 如何为这种类型提供 Meta 类？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T14:49:23.557

您不将其`type`作为参数提供，元类将继承`type`其自身，因此您将改为调用元类的构造函数。

# c# - Microsoft Outlook 自动化：捕获保存事件

> ID：15573233
> 
> 赞同：4
> 
> 时间：2013-03-22T14:47:42.867
> 
> 标签：c#, events, outlook, office-interop

我需要在 Outlook (2010) 中捕获任务的保存，但`taskItem`检查员似乎都没有这样的事件。所以我设置捕获检查员关闭：

```
private void ThisAddIn_Startup(object sender, System.EventArgs e)
{
    inspectors = this.Application.Inspectors;
    inspectors.NewInspector += new Outlook.InspectorsEvents_NewInspectorEventHandler(Inspectors_NewInspector);
}

private void Inspectors_NewInspector(Outlook.Inspector inspector)
{
    Outlook.TaskItem taskItem = inspector.CurrentItem as Outlook.TaskItem;
    if (taskItem != null)
    {
        if (taskItem.EntryID == null)
        {
            ((Outlook.ItemEvents_10_Event)taskItem).Close += new Outlook.ItemEvents_10_CloseEventHandler(Task_Close);
        }
    }
} 
```

如果我关闭检查器，则会调用事件处理程序，但是如果我单击保存并关闭，则不会。底线是我需要在用户保存任务时捕获（以便我可以对主题进行后期处理。）是否有我可以使用的事件来捕获该保存并关闭按钮？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-04T10:20:32.910

而不是定义“Outlook.TaskItem taskItem;” 在本地，以全局可见性将其定义在顶部。

# bash - 如何检查正在运行的shell？

> ID：15573235
> 
> 赞同：0
> 
> 时间：2013-03-22T14:47:48.457
> 
> 标签：bash, shell, csh

我需要检查脚本是否从`bash`或运行`csh`。

```
#!/bin/csh

if ( `echo $SHELL` != '/bin/tcsh' )
   echo 'Please run it in csh' 
   exit
endif 
```

这段代码给

```
bash: g.csh: line 7: syntax error: unexpected end of file 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-22T16:17:37.053

检查变量 $0（正在执行的文件/shell 的名称）。试

```
echo $0 
```

在 bash 或 csh 下给出

```
/bin/bash 
```

或者

```
csh 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T15:03:42.107

如果您想使用在`bash`和中运行的语法，您会受到很大限制`tcsh`。事实上， my`tcsh`甚至似乎都没有设置`SHELL`，这可能就是为什么你认为你还在`bash`- 如果我`tcsh`从启动`bash`，`SHELL`仍然是`/bin/bash`。也就是说，如果你真的需要检查，这样的事情可能会起作用（警告：linux-specific）：

```
test `readlink /proc/$$/exe` != `which tcsh` && echo you must use tcsh && exit 1 
```

这在两个 shell 中都有效。另请注意，由于`csh`由相同的二进制文件提供`tcsh`（至少对我来说是这样），这将检查`tcsh` *or 或* `csh`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T14:59:26.577

您似乎缺少一个`then`. 尝试这个。

```
#!/bin/csh

if ( "$SHELL" != '/bin/tcsh' ) then
   echo 'Please run it in csh' 
   exit
endif 
```

尽管评论者似乎是正确的，因为 hashbang 将强制 csh。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T15:03:09.343

这条线几乎可以在任何外壳中使用

```
sh -c "[ \"$SHELL\" = \"tcsh\" ] || { echo \"Please run in tcsh\"; exit 1; }" || exit 
```

但我不确定这是解决您要解决的任何问题的最佳方法。

# php - 这是 array_search 的错误吗？

> ID：15573236
> 
> 赞同：-1
> 
> 时间：2013-03-22T14:47:51.277
> 
> 标签：php

```
 if(array_search('test',array('0'=>'test'))){
    echo 'test';
} 
```

没有回响什么。但：

```
if(array_search('test',array('0'=>'random', '1'=>'test'))){
    echo 'test';
} 
```

回声测试？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T14:51:14.990

`array_search()`正在返回`0`，其中（在非严格比较中）是`false`：

```
var_dump(array_search('test',array('0'=>'test'))); // int(0)
var_dump(array_search('test',array('0'=>'random', '1'=>'test'))); // int(1) 
```

改用[`!== false`（如文档建议的那样）](http://php.net/manual/en/function.array-search.php)：

```
if(array_search('test',array('0'=>'test')) !== false){
    echo '1 ';
}
if(array_search('test',array('0'=>'random', '1'=>'test')) !== false){
    echo '2 ';
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T14:59:06.587

您可以使用 (in_array) 函数来检查 var 是否在数组中

像这样：

```
if(in_array('test',array('0'=>'random', '1'=>'test'))){
echo 'exist';
} 
```

# c# - 从代码中获取来自 google oauth 的访问令牌

> ID：15573245
> 
> 赞同：3
> 
> 时间：2013-03-22T14:48:04.857
> 
> 标签：c#, .net, dotnetopenauth, google-oauth

我使用以下代码从以下代码中获取访问令牌

```
String code = HttpContext.Current.Request["code"];
                    string redirecturl = HttpContext.Current.Request["url"];                                  

                    string Url = "https://accounts.google.com/o/oauth2/token";
                    string grant_type = "authorization_code";
                    string redirect_uri_encode = UrlEncodeForGoogle(url);
                    string data = "code={0}&client_id={1}&client_secret={2}&redirect_uri={3}&grant_type={4}&access_type={5}";

                    HttpWebRequest request = HttpWebRequest.Create(Url) as HttpWebRequest;
                    string result = null;
                    request.Method = "POST";
                    request.KeepAlive = true;
                    request.ContentType = "application/x-www-form-urlencoded";
                    string param = string.Format(data, code,configurationInfo.oauthclientid , configurationInfo.oauthclientsecretid, redirect_uri_encode, grant_type, "offline");

                    var bs = Encoding.UTF8.GetBytes(param);
                    using (Stream reqStream = request.GetRequestStream())
                    {
                        reqStream.Write(bs, 0, bs.Length);
                    }

                    using (WebResponse response = request.GetResponse())
                    {
                        var sr = new StreamReader(response.GetResponseStream());
                        result = sr.ReadToEnd();
                        sr.Close();

                    } 
```

我得到了回应

```
 The remote server returned an error: (400) Bad Request. 
```

我不知道我哪里出错了

等待您的宝贵意见

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T11:52:25.790

Google 还提供了一个更高级别的库来访问其服务。我发现使用它的 API 变得更加容易。

[http://code.google.com/p/google-api-dotnet-client/](http://code.google.com/p/google-api-dotnet-client/)

# c++ - 在 sapi5 speak 函数中存储一个保存用户输入数据的变量

> ID：15573246
> 
> 赞同：1
> 
> 时间：2013-03-22T14:48:07.883
> 
> 标签：c++, sapi, lpcwstr

我正在开发一个使用 Microsoft SAPI5 语音引擎的应用程序。然而，我已经碰壁了。我一直在尝试使用存储用户输入的变量中的数据，以便 TTS 引擎可以重复它。但是 sapi5 语音函数不允许字符串、wstrings 或其他类型，除了来自我研究的 LPCWSTR 是指向宽字符串的指针，所以它不应该接受 wstrings 吗？

下面是一些来自 msdn 的示例代码：

```
#include <stdafx.h>
#include <sapi.h>

int main(int argc, char* argv[])
{
    ISpVoice * pVoice = NULL;

    if (FAILED(::CoInitialize(NULL)))
        return FALSE;

    HRESULT hr = CoCreateInstance(CLSID_SpVoice, NULL, CLSCTX_ALL, IID_ISpVoice, (void **)&pVoice;);
    if( SUCCEEDED( hr ) )
    {
        hr = pVoice->Speak(L"Hello world", 0, NULL);
        pVoice->Release();
        pVoice = NULL;
    }

    ::CoUninitialize();
    return TRUE;
} 
```

所以让我们说例如我有这段代码：

```
...
wstring text;
if( SUCCEEDED( hr ) )
    {
        wcin >> text;
        hr = pVoice->Speak(text, SPF_IS_XML, NULL);
        pVoice->Release();
        pVoice = NULL;
    }
... 
```

但这不起作用。我将如何存储允许 LPCWSTR 类型的变量？我是 C++ 的新手，这是我第一次遇到这种问题，所以这对我来说很新。

我看到关于这个主题的 OP 有完全相同的问题：[https ://stackoverflow.com/questions/12292790/how-do-i-use-variables-in-sapi-tts](https://stackoverflow.com/questions/12292790/how-do-i-use-variables-in-sapi-tts)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T22:28:50.447

经过大约 2 小时的扎实研究，我在 msdn 上找到了一篇关于将字符串转换为 LPCWSTR 格式的文章。代码如下：

```
std::wstring s2ws(const std::string& s)
{
    int len;
    int slength = (int)s.length() + 1;
    len = MultiByteToWideChar(CP_ACP, 0, s.c_str(), slength, 0, 0); 
    wchar_t* buf = new wchar_t[len];
    MultiByteToWideChar(CP_ACP, 0, s.c_str(), slength, buf, len);
    std::wstring r(buf);
    delete[] buf;
    return r;
} 
```

然后我将这段代码包含到我的项目中，然后为 TTS 引擎初始化函数创建了一个名为 LPCWSTR Repeat 的函数参数（这样转换后的字符串可以在 TTS 函数中使用，引擎会说出转换后的字符串的内容） .

```
static int TTS_Speak_Dialogue(LPCWSTR Repeat)
        {
            // Set Sapi5 voice properties
            ISpVoice * pVoice = NULL;

            if (FAILED(::CoInitialize(NULL)))
            return FALSE;

            // Create new instance of Sapi5 once initialized in COM 
            HRESULT hr = CoCreateInstance(CLSID_SpVoice, NULL, CLSCTX_ALL, IID_ISpVoice, (void **)&pVoice);

                if( SUCCEEDED( hr ) )
                {
                    hr = pVoice->Speak(Repeat, SPF_IS_XML, NULL);
                    pVoice->Release();
                    pVoice = NULL;
                }

            ::CoUninitialize();
            return TRUE;
        } 
```

然后我创建了另一个函数来管理转换并管理用户输入，以便 TTS 引擎可以重复它。

```
static void convert_string() 
{
    // Declare a string type variable
    string UserInput;
    // Now get input from user
    cout << "Get the TTS to repeat Input : ";
    cin >> UserInput;

    // Convert string to LPCWSTR!
    std::wstring stemp = s2ws(UserInput);
    // UserInput string now converted to result
    LPCWSTR result = stemp.c_str();

    // Call the TTS engine function and use the converted string
    TTS_Speak_Dialogue(result);
} 
```

我希望我的回答能帮助和我遇到同样问题的人。

我会更详细地解释我的答案，但我需要睡觉，所以请接受我诚挚的歉意:-)。

# mysql - MySQL 是否同时支持原子选择和更新

> ID：15573257
> 
> 赞同：1
> 
> 时间：2013-03-22T14:48:25.600
> 
> 标签：mysql, select

我在 MySQL 中寻找类似以下的内容：

```
SELECT Field1 
FROM MyTable 
AFTER UPDATE 
SET Field2 = 'myvalueX' 
WHERE Field3 = 'myvalueY'; 
```

上述假设语句为受语句更新部分影响的每一行返回 Field1 的值。

MySQL中是否存在这样的语句？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T14:55:35.580

执行以下操作：

```
START TRANSACTION;
UPDATE ....
SELECT ....
COMMIT; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-12-23T07:25:11.873

如果您只更新一行，使用`last_insert_id()`来实现**Atomic Select and Update Together**：

```
update <table> set status=1,id=last_insert_id(id) where status=0 limit 1;
select * from <table> where id=last_insert_id() limit 1; 
```

# c# - C# WPF 按钮数组，按钮坐标

> ID：15573264
> 
> 赞同：0
> 
> 时间：2013-03-22T14:48:48.657
> 
> 标签：c#, button, wpf-controls

我在窗口的主网格中创建了一个按钮矩阵，并且还为每个按钮创建了事件。我还有一个整数矩阵，其中包含每个按钮的一些属性（例如，int a[1,2] 是按钮 btn[1,2] 的属性）。我打算创建一个类似迷宫的东西，你只能通过以骑士（从国际象棋）方式跳跃从一个按钮传递到另一个按钮。我不知道如何找到按下按钮的坐标，以便我可以改变位置当前按钮的。

```
 Button[,] btn = new Button[25, 25];
        for (x = 5; x <= n; x++)
        {
            for (y = 5; y <= n; y++)
            {
                btn[x, y] = new Button();
                left += 72;
                btn[x,y].Margin =new Thickness(left,top,0,0);
                btn[x,y].Height = 32;
                btn[x,y].Width = 32;
                btn[x, y].Click += new RoutedEventHandler(btn_Click);

                if (a[x, y] == 2)
                    btn[x,y].Background = Brushes.Red; 
                else
                    btn[x,y].Background = Brushes.Blue;
                main.Children.Add(btn[x, y]);

            }
            left = 0;
            top += 72;
        }

    }
    private void btn_Click(object sender, RoutedEventArgs e)
    {

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T15:07:59.153

我只是想了一个疯狂的想法...为什么不自己制作`Button`并调用它`MazeButton`，或者其他什么？派生`Button`并添加一些属性，利用继承。

```
public class MazeButton : System.Windows.Controls.Button {
private int left;
private int top;

//rest of implementation

} 
```

通过这种方式，您可以将迷宫中按钮所在的信息直接传递到按钮中。您可以定义自定义事件和您想要的任何其他内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T15:10:23.537

尝试这个：

```
 private void btn_Click(object sender, RoutedEventArgs e)
    {

         Button btn = sender as Buttonl;
         if(btn!=null)
         {
             Point renderedLocation = btn.TranslatePoint(new Point(0, 0), this);
         }
         else
         {
              //you may throw an exception if you want.
         }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T15:17:57.130

这是问题的另一个方法。我将每个按钮存储在一个元组列表而不是一个数组中，然后我搜索包含带有 Linq 的按钮的元组。

这是假设您在 .NET 4 中。如果没有，可以编写 Tuple 类（您可以在 SO 上找到它）。

```
 private List<Tuple<Button, Int32, Int32>> listButton;
    private void SetButtons()
    {
        // TODO define what is n, left, top

        listButton = new List<Tuple<Button, int, int>>();

        for (int x = 5; x <= n; x++)
        {
            for (int y = 5; y <= n; y++)
            {
                Button btn = new Button();
                left += 72;
                btn.Margin = new Thickness(left, top, 0, 0);
                btn.Height = 32;
                btn.Width = 32;
                btn.Click += new RoutedEventHandler(btn_Click);

                if (a[x, y] == 2)
                    btn.Background = Brushes.Red;
                else
                    btn.Background = Brushes.Blue;

                listButton.Add(new Tuple<Button, int, int>(btn, x, y));

                main.Children.Add(btn);
            }
            left = 0;
            top += 72;
        }
    }

    private void btn_Click(object sender, RoutedEventArgs e)
    {
        Button button = (Button)sender;

        var tuple = listButton.Where(t => t.Item1 == button).FirstOrDefault();

        if (tuple != null)
        {
            Int32 x = tuple.Item2;
            Int32 y = tuple.Item3;

            // Do whay you want this x and y found
        }
   } 
```

# java - java web应用的协同编辑算法

> ID：15573266
> 
> 赞同：0
> 
> 时间：2013-03-22T14:48:50.710
> 
> 标签：java, javascript, tomcat, collaboration, collaborative

我有一个基于 Java（Apache Tomcat）的 Web 应用程序，它允许用户在浏览器中用不同的语言（如（c、c++、java）编写代码并在服务器上编译和执行它们。服务器安全问题是通过在 ptrace 监督下执行 chroot jail 中的每个代码来处理的。

*   我使用 Ace 编辑器作为代码编辑器。

我想添加另一个功能，即**协作编辑**，名字就说明了一切。

我在**Stack Overflow上看到了一些**[相关](https://stackoverflow.com/questions/5086699/real-time-collaborative-editing-how-does-it-work)的问题。

 **因此，如果我使用[code.google.com/p/google-diff-match-patch](http://code.google.com/p/google-diff-match-patch/)并每 0.5 秒生成一个差异，请将其发送到服务器并提取所有其他差异并从服务器返回它们。

*   您认为上述方法可行吗？会可行吗？

*   我已经准备好这个 Web 应用程序，所以我只希望有人指出我正确的方向，以便我可以集成一些 java 脚本并编写一些服务器端代码来实现我的**目标**。

*   在我的 Web 应用程序中添加协作编辑的最佳方式是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T15:04:02.180

我正在做一个非常相似的项目。:)

您的解决方案无法处理冲突。您需要更复杂的技术，例如操作转换：[http ://en.wikipedia.org/wiki/Operational_transformation](http://en.wikipedia.org/wiki/Operational_transformation)

* * *

它是现在开源的 Google Wave 的基础：

[http://www.waveprotocol.org/protocol](http://www.waveprotocol.org/protocol)

[http://incubator.apache.org/wave/](http://incubator.apache.org/wave/)

* * *

在互联网上你可以找到很多关于这个主题的好博客和文章：http: [//www.codecommit.com/blog/java/understanding-and-applying-operational-transformation](http://www.codecommit.com/blog/java/understanding-and-applying-operational-transformation)**

# android - JSfiddle：如何创建多 JS/CSS/HTML 文件项目？

> ID：15573267
> 
> 赞同：9
> 
> 时间：2013-03-22T14:48:51.393
> 
> 标签：android, jquery-mobile, mobile, ide, jsfiddle

有没有办法在 JSfiddle.net 上创建一个包含多个 HTML、CSS、JS 文件的严肃的 HTML/CSS/JS 项目？如果是，该怎么做？

* * *

我想创建一个基于 HTML/CSS/JS 的基本移动应用程序，大约有十几个 HTML/CSS/JS 文件。我想在我最喜欢的[在线 JavaScript IDE](http://en.wikipedia.org/wiki/Online_Javascript_IDE#Comparison) JSfiddle 上开发它。但是 JSfiddle.net 虽然测试项目的干净方式仍然限于：

*   1个html文件（个人）
*   1个CSS文件（个人）
*   1个JS文件（个人）
*   几个外部资源（CSS、JS 库、数据），它们要求您进行另一个虚拟主机。

[建议 Github 托管](http://doc.jsfiddle.net/use/github.html)1HTML/1JS/1CSS/someDataFiles的官方文档并不令人满意。我希望 JSFiddle 上的所有内容，以及我的项目中的更多文件。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-22T14:59:27.560

您可以在 jsFiddle 中执行此操作，但限制很少，您可能不会对此感到满意。

1.  您只能测试 1 个 HTML 多页模板。但是对于 jQuery Mobile 框架，这就足够了，因为您可以在 1 个 html 文件中放置大量 jQM 页面。

    例如，这是我帮助这个小组时的 jsFiddle 模板：http: [//jsfiddle.net/Gajotres/yWTG2/](http://jsfiddle.net/Gajotres/yWTG2/)

2.  您不能使用正常的表单提交。相反，您应该使用 ajax 来汇总表单数据。

    在我的另一个答案中，您可以找到 ajax 表单提交以及如何在页面转换期间发送参数的解决方案：[jQuery Mobile: Sending data from a page to the another](https://stackoverflow.com/questions/14776387/jquery-mobile-sending-data-from-one-page-to-the-another/14776523#14776523)

    如果您想与远程主机通信：

    ```
    var ajax = {
        sendRequest:function(save_data){
            $.ajax({url: 'http://localhost/JSONP_Tutorial/json.php',
                data: save_data,
                async: true,
                beforeSend: function() {
                    // This callback function will trigger before data is sent
                    $.mobile.showPageLoadingMsg(true); // This will show ajax spinner
                },
                complete: function() {
                    // This callback function will trigger on data sent/received complete
                    $.mobile.hidePageLoadingMsg(); // This will hide ajax spinner
                },
                success: function (result) {
                    if(result == "true") {
                        $.mobile.changePage( "#index", { transition: "slide"} ); // In case result is true change page to Index
                    } else {
                        alert('Login unsuccessful, please try again!'); // In case result is false throw an error
                    }
                    // This callback function will trigger on successful action
                },
                error: function (request,error) {
                    // This callback function will trigger on unsuccessful action                
                    alert('Network error has occurred please try again!');
                }
            });
        }
    } 
    ```

3.  jsFiddle 有一个愚蠢的政策，他们想阻止使用完整的 HTML 文件。他们正试图在 HTML 内容部分通过愚蠢的错误警告来强制执行此操作。你需要有类似 Firefox 或 Chrome 的 firebug 插件来消除这种愚蠢。或者你甚至可以使用 Grease Monkey 插件来做到这一点。

4.  如果您想使用本示例中的完整 HTML 模板：http: [//jsfiddle.net/Gajotres/yWTG2/](http://jsfiddle.net/Gajotres/yWTG2/)，您将需要在 onDomready 状态下使用您的 JavaScript 代码。

5.  某些功能将无法正常工作。像 window.orientationchange 事件。

# javascript - 使用 CSS 排列元素

> ID：15573271
> 
> 赞同：0
> 
> 时间：2013-03-22T14:48:57.010
> 
> 标签：javascript, html, css

## ![在此处输入图像描述](../Images/739da19928fd38634ef270354db58785.png)

我一直在尝试将一个按钮放置在另一个按钮的右侧。上面是一个例子，向你展示了我的意思。

我使用 Bootstrap 构建它。他们有一个导航栏功能，可以为我做布局。很棒的功能，但我不知道为什么它一直在创造新的一行。我已经尝试过`right: 0`定位，但这些都行不通。它每次都会停留在同一个位置。我目前不知道是什么导致了这个错误。感谢您的时间！

我的 HTML 如下所示：

```
 <div id="navbar" class="navbar" style="position: relative; width: 93%;left: 3%;">

    <div class="navbar-inner">

    <div class="brand" style="padding-left: 0%;">
          <a href="www.investorsfortunes.com">
    <!--  <img class="img-polaroid" src="Images/logo.jpg"> -->
    Investorsfortunes.com 
      </a>
      </div>

  <ul class="nav" style="text-align: center">
  <li class="divider-vertical"><a href="#">Investors</a></li>
  <li class="divider-vertical"><a href="#">Deals</a></li>
  <li class="divider-vertical"><a href="#">Attornies</a></li>
  <li class="divider-vertical"><a href="#">Appraisers</a></li>

  </ul>

  <form class="form-inline">
    <input type="text" class="input-small" placeholder="Email">
    <input type="password" class="input-small" placeholder="Password">
   <button type="submit" class="btn floatRight">Sign in</button>
</form>

<!-- SIGN-UP AREA -->    
            <!-- Button to trigger modal -->
  <a href="#myModal" role="button" class="btn btn-primary floatRight" data- 
       toggle="modal">Sign-Up</a>

  <!-- Modal -->
  <div id="myModal" class="modal hide fade" tabindex="-1" role="dialog" aria-  
         labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-header">
      <button type="button" class="close" data-dismiss="modal" aria-  
            hidden="true">x</button>
      <h3 id="myModalLabel">Sign-Up</h3>
    </div>
    <div class="modal-body">
    <form class="well span8">
 <div class="row">
    <div class="span3">
        <label>First Name</label>
        <input type="text" class="span3" placeholder="Your First Name">
        <label>Last Name</label>
        <input type="text" class="span3" placeholder="Your Last Name">
        <label>Email Address:</label>
        <input type="text" class="span3" placeholder="Your email address">
        <label>Password</label>
         <input type="password" id="inputPassword" placeholder="Password">
          <label>Retype Password</label>
         <input type="password" id="inputPassword" placeholder="Password">
    </div>
</div>
</form>
    </div>
    <div class="modal-footer">
      <button class="btn" data-dismiss="modal" aria-hidden="true"">Close</button>
      <button class="btn btn-primary" data-dismiss="modal">Save changes</button>
    </div>
  </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T14:52:54.023

表单是块元素是HTML。在表单内设置 Sign Up 或将表单的样式设置为 inline-block

```
<form class="form-inline" style="display:inline-block;"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T14:54:12.883

您正在使用 twitter bootstrap，所以也许您可以使用

```
<div class="btn-group">
    <button class="btn">Left</button>
    <button class="btn">Middle</button>
    <button class="btn">Right</button>
</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T15:27:22.313

只需将您的代码放入表单中即可。像那样...

```
<form class="form-inline">
    <input type="text" class="input-small" placeholder="Email">
    <input type="password" class="input-small" placeholder="Password">
   <button type="submit" class="btn floatRight">Sign in</button>

<!-- SIGN-UP AREA -->    
            <!-- Button to trigger modal -->
  <a href="#myModal" role="button" class="btn btn-primary floatRight" data- 
       toggle="modal">Sign-Up</a>
</form> 
```

# elf - 如何从 ELF 文件中提取函数原型？

> ID：15573275
> 
> 赞同：6
> 
> 时间：2013-03-22T14:49:09.227
> 
> 标签：elf, extraction, powerpc, function-prototypes

我已经搜索了很多，但还没有找到从 ELF 可执行文件中提取函数原型、至少**参数类型和返回类型的方法。**使用 GNU BinUtils 或任何其他方法。

我尝试在 readelf、nm 和 objdump 中使用不同的选项，它们列出了符号和函数名称，但是如何知道函数的参数类型和返回类型呢？

我有一种直觉，应该有办法做到这一点，任何人都可以对此有所了解吗？

主机：Windows 7

目标：用于 PowerPC 架构的 elf

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-22T20:09:17.337

假设您的二进制文件是使用调试信息构建的，您可以通过读取 DWARF 调试格式来获取函数类型、参数类型等，这`readelf -wi`将转储。

如果您的二进制文件是由 IBM 的编译器生成的，则它可能具有（较旧的）STABS 调试信息，您可以使用`objdump -g`.

如果您的二进制文件没有*调试*信息，那么您*将无法*获得您正在寻找的信息——它只是不存在。

# php - PHP安装失败与wampserver2

> ID：15573281
> 
> 赞同：0
> 
> 时间：2013-03-22T14:49:20.417
> 
> 标签：php, windows, apache2, wamp, wampserver

我在我的 Windows 2003 机器上安装了 wampserver 2.2e (php5.4.3 / apache 2.2.22)，并在系统事件日志中得到这个错误：

> 为 C:\wamp\bin\php\php5.4.3\php5apache2_2.dll 生成激活上下文失败。参考错误消息：参考的程序集未安装在您的系统上。

有问题的 DLL 确实存在于指定的文件夹中。

**更新**：在 wamp 之前安装了 VC10 SP1（32 位）。

我之前曾尝试手动安装 apache 和 php，但也遇到了 apache 正确加载 php5 模块的问题。我认为 WAMP 可以正常工作（我安装后它在所有其他实例上都有）。我确实有早期版本的 apache 和 php 在这台机器上工作。

现在我不太确定它是安装，而是 Windows 的东西？

**更新 2**：在系统事件日志中，我每次尝试运行 wamp 时都会注意到此错误。我看起来很相关，因为它引用了 VC9，但网站上说要安装 VC10：

> 无法找到依赖程序集 Microsoft.VC90.CRT 并且上次错误是 引用的程序集未安装在您的系统上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T14:56:37.433

您需要安装 Microsoft Visual Studio C++ Redistributable Package。[LINK](http://www.microsoft.com/en-us/download/details.aspx?id=5555)此链接适用于 2010 版。检查 PHP 文档，您可能需要旧版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T14:58:01.303

直接取自 WAMP 网站：

> 警告：您必须安装 Visual C++ 2010 SP1 Redistributable Package x86 或 x64 VC10 SP1 vcredist_x86.exe 32 位： [http](http://www.microsoft.com/download/en/details.aspx?id=8328) ://www.microsoft.com/download/en/details.aspx?id= 8328 VC10 SP1 vcredist_x64.exe 64 位： [http ://www.microsoft.com/download/en/details.aspx?id=13523](http://www.microsoft.com/download/en/details.aspx?id=13523)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-29T22:30:32.023

您还需要[Microsoft Visual C++ 2008 SP1 Redistributable Package (x86)](http://www.microsoft.com/en-gb/download/details.aspx?id=5582)

2010 VC redist 适用于 Apache。

2008 年的重制版适用于 Wampmanager。

# delphi - 对 TListView 列进行排序

> ID：15573282
> 
> 赞同：3
> 
> 时间：2013-03-22T14:49:20.933
> 
> 标签：delphi

我有一个有 4 列（当然都是字符串）的 TListview，但是，我将数据存储在其中：

*   `Caption`: 任何字符串

*   `SubItems[0]`: 整数，例如`'5016'`

*   `SubItems[1]`: 日期，例如`'03/22/13'`

*   `Subitems[2]`: 任何字符串

当用户单击酷栏标题时，我使用以下代码进行排序

我在看这篇文章[“how to sort in Tlistview based on subitem[x]”](https://stackoverflow.com/questions/3172028/how-to-sort-in-tlistview-based-on-subitemx)，但我不知道如何考虑不同的列类型。

```
procedure TfrmFind.lvwTagsColumnClick(Sender: TObject; Column: TListColumn);
begin
 ColumnToSort := Column.Index;
 (Sender as TCustomListView).AlphaSort;
end;

procedure TfrmFind.lvwTagsCompare(Sender: TObject; Item1, Item2: TListItem;
  Data: Integer; var Compare: Integer);
var
 ix: Integer;
 begin
 if ColumnToSort = 0 then
 Compare := CompareText(Item1.Caption,Item2.Caption)
 else begin
 ix := ColumnToSort - 1;
 Compare := CompareText(Item1.SubItems[ix],Item2.SubItems[ix]);
 end;
end; 
```

如何考虑 Integer 和 Date 列，使它们不作为字符串排序？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-22T14:52:06.713

如果您有两个包含整数的字符串，并且您希望将它们作为整数进行比较，则将它们从文本转换为整数，然后进行数字比较。

```
function CompareTextAsInteger(const s1, s2: string): Integer;
begin
  Result := CompareValue(StrToInt(s1), StrToInt(s2));
end; 
```

日期也是如此。将它们从文本转换为数值，例如`TDateTime`值。然后进行数值比较。

```
function CompareTextAsDateTime(const s1, s2: string): Integer;
begin
  Result := CompareDateTime(StrToDateTime(s1), StrToDateTime(s2));
end; 
```

实现后一个函数的具体方式取决于您希望如何从文本转换为日期/时间的数字表示。

# php - 如果手动写出同一行可以正常工作，为什么粘贴一行会破坏代码？

> ID：15573284
> 
> 赞同：5
> 
> 时间：2013-03-22T14:49:23.143
> 
> 标签：php, copy-paste, gedit

这是 php 文件中一行的两个版本：

**第一个版本：**

```
if ($projet['sourceDonnees'] === (string)$CONSTANTS['sourceDonnees_saisie']) { 
```

**第二个版本：**

```
if ($projet['sourceDonnees'] === (string)$CONSTANTS['sourceDonnees_saisie']) { 
```

虽然它们看起来相同，但第一个版本的结果是 a `PHP Parse error: syntax error, unexpected T_STRING`，而第二个版本工作正常。两者的区别在于第一个版本是粘贴和修改的，而第二个版本是完全*手写的*。这里发生了什么？

**注意**：该行是从以 UTF-8 编码的文本文件中复制的，并粘贴到另一个 UTF-8 文本文件中。在 gedit 中完成的所有操作，这两个文件都是我在 gedit 中编写的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-22T14:51:47.057

您复制了 UTF-8 引号，PHP 无法解析这些引号。删除引号并将它们替换为 ASCII 等效项（即通过键入它们）。

有关 ASCII 与 UTF-8 引号的更多信息，请参阅[http://www.cl.cam.ac.uk/~mgk25/ucs/quotes.html](http://www.cl.cam.ac.uk/~mgk25/ucs/quotes.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-22T15:01:01.397

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T14:58:25.040

`unexpected T_STRING`通常是您的引号或刻度线的问题。您复制的代码中的`'`s 是 UTF-8，可能是 PHP 无法解析的引用版本，就像我们在 SO 上用于内联代码的反引号一样。尝试将它们更改为常规单引号，它可能会解决您的问题。

如果不是这种情况，请确保您没有错过函数末尾的分号。这可能会导致相同的错误。

# sql - PowerShell - DataGridView 选项

> ID：15573287
> 
> 赞同：0
> 
> 时间：2013-03-22T14:49:36.180
> 
> 标签：sql, winforms, powershell, datagridview, datagridviewcomboboxcell

我很困惑，所以我希望有人可以在这里给我一些帮助。我正在尝试使用 PrimalForms Community Edition 2011 创建一个使用 DataGridView 的 Windows 窗体。我能够使用以下方法创建一个（无耻地从[http://sev17.com/2009/08/02/building-powershell-guis-with-primal-forms/](http://sev17.com/2009/08/02/building-powershell-guis-with-primal-forms/)窃取）：

```
endregion Generated Form Objects
$bindingSource1 = new-object System.Windows.Forms.BindingSource
$dataAdapter = New-Object System.Data.SqlClient.SqlDataAdapter
$serverName = “myserver.com”
$databaseName = “myDB”
$query = ‘select * from tblPotConflicts’
#———————————————-
#Generated Event Script Blocks
#———————————————-
#Provide Custom Code for events specified in PrimalForms.
$Form1_Load=
{
$dataGridView1.DataSource = $bindingSource1
$connString = “Server=$serverName;Database=$databaseName;Integrated Security=SSPI;”
$dataAdapter.SelectCommand = new-object System.Data.SqlClient.SqlCommand ($query,$connString)
$commandBuilder = new-object System.Data.SqlClient.SqlCommandBuilder $dataAdapter
$dt = New-Object System.Data.DataTable
[void]$dataAdapter.fill($dt)

$bindingSource1.DataSource = $dt

$dataGridView1.AutoResizeColumns([System.Windows.Forms.DataGridViewAutoSizeColumnsMode]::AllCellsExceptHeader)
} 
```

这非常适合为 DataGridView 创建绑定，因为您实际上无法在 PrimalForms 本身内执行此操作[至少据我所知]。我很好奇的是：

1.  您可以省略 DataGridView 中的任何列吗？如果可能的话，我宁愿向最终用户隐藏一些专栏，并在幕后以编程方式操纵它们。我对 SQL 并不感冒，所以这很可能是超级基础和简单的东西。

2.  我有一列我想作为一个组合框。我看到在 C# 中他们可以选择列类型 DataGridViewComboBoxColumn，但我不知道如何在 PowerShell 中进行设置。有没有人希望对此有任何建议/解决方案？

提前感谢您在这里提供的任何帮助/见解/建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T15:06:12.503

我不使用原始形式，但我想我明白你在追求什么。我在这里做了一个粗略的近似：

[http://gallery.technet.microsoft.com/scriptcenter/Select-FromGridView-521a56d8](http://gallery.technet.microsoft.com/scriptcenter/Select-FromGridView-521a56d8)

使用 Powershell 的原生 out-gridview。基本上，我从用于在 gridview 中显示的原始对象创建了一个新的自定义对象集合，这些对象由原始数组中的对象的数组索引号绑定在一起。然后从网格中选择的对象的 Index 属性被带回原始对象数组以获取将用于进一步处理的对象。

如果这有帮助。

# winforms - XNA 透明窗口窗体

> ID：15573294
> 
> 赞同：1
> 
> 时间：2013-03-22T14:49:56.390
> 
> 标签：winforms, xna, transparency

试图用透明窗口（显示桌面或它后面的任何东西）实现一个 xna 游戏。发现有几个人在问，但没有相关答案。

我可以获取表单并设置 TransparencyKey

```
Form gameForm = (Form)Form.FromHandle(Window.Handle);
gameForm.TransparencyKey = System.Drawing.Color.FromArgb(255, 0, 0, 255); 
```

然后在绘制方法中，我将其清除为红色，据我所知，透明度键应该从绘制中删除任何红色，所以红色背景应该会噗！

有谁知道我是否遗漏了什么或有更多的见解？

# html - 下拉菜单加载就像默认悬停一样

> ID：15573302
> 
> 赞同：0
> 
> 时间：2013-03-22T14:50:13.173
> 
> 标签：html, drop-down-menu, google-plus

我在我的网站上创建了一个带有社交媒体按钮的下拉菜单。它适用于除 Google+ 之外的所有人，由于某种原因，当页面加载时，菜单的行为就像我默认将鼠标悬停在它上面一样。

例如，当页面加载时，我希望它看起来像这样：

![默认菜单](../Images/d06909193fa2b01de96fc26868c28b8f.png)

当我将鼠标悬停在 Facebook 上时，它应该是这样的：

![悬停](../Images/6e7845284c30ba7cf22d58a21d2ebbf5.png)

第二部分有效，但目前，当页面完成加载时，它看起来像这样： ![当前页面已加载](../Images/8ea092115c34f920eae129b59343c5b8.png)

菜单代码如下，我的网站是[http://www.rmartinez.co/](http://www.rmartinez.co/)谢谢！

```
<table style="margin-top:12px;margin-bottom:13px;margin-left: -5px;margin-right: auto;">
<tr>
<td>
<ul id="nav" class="drop">
  <li><a href="https://www.facebook.com/rmartinez93" target="_blank"><img alt="FB" border="0" height="60" width="60" src="http://i920.photobucket.com/albums/ad44/rubenrox1029/fb_zps6347bf28.png" 
onmouseover="this.src='http://i920.photobucket.com/albums/ad44/rubenrox1029/fb2_zpsd4175471.png'" onmouseout="this.src='http://i920.photobucket.com/albums/ad44/rubenrox1029/fb_zps6347bf28.png'"/></a>
    <ul>
      <li><div style="width:100px;vertical-align:top;*display:inline;"><div class="fb-like" data-href="http://www.rmartinez.co" data-send="false" data-layout="button_count" data-show-faces="false" data-font="segoe ui" data-colorscheme="dark"></div></div>
</li>
    </ul>
  </li>
</ul>
</td>
<td>
<ul id="nav" class="drop">
  <li><a href="http://www.twitter.com/staticint" target="_blank"><img alt="Twitter" border="0" height="60" width="60" src="http://i920.photobucket.com/albums/ad44/rubenrox1029/twitter_zps866fb15d.png" 
onmouseover="this.src='http://i920.photobucket.com/albums/ad44/rubenrox1029/twitter2_zps2413b3a8.png'" onmouseout="this.src='http://i920.photobucket.com/albums/ad44/rubenrox1029/twitter_zps866fb15d.png'"/></a>
    <ul>
      <li><div style="width:100px;vertical-align:top;*display:inline;"><a href="https://twitter.com/share" class="twitter-share-button" data-url="http://www.rmartinez.co" data-text="Ruben Martinez Jr. [Web-Surfer | Gadget-Lover | Tech-Aficionado]" data-via="staticint">Tweet</a>
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script></div>
</li>
    </ul>
  </li>
</ul>
</td>
<td>
<ul id="nav" class="drop">
  <li><a href="https://plus.google.com/u/0/108135165162255920411/posts" target="_blank"><img height="60" width="60" alt="G+" border="0" src="http://i920.photobucket.com/albums/ad44/rubenrox1029/g_zps68bc2093.png" 
onmouseover="this.src='http://i920.photobucket.com/albums/ad44/rubenrox1029/g2_zps4c82af5d.png'" onmouseout="this.src='http://i920.photobucket.com/albums/ad44/rubenrox1029/g_zps68bc2093.png'"/></a>
    <ul>
      <li>
<div style="width:100px;vertical-align:top;*display:inline;"><div class="g-plusone" data-annotation="none" data-width="300" data-href="http://www.rmartinez.co" ></div></div>
      </li>
    </ul>
  </li>
</ul>
</td>
<td>
<ul id="nav" class="drop">
  <li><a href="http://www.linkedin.com/in/rmartinez93/" target="_blank"><img height="60" width="60" alt="LinkedIn" border="0" src="http://i920.photobucket.com/albums/ad44/rubenrox1029/in_zps0ded6f9d.png" 
onmouseover="this.src='http://i920.photobucket.com/albums/ad44/rubenrox1029/in2_zps53277e88.png'" onmouseout="this.src='http://i920.photobucket.com/albums/ad44/rubenrox1029/in_zps0ded6f9d.png'"/></a>
    <ul>
      <li><div style="width:100px;vertical-align:top;*display:inline;"><script src="//platform.linkedin.com/in.js" type="text/javascript"></script>
<script type="IN/Share" data-url="http://www.rmartinez.co"></script>
</div>
</li>
    </ul>
  </li>
</ul>
</td>
</tr>
</table> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T14:57:05.170

在 CSS 中的第 490 行，更改

```
ul.drop ul {
visibility:hidden; <!-- this needs to be changed
//your other stuff
} 
```

到

```
ul.drop ul {
display:none;
} 
```

并添加行

```
ul.drop:hover ul {
display:block;
} 
```

# video-streaming - RTMP流播放

> ID：15573307
> 
> 赞同：1
> 
> 时间：2013-03-22T14:50:18.133
> 
> 标签：video-streaming, mediaelement.js, rtmp

我正在尝试让 rtmp 流媒体工作。我在[这里建议的代码几乎相同](https://github.com/johndyer/mediaelement/issues/337#issuecomment-8842924)

```
<html>
  <head>
    <script src="me/build/jquery.js"></script>
    <script src="me/build/mediaelement-and-player.js"></script>
    <link rel="stylesheet" href="me/build/mediaelementplayer.min.css" /></code>
  </head>
  <body>

<video>
     <source src="000109f6004b00a6004af03676235daa" type="video/rtmp">
</video>
<script>
$('video').mediaelementplayer({flashStreamer:"rtmp://thinkbuntu:1935/flvplayback/000109f6004b00a6004af03676235daa"});
</script>

  </body>
</html> 
```

而`rtmp://thinkbuntu:1935/flvplayback`本地 rtmpserver 的 URL 和 '000109f6004b00a6004af03676235daa' 是 mp4 视频。我知道本地服务器正在工作，因为我可以通过 rtmpdump 转储它，并且使用 jwplayer 我可以正常播放视频。使用 flv、webm、ogv 的中介也不起作用。

我在 Firefox 中收到此错误（在 Chrome 中完全没有错误）：

`Specified "type" attribute of "video/rtmp" is not supported. Load of media resource 000109f6004b00a6004af03676235daa failed.`

通过 json 属性配置它以同样的方式失败。

我还尝试了这种方法[根据浏览器功能在 MediaElementsJS 中替换媒体源（http 与 rtmp），](https://stackoverflow.com/questions/9113633/replacing-media-source-http-with-rtmp-in-mediaelementsjs-based-on-browser-capa)但它也失败了。

难道我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-15T15:18:29.730

我有几乎相同的设置，我的作品。不确定是否需要任何属性，但我在视频标签上有一些。

（仅供参考，我猜额外的`</code>`标签只是从您粘贴到 SO 中的？）

```
 <video width="300" height="240" controls="controls" preload="none" id="stream">
         <source src="7901e75800f700d700437a45351f0214" type="video/rtmp">
    </video>

    <script type="text/javascript">
        $('#stream').mediaelementplayer({
            flashStreamer: "rtmp://170.93.143.150/rtplive/000109f6004b00a6004af03676235daa",
            plugins: ['flash', 'silverlight'],
            alwaysShowControls: false,
            success: function (mediaElement, domObject) {
                if (mediaElement.pluginType == 'flash') {
                    mediaElement.play();
                }
            },
        });
     </script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-28T00:18:44.457

在您的情况下，您必须在视频标签内添加前缀“mp4：”

```
<video width="360" height="203" id="player1" src="mp4:sample" type="video/rtmp" controls="controls"></video>

<script>$('video').mediaelementplayer({flashStreamer:"rtmp://localhost/vod"});</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-13T15:31:39.640

我们必须移植嗅探 RTMP 流量以确定浏览器正在协商的确切内容，因为 RTMP URL 是唯一解释的：部分 URL 标识流服务端点，其余部分标识流资源，介于两者之间的是文件格式后跟一个冒号。如果您不知道 RTMP 服务器的配置，则无法判断服务端点在 URL 中的何处结束以及流开始的位置。由于我们不知道服务器配置，这给我们带来了无穷无尽的挫败感。

在源标记中，我们将完整的 RTMP URL 作为“src”属性（协议、服务端点、流和文件格式 - 一切，整个 shebang），在 flashStreamer 属性中，我们仅识别服务端点（所有内容，但不包括文件格式）。经过大量的实验，这是唯一成功的属性组合。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-12-25T14:37:21.413

确保您的 Firefox 已安装 Flash。查看 Firefox 插件中是否有**Shockwave flash**。如果不，

1.  打开**flash**官网
2.  **为不同的计算机**选择需要 Flash Player？
***   选择合适的版本*   下载&安装&重启FF*   确保**Shockwave Flash**已激活**

# r - 在 R 中创建多个对

> ID：15573311
> 
> 赞同：3
> 
> 时间：2013-03-22T14:50:31.343
> 
> 标签：r, match, random-sample

我有一份人员名单：

```
people<-c("Betty", "Joe", "Bob", "Will", "Frank") 
```

我想为每个人随机分配两个人（不允许自行分配），并且我希望每个人被分配给另一个人的次数相等（在上面的示例中，每个人只能被分配给另一个人两次） .

因此，例如比赛可能是

贝蒂（乔和鲍勃）、乔（鲍勃和威尔）、鲍勃（威尔和弗兰克）、威尔（弗兰克和贝蒂）

当然，我刚刚使用了他们的排序，但如果这可以随机化就好了。

任何想法从哪里开始？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T15:15:34.303

**新的（更简单的）解决方案：**使用来自 Ari B. Friedman 的包中的`shift`函数`TaRifx`

```
tt <- sample(people)
lapply(seq_len(length(tt))-1, function(x) shift(tt, x)[1:3])
# if you don't want it to be ordered, just add a sample(.)
lapply(seq_len(length(tt))-1, function(x) sample(shift(tt, x)[1:3]))
# [[1]]
# [1] "Bob"   "Frank" "Betty"
# 
# [[2]]
# [1] "Frank" "Betty" "Joe"  
# 
# [[3]]
# [1] "Betty" "Joe"   "Will" 
# 
# [[4]]
# [1] "Joe"  "Will" "Bob" 
# 
# [[5]]
# [1] "Will"  "Bob"   "Frank" 
```

* * *

**旧解决方案（对于这个想法）：** 我会走这条路。基本上，一旦你`sample`“人”，你*总是*可以去，1、2、3、2、3、4、3、4、5、4、5、1。所以，让我们这样做。也就是说，生成这些索引，然后对人员进行抽样并获得三元组。

```
# generate index
len <- length(people)
choose <- 3 # at a time 
idx <- outer(seq(choose), seq(choose+2)-1, '+')
#      [,1] [,2] [,3] [,4] [,5]
# [1,]    1    2    3    4    5
# [2,]    2    3    4    5    6
# [3,]    3    4    5    6    7

# sample people
tt <- sample(people)
# [1] "Joe"   "Will"  "Bob"   "Frank" "Betty"
max.idx <- 2*choose + 1
tt[(len+1):max.idx] <- tt[seq(max.idx-len)]
# [1] "Joe"   "Will"  "Bob"   "Frank" "Betty" "Joe"   "Will" 

tt[idx]
#  [1] "Joe"   "Will"  "Bob"   "Will"  "Bob"   "Frank" "Bob"   "Frank" "Betty" "Frank" 
#  [15] "Betty" "Joe"  "Betty" "Joe"   "Will" 

split(tt[idx], gl(ncol(idx), nrow(idx)))
# $`1`
# [1] "Joe"  "Will" "Bob" 
# 
# $`2`
# [1] "Will"  "Bob"   "Frank"
# 
# $`3`
# [1] "Bob"   "Frank" "Betty"
# 
# $`4`
# [1] "Frank" "Betty" "Joe"  
# 
# $`5`
# [1] "Betty" "Joe"   "Will" 
```

现在我们可以把这一切放在一个函数中：

```
my_sampler <- function(x, choose) {
    len <- length(x)
    idx <- outer(seq(choose), seq(choose+2)-1, '+')
    sx  <- sample(x)
    max.idx <- 2*choose + 1
    sx[(len+1):max.idx] <- sx[seq(max.idx-len)]
    split(sx[idx], gl(ncol(idx), nrow(idx)))
}
# try it out
my_sampler(people, 3)
my_sampler(people, 4) # 4 at a time

# if you want this and want a non-ordered solution, wrap this with `lapply` and `sample`

lapply(my_sampler(people, 3), sample) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T15:04:47.670

有趣的问题。这会让你走到一半。缺少的一点是对人们处于相同数量的伙伴关系中的限制。如果您想将两个人*随机*分配给除他们自己以外的某个人，这可以像这样在一个班轮中实现......

```
assigns <- lapply( people , function(x) { c( x , sample( people[!(people %in% x)] , 2 ) ) } ) 
```

第一个人将被分配，最后两个将被分配。

```
assigns
#[[1]]
#[1] "Betty" "Bob"   "Will" 

#[[2]]
#[1] "Joe"   "Bob"   "Frank"

#[[3]]
#[1] "Bob"   "Betty" "Joe"  

#[[4]]
#[1] "Will"  "Betty" "Joe"  

#[[5]]
#[1] "Frank" "Will"  "Betty" 
```

# ruby-on-rails - Rails 在视图中设置页面标题

> ID：15573314
> 
> 赞同：5
> 
> 时间：2013-03-22T14:50:36.893
> 
> 标签：ruby-on-rails, haml

如何在某些视图中设置页面标题并在未设置的情况下使用默认标题？
我使用 HAML。什么是正确的做法？

现在我很喜欢：

```
- content_for :title, "Title for specific page" 
```

在布局中：

```
%title= h yield(:title) 
```

但是如何设置这个标题，但是如果它不存在，设置一些默认值呢？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-22T14:54:40.333

使用[Rails API](http://api.rubyonrails.org/classes/ActionView/Helpers/CaptureHelper.html#method-i-content_for-3F)`content_for?`中描述的方法

```
content_for?(:title) ? yield(:title) : "default title" 
```

# asterisk - Asterisk - 在 .call 文件中播放多个声音文件的最佳实践

> ID：15573316
> 
> 赞同：1
> 
> 时间：2013-03-22T14:50:43.000
> 
> 标签：asterisk

我无法在 .call 文件中播放多个声音文件 (.wav)。我在变量中传递了很多声音文件 (SetVar: Sound=custom/1_Messages0201&custom/20c&...) 问题是字符串大小。当大小小于 240 个字符时，所有声音文件都可以正常播放。第 240 个字符之后的所有文件都被修剪，并出现错误

```
pbx_spool.c: Syntax error at line 10 of /var/spool/asterisk/outgoing/333.call 
```

我正在阅读拨号字符串长度的限制

> 注意：在 Asterisk 1.2 之前（包括 Asterisk 1.2），拨号字符串的长度不能超过大约 240 个字符（任何超过的字符都将被截断）。这个限制在 Asterisk 1.4 中被移除了，除非你在编译选项中设置了 LOW_MEMORY。

有什么办法可以消除这个限制，或者增加拨号字符串的大小。也许任何人都可以建议我任何其他更好的主意。

星号版本：

```
Asterisk 11.2.1 built by root @ ip-XX-XXX-XXX-XXX on a x86_64 running Linux 
```

拨号方案：

```
exten =>    123,1,AGI(monitor.php,outgoing,Outgoing_UNLIMITED,${CALLERID(num)},${EXTEN},Set(CALLERID (num)=XXXXXXXXX))
exten => 123,1,Dial(SIP/6845987568/${EXTEN:0},30,T)
exten => 123,2,Set(CDR(userfield)=${NumberDialed})
exten => 123,3,Playback(${Sound}) 
```

调用文件：

```
Channel: SIP/XXXXX/XXXXXX
CallerID: XXXXXXX
MaxRetries: 2
RetryTime: 15
Context: XXXXXX
Extension: 123
Priority: 1
Account: XXXXXX
SetVar:    Sound=custom/1_Messages0201&custom/20c&custom/i&custom/1om&custom/March&custom/2c&custom/hiliadi&custom/i&custom/13of&custom/godina&custom/1_Messages0202&custom/3c&custom/3c&custom/3c&custom/3c&custom/3c&custom/3c&custom/3c&custom/3c&custom/1_Messages0203&custom/200c&custom/50c&custom/i&custom/6c&custom/leva&custom/i&custom/70c&custom/i&custom/8c&custom/stotinki&custom/1_Messages0204
SetVar: NumberDialed=XXXXXXXX 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T19:09:05.253

在调用文件触发后，您的拨号计划中也会遇到同样的问题（它也有限制）。播放应用程序并非旨在播放大量不同的文件。如果你需要这样做，你可以通过拨号方案来做到这一点。

你可以这样发送：

```
Setvar: file_max=2
Setvar: file1=custom/1_message
Setvar: file2=custom/2_message 
```

之后使用 asterisk 的拨号方案逐个播放文件。例如像这样：

```
exten => 123,3,Set(i=0);
exten => 123,n(loop),Set(i=$[ ${i} + 1 ])
exten => 123,n,GotoIF($[ $i > ${file_max} ]?exit)
exten => 123,n,Playback(${file${i}})
exten => 123,n,Goto(loop)
exten => 123,n(exit),Noop(end) 
```

注意，这个任务会有很多其他问题，我建议你检查开源拨号程序代码，比如 vicidial 或聘请专家。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T14:22:33.203

我对这个问题的解决方案是设置一个“活动”调用变量，然后在数据库中定义各种“活动”。然后我在拨号计划中使用数据库查找来获取声音文件列表。我的 DBGet Ruby 脚本返回两个值；“更多文件”标志和最多十个声音文件的列表。只要“更多文件”标志为真，我循环 DBGet 并继续向客户播放文件集。

它就像一个魅力。并使通话文件更易于阅读。

# google-apps-script - getThreads 非常大的标签

> ID：15573319
> 
> 赞同：7
> 
> 时间：2013-03-22T14:50:45.960
> 
> 标签：google-apps-script

我在一个标签中有 900 多个线程。我想将它们全部提取出来以在脚本中计算出一些指标。`getThreads()`似乎最大为 500 个线程，这与文档所说的一致：

> 当所有线程的大小太大而系统无法处理时，此调用将失败。如果线程大小未知，并且可能非常大，请使用“分页”调用，并指定要在每次调用中检索的线程范围。

所以现在问题是当我这样做时

```
GmailApp.getUserLabelByName("Huge Label").getThreads(501, 1000).length; 
```

我收到消息：“参数最大值不能超过 500。” 关于如何处理具有非常大线程数的标签的任何建议？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-22T15:35:41.020

getThreads() 方法的签名是

```
getThreads(start, max) 
```

所以你必须使用

```
GmailApp.getUserLabelByName("Huge Label").getThreads(501, 500).length; 
```

这将使您的线程从 501 返回到 1000。

# visual-studio-2008 - 调试经典 asp Visual Studio 2008 IIS 8

> ID：15573322
> 
> 赞同：0
> 
> 时间：2013-03-22T14:50:58.350
> 
> 标签：visual-studio-2008, asp-classic, visual-studio-debugging, iis-8

我所做的事情：在默认网站和 IIS 管理器中的虚拟文件夹上

-启用父路径

-设置启用服务器端调试为真

在我的代码中设置断点 1) F9 2) 使用停止命令 3) 故意在我的 VBScript 中放置拼写错误的命令以强制调试器附加

然后我尝试在不调试的情况下启动网站并附加到 W3wp.exe/DLLHost.exe

还尝试在调试模式下在 Visual Studio 中运行网站

有什么我遗漏或值得尝试的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T11:03:13.610

我快到了，但是当我去附加到进程时，选择 w3wp.exe，我需要选择我试图调试的代码类型并确保选中了脚本复选框

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T15:44:20.957

尝试在您的应用程序池中将“向浏览器发送错误”设置为 TRUE，如果仍然不起作用，将“启用客户端调试”设置为 TRUE。

此外，我最近在 SO 上看到了一些问题，涉及当客户端是 IE10 时调试器没有启动（这很奇怪）。
解决方案是更改注册表设置。似乎安装 IE10 会弄乱调试器和 ASP 之间的链接。也许 IIS8 也是如此。这里有更多信息，也许它可以帮助你：

[http://blogs.msdn.com/b/yash/archive/2007/09/20/debugger-not-working.aspx](http://blogs.msdn.com/b/yash/archive/2007/09/20/debugger-not-working.aspx) [VS2010 和 IE10 附加脚本调试器以处理 iexplore.exe 失败](https://stackoverflow.com/questions/13421797/vs2010-and-ie10-attaching-the-script-debugger-to-process-iexplore-exe-failed)

建议的另一个解决方案（除了注册表设置）是安装 VS2012（免费版就足够了）以恢复调试器和服务器之间的链接。

HTH。埃里克

# nested - ksh93 中的 %（模式对）？

> ID：15573328
> 
> 赞同：3
> 
> 时间：2013-03-22T14:51:10.987
> 
> 标签：nested, pattern-matching, character, substring, ksh

我已经学习 ksh 很长一段时间了，但我仍然无法`%(pattern-pair(s))`在手册中理解。任何人都可以举一个简单有意义的例子吗？

```
A pattern of the form %(pattern-pair(s)) is a sub-pattern that  can  be
used to match nested character expressions.  Each pattern-pair is a two
character sequence which cannot contain & or |.  The first pattern-pair
specifies  the starting and ending characters for the match.  Each sub-
sequent pattern-pair represents the beginning and ending characters  of
a  nested  group  that  will be skipped over when counting starting and
ending character matches.  The behavior is unspecified when  the  first
character of a pattern-pair is alpha-numeric except for the following:
       D      Causes  the  ending character to terminate the search for
              this pattern without finding a match.
       E      Causes the ending  character  to  be  interpreted  as  an
              escape character.
       L      Causes  the ending character to be interpreted as a quote
              character causing all characters to be ignored when look-
              ing for a match.
       Q      Causes  the ending character to be interpreted as a quote
              character causing all characters other  than  any  escape
              character to be ignored when looking for a match. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-20T23:38:57.457

我想它对 JSON 解析很有用：

```
json='{"foo":{"bar":"baz"} }'

#remove all quoted values nested in punctuation except the first
jsonroot=${json%%[[:punct:]][[:punct:]]%(\"\")*}

#remove initial curly
jsonroot=${jsonroot#?} 
```

# c - GSL 和 gsl_linalg_cholesky_invert

> ID：15573330
> 
> 赞同：1
> 
> 时间：2013-03-22T14:51:14.287
> 
> 标签：c, compiler-errors, statistics, syntax-error, blas

我在 ac 代码中使用 gsl 库。一切正常，但是当我使用命令 gsl_linalg_cholesky_invert 时，终端显示以下消息：

```
Undefined symbols for architecture x86_64:"_gsl_linalg_cholesky_invert", referenced from:
  _main in cc4eefuQ.o
ld: symbol(s) not found for architecture x86_64
collect2: error: ld returned 1 exit status 
```

代码示例如下。

```
#include <stdio.h>
#include <gsl/gsl_math.h>
#include <gsl/gsl_linalg.h>
#include <math.h>

void main()
{
gsl_matrix * A      = gsl_matrix_calloc (2,2);

gsl_matrix_set(A,0,0,1);
gsl_matrix_set(A,0,1,0.5);
gsl_matrix_set(A,1,0,0.5);
gsl_matrix_set(A,1,1,1);
gsl_linalg_cholesky_decomp(A);
gsl_linalg_cholesky_invert(A);
} 
```

如果我注释掉这条线`gsl_linalg_cholesky_invert(A);`，一切都会好起来的。

我使用以下命令编译代码：

```
gcc-mp-4.7 wrapnorm.c -o wrapnorm -lgsl -l gslcblas -lm 
```

带有山狮和gsl 1.9版的macbook pro。

谢谢

# jquery - 如何使用 jQuery 工具提示？

> ID：15573332
> 
> 赞同：1
> 
> 时间：2013-03-22T14:51:23.530
> 
> 标签：jquery, asp.net, jquery-ui, tooltip

我正在使用 jQuery 工具提示，但有一个小问题一切正常：我没有看到工具提示的箭头形状。相反，我得到了一个正方形。我想让箭头形状指向文本框。我从[这里](http://jqueryui.com/tooltip/#custom-style)得到了以下代码，当你看到它时一切看起来都很好。

我怎样才能得到箭头指向的形状？这是我的代码：

```
 <script type="text/javascript">
          $(function () {
              $(document).tooltip({
                  position: {
                      my: "center bottom-20",
                      at: "center top",
                      using: function (position, feedback) {
                          $(this).css(position);
                          $("<div>")
            .addClass("arrow")
            .addClass(feedback.vertical)
            .addClass(feedback.horizontal)
            .appendTo(this);
                      }
                  }
              });
          });
  </script>
  <style type="text/css">
  .ui-tooltip, .arrow:after {
    background: black;
    border: 2px solid white;
  }
  .ui-tooltip {
    padding: 10px 20px;
    color: white;
    border-radius: 20px;
    font: bold 14px "Helvetica Neue", Sans-Serif;
    text-transform: uppercase;
    box-shadow: 0 0 7px black;
  }
  .arrow {
    width: 70px;
    height: 16px;
    overflow: hidden;
    position: absolute;
    left: 50%;
    margin-left: -35px;
    bottom: -16px;
  }
  .arrow.top {
    top: -16px;
    bottom: auto;
  }
  .arrow.left {
    left: 20%;
  }
  .arrow:after {
    content: "";
    position: absolute;
    left: 20px;
    top: -20px;
    width: 25px;
    height: 25px;
    box-shadow: 6px 5px 9px -9px black;
    -webkit-transform: rotate(45deg);
    -moz-transform: rotate(45deg);
    -ms-transform: rotate(45deg);
    -o-transform: rotate(45deg);
    tranform: rotate(45deg);
  }
  .arrow.top:after {
    bottom: -20px;
    top: auto;
  }
  </style> 
```

需要注意的一件事是，我正在使用 ASP.NET，并且在这些下方出现红线：

```
box-shadow:
tranform:
border-radius: 
```

对于上述每个属性，错误显示为“[property] 不是已知的 CSS 属性名称”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T15:20:34.227

箭头对我有用，我基本上只是复制并粘贴了您的代码，并将 UI 的示例代码作为正文。这是一个愚蠢的问题：您在自定义 css 之前加载 jqueryUI css，对吗？您还可能希望将自定义 js 移动到正文的末尾，就在结束`</body>`标记之前，只需确保它在 JQuery 和 JQuery UI 之后。[这是 fiddle 的链接](http://jsfiddle.net/tpressley1/SGfWU/)。

```
<script>
      $(function () {
          $(document).tooltip({
              position: {
                  my: "center bottom-20",
                  at: "center top",
                  using: function (position, feedback) {
                      $(this).css(position);
                      $("<div>")
        .addClass("arrow")
        .addClass(feedback.vertical)
        .addClass(feedback.horizontal)
        .appendTo(this);
                  }
              }
          });
      });
</script>
</body> 
```

**编辑：**只是为了咯咯笑，我做了一个 jsfiddle 来说明我表达得很糟糕的建议。哈哈。它使用图像。它并不完美，但你明白了。[图像工具指针](http://jsfiddle.net/tpressley1/NnMK8/48/)！！

希望一切都对您有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-12T15:54:53.393

我花了几个小时修改 CSS 以使其在 IE 8 下工作。该解决方案使用 jQuery UI Themes 提供的三角形图标。请参阅这篇文章以获取答案： [How do you make the arrows appear on the jQuery UI 1.10.2 Tooltips widget in IE 8?](https://stackoverflow.com/questions/17051908/how-do-you-make-the-arrows-appear-on-the-jquery-ui-1-10-2-tooltips-widget-in-ie/17069816#17069816)

# java - 无法在 Selenium Webdriver 中找到 iframe

> ID：15573335
> 
> 赞同：0
> 
> 时间：2013-03-22T14:51:28.427
> 
> 标签：java, ssl, selenium, webdriver

我正在使用 Selenium 2 WebDriver API 并在运行测试时收到无法定位元素错误。该元素是一个 iframe。但是等等，当我在本地（在我的本地服务器中）运行测试时，它工作正常（通过 driver.switchTo().frame("frame id");) 方法，但是当我的测试在实时服务器上运行时，错误就来了。

它们之间的一个区别是实时服务器在 https 上运行。这是 WebDriver 无法通过 SSL 识别 iframe 的问题吗？

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T11:03:15.680

利用`driver.switchTo().frame(index);`

# c# - 调整矩形角的大小

> ID：15573337
> 
> 赞同：2
> 
> 时间：2013-03-22T14:51:32.660
> 
> 标签：c#, .net, silverlight

我正在使用图像编辑器，有一些形状控件，如矩形、日食等，在画布上具有拖放功能，它们可以重新调整大小（一个角是固定的，其他三个是重新调整大小的），附上下面的屏幕截图：

![在此处输入图像描述](../Images/f108ee2335ae4a2ee20e6305148c21c7.png)

我只想调整选定角的大小，其他三个将被修复，有什么想法吗？

**DaveRook 编辑**

在 Photoshop 中，这是通过[包裹](http://csscreme.com/tutorials/photoshop-tutorials/warp_tool_effect_photoshop_tutorial)（在变换下）来实现的！这意味着重新绘制该角与图像的其余部分不成比例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T08:28:43.767

您需要做一些事情来调整矩形的大小。

1.  拖动手柄（供用户单击和移动的东西）。
2.  在移动拖动手柄时根据鼠标位置计算矩形的新高度和宽度。
3.  更新矩形的高度和宽度。

这里没有捷径，但[这个 SO 问题](https://stackoverflow.com/questions/4702192/using-a-handle-to-resize-in-silverlight)应该足以让你开始

# reference - 将 WebEngine 从一个 .java 文件引用到另一个

> ID：15573340
> 
> 赞同：0
> 
> 时间：2013-03-22T14:51:41.120
> 
> 标签：reference, javafx-2, javafx

这是使用 WebEngine 对象的文件`ClientArea.java`（位于文件夹*demoapp中）。*

```
public class ClientArea implements Initializable {
    public WebEngine engine;

    @Override
    public void initialize(URL url, ResourceBundle rb) {
        engine = browser.getEngine();
        engine.load("about:blank");
    }
} 
```

我想将它引用到`Undecorator.java`位于文件夹 *insidefx.undecorator中的另一个文件 ( )*

我怎样才能做这个参考？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T15:37:38.907

我解决了类似的问题如下：在你加载fxml文件的地方，你可以得到控制器的任何元素，并提供它对另一个控制器的引用。

```
FXMLLoader fxmlLoader = new FXMLLoader();
fxmlLoader.setBuilderFactory(new JavaFXBuilderFactory());

fxmlLoader.setLocation(...); // set a URL for the ClientArea.fxml
try {
   fxmlLoader.load();
} catch (IOException ex) {
   ...
}
ClientArea cacontroller = (ClientArea) fxmlLoader.getController();

WebEngine engine = cacontroller.getEngine(); // add a getter method in ClientArea

fxmlLoader.setLocation(...); // set a URL for the Undecorator.fxml
try {
   fxmlLoader.load();
} catch (IOException ex) {
   ...
}
Undecorator ucontroller = (Undecorator) fxmlLoader.getController();
ucontroller.setEngine(engine); // add a setter method in Undecorator 
```

# html - 我可以用吗 与不同 订单？

> ID：15573345
> 
> 赞同：2
> 
> 时间：2013-03-22T14:51:50.990
> 
> 标签：html

```
<hgroup>
    <h4>Employment</h4>
    <h3>Graphic designer</h3>
    <h5>Godigital</h5>
</hgroup> 
```

这是正确的，还是我应该使用订单标签`<h3><h4><h5>`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T14:53:59.067

完全没问题。

唯一需要记住的是，除了**-** **inside ，你****不能放任何东西`h1``h6``hgroup`**。顺序无所谓。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T14:54:05.370

是的。更多信息[在这里](http://html5doctor.com/the-hgroup-element/)。

> `<hgroup>`充当可能包含在元素中的一个或多个相关标题元素的包装器。它*只能* 包含一组`<h1>–&lt;h6>`元素，它应该用于字幕、替代标题和标语行。

例子：

```
<article>
  <hgroup>
    <h1>Title goes here</h1>
    <h2>Subtitle of article</h2>
  </hgroup>
  <p>Lorem Ipsum dolor set amet</p>
</article> 
```

已编辑：在[此决定](http://lists.w3.org/Archives/Public/public-html-admin/2013Apr/0003.html)之后，`hgroup`从 HTML5 规范中删除。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T14:53:59.333

很难从这个上下文中推断出其他东西，但是在 HTML 文件中，这将是正确的。您最多可以使用 h6 标签。 [W3C 组](http://www.w3.org/wiki/HTML/Elements/hgroup)

# svn - SVN 从分支合并到主干，以便从主干中删除不在分支中的所有内容

> ID：15573349
> 
> 赞同：0
> 
> 时间：2013-03-22T14:52:11.373
> 
> 标签：svn

我在 SVN 中合并时遇到问题，我什至不认为这是可以合理解决的。

SVN repo 中有一个主干。每个人都承诺在第 X 天之前使用树干。在那之后，有人被要求做一个分支，所以他做了。但问题是他没有使用 SVN 方法。相反，他创建了一个新的空分支文件夹，检查了该文件夹，使用 OS-s 复制/粘贴将所有主干的内容复制到该文件夹​​并提交。所以这个分支中的那些文件对trunk-s svn历史一无所知。

现在，几个月后，有必要让这个分支成为新的主干。所以我需要以某种方式将所有这些分支文件合并到主干，同时从主干中删除所有不在分支中的文件。

为什么我不能只删除主干并使分支成为新主干的问题是我希望保留来自主干的 svn 历史记录以及来自分支的历史记录。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T11:42:45.550

我认为您必须走老路并手动比较和合并文件。我会使用[Beyond Compare](http://www.scootersoftware.com/moreinfo.php)来完成这项任务。

如果您只想将分支的文件镜像到主干（包括删除后者中不存在的那些文件），那么您可以使用[rSync](http://rsync.samba.org/)或[RoboCopy](http://technet.microsoft.com/en-us/library/cc733145.aspx)。还有老旧的[Xcopy](http://technet.microsoft.com/en-us/library/cc771254.aspx)。

显然，不要复制存储在`.svn`文件夹中的分支元数据，您必须手动 SVN-从分支中添加新文件，然后 SVN-删除主干中标记为丢失的文件，因为镜像已删除它们.

希望这可以帮助。

# solr - 在 jetty/solr 中设置 maxFormContentSize

> ID：15573352
> 
> 赞同：1
> 
> 时间：2013-03-22T14:52:39.850
> 
> 标签：solr, jetty

我已经在 etc 目录下的 jetty.xml 中更新了 maxFormContentSize，但它仍然返回相同的旧默认值 ,200000。为什么它没有反映新的限制？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-06-18T06:57:32.333

我找到了以下解决方案。您必须在 jetty.xml 文件中的 jetty 连接器配置中添加两个属性，requestHeaderSize 和 requestBufferSize。

```
<Call name="addConnector">
<Arg>
<New class="org.eclipse.jetty.server.bio.SocketConnector">
<Set name="host"><SystemProperty name="jetty.host" /></Set>
<Set name="port"><SystemProperty name="jetty.port" default="8983"/></Set>
<Set name="maxIdleTime">300000</Set>
<Set name="lowResourceMaxIdleTime">1500</Set>
<Set name="statsOn">false</Set>
<Set name="requestHeaderSize">1000000</Set>
<Set name="requestBufferSize">1000000</Set>
</New>
</Arg>
</Call> 
```

# android - Google Places + Map 代码从 v1 更新到 v2

> ID：15573354
> 
> 赞同：1
> 
> 时间：2013-03-22T14:52:46.940
> 
> 标签：android, google-maps-android-api-2

我遵循了一个教程； [http://www.androidhive.info/2012/08/android-working-with-google-places-and-maps-tutorial/](http://www.androidhive.info/2012/08/android-working-with-google-places-and-maps-tutorial/)

谷歌地方方面工作完美，但谷歌地图代码已过时。我不确定如何将谷歌地图代码从 v1 更新到 v2？任何指针？

```
public class PlacesMapActivity extends MapActivity {
    // Nearest places
    PlacesList nearPlaces;

    // Map view
    MapView mapView;

    // Map overlay items
    List<Overlay> mapOverlays;

    AddItemizedOverlay itemizedOverlay;

    GeoPoint geoPoint;
    // Map controllers
    MapController mc;

    double latitude;
    double longitude;
    OverlayItem overlayitem;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.map_places);

        // Getting intent data
        Intent i = getIntent();

        // Users current geo location
        String user_latitude = i.getStringExtra("user_latitude");
        String user_longitude = i.getStringExtra("user_longitude");

        // Nearplaces list
        nearPlaces = (PlacesList) i.getSerializableExtra("near_places");

        mapView = (MapView) findViewById(R.id.mapView);
        mapView.setBuiltInZoomControls(true);

        mapOverlays = mapView.getOverlays();

        // Geopoint to place on map
        geoPoint = new GeoPoint((int) (Double.parseDouble(user_latitude) * 1E6),
                (int) (Double.parseDouble(user_longitude) * 1E6));

        // Drawable marker icon
        Drawable drawable_user = this.getResources()
                .getDrawable(R.drawable.mark_red);

        itemizedOverlay = new AddItemizedOverlay(drawable_user, this);

        // Map overlay item
        overlayitem = new OverlayItem(geoPoint, "Your Location",
                "That is you!");

        itemizedOverlay.addOverlay(overlayitem);

        mapOverlays.add(itemizedOverlay);
        itemizedOverlay.populateNow();

        // Drawable marker icon
        Drawable drawable = this.getResources()
                .getDrawable(R.drawable.mark_blue);

        itemizedOverlay = new AddItemizedOverlay(drawable, this);

        mc = mapView.getController();

        // These values are used to get map boundary area
        // The area where you can see all the markers on screen
        int minLat = Integer.MAX_VALUE;
        int minLong = Integer.MAX_VALUE;
        int maxLat = Integer.MIN_VALUE;
        int maxLong = Integer.MIN_VALUE;

        // check for null in case it is null
        if (nearPlaces.results != null) {
            // loop through all the places
            for (Place place : nearPlaces.results) {
                latitude = place.geometry.location.lat; // latitude
                longitude = place.geometry.location.lng; // longitude

                // Geopoint to place on map
                geoPoint = new GeoPoint((int) (latitude * 1E6),
                        (int) (longitude * 1E6));

                // Map overlay item
                overlayitem = new OverlayItem(geoPoint, place.name,
                        place.vicinity);

                itemizedOverlay.addOverlay(overlayitem);

                // calculating map boundary area
                minLat  = (int) Math.min( geoPoint.getLatitudeE6(), minLat );
                minLong = (int) Math.min( geoPoint.getLongitudeE6(), minLong);
                maxLat  = (int) Math.max( geoPoint.getLatitudeE6(), maxLat );
                maxLong = (int) Math.max( geoPoint.getLongitudeE6(), maxLong );
            }
            mapOverlays.add(itemizedOverlay);

            // showing all overlay items
            itemizedOverlay.populateNow();
        }

        // Adjusting the zoom level so that you can see all the markers on map
        mapView.getController().zoomToSpan(Math.abs( minLat - maxLat ), Math.abs( minLong - maxLong ));

        // Showing the center of the map
        mc.animateTo(new GeoPoint((maxLat + minLat)/2, (maxLong + minLong)/2 ));
        mapView.postInvalidate();

    }

    @Override
    protected boolean isRouteDisplayed() {
        return false;
    }

} 
```

* * *

```
public class AddItemizedOverlay extends ItemizedOverlay<OverlayItem> {

       private ArrayList<OverlayItem> mapOverlays = new ArrayList<OverlayItem>();

       private Context context;

       public AddItemizedOverlay(Drawable defaultMarker) {
            super(boundCenterBottom(defaultMarker));
       }

       public AddItemizedOverlay(Drawable defaultMarker, Context context) {
            this(defaultMarker);
            this.context = context;
       }

       @Override
       public boolean onTouchEvent(MotionEvent event, MapView mapView)
       {   

           if (event.getAction() == 1) {
               GeoPoint geopoint = mapView.getProjection().fromPixels(
                   (int) event.getX(),
                   (int) event.getY());
               // latitude
               double lat = geopoint.getLatitudeE6() / 1E6;
               // longitude
               double lon = geopoint.getLongitudeE6() / 1E6;
               //Toast.makeText(context, "Lat: " + lat + ", Lon: "+lon, Toast.LENGTH_SHORT).show();
           }
           return false;
       } 

       @Override
       protected OverlayItem createItem(int i) {
          return mapOverlays.get(i);
       }

       @Override
       public int size() {
          return mapOverlays.size();
       }

       @Override
       protected boolean onTap(int index) {
         OverlayItem item = mapOverlays.get(index);
         AlertDialog.Builder dialog = new AlertDialog.Builder(this.context);
         dialog.setTitle(item.getTitle());
         dialog.setMessage(item.getSnippet());
         dialog.setPositiveButton("OK", new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog, int which) {
            }
        });
         dialog.show();
         return true;
       }

       public void addOverlay(OverlayItem overlay) {
          mapOverlays.add(overlay);
       }

       public void populateNow(){
           this.populate();
       }
 } 
```

* * *

```
public class NearbyActivity extends Activity{
    // flag for Internet connection status
        Boolean isInternetPresent = false;

        // Connection detector class
        ConnectionDetector cd;

        // Alert Dialog Manager
        AlertDialogManager alert = new AlertDialogManager();

        // Google Places
        GooglePlaces googlePlaces;

        // Places List
        PlacesList nearPlaces;

        // GPS Location
        GPSTracker gps;

        // Button
        Button btnShowOnMap;

        // Progress dialog
        ProgressDialog pDialog;

        // Places Listview
        ListView lv;

        // ListItems data
        ArrayList<HashMap<String, String>> placesListItems = new ArrayList<HashMap<String,String>>();

        // KEY Strings
        public static String KEY_REFERENCE = "reference"; // id of the place
        public static String KEY_NAME = "name"; // name of the place
        public static String KEY_VICINITY = "vicinity"; // Place area name

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        requestWindowFeature(Window.FEATURE_CUSTOM_TITLE); 
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main3);
        getWindow().setFeatureInt(Window.FEATURE_CUSTOM_TITLE, R.layout.window_title);  
        Button buttonNear = (Button) findViewById(R.id.buttonNearby);       
        buttonNear.setOnClickListener(new View.OnClickListener() { 
            @Override
            public void onClick(View arg0) {
                //Starting a new Intent
                Intent HomeScreen = new Intent(getApplicationContext(),HomeActivity.class); 
                startActivity(HomeScreen);
            }
            }); 

                        cd = new ConnectionDetector(getApplicationContext());

                        // Check if Internet present
                        isInternetPresent = cd.isConnectingToInternet();
                        if (!isInternetPresent) {
                            // Internet Connection is not present
                            alert.showAlertDialog(NearbyActivity.this, "Internet Connection Error",
                                    "Please connect to working Internet connection", false);
                            // stop executing code by return
                            return;
                        }

                        // creating GPS Class object
                        gps = new GPSTracker(this);

                        // check if GPS location can get
                        if (gps.canGetLocation()) {
                            Log.d("Your Location", "latitude:" + gps.getLatitude() + ", longitude: " + gps.getLongitude());
                        } else {
                            // Can't get user's current location
                            alert.showAlertDialog(NearbyActivity.this, "GPS Status",
                                    "Couldn't get location information. Please enable GPS",
                                    false);
                            // stop executing code by return
                            return;
                        }

                        // Getting listview
                        lv = (ListView) findViewById(R.id.list);

                        // button show on map
                        btnShowOnMap = (Button) findViewById(R.id.btn_show_map);

                        // calling background Async task to load Google Places
                        // After getting places from Google all the data is shown in listview
                        new LoadPlaces().execute();

                        /** Button click event for shown on map */
                        btnShowOnMap.setOnClickListener(new View.OnClickListener() {

                            @Override
                            public void onClick(View arg0) {
                                Intent i = new Intent(getApplicationContext(),
                                        PlacesMapActivity.class);
                                // Sending user current geo location
                                i.putExtra("user_latitude", Double.toString(gps.getLatitude()));
                                i.putExtra("user_longitude", Double.toString(gps.getLongitude()));

                                // passing near places to map activity
                                i.putExtra("near_places", nearPlaces);
                                // staring activity
                                startActivity(i);
                            }
                        });

                        /**
                         * ListItem click event
                         * On selecting a listitem SinglePlaceActivity is launched
                         * */
                        lv.setOnItemClickListener(new OnItemClickListener() {

                            @Override
                            public void onItemClick(AdapterView<?> parent, View view,
                                    int position, long id) {
                                // getting values from selected ListItem
                                String reference = ((TextView) view.findViewById(R.id.reference)).getText().toString();

                                // Starting new intent
                                Intent in = new Intent(getApplicationContext(),
                                        SinglePlaceActivity.class);

                                // Sending place refrence id to single place activity
                                // place refrence id used to get "Place full details"
                                in.putExtra(KEY_REFERENCE, reference);
                                startActivity(in);
                            }
                        });
                    }

                    /**
                     * Background Async Task to Load Google places
                     * */
                    class LoadPlaces extends AsyncTask<String, String, String> {

                        /**
                         * Before starting background thread Show Progress Dialog
                         * */
                        @Override
                        protected void onPreExecute() {
                            super.onPreExecute();
                            pDialog = new ProgressDialog(NearbyActivity.this);
                            pDialog.setMessage(Html.fromHtml("<b>Search</b><br/>Loading Places..."));
                            pDialog.setIndeterminate(false);
                            pDialog.setCancelable(false);
                            pDialog.show();
                        }

                        /**
                         * getting Places JSON
                         * */
                        protected String doInBackground(String... args) {
                            // creating Places class object
                            googlePlaces = new GooglePlaces();

                            try {
                                // Separeate your place types by PIPE symbol "|"
                                // If you want all types places make it as null
                                // Check list of types supported by google
                                // 
                                String types = null; // Listing places only cafes, restaurants

                                // Radius in meters - increase this value if you don't find any places
                                double radius = 400; // 1000 meters 

                                // get nearest places
                                nearPlaces = googlePlaces.search(gps.getLatitude(),
                                        gps.getLongitude(), radius, types);

                            } catch (Exception e) {
                                e.printStackTrace();
                            }
                            return null;
                        }

                        /**
                         * After completing background task Dismiss the progress dialog
                         * and show the data in UI
                         * Always use runOnUiThread(new Runnable()) to update UI from background
                         * thread, otherwise you will get error
                         * **/
                        protected void onPostExecute(String file_url) {
                            // dismiss the dialog after getting all products
                            pDialog.dismiss();
                            // updating UI from Background Thread
                            runOnUiThread(new Runnable() {
                                public void run() {
                                    /**
                                     * Updating parsed Places into LISTVIEW
                                     * */
                                    // Get json response status
                                    String status = nearPlaces.status;

                                    // Check for all possible status
                                    if(status.equals("OK")){
                                        // Successfully got places details
                                        if (nearPlaces.results != null) {
                                            // loop through each place
                                            for (Place p : nearPlaces.results) {
                                                HashMap<String, String> map = new HashMap<String, String>();

                                                // Place reference won't display in listview - it will be hidden
                                                // Place reference is used to get "place full details"
                                                map.put(KEY_REFERENCE, p.reference);

                                                // Place name
                                                map.put(KEY_NAME, p.name);

                                                // adding HashMap to ArrayList
                                                placesListItems.add(map);
                                            }
                                            // list adapter
                                            ListAdapter adapter = new SimpleAdapter(NearbyActivity.this, placesListItems,
                                                    R.layout.list_item,
                                                    new String[] { KEY_REFERENCE, KEY_NAME}, new int[] {
                                                            R.id.reference, R.id.name });

                                            // Adding data into listview
                                            lv.setAdapter(adapter);
                                        }
                                    }
                                    else if(status.equals("ZERO_RESULTS")){
                                        // Zero results found
                                        alert.showAlertDialog(NearbyActivity.this, "Near Places",
                                                "Sorry no places found. Try to change the types of places",
                                                false);
                                    }
                                    else if(status.equals("UNKNOWN_ERROR"))
                                    {
                                        alert.showAlertDialog(NearbyActivity.this, "Places Error",
                                                "Sorry unknown error occured.",
                                                false);
                                    }
                                    else if(status.equals("OVER_QUERY_LIMIT"))
                                    {
                                        alert.showAlertDialog(NearbyActivity.this, "Places Error",
                                                "Sorry query limit to google places is reached",
                                                false);
                                    }
                                    else if(status.equals("REQUEST_DENIED"))
                                    {
                                        alert.showAlertDialog(NearbyActivity.this, "Places Error",
                                                "Sorry error occured. Request is denied",
                                                false);
                                    }
                                    else if(status.equals("INVALID_REQUEST"))
                                    {
                                        alert.showAlertDialog(NearbyActivity.this, "Places Error",
                                                "Sorry error occured. Invalid Request",
                                                false);
                                    }
                                    else
                                    {
                                        alert.showAlertDialog(NearbyActivity.this, "Places Error",
                                                "Sorry error occured.",
                                                false);
                                    }
                                }
                            });

                        }

                    }
                    @Override
                    public boolean onCreateOptionsMenu(Menu menu) {
                        getMenuInflater().inflate(R.menu.home, menu);
                        return true;
                    }

} 
```

# php - 为什么我的 PHP 联系表格不起作用？（php新手）

> ID：15573355
> 
> 赞同：0
> 
> 时间：2013-03-22T14:52:49.297
> 
> 标签：php, forms

根据我了解到的情况，我的contact.html 文件和_contact.php 文件中的所有内容都正确无误，但由于某种原因，我不断收到Chrome 错误消息“...可能已关闭或配置不正确”。

这是代码，感谢您的帮助。

contact.html 中的联系表格：

```
 <div class="ctext5">
    <br />
          <form id="form1" name="form1" method="post" action="_contact.php">
  <table width="557" border="0" cellspacing="10">
      <tr>
        <th width="234" scope="row"><label for="firstname">First Name:</label></th>
        <td width="545"><input type="text" name="firstname" id="firstname" /></td>
      </tr>
      <tr>
        <th scope="row"><label for="lastname">Last Name:</label></th>
        <td><input type="text" name="lastname" id="lastname" /></td>
      </tr>
      <tr>
      </tr>
      <tr>
        <th scope="row"><label for="_email">E-Mail:</label></th>
        <td><input type="text" name="_email" id="_email" /></td>
      </tr>
      <tr>
        <th scope="row"><label for="address">Address:</label></th>
        <td><input type="text" name="address" id="address" /></td>
      </tr>
      <tr>
        <th scope="row"><label for="cityzip">City/Zip:</label></th>
        <td><input type="text" name="cityzip" id="cityzip" /></td>
      </tr>
      <tr>
        <th scope="row"><label for="phone">Phone #:</label></th>
        <td><input type="text" name="phone" id="phone" /></td>
      </tr>
      <tr>
        <th height="85" scope="row"><label for="comments">Questions / Other Information</label></th>
        <td><textarea name="comments" id="comments" cols="35" rows="5"></textarea></td>
      </tr>
    </table>
  <input name="Submit" type="submit" value="Submit" />
</form>
</div> 
```

_contact.php 的代码：

```
<?php
$firstname = $_POST['firstname'];
$lastname = $_POST['lastname'];
$_email = $_POST['_email'];
$phone = $_POST['phone'];
$address = $_POST['address'];
$cityzip = $_POST['cityzip'];
$comments = $_POST['comments'];

$headers = "MIME-Version: 1.0\r\n";
$headers = "From: $_email";
$to = 'email@domain.com';
$subject = 'Accurate Solutions Contact Form Submitted';
$message = "
First Name: $firstname \n
Last Name: $lastname \n
Phone: $phone \n
Address: $address \n
City/Zip: $cityzip \n
Email: $_email \n
Comments: $comments \n

mail($to, $subject, $message, $headers);

?> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-22T14:53:46.613

你没有关闭你的`$message`字符串。试试这个：

```
$message = "
First Name: $firstname \n
Last Name: $lastname \n
Phone: $phone \n
Address: $address \n
City/Zip: $cityzip \n
Email: $_email \n
Comments: $comments \n";   //here the last double quote and the semicolon!

mail($to, $subject, $message, $headers); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T14:55:50.097

解析错误

```
$message = "
First Name: $firstname \n
Last Name: $lastname \n
Phone: $phone \n
Address: $address \n
City/Zip: $cityzip \n
Email: $_email \n
Comments: $comments \n

mail($to, $subject, $message, $headers);

?> 
```

应该

```
$message = "
First Name: $firstname \n
Last Name: $lastname \n
Phone: $phone \n
Address: $address \n
City/Zip: $cityzip \n
Email: $_email \n
Comments: $comments \n";

mail($to, $subject, $message, $headers);

?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T14:56:26.327

```
$message = "
First Name: $firstname \n
Last Name: $lastname \n
Phone: $phone \n
Address: $address \n
City/Zip: $cityzip \n
Email: $_email \n
Comments: $comments \n";

mail($to, $subject, $message, $headers);

?> 
```

您在消息末尾缺少 ";

# facebook-graph-api - access_token 过期了？我正在尝试使用 JS 查询公共帖子。更简单的方法？

> ID：15573358
> 
> 赞同：0
> 
> 时间：2013-03-22T14:52:54.887
> 
> 标签：facebook-graph-api, facebook-javascript-sdk

这里是初学者，我已经在 Facebook 开发人员文档和 Google 中迷失了好几个小时。我确定这是一个简单的问题，但我只需要一些指导。

我正在尝试做的事情：使用 JavaScript 从公共 Facebook 页面查询页面所有者的最新帖子，并将其解析为在我自己的 HTML 中显示（不能使用[社交插件](https://developers.facebook.com/docs/plugins/)- 我需要对 HTML/CSS 进行自定义控制）。

到目前为止我所做的工作：

```
var token = '<my_token>';
var query = 'fields=posts.limit(1)';
var request = 'https://graph.facebook.com/[mypage]?' + query + '&access_token=' + token;
$.getJSON(request, function(response) {
  alert(response.posts.data[0].message);
}); 
```

这确实有效，但是，[访问令牌调试器](https://developers.facebook.com/tools/debug/access_token?q=)说我的 access_token 将在 2 个月内到期。为什么？这是一个公开的Facebook页面，我只想查询页面所有者的最新评论。我真的需要创建一个 Facebook 应用程序并通过 PHP 登录才能访问这些公共信息吗？

我正在用 Twitter 提要做同样的事情，我所要做的就是 $.getJSON [http://api.twitter.com/1/statuses/user_timeline/.json](http://api.twitter.com/1/statuses/user_timeline/)，完全在 JavaScript 中。

从 Facebook 获取类似信息似乎要困难得多，但也许我用错了方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T15:02:03.367

> 这确实有效，但是，访问令牌调试器说我的 access_token 将在 2 个月内到期。为什么？

因为这就是用户访问令牌的作用。

> 我真的需要创建一个 Facebook 应用程序并通过 PHP 登录才能访问这些公共信息吗？

对于以任何方式受到限制的页面（基于年龄、国家或与酒精相关的内容），您*必须*使用用户访问令牌，因为这是 Facebook 可以确定您是否真正被允许查看内容的唯一方法.

如果它是您自己的页面，那么您可以生成一个页面访问令牌——如果您使用长期存在的用户访问令牌来获取它们，那么这些令牌默认不会过期。

但是您不想在客户端 JavaScript 中公开这种令牌，因为访问您网站的每个人都可以从那里窃取它并代表您的页面采取行动。

# .net - Crypto API 中交换密钥和签名密钥的区别

> ID：15573359
> 
> 赞同：4
> 
> 时间：2013-03-22T14:52:55.603
> 
> 标签：.net, security, cryptography, cryptoapi

在 .NET 加密 API 中，我注意到 CspParameters 对象具有`KeyNumber`可用于指定密钥应该是签名密钥还是交换密钥的属性。

就 RSA 密钥而言，两者之间有什么真正的区别吗？具体来说，如果我使用交换密钥进行签名，生成的密钥是否会使其不适合或不安全地用于该用途？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T15:02:53.617

您不应使用交换密钥进行签名。根据[MSDN](http://msdn.microsoft.com/en-us/library/system.security.cryptography.keynumber.aspx)，交换密钥会分发给其他人，以便他们可以加密内容以发送给您。如果他们想对消息进行签名以表明他们发送了它，那么他们将使用自己的[私钥](http://en.wikipedia.org/wiki/RSA_%28algorithm%29#Signing_messages)（签名密钥）进行签名，并使用您的公钥进行加密。用 Diffie-Hellman 术语来说，如果你用你的公钥签署东西，然后与其他人分发/交换它，他们将能够签署消息，使它们看起来来自你。只需将交换密钥视为您的公共密钥，将签名密钥视为您的私有密钥。

# java - 使用 GWT 和 GAE 进行 JUnit 测试

> ID：15573365
> 
> 赞同：3
> 
> 时间：2013-03-22T14:53:23.237
> 
> 标签：java, google-app-engine, gwt, junit

我想要一些 JUnit 测试（用 GWT 创建）来联系一个 servlet（里面有 GAE 调用）。当我运行测试时，我得到以下堆栈跟踪：

```
java.lang.NullPointerException
    at com.google.appengine.api.NamespaceManager.get(NamespaceManager.java:101)
    at com.google.appengine.api.memcache.BaseMemcacheServiceImpl.getEffectiveNamespace(BaseMemcacheServiceImpl.java:65)
    at com.google.appengine.api.memcache.AsyncMemcacheServiceImpl.doGet(AsyncMemcacheServiceImpl.java:295)
    at com.google.appengine.api.memcache.AsyncMemcacheServiceImpl.contains(AsyncMemcacheServiceImpl.java:283)
    at com.google.appengine.api.memcache.MemcacheServiceImpl.contains(MemcacheServiceImpl.java:44)
    at com.peerkesoftware.etheria.web.server.model.UpdateTimer.<init>(UpdateTimer.java:17)
    at com.peerkesoftware.etheria.web.server.UpdateTimerServlet.<init>(UpdateTimerServlet.java:12)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
    at java.lang.reflect.Constructor.newInstance(Constructor.java:513)
    at java.lang.Class.newInstance0(Class.java:355)
    at java.lang.Class.newInstance(Class.java:308)
    at org.mortbay.jetty.servlet.Holder.newInstance(Holder.java:153)
    at org.mortbay.jetty.servlet.ServletHolder.getServlet(ServletHolder.java:339)
    at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:463)
    at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:362)
    at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
    at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:181)
    at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:729)
    at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:405)
    at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
    at org.mortbay.jetty.handler.RequestLogHandler.handle(RequestLogHandler.java:49)
    at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
    at org.mortbay.jetty.Server.handle(Server.java:324)
    at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:505)
    at org.mortbay.jetty.HttpConnection$RequestHandler.headerComplete(HttpConnection.java:829)
    at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:513)
    at org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:211)
    at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:380)
    at org.mortbay.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:395)
    at org.mortbay.thread.QueuedThreadPool$PoolThread.run(QueuedThreadPool.java:488) 
```

有人可以向我解释为什么会这样吗？我该如何解决这个问题？在运行测试之前我需要初始化一些东西吗？

我正在使用 GWT 2.5.1 版和 GAE 1.7.5 版。

我的代码可以在[GitHub 上](https://github.com/peerke/EtheriaWeb)查看。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T15:01:43.990

我自己想通了。

我使用的解决方案：创建 LocalServiceTestHelper 并在对我的 servlet 进行任何调用之前进行设置。然后我所有的 JUnit 测试都是绿色的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T03:38:32.380

第 101 行抛出空指针异常对应于[https://code.google.com/p/googleappengine/source/browse/trunk/java/src/main/com/google/appengine/api/NamespaceManager.java](https://code.google.com/p/googleappengine/source/browse/trunk/java/src/main/com/google/appengine/api/NamespaceManager.java)

```
Map<String, Object> attributes =ApiProxy.getCurrentEnvironment().getAttributes(); 
```

我猜你的 ApiProxy.getCurrentEnvironment() 正在返回 null。

[解决方案](https://vaadin.com/forum/-/message_boards/view_message/1379102)：将 war/WEB-INF/web.xml 编辑为 ApplicationServlet 而不是 GAEApplicationServlet。

我想指出的是，您对 GWT 客户端的单元测试不应该深入到服务器端。您应该使用模拟或避免从 GWT 测试调用服务器端类，以使 GWT 测试更快且特定于客户端。

# spring - 我的 Spring 应用程序泄漏数据库连接，而我使用默认 Roo 配置

> ID：15573370
> 
> 赞同：1
> 
> 时间：2013-03-22T14:53:35.713
> 
> 标签：spring, tomcat, database-connection, spring-roo, connection-leaks

我的应用程序遇到了严重问题。它会**泄漏数据库连接**，而我使用默认的 Spring Roo 数据源配置如下：

```
<bean class="org.apache.commons.dbcp.BasicDataSource" destroy-method="close" id="dataSource">
    <property name="driverClassName" value="${database.driverClassName}" />
    <property name="url" value="${database.url}" />
    <property name="username" value="${database.username}" />
    <property name="password" value="${database.password}" />
    <property name="testOnBorrow" value="true" />
    <property name="testOnReturn" value="true" />
    <property name="testWhileIdle" value="true" />
    <property name="timeBetweenEvictionRunsMillis" value="1800000" />
    <property name="numTestsPerEvictionRun" value="3" />
    <property name="minEvictableIdleTimeMillis" value="1800000" />
    <property name="validationQuery" value="SELECT 1" />
    <property name="maxActive" value="2"/>
    <property name="logAbandoned" value="true"/>
    <property name="removeAbandoned" value="true"/>
</bean> 
```

这是导致泄漏的控制器方法：

```
@RequestMapping(value = "getMessages", method = RequestMethod.GET, produces = "application/json")
    @ResponseBody
    public DeferredResult<List<Message>> getMessages(@RequestParam final Long senderId) {
        // TODO: check that recipientId was not changed by malicious user!!
        final Long recipientId = memberService.retrieveCurrentMember().getId();
        final String messageRequestKey = new StringBuilder().append(senderId).append(":").append(recipientId).toString();
        final DeferredResult<List<Message>> deferredResult = new DeferredResult<List<Message>>(null, Collections.emptyList());
        messageRequests.put(messageRequestKey, deferredResult);

        deferredResult.onCompletion(new Runnable() {
            @Override
            public void run() {
                messageRequests.remove(messageRequestKey);
            }
        });

        List<Message> unReadMessages = messageService.findUnreadMessages(senderId, recipientId);
        if (!unReadMessages.isEmpty()) {
            deferredResult.setResult(unReadMessages);
        }
        return deferredResult;
    } 
```

**上述方法**似乎没有将连接返回到池中（由 ajax 连续轮询）。

有人可以帮忙吗？

**编辑**：

休眠配置：

```
<persistence-unit name="persistenceUnit" transaction-type="RESOURCE_LOCAL">
        <provider>org.hibernate.ejb.HibernatePersistence</provider>
        <properties>
            <property name="hibernate.dialect" value="org.hibernate.dialect.MySQL5InnoDBDialect"/>
            <!-- value="create" to build a new database on each run; value="update" to modify an existing database; value="create-drop" means the same as "create" but also drops tables when Hibernate closes; value="validate" makes no changes to the database -->
            <property name="hibernate.hbm2ddl.auto" value="update"/>
            <property name="hibernate.ejb.naming_strategy" value="org.hibernate.cfg.ImprovedNamingStrategy"/>
            <property name="hibernate.connection.charSet" value="UTF-8"/>
            <property name="hibernate.show_sql" value="true"/>
            <property name="hibernate.format_sql" value="true"/>
            <property name="hibernate.use_sql_comments" value="true"/>
        <property name="hibernate.connection.release_mode" value="after_transaction"/>
        </properties>
    </persistence-unit> 
```

休眠版本：

```
<dependency>
            <groupId>org.hibernate</groupId>
            <artifactId>hibernate-core</artifactId>
            <version>4.1.8.Final</version>
        </dependency>
        <dependency>
            <groupId>org.hibernate</groupId>
            <artifactId>hibernate-entitymanager</artifactId>
            <version>4.1.8.Final</version>
            <exclusions>
                <exclusion>
                    <groupId>cglib</groupId>
                    <artifactId>cglib</artifactId>
                </exclusion>
                <exclusion>
                    <groupId>dom4j</groupId>
                    <artifactId>dom4j</artifactId>
                </exclusion>
            </exclusions>
        </dependency>
        <dependency>
            <groupId>org.hibernate.javax.persistence</groupId>
            <artifactId>hibernate-jpa-2.0-api</artifactId>
            <version>1.0.1.Final</version>
        </dependency> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T18:38:43.813

我不确定你是否使用休眠？如果是这样，请查看设置 hibernate.connection.release_mode 。我们遇到了这个问题，把它放到 after_transaction 解决了我们所有的连接问题。

**编辑**

我们的配置：

 `````
<beans:bean id="entityManagerFactory"
    class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
        <beans:property name="dataSource" ref="mvcDatasource" />
        <beans:property name="persistenceUnitName" value="mvcPersistenceUnit" />

        <beans:property name="persistenceProvider">
            <beans:bean class="org.hibernate.ejb.HibernatePersistence" />
        </beans:property>

        <!-- Fix Hibernate not properly connected with spring -->
        <beans:property name="jpaVendorAdapter">
            <beans:bean class="org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter" />
        </beans:property>
        <beans:property name="jpaPropertyMap">
            <beans:map>
                <!-- Connection release fix -->
                <beans:entry key="hibernate.connection.release_mode" value="after_transaction" />

                <beans:entry key="hibernate.dialect" value="${hibernate.dialect}" />
    ...
        </beans:map>
    </beans:property>
</beans:bean> 
`````

# macos-carbon - 山狮中的RegisterEventHotKey CMD+TAB

> ID：15573376
> 
> 赞同：4
> 
> 时间：2013-03-22T14:53:49.040
> 
> 标签：macos-carbon, hotkeys, keyboard-shortcuts

根据这篇文章：

[ShortcutRecorder 记录 CMD+Tab](https://stackoverflow.com/questions/3237338/shortcutrecorder-record-cmdtab)

调用`setCanCaptureGlobalHotKeys:YES`ShortCutRecorder 控件应该允许您捕获 CMD+TAB。但是，它似乎不起作用。我自己创建了这个小应用程序来看看发生了什么：

```
OSStatus myHotKeyHandler(EventHandlerCallRef nextHandler, EventRef anEvent, void *userData)
{
    NSLog(@"YEAY WE DID A GLOBAL HOTKEY");
    return noErr;
}

@implementation AppDelegate

- (void)applicationDidFinishLaunching:(NSNotification *)aNotification
{
    EventHotKeyRef myHotKeyRef;
    EventHotKeyID myHotKeyID;
    EventTypeSpec eventType;

    eventType.eventClass = kEventClassKeyboard;
    eventType.eventKind = kEventHotKeyPressed;

    myHotKeyID.signature = 'mhk1';
    myHotKeyID.id = 1;

    InstallApplicationEventHandler(&myHotKeyHandler, 1, &eventType, NULL, NULL);

    OSStatus status = RegisterEventHotKey(kVK_Tab,
                                          cmdKey,
                                          myHotKeyID,
                                          GetApplicationEventTarget(),
                                          0,
                                          &myHotKeyRef);

    NSLog(@"status:%d", status);
}

@end 
```

如果我使用`cmdKey + optionKey`，那么它确实有效。

是否有另一种方法可以在我自己的 Mountain Lion 应用程序中捕获 CMD+TAB？CMD+OPTION+TAB 对我来说不够好。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-07-22T07:51:17.737

自从 2010 年提出这个问题以来，情况发生了一些变化！Dock.app 使用[Event Tap](https://developer.apple.com/library/mac/#documentation/Carbon/Reference/QuartzEventServicesRef/Reference/reference.html)检测到 ⌘⇥ ，并且该事件不再返回到应用程序。

您仍然可以钩住⌘⇥，但您需要自己使用 Event Tap 击败 Dock。这是一些示例代码，由[osxbook.com](http://osxbook.com/book/bonus/chapter2/alterkeys/)提供：

```
// alterkeys.c
// http://osxbook.com
//
// Complile using the following command line:
//     gcc -Wall -o alterkeys alterkeys.c -framework ApplicationServices
//
// You need superuser privileges to create the event tap, unless accessibility
// is enabled. To do so, select the "Enable access for assistive devices"
// checkbox in the Universal Access system preference pane.

#include <ApplicationServices/ApplicationServices.h>

// This callback will be invoked every time there is a keystroke.
//
CGEventRef
myCGEventCallback(CGEventTapProxy proxy, CGEventType type,
                  CGEventRef event, void *refcon)
{
    // Paranoid sanity check.
    if ((type != kCGEventKeyDown) && (type != kCGEventKeyUp))
        return event;

    // The incoming keycode.
    CGKeyCode keycode = (CGKeyCode)CGEventGetIntegerValueField(
                                       event, kCGKeyboardEventKeycode);

    // Swap 'a' (keycode=0) and 'z' (keycode=6).
    if (keycode == (CGKeyCode)0)
        keycode = (CGKeyCode)6;
    else if (keycode == (CGKeyCode)6)
        keycode = (CGKeyCode)0;

    // Set the modified keycode field in the event.
    CGEventSetIntegerValueField(
        event, kCGKeyboardEventKeycode, (int64_t)keycode);

    // We must return the event for it to be useful.
    return event;
}

int
main(void)
{
    CFMachPortRef      eventTap;
    CGEventMask        eventMask;
    CFRunLoopSourceRef runLoopSource;

    // Create an event tap. We are interested in key presses.
    eventMask = ((1 << kCGEventKeyDown) | (1 << kCGEventKeyUp));
    eventTap = CGEventTapCreate(kCGSessionEventTap, kCGHeadInsertEventTap, 0,
                                eventMask, myCGEventCallback, NULL);
    if (!eventTap) {
        fprintf(stderr, "failed to create event tap\n");
        exit(1);
    }

    // Create a run loop source.
    runLoopSource = CFMachPortCreateRunLoopSource(
                        kCFAllocatorDefault, eventTap, 0);

    // Add to the current run loop.
    CFRunLoopAddSource(CFRunLoopGetCurrent(), runLoopSource,
                       kCFRunLoopCommonModes);

    // Enable the event tap.
    CGEventTapEnable(eventTap, true);

    // Set it all running.
    CFRunLoopRun();

    // In a real program, one would have arranged for cleaning up.

    exit(0);
} 
```

这样做的缺点是您无法在 App Store 上沙箱或发布使用 ⌘⇥ 的应用程序。不仅应该很明显为什么在这些环境中不允许使用 Event Taps（它们使您能够终止甚至改变事件），而且 Dock 在 ⌘⇥ 上提供的功能非常有用，并且无法重新映射到不同的键盘快捷键，因此即使是[Witch](http://manytricks.com/witch/)和[Switch](https://github.com/numist/Switch)，默认情况下也会避免使用它。

# vb.net - VB.NET 在创建时填写对象字段

> ID：15573377
> 
> 赞同：5
> 
> 时间：2013-03-22T14:53:49.367
> 
> 标签：vb.net

在 C# 中创建对象时，我们还可以（同时）填写其属性。这在 VB.NET 中可行吗？

例如：

```
MyObject obj = new MyObject
{
   Name = "Bill",
   Age = 50
}; 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-22T14:55:13.337

是的，有可能：

```
Dim obj As New MyObject With { .Name = "Bill", .Age = 50 } 
```

两个重要的事情：

1.  在类名之后和之前使用`With`关键字`{ ... }`
2.  属性名称必须以点为前缀，因此您必须使用`.Name`而不是`Name`

对于集合初始值设定项，请使用`From`关键字：

```
Dim obj as New List(Of String) From { "String1", "String2" } 
```

# clojure - 使用闭包进行数据封装

> ID：15573378
> 
> 赞同：3
> 
> 时间：2013-03-22T14:53:51.317
> 
> 标签：clojure

我想知道在 Clojure 中实现数据封装的惯用方法是什么。下面我描述了我的特定用例来激发我提供的示例代码。

我在**dbaccess 模块**中有代码，它执行复杂的数据库查询以从数据库中获取一些数据。我还有许多对返回的原始数据进行操作的函数。然后，这些函数提供更多处理、更精细的数据视图，并使用来自系统中其他模块的不同参数多次调用。我们称它们为“ *API 函数*”。

查询很繁重，应该在开始时只执行一次，然后*API 函数*将对内存中的原始数据进行操作，而无需执行另一个 DB 查询。

这是我使用闭包的方法：

## 数据库访问模块

```
(ns dbaccess)
    (let
        [raw-data (complex-database-query)]
      (defn create-client-names []
        (fn [some-args] raw-data))
      (defn create-client-portfolio []
        (fn [some-args] raw-data))
      (defn create-client-stocks []
        (fn [some-args] raw-data))) 
```

## 其他一些客户端模块

```
(def client-names (create-client-names))

(doall (map println (client-names "Baltimore"))) 
```

我不喜欢必须命名已捕获原始数据的已创建函数。

更重要的是，上面的代码不允许客户端模块在执行之前配置查询的各个方面（例如数据库连接信息）。

另一方面，如果不使用闭包，我将不得不在**dbaccess 模块**和其他需要调用*API 函数*的模块之间显式地来回传递原始数据。有没有更好的办法？**我应该在dbaccess 模块**中使用可变状态吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T16:05:25.387

> 我将不得不在 dbaccess 模块和需要调用 API 函数的其他模块之间显式地来回传递原始数据

您应该这样做，明确传递函数需要的数据，因为：

*   这将导致数据的创建方式和处理方式之间的松散耦合。
*   阅读时功能会更清晰易懂。
*   单个功能的测试将很容易，因为您可以轻松地模拟数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T19:12:25.603

`let`我猜你在这种情况下不需要：

```
(def ^:private raw-data (promise))

(future (deliver raw-date (complex-database-query))) ;; A. Webb mentioned this

(defn create-client-names []
  (fn [some-args] @raw-data))

... 
```

为什么不`create-client-names`和其他功能只是

```
(defn create-client-names [some-args]
  @raw-data)

... 
```

?

而 IMO 最好使用`doseq`而不是`map`如果有命令体：

```
(doseq [name (client-names "Baltimore")]
  (println name)) 
```

# java - Android DownloadManager 以原始名称保存文件

> ID：15573384
> 
> 赞同：2
> 
> 时间：2013-03-22T14:54:03.843
> 
> 标签：java, android, eclipse, download-manager, android-download-manager

我只是在 Android DownloadManager 上工作，我想用服务器提供的原始文件名保存文件。我当前的代码：

```
 req.setAllowedNetworkTypes(DownloadManager.Request.NETWORK_WIFI
                               | DownloadManager.Request.NETWORK_MOBILE)
   .setAllowedOverRoaming(false)
   .setTitle("Downloading..")
   .setDescription("Downloading ROM")
   .setDestinationInExternalPublicDir(Environment.DIRECTORY_DOWNLOADS,
                                      "NameOfFileOnCard"); 
```

现在，下载文件夹中的文件名已配置，我将其标记为*NameOfFileOnCard*。我必须改变什么？

请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-10-13T13:51:24.487

在我使用这样的代码之前，你可以试试这个：

```
 nameOfFile = URLUtil.guessFileName(fileURL, null, MimeTypeMap.getFileExtensionFromUrl(fileURL)); 
```

不要忘记导入：

```
 import android.webkit.MimeTypeMap;
 import android.webkit.URLUtil; 
```

# oracle - Oracle：强制使用索引

> ID：15573388
> 
> 赞同：0
> 
> 时间：2013-03-22T14:54:07.547
> 
> 标签：oracle, indexing

我有这两个索引：

```
CREATE INDEX NETATEMP.CAMBI_MEM_ANIMALI_ELF_T2A ON NETATEMP.CAMBI_MEM_ANIMALI_ELF_T2
(TELE_TESTATA_LETTURA_ID, ELF_DATA_FINE_FATTURAZIONE)

CREATE INDEX NETATEMP.LET_TESTATE_LETTURE1A ON NETATEMP.LET_TESTATE_LETTURE1
(TELE_STORICO_ID, TRUNC("TELE_DATA_LETTURA"))

CREATE TABLE NETATEMP.cambi_mem_animali_elf
AS
   SELECT   --/*+ parallel(forn 32)  */
            DISTINCT
            forn_fornitura_id,
            TRUNC (tele.TELE_DATA_LETTURA) TELE_DATA_LETTURA,
            forn.edw_partition,
            DECODE (SUBSTR (forn.TELE_TESTATA_LETTURA_ID, 1, 1), '*', 'MIGRATO', 'INTEGRA') Origine
     FROM   NETATEMP.cambi_mem_animali_elf_t2 forn,
            netatemp.let_testate_letture1 tele
            WHERE forn.tele_testata_lettura_id = tele.tele_storico_id
            --
            AND forn.ELF_DATA_FINE_FATTURAZIONE != TRUNC (tele.TELE_DATA_LETTURA) 
```

它使用两个全表扫描。我根本无法理解为什么 Oracle 在此之后不同时查看索引和进行索引范围扫描。我怎么能强制这样做？ ![在此处输入图像描述](../Images/bd92e42696f7b01d22d946f2c776a597.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T15:24:34.403

这是因为 HASH 连接不使用连接谓词上的索引。

阅读本文以了解所有详细信息：[http ://use-the-index-luke.com/sql/join/hash-join-partial-objects](http://use-the-index-luke.com/sql/join/hash-join-partial-objects)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T22:11:37.763

您正在引用未包含在索引中的列，因此即使使用索引连接本身会更快，Oracle 无论如何都必须检索剩余列的所有表块。

供参考：根据统计信息，您可能会通过这两个查询中的第一个获得要查找的索引连接，因为它只能通过索引解决，而第二个查询必须转到表。

```
select count(*)
 from netatemp.cambi_mem_animali_elf_t2 forn
     ,netatemp.let_testate_letture1     tele
where forn.tele_testata_lettura_id = tele.tele_storico_id;

select count(*), min(forn.edw_partition)
 from netatemp.cambi_mem_animali_elf_t2 forn
     ,netatemp.let_testate_letture1     tele
where forn.tele_testata_lettura_id = tele.tele_storico_id; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-23T10:10:01.047

如果您有分区选项，请考虑在连接列上对两个表进行哈希分区。分区连接将大大减少内存需求和连接溢出到磁盘的可能性。

# c++ - 为什么强制转换 vararg 函数参数很重要？

> ID：15573393
> 
> 赞同：3
> 
> 时间：2013-03-22T14:54:23.133
> 
> 标签：c++, casting, variadic-functions

最近我遇到了一个函数的问题，该函数接受可变数量的参数并期望最后一个是空指针。*我无权访问它的实现。*

将最后一个参数转换为`void*`有效但直接传入`NULL`（`nullptr`不可用）不会：

```
foo(x,y,(void*)NULL);   //okay
foo(x,y,NULL);          //crash 
```

IMO 这不应该有所作为，但话又说回来，我以前错了。你能想到演员会产生影响的任何原因吗？或者这仅仅是一个意外（一些不同步或错误的构建或smth。沿着这些线）

提前抱歉，我无法提供更多细节。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-22T14:57:16.143

嗯，`NULL`是 C++ 中的整数常量，而`(void *)NULL`绝对是指针类型。

因此，当它们插入 var-arg 列表时，可以想象它们具有不同的大小。因此，如果后面有另一个参数，这肯定会有所不同。如果没有，您最终可能会从 var-arg 函数内部读取半垃圾。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T15:07:29.413

当您使用可变数量的参数（可变参数函数）时，构建堆栈的方式遵循构建堆栈的基于类型的规则。但是被调用的函数肯定不知道堆栈上的真正内容。它只需要做出假设并继续。这就是为什么将错误的参数传递给 printf 是如此危险的原因——如果你告诉它期待一个长整数，而你只给它一个短整数，它会从堆栈中读取比你放入的数据更多的数据，而且不好事情会发生。

对于您的问题，整数可能不是您架构上的指针大小。（也就是说，sizeof(int) != sizeof(void*)）。由于 NULL 作为整数被压入堆栈，如果它不是指针大小的，那么当函数从堆栈中拉出一个“指针”时，它会抓取谁知道什么。

整数可能最终在寄存器中，而指针最终在堆栈上，或者可能是不同的寄存器文件。我从未在可变参数函数中看到过这种情况，但我怀疑至少有一些编译器和架构可以做到这一点。在这种情况下，被调用的函数在错误的位置寻找数据，同样，没有任何好处。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T15:00:51.943

`NULL`是一个空指针常量，所以必须是“*整数类型的整数常量表达式纯右值，其计算结果为零或类型的纯右值`std::nullptr_t`。* ”如果`nullptr`不可用，我们可以假设它是一个零值整数常量纯右值，例如`0`。失败表明 varargs 调用语义对于`void *`参数和那些（提升的）类型的参数不同`NULL`，例如，如果指针是 64 位和`int`32 位。

# java - Primefaces 数据表中的 ENUM 样式

> ID：15573399
> 
> 赞同：3
> 
> 时间：2013-03-22T14:54:50.297
> 
> 标签：java, jsf, primefaces

我正在尝试使用 dataTable 的 rowStyleClass 属性将行的颜色设置为红色。条件是比较一个枚举，所以如果 invoice.status eq InvoiceStatus.CANCELLED，那么它应该将 css 类“取消”应用于该行。我认为这可能不是将**enum 与 EL 进行比较**的正确方法。你能告诉我怎么做吗？

```
 <p:dataTable id="invoicesTable" widgetVar="invoicesTable" 
                                        value="#{invoiceManager.invoices}"
                                        var="invoice" 
                                        filteredValue = #{invoiceManager.filteredInvoices}"
                                        paginator="true" 
                                        rows="15" 
                                        paginatorPosition="bottom"
                                        paginatorAlwaysVisible="false"
                                        emptyMessage="#{msg['warning.noData']}"
           HERE's THE PROBLEM  -->      rowStyleClass="#{invoice.status eq CANCELLED ? 'cancelled' : null}">
            <f:facet name="header">
                <h:outputText value="#{msg['title.invoices']}" />
                <p:outputPanel style="position: relative; left: 42%;">
                    <h:inputText id="globalFilter" onkeyup="invoicesTable.filter()" />
                </p:outputPanel>                
            </f:facet>

            <p:column headerText="#{msg['label.number']}" filterBy="#{invoice.number}" filterStyle="display: none;">
                <h:outputText value="#{invoice.number}" />
            </p:column>

            <p:column headerText="#{msg['label.customerName']}">
                <h:outputText value="#{invoice.customer.name}" />
            </p:column>

            <p:column headerText="#{msg['label.action']}" styleClass="actionsColumn">
                <p:commandButton process="@this" action="confirmInvoice" icon="ui-icon-search" title="#{msg['button.viewInvoice']}" >
                    <f:setPropertyActionListener target="#{invoiceManager.invoice}" value="#{invoice}" />
                </p:commandButton>
                <p:commandButton process="@this" action="#{invoiceManager.changeInvoiceStatus}" icon="ui-icon-flag" title="#{msg['button.changeInvoiceStatus']}" >
                    <f:setPropertyActionListener target="#{invoiceManager.invoice}" value="#{invoice}" />
                </p:commandButton>
            </p:column>
        </p:dataTable> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T15:25:42.853

枚举在 EL 中被解释为字符串。您需要引用枚举值。

```
rowStyleClass="#{invoice.status eq 'CANCELLED' ? 'cancelled' : null}" 
```

或者，您可以向枚举添加一个新方法，

```
public String getStyleClass() {
    return name().toLowerCase();
} 
```

并按如下方式使用

```
rowStyleClass="#{invoice.status.styleClass}" 
```

# c++ - 范围、运算符、功能错误需要帮助

> ID：15573403
> 
> 赞同：0
> 
> 时间：2013-03-22T14:55:01.537
> 
> 标签：c++, scope, operators

我对这个程序有一些疑问。我先解释一下它的作用。它从如下所示的文件中读取名称和统计信息：

```
1880 John 0.081541 boy
1880 William 0.080511 boy
1880 James 0.050057 boy
1880 Charles 0.045167 boy
1904 Zola 0.000157 girl
1904 Juana 0.000154 girl
1904 Ramona 0.000154 girl
1904 Carmella 0.00015 girl 
```

我将阅读它并将其存储在动态数组中，并能够使用方法进行组织。我的问题是：1）我的提取操作员有什么问题？为什么看不到人阵？我应该在那里打开文件吗？2) 为什么我的 main 看不到 checkLines 函数？我不认为它应该是一个成员函数，我认为它应该是独立的。3）我的复制构造函数有什么问题？有一条黄线而不是一条红线，错误如下：

```
Multiple markers at this line
    - Member 'capacity' was not initialized in this 
     constructor
    - Member 'people' was not initialized in this 
     constructor
    - Member 'fillCount' was not initialized in this 
     constructor 
```

这是代码

宝贝名字.h

```
#ifndef BABYNAMES_H_
#define BABYNAMES_H_
#include <string>
#include <fstream>
using namespace std;

/**
 * gender: an enum to hold types boy and girl
 */
enum gender {boy, girl};

/**
 * PeopleStats: a data struct to hold year, name, double, and the enum type
 * gender
 */
struct PeopleStats {
    short year;
    string name;
    double percent;
    gender sex;
};

/**
 * Names: A class that reads data from a file into a PeopleStats Array
 * and is capable of sorting them by name and by popularity percentage
 */
class BabyNames {

public:
    int checklines(const char fn[]);
    BabyNames(BabyNames& people);
    BabyNames(const char fn[], const int numLines);
    ~BabyNames();
    gender parseSex(string s);
    void swap(int i);
    const int getCapacity();//getter for dataSize
    const PeopleStats& get(int i) const; //getter for objects of the data array
    void sortByName();      //Sorts the names alphabetically
    void sortByPopularity();//Sorts the names by popularity
    void sortByYear();
    friend std::ostream& operator << (std::ostream& os, const PeopleStats& d);
    friend std::ostream& operator << (std::ostream& os, const BabyNames& bn);
    friend std::istream& operator >> (std::istream& in, PeopleStats& ac);
    friend std::istream& operator >> (std::istream& in, BabyNames& ac);
     //int filled; //keeps track of how many array locations have data objects

private:
    static const int MAX_DATA_SIZE = 2000;
    PeopleStats* people;

    int capacity;
    int fillCount; // to keep track of how many array locations have data objects in them
    static const int OUT_OF_BOUNDS = -1;

};//end of class

#endif  /* BABYNAMES_H */ 
```

宝贝名字.cpp

```
#include <iostream>
#include <string>
#include <fstream>
using namespace std;
#include "BabyNames.h"

/**
 * BabyNames: A class that reads data from a file into a PeopleStats Array
 * and is capable of sorting them by name and by popularity percentage
 */

BabyNames::BabyNames(const char fn[], const int numLines) {
    people = new PeopleStats[numLines];
    capacity = numLines;    //set current capacity
    ifstream myfile;        //Open File
    myfile.open(fn);        //read in data
    int filled = 0;
    while (filled < capacity) {
        myfile >> people[filled].year;
        myfile >> people[filled].name;
        myfile >> people[filled].percent;
        string sex;
        myfile >> sex;
        people[filled].sex = parseSex(sex);
        filled++;
    }

}

//Copy Constructor
BabyNames::BabyNames(BabyNames& people){
    PeopleStats* copyPeople = new PeopleStats[];
    for (int i=0; i<500 ;i++)
        copyPeople[i] = people[i];
}

PeopleStats& operator =(const PeopleStats& people){
    PeopleStats x = new PeopleStats[2000];
    for (int i=0; i<2000 ;i++)
        x[i] = people[i];
    return *this;
}//make a member with one parameter

std::istream& operator >> (std::istream& in, PeopleStats& ac){
string str;
ifstream myfile;        //Open File
    myfile.open(fn);        //read in data
    int filled = 0;
myfile >> people[filled].year;
        myfile >> people[filled].name;
        myfile >> people[filled].percent;
        string sex;
        myfile >> sex;
        people[filled].sex = parseSex(sex);
        filled++;
        }
    }//struct doesnt need a loop in the operator
    return in;
}

std::istream& operator >> (std::istream& in, BabyNames& ac){
string str;

    while (in >> str){
        string strInput;
        getline(inf, strInput);
        in >> strInput;

    }//struct doesnt need a loop in the operator
    return in;
}
//Baby names extraction operator does need a loop

int checkLines(const char fn[]){
    int number_of_lines = 0;
    std::string line;
    ifstream myfile("textexample.txt");
    while (std::getline(myfile, line))
        ++number_of_lines;
    std::cout << "Number of lines in text file: " << number_of_lines;
    return number_of_lines;
}//make a stand alone function

BabyNames::~BabyNames(){
    cout << "Destructor to deallocate memory... Done!" << endl;
    delete[]people;
}

/*
 * sortByName - Sorts the entire array of people by name using the bubble
 * sort algorithm. Array is sorted according to name, within the structure
 * Algorithm becomes extremely slow if capacity > 3000
 */
void BabyNames::sortByName(){
    //sorted is set to true if no changes were made
    bool sorted = false;
    //change tells the loop if we made a swap or not
    bool change = false;
    while (!sorted) {
        for (int i = 0; i < capacity - 1; i++) {
            int compare = people[i].name.compare(people[i + 1].name);
            if (compare == 1) {
                swap(i);
                change = true;
            }
        }
        //if the array was not changed,
        //changed sorted to true and exit loop
        if (change == false)
            sorted = true;
        //otherwise reset change and repeat the loop
        else
            change = false;
    }
}

/**
 * sortByPopularity - sorts the entire array using the bubble sort algorithm
 * Method is almost exactly the same as sortByName, except the compare
 * variable is a double consisting of the difference of the two popularity
 * percentages.
 * Algorithm becomes extremely slow if capacity > 3000
 */
void BabyNames::sortByPopularity(){
    bool sorted = false;
    bool change = false;
    while (!sorted) {
        for (int i = 0; i < capacity - 1; i++) {
            double compare = people[i].percent - people[i + 1].percent;
            if (compare < 0) {
                swap(i);
                change = true;
                break;
            }
        }
        if (change == false)
            sorted = true;
        change = false;
    }
}

void BabyNames::sortByYear(){
    bool sorted = false;
    bool change = false;
    while (!sorted) {
        for (int i = 0; i < capacity - 1; i++) {
            double compare = people[i].year - people[i + 1].year;
            if (compare < 0) {
                swap(i);
                change = true;
                break;
            }
        }
        if (change == false)
            sorted = true;
        change = false;
    }
}
/**
 * swap - swaps the positions of people[i] and people[i + 1]
 * @param i - index of the people array that will get swapped with i + 1
 */
void BabyNames::swap(int i) {
    PeopleStats temp = people[i + 1];
    people[i + 1] = people[i];
    people[i] = temp;
}
/**     string strInput;
        getline(inf, strInput);
        in >> strInput;
 * parseSex: extracts the gender from the input and returns the appropriate enum
 * @param s
 * @return gender object
 */
gender BabyNames::parseSex(string s) {
    if (s == "boy")
        return boy;
    else if (s == "girl")
        return girl;
    else
        throw "invalid Gender";
}

/**
 * getCapacity: returns the number of data entries stored.
 * @return size of the data
 */
const int BabyNames::getCapacity(){
    return capacity;
}
/**
 * get: returns one PeopleStat Object
 * @param i
 * @require: i < capacity
 * @return PeopleStat object
 */
const PeopleStats& BabyNames::get(int i) const {
    if (i>=0 && i < capacity)
        return people[i];
    throw OUT_OF_BOUNDS;
}
/**
 * << - overloads the outstream operator for PeopleStats object
 * @param os
 * @param d
 * @return os : output stream
 */
std::ostream & operator << (std::ostream& os, const PeopleStats& d){
    os << d.name << " " << d.year << " " << d.percent << " " << d.sex;
    return os;
}

/**
 * <<: overloads the outstream operator for the BabyNames object
 * @param os
 * @param bn
 * @return
 */
std::ostream& operator << (std::ostream& os, const BabyNames& bn) {
    os << "  BabyNames object " << std::endl;
    for (int i=0; i < 2000; i++ )
        os << "    " << (i+1) <<":  " << bn.get( i ) << std::endl;
    return os;
}//end of operator 
```

主要的

```
#include <iostream>
#include "BabyNames.h"

/**
 * main: The client function that controls the server, BabyNames
 * For reasons currently unknown, the program will take forever
 * to run after the  * 3000-5000 line mark.
 * @return 0 if successful
 */
int main(void) {
/*    cout << "People names: " << endl;
    BabyNames names("src/people.txt", 2000);
    cout << names;

    cout << "Sorted by popularity" << endl;
    names.sortByPopularity();
    cout << names;
//    cout << "Sorted by name" << endl;
//    names.sortByName();
//    cout << names;
        cout << "Sorted by year" << endl;
        names.sortByYear();
        cout << names;
    cout << "... done!" << endl;
    return 0;*/

    cout << "Baby names: " << endl;

    const char filename[] = "src/people.txt";
    cout << " 1\. Reading file: \"" << filename << "\" ... ";
    int number_of_names = checkLines(filename);
    cout << " number of lines in file is: " << "2000";
    BabyNames* names = new BabyNames( "src/people.txt", 2000 );

    // read the contents of a file into names and print them
    ifstream file( filename, ios::in );
    file >> *names;
    cout << " file has been read!" << endl;

    // Sort and print
    cout << " 2\. Sorted by popularity:" << endl;
    BabyNames* namesByPop = new BabyNames( *names );
    namesByPop->sortByPopularity();
    cout << *namesByPop;

    // Sort and print
    cout << " 3\. Sorted by name:" << endl;
    BabyNames* namesByName = new BabyNames( *names );
    namesByName->sortByName();
    cout << *namesByName;

    // Sort and print
    cout << " 4\. Sorted by year:" << endl;
    BabyNames* namesByYear = new BabyNames( *names );
    namesByYear->sortByYear();
    cout << *namesByYear;

    cout << " 5\. Original names:" << endl;
    cout << *names;

    delete names;
    delete namesByYear;
    delete namesByName;
    delete namesByPop;

    cout << "... all done!" << endl;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T15:03:51.843

1）因为您的提取运算符不是该类的成员。你需要`ac.people`. 您绝对不应该在提取运算符中打开文件，打开的文件（或其他）是通过`in`参数传入的。

2）因为你还没有告诉 main （即你没有在 main 可以看到的任何地方定义它）。也许最简单的方法是在`int checkLines(const char fn[]);`BabyNames.h 的底部附近添加。

3）你的复制构造函数一切都错了。一方面，它不会初始化您正在构建的对象，而是创建一个名为 copyPeople 的数组，然后将其丢弃，您正在构建的对象完全不受影响。另一个问题是参数应该被声明`const`。像这样的东西会更好

```
//Copy Constructor
BabyNames::BabyNames(const BabyNames& bn){
    people = new PeopleStats[bn.capacity];
    for (int i=0; i<bn.capacity ;i++)
        people[i] = bn.people[i];
    capacity = bn.capacity;
    fillCount = bn.fillCount;
} 
```

由于类似的原因，您的赋值运算符也是错误的。

# zend-framework - 非 Zend 风格的 URL 和路由

> ID：15573405
> 
> 赞同：1
> 
> 时间：2013-03-22T14:55:11.077
> 
> 标签：zend-framework

我正在将一个网站从自制引擎重写为 Zend Framework。在这个站点上，大多数页面的 url 过去都是`.html`按设计结束的，即使它们是 php 脚本。说，所有这些看起来都像`/category/page.html`or `/category.html`。我必须在站点的新 Zend 版本中使用相同的命名方案。所以我需要带有类似 url`^(.*)\.html$`的页面（让我们称它们为页面 A）来呈现页面，如果它是相同的 url，但没有`.html`（页面 B）。所以页面

```
/news/superman-was-caught-naked.html 
```

和

```
/news/superman-was-caught-naked 
```

应该呈现相同的内容。如何使旧的 .html-y 页面 A 使用页面 B 的控制器和操作？

# c# - COM接口修改突然开始导致异常

> ID：15573407
> 
> 赞同：3
> 
> 时间：2013-03-22T14:55:13.947
> 
> 标签：c#, c++, com, visual-studio-2012

几年前，我继承了一个 C# 应用程序，该应用程序使用在非托管 C++ DLL 中定义的 COM 对象。从那以后，我一直在成功地调整对象接口，但是在（可能不相关的）VS2012 升级之后，函数签名的添加和更改突然受到随机异常（如 ExecutionEngineException 和 SEHException）的惩罚。

我的理解是该应用程序使用免注册 COM。没有 DLLRegisterServer 实现，我没有看到注册表中提到接口 guid，只有 C# 中的一个 ...

```
[ComImport,
Guid("C2427CB1-D6AE-49e8-B266-114F981C3353"),
InterfaceType(ComInterfaceType.InterfaceIsIUnknown),
SuppressUnmanagedCodeSecurity()]
public interface IDC
{ 
```

一个在 C++ 头文件中。

```
interface __declspec(uuid("C2427CB1-D6AE-49e8-B266-114F981C3353"))
IDC : IUnknown
{ 
```

不过可以肯定的是，我决定在这两个地方换一个新的 guid，并发现它完全阻止了 C# 识别该类：

```
System.InvalidCastException

Unable to cast COM object of type 'System.__ComObject' to interface type 'Apx.IDC'.
This operation failed because the QueryInterface call on the COM component for the
interface with IID '{the new guid}' failed due to the following error:
No such interface supported (Exception from HRESULT: 0x80004002 (E_NOINTERFACE)). 
```

（上述错误显然通常是由混合公寓状态引起的，但交换 guid 不会导致这种情况）。所以我推断在*某处*必须有与我的更改相冲突的其他相关细节。但那可能在哪里呢？谢谢阅读...

编辑：

一个示例例外是...

```
First-chance exception at 0x000007feec748be4 (clr.dll) in Apex.exe: 0xC0000005:
Access violation reading location 0xffffffffffffffff.
The Common Language Runtime cannot stop at this exception. Common causes include:
incorrect COM interop marshalling, and memory corruption. To investigate further,
using native-only debugging.

An unhandled exception of type 'System.ExecutionEngineException' occurred in Apex.exe 
```

为了

```
[PreserveSig] [return: MarshalAs(UnmanagedType.I1)]
bool LoadDisplayList(IntPtr fileHandle, IntPtr pDisplayList,
UInt16 version, IntPtr pComparison); 
```

和

```
virtual bool __stdcall LoadDisplayList(HANDLE fileHandle, class CDisplayList * pDisplayList,
WORD version, CDisplayList * pComparison) = 0; 
```

以堆栈跟踪结尾

```
[Native to Managed Transition]  
Apex.Graphics64.dll!CDisplayList::LoadRenderRecs(void * f=0x000000000000056c, CDisplayList * pComparison=0x0000000023ad2cf0)  Line 1772 C++
Apex.Graphics64.dll!CDisplayList::Load(void * f=0x000000000000056c, unsigned short version=0x0002, CDisplayList * pComparison=0x0000000023ad2cf0)  Line 1845 + 0x26 bytes   C++
Apex.Graphics64.dll!CBaseDC::LoadDisplayList(void * f=0x000000000000056c, CDisplayList * pList=0x0000000023ad2cf0, unsigned short version=0x0002, CDisplayList * pComparison=0x0000000023ad2cf0)  Line 1896 + 0x33 bytes    C++
[Managed to Native Transition]  
Apex.exe!Apex.DDC.LoadDisplayList(System.IO.FileStream file = {System.IO.FileStream}, Apex.DisplayList displayList = {Apex.DisplayList}, ushort version = 0x0002, Apex.DisplayList comparison = null) Line 1124 + 0xaf bytes    C#
Apex.exe!Apex.DisplayList.Load(System.IO.FileStream f = {System.IO.FileStream}, ushort loadVersion = 0x0002, Apex.INode stubsRoot = {Apex.ViewPort3D}, Apex.DisplayList comparison = null) Line 166 + 0x53 bytes    C# 
```

确切的崩溃点有所不同 - 这里它实际上设法进入了 LoadDisplayList()，这比平时要好。由于崩溃表明堆损坏，我尝试将函数的签名剥离为无参数的 void 返回，将其内容减少为跟踪，并在对象创建后立即调用它 - 仍然会崩溃。如果我将相同的函数移到定义的顶部，它不会崩溃，在这种情况下，其他一些接口函数会崩溃，这让我认为它更有可能是 COM 问题而不是算法级内存损坏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T10:16:25.800

我想我已经解决了这个问题。一旦我能够稍微进入 DLL，就会弹出一个说源与可执行文件不匹配的弹出窗口，这让我调查了另一个长期存在但以前没有问题的怪癖，即 DLL 的链接器/常规/输出文件不在项目的常规/输出目录（警告 MSB8012）。清理完这个异常后，我能够成功更改 guid，因此 VS2012 使用这些设置似乎与旧版本略有不同。道德...不要让警告徘徊。

# jquery - Jquery 像 facebook 应用程序一样从左到右滑动切换

> ID：15573408
> 
> 赞同：0
> 
> 时间：2013-03-22T14:55:16.573
> 
> 标签：jquery, toggle, slide

我有下面的代码，它似乎工作正常，但在第一次选择触发器时似乎没有滑入。一旦触发它，它就会很好地滑入和滑出，但在第一次触发时它只是显示而不是滑入视图。

```
var $trigger = $(".icon-menu-2");
var $menu = $(".c_left");
$trigger.toggle(function show() {
  $menu.animate({
    width: 185,
    marginLeft: 0,
    display: 'toggle'
  }, 'slow');
}, function hide() {
  $menu.animate({
    width: 0,
    marginLeft: -185,
    display: 'toggle'
  }, 'slow');
}); 
```

如果我能以某种方式让整个页面在 facebook 应用程序工作时向右移动，那就太好了。关于如何实现这一目标的任何想法？我已经研究过使用 jPanelmenu，但是由于各种原因这不适用于我的代码，并且想知道是否有一个简单的解决方案可以添加到上述代码中。

提前谢谢了

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T15:29:21.273

```
.c_left {
    margin-left: -185px;
    width:0;
} 
```

Arun P Johny 更新了小提琴[http://jsfiddle.net/calder12/DvbDf/2/](http://jsfiddle.net/calder12/DvbDf/2/)

# php - PHP SESSION 不会由 DB 中的值设置

> ID：15573410
> 
> 赞同：0
> 
> 时间：2013-03-22T14:55:17.827
> 
> 标签：php, html, sql

问题：我已经建立了一个登录系统，它在我的本地主机上运行良好。
本地主机：在这里它工作。
FTP服务器：这里它不工作。

我已经尝试修复这个问题了 7 个小时。 `$_POST`正在获取值，如果我设置 a`$_SESSION`它也会显示值。数据库信息是正确的。

我认为问题在于连接到数据库以获取值时。我不知道我在哪里做错了，如上所述，我已经尝试了很长时间来解决这个问题。

登录文件：

```
<?php
ini_set("default_charset","iso-8859-1");
session_start();

require_once("db_config.php");
echo $_SESSION['USER_ID']." - ";

if(!empty($_POST['username']) AND !empty($_POST['password'])) {

    $username_db = $_POST['username'];
    $password_db = $_POST['password'];

    if(isset($username_db) AND isset($password_db)) {

        $link = mysql_connect(DB_HOST, DB_USER, DB_PASSWORD);
        if(!$link) {
            die('Failed to connect to server: ' . mysql_error());
        }
        $db = mysql_select_db(DB_DATABASE);
        if(!$db) {

            die("Unable to select database");
        }
        $qry="SELECT * FROM user_table WHERE email='".$username_db."' OR alias='".$username_db."' AND password='".$password_db."' ";

        $result=mysql_query($qry);

        if (!$result) {
            die('Invalid query: ' . mysql_error());
        }

        while($rows=mysql_fetch_row($result)) {

            $_SESSION['USER_ID'] = $rows['id'];
            header("Location: index.php");
        }

    }

} 

if(!empty($_SESSION['USER_ID'])) {

        $link = mysql_connect(DB_HOST, DB_USER, DB_PASSWORD);
        if(!$link) {
            die('Failed to connect to server: ' . mysql_error());
        }

        $db = mysql_select_db(DB_DATABASE);
        if(!$db) {
            die("Unable to select database");
        }

        $qry="SELECT * FROM user_table WHERE id='".$_SESSION['USER_ID']."'";

        $result=mysql_query($qry);
        if (!$result) {
            die('Invalid query: ' . mysql_error());
        }
        while($rows=mysql_fetch_array($result)) {

            header("Location: index.php");
        }
}

?> 
```

**检查是否设置了登录会话：**我认为这里有一些混乱的代码。

```
<?php
ini_set("default_charset","iso-8859-1");
session_start();

require_once("db_config.php");

    if(!empty($_SESSION['USER_ID'])) {
        $user_id = $_SESSION['USER_ID'];

        $link = mysql_connect(DB_HOST, DB_USER, DB_PASSWORD);
        if(!$link) {
            die('Failed to connect to server: ' . mysql_error());
        }

        $db = mysql_select_db(DB_DATABASE);
        if(!$db) {
            die("Unable to select database");
        }

        $qry="SELECT * FROM user_table WHERE id='".$user_id."'";

        $result=mysql_query($qry);
        if (!$result) {
            header("Location: login.php");
            die('Invalid query: ' . mysql_error());
        }
        while($rows=mysql_fetch_array($result)) {

            $_SESSION['ALIAS'] = $rows['alias'];
            $_SESSION['FIRST_NAME'] = $rows['first_name'];
            $_SESSION['LAST_NAME'] = $rows['last_name'];
            $_SESSION['EMAIL'] = $rows['email'];
            $_SESSION['USER_LEVEL'] = $rows['user_level'];
        }   

    } else { header("Location: login.php"); }

?> 
```

# sql-server - 将列设置为 NULL 时更新缓慢

> ID：15573411
> 
> 赞同：-1
> 
> 时间：2013-03-22T14:55:18.343
> 
> 标签：sql-server, sql-server-2008

我有一个包含 80,000 行的 SQL Server 2008 表，并且正在执行以下查询：

```
UPDATE dbo.TableName WITH (ROWLOCK)
SET HelloWorldID = NULL
WHERE HelloWorldID = @helloWorldID 
```

`HelloWorldID`是一个`int`，`@helloWorldID`参数也是`int`。

查询花费的时间太长，我想对其进行优化。我在上面创建了一个非聚集索引，`HelloWorldID`但这没关系。我可能不得不重新设计这个......也许把它`HelloWorldID`放在另一个桌子上，把它链接到`TableName`桌子上？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T15:17:03.263

由于您正在等待的命令是`DELETE`我不得不猜测有一个触发器，`dbo.TableName`并且它正在执行您不期望的额外工作。或者可能是一些`CASCADE`影响其他有触发器的表的选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T15:04:40.850

这完全取决于此查询将更新多少行。如果您要更新很多行，例如表的 30%，那么索引实际上会减慢查询速度（因为索引将与表一起更新，并且它无助于过滤行以进行更新） . ROWLOCK 也会减慢它的速度，因为引擎将为每一行发出单独的锁（与正常发生的页面锁相反）。尝试删除索引并运行此更新`WITH(TABLOCK)`，以查看会发生什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T16:02:29.027

我有时会遇到这个问题。您的查询取决于同时获得表中满足 WHERE-Clause 条件的每一行的写锁。根据您对完整“ACID”的需求，您可以执行以下操作：

```
SELECT getdate()  -- force @@rowcount=1
while @@rowcount > 0
UPDATE TOP (1000) dbo.TableName 
SET HelloWorldID = NULL
WHERE HelloWorldID = @helloWorldID 
```

这将更新较小的块，并有助于克服锁定问题。但请记住，this-method 放弃了将 this-query 作为单个事务执行。您需要将 1000 调整为适合您的服务器的值。

# css - 使用范围内的变量全局更新 CSS 样式

> ID：15573413
> 
> 赞同：11
> 
> 时间：2013-03-22T14:55:30.680
> 
> 标签：css, angularjs, angularjs-scope

我目前正在构建一个可以选择更改主题的应用程序。在这种情况下，主题仅由更改应用程序中几个关键元素的颜色组成。

所以目前，在所有需要主题颜色的元素上，我都给了它们 css 类`has-main-color`。

在控制器中，我从 Web 服务中获取他们想要的颜色，并将其设置为`$scope.mainColor = color;`.

所有这些都可以正常工作，但我遇到的问题是我找不到将这种颜色应用于`has-main-color`类的合适方法。

目前，我正在尝试以下操作：

```
<style>
    .has-main-color {
        color: {{mainColor}}
    }
</style> 
```

正如您可能猜到的那样，这不太好用。

那么使用 AngularJS 解决这个问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-22T15:40:35.747

查看[ngStyle](http://docs.angularjs.org/api/ng.directive%3angStyle)的文档页面。它几乎完全符合您的要求。

```
<input type="button" value="set" ng-click="myStyle={color:'red'}">
<input type="button" value="clear" ng-click="myStyle={}">
<br/>
<span ng-style="myStyle">Sample Text</span>
<pre>myStyle={{myStyle}}</pre> 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-22T15:23:00.187

我不认为你可以使用 a`class`来做到这一点，但是试试这个

```
<div ng-app="test-app" ng-controller="MyController" theme-wrapper="{{mainColor}}">
    <div class="has-main-color">Top1</div>
    <div>Child 1</div>
    <div class="has-main-color">Top1</div>
    <div>Child 1</div>
    <div class="has-main-color">Top1</div>
    <div>Child 1</div>
    <br />
    <input type="button" value="Red" ng-click="color('red')" />
    <input type="button" value="Green" ng-click="color('green')" />
    <input type="button" value="Blue" ng-click="color('blue')" />
</div> 
```

JS

```
var app = angular.module('test-app', []);

app.controller('MyController', function($scope, $rootScope, $timeout){
    $scope.mainColor = 'grey';
    $scope.color = function(color) {
        $scope.mainColor = color;
    }
});

app.directive('themeWrapper', function(){
    var counter = 0, regex = /^theme-wrapper-\d+$/;
    return {
        restrict: 'A',
        link: function(scope, elm, attrs){
            attrs.$observe('themeWrapper', function(value){
                var className = 'theme-wrapper-' + (counter++);
                $('<style>.' + className + ' .has-main-color{color: ' + value + ';}</style>').appendTo('head');

                var classes = elm.attr('class').split(' ');
                angular.forEach(classes, function(v, i){
                    if(regex.test(v)) {
                        elm.removeClass(v);
                    }
                });

                elm.addClass(className);
            });
        }
    }
}); 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/cbZK5/2/)

另一个简单的修复

```
<div ng-app="test-app" ng-controller="MyController">
    <div style="color: {{mainColor}}">Top1</div>
    <div>Child 1</div>
    <div style="color: {{mainColor}}">Top1</div>
    <div>Child 1</div>
    <div style="color: {{mainColor}}">Top1</div>
    <div>Child 1</div>
    <br />
    <input type="button" value="Red" ng-click="color('red')" />
    <input type="button" value="Green" ng-click="color('green')" />
    <input type="button" value="Blue" ng-click="color('blue')" />
</div> 
```

JS

```
var app = angular.module('test-app', []);

app.controller('MyController', function($scope, $rootScope, $timeout){
    $scope.mainColor = 'grey';
    $scope.color = function(color) {
        $scope.mainColor = color;
    }
}) 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/cbZK5/)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-02-22T07:20:52.477

如果有人想使用你原来的方法，我今天遇到了同样的问题，并把一个（很小的！）样式指令放在一起，它允许内联样式表中的角度表达式。

[https://github.com/deanmcpherson/angular-inline-style](https://github.com/deanmcpherson/angular-inline-style)

允许

```
body { background-color: {{bgColor}}; } 
```

将 bg 颜色附加到适当的范围。

# json - Json 编码 HTML 字符串

> ID：15573415
> 
> 赞同：6
> 
> 时间：2013-03-22T14:55:31.613
> 
> 标签：json, powershell, powershell-3.0

我目前正在从 PowerShell 脚本生成 JSON 文件，但它输出的是 Unicode 而不是特殊字符，例如“<”我需要 LinkText 中的 HTML，但不确定如何更改编码。

这是我得到的输出：

```
[
    {
        "Id":  "187303",
        "LinkText":  "\u003cb style =color:#d11717;\u0027\u003eAnnual General Meeting (MEET)"
    },
    {
        "Id":  "187305",
        "LinkText":  "\u003cb style =color:#d11717;\u0027\u003eAnnual General Meeting (MEET)"
    }
] 
```

这是我正在使用的代码：

```
$(foreach ($row in $DataSet.Tables[0].Rows){  
    $stockShortName = $row[0].ToString().Trim()
    $id = $row[0].ToString().Trim()
    $linkText = "<b style =color:`#d11717;'>$event_description" 

    (New-Object PSObject |
     Add-Member -PassThru NoteProperty Id $id |
     Add-Member -PassThru NoteProperty LinkText $linkText 
    )
}) | ConvertTo-JSON | Out-File $OutputFile -Encoding "default" 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-23T12:16:42.613

我没有看到防止发生这种转换的内置参数。这是一个转换回 unicode 字符的解决方法：

```
[regex]::replace($json,'\\u[a-fA-F0-9]{4}',{[char]::ConvertFromUtf32(($args[0].Value -replace '\\u','0x'))}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T19:53:26.313

Out-File 在这里不是罪魁祸首，它准确地写入了 ConverTo-Json 产生的内容。但是，如果您将输出通过管道传输到 ConvertFrom-Json，它就可以正常工作。你确定这是个问题？

# android - 其他活动中的复选框值

> ID：15573417
> 
> 赞同：0
> 
> 时间：2013-03-22T14:55:33.417
> 
> 标签：android

嗨，我正在寻找几天的每个人我试图搜索的一个问题的解决方案，但我没有找到我的问题的答案所以我决定问你也许有人会这么好，并且会向我解释何可以解决我的问题。

所以我有两个活动，一个配置一个和一个主要活动，我的问题是，当我在配置活动中选中一个复选框时（我成功保存了复选框状态，所以当我检查它时，即使我离开配置活动也会被选中)，但我不知道如何在主要活动中使用 checkbx 状态。我找到了很多建议，但对我来说没有任何效果。先感谢您。

谢谢大家的回答，但我没有以这种方式成功解决我的问题，根据你的建议，我做了以下事情：在第二个活动中（我有复选框）：我有一个保存功能，我用 SharedPreferences 保存Checkbox 状态（即使我关闭了活动或​​其他任何 Checkbox 的状态，它也保持他的状态）并且我已经创建了一个 Load 函数，当我加载回活动时它正在加载以前的状态，所以在这个活动中我觉得没问题，但是在这种情况下怎么能使用加载函数的值（实际上是复选框的值） int MainActivity。很抱歉给您带来不便，但我知道，但我想学习。

再次感谢各位。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T14:58:54.513

将值存储在`SharedPreference`以获取复选框的值

```
chkIos.setOnClickListener(new OnClickListener() {
    @Override
    public void onClick(View v) {
        if (((CheckBox) v).isChecked()) {
            SharedPreferences sharedPreferences = context.getSharedPreferences("settings", Context.MODE_PRIVATE);
            Editor editor = sharedPreferences.edit();
            editor.putString("checkboxState",((CheckBox) v).isChecked());
            editor.commit();
            //Save the state of checkbox in sharedPreference
        }
    }
}); 
```

在主要活动中得到这样的状态。

```
SharedPreferences sharedPreferences = context.getSharedPreferences("settings", Context.MODE_PRIVATE);
String stateValue = sharedPreferences.getString("checkboxState); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T15:04:11.413

您可以使用[SharedPreferences](http://developer.android.com/reference/android/content/SharedPreferences.html "共享")将您的状态保存`CheckBox`在设备中，以便您可以从另一个`Activity`.

[这](https://stackoverflow.com/questions/3624280/how-to-use-sharedpreferences-in-android-to-store-fetch-and-edit-values "这里")是一个如何使用它们的示例。您还可以查看这个 YouTube 视频，该视频向您展示如何为您的`Activities`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T15:01:15.220

我想sharepreferences会解决这个问题

```
SharedPreferences.Editor editor = app_preferences.edit();
editor.putBoolean("Checkbox", value);
editor.commit();

SharedPreferences app_preferences = 
    PreferenceManager.getDefaultSharedPreferences(this);
boolean value = app_preferences.getBoolean("Checkbox", false); 
```

# mysql - MySQL/RDBMS：索引长字符串可以吗？它会完成这项工作吗？

> ID：15573418
> 
> 赞同：0
> 
> 时间：2013-03-22T14:55:33.560
> 
> 标签：mysql, database, performance, search, indexing

假设我有一张电影表：

```
+------------+---------------------+------+-----+---------+----------------+
| Field      | Type                | Null | Key | Default | Extra          |
+------------+---------------------+------+-----+---------+----------------+
| id         | bigint(20) unsigned | NO   | PRI | NULL    | auto_increment |
| title      | tinytext            | YES  |     | NULL    |                |
| synopsis   | synopsis            | YES  |     | NULL    |                |
| year       | int(4)              | YES  |     | NULL    |                |
| ISBN       | varchar(13)         | YES  |     | NULL    |                |
| category   | tinytext            | YES  |     | NULL    |                |
| author     | tinytext            | YES  |     | NULL    |                |
| theme      | tinytext            | YES  |     | NULL    |                |
| edition    | int(2)              | YES  |     | NULL    |                |
| search     | text                | YES  |     | NULL    |                |
+------------+---------------------+------+-----+---------+----------------+ 
```

在此示例中，我使用`search`column 作为表格的摘要。因此，可能的记录如下：

```
+------------+-------------------------------------------------------------+
| Field      | Value                                                       |
+------------+-------------------------------------------------------------+
| id         | 1                                                           |
| title      | Awesome Book                                                |
| synopsis   | This is a cool book with a cool history                     |
| year       | 2013                                                        |
| ISBN       | 1234567890123                                               |
| category   | Horror                                                      |
| author     | John Doe                                                    |
| theme      | Programmer goes insane                                      |
| edition    | 2nd                                                         |                        
| search     | 2013 horror john doe awesome book this is a cool book (...) |
+------------+---------------------+------+-----+---------+----------------+ 
```

此列`search`将是搜索时扫描的列。请注意，它包含其他字段的所有单词（小写），可能还有一些额外的单词来帮助搜索。

我有两个问题：

**1）**知道该列是一个文本字段并且可以变得非常大，是否可以对其进行索引？它会按预期提高性能吗？为什么？

**2）**尽管有索引，但使用这种方法进行搜索是个好主意，还是最好尝试查询查询中的每一列？我该如何改进它？

**OBS：**我真的没有这张表，只是为了举例。请忽略我可能所做的数据类型或语法中的任何错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T15:12:06.387

> 1）知道该列是一个文本字段并且可以变得非常大，是否可以对其进行索引？它会按预期提高性能吗？为什么？

是的，您可以索引它，但不，它不会提高性能。仅当查询与列的开头匹配时，字符串类型列上的索引才有帮助 - 因此在您的情况下，搜索“2013 Horror john”的人会点击索引，但搜索“horror john 2013”​​的人不会。

> 2）尽管有索引，但使用这种方法进行搜索是个好主意，还是最好尝试查询查询中的每一列？我该如何改进它？

正如 Gordon Linoff 所写，最好的解决方案可能是[全文搜索](http://dev.mysql.com/doc/refman/5.0/en/fulltext-search.html)——这对于文本搜索来说非常快，处理“模糊”匹配，并且通常允许您编写类似于 google 工作方式的搜索功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T14:59:38.827

索引`search`列没有帮助。

您可能想要的是该列上的全文搜索功能，您可以在[此处](http://dev.mysql.com/doc/refman/5.0/en/fulltext-search.html)阅读。

您用于搜索的内容取决于搜索是否将使用上下文。如果有人搜索“Clinton”，您是否希望他们将搜索限制在名为“Clinton”的作者或关于“Clinton”的书籍？如果您不关心上下文，那么一个字段上的全文是相当合理的。

我需要补充一点：您无需将所有搜索词放在单独的字段中即可使用全文搜索。您可以在多个列上创建全文索引。这使您可以灵活地使用带有上下文的全文搜索（通过仅查看特定列）或不使用上下文（通过查看所有列）。您的问题是关于`search`专栏的，但这不是实现您正在寻找的功能的最佳方式。

# php - $_SERVER['PHP_SELF'] 的替代方案是什么？

> ID：15573420
> 
> 赞同：0
> 
> 时间：2013-03-22T14:55:36.233
> 
> 标签：php, superglobals

我现在的地址是：`http://localhost/bookstore/bookedit.php?book_id=12`

`$_SERVER['PHP_SELF']`变量是一个`'/bookstore/bookedit.php'`字符串，

但我想得到字符串`'bookedit.php?book_id=12'`，

我们有任何函数或变量可以做到这一点吗？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T14:56:18.170

如果您这样做，`var_dump($_SERVER)`您将看到您可以使用的所有服务器变量

```
$_SERVER['PHP_SELF'] . '?' . $_SERVER['QUERY_STRING']; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T15:00:27.403

您可以使用请求 URI 变量。

`$_SERVER['REQUEST_URI']`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T15:29:16.943

```
$data = basename($_SERVER['PHP_SELF']);
$data .= $_SERVER['QUERY_STRING'] ? '?' . $_SERVER['QUERY_STRING'] : ''; 
```

# templates - Cocos3D 模板无法编译

> ID：15573421
> 
> 赞同：1
> 
> 时间：2013-03-22T14:55:47.843
> 
> 标签：templates, cocos3d

只是你知道，我刚刚开始使用 iOs 和 Objective-C（3 天）。

我目前正在制作一个 3D 对象查看器。我希望能够加载文件并将其显示到视图中。然后用户可以旋转和缩放它。

我首先使用 NinevehGL 构建它，但它似乎不太支持大文件（>10M）。我现在正在尝试使用 Cocos3D。

在我安装完所有东西后，我使用 cocos3D 2.0 模板创建了一个 xcode 项目。这个模板应该显示（我猜）一个 3D 文本“hello world”。但它甚至没有编译向我抛出以下内容： `-(void) updateBounds: (CGRect) bounds withDeviceOrientation: (ccDeviceOrientation) deviceOrientation;`<---- 预期为一种类型

似乎`(ccDeviceOrientation)`不被识别为一种类型。你能帮我解决这个问题吗？

我在 gitHub 上的 COCOS3D[文件](https://github.com/Micka33/3D-Viewer "GitHub项目")夹下有项目

另外我正在使用以下版本的 cocos

```
 cocos2D: 2.0.0 8-Jul-2012
   cocos3D: cocos3d 0.7.0 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T13:07:31.140

同时，我在cocos2D论坛上发了我的问题，Bill Hollings 很客气的快速回复，并指出我使用的 cocos2D 和 cocos3D 的版本不能一起使用。

[这](http://www.cocos2d-iphone.org/forum/topic/280732#post-439515)是解释和该怎么做。

# eclipse - 在 Eclipse 中全局禁用 Maven 工作区解析

> ID：15573422
> 
> 赞同：4
> 
> 时间：2013-03-22T14:55:48.837
> 
> 标签：eclipse, maven, spring-tool-suite

我目前正在 Mac 上的 Spring Tool Suite 中处理多个大型 webapps（每个 webapp 在运行时实际上包含 3-7 个 eclipse 项目）。在导入和项目验证完成后，每个导入的 webapp 都会出现几个错误。maven 构建将不断失败，直到我右键单击与给定 webapp 关联的每个项目并选择 Maven -> Disable Workspace Resolution。我可以认为运行 maven clean、maven update 和 maven build 以清除所有错误。

如果有办法在我的 Eclipse 设置/首选项中禁用 Maven Workspace Revolution，以便它是一个全局的一次性设置，告诉 Eclipse 工作区中的每个项目不要使用 Workspace Resolution？

以下是我拍摄的一些屏幕截图，希望能提供所有相关细节，例如版本号。

![在此处输入图像描述](../Images/1a7452d7e2cf7fa5e32956a0c3f0b946.png)

![在此处输入图像描述](../Images/e5de06204882813c3ff6b85a62c43cee.png)

我最近刚刚从使用带有附加组件的 eclipse 切换到使用预配置的 Spring Tool Suite，所以安装只有几周的时间。它应该是大多数插件的最新版本。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-07-23T09:09:14.717

`resolveWorkspaceProjects=true`通过对 name 的文件执行搜索 (Ctrl-H) 可以更快地实现它`org.eclipse.m2e.core.prefs`，范围设置为 Workspace，Replace 设置为`resolveWorkspaceProjects=false`.

我不相信有一个全局设置可以自动执行此操作。

# gwt - GWT 实现类似桌面图标的东西

> ID：15573426
> 
> 赞同：-1
> 
> 时间：2013-03-22T14:55:58.877
> 
> 标签：gwt, icons, panel

我有一个由图像和标签组成的 VerticalPanel，其中包含一些文本。我要实现的是类似于桌面图标的东西-当您单击它时-它会被“标记”，并且可能会出现一个菜单。当您单击图标外部时 - 菜单应该消失并且图标将被取消标记。

目前我正试图通过将 VerticalPanel 包装在 FocusPanel 中并进行一些焦点处理来实现这一点，但到目前为止我还没有取得任何令人满意的结果。

如果您能给我一些关于如何最好地实现这一点的指导，我将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T15:37:21.067

看来您需要一个[ToggleButton](http://gwt.googleusercontent.com/samples/Showcase/Showcase.html#!CwCustomButton)和一个基本的[PopupPanel](http://gwt.googleusercontent.com/samples/Showcase/Showcase.html#!CwBasicPopup)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T15:36:09.460

[使用FocusPanel](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/user/client/ui/FocusPanel.html)包装器，您走在了正确的轨道上。关于您想要做的 FocusPanel 的关键点是它捕获点击（通过实现[HasClickHandlers](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/event/dom/client/HasClickHandlers.html)）。然后，您可以根据您希望将图标指示为按下/选中的方式处理点击并分配面板 CSS 规则，例如`border-width`、`border-color`或等。`background-color`

# javascript - 无用时隐藏css3多行省略号阅读更多链接

> ID：15573431
> 
> 赞同：4
> 
> 时间：2013-03-22T14:56:03.450
> 
> 标签：javascript, css, less, multiline, ellipsis

我有一个小问题。我想出了一种使用跨浏览器多行省略号的方法。这是我的less css mixin。如您所见，此版本在 webkit 中完美运行，并且在所有其他浏览器中“ok”。

```
.ellipsis-multi(@lh, @l, @mw) {
  /* non-webkit */
  max-height: @lh*@l;
  /* webkit */
  -webkit-box-orient: vertical;
  -webkit-line-clamp: @l;
  display: -webkit-box;
  line-height: @lh;
  max-width: @mw;
  overflow: hidden;
  text-overflow: ellipsis;
}
.excerpt {      
  &.hide {
    .ellipsis-multi(1.4em, 3, 100%)
  }
} 
```

我的问题是，我使用阅读更多链接来添加和删除“隐藏”类。这很完美，但如果摘录 div 只有 2 行文本，链接也是可见的。如果需要省略号，我需要一种方法来显示链接。

这是一个 codepen 示例 [http://codepen.io/janwagner/pen/ubHef](http://codepen.io/janwagner/pen/ubHef)

我更喜欢仅使用 css 的方法来解决此问题:)

多谢！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T16:27:38.050

仅使用 CSS 是无法做到这一点的。但是，您可以使用以下函数来计算您拥有的行数：

```
var divHeight = $('.excerpt p').height();
var x = ('.excerpt p').css('line-height');
lineHeight = parseInt(x); // Returns clean line-height
var lines = divHeight / lineHeight; // Returns number of lines 
```

然后简单地使用 if 语句来显示或隐藏阅读更多按钮，具体取决于段落的行数。像这样的东西：

```
if(lines > 4){
$('.readmore').show;
}else{
$('.readmore').hide;
} 
```

# c# - AutoMapper 2.2.1 DynamicMap 不映射底层类型属性（2.2.0 有）

> ID：15573434
> 
> 赞同：1
> 
> 时间：2013-03-22T14:56:14.000
> 
> 标签：c#, automapper

我最近从 AutoMapper 2.2.0 升级到 2.2.1 和一个通用方法我已经正确停止映射。这是该方法的伪版本：

```
public void LoadModel<TModel>(int id, TModel model) where TModel : ModelBase
{
    var entity = _repo.LoadById(id);
    _mapper.DynamicMap(entity, model);
    model.AfterMap(); // AfterMap is a virtual method in ModelBase
} 
```

`ModelBase`是由传递给此方法的父类的实例继承的抽象类。在 2.2.0 版本中，实例的相应属性`entity`已正确映射到实例的`ModelBase`属性`model`；升级到 2.2.1 版后，`ModelBase`不再映射的属性——没有抛出异常，但属性根本没有设置。

**更新：** 下面是一个演示 2.2.0 和 2.2.1 之间区别的具体示例。在 2.2.0 版本中，输出将是：

```
Male
True 
```

在 2.2.1 版本中，输出将是：

```
Male
False 
```

中的`IsEmployed`属性在`Human`2.2.1 版本中没有映射，但在 2.2.0 版本中映射。这是示例代码：

```
namespace TestAutomapper
{
    using System;

    class Program
    {
        static void Main(string[] args)
        {
            Tester tester = new Tester();
            tester.Test();
        }
    }

    public class Tester
    {
        public void Test()
        {
            var animal = (Animal)new Human();
            LoadModel(animal);
            var human = (Human)animal;
            Console.WriteLine(human.Gender);
            Console.WriteLine(human.IsEmployed.ToString());
            Console.ReadLine();
        }

        private void LoadModel<TModel>(TModel model) where TModel : Animal
        {
            var tim = new Developer { Gender = "Male", IsEmployed = true, KnownLanguages = 42 };
            AutoMapper.Mapper.DynamicMap(tim, model);
        }
    }

    public abstract class Animal
    {
        public string Gender { get; set; }
    }

    public class Human : Animal
    {
        public bool IsEmployed { get; set; }
    }

    public class Developer
    {
        public string Gender { get; set; }
        public bool IsEmployed { get; set; }
        public int KnownLanguages { get; set; }
    }
} 
```

这个问题似乎与在映射之前`Human`的装箱有关。`Animal`我并不是说这是一个错误，但它在版本之间的行为肯定是不同的。

**更新 2**：我的示例中的抽象类是红鲱鱼；`IAnimal`如果我使用名为的接口而不是名为的抽象类，则该示例成立`Animal`。该问题似乎清楚地表明 2.2.0 版在动态映射时考虑了*底层类型*，而 2.2.1 版则没有。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T07:46:07.830

2.2.0 和 2.2.1 之间发生了与动态映射相关的更改。

在 2.2.0 中，代码如下所示：

```
public void DynamicMap<TSource, TDestination>(TSource source, TDestination destination)
{
    Type modelType = typeof(TSource);
    Type destinationType = (Equals(destination, default(TDestination)) ? typeof(TDestination) : destination.GetType());

    DynamicMap(source, destination, modelType, destinationType);
} 
```

在 2.2.1 中：

```
public void DynamicMap<TSource, TDestination>(TSource source, TDestination destination)
{
    Type modelType = typeof(TSource);
    Type destinationType = typeof(TDestination);

    DynamicMap(source, destination, modelType, destinationType);
} 
```

因此，这实际上意味着在 2.2.0 中动态映射目标类型由目标值确定。如果它为 null（对于引用类型），则目标取自 TDestination；否则目标对象实例的类型决定了这一点。

在 AutoMapper 2.2.1 中， Tdestination 的类型始终优先，在您的情况下是 Animal 。

# c++ - Boost.Spirit 解析器不匹配

> ID：15573443
> 
> 赞同：2
> 
> 时间：2013-03-22T14:56:43.503
> 
> 标签：c++, boost, boost-spirit, boost-spirit-qi

我很难理解为什么以下解析器无法解析`test`。调用`qi::phrase_parse`,`result`为真后，`it2`指向字符串的末尾，但`mynr`仍为 0：

```
std::string test = "#define   SOMEMACRO 8.0";
  auto it2 = test.begin();
  auto endIt2 = test.end();
  double mynr = 0;
  bool result = 
    qi::phrase_parse(
      it2, 
      endIt2, 
      ("#define" >> (*qi::alnum) >> qi::double_[ref(mynr) = qi::_1]), 
      qi::space); 
```

我怀疑它`qi::alnum`与空间跳过有关。

我尝试将我的案例简化为单个组件。我分别验证了这三个解析器，发现：

*   “#define”确实消耗了“#define”
*   `(*qi::alnum)`能够消费`SOMEMACRO`
*   `qi::double_`能够消费`8.0`

单独地，每个解析器都可以正常工作，但是以上面的形式组合在一起却很奇怪。进一步的小测试似乎向我表明，`(*qi::alnum)`当我使用它时，它似乎消耗的不仅仅是`SOMEMACRO`，而是字符串的其余部分。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T15:10:11.847

你的更新实际上让我意识到发生了什么。你是对的，`*alnum`就是吃的比你想要的多。

```
("#define" >> lexeme[*qi::alnum] >> (qi::double_)[boost::phoenix::ref(mynr) = boost::spirit::_1]) 
```

这行得通。

`*alnum`正在吃字母数字字符，并在它们之间跳过空格。所以它真的吃了`SOMEMACRO 8`。然后，当我建议它在`8.0`最后吃时起作用时，那是因为双解析器消耗了`.0`.

顶部的新解析器要求`*alnum`中间没有空格。

以下是有关语法的新注意事项：

1.  我已经包含了存储双精度值的语义动作。它将它存储在一个名为`mynr`.
2.  我已经包裹`*alnum`在一个[`lexeme`](http://www.boost.org/doc/libs/1_53_0/libs/spirit/doc/html/spirit/qi/reference/directive/lexeme.html). 这会导致解析器在内部不跳过任何字符。
3.  有了这个正确的语法，它就能够解析`"#define SOMEMACRO 8.0"`和`"#define SOMEMACRO 8"`

# linq - linq 不同的查询？

> ID：15573446
> 
> 赞同：0
> 
> 时间：2013-03-22T14:56:57.003
> 
> 标签：linq

我需要一些关于 Linq 的帮助，我有一个 DB 表，里面有restourants 表。在数据库中，我有“TableNumber、Floor、RestaurantID”我想获取所有楼层的列表。例如，如果我有这个列表：

```
TableNumber, Floor , RestaurantID
10             1          1  
11             1          1     
12             2          1     
13             2          1     
14             3          1 
```

我只想得到“1,2,3”。

现在该方法返回所有行。

```
 public IEnumerable<ListPad.Item> GetFloorsListPads(SSF.ART.Key restaurant_id)
    {
        return from restaurant_floor in EnterpriseTouchRestaurantApplication.TouchRestaurant.AllRestaurantTables
                where restaurant_floor.RestaurantID == restaurant_id && restaurant_floor.Active == true
                orderby restaurant_floor.Floor
                select new ListPad.Item()
                {
                    Color = Color.SkyBlue,
                    Text = string.Format("{0}", restaurant_floor.Floor),
                    Tag = restaurant_floor
                };
    } 
```

感谢您提前提供的所有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T15:07:28.717

您需要一件事或两件事，具体取决于您是否以您描述的方式`ListPad.Item`定义相等（通过覆盖`Equals`and `GetHashCode`）。如果是这样，那么添加`.Distinct()`到您的查询中将为您提供不同的项目。如果没有，您可以通过以下三种方式之一进行操作。

1.  返回一个匿名类型，调用`Distinct`它，并映射到实际类型（惰性方式）
2.  实施`IEquatable`，`ListPad.Item`覆盖`Equals`和`GetHashCode`（您需要研究如何正确实施`GetHashCode`，以使其符合您的平等条件）
3.  定义一个`IEqualityComparer<ListPad.Item>`定义你的平等。

1 是懒惰的方式，但编码较少。如果您的条件定义了所有使用的相等性`ListPad.Item`（不仅仅是这个特定场景），那么 2 很方便。3 将相等性检查与实际类型分开，如果您有*其他*以不同方式定义相等性的情况，这很方便。

# android - Admob：广告元素加载到布局的“顶部”

> ID：15573452
> 
> 赞同：0
> 
> 时间：2013-03-22T14:57:09.817
> 
> 标签：android, layout, admob, overlap

![在此处输入图像描述](../Images/91c3a6214071e69bef08c19735eb704c.png)

正如您从图像中看到的那样，广告元素被加载到布局的顶部而不是其下方。

加载广告后，如何使列表自行调整大小？我希望广告位于列表下方（而不是顶部）（由于重叠，目前无法看到列表的一个元素）

这是我的布局（RelativeLayout）：

```
<!-- dynamic fragment -->
<FrameLayout
    android:id="@+id/contentFragment"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_alignParentLeft="true"
    android:layout_alignParentRight="true"
    android:layout_below="@+id/include1" >

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical" >
    </LinearLayout>
</FrameLayout>

<LinearLayout
    android:id="@+id/adLayout"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true" >

</LinearLayout> 
```

填充广告：

```
private void populateAdView() {
    AdRequest adRequest = new AdRequest();
    adRequest.addTestDevice(AdRequest.TEST_EMULATOR); // Emulator

    adView = new AdView(this, AdSize.BANNER, "a151410c0882629");

    LinearLayout ll = (LinearLayout) findViewById(R.id.adLayout);
    ll.addView(adView);

    adView.loadAd(adRequest);

    //reduce FrameLayout height
    //adView.loadAd(new AdRequest());
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T00:00:48.917

添加`android:layout_above="@+id/adLayout"`到您的 FrameLayout 以告诉它专门位于广告布局的顶部。

# javascript - 接受预填充的表单字段输入

> ID：15573454
> 
> 赞同：0
> 
> 时间：2013-03-22T14:57:12.253
> 
> 标签：javascript, jquery, input, datepicker, submit

我只是将我`date-picker`的设置为使用今天的日期自动填充它的输入字段。通常，用户必须`submit`通过密钥选择他们自己的日期和他们的选择，`enter`或者，我认为在我的情况下，任何密钥都可以做到这一点。

反正有没有自动做到这一点？由于该字段是预先填充的，我希望今天日期的结果在页面加载时自动显示，而不需要用户接受已预先填充到该字段中的日期（今天）。

如果有帮助，这是我的代码：

```
<script>
function displayResult() {
    var k;
    if (window.event) // IE8 and earlier
    {
        k = event.keyCode;
    } else if (event.which) // IE9/Firefox/Chrome/Opera/Safari
    {
        k = event.which;
    }
    if (k == 13) //13 = 'Enter' key
    {
        var dt = $("#datepicker").val();
        //alert(dt);
        if (dt != '') {
            $.ajax({
                type: "POST",
                url: "search_date.php",
                data: "dt=" + dt,
                success: function (option) {
                    $("#results").html(option).listview("refresh");
                }
            });
        } else {
            $("#results").html("");
        }
        return false;
    }
}
</script>
<script type="text/javascript">
$(function () {
    $("#datepicker").datepicker();
    $("#datepicker").datepicker("setDate", new Date());
    $('#datepicker').datepicker({
        inline: true,
        showOn: "button",
        buttonImage: "images/calendar.gif",
        showAnim: "slideDown",
        changeMonth: true,
        showOtherMonths: true,
        selectOtherMonths: true,
        onSelect: function (dateText, inst) {
            //alert($('#datepicker').datepicker( "getDate" ))
            //alert("dateText: " + dateText + ", inst: " + inst);
            var dt = dateText;

            if (dt != '') {
                $.ajax({
                    type: "POST",
                    url: "search_date.php",
                    data: "dt=" + dt,
                    success: function (option) {
                        $("#results").html(option).listview("refresh");
                    }
                });
            } else {
                $("#results").html("");
            }
            return false;
        }
    });
$('body').ready(function(){
var dt = $("#datepicker").val();
//alert(dt);
if(dt != '')
 {
  $.ajax
  ({
        type: "POST",
        url: "search_date.php",
        data: "dt="+ dt,
        success: function(option)
        {
          $("#results").html(option).listview("refresh");
        }
  });
 }
 else
 {
   $("#results").html("");
 }
return false;
});
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T15:10:23.113

```
$('body').ready(function(){
    var dt = $("#datepicker").val();
    //alert(dt);
    if(dt != '')
     {
      $.ajax
      ({
            type: "POST",
            url: "search_date.php",
            data: "dt="+ dt,
            success: function(option)
            {
              $("#results").html(option).listview("refresh");
            }
      });
     }
     else
     {
       $("#results").html("");
     }
    return false;
}); 
```

# python - 适用于 python 的 Amazon 产品 API - 我无法弄清楚的奇怪错误

> ID：15573456
> 
> 赞同：0
> 
> 时间：2013-03-22T14:57:16.690
> 
> 标签：python, api, amazon, product

情况就是这样，我试图让这个 API 为我工作，但我似乎无法弄清楚它的所有怪癖。即使我运行下面的示例（取自[https://bitbucket.org/basti/python-amazon-product-api/src/2b6b628300c4/examples/all-galileo-titles.py](https://bitbucket.org/basti/python-amazon-product-api/src/2b6b628300c4/examples/all-galileo-titles.py)），我也会遇到随机错误。现在我收到一个错误，说`__init__()`需要 4 个参数，而我只喂它两个。但是，我将所有凭据都放在了正确的位置，并且在模块中找不到`__init__()`需要额外参数的任何地方。有人有什么想法吗？

这是我正在运行的。可以在上面的链接中找到有关该程序的更多详细信息。

```
from amazonproduct.api import API
import lxml

if __name__ == '__main__':

    # Don't forget to create file ~/.amazon-product-api
    # with your credentials (see docs for details)
    api = API(locale = 'uk')

    result = api.item_search('Books', Publisher= 'RosettaBooks',
        ResponseGroup='Large')

    # extract paging information
    total_results = result.results
    total_pages = len(result)  # or result.pages

    for book in result:

        print 'page %d of %d' % (result.current, total_pages)

        #~ from lxml import etree
        #~ print etree.tostring(book, pretty_print=True)

        print book.ASIN,
        print unicode(book.ItemAttributes.Author), ':',
        print unicode(book.ItemAttributes.Title),
        if hasattr(book.ItemAttributes, 'ListPrice'):
            print unicode(book.ItemAttributes.ListPrice.FormattedPrice)
        elif hasattr(book.OfferSummary, 'LowestUsedPrice'):
            print u'(used from %s)' % book.OfferSummary.LowestUsedPrice.FormattedPrice 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T02:33:11.353

我遇到了同样的问题，我在 python-amazon-product-api 的 bitbucket 网站上发现了几年前的一个问题，它使我能够解决这个问题。请参阅[2011 年 11 月 1 日的新要求 AssociateTag -- 需要更新吗？](https://bitbucket.org/basti/python-amazon-product-api/issue/29/11-1-2011-new-requirement-associatetag)

我所做的不是使用 .amazon-product-api 文件来指定凭据，而是将它们作为 API 调用的一部分传递：

```
AWS_KEY = '……….'
SECRET_KEY = '……………'
ASSOCIATE_TAG = '…………….'
api = API(access_key_id=AWS_KEY, secret_access_key=SECRET_KEY, locale="us", associate_tag=ASSOCIATE_TAG) 
```

# soap - WSO2：基于方法参数的 SOAP 服务路由

> ID：15573460
> 
> 赞同：0
> 
> 时间：2013-03-22T14:57:25.640
> 
> 标签：soap, routing, wso2

我有一个我们一直在尝试实现的简单场景，但我们无法弄清楚如何去做。

假设我们有两个服务，名称为 WSDL（如下）。

我们想在 WSO2 中创建一个代理，它公开相同的 WSDL，但根据 IntValue 的值将调用路由到两个后端服务之一。

```
IF IntValue = 1 THEN it calls
    http://localhost/WcfServiceDual_1/Service1.svc

ELSE IF IntValue = 2 THEN it calls
    http://localhost/WcfServiceDual_2/Service1.svc 
```

之后，代理返回来自相应（调用）服务的响应。

* * *

```
<wsdl:definitions xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/" xmlns:wsx="http://schemas.xmlsoap.org/ws/2004/09/mex" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd" xmlns:wsa10="http://www.w3.org/2005/08/addressing" xmlns:wsp="http://schemas.xmlsoap.org/ws/2004/09/policy" xmlns:wsap="http://schemas.xmlsoap.org/ws/2004/08/addressing/policy" xmlns:msc="http://schemas.microsoft.com/ws/2005/12/wsdl/contract" xmlns:soap12="http://schemas.xmlsoap.org/wsdl/soap12/" xmlns:wsa="http://schemas.xmlsoap.org/ws/2004/08/addressing" xmlns:wsam="http://www.w3.org/2007/05/addressing/metadata" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:tns="http://tempuri.org/" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" xmlns:wsaw="http://www.w3.org/2006/05/addressing/wsdl" xmlns:soapenc="http://schemas.xmlsoap.org/soap/encoding/" name="Service1" targetNamespace="http://tempuri.org/">
<wsdl:types>
<xsd:schema targetNamespace="http://tempuri.org/Imports">
<xsd:import schemaLocation="http://localhost/WcfServiceDual_2/Service1.svc?xsd=xsd0" namespace="http://tempuri.org/"/>
<xsd:import schemaLocation="http://localhost/WcfServiceDual_2/Service1.svc?xsd=xsd1" namespace="http://schemas.microsoft.com/2003/10/Serialization/"/>
<xsd:import schemaLocation="http://localhost/WcfServiceDual_2/Service1.svc?xsd=xsd2" namespace="http://schemas.datacontract.org/2004/07/WcfServiceDual_2"/>
</xsd:schema>
</wsdl:types>
<wsdl:message name="IService1_GetData_InputMessage">
<wsdl:part name="parameters" element="tns:GetData"/>
</wsdl:message>
<wsdl:message name="IService1_GetData_OutputMessage">
<wsdl:part name="parameters" element="tns:GetDataResponse"/>
</wsdl:message>
<wsdl:message name="IService1_GetDataUsingDataContract_InputMessage">
<wsdl:part name="parameters" element="tns:GetDataUsingDataContract"/>
</wsdl:message>
<wsdl:message name="IService1_GetDataUsingDataContract_OutputMessage">
<wsdl:part name="parameters" element="tns:GetDataUsingDataContractResponse"/>
</wsdl:message>
<wsdl:portType name="IService1">
<wsdl:operation name="GetData">
<wsdl:input wsaw:Action="http://tempuri.org/IService1/GetData" message="tns:IService1_GetData_InputMessage"/>
<wsdl:output wsaw:Action="http://tempuri.org/IService1/GetDataResponse" message="tns:IService1_GetData_OutputMessage"/>
</wsdl:operation>
<wsdl:operation name="GetDataUsingDataContract">
<wsdl:input wsaw:Action="http://tempuri.org/IService1/GetDataUsingDataContract" message="tns:IService1_GetDataUsingDataContract_InputMessage"/>
<wsdl:output wsaw:Action="http://tempuri.org/IService1/GetDataUsingDataContractResponse" message="tns:IService1_GetDataUsingDataContract_OutputMessage"/>
</wsdl:operation>
</wsdl:portType>
<wsdl:binding name="BasicHttpBinding_IService1" type="tns:IService1">
<soap:binding transport="http://schemas.xmlsoap.org/soap/http"/>
<wsdl:operation name="GetData">
<soap:operation soapAction="http://tempuri.org/IService1/GetData" style="document"/>
<wsdl:input>
<soap:body use="literal"/>
</wsdl:input>
<wsdl:output>
<soap:body use="literal"/>
</wsdl:output>
</wsdl:operation>
<wsdl:operation name="GetDataUsingDataContract">
<soap:operation soapAction="http://tempuri.org/IService1/GetDataUsingDataContract" style="document"/>
<wsdl:input>
<soap:body use="literal"/>
</wsdl:input>
<wsdl:output>
<soap:body use="literal"/>
</wsdl:output>
</wsdl:operation>
</wsdl:binding>
<wsdl:service name="Service1">
<wsdl:port name="BasicHttpBinding_IService1" binding="tns:BasicHttpBinding_IService1">
<soap:address location="http://localhost/WcfServiceDual_2/Service1.svc"/>
</wsdl:port>
</wsdl:service>
</wsdl:definitions> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T16:30:36.027

为什么要托管同一服务的两个实例？

无论如何，您计划在代理中拥有的逻辑非常简单。从传入请求中提取您要评估的参数，并根据该请求将请求路由到不同的端点。您可以为此使用[过滤器介体。](http://docs.wso2.org/wiki/display/ESB460/Filter+Mediator)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T16:27:55.287

我找到了解决方案：

```
<proxy xmlns="http://ws.apache.org/ns/synapse" name="DualTest" transports="http" statistics="disable" trace="disable" startOnLoad="true">
   <target>
      <inSequence>
         <log level="custom" separator=",">
            <property name="MessageFlow" value="______"/>
         </log>
         <property xmlns:xs="http://schemas.datacontract.org/2004/07/WcfServiceDual_1" xmlns:p="http://tempuri.org/" name="intValue" expression="//p:GetDataUsingDataContract/p:composite/xs:IntValue/text()" scope="default" type="STRING"/>
         <property xmlns:xs="http://schemas.datacontract.org/2004/07/WcfServiceDual_1" xmlns:p="http://tempuri.org/" name="stringValue" expression="//p:GetDataUsingDataContract/p:composite/xs:StringValue/text()" scope="default" type="STRING"/>
         <log level="custom">
            <property name="intValue" expression="$ctx:intValue"/>
            <property name="stringValue" expression="$ctx:stringValue"/>
         </log>
         <log level="custom" separator=",">
            <property name="MessageFlow" value="______"/>
            <property name="MessageFlow" value="\n======================= Sending Request To : Backend ======================="/>
         </log>
         <log level="full" separator=","/>
         <filter source="get-property('intValue')" regex="2">
            <then>
               <log level="custom" separator=",">
                  <property name="IF" value="*****    2"/>
               </log>
               <send>
                  <endpoint>
                     <address uri="http://Win8/WcfServiceDual_2/Service1.svc"/>
                  </endpoint>
               </send>
            </then>
            <else>
               <log level="custom" separator=",">
                  <property name="ELSE" value="*****    1"/>
               </log>
               <send>
                  <endpoint>
                     <address uri="http://Win8/WcfServiceDual_1/Service1.svc"/>
                  </endpoint>
               </send>
            </else>
         </filter>
         <log level="custom" separator=",">
            <property name="MessageFlow" value="______"/>
         </log>
      </inSequence>
   </target>
   <publishWSDL uri="http://localhost/WcfServiceDual_1/Service1.svc?wsdl"/>
   <description></description>
</proxy> 
```

# r - 将数据拆分或子集为 30 分钟间隔

> ID：15573468
> 
> 赞同：4
> 
> 时间：2013-03-22T14:57:51.380
> 
> 标签：r, time, split, subset

我有以下形式的数据框：

```
Temp    Depth      Light   x   time date                   time.at.depth
104     18.59      -2.7    27 21:38 2012-06-20             4
109     18.59      -2.7    27 22:02 2012-06-20             5
110     18.75      -4.0    27 22:07 2012-06-20             5
113     18.91      -2.7    27 22:21 2012-06-20             4
114     18.91      -4.0    27 22:26 2012-06-20             5
115     18.91      -2.7    27 22:31 2012-06-20             5
117     18.91      -2.7    27 22:40 2012-06-20             4
118     18.75      -4.0    27 22:45 2012-06-20             5
119     18.75      -2.7    27 22:50 2012-06-20             5
121     18.59      -4.0    27 22:59 2012-06-20             4
122     18.75      -2.7    27 23:04 2012-06-20             5
123     18.75      -4.0    27 23:09 2012-06-20             5
126     18.59      -2.7    27 23:23 2012-06-20             5
127     18.59      -2.7    27 23:28 2012-06-20             5
128     18.59      -4.0    27 23:33 2012-06-20             5
133     18.75      -4.0    27 23:57 2012-06-20             5
136     18.59      -4.0    27 00:11 2012-06-20             5
138     18.59      -2.7    27 00:21 2012-06-20             5
140     18.91      -2.7    27 00:30 2012-06-20             5 
```

我想将数据子集到 30 分钟的 bin 中。是否有捷径可寻？我查看了该`split()`函数，但似乎需要采用数字格式才能使其正常工作，我有时间进行`POSIXct`格式化。任何想法将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-25T07:33:48.523

这是适合您的单行代码（`dat`作为您的数据框）：

```
split(dat, cut(strptime(paste(dat$date, dat$time), format="%F %R"),"30 mins")) 
```

确实`cut.POSIXt`接受作为中断值

> 间隔规范，“sec”、“min”、“hour”、“day”、“DSTday”、“week”、“month”、“Quarter”或“year”之一，可选地以整数和空格开头，或后跟“s”。

另外，我使用了: see查看所有可能的格式`%F %R`的快捷方式。`%Y-%m-%d %H:%M``?strptime`

# mysql - MS Word 字符：数据库导出然后重新导入原因？分数

> ID：15573469
> 
> 赞同：0
> 
> 时间：2013-03-22T14:57:55.910
> 
> 标签：mysql, database, character-encoding

我知道这个问题以前曾以多种形式提出过，但我找不到我的具体问题的答案。

**情景**

数据库 Mysql，西欧 - 拉丁语 1

使用 sequel pro 导出到 sql 文件

重新导入完全相同的文件，引号、撇号、破折号、破折号、TM、Reg 字符变成问号。

我通过在 vim 中打开 sql 文件并替换 <94>、<95> 等来修复这些问题。十六进制代码及其正确对应项。

参考：:%s/<93>/\'/g

[资源](http://aditya.sublucid.com/2008/01/18/replacing-those-pesky-smart-quotes-in-vim/)

**我的问题**

我怎样才能防止这种情况在未来发生？我的猜测是这些字符是从网站管理部分的**word doc**中粘贴的，但我不明白为什么它会错误地重新导入。现在，我已经替换了所有字符，一切都接近正常了。我应该将表格转换为 utf8 吗？我在数据库中有几个网站的翻译。

**笔记**

我之前已经多次导出这个数据库，从来没有遇到过这个问题。我已将其导出到临时服务器（与实时服务器相同的服务器，只是不同的主机）和本地服务器。关于为什么会突然发生这种情况的任何想法？

我研究了很多问题，例如双字符编码和错误的编码格式，但我认为这种情况有所不同。我也尝试了其中几个解决方案，但它们都不起作用。

**类似问题**

[特殊字符在 MySQL 导出/导入中丢失](https://stackoverflow.com/questions/11185324/special-characters-get-lost-in-mysql-export-import)

# c# - 将 C# DLL 导出到 python（如 swig）

> ID：15573478
> 
> 赞同：4
> 
> 时间：2013-03-22T14:58:34.153
> 
> 标签：c#, python, dll, wrapper, swig

我知道`swig`要为 a 导出一个包装器`C/C++`to `python`。有没有这样的工具来导出`C#`DLL 的包装器？

# powershell - Powershell脚本错误

> ID：15573481
> 
> 赞同：0
> 
> 时间：2013-03-22T14:58:40.763
> 
> 标签：powershell

我正在尝试找出网络上的 Windows 防火墙是否已启用/禁用，以扫描网络并让我知道防火墙服务是否已启用/禁用。

这是我正在使用的脚本，请记住我是入门级的：

```
function Get-FWState
{
    param
    (
        [int]$state
    )

    switch ($state)
    {
        0 { return "Off" }
        1 { return "On" }
    }
}

if (-not (Get-Module ActiveDirectory))
{
    Import-Module ActiveDirectory
}

$computers = Get-ADComputer -Filter *

ForEach ($computer in $computers)
{
    try 
    {
        $everythingOK = $True

        $reg = [Microsoft.Win32.RegistryKey]::OpenRemoteBaseKey('LocalMachine', $computer.Name)

        $domkey = $reg.OpenSubkey("SYSTEM\\CurrentControlSet\\Services\\SharedAccess\\Parameters\\FirewallPolicy\\DomainProfile")
        $domvalue = $domkey.GetValue("EnableFirewall")

    } 
    catch 
    {
        $everythingOK = $false
        $_
    }

    if ($everythingOK)
    {
        $stdkey = $reg.OpenSubkey("SYSTEM\\CurrentControlSet\\Services\\SharedAccess\\Parameters\\FirewallPolicy\\StandardProfile")
        $stdvalue = $stdkey.GetValue("EnableFirewall")

        $pubkey = $reg.OpenSubkey("SYSTEM\\CurrentControlSet\\Services\\SharedAccess\\Parameters\\FirewallPolicy\\PublicProfile")
        $pubvalue = $pubkey.GetValue("EnableFirewall")
    }

    $obj = New-Object -TypeName PSObject
    $obj | Add-Member -MemberType NoteProperty -Name 'HostName' -Value $computer.Name
    $obj | Add-Member -MemberType NoteProperty -Name 'DomainProfile' -Value $(Get-FWState -state $domvalue)
    $obj | Add-Member -MemberType NoteProperty -Name 'StandardProfile' -Value $(Get-FWState -state $stdvalue)
    $obj | Add-Member -MemberType NoteProperty -Name 'PublicProfile' -Value $(Get-FWState -state $pubvalue)

    Write-Output $obj
} 
```

当我运行此脚本时，我收到以下错误消息。

```
You cannot call a method on a null-valued expression.
At C:\Scripts\Firewall.ps1:46 char:37
+         $pubvalue = $pubkey.GetValue <<<< ("EnableFirewall")
    + CategoryInfo          : InvalidOperation: (GetValue:String) [], RuntimeException
    + FullyQualifiedErrorId : InvokeMethodOnNull

You cannot call a method on a null-valued expression.
At C:\Scripts\Firewall.ps1:46 char:37
+         $pubvalue = $pubkey.GetValue <<<< ("EnableFirewall")
    + CategoryInfo          : InvalidOperation: (GetValue:String) [], RuntimeException
    + FullyQualifiedErrorId : InvokeMethodOnNull 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T15:26:25.683

它说问题是在空表达式上调用该方法。你确定 "$pubkey" 不为空，因此，

```
$pubkey = $reg.OpenSubkey("SYSTEM\\CurrentControlSet\\Services\\SharedAccess\\Parameters\\FirewallPolicy\\PublicProfile") 
```

在第 45 行返回一个值？

# python - 访问不同类型的numpy数组中的列？

> ID：15573482
> 
> 赞同：2
> 
> 时间：2013-03-22T14:58:49.510
> 
> 标签：python, numpy

假设我有以下数组：

```
a = array([(1L, 2.0, 'buckle_my_shoe'), (3L, 4.0, 'margery_door')], 
dtype=[('f0', '<i8'), ('f1', '<f8'), ('f2', 'S14')]) 
```

如何访问列？

我可以使用以下语法访问一行：

```
a[0][:] 
```

但是当我尝试以相同的方式访问列时出现错误。

```
a[:][0] 
```

笔记。这不是“[如何访问 NumPy 多维数组的第 i 列？](https://stackoverflow.com/questions/4455076/numpy-access-an-array-by-column) ”的欺骗，因为我使用的是不同类型的数组。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T15:01:54.863

```
In [33]: a['f0']
Out[33]: array([1, 3], dtype=int64)

In [34]: a['f1']
Out[34]: array([ 2.,  4.])

In [35]: a['f2']
Out[35]: 
array(['buckle_my_shoe', 'margery_door'], 
      dtype='|S14') 
```

在这里，`f0`和`f1`是`f2`您的数组中的字段名称`dtype`。

有关详细信息，请参阅[结构化数组](http://docs.scipy.org/doc/numpy/user/basics.rec.html)。

# php - PHP CLI：操作系统内存不足，而 memory_get_usage() 返回 40MB 内存使用

> ID：15573490
> 
> 赞同：1
> 
> 时间：2013-03-22T14:59:25.837
> 
> 标签：php, memory-management, memory-leaks, debian

运行我的 PHP CLI 脚本时，我的操作系统内存不足，而 memory_get_usage() 返回 40MB 内存使用。

这是此脚本执行的示例。

```
<?php
$aInstances = array();
$aInstances = myClass::getInstances(); // returns ~ 1500 objects in array()

while ( count($aInstances) ) {

  $instance = array_pop($aInstances);

  // do some stuff - memory usage increases
  $instance->loadFromDb();
  ......

  // free memory
  unset($instance);
  gc_collect_cycles(); // force garbage collector cleanup (memory usage grows up to 110MB otherwise)
}

// Display Php Memory Usage
echo number_format(memory_get_usage());
// returns 40,320,200
echo number_format(memory_get_peak_usage());
// returns 41,002,056

// Display Php System Memory Usage
echo memory_get_usage(true);
// returns 41,943,040
echo memory_get_peak_usage(true)
// returns 41,943,040
?> 
```

这个脚本似乎完成了他的工作，但是**当我尝试通过另一种方式**（比如`ps aux`在另一个 shell 上）查看系统内存使用情况时，**内存使用情况超过 90%**。

脚本有一次被系统杀死，因为它内存不足。

更多信息：

*   操作系统：Debian 6、2GB 内存
*   PHP版本：5.3.3-7
*   php.ini (cli) memory_limit = 128M

你有什么想法来解释和/或解决我的问题吗？

非常感谢...

# javascript - 当我单击 shadowbox 链接时，它会打开但只是黑色？

> ID：15573496
> 
> 赞同：0
> 
> 时间：2013-03-22T14:59:29.777
> 
> 标签：javascript, html, shadowbox

当我单击一个影子框链接时，它会打开，但它只是黑色的。虽然当我使用一个不存在的页面时，会出现 404 错误页面。页面路径正确

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T14:59:29.777

确保您链接到的页面包含样式表。

我的也做了同样的事情，但结果发现背景和文字都是黑色的。我默认以某种方式假设。您可以通过突出显示该框来验证这是否正在发生，并且您可以看到突出显示的文本。如果它在那里，只需包含一个样式表并设置页面样式以使文本显示！

# google-app-engine - 如何获取所有谷歌地图方向结果点

> ID：15573498
> 
> 赞同：0
> 
> 时间：2013-03-22T14:59:32.327
> 
> 标签：google-app-engine, google-maps

我知道我可以使用 response.routes[0].overview_path 找到点，但对于更长距离的路线，并非所有点都包含在此集合中。

还有其他方法可以让我获得所有积分吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T15:30:29.543

感谢地理编码压缩！

解决方案是处理所有的腿和步骤。

```
directionsDisplay = new google.maps.DirectionsRenderer(rendOptions);
var result = directionsDisplay.getDirections();

var route = result.routes[0];
var points = new Array();
var legs = route.legs;
for (i = 0; i < legs.length; i++) {
    var steps = legs[i].steps;
    for (j = 0; j < steps.length; j++) {
        var nextSegment = steps[j].path;
        for (k = 0; k < nextSegment.length; k++) {
            points.push(nextSegment[k]);
        }
    }
} 
```

# python - 在 Pycharm 中调试具有奇怪结构的 Flask 应用程序

> ID：15573501
> 
> 赞同：0
> 
> 时间：2013-03-22T14:59:41.437
> 
> 标签：python, flask, pycharm

我是使用 pycharm 调试烧瓶的新手，所以希望我所问的一切都不是太琐碎。

我有两个文件，`code/__init__.py`和`code/runserver.py`.

该`__init__.py`文件是我的 Flask 应用程序的初始化位置，这意味着这是语句的位置

```
app = Flask(__name__) 
```

发生。

在`runserver.py`文件中，我有以下声明：

```
if __name__ == '__main__':
    main() 
```

runserver 通过以下方式导入应用程序：

```
from code import app, __app_name__, __version__ 
```

主函数内部是一些`parser.addoption`命令，然后最终

```
def main():
    parser = OptionParser()
    parser.add_option("-d", "--debug", action="store_true",
                      default=app.config.get('DEBUG', True),
                      dest="debug", help="Turn on debugging")
    (options, args) = parser.parse_args()
    app.run(debug=options.debug, host=options.address, port=options.port) 
```

在这种情况下，我调试应用程序的入口点是什么？我以为会是`runserver.py`，但是当我尝试调试时，我得到了响应

```
ImportError: No module named code 
```

但是，如果我像这样运行它

```
python ${BASE}/code/runserver.py 
```

我没有任何问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T19:01:40.407

几个瞬间

1) 如果您想使用 PyCharm 进行调试，您应该将默认调试器设置为 False (app.debug)
2) 在 PyCharm 中，您不应该使用 /code/ 文件夹作为根目录，因为在这种方式下，导入时不会看到任何代码
如果您制作 codeProject /code/ 并在 pycharm 中以 root 身份打开 codeProject 然后运行 ​​codeProject/runserver.py 或 codeProject/code/runserver.py 一切都应该没问题

# c++ - GetExtendedTcpTable 没有返回与 netstat -ano 相同的结果

> ID：15573504
> 
> 赞同：3
> 
> 时间：2013-03-22T14:59:43.637
> 
> 标签：c++, windows, mfc, ports, netstat

我使用此代码获取 PC 中已打开端口的列表以及使用每个端口的应用程序。

```
string Port::GetListOfTcpPorts()

{
    string ApplicationName = "";
    string result = "";
    string aux = "";
    string RemotePort = "";
    DWORD (WINAPI *pGetExtendedTcpTable)(
  PVOID pTcpTable,
  PDWORD pdwSize,
  BOOL bOrder,
  ULONG ulAf,
  TCP_TABLE_CLASS TableClass,
  ULONG Reserved
);
    MIB_TCPTABLE_OWNER_PID *pTCPInfo;
    MIB_TCPROW_OWNER_PID *owner;
    DWORD size;
    DWORD dwResult;

    HMODULE hLib = LoadLibrary("iphlpapi.dll");

    pGetExtendedTcpTable = (DWORD (WINAPI *)(PVOID,PDWORD,BOOL,ULONG,TCP_TABLE_CLASS,ULONG))
        GetProcAddress(hLib, "GetExtendedTcpTable");

    dwResult = pGetExtendedTcpTable(NULL,       &size, false, AF_INET, TCP_TABLE_OWNER_PID_LISTENER, 0);
    pTCPInfo = (MIB_TCPTABLE_OWNER_PID*)malloc(size);
    dwResult = pGetExtendedTcpTable(pTCPInfo,   &size, false, AF_INET, TCP_TABLE_OWNER_PID_LISTENER, 0);       
   for (DWORD dwLoop = 0; dwLoop < pTCPInfo->dwNumEntries; dwLoop++)
    {
        owner = &pTCPInfo->table[dwLoop];      
        ApplicationName = GetNameByPID(owner->dwOwningPid);
        OpenedPort = convertInt(ntohs(owner->dwLocalPort));         
        RemotePort = convertInt(ntohs(owner->dwRemotePort));
        aux = "TCP ; " + OpenedPort + ";"+ RemotePort+";"+ ApplicationName + "\n";
        result = result + aux;

    }
    return result;
} 
```

但是，如果我将结果与`netstat -ano`此函数的结果进行比较，则不会返回所有 TCP 端口。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T13:08:56.813

使用`TCP_TABLE_OWNER_PID_ALL`代替，`TCP_TABLE_OWNER_PID_LISTENER`您将获得所有 TCP 端口。

# asp.net - 如何从内容页面访问母版页控件

> ID：15573505
> 
> 赞同：52
> 
> 时间：2013-03-22T14:59:48.827
> 
> 标签：asp.net, master-pages, code-behind

我有一个包含状态消息标签的母版页。我需要从不同的 .aspx 页面设置状态文本。如何从内容页面做到这一点？

```
public partial class Site : System.Web.UI.MasterPage
{
    public string StatusNachricht
    {
        get
        {
            return lblStatus.Text;
        }
        set
        {
            lblStatus.Text = value;
        }
    }

    protected void Page_Load(object sender, EventArgs e)
    {            

    }
} 
```

我已经尝试过了，但未能成功：

```
public partial class DatenAendern : System.Web.UI.Page
{
    var master = Master as Site;

    protected void Page_Load(object sender, EventArgs e)
    {               
        if (master != null)
        {
            master.setStatusLabel("");
        }
    }        

    protected void grdBenutzer_RowCommand(object sender, GridViewCommandEventArgs e)
    {           
            try
            {
                //some code

                if (master != null)
                {
                    master.setStatusLabel("Passwort erfolgreich geändert.");
                }
            }
            catch (Exception ex)
            {
                if (master != null)
                {
                    master.setStatusLabel("Passwort konnte nicht geändert werden!");
                }                                       
            }
        }
    }                   
} 
```

* * *

## 回答 #1

> 赞同：90
> 
> 时间：2013-03-22T15:08:41.247

在 MasterPage.cs 文件中添加`property`如下`Label`：

```
public string ErrorMessage
{
    get
    {
        return lblMessage.Text;
    }
    set
    {
        lblMessage.Text = value;
    }
} 
```

在您的`aspx`页面上，就在页面指令下方添加以下内容：

```
<%@ Page Title="" Language="C#" MasterPageFile="Master Path Name"..... %>
<%@ MasterType VirtualPath="Master Path Name" %>   // Add this 
```

然后在您的`codebehind(aspx.cs)`页面中，您可以轻松访问`Label Property`并`text`根据需要进行设置。像这样：

```
this.Master.ErrorMessage = "Your Error Message here"; 
```

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2014-04-05T06:37:42.070

在内容页面中，您可以访问标签并设置文本，例如

这里 'lblStatus' 是您的母版页标签 ID

```
标签 lblMasterStatus = (Label)Master.FindControl("lblStatus");

lblMasterStatus.Text = "来自内容页面的测量";

```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2014-10-31T09:53:55.007

有用

在子页面上查找母版页控件

```
Label lbl_UserName = this.Master.FindControl("lbl_UserName") as Label;                    
lbl_UserName.Text = txtUsr.Text; 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-05-20T18:16:25.717

我的 System.Web.UI.Page 类中有一个辅助方法

```
protected T FindControlFromMaster<T>(string name) where T : Control
{
     MasterPage master = this.Master;
     while (master != null)
     {
         T control = master.FindControl(name) as T;
         if (control != null)
             return control;

         master = master.Master;
     }
     return null;
} 
```

然后您可以使用以下代码访问。

```
Label lblStatus = FindControlFromMaster<Label>("lblStatus");
if(lblStatus!=null) 
    lblStatus.Text = "something"; 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-03-22T15:05:48.933

您[**不能`var`在 field 中**](http://blogs.msdn.com/b/ericlippert/archive/2009/01/26/why-no-var-on-fields.aspx)使用，只能在局部变量上使用。

但即使这样也行不通：

```
Site master = Master as Site; 
```

因为您不能`this`在字段中使用并且`Master as Site`与`this.Master as Site`. `Page_Init`因此，只需从页面完全初始化时初始化字段，您就可以使用`this`：

```
Site master = null;

protected void Page_Init(object sender, EventArgs e)
{            
    master = this.Master as Site;
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-01-19T17:29:56.720

如果您有一个嵌套的 MasterPage，这会更加复杂。您需要首先找到包含嵌套 MasterPage 的内容控件，然后从中找到嵌套 MasterPage 上的控件。

关键位：**Master.Master**。

见这里：[http ://forums.asp.net/t/1059255.aspx?Nested+master+pages+and+Master+FindControl](http://forums.asp.net/t/1059255.aspx?Nested+master+pages+and+Master+FindControl)

例子：

> '查找内容控件
> 
> Dim ct As ContentPlaceHolder = Me.Master.Master.FindControl("cphMain")
> 
> '现在在该内容中找到控件
> 
> 暗淡 lbtnSave As LinkBut​​ton = ct.FindControl("lbtnSave")

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-01-09T12:18:37.650

如果您尝试访问一个 html 元素：这是一个 HTML 锚点...

我的导航栏的项目不是列表项 ( `<li>`)，而是 html 锚点 ( `<a>`)

见下图：（这是站长）

```
<nav class="mdl-navigation">
    <a class="mdl-navigation__link" href="" runat="server" id="liHome">Home</a>
    <a class="mdl-navigation__link" href="" runat="server" id="liDashboard">Dashboard</a>
</nav> 
```

现在在另一个页面后面的代码中，对我来说，它是登录页面......

在 PageLoad() 上定义这个：

```
HtmlAnchor lblMasterStatus = (HtmlAnchor)Master.FindControl("liHome");
lblMasterStatus.Visible =false;

HtmlAnchor lblMasterStatus1 = (HtmlAnchor)Master.FindControl("liDashboard");
lblMasterStatus1.Visible = false; 
```

现在我们已经访问了站点主控件，并使其在登录页面上不可见。

# linux - axis 1.4 linux help - happyaxis 不高兴 AXISCLASSPATH 都错了？

> ID：15573506
> 
> 赞同：0
> 
> 时间：2013-03-22T14:59:50.423
> 
> 标签：linux, classpath, tomcat6, axis, turnkeylinux.org

我正在尝试在交钥匙 linux tomcat6 设备上使用轴 1.4。

简短的版本是假设它是问题的根源；在 debian 上设置 AXISCLASSPATH 的正确方法是什么？

长版是：

axis.war 正确部署。我已将 AXIS_HOME 和 AXIS_LIB 添加到 etc/environment，如下所示：

```
CATALINA_HOME="/usr/share/tomcat6"
CATALINA_BASE="/var/lib/tomcat6"
CATALINA_OPTS="-server -Xms384M -Xmx512M -XX:MaxPermSize=256M"
JAVA_HOME="/usr/lib/jvm/java-6-sun-1.6.0.26"
AXIS_HOME="/var/lib/tomcat6/webapps/axis"
AXIS_LIB="/var/lib/tomcat6/webapps/axis/WEB-INF/lib" 
```

并且所有回声都正确。tomcat6 管理页面显示轴正在运行，/localhost/axis 加载正常，但happyaxis 正在启动：

> HTTP 状态 500 -
> 
> 类型异常报告
> 
> 信息
> 
> 描述 服务器遇到一个内部错误 () 阻止它完成这个请求。
> 
> 例外
> 
> org.apache.jasper.JasperException：在第 45 行处理 JSP 页面 /happyaxis.jsp 时发生异常
> 
> 42: */ 43: Class classExists(String classname) { 44:
> try { 45: return Class.forName(classname); 46: } 捕捉 (ClassNotFoundException e) { 47: 返回 null; 48：
> }
> 
> 堆栈跟踪：org.apache.jasper.servlet.JspServletWrapper.handleJspException(JspServletWrapper.java:521) org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:412) org.apache.jasper.servlet.JspServlet.serviceJspFile( JspServlet.java:313) org.apache.jasper.servlet.JspServlet.service(JspServlet.java:260) javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
> 
> 根本原因
> 
> javax.servlet.ServletException：java.lang.UnsupportedClassVersionError：com/ibm/wsdl/factory/WSDLFactoryImpl：不支持的major.minor版本51.0（无法加载类com.ibm.wsdl.factory.WSDLFactoryImpl）org.apache.jasper.runtime .PageContextImpl.doHandlePageException(PageContextImpl.java:865) org.apache.jasper.runtime.PageContextImpl.handlePageException(PageContextImpl.java:794) org.apache.jsp.happyaxis_jsp._jspService(happyaxis_jsp.java:808) org.apache.jasper .runtime.HttpJspBase.service(HttpJspBase.java:70) javax.servlet.http.HttpServlet.service(HttpServlet.java:717) org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:388) org.apache .jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:313) org.apache.jasper.servlet.JspServlet.service(JspServlet.java:260) javax.servlet.http。HttpServlet.service(HttpServlet.java:717)
> 
> 根本原因
> 
> java.lang.UnsupportedClassVersionError：com/ibm/wsdl/factory/WSDLFactoryImpl：不支持的major.minor版本51.0（无法加载类com.ibm.wsdl.factory.WSDLFactoryImpl）org.apache.catalina.loader.WebappClassLoader.findClassInternal（WebappClassLoader .java:2822) org.apache.catalina.loader.WebappClassLoader.findClass(WebappClassLoader.java:1159) org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1647) org.apache.catalina.loader.WebappClassLoader .loadClass(WebappClassLoader.java:1526) org.apache.jasper.servlet.JasperLoader.loadClass(JasperLoader.java:128) org.apache.jasper.servlet.JasperLoader.loadClass(JasperLoader.java:66) java.lang.Class .forName0(Native Method) java.lang.Class.forName(Class.java:169) org.apache.jsp.happyaxis_jsp.classExists(happyaxis_jsp.java:34) org.apache。jsp.happyaxis_jsp.probeClass(happyaxis_jsp.java:77) org.apache.jsp.happyaxis_jsp.needClass(happyaxis_jsp.java:151) org.apache.jsp.happyaxis_jsp._jspService(happyaxis_jsp.java:650) org.apache.jasper。 runtime.HttpJspBase.service(HttpJspBase.java:70) javax.servlet.http.HttpServlet.service(HttpServlet.java:717) org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:388) org.apache。 jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:313) org.apache.jasper.servlet.JspServlet.service(JspServlet.java:260) javax.servlet.http.HttpServlet.service(HttpServlet.java:717)服务（HttpJspBase.java:70）javax.servlet.http.HttpServlet.service（HttpServlet.java:717）org.apache.jasper.servlet.JspServletWrapper.service（JspServletWrapper.java:388）org.apache.jasper.servlet。 JspServlet.serviceJspFile(JspServlet.java:313) org.apache.jasper.servlet.JspServlet.service(JspServlet.java:260) javax.servlet.http.HttpServlet.service(HttpServlet.java:717)服务（HttpJspBase.java:70）javax.servlet.http.HttpServlet.service（HttpServlet.java:717）org.apache.jasper.servlet.JspServletWrapper.service（JspServletWrapper.java:388）org.apache.jasper.servlet。 JspServlet.serviceJspFile(JspServlet.java:313) org.apache.jasper.servlet.JspServlet.service(JspServlet.java:260) javax.servlet.http.HttpServlet.service(HttpServlet.java:717)

我过去在 ubuntu 上使用过轴，并且在使用 openjdk 时遇到了问题。所以我尝试删除 openjdk 并安装 sun-java-6 并得到同样的错误。

根据我看到的每一点文档，$AXISCLASSPATH 需要指向轴/lib .jar 文件，这可能是问题，但 apache 文档非常旧：

> Unix 用户必须做类似的事情。下面我们将 AXIS 安装到 /usr/axis 并使用 bash shell。有关差异，请参阅您的 shell 文档。要使变量渗透，您需要将它们添加到 shell 的启动（点）文件中。再次，请参阅您的 shell 的文档。
> 
> ```
> set AXIS_HOME=/usr/axis
> set AXIS_LIB=$AXIS_HOME/lib
> set AXISCLASSPATH=$AXIS_LIB/axis.jar:$AXIS_LIB/commons-discovery.jar:
>   $AXIS_LIB/commons-logging.jar:$AXIS_LIB/jaxrpc.jar:$AXIS_LIB/saaj.jar:
>   $AXIS_LIB/log4j-1.2.8.jar:$AXIS_LIB/xml-apis.jar:$AXIS_LIB/xercesImpl.jar
> export AXIS_HOME; export AXIS_LIB; export AXISCLASSPATH 
> ```

当我部署时，lib 目录中不存在 xercesImpl.jar，而 log4-1.2.8.jar 只是 log4j.jar

我从文件系统的其他地方复制了 xercesImpl，经过详尽的搜索后，我尝试从命令行、etc/environment、tomcat6.sh 和其他一些变量设置此变量，但均未成功。

我发现可以正确回显的唯一方法是使用命令行代码：

```
export AXISCLASSPATH:$AXIS_LIB/axis.jar;$AXIS_LIB/commons-discover.jar;$AXIS_LIB/commons-logging.jar;$AXIS_LIB/jaxrpc.jar;$AXIS_LIB/saaj.jar;$AXIS_LIB/log4j.jar 
```

仍然没有变化。作为黑暗中的刺，我将 wsdl4j.jar 从文件系统的其他位置复制到 /lib 并将其添加到上述导出命令中，但仍然没有乐趣

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-28T14:38:30.547

“Unsupported major.minor version 51.0”表示“JVM 版本太低；51== Java7”。

史蒂夫

（谁在 10 年前写了happyaxis.jsp）

# c++ - 智能指针是否违反了在头文件中最小化#includes 的原则？

> ID：15573507
> 
> 赞同：5
> 
> 时间：2013-03-22T14:59:52.863
> 
> 标签：c++

我更喜欢`#include`在我的头文件中尽量减少使用，尽可能使用前向声明，我相信这被认为是好的做法。

如果我有一个方法声明，它会很好用：

```
bool IsFlagSet(MyObject *pObj); 
```

但是，如果我有`typedef Ptr<MyObject> MyObjectPtr`并且`MyObject.h`API 更改为：

```
bool IsFlagSet(MyObjectPtr pObj); 
```

我现在*不需要*吗`#include "MyObject.h"`？有没有办法解决这个问题，或者仅仅是使用智能指针所付出的代价？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-22T15:05:08.870

不，您不必这样做。您可以为不完整的类定义类型别名，模板参数可以是不完整的类型（请参阅 C++11 标准的第 14.3.1/2 段）：

```
#include <memory>

struct C;

typedef std::shared_ptr<C> ptrC; // C is incomplete here

struct C { void foo() { } };

int main()
{
    ptrC p = std::make_shared<C>();
    p->foo();
} 
```

正如[Pubby](https://stackoverflow.com/users/964135/pubby)在评论中正确提到的那样，函数声明也不要求其签名中提到的类型是完整的：

```
struct C;

void foo(C); // C is incomplete here

struct C { };

#include <iostream>

void foo(C)
{
    std::cout << "foo(C)" << std::endl;
}

int main()
{
    C c;
    foo(c);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-22T15:07:21.040

不，`std::shared_ptr<T>`明确设计`T`为仅在前向声明时工作。当然，这并不适用于所有情况，但原理与普通指针相同。如果`T`是前向声明的，你可以做任何你可以做`std::shared_ptr<T>`的事情`T*`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T15:11:15.970

您可以将 typedef 与不完整的类型一起使用。

但是使用智能指针类型的全名不是更好吗？

`MyClassPtr`当然要短得多，但`std::unique_ptr<MyClass>`实际上告诉我们如何使用这个指针。因此，对于不是很长的名称，我建议使用智能指针的全名。

# android - 内部布局之间的android转换

> ID：15573511
> 
> 赞同：0
> 
> 时间：2013-03-22T15:00:00.550
> 
> 标签：android, animation, layout

我有这个布局设置：

相对布局

```
LinearLayout #1 (visible by default)

LinearLayout #2 (invisible by default) 
```

当我隐藏 Layout#1 并显示 Layout#2 时，我需要的是有一个（滑动或淡出）动画。

这怎么可能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T15:09:47.090

[View.startAnimation(动画)](http://developer.android.com/reference/android/view/View.html#startAnimation%28android.view.animation.Animation%29)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T15:34:36.327

尝试使用[ViewFlipper](http://developer.android.com/reference/android/widget/ViewFlipper.html)。我认为这正是你想要的。它允许在具有自定义动画的视图之间切换。

# ruby - 在 ruby 中有多个构造函数

> ID：15573513
> 
> 赞同：5
> 
> 时间：2013-03-22T15:00:05.167
> 
> 标签：ruby, constructor, initialization

有没有办法在 ruby​​ 中有多个“初始化”方法？例如：一种方法排除一个参数，而另一种方法排除三个？

就像是

```
 class One
  def initialize (a)
    puts a
  end
  def initialize_1 (a,b)
    puts a ,b 
  end
end 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-22T15:50:05.817

`initialize`实际上不是构造函数。您确实可以有两个构造函数。

```
class One
  singletonclass.class_eval{alias old_new :new}
  def self.new a
    puts a
    old_new
  end
  def self.new_1 a, b
    puts a, b
    old_new
  end
end 
```

# c++ - C++：如何获取当前函数的地址

> ID：15573518
> 
> 赞同：0
> 
> 时间：2013-03-22T15:00:14.877
> 
> 标签：c++, function-pointers

这是我的问题：

我有一个函数指针向量和一个迭代器：

```
std::vector<void* (*) (void*)> f_callbackVector;
std::vector<void* (*) (void*)>::iterator f_callbackVectorIterator = f_callbackVector.begin(); 
```

我用一些函数填充向量：

```
f_callbackVector.push_back((void* (*) (void*))handleDeliveryModeChange); 
```

当我在函数中时，我希望能够检查迭代器是否拥有指向当前函数的指针。我试过这个：

```
void handleDeliveryModeChange(SESSION s, const DELIVERY_MODE d1, const DELIVERY_MODE d2) {
    if (static_cast<void (*) (void*, DELIVERY_MODE, DELIVERY_MODE)>((*f_callbackVectorIterator)) == &handleDeliveryModeChange) {
    LOG_MESSAGE("\n\n\n\nWOW\n\n\n\n");
}
} 
```

并得到：

```
invalid static_cast from type âvoid* (*)(void*)â to type âvoid (*)(void*, DELIVERY_MODE, DELIVERY_MODE)â 
```

我将不胜感激。

谢谢！

**UPD：** 我试过了：

```
if (*(f_callbackVectorIterator) == &handleDeliveryModeChange) 
```

并得到错误：`comparison between distinct pointer types âvoid ()(void)â and âvoid ()(void, DELIVERY_MODE, DELIVERY_MODE)â lacks a cast`

我什至试过这个怪物：

```
if ((*f_callbackVectorIterator) == static_cast<&(void* (*) (void*))>(&handleDeliveryModeChange)) 
```

仍然没有运气，有很多晦涩的语法错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T15:01:38.750

`&myfunc`获取函数的地址。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T15:28:41.723

你在对编译器撒谎：

```
f_callbackVector.push_back((void* (*) (void*))handleDeliveryModeChange); 
```

`handleDeliveryModeChange`与此签名不匹配。它的签名实际上是：

```
void (*)(SESSION, DELIVERY_MODE, DELIVERY_MODE) 
```

你可以通过改变这个来使它工作：[代码](http://ideone.com/rBw3kV)

```
#include <vector>
#include <iostream>

typedef void* SESSION;       // Or whatever it is
typedef void* DELIVERY_MODE; // You didn't say what these are
typedef void* (*Func) (SESSION, DELIVERY_MODE, DELIVERY_MODE);
typedef std::vector<Func> FuncVector;

FuncVector f_callbackVector;
FuncVector::iterator f_callbackVectorIterator = f_callbackVector.begin();

// Note: Your pointers return void*, so I changed the return type from void:
void* handleDeliveryModeChange
(
  SESSION s,
  const DELIVERY_MODE d1,
  const DELIVERY_MODE d2
)
{
  if ((*f_callbackVectorIterator) == &handleDeliveryModeChange)
  {
    std::cout << "\n\n\n\nWOW\n\n\n\n";
  }
  return NULL;
}

int main()
{

  f_callbackVector.push_back(handleDeliveryModeChange);
} 
```

# mysql - mysql 在 INNER JOIN 之后获取特定条目

> ID：15573529
> 
> 赞同：0
> 
> 时间：2013-03-22T15:00:50.883
> 
> 标签：mysql

我有相同查询的两种变体：

```
SELECT * FROM jos_mls AS mls
    INNER JOIN jos_activeagents AS active ON mls.MSTLISTBRD = active.AGENTUID
    INNER JOIN jos_agents AS agents ON active.AGENTUID = agents.AGTBRDIDMM
    INNER JOIN jos_agencies AS firm on agents.AGTFRMID = firm.OFFFRMID
    AND mls.MSTRECAPDT >= ADDTIME(CURRENT_TIMESTAMP(), '04:29:00.000000'); 
```

和...

```
SELECT * FROM jos_mls AS mls
    INNER JOIN jos_activeagents AS active ON mls.MSTLISTBRD = active.AGENTUID
    INNER JOIN jos_agents AS agents ON active.AGENTUID = agents.AGTBRDIDMM
    INNER JOIN jos_agencies AS firm on agents.AGTFRMID = firm.OFFFRMID
    AND mls.MSTMLSNO = '4115762'; 
```

第一个工作正常，没有问题。第二个是根据唯一键查找条目。但是，它给出了一个空集。我可以验证密钥是否存在，当我运行第一个查询时，我知道该列已包含在集合中。

我试过用引号和不带引号来拉它，但没有运气。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T15:12:58.187

首先，我怀疑你的意思是说`WHERE`，不是`AND`;-)

```
SELECT * FROM jos_mls AS mls

INNER JOIN jos_activeagents AS active ON mls.MSTLISTBRD = active.AGENTUID 
INNER JOIN jos_agents AS agents ON active.AGENTUID = agents.AGTBRDIDMM
INNER JOIN jos_agencies AS firm on agents.AGTFRMID = firm.OFFFRMID
WHERE mls.MSTMLSNO = 4115762 
```

但是您所写的是“有效的”（至少在某些 DBMS 中，我认为在 mysql 中还可以）。但就您所追求的结果而言，可能不是“正确的”。

（我对 mySql 不是特别熟悉，但相信某些 DBMS 的`ON`子句中的表达式与当时正在编辑的表无关`JOIN`。但到目前为止我对 mySql 的经验是，这在*语法上*很好）

在某些情况下，即使它“有效”（即它运行并产生*一些*没有错误的结果），该子句的位置也会影响结果集（我认为）和查询优化（我相当当然）。这些事情中的一种或两种可能在这里发生？

无论它是否“解决”了问题，恕我直言，您应该将您的`AND mls...`条款移至适当的`ON`条款，而不是出于可读性/可维护性的其他原因。

```
SELECT * FROM jos_mls AS mls

    INNER JOIN jos_activeagents AS active 
    ON mls.MSTLISTBRD = active.AGENTUID 
    AND mls.MSTMLSNO = 4115762

    INNER JOIN jos_agents AS agents ON active.AGENTUID = agents.AGTBRDIDMM
    INNER JOIN jos_agencies AS firm on agents.AGTFRMID = firm.OFFFRMID; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T15:06:18.270

编辑以下评论：

尝试时会发生什么：

```
SELECT * FROM jos_mls AS mls WHERE mls.MSTMLSNO = 4115762; 
```

你有什么结果吗？

# asp.net-mvc - Html.HiddenFor 偶尔没有设置带有模型信息

> ID：15573531
> 
> 赞同：3
> 
> 时间：2013-03-22T15:00:55.570
> 
> 标签：asp.net-mvc, razor, model-binding

我们在 MVC3 中遇到 Html.HiddenFor 问题，*有时*无法正确绑定。我们根本无法重现它，但我们看到 nullrefs 在我们的日志记录中出现，这让我们非常抓狂。

我们有以下模型和控制器结构：

```
public class DummyController
{
    [HttpGet]
    public ActionResult ReturnAPage(int NumericID)
    {
        //NumericID should never be 0 or negative, but let's check to make sure
        if (NumericID < 1)
        {
            return RedirectToAction("TracyJordanStabbingRobot");
        }
        return View("DummyView", new DummyViewModel(NumericID));
    }

    [HttpPost]
    public ActionResult TakePageSubmission(DummyViewModel model)
    {
        //AnObject relies on having a non-zero ID
        ComplexObject AnObject = new ComplexObject(model.NumericID);
        AnObject.UseMe();
    }
}

public class DummyViewModel
{

     public DummyViewModel() {}
     public DummyViewModel(int ID)
     {
         NumericID = ID;
     }

     public int NumericID { get; set; }
} 
```

...以及以下视图结构：

DummyView.cshtml

```
@model DummyViewModel
<html>
    <head></head>
    <body>
        <p>THIS IS A VIEW!</p>
        <form id="DummyViewForm" action="/RouteTo/TakePageSubmission" method="post">
            @Html.Partial("_PartialDummyView", Model)
            <input type="submit" value="Submit This!" />
        </form>
    </body>
</html> 
```

_PartialDummyView.cshtml

```
@model DummyViewModel
   <p>Heard you like views...</p>
   @Html.HiddenFor(model => model.NumericID) 
```

考虑到我们在初始控制器操作中检查小于零的值，因此不`@Html.HiddenFor(model => model.NumericID)`应该有小于零的值。

话虽如此，当我们开始`AnObject`在`TakePageSubmission`操作中使用时，我们会得到空引用错误。

当我们深入记录该`model.NumericID`值时，我们看到它为零，考虑到 DummyView 只能使用非零值访问，这*应该是不可能的。*

我们有点难过，因为我们无法可靠地重现这个问题，我们*不*知道是什么原因造成的。有没有人遇到过这样的事情？

编辑：我们正在表单帖子上进行 ModelState 验证，但我们没有检查通过的 NumericID 是否为 0。当我们检查时，模型通过无效，这只是证明 HiddenFor 正在获取设置不当。此外，到页面的路由实际上*包括*NumericID，例如，我们已经看到这种情况发生在：

[http://our.site.com/RouteToReturnAPage/1736/](http://our.site.com/RouteToReturnAPage/1736/)

...在明确设置动作参数的情况下，模型构造正确，但由于某种未知原因，HiddenFor NumericID 值为 0。这真的令人费解。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-15T04:23:28.023

您的默认 0 值绑定是在发布后从 MVC 查看到同一页面，认为由于发布期间的错误而重新加载相同的视图。正确的绑定将在加载/操作调用到不同的操作调用时发生。

`ModelState.Clear();`在重新加载视图之前，有一个 hack 解决方法。

此外，根本不使用 Helpers 创建隐藏字段，例如：

```
<input type="hidden" value="@Model.NumericID" id="NumericID" name="NumericID" /> 
```

参考：http: [//blogs.msdn.com/b/simonince/archive/2010/05/05/asp-net-mvc-s-html-helpers-render-the-wrong-value.aspx](http://blogs.msdn.com/b/simonince/archive/2010/05/05/asp-net-mvc-s-html-helpers-render-the-wrong-value.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T07:32:48.687

First you are missing default constructor in your model. Without it applicaiton throws exception when binding.

You can reproduce the error by editing the hidden field on client side. So user can change id to 0 or any other value. If you aren't running you application on distributed enviroment then use TempData to pass the id between actions. This way you will keep id safe from data tampering.

```
TempData["NumericID"] = NumericID; 
```

# c# - 使垂直嵌套滚动始终可见

> ID：15573537
> 
> 赞同：2
> 
> 时间：2013-03-22T15:01:10.320
> 
> 标签：c#, wpf, scroll

我有以下 Xaml。我有一个包含一些“列标题”和一个列表框的网格。目前我的水平滚动条滚动列标题和列表框。我的垂直滚动条只滚动列表框，因为我希望列标题“冻结”。我遇到的问题是我必须一直滚动到右侧才能看到垂直滚动条。无论如何“锁定”垂直滚动条始终可见（在需要时）并且只滚动列表框？如果您需要更多信息，请告诉我。

```
<Grid Name="test1" Margin="0,0,50,0" Grid.Row="0">
    <ScrollViewer  VerticalScrollBarVisibility="Hidden" HorizontalScrollBarVisibility="Auto" Width="{Binding ElementName=test1, Path=ActualWidth}">
        <Grid Name="grdMain"  >
            <Grid.RowDefinitions>
                <RowDefinition Height="10*" />
                <RowDefinition Height="90*" />
            </Grid.RowDefinitions>
                <StackPanel Grid.Row="0">
                    <ItemsControl  Name="ColumnHeaders" ..>
                    </ItemsControl>
                </StackPanel>
                <StackPanel Name="check" Grid.Row="1">
                    <ScrollViewer Height="{Binding ElementName=check, Path=ActualHeight}"  VerticalScrollBarVisibility="Visible" HorizontalScrollBarVisibility="Hidden">
                        <ListBox   Name="lstDrop" ..>
                        </ListBox>
                    </ScrollViewer>
                </StackPanel>
            </Grid>
         </ScrollViewer>
                </Grid> 
```

以下是当前功能的屏幕截图：

![滚动不可见栏](../Images/6feba7cf36baba7f3e383a7ff77199d4.png)

![滚动条可见](../Images/84f739945bf5cce72c1796a18f237b9e.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T13:42:00.383

最后，它有点像我想的那样糟糕。不过，这里有一些东西。我不得不对最初的想法和你的布局做一些改变，但之后它看起来都一样。

```
<Grid Name="test1" Margin="0,0,50,0" Grid.Row="0">
    <Grid Name="grdMain"  >
        <Grid.RowDefinitions>
            <RowDefinition Height="10*" />
            <RowDefinition Height="90*" />
        </Grid.RowDefinitions>
        <ScrollViewer VerticalScrollBarVisibility="Hidden" HorizontalScrollBarVisibility="Hidden" Name="scv_headers">
            <ItemsControl Name="ColumnHeaders">
                <!--Headers here-->
            </ItemsControl>
        </ScrollViewer>

        <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Visible" HorizontalScrollBarVisibility="Visible" ScrollChanged="List_OnScrollChanged">
            <ListBox Name="lstDrop">
                <!--Items here-->
            </ListBox>
        </ScrollViewer>
    </Grid>
</Grid> 
```

因为滚动条隐藏在模板中，我不得不在后面添加一些代码

```
 private void List_OnScrollChanged(object sender, ScrollChangedEventArgs e)
    {
        var scrollbarSrc = (ScrollBar)((ScrollViewer)e.OriginalSource).Template.FindName("PART_HorizontalScrollBar", (ScrollViewer)e.OriginalSource);

        scv_headers.ScrollToHorizontalOffset(scrollbarSrc.Value);
    } 
```

因为你的堆栈面板只包含一个项目，所以我把它们放在一边，看起来几乎一样。

# javascript - Div 和过渡到透明度

> ID：15573541
> 
> 赞同：-3
> 
> 时间：2013-03-22T15:01:16.673
> 
> 标签：javascript, css, html

我的网站有问题：

[http://mbprojects.designy.pl/projekty/galaktikafilm/slider/demo.php](http://mbprojects.designy.pl/projekty/galaktikafilm/slider/demo.php)

我不知道如何使用滑块在 div 的两侧过渡到 css（？）中的透明度。

像这儿：

[http://s24.postimg.org/vbvn9pzzp/Scr​​een_shot_2013_03_22_at_15_20_58.jpg](http://s24.postimg.org/vbvn9pzzp/Screen_shot_2013_03_22_at_15_20_58.jpg)

我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T15:10:57.960

我最好的猜测和最简单的解决方案是将 Div/img 放在滑块的顶部，该滑块在中心具有完全透明，但在任一边缘完全不透明。

希望这可以帮助。

# windows - Archive::Any 给出 IO 错误

> ID：15573543
> 
> 赞同：2
> 
> 时间：2013-03-22T15:01:28.330
> 
> 标签：windows, perl, cygwin, cpan

```
#!/usr/bin/perl
use strict;
use warnings;

my $archive_files = "C:\\Temp\\FREMOTE\\test.zip";
sub extract_archive($$);

extract_archive($archive_files, "C:\\Temp\\FREMOTE\\TEST\\");
extract_archive("C:\\Temp\\FREMOTE\\TEST\\testb.zip",
                "C:\\Temp\\FREMOTE\\TEST\\testb\\");

sub extract_archive($$) { 
    my $archive_file = shift;
    my $extract_dir  = shift;
    if (!  -d "$extract_dir") {
        mkdir $extract_dir;
    }
    use Archive::Any;
    my $archive = Archive::Any->new($archive_file);
    if($archive->extract($extract_dir)) {
        print "Extracted $archive_file into $extract_dir\n";
        undef $archive;
    } else {
        print "Failed to extracted $archive_file into $extract_dir\n";
    }
} 
```

我收到以下错误。我该如何解决？

```
IO 错误：复制期间写入错误：文件描述符错误
 在 C:/Perl/site/lib/Archive/Any.pm 第 193 行。
IO 错误：复制期间写入错误：文件描述符错误
 在 C:/Perl/site/lib/Archive/Any.pm 第 193 行。
IO 错误：复制期间写入错误：文件描述符错误
 在 C:/Perl/site/lib/Archive/Any.pm 第 193 行。
IO 错误：复制期间写入错误：文件描述符错误
 在 C:/Perl/site/lib/Archive/Any.pm 第 193 行。
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T02:30:12.200

我使用以下代码对其进行了测试。使用两个已知良好的 zip 文件，我将第二个 zip 文件添加到第一个文件中 - 以重现我相信您正在做的事情。使用原始代码，我在提取第二个文件期间不断收到错误消息：

```
Extracted C:\Temp\colorbox-master.zip into C:\Temp\FREMOTE\TEST\<br>
Can't call method "extract" on an undefined value at Perl-1.pl line 19. 
```

与您的错误不同，但使用以下代码修复：

```
#!/usr/bin/perl
use strict;
use warnings;

my $archive_files = "C:\\Temp\\colorbox-master.zip";

extract_archive($archive_files, "C:\\Temp\\FREMOTE\\TEST\\");
extract_archive("C:\\Temp\\FREMOTE\\TEST\\easybox-v1.3.zip", "C:\\Temp\\FREMOTE\\TEST\\testb\\");

sub extract_archive {
    my $archive_file = shift;
    my $extract_dir  = shift;
    if (!-d "$extract_dir") {
        mkdir $extract_dir;
    }
    use Archive::Any;
    my $archive = Archive::Any->new($archive_file);
    if($archive->extract($extract_dir)) {
        print "Extracted $archive_file into $extract_dir\n";
        undef $archive;
    } else {
        print "Failed to extracted $archive_file into $extract_dir\n";
    }
} 
```

解压 C:\Temp\colorbox-master.zip 到 C:\Temp\FREMOTE\TEST\
解压 C:\Temp\FREMOTE\TEST\easybox-v1.3.zip 到 C:\Temp\FREMOTE\TEST\testb\

请注意，我刚刚安装了“Archive::Any-0.0932”模块（ActiveState Perl），所以我可能有不同的（固定）版本。您可能需要检查您的模块是否为最新版本。并且您的 zip 文件没有损坏。

# python - 从站点地图中删除页面

> ID：15573544
> 
> 赞同：1
> 
> 时间：2013-03-22T15:01:28.737
> 
> 标签：python, django, sitemap, django-cms, django-sitemaps

[我正在使用 Django Cms 2.3.5，并且我正在从文档](http://django-cms.readthedocs.org/en/2.3.5/advanced/sitemap.html)中生成类似于本文的站点地图

现在我的问题是有一个简单的解决方案来隐藏这个站点地图中的两个页面，因为。我的 CMS 中集成了 404 和 500 错误，我不希望站点地图中有！？

有人有想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T15:48:01.740

我会这样尝试：

创建一个新类，并覆盖类的`get_url`方法`SiteMap`

```
class CustomCMSSitemap(CMSSitemap):
    def get_urls(self, *args, **kwargs):
       super(CustomCMSSitemap, self).get_urls(*args, **kwargs)
       //your code here 
```

[这](https://github.com/django/django/blob/master/django/contrib/sitemaps/__init__.py)是该课程的来源`SiteMap`

而不是添加`url(r'^sitemap.xml$', 'django.contrib.sitemaps.views.sitemap', {'sitemaps': {'cmspages': CMSSitemap}})`到 main`urls.py`中，添加`url(r'^sitemap.xml$', 'django.contrib.sitemaps.views.sitemap', {'sitemaps': {'cmspages': CustomCMSSitemap}})`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-15T02:14:29.507

在 django-cms 中从站点地图中删除页面的最简单方法是取消发布它。特别是如果该页面尚未准备好（输出 404 或 500 错误）。

# symfony - 来自不同捆绑包的 Symfony2 可扩展集合实体

> ID：15573547
> 
> 赞同：1
> 
> 时间：2013-03-22T15:01:41.740
> 
> 标签：symfony, dynamic, entity, bundle, factory

我正在构建一个具有资产抽象定义的 CMS。

页面是资产的集合。

集合将存储集合中内容的详细信息 - 但实体负责他们的 crud 过程。

我希望能够管理集合，但将每个资产定义在自己的包中 - 以便允许第 3 方创建新的资产类型。

我们正在研究资产注册表/工厂模式。

添加新资产的过程需要是动态的，或者可以通过配置完成 - 但不需要任何代码更改。

Symfony 表单类型似乎是最接近这一点的例子 - 任何建议/想法都非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T16:21:10.203

对于编译器传递和标记服务来说，这似乎是一项完美的工作。

第 3 方需要将其资产注册为服务并使用特定标签对其进行标记。在容器编译阶段，您将获得所有标记的服务并将它们注册到您的服务中。

相关文档：

*   [使用标记服务](http://symfony.com/doc/current/components/dependency_injection/tags.html)
*   [如何在 Bundles 中使用编译器通道](http://symfony.com/doc/current/cookbook/service_container/compiler_passes.html)
*   [编译容器](http://symfony.com/doc/current/components/dependency_injection/compilation.html)

# c# - 在 MSCRM 4 中使用 C# 从自定义实体中检索字段值

> ID：15573549
> 
> 赞同：-1
> 
> 时间：2013-03-22T15:01:53.783
> 
> 标签：c#, field, return-value, dynamics-crm-4

在我们的 CRM 环境中，我们在自定义参数的设置中有一个自定义实体类型，其中实体包含名称、类型和值。我需要在使用 asp 和 C# 的 Web 应用程序中获取这些“参数”之一来做一些数学运算。如何使用实体的 ID 在我的 aspx.cs 文件中检索此实体的值和类型字段，以便我可以制作与自定义参数实体相对应的 ac# 变量。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T15:16:44.337

**第一种方式**

您可以连接到 .asmx 的[CRM Web 服务](http://msdn.microsoft.com/en-us/library/cc151015.aspx)并从那里检索您的实体。只需将其添加为[网络参考](http://msdn.microsoft.com/en-us/library/bb628649.aspx)。根据我的经验，将其添加为*服务引用*很麻烦，但添加为 Web 引用则不是（因为“添加服务引用”是针对 WCF 的，而“添加 Web 引用”从一开始就用于 .asmx）。

顺便说一句，如果您习惯于通过编写插件和自定义工作流活动来使用 CRM SDK，您可能会注意到：

*   在幕后，CRM SDK 程序集实际上无论如何都在调用 CRM Web 服务......他们只是以一种很好的方式包装它，以促进插件等的开发
*   添加 Web 服务后，您将有一大堆方法可供选择，并且您的实体现在是 ASP.NET 应用程序中的类。因为 VS 将导入服务的 WSDL，它会将您的自定义实体识别为一等公民并生成适当的类（即，您不需要对 DynamicEntity 进行大量处理，这与您的插件和自定义工作流程序集开发不同）

如果您对 CRM 中的实体进行更改（例如添加字段、创建新实体等）以使您的应用程序保持同步，那么更新/刷新您的 Web 参考也是一个很好的做法。如果您只使用一组狭窄的实体（在这种情况下听起来像这样）并且它们没有改变，这不是必需的，但仍然是一个很好的做法。

**第二种方式**

您可以直接从 _MSCRM 数据库中获取它。

如果您想访问原始表，您的实体将有两个表：Base 和 ExtensionBase。您想要的数据（如果它是您针对实体定义的属性）将位于 ExtensionBase 表中。如果您想改用它，还将有一个连接 Base 和 ExtensionBase 表的视图。

您还可以查询过滤后的视图，但如果您这样做，您需要确保运行 ASP.NET 应用程序的帐户（因此当部署到 IIS 时，这将是应用程序池标识）可以访问 CRM，因为这与过滤视图针对调用用户运行 CRM 安全检查。

另外，请注意直接访问数据库表或视图在技术上不受支持。反对过滤视图应该没问题。

我建议采用第一种方式，但我已经看到过去两种方法都做过，两者都应该有效。

# linux - 挂载和解锁加密的 Tryecrypt 驱动器

> ID：15573551
> 
> 赞同：-1
> 
> 时间：2013-03-22T15:01:59.537
> 
> 标签：linux, ubuntu, encryption

我在 Windows 下使用 Truecrypt 加密了整个磁盘。我的 Windows 7 操作系统出现一些软件故障，我需要重新安装操作系统，但我需要先备份我的个人数据。我可以使用 Ubuntu Live CD 启动，但我应该如何解锁我的驱动器？
编辑：我发现 Truecrypt 支持 CLI。如我错了请纠正我： `truecrypt /q /v /mnt/sda1`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T15:28:19.277

如果您已将此分区加密为系统驱动器，则需要使用系统加密安装它而无需预启动身份验证。这可以在 GUI 中使用*Volumes -> Mount Volumes with Options* on Windows（但它可能不适用于 Linux GUI）。

如果您想在命令行上使用，则必须[`/m sm`在 Windows 上的选项上](http://www.truecrypt.org/docs/?s=command-line-usage)找到等效项（请注意，此页面适用于 Windows CLI，Linux 版本略有不同，请使用`truecrypt --help`）。尽管似乎没有关于 的可能值的详细信息`-m`，但以下应该有效：

```
truecrypt -m system /dev/sda1 
```

# msbuild - $(MSBuildProjectDirectory) 和“程序文件 (x86)”文件夹

> ID：15573552
> 
> 赞同：8
> 
> 时间：2013-03-22T15:02:01.950
> 
> 标签：msbuild

我将属性 MSBuildProjectDirectory 与 MSBuild 一起使用。

该项目位于：

> C:\Program 文件 (x86)\Jenkins\workspace\MyProject

在构建期间 MSBuildProjectDirectory 被评估为：

> C:\Program Files %28x86%29\Jenkins\workspace\MyProject

我收到“系统找不到指定的文件”错误。

我需要移动到不同的文件夹还是可以获得正确的路径？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-22T16:56:32.413

如果您使用的是 Visual Studio 2010 / MSBuild 4.0，则某些包含括号的属性会发生这种情况。微软承认，在使用 MSBuild 4.0 时，这是从 VS2008 到 VS2010 的回归错误： [http ://connect.microsoft.com/VisualStudio/feedback/details/532677/msbuild-4-0-usingtask-cannot-have-a-带括号的路径](http://connect.microsoft.com/VisualStudio/feedback/details/532677/msbuild-4-0-usingtask-cannot-have-a-path-with-parentheses)

根据上面的链接，以下有括号问题：

*   使用任务
*   MsBuildProjectDirectoryNoRoot
*   MsBuild项目目录
*   MsBuildProjectFullPath

**解决**方法：目前，在使用 MSBuild 4.0 时，将位置更改为不包含括号的路径。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-03-21T15:10:57.533

采用

$([MSBuild]::Unescape('$(MSBuildProjectDirectory)'))

代替

$(MSBuildProjectDirectory)

# c++ - clang：如何启用 ext_vector_type 的向量构造函数

> ID：15573554
> 
> 赞同：3
> 
> 时间：2013-03-22T15:02:07.020
> 
> 标签：c++, clang

xcode 使用 clang，因此您可以使用像

```
typedef float float4 __attribute__((ext_vector_type(4))); 
```

当我使用初始化向量时

```
float4 v = (float4)(1.0f, 2.0f, 3.0f, 4.0f); 
```

那么所有 4 个组件都是 4.0。是否有可能在 xcode 中启用 clang 的向量构造函数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-12T20:49:19.853

问题在于，使用 C（和 C++）语法，当你这样做时`(x, y, z, w)`，[逗号操作符](http://en.wikipedia.org/wiki/Comma_operator)使得你得到的只是`4.0f`. 当分配给 a`float4`时，它变成一个所有组件都设置为 的向量`4.0f`。

使用方括号代替圆括号，如下所示：

```
float4 v = {1, 2, 3, 4}; 
```

这将为您提供一个 x=1、y=2、z=3 和 w=4 的向量。

# php - 如何在 Zend_Acl 中允许不存在的权限？

> ID：15573555
> 
> 赞同：2
> 
> 时间：2013-03-22T15:02:09.190
> 
> 标签：php, zend-framework, acl, privileges, blacklist

我正在使用 ZF 1.12.2，我想为我的 Zend_Acl 权限创建一个黑名单，因为我的限制比允许的要少。我的 ACL 资源名称基于我的控制器名称，我的权限基于我的控制器操作名称。

现在，我拒绝这样的特权：

```
$acl->deny('user', null, 'User::login'); 
```

当我向我的用户控制器添加操作时，我希望用户角色被隐式授予对它们的访问权限，除非我明确拒绝它们。所以，如果我在我的用户控制器上添加一个编辑操作，我不必这样做：

```
$acl->allow('user', null, 'User::edit'); 
```

默认情况下，`Zend_Acl::isAllowed`如果权限不存在则返回 false。除非我在调用父级之前对它们进行子类化并存储它们，否则也很难知道添加了哪些特权。我一直在尝试破译`Zend_Acl::$_rules`，因为我认为它适合我的需要，并且我可以避免子类化。是否允许不存在的特权通过`Zend_Acl::isAllowed`？

**更新：** 现在，我的工作子类方法`My_Acl::isAllowed`如下。 `My_Acl::__construct`接受一个数组配置，其中包含要添加的嵌套权限/资源的角色。

```
public function isAllowed($role = null, $resource = null, $privilege = null)
{
    if (null !== $resource) {
        if (is_string($resource)) {
            $resource_id = $resource;
        } else {
            $resource_id = $resource->getResourceId();
        }

        if (!in_array($resource_id, array_keys($this->_resources))) {
            return true;
        }
    }

    if (null !== $privilege) {
        if (!in_array($privilege, array_keys($this->_privileges))) {
            return true;
        }
    }

    return parent::isAllowed($role, $resource, $privilege);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T14:04:13.403

您的方法中有太多检查`isAllowed`，使事情变得复杂

如果您不使用模块化方法 (HMVC)，则应使用第二个参数，`isAllowed(role, resource, privilege)`可以将控制器用作第二个参数，将操作用作第三个参数，如下所示：`$acl->allow('user', 'user', 'edit');`

如果您遵循这种方法，您将需要将控制器添加为资源

```
//user controller as resource.
$this->add(new Zend_Acl_Resource('user')); 
```

定义任意资源：`nullresources`

```
// any resource
$this->add(new Zend_Acl_Resource('nullresources'));       

$this->addRole(new Zend_Acl_Role('guest')); // guest role - no login (it's good to have something like this)

$this->allow('guest', 'nullresources'); 
```

如果您添加任意资源： `nullresources`您可以跳过 isAllowed 中的一些步骤。

```
 /**
   *
   * @param string $role
   * @param string $resource (module name)
   * @param String $privilege (controller name: action name)
   * @return Boolean
   */
  public function isAllowed($role = null, $resource = null, $privilege = null)
  {
      /**
       *  by default, undefined resources are allowed to all
       */
      if (!$this->has($resource)) {
          $resource = 'nullresources';
      }
      return parent::isAllowed($role, $resource, $privilege);
  } 
```

如果您遵循这种方法，您应该能够以这种方式使用它：

```
$acl->allow('user', 'user');
$acl->deny('user', 'user', 'login'); 
```

**编辑：**

您还需要更改您进行检查的位置，即引导程序或某些插件，如果您使用插件，这里是一个示例类

```
<?php 
class My_Acl_AccessCheck extends Zend_Controller_Plugin_Abstract
{
    private $_acl = null;

    public function __construct(Zend_Acl $acl)
    {
        $this->_acl = $acl;
    }

    public function preDispatch(Zend_Controller_Request_Abstract $request)
    {            
        /**
         * get controller name
         * @var String $controller
         */
        $controller = $request->getControllerName();
        /**
         * get action name
         * @var String $action
         */
        $action = $request->getActionName();
        /**
         * getting the role from the registry and defining some
         * role for the null character as guest makes authentication more flexible
         * if the roles is not allowed to use the resource then the user is
         * redirected to action notAllowed of controller user
         *
         * Parameter passed for isAllowed: role, ControllerName, ActionName             
         */
        if(!$this->_acl->isAllowed(Zend_Registry::get('role'), $controller, $action))
        {
            $request->setModuleName('default')
                    ->setControllerName('user')
                    ->setActionName('notAllowed');
        }        

    }
} 
```

在`bootstrap`

```
 $this->_acl = new My_Acl();
    $frontController = Zend_Controller_Front::getInstance();
    $frontController->registerPlugin(new My_Acl_AccessCheck($this->_acl)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T06:29:05.870

我不是 ACL 方面的专家，但据我了解，您可以根据需要`allow()`全部`deny()`使用。

```
//user can do all, by not specifying resources or privileges, all is allowed
$acl->allow('user');

//explicitly deny specific resources and privileges
$acl->deny('user', null, 'User::login'); 
```

请注意应用的任何继承，因为这可能会导致意外行为。

希望这可以帮助。

# python - 在python中使用特征库函数调用C++

> ID：15573557
> 
> 赞同：16
> 
> 时间：2013-03-22T15:02:14.290
> 
> 标签：python, c++, matrix, eigen, python-c-api

我在 Eigen Library 的帮助下用 C++ 做一些计算，函数是这样的：

```
MatrixXd Cov(MatrixXd Data)
{

  VectorXd meanVector;
  ...
  return Covariance;
} 
```

..在 wrap python 函数中：

```
static PyObject *Wrap_Cov(PyObject *self,PyObject *args)
{   
      Pyobject *Objectdata;

      if(!PyArg_ParseTuple(args,"O", &ObjectData))
        return NULL;

      Cov(ObjectData);

      return Py_BuildValue("O",&covariance_answer);

  } 
```

显然，Python不知道我定义的''object''，它不能将''MatrixXd''翻译成''Object''，我认为它是某种''array''，而不是''object' '

在不使用 boost 的情况下如何做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-07-24T17:06:09.900

如果连接用不同语言编写的数字模块，最好保持数据交换尽可能平坦。

libeigen 实矩阵的最平坦表示是实数类型的 ac 数组（浮点数或双精度数）

这是一个 C++¹ 示例

* * *

```
#include <stdexcept>
#include <iostream>
#include <string>
#include <sstream>
#include <python2.7/Python.h>
#include <eigen3/Eigen/Dense>

using std::size_t;
typedef double real_t;

typedef Eigen::Matrix<real_t, Eigen::Dynamic, Eigen::Dynamic> 
        Matrix;

static PyObject* p_eigen_python_error(NULL);

static PyObject *
randomDxDMatrix(PyObject *self, PyObject *args) {
    PyObject* p(NULL);
    PyObject* item(NULL);    

    try{
        size_t d(0);

        PyArg_ParseTuple(args, "L", &d);
        Matrix M = Matrix::Random(d,d);

        size_t length = d * d;

        p = PyList_New(length);

        if (p == NULL) {
            std::stringstream msg;
            msg << "Could not allocate a Pylist of "
                << d << "x" << d << " = " << d*d 
                << " size for the return Object";
            throw std::runtime_error(msg.str().c_str());
        } else {
            for (size_t i = 0; i < length; ++i) {
                item = PyFloat_FromDouble(M.data()[i]);
                PyList_SET_ITEM(p, i, item);
            }   
        }

    } catch (const std::exception& e) {
        delete p; p = NULL;
        delete item; item = NULL;

        std::string msg = ("randomDxDMatrix failed: ");
        msg += e.what();
        PyErr_SetString(p_eigen_python_error, msg.c_str());
    }

    return p;
}

static PyMethodDef EigenMethods[] = {
    {"randomDxDMatrix",  randomDxDMatrix, METH_VARARGS, 
    "Gets a random DxD matrix column-major as a list of (python) floats"},
    {NULL, NULL, 0, NULL}        /* Sentinel */
};

PyMODINIT_FUNC
initeigen_python(void) {

    PyObject* p;

    p = Py_InitModule("eigen_python", EigenMethods);
    if (p == NULL)
        return;

    p_eigen_python_error = PyErr_NewException(
                                const_cast<char*>("eigen_python.error"), 
                                NULL, NULL
                            );
    Py_INCREF(p_eigen_python_error);
    PyModule_AddObject(p, "error", p_eigen_python_error);
} 
```

* * *

这是 setup_eigen_python.py

* * *

```
from distutils.core import setup, Extension

cpp_args = ['-Wall', '-pedantic']
cxx_args = ['-std=c++11'].extend(cpp_args)

module_eigen_python = Extension('eigen_python',
                          define_macros = [('MAJOR_VERSION', '0'),
                                            ('MINOR_VERSION', '1')],
                          include_dirs = ['/usr/local/include'],
                          sources = ['eigen_python.cpp'],
                          extra_compile_args = cpp_args
#                          sources = ['eigen_python.cxx'],
#                          extra_compile_args = cxx_args
                      )

setup (name = 'eigen_python',
       version = '0.1',
       description = 'This is just a demo',
       author = 'Solkar',
       url = 'http://stackoverflow.com/questions' 
         + '/15573557/call-c-using-eigen-library-function-in-python',
       long_description = 'just a toy',
       ext_modules = [module_eigen_python]) 
```

* * *

像这样使用

```
python2.7 setup_eigen_python.py install --user 
```

这是一个小测试驱动程序

* * *

```
import eigen_python as ep
import numpy as np

DIM = 4

M = np.array(ep.randomDxDMatrix(DIM), order="F")
M.shape= DIM,DIM

print(M) 
```

* * *

¹特别是，但到目前为止不限于，因为必须在没有提升的情况下相处，会更喜欢使用 C++ 2011 标准的功能`auto`，`std::unique_ptr`但我不知道 QO 是否对此有足够的支持。

# .net - 从 Java EE 服务器向 .net 客户端进行高性能推送的最佳机制

> ID：15573559
> 
> 赞同：0
> 
> 时间：2013-03-22T15:02:27.910
> 
> 标签：.net, sockets, jakarta-ee, jboss

我们有一个系统，其中包含一个 Java EE 服务器 (JBoss)，它需要定期将数据推送到 .Net Windows 应用程序（厚客户端）。性能至关重要 - 数据量很大，需要按秒更新。所有客户端都在本地 LAN 上。

当然，在套接字级别这样做是最自然的解决方案。但是谁愿意在 2013 年从事套接字级别的工作呢？

JMS 再次出现，这是 Windows。

顺便说一句，客户端将通过 RESTful 接口从服务请求数据。但这对推动不起作用。

如果客户端是浏览器，我们将使用 Web Sockets，所以原始 TCP 可能不是一个坏主意。这并不困难。但是，我想探索所有可能性，因此欢迎提出建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T19:04:15.070

如果您想从 JBoss 连接到 C# 应用程序，您仍然可以使用消息队列，只需选择一个同时具有 C# 和 Java（不一定是 JMS）绑定的消息队列，然后将 C# 应用程序配置为定期读取队列，或者消息到达时通知，然后 JBoss 服务器也会将消息推送到队列中

# r - 为列表中的所有元素添加一个值 (R)

> ID：15573560
> 
> 赞同：2
> 
> 时间：2013-03-22T15:02:32.323
> 
> 标签：r, list, addition

我有一个这样的列表：

```
a = list('bla'=c(0,1,2,3)) 
```

我想给每个元素加 1 所以

```
> a['bla']
$bla
[1] 1 2 3 4 
```

当然

```
> a['bla']+1 
```

不工作...

帮助？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-22T15:04:08.843

你需要双括号：

```
a[['bla']]+1 
```

比较：

```
R> a["bla"]
$bla
[1] 0 1 2 3 
```

和

```
R> a[["bla"]]
[1] 0 1 2 3 
```

正如 Dason 指出的那样，您需要双括号的原因是，在对列表进行操作时，单括号会返回一个包含您要求的元素的列表，而双括号会返回元素本身。您不能直接在列表上使用算术运算符，因此当您使用单括号时，您会得到一个列表，并且它不知道如何将“1”添加到列表中。

访问列表元素的其他方法是：

*   指数：`a[[1]]`
*   双倍的：`a$bla`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T15:04:40.777

您可以使用美元符号按名称访问列表元素：

```
R> a$bla+1
[1] 1 2 3 4 
```

# javascript - javascript防止复制/粘贴超出文本区域中的字符限制

> ID：15573561
> 
> 赞同：3
> 
> 时间：2013-03-22T15:02:36.127
> 
> 标签：javascript, textarea

我有以下代码（从[这个问题](https://stackoverflow.com/questions/5533053/textarea-character-limit/13576177#comment12927853_5607015)中提取）用于设置文本区域的字符限制。

```
function maxLength(el) {    
    if (!("maxLength" in el)) {
        var max = el.attributes.maxLength.value;
        el.onkeypress = function () {
            if (this.value.length >= max) return false;
        };
    }
}

var maxtext = document.getElementsByClassName("maxtext");

for (var i = 0; i < maxtext.length; i++) {
    maxLength(maxtext[i]);
} 
```

还有一个我的文本区域的 html 示例：

```
<textarea maxlength="150" class="maxtext"></textarea> 
```

这一切都在 Firefox 和 Chrome 中运行良好。在 IE7+ 中，如果我输入到限制，它会阻止我，但我可以不受限制地复制/粘贴文本。

有什么方法可以修改此脚本以防止复制/粘贴超出最大字符限制？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-22T15:10:12.347

监听[`onpaste`](https://developer.mozilla.org/en-US/docs/DOM/element.onpaste)事件。一旦事件触发，从[剪贴板](https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsIClipboard)中抓取文本并按照您的喜好进行操作。

**HTML**

```
<textarea id="test" maxlength="10" class="maxtext"></textarea> 
```

**JAVASCRIPT**

```
var test = document.getElementById("test");

test.onpaste = function(e){
    //do some IE browser checking for e
    var max = test.getAttribute("maxlength");
    e.clipboardData.getData('text/plain').slice(0, max);
}; 
```

[**例子**](http://jsfiddle.net/ChaseWest/pTbwW/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T15:09:41.417

您可以收听`onchange`事件以检查内容长度，如果超过限制则减去它。

# visual-studio-2010 - 我们在将 TFS 工作区连接到 Visual Studio 2008、2010、2012 版本时遇到问题。我们收到“路径……已映射到工作区”问题

> ID：15573562
> 
> 赞同：0
> 
> 时间：2013-03-22T15:02:40.730
> 
> 标签：visual-studio-2010, visual-studio-2008, tfs, source-control-explorer

这是我们正在尝试做的事情：

在一个 TFS 集合中，我们建立了一个 TFS 项目“BuildBusinessWebsite”。对于这个项目，我们将拥有 .Net 解决方案、SQL Server Reporting Services (SSRS) 报告和 SQL Server Integration Services (SSIS) 包。（我必须对所有三个进行开发。）我们选择在源代码管理资源管理器中设置这样的文件夹结构，每个目录文件夹中都有解决方案和代码：

建立商业网站

发展

```
 Application
    SSRS
    SSIS
Test
    Application
    SSRS
    SSIS
Production
    Application
    SSRS
    SSIS 
```

现在，我们目前正在使用 Visual Studio 2008 开发 SSRS 报告和 SSIS 包，并且该应用程序正在 Visual Studio 2010 中开发。当您将第二个 Visual Studio 2010 环境连接到同一工作目录（本地路径：未映射）时，您收到错误“路径……已映射到工作区……”问题，因为它已映射到 Visual Studio 2008 目录。我需要将两个环境映射到同一个目录，因为我不想让我的机器上的多个目录使用“获取最新”保持最新。我目前也在测试迁移到 Visual Studio 2012，它还要求我为 TFS 映射另一个位置。我目前的工作是创建另一层文件夹映射，如 C:\TFS2008、C:\TFS2010 和 C:\TFS2012，每个文件夹结构都在上面。

与上述相关的第二个问题是分支和合并：如果有某种方法可以解决上述问题，那么这个问题没有实际意义，但是，当从源代码管理中拉下上面的文件夹并且您正在使用分支和合并时，分支和合并prod、test 和 dev 之间的连接似乎并非来自 TFS。它们似乎在我的工作区和机器上。考虑到上面的示例，我在 Visual Studio 2010 中将应用程序从生产分支到测试并测试到开发，当我使用 Visual Studio 2012 时，将源代码管理资源管理器映射到我硬盘上的另一个位置，然后“获取最新”......下来我失去了我的分支和合并不得不重新设置它们。有没有更好的方法来设置它？

提前感谢大家阅读本文，您可能会有的想法将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T15:24:12.647

TFS 工作区由以下各项唯一标识：

*   工作区名称
*   工作区所有者（AD 帐户名称）
*   计算机名称（它所在的计算机）
*   它所在的团队项目集合

工作区映射应该与您正在工作的“环境”无关。您应该使用[TF Admin 命令](http://msdn.microsoft.com/en-us/library/y901w7se%28VS.100%29.aspx)创建工作区或转到 Visual Studio 中的 File->Source Control->Advanced->Workspaces... . 此外，仅创建 1 个工作区并在根文件夹中执行此操作。

# python - 如何使用 Mock 从导入的模块中修补“打开”

> ID：15573569
> 
> 赞同：2
> 
> 时间：2013-03-22T15:03:02.927
> 
> 标签：python, unit-testing, mocking, monkeypatching

我正在为我拥有的模块编写一些单元测试。我需要修补`open`，所以当测试模块内的函数调用`open`模拟时，使用模拟而不是真实的`open`.

此代码有效，但我认为它会破坏另一个测试，因为没有恢复`open`到其原始值：

```
class TestCases(unittest.TestCase):
    def test_something(self):
        from amodule import bmodule

        open_mock = mock.MagicMock(spec=open)
        bmodule.__builtins__['open'] = open_mock
        read_mock = mock.MagicMock()
        open_mock.return_value.__enter__.return_value = read_mock

        self.assertTrue(bmodule.some_function())
        self.assertEqual(open_mock.call_args_list, ['filename1', 'filename2']) 
```

我怎样才能做到这一点`mock.patch`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T15:42:38.903

您可以在 bmodule 本身中对其进行修补，而不是monkeypatching `open`in 。`__builtins__`这样做的好处是只有 bmodule 中的函数才能获得修补后的打开函数。您可以在[模拟文档](http://www.voidspace.org.uk/python/mock/patch.html#where-to-patch)中看到更多详细信息。

`patch.object`因此，您可以使用上下文管理器来放置您的 open 版本：

```
from mock import patch
class TestCases(unittest.TestCase):
    def test_something(self):
        from amodule import bmodule

        open_mock = mock.MagicMock(spec=open)
        read_mock = mock.MagicMock()
        open_mock.return_value.__enter__.return_value = read_mock
        with patch.object(bmodule, 'open', open_mock, create=True):
            self.assertTrue(bmodule.some_function())
        self.assertEqual(open_mock.call_args_list, ['filename1', 'filename2']) 
```

with 语句保证当执行离开 with 块时补丁将被删除。需要该`create=True`部分来说服您确实打算`open`在命名空间中创建绑定的补丁`bmodule`- 这是一种安全预防措施，可防止人们意外地嘲笑错误的名称，但在您的情况下，它是必需的，因为 open 存在`__builtins__`但您想绑定它在`bmodule`.

# parsing - 无法解析收到的数组中的数据，感谢 FQL 查询

> ID：15573571
> 
> 赞同：0
> 
> 时间：2013-03-22T15:03:07.433
> 
> 标签：parsing, facebook-fql

从使用 fql 查询获得的数组中获取数据时出现问题。我收到的数据具有以下结构：

```
{
  "data": [
    {
      "name": "Just Café Pacini",
      "can_post": true,
      "page_id": 401836073222759,
    },``
    {....},
    {....},
]
} 
```

我正在使用 php SDK，并且正在尝试接收有关多个页面的一些信息。我`foreach($ret_obj['data'] as $single_obj)`像往常一样尝试过，但 php 告诉我没有索引“数据”。

我确定 facebook 不会返回任何错误。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-23T09:17:12.940

首先你必须调用 json_decode($ret_obj) 来获取一个 php 数组然后你可以调用 foreach 来迭代

# html - 更改浏览器大小时 .. 一个 DIV 落后于另一个

> ID：15573573
> 
> 赞同：1
> 
> 时间：2013-03-22T15:03:27.720
> 
> 标签：html, behind

当我更改浏览器窗口的大小时，一个`div`会落后于另一个。两者`divs`在同一个容器中。

请看下图：http: [//img833.imageshack.us/img833/9394/ffffhb.jpg](http://img833.imageshack.us/img833/9394/ffffhb.jpg)

我怎样才能解决这个问题？
这是两个 div 容器的 HTML 代码：

```
 <div class="hero-unit">

 <div id="this-carousel-id" class="carousel slide">
 <div class="carousel-inner">
 <div class="item next left">
 <a href="http://hubblesite.org/gallery/album/entire/pr2006046a/xlarge_web/npp/128/"> <img src="img/antennae.jpg" alt="Antennae Galaxies" width="532" height="238"> </a>

 </div>
 <div class="item">
 <a href="http://hubblesite.org/gallery/album/entire/pr2007016e/xlarge_web/npp/128/"> <img src="img/carina.jpg" alt="Carina Caterpillar" width="532" height="238"> </a>

 </div>
 <div class="item">
 <a href="http://hubblesite.org/gallery/album/entire/pr2003010i/npp/128/"> <img src="img/echo.jpg" alt="Light Echo" width="532" height="238"> </a>

 </div>
 <div class="item active left">
 <a href="http://hubblesite.org/gallery/album/entire/pr2006024a/xlarge_web/npp/128/"> <img src="img/ngc5866.jpg" alt="Galaxy NGC5866" width="532" height="238"> </a>

 </div>
 </div>

 <a class="carousel-control left" href="#this-carousel-id" data-slide="prev">‹&lt;/a>
 <a class="carousel-control right" href="#this-carousel-id" data-slide="next">›&lt;/a>
 </div>

 <video width="440" height="320" controls="controls">
 <source src="insane.MP4" type="video/mp4">
 </video>

 </div> 
```

这是CSS代码：

```
/*container*/
.hero-unit {
padding: 60px;
position: relative;
margin-bottom: 30px;
-webkit-border-radius: 6px;
-moz-border-radius: 6px;
height: 100px;
margin-top: 50px;
border-radius: 6px;
}

/*slider*/
.carousel {
position: absolute;
top: 0;
left: 0;
margin-top: 6px;
margin-bottom: 0 auto;
height: 260px;
line-height: 1;
}

/*slider-inner*/
.carousel-inner {
position: relative;
width: 100%;
height: 220px;
overflow: hidden;
width: 520px;
width: %;
}

/*video*/
.hero-unit video {
height: 210;
margin-top: 5px;
z-index: 1;
} 
```

# c# - 如何使用带有 button.Image 的流式阅读器

> ID：15573574
> 
> 赞同：-2
> 
> 时间：2013-03-22T15:03:29.893
> 
> 标签：c#, streamreader, streamwriter

编辑： map[][] 充满了按钮

主要问题是 .image 似乎无法保存。我想做一个加载，当我在每个地图[i][j]中加载它时，它会恢复它以前的状态。一切似乎都适用于 .image

```
FileStream file = new FileStream(@""+AppDomain.CurrentDomain.BaseDirectory+ "\\objects\\savegame"+spacing+".sav", FileMode.Create, FileAccess.ReadWrite);

StreamWriter sw = new StreamWriter(file);
        for (Int32 i = 0; i <columns; i++)
        {
            for (Int32 j = 0; j < columns; j++)
            {
                sw.WriteLine(map[i][j].Enabled);
                sw.WriteLine(map[i][j].Enabled);
                sw.WriteLine(map[i][j].Image);
                sw.WriteLine(map[i][j].Tag);
                sw.WriteLine(map[i][j].Text);
                sw.WriteLine(map[i][j].Name);
                sw.WriteLine( map[i][j].Height);
                sw.WriteLine(map[i][j].Width);
            }
        } 

FileStream file = new FileStream(@"" + AppDomain.CurrentDomain.BaseDirectory + "\\objects\\savegame" + spacing + ".sav", FileMode.Create, FileAccess.ReadWrite);
    StreamReader sr = new StreamReader(file);  
for (Int32 i = 0; i < columns; i++)
    {
        for (Int32 j = 0; j < columns; j++)
        {
            map[i][j].Enabled = Convert.ToBoolean(sr.ReadLine());
            map[i][j].Image = Convert.ToString(sr.ReadLine());// this is the problem
            map[i][j].Tag = Convert.ToString(sr.ReadLine());
            map[i][j].Text = Convert.ToString(sr.ReadLine());
            map[i][j].Name = Convert.ToString(sr.ReadLine());
            map[i][j].Height = Convert.ToInt32(sr.ReadLine());
            map[i][j].Width = Convert.ToInt32(sr.ReadLine());
        }
    }
sr.Close();
}

//Sample location for the image --->map[i][j].Image = Image.FromFile(AppDomain.CurrentDomain.BaseDirectory + "objects\\map\\mapgrass" + spacing + ".png"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T15:18:43.270

我不太了解您的问题，但我可以看到一个错误：请不要忘记在`Close`您的流中写入，并将您的代码放入`using`块中。

```
using(StreamWriter sw = new StreamWriter(file))
{
    for (Int32 i = 0; i <columns; i++)
    {
    .....
    }

    sw.Close();
} 
```

**更新：**

如果使用`WriteLine(map[i][j].Image)`，系统实际调用`WriteLine(map[i][j].Image.ToString())`返回 Image 类的名称。如果你想保存任何有用的信息，你必须放在那里`map[i][j].Image.something`或`map[i][j].whatever_useful`。图像是一个二进制对象 - 通常是位图图片，您不能将其作为一个整体保存到文本文件中并从中加载回来。

# c# - ListView 跳到顶部 (ISupportIncrementalLoading)

> ID：15573576
> 
> 赞同：2
> 
> 时间：2013-03-22T15:03:36.603
> 
> 标签：c#, xaml, listview, windows-store-apps

我已经`ListView`绑定到一个`ObservableCollection`that implements `ISupportIncrementalLoading`。但是，当通过跳转到列表顶部将`LoadMoreItemsAsync()`新项目添加到集合中时，一切都运行良好。`ListView`

`ListView`当然应该从当前位置进行滚动。有什么想法可能是错的吗？

更新：

没有选定的项目，并且一次添加一个项目，即：添加 10 个项目会导致 10 个集合更改事件。它不应该是更新后列表中的最后一个项目，而是第一个更新的项目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T15:07:48.857

```
list.ScrollIntoView(i); 
```

其中 i 是第 i 个选定项目。

# c# - 如何在 C# 中访问 UI 线程

> ID：15573584
> 
> 赞同：1
> 
> 时间：2013-03-22T15:03:54.013
> 
> 标签：c#, multithreading, windows-phone-8, begininvoke

我正在尝试访问 Windows phone 8 的 C# 中的 UI 线程。到目前为止，我得到了这个。但是，一旦它运行`SmartDispatcher`，它就会跳转到 finally `receipt == null`。

我从这个网站（[http://www.jeff.wilcox.name/2010/04/propertychangedbase-crossthread/](http://www.jeff.wilcox.name/2010/04/propertychangedbase-crossthread/)）得到了 SmartDispatcher 类。我想知道其他人是否有这个问题以及如何解决它。

```
private async void purchaseProduct()
        {       
            try{
                li = await Store.CurrentApp.LoadListingInformationAsync();

                SmartDispatcher.BeginInvoke(async delegate()
                {
                    receipt = await Store.CurrentApp.RequestProductPurchaseAsync(package_id, true);
                });

            }    
            catch 
            { 
                DispatchCommandResult(new PluginResult(PluginResult.Status.ERROR)); 
            }
            finally
            {
                if(receipt != null)
                {
                    parseXML(package_id);
                    prepData();
                    httpPostData();
                    Store.CurrentApp.ReportProductFulfillment(package_id);
                }
            }
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T15:21:43.017

当然，它会立即跳转到那里，因为您正在开始一个异步操作，该操作不会阻塞，而是立即返回。
看，如果对象包含一个方法`Invoke`而不是`BeginInvoke`. `Invoke`将阻塞直到操作完成。

请参阅[此](https://stackoverflow.com/questions/229554/whats-the-difference-between-invoke-and-begininvoke)线程作为参考。

# jenkins - Jenkins - 更新构建状态的 API

> ID：15573586
> 
> 赞同：2
> 
> 时间：2013-03-22T15:04:02.140
> 
> 标签：jenkins

我正在使用 Jenkins 来构建我的项目。构建完成后，将下载并测试产品。我想通知 Jenkins 构建已经过测试，然后通知它测试结果。我希望一旦 jenkis 创建了构建，就可以下载它，但是会有一条消息，例如“构建已测试”或“测试通过/失败”。上传包含此类信息的文件也可以。

詹金斯可以吗？

我不想将我的测试集成到 jenkins 构建过程中：它们花费的时间太长并且使用了太多的资源（并且必须在具有专用环境的单独机器上进行）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T16:54:10.787

您可以在构建作业上设置 2 个促销。调用一个“测试通过”和另一个“测试失败”。

促销活动将为各个构建添加不同颜色的“星”图标，以指示已执行哪些促销活动。无论升级状态如何，所有构建工件下载和其他构建信息都可用。

如果您将手动“通知”Jenkins，您只需要手动执行促销。您还可以访问上一个成功提升的构建工件的永久链接，例如`http://[JENKINS_URL]/job/[JOB_NAME]/[PROMOTION_NAME]/artifact`

如果您希望您的测试过程自动通知 Jenkins，您需要通过向网页发送调用来触发它。您可以使用 CURL 来请求`http://[JENKINS_URL]/job/[JOB_NAME]/[JOB_NUMBER]/Promotion/[PROMOTION_NAME]/build`. 当然，您需要知道您尝试标记以进行升级的构建编号。或者，您可以使用“上次成功”固定链接，例如`http://[JENKINS_URL]/job/[JOB_NAME]/lastBuild/promotion/[PROMOTION_NAME]/build`

# d3.js - 在 D3 图表周围创建边框

> ID：15573594
> 
> 赞同：19
> 
> 时间：2013-03-22T15:04:22.530
> 
> 标签：d3.js

所以我刚刚开始了我的 D3 之旅，想问一下如何在图表周围创建一个 1px 的小边框。

我创建了变量“border”和“bordercolor”，然后将 .attr("border",border) 添加到代码的 var svg = d3.select("body") 部分。它不会崩溃，但我也没有边界。

我想问题是我如何添加这个边框，如果有人能解释为什么我做错了。

```
<script type="text/javascript">
    //Width and height
    var w = 800;
    var h = 400;
    var padding = 20;
    var border=1;
    var bordercolor='black';

    var dataset = [
                    [5, 20], [480, 90], [250, 50], [100, 33], [330, 95],[-50,-100],[50,-45],
                    [410, 12], [475, 44], [25, 67], [85, 21], [220, 88],[-480, 90], [3,-90]
                  ];

        // create scale functions
        var xScale = d3.scale.linear()
                         .domain([d3.min(dataset, function(d) { return d[0]; }), d3.max(dataset, function(d) { return d[0]; })])
                         .range([padding, w - padding * 2]);

    var yScale = d3.scale.linear()
                         .domain([d3.min(dataset, function(d) { return d[0]; }), d3.max(dataset, function(d) { return d[1]; })])
                         .range([h - padding, padding]);

        var rScale = d3.scale.linear()
        .domain(  [-100,      d3.max(dataset, function(d) { return d[1];            })]   )
        .range([2,5]);

    //Create SVG element
    var svg = d3.select("body")
                .append("svg")
                .attr("width", w)
                .attr("height", h)
                .attr("border",border)
                ;

    svg.selectAll("circle")
       .data(dataset)
       .enter()
       .append("circle")
       .attr("cx", function(d) {
            return xScale(d[0]);
       })
       .attr("cy", function(d) {
            return yScale(d[1]);
       })
       .attr("r", 3);

    svg.selectAll("text")
   .data(dataset)
   .enter()
   .append("text")
    .text(function(d) {
        return d[0] + "," + d[1];
   })
   .attr("x", function(d) {
        return xScale(d[0]);
   })
   .attr("y", function(d) {
        return yScale(d[1]);
   })
    .attr("font-family", "sans-serif")
   .attr("font-size", "11px")
   .attr("fill", "red");
</script> 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2014-07-26T21:32:27.403

使用 style 属性在 svg 周围放置轮廓：

```
 //Create SVG element
    var svg = d3.select("body")
             .append("svg")
             .attr("style", "outline: thin solid red;")   //This will do the job
             .attr("width", w)
             .attr("height", h); 
```

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2013-03-22T16:00:47.573

svg var 只是一个容器。您需要向容器中添加路径或元素，然后为其提供您想要的边框颜色和宽度。有不止一种方法可以做到这一点。[在这个要点](http://bl.ocks.org/andrewStaroscik/5222370)中，我通过添加具有以下值的矩形来做到这一点：

```
 var borderPath = svg.append("rect")
  .attr("x", 0)
  .attr("y", 0)
  .attr("height", h)
  .attr("width", w)
  .style("stroke", bordercolor)
  .style("fill", "none")
  .style("stroke-width", border); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-05-13T09:24:44.717

恕我直言，最好将*形状*与*样式*说明分开：

```
.append("rect")
.attr("x", 5)
.attr("y", 5)
.attr("height", 40)
.attr("width", 50)
.attr("class","foo")
... 
```

CSS：

```
svg rect.foo {
  fill: white;
  stroke-width: 0.5;
  stroke: grey;
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-03-31T14:48:21.657

只需使用 css：

```
svg {
  border:1px solid black;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-12-19T11:30:05.867

如果使用 X 和 Y 轴，其他选项是使用 tickSizeOuter() 示例：

```
var yAxis = d3.axisLeft(y).ticks(5).tickSizeOuter(-width);
var xAxis = d3.axisBottom(x).ticks(5).tickSizeOuter(-height); 
```

# c# - asp.net filehelpers 直接将文件写入客户端

> ID：15573598
> 
> 赞同：3
> 
> 时间：2013-03-22T15:04:31.497
> 
> 标签：c#, asp.net, filehelpers

我将 FileHelpers 库用于 C# .net 项目。一切正常，除了我需要通过单击按钮来保存生成的 CSV。

因此，用户单击一个按钮，他们会收到保存文件的提示。我知道 Filehelpers 有一个 WriteStream 选项，但他们自己的文档只显示了 WriteFile 的一个示例。我不知道 WriteStream 是否是需要的，但我认为它是。

任何人都知道是否可以将 CSV 文件直接保存到客户端而不是服务器硬盘？

谢谢。

**更新更多细节：**

我将尝试提供更多细节以帮助澄清我想要实现的目标。我不想在服务器上保存任何文件。我正在使用 FileHelpers 生成记录，我想尝试使用他们的 WriteStream 方法将该记录作为 CSV 直接写入他们的浏览器；但奇怪的是，他们提供的示例实际上根本没有使用该方法。

这是他们方法的链接：

[http://www.filehelpers.com/FileHelpers.FileHelperEngine.WriteStream_overload_2.html](http://www.filehelpers.com/FileHelpers.FileHelperEngine.WriteStream_overload_2.html)

这是有问题的方法。

```
public void WriteStream(
   TextWriter writer,
   IEnumerable records,
   int maxRecords
); 
```

我可以轻松地将文件保存到服务器上，但我不想这样做，因为我不需要它并且想让客户端将它直接保存到他们自己的机器上。

可能是我必须通过正常的途径来实现这一点，但我看到了 WriteStream 方法，并认为 FileHelpers 可能促进了一种很好的干净方式来实现相同的结果。

希望这更清楚。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T15:17:41.170

您应该能够执行以下操作：

```
Response.ContentType = @"application/x-msdownload";
Response.AppendHeader("content-disposition", "attachment; filename=" + FILE_NAME);

Response.Write(csv.ToString());
Response.Flush();
Response.End(); 
```

StackOverflow 上有很多更详细的建议，例如[这个](https://stackoverflow.com/a/5605490/1077279)。这取决于您要达到的目标。

**编辑**

我认为您缺少的步骤是：

```
MemoryStream stream = new MemoryStream();
StreamWriter streamWriter = new StreamWriter(stream);
engine.WriteStream(streamWriter, records);
stream.Position = 0; 
```

然后你可以使用

```
StreamReader reader = new StreamReader(stream);
Response.Write(reader.ReadToEnd); 
```

而不是`Response.Write(csv.ToString())`我上面的第一个例子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-23T07:29:43.120

不要忘记**刷新**StreamWriter。查看示例

```
public MemoryStream CreateCsvFileAsMemoryStream(List<TestItem> testItems) {
        var engine = new FileHelperEngine<TestItemCsvMapping>();
        var items = testItems.Select(ti => (TestItemCsvMapping)ti).ToList();

        engine.HeaderText = engine.GetFileHeader();
        var ms = new MemoryStream();
        var sw = new StreamWriter(ms);
        engine.WriteStream(sw, items);
        sw.Flush();

        //var reader = new StreamReader(ms);
        //ms.Position = 0;
        //Console.Write(reader.ReadToEnd());

        ms.Position = 0;

        return ms;
    } 
```

# vb.net - 在我的 if 语句中的 else 部分我有这个错误请告诉我如何解决它

> ID：15573603
> 
> 赞同：1
> 
> 时间：2013-03-22T15:04:47.420
> 
> 标签：vb.net, visual-studio-2010

我在编码中遇到此错误，您能告诉我可能出了什么问题吗？以及如何纠正它

已经有一个打开的 DataReader 与此 Connection 关联，必须先关闭它。在这个 sub 中，我在 if 部分中检索数据，在 else 部分中我正在插入数据。如果一个条件不满足。所以在其他部分我得到了上述错误

代码是：

```
 Dim con As MySql.Data.MySqlClient.MySqlConnection = New MySqlClient.MySqlConnection("server=localhost;user=root;database=zzz;port=3306;password;")
    con.Open()
    Dim cmd As MySqlClient.MySqlCommand
    Dim dr As MySqlClient.MySqlDataReader
    cmd = con.CreateCommand()
    cmd.CommandText = "select sino FROM customers WHERE sino  =('" + serialno.Text + "')"
    cmd.ExecuteNonQuery()
    dr = cmd.ExecuteReader()
    If dr.HasRows = True Then
        MsgBox("number already exists")
        dr.Close()

    ElseIf dr.HasRows = False Then

        Dim sqlc As String
        sqlc = "insert into customers values('" + serialno.Text + "','" + custname.Text + "','" + address.Text + "','" + phno.Text + "','" + eid.Text + "','" + event_type.Text + " ')"
        Dim command As MySqlClient.MySqlCommand = New MySqlClient.MySqlCommand(sqlc, con)
        command.ExecuteNonQuery()
        MessageBox.Show(sqlc)
        con.Close()
    End If 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T15:09:23.413

DataReader 只能与一个打开的连接相关联。完成 DataReader 后，请确保在再次使用之前关闭（）它。

来自 MSDN： http: [//msdn.microsoft.com/en-us/library/haa3afyz (v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/haa3afyz(v=vs.80).aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T15:27:15.230

1) 删除 cmd.ExecuteNonQuery()。紧随其后的 ExecuteReader 是您需要的唯一执行。2）您必须为您的插入命令使用不同的连接对象或关闭以前的阅读器。当您循环连接到它的阅读器时，您不能重复使用相同的连接对象。所以试试这个：

```
Dim con As MySql.Data.MySqlClient.MySqlConnection = New MySqlClient.MySqlConnection("server=localhost;user=root;database=zzz;port=3306;password;")
con.Open()
Dim cmd As MySqlClient.MySqlCommand
Dim dr As MySqlClient.MySqlDataReader
cmd = con.CreateCommand()
cmd.CommandText = "select sino FROM customers WHERE sino  =('" + serialno.Text + "')"
dr = cmd.ExecuteReader()
If dr.Read = False Then
  'we have no existing record
  dr.Close()  'close reader first
   Dim sqlc As String
    sqlc = "insert into customers values('" + serialno.Text + "','" + custname.Text + "','" + address.Text + "','" + phno.Text + "','" + eid.Text + "','" + event_type.Text + " ')"
    Dim command As MySqlClient.MySqlCommand = New MySqlClient.MySqlCommand(sqlc, con)
    command.ExecuteNonQuery()
    MessageBox.Show(sqlc)
    con.Close()

Else

    MsgBox("number already exists")
    dr.Close()

End If
con.Close()  'close connection before leaving 
```

# javascript - 验证来自 Javascript 的跨域请求

> ID：15573607
> 
> 赞同：4
> 
> 时间：2013-03-22T15:05:08.900
> 
> 标签：javascript, wcf, cross-domain, jsonp

我正在尝试构建一个实现基本身份验证的面向公众的 Web 服务（WCF/Rest）。我遇到的问题是，为了使 web 服务可以访问，它必须允许来自其他域的脚本。为了做到这一点，最终用户将不得不使用 JSONP 来获取响应，并且 JSONP 请求不允许额外的标头（例如基本身份验证标头）。

我需要能够使用此解决方案支持 IE8-10、Firefox 和 Chrome。

我尝试将网址更改为：

```
http://username:password@Service/Endpoint/Method 
```

但在IE10中无济于事。

我也使用了这篇文章的建议：

[http://kevinkuchta.com/_site/2012/01/basic-authentication-with-jsonp/](http://kevinkuchta.com/_site/2012/01/basic-authentication-with-jsonp/)

但它看起来也没有在 IE10 中削减它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-30T14:30:06.113

[这是一个使用 JSONP 实现 HTTP 身份验证的示例。](http://kevinkuchta.com/_site/2012/01/basic-authentication-with-jsonp/)

它假定您的服务器将跟踪用户是否使用 cookie 进行了身份验证。您将基本身份验证凭据放在图像请求中，在您通过身份验证后执行 JSONP。

或者，您可以使用身份验证详细信息传递查询字符串参数。这些将与 JSONP 一起使用。但是，这显然不是您要求的基本 HTTP 身份验证。

# java - Java EE、Web 服务客户端、Java

> ID：15573609
> 
> 赞同：1
> 
> 时间：2013-03-22T15:05:13.483
> 
> 标签：java, jsf, jakarta-ee

我有一个网络服务并建立了一个客户端。我编写了一个 xhtml 页面，将姓名和电话号码发送到 Web 服务。如果我使用 Bean 使用 setter 和 getter 发送字符串，则 Web 服务会向客户端返回空值。如果我改为在函数中输入直接字符串，我会从 Web 服务中获取正确的字符串。

```
public void submit()
{ PhoneBookProxy.addEntries(name, phoneNum);} 
```

这行不通。

```
public void submit()
{ PhoneBookProxy.addEntries("Jane Doe", "555 555-5555"); } 
```

这确实有效。

这是为了家庭作业。感谢所有的帮助。

我正在使用带有 JDK 1.7 的 Netbeans

```
@ManagedBean
@NoneScoped
public class phoneBookClient {

private String firName, lasName, thphoneNum;
private PhoneBook PhoneBookProxy;

public phoneBookClient()
{
    PhoneBook_Service service = new PhoneBook_Service();
     PhoneBookProxy = service.getPhoneBookPort();
}

public void setFirstName(String fName)
{
    firName = fName;
}

public String getFirstName()
{
    return firName;
}

  public void setLastName(String lName)
{
    lasName = lName;
}

public String getLastName()
{
    return lasName;
}

public void setPhoneNum(String phoneNum)
{
    thphoneNum = phoneNum;
}

public String getPhoneNum()
{
    return thphoneNum;
}

public void submit()
{
    PhoneBookProxy.addEntry(getLastName(), getFirstName(), getPhoneNum());
}

public List<Object> getEntries()
{
    return PhoneBookProxy.getEntries();
} 
```

}

索引.xhtml

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"                  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
  xmlns:h="http://java.sun.com/jsf/html"
  xmlns:f="http://java.sun.com/jsf/core"
  xmlns:ui="http://java.sun.com/jsf/facelets">
<head>
    <title>Phone Book Client</title>
</head>
<body>
    <h1>Please fill in all fields and click Submit</h1>
    <h:form>
        <h2>Please Enter your First Name</h2>
            <h:inputText id="fnameInputText" required="true"
                requiredMessage="Please enter your First name"
                value="#{phoneBookClient.firstName}"
                validatorMessage="Name must be fewer than 30 characters">
                <f:validateLength maximum="30" />
          </h:inputText>
        <h:message for="fnameInputText" />
        <br />
        <h2>Please Enter your Last Name</h2>
        <h:inputText id="lnameInputText" required="true"
                requiredMessage="Please enter your Last name"
                value="#{phoneBookClient.lastName}"
                validatorMessage="Name must be fewer than 30 characters">
                <f:validateLength maximum="30" />
          </h:inputText>
        <h:message for="lnameInputText" />
        <br />
        <h2>Please enter your phone number in format: (xxx) xxx-xxxx</h2>
        <h:inputText id="phoneInputText" required="true"
                requiredMessage="Please enter a valid phone number"
                value="#{phoneBookClient.phoneNum}"
                validatorMessage="Invalid phone number format">
                <f:validateRegex pattern=
                   "((\(\d{3}\) ?)|(\d{3}-))?\d{3}-\d{4}" />
        </h:inputText>
        <h:commandButton value="Submit" action="#{phoneBookClient.submit()}"/>
        </h:form>
    <ui:repeat var="list" value="#{phoneBookClient.entries}" >
        <h:outputText value="#{list}" />
        <br />
    </ui:repeat>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T15:25:03.900

这个问题不是关于 web 服务，而是关于在 jsf bean 中设置变量。

为什么要`@NoneScoped`在托管 bean 定义中使用？这不适合您的情况。

`@ViewScoped`如果您使用的是 jsf 2+ ，则可以使用。您可以阅读[JSF 2.0 中](http://balusc.blogspot.com/2011/09/communication-in-jsf-20.html)有关此概念的通信。

作为旁注，这是一种糟糕的编码习惯。

```
 public String getFirstName()
 {
    return firName;
 } 
```

将您的变量定义为 FirstName 而不是 firName，或者如果它是 firName，请编写您的方法，例如 getFirName

# google-chrome - HTML5 视频 ontimeupdate 事件在 Google Chrome 中不起作用

> ID：15573613
> 
> 赞同：0
> 
> 时间：2013-03-22T15:05:19.530
> 
> 标签：google-chrome, html5-video

我正在尝试[本示例](http://my.opera.com/core/blog/2010/03/03/everything-you-need-to-know-about-html5-video-and-audio-2)中的 HTML5 视频标签，但并非一切正常。

我想使用该`ontimeupdate`事件来打印当前视频时间：

```
<html>
<head>
<meta charset="UTF-8">
</head>
<body>
<video src="test.ogv" width='640' height='480' controls='controls'>
</video>
<div id=time>time</div>
<script>
var video = document.getElementsByTagName('video')[0];
var time = document.getElementById('time');
video.ontimeupdate = function(e) {
  time.innerHTML="Current time: " + video.currentTime;
}
</script>
</body>
</html> 
```

这适用于 Opera 和 Firefox，但不适用于 Google Chrome。那么，为什么这段代码在 Chrome 中不起作用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T15:33:05.620

这对我有用，也许 chrome 的错误/故障你的代码不起作用

```
<html>
<head>
<meta charset="UTF-8">
</head>
<body>
<video src="test.mp4" width='640' height='480' controls='controls' ontimeupdate="timeupdate();">
</video>
<div id=time>time</div>
<script>
    var video = document.getElementsByTagName('video')[0];
    var time = document.getElementById('time');
    function timeupdate() {
        time.innerHTML = 'Current time: ' + video.currentTime;
    }
</script>
</body>
</html> 
```

# tsql - 计算“交易次数”

> ID：15573621
> 
> 赞同：2
> 
> 时间：2013-03-22T15:05:58.130
> 
> 标签：tsql, reporting-services, count, ssrs-2008

我正在尝试计算发生的“*交易数量*”。数据可能如下所示。

```
Cust #   Trans#  TransType  LineItem
42        5000      1         1
42        6000      1         1
42        6000      1         2
42        6000      2         1
42        6000      2         2
42        6000      2         3 
```

任何给定的交易编号都可以有多种交易类型。在此示例中，我希望返回的“事务数”计数为“3”，因为 Trans# 5000 只有一个不同的 TransType，而 6000 有两个。如果我对 Trans# 进行不同的计数，我会得到“2”，如果我只是计数，我会得到“6”。

我尝试过使用：

```
COUNT(DISTINCT CASE Trans# WHEN ???? THEN 1 ELSE null END) AS [Num of Transactions], 
```

但我知道我并不完全在正确的轨道上。如果有人能指出我正确的方向，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T15:13:05.050

试试这个 ：-

```
with cte as
(
  Select Cust,Trans,row_number() over (partition by trans,TransType order by cust) rn
  from Sample
)
Select count(*) as TransCount from cte
where rn=1 
```

[SQL 小提琴](http://sqlfiddle.com/#!3/1dd84/3)演示

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T15:13:40.090

您可以使用以下内容来获取每个客户和交易的不同转换类型的计数：

```
select cust,
  trans,
  count(distinct transtype) cnt
from yourtable
group by cust, trans; 
```

然后，如果您想要该计数的总数，则可以应用于`sum()`查询：

```
select sum(cnt) Total
from
(
  select cust,
    trans,
    count(distinct transtype) cnt
  from yourtable
  group by cust, trans
) src 
```

请参阅带有两个查询[的演示的 SQL Fiddle 。](http://www.sqlfiddle.com/#!3/c2a48/5)

# mysql - 多次插入后按顺序选择

> ID：15573629
> 
> 赞同：0
> 
> 时间：2013-03-22T15:06:16.937
> 
> 标签：mysql

我有两个脚本；其中一个将行插入到数据库中，而另一个处理新输入的、迄今为止未处理的行。

```
CREATE TABLE table (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT, col1 VARCHAR(32), col2 VARCHAR(32)); 
```

所以第一个脚本做了几个单独的插入查询：

```
INSERT INTO table (id, col1 ,col2) VALUES (0, 'val1_1', 'val1_2');
INSERT INTO table (id, col1 ,col2) VALUES (0, 'val2_1', 'val2_2');
INSERT INTO table (id, col1 ,col2) VALUES (0, 'val3_1', 'val3_2');
... 
```

然后第二个脚本使用类似这样的东西来选择未处理的行：

```
SELECT * FROM table WHERE id > (SELECT MAX(id FROM table_processed)) ORDER BY id LIMIT 1000;
(do some processing)
(for each id processed from table: INSERT INTO table_processed (id) VALUES ({table.id});) 
```

有时，第一个脚本需要插入 5000 行。我注意到至少有一个实例是处理脚本似乎跳过了许多行（基本上跳过了其中的 3000 行），并且想知道是什么导致了这种情况以及如何防止它（如果它跳过它们一次，那么下次它会继续跳过它们，因为它使用 > MAX(id))。

或者这不应该发生？（在这种情况下，我猜第二个脚本查询一定是错误的）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T16:29:04.757

如果 2 个插入事务正在运行，并且稍后的事务（= 获得更高的 auto_incremented id）更早完成，则那些更高的自动增量 id 对其他事务（即：您的处理）更早可见，然后较低的事务（在尚未提交的事务，甚至可能是回滚的事务）。每个 INSERT 都会获得一个全局序列的 id，因此这两个事务甚至不能有一个单一的 id 范围，而是创建一种对所述范围的条带化使用。一个好的工作方法是***永远不要***依赖 auto_incremented id 的顺序或值，不要将它们用于***除******标识符***之外的任何内容。

最明显的解决方案是：

1.  不要使用那个 MAX(id)，而是对 table_processed 进行表的 LEFT JOIN，并使用 table_processed 中尚不存在的那些，但这在选择方面可能很重。
2.  让 INSERT 对表执行独占 LOCK（在繁忙的情况下不受欢迎，您似乎已经有多个并发 INSERT）。
3.  让 INSERT 使用`processed=0`索引列完成（可能这只是默认值，您可以在插入中省略它），然后在完成时`SELECT .. FROM table WHERE processed=0`设置为`1`。

一个简单的错误就是说：好的，我将在每次插入后 COMMIT 以便尽快完成事务，这*仍然*容易受到竞争条件的影响，所以不要使用它。

# c# - 加载自定义配置部分问题

> ID：15573633
> 
> 赞同：0
> 
> 时间：2013-03-22T15:06:34.413
> 
> 标签：c#

我从自定义配置部分加载时遇到问题。

有问题的部分是什么。我在选择元素的 XSD 模式下定义了两个元素（第一个和第二个）。用户在配置时只能选择一项。让我们这样说：

```
<customSection>
  <First attribute ="test" />    
</customSection> 
```

或者

```
<customSection>
  <Second attribute ="test" attribute2 ="np" />  
</customSection> 
```

当我加载该配置时，在这两种情况下配置元素 First 和 Second 都将被加载，它们不会为空（对象将为空）。在第一种情况下，如何实现 Second 对象为 null ？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T13:55:52.333

首先，您创建映射类

```
public class YourCustomConfig : ConfigurationSection 
{
 ....
} 
```

完整示例：http: [//nnish.com/2009/09/17/custom-configuration-section-in-c/](http://nnish.com/2009/09/17/custom-configuration-section-in-c/)

其次你得到你的数据

```
YourCustomConfig section = ConfigurationManager.GetSection("customSection") as YourCustomConfig; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T13:49:38.967

我找到了我需要的东西。每个配置元素都有属性 ElementInformation ( [http://msdn.microsoft.com/en-us/library/system.configuration.elementinformation.aspx](http://msdn.microsoft.com/en-us/library/system.configuration.elementinformation.aspx) )，其中还有属性*IsPresent*指示配置文件中是否存在特定的配置元素。官方说明：

IsPresent ：获取一个值，该值指示关联的 ConfigurationElement 对象是否在配置文件中。

有了这个，我可以跟踪哪些元素已加载，哪些未加载。以前我不能说 null 是否相等。它永远不会独立地与 null 相等，因为它有值。

# mysql - 如何处理完全外部联接

> ID：15573634
> 
> 赞同：-4
> 
> 时间：2013-03-22T15:06:39.413
> 
> 标签：mysql, mysql-5.5

我需要一个完整的外部连接在 mysql 中。我在这里找到了一个解决方案：[MySQL 中的完全外连接](https://stackoverflow.com/questions/4796872/full-outer-join-in-mysql)我的问题是 t1 和 t2 本身就是子查询。所以生成的查询看起来像一个怪物。在这种情况下该怎么办？我应该使用视图而不是子查询吗？

**编辑：** 我会尝试解释更多。我有订单和付款。一笔支付可以退多单，一单可以退多单。这就是为什么我有表格订单、付款和付款项目。每个订单都有现场公司（发出此订单）和经理（接受此订单）。现在我需要按公司和经理对订单和付款进行分组并数钱。所以我想得到这样的东西：

```
company1 | managerA | 200  | 200  | 0
company1 | managerB | Null | 100  | 100
company1 | managerC | 300  | Null | -300
company2 | managerA | 150  | Null | -150
company2 | managerB | 100  | 350  | 250 
```

查询，我设法创建：

```
SELECT coalesce(o.o_company, p.o_company)
     , coalesce(o.o_manager, p.o_manager)
     , o.orderstotal
     , p.paymentstotal
     , (coalesce(p.paymentstotal, 0) - coalesce(o.orderstotal, 0)) AS balance
FROM
         (((/*Subquery A*/SELECT orders.o_company
                 , orders.o_manager
                 , sum(o_money) AS orderstotal
            FROM
              orders
            WHERE
              (o_date >= @startdate)
              AND (o_date <= @enddate)
            GROUP BY
              o_company
            , o_manager) AS o
 LEFT JOIN (/*Subquery B*/SELECT orders.o_company
                , orders.o_manager
                , sum(paymentitems.p_money) AS paymentstotal
           FROM
             ((payments
           INNER JOIN paymentitems
           ON payments.p_id = paymentitems.p_id)
           INNER JOIN orders
           ON paymentitems.p_oid = orders.o_id)
           WHERE
             (payments.p_date >= @startdate)
             AND (payments.p_date <= @enddate)
           GROUP BY
             orders.o_company
           , orders.o_manager) AS p
    ON (o.o_company = p.o_company) and (o.o_manager = p.o_manager))
  union 
           (/*Subquery A*/ 
 right join /*Subquery B*/ 
    ON (o.o_company = p.o_company) and (o.o_manager = p.o_manager))) 
```

这是我的查询的简化版本。真正的查询要复杂得多，这就是为什么我想让它尽可能简单。甚至可能分成视图，或者可能还有其他我不知道的选项。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T15:13:39.873

如果您尝试进行完全外连接*并且*关系是 1-1，那么您可以使用 a`union`和聚合来完成同样的事情。

这是一个示例，从两个不同的表中提取一列：

```
select id, max(col1) as col1, max(col2) as col2
from ((select t1.id, t1.col1, NULL as col2
       from t1
      ) union all
      (select t23.id, NULL as col1, t2.col2
       from t2
      )
     ) t
group by id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T17:43:29.583

我认为线索在“集团订单和公司付款”中。将外部联接分解为一个订单查询和另一个付款查询，然后将每个公司的货币类型（订单或付款）相加。

# ruby-on-rails - 从 RubyMine 启动/调试 Rails 时缺少资产

> ID：15573639
> 
> 赞同：2
> 
> 时间：2013-03-22T15:07:05.313
> 
> 标签：ruby-on-rails, ubuntu, rake, rubymine, ubuntu-12.10

我正在尝试测试一个开源 Ruby on Rails 站点（pophealth）。我有一个运行 Ubuntu 12.10 和 RubyMine 的虚拟机。让所有宝石正常工作需要一段时间，但它们现在运行良好。但是，现在所有应该预编译的静态资产都丢失了。

例子：

```
http://0.0.0.0:3000/assets/application-67beadcf527de329bd600098663ee6ca.css 
```

我可以在 Firebug 中看到它返回 404 错误。我已经运行了 rake assets:precompile 几次，当我在 apache 下正常运行它时，它适用于该站点。但是由于 RubyMine 在同一个根目录下工作，它不喜欢它。我相信 RubyMine 正在运行一个名为“Thin”的不同网络服务器。我唯一能想到的就是它在其他地方缓存了自己的 webroot 副本。我已经运行 find 很多次，但我似乎找不到 webroot 的另一个本地缓存。

有人有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T15:31:51.470

我解决了。这对我来说是一个愚蠢的错误。在 config/environments/production.rb 中，我必须设置 config.assets.compile = true，然后当然对其他环境重复此操作。

# live - TypeError: $(...).live 不是函数

> ID：15573645
> 
> 赞同：9
> 
> 时间：2013-03-22T15:07:19.057
> 
> 标签：live, jquery

我对 jquery 1.9.1 有疑问。我已经搜索过了，但这些并没有解决我的问题。

```
 $('.sm2_expander').live('click', function() {
    $(this).parent().parent().toggleClass('sm2_liOpen').toggleClass('sm2_liClosed');
    return false;
}); 
```

每个人都说“使用'on'函数”但是这次我的代码永远不会工作。

```
$(document).on("click", "a.offsite", function(){ alert("Goodbye!"); }); 
```

编辑：这是我使用的项目页面：[可拖动链接](http://boagworld.com/demos/sitemap/)

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-22T15:43:55.123

在您的示例中，您使用了选择器`a.offsite`，但页面中没有与此选择器匹配的元素。这可能是它不起作用的原因。

```
$(function(){
    $(document).on('click', '.sm2_expander', function(){
        alert('bye');
        $(this).parent().parent().toggleClass('sm2_liOpen').toggleClass('sm2_liClosed');
    })
}) 
```

我认为您可以将其缩短为

```
$(function(){
    $(document).on('click', '.sm2_expander', function(){
        $(this).closest('li').toggleClass('sm2_liOpen sm2_liClosed');
    })
}) 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-07-28T12:00:13.113

.live() 是在 jQuery 1.3 中引入的，因此它不适用于早期版本。

**.live() 在 jQuery 1.7 之后也被弃用了。**

**替代方案是 .on() 和 .delegate()**

请参阅相关问题 jQuery 1.9 .live() is not a function on how to migrate existing code。

我使用了“jquery-1.8.3.min.js”，我的问题解决了。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-03-22T15:21:44.417

**试试这个：-** [http://jsfiddle.net/trdb9/](http://jsfiddle.net/trdb9/)

JS：-

```
$(document).on("click", "a.offsite", function () {
    alert("Goodbye!");
}); 
```

HTML:-

```
<a class="offsite">Click Me</a> 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-05-27T20:11:10.227

您需要使用`jquery-migrate-1.1.1.min.js`或更高。我想会有很大的变化`jquery`，一个是让每个依赖于`.live`寻找新方法的人。

无论如何，尝试一下，它应该可以工作。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-22T15:17:06.090

尝试在您的代码中`live`替换为。`on`

```
 $('.sm2_expander').on('click', function() {
    $(this).parent().parent().toggleClass('sm2_liOpen').toggleClass('sm2_liClosed');
    return false;
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-05-07T07:12:27.463

如果你有一个实时站点，我会推荐使用 jQuery Migrate

[https://github.com/jquery/jquery-migrate/](https://github.com/jquery/jquery-migrate/)

它将自动添加已弃用但需要的功能。

# opencart - OpenCart：将主页添加到菜单并从标题中删除

> ID：15573647
> 
> 赞同：0
> 
> 时间：2013-03-22T15:07:25.410
> 
> 标签：opencart

1.  我想知道`Home`从标题中删除并放在`Home`菜单中的最佳方法是什么？
2.  是否应该只在自定义主题、默认主题或两者中完成？

我过去做过：

编辑：

```
catalog/view/theme/mytheme/template/common/header.tpl 
```

位于：

```
<div id="menu">
  <ul> 
```

并补充说：

```
<li><a href="<?php echo $home; ?>"><?php echo $text_home; ?></a></li> 
```

我不确定是否最好修改默认主题而不是自定义主题。任何建议都会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T15:33:37.260

这只需要在您的自定义主题中完成。您不需要在默认主题中执行此操作，除非您的主题使用默认模板作为标题（在这种情况下，您仍然应该将默认头文件复制到您的主题并编辑它）

## 编辑

打开`/catalog/view/theme/your-theme-name/template/common/header.php`以查找文本。通常看起来像

```
<a href="<?php echo $home; ?>"><?php echo $text_home; ?></a> 
```

删除它并保存文件

# java - 正则表达式排除 [ 除非前面有 \

> ID：15573652
> 
> 赞同：9
> 
> 时间：2013-03-22T15:07:35.710
> 
> 标签：java, regex

如何编写一个接受包含除 ' ' 之外的任意数量的任何字符的表达式的正则表达式`[`，除非 ' `[`' 前面有 ' `\`' ？

例子：

```
this is text \\[ this also [$ this isn't any more 
```

从上面的文字来看，“ `this is text \\[ this also`”应该被接受，其余的不应该。我写了类似的东西：

```
[.[^\\\\[]]* 
```

排除 ' `[`' 但不知道如何允许它包含 ' `\\[`' 以及其他文本。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-22T15:14:43.923

这将匹配所有不等于`[`或不等于 a 的`[`字符`\`：

```
([^\[]|(?<=\\)\[)+ 
```

如果您想要整个字符串的简单通过/失败，只需将开始/结束行字符添加到正则表达式：

```
^([^\[]|(?<=\\)\[)+$ 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-22T15:14:01.277

```
([^\[]|\\\[)* 
```

这接受一个序列（（除`[`）或（`\[`））。

一般来说，如果你想接受一个字符串，其中某些字符需要转义，例如`abcd`，匹配它的正则表达式是：

```
([^abcd]|\\[abcd])* 
```

**编辑：**

此正则表达式可用于`Matcher.find`迭代内部/外部的所有部分`[]`：

```
\[(?:[^\[]|\\\[)*\]|(?:\\\[|[^\[])+ 
```

（将其放入 Java 字符串时，将所有反斜杠加倍；为了便于阅读，我将它们排除在外。）

这会将字符串拆分`abc[ def \[ asd \] ]\[ dasd[ \] ]`为`abc`、`[ def \[ asd \] ]`、`\[ dasd`和`[ \] ]`。

# regex - CMake 正则表达式匹配列表中的目录

> ID：15573655
> 
> 赞同：7
> 
> 时间：2013-03-22T15:07:46.167
> 
> 标签：regex, list, cmake

所以我有这样的文件（或值）列表

```
set(HEADER_FILES DirA/header1.h DirA/header2.hpp
                DirB/header3.h DirB/stuff.hpp) 
```

那么如何仅在 DirA 中获取文件的子列表？我正在使用 CMake 2.8.x，我厌倦了正则表达式匹配：

```
string(REGEX MATCHALL "DirA/(.+)" DirA_FILES ${HEADER_FILES}) 
```

但结果只是原始字符串的副本，例如：“DirA/header1.h DirA/header2.hpp DirB/header3.h DirB/stuff.hpp”或什么都没有。

和往常一样，在写这个问题时我解决了它：

```
set(SubListMatch)
foreach(ITR ${HEADER_FILES})
    if(ITR MATCHES "(.*)DirA/(.*)")
        list(APPEND SubListMatch ${ITR})
    endif()
endforeach() 
```

但是 CMake 对我来说是相当新的东西，那么我如何将代码包装成函数呢？到目前为止，我从未编写过任何 CMake 函数。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-22T18:47:06.813

你可以把它变成这样的函数：

```
# Define function
function(GetSubList resultVar)
  set(result)
  foreach(ITR ${ARGN})  # ARGN holds all arguments to function after last named one
    if(ITR MATCHES "(.*)DirA/(.*)")
      list(APPEND result ${ITR})
    endif()
  endforeach()
  set(${resultVar} ${result} PARENT_SCOPE)
endfunction()

# Call it
GetSubList(SubListMatch ${HEADER_FILES}) 
```

当此代码运行时，`SubListMatch`将保存匹配的元素。

您可以通过例如给它一个额外的目录名称参数来改进该功能，以便其他`DirA`可以匹配的：

```
function(GetSubList resultVar dirName)
  # as before, except the if()
    if(ITR MATCHES "(.*)${dirName}/(.*)")
  # same as before
endfunction() 
```

# ruby-on-rails - Rails + Paperclip + AWS：添加水印后，新图片不会发送到Amazon s3

> ID：15573658
> 
> 赞同：2
> 
> 时间：2013-03-22T15:07:49.993
> 
> 标签：ruby-on-rails, amazon-s3, paperclip

我为一种尺寸的图像添加了水印处理器。但是，所有其他版本的图片都上传到了`S3`，除了这个。我相信我必须通知`AWS`我改变了这个尺寸，但我不知道如何或在哪里这样做......

这是我的代码：

lib/paperclip_processors/watermark.rb

```
module Paperclip
class Watermark < Processor
attr_accessor :current_geometry, :target_geometry, :format, :whiny, :convert_options, :watermark_path, :overlay, :position

def initialize file, options = {}, attachment = nil
   super
   geometry          = options[:geometry]
   @file             = file
   @crop             = geometry[-1,1] == '#'
   @target_geometry  = Geometry.parse geometry
   @current_geometry = Geometry.from_file @file
   @convert_options  = options[:convert_options]
   @whiny            = options[:whiny].nil? ? true : options[:whiny]
   @format           = options[:format]
   @format_output    = options[:format_output].nil? ? "jpg" : options[:format_output]
   @watermark_path   = options[:watermark_path]
   @position         = options[:position].nil? ? "SouthEast" : options[:position]
   @overlay          = options[:overlay].nil? ? true : false
   @current_format   = File.extname(@file.path)
   @basename         = File.basename(@file.path, @current_format)
 end

  def crop?
    @crop
  end

  def convert_options?
    not @convert_options.blank?
  end

  # Performs the conversion of the +file+ into a watermark. Returns the Tempfile
  # that contains the new image.
  def make
    dst = Tempfile.new([@basename, @format].compact.join("."))
    dst.binmode

    if watermark_path
      command = "composite"

      params = %W[-gravity #{@position}]
      params += %W[-geometry '#{@watermark_offset}'] if @watermark_offset
      params += %W["#{watermark_path}" "#{fromfile}"]
      params += transformation_command
      params << "\"#{tofile(dst)}.#{@format_output}\""

    else
      command = "convert"
      params = [fromfile]
      params += transformation_command
      params << tofile(dst)
    end

    puts command
    puts "Params: " + params.to_s

    begin
      success = Paperclip.run(command, params.join(" "))
    rescue ArgumentError, Cocaine::CommandLineError
      raise Paperclip::Error, "There was an error processing the watermark for #{@basename}" if @whiny
    end

    dst
  end

  def fromfile
    File.expand_path(@file.path)
  end

  def tofile(destination)
    File.expand_path(destination.path)
  end

  def transformation_command
    scale, crop = @current_geometry.transformation_to(@target_geometry, crop?)
    trans = %W[-resize "#{scale}"]
    trans += %W[-crop #{crop} +repage] if crop
    trans << convert_options if convert_options?
    trans
  end
end
end 
```

和型号：

```
require 'paperclip_processors/watermark'

class Price < ActiveRecord::Base

                has_attached_file :picture, 
                :processors => [:watermark],
                styles: {
                  thumb: '100x100#',
                  small: '320x200#',
                  medium: '640x400#',
                  large: {
                          :geometry       => "920x575>",
                          :watermark_path => "#{Rails.root}/public/img/watermark.png"
                         }
                }
end 
```

# java - 动态删除所有按钮

> ID：15573661
> 
> 赞同：1
> 
> 时间：2013-03-22T15:07:56.980
> 
> 标签：java, swing

我使用这个[答案](https://stackoverflow.com/a/3468914/960086)动态地将按钮添加到我的 GUI 中，并希望能够删除所有这些按钮。据我了解，我正在获取 HashMap（字符串）中的所有键，然后我对键进行 for 循环，并从 hashmap 中删除它们（取回我将删除的对象）。问题是从哈希图中删除第一个按钮后，循环不会继续并且我的应用程序崩溃。

```
HashMap<String, JButton> buttonCache = new HashMap<>();
Set<String> names = buttonCache.keySet();
    /*
     * Checking which buttons exist in the hashmap
    */
    for (String name0 : names) {
        System.out.println("Name0: " + name0);
    }

    for (String name1 : names) {
        System.out.println("before removing: " + name1);
        buttonCache.containsKey(name1); //making sure its in it.
        JButton b = buttonCache.remove(name1);
        System.out.println("after removing: " + name1);
        //visualUI.remove(b); //not tested yet
    }
    //visualUI.invalidate();  //not tested yet
    //visualUI.repaint();     //not tested yet 
```

输出是：

```
Name0: Cancel
Name0: Continue
2
before removing: Cancel
true
after removing: Cancel 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T15:26:32.753

如果要从 HashMap 中删除，则需要在迭代器的帮助下删除。
请参阅[在 Java 中的 foreach 循环中调用 remove](https://stackoverflow.com/questions/1196586/calling-remove-in-foreach-loop-in-java)。

编辑：根据 OP...

```
Iterator<String> it = names.iterator(); 
while(it.hasNext()) { 
  System.out.println(names); 
  String buttonName = it.next(); 
  JButton b = buttonCache.get(buttonName); 
  it.remove(); 
} 
System.out.println(names); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T15:20:28.273

只是一个猜测。当您从 Hashmap 中删除按钮时，它可能仍会在 UI 中找到并且不再有任何参考。也许那是一个问题。我看到注释行应该注意从您的代码片段中的 UI 中删除按钮 - 我想您应该让他们这样做，然后看看会发生什么。

# php - 使用 cURL 登录并保存会话

> ID：15573662
> 
> 赞同：0
> 
> 时间：2013-03-22T15:07:57.560
> 
> 标签：php, session, curl

索引.php

```
<?php
if($_POST) {
    $url = 'http://127.0.0.1/login.php';
    $socks = '127.0.0.1:9999';
    $fields = 'password=' . $_POST['captcha'] . '';

    $ch = curl_init();

    curl_setopt($ch, CURLOPT_URL, $url);
    curl_setopt($ch, CURLOPT_USERAGENT, "Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.22 (KHTML, like Gecko) Chrome/25.0.1364.172 Safari/537.22");
    //curl_setopt($ch, CURLOPT_PROXYTYPE, CURLPROXY_SOCKS5);
    //curl_setopt($ch, CURLOPT_PROXY, $socks);
    //curl_setopt($ch, CURLOPT_INTERFACE, 'eth0:12');
    curl_setopt($ch, CURLOPT_HEADER, 0);
    curl_setopt($ch, CURLOPT_COOKIEFILE, "cookie.txt");
    curl_setopt($ch, CURLOPT_COOKIEJAR, "cookie.txt");
    curl_setopt($ch, CURLOPT_FOLLOWLOCATION, true);
    curl_setopt($ch, CURLOPT_POST, true);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
    curl_setopt($ch, CURLOPT_POSTFIELDS, $fields);
    curl_setopt($ch, CURLOPT_TIMEOUT, 3600);

    $result = curl_exec($ch);

    curl_close($ch);
}
?>
<form action="" method="POST">
    Password <input type="text" name="password" value="" />
    <input type="submit" value="Login" />
</form> 
```

登录.php

```
<?php
session_start();

$_SESSION["TestSession"] = 1;
setcookie("TestCookie", 1, time() + 3600);

if($_POST) {
    file_put_contents("login.txt", serialize($_POST));
}

echo 'OK';
?> 
```

在我运行 index.php 并使用我的密码提交表单后，它被保存到`login.txt`但`cookie.txt`我没有`TestCookie`或没有`TestSession`保存。

我会感谢任何帮助，因为我真的不明白问题出在哪里。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-03-06T07:28:29.977

这就是我在 ImpressPages 中解决这个问题的方法：

```
//initial request with login data

$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, 'http://www.example.com/login.php');
curl_setopt($ch, CURLOPT_USERAGENT,'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Ubuntu Chromium/32.0.1700.107 Chrome/32.0.1700.107 Safari/537.36');
curl_setopt($ch, CURLOPT_POST, true);
curl_setopt($ch, CURLOPT_POSTFIELDS, "username=XXXXX&password=XXXXX");
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_COOKIESESSION, true);
curl_setopt($ch, CURLOPT_COOKIEJAR, 'cookie-name');  //could be empty, but cause problems on some hosts
curl_setopt($ch, CURLOPT_COOKIEFILE, '/var/www/ip4.x/file/tmp');  //could be empty, but cause problems on some hosts
$answer = curl_exec($ch);
if (curl_error($ch)) {
    echo curl_error($ch);
}

//another request preserving the session

curl_setopt($ch, CURLOPT_URL, 'http://www.example.com/profile');
curl_setopt($ch, CURLOPT_POST, false);
curl_setopt($ch, CURLOPT_POSTFIELDS, "");
$answer = curl_exec($ch);
if (curl_error($ch)) {
    echo curl_error($ch);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T15:47:26.503

尝试使用 cookie.txt 文件的完整路径。像 'c:\xampp\htdocs\test\cookie.txt' 或 '/var/www/test/cookie.txt'。

# c++ - Visual C++6 MFC MapViewOfFile 返回错误代码 8

> ID：15573668
> 
> 赞同：0
> 
> 时间：2013-03-22T15:08:18.180
> 
> 标签：c++, mfc, visual-c++-6, pagefile, file-mapping

我有一个正在创建地图文件的程序，它能够很好地执行该调用`m_hMap = CreateFileMapping(m_hFile,0,dwProtect,0,m_dwMapSize,NULL);`，但是当随后的函数调用时`MapViewOfFile(m_hMap,dwViewAccess,0,0,0)`，我得到一个错误代码 8，即 ERROR_NOT_ENOUGH_MEMORY，或错误字符串“错误存储空间不足可用于处理此命令”。

所以我并不完全理解 MapViewOfFile 为我做了什么，以及如何解决这种情况。

一些数字...

```
m_dwMapSize = 453427200
dwProtect = PAGE_READWRITE;
dwViewAccess = FILE_MAP_ALL_ACCESS; 
```

我认为我的页面大小是`65536`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T15:25:15.127

如果文件非常大并且要读取它，建议将它分成小块读取，然后逐块处理。而 MapViewOfFile 函数用于在内存中映射一块。

看看[http://msdn.microsoft.com/en-us/library/windows/desktop/aa366761(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa366761(v=vs.85).aspx)需要偏移量才能正确完成它的工作，即如果你想读取一个非常大的文件成片。主要是由于碎片和相关原因非常大的内存请求失败。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-11-04T16:20:17.080

如果您正在使用 64 位处理器，那么系统将分配总共 4GB 内存，位设置为 LargeaddressAware。转到配置属性->链接器->系统。在启用 largeaddressware：检查是 /LARGEADDRESSAWARE 并检查。

# webview - 从 WebView Windows Store 应用程序导航到 XAML 页面

> ID：15573669
> 
> 赞同：0
> 
> 时间：2013-03-22T15:08:25.013
> 
> 标签：webview, navigation, windows-runtime, windows-store-apps, winrt-xaml

我正在开发一个应用程序，我需要在我现有的 XAML 页面上打开一个全屏 WebView。

现在我在这个 WebView 上添加了一个 AppBar。要求是，appBar 按钮单击应该将我导航到不同的应用程序页面。

例如，WebView 在 MainPage.xaml 上打开，然后单击添加在此 webView 上的 AppBar 按钮，我必须导航到 SeconsPage.XAML

我现在无法执行此操作，并看到 COControl_webview,exe 引发异常

我可以做这样的导航吗？如果是，请帮助我找出我错过了什么？

提前致谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T19:04:34.737

选择原生应用程序 - 它可以为您节省很多麻烦。Filip Skakun 已经描述了关于 webview 的第一个疯狂的事情（使用 webviewbrush）。

如果没有，您可以使用脚本通知在您的 web 应用程序和您的商店应用程序之间来回通信。这是一个很好的链接：http: [//blogs.msdn.com/b/wsdevsol/archive/2012/10/18/nine-things-you-need-to-know-about-webview.aspx](http://blogs.msdn.com/b/wsdevsol/archive/2012/10/18/nine-things-you-need-to-know-about-webview.aspx)

# ios - ViewController 如何知道它专注于 iOS？像“viewDidLoad”

> ID：15573670
> 
> 赞同：3
> 
> 时间：2013-03-22T15:08:26.297
> 
> 标签：ios, xcode, viewcontroller, viewdidload, navigationcontroller

我有一个 NavigationController，其中一个选项卡应该加载一个 ViewController。

这个 ViewController (1) 在加载到“viewDidLoad”时会做一些事情，然后推送一个新的 ViewController (2)。问题是 ViewController(1) 已经通过 viewDidLoad 之后，它不会再通过它，除非重新启动应用程序。

各位大神能不能给个聪明的办法？

这就是我真正在做的事情：

```
- (void)viewDidLoad
{
    // Keep track of cash using NSUserDefaults
    BOOL dreceived[63];
    int rightData;

    [super viewDidLoad];
    // Do any additional setup after loading the view from its nib.
    //Load cash switches
    NSUserDefaults *prefs = [NSUserDefaults standardUserDefaults];
    NSData *data = [prefs objectForKey:@"dreceived"];
    memcpy(&dreceived, data.bytes, data.length);

    for(int n = 72; n >= 1; n = n - 1)
    {
        if(dreceived[n-1]==1)
        {
            rightData = n;            

        }
    }
    NSLog(@"Right Data %d", rightData);

    CashItem *c = [cashflow objectAtIndex:rightData];

    // Go for details
    CashDetailedViewController *cdetail = [[[CashDetailedViewController alloc] init] autorelease];
    cdetail.cash = c;

    cdetail.navigationItem.hidesBackButton = YES;
    [self.navigationController pushViewController:cdetail animated:YES];

} 
```

问题是，这段代码再也不会被调用。如果我两次触摸选项卡，则会显示一个空白视图（原始 xib 视图）。

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-22T15:15:54.210

It sounds like you would want to use `viewWillAppear`. It is called every time that your view controller is about to be onscreen.

Although, based on what you've posted, you may want to rethink what your doing. Having a view controller that immediately presents another view controller should like it would lead to a confusing user experience.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T15:12:46.623

把你的代码`- (void)viewWillAppear`放进去

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-22T15:11:31.980

试着打电话

```
[yourViewController.view setNeedsDisplay]; 
```

或者您可以将代码旋转到一个单独的方法并在 viewDidLoad 和 viewDidAppear:animated 中调用它

# java - 无法从字符串转换为（应该是另一个字符串）

> ID：15573672
> 
> 赞同：0
> 
> 时间：2013-03-22T15:08:28.873
> 
> 标签：java, string, enums

我正在尝试使用枚举来存储一堆字符串，但是当我将它们转换为字符串时它不起作用。我收到错误消息“无法从 String 转换为 ChessSquare.SelectedPiece。我认为这只会有一点改变，但我找不到要改变的地方。

这是我的代码：

```
package Logic;

import java.awt.image.BufferedImage;
import java.io.File;
import java.io.IOException;
import javax.imageio.ImageIO;
import javax.swing.ImageIcon;
import javax.swing.JButton;

    //chess square class, 1 instance of which for each square in the grid
    @SuppressWarnings("serial")
    public class ChessSquare extends JButton {

        //instance variables for position and pieces
        public int posX;
        public int posY;
        public String currentPiece;
        public enum selectedPiece{
            NONE, PAWN, ROOK, KNIGHT, BISHOP, QUEEN, KING
        }
        selectedPiece piece;

        //load images and cast into icons
        BufferedImage buttonIcon = ImageIO.read(new File(piece));
            ImageIcon Icon = new ImageIcon(buttonIcon);
                BufferedImage 

        //constructor for chess squares
        public ChessSquare(int x, int y, double p) throws IOException {
            this.setIcon(Icon);
                setVisible(true);
            }

        //accessor method for position
        public void squarePos(int x, int y){
            this.posX = x;
            this.posY = y;
        }

        //accessor method for currentPiece
        public void cPiece(){
            this.currentPiece = piece;
        }

        //specify what each value of enum slectedPiece represents
        public void selectedPiece(){
            switch (piece){
                case NONE:
                        piece = "E:\\Eclipse\\ChessF\\src\\Images\\EmptySquare.jpg";
                case PAWN:
                        piece = "E:\\Eclipse\\ChessF\\src\\Images\\Pawn.jpg";
                case ROOK:
                        piece = "E:\\Eclipse\\ChessF\\src\\Images\\Rook.jpg";
                case KNIGHT:
                        piece = "E:\\Eclipse\\ChessF\\src\\Images\\Knight.jpg";
                case BISHOP:
                        piece = "E:\\Eclipse\\ChessF\\src\\Images\\Bishop.jpg";
                case QUEEN:
                        piece = "E:\\Eclipse\\ChessF\\src\\Images\\Queen.jpg";
                case KING:
                        piece = "E:\\Eclipse\\ChessF\\src\\Images\\King.jpg";
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T15:18:39.867

在 Java 中，枚举是一个成熟的类......因此，您应该将枚举操作（转换为字符串/从字符串转换为字符串）放入其中。例如：

```
 public enum SelectedPiece{
        NONE("E:\\Eclipse\\ChessF\\src\\Images\\EmptySquare.jpg"), 
        PAWN("E:\\Eclipse\\ChessF\\src\\Images\\Pawn.jpg"), 
        ROOK("E:\\Eclipse\\ChessF\\src\\Images\\Rook.jpg"), 
        KNIGHT("E:\\Eclipse\\ChessF\\src\\Images\\Knight.jpg"), 
        BISHOP("E:\\Eclipse\\ChessF\\src\\Images\\Bishop.jpg"), 
        QUEEN("E:\\Eclipse\\ChessF\\src\\Images\\Queen.jpg"), 
        KING("E:\\Eclipse\\ChessF\\src\\Images\\King.jpg");

        private String imageFilename;
        private ImageIcon image;

        private SelectedPiece( String imageFilename ) throws IOException {
            this.imageFilename = imageFilename;
            this.image = new ImageIcon(ImageIO.read(new File(piece)));
        }

        public String getImageFilename() {
            return imageFilename;
        }

        public ImageIcon getImage() {
            return image;
        }
    } 
```

等等......然后只需在需要的地方使用枚举值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T15:12:17.260

枚举不是字符串。要在它们之间进行转换，您需要使用 valueOf

例如，

```
selectedPiece.valueOf("ROOK"); 
```

将返回枚举 selectedPiece.ROOK

编写枚举时，您可以使用自定义值，例如，

```
Public enum Piece {
  ROOK("Rook"),
  QUEEN("Queen")
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T15:13:07.300

当您`this.currentPiece = piece;`尝试在 String 对象中分配枚举类型时。不可能。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T15:14:25.253

`piece`是类型`selectedPiece`（你的枚举）

你不能给它分配一个字符串。将路径存储在另一个变量中。

例如。：

```
String piecePath;
switch (piece){
                    case NONE:
                            piecePath = "E:\\Eclipse\\ChessF\\src\\Images\\EmptySquare.jpg";
 ... 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-22T15:14:53.833

您应该使用枚举作为类中的变量来确定其类型。您可以简单地添加：

```
 public selectedPiece pieceType; 
```

然后在对象的某处设置类型：

```
 pieceType = selectedPiece.ROOK; 
```

然后，您可以使用枚举执行 switch 语句以将字符串分配给字符串变量。

你组织它的方式取决于你。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-22T15:17:33.337

也许这是使用 CONSTANTS 的情况？毕竟，如果棋子的图形图像总是相同的图像，那不是让它保持不变吗？

```
static final string IMAGE_NONE = "E:\\Eclipse\\ChessF\\src\\Images\\EmptySquare.jpg";
static final string IMAGE_PAWN = "E:\\Eclipse\\ChessF\\src\\Images\\Pawn.jpg"; 
```

在你的案例陈述中

```
case PAWN:
  piece = IMAGE_PAWN 
```

等等等等

# html - Opera/Safari 以不寻常的像素化方式显示我的自定义字体 (Fontface)。

> ID：15573674
> 
> 赞同：0
> 
> 时间：2013-03-22T15:08:35.593
> 
> 标签：html, css, fonts, font-face

我的网站在 IE、Chrome 和 Firefox 上看起来完全一样，但在 Safari 和 Opera 上存在问题。现在特别是在歌剧中的问题是所有字体都是像素化的并且非常可怕。在 Safari 中，问题几乎相同，但似乎较大的文本有效，而较小的文本几乎不可读。

我使用 Html5 文档类型并且：

```
<meta http-equiv="content-type" content="text/html; charset=utf-8" /> 
```

很难解释，但这是我制作的字体代码：

```
@font-face {
    font-family:'modern';
    src:url('../fonts/modern.eot');
    src:url('../fonts/modern.eot?#iefix') format('embedded-opentype'),
        url('../fonts/modern.woff') format('woff'),
        url('../fonts/modern.ttf') format('truetype'),
        url('../fonts/modern.svg#modern') format('svg');
    font-weight:normal;
    font-style:normal;

} 
```

现在这里是“菜单”文本 css，它在 Opera 和 Firefox 中显示非常糟糕：

```
height:80px;
width:200px;
border-radius:45px 45px 0 0;
-moz-border-radius:50px;
-webkit-border-radius:50px 50px 50px 50px;
-o-border-radius:50px 50px 50px 50px;
border-top:2px solid #000;
transition:all 1s;
moz-transition:all 1s;
-webkit-transition:all 1s;
-o-transition:all 1s;
color:#a0a0a0;
display:block;
font-family:modern;
font-size:23px;
font-weight:700;
letter-spacing:1px;
text-align:center;
text-decoration:none;
text-transform:uppercase;
line-height:70px;
background:url(../images/menu_plate.png) no-repeat;
opacity:0.7;
} 
```

这里还有另一部分。这个在 Safari 中显示相当正常，但在 chrome 中显示不正常。

```
h2,h3 {
border-bottom:1px dashed #d2d2d2;
color:#b4b4b4;
font-family:modern;
font-size:50px;
font-weight:400;
line-height:1.2em;
margin-bottom:15px;
text-align:left;
padding:25px 0 5px;
} 
```

现在我尝试将 font-face 字体粗细更改为 400 或 700。没有任何效果。尝试删除类的字体粗细值。没有什么。实际上，正如您所看到的，我的代码非常有效，但我就是不知道出了什么问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T22:50:14.983

尝试使用`-webkit-font-smoothing`. 此外，尝试通过 Font Squirrel 运行您的字体。

如果您使用的是 Mac，您还可以尝试完全禁用字体平滑（系统偏好设置 > 常规 > 可用时使用 LCD 字体平滑 [取消选中]）。请务必在更改此设置后重新启动浏览器以使其应用。如果这是问题所在，我会尝试使用 Font Squirrel 之类的东西重新生成字体文件。与我拥有的桌面字体转换工具相比，它对我的​​字体有很大帮助。我已将此错误提交给 Apple，他们回复说这是“预期行为”，这让我大吃一惊。

# shell - 将空值与字符串进行比较时，shell 脚本中需要一元运算符

> ID：15573679
> 
> 赞同：37
> 
> 时间：2013-03-22T15:08:55.687
> 
> 标签：shell

我有两个变量

```
var=""
var1=abcd 
```

这是我的shell脚本代码

```
if [ $var == $var1 ]; then
  do something
else
  do something
fi 
```

如果我运行此代码，它将提示警告

```
[: ==: unary operator expected 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：110
> 
> 时间：2013-03-22T15:13:26.017

由于 的值为`$var`空字符串，因此：

```
if [ $var == $var1 ]; then 
```

扩展为：

```
if [ == abcd ]; then 
```

这是一个语法错误。

您需要引用参数：

```
if [ "$var" == "$var1" ]; then 
```

您也可以使用`=`而不是`==`; 那是原始语法，而且更便携。

如果您使用的是 bash，则可以使用`[[`不需要引号的语法：

```
if [[ $var = $var1 ]]; then 
```

即使这样，引用变量引用并添加引号也没有什么坏处：

```
if [[ "$var" = "$var1" ]]; then 
```

可能会为未来的读者节省一点时间来记住是否`[[`……`]]`需要它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-08-14T06:18:22.030

为什么所有人都想使用 '==' 而不是简单的 '=' ？这是坏习惯！它仅用于 [[ ]] 表达式。在 (( )) 中也是如此。但是你也可以使用=！它在任何情况下都能很好地工作。如果您使用数字，则不是字符串使用 not parcing 到字符串，然后比较类似字符串但比较数字。像那样

```
let -i i=5 # garantee that i is nubmber
test $i -eq 5 && echo "$i is equal 5" || echo "$i not equal 5" 
```

它的匹配更好更快。我是 C/C++、Java、JavaScript 方面的专家。但是如果我使用 bash，我从不使用 '==' 而不是 '='。你为什么这样做？

# java - 尝试部署 Web 应用程序的问题

> ID：15573680
> 
> 赞同：0
> 
> 时间：2013-03-22T15:08:56.187
> 
> 标签：java, war

我在使用 netbeans 从我的实体类创建 Web 服务时遇到问题。实际上，我有一个 javaee 项目，它适用于 weblogic 10g、oracle 数据库 10g，并使用带有 primefaces 的 JSF 2.1。它工作得很好。

但是当涉及到向我的项目添加 Web 服务时，我遇到了

> 部署失败。消息是：java.lang.NoClassDefFoundError: com/sun/jersey/spi/container/ContainerListener C:\Users\Developer\Documents\NetBeansProjects\IBB_Projeler\nbproject\build-impl.xml:294：模块尚未部署.

当我添加 Web 服务时，我的 web.xml 变为：

```
 <?xml version="1.0" encoding="UTF-8"?>
<web-app version="2.5" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd">
    <context-param>
        <param-name>javax.faces.PROJECT_STAGE</param-name>
        <param-value>Production</param-value>
    </context-param>
    <servlet>
        <servlet-name>Faces Servlet</servlet-name>
        <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>
    <servlet>
        <servlet-name>ServletAdaptor</servlet-name>
        <servlet-class>com.sun.jersey.spi.container.servlet.ServletContainer</servlet-class>
        <init-param>
            <description>Multiple packages, separated by semicolon(;), can be specified in param-value</description>
            <param-name>com.sun.jersey.config.property.packages</param-name>
            <param-value>Resources</param-value>
        </init-param>
        <load-on-startup>1</load-on-startup>
    </servlet>
    <servlet-mapping>
        <servlet-name>Faces Servlet</servlet-name>
        <url-pattern>*.jsf</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>ServletAdaptor</servlet-name>
        <url-pattern>/webresources/*</url-pattern>
    </servlet-mapping>
    <session-config>
        <session-timeout>
            3000
        </session-timeout>
    </session-config>
    <welcome-file-list>
        <welcome-file>index.jsf</welcome-file>
    </welcome-file-list>
    <ejb-local-ref>
        <ejb-ref-name>ProjectsFacade</ejb-ref-name>
        <ejb-ref-type>Session</ejb-ref-type>
        <local>com.ibb.entity.facades.ProjectsFacadeLocal</local>
        <ejb-link>projetakip-ejb.jar#ProjectsFacade</ejb-link>
    </ejb-local-ref>
    <mime-mapping>
        <extension>jpeg</extension>
        <mime-type>image/jpeg</mime-type>
    </mime-mapping>
    <ejb-local-ref>
        <ejb-ref-name>ProjectsFacade1</ejb-ref-name>
        <ejb-ref-type>Session</ejb-ref-type>
        <local>com.ibb.entity.facades.ProjectsFacadeLocal</local>
        <ejb-link>projetakip-ejb.jar#ProjectsFacade</ejb-link>
    </ejb-local-ref>
    <ejb-local-ref>
        <ejb-ref-name>ProjectsFacade2</ejb-ref-name>
        <ejb-ref-type>Session</ejb-ref-type>
        <local>com.ibb.entity.facades.ProjectsFacadeLocal</local>
        <ejb-link>projetakip-ejb.jar#ProjectsFacade</ejb-link>
    </ejb-local-ref>
    <persistence-unit-ref>
        <persistence-unit-ref-name>persistence-factory</persistence-unit-ref-name>
        <persistence-unit-name>projetakip-warPU</persistence-unit-name>
    </persistence-unit-ref>
    <error-page>
        <exception-type>javax.faces.application.ViewExpiredException</exception-type>
        <location>/index.jsf</location>
    </error-page>
</web-app> 
```

基本上它添加了以下内容：

```
<servlet-mapping>
    <servlet-name>ServletAdaptor</servlet-name>
    <url-pattern>/webresources/*</url-pattern>
</servlet-mapping>
<servlet>
    <servlet-name>ServletAdaptor</servlet-name>
    <servlet-class>com.sun.jersey.spi.container.servlet.ServletContainer</servlet-class>
    <init-param>
        <description>Multiple packages, separated by semicolon(;), can be specified in param-value</description>
        <param-name>com.sun.jersey.config.property.packages</param-name>
        <param-value>Resources</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
</servlet> 
```

我搜索了一下，在一些论坛上他们说要添加相关的罐子。我添加了 jersey-server、jsr311-api、asm3.1、jersey-gf-server 和 jersey-servlet。

但是问题仍然存在，如果有人可以帮助我，我将不胜感激。

# asp.net - ASP.NET HttpModule 请求处理

> ID：15573692
> 
> 赞同：0
> 
> 时间：2013-03-22T15:09:28.473
> 
> 标签：asp.net, httpmodule

我想通过 HttpModule 处理静态文件 Web 请求，以根据某些策略在我的 CMS 中显示文档。我可以过滤掉一个请求，但是我不知道如何像asp.net那样直接处理这样的请求。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T16:20:25.523

这是你要找的吗？假设您在集成管道模式下运行，所有请求都应该在此处通过，因此如果未经授权，您可以终止请求，否则可以正常通过。

```
public class MyModule1 : IHttpModule
{
    public void Dispose() {}

    public void Init(HttpApplication context)
    {
        context.AuthorizeRequest += context_AuthorizeRequest;
    }

    void context_AuthorizeRequest(object sender, EventArgs e)
    {
        var app = (HttpApplication)sender;

        // Whatever you want to test to see if they are allowed
        // to access this file. I believe the `User` property is
        // populated by this point.
        if (app.Context.Request.QueryString["allow"] == "1")
        {
            return;
        }

        app.Context.Response.StatusCode = 401;
        app.Context.Response.End();
    }
}

<configuration>
  <system.web>
    <httpModules>
      <add name="CustomSecurityModule" type="MyModule1"/>
    </httpModules>
  </system.web>
</configuration> 
```

# mysql - 对 MySQL 的 JSON 调用不当处理变量

> ID：15573697
> 
> 赞同：0
> 
> 时间：2013-03-22T15:09:42.717
> 
> 标签：mysql, json, variables, fetch

我正在尝试设置名为 pushpool 的开源软件，它本质上是一个 JSON rpc 服务器，由于某种原因，在尝试工作人员身份验证时，我不断收到“mysql pwdb query failed at fetch”。

这是破败：

操作系统是 Ubuntu 运行 MySql 前端：名为“SimpleCoin”的开源软件矿工连接正常，但 pushpool 在连接时返回“mysql pwdb query failed at fetch”，因为 mysql 试图将用户名读取为“？”

mysql.log 显示 pushpool 试图通过以下语句：

`SELECT password FROM pool_worker WHERE username = ?`

在本节中由 pushpool 的 server.json 文件调用（用户/密码信息已被编辑）：

```
# database settings
     "database" : {
               "engine" : "mysql",

               # 'host' defaults to localhost, if not specified
               # "host" : "localhost",

               # 'port' uses proper default port for the DB engine,
               # if not specified
               "port" : "3306",

               "name" : "simplecoin",
               "username" : "SuperCoolUsername",
               "password" : "SuperSecretPassword",
               "sharelog" : true,
               "stmt.pwdb":"SELECT password FROM pool_worker WHERE username = ?",

               "stmt.sharelog":"INSERT INTO shares (rem_host, username, our_result, upstream_result, reason, solution) VALUES (?, ?, ?, ?, ?, ?)"
    }, 
```

工作人员/通行证信息已添加到表“pool_worker”中。

在我看来，json客户端不喜欢处理变量的方式：

`"stmt.pwdb":"SELECT password FROM pool_worker WHERE username = ?",`

自从“？” 没有被连接矿工的用户名正确替换，并且在使用已知工人用户名从 mysql 命令行测试时，该语句可以正常工作......

关于如何修复变量的任何想法，以便 json 将正确的语句传递给 mysql ...？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-17T21:49:10.310

MySQL 调用未正确处理变量。这不是错误，而是令人困惑的错误消息。

可能的原因：您的 pool_worker 表可能是空的（不是一条记录）。

如果它之前有效，那么您可能在某个时候重新创建了数据库结构。重新创建通常涉及删除以前的表结构并从头开始重新创建新的表结构。该过程还会删除该表中的所有记录。即使新创建的表结构与旧表结构相同，记录也会丢失。

如果它以前从未工作过，您可能从未将用户名和密码插入 pool_worker 表中。

修复很简单：在 pool_worker 表中插入至少一条用户名和密码记录（非空字符串）。

插入至少一个记录用户名和密码后，“mysql pwdb query failed at fetch”消息不应再次出现。

# git - 如何收集 git 占用空间的统计信息？

> ID：15573700
> 
> 赞同：1
> 
> 时间：2013-03-22T15:09:57.597
> 
> 标签：git

我们有一个比较大的 git 仓库（也就是 .git 文件夹）；我们一直在尝试通过删除历史上不再需要的文件来减小其大小，但未成功，但大小并没有显着变化。

在删除尝试之前，我们已经对存储库进行了 GC。

有没有一种方法可以收集有关 git 存储库的统计信息，以便了解可以删除哪些内容以节省空间，或者更一般地说，有什么方法可以尊重这样的目标？

======

经过几次测试，我发现我没有成功地在本地存储库上节省空间，因为一般过程取消链接 blob，但不一定删除它们 - 我在这里找到了解决这个特定问题的方法：[git：找不到 blob - 想从包中删除它](https://stackoverflow.com/questions/7432912/git-cant-find-blob-want-to-get-rid-of-it-from-pack)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T15:52:49.583

`git count-objects -v`将为您提供存储库中对象和包文件的计数和累积大小。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T07:22:37.170

Pro Git 建议（在[维护和数据恢复](http://git-scm.com/book/ch9-7.html)中）使用`git verify-pack`来查找最大的对象。[您可以在本博](http://blogs.atlassian.com/2012/01/moving-confluence-from-subversion-to-git/)文（或[此处](https://bitbucket.org/jwalton/git-scripts/src/d35f3dbcdab061da3e86e70cd0817f2af47ced03/largest-objects.rb?at=master)）的“修剪大型、未使用的内容”部分中查看如何将其转换为历史上最大文件列表的示例。

# c# - 实体框架和 Web API ObjectDisposedException

> ID：15573701
> 
> 赞同：3
> 
> 时间：2013-03-22T15:10:05.280
> 
> 标签：c#, entity-framework, serialization, asp.net-web-api, json.net

我有一个使用 Entity Framework 5 连接到 Sql Server 的数据层。我还有一个获取一些数据的 LINQ 查询。此查询在与 Web API 一起使用时失败。我得到了 ObjectDisposedException。这是查询：

```
using (MyContext container = new myContext())
{
    return container.Sales
                    .Include("Products")
                    .Where(s => s.Id == id)
                    .FirstOrDefault();
} 
```

数据层是一个dll，由业务层暴露，也是一个dll，由web api控制器调用。我曾假设 JSON 序列化程序延迟加载包含但我的修复都没有奏效。有任何想法吗？如果缺少信息，我将根据需要更新问题。

这是业务层对数据层的调用：

```
public Sale GetSale(int id)
{
    SaleRepository s = new SaleRepository();
    return s.GetSale(id);
} 
```

最后是对业务层的 web api 调用：

```
public Sale GetSale(int id)
{
    SaleManager s = new SaleManager();
    return s.GetSale(id);
} 
```

这是一个例外：

> ObjectContext 实例已被释放，不能再用于需要连接的操作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T18:29:20.030

`DbContext`发生这种情况是因为在您的处置后正在执行延迟加载。

要解决此问题，您可以通过执行以下操作禁用延迟加载：

```
container.Configuration.LazyLoadingEnabled = false; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T15:25:56.757

延迟加载肯定存在问题，并且包含无法按预期工作 - 尝试更改代码以选择实际对象和包含的实体。

```
using (MyContext container = new myContext())
{
    var result = container
        .Sales
        .Include("Products")
        .Where(s => s.Id == id)
        .FirstOrDefault();
    result.Products.ToList();
    return result;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T16:47:29.707

这是延迟加载的问题。更合适的方法是`DbContext`在请求完成处理之前不处理。你可以通过几种方式做到这一点，

1) 将其丢弃在控制器中。框架将控制器的生命周期与请求的生命周期联系起来。

```
public class MyController : ApiController
{
    private SaleManager _saleManager = new SaleManager();

    protected override void Dispose(bool disposing)
    {
        base.Dispose(disposing);
        if (disposing)
        {
            _saleManager.Dispose();
        }
    }
} 
```

[2) 使用Request.RegisterForDispose()](http://msdn.microsoft.com/en-us/library/system.net.http.httprequestmessageextensions.registerfordispose%28v=vs.108%29.aspx)将资源与请求显式绑定（在您不在控制器内的情况下很有用）

```
SaleManager saleManager = new SaleManager();
Request.RegisterForDispose(saleManager); 
```

# excel - Applescript 中的脚本 - 整数与指数表示

> ID：15573707
> 
> 赞同：0
> 
> 时间：2013-03-22T15:10:20.317
> 
> 标签：excel, integer, applescript, exponential

我有代码可以检索 excel 文件中的单元格，如下所示：

```
tell application "Microsoft Excel"  
-- put the complete set of data into a list of lists (i.e., 2 dimensions -> columns of rows)
set range1 to range "B2:H7686"
tell active sheet to set myData to value of range1
-- now access a specific cell's data
set myRow to 7
set myCol to 3
set myVal to item {myCol} of item {myRow} of myData as string

end tell 
```

但是当我得到列表的结果列表时，大于 10000.0 的数字以指数形式表示。

运行此脚本后，如何获取此脚本以检索常规整数形式的数字或将列表中的数字更改为整数形式？

旁注：这些列表包含数字和字符串

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T15:55:52.783

AppleScript 编辑器始终以指数表示法在小数点前显示大于 8 位的整数和大于 4 位的浮点数。

这是从前面的 Excel 电子表格中获取值的一种方法：

```
tell application "Microsoft Excel"
    tell active sheet
        set x to column 1's row 1's value
    end tell
end tell 
```

这是确定值是否为字符串的一种方法：

```
set isString to ( x's class is equal to text ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T16:44:25.963

尝试：

```
tell application "Microsoft Excel" to set myData to formula of cells of (range "B2:H7686") 
```

# javascript - innerHTML 在案例中失败

> ID：15573711
> 
> 赞同：0
> 
> 时间：2013-03-22T15:10:25.957
> 
> 标签：javascript, html

我正在制作一个带有文本字段的交互式应用程序来练习 javascript，但我正在寻找验证，尽管其余的函数循环但该案例不显示 innerHTML 文本。text.innerHTML 适用于所有其他情况，我在这里遗漏了什么吗？

**Javascript**

```
function getNum(input){
    if (isNaN(input)) {
        oldstate = state-1;
        state = 33;
        console.log("Loading error Message...");
        act();
    }
    else{return(parseInt(input, 10));}
}

function act(){
    console.log("Case: "+state);
    input = inputf.value;
    inputf.value="";
    switch(state){
        case 0:
            name = input;
            text.innerHTML = "Well, hello there, "+name+"! Nice to meet you. What's your age?";
            break;
        case 1:
            text.innerHTML = "Loading...";
            age = getNum(input);
            text.innerHTML = "So, "+name+" you are "+age+" years old!";
            break;
        case 33:
            text.innerHTML = "That is NOT a number! Hit Submit to Return.";
            console.log("Error Successfully loaded!");
            state = oldstate;
            break;
    }
    state=+1;
}

function getStr(input){

} 
```

这是我的带有文本字段 id 的 HTML。任何优化建议也将不胜感激。

**HTML**

```
<!DOCTYPE html>
<html>
    <head>
        <title>titles are lame</title>
        <link/>
        <link rel="stylesheet" type="text/css" href="stylesheet.css">
        <script type="text/javascript" src="script.js"></script>
        <script></script>
    </head>
    <body>
<div id="wrapper"><div id="text">First, let's have your name.</div>
    <br>
    <input type='text' id="input"><input type="submit"id="submit" onclick="act()">

</div>
    <script>
    var state = 0;
    var inputf = document.getElementById("input");
    var text = document.getElementById('text');
    var input, name, age,oldstate;

    document.getElementById("input").addEventListener("keydown", function(e) {

    // Enter is pressed
    if (e.keyCode == 13) { act(); }
}, false);
    </script>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T15:28:14.997

我想我知道问题是什么。在案例1中，您调用该`getNum`方法，它在正确的案例中执行得很好，调用该`act()`方法，正确进入案例33，返回错误，然后......然后继续执行案例1。因为您没有在中指定return语句函数的第一种情况`getNum`，age 有一个未定义的值。如果您添加此行，它应该可以正常工作：

`if (!age) return;`

`getNum`就在案例 1 中调用该方法之后。

编辑：我刚刚意识到您还应该在检测到错误后检查状态是如何管理的。添加我给你的行将留下 33 的状态。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T15:36:13.247

点击[这里](http://jsfiddle.net/liorlolo/Vv9AW/1/)查看答案。。

```
 act() //Changed 
```

# search - 搜索（多个）cimplicity 屏幕的脚本

> ID：15573717
> 
> 赞同：0
> 
> 时间：2013-03-22T15:10:54.520
> 
> 标签：search

我们正在使用 Cimplicity 在我们的工厂操作一些装置。前端包含许多 .cim 文件，它们是呈现给操作员的屏幕。这些文件是用“cimedit”构建的，它基本上是一个图形单击和拖动程序，您可以使用它来组装屏幕。您拖到屏幕上的每个对象都可以选择运行脚本，这让我想到了我的问题。

因为每个屏幕都包含很多小脚本和功能，所以很难跟踪什么是做什么的。例如，我试图找出我的数据库中的某个表在哪里被访问或更新。由于文件似乎都被压缩（或如此），我不能使用常规的“搜索此文件的内容”搜索。

到目前为止，我尝试过的事情是使用 Windows 进行搜索，启用内容选项并尝试了压缩选项。这没有成功。这是有道理的，因为就像我说的，文件似乎被压缩了，所以实际的脚本不是以纯文本形式存储的。

所以，简而言之，我的问题是：
*如何搜索（最好是多个）cimplicity 屏幕的所有脚本？*

任何有关如何搜索压缩文件的提示也非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T15:10:54.520

我在寻找更好的 Windows 搜索工具时偶然发现了另一个 stackoverflow 帖子，最终找到了这篇帖子：[https ://superuser.com/questions/26593/best-way-to-confidently-search-files-and-contents-in -windows-without-using-an](https://superuser.com/questions/26593/best-way-to-confidently-search-files-and-contents-in-windows-without-using-an)

这篇文章推荐了[Agent Ransack](http://www.mythicsoft.com/page.aspx?type=agentransack&page=home)，实际上可以使用此工具搜索 .cim 文件。

# ios - setDetailItem: 做什么？

> ID：15573722
> 
> 赞同：1
> 
> 时间：2013-03-22T15:11:04.743
> 
> 标签：ios, objective-c

我是 Objective-C 的新手，所以如果这个问题很愚蠢，请原谅我！但我想知道这意味着什么。

```
- (void)setDetailItem:(id)newDetailItem
{
    if (_detailItem != newDetailItem) {
        _detailItem = newDetailItem;

        // Update the view.
        [self configureView];
    }
} 
```

这些行在详细视图控制器中究竟做了什么？这是否意味着一个新对象，即被`newDetailItem`创建并分配给已经存在的对象`detailItem`？我不明白。

或者

它实际上是否意味着这个新对象等于“detailItem”中已经存在的细节。那么，不应该写成`newDetailItem = _detailItem`，这样这个新对象就会得到 的值`_detailItem`吗？

这让我有点困惑:(

谢谢你的时间！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-22T15:16:36.847

您展示的代码是“setter”的典型示例——一种为属性分配新值的方法；在这种情况下，一个名为“detailItem”的属性。

此方法通常以两种方式之一调用，或者显式调用：

```
[someObject setDetailItem:someDetailItem]; 
```

或通过点符号：

```
someObject.detailItem = someDetailItem; 
```

`_detailItem`是一个实例变量，或“ivar”；它是实际存储属性值的对象本地位置。此代码检查以确保分配的新值实际上与旧值不同，然后分配它并调用副作用，可能会更新某些 UI 以显示新值。

您的困惑似乎部分源于此方法的参数名称“newDetailItem”。这里的名称是任意的，并不意味着正在创建任何东西。它是新的，因为它是属性的新值，而不是新对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T15:13:50.657

此方法将新值**设置**`newDetailItem`为`_detailItem`。

在这个语句`if (_detailItem != newDetailItem)`中，它通过比较内存位置来检查两者是否是同一个对象。

在传递给的`_detailItem = newDetailItem;`newDetailItem 中。`id``_detailItem`

*在 ARC 的情况下：与 ARC 一样，保留/复制该值，但未指定。*

您正在通过 直接访问您的财产`_detailItem`。你有一个`detailItem`在你的类中调用的属性。

然后调用一个方法`configureView`。

# ios - 在我的应用程序中收到朋友的礼物

> ID：15573725
> 
> 赞同：-1
> 
> 时间：2013-03-22T15:11:07.733
> 
> 标签：ios, facebook, facebook-graph-api, facebook-ios-sdk

我正在尝试在我的游戏中实现“赠送”机制。我看了[这个](https://developers.facebook.com/docs/tutorials/ios-sdk-games/requests/)，我可以向朋友发送请求（即使是无摩擦的对话等等）

我的朋友能够接收请求，但唯一描述的处理请求的方法是让他们点击本机 FB 应用程序中的通知，然后在我的应用程序中通过`application:(UIApplication *)application openURL:(NSURL *)url` 这对我来说看起来很不方便！

如果 2 位朋友向我发送请求怎么办？我必须同时点击它们吗？如果我已经在应用程序中怎么办？我必须去 FB 应用程序点击通知，让我回到我的应用程序吗？

所以问题是：当我在我的应用程序中时，有没有办法查看我的应用程序收到的所有请求并相应地处理它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T15:50:03.337

我对你的描述有点困惑，但我会试一试。

我猜你正试图在你的应用程序中向其他用户发送“礼物”。您的应用程序中是否有某种通知机制？类似于当有人在我的 Facebook 墙上发帖时我查看通知的方式。一旦我点击通知图标并看到它，通知数组或任何它都是空的。因此，如果我去 facebook 的网站，我不会看到任何待处理的礼物。

我会创建某种通知类来临时保存礼物，这样你就可以搬进来不查看/不查看礼物。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T09:53:38.733

只是为了澄清一些事情：我对收到 apprequest 和实际请求时收到的通知有点困惑。可以通过图形路径查看和管理请求`/me/apprequests` 。例如，您可以在应用程序中以类似收件箱的方式查看和接受它们。

# typescript - 您是否也打算使用 TypeScript 编译描述类型？

> ID：15573726
> 
> 赞同：1
> 
> 时间：2013-03-22T15:11:07.840
> 
> 标签：typescript

我确信这是一个愚蠢的问题，答案是**肯定**的，但我最初认为，当我对现有框架使用绝对​​类型化描述符时，我只会在编码时将它们用于编译类型安全和智能感知样式查找。

[https://github.com/borisyankov/DefinitelyTyped/tree/master/knockout](https://github.com/borisyankov/DefinitelyTyped/tree/master/knockout)（例如）

现在我没有使用 Visual Studio，我只是使用 Rubymine 并在我的 rake 构建脚本中调用 tsc.exe，但是我只是注意到，当我转换我的源文件时，它会保留类型，`KnockoutObservableString`而我假设它会替换它与`ko.observable`.

那么我是否也应该转换所有描述符并将它们包含在网页上的源代码中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T14:42:01.227

简短的回答，不。

长答案：您**不需要**编译定义文件。如果你看一个，你会注意到它们只包含接口，因此如果你能够编译一个它会导致一个空的 JavaScript 文件。

定义文件用于向现有 JavaScript 库添加类型支持，而无需将库本身转换为 TypeScript。

在 TypeScript 中编写以下行：

```
var myObservableString: KnockoutObservableString; 
```

将被编译为

```
var myObservableString; 
```

这些类型的要点是，在编译时，如果您犯了错误，您会收到通知。例如：

```
myObservableString = ko.observable("Hello World"); // valid
myObservableString = ko.observable(false); // error, because you have specified the variable as an observable string 
```

但是你仍然需要在 TypeScript 中实例化 observable，你不能调用`new KnockoutObservableString(string);`

你永远不应该在你编译的 JavaScript 中得到这些类型，所以你可能在这里遇到了另一个问题。您是指编译定义文件的输出吗？

# r - 当没有任何匹配条件时搜索有序的“列表”匹配条件，列表长度 = 1

> ID：15573730
> 
> 赞同：0
> 
> 时间：2013-03-22T15:11:21.977
> 
> 标签：r

我有一个包含 3 列的排序列表，我正在搜索第二列是否匹配 2 或 4，如果匹配，则返回第一列的元素，并将其放入函数中。

```
noOutliers((L1LeanList[order(L1LeanList[,1]),])[(L1LeanList[order(L1LeanList[,1]),2]==2)|
                                                (L1LeanList[order(L1LeanList[,1]),2]==4),1]) 
```

当没有任何东西符合条件时。我得到一个

```
Error in ((L1LeanList[order(L1LeanList[, 1]), ])[1, ])[(L1LeanList[order(L1LeanList[,  : 
  incorrect number of dimensions 
```

由于我们实际上拥有 List[List[all false]]

我不能只分出 L1LLSorted<-(L1LeanList[order(L1LeanList[,1]),] 之类的东西并使用 L1LLSorted[,2] 因为当列表的长度正好为 1 时这会返回错误

所以现在我的代码需要看起来像

```
noOutliers(ifelse(any((L1LeanList[order(L1LeanList[,1]),2]==2)|
                      (L1LeanList[order(L1LeanList[,1]),2]==4)),0,
                      (L1LeanList[order(L1LeanList[,1]),])[(L1LeanList[order(L1LeanList[,1]),2]==2)|
                                                           (L1LeanList[order(L1LeanList[,1]),2]==4),1]))) 
```

对于我要求的简单事情来说，这似乎有点荒谬。在写这篇文章时，我意识到我最终可以将所有这些错误检查放入 noOutliers 函数本身，所以它看起来像 noOutliers(L1LeanList,2,2,4) 看起来会好得多，这是必要的，因为它的版本略有不同我的代码几十次。我仍然不禁想知道，是否有更优雅的方式来编写实际函数。

对于好奇的人，noOutliers 在排序后的数据集中找到第 30-70 个百分位数的平均值，如下所示

```
noOutliers<-function(oList)
{
if (length(oList)<=20) return ("insufficient data")
cumSum<-0
iterCount<-0
for(i in round(length(oList)*3/10-.000001):round(length(oList)*7/10+.000001)+1)#adjustments deal with .5->even number rounding r mishandling
{                                                                              #and 1-based indexing (ex. for a list 1-10, taking 3-7 cuts off 1,2,8,9,10, imbalanced.)
  cumSum<-cumSum+oList[i]
  iterCount<-iterCount+1
}
return(cumSum/iterCount) 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T17:20:54.230

让我们来看看...

```
foo <- bar[(bar[,2]==2 | bar[,2]==4),1] 
```

应该提取您想要的所有第一列值。然后运行您想要的任何功能，`foo`可能带有警告“if (length(foo) < 1) then {exit, or skip, or something}”

# sql-server - SQL Server 数据库导出到另一台计算机

> ID：15573734
> 
> 赞同：0
> 
> 时间：2013-03-22T15:11:31.923
> 
> 标签：sql-server, sql-server-2008

我使用 SQL Server Management Studio、SQL Server Express。我生成了一个带有架构和数据的脚本`Task -> Generate Script`。我尝试将此脚本导入具有相同 SQL Server 的其他计算机，但这给了我错误：

> *文件“C:\Program Files\Microsoft SQL Server\MSSQL10.SQLEXPRESS\MSSQL\DATA\WHFM.mdf”的目录查找失败，出现操作系统错误 3（系统找不到指定的路径。）。*

我应该怎么做才能将整个数据库从一台 PC 导入/导出到另一台 PC。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T15:53:40.757

如果您通读脚本的前几行，您将看到指定数据库文件名称和位置的代码。在您的情况下，在您的脚本中查找“C:\Program Files\Microsoft SQL Server\MSSQL10.SQLEXPRESS\MSSQL\DATA\WHFM.mdf”。然后查看目标机器的目录结构。您将需要：

1\. 创建一个目录 'C:\Program Files\Microsoft SQL Server\MSSQL10.SQLEXPRESS\MSSQL\DATA\' 并确保机器上的 sql 实例对该目录具有 RW 访问权限。

或者更好，

2\. 修改脚本以将文件放在目标服务器想要放置文件的位置。

关于#2，您可以通过在 Microsoft SQL Server Management Studio 中右键单击“数据库”并创建脚本来创建数据库，让目标服务器提示您将文件放在何处。来自目标服务器的创建数据库脚本中的文件目录应该会告诉您要做什么。

# c# - 检查字符串是否为子字符串 C# 的最快方法？

> ID：15573740
> 
> 赞同：3
> 
> 时间：2013-03-22T15:11:34.993
> 
> 标签：c#, wpf

我需要检查一个项目列表是否包含一个字符串......所以有点像列表在用户在搜索框中键入时被过滤。因此，在文本更改事件中，我正在检查输入的文本是否包含在 listox 项目之一中并过滤掉......所以类似于：

```
value.Contains(enteredText) 
```

我想知道这是否是过滤掉列表框项目的最快和最有效的方法？

方法是`Contains()`在 C# 中搜索子字符串的最佳方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T15:14:52.433

我想说的是，在除了非常特殊的情况下，它*足够*快速和高效，即使在这种特殊情况下，它也可能是一个纯粹的学术问题。如果您使用它并遇到与此相关的逻辑中的任何瓶颈，那么我会感到惊讶，但只有这样它才值得一看，那么您很可能会在其他地方寻找。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T15:15:11.367

`Contains`是我的[代码完成过滤算法](http://blog.280z28.org/archives/2011/12/105/)中最便宜的方法之一（第 6 部分 #6，其中 #7 和脚注中描述的模糊逻辑匹配要昂贵得多），即使是快速打字的用户[也没有问题](http://tunnelvisionlabs.com/work#code-completion)以及下拉列表中的数千个项目。

我非常怀疑它会给你带来问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T15:22:10.780

尽管这不是全球最快的选项，但它是最快的选项，您无需编写任何代码。它应该足以过滤下拉项目。

对于较长的文本，您可能希望使用具有线性时序复杂度的[*KMP 算法。*](http://en.wikipedia.org/wiki/Knuth%E2%80%93Morris%E2%80%93Pratt_algorithm)但是请注意，对于非常短的搜索字符串，它不会产生任何影响。

对于有很多匹配项的搜索（例如，您获得的第一个到两个字符的匹配项），您可能需要预先计算一个表格，将单个字母和字母对映射到下拉列表中的行，以便更快地查看 -以使用更多内存为代价（一般编程中一个相当标准的权衡）。

# javascript - 如何使这部分代码不在Safari中执行？

> ID：15573741
> 
> 赞同：0
> 
> 时间：2013-03-22T15:11:36.847
> 
> 标签：javascript, jquery, safari

我希望这部分代码不在 Safari 中执行。怎么做？

```
transform:'skewX(-'+$deg1+'deg) rotateX('+$deg1+'deg)', '-moz-transform': 'skewX(-'+$deg1+'deg) rotateX('+$deg1+'deg)', '-webkit-transform': 'skewX(-'+$deg1+'deg) rotateX('+$deg1+'deg)' 
```

在代码中：

```
function sec1() {
                                $global_v=$global_v+10;                         
                                $nowz=(($global_v+$start_pr)/$skorost)+$ugol*2;
                                for (var ink=0, len = $kolvo; ink < len; ink++)
                                {
                                uno1=$(ImgDiv[ink]);
                                $rad1=((ink+1)*$ugol+$nowz);
                                $deg1=$rad1*360/(2*Math.PI)+270;
                                trata = Math.sin(-($rad1))*$size_dug+$smes_x;
                                if(trata>260){
                                zind=1;
                                }else{
                                zind=10;
                                }
                                uno1.css({top: Math.cos($rad1)*$size_dug+$smes_y, left: trata, zIndex: zind, transform:'skewX(-'+$deg1+'deg) rotateX('+$deg1+'deg)', '-moz-transform': 'skewX(-'+$deg1+'deg) rotateX('+$deg1+'deg)', '-webkit-transform': 'skewX(-'+$deg1+'deg) rotateX('+$deg1+'deg)'});
                                };  
                        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T15:17:34.563

您可以尝试旧的浏览器检测技术：

```
var agent = navigator.userAgent.toLowerCase(); 
 if (agent.indexOf('safari')!=-1){ 
   if(agent.indexOf('chrome')  > -1){
    //execute your code this is chrome
   }else{
    // here is safari
   }
  } 
```

但是浏览器检测被认为是一种不好的做法

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T15:26:14.457

我猜你已经在使用 jQuery 了。所以我宁愿使用[jquery 浏览器检测](http://api.jquery.com/jQuery.browser/)。检测 safari 并为其编写替代代码。

然而，根据我的经验，浏览器检测永远不会 100% 准确。尤其是当您查看移动浏览器时。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-07-15T09:53:08.293

您可以注释掉该代码行。它也适用于 css。

# css - 如何在不触发溢出滚动条的情况下使该图像脱离视口？

> ID：15573742
> 
> 赞同：1
> 
> 时间：2013-03-22T15:11:46.587
> 
> 标签：css, scrollbar, positioning

我有这种情况，我无法将图像放在页面的右侧，如果视口区域小于可用的必要空间，女巫就会流血。

HTML

```
<div class="relative-container">
<div class="content1">
    <p>Lorem ipsum dolor sit amet</p>
    <img alt="" src="http://placehold.it/64x64" />
    <p>Lorem ipsum dolor sit amet, etiam iaculis, amet lacinia ultricies voluptatem, wisi mauris, ea quisque est nullam amet, vel libero. Eget pretium quis sed. Ad mattis, dolore ut non molestie et, quis pulvinar, orci luctus placerat lobortis donec scelerisque, nulla lorem. A luctus sed gravida, nullam ante dictum ipsum purus, inceptos <strong>the right image is supposed to come under this paragraph, just a little</strong>.</p>
    <img alt="" src="http://placehold.it/64x64" />
</div>
<div class="content-outofport">
    <img alt="" src="http://placehold.it/128x64/f00000/000/&text=out%20of%20port" />
</div>
<div class="content2">
    <img alt="" src="http://placehold.it/64x64" />
    <p><strong>This paragraph won't be affected by imge position</strong>Lorem ipsum dolor sit amet, etiam iaculis, amet lacinia ultricies voluptatem, wisi mauris, ea quisque est nullam amet, vel libero. Eget pretium quis sed. Ad mattis, dolore ut non molestie et, quis pulvinar, orci luctus placerat lobortis donec scelerisque, nulla lorem. A luctus sed gravida, nullam ante dictum ipsum purus, inceptos mauris porta semper, habitant at mi vulputate. Eget parturient. Suspendisse donec ante est nullam magna, nisl leo vitae vitae. Sequi nec lacinia dui magna, accumsan justo augue, sed nunc penatibus commodo. Porttitor vestibulum nibh, donec at nunc eros vitae mollis.</p>
    <img alt="" src="http://placehold.it/64x64" />
</div> 
```

CSS

```
.relative-container {
    position:relative
}
.content1 {
    border:2px solid #fee;
    z-indez:1
}
.content2 {
    border:2px solid #eef;
}
.content-outofport {
    background-color:#fcc;
    border:2px solid #efe;
    height:64px;
    position:relative;
    right:0;
    z-indez:0;
    overflow:visible;
    margin-right:111px;
    right:0;
    width:100%;
}
.content-outofport img {
    position:absolute;
    right:-110px;
    top:-111px;
} 
```

[jsFiddle：http://jsfiddle.net/zUaAq/1/](http://jsfiddle.net/zUaAq/1/)

从 SO，那些没有帮助：

*   [定位一个可以溢出视口而不触发滚动条的元素？](https://stackoverflow.com/questions/9047669/positioning-an-element-that-can-overflow-outside-the-viewport-without-triggering)
*   [如何在浏览器不扩展视口的情况下将元素推送到屏幕外？](https://stackoverflow.com/questions/10940689/how-to-push-an-element-outside-the-screen-without-the-browser-just-expanding-the)
*   [如何仅使用 css 将元素定位在浏览器视口的顶部？](https://stackoverflow.com/questions/14543589/how-to-position-an-element-just-off-the-top-of-the-browser-viewport-using-only-c)

起初，我想避免使用 javascript

在 jsFiddle 示例中，redish`<div>`不应该是可见的。

在实际的开发环境中，只有`<div class="content-outofport">`是可管理的（具有 html 写入权限，但我无法从 html 标记中移动/格式化其他元素，除非在它们上应用 .css。）

头痒？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T15:15:00.677

[http://jsfiddle.net/zUaAq/4](http://jsfiddle.net/zUaAq/4)

```
.relative-container {
    overflow: hidden;
} 
```

如果想法是尽可能在页面中保留红色图像，您可以这样做：

[http://jsfiddle.net/zUaAq/6/](http://jsfiddle.net/zUaAq/6/)

```
.content-outofport img {
    left: 400px;
} 
```

当然，您需要根据图像和容器宽度设置左侧位置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T15:44:06.707

用户isherwood 指导我找到正确的答案。

HTML 是一样的

CSS

```
.relative-container {
    position:relative;
    /* THIS WAS IT and ONLY IT */
    overflow: hidden;
}
.content1 {
    border:2px solid #fee;
    z-index:22;
    position:relative;
}
.content2 {
    border:2px solid #eef;
    position:relative;
}
.content-outofport {
    background-color:#fcc;
    border:2px solid #efe;
    height:64px;
    position:relative;
    right:0;
    z-index:0;
    overflow:visible;
    margin-right:111px;
    right:0;
    width:100%;
    min-width:777px;
    max-width:999px;
    right:0;
}
.content-outofport img {
    position:absolute;
    right:0px;
    top:-141px;
} 
```

如[this jsFiddle所示](http://jsfiddle.net/zUaAq/8/)

# java - CheckStyle 检查未被忽略

> ID：15573743
> 
> 赞同：7
> 
> 时间：2013-03-22T15:11:49.223
> 
> 标签：java, maven, checkstyle

我在 pom.xml 中设置了我的 checkstyle 检查，如下所示

```
<reporting>
        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-checkstyle-plugin</artifactId>
                <version>2.10</version>
                <configuration>
                    <suppressionsLocation>
                        checkstyle-suppressions.xml
                    </suppressionsLocation>
                    <suppressionsFileExpression>
                        checkstyle-suppressions.xml
                    </suppressionsFileExpression>
                </configuration>
            </plugin>
        </plugins>
    </reporting> 
```

我的 checkstyle-supressions.xml 文件包含以下内容

```
<?xml version="1.0"?>

<!DOCTYPE suppressions PUBLIC
     "-//Puppy Crawl//DTD Suppressions 1.0//EN"
     "http://www.puppycrawl.com/dtds/suppressions_1_0.dtd">

<suppressions>
  <suppress checks="JavadocStyleCheck"
             files="**/*.java"
             />
  <suppress checks="JavadocTypeCheck"
             files="**/*.java"
             />
  <suppress checks="JavadocVariableCheck"
             files="**/*.java"
             />
  <suppress checks="FileTabCharacterCheck"
             files="**/*.java"
             />
</suppressions> 
```

我希望当我运行 mvn 站点时，检查样式​​插件不会报告任何与制表符相关的 JavaDoc 注释或错误。但这不起作用。我怎样才能做到这一点？

亲切的问候

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T07:19:10.147

CheckStyle : [SuppressionFilter](http://checkstyle.sourceforge.net/config.html)告诉我们

> 抑制 XML 文档包含一组`suppress`元素，其中每个`suppress`元素可以具有以下属性：
> 
> 1.  **files** -与与审计事件关联的文件名匹配的***正则表达式。***这是强制性的。
> 2.  **checks** -***正则表达式***与与审计事件关联的检查名称匹配。如果指定了 id，则为可选。
> 3.  **id** - 与与审计事件关联的检查的 id 匹配的字符串。如果指定了检查，则为可选。
> 4.  **行**- 以逗号分隔的值列表，其中每个值是***一个整数***或由整数整数表示的整数范围。它是可选的。
> 5.  **columns** - 一个逗号分隔的值列表，其中每个值是***一个整数***或整数整数表示的整数范围。它是可选的。

由于`files`是 a `regular expression`，您可以在[Java 的正则表达式测试页面](http://www.regexplanet.com/advanced/java/index.html)在线测试配置。

如果`files`是`**/*.java`，当应用`regular expression`结果`com.test.My.java`为失败时`Dangling meta character '*' near index 0 **/*.java ^`

然后**解决方案是**设置`files`as `.*\.java`，当应用`regular expression`结果`com.test.My.java`是**matches(): yes**，**lookingAt(): yes**，**find(): yes**和**group(0): com.test.My.java**。

插件配置应如下：-

```
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-checkstyle-plugin</artifactId>
    <version>2.10</version>
    <configuration>
      <suppressionsLocation>checkstyle-suppressions.xml</suppressionsLocation>
      <suppressionsFileExpression>checkstyle.suppressions.file</suppressionsFileExpression>
    </configuration>
</plugin> 
```

checkstyle : [checkstyle](http://maven.apache.org/plugins/maven-checkstyle-plugin/checkstyle-mojo.html)告诉我们

1.  **suppresssLocation**：指定要使用的抑制 XML 文件的位置。 **此参数被解析为资源、URL，然后是文件**。如果成功解决，则将抑制 XML 的内容复制到`${project.build.directory}/checkstyle-supressions.xml`文件中，然后再传递给 Checkstyle 进行加载。

2.  **抑制**文件表达式 要在抑制文件的属性中使用的键。**默认值为：*checkstyle.suppressions.file***。

请参阅[Maven Checkstyle 插件：使用抑制过滤器](http://maven.apache.org/plugins/maven-checkstyle-plugin/examples/suppressions-filter.html)以获取更多信息。

我希望这可能会有所帮助。

# ssrs-2008 - SSRS 2008 R2 - 空报告（无数据）

> ID：15573744
> 
> 赞同：0
> 
> 时间：2013-03-22T15:11:50.613
> 
> 标签：ssrs-2008, reporting-services

使用 Reporting Services SSRS 2008 R2 生成多种格式的报告时，根据所使用的条件/参数，某些报告为空（未找到数据）。

使用 Reporting Web Services 时有没有办法检测空数据集？该报告在服务器上执行，因此客户端无法检测到没有数据。有没有解决的办法？

贾瓦哈尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T19:29:29.710

您可以通过运行查询立即在报表生成器中检查这些内容。在 SSRS 2008 中也是如此。尝试点击数据集...去查询并点击“！” 按钮，如果有的话会显示结果

# c# - Membership.Provider 必须是 ExtendedMembershipProvider 的实例

> ID：15573748
> 
> 赞同：0
> 
> 时间：2013-03-22T15:12:08.870
> 
> 标签：c#, asp.net-mvc-4

我已经阅读了许多链接来尝试帮助我解决这个问题。我正在通过 Pluralsight 学习我的第一个 MVC 教程，并且我正在继续使用身份验证。它使用 MVC4 Internet 应用程序模板。

在我的`Seed`方法中，我有：

```
protected override void Seed(DepartmentDb context)
{
  if (!Roles.RoleExists("Admin"))
    Roles.CreateRole("Admin");
  if (Membership.GetUser("Luke") == null)
  {
    Membership.CreateUser("Luke", "password");
    Roles.AddUserToRole("Luke", "Admin");
  }
} 
```

用户和角色都很好，`SQL`这一切看起来都很笨拙，也与教程相同。然后它指示使用我的凭据登录。所以我尝试登录并得到标题中所述的异常：

> Membership.Provider 必须是 ExtendedMembershipProvider 的实例

我已经尝试重新安装所需的软件包，还尝试按照 SO 帖子[安装它](https://stackoverflow.com/a/13325883/1288553)`SimpleMembership`，并且还添加了`appsetings`不起作用的软件包。

我还根据评论阅读了此[MSDN 链接](http://weblogs.asp.net/jgalloway/archive/2012/08/29/simplemembership-membership-providers-universal-providers-and-the-new-asp-net-4-5-web-forms-and-asp-net-mvc-4-templates.aspx)，我已按照说明进行操作，但仍然无法解决。

我还需要做什么才能使其正常工作？它快把我逼疯了。

谢谢，

卢克。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T15:19:01.360

这里的问题是您`Membership.CreateUser()`在初始化 SimpleMembershipProvider 之前调用。这是通过 AccountController 上的属性初始化的（通常在用户登录时加载，因为登录功能是 AccountController 的一部分。

不幸的是，您的种子函数在访问 AccountController 之前运行，因此，提供程序尚未初始化。

查看 InitializeSimpleMembershipAttribute.cs 类，并找出在种子函数运行之前调用它的方法。

# java - java中的repaint()方法无法正常工作

> ID：15573749
> 
> 赞同：0
> 
> 时间：2013-03-22T15:12:09.327
> 
> 标签：java, paint, repaint

正在执行该程序以在面板中绘制鼠标位置，该程序运行良好，但在 10 秒后它停止绘制点...有什么帮助吗？

```
 import java.awt.Color;
   import java.awt.Graphics;
   import javax.swing.JPanel;
   import javax.swing.JFrame;
    public class Draw extends JPanel {
public static  int newx;
public static  int newy;

   public void paint(Graphics g) {    

  Mouse mouse = new Mouse();
  mouse.start();

int newx = mouse.x;
int newy = mouse.y;
 g.setColor(Color.blue);  
   g.drawLine(newx, newy, newx, newy);
   repaint();

   }

   public static void main(String[] args) {

  JFrame frame = new JFrame("");
  frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
  frame.setBackground(Color.white);
  frame.setSize(2000,2000 );
  frame.setVisible(true);
  frame.getContentPane().add(new Draw());
  frame.revalidate();
  frame.getContentPane().repaint();

  }
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T15:16:08.623

您在方法`repaint`内调用`paint`，导致无限循环。[Swing Timer](http://docs.oracle.com/javase/tutorial/uiswing/misc/timer.html)更适合在组件上运行定期更新。

对于 Swing 中的自定义绘画，应该重写该方法`paintComponent`而不是忘记调用.`paint``super.paintComponent`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T15:16:22.580

`public void paint(Graphics g)`应该是`public void paintComponent(Graphics g)`。

而且您不应该在此方法中调用 repaint() 。

您也应该在此方法之外添加一个鼠标侦听器。

改编自[Java 教程的示例](http://docs.oracle.com/javase/tutorial/uiswing/events/mousemotionlistener.html)

```
public class MouseMotionEventDemo extends JPanel 
                                  implements MouseMotionListener {
    //...in initialization code:
        //Register for mouse events on blankArea and panel.
        blankArea.addMouseMotionListener(this);
        addMouseMotionListener(this);
        ...
    }

    public void mouseMoved(MouseEvent e) {
       Point point = e.getPoint();
       updatePanel(point); //create this method to call repaint() on JPanel.
    }

    public void mouseDragged(MouseEvent e) {
    }

    }
} 
```

# google-app-engine - 应用引擎服务器从 blobstore 检索图像

> ID：15573752
> 
> 赞同：1
> 
> 时间：2013-03-22T15:12:25.363
> 
> 标签：google-app-engine, python-2.7, blobstore, google-cloud-endpoints

在以下片段中，是`resource`blob 键吗？

```
from google.appengine.ext import blobstore
from google.appengine.ext.webapp import blobstore_handlers
class ServeHandler(blobstore_handlers.BlobstoreDownloadHandler):
  def get(self, resource):
    resource = str(urllib.unquote(resource))
    blob_info = blobstore.BlobInfo.get(resource)
    self.send_blob(blob_info)

app = webapp2.WSGIApplication([('/', MainHandler),
                               ('/upload', UploadHandler),
                               ('/serve/([^/]+)?', ServeHandler)],
                              debug=True) 
```

如果我想从服务器调用 blobstore（与外部调用者调用相反`ServeHandler`），我该怎么做？基本上我希望我的后端（从我的数据存储中）检索 blob_key，然后从 blob_store 中获取图像（或者后端是否有另一种方法从 blobstore 中检索图像？）。

谷歌教程链接：[https ://developers.google.com/appengine/docs/python/blobstore/overview](https://developers.google.com/appengine/docs/python/blobstore/overview)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T17:46:12.300

是的，资源是 blob_key。请参阅有关获取的[BlobInfo](https://developers.google.com/appengine/docs/python/blobstore/blobinfoclass#BlobInfo_get)文档。

[您可以通过BlobReader 类](https://developers.google.com/appengine/docs/python/blobstore/blobreaderclass)直接从 BlobStore 读取。

# white-framework - 从 Java 运行白色 UI

> ID：15573754
> 
> 赞同：0
> 
> 时间：2013-03-22T15:12:38.170
> 
> 标签：white-framework

有什么方法可以从 Java 调用 White UI 自动化工具？我已经有了一个 Java 框架，现在我需要处理一些 Silverlight 应用程序（这是遗留代码，开发人员尚未使其可编写脚本）。我不想为此维护一个单独的工作区/技术。有什么方法可以从我的 Java 代码中调用 White UI 或底层的 Windows UI 自动化？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T06:58:12.980

也许 IKVM 会起作用？我以前没有使用过它，但它看起来允许您运行可以直接访问 .NET 程序集的 Java 代码。

所以，听起来这可能是一种同时使用 White 和 Java 测试框架的方法。

这里有一个有趣的教程（请参阅**用 Java 开发 .NET 应用程序**部分）：

[http://sourceforge.net/apps/mediawiki/ikvm/index.php?title=教程](http://sourceforge.net/apps/mediawiki/ikvm/index.php?title=Tutorial)

IKVM 的主要网站位于**[ikvm.net](http://www.ikvm.net/index.html)**

# c# - 是否可以使弹出窗口充当分层窗口

> ID：15573755
> 
> 赞同：1
> 
> 时间：2013-03-22T15:12:46.153
> 
> 标签：c#, wpf, popup, expression-encoder, layered-windows

我想知道弹出窗口是否可以是分层窗口。

我正在使用编码器 4，并且有一个属性允许程序不捕获分层窗口。

这是我在工具提示中显示提要的代码

```
public class MyToolTip : ToolTip
{

    protected override void OnTemplateChanged(ControlTemplate oldTemplate, ControlTemplate newTemplate)
    {
        if (newTemplate != null)
        {
            this.Visibility = Visibility.Collapsed;
            this.IsOpen = true;
            Popup popup = GetPopupFromVisualChild(this);
            if (popup != null)
            {
                popup.AllowsTransparency = false;
            }
            this.IsOpen = false;
            this.Visibility = Visibility.Visible;
        }
    }

    private static Popup GetPopupFromVisualChild(Visual child)
    {
        Visual parent = child;
        FrameworkElement visualRoot = null;
        while (parent != null)
        {
            visualRoot = parent as FrameworkElement;
            parent = VisualTreeHelper.GetParent(parent) as Visual;
        }

        Popup popup = null;
        if (visualRoot != null)
        {
            popup = visualRoot.Parent as Popup;
        }
        //popup.
        return popup;
    }
} 
```

wpf：

```
<Grid>
        <Button Width="10" Height="10" Click="Button_Click">
        <Button.ToolTip>
            <w:MyToolTip Height="500" Width="550" StaysOpen="True">
                    <WindowsFormsHost x:Name="wrapper" Margin="0,0,0,0" Background="{x:Null}">
                    <wf:Panel x:Name="previewScreen"  BackColor="Transparent"  Size="500,500" >
                            <wf:Panel.Controls>
                            <wf:Panel x:Name="PreviewScreen2" BackColor="Transparent"  Size="500,500"></wf:Panel>
                            </wf:Panel.Controls>
                            </wf:Panel>
                    </WindowsFormsHost>
            </w:MyToolTip>
        </Button.ToolTip>
    </Button>
</Grid> 
```

这个问题是 Encoder 4，只接受预览窗口的 HandleRef。

这就是我对 Encoder 所做的：MediaSource is a LiveDeviceSource

```
if (mediaSource != null && mediaSource.PreviewWindow == null)
                mediaSource.PreviewWindow =
                        new PreviewWindow(new HandleRef(PreviewWindow.PreviewScreen2, PreviewWindow.PreviewScreen2.Handle)); 
```

我想要的是有一个工具提示，显示网络摄像头预览但不与屏幕一起记录。

如果我不使用弹出窗口，则提要不会显示。Altought Encoder 理解它是一个 LayeredWindow 并且不记录它。

如果我使用提要显示的弹出窗口，但它正在被记录。不知何故，即使它在工具提示中，它也不再是 layeredWindow 了。

一些帮助将不胜感激，并得到回报=）

# javascript - 将多个 Typescript 文件编译成一个 javascript 文件

> ID：15573758
> 
> 赞同：2
> 
> 时间：2013-03-22T15:12:54.433
> 
> 标签：javascript, typescript

我正在手动使用 tsc.exe，有​​没有办法让我基本上在根命名空间下将一组 Typescript 文件传递​​给它，然后将其编译为单个命名空间封装的 js 文件？

我在想你如何拥有一个包含根命名空间和所有子命名空间的 .net dll。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T16:10:28.720

发布后我设法找到了一些链接：

[TypeScript 编译为单个 JS 文件](https://stackoverflow.com/questions/12926830/typescript-compiling-as-a-single-js-file) [http://www.codebelt.com/typescript/typescript-compiler-commands/](http://www.codebelt.com/typescript/typescript-compiler-commands/)

两者都对我有帮助，实际答案是：

```
tsc.exe --out some_file.js some_ts_file.ts some_other_ts_file.ts 
```

# wpf - 在树视图选择之前关闭 WPF 弹出窗口

> ID：15573759
> 
> 赞同：0
> 
> 时间：2013-03-22T15:12:54.903
> 
> 标签：wpf, treeview, selecteditem

我正在开发一个在弹出窗口中带有树视图的项目。我需要将它放在弹出窗口保持打开的位置，直到在树视图上进行选择。起初我尝试在树视图上使用 selectedItemChanged 来控制它，然后是 MouseLeave，但是如果您仅将弹出窗口超出一个像素，它就会关闭而您无法在树视图上进行选择。

我正在寻找做一些事情，例如“

```
if (dirTree.SelectedItem = "")
     { 
       popup1.IsOpen = true; 
     }
       popup1.IsOpen = false; 
```

但这给了我“可能的意外参考比较；要进行值比较，请在左侧键入'字符串'。”

我一直在使用“treeview any selected”“treeview SelectedItem”等进行搜索。诚然，这可能只是一个简单的语法问题，因为我是 C# 和 WPF 的新手。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T16:56:18.470

检查以确保它不为空，然后您可以执行 dirTree.SelectedItem.Equals("") 或强制转换为预期类型。

# javascript - 'forever' 日志文件是否同时包含 STDOUT 和 STDERR 内容？

> ID：15573761
> 
> 赞同：6
> 
> 时间：2013-03-22T15:12:57.953
> 
> 标签：javascript, node.js, forever

我正在通过[forever](https://github.com/nodejitsu/forever)运行一个进程，但是我对`-l`,`-o`和`-e`选项的用法感到困惑。

从文档中：

```
-l  LOGFILE      Logs the forever output to LOGFILE
-o  OUTFILE      Logs stdout from child script to OUTFILE
-e  ERRFILE      Logs stderr from child script to ERRFILE 
```

有人可以确认输出是否`LOGFILE (-l)`包括标准输出和标准错误，以及永远的消息（例如“永远重启”）。

如果是这样，我是否正确地假设`-o`并且`-e`仅当您想将 stdout/stderr 发送到不同的位置时才存在；如果您希望一个日志文件`-l`中的所有内容是您需要指定的唯一选项？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-05-03T08:51:00.487

是的，该`-l LOGFILE`选项会生成一个日志文件，其中包含来自子进程的永远、stdOut 和 stdErr 的组合输出。

`-o OUTFILE`如果您使用and选项，我希望有一种方法可以将永远的输出记录到该文件中，`-e ERRFILE`因为它看起来像重复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-10T13:42:17.120

`forever start script.js`

↓</p>

`forever logs script.js -f`

# ruby-on-rails - 使用 Heroku Web 界面，如何将 PG 数据库从 Heroku 导出为 CSV 文件？

> ID：15573762
> 
> 赞同：1
> 
> 时间：2013-03-22T15:13:03.477
> 
> 标签：ruby-on-rails, database, postgresql, heroku, export-to-csv

我正在尝试从 Heroku 的 PostGresql 数据库中导出 CSV 文件，以将其导入 Heroku 之外的 MongoDB。有谁知道直接从 Heroku 网站导出 CSV 文件的任何好方法？问题是询问如何使用 Heroku 的 Web 界面而不是命令行界面导出 CSV 文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T15:31:21.907

您可以使用 dataclips 导出单个表的 csv：[https ://dataclips.heroku.com](https://dataclips.heroku.com)

要像这样导出整个数据库，您需要一次执行一张表

# firebase - 由于权限而无法加载数据，但仅在最初

> ID：15573768
> 
> 赞同：1
> 
> 时间：2013-03-22T15:13:17.427
> 
> 标签：firebase

发生的情况是，通常在经过足够长的时间（会话已过期）后我第一次对用户进行身份验证时，我对用户应该有权访问的数据的请求被拒绝。请求最终将开始工作，没有实际的规则或代码更改。它可能需要 2 到 10 分钟，但最终会自行恢复。

我没有这方面的硬数据；这只是我观察到的。

我不知道我能做些什么。还有人看到这个吗？这是一个已知的错误？我已经搜索过，但没有发现任何其他关于这种情况的说法。

谢谢。

以下是规则：

```
{
 "rules": {

    "users": {
      "$user": {
        ".read" :"$user == auth.id || data.child('email').val() == auth.email",
        ".write":"$user == auth.id"
      }
    },

    "todos":{
      "$list":{
        ".read":"data.child('members').hasChild(auth.id)",
        ".write":"newData.child('members').hasChild(auth.id)"
      }
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T19:13:12.747

默认情况下，您的身份验证令牌有效期为 24 小时，因此如果您在此之前看到安全错误，则可能与您的会话无关。为了验证这一点，您可以附加一个回调来告诉您会话何时过期。请参阅： [https ://www.firebase.com/docs/javascript/firebase/auth.html](https://www.firebase.com/docs/javascript/firebase/auth.html)

我怀疑这里发生的事情仅仅是您的规则所依赖的数据正在发生变化并导致写入有时成功，而另一些则失败。这是 Firebase 中安全规则的预期行为。例如，如果某人从 /todos/blah/members/ 添加/删除，这将影响您在 /todos/blah 的阅读能力

关于您的规则的一件奇怪的事情是，您似乎允许任何人写入 /todos/$list，只要他们正在写入的数据包含包含作者用户 ID 的成员列表。我怀疑这不是您的预期行为。也许您的意思是让写入规则依赖于 Firebase 中已经存在的数据而不是新数据？

# android - 拦截数据库错误“文件已加密或不是数据库”

> ID：15573771
> 
> 赞同：1
> 
> 时间：2013-03-22T15:13:34.063
> 
> 标签：android, database, sqlite

因为我正在尝试实现导入/导出数据，所以我想测试如果导入的文件不是用于管理错误的 sqlite 数据库会发生什么。

在 logcat 我有以下内容：

```
03-22 15:02:39.957: E/SQLiteLog(20407): (26) file is encrypted or is not a database
03-22 15:02:39.978: E/DefaultDatabaseErrorHandler(20407): Corruption reported by sqlite on database: /data/data/com.crbin1.ltd/databases/dbltd
03-22 15:02:40.017: E/DefaultDatabaseErrorHandler(20407): deleting the database file: /data/data/com.crbin1.ltd/databases/dbltd 
```

该应用程序只需为用户创建一个新的空数据库而不会出错。

db import 后我调用以下代码（DatabaseLTD 是我的 SQliteOpenHelper 类）

```
private void checkImportedDb() {
    try {
        DatabaseLTD dbltd = new DatabaseLTD(mCtx);
        SQLiteDatabase db = dbltd.getReadableDatabase();
    } catch (SQLiteException e) {
        e.printStackTrace();
    }
} 
```

但我无法拦截“文件已加密或不是数据库”错误。我怎样才能捕捉到错误来管理它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T15:23:40.733

SQLiteOpenHelper 构造函数：

```
public SQLiteOpenHelper (Context context, String name, SQLiteDatabase.CursorFactory factory, int version, DatabaseErrorHandler errorHandler) 
```

需要一个错误处理程序参数“DatabaseErrorHandler”。

> 当 sqlite 报告数据库损坏时使用，或 null 使用默认错误处理程序。

这可能是您正在寻找的。

**编辑**：正如 crbin1 正确指出的那样，构造函数只是 API >= 11。

对于 API < 11，我的（未经测试的）建议是打开数据库并获取表列表：

[检索数据库中所有表的列表](https://stackoverflow.com/questions/4141435/retrieve-a-list-of-all-tables-in-the-database)

如果您应该加载的数据库肯定至少有一个，您可以检查数字，或者更好的是，确保特定表已经存在。

如果您还希望能够检查空数据库，作为最后的努力，您可以尝试 SQLiteDatabase 方法：

```
public static SQLiteDatabase openDatabase (String path, SQLiteDatabase.CursorFactory factory, int flags) 
```

我没有检查，但我*强烈怀疑*此方法的文档不正确，因为有关“标志”参数的信息不一致，特别是以下行：

> 根据标志 OPEN_READWRITE OPEN_READONLY CREATE_IF_NECESSARY 和/或 NO_LOCALIZED_COLLATORS 打开数据库。

与“int flags”参数的存在冲突：

> 控制数据库访问模式的标志

我知道我是个懒鬼，我应该自己检查一下，但是如果是这种情况，您可以尝试使用 openDatabase 预验证数据库，使用 OPEN_READONLY 和不使用 CREATE_IF_NECESSARY，捕获异常（如果有），然后继续使用“标准” SQLiteOpenHelper 方法。

# vba - 如何复制一行数据，并用偏移量粘贴它

> ID：15573778
> 
> 赞同：4
> 
> 时间：2013-03-22T15:13:46.947
> 
> 标签：vba, excel, excel-2010

我正在制作一个 Excel 2010 表格，其中包含一些医生的姓名和地址，但通常有 2 个名称相同但地址不同。在这种情况下，我想将地址信息复制到与名字相同的行，但偏移量为 4 个列。这是我想出的代码

```
Sub OraganizadorEndereços()

    ActiveCell.Select
    If ActiveCell.Value = ActiveCell.Offset(1, 0).Value _
    Then ActiveCell.Offset(1, 0).Activate: _
    Range(ActiveCell.Offset(0, 1), ActiveCell.Offset(0, 4)).Copy: _
    ActiveCell.Offset(-1, 0).Select: _
    ActiveCell.Offset(0, 5).Paste _
    Else ActiveCell.Offset(1, 0).Select

End Sub 
```

但我得到一个错误

```
ActiveCell.Offset(0, 5).Paste _
Else ActiveCell.Offset(1, 0).Select 
```

部分代码，说对象不接受这个属性/方法

请记住，我今天开始使用 VBA 编程，所以如果您能给出解释，我将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-22T15:29:32.300

尽量减少对激活和选择单元格的依赖 - 您可以将单元格分配给范围变量以使事情变得更容易。此外，您不需要复制单元格（除非您还想复制格式，例如颜色），而是使用它们的 .Value ：

```
Sub OraganizadorEndereços()

Dim rngTest as Range 'Define rngTest variable as Range
Set rngTest = Activecell 'Set rngTest to be the ActiveCell
If rngTest.Value = rngTest.Offset(1, 0).Value Then 
    'Replace the .Value of the columns to right with the .Value of the row below
    Range(rngTest.Offset(0,5), rngTest.Offset(0,8).value = Range(rngTest.Offset(1, 1), rngTest.Offset(1, 4)).Value
Else 
    Set rngTest = rngTest.Offset(1,0) 'Set rngTest to be the next line down
End If

End Sub 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T15:34:02.653

试试下面的代码：

```
Sub OraganizadorEndereços()

    Dim rng As Range
    Dim offsetRng As Range

    Set rng = ActiveCell
    rng.Select

    Set offsetRng = rng.Offset(1, 0)

    If rng = offsetRng Then
        offsetRng.Offset(0, 1).Resize(, 4).Copy offsetRng.Offset(0, 5)
        rng.Offset(1, 0).Activate
    Else
        rng.Offset(1, 0).Select
    End If

End Sub 
```

# javascript - 将文本框的值绑定到 onclick 参数

> ID：15573787
> 
> 赞同：-2
> 
> 时间：2013-03-22T15:14:26.767
> 
> 标签：javascript, asp.net, html

```
 <input type="text" name="BoqTextBox" />
    <input type="AddValueButton" value="+" onclick="Add(BoqTextBox)" />
    <input type="MinusValueButton" value="-" onclick="Minus(BoqTextBox)"/>                           
    </div>

    <script>
        function Add(data) {
            var i = 1;
        }   
    </script> 
```

用户将数据输入“BoqTextBox”并单击 + 按钮。文本框中的所有数据都传递给函数 Add(data) 中的“数据”参数

我该怎么做呢？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T15:25:18.050

首先，您应该向 input[name=BoqTextBox] 元素添加一个 ID 属性，因为按名称搜索元素更加困难。（见[http://www.mkyong.com/javascript/how-to-get-element-by-name-in-html-getelementsbyname/](http://www.mkyong.com/javascript/how-to-get-element-by-name-in-html-getelementsbyname/)）

```
<input type="text" name="BoqTextBox" id="BoqTextBox" /> 
```

然后将 onclick 烤箱更改为如下所示：

```
<input type="AddValueButton" value="+" onclick="Add(document.getElementById('BoqTextBox').value)" />
<input type="MinusValueButton" value="-" onclick="Minus(document.getElementById('BoqTextBox').value)"/> 
```

我希望这行得通。

# html - css ie8 第一个孩子和最后一个孩子

> ID：15573788
> 
> 赞同：0
> 
> 时间：2013-03-22T15:14:35.567
> 
> 标签：html, css, internet-explorer-8

大家好，我有以下..

```
.selected2:first-child{
   background: url(../img/css/first-selected.png) no-repeat !important;
   background-position: center center !important;
   box-shadow: inset 1px 1px 5px 2px rgba(221,221,221,1) !important;
}
.selected2{
   background: url(../img/css/second-selected.png) no-repeat !important;
   background-position: center center !important;
   box-shadow: inset 1px 1px 5px 2px rgba(221,221,221,1) !important;
}
.selected2:last-child{
   background: url(../img/css/third-selected.png) no-repeat !important;
   background-position: center center !important;
   box-shadow: inset 1px 1px 5px 2px rgba(221,221,221,1) !important;
} 
```

它在 ie9、chrome、opera、firefox 中完美运行……但在 ie8 中，我只得到每个 li 元素的第二个背景。

问题是什么？ie8不支持一胎？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-22T16:10:14.170

这里有两个问题：首先是`:last-child`选择器，其次是 RGBA 背景颜色。

1.  IE8 不支持`:last-child`。（虽然它确实支持`:first-child`）

    [您可以在 Quirksmode.org](http://quirksmode.org/css/selectors/)上查看浏览器对这些（以及所有其他 CSS 选择器）的支持。

    如果您需要 IE8 支持，那么最快和最简单的处理方法就是简单地将类添加到相关元素并以这种方式设置它们的样式。这是老式的做事方式，但 IE8 是老式的浏览器。

    如果你真的需要使用选择器`:last-child`，并且你真的需要支持 IE8，那么你可以尝试以下 Javascript 解决方案：

    *   [http://selectivizr.com/](http://selectivizr.com/) -- 这是一个 JS 库，它为旧 IE 版本添加了对一堆 CSS 选择器的支持。它还要求您使用另一个库（例如 jQuery）来完成繁重的工作。

    *   [https://code.google.com/p/ie7-js/](https://code.google.com/p/ie7-js/) - 这是一个 JS 库，它试图修补旧的 IE 版本，以尽可能多地修复错误和怪癖，并回填尽可能多的缺失功能可能的。它的作用范围很广。它确实包含大多数高级 CSS 功能。

    这些库中的任何一个都应该可以为您添加`:last-child`支持，除非您的用户关闭了 JS。

2.  但是，正如我所说，IE8 确实支持`:first-child`，因此缺少选择器并不是您的代码在这种情况下不起作用的原因。您的 CSS 不起作用的原因`:first-child`是因为您使用 RGBA 颜色作为背景。IE8 不支持 RGBA 颜色。

    为此，唯一可用的解决方案是一个名为[CSS3Pie](http://css3pie.com/)的 JS 库。这为 IE6/7/8 添加了各种 CSS3 功能，包括 RGBA 颜色支持（尽管在有限的范围内；它并不能做所有事情）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T15:19:06.813

IE8 及更低版本不支持这些伪类。有一个 Javascript 工具可以使 IE7 和 IE8 的行为更接近 IE9，并增加了对第一个和最后一个子级的支持。

[https://code.google.com/p/ie7-js/](https://code.google.com/p/ie7-js/)

在下载的文件中，你会发现 IE7.js IE8.js 和 IE9.js 只是使用了 IE9.js 它包含了另外两个...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-12T08:07:07.693

如前所述，您不能使用`:last-child`伪类，但您可以使用`.selected2 + .selected2`等来定位您需要的类。

# mysql - 使用 ORDER BY 组织结果

> ID：15573789
> 
> 赞同：1
> 
> 时间：2013-03-22T15:14:41.520
> 
> 标签：mysql

现在我正在使用一个看起来像这样的 sql 查询。

```
SELECT 
'Name',
'Department' 
UNION ALL tb1.Name, 
tb2.Department FROM tb1 
LEFT OUTER JOIN tb2 ON 
tb1.MyIndex = tb2.MyIndex 
ORDER BY Name, Department ASC; 
```

我遇到的困境是订购并没有真正按照我需要的方式工作。为了出口，我需要将标题留在查询的顶部，而且我的部门没有正确订购。我的输出看起来像这样。

```
David   |    1
Joe     |    1
Phil    |    3
George  |    2
Name    | Department 
```

现在，当我取出标题时，我可以按列排序而不会发生意外

```
SELECT tb1.Name, tb2.Department
FROM tb1 LEFT OUTER JOIN tb2 ON
tb1.MyIndex = tb2.MyIndex
ORDER BY tb1.Name, tb2.Department 
```

我的输出看起来不错。

```
David   |    1
Joe     |    1
George  |    2
Phil    |    3 
```

除了一件事，这个查询以

```
INTO OUTFILE 'file.txt' FIELDS TERMINATED BY '|' OPTIONALLY ENCLOSED BY '' LINES
TERMINATED BY '\n' 
```

当我导入此文件时，我需要标题，但是当我将标题放入时，我必须搜索标题而不是列名，并且 ORDER BY 甚至无法正常工作，所以我的问题是如何订购结果为

```
ORDER BY tb1.Name, tb2.Department 
```

这样我的结果将看起来像我在这篇文章中的第二组结果，但包含标题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T15:31:53.610

要正确执行此操作，您不应依赖联合输出的顺序。相反，要明确：

```
select name, department
from (SELECT 'Name' as name, 'Department' as department, 1 as isheader
      UNION ALL
      SELECT tb1.Name, tb2.Department, 0 as isheader
      FROM tb1 LEFT OUTER JOIN tb2
           ON tb1.MyIndex = tb2.MyIndex
     ) t
ORDER BY isheader desc, tb1.Name, tb2.Department+0 
```

为了清楚起见，[文档](http://dev.mysql.com/doc/refman/5.0/en/union.html)说：

> 但是，对单个 SELECT 语句使用 ORDER BY 并不意味着行在最终结果中出现的顺序，因为默认情况下 UNION 会产生一组无序的行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T15:26:25.677

您应该能够使用子查询来做到这一点：

```
SELECT 
  'Name' as header1,
  'Department' as header2 
UNION ALL 
select 
  suq_query.Name,
  suq_query.Department
from
(
  select tb1.Name, 
    tb2.Department 
  FROM tb1 LEFT OUTER JOIN tb2 ON tb1.MyIndex = tb2.MyIndex 
  ORDER BY Name ASC, Department ASC
) as suq_query
INTO OUTFILE 'file.txt' 
FIELDS TERMINATED BY '|' 
OPTIONALLY ENCLOSED BY '' LINES
TERMINATED BY '\n'; 
```

# jquery - jQuery Simplemodal 破坏自动完成

> ID：15573790
> 
> 赞同：3
> 
> 时间：2013-03-22T15:14:41.770
> 
> 标签：jquery, autocomplete, simplemodal

我正在使用 jQuery Simplemodal v 1.4.4 来显示一个模式对话框，其中包含一个使用 jQuery 自动完成的输入字段。

自动完成在第一次调用 simplemodal 时正常工作，但是当 simplemodal 关闭时绑定会被破坏。

我知道使用 Simplemodal onOpen/onClose 回调可以避免这种情况，但在我的情况下，该解决方案很麻烦，因为我正在动态管理几个不同的模式对话框：

```
if ($(edit_container).hasClass('modal')) {                          
$(edit_container).modal();                          
} 
```

这意味着我必须检查 simplemodal 回调中的各种自动完成字段，这确实不是一个优雅的解决方案。

任何人都可以帮忙吗？

# c# - 将静态反射信息传递给静态泛型方法

> ID：15573791
> 
> 赞同：1
> 
> 时间：2013-03-22T15:14:43.907
> 
> 标签：c#, generics, reflection

编辑：我试图在里面运行它的类/方法是静态的，因此我无法将它传递给 generic.Invoke

我有一个静态数据访问类，用于自动解析来自各种来源的数据。当我遇到问题时，我开始重新考虑它。我想通过反射将类型传递给通用方法，（该方法然后解析类型并返回带有值的类型）我的代码目前看起来像

```
Type type1 = typeof( T );
var item = (T)Activator.CreateInstance( typeof( T ), new object[] { } );

foreach (PropertyInfo info in type1.GetProperties())
{
    Type dataType = info.PropertyType;
    Type dataType = info.PropertyType;
    MethodInfo method = typeof( DataReader ).GetMethod( "Read" );
    MethodInfo generic = method.MakeGenericMethod( dataType ); 
    //The next line is causing and error as it expects a 'this' to be passed to it
    //but i cannot as i'm inside a static class
    generic.Invoke( this, info.Name, reader );
    info.SetValue(item,DataReader.Read<dataType>(info.Name, reader ) , null);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T15:47:56.127

我猜`DataReader.Read`是静态方法吧？

因此，如下所示更改错误行，因为您正在调用静态方法。没有对象，所以你只需传入`null`方法`Invoke`：

```
var value = generic.Invoke( null, new object[] {info.Name, reader} ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T15:25:13.977

泛型方法的类型参数不是 ; 的实例`Type`。你不能以这种方式使用你的变量。但是，您可以使用反射来创建您需要的封闭泛型`MethodInfo`（即，指定类型参数），它看起来像这样：

```
// this line may need adjusting depending on whether the method you're calling is static
MethodInfo readMethod = typeof(DataReader).GetMethod("Read"); 

foreach (PropertyInfo info in type1.GetProperties())
{
    // get a "closed" instance of the generic method using the required type
    MethodInfo genericReadMethod m.MakeGenericMethod(new Type[] { info.PropertyType });

    // invoke the generic method
    object value = genericReadMethod.Invoke(info.Name, reader);

    info.SetValue(item, value, null);
} 
```

# coq - Coq 中的通用量化假设

> ID：15573794
> 
> 赞同：0
> 
> 时间：2013-03-22T15:14:45.783
> 
> 标签：coq, universal, quantifiers

我想从下面的表格中改变假设 H

```
mL : Map
mR : Map
H : forall (k : RecType) (e : String.string),
       MapsTo k e (filter (is_vis_cookie l) mL) <->
       MapsTo k e (filter (is_vis_cookie l) mR)
-------------------------------------------------------
Goal 
```

至

```
mL : Map
mR : Map
k : RecType
e : String.string
H : MapsTo k e (filter (is_vis_cookie l) mL) <->
    MapsTo k e (filter (is_vis_cookie l) mR)
-------------------------------------------------------
Goal 
```

我认为，它们都可以解决相同的目标，但我需要后一种形式的假设。或者更具体地说，进一步将 k 分离为其元素，如下所示。如何将假设 H 更改为这两种形式？

```
 mL : Map
    mR : Map
    ks : String.string
    kh : String.string
    e : String.string
    H : MapsTo {| elem1:= ks; elem2:= kh|} e (filter (is_vis_cookie l) mL) <->
        MapsTo {| elem1:= ks; elem2:= kh|} e (filter (is_vis_cookie l) mR)
    -------------------------------------------------------
    Goal 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T00:25:39.807

为此，您需要在上下文中有一个`k`type`RecType`的 term 和一个`e`type的 term `String.string`。有了这个，你可以得到这个：

* * *

使用`pose proof (H k e) as Hke`：

```
mL : Map
mR : Map
k : RecType
e : String.string
H : forall (k : RecType) (e : String.string),
    MapsTo k e (filter (is_vis_cookie l) mL) <->
    MapsTo k e (filter (is_vis_cookie l) mR)
Hke : MapsTo k e (filter (is_vis_cookie l) mL) <->
      MapsTo k e (filter (is_vis_cookie l) mR)
-------------------------------------------------------
Goal 
```

请注意，您仍然有 H 可用。

* * *

使用`specialize (H k e).`：

```
mL : Map
mR : Map
k : RecType
e : String.string
H : MapsTo k e (filter (is_vis_cookie l) mL) <->
    MapsTo k e (filter (is_vis_cookie l) mR)
-------------------------------------------------------
Goal 
```

请注意，H 已被特化，不能再次特化。

* * *

你不能“获得” ，`k`但是，这对于通用量化没有多大意义，因为这些是术语的形式参数（函数不携带它的参数，而是要求它们作为输入）。`e``H``H`

您一定会误认为存在量化，在那里您可以`destruct`通过假设来获得证人以及证人满足该属性的证据。

# sql - 我可以从另一个数据库服务器在我的数据库服务器中创建视图吗

> ID：15573796
> 
> 赞同：5
> 
> 时间：2013-03-22T15:14:53.410
> 
> 标签：sql, sql-server-2008, view, connection

是否可以在我的数据库服务器中创建另一个服务器数据库表的视图？

假设您有一个数据库调用`Testing`并且`server1`您有另一个数据库`Testing2`在`server2`. 是否可以在数据库中创建`Testing2`表视图？`Table2``server1``Testing`

另外，我使用的是 SQL Server 2008。

请让我知道，如果你有任何问题。

谢谢，

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-22T15:22:38.093

是的你可以。首先，您需要使用类似`sp_addlinkedserver`.

然后，您可以使用 4 部分命名访问数据。这是一个例子：

```
create view v_server1_master_tables as
    select *
    from server1.master.information_schema.tables; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-22T15:29:33.430

可以通过链接服务器。但是，我不鼓励您基于来自另一台服务器的表创建视图，因为每次使用此视图时，很可能会从链接服务器中选择整个表 - 优化器可能不知道此表结构来发出任何过滤器。我在工作中看到过它，没有人知道`select * from`大表上的查询来自哪里，这会减慢数据库的速度，而且它似乎在另一个服务器的某个地方被使用，在一个简单的查询中。至少您应该检查您的解决方案是否不会导致上述问题。也许其他人可以详细说明优化器在处理链接服务器时的行为方式？

# tomcat - Grails Tomcat OutofMemory error

> ID：15573803
> 
> 赞同：1
> 
> 时间：2013-03-22T15:15:08.177
> 
> 标签：tomcat, grails

I have a Grails app that I have packed with the war command: `grails war`. I need to deploy it to a remote machine running Tomcat.

When I do the drop deploy (copying the WAR file into `C:\Program Files (x86)\apache-tomcat-7.0.37\webapps`) and run `C:\Program Files (x86)\apache-tomcat-7.0.37\bin\startup.bat` I am getting several `OutofMemory` errors with PermGem and Heap space.

How can I fix this?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T15:39:55.293

What I usually do when starting tomcat :

```
export JAVA_OPTS="-Xms1024m -Xmx2024m -XX:MaxPermSize=512m"; export CATALINA_OPTS="-Xms1024m -Xmx2024m -XX:MaxPermSize=512m"; /etc/init.d/tomcat6 restart; tail -f /var/lib/tomcat6/logs/catalina.out 
```

That fixes all memory problems. I have 6 Grails applications running with that configuration.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-22T15:15:08.177

On the Tomcat server, add a system environment variable: JAVA_OPTS -Xmx512m

Also, in your Grails app in the conf/BuildConfig.groovy add the line at the following line at the top: grails.tomcat.jvmArgs= ["-Xms256m", "-Xmx1024m", "-XX:PermSize=512m", "-XX:MaxPermSize=512m"]

This seems to have solved many of the issues I was facing.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T22:21:40.603

If you are using Ubuntu, I'd recommend editing /etc/default/tomcat6 (or tomcat7 depending on what you're running).

Around line 20 is a sample JAVA_OPTS line; uncomment it, and edit it to suit your hardware.

I've got mine running as:

```
 JAVA_OPTS="-Djava.awt.headless=true -Xmx1024m -XX:MaxPermSize=512m -XX:+UseConcMarkSweepGC" 
```

Which caps the RAM in use at a gig, and sets permsize to 512m.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-09T02:44:37.553

Use the default values on Grails Build.config Change on this point:

```
grails.project.fork = [
// configure settings for compilation JVM, note that if you alter the Groovy version forked compilation is required
//  compile: [maxMemory: 256, minMemory: 64, debug: false, maxPerm: 256, daemon:true],

// configure settings for the test-app JVM, uses the daemon by default
test: [maxMemory: 768, minMemory: 64, debug: true, maxPerm: 256, daemon:true],
// configure settings for the run-app JVM
run: [maxMemory: 500, minMemory: 64, debug: true, maxPerm: 256, forkReserve:false],
// configure settings for the run-war JVM
war: [maxMemory: 500, minMemory: 64, debug: true, maxPerm: 256, forkReserve:false],
// configure settings for the Console UI JVM
console: [maxMemory: 500, minMemory: 64, debug: true, maxPerm: 256] 
```

]

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-10-07T16:36:23.577

if you are using service based tomcat then you may not have catalina.bat file in bin folder. Then try to add these java options. ![enter image description here](../Images/18a4f5c48c60aceb2c4810b07d2308b3.png)

# java - 从另一个类获取类型

> ID：15573809
> 
> 赞同：2
> 
> 时间：2013-03-22T15:15:16.320
> 
> 标签：java, oop

所以我得到了子弹类：

```
import java.awt.*;

public class Bullet extends GameObject
{
    private Player player;
    private int deltaX;

    public Bullet(final Player player, final int deltaX, final int xPos, final int yPos, final int width, final int height, final String img) {
        this.deltaX = deltaX;
        this.player = player;
        this.xPos = xPos;
        this.yPos = yPos;
        this.height = height;
        this.width = width;
        this.rect = new Rectangle(xPos, yPos, width, height);
        this.img = getImage(img);
    }
    @Override
    public void draw(Graphics g)
    {
        g.drawImage(img, xPos, yPos, width, height, null);
    }

    @Override
    void update(final Shooter shooter, final int id)
    {
        if(rect.intersects(player.rect))
        {
            shooter.bullets.remove(this);
            if(!(shooter.player1.getHull() == 0))
            {
                player.setHealth(player.getHealth() - 1);
                if(!(getStamina() <  1))
                    if(shooter.player1.getStamina() > 10)
                        shooter.player1.setStamina(shooter.player1.getStamina() - 10);
                    else
                        shooter.player1.setStamina(shooter.player1.getStamina() - 1);
                else
                    shooter.player1.setStamina(shooter.player1.getStamina() - 0);

            }
            else
            {
                player.setHealth(player.getHealth() - 2);

            }

            if(!(player.getHull() == 0))
                player.setHull(player.getHull() - 2);
            else
                player.setHull(player.getHull() - 0);
        }

        else if (yPos < -100 || yPos > 2000)
        {
            shooter.bullets.remove(this);
        }
        else
        {
            if(deltaX == 1)
            {
                yPos++;
                rect.y++;
            }
            else
            {
                yPos--;
                rect.y--;
                yPos--;
                rect.y--;
            }

        }

    }

    public void setPlayer(Player player) {
        this.player = player;
    }
    public Player getPlayer()
    {
        return player;
    }

    @Override
    Image getImage(String img) {
        return Toolkit.getDefaultToolkit().getImage(img);
    }

    public int getDeltaX() {
        return deltaX;
    }

    public void setDeltaX(int deltaX) {
        this.deltaX = deltaX;
    }

} 
```

这是我的流星课：

```
import java.awt.*;

public class Meteor extends GameObject
{
    private Player player;
    private int deltaX;

    public Meteor(final Player player, final int deltaX, final int xPos, final int yPos, final int width, final int height, final String img) {
        this.deltaX = deltaX;
        this.player = player;
        this.xPos = xPos;
        this.yPos = yPos;
        this.height = height;
        this.width = width;
        this.rect = new Rectangle(xPos, yPos, width, height);
        this.img = getImage(img);
    }
    @Override
    public void draw(Graphics g)
    {
        g.drawImage(img, xPos, yPos, width, height, null);
    }

    @Override
    void update(final Shooter shooter, final int id)
    {
        if (yPos < -100 || yPos > 2000)
        {
            shooter.meteors.remove(this);
        }
        else
        {
            if(deltaX == 1)
            {
                yPos++;
                rect.y++;
            }
            else
            {
                yPos++;
                rect.y++;
            }
        }
        if(rect.intersects(shooter.player1.rect))
        {
            System.out.println("Collision");
            shooter.meteors.remove(this);
            shooter.player1.setHealth(shooter.player1.getHealth() - 100);
        }
    }

    public void setPlayer(Player player) {
        this.player = player;
    }
    public Player getPlayer()
    {
        return player;
    }

    @Override
    Image getImage(String img) {
        return Toolkit.getDefaultToolkit().getImage(img);
    }

    public int getDeltaX() {
        return deltaX;
    }

    public void setDeltaX(int deltaX) {
        this.deltaX = deltaX;
    }

} 
```

现在在 Meteor 类中我想使用这个：

```
if(bullet.rect.intersect(shooter.player1.rect)
{..} 
```

但这不起作用，因为我无法从中引用子弹类。有什么办法让它工作吗？

这是游戏对象类

```
import java.awt.*;

public abstract class GameObject
{
    protected Rectangle rect;
    protected int xPos;
    protected int yPos;
    protected int height;
    protected int width;
    protected Image img;
    protected int health;
    protected int stamina;
    protected int hull;

    abstract void draw(Graphics g);

    abstract void update(final Shooter shooter, final int id);

    abstract Image getImage(String img);

    public int getHealth() {
        return health;
    }

    public void setHealth(int health) {
        this.health = health;
    }
    public int getStamina() {
        return stamina;
    }

    public void setStamina(int stamina) {
        this.stamina = stamina;
    }

    public Rectangle getRect() {
        return rect;
    }

    public void setRect(Rectangle rect) {
        this.rect = rect;
    }

    public int getHull() {

        return hull;
    }

    public void setHull(int hull) {
        this.hull = hull;
    }

    public int getxPos() {
        return xPos;
    }

    public void setxPos(int xPos) {
        this.xPos = xPos;
    }

    public int getyPos() {
        return yPos;
    }

    public void setyPos(int yPos) {
        this.yPos = yPos;
    }

    public Image getImg() {
        return img;
    }

    public void setImg(Image img) {
        this.img = img;
    }
    public int getHeight() {
        return height;
    }

    public void setHeight(int height) {
        this.height = height;
    }

    public int getWidth() {
        return width;
    }

    public void setWidth(int width) {
        this.width = width;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T15:49:33.440

快速修复是

```
bullet.getRect().intersect(shooter.getPlayer().getRect()) 
```

更长的答案是

你需要考虑一下你的类是如何相互交互的。我推荐的一本书叫做《*Head First Design Patterns*》。

一个例子是您可以使用GameObject 类上的**委托方法来简化代码。**您的子弹、射手和流星可能不需要知道或关心碰撞逻辑是否使用`Rectangle`. 此外，您可能需要更改碰撞逻辑。

示例方法`GameObject`

```
public boolean intersect (GameObject anotherObject) {
   return this.rect.intersect(anotherObject.rect);
} 
```

那么你的代码将是

`bullet.intersect(shooter.getPlayer())`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T15:20:05.647

Rect 似乎是`GameObject`该类的受保护属性。

你可以在你的`Bullet`类中添加一个公共 getter。

```
public Rectangle getRect() {
    return rect;
} 
```

然后调用它：

```
if(bullet.getRect().intersect(shooter.player1.rect)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T15:24:44.320

首先，您需要对`Bullet`within的引用`Meteor`。例如创建一个属性

> `private Bullet bullet;`// 此时没有设置引用（这意味着项目符号 == null）

并通过自己定义的 setter 方法设置它或将引用作为构造函数参数传递（取决于对象关系和您的设计）。

`Rectangle`对象的属性`Bullet`应定义为私有/受保护`Meteor`并由 getter 在内部获取（因为封装良好的模式）。

所以这意味着

> `Rectangle rectangle = bullet.getRectangle();`

`getRectangle()`由您定义的属性吸气剂在哪里`rect`。

此外，我建议您阅读有关封装的信息。

一开始看这里

[http://docs.oracle.com/javase/tutorial/java/javaOO/variables.html](http://docs.oracle.com/javase/tutorial/java/javaOO/variables.html)

[http://docs.oracle.com/javase/tutorial/java/javaOO/arguments.html](http://docs.oracle.com/javase/tutorial/java/javaOO/arguments.html)

# c# - 获取用户变量，设置它的值，并在另一个屏幕上显示它

> ID：15573811
> 
> 赞同：0
> 
> 时间：2013-03-22T15:15:24.210
> 
> 标签：c#, wpf, expression-blend-4

我是 WPF、C# 和 xaml 的新手。我会形容我的知识很贫乏，但正在增长。

我有一个非常简单的应用程序。我想要完成的是以下内容：

我有一个文本框，我要求应用程序的用户输入一个电子邮件地址。我想将该变量存储在某处，以便稍后将其写入屏幕。所以： 1\. 获取电子邮件地址（用户点击“下一步”按钮） 2.“感谢电子邮件将设置为”“当实用程序完成时。”

我正在将 Blend 与 SketchFlow 一起使用。我创建了一个允许我存储变量的单例类。

```
namespace Mysillyapplication
{
public class ApplicationParameters
{
    private static ApplicationParameters _instance;
    private string _emailAddress;

    public static ApplicationParameters Instance
    {
        get
        {
            if (_instance == null)
            {
                _instance = new ApplicationParameters();
            }
            return _instance;
        }

    }

    public string EmailAddress
    {
        get { return _emailAddress; }
        set
        {
            _emailAddress = value;
        }
    }
} 
```

获取电子邮件地址的页面代码：

```
namespace Mysillyapplication
{
/// <summary>
/// Interaction logic for BasicParameters.xaml
/// </summary>
public partial class BasicParameters : UserControl
{
    public BasicParameters()
    {
        this.InitializeComponent();
    }

    public string EmailAddress
    {
        get
        {
            return ApplicationParameters.Instance.EmailAddress;
        }
        set
        {
            ApplicationParameters.Instance.EmailAddress = value;
        }
 }
     }
   } 
```

在我的 xaml 中，我有以下几行：

```
<TextBox x:Name="email" HorizontalAlignment="Left" Height="23" Margin="32,65,0,0" TextWrapping="Wrap" VerticalAlignment="Top" Width="291"/> 
```

和

```
<i:EventTrigger EventName="Click">
                <ei:ChangePropertyAction  TargetName="MySillyapplication_BasicParameters_Name" PropertyName="EmailAddress" Value="{Binding Text, ElementName=email}" />
                <pi:NavigateToScreenAction TargetScreen="DBSyncScreens.BeginSync"/>
            </i:EventTrigger> 
```

最后，我想在另一个页面上显示它：在该页面的 CS 中，我有以下几行：

```
public string EmailAddress
    {
        get
        {
            return ApplicationParameters.Instance.EmailAddress;
        }
        set
        {
            ApplicationParameters.Instance.EmailAddress = value;
        }
    } 
```

在 XAML 中：

```
<TextBlock HorizontalAlignment="Left" Height="25" Margin="10,35,0,0" Style="{DynamicResource BasicTextBlock-Sketch}" 
               VerticalAlignment="Top" Width="605" >
        <Run Text="A log of the sync will be sent to "/>
        <Run Text="{Binding EmailAddress, Mode=TwoWay}"/>
        <Run Text=". Click Next to begin the sync process."/>
    </TextBlock> 
```

是错误的并且不起作用。

我可能做错了。任何人都对如何轻松地使该用户变量电子邮件地址易于处理有任何想法。我觉得我想要完成的事情很容易，但我却遇到了很多困难。

获取一个变量，存储它，在其他页面上访问它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T15:58:51.783

那是因为你没有设置你`DataContext`的第二页所以找不到`EmailAddress`。

在您的页面构造函数中尝试添加：

```
DataContext = this; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T16:03:33.127

在`BasicParameters`构造函数中，添加以下代码：

```
public BasicParameters()
{
    this.InitializeComponent();
    this.DataContext = ApplicationParameters.Instance;
} 
```

！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T16:15:28.690

我在我的博客文章中写了一点关于这个[你所说的“DataContext”是什么？](http://rachel53461.wordpress.com/2012/07/14/what-is-this-datacontext-you-speak-of/)

总而言之，WPF 应用程序有两层：UI 层和数据层。

数据层是`DataContext`，UI 层中使用绑定，以便稍后从数据中访问数据。

当您编写 时`<TextBox Text="{Binding EmailAddress}" />`，您是在告诉 WPF 查看`DataContext`后面的数据层 ()`TextBox`并绑定到该`EmailAddress`属性。

是沿视觉树继承的`DataContext`，因此通常您只会看到`DataContext`一次集合，例如

```
public SomeConstructor()
{
    this.InitializeComponent();
    this.DataContext = ApplicationParameters.Instance;
} 
```

应该注意的是，您还可以指定其他绑定属性以从当前位置以外的位置访问值`DataContext`，例如`ElementName`or `Source`。

例如，由于您要绑定到一个`Singleton`属性，您可以使用以下语法进行绑定：

```
Text="{Binding Path=EmailAddress, 
               Source={x:Static my:ApplicationParameters.Instance}}" 
```

这会将绑定的源设置为单例对象，因此它将绑定到`ApplicationParameters.Instance.EmailAddress`

为此，您还必须指定“我的”命名空间，如下所示：

```
<Window ... xmlns:my="clr-namespace:MyNamespace" /> 
```

但长话短说，你的绑定不起作用的原因是因为`DataContext`你的后面`TextBlock`不是`ApplicationParameters.Instance`，所以它找不到`EmailAddress`要绑定的属性:)

# sparql - SPARQL 日期范围

> ID：15573814
> 
> 赞同：2
> 
> 时间：2013-03-22T15:15:38.570
> 
> 标签：sparql

我正在尝试获取特定日期之间的所有记录。日期字段以这种格式显示：`2012-01-31`。我认为它是类型：`<http://www.w3.org/2001/XMLSchema#date>`

请问如何修改下面的查询以提取日期大于 2012-01-31 的记录？

```
PREFIX xsd:     <http://www.w3.org/2001/XMLSchema#>
PREFIX rdf:     <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
PREFIX rdfs:    <http://www.w3.org/2000/01/rdf-schema#>
PREFIX owl:     <http://www.w3.org/2002/07/owl#>
PREFIX lrppi:   <http://landregistry.data.gov.uk/def/ppi/>
PREFIX skos:    <http://www.w3.org/2004/02/skos/core#>
PREFIX lrcommon: <http://landregistry.data.gov.uk/def/common/>

SELECT  ?county ?postcode ?amount ?date
WHERE
{    
    ?transx  lrppi:pricePaid ?amount .
    ?transx   lrppi:transactionDate ?date .
    ?transx   lrppi:propertyAddress ?addr.

    ?addr lrcommon:postcode "PL6 8RU"^^xsd:string .
    ?addr lrcommon:postcode ?postcode .

    # Cant get this line to work
    # ?date lrppi:transactionDate ?date . FILTER ( ?date >= "1327968000"^^xsd:date  )

    OPTIONAL {?addr lrcommon:county ?county .}
}
ORDER BY ?postcode 
```

如果你想玩这个，你可以在这里输入你的查询：http: [//landregistry.data.gov.uk/landregistry/sparql/sparql.html](http://landregistry.data.gov.uk/landregistry/sparql/sparql.html)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-22T18:37:03.507

这就是该`FILTER`条款的目的。

SPARQL 规范的[表达式和测试值](http://www.w3.org/TR/sparql11-query/#expressions)部分详细介绍了这一点，该部分中的第一个示例几乎涵盖了日期过滤。

## 编辑

如果您是 SPARQL 的新手，那么我建议您阅读一个很好的 SPARQL 教程，例如由规范作者之一编写的[SPARQL by Example 。](http://www.cambridgesemantics.com/semantic-university/sparql-by-example)这将引导您了解 SPARQL 的各个部分，并帮助您更好地了解 RDF 数据模型和查询语言。

就日期而言，它们使用[XML 模式数据类型](http://www.w3.org/TR/xmlschema-2/)表示，例如将今天表示为日期如下：

```
"2013-03-22"^^xsd:date 
```

链接规范涵盖了各种数据类型的词法形式。

因此，对于您的示例，它将如下所示：

```
FILTER ( ?date >= "2012-01-31"^^xsd:date ) 
```

如果您从 UNIX 时间戳开始并尝试`xsd:date`查看[在 shell 脚本中生成 xsd:dateTime，](https://web.archive.org/web/20131030075739/http://answers.semanticweb.com/questions/20716/generating-an-xsddatetime-in-shell-script)这可能会提供一个有用的起点。

# javascript - 带参数的 CakePHP 控制器函数不显示 javascript

> ID：15573819
> 
> 赞同：0
> 
> 时间：2013-03-22T15:15:52.620
> 
> 标签：javascript, cakephp, parameters, controller

当我使用带有参数的控制器函数时，渲染视图似乎忘记了每个包含的 .js 文件。

```
public function view($id = null) {
    if(!$id) {
        throw new NotFoundException(__('Invalid post'));
    }

    $post = $this->Post->findById($id);

    if(!$post) {
        throw new NotFoundException(__('Invalid post'));
    }
    $this->set('post', $post);
} 
```

如果我拿走参数并将变量'$id = 1'放在函数上，则postID 1的视图在'posts/view'中呈现正常。

我以传统方式将 javascript 文件包含到 default.ctp 中：

```
echo "script type='text/javascript' SRC='../js/jquery-1.9.1.min.js'></script>";); 
```

（它包括'<'，但出于安全原因，我猜这个文本编辑器不会输入它）

我不了解 cakePHP 的“js helpers”。我不能以传统方式使用javascript吗？

站点在所有其他视图（例如帖子/添加）中都可以正常呈现，并且 .js 文件包含在“帖子/视图/1”的源代码中

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T15:44:10.403

### 问题

您正在使用 javascript 的相对路径；

```
<script src='../js/jquery-1.9.1.min.js'></script> 
```

在此 url 中，`../`表示“从当前位置向上 1 个目录”，因此当您当前访问此 URL 时；

```
http://mysite.com/home/ 
```

然后您的浏览器将正确尝试从以下位置加载脚本；

```
http://mysite.com/js/jquery-1.9.1.min.js 
```

***但是，***如果您正在访问此网址；

```
http://mysite.com/home/and/some/more/ 
```

然后浏览器会在这里寻找 JavaScript：

```
http://mysite.com/home/and/some/js/jquery-1.9.1.min.js 
```

### 如何解决问题

1.  对所有“资产”（CSS、JavaScript、图像）使用绝对路径； `src='/js/jquery-1.9.1.min.js'`
2.  使用 CakePHP Helpers 输出脚本标签（毕竟，这就是它们的目的：*简化*你的工作:)，例如`echo $this->Html->script('jquery-1.9.1.min');`

# c# - 如何为公共的 Elastic Transcoder Amazon SDK 设置权限

> ID：15573821
> 
> 赞同：8
> 
> 时间：2013-03-22T15:15:54.583
> 
> 标签：c#, asp.net, amazon-s3

如何使用 Amazon.ElasticTranscoder.Model (.NET, C#) 公开所有文件。这是我的代码：

```
public static void CreateJobRequest(string videoPath, string bucketName)
{
string accsessKey = CloudSettings.AccessKeyID;
string secretKey = CloudSettings.SecreteKey;
var etsClient = new AmazonElasticTranscoderClient(accsessKey,secretKey, RegionEndpoint.USEast1);
var notifications = new Notifications()
{
Completed = "arn:aws:sns:us-east-1:XXXXXXXXXXXX:Transcode",
Error = "arn:aws:sns:us-east-1:XXXXXXXXXXXX:Transcode",
Progressing = "arn:aws:sns:us-east-1:XXXXXXXXXXXX:Transcode",
Warning = "arn:aws:sns:us-east-1:XXXXXXXXXXXX:Transcode"
};

var pipeline=etsClient.CreatePipeline(new CreatePipelineRequest()
{
Name = "MyFolder",
InputBucket = bucketName,
OutputBucket = bucketName,
Notifications = notifications,
Role = "arn:aws:iam::XXXXXXXXXXXX:role/Elastic_Transcoder_Default_Role"

}).CreatePipelineResult.Pipeline;
etsClient.CreateJob(new CreateJobRequest()
{
PipelineId = pipeline.Id,
Input = new JobInput()
{
AspectRatio = "auto",
Container = "mp4",
FrameRate = "auto",
Interlaced = "auto",
Resolution = "auto",
Key = videoPath

},
Output = new CreateJobOutput()
{
ThumbnailPattern = videoPath+"videoName{resolution}_{count}",
Rotate = "0",
PresetId = "1351620000000-000020",
Key = videoPath+"newFileName.mp4"
}
});
} 
```

一切正常，但转码文件是私有的。如何将其设置为公开？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-05-24T09:33:03.810

我今天刚遇到这个问题，解决方法如下：

在“为转码文件和播放列表配置 Amazon S3 存储桶”下的管道中

1.  使用“+ 添加权限链接”。
2.  选择“Grantee Type”作为“Amazon S3 Group”。
3.  选择“受让人”作为“所有用户”。
4.  然后将“访问”选中为“打开/下载”和“查看权限”
5.  保存更改。

您可以对以下部分中生成的任何缩略图重复此操作：“为缩略图配置 Amazon S3 存储桶”。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-12-03T09:53:44.933

只是为了添加到@timstermatic 答案-我只需要授予“打开/下载”访问权限即可公开对象。

“查看权限”选项用于允许任何人读取对象的[ACL（访问控制列表）](http://docs.aws.amazon.com/AmazonS3/latest/dev/ACLOverview.html)，而不是查看对象本身 - 这是由“打开/下载”选项处理的。

与 AWS 术语一样，它很容易被误解——它不是“查看对象的权限”，而是“查看对象的权限”。

（抱歉，我无法将此添加为评论，我没有足够的代表。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-01-17T18:54:41.467

通常，政策冲突会导致这种情况。处理此问题的更简单方法是在“权限”选项卡的“存储桶策略”部分中直接对存储桶设置公共读取权限。这段代码可能会有所帮助。

```
{
    "Version": "2008-10-17",
    "Statement": [
        {
            "Sid": "AllowPublicRead",
            "Effect": "Allow",
            "Principal": {
                "AWS": "*"
            },
            "Action": "s3:GetObject",
            "Resource": "arn:aws:s3:::<BUCKET_NAME>/*"
        }
    ]
} 
```

您也可以在 Resource 参数中指定文件夹。没有尝试过扩展，但我想这些也应该可以工作。

# spring - Spring中的JUnit测试-覆盖和忽略来自应用程序其他配置类的bean

> ID：15573822
> 
> 赞同：5
> 
> 时间：2013-03-22T15:15:57.213
> 
> 标签：spring, configuration, junit, javabeans

我们有用 Spring 3 编写的大型应用程序。我需要编写 JUnit 测试检查某些服务的行为。它不是一个单元，而是系统的一部分。它内部有一些服务和存储库一起工作->内部有很多注入的bean。该应用程序还使用方面。

**我的问题是。在这种测试情况下如何管理配置和bean？**我需要使用在应用程序配置中定义的 bean，并且在测试中只使用持久性重新定义 bean 以使用嵌入式数据库。所以我需要使用来自 src 的 bean，因为它们是定义的，并且只覆盖一些导致麻烦的问题（持久性 bean，使用 web 服务的 bean，......）但我不知道接下来会发生什么。我试图用以下方法注释测试配置类：

```
@Configuration
@EnableAspectJAutoProxy
@EnableTransactionManagement(mode = AdviceMode.ASPECTJ, proxyTargetClass = true)
@ComponentScan(basePackages = "com.example.our.app")
public class MyTestConfig implements TransactionManagementConfigurer { 
```

扫描整个应用程序并使用 src 文件夹中的 bean 配置。但这也会从其他导致问题的测试中获取配置。这整个策略好不好？现在怎么办 - 使用 excludeFilters 删除其他测试配置？还是这个策略很糟糕？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T15:22:52.703

我认为这里最好的使用方法是[Spring profiles](http://blog.springsource.org/2011/02/14/spring-3-1-m1-introducing-profile/)。现在检查[此处以使用 H2 进行](http://hillert.blogspot.com/2011/04/spring-31-bean-definition-profiles-for.html)带有配置文件的测试。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-02-03T11:58:17.767

`@ContextHierarchy`您可以使用注释提供的上下文合并功能选择性地覆盖 bean 。

为了使它适用于您的用例，您必须创建一个基本上下文来扫描您的应用程序中的 Spring bean：

```
@Configuration
@ComponentScan({"com.example.our.app"})
public class MyTestConfig implements TransactionManagementConfigurer { 
```

然后创建一个使用此上下文并为其命名的基类**- 这不适用于命名上下文！**：

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextHierarchy( {
    @ContextConfiguration(name="testContext", classes = MyTestConfig.class),
})
public class BaseTest { 
```

最后编写一个单元测试，扩展基类并以相同的名称定义一个新的上下文，以使用特定于测试的配置覆盖单个 bean：

```
 @ContextHierarchy(@ContextConfiguration(name="testContext", classes = OneUnitTest.Config.class))
    public class OneUnitTest extends AggroBaseTest {
      @Configuration
      static class Config {      
            ..
      } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-30T14:23:21.793

您还可以使用另一个导入覆盖

```
<beans>
    <import resource="classpath*:applocationContext.xml" />
    <bean id="dataSourceFactory" class=com.demo.MyNewClass/>
</beans> 
```

如果你在课堂上

```
this.applicationContext.getBean("dataSourceFactory"); 
```

检索类，你会看到新类的实例

更远

```
<bean id="dataSourceFactory" class="org.springframework.jdbc.datasource.DriverManagerDataSource" >
    <property name="driverClassName" value="${jdbc.driverClassName}"/>
    <property name="url" value="${jdbc.url}"/>
    <property name="username" value="${jdbc.username}"/>
    <property name="password" value="${jdbc.password}"/>
</bean> 
```

所以有不同的方法可以覆盖默认行为

# java - Java中的SQL。选择密码 ( md5 ) 问题。rs 不执行查询，抛出异常

> ID：15573826
> 
> 赞同：1
> 
> 时间：2013-03-22T15:16:09.733
> 
> 标签：java, mysql, sql, prepared-statement, md5

我有一个需要用户名、密码和 ID 的登录系统。数据库中的密码以 MD5 格式加密。我的测试密码是`test1`，加密后的密码是`5a105e8b9d40e1329780`。登录屏幕上的用户应输入`test1`密码并被允许进入系统。我只是继续收到我的弹出消息。

我的 SQL 查询如下所示：

```
String SQL = "SELECT login_judge.username, login_judge.password ,criminalrecords.ID FROM login_judge, criminalrecords "
           + "WHERE username = ? and password = md5(?) and ID = ?";
pst = conn.prepareStatement(SQL);
pst.setString(1, usernameF.getText());
pst.setString(2, passwordF.getText());
pst.setString(3, caseNoF.getText());

rs = pst.executeQuery();
if(rs.next())
{
    // rest of code
}
else
{
   // joption pane displaying info that something is wrong.
} 
```

来自 phpMyadmin

```
UPDATE  `w1283057`.`login_judge` SET  `password` = MD5(  'test1' ) WHERE  `login_judge`.`username` =  'test1'; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T16:16:57.643

对于 MD5 哈希，您的密码字段太短。它应该有至少 32 个字符的空间，但看起来你已经用最多 20 个字符定义了它。

将 md5(test1) 的输出与表中的值进行比较：

```
5a105e8b9d40e1329780d62ea2265d8a
5a105e8b9d40e1329780 
```

由于哈希值不相等，登录被拒绝。

如果您无法更改列定义，则可以使用以下`substring`函数剪切散列：

```
 + "WHERE username = ? and password = substr(md5(?), 1, 20) and ID = ?"; 
```

# safari - Watir webdriver：上传文件在 SAFARI 浏览器中不起作用？

> ID：15573830
> 
> 赞同：1
> 
> 时间：2013-03-22T15:16:23.850
> 
> 标签：safari, watir, watir-webdriver, safaridriver

我正在尝试在 Safari 浏览器中附加文件以使用表单上传。元素可搜索，但未附加文件。

```
<input type="file" id="file" name="file" maxlength="255" onchange="copyfile();" style="width: 59px; "> 
```

使用以下命令

```
b.file_field( :id=>"file" ).set "/Users/......../Desktop/abc"
returns
=> "/Users/......../Desktop/abc" 
```

但文件未填充在文件字段中

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T13:16:07.487

[问题 4220：SafariDriver 不支持文件上传](https://code.google.com/p/selenium/issues/detail?id=4220)

# r - 如何删除大型data.frame中的相同行

> ID：15573838
> 
> 赞同：-3
> 
> 时间：2013-03-22T15:16:44.953
> 
> 标签：r

我有一个如下所示的 data.frame：

```
GN  PN  
a   3.4   
a   3.4   
a   9.8   
d   8.4   
e   9 
e   6.5 
```

我想要以下输出：

```
GN  PN  
a   3.4   
a   9.8   
d   8.4   
e   9 
e   6.5 
```

（相同的行将被删除！）

我正在尝试使用发布在：[多列比较](https://stackoverflow.com/questions/14319935/multiple-columns-comparison)中的代码，但没有成功，因为复制的行（3.4）仍然存在。我有一个很大的 data.frame（大约 66.000 行和 10 列）。

真实案例：

```
 GN     SP                PN
A1CF   52573692   TCGA-B6-A0RS-01A-11D-A099
A1CF   52595854   TCGA-BH-A0HP-01A-12D-A099 
A1CF   52595854   TCGA-BH-A0HP-01A-12D-A099
A1CF   52595937   TCGA-BH-A18P-01A-11D-A12B
A2BP1  7568361    TCGA-D8-A1JN-01A-11D-A13L
A2BP1  7102099    TCGA-E2-A1BC-01A-11D-A14G
A2BP1  7102099    TCGA-E2-A1BC-01A-11D-A14G
A2BP1  7383011    TCGA-AR-A1AJ-01A-21D-A12Q
A2BP1  7383011    TCGA-AR-A1AJ-01A-21D-A12Q
A2BP1  7568188    TCGA-BH-A18J-01A-11D-A12B
A2BP1  7629860    TCGA-AO-A03O-01A-11W-A019
A2BP1  7629860    TCGA-AO-A03O-01A-11W-A019 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T15:18:26.160

只需使用：

```
 unique(df) 
```

这使 ：

```
 GN  PN
1  a 3.4
3  a 9.8
4  d 8.4
5  e 9.0
6  e 6.5 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T15:23:19.523

也许你可以试试`new.df=subset(df,!duplicate(df))`

# php - php - 多维数组 foreach 只返回一个结果

> ID：15573839
> 
> 赞同：0
> 
> 时间：2013-03-22T15:16:48.533
> 
> 标签：php, arrays, multidimensional-array

我是 php 的初学者，我有一个变量，关于上传图像的信息

我得到一个多维数组

```
Array
(
    [0] => Array
        (
            [errors] => Array
                (
                )

            [path] => addons/uploads/albums/1/1/rDtKgyVAvTjSkLA.jpg
            [filename] => rDtKgyVAvTjSkLA.jpg
            [original_name] => rachaelCache_5750270_thm.jpg
            [resizes] => Array
                (
                    [0] => 1
                    [1] => 1
                )

        )

    [1] => Array
        (
            [errors] => Array
                (
                )

            [path] => addons/uploads/albums/1/1/qTLglBgAPxvDFtr.png
            [filename] => qTLglBgAPxvDFtr.png
            [original_name] => Screen Shot 2013-03-02 at 11.28.48 AM.png
            [resizes] => Array
                (
                    [0] => 1
                    [1] => 1
                )

        )

) 
```

但是当我 foreach 它时，我只能得到一个结果

```
foreach ($upload as $row) {
   echo $row['filename'];
} 
```

请有人告诉我为什么会这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T15:36:02.493

将您的代码重新创建为实时演示，效果很好：---> [http://3v4l.org/986e7](http://3v4l.org/986e7)

```
$upload = array(array(
        'errors' => array(), 
        'filename' => '/some/path/to/a/file.jpg'), 
    array(
        'errors' => array(), 
        'filename' => '/yet/another/path.jpg'));

var_dump($upload);

foreach ($upload as $x) 
    echo $x['filename'],"<br>";

echo $upload[0]['filename']; 
```

为了找出问题所在，我会`var_dump($upload);`在您的 -loop 之前放置一个权利，`foreach`以查看 $upload 是否包含您认为的内容。

# android - Android为什么开放443端口？

> ID：15573840
> 
> 赞同：-1
> 
> 时间：2013-03-22T15:16:54.330
> 
> 标签：android, https, port

我注意到我的 Android 手机打开了 https 端口 (443)。这是 nmap 报告：

```
PORT    STATE SERVICE VERSION
443/tcp open  http    Mongoose httpd
|_http-methods: No Allow or Public header in OPTIONS response (status code 400)
|_http-title: Index of / 
```

如果我尝试从浏览器访问此页面，则无法访问该端口：`https://PHONE_IP`我收到此错误：`ERR_SSL_PROTOCOL_ERROR`

我尝试使用 adb shell 连接，端口实际上是打开的，这是 netstat 报告：

```
Proto Recv-Q Send-Q Local Address          Foreign Address        State
 tcp       0      0 127.0.0.1:7777         0.0.0.0:*              LISTEN
 tcp       0      0 127.0.0.1:7203         0.0.0.0:*              LISTEN
 tcp       0      0 127.0.0.1:5037         0.0.0.0:*              LISTEN
 tcp       0      0 127.0.0.1:80           0.0.0.0:*              LISTEN
 tcp       0      0 0.0.0.0:443            0.0.0.0:*              LISTEN 
```

但我不明白哪个进程绑定了 433 端口。有什么建议么？

更新：Android netstat 没有选项，甚至没有 -h 选项。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T15:20:31.757

我不记得 Android 是否`netstat`有这个`-p`选项，但如果有，那将是学习打开端口的进程 ID 的最简单方法。

否则，您可以遍历 /proc/ 目录，查看每个进程打开的文件描述符，直到找到有问题的文件描述符。

# php - php分页出现错误

> ID：15573841
> 
> 赞同：-2
> 
> 时间：2013-03-22T15:16:57.790
> 
> 标签：php

你好，我是 php 新手，我遇到了这个错误

```
Notice: Undefined variable: page_pagination in K:\PHP WAMP\wamp\www\Oracle Certified Masters\Oracle Certified Masters\includes\middle.php on line 82 
```

这是我的示例代码..请帮助我..

```
<?php

// how many rows to show per page
$rowsPerPage = 10;

// by default we show first page
$page_num = 1;

// if $_GET['page'] defined, use it as page number, $_GET gets the page number out of the url
//set by the $page_pagination below
if(isset($_GET['page'])){$page_num = $_GET['page'];}

//the point to start for the limit query
$offset = $page_num;
$page_pagination;
// Zero is an incorrect page, so switch the zero with 1, mainly because it will cause an error with the SQL
if($page_num == 0) {$page_num = 1;}

// counting the offset

$sql = "SELECT QUERY Limit $offset, $rowsPerPage ";
$res = mysql_query($sql) or die(mysql_error());

// how many rows we have in database
$sql2  = "SELECT COUNT(sub_ID) AS numrows FROM posts ";
$res2  = mysql_query($sql2) or die(mysql_error());
$row2  = mysql_fetch_array($res2);
$numrows = $row2['numrows'];

// print the random numbers
while($row = mysql_fetch_array($res))
{
    //Echo out your table contents here.

    echo $row[1].'<BR>';
    echo $row[2].'<BR>';
    echo '<BR>';
}

// how many pages we have when using paging?
$numofpages = ceil($numrows/$rowsPerPage);

// print the link to access each page
$self = "index.php?";

if ($numofpages > '1' ) {

    $range =15; //set this to what ever range you want to show in the pagination link
    $range_min = ($range % 2 == 0) ? ($range / 2) - 1 : ($range - 1) / 2;
    $range_max = ($range % 2 == 0) ? $range_min + 1 : $range_min;
    $page_min = $page_num- $range_min;
    $page_max = $page_num+ $range_max;

    $page_min = ($page_min < 1) ? 1 : $page_min;
    $page_max = ($page_max < ($page_min + $range - 1)) ? $page_min + $range - 1 : $page_max;
    if ($page_max > $numofpages) {
        $page_min = ($page_min > 1) ? $numofpages - $range + 1 : 1;
        $page_max = $numofpages;
    }

    $page_min = ($page_min < 1) ? 1 : $page_min;

    //$page_content .= '<p class="menuPage">';

    if ( ($page_num > ($range - $range_min)) && ($numofpages > $range) ) {
        $page_pagination .= '<a class="num"  title="First" href="'.$self.'page=1">&lt;</a> ';
    }

    if ($page_num != 1) {
        $page_pagination .= '<a class="num" href="'.$self.'page='.($page_num-1). '">Previous</a> ';
    }

    for ($i = $page_min;$i <= $page_max;$i++) {
        if ($i == $page_num)
        $page_pagination .= '<span class="num"><strong>' . $i . '</strong></span> ';
        else
        $page_pagination.= '<a class="num" href="'.$self.'page='.$i. '">'.$i.'</a> ';
    }

    if ($page_num < $numofpages) {
        $page_pagination.= ' <a class="num" href="'.$self.'page='.($page_num + 1) . '">Next</a>';
    }

    if (($page_num< ($numofpages - $range_max)) && ($numofpages > $range)) {
        $page_pagination .= ' <a class="num" title="Last" href="'.$self.'page='.$numofpages. '">&gt;</a> ';
    }

    //$page['PAGINATION'] ='<p id="pagination">'.$page_pagination.'</p>';
}//end if more than 1 page

echo $page_pagination.'<BR><BR>';

echo 'Number of results - '.$numrows ;
echo ' and Number of pages   - '.$numofpages.'<BR><BR>';

// Free resultset
//mysql_free_result($res);

// and close the database connection
//mysql_close($con);

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T15:18:53.523

简单`$page_pagination;`语句将此变量的值设置为`null`。但是当您`.=`稍后使用运算符时（或者，如果没有页面，`echo`则直接使用它），您需要将其设置为更实质的内容 - 同时为空。

一个空字符串非常适合这个类别：

```
$page_pagination = ''; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T15:22:44.257

这不是错误。这是一个通知。[PHP 为您的代码提供不同级别的通知。](http://www.php.net/manual/en/errorfunc.constants.php)通知、警告和错误。

**通知**意味着您的代码中有一些看起来不正确的东西。这**不会停止代码执行**。

**WARNING**表示代码中的某些内容可能会给您带来错误。这**不会停止代码执行**。

一个**错误**意味着，嗯，有一个错误。这**将停止您的代码执行**。

就您收到的通知而言：很明显，您正在使用变量 $page_pagination，但之前没有定义它。

所以不仅仅是拥有

```
$page_pagination; 
```

将其设置为：

```
$page_pagination = ''; 
```

有不同级别的通知、警告和错误可帮助您识别其来源。您可以在此答案顶部的链接上找到它们。

# css - 如何使用 Twitter Bootstrap 创建网格标题？

> ID：15573844
> 
> 赞同：11
> 
> 时间：2013-03-22T15:17:08.600
> 
> 标签：css, twitter-bootstrap

如何使用如下图所示的简单标题来设置引导网格的样式？

当我尝试更改第一行的背景颜色时，由于网格填充，颜色不会延伸到网格的边缘。当我删除左/右网格填充时，它会弄乱圆角。

html 看起来像这样：

```
<div class="container-fluid" style="border: solid 1px black; border-radius: 10px; max-width: 400px">
<div class="row-fluid">
    <div class="span3">Name</div>
    <div class="span3">Count</div>
</div>
<div class="row-fluid">
    <div class="span3">Joe</div>
    <div class="span3">10</div>
</div>
<div class="row-fluid">
    <div class="span3">Bob</div>
    <div class="span3">7</div>
</div>
</div> 
```

![在此处输入图像描述](../Images/bf6a1ab3ebe153f601c723845b311875.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-22T15:29:33.480

这有帮助吗？[带有背景颜色的 div 上的圆角](https://stackoverflow.com/questions/6484820/rounded-corners-on-divs-with-background-color)。

```
<div class="container-fluid" style="border: solid 1px black; border-radius: 10px; max-width: 400px; padding: 0px">
    <div class="row-fluid" style="background-color: #f0f0f0; border-top-left-radius: 10px; border-top-right-radius: 10px;">
        <div class="span3">Name</div>
        <div class="span3">Count</div>
    </div>
    <div class="row-fluid">
        <div class="span3">Joe</div>
        <div class="span3">10</div>
    </div>
    <div class="row-fluid">
        <div class="span3">Bob</div>
        <div class="span3">7</div>
    </div>
</div> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-22T15:32:34.137

这是您可能应该使用表格的情况之一。屏幕阅读器用户会喜欢它，并且 Bootstrap 内置的样式应该会有所帮助。

[http://twitter.github.com/bootstrap/base-css.html#tables](http://twitter.github.com/bootstrap/base-css.html#tables)

# libgit2sharp - 如何确定获取的远程引用是否具有更新版本的文件？

> ID：15573845
> 
> 赞同：2
> 
> 时间：2013-03-22T15:17:20.513
> 
> 标签：libgit2sharp

我对从*HostA*推送到远程的文件 (RemoteTest.txt) 进行了更改。在*HostB*上，我的状态是没有最后一次推送。

现在，当我使用“git diff”进入 bash 时，我看到了变化。

```
$ git diff origin/master head
 diff --git a/RemoteTest.txt b/RemoteTest.txt
 index 40604b4..b36b5e8 100644
 --- a/RemoteTest.txt
 +++ b/RemoteTest.txt @@ -1 +1,6 @@ 
```

..等等...

我试图在 C# 中使用

```
IEnumerable<string> paths = new List<string>() {@"origin/master", "head"};
TreeChanges tc = repo.Diff.Compare(paths); 
```

但 tc 显示 0 变化。这样做的正确方法是什么？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T17:21:45.250

您需要比较and引用所指向的`Tree`s 的s。`Commit``HEAD``origin/master`

像下面这样的东西怎么样？

```
var headTree = repo.Head.Tip.Tree;
var remoteMasterTree = repo.Branches["origin/master"].Tip.Tree;

TreeChanges tc = repo.Diff.Compare(remoteMasterTree, headTree); 
```

**注意：**`Compare`重载接受的可选路径列表应包含到比较文件中的文件的路径（或路径规范） `Trees`。例如，考虑到您的用例，您可以将`new[] { "RemoteTest.txt" }`第三个参数作为方法传递。

# controls - Cycle2 插件隐藏/显示按钮 jQuery

> ID：15573852
> 
> 赞同：0
> 
> 时间：2013-03-22T15:17:35.980
> 
> 标签：controls, show-hide, jquery-cycle

我在博客网站上使用了 jQuery cycle2 插件。我想要幻灯片做的是当显示超过 1 个图像时，控件将显示-在它们通过 css 隐藏的那一刻。

通过在我的标头中声明它来使用该插件（这里是 js 文件的链接：http: [//malsup.github.com/jquery.cycle2.js](http://malsup.github.com/jquery.cycle2.js)

然后我的 css 包含一个用于幻灯片容器的类、一个用于按钮容器的类以及一个用于 prev 和 next 按钮的类：

CSS：

```
.cycle-slideshow {
    height:400px;
    z-index:0;
}

.cycle-slideshow  img{
    width:100%;
    height:100%;
    z-index:3;
}

.center {
 display:none;  
}

.center a{
    z-index:4;
    position:absolute;
    margin-top:-48px;
}

.center a:hover {
    display:block;
}

.center a#prev, .center a#next{
    position:relative;
    width:4%;
    height:60px;
    width:60px;
    margin-top:-60px;
    font-size:40px;
    text-align:center;  
    color:#FFF;

}

.center a#next{
    float:right;
    background:url(images/next.png) center -2px no-repeat;
}

.center a#prev {
        float:left;
    background:url(images/prev.png) center -2px no-repeat;
} 
```

我的 html 代码实际上嵌入在 wordpress 函数中，但 html 格式如下：

```
<div class="cycle-slideshow"
    data-cycle-fx="scrollHorz"
    data-cycle-pause-on-hover="true"
    data-cycle-speed="200"
    data-cycle-next="#next"
    data-cycle-prev="#prev"
    data-cycle-swipe="true">

    //does stuff here
    </div>
    <div class="center">
        <a href="javascript:void(0);" id="prev">&nbsp;</a> 
        <a href="javascript:void(0);" id="next">&nbsp;</a>
    </div> 
```

我被告知要执行以下代码（前三行），但这似乎仍然不起作用。

```
$(document).ready(function () {   
            $('.cycle-slideshow').on( 'cycle-initialized', function( e, opts ) {
            if ( opts.slideCount > 1 ) {
                $(".center").css("display", "block");
            }
    });
}); 
```

我不是最好的 jQuery，所以任何人都可以帮助或给我任何指导吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T20:59:28.817

在这种情况下，您将希望在添加事件处理程序之后通过代码初始化幻灯片。删除`cycle-slideshow` 该类，使其不会自动初始化，然后您可以执行以下操作：

演示：http: [//jsfiddle.net/lucuma/zyhrK/1/](http://jsfiddle.net/lucuma/zyhrK/1/)

```
$('.slideshow').on('cycle-initialized', function (e, opts) {
    if (opts.slideCount > 1) {
        $(".center").css({
            "display": "block"
        });
    }
});

$('.slideshow').cycle(); 
```

# android - 用于下拉文本的 xml

> ID：15573854
> 
> 赞同：0
> 
> 时间：2013-03-22T15:17:43.727
> 
> 标签：android, android-layout, android-xml

当我不知道如何做某事时，我使用了这个论坛，但现在我决定开始参与它。

我想知道如何做一个下拉文本（也许它有一个特定的名称，这就是我在互联网上找不到任何结果的原因）。我的意思是，我在屏幕上有一些标签（关于、公司、联系人……）。这些标签中的每一个在右侧都有一个向下箭头，当我单击它时，它必须显示（如果再次单击它则隐藏）。

这是我想要做的图像的链接。

[http://i45.tinypic.com/4fzoso.png](http://i45.tinypic.com/4fzoso.png)

[http://i47.tinypic.com/2u5886q.png](http://i47.tinypic.com/2u5886q.png)

先感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T15:55:55.993

您应该使用[ExpandableListView](http://developer.android.com/reference/android/widget/ExpandableListView.html)组件。这里有一个[教程](http://www.mysamplecode.com/2012/10/android-expandablelistview-example.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T10:50:27.693

最后，我使用属性 android:visibility 对 ImageViews 和 TextViews 进行了处理。现在它是一个静态版本，工作正常。我希望从数据库中获取信息时它继续运行良好

# c# - 如何将datagrid数据转成树形结构，能否提高搜索速度？

> ID：15573856
> 
> 赞同：0
> 
> 时间：2013-03-22T15:17:53.320
> 
> 标签：c#

我尝试解决一个电话业务问题，比如说有非常庞大的通话记录，每个通话记录主要包含“主叫号码”、“被叫号码”、“开始日期时间”、“持续时间”。

原始数据存储在 excel 中，我已将它们导入到 infragistics 的 ultragrid 控件中，例如 grid_A。

我想要做的是：对于grid_A外的某个通话记录，搜索grid_A并查找是否有匹配的记录。匹配意味着两条记录具有相同的“呼叫者号码”，“被叫号码”，并且两条记录具有相似“开始日期时间”，“持续时间”，例如，他们的“开始日期时间”是
00:10:00 和 00:12:00 ，仅相差 2 分钟。

因为这样的比较也会进行很多次并且当前的搜索代码太慢，我想如果我可以将网格数据更改为树结构。树i图像是这样的形式：
第一层是“caller num”，假设“caller num”有100个节点，下面是“caller num”，假设每个“caller num”，可能有1-10个“称为num”最后一级是“开始时间”和“持续时间”。

我想知道的是：如果这个结构可以用c#完成以及如何做到这一点，这个结构是否可以大大改善我的搜索。

期待您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T15:58:34.863

> 我想要做的是：对于grid_A之外的某个通话记录，搜索grid_A并查找是否有匹配的记录。匹配意味着两条记录具有相同的“呼叫者号码”，“被叫号码”，并且两条记录具有相似“开始日期时间”，“持续时间”，例如，他们的“开始日期时间”是 00:10:00 和 00:12:00 ，仅相差 2 分钟。

听起来您正在尝试对网格中显示的记录进行搜索，尽管我承认我在解析您的语言时遇到了困难。

如果是这种情况，并且由于您只有四列，我建议`Dictionary<string, IEnumerable<object>>`在您的所有记录上创建一个索引 ()，将其作为键`caller num`并将`called num`其存储（值将是与给定键匹配的行对象）。然后，您可以有效地找到匹配的候选者，并使用 Linq 对（理想情况下更小的）记录子集进行排序，以找到进一步符合您条件的记录。

事实上，考虑到这一点，这种方法将问题变成了 map-reduce 问题，其中 map 阶段是查询各个索引条目以找到匹配的条目。linq 查询可以并行执行，以进一步加快执行时间。

# css - HTML/CSS 图像对齐

> ID：15573858
> 
> 赞同：0
> 
> 时间：2013-03-22T15:17:58.313
> 
> 标签：css, html

我有这个代码：

```
<div id="mainDiv" style="text-align:center>
<img src="redFarm.jpg" style="width: 250px">
<img src="board.jpg" style="width: 750px">
<img src="blueFarm.jpg" style="width: 250px">
</div> 
```

棋盘图像正好位于屏幕的中心。现在，另一个与尽可能多的中心对齐，我希望它们尽可能靠近边界（左和右）。我尝试了很多组合，但其中任何一个都没有运气。大家能给我指点一下吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T15:26:20.910

尝试左右浮动图像：

```
<div id="mainDiv" style="text-align:center">
<img src="redFarm.jpg" style="float:left; width: 250px">
<img src="board.jpg" style="width: 750px">
<img src="blueFarm.jpg" style="float: right; width: 250px">
</div> 
```

这会将图像放在容器的顶部；如果这是一个问题，您可以尝试明确指定高度。

# jquery - 每个里面的jquery setTimeout

> ID：15573859
> 
> 赞同：0
> 
> 时间：2013-03-22T15:18:03.347
> 
> 标签：jquery, settimeout, each, arrayiterator

我有一些类似的代码，它在一些图像中移动......它可以工作，但它似乎不尊重计时器

```
var i = 1;
var indexArray = array(1,2,3);
var timerx = new Array();

$( indexArray ).each(function( indexArraykey ) {

    function internalCallback ( i, indexArraykey ) {
        val = indexArray[indexArraykey];
        console.log("test " + i + val);
    }); 

    timerx[i] = setTimeout( internalCallback( i, indexArraykey ), i * 500000 );                     

    i++;

}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T15:19:47.193

几点：

*   `i`在调用回调时具有循环结束的值。
*   要使用 jQuery 遍历数组，请使用`$.each(array,`，而不是`$(array).each(`
*   该函数不必在循环中定义
*   each 将索引作为回调的第二个参数，并将值作为第一个参数。

所以看起来你想要的实际上是这样的：

```
var indexArray = array(1,2,3);
var timerx = [];
$.each(indexArray, function( indexArrayValue, i ) {
    timerx.push(setTimeout(function(){
        console.log("test " + i + ' : ' + indexArrayValue);
    }, (i+1) * 500000));
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T15:40:42.797

我不是 javascript 专家，但看起来这里`internalCallback`被调用而不是作为函数传递给`setTimeout`.

尝试这个：

```
var i = 1;
var indexArray = [3,6,9];
var timerx = new Array();

$( indexArray ).each(function( indexArraykey ) {

    function internalCallback ( i, indexArraykey ) {
        return function () {
            val = indexArray[indexArraykey];
            console.log("test " + i + val);
        }
    } 

    timerx[i] = setTimeout( internalCallback( i, indexArraykey ), i * 5000);                     

    i++;

}); 
```

这是小提琴[http://jsfiddle.net/Guxdz/2/](http://jsfiddle.net/Guxdz/2/)（检查控制台日志）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T15:32:17.333

那设计太差了，不就是一个完全的反js模式，甚至超出了……你为什么要一遍又一遍地定义相同的函数！！！

```
$(imgNumArray).each(function (indexArraykey) {
    (function (i) {
        timerx[i] = setTimeout(internalCallback(i, indexArraykey), i * 500000);
    })(i++);
});

function internalCallback(i, indexArraykey) {
    val = indexArray[indexArraykey];
    console.log("test " + i + val);
} 
```

# android - 游戏生成滞后

> ID：15573869
> 
> 赞同：0
> 
> 时间：2013-03-22T15:18:29.983
> 
> 标签：android, android-asynctask, render

我有这个游戏，它确实需要大量的项目生成，所以我在 AsyncTask 中处理了这一切，但是这个类有时需要很长时间才能执行，而其他时候需要几毫秒......是什么导致这种情况有时快有时慢？

```
public class handleStuff extends AsyncTask<String, Integer, String>
    {
        @Override
        protected String doInBackground(String... arg0) {
            Random r = new Random();
            if(r.nextInt(200) == 0 && clouds.size() <= 6)
            {
                Cloud c = new Cloud(SCREEN_WIDTH, SCREEN_HEIGHT, cloudBM1.getWidth(), cloudBM2.getHeight());
                clouds.add(c);
            }
            for(int i = clouds.size() - 1; i > -1; i--) 
            {
                Cloud tempC = clouds.get(i);
                if(tempC.x <= 0 - cloudBM1.getWidth() && tempC.dir == 0)
                    clouds.remove(i);
                if(tempC.x >= SCREEN_WIDTH && tempC.dir == 1)
                    clouds.remove(i);
            }
            if(System.currentTimeMillis() - lastESpawn >= 750)
            {
                Enemy x = new Enemy(SCREEN_WIDTH, SCREEN_HEIGHT, enemy.getWidth(), enemy.getHeight());
                enemies.add(x);

                lastESpawn = System.currentTimeMillis();
            }
            for(int i = enemies.size() - 1; i > -1; i--) 
            {
                Enemy tempE = enemies.get(i);
                if(tempE.x <= 0 - enemy.getWidth())
                    enemies.remove(tempE);
            }
            for(int i = 0; i < enemies.size(); i++)
            {
                Enemy tempE = enemies.get(i);
                if(System.currentTimeMillis() - tempE.lastBulletSpawn >= 800 && tempE.x <= SCREEN_WIDTH)
                {
                    EnemyBullet eb = new EnemyBullet(tempE.x, tempE.y, enemyBullet.getWidth(), enemyBullet.getHeight(), enemy.getWidth(), enemy.getHeight());
                    enemyBullets.add(eb);

                    tempE.lastBulletSpawn = System.currentTimeMillis();
                }
            }
            for(int i = bullets.size() - 1; i > -1; i--) 
            {
                Bullet tempB = bullets.get(i);
                if(tempB.x >= SCREEN_WIDTH)
                    bullets.remove(i);
            }
            for(int i = enemyBullets.size() - 1; i > -1; i--) 
            {
                EnemyBullet tempEB = enemyBullets.get(i);
                if(tempEB.x <= 0 - enemyBullet.getWidth())
                    enemyBullets.remove(i);
            }
            if(System.currentTimeMillis() - lastPBSpawn >= 400)
            {
                Bullet b = new Bullet(x, y, player.getWidth(), player.getHeight());
                bullets.add(b);

                lastPBSpawn = System.currentTimeMillis();
            }
            for(int i = explosions.size() - 1; i > -1; i--) 
            {
                Explosion tempEx = explosions.get(i);
                tempEx.update();
                if(tempEx.duration <= 0)
                    explosions.remove(i);
            }
            initial_load = true;
            return null;
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T16:32:27.413

好吧，没有人喜欢调试，我敢打赌没有人会自己做测试。那取决于你。所以你要做的是记录一个操作需要多长时间。这很容易。一些示例代码。

```
public class HandleStuffJob extends AsyncTask<String, Integer, String> {
    private long mTime;

    @Override
    protected String doInBackground(String... params) {
        startLogging();

        try {
            doSomeFancyStuff();
        }

        catch (InterruptedException e) {
            e.printStackTrace();
        }

        stopLogging();

        return null;
    }

    private void startLogging() {
        mTime = System.currentTimeMillis();
    }

    private void doSomeFancyStuff() throws InterruptedException {
        /*
         * For this demonstration I will just sleep the thread and pretend it to
         * do some work.
         */

        Thread.sleep(1234);
    }

    private void stopLogging() {
        long now = System.currentTimeMillis();

        Log.d("Test", "The operation took " + (now - mTime) + " milliseconds or " + ((now - mTime) / 1000) + " seconds.");
    }
} 
```

并且**请**仅使用大写字符作为类名。

# r - Hexbin 包装中需要特定颜色吗？

> ID：15573871
> 
> 赞同：3
> 
> 时间：2013-03-22T15:18:33.057
> 
> 标签：r, plot

我正在绘制高密度点的散点图。我使用 Hexbin 包并成功绘制了数据。颜色不漂亮，我被要求遵循标准颜色。我想知道 R 是否支持它。图片显示了我的输出（右）和想要的颜色（左）。![在此处输入图像描述](../Images/e0ddf4519ad22baab580b003e28cb4fd.png)

例子：

```
 x <- rnorm(1000)
    y <- rnorm(1000)
   bin<-hexbin(x,y, xbins=50) 
   plot(bin, main="Hexagonal Binning") 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-22T15:39:01.023

使用包 helpapge 上的示例，`hexbin`您可以像这样接近使用`rainbow`和玩`colcuts`参数...

```
x <- rnorm(10000)
y <- rnorm(10000)
(bin <- hexbin(x, y))

plot(hexbin(x, y + x*(x+1)/4),main = "Example" ,
     colorcut = seq(0,1,length.out=64),
     colramp = function(n) rev(rainbow(64)),
     legend = 0 ) 
```

![在此处输入图像描述](../Images/1052ca911feeea94a7c6a4d4dc7fe288.png)

您将需要使用图例规范等来获得您想要的。

[@Roland](https://stackoverflow.com/users/1412059/roland)建议的替代调色板

```
## nicer colour palette
cols <- colorRampPalette(c("darkorchid4","darkblue","green","yellow", "red") )
plot(hexbin(x, y + x*(x+1)/4), main = "Example" ,
colorcut = seq(0,1,length.out=24),
colramp = function(n) cols(24) ,
legend = 0 ) 
```

![在此处输入图像描述](../Images/9693d4dafb0e7e9fb380a4e3e5b1eee5.png)

# android - 在android中的多个微调器中更改项目布局

> ID：15573876
> 
> 赞同：1
> 
> 时间：2013-03-22T15:18:48.750
> 
> 标签：android

我在这篇文章中使用了多个微调器：[Android Spinner with multiple selection](https://stackoverflow.com/questions/5015686/android-spinner-with-multiple-choice)

但我想改变项目的外观。我有自己的布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="horizontal" >

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:src="@drawable/radiobutton2" />

    <LinearLayout
        android:layout_width="40dp"
        android:layout_height="match_parent"
        android:orientation="vertical" 
        android:background="@android:color/black">
    </LinearLayout>

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Large Text"
        android:layout_gravity="center"
        android:textAppearance="?android:attr/textAppearanceLarge" 
        android:layout_marginLeft="10dp"/>

</LinearLayout> 
```

我想在我自己的布局上更改项目布局。我怎么能这样做？

# php - .swf 和安全性的用户上传

> ID：15573879
> 
> 赞同：1
> 
> 时间：2013-03-22T15:19:00.910
> 
> 标签：php, security, flash

我有一个 PHP 网站，我想知道让用户上传 .SWF 文件是否安全？

如果是，我能做些什么来让它 100% 安全吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T17:49:28.013

一般来说，允许用户上传任何可能以某种形式（无论是二进制文件还是脚本）可执行的文件是很危险的。根据用户的需要，可能有一种安全的方法。

只要用户不需要执行 .SWF 而只是存储它们，您就可以简单地从文件中删除位于服务器上的可执行位。这样文件就无法在您的服务器上执行。

但是，您必须解决的问题是用户上传了针对*其他用户*而不是您的服务器的恶意 SWF。即使您删除了可执行位，用户仍然可以诱骗其他用户下载并执行存储在您服务器上的 SWF。要解决此问题，您应该坚持让用户登录才能访问他们的文件，或者至少是 SWF 文件。这样，如果没有有效的会话，某人就无法访问它。

重要的是文件不由您的服务器执行。Flash 因漏洞而臭名昭著，您不希望被上传恶意 SWF 以执行到您的服务器的用户 Pwned。

# php - 使用 PHP 在动态表格创建中应用表格样式

> ID：15573881
> 
> 赞同：0
> 
> 时间：2013-03-22T15:19:05.243
> 
> 标签：php, html, css, forms

我无法将 CSS 样式应用于我的动态表。我正在连接到数据库，并且我知道数据已正确填充并显示。我的问题是有 900 条记录，我想限制表格大小，使用滚动条。我已经阅读了其他软件，完成此操作的正确 CSS 样式节点是：[如何指定表格的高度以使垂直滚动条出现？](https://stackoverflow.com/questions/4457274/css-how-to-specify-tables-height-such-that-a-vertical-scroll-bar-appears)

溢出：自动；

高度：700px；

显示：块；

溢出-y：滚动；

起初，我尝试使用内联样式进行此操作（禁止...我意识到），但它没有用。我已经阅读了有关向表和/或单个行添加“类”的信息，这将反映在我的 CSS 样式表中，但我似乎无法弄清楚如何实现这一点。当我在 PHP 中添加“span”或“class”标签指示符时出现语法错误（我想象使用“ECHO”——这两个都需要双引号）。

我正在努力完成的一个很好的例子：[http ://www.timrivera.com/tests/csstables.html#markupIE](http://www.timrivera.com/tests/csstables.html#markupIE)

下面的 PHP 代码片段有很好的语法，但我不知道在哪里适当地添加类或跨度指示符。需要注意的一件事 - 我需要为不同的表格设置不同的样式，因此更改全局“表格”CSS 是行不通的。

```
//Function that gets the SQL recordset. 
$result2 = Get_Package_Info_EXT($conn, $var_PartNumber);
//do the table edits here.
   echo "<table border='1' >
  <tr>
  <th>Facility</th>
  <th>Process Flow</th>
  <th>Operation</th>
  <th>Device</th>
  <th>Item</th>
  <th>Value</th>
  <th>Database Source</th>

  </tr>";

  while($row2 = oci_fetch_array($result2)){
  echo "<tr>";
  echo "<td>" . $row2['FACILITY_AT'] . "</td>";
  echo "<td>" . $row2['SUB_FLOW_TYPE'] . "</td>";
  echo "<td>" . $row2['OPN_NAME'] . "</td>";
  echo "<td>" . $row2['SPEC_DEVICE'] . "</td>";
  echo "<td>" . $row2['COMPONENT_NAME'] . "</td>";
  echo "<td>" . $row2['COMPONENT_VALUE'] . "</td>";
  echo "<td>" . $row2['SOURCE'] . "</td>";
  echo "</tr>";
  }
  echo "</table>"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T15:42:15.590

我认为最好的方法是在桌子周围包裹一个 div 并给 div 一个高度。

[http://phpfiddle.org/main/code/i7h-9b1](http://phpfiddle.org/main/code/i7h-9b1)

```
<style type="text/css">
    #scroll {
        height: 100px; /* Max height of table */
        overflow-y: scroll;
        width: 340px;
    }
</style>

<div id="scroll">
    table
</div> 
```

使用您的代码：

```
echo '
<style type="text/css">
     #scroll {
         height: 100px; /* Max height of table */
         overflow-y: scroll;
         width: 340px;
    }
</style>';

//Function that gets the SQL recordset. 
$result2 = Get_Package_Info_EXT($conn, $var_PartNumber);
//do the table edits here.
   echo "<div id='scroll'><table border='1' >
  <tr>
  <th>Facility</th>
  <th>Process Flow</th>
  <th>Operation</th>
  <th>Device</th>
  <th>Item</th>
  <th>Value</th>
  <th>Database Source</th>

  </tr>";

  while($row2 = oci_fetch_array($result2)){
  echo "<tr>";
  echo "<td>" . $row2['FACILITY_AT'] . "</td>";
  echo "<td>" . $row2['SUB_FLOW_TYPE'] . "</td>";
  echo "<td>" . $row2['OPN_NAME'] . "</td>";
  echo "<td>" . $row2['SPEC_DEVICE'] . "</td>";
  echo "<td>" . $row2['COMPONENT_NAME'] . "</td>";
  echo "<td>" . $row2['COMPONENT_VALUE'] . "</td>";
  echo "<td>" . $row2['SOURCE'] . "</td>";
  echo "</tr>";
  }
  echo "</table></div>"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T15:44:10.010

编辑您的 PHP 代码以...

```
//Function that gets the SQL recordset. 
$result2 = Get_Package_Info_EXT($conn, $var_PartNumber);
//do the table edits here.
  echo "<div class=\"table-container\">";
  echo "<table border='1' >
  <tr>
  <th>Facility</th>
  <th>Process Flow</th>
  <th>Operation</th>
  <th>Device</th>
  <th>Item</th>
  <th>Value</th>
  <th>Database Source</th>

  </tr>";

  while($row2 = oci_fetch_array($result2)){
  echo "<tr>";
  echo "<td>" . $row2['FACILITY_AT'] . "</td>";
  echo "<td>" . $row2['SUB_FLOW_TYPE'] . "</td>";
  echo "<td>" . $row2['OPN_NAME'] . "</td>";
  echo "<td>" . $row2['SPEC_DEVICE'] . "</td>";
  echo "<td>" . $row2['COMPONENT_NAME'] . "</td>";
  echo "<td>" . $row2['COMPONENT_VALUE'] . "</td>";
  echo "<td>" . $row2['SOURCE'] . "</td>";
  echo "</tr>";
  }
  echo "</table>";
  echo "</div>"; 
```

然后只需使用样式

```
div.table-container table {} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T17:39:42.833

使用 Calum 的样式格式，您可以这样做：

```
//Function that gets the SQL recordset. 
$result2 = Get_Package_Info_EXT($conn, $var_PartNumber);
//do the table edits here.
echo "<style>#size{height:100px;width:340px;overflow-y:scroll;}</style>";
echo "<table id='size' border='1'>
<tr>
<th>Facility</th>
<th>Process Flow</th>
<th>Operation</th>
<th>Device</th>
<th>Item</th>
<th>Value</th>
<th>Database Source</th>

</tr>";

while($row2 = oci_fetch_array($result2)){
echo "<tr>";
echo "<td>" . $row2['FACILITY_AT'] . "</td>";
echo "<td>" . $row2['SUB_FLOW_TYPE'] . "</td>";
echo "<td>" . $row2['OPN_NAME'] . "</td>";
echo "<td>" . $row2['SPEC_DEVICE'] . "</td>";
echo "<td>" . $row2['COMPONENT_NAME'] . "</td>";
echo "<td>" . $row2['COMPONENT_VALUE'] . "</td>";
echo "<td>" . $row2['SOURCE'] . "</td>";
echo "</tr>";
}
echo "</table>"; 
```

我对其进行了测试并且工作正常。对于不同的表格样式，您可以：

```
<style>
#table1
{
style code here
}

#table2
{
style code here
}
</style> 
```

依此类推...然后您可以将它们应用于表格：

```
<table id="table1">
...
</table>
<table id="table2">
...
</table> 
```

# regex - 用正则表达式分割字符串

> ID：15573887
> 
> 赞同：8
> 
> 时间：2013-03-22T15:19:15.630
> 
> 标签：regex, r, strsplit

我正在寻找拆分通用形式的字符串，其中方括号表示字符串的“部分”。前任：

```
x <- "[a] + [bc] + 1" 
```

并返回一个看起来像这样的字符向量：

```
"[a]"  " + "  "[bc]" " + 1" 
```

编辑：最终使用这个：

```
x <- "[a] + [bc] + 1"
x <- gsub("\\[",",[",x)
x <- gsub("\\]","],",x)
strsplit(x,",") 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-22T15:43:35.497

我看过 TylerRinker 的代码并怀疑它可能比这更清楚，但这可能是学习一组不同功能的方式。（在我注意到它在空格上拆分之前，我更喜欢他。）我尝试调整它以使其工作，`strsplit`但该功能总是删除分隔符。也许这可以调整为`newstrsplit`在分隔符处分裂但将它们留在里面？可能不需要在第一个或最后一个位置拆分并区分打开和关闭分隔符。

```
scan(text=   # use scan to separate after insertion of commas
            gsub("\\]", "],",   # put commas in after "]"'s
            gsub(".\\[", ",[",  x)) ,  # add commas before "[" unless at first position
        what="", sep=",")    # tell scan this character argument and separators are ","
#Read 4 items
#[1] "[a]"  " +"   "[bc]" " + 1" 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-22T15:34:28.397

这是一种懒惰的方法：

```
FUN <- function(x) {
    all <- unlist(strsplit(x, "\\s+"))
    last <- paste(c(" ", tail(all, 2)), collapse="")
    c(head(all, -2), last)
}

x <- "[a] + [bc] + 1"    
FUN(x)

## > FUN(x)
## [1] "[a]"  "+"    "[bc]" " +1" 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-22T15:40:07.967

您可以手动计算分割点并使用`substring`：

```
split.pos <- gregexpr('\\[.*?]',x)[[1]]
split.length <- attr(split.pos, "match.length")
split.start <- sort(c(split.pos, split.pos+split.length))
split.end <- c(split.start[-1]-1, nchar(x))
substring(x,split.start,split.end)
#  [1] "[a]"  " + "  "[bc]" " + 1" 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-03-22T16:12:49.100

这是一个在括号上拆分并将它们保留在结果中的版本，使用积极的前瞻和后瞻：

```
splitme <- function(x) {
  x <- unlist(strsplit(x, "(?=\\[)", perl=TRUE))
  x <- unlist(strsplit(x, "(?<=\\])", perl=TRUE))
  for (i in which(x=="[")) {
    x[i+1] <- paste(x[i], x[i+1], sep="")
  }
  x[-which(x=="[")]
}
splitme(x)
#[1] "[a]"  " + "  "[bc]" " + 1" 
```

# ruby-on-rails - Rspec 中的@controller 实例变量

> ID：15573888
> 
> 赞同：2
> 
> 时间：2013-03-22T15:19:17.330
> 
> 标签：ruby-on-rails, rspec, instance-variables

只是好奇。控制器规范中的@controller 实例变量是如何被实例化的？在哪里？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T00:21:34.390

我相信这实际上是由 [ActionController::TestCase::Behavior#setup_controller_request_and_response 完成](https://github.com/rails/rails/blob/a5013bb5af299db6bf97f67d4198220280717e80/actionpack/lib/action_controller/test_case.rb#L486)的，它由[RSpec::Rails::SetupAndTeardownAdapter#setup](https://github.com/rspec/rspec-rails/blob/b17436f7aa5e52e3c19d7226752219915b650117/lib/rspec/rails/adapters.rb#L45-L55)连接，它包含在[RSpec::Rails::RailsExampleGroup](https://github.com/rspec/rspec-rails/blob/b17436f7aa5e52e3c19d7226752219915b650117/lib/rspec/rails/example/rails_example_group.rb#L9)中并由[RSpec::使用Rails::ControllerExampleGroup](https://github.com/rspec/rspec-rails/blob/b17436f7aa5e52e3c19d7226752219915b650117/lib/rspec/rails/example/controller_example_group.rb#L8-L9)。:)

`bundle open rspec-rails`是开始了解这些东西如何工作的简单方法。

！

# jquery - 从 Microsoft 翻译中删除繁体中文

> ID：15573889
> 
> 赞同：0
> 
> 时间：2013-03-22T15:19:22.353
> 
> 标签：jquery, html, translation

我希望从我的[站点](http://mycustomdevelopment.com/translate/)中删除繁体中文选项。我正在使用[Microsoft Translate 小部件](http://www.microsofttranslator.com/widget/)，但找不到正确的 ISO 代码。这是删除所有其他语言的当前代码。

```
/* <![CDATA[ */ setTimeout(function() { var s = document.createElement("script"); s.type = "text/javascript"; s.charset = "UTF-8"; s.src = ((location && location.href && location.href.indexOf('https') == 0) ? "https://ssl.microsofttranslator.com" : "http://www.microsofttranslator.com" ) + "/ajax/v2/widget.aspx?mode=manual&from=en&hidelanguages=ch,mww,zh-hant,zh-hans,zh-tw,zh-cn,zh-hk,zh-mo,zh-sg,zh-my,zh-rTW,zh-rCN,ar,de,it,id,ja,bg,ko,ca,lv,ur,zh,uk,fa,hi,el,da,he,cs,zh-CN,zh-TW,AF,AX,AL,DZ,AS,AD,AO,AI,AQ,AG,AR,AM,AW,AU,AT,AZ,BS,BH,BD,BB,BY,BE,BZ,BJ,BM,BT,BO,BQ,BA,BW,BV,BR,IO,BN,BG,BF,BI,KH,CM,CA,CV,KY,CF,TD,CL,CN,CX,CC,CO,KM,CG,CD,CK,CR,CI,HR,CU,CW,CY,CZ,DK,DJ,DM,DO,EC,EG,SV,GQ,ER,EE,ET,FK,FO,FJ,FI,GF,PF,TF,GA,GM,GE,DE,GH,GI,GR,GL,GD,GP,GU,GT,GG,GN,GW,GY,HT,HM,VA,HN,HK,HU,IS,IN,ID,IR,IQ,IE,IM,IL,IT,JM,JP,JE,JO,KZ,KE,KI,KP,KR,KW,KG,LA,LV,LB,LS,LR,LY,LI,LT,LU,MO,MK,MG,MW,MY,MV,ML,MT,MH,MQ,MR,MU,YT,MX,FM,MD,MC,MN,ME,MS,MA,MZ,MM,NA,NR,NP,NL,NC,NZ,NI,NE,NG,NU,NF,MP,NO,OM,PK,PW,PS,PA,PG,PY,PE,PH,PN,PL,PT,PR,QA,RE,RO,RU,RW,BL,SH,KN,LC,MF,PM,VC,WS,SM,ST,SA,RS,SC,SL,SG,SX,SK,SI,SB,SO,ZA,GS,SS,ES,LK,SD,SR,SJ,SZ,SE,CH,SY,TW,TJ,TZ,TH,TL,TG,TK,TO,TT,TN,TR,TM,TC,TV,UG,UA,AE,GB,US,UM,UY,UZ,VU,VE,VN,VG,VI,WF,EH,YE,ZM,ZW,zh-CHS,zh_rTW,zh-rHK,TW,HK,CN,zh-zho,zh-chi,zh_HANT,zh_TW"; var p = document.getElementsByTagName('head')[0] || document.documentElement; p.insertBefore(s, p.firstChild); }, 0); /* ]]> */ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T16:33:10.420

当我将它发布到 Facebook 时找到了答案。

> zh-cht

# python - Python中简单的不确定进度条

> ID：15573890
> 
> 赞同：3
> 
> 时间：2013-03-22T15:19:26.230
> 
> 标签：python, optimization, coding-style, progress-bar

即使我害怕有点跑题，但我不知道还有什么地方可以问这个，对不起！

我希望`**simple** indeterminate progress bar`用 Python构建一个

Python中有一个非常有效的[进度条模块](https://code.google.com/p/python-progressbar/)，但我的目标是构建一个简单的个人进度条，每次都添加到我的代码中

下面是我的代码，当您知道`maxvalue`数据时，它是一个简单的进度条

```
from __future__ import division
import sys

class Progress(object):
    def __init__(self, maxval):
        self._pct = 0
        self.maxval = maxval

    def update(self, value):
        pct = int((value / self.maxval) * 100.0)
        if self._pct != pct:
            self._pct = pct
            self.display()

    def start(self):
        self.update(0)

    def finish(self):
        self.update(self.maxval)

    def display(self):
        sys.stdout.write("\r|%-73s| %d%%" % ('#' * int(self._pct*.73), self._pct))
        sys.stdout.flush()

import time

toolbar_width = 300
pbar = Progress(toolbar_width)
pbar.start()
for i in xrange(toolbar_width):
    time.sleep(0.1) # do real work here
    pbar.update(i)
pbar.finish() 
```

现在我希望创建一个新类 IndeterminateProgress(object) 以便在数据的最大值未知时创建一个简单的不确定进度条。

基本思想是从 0 打印到 100，然后从 100 打印到 0，直到所有数据全部读取或全部处理（在 Ethan Coon 的帮助下更新代码，见下文）

```
 class IndeterminateProgress(object):
    def __init__(self):
        self._pct = 0
        self.maxval = 100

    def update(self,value):
        abs_pct = value % self.maxval   # this gives the percentage change from maxval
        phase = int(value / self.maxval) % 2  # this gives whether the bar is increasing or decreasing in size
        if phase == 0:
            rel_pct = abs_pct / self.maxval * 100
        else:
            rel_pct = (self.maxval - abs_pct) / self.maxval * 100
        if (rel_pct != self._pct):
            self._pct = rel_pct
            self.display()

    def start(self):
        self.update(0)

    def display(self):
        sys.stdout.write("\r|%-73s| %d%%" % ('#' * int(self._pct*.73), self._pct))
        sys.stdout.flush()

data_flush = 30000000
pbar = IndeterminateProgress()
for i in xrange(data_flush):
    time.sleep(0.1) # do real work here
    pbar.update(i) 
```

使用 windows 的命令提示符进行测试，进度条在 100% 后回到 0%，转到 100%，但在此之后会创建一个新的进度条。

![在此处输入图像描述](../Images/87c727714dffa24e4fd1e83fb5c6cad0.png)

这个想法是只打印一行不确定的进度条

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T16:03:27.460

基本上你只想要一切以maxval为模。在 python 中，取模是使用 % 运算符完成的。

```
def update(self,value):
    abs_pct = value % self.maxval   # this gives the percentage change from maxval
    phase = int(value / self.maxval) % 2  # this gives whether the bar is increasing or decreasing in size
    if phase == 0:
        rel_pct = abs_pct / self.maxval * 100
    else:
        rel_pct = (self.maxval - abs_pct) / self.maxval * 100

    if (rel_pct != self._pct):
        self._pct = rel_pct
        self.display() 
```

请注意，这里没有要求 maxval 为 100 ...您可以将其设置为您的数据的“合理增量大小”。如果您有 10 亿条数据要读取并以每秒 1000 条的速度读取，也许您不希望增量大小为 100 ;)

# c++ - 替换二进制文件C++中的字节序列

> ID：15573891
> 
> 赞同：-3
> 
> 时间：2013-03-22T15:19:29.713
> 
> 标签：c++

我想在运行文件之前替换文件中的字节序列，例如 3B 01 40 3F 到 00 00 10 3F。我在 Google 中寻找解决方案，但只有 C# 答案。

[替换二进制文件中的字节序列](https://stackoverflow.com/questions/6525660/replace-sequence-of-bytes-in-binary-file)

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T15:26:53.577

C# 的答案也应该在这里工作。

```
void replace(long pos, std::string filename, std::string replacement)
{
   std::ofstream out(filename.c_str());
   out.seekp(pos);

   out.write(replacement.c_str(), replacement.size());
} 
```

# c - Linux内核延迟，低于jiffies，没有忙等待

> ID：15573892
> 
> 赞同：1
> 
> 时间：2013-03-22T15:19:39.480
> 
> 标签：c, linux, api, timer, kernel

我需要在 linux 内核中按时间设置信号高低，使用定时器和 mdelay()。

高时间：0.01ms-20.00ms；低时：10ms-1000ms

两者都可以通过用户空间进行调整。对于 lowtime，我使用 API 计时器，对于 hightime，我使用 mdelay() 和 udelay()。

现在的问题是：如果 hightime 是 9.9ms 而 lowtime 是 10ms，那么内核会一直处于休眠状态（预计 0.1ms）。但是我在用户空间中的用户界面需要工作，而内核计时器正在运行。在我的系统中，一个 jiffie 大约是 10 毫秒，所以我不能在低时间使用计时器。

有人知道了，我怎么能在内核中做这些 0.01 毫秒 - 10 毫秒的等待，这样我的用户界面仍然可以正常工作？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T16:15:17.523

您可以减少 10 毫秒：

编辑`/usr/include/asm/param.h`并查找 HZ 的定义。我猜你会发现 100。100 Hz 表示 10 ms 的周期。更现代的 Linux 具有 250 HZ，这将使您的时间片减少到 4 毫秒。您可以将其压缩到 1000 HZ，这可以让您以 1 ms 切片运行。

进一步阅读：[Linux 内核映射，7.1。测量时间流逝](http://www.makelinux.net/ldd3/chp-7-sect-1)

# jquery - jQuery modals 和深度链接

> ID：15573893
> 
> 赞同：2
> 
> 时间：2013-03-22T15:19:39.363
> 
> 标签：jquery

我目前有一个画廊，当您单击缩略图时会打开一个模式弹出窗口。我想要做的是能够为模态生成一个独特的链接（即www.mywebite.com/#link1），它通过ajax加载它的内容。如果有人要发送这个独特的模态链接并将其发送给某人并将其粘贴到他们的浏览器中，理想情况下，我希望模态窗口自动加载和显示其内容，而无需用户单击相应的缩略图。

这甚至可能吗？我知道这不是最简单的任务，对此的任何帮助将不胜感激。

要了解我正在做什么，请访问： [http ://www.ddbremedy.co.uk/siteupdate/work](http://www.ddbremedy.co.uk/siteupdate/work)

您将看到一个带有缩略图的 iMac 屏幕。

提前谢谢了。

更新！！！！！

好的，这就是我目前所在的位置。我决定使用 jquery 地址报废，改为使用“window.location.hash”进行深度链接。

代码是这样的：

```
var base_url = "http://www.ddbremedy.co.uk/siteupdate/";

$('#work_gallery li a').on('click', function(event) {

    event.preventDefault();
    postLink = $(this).attr('href');
    window.location.hash = postLink.replace(base_url, "");

    /* I have a bunch of code that animates the modal window 
    in which I don't need to include as there is quite alot of it.
    Content loads via ajax. Then when I close the modal I add this 
    code to remove the hash and revert the link back to its original state. */

    if ("pushState" in history) {
        history.pushState("", document.title, window.location.pathname);
    } else {
        window.location.hash = "";
    }

}); 
```

上面的代码工作正常，并在我使用 ajax 加载和关闭外部内容时完全按照我想要的方式显示链接。现在我需要弄清楚的是，如果有人获取该链接并将其粘贴到地址栏中，我如何自动加载 ajax 内容。内容是基于链接 href 和 click 事件加载的，那么我如何诱使浏览器认为点击了正确的链接并加载正确的内容，纯粹基于它的链接？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T10:59:36.413

设法让它工作。我是这样做的：

首先，我运行一个名为“checkUrl”的函数，它检查 URL 以查看它是否包含哈希。

```
checkUrl = function() {
    if (window.location.hash) {

    }
};

checkUrl(); 
```

然后在 if 语句中，我将哈希路径存储到变量中，并将其从哈希中拆分出来。然后我将哈希后的字符串存储到一个变量中。

```
var pathname = window.location.hash,
    rez = pathname.split('#'),
    linkUrl = rez[1]; 
```

然后，我将该变量作为具有该特定 href 的链接的选择器传递，并在相应链接上触发单击事件，然后以正确的模式进行动画和加载。

```
$("a[href='http://www.ddbremedy.co.uk/siteupdate/" + linkUrl + "']").trigger('click'); 
```

希望这将有助于将来的某人。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T15:28:07.377

这是完全可能的。[使用jquery simplemodal](http://www.ericmmartin.com/projects/simplemodal/)的半伪代码：

```
$(document).ready(function () {
    /* Get the hash from window.location */
    var theHash = window.location.hash;
    if (theHash !== '') 
    {
        /* Load something related to it */
        $.get(something-from-somewhere, function(data) {
           /* Open the simplemodal and put the returned data inside it */
           $.modal(data);
        });
    }
}); 
```

显然，您可以使用模态执行更多操作，您可以在[文档](http://www.ericmmartin.com/projects/simplemodal/#overview)中找到这些内容。

# xml - XML Schema 1.1 无法识别“断言”或“断言”

> ID：15573894
> 
> 赞同：13
> 
> 时间：2013-03-22T15:19:41.693
> 
> 标签：xml, xsd, xsd-validation, xsd-1.1

我正在尝试在*XSD中使用以下内容*

```
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema" elementFormDefault="qualified" >
<xs:element name="dimension">
  <xs:complexType>
    <xs:attribute name="height" type="xs:int"/>
    <xs:attribute name="width" type="xs:int"/>
    <xs:assert test="@height = @width"/>
  </xs:complexType>
</xs:element> 
```

我知道断言/断言是 XML Schema 1.1 的一部分，但不是 1.0。但是我读过的所有内容都表明两者的*命名空间*是相同的：[http ://www.w3.org/2001/XMLSchema](http://www.w3.org/2001/XMLSchema)

一个小问题是我用来编写架构（Microsoft Visual Studio）的程序无法识别“断言”元素，说“命名空间（...）中的元素*complexType*具有无效的子元素“断言”。

主要问题是，当我实际尝试使用 xmllint 针对此架构验证 XML 时，它会抛出一个错误说

```
" element assert: Schemas parser error : Element '{http://www.w3.org/2001/XMLSchema}complexType': The content is not valid. Expected is (annotation?, (simpleContent | complexContent | ((group | all | choice | sequence)?, ((attribute | attributeGroup)*, anyAttribute?)))) 
```

尽管被指向 1.1 命名空间，xmllint/visual studio 是否根本无法识别 1.1？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-22T19:47:34.950

要处理 XSD 1.1 模式，您需要 XSD 1.1 模式处理器。微软没有提供（他们似乎已经放弃了实现新的 W3C XML 规范）。据我所知，.NET 平台上唯一可用的 XSD 1.1 处理器是 Saxonica 的。

# asp.net-mvc-4 - Visual Studio 一键部署“成功”，但没有文件发布

> ID：15573899
> 
> 赞同：0
> 
> 时间：2013-03-22T15:19:57.233
> 
> 标签：asp.net-mvc-4, visual-studio-2012, one-click-web-publishing

这是 build/web.config 转换后的输出：

```
Copying all files to temporary location below for package/publish:
obj\Release\Package\PackageTmp.
Publishing folder /...
Site was published successfully path_goes_here
========== Build: 0 succeeded, 0 failed, 1 up-to-date, 0 skipped ==========
========== Publish: 1 succeeded, 0 failed, 0 skipped ========== 
```

然而，当它加载根文件夹时，什么都没有。访问该站点会出现服务器错误

```
401 - unauthorized: access is denied due to invalid credentials 
```

我相信，考虑到该目录中没有任何内容，这是可以理解的。如果可能误导。

为了解决这个问题，我将部署服务器的版本复制并粘贴到了生产服务器。我这样做没有访问问题，所以我认为它不会因为权限而阻止我进行部署。

如何解决此特定情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-21T12:20:48.530

我用 /A:Basic 试过了，对我有用

/A：指定要使用的身份验证类型。可能的值为 NTLM 和 Basic。如果指定了 wmsvc 提供程序设置，则默认身份验证类型为 Basic；否则，默认身份验证类型为 NTLM。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T04:45:00.883

我尝试了以下对其他人有用的方法，希望对您有用：

发布为发布，然后返回并再次发布为调试。

发布为 web 部署包，然后返回并发布到文件系统。

重新安装 VS2012=0 一直有效，直到更新升级了我的“发布”对话框。

但是没有一个对我有用，所以我想出的解决方法是发布为 web 部署包 - 它实际上包含文件系统文件夹中的文件 - 获取文件（从 PackageTmp 文件夹）并像以前一样部署。

我发现其中一个项目缺少 DLL 引用，但我通过将未使用的它添加到启动项目中来修复它，这会导致它被识别和发布。

希望这可以帮助。

# r - 在图像中绘制进度条

> ID：15573907
> 
> 赞同：-1
> 
> 时间：2013-03-22T15:20:20.837
> 
> 标签：r, progress-bar

我正在使用 R 绘制 24 张关于一天中每个小时的温度的不同图像。

我不想为每个情节添加标签（即 00:00；01:00、02:00 等），而是希望在每个情节的顶部有一个“进度条”，在每个情节之后移动一步。

例如，在每个图的顶部；我想要这样的东西：

Plot-1.pdf: -------A------------

Plot-2.pdf: ---------A---------

Plot-3.pdf: -----------A--------

Plot-3.pdf: -------------A-----

等等

任何想法 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T15:56:32.490

下面是几种类型的进度条。这是你要找的吗？

```
#First Type ===============================

total <- 20
# create progress bar
pb <- txtProgressBar(min = 0, max = total, style = 3)
for(i in 1:total){
   Sys.sleep(0.1)
   # update progress bar
   setTxtProgressBar(pb, i)
}
close(pb)

#Second Type ==============================

total <- 20
# create progress bar
pb <- tkProgressBar(title = "progress bar", min = 0,
                max = total, width = 300)

for(i in 1:total){
   Sys.sleep(0.1)
   setTkProgressBar(pb, i, label=paste( round(i/total*100, 0),
                                    "% done"))
}
close(pb)

#Third Type ==============================

# create progress bar
pb <- winProgressBar(title = "progress bar", min = 0,
                 max = total, width = 300)

for(i in 1:total){
   Sys.sleep(0.1)
   setWinProgressBar(pb, i, title=paste( round(i/total*100, 0),
                                    "% done"))
}
close(pb)

#Fourth Type ================================

foo <- function(...){
    total <- 40
    pb <- txtProgressBar(min = 0, max = total, style = 3)
    # computation block 1
    for(i in 1:20){
        Sys.sleep(0.1)
        setTxtProgressBar(pb, i)
    }

    # computation block 2
    for(i in 21:total){
        Sys.sleep(0.1)
        setTxtProgressBar(pb, i)
    }
    close(pb)
}

# Run it             
foo() 
```

# java - XSLT：使用 xpath 表达式提取兄弟节点的最后 x 位

> ID：15573908
> 
> 赞同：1
> 
> 时间：2013-03-22T15:20:21.263
> 
> 标签：java, xml, string, xslt, xpath-2.0

我正在尝试使用 xpath 提取“红色”兄弟的最后 4 个数字。

源 xml 看起来像：

```
... 
<node2>
    <key><![CDATA[RED]]></key>
    <value><![CDATA[98472978241908]]></value>

    ... more key value pairs here...  

</node2>
... 
```

当我使用以下 xpath 时： `/nodelevelX/nodelevelY/node2/key[text()='RED']/following-sibling::value`

我在输出中有完整的数字，然后我尝试用这个 xpath experssion 提取数字：

`/nodelevelX/nodelevelY/node2/key[text()='RED']/following-sibling::value/text()[substring(., string-length(.)-4)]`

我还有完整的号码。substring 函数似乎不起作用。

我的 xsl 标头是：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="2.0"
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform"> 
```

我认为有一个小错误，但我看不到在哪里。我关注了许多关于 SO 和其他人（w3schools）的讨论，并试图遵循这些建议但没有成功。

更新：上下文：

我使用以下身份将所有节点从我的源 XML 复制到目标 (xml)，并在 xsl:template 之后为某些节点应用特定规则：

```
<!-- This copy the whole source XML in destination  -->
    <xsl:template match="node() | @*">
        <xsl:copy>
            <xsl:apply-templates select="node() | @*" />
        </xsl:copy>
    </xsl:template>

    <!-- specific rules for some nodes -->

    <xsl:template match="/nodeDetails">
        <mynewnode>
            <!-- here I take the whole value and it s working -->
            <someVal><xsl:value-of select="/nodeDetails/nodeX/key[text()='ANOTHER_KEY']/following-sibling::value" /></someVal>
            <!-- FIXME substring does not work now -->
            <redVal><xsl:value-of select="/nodeDetails/nodeX/key[text()='RED']/following-sibling::value/text()[substring(.,string-length(.)-4)]" /></redVal>
        </mynewnode>
    </xsl:template> 
```

对于转换，我使用 Java (JDK 6) 中的 junit 类中的以下代码：

```
@Test
public void transformXml() throws TransformerException {

    TransformerFactory factory = TransformerFactory.newInstance();
    Source xslt = new StreamSource(getClass().getResourceAsStream("contract.xsl"));
    Transformer transformer = factory.newTransformer(xslt);
    Source input = new StreamSource(getClass().getResourceAsStream("source.xml"));
    Writer output = new StringWriter();
    transformer.transform(input, new StreamResult(output));
    System.out.println("output=" + output.toString());

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T15:27:19.973

您当前的 XPath 将评估为一个节点集，但您需要的是一个字符串。请尝试这样的事情：

```
<xsl:variable name="value" 
              select="/nodelevelX/nodelevelY/node2/key[. = 'RED']
                      /following-sibling::value[1]" />
<xsl:value-of select="substring($value, string-length($value) - 3)" /> 
```

尽管要确定答案，但我需要查看 XSLT 中您尝试输出此值的部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T15:48:32.767

**使用这个 XPath 2.0 表达式**：

```
/nodelevelX/nodelevelY/node2/key[text()='RED']
                    /following-sibling::*[1][self::value]
                            /substring(., string-length() -3) 
```

**基于 XSLT 2.0 的验证：**

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output method="text"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="/">
     <xsl:copy-of select=
     "/nodelevelX/nodelevelY/node2/key[text()='RED']
                    /following-sibling::*[1][self::value]
                            /substring(., string-length() -3)"/>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于以下 XML 文档时**：

```
<nodelevelX>
    <nodelevelY>
        <node2>
            <key>GREEN</key>
            <value>0123456789</value>
            <key>RED</key>
            <value>98472978241908</value>
            <key>BLACK</key>
            <value>987654321</value>
        </node2>
    </nodelevelY>
</nodelevelX> 
```

**对 XPath 表达式求值，并将该求值的结果复制到输出中：**

```
1908 
```

# c# - string.Length 与 string.ToCharArray().Length

> ID：15573909
> 
> 赞同：10
> 
> 时间：2013-03-22T15:20:24.123
> 
> 标签：c#, string

我正在清理一些重复执行的旧代码`myString.ToCharArray().Length`；而不是`myString.Length`.

在我重构之前`ToCharArray()`，在任何情况下这样做会导致不同的行为吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-22T15:22:25.393

没有区别：看看带有反射器的方法代码：它将根据字符串的长度分配一个 char[]。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-22T15:31:30.780

两者肯定会返回相同的长度，代表字符数（`char`s）。字符串（或数组）的每个索引都有一个字符，然后，以下内容[可能值得一提](http://msdn.microsoft.com/en-gb/library/system.string.length.aspx)：

> Length 属性返回此实例中 Char 对象的数量，而不是 Unicode 字符的数量。原因是一个 Unicode 字符可能由多个 Char 表示。使用 System.Globalization.StringInfo 类来处理每个 Unicode 字符而不是每个 Char。

从中您还可以推断`ToCharArray`，鉴于它是[“一个 Unicode 字符数组，其元素是此实例的各个字符”](http://msdn.microsoft.com/en-gb/library/ezftk57x.aspx)，它们的行为相同。

我不确定 not on`NullReferenceException`是关于什么的，因为两者也都容易受到影响。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-22T15:55:19.773

> 导致不同的行为？

*好吧*，正如其他人所说，在这两种方式中，结果都将是 的数量`char`，所以，答案肯定是**NO**！

但我想为这个答案添加一些不同的东西。

当我反编译[`String.ToCharArray()`](http://msdn.microsoft.com/en-us/library/ezftk57x.aspx)方法时，它看起来像：

```
public unsafe char[] ToCharArray()
{
  int length = this.Length;
  char[] chArray = new char[length];
  if (length > 0)
  {
    fixed (char* smem = &this.m_firstChar)
      fixed (char* dmem = chArray)
        string.wstrcpyPtrAligned(dmem, smem, length);
  }
  return chArray;
} 
```

`ToCharArray`使用`unsafe`操作指针的代码以及[`wstrcpyPtrAligned`](http://typedescriptor.net/browse/members/245849-System.String.wstrcpyPtrAligned%28Char%2a,Char%2a,Int32%29)基类库中的私有方法。它通常比在托管代码中做同样的事情要快，后者必须检查数组边界。

## 但

它对字符串进行了完整的传递，因此如果您不需要，**手动填充字符数组可能会更快**。

由于`ToCharArray()`方法返回一个 char 数组，您可以就地修改它。这有时会提高代码的性能。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T15:43:31.167

我认为它在任何情况下都会产生不同的结果！

但是如果我使用它的重载方法`ToCharArray(int startIndex, int length)` ，那么显然它可以在你给出长度时给出不同的长度属性值。

我也不能`ToCharArray()`在我的自定义类中覆盖这个方法，比如`ToString()`方法。所以如果你只想计算长度，那么 using`myString.Length`比 using 更有意义`myString.ToCharArray().Length`。

# python - Python - 使用网格布局格式化窗口

> ID：15573913
> 
> 赞同：1
> 
> 时间：2013-03-22T15:20:34.307
> 
> 标签：python, user-interface, grid, tkinter

我正在自学 Python 并尝试构建一个使用窗口 GUI 的本地应用程序。我在尝试使用`grid()`. 我已经搜索并尝试了许多不同的代码片段，但我遇到了同样的问题，框架和小部件似乎没有格式化。下面的代码非常简单，但我的最终目标是掌握如何使用`grid()`，以便将来构建我喜欢的任何 GUI。

我希望能够做到以下几点：

```
--Window-----------------
| Section 1 | Section 2 |
|           |           |
-------------------------
| Section 3             |
|                       |
|                       |
------------------------- 
```

* * *

```
from Tkinter import Button, Frame, Entry, Tk, Label, Menubutton, Menu, IntVar

class MainScreen(Frame):
def __init__(self, master):
    Frame.__init__(self, master)
    self.grid()
    self.searchSection()
    self.quitButton()

def searchSection(self):
    # Create Search Section
    self.searchFrame = Frame(self.master, bg='grey', relief='sunken', width=200, height=200)
    self.searchFrame.grid(row=0, column=0, rowspan=5, columnspan=30, sticky="wens")
    Label(self.searchFrame, text="Search :", bg='grey').grid(row=1, column=1, columnspan=20, sticky='w')
    self.searchField = Entry(self.searchFrame)
    self.searchField.grid(row=2, column=1, columnspan=7, sticky='w')
    #Create Menu Options
    self.search = Menubutton(self.searchFrame, text = "Search", bg='grey')
    self.search.grid(row=2, column=8, columnspan=3, sticky='w')
    self.search.menu = Menu(self.search, tearoff = 0)
    self.search['menu'] = self.search.menu       
    self.SearchType1Var = IntVar()
    self.search.menu.add_checkbutton(label="SearchType1", variable = self.SearchType1Var)

def quitButton(self):
    ## Provide a quit button to exit the rogram
    self.quitFrame = Frame(self.master, bg='grey', width=50, height=50)
    self.quitFrame.grid(row=0, column=20, rowspan=5, columnspan=5, sticky='ewns')
    self.quitButton = Button(self.quitFrame, text="Quit", command=exit)
    self.quitButton.grid()

if __name__ == '__main__':

root = Tk()
root.title("Learn Grid GUI")
root.geometry("800x600+200+150")
main = MainScreen(root)
root.mainloop() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T16:19:36.767

您使用子帧的直觉很好，但是您的实施使问题变得比应有的困难。对于一般的经验法则，我建议*不要*让不同的函数创建小部件并将它们放在它们的父级中。换句话说，*给定容器*`grid`的所有or`pack`语句通常都应该在同一个函数中。

 *根据我的经验，完成布局的最佳方式是“分而治之”。例如，您的 ascii 绘图显示三个部分。从那个开始，而且只有那个。创建三个框架，每个部分一个。在尝试向它们添加任何东西之前，将它们适当地放置在容器中。

当我这样做时，我首先为每个帧赋予不同的颜色和明确的大小，仅用于可视化目的。例如：

```
import Tkinter as tk

class Example(tk.Frame):
    def __init__(self, master, *args, **kwargs):
        tk.Frame.__init__(self, master, *args, **kwargs)
        self.master = master
        self.s1 = tk.Frame(self, background="pink", width=200, height=200)
        self.s2 = tk.Frame(self, background="blue", width=200, height=200)
        self.s3 = tk.Frame(self, background="bisque", width=200, height=200)

        self.s1.grid(row=0, column=0, sticky="nsew")
        self.s2.grid(row=0, column=1, sticky="nsew")
        self.s3.grid(row=1, column=0, columnspan=2, sticky="nsew")

        self.grid_rowconfigure(0, weight=1)
        self.grid_columnconfigure(1, weight=1)

if __name__ == "__main__":
    root = tk.Tk()
    Example(root).pack(side="top", fill="both", expand=True)
    root.mainloop() 
```

一旦我可以正常工作并调整大小，我就可以继续添加小部件，一次一个部分。由于我已经让 GUI 的主要部分适当地响应窗口大小调整，因此我可以将所有精力集中在一个部分上，而不必担心它们如何影响程序的其余部分。

重要的是要知道，当您将小部件添加到这些部分之一时，该部分中的行和列独立于任何其他小部件。例如，如果您在第 2 部分的第一列中放置一些内容，则它指的是第二*部分*中的第一列，而不是整个 GUI 的绝对列。

出于说明目的，假设您希望搜索标签、条目小部件和菜单按钮都放在第 3 部分中（我无法从您的问题中看出您希望它们放在哪里）。在这种情况下，标签位于第 0 行并跨越两列，条目小部件和菜单按钮位于下方，分别位于不同的列中。我假设您希望第一列增长和缩小。

这需要对程序进行两次修改。首先是创建`searchSection`函数，它在搜索部分创建小部件。第二个修改是在GUI的构造函数中调用这个函数。

这是一个完整的最终版本：

```
import Tkinter as tk

class Example(tk.Frame):
    def __init__(self, master, *args, **kwargs):
        tk.Frame.__init__(self, master, *args, **kwargs)

        self.s1 = tk.Frame(self, background="pink", width=200, height=200)
        self.s2 = tk.Frame(self, background="blue", width=200, height=200)
        self.s3 = tk.Frame(self, background="bisque", width=200, height=200)

        self.s1.grid(row=0, column=0, sticky="nsew")
        self.s2.grid(row=0, column=1, sticky="nsew")
        self.s3.grid(row=1, column=0, columnspan=2, sticky="nsew")

        self.grid_rowconfigure(0, weight=1)
        self.grid_columnconfigure(1, weight=1)

        # now create the search section
        self.searchSection(self.s1)

    def searchSection(self, parent):
        l = tk.Label(parent, text="Search :", bg='grey')
        self.searchField = tk.Entry(parent)
        self.search = tk.Menubutton(parent, text="Search", bg="grey")
        self.search.menu = tk.Menu(self.search, tearoff = 0)
        self.search['menu'] = self.search.menu
        self.SearchType1Var = tk.IntVar()
        self.search.menu.add_checkbutton(label="SearchType1", 
                                         variable = self.SearchType1Var)

        l.grid(row=0, column=0, columnspan=2, sticky='w')
        self.searchField.grid(row=1, column=0, sticky="ew")
        self.search.grid(row=1, column=1, sticky="ew")

        parent.grid_columnconfigure(0, weight=1)

if __name__ == "__main__":
    root = tk.Tk()
    Example(root).pack(side="top", fill="both", expand=True)
    root.mainloop() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T11:00:07.107

如果我理解正确，您的问题是您无法对 GUI 进行排序。答案很简单——如果您想对 GUI 进行排序，只需将代码按照您希望窗口显示的顺序放置即可。例如：

```
 --Window--
| text box |
|  button  |
|          |
------------

-Code-
[text box code here]
[button code here]
root.mainloop() 
```

我与 tkinter 合作了很长时间，它对我有用。祝你好运，节日快乐！

L型*

# android - 需要帮助为 Android 编译 mkbootimg 二进制文件

> ID：15573917
> 
> 赞同：2
> 
> 时间：2013-03-22T15:20:47.510
> 
> 标签：android, c

第一次发布新成员，所以如果我在错误的部分，请告诉我。

我正在尝试编译 mkbootimg 二进制文件，以便我可以从我的 android 设备上的终端执行它，我已经从 github 下载了 BootTools 源并在回溯 5 chroot 环境中编译了它，编译了二进制文件但是当我解压缩启动映像和重新打包然后将其刷入我的设备，重新启动后，我的设备会挂在启动屏幕上，然后重新启动进入恢复状态。

我在我的桌面上尝试了同样的方法并且图像启动，我在我的设备上解压缩了图像然后将文件复制到我的桌面并用我桌面上的 mkbootimg 将它们打包然后将图像复制到我的设备并闪烁它，设备正常启动，所以我的猜测是它一定与我编译的 mkbootimg 有错误或我做错了什么有关，非常感谢任何帮助，谢谢马克。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-17T09:53:50.497

可能是因为在`struct boot_img_hdr`为 ARM 编译时，标头中字段的字节序会有所不同（与为 x86 编译的相同代码相比）。并且引导加载程序期望它们以为 x86 编译的字节序`mkbootimg`写入它们。

您可以在十六进制编辑器中比较这两个二进制文件以确认这一点。

# c - 保护内存中的凭据

> ID：15573918
> 
> 赞同：4
> 
> 时间：2013-03-22T15:20:48.327
> 
> 标签：c, windows, security

我将收到用户名和密码并将其存储在结构中。

我可以做些什么来防止有人查看我的进程的内存并查看用户的用户名/密码？

我的第一个想法是在内存中加密用户名和密码，并在我完成后将其归零。但是我必须在内存中的某个地方存储一个可以检索的密钥。

好吧，这将使恢复凭据变得非常困难，但仍有可能。

还有比这更安全的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T15:46:02.067

查看[数据保护 API](http://msdn.microsoft.com/en-us/library/ms995355.aspx)。它被 Windows 组件以及第三方软件用于这种场景，并且基本上为您处理加密和密钥管理。

密钥与当前用户的密码相关联，但您可以提供“可选熵”，这实际上是额外密钥材料的每个操作源，例如，可能从用户输入的密码中派生，以保护服务凭证。

至于“有没有比这更安全的方法”，我认为您需要准确定义您要防范的威胁级别。对于同一台机器上的其他（非管理员）用户，DPAPI以及您已经提到的安全归零明文之类的东西*可能非常好。*对于在同一登录会话中运行的恶意软件，几乎没有什么帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T15:34:04.637

最简单的解决方案是将密码分散在内存中。不要将其存储为字符串。声明一组字节变量并将密码分散在其中。这不会使密码无法恢复，但会使它变得困难......攻击者需要访问计算机和您的源（或反向工程您的二进制文件）以发现密码位的存储方式和位置。

如果攻击者可以访问您的系统和您的源代码，或者能够反转您的二进制文件，那么您最好将密码通过电子邮件发送给他。

在您的场景中，更有可能的攻击角度是在传递给服务的过程中获取密码，而不是尝试从内存中组装密码。

编辑：如果您想显着增加收集密码的难度，您也可以使用动态内存分配来防止位在内存中具有固定位置。但是，老实说，这有点矫枉过正......当您将密码传递给服务时，攻击者很容易抓住密码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T15:51:24.887

使用良好的函数（例如 SHA1/2）对密码进行哈希处理并存储摘要。当您想根据存储的密码检查密码时，对输入进行哈希处理并将结果与​​存储的密码进行比较。

密码散列函数的基本特性是它是一个单向函数：计算逆函数非常困难。这就是在您的情况下使用这些功能的原因。

# java - 在 Android 应用程序上多次检索来自 gmail 的所有电子邮件

> ID：15573921
> 
> 赞同：2
> 
> 时间：2013-03-22T15:20:57.003
> 
> 标签：java, android, gmail-imap

这可能是愚蠢的问题，但是......

下面的代码可以完美地从 gmail 中检索所有电子邮件。但是，在运行应用程序一次后，gmail 在其“转发和 POP/IMAP”设置中设置“状态：对自 EXECUTION_APP_TIME 以来到达的所有邮件启用 POP”，并且应用程序停止接收旧邮件（这是有道理的）。

每次执行应用程序时，我都需要从 gmail 获取所有消息，但它只能工作一次。每次执行后，我都需要在我的 gmail 中将“转发和 POP/IMAP”中的配置更改为“为所有邮件启用 POP（甚至是已经下载的邮件）”。

有谁知道我该如何解决？有没有办法通过代码自动设置它。

这是源代码：

```
public void connect(){
    Properties props = new Properties();
    props.put("mail.pop3.host" , "pop.gmail.com");
    props.put("mail.pop3.user" , username);
    // Start SSL connection
    props.put("mail.pop3.socketFactory" , 995 );
    props.put("mail.pop3.socketFactory.class" , "javax.net.ssl.SSLSocketFactory" );
    props.put("mail.pop3.port" , 995);

    Log.e("asdasd", "teste");

    Session session = Session.getDefaultInstance(props , new Authenticator() {
        @Override
                protected PasswordAuthentication getPasswordAuthentication() {
                    return new PasswordAuthentication( username , password);
                }
    });
    try {
        Store store  = session.getStore("pop3");
        store.connect("pop.gmail.com", 995 , username , password);
        Folder fldr = store.getFolder("Inbox");
        fldr.open(Folder.HOLDS_MESSAGES);

        int totalMsg = fldr.getMessageCount();
        int unread = fldr.getUnreadMessageCount();
        System.out.println("Total MSG: " + totalMsg + " unreaed: " + unread  );

        Message[] messages = fldr.getMessages();
        //Message[] msg = fldr.search(new FlagTerm(new Flags(Flag.SEEN), false));
        Message[] msg = messages;

        System.out.print("size " + messages .length);
        if (messages.length == 0) System.out.println("No messages found.");

        for (int i = 0; i < messages.length; i++) {

            System.out.println("Subject : " + messages[i].getSubject());

            if(messages[i].getSubject().equals("test223")){
                System.out.println("Message " + (i + 1));
                System.out.println("From : " + messages[i].getFrom()[0]);
                System.out.println("Subject : " + messages[i].getSubject());
                Object content = messages[i].getContent();

                if (content instanceof String)  
                    System.out.print((String)content);  
                /* text/plain = String
                 * multipart" = Multipart
                 * MimeMessage
                 * input stream = Unknown Data Handler 
                 */                 

                Multipart multipart = (Multipart) msg[i].getContent();

                for (int x = 0; x < multipart.getCount()-1; x++) {
                    BodyPart bodyPart = multipart.getBodyPart(x);

                    String disposition = bodyPart.getDisposition();

                    if (disposition != null && (disposition.equals(BodyPart.ATTACHMENT))) {
                        System.out.println("Mail have some attachment : ");

                        DataHandler handler = bodyPart.getDataHandler();
                        System.out.println("file name : " + handler.getName());
                    } else {
                        System.out.println(bodyPart.getContent());
                    }
                }
            }
        }

        fldr.close(true);
        store.close();

    } catch(Exception exc) {
        System.out.println(exc + " error");
    }       
} 
```

# c# - 计算包含大小可能不同的控件的表单的大小？

> ID：15573923
> 
> 赞同：0
> 
> 时间：2013-03-22T15:21:10.843
> 
> 标签：c#, .net, winforms, resize, themes

我需要`MonthCalendar`在单独的对话框中显示 , ，如下所示：

![在此处输入图像描述](../Images/943c1093d1663ab913f3456fac45120c.png)

问题是这个日历的显示取决于应用程序运行的系统，导致这样的变化（来自同一个应用程序，在不同的 PC 上）：

![在此处输入图像描述](../Images/a9c7e80e4702644bfe3d65296aa126f0.png)

据我了解，这取决于应用程序恰好在其下运行的视觉风格或主题。问题是，我如何计算需要放置日历的表格的适当大小，或者以其他方式使其在具有不同主题的多个系统上看起来很优雅？

我对当前的代码很不满意，它将日历放置在一个表单中`container`（

```
private static Form SetUpCalendar()
{
    var calendar = new MonthCalendar
                {
                    MaxSelectionCount = maxSelectionCount,
                    BackColor = SystemColors.Info,
                    CalendarDimensions = new Size(1, 1),
                    // (..etc...)                    
                };

    var container = new Form
                {
                    FormBorderStyle = FormBorderStyle.FixedDialog,
                    Size = new Size(calendar.Width + 74, calendar.Height + 47)
                };

    container.Controls.AddRange(new Control[] {calendar});

    return container;
} 
```

我一直无法找到一种方法来更好地自动调整表单的大小以适应日历，并且将不胜感激有关如何改进这一点的任何提示。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T15:27:11.513

为什么不将表单的**AutoSize**属性设置为 true，并将**AutoSizeMode**设置为**GrowAndShrink**？如果要消除控件周围的空间，还需要设置边距属性。

# intuit-partner-platform - 维度要求、Intuit 合作伙伴平台 - Intuit Anywhere、应用程序和工具栏图标和屏幕截图

> ID：15573924
> 
> 赞同：0
> 
> 时间：2013-03-22T15:21:13.290
> 
> 标签：intuit-partner-platform, quickbooks-online, intuit

在[Intuit 合作伙伴平台 - Intuit Anywhere - Publish your App](https://ipp.developer.intuit.com/0010_Intuit_Partner_Platform/0025_Intuit_Anywhere/0040_Publishing_Your_App/4._Submit_content_for_Publishing) Section 中提到提供以下内容

1) App Logo - 这将出现在 Intuit App Center 上。
2) 工具栏应用程序图标 - 这将出现在 Intuit“蓝点”菜单中的应用程序名称旁边。
3) 应用截图或横幅图片 - 这将出现在 Intuit 应用中心横幅的右侧。

注意：这些必须符合法律协议下的 Intuit 品牌指南。

以上图片的尺寸要求是什么？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T15:33:00.253

它是 16x16,150x150 信息在您提交发布申请时在表格上

# php - 将时间（例如 15:00）转换为 UNIX 时间戳

> ID：15573925
> 
> 赞同：2
> 
> 时间：2013-03-22T15:21:14.463
> 
> 标签：php, function, date, unix-timestamp

是否可以使用 PHP 将时间（例如“15:00”）转换为 UNIX 时间戳？

不幸的是，我的这些数据来源不包括其余的日期/时间数据（日期等）

我知道时间与哪个时区有关，那么可以这样做吗？它们是一个预先存在的功能吗？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T15:25:10.003

没有日期，就不可能准确地做到这一点。

例如，在实行夏令时的地区，当地时间 15:00 可能对应于 10:00 UTC 或 9:00 UTC，具体取决于日期。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T15:41:53.227

[DateTime::createFromFormat](http://www.php.net/manual/es/datetime.createfromformat.php)可能对您有用。正如@ceejayoz 指出的那样，如果没有更多数据，就不可能创建可靠的时间戳。以下示例假设每个日期都与当天相关

```
<?php
$d = DateTime::createFromFormat('H:i', '15:00', new DateTimeZone('Europe/Berlin');
echo $d->getTimestamp(); 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-03-22T15:24:19.947

不，您不能，因为日期的概念存在于 Unix 时间戳中。Unix 时间戳是自 1970 年 1 月 1 日以来的秒数。

由于 PHP 是相当`forgiving`的，你仍然可以使用函数 strtotime。

strtotime("15:00")

PHP 假定当前日期/今天。

欲了解更多信息，请参阅以下链接。

[http://php.net/manual/en/function.strtotime.php](http://php.net/manual/en/function.strtotime.php)

# javascript - Greasemonkey 脚本仅使用 CTRL + F5 加载？

> ID：15573926
> 
> 赞同：1
> 
> 时间：2013-03-22T15:21:19.937
> 
> 标签：javascript, ajax, twitter, greasemonkey

*我为批量关注/取消关注Twitter*用户创建了这个 Greasemonkey 。该脚本工作得很好。但是，当我第一次访问包含列表中的一个页面时，它不会总是（几乎永远不会）加载。

例如，如果我去[twitter.com/followers](https://twitter.com/followers)`CTRL``F5` ，除非我使用（从服务器刷新页面内容），否则脚本不会加载。

我不确定这是否是 Greasemonkey 脚本应该运行的方式，还是我的代码中需要更改某些内容？

我的GM脚本：

```
// ==UserScript==
// @name            Brainstack.net "YOU Follow (Beta)"
// @namespace       net.brainstack.gm
// @description     Script for automating the following of users from the Twitter Followers page
// @require         http://gm.brainstack.net/tasa/tasa.js
// @resource        tasa_CSS http://gm.brainstack.net/tasa/tasa.css
// @downloadURL     http://gm.brainstack.net/tasa/Brainstack.net_tasa.user.js
// @updateURL       http://gm.brainstack.net/tasa/Brainstack.net_tasa.meta.js
// @include         https://twitter.com/followers*
// @include         https://www.twitter.com/followers*
// @include         https://twitter.com/*/followers*
// @include         https://www.twitter.com/*/followers*
// @include         https://twitter.com/*/following*
// @include         https://www.twitter.com/*/following*
// @include         https://twitter.com/following*
// @include         https://www.twitter.com/following*
// @include         https://twitter.com/search/users?*
// @run-at          document-end
// @grant           GM_getResourceText
// @grant           GM_addStyle
// @version         1.14
// ==/UserScript==

//add CSS to head
var CSS = GM_getResourceText("tasa_CSS");
GM_addStyle(CSS);

//hook to the page load
bsnet_app_page_load(); 
```

* * *

您可以[在 gm.brainstack.net 下载和/或安装脚本](http://gm.brainstack.net/tasa/Brainstack.net_tasa.user.js)。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T00:08:27.960

[此问题与我必须刷新页面以运行 Greasemonkey 脚本](https://stackoverflow.com/questions/14024120/i-have-to-refresh-the-page-for-my-greasemonkey-script-to-run)所涵盖的问题类型相同？. 阅读、理解并使用该答案的技术在“新”页面上“触发”您的脚本。

***此外，***其中的脚本代码`tasa.js`具有以下内容：

```
var localStorageString = localStorage['bsnet_app_follower'];
if (localStorageString.length > 0){ 
```

这会使脚本崩溃，尤其是在早期运行时。

那种代码*应该是*：

```
var localStorageString = localStorage['bsnet_app_follower'];
if (localStorageString  &&  localStorageString.length > 0){ 
```

* * *

* * *

可能还有其他问题（一眼看不到；也没有调试脚本），但这不是代码审查的地方。

# php - PHP：比较数组并将第一个数组值复制到第二个数组值，其中第二个数组值为空

> ID：15573930
> 
> 赞同：0
> 
> 时间：2013-03-22T15:21:35.503
> 
> 标签：php, arrays, null, copy

如何实现以下？

```
$array1 = array( id => '11', c1 => 'abcd', c2 => '4500', c3 => 'texas' ,c4=>'name' );
$array2 = array( id => '12', c1 => '',    c2 => '4500', c3 => 'arizona', c4=>'' ); 
```

我想比较数组 1 和数组 2，并在数组 2 的值为 时将值从数组 1 复制到数组 2 `null`。上面数组的示例我只想将 c1 和 c4 键从数组 1 复制到数组 2。

谢谢您的帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T15:23:21.283

[`foreach()`](http://php.net/manual/en/control-structures.foreach.php)一个循环怎么样：

```
foreach($array1 as $key=>$value){
    if(!$array2[$key]){
        $array2[$key] = $value;
    }
} 
```

并最小化，但可读性差一点：

```
foreach($array1 as $key=>$value){
    $array2[$key] = $array2[$key] ? $array2[$key] : $value;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T15:28:57.420

尝试这个

```
<?php
$array1 = array( id => '11', c1 => 'abcd', c2 => '4500', c3 => 'texas' ,c4=>'name' );
$array2 = array( id => '12', c1 => '',    c2 => '4500', c3 => 'arizona', c4=>'' );

foreach($array2 as $key =>$value)
{
  if($value == '')
 {
    $array2[$key] = $array1[$key];
 }  
 }  

print_r($array2);
 ?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T15:25:58.113

尝试这个 ：

```
foreach($array2 as $key=>$value)

if ($value==null) $array2[$key]=$array1[$key]; 
```

# jquery - 升级到 jQuery 1.9+ 后如何检测 IE7

> ID：15573931
> 
> 赞同：1
> 
> 时间：2013-03-22T15:21:35.600
> 
> 标签：jquery

我知道我们应该更喜欢“功能检测”而不是“版本检测”，但我有一个网站明确不支持 IE7（或更早的*shudder*）。当用户使用不受支持的浏览器连接到站点时，我想简单地显示一个对话框。

由于 jQuery 1.9+ 已经删除了它用于检测特定浏览器的功能，所以对我来说检查这个“浏览器黑名单”的最佳方法是什么。. . ? 随意选择一些 IE7 中不支持的功能并将其用作呈现“抱歉，不支持 Internet Explorer 7 及更早版本”消息的基础感觉很不自然。. .

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-22T15:23:52.803

```
<script type="text/javascript">
    var isLessThanIE8 = false;
</script>
<!--[if lt IE 8]>
    <script type="text/javascript">isLessThanIE8 = true;</script>
<![endif]-->
<script type="text/javascript">
    if (isLessThanIE8 === true) {
        alert('Get a new browser');
    }
</script> 
```

跨浏览器兼容，从不抛出 javascript 错误，也不是真正的“hacky”。

# json - 正在寻找一个网络服务器来替代我的本地主机？

> ID：15573933
> 
> 赞同：0
> 
> 时间：2013-03-22T15:21:37.903
> 
> 标签：json, webserver

我有一个 android 应用程序，它成功地从我的本地服务器读取 .json 文件，但是当应用程序在移动设备上运行时，它无法读取文件。我做了一场噩梦，试图解决这个问题，所以我放弃了。

我想也许将 .json 文件上传到在线 Web 服务器会是一个更简单的选择。我以前没有使用在线网络服务器的经验，想知道是否有人可以推荐一个网站？

我只会使用它上传 5 个不超过 5KB 的 .json 文件，并且可能只需要在线托管大约一个月，我不确定是否有每月订阅的替代方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T15:27:00.997

有很多免费的网络服务。但是，如果您想让它变得快速和简单，请尝试使用谷歌网站。它为您提供大约一个月的评估时间，对您来说应该足够了。

但是，如果您只需要少量文件，则可以使用任何便宜的网络主机，例如 bluehost，如果您只想按月订阅。

您还可以使用按小时为您提供服务的亚马逊 EC2，因此如果您不想使用它，只需将其关闭即可。

[http://aws.amazon.com/ec2/pricing/](http://aws.amazon.com/ec2/pricing/)

# python - 更新图形而不保存

> ID：15573934
> 
> 赞同：2
> 
> 时间：2013-03-22T15:21:38.057
> 
> 标签：python, matplotlib

使用 matplotlib 的 PGF 后端，我正在尝试修改对数 y 轴的刻度标签。但是，我事先不知道我的刻度标签是什么，所以我想获取刻度`ax.get_yticklabels()`标签，然后修改标签的文本（通过删除子字符串）。问题是，返回的列表仅在发出命令`get_yticklabels()`时才被填充。`savefig('plot.pdf')`

是否有一个功能可以更新整个图形而不实际保存它，所以我可以访问标签？该`fig.canvas.draw()`功能不像我预期的那样工作。我在 Linux 上使用 matplotlib 版本 1.2.0 和 Python 3.3.0。

PS：根本问题是，我无法使用 PGF 后端为对数图上的标签获取无衬线字体，我很确定这是后端中的错误。当然，对此的任何解决方案也将受到欢迎，并使我最初的问题过时。

# symfony - symfony2 获取实体上的所有验证约束（yml、xml、注释）

> ID：15573935
> 
> 赞同：4
> 
> 时间：2013-03-22T15:21:38.450
> 
> 标签：symfony, symfony-forms

我试图获取实体上的所有验证约束并将这些约束转换为 Jquery 验证规则，现在我能够获得注释定义的约束（感谢：[Symfony2 get validation constraint on an entity](https://stackoverflow.com/questions/15482725/symfony2-get-validation-constraints-on-an-entity)），但我在获取 xml 和 yml 时遇到了一些麻烦那些。

```
$xml_file_loader = new XmlFileLoader("path_to_my_project/vendor/friendsofsymfony/user-bundle\FOS\UserBundle\Resources\config\validation.xml"); 
```

使用类似的代码意味着我需要事先知道 xml/yml 文件的位置，我试图以某种方式编写可以自动执行此操作的通用代码。

有没有办法一次获得所有约束？如果不是，我怎么知道 xml/yml 文件的位置，并且在继承的情况下，我需要检查父约束……这可行吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-26T04:58:23.353

```
private function getValidations()
    {
        $validations=[];
        $validator=$this->get("validator");
        $metadata=$validator->getMetadataFor(new your_entity());
        $constrainedProperties=$metadata->getConstrainedProperties();
        foreach($constrainedProperties as $constrainedProperty)
        {
            $propertyMetadata=$metadata->getPropertyMetadata($constrainedProperty);
            $constraints=$propertyMetadata[0]->constraints;
            $outputConstraintsCollection=[];
            foreach($constraints as $constraint)
            {
                $class = new \ReflectionObject($constraint);
                $constraintName=$class->getShortName();
                $constraintParameter=null;
                switch ($constraintName) 
                {
                    case "NotBlank":
                        $param="notBlank";
                        break;
                    case "Type":
                        $param=$constraint->type;
                        break;
                    case "Length":
                        $param=$constraint->max;
                        break;
                }
                $outputConstraintsCollection[$constraintName]=$param;
            }
            $validations[$constrainedProperty]=$outputConstraintsCollection;
        }
        return $validations;
    } 
```

**回报：**

```
array(13) (
      [property1] => array(4) (
        [NotBlank] => (string) notBlank
        [NotNull] => (string) notBlank
        [Type] => (string) string
        [Length] => (int) 11
      )
      [property2] => array(4) (
        [NotBlank] => (string) notBlank
        [NotNull] => (string) notBlank
        [Type] => (string) string
        [Length] => (int) 40
      )
      ..........
) 
```

**返回的数组可以配置或用于定义客户端验证规则，具体取决于您使用的客户端验证库/代码**

```
$validator=$this->get("validator");
$metadata=$validator->getMetadataFor(new yourentity()); 
```

该对象`$metadata`现在包含有关与您的特定实体有关的验证的所有元数据。

# typo3 - 在 FCE 容器翻译中 - 显示原始元素的项目

> ID：15573938
> 
> 赞同：0
> 
> 时间：2013-03-22T15:21:44.893
> 
> 标签：typo3

我还有另一个关于 TYPO3 中 FCE 元素翻译的问题。

问题：我有一个可以容纳多个物品的 FCE 容器。容器和项目有翻译。

当我在原始容器中添加或删除另一个项目时，我还必须在所有翻译中添加/删除这个项目。这很烦人，因为我想在所有翻译中显示相同的项目。

现在我要做的是更改我的 FCE 的输出，以便始终显示原始容器的项目。

这是 T3 中一个标准内容字段的 TS，也许有人可以重写：

```
10 = RECORDS
10.source.current = 1
10.table = tt_content 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T19:09:08.077

编辑您的 FCE

![在此处输入图像描述](../Images/254bd1cffffcaaf657f9be5183aab027.png)

然后在语言中选择[全部]：

![在此处输入图像描述](../Images/0b06a06c0dab4ea7c68cb4df17a64150.png)

# c++ - stk::SineWave 如何计算正弦波？

> ID：15573941
> 
> 赞同：0
> 
> 时间：2013-03-22T15:21:47.080
> 
> 标签：c++, sound-synthesis

我是 C++ 新手，我正在尝试[从 Synthesis Toolkit 中理解 SineWave 类](https://ccrma.stanford.edu/software/stk/SineWave_8h_source.html)。描述[说](https://ccrma.stanford.edu/software/stk/classstk_1_1SineWave.html)：

`This class computes and saves a static sine "table" that can be shared by multiple instances. It has an interface similar to the WaveLoop class but inherits from the Generator class. Output values are computed using linear interpolation.`

所以我猜它根本不计算正弦？如果它在正弦波的高点和低点之间使用线性插值，那不就是三角波吗？有人可以解释计算的作用吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T15:34:30.180

如果您看一下[实现](https://github.com/morganpackard/EZPlug/blob/master/STK/SineWave.cpp)，您会看到构造函数以的步长计算`sin`范围，默认情况下是。然后在这些值之间进行线性插值。这非常接近正弦函数。`0.0``1.0``1.0 / TABLE_SIZE``TABLE_SIZE``2048`

# css - 如何生成具有自定义高度的文本字段（yii textField）

> ID：15573945
> 
> 赞同：3
> 
> 时间：2013-03-22T15:22:08.887
> 
> 标签：css, yii

大家好，感谢阅读。我有这个

```
 <?php
                echo $form->textField($model, 'link', array(
                    'prepend' => '<i class="icon-4x icon-globe" style="line-height: 54px;"></i>',
                    'class' => 'span12', 'maxlength' => 999, 
                    'height'=>100, 
                    'htmlOptions' => array('style' => 'height:60px;font-size: 22px;')
                    ));
                ?> 
```

这不适用于宽度，但是当我用高度替换它时它不起作用。没有其他 css 规则覆盖它。如何在 yii 中的文本文件上设置自定义高度

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-22T15:30:45.863

来自[yii 文档](http://www.yiiframework.com/doc/api/1.1/CActiveForm#textField-detail)：

```
public string textField(CModel $model, string $attribute, array $htmlOptions=array ( )) 
```

所以你应该有：

```
$form->textfield($model,'link',array('style'=>'width:600px;')); 
```

我看到你也有一堂课：

```
$form->textfield($model,'link',array('style'=>'width:600px;', 'class' => 'class_x')); 
```

现在，让我解释一下您的代码中发生了什么：

```
echo $form->textField($model, 'link', array(
                    'prepend' => '<i class="icon-4x icon-globe" style="line-height: 54px;"></i>',
                    'class' => 'span12', 'maxlength' => 999, 
                    'height'=>100, 
                    'htmlOptions' => array('style' => 'height:60px;font-size: 22px;')
                    )); 
```

第一个和第二个参数都ok

说到第三个，起初看起来不错，因为它是一个数组，代表文档中的 htmlOptions 数组

如果你深入挖掘，你会看到在 htmlOptions 数组中你有另一个 htmlOptions 数组；为什么？

像这样写：

```
echo $form->textField($model, 'link', array(
                    'prepend' => '<i class="icon-4x icon-globe" style="line-height: 54px;"></i>',
                    'class' => 'span12',
                    'style' => 'height:60px;font-size: 22px;width:999px;',
                    )); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-06T11:08:07.107

你可以使用类似的东西：

```
echo $form->textField($model,'link',array('size'=>50,'maxlength'=>50,)); 
```

# maps - 谷歌从 mysql 查询映射 V3 相同的 lat lng

> ID：15573954
> 
> 赞同：0
> 
> 时间：2013-03-22T15:22:30.287
> 
> 标签：maps

我将[PHP mysql](https://developers.google.com/maps/articles/phpsqlajax_v3?hl=de)用于我的谷歌地图。将显示两个不同的标记（绿色表示 ja（是），橙色表示 nein（否））。但是当两个“事物”具有相同的纬度和长度时，只会显示其中一个（例如：一个男人（ja）和一个女人（nein）住在同一个房子里）我怎样才能得到两个标记？我不想在同一个信息窗口中也没有集群。首先是php：

```
 $query = "SELECT ...";
$result = mysql_query($query);
if (!$result) {
  die('Invalid query: ' . mysql_error());
}
header("Content-Type: text/xml; charset=utf-8");
header("Content-type: text/xml");

// Start XML file, echo parent node
echo '<markers>';

// Iterate through the rows, printing XML nodes for each
while ($row = @mysql_fetch_assoc($result)){
// ADD TO XML DOCUMENT NODE
parseToXML($row['kennelname'] .'</a>" ';
  echo '<marker ';

if ($row['studlist'] == 'ja')  
{echo 'studlist=" " ';} else {echo 'studlist="Daten nicht geprüft!" ';} 

  echo 'name="' . parseToXML($row['dogname']) . '" ';
  echo 'lat="' . $row['lat'] . '" ';
  echo 'lng="' . $row['lng'] . '" ';
  echo 'type="' . $row['studlist'] . '" ';
  echo ' />';

}

// End XML file
echo '</markers>'; 
```

和js：

```
 <script src="http://maps.google.com/maps/api/js?sensor=false"
            type="text/javascript"></script>
<script type="text/javascript">
    //<![CDATA[

var customIcons = {
  ja: {
    icon: 'http://labs.google.com/ridefinder/images/mm_20_green.png',
    shadow: 'http://labs.google.com/ridefinder/images/mm_20_shadow.png'
  },
  nein: {
    icon: 'http://labs.google.com/ridefinder/images/mm_20_orange.png',
    shadow: 'http://labs.google.com/ridefinder/images/mm_20_shadow.png'
  }
};

    function load() {
      var map = new google.maps.Map(document.getElementById("map"), {
        center: new google.maps.LatLng(51.162014, 10.450573),
        zoom: 6,
        mapTypeId: 'roadmap'
      });
      var infoWindow = new google.maps.InfoWindow;

      // Change this depending on the name of your PHP file
      downloadUrl("testfemale_de_xml.php", function(data) {
        var xml = data.responseXML;
        var markers = xml.documentElement.getElementsByTagName("marker");
        for (var i = 0; i < markers.length; i++) {
            var id = markers[i].getAttribute("id");
          var name = markers[i].getAttribute("name");

          var address = markers[i].getAttribute("address");
          var studlist = markers[i].getAttribute("studlist");
          var type = markers[i].getAttribute("type");
          var point = new google.maps.LatLng(
              parseFloat(markers[i].getAttribute("lat")),
              parseFloat(markers[i].getAttribute("lng")));

          var html = 
          "<a href='/dog.php?id=" + id + "'>" +  name + "</a>" +
          "<br/><img  src='/photo/" + id + "/" + id + ".jpg' height='70' width='' alt=''>" + 

          "<br />" +studlist

           ;
          var icon = customIcons[type] || {};
          var marker = new google.maps.Marker({
            map: map,
            position: point,
            icon: icon.icon,
            shadow: icon.shadow
          });
          bindInfoWindow(marker, map, infoWindow, html);
        }
      });
    }

    function bindInfoWindow(marker, map, infoWindow, html) {
      google.maps.event.addListener(marker, 'click', function() {
        infoWindow.setContent(html);
        infoWindow.open(map, marker);
      });
    }

    function downloadUrl(url, callback) {
      var request = window.ActiveXObject ?
          new ActiveXObject('Microsoft.XMLHTTP') :
          new XMLHttpRequest;

      request.onreadystatechange = function() {
        if (request.readyState == 4) {
          request.onreadystatechange = doNothing;
          callback(request, request.status);
        }
      };

      request.open('GET', url, true);
      request.send(null);
    }

    function doNothing() {}

    //]]>
  </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-29T15:02:58.103

何时标记共享相同的位置，您只会看到一个。您可以使用标记的 zIndex 属性选择显示哪一个。例如：

```
marker.setZIndex(google.maps.Marker.MAX_ZINDEX + 1); 
```

# javascript - 选择输入字段时的信息对话框

> ID：15573956
> 
> 赞同：0
> 
> 时间：2013-03-22T15:22:31.433
> 
> 标签：javascript, twitter-bootstrap

我已经搜索过，但找不到这个问题的答案。我想我只是不知道我想要实现的目标的正确名称。

基本上，我想设置一些输入字段，就好像我们在网站上创建一个帐户一样。但是，当用户在输入字段内部单击时，我希望在输入字段的右侧弹出一个对话框。此对话框弹出将提供有关输入字段中确切需要进入的内容以指导用户的更多信息。我希望对话框不是交互式的，因此它不会妨碍您。

我相信那里有一些教程。但是，我猜我只是不知道这个函数的正确名称。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T17:34:52.073

我*认为*您的意思是Dojo 提供的**工具提示对话框类型的功能。**此**[链接](http://dojotoolkit.org/reference-guide/1.8/dijit/TooltipDialog.html)**应该为您提供一些解释和示例。这些示例显示在按钮上，但也可以在`input`现场轻松完成。

我很确定这也会出现在其他技术中，比如 jQuery。

# mysql - 如何在 MySQL 表中选择特定范围的值？

> ID：15573959
> 
> 赞同：6
> 
> 时间：2013-03-22T15:22:38.483
> 
> 标签：mysql, sql, select

以下是我的 MySQL 表。我想从我的表中选择特定范围的值`hello`。

```
name      age        job       gender

A         33         dgfd      m
b         44         gdfg      f
c         21         jhkh      m
e         23         etertr    m 
```

我将如何选择年龄在 20-30 岁之间的男性。

```
SELECT hello.*
WHERE hello.age='20-30' AND hello.gender='m'; 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-22T15:24:29.730

您可以使用`WHERE`子句来过滤数据：

```
select name, age, job, gender
from hello
where age >=20
  and age <=30
  and gender = 'm' 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!2/16c15/1)

这也可以写成`BETWEEN`：

```
select name, age, job, gender
from hello
where age between 20 and 30
  and gender = 'm' 
```

请参阅[SQL Fiddle with Demo](http://www.sqlfiddle.com/#!2/16c15/2)。

通常，您会希望存储出生日期而不是`age`一个人的出生日期，然后可以在需要时计算年龄。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-03-22T15:25:09.260

```
SELECT name
FROM hello
WHERE age BETWEEN 20 AND 30
  AND gender = 'm' 
```

不要储存`age`。存储日期字段并计算年龄。如果这个人变老了会怎样？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T15:25:11.360

`SELECT * FROM hello WHERE age>=20 AND age <=30 AND gender='m';`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T16:40:20.993

因为年龄每年都在变化，所以您可以这样做。

像这样设置表：

```
delimiter $$

CREATE TABLE `hello` (
  `name` varchar(45) NOT NULL,
  `birthdate` date DEFAULT NULL,
  `job` varchar(45) DEFAULT NULL,
  `gender` enum('m','f') DEFAULT NULL,
  PRIMARY KEY (`name`)
) ENGINE=MyISAM DEFAULT CHARSET=utf8$$ 
```

我正在使用的值：

```
'A', '1980-08-04', 'clerk', 'm'
'B', '1969-10-12', 'waitress', 'f'
'C', '1992-09-16', 'pilot', 'm'
'd', '1991-02-21', 'unemployed', 'm' 
```

SQL查询：

```
select name,TIMESTAMPDIFF(YEAR,birthdate,current_date) as age,job,gender from hello where birthdate > current_date - interval 30 YEAR and birthdate < current_date - interval 20 year; 
```

返回查询的答案

```
name    age     job          gender
C       20      pilot        m
d       22      unemployed   m 
```

在此处添加到 SQLFiddle。 [http://www.sqlfiddle.com/#!2/0143c/1/0](http://www.sqlfiddle.com/#!2/0143c/1/0)

# c# - ListView - 如何响应双击非项目？

> ID：15573960
> 
> 赞同：4
> 
> 时间：2013-03-22T15:22:40.280
> 
> 标签：c#

我想要做的是双击 ListView 中的空行并让它在那里插入一个项目。它已经响应了 MouseDoubleClick 事件（用于编辑项目）并且工作正常，但是如果双击不包含 ListViewItem 的 ListView 的一部分，则似乎不会触发 MouseDoubleClick。

我已经尝试响应对话框本身上的常规 MouseDoubleClick 事件，但如果它位于 ListView 的“空区域”之一，则不会触发该事件。

有没有办法在没有子类化的情况下响应单击 ListView 的“空区域”？为了做到这一点，需要/需要处理哪些事件/事件？

当前对对话框双击（鼠标和常规）的响应如下所示：

```
if ( RectangleToScreen(list.ClientRectangle).Contains(e.X, e.Y) )
   list_MouseDoubleClick(sender, e); 
```

和 list_MouseDoubleClick() （其中 m_SelItem 是当前选定的项目）

```
private void list_MouseDoubleClick(object sender, MouseEventArgs e)
{
   if ( m_SelItem == null && m_Combo.Items.Count > 0 )
   {
    m_SelItem = new ListViewItem(new string[] { "", "Rd" });
    list.Items.Add(m_SelItem);
   }
...
} 
```

编辑：似乎整个地区只是一个事件的黑洞。例如，我尝试只响应 ListView 和 Dialog 的常规单击/鼠标单击事件。除非单击是在 ListViewItem 上，否则即使这些也不会被触发。我猜唯一的解决方案是子类化。

编辑：坚持有回报！事实证明，我可以通过响应“MouseDown”事件来获得所需的结果：

```
private void list_MouseDown(object sender, MouseEventArgs e)
{
    if ( e.Clicks == 2 )
        list_MouseDoubleClick(sender, e);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T16:07:45.143

MouseDown 事件最终成为我所需要的：

```
private void list_MouseDown(object sender, MouseEventArgs e)
{
    if ( e.Clicks == 2 )
        list_MouseDoubleClick(sender, e);
} 
```

# php - CakePHP Containable 在“有很多”关系中没有返回正确的结果

> ID：15573971
> 
> 赞同：0
> 
> 时间：2013-03-22T15:23:15.423
> 
> 标签：php, cakephp, cakephp-model

有人可以告诉我为什么它不起作用：

```
$data = $this->Question->find('all', array(
                             'conditions' => array(
                                               'Question.id' => $qid
                                             ),
                             'contain' => array(
                                            'Slide' => array('Training')
                                          )
                   )); 
```

关系如下：

`Training -> has_many -> Slide -> has_many -> Question`

那么为什么结果是这样的：

```
 [0] => Array
    (
        [Question] => Array
            (
                [id] => 1
            )
        [Slide] => Array
            (
                [id] => 1320
            )
    ) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T16:55:34.940

您在 Question 模型上调用#find。因此，您需要定义从问题到幻灯片以及从幻灯片到培训的关系，以将它们包含在您的结果中。尝试添加 Question belongsTo Slide 和 Slide belongsTo Training。

# java - 最佳实践数据库访问 - 联系人列表

> ID：15573972
> 
> 赞同：0
> 
> 时间：2013-03-22T15:23:19.283
> 
> 标签：java, database, swing, jtable, jlist

我一直想知道，在为这个问题创建几个愚蠢的解决方案时，应该如何正确地完成以下操作：

数据表：ID | 名字 | 姓氏 | 地址 | 数据 ...

我想在列表框中显示所有给定名称 + 姓氏，并在选择一项时，我想检索相应数据集的其余部分并显示在某些文本框中。

所以我基本上是这样做的：

1）查询：SELECT ID、givenname、lastname FROM DataTable；

2）创建和“联系对象”的ArrayList（只是一个与DataTable具有相同成员的类有列），我遍历结果集，因此创建了几个具有ID、givenname和lastname的对象。

！3）我希望列表框显示给定名称+“”+姓氏，但是在选择“John Doe”时，我希望程序知道这个“john Doe”是arraylist的哪个元素（如果有多个他们），从对象中检索 ID 并检索他的地址和“数据”

我经常做的是“选择列表框中的第三个 John Doe，让我们在数组列表中查找第三个 John Doe，并希望上帝这是正确的”，这对我来说似乎非常不必要。

在 Java + Swing 中有什么可用的解决方案

我希望我能以某种方式明确我需要什么^^

关于比尔门

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T16:39:51.903

为了显示一个对象，Swing 组件将使用对象放置在其中的 toString() 方法。一种常见的方法是创建一个包含名称、ID 等的 Data 类，实现 toString() 以显示您想要的内容，然后将这些对象的列表放入您的 JList 中。然后在选择时，获取所选项目，将其转换为数据类，然后调用 getID()。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T16:22:31.830

您应该创建一个表模型来保存您的数据，并在需要时创建渲染器以正确呈现它。有关详细信息，请参阅[如何使用表格](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html)。然后在表的选择侦听器中，您可以检索相关行。您可以使用`TableModel.getValueAt()`或添加辅助方法来检索选定的数据。下面是一个简单的用户模型示例。该应用程序打印一个选定的用户，包括在表中不可见的 id。模型中有一个方便的方法`getUser()`来获取特定行的用户。请注意，您也可以将`DefaultTableModel`其用于简单的场景。

```
import java.awt.BorderLayout;
import java.util.ArrayList;
import java.util.List;
import javax.swing.*;
import javax.swing.event.*;
import javax.swing.table.AbstractTableModel;

public class UserTableDemo {

    public UserTableDemo() {
        JFrame frame = new JFrame("UserTable");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        final UserModel model = new UserModel();
        final JTable table = new JTable();
        table.setModel(model);
        JScrollPane scrollPane = new JScrollPane(table);
        JPanel content = new JPanel(new BorderLayout());
        content.add(scrollPane, BorderLayout.CENTER);
        final JTextArea output = new JTextArea(5, 30);
        content.add(output, BorderLayout.SOUTH);

        table.setSelectionMode(ListSelectionModel.SINGLE_SELECTION);
        table.getSelectionModel().addListSelectionListener(
                new ListSelectionListener() {
                    @Override
                    public void valueChanged(ListSelectionEvent e) {
                        if (!e.getValueIsAdjusting()) {
                            UserEntry entry = model.getUser(table
                                    .getSelectedRow());
                            if (entry != null) {
                                output.setText("Selected row:"
                                        + table.getSelectedRow() + " "
                                        + entry.toString());
                            } else {
                                output.setText("");
                            }
                        }
                    }
                });

        frame.add(content);
        frame.setLocationByPlatform(true);
        frame.pack();
        frame.setVisible(true);
    }

    public class UserModel extends AbstractTableModel {

        private static final long serialVersionUID = 1L;
        private List<UserEntry> users = new ArrayList<UserEntry>();

        public UserModel() {
            //TODO - load users
            users.add(new UserEntry(3, "John", "Doe"));
            users.add(new UserEntry(2, "John", "Doe"));
            users.add(new UserEntry(1, "John", "Doe"));
        }

        public UserEntry getUser(int row) {
            if(row >= 0 && row < users.size())
                return users.get(row);
            return null;
        }

        @Override
        public int getRowCount() {
            return users.size();
        }

        @Override
        public int getColumnCount() {
            return 2;
        }

        @Override
        public Object getValueAt(int rowIndex, int columnIndex) {
            UserEntry entry = users.get(rowIndex);
            switch (columnIndex) {
                case 0:
                    return entry.getFirstName();
                case 1:
                    return entry.getLastName();
            }
            return null;
        }

        @Override
        public String getColumnName(int column) {
            switch (column) {
                case 0:
                    return "First Name";
                case 1:
                    return "Last Name";
            }
            return null;
        }
    }

    public class UserEntry {
        private int id;
        private String firstName;
        private String lastName;

        public UserEntry(int id, String firstName, String lastName) {
            super();
            this.id = id;
            this.firstName = firstName;
            this.lastName = lastName;
        }

        public int getId() {
            return id;
        }

        public String getFirstName() {
            return firstName;
        }

        public String getLastName() {
            return lastName;
        }

        @Override
        public String toString() {
            return "UserEntry [id=" + id + ", firstName=" + firstName
                    + ", lastName=" + lastName + "]";
        }
    }

    public static void main(String args[]) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                new UserTableDemo();
            }
        });
    }
} 
```

如果您使用`JList`而不是`JTable`.

***编辑：***

这是一个类似的示例，它使用`JList`with`DefaultListModel`和自定义渲染器来显示用户列表。

```
import java.awt.BorderLayout;
import java.awt.Component;
import javax.swing.*;
import javax.swing.event.*;

public class UserListDemo {
    public UserListDemo() {
        JFrame frame = new JFrame("User List");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        final JList list = new JList();

        JScrollPane scrollPane = new JScrollPane(list);
        JPanel content = new JPanel(new BorderLayout());
        content.add(scrollPane, BorderLayout.CENTER);
        final JTextArea output = new JTextArea(5, 40);
        content.add(output, BorderLayout.SOUTH);
        final DefaultListModel model = new DefaultListModel();
        model.addElement(new UserEntry(3, "John", "Doe"));
        model.addElement(new UserEntry(1, "John", "Doe"));
        model.addElement(new UserEntry(3, "John", "Doe"));
        list.setModel(model);
        list.setSelectionMode(ListSelectionModel.SINGLE_SELECTION);

        list.setCellRenderer(new DefaultListCellRenderer() {
            @Override
            public Component getListCellRendererComponent(JList list,
                    Object value, int index, boolean isSelected,
                    boolean hasFocus) {
                if (value instanceof UserEntry) {
                    return super.getListCellRendererComponent(list,
                            ((UserEntry) value).getFirstName() + " "
                                    + ((UserEntry) value).getLastName(), index,
                            isSelected, hasFocus);
                }
                return super.getListCellRendererComponent(list, value, index,
                        isSelected, hasFocus);
            }
        });

        list.getSelectionModel().addListSelectionListener(
                new ListSelectionListener() {
                    @Override
                    public void valueChanged(ListSelectionEvent e) {
                        if (!e.getValueIsAdjusting()) {
                            UserEntry entry = (UserEntry) list
                                    .getSelectedValue();
                            if (entry != null) {
                                output.setText("Selected row:"
                                        + list.getSelectedIndex() + " "
                                        + entry.toString());
                            } else {
                                output.setText("");
                            }
                        }
                    }
                });

        frame.add(content);
        frame.setLocationByPlatform(true);
        frame.pack();
        frame.setVisible(true);
    }

    public class UserEntry {
        private int id;
        private String firstName;
        private String lastName;

        public UserEntry(int id, String firstName, String lastName) {
            super();
            this.id = id;
            this.firstName = firstName;
            this.lastName = lastName;
        }

        public int getId() {
            return id;
        }

        public String getFirstName() {
            return firstName;
        }

        public String getLastName() {
            return lastName;
        }

        @Override
        public String toString() {
            return "UserEntry [id=" + id + ", firstName=" + firstName
                    + ", lastName=" + lastName + "]";
        }
    }

    public static void main(String args[]) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                new UserListDemo();
            }
        });
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T16:13:03.097

我认为你可以把你的东西`id`放在一边。就像`HTML`拿标签一样`<option>`，我会这样做：

```
<option value="id">Jonh Doe</option> 
```

属性内的值`value`将是数据库中的实际 Id，文本将是`givenname + " " + lastname`.

这样，我将保留与识别此人相关的内容并显示姓名。之后，当用户选择一个项目时，我将根据`id`from`value`属性检索信息。

# sharepoint-2010 - ADFS 2.0 声明转换

> ID：15573979
> 
> 赞同：0
> 
> 时间：2013-03-22T15:23:41.040
> 
> 标签：sharepoint-2010, adfs2.0, federation, claims

我有 Sharepoint，它使用 adfs 配置了基于声明的身份验证。ADFS 配置为使用第三方声明提供程序信任。因此，当用户访问共享点时，他会通过 adfs 重定向到第三方身份提供者登录页面。此身份提供者 (IdP) 将 saml2 令牌返回给 adfs，然后 adfs 将用户重定向到共享点。

问题是第三方 IdP 被配置为仅返回特定的 saml 属性（声明）。我需要配置 ADFS 以了解此特定属性。

自定义 saml 属性如下所示：

```
<saml:Attribute Name="CustomID">
    <saml:AttributeValue xmlns:saml="urn:oasis:names:tc:SAML:2.0:assertion">12345</saml:AttributeValue>
</saml:Attribute> 
```

如何在 ADFS 中使用此声明，然后将其发送到共享点？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T18:02:22.113

设置 ADFS/RP 配置。让 RP 传递所有声明，而不是从 AD 获取它们。

# powershell-3.0 - 通过 Powershell 脚本启用/禁用防火墙服务

> ID：15573982
> 
> 赞同：-1
> 
> 时间：2013-03-22T15:23:55.240
> 
> 标签：powershell-3.0

作为入门级，我正在尝试获取可以扫描名为“服务器”的 OU 容器的 powershell 脚本，以查看哪些服务器启用/禁用了 Windows 防火墙服务，即 mpssvc。

有没有人可以运行脚本来查看这个？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T15:35:16.463

您是否看过：搜索 OU： [http ://social.technet.microsoft.com/Forums/en-US/ITCG/thread/9d501454-2f51-43b5-8bea-303a1c9f2094/](http://social.technet.microsoft.com/Forums/en-US/ITCG/thread/9d501454-2f51-43b5-8bea-303a1c9f2094/)

检索防火墙状态： http: [//poshcode.org/836](http://poshcode.org/836)

或者，如果您使用的是 PowerShell v3： http: [//letitknow.wordpress.com/2012/09/13/manage-windows-firewall-with-powershell-3/](http://letitknow.wordpress.com/2012/09/13/manage-windows-firewall-with-powershell-3/)

# java - Junit 4，如何禁用为每个测试方法创建新的测试实例

> ID：15573983
> 
> 赞同：3
> 
> 时间：2013-03-22T15:24:00.167
> 
> 标签：java, testing, junit4

是否有某种方法可以禁用每个 @Test 创建新的 Test 实例？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-22T15:32:12.740

每个测试一个实例是 JUnit 默认的工作方式。但是，您可以编写自己的测试运行程序，该运行程序对所有测试使用一个实例。您可能希望从扩展[BlockJUnit4ClassRunner](https://github.com/junit-team/junit/blob/master/src/main/java/org/junit/runners/BlockJUnit4ClassRunner.java)开始。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-22T15:31:00.043

为了使这个答案：

```
public class MyTestClass {
    private static String onceForAllTests;

    @AfterClass
    public static void afterClass() {
        onceForAllTests = null; // silly, but just to demonstrate
    }

    @BeforeClass
    public static void beforeClass() {
        onceForAllTests = "This is set once for all tests";
    }

    @Test
    public void sillyTest {
        String someTestValue = "This is set during method";
        assertNotEquals( onceForAllTests, someTestValue );
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-07-24T01:03:11.573

我最终独立地得出了 Mathew 上面建议的解决方案。我想在这里发布我的简短解决方案。

Kotlin 中的代码：

```
class SingleInstanceRunner<T>(clazz : Class<T>) : BlockJUnit4ClassRunner(clazz) {
   val instance : Any by lazy { super.createTest() }

   override fun createTest() = instance
} 
```

这是上面的（未经测试的）Java翻译：

```
public class SingleInstanceRunner extends BlockJUnit4ClassRunner {
   private Object instance;

   public SingleInstanceRunner(Class<?> clazz) throws InitializationError {
       super(clazz);
   }

   @Override
   protected synchronized Object createTest() throws Exception {
       if (instance == null) {
           instance = super.createTest();
       }

       return instance;
   }
} 
```

使用此解决方案，使用此运行器注释您的测试类。

在科特林：

```
@RunWith(SingleInstanceRunner::class)
class MyTest {
   ...
} 
```

在 Java 中：

```
@RunWith(SingleInstanceRunner.class)
public class MyTest {
   ...
} 
```

`@FixMethodOrder`这与在某些系统测试类型场景中使用 junit结合使用。

# java - 地理服务器管理器，添加新层

> ID：15573984
> 
> 赞同：3
> 
> 时间：2013-03-22T15:24:08.613
> 
> 标签：java, rest, geoserver

使用以下代码以编程方式使用 geoserver-manager api ( [http://code.google.com/p/geoserver-manager/wiki/Documentation ) 创建一个新层：](http://code.google.com/p/geoserver-manager/wiki/Documentation)

```
GeoServerRESTPublisher publisher = new GeoServerRESTPublisher(RESTURL, RESTUSER, RESTPW);

GSFeatureTypeEncoder featureTypeEncoder = new GSFeatureTypeEncoder();
featureTypeEncoder.setSRS("EPSG:41001");
featureTypeEncoder.setName("view1");
featureTypeEncoder.setNativeBoundingBox(10,10,100,100, "EPSG:41001");

GSLayerEncoder layerEncoder = new GSLayerEncoder();
layerEncoder.setEnabled(true);

boolean ok = publisher.publishDBLayer(WORKSPACE, "user1", featureTypeEncoder, layerEncoder); 
```

新图层已成功创建，但类型错误（点而不是线）。有没有办法在创建图层之前或之后更改此图层类型（线）？

版本： Geoserver 2.3.0 Postgres 1.14 Geoserver-manager 1.3.0

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-11T14:28:41.750

2方式：你必须使用层编码器来配置默认层：

```
 GSLayerEncoder layerEncoder = new GSLayerEncoder();
        layerEncoder.setEnabled(true);
        layerEncoder.setQueryable(true);
        layerEncoder.setDefaultStyle("polygon");

        boolean published = publisher.publishDBLayer(WORKSPACE, STORENAME, FTENCODER, layerEncoder); 
```

您可以在发布后尝试配置图层：

```
 String layerName = ...;
    String newStyleName = ...;
    GeoServerRESTPublisher publisher = ...;

    GSLayerEncoder le = new GSLayerEncoder();
    le.setDefaultStyle(newStyleName);
    publisher.configureLayer(le, layerName); 
```

干杯，卡洛·坎切列里

参考：

*   [https://github.com/geosolutions-it/geoserver-manager/wiki/Publishing-Layers-Advanced](https://github.com/geosolutions-it/geoserver-manager/wiki/Publishing-Layers-Advanced)
*   [https://github.com/geosolutions-it/geoserver-manager/blob/1.3.x/src/main/java/it/geosolutions/geoserver/rest/encoder/GSLayerEncoder.java#L126](https://github.com/geosolutions-it/geoserver-manager/blob/1.3.x/src/main/java/it/geosolutions/geoserver/rest/encoder/GSLayerEncoder.java#L126)

# eclipse - 在 Eclipse 3.8 中安装 Subclipse 1.8

> ID：15573985
> 
> 赞同：2
> 
> 时间：2013-03-22T15:24:08.747
> 
> 标签：eclipse, subclipse

我正在尝试在 OS X 10.8.3 下的 Eclipse Classic 3.8.2 (M20130131-0800) 下安装 Sublclipse 1.8。这会导致错误消息：

```
An error occurred while collecting items to be installed
session context was:(profile=SDKProfile, phase=org.eclipse.equinox.internal.p2.engine.phases.Collect, operand=, action=).
No repository found containing: osgi.bundle,org.eclipse.draw2d,3.9.0.201212170307
No repository found containing: osgi.bundle,org.eclipse.gef,3.9.0.201212170307 
```

如何获取丢失的插件？

我已将[http://subclipse.tigris.org/update_1.8.x](http://subclipse.tigris.org/update_1.8.x)设置为更新站点，根据[Subclipse 页面](http://subclipse.tigris.org/servlets/ProjectProcess?pageID=p4wYuA)，该站点与 Eclipse 3.8 兼容。在安装对话框中，我选择了“Subclipse”和“SVNKit”组中的所有可用插件。

从更新站点[http://download.eclipse.org/releases/juno](http://download.eclipse.org/releases/juno)安装 GEF也不起作用：

```
An error occurred while collecting items to be installed
session context was:(profile=SDKProfile, phase=org.eclipse.equinox.internal.p2.engine.phases.Collect, operand=, action=).
No repository found containing: osgi.bundle,org.eclipse.draw2d,3.9.0.201212170307
No repository found containing: osgi.bundle,org.eclipse.draw2d.doc.isv,3.8.1.201212170307
No repository found containing: org.eclipse.update.feature,org.eclipse.draw2d,3.9.0.201212170307
No repository found containing: org.eclipse.update.feature,org.eclipse.draw2d.sdk,3.9.0.201212170307
No repository found containing: osgi.bundle,org.eclipse.draw2d.source,3.9.0.201212170307
No repository found containing: org.eclipse.update.feature,org.eclipse.draw2d.source,3.9.0.201212170307
No repository found containing: osgi.bundle,org.eclipse.gef,3.9.0.201212170307
No repository found containing: osgi.bundle,org.eclipse.gef.doc.isv,3.8.1.201212170307
No repository found containing: osgi.bundle,org.eclipse.gef.examples.ui.pde,3.8.1.201212170307
No repository found containing: org.eclipse.update.feature,org.eclipse.gef,3.9.0.201212170307
No repository found containing: org.eclipse.update.feature,org.eclipse.gef.sdk,3.9.0.201212170307
No repository found containing: osgi.bundle,org.eclipse.gef.source,3.9.0.201212170307
No repository found containing: org.eclipse.update.feature,org.eclipse.gef.source,3.9.0.201212170307 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-22T15:41:53.110

Subversion Revision Graph 可选功能需要 GEF，因此如果您不需要，您可以跳过安装它。否则，要尝试的事情：

*   [按照安装说明](http://subclipse.tigris.org/servlets/ProjectProcess?pageID=p4wYuA)的建议，只需从 Marketplace 安装 Subclipse 。（如果您的发行版不包含它，您可以从 Juno 更新站点安装 Marketplace 本身。）
*   Juno 更新站点[http://download.eclipse.org/releases/juno](http://download.eclipse.org/releases/juno)包含 GEF，请确保它在您的可用软件站点中。您还可以尝试 GEF 里程碑更新站点：http: [//download.eclipse.org/tools/gef/updates/milestones](http://download.eclipse.org/tools/gef/updates/milestones)

# asp.net - 单域ASP.Net下应用之间的会话共享

> ID：15573988
> 
> 赞同：0
> 
> 时间：2013-03-22T15:24:12.710
> 
> 标签：asp.net, session-state

我们将 sql server 用于会话状态，这是 web.config 条目：

```
<sessionState mode="SQLServer" allowCustomSqlDatabase="true" sqlConnectionString="data source=MyServer;Initial Catalog=MyDatabase;user id=user;password=password" cookieless="false" timeout="20" /> 
```

我们有一个自定义 MVC 站点和一个 CMS 站点，它们都是独立的项目，并且在开发、登台和生产中，CMS 站点被设置为 MVC 站点下的“应用程序”。MVC 站点是根。

我们的网址如下所示：

[http://www.domina.org](http://www.domina.org)（产品，负载均衡，多台服务器） [http://staging.domain.org](http://staging.domain.org)（暂存，负载均衡，多台服务器） [http://development.NAME-hq.local](http://development.NAME-hq.local)（开发）

和 CMS 网站网址是：

[http://www.domina.org/core](http://www.domina.org/core)（产品，负载均衡，多台服务器） [http://staging.domain.org/core](http://staging.domain.org/core)（暂存，负载均衡，多台服务器） [http://development.NAME-hq。本地/核心](http://development.NAME-hq.local/core)（开发）

本地开发，我的会话没有共享，因为我使用的是内置 Web 服务器，并且两个项目的端口号不同。

我的会话没有在 MVC 和 CMS 部分之间的开发站点上共享。但是，登台和生产共享会话没有任何问题。是因为我们为开发站点命名的方式吗？我应该将其更改为 dev.domain.com 之类的东西吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T15:29:33.663

如果您使用的是 ASP.NET 2.0 或更高版本，您应该可以 `<httpCookies httpOnlyCookies="true"/>`在 web.config 中使用。

这是 MSDN 文章[http://msdn.microsoft.com/en-us/library/ms228262(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/ms228262(v=vs.80).aspx)

# geolocation - 如何在 Windows Phone 8 中调试后台位置代理

> ID：15573991
> 
> 赞同：0
> 
> 时间：2013-03-22T15:24:21.193
> 
> 标签：geolocation, gps, windows-phone-8, background-process, background-agents

我目前正在开发一个应用程序，设备的位置应该发送到服务器。我已经阅读了有关后台代理和访问该位置[的 MSDN 文章。](http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj681691%28v=vs.105%29.aspx)到目前为止，这有效。当我触发了比设置的 MovementThreshold 更远的位置更改时，我的位置将被传输到服务器。

但是，我读过后台代理的测试可能很复杂。如果您使用模拟器，您可以很容易地经常更改设备的位置。但是在真机上，定位后台服务的空闲运行时间被限制在 30 分钟，而命令的执行最多只需要 25 秒。用户也可以从电话的设置屏幕禁用后台代理。当代理连续崩溃两次以上时，它们也会被停用。另一个限制是[不活动的后台代理在 4 小时后停止](http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj681691%28v=vs.105%29.aspx)，如果[它们不更新应用程序动态磁贴](http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh202942%28v=vs.105%29.aspx#BKMK_ConstraintsforallScheduledTaskTypes)。

我的应用程序更新了一个实时磁贴计数器，所以我认为我的后台代理应该运行长达 14 天而无需从我的应用程序重新启动。我从昨天到今天测试了该应用程序，并看到后台代理正在运行（从设置中查找时）。在上面的栏中还有一个可见的小点，表明程序正在访问手机的地理位置。然而，有时这个点会消失，我的后台代理会因为没有明显的原因而被杀死。

因此我的问题是：

*   如何在真实设备上可靠地测试地理位置而无需携带手机和连接的调试笔记本电脑？
*   如何及时测试我提到的超时场景（30 分钟、4 小时、14 天）？
*   如何检查后台代理的这两次崩溃？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T11:23:01.947

我想我对 WP8 如何定义后台代理做出了一些误解。新的 WP8 定位后台代理仅在应用程序运行时处于活动状态。这意味着不能使用返回按钮关闭应用程序。但是，可以使用 windows 按钮或长按按钮将其切换到主屏幕，以从多任务处理中访问其他应用程序。

关于我的问题：

*   如何在真实设备上可靠地测试地理位置而无需携带手机和连接的调试笔记本电脑？
*   如何及时测试我提到的超时场景（30 分钟、4 小时、14 天）？

我仍然没有合适的解决方案。您在一定程度上仅限于使用真实设备进行测试，并且测试您的约束所需的必要时间。

*   如何检查后台代理的这两次崩溃？

我不知道如何以编程方式检查这个。用户可能会在手机设置的后台任务列表中将此崩溃的应用程序视为被阻止的应用程序。在我上面提供的链接的帮助下，应该有一种方法可以从此列表中检测被阻止的应用程序。

对于我的项目，我需要一个位置后台代理，即使在锁定屏幕或没有打开应用程序的情况下也能运行。因此，我使用 PeriodicAgent 要求每 30 分钟一次的位置，以便我可以将其发送到服务器。但请注意，此后台代理无法访问您的应用程序设置或类（请参阅[前台应用程序和后台代理之间的通信](http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh202944%28v=vs.105%29.aspx#BKMK_CommunicationBetweenForegroundApplicationandBackgroundAgent)）。