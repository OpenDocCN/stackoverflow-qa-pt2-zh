# StackOverflow 问答 15910000-15910999

# java - Android httppost 响应和加载新的 xml

> ID：15910000
> 
> 赞同：1
> 
> 时间：2013-04-09T18:42:19.983
> 
> 标签：java, android, http-post

我正在制作一个登录页面并使用 httppost 登录网站的 php 脚本，但我不知道如何使用 httppost 响应并使其在登录时加载新的 xml。正确登录时，网站的响应应该是“好的”。

```
 public class MainActivity extends Activity {

 EditText email,password;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.login);

    email=(EditText)findViewById(R.id.email);
    password=(EditText)findViewById(R.id.password);
 Button logindugme = (Button) findViewById(R.id.logindugme);

 logindugme.setOnClickListener(new View.OnClickListener() {

     @Override
     public void onClick(View v) {

        String a = email.getText().toString();
        String b = password.getText().toString();
        senddata(a,b);

     }

     public void senddata(String a, String b) {

        Runnable r = new Login(a, b);
        new Thread(r).start();
    }
    });
} 
```

和一个登录类

```
 public class Login implements Runnable {

private String a;
private String b;

    public Login(String a, String b) {
   this.a = a;
   this.b = b;
  }

   public void run() {
   HttpClient httpclient = new DefaultHttpClient();
   HttpPost httppost = new HttpPost("http://singiras.eu.pn/s/log.php");

   try {
       // Add your data
       List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(2);
       nameValuePairs.add(new BasicNameValuePair("email", this.a));
       nameValuePairs.add(new BasicNameValuePair("password", this.b));
       httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));

       // Execute HTTP Post Request
       HttpResponse response = httpclient.execute(httppost);
       HttpEntity resEntity = response.getEntity();  
       if (resEntity != null) {    
           Log.i("RESPONSE",EntityUtils.toString(resEntity));
       }

   } catch (ClientProtocolException e) {

   } catch (IOException e) {
       //
   }

   }
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T19:56:07.597

尝试使用 httppost 将参数插入到请求的 URL 中，它为我解决了一个类似的问题。

```
HttpPost httppost = new HttpPost("http://singiras.eu.pn/s/log.php?email="+this.a+"&password="+this.b); 
```

并删除：

```
List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(2);
nameValuePairs.add(new BasicNameValuePair("email", this.a));
nameValuePairs.add(new BasicNameValuePair("password", this.b));
httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs)); 
```

# html - 使用 jstl 标记将当前 url 作为参数添加到 meta 标记中的重定向 url

> ID：15910003
> 
> 赞同：0
> 
> 时间：2013-04-09T18:42:29.670
> 
> 标签：html, jstl, meta-tags, http-equiv

在一个页面上，我将用户重定向到我的页面元标记中的另一个页面。

```
<meta HTTP-EQUIV="REFRESH" content="0; url=/abc/example" /> 
```

现在我想将当前页面 url 作为参数添加到重定向 url 中，使其变为

```
url = '/abc/example?prevUrl=currentPage.html' 
```

我正在使用 jstl 标签，尝试类似

```
<c:url value = "/abc/example" var="myURL">
    <c:param name="prevUrl" value = document.URL/>
</c:url>

<meta HTTP-EQUIV="REFRESH" content="0; url='${myURL}'" /> 
```

但显然我做错了什么。请帮忙。或者以任何其他方式将参数添加到我的重定向网址？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T13:03:07.283

在您的 servlet 中，将 URL 放在请求中，如下所示：

```
request.setAttribute("myUrl", "/abc/example?prevUrl=currentPage.html"); 
```

然后，您可以使用这样的 EL 表达式将其放入元标记中：

```
<meta HTTP-EQUIV="REFRESH" content="0; url='${myUrl}'" /> 
```

# wpf - 两个 WPF 滑块的值之间的条件属性绑定

> ID：15910005
> 
> 赞同：0
> 
> 时间：2013-04-09T18:42:36.783
> 
> 标签：wpf, xaml, data-binding

我在 XAML 中布置了两个滑块：

```
<Border Background="Black">
    <StackPanel x:Name="LayoutRoot" Background="#FFB13232" HorizontalAlignment="Center" VerticalAlignment="Center" Orientation="Horizontal">
        <Image Width="800" Height="600" />
        <Slider x:Name="bigvalue" Orientation="Vertical" Maximum="1" LargeChange="0.1" SmallChange="0.01" Value="1" />
        <Slider x:Name="smallvalue" Orientation="Vertical" Maximum="1" LargeChange="0.1" SmallChange="0.01"/>
    </StackPanel>
</Border> 
```

...并且我想实现以下行为：如果`bigvalue.Value`在滑动过程中到达`smallvalue.Value`并且我一直向下滑动，`smallvalue.Value`则应该更新，类似于滑块光标之间的“碰撞检测”。

（背景：这些将控制将在图像中绘制的对象的顶部位置和底部位置，并且该对象不应具有负（top_position - bottom_position）尺寸。）

我考虑过使用属性绑定，但我的用例需要条件属性绑定，我对如何实现这一点感到困惑。

此外，目前，我宁愿不进入自制 WPF 范围滑块（带有两个光标的滑块）的领域，尽管我同意这将是“正确”的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T19:11:41.570

您可以创建一个`Range`实现所需行为的视图模型类：

```
public class Range : INotifyPropertyChanged
{
    public event PropertyChangedEventHandler PropertyChanged;

    private double minimum;
    public double Minimum
    {
        get { return minimum; }
        set
        {
            minimum = value;
            OnPropertyChanged("Minimum");

            if (Maximum < Minimum)
            {
                Maximum = Minimum;
            }
        }
    }

    private double maximum;
    public double Maximum
    {
        get { return maximum; }
        set
        {
            maximum = value;
            OnPropertyChanged("Maximum");

            if (Minimum > Maximum)
            {
                Minimum = Maximum;
            }
        }
    }

    private void OnPropertyChanged(string propertyName)
    {
        if (PropertyChanged != null)
        {
            PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
        }
    }
} 
```

然后将两个 Sliders 绑定到两个属性`Minimum`和`Maximum`：

```
<StackPanel>
    <StackPanel.DataContext>
        <local:Range/>
    </StackPanel.DataContext>
    <Slider Value="{Binding Minimum}"/>
    <Slider Value="{Binding Maximum}"/>
</StackPanel> 
```

# appcode - 在 AppCode 中显示变量的类型

> ID：15910006
> 
> 赞同：5
> 
> 时间：2013-04-09T18:42:39.113
> 
> 标签：appcode

JetBrains 的 AppCode 中是否有快速显示变量类型的快捷方式？最好这类似于 Visual Studio，当您将鼠标悬停在变量上时，它会显示变量的类型。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T18:49:06.580

可以按`SHIFT-COMMAND I`来查看光标下变量的定义。它向您显示定义变量的行以及哪个文件。查看不是您编写的代码时非常方便。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-10T18:51:03.703

或者，如果您在悬停时按住命令键，则可以悬停变量以显示执行摘要信息气泡。然后通过单击关键字（不是信息气泡），您可以“传递”到声明或实现特定接口的代码。例如，在以下行中：

```
[fa.AoEspec addTileSpec:[AoEtile AoEtileFromString:@"0,0,50,hit"]]; 
```

我将为 fa（局部变量）、AoeSpec（属性）、AoEtile（类）AoeTileFromString 获得一个“信息气泡”……所有这些都可以点击。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-07-29T19:35:44.280

在 AppCode 2.1.x`Cmd+Shift+I`中不是预定义的键盘快捷键（不再？！）。前面提到的`Cmd+MouseOver`可能不适合只用键盘的人。所以这里有一些替代方案：

*   `Cmd+B`- 去定义（并`Cmd+Alt+CursorLeft`返回）
*   `Alt+Space`或`Cmd+y`- 显示快速定义窗口 [1]

也许这很有帮助。

[1] 在 AppCode 2.1.2 中，我似乎向 JetBrains 提交了一个错误，即 iVars 的快速定义窗口为空（这些下划线变量由 @property 字段自动合成生成）。但在所有其他情况下，快速定义窗口工作正常！当您阅读此内容时，也许该错误已修复...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-09-28T08:16:15.930

在 AppCode 2018.2 中对我有用的是`control + command + ?`变量位于光标下时（查看下的快速文档）。您可以在“查看”菜单下看到其他几个有用的组合。

# javascript - 为什么我的 highcharts 图表没有正确重置/销毁？

> ID：15910010
> 
> 赞同：3
> 
> 时间：2013-04-09T18:42:49.007
> 
> 标签：javascript, jquery, highcharts

在我的代码中，我正在像这样初始化图表......

```
<script type="text/javascript">
var chart = null,
defaultOptions = {
chart: etc etc
};

function drawDefaultChart() {
    chart = new Highcharts.Chart(defaultOptions);
}

$(function() {
    $(document).ready(function() {
        drawDefaultChart();
    });
});

</script> 
```

然后在我的身体里

```
<a href="#" onclick="drawDefaultChart()">Reset</a> 
```

但是当您单击链接时，它所做的只是使用先前状态的设置重新绘制图形......我不太确定发生了什么。如果我添加 chart.destroy(); 图表根本不起作用...

```
function drawDefaultChart() {
    chart.destroy();  //this makes the chart not work at all
    chart = new Highcharts.Chart(defaultOptions);
} 
```

您可以清楚地看到我正在将默认选项粘贴到假设要重绘的图表中......我不明白为什么它使用旧的过滤器设置，我正要跳下一座桥，有人可以吗？帮助？

我的现场示例在这里[http://goo.gl/sGu0M](http://goo.gl/sGu0M)

//////// 更新

我能够用大量的鲜血、汗水和泪水做到这一点。我最终将数据放入另一个页面上的 php 变量中（以节省房地产），然后使用 php 变量调用它，然后每次有人单击链接时我都会调用它。我发现为了重绘图表，你必须每次都重新加载所有数据。PHP 在屏幕上的数据量方面使这更容易。

这是最终帮助我弄清楚的链接。[http://jsfiddle.net/dane/YUa3R/34/](http://jsfiddle.net/dane/YUa3R/34/)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-06-10T09:21:50.907

始终建议参考[API](http://api.highcharts.com/)文档。

使用以下代码段销毁图表`$('#container').highcharts().destroy();`

[单击此处](http://jsfiddle.net/gh/get/jquery/1.7.2/highslide-software/highcharts.com/tree/master/samples/highcharts/members/chart-destroy/)获取有效的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T21:19:27.513

首先，我对highcharts一无所知，但您似乎需要：（来自您的实际页面）

```
function drawDefaultChart() {
$("#container").empty();
    chart = new Highcharts.Chart(defaultOptions);
} 
```

成为

```
function drawDefaultChart() {
    $("#container").empty().highcharts(defaultOptions);
} 
```

也许：

```
function drawDefaultChart() {
    $("#container").highcharts(defaultOptions);
} 
```

# git - git rebase drop commit 不会恢复我的文件

> ID：15910012
> 
> 赞同：1
> 
> 时间：2013-04-09T18:42:51.913
> 
> 标签：git, git-rebase

git rebase 后我有一个问题。我做了 git commit，commit 包含删除一个文件。所以在那之后我做了 git pull 并且 git 有提交历史：

```
... -> My Commit -> Some Git commits came from remote->Recursive merge. 
```

所以我的承诺在中间。我做了什么：

```
git rebase -i <sha1 of a commit before my commit> 
```

并删除了包含我的提交的行。

我期待删除的文件将被恢复，因为我删除了包含删除文件的提交，但它没有发生。

所以我在 rebase/drop 提交后没有得到我删除的文件。是应该像那样工作还是我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T21:07:27.733

尝试这个：

```
git reset HEAD~1 
```

看看你的文件是否会弹出。多试几次。

这将“删除”当前提交，而前一个提交将是当前提交。

# p2p - 对于 ICE，SIP RE-INVITE 的需求是什么？

> ID：15910014
> 
> 赞同：5
> 
> 时间：2013-04-09T18:42:55.200
> 
> 标签：p2p, sip, voip, nat, ice

我了解 NAT 打孔、ICE 和 SIP VOIP 呼叫的许多细节。我已经在这些主题上回答了很多关于 SO 的问题。现在我有一个问题。

我试图了解在呼叫建立后记录为 SIP+ICE 的 RE-INVITE 消息的需求。

假设 VOIP 设备的拓扑结构通过 SIP 发出信号并使用 ICE（带有 STUN/TURN）来建立媒体连接。执行 ICE 连接检查后，两个端点都应该确定最佳地址候选配对（IP、端口），并且应该准备好双向流媒体。

但是我在 SIP 方面的经验和大量文档表明，在被叫方发送 200 OK 消息以表明他处于已应答状态后，呼叫者应该发送带有 SDP 的 RE-INVITE，其中包含通过连接检查选择的特定地址候选者.

一些描述使用 ICE 重新邀请的链接在[此处](http://msdn.microsoft.com/en-us/library/dd922358%28v=office.12%29.aspx)和[此处](http://voiptraversal.com/ice_methodology.htm)（第 8 步）。Rosenberg 的[教程](http://www.jdrosen.net/papers/ice-basic-tutorial.pdf)（第 30 页）讨论了 RE-INVITE “确保中间盒具有正确的媒体地址”。我不确定为什么这很重要。

收到 RE-INVITE 后，被调用者是否需要重新配置其 ICE 堆栈以根据收到的新 SDP 切换套接字或地址？还是 RE-INVITE 只是正式确认呼叫已建立的协议形式？如果跳过 RE-INVITE 步骤，双方都开始流媒体，会出现什么问题？

我问的原因是因为我正在探索在不是 SIP 的信令服务上使用 ICE。我试图弄清楚是否需要模拟 RE-INVITE。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-15T15:10:27.083

可能对 ICE 协商结果感兴趣的中间盒的一个示例是带宽管理器。

想象一下企业部署，端点位于企业防火墙内，其他端点在 Internet 上漫游，或位于私人家庭防火墙之后。该部署还包括一个可公开访问的 TURN 服务器。然后让我们想象一下公司防火墙内的一个端点进行呼叫。如果目的地碰巧在同一个网络上可达，呼叫将通过主机到主机，并且不会使用 TURN 服务器（即绑定将被解除分配）。这是一个本地网络，不需要施加带宽限制。另一方面，如果呼叫发送到漫游端点，则 TURN 服务器将参与其中，数据将通过公司防火墙，通过可能是带宽有限的上行链路。我们可以很好地想象一些想要限制呼叫带宽的策略。一种方法，

我相信总体意图是，那种不知道 ICE 的遗留设备应该继续在引入 ICE 端点的混合环境中工作。为了保持这种向后兼容性，ICE 应该只引入新的处理（STUN 检查等），但从非 ICE 感知元素的角度来看，它不应该删除任何现有规则（仍然需要重新邀请来更改媒体流的目的地）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-10T23:32:27.663

在 Rosenberg 的教程中，我相信发送 re-INVITE 是因为 ICE 选择的套接字与原始 SDP 的媒体和连接（m/c 线）线中的套接字不同，并且对于介于两者之间的任何网络元素，两个用户代理将被告知将要使用的实际套接字 RTP 一个 re-INVITE 与媒体和 SDP 的连接线中的 ICE 选择的套接字一起发送。

如果 ICE 选择的套接字与原始 INVITE 请求的 SDP m/c 行中的套接字相同，则不需要重新邀请请求。或者，如果您知道没有需要通知 RTP 套接字更改的“中间盒”，那么也无需发送重新邀请。

# android - 使用预建的 .so 库构建系统应用程序

> ID：15910015
> 
> 赞同：4
> 
> 时间：2013-04-09T18:42:56.570
> 
> 标签：android, android-library, android-build

我在这里被困了一个星期，试图将第 3 方 .so 库与我的应用程序一起构建到自定义 Android 系统中。我关注了[http://www.maxters.net/2012/05/adding-prebuilt-shared-library-to-android-build-system/](http://www.maxters.net/2012/05/adding-prebuilt-shared-library-to-android-build-system/)并成功地将 .so lib 作为预建共享库添加到 Android 构建系统。现在我可以在 ../out/target/product/crespo4g/obj/lib/ 看到 .so lib。

但是这个目录中的库在刷机时不会被迁移到设备上。我的 .so lib 也没有出现在 /data/data/my_app_name/lib 中。所以**UnsatisfiedLinkError**在执行**System.loadLibrary()**时发生。

我认为有三种方法可以解决这个问题，但就是不知道如何实现：

1.  也许我的应用程序未能向编译器表明我的 .so 与我的应用程序一起作为一个整体，因此 .so 库没有与我的应用程序一起编译到系统映像中。但我确实通过“LOCAL_STATIC_LIBRARIES := libXX”声明，有什么问题吗？
2.  有没有办法将我的 .so lib 构建到 /system/lib/ 中？/system/lib/下的so库是从哪里派生的？

我是Android构建的新手，请帮助..

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-15T04:33:51.347

您可能希望根据[此答案](https://stackoverflow.com/questions/14687287/adding-prebuilt-apk-with-shared-libraries-to-aosp)中的建议检查您的 makefile和[这个](https://stackoverflow.com/questions/11037765/where-to-place-so-file-so-that-it-gets-included-in-the-final-build)以及此[组线程中的建议](https://groups.google.com/forum/#!msg/android-platform/4kRyiFofQkA/qvjlVEPwt2QJ)

**更新** 我原来的 makefile 不正确，但这对我构建 ICS 有用：

```
LOCAL_PATH := $(call my-dir)
include $(CLEAR_VARS)
LOCAL_MODULE := libmozglue
LOCAL_SRC_FILES := libmozglue.so
LOCAL_MODULE_SUFFIX := .so
LOCAL_MODULE_CLASS := SHARED_LIBRARIES
LOCAL_MODULE_TAGS := optional
include $(BUILD_PREBUILT)

include $(CLEAR_VARS)
LOCAL_MODULE := libplugin-container
LOCAL_SRC_FILES := libplugin-container.so
LOCAL_MODULE_SUFFIX := .so
LOCAL_MODULE_CLASS := SHARED_LIBRARIES
LOCAL_MODULE_TAGS := optional
include $(BUILD_PREBUILT) 
```

以上是firefox for android所需的本​​机库，我将其作为系统应用程序包含在我的自定义系统构建中。

# matplotlib - 从 Pandas DataFrame 绘图时注释数据点

> ID：15910019
> 
> 赞同：47
> 
> 时间：2013-04-09T18:43:16.617
> 
> 标签：matplotlib, pandas

我想用图上点旁边的值来注释数据点。我发现的示例仅将 x 和 y 作为向量处理。但是，我想为包含多列的 pandas DataFrame 执行此操作。

```
ax = plt.figure().add_subplot(1, 1, 1)
df.plot(ax = ax)
plt.show() 
```

注释多列 DataFrame 的所有点的最佳方法是什么？

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2014-09-23T16:50:16.560

[这是Dan Allan 的回答](https://stackoverflow.com/a/15911372/2071807)的（非常）稍微简洁的版本：

```
import matplotlib.pyplot as plt
import pandas as pd
import numpy as np
import string

df = pd.DataFrame({'x':np.random.rand(10), 'y':np.random.rand(10)}, 
                  index=list(string.ascii_lowercase[:10])) 
```

这使：

```
 x         y
a  0.541974  0.042185
b  0.036188  0.775425
c  0.950099  0.888305
d  0.739367  0.638368
e  0.739910  0.596037
f  0.974529  0.111819
g  0.640637  0.161805
h  0.554600  0.172221
i  0.718941  0.192932
j  0.447242  0.172469 
```

进而：

```
fig, ax = plt.subplots()
df.plot('x', 'y', kind='scatter', ax=ax)

for k, v in df.iterrows():
    ax.annotate(k, v) 
```

最后，如果您处于交互模式，您可能需要刷新绘图：

```
fig.canvas.draw() 
```

产生： ![无聊的散点图](https://i.stack.imgur.com/UDrIj.png)

或者，因为这看起来非常难看，你可以很容易地美化一些东西：

```
from matplotlib import cm
cmap = cm.get_cmap('Spectral')
df.plot('x', 'y', kind='scatter', ax=ax, s=120, linewidth=0, 
        c=range(len(df)), colormap=cmap)

for k, v in df.iterrows():
    ax.annotate(k, v,
                xytext=(10,-5), textcoords='offset points',
                family='sans-serif', fontsize=18, color='darkslategrey') 
```

哪个看起来好多了： ![漂亮的散点图](https://i.stack.imgur.com/SiTb6.png)

* * *

## 回答 #2

> 赞同：40
> 
> 时间：2013-04-09T19:59:43.870

您想使用其他列之一作为注释的文本吗？这是我最近做的事情。

从一些示例数据开始

```
In [1]: df
Out[1]: 
           x         y val
 0 -1.015235  0.840049   a
 1 -0.427016  0.880745   b
 2  0.744470 -0.401485   c
 3  1.334952 -0.708141   d
 4  0.127634 -1.335107   e 
```

绘制点。在这个例子中，我将 y 与 x 作图。

```
ax = df.set_index('x')['y'].plot(style='o') 
```

编写一个循环遍历 x、y 和要在该点旁边注释的值的函数。

```
def label_point(x, y, val, ax):
    a = pd.concat({'x': x, 'y': y, 'val': val}, axis=1)
    for i, point in a.iterrows():
        ax.text(point['x'], point['y'], str(point['val']))

label_point(df.x, df.y, df.val, ax)

draw() 
```

![注释点](https://i.stack.imgur.com/w95Je.png)

* * *

## 回答 #3

> 赞同：31
> 
> 时间：2016-09-07T16:05:20.790

假设您`df`有多个列，其中三个是`x`、`y`和`lbl`。要使用 注释`(x,y)`散点图`lbl`，只需：

```
ax = df.plot(kind='scatter',x='x',y='y')
df[['x','y','lbl']].apply(lambda row: ax.text(*row),axis=1); 
```

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2015-01-04T00:30:52.270

我发现以前的答案很有帮助，尤其是[LondonRob 的示例](https://stackoverflow.com/a/26000515/2071807)，它稍微改进了布局。

唯一困扰我的是我不喜欢从 DataFrames 中提取数据然后循环它们。似乎浪费了DataFrame。

这是使用 .apply() 避免循环的替代方法，并包含更好看的注释（我认为色阶有点过分，无法让颜色条消失）：

```
ax = df.plot('x', 'y', kind='scatter', s=50 )

def annotate_df(row):  
    ax.annotate(row.name, row.values,
                xytext=(10,-5), 
                textcoords='offset points',
                size=18, 
                color='darkslategrey')

_ = df.apply(annotate_df, axis=1) 
```

![在此处输入图像描述](https://i.stack.imgur.com/tLJW0.png)

### *编辑笔记*

*我最近编辑了我的代码示例。最初它使用相同的：*

```
fig, ax = plt.subplots() 
```

*作为暴露轴的其他帖子，但是这是不必要的，并且使：*

```
import matplotlib.pyplot as plt 
```

*线也不必要。*

*另请注意：*

*   *如果您尝试重现此示例，并且您的绘图中的点与我们的任何位置都不相同，则可能是因为 DataFrame 使用了随机值。如果我们使用固定数据表或随机种子，它可能不会那么混乱。*
*   *根据分数的不同，您可能必须使用这些`xytext`值来获得更好的展示位置。*

# visual-studio-2010 - “Microsoft Office 2007 Primary Interop Assembly”是否与“2007 Office System Driver：Data Connectivity Components”相同？

> ID：15910020
> 
> 赞同：0
> 
> 时间：2013-04-09T18:43:20.783
> 
> 标签：visual-studio-2010, visual-studio, excel, excel-2007, oledb

我正在为需要使用 OleDbConnection 从 xlsx 电子表格读取数据的应用程序在 Visual Studio 2010 中创建安装程序（连接字符串看起来像`"Provider=Microsoft.Ace.OLEDB.12.0;Data Source='filename';Mode=ReadWrite;Extended Properties='Excel 12.0';HDR='Yes'";`

在我的机器上，我一直在从[这个 Microsoft 网站](http://www.microsoft.com/en-us/download/confirmation.aspx?id=23734)安装“2007 Office System 驱动程序：数据连接组件” 。

在 Visual Studio 中，Installer->Properties->Prerequisites 中的可用先决条件列表不包括“2007 Office System Driver: Data Connectivity Components”，但它确实包括“Microsoft Office 2007 Primary Interop Assemblies”（也可在[此获得微软网站](http://www.microsoft.com/en-us/download/details.aspx?id=18346)）。

我的问题是：将“Microsoft Office 2007 PIA”列为先决条件是否允许我的 OleDbConnection 为尚未安装“2007 Office System 驱动程序：数据连接组件”的人工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T21:11:08.730

否。您正在通过 ADO.Net 查询一个 excel 文件，并且需要随附的数据访问驱动程序。为此，您可以[将 Microsoft Access Database Engine Redistributable 作为先决条件嵌入到您的安装程序中](https://stackoverflow.com/questions/13854698/how-to-install-visual-studio-2010-setup-project-with-ms-access-database-on-a-com)。

2007 PIA 将允许您通过 COM 互操作创建和自动化一个 excel 实例，它更强大（例如，您获得公式单元格更新）但比 Excel 的 OLEDB 界面慢得多。

# wordpress - Wordpress Evolve 主题：更改滑块中的图像

> ID：15910029
> 
> 赞同：1
> 
> 时间：2013-04-09T18:43:45.947
> 
> 标签：wordpress, slider, carousel

在 Evolve Theme 的 Carousel Slider 中，有一些示例图片。

如何将它们更改为新图片并添加通过单击图像打开文章的 href？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-28T16:28:51.213

您在媒体库中上传一张具有正确滑块尺寸的照片。当您选择编辑图像时，您将获得完整大小的版本。

在 Firefox 中，我右键单击图像并要求复制“图像位置”，在 Chrome 浏览器中“复制图像 URL”，它为我提供了剪贴板中图像的 URL，例如

[http://www.####.###/wp-content/uploads/2013/06/image.jpg](http://www.####.###/wp-content/uploads/2013/06/image.jpg)

然后你去小部件

您必须将“T4P Carousel Slider”添加到 Header1 区域。如果您不这样做，主题会自动加载其自己的自定义小部件以宣传主题。添加小部件后，您将获得一个代码框，默认情况下其中包含其代码。

您将用自己的代码替换该代码并不难，但它肯定不是拖放选项。

将 Carousel Slider 拖到 Header 后，您将看到代码。

您将看到 4 个部分，如下所示：

```
<img src='http://www.####.###/wp-content/themes/evolve/library/media/images/slide/slider_img_01.jpg' alt='' />
<div class='carousel-caption'>
<h4>Built-in Bootstrap Elements let you do amazing things with your website</h4> 
```

您可以使用 cntl-v 将这部分代码替换为库中图像的 url 并添加一个 alt 标记，如果您喜欢之前 http://www.####.###/wp-content/themes/进化/图书馆/媒体/图像/幻灯片/slider_img_01.jpg'alt=''/>

http://wp.fofc.org/wp-content/uploads/2013/06/baby.jpg' alt='Baby' /> 之后

接下来，您可以在图像顶部添加一个标题在内置引导元素之前，您可以使用您的网站做一些惊人的事情

之后这是一个非常酷的图像

在代码框的底部，您将看到其他代码。这控制了矩形窗口中点的数量，用于导航每个点一行因此您希望拥有与图像一样多的行。如果您只有 3 张图像，请完全删除 data-to='4' 的行。或者您可以在底部添加另一行：5

```
<div id='carousel-nav'>
<a href='#myCarousel' data-to='1' class='active'>1</a>
<a href='#myCarousel' data-to='2'>2</a>
<a href='#myCarousel' data-to='3'>3</a>
<a href='#myCarousel' data-to='4'>4</a>
-- add or remove lines above this line
</div> 
```

这控制滑块下部中心的导航框。但是，随着幻灯片自动更改，点似乎没有移动。该点仅在您单击它时移动。

如果您愿意，您可以从代码中删除整个 div，这将删除导航框。

希望这可以帮助。

# android - 使用谷歌地图意图

> ID：15910044
> 
> 赞同：0
> 
> 时间：2013-04-09T18:44:23.620
> 
> 标签：android, google-maps, gps, android-activity

我正在编写一个使用自定义 gps 来跟踪用户当前位置的自定义程序。我有一个在后台运行的服务，它不断地轮询 GPS 传感器的当前位置。然后我使用以下代码开始一个新活动：

```
final Intent intent = new Intent(Intent.ACTION_VIEW,
        Uri.parse(
            "http://maps.google.com/maps?" +
        "saddr="+lngstart+","+latstart+"&daddr="+lngend+","+latend));
         intent.setClassName(
          "com.google.android.apps.maps",
         "com.google.android.maps.MapsActivity");
           startActivity(intent); 
```

后台运行的服务不断为用户当前位置计算新的地理点。谷歌地图的出现是有意的，并且有我最初提供的数据，但是我想不断地向它提供有关用户当前位置的更新信息。

如何将有关用户当前位置的更新信息提供给我开始的地图活动？

如何禁止地图活动尝试使用任何其他传感器（如手机信号塔，或使用内置 GPS，记住我使用的是自定义 gps 设置）？

如何 ping 跑步活动以获取包含沿其绘制的路线的“腿”的经度和纬度坐标的列表信息？

最后有没有办法向正在运行的活动添加一个按钮，按下时会暂停它，并开始一个新的活动？

谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T18:53:31.380

当您发送此信息时`Intent`，您基本上会转移到一个新的应用程序，一个`Google Maps application`位于您`Android`手机中的应用程序。AFAIK 您对此应用程序没有任何控制权，因为这不是您的应用程序的一部分，此时您无法操作它。所以你不能向它添加任何按钮或禁用它可能用于导航的任何传感器（`unless you disable them from the settings.`）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T19:07:40.577

**我对你的问题的看法：**

如何将有关用户当前位置的更新信息提供给我开始的地图活动？

**一旦你开始了谷歌地图活动，你就不能再从你的应用程序中控制它了。唯一的选择是使用新位置重新创建谷歌地图意图。**

如何禁止地图活动尝试使用任何其他传感器（如手机信号塔，或使用内置 GPS，记住我使用的是自定义 gps 设置）？

**如果您使用的是 Google Map API，那么您可以控制它。但我从未尝试过。但是，如果您像上面那样调用现有的地图应用程序，那么我认为您没有任何控制权**

如何 ping 跑步活动以获取包含沿其绘制的路线的“腿”的经度和纬度坐标的列表信息？

**不确定这个请求。可能您可以保存初始位置并获取当前位置。然后使用这两个位置并创建地图**

最后有没有办法向正在运行的活动添加一个按钮，按下时会暂停它，并开始一个新的活动？

**您可以使用 Google Map API 而不是使用 google intent 来做到这一点。**

# continuous-integration - FxCop - 如何解决 Windows，版本 255.255.255.255？

> ID：15910045
> 
> 赞同：1
> 
> 时间：2013-04-09T18:44:27.860
> 
> 标签：continuous-integration, windows-phone-8, fxcop, fxcopcmd

我试图让 FxCop 10 在 Windows 8 构建计算机上运行分析，并且似乎已经撞到了墙上。

当我使用 /verbose 针对 dll 运行它时，我得到：无法解析对 Windows 的引用。无法加载 [我的 dll 的路径]。读取模块 [我的模块名称] 时遇到以下错误：无法解析程序集引用：Windows，Version=255.255.255.255，Culture=neutral，PublicKeyToken=null

我让它指向 VS 2012 最低推荐规则，如果我设置 FxCopCmd.exe.config，它可以让它从 Visual Studio 运行代码分析：

这是我的命令行版本，它会产生上述错误：

fxcopcmd /file:"D:\Source\Project\bin\release\myproject.dll" /out:"D:\temp\fxcop-report.xml" /rs:="C:\Program Files (x86)\Microsoft Visual Studio 11.0\团队工具\静态分析工具\规则集\MinimumRecommendedRules.ruleset" /s /assemblyCompareMode:StrongNameIgnoringVersion /searchgac /verbose

如果我也尝试使用 FxCop 应用程序运行分析，则会收到 Windows 版本 255.255.255.255 的提示。

这是一个 Windows 8 Phone 项目。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-06T15:08:32.723

尝试将此开关添加到您的 FxCopCmd 命令中：

```
/directory:"C:\Program Files (x86)\Windows Phone Kits\8.0\Windows MetaData" 
```

当我在运行 Visual Studio Code Metrics Powertool for Visual Studio 2013 (metrics.exe) 时遇到同样的错误时，这对我有用。

# objective-c - 找出对象是否是类对象而不是类的实例

> ID：15910047
> 
> 赞同：6
> 
> 时间：2013-04-09T18:44:31.870
> 
> 标签：objective-c, types, introspection, objective-c-runtime

使用 Objective-C 运行时库，我们如何确定一个对象是类对象而不是类的实例？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T18:48:44.797

我所知道的最简单可靠的方法是`class_isMetaClass(object_getClass(yourObject))`. （这是因为类总是元类的实例。）

# file-io - FORTRAN 90 打开文件问题

> ID：15910048
> 
> 赞同：1
> 
> 时间：2013-04-09T18:44:34.147
> 
> 标签：file-io, fortran90

我一直在搜索这段代码很长时间，似乎无法找到它不起作用的原因......也许局外人的观点可以提供帮助。

```
!I open File 1

!Opening File 1
open(2, File='File1.txt',status='old')
read(2,*)!File 1 header

PRINT*,'File1.txt read' 

!Read it

DO b=1,nb
  DO i=1,ni(b)          
       READ(2,*)dum(b,i),Qr(1,xbu(b),i),hr(1,xbu(b),i),Ar(1,xbu(b),i),Pr(1,xbu(b),i),dx(xbu(b),i),sx(xbu(b),i)
  END DO
END DO 
```

没关系。我已经打印出来了，都在那里。但是当我转到文件 2 时，做同样的事情：

```
PRINT*,'Reading File 2 '
open(3, File='File2.txt',status='old')    !<- It stays here forever.
PRINT*,'File2.txt read' 
```

这些文件是纯 txt，具有像这样的真实值

文件 1：

```
11  0   0   0   0   6500    1.2 
```

文件 2

```
11  0.00    0.00    0.00    0.0 
```

关于什么可能导致相同的代码第二次失败的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T20:56:23.620

你可能应该在那里抛出一些错误检查，尝试把

```
open(3, File='File2.txt',status='old',iostat=io_status, err=100) 
```

放在某个地方

```
100 write(*,*) 'io status = ', io_status
stop 
```

我还建议编写一个函数来检查第一个可用的 fortran 单元号，而不是对其进行硬编码，例如[在 fortran 中获取空闲单元号](https://stackoverflow.com/questions/7876075/getting-free-unit-number-in-fortran)

# java - 带有许多选择参数的查询

> ID：15910055
> 
> 赞同：0
> 
> 时间：2013-04-09T18:44:55.247
> 
> 标签：java, android

我想查询数据库以检索电话号码。

我不想使用带有选择参数的静态数组，而是使用一个数组，它将在运行时动态创建和填充（例如数组的大小不同）。

我尝试使用以下语句：

```
Cursor phones = _ctx.getContentResolver().query(ContactsContract.CommonDataKinds.Phone.CONTENT_URI,
            null, ContactsContract.CommonDataKinds.Phone.CONTACT_ID + " IN  (?)",
            actioncids, null); 
```

"actioncids" := String[] 与选择 args ，包含来自先前查询的元素

我总是收到错误消息：

> android.database.sqlite.SQLiteException：绑定或列索引超出范围句柄 0x3c6540

我想我必须在 Where 子句中使用不同的表达方式。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T18:56:00.600

您需要将绑定变量放入 String 数组：

```
Cursor phones =     
_ctx.getContentResolver().query(
     ContactsContract.CommonDataKinds.Phone.CONTENT_URI, null,
     ContactsContract.CommonDataKinds.Phone.CONTACT_ID + " IN  (?)",
     new String[] { actioncids }, null); 
```

注意：如果要添加多个，则`actioncids`需要多个`?`.

希望这会有所帮助....干杯！

# android - Android 4.2 设备方向

> ID：15910056
> 
> 赞同：0
> 
> 时间：2013-04-09T18:45:00.767
> 
> 标签：android, orientation

我在 android 4.2 上遇到问题。我试图弄清楚屏幕是横向还是纵向。我知道以下方法可以做到这一点：

1.  这很好用，只是它在 API 级别 8 之后被贬值

    ```
    Display display = ((WindowManager) 
                  getSystemService(WINDOW_SERVICE)).getDefaultDisplay();
    int orientation = display.getOrientation(); 
    ```

2.  这是在 android 4.2 上确定方向的首选方法。但是，此方法仅返回旋转度数，并且对于确定当前设备配置（横向或方向）不正确

    ```
    WindowManager wManager = (WindowManager) getSystemService(WINDOW_SERVICE);
    int rotation = wManager.getDefaultDisplay().getRotation(); 
    ```

无论设备的默认方向如何，我都需要知道当前的旋转是什么（横向或纵向）。对于此事，我将不胜感激。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T18:52:38.813

你可以试试：

```
int orientation = getResources().getConfiguration().orientation;

if (orientation == Configuration.ORIENTATION_LANDSCAPE)
{
// code
} else if (orientation == Configuration.ORIENTATION_PORTRAIT)
{
// code
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T18:53:40.803

这应该工作...

```
 Activity.getResources().getConfiguration().orientation 
```

它会告诉您是横向还是纵向，但不会区分反向（即反向横向）。

您还可以覆盖 onConfigurationChanged 方法

```
public void onConfigurationChanged(Configuration _newConfig) 
```

# c - 如何使用 -std=gnu99 编译 Linux 内核模块？

> ID：15910064
> 
> 赞同：11
> 
> 时间：2013-04-09T18:45:25.640
> 
> 标签：c, linux, gcc, linux-kernel, c99

我最近学习了如何编写简单的字符驱动程序，并且在玩弄代码时我注意到我收到很多针对我的 C99 代码的以下 GCC 警告：

```
warning: ISO C90 forbids mixed declarations and code 
```

我认为这是因为主 Linux 内核 Makefile 设置为使用非 C99 标准进行编译。我四处搜索我在stackoverflow上找到了这个答案：[How to use make and compile as C99?](https://stackoverflow.com/questions/2935047/how-to-use-make-and-compile-as-c99/5543589#5543589)

所以我很自然地在我的 Makefile 中尝试了以下内容：

```
ccflags-y := -std=gnu99 
```

不幸的是，这并没有消除 GCC 警告。我检查了详细的输出`make`并验证了 GCC 确实是`-std=gnu99`在最后执行的；所以我有点困惑。

如何使用该`-std=gnu99`选项正确编译 Linux 内核模块？

**编辑**：

我注意到 GCC 输出显示了这个选项：`-Wdeclaration-after-statement`. `-std=gnu99`这就是为什么即使使用该选项我也会收到警告？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-04-09T20:38:41.853

事实证明这`-std=gnu99` *确实*有效；删除编译器标志后，我开始看到有关 C99 功能的错误。`-std=`所以这意味着除了选项之外还有其他东西导致警告打印出来。

通过 解析详细输出后`make V=1`，我发现该`-Wdeclaration-after-statement`选项是 GCC 执行的一部分。这就是我看到的 ISO C90 混合声明警告的原因。

要禁用 ISO C90 警告，请将其传递给 GCC `-Wno-declaration-after-statement`：.

例如：

```
ccflags-y := -std=gnu99 -Wno-declaration-after-statement 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-26T21:29:53.417

如果您有一个，您还可以在*Makefile*中指定标志：

```
FLAGS=-std=gnu99 
```

# google-maps - 移动设备上的谷歌地图 API v3 zoomControlOptions LARGE 不显示滑块

> ID：15910065
> 
> 赞同：1
> 
> 时间：2013-04-09T18:45:32.373
> 
> 标签：google-maps, mobile, google-maps-api-3, zooming

我正在为移动设备设置地图并希望使用缩放滑块。

```
g.map = new google.maps.Map(
        document.getElementById("mapcanvas"), 
        {
            disableDoubleClickZoom  : false,
            disableDefaultUI        : true,
            scaleControl            : true,
            panControl              : false,
            navigationControl       : true,
            mapTypeControl          : false,
            zoomControlOptions      : {
                position    : google.maps.ControlPosition.RIGHT_BOTTOM,
                style       : google.maps.ZoomControlStyle.LARGE
            },
            mapTypeControlOptions: {
                mapTypeIds          : [
                                            google.maps.MapTypeId.ROADMAP, 
                                            google.maps.MapTypeId.HYBRID
                                      ],
                style               : google.maps.MapTypeControlStyle.HORIZONTAL_BAR
            },
            zoom                    : 16,
            center                  : new google.maps.LatLng('37.8477', '-122.2627'),
            mapTypeId               : google.maps.MapTypeId.ROADMAP
        } 
```

当我在桌面上查看此控件时，控件是滑块，但在移动设备上，它仍然显示小的 + 和 - 按钮并且没有滑块。

这是一个错误吗？如何强制滑块进行缩放？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-12-17T03:00:01.690

不，这不是错误。缩放工具的默认行为是在大屏幕设备上显示大屏幕，在手机等较小屏幕上显示小屏幕（仅 + -）。

如果您希望始终看到带有滑块的较大缩放工具，则需要在 mapOptions 中设置 google.maps.ZoomControlStyle.LARGE。前任：

```
var mapOptions = {
    zoom: 4,
    center: new google.maps.LatLng(-33, 151),
    zoomControl: true,
    zoomControlOptions: {
        style: google.maps.ZoomControlStyle.LARGE
    }
} 
```

这是我的来源： [https ://developers.google.com/maps/documentation/javascript/controls#DefaultUI](https://developers.google.com/maps/documentation/javascript/controls#DefaultUI)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-10-15T20:15:11.083

您可以`controlSize`使用整数值（即 20）设置未记录的地图选项属性，以设置地图控件的大小。

请参阅@Dutchmanjonny 的最新帖子：[巨大的 Google 地图控件（可能的错误？）](https://stackoverflow.com/questions/51832781/huge-google-maps-controls-possible-bug)

# javascript - Javascript 正则表达式，确定匹配的组

> ID：15910068
> 
> 赞同：1
> 
> 时间：2013-04-09T18:45:41.730
> 
> 标签：javascript, regex, match

我在 javascript 中有以下正则表达式，用于匹配类似于`book[n]`、`book[1,2,3,4,5,...,n]`和（n 是任意数字）：`book[author="Kristian"]``book[id=n]`

```
var opRegex = /\[[0-9]+\]|\[[0-9]+,.*\]|\[[a-zA-Z]+="*.+"*\]/gi; 
```

我可以通过以下方式使用它：

```
// If there is no match in any of the groups hasOp will be null
hasOp = opRegex.exec('books[0]');

/*
Result: ["[0]", index: 5, input: "books[0]"]
*/ 
```

如上所示，我不仅得到了值，还得到了 [ 和 ]。我可以通过使用组来避免这种情况。所以我将正则表达式更改为：

```
var opRegex = /\[([0-9]+)\]|\[([0-9]+,.*)\]|\[([a-zA-Z]+=".+")\]/gi; 
```

运行与上面相同的结果将是：

```
["[0]", "0", undefined, undefined, index: 5, input: "books[0]"] 
```

上面我将组作为数组中的索引 1、2 和 3。对于此示例，匹配位于第一个，但如果匹配位于第二个正则表达式组中，则匹配将位于索引 2 或数组中。

我可以更改我的第一个正则表达式以获取不带括号的值，还是使用分组方法和 while 循环来获取第一个定义的值？

还有什么我想念的吗？是贪心吗？

如果您需要更多信息，请告诉我，我很乐意提供。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T19:00:11.633

我有几个建议。首先，特别是因为您正在寻找文字括号，请尽可能避免使用正则表达式括号（例如，替换`[0-9]`为`\d`）。另外，您允许 使用多个引号`*`，所以我将其更改为`"?`. 但最重要的是，我将括号的比赛移到了交替之外，因为它们应该出现在每场交替比赛中。这样，无论哪个部分匹配，您都拥有相同的组。

```
/\[(\d+(,\d+)*|[a-zA-Z]+="?[^\]]+"?)\]/gi 
```

# asp.net - 从数据库中查询数据

> ID：15910073
> 
> 赞同：-1
> 
> 时间：2013-04-09T18:45:58.223
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3

以下是我的 JS 代码

```
$("#submitPassword").click(function () {
                $.ajax({
                    type: "POST",
                    url: "@Url.Action("IsUserExist","Register")",
                    data: { emailOrPhone: $("#emailOrPhone").val(), password: $("#password").val() },
                    success:function(response){
                        if (response) {
                            alert("User Exist");
                        }
                        else alert("Doesn't exist");
                    }
                });
            }); 
```

以下是控制器端代码

```
public bool IsUserExist(string emailOrPhone,string password)
        {
            DBEntities db = new DBEntities();
            var q = from profile in db.Profiles
                    where profile.Email == emailOrPhone && profile.Password == password
                    select profile;
            if (q == null)
                return false;
            else
                return true;

        } 
```

我的程序总是显示一个警告框，即“用户存在”，即使我输入了错误的密码。请告诉我什么问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T19:59:59.080

如果没有结果，表达式仍将返回一个空枚举数。它不会返回 null。您需要查看有多少个结果的*计数，并检查它是否至少为一个。*

# 您还需要停止以纯文本形式存储密码。

如果您只想知道用户是否存在，只需查找用户名即可。如果您确实想登录，则需要查找或计算该特定用户的盐，使用该盐和密码生成哈希码（使用*安全*的哈希算法... md5 不计算在内），并且然后将其与密码字段中存储的值进行比较。当用户设置或更改其密码时，您使用相同的过程来保存新值。其他任何事情都是非常错误的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T18:57:30.037

在你的 if 条件下尝试这个改变 response.data 的响应

```
 success:function(response){
                        if (response.data) {
                            alert("User Exist");
                        }
                        else alert("Doesn't exist");
                    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T18:58:07.870

比较对 JavaScript 中字符串的响应：

```
if (response == "True") {
     alert("User Exist");
} else if(response == "False") {... 
```

因为 bool 控制器返回“False”或“True”，我敢打赌，JavaScript 会将其视为字符串，因此响应将始终被定义为 true。

下次尝试调试：首先，您的控制器 - 如果“q”为空，则返回空。很容易得出结论，问题出在 JavaScript 上。调试 JS，至少使用 console.log(response)，你就会知道如何更改你的`if`语句。

# perl - 使用 perl 脚本使用 fmt 调用 cleartool 命令

> ID：15910076
> 
> 赞同：2
> 
> 时间：2013-04-09T18:46:07.810
> 
> 标签：perl, clearcase

我使用 Perl 脚本在 ClearCase 上的多个 VOB 中为多个用户运行命令。我有一个从文本文件中读取的 VOB 列表。然后我在该列表上循环并执行我想要执行的任何 ClearCase 命令。但是，这一次脚本似乎不起作用。如果我将命令打印到屏幕上，然后在提示符处复制并粘贴它，它工作正常。它只是不会从 Perl 脚本中执行。我看到的唯一区别是 fmt 字符，但即使我删除它也不会执行。我尝试首先将 fmt 直接放在线上，然后尝试将它们设置为变量。你会看到第一个注释行是失败的，但我把它留在那里作为我尝试过的一个例子。最后两条评论来自我这样运行的另一个脚本，它确实有效。

代码：

```
#! /usr/local/bin/perl -w
use strict;

open(VOBS,"vobs.txt") || die "Can't open: !$\n";

my $u = '%u';
my $a ='%Ad';
my $n ='%N/n';
my $user='john';
my $ct = '/usr/atria/bin/cleartool';

while(my $newvobs=<VOBS>){

  chomp($newvobs);
  my $tag = $newvobs;
  print "\n $tag \n"; 
  print " $ct lstype -kind brtype -invob $tag | grep $user ";
  `$ct lstype -kind brtype -invob $tag | grep $user`;
  # `/usr/atria/bin/cleartool lstype -kind brtype -invob $tag -fmt '%u %Ad %N/\n' `;
  # print "\n cleartool rmtag -view  $tag \n";
  #`/usr/atria/bin/cleartool rmtag -view  $tag `;
}

close(VOBS); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T19:16:02.553

作为参考，这里有一个 perl 脚本，它使用`-fmt`“[查找组件的最新基线](http://www-01.ibm.com/support/docview.wss?uid=swg21330134)”：

### 例子：

```
ccperl StreamComp.pl mystream@\pvobtag | findstr {component} 
```

### 脚本“ `streamcomp.pl`”：

```
#!/usr/bin/perl -w
my $cmdout = `cleartool desc -fmt '%[latest_bls]CXp' stream:$ARGV[0]`;
my @baselines = split(/,/,$cmdout);
foreach $baseline (@baselines)
{
  $compname=`cleartool desc -fmt '%[component]p' $baseline`;
  printf("%-30s \t %s\n", $compname, $baseline);
} 
```

它是一个适用于 ClearCase UCM 环境的程序，但它可以让您了解`grep`可以尝试在您自己的基本 ClearCase 程序中重现的工作语句类型（无需先尝试）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T20:04:13.653

实际上您的程序运行，但不打印任何内容。

例子：

```
#!/usr/bin/perl
use strict;
use warnings;
my $cmd = "cat";
`$cmd $0 | grep warning`; 
```

输出：（无）

* * *

* * *

最容易修复。最后一行

```
print `$cmd $0 | grep warning` 
```

输出：

* * *

```
use warnings;
print `$cmd $0 | grep warning`; 
```

* * *

如果您需要退出代码，请将最后一行替换为

```
my $exit = system("$cmd $0 | grep warning");
print $exit; 
```

输出：

* * *

```
use warnings;
my $exit = system("$cmd $0 | grep warning");
0 
```

* * *

或者使用 open 来处理输出：

```
open my $fh, "$cmd $0 | grep warning|" or die;
while (<$fh>) { print $_; }
close $fh; 
```

输出：

* * *

```
use warnings;
open my $fh, "$cmd $0 | grep warning|" or die; 
```

* * *

但我可以建议如下。使用 AUTOLOAD，clearcase 命令可以用作内部 perl 命令。

```
#!/usr/bin/perl
use strict;
use warnings;

sub AUTOLOAD {
    (my $sub = $::AUTOLOAD) =~ s/.*:://;
    print "---\n";
    system("time $sub @_");
    print "---\n";
}

my $cmd = "cat";
eval "$cmd($0)"; 
```

输出：

* * *

```
---
#!/usr/bin/perl

use strict;
use warnings;

sub AUTOLOAD {
    (my $sub = $::AUTOLOAD) =~ s/.*:://;
    print "---\n";
    system("time $sub @_");
    print "---\n";
}

cat($0);
0.00user 0.00system 0:00.00elapsed 400%CPU (0avgtext+0avgdata 2112maxresident)k
0inputs+0outputs (0major+174minor)pagefaults 0swaps
--- 
```

* * *

# javascript - 在dom准备好之前交换css文件，因为我不想让我的页面轻弹？

> ID：15910077
> 
> 赞同：0
> 
> 时间：2013-04-09T18:46:15.753
> 
> 标签：javascript, jquery, html, css

**头**

```
<head>
<meta charset="UTF-8"/>
<title>abc</title>
<script type='text/javascript' src='/js/jquery-min.js'></script>
<link rel="stylesheet" type="text/css" href="/css/style.css">
<script type='text/javascript' src='/js/service.js'></script>
</head> 
```

**问题** 我什至想在dom准备好删除css并动态添加css（我从json对象获取其文件路径）之前检查。我必须这样做的问题是在交换css文件时我可以看到行为（像闪烁）在我的页面上。想法？

**service.js 中的方法**

```
parse : function(data){
var fileName = data.css;
var styleFound = false;

$('link').each(function(){
    for(i=0; i<fileName.length;i++){
        if($(this).attr('href')=== fileName[i].file){
            styleFound = true;
            $(this).remove();
            console.log(this);
        }
    }
});

if(styleFound){
    for(i=0; i<fileName.length;i++){
         if (document.createStyleSheet)
             document.createStyleSheet(fileName[i].file);
         else {
                $("head").append($("<link rel='stylesheet' type='text/css' href='"+fileName[i].file+"' />"));
        }
    }
}

     },

     };

       getService(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T19:17:02.480

你可以做的是这样的：

在您的初始页面中，根本不加载任何 css，除了一个小文件，上面写着：

```
 /* hide everything */
    * {
       display: none;
    }
 /* show some sort of loader */
    #loader {
      display: block;
      background: rgba(0,0,0,.8) url(image/loading.gif) no-repeat center center;
      position: fixed;
      top: 0;
      bottom: 0;
      left: 0;
      right: 0;
      ...
    } 
```

尽快开始在标题中插入指向适当样式表的链接，使用 javascript

`#loader`加载所有样式表后，再次使用 javascript删除指向上述样式表的链接，甚至可能是div

它可能并不完美，但您的用户会清楚发生了什么，并且您不会获得现在的闪烁效果。返回用户将永远不会看到加载程序，因为 css 文件已经在缓存中，事情应该足够快。

这种技术的一大缺点是非 javascript 用户除了加载器之外什么都看不到。

作为旁注，我个人认为这是应该由服务器处理的事情，应该根据浏览器语言区域设置在标题中设置正确的样式表或其他东西......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T19:13:35.043

您可以将 css 作为文本文件加载并将其附加到样式标记中。这将确保文件已在其他任何内容之前加载。

```
$.ajax({
    type: "GET",
    url: fileName[i].file,
    dataType: "text",
    async: true,
    success: function (data)
    {
        $("head").append("<style data-href='" + fileName[i].file + "'>" +  data + "</style>");
    }
}); 
```

并删除此样式标签，

```
$("style[data-href='" + fileName[i].file + "']").remove(); 
```

或者您甚至可以禁用样式表

```
$("style[data-href='" + fileName[i].file + "']").attr('disabled', 'disabled'); 
```

# java - 延迟后如何运行方法？

> ID：15910078
> 
> 赞同：1
> 
> 时间：2013-04-09T18:46:18.177
> 
> 标签：java, multithreading, threadpool

我有一个关于在一定延迟后调用方法的问题。

我想`exampleFunction()`在延迟大约 10 秒后调用 Java 方法。我在网上寻找了解决方案，并遇到了`ScheduledThreadPoolExecutor()`. 所以我使用了这个，但问题是，一旦函数在 10 秒后运行，它就不会从线程中退出。有什么办法可以退出线程吗？或者我可以`ScheduledThreadPoolExecutor()`在当前线程上运行而不是创建一个新线程吗？

```
class Test {
     ...
     exampleFunction();
     ...

     public void exampleFunction() {
         ScheduledThreadPoolExecutor exec = new ScheduledThreadPoolExecutor(1);
         exec.schedule(new Runnable() {
             public void run() {
                 ...do something here...
             }
         }, 10, TimeUnit.SECONDS);
     }

} 
```

那么在 exampleFunction 延迟 10 秒后运行后，我有什么办法可以退出这个线程？或者我可以`ScheduledThreadPoolExecutor`使用当前线程而不是创建一个新线程吗？

还是有另一种方法可以解决这个问题？我希望能够`exampleFunction()`在当前线程上运行 10 秒后，而不是创建一个新线程。

编辑：我认为这可能不是线程问题。我仍在试图找出问题所在。感谢大家的建议和建议。

编辑：我可以将参数传递给 exampleFunction()，然后在 public void run() 中使用它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T18:49:59.947

我相信您的问题可能是您在提交作业后没有[关闭执行程序。](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ScheduledThreadPoolExecutor.html#shutdown%28%29)

```
exec.schedule(...);
exec.shutdown(); 
```

已提交的作业将继续运行，但您必须在提交最后一个作业后关闭该服务。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T18:13:36.060

基于所有的评论和困惑，任何答案都只是猜测。

我认为你想要什么：

*   要调用的 UI 线程`exampleFunction`
*   'exampleFunction' 将任务安排在 10 秒后立即返回
*   在 10 秒的时间内，`run`在 UI 线程上调用该方法

在 Swing 中，这是通过使用[SwingUtilities.invokeLater](http://docs.oracle.com/javase/7/docs/api/javax/swing/SwingUtilities.html#invokeLater%28java.lang.Runnable%29)来完成的。

ExampleFunction 看起来像这样：

```
 public void exampleFunction() {
     new Thread() {
         public void run() {
             TimeUnit.SECONDS.sleep(10); //Will need a try/catch
             SwingUtilities.invokeLater(new Runnable() {
                 public void run() {
                     ...do something here...
                 }
             });
         }
     }.start();
 } 
```

*注：* `SwingUtilities.invokeAndWait`也可以使用。
*注 2：*虽然通常不建议，但这里一个简单的 Thread 比创建一个新的 Thread 池更简单。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T18:49:46.443

`Thread.sleep`*如果只是希望使当前线程阻塞*，则可以使用。如果您确实使用池执行器，请确保将其用作*池*执行器 - 而不是每个（新）线程一个。要从线程“退出”，只需让执行用完`run`. 如果使用 Swing，请使用 EDT。

# c# - 定义一个接受任何泛型类实现的集合

> ID：15910084
> 
> 赞同：1
> 
> 时间：2013-04-09T18:46:40.633
> 
> 标签：c#, generics

我有一个通用的抽象类`Plot<T>`。如何定义一个可以接受任何抽象类实现的集合？我尝试了以下方法但没有成功：

`public List<Plot<object>> Plots = new List<Plot<object>>();`

`public List<Plot<dynamic>> Plots = new List<Plot<dynamic>>();`

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-09T18:51:10.243

像这样的情况通常需要创建一个非泛型基类，泛型类从该基类派生：

```
public abstract class Plot
{
    // Put anything which doesn't need T here
}

public class Plot<T> : Plot
{
} 
```

然后你可以创建一个`List<Plot>`.

# asp.net-mvc - 如何只打印网页的一部分？

> ID：15910086
> 
> 赞同：2
> 
> 时间：2013-04-09T18:46:46.703
> 
> 标签：asp.net-mvc

我在 JQuery 对话框中有一个 Partial 视图，它的侧面有按钮链接，顶部有文本链接，下面有一个网格。

我希望顶部的链接之一是“打印”链接，它打印出网格，仅此而已。

JavaScript 的 window.print() 打印整个页面。我怎样才能只打印网格？有没有办法告诉打印方法“只打印这个div的内容”？

如果我需要创建一个单独的“可打印网格”页面，如何避免打印我认为需要在页面上的“打印按钮”？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T18:50:00.347

避免打印任何内容的规范方法是添加一个打印样式表，该样式表将不应打印的元素设置为**display: none**。

```
<link rel="stylesheet" type="text/css" href="print.css" media="print" /> 
```

在 print.css 中，您可以重新定义现有的 CSS 样式以**显示：无**，您可以添加一个 .DoNotPrint 类，您可以将其应用于您不想打印的任何内容。

```
.DoNotPrint
{
    display: none;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T18:50:06.787

这真的完全取决于你的实现，但我发现实现这一点的最简单方法是包含一个打印特定的样式表，如下所示：

```
<link rel="stylesheet" href="URL to your print.css" type="text/css" media="print" /> 
```

该样式表将隐藏除表格之外的所有内容，并且除了解决要显示和隐藏的元素之外，不需要任何特别的东西。

经过进一步考虑，您还可以执行以下操作：

创建一个单独的页面，该页面仅包含具有网格的部分。当用户单击打印按钮时，您会打开新窗口并`window.print()`加载。

# c# - C# Lambda 表达式的 SQL [IN] 语句等效于什么？

> ID：15910087
> 
> 赞同：3
> 
> 时间：2013-04-09T18:46:48.583
> 
> 标签：c#, lambda

我在这种情况下。我有两个不同对象类型的列表，它们都具有共享属性值。假设它是`invoiceID`。

在 SQL 中，如果我想从中获取所有记录，`table_A`因为它的列`invoiceID`值与任何`invoiceId`inside匹配`table_B`，我可能会做这样的事情。

```
Select *
From table_A
where invoiceID in ( select invoiceId from table_B) 
```

对于这种情况，C# 中等效的 LINQ 或 Lambda 表达式是什么？

我习惯于使用单个值搜索列表中的元素，例如：

```
var result = list_A.Where(x=>x.InvoiceID = someInvoiceID) 
```

或者`.contains()`相反。

但是，这只能涵盖一个`invoiceID`值。

我想，我可以为每个`invoiceID`on运行循环`list_B`，然后将结果存储在另一个列表中，但我只是想知道是否有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T18:54:18.590

以下代码应该可以工作：

```
var someInvoiceList = new int[] {1, 2, 3};
var result = list_A.Where(x => someInvoiceList.Contains(x.InvoiceID)); 
```

# eclipse - IllegalArgumentException：名为 [MainServlet] 和 [servlets.MainServlet] 的 servlet 都映射到 url 模式 [/MainServlet]

> ID：15910091
> 
> 赞同：0
> 
> 时间：2013-04-09T18:47:02.290
> 
> 标签：eclipse, tomcat, servlets

```
Apr 09, 2013 9:42:34 PM org.apache.catalina.core.AprLifecycleListener init
INFO: The APR based Apache Tomcat Native library which allows optimal performance in production environments was not found on the java.library.path: C:\Program Files\Java\jre7\bin;C:\Windows\Sun\Java\bin;C:\Windows\system32;C:\Windows;C:\PHP\;C:\Program Files (x86)\NVIDIA Corporation\PhysX\Common;C:\Program Files\Common Files\Microsoft Shared\Windows Live;C:\Program Files (x86)\Common Files\Microsoft Shared\Windows Live;C:\Windows\system32;C:\Windows;C:\Windows\System32\Wbem;C:\Windows\System32\WindowsPowerShell\v1.0\;C:\Program Files (x86)\QuickTime\QTSystem\;C:\Program Files (x86)\Windows Live\Shared;C:\Program Files (x86)\Autodesk\Backburner\;C:\Program Files\Common Files\Autodesk Shared\;C:\Program Files (x86)\Subversion\bin;C:\Program Files (x86)\Java\jre6\bin;C:\Program Files\Java\jdk1.7.0_01\bin;C:\Program Files (x86)\MKVToolNix;C:\Program Files\TortoiseGit\bin;c:\Program Files (x86)\Microsoft SQL Server\100\Tools\Binn\;c:\Program Files\Microsoft SQL Server\100\Tools\Binn\;c:\Program Files\Microsoft SQL Server\100\DTS\Binn\;C:\Program Files\MySQL\MySQL Server 5.5\bin;C:\Program Files\TortoiseSVN\bin;C:\Program Files (x86)\Nmap;.
Apr 09, 2013 9:42:34 PM org.apache.tomcat.util.digester.SetPropertiesRule begin
WARNING: [SetPropertiesRule]{Server/Service/Engine/Host/Context} Setting property 'source' to 'org.eclipse.jst.jee.server:ThursdayBlue' did not find a matching property.
Apr 09, 2013 9:42:34 PM org.apache.coyote.AbstractProtocol init
INFO: Initializing ProtocolHandler ["http-bio-8080"]
Apr 09, 2013 9:42:34 PM org.apache.coyote.AbstractProtocol init
INFO: Initializing ProtocolHandler ["ajp-bio-8009"]
Apr 09, 2013 9:42:34 PM org.apache.catalina.startup.Catalina load
INFO: Initialization processed in 585 ms
Apr 09, 2013 9:42:34 PM org.apache.catalina.core.StandardService startInternal
INFO: Starting service Catalina
Apr 09, 2013 9:42:34 PM org.apache.catalina.core.StandardEngine startInternal
INFO: Starting Servlet Engine: Apache Tomcat/7.0.39
Apr 09, 2013 9:42:34 PM org.apache.catalina.core.ContainerBase startInternal
SEVERE: A child container failed during start
java.util.concurrent.ExecutionException: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost].StandardContext[/ThursdayBlue]]
    at java.util.concurrent.FutureTask$Sync.innerGet(Unknown Source)
    at java.util.concurrent.FutureTask.get(Unknown Source)
    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:1123)
    at org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:800)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1559)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1549)
    at java.util.concurrent.FutureTask$Sync.innerRun(Unknown Source)
    at java.util.concurrent.FutureTask.run(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)
Caused by: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost].StandardContext[/ThursdayBlue]]
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:154)
    ... 7 more
Caused by: java.lang.IllegalArgumentException: The servlets named [MainServlet] and [servlets.MainServlet] are both mapped to the url-pattern [/MainServlet] which is not permitted
    at org.apache.catalina.deploy.WebXml.addServletMapping(WebXml.java:335)
    at org.apache.catalina.startup.ContextConfig.processAnnotationWebServlet(ContextConfig.java:2457)
    at org.apache.catalina.startup.ContextConfig.processAnnotationsStream(ContextConfig.java:2139)
    at org.apache.catalina.startup.ContextConfig.processAnnotationsFile(ContextConfig.java:2100)
    at org.apache.catalina.startup.ContextConfig.processAnnotationsFile(ContextConfig.java:2093)
    at org.apache.catalina.startup.ContextConfig.webConfig(ContextConfig.java:1300)
    at org.apache.catalina.startup.ContextConfig.configureStart(ContextConfig.java:878)
    at org.apache.catalina.startup.ContextConfig.lifecycleEvent(ContextConfig.java:369)
    at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:119)
    at org.apache.catalina.util.LifecycleBase.fireLifecycleEvent(LifecycleBase.java:90)
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5269)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    ... 7 more

Apr 09, 2013 9:42:34 PM org.apache.catalina.core.ContainerBase startInternal
SEVERE: A child container failed during start
java.util.concurrent.ExecutionException: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost]]
    at java.util.concurrent.FutureTask$Sync.innerGet(Unknown Source)
    at java.util.concurrent.FutureTask.get(Unknown Source)
    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:1123)
    at org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:302)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.StandardService.startInternal(StandardService.java:443)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:732)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.startup.Catalina.start(Catalina.java:684)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:322)
    at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:456)
Caused by: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost]]
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:154)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1559)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1549)
    at java.util.concurrent.FutureTask$Sync.innerRun(Unknown Source)
    at java.util.concurrent.FutureTask.run(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)
Caused by: org.apache.catalina.LifecycleException: A child container failed during start
    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:1131)
    at org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:800)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    ... 7 more

Apr 09, 2013 9:42:34 PM org.apache.catalina.startup.Catalina start
SEVERE: Catalina.start: 
org.apache.catalina.LifecycleException: Failed to start component [StandardServer[8005]]
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:154)
    at org.apache.catalina.startup.Catalina.start(Catalina.java:684)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:322)
    at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:456)
Caused by: org.apache.catalina.LifecycleException: Failed to start component [StandardService[Catalina]]
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:154)
    at org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:732)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    ... 7 more
Caused by: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina]]
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:154)
    at org.apache.catalina.core.StandardService.startInternal(StandardService.java:443)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    ... 9 more
Caused by: org.apache.catalina.LifecycleException: A child container failed during start
    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:1131)
    at org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:302)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    ... 11 more

Apr 09, 2013 9:42:34 PM org.apache.catalina.startup.Catalina start
INFO: Server startup in 363 ms 
```

当我在 Eclipse 上运行 Tomcat 7.0 时，它给了我这个错误。我尝试重新安装tomcat，但它没有工作。为什么会这样？我浏览了整个网络，有很多答案，但没有一个有效......

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T08:35:38.243

> 原因：org.apache.catalina.LifecycleException：无法在 org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:154 启动组件 [StandardEngine[Catalina].StandardHost[localhost].StandardContext[/ThursdayBlue]] ) ... 7 更多
> 
> 原因：java.lang.IllegalArgumentException：**名为 [MainServlet] 和 [servlets.MainServlet] 的 servlet 都映射到** org.apache.catalina.deploy.WebXml.addServletMapping( WebXml.java:335)

异常堆栈跟踪清楚地表明您有两个 Servlet (`MainServlet`和`servlets.MainServlet`)，它们映射到同一个`url-pattern`[ `/MainServlet`] ，这是不允许的。

您不能将两个 servlet 映射到相同的 URL 模式

# java - 如何反转Java字符串的单词

> ID：15910092
> 
> 赞同：1
> 
> 时间：2013-04-09T18:47:09.987
> 
> 标签：java, string, input

我试图制作一个程序来从扫描仪中获取字符串的输入，但我想分解输入的字符串并颠倒单词的顺序。这就是我到目前为止所拥有的。

```
Scanner input = new Scanner(System.in);
System.out.println("Enter your string");
StringBuilder welcome = new StringBuilder(input.next());
int i;
for( i = 0; i < welcome.length(); i++ ){
    // Will recognize a space in words
    if(Character.isWhitespace(welcome.charAt(i))) {
        Character a = welcome.charAt(i);
    }   
} 
```

我想要做的是在它识别空间之后，捕获它之前的所有内容，等等每个空间，然后重新排列字符串。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T19:19:26.020

**问题后编辑。**

```
import java.util.Arrays;
import java.util.Collections;
import java.util.List;
import java.util.stream.Collectors;

public class Main {

   public static void main( String[] args ) {
      final String welcome = "How should we get words in string form a List?";
      final List< String > words = Arrays.asList( welcome.split( "\\s" ));
      Collections.reverse( words );
      final String rev = words.stream().collect( Collectors.joining( ", " ));
      System.out.println( "Your sentence, reversed: " + rev );
   }
} 
```

执行：

```
Your sentence, reversed: List?, a, form, string, in, words, get, we, should, How 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-09T19:17:59.857

我确实建议先反转整个字符串。然后反转两个空格之间的子字符串。

```
public class ReverseByWord {

    public static String reversePart (String in){
        // Reverses the complete string
        String reversed = "";
        for (int i=0; i<in.length(); i++){
            reversed=in.charAt(i)+reversed;
        }
        return reversed;
    }

    public static String reverseByWord (String in){
        // First reverses the complete string
        // "I am going there" becomes "ereht gniog ma I"
        // After that we just need to reverse each word.
        String reversed = reversePart(in);
        String word_reversal="";
        int last_space=-1;
        int j=0;
        while (j<in.length()){
            if (reversed.charAt(j)==' '){
                word_reversal=word_reversal+reversePart(reversed.substring(last_space+1, j));
                word_reversal=word_reversal+" ";
                last_space=j;
            }
            j++;
        }
        word_reversal=word_reversal+reversePart(reversed.substring(last_space+1, in.length()));
        return word_reversal;
    }

    public static void main(String[] args) {
        // TODO code application logic here
        System.out.println(reverseByWord("I am going there"));
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T19:28:08.350

这是您可以在输入的字符串中反转单词的方法：

```
Scanner input = new Scanner(System.in);
System.out.println("Enter your string");
String s = input.next();

if(!s.trim().contains(' ')) {
   return s;
}
else {

   StringBuilder reversedString = new StringBuilder();
   String[] sa = s.trim().split(' ');

   for(int i = sa.length() - 1; i >= 0: i - 1 ) {

      reversedString.append(sa[i]);
      reversedString.append(' ');
   }

   return reversedString.toString().trim();
} 
```

希望这可以帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-08-18T09:45:10.400

如果您想减少代码行数，我想您可以查看我的代码：

```
package com.sujit;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;

public class StatementReverse {
    public static void main(String[] args) throws IOException {
        String str;
        String arr[];
        BufferedReader br = new BufferedReader(new InputStreamReader(System.in));
        System.out.println("Enter a string:");
        str = br.readLine();
        arr = str.split("\\s+");

        for (int i = arr.length - 1;; i--) {
            if (i >= 0) {
                System.out.print(arr[i] + " ");
            } else {
                break;
            }

        }
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-12-02T10:14:33.920

```
public class StringReverse {
    public static void main(String[] args) {
        String str="This is anil thakur";
        String[] arr=str.split(" ");

        StringBuilder builder=new StringBuilder("");
        for(int i=arr.length-1; i>=0;i--){
            builder.append(arr[i]+" ");
        }
        System.out.println(builder.toString());
    }

}

Output: thakur anil is This 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-04-10T07:08:22.860

```
public class ReverseWordTest {

  public static String charRev(String str) {

    String revString = "";
    String[] wordSplit = str.split(" ");

    for (int i = 0; i < wordSplit.length; i++) {

      String revWord = "";
      String s2 = wordSplit[i];

      for (int j = s2.length() - 1; j >= 0; j--) {
        revWord = revWord + s2.charAt(j);
      }

      revString = revString + revWord + " ";
    }
    return revString;
  }

  public static void main(String[] args) {
    System.out.println("Enter Your String: ");
    Scanner sc = new Scanner(System.in);
    String str = sc.nextLine();
    System.out.println(charRev(str));
  } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-08-03T21:29:42.597

```
 public static void main(String[]args)
{
String one="Hello my friend, another way here";
String[]x=one.split(" ");
one="";
int count=0;
for(String s:x){
    if(count==0||count==x.length) //that's for two edges.
      one=s+one;
    else
      one=s+" "+one;
    count++;
}
System.out.println(one); //reverse.
} 
```

# google-maps - 电子邮件客户将我的链接 & 更改为 &

> ID：15910093
> 
> 赞同：1
> 
> 时间：2013-04-09T18:47:11.283
> 
> 标签：google-maps, email

我正在发送带有静态谷歌地图的电子邮件警报。某些电子邮件客户端正在更改链接的内容，使其不再有效。具体来说，“&”正在更改为 & amp; （没有空间）

Google 不会接受带有替换的链接。我也尝试发送 %26 代替 &，但谷歌不会接受。这仅发生在某些系统上，例如 AOL 和 Hotmail。

这是一个示例链接： http://maps.google.com/maps/api/staticmap?sensor=false¢er=36.124023600000,-115.170356400000&size=500x300&maptype=roadmap&markers=label:S%7Ccolor:red%7C36.114646000000, [-115.1728160000000 =标签：H%7C颜色：绿色%7C36.124023600000,-115.170356400000](http://maps.google.com/maps/api/staticmap?sensor=false&center=36.124023600000,-115.170356400000&size=500x300&maptype=roadmap&markers=label:S%7Ccolor:red%7C36.114646000000,-115.172816000000&markers=label:H%7Ccolor:green%7C36.124023600000,-115.170356400000)

无论如何要告诉电子邮件客户端不要更改链接，或者无论如何要更改原始链接以与 Google 合作并绕过电子邮件客户端替换？

TIA,

大卫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T19:14:34.633

您的电子邮件程序可能会告诉接收程序它是什么类型的消息。有一个标题“Content-Type：”，通常是“text/plain”或“text/html”，默认为 text/plain。

可能正在发生的事情是您的消息以 text/html 的形式发出，而接收程序正在呈现为 HTML，但首先要解决问题，以便与符号显示为与符号而不是 HTML 指令。否则，如果我发送一条消息说“John 和 Carol 正在举办一个惊喜派对”，则 & 符号会搞砸或不显示。（我现在忘记了。）

您的电子邮件程序也有可能在消息发送之前进行转换，并且大多数接收电子邮件程序正在识别问题并修复它。

为了准确了解发生了什么，请向自己发送这些警报之一并查看源。您查看源的方式取决于您用于阅读邮件的电子邮件程序。用GMail，打开邮件，在邮件的右上角，有一个下拉“更多”；选择“显示原创”。查找内容类型是什么以及 URL 中的 & 符号是 & 还是`&amp;`。

现在，至于如何修复它，您现在所做的可能只是在消息中输入 URL。相反，请尝试将其设为链接。您如何执行此操作将根据您用于撰写的程序而有所不同，但例如在 GMail 上，有一个像链子一样的小符号。按下该按钮并输入 URL。这将生成类似于 HTML 的内容 `<a href="http://mydomain.com/blah/blah?foo=1&bar=2&baz=3>http://mydomain.com/blah/blah?foo=1&amp;bar=2&amp;baz=3</a>` 。因此，即使 & 符号*显示*为`&amp;`，当用户*单击*链接时，他们也会获得带有适当 & 符号的 URL。

我不能确定这会奏效，因为我不知道您使用的是什么电子邮件程序，也不知道它是如何工作的。但是，我认为它*可能*会起作用。

如果没有，您可以通过以 text/plain 而不是 text/html 的形式发送来使其工作。

# java - 用于字符串排序的 ArrayList

> ID：15910095
> 
> 赞同：-4
> 
> 时间：2013-04-09T18:47:20.020
> 
> 标签：java, arraylist

用于字符串排序的 ArrayList：

```
public class Ooops<P, O> 
{
   private P po;
   private O pa;
   private int val;
   public Preference(P p, O o, int v) 
   {
        setPo(p);
        setPa(o);
        setValue(v);
   }
   //Getter and setter for Pa,Pa and val
} 
```

我创建了这个类的一个对象

```
 List<Ooops<String, String>> abc = new ArrayList<Oops<String, String>>(); 
```

就像是 ，

```
 Xcf,PQR,8
 DBC,Pas,6
 LdC,PhR,3 
```

变成

```
 DBC,Pas,6
 LdC,PhR,3
 Xcf,PQR,8 
```

我很困惑，如何根据对象中变量 po 的值对对象进行排序。

任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T19:10:05.120

您可以使用带有自定义 Comparator 的 Collections.sort 方法对列表进行排序，将 Comparable 接口添加到 Oooops 也会使生活更轻松。

```
public class Ooops<P, O> implements Comparable<Ooops<P,O>> {

  private P po;
  private O pa;

  @Override
  public int compareTo(Ooops<P, O> o) {
    return (po.toString()+pa.toString()).compareTo(o.po.toString()+o.pa.toString());   //Some common way to compare the two.
  }
} 
```

然后可以使用 Collections.sort 对列表进行排序。强制 P 和 O 扩展 Comparable 将使 compateTo 方法更易于管理。

IE;

```
public class Ooops<P extends Comparable<P>, O extends Comparable<O>> implements Comparable<Ooops<P,O>> {

  private P po;
  private O pa;

  @Override
  public int compareTo(Ooops<P, O> o) {
    if (po.compareTo(o.po) == 0)
      return pa.compareTo(o.pa);
    else
      return po.compareTo(o.po);
  }
} 
```

改变 Ooops 的替代方法是创建一个自定义比较器；

```
ArrayList<Ooops<String, String>> abc = new ArrayList<Ooops<String, String>>();
Collections.sort(abc, new Comparator<Ooops<String, String>> (){

  @Override
  public int compare(Ooops<String, String> o1, Ooops<String, String> o2) {
    return 0; //Compare the two.
  }

}); 
```

# java - 代码产生并发修改异常

> ID：15910098
> 
> 赞同：0
> 
> 时间：2013-04-09T18:47:25.837
> 
> 标签：java, android, concurrency

我有以下代码：

```
public static void pauseAllTimers() {
        for(Timer timer : Timer.allTimers) {
            timer.pause();

        }

    } 
```

在一个线程`Timer`中添加和删除实例的位置`allTimers`（据我所知，除非我正在监督我的代码中的某些内容）。

为什么我的代码会产生并发修改异常？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T18:49:23.987

从集合中移除时，您正在*迭代*集合 - 假设`pause()`移除了计时器。不要那样做——你正在修改一个集合，而你仍在迭代它，这是一个并发修改，即使只有一个线程。

将一组计时器复制到一个列表中，然后对其进行迭代*：*

```
List<Timer> timers = new ArrayList<Timer>(Timer.allTimers);
for (Timer timer : timers) {
    timer.pause();
} 
```

# java - 来自 javascript 的正则表达式 java

> ID：15910099
> 
> 赞同：1
> 
> 时间：2013-04-09T18:47:29.823
> 
> 标签：java, javascript, regex

您好，我在 Javascript 中有这个正则表达式：

```
var urlregex = new RegExp("((www.)(([a-zA-Z0-9-]){2,}\.){1,4}([a-zA-Z]){2,6}(\/([a-zA-Z-_\/\.0-9#:?=&;,]*)?)?)"); 
```

当我尝试将它放在 Java 字符串上时，我遇到了这个错误：

```
Description Resource    Path    Location    Type
Invalid escape sequence (valid ones are  \b  \t  \n  \f  \r  \"  \'  \\ )   CreateActivity.java /SupLink/src/com/supinfo/suplink/activities line 43 Java Problem 
```

所以我只想知道我必须改变什么才能在Java中渲染它才能做到这一点（这个函数运行良好）：

```
private boolean IsMatch(String s, String pattern) 
    {
        try {
            Pattern patt = Pattern.compile(pattern);
            Matcher matcher = patt.matcher(s);
            return matcher.matches();
        } catch (PatternSyntaxException e){
            return false;
        }
} 
```

**编辑 ：**

谢谢你的帮助，现在我有了这个：

```
private String regex = "((www.)(([a-zA-Z0-9-]){2,}\\.){1,4}([a-zA-Z]){2,6}(\\/([a-zA-Z-_\\/\\.0-9#:?=&;,]*)?)?)"; 
```

但我不符合我真正想要的（正则表达式很糟糕^^），我想匹配这些类型的网址：

*   www.something.com
*   某事.com
*   something.com/anotherthing/anything

你能再帮我一次吗？

真的感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T18:51:31.677

创建 Java 字符串时，需要再次转义反斜杠，以便 Java 理解它们是文字反斜杠。您可以将所有现有的反斜杠替换为`\\`. 您还需要转义通常需要转义的任何 Java 字符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T18:52:06.137

你应该转义\

像这样的东西

```
"((www.)(([a-zA-Z0-9-]){2,}\\.){1,4}([a-zA-Z]){2,6}(\\/([a-zA-Z-_\\/\\.0-9#:?=&;,]*)?)?)" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T19:54:48.697

目前，您的正则表达式`www`在开始时需要。如果你想让它成为可选的`?`，在`(www.)`. 此外，您可能想`.`在`www`部分后逃脱。你的正则表达式应该看起来像。

```
"((www\\.)?(([a-zA-Z0-9-]){2,}\\.){1,4}([a-zA-Z]){2,6}(\\/([a-zA-Z-_\\/\\.0-9#:?=&;,]*)?)?)" 
```

# java - 在java中制作一个“假”鼠标？

> ID：15910105
> 
> 赞同：6
> 
> 时间：2013-04-09T18:47:38.067
> 
> 标签：java, awtrobot

在java中，您可以使用机器人类来移动鼠标并触发鼠标点击。虽然这很酷，但它也“劫持”了用户的鼠标，所以你不能多任务。

我想要做的是制作一个独立于系统鼠标光标的“假”鼠标，并且只存在于我的 java 小程序中。从这个意义上说，小程序会认为它是被鼠标在不同的 (x,y) 位置（在小程序内）单击的，但是我可以用系统鼠标做任何我想做的事情，它不会受到影响。

我已经看到了实现这一点的程序，我只是不知道从哪里开始。也许我只是为这个功能使用了错误的术语。

任何关于在哪里寻找的建议将不胜感激。-谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T18:52:15.363

> 我想要做的是制作一个独立于系统鼠标光标的“假”鼠标，并且只存在于我的 java 小程序中。

创建一个可触发鼠标单击的 Runnable FakeMouse 类。Tony Depace 提供了代码，我将其添加到答案中以帮助他人。

```
MouseEvent aClick = new MouseEvent(this, MouseEvent.MOUSE_CLICKED,   
        System.currentTimeMillis(), 0, 10, 10, 1, false); 
dispatchEvent(aClick); 
```

在 Java 小程序的线程中运行 FakeMouse 类。

# c# - 使用 Windows 应用商店应用程序设置 SendGrid

> ID：15910106
> 
> 赞同：2
> 
> 时间：2013-04-09T18:47:39.637
> 
> 标签：c#, asp.net, .net, azure, sendgrid

我有一个 Windows Azure 帐户，并且正在通过我的 Windows 8 应用商店应用程序使用 Azure 移动服务，并且已按照[本教程](http://www.windowsazure.com/en-us/develop/net/how-to-guides/sendgrid-email-service/#reference)中的说明进行操作，但是某处存在问题，并且没有任何关于它的在线信息。

我正在关注的[教程](http://www.windowsazure.com/en-us/develop/net/how-to-guides/sendgrid-email-service/#reference)说将 SendGrid 添加为项目的 Nuget 引用，但是当您搜索 SendGrid 时有 2 个选项（本教程仅显示 1 个选项），我尝试安装两者（一次一个，并且仅当第一个不起作用时）-但它们都显示相同的错误消息。

它无法安装，因为我的 Windows 应用商店应用程序正在运行 .NET Framework 4.5（它应该是这样），并且 SendGrid 库与 .NET Framework 4.5 不兼容。

如何使用 SendGrid 从我的 Windows 应用商店应用程序中发送电子邮件？或者我如何让 SendGrid 工作？

这是我尝试安装任一选项时的外观： ![无法在 Visual Studio 2012 Ultimate 中安装 SendGrid](https://i.stack.imgur.com/Q5eyb.png)

图片中的文字说：

> 无法安装包 SendGridPlus 2.1.1。您正在尝试将此包安装到以 .NETCore,Version=v4.5 为目标的项目中，但该包不包含与该框架兼容的任何程序集引用。如需更多信息，请联系作者。

# 更新

正如@Pascal 所建议的那样，我使用了包管理器控制台来安装它，其中：Install-Package Sendgrid -Version 1.0.1

但它只是向我抛出了完全相同的错误消息：

> PM> Install-Package Sendgrid -Version 1.0.1 成功安装'Sendgrid 1.0.1'。成功卸载“Sendgrid 1.0.1”。安装失败。回滚... 安装包：无法安装包“Sendgrid 1.0.1”。您正在尝试将此包安装到以“.NETCore,Version=v4.5”为目标的项目中，但该包不包含与该框架兼容的任何程序集引用。有关详细信息，请联系包作者。在 line:1 char:1 + Install-Package Sendgrid -Version 1.0.1 + ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ ~~~~~~~ + CategoryInfo : NotSpecified: (:) [Install-Package], InvalidOperationException + FullyQualifiedErrorId : NuGetCmdletUnhandledException,NuGet.PowerShell.Commands.InstallP
> ackageCommand

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T19:11:13.703

您应该尝试使用包管理器控制台而不是 NuGet GUI 安装 Sendgrid 包版本 1.0.1（如教程中所述）。

```
Install-Package Sendgrid -Version 1.0.1 
```

Sengrid 包的最新版本是 1.1.1 版，它依赖于 RestSharp，遗憾的是它没有针对 WinRT 的版本（.NETCore，Version=v4.5）。

-编辑：SendGrid 包不能在 Windows 应用商店应用程序中使用。对于 Azure 移动服务，SendGrid 应直接在 Azure 门户上的脚本中使用

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T19:42:38.583

如果在安装之前还没有更新 nuget 到最新版本，请尝试更新。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T18:27:05.090

如果您使用的是移动服务，使用 SendGrid 的最佳方式是通过商店将其添加到您的 WA 订阅中，然后根据您的一张表上的指定 CRUD 操作触发电子邮件。这是特定于 SendGrid 和移动服务的教程，其中还包括从商店添加 SendGrid：[https ://www.windowsazure.com/en-us/develop/mobile/tutorials/send-email-with-sendgrid/](https://www.windowsazure.com/en-us/develop/mobile/tutorials/send-email-with-sendgrid/)

# c# - 我已经把自己写到了一个角落里在哪里放置数据库特定的帮助方法

> ID：15910109
> 
> 赞同：0
> 
> 时间：2013-04-09T18:47:48.003
> 
> 标签：c#, entity-framework, inversion-of-control

好的，我认为我的控制器不应该知道 sql。

我想将传入的空值转换为要更改为 MinValue 的操作

`var salesFrom = Model.SalesFrom ?? SqlDateTime.MinValue;`

但是，如果我将此行添加到我的控制器操作中，那么我的控制器将转换为特定于 SQL 的实现。所以，我认为它属于我的服务......但是，由于它是一个因实现而异的声明，我不想让它成为我的一部分，`IService`因为我必须为我创建的任何服务实现它。

最后，我想把它添加到DataContext中，但是我的控制器并没有直接访问Context....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T19:05:15.663

我对 EF 了解不多，但我认为这是一个很好的做法。

我喜欢让我的模型/控制器完全与数据库无关。

如果我是你，我会怎么做：

1.  而不是使用 SQLDateTime 只使用**DateTime**，无论是在你的控制器/模型（mvc）中。
2.  如果必须，稍后在不同的层（例如您的 DAO）中进行转换（例如，我使用 nHibernate，它为我处理，我只使用 DateTime）

祝你好运

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T18:54:14.637

由于您使用的是 EF Code-First，因此将`SalesFrom`模型类的属性的默认值设置为`SqlDateTime.MinValue`. 或者，这也是特定于 SQL 的吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T19:04:59.577

您可以尝试覆盖`OnModelCreating`您的 DbContext 并使用 Fluent API 为生成的列指定 DB 默认值。

# oracle - ORA-00923 FROM 关键字未在预期位置找到 - 将数据从表导出到 csv

> ID：15910110
> 
> 赞同：-1
> 
> 时间：2013-04-09T18:47:54.677
> 
> 标签：oracle, oracle11g, export-to-csv

我正在尝试将数据库中的表中的数据导出到 csv 文件。我在网上找到了一个示例并尝试过，但出现以下错误：

```
ORA-00923: FROM keyword not found where expected 
```

我使用的代码如下：

```
SELECT * INTO OUTFILE "C:\Users\Roshane\myfile.csv"
FIELDS TERMINATED BY '\t' 
LINES TERMINATED BY '\n' 
FROM Data_admin.Customer; 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-09T19:57:17.517

就像一些用户在评论中指出的那样，您提供的不是有效的 Oracle 语法。以下是一些可以将数据从 oracle 导出到文本文件的方法。

1.  UTL_FILE（Oracle 的内置包和推荐的文件处理方式）。

2.  假脱机到文件（简单，但功能有限）

    `sql> spool C:\Users\Roshane\myfile.csv`

    `sql> select customer_name || ',' || customer_id` `sql> from Data_admin.Customer;`

    `sql> spool off;`

3.  如果是一次性任务，例如在电子邮件中以 excel/csv 格式发送数据，大多数 SQL 编辑器（sql developer、toad）都允许您以多种格式导出数据。当您看到结果或查看菜单中是否有“数据 > 导出”选项时，只需右键单击数据网格。

# r - 函数对象的属性是什么/在哪里？

> ID：15910113
> 
> 赞同：18
> 
> 时间：2013-04-09T18:48:02.157
> 
> 标签：r, function

通过使用 R 中的一个函数，我发现它的方面比表面上看到的要多。

考虑一下直接在控制台中输入的简单函数分配：

```
f <- function(x)x^2 
```

从广义上讲，通常的“属性”`f`是（i）形式参数列表，（ii）主体表达式和（iii）将成为函数评估框架的外壳的环境。它们可通过以下方式访问：

```
> formals(f)
$x
> body(f)
x^2
> environment(f)
<environment: R_GlobalEnv> 
```

此外，`str`返回附加到的更多信息`f`：

```
> str(f)
function (x)  
 - attr(*, "srcref")=Class 'srcref'  atomic [1:8] 1 6 1 19 6 19 1 1
  .. ..- attr(*, "srcfile")=Classes 'srcfilecopy', 'srcfile' <environment: 0x00000000145a3cc8> 
```

让我们尝试联系他们：

```
> attributes(f)
$srcref
function(x)x^2 
```

这被打印为文本，但它被存储为数字向量：

```
> c(attributes(f)$srcref)
[1]  1  6  1 19  6 19  1  1 
```

而这个对象也有自己的属性：

```
> attributes(attributes(f)$srcref)
$srcfile

$class
[1] "srcref" 
```

第一个是一个环境，有 3 个内部对象：

```
> mode(attributes(attributes(f)$srcref)$srcfile)
[1] "environment"
> ls(attributes(attributes(f)$srcref)$srcfile)
[1] "filename"      "fixedNewlines" "lines" 
> attributes(attributes(f)$srcref)$srcfile$filename
[1] ""
> attributes(attributes(f)$srcref)$srcfile$fixedNewlines
[1] TRUE
> attributes(attributes(f)$srcref)$srcfile$lines
[1] "f <- function(x)x^2" "" 
```

你在这！这是 R 用来打印的字符串`attributes(f)$srcref`。

所以问题是：

1.  是否有任何*其他*对象链接到`f`？如果是这样，如何联系他们？

2.  如果我们去掉`f`它的属性，使用`attributes(f) <- NULL`，它似乎不会影响功能。这样做有什么缺点吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-09T20:51:39.193

据我所知，`srcref`是通常附加到 S3 函数的唯一属性。（S4 函数是另一回事，我不建议弄乱它们有时众多的属性）。

该`srcref`属性用于启用打印函数源代码中包含的注释，以及（对于从文件中获取的函数）按行号设置断点，使用`utils::findLineNum()`和`utils::setBreakpoint()`。

`srcref`如果你不希望你的函数携带这样的额外行李，你可以通过do 关闭记录`options(keep.source=FALSE)`。来自`?options`（也记录了相关`keep.source.pkgs`选项）：

> 'keep.source'：当'TRUE'时，函数的源代码（新定义或加载的）存储在内部，允许将注释保存在正确的位置。通过打印或使用 'deparse(fn, control = "useSource")' 检索源。

比较：

```
options(keep.source=TRUE)
f1 <- function(x) {
    ## This function is needlessly commented
    x
}

options(keep.source=FALSE)
f2 <- function(x) {
    ## This one is too
    x
}

length(attributes(f1))
# [1] 1
f1
# function(x) {
#     ## This function is needlessly commented
#     x
# }

length(attributes(f2))
# [1] 0
f2
# function (x) 
# {
#     x
# } 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-16T16:24:22.487

我只是想出了一个编译函数（包`compiler`）具有的属性，该属性不适用于`attributes`or `str`。这是`bytecode`.

例子：

```
require(compiler)

f <- function(x){ y <- 0; for(i in 1:length(x)) y <- y + x[i]; y }

g <- cmpfun(f) 
```

结果是：

```
> print(f, useSource=FALSE)
function (x) 
{
    y <- 0
    for (i in 1:length(x)) y <- y + x[i]
    y
}

> print(g, useSource=FALSE)
function (x) 
{
    y <- 0
    for (i in 1:length(x)) y <- y + x[i]
    y
}
<bytecode: 0x0000000010eb29e0> 
```

但是，这不会显示在普通命令中：

```
> identical(f, g)
[1] TRUE
> identical(f, g, ignore.bytecode=FALSE)
[1] FALSE
> identical(body(f), body(g), ignore.bytecode=FALSE)
[1] TRUE
> identical(attributes(f), attributes(g), ignore.bytecode=FALSE)
[1] TRUE 
```

它似乎只能通过以下方式访问`.Internal(bodyCode(...))`：

```
> .Internal(bodyCode(f))
{
    y <- 0
    for (i in 1:length(x)) y <- y + x[i]
    y
}

> .Internal(bodyCode(g))
<bytecode: 0x0000000010eb29e0> 
```

# php - 如何获得维基百科“干净”的内容？

> ID：15910114
> 
> 赞同：2
> 
> 时间：2013-04-09T18:48:03.517
> 
> 标签：php, wikipedia, wikipedia-api, mediawiki-api

我正在使用`Mediawiki api`以从 Wikipedia 页面获取内容。我编写了一个生成下一个查询的代码（例如）：

[http://en.wikipedia.org/w/api.php?action=query&prop=revisions&rvprop=content&rvsection=0&titles=hawaii](http://en.wikipedia.org/w/api.php?action=query&prop=revisions&rvprop=content&rvsection=0&titles=hawaii)

它只检索关于夏威夷的维基百科页面的开头段落。

问题是您可能会注意到有很多不相关的子字符串，例如：

`"[[Molokai|Moloka{{okina}}i]], [[Lanai|Lāna{{okina}}i]], [[Kahoolawe|Kaho{{okina}}olawe]], [[Maui]] and the [[Hawaii (island)|"`.

所有这些括号 [[]] 都不相关，我想知道是否有一种优雅的方法可以从这些页面中只提取“干净”的内容？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-11-12T10:14:01.147

您可以使用以下查询从 Wikipedia 获取干净的 HTML 文本：

[https://en.wikipedia.org/w/api.php?action=query&prop=extracts&titles=hawaii](https://en.wikipedia.org/w/api.php?action=query&prop=extracts&titles=hawaii)

如果你只想要一个纯文本，没有 HTML，试试这个：

[https://en.wikipedia.org/w/api.php?action=query&prop=extracts&titles=hawaii&explaintext](https://en.wikipedia.org/w/api.php?action=query&prop=extracts&titles=hawaii&explaintext)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T18:59:33.657

~~请试试这个：~~

~~$relevant = preg_replace('/[[.*?]]/', '', $string);~~

编辑：刚刚发现[这个](https://github.com/yohasebe/wp2txt#readme)- 希望它有帮助

# javascript - 如何在优化的 requirejs 项目中导入外部文件？

> ID：15910119
> 
> 赞同：1
> 
> 时间：2013-04-09T18:48:22.610
> 
> 标签：javascript, backbone.js, requirejs, r.js

我正在开发一个 RequireJs 项目，我能够在该项目上运行 R.js。我需要从优化器中排除一个配置文件，并能够从优化的 javascript 中读取它。我可以使用以下 app.build.js 解决我的问题的前半部分：

```
({
    appDir: ".",
    baseUrl: "js",
    mainConfigFile: 'js/main.js',
    paths: {
        requireLib: 'libs/require/require-min',
        jqm: 'libs/jqueryMobile/jquery.mobile-1.3.0.min'
    },
    modules: [
       {
           name: "main",
           include: ["requireLib","jqm"],
           excludeShallow: [
                "config/conf"
           ]
       }
   ],
   optimize: "none"
}) 
```

我无法实现的是从 main.js 读取 config/conf 属性（包含所有内容的最终 js）。关于如何解决这个问题的任何想法？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T19:18:47.143

我认为您需要将配置移动到排除部分并将配置添加到路径部分，这样您将构建配置。像这样的东西：

```
 ({
        appDir: ".",
        baseUrl: "js",
        mainConfigFile: 'js/main.js',
        paths: {
            requireLib: 'libs/require/require-min',
            jqm: 'libs/jqueryMobile/jquery.mobile-1.3.0.min',
            config : 'config/conf'
        },
        modules: [
                  {
                    name: "main",
                    exclude : [
                             'config'
                              ]
                  }
                 ],

       optimize: "none"
    }) 
```

# typescript - 使用导入中断扩展内部模块

> ID：15910131
> 
> 赞同：0
> 
> 时间：2013-04-09T18:48:48.800
> 
> 标签：typescript

这是我的场景。我正在跨多个文件定义一个“我的”模块。我使用引用路径包含来包含文件。但是，当我在其中一个文件中使用 import 时，内部模块内的名称不再解析。我需要明确引用模块名称..

**a.ts：**

```
module mine {
    export class A {
    }
} 
```

**e.ts：**我不拥有这个，通常从网上下载）

```
declare module "ext" {
    export var xyz;
}; 
```

**b.ts：**

```
/// <reference path="a.ts" />
/// <reference path="e.ts" />
import ext = module("ext");
module mine {
    export class B extends A {
    }
} 
```

当我使用 'tsc --target ES5 b.ts' 编译 b.ts 时，出现以下错误。

```
E:/Prem/src/redsnake/try/b.ts(5,27): Expected type
E:/Prem/src/redsnake/try/b.ts(5,27): Base type must be interface or class 
```

但是，如果我删除 b.ts 中的 import 语句，一切正常。我的问题是，如何在导入另一个外部模块时扩展一个内部模块。

我添加了 e.ts 作为解释，但从技术上讲，e.ts 可以来自我通过 tsd 获得的外部打字稿定义文件或从 web 下载。我特别关注的问题是 node.js 断言模块。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T19:58:42.313

这是 TypeScript 编译器中的一个错误——您的代码（或至少应该）没问题。该问题刚刚在 0.9 分支中得到解决。

# sql - SSRS - 在我的查询中忽略 SQL 变量

> ID：15910132
> 
> 赞同：6
> 
> 时间：2013-04-09T18:48:54.407
> 
> 标签：sql, reporting-services, parameters

我有一个在 SQL 中运行良好的查询。当我尝试将其引入 SSRS 时，报告要求提供 4 个参数。其中两个参数/变量实际上基于其他两个参数，如下所示：

```
DECLARE @Q int       --SET @Q = 1 -- Quarter 
DECLARE @Year int    --SET @Year = 2013

DECLARE @STARTDATE varchar(10)
SELECT @STARTDATE = D FROM (
    select case @Q
        when 1 then '1/1/' + convert(varchar(10),@Year)
        when 2 then '4/1/' + convert(varchar(10),@Year)
        when 3 then '7/1/' + convert(varchar(10),@Year)
        when 4 then '10/1/' + convert(varchar(10),@Year)
    end as D
    ) sd

DECLARE @ENDDATE varchar(10)
SELECT @ENDDATE = D FROM (
    select case @Q
        when 1 then '3/31/' + convert(varchar(10),@Year)
        when 2 then '6/30/' + convert(varchar(10),@Year)
        when 3 then '9/30/' + convert(varchar(10),@Year)
        when 4 then '12/31/' + convert(varchar(10),@Year)
    end as D
    ) ed

--(ADDITIONAL SQL CONTINUES USING ALL 4 PARAMETERS) ... 
```

如何让 SSRS 只询问前两个参数 ( `@Q`, `@Year`) 并忽略`@StartDate`and ，`@EndDate`因为它们是在查询中计算的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T19:52:24.063

将参数保留在报告中，但给它们一个默认值并将它们设置为隐藏。

当查询运行时，代码将覆盖`@STARTDATE`和`@ENDDATE`值，因此默认值无关紧要。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T19:02:19.050

每当您在 SSRS 中添加 select 语句时，如果您粘贴到 select 语句中，默认情况下通常会为您添加参数，例如：

```
select thing 
from table 
where item = @Parm1 
```

然后它应该在“报表数据”下的报表设计器屏幕上显示“参数”文件夹。如果带有该值的参数不存在，则需要添加它才能使您的主体工作。SSRS 中的参数选择与 SQL 中的不同。您可以在它们自己的部分中定义它们。

如果您希望它忽略两个参数，为什么必须包含它们？这似乎有点违反直觉。你有两个选择：

1.  在声明变量的地方，将参数的“默认值”设置为静态值。

2.  将变量设置为“允许空值”并处理空引用。

编辑（下面有 CTE）：

在 SSRS 你不这样做（一般来说，有时你可能需要一个表变量，这很好或其他静态）：

```
Declare @Var int;

select thing
from table
where item = @Var 
```

你只需这样做：

```
select thing
from table
where item = @Var 
```

然后，您将“参数”作为具有类型和确定性结果的自己的属性来处理。

**我会在 SSRS 的数据集中这样做：**

```
with dates as 
(
select 
case @Q
    when 1 then '1/1/' + convert(varchar(10),@Year)
    when 2 then '4/1/' + convert(varchar(10),@Year)
    when 3 then '7/1/' + convert(varchar(10),@Year)
    when 4 then '10/1/' + convert(varchar(10),@Year)
end as StartDate
,   case @Q
    when 1 then '3/31/' + convert(varchar(10),@Year)
    when 2 then '6/30/' + convert(varchar(10),@Year)
    when 3 then '9/30/' + convert(varchar(10),@Year)
    when 4 then '12/31/' + convert(varchar(10),@Year)
end as EndDate
)
select things 
from mainbodytable, dates  -- CTE reference
where date between StartDate and EndDate -- referenced from CTE above 
```

确保您看到为“Q”和“Year”列出的参数存在于“Parameters”文件夹下，并将它们设置为整数。当用户运行报告时，它会询问这些值，只要它们是范围内的合法值，他们就会确定数据集。EG：它们不是将返回空值的无效值。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-09T19:03:39.287

为查询中未在查询中声明的任何变量添加查询 SSRS 数据集的参数。

但是一旦添加它们，它们并不总是自动删除，因此您可能需要从数据集查询中手动删除它们。

例如，这个查询只会为@ParamOne 创建参数：

```
DECLARE @StartDate, @EndDate DATETIME

SET @StartDate = 'January 1, 2013'
SET @EndDate = 'February 1, 2013'

SELECT
   UserName,
   Action,
   DateOccurred
FROM
   myTable
WHERE
   DateOccurred BETWEEN @StartDate AND @EndDate
AND UserName = @ParamOne 
```

但是 SSRS 可能对大小写很挑剔。确保它们在您的声明和变量的使用之间匹配。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T19:00:12.917

您是否将查询放入存储过程中？（如果你不是，你应该这样做，这只是一个好习惯）。如果您使用 proc，则可以只有两个输入变量，然后根据需要声明尽可能多的其他内部变量。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-02-16T17:20:36.110

将过程包装成一个`nvarchar(max)`变量，然后执行它：

```
declare @statement nvarchar(max)
set @statement='....
'

exec sys.execsql(@statement) 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-04-09T18:54:31.950

我认为这是不可能的，因为 SSRS 创建了一个`dynamic`查询并将所有变量转换为参数。所以 AFAIK 唯一的选择是将查询包装在`stored procedure`

# qt4 - QToolButtons 非扁平按钮样式

> ID：15910137
> 
> 赞同：0
> 
> 时间：2013-04-09T18:49:15.307
> 
> 标签：qt4, qtoolbar, qaction

我正在使用 Qt 小部件 4.8 版。我将 QAction 对象放入 QToolBar。我只显示文本，没有图标。文本显示为扁平，没有轮廓，直到将鼠标悬停在文本上，然后文本显示为一个按钮。我希望该按钮一直显示，而不仅仅是悬停。

我认识到扁平化的外观似乎随处可见，但它总是与图标一起使用。我还认识到 QToolBar 的背景阴影使它很明显它是一个工具栏，因此包含操作。但是，对于我向其展示过应用程序的每个人来说，他们根本看不到那里有任何动作，而且我一直让管理层要求我让它看起来像一个按钮。

我已将 Qt 配置为使用 CleanLooks 样式。不幸的是，这似乎不是由我可以修改的样式表定义的。如果我尝试为 QToolButton 设置样式，则此样式会删除原始样式，而不仅仅是更新单个项目。我需要知道所有原始值才能正确执行此操作。

有什么答案或建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T06:00:29.953

您可以使用`QAction * QToolBar::addWidget ( QWidget * widget )`方法在工具栏上添加*实际*按钮。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-12T18:30:08.237

使用[`QToolBar::widgetForAction`](http://doc.qt.io/qt-5/qtoolbar.html#widgetForAction). 例如：

```
auto toolButton =
    static_cast<QToolButton *>(toolBar->widgetForAction(action));

toolButton->setAutoRaise(false); 
```

从我自己对类似问题的回答：[https ://stackoverflow.com/a/31972514/2507567](https://stackoverflow.com/a/31972514/2507567)

# python - 蟒蛇字母猜谜游戏

> ID：15910144
> 
> 赞同：1
> 
> 时间：2013-04-09T18:49:24.133
> 
> 标签：python, loops

我第一次真正尝试了一个 python 程序——一个字母猜谜游戏。

我已经完成了大部分工作，但我被困在最后一点

我想让游戏在用户回合和 AI 回合之间来回交替，直到世界完全展现。到目前为止，我都很好。在这一点上，我想让正确猜出最多字母的玩家赢得一分。电脑版主又选了一个词，重新开始。第一个获得五分的玩家赢得比赛。

我有一个在用户/AI 轮次之间交替的 while 循环，但是一旦这个词完全公开，我就不能让它正确中断？之后，只需将 userCorrectLetters 的数量与 aiCorrectLetters 的数量进行比较，并使用它来确定谁赢得了这一轮的分数，这应该非常简单。

然后我假设整个事情应该进入一个 while 循环，直到其中一名玩家达到 5 分才会中断。

我遇到的另一件事是如何禁止用户重新猜测已经解决的角色位置。

```
import random

#set initial values
player1points= 0
ai= 0
userCorrectLetters= []
aiCorrectLetters=[]
wrongLetters=[]
wrongPlace= []
correctLetters = []
endGame = False
allLetters = set(list('abcdefghijklmnopqrstuvwxyz'))
alreadyGuessed = set() 
userGuessPosition = 0
availLetters = allLetters.difference(alreadyGuessed)

#import wordlist, create mask
with open('wordlist.txt') as wordList:
    secretWord = random.choice(wordList.readlines()).strip()
print (secretWord)
secretWordLength = len(secretWord)

def displayGame():
    mask = '_'  * len(secretWord)
    for i in range (len(secretWord)):
        if secretWord[i] in correctLetters:
            mask = mask[:i] + secretWord[i] + mask [i+1:]
    for letter in mask:
        print (letter, end='')
    print (' ')
    print ('letters in word but not in correct location:', wrongPlace)
    print ('letters not in word:', wrongLetters)

    ##asks the user for a guess, assigns input to variable

def getUserGuess(alreadyGuessed):

    while True:
        print ('enter your letter')
        userGuess = input ()
        userGuess= userGuess.lower()
        if len(userGuess) != 1:
            print ('please enter only one letter')
        elif userGuess in alreadyGuessed:
            print ('that letter has already been guessed. try again')
        elif userGuess not in 'abcdefjhijklmnopqrstuvwxyz':
            print ('only letters are acceptable guesses. try again.')
        else:
            return userGuess

def newGame():
    print ('yay. that was great. do you want to play again? answer yes or no.')
    return input().lower().startswith('y')

def userTurn(wrongLetters, wrongPlace, correctLetters):
    print ('\n')

    displayGame ()
    print ('which character place would you like to guess. Enter number?')
    userGuessPosition = input ()
    if userGuessPosition not in ('123456789'):
        print ('please enter a NUMBER')
        userGuessPosition = input()
    slice1 = int(userGuessPosition) - 1  

    ##player types in letter
    guess = getUserGuess(wrongLetters + correctLetters)
    if guess== (secretWord[slice1:int(userGuessPosition)]):
        print ('you got it right! ')
        correctLetters.append(guess)
        userCorrectLetters.append(guess)
        displayGame()

    elif guess in secretWord:
            wrongPlace.append(guess) 
            print ('that letter is in the word, but not in that position')
            displayGame()

    else:
            wrongLetters.append(guess)
            print ('nope. that letter is not in the word')
            displayGame()

def aiTurn(wrongLetters,wrongPlace, correctLetters):
    print ('\n')
    print ("it's the computers turn")

    aiGuessPosition = random.randint(1, secretWordLength)

    aiGuess=random.sample(availLetters, 1)
    print ('the computer has guessed', aiGuess, "in position", + aiGuessPosition)
    slice1 = aiGuessPosition - 1
    if str(aiGuess) == (secretWord[slice1:userGuessPosition]):
            correctLetters.append(aiGuess)
            aiCorrectLetters.append(aiGuess)
            print ('this letter is correct ')
            return 
    elif str(aiGuess) in secretWord:
            wrongPlace.append(aiGuess)
            print ('that letter is in the word, but not in that position')
            return

    else:
            wrongLetters.append(aiGuess)
            print ('that letter is not in the word')
            return

wordSolved = False 
while wordSolved == False:

    userTurn(wrongLetters, wrongPlace, correctLetters)
    aiTurn(wrongLetters, wrongPlace, correctLetters)
    if str(correctLetters) in secretWord:
        break 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T19:03:43.110

问题在这里：

```
if str(correctLetters) in secretWord: 
```

您可能期望`str(['a', 'b', 'c'])`返回“abc”，但事实并非如此。它返回`"['a', 'b', 'c']"`。您应该将该行替换为：

```
if "".join(correctLetters) in secretWord: 
```

您的代码还有一个问题，除了这个：假设正确的单词是`foobar`. 如果用户猜出前 5 个字母，但顺序相反，`correctLetters`将为`['a', 'b', 'o', 'o', 'f']`，并且该行将`if "".join(correctLetters) in secretWord:`评估为因为`False`is `'aboof'`not in `'foobar'`。

您可以通过替换为来解决该问题`if "".join(correctLetters) in secretWord:`：

```
if len(correctLetters) > 4: 
```

基本上，一旦用户猜对了 5 个字母，这将结束程序的执行。无需检查字母是否在 中`secretWord`，因为您已经在`userTurn`函数中执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T19:06:01.083

您正在将列表的字符串表示形式与 string 进行`correctLetters`比较`secretWord`。例如：

```
>>> secretWord = 'ab'
>>> correctLetters = ['a','b']
>>> str(correctLetters)
"['a', 'b']"
>>> str(correctLetters) in secretWord
False 
```

尝试将由正确字母组成的字符串与秘密单词进行比较：

```
>>> ''.join(correctLetters) == secretWord
True 
```

# applescript - 使用 Applescript 和 Outlook 2011 对所有人进行重播

> ID：15910146
> 
> 赞同：0
> 
> 时间：2013-04-09T18:49:33.707
> 
> 标签：applescript, outlook-2011

现在我有一个简单的小 AppleScript，它将获取当前选定的消息并为该消息打开一个回复窗口。

我这样做是为了消除回复中的默认签名。出于某种原因，Outlook 2011 没有排除回复签名的选项，但使用此脚本可以关闭签名。

这是我的脚本：

```
tell application "Microsoft Outlook"
    set replyMessage to selection
    set replyMessageSubj to subject of replyMessage
    reply to replyMessage
end tell

tell application "Finder" to activate (every window whose name is "Re: " & replyMessageSubj) 
```

这会打开重播窗口并为我激活它。效果很好，但我想让它全部回复，而不仅仅是回复。

Outlook 2011 的字典说：

```
reply to v : Create a reply message.
reply to message : The message to reply to.
[opening window boolean] : Should the reply message be opened in a window? Default is to show the window.
[reply to all boolean] : Whether to reply to all recipients of the message. Default it to reply to the sender only.
→ message : The reply message. 
```

我有点 AppleScript 新手，找不到一个很好的例子......我如何让这个回复所有？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T18:55:11.093

尝试：

```
tell application "Microsoft Outlook"
    set replyMessage to selection
    set replyMessageSubj to subject of replyMessage
    reply to replyMessage with opening window and reply to all
end tell 
```

# android - Android ActionBar 上的分割线

> ID：15910147
> 
> 赞同：1
> 
> 时间：2013-04-09T18:49:38.820
> 
> 标签：android, split, android-actionbar, line, android-styles

![分割线示例图像](https://i.stack.imgur.com/3Y4BP.jpg)

您可以看到一条分割线（在红色圆圈内），`ActionBar`其中分隔`ActionBar`.
如何在我的 android 中实现这种线`ActionBar`？
我搜索了很多关于分割线的信息，`ActionBar`但没有找到任何答案，所以如果你知道的话，请告诉我用于这种线的术语`ActionBar`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-29T13:39:13.287

要制作分割线，您可以使用：

```
 <ImageButton
    android:id="@+id/verticalline"
    android:layout_width="1dip"
    android:layout_height="100dp"
    android:layout_gravity="center"
    android:adjustViewBounds="false"
    android:background="@android:color/transparent"
    android:clickable="false"
    android:contentDescription=""
    android:src="@android:color/darker_gray"
    android:layout_centerInParent="true"
     /> 
```

或者您可以使用： android:actionBarDivider 为操作项之间的分隔线定义可绘制资源。（在 API 级别 14 中添加。）

来源：http: [//developer.android.com/guide/topics/ui/actionbar.html](http://developer.android.com/guide/topics/ui/actionbar.html)

干杯，

# php - 使用 PDO 查询，没有准备好的语句，来自多个 HTML 输入字段的多个 LIKE 语句

> ID：15910149
> 
> 赞同：2
> 
> 时间：2013-04-09T18:49:45.247
> 
> 标签：php, pdo

我已经成功地获得了在 PDO 中执行和打印的查询，但是我在这里做错了。这个问题的代码的重要部分在最后几块代码中；为了清楚起见，我将第一部分包括在内。

此代码连接到具有多个输入字段的 HTML 表单。PHP 通过在 WHERE 语句中使用 AND 附加来自每个字段的数据来构造查询。

这就是我的想法：我回显了 $query 变量，我可以看到查询的格式正确，但是当我尝试打印查询结果时，没有打印任何结果。

我在这里与使用准备好的语句搏斗，并决定在未能构造具有不同数量参数的准备好的语句后尝试让代码在没有它们的情况下首先工作。在这篇文章的帮助下，我确实尝试过：[LIKE query using multiple keywords from search field using PDOprepared statement](https://stackoverflow.com/questions/13214712/like-query-using-multiple-keywords-from-search-field-using-pdo-prepared-statemen)

所以，暂时搁置准备好的陈述，谁能告诉我我在这里做错了什么？任何帮助将不胜感激。

```
<?php
if(isset($_POST['submit'])) {

// define the list of fields
$fields = array('titleSearch', 'keywordSearch', 'fullSearch', 'fromYear', 'toYear', 
    'fromSeconds', 'toSeconds', 'withSound', 'withColor');
$conditions = array();

// loop through the defined fields
foreach($fields as $field){
    // if the field is set and not empty
    if(isset($_POST[$field]) && $_POST[$field] != '') {
        // create a new condition, using a prepared statement
        $conditions[] = "$field LIKE CONCAT ('%', $_POST[$field], '%')";
    }
}

// build the query
$query = "SELECT keyframeurl, videoid, title, creationyear, sound, color, 
     duration, genre FROM openvideo ";

// if there are conditions defined, append them to the query
if(count($conditions) > 0) {
    $query .= "WHERE " . implode(' AND ', $conditions);
}

//confirm that query formed correctly
echo $query; 

//print query results
foreach ($dbh->query($query) as $row){
   print $row['videoid'].' - '.$row['title'].'<br />';
}
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T18:54:21.120

您忘记了直接插入到查询中的 $_POST 值的引号：

```
$conditions[] = "$field LIKE CONCAT ('%', '$_POST[$field]', '%')";
                                          ^--            ^-- 
```

因此，虽然这将解决您的直接问题，但您仍然对 sql 注入攻击持开放态度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T19:54:31.507

而不是发布您的查询，您必须*运行*它。
这是解决问题的唯一方法

*   Stack Overflow 路人的头脑中没有数据库服务器来运行您的查询。
*   Stack Overflow 路人在他们的脑海中没有您的特定数据库服务器来运行您的查询。

因此，您是唯一一个可以对您的数据库运行查询并询问它出了什么问题的人。

1.  [打开错误报告。](https://stackoverflow.com/tags/pdo/info)确保您可以看到发生的错误。尝试添加故意错误，看看它是否有效。
2.  如果它确实包含所需的值，请仔细检查您的数据库数据。
3.  仔细检查您的输入数据，如果它真的匹配数据库值。
4.  在控制台或 phpadmin 中针对数据库运行您的组装查询。

挖掘一些特定的问题。不要只是坐着等待。问一个问题“我有一个不起作用的代码”没有什么意义。代码必须运行，而不是盯着看。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T18:56:42.693

```
$conditions[] = "$field LIKE CONCAT ('%', $_POST[$field], '%')"; 
```

是罪魁祸首：为标题发送“某事”最终会变成类似

```
WHERE titleSearch LIKE CONCAT('%', something, '%') 
```

但你想要

```
WHERE titleSearch LIKE CONCAT('%', 'something', '%') 
```

有更多的报价。

但是请务必不要将其推广到生产中，因为您可能最终会发布“xxx') OR 1=1; --”只是为了表现的乐趣，或者更糟糕的是，取决于他们的心情。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-09T20:11:15.273

您甚至不需要`CONCAT`内置函数，您可以将整个字符串建模为`$conditions[] = "{$field} LIKE '%{$_POST[$field]}%'"`. 但是如果你不想在短期内面临严重的 SQL 注入攻击，你应该使用准备好的语句。

你为什么不试试这样的东西？（以 PDO 为例）：

```
if ($pdo = new \PDO("mysql:host=localhost;dbname=testdb;charset=utf8", "user", "password")) {
    $fields = ["titleSearch","keywordSearch","fullSearch","fromYear","toYear","fromSeconds","toSeconds","withSound","withColor"];
    $parameters = array_map(function ($input) { return filter_var($input, FILTER_SANITIZE_STRING); }, $fields)
    $conditions = array_map(function ($input) { return (!empty($_POST[$input]) ? "{$input} LIKE ?" : null); }, $fields);
    $query = "SELECT `keyframeurl`,`videoid`,`title`,`creationyear`,`sound`,`color`,`duration`,`genre` FROM `openvideo`" . (sizeof($conditions) > 0 ? " " . implode(" AND ", $conditions) : null);

    if ($statement = $pdo->prepare($query, [\PDO::ATTR_CURSOR => \PDO::CURSOR_FWDONLY])) {
        if ($statement->execute((!empty($parameters) ? $parameters : null))) {
            $result = $statement->fetchAll(\PDO::FETCH_ASSOC);
        }
    }
} 
```

还没有测试过（我现在才想到），但它应该设置 PDO，根据您似乎要寻找的条件准备一个语句，在`execute()`方法中添加参数（预过滤，虽然有**FAR**更好过滤技术）并返回与您的查询相关的所有结果。

即使您决定不使用它，至少也要考虑一下...这是 PDO 的一个很好的起点，当然，还有一个很好的 GET/POST 变量过滤教程（或使用像 HTML 这样的 3rd-party 工具净化器，就此而言）。

希望有帮助；）

# twitter-bootstrap - 将侧边栏导航列表引导到手风琴（错误）

> ID：15910157
> 
> 赞同：0
> 
> 时间：2013-04-09T18:50:09.463
> 
> 标签：twitter-bootstrap, navigation

我有一个侧边栏导航，它只使用引导程序导航列表组件。我想添加功能，当它进入平板电脑/手机时会出现一个按钮，我想扩展列表有点像导航栏组件。当我去实现它时，如果我隐藏我的导航列表并展开回桌面模式，我的列表就消失了。我还想在某个列表上添加一个按钮来创建一个消耗性树。

```
<div class="container">
    <div class="row">
        <div class="span9">
            <h1>Header</h1>
            <div class="row">
                <div class="span3">
                    <div class="leftcolumnheader">
                        <h5>Testing Home1
                            <button class="btn btn-navbar hidden-desktop" id="navlistbtn" data-toggle="collapse" data-target=".nav-collapse1">
                            <i class="icon-th-list"></i>
                            </button>
                        </h5>
                    </div>

                    <div class="nav-collapse1 collapse in" id="sidebarnav">
                        <div class="well well-small ">
                            <ul class="nav nav-list ">
                                <li><a href="#">Object 1</a></li>
                                <li class="divider"></li>
                                <li><a href="#">Object 2</a></li>
                                <li class="divider"></li>
                                <li><a href="#">Object 3</a></li>
                                <li class="divider"></li> 
                            </ul>
                        </div><!--nav-collapse-->
                    </div> <!--well-->  
                </div>
                <div class="span6">
            </div>
        </div>
    </div>
</div> 
```

# regex - Groovy删除对等和父子关系中括号之间的文本

> ID：15910158
> 
> 赞同：1
> 
> 时间：2013-04-09T18:50:10.067
> 
> 标签：regex, groovy

在groovy中，如何删除对等和父子关系中括号之间的文本？比如`a(b(c)d)`退货`a`。并`a(b)c(d)`返回`ac`？

这是我的代码。但它只能处理一种情况。不是都。

```
println name.replaceFirst( /\(.*\)/, '' ) 
println name.replaceAll( /\((.*?)\)/, '' ) 
```

另一种解决方案是检测括号匹配是对等还是父对子，并使用正确的正则表达式。但我不知道怎么做。

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T19:58:31.590

你可以做这种事情，因为正则表达式不会削减它

```
def strip = { status, ch ->
  switch( ch ) {
    case '(': status.depth++ ; break
    case ')': status.depth-- ; break
    default:  status.str += (status.depth ? '' : ch)
  }
  status
}

assert 'a(b(c)d)'.inject( [ str:'', depth:0 ], strip ).str == 'a'
assert 'a(b)c(d)'.inject( [ str:'', depth:0 ], strip ).str == 'ac' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T19:42:31.383

Groovy 使用 Java 正则表达式，Java 正则表达式中没有办法进行一般的括号平衡（只有支持递归正则表达式的正则表达式实现才能做到这一点）。你最好编写一些简单的代码来循环字符串并匹配括号。

如果您假设最大嵌套级别，则可以强制使用正则表达式解决方案。但是，**不**建议使用此解决方案。

*   无嵌套：`\([^()]*\)`
*   [最多嵌套 1 级](http://www.rubular.com/r/zkp0GWyqyU)：`\((?:[^()]*|\([^()]*\))*\)`
*   [最多嵌套 2 层](http://www.rubular.com/r/OfQHWpZVS6)：`\((?:[^()]*|\((?:[^()]*|\([^()]*\))*\))*\)`
*   最多嵌套 n 层：`\((?:[^()]*|`++`<pattern at level n-1>``)*\)`

`\`请注意，当您在字符串文字中指定正则表达式时，您需要转义。

# json - Graylog 服务器无法通过 TCP 读取 Gelf 消息 :: GELFDispatcher - 无法处理 GELF 消息 :: 无法解压缩 GELF 消息有效负载

> ID：15910160
> 
> 赞同：2
> 
> 时间：2013-04-09T18:50:15.420
> 
> 标签：json, tcp, gzipinputstream, graylog2

我正在尝试通过 tcp 将以下 json 写入 graylog 服务器：

```
{"facility":"GELF","file":"","full_message":"Test Message Tcp","host":"FShabesta-12097","level":3,"line":"","short_message":"Test Message Tcp","timestamp":63501046329911952.0,"version":"1.0","_LoggerName":"Test Logger"} 
```

以下是通过网络传输的实际压缩字节：

```
1F-8B-08-00-00-00-00-00-04-00-7D-8C-BB-0E-82-30-14-86-5F-85-9C-19-49-5B-04-53-76-70-41-17-D9-49-25-07-68-D2-52-42-2B-89-31-BE-BB-87-60-1C-DD-FE-EB-F7-82-5E-75-DA-E8-F0-84-02-CE-65-5D-41-0C-BD-36-48-6E-53-0F-63-5A-8B-DE-AB-61-4B-1A-F4-21-BA-EC-36-6A-BA-99-16-A3-F3-81-9A-EA-36-AA-3B-B5-EA-C0-05-93-27-2A-0C-AE-68-A0-48-49-E9-E9-8B-F3-A3-5B-C2-7F-5E-D0-76-C3-D8-19-8A-3C-CD-18-67-C7-3C-15-52-72-2E-33-91-B0-18-56-5C-BC-76-13-9D-79-C2-68-DF-D6-6E-18-70-B9-2A-FB-03-EE-09-BC-3F-55-2B-04-1D-DB-00-00-00 
```

并且 graylog 服务器抛出以下异常：

```
2013-04-08 18:37:21,341 WARN : org.graylog2.inputs.gelf.GELFDispatcher - Could not handle GELF message.
java.lang.IllegalStateException: Failed to decompress the GELF message payload
        at org.graylog2.gelf.GELFMessage.getJSON(GELFMessage.java:150)
        at org.graylog2.gelf.GELFProcessor.messageReceived(GELFProcessor.java:62)
        at org.graylog2.inputs.gelf.GELFDispatcher.messageReceived(GELFDispatcher.java:77)
        at org.jboss.netty.channel.Channels.fireMessageReceived(Channels.java:296)
        at org.jboss.netty.handler.codec.frame.FrameDecoder.unfoldAndFireMessageReceived(FrameDecoder.java:458)
        at org.jboss.netty.handler.codec.frame.FrameDecoder.callDecode(FrameDecoder.java:439)
        at org.jboss.netty.handler.codec.frame.FrameDecoder.messageReceived(FrameDecoder.java:303)
        at org.jboss.netty.channel.Channels.fireMessageReceived(Channels.java:268)
        at org.jboss.netty.channel.Channels.fireMessageReceived(Channels.java:255)
        at org.jboss.netty.channel.socket.nio.NioWorker.read(NioWorker.java:84)
        at org.jboss.netty.channel.socket.nio.AbstractNioWorker.processSelectedKeys(AbstractNioWorker.java:471)
        at org.jboss.netty.channel.socket.nio.AbstractNioWorker.run(AbstractNioWorker.java:332)
        at org.jboss.netty.channel.socket.nio.NioWorker.run(NioWorker.java:35)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)
        at java.lang.Thread.run(Thread.java:722)
Caused by: java.io.EOFException
        at java.util.zip.GZIPInputStream.readUByte(GZIPInputStream.java:264)
        at java.util.zip.GZIPInputStream.readHeader(GZIPInputStream.java:171)
        at java.util.zip.GZIPInputStream.<init>(GZIPInputStream.java:78)
        at java.util.zip.GZIPInputStream.<init>(GZIPInputStream.java:90)
        at org.graylog2.plugin.Tools.decompressGzip(Tools.java:159)
        at org.graylog2.gelf.GELFMessage.getJSON(GELFMessage.java:139)
        ... 15 more
2013-04-08 18:37:21,343 WARN : org.graylog2.inputs.gelf.GELFDispatcher - Could not handle GELF message.
java.lang.IllegalStateException: GELF message is too short. Not even the type header would fit.
        at org.graylog2.gelf.GELFMessage.getGELFType(GELFMessage.java:128)
        at org.graylog2.inputs.gelf.GELFDispatcher.messageReceived(GELFDispatcher.java:67)
        at org.jboss.netty.channel.Channels.fireMessageReceived(Channels.java:296)
        at org.jboss.netty.handler.codec.frame.FrameDecoder.unfoldAndFireMessageReceived(FrameDecoder.java:458)
        at org.jboss.netty.handler.codec.frame.FrameDecoder.callDecode(FrameDecoder.java:439)
        at org.jboss.netty.handler.codec.frame.FrameDecoder.messageReceived(FrameDecoder.java:303)
        at org.jboss.netty.channel.Channels.fireMessageReceived(Channels.java:268)
        at org.jboss.netty.channel.Channels.fireMessageReceived(Channels.java:255)
        at org.jboss.netty.channel.socket.nio.NioWorker.read(NioWorker.java:84)
        at org.jboss.netty.channel.socket.nio.AbstractNioWorker.processSelectedKeys(AbstractNioWorker.java:471)
        at org.jboss.netty.channel.socket.nio.AbstractNioWorker.run(AbstractNioWorker.java:332)
        at org.jboss.netty.channel.socket.nio.NioWorker.run(NioWorker.java:35)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)
        at java.lang.Thread.run(Thread.java:722)
2013-04-08 18:37:21,344 WARN : org.graylog2.inputs.gelf.GELFDispatcher - Could not handle GELF message.
java.lang.IllegalStateException: GELF message is too short. Not even the type header would fit.
        at org.graylog2.gelf.GELFMessage.getGELFType(GELFMessage.java:128)
        at org.graylog2.inputs.gelf.GELFDispatcher.messageReceived(GELFDispatcher.java:67)
        at org.jboss.netty.channel.Channels.fireMessageReceived(Channels.java:296)
        at org.jboss.netty.handler.codec.frame.FrameDecoder.unfoldAndFireMessageReceived(FrameDecoder.java:458)
        at org.jboss.netty.handler.codec.frame.FrameDecoder.callDecode(FrameDecoder.java:439)
        at org.jboss.netty.handler.codec.frame.FrameDecoder.messageReceived(FrameDecoder.java:303)
        at org.jboss.netty.channel.Channels.fireMessageReceived(Channels.java:268)
        at org.jboss.netty.channel.Channels.fireMessageReceived(Channels.java:255)
        at org.jboss.netty.channel.socket.nio.NioWorker.read(NioWorker.java:84)
        at org.jboss.netty.channel.socket.nio.AbstractNioWorker.processSelectedKeys(AbstractNioWorker.java:471)
        at org.jboss.netty.channel.socket.nio.AbstractNioWorker.run(AbstractNioWorker.java:332)
        at org.jboss.netty.channel.socket.nio.NioWorker.run(NioWorker.java:35)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)
        at java.lang.Thread.run(Thread.java:722)
2013-04-08 18:37:21,344 WARN : org.graylog2.inputs.gelf.GELFDispatcher - Could not handle GELF message.
java.lang.IllegalStateException: GELF message is too short. Not even the type header would fit.
        at org.graylog2.gelf.GELFMessage.getGELFType(GELFMessage.java:128)
        at org.graylog2.inputs.gelf.GELFDispatcher.messageReceived(GELFDispatcher.java:67)
        at org.jboss.netty.channel.Channels.fireMessageReceived(Channels.java:296)
        at org.jboss.netty.handler.codec.frame.FrameDecoder.unfoldAndFireMessageReceived(FrameDecoder.java:458)
        at org.jboss.netty.handler.codec.frame.FrameDecoder.callDecode(FrameDecoder.java:439)
        at org.jboss.netty.handler.codec.frame.FrameDecoder.messageReceived(FrameDecoder.java:303)
        at org.jboss.netty.channel.Channels.fireMessageReceived(Channels.java:268)
        at org.jboss.netty.channel.Channels.fireMessageReceived(Channels.java:255)
        at org.jboss.netty.channel.socket.nio.NioWorker.read(NioWorker.java:84)
        at org.jboss.netty.channel.socket.nio.AbstractNioWorker.processSelectedKeys(AbstractNioWorker.java:471)
        at org.jboss.netty.channel.socket.nio.AbstractNioWorker.run(AbstractNioWorker.java:332)
        at org.jboss.netty.channel.socket.nio.NioWorker.run(NioWorker.java:35)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)
        at java.lang.Thread.run(Thread.java:722)
2013-04-08 18:37:21,345 WARN : org.graylog2.inputs.gelf.GELFDispatcher - Could not handle GELF message.
java.lang.IllegalStateException: GELF message is too short. Not even the type header would fit.
        at org.graylog2.gelf.GELFMessage.getGELFType(GELFMessage.java:128)
        at org.graylog2.inputs.gelf.GELFDispatcher.messageReceived(GELFDispatcher.java:67)
        at org.jboss.netty.channel.Channels.fireMessageReceived(Channels.java:296)
        at org.jboss.netty.handler.codec.frame.FrameDecoder.unfoldAndFireMessageReceived(FrameDecoder.java:458)
        at org.jboss.netty.handler.codec.frame.FrameDecoder.callDecode(FrameDecoder.java:439)
        at org.jboss.netty.handler.codec.frame.FrameDecoder.messageReceived(FrameDecoder.java:303)
        at org.jboss.netty.channel.Channels.fireMessageReceived(Channels.java:268)
        at org.jboss.netty.channel.Channels.fireMessageReceived(Channels.java:255)
        at org.jboss.netty.channel.socket.nio.NioWorker.read(NioWorker.java:84)
        at org.jboss.netty.channel.socket.nio.AbstractNioWorker.processSelectedKeys(AbstractNioWorker.java:471)
        at org.jboss.netty.channel.socket.nio.AbstractNioWorker.run(AbstractNioWorker.java:332)
        at org.jboss.netty.channel.socket.nio.NioWorker.run(NioWorker.java:35)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)
        at java.lang.Thread.run(Thread.java:722)
2013-04-08 18:37:21,346 WARN : org.graylog2.inputs.gelf.GELFDispatcher - Could not handle GELF message.
java.lang.IllegalStateException: GELF message is too short. Not even the type header would fit.
        at org.graylog2.gelf.GELFMessage.getGELFType(GELFMessage.java:128)
        at org.graylog2.inputs.gelf.GELFDispatcher.messageReceived(GELFDispatcher.java:67)
        at org.jboss.netty.channel.Channels.fireMessageReceived(Channels.java:296)
        at org.jboss.netty.handler.codec.frame.FrameDecoder.unfoldAndFireMessageReceived(FrameDecoder.java:458)
        at org.jboss.netty.handler.codec.frame.FrameDecoder.callDecode(FrameDecoder.java:439)
        at org.jboss.netty.handler.codec.frame.FrameDecoder.messageReceived(FrameDecoder.java:303)
        at org.jboss.netty.channel.Channels.fireMessageReceived(Channels.java:268)
        at org.jboss.netty.channel.Channels.fireMessageReceived(Channels.java:255)
        at org.jboss.netty.channel.socket.nio.NioWorker.read(NioWorker.java:84)
        at org.jboss.netty.channel.socket.nio.AbstractNioWorker.processSelectedKeys(AbstractNioWorker.java:471)
        at org.jboss.netty.channel.socket.nio.AbstractNioWorker.run(AbstractNioWorker.java:332)
        at org.jboss.netty.channel.socket.nio.NioWorker.run(NioWorker.java:35)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)
        at java.lang.Thread.run(Thread.java:722)
2013-04-08 18:37:21,348 WARN : org.graylog2.inputs.gelf.GELFDispatcher - Could not handle GELF message.
java.lang.IllegalStateException: JSON is null/could not be parsed (invalid JSON)
        at org.graylog2.gelf.GELFProcessor.parse(GELFProcessor.java:89)
        at org.graylog2.gelf.GELFProcessor.messageReceived(GELFProcessor.java:62)
        at org.graylog2.inputs.gelf.GELFDispatcher.messageReceived(GELFDispatcher.java:77)
        at org.jboss.netty.channel.Channels.fireMessageReceived(Channels.java:296)
        at org.jboss.netty.handler.codec.frame.FrameDecoder.unfoldAndFireMessageReceived(FrameDecoder.java:458)
        at org.jboss.netty.handler.codec.frame.FrameDecoder.callDecode(FrameDecoder.java:439)
        at org.jboss.netty.handler.codec.frame.FrameDecoder.messageReceived(FrameDecoder.java:303)
        at org.jboss.netty.channel.Channels.fireMessageReceived(Channels.java:268)
        at org.jboss.netty.channel.Channels.fireMessageReceived(Channels.java:255)
        at org.jboss.netty.channel.socket.nio.NioWorker.read(NioWorker.java:84)
        at org.jboss.netty.channel.socket.nio.AbstractNioWorker.processSelectedKeys(AbstractNioWorker.java:471)
        at org.jboss.netty.channel.socket.nio.AbstractNioWorker.run(AbstractNioWorker.java:332)
        at org.jboss.netty.channel.socket.nio.NioWorker.run(NioWorker.java:35)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)
        at java.lang.Thread.run(Thread.java:722)
2013-04-08 18:37:21,349 WARN : org.graylog2.inputs.gelf.GELFDispatcher - Could not handle GELF message.
java.lang.IllegalStateException: GELF message is too short. Not even the type header would fit.
        at org.graylog2.gelf.GELFMessage.getGELFType(GELFMessage.java:128)
        at org.graylog2.inputs.gelf.GELFDispatcher.messageReceived(GELFDispatcher.java:67)
        at org.jboss.netty.channel.Channels.fireMessageReceived(Channels.java:296)
        at org.jboss.netty.handler.codec.frame.FrameDecoder.unfoldAndFireMessageReceived(FrameDecoder.java:458)
        at org.jboss.netty.handler.codec.frame.FrameDecoder.callDecode(FrameDecoder.java:439)
        at org.jboss.netty.handler.codec.frame.FrameDecoder.messageReceived(FrameDecoder.java:303)
        at org.jboss.netty.channel.Channels.fireMessageReceived(Channels.java:268)
        at org.jboss.netty.channel.Channels.fireMessageReceived(Channels.java:255)
        at org.jboss.netty.channel.socket.nio.NioWorker.read(NioWorker.java:84)
        at org.jboss.netty.channel.socket.nio.AbstractNioWorker.processSelectedKeys(AbstractNioWorker.java:471)
        at org.jboss.netty.channel.socket.nio.AbstractNioWorker.run(AbstractNioWorker.java:332)
        at org.jboss.netty.channel.socket.nio.NioWorker.run(NioWorker.java:35)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)
        at java.lang.Thread.run(Thread.java:722)
2013-04-08 18:37:21,350 WARN : org.graylog2.inputs.gelf.GELFDispatcher - Could not handle GELF message.
java.lang.IllegalStateException: GELF message is too short. Not even the type header would fit.
        at org.graylog2.gelf.GELFMessage.getGELFType(GELFMessage.java:128)
        at org.graylog2.inputs.gelf.GELFDispatcher.messageReceived(GELFDispatcher.java:67)
        at org.jboss.netty.channel.Channels.fireMessageReceived(Channels.java:296)
        at org.jboss.netty.handler.codec.frame.FrameDecoder.unfoldAndFireMessageReceived(FrameDecoder.java:458)
        at org.jboss.netty.handler.codec.frame.FrameDecoder.callDecode(FrameDecoder.java:439)
        at org.jboss.netty.handler.codec.frame.FrameDecoder.messageReceived(FrameDecoder.java:303)
        at org.jboss.netty.channel.Channels.fireMessageReceived(Channels.java:268)
        at org.jboss.netty.channel.Channels.fireMessageReceived(Channels.java:255)
        at org.jboss.netty.channel.socket.nio.NioWorker.read(NioWorker.java:84)
        at org.jboss.netty.channel.socket.nio.AbstractNioWorker.processSelectedKeys(AbstractNioWorker.java:471)
        at org.jboss.netty.channel.socket.nio.AbstractNioWorker.run(AbstractNioWorker.java:332)
        at org.jboss.netty.channel.socket.nio.NioWorker.run(NioWorker.java:35)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)
        at java.lang.Thread.run(Thread.java:722) 
```

写入 UDP 端口时完全相同的消息通过。

负责在线写入字节的 C# 代码片段：

```
public void Send(byte[] bytes, int length, IPEndPoint ipEndPoint)
{
    using (var tcpClient = new TcpClient(ipEndPoint.Address.ToString(), ipEndPoint.Port))
    {
        var stream = tcpClient.GetStream();
        stream.Write(bytes, 0, length);
        stream.Close();
    }
} 
```

任何提示/建议都非常感谢。

Graylog jira[链接](http://jira.graylog2.org/browse/SERVER-293)。 [Github 问题链接](https://github.com/Graylog2/graylog2-server/issues/127)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-12-21T14:43:51.527

关于“通过 TCP 的 GELF”的 Graylog 文档，即使在今天 2018 年版本 2.5 上，也指出：

[在此处输入链接描述](http://docs.graylog.org/en/2.5/pages/gelf.html)

" 目前，GELF TCP 仅支持未压缩和非分块的有效载荷。在同一 TCP 连接中发送时，每条消息都需要用空字节 (\0) 分隔。

（！） 注意力

由于使用空字节 (\0) 作为帧分隔符，GELF TCP 不支持压缩。"

这看起来仍然不支持通过 TCP 在 GELF 上进行压缩

# php - 我的 sql 获取数组

> ID：15910162
> 
> 赞同：-2
> 
> 时间：2013-04-09T18:50:29.823
> 
> 标签：php, mysql, sql, database

我有一个包含以下字段的事务数据库

```
trans_id    prod_id
    1          1
    1          2
    1          3
    2          1
    2          3 
```

我需要将其转换为数组，其中属于同一事务的所有产品都将位于一个数组中，因此我可以使用以下代码对此进行处理，但它似乎不起作用。我在 while 循环的迭代过程中检查了 $value 的长度，它首先显示 2 然后再次显示 2 而不是 3 和 2 整个代码是这样的

```
<?php

// MySQL Database Structure:  
// Name: tree
// Table: node
// Columns:id, parent, child

$con=mysql_CONNECT("localhost","root","");
if (!$con)
{
    die('Could not connect: ' . mysql_error());
}
 mysql_select_db("tree", $con);

 mysql_query("truncate table node");

 $sql="INSERT INTO node (data,parent) VALUES(0,0)"; //first insertion for the root node
 mysql_query($sql);
 $par1=mysql_query("SELECT id FROM node where data=0");
 $par=mysql_fetch_array($par1); 
 //echo $par['id'];
 $abc="";
 for($z=1;$z<=3;$z++)
 {
    $result= mysql_query("SELECT prod_id FROM user_prod WHERE trans_id=".$z);
    while($value=mysql_fetch_array($result))
    {
        $abc.=$value['prod_id'].',';
    }
    $abc=substr($abc,0,-1);
    $par=1;
    $list=explode(',',$abc);
    echo $list;
    $size=count($list);
    echo $size;
    for($i=0;$i<$size;i++)
    {
        $sql="SELECT * FROM node where parent=".$par;
        $result=mysql_query($sql);
        $num=mysql_num_rows($result);
        if($num==0)
        {
            $x="INSERT INTO node (data,parent) VALUES ($list[$i],$par)";//new value at root
            mysql_query($x);
            $par1= mysql_query("SELECT id FROM node where data=$list[$i]");
            $par=mysql_fetch_array($par1);
        }
        else
        {
            while($x=mysql_fetch_array($result))
            {
                if($x['data']==$list[$i])
                {
                    $par1= mysql_query("SELECT id FROM node where data=$list[$i]");
                    $par=mysql_fetch_array($par1);
                    break;
                }
                else
                {
                    $x="INSERT INTO node (data,parent) VALUES ($list[$i],$par[id])";//new value at root
                    mysql_query($x);
                    $par1= mysql_query("SELECT id FROM node where data=$list[$i]");
                    $par=mysql_fetch_array($par1);
                }
            }
        }
    }

$abc="";

}
mysql_close($con);

?> 
```

错误

这段代码似乎工作正常，但我一直得到这个

```
error 
Parse error: syntax error, unexpected T_INC, expecting ')' in C:\xampp\htdocs\new_tree_sql.php on line 37 
```

任何人都可以告诉如何摆脱它并看到所有错误吗？？？？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T18:53:20.177

做

```
$myArray[$value['trans_id']][] = $value['prod_id']; 
```

不行？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T19:02:26.300

您可以使用该功能来做到这一点`mysqli_fetch_assoc($result)`，它比`mysql_fetch_array`根据 php.ini 的特性将被弃用的功能更好。

$query = "你的查询";

```
$link = mysqli_connect("localhost", "my_user", "my_password", "world");
if ($result = mysqli_query($link, $query)) {

//get the associative array with mysqli_fetch_assoc($result)
    while ($row = mysqli_fetch_assoc($result)) {
        printf ("%s (%s)\n", $row["field"], $row["otherfield"]);
    } 
```

就是这样

# asp.net-mvc - 另一个 ASP 到 MVC 迁移 > 路线

> ID：15910164
> 
> 赞同：1
> 
> 时间：2013-04-09T18:50:32.043
> 
> 标签：asp.net-mvc, razor, asp.net-mvc-routing, maproute

将我们的经典 ASP 站点迁移到 ASP.Net 4.5 MVC。我们的网站非常大，有数百个文件，并且经过 SEO 优化。所有 URL 都是 SEO 友好的，通过 web.config，例如：

`www.ourdomain.com/articles/2013/120/the-best-article`

`www.ourdomain.com/blog/2013/122/the-best-blog`

`www.ourdomain.com/video/2013/123/the-best-video`

IE。www.ourdomain.com/{contenttype}/{year}/{id}/{url 编码标题}

要渲染的 ASP 文件存储在 /render/content.asp 之类的文件夹中

我们不想在此迁移中更改任何 URL。MVC 应用程序的新文件将位于现有站点之外的所有新目录中。例如一个视图：/MVC/content.vbhtml

您将如何使用 ActionLink 或其他方式在视图中添加链接，以使用现有的 SEO 友好路径而不是默认路径，而不对视图中链接中的路径进行硬编码（或多或少地从当前 URL 采用）。例如：

@Html.ActionLink("Edit", "Edit", New With {.id = currentItem.ID})

这会创建一个编辑链接，如：/MVC/Edit/120

但是，我想要的是：/article/edit/120。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T19:04:23.013

利用

```
@Html.RouteLink("Edit", "myRouteName", New With { ... route params ... } ); 
```

# firebase - 使用 Firebase 简单登录的用户名（电子邮件/密码）

> ID：15910165
> 
> 赞同：2
> 
> 时间：2013-04-09T18:50:33.617
> 
> 标签：firebase

我正在使用带有电子邮件/密码身份验证的 Firebase 简单登录。我在 /id/username 中存储了一个名为“用户名”的变量，以便每个用户都有一个唯一的名称。但是，用户可以在该位置编辑值并放置现有用户名。有没有办法禁止用户将用户名更改为现有用户名？即，如果 /anyid/username/JOHN 存在，则不允许更改。有没有可以为此写的规则？

先感谢您。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T19:21:50.713

就在这里！您可以简单地拥有一个 .write 规则，要求该位置当前不存在任何数据。例如：

```
{
  "rules" : {
    "$id" : {
      "username" : {
        ".write":"!data.exists()"
      }
    }
  }
} 
```

# vba - 外来字符显示为????? 在 VBA 2003 中，如何设置 UTF-8？

> ID：15910166
> 
> 赞同：2
> 
> 时间：2013-04-09T18:50:37.670
> 
> 标签：vba, ms-access, utf-8, ms-access-2003, non-unicode

我在 Access 2003 中有一个需要使用外语字符的数据库。字符在表格中显示得很好。但是，当 VBA 尝试读取它们时，它无法做到。

例如，cf_Answer 中的 ANSWER_TEXT 列显示：佛吉尼亚海滩

但是 VBA 中的 select 语句：

```
sqlstmt = "SELECT ANSWER_TEXT AS ans_text FROM cf_Answer"
Set rst_a = dbs.OpenRecordset(sqlstmt, dbOpenSnapshot) 
```

`rst_a![ans_text]`返回`??????`。

我知道这与 UTF-8 编码有关，但我找不到设置它的方法。有没有办法在表格中设置它？目前， ANSWER_TEXT 是 datatype `memo`。或者也许有一种方法可以设置 VBA 来理解这些字符？

谁能至少指出我正确的方向？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T20:03:27.983

问题可能是由于您显示该 unicode 文本的位置。

我将这些相同的字符粘贴到表中的文本字段中。在即时窗口中检索它们`DLookup`会导致它们显示为问号，因为即时窗口不会按照您的意愿显示 unicode。

```
? DLookup("some_text", "tblFoo", "id = 1")
?????? 
```

A`MsgBox`也将它们显示为问号。

```
MsgBox DLookup("some_text", "tblFoo", "id = 1") 
```

但是，表单文本框控件确实具有正确处理 unicode 的能力。将文本框绑定到包含这些字符的字段给了我这个......

![带有 Unicode 字符的文本框](https://i.stack.imgur.com/BvZ0E.png)

查询还可以引用 unicode 字符，这在其`WHERE`子句中使用一个，并在数据表视图中打开查询时正确显示它们。

```
SELECT f.id, f.some_text
FROM tblFoo AS f
WHERE (((f.some_text) Like '佛*')); 
```

我怀疑这一切都归结为您尝试使用这些 un​​icode 字符的方式以及显示它们的位置。

在评论中，您说将这些 un​​icode 字符写入文本文件只会产生问号。但是，如果您将 unicode 写入文本文件（如下面的过程）并在能够正确处理 unicode 的编辑器中显示该文件，您将看到在存储它们的表的数据表视图中看到的相同字符. 此屏幕截图显示使用从下面的代码创建的文件打开的写字板。

![显示 Unicode 文本的写字板](https://i.stack.imgur.com/YmGKa.png)

```
Dim objFso As Scripting.FileSystemObject
Dim objFile As Scripting.TextStream

Set objFso = New Scripting.FileSystemObject
Set objFile = objFso.OpenTextFile(CurrentProject.Path & _
    Chr(92) & "unicode.txt", ForWriting, True, TristateTrue)
objFile.Write DLookup("some_text", "tblFoo", "id = 1")
objFile.Close
Set objFile = Nothing
Set objFso = Nothing 
```

# bash - bash 参数扩展/字符串操作的兼容性

> ID：15910169
> 
> 赞同：3
> 
> 时间：2013-04-09T18:50:40.263
> 
> 标签：bash, compatibility

我正在编写一个`bash`脚本，它在整个过程中多次使用像这样的参数扩展：

```
${pathvariable%/*}
${pathvariable##*/} 
```

我需要在一些可能安装了旧版本的盒子上运行这个脚本`bash`。我知道它可以工作，`bash 4.1+`但我想知道它的便携性如何？

*   这种构造在旧版本中会失败`bash`吗？如果有，有哪些版本？
*   我应该考虑一个更便携的结构吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T19:38:49.820

它们是在 POSIX 中定义的（请参见[此处](http://pubs.opengroup.org/onlinepubs/009695399/utilities/xcu_chap02.html#tag_02_06_02)），因此您应该是安全的。

**编辑**：如果您偏执并且不相信 bash 的合规性：

```
$ ./bash --posix
$ echo ${BASH_VERSION}
2.05a.0(1)-release
$ foo="foo/bar"
$ echo "${foo%/*}"
foo
$ echo "${foo##*/}"
bar 
```

`2.05a`于 2001 年左右发布。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T18:56:13.867

这在任何版本的 bash 中都不应该失败，因为它实际上是一个 korn shell 结构。只要您确定您将使用 bash（任何版本）就可以了。

# iphone - 旋转的 UIView 和核心图形的边界

> ID：15910170
> 
> 赞同：1
> 
> 时间：2013-04-09T18:50:41.307
> 
> 标签：iphone, uiview, core-graphics, cgaffinetransform

我有一个 UIView 的子类，它正在绘制一个位置图标。当我将视图旋转几度时，它的边界（使用绿色突出显示`CGContextAddRect`）似乎发生了巨大变化，导致我的绘图看起来失真。

[![](https://i.stack.imgur.com/nrRVY.png)](https://i.stack.imgur.com/nrRVY.png)
[（来源：[bytolution.com](http://bytolution.com/Screenshot%202013.04.09%2016.41.00.png)）]

[![](https://i.stack.imgur.com/2LkQI.png)](https://i.stack.imgur.com/2LkQI.png)
[（来源：[bytolution.com](http://bytolution.com/Screenshot%202013.04.09%2016.41.43.png)）]

这是我的代码：

```
- (void)viewWillAppear:(BOOL)animated {
    [super viewWillAppear:animated];
    self.locationTagView.frame = CGRectMake(40, 80, 240, 240);
    CGAffineTransform transform = CGAffineTransformMakeRotation(DegreesToRadians(30));
    self.locationTagView.transform = transform;
    [self.view addSubview:self.locationTagView];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T19:03:44.837

这修复了它：

```
#define LOCTAG_HEIGHT 240
#define LOCTAG_WIDTH 240

- (void)viewWillAppear:(BOOL)animated {
    [super viewWillAppear:animated];
    self.locationTagView.frame = CGRectMake(40, 80, LOCTAG_WIDTH, LOCTAG_HEIGHT);
    self.locationTagView.bounds = CGRectMake(0, 0, LOCTAG_WIDTH, LOCTAG_HEIGHT);
    CGAffineTransform transform = CGAffineTransformMakeRotation(DegreesToRadians(340));
    self.locationTagView.transform = transform;
    [self.view addSubview:self.locationTagView];
} 
```

[![](https://i.stack.imgur.com/XIHgJ.png)](https://i.stack.imgur.com/XIHgJ.png)
[（来源：[bytolution.com](http://bytolution.com/Screenshot%202013.04.09%2021.02.39.png)）]

单独设置边界使其工作！

# oracle - 用顺序预言机插入

> ID：15910177
> 
> 赞同：0
> 
> 时间：2013-04-09T18:51:01.573
> 
> 标签：oracle, sequence

我在 Oracle 中有以下查询：

```
INSERT INTO table2 
(ID,Name,Address,MOL)
SELECT table2.ID,table2.Name,table2.Address,’sometext’
FROM table2
WHERE table2.ID=1000; 
```

我想在列 ID`sequence`调用*mysequence*时实现此查询。有人知道解决方案吗？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T19:04:20.903

```
INSERT INTO table2 
(ID,Name,Address,MOL)
SELECT mysequence.nextval,table2.Name,table2.Address,’sometext’
FROM table2
WHERE table2.ID=1000; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T19:20:27.860

另一种方法是创建一个插入下一个序列值的触发器：

```
CREATE OR REPLACE TRIGGER myschema.table2_ins_trg
   BEFORE INSERT ON myschema.table2 FOR EACH ROW
   WHEN (New.ID IS NULL) 
BEGIN
  SELECT myschema.mysequence.Nextval INTO :New.ID FROM dual;
END; 
```

然后在插入时省略 ID：

```
INSERT INTO table2 
  (Name, Address, MOL)
SELECT table2.Name, table2.Address, 'sometext'
  FROM table2
 WHERE table2.ID = 1000; 
```

我喜欢这种方法，因为如果我使用 GUI 工具进行插入，我可以将 ID 留空，它会自动填充下一个序列值。

# c - doxygen - 成员之后的文档（///<）不起作用

> ID：15910180
> 
> 赞同：1
> 
> 时间：2013-04-09T18:51:08.710
> 
> 标签：c, doxygen

嘿嘿，

我正在尝试用 doxygen 记录我的 C 代码，但是使用“成员之后的文档”样式似乎对我不起作用。doxygen 文档说：

> ## 在成员之后放置文档
> 
> 如果要记录文件、结构、联合、类或枚举的成员，有时需要将文档块放在成员之后而不是之前。为此，您必须在注释块中添加一个额外的 < 标记。请注意，这也适用于函数的参数。
> 
> 这里有些例子：
> 
> [...]
> 
> 大多数情况下，人们只想在成员后面加上简短的描述。这是按如下方式完成的：
> 
> ```
> int var; //!< Brief description after the member 
> ```
> 
> 或者
> 
> ```
> int var; ///< Brief description after the member 
> ```

最小来源示例：

```
/** @file  test.c */

void foo(void) {
    uint8_t bar; ///< Some random variable
} 
```

我的 Doxyfile[粘贴在这里](http://paste.the-compiler.org/view/50d3e185)。

我没有在文档中获得对变量的一些描述，而是得到以下信息：

> ## 2.1.1 功能文档
> 
> ### 2.1.1.1 无效 foo ( 无效 )
> 
> < 一些随机变量

有人碰巧知道为什么吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-09T18:55:11.390

成员文档语法适用于成员。

成员是类或结构中的值（或者您的语言可能会这样称呼它）。局部变量*不是*成员，因此不被 doxygen 覆盖。

这样做的原因是，通常类的成员对其状态至关重要，因此您迫切希望记录这些，因为派生类可能使用受保护的成员。

另一方面，函数的局部变量不需要此类文档。毕竟，那些是*本地*的。因此，一个函数应该由它的全部可观察行为来定义，因为局部变量对用户来说并不重要：

```
struct object_type{
    struct object_state_type state; ///< the object's state
};

void bad_documentation(void) {
    uint8_t bar; ///< Some random variable
}

/// \brief Initializes the global state of the omnipotence object.
void good_documentation(void) {
    uint8_t bar;

    /** \remark The object needs to be initialized exactly once,
    *           otherwise we have some problems.
    */
    assert(some_global_var != 0);

    /** One can check `some_global_var` whether the global object 
    *   has been initialized
    */
    some_global_var = 1;

    /// Finally, the object going to be initialized.
    impl_obj_state_init(&the_global_object.state);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T18:55:22.613

Doxygen 允许您记录文件、结构、联合、类或枚举的成员。您显示的代码显示了方法的局部变量，而不是其中一个实体的成员。

# python - 在 Python 中调整日期时区的优雅方法

> ID：15910181
> 
> 赞同：4
> 
> 时间：2013-04-09T18:51:09.433
> 
> 标签：python, date, time, timezone, timezone-offset

我住在英国，正在努力应对夏令时 BST 和时区。

这是我的代码：

```
TIME_OFFSET = 1 # 0 for GMT, 1 for BST

def RFC3339_to_localHHMM(input):
                 # Take an XML date (2013-04-08T22:35:00Z)
                 # return e.g. 08/04 23:35
                 return (datetime.datetime.strptime(input, '%Y-%m-%dT%H:%M:%SZ') +
datetime.timedelta(hours=TIME_OFFSET)).strftime('%d/%m %H:%M') 
```

设置这样的变量感觉非常错误，但是如果没有大量代码，我找不到任何优雅的方法来实现上述目标。我是否遗漏了什么，有没有办法（例如）读取系统时区？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T19:04:54.647

要将 UTC 转换为给定时区：

```
from datetime import datetime
import pytz

local_tz = pytz.timezone("Europe/London") # time zone name from Olson database

def utc_to_local(utc_dt):
    return utc_dt.replace(tzinfo=pytz.utc).astimezone(local_tz)

rfc3339s = "2013-04-08T22:35:00Z"
utc_dt = datetime.strptime(rfc3339s, '%Y-%m-%dT%H:%M:%SZ')
local_dt = utc_to_local(utc_dt)
print(local_dt.strftime('%d/%m %H:%M')) # -> 08/04 23:35 
```

另请参阅[如何仅使用 python 标准库将 python utc 日期时间转换为本地日期时间？](https://stackoverflow.com/a/13287083/4279).

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-09T19:12:20.053

您似乎在这里问了几个单独的问题。

首先，如果你只关心自己机器当前的本地时区，你不需要知道它是什么。只需使用本地到 UTC 功能。API 中有一些漏洞，但即使您找不到所需的功能，您也可以通过 POSIX 时间戳和[`fromtimestamp`](http://docs.python.org/2/library/datetime.html#datetime.datetime.fromtimestamp)and`utcfromtimestamp`方法从本地获取到 UT​​C，反之亦然。

如果您希望能够处理*任何时区，请参阅*[文档](http://docs.python.org/2/library/datetime.html)顶部了解感知对象和朴素对象之间的区别，但基本上：感知对象是知道其时区的对象。所以，这就是你需要的。问题是，正如文档所说：

> 请注意，datetime 模块不提供具体的 tzinfo 类。需要任何详细程度的时区支持取决于应用程序。

支持时区的最简单方法是安装和使用第三方库[`pytz`](http://pytz.sourceforge.net)。

同时，正如[`strftime()`Behavior`strptime()`所](http://docs.python.org/2/library/datetime.html#strftime-and-strptime-behavior)解释的那样，`strptime`总是返回一个幼稚的对象。然后，您必须调用[`replace`](http://docs.python.org/2/library/datetime.html#datetime.datetime.replace)和/或`astimezone`（取决于字符串是 UTC 时间还是本地时间）来获取具有正确时区的感知对象。

但是，即使有了这一切，您仍然需要知道您所在的本地时区，这意味着您仍然需要一个常数。换句话说：

```
TIMEZONE = pytz.timezone('Europe/London')
def RFC3339_to_localHHMM(input):
    # Take an XML date (2013-04-08T22:35:00Z)
    # return e.g. 08/04 23:35
    utc_naive = datetime.datetime.strptime(input, '%Y-%m-%dT%H:%M:%SZ')
    utc = utc_naive.replace(pytz.utc)
    bst = utc.astimezone(TIMEZONE)
    return bst.strftime('%d/%m %H:%M') 
```

那么，如何让操作系统为您提供本地时区？嗯，这对于不同的平台是不同的，Python 没有内置的帮助。但是有一些不同的第三方库可以这样做，例如[`dateutil`](http://labix.org/python-dateutil). 例如：

```
def RFC3339_to_localHHMM(input):
    # Take an XML date (2013-04-08T22:35:00Z)
    # return e.g. 08/04 23:35
    utc = datetime.datetime.strptime(input, '%Y-%m-%dT%H:%M:%SZ')
    bst = utc.astimezone(dateutil.tz.tzlocal())
    return bst.strftime('%d/%m %H:%M') 
```

但现在我们绕了一圈。如果您想要的只是本地时区，那么您根本不需要时区（至少对于您的简单用例而言）。因此，仅当您需要支持任何时区并且*还*希望能够（例如，默认为您的本地时区）时才需要这样做（无需为有意识和幼稚的情况编写所有代码的两个副本）。

（此外，如果您`dateutil`首先要使用它，您可能希望将其用于获取时区之外的其他用途——它基本上可以替换您使用`datetime`和所做的一切`pytz`。）

当然，除了这些库之外还有其他选择——搜索 PyPI、Google 和/或 ActiveState 配方。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T23:36:52.267

这是我用来做我认为你想做的事情的功能。这假设输入实际上是一个 gmt，或者更准确地说，一个 utc 日期时间对象：

```
def utc_to_local(utc_dt):
    '''Converts a utc datetime obj to local datetime obj.'''
    t = utc_dt.timetuple()
    secs = calendar.timegm(t)
    loc = time.localtime(secs)
    return datetime.datetime.fromtimestamp(time.mktime(loc)) 
```

正如您所说，这取决于系统时区，正如一些评论所指出的那样，这可能会给您带来不稳定的结果。但是，它在 Windows 上对我来说非常有效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T19:36:17.083

如果您想将 UTC 输入转换为本地时间，无论您在哪个时区，请尝试以下操作：

```
def utctolocal(input):
    if time.localtime()[-1] == 1: st=3600
    else: st=0
    return time.localtime(time.time()-time.mktime(time.gmtime())+time.mktime(time.localtime(time.mktime(time.strptime(input, '%Y-%m-%dT%H:%M:%SZ'))))+st) 
```

相当长的代码，但它只是将 time.gmtime() 和 time.localtime() 之间的差异添加到从输入创建的时间元组中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-03-27T07:04:56.357

一个简单的函数来检查 UCT 是否对应于伦敦的 BST 或 GMT（用于设置上面的 TIME_OFFSET）

```
import datetime

def is_BST(input_date):
    if input_date.month in range(4,9):
        return True
    if input_date.month in [11,12,1,2]:
        return False
    # Find start and end dates for current year
    current_year = input_date.year

    for day in range(25,32):
        if datetime.datetime(current_year,3,day).weekday()==6:
            BST_start = datetime.datetime(current_year,3,day,1)
        if datetime.datetime(current_year,10,day).weekday()==6:
            BST_end = datetime.datetime(current_year,10,day,1)

    if (input_date > BST_start) and (input_date < BST_end):
        return True

    return False 
```

# javascript - 欧芹错误消息类覆盖

> ID：15910185
> 
> 赞同：1
> 
> 时间：2013-04-09T18:51:22.523
> 
> 标签：javascript, twitter-bootstrap, parsley.js

我正在使用带有引导程序的 parsley.js，并且我正在尝试更改其错误消息的类（根据他们的文档），但它似乎不起作用。没有错误消息，但也没有更改。

JS在这里：

```
$('#userForm').parsley({ successClass: 'alert alert-success', errorClass: 'alert alert-error' }); 
```

形式基本上只是：

```
<form class="form-horizontal" id="userForm" action="<?php echo $_SERVER['PHP_SELF']; ?>" method="POST" data-validate="parsley" data-focus="first">
<input type="text"id="firstName" name="firstName" placeholder="" class="input-xlarge" data-trigger="change" data-required="true">
<input class="btn btn-primary btn-success" type="submit" name="submit" id="newUserSubmit" value="Sign In">
</form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T20:07:18.743

尝试`data-validate="parsley"`从表单标签中删除，正如我在他们的文档中看到的那样：

> 警告：您必须删除表单 DOM 中的 data-validate="parsley" 自动绑定代码，以允许您覆盖默认处理并完全从 javascript 中使用 Parsley。

事情应该会奏效。

# c# - 程序集版本匹配如何准确工作？

> ID：15910188
> 
> 赞同：11
> 
> 时间：2013-04-09T18:51:26.760
> 
> 标签：c#, .net

假设我在 GAC 中有版本为 1.1.1.5、1.1.5.1、1.1.6.2、1.2.1.1 和 2.1.2.1 的程序集。我的应用程序有 1.1.3.0 版本的参考。哪个程序集将在运行时匹配？装配匹配的实际规则是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-09T18:55:26.700

如果您的参考需要特定版本，默认情况下，它会在程序集加载时失败，因为该版本不存在。

但是，这可以通过[Assembly Binding Redirection](http://msdn.microsoft.com/en-us/library/2fc472t2.aspx)进行配置。这里有多种选择，包括：

*   该参考可以说它不关心版本控制，在这种情况下加载最新的。
*   您可以通过指定如何重定向绑定的方式[配置您的应用程序。](http://msdn.microsoft.com/en-us/library/433ysdt1.aspx)
*   GAC 中的程序集可以使用指定如何处理此[问题的发布者策略进行设置。](http://msdn.microsoft.com/en-us/library/dz32563a.aspx)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-08-11T16:24:11.257

> 哪个程序集将在运行时匹配？

没有一个会匹配，你的程序会爆炸。

Version 类的文档*一般性地*讨论了如何选择版本号。是的，您通常认为内部版本号的更改是非破坏性更改。并且在修订中进行更改是低风险的。选择 [AssemblyFileVersion] 时要考虑的事项。

但是，默认的 CLR 策略并*没有*实现对 [AssemblyVersion] 的这种解释，它坚持**完全**匹配。只有当它找到您编译程序所用的完全相同的 DLL 时，它才会感到高兴。这通常不难保证。您可以覆盖此策略并使其更弱，尽管您应该始终三思而后行。源代码中精心设计的*微小*更改由来已久，但在实践中并没有那么好。微软非常了解的东西，必须维护持续*数十年*的代码。CLR 中针对 DLL Hell 的默认对策非常困难。正如他们应该的那样。把它交给你。

# c++ - 如何在 cpp 中为 https 支持设置 curl

> ID：15910193
> 
> 赞同：1
> 
> 时间：2013-04-09T18:51:36.167
> 
> 标签：c++, curl, cryptography, openssl, libcurl

我设法在我的程序中运行`curl`，但是当我尝试建立连接`http`时我失败了。`https`

我总是会以`unsupported protocol`错误告终。

```
 if( vinfo->features & CURL_VERSION_SSL )
 {
     f << "LIBCURL: SSL Support Enabled\n" << endl;
 } 
```

不会被触发。我正在使用带有 SSL 支持的预编译 curl 版本（我猜）

`Win32 2000/XP 7.29.0 libcurl SSL Günter Knauf 3.29 MB`使用来自[http://curl.haxx.se/download.html](http://curl.haxx.se/download.html) / 直接的curl ：http: [//curl.haxx.se/gknw.net/7.29.0/dist-w32/curl-7.29.0-devel-mingw32 。压缩](http://curl.haxx.se/gknw.net/7.29.0/dist-w32/curl-7.29.0-devel-mingw32.zip)

谢谢您的帮助

# android - 使用 OpenCV 进行 Android 编程 - 应用程序崩溃

> ID：15910197
> 
> 赞同：0
> 
> 时间：2013-04-09T18:51:50.393
> 
> 标签：android, eclipse, opencv, image-processing, crash

我对 Android 编程和 OpenCV 还是很陌生。我采用了随软件包一起提供的 OpenCV 示例之一（教程 2 - 混合处理）并尝试修改一些图像转换，但尽管我的更改很小，但在我编译并在我的 Galaxy Note 上安装更改后的示例（4.1 .2) 程序不会运行。打开应用程序后，屏幕变黑，片刻后，我收到应用程序已停止的消息。

请注意，当我编译和安装未更改的示例时，应用程序运行没有任何问题。

我将完整的包上传到我的网站 [http://cheaib.de/Tutorial2Activity.rar](http://cheaib.de/Tutorial2Activity.rar)

这是代码

```
package org.opencv.samples.tutorial2;

import org.opencv.android.BaseLoaderCallback;
import org.opencv.android.CameraBridgeViewBase.CvCameraViewFrame;
import org.opencv.android.LoaderCallbackInterface;
import org.opencv.android.OpenCVLoader;
import org.opencv.core.CvType;
import org.opencv.core.Mat;
import org.opencv.android.CameraBridgeViewBase;
import org.opencv.android.CameraBridgeViewBase.CvCameraViewListener2;
import org.opencv.imgproc.Imgproc;

import android.app.Activity;
import android.os.Bundle;
import android.util.Log;
import android.view.Menu;
import android.view.MenuItem;
import android.view.WindowManager;

public class Tutorial2Activity extends Activity implements CvCameraViewListener2 {
private static final String    TAG = "OCVSample::Activity";

private static final int       VIEW_MODE_THRES1     = 0;
private static final int       VIEW_MODE_GRAY     = 1;
private static final int       VIEW_MODE_CANNY    = 2;
private static final int       VIEW_MODE_CANNY2 = 5;

private int                    mViewMode;
private Mat                    mRgba;
private Mat                    mIntermediateMat;
private Mat                    mGray;
private Mat                    mTemp1;

private MenuItem               mItemPreviewThres1;
private MenuItem               mItemPreviewGray;
private MenuItem               mItemPreviewCanny;
private MenuItem               mItemPreviewCanny2;

private CameraBridgeViewBase   mOpenCvCameraView;

private BaseLoaderCallback  mLoaderCallback = new BaseLoaderCallback(this) {
    @Override
    public void onManagerConnected(int status) {
        switch (status) {
            case LoaderCallbackInterface.SUCCESS:
            {
                Log.i(TAG, "OpenCV loaded successfully");

                // Load native library after(!) OpenCV initialization
                System.loadLibrary("mixed_sample");

                mOpenCvCameraView.enableView();
            } break;
            default:
            {
                super.onManagerConnected(status);
            } break;
        }
    }
};

public Tutorial2Activity() {
    Log.i(TAG, "Instantiated new " + this.getClass());
}

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    Log.i(TAG, "called onCreate");
    super.onCreate(savedInstanceState);
    getWindow().addFlags(WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON);

    setContentView(R.layout.tutorial2_surface_view);

    mOpenCvCameraView = (CameraBridgeViewBase) findViewById    (R.id.tutorial2_activity_surface_view);
    mOpenCvCameraView.setCvCameraViewListener(this);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    Log.i(TAG, "called onCreateOptionsMenu");
    mItemPreviewThres1 = menu.add("Preview Thres1");
    mItemPreviewGray = menu.add("Preview Gray");
    mItemPreviewCanny = menu.add("Preview Canny");
    mItemPreviewCanny2 = menu.add("Preview Canny2");
    return true;
}

@Override
public void onPause()
{
    super.onPause();
    if (mOpenCvCameraView != null)
        mOpenCvCameraView.disableView();
}

@Override
public void onResume()
{
    super.onResume();
    OpenCVLoader.initAsync(OpenCVLoader.OPENCV_VERSION_2_4_3, this, mLoaderCallback);
}

public void onDestroy() {
    super.onDestroy();
    if (mOpenCvCameraView != null)
        mOpenCvCameraView.disableView();
}

public void onCameraViewStarted(int width, int height) {
    mRgba = new Mat(height, width, CvType.CV_8UC4);
    mIntermediateMat = new Mat(height, width, CvType.CV_8UC4);
    mGray = new Mat(height, width, CvType.CV_8UC1);
    mTemp1 = new Mat(height, width, CvType.CV_8UC1);
}

public void onCameraViewStopped() {
    mRgba.release();
    mGray.release();
    mIntermediateMat.release();
    mTemp1.release();
}

public Mat onCameraFrame(CvCameraViewFrame inputFrame) {
    final int viewMode = mViewMode;
    switch (viewMode) {
    case VIEW_MODE_GRAY:
        // input frame has gray scale format
        Imgproc.cvtColor(inputFrame.gray(), mRgba, Imgproc.COLOR_GRAY2RGBA, 4);
        break;
    case VIEW_MODE_THRES1:
        // input frame has gray scale format
        Imgproc.threshold(inputFrame.gray(), mTemp1, 150, 255, 0);
        Imgproc.cvtColor(mTemp1, mRgba, Imgproc.COLOR_GRAY2RGBA, 4);
        break;
    case VIEW_MODE_CANNY:
        // input frame has gray scale format
        mRgba = inputFrame.rgba();
        Imgproc.Canny(inputFrame.gray(), mIntermediateMat, 80, 100);
        Imgproc.cvtColor(mIntermediateMat, mRgba, Imgproc.COLOR_GRAY2RGBA, 4);
        break;
    case VIEW_MODE_CANNY2:
        // input frame has gray scale format
        Imgproc.threshold(inputFrame.gray(), mTemp1, 150, 255, 0);
        mRgba = inputFrame.rgba();
        Imgproc.Canny(mTemp1, mIntermediateMat, 80, 100);
        Imgproc.cvtColor(mTemp1, mRgba, Imgproc.COLOR_GRAY2RGBA, 4);
        break;
    }

    return mRgba;
}

public boolean onOptionsItemSelected(MenuItem item) {
    Log.i(TAG, "called onOptionsItemSelected; selected item: " + item);

    if (item == mItemPreviewThres1) {
        mViewMode = VIEW_MODE_THRES1;
    } else if (item == mItemPreviewGray) {
        mViewMode = VIEW_MODE_GRAY;
    } else if (item == mItemPreviewCanny) {
        mViewMode = VIEW_MODE_CANNY;
    } else if (item == mItemPreviewCanny2) {
        mViewMode = VIEW_MODE_CANNY2;
    }

    return true;
}

//public native void FindFeatures(long matAddrGr, long matAddrRgba);
} 
```

我希望你能帮助我找出应用程序崩溃的原因。Eclipse 没有给我任何错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-18T17:16:04.277

您是否使用 NDK 编译过 C++ 文件？混合处理和人脸检测需要先编译 JNI 中的 C++ 文件。

# .net - WCF Rest服务不在浏览器中返回数据

> ID：15910199
> 
> 赞同：1
> 
> 时间：2013-04-09T18:51:59.983
> 
> 标签：.net, wcf, web-services

我有一个返回简单字符串的 REST 服务。当我使用 WCF 测试客户端时，服务返回预期值，但是当我使用浏览器访问服务时，页面变为空。有任何想法吗？所有代码如下。

CUCC.svc.cs

```
 public class CUCC : ICUCC
{
    public string AllAtms(string serviceKey)
    {
        //return new XElement("AllAtms") ;
        return "test";
    }

    //public XElement AllOrganizationAtms(string serviceKey, int organizationId)
    //{
    //    return new XElement("AllOrganizationAtms");
    //}
} 
```

ICUCC.cs

```
[ServiceContract]
public interface ICUCC
{
    [OperationContract]
    [WebInvoke(Method = "GET",
        ResponseFormat = WebMessageFormat.Xml,
        BodyStyle = WebMessageBodyStyle.Wrapped,
        UriTemplate = "AllAtms/{serviceKey}")]
    string AllAtms(string serviceKey);

    //[OperationContract]
    //[WebInvoke(Method = "GET",
    //    ResponseFormat = WebMessageFormat.Xml,
    //    BodyStyle = WebMessageBodyStyle.Wrapped,
    //    UriTemplate = "AllAtms/{serviceKey}/{organizationId}")]
    //XElement AllOrganizationAtms(string serviceKey, int organizationId);
} 
```

网络配置

```
<configuration>
  <configSections>
    <!-- For more information on Entity Framework configuration, visit http://go.microsoft.com/fwlink/?LinkID=237468 -->
    <section name="entityFramework" type="System.Data.Entity.Internal.ConfigFile.EntityFrameworkSection, EntityFramework, Version=4.4.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" requirePermission="false" />
  </configSections>
  <appSettings />
  <system.web>
    <compilation debug="true" targetFramework="4.0">
      <assemblies>
        <add assembly="System.Data.Entity, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" />
      </assemblies>
    </compilation>
    <httpRuntime />
  </system.web>
  <system.serviceModel>
    <services>
      <service name="CUCC.AllAtms" behaviorConfiguration="ServiceBehaviour">
        <endpoint address="" binding="webHttpBinding" contract="CUCC.AllAtms" behaviorConfiguration="web"></endpoint>
      </service>
    </services>
    <behaviors>
      <serviceBehaviors>
        <behavior name="ServiceBehaviour">
          <serviceMetadata httpGetEnabled="true" httpsGetBinding="true"/>
          <serviceDebug includeExceptionDetailInFaults="false"/>
        </behavior>
        <behavior>
          <!-- To avoid disclosing metadata information, set the values below to false before deployment -->
          <serviceMetadata httpGetEnabled="true" httpsGetEnabled="true" />
          <!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information -->
          <serviceDebug includeExceptionDetailInFaults="false" />
        </behavior>
      </serviceBehaviors>
      <endpointBehaviors>
        <behavior name="web">
          <webHttp/>
        </behavior>
      </endpointBehaviors>
    </behaviors>
    <protocolMapping>
      <add binding="basicHttpsBinding" scheme="https" />
    </protocolMapping>
    <serviceHostingEnvironment aspNetCompatibilityEnabled="false" multipleSiteBindingsEnabled="true" />
  </system.serviceModel>
  <system.webServer>
    <modules runAllManagedModulesForAllRequests="true" />
    <!--
        To browse web app root directory during debugging, set the value below to true.
        Set to false before deployment to avoid disclosing web app folder information.
      -->
    <directoryBrowse enabled="true" />
  </system.webServer>
</configuration> 
```

## 更新

抱歉，忘记包含我正在使用的网址。

```
http://localhost:51870/CUCC.svc/AllAtms/testing 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T20:30:55.357

问题在这里：

```
 <service name="CUCC.AllAtms" behaviorConfiguration="ServiceBehaviour">
    <endpoint address="" binding="webHttpBinding" contract="CUCC.AllAtms" behaviorConfiguration="web"></endpoint>
  </service> 
```

该服务定义声称在 CUCC 命名空间中有一个名为 AllAtms 的服务；但没有这样的服务。当您使用 svc 文件的 URI 调用服务时，IIS 会尝试查找与您正在使用的服务的实际名称匹配的服务定义。IIS 从 svc 文件中获取服务的正确名称，但找不到与正确服务名称匹配的服务配置，因此它返回 HTTP 400（错误请求）。您可以使用 Fiddler 轻松查看此结果。

服务名应该是实现类的命名空间限定名，契约应该是接口的命名空间限定名。例如：

```
 <service name="StackOverflow15910199.CUCC">
    <endpoint address="" binding="webHttpBinding" contract="StackOverflow15910199.ICUCC" behaviorConfiguration="web" />
  </service> 
```

必须是与此服务关联的 WCF 库项目在其 App.config 文件中具有正确定义的服务和端点，这就是 WCF 测试客户端工作的原因。测试客户端不应该使用您发布的服务配置。

# java - 用 eclipse 编译 servlet 和 GWT

> ID：15910200
> 
> 赞同：0
> 
> 时间：2013-04-09T18:52:00.530
> 
> 标签：java, eclipse, gwt, servlets

我目前有一个 eclipse GWT 项目，它在开发模式下运行良好，如果我将 WAR 部署到 tomcat。到目前为止，所有客户端代码都变成了 javascript。我使用 google 的 eclipse web 应用程序项目向导启动了这个项目，只选择了 GWT。

我想添加一些 RPC（和其他 servlet）以在服务器上运行。我熟悉 GWT 和 AppEngine 的 eclipse 项目，我想保持相同的客户端、服务器、共享包。这些项目似乎同时运行用于服务器代码的 java 编译器和用于 GWT 代码的 GWT 编译器。我如何设置 Eclipse 以便它模仿这种行为，而不是用于在 tomcat 上运行的 servlet 和 GWT？我不需要它来部署战争文件（但在开发模式下工作将是一个主要优点）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T08:42:40.020

您需要`GWT`为生产模式编译您的应用程序。

如果您使用 Google Plugin for Eclipse，您可以通过单击 GWT Compile Project 按钮来编译您的应用程序![在此处输入图像描述](https://i.stack.imgur.com/feFKE.png)

你应该看到类似的输出

```
 [java] Compiling module com.mycompany.sample.Hello
     [java]    Compiling 5 permutations
     [java]       Permutation compile succeeded
     [java]    Linking into war
     [java]       Link succeeded
     [java]    Compilation succeeded -- 20.313s

build:

BUILD SUCCESSFUL Total time: 22 seconds 
```

编译成功完成后，将创建包含项目的 JavaScript 实现的目录。

阅读更多：

*   [https://developers.google.com/web-toolkit/doc/latest/DevGuideCompilingAndDebugging#DevGuideJavaToJavaScriptCompiler](https://developers.google.com/web-toolkit/doc/latest/DevGuideCompilingAndDebugging#DevGuideJavaToJavaScriptCompiler)
*   [https://developers.google.com/web-toolkit/doc/latest/DevGuideDeploying#DevGuideDeployingWebServer](https://developers.google.com/web-toolkit/doc/latest/DevGuideDeploying#DevGuideDeployingWebServer)

# php - PHP mail() 将图像加载到电子邮件，而无需单击“加载所有图像”

> ID：15910204
> 
> 赞同：0
> 
> 时间：2013-04-09T18:52:06.847
> 
> 标签：php, image, email, html-email, email-attachments

当我创建电子邮件并在电子邮件正文中发送图像时，大多数电子邮件客户端都会让您单击“加载所有图像”，我希望它像来自任何其他公司的普通电子邮件一样自动加载。就像一个 html 电子邮件。此图像托管在外部网站上，大小约为 500kb-1.5mb，大小约为 900x1200。我怎样才能做到这一点？它只是一个标题问题吗？

```
$from = "";
$headers = "From:" . $from ."\r\n";
$headers .= 'MIME-Version: 1.0' . "\r\n";
$headers .= 'Content-type: text/html; charset=iso-8859-1' . "\r\n";

$to = "";
$subject =  "";
$subject = html_entity_decode($subject, ENT_QUOTES, 'UTF-8');

    $message = '<html><head>';
    $message .='</head><body>';
    $message .='<img src="http://i45.tinypic.com/2qjkb2u.jpg"/>';
    $message .= '</body></html>';

mail($to,$subject,$message,$headers); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T18:53:12.303

您无法强制执行此操作，因为它不在您的控制范围内。电子邮件客户端默认不加载图像以保护其用户的隐私。（垃圾邮件发送者可以使用图像跟踪电子邮件地址。图像是通过服务器端脚本加载的，该脚本确认电子邮件已被接收和查看。然后垃圾邮件发送者知道电子邮件地址有效且处于活动状态）。这就是为什么它需要用户采取主动行动来实际查看电子邮件中的图像。

# matlab - 以编程方式区分脚本和函数

> ID：15910210
> 
> 赞同：6
> 
> 时间：2013-04-09T18:52:26.893
> 
> 标签：matlab, function

给定文件名，如何以编程方式区分 MATLAB 中的脚本和函数？

如果我尝试将参数传递给脚本，我会得到`Attempt to execute SCRIPT somescript as a function:`. 有没有办法在不尝试执行的情况下检测到它？

* * *

**更新：**正如@craq 指出的那样，在发布此问题后不久，MATLAB Central 上有一篇关于此的文章：http: [//blogs.mathworks.com/loren/2013/08/26/what-kind-of-matlab -文件是这个/](http://blogs.mathworks.com/loren/2013/08/26/what-kind-of-matlab-file-is-this/)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-09T19:52:32.800

没有找到干净的解决方案，但您可能可以使用`try-catch`（如@Ilya 建议的那样）和`nargin`

**编辑**-`function`用于避免一些命名冲突；用于`exist`进一步分类输入（例如 MEX 文件）

```
function is_script = is_a_script( varargin )
% is_a_script( varargin ) returns one of the following:
%   1: if the input is a script
%   0: if the input is a function
%  -1: if the input is neither a function nor a script.

is_script = 0;
switch( exist(varargin{1}) )
    case 2
        % If the input is not a MEX or DLL or MDL or build-in or P-file or variable or class or folder,
        % then exist() returns 2
        try
            nargin(varargin{1});
        catch err
            % If nargin throws an error and the error message does not match the specific one for script, then the input is neither script nor function.
            if( strcmp( err.message, sprintf('%s is a script.',varargin{1}) ) )
                is_script = 1;
            else
                is_script = -1;
            end
        end
    case {3, 4, 5, 6} % MEX or DLL-file, MDL-file, Built-in, P-file
        % I am not familiar with DLL-file/MDL-file/P-file. I assume they are all considered as functions.
        is_script = 0;
    otherwise % Variable, Folder, Class, or other cases 
        is_script = -1;
end 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-06T21:26:04.213

如果您愿意使用半文档化功能，可以尝试以下方法：

```
function tf = isfunction(fName)
    t = mtree(fName, '-file');
    tf = strcmp(t.root.kind, 'FUNCTION');
end 
```

这与[MATLAB Cody](http://www.mathworks.com/matlabcentral/fileexchange/34754-calculate-size)和[Contests](http://www.mathworks.com/matlabcentral/contest/contests/36/rules#Node%20Count)中用于测量代码长度的函数相同。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-09T19:53:02.973

这有点 hack，但是……`true`如果参数是函数，`false`如果不是函数，则返回一个函数。可能有一些例外情况不起作用 - 我期待着评论。

**编辑**- 捕捉函数在 mex 文件中的情况......

```
function b = isFunction(fName)
% tries to determine whether the entity called 'fName'
% is a function or a script
% by looking at the file, and seeing if the first line starts with 
% the key word "function"
try
    w = which(fName);
    % test for mex file:
    mx = regexp(w, [mexext '$']);
    if numel(mx)>0, b = true; return; end

    % the correct thing to do... as shown by YYC
    % if nargin(fName) >=0, b = true; return; end

    % my original alternative:
    fid = fopen(w,'r'); % open read only
    while(~feof(fid))
        l = fgetl(fid);
        % strip everything after comment
        f = strtok(l, '%');
        g = strtok(f, ' ');
        if strcmpi(g, 'function'), b=true; break; end
        if strlen(g)>0, b=false; break; end
    end
    fclose(fid);
catch
    fprintf(1, '%s not found!\n');
    b = false;
end 
```

# node.js - 在断开连接事件中找不到 Socket.io 套接字属性，node.js

> ID：15910213
> 
> 赞同：0
> 
> 时间：2013-04-09T18:52:48.070
> 
> 标签：node.js, socket.io

我有一个小而烦人的问题，我找不到解决方案。

在服务器端我有这个：

```
...
socket.on('join', function (name) 
{
    console.log("Joining: "+name);
    socket.userName = sanitize(name);
}
socket.on('msg', function(m)
{
    console.log(socket.userName+" says: "+m);//This works
});

socket.on('disconnect', function(socket) 
{
    console.log(socket.userName+" has disconnected");//This does not work  
});
... 
```

问题是`socket.userName`我的所有`.on`方法**都**可以使用`socket.on('disconnect',...`

我得到`undefined`了 userName 属性。

* * *

这根本不可能吗？如果这不是最佳实践，请告诉我。我对 node.js 很陌生

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T18:55:32.443

我不认为`disconnect`事件是通过参数传递的，所以你实际上是在破坏你的`socket`变量。只需为其处理程序使用一个空参数列表：

```
socket.on('disconnect', function() 
{
  console.log(socket.userName+" has disconnected");
}); 
```

# image-processing - 将相似图像与照片进行比较——检测差异，图像差异

> ID：15910215
> 
> 赞同：6
> 
> 时间：2013-04-09T18:52:53.650
> 
> 标签：image-processing, language-agnostic, computer-vision

这种情况与我已经找到的任何问题都不同，如下所示：*如果我拍了两张相似图像的照片，我希望能够突出两张图像中的不同特征。*比如下面两半的儿童点差游戏：

![差的一半](https://i.stack.imgur.com/tJKoS.png) ![发现差异的右半部分](https://i.stack.imgur.com/0yVih.png)

图像中的差异将是位丢失/添加和/或颜色变化，以及通过逐个像素比较更聪明的方法可以从原始图像文件中轻松检测到的差异类型。然而，事实上它们会受到光线波动和摄影不精确的影响，我需要一个更宽松/更聪明的算法。

如您所见，如果叠加，图像不一定会完美排列。

这个问题被标记为与语言无关，因为我希望答案能够将我指向相关算法，但是如果它们存在，我也会对当前的实现感兴趣，特别是在 Java、Ruby 或 C 中。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-10T10:35:36.477

以下方法应该有效。所有这些功能都在 OpenCV 中可用。看看[这个](http://code.opencv.org/projects/opencv/repository/revisions/master/raw/samples/cpp/tutorial_code/features2D/SURF_Homography.cpp)计算单应性的例子。

*   使用角点检测器检测两个图像中的关键点。
*   提取关键点的描述符（SIFT/SURF）。
*   匹配关键点并使用 RANSAC 计算单应性，将第二张图像与第一张图像对齐。
*   将单应性应用于第二个图像，使其与第一个图像对齐。
*   现在只需计算两个图像之间的像素差异，差异图像将突出显示从第一个到第二个发生变化的所有内容。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-09T19:05:52.673

我的一般方法是使用光流来对齐两个图像，并在它们对齐后执行逐像素比较。

但是，对于具体情况，如果两个图像像您的情况一样明显不同，则标准光流（OpenCV 等）可能会失败。如果这确实失败了，那么即使图像完全不同，最近的光流技术也应该可以工作。例如，您可能想查看[Ce Liu 等人关于 SIFT 流](http://people.csail.mit.edu/celiu/SIFTflow/SIFTflow.pdf)的论文，该论文通过稀疏对应解决了这个问题。

# mysql - DAO MVC：为什么我的课不是 POJO

> ID：15910216
> 
> 赞同：0
> 
> 时间：2013-04-09T18:52:54.880
> 
> 标签：mysql, jsp, jpa, persistence, pojo

我使用 DAO MVC，经过一番谷歌搜索后，我考虑将一些变量存储为**java 中的 Enum**和**MySQL 中的 String**。所以我在 Item.java 中创建（将持久化到 Item 表中）静态初始化和静态方法将 Enum 转换为 String，反之亦然。但是有人说我在这个静态初始化和静态方法之后，我的 Item.java 类变成了 NOT POJO。

**问题**：

1.  为什么它变成了 NOT POJO？
2.  如果我让那些方法不是静态的 Item.java 类将是 POJO？

**编辑**：我的代码：

```
package model;

import java.util.EnumMap;
import java.util.HashMap;
import java.util.Map;

public class Order {

    public enum OrderStatus {
        NOT_REVIEWED,
        APPROVED,
        REJECTED,
        RETURNED
    } 

    // ==================
    // =   Transient    = 
    // ==================
    private static final Map<String, OrderStatus> convertStringToOrderStatusMap = new HashMap<String, OrderStatus>(3);
    private static final Map<OrderStatus, String> convertOrderStatusToStringMap = new EnumMap<OrderStatus, String>(OrderStatus.class);

    static {
        convertStringToOrderStatusMap.put("not reviewed", OrderStatus.NOT_REVIEWED);
        convertStringToOrderStatusMap.put("approved", OrderStatus.APPROVED);
        convertStringToOrderStatusMap.put("rejected", OrderStatus.REJECTED);
        convertStringToOrderStatusMap.put("returned", OrderStatus.RETURNED);
        convertOrderStatusToStringMap.put(OrderStatus.NOT_REVIEWED, "not reviewed");
        convertOrderStatusToStringMap.put(OrderStatus.APPROVED, "approved");
        convertOrderStatusToStringMap.put(OrderStatus.REJECTED, "rejected");
        convertOrderStatusToStringMap.put(OrderStatus.RETURNED, "returned");
    }
    // ==================
    // =   Attributes   = 
    // ==================
    private Integer orderId; //Primary key
    private OrderStatus status;
    private Integer reimbursement;
    private String firstName;
    private String secondName;
    private String passportData;
    private String pickUpDate; 
    private String dropOffDate;
    //java.util.Date date = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss").parse("2011-05-18 16:29:31");
    private String customerCell;
    private String customerAddress;

    // ==================
    // =  Foreign Keys  = 
    // ==================
    private User user;
    private Car car;

    // ==================
    // = Public methods = 
    // ==================

    public Integer getOrderId() {
        return orderId;
    }

    public void setOrderId(Integer orderId) {
        this.orderId = orderId;
    }

    public String getStatus() {
        return convertOrderStatusToString(status);
    }
    public void setStatus(OrderStatus status) {
        this.status = status;
    }

    public Integer getReimbursement() {
        return this.reimbursement;
    }

    public void setReimbursement(Integer value) {
        this.reimbursement = value;
    }

    public String getFirstName() {
        return firstName;
    }

    public void setFirstName(String firstName) {
        this.firstName = firstName;
    }

    public String getSecondName() {
        return secondName;
    }

    public void setSecondName(String secondName) {
        this.secondName = secondName;
    }

    public String getPassportData() {
        return passportData;
    }

    public void setPassportData(String passportData) {
        this.passportData = passportData;
    }

    public String getPickUpDate() {
        return pickUpDate;
    }

    public void setPickUpDate(String pickUpDate) {
        this.pickUpDate = pickUpDate;
    }

    public String getDropOffDate() {
        return dropOffDate;
    }

    public void setDropOffDate(String dropOffDate) {
        this.dropOffDate = dropOffDate;
    }

    public String getCustomerCell() {
        return customerCell;
    }

    public void setCustomerCell(String customerCell) {
        this.customerCell = customerCell;
    }

    public String getCustomerAddress() {
        return customerAddress;
    }

    public void setCustomerAddress(String customerAddress) {
        this.customerAddress = customerAddress;
    }

    public User getUser() {
        return user;
    }

    public void setUser(User user) {
        this.user = user;
    }

    public Car getCar() {
        return car;
    }

    public void setCar(Car car) {
        this.car = car;
    }

    public static OrderStatus converStringToOrderStatus(String status) {
        return convertStringToOrderStatusMap.get(status);
    }

    public static String convertOrderStatusToString(OrderStatus status) {
        return convertOrderStatusToStringMap.get(status);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T18:55:19.683

因为一个**Plain** Old J **ava** **O****对象**只有数据。添加逻辑和方法意味着它不再是普通的旧 Java 对象。

 ****这并不一定会使它成为一件坏事，但您也许可以将逻辑重构为它自己的类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T19:05:38.970

让我们忽略 POJO。

他们的意思是面向服务与领域驱动。

面向服务遵循严格的行为与状态分离。他们将 POJO 称为数据对象，这些数据对象本质上是美化的结构。因此，您可以将静态方法放在服务中。事实上，您甚至可能不希望方法是静态的，因为这也违反了面向服务的方法（请参阅依赖注入和邪恶的单例）。

Domain Driven 遵循经典 OOP（例如 Rails Active Record）的理念，他们相信在他们的 POJO 中放置行为是可以的。因此，由于状态+行为是耦合的，因此只有一种实现，因此域对象中的静态方法是可以的。

如果你走 DAO 路线，你最有可能做的是面向服务的。我的意见是，如果您要执行 DAO POJO 路线，您应该为这些数据对象使用[不可变对象（无耻插件）](https://github.com/agentgt/jirm)。

据我所知，最后将内联`enum`放入一个类中并不违反 POJO 的任何定义。`@Enumerated`话虽这么说，自从您使用 JPA 以来，您应该知道这一点。****

# python - 如何为 Python 安装手动传递 bzip2 安装源？

> ID：15910219
> 
> 赞同：6
> 
> 时间：2013-04-09T18:53:09.713
> 
> 标签：python, node.js, python-2.7, bzip2

我经历了几个关于 Python 和 bzip2 的 StackOverflow 问题。这些对于让我达到我现在清楚的状态非常有帮助。这是我到目前为止所做的以及我遇到的问题：

*   我**没有**root 访问权限，无法安装 libbz2-dev(el)
*   /usr/bin/bzip2 是版本 1.0.3
*   /usr/bin/python 是 2.4.3 版本
*   [GNU Stow](http://www.gnu.org/software/stow/)被用于管理类似于 homebrew 工作方式的库

我需要 Python 2.7.3 与 bzip2 模块一起安装，以便从源代码正确编译 node.js。是的，我很抱歉，但我确实必须从源头作为普通用户完成所有这些工作。

我已经从源代码安装了 bzip2，如下所示：

```
$ make -f Makefile-libbz2_so
$ make
$ make install PREFIX=${STOW}/bzip2-1.0.6
$ cp libbz2.so.1.0.6 ${STOW}/bzip2-1.0.6/lib/
$ cd ${STOW}/bzip2-1.0.6/lib
$ ln -s libbz2.so.1.0.6 libbz2.so.1.0
$ cd ${STOW}
$ stow bzip2-1.0.6 
```

我先在我的 PATH 中存放了根目录，所以这导致：

```
$ bzip2 -V
# [...] Version 1.0.6 
```

这表明在我的 PATH 中使用了正确的 bzip2。

接下来，我继续从源代码编译 Python 并运行以下命令：

```
$ cd Python-2.7.3
$ ./configure --prefix=${STOW}/Python-2.7.3
$ make
# Complains about several missing modules, of which "bz2" is the one I care about
$ make install prefix=${STOW}/Python-2.7.3 # unimportant as bz2 module failed to install 
```

在源代码配置期间告诉 Python 安装 bzip 1.0.6 库的源代码所在的正确方法是什么，以便它能够检测到 bzip2 开发头文件并正确安装模块？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-09-11T16:29:44.720

好吧，我花了几个月的时间来解决这个问题，但我终于回来并设法解决了这个问题。

*   从源代码安装 bzip2：

    ```
    # Upload bzip2-1.0.6.tar.gz to ${SRC}
    $ cd ${SRC}
    $ tar -xzvf bzip2-1.0.6.tar.gz
    $ cd bzip2-1.0.6
    $ export CFLAGS="-fPIC"
    $ make -f Makefile-libbz2_so
    $ make
    $ make install PREFIX=${STOW}/bzip2-1.0.6
    $ cp libbz2.so.1.0.6 ${STOW}/bzip2-1.0.6/lib/
    $ cd ${STOW}/bzip2-1.0.6/lib
    $ ln -s libbz2.so.1.0.6 libbz2.so.1.0
    $ cd ${STOW}
    $ stow bzip2-1.0.6
    $ source ${HOME}/.bash_profile
    $ bzip2 --version
    #=> bzip2, a block-soring file compressor. Version 1.0.6... 
    ```

*   从源代码安装 Python：

    ```
    # Upload Python-2.7.3.tar.gz to ${SRC}
    $ cd ${SRC}
    $ tar -xzvf Python-2.7.3.tar.gz
    $ cd Python-2.7.3
    $ export CLFAGS="-fPIC"
    $ export C_INCLUDE_PATH=${STOW}/../include
    $ export CPLUS_INCLUDE_PATH=${C_INCLUDE_PATH}
    $ export LIBRARY_PATH=${STOW}/../lib
    $ export LD_RUN_PATH=${LIBRARY_PATH}
    $ ./configure --enable-shared --prefix=${STOW}/Python-2.7.3 --libdir=${STOW}/../lib
    $ make
    $ make install prefix=${STOW}/Python-2.7.3
    $ cd ${STOW}
    $ stow Python-2.7.3
    $ source ${HOME}/.bash_profile
    $ python -V
    #=> Python 2.7.3
    $ python -c "import bz2; print bz2.__doc__"
    #=> The python bz2 module provides... 
    ```

尽管从技术上讲 node.js 不是问题的一部分，但它是驱使我完成上述所有内容的原因，因此我不妨包括最后几个命令，以使用源安装 Python 2.7 从源安装 node.js。 3 & bzip2 1.0.6：

*   从源代码安装 node.js：

    ```
    # Upload node-v0.10.0.tar.gz to ${SRC}
    $ cd ${SRC}
    $ tar -xzvf node-v0.10.0.tar.gz
    $ cd node-v0.10.0
    $ ./configure --prefix=${STOW}/node-v0.10.0
    $ make
    $ make install prefix=${STOW}/node-v0.10.0
    $ cd ${STOW}
    $ stow node-v0.10.0
    $ source ${HOME}/.bash_profile
    $ node -v
    #=> v0.10.0 
    ```

# mule - 带注释的 MuleEventContext

> ID：15910228
> 
> 赞同：0
> 
> 时间：2013-04-09T18:53:27.127
> 
> 标签：mule

我想避免`Callable`在 Mule 组件中使用接口，而不是使用基于注释的编码。

我正在使用以下代码，但出现错误。

我如何使用基于注释的方法？

```
public Object processEvent(@Lookup MuleEventContext eventContext) throws Exception  {
  System.out.println("eventContext: " + eventContext.getMessage().getPayload());
  return "GOT IT";
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T19:09:56.387

从[文档中](http://www.mulesoft.org/documentation/display/current/Lookup+Annotation)：

> Lookup 注解用于从 Mule 注册表中注入对象

不是注册表对象，而是动态对象，所以这`MuleEventContext`是行不通的。

你需要什么`MuleEventContext`？

# php - PHP DateTime 的日期属性问题

> ID：15910231
> 
> 赞同：0
> 
> 时间：2013-04-09T18:53:39.240
> 
> 标签：php, datetime

我有一个奇怪的问题。

以下代码生成错误。

```
$startDate = new DateTime();
//  print_r($startDate);
$i = strpos($startDate->date,' ');
$this->startByTime = substr($startDate->date,0,$i).'T'.substr($startDate->date,$i+1).'.000Z';

Notice: Undefined property: DateTime::$date in C:\xampp\htdocs\hpace\buildschedule.php on line.. 
```

并且日期属性似乎未定义。在`$this->strartByTime = 'T000Z'`这一切结束时。

现在，如果我取消注释 print_r 语句一切正常。谁能给我解释一下。？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T18:58:52.773

[DateTime 对象](http://www.php.net/manual/en/class.datetime.php)中没有`->date`属性，这就是 PHP 抱怨的原因。`$startDate->date`

也许你的意思是`$startDate->format('r')`或类似的？

# java - 是否可以将可执行文件 jar 以便可以从 Java 运行？

> ID：15910235
> 
> 赞同：3
> 
> 时间：2013-04-09T18:53:43.960
> 
> 标签：java, hadoop, jar, executable, elastic-map-reduce

简而言之，我需要能够将已编译的可执行文件粘贴到 Java jar 文件中，然后能够从 Java 运行它（可能通过`ProcessBuilder`）。

*原因*是我想在 ImageMagick 可执行文件周围使用 Java 包装器作为图像处理 Elastic Map Reduce 作业的组件。EMR 只希望获取一个 jar 文件，所以我认为没有空间在启动的数据节点上安装软件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T18:59:44.857

jar 中的可执行文件是一个资源，您可以通过 Stream 访问它并将可执行文件展开到 TEMP 目录，然后使用 ProcessBuilder 执行它。

```
File target = new File( System.getProperty( "java.io.tmpdir" ), <filename> );
InputStream  is =
   getClass().getClassLoader().getResourceAsStream( <path to rc> );
OutputStream os = new FileOutPutStream( target );
<copy is to os>
Process p = new ProcessBuilder( target ).start(); 
```

# javascript - ui-data 合约：json 数据的客户端扩展验证

> ID：15910245
> 
> 赞同：0
> 
> 时间：2013-04-09T18:54:08.837
> 
> 标签：javascript, ajax, json, jsonschema

我在一些情况下，我从另一个组创建的服务和数据库调用中获取的 json 给了我无效的数据组合，并在下游造成了许多意外错误。

在下面的小示例中，如果“rowContent”字段等于“1”，则对应的“row”需要是一个填充的 javascript 对象。“rowContent1”和“row1”，“rowContent2”和“row2”是正确的。“rowContent3”和“row3”不是。

我承认这个 json 的结构并不好。好吧，这有点古怪。它与我在生产中处理的内容相当接近。我几乎无法控制它。

在我开始尝试在“row3”中使用不存在的数据之前，是否有数据驱动的方式来描述这样的 json 数据关系，并且可以验证？

或者，你会建议我在这种情况下做什么？

非常感谢，

-拉里

```
{ "table" : [
        { 
            "aRowContent" : {
                "rowContent1" : "1",
                "rowContent2" : "0",
                "rowContent3" : "1",
            },
            "row1" : {
                "myRowValue" : "red"
            },
            "row2" : null,
            "row3" : null
        }
    ]
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T10:02:20.063

当然，不是 JSON Schema。JSON Schema 验证 JSON 数据的结构，而无需交叉引用其他数据位。

`/table/0/aRowContent/rowContent1`我认为问题可能是您的数据结构中的冗余 -当您可以从空检查中推断出相同的信息时，您为什么需要`/table/0/row1`？

# integer-arithmetic - 并行添加两个整数

> ID：15910246
> 
> 赞同：1
> 
> 时间：2013-04-09T18:54:09.713
> 
> 标签：integer-arithmetic

假设您在两个数组 a,b 中给出了 2 个 n 位数的无符号整数，并且您有 p 个处理器，每个处理器可以添加 2 个数字并计算进位（如果存在）。是否可以在 O(p+n/p) 时间内计算 a+b？我一直在尝试将输入分成 (n/p) 的 p 个间隔，但我不知道如何处理进位。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T22:43:50.140

我相信这是可能的。我会假设`n >= p`你的 p 处理器被安排在一个无共享的架构中，处理器通过消息传递进行通信。

如果您的数字尚未分布在 p 个处理器中，而是聚集在一个不参与计算的主处理器上，您只需将 a 和 b 分开以创建 p 个连续数字块，并将它们发送到每个处理器. 这需要消息的复杂性`O(p)`。

然后，每个处理器计算其数字块的两个和，一个和假设它将从其前身（即具有下一个较低有效数字块的处理器）接收进位 1，另一个假设进位将为 0。它还将计算这两种情况中的每一种的传出进位。该计算具有时间复杂度`O(ceil(n/p))`，因为每个处理器必须保存整数位数。

当然，具有最低有效数字块的处理器只需计算一个和。一旦它完成计算，它就会将它的结果数字份额发送回主控器，并将其输出进位发送到保存下一个更高有效数字块的处理器。下一个处理器决定两个结果场景中的哪一个已成为真，将适当的结果数字发送到主控器，并将其输出进位发送到下一个处理器。等等。

这将需要额外的 p 条消息作为结果和 p-1 条消息作为进位。所以消息复杂度仍然是`O(p)`. 时间复杂度将是`O(p + ceil(n/p))`因为最后一个处理器必须等到`p-2`其前任处理器决定转发两个结果中的哪一个。如果您假设 n 位可以均匀地分布在 p 个处理器之间（即 n 是 p 的倍数），那么您建议的时间复杂度就可以了`O(p + n/p)`。

[这种通过推测计算两个可能结果的相加方法与进位选择加法器的](http://en.wikipedia.org/wiki/Carry-select_adder)工作方式非常相似。

# file - 在 codeigniter 中未检索到文件路径

> ID：15910250
> 
> 赞同：0
> 
> 时间：2013-04-09T18:54:16.697
> 
> 标签：file, codeigniter, filepath, email-attachments

我正在为用户所需的包裹选择创建一张发票。正在创建 pdf 文件（但需要一些时间），同时代码会检查文件。该文件存在。这是文件的地址；

```
C:/wamp/www/proposal/file/invoice/Basic_52_60.pdf 
```

这是文件的正确路径。我将此路径传递给另一个控制器中的函数；

```
redirect('email/email_invoice/'.$file); 
```

当我在 email_invoice 函数中测试文件路径时，它只显示 c:

```
c: 
```

路径中的斜线不会被转移。我不知道到底是什么问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T19:19:49.147

CodeIgniter 将 URL 的每一段视为控制器和方法之后的参数。因此，您实际上是将 7 个变量传递给该`Email::email_invoice()`方法。

您可以使用某种编码将其作为一个变量传递，然后在另一侧对其进行解码，例如：

```
 $file = base64_encode($file);
 redirect('email/email_invoice/' . $file); 
```

然后在 Email.php 中：

```
public function email_invoice($file) {
    $file = base64_decode($file);
} 
```

或者您可以将其作为 get 参数传递：

```
redirect('email/email_invoice/?file=' . $file);

public function email_invoice() {
    $file = $this->input->get('file');
} 
```

后者需要启用 $_GET 数组，默​​认情况下它不是。

**更新 - 使用 Flashdata**

根据一些评论，我想我会更新这个答案。`base64_encode()`可能会导致破坏 URL 的字符，因此您需要使用：

```
$file = urlencode(base64_encode($file));
redirect('email/email_invoice/' . $file); 
```

另一方面：

```
public function email_invoice($file) {
    $file = urldecode(base64_decode($file));
} 
```

正如 OP 指出的那样，可以操纵 $_GET 变量，从而使您容易受到[目录遍历攻击](http://en.wikipedia.org/wiki/Directory_traversal_attack)或其他漏洞的影响。即使做得正确，您也需要额外的代码来保证安全。编码很容易被发现和改变。

文件路径可能不应该出现在 URL 中。即使不那么明显，也可以操纵 POST 数据。通过默默无闻的安全根本不是安全。更好的方法是使用[flashdata](http://ellislab.com/codeigniter/user-guide/libraries/sessions.html)。

```
$this->session->set_flashdata('email_invoice_pdf', $file);
redirect('email/email_invoice/'); 
```

然后在你的控制器中：

```
public function email_invoice() {
    $file = $this->session->flashdata('email_invoice_pdf');
} 
```

而已。该会话用于将文件路径携带到下一页请求，但之后它就消失了。

# jquery - 将 div 计数插入页面标题的中间

> ID：15910256
> 
> 赞同：1
> 
> 时间：2013-04-09T18:54:25.357
> 
> 标签：jquery, html, count, title

我目前正在使用...

```
$(function () { 
    var title = document.title; 
    var count = $('.div').length; 
    $(this).attr("title", title + ' (' + count + ') ' + ' - Category Page');
}); 
```

...在页面标题中添加一个数字。使用这种方法只允许我在 'count' + - 之后的任何内容都具有相同的措辞。

我将如何改变这一点，以便在 HTML 标题标签中，我可以拥有 - 类别页面，或任何内联，并且只在连字符之前由 jquery 插入数字？

现在的 HTML ...

```
<title>Bicycles</title> 
```

我想要什么...

```
<title>Bicycles - Category Page</title> 
```

然后让 jquery 在连字符之前添加 div 计数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T19:02:51.110

最后，这将取决于您，并且没有真正的标准可以遵循。这完全取决于您决定如何清理标题的内容。比如决定它是否来自服务器端，是否是硬编码的，等等。我说擦洗你的内容以获得标题，因为为了插入这个数字，你必须有某种占位符。`()`也许使用然后定位它是有意义的。也许你会使用`_count_`. 这就是实施取决于您和您的代码的地方。它必须是这种方式，因为您将在字符串内部进行搜索。

```
$(function () { //if you were inserting count into ()
 var title = document.title;
 var count = $('.div').length; 
 var ind = title.indexOf("()");
 title = title.substr(0,ind+1) + count + title.substr(ind+2,title.length);
 $(this).attr("title", title);
}); 
```

另一种方法是跟踪上面提到的两个子字符串。即前缀和后缀。这样你就可以做一些更简单的事情。

```
$(function () {
 var prefix = "Some Title";
 var suffix = "Category";
 var count = $('.div').length; 
 $(this).attr("title", prefix + ' (' + count + ') ' + ' - ' + suffix);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T19:00:40.917

使用`sprintf`（[带有链接和解释说明的问题](https://stackoverflow.com/questions/610406/javascript-equivalent-to-printf-string-format)）。请注意，它不在标准 javascript 库中，而是在扩展中。

就像是

```
<!--in the title-->
<title>There are %d rabbits in the basket</title>

$(function () { 
    var title = document.title; 
    var count = $('.div').length; 
    $(this).attr("title", sprintf(title, count));
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T19:01:31.683

尝试

```
$(function () { 
    var title = document.title; 
    var count = $('.div').length;

    document.title = title + "( " + count + " ) - Category Page"; 
}); 
```

# python - CythonGSL/ 通过 Cython 在 Windows 上使用 GSL

> ID：15910259
> 
> 赞同：1
> 
> 时间：2013-04-09T18:54:59.510
> 
> 标签：python, windows, cython, gsl

**机器配置：** 我的配置是 windows 7 x64，安装了 python 2.7 和 cython 0.18（全 64 位）。我还安装了 MS C++ 2008 Visual Studio。

我有 GSL 二进制文件，并且 Path 指向 GSL\Bin。

我正在使用 MS VS 2008 + SDK 7.0 来编译 cython .pyx 文件。我使用 SDK 7.0 命令提示符编译为 c 和 cython。

**问题** 但是在编译时我收到 LINK 错误 2019，这表明 GSL 文件夹中的头文件未找到。

**我的尝试** 为了解决这个问题，我下载了 CythonGSL。使用“来自 cythonGSL cimport *”没有用。我去了这个包的初始化文件并更改了它似乎正在搜索的目录以适合我安装 GSL 的位置。如 CythonGSL 自述文件所示，我已更新 setup.py。

这也**不起作用**！在编译时，它说 gsl.lib 未找到。

知道如何解决这个问题吗？

一种选择是，如果我可以指向一个静态地址，例如，代替

```
 cdef extern from "libcalg/queue.h":
       with
    cdef extern from "FUll File Path/queue.h": 
```

这暂时行不通。

安装程序.py

```
from distutils.core import setup
from Cython.Distutils import Extension
from Cython.Distutils import build_ext
import cython_gsl
import numpy as np
setup(

    include_dirs = [cython_gsl.get_include(), np.get_include()],
    cmdclass = {'build_ext': build_ext},
    ext_modules = [Extension("lda_gibbs_cython",
                             ["lda_gibbs_cython.pyx"],
                             libraries=cython_gsl.get_libraries(),
                             library_dirs=[cython_gsl.get_library_dir()],
                             include_dirs=[cython_gsl.get_cython_include_dir()])]
    ) 
```

唯一的区别是我包括 np.get _include()

我的 .pyx 文件：（从[https://github.com/twiecki/CythonGSL/blob/master/examples/gibbs.pyx](https://github.com/twiecki/CythonGSL/blob/master/examples/gibbs.pyx)借来进行测试 ）

```
import numpy as np
cimport numpy as np
cimport cython
DTYPE = np.int
ctypedef np.int_t DTYPE_t
from scipy.special import gammaln
from cython_gsl cimport *

cdef gsl_rng *r = gsl_rng_alloc(gsl_rng_mt19937) 
```

Cython GSL 尝试的错误消息：

```
D:\LDA\pythonLDA>setup.py build_ext --inplace
running build_ext
cythoning lda_gibbs_cython.pyx to lda_gibbs_cython.c
building 'lda_gibbs_cython' extension
C:\Program Files (x86)\Microsoft Visual Studio 9.0\VC\Bin\amd64\cl.exe /c /nolog
o /Ox /MD /W3 /GS- /DNDEBUG -IC:\Python27\lib\site-packages -IC:/GSL/include -IC
:\Python27\lib\site-packages\numpy\core\include -IC:\Python27\include -IC:\Pytho
n27\PC /Tclda_gibbs_cython.c /Fobuild\temp.win-amd64-2.7\Release\lda_gibbs_cytho
n.obj
lda_gibbs_cython.c
c:\python27\lib\site-packages\numpy\core\include\numpy\npy_deprecated_api.h(8) :
 Warning Msg: Using deprecated NumPy API, disable it by #defining NPY_NO_DEPRECA
TED_API NPY_1_7_API_VERSION
lda_gibbs_cython.c(2812) : warning C4244: 'function' : conversion from '__int64'
 to 'long', possible loss of data
lda_gibbs_cython.c(4811) : warning C4101: 'getbuffer_cobj' : unreferenced local
variable
lda_gibbs_cython.c(4842) : warning C4101: 'releasebuffer_cobj' : unreferenced lo
cal variable
C:\Program Files (x86)\Microsoft Visual Studio 9.0\VC\Bin\amd64\link.exe /DLL /n
ologo /INCREMENTAL:NO /LIBPATH:C:/GSL/lib /LIBPATH:C:\Python27\libs /LIBPATH:C:\
Python27\PCbuild\amd64 gsl.lib gslcblas.lib /EXPORT:initlda_gibbs_cython build\t
emp.win-amd64-2.7\Release\lda_gibbs_cython.obj /OUT:D:\LDA\pythonLDA\lda_
gibbs_cython.pyd /IMPLIB:build\temp.win-amd64-2.7\Release\lda_gibbs_cython.lib /
MANIFESTFILE:build\temp.win-amd64-2.7\Release\lda_gibbs_cython.pyd.manifest /MAN
IFEST
LINK : fatal error LNK1181: cannot open input file 'gsl.lib'
error: command 'link.exe' failed with exit status 1181 
```

**海合会尝试**

我安装了 TDM-GCC，所以我可以使用标准的 cmd 窗口：

.pyx 和 setup.py 保持不变。我在此处记录并解决了一个问题[-mno-cygwin：gcc building Mercurial (Windows 2000)](https://stackoverflow.com/questions/8916133/mno-cygwin-gcc-building-mercurial-windows-2000)。还是没有雪茄。我不知道这是否应该是一个单独的问题——如果专家这么认为，我会采取行动。

```
D:\LDA\pythonLDA>setup.py build_ext --inplace -c mingw32
running build_ext
skipping 'lda_gibbs_cython.c' Cython extension (up-to-date)
building 'lda_gibbs_cython' extension
C:\MinGW64\bin\gcc.exe -mdll -O -Wall -IC:\Python27\lib\site-packages -IC:/GSL/i
nclude -IC:\Python27\lib\site-packages\numpy\core\include -IC:\Python27\include
-IC:\Python27\PC -c lda_gibbs_cython.c -o build\temp.win-amd64-2.7\Release\lda_g
ibbs_cython.o
writing build\temp.win-amd64-2.7\Release\lda_gibbs_cython.def
C:\MinGW64\bin\gcc.exe -shared -s build\temp.win-amd64-2.7\Release\lda_gibbs_cyt
hon.o build\temp.win-amd64-2.7\Release\lda_gibbs_cython.def -LC:/GSL/lib -LC:\Py
thon27\libs -LC:\Python27\PCbuild\amd64 -lgsl -lgslcblas -lpython27 -l -o D:\LDA\pythonLDA\lda_gibbs_cython.pyd
gcc: error: D:\LDA\pythonLDA\lda_gibbs_cython.pyd: No such file or direct
ory
error: command 'gcc' failed with exit status 1 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T13:20:12.060

我只使用`CythonGSL`- 当前版本（[https://github.com/twiecki/CythonGSL/blob/master/cython_gsl/__init__.py](https://github.com/twiecki/CythonGSL/blob/master/cython_gsl/__init__.py)）读取环境变量`LIB_GSL`以确定`GSL`目录的位置。确保您有`LIB_GSL`环境变量来指向您的主`GSL`文件夹（不是`\bin`文件夹）。例如，`LIB_GSL=C:/GSL`。然后你必须添加`C:\GSL\bin`到你的`PATH`. 我有一篇[博文](http://blog.joonro.net/en/2013/03/28/windows__installing_gsl_for_cythongsl.html)，里面有详细的解释。

**来自 Chat Discussion 的更多解释：** ++ `TDM-GCC`（稍作更改 - GSL 文件必须位于. 这对于 64 位 Windows 7 非常有效。`EPD``GSL``C:\Program Files\GnuWin32\`

使用可能在 MS VS C++ 2008 上编译的 Windows 二进制文件可能会导致与已`mingw64`编译的 C++ 程序发生冲突。

* * *

**更多设置说明**（已添加）

一般来说，使用[Python(x,y)](https://code.google.com/p/pythonxy/)（免费）、[Enthought Canopy](https://www.enthought.com/products/canopy/)（EPD 的继任者，有限免费版）或[Anaconda](https://store.continuum.io/cshop/anaconda)（除高级软件包外免费）等科学 Python 发行版比安装单独的软件包要容易得多在香草蟒之上。似乎所有三个发行版都带有 MinGW，所以如果你不需要对 Cython 的 openmp 支持，你应该很好，如果你需要，你可以安装[TDM-GCC](http://tdm-gcc.tdragon.net)。

在 方面，您可以从[oscats](https://code.google.com/p/oscats/downloads/list)项目`GSL`中下载二进制文件。它具有带有开发头的 32 位和 64 位二进制文​​件。`GSL`

我的设置是`Anaconda`++ （来自`TDM-GCC`oscats项目），并且[运行](https://code.google.com/p/oscats/downloads/list)良好。`GSL`

# php - 从星座网站解析信息

> ID：15910280
> 
> 赞同：0
> 
> 时间：2013-04-09T18:55:51.780
> 
> 标签：php, javascript, html

我已经编写了从dailyhoroscopes.com 网站获取星座的代码：

```
<?php
include('../simple_html_dom.php');

// get DOM from URL or file
$html = file_get_html('http://www.dailyhoroscope.com/?date=yesterday');

$needle = 'var ar_interps = ';
$needle_end = 'var ar_interps_love = ';

foreach($html->find('script') as $e)       
    if (strpos($e->innertext, $needle) !== false) {
        $json = substr($e->innertext, strpos($e->innertext, $needle));        
        $json = substr($json, 0, strpos($json, $needle_end));
        $json = str_replace($needle, '', $json);
        $json = str_replace(';  ', '', $json);
        echo '<pre>';
        var_dump(json_decode($json, true));
        echo '</pre>';
        }
?> 
```

仅使用 html 和 javascript 进行相同操作的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T19:00:40.673

没有办法：这个服务器不支持 CORS。对于跨域资源共享，请参阅维基百科文章。[http://en.wikipedia.org/wiki/Cross-origin_resource_sharing](http://en.wikipedia.org/wiki/Cross-origin_resource_sharing)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T19:01:46.413

你不能。跨域访问策略不允许网页访问从其他来源加载的内容。`dailyhoroscope.com`在这种情况下，除非您的页面也在该域上，否则这将不允许您从中加载数据。

此外，未经他们的许可重复使用他们的内容很可能构成侵犯版权，即使这不是非法的，也是一种鸡巴举动，因为它最终会在他们的服务器上产生负载。不要这样做。

# eclipse - 将更改集从 Outgoing 返回到 Unresolved

> ID：15910282
> 
> 赞同：3
> 
> 时间：2013-04-09T18:56:08.907
> 
> 标签：eclipse, versioning, rtc, jazz

我错误地签入了一些更改。现在更改在传出更改中，但我不希望它们交付。我怎样才能将它们归还给未解决的问题？如果我丢弃它们，它们就会从我的源代码中消失，我的工作也会丢失。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T19:20:54.023

您仍然可以丢弃更改集：请参阅[此线程](https://jazz.net/forum/questions/54231/discard-change-set-hey-whered-my-local-project-go)。

> 通过丢弃更改集，其中的更改将被反转。这恰好是执行初始共享后添加的文件。

（因此删除了这些文件）

> **为避免这种情况，您可以断开项目然后丢弃更改集**。

（断开项目时，选择不删除本地文件的选项）

> 这种行为的目的是因为您希望放弃更改并让本地共享内容反映与存储库工作区相同的状态。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-05-13T19:10:29.220

您应该能够在 Pending Changes 视图中简单地将文件从 Outgoing Change Set 拖放到 Unresolved。然后，您可以将更改集重用于其他一些更改。

这仅在您将更改集标记为完成之前有效。

# java - 字符串数组中的 indexOf 错误

> ID：15910286
> 
> 赞同：4
> 
> 时间：2013-04-09T18:56:22.063
> 
> 标签：java, arrays, string, sorting

我想按第二个字符对字符串数组进行排序，但位置“1”处的字符索引始终为-1，因此排序不起作用。怎么了？

```
String[] wordList = outString.toString().split(", ");

for (int i = 0; i < wordList.length; i++) {
    int n =wordList[i].indexOf(wordList.toString().charAt(1));
}

Arrays.sort(wordList, 1,0);

for (String str : wordList) {
    System.out.println(str);
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-09T18:58:10.277

这`wordList.toString().charAt(1)`为您提供了`toString()`a 的表示形式`String[]`，这可能不是您想要的。

```
String [] test = new String [] {"a","b","c"};
System.out.println(test.toString()); 
```

**输出**

```
[Ljava.lang.String;@23fc4bec 
```

如果您使用自定义[Comparator](http://docs.oracle.com/javase/6/docs/api/java/util/Comparator.html)并允许`Collections.sort()`对 wordList 进行排序（将其放入`List`第一个索引之后），您应该会发现按第二个索引进行排序更容易。

另请注意，您的拆分包含可能导致更多混乱的空格`split(", ");`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-09T19:04:37.820

您想为 String 类型编写自定义[比较](http://docs.oracle.com/javase/7/docs/api/java/util/Comparator.html)器，例如

```
Comparator<String> secondLetterComparator = new Comparator<String>() {
  @Override
  public int compare(String a, String b) {
    return Character.compare(a.charAt(1), b.charAt(1));
  }
};
String[] wordList = { "apple", "orange", "banana" };
Arrays.sort(wordList, secondLetterComparator);
System.out.println(Arrays.asList(wordList)); 
```

将输出

```
[banana, apple, orange] 
```

如果`Character.compare(char, char)`因为您还没有使用 Java 7 而无法使用，请改用这一行`compareTo()`——它的表现力较差，但效果相同：

```
return a.charAt(1) - b.charAt(1); 
```

请注意，这两种代码都不能防止`null`长度小于或等于 2 个字符的字符串。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T19:08:18.093

在我看来，您正在寻找的是：

```
Arrays.sort(T[] a, Comparator<? super T> c) 
```

您应该创建自己的`Comparator`类：

```
public class MyComparator implements Comparator<String>
{
   public int compare(String s1,String s2)
   {
     return s1.charAt(1) - s2.charAt(1);
   }
} 
```

然后调用`MyComaparator`within的构造函数`Arrays.sort`如下：

```
Arrays.sort(wordList,new MyComparator()); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-09T19:08:47.580

您在寻找时缺少索引

```
 wordList.toString().charAt(1) 
```

应该是 wordList[i].toString().charAt(1)

# jquery - 使用 AJAX jQuery 和 POST 请求获取检查的输入并以 json 格式发送。使用烧瓶

> ID：15910289
> 
> 赞同：1
> 
> 时间：2013-04-09T18:56:27.890
> 
> 标签：jquery, html, ajax, json, flask

嗨所以我在尝试使用我为提交配置的按钮发送表单的检查数据时遇到问题。检查的数据是使用“GET”请求输入的，并且使用烧瓶效果非常好。但是，一旦我制作了一个清单，我想点击提交并使用 POST 或 GET 发送数据（取决于哪个更好），但我必须使用烧瓶来使用 JSON 格式检索表单数据（因为我熟悉这个看到我使用这种格式来检索数据以进入清单表格）这是我尝试过的

烧瓶：

```
@app.route('/echo/', methods=['GET', 'POST'])
def echo():
    error = None
    #ret_data = {"value": request.args.get('echoValue')}
    #data = jsonify(ret_data)
    #dic = {"test" : "Data successfully recieved!", "test1":"sss"}
    if request.method == 'GET':
        dic = dictionary()
        time.sleep(10)
        return jsonify(dic)
    else:
        error = 'Fail in "GET"'
        return render_template('index.html', error=error)

    if request.method == 'POST':
        data = request.args.get('Device1', '')
        return jsonify(data) 
```

现在这是我的 POST jQuery 以及我如何检索表单数据并将其添加到一个空对象中。

```
$('#Submit').click(function() {
    var num_checked_devices = $('input:checked').length;
    var oElements = {};
    $('#form1 input:checked').each(function() {
      oElements[this.name] = this.value;
    });

    $.ajax({
      type: "POST",
      url: $SCRIPT_ROOT + "/echo/",
      data: oElements,
      contentType: "application/json; charset=utf-8",
      success: function(data) {
        $('#test').text(data['Device1']);
      }
    }); 
```

HTML 如下，但请记住，表单是空的，因为数据是使用我没有发布的 GET jquery 代码进来的。

```
<form id='form1'>
</form>
<input type="submit" value="Add Devices" />
<button type='button' id='Submit' name='Submit Button'>Add Devices</button>
<button type='button' id='Refresh' name='Refresh Button'>Refresh</button>

<br /><br />
<div id="test">
</div> 
```

# javascript - 当用户“看到”一个元素时激活 JavaScript？

> ID：15910291
> 
> 赞同：1
> 
> 时间：2013-04-09T18:56:36.417
> 
> 标签：javascript, html, css

我有兴趣制作一个类似于此处的统计“评级栏”：http://gdgt.com/improv-electronics/boogie-board/1st-gen/[但](http://gdgt.com/improv-electronics/boogie-board/1st-gen/)我不确定我会怎么做.

基本上在页面加载时，它不会激活元素，但是当您向下滚动到栏时，它会加载它们。

我将如何继续按照这些思路做一些事情？

这是我到目前为止的 HTML：

```
<ul class="product-criteria-bars">
      <li>
    <div class="product-criteria-label">
      Accuracy and sensitivity
    </div>

    <div class="product-criteria-bar">      
      <div class="fill light-green filled" data-width="240" style="width: 240px;"></div>
      <noscript>
        &lt;div class="fill light-green" style="width: 240px;"&gt;&lt;/div&gt;
      </noscript>
    </div>
    <div class="rating light-green">8.0</div>
    <div class="clear"></div>
  </li>
      <li>
    <div class="product-criteria-label">
      Ergonomics / comfort
    </div>

    <div class="product-criteria-bar">      
      <div class="fill light-green filled" data-width="240" style="width: 240px;"></div>
      <noscript>
        &lt;div class="fill light-green" style="width: 240px;"&gt;&lt;/div&gt;
      </noscript>
    </div>
    <div class="rating light-green">8.0</div>
    <div class="clear"></div>
  </li>
  </ul> 
```

但是我还需要做什么，JS 明智的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T19:01:23.783

您可以使用这个 Jquery 插件和下面的代码来检查

[https://github.com/teamdf/jquery-visible/](https://github.com/teamdf/jquery-visible/)

```
$('#element').visible() 
```

参考[http://www.teamdf.com/web/jquery-element-onscreen-visibility/194/](http://www.teamdf.com/web/jquery-element-onscreen-visibility/194/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T19:03:12.340

查看[http://media.gdgt.com/assets/js/provisionals/product/index-31733.js](http://media.gdgt.com/assets/js/provisionals/product/index-31733.js)`isVisibleInViewport()`中的功能

看起来该网站正在使用滚动监听器来检查可见性。

# c# - 在datagridview中删除字段时更新数据库？

> ID：15910292
> 
> 赞同：1
> 
> 时间：2013-04-09T18:56:40.860
> 
> 标签：c#, winforms, datagridview

我有一个使用代码添加表数据的datagridview，我想删除一行数据并让它在数据库表中更新。我该怎么做呢？有小费吗？

代码如下：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Windows.Forms;
using System.Data.Sql;
using System.Data.SqlClient;

namespace project
{
    public partial class frmTestPrint : Form
    {
        //with code
        SqlConnection cn = new SqlConnection("Data Source=(LocalDB)\\v11.0;AttachDbFilename=F:etc");
        SqlDataAdapter da;
        DataTable dt = new DataTable();

        public frmTestPrint()
        {
            InitializeComponent();
        }

        //with code
        private void BindDataGridView2()
        {
            string command = "select * from booking";
            da = new SqlDataAdapter(command,cn);
            da.Fill(dt);
            dataGridView2.DataSource = dt;

        }

        private void frmTestPrint_Load(object sender, EventArgs e)
        {

            //with code
            BindDataGridView2();
        }

        private void btnDelete_Click(object sender, EventArgs e)
        {

        }
    }
} 
```

我尝试了许多不同的方法并且被卡住了，我真的需要一些帮助来指导我完成这个，所以如果有人可以提供帮助，请做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T19:30:20.917

经过进一步审查，您似乎在 StackOverflow 上询问了很多关于 WinForms 中基本操作的问题。我对您的建议是寻找材料来学习如何使用您选择的任何语言和框架进行编程，并尝试了解您正在编写的代码在做什么。

当您要求每个人为您编写代码时，您只是在使问题复杂化——您不完全了解您的代码在做什么，并且很难修复错误。在我过去，我也这样做过，并且花了 10 倍的时间试图让其他人的代码为我工作，而不是学习为自己编写代码。

我知道您最初的想法是，您最终会通过要求其他人编写您的代码来解决这个问题，但根据我的经验，情况并非如此，您并没有以这种方式学习任何东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-30T11:43:56.467

尝试这个，

1st，你需要知道你需要删除哪一行（ID）。所以试试：

```
string myID = dataGridView2.CurrentRow.Cells["ID"].Value 
```

接下来，您需要更新您的数据库。现在你可以使用字符串命令来做到这一点，但我不会这样做，我会使用存储过程。所以在你的sql中：

```
CREATE PROCEDURE myDeleteQuery
@paramID
AS
DELETE * FROM booking WHERE booking.ID = @param 
```

非常简单的删除查询，我只是假设不知道您的表结构。

你想要做的最后一件事就是一起修复它，所以试试这个。

```
using (SqlConnection AutoConn = new SqlConnection(cn))
{
    AutoConn.Open();
    using (SqlCommand InfoCommand = new SqlCommand())
    {
        using (SqlDataAdapter infoAdapter = new SqlDataAdapter(InfoCommand))
        {
            InfoCommand.Connection = AutoConn;
            InfoCommand.CommandType = CommandType.StoredProcedure;
            InfoCommand.CommandText = "myDeleteQuery";
            InfoCommand.Parameters.AddWithValue("@paramID", myID);
            InfoCommand.CommandTimeout = 180;
            InfoCommand.ExecuteScalar()
            AutoConn.Close();
        }
    }
} 
```

这将更新您的表格。现在您需要做的就是显示更改，所以只需回忆一下您的

```
BindDataGridView2(); 
```

和你的排序。

希望这可以帮助您和我正确阅读您的问题

# .net - 如何获取mf.dll的内容

> ID：15910294
> 
> 赞同：0
> 
> 时间：2013-04-09T18:56:46.470
> 
> 标签：.net, dll, com, visual-studio-2012, ms-media-foundation

我认为这是一个简单的问题，但我还是太缺乏经验，无法自己回答。我搜索了一种在 .NET 即 C# 中使用 Windows Mediafoundation 的方法，并找到了某种包装器，这正是我需要的。 [http://blogs.msdn.com/b/mf/archive/2010/02/18/mfmanagedencode.aspx](http://blogs.msdn.com/b/mf/archive/2010/02/18/mfmanagedencode.aspx)和 [http://archive.msdn.microsoft.com/mfblog](http://archive.msdn.microsoft.com/mfblog)

在尝试分析包装器时，我问自己，我怎么知道所有这些作为 WMF 一部分的函数、类型和 *.dll 文件？！我找到了 dumpbin.exe 来获取所有函数和属性，但仍然没有关于调用函数的参数的信息，也没有关于不同类型以及在哪个 *.dll 文件中声明这些类型的信息。我从哪里获得指南？

# excel - 如何更改代码以将一个复选框添加到 ActiveCell 而不是 ActiveSheet？

> ID：15910296
> 
> 赞同：1
> 
> 时间：2013-04-09T18:56:58.370
> 
> 标签：excel, vba

我编写了一个带有 if 语句的代码，如果满足某些条件，则可以将复选框添加到 ActiveSheet 中的某些单元格。我下面的代码显示了该代码。

```
'To add checkboxes
Dim ToRow As Long
Dim LastRowCB As Long
Dim MyLeft As Double
Dim MyTop As Double
Dim MyHeight As Double
Dim MyWidth As Double

LastRowCB = Range("B1000").End(xlUp).Row
For ToRow = 11 To LastRowCB
    If Not IsEmpty(Cells(ToRow, "B")) Then
        '-
        MyLeft = Cells(ToRow, "A").Left
        MyTop = Cells(ToRow, "A").Top
        MyHeight = Cells(ToRow, "A").Height
        MyWidth = MyHeight = Cells(ToRow, "A").Width
        '-
        ActiveSheet.CheckBoxes.Add(MyLeft, MyTop, MyWidth, MyHeight).Select
         With Selection
            .Caption = ""
            .Value = xlOff
            .LinkedCell = "R" & ToRow
            .Display3DShading = False
        End With
    End If
Next 
```

我现在正在尝试更改此代码，但收效甚微，将完全相同类型的复选框添加到我已激活的一个单元格中。就像我说的我已经激活了单元格，我只需要更改代码以使其仅执行 ActiveCell 而不是 ActiveSheet。以下是我更改代码的尝试。我排除了 If 语句，因为我的想法是因为我激活了单元格，所以我不需要所有这些。

```
ActiveCell.CheckBoxes.Add(MyLeft, MyTop, MyWidth, MyHeight).Select
         With Selection
            .Caption = ""
            .Value = xlOff
            .LinkedCell = "R" & ToRow
            .Display3DShading = False
        End With 
```

当我尝试运行此代码时，我在下一行得到一个调试。

```
ActiveCell.CheckBoxes.Add(MyLeft, MyTop, MyWidth, MyHeight).Select 
```

非常感谢任何建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T19:06:14.580

复选框（和其他控件）是工作表的一部分，而不是单元格。

虽然您可以“控制”一个单元格，但它仍然不是该单元格的一部分。

只需继续使用`ActiveSheet`并使用 ActiveCell 计算您的`MyTop, MyLeft, MyHeight`值`MyWidth`。

```
MyLeft = ActiveCell.Left
MyTop = ActiveCell.Top
MyHeight = ActiveCell.Height
MyWidth = ActiveCell.Width

ActiveSheet.Checkboxes.Add(MyLeft, MyTop, MyWidth, MyHeight).Select

With Selection
    .Caption = ""
    .Value = xlOff
    .LinkedCell = ActiveCell.Address
    .Display3DShading = False
End With 
```

我已经更新了代码以链接单元格和东西。您问题中的第一个代码示例确实显示了如何减去`ActiveCell.Address`!

如果您希望它`linked`明确地显示在 R 列中的单元格中，那么您需要自己制作

例如：`.LinkedCell = "R" & ActiveCell.Row`否则`ActiveCell.Address`将链接到您添加复选框的单元格。

# regex - 正则表达式帮助查找带有字符的单词

> ID：15910317
> 
> 赞同：1
> 
> 时间：2013-04-09T18:58:01.757
> 
> 标签：regex

我想找到以文本和“-”字符开头的字符串，找到这个：

```
2030-
OR
2232-
OR
2544-
etc 
```

我试过了：

```
 /(2030-|2232-|2544-|33-)/i 
```

这不适用于“-”或其他字符，需要帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T18:59:35.460

```
/^.*?-/ 
```

是最一般的构造

这将匹配从字符串开头到第一个“-”的任何字符串

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T04:43:51.243

Try this general `regex`:

```
/(\d+\-)/i 
```

explanation

> ***`\d`*** Matches any decimal digit.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T04:52:20.807

这个 reg 应该适合你：

```
/^(?:2030|2232|2544|33)-$/ 
```

确保锚点`^`和`$`这样放置。

# python - 使用python从.txt文件中检索数据？

> ID：15910322
> 
> 赞同：1
> 
> 时间：2013-04-09T18:58:10.280
> 
> 标签：python, python-2.7

在下面，您可以看到来自 ephemeris.txt 文件的数据。现在我想检索几列（例如，以 00:00、27.69 和 44.1 开头的列）并将数组命名为 x、y、z。我需要做什么？

我试过这个

```
x, y, z = numpy.loadtxt("ephemeris.txt", unpack=True) 
```

这得到了这个错误

```
"ValueError: could not convert string to float: Date__(UT)__HR:MN" 
```

你能帮我把 HR:MN 转换成分钟吗？

```
Date__(UT)__HR:MN     R.A.__(a-apparent)__DEC\
**********************************************\
 2013-Jan-01 00:00 *   14 31 27.69 -12 29 44.1\
 2013-Jan-01 00:01 *   14 31 27.71 -12 29 44.1\
 2013-Jan-01 00:02 *   14 31 27.72 -12 29 44.2\
 2013-Jan-01 00:03 *   14 31 27.73 -12 29 44.2\
 2013-Jan-01 00:04 *   14 31 27.75 -12 29 44.3\
 2013-Jan-01 00:05 *   14 31 27.76 -12 29 44.3\
 2013-Jan-01 00:06 *   14 31 27.77 -12 29 44.4\
 2013-Jan-01 00:07 *   14 31 27.78 -12 29 44.4\
 2013-Jan-01 00:08 *   14 31 27.80 -12 29 44.4\
 2013-Jan-01 00:09 *   14 31 27.81 -12 29 44.5\ 
```

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T22:30:03.130

您可以使用该函数的更多参数`loadtxt`。

你得到的错误很可能是由于前两个标题行，所以用`skiprows=2`参数跳过它们；

此外，每一行包含不同格式的数据，以空格分隔。`delimiter=' '`以防万一，您可以在 和 之间`dtype=string`进行选择`dtype=object`。

```
a = numpy.loadtxt("ephemeris.txt", delimiter=' ', dtype=string, skiprows=2) 
```

这应该为您提供一个数组，您可以从中执行多种“转换”：每列拆分一个数组，创建行列表等。

```
x,y,z,etc = numpy.hsplit(a, a.shape[1])
x = x.astype(datetime)

# or
x = a[:,0].astype(datetime)
y = a[:,1].astype(some_type) 
```

或类似的东西......

希望这会有所帮助，如果需要，请在评论中详细说明。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T19:14:13.963

```
import re
f = open("ephemeris.txt")
for line in f.readlines():
    r = re.search("(\d{4})\-(\w{3})-(\d{2}) (\d{2}):(\d{2}) \*   (.*?)\\\n", line)
    if r:
        print "Year: "+r.group(1)
        print "Month: "+r.group(2)
        print "Day: "+r.group(3)
        print "Hour: "+r.group(4)
        print "Minute: "+r.group(5)
        print "Data: "+r.group(6) 
```

这将读取文件的每一行，检查它是否与模式匹配，如果匹配，则打印它可以检索的所有数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T19:46:25.870

您还可以拆分每一行，设置字符分隔符。然后您可以使用索引访问每个（字符串）令牌：

```
def prova():
    f = open('/home/frenk/Desktop/ephemeris.txt')
    l = []
    for line in f:
        l = line.split(" ")
        print "date: " + l[1] 
```

其次，如果你想将像“31”这样的字符串转换为整数31，你可以简单地写：

```
x = int('31') 
```

请注意，您可以使用切片表示法选择字符串切片：

```
string = "This is a slice of string"
print string[10:15] 
```

# c# - 在 C# 中使用 Windows API 函数

> ID：15910323
> 
> 赞同：0
> 
> 时间：2013-04-09T18:58:22.860
> 
> 标签：c#, pinvoke

所以，我想在 C# 中使用 CreateProcess API 函数。我知道我必须导入 kernel32.dll 文件并覆盖函数头并将其标记为 extern。我也知道我必须实现函数使用的结构。我遇到的问题如下：我在哪里可以看到我需要实现的结构的确切结构？

```
[DllImport("Kernel32.dll")]
public static extern HANDLE CreateThread(PSECURITY_ATTRIBUTES psa,
                                             DWORD cbStack,
                                             PTHREAD_START_ROUTINE pfnStartAddr,
                                             PVOID pvParam,
                                             DWORD fwdCreate,
                                             PDWORD pdwThreadID); 
```

我需要实现以下结构才能使其正常工作：HANDLE、DWORD ...以及其余的我该怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T19:06:30.050

您不需要重新实现这些类型。您只需要将它们翻译成相应的 .NET 等效项：

[平台调用数据类型](http://msdn.microsoft.com/en-us/library/ac7ay120.aspx)

您可能还想知道 .NET 有自己的创建线程和进程的方式：

[进程类（System.Diagnostics）](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.aspx)

[线程类 (System.Threading)](http://msdn.microsoft.com/en-us/library/system.threading.thread.aspx)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-09T19:01:42.760

您可以使用[pinvoke.net](http://pinvoke.net/)作为 Win32 API 翻译的来源。例如，以下是您感兴趣的两个：

*   [创建过程](http://pinvoke.net/default.aspx/kernel32/CreateProcess.html)
*   [创建线程](http://pinvoke.net/default.aspx/kernel32/CreateThread.html)

请注意，那里的翻译质量参差不齐。例如，`CreateThread`上面的链接有两个版本。其中只有一个是准确的。是哪一个一目了然！

更一般地说，您应该好好阅读 MSDN [p/invoke 教程](http://msdn.microsoft.com/en-us/library/aa288468.aspx)和[Marshaling Data with Platform Invoke](http://msdn.microsoft.com/en-us/library/fzhhdwae.aspx)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T19:08:41.893

我发现 MSDN 主题[Windows 数据类型](http://msdn.microsoft.com/en-us/library/windows/desktop/aa383751.aspx)有助于识别 Windows DLL 中使用的各种类型别名。

# jquery - 自定义插件根本不起作用

> ID：15910325
> 
> 赞同：0
> 
> 时间：2013-04-09T18:58:39.233
> 
> 标签：jquery, jquery-ui, jquery-plugins, jquery-effects

我正在尝试将自定义插件应用于某些`div`. 这是代码：

```
$.fn.popout = function( options ){

    var settings = $.extend({
        l : this.width()/2,
        h : this.height()/2,
        percent: 100,  //default 100
        speed : 800, //default 800 
        easing : 'easeOutBounce'    //default easeOutBounce
    },options);

    return this.effect(
            'scale',
            {origin:['middle','center'], 
            from:{width: settings.l, height: settings.h},
            percent: settings.percent,
            direction: 'both',
            easing: settings.easing}, settings.speed);
}; 
```

如您所见，它对`$('.someclass')`div 应用了一种“弹出”效果。问题是，如果我`effect`以这种方式应用：

```
$('.someclass').effect('scale', .. code ) 
```

它完美地工作，而不是如果我使用

```
$('.someclass').popout({..options..}) 
```

当脚本运行时，`scaled`元素没有达到它的`100%`值，但它停留在`from`维度上。

建议？

我编写插件是因为我必须在脚本的不同时刻将它应用到多个 div。

# netbeans - Netbeans - 禁用 CTRL+Click 作为“转到定义”的快捷方式

> ID：15910330
> 
> 赞同：3
> 
> 时间：2013-04-09T18:58:57.750
> 
> 标签：netbeans, ide, go-to-definition

Netbeans（Win7 Pro 上的 7.2）有一个漂亮的功能，您可以按住 CTRL 然后单击变量以“转到定义”。

我正在工作的项目是通过网络共享进行的。因此，我的索引很慢（这很好）。问题是，当我按下 CTRL 时，整个界面变慢，因为 Netbeans 拼命尝试支持这个很酷的“转到定义”功能。

我在一个非常古老的项目中，该项目的组装很差，而且该功能对我来说并没有多大用处。 **有没有办法关掉它？**

我按 CTRL*很多*。我不断地使用热键，并在使用箭头时按住 CTRL 来浏览单词和定义。这大大减慢了我的速度，我真的需要以某种方式摆脱它。我愿意接受其他建议。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-10T16:12:15.950

如果您使用**Ctrl + B**怎么办，我使用它并且效果很好

BR

# c++ - 为什么不调用析构函数？

> ID：15910332
> 
> 赞同：1
> 
> 时间：2013-04-09T18:59:11.127
> 
> 标签：c++, stack

这是合乎逻辑的，在堆栈上创建对象...对象的副本被返回，原始被删除

```
Box operator +(const Box& box) const 
{
    Box b = Box(this->num + box.num);
    return b;                        
}  // destructor called! 
```

为什么在这种情况下过程不同？

```
Box operator +(const Box& box) const 
{
    return Box(this->num + box.num);
}   // destructor not called! 
```

为什么在第二种运算符重载方法中没有调用析构函数？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-09T19:02:27.777

您看到的是编译器不会通过执行[return-value-optimization](http://en.wikipedia.org/wiki/Return_value_optimization)来创建临时对象。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-09T19:02:39.990

不调用析构函数是因为编译器可以在此处执行“返回值优化”。有关详细信息，请参阅[http://en.wikipedia.org/wiki/Return_value_optimization](http://en.wikipedia.org/wiki/Return_value_optimization)。

# c# - 某处的端口读数（秤重）错误

> ID：15910333
> 
> 赞同：1
> 
> 时间：2013-04-09T18:59:14.223
> 
> 标签：c#, serial-port

嗨，代码如下所示...

试图从 com 端口读取数据并将秤发送到文本框中的重量显示到文本框中，我收到一条错误消息 -

WindowsFormsApplication1.Form1.textBox1_TextChanged(object, System.EventArgs)' 必须声明一个主体，因为它没有标记为抽象、外部或部分

我是 C# 新手，请帮忙

```
private void textBox1_TextChanged(object sender, EventArgs e);
}
namespace Read_serial
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();

            serialPort1.PortName = "COM1";
            serialPort1.BaudRate = 9600;
            serialPort1.DtrEnable = true;
            serialPort1.Open();

            serialPort1.DataReceived += serialPort1_DataReceived;
        }

        private void serialPort1_DataReceived(object sender, System.IO.Ports.SerialDataReceivedEventArgs e)
        {
            string line = serialPort1.ReadLine();
            this.BeginInvoke(new LineReceivedEvent(LineReceived), line);
        }

        private delegate void LineReceivedEvent(string line);
        private void LineReceived(string line)
        {
            //What to do with the received line here
            textBox1.Text = line;

            progressBar1.Value = int.Parse(line);
        }
    }
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T19:20:24.127

我没有在 Visual Studio 中尝试过，但请注意您的第一行：

```
private void textBox1_TextChanged(object sender, EventArgs e); 
```

相比于：

```
private void textBox1_TextChanged(object sender, EventArgs e) 
```

这 ; 最后几乎说“我完成了！” ...因此没有身体。

我不确定“}”是如何在该行之后出现的；上面的代码是否丢失？此外，它后面还有通常位于源文件顶部的语句。

我会尝试删除那条线和括号。还要检查带有表单的其他文件是否有 textBox1.TextChanged += textBox1_TextChanged 之类的内容，也将其删除 - 也许您可以在 IDE 中删除该事件（自从我使用 C# 以来已经有一段时间了）。在您的解决方案中搜索 textbox1_textchanged 以确定。

然后根据需要重新添加事件。现在它只是为你搞砸了。

# c++ - Prim 最小生成树算法的实现中的逻辑错误是什么？

> ID：15910337
> 
> 赞同：0
> 
> 时间：2013-04-09T18:59:29.407
> 
> 标签：c++, algorithm, minimum-spanning-tree

```
#define ll long long
ll prims(int n)
{
     ll ans;
    vector<bool> used (n); 

    #define INF 1000000000000LL

    vector<ll> min_e (n, INF), sel_e (n, -1);

     min_e[0]=-1*INF;

     ll dis=1;
    for(int i=0;i<n;i++)
    {
        int v=-1;
        for(int j=0;j<n;j++)
        {
             if (!used[j] && (v == -1 || min_e[j] < min_e[v]))
            v = j;
        }
        used[v] = true;
        if(sel_e[v]!=-1)
        cout << v << " " << sel_e[v] << endl;

    for (int to=0; to<n; ++to)
        if (g[v][to] < min_e[to]) {
            min_e[to] = g[v][to];
            sel_e[to] = v;
        }

    }
     for(int i=0;i<n;i++) cout<<i<<" "<<sel_e[i]<<" "<<g[i][sel_e[i]]<<endl;

    return dis;
} 
```

我正在尝试将 Prim 算法应用于负边权重的密集无向图，但我无法理解为什么它在几乎所有情况下都会产生错误的输出。我正在使用邻接矩阵 g[N][N] 来存储边缘。

实际上，我当前代码的输出是带有循环的最小生成树。为什么循环检查机制不起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T19:39:11.207

其实问题出在这里：

```
for (int to=0; to<n; ++to)
    if (g[v][to] < min_e[to]) {
        min_e[to] = g[v][to];
        sel_e[to] = v;
    }
} 
```

你应该只更新`sel_e`，`min_e`如果`to`还没有被访问过。

否则，请考虑这种情况：

`0 -- 1 -- 2`

其中`w({0, 1}) = 10`, 和`w({1, 2} = 1)`. 你会设置`sel_e[1] = 2`，即使你需要`sel_e[1] = 0`。

# facebook - 获取gamecenter好友的缩略图url

> ID：15910338
> 
> 赞同：1
> 
> 时间：2013-04-09T18:59:31.380
> 
> 标签：facebook, url, game-center

我可以使用 URL 从他们的 fbid 中获取我的 facebook 朋友的缩略图`http://graph.facebook.com/<fbid>/picture?type=square`

Gamecenter 有类似的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-03T19:49:53.167

是的，一旦你有了他们的 GKPlayer 对象，你就可以使用`GKPlayer`'方法。有关详细信息，`loadPhotoForSize:withCompletionHandler:`请参阅 Apple 的[文档。](http://developer.apple.com/library/ios/#documentation/GameKit/Reference/GKPlayer_Ref/Reference/Reference.html)

# sql - 访问减时间

> ID：15910341
> 
> 赞同：2
> 
> 时间：2013-04-09T18:59:38.313
> 
> 标签：sql, ms-access, datetime, ms-access-2007

如何在 Access 表中减去两次？

查询必须自动完成。我需要在到达时减去剩余时间，这样我才能得到工作时间：

查询必须填写表中的小时列，所以我可以在 c# 程序中获取它。

> [左]- [到达]

![数据表视图中的表格图像](https://i.stack.imgur.com/4Qd27.jpg)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T19:15:11.473

在访问中，如果字段是日期/时间类型，则只需减去它们并根据需要格式化输出即可。减法的结果是天数和天数的分数。如果你想以小时为单位，只需乘以 24，即得到小时数和小时数的分数

```
SELECT cdbl([Left] - [Arrived]) * 24 as worked_hours FROM yourtable 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T19:03:50.117

日期差异

DateDiff ( 间隔, date1, date2, [firstdayofweek], [firstweekofyear])

[http://www.techonthenet.com/access/functions/date/datediff.php](http://www.techonthenet.com/access/functions/date/datediff.php)

DateDiff ("h", [Arrived], [Left])

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T19:56:18.603

正如罗素所说，使用`DateDiff`函数。我在测试 MsAccess DB 上进行了测试，它可以工作。这是我的选择声明：

```
SELECT DateDiff('n',[Arrived],[Left])/60 AS Worked, 
       DateDiff('s',[Arrived],[Left])/3600 AS Worked2, 
       *
FROM Table1; 
```

样本结果：

```
Worked               Worked2               Left                  Arrived
1                    0.999722222222222      4/9/2013 3:00:00 PM  4/9/2013 2:00:01 PM
0.833333333333333    0.833055555555556      4/9/2013 3:00:00 PM  4/9/2013 2:10:01 PM
1.66666666666667E-02 2.77777777777778E-04   4/9/2013 3:00:00 PM  4/9/2013 2:59:59 PM
24                   23.9997222222222       4/9/2013 3:00:00 PM  4/8/2013 3:00:01 PM 
```

如您所见，Worked2 方法（按秒）更准确一些。

# jquery - jQuery 的视口选择器在 Internet Explorer 8 中失败

> ID：15910345
> 
> 赞同：0
> 
> 时间：2013-04-09T18:59:50.497
> 
> 标签：jquery, viewport

令人惊叹的插件“Jquery 的视口选择器”（[http://www.appelsiini.net/projects/viewport](http://www.appelsiini.net/projects/viewport)）有效，但它似乎是作者放弃的一个旧项目。使用示例：

```
$(window).scroll(function () {
  $("#mydiv:in-viewport").each(function() {
      $(this).css('background-color','red');
  });
}); 
```

在 IE9+、Chrome 上工作，在 IE8 上失败，在滚动页面上崩溃 IE。

有什么提示可以解决这个问题吗？或者只是禁用视口检测，即始终可见......

太棒了！

# c# - ViewResult 存在于“System.Web.Mvc.dll”和“System.Web.Mvc.dll”中

> ID：15910346
> 
> 赞同：2
> 
> 时间：2013-04-09T18:59:51.420
> 
> 标签：c#, asp.net-mvc, unit-testing, controller, gac

我正在为我的 MVC4 项目中的控制器方法编写单元测试。

作为 - 行动 - 阶段的一部分，我是：-

```
var result  = controller.SomeMethod(SomeViewModel) as ViewResult; 
```

当我收到错误消息时 - ViewResult 存在于“System.Web.Mvc.dll”和“System.Web.Mvc.dll”中。

在我的项目解决方案中，我确实对此程序集有一个引用。我在 GAC 中有 2 个不同的版本。

解决这个问题的行动方案应该是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T19:00:36.273

测试项目引用了 MVC 4.0，被测项目引用了 MVC 3.0。FWIW 在这里回答。

# javascript - JQuery DatePicker 渲染丑陋

> ID：15910350
> 
> 赞同：1
> 
> 时间：2013-04-09T19:00:05.427
> 
> 标签：javascript, jquery, asp.net-mvc

我正在尝试使用 JQuery 实现 DatePicker，这是我的代码：

```
<script src="@Url.Content("~/Scripts/jquery-1.7.1.js")" type="text/javascript">   </script>
<script src="@Url.Content("~/scripts/jquery-ui-1.8.20.js")" type="text/javascript"></script>
@Html.TextBox("a",Model.ContractStart, new { @class = "datepicker" })

<script>

$('.datepicker').datepicker({

    dateFormat: "dd/mm/yy"
});
</script> 
```

问题是它的渲染真的很丑，不像他们在教程中展示的那样......

这是我得到的结果：

![在此处输入图像描述](https://i.stack.imgur.com/Xk5lz.png)

这是教程中的一个：

[http://blogs.msdn.com/cfs-file.ashx/__key/CommunityServer-Blogs-Components-WeblogFiles/00-00-01-03-74-metablogapi/7737.image_5F00_477473C0.png](http://blogs.msdn.com/cfs-file.ashx/__key/CommunityServer-Blogs-Components-WeblogFiles/00-00-01-03-74-metablogapi/7737.image_5F00_477473C0.png)

我真的是 JQuery 的新手......我已经检查了这个 datepicker 的 JQuery 页面，但它的代码相同，但它看起来仍然不像我的，我做错了什么？

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T19:03:21.957

您忘记在标题中包含 CSS。没有它们，它就无法设计它。

```
<head>
    <link href="@Url.Content("~/Contect/jquery-ui-1.8.20.custom.css")" rel="styleshee" type="text/css" />
    <script src="@Url.Content("~/Scripts/jquery-1.7.1.js")" type="text/javascript">           </script>
    <script src="@Url.Content("~/scripts/jquery-ui-1.8.20.js")" type="text/javascript"></script>
</head> 
```

# jquery - CSS/JQuery AddRemove 类需要点击 2 次？

> ID：15910353
> 
> 赞同：0
> 
> 时间：2013-04-09T19:00:06.497
> 
> 标签：jquery, css

实时视图：[https ://tornhq.com/WorkingOn/Account/Management/PageBuilder/editor.html](https://tornhq.com/WorkingOn/Account/Management/PageBuilder/editor.html)

如果您单击类名称为“.Button”的底部按钮行，则需要单击两次才能添加“ButtonActive”类。

我还想知道如何实现它，以便在单个时间只能激活“Sub”或“Super”脚本按钮中的一个。

**我的jQuery：**

```
<script type="text/javascript">
    $(document).click(function (e) {
        $('.Button').click(function () {
            if ($(this).hasClass("ButtonActive") ) {
                $(this).removeClass("ButtonActive");
            } else {
                $(this).addClass("ButtonActive");
            };
        });
    });
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T19:02:14.970

```
$(document).click(function (e) { 
```

改成`ready`

```
jQuery(document).ready(function ($) { 
```

此外，这不是`eventObject`作为参数传递的，而是`jQuery`对象本身。

短句法

```
jQuery(function($) { 
```

正如@Kevin B 提到的那样，使用`toggleClass()`会更有效率。

# php - 如何过滤进入 CSV 文件的数据？

> ID：15910358
> 
> 赞同：0
> 
> 时间：2013-04-09T19:00:34.397
> 
> 标签：php, file

我正在尝试使用数据库中的值生成一个 CSV 文件并强制下载它。它工作正常，除了文件从服务器获取（不相关的）错误消息并将它们包含在 CSV 文件中。我该如何防止这种情况发生？

这是我的功能：

```
public function export($coupons_ids) {
        $coupons_ids = explode(',', (urldecode($coupons_ids)));

        $result = $this->cart_coupons->get_where_in('id',array_filter($coupons_ids, 'strlen'));

        header('Content-Type: text/csv; charset=utf-8');
        header('Content-Disposition: attachment; filename=coupons.csv');

        $output = fopen('php://output', 'w');

        fputcsv($output, array('id', 'name', 'start_date', 'end_date', 'promo', 'usage_limit'));

        foreach ($result as $row)
        {
            $id = $row->id;
            $name = $row->name;
            $start_date = $row->start_date;
            $end_date = $row->end_date;
            $usage_limit = $row->usage_limit;

            $active = '';
            switch($row->active)
            {
            case 0:
                $active = 'YES';
                break;
            case 1:
                $active = 'NO';
                break;
            }

            $promo = '$0';
            switch($row->promo_type)
            {
            case 0:
                $promo = '$' . $row->promo_value;
                break;
            case 1:
                $promo = $row->promo_value . '%';
                break;
            }

            $data = array('id' => $id, 'name' => $name, 'start_date' => $start_date, 'end_date' => $end_date, 'promo' => $promo, 'usage_limit' => $usage_limit);
            fputcsv($output, $data);
        }

        fclose($output);

    } 
```

输出是：

```
<br />
<b>Strict Standards</b>:  Only variables should be passed by reference in <b>D:\xampp\htdocs\----\-----.php</b> on line <b>245</b><br />
id,name,start_date,end_date,promo,usage_limit
3,Test3,"2013-03-12 00:00:00","2013-03-20 00:00:00",$500,10
4,Test4,"2013-03-17 00:00:00","2013-04-25 00:00:00",25%,50
5,Test5,"2013-03-20 00:00:00","2013-03-25 00:00:00",$40,1000
6,Test6,"2013-03-12 00:00:00","2013-03-20 00:00:00",$50,100
7,Test7,"2013-03-15 00:00:00","2013-03-28 00:00:00",10%,150
81,CC00016,"2013-04-20 00:00:00","2013-04-27 00:00:00",$100,10
80,CC00015,"2013-04-16 00:00:00","2013-04-23 00:00:00",$100,1
79,CC00014,"2013-04-16 00:00:00","2013-04-23 00:00:00",$100,1
78,CC00013,"2013-04-16 00:00:00","2013-04-23 00:00:00",$100,1
76,CC00011,"2013-04-16 00:00:00","2013-04-23 00:00:00",$100,1
77,CC00012,"2013-04-16 00:00:00","2013-04-23 00:00:00",$100,1 
```

我知道这个错误是什么，它与代码的功能完全无关和无关。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T19:03:07.143

放在`error_reporting(0);`脚本的开头以获得快速的'n'dirty解决方案

# wordpress - Wordpress single.php 页面 - 限制文本

> ID：15910361
> 
> 赞同：-1
> 
> 时间：2013-04-09T19:00:43.437
> 
> 标签：wordpress

我在 wordpress 中编码网站，但有一些简单的问题。但我不知道我该如何解决这个问题。所以我需要你的帮助。

第一个问题是文本超出了网络，这不是我想要的。然后我想限制文本，当我们说 2500 个单词时，= 第 1 页，共 2 页。

这是图片。[http://shrani.si/f/2J/kj/1UNhd0Wx/capture.png](http://shrani.si/f/2J/kj/1UNhd0Wx/capture.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T19:04:11.470

Wordpress 有一个修词功能：[wp_trim_words](http://codex.wordpress.org/Function_Reference/wp_trim_words)。

但这不完全是你所要求的。我不认为有任何内置的方法可以做你想做的事，但我敢肯定它是可能的。我会为此使用 javascript，否则您会将字符串偏移量传递给您的 PHP 脚本，而这只是 naaaasty。

快速谷歌搜索“JavaScript Autopaginate”出现了[这个小家伙](http://www.dynamicdrive.com/dynamicindex17/virtualpagination.htm)。它似乎能够满足您的要求，但我从来没有使用过它，所以 YMMV。

# haskell - 将枚举列表按位表示为 Int

> ID：15910363
> 
> 赞同：5
> 
> 时间：2013-04-09T19:01:02.423
> 
> 标签：haskell, enums, bit-manipulation

为了在外部保存用户帐户权限（例如在 DB 中），我想将具有派生`Enum`实例的枚举元素列表表示为`Int`.
数字的每一位都被视为一个标志（或布尔值），表示第 i 个元素是否存在于列表中。
用不同的话来说——2的每个幂代表一个元素，这些幂的总和是一个*唯一*的元素列表。

例子：

```
data Permissions = IsAllowedToLogin   -- 1
                 | IsModerator        -- 2
                 | IsAdmin            -- 4
                 deriving (Bounded, Enum, Eq, Show) 

enumsToInt [IsAllowedToLogin, IsAdmin] == 1 + 4 == 5

intToEnums 3 == intToEnums (1 + 2) == [IsAllowedToLogin, IsModerator] 
```

* * *

将这样的列表转换为 an 的函数`Int`很容易编写：

```
enumsToInt :: (Enum a, Eq a) => [a] -> Int
enumsToInt = foldr (\p acc -> acc + 2 ^ fromEnum p) 0 . nub 
```

*请注意，接受的答案包含更有效的实现。*

真正困扰我的是倒车功能。我可以想象它应该有这种类型：

```
intToEnums :: (Bounded a, Enum a) => Int -> [a]
intToEnums = undefined               -- What I'm asking about 
```

我应该如何解决这个问题？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-09T19:50:23.537

以下是一个完整的解决方案。它应该表现得更好，因为它的实现是基于位而不是算术运算，这是一种更有效的方法。该解决方案还尽力概括事物。

```
{-# LANGUAGE DefaultSignatures #-}
import Data.Bits
import Control.Monad

data Permission = IsAllowedToLogin   -- 1
                | IsModerator        -- 2
                | IsAdmin            -- 4
                deriving (Bounded, Enum, Eq, Show) 

class ToBitMask a where 
  toBitMask :: a -> Int
  -- | Using a DefaultSignatures extension to declare a default signature with
  -- an `Enum` constraint without affecting the constraints of the class itself.
  default toBitMask :: Enum a => a -> Int
  toBitMask = shiftL 1 . fromEnum

instance ToBitMask Permission

instance ( ToBitMask a ) => ToBitMask [a] where 
  toBitMask = foldr (.|.) 0 . map toBitMask

-- | Not making this a typeclass, since it already generalizes over all 
-- imaginable instances with help of `MonadPlus`.
fromBitMask :: 
  ( MonadPlus m, Enum a, Bounded a, ToBitMask a ) => 
    Int -> m a
fromBitMask bm = msum $ map asInBM $ enumFrom minBound where 
  asInBM a = if isInBitMask bm a then return a else mzero

isInBitMask :: ( ToBitMask a ) => Int -> a -> Bool
isInBitMask bm a = let aBM = toBitMask a in aBM == aBM .&. bm 
```

使用以下命令运行它

```
main = do
  print (fromBitMask 0 :: [Permission])
  print (fromBitMask 1 :: [Permission])
  print (fromBitMask 2 :: [Permission])
  print (fromBitMask 3 :: [Permission])
  print (fromBitMask 4 :: [Permission])
  print (fromBitMask 5 :: [Permission])
  print (fromBitMask 6 :: [Permission])
  print (fromBitMask 7 :: [Permission])

  print (fromBitMask 0 :: Maybe Permission)
  print (fromBitMask 1 :: Maybe Permission)
  print (fromBitMask 2 :: Maybe Permission)
  print (fromBitMask 4 :: Maybe Permission) 
```

输出

```
[]
[IsAllowedToLogin]
[IsModerator]
[IsAllowedToLogin,IsModerator]
[IsAdmin]
[IsAllowedToLogin,IsAdmin]
[IsModerator,IsAdmin]
[IsAllowedToLogin,IsModerator,IsAdmin]
Nothing
Just IsAllowedToLogin
Just IsModerator
Just IsAdmin 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-09T19:49:17.687

[我敢肯定 hackage 上已经有一些东西可以做到这一点，但是使用模块手动滚动你自己](http://hackage.haskell.org/packages/archive/base/latest/doc/html/Data-Bits.html)[的`Data.Bits`](http://hackage.haskell.org/packages/archive/base/latest/doc/html/Data-Bits.html)很简单。

您可以简化`enumsToInt`为类似的东西`foldl' (.|.) . map (bit . fromEnum)`，即转换为整数索引，然后转换为单个位，然后使用按位或折叠。如果不出意外，这使您不必担心删除重复项。

因为`intToEnums`没有什么令人难以置信的方便，但为了快速解决方案，您可以执行类似`filter (testBit foo . fromEnum) [minBound .. maxBound]`. 这当然只适用于`Bounded`类型，并假定枚举的值不超过外部类型的位，并且`fromEnum`使用从 0 开始的连续整数，但听起来你是从所有这些作为前提开始的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-09T19:43:43.403

[EnumSet](http://hackage.haskell.org/packages/archive/enumset/0.0.4/doc/html/Data-EnumSet.html)可能正是您想要的。它甚至有一个`intToEnums`功能（尽管它似乎只与`T Integer a`我尝试过的类型一致 - 特别是`T Int Char`会给出意想不到的结果）并且在序列化/反序列化后不会重新创建重复条目（鉴于它是一个集合），而一份清单可能带有这种期望。

# html - 带 CSS 的居中菜单

> ID：15910364
> 
> 赞同：0
> 
> 时间：2013-04-09T19:01:03.880
> 
> 标签：html, css, center

[jsFiddle](http://jsfiddle.net/2GG7Y/)

我需要将使用无序列表的固定标题导航居中。中间的列表项留空，因为我将背景图像放在那里。

现在它“看起来”居中，但如果你用橡皮筋浏览器窗口，你会发现它不是。我可以通过将宽度从 960px 减少到 ~780px 来达到*几乎*中间，但我不想这样做。

我确定我在这里忽略了一些简单的事情。谢谢！

**HTML：**

```
<header>
    <nav>
        <ul>
            <li><a class="active" href="#">Home</a></li>
            <li><a href="#">Portfolio</a></li>
            <li><a href="#">Services</a></li>
            <li class="logo"></li>
            <li><a href="#">Blog</a></li>
            <li><a href="#">About</a></li>
            <li><a href="#">Contact</a></li>
        </ul>
    </nav>
</header> 
```

**CSS**

```
html, body, div, span, applet, object, iframe,
h1, h2, h3, h4, h5, h6, p, blockquote, pre,
a, abbr, acronym, address, big, cite, code,
del, dfn, em, img, ins, kbd, q, s, samp,
small, strike, strong, sub, sup, tt, var,
b, u, i, center,
dl, dt, dd, ol, ul, li,
fieldset, form, label, legend,
table, caption, tbody, tfoot, thead, tr, th, td,
article, aside, canvas, details, embed, 
figure, figcaption, footer, header, hgroup, 
menu, nav, output, ruby, section, summary,
time, mark, audio, video {
    margin: 0;
    padding: 0;
    border: 0;
    font-size: 100%;
    font: inherit;
}
/* HTML5 display-role reset for older browsers */
article, aside, details, figcaption, figure, 
footer, header, hgroup, menu, nav, section {
    display: block;
}

body{
    background-color: #ebebeb;
}

nav {
    width: 960px;
    margin: 0 auto;
}

ul{
    list-style-type: none;
    text-align: center;
}

li{
    display: inline-block;
    height: 120px;
    float: left;
    text-align: center;
    line-height: 120px;
    margin-right: 30px;
}

.logo {
    height: 130px;
    width: 164px;
    background:url(http://samaradionne.com/img/typeBlack.png) no-repeat;
}

section.stretch{
    float: left;
    height: 1500px;
    width: 100%;
}

header{
    width: 100%;
    background: #fff;
    border-bottom: 1px solid #aaaaaa;
    position: fixed;
    z-index: 10;
    text-align: center;
}

header a{
    color: #969696;
    text-decoration: none;
    font-family:  sans-serif;
    text-transform: uppercase;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T19:11:53.347

添加`display: inline-block;`到`ul`，它将正确居中

**工作小提琴：**

[http://jsfiddle.net/2GG7Y/12/](http://jsfiddle.net/2GG7Y/12/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T19:14:17.307

设置`ul`为`display:inline-block;`

```
ul{
  list-style-type: none;
  text-align: center;
  display:inline-block;
} 
```

演示：http: [//jsfiddle.net/2GG7Y/10/](http://jsfiddle.net/2GG7Y/10/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T19:14:29.693

也可以使用`inline-table`

```
ul {
  display:inline-table;
} 
```

[http://jsfiddle.net/2GG7Y/13/](http://jsfiddle.net/2GG7Y/13/)

您可以使用 CSS 表更进一步

```
li {
  display:table-cell;
} 
```

虽然，这些元素在大多数浏览器中都可以使用，但您可能需要交叉测试后备。

# asp.net-mvc - System.Runtime.InteropServices.COMException 与 Web 服务器上的兑换

> ID：15910372
> 
> 赞同：0
> 
> 时间：2013-04-09T19:01:37.840
> 
> 标签：asp.net-mvc, outlook-redemption

我在 ASP.NET MVC 站点中使用[Redemption来读取 .msg 文件，进行一些更改并将其输出给用户。](http://www.dimastr.com/redemption/home.htm)它可以在我的开发机器上运行，但是当我在登台服务器上尝试时，我收到了这个错误。

```
System.Runtime.InteropServices.COMException (0x80004005): Error HRESULT E_FAIL has been returned from a call to a COM component.     at Redemption.RedemptionLoader.IClassFactory.CreateInstance(Object pUnkOuter, Guid& refiid, Object& ppunk) 
```

是不是因为我的服务器上没有安装outlook？我的理解是不需要 Outlook。我还尝试使用 regsvr32.exe 注册 DLL，但这没有帮助。

更新：我安装了 Dmitry 建议的独立 MAPI，并重新构建了我的网络应用程序以针对 x64 平台。服务器是 Windows Server 2008 R2 x64，所以我认为 64 位是正确的目标。但它仍然给我同样的错误。我的代码如下所示：

```
RedemptionLoader.DllLocation64Bit = Server.MapPath("~/bin/dlls/Redemption64.dll");
RedemptionLoader.DllLocation32Bit = Server.MapPath("~/bin/dlls/Redemption.dll");
Interop.Redemption.RDOSession session = RedemptionLoader.new_RDOSession(); 
```

第三行是抛出错误。我错过了什么吗？

我还尝试将站点编译为以 x86 为目标，但此时 IIS 不会加载站点 .dll。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T20:11:22.667

兑换需要安装 MAPI 系统，这意味着必须安装 Outlook 或[MAPI 的独立版本](http://www.microsoft.com/downloads/details.aspx?FamilyID=e17e7f31-079a-43a9-bff2-0a110307611e&DisplayLang=en)。还要确保您的代码位数与 MAPI 系统的位数相匹配 - 请参阅[http://www.dimastr.com/redemption/faq.htm#ErrorCreatingRedemptionObject](http://www.dimastr.com/redemption/faq.htm#ErrorCreatingRedemptionObject)

# magento - Magento 未安装在本地主机上

> ID：15910374
> 
> 赞同：0
> 
> 时间：2013-04-09T19:01:39.207
> 
> 标签：magento, localhost, installation

尝试在 localhost 上安装 magento 1.7.0.2 但收到错误“错误 101 (net::ERR_CONNECTION_RESET)：连接已重置。”

我将 wampserver2.2 与 Apache 2.2.21、php 5.3.9、MySQL 5.5.20 一起使用

还启用 php 扩展 php_curl、php_mcrypt

但问题仍然存在。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T19:56:17.147

假设您正在使用安装向导进行安装（请参阅[http://www.hostknox.com/tutorials/magento/installation](http://www.hostknox.com/tutorials/magento/installation)）。

确保选中“跳过基本 URL 验证”复选框。

还要尽量避免使用'localhost'，最好使用'dev.[mysite.com]'，因为一旦你的域以'dev.'开头，一些付费扩展将允许你评估他们的扩展而无需密钥。

![在此处输入图像描述](https://i.stack.imgur.com/r2tqz.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-27T08:34:16.263

我尝试在 XAMPP 1.7.3 上安装 magento 并成功..

请按照以下步骤操作：

1) Xampp 1.7.3

2) 视窗XP。

a) 创建数据库。

b) 删除 app/etc/local.xml 文件。（可选不存在离开它）

c）代替 localhost 我使用 127.0.0.1

d) 转到 app\code\core\Mage\Core\Model\Session\Abstract\Varien.php

// 会话 cookie 参数

$cookieParams = 数组（

'lifetime' => $cookie->getLifetime(),

'path' => $cookie->getPath() //, 去掉逗号

// '域' => $cookie->getConfigDomain(),

// '安全' => $cookie->isSecure(),

// 'httponly' => $cookie->getHttponly()

);

e) 我在文件 set_time_limit (18000) 开始处的 index.php 中添加了一行；

f) 在 Web 访问选项 -> 清单启用图表和跳过基本 URL

现在安装工作对我有好处.. :D

**注意**：您必须修改您的 XAMPP

转到-> httpd.conf

寻找这一行：

# LoadModule rewrite_module modules/mod_rewrite.so

删除“#”以启用它并保存

和上

php.ini - 找到这一行

;扩展=php_curl.dll

消除 ”;” 启用它并保存。

# javascript - 检查对象是否在对象名称为字符串的地方定义

> ID：15910385
> 
> 赞同：1
> 
> 时间：2013-04-09T19:02:31.113
> 
> 标签：javascript

有没有办法在不使用的情况下执行以下操作`eval()`？

以下函数接受一个**字符串数组，**其中字符串是对象名称。我遍历它们以确保它们都不是未定义的。我希望能够在不使用的情况下做到这一点`eval()`

```
function hasMissingDependencies(dependencies) {
    var missingDependencies = [];

    for (var i = 0; i < dependencies.length; i++) {
        if (eval('typeof ' + dependencies[i]) === 'undefined') {
            missingDependencies.push(dependencies[i]);
        }
    }

    if (missingDependencies.length > 0) {
        return true;
    }

    return false;
} 
```

有了这个，我可以通过以下内容并得到我想要的东西：

```
alert(hasMissingDependencies(['App.FooObject', 'App.BarObject'])); 
```

当对象名称作为字符串传递时，我宁愿不使用`eval()`但还没有找到另一种方法来检查对象是否未定义。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T19:11:06.190

假设这些是全局变量（IE 未在内部函数范围内定义），您可以拆分句点并使用括号表示法。

就像是

```
function isDefined(name, obj){
   if(!obj){
      obj = window;
   }
   var pathArr = name.split(".");
   obj = obj[pathArr.splice(0,1)];
   if(typeof obj !== undefined){

     return pathArr.length ? isDefined(pathArr.join("."),obj): true;
   }

   return false;

} 
```

请注意，除非您尝试编写 requireJS 替换，否则这几乎总是一个坏主意。检查值是否存在于您调用函数的上下文中，然后传入值（如果存在）或 null/undefined/某个默认值。如果您不控制传递的上下文，请询问对象，然后检查它们是否已定义。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T19:03:42.510

您似乎想检查名称在您的数组中的全局变量是否已定义。

您可以构建一个简单的函数来获取这些变量：

```
function getVar(name) {
   var v = window, path=name.split('.');
   while (path.length>0 && v) v = v[path.shift()];
   return v;
} 
```

这将允许您测试

```
if (typeof getVar(dependencies[i]) === 'undefined') 
```

# actionscript-3 - as3 AIR Win- 在全屏窗口中防止 ALT+空格键

> ID：15910388
> 
> 赞同：3
> 
> 时间：2013-04-09T19:02:37.600
> 
> 标签：actionscript-3, flash, air, addeventlistener

我有一个本地全屏 AIR 应用程序（从服务器加载多个 SWF），我正在尝试`ALT+<letter>`用作快捷方式。

但是 Windows 操作系统会拦截该`ALT`键，例如当我按下时显示左上角窗口菜单`ALT+Space`，这是我想阻止的。

我发现这些帖子，这似乎是一个解决方案：

*   [http://blog.six4rty.ch/2010/11/09/air-quick-hint-suppress-keyboard-events/](http://blog.six4rty.ch/2010/11/09/air-quick-hint-suppress-keyboard-events/)

*   [http://inflagrantedelicto.memoryspiral.com/2009/12/adobe-air-preventing-users-from-closing-the-app/](http://inflagrantedelicto.memoryspiral.com/2009/12/adobe-air-preventing-users-from-closing-the-app/)

*   [禁用某些键的默认操作](https://stackoverflow.com/questions/4987406/disable-certain-keys-default-action)

但没有运气。我试过这样使用`preventDefault()`：

```
this.stage.addEventListener(KeyboardEvent.KEY_DOWN, ff);
...
function ff(e:KeyboardEvent):void {
                e.preventDefault();
            } 
```

但这并不能阻止操作系统拦截`ALT`密钥......

关于缺少什么的一些线索？

/谢谢 /j

我在 Flash CS5.5 / Win XP / Air 2.6 中编译 如果我编译和运行 Air-app，或者只是从 Flash IDE ( `Ctrl+Enter`) 中调试，没有区别。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T13:13:26.187

你不能阻止它，因为它是一个操作系统功能。就像您试图阻止 ctrl+alt+del 一样，这是不允许的。使用 AS3 preventDefault，您只阻止虚拟机的事件，操作系统“冒泡”继续。你也不会对 ANE 有好运，因为你也不能在 c++ 中做到这一点。

# c# - Xamarin 是否支持在没有 mac 的 windows 机器上进行 iPad 和 iTouch 开发？

> ID：15910397
> 
> 赞同：1
> 
> 时间：2013-04-09T19:03:00.067
> 
> 标签：c#, ipad, xamarin.ios, xamarin

我是一名 WPF C# .net 开发人员，很高兴听到有关 Xamarin 的消息。所以我去了他们的网站，下载了他们的应用程序的免费版本，并想编写一个 ios (iPad) 应用程序。但是，当我使用 Xamarin IDE 打开一个新项目时，它没有给我任何 IOS 项目的选项。都是安卓。

我去了他们的网站，正在观看他们关于如何开发 IOS 应用程序的教学视频，他们说你需要使用 mac。视频是否已过时，或者您真的需要使用 Mac 才能使用 Xamarin 开发 iPad 应用程序？

如果有人一直在使用 Xamarin，请在此处通过管道告诉我这是如何工作的，以及使用 Xamarin 开发 iPad 应用程序的学习曲线是什么。

我可能需要购买 1800 美元的版本，还是可以使用免费版本？

谢谢你的帮助，柯蒂斯

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T19:15:55.097

是的，你必须有一台 Mac 才能进行 iOS 开发。Apple SDK 仅在 Mac 上可用。您可以使用 Mac 作为主要开发机器，也可以在 Windows 中使用 Visual Studio 进行开发，并且只使用 Mac 作为构建服务器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T14:54:23.167

如果您购买 Xamarin 的商业版，那么您只需要在构建过程中使用 Mac，您可以在[http://www.macincloud.com/](http://www.macincloud.com/) 上按小时租用它。使用商业版，您可以使用 Visual Studio（Express eiditions 不支持任何插件，因此不能与 Xamarin 一起使用）在 Windows 机器上编写 iOS 应用程序。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T19:09:44.073

我不认为视频已经过时了。

您可以使用 Visual Studio，但要编译本机应用程序或运行 iOS 模拟器，您需要 Mac。原因是 iOS 开发需要 Apple SDK 及其产品 - 编译器、Xcode 和设备模拟器，它们不能在 Windows 上运行

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-09T20:15:36.360

Windows 上的 Xamarin Studio 不支持 Xamarin.iOS。您需要 Windows 上的 Visual Studio 或 Mac 上的 Xamarin Studio。

iPad 应用程序的学习曲线与不使用 Xamarin 大致相同，因为您仍然需要学习 iOS SDK、平台、程序的结构、方法调用的位置……主要区别是你想使用 obj-C 还是 C# 以及你想重用任何代码。

您不需要 1800 美元的版本，但如果您想使用 Visual Studio，则需要 999 美元的版本。starter 有应用程序大小限制，因此如果您不需要 Visual Studio 集成，indie 可能是最具成本效益的。

# android - SmackAndroid.init() 抛出 IllegalStateException：“无法初始化静态类块”

> ID：15910401
> 
> 赞同：2
> 
> 时间：2013-04-09T19:03:14.363
> 
> 标签：android, asmack

我开始使用 asmack for Android 来补充我已经构建的 Java 即时通讯应用程序。一段时间后，在定位我的服务器时遇到 ClassNotFound 异常和错误（尽管地址和端口是正确的），我读到了建议初始化静态类的 SmackAndroid 调用。我将其编码如下：

```
Context context = getApplicationContext();
SmackAndroid asmk = SmackAndroid.init(context); 
```

在建立任何 XMPP 连接之前，我将这些代码行添加到我的应用程序中，但它给了我一个完全无法解决的新错误。

`java.lang.RuntimeException: Unable to start activity ComponentInfo{cit.jordan.portablechatter/cit.jordan.portablechatter.MainActivity}: java.lang.IllegalStateException: Could not init static class blocks`

我在这里找到了适用于 android 17 的 asmack 0.8.2 jar：http: [//asmack.freakempire.de/](http://asmack.freakempire.de/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-29T04:13:03.897

我也面临同样的问题。然后我找到了一个解决方案，如下所示。

首先下载下面的jar [最新的asmack jar](http://asmack.freakempire.de/0.8.2/asmack-android-17-0.8.2.jar)

```
SmackAndroid.init(context);
AndroidConnectionConfiguration mAndroidConnectionConfiguration=new AndroidConnectionConfiguration(host, port); 
```

我认为这将解决您的连接问题。以上方法对我有用，所以我希望它对你有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T09:33:52.857

[InitStaticCode.java:48](https://github.com/Flowdalic/asmack/blob/master/static-src/custom/org/jivesoftware/smackx/InitStaticCode.java#L48)引发了异常，我从另一个用户那里得到了类似的报告。我总是想知道为什么它适用于大多数用户，但只有少数用户。

您可以尝试删除[InitStaticCode.java:34](https://github.com/Flowdalic/asmack/blob/master/static-src/custom/org/jivesoftware/smackx/InitStaticCode.java#L34)`getClass()`中的调用，看看它是否有效。另一个想法是，如果您无法自己修改和构建 aSmack，则可以更改您用作参数的上下文类型：尝试使用or 。也许这有帮助。`getApplicationContext()``getBaseContext`

我已将此作为[aSmack 的问题 #33](https://github.com/Flowdalic/asmack/issues/33)输入。也许我这个周末找时间修一下。

# ios - CMMotionManager deviceMotion 姿态值过度“闪烁”

> ID：15910402
> 
> 赞同：2
> 
> 时间：2013-04-09T19:03:16.520
> 
> 标签：ios, gyroscope, core-motion

我正在记录从`CMMotionManager deviceMotion`CADisplayLink 回调中获得的“态度”值（我需要根据设备旋转执行动画）。

这些值似乎每隔几毫秒就会“抽搐”很大程度（高达 30%）。这似乎很不稳定，让我怀疑我做错了什么，或者设备是否有问题。

请在下面找到日志。打印的“角度”是“态度”的“滚动”分量，转换为度数：

 `2013-04-10 00:07:12.683 MyApp[450:707] Angle: -92.91
2013-04-10 00:07:12.712 MyApp[450:707] Angle: -70.52
2013-04-10 00:07:12.714 MyApp[450:707] Angle: -92.25
2013-04-10 00:07:12.745 MyApp[450:707] Angle: -70.03
2013-04-10 00:07:12.747 MyApp[450:707] Angle: -91.74
2013-04-10 00:07:12.779 MyApp[450:707] Angle: -69.67
2013-04-10 00:07:12.784 MyApp[450:707] Angle: -91.23
2013-04-10 00:07:12.812 MyApp[450:707] Angle: -69.43
2013-04-10 00:07:12.815 MyApp[450:707] Angle: -91.19
2013-04-10 00:07:12.846 MyApp[450:707] Angle: -69.53
2013-04-10 00:07:12.849 MyApp[450:707] Angle: -91.33
2013-04-10 00:07:12.879 MyApp[450:707] Angle: -69.74
2013-04-10 00:07:12.881 MyApp[450:707] Angle: -91.57
2013-04-10 00:07:12.912 MyApp[450:707] Angle: -70.01
2013-04-10 00:07:12.915 MyApp[450:707] Angle: -91.85
2013-04-10 00:07:12.945 MyApp[450:707] Angle: -70.13
2013-04-10 00:07:12.949 MyApp[450:707] Angle: -91.99
2013-04-10 00:07:12.979 MyApp[450:707] Angle: -70.03
2013-04-10 00:07:12.983 MyApp[450:707] Angle: -91.93
2013-04-10 00:07:13.012 MyApp[450:707] Angle: -69.76
2013-04-10 00:07:13.016 MyApp[450:707] Angle: -91.71
2013-04-10 00:07:13.046 MyApp[450:707] Angle: -69.34
2013-04-10 00:07:13.051 MyApp[450:707] Angle: -91.19
2013-04-10 00:07:13.079 MyApp[450:707] Angle: -68.89
2013-04-10 00:07:13.082 MyApp[450:707] Angle: -90.94
2013-04-10 00:07:13.112 MyApp[450:707] Angle: -68.52
2013-04-10 00:07:13.114 MyApp[450:707] Angle: -90.66
2013-04-10 00:07:13.151 MyApp[450:707] Angle: -67.85
2013-04-10 00:07:13.156 MyApp[450:707] Angle: -89.47
2013-04-10 00:07:13.179 MyApp[450:707] Angle: -65.66
2013-04-10 00:07:13.181 MyApp[450:707] Angle: -88.10
2013-04-10 00:07:13.212 MyApp[450:707] Angle: -63.81
2013-04-10 00:07:13.216 MyApp[450:707] Angle: -86.33
2013-04-10 00:07:13.245 MyApp[450:707] Angle: -61.07
2013-04-10 00:07:13.248 MyApp[450:707] Angle: -83.63
2013-04-10 00:07:13.279 MyApp[450:707] Angle: -58.95
2013-04-10 00:07:13.282 MyApp[450:707] Angle: -81.46
2013-04-10 00:07:13.312 MyApp[450:707] Angle: -56.71
2013-04-10 00:07:13.314 MyApp[450:707] Angle: -79.06
2013-04-10 00:07:13.346 MyApp[450:707] Angle: -53.29
2013-04-10 00:07:13.350 MyApp[450:707] Angle: -75.23
2013-04-10 00:07:13.380 MyApp[450:707] Angle: -51.63
2013-04-10 00:07:13.383 MyApp[450:707] Angle: -73.37
2013-04-10 00:07:13.414 MyApp[450:707] Angle: -50.35
2013-04-10 00:07:13.418 MyApp[450:707] Angle: -72.11
2013-04-10 00:07:13.446 MyApp[450:707] Angle: -50.08
2013-04-10 00:07:13.450 MyApp[450:707] Angle: -72.01
2013-04-10 00:07:13.479 MyApp[450:707] Angle: -50.50
2013-04-10 00:07:13.488 MyApp[450:707] Angle: -73.51
2013-04-10 00:07:13.512 MyApp[450:707] Angle: -51.25
2013-04-10 00:07:13.514 MyApp[450:707] Angle: -74.14
2013-04-10 00:07:13.545 MyApp[450:707] Angle: -49.98
2013-04-10 00:07:13.547 MyApp[450:707] Angle: -72.96
2013-04-10 00:07:13.579 MyApp[450:707] Angle: -46.99
2013-04-10 00:07:13.582 MyApp[450:707] Angle: -68.58
2013-04-10 00:07:13.612 MyApp[450:707] Angle: -43.01
2013-04-10 00:07:13.616 MyApp[450:707] Angle: -65.32
2013-04-10 00:07:13.645 MyApp[450:707] Angle: -40.92
2013-04-10 00:07:13.647 MyApp[450:707] Angle: -62.80
2013-04-10 00:07:13.680 MyApp[450:707] Angle: -39.70
2013-04-10 00:07:13.683 MyApp[450:707] Angle: -61.30
2013-04-10 00:07:13.712 MyApp[450:707] Angle: -40.74
2013-04-10 00:07:13.714 MyApp[450:707] Angle: -63.06
2013-04-10 00:07:13.745 MyApp[450:707] Angle: -42.29
2013-04-10 00:07:13.747 MyApp[450:707] Angle: -65.68
2013-04-10 00:07:13.779 MyApp[450:707] Angle: -43.18
2013-04-10 00:07:13.780 MyApp[450:707] Angle: -67.58
2013-04-10 00:07:13.812 MyApp[450:707] Angle: -42.13
2013-04-10 00:07:13.815 MyApp[450:707] Angle: -66.35
2013-04-10 00:07:13.845 MyApp[450:707] Angle: -40.95
2013-04-10 00:07:13.848 MyApp[450:707] Angle: -64.67
2013-04-10 00:07:13.879 MyApp[450:707] Angle: -39.73
2013-04-10 00:07:13.881 MyApp[450:707] Angle: -62.90
2013-04-10 00:07:13.913 MyApp[450:707] Angle: -40.06
2013-04-10 00:07:13.916 MyApp[450:707] Angle: -63.12
2013-04-10 00:07:13.947 MyApp[450:707] Angle: -40.78
2013-04-10 00:07:13.949 MyApp[450:707] Angle: -63.39
2013-04-10 00:07:13.979 MyApp[450:707] Angle: -41.51
2013-04-10 00:07:13.981 MyApp[450:707] Angle: -62.78
2013-04-10 00:07:14.012 MyApp[450:707] Angle: -42.06
2013-04-10 00:07:14.014 MyApp[450:707] Angle: -61.77
2013-04-10 00:07:14.045 MyApp[450:707] Angle: -43.89
2013-04-10 00:07:14.047 MyApp[450:707] Angle: -61.02
2013-04-10 00:07:14.079 MyApp[450:707] Angle: -45.41
2013-04-10 00:07:14.080 MyApp[450:707] Angle: -61.20
2013-04-10 00:07:14.112 MyApp[450:707] Angle: -46.93
2013-04-10 00:07:14.114 MyApp[450:707] Angle: -61.53
2013-04-10 00:07:14.146 MyApp[450:707] Angle: -49.21
2013-04-10 00:07:14.147 MyApp[450:707] Angle: -62.76
2013-04-10 00:07:14.179 MyApp[450:707] Angle: -51.34
2013-04-10 00:07:14.182 MyApp[450:707] Angle: -64.51
2013-04-10 00:07:14.212 MyApp[450:707] Angle: -53.39
2013-04-10 00:07:14.214 MyApp[450:707] Angle: -66.41
2013-04-10 00:07:14.245 MyApp[450:707] Angle: -56.29
2013-04-10 00:07:14.248 MyApp[450:707] Angle: -69.30
2013-04-10 00:07:14.279 MyApp[450:707] Angle: -57.85
2013-04-10 00:07:14.280 MyApp[450:707] Angle: -70.88
2013-04-10 00:07:14.312 MyApp[450:707] Angle: -60.23`

测量的角度每隔几毫秒就会“闪烁”近 20 度。根据到目前为止我所读到的有关 CoreMotion 的内容，我预计会出现错误，但不会超出这个范围。

我可能做错了什么——我测量的不是正确的吗？

编辑：下面的代码 - 抱歉格式化。“code”和“blockquote”似乎都不能正常工作。

> //在开始动作更新之前，我让用户有点懒散。
> //目前这是一个幼稚的空闲计时器的形式，它在
> // 启动应用程序的前 9 秒后触发（正当原因）
> 
> - (void)didFireIdleTimer:(id)theTimer {
> 
> [mReferenceAttitude release];
> mReferenceAttitude = [[[sSharedMotionManager deviceMotion] 态度] 保留];
> 
> [自停止空闲定时器];
> }
> 
> //sSharedMotionManager 是 CMMotionManager 的一个实例
> 
> //然后，我正在设置一个显示链接回调，其中“当前”设备运动
> //每次都被检索，以及当前“态度”
> //和参考“态度”之间的差异计算出来的。正是这种差异
> //转换为度数并打印
> 
> //这是显示链接回调，懒惰命名。:)
> - (void)didRefreshScreen:(id)sender {
> 
> CMAttitude *thisAttitude = [[sSharedMotionManager deviceMotion] 态度];
> [thisAttitude multiplyByInverseOfAttitude:mReferenceAttitude];
> 
> NSLog(@"角度：%0.2f", thisAttitude.roll * 180 / 3.14159);
> 
> //其余代码
> //....
> }

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T07:09:40.417

几个小时的测试确认问题是由于`deviceMotionUpdateInterval`没有在`CMMotionManager`实例上设置而出现的。将其设置为`1.0/60.0`（或任何其他有效值）可修复此“闪烁”并导致值平滑变化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T08:42:23.917

查看这些值，我注意到每隔一秒测量的系列似乎没问题。这意味着 1, 3, 5, 7, ... 和 2, 4, 6, 8, ... 是稳定的序列。在大多数情况下，这表明有 2 个实例正在运行或参考姿态已切换。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-23T02:57:34.603

这是我的代码，以避免在可能的应用程序中闪烁：

```
float xAxis,yAxis, zAxis;
xAxis = self.manager.accelerometerData.acceleration.x;
yAxis = self.manager.accelerometerData.acceleration.y;
zAxis = self.manager.accelerometerData.acceleration.z;

// returns if the phone is lying on the table:
if (zAxis < -0.8 || zAxis > 0.8) return;

CGFloat angle =  atan2f(xAxis, yAxis ); // The angle!!!

float noise = 0.011; // Flicker noise (the noise you want to filter)

// max and min are global variables
if (angle > max){
    max = angle;
    min = max - noise;
}
if (angle < min){
    min = angle;
    max = min + noise;
}

// Average: (no flickering):
angle = min + (max - min) / 2.0; 
```

# box-api - 内容传输编码：BASE64 BOX-API

> ID：15910405
> 
> 赞同：1
> 
> 时间：2013-04-09T19:03:29.840
> 
> 标签：box-api

我想知道 BOX 是否支持多部分 HTTP POST 请求正文中使用的“Content-transfer-encoding:BASE64”。

我遇到的问题是我生成了以下正文：

```
-------boundary
Content-Disposition: form-data; name="filename"; filename="82b.gif"
Content-Type: image/gif
Content-Transfer-Encoding: BASE64

$base64_encoded_binary_file_content
-------boundary
Content-Disposition: form-data; name="parent_id"

123456789
-------boundary-- 
```

并将 http 请求发送到[https://upload.box.com/api/2.0/files/content](https://upload.box.com/api/2.0/files/content)。

该文件可以在那里创建，但它与原始 gif 文件不同。它实际上是一个文本文件，其内容是一串base64编码的原始gif文件。

任何建议都会非常有帮助。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T15:46:35.167

我们希望将来添加对文件的 Base64 编码的支持，但目前不支持。

# c++ - 如何在 Visual Studio 中有条件地链接静态库

> ID：15910406
> 
> 赞同：1
> 
> 时间：2013-04-09T19:03:30.843
> 
> 标签：c++

我想有条件地将我的代码链接到静态库，这取决于编译标志。

无论如何我可以在 C++ 中做到这一点吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-09T19:04:39.380

您可以使用编译指示来做到这一点：

```
#ifdef YOUR_CONDITION
#pragma comment (lib, "YourLibrary.lib")
#endif 
```

# c# - 将字符串转换为 TimeSpan

> ID：15910418
> 
> 赞同：-1
> 
> 时间：2013-04-09T19:04:02.213
> 
> 标签：c#, asp.net, timespan

我一直在玩谷歌距离矩阵 API，到目前为止，我已经能够获得以下格式的持续时间字符串

```
 string a = "1 days 5 hours";
    string b = "18 hours 10 minutes";
    string c = "29 minutes";
etc.. 
```

我的问题是如何将所有这些字符串添加到一个`TimeSpan`变量中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T19:10:58.453

根据文档：[https](https://developers.google.com/maps/documentation/distancematrix/#DistanceMatrixResponses) ://developers.google.com/maps/documentation/distancematrix/#DistanceMatrixResponses 你也应该得到一个数值。（那将是几秒钟）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T19:07:51.147

您可能可以实现一个[`IFormatProvider`](http://msdn.microsoft.com/en-us/library/system.iformatprovider.aspx)传递到`TimeSpan.Parse`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T19:11:58.270

您只能从上面提到的每个字符串创建一个 TimeSpan 值，因为 TimeStamp 在 c# 中的工作方式是：

```
TimeSpan span = new TimeSpan(1, 2, 0, 30, 0); //Days, hours, minutes, seconds, milliseconds. 
```

输出将是

```
1.02:00:30 
```

您可以检查 MSDN 以了解每种类型的输入和解析：http: [//msdn.microsoft.com/en-IN/library/system.timespan.aspx](http://msdn.microsoft.com/en-IN/library/system.timespan.aspx)

# aspectj - Mule MessageReceiver 周围的 AspectJ

> ID：15910422
> 
> 赞同：4
> 
> 时间：2013-04-09T19:04:11.810
> 
> 标签：aspectj, mule, spring-aop

我正在寻找一个围绕 Mule 流的方面，即我想定义一个`@Around`当有东西进入 Mule 流时将被触发的方面，以便我可以执行自己的统计数据收集。我还没有找到一个简单的“Flow”类来包装，但我已经看到这`MessageReceiver`是一个很好的类，或者至少是这个类的实现。

但是我不是 AspectJ 方面的专家，我无法让它发挥作用。我的`@Aspect`班级有一个看起来像这样的方法。

```
@Around("execution(public * org.mule.api.transport.MessageReceiver+.*(..))")
public Object addMonitor(ProceedingJoinPoint pjp) throws Throwable {
    System.out.println("Before");
    Object object = pjp.proceed();
    System.out.println("After");
    return object;
} 
```

但是当调用方法时，我无法打印出之前/之后的字符串`HttpMessageReceiver`。我已经在我的流程中设置了一个调试点，并且可以看到它`org.mule.transport.AbstractMessageReceiver.routeMessage(MuleMessage message)`正在被调用，这是一个实现，`MessageReceiver`但我从未看到对我的 Aspect 的调用。

有可能在 Mule 中执行这种 Aspect 吗？

//编辑：如前所述，我是 AspectJ 和 AOP 的新手，所以我会说我在 Mule 中使用 spring 来处理我的`@Aspect`课程。我有使用 Spring 处理的 bean 的示例，但不适用于不受 Spring 管理的常规 POJO。我的 Spring 配置如下所示：

```
<spring:beans>
    <context:component-scan base-package="com.example" />
    <context:annotation-config />
    <aop:aspectj-autoproxy />
</spring:beans> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T15:30:43.413

我需要加载时间编织，所以我必须添加`-javaagent`aspectjweaver 和 spring-instrument，并添加一个`META-INF/aop.xml`链接到我的`@Aspect`类的 which，但是一旦我这样做了，我就可以`@Around("call(* org.mule.api.transport.MessageReceiver.routeMessage(org.mule.api.MuleMessage))")`得到 Mule 的调用。

# javascript - 使用包含字符串的变量作为 getElementById() 的参数时出现“预期对象”错误

> ID：15910423
> 
> 赞同：1
> 
> 时间：2013-04-09T19:04:11.403
> 
> 标签：javascript, setinterval, getelementbyid

我正在制作 5 个虫子在屏幕上随机飞行并从侧面弹跳的动画。我做了一个函数来为每个错误做动画。这是功能的一部分。当我将 bugName 变量传递给 getElementById() 时，它包含字符串“bugOne”。当我使用此代码时，我收到此行的对象预期错误。

```
 if (xDirection == "right" && xPosition > (widthMax - document.getElementById(bugName).width - flySpeed))
 xDirection = "left"; 
```

当我改用此代码时，没有语法错误（尽管由于某种原因动画仍然无法正常工作）。

```
 if (xDirection == "right" && xPosition > (widthMax - document.getElementById("bugOne").width - flySpeed))
     xDirection = "left"; 
```

如何`bugName`在`getElementById()`不出现语法错误的情况下传递？

这就是“bugOne”进入 bugName 的方式。我正在删除一些代码，只显示基础知识。

我从正文 onload 事件处理程序中调用它。

```
<body onload="flyVar=setInterval('setBug(\'bugOne\')', 30);"> 
```

所以在文件头中调用了这个函数。

```
 function setBug(bugName) {
        flyBug(bugName);

} 
```

并且调用这个函数，它也在文件头中。

```
function flyBug(bugName) {

    if (bugName == "bugOne") {
        flySpeed = 5;
        xPosition = 0;
        yPosition = 100;
        xDirection = "right";
        yDirection = "up";

     if (xDirection == "right" && xPosition > (widthMax - document.getElementById(bugName).width - flySpeed))
         xDirection = "left";
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T20:12:51.573

这里的问题是`setInterval()`不直接支持包含参数（我目前无法对此进行测试，但[我相信Mozilla](https://developer.mozilla.org/en-US/docs/DOM/window.setInterval)在哪里找到了以下内容：

> ## 回调参数
> 
> 如果您需要将参数传递给回调函数，但需要它在 Internet Explorer 中工作，它不支持发送附加参数（setTimeout() 或 setInterval() 都不支持），您可以包含此 IE 特定的兼容性代码只需将其插入脚本的开头，即可在该浏览器中为两个计时器启用 HTML5 标准参数传递功能。
> 
> [...示例代码...]
> 
> 另一种可能性是使用匿名函数来调用您的回调，但这种解决方案有点贵。例子：
> 
> ```
>  var intervalID = setInterval(function() { myFunc("one", "two", "three"); }, 1000); 
> ```
> 
> 还有一种可能性是使用函数的绑定。例子：
> 
> ```
>  var intervalID = setInterval(function(arg1) {}.bind(undefined, 10), 1000); 
> ```

因此，我相信您可以通过如下更改 onload 调用来纠正此行为：

```
<body onload="flyVar=setInterval(function() { setBug('bugOne'); }, 30);"> 
```

# java - 在 Java 小程序中指定文本字段的范围

> ID：15910433
> 
> 赞同：0
> 
> 时间：2013-04-09T19:04:43.887
> 
> 标签：java, applet, textfield, operator-keyword, relational

这是我发布的代码：

```
 import java.awt.*;
  import java.awt.event.*;
  import java.applet.*;
    /* <applet code="front" width=500 height=500></applet> */
    public class front extends Applet implements ActionListener {
  String msg="";
    TextArea text,text1;
  TextField txt;
   Button load, enter;

  public void init() {
     enter=new Button("Enter");
    load=new Button("Load");
   txt=new TextField(5);
    text=new TextArea(10,15);

   add(load);
add(text);

add(txt);
add(enter);

load.addActionListener(this);
txt.addActionListener(this);
enter.addActionListener(this);
 }

 public void actionPerformed(ActionEvent ae)
    {
       String str = ae.getActionCommand();
       if(str.equals("Load")) {
             msg = "You pressed Load";
        } else {
           if(txt.getText().toString().equals ("6")) {
         msg="Set the text for 6";
         text.setText("Text");
          } else {
        msg="Invalid number";
            text.setText("");
         }
        }
       repaint();
         }

          public void paint(Graphics g) {
          g.drawString(msg,350,250);
        }
        } 
```

如您所见，当文本字段中的值等于 6 时，它会显示一条消息。但现在我希望该消息仅在它在 5-6 范围内时显示。所以我尝试了以下代码

```
import java.awt.*;
  import java.awt.event.*;
  import java.applet.*;
    /* <applet code="front" width=500 height=500></applet> */
    public class front extends Applet implements ActionListener {
  String msg="";
    TextArea text,text1;
  TextField txt;
   Button load, enter;

  public void init() {
     enter=new Button("Enter");
    load=new Button("Load");
   txt=new TextField(5);
    text=new TextArea(10,15);

   add(load);
add(text);

add(txt);
add(enter);

load.addActionListener(this);
txt.addActionListener(this);
enter.addActionListener(this);
 }

 public void actionPerformed(ActionEvent ae)
    {
       String str = ae.getActionCommand();
       if(str.equals("Load")) {
             msg = "You pressed Load";
        } else {

        String a = txt.getText();
           int a1=Integer.parseInt(a); //I also used Integer.valueOf(a)
          if(a1>="5"&&a1<="6") 
           {
         msg="Set the text";
         text.setText("Text");
          } else {
        msg="Invalid number";
            text.setText("");
         }
        }
       repaint();
         }

          public void paint(Graphics g) {
          g.drawString(msg,350,250);
        }
        } 
```

但是当我编译这段代码时，我得到以下错误：

> 运算符 >= 不能应用于 int，java.lang.String 运算符 <= 不能应用于 int，java.lang.String

我知道 getText() 返回一个字符串，所以我使用 parseInt 将其转换为整数，但我无法理解错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T19:06:28.917

您正在尝试将 int 与字符串值进行比较。

```
 if(a1>="5"&&a1<="6") // 5 and 6 are string representation whereas a1 is int 
```

需要

```
 if(a1>=5 && a1<=6)  // 5 and 6 are int representation 
```

注意：如果要比较字符串，请使用 .equals()。

# ios - removeObjectAtIndex：破坏集合

> ID：15910438
> 
> 赞同：1
> 
> 时间：2013-04-09T19:05:00.547
> 
> 标签：ios, objective-c

编辑：这是 LLDB 中的一个问题。我更改为 GDB，它正在工作。

当我尝试从我的应用程序中的 NSMutableArray 中删除一个对象时，发生了一些奇怪的事情。在删除之前，我在 Xcode 调试器中有以下状态

```
openList    NSMutableArray *    0x07563740
[0] SHAPathNode *   0x071846c0
[1] SHAPathNode *   0x07184c60 
```

然后我执行：

```
[openList removeObjectAtIndex:0]; 
```

并得到这个损坏的集合

```
openList    NSMutableArray *    0x07563740
[0] id  0x00000000 
```

有任何想法吗？

# .net - MVC4 会员提供者是否为您管理令牌？

> ID：15910440
> 
> 赞同：1
> 
> 时间：2013-04-09T19:05:14.970
> 
> 标签：.net, asp.net-mvc-4, asp.net-membership, forms-authentication

对于可能最终成为一个愚蠢问题的问题，我深表歉意，但我对自定义会员资格有些陌生，并且网络上的许多资源只涵盖了我不感兴趣的 SimpleMembership。所以这就是发生的事情：

我有一个内部设计的令牌服务，自然需要我们使用它。它遵循标准的租赁令牌方法，简单地说：

1.  向它发送一个 RequestToken 请求
2.  如果身份验证成功，它会向您发送一个 RequestToken
3.  您使用该请求令牌来请求 LeaseToken。
4.  该服务会向您发送一个租赁令牌，该令牌由令牌标识符和到期时间组成
5.  令牌标识符必须放入授权标头中以供后续请求

我正在尝试通过使用自定义提供程序将此过程集成到我的 MVC4 项目中，但我对它的理解有限。

我创建了一个从 MembershipProvider 继承的类，并自动实现了它的所有抽象成员（天哪，有很多！），并将这个类添加到 web.config 中的提供程序列表中。我假设发生的情况是，每当遇到 [Authorize] 属性时，它都会运行一些验证用户登录状态状态的过程。

我的问题是，这是否会自动管理在身份验证过程中收到的令牌？我的意思是，我不知道它会如何开箱即用，但我在这里和那里遇到了一些事情，表明 MVC*可能*有一些规定来支持这一点。还是我仍然需要通过我的 Provider 中的覆盖方法来管理令牌？

我想如果我仍然必须编写所有这些令牌管理，我只需创建所有必要的类和逻辑，然后从自定义成员提供程序中的适当方法调用它？

这些都是现阶段的假设，因此任何见解都会有所帮助。谢谢。

# android - 为什么我在启动新 Intent 时会看到键盘？

> ID：15910443
> 
> 赞同：0
> 
> 时间：2013-04-09T19:05:29.230
> 
> 标签：android

我的 android 应用程序有问题：当我像这样开始一个新的 Intend 时：

```
Intent i = new Intent(MyFirstActivity.this, MySecondActivity.class);
startActivity(i); 
```

当我看到 android 时会打开键盘，但`MySecondActivity`我不知道为什么。

如何禁用此功能？

编辑：这是我的布局

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/LinearLayout1"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical"
    tools:context=".MySecondActivity" >

    <Button
        android:id="@+id/foo"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="@string/edit" />

    <ScrollView
        android:id="@+id/scrollView1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >

        <LinearLayout
            android:id="@+id/LinearLayout2"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:orientation="vertical" >

            <EditText
                android:id="@+id/editTextBemerkung"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:ems="10"
                android:enabled="false"
                android:hint="@string/bemerkung" />

            <AutoCompleteTextView
                android:id="@+id/editText1"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:ems="10"
                android:enabled="false"
                android:hint="@string/foo" />

            <Button
                android:id="@+id/foo2"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:text="@string/foo"
                android:visibility="gone" />

            <ImageView
                android:id="@+id/imageViewFoto2"
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:layout_gravity="center"
                android:contentDescription="@string/foto"
                android:src="@drawable/ic_launcher"
                android:visibility="gone" />

            <TextView
                android:id="@+id/textViewAnzahl"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="@string/anzahl" />

            <TextView
                android:id="@+id/foo3"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="@string/foo" />

            <TextView
                android:id="@+id/foo4"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="@string/foo" />

            <AutoCompleteTextView
                android:id="@+id/foo6"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:ems="10"
                android:enabled="false"
                android:hint="@string/foo" />

            <AutoCompleteTextView
                android:id="@+id/foo7"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:ems="10"
                android:enabled="false"
                android:hint="@string/foo" />

            <TextView
                android:id="@+id/foo8"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="@string/foo" />

            <CheckBox
                android:id="@+id/foo9"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:enabled="false"
                android:text="@string/foo" />

        </LinearLayout>
    </ScrollView>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T19:07:58.753

如果您有任何获得焦点的编辑文本/可聚焦输入，则键盘将打开。在您的布局 xml 中为该视图使用以下内容：

```
android:focusable="false"
android:focusableInTouchMode="false" 
```

所以它会像：

```
<EditText
    android:id="@+id/editTextBemerkung"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:ems="10"
    android:enabled="false"
    android:hint="@string/bemerkung"
    android:focusable="false"
    android:focusableInTouchMode="false" /> 
```

希望这可以帮助！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T19:14:25.017

如前所述，这很可能是因为您`EditText`在开始时有重点，`Activity`因此您可以将重点放在不同的地方`View`，或者您可以添加

```
android:windowSoftInputMode="stateHidden 
```

到您`<activity>`的`manifest`. 这将隐藏键盘，直到您单击`EditText`

[这些文档](http://developer.android.com/guide/topics/manifest/activity-element.html)的底部是处理键盘时的一些其他有用属性

# c - 从标准输入读取的分段错误（核心转储）

> ID：15910444
> 
> 赞同：1
> 
> 时间：2013-04-09T19:05:30.510
> 
> 标签：c, segmentation-fault

我正在尝试计算文件中每个单词的数量。该文件可以是标准输入，也可以是命令行上提供的文件名 (./count -f )。到目前为止，当从命令行读取文件时，程序给出了正确的输出。但是当我尝试从标准输入读取时会发生错误。该程序首先输出正确，然后给出分段错误（核心转储）。这是我的代码的一部分。

```
 FILE * fp;
int size = 20000;
char sentence[2000]; // the sentence from stdin
if ( argc != 3 ) 
{
    fgets(sentence,sizeof(sentence),stdin); // read from stdin
    fflush(stdin);
    // I think the initialization of word is incorrect, but i do know why it is incorrect
    char *word = strtok (sentence," !\"#$%&'()*+,./:;<=>?@[\\]^_`{|}~\n\t");
    while (word != NULL)
    {
        get_word(word); // get each word
        word = strtok (NULL, " !\"#$%&'()*+,./:;<=>?@[\\]^_`{|}~\n\t");
    }
}
else
{
    fp = fopen( argv[2], "r" );
    if ( fp == 0 )
    {
        printf( "Could not open file\n" );
    }

           char word[1000];
    while (readFile(fp, word, size)) {  // let the program read the file
        get_word(word); // get each word. Works well.
    }
} 
```

get_word 函数：

```
void get_word(char *word){
node *ptr = NULL;
node *last = NULL;

if(first == NULL){
    first = add_to_list(word); // add to linked list
    return;
}

ptr = first;
while(ptr != NULL){
    if(strcmp(word, ptr->str) == 0){
        ++ptr->freq;
        return;
    }
    last = ptr;            
    ptr = ptr->next;  
}
last->next = add_to_list(word); // add to linked list 
```

}

请帮我弄清楚为什么我会出现分段错误（核心转储）。该程序适用于我的 mac，但不适用于 Linux。
提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T19:10:57.423

句子大小为 2 kib，您正在从标准输入读取 2 kib。之后，您在其上使用字符串函数。字符串以 '\0' 结尾，但由于您读取 2 个没有 '\0' 的 kib 数据，因此没有字符串结尾，因此会出现段错误，因为字符串函数（在本例中为 strtok）可能工作得远远超过 2亲属。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T20:03:57.630

问题是

```
int main (int argc, char *argv[]) {
    FILE * fp;

    if ( argc != 3 )
    {
            fgets(sentence,sizeof(sentence),stdin);
            // and so on
    }
    else
    {
            fp = fopen( argv[2], "r" );
            if ( fp == 0 )
            {
                    printf( "Could not open file\n" );
            }
            while (readFile(fp, word, size)) {
                    get_word(word);
            }
    }

    // do some stuff, sorting etc.

    fclose(fp); 
```

那你`fclose(fp)`不管它是否被打开。如果`fp`未连接到有效流，则分段错误很常见。显然，一些实现`NULL`可以优雅地处理参数`fclose`，这就是它看起来可以在 Mac 上运行的原因。

将`fclose`调用移到`else`分支中，当`fopen`失败时，不要只是

```
printf( "Could not open file\n" ); 
```

但结束程序。

# php - 如何从mysql中转义php中的空格和中断

> ID：15910450
> 
> 赞同：1
> 
> 时间：2013-04-09T19:05:46.237
> 
> 标签：php, mysql, database

当我从我的数据库中获取数据到我的 php.ini 时。我得到，当我检查它的来源时，它看起来像这样：

```
 <li class="ui-state-default"><input type="checkbox" id="check1" class="chk" name="countryname[]" value="AF 
" > AFGHANISTAN` 
```

在`value`字段中，您可以看到后面有空格`AF`。现在这里发生的问题是这些空间不在数据库中，我想跳过这些空间，这甚至不在我的 php 代码中。好吧，它们可能在我的数据库中，但我想跳过它们或从数据库中删除它们。

这是我的代码 `<ul id="sortable"> <? while($row = mysql_fetch_array($result)) { ?> <li class="ui-state-default"><input type="checkbox" id="check1" class="chk" name="countryname[]" value="<?echo urldecode($row['Code']);?>" <? $reflex = mysql_query("select distinct * from geocity where isAllowed='1' AND country='" . $row['Code'] . "'"); $count = mysql_num_rows($reflex); if ($count == 0){echo '';}else{echo 'checked';} ?>>&nbsp;<? echo $row['CountryName']; ?> </li> <? }; ?>`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T19:28:34.963

您可以`TRIM(BOTH ' \r\n\t' FROM [the column name])`在选择数据时使用来删除虚假的结尾和开头。

在 PHP 中，您可以只使用`trim()`，因为它已经删除了制表符、换行符等。

如果您清理数据库中的这些字段，您还应该在字符串中查找中断并使用 REPLACE 杀死它们:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T19:07:17.937

你有没有尝试过

```
trim($value) 
```

还有一些代码会有所帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T19:09:09.860

您可以使用正则表达式查找双引号之间的内容，然后从内容中删除空格？我会建议像 Jim 那样修剪，但这是针对字符串开头和结尾的空白。

# jquery - 从 jQuery 数组中删除元素会产生未定义的错误

> ID：15910451
> 
> 赞同：0
> 
> 时间：2013-04-09T19:05:50.840
> 
> 标签：jquery, arrays, splice

我在 jQuery 中有一个数组。我想删除在选定字段中具有特定值的所有元素。当我做一个循环和拼接时，我得到一个错误。

```
$.each(arr,function(idx,val) {
    if (arr[idx].field == "something") {
        arr.splice(idx,1);
    }
}); 
```

我明白为什么我会收到错误：

```
Uncaught TypeError: Cannot read property 'field' of undefined 
```

...但我无法找出最佳方法。一些研究表明 grep 可能是正确的方法。有什么建议么？

*** 回答 ***

最后，这就是我所做的。谁有更好的答案？：

```
for (var idx=0; idx<arr.length; idx++)
{
    if (arr[idx].field == "something") {
        arr.splice(idx,1);
        idx--;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T19:08:23.473

使用 for 循环。arr 的长度动态变化

```
var length= arr.length;
for(var i=0; i<length ; i++){
    if (arr[i].field == "something") {
        arr.splice(i,1);
        length = arr.length;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T19:09:46.703

它应该是：

```
$.each(arr,function(idx,val) {
    if (arr[idx] == "something") {
        arr.splice(idx,1);
    }
}); 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/ZhL64/)**

在你的例子`field`中没有任何意义。`arr[idx]`获得价值。

# python - Python - 改变我的二分搜索功能

> ID：15910455
> 
> 赞同：0
> 
> 时间：2013-04-09T19:06:04.717
> 
> 标签：python, search, binary

我写了以下代码：

```
def binary_search(key,lst):
    """ iterative binary search
        lst better be sorted for binary search to work"""
    n=len(lst)
    lower=0
    upper=n-1
    outcome=None   # default value
    while lower<=upper:
        middle=(upper+lower)//2
        if key==lst[middle].name:    # item found
            outcome=lst[middle]
            break  # gets out of the loop if key was found
        elif key<lst[middle].name:   # item cannot be in top half
            upper=middle-1
        else:        # item cannot be in bottom half
            lower=middle+1           
    return outcome 
```

我正在尝试更改它以使其将列表分为 3 个部分而不是 2 个部分。我的意思是它不再是二进制搜索，但对于每次迭代，算法会将列表分为 3 个部分。

我无法实现这一点。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T19:11:04.573

您需要将列表分为 3 个部分，为此您需要两个中间部分：upper_middle 和 lower_middle。您需要在 if 中添加更多子句。如果它小于下中间，那么它是前三分之一，如果它高于上三分之一，它是最后三分之一，否则，它在中间三分之一。

请记住，即使这是一个很好的编程练习，它并没有真正提高效率，因为函数的顺序保持不变（log n）。

# android - 将 TableRows 动态添加到片段

> ID：15910457
> 
> 赞同：2
> 
> 时间：2013-04-09T19:06:10.780
> 
> 标签：android

我正在尝试将一些随机数据添加到我动态创建的 TableLayout 中，以查看它是否正常工作。

这是代码

```
import android.os.Bundle;
import android.support.v4.app.Fragment;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.RelativeLayout;
import android.widget.TableLayout;
import android.widget.TableRow;
import android.widget.TableRow.LayoutParams;
import android.widget.TextView;

public class BasicDetailsTabFragment extends Fragment
{
    int numvals = 5;
    public static final int NAME = 0;
    public static final int BRANCH = 1;
    public static final int EMAIL = 2;
    public static final int REGISTRATION = 3;
    public static final int ADMISSION = 4;

    String[] details = new String[5];
    String[] detailVals = new String[5]; // Get the values from JSON here

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState)
    {
        if (container == null)
        {
            return null;
        }

        details[NAME] = "Name";
        details[BRANCH] = "Branch";
        details[EMAIL] = "Email";
        details[REGISTRATION] = "Registration No.";
        details[ADMISSION] = "Admission No. ";

        detailVals[NAME] = "Some Name";
        detailVals[BRANCH] = "Computer Science";
        detailVals[EMAIL] = "some_email@email.com";
        detailVals[REGISTRATION] = "11101212";
        detailVals[ADMISSION] = "1345645";

         View view = inflater.inflate(R.layout.basic_details_layout,
         container, false);

        TableLayout tl = (TableLayout)view.getView().findViewById(R.id.detailsTable);

        for (int i = 0; i < numvals; i++)
        {
            // Make TR
            TableRow tr = new TableRow(getActivity());
            tr.setId(100 + i);
            tr.setLayoutParams(new LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.WRAP_CONTENT));

            // Make TV to hold the details
            TextView detailstv = new TextView(getActivity());
            detailstv.setId(200 + i);
            detailstv.setText(details[i]);
            tr.addView(detailstv);

            // Make TV to hold the detailvals

            TextView valstv = new TextView(getActivity());
            valstv.setId(300 + i);
            valstv.setText(detailVals[i]);
            tr.addView(valstv);

            tl.addView(tr, new TableLayout.LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.WRAP_CONTENT));
        }

        return (RelativeLayout) inflater.inflate(R.layout.basic_details_layout, container, false);

    } 
```

这是这个类的布局xml

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <ImageView
        android:id="@+id/studentPhoto"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="15dp"
        android:src="@drawable/student_photo" />

    <TableLayout
        android:id="@+id/detailsTable"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_below="@id/studentPhoto" >
    </TableLayout>

</RelativeLayout> 
```

但是这种方法不起作用（除了照片什么都没有显示）我是使用 Fragments 的相对初学者，我也很困惑的是哪些函数（onCreate()、onCreateActivity() 等）我应该把上面的代码，所以它填充我的表。

任何帮助表示赞赏。

如果我的问题看起来过于愚蠢，我提前道歉。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T19:36:37.643

不要再次膨胀 basic_details_layout，而是返回您已经膨胀的视图。

```
return (RelativeLayout) inflater.inflate(R.layout.basic_details_layout, container, false); 
```

应该

```
return view; 
```

# ruby-on-rails-3 - 将 2 个字符串部分连接为类样式

> ID：15910458
> 
> 赞同：1
> 
> 时间：2013-04-09T19:06:13.960
> 
> 标签：ruby-on-rails-3, string, concatenation, string-concatenation, partials

好的，所以我正在用我应该能够做的超级简单的事情而将头撞在桌子上，但不能......我正在尝试连接 2 个字符串，所以我可以根据它是哪个页面来为部分创建一个动态类呈现在。

问题是我传入的变量是一个字符串

```
 <%= render partial: "layouts/image_8_grid", 
 :locals=>{ :image_container => "small_image_container" }  %> 
```

然后在我想做的部分里面

```
class=<%= "#{image_container} grid_3" %> 
```

但是由于容器是“small_image_container”，所以它正在使样式变

```
class="image_container" grid_3="" 
```

看起来没有任何 ruby​​ 方法可以连接字符串……这是迟钝的。我是否遗漏了一些非常明显的东西，或者我是否必须为几乎所有其他语言中可用的东西制作自定义方法？

任何见解都将不胜感激，我对无法找到一种方法来解决我在使用过的所有其他语言中都拥有的基本功能感到有点沮丧。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T19:08:15.500

所以我才发现

```
class="<%= "#{image_container} grid_3" %>" 
```

有效...似乎很反手，但如果它有效，我想它有效...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T19:12:01.910

无需 cat 字符串

```
class="<%= image_container %> grid_3" 
```

# arrays - 将嵌入式功能块中的传入值添加到单个数组中

> ID：15910460
> 
> 赞同：0
> 
> 时间：2013-04-09T19:06:18.867
> 
> 标签：arrays, matlab, fft

将嵌入式功能块中的传入值添加到单个数组中

通常这适用于 matlab 但不适用于嵌入式函数 y = zeros(1,10); 对于 i=1:10；y(i) = i + 兰德；

我想做的是

```
 y = function(u)

   y = zeros(1,100);

    for i=1:100;

     y(i) = u;

       end; 
```

这样我得到一个数组，其中包含 10 个数据点

```
e.g y = [23 1.....100th data point]; 
```

我需要为 y 获取 FFT 并用它做某些事情

# android - 在 Android 中停止 BluetoothOpp 服务

> ID：15910466
> 
> 赞同：1
> 
> 时间：2013-04-09T19:06:30.747
> 
> 标签：android, service, bluetooth

我遇到了与以下问题中发布的相同的问题：

[从另一个包停止 Android 服务](https://stackoverflow.com/questions/10184973/stop-android-service-from-another-package)

有没有人提出任何其他解决方法？在我的场景中，如果手机运行了 BluetoothOpp 服务，那么让蓝牙在手机和我的设备（即数字笔）之间工作的唯一方法是手动关闭 BluetoothOpp 服务。这构成了一个真正的挑战，因为我的大多数用户群可能不够精明，无法理解这一要求。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T19:45:35.063

我对这个问题表示同情（是的，让用户手动执行此操作不是一个好的解决方案）但答案应该是否定的。应用程序不应该能够关闭系统服务（至少没有明确的用户授权）。

毕竟，OPP（对象推送协议）有一个有效的目的，应该可以用来接收从另一个设备推送的对象。如果你杀了它，用户可能会很困惑。（更个人而言，我曾经写过一个应用程序，它依赖于 OPP 的存在和倾听。）

验证这一点的一种方法是安装一些任务杀手应用程序，看看它们是否可以杀死 OPP，但我相信它们不能。如果可以，请检查他们拥有哪些权限。

即使您发现像 ADMIN 权限这样的权限允许您这样做，将其添加到您的应用程序也会吓跑用户。

# facebook - Facebook Graph API 真的很慢

> ID：15910468
> 
> 赞同：1
> 
> 时间：2013-04-09T19:06:32.303
> 
> 标签：facebook, http, facebook-graph-api

当我通过 HTTP 发出 Facebook Graph 请求时，它真的很慢。

在 2Mbps 线路上获取 30KB 的数据需要将近 4 秒。

我使用 Chrome 扩展程序来测量页面加载时间和`request`超过 3000 毫秒。

![Chrome 图形页面加载时间...](https://i.stack.imgur.com/7Ydkr.png)

**这是正常速度吗？如果不是……我怎样才能加快我的 Graph 请求？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T16:56:09.403

通过使用[批量请求](https://developers.facebook.com/docs/reference/api/batch/)或[实时更新](https://developers.facebook.com/docs/reference/api/realtime/)

# matlab - 并行包中的 Mldivide

> ID：15910470
> 
> 赞同：0
> 
> 时间：2013-04-09T19:06:43.707
> 
> 标签：matlab

当以下行作为 parfor 循环的一部分执行时，即使 G 矩阵是病态的，它也会执行。

```
betas = G\data.y2.'; 
```

但是，当我尝试将其作为常规 for 循环的一部分运行时，代码会停止执行，并报告 Matrix 是单数的。

为什么 for 和 parfor 循环处理它的方式不同？

我问的原因是我正在调试其他人编写的一些代码。我无法调试 parfor，所以我希望通过查看 for 等价物来了解发生了什么。

有没有一种方法可以调试并行代码，我可以期望代码的行为与并行环境中的行为相同？

还有什么`data.y2.`；意思是相对于`data.y2'`；

此外，我有一个旧版本的代码，旨在纯粹在常规 for 循环中运行。

当我回去运行时，我得到了停止代码运行的相同错误。

但是，当我重新启动 MATLAB 并再次运行它时，它运行没有问题。它只是将奇异矩阵的反转结果变为`NaN`并继续（这就是我想要的）。

在并行版本中，进行了以下声明：

```
warnState(1) = warning('error', 'MATLAB:singularMatrix'); 
warnState(2) = warning('error', 'MATLAB:illConditionedMatrix'); 
```

这些是导致代码停止的原因吗？如果是这样，为什么它们不影响并行版本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T07:13:09.530

普通桌面 MATLAB 和 Parallel Computing Toolbox 工作程序之间的一个区别是桌面 MATLAB 运行多线程，而工作程序运行在单计算线程模式下。我相信这可能会导致一些轻微的数字差异。您可以尝试使用启动桌面 MATLAB

```
matlab -singleCompThread 
```

看看常规 MATLAB 是否可以表现出相同的行为。

在 MATLAB 中，`.'`运算符是`TRANSPOSE`，并且`'`是`CTRANSPOSE`- 复共轭转置。

# jquery - .height 仅使用 1 次

> ID：15910473
> 
> 赞同：1
> 
> 时间：2013-04-09T19:06:48.680
> 
> 标签：jquery

我首先隐藏了所有幻灯片并读入了一个数组。然后我使用前进和上一个按钮浏览幻灯片。每个都有自己的描述，在一个 div 中。幻灯片本身可以工作，并且在我导航时，每张新幻灯片都会完美地显示描述。但是当我尝试显示描述文本的高度时，如下所示：

```
 $('.slide-desc').click(function () {
        $(this).text($('.slide-desc').height());
    }); 
```

它将在每张幻灯片中返回 0，除了数组中的第一个。但所有幻灯片实际上都加载到该数组中，因为我的幻灯片有效。

这就是我将所有幻灯片转换为数组的方式：

```
 function getSlides() { 
        slidesArray = $('.slide').toArray();
        slidesArrayReversed = $('.slide').toArray().reverse();
    }; 
```

为什么它只对第一个起作用？

[更多详细信息：您可以在http://purplerain.com.br/portfolio.html](http://purplerain.com.br/portfolio.html)中看到正在运行的脚本，在 这里您可以看到整个脚本的代码： http: [//purplerain.com.br/js/fullscreen-slideshow。 js](http://purplerain.com.br/js/fullscreen-slideshow.js)

在这里发帖很长。作为一个警告......我倾向于使用更多的有限状态机思维方式而不是面向对象的思维方式进行编码。

谢谢你的帮助^^

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T19:16:41.553

你的js可能有问题，使用`$(this)`

```
$('.slide-desc').click(function () {
    $(this).text($(this).height());
}); 
```

你也可以试试这个插件来获取任何状态（隐藏或可见）的任何元素的高度

[https://github.com/dreamerslab/jquery.actual](https://github.com/dreamerslab/jquery.actual)

# java - 正则表达式提取最后一个整数值

> ID：15910477
> 
> 赞同：-5
> 
> 时间：2013-04-09T19:07:11.503
> 
> 标签：java, regex

我必须从java中的字符串中提取结束整数部分

在java中使用**正则表达式**

像：-

```
String s1="allow23"// extract 23
String s2="4code68"//  extract 68 
```

仅从末尾开始的整数（在字母表或无字母表之后）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T19:11:02.797

正则表达式可以是`(\\d+$)`. 完整的代码示例是：

```
Pattern p = Pattern.compile("(\\d+)$");
Matcher m = p.matcher(str);
if (m.find()) {
    int number = Integer.pareseInt(m.group(1));
} 
```

我希望这可以成为您学习 Java 正则表达式的良好开端。

# linux - 授予播放音乐但不复制文件的权限

> ID：15910478
> 
> 赞同：0
> 
> 时间：2013-04-09T19:07:16.830
> 
> 标签：linux, user-permissions

在linux下，我想创建一种用户可以播放一些音乐文件的方式，但这些文件不能被复制（由同一用户）。

我知道这听起来有点自相矛盾，但我有一个想法，我真的不知道如何实施。

让**user1**拥有音乐文件，我们希望**user2**能够播放它们，但不能复制它们。我正在考虑让音乐播放器可以访问文件（例如**audacious**）但**user2**不可读。**然后user2**可以启动**audacious**，它可以播放音乐文件，但不能自己访问它们。

这可以通过对组和其他人使用用户权限来实现。

# html - Flash 到 HTML 后备在 Chrome 等浏览器上显示两种动画

> ID：15910482
> 
> 赞同：0
> 
> 时间：2013-04-09T19:07:31.763
> 
> 标签：html, google-swiffy

我在本网站的另一篇文章中使用了“Malphurs 交互式 Flash 到 HTML5”后备记录。条件语句存在问题，导致两个动画都出现在同时读取 flash 和 html5 的浏览器上。如何改进条件语句？感谢您的帮助-安德烈亚

```
<!-- InstanceBeginEditable name="head" -->
<script src= type="Scripts/swfobject_modified.js""text/javascript"></script>
 <!--[if !IE]>--><! > <script src="http://www.gstatic.com/swiffy/v4.0/runtime.js">           
 <!--[if !IE]>--><! >  <script src= "Scripts/swiffytest.js" type="text/javascript">           
<script src="https://www.gstatic.com/swiffy/v5.1/runtime.js"></script>
<script src="swiffytest.js" type="text/javascript"></script>
<script src="Scripts/swfobject_modified.js" type="text/javascript"></script>
<style type="text/css">
<!-- 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T04:08:13.583

我也将很快实现 HTML5 的后备，我想最好选择 Modernizr 来测试对 HTML5 属性的支持，而不是执行特定于浏览器的条件语句。

[http://modernizr.com/](http://modernizr.com/)

Modernizr.load() 教程可能对您有用。例如，您可以检查浏览器是否支持 canvas 或 csstransformation，并决定它是否应该为您提供 Flash 对象或 HTML5 的东西。

# javascript - document.location.reload(true) 在 ie9 中不起作用

> ID：15910484
> 
> 赞同：0
> 
> 时间：2013-04-09T19:07:44.567
> 
> 标签：javascript, internet-explorer, reload

我正在强制从服务器重新加载页面，`document.location.reload(true);`并且在 Chrome 中一切正常，但由于某种原因，它在 Internet Explorer 中没有。页面刷新，但仍加载旧数据。

有什么办法可以解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T19:11:14.273

只需使用

```
location.reload(); 
```

见：http: [//jsfiddle.net/heUtf/](http://jsfiddle.net/heUtf/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T19:22:05.447

可能是由于 IE 中的 DOC 模式不正确造成的。验证点击 F12（开发工具）并查看设置了哪种文档模式。如果它设置为 Quirks 或 IE 7，它可能会弄乱您的 javascript。

您可以将 Doc 模式强制为浏览器中当前可用模式的一种方法是在 web.config 中指定以下内容。

```
 <httpProtocol>
      <customHeaders>
        <clear />
        <add name="X-UA-Compatible" value="IE=Edge" />
      </customHeaders>
    </httpProtocol> 
```

更多相关信息：

[http://msdn.microsoft.com/en-us/hh779632.aspx](http://msdn.microsoft.com/en-us/hh779632.aspx)

# unit-testing - 动态参数的 RhinoMocks 期望

> ID：15910489
> 
> 赞同：2
> 
> 时间：2013-04-09T19:07:53.057
> 
> 标签：unit-testing, tdd, rhino-mocks, dynamicobject

无论如何要模拟采用动态参数的方法吗？

我想设定这样的期望：

```
_hasher.Expect(h => h.ComputeHash(Arg<dynamic>.Matches(o=> o.PropertyA == "123"))).Return("some hash"); 
```

我收到错误：表达式树可能不包含动态表达式。我当然可以做类似的事情：

```
_hasher.Expect(h => h.ComputeHash(Arg<object>.Is.Anything)).Return("some hash"); 
```

但我觉得这在我的测试中留下了一个空白。是否有任何其他替代方法可以模拟具有接受动态参数的方法的依赖项？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T19:10:37.087

试试这个：

```
_hasher.Expect(h => h.ComputeHash(Arg<object>.Is.Anything)).Return("some hash")
    .WhenCalled(x =>
        {
            dynamic actual = x.Arguments[0];
            Assert.AreEqual("123", actual.PropertyA);
        }); 
```

当然，这有点像 hack，但它确实有效，并且在测试失败时会为您提供有用的消息。

# c# - 无法获取 YouTube 订阅的内容

> ID：15910492
> 
> 赞同：2
> 
> 时间：2013-04-09T19:08:01.163
> 
> 标签：c#, youtube-api

到目前为止我有

```
YouTubeRequestSettings mySettings;
YouTubeRequest myRequestFeed;
mySettings = new YouTubeRequestSettings("myApp", devKey, userName, password);
myRequestFeed = new YouTubeRequest(settings);
Feed<Subscription> mySubscriptionFeed = myRequestFeed.GetSubscriptionsFeed(null);
List<string> lst = new List<string>();
foreach (var sub in mySubscriptionFeed.Entries) {
    //I can iterate over each subscription and get name, ect.
    // I can't seem to figure out how to get the videos in each subscription.
SubscriptionEntry entry = sub.SubscriptionEntry;
    Feed<Video> videoFeed = entry.???
} 
```

对于播放列表，有

```
Feed<PlayListMember> video_list = myRequestFeed.GetPlaylist(pl); 
```

但似乎没有类似的功能来检索订阅内容。

在旧 API (1.something) 中，它是用

```
string feedURI = SubscritpionEntry.FeedLink.Href;
query = new YouTubeQuery(feedURI); 
```

但 FeedLink 不再存在。

在[本文档](https://developers.google.com/youtube/2.0/developers_guide_protocol#Retrieving_subscriptions)中，他们声明

“每个条目中的内容标签指定了用于检索订阅视频的 URL。”

//在[本文档中](http://31stentourage-nvk.appspot.com/code.google.com/apis/youtube/2.0/migration.html)

“修改您的代码以检查标签的值，而不是播放列表提要条目和订阅提要条目中的标签。”

除了那个

```
SubscriptionEntry entry = sub.SubscriptionEntry;
entry.content.Src and entry.content.AbsoluteURL 
```

是唯一填写的东西，我似乎对它们没有任何作用，会产生底层的项目列表。我必须遗漏一些明显的东西，但我看不到它。

# ruby-on-rails - 尝试将 UserMailer 包含到我的控制器中时出现语法错误

> ID：15910493
> 
> 赞同：0
> 
> 时间：2013-04-09T19:08:03.333
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, syntax-error

如果 post = review，我正在尝试发送电子邮件，但我收到语法错误。代码应该怎么改？尝试添加`UserMailer.review_email(@user).deliver`导致此错误

这是我得到的错误

```
SyntaxError in PostsController#create  
syntax error, unexpected tIVAR, expecting keyword_do or '{' or '('
    mail(:to => admin@domain.com, :subject => "Review")
  syntax error, unexpected tASSOC, expecting tCOLON2 or '[' or '.'
    mail(:to => admin@domain.com, :subject => "Review")
syntax error, unexpected ')', expecting keyword_end 
```

这是我试图放置 UserMailer 代码的控制器

```
def create
    @post = current_user.posts.build(params[:post])
    if @post.save
      if @post.review
        UserMailer.review_email(@user).deliver
        flash[:notice] = "Post will be reviewed"
      redirect_to root_path
      else
        flash[:success] = "Posted"
      redirect_to root_path
    end
    else
      @feed_items = []
      render 'static_pages/home'
    end
  end 
```

用户邮件模型

```
class UserMailer < ActionMailer::Base
  default from: "account@domain.com"

  def review_email(user)
    @user = user
    mail(:to => admin@domain.com, :subject => "Post needs review")
  end

end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T19:46:06.767

去掉 ()，把地址变成一个字符串。

```
mail :to => "admin@domain.com", :subject => "Post needs review" 
```

# .net - Ninject 3.0 与 Mono 异常

> ID：15910510
> 
> 赞同：0
> 
> 时间：2013-04-09T19:08:44.997
> 
> 标签：.net, linux, mono, ninject

我正在尝试让一个.net 应用程序在引用 Ninject 的单声道中运行。我已经从这里下载了 mono ninject 版本：

[https://code.google.com/p/ninject2/downloads/detail?name=Ninject-3.0.1.10-release-mono-4.0.zip&can=2&q=](https://code.google.com/p/ninject2/downloads/detail?name=Ninject-3.0.1.10-release-mono-4.0.zip&can=2&q=)

并将 dll 复制到我的应用程序的 bin 文件夹中。但是当我运行该应用程序时，出现以下异常：

程序集/data/sportingcharts/SCTrunk/DataLoader/bin/Debug/Ninject.dll 中缺少方法 Ninject.Syntax.IBindingToSyntax::To<[1]>()，在程序集“...”中引用

我尝试了许多单声道版本，它们都导致相同的错误。在我的应用程序中执行绑定的函数如下所示：

```
private void DefaultDALBind<Interface, Implementation>(string connectionString) where Implementation:Interface
{
    Bind<Interface>().To<Implementation>().InSingletonScope().WithConstructorArgument("connectionString", connectionString);
} 
```

我还尝试从 GIT 下载最新的注入源，但 Ninject.build nant 脚本失败并显示：

```
Function call failed. Expression: ${PInvoke::IsWow64Process()}
                                   ^^^^^^^^^^^^^^^^^^^^^^^^^
    IsWow64Process 
```

有人知道我在做什么错吗？

# ios - 如何在 UIVIewController 中添加多个 UIAlertview？

> ID：15910512
> 
> 赞同：0
> 
> 时间：2013-04-09T19:08:57.247
> 
> 标签：ios, objective-c, uitableview, uialertview

嗨，在我的视图控制器中，有两个带有多个按钮的警报视图，这些按钮将触发另一种方法。所以我使用以下代码，但

```
- (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex 
```

这个方法根本没有调用。这是我使用的全部代码

```
 - (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    if(indexPath.section==1)
    {
        if(indexPath.row==0)
        {
            GMMAboutUsViewController *aboutus=  [self.storyboard instantiateViewControllerWithIdentifier:@"aboutus"];
            [self.navigationController pushViewController:aboutus animated:YES];
        }
        else if (indexPath.row==1)
        {
            GMMTermsOfServiceViewController *termsofservice=  [self.storyboard instantiateViewControllerWithIdentifier:@"termsofservice"];
            [self.navigationController pushViewController:termsofservice animated:YES];
        }
        else if (indexPath.row==2)
        {
            GMMUserGuideViewController *userguide=  [self.storyboard instantiateViewControllerWithIdentifier:@"userguide"];
            [self.navigationController pushViewController:userguide animated:YES];

        }
        else
        {
            GMMCreditsandCopyrightsViewController *creditsandcopyrights=  [self.storyboard instantiateViewControllerWithIdentifier:@"creditsandcopyrights"];
            [self.navigationController pushViewController:creditsandcopyrights animated:YES];

        }
    }
    else 
    {
        if(indexPath.row==0)
        {
           alertDeregister=[[UIAlertView alloc]
                                      initWithTitle:@"Deregister"
                                      message:@"Are you sure you want to Deregister ? "
                                      delegate:nil
                                      cancelButtonTitle:@"NO"
                                      otherButtonTitles:nil, nil];
            alertDeregister.tag=kFirstAlertViewTag;
            [alertDeregister addButtonWithTitle:@"YES"];
            [alertDeregister show];

        }
        else 
        {
            alertLogout=[[UIAlertView alloc]
                                      initWithTitle:@"Logout"
                                      message:@"Are you sure you want to logout ? "
                                      delegate:nil
                                      cancelButtonTitle:@"cancel"
                                      otherButtonTitles:nil, nil];
            alertLogout.tag=kSecondAlertViewTag;
            [alertLogout addButtonWithTitle:@"Logout"];
            [alertLogout show];

        }

    }
}

- (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex
{
    NSString *title = [alertView buttonTitleAtIndex:buttonIndex];
    if(alertView==alertDeregister)
    {
        if(buttonIndex==0)
        {
            [self deregister];
        }

    }
    else if (alertView==alertLogout)
    {
        if(buttonIndex==0)
        {
            GMMLoginController *login = [self.storyboard instantiateViewControllerWithIdentifier:@"l"];
            [self presentModalViewController:login animated:NO];
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T04:02:24.000

您应该将 self 作为委托传递。

像

```
 alertLogout=[[UIAlertView alloc]
                              initWithTitle:@"Logout"
                              message:@"Are you sure you want to logout ? "
                              delegate:self
                              cancelButtonTitle:@"cancel"
                              otherButtonTitles:nil, nil]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T19:47:05.887

您不必添加到 .h 文件中，只需在创建警报视图时添加 delegate:self 即可调用 clickedButtonAtindex 方法。请加

```
 NSLog("clickedButtonAtIndex called"); 
```

到您的 clickedButtonAtIndex 方法以检查其调用是否存在问题

# validation - RSS 提要的描述标签是否正确

> ID：15910517
> 
> 赞同：2
> 
> 时间：2013-04-09T19:09:16.550
> 
> 标签：validation, rss, tags, feed

我只是想知道我们是否可以使用多个

```
<![CDATA[ ....some text... ]]> 
```

RSS标签内的元素？

[哈佛法学院的 RSS 2.0 对此只字未提。](http://cyber.law.harvard.edu/rss/rss.html)

我想知道该标签是否正确：

```
<description>
<![CDATA[ <img src=" ]]>
http://www.anynamewebsite.com/us/system/news/content/2012/09/19/20276/375_Molaxy_note_II__Flip_Cover_Photo_1.jpg
<![CDATA[ " border=0><br />  ]]>
<![CDATA[ blah, blah ]]>
</description> 
```

我使用这个工具[http://validator.w3.org/feed](http://validator.w3.org/feed)来验证 RSS，它说 RSS 是有效的，但无论如何显示了一些需要更正的建议。

所以我不确定 RSS 2.0 格式还是[http://validator.w3.org/feed](http://validator.w3.org/feed)谁是正确的？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T15:47:42.223

当然; `CDATA`不会影响 XML 的结构。解析该文档的任何客户端都将看到包含文本的单个`<description>`元素。这是一般的 XML 行为；您的验证警告不是由于该决定。

# wpf - 在鼠标点击时设置 x 和 y

> ID：15910520
> 
> 赞同：0
> 
> 时间：2013-04-09T19:09:39.963
> 
> 标签：wpf

我有一个矩形，我想在用户按下鼠标按钮向左 1 个像素和向下 1 个像素时设置位置（x，y），所以我得到一个简单的反馈。

```
 <Canvas x:Name="canvas">
        <Canvas.Resources>
            <Style x:Key="myStyle" TargetType="Rectangle">
                <Setter Property="Fill" Value="AliceBlue" />
                <Style.Triggers>
                    <Trigger Property="IsMouseOver" Value="True">
                        <Setter Property="Fill" Value="Green"  />
                    </Trigger>
                    <EventTrigger RoutedEvent="Button.Click" >
                        <BeginStoryboard>
                            <Storyboard TargetProperty="Canvas.Left">
                                <Int16Animation From="10" To="100" Duration="0:0:0:1" />
                            </Storyboard>
                        </BeginStoryboard>
                    </EventTrigger>
                </Style.Triggers>
            </Style>
        </Canvas.Resources>

        <Rectangle x:Name="rect" Width="120" Height="120" Canvas.Left="10" Canvas.Top="10" Style="{StaticResource myStyle}" />
    </Canvas> 
```

使用我当前的解决方案，鼠标悬停在触发器上。但是对于我的 EventTriggers 没有任何反应？

任何想法如何做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T19:20:29.550

这里有一些问题。

*   矩形上没有`Button.Click`事件。改为使用例如`MouseLeftButtonUp`。
*   `Canvas.Left`是附属物。您必须在括号中写入属性名称。
*   它是 type `double`，因此应该由 a 设置动画`DoubleAnimation`。

像这样编写 EventTrigger：

```
<EventTrigger RoutedEvent="MouseLeftButtonUp" >
     <BeginStoryboard>
         <Storyboard TargetProperty="(Canvas.Left)">
             <DoubleAnimation From="10" To="100" Duration="0:0:0.1" />
         </Storyboard>
    </BeginStoryboard>
</EventTrigger> 
```

# c++ - 对于需要生成一些图形的 C++ 项目，推荐使用哪个 graphviz 库 API？

> ID：15910527
> 
> 赞同：6
> 
> 时间：2013-04-09T19:10:10.363
> 
> 标签：c++, ubuntu, graphviz, boost-graph

我知道 Graphviz 有几个版本的库。但是对于哪个被认为是当前+推荐的，我有点困惑。我想从一个 linux GUI 应用程序生成并显示一些图表。

根据第 22 页的[http://www.graphviz.org/doc/libgraph/Agraph.pdf，Libgraph](http://www.graphviz.org/doc/libgraph/Agraph.pdf)被 Cgraph 取代。但该文件名为 Agraph，我觉得很奇怪。

在第 23 页，它还说 Lgraph 是 Cgraph 的 C++ 继任者，由于我使用的是 C++，我很想了解更多，但我似乎无法在任何地方找到 Lgraph。

也许相关，我确实看到有一个名为 BGL 的 Boost 库，它支持导入和导出 graphviz 文件。寻找关于直接使用 BGL 而不是 Graphviz 还是 Lgraph 更可取的意见。

`sudo apt-get install libgraphviz-dev`如果我得到 Cgraph ，它看起来像在 Ubuntu 上。在这种情况下，这个问题要么确认 Cgraph 是推荐的库，要么询问 Lgraph 或 BGL 是否值得考虑。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-26T23:17:23.783

BGL 不向 Graphviz 提供交互界面；如果需要，您将需要使用 Graphviz 的本地库之一，例如 cgraph。BGL 可以读取和输出 Graphviz 格式的文件，但这似乎不是您想要的；它也有自己的一些布局算法，但它们不如 Graphviz 中的复杂。

# amazon-web-services - 如何在 AWS s3 和 AWS ec2 之间传输文件

> ID：15910534
> 
> 赞同：60
> 
> 时间：2013-04-09T19:10:54.873
> 
> 标签：amazon-web-services, amazon-s3, amazon-ec2

我正在使用 AWS ec2 实例。在这种情况下，我会生成一些文件。这些操作由用户数据完成。

现在我想通过在用户数据本身中编写代码来将这些文件存储在 s3 上。

*   那么如何将这些文件存储在 s3 上呢？
*   有这方面的教程吗？

* * *

## 回答 #1

> 赞同：74
> 
> 时间：2014-10-23T08:48:21.743

使用最新的 AWS CLI ( [http://aws.amazon.com/cli/](http://aws.amazon.com/cli/) )，您可以使用以下命令将文件从 Ec2 实例甚至本地计算机复制到 S3 存储。

```
aws s3 cp myfolder s3://mybucket/myfolder --recursive 
```

然后你会得到类似的东西：

```
upload: myfolder/file1.txt to s3://mybucket/myfolder/file1.txt 
upload: myfolder/subfolder/file1.txt to s3://mybucket/myfolder/subfolder/file1.txt 
```

如果这是您第一次使用`aws`CLI 工具，那么您需要运行：

`aws configure`

这将要求您输入访问密钥和密码以及指定默认区域。

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2013-04-10T03:23:22.910

有多种方法可以将文件发送到 S3。我在下面列出了它们以及相关的安装和文档。

*   **S3CMD** : ( [http://s3tools.org/s3cmd](http://s3tools.org/s3cmd) ) 您可以通过 apt-get install s3cmd 在 debian/ubuntu 上轻松安装它，然后从命令行运行。您可以将其合并到 bash 脚本或程序中。

*   **S3FS**：（[http://www.pophams.com/blog/howto-setups3fsonubuntu1104x64](http://www.pophams.com/blog/howto-setups3fsonubuntu1104x64)和[https://code.google.com/p/s3fs/wiki/InstallationNotes](https://code.google.com/p/s3fs/wiki/InstallationNotes)）...这安装了一个 s3 存储桶，因此它看起来就像本地磁盘一样。设置需要更多的努力，但是一旦安装了磁盘，您不需要做任何特别的事情来获取存储桶中的文件。

*   如果您使用 CMS（让我们以 Drupal 为例），您可以选择**使用模块**来处理对存储桶的访问，例如[http://drupal.org/project/storage_api](http://drupal.org/project/storage_api)

*   最后，您可以使用**编程语言实现**自己处理所有逻辑，对于 PHP，您可以从这个[http://undesign.org.za/2007/10/22/amazon-s3-php-class](http://undesigned.org.za/2007/10/22/amazon-s3-php-class)开始，并在此处查看文档[http ://undesign.org.za/2007/10/22/amazon-s3-php-class/documentation](http://undesigned.org.za/2007/10/22/amazon-s3-php-class/documentation)

PHP实现的一个例子：

```
<?php

    // Simple PUT:
    if (S3::putObject(S3::inputFile($file), $bucket, $uri, S3::ACL_PRIVATE)) {
        echo "File uploaded.";
    } else {
        echo "Failed to upload file.";
    }

?> 
```

s3cmd 的一个例子：

```
s3cmd put my.file s3://bucket-url/my.file 
```

# 编辑

另一个值得一提的选项是 AWS CLI [http://aws.amazon.com/cli/](http://aws.amazon.com/cli/) 这是广泛可用的，例如它已经包含在 AmazonLinux 中并且可以通过 Python 下载（它安装在包括 linux 和 windows 在内的许多系统上） .

[http://docs.aws.amazon.com/cli/latest/reference/s3/index.html](http://docs.aws.amazon.com/cli/latest/reference/s3/index.html)

> 可用命令，cp ls mb mv rb rm 同步网站

[http://docs.aws.amazon.com/cli/latest/reference/s3api/index.html](http://docs.aws.amazon.com/cli/latest/reference/s3api/index.html)用于与 S3 交互

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2014-03-13T13:06:21.640

将**s3cmd**包安装为：

```
yum install s3cmd 
```

或者

```
sudo apt-get install s3cmd 
```

取决于您的操作系统。然后用这个复制数据：

```
s3cmd get s3://tecadmin/file.txt 
```

也`ls`可以列出文件。

有关更多详细信息，请参阅[此](http://tecadmin.net/install-s3cmd-manage-amazon-s3-buckets/#)

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2013-04-09T19:19:02.717

我正在使用[s3cmd](http://s3tools.org/s3cmd)从我的 ec2 实例存储每晚导出的数据库备份文件。在配置 s3cmd 之后，您可以在他们的站点上阅读，然后您可以运行如下命令：

`s3cmd put ./myfile s3://mybucket`

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2013-12-09T07:42:30.100

用于`s3cmd`：

```
s3cmd get s3://AWS_S3_Bucket/dir/file 
```

[在此处](http://kb.site5.com/shell-access-ssh/how-to-setup-and-configure-the-s3cmd-tool-for-amazon-s3/)查看如何安装 s3cmd ：

这对我有用...

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2016-04-21T19:13:04.117

所有将 s3 挂载为伪文件系统的尝试都是有问题的。它是对象存储，而不是块设备。如果您必须挂载它，因为您有必须具有本地文件路径的遗留代码，请尝试 goofys。它比 s3fs 快约 50 倍。[https://github.com/kahin/goofys](https://github.com/kahing/goofys)

这些天，s3cmd 有点长。如今，AWS cli 是一个更好的选择。语法不太方便，但它是您需要保留的少一个工具。

如果你能坚持http访问。从长远来看，它会让你的生活更轻松。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2018-08-05T15:57:51.540

在 AWS CLI 上，我使用以下命令将 zip 文件从 EC2 实例复制到 S3

```
aws s3 cp file-name.zip s3://bucket-name/ 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2018-12-22T00:26:11.213

我认为实际上最好的答案实际上是上面，使用该`aws`命令，但是对于您不想安装其他任何东西的情况，还值得一提的是，您可以通过 HTTPS 下载文件，例如打开一个浏览器并导航到：

`https://s3.amazonaws.com/`*(bucketName)* `/`*(relativePath)* `/`*(fileName)*

这也意味着您可以只使用`wget`或`curl`从 shell 提示符进行传输。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-05-12T15:57:36.053

我假设您需要从新实例复制到 s3。首先创建一个 IAM 角色，这样您就不需要运行 aws configure，这一切都应该在启动时工作。其次安装 cli，然后在用户数据中使用 aws cli 定义您的复制作业。下面是 Ubuntu 18 的示例。将 IAM 角色分配给您的实例。

***用户数据：***

```
#!/bin/bash
apt-get update -y
apt install awscli -y
aws s3 cp *Path of data* s3://*destination bucket*  -recursive *--other options* 
```

***创建 IAM 角色*** 1\. 转到[https://console.aws.amazon.com/iam/上的 IAM 控制台](https://console.aws.amazon.com/iam/) 2\. 在左侧窗格中，选择角色，然后单击创建角色。3\. 对于选择受信任实体的类型，选择 AWS 服务。选择 EC2。选择下一步：权限。4\. 对于附加权限策略，选择包含所需权限的 AWS 托管策略或创建自定义策略。5\. 点击Service 选择一个服务，在Find a service 框中输入S3，点击S3，选择动作（全部或read + write 和其他你可能需要的） 6\. 点击Resources，选择Resource（你可以输入所有资源或限制到具有 ARN 的特定存储桶） 7\. 单击下一步：查看策略。输入名称和描述。单击创建策略。8\. 返回创建角色页面，单击刷新，按您分配的名称过滤策略，选择策略。9\. 单击下一步：标签，然后添加任何所需的标签 10\. 在 Review 页面上，

***参考***

*   [https://aws.amazon.com/premiumsupport/knowledge-center/ec2-instance-access-s3-bucket/](https://aws.amazon.com/premiumsupport/knowledge-center/ec2-instance-access-s3-bucket/)
*   [https://aws.amazon.com/blogs/infrastructure-and-automation/amazon-s3-authenticated-bootstrapping-in-aws-cloudformation/](https://aws.amazon.com/blogs/infrastructure-and-automation/amazon-s3-authenticated-bootstrapping-in-aws-cloudformation/)
*   [https://optimalbi.com/aws-tips-and-tricks-moving-files-from-s3-to-ec2-instance/](https://optimalbi.com/aws-tips-and-tricks-moving-files-from-s3-to-ec2-instance/)

# iphone - 如何在不使用开放图形 API 的情况下在 Facebook 墙上发布图像和文本

> ID：15910542
> 
> 赞同：1
> 
> 时间：2013-04-09T19:11:11.427
> 
> 标签：iphone, ios, objective-c, facebook

我开发了一个示例项目，我在其中显示文本和图像，并且可以将其发布在 facebook 墙上。我在下面显示了代码和它的图像。这就像我们如何将照片添加到墙上并显示状态消息

```
- (IBAction)postStatusUpdateClick:(UIButton *)sender
{
    UIImage *image =[UIImage imageNamed:@"Icon-72@2x.png"];

    NSMutableDictionary* params = [[NSMutableDictionary alloc] init];
    [params setObject:@"Test with Image" forKey:@"message"];
    [params setObject:UIImagePNGRepresentation(image) forKey:@"picture"];
    shareOnFacebook.enabled = NO; //for not allowing multiple hits

    [FBRequestConnection startWithGraphPath:@"me/photos"
                                 parameters:params
                                 HTTPMethod:@"POST"
                          completionHandler:^(FBRequestConnection *connection,
                                              id result,
                                              NSError *error)
     {
         if (error)
         {
             //showing an alert for failure
             [self showAlert:@"Facebook unable to share photo " result:result error:error];
         }
         else
         {
             //showing an alert for success
             [self showAlert:@"Facebook share photo successful" result:result error:error];
         }
         shareOnFacebook.enabled = YES;
     }];
}

// UIAlertView helper for post buttons
- (void)showAlert:(NSString *)message
           result:(id)result
            error:(NSError *)error {

    NSString *alertMsg;
    NSString *alertTitle;
    if (error) {
        alertTitle = @"Error";
        if (error.fberrorShouldNotifyUser ||
            error.fberrorCategory == FBErrorCategoryPermissions ||
            error.fberrorCategory == FBErrorCategoryAuthenticationReopenSession) {
            alertMsg = error.fberrorUserMessage;
        } else {
            alertMsg = @"Operation failed due to a connection problem, retry later.";
        }
    } else {
        NSDictionary *resultDict = (NSDictionary *)result;
        alertMsg = [NSString stringWithFormat:@"Successfully posted '%@'.\nPost ID: %@",
                    message, [resultDict valueForKey:@"id"]];
        alertTitle = @"Success";
    }

    UIAlertView *alertView = [[UIAlertView alloc] initWithTitle:alertTitle
                                                        message:alertMsg
                                                       delegate:nil
                                              cancelButtonTitle:@"OK"
                                              otherButtonTitles:nil];
    [alertView show];
} 
```

![在此处输入图像描述](https://i.stack.imgur.com/fLO5e.png)

*****现在我想以正确的格式显示，就像来自 facebook 的美味示例一样。** ![在此处输入图像描述](https://i.stack.imgur.com/532y9.png)

**我想在没有 open graph api 的情况下做到这一点。任何人都可以帮助我吗**

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T01:11:38.727

不使用 Open Graph API 在 FB 墙上发布带有文本的图像 >> [http://xcodenoobies.blogspot.com.au/2012/09/how-to-upload-photo-and-update-status.html](http://xcodenoobies.blogspot.com.au/2012/09/how-to-upload-photo-and-update-status.html)

**更新的答案**

使用 FB iOS SDK 在 facebook 上发布图像和文本 [https://developers.facebook.com/docs/tutorials/ios-sdk-tutorial/](https://developers.facebook.com/docs/tutorials/ios-sdk-tutorial/)

干杯，拉维

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T02:34:32.297

只需在移动 safari 中打开此 url。它将显示共享对话框

```
 "http://www.facebook.com/dialog/feed?fbapp_id=yorfbappId&name=Test&description=test&redirect_uri=fbyourfbappid%3A%2F%2Fauthorize&sdk=ios" 
```

# javascript - 如何在加载时获取元素宽度？

> ID：15910545
> 
> 赞同：2
> 
> 时间：2013-04-09T19:11:16.297
> 
> 标签：javascript, html, dom, javascript-events

我用 javascript 编写了一个滑块控件，对此有些担心。脚本在 window.onload 上初始化，并将所有具有类*滑块*的元素转换为滑块。
例如：

`<div id="hueSlider" class="slider" min="0" max="360" value="240"></div>`

问题是当 document.load 事件被触发时，元素还没有被渲染，所以我不能在没有滑块宽度的情况下计算滑块句柄位置。我做了一个解决方法，为每个滑块创建一个计时器，检查滑块是否具有非零宽度，然后设置句柄位置并自行移除。

但这是非常丑陋的解决方案。你知道如何以正确的方式做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T19:17:31.793

你总是可以使用这个：

```
window.onload = function(){
    // Access elements in here
}; 
```

或者这样：

```
if(document.addEventListener) {
    document.addEventListener("DOMContentLoaded", function(){
        // Access elements in here for modern browsers
    }, false);
} else {
    document.attachEvent("onreadystatechange", function(){
        if(document.readyState === "complete") {
            // Access elements in here for older browsers
        }
    });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T19:17:52.543

```
function checkLoad()
{
     if (window.onLoad)
     {
          // you can call your statements in here
     } else {
          setTimeout('checkLoad();', 1000)
     }
} 
```

您可以尝试的另一个技巧是：

```
 if (window.addEventListener){

       window.addEventListener('load', ready, false)

    } else if (window.attachEvent) {

      window.attachEvent('onload', ready)
    } 
```

**编辑：**

如果上述两种方法都不起作用，请尝试下面的一种，它应该是万无一失的，如果这不起作用。您的代码中可能还有其他问题：

```
function makeDoubleDelegate(function1, function2) {
    return function() {
        if (function1)
            function1();
        if (function2)
            function2(); //call your get slider width statements in here.
    }
}

window.onload = makeDoubleDelegate(window.onload, myNewFunction ); 
```

这背后的逻辑是，makeDoubleDelegate() 函数将被放在第一个 JS 文件中，随时可以调用。它所做的是接受两个函数作为参数，检查它们是否存在，如果存在，则返回一个包含有效的现有函数的匿名函数。

第一次调用 window.onload 时，window.onload 本身是未定义的，所以返回的是一个匿名函数，里面只有 myNewFunction()。在随后的 window.onload 分配中，window.onload 确实存在，因此它所持有的任何内容都将被新函数包裹起来。所以名单越来越长。

# javascript - javascript中多个cookie的大小限制

> ID：15910547
> 
> 赞同：0
> 
> 时间：2013-04-09T19:11:21.327
> 
> 标签：javascript, cookies

正如我读过很多地方，cookie 大小限制是 4KB。这不适合我。现在我想创建多个 cookie。我想知道 4KB 限制是否适用于它们中的每一个，例如我可以制作每个 4KB 的 4 个 cookie，或者它适用于所有这些 cookie。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T19:21:17.387

使用[LocalStorage](http://diveintohtml5.info/storage.html)。您可以跨所有支持 HTML5 的浏览器[可靠地存储和检索每个域大约 2.5 兆字节的信息。](http://dev-test.nemikor.com/web-storage/support-test/)

# workflow-foundation-4 - 在代码中更新 DisplayName，没有显示在设计器中？

> ID：15910548
> 
> 赞同：2
> 
> 时间：2013-04-09T19:11:28.627
> 
> 标签：workflow-foundation-4, activitydesigner

这应该很容易，但我无法弄清楚。当我的自定义活动的某些属性发生变化时（例如，通过在 WF 设计器的属性网格中更改它），我想动态更新 DisplayName。我在属性设置器代码中这样做：

```
public sealed class TarpSpecItem : Activity, ITarpSpecItem, INotifyPropertyChanged
{
...
    public DocumentationType Type
    {
        get { return _type; }
        set { _type = value;
            DisplayName = "<" + value.ToString() + ">";
            OnPropertyChanged("DisplayName");
            OnPropertyChanged("Type");
        }
    } 
```

该活动实现 INotifyPropertyChanged。然而，DisplayName 在设计器表面上并没有改变。我错过了什么？

* * *

威尔的回答是正确的。我将设计器 *.xaml.cs 的更新代码粘贴到此处作为单独的答案以具有正确的格式（不可能作为评论）。这段代码编译并完成了任务。

```
 protected override void OnModelItemChanged(object newItem)
    {
        ModelItem modelItem = newItem as ModelItem;
        if (modelItem != null)
            modelItem.PropertyChanged += this.ModelItemPropertyChangedHandler;
        base.OnModelItemChanged(newItem);
    }

    private void ModelItemPropertyChangedHandler(object sender, PropertyChangedEventArgs e)
    {
        if (!e.PropertyName.Equals("Type", StringComparison.OrdinalIgnoreCase))
            return;
        ModelItem.Properties["DisplayName"].SetValue("<" + ModelItem.Properties["Type"].Value +">");
    } 
```

将活动包装在模型项中并没有使解决方案显而易见，是吗？很难看到发生了什么，但它确实有效。干得好，威尔！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T20:53:39.020

你`Activity`被包裹在一个 中[`ModelItem`](http://msdn.microsoft.com/en-us/library/system.activities.presentation.model.modelitem.aspx)，它处理Activity 和设计表面之间的**所有**通知服务。

当最初包装在设计器中时，`ModelItem`它**不会**检查您`Activity`是否提供了一些属性更改通知方法（INPC、自定义`TypeDescriptor`等）或其他接口（即，我[在这里](https://connect.microsoft.com/VisualStudio/feedback/details/631634/modelitem-does-not-respect-types-that-implement-idataerrorinfo)`IDataErrorInfo`有一个连接）。

所以，本质上，你不能做你试图在这里完成的事情。在 Activity 中，您无法通过包装 ModelItem 发回更改通知。无论如何，你真的不应该这样做。

在设计器中，状态更改应该*只*通过`ModelItem`，因为它需要保持其状态与被包装的`Activity`. 如果它的状态和包装实例的状态不一致，您将不会在设计器中看到正确的信息。

```
// we're doing this in the designer
var activity = ModelItem.GetCurrentValue() as MyActivity; 
activity.DisplayName = "You won't ever see this in the design surface!"; 
```

相反，您必须*通过*`ModelItem`

```
// again, in the designer code
ModelItem.Properties["DisplayName"].Value = "You will see this change!"; 
```

那么，解决方案是什么？唯一真正的解决方案是*确保您`Activities`在状态发生变化时处于被动状态！* 属性值更改不应触发*任何事情*。

相反，将这样的代码移动到设计器中！

```
override OnModelItemChanged(object obj)
{
    // live dangerously!
    var mi = obj as ModelItem;
    mi.PropertyChanged += OnPropertyChanged;
}

void OnPropertyChanged(object sender, PropertyChangedEventArgs e)
{
    if(!e.PropertyName.Equals("Type", StringComparison.OrdinalIgnoreCase))
        return;
    ModelItem.Properties["DisplayName"].Value = 
        "<" + 
        ModelItem.Properties["Type"].GetCurrentValue().ToString() + 
        ">";
} 
```

当然，你不能只是复制粘贴这个。它可能有一些错误。但它让你知道你必须做什么。

# mysql - mysql SELECT 返回每个匹配项之一

> ID：15910549
> 
> 赞同：0
> 
> 时间：2013-04-09T19:11:31.633
> 
> 标签：mysql, select, limit

我正在处理需要地址信息的用户注册表单。

我有一张表，其中包含大约 120 万个国家/州/城市/邮编条目，涵盖整个世界。

给定一个国家，我想选择该国家的所有州。使用以下查询和“US”作为示例查询，我得到大约 49,000 条记录，我只想要 50 条……每个州一条！）

```
SELECT state FROM locales WHERE country='US' 
```

结果如下所示：

```
Alaska
Alaska
Alaska
Alaska
Alaska 
```

其中代表：

```
Akutan, Alaska
Cold Bay, Alaska
False Pass, Alaska
King Cove, Alaska
Sand Point, Alaska 
```

我只想要一个阿拉斯加，一个科罗拉多，一个乔治亚……

同样，给定一个州，我想选择该州的所有城市并给定一个城市，该城市的所有拉链。

我需要如何编写查询来限制这一点，我需要如何设置索引来优化这些查询？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T19:13:23.570

使用 DISTINCT 限制重复条目。

```
SELECT DISTINCT state FROM locales WHERE country='US' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T19:13:26.763

DISTINCT 将帮助您：

```
SELECT DISTINCT state FROM locales WHERE country='US' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T19:14:24.887

```
SELECT DISTINCT state FROM locales WHERE country='US' LIMIT 50; 
```

给定一个州，我想选择该州的所有城市并给定一个城市，该城市的所有拉链。再次假设您只想要其中 50 个的列表（如果您想要所有其他人，请删除 LIMIT 50）：并将下面的字段替换为表中适当的列名。

```
SELECT DISTINCT state, city, zip FROM locales WHERE country='US' LIMIT 50; 
```

如果您想要前 50 个州的城市和邮政编码列表：

```
SELECT state, city, zip FROM locales WHERE country='US' and state in (SELECT DISTINCT state FROM locales WHERE country='US' LIMIT 50); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T19:17:12.527

将此与限制一起使用

> SELECT DISTINCT state FROM locales WHERE country='US' LIMIT 0,50

# java - 测试数组类类型对象时出现 Eclipse ClassNotLoadedException

> ID：15910550
> 
> 赞同：2
> 
> 时间：2013-04-09T19:11:35.673
> 
> 标签：java, eclipse, debugging, junit

**错误：**

org.eclipse.debug.core.DebugException: com.sun.jdi.ClassNotLoadedException: 检索数组的组件类型时发生类型未加载

**原因：**

```
Typer[] typeResult;
for( String check : splitter )
{
  if ( check != null)
  {
    TypeResponse list = service.getGroup(name, id, value, db );
    typeResult = list.getCompany(); /* ERROR HERE */
    for ( int i = 0; i<typeResult.length; i++   )
    {
      String fvalue = typeResult[i].getCompManagerName();
    }
  }

} 
```

ECLIPSE Java 编译器 = 1.6 JAVA_HOME = 1.6

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-09-06T13:34:15.733

看起来您`service.getGroup(name, id, value, db )`正在返回 null 或垃圾值，因为服务对象本身就`NULL`在这里。

# c - 使用地址运算符设置指针的区别

> ID：15910551
> 
> 赞同：1
> 
> 时间：2013-04-09T19:11:36.587
> 
> 标签：c, pointers, addressof

我想知道以这种方式设置 C 指针的最大区别是什么：

```
int int_var = 5;
int *int_ptr = &int_var; 
```

这样：

```
int int_var = 5;
int *int_ptr = int_var; 
```

因为在这两种情况下，结果`*int_ptr`都是 5，不是吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T19:13:00.490

不，仅在第一种情况下。当您尝试尊重指针时，第二种情况将导致未定义的行为。使用第一种情况。

一些解释：

```
int int_var = 5;
int *int_ptr = &int_var; // here int_ptr will hold the address of var 
```

然而

```
int int_var = 5;
int *int_ptr = int_var; // here int_ptr will hold the address 5. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T19:14:37.840

不。在第一种情况下 5，在第二种情况下未定义，地址为 5 的内存的内容。？？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T19:15:13.880

不，`int_ptr`是一个指针，所以你必须在定义它时为其分配一个地址

第一个是正确的

```
int int_var = 5;
int *int_ptr = &int_var; 
```

另一个是错的

另一个你正在`5`为指针`int_ptr`（地址）分配一个 int 值，所以就像你`5`为指针分配地址一样`int_ptr`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T19:25:25.633

在 C 中，`pointers`指向地址本身。address-of`&`运算符是变量的地址所在的位置。

所以在：

```
int int_var = 5;
int *int_ptr = &int_var; 
```

* **int_ptr**将被正确使用，因为它指向`ADDRESS`int_var 的值为 5

然而在：

```
int int_var = 5;
int *int_ptr = int_var; 
```

* **int_ptr**指向的地址是 5，而不是值 5 所在的地址，它是一些随机数。

**另外**关于数组：

```
char *y;
char x[100];
y = x; 
```

这是可以做到的，因为数组实际上是一个地址。

[了解更多信息。](http://www.tutorialspoint.com/ansi_c/c_pointing_data.htm)

# tomcat - 与tomcat服务器跨域资源共享

> ID：15910554
> 
> 赞同：0
> 
> 时间：2013-04-09T19:11:47.627
> 
> 标签：tomcat, cross-domain, cors

我想允许跨源请求到我的服务器。我找到了以下过滤器代码：

```
public class CorsFilter implements Filter {
  // For security reasons set this regex to an appropriate value
  // example: ".*example\\.com"
  private static final String ALLOWED_DOMAINS_REGEXP = ".*";

  public void doFilter(ServletRequest servletRequest,
      ServletResponse servletResponse, FilterChain filterChain)
      throws IOException, ServletException {

    HttpServletRequest req = (HttpServletRequest) servletRequest;
    HttpServletResponse resp = (HttpServletResponse) servletResponse;

    String origin = req.getHeader("Origin");

    if (origin != null && origin.matches(ALLOWED_DOMAINS_REGEXP)) {
          System.out.println("CorsFilter:: origin matches, yey");
      resp.addHeader("Access-Control-Allow-Origin", origin);

      if ("options".equalsIgnoreCase(req.getMethod())) {

        resp.setHeader("Allow", "GET, HEAD, POST, PUT, DELETE, TRACE, OPTIONS");
        if (origin != null) {
          String headers = req.getHeader("Access-Control-Request-Headers");
          String method = req.getHeader("Access-Control-Request-Method");
          resp.addHeader("Access-Control-Allow-Methods", method);
          resp.addHeader("Access-Control-Allow-Headers", headers);
          resp.setContentType("text/plain");
        }
        resp.getWriter().flush();
        return;
      }
    }

    // Fix ios6 caching post requests
    if ("post".equalsIgnoreCase(req.getMethod())) {
      resp.addHeader("Cache-Control", "no-cache");
    }

    if (filterChain != null) {
      filterChain.doFilter(req, resp);
    }
  }

  @Override public void destroy() {}
  @Override public void init(FilterConfig arg0) throws ServletException {}
} 
```

似乎只有在首先有一个 OPTIONS 请求时它才会做任何事情。但是，就我而言，我没有看到任何 OPTIONS 请求，而只有一个 GET 请求。我错过了什么吗？解决办法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-20T16:14:09.173

从 Tomcat 7.0.41 开始，您可以通过[内置过滤器](http://tomcat.apache.org/tomcat-7.0-doc/config/filter.html#CORS_Filter)控制 CORS 行为。

您几乎唯一需要做的就是在 CATALINA_HOME/conf 中编辑全局 web.xml 并添加过滤器定义：

```
     <!-- ================== 内置过滤器定义 ====================-->

      ...

     <过滤器>
       <filter-name>CorsFilter</filter-name>
       <filter-class>org.apache.catalina.filters.CorsFilter</filter-class>
     </过滤器>
     <过滤器映射>
       <filter-name>CorsFilter</filter-name>
       <url-pattern>/*</url-pattern>
     </filter-mapping>

    <!-- ==================== 内置过滤器映射 ====================== -->

```

# python - 为什么切片 endindex 不是 endindex

> ID：15910564
> 
> 赞同：0
> 
> 时间：2013-04-09T19:12:30.780
> 
> 标签：python, python-2.7, slice

我刚开始学习 python，我已经开始学习字符串切片了。

当我输入

```
suitcase = ["sunglasses", "hat", "passport", "laptop", "suit", "shoes"]
print suitcase[0:1] 
```

我希望它能够打印`['sunglasses', 'hat]`，但我得到了`['sunglasses']`。从我读过的内容来看`aList[beginIndex:endIndex]`，但从我的经验来看，它更像`aList[beginIndex:endIndex+1]`是让你最后拥有的索引。

有人可以解释为什么会这样吗？我无法理解其背后的原因。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T19:14:46.487

来自[文档](http://docs.python.org/2.7/library/stdtypes.html#sequence-types-str-unicode-list-tuple-bytearray-buffer-xrange)：“从 i 到 j 的 s 切片被定义为具有索引 k 的项目序列，使得 i <= k < j。”

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T19:15:24.677

我认为最好的论点是您可以使用`endIndex - startIndex`.

这也与内置`range()`函数密切相关。如果使用两个参数，则它们被解释为开始和停止索引，但如果只使用一个，则它是停止索引并且开始索引设置为`0`。所以`range(5)`给出了一个包含 5 个元素的列表。如果切片按照您认为应该的方式工作，那么`range()`可能会有相同的行为，并且`range(5)`返回 6 个元素会很混乱。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T19:22:25.143

Python 中的切片被定义为包含/排他，即您想要的第一项，然后是您*不*想要的第一项。

我不知道具体为什么他们这样做，但它与`range()`工作原理一致，并且也适用于`len()`（即整个容器的一部分`x`是`[0:len(x)]`）；这也适用于负片：`x[-1]`is `x[len(x)-1]`.

# maven - Leiningen 是否读取 .m2/settings.xml 中的 maven 设置？

> ID：15910567
> 
> 赞同：11
> 
> 时间：2013-04-09T19:12:54.943
> 
> 标签：maven, clojure, leiningen

我在`~/.m2/settings.xml`. 我试过`lein search`了，它在我的存储库中找不到包。如何告诉 leiningen 在 Maven 设置中搜索存储库？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-09T19:54:11.920

您可以将`:repositories`标签添加到 project.clj 文件中：

```
(defproject com.foo/bar "1.0.0-SNAPSHOT"
  ;; ...other configuration...
  :repositories [["java.net" "http://download.java.net/maven/2"]]) 
```

看看官方[示例 project.clj](https://github.com/technomancy/leiningen/blob/master/sample.project.clj)。

您必须从 settings.xml 文件中复制存储库配置，但这是使用 Leiningen 管理存储库的惯用且推荐的方式。

[lein2 是否使用 ~/.m2/settings.xml 中定义的存储库？](http://grokbase.com/p/gg/clojure/132n4ptwdm/does-lein2-use-repositories-defined-in-m2-settings-xml)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-07-17T10:17:54.193

顺便说一句，如果您真的想在用户配置文件级别添加 Maven 存储库或镜像（对于像 Nexus 这样的内部公司代理存储库很有用，特别是如果 Lein[经常遇到公司 NTLM 代理问题](https://github.com/technomancy/leiningen/wiki/HTTP-Proxies#ntml-proxies)），那么您可以在`~/.lein/profiles.clj`/中执行此操作`%USERPROFILE%\.lein\profiles.clj`：

[如何配置leiningen的maven用法？](https://stackoverflow.com/questions/16481227/how-to-configure-leiningens-maven-usage)

就我而言，在 Windows 上，将这张`:mirrors`地图放在我的`%USERPROFILE%\.lein\profiles.clj`：

```
{:user
    {
        :java-cmd "C:\\Program Files\\Java\\jdk1.7.0_09\\bin\\java.exe"
            :plugins [    ]
            :mirrors {
                #".+"  "http://internal-nexus.example.com/content/groups/public-all/"
            }
    }
} 
```

`

使用匹配所有可能名称的`#".+"`模式语法指定镜像存储库的名称（导致镜像每个存储库），如本[Leiningen 问题报告 271](https://github.com/technomancy/leiningen/issues/271)中所述。

# python - Mac Mountain Lion 上的 PyQT - 无法创建新的 QApplication

> ID：15910570
> 
> 赞同：0
> 
> 时间：2013-04-09T19:13:08.397
> 
> 标签：python, macos, pyqt, osx-mountain-lion

我正在尝试学习 PyQT，并且安装 QT、SIP 和 PyQT 没有太多麻烦。

但是，在尝试遵循一些基本教程时，我什至无法创建 QApplication，即：

```
import sys
from PyQt4 import QtGui, QtCore
app = QtGui.QApplication(sys.argv) 
```

我收到以下错误：

```
File "<pyshell#376>", line 1, in <module>
app = QtGui.QApplication(sys.argv)
AttributeError: 'module' object has no attribute 'QApplication' 
```

如果我这样做：

目录（QtGui）

我没有看到列出的 QApplication。

在此工作之前，我是否需要先做一些事情（即另一个配置步骤等）？

# xslt - 如何在表格上使用 If/Else 来选择默认值

> ID：15910575
> 
> 赞同：1
> 
> 时间：2013-04-09T19:13:32.150
> 
> 标签：xslt, conditional, xmltable

我在 xsl 中使用 if/else 条件时遇到问题。在下面的代码片段中，我有一个从数据库值中获取其值的表。最初，我的代码看起来像

```
<fo:table-body>
                        <xsl:for-each select="//ROWSET3_ROW">
                            <fo:table-row>
                                <fo:table-cell xsl:use-attribute-sets="cell">
                                    <fo:block>
                                        <xsl:value-of select = "MODIFICATION_NUMBER" />
                                    </fo:block>
                                </fo:table-cell>
                                <fo:table-cell xsl:use-attribute-sets="cell">
                                    <fo:block>
                                        <xsl:value-of select = "STATUS_DATE" />
                                    </fo:block>
                                </fo:table-cell>   
.  
.
.... 
```

其中 MODIFICATION_NUMBER、STATUS_DATE 和其他属性来自 xml 表：

```
<ROWSET3>
<ROWSET3_ROW>
  <MODIFICATION_NUMBER>0</MODIFICATION_NUMBER>
  <SURVEY_JOB_STATUS_ID />
  <STATUS_DATE>5/13/2008</STATUS_DATE>
  <STATUS_NOTES /> 
```

在某些情况下，数据库中有这些值的空值，所以我试图对那些没有值的列设置条件。因此，如果选择的值为 NULL，则在此处放置一个随机字符，例如“-”。我的代码似乎不起作用

```
<fo:table-cell xsl:use-attribute-sets="cell">
                                    <fo:block>
                                        <xsl:value-of select = "30" />
                                        <xsl:choose>
                                            <xsl:when test = "STATUS_NOTES != ''">
                                                <xsl:value-of select = "STATUS_NOTES"/>
                                            </xsl:when>
                                                <xsl:otherwise>
                                                <xsl:value-of select = "blank" />
                                                </xsl:otherwise>
                                                </xsl:choose>
                                    </fo:block>
                                </fo:table-cell> 
```

这就是我试图做的。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T19:51:08.903

```
<xsl:choose>
    <xsl:when test = "STATUS_NOTES">
        <xsl:value-of select = "STATUS_NOTES"/>
    </xsl:when>
    <xsl:otherwise>
        <xsl:value-of select = "blank" />
    </xsl:otherwise>
</xsl:choose> 
```

如果`STATUS_NOTES`是一个空元素，这将起作用。如果它还可以包含空字符串，则可以使用`test="not(normalize-space(STATUS_NOTES) = '')"`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T01:57:03.103

**使用**：

```
<xsl:value-of select=
      "Concat(STATUS_NOTES, substring('blank', 6 - 5*boolean(STATUS_NOTES)))"/> 
```

**上述单线使用的事实是，根据定义**：

```
number(true()) = 1 
```

**和**

```
number(false()) = 0 
```

# c# - 为什么没有执行 URL？

> ID：15910579
> 
> 赞同：0
> 
> 时间：2013-04-09T19:14:00.340
> 
> 标签：c#, javascript, asp.net-mvc, url, razor

我有一点 JS 代码：

```
$("#ProcessGroupRevisions").change(function () {
    if (this.value  == -1) {
        var processId = $("#Processes").prop("value");
        '@Url.Action("AddNewRevision","SetpointManagement") ? processGroupId =' + @ViewBag.ProcessGroupId + '& processId=' + processId;
     }
}); 
```

当这个文件，生成的URL如下：

![在此处输入图像描述](https://i.stack.imgur.com/LtCuV.png)

问题是 URL 永远不会被执行。视图永远不会加载。我需要更改什么才能实际执行 URL？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T19:19:48.277

因为问号前后都有空格`?`。然后之后`=`。然后是一个空格`&`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T19:26:21.447

Thank you everyone. The solution is as follows:

```
window.location.href = '@Url.Action("AddNewRevision","SetpointManagement")?processGroupId=' + @ViewBag.ProcessGroupId + '&processId=' + processId; 
```

# java - Git Post Hook 启动 Jenkins 工作

> ID：15910581
> 
> 赞同：1
> 
> 时间：2013-04-09T19:14:04.370
> 
> 标签：java, spring, git, jenkins

我想在 git 中设置一个 post 挂钩，以在每次有人推送到 git 服务器时启动 jenkins 工作。问题是有些项目在 Linux 上，有些在 windows 上，有些在 mac 上。

每次有人推入我的 git 存储库时，我都希望使用以下代码：

```
cURL http://jenkins:8080/job/WebComm%20-%20Common%20Project%20for%20Communications/build?token=webcomm 
```

但是，如果我是对的，这将不适用于 Windows 用户，对吧？

有人可以告诉我我是否正确，我该如何解决？

我制作了一个包含以下内容的接收后文件：

```
#!/bin/sh
curl "http://jenkins:8080/job/WebComm%20-%20Common%20Project%20for%20Communications/build?token=webcomm" 
```

但工作没有开始？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T19:17:23.147

将其作为服务器端接收后挂钩，用户使用什么并不重要。重要的是服务器正在运行什么。

[在这里](http://git-scm.com/book/en/Customizing-Git-Git-Hooks)阅读所有的钩子。

将其用作接收后挂钩应该可以解决问题：

```
#!/bin/sh
curl http://jenkins:8080/job/WebComm%20-%20Common%20Project%20for%20Communications/build?token=webcomm 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T19:17:40.713

如果你在 github 上，你可以利用他们的 web hooks 功能。这是相当可靠的。

如果没有，您可以在自己的服务器上使用[服务器端挂钩。](http://git-scm.com/book/ch7-3.html#Server-Side-Hooks)

# graphics - 怎样才能达到《Antichamber》游戏中的效果？

> ID：15910585
> 
> 赞同：4
> 
> 时间：2013-04-09T19:14:17.857
> 
> 标签：graphics, 3d, 3d-engine

看一下名为“Antichamber”的游戏截图：

![反室截图](https://i.stack.imgur.com/wp250.jpg)

您可以看到一个立方体框架，通过一个面您可以看到位于立方体内部的一些对象，通过另一个面您也可以看到位于同一个立方体中的其他对象。令我感到困惑的是，您可以同时观看两张脸，并且正如您在屏幕截图中看到的那样，来自两张“脸”的对象都是可见的。此外，每个物体似乎都填满了立方体内的整个空间。

我的问题很笼统——我怎样才能达到同样的效果？也许有3d引擎允许它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T22:44:22.627

这称为[“门户渲染”](http://en.wikipedia.org/wiki/Portal_rendering)。它通常用于绘制某些类别的 3D 环境的廉价绘图——但正如您所注意到的，门户的内容不必与任何其他门户的内容相关......

为了达到这个效果，在绘制门户时，引擎会设置图形光栅化器来裁剪通过门户可见的对象的光栅化。为了有效地实现它，引擎会进行遮挡剔除：它只需要绘制那些可能通过门户可见的对象。

为确保您的传送门可以正确绘制为“内部大于外部”，您应该确保在绘制之前“清除”每个传送门内部的可见区域。但是，如果您的所有门户场景都保证“无懈可击”，那么您可能只需清除深度缓冲区即可逃脱。

# wicket - Apache Wicket 进程仅在服务器端的表 UI 上修改了行

> ID：15910590
> 
> 赞同：0
> 
> 时间：2013-04-09T19:14:25.777
> 
> 标签：wicket, wicket-1.5

我有一个表格，它在表格中显示对象列表，每行显示每个对象。因此，当用户更改值并单击提交时，我只需要处理已修改的对象，而不是全部。我们可以检查该行/对象是否已更改并仅处理该行吗？如果可能，请提供详细信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T20:37:49.637

如果我愿意，我将有一个 listView，每行都有自定义面板。自定义面板将有一个布尔值，指示此行已更改。我将在附加到该行的每个表单组件的 OnChangeAjaxBehavior 中设置布尔值。提交时，我只会提交布尔值设置为 true（已修改）的面板的值。

# javascript - 移除 jQuery 悬停效果

> ID：15910596
> 
> 赞同：0
> 
> 时间：2013-04-09T19:14:41.733
> 
> 标签：javascript, html, hover

当鼠标悬停在链接上时，假设效果`X`发生。鼠标移开后如何恢复原样？

例如，我尝试使用 javascript 修改链接行为。鼠标悬停时链接会发生变化，但如何恢复更改？

HTML 代码：

```
<ul id="nav">
    <li id="a1"><a href="#">original link 1</a></li>
    <li id="a2"><a href="#">hover link 1</a></li>
    <li id="b1"><a href="#">original link 1</a></li>
    <li id="b2"><a href="#">hover link 1</a></li>
    <li id="c1"><a href="#">original link 1</a></li>
    <li id="c2"><a href="#">hover link 1</a></li>
</ul> 
```

Javascript代码：

```
$("#nav a li").hover(function () {
     $('#' +this.id.charAt(0)+"1").hide();
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T19:17:50.980

改正 HTML 标记后，请改用 CSS。这将为您提供更好的性能，更少的代码，并且更“正确”，因为视觉细节应该留给 CSS。

```
#nav li:hover {
  display: none;
} 
```

**更新：**在尝试进一步了解您的标记后，我可以更好地了解您要做什么。您似乎想隐藏下一个`<li>`元素。在这种情况下，使用 CSS 邻接选择器：

```
#nav li:hover + li {
  display: none;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T19:18:00.940

尝试

```
 $("#nav a li").on('hover', function () {
   //mousehover
 } , function(){
   //mouseout
 } ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T19:18:35.240

使用 mouseover 和 mouseout [jQuery](http://api.jquery.com/mouseover/) insted of hover

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T19:18:35.220

你写的代码相当于`$(selector).on("mouseenter mouseleave", handlerInOut);`

使用有效的标记...

```
<ul id="nav">
    <li><a href="#">hover link 1</a></li>
    <li><a href="#">hover link 2</a></li>
</ul> 
```

jQuery

```
$("#nav a li").hover(function () {
     $('#' +this.id.charAt(0)+"1").hide();
 }, function() {
     $('#' +this.id.charAt(0)+"1").show();
}); 
```

来自 jQuery API 文档：[http ://api.jquery.com/hover/](http://api.jquery.com/hover/)

> 调用 $(selector).hover(handlerIn, handlerOut) 是以下的简写： $(selector).mouseenter(handlerIn).mouseleave(handlerOut);

# android - Android 和谷歌地图 v2

> ID：15910598
> 
> 赞同：1
> 
> 时间：2013-04-09T19:15:03.220
> 
> 标签：android, google-maps, error-handling

我已经尝试了我在互联网上看到的关于谷歌地图和安卓的每一个例子，但它们都不起作用。

我在模拟器和真实设备上尝试过，但都给我一个关于找不到片段和类的错误。

我确实将 Google Play 服务添加到项目中，输入了 Google API 密钥但仍然无法正常工作。

这是我使用的最后一个示例：

# googlemapv2.java

```
package com.example;

import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;

public class MainActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.main, menu);
        return true;
    }

} 
```

# activity_main.xml

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:paddingBottom="@dimen/activity_vertical_margin"
    android:paddingLeft="@dimen/activity_horizontal_margin"
    android:paddingRight="@dimen/activity_horizontal_margin"
    android:paddingTop="@dimen/activity_vertical_margin"
    tools:context=".MainActivity" >

    <TextView
        android:id="@+id/header"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/hello_world" />

    <fragment 
        android:id="@+id/map"
        android:name="com.google.android.gms.maps.MapFragment"
        android:layout_below="@+id/header"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        /> 
```

# 清单文件

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="12"
        android:targetSdkVersion="17" />

    <permission 

        android:name="com.example.permission.MAPS_RECIEVE"
        android:protectionLevel="signature"/>

     <uses-permission android:name="com.example.permission.MAPS_RECIEVE" />
     <uses-permission android:name="android.permission.INTERNET"/>
     <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>
     <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
     <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/>
     <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>

     <uses-feature 
         android:glEsVersion="0x00020000"
         android:required="true" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >

        <meta-data 
            android:name="com.google.android.maps.v2.API_KEY"
            android:value="API key"/>
        <activity
            android:name="com.example.MainActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T19:19:00.423

如果您收到，`fragment/class not found error`那么您的问题可能是因为缺少对该库的良好参考，`google-play-services`因为`MapFragment`它是该库的一部分：

检查你的`Android Dependencies`文件夹是否`(blue)`在`google-play-services` `(orange)`里面，你会发现有这个类的`com.google.android.gms.maps`包：`(green)``MapFragment``(red)`

![在此处输入图像描述](https://i.stack.imgur.com/rizxV.png)

如果不是这种情况，您可以查看我写的这篇博文的前 3 个步骤，以了解如何正确引用这个包：

[谷歌地图 API V2](http://blog-emildesign.rhcloud.com/?p=435)

# arm - 如何为 ARM 架构交叉编译 Microwindows

> ID：15910599
> 
> 赞同：1
> 
> 时间：2013-04-09T19:15:03.923
> 
> 标签：arm, cross-compiling, embedded-linux

Microwindows的交叉编译有一些问题。这是我的步骤： 0\. 下载交叉编译工具链

```
    wget http://www.codesourcery.com/sgpp/lite/arm/portal/package5383/public/arm-none-linux-gnueabi/arm-2009q3-67-arm-none-linux-gnueabi-i686-pc-linux -gnu.tar.bz2
    sudo mkdir –p /opt/toolchain
    sudo cp arm-2009q3-67-arm-none-linux-gnueabi-i686-pc-linux-gnu.tar.bz2 /opt/toolchain
    cd /opt/工具链
    sudo tar –jxvf arm-2009q3-67-arm-none-linux-gnueabi-i686-pc-linux-gnu.tar.bz2
    导出 PATH=/opt/toolchain/arm-2009q3/bin:$PATH

```

1.  下载 Microwindows 的最新版本 (v. 0.92)

```

    光盘~
    wget ftp://microwindows.censoft.com/pub/microwindows/microwindows-full-0.92.tar.gz
        tar xvf microwindows-full-0.92.tar.gz

```

1.  预配置：安装下一个软件包：

```

    sudo apt-get install libjpeg-dev libpng-dev python-dev libfreetype6-dev

```

1.  编辑 ARM 架构的配置文件

```
    cd microwindows-0.92/src
    纳米配置

```

并编辑下一行：

```
ARCH                     = LINUX-ARM
ARMTOOLSPREFIX           = arm-none-linux-gnueabi-  
INCJPEG                  = /usr/include/
INCPNG                   = /usr/include/
INCZ                     = /usr/include/
INCTIFF                  = /usr/include/
LIBFT2LIB                = /usr/lib/libfreetype.a 
```

1.  运行制作

之后我有下一条消息：

```
    cc1：警告：包含位置“/usr/include/”对于交叉编译不安全
    cc1：警告：包含位置“/usr/include/freetype2”对于交叉编译不安全
    在 /home/user/microwindows-0.92/src/include/windows.h:19 包含的文件中，
                     来自/home/user/microwindows-0.92/src/mwin/winmain.c:44：
    /home/user/microwindows-0.92/src/include/windef.h:131：警告：函数声明不是原型
    /home/user/microwindows-0.92/src/include/windef.h:132：警告：函数声明不是原型
    /home/user/microwindows-0.92/src/include/windef.h:133：警告：函数声明不是原型
    /home/user/microwindows-0.92/src/mwin/winmain.c：在函数“MwSelect”中：
    /home/user/microwindows-0.92/src/mwin/winmain.c:356：错误：“asm”中的不可能约束
    /home/user/microwindows-0.92/src/mwin/winmain.c:357：错误：“asm”中的不可能约束
    /home/user/microwindows-0.92/src/mwin/winmain.c:358：错误：“asm”中的不可能约束
    make[1]: *** [/home/user/microwindows-0.92/src/obj/mwin/winmain.o] 错误1
    make: *** [subdir-/home/user/microwindows-0.92/src/mwin] 错误 2

```

怎么了？我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-05T09:52:05.133

首先，您需要所有依赖库和 CROSS-COMPILE`libjpeg-dev` `libpng-dev` `python-dev` `libfreetype6-dev`和其他依赖库的源代码。

然后在编译时，必须在交叉编译库所在的位置更新和`microwindow`的路径。`include``library``Makefile`

# apache - Apache 与 Tomcat 配置

> ID：15910606
> 
> 赞同：1
> 
> 时间：2013-04-09T19:15:32.863
> 
> 标签：apache, tomcat6

我在服务器配置方面很强大，但我正在尝试解决 Apache 中的以下错误。

```
[Mon Apr 08 11:02:36 2013] [error] (104)Connection reset by peer: ajp_ilink_receive() can't receive header
[Mon Apr 08 11:02:36 2013] [error] ajp_read_header: ajp_ilink_receive failed
[Mon Apr 08 11:02:36 2013] [error] (120006)APR does not understand this error code: proxy: read response failed from 127.0.0.1:8009 (localhost) 
```

阿帕奇“httpd.conf”：

```
<IfModule prefork.c>
StartServers       8
MinSpareServers    5
MaxSpareServers   20
ServerLimit      256
MaxClients       256
MaxRequestsPerChild  4000
</IfModule>

<IfModule worker.c>
StartServers         4
MaxClients         800
MinSpareThreads     25
MaxSpareThreads     75
ThreadsPerChild     50
MaxRequestsPerChild 1000
</IfModule> 
```

Tomcat6 server.xml：

```
<Connector port="8080"
           maxHttpHeaderSize="8192"
           maxThreads="150"
           minSpareThreads="25"
           maxSpareThreads="75"
           enableLookups="false"
           redirectPort="8443"
           acceptCount="100"
           connectionTimeout="20000"
           disableUploadTimeout="true"
           compression="on"
           compressionMinSize="2048"
           noCompressionUserAgents="gozilla, traviata"
           compressableMimeType="text/html,text/xml,text/plain,application/json" />
<Connector port="8009"
           enableLookups="false"
           redirectPort="8443"
           protocol="AJP/1.3"
           backlog="200"
           maxThreads="400" /> 
```

除了 Apache 无法与 Tomcat 通信外，我仍然无法找到为什么会出现上述 apache 错误。但我无法不断地重现这一点（每隔几周随机发生）。

Apache和Tomcat中的属性之间有什么规则吗？例如，我将“worker.c”的“StartServers”从 2 更改为 4。但我不确定这是否会导致问题。

非常感激你的帮助。

# elasticsearch - Elasticsearch 重新索引：如何在构建新索引时直接更新它？

> ID：15910612
> 
> 赞同：3
> 
> 时间：2013-04-09T19:16:07.583
> 
> 标签：elasticsearch, tire

我了解使用别名重新索引以避免停机，如此处所述：[Is there a smarter way to reindex elasticsearch?](https://stackoverflow.com/questions/13851044/is-there-a-smarter-way-to-reindex-elasticsearch)

但是仍然存在一个问题：假设重新索引需要一个小时，而原始数据库不断变化。我需要任何更新才能访问*这两个*索引。

有没有办法做到这一点？

如果没有，我希望更新到新索引，而查询仍然从旧索引提供。但至少在Tire，我还没有看到使用不同索引进行读写的方法。可以这样做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T06:00:17.880

您不能同时从 Elasticsearch 更新两个索引。您可以自行处理该问题，并向 Elasticsearch 发送 2 个索引请求。

也就是说，尽管我很确定您可以使用 Tire 搜索多个索引（但我不知道 Tire），但您可能可以在这里使用[alias](http://www.elasticsearch.org/guide/reference/api/admin-indices-aliases/)

你有一个旧的 index1

将所有内容推送到 index2 在 index1、index2 之上添加别名索引

索引完成后删除 index1

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-09-16T22:03:24.433

为了在搜索系统使用新的用户生成内容更新时也允许零停机时间索引更改，您可以使用以下策略：

为指向 ES 索引的读取和写入操作定义别名。更新模型时，查找 model_write 别名并使用它写入所有跟踪的索引，这将包括当前活动的索引和任何正在后台构建的索引。

```
class User < ActiveRecord::Base
  def self.index_for_search(user_id)
    Timeout::timeout(5) do
      user = User.find_by_id(user_id)
      write_alias = Tire::Alias.find("users_write")
      if write_alias
        write_alias.indices.each do |index_name|
          index = Tire::Index.new(index_name)
          if user
            index.store user
          else
            index.remove 'user', user_id
          end
        end
      else
        raise "Cannot index without existence of 'users_write' alias."
      end
    end
  end
end 
```

现在，当您想要进行完整的索引重建（或初始索引创建）时，添加一个新索引，将其添加到别名中，然后开始构建它，因为知道任何活动用户都将同时将他们的数据添加到两个索引中。继续从旧索引读取，直到构建新索引，然后切换读取别名。

```
class SearchHelper
  def self.set_alias_to_index(alias_name, index_name, clear_aliases = true)
    tire_alias = Tire::Alias.find(alias_name)
    if tire_alias
      tire_alias.indices.clear if clear_aliases
      tire_alias.indices.add index_name
    else
      tire_alias = Tire::Alias.new(:name => alias_name)
      tire_alias.index index_name
    end

    tire_alias.save
  end
end

def self.reindex_users_index(options = {})
  finished = false
  read_alias_name = "users"
  write_alias_name = "users_write"
  new_index_name = "#{read_alias_name}_#{Time.now.to_i}"

  # Make new index for re-indexing.
  index = Tire::Index.new(new_index_name)
  index.create :settings => analyzer_configuration,
               :mappings => { :user => user_mapping }
  index.refresh

  # Add the new index to the write alias so that any system changes while we're re-indexing will be reflected.
  SearchHelper.set_alias_to_index(write_alias_name, new_index_name, false)

  # Reindex all users.
  User.find_in_batches do |batch|
    index.import batch.map { |m| m.to_elasticsearch_json }
  end
  index.refresh
  finished = true

  # Update the read and write aliases to only point at the newly re-indexed data.
  SearchHelper.set_alias_to_index read_alias_name, new_index_name
  SearchHelper.set_alias_to_index write_alias_name, new_index_name
ensure
  index.delete if defined?(index) && !finished
end 
```

可以在此处找到描述此策略的帖子：http: [//www.mavengineering.com/blog/2014/02/12/seamless-elasticsearch-reindexing/](http://www.mavengineering.com/blog/2014/02/12/seamless-elasticsearch-reindexing/)

# php - oci_error 为空

> ID：15910613
> 
> 赞同：0
> 
> 时间：2013-04-09T19:16:09.273
> 
> 标签：php, oracle, error-handling

我正在尝试分析我的 sql 失败的原因，但我`oci_error`的却是空的。不知道出了什么问题，我在安装 OCI8 时是否遗漏了任何设置？

这是我的代码：

```
 $group_list = oci_parse($dbc, "SELECT gn FROM groups");
    if (!$group_list) {
        $m = oci_error($group_list);
        print_r($m);
        echo "Query failed: " . $m['message'] . "\n";
    } else {
        echo "Query OK\n";
    } 
```

输出`Query failed:`显示但没有错误消息，没有打印文本。

请帮忙！！

编辑：

仅当我在 PHP 函数中编写此块时，此查询才会失败，否则查询会成功运行。不知道为什么它会这样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T23:49:21.860

我猜这是一个愚蠢的问题.. `$dbc`，我的连接句柄，应该在我的函数中声明为全局。这解决了这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T09:08:11.853

给 oci_error 连接 $dbc 而不是语句 $group_list。还缺少 oci_execute($group_list)。

# c# - 我可以使用 Moq 为字段设置值吗？

> ID：15910621
> 
> 赞同：5
> 
> 时间：2013-04-09T19:16:40.523
> 
> 标签：c#, .net, mocking, moq

我有一个我想模拟的依赖项。

```
public abstract class MyDependency
{
    protected Dictionary<string, object> _outputs = new Dictionary<string, object>();
    public Dictionary<string, object> Outputs
    {
        get
        {
            return _outputs;
        }
    }
} 
```

出于单元测试的目的，我需要公共属性`Outputs`返回一个已知值。我知道我们不能模拟字段或非虚拟成员。所以，我可以去创建我自己的模拟`MyDependency`来设置支持字段`_outputs`：

```
public class MockMyDependency : MyDependency
{
    public MockMyDependency()
    {
        _outputs = new Dictionary<string, object>
        {
            { "key", "value" }
        };
    }
} 
```

但是，是否可以在不显式创建我自己的派生模拟类的情况下使用 Moq 来执行此操作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T13:41:44.300

如果您无法将属性更改为虚拟或定义接口（我假设如果您不能执行第一个，则也无法执行第二个），那么我只看到两个可能的选项：

*   使用支持模拟非虚拟成员的模拟框架（例如 TypeMock）
*   像您已经做的那样，创建一个从 MyDependency 继承的特定模拟实现。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T20:45:31.097

如果您自己不从该类派生，则很难指定该`protected`字段`_outputs`，因为它不在范围内并且其名称将无法编译。

但是你当然可以用讨厌的反射来做到这一点：

```
var mock = new Mock<MyDependency>();

var field = typeof(MyDependency)
    .GetField("_outputs", BindingFlags.Instance | BindingFlags.NonPublic);
field.SetValue(mock.Object,
    new Dictionary<string, object> { { "key", "value" } }); 
```

* * *

如果你*确实*派生`MyDependency`自它，那么在派生自它的类中，你可以直接设置字段，如下所示：

```
// this code is inside some class which derives from MyDependency
mock.Object._outputs = new Dictionary<string, object> { { "key", "value" } }; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T19:28:42.393

我*想*我明白你在问什么，我想你正在寻找这样的东西：

```
public class Test
{
    public void MockObject()
    {
        var mocked = new Moq.Mock<MyDependency>();
        mocked.CallBase = true;
        mocked.Setup(m => m.Outputs).Returns(new Dictionary<string, object>() { { "key", "value" } });

        mocked.Object.{do something with mocked object};
    }
} 
```

......我认为你仍然需要`virtual`在`Outputs`财产上。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-11T14:46:14.793

声明一个接口，从 MyDependency 类中公开您想要的成员，然后您可以将它与 Moq 一起使用来创建测试所需的行为。

```
public interface IMyDependency {
    Dictionary<string, object> Outputs { get; }
}

// test...
var dictionary = new Dictionary<string, string>{{"key", "value"}};
var dependency = new Mock<IMyDependency>();
dependency.SetupGet(d => d.Outputs).Returns(dictionary); 
```

当您在生产代码中使用它时，您可以使用[DuckTyping](https://github.com/deftflux/DuckTyping)（或类似方法）在您的界面后面“投射” MyDependency 实例。

# sql-server-2008 - 将大量数据导入 SQL Server 2008

> ID：15910623
> 
> 赞同：0
> 
> 时间：2013-04-09T19:16:45.083
> 
> 标签：sql-server-2008, insert

我必须将超过 100000 个条目导入到许多表中。

我只有这样做的查询，但我一次只能运行 1000 个。

你知道我怎样才能更快地做到这一点吗？

谢谢

# php - 我在将 XML 转换为数组时遇到问题

> ID：15910625
> 
> 赞同：2
> 
> 时间：2013-04-09T19:16:51.247
> 
> 标签：php, xml

我是 PHP 的新手，所以请放轻松；）

基本上我有一个 XML 文件，我正在尝试使用 PHP 将其转换为数组。我的 XML 文件*supply.xml*看起来有点像这样......

```
<Supplies>
    <supply name="Pen">
        <supplier name="Pen Island">http://domain.com/</supplier>
        <quantity>2000</quantity>
        <cost>100.00</cost>
    </supply>
    <supply name="Pencil">
        <supplier name="Stationary World">http://domain.com/</supplier>
        <quantity>5000</quantity>
        <cost>115.30</cost>
    </supply>
    <supply name="Paper">
        <supplier name="Stationary World">http://domain.com/</supplier>
        <quantity>100</quantity>
        <cost>10.50</cost>
    </supply>
</Supplies> 
```

我希望它转换成具有这种结构的数组...

```
Array (
    [Pen] => Array (
        [supplier] => Pen Island
        [supplier_link] => http://domain.com/
        [quantity] => 2000
        [cost] => 100
    )
    [Pencil] => Array (
        [supplier] => Stationary World
        [supplier_link] => http://domain.com/
        [quantity] => 5000
        [cost] => 115.3
    )
    [Paper] => Array (
        [supplier] => Stationary World
        [supplier_link] => http://domain.com/
        [quantity] => 100
        [cost] => 10.5
    )
) 
```

我试过这个，但 PHP 不喜欢它......

```
<?php

    $xml_supplies = simplexml_load_file("supplies.xml");
    $supplies = array();
    foreach ($xml_supplies->Supplies->supply as $supply) {
        $supplies[(string)$supply['name']] = array(
            "supplier" => (string)$supply->supplier['name'],
            "supplier_link" => (string)$supply->supplier,
            "quantity" => (int)$supply->quantity,
            "cost" => (float)$supply->cost
        )
    }

    print_r($supplies);

?> 
```

我的理论是它会循环遍历每个*供应*元素并添加到*$supplies*数组中。

我花了将近一个小时试图让它工作，但我已经放弃了，需要一些帮助。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T19:27:25.960

简单的三线解决方案：

```
<?php
$xml = simplexml_load_file("supplies.xml");
$json = json_encode($xml);
$array = json_decode($json,TRUE); 
```

但是，如果不是绝对需要转换为数组，我更愿意将数据保存在 SimpleXMLElement 对象中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T19:21:56.297

只需将您的代码更改为：

```
foreach ($xml_supplies->supply as $supply) { ... 
```

如果您打印`$xml_supplies`，您将看到它具有以下结构：

```
SimpleXMLElement Object
(
    [supply] => Array
        (
            [0] => SimpleXMLElement Object
                (
                    [@attributes] => Array
                        (
                            [name] => Pen
                        )

                    [supplier] => http://domain.com/
                    [quantity] => 2000
                    [cost] => 100.00
                )
            ... 
```

所以你不需要在你的查询前面加上 root node `Supplies`。

# gstreamer - GStreamer 和动态字幕

> ID：15910634
> 
> 赞同：2
> 
> 时间：2013-04-09T19:17:23.147
> 
> 标签：gstreamer, subtitle, kate, matroska

我是 GStreamer 的新手，我正在尝试使用字幕流对视频流（现在是 v4l2src）进行编码并混合到 matroska 容器中。我可以传入带有字幕的 .srt 文件，然后将其编码到文本流中。但是，我想使用字幕流对录制视频时生成的“元数据”进行编码。我可以使用 textoverlay 但不想将元数据刻录到图像上。我想稍后再做（经过各种后期制作效果）。

随着时间的推移，有没有办法可以将字幕添加到 matroskamux 中？字幕文本的内容事先是未知的，例如移动摄像机的 GPS 坐标。

这是在 matroska 流中记录元数据的最佳方法吗？

这是我的 GStreamer 管道，形成 gst-launch 的 pov：

gst-launch-0.10 matroskamux 名称=mux ！文件接收器位置=test.mkv \ v4l2src ！x264enc ！多路复用器。\filesrc 位置=subtest.txt ！亚解析！kateenc 类别=SUB ！多路复用器。

感谢您的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-24T07:35:24.167

现在有点晚了，但是 WebM 对元数据类型的字幕有 WebVTT 支持。

# delphi - 创建共享内存时出错

> ID：15910635
> 
> 赞同：-5
> 
> 时间：2013-04-09T19:17:26.950
> 
> 标签：delphi

我必须调试一个使用 Delphi CodeGear 2009 构建的应用程序，该应用程序是由我以外的其他人构建的，而这个人不再是公司的一部分。

奇怪的问题，当我将项目加载到代码设备并运行应该实际工作的软件时，我收到一个错误：

> 第一次机会例外，$753CB9BC。异常类异常，带有消息“创建共享内存时出错 Global\{B40FBC0C-FEBD-11DD-B3EA-FC6656D89593} (5)”。处理 OrderCenter.exe (836268)

我什至无法在逐步模式下运行该软件，它似乎发生在我进入运行的应用程序本身之前。我不知道如何修复这个错误，我当然可以查看代码并理解它，也许可以修改它，但我肯定完全不明白如何在**没有任何 google 文档的情况下**修复这样的错误。我尝试浏览 google 和 SO 一段时间，尝试各种关键字组合，但没有任何结果。

我该如何调试呢？我从哪里开始寻找？

* * *

**编辑#1**

为了澄清，我什至在进入应用程序之前就遇到了一个异常，它甚至无法调试。我很乐意尽快粘贴堆栈跟踪，以便每个人都可以看到它在哪里崩溃。很抱歉最初没有想到这一点。

我在 Google 上搜索了确切的错误消息，但没有发现任何有用的东西。这里有几个例子：

[http://www.google.ca/#hl=fr&output=search&sclient=psy-ab&q=Error+creating+shared+memory&oq=Error+creating+shared+memory](http://www.google.ca/#hl=fr&output=search&sclient=psy-ab&q=Error+creating+shared+memory&oq=Error+creating+shared+memory)

[http://www.google.ca/#hl=fr&sclient=psy-ab&q=delphi+Error+creating+shared+memory&oq=delphi+Error+creating+shared+memory](http://www.google.ca/#hl=fr&sclient=psy-ab&q=delphi+Error+creating+shared+memory&oq=delphi+Error+creating+shared+memory)

* * *

**编辑#2**

感谢您花时间指定某种初始化程序的人，我在所有文件中搜索并找到该程序并发现代码在这里崩溃：

```
if not AlreadyRunning(ProcessName, TFormMain, False, False, True) then 
```

如果，我尝试查看这段代码的声明，它似乎确实在尝试创建一个全局共享内存对象，可能是某种互斥锁以防止双重初始化。

我的第一个猜测是，除了用户现在可以运行 2 个以上相同的应用程序这一事实之外，我可能只是放弃这部分代码而不会产生任何直接后果。

**在旁注中，**我想知道为什么这首先会失败（Win7，管理员帐户）？

*PS：*我最初无法找到错误发生位置的原因是因为应用程序处于发布模式而不是调试模式，我花了一些时间和深入的 UI 搜索在文件中的构建配置下注意到它经理。没有其他任何迹象表明我处于发布模式，直到我尝试在应用程序的初始化部分放置断点并且它不会停止......

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-09T19:49:26.713

该错误是由您的程序专门引发的。从这个消息中可以看出：

> 异常类异常，带有消息“创建共享内存时出错 Global\{B40FBC0C-FEBD-11DD-B3EA-FC6656D89593} (5)

这具有 Delphi 程序引发的异常的所有特征。十六进制由`$`而不是表示`0x`，并且消息的第一个单词是标准的Delphi。我将假设是您的程序引发了此异常。

首先，异常类是`Exception`. 据我所知，RTL 或任何有信誉的第三方库中都没有引发 class 异常`Exception`。这被认为是不好的做法。总是提出一个子类`Exception`。因此，您的应用程序代码正在引发此异常。

其次，消息描述了创建共享内存的错误，并给出了命名空间中的命名对象`Global`。这可能是一个命名的文件映射对象。

最后，该消息包含一个 Win32 错误代码，该代码通过调用`GetLastError`. 那个密码是 5 号，我们的老朋友[`ERROR_ACCESS_DENIED`](http://msdn.microsoft.com/en-gb/library/windows/desktop/ms681382.aspx#ERROR_ACCESS_DENIED)。

因此，该程序似乎与一个单独的进程协同运行，并且使用共享内存（文件映射）进行通信。无论出于何种原因，该文件映射的安全性都没有正确设置。

该对象已放置在`Global`命名空间中，如果您需要在会话之间共享它，您可以这样做。因此，另一个进程驻留在会话 0 中的服务中似乎是合理的。也许尚未正确指定保护对象以进行跨会话访问所需的安全属性。

引发异常的代码看起来有点像这样：

```
FileMapping := OpenFileMapping(FILE_MAP_READ or FILE_MAP_WRITE, 
  False, PChar(FileMappingName));
if FileMapping=0 then
  raise Exception.CreateFormat(
    'Error creating shared memory %s (%d)',
    [FileMappingName, GetLastError]
  ); 
```

这就是我从所提供的证据中所能说的。但是现在您知道要在程序中搜索什么来定位失败的代码了。交给你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T13:58:58.930

**我发布了这个答案，因为对问题的编辑使人们难以理解历史。向 David 致敬，让他在不看代码的情况下理解异常消息的含义，并向街区的新人 OP 解释这一点。**

似乎在 David 的帮助下，您找到了一些防止重复运行的代码实例的代码。如果您删除它，您可能不会受到其他处罚，但由于我们无法读取您的代码，因此我们无法确定地告诉您。我还要指出，发布和调试模式的概念对于本地开发人员（C++ 和 Delphi）来说是显而易见的，而对于那些不熟悉编译器和本地代码的人来说，可能更加微妙。如果您要维护一个 Delphi 应用程序，可能值得买一本关于 Delphi 的书。如果这是您的第一个编译/本机语言，那里有更多的龙，而且水很快就会变深。

这段即将死去的代码很可能是一个元素，它是：

(a) 从一些常见的德尔福技术食谱中复制和粘贴，或

(b) 甚至不是由原作者编写的组件或类的一部分

这段代码可能会因为移动这个为 1998 年的 Delphi 5 编写的组件代码而在 Windows NT 上产生错误，因此它在 WINdows 7 或 8 上的 Delphi XE3 中不再起作用。这种现象并非 delphi 独有并被称为“位腐烂”。换句话说，环境有点像一个移动的目标，旧代码经常这样中断。由 PHP 程序员在不了解 Delphi 或涉及的 Win32 API 的情况下解决此问题，就像让汽车修理师在我的肝脏上做手术一样。我不会给这家伙赔率。

不过这里有一个计划：

A. 把它注释掉。

B. 继续测试！

嘿抱歉狙击你，现在我们平了！;-)

# php - 票务系统 - 当用户没有任何票时显示消息

> ID：15910638
> 
> 赞同：1
> 
> 时间：2013-04-09T19:17:31.823
> 
> 标签：php, ticket-system

我正在开发一个新的票务系统，但出了点问题。当用户没有打开的工单时，它应该显示以下消息：

```
 <?}else{?>
<tr>
     <td style="background:#f7f7f7;">There are no tickets submitted yet.</td>
     </tr>
<?}?> 
```

我可能做错了什么，我不知道在哪里。这是我拥有的代码：

```
<?php 
if($_GET['a'] == "del" && $_GET['id'] != ""){
mysql_query("DELETE FROM message WHERE id='{$_GET['id']}' LIMIT 1;");
}

$msg = mysql_query("SELECT * FROM `message` WHERE `receiver`='{$_SESSION['login']}' ORDER BY date DESC")or die (mysql_error());
?>
<table id="nested" width="97%" cellspacing=0 cellpadding=0 style="border-collapse:collapse;">
<tr><th width="50px">ID</th><th width="110px">Date</th><th width="165px">Title</th><th width="90px">Status</th><th align="right" width="60px">Actions</th></tr></div>
<tbody>
<?php 
while($mesg = mysql_fetch_array($msg)) {
?>
<tr class="">
<th><?php echo $mesg['id']; ?> </th>
<td><?php echo $mesg['date']; ?> </td>
<td><?php echo $mesg['title']; ?> </td>

<td><?php
if($mesg['readed']) { echo "Read";
}else{ echo "Unread";
} ?> </td>
<th><ul class="action-buttons">

<li><a href="#myTickets?id=<?=$mesg['id']?>" class="action-button" title="Read"><span class="read"></span></a></li>
                <li><a href="#myTickets?a=del&id=<?=$mesg['id']?>" class="action-button" title="Delete"><span class="delete"></span></a></li>
                <li><a href="#myTickets?a=close&id=<?=$mesg['id']?>" class="action-button" title="Close"><span class="close"></span></a></li></ul>

<? } ?>

 </th>

<?}else{?>
    <tr>
         <td style="background:#f7f7f7;">There are no tickets submitted yet.</td>
         </tr>
    <?}?>

</tr>

</tbody>
</table>
</table> 
```

如果有人可以帮助我，我将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T19:24:35.887

请检查您的牙套。它不平衡。

```
<?php 
     if( mysql_num_rows($msg) == 0 ) { ?>    //means the query returns empty set.
        <tr>
             <td style="background:#f7f7f7;"> //There are no tickets submitted yet.</td>
        </tr>
<?php } else {  // you have messages
    while($mesg = mysql_fetch_array($msg)) {
         // finish ur while loop
 ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T19:24:47.153

没有与 .`if`匹配的语句`else`。`if`有票时添加for ，或者只是将评估为`else`没有*票*时的。`if``true`

 *例如：

```
<?if ( mysql_num_rows($msg) == 0 ) {?>
    <tr>
        <td style="background:#f7f7f7;">There are no tickets submitted yet.</td>
    </tr>
<?}?> 
```*

# python - Scrapy 解析 JSON 输出

> ID：15910639
> 
> 赞同：4
> 
> 时间：2013-04-09T19:17:33.293
> 
> 标签：python, json, scrapy

我正在使用 Scrapy 抓取网站。有些页面使用 AJAX，所以我收到了 AJAX 请求来获取实际数据。到目前为止，一切都很好。这些 AJAX 请求的输出是 JSON 输出。现在我想解析 JSON 但 Scrapy 只提供 HtmlXPathSelector。是否有人成功地将 JSON 输出转换为 HTML 并能够使用 HtmlXPathSelector 对其进行解析？

非常感谢您提前

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T19:20:21.757

```
import json

response = json.loads(jsonResponse) 
```

上面的代码将解码您收到的 json。之后，您应该能够以任何您想要的方式处理它。

（替换`jsonResponse`为您从 ajax 请求中获得的 json）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-31T07:26:57.727

有点复杂，仍然有效。

如果您有兴趣在 JSON 输出上使用 xpaths..

免责声明：可能不是最佳解决方案。+1 如果有人改进了这种方法。

安装dicttoxml包（推荐pip）

-使用scrapy的传统请求模块下载输出

在蜘蛛中：

```
from scrapy.selector import XmlXPathSelector
import lxml.etree as etree

request = Request(link, callback=self.parse_resp)
yield request

def parse_resp(self,response):
     json=response.body
     #Now load the contents using python's JSON module
     json_dict = json.loads(json)
     #transform the contents into xml using dicttoxml
     xml = dicttoxml.dicttoxml(json_dict)
     xml = etree.fromstring(xml)
     #Apply scrapy's XmlXPathSelector module,and start using xpaths
     xml = XmlXPathSelector(text=xml)
     data = xml.select(".//*[@id='count']/text()").extract()
     return data 
```

我这样做是因为，我将所有蜘蛛的所有 xpath 维护在一个地方（配置文件）

# eclipse - 关闭图表后，在 eclipse uml 中显示原型应用程序

> ID：15910640
> 
> 赞同：0
> 
> 时间：2013-04-09T19:17:33.387
> 
> 标签：eclipse, uml, eclipse-emf, stereotype

> 我怎样才能再次显示内联的刻板印象？

当我在 eclipse 中创建一个 uml 模型时，我可以应用刻板印象，没问题： ![前](https://i.stack.imgur.com/71KMY.jpg)

但是当我关闭这个图表并重新打开它时，我得到了这个：

![关闭并重新打开后](https://i.stack.imgur.com/zTo8n.jpg)

我明白为什么会这样，uml 模型分为两部分保存。但是我如何再次显示内联的刻板印象呢？像以前一样在我的建模元素上。（我想扩展我的模型）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T10:09:18.310

当您在 eclipse 中定义自己的 UML 配置文件，同时使用 UML 模型对其进行测试时，就会出现此问题。当您调整配置文件时，会创建一个新的“版本”。但是为测试配置文件而创建的模型仍然引用旧版本。

# database - 多选项 MS 访问报告

> ID：15910644
> 
> 赞同：1
> 
> 时间：2013-04-09T19:17:46.200
> 
> 标签：database, ms-access, report, ms-access-2010

我对 MS Access 非常陌生，但已经（松散地）在数据库上工作了一段时间。我们有一个跟踪会员的数据库。有一张桌子，里面有所有的会员信息。当添加新客户和现有客户或为当年付款时，该信息将应用于“PaidYear”列。多年来，我一直在添加一个列出当前年份成员的查询，并添加一个显示查询输出的报告。

我想创建一个报告，我可以（可能使用下拉菜单）选择活动年份和其他选项，如城市、公司名称、电话号码等。有没有办法简单地设置它？我的替代品必须足够简单，才能直观地使用。IE：

[选择年份] <-- 下拉列表的成员报告

[城市] [公司] [电话] [选择选项]<--- 报告的额外选项

我已经玩了一段时间了，虽然我可以设置设计，但我无法设置功能。非常感谢！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T02:17:13.340

是的，如果你想过滤你的报告，你可以写一点 VBA 来用过滤器打开你的报告（你不需要为此使用参数查询。在查询执行级别，但据我所知，仅运行完整查询并在报告打开的运行时过滤它的性能是相同的（Access 实际上可能只是在幕后执行此操作，再次，我不真的知道。

无论如何，让我们开始吧。这是一个代码片段，您可以将其用作起点并进行调整。

创建一个显示“运行报告”的按钮，我们称之为`cmdRunReport`

在该`On Click`按钮的事件中，您将放置一些代码。我现在只是在写这个，所以我可能有一些语法错误（在这台 PC 上没有 Access）。

```
 dim multiple as boolean
   dim filtering as string
   filtering = ""

   if me.yearDropdown is not null then
   filtering = filtering  + "[myYearField] = " & me.yearDropdown 
   multiple = true
   end if

   if me.cityDroPDown is not null then
    if multiple then
        filtering = filtering  + "AND [myCityField] = '" & me.cityDropdown & "'"
    else
        filtering = filtering  + "  [myCityField] = '" & me.cityDropdown & "'"
        set multiple = true
    end if
   end if

    if me.CompanyDropDown is not null then
      if multiple then
        filtering = filtering  + "AND [myCompanyField] = '" & me.CompanyDropdown & "'"
      else
        filtering = filtering  + "  [myCompanyField] = '" & me.CompanyDropdown & "'"
        set multiple  = true
      end if
   end if

    DoCmd.OpenReport "yourReport", acViewPreview, , filtering 
```

这是你能做什么的基础。如果语法错误并且不正确地连接过滤字符串（未经测试），我可能有几个，但这就是您可以开始的地方。

在英语中，它只查看用于过滤的表单下拉列表。它检查它们是否不为空，然后将它们的值连接到“过滤”字符串中。此字符串用作 OpenReport 方法中的参数。

希望这可以帮助。

# ruby-on-rails - rails 资产管道缓存字体

> ID：15910649
> 
> 赞同：0
> 
> 时间：2013-04-09T19:17:59.217
> 
> 标签：ruby-on-rails, asset-pipeline

rails 3.2.13 资产管道从缓存中提供字体而不是记录？

我正在使用以下 gem [font-awesome-sass-rails](https://github.com/littlebtc/font-awesome-sass-rails)并且在缓存字体文件并且服务器未记录请求时遇到问题。我最近从 gem 的 v2 升级到了 v3。但是 rails 仍然提供 v2 的字体文件。如果我从 gem run bundler restart webrick 中删除字体文件，清除浏览器缓存栏仍然提供文件。我可以破坏缓存的唯一方法是更改​​ sass 文件中的字体 url。

似乎字体文件正在被 sprockets 缓存并且无法清除？

我试图清除 sass 缓存：rm -fr tmp/sass-cache

有人有什么建议吗？我还想知道服务器日志中没有显示对缓存资产的请求是否正常？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T20:00:20.913

好的，这解决了它：

```
rake assets:clean 
```

我不确定为什么字体是唯一受预编译资产影响的文件。我一定有部分预编译的资产。

# ruby - 使用红宝石机械化打开新页面

> ID：15910657
> 
> 赞同：0
> 
> 时间：2013-04-09T19:18:21.213
> 
> 标签：ruby, rubygems

我正在使用此代码

```
require 'rubygems'
require 'mechanize'

agent = Mechanize.new
page = agent.get('http://www.indianrail.gov.in/pnr_Enq.html')
form = agent.page.forms[0]
print agent.page.forms[0].fields
# in this i get filed as lccp_pnrno1
agent.page.forms[0]["lccp_pnrno1"] = "4150702245"
button = form.button_with(:value => "Get Status")
agent.submit(form, button)
pp pages 
```

理想情况下，上述代码应先输入 10 位数字。，单击获取状态按钮，它应该给出一个新页面，因此需要提供信息的新页面，但我的输出只是第一页。所以我在这里有两个疑问：

1）如何检查表单是否提交。

2）其次如何在提交表单后打印下一页，因为pp页面只打印最后一页。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T20:34:32.650

当你这样做

```
pp page 
```

`page`仍然指的是分配给它的原始页面

```
page = agent.get('http://www.indianrail.gov.in/pnr_Enq.html') 
```

`page`提交表单后需要更新：

```
page = agent.submit(form, button)
pp page 
```

请注意，页面被分配了表单提交返回的值（页面）。

# android - multiautocompletetextview 下拉菜单不显示

> ID：15910659
> 
> 赞同：0
> 
> 时间：2013-04-09T19:18:34.057
> 
> 标签：android

我正在创建自己的键盘并使用 mMultiAuto.setText 将输入的每个字母放入 MultiAutoCompleteTextView。我已经按照所有教程进行了创建

```
mMultiAuto = (MultiAutoCompleteTextView)findViewById( R.id.multiautotextview );
    adapter = new ArrayAdapter<String>(this, android.R.layout.simple_dropdown_item_1line, COUNTRIES);
    mMultiAuto.setAdapter(adapter);  
    mMultiAuto.setTokenizer(new MultiAutoCompleteTextView.CommaTokenizer()); 
```

问题是当我在文本视图中输入一个字母时，下拉列表不显示。谁能帮忙？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-23T07:21:48.147

用以下代码替换您的代码

```
mMultiAuto = (MultiAutoCompleteTextView)findViewById( R.id.multiautotextview );
        adapter = new ArrayAdapter<String>(this, android.R.layout.simple_dropdown_item_1line, COUNTRIES);
        mMultiAuto.setAdapter(adapter);  

                            mMultiAuto.setThreshold(1);

                            mMultiAuto.setAdapter(soAdapter);

                            mMultiAuto.setOnTouchListener(new View.OnTouchListener() {

                                @Override
                                public boolean onTouch(View v, MotionEvent event) 
                                {
                                    mMultiAuto.showDropDown();
                                    return false;
                                }
                            }); 
```

# wcf-data-services - WCF 数据服务中的每个类型的表继承

> ID：15910662
> 
> 赞同：1
> 
> 时间：2013-04-09T19:18:38.027
> 
> 标签：wcf-data-services, table-per-type

我为我的项目使用 Microsoft Visual Studio 2010 Professional 的 C# 语言，但我遇到了问题。

我有两个解决方案。第一个解决方案是 Web 项目模板，它包含： 1-ADO.NET 实体数据模型用于数据库，我在 ADO.NET 实体数据模型中使用 Table-per-Type 继承 2-WCF 数据服务用于该实体数据模型

第二个解决方案是 WPF 项目模板，它包含： 1-第一个项目中存在的 WCF 数据服务的服务参考

问题是 ：

我无法使用服务引用生成的代码与任何类型的基础实体或派生实体进行交互

例如，我有一个名为“Person”的抽象实体和从它派生的两个非抽象实体“客户”和“员工”

当创建新的客户对象 - 或 Employee 对象 - 然后将其添加到上下文时，SaveChanges 方法抛出异常 DataServiceRequestException

我尝试使用 OfType() 方法，我得到另一个异常“NotSupportedException”

这个问题的解决方案是什么？预先感谢

# java - 在 log4j.properties 文件 SMTP Appender 中隐藏或加密密码

> ID：15910663
> 
> 赞同：4
> 
> 时间：2013-04-09T19:18:46.657
> 
> 标签：java, passwords, log4j, smtpappender

我正在使用自定义 gmail smtp appendar 从我的 gmail 帐户发送错误日志。按照说明操作：[http](http://www.tgerm.com/2010/05/log4j-smtpappender-gmail-custom.html) ://www.tgerm.com/2010/05/log4j-smtpappender-gmail-custom.html - 一切正常。除了一件事：在我的 log4j.properties 中：我不想输入我的密码“log4j.appender.EMAIL.SMTPPassword=somepass”，这样我就可以与我的队友分享这个项目。有人有建议吗？

下面是 log4j.properties 部分：

```
log4j.appender.EMAIL=com.tgerm.log4j.appender.GmailSMTPAppender
log4j.appender.EMAIL.SMTPHost=smtp.gmail.com
log4j.appender.EMAIL.SMTPDebug=true
log4j.appender.EMAIL.From=from@gmail.com
log4j.appender.EMAIL.To=to@tgerm.com
log4j.appender.EMAIL.SMTPUsername=smtpuser@gmail.com
log4j.appender.EMAIL.SMTPPassword=somepass //this is the problematic part
log4j.appender.EMAIL.Subject=Email Notification from Gmail SMTP Appender
log4j.appender.EMAIL.cc=cc@gmail.com
log4j.appender.EMAIL.layout=org.apache.log4j.PatternLayout
log4j.appender.EMAIL.layout.ConversionPattern=%p %t %c - %m%n
log4j.appender.EMAIL.BufferSize=1 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-09T19:20:51.790

对于初学者：不要使用您的个人电子邮件地址 - 创建一个新帐户以与您的团队成员共享。

如果您仍想加密，请将加密信息放在单独的属性或 xml 文件中，编写代码对其进行加密和解密，并以编程方式配置 log4j 的该部分。

（并且，正如 gdt 下面所说，请记住，如果应用程序可以解密密码，其他人也可以。没有 100% 安全的解决方案。保护文件访问权限通常比加密更有效。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T19:23:37.237

1.  创建一个可以共享的服务电子邮件帐户（非个人）。

2.  要隐藏密码，请在属性文件中指定它，但在第一次运行后，读取它，加密并写回属性文件。

# ios - iOS：方法不等待它调用的其他方法完成

> ID：15910666
> 
> 赞同：-1
> 
> 时间：2013-04-09T19:18:57.167
> 
> 标签：ios, objective-c, database

我在我的一个 iPhone 应用程序中有这个模型：

```
//
//  CatapultAccount.m
//  Catapult
//
//  Created by Aziz Light on 4/9/13.
//  Copyright (c) 2013 Catapult Technology Ltd. All rights reserved.
//

#import "CatapultAccount.h"

@interface CatapultAccount ()

- (BOOL)createAccountsTable;

- (BOOL)accountWithNameIsAlreadyAdded:(NSString *)accountName;

- (NSDictionary *)getAccountLogosForClient:(NSDictionary *)client;

- (NSString *)getAccountLogoFromURL:(NSURL *)url;

- (NSString *)saveImage:(UIImage *)image
           withFileName:(NSString *)imageName
                 ofType:(NSString *)extension
            inDirectory:(NSString *)directoryPath;

@end

@implementation CatapultAccount

- (BOOL)createAccountWithAccountID:(NSString *)accountID
{
    __block BOOL operationSuccessfull;

    NXOAuth2Account *account = [[NXOAuth2AccountStore sharedStore] accountWithIdentifier:accountID];

    if (account == nil) {
        operationSuccessfull = NO;
    } else {
        if ([self openDatabaseConnection]) {
            if ([self createAccountsTable]) {

                [NXOAuth2Request performMethod:@"GET"
                                    onResource:[NSURL URLWithString:[NSString stringWithFormat:@"%@/users/me", kCatapultHost]]
                               usingParameters:nil
                                   withAccount:account
                           sendProgressHandler:nil
                               responseHandler:^(NSURLResponse *response, NSData *responseData, NSError *error) {
                                   if (error != nil) {
                                       operationSuccessfull = NO;
#if DEBUG
                                       NSLog(@"ERROR: %@", error);
#endif
                                       _lastError = error;
                                   } else {
                                       NSError *jsonError;

                                       NSDictionary *serializedResponse = [NSJSONSerialization JSONObjectWithData:responseData
                                                                                                          options:kNilOptions
                                                                                                            error:&jsonError];

                                       if (jsonError != nil) {
                                           operationSuccessfull = NO;
#if DEBUG
                                           NSLog(@"ERROR: %@", jsonError);
#endif
                                           _lastError = jsonError;
                                       } else {
                                           NSDictionary *user   = [serializedResponse objectForKey:@"user"];
                                           NSDictionary *client = [serializedResponse objectForKey:@"client"];

                                           NSString *forename    = [user objectForKey:@"forename"];
                                           NSString *surname     = [user objectForKey:@"surname"];
                                           NSString *accountName = [client objectForKey:@"account_name"];
                                           NSString *clientName  = [client objectForKey:@"client_name"];

                                           if ([self accountWithNameIsAlreadyAdded:accountName]) {
                                               operationSuccessfull = NO;

                                               _lastError = [NSError errorWithDomain:kCatapultAccountErrorDomain
                                                                                code:kCatapultDuplicateAccountErrorCode
                                                                            userInfo:@{@"message": @"You have already added this account"}];

#if DEBUG
                                               NSLog(@"ERROR: %@", _lastError);
#endif
                                           } else {
                                               NSDictionary *logos = [self getAccountLogosForClient:client];

                                               operationSuccessfull = [self.db executeUpdate:@"insert into accounts(account_id, forename, surname, account_name, client_name, smallest_logo, thumb_logo) values(?,?,?,?,?,?,?)",
                                                                       accountID, forename, surname, accountName, clientName, logos[@"smallest_logo"], logos[@"thumb_logo"]];
                                           }
                                       }
                                   }
                               }];

            } else {
                operationSuccessfull = NO;

                _lastError = [NSError errorWithDomain:kCatapultDatabaseErrorDomain
                                                 code:kCatapultUnableToCreateTableErrorCode
                                             userInfo:@{@"message": @"Unable to create the accounts table"}];

#if DEBUG
                NSLog(@"ERROR: %@", _lastError);
#endif
            }

            [self closeDatabaseConnection];
        } else {
            operationSuccessfull = NO;

            _lastError = [NSError errorWithDomain:kCatapultDatabaseErrorDomain
                                             code:kCatapultUnableToOpenDatabaseConnectionErrorCode
                                         userInfo:@{@"message": @"Unable to open database connection"}];

#if DEBUG
            NSLog(@"ERROR: %@", _lastError);
#endif
        }
    }

    return operationSuccessfull;
}

- (BOOL)createAccountsTable
{
    // Accounts table schema
    // id integer primary key autoincrement
    // account_id varchar(36) not null - unique
    // forename varchar(255) not null
    // surname varchar(255) not null
    // account_name varchar(255) not null - unique
    // client_name varchar(255) not null
    // smallest_account_logo text
    // thumb_account_logo text

    BOOL tableCreationWasSuccessfull = [self.db executeUpdate:@"create table if not exists accounts(id integer primary key autoincrement, account_id varchar(36) not null, forename varchar(255) not null, surname varchar(255) not null, account_name varchar(255) not null, client_name varchar(255) not null, smallest_logo text, thumb_logo text, unique(account_id, account_name) on conflict abort)"];

    if (tableCreationWasSuccessfull) {
        _lastError = nil;
    } else {
        _lastError = [self.db lastError];
#if DEBUG
        NSLog(@"Failed to create users table: %@", _lastError);
#endif
    }

    return tableCreationWasSuccessfull;
}

- (BOOL)accountWithNameIsAlreadyAdded:(NSString *)accountName
{
    FMResultSet *account = [self.db executeQuery:@"select count(*) from accounts"];
    return [account next];
}

- (NSDictionary *)getAccountLogosForClient:(NSDictionary *)client
{
    NSString *smallestLogoURLString = [[[client objectForKey:@"logo"] objectForKey:@"smallest"] objectForKey:@"url"];
    NSString *smallestLogoPath = [self getAccountLogoFromURL:[NSURL URLWithString:smallestLogoURLString]];

    NSString *thumbLogoURLString = [[[client objectForKey:@"logo"] objectForKey:@"thumb"] objectForKey:@"url"];
    NSString *thumbLogoPath = [self getAccountLogoFromURL:[NSURL URLWithString:thumbLogoURLString]];

    return @{@"smallest_logo": smallestLogoPath, @"thumb_logo": thumbLogoPath};
}

- (NSString *)getAccountLogoFromURL:(NSURL *)url
{
    NSString *urlWithoutGETParams = [[[url absoluteString] componentsSeparatedByString:@"?"] objectAtIndex:0];
    NSString *lastSegmentOfURL = [[urlWithoutGETParams componentsSeparatedByString:@"/"] lastObject];
    NSString *logoName = [[lastSegmentOfURL componentsSeparatedByString:@"."] objectAtIndex:0];
    NSString *logoExtension =  [[lastSegmentOfURL componentsSeparatedByString:@"."] lastObject];

    NSString * documentsDirectoryPath = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0];

    NSString *logoPath = [documentsDirectoryPath stringByAppendingPathComponent:[NSString stringWithFormat:@"%@.%@", logoName, logoExtension]];

    BOOL logoExists = [[NSFileManager defaultManager] fileExistsAtPath:logoPath];

    if (logoExists) {
        return logoPath;
    } else {
        NSData *data = [NSData dataWithContentsOfURL:url];

        UIImage *logo = [UIImage imageWithData:data];

        logoPath = [self saveImage:logo withFileName:logoName ofType:logoExtension inDirectory:documentsDirectoryPath];

        return (logoPath == nil) ? nil : logoPath;
    }
}

- (NSString *)saveImage:(UIImage *)image
           withFileName:(NSString *)imageName
                 ofType:(NSString *)extension
            inDirectory:(NSString *)directoryPath
{
    NSData *imageRepresentation;

    if ([[extension lowercaseString] isEqualToString:@"png"] || [[extension lowercaseString] isEqualToString:@"gif"]) {
        imageRepresentation = UIImagePNGRepresentation(image);
    } else if ([[extension lowercaseString] isEqualToString:@"jpg"] || [[extension lowercaseString] isEqualToString:@"jpeg"]) {
        imageRepresentation = UIImageJPEGRepresentation(image, 1.0);
    } else {
#if DEBUG
        NSLog(@"Image Save Failed\nExtension: (%@) is not recognized, use (PNG/JPG/GIF)", extension);
#endif
        return nil;
    }

    NSString *imagePath = [directoryPath stringByAppendingPathComponent:[NSString stringWithFormat:@"%@.%@", imageName, extension]];

    NSError *error;
    BOOL imageDidSave = [imageRepresentation writeToFile:imagePath
                                                 options:NSAtomicWrite
                                                   error:&error];

    if (error != nil) {
#if DEBUG
        NSLog(@"Error saving the file: %@", error);
#endif
    }

    return (imageDidSave) ? imagePath : nil;
}

@end 
```

我的一个视图控制器中的这个方法：

```
- (void)createAccount:(NSNotification *)notification
{
    NXOAuth2Account *account = [notification.userInfo objectForKey:@"NXOAuth2AccountStoreNewAccountUserInfoKey"];

    if ([_accountModel createAccountWithAccountID:account.identifier]) {
        // Do something
        NSLog(@"Yay");
    } else {
        // Delete the newly created account
        [[NXOAuth2AccountStore sharedStore] removeAccount:account];

        UIAlertView *errorMessage = [[UIAlertView alloc] initWithTitle:@"Account Error"
                                                               message:@"Unable to add new account"
                                                              delegate:nil
                                                     cancelButtonTitle:@"OK"
                                                     otherButtonTitles:nil];

        [errorMessage show];
    }

    [self dismissViewControllerAnimated:YES completion:nil];
} 
```

问题是，根据我的（天真的）观察，在模型中使用数据库的大多数方法执行速度太慢，并且该`createAccountWithAccountID:`方法不会等待它调用的方法完成。结果是记录没有保存到数据库中，但由于某种原因，该`createAccountWithAccountID`方法返回`YES`了……这里的日志说明了我的意思：

```
2013-04-09 20:07:46.261 Catapult[21004:c07] Yay
2013-04-09 20:07:46.276 Catapult[21004:c07] The FMDatabase <FMDatabase: 0x7288300> is not open.
2013-04-09 20:07:46.606 Catapult[21004:c07] The FMDatabase <FMDatabase: 0x7288300> is not open. 
```

记录没有保存到数据库，因为数据库连接关闭太快...</p>

有人知道我该如何解决我的问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T19:25:03.070

大多数使用完成块的方法都是异步执行的。该方法将立即返回，并在请求实际完成时执行该块。您需要在代码中相应地处理它。发送请求后不要释放任何东西，而是根据响应处理程序块中的结果执行任何操作，然后释放它。

# javascript - 实时计算有问题，计算每个击键

> ID：15910670
> 
> 赞同：0
> 
> 时间：2013-04-09T19:19:05.610
> 
> 标签：javascript, jquery, html

我有一个表格，根据用户类型的输入计算总数。我的问题是 jquery 代码正在计算每个按键，而不是在您停止键入后“抓取”整个数字。代码如下，任何帮助将不胜感激。

```
$(document).ready(function() {
$('input.refreshButton').bind('click', EstimateTotal);
$('input.seatNumber').bind('keypress', EstimateTotal);
$('input.seatNumber').bind('change', EstimateTotal); 
```

});

```
//$('input[type=submit]').live('click', function() {
function EstimateTotal(event) {
    var tierSelected = $(this).attr('data-year');
    var numberSeats = Math.floor($('#numberSeats_' + tierSelected).val());

    $('.alertbox_error_' + tierSelected).hide();
    if (isNaN(numberSeats) || numberSeats == 0) {
        $('.alertbox_error_' + tierSelected).show();
    } else {
        $('.alertbox_error_' + tierSelected).hide();

        var seatHigh = 0;
        var seatLow = 0;
        var seatBase = 0;
        var yearTotal = 0;
        var totalsArray = [];
        var currentYear = 0;

        $('.tier_' + tierSelected).each(function() {
            seatLow = $(this).attr('data-seat_low');
            firstSeatLow = $(this).attr('data-first_seat_low');
            seatHigh = $(this).attr('data-seat_high');
            seatBase = $(this).attr('data-base_cost');
            costPerSeat = $(this).attr('data-cost_per_seat');
            years = $(this).attr('data-year');
            seats = 0;

            if (years != currentYear) {
                if (currentYear > 0) {
                    totalsArray[currentYear] = yearTotal;
                }
                currentYear = years;
                yearTotal = 0;
            }

            if (numberSeats >= seatHigh) {
                seats = Math.floor(seatHigh - seatLow + 1);
            } else if (numberSeats >= seatLow) {
                seats = Math.floor(numberSeats - seatLow + 1);
            }

            if (seats < 0) {
                seats = 0;
            }
            yearTotal += Math.floor(costPerSeat) * Math.floor(seats) * Math.floor(years) + Math.floor(seatBase);
        });

        totalsArray[currentYear] = yearTotal;

        totalsArray.forEach(function(item, key) {
            if (item > 1000000) {
                $('.totalCost_' + tierSelected + '[data-year="' + key + '"]').append('Contact Us');
            } else {
                $('.totalCost_' + tierSelected + '[data-year="' + key + '"]').append('$' + item);
            }
        });
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T21:12:29.080

你需要一个`setTimeout`, 和一种在按键上杀死/重置它的方法。

我个人会做这样的事情：

```
var calc_delay;
$(document).ready(function() {
$('input.refreshButton').bind('click', runEstimateTotal);
$('input.seatNumber').bind('keypress', runEstimateTotal);
$('input.seatNumber').bind('change', runEstimateTotal);
});

function runEstimateTotal(){
    clearTimeout(calc_delay);
    calc_delay = setTimeout(function(){ EstimateTotal(); }, 100);
}

function EstimateTotal() {
    .... 
```

这样做是提示系统在每次按键后计算 100 毫秒 - 除非检测到另一个事件（即调用 runEstimateTotal），在这种情况下延迟倒计时重置。

# php - 向服务器发送数据

> ID：15910671
> 
> 赞同：0
> 
> 时间：2013-04-09T19:19:17.217
> 
> 标签：php, jquery, ajax, zend-framework

我最近在我的网站上执行了一些 ajax 请求，但我还是初学者。

这是一个愚蠢的问题：如何在不等待任何响应的情况下向服务器发送（POST）数据？

在我在互联网上找到的所有示例中，ajax 调用用于重新加载页面的一部分。它工作得很好，但我的想法只是发送一个可以存储在数据库中的数据，例如无需等待任何响应。

我正在使用带有 MVC 模式的 Zend 框架。我试过类似的东西：

```
$.ajax({
    type: "POST",
    url:'/controller/action',
    data: { myDataToPost: aData },

        success:function(response){
        },
        failure:function(){
         alert('Could not save your entry');
        }
}); 
```

如果我在控制器中定义一个动作，它工作正常，但我可以在萤火虫中看到控制器/动作页面上的 404 错误。肯定它不存在，因为我不想要任何回应......

非常感谢您的帮助！塞德里克。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T19:24:49.773

"Here is a stupid question: How to send (POST) a data to the server without waiting any response ?"

```
$.ajax({
     timeout: 1
}); 
```

Set the request `timeout` to 1 millisecond (zero doesn't work), thus giving the `xmlHttpRequest` 1 millisecond to complete (go to server, process request, return response, which is virtually impossible), otherwise mark it as timed out (failed).

# c#-4.0 - 如何使用 HttpClient 从 Web Api 调用 PUT 方法？

> ID：15910677
> 
> 赞同：6
> 
> 时间：2013-04-09T19:19:29.910
> 
> 标签：c#-4.0, rest, asp.net-mvc-4, asp.net-web-api, dotnet-httpclient

我想调用 Api 函数 (1st) 。**从使用HttpClient**的第二个 Api 函数。但我总是收到**404**错误。

**第一个 API 函数**（**端点：** http：//本地主机：xxxxx /api/Test/）

```
public HttpResponseMessage Put(int id, int accountId, byte[] content)
[...] 
```

**第二个API函数**

```
public HttpResponseMessage Put(int id, int aid, byte[] filecontent)
{
    WebRequestHandler handler = new WebRequestHandler()
    {
        AllowAutoRedirect = false,
        UseProxy = false
    };

    using (HttpClient client = new HttpClient(handler))
    {
        client.BaseAddress = new Uri("http://localhost:xxxxx/");

        // Add an Accept header for JSON format.
        client.DefaultRequestHeaders.Accept.Add(new MediaTypeWithQualityHeaderValue("application/json"));

        var param = new object[6];
        param[0] = id;
        param[1] = "/";
        param[2] = "?aid="; 
        param[3] = aid;                           
        param[4] = "&content=";
        param[5] = filecontent;

        using (HttpResponseMessage response = client.PutAsJsonAsync("api/Test/", param).Result)
        {
            return response.EnsureSuccessStatusCode();
        }
    }
} 
```

所以我的问题是。**我可以像以前一样从 HttpClient 将方法参数作为对象数组发布吗？**我不想将**模型**作为方法参数传递。

我的代码有什么问题？

**将代码更改为后无法得到任何响应**

```
return client.PutAsJsonAsync(uri, filecontent)
           .ContinueWith<HttpResponseMessage>
            (
               task => task.Result.EnsureSuccessStatusCode()
            ); 
```

或者

```
return client.PutAsJsonAsync(uri, filecontent)
           .ContinueWith
            (
               task => task.Result.EnsureSuccessStatusCode()
            ); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-09T20:31:56.347

正如您可能发现的那样，不，您不能。当您调用`PostAsJsonAsync`时，代码会将参数转换为 JSON 并在请求正文中发送。您的参数是一个 JSON 数组，类似于下面的数组：

```
[1,"/","?aid",345,"&content=","aGVsbG8gd29ybGQ="] 
```

这不是第一个函数所期望的（至少这是我的想象，因为您没有显示路线信息）。这里有几个问题：

*   默认情况下，类型（引用类型）的参数在请求的*主体*`byte[]`中传递，而不是在 URI 中（除非您使用属性显式标记参数）。*`[FromUri]`*
**   其他参数（同样，基于我对您路线的猜测）需要是 URI 的一部分，而不是正文。*

 *代码看起来像这样：

```
var uri = "api/Test/" + id + "/?aid=" + aid;
using (HttpResponseMessage response = client.PutAsJsonAsync(uri, filecontent).Result)
{
    return response.EnsureSuccessStatusCode();
} 
```

现在，上面的代码还有另一个潜在问题。它正在等待网络响应（这就是当您访问`.Result`由.最好的情况是这个线程将在网络调用期间被阻塞，这也很糟糕。考虑使用异步模式（等待结果，在您的操作中返回 a），如下例所示`Task<HttpResponseMessage>``PostAsJsonAsync``Task<T>`

```
public async Task<HttpResponseMessage> Put(int id, int aid, byte[] filecontent)
{
    // ...

    var uri = "api/Test/" + id + "/?aid=" + aid;
    HttpResponseMessage response = await client.PutAsJsonAsync(uri, filecontent);
    return response.EnsureSuccessStatusCode();
} 
```

或者没有 async / await 关键字：

```
public Task<HttpResponseMessage> Put(int id, int aid, byte[] filecontent)
{
    // ...

    var uri = "api/Test/" + id + "/?aid=" + aid;
    return client.PutAsJsonAsync(uri, filecontent).ContinueWith<HttpResponseMessage>(
        task => task.Result.EnsureSuccessStatusCode());
} 
```*

# javascript - jquery按钮点击事件

> ID：15910681
> 
> 赞同：1
> 
> 时间：2013-04-09T19:19:46.660
> 
> 标签：javascript, jquery, ruby-on-rails, twitter-bootstrap

我对引导按钮组上的单击事件有疑问。我正在尝试检索处于活动状态的按钮的 ID。包括我当前单击的那个（如果未选中）。问题是当我选择它时，我单击的当前按钮不会被添加为选定按钮。好像还没有应用活动的类。

这是我的按钮组：

```
 <div class="btn-group" id = "rbtns" data-toggle="buttons-checkbox" >
        <button class="btn rbtn" id = "0">0</button>
        <button class="btn rbtn" id = "1">1</button>
        <button class="btn rbtn" id = "2">2</button>
        <button class="btn rbtn" id = "3">3</button>
        <button class="btn rbtn" id = "4">4</button>
  </div> 
```

而我的行动：

```
 $( document ).ready(function() {

       $(".rbtn").click(function () {

        var data = [];

        $('#rbtns .btn.active').each(function() {
              data.push($(this).attr('id'));

        });

        alert ("Data length: " + data.length);
       }); 
```

我怎样才能确保我收到所有 ids 与类活动的按钮？

我使用的按钮是[引导复选框样式按钮](http://twitter.github.io/bootstrap/javascript.html#buttons)。一旦你点击它们，它们就会被选中。当您单击它们时，它们会被取消选中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T19:25:39.947

在检索所有活动按钮之前，您可以在 click 函数中添加该类。

```
$(this).addClass('active'); 
```

检索前使用按钮方法设置复选框

```
$(this).button('toggle'); 
```

[这](http://jsfiddle.net/hSktp/1/)是一个工作示例，但是我不太喜欢两次调用按钮（'toggle'）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T19:25:38.027

小提琴：http: [//jsfiddle.net/xdyRt/](http://jsfiddle.net/xdyRt/)

```
$(".rbtn").click(function () {
    $(this).toggleClass("active");     
    var data = [];

    $(".btn").each(function() {
        $(this).hasClass("active") ? data.push($(this).attr("id")) : null;
    });

    for (var i = 0; i < data.length; i++) {
        alert(data[i]);
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T19:25:48.090

尝试将单击的按钮显式设置为活动状态

```
$(".rbtn").click(function () {
  if ($(this).hasClass('active') == false){
    $(this).addClass('active');
  } 
```

# javascript - 如何使用 JavaScript 获取 iOS 设备版本？

> ID：15910682
> 
> 赞同：1
> 
> 时间：2013-04-09T19:19:47.157
> 
> 标签：javascript, iphone, device

有没有办法使用 JavaScript 或其他基于浏览器的语言获取 iOS*设备*版本（相对于*操作系统版本）？*例如; iPhone5、iPhone 4S、iPad 3 等

我无法在`navigator.userAgent`（或任何方法`navigator`）中找到此信息，因为它仅报告操作系统版本（而不是使用的设备）。例如，运行 6.1.3 的 iPhone5 具有以下用户代理：

`"Mozilla/5.0 (iPhone; CPU iPhone OS 6_1_3 like Mac OS X) AppleWebKit/536.26 (KHTML, like Gecko) Version/6.0 Mobile/10B329 Safari/8536.25"`

以及运行 6.1.3 的 iPhone4：

`"Mozilla/5.0 (iPhone; CPU iPhone OS 6_1_3 like Mac OS X) AppleWebKit/536.26 (KHTML, like Gecko) Version/6.0 Mobile/10B329 Safari/8536.25"`

我能找到的最好的方法是使用`screen.width`and `screen.height`，因为这至少可以让我区分 iPhone5、iPhone4 和前几代产品。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T19:55:04.903

你不能。您可以找到`iPhone`或`iPad`，以及设备运行的 iOS 版本，但找不到型号名称，例如`iPhone 4`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-16T04:00:19.060

这个对我有用

`var iOS = parseFloat(('' + (/CPU.*OS ([0-9_]{1,5})|(CPU like).*AppleWebKit.*Mobile/i.exec(navigator.userAgent) || [0,''])[1]) .replace('undefined', '3_2').replace('_', '.').replace('_', '')) || false;`

它在 iPhone 上返回 10.3

# php - 通过 ajax 在 facebook 应用程序中加载页面

> ID：15910685
> 
> 赞同：0
> 
> 时间：2013-04-09T19:19:49.407
> 
> 标签：php, ajax, facebook

我创建了一个 facebook 应用程序，我将其用作页面选项卡。我正在使用 PHP SDK 和 Javascript SDK，并且已经过身份验证并将其设置为完美显示对话框，然后在选项卡 iframe 中显示我的页面。

我现在想异步加载我网站的其他页面，但是我无法访问异步加载页面上的用户数据（姓名等）。如何将身份验证和变量传递给 ajax 加载的页面？

**（编辑）解决方案：**

PHP SDK 会自动创建一个会话，以便在使用 ajax（或任何地方）加载的页面之间使用。您只需在每个加载有 ajax 的页面上调用您的身份验证例程即可访问数据（最好使用 php 包含）。

我使用简单的 jquery 加载将页面加载到 div 中：

```
$('div#page').load('your-page.php'); 
```

这是我在每个 php 页面上运行的例程：

```
<?php
    //facebook application configuration
    $fbconfig['appid' ] = "YOUR APP ID";
    $fbconfig['secret'] = "YOUR APP SECRET";

    $fbconfig['baseUrl']    =   "SOURCE FILES BASE URL";
    $fbconfig['appBaseUrl'] =   "APP BASE URL";

    /* 
     * If user first time authenticated the application facebook
     * redirects user to baseUrl, so I checked if any code passed
     * then redirect him to the application url 
     */
    if (isset($_GET['code'])){
        header("Location: " . $fbconfig['appBaseUrl']);
        exit;
    }

    //
    if (isset($_GET['request_ids'])){
        //user comes from invitation
        //track them if you need
    }

    $user =   null; //facebook user uid
    try{
        include_once "facebook.php";
    }
    catch(Exception $o){
        echo '<pre>';
        print_r($o);
        echo '</pre>';
    }
    // Create our Application instance.
    $facebook = new Facebook(array(
      'appId'  => $fbconfig['appid'],
      'secret' => $fbconfig['secret'],
      'cookie' => true,
    ));

    //Facebook Authentication part
    $user = $facebook->getUser();
    // We may or may not have this data based 
    // on whether the user is logged in.
    // If we have a $user id here, it means we know 
    // the user is logged into
    // Facebook, but we don’t know if the access token is valid. An access
    // token is invalid if the user logged out of Facebook.

    $loginUrl = $facebook->getLoginUrl(
            array(
                'scope' => 'email,publish_stream,user_birthday,user_location,user_work_history,user_about_me,user_hometown'
            )
    );

    if ($user) {
      try {
        // Proceed knowing you have a logged in user who's authenticated.
        $user_profile = $facebook->api('/me');

      } catch (FacebookApiException $e) {
        //you should use error_log($e); instead of printing the info on browser
        d($e);  // d is a debug function defined at the end of this file
        $user = null;
      }
    }

    if (!$user) {
        echo "<script type='text/javascript'>top.location.href = '$loginUrl';</script>";
        exit;
    }

    //get user basic description
    $userInfo = $facebook->api("/$user");

    function d($d){
        echo '<pre>';
        print_r($d);
        echo '</pre>';
    }
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T20:57:37.663

这取决于您如何处理您的请求，但您可以将数据保存在 $_SESSION 变量中，例如 $_SESSION['userData'] = $facebook->api('/me'); 并在每一页上调用它。

# jquery - 复选框列表调用服务器可能有延迟

> ID：15910686
> 
> 赞同：0
> 
> 时间：2013-04-09T19:19:58.700
> 
> 标签：jquery, asp.net-mvc-4, checkbox, knockout.js

我正在使用 jquery & knockout 进行客户端开发。我的应用程序内置在 asp.net mvc4 中。

我的页面上有一个控件，可以生成一组复选框。我的行为是检查复选框或未选中的复选框时，将进行服务器端调用以渲染一些数据。此调用在服务器端进行一些繁重的处理。

我担心用户会出现并“检查”“检查”“检查”复选框列表快速进行多个服务器端调用。

我正在寻找建议以防止在这种情况下发生对服务器的多次调用？在用户选中复选框后，我考虑了延迟，让他们有时间等待检查其他人。有没有更优雅的方法来做到这一点？

# iphone - Interface Builder 文件中的未知类

> ID：15910688
> 
> 赞同：4
> 
> 时间：2013-04-09T19:19:59.407
> 
> 标签：iphone, xcode

为什么我在运行 iPhone 应用程序时仍然收到此错误？该文件是我一直在努力删除和替换的 ViewController，但它不会死。据我所知，我的项目中没有对这个文件的任何引用（字符串或其他）。

*   我已经删除了相关文件（我正在尝试摆脱它。）
*   我已经清理了项目并重建了。
*   我的模拟器中有“重置内容和设置”。
*   我已经完成了一个 grep (grep -i -r "TheClassName" *) 并且除了我的 UserInterfaceState.xcuserstate 文件之外没有任何匹配项。
*   我已经使用 XCode 的 Find/Replace 选项卡搜索了代码。
*   我已经仔细检查了我的构建阶段，并且很确定它不在那里（它是一个大项目）。

还有其他想法吗？我花了太多时间试图弄清楚这个简单的事情。我肯定错过了什么。

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-09T21:39:29.097

检查您的 nibs 或故事板，并确保您的所有视图都未设置为类！

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-10T13:54:24.150

经过近 2 天的时间在多台机器上尝试后，我终于解决了这个问题！我不会受挫！

我将问题追溯到对 UINavigationController 上的 setViewControllers 的调用，该调用在应用程序初始化时被调用。我总是被传递 3 个对象（导航控制器中有 3 个窗格）。即使我删除了第三个对象，如前所述，总是会传入三个对象。前两个的类类型是正确的，但第三个只是一个 UIViewController。奇怪的是，这个视图控制器有一个 nibName，它对应于我之前删除的目标文件和 Xib 文件。当然，当在这个无聊的 UIViewController 上调用视图时，它会崩溃，因为相应的 nib 显然已被删除。请记住，使用 grep 在我的目录中找不到此对象或 Xib 的文本名称，

所以，我认为应用程序可能没有被正确清理。我仔细检查了这个。我什至验证了我的工作区设置是正确的（文件->项目设置->高级）。该应用程序确实每次都重新编译。

其次，我开始想，也许这个对象是通过其他方式设置的。向后工作，我添加了一些断点，并发现在父 UINavigationController 上调用了 initWithCoder——这最终正在调用对象上的 setViewControllers 并分配三个视图控制器（其中一个是有问题的）。我可以很容易地从调用堆栈中看到正在加载的 Nib 文件正在反序列化一些令人反感的东西。

所以，我开始深入研究我的 Xib 文件。当然，对象名称不在文件中（正如预期的那样，因为 grep 没有找到任何东西）。我删除并重新创建了包含我的根 UINavigationController 的 Xib 部分。这最终改变了 Xib 文件中的 Object ID 和 ref。其次，我创建了一个新的 Xib 和 UIViewController，与我之前删除的名称相同，希望 Xcode 如果我创建然后重新删除它们会很高兴。然后我编译，重新删除它们，再次由 Xib 文件更新，用 grep 重新验证是的，确实，这个名字不存在任何东西。

它奏效了。在这个问题上花了几天时间之后，我相当确定界面生成器中存在一个错误，但我是否想重新审视这个问题来提交错误报告？绝对不...

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-01-23T12:51:15.630

就我而言，我通过名称解决了一个问题，`Custom class name of View`而不是`Custom class of ViewController`. 我错误地添加了这样的视图，如下所示。

![在此处输入图像描述](https://i.stack.imgur.com/vbrgN.png)

它应该是这样的 ViewController 。

![在此处输入图像描述](https://i.stack.imgur.com/85Ixc.png)

这是我的情况，因为您可能与另一个组件有关。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-06-15T02:20:03.803

当视图类在框架中时会发生这种情况。选择框架的模块。CocoaPod 示例：HSegmentControl。

![图像中的示例是 Cocoapod HSegmentControl](https://i.stack.imgur.com/3CSoj.png)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-10-02T21:15:02.680

确保在添加、重命名或移动文件时，尤其是在文件夹中，添加它们时：

A. 创建组，而不是他们通常不会读入的引用。

B. 选中要添加源的适当“产品或目标”框。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-09-02T15:45:09.037

另一件事要尝试：

我必须在“自定义类”的“模块”控件下切换“从目标继承”。

# amazon-web-services - AWS ec2-authorize 安全组错误“无法找到组”

> ID：15910691
> 
> 赞同：3
> 
> 时间：2013-04-09T19:20:15.023
> 
> 标签：amazon-web-services, amazon-ec2, command-line-interface, ec2-api-tools

我试过以下命令

```
 ec2-authorize default -P icmp -t -1:-1 -o 'Monitoring Servers' 
```

我已经使用 ec2-describe-security-groups 验证了它是一个组

```
 "GroupName": "Monitoring Servers",
   "UserId": "WITHHELD",
   "GroupId": "WITHHELD" 
```

我尝试了此命令的以下排列：

```
 ec2-authorize default -P icmp -t -1:-1 --region us-east-1 -o "Monitoring Servers"
    ec2-authorize default -P icmp -t -1:-1 --region us-east-1 -o 'Monitoring Servers' -u WITHHELD 
```

我仍然得到同样的错误：

```
 Client.InvalidGroup.NotFound: Unable to find group 'Monitoring Servers' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-06-02T09:28:29.320

正如 talonx 提到的，如果存在区域差异，通常会发生这种情况。

首先，在 cmd 中添加 --debug 以获取更多信息

要修复命令，请添加 --region 参数

所以你的最终命令可能看起来像：

```
ec2-authorize default -P icmp -t -1:-1 -o 'Monitoring Servers' --region eu-west-1 --debug 
```

# ruby-on-rails - 从记录数组链接到当前帖子

> ID：15910692
> 
> 赞同：0
> 
> 时间：2013-04-09T19:20:15.487
> 
> 标签：ruby-on-rails, arrays, ruby-on-rails-3, activerecord

只是想了解以下内容，可能是我知道的基本内容。我正在使用 .each 遍历一组记录，并希望查看我通过同一页面上的 ajax 请求单击的帖子

```
 <h2>Recent News</h2>
   <ul>
    <% @tynewyddpost.reverse.each do |t| %>
     <li>
       <% single = t.photos.first %>
        <a class="photo" href="#"><%= image_tag(single.avatar.url(:thumbnail_news_images)) %></a>
         <p><%= link_to t.title, tynewyddnews_path(:type => 'tynewyddnews'), :remote => true %></p>
         <p class="date"><%= date_output(t.published_on) %></p>
      </li> 
     <% end %>
    </ul> 
```

因此，当我单击标题时，无论我单击哪条记录，它都会呈现相同的帖子。

我渲染的部分

```
 <div class="post-item">
     <% @tynewyddpost.reverse.each do |t| %>
      <h2><%= t.title %></h2>
       <div id="work-samples"> 
        <% for photo in t.photos %>
         <%= image_tag(photo.avatar.url(:news_images), :class => 'work-sample') %>
        <% end %>
      </div>  
  <p class="post-description"><%= t.comments.html_safe %></p>
   <div class="post-item-panel">
      <ul>
       <li class="date">
        <p><%= date_output(t.published_on) %></p>
       </li>
      </ul>
  </div>
</div>
  <% end %> 
```

控制器

```
 def tynewyddnews
@title = 'Ty Newydd News'
tynewyddpost = Post.tynewydd_posts.reverse
tynewyddpost.pop
@tynewyddpost = tynewyddpost
@tynewyddpostlatest = Post.tynewydd_posts.first 
```

结尾

范围

```
scope :tynewydd_posts, :include => :department, :conditions => {"departments.name" => "Ty Newydd"}, :order => "posts.published_on DESC" 
```

我的问题是如何获取我点击的特定帖子。我做不到

```
<%= @tynewyydpost.title %> 
```

当我得到数组的未定义方法标题时。我知道这里有一点理论，但是在这种情况下如何从数组中获取单个记录

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T19:38:37.410

您需要传递您点击的帖子的 id：

```
<p><%= link_to t.title, tynewyddnews_path(:type => 'tynewyddnews', :post_id => t.id), :remote => true %></p> 
```

所以在你的控制器中你可以做

```
@theposticlickedon = Post.find(params[:post_id]) 
```

或者

```
@theposticlickedon = Post.tynewydd_posts.find(params[:post_id]) 
```

但是，您可能还想定义不同的路径来显示单个帖子，而不是链接中的 tynewyddnews_path。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T19:39:13.213

您需要在此帖子的每个链接 ID 中指定。

例如：

```
<%= link_to t.title, tynewyddnews_path(:type => 'tynewyddnews'), :post_id=>t.id, :remote => true %> 
```

而不是通过 id 找到它来指定您正在调用的控制器操作

```
@tynewyddnews=Post.find(params[:post_id]) 
```

比你的部分实例@tynewyddnews 将被点击发布

# jquery-ui-accordion - jQuery可排序不起作用

> ID：15910694
> 
> 赞同：0
> 
> 时间：2013-04-09T19:20:19.443
> 
> 标签：jquery-ui-accordion, jquery-ui-sortable

我有一个带有可选列表的 jquery 手风琴。当用户单击一个项目时，它会出现在他们的选定项目列表中，该列表是可排序的。有许多列作为默认列出现在它们的列表中，并且每个选定的项目在手风琴中显示为绿色。我的问题是可排序列表中包含两个单词的行项目不可排序，但包含一个单词的项目是不可排序的。我不知道为什么。有什么想法吗？

这是我的小提琴：http: [//jsfiddle.net/kmbonin82/NkgC2/9/](http://jsfiddle.net/kmbonin82/NkgC2/9/)

HTML：

```
<h3>List 1</h3>
<ul class="list">
     <li id="Country">Country</li>
    <li id="Region">Region</li>
  <li id="Location_Name">Location Name</li>
    <li id="Location_Start">Location Start</li>
</ul>
<h3>List 2</h3>
<ul class="list">
     <li id="Contract_Start">Contract Start</li>
    <li id="Contract_Status">Contract Status</li>
    <li id="Contract">Contract</li>
</ul>

<p id="feedback">
<span>You've selected items:</span>    
    <ul id="select-result">
        <li id="Region">Region</li>
        <li id="Location Name">Location Name</li>
        <li id="Country">Country</li>
        <li id="Contract Status">Contract Status</li>
    </ul>    
</p> 
```

JS：

```
 $(function () {
       $(".list").selectable({
           stop: function () {
               var result = $("#select-result");

               $(".ui-selected", this).each(function () {
                   $(this).css('background-color', '#669966');
                   $(this).css('color', '#FFFFFF');
                   result.append('<li id="' + $(this).text()  + '">' + $(this).text() + '</li>');
                   sortColumns();
               });
           }
       });
       sortColumns();
   });

   $(function () {
       $("#accordion").accordion({
           collapsible: true,
           autoHeight: false
       });
   });

   $(function () {
       $("#select-result li").each(function (index) {
           var thisID = $(this).attr('id');
           thisID = thisID.replace(/ /g, '_');
           document.getElementById(thisID).style.background = '#669966';
           document.getElementById(thisID).style.color = '#FFFFFF';
           sortColumns();
       });
   });

   function sortColumns() {
       $(function () {
           $("#select-result")
            .sortable({
                handle: ".handle",
                over: function () {
                    removeIntent = false;
                },
                out: function () {
                    removeIntent = true;
                },

                beforeStop: function (event, ui) {
                    if (removeIntent == true) {
                        var thisID = ui.item.text();
                        thisID = thisID.replace(/ /g, '_');
                        ui.item.remove();
                        document.getElementById(thisID).style.background = '#FFFFFF';
                        document.getElementById(thisID).style.color = '#000000';
                    }
                }
            })
            .find("li")
            .addClass("ui-corner-all")
            .prepend("<div class='handle'><span class='ui-icon ui-icon-carat-2-n-s'></span></div>");
       });
   } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T19:48:18.633

“位置名称”和“合同状态”不可排序，因为它们的 id 值错误。他们之间有空间。

```
 <li id="Location Name">Location Name</li>
        <li id="Contract Status">Contract Status</li> 
```

更新演示：http: [//jsfiddle.net/NkgC2/10/](http://jsfiddle.net/NkgC2/10/)

奖金：

a）您预先挂起 div 的方式不是正确的方式。如果您看到您的 html 代码，则在您选择每个项目后，它会为每个列表项添加一个额外的 div

b) 而不是调用 sortable() 函数几次（它在选择任何项目之前调用 3 次。）使用 jquery 'on' 方法将 api 绑定到不存在的元素。

# python - 使用 Python 在 Blender 2.6 中设置活动相机后如何重新渲染场景

> ID：15910696
> 
> 赞同：1
> 
> 时间：2013-04-09T19:20:21.430
> 
> 标签：python, camera, blender, scene

我的 Blender 游戏中有以下代码：

```
if bge.logic.KX_INPUT_ACTIVE == keyboard.events[bge.events.QKEY]:   
    bpy.context.scene.camera = bpy.data.objects["Camera.Shoulder"] 
```

我的相机已重置为“Camera.Shoulder”，但除非我退出并重新进入场景，否则视图不会改变。有没有办法在游戏期间使用新的活动相机重新渲染场景而不使用逻辑砖（我想要 Python 中的所有内容。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T22:16:57.617

正确的代码应该是：

```
if bge.logic.KX_INPUT_ACTIVE == keyboard.events[bge.events.QKEY]:   
    bge.logic.getCurrentScene().active_camera  = bge.logic.getCurrentScene().objects["Camera.Player"] 
```

bge 用于游戏引擎逻辑，不知道为什么 bpy 不起作用。

# asp.net-mvc-4 - 在一个请求中使用相同的模型两次

> ID：15910706
> 
> 赞同：0
> 
> 时间：2013-04-09T19:20:42.943
> 
> 标签：asp.net-mvc-4

你可以在一个使用 asp.net MVC4 的请求中两次使用相同的模型作为参数吗？

我有

```
public ActionResult Search(SearchModel model) 
{
    SearchResults resultsModel = new SearchResults();

    resultsModel.Results = new List<string>();
    resultsModel.Results.Add("posted value : " + model.Phrase);

    return View("SearchResults", resultsModel);
}

[ChildActionOnly]
public ActionResult SearchPartial(SearchModel model) 
{
    model.Phrase = "changed in search partial";

    return PartialView("_SearchPartial", model);
} 
```

但是，无论我在上面的第一个方法中发布什么，当任何页面调用`@Html.Action("SearchPartial")`第二种方法时，我都会做一个，模型永远不会最终被发送到带有字符串“在搜索部分中更改”的客户端。`_Layout,cshtml``@HtmlAction`

如果在同一个请求中调用两个动作，我就不能两次使用同一个模型。这真的很烦人......

我什至将第一种方法更改为仅使用 1 个参数，但它总是返回发布的内容，而不是我将其设置到服务器端的内容！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T21:15:31.103

当您使用`@Html.Action("SearchPartial")`它进行调用时，它会将其视为对名为 SearchPartial 的操作的全新请求，它不会隐式地继承父操作中的任何模型或 TempData。你必须自己做。

> **编辑：**根据 Chris 在下面的评论中提到的内容，ChildAction 将尝试使用传递给父 Action 的参数绑定它的输入模型。

```
@Html.Action("SearchPartial", new {model = Model}) 
```

但是，当我过去这样做时，我会传入原始数据而不是完整的对象，因此您可能不得不这样做。

```
@Html.Action("SearchPartial", new {phrase = Model.Phrase, page = Model.Page, perPage = Model.PerPage})` 
```

注意：我只是在猜测您的`SearchModel`ViewModel 上的属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T21:37:44.093

这应该可以正常工作。我刚刚测试了以下内容：

**控制器：**

```
public ActionResult Search(SearchModel model) 
{
    SearchResults resultsModel = new SearchResults();

    resultsModel.Results = new List<string>();
    resultsModel.Results.Add("posted value : " + model.Phrase);

    return View("SearchResults", resultsModel);
}

[ChildActionOnly]
public ActionResult SearchPartial(SearchModel model) 
{
    model.Phrase = "changed in search partial";

    return PartialView("_SearchPartial", model);
} 
```

**楷模：**

```
public class SearchModel
{
    public string Phrase { get; set; }
}

public class SearchResults
{
    public List<string> Results { get; set; }
} 
```

**搜索结果.cshtml：**

```
@model SearchResults

@foreach (var item in Model.Results) {
    <div>@item</div>
} 
```

**_SearchPartial.cshtml：**

```
@model SearchModel
<strong>Search Phrase:</strong> @Model.Phrase 
```

**_Layout.cshtml：**

```
<!DOCTYPE html>
<html lang="en">
    <body>
        <div>
            <h2>Partial Contents</h2>
            @Html.Action("SearchPartial", "Home")
        </div>
        <div>
            <h2>Body Contents</h2>
            @RenderBody()
        </div>
    </body>
</html> 
```

**结果**（查询字符串：“?phrase=Test”）：

```
<!DOCTYPE html>
<html lang="en">
    <body>
        <div>
            <h2>Partial Contents</h2>
            <strong>Search Phrase:</strong> changed in search partial
        </div>
        <div>
            <h2>Body Contents</h2>
            <div>posted value : Test</div>
        </div>
    </body>
</html> 
```

# c# - GLSL textureCube 失败

> ID：15910707
> 
> 赞同：1
> 
> 时间：2013-04-09T19:20:50.227
> 
> 标签：c#, opengl, shader, textures, fragment-shader

我有一个相当简单的片段着色器，它不起作用。它似乎与 textureCube 方法有关。

这是片段着色器：

```
in vec3 ReflectDir;
in vec3 RefractDir;

uniform samplerCube CubeMapTex;
uniform bool DrawSkyBox;

uniform float MaterialReflectionFactor;

void main()
{
    // Access the cube map texture
    vec4 reflectColor = textureCube(CubeMapTex, ReflectDir);
    vec4 refractColor = textureCube(CubeMapTex, RefractDir);

    if( DrawSkyBox )
    {
        gl_FragColor = reflectColor;
        gl_FragColor = vec4(ReflectDir, 1); //This line
    }
    else
        gl_FragColor = vec4(1,0,0,1);
} 
```

ReflectDir 和 RefractDir 来自顶点着色器，但这似乎是有序的。

如果我在 if 语句中注释第二行，整个屏幕都是黑色的（包括茶壶），否则它看起来像这样（ReflectDir 似乎没问题）：

[http://i.imgur.com/MkHX6kT.png](http://i.imgur.com/MkHX6kT.png)

立方体贴图也被正确渲染（图像顺序很糟糕）。这是没有着色器程序的场景的样子：

[http://i.imgur.com/6kKzA2x.jpg](http://i.imgur.com/6kKzA2x.jpg)

附加信息：

1.  纹理在活动纹理 TEXTURE0 上加载了 GL_TEXTURE_CUBE_MAP
2.  统一的 CubeMapTex 设置为 0
3.  DrawSkyBox 在绘制天空盒时设置为 true，之后设置为 false
4.  我使用了 SharpGL

# python - arcpy SearchCursor，SQL 语句无效

> ID：15910712
> 
> 赞同：0
> 
> 时间：2013-04-09T19:20:59.693
> 
> 标签：python, sql, cursor, max, arcpy

我正在尝试从 3 列中选择值的最大值（和最小值在单独的代码块中，未显示）。我试图在我用搜索光标看到的一些工作代码之后对我的代码进行建模。

我需要能够访问稍后写入文件的最大值。

问题是我在搜索游标中的 SQL 表达式。我已经尝试了大约 5 种我能想到的变体，但它们都不会运行。我对 SQL 表达式了解不多，但我通常至少可以在 ArcMap GUI 中正确使用它们。在 python 脚本中，它就像在黑暗中找到一条蛇。

这是我的代码：

```
 #input shapefile
inputFC = 'C:whatever.shp'

#variable to define the field names
fields = ['Crude_R1', 'Crude_R2', 'Crude_R3', 'STATE_NAME', 'Age_Adj_R1', 'Age_Adj_R2', 'Age_Adj_R3']

CRmax = 0

cursor = arcpy.da.SearchCursor(inputFC, fields[0:2], 'MAX "Crude_R1" AND "Crude_R2" AND "Crude_R3"')
for row in cursor:
    print row[0:2]
CRmax = row[0:2]
del row
del cursor 
```

错误信息：

```
Traceback (most recent call last):
File "C:\whatever.py", line 64, in <module>
for row in cursor:
RuntimeError: An invalid SQL statement was used. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-23T15:50:38.403

通过多次使用“AND”，例如：

```
'MAX "Crude_R1" AND "Crude_R2" AND "Crude_R3"' 
```

您需要在每个“AND”之后包含“MAX”：

```
'MAX "Crude_R1" AND MAX "Crude_R2" AND MAX "Crude_R3"' 
```

注意：可能需要使用引号进行其他格式设置，但这是它的要点。此外，如果需要，请尝试使用“OR”而不是“AND”。

其次，由于您指定要组合所有三个字段的 MAX，因此您需要首先通过创建一个新字段将这些字段添加在一起，然后将该字段计算为：

```
"!Crude_R1! + !Crude_R2 + !Crude_R2!" 
```

然后你可以简单地做一个SQL语句：

```
'MAX "New_Field"' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T12:09:28.907

我不确定你想用 SQL 完成什么。如果您需要有关该语句的帮助，请添加您的数据模式和您要完成的任务的更详细描述。如果您是 python 和 arcpy 的新手，那么您可能希望使用 GUI 界面让 SQL 正常工作，然后将其复制到 python 脚本中。

# java - JFreeChart 饼图标签挤压

> ID：15910713
> 
> 赞同：0
> 
> 时间：2013-04-09T19:21:00.070
> 
> 标签：java, pdf, itext, jfreechart, pie-chart

![http://i.stack.imgur.com/34WJU.png](https://i.stack.imgur.com/34WJU.png)

从图中可以看出，指向饼图各部分的箭头标签在左侧重叠。有没有办法缩小标签的字体以便更适合？或者让他们出去，这样他们就不会重叠？**强文本**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-24T14:35:29.017

您可以使用以下代码将图表旋转某个角度

```
 JFreeChart chart = ChartFactory.createPieChart3D("World Polulation by Countries ", dataset, true, true, true);
            PiePlot plot = (PiePlot) chart.getPlot();

            plot.setPieIndex(0);

//          plot.setLabelFont(new Font("SansSerif", Font.NORMAL, 12));
            plot.setNoDataMessage("No data available");
            plot.setCircular(false);
            plot.setLabelLinksVisible(true);
//          plot.zoom(200);
//          plot.setStartAngle(180);
//          plot.setLabelBackgroundPaint(paint);
            plot.setLabelLinkMargin(0.01);
            return chart; 
```

# java - Android 中带计时器的 Foreach String[]

> ID：15910714
> 
> 赞同：1
> 
> 时间：2013-04-09T19:21:03.553
> 
> 标签：java, android, loops, android-intent, timer

我在 android 的 foreach/for 循环中实现了一个计时器。有一个`TextField`or `TextView`（我不知道要使用哪个）每 30ms 填充一个字符串数组中的下一个字符串：

```
String[] faces = retrieve_pattern().split("\""); 
```

我需要帮助来实现这一点。

编辑：鲍里斯，你的例子有效，但它打印出所有的字符串，但我只需要显示一个字符串，并在“一段时间”删除它并显示下一个，直到我到达结尾。TextField 中的一种文本动画。

我已经尝试过 TimerTask，但无法让它工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T19:38:54.123

我认为最合适的方法是使用[Handler](http://developer.android.com/reference/android/os/Handler.html)：

```
public class MyActivity extends Activity {
   private String [] mSplits;
   private int mSplitIndex;
   private Handler updater = new Handler() {
    @Override
    public void handleMessage(Message msg) {
      TextView textView = (TextView)MyActivity.this.findViewById(R.id.text_view);
      String text = mSplits[mSplitIndex++];
      textView.setText(text);
      if (mSplitIndex < mSplits.length) {
        sendEmptyMessageDelayed(0, 30);
      }
    }
   };
   @Override
   public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.test_split);
    updater.sendEmptyMessageDelayed(0, 0));
   }
} 
```

我是在用心写，所以如果您遇到任何问题，请回信。

# mysql - 当我尝试访问索引时，我的数据库出现 Rails 错误

> ID：15910715
> 
> 赞同：0
> 
> 时间：2013-04-09T19:21:12.927
> 
> 标签：mysql, ruby-on-rails

我有一个名为 WhiteHouse 的数据库，其中有大约 450 名白宫工作人员，我的主目录（根目录）指向数据库的索引。

以下是以下错误：

```
Mysql2::Error: Table 'WhiteHouse.employees' doesn't exist: SHOW FULL FIELDS FROM `employees` (Ruby on Rails)
app/controllers/employees_controller.rb:5:in `index' 
```

我检查了 rails 的命名约定，并且我在 MVC 架构中的文件被正确命名。但是，当我打开本地服务器并尝试打开主页时，它在我的控制器类的 index 方法中给出了错误。我的 employees_controller.rb 文件如下：

```
class EmployeesController < ApplicationController
  # GET /employees
  # GET /employees.json
  def index
     @employees = Employee.all

    respond_to do |format|
      format.html # index.html.erb
      format.json { render json: @employees }
  end
end 
```

有人可以帮助我吗？

我已经成功迁移它，因为 schema.rb 文件随着迁移而更新。

```
activerecord (3.2.12) lib/active_record/connection_adapters   
    /abstract_mysql_adapter.rb:243:in `query'
activerecord (3.2.12) lib/active_record/connection_adapte/abstract_mysql_adapter.rb:243:in `block in execute'

activerecord (3.2.12) lib/active_record/connection_adapters/abstract_adapter.rb:280:in `block in log'

activesupport (3.2.12) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
activerecord (3.2.12) lib/active_record/connection_adapters/abstract_adapter.rb:275:in `log'
activerecord (3.2.12) lib/active_record/connection_adapters/abstract_mysql_adapter.rb:243:in `execute'
activerecord (3.2.12) lib/active_record/connection_adapters/mysql2_adapter.rb:211:in `execute'
activerecord (3.2.12) lib/active_record/connection_adapters/abstract_mysql_adapter.rb:257:in `execute_and_free'
activerecord (3.2.12) lib/active_record/connection_adapters/abstract_mysql_adapter.rb:424:in `columns'
activerecord (3.2.12) lib/active_record/connection_adapters/schema_cache.rb:12:in `block in initialize'
activerecord (3.2.12) lib/active_record/model_schema.rb:228:in `yield'
activerecord (3.2.12) lib/active_record/model_schema.rb:228:in `default'
activerecord (3.2.12) lib/active_record/model_schema.rb:228:in `columns'
activerecord (3.2.12) lib/active_record/model_schema.rb:237:in `columns_hash'
activerecord (3.2.12) lib/active_record/locking/optimistic.rb:129:in `locking_enabled?'
activerecord (3.2.12) lib/active_record/relation.rb:170:in `exec_queries'
activerecord (3.2.12) lib/active_record/relation.rb:160:in `block in to_a'
activerecord (3.2.12) lib/active_record/explain.rb:33:in `logging_query_plan'
activerecord (3.2.12) lib/active_record/relation.rb:159:in `to_a'
activerecord (3.2.12) lib/active_record/relation/finder_methods.rb:159:in `all'
activerecord (3.2.12) lib/active_record/relation/finder_methods.rb:105:in `find'
activerecord (3.2.12) lib/active_record/querying.rb:5:in `find'
app/controllers/employees_controller.rb:5:in `index'
actionpack (3.2.12) lib/action_controller/metal/implicit_render.rb:4:in `send_action'
actionpack (3.2.12) lib/abstract_controller/base.rb:167:in `process_action'
actionpack (3.2.12) lib/action_controller/metal/rendering.rb:10:in `process_action'
actionpack (3.2.12) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
activesupport (3.2.12) lib/active_support/callbacks.rb:414:in `_run__351996495__process_action__315798478__callbacks'
activesupport (3.2.12) lib/active_support/callbacks.rb:405:in `__run_callback'
activesupport (3.2.12) lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
activesupport (3.2.12) lib/active_support/callbacks.rb:81:in `run_callbacks'
actionpack (3.2.12) lib/abstract_controller/callbacks.rb:17:in `process_action'
actionpack (3.2.12) lib/action_controller/metal/rescue.rb:29:in `process_action'
actionpack (3.2.12) lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
activesupport (3.2.12) lib/active_support/notifications.rb:123:in `block in instrument'
activesupport (3.2.12) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
activesupport (3.2.12) lib/active_support/notifications.rb:123:in `instrument'
actionpack (3.2.12) lib/action_controller/metal/instrumentation.rb:29:in `process_action'
actionpack (3.2.12) lib/action_controller/metal/params_wrapper.rb:207:in `process_action'
activerecord (3.2.12) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
actionpack (3.2.12) lib/abstract_controller/base.rb:121:in `process'
actionpack (3.2.12) lib/abstract_controller/rendering.rb:45:in `process'
actionpack (3.2.12) lib/action_controller/metal.rb:203:in `dispatch'
actionpack (3.2.12) lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
actionpack (3.2.12) lib/action_controller/metal.rb:246:in `block in action'
actionpack (3.2.12) lib/action_dispatch/routing/route_set.rb:73:in `call'
actionpack (3.2.12) lib/action_dispatch/routing/route_set.rb:73:in `dispatch'
actionpack (3.2.12) lib/action_dispatch/routing/route_set.rb:36:in `call'
journey (1.0.4) lib/journey/router.rb:68:in `block in call'
journey (1.0.4) lib/journey/router.rb:56:in `each'
journey (1.0.4) lib/journey/router.rb:56:in `call'
actionpack (3.2.12) lib/action_dispatch/routing/route_set.rb:601:in `call'
actionpack (3.2.12) lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
rack (1.4.5) lib/rack/etag.rb:23:in `call'
rack (1.4.5) lib/rack/conditionalget.rb:25:in `call'
actionpack (3.2.12) lib/action_dispatch/middleware/head.rb:14:in `call'
actionpack (3.2.12) lib/action_dispatch/middleware/params_parser.rb:21:in `call'
actionpack (3.2.12) lib/action_dispatch/middleware/flash.rb:242:in `call'
rack (1.4.5) lib/rack/session/abstract/id.rb:210:in `context'
rack (1.4.5) lib/rack/session/abstract/id.rb:205:in `call'
actionpack (3.2.12) lib/action_dispatch/middleware/cookies.rb:341:in `call'
activerecord (3.2.12) lib/active_record/query_cache.rb:64:in `call'
activerecord (3.2.12) lib/active_record/connection_adapters/abstract/connection_pool.rb:479:in `call'
actionpack (3.2.12) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
activesupport (3.2.12) lib/active_support/callbacks.rb:405:in `_run__787982263__call__784807942__callbacks'
activesupport (3.2.12) lib/active_support/callbacks.rb:405:in `__run_callback'
activesupport (3.2.12) lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
activesupport (3.2.12) lib/active_support/callbacks.rb:81:in `run_callbacks'
actionpack (3.2.12) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
actionpack (3.2.12) lib/action_dispatch/middleware/reloader.rb:65:in `call'
actionpack (3.2.12) lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
actionpack (3.2.12) lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
actionpack (3.2.12) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
railties (3.2.12) lib/rails/rack/logger.rb:32:in `call_app'
railties (3.2.12) lib/rails/rack/logger.rb:16:in `block in call'
activesupport (3.2.12) lib/active_support/tagged_logging.rb:22:in `tagged'
railties (3.2.12) lib/rails/rack/logger.rb:16:in `call'
actionpack (3.2.12) lib/action_dispatch/middleware/request_id.rb:22:in `call' 
```

# javascript - Google Earth api 允许使用未注册证书的 https 连接

> ID：15910718
> 
> 赞同：2
> 
> 时间：2013-04-09T19:21:25.420
> 
> 标签：javascript, kml, google-earth-plugin

是否可以允许“不安全”的 https 连接从服务器加载 kml 文件？因为现在如果它收到 https 错误，它不会加载 kml。谷歌地球加载kml但要求批准，api什么也没做......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T01:33:22.607

没有。

这是我对插件的主要抱怨之一。如果没有错误，它只会从 HTTPS 连接中提取数据。这意味着：

*   SSL 证书必须有效
*   SSL 证书必须是可信的
*   不能有认证提示
    *   不产生提示的直通身份验证工作正常

我发现的唯一解决方法是进入并手动信任客户端计算机上的证书。确保您信任将使用的每个浏览器（Chrome、IE、Firefox）中的证书。

在与 Google 直接讨论过这个问题后——我想知道这是否可以解决，或者它是否只是将其放在网络浏览器容器中的“残酷现实”之一。

# android - Res->Raw，文件路径我使用“res/raw/filename.xml”但不起作用

> ID：15910720
> 
> 赞同：0
> 
> 时间：2013-04-09T19:21:40.653
> 
> 标签：android

我有一个保存在 Res->Raw 中的 XML 文件，我想获取这个文件的路径，以便在函数的参数中传递它来解析它。

XML 文件的名称是family.xml，所以我尝试了这个但不起作用：“res/raw/families.xml”。有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T19:24:56.883

Use :

```
 InputStream is=getResources().openRawResource(R.raw.families); 
```

to get an `InputStream` to your XML, and then use [XMLPullParser](http://developer.android.com/reference/org/xmlpull/v1/XmlPullParser.html) to parse the file :

```
 XmlPullParser xpp=XmlPullParserFactory.newInstance().newPullParser();
 xpp.setInput(is,"your-encoding"); 
```

Another alternative would be to put it in the assets folder.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T19:24:43.823

`res/` is just source folder. It does not exist in final app. If you want to retrieve your file you may want to either put it in `assets` folder or use `getResources().openRawResource()`

# vbscript - 带有 HTA 前端的 VBScript

> ID：15910725
> 
> 赞同：0
> 
> 时间：2013-04-09T19:21:58.050
> 
> 标签：vbscript, hta

好的，我有一个漂亮的 VBS，它会在巨大的日志文件中搜索某些字符串，但我并不总是想在每个日志文件中搜索每个字符串。我想要一个允许最终用户选择他们想要查找的字符串的 HTA 前端。

这是我的代码示例，它作为 vb 工作得很好，但在这个示例中，我想要牛、山羊、猫、狗等的复选框，并且无论选择多少，脚本都能正确运行..（我的实际脚本有大约 20 个单词可供选择）并且“动物日志文件”的路径和名称目前是一个输​​入框。我也希望在 hta 中使用它。

```
Const ForReading = 1
Dim words(7)
Dim msg
words(0) = "cows"
words(1) = "goats"
words(2) = "cats"
words(3) = "dogs"
words(4) = "elephants"
words(5) = "giraffes"   

Set objFSO = CreateObject("Scripting.FileSystemObject")

strAnswer = InputBox("Please enter the path & filename for the animal log file:", _
    "Create File")
Wscript.Echo strAnswer

Set objFile = objFSO.OpenTextFile( strAnswer, ForReading)
Set inFile = objFSO.OpenTextFile ( strAnswer, ForReading)

strContents = objFile.ReadAll
objFile.Close

Set outFile = objFSO.OpenTextFile( strAnswer &"_parsed-output.txt", 8, True)

Do Until inFile.AtEndOfStream
    strSearchString = inFile.ReadLine
    For i = 0 To UBound(words)-1
    If InStr(strSearchString,words(i)) Then
        msg = msg&strSearchString&vbcrlf
    End If
    next
Loop

inFile.Close
outfile.WriteLine msg

WScript.Echo "Done!" 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T20:12:41.117

这可以让你开始。如果选择了多个复选框，您将需要编写如何处理以及打开这些日志文件（多个日志文件）所需的代码逻辑。您可以在此处找到有关 HTA 的更多信息，[http ://technet.microsoft.com/en-us/scriptcenter/dd742317.aspx](http://technet.microsoft.com/en-us/scriptcenter/dd742317.aspx)

```
<html>
<head>
<title>My Logfile App</title>
<HTA:APPLICATION
  APPLICATIONNAME="My Logfile App"
  ID="MyLogfileApp"
  VERSION="1.0"/>
</head>

<script language="VBScript">

Sub Window_OnLoad
  window.resizeto 300,300
End Sub

Sub Start_Button()

    Const ForReading = 1
    Dim objFSO, objFile, inFile, strAnswer
    strAnswer = ""

    If chkCows.Checked Then strAnswer = "Cows"
    If chkGoats.Checked Then strAnswer = "Goats"
    If chkCats.checked Then strAnswer = "Cats"
    If chkDogs.Checked Then strAnswer = "Dogs"
    If chkElephants.Checked Then strAnswer = "Elephants"
    If chkGiraffes.Checked Then strAnswer = "Giraffes"

    'If strAnswer is empty then nothing was checked.
    If strAnswer = "" Then 
        Window.Alert "Please Make an Selection!"
        Exit Sub
    End If

    Set objFSO = CreateObject("Scripting.FileSystemObject")
    Set objFile = objFSO.OpenTextFile( strAnswer, ForReading)
    Set inFile = objFSO.OpenTextFile ( strAnswer, ForReading)

    strContents = objFile.ReadAll
    objFile.Close

    Set outFile = objFSO.OpenTextFile( strAnswer &"_parsed-output.txt", 8, True)

    Do Until inFile.AtEndOfStream
        strSearchString = inFile.ReadLine
        For i = 0 To UBound(words)-1
        If InStr(strSearchString,words(i)) Then
            msg = msg&strSearchString&vbcrlf
        End If
        next
    Loop

    inFile.Close
    outfile.WriteLine msg

    Window.Alert "Done!"
End Sub
</script>

<body bgcolor="white">
<center>
    <label>Choose your logfile below.</label><br />
</center>
<input type="checkbox" name="chkCows" id="chkCows">Cows<br />
<input type="checkbox" name="chkGoats" id="chkGoats">Goats<br />
<input type="checkbox" name="chkCats" id="chkCats">Cats<br />
<input type="checkbox" name="chkDogs" id="chkDogs">Dogs<br />
<input type="checkbox" name="chkElephants" id="chkElephants">Elephants<br />
<input type="checkbox" name="chkGiraffes" id="chkGiraffes">Giraffes<br />
<p>
<center>
    <input type="button" name="btnStart" id="btnStart" value="Start" onclick="Start_Button">
</center>
</body>
</html> 
```

# php - 从时间戳数组到 php 的时间戳

> ID：15910727
> 
> 赞同：0
> 
> 时间：2013-04-09T19:22:01.713
> 
> 标签：php, xml, api, timestamp

大家好，我真的是 php 新手，我正在尝试从 xml 数组转换时间戳，但没有成功，我阅读了我找到的所有内容，但仍然可以找到方法，你能帮忙吗？

我正在使用此代码来解码 xml api 输出

```
$mysongs = simplexml_load_file('http://example.com/test/xml/');
$timestamp = $mysongs->item->timestamp;
$playtime = date("Y-d-m G-i-s",$timestamp); 
```

如果我回显 $timestamp 它工作正常， $playtime 不会...

试过：

```
echo gmdate("Y-m-d", $timestamp); 
```

&

```
echo date('Y-m-d H:i:s', $wra); 
```

&

```
echo '<timeplayed>' . date('Y-m-d G:i:s', $mysongs->item->timestamp) . '</timeplayed>'; 
```

仍然没有运气..时间没有显示..如果我使用这个例子

```
echo '<timeplayed>' . date('Y-m-d G:i:s', (1365532902)) . '</timeplayed>'; 
```

它工作正常..我在这里做错了什么？

## 更新

最后我找到了它..它需要将 $timestamp 转换为整数，以便日期正确解码，因为 euxneks sugested..

所以正确的代码应该是

```
$timestamp = intVal ($mysongs->item->timestamp); 
```

进而

```
 $playtime = date("Y-d-m H-i-s",($timestamp)); 
```

最后`echo ($playtime);`，它工作正常......

谢谢大家的回复问题已解决

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T19:25:19.280

您可能需要将结果转换为整数（自从我使用 simplexml 以来已经有一段时间了，但我很确定它不会自动输入接收到的值）：

[http://php.net/intval](http://php.net/intval)

此外， strtotime 也可能工作:)

[http://php.net/strtotime](http://php.net/strtotime)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T19:31:19.507

您肯定缺少`strtotime`功能，这是一个示例：

```
$str = '04/09/2013';
$date = date('Y-m-d H:i:s',strtotime($str));

echo $date; 
```

这将输出：

```
2013-04-09 00:00:00 
```

更新

既然已经使用了 strtotime，那么如何使用：

```
$date = date('Y-m-d H:i:s', ($timestamp)); 
```

# javascript - JQuery 表单验证我需要在 knockoutjs 中单击事件来验证表单

> ID：15910729
> 
> 赞同：0
> 
> 时间：2013-04-09T19:22:04.550
> 
> 标签：javascript, jquery, jquery-plugins, knockout.js, knockout-2.0

我有一个保存按钮 HTML 和一个 ID 为 myform 的表单

```
 <button data-bind="click: save" type="submit">Save</button> 
```

我正在使用 jquery 验证器验证表单，如下所示..

```
 $("#myform").validate({ submitHandler: myVM.save }); 
```

在我的淘汰视图模型中，我有一个保存并将我的 ajax 发布数据发送到服务器的功能。

我想在将数据发送到服务器之前验证表单，但它没有，因为我相信这是一个事件。

我在 myVM 中的保存功能如下所示...

```
 self.save = function(){  $.ajax({ My ajax post info }) } 
```

任何帮助，将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T19:42:26.690

如果您正在执行自己的 AJAX 调用以将数据发送到服务器，则将按钮的类型更改为“按钮”，而不是“提交”，因此浏览器不要尝试将整个表单提交给浏览器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T20:05:15.373

这是我的答案：

我刚刚补充说：

```
 if (!$("#myform").valid())
                alert("form not valid"); 
```

在我的ajax调用之前，它起作用了。

谢谢大家

# oop - 设计与封装：字典多类实例，或一个实例多内部字典

> ID：15910732
> 
> 赞同：1
> 
> 时间：2013-04-09T19:22:16.267
> 
> 标签：oop, dictionary, encapsulation

我有一个 Calculator 类，它接受 n 类型的数据，并根据对数据的一些计算返回一个值。我在我的 Main 类中生成数据，我面临着如何设计 Calculator 类的两个选项。

第一个选项：

```
public class Main 
{
    Dictionary<DataType, Calculator> dataTypeToCalculator = new Dictionary<DataType, Calculator>()
    void RecordResult(Data data) 
    {
        Calculator calculator = dataTypeToCalculator[data.DataType]; //assume this exists
        int result = calculator.Calculate(data);
        StoreResult(result); //pretend this is implemented, it stores the result somewhere in Main object
    }
}

public class Calculator 
{
    int field1 = 1;
    int field2 = 2;
    int Calculate(Data data) 
    {
        return data.Value + field1 + field2;
    }
} 
```

第二种选择：

```
public class Main 
{
    Calculator calculator = new Calculator();
    void RecordResult(Data data) 
    {
        calculator.Calculate(data);
    }
}

public class Calculator 
    {
    Dictionary<DataType, int> dataTypeToField1 = new Dictionary<DataType, int>();
    Dictionary<DataType, int> dataTypeToField2 = new Dictionary<DataType, int>();
    void Calculate(Data data) 
    {
        int field1 = dataTypeToField1[data.DataType];
        int field2 = dataTypeToField2[data.DataType];
        return data.Value + field1 + field2;
    }
} 
```

我有几个干净的类，它们没有任何内部字段，我可以在其中拥有一个实例，只需将数据从 Main 类传递给它，并让它处理不同的 DataType。但是，我还有其他具有多个必要字段的类，并且为每个类创建一个内部字典似乎很糟糕。这种情况是否有标准的“最佳实践”？在这个例子中，我希望 Calculator 封装所有的计算任务，而不必依赖 Main 类来分离数据。但是，当我的班级有很多领域时，这对我来说似乎不合适。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T21:05:44.187

您的案例确实很具体，所以我想没有任何适合您问题的“最佳实践”。[`Single Responsibility Principle (SRP)`](http://en.wikipedia.org/wiki/Single_responsibility_principle)幸运的是，我最喜欢的原则中有一般[`SOLID`](http://en.wikipedia.org/wiki/SOLID_%28object-oriented_design%29)原则。

如果我正确理解你的情况，你有：

*   `Calculator`负责做计算
*   `Factory`负责创建`Calculator`实例
*   `Configuration`包含以下数据`Calculators`
*   `Repository`负责数据持久化

所以我建议创建负责特定功能的单独类：Calculator、CalculatorFactory、CalulatorConfiguration、CalculationResultsRepository，...

创建具有多个职责的类通常会导致代码难以管理、测试和未来开发。

# sas - SAS 从宏变量创建和填充数据集变量

> ID：15910733
> 
> 赞同：0
> 
> 时间：2013-04-09T19:22:19.570
> 
> 标签：sas

我有一组数据集，其中某些变量被定义为长度 > 2000 个字符。我想要做的是创建一个标识这些变量的宏，然后创建一组新变量来保存这些值。

在基本代码中执行此操作将类似于：

```
data new_dset;
set old_dset:
length colnam1 colnam2 colnam3 2000.;
colnam1 = substr(long_column,1,2000);
colnam2 = substr(long_column,2001,2000);
run; 
```

我可以将变量名称和长度列表构建为一组宏变量，但我不知道如何从宏变量中创建新变量。

我在想它会是什么样子：

```
%macro split;

data new_dset;
set old_dset;
%do i = 1%to &num_cols;

   if &&collen&i > 2000 then do;

      &&colnam&i 1 = substr(&&colnam&i,1,2000);
   end;
%en;
run;
%mend; 
```

我知道那行不通，但这就是我的想法。

如果有人可以帮助他们弄清楚我该怎么做，我将不胜感激。

谢谢

布莱恩

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T20:00:20.837

您的宏不需要是整个数据步骤。在这种情况下，准确查看您正在复制的内容然后基于此编写宏会很有帮助。

所以你的代码是：

```
data new_dset;
set old_dset:
length colnam1 colnam2 colnam3 2000.;
colnam1 = substr(long_column,1,2000);
colnam2 = substr(long_column,2001,2000);
run; 
```

那么你的宏真的需要：

```
length colnam1 colnam2 colnam3 2000.;
colnam1 = substr(long_column,1,2000);
colnam2 = substr(long_column,2001,2000); 
```

所以你可以做的就是把它放在一个宏中：

```
%macro split(colname=);
 length &colname._1 &colname._2 $2000;
 &colname._1 = substr(&colname.,1,2000);
 &colname._2 = substr(&colname.,2001,4000);
%mend; 
```

然后生成调用列表：

```
proc sql;
 select cats('%split(colname=',name,')') into :calllist separated by ' '
  from dictionary.columns 
  where libname = 'WORK' and memname='MYDATASET'
  and length > 2000;
quit; 
```

然后你运行它们：

```
data new_dset;
set old_dset;
&calllist;
run; 
```

现在你完成了:) &calllist 包含一个 %split(colname) 调用的列表。如果您可能需要超过 2 个变量（即 > 4000 长度），您可能需要添加一个新参数“长度”；或者，如果您使用的是 9.2 或更高版本，您可以只使用 SUBPAD 而不是 SUBSTR 并为每个外部变量生成所有三个变量。

# node.js - Mongoose 用空值更新字段抛出异常

> ID：15910736
> 
> 赞同：1
> 
> 时间：2013-04-09T19:22:31.010
> 
> 标签：node.js, mongoose

这是模型定义：

```
pricing: { type: Number, default: null } 
```

这是当 Mongoose 尝试更新源数据为空的记录时遇到的异常：

我得到的错误信息：

```
 message: 'Cast to number failed for value "NaN" at path "pricing"',
     name: 'CastError',
     type: 'number',
    value: NaN,
     path: 'pricing' 
```

对于这种情况，我确实需要用 null 更新现有值，因为应用程序将该字段视为可以为空的 Number 字段。

如何解决？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T22:22:08.017

为定价插入空值对我来说似乎没问题；请参阅下面我使用的示例代码：

应用程序.js

```
var mongoose = require("mongoose"),
    Widget = require("./model.js").model;

// connect to mongo
mongoose.connect("mongodb://localhost/testdb");

// test insertion
var testValid = new Widget({ name: "Valid Test", price: 10.00 }),
    testInvalid = new Widget({ name: "Invalid Test", price: null });

testValid.save();
testInvalid.save(function (err) {
    if (err) {
        console.log(err);
    }
}); 
```

模型.js

```
var mongoose = require("mongoose");

var schema = new mongoose.Schema({
    name: String,
    price: { type: Number, default: null }
});

exports.model = mongoose.model("Widget", schema);   
exports.schema = schema; 
```

从您的错误消息来看，似乎正在进行无效计算，其结果是试图插入 Mongo。错误消息中的“值”是试图插入的值。您可以通过尝试保存以下文档来验证这一点：

```
var testInvalid = new Widget({ name: "Invalid Test", price: "abc"}); 
```

这将导致：

```
{ message: 'Cast to number failed for value "abc" at path "price"',
  name: 'CastError',
  type: 'number',
  value: 'abc',
  path: 'price' } 
```

您是否可以分享更多详细信息或代码示例？

**编辑：**

我会尝试将更新与您的其余代码隔离开来，看看您是否可以复制错误，如下所示：

```
var mongoose = require("mongoose"),
    Widget = require("./model.js").model;

// connect to mongo
mongoose.connect("mongodb://localhost/testdb");

// insert record
var testInvalid = new Widget({ name: "Invalid Test", price: 10.00 });

// update record
testInvalid.save(function (err) {
    if (err) {
        console.log(err);
    } else {
        Widget.findOne({ name: "Invalid Test" }, function (err, record) {
            // set price to null & save
            record.price = null;
            record.save(function (err) {
                if (err) {
                    console.log(err);
                }
            });
        });
    }
}); 
```

这个孤立的更新似乎对我有用。抱歉，我无法提供更多帮助：/

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T20:57:05.030

我的猜测是它正在尝试转换`null`为`Number`. 尝试设置`default`为`0`;

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-16T13:42:59.453

NaN != null 是描述问题的最佳方式。您应该检查您尝试为“NaN”插入的价格值。如果此测试为真，则在您的文档中插入空值，否则插入正确解析的定价（作为数字）。

# jquery - jCarousel Lite Uncaught TypeError: Object [object Object] has no method 'jCarouselLite'

> ID：15910739
> 
> 赞同：0
> 
> 时间：2013-04-09T19:22:40.590
> 
> 标签：jquery, jcarousellite

我已经按照这个[http://www.gmarwaha.com/jquery/jcarousellite/#install](http://www.gmarwaha.com/jquery/jcarousellite/#install) 完成了每一步，似乎没有得到任何快乐。

我已经检查了脚本是链接并且响应它们似乎都可以在调试器中查看，所以我认为它与此无关。

任何帮助启动和运行它都会很棒，这是我试图让它工作并在控制台中不断收到此错误的网站：

未捕获的类型错误：对象 [object Object] 没有方法“jCarouselLite”

[http://goo.gl/58Ds2](http://goo.gl/58Ds2)

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T19:25:49.137

您必须包含 jQuery 库，我检查过该库不在该页面上的正确位置。您必须在任何使用它的脚本之前包含 JQ 库。任何一个：

在页面顶部弹出这个并删除第 21 行（您当前的脚本）

```
<script src="http://code.jquery.com/jquery-latest.min.js" type="text/javascript"></script> 
```

或移动

```
<script type="text/javascript" src="http://176.32.230.13/test-getextra.co.uk/wp-content/themes/Sportsrule/assets/js/jcarousellite.js"></script> 
```

在您的标记中的第 21 行下方。

您的轮播脚本依赖于 jquery 库。如果在使用它的脚本之前未包含 jquery，您将收到此错误。确保将任何 jquery 脚本声明放在任何和所有使用/依赖它的脚本之上。

## 现有标记

```
 <script type="text/javascript" src="http://176.32.230.13/test-getextra.co.uk/wp-content/themes/Sportsrule/assets/js/jcarousellite.js"></script>
        <meta http-equiv="Content-Type" content="text/html;charset=UTF-8" />
        <title>Sportsrule, Sports event management and language services for sports teams, sports events and the sports industry</title>

        <link rel="stylesheet" type="text/css" href="http://176.32.230.13/test-getextra.co.uk/wp-content/themes/Sportsrule/assets/style.css" media="all" />
        <link rel="stylesheet" type="text/css" href="http://176.32.230.13/test-getextra.co.uk/wp-content/themes/Sportsrule/assets/css/nivo-slider.css" media="all" />
           <link rel="stylesheet" type="text/css" href="http://176.32.230.13/test-getextra.co.uk/wp-content/themes/Sportsrule/style.css" media="all" />
 <!--   
 <link href='http://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css'>
 -->

            <link rel="pingback" href="http://176.32.230.13/test-getextra.co.uk/xmlrpc.php" />
            <link rel='stylesheet' id='NextGEN-css'  href='http://176.32.230.13/test-getextra.co.uk/wp-content/plugins/nextgen-gallery/css/nggallery.css?ver=1.0.0' type='text/css' media='screen' />
<link rel='stylesheet' id='contact-form-7-css'  href='http://176.32.230.13/test-getextra.co.uk/wp-content/plugins/contact-form-7/includes/css/styles.css?ver=3.2.1' type='text/css' media='all' />
<link rel='stylesheet' id='jquery.lightbox.min.css-css'  href='http://176.32.230.13/test-getextra.co.uk/wp-content/plugins/wp-jquery-lightbox/styles/lightbox.min.css?ver=1.3.4' type='text/css' media='all' />
<script type='text/javascript' src='http://176.32.230.13/test-getextra.co.uk/wp-includes/js/jquery/jquery.js?ver=1.7.2'></script>
<script type='text/javascript' src='http://176.32.230.13/test-getextra.co.uk/wp-content/plugins/nextgen-gallery/js/jquery.cycle.all.min.js?ver=2.9995'></script>
<script type='text/javascript' src='http://176.32.230.13/test-getextra.co.uk/wp-content/plugins/nextgen-gallery/js/ngg.slideshow.min.js?ver=1.06'></script> 
```

## 所需的标记

```
 <meta http-equiv="Content-Type" content="text/html;charset=UTF-8" />
        <title>Sportsrule, Sports event management and language services for sports teams, sports events and the sports industry</title>

        <link rel="stylesheet" type="text/css" href="http://176.32.230.13/test-getextra.co.uk/wp-content/themes/Sportsrule/assets/style.css" media="all" />
        <link rel="stylesheet" type="text/css" href="http://176.32.230.13/test-getextra.co.uk/wp-content/themes/Sportsrule/assets/css/nivo-slider.css" media="all" />
           <link rel="stylesheet" type="text/css" href="http://176.32.230.13/test-getextra.co.uk/wp-content/themes/Sportsrule/style.css" media="all" />
 <!--   
 <link href='http://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css'>
 -->

            <link rel="pingback" href="http://176.32.230.13/test-getextra.co.uk/xmlrpc.php" />
            <link rel='stylesheet' id='NextGEN-css'  href='http://176.32.230.13/test-getextra.co.uk/wp-content/plugins/nextgen-gallery/css/nggallery.css?ver=1.0.0' type='text/css' media='screen' />
<link rel='stylesheet' id='contact-form-7-css'  href='http://176.32.230.13/test-getextra.co.uk/wp-content/plugins/contact-form-7/includes/css/styles.css?ver=3.2.1' type='text/css' media='all' />
<link rel='stylesheet' id='jquery.lightbox.min.css-css'  href='http://176.32.230.13/test-getextra.co.uk/wp-content/plugins/wp-jquery-lightbox/styles/lightbox.min.css?ver=1.3.4' type='text/css' media='all' />

<!-- MOVED TOP SCRIPT INCLUSION LINE BELOW JQUERY INCLUSION RIGHT HERE -->

<script type='text/javascript' src='http://176.32.230.13/test-getextra.co.uk/wp-includes/js/jquery/jquery.js?ver=1.7.2'></script>
<script type="text/javascript" src="http://176.32.230.13/test-getextra.co.uk/wp-content/themes/Sportsrule/assets/js/jcarousellite.js"></script>

<script type='text/javascript' src='http://176.32.230.13/test-getextra.co.uk/wp-content/plugins/nextgen-gallery/js/jquery.cycle.all.min.js?ver=2.9995'></script>
<script type='text/javascript' src='http://176.32.230.13/test-getextra.co.uk/wp-content/plugins/nextgen-gallery/js/ngg.slideshow.min.js?ver=1.06'></script> 
```

# actionscript-3 - 带有 LineStyle 笔划的图形上的 BitmapData.draw()

> ID：15910741
> 
> 赞同：3
> 
> 时间：2013-04-09T19:22:53.467
> 
> 标签：actionscript-3

我有一个使用应用程序绘制的`Shape.graphics.drawRoundRect()`形状`lineStyle`。我正在尝试捕获该形状作为`Bitmap`使用`BitmapData.draw()`，但我遇到了笔画问题。见下文：

![在此处输入图像描述](https://i.stack.imgur.com/STJYY.png)

如您所见，使用`draw()`( 和`drawWithQuality()`) 时，笔画会被剪掉。这条线以对象为中心绘制，因此厚度为 4（如我在示例中使用的）在形状区域外有 2 个像素，在其内有 2 个像素。draw() 似乎捕获了从 (0,0) 到 (BitmapData.width,BitmapData.height) 的所有内容，因此 (0,0) 左侧和顶部的所有内容都丢失了。我尝试使用 clipRect 选项进行补偿，但讽刺的是，这只是使剪裁的边框变得均匀。

知道如何捕获剩余的数据吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T20:19:43.833

作为更通用的解决方案，您可以在其自己的坐标空间中获取对象的边界，并使用它来设置的大小`BitmapData`和偏移量`draw()`：

```
import flash.geom.Matrix;
import flash.geom.Rectangle;

const thickness:int = 4;
const radius:int = 10;
const size:int = 100;

var shape:Shape = new Shape();
shape.graphics.lineStyle( thickness, 0xaaaaaa );
shape.graphics.beginFill( 0xdddddd );
shape.graphics.drawRoundRect( 0, 0, size, size, radius, radius );
shape.graphics.endFill();
addChild( shape );

var bounds:Rectangle = shape.getBounds(shape);
var m:Matrix = new Matrix();
m.translate(-bounds.left, -bounds.top);

var bmp1:Bitmap = new Bitmap();
bmp1.bitmapData = new BitmapData( bounds.width, bounds.height, true, 0 );
bmp1.x = 310;
bmp1.y = 100;
addChild( bmp1 );
bmp1.bitmapData.draw( shape, m ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T19:28:57.693

当然，在我发布问题的那一刻，我就想出了解决办法。您必须偏移您的形状以匹配边界之外的线条，并补偿使用绘图时线条添加到形状的额外尺寸

```
const thickness:int = 4;
const radius:int = 10;
const size:int = 100;

var shape:Shape = new Shape();
shape.graphics.lineStyle( thickness, 0xaaaaaa );
shape.graphics.beginFill( 0xdddddd );
shape.graphics.drawRoundRect( thickness / 2, thickness / 2, size, size, radius, radius );
shape.graphics.endFill();
addChild( shape );

var bmp1:Bitmap = new Bitmap();
bmp1.bitmapData = new BitmapData( size + thickness, size + thickness, true, 0 );
bmp1.x = 310;
bmp1.y = 100;
addChild( bmp1 );
bmp1.bitmapData.draw( shape ); 
```

在此处查看结果（您可以忽略剪辑矩形）：

![在此处输入图像描述](https://i.stack.imgur.com/CH5UO.png)

# c++ - c++ 2d arrays to funcions

> ID：15910742
> 
> 赞同：0
> 
> 时间：2013-04-09T19:22:58.627
> 
> 标签：c++, arrays, function

The code is supposed to use a 2d array to take the food eaten by 3 monkeys over a week and find the average, lowest eaten on a single day, and highest on a single day. The least function is supposed to output the lowest eaten in one day by a single monkey and include the monkeys number, pounds eaten and the day number. Same with the highest function. But its not calculating correctly, i dont know if i did the function wrong. When i run it it prints out "The lowest amount eaten was monkey 1 on day 1 was 1" then prints out 2, 3 ,4 etc. I tried putting the cout outside the loop but then count isnt initialized

```
#include <iomanip>
#include <iostream>  
using namespace std;

//Global Constants
const int NUM_MONKEYS = 3; // 3 rows
const int DAYS = 7; // 7 columns

//Prototypes
void poundsEaten(double[][DAYS],int, int);
void averageEaten(double [][DAYS], int, int);
void least(double [][DAYS], int, int);
void most(double [][DAYS], int, int);

int main()
{
//const int NUM_MONKEYS = 3;
//const int DAYS = 7;
double foodEaten[NUM_MONKEYS][DAYS]; //Array with 3 rows, 7 columns 

poundsEaten(foodEaten, NUM_MONKEYS, DAYS);
averageEaten(foodEaten, NUM_MONKEYS, DAYS);
least(foodEaten, NUM_MONKEYS, DAYS);
most(foodEaten, NUM_MONKEYS, DAYS);

system("pause");
return 0;
}

void poundsEaten(double monkey[][DAYS], int rows, int cols)
{
for(int index = 0; index < rows; index++)
{
    for(int count = 0; count < cols; count++)
    {
        cout << "Pounds of food eaten on day " << (count + 1);
        cout << " by monkey " << (index + 1) << ": ";
        cin >> monkey[index][count];

    }
} 
}

void averageEaten(double monkey[][DAYS], int rows, int cols)
{
for(int count = 0; count < cols; count++)
{
    double total = 0;
    double average;
    for(int index = 0; index < rows; index++)
    {
        total += monkey[index][count]; 

        average = total/rows;
    }
    cout << "The average food eaten on day " << (count + 1)
             <<" is " << average << endl;

}
}

void least(double monkey[][DAYS], int rows, int cols)
{
double lowest = monkey[NUM_MONKEYS][DAYS];
for(int index = 0; index < rows; index++)
{
    for(int count = 0; count < cols; count++)
    {
        if(monkey[index][count] > lowest)
            lowest = monkey[index][count];

        cout << "The lowest amount of food eaten was monkey number 
                       << " " << (index + 1)
               << " On day " << (count + 1) << " was " << lowest;
    }

}

}

void most(double monkey[][DAYS], int rows, int cols)
{
double highest = monkey[NUM_MONKEYS][DAYS];
for(int index = 0; index < rows; index++)
{
    for(int count = 0; count < cols; count++)
    {
        if(monkey[index][count] > highest)
            highest = monkey[index][count];

    cout << "The highest amount of food eaten was monkey number"
         << (index + 1) << " on day " << (count + 1)  << " was "  
                  << highest;
    }
}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T19:27:20.077

从`least`功能：

```
if(monkey[index][count] > lowest)
    lowest = monkey[index][count]; 
```

在比较中，我确定您的意思是`<`而不是`>`.

您还应该保存索引并在循环之后打印，这适用于`least`和`most`。

# jquery - how prevent whitespaces jquery keycode

> ID：15910746
> 
> 赞同：0
> 
> 时间：2013-04-09T19:23:24.857
> 
> 标签：jquery

I am using a syntax like this

```
if(e.keycode  == 17 ....
   e.preventDefault() 
```

and works for all keys controls, alts, tabs and etc all but one the space which the keycode is 38 I want to prevent the user from typing whitespaces in a textbox

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T19:26:25.800

您可以阻止用户键入这样的空格，`false`如果键码返回则`32`返回`true`

```
$("input").on("keydown", function (e) {
    return e.which !== 32;
}); 
```

[JS 小提琴示例](http://jsfiddle.net/drvJD/)

注意：您提到了键码 38，但这是用于`UP`箭头键而不是`Space`

这是[Key Code](http://www.cambiaresearch.com/articles/15/javascript-char-codes-key-codes)的列表，但不幸的是作者没有在此列表中包含空间的 Key code :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T19:30:01.037

你可以使用 jquery 来做到这一点。请在这里查看我的样品。 [http://jsfiddle.net/SinPride/9P29p/](http://jsfiddle.net/SinPride/9P29p/)

```
<input type="text" id="txt_name">
<script>
$('#txt_name').keypress(function( e ) {
    if(e.which === 32) 
        return false;
});
</script> 
```

# iphone - 如何将滚动视图连接到 TableView 单元中的页面控件

> ID：15910747
> 
> 赞同：2
> 
> 时间：2013-04-09T19:23:27.140
> 
> 标签：iphone, ios, scrollview

我有一个设计有滚动视图和页面视图控件的自定义单元格，我显示如下

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

static NSString * CellIdentifier = @"ScrollViewCell";
cell = (ScrollViewCell*)[newsTable dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil)
{
    NSArray * customcellArray = [[NSBundle mainBundle]loadNibNamed:@"ScrollViewCell" owner:self options:nil];
    for(id customcellObject in customcellArray){
        if([customcellObject isKindOfClass: [UITableViewCell class]]){
            cell = (ScrollViewCell *)customcellObject;
            break;
        }
    }
}

// Customize your UIScrollView here..

[cell.scrollView setDelegate:self];
[cell.scrollView setPagingEnabled:YES];

scrollView = cell.scrollView;
pageControl = cell.pageControl;

cell.backgroundColor = [UIColor grayColor];

NSArray *colors = [NSArray arrayWithObjects:[UIColor redColor], [UIColor greenColor],[UIColor blueColor], nil];
cell.scrollView.contentSize = CGSizeMake(cell.scrollView.frame.size.width * colors.count,cell.scrollView.frame.size.height);
for (int i = 0; i < colors.count; i++) {
    CGRect frame;
    frame.origin.x = cell.scrollView.frame.size.width * i;
    frame.origin.y = 0;
    frame.size = cell.scrollView.frame.size;

    UIView *subview = [[UIView alloc] initWithFrame:frame];
    subview.backgroundColor = [colors objectAtIndex:i];
    [cell.scrollView addSubview:subview];
}
// Configure the cell...
UIView* bgview = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 1, 1)];
bgview.opaque = YES;
bgview.backgroundColor = [UIColor grayColor];
[cell setBackgroundView:bgview];

return cell;
} 
```

滚动视图出现并在单元格中滚动得很好，但问题是页面控件不随滚动更新，基本上我想更新滚动视图滚动的页面控件但由于页面控件和滚动视图都来自单元格我不知道如何实现对此，我尝试使用单元格实现 UIScrollViewDelegate 协议，然后是表格视图的父视图，但无法使其正常工作，请指导。

谢谢维沙尔

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T04:20:59.103

不要将你的`UIPageControll`over`UIScrollview`放在你的自定义单元格中，如果是的话，它会自行滚动。所以`UIScrollView`像这样创建你的自定义单元格并为每个`UIScrollview`&制作出口`UIPageControll`，

![自定义单元格](https://i.stack.imgur.com/NddwL.png)

你的一个变化`cellForRowAtIndexPath`

```
// Customize your UIScrollView here..

[cell.scrollView setDelegate:self];
[cell.scrollView setPagingEnabled:YES];
[cell.scrollView setTag:indexPath.row]; // set indexpath.row as tag for cell.scrollview

NSArray * colors = [NSArray arrayWithObjects:[UIColor redColor], [UIColor greenColor],[UIColor blueColor],nil];

cell.pageControll.numberOfPages = [colors count];

And in,

- (void)scrollViewDidScroll:(UIScrollView *)sender {

    CGFloat xOffset = sender.contentOffset.x;
    CGFloat frameWidth = sender.frame.size.width;

    int page = floor((xOffset - frameWidth / 2) / frameWidth) + 1;

    GroupButtonCell * cell = (GroupButtonCell*)[self.tableView cellForRowAtIndexPath:[NSIndexPath indexPathForRow:sender.tag inSection:0]]; // get appropriate cell based on scrollview tag (sender.tag).
    cell.pageControll.currentPage = page; // assigning to pagecontroll

} 
```

希望这会有所帮助..

# c - C 中的线程同步

> ID：15910749
> 
> 赞同：2
> 
> 时间：2013-04-09T19:23:28.890
> 
> 标签：c, multithreading, synchronization

我必须使用两个线程；一是对矩阵进行各种运算，二是监控矩阵运算过程中各个点的虚拟内存。此方法需要使用全局状态变量“标志”。

到目前为止，我有以下内容（为简洁起见，省略了一些）：

```
int flag = 0;

int allocate_matrices(int dimension)
{
    while (flag == 0) {} //busy wait while main prints memory state

    int *matrix = (int *) malloc(sizeof(int)*dimension*dimension);
    int *matrix2 = (int *) malloc(sizeof(int)*dimension*dimension);

    flag = 0;
    while (flag == 0) {} //busy wait while main prints memory state

    // more similar actions...
}

int memory_stats()
{
    while (flag == 0)
    { system("top"); flag = 1; }
}

int main()
{ //threads are created and joined for these two functions } 
```

如您所料，`system("top")`调用发生一次，矩阵被分配，然后程序陷入无限循环。在我看来，这是因为分配给`memory_stats`函数的线程已经完成了它的职责，所以标志将永远不会再次更新。

有没有一种优雅的方式来解决这个问题？我知道我必须打印四次内存统计信息，所以我突然想到我可以在`memory_stats`函数中编写四个 while 循环，忙于等待它们之间的全局标志，但这对我来说似乎很笨拙。任何帮助或指示将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-09T19:31:06.557

您可以使用互斥锁锁定它。我假设您使用 pthread。

```
pthread_mutex_t mutex;

pthread_mutex_lock(&mutex);
flag=1;
pthread_mutex_unlock (&mutex); 
```

这是一个关于 pthread、互斥锁和其他东西的非常好的教程：[https ://computing.llnl.gov/tutorials/pthreads/](https://computing.llnl.gov/tutorials/pthreads/)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-09T19:51:25.310

挂起的可能原因之一是它是一个常规变量，编译器发现它从未设置为介于and或 in this inside`flag`之间的非零值。因此它“认为”变量保持为 0 并且循环变为无限。编译器完全没有注意到您的线程。`flag = 0;``while (flag == 0) {}``while``allocate_matrices()`

您可以定义`flag`为`volatile`以防止上述情况发生，但添加后可能会遇到其他问题`volatile`。一方面，`volatile`不保证变量修改的原子性。

另一个问题是，如果编译器看到[一个没有副作用的无限循环，它*可能被*认为是未定义的行为，并且任何事情都可能发生，或者至少不是你想的应该](https://stackoverflow.com/q/15595493/968261)的，还有[this](https://stackoverflow.com/q/3592557/968261)。

您需要使用适当的同步原语，如互斥锁。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T20:52:32.603

您的问题可以使用遵循最新 C 标准 C11 的 C 编译器来解决。C11 具有线程和称为 的数据类型`atomic_flag`，基本上可以用于自旋锁，就像您在问题中所使用的那样。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-09T19:43:00.923

首先，`flag`需要声明变量，`volatile`否则编译器有权在第一个变量之后省略对其的读取。

这样一来，就可以使用 sequencer/event_counter 了：一个线程可以在变量为奇数时递增，而另一个线程在变量为偶数时递增。由于一个线程始终“拥有”该变量，并随着增量转移所有权，因此不存在竞争条件。

# java - 数组和对象的杰克逊反序列化问题

> ID：15910753
> 
> 赞同：1
> 
> 时间：2013-04-09T19:23:52.627
> 
> 标签：java, spring, jackson

我遇到了一个问题，我的 JSON 响应可以是对象或对象数组

具有单个值的 Foobar 示例：

```
{
    "foo": {"msg": "Hello World" }
} 
```

带有数组的 Foobar 示例：

```
{
    "foo": [
           { "msg": "Hello World" },
           { "msg": "Goodbye World" }
         ]
} 
```

我希望将单个值强制转换为任何数组，但到目前为止，我发现将所有单个值转换为数组的唯一方法。

* * *

ACCEPT_SINGLE_VALUE_AS_ARRAY

[http://wiki.fasterxml.com/JacksonFeaturesDeserialization](http://wiki.fasterxml.com/JacksonFeaturesDeserialization)

* * *

我一直在寻找对单个属性执行相同操作的注释，但到目前为止谷歌还没有出现任何示例。

以前有没有人遇到过这个问题，我真的不想将所有内容重写为数组以使 RestTemplate 与错误的服务一起使用。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-09T19:51:35.957

> 我希望将单个值强制转换为任何数组，但到目前为止，*我发现将所有单个值转换为数组的唯一方法*。

这根本不应该是这样。对于给定的 ObjectMapper，该`ACCEPT_SINGLE_VALUE_AS_ARRAY`属性***是***开/关的，但其行为完全由 JSON 值映射到的目标属性控制。

*   当 ACCEPT_SINGLE_VALUE_AS_ARRAY 打开时，将 JSON 值映射到 Java 集合属性不会导致错误。
*   当 ACCEPT_SINGLE_VALUE_AS_ARRAY 打开时，将 JSON 值映射到 Java 基本属性（也）不会导致错误。

由以下代码说明：

```
class Foo {
    private String msg;

    // Constructor, setters, getters
}

class Holder {
    private List<Foo> foo;
    private Foo other;

    // Constructors, setters, getters
}

public class FooTest {

    @org.junit.Test
    public void testCollectionFromJSONValue() throws Exception {
        final InputStream stream = Thread.currentThread()
                .getContextClassLoader().getResourceAsStream("foo.json");

        final String json = IOUtils.toString(stream);

        final ObjectMapper mapper = new ObjectMapper();
        mapper.configure(
                DeserializationConfig.Feature.ACCEPT_SINGLE_VALUE_AS_ARRAY,
                true);
        final Holder holder = mapper.readValue(json, Holder.class);
        System.out.println(holder);
    }
} 
```

它依赖于以下 JSON：

```
{
    "foo": {
        "msg": "Hello World"
    },
    "other": {
        "msg": "Goodbye"
    }
} 
```

运行代码将显示“foo”属性成功反序列化为列表，而“other”属性被反序列化为（基本）Foo 类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-01T08:52:40.127

我遇到了同样的问题，并且很难找到一种解决方案来以这种方式配置我的 RestTemplate。因为您并不总是想实例化和更改 objectMapper ...所以这是我的解决方案：

```
<bean id="myRestTemplate" class="org.springframework.web.client.RestTemplate">
    <property name="messageConverters">
        <list>
            <bean class="org.springframework.http.converter.json.MappingJackson2HttpMessageConverter">
                <property name="objectMapper" ref="jacksonObjectMapper" />
            </bean>
        </list>
    </property>
</bean>
<bean id="jacksonObjectMapper" class="com.fasterxml.jackson.databind.ObjectMapper" />
<bean class="org.springframework.beans.factory.config.MethodInvokingFactoryBean">
    <property name="targetObject" ref="jacksonObjectMapper" />
    <property name="targetMethod" value="configure" />
    <property name="arguments">
        <list>
            <value type="com.fasterxml.jackson.databind.DeserializationFeature">ACCEPT_SINGLE_VALUE_AS_ARRAY</value>
            <value>true</value>
        </list>
    </property>
</bean> 
```

然后，您可以通过将其注入代码中来使用此预配置的 RestTemplate：

```
@Autowired
private RestTemplate myRestTemplate; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-10-12T00:21:18.320

使用 RestTemplate 时解决此问题的最佳方法。

```
import org.springframework.http.converter.json.MappingJackson2HttpMessageConverter;
ObjectMapper objectMapper = new ObjectMapper()
            .configure(DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES, false)
            .configure(DeserializationFeature.ACCEPT_SINGLE_VALUE_AS_ARRAY, false);
MappingJackson2HttpMessageConverter jacksonMappingConverter 
              = new MappingJackson2HttpMessageConverter(objectMapper);
restTemplate.getMessageConverters().add(0, jacksonMappingConverter); 
```

对于要解析的元素，使用可以是对象或数组的注释定义如下

```
import com.fasterxml.jackson.annotation.JsonFormat;
import com.fasterxml.jackson.annotation.JsonProperty;
public class ParentObject{
  @JsonFormat(with = JsonFormat.Feature.ACCEPT_SINGLE_VALUE_AS_ARRAY)
  @JsonProperty("InnerObject")
 private List<InnerObject> innerObject; 
```

}

如果您不想向 restTemplate 添加新的映射器，请更改现有的映射器以支持用例

```
List<HttpMessageConverter<?>> messageConverters = restTemplate.getMessageConverters();
        for (HttpMessageConverter<?> httpMessageConverter : messageConverters) {
            if (httpMessageConverter instanceof MappingJackson2HttpMessageConverter) {
                MappingJackson2HttpMessageConverter mappingJackson2HttpMessageConverter = (MappingJackson2HttpMessageConverter) httpMessageConverter;
                mappingJackson2HttpMessageConverter.getObjectMapper()
                        .configure(DeserializationFeature.ACCEPT_SINGLE_VALUE_AS_ARRAY, true);
            }
        } 
```

# z3 - 查看; 获取模型；检查导致 Z3 C API 中的段错误

> ID：15910755
> 
> 赞同：1
> 
> 时间：2013-04-09T19:23:54.687
> 
> 标签：z3

我正在尝试通过 C API 和 smtlib2 使用 Z3 进行增量求解。不幸的是，在断言一些简单的公式、检查它、获取它的模型、断言一些额外的东西然后再次检查时，我遇到了分段违规。这也发生在没有断言新事物的情况下，即在检查、检索模型和再次检查时。这是重现错误的最小示例：

```
#include<z3.h>

int main()
{
  Z3_config cfg = Z3_mk_config();
  Z3_context ctx = Z3_mk_context(cfg);
  Z3_ast fs = Z3_parse_smtlib2_string(ctx, "(declare-fun a () Int) (assert (= a 0))", 0, 0, 0, 0, 0, 0);
  Z3_solver solver = Z3_mk_solver(ctx);
  Z3_solver_assert(ctx, solver, fs);
  Z3_solver_check(ctx, solver);
  Z3_model m = Z3_solver_get_model(ctx, solver);
  Z3_solver_check(ctx, solver);
  Z3_del_config(cfg);
  return 0;
} 
```

我尝试了两个 Z3 版本（Mac 64 位上的 4.3.1 和 Ubuntu 64 位上的 4.1）。

感谢任何帮助、提示或解决方法 - 也许我只是以错误的方式使用 API？

非常感谢，

伊丽莎白

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T20:03:53.273

这是使用引用计数的代码版本。当我删除引用计数时它会崩溃。

```
void main() {
    Z3_config cfg = Z3_mk_config();
    Z3_context ctx = Z3_mk_context(cfg);
    Z3_ast fs = Z3_parse_smtlib2_string(ctx, "(declare-fun a () Int) (assert (= a 0))", 0, 0, 0, 0, 0, 0);
    Z3_inc_ref(ctx, fs);
    Z3_solver solver = Z3_mk_solver(ctx);
    Z3_solver_inc_ref(ctx, solver);
    Z3_solver_assert(ctx, solver, fs);
    Z3_solver_check(ctx, solver);
    Z3_model m = Z3_solver_get_model(ctx, solver);
    Z3_model_inc_ref(ctx, m);
    Z3_solver_check(ctx, solver);

    // work with model

    Z3_solver_dec_ref(ctx, solver);
    Z3_model_dec_ref(ctx, m);
    Z3_dec_ref(ctx, fs);
    Z3_del_config(cfg);
 } 
```

顺便提一句。C++ API 隐藏了所有的引用计数细节。使用起来更方便。

# javascript - 如何为每个数组绑定依赖选择列表

> ID：15910756
> 
> 赞同：1
> 
> 时间：2013-04-09T19:23:58.473
> 
> 标签：javascript, knockout.js

我想创建一个表，其中我有两列，每列都有下拉菜单。第二列的下拉列表取决于第一列，但我无法使dependentObservable

下面是我的代码

```
<table>
<thead>
    <tr><th>First</th><th>Last</th></tr>
</thead>
<tbody data-bind="foreach: List">
    <tr>
        <td><select data-bind="options: stateList, optionsValue: 'id' ,optionsText: 'name', value: stateId, optionsCaption: 'Choose...'"></select></td>
        <td ><select data-bind="options: cities, optionsCaption: 'Choose...'"></select></td>
    </tr>
</tbody> 
```

js

```
states=[{id:1,name:"MP"},
 {id:2,name:"UP"},
  {id:3,name:"MH"},
  {id:4,name:"AP"},
  {id:5,name:"KP"}

 ];

city=[{cityid:1,name:"Indore"},
 {cityid:1,name:"Gwalior"},
  {cityid:1,name:"Bhopal"},
  {cityid:2,name:"Jhansi"},
 {cityid:2,name:"Kanpur"},
  {cityid:2,name:"Merut"},
  {cityid:3,name:"Pune"},
 {cityid:3,name:"Mumbai"},
  {cityid:4,name:"Hyderbad"},
  {cityid:5,name:"Banglore"},
 {cityid:5,name:"Mysore"}

 ];

viewModel=function(){
self=this;

self.state=ko.observableArray(states);
self.stateId=ko.observable();

self.cityId=ko.observable();
self.cityList=ko.observableArray(city);
self.SelectedCityList=ko.dependentObservable(function(){
    var state=this.stateId();
    var arr=[];
    if(state){
        ko.utils.arrayForEach(this.cityList(),function(item){
            if(item.cityid===state){
             arr.push(item);
            }
        });

    }
return arr;
},this);

self.List=ko.observableArray([{stateList:ko.observableArray(self.state()),cities:self.SelectedCityList,cityList:ko.observableArray(self.cityList()),stateId:ko.observable(),cityId:ko.observable()},
                              {stateList:ko.observableArray(self.state()),cities:this.SelectedCityList,cityList:ko.observableArray(self.cityList()),stateId:ko.observable(),cityId:ko.observable()}
                        ]);

}
ko.applyBindings(new viewModel()); 
```

请帮帮我这是小提琴链接[点击这里](http://jsfiddle.net/Akhlesh/TZBBX/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T23:15:58.800

您需要在整个模型中定义“模型”数组。看看它怎么运作：

```
 states=[{id:1,name:"MP"},
     {id:2,name:"UP"},
      {id:3,name:"MH"},
      {id:4,name:"AP"},
      {id:5,name:"KP"}

     ];

city=[{cityid:1,name:"Indore"},
     {cityid:1,name:"Gwalior"},
      {cityid:1,name:"Bhopal"},
      {cityid:2,name:"Jhansi"},
     {cityid:2,name:"Kanpur"},
      {cityid:2,name:"Merut"},
      {cityid:3,name:"Pune"},
     {cityid:3,name:"Mumbai"},
      {cityid:4,name:"Hyderbad"},
      {cityid:5,name:"Banglore"},
     {cityid:5,name:"Mysore"}

     ];

viewModel=function(){
    self=this;

    self.init = function(statesList, citiesList)
    {
        self.state(statesList);
        self.cityList(citiesList)
    };
    self.state=ko.observableArray(states);
    self.stateId=ko.observable();

    self.cityId=ko.observable();
    self.cityList=ko.observableArray(city);
    self.SelectedCityList=ko.dependentObservable(function(){
        var state=this.stateId();
        var arr=[];
        if(state){
            ko.utils.arrayForEach(this.cityList(),function(item){
                if(item.cityid===state){
                 arr.push(item);
                }
            });

        }
    return arr;
    },this);

}
var model = function(){
var self = this;
    self.List = ko.observableArray([new viewModel(states, city), new viewModel(states, city)]);
};
ko.applyBindings(new model()); 
```

我已将样本移出表格：

```
> <table>
>     <thead>
>         <tr><th>First</th><th>Last</th></tr>
>     </thead>
>     <tbody data-bind="foreach: List">
>         <tr>
>             <td><select data-bind="options: state, optionsValue: 'id' ,optionsText: 'name', value: stateId, optionsCaption:
> 'Choose...'"></select></td>
>             <td ><select data-bind="options: SelectedCityList, optionsValue: 'cityid' ,optionsText: 'name', value: cityId,
> optionsCaption: 'Choose...'"></select></td>
>         </tr>
>     </tbody> </table> 
```

见小提琴：http: [//jsfiddle.net/SeaCat/s56QL/](http://jsfiddle.net/SeaCat/s56QL/)

# java - 为什么休眠会从关联表中删除数据？

> ID：15910757
> 
> 赞同：1
> 
> 时间：2013-04-09T19:23:59.973
> 
> 标签：java, hibernate, annotations, mapping

我的程序中有以下关系：

```
@Entity
@Table(name = "student")
public class Student extends Person {
    private Map<Document, DocumentInfo> documents =
       new HashMap<Document, DocumentInfo>();
    ...
    @OneToMany
    @JoinTable(name = "student_documents",
            joinColumns = @JoinColumn(name = "student"),
            inverseJoinColumns = @JoinColumn(name = "document_info"))
    @MapKeyJoinColumn(name = "document")
    public Map<Document, DocumentInfo> getDocuments() {
        return documents;
    }
    ...
} 
```

当我用他的文档信息保存学生时，一切似乎都很好。当我从数据库中读取他时，一切似乎也很好，但是当我再次尝试读取它时，我有 NullPointerException。我做了一些研究，发现在第一次调用`student.getDocuments()`hibernate 时会从表中删除记录`student_documents`：

```
Hibernate: select document0_.id as id2_0_, document0_.title as title2_0_ from document document0_ where document0_.id=?
Hibernate: select document0_.id as id2_0_, document0_.title as title2_0_ from document document0_ where document0_.id=?
Hibernate: delete from student_documents where student=? 
```

我做错了什么？谢谢

我的测试代码如下所示：

```
 Student student = new Student();
    student.setFirstName("123");
    studentService.add(student);
    Student student2 = studentService.read(student.getId());
    assertFalse(student2.getDocuments().size() == 0); // here it all occurs 
```

服务方式：

```
public Student add(Student student) {
    for (Document document : documentRepository.findAll()) {
        DocumentInfo documentInfo = new DocumentInfo(false, "");
        documentInfoRepository.save(documentInfo);
        student.getDocuments().put(document, documentInfo);
    }
    return studentRepository.save(student);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-18T13:17:08.993

好像我刚刚发现了这个问题。现在无法在我的旧项目中检查它，但它与与[此 hibernate bug](https://hibernate.atlassian.net/browse/HHH-7971)相关的问题非常相似。

# c++ - How to prevent threads from starvation in C++11

> ID：15910759
> 
> 赞同：11
> 
> 时间：2013-04-09T19:24:03.673
> 
> 标签：c++, multithreading, c++11, locking

I am just wondering if there is any locking policy in C++11 which would prevent threads from starvation.

I have a bunch of threads which are competing for one mutex. Now, my problem is that the thread which is leaving a critical section starts immediately compete for the same mutex and most of the time wins. Therefore other threads waiting on the mutex are starving.

I do not want to let the thread, leaving a critical section, sleep for some minimal amount of time to give other threads a chance to lock the mutex.

I thought that there must be some parameter which would enable fair locking for threads waiting on the mutex but I wasn't able to find any appropriate solution.

Well I found std::this_thread::yield() function, which suppose to reschedule the order of threads execution, but it is only hint to scheduler thread and depends on scheduler thread implementation if it reschedule the threads or not.

Is there any way how to provide fair locking policy for the threads waiting on the same mutex in C++11? What are the usual strategies?

Thanks

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-07-03T08:32:25.633

这是互斥锁中的常见优化，旨在避免在同一线程可以再次获取互斥锁时浪费时间切换任务。如果当前线程在其时间片中仍有剩余时间，那么您可以通过让它获取互斥锁而不是挂起它并切换到另一个线程（这可能会导致缓存线的大重新加载和各种其他延迟）。

如果您对互斥锁有太多争论，以至于这是一个问题，那么您的应用程序设计就是错误的。您将所有这些线程都阻塞在互斥体上，因此什么也不做：没有这么多线程您可能会更好。

您应该设计您的应用程序，以便如果多个线程竞争一个互斥锁，那么哪个线程获得锁并不重要。直接争用也应该是一种罕见的事情，尤其是与大量线程的直接争用。

我认为这是一个好的场景的唯一情况是每个线程都在等待一个条件变量，然后将其广播以唤醒它们。然后每个线程都会争夺互斥锁，但如果你这样做是正确的，那么他们都应该快速检查这不是虚假唤醒，然后释放互斥锁。即使这样，这也被称为“雷声”的情况，并不理想，正是因为它序列化了所有这些线程。

# javascript - Add 5 days to the current date using JavaScript

> ID：15910761
> 
> 赞同：0
> 
> 时间：2013-04-09T19:24:08.800
> 
> 标签：javascript, html, datetime, button

I am trying to add 5 days to today's date using JavaScript. I am also trying to add this function into a button so that the result comes in an alert box when I click it, not as soon as I open the page.

I am new to JavaScript and trying very hard to learn.

Any help? Thanks!

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-09T19:26:47.727

声明一个`Date`变量（它将被设置为当前日期/时间）：

```
var dt = new Date(); 
```

增加 5 天：

```
dt.setDate(dt.getDate() + 5); 
```

将以上所有内容放入您的`click`处理程序函数中。就像是：

```
document.getElementById('dateBtn').onclick = function () {
   var dt = new Date();
   dt.setDate(dt.getDate() + 5);
   alert(dt);
}; 
```

[**小提琴示例**](http://jsfiddle.net/ngvRk/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-09T19:27:19.703

```
var date = new Date();          // Get current Date

date.setDate(date.getDate()+5); // add 5 days to the current date 
```

有关详细信息，请参阅[`Date`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T19:55:41.690

JavaScript 以毫秒为单位存储日期和时间。所以，加上 5 天的价值：

```
var fiveDaysLater = new Date(0,0,0,0,0,0,Date.now() + 5 * 24 * 60 * 60 * 1000); 
```

Date.now() 以毫秒为单位返回一个值。然后，日期构造函数 ( ) 使用该值加上五天的毫秒数`new Date`创建一个新的 Date 对象（因此是关键字），并初始化变量。`new``fiveDaysLater`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-09T19:29:45.133

可能有点矫枉过正，但[moment.js](http://momentjs.com/)可能对你有用。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-09T19:32:46.690

创建`Date`实例五天：

```
var fiveDaysLater = new Date( AnyYourDate.getTime() );
fiveDaysLater.setDate(fiveDaysLater.getDate() + 5); 
```

# c# - Simple way of checking if one of three booleans are true

> ID：15910762
> 
> 赞同：-3
> 
> 时间：2013-04-09T19:24:16.020
> 
> 标签：c#, .net, boolean

I've tried using the following code, but as far as I can tell it only checks the first two variables.

```
if (var1 || var2 || var3)
{
    // Do something.
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T19:26:37.920

如果您*需要*评估所有三个，您可以使用：

```
if (var1 | var2 | var3)
{
    // Do something.
} 
```

反而。有这样的需求似乎很奇怪，但假设这三个属性都是吸气剂有副作用的属性......

使用方法可能是：

```
if (DoWork() | DoDuties() | DoFinalStuff())
{
    // At least one method returned true ("success")
} 
```

在任何情况下都会调用所有三个方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-09T19:32:08.140

您的代码正在正确检查三个变量之一是否为真，即

```
var1 || var2 || var3 
```

如果 var1、var2 和 var3 中的任何一个为真，则为真。这里唯一的微妙之处是实际检查是使用短路逻辑执行的：如果 var1 为真，则不会检查 var2 和 var3 等。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-09T20:04:18.640

我觉得其他答案已经涵盖了您需要做的事情，但我想更好地解释正在发生的事情。

`||`or运算符是所谓的`&&`“短路”运算符，如果它找到满足其需要的条件，它将停止检查其他元素（它找到的第一个元素`true`或它找到`||`的第`false`一个元素`&&`）。

所以实际上

```
if(var1 || var2 || var3)
   SomeAction(); 
```

和做的一样

```
if(var1)
    SomeAction();
else if(var2)
    SomeAction();
else if(var3)
    SomeAction(); 
```

如果您只使用`|`而不是`||`它将在返回结果之前评估所有成员，类似于此

```
bool combined = var1;
combined = var2 **OR'ed with** combined; 
combined = var3 **OR'ed with** combined; 

if(combined)
    SomeAction(); 
```

短路的一个非常有用的实际用途是在调用成员或方法之前检查 null。在下面的示例中，假设 var1 是一个可能为 null 的变量，并且您需要在`var1.DataAvailable()`为 true 时执行操作。例如

```
if(var1 != null && var1.DataAvailable())
{
    //do somthing with var1 when data is available
} 
```

是相同的

```
if(var1 != null)
{
    if(var1.DataAvailable())
    {
        //do somthing with var1 when data is available
    }
} 
```

由于短路，您将永远不会得到 a`NullRefrenceException`因为`var1.DataAvailable()`永远不会执行 if `var1`is`null`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T01:46:42.053

没有人提到：

`|`- 二元或
`||`- 逻辑或

让我们假设`a = false` `b = true` `c=false`

`a || b || c`== `true`
`a | b | c`== `0 | 1 | 0`==`1`也具有逻辑“真”值。

# excel - Get code from protected excel doc

> ID：15910764
> 
> 赞同：-3
> 
> 时间：2013-04-09T19:24:28.367
> 
> 标签：excel

Is it possible to get function or script code from a protected excel document? If so, how do I go about doing this?

The file is .xls and was likely created in office 2003

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T21:11:56.463

对于 2007 年，您可以随时购买第三方软件来解锁 VBA 项目。

或者，你可以自己做。我只知道非常混乱的方式 - 将您的文件从 .xlsm 重命名为 .zip，并接受 windows 告诉您这可能会引起麻烦。然后，进入您的新 zip，您将找到您的 .bin 文件（默认名称是 vbaProject.bin，除非原作者更改了它）。将其复制并粘贴到其他位置以保持原始文档完好无损。然后，在记事本 ++ 中打开 bin 文件并耐心地浏览，直到找到代码。即使项目受密码保护，它也会在这里，但可能需要一点耐心。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T20:56:16.537

这取决于它是什么版本的excel文档。较旧的 excel 文档 (2003) 即使被加密也可以轻松访问，但如果您忘记了密码，加密的 2007 excel 文档将更难以打开。

# php - Is this enough to prevent sql injection? (PDO)

> ID：15910765
> 
> 赞同：1
> 
> 时间：2013-04-09T19:24:30.787
> 
> 标签：php, sql, login, pdo, code-injection

apparently the classic sql injection: (' or '1'='1' -- ') does not work on this login, but is it safe enough, and what do you suggest if it's not.

## index.php:

```
<?php

include_once 'includes/connection.php';

if (isset($_POST['login'])){
$username = $_POST['usernameInput'];
$password = md5($_POST['passwordInput']);
$query = $pdo->prepare("SELECT * FROM users WHERE u_n = ? AND u_p = ? ");
$query->bindValue(1, $username);
$query->bindValue(2, $password);
$query->execute();
$rows = $query->rowCount();

if ($rows == 1){
    echo "welcome back";
} else {
    echo "incorrect username or passwrod";
}
}

?>

<html>
<center>
    Login :
    <form action="index.php" method="post">
        <input type="text" name="usernameInput" placeholder="Username" autocomplete="off" />
        <input type="password" name="passwordInput" placeholder="Password" autocomplete="off" />
        <input type="submit" name="login" value="Login" />
    </form>
</center>
</html> 
```

connection.php:

```
<?php
try {
$pdo = new PDO('mysql:host=localhost;dbname=justLove', 'root', 'root');
} catch (PDOException $e) {
exit('cannot connect to database.');
}   
?> 
```

Waiting for your answer :)

# asp.net-mvc - 使用 Nhibernate 限制来自 WebApi 控制器和 ODATA 的服务器端结果

> ID：15910766
> 
> 赞同：7
> 
> 时间：2013-04-09T19:24:31.917
> 
> 标签：asp.net-mvc, linq, nhibernate, asp.net-web-api, odata

我在 VS 2012 中创建了一个 WebApi 项目，使用 NHibernate 作为我的 ORM，我打算在它上面启用 Odata 支持。因此，我创建了一个带有单个 Get 方法的测试控制器，该方法从我的数据库中的表中返回实体列表。

一切正常，我可以使用 OData 过滤和排序我的结果等。问题是我找不到一种方法来限制从数据库返回到控制器的数据量，而这个表有数百万条记录在里面。

使用`PageSize`属性的`Queryable`属性似乎只限制了返回给客户端的数据量，但没有限制从数据库返回的数据量。

我尝试在返回之前在 get 方法内部应用 a `Take(n)`，`IQueryable`它限制了从数据库返回的结果，但它破坏了 OData 过滤，因为如果您尝试查询不在前 n 个结果中的实体，它只是返回一个空集合。

我知道您可以使用`$Top`OData 上的参数来完成此操作，但我不想依赖提供它的客户/消费者，以确保我不会不必要地带来数千甚至数百万条我不会去的记录使用。

我还尝试手动检查客户端是否在查询字符串上提供了 Top 参数，将 OData 转换应用于我的 Queryable，然后将该`Take(n)`方法应用于转换后的查询。这种方法使我能够通过 OData 过滤任何实体，但它会破坏分页，因为如果我使用该`$Skip=n`参数，它会再次返回一个空集合。

那么，有什么方法可以在不破坏 OData 支持的情况下可靠地限制从数据库中获取的结果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T05:09:43.207

我们最近也发现了这一点。当启用服务器驱动的分页时，我们不会应用 Take(pageSize)，因为我们必须确定是否应该生成下一页链接。我们只是枚举 pageSize 个实体的结果集并检查是否有更多实体。我们认为大多数提供者通常会带来部分结果集，因为 IQueryable 通常是一种惰性实现。事实证明这不是真的。此外，如果数据库知道只需要 pageSize 个结果，它可以优化查询。

[这](https://aspnetwebstack.codeplex.com/workitem/901)是为它打开的问题。好消息是优素福已经修好了:)。这是修复它的[提交](https://aspnetwebstack.codeplex.com/SourceControl/changeset/8517d73f5f60ffb3e1c8a590af4695c7bda37709)。所以，如果你抓住每晚的构建，你应该是好的。

# javascript - Firefox 拖放 - 幽灵图像丢失

> ID：15910771
> 
> 赞同：3
> 
> 时间：2013-04-09T19:24:44.957
> 
> 标签：javascript, html, firefox

在使用 HTML5 拖放的 FireFox 中似乎存在一个奇怪的问题。

在 Chrome / Safari 中，被拖动的 HTML 会生成一个幻影图像，但由于某种原因，在 Firefox 中它似乎根本没有出现。

HTML 片段：

```
<div class="task sortable" draggable="true">
    <input type="checkbox" draggable="false">

<div class="what" draggable="false">
Yet another
</div>

<div class="who" draggable="false">

</div>
</div> 
```

jQuery dragstart 事件处理程序中的 JS Snippet：

```
 var target = $(e.target),
                index = this.$('.sortable').index(target);
            this.dragModel = this.collection.at(index);
            e.originalEvent.dataTransfer.effectAllowed = 'move';
            _.defer(_.bind(function() {
                target.after(placeHolderHtml);   
                target.hide(); 
            }, this)); 
```

任何想法为什么 Firefox 不起作用？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T19:41:31.103

没关系，我发现了问题。

似乎 FF 需要在 dataTransfer 对象中设置某种形式的数据。

```
dataTransfer.setData('text', 'junk'); 
```

修复它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-17T17:56:52.263

对于未来的调试器：

显然，负的 text-indent CSS 属性也会导致拖动图像在 Firefox 中消失（但在 Chrome/Safari 中不会）。

# python - 过滤掉重复的表条目

> ID：15910774
> 
> 赞同：2
> 
> 时间：2013-04-09T19:24:52.037
> 
> 标签：python, csv, file-io

我想读入 T1 并将其写为 T2（注意两者都是 .csv）。T1 包含重复行；我不想在 T2 中写重复。

T1

```
+------+------+---------+---------+---------+
| Type | Year | Value 1 | Value 2 | Value 3 |
+------+------+---------+---------+---------+
| a    |    8 | x       | y       | z       |
| b    |   10 | q       | r       | s       |
+------+------+---------+---------+---------+ 
```

T2

```
+------+------+---------+-------+
| Type | Year | Value # | Value |
+------+------+---------+-------+
| a    | 8    | 1       | x     |
| a    | 8    | 2       | y     |
| a    | 8    | 3       | z     |
| b    | 10   | 1       | q     |
| ...  | ...  | ...     | ...   |
+------+------+---------+-------+ 
```

目前，我有这个极其缓慢的代码来过滤重复项：

```
no_dupes = []

for row in reader:
    type = row[0]
    year = row[1]
    index = type,age
    values_list = row[2:]

    if index not in no_dupes:
        for i,j in enumerate(values_list):
            line = [type, year, str(i+1), str(j)]
            writer.writerow(line) #using csv module
            no_dupes.append(index) 
```

当 T1 变大时，我无法夸大这段代码有多慢。

当我写入 T2 时，是否有更快的方法来过滤掉 T1 中的重复项？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T19:46:01.920

我想你想要这样的东西：

```
no_dupes = set()

for row in reader:
    type, year = row[0], row[1]
    values_list = row[2:]

    for index, value in enumerate(values_list, start=1):
        line = (type, year, index, value)
        no_dupes.add(line)

for t in no_dupes:
    writer.writerow(t) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T19:26:56.663

如果可能的话，将阅读器转换为一个集合并迭代该集合，那么就没有重复的可能性

# java - Heroku Java 应用程序是否能够访问外部站点上的资源？

> ID：15910775
> 
> 赞同：0
> 
> 时间：2013-04-09T19:24:55.990
> 
> 标签：java, heroku

我有一个 Java 应用程序可以解析位于外部站点上的一些 XML。据我所知，似乎对任何外部站点的访问都将受到防火墙的限制。

> 防火墙用于限制从外部网络和内部系统之间对系统的访问。默认情况下，所有访问都被拒绝，并且根据业务需要仅允许明确允许的端口和协议。每个系统都根据系统的功能分配到一个防火墙安全组。安全组仅限制对系统特定功能所需的端口和协议的访问，以降低风险。

引用自[https://policy.heroku.com/security](https://policy.heroku.com/security)

有谁知道是否或如何克服这个限制？这些“安全组”是答案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T13:12:18.813

从您的应用程序访问外部站点上的数据完全没有问题。该安全策略是关于如何保护 Heroku 自己的内部基础设施的。这不是对您的应用程序的限制。

# stored-procedures - ASP.NET 找不到存储过程，但存储过程存在

> ID：15910779
> 
> 赞同：0
> 
> 时间：2013-04-09T19:25:04.827
> 
> 标签：stored-procedures, database-connection, aspdotnetstorefront

我正在尝试将稍加修改的 aspdotnetstorefront 版本从 9.0.3 升级到 9.3.0.0。我已经在我的本地机器上安装了商店（Win 7、IIS 7.5、SQL Server 2012）。

当我运行该站点时，我注意到 1) 主页上缺少产品图像，以及 2) 如果我单击转到某个类别或产品，我会看到 InvalidRequest 页面。

当我使用 Visual Studio 2012 在站点上运行调试时，我看到导致无效请求的错误是“找不到存储过程 'dbo.aspdnsf_GetMappedObject'”。（我打算在这里发布屏幕截图，但我没有足够的声望点。）

如果我查看它自己的数据库，我会发现存储过程确实存在。（这里没有屏幕，因为我不允许。）

以上让我怀疑我的数据库连接不正确。如下：

`<add key="DBConn" value="data source=localhost;initial catalog=505916_adn_upgrade;user id=XX;password=XXXXXX;persist security info=True;packet size=4096" />`

但是，我也有一个似乎可以工作的“干净”安装，除了数据库名称、用户、密码之外，它的数据库连接是相同的，这让我认为连接是正确的？

我几乎是所有这些东西的新手，所以任何建议都会非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T20:16:59.963

我终于放弃并重建了整个数据库——我添加了丢失的存储过程，却发现还有更多丢失的存储过程。显然，在设置数据库时出现了问题。它现在在本地工作。

# python - 如何使用bash（或mac上的python）提取文本字符串

> ID：15910784
> 
> 赞同：0
> 
> 时间：2013-04-09T19:25:38.387
> 
> 标签：python, mysql, bash, nlp

如何在 mac 上使用 bash 或 python 将文本文件（示例文本如下）中的用户名提取到 mysql 数据库中？

```
124dave87 10 months ago

:) ...Thank you for making this video.

Reply  ·

kateDVKH 1 year ago
@karluchii19 i'm still trying to figure out who you are?!?

Thanks for replying.
Reply  ·

shotwioke 3 months ago
hey how is everything going with your health-i hope/pray things are going good for you.God bless
Reply  ·   in reply to MrNickkaye (Show the comment) 
```

例如，对于上面的文本文件，脚本会输出以下内容：

```
124dave87    
kateDVKH    
shotwioke 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T19:27:42.227

如果我理解正确，您正在寻找以行首开头并以第一个空格字符结尾的字符串。是对的吗？

如果是这样，最快/最简单的方法可能是：

```
egrep -o "^[^ ]*" 
```

*编辑*（根据您在下面的评论）

你能稍微扩展一下你在这里寻找的东西吗？真正的目的是什么？它可能会帮助我们构建我们的答案......

也就是说，如果您只是想获取唯一用户名列表，您可以尝试：

```
egrep -o "^[^ ]*" | sort | uniq 
```

如果您的架构允许，您还可以向数据库表添加唯一约束。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T19:48:39.673

您可以在 Python 中使用正则表达式。例如：

```
import re

test="""124dave87 10 months ago :) ...Thank you for making this video. Reply ·

kateDVKH 1 year ago @karluchii19? i'm still trying to figure out who you are?!? Reply ·

shotwioke 3 months ago hey how is everything going with? your health-i hope/pray things are going good for you.God bless Reply · in reply to MrNickkaye (Show the comment)
"""

for line in test.split('\n'):
    words = re.findall(r'\w+', line)
    if(len(words) > 0):
        # write words[0] to mysql 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T19:50:52.620

```
grep -E "[0-9]+ (month|year|day|week)s? ago" a.txt| grep -Eo "^[a-zA-Z0-9]+" 
```

我确信这可以使用 awk 或 sed 一步完成

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-09T19:55:54.687

这`awk`可能相对容易理解：

```
awk '$0 ~ " [0-9]+ (month|year|day|week)s? ago" {print $1}' 
```

如果该行包含该模式，则打印第一个单词。管道以`sort | uniq`获取唯一的用户名。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-09T20:00:04.253

这`grep`与前瞻可以给你想要的：

```
 grep -Po '^(\w+)(?=\s\d+\s\w+\sago$)' file 
```

# asp.net - 表单身份验证在不活动后不断注销

> ID：15910788
> 
> 赞同：0
> 
> 时间：2013-04-09T19:25:44.823
> 
> 标签：asp.net, timeout, forms-authentication

在本地运行时，我的网站运行良好。但是，在实时站点上，大约 10 秒不活动后，我不断退出。

我用于身份验证的 Web 配置行如下所示：

```
<forms name="RaiseFLAuthentication" loginUrl="home.aspx" cookieless="UseCookies" defaultUrl="/myPredictions.aspx" timeout="240" slidingExpiration="false"/> 
```

我也试过推杆`<sessionState timeout="30"></sessionState>`，但这也没有奏效。

我遇到的第二个问题是，虽然我已将默认 URL 设置为 myPredictions.aspx，但当我转到 URL www.website.co.uk 并登录时，它不会重定向到这里，它仍然是默认 URL。虽然再次，在本地运行我没有问题。

谁能建议为什么会发生这些事情以及如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T21:28:08.450

以下是我对您的问题的回答：

1）这个有点棘手，因为你提到它在本地工作正常但试试这个（假设你使用的是 InProc 会话模式）：

```
<sessionState mode="InProc" cookieless="true" timeout="30" /> 
```

2）您的 defaultUrl 属性中似乎缺少波浪号（~）。

```
<forms name="RaiseFLAuthentication" loginUrl="home.aspx" cookieless="UseCookies" defaultUrl="~/myPredictions.aspx" timeout="240" slidingExpiration="false" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T21:32:20.397

超时由[sessionState](http://msdn.microsoft.com/en-us/library/h6bb9cz9%28vs.80%29.aspx)元素控制，如果未指定超时，则默认值为 20 分钟，因此如果您得到的只是 10 秒，我会在您的代码中的其他地方查找问题的原因。

关于您的重定向问题。这已经在[这里](https://stackoverflow.com/questions/3106896/defaulturl-loginurl-in-asp-net-web-config)得到了回答。

# applescript - applescript keystroke: right command and right control keys?

> ID：15910789
> 
> 赞同：0
> 
> 时间：2013-04-09T19:25:45.063
> 
> 标签：applescript

In Applescript, how can I send the keystroke for the right control key on the keyboard? How about right command key? Ultimately, I want to right-click in WINE ([winehq's FAQ explains that's not currently possible with ctrl+click](http://wiki.winehq.org/MacOSX/FAQs)). But, it works great via KeyRemap4MacBook, although I need to send the right key.

```
tell application "System Events" to key code ??????? 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-11-13T09:26:52.273

对于正确的控制，它是：

```
tell application "system events"  
key code 62   
end tell 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T08:08:08.707

请参阅 Events.h 或[https://github.com/tekezo/KeyRemap4MacBook/blob/master/src/bridge/generator/keycode/data/KeyCode.data](https://github.com/tekezo/KeyRemap4MacBook/blob/master/src/bridge/generator/keycode/data/KeyCode.data)。

正确的命令应该是 0x36 或 54，但这对我不起作用：

```
delay 1
tell application "System Events" to key code 54 
```

我也尝试添加`__KeyToKey__ KeyCode::COMMAND_R, KeyCode::Q`到 private.xml。即使您使用 KeyRemap4MacBook 更改`tell app "System Events" to key code 0`为其他键，也会插入。`a``a`

# javascript - Not to open a new page when table check box is clicked

> ID：15910794
> 
> 赞同：3
> 
> 时间：2013-04-09T19:25:52.627
> 
> 标签：javascript, jquery, jsf

I have this JavaScript which opens new page when I click on a table row:

```
$(document).ready(function () {
    $('table[id$="dataTable"]').find("tbody").on("click", "tr", function () {
        $(this).find('a[id$="lnkHidden"]').trigger("click");
    }).on("click", 'a[id$="lnkHidden"]', function (e) {
        e.stopPropagation();
    });
}); 
```

The JavaScript is used to call this button:

```
<h:commandLink id="lnkHidden" action="#{bean.pageRedirect}" style="text-decoration:none; color:white; display:none">
        <f:setPropertyActionListener target="#{bean.sessionValue}" value="#{item.value}" />
    </h:commandLink> 
```

The code works well but it turns out that when I select the first column of the table which is a check box I also open a new page. How I can modify the JavaScript not to open a new page when the check box is clicked?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T19:42:26.083

侦听对表格单元格而不是行的点击，然后忽略该单元格是否在第一列中。

坚持使用 jQuery，这可能有效：

```
$(document).ready(function () {
    $('table[id$="dataTable"]').find("tbody").on("click", "td", function () {
        if (this.cellIndex > 0) {
            $(this.parentNode).find('a[id$="lnkHidden"]').trigger("click");
        }
    }).on("click", 'a[id$="lnkHidden"]', function (e) {
        e.stopPropagation();
    });
}); 
```

# java - How to specify 2 log4j files that both have separate class names in the log fiels

> ID：15910795
> 
> 赞同：1
> 
> 时间：2013-04-09T19:25:58.203
> 
> 标签：java, log4j

I am using log4j logging and am trying to log to different log files. I also want to be able to show the class names in the different log files. How do I instantiate my 2 different log files : serverFileLog and clientLogger. I need to pass in the class name so the call to get logger I can't use the logger name. Please HELP|!!!!!! Thank you!!

log4j.rootLogger=DEBUG, serverFileLog

# Server File Log

log4j.appender.serverFileLog=org.apache.log4j.RollingFileAppender log4j.appender.serverFileLog.File=./ServerLog.log log4j.appender.serverFileLog.layout=org.apache.log4j.PatternLayout log4j.appender.serverFileLog.layout.ConversionPattern=%d{yyyy-MM-dd HH:mm:ss} %-5p %c{1}:%L - %m%n log4j.additivity.serverFileLog=false

# Client File Log

log4j.appender.clientLog=org.apache.log4j.FileAppender log4j.appender.clientLog.File=./Client.log log4j.appender.clientLog.layout=org.apache.log4j.PatternLayout log4j.appender.clientLog.layout.ConversionPattern=%d{yyyy-MM-dd HH:mm:ss} %-5p %c{1}:%L - %m%n log4j.category.clientLogger=DEBUG, clientLog log4j.additivity.clientLogger = false

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-29T09:14:21.133

也许现在回答为时已晚，但我刚刚找到了答案。希望它可以帮助你。你应该使用：`Logger.getLogger("clientLogger.ClassName")`而不是`Logger.getLogger("clientLogger")`

# c++ - Boost DateTime: time_duration 从秒到多天

> ID：15910797
> 
> 赞同：2
> 
> 时间：2013-04-09T19:26:03.383
> 
> 标签：c++, datetime, boost

我知道我可以将`boost::gregorian::date_duration`时间间隔用于天数和`boost::posix_time::time_duration`时间间隔，但是是否有一种简单的数据类型可以用于从秒到数天的时间间隔？

的限制（最长持续时间）是`boost::posix_time::time_duration`多少？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T19:30:15.073

“POSIX 时间”通常表示“自 1970 年 1 月 1 日以来的秒数”，如果您使用 32 位值，这在大约 2037 年之前都很好，如果您使用 64 位，则更长。因此，如果不查看 Boost 的确切规格，我不会太担心`boost::posix_time::time_duration`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T19:32:17.497

从[文档中](http://www.boost.org/doc/libs/1_31_0/libs/date_time/doc/BuildInfo.html)：

> 默认情况下，posix_time 系统在内部使用 64 位整数和 32 位整数来提供纳秒级分辨率——每个时间值 96 位。作为替代方案，可以使用单个 64 位整数来提供微秒级分辨率。对于许多不需要纳秒分辨率的应用程序，这种替代实现可以提供更好的性能和更紧凑的内存使用。

和

> build/Jamfile 中定义的变量 BOOST_DATE_TIME_POSIX_TIME_STD_CONFIG 在这些选项之间进行选择。要选择 64 位整数实现，只需从 Jamfile 中删除此定义。

因此，就您而言，DevSolar 的回答最后很好地总结了它。

# web-services - Google 电子表格单元格和 Google 表单输入字段之间的显式对应关系

> ID：15910798
> 
> 赞同：0
> 
> 时间：2013-04-09T19:26:07.343
> 
> 标签：web-services, google-apps-script, google-api, google-sheets, google-drive-api

我正在制作一个网络表单，供人们注册一个活动。我发现我可以使用谷歌表单和谷歌电子表格来完成这项任务，我开始学习如何使用这些网络应用程序。我还想向已注册的人发送自动确认电子邮件。对于这项任务，我也在研究 Google Apps 脚本。据我了解，我应该在电子表格的脚本中定义一个函数来发送电子邮件，并在“表单提交事件”中触发该函数。我想从他/她提交的数据中识别注册人的电子邮件地址，我想在确认电子邮件中包含所有提交的数据以及时间戳。

我的问题如下。

*   如何识别电子表格中存储表单中输入字段值的单元格？
*   或者，有什么方法可以从 Google Apps 脚本中读取各个输入字段的值？

如果您能向我推荐与这些问题相关的明确 API 参考，我会很高兴。

到目前为止，我从 Google Drive 中提供的帮助页面了解了这些应用程序，例如

[https://developers.google.com/apps-script/overview](https://developers.google.com/apps-script/overview)

但是，我觉得那里的文档太简洁了。

我正在学习如何通过此 Google Apps 脚本发送确认电子邮件： [FormSubmissionResponseEmail](https://script.google.com/macros/d/M-jtYOWO8qI1UIjzhEwdgV82RbJKyx0do/edit?uiv=2&tz=Asia/Tokyo&docTitle=Test%20registration%20form%20%28Responses%29&csid=tYGYPCr-WveapgzZUMovJ9w.11490131699430010673.5804975826704061539&mid=ACjPJvE_wH6VeWqvABZHEPJCcM53VNxyPgH_Q8MZrYda7h5eYqCGVh_6TdU08k8oKBs-o_gh75dXjftdLtSSKCoBeacxJiPpZWGjIUlVrbIzjrFIw90&hl=en_US "表单提交响应电子邮件")

我找不到明确关联 Google 表单中的输入字段和 Google 电子表格中的单元格的帮助文档。从我有限数量的实验案例来看，时间戳似乎总是存储在电子表格的第一列中。这是有保证的吗？似乎据说“电子表格表单提交事件”类的“namedValues”成员包含“表单提交中的问题名称和值”。（[https://developers.google.com/apps-script/understanding_events](https://developers.google.com/apps-script/understanding_events)）但是，当我修改 Google 表单时，“namedValues”成员仍保留与已删除输入字段对应的元素。有没有办法只遍历“namedValues”中与用户实际输入的字段相对应的那些元素？

我也很高兴听到有关替代 Google 表单和 Google 电子表格的替代工具。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T02:24:18.193

此答案适用于 2013 版的“新表格”，而不是已停产的“旧表格”。

> 如何识别电子表格中存储表单中输入字段值的单元格？

您可以通过第 1 行中的标签识别将收集表单问题答案的*列*。有了这些知识，您可以在函数中按列号引用答案，例如`getRange()`.

> ...有什么方法可以从 Google Apps 脚本中读取各个输入字段的值？

有多种方法可以引用输入值：

*   正如您在[了解事件](https://developers.google.com/apps-script/understanding_events)中发现的那样，使用由表单提交触发的函数，您可以从事件本身检索输入值。这里有两个选项；你会得到一组`values`数组，`namedValues`你可以使用问题文本作为名称来引用它。

*   您可以从电子表格中读取数据；在前面提到的同一个触发器函数中，您可以使用`e.range.getValues()`获取包含所有提交值的数组，然后您可以通过索引引用该数组。请记住，这将是一个从 0 开始的数组，而列编号从 1 开始。

> 从我有限数量的实验案例来看，时间戳似乎总是存储在电子表格的第一列中。这是有保证的吗？

除非您修改电子表格，否则时间戳将位于第一列。可以在表单创建的数据表的左侧插入列，这将影响您在工作表中找到表单结果的位置（尽管`e.range`会调整）。以下所有值的顺序将是在表单中*创建问题的顺序。*请注意，如果您删除一列（例如，因为您从表单中删除了问题），“已删除”问题的列将在行尾*重新创建。*

> ...当我修改 Google 表单时，“namedValues”成员仍然保存与已删除输入字段对应的元素。有没有办法只遍历与`namedValues`用户实际输入的字段相对应的那些元素？

记住过去的问题是有原因的，尽管当它们不用于收集任何真实数据时它们只是一个麻烦。可以使用更好的计划来避免问题！

未回答的问题将是事件中的空字符串（例如`e.namedValues["Dead Question"] == ''`）。所以你可以像这样跳过它们：

```
for (var ans in e.namedValues) {
  if (e.namedValues[ans] != '') {
    doSomethingWith(e.namedValues[ans]
  }
} 
```

还要注意，您可以获得“标题”数组或表单问题，如下所示：

```
var sheet = SpreadsheetApp.getActiveSpreadsheet();
var headers = sheet.getDataRange().getValues()[0]; 
```

...然后使用搜索`headers`来查找包含您正在寻找的答案的列。

# jquery - 使用 jQuery 读取从 Wikipedia API 返回的 XML

> ID：15910799
> 
> 赞同：0
> 
> 时间：2013-04-09T19:26:07.577
> 
> 标签：jquery, xml, api, mediawiki

JS：

```
$.ajax({
    type: "GET",
    url: "http://en.wikipedia.org/w/api.php?format=xml&action=query&titles=pie&prop=revisions&rvprop=content",
    dataType: "xml",
    success: function(xmlData){
        var totalNodes = $('*',xmlData).length; // count XML nodes
        alert("This XML file has " + totalNodes);
    },
    error: function(){
         alert("Could not retrieve XML file.");
    }
 }); 
```

不知道我的问题是什么；谁能帮忙？我提供的 URL 是 'pie' wiki 页面返回的 XML。您应该能够将其输入浏览器并查看它。但是，当我运行此代码时，我从错误函数中得到警报，而不是成功。任何想法表示赞赏！谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T19:45:56.643

问题出在跨域源策略中，您无法通过获取`xml`文件来解决它。我建议切换到`JSON`，因为`dataType: 'jsonp'`用于跨域请求。您的代码将更改为：

```
$.ajax({
    type: "GET",
    url: "http://en.wikipedia.org/w/api.php?format=json&action=query&titles=pie&prop=revisions&rvprop=content",
    dataType: "jsonp",
    success: function(jsonData){
        //var totalNodes = $('*',xmlData).length; // count XML nodes
        //alert("This XML file has " + totalNodes);
        console.log(jsonData);
    },
    error: function(){
         alert("Could not retrieve data.");
    }
 }); 
```

这样您就不需要解析`xml`，因为您已经获得了 Javascript `Object`。

# jquery - 将元素移动到另一个类

> ID：15910801
> 
> 赞同：0
> 
> 时间：2013-04-09T19:26:09.550
> 
> 标签：jquery, html, jquery-selectors

我正在尝试将 a href 元素移动到 p 元素的末尾。

```
<div class="press-text">
    <h2></h2>
    <h3></h3>
    <p></p>
    <a class="press-file"></a>
</div>
<div class="press-text">
    <h2></h2>
    <h3></h3>
    <p></p>
    <a class="press-file"></a>
</div>
<div class="press-text">
    <h2></h2>
    <h3></h3>
    <p></p>
    <a class="press-file"></a>
</div> 
```

我正在使用以下 jquery

```
$('.press-file').each(function(){
$(this).find('.press-text p').appendTo($(this)); 
```

但是有些东西不起作用。

编辑：我想拥有这个

```
<p><a href="press-file></a></p> 
```

到底。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-09T19:27:44.153

您应该使用最接近的来查找`.press-text`元素，而`append`不是`appendTo`：

```
$('.press-file').each(function(){
    $(this).closest('.press-text').find('p').append(this);
}); 
```

[演示](http://jsbin.com/oyetij/1/edit)（打开控制台查看转换后的 HTML）

# python - 生成器函数只产生第一项

> ID：15910802
> 
> 赞同：2
> 
> 时间：2013-04-09T19:26:11.677
> 
> 标签：python, generator

我有以下格式的一些数据：

```
data = """

[Data-0]
Data = BATCH
BatProtocol = DIAG-ST
BatCreate = 20010724

[Data-1]
Data = SAMP
SampNum = 357
SampLane = 1

[Data-2]
Data = SAMP
SampNum = 357
SampLane = 2

[Data-9]
Data = BATCH
BatProtocol = VCA
BatCreate = 20010725

[Data-10]
Data = SAMP
SampNum = 359
SampLane = 1

[Data-11]
Data = SAMP
SampNum = 359
SampLane = 2

""" 
```

结构是：

1.  `[Data-x]`其中 x 是一个数字
2.  `Data =`其次是`BATCH`或`SAMPLE`
3.  多几行

我正在尝试编写一个为每个“批次”生成一个列表的函数。列表的第一项是包含该行的文本块，`Data = BATCH`列表中的以下项是包含该行的文本块`Data = SAMP`。我目前有

```
def get_batches(data):
    textblocks = iter([txt for txt in data.split('\n\n') if txt.strip()])
    batch = []
    sample = next(textblocks)
    while True:
        if 'BATCH' in sample:
            batch.append(sample)
        sample = next(textblocks)
        if 'BATCH' in sample:
            yield batch
            batch = []
        else:
            batch.append(sample) 
```

如果这样调用：

```
batches = get_batches(data)
for batch in batches:
    print batch
    print '_' * 20 
```

但是，它只返回第一个“批次”：

```
['[Data-0]\nData = BATCH\nBatProtocol = DIAG-ST\nBatCreate = 20010724', 
 '[Data-1]\nData = SAMP\nSampNum = 357\nSampLane = 1', 
 '[Data-2]\nData = SAMP\nSampNum = 357\nSampLane = 2']
____________________ 
```

而我的预期输出将是：

```
['[Data-0]\nData = BATCH\nBatProtocol = DIAG-ST\nBatCreate = 20010724', 
 '[Data-1]\nData = SAMP\nSampNum = 357\nSampLane = 1', 
 '[Data-2]\nData = SAMP\nSampNum = 357\nSampLane = 2']
____________________
['[Data-9]\nData = BATCH\nBatProtocol = VCA\nBatCreate = 20010725', 
 '[Data-10]\nData = SAMP\nSampNum = 359\nSampLane = 1', 
 '[Data-11]\nData = SAMP\nSampNum = 359\nSampLane = 2']
____________________ 
```

我缺少什么或如何改进我的功能？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-09T19:34:17.243

当您找到下一批的开始时，您只会产生一批，因此您永远不会包含最后一批数据。要解决此问题，您将需要在函数结束时使用以下内容：

```
if batch:
    yield batch 
```

然而，仅仅这样做是行不通的。最终`next(textblocks)`循环内部会引发一个`StopIteration`所以`while`循环之后没有代码可以执行。这是一种只需对当前代码进行微小更改即可使其工作的方法（请参阅下文以获得更好的版本）：

```
def get_batches(data):
    textblocks = iter([txt for txt in data.split('\n\n') if txt.strip()])
    batch = []
    sample = next(textblocks)
    while True:
        if 'BATCH' in sample:
            batch.append(sample)
        try:
            sample = next(textblocks)
        except StopIteration:
            break
        if 'BATCH' in sample:
            yield batch
            batch = []
        else:
            batch.append(sample)
    if batch:
        yield batch 
```

我建议只`textblocks`用一个`for`循环来循环：

```
def get_batches(data):
    textblocks = (txt for txt in data.split('\n\n') if txt.strip())
    batch = []
    for sample in textblocks:
        if 'BATCH' in sample:
            if batch:
                yield batch
            batch = []
        batch.append(sample)
    if batch:
        yield batch 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T19:47:11.480

正如@FJ 解释的那样，您的代码的真正问题是您没有产生最后一个值。但是，还可以进行其他改进，其中一些可以更轻松地解决最后值问题。

在我第一次看你的代码时，最让我印象深刻的是两个`if`检查 for 的语句`'BATCH' in sample`，它们可以合并为一个。

这是一个这样做的版本，以及`for`在生成器上使用循环，而不是`while True`：

```
def get_batches(data):
    textblocks = (txt for txt in data.split('\n\n') if txt.strip())
    batch = [next(textblocks)]
    for sample in textblocks:
        if 'BATCH' in sample:
            yield batch
            batch = []
        batch.append(sample)
    yield batch 
```

我在`batch`最后无条件让步，因为没有任何情况可以让你用`batch`empty 到达那里（如果`data`是空的，开始附近的初始化`batch`将 raise `StopIteration`）。

# asp.net-mvc - 即使未经授权，Asp.Net MVC 4 用户也已通过身份验证

> ID：15910803
> 
> 赞同：4
> 
> 时间：2013-04-09T19:26:13.643
> 
> 标签：asp.net-mvc, authentication, authorization

我在我的第一个 MVC 项目中工作，但我遇到了身份验证问题。我有一个登录页面，可以通过我的活动目录正确验证用户。但是，即使经过身份验证，也不是所有用户都有权访问系统，所以我使用 web.config 中的一个部分来检查用户是否有权限。就像是：

```
<authorization>
   <allow users="john,mary,paul,bill,jane,anna" />
   <deny users="*" />
</authorization> 
```

它工作正常，如果没有权限，用户总是被重定向到登录。但是，当我检查用户是否经过身份验证时，结果总是正确的。而且，在登录页面中，我想检查是否必须向已登录和授权的用户显示消息。就像是：

```
@if (User.Identity.IsAuthenticated && User.Identity.IsAuthorized)
{
   @Html.Partial("_Menu");   
} 
```

所以...我该怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T19:29:06.100

身份验证和授权是两个不同的概念。身份验证意味着您知道此人是谁。授权意味着他们拥有特定的权限。

如果您想检查他们是否有权执行某些操作并为他们提供一个按钮或链接来执行该操作（或访问某些数据，无论它可能是什么），那么您必须使用其他方法检查他们是否具有权限方法。有关您的设置的更多细节将有助于更好地回答这个问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T19:38:14.100

要进行身份验证，请检查您的 web.config 是否有此标记：

```
<authentication mode="Forms">//It cannot be "None"
    <forms loginUrl="~/MyLoginURL" timeout="2880" />
</authentication> 
```

在您的登录方法中，对用户进行身份验证，确保您调用了任何 .NET 方法来验证用户的身份，例如：

```
using System.Web.Security;
FormsAuthentication.SetAuthCookie(login, boolean to cookie) // Or others FormsAuthentication methods that authenticate. 
```

System.Web.Mvc 中有一个 AuthorizeAttribute，可以与您的操作或控制器一起使用，例如：

```
[Authorize]
public ActionResult Index()
{ ... } 
```

或者

```
[Authorize]
public class HomeController 
{ ... } 
```

此 AuthorizeAttribute 将检查当前用户是否已授权。您可以通过继承 AuthorizeAttribute 并覆盖 OnAuthorization 和 AuthorizeCore 创建自己的属性

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-09T20:20:47.037

一旦您执行成功登录 ( `FormsAuthentication.SetAuthCookie`)，您的用户就会获得身份验证，因此直到您没有明确注销 ( `FormsAuthentication.SignOut`)，这是正确的行为，因为所述身份验证和授权是两件不同的事情。

我想您只想向已通过 AD 身份验证的用户显示菜单，在这种情况下，您可以通过以下方式限制您的资源：

```
@if (User.Identity.IsAuthenticated)
{
   @Html.Partial("_Menu");   
} 
```

如果获得授权，用户也会通过身份验证，因此无需进行双重检查。然后，您可以使用`[Authorize]`依赖于`User.Identity.IsAuthorized`.

当您可以使用角色对用户进行分组时，授权会派上用场。检查您的 ADusers 是否属于任何组，如果是，您可以执行以下操作：

```
<authorization>
  <allow users="*" allow role="yourdomain\yourgroup" />
  <deny users="*" />
</authorization> 
```

# mysql - MySQL：排除至少出现 1 次特定字段值的所有用户

> ID：15910809
> 
> 赞同：0
> 
> 时间：2013-04-09T19:26:31.627
> 
> 标签：mysql

我正在尝试创建一个 MySQL 报告，其中仅包含学生用户而不是任何其他课程的教师。有时，用户可以是一门课程的学生和另一门课程的老师。我想从我的报告中完全排除该用户。

```
User Table
userid   username
  1        Bob
  2        John
  3        Sally
  4        Suzy

Courses Table
courseid   coursename
  100      Geometry
  101      Literature
  102      Spanish

Enrollments Table
userid   courseid   role
   1        100     student
   1        101     teacher
   2        100     student
   2        102     student
   3        101     student
   3        102     student
   4        100     student
   4        102     teacher 
```

所需的输出将是：

```
username    coursename     role
  John        Geometry     student
  John        Spanish      student
  Sally       Literature   student
  Sally       Spanish      student 
```

Bob 和 Suzy 不会被包括在内，因为他们至少在一门课程中担任教师角色。

```
SELECT u.username, c.coursename, e.role
FROM enrollments e
JOIN users u ON user.userid = e.userid
JOIN courses c ON c.courseid = e.courseid
WHERE e.role = 'student' 
```

...不够具体，因为它将包括 Bob 和 Suzy 在他们是学生的地方的注册。

我想我应该以某种方式使用子连接，但这超出了我迄今为止编写的任何查询。谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T19:29:32.577

试试这个：

```
 select u.username,c.coursename,e.role
    from User as u
    inner join Enrollments as e
    on u.userid=e.userid
    inner join Courses as c
    on c.courseid=e.courseid
    -- where `condition` 
```

使用`Inner Join`而不是常规`JOIN`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T19:37:13.660

尝试

```
SELECT u.username, c.coursename, e.role
FROM enrollments e
JOIN users u ON user.userid = e.userid
JOIN courses c ON c.courseid = e.courseid
WHERE u.userid NOT IN (SELECT DISTINCT userid FROM enrollments WHERE role = 'teacher') 
```

# jquery - 为什么我的“ScrollSpy”函数中导航的最后一个子项返回未定义的值？

> ID：15910813
> 
> 赞同：0
> 
> 时间：2013-04-09T19:26:55.313
> 
> 标签：jquery, scroll, scrolltop

我有一个我们以前都见过的导航菜单，即根据当前滚动位置添加/删除一个类。

到目前为止，一切都运行得很好，但是内容和导航中的最后一个“部分”都返回了一个未定义的值，而其余部分的行为是正确的。

这是舞台网站的链接。

[http://sites.atjayjo.com/cozy-two/frequently-asked-questions.php](http://sites.atjayjo.com/cozy-two/frequently-asked-questions.php)

这是我正在使用的 JQuery：

```
var $sections = $('hgroup');
var $sectionsHead = $('hgroup h2');
var $navs = $('.faq-sidebar a');

var topsArray = $sections.map(function(){
    return $(this).position().top + 238;
}).get();

var len = topsArray.length;
var currentIndex = 0;

var getCurrent = function( top ) {
    for(var i = 0; i < len; i++) {
        if (top > topsArray[i] && topsArray[i+1] && top < topsArray[i+1] ) {
            return i;
        }
    }
};

$(window).scroll(function(e){
    var scrollTop = $(this).scrollTop();
    var checkIndex = getCurrent(scrollTop);;
    if (checkIndex !== currentIndex) {
        currentIndex = checkIndex;
        $navs.eq(currentIndex).addClass('active').siblings('.active').removeClass('active');
        $('hgroup h2').removeClass('active');
        $sectionsHead.eq(currentIndex).addClass('active');
        // console.log(alert(currentIndex));
    }
}); 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T22:30:49.887

问题在

```
if (top > topsArray...) 
```

由于表达式的评估而导致的行。

将行更改为：

```
if  ( top > topsArray[i] && (!topsArray[i+1] || top < topsArray[i+1]) ) 
```

并将其评估为三元表达式可以解决此问题。

# c# - 在 silverlight 中刷新似乎是文本框

> ID：15910815
> 
> 赞同：0
> 
> 时间：2013-04-09T19:26:59.087
> 
> 标签：c#, silverlight, windows-phone-7

似乎有一些类似于`txtBox.Text.Refesh()`Windows Phone 的命令？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T12:03:03.663

在我给出答复之前......正如 HighCore 在评论中所建议的那样——**你可能做错了**——你可能应该改变你的工作方式以更好地适应框架。那说..

您可以通过多种方式做到这一点，但这里有两种相当简单的方法。

1.  选项1：花哨的方式。

下载并安装异步 CTP。这将允许您使用 async/await 语义。

做这样的事情：

```
async void Button_Click()
{
for (int i = 0; i < 100; i++)
{
textbox.Text = i.ToString();
await Task.Delay(1000);
}
} 
```

1.  选项 2：Good'ol 方式。

如果您不想安装异步 CTP，请按以下方式重构代码：

```
void Button_Click()
{
  int i = 0;
  var t = new DispatcherTimer();
  t.Interval = TimeSpan.FromSeconds(1);
  t.Tick += (s, e) => { textbox.Text = i.ToString; i++; if (i == 20) t.Stop(); };
  t.Start();
} 
```

请注意，当此代码运行时，您的应用会保持响应状态，这意味着人们可能会激活您不希望他们激活的代码。

# svn - Jenkins Subversion 插件凭据错误

> ID：15910816
> 
> 赞同：5
> 
> 时间：2013-04-09T19:27:05.233
> 
> 标签：svn, authentication, jenkins, jenkins-plugins

我已经配置了一个 Jenkins 项目以使用我的 Subversion 存储库，但是在通过 Jenkins 界面输入正确的凭据（并成功验证）后，subversion 插件显然没有找到凭据。

这是我得到的错误：

> 无法访问 https://... : svn: E200015: OPTIONS ... failed org.tmatesoft.svn.core.SVNCancelException: svn: E200015: OPTIONS ... failed ... 原因：org.tmatesoft.svn .core.SVNCancelException: svn: E200015: 没有凭证可以尝试。身份验证失败...

我查看了 Jenkins 文件夹，文件**hudson.scm.SubversionSCM.xml**包含预期的凭据。

奇怪的是我使用 TortoiseSVN 手动输入了凭据，这些凭据保存在我的 AppData...\Subversion\auth\svn.simple 中，然后 Jenkins 可以连接到 repo。但我不想对每个存储库都这样做。在我看来，Jenkins 插件首先在 svn 文件夹而不是 Jenkins 目录中查找凭据。

感谢您的意见和帮助。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-06-12T18:41:01.700

正如上面[评论](https://stackoverflow.com/questions/15910816/jenkins-subversion-plugin-credentials-error#comment43625069_15910816)中提到的，Jenkins Subversion 插件用于识别其关联凭据的方法已在 2.0 及更高版本中更改。

将插件升级到当前版本。然后，Jenkins 应该成功连接到您的各种存储库，而无需您手动输入它们（通过 TortiseSVN）。

# unix - 如何在 unix 中获取已终止进程的返回码？

> ID：15910817
> 
> 赞同：0
> 
> 时间：2013-04-09T19:27:05.350
> 
> 标签：unix, process, kill, sigterm

我有一个 bash 脚本，我通过将 SIGTERM 信号发送到它的进程 ID 来终止正在运行的进程。但是，我想知道我刚刚发送信号的进程的返回码。

那可能吗？

我不能使用“等待”，因为要杀死的过程不是从我的脚本开始的，而且我收到“pid ##### 不是这个 shell 的孩子”

我在命令行中进行了一些测试，在运行进程的控制台中，在我发送 SIGTERM 信号（从另一个控制台）之后，我检查了退出代码，它是 143。我想从不同的脚本中终止进程并抓住那个号码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T02:28:26.847

正如[shellter](https://stackoverflow.com/users/620097/shellter)`wait`所说，除了使用(or , etc...)之外，您无法获得进程的退出代码，`waitpid()`并且只有当您是其父级时才能这样做。

但即使你可以，想想这个：

当您向进程发送 SIGTERM 时，只会发生以下三种情况之一：

*   该进程尚未为​​ 安装任何信号处理程序`SIGTERM`。在这种情况下，它会因信号而立即死亡。但在这种情况下，退出代码是无趣的——你已经知道它是什么了。在大多数平台上，它是 143（128 + 的整数值`SIGTERM`），不出所料，表明进程由于`SIGTERM`.

*   该进程已配置`SIGTERM`为被忽略。在这种情况下，什么都不会发生，进程不会死掉，因此无论如何也没有退出代码可以获取。

*   该进程已为`SIGTERM`. 在这种情况下，将调用处理程序。处理程序可能会做任何事情：可能什么都不做，可能立即退出，可能执行一些清理操作并稍后退出，可能完全不同。即使进程确实退出了，这也只是信号的间接结果，并且会在以后发生，因此没有退出代码可以直接从信号的传递中获得。

# python - 在 python 子进程中从 fd#3 读取

> ID：15910818
> 
> 赞同：1
> 
> 时间：2013-04-09T19:27:10.153
> 
> 标签：python, debian, subprocess

我正在为 Debian 的 debootstrap 实用程序编写一个 python 前端。Debootstrap 可以输出进度信息，但如果[文件描述符#3 打开，它就会输出进度信息，并且它会写入这个 fd](http://anonscm.debian.org/gitweb/?p=d-i/debootstrap.git;a=blob;f=debootstrap;h=f3361643640fcb5b887a4f8dac84a3f05aa63935;hb=HEAD#l141)。

我找到[了一些提示](https://github.com/dankamongmen/sprezzos-world/blob/master/packaging/base-installer/run-debootstrap.c#L148)，但我不明白如何在 Python 中做到这一点。

如何在 Python 中创建 fd#3、运行 debootstrap 子进程并从 fd#3 中读取？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T19:49:17.300

我认为您需要使用低级操作系统 API 在 fd 3 上设置管道，例如：

```
import os, sys

# No other fds have been opened, so the lowest available are used (3, 4)
read, write = os.pipe()

# We want the child to write into fd#3, but right now that's the read
# end of the pipe, so do a little switching around:
temp = os.dup(read)
os.dup2(write, read)
os.dup2(temp, write)
os.close(temp)
read, write = write, read # swap actual values to avoid confusion

pid = os.fork()
if pid == 0: # child
   os.close(read)
   try:
       os.execl('/bin/bash', 'bash', '-c', 'echo testing...>&3')
   except OSError:
       sys.exit(1)
else: # parent
   os.close(write)
   progress = os.fdopen(read)
   print progress.read()
   os.wait() 
```

基本上，创建管道，并交换读/写端，以便写端位于 fd#3 上（将使用最低的可用 fd，因此请确保您尚未打开任何其他 fd）。

然后，分叉并关闭父子节点中适当的管道末端。然后我们可以在孩子中执行目标，在我`bash`的例子中。然后，在父级中，我们可以在管道的读取端构建一个普通的类似文件的对象，并继续处理它，而不用担心低级 API。

如果您在管道的读取端设置，则可能可以使用该`subprocess`模块`FD_CLOEXEC`，但您仍然需要进行低级调用来设置管道，因此这样做没有太大的收获。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T11:30:07.363

这里是：

```
import os, sys

read, write = os.pipe()

pid = os.fork()
if pid == 0: # child
   os.close(read)
   os.dup2(write, 3)
   os.close(write)
   try:
       os.execl('/bin/bash', 'bash', '-c', 'for f in 1 2 3 4 5 6 7 8; do echo testing...>&3; sleep 1; done')
   except OSError:
       sys.exit(1)
else: # parent
   os.close(write)
   progress = os.fdopen(read)
   while True:
       l = progress.readline()
       if l:
           print l
       else:
           break 
```

# xcode - Xcode 从 NSNotification 检索 userInfo

> ID：15910822
> 
> 赞同：1
> 
> 时间：2013-04-09T19:27:22.663
> 
> 标签：xcode, substring, nsnotificationcenter

我有一个带有 userInfo 的 aNotification 我想用另一种格式调用另一种方法。有没有办法从 [aNotification userInfo] 中检索字符串并修改它？userInfo 的格式如下： { action = "the string I'd like to use"; 我确实喜欢这个（而且它几乎可以工作），但我觉得有更好的方法来做同样的事情。

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(playClicked:) name:kNotificationActionTapped object:nil];    

 ..................

-(void)playClicked:(NSNotification *)aNotification {
NSLog(@"Notification=%@", [aNotification userInfo]);

SBJsonWriter *jsonWriter = [[SBJsonWriter alloc] init];

NSString *jsonString = [jsonWriter stringWithObject:[aNotification userInfo]];

[jsonWriter release];

NSString * string1 =  [jsonString substringFromIndex:11];
NSString * string2 = [string1 substringToIndex:[watch length] -2];

NSLog(@"string=%@", string1);
NSLog(@"string=%@", string2);

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T19:32:01.093

`userInfo`是一个 NSDictionary。使用标准的 NSDictionary 方法。

```
NSString *aString = [aNotification.userInfo objectForKey:@"action"]; 
```

# nlog - NLog 仅在第一次出现在 RichTextBox 中

> ID：15910824
> 
> 赞同：0
> 
> 时间：2013-04-09T19:27:31.197
> 
> 标签：nlog

我有一个带有富文本框（LogView）的winform，我的配置设置为登录到该文本框。当我从另一个表单打开 LogView 时，第一次开始记录一切都很好。当我再次尝试打开 LogView 进行第二次运行时，富文本框中没有显示任何内容。

来电代码

```
 private void button1_Click(object sender, EventArgs e)
    {
        LogView frm = new LogView();
        frm.Show(this);
        NLog.Logger logger = NLog.LogManager.GetLogger("");
        logger.Info("FORM 2 LOG");
    } 
```

日志查看代码

```
 private void LogView_Load(object sender, EventArgs e)
    {
        try
        {
            var logger = LogManager.GetLogger("");
        }
        catch (Exception exception)
        {
            Console.WriteLine(exception);
        }            //logger.Debug("test");
        backgroundWorker1.RunWorkerAsync();
    }

    private void backgroundWorker1_DoWork(object sender, DoWorkEventArgs e)
    {
        BackgroundWorker worker = sender as BackgroundWorker;

        for (int i = 1; (i <= 100); i++)
        {
            // Perform a time consuming operation and report progress.
            System.Threading.Thread.Sleep(500);
            var logger = LogManager.GetLogger("");
            logger.Debug("i = " + i.ToString());
        }
    } 
```

有趣的是，即使内置的 NLog 表单第二次也无法使用这种方法。

我正在使用版本 2.0.1.0 .NET 4.5

配置

```
<nlog autoReload="true">
<targets>
  <target name="richTextBox"
          type="RichTextBox"
          controlName="richTextBox1"
          formName="LogView"
          useDefaultRowColoringRules="false"
          layout="${date} ${level} ${logger} ${message}"/>
</targets>
<rules>
  <logger name="*" minlevel="Trace" writeTo="richTextBox"/>
</rules>
</nlog> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T08:30:05.603

这是由 NLog 查找 RichTextBox 的方式引起的。
首次加载配置时（第一次需要 Logger），RichTextBox 目标被初始化，这意味着 RichTextBox 被定位并且目标设置存储在缓存中。这意味着第二次加载表单时引用将是错误的。

这与[https://github.com/NLog/NLog/issues/133](https://github.com/NLog/NLog/issues/133)中描述的问题有关。

更新：您应该能够通过调用清除缓存：

```
LogManager.Configuration.ReconfigExistingLoggers(); 
```

但请记住，这是一项昂贵的手术

# c - 指向 C 中字符串的字符数组的指针

> ID：15910829
> 
> 赞同：1
> 
> 时间：2013-04-09T19:27:44.583
> 
> 标签：c, arrays, pointers, char

我在一次入门级职位的面试中被问到这个问题，并且对为什么需要两个指针感兴趣。这是一个电话采访，他让我写下来

字符 **a[5]

并问我这是什么？

他告诉我这是一个指向 5 个字符数组的指针，以便生成一个 5 个字符的字符串。我只是想了解为什么它是 char **a[5] 而不是 char *a[5]。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T19:29:25.843

如果你应用左右阅读规则... a 是一个由五个指针组成的数组，指向一个指向 char 的指针。

# model-view-controller - Telerik Openaccess ORM 扩展领域模型

> ID：15910830
> 
> 赞同：1
> 
> 时间：2013-04-09T19:27:45.093
> 
> 标签：model-view-controller, telerik, telerik-mvc, telerik-open-access

我是 Telerik OpenAccess ORM 的新手，并使用数据库优先方法用于 MVC 项目。我在他们的网站上浏览了这个关于模型的教程视频： [http ://tv.telerik.com/watch/orm/building-a-mvc-3-application-database-first-with-openaccess-creating-model?seriesID= 1529](http://tv.telerik.com/watch/orm/building-a-mvc-3-application-database-first-with-openaccess-creating-model?seriesID=1529)

我很想知道如何从 Modal 扩展域类和查询数据库？例如，我有一个生成的“Person”类，我正在使用以下类对其进行扩展：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;

namespace MVCApplication
{
    public partial class Person
    {
        public string PersonName
        {
            get
            {
                return this.FirstName + " " + this.LastName;
            }
        }
    }
} 
```

这与上面视频中显示的示例非常相似。我很好奇是否可以从满足特定条件的 Person 表或 Person 对象集合中检索所有记录？我的“退货”查询将如何？我在这个扩展的模型类中没有可用的 dbContext :(

```
public List<Person> GetAllPeople()
{
// return List here
}

public List<Person> GetAllPeopleFromLocationA(int locationID)
{
//return List here
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T08:48:59.393

一般来说，域类并不意味着查询数据库，我建议您在域上下文的部分类中添加*GetAllPeople*和*GetAllPeopleFromLocationA方法，如下所示：*

```
public List<Person> GetAllPeople()
{
    return this.People.ToList();
}

public List<Person> GetAllPeopleFromLocationA(int locationID)
{
    return this.People.Where(p => p.LocationID == locationID).ToList();
} 
```

那么您可以使用以下方法：

```
using (YourContextName context = new YourContextName())
{
    foreach (Person person in context.GetAllPeople())
    {
        // you could access your custom person.PersonName property here
    }

    foreach (Person person in context.GetAllPeopleFromLocationA(someLocationID))
    {
        // you could access your custom person.PersonName property here
    }
} 
```

# javascript - 处理登录的用户模型并在主干 js 中查看

> ID：15910832
> 
> 赞同：0
> 
> 时间：2013-04-09T19:27:53.277
> 
> 标签：javascript, backbone.js

我的主干应用程序中有一个登录表单，我想显示一个包含用户状态的视图。我的登录视图如下所示：

```
var LoginView = Backbone.View.extend({
    el: $("#login-form"),
    events: {
        'click button': 'login',
    },
    initialize: function () { },
    login: function (event) {
        var self = this;
        event.preventDefault();
        var url = '/api/auth/login';
        $.ajax({
            url: url,
            type: 'POST',
            data: this.$el.serialize(),
            success: function () {}
        });
    }
}); 
```

保存用户对象、显示登录状态视图并在页面重新加载时恢复它的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T21:30:31.100

整个过程看起来是这样的。

1.  用户点击网站。
2.  创建 userSession 模型并将其分配给应用程序范围`App.currentUser = new App.Models.UserSession()`
3.  使用 currentUser 获取`App.currentUser.fetch()`
4.  根据返回，如果存在用户会话，则显示用户信息。否则，显示登录视图。
5.  登录视图逻辑，在成功回调中。`App.currentUser.set(response)`

# android - greenDAO 生成器给出了没有意义的控制台错误

> ID：15910833
> 
> 赞同：5
> 
> 时间：2013-04-09T19:27:55.403
> 
> 标签：android, greendao

总的来说，我对 Android 开发还很陌生，而且我什至从未使用过 greenDAO。但是在花了很多时间研究我的生成器类（我在其中建模我的实体）之后，我终于能够生成一些看起来类似于 GitHub 上给出的示例的东西。

```
import de.greenrobot.daogenerator.DaoGenerator;
import de.greenrobot.daogenerator.Entity;
import de.greenrobot.daogenerator.Property;
import de.greenrobot.daogenerator.Schema;
import de.greenrobot.daogenerator.ToMany;

public class simbalDAOgen {

public static void main(String[] args) throws Exception {
    Schema schema = new Schema(1, "com.bkp.simbal"); //Schema(Int version, String package name)
    addCBTrans(schema); //Add the entities to the schema
    new DaoGenerator().generateAll(schema, "../Simbal/src-gen", "../Simbal/src-test"); //Generate DAO files
}

private static void addCBTrans(Schema schema){
    Entity checkbook = schema.addEntity("Checkbook");
    checkbook.addIdProperty();
    checkbook.addStringProperty("name").notNull();
    checkbook.addDateProperty("dateModified");
    checkbook.addStringProperty("balance"); // Use a string property because BigDecimal type should be used for currency

    Entity transaction = schema.addEntity("Transaction");
    transaction.setTableName("TRANS"); // "TRANSACTION" is a reserved SQLite keyword
    transaction.addIdProperty();
    transaction.addStringProperty("name");
    transaction.addStringProperty("category");
    Property transDate = transaction.addDateProperty("date").getProperty();
    transaction.addStringProperty("amount"); // Again use string for BigDecimal type
    transaction.addStringProperty("notes");
    Property cbName = transaction.addStringProperty("cb").notNull().getProperty(); //What checkbook the transaction is in

    ToMany cbToTrans = checkbook.addToMany(transaction, cbName); //Actually ties the transactions to their correct checkbooks
    cbToTrans.setName("Transactions");
    cbToTrans.orderAsc(transDate);
}       
} 
```

然后，我将代码作为 java 应用程序运行以生成我的 DAO 文件，就像 greenDAO 上的文档所说的那样。文件已成功生成，但是我在 Eclipse 的控制台中确实得到了这一行：

```
Warning to-one property type does not match target key type: ToMany 'Transactions' from Checkbook to Transaction 
```

由于文件已生成，我真的不确定是否需要担心。但我不明白的是，当我使用“对多”关系时，为什么会提到“一对一”关系，正如我的代码中所见。（支票簿实体中可以有许多交易实体，我打算使用每个支票簿实体的名称将交易与它联系起来。）

我需要返回并修复我的部分代码吗？请询问我是否需要澄清任何事情，并感谢您的时间！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-10T19:55:32.427

查看 greenDAO 为我生成的文件后，我找到了解决问题的方法。在我看来， addToMany() 方法期望将 Long 属性传递给它，而我使用的是 String 属性。所以我在生成器代码中更改了这两行：

```
Property cbName = transaction.addStringProperty("cb").notNull().getProperty();

ToMany cbToTrans = checkbook.addToMany(transaction, cbName); 
```

对此：

```
Property checkbookId = transaction.addLongProperty("checkbookId").notNull().getProperty();

ToMany cbToTrans = checkbook.addToMany(transaction, checkbookId); 
```

这解决了我的问题。我的印象是我可以使用任何类型的属性将交易与支票簿联系起来，所以我尝试使用支票簿名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-15T14:40:38.867

似乎 GreenDao 只接受类型 Long 作为外键

# css - css填充顶部在chrome中不起作用

> ID：15910837
> 
> 赞同：1
> 
> 时间：2013-04-09T19:28:12.697
> 
> 标签：css, google-chrome, margin

我正在尝试构建一个在 Firefox 中运行良好但在 chrome 中填充顶部不起作用的导航，这是我的链接：

[http://yesiamprimary.com/heather/](http://yesiamprimary.com/heather/)

谁能帮我确定如何在 Chrome 中使用它。

# sql - 对波斯语单词使用 Like 语句

> ID：15910839
> 
> 赞同：3
> 
> 时间：2013-04-09T19:28:20.697
> 
> 标签：sql, sql-server-2008

当我使用 Like 语句时，我在 SQL2008 R2 中遇到波斯字母问题......我可以搜索所有世界......甚至 'ی' 和 'ک' 并且我有一些结果，但问题类似于用于的字体插入数据...我的意思是当我像下面这一行一样输入单词“ک”时，我有 26 个结果：

> Select * from EntityMethod where NamePersian like N'%带%'

当我像下面这一行一样输入单词'ك'时，我有3个结果：

> Select * from EntityMethod where NamePersian like N'%ك%'

事实上，'ک' 和 'ك' 是完全相同的词，只是它们的字体不同。同样的问题是上面所有的'ی'......我不知道，也许不是因为他们的字体实际上我不知道如何解决这个问题......

不管怎么说，还是要谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T10:26:52.277

我自己找到了：D...这个问题没有解决方案，但是在遇到'ك'和'ک'一起遇到这种情况时，将所有数据库的数据（文本数据）转换为相同的格式'ک'......这个问题当波斯字母处于错误位置并且键盘上的键处于错误位置时会发生...也可以通过将组件添加到 Windows 中的“system32”文件夹来解决此问题

# java - 加载内容 懒洋洋

> ID：15910848
> 
> 赞同：3
> 
> 时间：2013-04-09T19:29:01.770
> 
> 标签：java, jsf, jstl, lazy-loading

`<div>`是否可以在具有`<forEach>`循环的情况下实现实时滚动或延迟滚动。我在 a 中有以下代码`<div>`，我想懒惰地加载内容。

```
<div class="update" id="update">

                    <c:forEach var="p" items="#{statusBean.statusList}"
                        varStatus="loop">
                        <h:form>
                            <c:if test="${p.statusmsg!=null}">
                                <div class="status">
                                                                //content
                                </div>
                            </c:if>
                        </h:form>
                    </c:forEach>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T20:43:41.773

JSTL 和 EL 都只能在页面的视图构建期间进行（这是由服务器完成的）。Ajax 请求不是视图构建时间的一部分，因为它们位于客户端浏览器中，因此 JSTL 和 EL 无法处理 ajax 请求。尽管如此，您仍然可以使用带有普通 servlet 的 ajax，如下所述：[如何使用 Servlets 和 Ajax？](https://stackoverflow.com/q/4112686/1065197)

由于您在代码中使用 JSF（基于使用延迟评估表达式，如`#{statusBean.statusList}`and `<h:form>`）并假设您使用 JSF 2+，[OmniFaces](http://omnifaces.org)展示中有一个很好的示例：[`<o:componentIdParam>`](http://showcase.omnifaces.org/components/componentIdParam)，**可扩展列表**示例显示您可以进行 ajax 调用到`@RequestScoped`托管 bean 并检索 JSON`String`并使用它来更新客户端上的值，例如 HTML dom。

基于[此答案](https://stackoverflow.com/a/8123681/1065197)的实时滚动示例：

```
$(window).scroll(function(){
    if  ($(window).scrollTop() == $(document).height() - $(window).height()){
       loadNewData();
    }
});

function loadNewData(){
    /* add code to fetch new content and add it to the DOM */
} 
```

# javascript - 使用 Bootstrap Carousel 显示目录中的文件

> ID：15910850
> 
> 赞同：0
> 
> 时间：2013-04-09T19:29:06.660
> 
> 标签：javascript, twitter-bootstrap, carousel

我是 JavaScript 新手，开始尝试使用 Bootstrap Carousel。当我手动创建轮播项目时，我编写了可以工作并显示图像的测试代码，例如

```
 <div id="myCarousel" class="carousel slide" data-interval="false">
    <div class="carousel-inner">
      <div class="item active">
        <img src="img/1.jpg"/>
      </div>
      <div class="item">
        <img src="img/2.jpg"/>
      </div>
      <div class="item">
        <img src="img/3.jpg"/>
      </div>
    </div><!-- .carousel-inner -->
  </div><!-- .carousel --> 
```

但是，我想做的是指定一个本地目录并能够自动加载和查看那里的图像，即自动创建轮播项目列表。

我的问题是：

*   如何使用脚本来做到这一点，例如使用 perl 或 python 来获取目录中的文件列表？如何将此列表传递给 JS 中的 Carousel？
*   谷歌搜索，我发现 HTML5 有一个 File API，可以让 JS 访问本地文件系统。如何使用这种方法完成上述操作？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T21:09:27.777

只需使用您选择的语言循环读取目录的内容并输出 HTML。

例如在python中

```
import os
dirname = 'img'
html = '<div id="myCarousel" class="carousel slide" data-interval="false">\n\t<div class="carousel-inner">'
active = "active"
for filename in os.listdir(dirname):
    if ".jpg" in filename:
        html = html + '\n\t\t<div class="item %s"><img src="%s"/></div>' % (active, dirname + "/" + filename)
        active = ""
html = html + '</div><!-- .carousel-inner -->\n</div><!-- .carousel -->' 
```

那么显然你需要对 html 变量做一些事情，比如将它写入文件

# java - Wicket Link 自动持久化对象，而 AjaxLink 不会

> ID：15910851
> 
> 赞同：0
> 
> 时间：2013-04-09T19:29:08.403
> 
> 标签：java, hibernate, jpa, wicket

我在一个项目中使用 Wicket、JPA+Hibernate

我有这样的持久性课程

```
@Entity
@Table(name = "document", uniqueConstraints = { @UniqueConstraint(columnNames = {
    "name"}) })
public class Document
implements Serializable
{

private static final long serialVersionUID = 8496087166198616020L;

@Id
@GeneratedValue
private long id;

@Column(nullable = false)
private String name;

@Column(nullable = false)
private String state;
.....
 Geter && setters 
```

然后

我有用于 crud 操作的 dao 实现

一种方法是

```
@Override
@Transactional
public void createDocument(Document aDocument)
{
        entityManager.persist(aDocument);
} 
```

我的问题是，在 wicketPage 中，如果我使用 Wicket Link 并且它的 onclick 方法执行以下操作

```
 document.setState("someState"); 
```

它在不专门调用 createDocument(document) 的情况下更新值，并且数据库也是最新的

但是如果我使用 AjaxLink 及其 onclick 方法

然后，我必须手动更新对象，否则数据库中的值将不会更新。我的修改应该如下：

```
@Override
@Transactional
public void createDocument(Document aDocument)
{
        if(aDocument.getId()==0{
        entityManager.persist(aDocument);
        }
       else{
          entityManager.merge(aDocument);           
} 
```

然后要保存数据库中的更改，我必须首先更新状态和调用`createDocument()`方法。

```
 document.setState("someState");
         dao.createDocument(document); 
```

谁能指出为什么会发生这种情况？

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T07:37:35.423

您的数据库会话必须处于 AutoCommit 模式。当您使用`Link`“经典”时`RequestCycle`，它肯定会触发您的 OpenSessionInView 过滤器。这样，`document`您更新的对象仍由 管理`Persistence Context`，因此，底层 JPA 实现会自动将更改提交到数据库。

当您使用 时`AjaxLink`，您正在使用一个分离的实体，JPA 不会管理它，因此不会将其自动提交到数据库。当您调用您的`createDocument`方法时，您会将您的实体与您的实体合并`Persistence Context`并将其保存回来。

如果您不希望自动提交发生，您可以将 entityManager 的 FlushMode 设置为`FlushMode.COMMIT`

# javascript - 您如何在显示原型模式中命名对象？

> ID：15910853
> 
> 赞同：2
> 
> 时间：2013-04-09T19:29:20.367
> 
> 标签：javascript, prototype, revealing-module-pattern

我一直在使用 Revealing Module 模式并且有几个命名空间。例子：

```
// here's the namespace setup

var myProject= myProject|| {};
var myProject.models= myProject.models || {};

myProject.models.MyModel= function(){
   var someMethod = function(){
     // do something
   };
   return{
      SomeMethod = someMethod
   };
} 
```

我正在转向显示[原型模式](http://weblogs.asp.net/dwahlin/archive/2011/08/03/techniques-strategies-and-patterns-for-structuring-javascript-code-revealing-prototype-pattern.aspx)以获得一些内存使用改进，因此我可以将对象装饰为另一个功能。如何将其保存在 myProject.models 命名空间中？这给了我的 JavaScript 错误：

```
var myProject.models.MyModel= function(){
   // properties here
};

myProject.models.MyModel.prototype = (function(){
   // methods here
    var someMethod = function(){
         // do something
    };
    return{
       SomeMethod = someMethod
    };
}()); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T19:34:34.053

您有各种语法错误。

```
myProject = window.myProject|| {};

myProject.models = myProject.models || {};

myProject.models.MyModel = (function () {
   //declare a constructor function
   function MyModel() {
   }

   //declare a function that will be publicly available on each MyModel instances
   MyModel.prototype.someFunction = function () {
       //call the private function from within the public one
       //note: you have to be careful here since the context object (this) will be
       //window inside somePrivateFunction
       somePrivateFunction();

       //call the private function and set the context object to the current model instance
       //somePrivateFunction.call(this);           
   };

   //declare a private function
   function somePrivateFunction() {
   }

   return MyModel; //return the model constructor
})(); 
```

现在您可以使用您的模型，例如：

```
var m = new myProject.models.MyModel();
m.someFunction(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T19:36:15.890

# ios - 阅读繁体应用商店的中国用户能看到简化的描述吗？

> ID：15910863
> 
> 赞同：0
> 
> 时间：2013-04-09T19:29:57.170
> 
> 标签：ios, localization, app-store, app-store-connect, chinese-locale

用繁体中文阅读应用商店的中国用户能看到简体中文描述吗？我的app目前只翻译成简体，我只在iTunes connect中指定了简体翻译。我想知道我是否正在失去繁体中文读者，或者应用商店是否只是为他们恢复为简体？它是如何工作的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T19:38:26.807

香港或澳门人可能难以阅读简体中文，因为他们的家乡是繁体中文。

尝试有两个版本的中文，或者如果需要使用谷歌。

[http://translate.google.com/?tl=zh-TW#zh-CN/zh-TW/%E9%BE%99](http://translate.google.com/?tl=zh-TW#zh-CN/zh-TW/%E9%BE%99)

# asp.net-web-api - asp.net webapi 控制器，返回类型化实体或 HttpResponseMessage

> ID：15910867
> 
> 赞同：11
> 
> 时间：2013-04-09T19:30:06.890
> 
> 标签：asp.net-web-api

我想知道在我的 ApiController 中使用 HttpResponseMessage 作为返回类型有什么好处？与直接返回类型化实体或集合进行比较。

我们试图决定一种做法，以使我们正在进行的项目保持一致。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-09T20:15:50.540

`HttpResponseMessage`当您尝试将控制器层用作 HTTP 协议和内部 .Net 服务之间的转换时，返回非常有用。它允许直接控制 HTTP 有效负载和标头。它可以轻松返回 202、204、304、303 响应。它使设置缓存标头变得容易。您可以明确控制响应的媒体类型。

通过返回一个对象，您可以有效地将“什么都不做”层添加到您的架构中。考虑....

```
public Foo Get(int id) {
   return _fooRepository.GetFoo(id)
} 
```

这种方法的目的是什么？它增加了什么价值？至少在 MVC 领域，控制器具有匹配模型和视图的作用。

当您从 APIController 返回对象时，您必须使用一组特定于 Web API/MVC 并且在 HTTP 世界中没有相应概念的抽象来间接影响 HTTPResponseMessage。Formatters、ActionFilters、ModelBinders、HttpResponseException 都是旨在让框架在幕后处理您的 HTTP 请求和响应消息的基础设施。

直接返回 HttpResponseMessage 要求您的控制器方法完成返回所需 HTTP 消息所需的工作。

我不相信它会给你的应用程序增加任何复杂性，它只是让正在发生的事情变得可见。

归结为您是否想将 Web API 用作“基于 HTTP 的对象远程处理”框架（在这种情况下，我也会看看 ServiceStack），或者您是否想利用 HTTP 作为应用程序协议。

# jquery - 带有淡入淡出的下拉菜单不起作用？

> ID：15910868
> 
> 赞同：0
> 
> 时间：2013-04-09T19:30:11.430
> 
> 标签：jquery

我有一个简单的下拉菜单，希望下拉菜单淡入淡出，但我使用的代码似乎不起作用。不确定我是否尝试点击错误的选择器或者代码是否错误。我要说...代码是错误的。

HTML：

```
<ul class="m-nav">
   <li><a href="">Rules</a></li>
   <li><a href="">Regulators</a>
      <ul class="drop">
         <li><a href="">Bobby</a></li>
         <li><a href="">David</a>
      </ul>
   <li>
</ul> 
```

JS：

```
$('ul.m-nav li').addClass('booze');

    $('.booze').hover(function() {
        $('.drop').fadeIn('slow');
    }, function() {
        $('.drop').fadeOut('slow');
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T19:37:58.283

看起来您在这里缺少一个结束标签：

`<li><a href="">David</a>`

我添加了那个标签，然后调整了你的 jQuery 以在你的`<li>`. 否则，脚本会将`hover`事件绑定到您的每个`<li>`s.

最后，`hide()`最初的下拉菜单。

它现在对我来说似乎工作正常。这是小提琴：http: [//jsfiddle.net/eV9Wv/](http://jsfiddle.net/eV9Wv/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T19:43:23.093

您的悬停选择器覆盖了多个 LI，因此您应该只淡化子 .drop：

```
 $('.booze').hover(function() {
        $('.drop',this).fadeIn('slow');
    }, function() {
        $('.drop',this).fadeOut('slow');
    }); 
```

[在这里测试](http://jsbin.com/egecog/1/edit)

# python - 如何在 python 脚本中运行我自己的外部命令

> ID：15910870
> 
> 赞同：2
> 
> 时间：2013-04-09T19:30:16.783
> 
> 标签：python

我想在 python 中运行我自己的非系统外部命令。

如“sudo insteon on 23”。Subprocess 和 os.system 是为系统调用而设计的。

有人知道怎么做吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T19:31:58.673

您可以为此使用[subprocess.Popen ：](http://docs.python.org/2/library/subprocess.html#using-the-subprocess-module)

```
import shlex
import subprocess
proc = subprocess.Popen(shlex.split('sudo insteon on 23'))
proc.communicate() 
```

# .net - 如何获得 Decimal 类型的 DataTable.Column 的比例

> ID：15910872
> 
> 赞同：0
> 
> 时间：2013-04-09T19:30:21.243
> 
> 标签：.net, sql

我读取数据库并得到一个数据集，这个数据集中的数据表指定一个“十进制”列类型，有没有办法在运行时获得该数据类型的精度和比例？

我正在使用 C# .NET

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T20:22:27.607

假设您使用的是 SQL Server。您可以通过以下查询从数据库中获取这些信息。

```
SELECT NUMERIC_PRECISION,NUMERIC_SCALE
FROM INFORMATION_SCHEMA.COLUMNS
WHERE TABLE_SCHEMA = 'dbo'
 AND TABLE_NAME = 'YourTable'   
 AND COLUMN_NAME = 'YourColumn' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T20:25:21.473

也许这对你有帮助......通过使用这个类：“server”和“Database”以及“Table”和“Column”来自下面这个 USING，你可以直接访问 sqlserver 的表和列

> 使用 Microsoft.SqlServer.Management.Smo；

> ```
>  Server server = new Server("yourServerName");
>         Database db = new Database(server, "yourdatabasename");
>         db.Tables.Refresh();
>         int count = db.Tables.Count;
>         Table tb = (db.Tables["yourTableName"]);
>         if (tb != null)
>         {
>             tb.Columns.Refresh();
>             foreach (Column col in tb.Columns)
>             {
>                 //now you can get anything of your columns directly from sqlserver
>             }
>         } 
> ```

# jquery - 使用 jquery 加载 jsonp 所需的简单示例

> ID：15910875
> 
> 赞同：1
> 
> 时间：2013-04-09T19:30:44.473
> 
> 标签：jquery, json, jsonp

我很抱歉这可能是论坛上的一个重复问题，但我在理解使用 jquery 加载 jsonp 的过程时遇到了可怕的麻烦。

我只是想编写一个函数，从以下 url 打印出 json 数据：

[http://policeapi2.rkh.co.uk/api/crimes-at-location?date=2012-02&lat=52.629729&lng=-1.131592](http://policeapi2.rkh.co.uk/api/crimes-at-location?date=2012-02&lat=52.629729&lng=-1.131592)

一个简单的示例函数会很棒！

谢谢，

——丹

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T19:37:56.040

对不起，但你不能这样做。您提到的 API 服务于 JSON，而不是 JSONP。您无法以某种方式从浏览器将其转换为 JSONP。

因为这是一个跨站点请求，您将无法从浏览器读取 JSON 内容。

只有几个选项：

1.  在您自己的服务器（托管您的页面）上，设置一个代理来加载他们的 JSON 并将其传递给您的代码。确保 API 具有的任何服务条款都可以。

2.  让 Policeapi2 人员自己支持 JSONP 请求，或者支持 CORS 请求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T19:42:25.217

这就是我们使用 jquery 加载 JSONP 的方式

```
 $.ajax({
     url: 'http://jsfiddle.net/echo/jsonp/',
     dataType: 'jsonp',
     success: function (data) {
         $('body').text(data);
     }
 }); 
```

请记住，该 url 应该为此工作提供一个 jsonp，您提供的 Url 不返回 JSONP，因此您不能这样做。

[**小提琴**](http://jsfiddle.net/u5P7C/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T19:35:26.410

尝试使用[JSON2.js](https://github.com/douglascrockford/JSON-js/blob/master/json2.js)。这是一个例子：

```
$.ajax({
    url: 'http://policeapi2.rkh.co.uk/api/crimes-at-location?date=2012-02&lat=52.629729&lng=-1.131592',
    success: function(data){
        alert(JSON.stringify(data));
    }
}) 
```

# r - R reshape2中的自定义变量名称

> ID：15910878
> 
> 赞同：0
> 
> 时间：2013-04-09T19:31:05.367
> 
> 标签：r, reshape2

有没有办法改变`dcast`函数命名变量的默认方式？例如

```
require(reshape2)
x = data.frame(id=1:2, t=1:5, v=10:1)
m = melt(x, id.vars = c("id", "t"))
cx = dcast(m,  t ~ variable + id)
print(cx)

#  t v_1 v_2
#1 1  10   5
#2 2   4   9
#3 3   8   3
#4 4   2   7
#5 5   6   1 
```

我想`v_1`命名`v_id_1`什么的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T19:41:36.917

我认为不可能使用`dcast`，但您可以`gsub`像这样使用：

```
 colnames(cx) <- gsub('(.*)_(*.)','\\1_id_\\2',colnames(cx))
> cx
  t v_id_1 v_id_2
1 1     10      5
2 2      4      9
3 3      8      3
4 4      2      7
5 5      6      1 
```

# java - 滑块在表格中始终具有默认宽度

> ID：15910879
> 
> 赞同：16
> 
> 时间：2013-04-09T19:31:05.350
> 
> 标签：java, android, libgdx

我在表格内创建了一个滑块，如下面的代码示例所示，因为我知道背景的最小宽度用于滑块宽度：

```
public OptionScreen(MainClass game) {
    super(game);
    preference = new PreferencesHelper();
    font = this.getDefaultFont(25);
    this.table = new Table();
    if (Config.DEBUG)
        this.table.debug();

    // add volumenlabel
    LabelStyle style = new LabelStyle(font, Color.WHITE);
    volumenLabel = new Label(Config.VOLUMEN_LABLE, style);
    table.add(volumenLabel).colspan(2);
    table.row();
    // add slider
    Skin skin = new Skin();
    skin.add("sliderbackground",
            this.game.manager.get("data/sliderbackground.png"));
    skin.add("sliderknob", this.game.manager.get("data/sliderknob.png"));

    SliderStyle sliderStyle = new SliderStyle();
    sliderStyle.background = skin.getDrawable("sliderbackground");
    sliderStyle.background.setMinWidth(600f);
    sliderStyle.knob = skin.getDrawable("sliderknob");

    volumenSlider = new Slider(0f, 1f, 0.1f, false, sliderStyle);
    volumenSlider.setValue(preference.getVolumen()); // load current volumen
    volumenSlider.addListener(new ChangeListener() {

        @Override
        public void changed(ChangeEvent event, Actor actor) {
            volumeValue.setText(String.format("%.01f",
                    volumenSlider.getValue()));
            // sett the preference
            preference.setVolumen(volumenSlider.getValue());
        }
    });
    // add volslider to stage
    table.add(volumenSlider);
    volumenLabel.invalidate();

    // table
    style = new LabelStyle(font, Color.WHITE);
    // set current volumen
    volumeValue = new Label(
            String.format("%.01f", volumenSlider.getValue()), style);
    volumenLabel.setAlignment(2);
    table.add(volumeValue).width(50f);
    table.row();

    initBackButton();

    // init table
    table.setPosition(Config.VIRTUAL_VIEW_WIDTH / 2,
            Config.VIRTUAL_VIEW_HEIGHT / 2 - Config.BLOCK_SIZE * 10);

    // add a nice fadeIn to the whole table :)
    table.setColor(0, 0, 0, 0f);
    table.addAction(Actions.fadeIn(2f)); // alpha fade
    table.addAction(Actions.moveTo(Config.VIRTUAL_VIEW_WIDTH / 2,
            Config.VIRTUAL_VIEW_HEIGHT / 2, 2f)); // move to center of the
                                                    // screen
    // add to stage
    this.stage.addActor(table);
} 
```

幻灯片位于未设置宽度的表格内。我已经查看了是否设置了宽度以及滑块的 prefWidth 的计算是否使用了设置的 600f。

```
Math.max(style.knob == null ? 0 : style.knob.getMinWidth(), style.background.getMinWidth()) 
```

是 Sliderclass 内滑块宽度的计算。如果我计算并记录它，它会记录所需的 600f。

一切对我来说似乎都是正确的，但是对于我设置的 600，滑块的渲染方式太小了。

背景和旋钮纹理是 24x24。

所以我希望你们能告诉我我做错了什么。

![锡尔德](https://i.stack.imgur.com/eIDbM.jpg)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-15T17:31:26.960

问题是，它在表格内，因此宽度由规范的表格宽度属性定义。列和行。

所以修复很短：

```
table.add(volumenSlider).width(600).height(60); 
```

它的宽度为 600，高度为 60。

* * *

### 对 wiki 进行了编辑以更清楚地说明这一点：

> UI 小部件不设置自己的大小和位置。相反，父窗口小部件设置每个孩子的大小和位置。小部件提供父级可以用作提示的最小、首选和最大大小。一些父窗口小部件，例如 Table，可以限制子窗口的大小和位置。要在布局中为小部件指定特定尺寸，小部件的最小、首选和最大尺寸将保持不变，并且在父级中设置尺寸约束。

[Wiki 上的布局](https://github.com/libgdx/libgdx/wiki/Scene2d.ui#layout)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-09T19:56:49.100

```
speedSlider.getStyle().knob.setMinHeight(100) 
```

# httpwebrequest - HtmlAgilityPack 返回随机字符

> ID：15910881
> 
> 赞同：0
> 
> 时间：2013-04-09T19:31:07.313
> 
> 标签：httpwebrequest, html-agility-pack, streamreader

我有以下代码使用 HtmlAgilityPack 为许多网站拉回 html 代码。除了 asos.com 之外，一切似乎都运行良好。运行 url 时，它会返回随机字符 (‹\b\0\0\0\0\0\0UÍÂ „ï&¾CãÁ¢ø›\bãhìÁ3-« `Zi`ý}z'š/»ómf³Ü`]In@iÉÑbr [œ¡Ä¬v7Ðœ¶7N[GáôSv;Ü°?[†.ã*3Ž¢G×ù6OƒäwPŒõH\rÙ¸\vzìmèÎ;M›4q_K¨Ð)

```
 HtmlAgilityPack.HtmlDocument doc = new HtmlDocument();
    doc.OptionReadEncoding = false;
    HttpWebRequest request = (HttpWebRequest)HttpWebRequest.Create("http://www.asos.com/ASOS/ASOS-Sweatshirt-With-Contrast-Ribs/Prod/pgeproduct.aspx?iid=2765751&cid=14368&sh=0&pge=0&pgesize=20&sort=-1&clr=Red");
    request.Timeout = 10000;
    request.ReadWriteTimeout = 32000;
    request.UserAgent = "TEST";
    request.Method = "GET";
    request.Accept = "text/html";
    request.AllowAutoRedirect = false;
    request.CookieContainer = new CookieContainer();
    StreamReader reader = new StreamReader(request.GetResponse().GetResponseStream(), Encoding.Default); //put your encoding            
    doc.Load(reader);

    string html = doc.DocumentNode.OuterHtml; 
```

我已经通过 Fiddler 运行了 url，但是似乎看不到任何暗示应该有问题的东西。有什么想法我哪里出错了吗？

在此处查看 fiddler 的标题图片：http: [//i.stack.imgur.com/2LRFY.png](http://i.stack.imgur.com/2LRFY.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T06:08:49.607

这与 Html Agility Pack 无关，因为您已设置`AllowAutoRedirect`为 false。删除它，它会工作。该站点显然进行了重定向，如果您想要最终的 HTML 文本，则需要遵循它。

请注意，Html Agility Pack 有一个实用程序`HtmlWeb`类，可以直接将文件下载为`HmlDocument`：

```
HtmlWeb web = new HtmlWeb();
HtmlDocument doc = web.Load(@"http://www.asos.com/ASOS/ASOS-Sweatshirt-With-Contrast-Ribs/Prod/pgeproduct.aspx?iid=2765751&cid=14368&sh=0&pge=0&pgesize=20&sort=-1&clr=Red"); 
```

# ruby - 数组返回 Fixnum 而不是 String

> ID：15910886
> 
> 赞同：0
> 
> 时间：2013-04-09T19:31:41.853
> 
> 标签：ruby, arrays

我有一个数组数组，类似于：

`[["Rosalind_0498", "AAATAAA"], ["Rosalind_2391", "AAATTTT"]]`

我想得到我希望使用的第一个数组的第二个元素的字母`array[0][1][-1]`

这不是返回“A”而是返回 65，这可能对 ruby​​ 数组很简单，但我不确定它为什么会发生，有人能指出我正确的方向吗？

更新：

那么有没有更好的方法`array[0][1][-1..-1]`呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T19:36:05.513

在 Ruby 1.9 之前，访问字符串 char`[]`可以获得此 char 的 ascii 值。

只需在 ruby​​ 1.8 中使用它：

```
array[0][1][-1].chr 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T19:34:43.277

你用的是什么版本的红宝石？

```
2.0.0p0 :001 > a = [["Rosalind_0498", "AAATAAA"], ["Rosalind_2391", "AAATTTT"]]
 => [["Rosalind_0498", "AAATAAA"], ["Rosalind_2391", "AAATTTT"]]
2.0.0p0 :002 > a[0][1][0]
 => "A" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T19:51:00.747

您可以尝试以下方法：

```
p [["Rosalind_0498", "AAATAAA"], ["Rosalind_2391", "AAATTTT"]].flatten[1].chr #=> "A" 
```

# c# - 如何在开始时使第二个表单出现在主表单的顶部？

> ID：15910887
> 
> 赞同：-2
> 
> 时间：2013-04-09T19:31:45.577
> 
> 标签：c#, winforms

我有 2 个表格；我的主要表格命名`Form1`和我的第二个表格命名`Form2`

我的主窗体在开始时显示，我也想显示，`Form2`但它显示在`Form1`. 我希望它出现在我的主要表单之上。

我试图将`Form2`'`TopMost`属性设置为`true`then`false`但它没有用。我还尝试创建一个不同的线程`Form2`以出现在 之后`Form1`，在这种情况下，它会`Form2`快速显示然后消失。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T19:34:51.053

`Form2`在以下`Shown`事件处理程序中显示`Form1`：

```
private void Form1_Shown(object sender, EventArgs e)
{
    Form2 form2 = new Form2();
    form2.Show();
} 
```

如果你想成为模态，你可以使用`ShowDialog()`而不是。`Show()``Form2`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T19:35:20.047

```
new Form2().ShowDialog() 
```

这也将锁定 Form1，直到 Form2 关闭

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T19:34:53.183

在 Form1 加载事件中添加此代码：

```
 Form2 form2 = new Form2();
            form2.TopMost = true;
            form2.Show(); 
```

# java - 通用分词器

> ID：15910893
> 
> 赞同：0
> 
> 时间：2013-04-09T19:32:07.887
> 
> 标签：java, string, unicode, split, tokenize

我正在寻找一些可以帮助我执行以下操作的库：

对于给定的输入文本文档： 1\. 将文档转换为小写（简单。使用 toLowerCase 函数求解） 2\. 删除符号 3\. 标记生成单词列表

例如： "A,B; C\nD. F" 应该导致 ["a", "b", "c", "d", "e", "f"] 。

它应该适用于所有语言。除了英语，我还有一些俄语、中文和日语文本。

**这是我尝试过的：**

[如果我只处理英语，用空字符串替换所有非字母数字字符](https://stackoverflow.com/questions/1805518/replacing-all-non-alphanumeric-characters-with-empty-strings)中提到的解决方案可以很容易地适应我的问题。

java.util.StringTokenizer 有点用，但不会删除符号。

**这就是我正在寻找的：** 一种执行所有这三个操作的优雅方式。不寻找复杂的（即长度）代码（如果没有优雅的解决方案，我可以自己编写）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T20:02:27.943

您是否尝试过使用[`String.split()`](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#split%28java.lang.String%29)使用符号和空格作为分隔符的正则表达式？

与此类似的东西。

`document.toLowerCase().split(["\\p{Punct}\\s]+");`

`!"#$%&'()*+,-./:;<=>?@[\]^_`{|}~`其中 \p{Punct}根据[Pattern](http://docs.oracle.com/javase/6/docs/api/java/util/regex/Pattern.html)等于。

这将删除所有符号和空格并返回一个字符串数组，该数组将是您的标记列表，没有任何符号。

# mjpeg - 如何检测无损 JPEG 2000 压缩？

> ID：15910896
> 
> 赞同：8
> 
> 时间：2013-04-09T19:32:19.630
> 
> 标签：mjpeg, image-compression, jpeg2000, lossless-compression

我有一个motion-JPEG 2000 文件，我需要根据文件本身确定创建者是否使用无损压缩来创建它。我没有可比较的原始视频数据，也没有用于生成文件的应用程序的源代码。

根据我的发现，看起来我能做的最好的事情是检查小波滤波器（双正交 3/5）和量化步长（1），如果这些条件为真，则假设无损。

非常感谢有关如何检查无损压缩的任何建议。我的工作环境是 MATLAB 或 Java，但其他平台的任何提示都会有所帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-06-13T11:36:29.160

您可以为此目的使用 ffmpeg。从这里下载：[https](https://ffmpeg.org/) ://ffmpeg.org/ 。安装软件并将其源文件夹添加到 WIN 路径后，您可以简单地执行以下操作：

```
ffprobe Test.mj2 
```

然后，输出会向您显示有关视频的许多详细信息，包括其可能的无损。

请参阅以下示例输出

![[1]](https://i.stack.imgur.com/vv9mU.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-06T18:21:38.580

可以使用 5/4 小波和 1 的量化步长，并且在编码过程中仍然截断码流以获得有损结果。这仍然是有效的 JPEG 2000 图像。因此，检查无损的唯一方法是与原始文件进行比较。

# objective-c - CALayer在动画中移动了几次

> ID：15910897
> 
> 赞同：0
> 
> 时间：2013-04-09T19:32:25.597
> 
> 标签：objective-c, animation, calayer

现在我有动画 - 将 calayer 从实际点移动到其他点，一步：

```
CGPoint startPt = CGPointMake(self.firstBall.ballCoordinates.x,self.firstBall.ballCoordinates.y);
 CGPoint endPt = CGPointMake(self.secondBall.ballCoordinates.x,self.secondBall.ballCoordinates.y);

 CABasicAnimation *anim = [CABasicAnimation animationWithKeyPath:@"position"];
 anim.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionLinear];
 anim.fromValue = [NSValue valueWithCGPoint:startPt];
 anim.toValue = [NSValue valueWithCGPoint:endPt];
 anim.repeatCount = 0;
 anim.duration = 1.0;
 [self.firstBall.ballLayer addAnimation:anim forKey:@"position"]; 
```

当我的 calayer 在一个动画中从一个点移动到另一个点时，如何创建动画？

# sql-server-2008 - 在 SQL Server 的字段中查找相似的字母但不同的数值

> ID：15910898
> 
> 赞同：0
> 
> 时间：2013-04-09T19:32:26.710
> 
> 标签：sql-server-2008

我有一个包含客户记录的 SQL Server 表。很少有客户拥有多个记录具有相同的名字、姓氏、城市、州和邮政编码，并且街道名称相同但街道编号不同。我们有一个存储街道编号和街道名称的字段。有没有办法找出谁的名字、姓氏、城市、邮编、街道名称相同但门牌号不同？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T19:38:35.550

使用和。`GROUP BY`_`COUNT(*)``HAVING`

我不知道您的表结构，但示例实现可能是：

```
SELECT FirstName, LastName, City, State, Zip, COUNT(*)
FROM Customers
GROUP BY FirstName, LastName, City, State, Zip
HAVING COUNT(*) > 1 
```

# python - Python 中的 DBSCAN：意外结果

> ID：15910899
> 
> 赞同：2
> 
> 时间：2013-04-09T19:32:31.747
> 
> 标签：python, scikit-learn, cluster-analysis, data-mining, dbscan

我试图通过 scikit-learn 理解 DBSCAN 实现，但我遇到了麻烦。这是我的数据样本：

```
X = [[0,0],[0,1],[1,1],[1,2],[2,2],[5,0],[5,1],[5,2],[8,0],[10,0]] 
```

然后我按照提供的示例计算 D

```
D = distance.squareform(distance.pdist(X)) 
```

`D`返回一个矩阵，其中包含每个点与所有其他点之间的距离。因此对角线始终为 0。

然后我运行 DBSCAN 为：

```
 db = DBSCAN(eps=1.1, min_samples=2).fit(D) 
```

`eps = 1.1`意味着，如果我很好地理解了文档，那么距离小于或等于 1.1 的点将被考虑在一个集群（核心）中。

`D[1]`返回以下内容：

```
>>> D[1]
array([  1\.        ,   0\.        ,   1\.        ,   1.41421356,
     2.23606798,   5.09901951,   5\.        ,   5.09901951,
     8.06225775,  10.04987562]) 
```

这意味着第二个点到第一个和第三个点的距离为 1。所以我希望他们建立一个集群，但是......

```
>>> db.core_sample_indices_
[] 
```

这意味着没有找到核心，对吧？这是其他 2 个输出。

```
>>> db.components_
array([], shape=(0, 10), dtype=float64)
>>> db.labels_
array([-1., -1., -1., -1., -1., -1., -1., -1., -1., -1.]) 
```

为什么会有集群？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T11:11:30.877

我认为实现可能只是*假设您的距离矩阵是数据本身*。

请参阅：通常您不会计算 DBSCAN 的完整距离矩阵，而是使用数据索引来进行更快的邻居搜索。

从 1 分钟的 Google 来看，考虑添加`metric="precomputed"`，因为：

> 适合(X)
> 
> X：样本之间的距离数组，或特征数组。该数组被视为特征数组，除非该度量被指定为“预先计算”。

# java - log4j 在获取我的配置时显示错误

> ID：15910901
> 
> 赞同：2
> 
> 时间：2013-04-09T19:32:52.170
> 
> 标签：java, log4j

我在这里描述了同样的问题：[初始化时出现 Log4j 警告？](https://stackoverflow.com/questions/7685510/log4j-warning-while-initializing)

我的应用程序有一个`log4j.properties`允许我`log4j.rootLogger=INFO, stdout`正确配置。但是我仍然看到：

```
log4j:WARN No appenders could be found for logger (org.jboss.logging).
log4j:WARN Please initialize the log4j system properly.
log4j:WARN See http://logging.apache.org/log4j/1.2/faq.html#noconfig for more info. 
```

运行应用程序时。

我的 log4j.properties 当前为：

```
log4j.rootLogger=INFO, stdout

log4j.appender.stdout=org.apache.log4j.ConsoleAppender
log4j.appender.stdout.layout=org.apache.log4j.PatternLayout
log4j.appender.stdout.layout.ConversionPattern=%d{ABSOLUTE} %5p %t %c:%L - %m%n

#log4j.category.org.springframework=DEBUG,stdout 
```

我还尝试通过以下方式将属性文件添加到我的配置中：

```
@PropertySource(value= {
        "classpath:/log4j.properties",
        "classpath:/application.properties"
}) 
```

我怎样才能让这个错误消失？`DEBUG`我可以通过这个文件在和之间切换`INFO`，所以我知道它正在被读取。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T20:51:01.697

您可以通过添加该行来消除此错误

```
log4j.logger.org.jboss.logging=INFO, stdout 
```

到您的 log4j.properties。
我不知道为什么，但似乎有些东西设置了 to 的可加性`org.jboss.logging`，`false`导致它忽略了根附加程序。因此，您可以找到那个神奇的地方，也可以添加上面的行。

# mysql - 相关家庭成员的 SQL 数据库

> ID：15910905
> 
> 赞同：1
> 
> 时间：2013-04-09T19:33:08.680
> 
> 标签：mysql, sql, alias, aliases

我很好奇你认为什么是让这个 MySQL 数据库工作的最佳方式。

我有这张桌子：

```
family.id
family.name
family.related 
```

并认为在这样的 1 个查询中将相关的家庭成员连接在一起不会有问题：

```
id        | name        | related
1         | Name1       | 
2         | Name2       | 3,5
3         | Name3       | 
4         | Name4       | 
5         | Name5       | 4,1
6         | Name6       | 
7         | Name7       | 
8         | Name8       | 6
9         | Name9       | 7 
```

所以 Name2 与 Name3 和 Name5 相关，其中 Name5 有其他相关的 id，所以我应该进行查询以获取以下 id：

选择 id 2，输出相关 id 的：3,5, **4,1**

选择 id 6，输出相关的 id's: 8

选择id 9，输出相关的id：7

但我无法找到一个查询来在一列中获取所有相关的 id。

甚至可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T20:01:51.590

对于多对多关系，您通常需要使用链接表：

```
family_id
related_to 
```

其中，当您的族表中有多个以逗号分隔的项目时，您将在链接表中为逗号分隔列表中的每个项目创建一个条目：

```
family_id | related_to
2           3
2           5
5           4
5           1
... 
```

等等。

# c# - 在实体框架中填充导航属性？

> ID：15910906
> 
> 赞同：2
> 
> 时间：2013-04-09T19:33:11.553
> 
> 标签：c#, entity-framework

有没有办法通过传递其主键来填充实体框架中对象的导航属性以及加载对象本身？

让我们说：

```
context.Request.LoadUsingPk(pk).LoadNavigationPropertiesRelatedToThisRequest 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T19:41:35.297

是的 - 对于急切加载，您添加一个`Include()`调用 ( [MSDN](http://msdn.microsoft.com/en-us/library/gg671236%28v=vs.103%29.aspx) )：

```
context.Request.Include( request => request.NavigationProperty )... 
```

这是一个扩展方法，所以你必须添加一个 using 使它可见：

```
using System.Data.Entity; 
```

* * *

这里有一篇关于它的 MSDN 文章：[`Entity Framework - Loading Related Entities`](http://msdn.microsoft.com/en-us/data/jj574232.aspx)

# php - 卡在 empty 和 foreach

> ID：15910908
> 
> 赞同：2
> 
> 时间：2013-04-09T19:33:20.037
> 
> 标签：php, forms, foreach, associative-array, string

```
<form action="http:\\127.0.0.1\rechecking.php" method="post" enctype="multipart/form-        data"><pre>
Enter your first Name: <input type="text" name="fname" size="15"></input>
Enter your Last Name:  <input type="text" name="lname" size="15"></input>
Your Email Id:         <input type="text" name="email" size="15"></input>
Your age:              <input type="text" name="age" size="1"></input> 
Upload your Image:     <input type="file" name="file"></input> 
<input type="Submit" value="Submit"></input></pre>
</form>

<?php
if(!empty($_POST["fname"])&&!empty($_POST["lname"])&&!empty($_POST["email"])&&!empty($_POST["age"]))
{
if($_FILES["file"]["error"]>0)
{
echo $_FILES['file']['error'] ."error is there in uploading files";
}
}
else
{         $emt=array($_POST['fname']=>"Firstname",$_POST['lname']=>"LastName",$_POST['email']=>"Email",$_POST['age']=>"Age");
foreach($emt as $value=>$variable)
{
if(empty($value))
{
echo $variable." cannot be left blank<br />";
}
}
}
?> 
```

问题是，在我的表单中将所有空格留空时，它只显示关联数组的最后一个元素。例如： - 留下名字，姓氏，电子邮件，年龄然后它只会显示“提交的年龄不能留空”类似地，如果我的输入字段中已经填写了年龄，那么它只会显示“电子邮件字段不能留空”好吧我希望它显示所有留空的字段的名称

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T19:35:04.053

您必须更改 $key 和 $variable：

```
$emt=array("Firstname"=>$_POST['fname'],"LastName"=>$_POST['lname'],"Email"=>$_POST['email'],"Age"=>$_POST['age']); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T19:37:17.417

将其更改为

```
$emt=array("Firstname"=>$_POST['fname'],"LastName"=>$_POST['lname'],"Email"=>$_POST['email'],"Age"=>$_POST['age']); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T19:47:00.083

我认为你很困惑：

```
foreach($emt as $value=>$variable)
{ 
```

和

```
foreach($emt as $variable=>$value) 
```

（我会将变量命名为 $variable $key ，但这只是个人喜好问题）

其他答案显示的数组也是如此。

```
$emt = array(key => value, key => value,  ....); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T19:56:45.443

为了检查特定键是否为空，您必须确保首先设置它（用户可以编辑他的 HTML 源代码而不发送某些字段，从而在您的站点中触发一些警告）。除此之外，我发现你的代码有点乱，所以一段时间后你会发现很难调试或阅读。

在这里，我正在重写 PHP 部分以检查该字段是否已输入且不为空。

```
<?php
$required = array(
  'fname' => 'First name', 
  'lname' => 'Last name', 
  'email' => 'Email address', 
  'age' => 'Age', 
);

$errors = array(); // Here, we store all the error messages. If it's empty, we are good to go. 

foreach ($required as $key => $label) {
  if (isset($_POST[$key]) || empty($_POST[$key])) {
    $errors[] = "$label field is required.";
  }
}
if (!isset($_FILES["file"])) {
  $errors[] = 'Please upload an image';
}
elseif (isset($_FILES['file']['error']) && $_FILES['file']['error']) {
  $errors[] = 'An error occurd while uploading your photo';
}

if ($errors) {
  print '<ul>';
  foreach ($errors as $error) {
    print "<li>$error</li>";
  }
  print '</ul>'
}
else {
  // All fields are filled and not empty, file is uploaded successfully. Process your form.
}
?> 
```

# twitter-bootstrap - 420px 及以下的 Bootstrap 移动菜单

> ID：15910912
> 
> 赞同：0
> 
> 时间：2013-04-09T19:33:37.440
> 
> 标签：twitter-bootstrap

有没有办法只在 600px 以下的宽度上显示 boostrap 移动菜单？除了屠杀响应式 css 文件？我在想也许有一个简单的覆盖可以添加到我的 custom.css 文件的移动部分。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-08T05:59:19.103

我认为您可以编辑 .less 文件。[您可以在https://github.com/twitter/bootstrap/tree/master/less](https://github.com/twitter/bootstrap/tree/master/less)下载它们，但您需要重新编译。如果你编辑 variables.less 有一个变量 @navbarCollapseWidth

我还没有尝试过，所以不能保证它会起作用

# excel - 如何在列中查找文本并将行号保存在第一次找到的位置 - Excel VBA

> ID：15910913
> 
> 赞同：13
> 
> 时间：2013-04-09T19:33:37.583
> 
> 标签：excel, vba

我有以下列（A 列）命名的项目（行列仅显示行号）：

```
rows    project
1       14
2       15
3       16
4       17
5       18
6       19
7       ProjTemp
8       ProjTemp
9       ProjTemp 
```

我有一个输入消息框，用户在其中写下我想在最后一个之后插入的新项目名称。例如：项目 20 将插入到项目 19 之后和第一个“ProjTemp”之前。

我的理论是找到第一个“ProjTemp”的行号，然后在项目为 20 的位置插入一个新行。

我试图使用 Find 函数，但出现溢出错误（我确定我得到了它，因为它正在查找 3 个“ProjTemp”字符串并试图将其设置为一个参数）：

```
Dim FindRow as Range

with WB.Sheets("ECM Overview")
    Set FindRow = .Range("A:A").Find(What:="ProjTemp", _
                        After:=.Cells(.Cells.Count), _
                        LookIn:=xlValues, _
                        LookAt:=xlWhole, _
                        SearchOrder:=xlByRows, _
                        MatchCase:=False)
end with 
```

我该如何编码，所以我只能找到第一个“ProjTemp”的行号？有没有更好的方法来做到这一点，也许是一个循环？

谢谢，任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-04-09T19:45:37.593

我不太熟悉该`Find`方法的所有这些参数。但是在缩短它后，以下内容对我有用：

```
With WB.Sheets("ECM Overview")
    Set FindRow = .Range("A:A").Find(What:="ProjTemp", LookIn:=xlValues)
End With 
```

如果你只需要行号，你可以在之后使用它：

```
Dim FindRowNumber As Long
.....
FindRowNumber = FindRow.Row 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-09T20:17:58.983

```
Dim FindRow as Range

Set FindRow = Range("A:A").Find(What:="ProjTemp", _' This is what you are searching for
                   After:=.Cells(.Cells.Count), _ ' This is saying after the last cell in the_
                                                  ' column i.e. the first
                   LookIn:=xlValues, _ ' this says look in the values of the cell not the formula
                   LookAt:=xlWhole, _ ' This look s for EXACT ENTIRE MATCH
                   SearchOrder:=xlByRows, _ 'This look down the column row by row 
                                            'Larger Ranges with multiple columns can be set to 
                                            ' look column by column then down 
                   MatchCase:=False) ' this says that the search is not case sensitive

If Not FindRow  Is Nothing Then ' if findrow is something (Prevents Errors)
    FirstRow = FindRow.Row      ' set FirstRow to the first time a match is found
End If 
```

如果你想获得额外的，你可以使用：

```
Do Until FindRow Is Nothing
    Set FindRow = Range("A:A").FindNext(after:=FindRow)
    If FindRow.row = FirstRow Then
        Exit Do
    Else ' Do what you'd like with the additional rows here.

    End If
Loop 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-09T19:56:18.620

或者，您可以使用循环，保留行号（计数器应该是行号）并在找到第一个“ProjTemp”时停止循环。
然后它应该看起来像这样：

```
Sub find()
    Dim i As Integer
    Dim firstTime As Integer
    Dim bNotFound As Boolean

    i = 1
    bNotFound = True

      Do While bNotFound
        If Cells(i, 2).Value = "ProjTemp" Then
            firstTime = i
            bNotFound = false
        End If
        i = i + 1
    Loop
End Sub 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-10T07:12:21.190

几点评论：

1.  由于搜索位置很重要，您应该指定开始搜索的位置。我使用`ws.[a1]`and`xlNext`下面，所以我的搜索从`A2`指定的工作表开始。
2.  一些`Find`s 参数 - 包括`lookat`使用先前的搜索设置。因此，您应该始终指定`xlWhole`或`xlPart`分别匹配全部或部分字符串。
3.  您可以做所有您想做的事情 - 包括插入一行，并提示用户输入一个新值（如果先前的值为 19，我的代码将建议 20）而不使用`Select`或`Activate`

**建议的代码**

```
Sub FindEm()
Dim Wb As Workbook
Dim ws As Worksheet
Dim rng1 As Range
Set Wb = ThisWorkbook
Set ws = Wb.Sheets("ECM Overview")
Set rng1 = ws.Range("A:A").Find("ProjTemp", ws.[a1], xlValues, xlWhole, , xlNext)
If Not rng1 Is Nothing Then
rng1.EntireRow.Insert
rng1.Offset(-1, 0).Value = Application.InputBox("Please enter data", "User Data Entry", rng1.Offset(-2, 0) + 1, , , , , 1)
Else
MsgBox "ProjTemp not found", vbCritical
End If
End Sub 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-09T19:50:18.703

检查“projtemp”，然后检查前一个是否是数字条目（如 19,18..etc..），如果是这样，则获取该 proj temp 的行号 ....

如果不是这样..然后重新检查上一个条目是 projtemp 还是数字条目...

# c# - SQL 日期时间到 C# 字符串并返回到 SQL 日期时间

> ID：15910918
> 
> 赞同：3
> 
> 时间：2013-04-09T19:33:59.763
> 
> 标签：c#, .net, sql, datetime

**我有一个 Web 服务方法，它从2012-11-18 11:21:03**格式的 sql 获取数据， 当我将其保存为 C# 字符串时，它变为以下格式：**18.11.2012 11:21:03** 如何将其更改回SQL 格式**2012-11-18 11:21:03**？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-09T19:35:28.137

再次将其解析为 dateTime

```
DateTime myTime = DateTime.Parse(myString); 
```

并回到适当的字符串

```
myTime.ToString("yyyy-MM-dd HH:mm:ss"); 
```

或者只是将其读入日期时间并切断中间人。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T19:40:26.830

您可以通过使用如下格式字符串来获得通用可排序的字符串格式（看起来像 SQL 服务器使用的格式）`"u"`：

```
var dateTimeString = String.Format("{0:u}", yourDateTime); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T19:41:19.770

只需运行以下代码，

```
var newDateTime = oldDateTime.Date.ToString("yyyy-MM-dd HH:mm:ss"); 
```

它只是将其转换回`SQL Format DATETIME`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T19:47:46.700

日期作为字符串的问题在于它们不明确，并且格式可能会根据您在世界上的位置甚至本地机器设置而有所不同。您可能会假设日期字符串是 yyyy-mm-dd 但如果它实际上是 yyyy-dd-mm 怎么办？有些日期似乎有效，有些日期无效。

换句话说，2013-02-10 是 2 月 10 日还是 10 月 2 日？如果它只是一个字符串，您将无法确定其意图。

#Haedrian 建议的最佳选择是存储在 DateTime C# 对象中，而不是字符串中。这样它就不会模棱两可，并且您可以访问各种特定日期的功能。如果您必须存储为字符串，则可以如上所述转换回日期或使用

```
DateTime.TryParse(datestring, out dateVariable); 
```

这不会为无效格式引发异常。取决于你是否想要例外！

另外，我建议您是否必须使用字符串才能在字符串中使用 3 个字符的月份，这再次消除了歧义，例如

```
"dd-MMM-yy hh:mm tt" 
```

# angularjs - 向现有元素添加指令

> ID：15910920
> 
> 赞同：2
> 
> 时间：2013-04-09T19:34:09.100
> 
> 标签：angularjs, angularjs-directive

我正在尝试在将来的某个时候将所需的指令添加到元素中。在示例中，如果模型字段是脏的，则将元素设为必需。我试图设置所需的属性（有点乐观）我现在正在编译和链接元素并尝试用新元素替换旧元素。

我的元素只是从页面上消失了？我会以正确的方式解决这个问题吗？

```
 app.directive('requiredIfDirty', function ($compile, $timeout) {
                        return {
                            restrict: "A",
                            require: // element must have ng-model attribute.
                            'ngModel',
                            link: // scope = the parent scope
                            // elem = the element the directive is on
                            // attr = a dictionary of attributes on the element
                            // ctrl = the controller for ngModel.
                            function (scope, elem, attr, ctrl) {
                                var unsubscribe = scope.$watch(attr.ngModel, function (oldValue, newValue) {
                                    if(angular.isUndefined(oldValue)) {
                                        return;
                                    }
                                    attr.$set("required", true);
                                    $timeout(function () {
                                        var newElement = $compile(elem)(scope);
                                        elem.replaceWith(newElement);
                                    }, 1);
                                    unsubscribe();
                                });
                            }
                        };
                    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-06T14:50:02.020

你必须`Transclusion`在你的指令中使用。这将允许您拉出您的内容，附加`required`到它，然后编译它。这是一个很好的教程，解释了基本概念：[Egghead.io - AngularJS - Transclusion Basics](http://www.youtube.com/watch?v=cjrBTjMvruI)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-04-09T20:03:38.757

你实际上不需要这样做。Angular 实际上有一个指令`ng-required`

看

[http://docs.angularjs.org/api/ng.directive:input.text](http://docs.angularjs.org/api/ng.directive:input.text)

您可以在任何具有 ng-model 的字段上向 ng-required 提供表达式，它会根据表达式评估为 true 将所需的验证器添加到其中。

从文档

> **ngRequired(optional)** – `{string=}`– 当 ngRequired 表达式的计算结果为 true 时，向元素添加必需的属性和必需的验证约束。当您想将数据绑定到所需属性时，请使用 ngRequired 而不是 required。

# java - 在给定情况下使用 StringBuilder 构建字符串的最佳实践是什么？

> ID：15910921
> 
> 赞同：0
> 
> 时间：2013-04-09T19:34:10.853
> 
> 标签：java, string, stringbuilder

我们正在构建一大块文本并使用 StringBuilder 的单个实例。我们已将文本块分解为小节 (5)，并为每个小节分配了相应的方法。每个方法都接受输入变量并输出文本。

将 StringBuilder 对象传递给每个方法，在方法中附加数据并返回 void 还是让每个方法返回一个我们附加到较小函数之外的对象的字符串更好？

这两种想法有什么好处/缺点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T19:36:45.047

我会传入`StringBuilder`, 并直接附加到它 - 假设您出于任何其他原因实际上不需要该中间字符串。

使用的全部`StringBuilder`目的是避免创建比您需要的更多的字符串。

仅返回字符串的主要优点是，如果您想在*不*附加到 a的情况下使用相同的代码`StringBuilder`，它会更方便和惯用。但我假设这些实际上是从“构建文本”方法调用的私有方法，这使得它不再是一个问题。

Zim-Zam 关于并行性的观点很有趣，但我不会担心这一点，除非你*真的*打算并行化它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T19:36:37.297

传入 StringBuilder 更节省内存，因为不需要垃圾收集正在附加的字符串。返回字符串更适合并行化，因为字符串可以同时生成，然后按顺序附加。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T19:49:54.107

固定文字将被编译器检测到，所以这里的字符串更好用

```
String s1="str1"+"str2"+"str3"; 
```

当您需要动态附加字符串时，更喜欢 StringBuilder

```
String s1="";
s1+="str1";
s1+="str2";
s1+="str3"; 
```

并使用 StringBuilder 的方法追加并最终转换为 toString();

通过使用 + 稍后追加（未完成编译器优化）创建更多对象

所以使用 StringBilder

# reporting-services - 如果没有行，SSRS 会隐藏具有多个组的表的部分内容

> ID：15910930
> 
> 赞同：1
> 
> 时间：2013-04-09T19:35:01.703
> 
> 标签：reporting-services

我在互联网和 stackoverflow 上搜索了几个小时，但没有找到解决我问题的方法。

我在 SSRS 中有一份报告，其中包含一个表格，里面有 3 个叠瓦组。此报告显示给定教师的学生。每个学生都参加按学科分组的科目。总之，一个学科组内部有一个动态的明细行，这个学科组在一个学生组内部。所以一个学生可以有 3 门数学课，2 门地理课和 2 门历史课。

当用户想要生成报告时，他必须为这些参数提供一个值：

```
Int Year : View courses were followed in the year specified.
Int Center : Center number to which the user want to get students
Int TeacherID : ID specified by the user to obtain the list of students 
       under the supervision of a teacher with this ID.
Int exceeding percentage : Show only courses with the hours performed 
       that are beyond the number of hours initially planned. 
```

因此，如果课程的超出百分比低于参数中指定的超出百分比，我要做的是隐藏详细信息行。

我需要的是如果没有课程行，隐藏学科组。如果学生没有纪律，请隐藏学生信息组。这是我的报告的屏幕截图（我知道法语）。组由彩色框表示：

```
Red = Student infos
Green = Disciplines
Pink = detail row for courses 
```

[http://img109.imageshack.us/img109/5516/groupsv.png](http://img109.imageshack.us/img109/5516/groupsv.png)

希望大家理解我的需求。我知道我犯了错误，因为我的英语不是最好的，但我会尽我所能澄清任何事情。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T20:03:52.973

如果我理解您正确，您希望隐藏父级别，如果它的子“详细信息”行中没有数据。

我会右键单击左下角的“行组”。选择“可见性”并选择“表达式”，执行以下可见性表达式：

```
=iif( Isnothing(Sum(Fields!Percentage.Value)) OR Sum(Fields.Percentage.Value) = 0, TRUE, FALSE) 
```

如果所有相关子项的总和为零或为零，则应通过将“隐藏”属性设置为 true 来隐藏该分组父行。

# android - 更新列表视图android

> ID：15910931
> 
> 赞同：1
> 
> 时间：2013-04-09T19:35:03.497
> 
> 标签：android, listview, android-fragments, android-arrayadapter

我对安卓很陌生！我在我的 listfragment 中创建了一个带有两个列表视图的垂直线性布局，我只希望每个列表视图都显示可以在运行时更新的简单字符串数组。我似乎很难意识到如何做到这一点。这是我的文件：

```
<?xml version="1.0" encoding="utf-8"?>
    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/fragment_container"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_gravity="center"
        android:orientation="horizontal" >
        <ListView
            android:id="@+id/trainslist"
            android:layout_width="240dp"
            android:layout_height="wrap_content" >
        </ListView>
        <ListView
            android:id="@+id/timelist"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1" >
        </ListView>         
</LinearLayout> 
```

这是一个片段 XML 文件，这里是一个片段文件：

```
public class ToFragment extends ListFragment {   
    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        String[] countries = {
                "Japan",
                "USA"
        };
       ArrayAdapter<String> adapter1 = new ArrayAdapter<String>(inflater.getContext(), android.R.layout.simple_list_item_1, countries);             
        setListAdapter(adapter1);
        return super.onCreateView(inflater, container, savedInstanceState);
    }
} 
```

看，在这里我尝试让列表视图之一显示我需要的内容并且它有效。但我不明白如何在运行时（而不是来自 onCreateView？）从 Activity 转换它的内容。我也不清楚什么是 android.R.layout.simple_list_item_1？为什么，当我编写它时，android 将我的数组发送到第一个列表视图，而不是第二个？

第二个问题是我无法以这种方式更改第二个列表视图内容，即使不是在运行时！请帮我解决这个问题！我真的觉得太难了……

# operating-system - 分叉进程的执行顺序

> ID：15910944
> 
> 赞同：1
> 
> 时间：2013-04-09T19:35:45.010
> 
> 标签：operating-system

```
#include<stdio.h>
#include<stdlib.h>
#include<unistd.h>
#include<sys/sem.h>
#include<sys/ipc.h>
int sem_id;
void update_file(int number)
{
    struct sembuf sem_op;
    FILE* file;
    printf("Inside Update Process\n");
    /* wait on the semaphore, unless it's value is non-negative. */
    sem_op.sem_num = 0;
    sem_op.sem_op = -1;   /* <-- Amount by which the value of the semaphore is to be decreased */
    sem_op.sem_flg = 0;
    semop(sem_id, &sem_op, 1);

    /* we "locked" the semaphore, and are assured exclusive access to file.  */
    /* manipulate the file in some way. for example, write a number into it. */
    file = fopen("file.txt", "a+");
    if (file) {
        fprintf(file, " \n%d\n", number);
        fclose(file);
    }

    /* finally, signal the semaphore - increase its value by one. */
    sem_op.sem_num = 0;
    sem_op.sem_op = 1;
    sem_op.sem_flg = 0;
    semop( sem_id, &sem_op, 1);
}
void write_file(char* contents)
{
    printf("Inside Write Process\n");
    struct sembuf sem_op;
    sem_op.sem_num = 0;
    sem_op.sem_op = -1;
    sem_op.sem_flg = 0;
    semop( sem_id, &sem_op, 1);

    FILE *file = fopen("file.txt","w");
    if(file)
    {
        fprintf(file,contents);
        fclose(file);
    }

    sem_op.sem_num = 0;
    sem_op.sem_op = 1;
    sem_op.sem_flg = 0;
    semop( sem_id, &sem_op, 1);
}
int main()
{
    //key_t key = ftok("file.txt",'E');
    sem_id = semget( IPC_PRIVATE, 1, 0600 | IPC_CREAT);
    /*here 100 is any arbit number to be assigned as the key of the
    semaphore,1 is the number of semaphores in the semaphore set, */
    if(sem_id == -1)
    {
        perror("main : semget");
        exit(1);
    }
    int rc = semctl( sem_id, 0, SETVAL, 1);
    pid_t u = fork();
    if(u == 0)
    {
        update_file(100);
        exit(0);
    }
    else
    {
        wait();
    }
    pid_t w = fork();
    if(w == 0)
    {
        write_file("Hello!!");
        exit(0);
    }
    else
    {
        wait();
    }
} 
```

如果我将上述代码作为 ac 代码运行，则 write_file() 函数在 update_file() 函数之后调用，而如果我将相同的代码作为 c++ 代码运行，则执行顺序是相反的……为什么会这样？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T00:23:54.480

只是一些建议，但在我看来这可能是由多种因素引起的：

1.  wait() 调用应该采用指针参数（可以为 NULL）。编译器应该已经捕捉到了这一点，但是您必须在允许您的语法的地方选择另一个定义。您还缺少 sys/wait.h 的包含。这可能就是编译器没有像我预期的那样抱怨的原因。

2.  根据您的机器/操作系统配置，fork 的进程可能要等到父进程产生后才能运行。假设您正在调用的“wait()”没有按照我们预期的方式工作，那么父级可能会在子级运行之前完全执行。

不幸的是，我无法复制相同的时间行为。但是，当我为这两种情况（C 和 C++）中的每一种生成汇编文件时，我注意到 C++ 版本缺少“等待”系统调用，但 C 版本与我预期的一样。对我来说，这表明在 C++ 头文件中的某个地方，这个没有参数的特殊版本被 #defined 出代码。这种差异可能是您所看到的行为背后的原因。

简而言之......添加#include，并将您的等待调用更改为“wait（0）”

# java - 查找未正确关闭的数据库连接

> ID：15910945
> 
> 赞同：2
> 
> 时间：2013-04-09T19:35:49.670
> 
> 标签：java, sql, database, connection

在数据库连接打开但未关闭的大型项目的代码中发现了一些泄漏。DB是DB2，连接是在java程序中打开的，并且在try catch中没有正确关闭，最后......

有没有办法在java中搜索所有打开连接但不关闭它的方法？我试图避免手动查看打开连接的每个方法以查看它是否正确关闭。

对这项繁琐任务的任何帮助都会很酷。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T19:47:16.473

[FindBugs](http://findbugs.sourceforge.net)和[PMD](http://pmd.sourceforge.net)（开源静态代码检查器）都支持检测未关闭的数据库连接。它们可以集成到您的构建过程和/或 IDE 中。

尤其是 PMD，默认情况下可能很嘈杂，但可以使用[自定义规则集](http://pmd.sourceforge.net/pmd-5.0.3/howtomakearuleset.html)或通过[其他方式](http://pmd.sourceforge.net/pmd-5.0.3/suppressing.html)对其进行调整。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T19:46:25.270

我首先想到的是实现一个利用抽象语法树的工具（例如作为一个 Eclipse 插件）。您可以编写一个工具来检查您的方法，检查节点的连接初始化命令，并检查关闭命令。参见：- [http://en.wikipedia.org/wiki/Abstract_syntax_tree](http://en.wikipedia.org/wiki/Abstract_syntax_tree)参见：- [http://www.eclipse.org/articles/Article-JavaCodeManipulation_AST/index.html](http://www.eclipse.org/articles/Article-JavaCodeManipulation_AST/index.html)

否则，我认为也可以使用某种自定义解析器来检查与等效的数据库打开语句在同一级别内是否存在等效的 .close() 语句。您必须检查您有多少级别（使用“{”和“}”字符。

请参阅：[在 java 中编写自定义语法解释器？](https://stackoverflow.com/questions/7537283/write-a-custom-syntax-interpreter-in-java)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T20:12:33.667

关于您的问题，您还可以使用确保您关闭连接的方法来实现一个类。在我发布了一个例子。

```
public class Cleaner {

private String dbName = "";
private Connection connection;

public static void CloseResSet(ResultSet res) {
    try {
        if (res != null) {
            res.close();
        }
    } catch (SQLException e) {
        writeMessage(e, "CloseResSet()");
    }
}

public static void closeStatement(Statement stm) {
    try {
        if (stm != null) {
            stm.close();
        }
    } catch (SQLException e) {
        writeMessage(e, "closeStatement()");
    }
}

public static void closeConnection(Connection connection) {
    try {
        if (connection != null) {
            connection.close();
        }
    } catch (SQLException e) {
        writeMessage(e, "closeConnection()");
    }
}

public static void rollBack(Connection connection) {
    try {
        if (connection != null && !connection.getAutoCommit()) {
            connection.rollback();
        }
    } catch (SQLException e) {
        writeMessage(e, "rollBack()");
    }
}

public static void setAutoCommit(Connection connection) {
    try {
        if (connection != null && !connection.getAutoCommit()) {
            connection.setAutoCommit(true);
        }
    } catch (SQLException e) {
        writeMessage(e, "setAutoCommit()");
    }
}

public static void writeMessage(Exception e, String message) {
    System.err.println("*** Error: " + message + ". ***");
    e.printStackTrace(System.err);
}

private void OpenConnection() {
    try {
        connection = DriverManager.getConnection(dbName);
        System.out.println("Databaseconnection established");
    } catch (SQLException e) {
        Cleaner.writeMessage(e, "Constructor");
        Cleaner.closeConnection(connection);
    }
}

private void closeConnection() {
    System.out.println("Closes databaseconnection");
    Cleaner.closeConnection(connection);
}
public static void main(String[] args){
    }
} 
```

# pygame - Pygame - 限制精灵的实例

> ID：15910947
> 
> 赞同：0
> 
> 时间：2013-04-09T19:35:56.377
> 
> 标签：pygame, sprite

我正在使用一个关于我正在开发的空间卷轴射击的精灵生成示例。通过慢慢尝试了解它是如何工作的，我设法让多个精灵横穿屏幕。但是，会生成许多精灵。

所以我遇到的问题是限制精灵的初始数量，而不是代码产生的数量。我想过使用`if sprites.__len__ < 10: sprites.add(drone)`，但是当我尝试时，它没有用。

我的想法是，每次循环时，它都会检查组中精灵的数量，如果少于 10 个，则向组中添加一个精灵，直到达到 10 个。这样，如果它离开屏幕或被销毁，那么它会继续检查并保持不变。

这是播放器类：

```
class Player(pygame.sprite.Sprite):
    def __init__(self, *groups):
        super(Player, self).__init__(*groups)
        self.image = pygame.image.load('player.png')
        self.rect = pygame.rect.Rect((screen_width, (random.randrange(0,screen_height))), self.image.get_size())
        self.dx = -10
        self.pos = random.randrange(0,screen_height)

    def update(self):
       self.rect.centerx += self.dx

       if self.rect.right < 0:
           self.kill() 
```

这是关于添加精灵的部分。

```
 sprites.update()
        screen.fill((200, 200, 200))
        sprites.draw(screen)

        drone = Player()
        self.y = random.randrange(0,screen_height)
        sprites.add(drone)

        pygame.display.flip() 
```

这可能很明显，但我仍在学习，所以指导会很棒。

第二个问题 - 更多的是对思想的确认。如果我不希望精灵在屏幕底部绘制一半。我基本上是说如果self.rect.bottom > screen_height，那么定位精灵@screen_height

完整来源： http: [//pastebin.com/PLRVHtxz](http://pastebin.com/PLRVHtxz)

编辑 - 我想我已经解决了，只需要让精灵运行更顺畅。

```
while 1:
            clock.tick(40)
            numberAlien = 5

            for event in pygame.event.get():
                if event.type == pygame.QUIT:
                    return
                if event.type == pygame.KEYDOWN and event.key == pygame.K_ESCAPE:
                    return

                sprites.update()
                screen.fill((200, 200, 200))
                sprites.draw(screen)

                drone = Player()
                if sprites.__len__() < numberAlien:
                    self.y = random.randrange(0,screen_height)
                    sprites.add(drone)

                pygame.display.flip() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T07:54:31.593

您可以继承 SpriteGroup，添加一个新的精灵总数字段，并检查 add 方法以查看是否可以添加。您不应该使用 __ 测试检查任何变量。

至于运动，我相信，因为`clock.tick(40)`. 它等待 40 毫秒，直到它恢复运行。您可以将刻度减少到 10，并调整您为精灵更改的 dx，或者尝试更通用的方法。

对clock.tick() 的调用返回自上次调用以来的毫秒数。这将是您的时间增量。然后，您可以拥有一个全局 SPEED。要移动的像素数量将从 计算`SPEED * delta`。

# php - PHP Pear 电子邮件文本编码不例外

> ID：15910954
> 
> 赞同：1
> 
> 时间：2013-04-09T19:36:20.453
> 
> 标签：php, email, header, pear, multipart

如何正确设置多部分电子邮件的文本编码`Pear`？

我看过很多例子，我相信我设置正确。但是，在发送电子邮件时，`charset=ISO-8859-1`即使我指定了`UTF-8`.

当我决定发送包含文本和 HTML 部分的多部分电子邮件时，这个问题就开始了。我尝试设置内容类型，但似乎没有什么不同。

下面是我正在使用的代码。任何建议表示赞赏。

```
function send_html_email($to, $from, $subject, $html, $plainTxt ) {
    require_once "Mail.php";
    require_once "Mail/mime.php";    

    $host = "ssl://secure.xxx.com";
    $port = "xxx";
    $username = "xxx";
    $password = "xxx";

    $headers = array (
    'charset' => 'UTF-8',
    'From' => $from,
            'To' => $to,
            'Subject' => $subject,
        'MIME-Version' => "1.0"
             );  

    $crlf = "\n";
            $mime = new Mail_mime($crlf);

    $mime->setHTMLBody($html); 
    $mime->setTXTBody($plainTxt); 
            $body = $mime->get();
            $headers = $mime->headers($headers);

            $smtp = Mail::factory('smtp', array ('host' => $host,
    'port' => $port,
    'auth' => true,
    'username' => $username,
    'password' => $password)); 

            $mail = $smtp->send($to, $headers, $body);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T19:41:54.013

尝试这样的标题：

```
$headers['Content-Type'] = "text/plain; charset=\"UTF-8\"";
$headers['Content-Transfer-Encoding'] = "8bit"; 
```

参考： http: [//pear.php.net/manual/en/package.mail.mail.factory.php#13207](http://pear.php.net/manual/en/package.mail.mail.factory.php#13207)

作为旁注，Pear 是“可重用 PHP 组件的框架和分发系统”。Mail 组件只是 Pear 提供的众多组件之一。

# r - R如何对data.frame列表进行采样，向量作为采样大小

> ID：15910957
> 
> 赞同：0
> 
> 时间：2013-04-09T19:36:29.920
> 
> 标签：r, list

我有一个 data.frames 列表：

```
ldf <- list(structure(c(2, 0.15, 0.52, 5, 6, 2, 1), .Dim = c(1L, 7L), .Dimnames = list(
    "M01", c("fitness", "cMRc", "cMRcg", "pMR", "cMEnr", "gMR", 
    "sex"))), structure(c(4, 4, 9, 0.22, 0.19, 0.05, 0.555, 0.495, 
0.605, 8, 7, 4, 15, 10, 4, 3, 3, 3, 1, 1, 1), .Dim = c(3L, 7L
), .Dimnames = list(c("M03", "M06", "M12"), c("fitness", "cMRc", 
"cMRcg", "pMR", "cMEnr", "gMR", "sex"))), structure(c(4, 4, 7, 
7, 0.145, 0.09, 0.2, 0.195, 0.46, 0.68, 0.45, 0.48, 6, 3, 7, 
5, 8, 3, 10, 9, 4, 4, 4, 4, 1, 1, 1, 1), .Dim = c(4L, 7L), .Dimnames = list(
    c("M05", "M08", "M09", "M10"), c("fitness", "cMRc", "cMRcg", 
    "pMR", "cMEnr", "gMR", "sex"))), structure(c(10, 10, 0.145, 
0.18, 0.725, 0.4, 6, 5, 9, 5, 5, 5, 1, 1), .Dim = c(2L, 7L), .Dimnames = list(
    c("M02", "M04"), c("fitness", "cMRc", "cMRcg", "pMR", "cMEnr", 
    "gMR", "sex")))) 
```

如何对这些 data.frames 进行采样并根据向量 s 调整采样大小：

```
s <- c(1,2,3,1) 
```

所以`ldf[[1]]`，我会得到：

```
ldf[[1]][sample(nrow(ldf[[1]]),size=1),] 
```

因为`ldf[[2]]`，我会得到：

```
ldf[[2]][sample(nrow(ldf[[2]]),size=2),] 
```

等等……

如何将其包装在 lapply 电话中，我猜接近：

```
lapply(ldf,function(x) x[sample(nrow(x),s),]) # but it's not sampling according to sizes values in s 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T20:13:50.547

您可以`mapply`像这样使用（如@Justin 所述）：

```
f <- function(x,y){
  rep <- y > nrow(x)    ## repeat if y > nrow(x)
  x[sample(nrow(x),size=y,rep=rep),]
}
s <- c(1,2,3,1)
mapply(FUN=f,ldf,s ) 
```

# javascript - 创建一个垂直菜单以在其右侧显示内容

> ID：15910963
> 
> 赞同：1
> 
> 时间：2013-04-09T19:36:50.187
> 
> 标签：javascript, html, css, joomla, menu

我正在使用我创建的模板创建一个 joomla 网站。在我想创建的页面之一（在内容 div 中）一个垂直菜单以在其右侧显示可点击的内容。

我用自定义 html 制作了一个，我只需在模块中插入 html 代码，然后在文章中插入模块。

我的菜单代码是这样配置的

```
<div1>
<div2>
</div2>
<div3>
</div3>
</div1> 
```

其中 div2 和 3 都向左浮动，（div2 是宽度为 30% 的菜单，div3 是宽度为 70% 的内容）。我添加了一个 javascript，这样当我单击其中一个菜单时，它只会淡入文本。

基本上我想要的是这个，但没有表格：[http://clinica.chip7.pt/servico_diagnostico_gratis.php](http://clinica.chip7.pt/servico_diagnostico_gratis.php)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T19:49:54.767

我根据您的问题举了一个我认为您正在寻找的例子，很难说。

**这是演示：http:** [//jsfiddle.net/tATWE/1/](http://jsfiddle.net/tATWE/1/)

**HTML：**

```
<div id="outer-container">  
    <div id="header">  
        <h1>{ Header }</h1>  
    </div>  
    <div style="clear: both">  
    </div>  

    <div id="top-Nav">  
        <h1>{ Top Navigation }</h1>  
    </div>  
    <div style="clear: both">  
    </div>  

    <div id="left-nav">  
        <h1>{ Left Side Navigation }</h1>  
        <ul>
            <li>Nav Links</li>
            <li>Nav Links</li>
        </ul>
    </div>  
    <div id="content-container">  
        <h1>{ Content }</h1>  
    </div>  
    <div style="clear: both">  
    </div>  

    <div id="footer">  
        <h1>{ Footer }</h1>  
    </div>  
</div> 
```

**CSS：**

```
body {  
    margin: 0px;  
    padding: 0px;  
}  

/* h1 tag style */  
h1 {  
    margin: 0px;  
    padding: 0px;  
    font-family: arial;  
    font-size: 140%;  
    color: #fff;  
}  

/* CSS Style Rule for Div having id="outer-container" */  
/* outer-container will hold the whole assembly of  
   nested div overlays. */  
/* It will also center align the design */  
#outer-container {  
    width: 990px;  
    margin: 0 auto;  
}  

/* footer CSS Style Rule */  
#header {  
    width: 990px;  
    height: 90px;  
    background-color: blue;  
}  

/* footer CSS Style Rule */  
#footer {  
    width: 990px;  
    background-color: red;  
}  

/* content-container CSS Style Rule */  
/* It will hold the main content of the page. */  
/* it is the right side column */  
/* in this 2 columns div layout */  
#content-container {  
    width: 730px;  
    height: 400px;  
    background-color: green;  
    margin: 2px 0px 2px 0px;  
    float: left;  
}  

/* left side navigation that is the left side column of */  
/* 2 columns div layout */  
#left-nav {  
    width: 258px;  
    height: 400px;  
    background-color: navy;  
    margin: 2px 2px 2px 0px;  
    float: left;  
}
#left-nav li {  
    color: red;  
}  

/* Top navigation CSS Style Rule */  
#top-Nav {  
    width: 990px;  
    background-color: black;  
    margin: 2px 0px 0px 0px;  
} 
```

# heroku - Heroku Dyno 有多少个 CPU 内核？

> ID：15910965
> 
> 赞同：28
> 
> 时间：2013-04-09T19:36:58.483
> 
> 标签：heroku, cpu, celery, cpu-cores

我将 Django 与 Celery 3.0.17 一起使用，现在试图弄清楚默认运行了多少 celery 工人。

从[这个链接](http://docs.celeryproject.org/en/latest/configuration.html#celeryd-concurrency)我了解到（没有修改这个配置）工作人员的数量当前必须等于 CPU 核心的数量。这就是为什么我需要前者。我无法通过谷歌搜索或搜索[Heroku 的开发中心](https://devcenter.heroku.com/articles/dynos)找到官方答案。我认为它是 4 个核心，因为我看到 4 个并发连接到我的 AMQP 服务器，但我想确认一下。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-06-12T07:01:04.157

CPU 数量未公布，可能会发生变化，但您可以在运行时通过运行`grep -c processor /proc/cpuinfo`.

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2015-10-06T20:51:00.243

根据[https://blog.heroku.com/archives/2014/2/3/heroku-xl](https://blog.heroku.com/archives/2014/2/3/heroku-xl)

> ```
> |       | 1X Dyno      | Performance Dyno  |
> |-------|--------------|-------------------|
> | RAM   | 512 MB       | 6 GB              |
> |       | 1x - 4x      | 40x (8 CPU cores) |
> | Price | $0.05 / hour | $0.80 / hour      | 
> ```

2X dynos 也有 4 个核心：

```
$ heroku run --size=2X grep -c processor /proc/cpuinfo --app app-name
Running grep -c processor /proc/cpuinfo on app-name... up, run.3685
4 
```

但是 PX 测功机有 8 个核心：

```
$ heroku run --size=PX grep -c processor /proc/cpuinfo --app app-name
Running grep -c processor /proc/cpuinfo on app-name... up, run.4731
8 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2020-11-17T17:01:13.510

[heroku puma 文档](https://devcenter.heroku.com/articles/deploying-rails-applications-with-the-puma-web-server#process-count-value)建议您可以通过在测功机上运行来发现这一点`nproc`：

因此，例如，要查看 performance-m 上有多少，运行：

```
$ heroku run bash --size=performance-l
$ nproc
8 
```

但然后**除以 2**，因为：

> nproc 返回的值除了物理内核之外还包括“超线程”，这两者的组合称为 vCPU 计数。Heroku 上使用的所有物理内核都有一个超线程，因此要获得物理内核的“真实”数量除以 2。

这意味着`performance-l`有 4 个 CPU。

当我在 上执行相同操作时`performance-m`，我得到 2，这意味着实际上只有 1 个 CPU。

Standard-1x 和 Standard-2x 都`nproc`告诉我“8”，意思是 4 个 CPU，但是 heroku puma 文档警告说这些 CPU 是**与其他用户共享的，**因为标准 dyno 是多租户的。

> 来自 free、hobby、standard-1x 和 standard-2x dynos 的 nproc 的值是正确的，但是这些内核在容器中运行的多个应用程序之间共享。虽然这些 dyno 的 nproc 都将返回 8，但最好假设一次只能执行一个进程。

# javascript - OpenLayers 在屏幕上显示所有标记

> ID：15910968
> 
> 赞同：13
> 
> 时间：2013-04-09T19:37:15.167
> 
> 标签：javascript, openlayers, openstreetmap

如何获取地图上的所有标记，以便用户可以看到所有标记？

我有一些标记。我在地图上显示它们。我从所有标记的 lon 和 lat 的最高和最低数字的平均值中得到中心 LonLat。

因此，我使用以下方法将地图设置为所有标记的中心点：

```
map.setCenter(centerLonLat, 8); 
```

8 只是一个随机缩放级别。有没有办法计算完美的缩放级别，以便所有标记都显示在地图中？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-10T06:14:18.473

[OpenLayers getDataExtent() 函数在此处](http://dev.openlayers.org/docs/files/OpenLayers/Layer/Vector-js.html#OpenLayers.Layer.Vector.getDataExtent)给出了一种类似的避免循环的方法。您需要将其应用于包含标记的图层：

```
var newBound = map.myLayer.getDataExtent();
map.zoomToExtent(newBound); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2017-12-28T20:12:28.910

这是一个旧线程，但是随着对 OpenLayers 的更改，我想我会为此发布一个新的解决方案。如果您使用[ol.source.Vector](https://openlayers.org/en/latest/apidoc/ol.source.Vector.html)作为图层源，那么您可以调用以下行来使地图视图适合您的数据。

```
map.getView().fit(vectorSource.getExtent()); 
```

这同时使地图居中并设置缩放，以便您的所有数据一次可见。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-04-09T19:58:11.417

使用[zoomToExtent()让它工作](http://dev.openlayers.org/docs/files/OpenLayers/Map-js.html#OpenLayers.Map.zoomToExtent)

```
var newBound = OpenLayers.Bounds(); 
```

对于每个标记 lonlat：

```
newBound.extend(lonLat); 
```

然后将其传递给函数：

```
map.zoomToExtent(newBound); 
```

# java - 将 java 事件通知给 JSF Bean

> ID：15910973
> 
> 赞同：0
> 
> 时间：2013-04-09T19:37:40.407
> 
> 标签：java, spring, jsf, cometd, bayeux

当java程序收到异步消息时，有什么方法可以通知jsf/spring bean？而且，java程序是一个Java BayeuxClient（Cometd）作为pojo。程序成功接收元频道和订阅频道上的消息，如下所示。

```
@Listener(Channel.META_CONNECT)
    public void metaConnect(Message message) {
    boolean connected = message.isSuccessful();
            ...
    }

@Subscription("/notification")
    public void subscribeUpdates(Message message) {

    String updates=message.getDataAsMap().toString()    
        .....   
    } 
```

FacesContext 在这些方法中不可用，甚至 bean 也被注释为 (@Component @Scope("session") 用于 jsf/spring 集成。无法注入 bean，因为 facesContext 不可用。我们如何注入 jsf bean 或通知 spring bean以上方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T09:32:26.137

看看[CometD-Spring 集成](http://docs.cometd.org/reference/#java_server_services_integration_spring)。

您可以在 Spring 配置文件中定义 CometD 服务（或对其进行注释），并将依赖项与通常的 Spring 机制联系起来。

我不建议`FacesContext`直接访问，因为这会将您绑定到 HTTP 传输，并且您将无法使用 WebSocket 传输，这会给您带来性能提升。

我建议您将消息传递逻辑重构为与传输无关的 POJO，即不依赖于`HttpServletRequest`, `HttpSession`,`FacesContext`等类。

# c++ - 与 Windows 95 兼容的 C++ 程序

> ID：15910974
> 
> 赞同：7
> 
> 时间：2013-04-09T19:37:40.757
> 
> 标签：c++, visual-studio, compiler-construction, visual-studio-2012, windows-95

我错误地认为我用 VS 2012 编写的 C++ 程序可以在运行 Windows 95 的计算机上运行。

现在我知道为什么它不起作用了。所以我看了一下其他免费的编译器，例如Dev-C++ 5，但是在浏览了Dev-C++网站的论坛后，似乎它也不能用于制作Windows 95兼容的应用程序。

所以我的问题是，我应该使用什么来编译我的 C++ 应用程序以使其在 Windows 95 和从 95 到 8 的所有其他 Windows 版本上工作？

编辑：在没有合适的答案之后。

我不介意为不同的 Windows 版本构建不同的 .exe。

编辑：问题解决了！

感谢所有在此讨论中提供帮助的人。

使用 MingW 和代码块，我只用了 20 分钟将代码适应 Win 95 友好的库......并且一整天在 VM 中安装 Win 95 哈哈。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T17:26:58.193

首先，为什么是Windows 95？好吧，无论如何，您可以为此使用 MinGW。[Code::Blocks](http://www.codeblocks.org/)是我最喜欢的带有 MinGW 的 IDE。你可以从[这里](http://www.codeblocks.org/downloads/)下载。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-05-28T04:39:02.153

您需要 Visual C++ 2005 Express 或 Pro！这是支持 95/98/ME 的最后一个版本。任何较新的版本都将编译强制限制在 Windows XP-SP2 或更高平台上的可执行文件。

您还必须注意您调用的 WinAPI，因为在 95 中可用的 WinAPI 较少，因此您需要检查 MSDN 库中您使用的所有内容，以查看它是否是从第一天开始可用的原始 API（例如 CreateFileA、 ReadFile、CloseFile 等）。我想如果你用ANSI“C”编码并使用基本的东西你会没事的，但这取决于。

仅供参考，补充 2005 Visual Studio 安装的最后一个 MSDN 库是“Microsoft Visual Studio 2005（2007 年 4 月版）”——如果你看的话，你可以找到一个 ISO，而且 Express 总是免费的，只是受到排除的限制完整的图形资源编辑器和其他东西。

# php - 使用该功能时 Woocommerce 优惠券 add_discount 错误

> ID：15910975
> 
> 赞同：0
> 
> 时间：2013-04-09T19:37:43.450
> 
> 标签：php, wordpress, woocommerce, discount, coupon

我在通过代码添加优惠券折扣时遇到问题。我收到此错误

> 致命错误：第 43 行 C:\xampp\htdocs\teachingyounet\wp-content\themes\responsive\functions.php 中的非对象调用成员函数 add_discount()

我的代码：

```
function zkr_add_discount(){
    global $woocommerce;
    global $total_weight;

    if (current_user_can('distributor') || current_user_can('administrator')) {
        //do stuff for administrator roles
        wp_get_current_user();

        //$coupon = $current_user->cimy_uef_COUPON;
        $coupon = get_the_author_meta( 'cimy_uef_COUPON', $current_user->ID );
        //$wc = new  WC_Cart;
        //print_r($wc->coupons_enabled());die;
        //if($wc->coupons_enabled())
        /*$code = $coupon;
            $the_coupon = new WC_Coupon( $code );*/
        //$wc->add_discount('testcoupon'); //sanitize_text_field( $coupon )

        if (!$woocommerce->cart->add_discount( sanitize_text_field( $coupon ))){
            $woocommerce->show_messages();
        }

    }
} 
```

我以为我有答案，但我错了:(

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T20:52:45.580

也许您在购物车初始化之前调用 add_discount ？尝试使用：

```
 add_action( 'init', 'zkr_add_discount' ); 
```

在你的functions.php中

# .htaccess - 捕获中间的所有 url 实例 // 但不是 if 文件

> ID：15910976
> 
> 赞同：1
> 
> 时间：2013-04-09T19:37:44.243
> 
> 标签：.htaccess, url-rewriting, rewrite

我从工作中的 Code Igniter 项目中学到了一些关于 MVC 的知识，所以我正在努力做到这一点：

之前：index.php somepage.php secondpage.php

所有这些文件都有“include（header）和include（footer）等等......

相反，我想从 url 捕获用户正在寻找的页面 - >将它们重定向到索引，并始终在该位置加载页眉和页脚，唯一改变的是内容。

所以我用我的 htaccess 做到了这一点：

```
<IfModule mod_rewrite.c>
   Options +FollowSymLinks
   Options +Indexes
   RewriteEngine On
   RewriteCond %{SCRIPT_FILENAME} !-d
   RewriteCond %{SCRIPT_FILENAME} !-f
   RewriteRule (.*)/(.*)/(.*)/(.*)/(.*)/(.*) index.php?page=$1&child=$2&grandchild=$3&cousin=$4&aunt=$5&uncle=$6 [NC,QSA,L]
   RewriteRule (.*)/(.*)/(.*)/(.*)/(.*) index.php?page=$1&child=$2&grandchild=$3&cousin=$4&aunt=$5 [NC,QSA,L]
   RewriteRule (.*)/(.*)/(.*)/(.*) index.php?page=$1&child=$2&grandchild=$3&cousin=$4 [NC,QSA,L]
   RewriteRule (.*)/(.*)/(.*) index.php?page=$1&child=$2&grandchild=$3 [NC,QSA,L]
   RewriteRule (.*)/(.*) index.php?page=$1&child=$2 [NC,QSA,L]
   RewriteRule (.*^.css) index.php?page=$1 [NC,QSA,L]
</IfModule> 
```

有了心态，如果它有效，那就是一个开始..但它不起作用。首先我注意到我的css没有加载..显然 -f 没有帮助所以我添加了规则，但是 /img/bg.png 也不起作用..

我希望很明显我正在尝试捕获 URL 中 / / 之间的任何单词，并将它们作为参数传递给索引。你们知道如果文件存在，是否有任何智能重写规则实际上忽略重写？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T21:29:02.960

`RewriteCond`s 仅应用于下一个，在您的情况下是第一个`RewriteRule`。如果你想为每个 RewriteRule 使用它，你必须复制它

```
RewriteCond %{SCRIPT_FILENAME} !-d
RewriteCond %{SCRIPT_FILENAME} !-f
RewriteRule ^(.*?)/(.*?)/(.*?)/(.*?)/(.*?)/(.*?) index.php?page=$1&child=$2&grandchild=$3&cousin=$4&aunt=$5&uncle=$6 [QSA,L]

RewriteCond %{SCRIPT_FILENAME} !-d
RewriteCond %{SCRIPT_FILENAME} !-f
RewriteRule ^(.*?)/(.*?)/(.*?)/(.*?)/(.*) index.php?page=$1&child=$2&grandchild=$3&cousin=$4&aunt=$5 [QSA,L]

RewriteCond %{SCRIPT_FILENAME} !-d
RewriteCond %{SCRIPT_FILENAME} !-f
RewriteRule ^(.*?)/(.*?)/(.*?)/(.*?) index.php?page=$1&child=$2&grandchild=$3&cousin=$4 [QSA,L]
... 
```

此处不需要该`[NC]`标志，因为该模式不包含任何字母字符。

我还稍微修改了模式，`^`用于 URL 路径的开头和非贪婪版本`.*?`，这使得捕获在看到的第一个斜杠处停止。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T19:53:26.613

我改变了我的逻辑。我现在检测哪个页面，并将其余页面保存到变量设置中，这仅适用于 thr ？按照您的建议，在 .* 之后：

最终当前解决方案：

```
<IfModule mod_rewrite.c>
   Options +FollowSymLinks
   Options +Indexes
   RewriteEngine On
   RewriteCond %{SCRIPT_FILENAME} !-d
   RewriteCond %{SCRIPT_FILENAME} !-f
   RewriteRule ^(.*?)/(.*) index.php?page=$1&settings=$2 [QSA,L]

   RewriteCond %{SCRIPT_FILENAME} !-d
   RewriteCond %{SCRIPT_FILENAME} !-f
   RewriteRule ^(.*) index.php?page=$1 [QSA,L]
</IfModule> 
```

# c# - 插入access数据库

> ID：15910977
> 
> 赞同：5
> 
> 时间：2013-04-09T19:37:44.537
> 
> 标签：c#, sql, oledbcommand

我在将文本框中的数据插入 ms access 数据库时遇到问题，出现错误“ `Syntax error in INSERT INTO.`”

有人可以帮帮我吗？这是代码：

```
public void button1_Click(object sender, EventArgs e)//save
{ 
using (OleDbConnection conn = new   
OleDbConnection(@"Provider=Microsoft.Jet.OLEDB.4.0;Data 
Source=|DataDirectory|\productdb.mdb"))
{
OleDbCommand CmdSql = new OleDbCommand("Insert into [product](Kod, names, 
price,type,volume,manufacturer,importer)
enter code here
{
conn.Open();
CmdSql.Parameters.AddWithValue("@Kod", textBox1.Text);
CmdSql.Parameters.AddWithValue("@names", textBox2.Text);
CmdSql.Parameters.AddWithValue("@price", textBox3.Text);
CmdSql.Parameters.AddWithValue("@type", textBox4.Text);
CmdSql.Parameters.AddWithValue("@volume", textBox5.Text);
CmdSql.Parameters.AddWithValue("@manufacturer", textBox6.Text);
CmdSql.Parameters.AddWithValue("@importer", textBox7.Text);
CmdSql.ExecuteNonQuery();// i get the error here<<<
conn.Close();
}
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-09T19:43:19.203

您缺少`VALUES`插入语句的部分：

```
OleDbCommand CmdSql = new OleDbCommand("Insert into [product] (Kod, [names], price, type, volume, manufacturer, importer) VALUES (@Kod, @names, @price, @type, @volume, @manufacturer, @importer)", conn); 
```

而且您正在使用 Access 和 OldeDbCommand... 所以您实际上需要使用`?`而不是命名参数：

```
OleDbCommand CmdSql = new OleDbCommand("Insert into [product] (Kod, [names], price, type, volume, manufacturer, importer) VALUES (?, ?, ?, ?, ?, ?, ?)", conn); 
```

有关更多信息，请参阅[此问题](https://stackoverflow.com/questions/1216271/whats-wrong-with-these-parameters)。

附注：确保将所有保留关键字括在方括号中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T19:49:20.983

NAMES 一词是[MS-Access Jet SQL 的保留关键字](http://support.microsoft.com/kb/321266)，您需要将其括在方括号中。这是收到语法错误的原因。（当然，假设缺少的 VALUES 部分只是一个错字）。所以正确的语法是：

```
OleDbCommand CmdSql = new OleDbCommand("Insert into [product] (Kod, [names],price,type," + 
                                       "volume,manufacturer,importer) " +
                                       "VALUES (?, ?, ?, ?, ?, ?, ?)"; 
```

我已经用一个问号更改了参数的占位符。OleDb 不支持命名参数，只需一个问号即可，但是，以命令预期的确切顺序将参数添加到 OleDbCommand 至关重要。

您的代码还有另一个方面需要解决。您使用该方法`AddWithValue`来构建您的参数列表。这意味着参数的数据类型是由值的数据类型隐式派生的。你到处使用`TextBox.Text`，这是一个字符串。因此，当接收字段为不同类型（例如价格可能是数字）时，这可能会导致更新出现问题。如果数据库字段不是文本类型，则向传入参数值添加适当的转换。

例如：

```
// Supposing you have an in place validator for the text to be converted......
CmdSql.Parameters.AddWithValue("@price", Convert.ToDecimal(textBox3.Text)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T19:45:16.903

你写的命令不完整。它应该是这样的：

```
OleDbCommand CmdSql = new OleDbCommand("Insert into [product](Kod, names, 
price,type,volume,manufacturer,importer) values(@Kod,@names,@price,@type,
@volume,@manufacturer,@importer)"); 
```

命名参数仅在 SqlCommand 中不受 oledbcommand 支持，因此您必须使用 ? 代替命令文本中的参数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-26T19:37:27.367

```
OleDbConnection con = new   
OleDbConnection(@"Provider=Microsoft.Jet.OLEDB.4.0;Data 
Source=|DataDirectory|\productdb.mdb"

String strSQL="Insert into [product](Kod, names, 
price,type,volume,manufacturer,importer) values(@Kod,@names,@price,@type,
@volume,@manufacturer,@importer)"

        OleDBCommand CmdSql= new OleDBCommand(strSQL, con);
        CmdSql.CommandType = CommandType.Text;

        CmdSql.Parameters.AddWithValue("@Kod", textBox1.Text);
        CmdSql.Parameters.AddWithValue("@names", textBox2.Text);
        CmdSql.Parameters.AddWithValue("@price", textBox3.Text);
        CmdSql.Parameters.AddWithValue("@type", textBox4.Text);
        CmdSql.Parameters.AddWithValue("@volume", textBox5.Text);
        CmdSql.Parameters.AddWithValue("@manufacturer", textBox6.Text);
        CmdSql.Parameters.AddWithValue("@importer", textBox7.Text);

        con.Open();
        try
        {
             CmdSql.ExecuteNonQuery();
        }
        catch (Exception ex)
        {
            ex.Message.ToString();
        }
        finally
        {
            con.Close();
            CmdSql.Dispose();
        } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-02-26T06:41:51.877

```
string Query = "insert into tablename values ('" + txtstring.text + "', " + txtDouble.text + ")";
Cmd = new OleDbCommand();
Cmd.Connection = Con;
Cmd.CommandText = Query;
Cmd.ExecuteNonQuery(); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-09T19:47:04.363

[OleDbCommand](http://msdn.microsoft.com/en-us/library/system.data.oledb.oledbcommand.parameters.aspx)不支持命名参数，所以你的 SQL 语句应该是：

```
OleDbCommand CmdSql = new OleDbCommand(
    "INSERT INTO [product] " +
    "(Kod, names, price, type, volume, manufacturer ,importer) " +
    "VALUES (?, ?, ?, ?, ?, ?, ?)"
    , conn); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-09T23:49:49.267

始终以最简单、快速和难忘的方式插入。

```
String query = "Insert into Supplier(Kod, names,price,type,volume,manufacturer,importer) values('" + textBox1.text + "','" +textBox2.text + "','" + textBox3.text + "','" + textBox4.text + "','" + textBox5.text + "','" + textBox6.text + "','" + textBox7.text + "') ";
SqlCommand cmd = new SqlCommand(query, con);
con.Open();
cmd.ExecuteNonQuery();
con.Close(); 
```

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2014-03-04T15:46:57.010

> 菲尔兹 = "T1,T2,T3,T4,T5,T6,T7,T8" ; value =
> "'NAJAFI','DONYA','3/26/2014 12:00:00 AM','کد :1 '*','-','2014 年 3 月 4 日下午 7:13:29" 表 =“表”；

```
 OleDbConnection sc = new OleDbConnection("Provider=Microsoft.ACE.OLEDB.12.0;DataSource="+@"G:\sazenama\SazeNama\Sazeama\DBSazeNama.accdb");
                sc.Open();
                OleDbCommand sm;
                if (edit == false)
                    sm = new OleDbCommand("insert into " + Table + "(" + Feilds + ")     values(" + value + "')", sc);
                else
                    sm = new OleDbCommand("update  " + Table + " set " + Feilds + "'", sc);

                sm.ExecuteNonQuery(); 
```

# unit-testing - Java EE 6 中的嵌入式容器与托管容器有什么区别？

> ID：15910979
> 
> 赞同：7
> 
> 时间：2013-04-09T19:37:52.783
> 
> 标签：unit-testing, jboss, containers

我读过嵌入式容器比托管容器差，而托管容器又不如远程容器可靠。

Arquillian 允许您编写“真正的”测试，但我不知道这些容器类型之间的区别，主要是嵌入式与托管。

如果我在 Eclipse 中使用 Jboss，那是嵌入式容器还是托管容器？

如果我从命令行启动 Jboss，没有 Eclipse，那是嵌入式的、托管的还是远程的？

对于奖励积分，“独立”容器一词如何与这些术语相匹配？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2017-04-30T13:41:11.620

Max 链接的[Target 容器品种](http://docs.jboss.org/arquillian/reference/1.0.0.Alpha4/en-US/html/containers.html#d0e652)文档提供了概念背景和术语：

> Arquillian 识别三种容器交互方式：
> 
> 1.  **远程容器**驻留在与测试运行器不同的 JVM 中；Arquillian 绑定到容器以部署和取消部署测试存档并通过远程协议（通常是 HTTP）调用测试
>     
>     
> 2.  嵌入式**容器**与测试运行器驻留在同一个 JVM 中；由 Arquillian 管理的生命周期；对于没有 Web 组件的容器（例如 Embedded EJB），测试是通过本地协议执行的，对于具有 Web 组件的容器（例如 Embedded Java EE），测试是通过远程协议执行的
>     
>     
> 3.  **托管容器**与远程容器相同，但此外，其生命周期（启动/关闭）由 Arquillian 管理并作为单独的进程运行

现在我将尝试回答您的问题。

> 我读过嵌入式容器比托管容器差，而托管容器又不如远程容器可靠。

每种类型的容器都有其适当的用例。“更糟”或“更好”取决于您要做什么。

例如，大部分时间我都在编写容器运行的代码，所以我更喜欢使用远程容器进行测试，因为它节省了大量的启动/停止时间。

> Arquillian 允许您编写“真正的”测试，但我不知道这些容器类型之间的区别，主要是嵌入式与托管。

上面链接的文档中解释了差异。

> 如果我在 Eclipse 中使用 Jboss，那是嵌入式容器还是托管容器？

它是远程的，因为 Arquillian 无法控制它。这是一个与 Arquillian 生命周期完全分离的过程。

> 如果我从命令行启动 Jboss，没有 Eclipse，那是嵌入式的、托管的还是远程的？

仍然是一个远程容器。Eclipse 启动 JBoss 的方式与使用命令行几乎相同，而 Arquillian 无法控制它。

> 对于奖励积分，“独立”容器一词如何与这些术语相匹配？

独立意味着服务器不是集中管理控制的一部分，这意味着对一个节点所做的任何更改都不会与其他节点协调。

例如，如果您在独立节点 1 上创建数据源，则不会将其复制到节点 2。

这就是为什么域配置更可取的原因，因为您将以集中方式管理整个集群（参考：[操作模式](https://docs.jboss.org/author/display/WFLY10/Operating+modes)）。

# ruby-on-rails - 检索 Braintree 客户的订阅

> ID：15910980
> 
> 赞同：17
> 
> 时间：2013-04-09T19:37:53.133
> 
> 标签：ruby-on-rails, ruby, braintree

我想收集 Braintree 客户的所有订阅。当我浏览到网关中的客户页面时，我可以看到他们的订阅，但似乎没有类似的方法`subscriptions`存在 for `Braintree::Customer`，或者我可以搜索`Braintree::Subscriptions`by `customer_id`。

有一些迂回的方法可以访问客户的所有订阅，但它们非常慢。例如，我可以检索客户的所有交易，并为每个交易获取`subscription_id`（如果存在），然后检索具有该 ID 的订阅。这涉及到与 Braintree API 的大量通信，我希望有一个更有效的解决方案。

哦，我正在用 Rails 编程，但这个问题似乎不是 Rails 特有的。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-04-09T21:08:21.447

[我在布伦特里工作。]

客户有一个[`credit_cards`数组](https://developers.braintreepayments.com/reference/response/customer/ruby#credit_cards)，每张信用卡都有一个[`subscriptions`数组](https://developers.braintreepayments.com/reference/response/credit-card/ruby#subscriptions)。因此，如果您想要一个客户的所有订阅，您可以执行以下操作：

```
customer.credit_cards.map(&:subscriptions).flatten 
```

# asp.net - 对 .NET 的发布请求在 jQuery 中有效，但在 Angulars $http 中无效

> ID：15910984
> 
> 赞同：2
> 
> 时间：2013-04-09T19:38:04.740
> 
> 标签：asp.net, jquery, angularjs, http-headers

我很难让 Angular 发出我的服务器可以理解的发布请求。我需要实现修复服务器端或转换请求飞行前客户端。

**jQuery.post**

当我使用 jQuery 发出请求时，它会按预期响应：

```
$.ajax({
        data: paramdata,
        type: "POST",
        url: 'http://api.example.com/api/controller',
        dataType: 'json'
    }).then(function(response) {

    angular.forEach(response.errors, function(val, row) {
        alert('jQuery says : ' + val);
    });

}); 
```

![jQuery 提琴手报告](https://i.stack.imgur.com/AeqSi.png)

**角 $http.post**

当我在 Angular 中做类似的事情时，它失败了`Origin http://localhost:9000 is not allowed by Access-Control-Allow-Origin.`

```
$http.post('http://api.example.com/api/controller', {
        data: {'name':'Rick James'}
    }).then(function(response) {
        var data = response.data;

        angular.forEach(data.errors, function(val, row) {
            alert('$http says: ' + val);
        });
}); 
```

![Angular http fiddler 报告](https://i.stack.imgur.com/nqV3Y.png)

我正在`$http`像这样配置我的提供程序：

```
angular.module('fooApp').config(['$httpProvider', function($httpProvider) {
    //Fix as described here: https://github.com/angular/angular.js/pull/1454
    delete $httpProvider.defaults.headers.common["X-Requested-With"];

}]); 
```

当我添加这一行

```
 $httpProvider.defaults.headers.post['Content-Type'] = 'application/x-www-form-urlencoded; charset=UTF-8'; 
```

它在没有 Acces-Control-Allow-Origin 错误的情况下发送数据，但可以理解的是，服务器不理解如何解析 application/json 对象的 JSON。

我怎样才能做更像 jQuery 的角度 $http 请求？

***.NET 控制器***

```
[AllowAnonymous]
[HttpPost]
[AllowCrossDomain]
public JsonResult JsonLogin(LoginModel model, string returnUrl)
{
    //Origin = Request.Url.AbsoluteUri;

    if (ModelState.IsValid)
    {
        if (WebSecurity.Login(model.Email, model.Password, persistCookie: model.RememberMe))
        {
            FormsAuthentication.SetAuthCookie(model.Email, model.RememberMe);

            // return Json(new { success = true, redirect = returnUrl });
            return Json(new { success = true, redirect = Session["Origin"] });
        }
        else
        {
            ModelState.AddModelError("", "The user name or password provided is incorrect.");
        }
    }

    // If we got this far, something failed
    return Json(new { errors = GetErrorsFromModelState() });
} 
```

我们已经允许使用 AllowCrossDomain 过滤器设置 Access-Control-Allow-Origin、“*”、Access-Control-Allow-Methods 和 Access-Control-Max-Age 的跨域请求。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T20:01:08.507

这很可能会发生，因为 Angular 不会像您的 jQuery AJAX 请求那样将数据作为 kay-value 对发送。相反，Angular 将数据作为 JSON 编码的字符串作为请求流的一部分发送。

您需要从输入流中读取数据字符串，然后 JSON 对其进行解码以便能够访问它。您可以像这样读取输入流，[取自此处](https://stackoverflow.com/questions/3466163/help-reading-json-from-httpcontext-inputstream)

```
request.InputStream.Position = 0;
using (StreamReader inputStream = new StreamReader(request.InputStream))
{
  return inputStream.ReadToEnd();
} 
```

我对 asp.net 不太熟悉，但这里有一个 PHP 示例，可以说明差异。使用 jQuery 发布时，我可以`username`这样：

```
$username = $_POST['username'] 
```

但是使用 Angular，它需要这样做：

```
$stream = file_get_contents("php://input"); // read input stream
$streamObj = json_decode($stream);  // json decode
$username = $streamObj->username; 
```

# r - 在ggplot2中的geom_bar上堆叠多列

> ID：15910987
> 
> 赞同：1
> 
> 时间：2013-04-09T19:38:14.857
> 
> 标签：r, ggplot2

本质上：

1.  我想绘制一个条形图，显示两个表列的聚合值，我已经设法使用： `err.bar <- ggplot(ss.data, aes(x=pop, y=obs+proc)) err.bar <- err.bar + geom_bar(position="stack", stat = "identity") err.bar`

2.  我想对聚合条的两个部分进行着色，不一定是颜色。

3.  最后，我想通过根据物种对条形图进行分组（即按物种 E 和 C，如 Excel 图表上的 x 轴标签所示）为条形图上色

我使用的数据类似于：

*   流行 E1 E2 E3 E4 E5 E6 E7 C1 C2 C3 C4
*   0.0027 0.0018 0.0464 0.0095 0.0034 0.0117 0.017 0.1178 0.0449 0.039 0.0903
*   过程 0.0319 0.0196 0.0511 0.0143 0.0048 0.0078 0.0396 0.1662 0.074 0.1681 0.1358

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-13T09:30:45.847

这是一个可以为您提供大部分所需内容的解决方案。但请注意，ggplot 并非旨在允许在单个图中使用单独的“阴影”和“颜色”参数。相反，我使用灰色填充颜色为您的类别`obs`和`proc`类别着色，并将物种分组为多个方面（而不是对它们进行不同的着色）。

```
library(ggplot2)
library(reshape2)

ss.data = data.frame(
    pop=c("E1", "E2", "E3", "E4", "E5", "E6", "E7", "C1", "C2", "C3", "C4"),
    obs=c(0.0027, 0.0018, 0.0464, 0.0095, 0.0034, 0.0117, 0.017, 0.1178,
          0.0449, 0.039, 0.0903),
    proc=c(0.0319, 0.0196, 0.0511, 0.0143, 0.0048, 0.0078, 0.0396, 0.1662,
           0.074, 0.1681, 0.1358), stringsAsFactors=FALSE)

# Add new column 'species' by removing the trailing digits from 'pop'.
ss.data$species = gsub("\\d", "", ss.data$pop)

# Convert data to long-form with 'melt' from the reshape2 package.
mdat = melt(ss.data, id.vars=c("pop", "species"),
            measure.vars=c("obs", "proc"))

plot_1 = ggplot(mdat, aes(x=pop, y=value, fill=variable)) +
         theme_bw() +
         geom_bar(position="stack", stat="identity") +
         scale_fill_manual(values=c("grey50", "grey80")) +
         facet_grid(. ~ species, space="free_x", scales="free_x",
             labeller=label_both)

ggsave("plot_1.png", plot=plot_1, width=6.5, height=4) 
```

![在此处输入图像描述](https://i.stack.imgur.com/wnZHW.png)

# visual-studio-2012 - 升级到 .NET 框架 4.5 后如何让一键发布工作

> ID：15910988
> 
> 赞同：11
> 
> 时间：2013-04-09T19:38:26.070
> 
> 标签：visual-studio-2012, .net-4.5, publishing, oneclick

我正在使用 Visual Studio 2012 将应用程序从 .NET3.5/EF3.5 升级到 .NET4.5/EF5。

一键发布运行，但会生成以下警告消息：

*   项目“Microsoft.Windows.Installer.3.1”无法位于“C:\Program Files (x86)\Microsoft SDKs\Windows\v8.0A\Bootstrapper\”中。
*   “.NET Framework 3.5 SP1”需要项目“Windows Installer 4.5”，但不包括在内。

当我尝试安装已发布的版本时，我得到一个对话框说

*   无法启动应用程序
*   无法下载应用程序。应用程序缺少必需的文件。联系应用程序供应商寻求帮助。

单击对话框上的“详细信息...”按钮会给出我将在下面粘贴的文本（我将用户名替换为“...”）

我检查了 c:\Program Fiels (x86)\Microsoft SDKs\Windows\v8.0A\Bootstrapper 是否存在。它三个文件夹，分别命名为“Engine”、“Packages”和“Schemas”，没有其他内容。

```
PLATFORM VERSION INFO
Windows             : 6.1.7601.65536 (Win32NT)
Common Language Runtime     : 4.0.30319.18034
System.Deployment.dll       : 4.0.30319.17929 built by: FX45RTMREL
clr.dll             : 4.0.30319.18034 built by: FX45RTMGDR
dfdll.dll           : 4.0.30319.17929 built by: FX45RTMREL
dfshim.dll          : 4.0.41209.0 (Main.041209-0000)

SOURCES
Deployment url          : file:///C:/Users/.../AppData/Local/Microsoft/Windows/Temporary%20Internet%20Files/Content.IE5/56DYV716/Security%20Management%20System.application

ERROR SUMMARY
Below is a summary of the errors, details of these errors are listed later in the log.
* Activation of C:\Users\...\AppData\Local\Microsoft\Windows\Temporary Internet Files\Content.IE5\56DYV716\Security Management System.application resulted in exception. Following failure messages were detected:
    + Downloading file:///C:/Users/.../AppData/Local/Microsoft/Windows/Temporary Internet Files/Content.IE5/56DYV716/Security Management System.application did not succeed.
    + Could not find file 'C:\Users\...\AppData\Local\Microsoft\Windows\Temporary Internet Files\Content.IE5\56DYV716\Security Management System.application'.
    + Could not find file 'C:\Users\...\AppData\Local\Microsoft\Windows\Temporary Internet Files\Content.IE5\56DYV716\Security Management System.application'.
    + Could not find file 'C:\Users\...\AppData\Local\Microsoft\Windows\Temporary Internet Files\Content.IE5\56DYV716\Security Management System.application'.

COMPONENT STORE TRANSACTION FAILURE SUMMARY
No transaction error was detected.

WARNINGS
There were no warnings during this operation.

OPERATION PROGRESS STATUS
* [4/9/2013 3:04:00 PM] : Activation of C:\Users\...\AppData\Local\Microsoft\Windows\Temporary Internet Files\Content.IE5\56DYV716\Security Management System.application has started.

ERROR DETAILS
Following errors were detected during this operation.
* [4/9/2013 3:04:01 PM] System.Deployment.Application.DeploymentDownloadException (Unknown subtype)
    - Downloading file:///C:/Users/.../AppData/Local/Microsoft/Windows/Temporary Internet Files/Content.IE5/56DYV716/Security Management System.application did not succeed.
    - Source: System.Deployment
    - Stack trace:
        at System.Deployment.Application.SystemNetDownloader.DownloadSingleFile(DownloadQueueItem next)
        at System.Deployment.Application.SystemNetDownloader.DownloadAllFiles()
        at System.Deployment.Application.FileDownloader.Download(SubscriptionState subState)
        at System.Deployment.Application.DownloadManager.DownloadManifestAsRawFile(Uri& sourceUri, String targetPath, IDownloadNotification notification, DownloadOptions options, ServerInformation& serverInformation)
        at System.Deployment.Application.DownloadManager.DownloadDeploymentManifestDirectBypass(SubscriptionStore subStore, Uri& sourceUri, TempFile& tempFile, SubscriptionState& subState, IDownloadNotification notification, DownloadOptions options, ServerInformation& serverInformation)
        at System.Deployment.Application.DownloadManager.DownloadDeploymentManifestBypass(SubscriptionStore subStore, Uri& sourceUri, TempFile& tempFile, SubscriptionState& subState, IDownloadNotification notification, DownloadOptions options)
        at System.Deployment.Application.ApplicationActivator.PerformDeploymentActivation(Uri activationUri, Boolean isShortcut, String textualSubId, String deploymentProviderUrlFromExtension, BrowserSettings browserSettings, String& errorPageUrl)
        at System.Deployment.Application.ApplicationActivator.ActivateDeploymentWorker(Object state)
    --- Inner Exception ---
    System.Net.WebException
    - Could not find file 'C:\Users\...\AppData\Local\Microsoft\Windows\Temporary Internet Files\Content.IE5\56DYV716\Security Management System.application'.
    - Source: System
    - Stack trace:
        at System.Net.FileWebRequest.EndGetResponse(IAsyncResult asyncResult)
        at System.Net.FileWebRequest.GetResponse()
        at System.Deployment.Application.SystemNetDownloader.DownloadSingleFile(DownloadQueueItem next)
    --- Inner Exception ---
    System.Net.WebException
    - Could not find file 'C:\Users\...\AppData\Local\Microsoft\Windows\Temporary Internet Files\Content.IE5\56DYV716\Security Management System.application'.
    - Source: System
    - Stack trace:
        at System.Net.FileWebResponse..ctor(FileWebRequest request, Uri uri, FileAccess access, Boolean asyncHint)
        at System.Net.FileWebRequest.GetResponseCallback(Object state)
    --- Inner Exception ---
    System.IO.FileNotFoundException
    - Could not find file 'C:\Users\...\AppData\Local\Microsoft\Windows\Temporary Internet Files\Content.IE5\56DYV716\Security Management System.application'.
    - Source: mscorlib
    - Stack trace:
        at System.IO.__Error.WinIOError(Int32 errorCode, String maybeFullPath)
        at System.IO.FileStream.Init(String path, FileMode mode, FileAccess access, Int32 rights, Boolean useRights, FileShare share, Int32 bufferSize, FileOptions options, SECURITY_ATTRIBUTES secAttrs, String msgPath, Boolean bFromProxy, Boolean useLongPath, Boolean checkHost)
        at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options, String msgPath, Boolean bFromProxy)
        at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, Boolean useAsync)
        at System.Net.FileWebStream..ctor(FileWebRequest request, String path, FileMode mode, FileAccess access, FileShare sharing, Int32 length, Boolean async)
        at System.Net.FileWebResponse..ctor(FileWebRequest request, Uri uri, FileAccess access, Boolean asyncHint)

COMPONENT STORE TRANSACTION DETAILS
No transaction information is available. 
```

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-04-10T14:07:58.930

我错过了重新定位到 .NET 4.5 的一步。我必须调整先决条件如下：

*   打开**项目属性窗口。**（点击“我的项目”）
*   单击**先决条件。**
*   取消选中**“.NET Framework 3.5**（或任何其他旧的 .NET 框架版本。特别是如果它有这个图标![带感叹号的黄色三角形](https://i.stack.imgur.com/wA7jl.png)。
*   检查**“.NET Framework 4.5（x86 和 x64）”。**
*   取消选中**“Windows 安装程序 3.1”。**
*   检查**“Windows 安装程序 4.5”。**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-09T14:22:23.353

我有这个错误，解决方案对我有用。我只需要取消选中 Windows Installer 3.1 并选中 Windows Installer 4.5 即可删除此警告。

# java - 如何自动装配动态类

> ID：15910997
> 
> 赞同：3
> 
> 时间：2013-04-09T19:38:48.200
> 
> 标签：java, spring

是否可以在动态类上自动装配字段？

使用工厂很棒，但它不允许我去`@Autowire`田地。

```
public static Workflow factory(WorkflowEntity workflowEntity) {
    try {
        Class<?> clazz = Class.forName(workflowEntity.getClassName())
                .asSubclass(Workflow.class);
        Object workflowClass = clazz.getConstructor(WorkflowEntity.class).newInstance(workflowEntity);
        return (Workflow) workflowClass;
    } catch (Exception e) {
        e.printStackTrace();
        logger.severe("Unable to instantiate "+workflowEntity.getClassName()+" class: " + e.getLocalizedMessage());
    }

    return null;
} 
```

是否可以这样做，但是以 Spring 处理自动装配字段的方式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T19:46:12.023

为了让 Spring 自动装配字段，它需要负责创建对象。由于您在某个 Factory 类中创建对象，因此 Spring 无法注入字段。例如，如果你做了

```
Object o = new ObjectWithAutowiredFields(); 
```

Spring 怎么会知道自动装配该对象的字段，它甚至没有扫描类。

但是，如果您的工厂是 Spring bean，您可以`@Autowired`在其中包含字段并将这些字段与您正在实例化的类的构造函数（假设该类具有这样的构造函数）或设置器一起使用。