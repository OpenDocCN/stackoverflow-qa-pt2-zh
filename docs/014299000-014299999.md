# StackOverflow 问答 14299000-14299999

# sql - 根据家庭记录设置户名字段

> ID：14299003
> 
> 赞同：2
> 
> 时间：2013-01-12T23:21:23.200
> 
> 标签：sql, sql-server, tsql

`Entity`我的目标是为由 2 人组成的所有家庭计算并在表格上设置一个 HouseholdName 字段。我正在使用 SQL Server 2012，我必须使用的架构是：

```
CREATE TABLE Entity
(
   EID INT, --PK
   PID INT, --FK to Person.[Person ID]
   HouseholdID VARCHAR(50), 
   HouseholdName VARCHAR(300)
);

CREATE TABLE Person
(
   [Person ID] INT, 
   FirstName   VARCHAR(30), 
   LastName    VARCHAR(30)
);

INSERT INTO Entity VALUES (1,1,'HH1',NULL);
INSERT INTO Entity VALUES (2,2,'HH1',NULL);
INSERT INTO Entity VALUES (3,3,'HH2',NULL);
INSERT INTO Entity VALUES (4,4,'HH2',NULL);
INSERT INTO Entity VALUES (5,5,'HH3',NULL);

INSERT INTO Person VALUES (1,'Jane', 'Doe');
INSERT INTO Person VALUES (2,'Joe',  'Doe');
INSERT INTO Person VALUES (3,'Sara', 'Dillin');
INSERT INTO Person VALUES (4,'Bill', 'Smith');
INSERT INTO Person VALUES (5,'Ted',  'Loner'); 
```

计算家喻户晓的逻辑是这样的：如果两个姓氏相同，例如 HouseholdID `HH1`，家喻户晓的名字应该是“Jane & Joe Doe”。如果姓氏不同，例如`HH2`应该采用“Sara Dillin & Bill Smith”格式

我可以识别这些人并让他们按如下顺序排列：

```
SELECT FirstName,LastName,HouseholdID
FROM Entity e
JOIN Person p ON p.[Person ID]=e.[PID]
WHERE HouseholdID IN  --HHs of 2 people
(
   SELECT DISTINCT HouseholdID
   FROM Entity e
   JOIN Person p ON p.[Person ID]=e.[PID]
   GROUP BY HouseholdID HAVING COUNT(*)=2
)
ORDER BY HouseholdID 
```

但我已经过去了。从像 C# 这样的过程语言我知道如何解决这个问题，但它很慢。我希望能够以更快的 SQL 方式完成它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T00:11:22.357

抱歉，我稍微更改了字段名称以使其更易于编码。以下查询将为您提供所需的内容：

```
SELECT 
  e1.HouseholdID,
  CASE WHEN p2.LastName =  p1.LastName THEN  p1.FirstName + ' & ' + p2.FirstName + ' ' + p2.LastName
       ELSE p1.FirstName + ' ' + p1.LastName + ' & ' + p2.FirstName + ' ' + p2.LastName END AS HouseholdName,
  p1.FirstName,
  p1.LastName,
  p2.FirstName as p2FirstName,
  p2.LastName as p2LastName
FROM 
 Person p1 
 INNER JOIN Entity e1 ON 
   p1.id = e1.PID
 LEFT JOIN Entity e2 
   ON e1.HouseholdID = e2.HouseholdID AND e1.id < e2.id
 LEFT JOIN Person p2
   ON e2.PID = p2.id
WHERE e2.ID IS NOT NULL
  AND NOT EXISTS 
    ( SELECT * FROM Entity e3 
      WHERE e1.HouseholdID = e3.HouseholdID
      AND NOT e3.id IN (e1.id, ISNULL(e2.id, 0))
    ) 
```

[http://sqlfiddle.com/#!3/c8dd9/15](http://sqlfiddle.com/#!3/c8dd9/15)

# google-api - 如何以编程方式访问 Google 搜索右侧数据？

> ID：14299006
> 
> 赞同：5
> 
> 时间：2013-01-12T23:22:06.037
> 
> 标签：google-api, screen-scraping, web-scraping, semantics

有没有办法以编程方式访问 Google 结果右侧的数据？

周围有类似的服务吗？专门用于位置数据

**访问 = 无 html 抓取**

这是一个例子： ![在此处输入图像描述](../Images/2cf857c392e66ca033fa6f9120399c68.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-21T02:20:44.133

## 2018 年更新 -[知识面板](https://support.google.com/business/answer/6331288?hl=en)

> 当人们在 Google 上搜索商家时，他们可能会在搜索结果右侧显示的框中看到有关该商家的信息。框中的信息称为知识面板，可以帮助客户发现和联系您的业务。
> 
> [![知识面板示例](../Images/0f35c0a2c5bf7341a4d28b04afb6120e.png)](https://i.stack.imgur.com/Q1ZzU.png)
> 
> 知识面板由知识图中的信息提供支持。

* * *

## 谷歌的知识图谱

您问题中的示例来自[Google 的 Knowledge Graph](http://googleblog.blogspot.com/2012/05/introducing-knowledge-graph-things-not.html)。

[The Short Life of the Open Knowledge Graph](https://web.archive.org/web/20130329151128/http://zecblog.com/2012/09/16/the-short-life-of-the-open-knowledge-graph/)很好地解释了为什么 Google 的 Knowledge Graph 数据不公开，以及项目为什么要关闭。

> [谷歌产品管理总监杰克门泽尔]解释说，谷歌不能“参与”开放知识图项目有几个具体原因。首先，谷歌知识图谱中的一些数据来自封闭的数据集，这些数据集是从没有授予谷歌重新分发它们的权利的来源获得的。其他一些数据集具有更开放的许可证，但仍具有类似共享或归属限制。其次，他提醒说——原则上——谷歌阻止了任何允许收集关于其搜索和排名技术信息的自动提取，因为“它们是谷歌提供的专有核心”。

## 替代解决方案

我试图按照您对位置数据的偏好顺序列出。

*   **Freebase** - [http://www.freebase.com/](http://www.freebase.com/)将为您提供与您的 Google 搜索示例相同类型的信息并允许您获得相同类型的结果。

    > **Freebase**是一个开放的、[知识共享](http://wiki.freebase.com/wiki/Creative_Commons)许可的存储库， 包含近 2300 万个[实体的](http://wiki.freebase.com/wiki/Entity)[结构化数据](http://wiki.freebase.com/wiki/Structured_data)。
    > 
    > **实体**是单个人、地点或事物。Freebase 将实体连接在一起作为一个 [图](http://wiki.freebase.com/wiki/Graph)。

*   **Wikidata** - [http://www.wikidata.org/wiki/Wikidata:Main_Page](http://www.wikidata.org/wiki/Wikidata:Main_Page) - Wikidata 是一个开源项目，数据可以自由访问

*   **YAGO** - [http://www.mpi-inf.mpg.de/yago-naga/yago/](http://www.mpi-inf.mpg.de/yago-naga/yago/)

    > YAGO2s 是一个庞大的语义知识库，源自[Wikipedia](http://en.wikipedia.org/)、[WordNet](http://wordnet.princeton.edu/)和[GeoNames](http://www.geonames.org/)。

*   **Wolfram Alpha** - [http://products.wolframalpha.com/api/](http://products.wolframalpha.com/api/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-12-14T14:39:36.440

您可以为此使用谷歌知识图 API

*   在谷歌开发者控制台中创建一个应用程序
*   创建身份验证凭据

    ```
     knowlegdegraph<-function(query)
    {
       API_Key<-"YOUR_API_KEY"
       url<-paste("https://kgsearch.googleapis.com/v1/entities:search?query=",query, 
         "&key=", API_Key,
         "&limit=1&indent=True")
      jdata <- fromJSON(URLencode(url))

    } 
    ```

    Jdata 是一个列表。您可以从中提取用于定位的 JSON 元素

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-06-25T15:51:18.020

如果您有预算，您可以考虑[serpapi.com](https://serpapi.com/)，这是一个 Google 搜索 API 提供商，它执行实时 Google 搜索并以 JSON 形式返回结果。

通过 API 对关键字“咖啡”的示例搜索将返回完整的 SERP 参数和搜索结果的元数据。示例搜索的部分“知识面板”元数据返回如下：

```
"knowledge_graph": {
    "title": "Coffee",
    "image": "data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",
    "description": "Coffee is a brewed drink prepared from roasted coffee beans, the seeds of berries from certain Coffea species. The genus Coffea is native to tropical Africa and Madagascar, the Comoros, Mauritius, and Réunion in the Indian Ocean.",
    "source": {
      "name": "Wikipedia",
      "link": "https://en.wikipedia.org/wiki/Coffee"
    },
    "countries_of_origin": "Yemen (drink), Ethiopia (plant)",
    "coffee_companies": [
      {
        "name": "Starbucks",
        "link": "https://www.google.com/search?hl=en&gl=us&q=Starbucks&stick=H4sIAAAAAAAAAONgFuLUz9U3MCorTMtVAjMNLZLji7REspOt9JPzc3Pz86xS8svzyhOLUopXMQoDxXJyUpNLMvPz9DOLi0tTi4oXsXIGlyQWJZUmZxcDANn7PURQAAAA&sa=X&ved=2ahUKEwjPi5uzxvDhAhXHu54KHXouArgQxA0wJnoECBIQBQ",
        "source": "common".... 
```

[![搜索结果与 JSON 结果对比](../Images/2285d7834e801785246579d805f86bbf.png)](https://i.stack.imgur.com/f04ac.png)

# c# - 是否可以在 WinRT 中设置全局热键？

> ID：14299007
> 
> 赞同：-1
> 
> 时间：2013-01-12T23:22:09.147
> 
> 标签：c#, .net, windows-runtime

我想为 Win RT 创建简单的屏幕截图应用程序。我想添加功能以通过热键捕获屏幕截图（仅适用于使用键盘的用户）。我怎么能这样做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T23:25:20.073

如果没有越狱，您就无法在系统范围内进行，只能在应用程序范围内进行 - 使用[CoreWindow.KeyDown 之](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.core.corewindow.keydown.aspx)类的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T00:49:28.420

我的典型解决方案是使用*Win32 pInvoke* for ，但*Windows RT*`RegisterHotKey`不支持。

 **在RT*上似乎无法使用系统范围的全局热键。*

# php - Magento 优惠券折扣翻译

> ID：14299009
> 
> 赞同：0
> 
> 时间：2013-01-12T23:22:25.170
> 
> 标签：php, magento, discount, coupon

我喜欢在购物车和单页结帐中将“折扣”更改为“促销”。但是，我找不到任何文件位置。我已经从配置中打开了模板路径提示。谁能帮我吗 ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-13T00:53:53.380

我认为您可以在此处的翻译文件中执行此操作：app/locale/en_US/Mage_Checkout.csv 只需将“折扣代码”、“折扣代码”更改为“折扣代码”、“促销代码”或其他任何内容。

但是优惠券 phtml 在这里：app/design/frontend/default/default/template/checkout/cart/coupon.phtml

# python - Python 类中的命名空间

> ID：14299013
> 
> 赞同：2
> 
> 时间：2013-01-12T23:23:00.503
> 
> 标签：python, class, namespaces, scope

我有这个：

```
class MyClass:
    """A simple example class"""
    i = 12345
    def f(self):
        print i                     # self.i will work just fine
        return 'hello world' 
```

当我做：

```
>>> x = MyClass()
>>> 
>>> x.f() 
```

正如预期的那样，我收到一个错误。

我的问题是：

1.  为什么我会收到错误消息？

2.  为什么函数（或方法）定义的命名空间和包含该类的模块的全局命名空间之间没有命名空间？

3.  在这种情况下，除了使用 self 之外，还有其他方法可以在 f 中引用 i 吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T23:26:54.087

1.  您遇到错误，因为`print i`正在尝试打印全局（模块）变量`i`。如果你想使用你应该写的类的成员`self.i`。
2.  因为 Guido Van Rossum 决定不使用命名空间。其实我已经不知道怎么回答了。
3.  是的，但是没有。是的，因为您可以使用“反射”（我不记得它在 python 中是如何调用的）并访问该类的任何成员。不，因为使用`self`是唯一可用的方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-02-02T03:16:08.477

> 为什么我会收到错误消息？

答：这是因为变量 i 和指向函数/方法代码的符号/级别 f 位于 MyClass 命名空间中，而函数 f 的值/可调用代码/主体位于全局命名空间中。

> 为什么函数（或方法）定义的命名空间和包含该类的模块的全局命名空间之间没有命名空间？

答：不知道为什么 python 设计者决定将函数名称/符号放在类中，但将其主体放在全局命名空间中。

> 在这种情况下，除了使用 self 之外，还有其他方法可以在 f 中引用 i 吗？

答：我不这么认为，但即使是这样，它也可能不是更容易的逻辑/代码

# php - 在控制器之间切换 (MVC)

> ID：14299014
> 
> 赞同：3
> 
> 时间：2013-01-12T23:23:00.857
> 
> 标签：php, oop, model-view-controller

我试图理解并找出在我的自定义框架中的控制器之间切换的好方法。以下示例是我目前正在考虑的，出于演示目的进行了简化，但如果有更好的方法，我真的很感激一些专家的建议？

```
class BaseController() {
    function __construct() {
        $this->model = new ModelFactory();
        $this->view = new View();

        if(isset($_SERVER['QUERY_STRING'])) {
            list($controller, $action) = explode('=', $_SERVER['QUERY_STRING']);
            self::process($controller);
        }
    }

    public function process($controller) {
        switch($controller) {
            case 'user':
                $user = new UserController($action);
            break;

            case 'forum':
                $forum = new ForumController($action);
            break;

            default:
                // use base controller
                switch($action) {
                    case 'contact':
                        $this->view->load($action);
                    break;
                }
        }
    }
}

// inside UserController.php
switch($action) {
    case 'register':
    break;

    case 'login':
    break;
}

// inside ForumController.php
switch($action) {
    case 'new_thread':
    break;

    case 'edit_post':
    break;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T01:20:30.423

这确实是一个部分答案，希望能给你一些好的指示。我相信会有更好的答案的人出现。

1.  您`BaseController`在您的示例中可能命名错误。你所拥有的使它看起来更像一个控制器工厂，而不是所有其他控制器类可能派生的基本控制器。看起来这更像是一个“路由”类，所以你应该考虑给它一个更适合它的工作的名字。

2.  如果您希望您的框架用户使用自定义操作创建自定义控制器：

    a）您肯定希望至少为所有控制器类创建一个接口来实现。调用它`IController`或类似的东西。这将在下一步中使用。

    b) 您必须满足于使用字符串作为类名来创建对象。`$controllerObject = new $controller();`“Route”处理程序类中的IE 。原因是要运行的控制器和操作名称直接来自请求 URL。这部分有别名的方法，但这完全是另一个问题。不要*忘记*验证和/或将这些从客户端传入的“控制器”类名列入白名单。验证：使用 PHP 函数`class_exists($controller)`，然后 if `true`，检查以确保控制器类`IController`使用 PHP 的内置`class_implements($controller)`. 只有*这样*你`$controllerObject = new $controller();`才能真正创建控制器对象。

    然后，您的“路线”`process`方法变得更像（请记住，这是一个*非常*简化的示例）：

    ```
    public function process($controller, $action) {
        if (!class_exists($controller)) {
            throw new Exception('Controller class does not exist.');
        }
        if (!in_array("IController", class_implements($controller))) {
            throw new Exception('Route is not a valid controller.');
        }
        if (!method_exists($controller, $action)) {
            throw new Exception('No such action for requested controller.');
        }
        $ctrl = new $controller();
        return $ctrl->$action();
    } 
    ```

    c) 不要让您的控制器声明任何`$action`您不希望客户端使用上述设计模式直接执行的方法（即以任何可能的值命名）。希望您的框架用户也能理解这一点。请务必正确记录其内部工作原理，以使您的框架用户了解。

当然还有比这更多的方法，但这取决于你——框架设计者。此外，操作应该对使用什么“视图”拥有最终决定权。如果操作没有明确说明要使用的视图，则可以设置默认值。但同样，那将是另一个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T15:44:00.010

你真的应该从阅读 MVC 到底是什么开始。我建议从 Fowler 的[GUI Architectures](http://martinfowler.com/eaaDev/uiArchs.html)开始。因为有一件事是非常确定的——你所拥有的不是它。

看起来，您所命名`BaseController`的实际上是在处理路由。这就是用户的请求 URL，并包含基于您从所述 URL 检索到的文件的文件。这既不是面向对象编程，也不是过程编程。你所拥有的就是所谓[的非结构化编程](http://en.wikipedia.org/wiki/Non-structured_programming)。

您应该创建一个单独的类，而不是这种疯狂，为您的应用程序实现路由机制。并且根据您使用所述结构提取的数据，您应该启动特定的控制器实例，并在其上调用方法。

就像是：

```
$request = new Request('QUERY_STRING');

$router = new Router;
$router->import('/path/to/routing/config.file');
$router->route( $request );

$klass = $request->getParameter('controller');

if (class_exists( $controller ))
{
    $command = $request->getMethod() . $request->getParameter('action');
} 
else 
{
    $klass = 'Error';
    $command = 'getMessage';
}

$controller = new $klass;
$controller->{$command}( $request ); 
```

这当然是一个极其简化的版本。MVC 模式旨在为大型项目带来一些秩序。如果你用它来创建一个简单的博客/名片网站，这似乎是一种矫枉过正（假设页面没有增长）。

> [**PS**您可能会发现以下链接对您的学习有用：[this](https://stackoverflow.com/a/9855170/727208)、[this](https://stackoverflow.com/a/13396866/727208)、[this](https://stackoverflow.com/a/9685039/727208)和[this](https://stackoverflow.com/a/5864000/727208)。]

# html - html选择元素，默认不在选项中

> ID：14299017
> 
> 赞同：14
> 
> 时间：2013-01-12T23:23:30.270
> 
> 标签：html

> **可能重复：**
> [<select> 占位符](https://stackoverflow.com/questions/5805059/select-placeholder)

我想做这样的事情：

```
<select>
    <option selected="selected">Choose option</option>
    <option>Option 1</option>
    <option>Option 2</option>
    <option>Option 3</option>
    <option>Option 4</option>
</select> 
```

这是[jsfiddle。](http://jsfiddle.net/yahyaKACEM/QnAKU/)

现在我希望第一个选项与内容“选择选项”的选定选项在下拉列表中不可见。我该怎么做，如果可以使用选择元素或者我应该做一个自定义的事情。提前致谢。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-12T23:28:14.507

我相信最接近纯 HTML 解决方案的方法是禁用该选项：

```
<select>
    <option selected="selected" disabled="disabled">Choose option</option>
    <option>Option 1</option>
    <option>Option 2</option>
    <option>Option 3</option>
    <option>Option 4</option>
</select> 
```

[**演示**](http://jsfiddle.net/wYgQW/)

该元素仍将出现在列表中，但将显示为灰色，并且在打开后无法从下拉列表中选择它。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-12T23:27:44.687

您可以在打开列表后立即删除所选元素：

```
$('select').click(function () {
  $('option[selected="selected"]', this).remove();
}); 
```

我不知道有任何原生 HTML/HTML5 解决方案。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-12T23:31:23.087

```
<select>
    <option selected="selected" disabled="disabled">Choose option</option>
    <option>Option 1</option>
    <option>Option 2</option>
    <option>Option 3</option>
    <option>Option 4</option>
</select> 
```

这将在选择之前显示“选择选项”，但不允许用户选择它。

# database - 什么样的数据应该保存在连接的表中？

> ID：14299028
> 
> 赞同：2
> 
> 时间：2013-01-12T23:25:20.807
> 
> 标签：database, entity-framework, data-binding, relational-database

我有一个关于处理数据库中数据的问题。我有这样的表：

![在此处输入图像描述](../Images/6eae046de464d1191c775b589a98bc10.png)

问题是，我应该`Status`在它的 Name 属性中保存什么样的数据？我有两种可能：

1.  保留在那里`strings`，例如：“正常”、“雇用”、“禁止”、“版主”等。
2.  保留在那里`ints`，对应`Enum`于我项目中的类型，还包含所有“正常”、“雇用”等。

有什么规定吗？`enum`我在一个项目中看到了第二个选项（

```
(StatusEnum)statusInt; 
```

在我看来，第一个选项（`strings`）更专业，因为数据库更独立。但实际上我不知道如何争辩，因为它只会给我带来一个问题：我必须解析那些字符串以`Enum type`用两行（`Enum.TryParse...`）进行管理。

有人可以请给我他们的意见吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T12:33:05.760

如果您使用枚举，则不需要特殊的表。您只需在`User`表中使用 Status 整数值并将其直接映射到 EF 设计器中的枚举。`Status`如果您是实体，则相关表是有意义的。是否可以更改，可以在运行时添加或删除？如果是，则将其设为带有字符串名称的表。如果没有，则使其成为`User`表中的枚举字段。

# activerecord - ActiveRecord (CDbCriteria) vs QueryBuilder？

> ID：14299029
> 
> 赞同：3
> 
> 时间：2013-01-12T23:25:30.620
> 
> 标签：activerecord, yii, phpactiverecord

我必须制作一些过滤器，例如获取给定部门的人员，我想知道最好的方法。

其中一些将需要连接多个表。

有人知道`CDbCriteria`Query Builder 和 Query Builder 之间的主要区别吗？我特别想知道与数据库的兼容性。

我在有关 Query Builder 的 Yii 文档中发现了这一点：

> 它提供了一定程度的数据库抽象，简化了向不同数据库平台的迁移。

CDbCriteria 对象是否相同？这个会比较好吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-12T23:49:07.173

`CDbCriteria`当使用 Yii 的[活动记录](http://www.yiiframework.com/doc/guide/1.1/en/database.ar)(AR) 抽象时（通常是所有时间）使用的概念。AR 要求您为数据库中的各种表创建[模型](http://www.yiiframework.com/doc/guide/1.1/en/database.ar#defining-ar-class)。

[查询生成器](http://www.yiiframework.com/doc/guide/1.1/en/database.query-builder)访问数据库的方式非常不同；实际上，它是一个结构化包装器，它允许您以编程方式构造 SQL 查询，而不仅仅是将其写为字符串（作为额外的好处，它还提供了您提到的一定程度的数据库抽象）。

**在典型的应用程序中，几乎不需要使用查询构建器，因为 AR 已经提供了大量功能，并且还提供了相同程度的数据库抽象。**

在某些情况下，您可能希望运行一种非常特定类型的查询，这种查询不方便或无法通过 AR 发出。然后你有两个选择：

1.  如果查询是固定的或几乎固定的，那么您可以简单地通过[DAO](http://www.yiiframework.com/doc/guide/1.1/en/database.dao)发出它；实际上查询构建器文档中提到“如果您的查询很简单，直接编写 SQL 语句会更容易、更快捷”。
2.  如果查询需要动态构建，那么查询构建器就非常适合这项工作。

如您所见，查询生成器在大多数情况下并不是那么有用。只有当您想编写非常定制的同时动态构造的查询时，使用它才有意义。

您提到的示例功能可以而且应该使用 AR 来实现。

# java - Spring MVC 3.1 - 重定向后 RedirectAttributes 不是模型的一部分

> ID：14299036
> 
> 赞同：1
> 
> 时间：2013-01-12T23:26:19.543
> 
> 标签：java, spring, spring-mvc

我正在寻找开发一个包含 POST/Redirect/GET 模式和输入验证的 Spring MVC 应用程序。在 POST 阶段，我执行一个 Validator 并返回一个 BindingResult/Errors 集合。如果有错误，我想用我的验证错误重定向回表单。我希望这是一个重定向，解析为 GET 请求，以避免在使用浏览器的导航按钮（后退、前进、刷新）时出现过期缓存和表单重新提交提示。

这就是我处理初始表单显示的方式，并且如果出现验证错误，我希望将用户重定向回。

```
@RequestMapping("/account/list")
public String listAccounts(HttpServletRequest request, Map<String, Object> map) {

    log.debug("start of list accounts");

    map.put("accountList", entityService.listAccounts());
    map.put("account", new Account());
    map.put("accountTypeValues", AccountTypes.values());

//      Map<String, ?> inputFlashMap = RequestContextUtils.getInputFlashMap(request);
//      if (inputFlashMap != null) {
//          map.putAll(inputFlashMap);
//      }

    return "account";
} 
```

这是处理 POST 的方法的片段：

```
@RequestMapping(value = "/account/add", method = RequestMethod.POST)
public String addAccount(@ModelAttribute("account") @Valid Account account, BindingResult result, RedirectAttributes redirectAttributes, HttpServletRequest request, Map<String, Object> model) {
    accountValidator.validate(account, result);

    if (result.hasErrors()) {
        redirectAttributes.addFlashAttribute("account", account);
        redirectAttributes.addFlashAttribute(BindingResult.MODEL_KEY_PREFIX + "account", result);
        return "redirect:/account/list";
    } 
```

我可以在 addAccount 方法末尾的 HttpServletRequest 对象中看到 FlashMap，并且在 listAccounts 方法中的重定向之后再次看到。但是，该映射永远不会与 listAccounts 中的模型合并。如果我取消注释 listAccounts 中的 inputFlashMap 位，那么我会得到所需的结果。

为什么重定向后 RedirectAttributes（又名 FlashMap）没有合并到模型中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-10T08:14:09.383

方法 listAccounts 需要 @ModelAttribute("account") Account account 像 addAccount 这样的参数

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T10:30:22.637

You do not need to worry about caching POST requests. Because POST requests should not been chached at all.

So it it valid to return the input form in response of an invalid POST request.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T23:01:23.153

我认为您可以通过添加来实现所需的行为

```
@SessionAttributes("account") 
```

到您的控制器，而不是使用闪存范围。但是，在这种情况下，您需要注意在需要时从会话中删除属性。

# django - Django 如何从 UserCreationForm 中删除密码字段

> ID：14299039
> 
> 赞同：5
> 
> 时间：2013-01-12T23:26:46.000
> 
> 标签：django, passwords

我想了解一些有关用户身份验证的知识。我想将 UserCreationForm 导入到我的 forms.py 中，而不需要“密码字段”，然后我想自己制作密码字段并进行控制。如何排除“密码字段”？感谢帮助。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-13T07:01:07.627

只需删除它们`__init__`并更新使用它们的方法：

```
class MyUserCreationForm(UserCreationForm):

   def __init__(self, *args, **kwargs):
       super(MyUserCreationForm, self).__init__(*args, **kwargs)
       del self.fields['password1']
       del self.fields['password2'] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-01-21T09:35:09.627

您最好的选择是从表单中隐藏它们：

```
class MyUserCreationForm(UserCreationForm):
    password1 = None # Standard django password input
    password2 = None # Standard django password confirmation input 
```

编辑：实际上这只是隐藏表单，但在表单验证期间您会遇到问题。仍在寻找解决方案。

# arrays - 来自值数组的 PostgreSQL PL/pgSQL 随机值

> ID：14299043
> 
> 赞同：19
> 
> 时间：2013-01-12T23:27:29.683
> 
> 标签：arrays, postgresql, random, plpgsql, postgresql-9.2

如何声明具有两个或三个值的类似变量的数组并在执行期间随机获取它们？

```
a := [1, 2, 5] -- sample sake
select random(a) -- returns random value 
```

任何建议从哪里开始？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2018-10-23T08:25:35.810

试试这个：

```
select (array['Yes', 'No', 'Maybe'])[floor(random() * 3 + 1)]; 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-01-14T22:44:26.023

```
CREATE FUNCTION random_pick()
  RETURNS int AS
$func$
DECLARE
   a int[] := '{[0:2]=1,2,5}'; -- sample sake
BEGIN
   RETURN a[floor((random()*3))::int];
END
$func$ LANGUAGE plpgsql VOLATILE 
```

`random()`返回值 x 其中`0.0 <= x < 1.0`. 乘以三就`floor()`可以得到`0`，`1`或者*机会均等*。对于以. 为了提高效率，我改为声明数组索引。`2`*`1``0`*

 *[这些数学函数的手册。](http://www.postgresql.org/docs/current/interactive/functions-math.html)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-07-18T13:30:20.947

Erwin Brandstetter很好地[回答了 OP 的问题。](https://stackoverflow.com/a/14328164/1801588)然而，对于其他想了解如何从更复杂的数组中随机选择元素的人（比如两个月前的我），我扩展了他的功能：

```
CREATE OR REPLACE FUNCTION random_pick( a anyarray, OUT x anyelement )
  RETURNS anyelement AS
$func$
BEGIN
  IF a = '{}' THEN
    x := NULL::TEXT;
  ELSE
    WHILE x IS NULL LOOP
      x := a[floor(array_lower(a, 1) + (random()*( array_upper(a, 1) -  array_lower(a, 1)+1) ) )::int];
    END LOOP;
  END IF;
END
$func$ LANGUAGE plpgsql VOLATILE RETURNS NULL ON NULL INPUT; 
```

几个假设：

*   这不仅适用于整数数组，也适用于任何类型的数组

*   我们忽略 NULL 数据；仅当数组为空或插入 NULL 时才返回 NULL（其他非数组类型的值会产生错误）

*   数组不需要像往常一样格式化 - 数组索引可以在任何地方开始和结束，可能有间隙等。

*   这是一维数组

其他注意事项：

*   如果没有第一`IF`条语句，空数组将导致无限循环

*   如果没有循环，间隙和 NULL 将使函数返回 NULL

*   `array_lower`如果您知道数组从零开始，请忽略这两个调用

*   如果索引中有空白，您将需要`array_upper`代替`array_length`; 没有间隙，它是相同的（不确定哪个更快，但它们不应该有太大不同）

*   之后的`+1`第二个`array_lower`用于以与任何其他相同的概率获取数组中的最后一个值；否则它需要`random()`' 的输出正好是 1，这永远不会发生

*   这比 Erwin 的解决方案要慢得多，并且可能会超出您的需求；在实践中，大多数人会从两者中混合一种理想的鸡尾酒

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2018-06-19T12:03:46.227

这是做同样事情的另一种方法

```
WITH arr AS (
    SELECT '{1, 2, 5}'::INT[] a
)
SELECT a[1 + floor((random() * array_length(a, 1)))::int] FROM arr; 
```

您可以将数组更改为您想要的任何类型。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2020-08-22T15:10:08.490

```
CREATE OR REPLACE FUNCTION pick_random( members anyarray )
RETURNS anyelement AS
$$
BEGIN
  RETURN members[trunc(random() * array_length(members, 1) + 1)];
END
$$ LANGUAGE plpgsql VOLATILE; 
```

或者

```
CREATE OR REPLACE FUNCTION pick_random( members anyarray )
RETURNS anyelement AS
$$
  SELECT (array_agg(m1 order by random()))[1]
  FROM unnest(members) m1;
$$ LANGUAGE SQL VOLATILE; 
```

对于更大的数据集，请参阅：

*   [http://blog.rhodiumtoad.org.uk/2009/03/08/selecting-random-rows-from-a-table/](http://blog.rhodiumtoad.org.uk/2009/03/08/selecting-random-rows-from-a-table/)
*   [http://www.depesz.com/2007/09/16/my-thoughts-on-getting-random-row/](http://www.depesz.com/2007/09/16/my-thoughts-on-getting-random-row/)
*   [https://blog.2ndquadrant.com/tablesample-and-other-methods-for-getting-random-tuples/](https://blog.2ndquadrant.com/tablesample-and-other-methods-for-getting-random-tuples/)
*   [https://www.postgresql.org/docs/current/static/functions-math.html](https://www.postgresql.org/docs/current/static/functions-math.html)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-11-25T21:04:59.250

```
CREATE FUNCTION random_pick(p_items anyarray)
RETURNS anyelement AS
$$
   SELECT unnest(p_items) ORDER BY RANDOM() LIMIT 1;
$$ LANGUAGE SQL; 
```*

# android - Android - 为我的应用创建模块

> ID：14299053
> 
> 赞同：2
> 
> 时间：2013-01-12T23:28:29.077
> 
> 标签：android

我有我的申请。它运作良好。现在我开发了一个小插件，它安装到系统中并隐藏在启动器图标中：

```
<activity android:name="GitHubSearch"
              android:label="@string/app_name">
        <intent-filter>
            <action android:name="android.intent.action.MAIN"/>
            <category android:name="android.intent.category.DEFAULT"/>
        </intent-filter>
    </activity> 
```

我正在尝试使用以下答案启动此活动： [Android: Starting An Activity For A Different Third Party App](https://stackoverflow.com/questions/3518407/android-starting-an-activity-for-a-different-third-party-app)，但我的应用程序失败并出现异常 - 未找到活动。

```
final Intent i = new Intent("android.intent.action.MAIN");
            i.setComponent(new ComponentName("com.example.me.module","com.example.me.module.MyActivity"));
            startActivity(i); 
```

我检查了 10 次我传递给意图的包名称和活动名称。一切安好。

我哪里错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T00:14:08.820

看来你所需要的只是

```
android:exported = "true" 
```

到`activity`清单 xml 中的节点。

默认情况下，Android 不导出活动。导出 Activity 意味着它允许任何东西启动 Activity。

有两种导出方式 - 上述方式和设置自定义`intent-filter`.

如果您希望新模块仅与您的应用程序通信，您可以看到[这个](https://stackoverflow.com/questions/6354035/two-android-applications-with-same-user-id/6354073#6354073)SO 答案，但他们指出不建议这样做。

# html - 我可以覆盖网页书签的标题吗？

> ID：14299057
> 
> 赞同：5
> 
> 时间：2013-01-12T23:29:46.730
> 
> 标签：html, title

这个问题以前完全有人问过，但基本上没有给出解决方案（这是在2008年）。现在，在 2013 年，HTML 和浏览器功能增加了，所以我想问一下也许是个好主意。

问题：作为开发人员，您如何确保网页的标题与有人为您的页面添加书签时的标题不同？

我问的原因是因为有很多网站都有他们的标题，然后是一些口号。或者更糟糕的是，首先是口号，然后才是实际的网站标题。无论如何，标题很长，并且您希望书签简洁，最好是一个单词，对吗？我想知道现代浏览器中是否有类似的功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T00:21:25.953

据我所知，对于**Internet Explorer**，您可以在页脚中添加一个链接，供访问者单击并为您的站点添加书签，并使用此功能编辑默认标题`AddFavorite()`。
这是[MSDN](http://msdn.microsoft.com/en-us/library/ms535926%28v=vs.85%29.aspx)上的链接。请注意，此功能已弃用。

请看下面的使用演示：

```
 <a href="#" 
onclick="window.external.AddFavorite(location.href, 'YOUR_TITLE_HERE'); 
     return false">
Bookmark this!
</a> 
```

尽管据我所知，这不适用于其他浏览器（肯定不适用于 Chrome 和 Firefox），并且当用户决定手动为您的网站添加书签而不是单击链接时，它的使用就被取消了。

# c# - 是否有与 C# 的成员大括号初始化功能等效的 Objective-C/C++？

> ID：14299063
> 
> 赞同：5
> 
> 时间：2013-01-12T23:30:05.927
> 
> 标签：c#, objective-c, member-initialization

除了“var”（[请参阅​​我的另](https://stackoverflow.com/questions/14298793/is-there-an-objective-c-equivalent-to-cs-var-keyword/14298848#14298848)一篇文章）之外，我真正喜欢 C# 的一件事是我可以同时声明，然后使用大括号初始化类的成员，就像这样......

```
var reallyLongFooVarName = new ReallyLongFooClassName(){
    Name = "I'm an instance of Foo",
    ID   = 23 }; 
```

甚至在一条线上，像这样......

```
var longFooVarName = new ReallyLongFooClassName(){ Name = "I'm an instance of Foo", ID = 23 }; 
```

这将创建一个ReallyLongFooClassName 的实例，然后设置其成员'Name' 和'ID'。

这编译为与您键入此内容相同的内容...

```
ReallyLongFooClassName reallyLongFooVarName = new ReallyLongFooClassName();
reallyLongFooVarName.Name = "I'm an instance of Foo";
reallyLongFooVarName.ID = 23; 
```

那么Objective-C/C++有什么相当于C#的成员大括号初始化的东西吗？

注意：感谢我的另一篇文章，我已经知道 'auto' 是 Objective-C++ 中的 'var' 等价物，但 Objective-C 没有这样的等价物，这很遗憾。再次，[请参阅我的其他帖子](https://stackoverflow.com/questions/14298793/is-there-an-objective-c-equivalent-to-cs-var-keyword/14298848#14298848)以获取更多信息。）

## 更新

我知道编写初始化程序。那是完全不同的节拍。我在上面在 C# 中演示的技术使用属性的设置器，或者直接设置成员变量而无需编写构造函数（它们相当于 Objective-C 的“init”成员。）必须编写 init 成员迫使你必须预先指定要设置的内容。成员大括号初始化允许您以任何您想要的顺序指定属性/成员变量的任意组合。同样，它只是一次编写多行代码的语法糖。它实际上并没有改变班级。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T01:57:07.480

您可以编写一个执行类似操作的辅助函数（在 Objective-C++ 中，但您可以在 Objective-C 中通过使用`Class`as 参数轻松地做到这一点）：

```
template<class T>
T* NewObject(NSDictionary *fields) {
    static_assert(std::is_convertible<T*, id>::value,
                  "T must be an Objective-C class.");

    auto* obj = [[[[T class] alloc] init] autorelease];
    for (auto* key in fields.keys) {
        auto* capitalizedKey =
            [key stringByReplacingCharactersInRange:NSMakeRange(0, 1)
                                         withString:[key substringToIndex:1].uppercaseString];
        auto* message = [NSString stringWithFormat:@"set%@:", capitalizedKey];
        [obj performSelector:NSSelectorFromString(message) withObject:fields[key]];
    }
    return obj;
} 
```

然后按如下方式使用它：

```
auto* object = NewObject<MyClass>(@{
    @"foo": @"bar",
    @"baz": @42
}); 
```

我没有测试过它，但它应该可以工作。请注意，当 setter 采用非 Objective-C 对象（例如`int`）时，它不起作用，但可以更改函数以使其工作（通过反射）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T00:13:25.060

如果您考虑使用 Objective C/C++，有几种选择。

目标 C：

在类 A 中创建初始化方法为；

```
@interface ClassA:NSObject
-(id)initWithName:(NSString*)name id:(NSUinteger)id;
@end

@implementation ClassA{
  NSString *name;
  NSUinterger id;
}

-(id)initWithName:(NSString*)name id:(NSUInteger)id{
  self = [super init];
  if(!self)
    return nil;
  self -> name = name;
  self -> id = id;
  return self;
} 
```

初始化；

```
[[ClassA alloc] initWithName:@"MyName" id:1000];
Objective C alternative, 
```

使用类或结构；

使用结构；

```
struct MyClass{
    NSString *name;
    NSString *identifier;
    MyClass(NSString *name, NSUInteger identifier):name(name), identifier(identifier);

}; 
```

初始化；

```
MyClass *myclass = new MyClass(@"Sandeep", 1000); 
```

使用类；

```
class MyClass{
private:
    NSString *name;
    NSString *identifier;
public:
    MyClass(NSString *name = @"", NSUInteger identifier = 0);

}; 
```

我认为这应该如何回答你的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T01:20:34.887

不，没有这样的设施。

Objective-C 采用提供初始化程序的路径。通常，初始化程序采用初始化类实例所需的参数。有时，其中一些参数是可选的。即你可能有：

```
- (instancetype)initWithCar:(Car*)car tires:(NSArray*)tires cover:(Cover*)cover; 
```

`cover`有时可能`nil`是。

在 Objective-C 中，类的实例通常使用所需的状态进行初始化以提供最小的工作实例，然后调用各种 setter 来进一步配置类。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-06-30T01:57:42.967

以下是[ComponentKit](https://github.com/facebook/componentkit/blob/master/Examples/WildeGuess/WildeGuess/Components/SuccessIndicatorComponent.mm)中用于启发的几种方法：

```
 {[CKLabelComponent
                newWithLabelAttributes:{
                  .string = (indicatesSuccess ? @"Yes" : @"No"),
                  .color = [UIColor whiteColor],
                  .font = [UIFont fontWithName:@"Cochin-Bold" size:45.0],
                  .alignment = NSTextAlignmentCenter
                }
                viewAttributes:{
                  {@selector(setBackgroundColor:), [UIColor clearColor]},
                  {@selector(setUserInteractionEnabled:), @NO},
                }]
              }, 
```

您可以通过以下方式获取可变数量的命名属性

1.  具有聚合初始化 ( `struct CKLabelAttributes`)的结构
2.  一个`std::unordered_map`（在本例中为`typedef std::unordered_map<CKComponentViewAttribute, id>`），其中包含您要用于初始化类的任何键和值。

这种语法避免了复杂的 Obj-C 接口通常发生的`-initWithA:B:C:`, `-initWithA:`, , ... 爆炸。`-initWithB:`

# android - 使用 keytool 和 jarsigner 签署我的应用程序

> ID：14299066
> 
> 赞同：0
> 
> 时间：2013-01-12T23:30:45.437
> 
> 标签：android, keytool, commonsware, jarsigner

我正在使用我的 commonsware 书和描述如何签署我的应用程序的 android 文档。但是有一点我不明白...

我已经毫无问题地生成了我的 KeyStore 文件。

现在，通用软件书说“构建一个发布版本，它应该在项目的 bin/目录中为您提供一个 unsigned.apk 文件”，但它没有说明如何做到这一点。我看不到如何在 Eclipse 中执行此操作。似乎没有 Build -> Release 菜单项。尝试谷歌搜索，找不到任何东西。

Android 文档说“2\. 在发布模式下编译应用程序”，然后告诉您“导出未签名的应用程序包”，然后将其存储在某个地方。我这样做了，现在我有两个 apk 文件。一个在我的 bin 目录中，一个在我导出的目录中。现在它说要使用 jarsigner 和 zipaligner，我只能假设（它没有说）我正在对已存储的导出 apk 执行此操作（而不是我的 bin 目录中的那个）。然后我只是将这个存储的apk复制回我的bin目录中的那个吗？下次编译的时候不会被抹掉吗？

与编写应用程序相比，这要困难得多，也少了很多乐趣。

有人可以让我直截了当吗？谢谢，加里

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T23:36:11.293

> 我看不到如何在 Eclipse 中执行此操作。

[http://developer.android.com/tools/publishing/app-signing.html#releasecompile](http://developer.android.com/tools/publishing/app-signing.html#releasecompile)

> 然后我只是将这个存储的apk复制回我的bin目录中的那个吗？

不，你分发它。将其上传到 Play 商店。或者在您的网站上发布。或者将其复制到一千万个 USB 拇指驱动器中，然后亲自交付给潜在用户。无论你的船漂浮。

# vba - Word 宏在文档的 3/4 处停止，而不是在末尾

> ID：14299070
> 
> 赞同：-1
> 
> 时间：2013-01-12T23:31:06.790
> 
> 标签：vba, ms-word

有人在 2007 年为我创建了这个，从那以后它一直非常有用，但它直到文档结束才运行......

您能否为我修复它，或者建议另一种解决方案（一个带有热键的宏，我可以一直按住它直到文档结束）？

```
Sub Space()

Selection.HomeKey wdStory
For i = 0 To ActiveDocument.ComputeStatistics(wdStatisticCharacters)
    Selection.MoveRight Unit:=wdCharacter, Count:=1
    Selection.TypeText Text:=" "
Next
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T00:09:36.483

您并没有真正说出问题所在，但也许它不允许空格，并且空格数不足。如果是这样，那么这可能会解决它。我`wdStatisticCharacters`改为`wdStatisticCharactersWithSpaces`：

```
Sub Space()
Dim i As Long

Selection.HomeKey wdStory
For i = 0 To ActiveDocument.ComputeStatistics(wdStatisticCharactersWithSpaces)
    Selection.MoveRight Unit:=wdCharacter, Count:=1
    Selection.TypeText Text:=" "
Next
End Sub 
```

我不会对 Word 进行太多编程，但我猜想这可以通过避免使用这些`Selection`语句来加快速度。

# xml-serialization - ASP.NET Web API 中的序列化

> ID：14299072
> 
> 赞同：0
> 
> 时间：2013-01-12T23:31:32.730
> 
> 标签：xml-serialization, asp.net-web-api, xmlserializer

我在我的 ASP.NET Web API 项目中使用`XmlSerializer`而不是，`DataContractSerializer`并将返回对象定义为

**响应对象**

```
public class MyResponse 
{
   public string Name {get;set;}

   public CustomField<string> Username {get;set;}

   public CustomField<float?> Score {get;set;}
} 
```

**自定义字段**

```
public class CustomField<T>
{
    public T Value {get;set;}

    public long LastModified {get;set;}

} 
```

我想生成一个 XML 响应

```
<MyResponse>
 <FirstName>ABC</FirstName>
 <Username lastModified="1234">XYZ</Username>
 <Score lastModified="45678">12002</Score>
</MyResponse> 
```

当我将`CustomField`类装饰为

```
public class CustomField<T>
{
    [XmlText]
    public T Value {get;set;}

    [XmlAttribute]
    public long LastModified {get;set;}
} 
```

如何获得所需的 XML 响应？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T01:24:12.047

好吧，我想我知道发生了什么事。

如果您尝试运行

```
new XmlSerializer(typeof(MyResponse)) 
```

你会得到这个错误：

System.InvalidOperationException：无法序列化 System.Nullable`1[System.Single] 类型的成员“值”。XmlAttribute/XmlText 不能用于编码复杂类型。

所以问题是你有一个'float'类型的字段？作为 [XmlText]。[XmlText] 只能应用于基元，而且看起来 XmlSerializer 无法识别“浮点数？” 作为原始人。如果你使用 'float' 而不是 'float?'，一切看起来都正常。如果您想指示有时没有 Score，您可能希望将 Score 设置为 null 而不是将 Score 的值设置为 null。

希望有帮助。

# c++ - VST GUI 推子/滑块未更新

> ID：14299074
> 
> 赞同：0
> 
> 时间：2013-01-12T23:32:01.623
> 
> 标签：c++, user-interface, vst, envelope

我有一个大学作业，要求我使用 VST SDK 2.4 构建一个简单的加法合成器。

到目前为止，我已经将部分相加和一个信封。

我认为信封有效，但不确定，因为它根据推子/滑块位置拉动其值，而且他们似乎不想打球。

我确信这与我的值/范围缩放有关，因为延音滑块似乎工作。

我可能花了太长时间重新检查我的代码，但无法解决问题。

不确定哪些代码会有用，所以我刚刚附上了很多。

任何帮助是极大的赞赏。

提前致谢，

本。

ADSR.h

```
#ifndef __ADSR 
#define __ADSR

#include <math.h>

class ADSR
{
public:
    ADSR();
    ~ADSR();

    int time, internalTimer, stage;
    float process(float CurrentLevel, int attack, int decay, float sustain, int release, int* pKeyState); 
};
#endif 
```

ADSR.cpp

```
#include "ADSR.h"

ADSR::ADSR()
{
    time = 0;
    stage = 4;
    internalTimer = 0;
}
ADSR::~ADSR()
{

}

float ADSR::process(float CurrentLevel, int attack, int decay, float sustain, int release, int* pKeyState)
{
    if(stage = 1 && time >= (attack + decay + internalTimer + release))
    {
        time = 0;
    }
    while(time < attack)
    {
        CurrentLevel = CurrentLevel * ((1 / attack) + 1);
        time++;
        return CurrentLevel;
    }

    while(time < (attack + decay))
    {
        CurrentLevel = CurrentLevel * (sustain / decay);
        time++;
        return CurrentLevel;
    }

    while(time > (attack + decay))
    {
        CurrentLevel = CurrentLevel * 1;
        internalTimer++;
        return CurrentLevel;
    }

    while(time < (attack + decay + internalTimer + release) && *pKeyState == 2)
    {
        CurrentLevel = CurrentLevel * (sustain / release);
        time++;
        return CurrentLevel;

    }
    return CurrentLevel;
} 
```

VST_Plug_in.h

```
//-------------------------------------------------------------------------------------------------------
// This is the most basic plug in code there is!
// All this plug in will do is apply some gain to the input
// This is done in process replacing
//-------------------------------------------------------------------------------------------------------

#ifndef __VST_Plug_in__
#define __VST_Plug_in__

#include "audioeffectx.h"

#include <math.h>
#include "ADSR.h"

const int NUMBER_OF_INPUTS = 2;
const int NUMBER_OF_OUTPUTS = 2;
const int NUMBER_OF_PROGRAMS = 1;
const int NUMBER_OF_PARAMETERS = 5;

enum
    {
    kGain,
    kAttack,
    kDecay,
    kSustain,
    kRelease
    };

// Base frequency (A4- 440Hz) for use in generating frequency table
    const float BASE_A4  = 440.0;
    const double PI = 3.14159265358979323846;

//-------------------------------------------------------------------------------------------------------
class VST_Plug_in : public AudioEffectX
{
public:
    VST_Plug_in (audioMasterCallback audioMaster);
    ~VST_Plug_in ();

    virtual void processReplacing (float** inputs, float** outputs, VstInt32 sampleFrames);

    virtual VstInt32 processEvents (VstEvents* events);
    virtual VstInt32 canDo (char* text);

    double leftSample;
    double rightSample;
    float frequency;
    float sampleRate;
    long time;
    long* pTime;
    float gain;

    // MIDI stuff
    // MIDI data : holds data about current state of MIDI (note on/off, frequency, velocity)
    int keyDown; // true : key is down, false : no key down
    int* pkeyDown;

    long currentNote; // the MIDI note number of the last note on (key down)
    float currentVelocity; // current MIDI note velocity (0 -> 1)
    float *m_pfFrequencyTable; // will store a list of frequency values (for note->frequency conversion)

    void noteOff ();
    void noteOn (long liNote, long liVelocity);
    int getAttack(float value);
    int sendAttack();
    int getDecay(float value);
    int sendDecay();
    float getSustain(float value);
    float sendSustain();
    int getRelease(float value);
    int sendRelease();

    int maxAttack, minAttack, attack, maxDecay, minDecay, decay, minRelease, maxRelease, release;
    float sustain;

    double partial1, partial2, partial3, partial4, partial5, partial6, partial7, partial8;

    ADSR env;

    virtual void setParameter (VstInt32 index, float value);
    virtual float getParameter (VstInt32 index);
    virtual void getParameterLabel (VstInt32 index, char* label);
    virtual void getParameterDisplay (VstInt32 index, char* text);
    virtual void getParameterName (VstInt32 index, char* text); 
};

#endif 
```

VST_Plug_in.cpp

```
//-------------------------------------------------------------------------------------------------------
// VST Plug-Ins SDK
// Version 2.4      $Date: 2005/11/15 15:14:03 $
// 
// Category     : VST 2.x SDK Samples
// Filename     : VST_Plug_in.cpp
// Created by   : Steinberg Media Technologies
// Description  : a crap additive synth
//
// © 2005, Steinberg Media Technologies, All Rights Reserved
//-------------------------------------------------------------------------------------------------------

#include "VST_Plug_in.h"

//-------------------------------------------------------------------------------------------------------
AudioEffect* createEffectInstance (audioMasterCallback audioMaster)
{
    return new VST_Plug_in (audioMaster);
}

//-------------------------------------------------------------------------------------------------------
VST_Plug_in::VST_Plug_in (audioMasterCallback audioMaster)
: AudioEffectX (audioMaster, NUMBER_OF_PROGRAMS, NUMBER_OF_PARAMETERS)  
{
    setNumInputs (NUMBER_OF_INPUTS);        // stereo in
    setNumOutputs (NUMBER_OF_OUTPUTS);      // stereo out
    setUniqueID ('Add1');   // identify
    canProcessReplacing (); // supports replacing output
    leftSample  = 0.0;
    rightSample = 0.0;
    frequency = 0.0;
    gain = 1.f;
    currentVelocity = 0.0;
    currentNote = 0;
    keyDown = 2;
    pkeyDown = &keyDown;
    time = 0;
    pTime = &time;
    partial1 = partial2 = partial3 = partial4 = partial5 = partial6 = partial7 = partial8 = 0.f;
    maxAttack = 2 * 192000;
    minAttack = 1;
    attack = 44100;
    maxDecay = 192000;
    minDecay = 1;
    decay = 22050;
    maxRelease = 4 * 192000;
    minRelease = 1;
    release = 96000;
    sustain = 1.f;
    sampleRate = getSampleRate();//get sample rate from host

    ADSR env;

    isSynth (); // Informs host that this is a VSTi

    // initialise frequency table
    m_pfFrequencyTable = new float [128] ; // 128 Midi notes
    if (m_pfFrequencyTable)
    {
        for (int i = 0; i<  128; i++)
        {
            m_pfFrequencyTable[i] = BASE_A4 *powf(2.f,(i-57)/12.f) ;
        }
    }   
}

//-------------------------------------------------------------------------------------------------------
VST_Plug_in::~VST_Plug_in ()
{
    // nothing to do here
}

//-----------------------------------------------------------------------------------------
// this is where the intresting stuff happens :0

void VST_Plug_in::processReplacing (float** inputs, float** outputs, VstInt32 sampleFrames)
{
    float* out1 = outputs[0];
    float* out2 = outputs[1];
    //ADSR env;

    for(int i = 0; i < sampleFrames; i++)
    {
        // NEW : only send out audio if there is a note on currently
        frequency = m_pfFrequencyTable[currentNote];

        partial1 = (double)sin(2.0*PI*time++*(frequency/sampleRate))* 0.125;
        partial2 = (double)sin(2.0*PI*time++*((2*frequency)/sampleRate))* 0.125;
        partial3 = (double)sin(2.0*PI*time++*((3*frequency)/sampleRate))* 0.125;
        partial4 = (double)sin(2.0*PI*time++*((4*frequency)/sampleRate))* 0.125;
        partial5 = (double)sin(2.0*PI*time++*((5*frequency)/sampleRate))* 0.125;
        partial6 = (double)sin(2.0*PI*time++*((6*frequency)/sampleRate))* 0.125;
        partial7 = (double)sin(2.0*PI*time++*((7*frequency)/sampleRate))* 0.125;
        partial8 = (double)sin(2.0*PI*time++*((8*frequency)/sampleRate))* 0.125;

        leftSample = partial1 + partial2 + partial3 + partial4 + partial5 + partial6 + partial7 + partial8;

        leftSample = leftSample * env.process(leftSample, attack, decay, sustain, release, pkeyDown); 

        leftSample = leftSample * currentVelocity;
        leftSample = leftSample * gain;

        rightSample = leftSample;

        // write samples to output buffer 
        (*out1++) = leftSample;
        (*out2++) = rightSample;
    }
}

// NEW : overriden function, tells host what the plugin can do (see notes)

VstInt32 VST_Plug_in::canDo(char *text)
{
    if (!strcmp (text, "receiveVstEvents"))     // SimpleSynth can receive VST events
        return 1;
    if (!strcmp (text, "receiveVstMidiEvent"))  // SimpleSynth can receive VST MIDI events
        return 1;
    return -1;  // explicitly can't do; 0 => don't know 
}

// NEW : this process function is called to collect incoming VST events

VstInt32 VST_Plug_in::processEvents (VstEvents* events)
{
    // parse event list
    for (long i = 0; i < events->numEvents; i++)
    {
        if ((events->events[i])->type == kVstMidiType)
        {
            VstMidiEvent* event = (VstMidiEvent*)events->events[i];
            char* midiData = event->midiData;
            long status = midiData[0] & 0xf0;       // ignoring channel

            if (status == 0x90 || status == 0x80)   // we only look at notes
            {
                long note = midiData[1];
                long velocity = midiData[2];

                if (status == 0x80)
                {
                    velocity = 0;   
                    // set velocity to zero if it is a note off message
                }
                if (!velocity && (note == currentNote))
                {
                    noteOff ();
                }
                else
                {
                    noteOn (note, velocity);
                }
            }
        }
    }
    return 1; // indicate that we wish to receive more events
}

void VST_Plug_in::noteOn(long liNote, long liVelocity)
{
    keyDown = 1;
    time = 0;
    currentNote = liNote;

    // velocity is liVelocity /127
    currentVelocity = liVelocity / 127.f;

}

void VST_Plug_in::noteOff()
{
    keyDown = 2;
    currentVelocity = 0;
}

// this function is called whenever the fader is moved

void VST_Plug_in::setParameter (VstInt32 index, float value)
{
    switch (index)
    {
        case kGain : gain = value;break;  
        case kAttack : attack = getAttack(value); break; //need vale in samples for envelope here
        case kDecay : decay = getDecay(value); break;
        case kSustain : sustain = getSustain(value); break;
        case kRelease : release = getRelease(value); break;
    }
}

//-----------------------------------------------------------------------------------------

// this function is called whenever the gui requires data

// eg when it is displayed

float VST_Plug_in::getParameter (VstInt32 index)

{
    switch (index)
    {
        case kGain : return gain;break;
        case kAttack : return sendAttack(); break; //need 0 - 1 val here
        case kDecay : return sendDecay();break;
        case kSustain : return sendSustain();break;
        case kRelease : return sendRelease();break;
    }
}

//-----------------------------------------------------------------------------------------

// getParameterName places the parameter name on the plug in

void VST_Plug_in::getParameterName (VstInt32 index, char* label)

{
    switch (index)
    {
        case kGain : vst_strncpy (label, "Gain", kVstMaxParamStrLen);break;
        case kAttack : vst_strncpy (label, "Attack", kVstMaxParamStrLen); break;
        case kDecay : vst_strncpy (label, "Decay", kVstMaxParamStrLen); break;
        case kSustain : vst_strncpy (label, "Sustain", kVstMaxParamStrLen); break;
        case kRelease : vst_strncpy (label, "Release", kVstMaxParamStrLen); break;
    }
}

//----------------------------------------------------------------------------------------

// getParameterDisplay displays the parameter value on the plug-in

void VST_Plug_in::getParameterDisplay (VstInt32 index, char* text)

{
    switch (index)
    {
        case kGain : dB2string(gain, text, kVstMaxParamStrLen);break;
        case kAttack : float2string(attack, text, kVstMaxParamStrLen); break;
        case kDecay : float2string(decay, text, kVstMaxParamStrLen); break;
        case kSustain: dB2string(sustain, text, kVstMaxParamStrLen); break;
        case kRelease : float2string(release, text, kVstMaxParamStrLen); break;
    }

    //linear display
    //float2string(gain, text, kVstMaxParamStrLen);

    //dB display
    //dB2string (gain, text, kVstMaxParamStrLen);
}

//-----------------------------------------------------------------------------------------

void VST_Plug_in::getParameterLabel (VstInt32 index, char* label)

{
    switch (index)
    {
        case kGain : vst_strncpy (label, "dB", kVstMaxParamStrLen);break;
        case kAttack : vst_strncpy (label, "Samples", kVstMaxParamStrLen); break;
        case kDecay : vst_strncpy (label, "Samples", kVstMaxParamStrLen); break;
        case kSustain : vst_strncpy (label, "dB", kVstMaxParamStrLen); break;
        case kRelease : vst_strncpy (label, "Samples", kVstMaxParamStrLen); break;
    }
}

int VST_Plug_in::getAttack(float value)
{   
    attack = minAttack + ((maxAttack-minAttack) * value);
    return attack;
}
int VST_Plug_in::sendAttack()
{   
    int retAttVal;
    retAttVal = (attack - minAttack) / (maxAttack-minAttack);
    return retAttVal;
}

int VST_Plug_in::getDecay(float value)
{
    decay = minDecay + ((maxDecay-minDecay) * value);
    return decay;
}
int VST_Plug_in::sendDecay()
{
    int retDecVal;
    retDecVal = (decay - minDecay) / (maxDecay-minDecay);
    return retDecVal;
}

float VST_Plug_in::getSustain(float value)
{
    sustain = value;
    return sustain;
}
float VST_Plug_in::sendSustain()
{
    return sustain;
}

int VST_Plug_in::getRelease(float value)
{
    release = minRelease + ((maxRelease-minRelease) * value);
    return release;
}
int VST_Plug_in::sendRelease()
{
    int retRelVal;
    retRelVal = (release - minRelease) / (maxRelease-minRelease);
    return retRelVal;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T17:59:49.790

我发现了推子的问题。

有一些顽皮的整数应该是浮点数。

快速更改数据类型，一切都按预期运行。

从那以后，我的代码出现了另一个问题，但它与标题无关，因此将发布一个新问题。

谢谢

# javascript - Facebook API - 发布到时间线

> ID：14299075
> 
> 赞同：2
> 
> 时间：2013-01-12T23:32:02.870
> 
> 标签：javascript, html, facebook, facebook-graph-api, facebook-timeline

我知道这不会那么困难；也许我会以错误的方式解决这个问题。希望你能帮助我。

我有一个网站需要能够将字符串发布到某人的 Facebook 时间线。

我已经让他们正确登录，但在他们获得许可后，我还没有找到任何工作代码来向他们的时间线提交信息。

我按照[这里](https://developers.facebook.com/docs/technical-guides/opengraph/opengraph-tutorial/)的例子没有运气。我有

*   创建了一个应用程序
*   登录脸书
*   用食谱对象定义了一个 Cook 动作
*   使用他们提供的代码在我的网站上创建了一个页面，替换`[your_app_id]`为我的应用程序 ID
*   尝试发布厨师操作

但是当我在我的网站上单击他们的示例页面上的烹饪按钮时，它给了我错误：

```
No callback passed to the ApiClient for https://graph.facebook.com/me/fblaevents:cook 
```

并`error occurred`弹出浏览器警报。

这是我正在使用的示例代码：

```
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en-US"
  xmlns:fb="https://www.facebook.com/2008/fbml"> 
<head prefix="og: http://ogp.me/ns# fblaevents: 
              http://ogp.me/ns/apps/fblaevents#">
  <title>OG Tutorial App</title>
  <meta property="fb:app_id" content="542182755801091" /> 
  <meta property="og:type" content="fblaevents:recipe" /> 
  <meta property="og:title" content="Stuffed Cookies" /> 
  <meta property="og:image" content="http://fbwerks.com:8000/zhen/cookie.jpg" /> 
  <meta property="og:description" content="The Turducken of Cookies" /> 
  <meta property="og:url" content="http://fbwerks.com:8000/zhen/cookie.html">

  <script type="text/javascript">
  function postCook()
  {
      FB.api(
        '/me/fblaevents:cook',
        'post',
        { recipe: 'http://fbwerks.com:8000/zhen/cookie.html' },
        function(response) {
           if (!response || response.error) {
              alert('Error occured');
           } else {
              alert('Cook was successful! Action ID: ' + response.id);
           }
       });
  }
  </script>
</head>
<body>
  <div id="fb-root"></div>
  <script>
    window.fbAsyncInit = function() {
      FB.init({
        appId      : '542182755801091', // App ID
        status     : true, // check login status
        cookie     : true, // enable cookies to allow the server to access the session
        xfbml      : true  // parse XFBML
      });
    };

    // Load the SDK Asynchronously
    (function(d){
      var js, id = 'facebook-jssdk'; if (d.getElementById(id)) {return;}
      js = d.createElement('script'); js.id = id; js.async = true;
      js.src = "//connect.facebook.net/en_US/all.js";
      d.getElementsByTagName('head')[0].appendChild(js);
    }(document));
  </script>

  <h3>Stuffed Cookies</h3>
  <p>
    <img title="Stuffed Cookies" 
         src="http://fbwerks.com:8000/zhen/cookie.jpg" 
         width="550"/>
  </p>

  <br>
  <form>
    <input type="button" value="Cook" onclick="postCook()" />
  </form>
</body>
</html> 
```

如果有更简单的方法，请指出给我。我不知道我在做什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T10:54:21.390

您应该用您自己的替换 JS 代码中的 OG 元标记和配方 url。由于上面的代码只是一个起始代码，而不是一个工作演示（或者可能是，但现在链接已经死了）。

另外，既然你得到了`Error occured`那么很可能`response.error`里面有一些东西，所以你应该通过调用控制台方法来检查它的值，例如：

```
if (!response || response.error) {
   console.log('Error occured: ', response.error);
} else { 
```

这会给你：

> 发生错误：对象 {类型：“异常”，消息：“无法从 URL 检索数据。”，代码：1660002}

# html - 两个 div 交叉

> ID：14299076
> 
> 赞同：1
> 
> 时间：2013-01-12T23:32:05.523
> 
> 标签：html, css

我会做这样的事情：

![在此处输入图像描述](../Images/915541e4a04052d57e51097c34745bc8.png)

我是这样做的（[http://jsfiddle.net/K5KjY/](http://jsfiddle.net/K5KjY/)）：

**CSS：**

```
#container{

    width: 970px;
    margin: 0px auto;
}

#backdrop-slider img{ 
    position: fixed; /* <---- Problem should be here! */
    left: 0;
    right: 0;
    margin: 0px;
    width: 100%;
    height: 200px;
}  

#content{
    margin-top: 250px;
    width: 100%
} 
```

**HTML：**

```
<body lang="en">
<div id="container">

    <div id="header">
        <h1>TITLE</h1>

        <div id="backdrop-slider">
            <img src="http://cf2.imgobject.com/t/p/original/fI3ucpgaVKOUcQ82vhgWmWuLlg2.jpg">
        </div> 
    </div>

    <div id="content">

        <div id="switcher">
          <p>
            <a href="#">Link 1</a>
            <a href="#">Link 2</a>
            <a href="#">Link 3</a>
          </p>
        </div>

        <div id="covers">

            <img src="http://cf2.imgobject.com/t/p/w185/zh9DXJhBdHVVaWiDURTipADamcK.jpg">

            <img src="http://cf2.imgobject.com/t/p/w185/zh9DXJhBdHVVaWiDURTipADamcK.jpg">
            <img src="http://cf2.imgobject.com/t/p/w185/zh9DXJhBdHVVaWiDURTipADamcK.jpg">
            <img src="http://cf2.imgobject.com/t/p/w185/zh9DXJhBdHVVaWiDURTipADamcK.jpg">
            <img src="http://cf2.imgobject.com/t/p/w185/zh9DXJhBdHVVaWiDURTipADamcK.jpg">
            <img src="http://cf2.imgobject.com/t/p/w185/zh9DXJhBdHVVaWiDURTipADamcK.jpg">
            <img src="http://cf2.imgobject.com/t/p/w185/zh9DXJhBdHVVaWiDURTipADamcK.jpg">
        </div>

    </div>

</div>

</body> 
```

但是，以这种方式，如果我向下滚动，我会得到这个： ![在此处输入图像描述](../Images/7c10d907f76130d6e053bd947dca0066.png) 我希望“背景滑块”在向下滚动时上升

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T23:40:32.263

添加`z-index:-1;`背景图像。（或内容的正面索引）

[http://jsfiddle.net/K5KjY/4/](http://jsfiddle.net/K5KjY/4/)

此外，如果您希望 div 在滚动时消失，请使用`position:absolute;`而不是固定。

# javascript - 我的内容超出了页面底部

> ID：14299079
> 
> 赞同：0
> 
> 时间：2013-01-12T23:32:38.597
> 
> 标签：javascript, html, css, pagination, height

我正在将我网站上的网上商店更新为 Ecwid。由于我使用 Intuit Sitebuilder 来构建我的站点，因此页面是固定大小的。我在 Sitebuilder 中添加了一个占位符来保存 Ecwid 商店的脚本。但是，我商店的某些页面从屏幕底部溢出。我已经联系了 Ecwid 和 Sitebuilder 寻求帮助，但没有成功。

我需要我的商店高度不超过 1000 像素，并且如果脚本的其中一个页面更长，它将在左侧有一个滚动条。有人可以帮帮我吗？

这是一个链接，可以查看我在说什么：[*Dip Wizard Hydrographic Dip Kit Store*](http://www.dipwizard.com/new-store.html#!/~/product/category=4409263&id=18882021)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T23:39:28.750

如果我理解正确你想要一个内容超过 1000 像素的滚动条，那么我想你应该在你的内容元素上输入你的 css {overflow-y:scroll;} 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T23:47:23.383

您需要编辑网站的 html 和 css：

**html：** 在 id 为“element50”的 div 中，有一个没有 id 的 div。这是您担心的容器。你需要给这个 div 一个 id，例如 -

```
<div id="productInfo"> 
```

**css：**然后在你的 css 中 - 添加这些规则

```
#productInfo {
  margin-top: 25px;
  max-height: 1045px;
  overflow-x: hidden;
  overflow-y: scroll;
} 
```

如果这非常紧急并且您找不到在哪里添加/编辑您的 css，您可以将其添加到 html 本身中：

```
<div style="margin-top: 25px; max-height: 1045px; overflow-x: hidden; overflow-y: scroll; 
```

但不建议这样做，应该在不久的将来用适当的 css 替换。

# ios - 动态创建的按钮和故事板segue

> ID：14299084
> 
> 赞同：1
> 
> 时间：2013-01-12T23:33:20.050
> 
> 标签：ios, uitableview, uistoryboard, uistoryboardsegue

由于我的代码中的这个问题，我被卡住了：

我正在使用情节提要，并且有我的自定义表格视图，该表格视图能够滑动显示可以添加按钮等的“背景”的行。问题是数量和存在是在运行时管理的（每个单元格可以有多个按钮或无 - 我将它们添加到背景视图中）。现在我想让这些按钮继续，我只是不知道如何在我的故事板中做到这一点......有人有类似的问题，或者我只是想错了吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T15:26:32.780

另一种方法是继续在情节提要中创建转场。您无法将它们连接到按钮（因为它尚不存在），但您可以将它们连接到表所在的视图。您给 segue 一个标识符（通过单击作为 segue 的行并设置属性）。然后，这是一个简单的调用问题：

```
[self.storyboard performseguewithidentifier:@"theIdentifier"]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-13T00:01:49.477

您不能在情节提要之外建立 segue 连接：

[以编程方式创建 segue](https://stackoverflow.com/questions/9674685/creating-a-segue-programmatically)

您可以在代码中制作自定义转场，但将转场连接到对象只能通过在情节提要上绘制线条来完成。

但你不需要。Segue 只是视图控制器之间的修饰转换。它们是用于替换少量代码的可视化工具。

例如，推送 segue 只是替换了此代码

```
UIViewController* myViewController = [UIViewController alloc] init;
[[self navigationController] pushViewController:myViewController 
```

当您在代码中制作按钮时，您应该在代码中管理您的导航。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-20T15:17:00.127

首先，您需要设置 StoryBoard ID。您可以通过选择特定的视图控制器并在右侧进入身份检查器来做到这一点。在自定义类下，有“StoryBoard ID”，你必须设置名称“Menu”

![在此处输入图像描述](../Images/a439ea5f31262f9cc4ef636b5b178a3d.png)

其次，您需要从按钮或任何其他控件调用此情节提要。您可以使用以下方法执行此操作：

```
[self.storyboard instantiateViewControllerWithIdentifier:@"Menu"]; 
```

通过这种方式，您可以将 StoryBoard ID 分配给 StoryBoard 中的不同控制器，并从您想要的任何控件中调用它们。

希望这可以帮助

# ruby-on-rails - 如何停止脚本/运行器电子邮件过滤器记录 STDIN？

> ID：14299087
> 
> 赞同：0
> 
> 时间：2013-01-12T23:33:43.110
> 
> 标签：ruby-on-rails, ruby, logging, stdin

我在模型中有一个方法来处理传入的退回电子邮件。在 cPanel 中，我有一个名为的电子邮件帐户转发器`eblast-bounce@mydomain.com`，它被设置为通过管道传输到带有该行的程序

```
|/home/myaccount/my_rails_app/production/script/runner 
    'EBlast.receive(STDIN.read)' -e production` 
```

问题是 的全部内容`STDIN.read`都转储在日志中。我不想要这些。它甚至在调用该方法之前就被转储了，`EBlast.receive`因为我在该方法的第一行放置了一个自定义日志条目，并且在此之前记录了电子邮件内容。

如何停止`STDIN.read`被记录？它炸毁了我的日志文件。

编辑：也许这不是脚本/运行程序正在做的事情，而是邮件服务器以某种方式在做什么？我注意到，每当我通过 rails 应用程序实际发送和接收电子邮件时，都会在日志中记录电子邮件内容。发送电子邮件时，

> 将邮件发送到 [电子邮件地址]

出现在电子邮件内容之前...当我通过脚本/运行程序收到电子邮件时，

> 收到的邮件：

出现在电子邮件内容之前。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T01:46:12.297

原来它与 action_mailer 的记录器功能有关！我把`ActionMailer::Base.logger = nil`environment.rb

问题解决了。

# c# - 在 LINQ 查询中创建嵌套在对象中的列表

> ID：14299094
> 
> 赞同：4
> 
> 时间：2013-01-12T23:34:45.027
> 
> 标签：c#, linq, entity-framework

我有两个看起来像这样的表：

```
-- Houses
houseid personid
1       11
1       12
1       13
2       232
2       5533
2       40

-- People
personid person name
11       John
12       Jane
13       Zoe 
```

和一堂课

```
class House
{
    List<string> people_name {get; set;};
} 
```

我想返回一个对象，该对象`House`包含一个列表，上面列出了住在给定房子里的所有人的名字。我最接近实现它的是在 object 中返回一个 IQueryable `House`，因为您不能`ToList`从查询中调用：

```
LINQ to Entities does not recognize the method 'System.Collections.Generic.List`1[System.String]
ToList[String](System.Collections.Generic.IEnumerable`1[System.String])'
 method, and this method cannot be translated into a store expression. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T01:15:48.500

您可以在您的 select 语句中创建 House 对象。下面的代码创建了一个包含适当名称的 House 对象列表：

```
class Program
{
    static void Main(string[] args)
    {
        List<KeyValuePair<int, int>> housePersonPairs = new List<KeyValuePair<int, int>>();
        housePersonPairs.Add(new KeyValuePair<int, int>(1, 11));
        housePersonPairs.Add(new KeyValuePair<int, int>(1, 12));
        housePersonPairs.Add(new KeyValuePair<int, int>(1, 13));
        housePersonPairs.Add(new KeyValuePair<int, int>(2, 232));
        housePersonPairs.Add(new KeyValuePair<int, int>(2, 5533));
        housePersonPairs.Add(new KeyValuePair<int, int>(2, 40));

        List<Person> persons = new List<Person>();
        persons.Add(new Person() { ID = 11, Name = "John" });
        persons.Add(new Person() { ID = 12, Name = "Jane" });
        persons.Add(new Person() { ID = 13, Name = "Zoe" });
        persons.Add(new Person() { ID = 232, Name = "Name1" });
        persons.Add(new Person() { ID = 5533, Name = "Name2" });
        persons.Add(new Person() { ID = 40, Name = "Name3" });

        var houseAndNames = housePersonPairs.Join(
            persons,
            hpp => hpp.Value,
            p => p.ID, 
            (hpp, p) => new { HouseID = hpp.Key, Name = p.Name });

        var groupedNames = from hn in houseAndNames
                     group hn by hn.HouseID into groupOfNames
                     select groupOfNames.Select(x => x.Name).ToList();

        List<House> houses = groupedNames.Select(names => new House() { people_name = names }).ToList();

    }
}

public class Person
{
    public int ID { get; set; }
    public string Name { get; set; }
}

public class House
{
    public List<string> people_name { get; set; }
} 
```

# python - 如何使用 buildout 从 repo 中提取 python 包？

> ID：14299096
> 
> 赞同：0
> 
> 时间：2013-01-12T23:34:48.623
> 
> 标签：python, svn, buildout

我有一个为我的基于 wsgi 的框架创建 buildout.cfg 的预卷引导脚本。Buildout 最初使用此运行以创建必要的粘贴目录结构。然后，我将我的代码从 VCS 存储库中提取到 src 目录，以及一个特定于我要部署到的任何环境的 buildout.cfg 以及其他一些 .py 静态数据文件。然后我再次运行 buildout。

从我的 pov 来看，两次运行 buildout 是非常浪费的。有没有办法从 buildout 中的 subversion 导出到我的项目源目录以及任意文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T23:37:55.190

我会使用[`mr.developer`](http://pypi.python.org/pypi/mr.developer)本地结帐：

```
[buildout]
extensions = mr.developer
auto-checkout = yourpackage

[sources]
yourpackage = svn http://url.to/repository 
```

现在`mr.developer`将检查`yourpackage`作为 buildout 运行的一部分， into `src/`，运行 it's`setup.py`以使其成为开发鸡蛋，并告诉 buildout 它是可用的。现在 buildout 将使用该本地副本来满足任何`yourpackage`要求。

如果您的 svn 包不是 python egg，只需添加`egg=false`到它的`sources`条目，并且`mr.developer`不会寻找`setup.py`运行。

或者，您可以只使用[`iw.recipe.cmd`](http://pypi.python.org/pypi/iw.recipe.cmd/0.3)来简单地运行`svn`命令：

```
[yourpackage]
recipe = iw.recipe.cmd
cmds = 
   svn export http://url.to/repository 
```

# c# - 返回最后插入的 ID 而不使用第二个查询

> ID：14299098
> 
> 赞同：8
> 
> 时间：2013-01-12T23:34:51.427
> 
> 标签：c#, asp.net, sql-server-2008

我正在使用 SQL Server 2008 开发 ASP.NET 项目 (C#)。

当我在数据库中的表中插入一行时，我想获取最后插入的 ID，即表的**IDENTITY**（自动递增）。

我不想使用另一个查询，并做类似...

```
SELECT MAX(ID) FROM USERS; 
```

因为 - 即使它只是一个查询 - 感觉很蹩脚......

当我插入一些东西时，我通常使用**ExecuteNonQuery()**，它返回受影响的行数。

```
int y = Command.ExecuteNonQuery(); 
```

有没有办法在不使用另一个查询的情况下返回**最后插入的 ID ？**

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-12T23:39:33.757

大多数人通过以下方式做到这一点：

```
INSERT dbo.Users(Username)
VALUES('my new name');

SELECT NewID = SCOPE_IDENTITY(); 
```

（或者代替查询，将其分配给变量。）

所以这不是*针对表*的两个查询......

不过也有以下方法：

```
INSERT dbo.Users(Username)
OUTPUT inserted.ID
VALUES('my new name'); 
```

但是，您将无法真正使用 来检索它`ExecuteNonQuery`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-12T23:39:09.140

您可以将 id 作为存储过程的输出参数返回，例如`@userId int output`

然后，在插入之后，`SET @userId = scope_identity()`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-12T23:40:03.193

> *   即使它只是一个查询 - 感觉很蹩脚......

这实际上也是错误的，因为您可以有多个重叠的 iserts。

这是我一直觉得很有趣的一件事——人们不阅读文档。

```
SELECT SCOPE_IDENTITY() 
```

返回在特定范围内生成的最后一个标识值，并且在语法上是正确的。它也有适当的记录。

> 有没有办法在不使用另一个查询的情况下返回最后插入的 ID？

是的。询问 saame SQL 批处理中的编号。

```
INSERT (blablab9a); SELECT SCOPE_IDENTITY (); 
```

作为一个字符串。执行标量。

一个批次中可以有多个 SQL 语句。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-01-11T01:10:58.053

如果您想从 C# 代码执行查询并想要获取最后插入的 id，那么您必须找到以下代码。

```
SqlConnection connection = new SqlConnection(System.Configuration.ConfigurationManager.ConnectionStrings["ConnectionString"].ConnectionString);
        connection.Open();
        string sql = "Insert into [Order] (customer_id) values (" + Session["Customer_id"] + "); SELECT SCOPE_IDENTITY()";
        SqlCommand cmd = new SqlCommand();
        cmd.Connection = connection;
        cmd.CommandText = sql;
        cmd.CommandType = CommandType.Text;
        var order_id =  cmd.ExecuteScalar();

        connection.Close();
        Console.Write(order_id); 
```

# python - 使用 Xpath (HtmlXPathSelector) 获取父子文本

> ID：14299100
> 
> 赞同：3
> 
> 时间：2013-01-12T23:35:31.400
> 
> 标签：python, html, xpath, scrapy

我正在抓取一个网站，我需要从此 HTML 文档中获取数值：

```
<td>
<span style=" color: red; font-weight: bold;"> 1.950</span>
</td>
<td> 3.400</td> 
```

我需要同时提取 1.950 和 3.400，但是当一个值仅在 a 中，而另一个值也有跨度时，我不知道该怎么做。有没有一种通用的方法来获取路径的父级和子级？我正在使用`scrapy`带有`HtmlXPathSelector`. 我可以将路径`/td/text()`用于一个，也`/td/span/text()`可以用于另一个，但我需要在一个查询中完成。如何做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-12T23:46:43.007

您可以尝试使用 :`/td//text()`选择作为 a 的后代的每个文本节点`td`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-12T23:50:15.003

我认为你有两种方法可以解决这个问题。

使用 Xpath

> 跟随兄弟::node()

另一个是迭代所有 tds（但这可能很讨厌）

我会给你一个 Xpath 的例子

```
span_text = hxs.select("/td/span/text()")
next = span_text.select('following-sibling::node()') #you should get 3.400 (or with this idea :P) 
```

如果你有这个 xml：

```
<?xml version="1.0" encoding="UTF-8"?>

<root>
  <td> 
    <span style=" color: red; font-weight: bold;">1.950</span> 
  </td>
  <td>3.400</td>
</root> 
```

然后你执行这个 xpath 表达式：

```
//td/following-sibling::node() 
```

你会得到**3.400**

[这是测试 xpath 的好地方](http://www.xmlme.com/XpathTool.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-14T08:33:32.103

你可以试试这个

`.select("string()").extract()`

它将提取所有没有任何 html 标签的文本

# postgresql - web2py ：选择子句以获取前 x 条记录

> ID：14299103
> 
> 赞同：0
> 
> 时间：2013-01-12T23:35:49.117
> 
> 标签：postgresql, web2py

使用 PostGres，有没有办法只获取查询中的前 10 条记录，或者在这种情况下我应该编写原始 SQL 吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-13T00:02:34.080

你可以使用“limitby”参数，检查这个，它需要参数开始和结束。在以下示例中，它开始从索引获取索引 2（不包括结尾），因此它获取查询中的第一行和第二行

```
enter code here

>>> for row in db().select(db.person.ALL, limitby=(0, 2)):
    print row.name
Alex
Bob 
```

检查这个[http://web2py.com/books/default/chapter/29/06#select](http://web2py.com/books/default/chapter/29/06#select)

# python - 删除空列表有什么特别之处？

> ID：14299104
> 
> 赞同：10
> 
> 时间：2013-01-12T23:35:52.100
> 
> 标签：python

考虑以下...

```
In [1]: del []

In [2]: del {}
  File "<ipython-input-2-24ce3265f213>", line 1
SyntaxError: can't delete literal

In [3]: del ""
  File "<ipython-input-3-95fcb133aa75>", line 1
SyntaxError: can't delete literal

In [4]: del ["A"]
  File "<ipython-input-5-d41e712d0c77>", line 1
SyntaxError: can't delete literal 
```

有什么特别之处`[]`？我希望这也会提高`SyntaxError`。为什么不呢？我在 Python2 和 Python3 中观察到了这种行为。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-12T23:45:55.310

[`del`语句语法](http://docs.python.org/3/reference/simple_stmts.html#the-del-statement)允许使用,[`target_list`](http://docs.python.org/3/reference/simple_stmts.html#grammar-token-target_list)并且包括变量名的列表或元组。

它旨在一次删除多个名称：

```
del [a, b, c] 
```

这相当于：

```
del (a, b, c) 
```

或者

```
del a, b, c 
```

但是 python 并不强制列表实际上包含*任何*元素。

表达方式

```
del () 
```

另一方面*是*语法错误；`()`在这种情况下被视为文字空元组。

# html - 在图像范围下居中文本

> ID：14299106
> 
> 赞同：0
> 
> 时间：2013-01-12T23:35:55.110
> 
> 标签：html, css

我在我的开发站点上显示的每个图像下方都难以将图像文本标题居中：http: [//tinyurl.com/bh8uape](http://tinyurl.com/bh8uape)

我想让每个标题在相应图像下方居中。我怎样才能做到这一点？

**HTML**

```
<!--/ Photo Thumbs Row 1-->

<div id="thumbs">

<a id="single_image" href="/bp/images/roscoes-run.jpg"><img src="/bp/images/roscoes-run(thumb).jpg" alt=""/></a>
<a id="single_image" href="/bp/images/roscoes-run-2.jpg"><img src="/bp/images/roscoes-run-2(thumb).jpg" alt=""/></a>
<a id="single_image" href="/bp/images/chicken-waffles.jpg"><img src="/bp/images/chicken-waffles(thumb).jpg" alt=""/></a>

<span class="stretch"></span>

</div>

<!--/ Description-->

<div id="desc-wrapper">
<div class="description">Roscoe's Run 2012</div>
<div class="description">Roscoe's Run 2012</div>
<div class="description">Roscoe's Run 2012</div>
</div>

<!--/ Photo Thumbs Row 2-->

<div id="thumbs">

<a id="single_image" href="/bp/images/mens-retreat-2012.jpg"><img src="/bp/images/mens-retreat-2012(thumb).jpg" alt=""/></a>
<a id="single_image" href="/bp/images/winter-retreat-2012.jpg"><img src="/bp/images/winter-retreat-2012(thumb).jpg" alt=""/></a>
<a id="single_image" href="/bp/images/new-years-eve-2012.jpg"><img src="/bp/images/new-years-eve-2012(thumb).jpg" alt=""/></a>

<span class="stretch"></span>

</div>

<!--/ Description-->

<div id="desc-wrapper">
<div class="description">Men's Retreat 2012</div>
<div class="description">Winter Retreat 2012</div>
<div class="description">New Year's Eve 2012</div>
</div> 
```

**CSS**

```
/*Fancybox Gallery Divs*/

#thumbs {   
    width: 960px;
    margin-top:20px;
    margin-bottom:20px;
    margin-left: auto; 
    margin-right: auto;
    text-align: justify;
    -ms-text-justify: distribute-all-lines;
    text-justify: distribute-all-lines;
}

#thumbs a {
    vertical-align: top;
    display: inline-block;
    *display: inline;
    zoom: 1;
}

.stretch {
    width: 100%;
    display: inline-block;
    font-size: 0;
    line-height: 0
}

/*Descriptions*/

#desc-wrapper {
    width: 960px;
    padding-top: 10px;
    margin-left: auto; 
    margin-right: auto;
    text-align: justify;
    -ms-text-justify: distribute-all-lines;
    text-justify: distribute-all-lines;
}

.description {
    width: 360px;
    height: 25px;

} 
```

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T23:48:05.187

您需要使用 CSS 属性`float`并`text-align`获得所需的结果：

```
.description {
  float:left;
  width: 320px; // Increase/decrease width for margin between images
  height: 25px;
  text-align:center;
} 
```

在描述之后，添加另一个`div`将清除任何浮动内容的内容：

```
<div class="description">Men's Retreat 2012</div>
<div class="description">Winter Retreat 2012</div>
<div class="description">New Year's Eve 2012</div>
<div class="clear"></div> 
```

使用以下 CSS：

```
.clear {
  clear:both;
} 
```

**为边距/填充选择第一个/最后一个元素：**

如果您在其中一个`div`标签的额外宽度上遇到问题，您可以在第一个或最后一个标签中使用伪类`CSS`或添加另一个类`div`。这里有几个例子：

```
<div class="description smaller-width">Men's Retreat 2012</div>
<div class="description">Winter Retreat 2012</div>
<div class="description">New Year's Eve 2012</div>
<div class="clear"></div>

.smaller-width {
  width:300px;
} 
```

或者

```
.description:first-child {
  width:300px;
} 
```

我们正在使用 IE，`:first-child`因为它在 IE 中的支持比`:last-child`. 请注意，`:first-child`要在 IE8 及更早版本中工作，`<!DOCTYPE>`必须声明 a。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T23:50:20.647

你需要做两件事。

1.  浮动您的描述元素，以便它们使用`float: left;`
2.  使用您的描述元素中的文本居中`text-align: center;`

像这样的东西：

```
.description {
    width: 360px;
    height: 25px;
    float: left;
    text-align: center;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T00:25:44.033

您应该在 div 中添加每个图像及其下方的文本。就像是：

```
<div>
img
p
</div> 
```

这样你就可以制作 div p: text-align center;

# html - 自动将一个 div 调整为另一个 div

> ID：14299107
> 
> 赞同：0
> 
> 时间：2013-01-12T23:36:02.400
> 
> 标签：html, css

我有 2 个并排的 div。

左 div 有不同的高度，如何让右 div 自动调整为左 div 的大小？如果右 div 的内容大于左 div，则应该添加一个滚动条。

**的HTML**

```
<div class="wrapper">
    <div class="left"><!-- PHP Generated Content --></div>
    <div class="right"><!-- PHP Generated Content --></div>
</div> 
```

**CSS**

```
.left{
    width: 70%;
    float: left;
}
.right{
    width: 29%;
    float: right;
    border: solid 1px #000000;
    height: 100%;
    min-height: 200px;
    overflow: auto;
}
.wrapper{
    height: auto;
    float: left;
    border: solid 1px red;
} 
```

[http://jsfiddle.net/userdude/MJrS9/](http://jsfiddle.net/userdude/MJrS9/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T02:03:06.687

如果不为父“.wrapper”提供预定义的高度，就无法（我可以看到）检测针对“.left”设置的高度并将其应用于“.right”。即使将右 div 的高度设置为“继承”，也只会获取无论如何动态调整的高度。也许有人可以建议使用 javascript 的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T23:42:36.360

简单的等高列：

```
.left{
    width: 70%;
    display: table-cell;
}
.right{
    width: 29%;
    border: solid 1px #000000;
    display: table-cell;
}
.wrapper{
    display: table;
    border: solid 1px red;
    width: 100%;
} 
```

[http://jsfiddle.net/g5mvs/](http://jsfiddle.net/g5mvs/)

# java - 在 Android 中使用 Libgdx 从加速度计数据规范化 fft 的输出

> ID：14299114
> 
> 赞同：0
> 
> 时间：2013-01-12T23:37:22.117
> 
> 标签：java, android, normalization, fft, libgdx

我将 Libgdx 库中的 FFT 函数用于 Android 中的一个项目，在该项目中我处理加速度计信号以创建信号频谱。

我需要标准化加速度计数据的输出，我读到没有“正确”的方法可以做到这一点，但这是传统的。有人在 FFT 中使用除以 1/N，另一种是除以 1/sqrt(N)。

我不明白这对于实现图书馆的人来说是否是常规的，这意味着每个图书馆都有他的规范化因子，或者对于用户来说是常规的，而不是我可以决定的审美表现。

如果它依赖于库，LIBGDX 库中 FFT 的归一化因子是什么？

Edit1：我已经在文档中进行了搜索，但一无所获。这是它： http: [//libgdx-android.com/docs/api/com/badlogic/gdx/audio/analysis/FFT.html](http://libgdx-android.com/docs/api/com/badlogic/gdx/audio/analysis/FFT.html)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-12T23:45:40.180

我正要说“只是检查文档”，但事实证明这很糟糕，并且没有说任何一种方式！

不过，您可以凭经验确定比例因子。只需在全为数据集上运行 FFT。输出中将有一个非零 bin。此 bin 有三个可能的值：

*   1.0：比例为 1/N
*   sqrt(N)：比例为 1/sqrt(N)
*   N：规模为1

您可以对逆 FFT 执行相同的技巧，尽管它是多余的。正向和反向比例因子必须乘以 1/N。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-13T00:30:24.800

根据您是否需要频谱或功率谱密度，有一个特定的归一化。Oli 提供了一个很好的测试来确定库执行的 1/N、1/sqrt(N) 或无缩放。

这是一个文档，它详细解释了所有内容以及窗口功能的全面比较。

[http://edoc.mpg.de/395068](http://edoc.mpg.de/395068)

# asp.net-mvc - 用于在企业和公园等上进行文本搜索的 Google API、地图或地点

> ID：14299119
> 
> 赞同：0
> 
> 时间：2013-01-12T23:38:17.420
> 
> 标签：asp.net-mvc, google-maps, google-places-api

我想要文本搜索功能，问题是我想要一般的地方也可以搜索，（IE不仅仅是商业），我想要海滩，公园甚至城市......

是否可以仅使用地点来执行此操作，还是我需要同时使用地点和地图？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T01:04:24.620

Google Places 数据中有[公园](https://developers.google.com/places/documentation/supported_types)

[示例](http://www.geocodezip.com/v3_GoogleEx_places-searchboxB.html)（搜索“公园”）

看起来并不是所有人都在那里。

# javascript - 无法根据 SELECT 选项显示一个元素并隐藏其他元素

> ID：14299131
> 
> 赞同：0
> 
> 时间：2013-01-12T23:39:37.723
> 
> 标签：javascript, jquery

我正在使用 jQuery，我想要做的是在选择下拉 SELECT 选项时触发一个 onChange 事件，该选项将根据所选选项的值显示一个元素。困难的部分是我还希望在选择新选项时显示的任何元素都消失，以便所选元素是唯一显示的元素。我非常接近，但不明白为什么我正在尝试的东西不起作用。

到目前为止，我所拥有的是：

```
//Dropdown
<select id="menu">
<option val="show1">Show First</option>
<option val="show2">Show Second</option>
...
<option val="show255">Show 255th</option>
</select>

//Invisible areas
<myArea id="show1" style="display:none">
Stuff1
</myArea>

<myArea id="show2" style="display:none">
Stuff2
</myArea>

...

<myArea id="show255" style="display:none">
Stuff255
</myArea>

//JavaScript
<script>
$('#menu').change(function () {
    optName = $('#menu').val();
    $("myArea").not("#" + optName).hide();
    $("myArea").("#" + optName).show();
});
</script> 
```

到目前为止，有效的是，如果我不将 添加`style="display:none"`到`<myArea>`元素中，我可以隐藏除所选元素之外的所有元素。但是，当我再次更改选项时，已显示的元素会消失，但所选元素不会显示。如果我`style="display:none"`在`myArea`元素上使用它，则在选择任何选项时都不会显示任何内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T23:42:32.543

```
$('#menu').change(function () {
    optName = $('#menu').val();
    $("myArea#" + optName).show().siblings().hide();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T23:41:11.573

```
$("myArea").("#" + optName).show(); 
```

什么也没做。

```
$('[id='+optName+']').show(); 
```

但是可能对你有用。

# batch-file - 从批处理文件启动 Java 程序并退出而不等待

> ID：14299136
> 
> 赞同：2
> 
> 时间：2013-01-12T23:40:16.563
> 
> 标签：batch-file

我有一个小的 Windows 批处理脚本，它是在游戏应用程序（用户体验在这里很重要）中执行的，它被调用来启动 Java 程序等。使用命令`javaw`我向游戏用户隐藏控制台输出以改善体验，但是，控制台窗口在批处理文件执行时保持打开状态，并且在 Java 代码完成执行之前不会关闭。

我尝试的第一个解决方案是使用该`start`命令，但我无法将任何参数传递给 java 程序，因此它失败了。

`start javaw -jar jar-file-here.jar args...`

我应该如何编写一个批处理文件，该文件将使用正确的变量启动 Java 程序，并在不等待 Java 关闭的情况下关闭？

编辑：我的参数包含引号（ " ），因此我无法在不混淆命令的情况下将它们全部包含在引号中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T02:18:17.160

第一个参数接受一个窗口标题。这是进行了调整的命令：

`start "Window Title Here" javaw -jar jar-file-here.jar args...`

# ios - 使用 CGMutablePathRef 的缺点？

> ID：14299140
> 
> 赞同：1
> 
> 时间：2013-01-12T23:41:08.263
> 
> 标签：ios, uikit

我有这个代码来绘制圆角矩形：

```
void ContextAddRoundedRect(CGContextRef ctx, CGRect rect, CGFloat radius) {
    CGFloat minX = CGRectGetMinX(rect);
    CGFloat maxX = CGRectGetMaxX(rect);
    CGFloat minY = CGRectGetMinY(rect);
    CGFloat maxY = CGRectGetMaxY(rect);

    CGContextMoveToPoint(ctx, minX + radius, minY);
    CGContextAddArcToPoint(ctx, maxX, minY, maxX, minY + radius, radius);
    CGContextAddArcToPoint(ctx, maxX, maxY, maxX - radius, maxY, radius);
    CGContextAddArcToPoint(ctx, minX, maxY, minX, maxY - radius, radius);
    CGContextAddArcToPoint(ctx, minX, minY, minX + radius, minY, radius);
} 
```

我将把它转换为`CGMutablePathRef`用于绘图，因为这样我就可以使用`-[UIBezierPath containsPoint:]`（`+bezierPathWithCGPath:`首先使用，如[评论和答案中所述](https://stackoverflow.com/a/14298757/8047)。）

**`CGMutablePathRef`与直接在 CGContext 上绘图相比，使用是否有任何严重/已知的缺点？**我的猜测是它不是首发，但也许我缺少一些东西。

（我知道我必须释放它）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T02:16:40.993

只需使用[`+[UIBezierPath bezierPathWithRoundedRect:cornerRadius:]`](http://developer.apple.com/library/ios/documentation/uikit/reference/UIBezierPath_class/Reference/Reference.html#//apple_ref/occ/clm/UIBezierPath/bezierPathWithRoundedRect%3acornerRadius%3a)并为自己省去所有麻烦。如果你真的需要`CGPathRef`它，那么就得到这个[`CGPath`](http://developer.apple.com/library/ios/documentation/uikit/reference/UIBezierPath_class/Reference/Reference.html#//apple_ref/occ/instp/UIBezierPath/CGPath)属性。

除非您每秒执行数千次，否则它不太可能明显变慢或占用大量内存。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T00:06:37.107

对我来说似乎是一个不错的方法......也许你甚至可以以某种方式缓存它？*我的意思是不要每次都重做路径，但只有在矩形或半径改变时

*当然，可变路径将具有更高的内存占用，但在这种情况下应该可以忽略*

* * *

例如：

```
UIBezierPath *pathWithRoundedRect(NSRect rect, CGFloat radius) {
    CGMutablePathRef path;
    ...

    id p = [UIBezierPath bezierPathWithCGPath:path];
    CGPathRelease(path);
    return p; 
```

}

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-28T09:42:09.633

不，`CGContext`有一个内部路径，`CGContext`要绘制的函数只是在其内部调用等效函数`CGMutablePath`。没有理由不自己制作 CGMutablePath，路径功能`CGContext`很方便。

如果您不打算使用 绘制路径，`CGContext`那么您最好制作一个`CGMutablePath`.

# java - 如何使用 Spring MVC 的 java应用程序上下文中的标记？

> ID：14299149
> 
> 赞同：15
> 
> 时间：2013-01-12T23:42:42.693
> 
> 标签：java, spring-mvc

我已经“暂时”创建了一个简单而基本的 Spring Web 应用程序。我习惯于将部署描述符作为简单的 web.xml 文件，然后将应用程序上下文作为 xml 文件。

不过，现在我想尝试只使用 java 文件来创建我的整个 Spring Web 应用程序。因此，我创建了 WebApplicationInitializer 而不是正常的部署描述符，以及使用 @Configuration 注释的应用程序上下文。

**部署描述符**

```
package dk.chakula.config;

import javax.servlet.ServletContext;
import javax.servlet.ServletException;
import javax.servlet.ServletRegistration.Dynamic;
import org.springframework.web.WebApplicationInitializer;
import org.springframework.web.context.WebApplicationContext;
import org.springframework.web.context.support.AnnotationConfigWebApplicationContext;
import org.springframework.web.servlet.DispatcherServlet;
/**
 *
 * @author martin
 * @since 12-1-2012
 * @version 1.0
 */
public class Initializer implements WebApplicationInitializer {

    @Override
    public void onStartup(ServletContext servletContext)
            throws ServletException {
        registerDispatcherServlet(servletContext);
    }

    private void registerDispatcherServlet(final ServletContext servletContext) {
        WebApplicationContext dispatcherContext = createContext(ChakulaWebConfigurationContext.class);
        DispatcherServlet dispatcherServlet = new DispatcherServlet(dispatcherContext);
        Dynamic dispatcher = servletContext.addServlet("dispatcher", dispatcherServlet);
        dispatcher.setLoadOnStartup(1);
        dispatcher.addMapping("/");
    }

    private WebApplicationContext createContext(final Class<?>... annotatedClasses) {
        AnnotationConfigWebApplicationContext context = new AnnotationConfigWebApplicationContext();
        context.register(annotatedClasses);
        return context;
    }

} //End of class Initializer 
```

**应用程序上下文**

```
package dk.chakula.config;

import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.ComponentScan;
import org.springframework.context.annotation.Configuration;
import org.springframework.web.servlet.config.annotation.EnableWebMvc;
import org.springframework.web.servlet.view.UrlBasedViewResolver;
import org.springframework.web.servlet.view.tiles2.TilesConfigurer;
import org.springframework.web.servlet.view.tiles2.TilesView;

/**
 *
 * @author martin
 * @since 12-01-2013
 * @version 1.0
 */
@Configuration
@EnableWebMvc
@ComponentScan("dk.chakula.web")
public class ChakulaWebConfigurationContext {

    @Bean
    public TilesConfigurer setupTilesConfigurer() {
        TilesConfigurer configurer = new TilesConfigurer();
        String[] definitions = {"/layout/layout.xml"};
        configurer.setDefinitions(definitions);
        return configurer;
    }

    @Bean
    public UrlBasedViewResolver setupTilesViewResolver() {
        UrlBasedViewResolver viewResolver = new UrlBasedViewResolver();
        viewResolver.setViewClass(TilesView.class);
        return viewResolver;
    }

} //End of class ChakulaWebConfigurationContext 
```

我的问题是我似乎无法找到一种方法“隔离”我到包含图像、css javascript 等的资源文件夹的映射。当我的应用程序上下文在 java 中时。

对于普通的 XML 应用程序上下文，我使用此标记来隔离到 /resources/ 的映射

```
<mvc:resources mapping="/resources/**" location="/resources/" /> 
```

我该怎么做，这样我的 Web 应用程序才能使用我的图像、css 等。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-06-09T19:40:23.940

为了能够在 Spring MVC 应用程序中提供静态资源，您需要两个 XML 标记：`<mvc:resources/>`和`<mvc:default-servlet-handler/>`. 在基于 Java 的 Spring 配置中相同的是：

```
@Configuration
@EnableWebMvc
public class WebMvcConfig extends WebMvcConfigurerAdapter {

    // equivalents for <mvc:resources/> tags
    @Override
    public void addResourceHandlers(ResourceHandlerRegistry registry) {
        registry.addResourceHandler("/css/**").addResourceLocations("/css/").setCachePeriod(31556926);
        registry.addResourceHandler("/img/**").addResourceLocations("/img/").setCachePeriod(31556926);
        registry.addResourceHandler("/js/**").addResourceLocations("/js/").setCachePeriod(31556926);
    }

    // equivalent for <mvc:default-servlet-handler/> tag
    @Override
    public void configureDefaultServletHandling(DefaultServletHandlerConfigurer configurer) {
        configurer.enable();
    }

    // ... other stuff ...
} 
```

请注意，由于`@EnableWebMvc`使用了注释，因此无需直接扩展`WebMvcConfigurationSupport`，您只需扩展即可`WebMvcConfigurerAdapter`。有关详细信息，请参阅[@EnableWebMvc](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/web/servlet/config/annotation/EnableWebMvc.html)的 JavaDoc。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-13T08:03:05.293

在互联网上使用数小时搜索仅使用 java 文件阅读有关 Spring MVC 3 的文章后，我发现了一些文章，这些文章使用了从 WebMvcConfigurationSupport 类扩展的方法，然后覆盖了 2 个方法 - addResourceHandler(ResourceHandlerRegistry) 和 ResourceHandlerMapping()。

我的新应用程序上下文现在看起来像这样。

```
package dk.chakula.config;

import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.ComponentScan;
import org.springframework.context.annotation.Configuration;
import org.springframework.web.servlet.HandlerMapping;
import org.springframework.web.servlet.config.annotation.EnableWebMvc;
import org.springframework.web.servlet.config.annotation.ResourceHandlerRegistry;
import org.springframework.web.servlet.config.annotation.WebMvcConfigurationSupport;
import org.springframework.web.servlet.handler.AbstractHandlerMapping;
import org.springframework.web.servlet.view.UrlBasedViewResolver;
import org.springframework.web.servlet.view.tiles2.TilesConfigurer;
import org.springframework.web.servlet.view.tiles2.TilesView;

/**
 *
 * @author martin
 * @since 12-01-2013
 * @version 1.0
 */
@Configuration
@EnableWebMvc
@ComponentScan("dk.chakula.web")
public class ChakulaWebConfigurationContext extends WebMvcConfigurationSupport {

    @Override
    public void addResourceHandlers(ResourceHandlerRegistry registry) {
        registry.addResourceHandler("/resources/**").addResourceLocations("/resources/");
    }

    @Override
    @Bean
    public HandlerMapping resourceHandlerMapping() {
        AbstractHandlerMapping handlerMapping = (AbstractHandlerMapping) super.resourceHandlerMapping();
        handlerMapping.setOrder(-1);
        return handlerMapping;
    }

    @Bean
    public TilesConfigurer setupTilesConfigurer() {
        TilesConfigurer configurer = new TilesConfigurer();
        String[] definitions = {"/layout/layout.xml"};
        configurer.setDefinitions(definitions);
        return configurer;
    }

    @Bean
    public UrlBasedViewResolver setupTilesViewResolver() {
        UrlBasedViewResolver viewResolver = new UrlBasedViewResolver();
        viewResolver.setViewClass(TilesView.class);
        return viewResolver;
    }

} //End of class ChakulaWebConfigurationContext 
```

据我了解，我们必须重写 addResourceHandler，将资源的位置和映射添加到注册表。此后，我们需要一个返回 HandlerMapping 对象的 bean。这个 HandlerMapping 的顺序应该设置为 -1，因为我可以从 spring 文档中读到，然后 -1 表示

> HandlerMapping 以 Integer.MAX_VALUE-1 排序以服务静态资源请求。

我的应用程序现在可以将 css 文件和图像加载到他们的视图中，我想用答案来启发其他人，以便将来的人们可以从中受益。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-06-22T06:01:29.847

试试这个：

```
@Override
    public void addResourceHandlers(final ResourceHandlerRegistry registry) {
        registry.addResourceHandler("/resources/**").addResourceLocations("/resources/");
    } 
```

# iphone - 为什么标签不接收字符串

> ID：14299151
> 
> 赞同：2
> 
> 时间：2013-01-12T23:43:11.017
> 
> 标签：iphone, ios, objective-c, xcode, cocoa-touch

我有两个视图和两个类。在第一个视图中，由第一个类控制，我有一个文本字段和一个按钮。在第二类控制的第二个视图中，我有两个标签。我试图让一个标签接收我放在文本字段上的值，另一个标签将该值除以 100。但在这两种情况下我都得到 0.00，我不知道为什么！

头等舱.h

```
#import <UIKit/UIKit.h>

@interface NotasViewController : UIViewController{

}

-(IBAction)calcular:(id)sender;
-(IBAction)clicarFora:(id)sender;
-(IBAction)recuarTeclado:(id)sender;
@property (strong, nonatomic) IBOutlet UITextField *inserirTF;

@end 
```

第一类.m

```
#import "NotasViewController.h"
#import "resultadoViewController.h"

@interface NotasViewController ()

@end

@implementation NotasViewController
@synthesize inserirTF;

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

-(IBAction)calcular:(id)sender{

    float valor = [inserirTF.text floatValue];
    UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle:nil];
    resultadoViewController *second = [storyboard instantiateViewControllerWithIdentifier:@"resultado"];
    second.resultadoFloatValor = valor;
    NSLog(@"%.2f", second.resultadoFloatValor);
}

-(IBAction)recuarTeclado:(id)sender{

    [sender resignFirstResponder];

}

-(IBAction)clicarFora:(id)sender{

    [inserirTF resignFirstResponder];

}

@end 
```

二等舱.h

```
#import <UIKit/UIKit.h>

@interface resultadoViewController : UIViewController{

    float resultadoFloatValor;

}

@property float resultadoFloatValor;
@property (strong, nonatomic) IBOutlet UILabel *resultadoLabelValor;
@property (strong, nonatomic) IBOutlet UILabel *resultadoLabelQtd100;

@end 
```

二等舱.m

```
#import "resultadoViewController.h"

@interface resultadoViewController ()

@end

@implementation resultadoViewController
@synthesize resultadoFloatValor, resultadoLabelValor, resultadoLabelQtd100;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view.

    NSString *resultadoStringValor = [[NSString alloc] initWithFormat:@"%.2f", resultadoFloatValor];
    NSLog(@"%.2f", resultadoFloatValor);
    NSLog(@"%@", resultadoStringValor);
    resultadoLabelValor.text = resultadoStringValor;

    int resultadoIntResto100 = resultadoFloatValor/100;

    if (resultadoIntResto100 > 0) {

        NSString *resultadoStringQtd100 = [[NSString alloc] initWithFormat:@"%i", resultadoIntResto100];
        resultadoLabelQtd100.text = resultadoStringQtd100;

    }

}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

@end 
```

你会在我的代码中看到 3 个 NSLog。为了测试，我将 54 放在我的文本字段上。输出是这样的：

```
2013-01-12 21:15:27.020 Divisorreal[21843:c07] 54.00
2013-01-12 21:15:27.023 Divisorreal[21843:c07] 0.00
2013-01-12 21:15:27.023 Divisorreal[21843:c07] 0.00 
```

PS：我所有的 Outlets 都正确连接到 UILabel。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T23:50:55.687

确保将 UITextView 的委托设置为将这些操作发送到您的控制器。

尝试在其中设置断点

```
-(IBAction)calcular:(id)sender 
```

确保其实际被调用的方法

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T23:52:44.920

最佳的揣测：

看起来你是在被调用`resultadoFloatValor`之后设置`viewDidLoad`的。

在那里实施`prepareForSegue:`并设置值。

# ruby-on-rails - 在 Rails 3 中处理来自更新的 json 响应

> ID：14299152
> 
> 赞同：0
> 
> 时间：2013-01-12T23:43:28.293
> 
> 标签：ruby-on-rails, ruby-on-rails-3, json, jquery

我只是想了解这里的基本反应。我有一个未经编辑的控制器方法

```
 def update
    @ledgeritem = Ledgeritem.find(params[:id])

    respond_to do |format|
      if @ledgeritem.update_attributes(params[:ledgeritem])
        format.html { redirect_to @ledgeritem, :notice => 'Ledgeritem was successfully updated.' }
        format.json { head :no_content }
      else
        format.html { render :action => "edit" }
        format.json { render :json => @ledgeritem.errors, :status => :unprocessable_entity }
      end
    end
  end 
```

还有我的ajax

```
$.ajax({
    type: "PUT",
    url: "/ledgeritems/" + id + ".json",
    data: $(this).serialize(),
    dataType: "json",
    success: function (result) {
        alert(result);
    }
}); 
```

我的警报从未显示，但该项目确实更新。读取和处理 json 响应的正确方法是什么？我知道这是一个基本问题，但我找不到任何关于此的示例或信息。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-12T23:47:59.523

在您的控制器中，更改

```
format.json { head :no_content } 
```

到

```
format.json { render json: @ledgeritem } 
```

`head :no_content`只会返回 http 代码 204，这表示页面上没有内容。你在这里不需要这个。

# php - 私有变量在读取时返回空白，尽管它是在函数中设置的

> ID：14299155
> 
> 赞同：0
> 
> 时间：2013-01-12T23:44:07.027
> 
> 标签：php

我有一个创建表单的类和一个从视图文件中获取表单名称表单操作和表单类型的函数。它工作正常并且符合预期，但是当我在另一个函数中调用这些变量以创建实际表单并将值添加到它们时，它们返回为空白。

```
class Form {
     private $formname;
     private $formaction;
     private $formtype;

function Form($form_name, $actionfile, $formtype) {
            $this->formname = $form_name;
            $this->formaction = $actionfile;
            $this->formtype = $formtype;
        } 
```

这是函数值存储在私有变量中的地方。

当我尝试在另一个函数中调用它们时，它们返回为空白。

```
function formstart() {
$enc = 'enctype="multipart/form-data"';
$returnstring = '<form name="' . $this->formname . '" id="' . $this->formname . '" ' . $enc . ' method="' . $this->formtype . '"  action="' . $this->formaction . '">';
} 
```

我错过了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T23:47:33.347

您的类必须命名空间才能使用该构造函数。相反，使用该方法`__construct()`

```
class Form {
     private $formname;
     private $formaction;
     private $formtype;

    function __construct($form_name, $actionfile, $formtype) {
        $this->formname = $form_name;
        $this->formaction = $actionfile;
        $this->formtype = $formtype;
    }
} 
```

**[文档](http://php.net/manual/en/language.oop5.decon.php)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T23:48:55.907

您正在编写 PHP 4.x OOP。

尝试这个：

```
class Form {

  private $formname;
  private $formaction;
  private $formtype;

  public function __construct($form_name, $action_file, $form_type) {
      $this->formname = $form_name;
      $this->formaction = $action_file;
      $this->formtype = $form_type;
  }

  public function formstart() {
      $enc = 'enctype="multipart/form-data"';
      return '<form name="' . $this->formname . '" id="' . $this->formname . '" ' . $enc . ' method="' . $this->formtype . '"  action="' . $this->formaction . '">';
  }
}

$f = new Form('name', 'action', 'type');
echo $f->formstart(); 
```

# winbugs - winbugs中的概率模型

> ID：14299157
> 
> 赞同：0
> 
> 时间：2013-01-12T23:44:30.360
> 
> 标签：winbugs

我使用 logit 模型进行了分析，现在想使用 probit 模型进行分析。谁能把这个winbugs logit模型变成一个winbugs probit模型？

```
model
 {
 for (i in 1:n) {
 # Linear regression on logit
 logit(p[i]) <- alpha + b.sex*sex[i] + b.age*age[i]
 # Likelihood function for each data point
 frac[i] ~ dbern(p[i])
 }
 alpha ~ dnorm(0.0,1.0E-4) # Prior for intercept
 b.sex ~ dnorm(0.0,1.0E-4) # Prior for slope of sex
 b.age ~ dnorm(0.0,1.0E-4) # Prior for slope of age
 }
 Data
 list(sex=c(1, 1, 1, 0, 1, 1, 0, 0, 0, 0, 1, 1, 1, 1, 1, 0, 1, 0, 0, 0, 1, 1, 1, 0, 0,    1,
  1, 0, 1, 1, 1, 0, 0, 0, 1, 1, 0, 0, 1, 1, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1, 0, 1,     1, 1, 0,
  0, 1, 1, 1, 1, 0, 0, 0, 1, 1, 1, 0, 0, 1, 1, 1, 0, 0, 0, 1, 1, 0, 0, 0, 0, 1, 0, 0,   1, 1, 1,
  0, 1, 0, 1, 1, 1, 0, 1, 1, 1, 1, 1),
  age= c(69, 57, 61, 60, 69, 74, 63, 68, 64, 53, 60, 58, 79, 56, 53, 74, 56, 76, 72,
  56, 66, 52, 77, 70, 69, 76, 72, 53, 69, 59, 73, 77, 55, 77, 68, 62, 56, 68, 70, 60,
  65, 55, 64, 75, 60, 67, 61, 69, 75, 68, 72, 71, 54, 52, 54, 50, 75, 59, 65, 60, 60,
  57, 51, 51, 63, 57, 80, 52, 65, 72, 80, 73, 76, 79, 66, 51, 76, 75, 66, 75, 78, 70,
  67, 51, 70, 71, 71, 74, 74, 60, 58, 55, 61, 65, 52, 68, 75, 52, 53, 70),
  frac=c(1, 1, 1, 0, 1, 1, 0, 1, 1, 0, 1, 0, 1, 1, 0, 1, 0, 1, 1, 0, 1, 0, 1, 1, 1, 1,   1, 0,
  1, 0, 1, 1, 0, 1, 1, 1, 0, 1, 1, 0, 1, 0, 0, 1, 0, 1, 0, 1, 1, 1, 1, 1, 0, 0, 0, 0,    1, 1, 1,
  1, 1, 0, 0, 0, 1, 0, 1, 0, 0, 1, 1, 1, 1, 1, 0, 0, 1, 1, 0, 1, 1, 1, 0, 0, 1, 1, 1,   1, 1, 1,
  1, 0, 1, 1, 0, 0, 1, 0, 0, 1),
  n=100)
  Initial Values
  list(alpha=0, b.sex=1, b.age=1) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-14T11:25:57.447

WinBUGS 接受多种类型的链接函数（参见 WinBUGS[手册](http://www.mrc-bsu.cam.ac.uk/bugs/winbugs/manual14.pdf)中的第 15 页）。对于概率模型，将线性回归方程更改为：

```
probit(p[i]) <- alpha + b.sex*sex[i] + b.age*age[i] 
```

我建议您将年龄变量居中，否则您可能会遇到一些收敛问题，例如：

```
probit(p[i]) <- alpha + b.sex*sex[i] + b.age*(age[i] - mean(age[])) 
```

或者，对于概率模型（如果`probit`函数给您一些陷阱错误），您可以使用`phi`标准的普通 cdf 函数：

```
 p[i] <- phi(alpha + b.sex*sex[i] + b.age*(age[i] - mean(age[]))) 
```

# css - 如何将一个 div 容器内的 2 个 div 与 CSS 对齐（见图）

> ID：14299163
> 
> 赞同：1
> 
> 时间：2013-01-12T23:45:59.943
> 
> 标签：css, layout, css-float, alignment

我正在制作一个正好为 6 个 div 的小布局宽度，我尝试了多次将其与浮动对齐、clear:both 和更改高度/宽度对齐，但没有成功。我想要这样的图像：http: [//i.stack.imgur.com/j1jxX.png](http://i.stack.imgur.com/j1jxX.png)

HTML 源代码：

```
 <div id="description">
    <div class="itemDescription"><!--Item 1-->
        <div class="imageDescription"></div>
        <div class="textDescription">
            <div class="titleDescription">Encontre pessoas</div>
            <div class="detailDescription">Encontre facilmente pessoas com um buscador inteligente</div>
        </div>
    </div>
        <div class="itemDescription"><!--Item 2-->
        <div class="imageDescription"></div>
        <div class="textDescription">
            <div class="titleDescription">Encontre pessoas</div>
    <div class="detailDescription">Encontre facilmente pessoas com um buscador inteligente</div>
    </div>
</div> 
```

CSS 源代码：

```
#description {
width: 96%;
background: rgb(244, 244, 0);
}
.itemDescription {
padding: 8px;
border: solid 1px red;
}
.imageDescription {
float: left;
height: 72px;
width: 20%;
background-image: url(http://addons.opera.com/media/extensions/75/86675/1.0-rev2/icons/icon_64x64.png);
background-position: center center;
background-repeat: no-repeat;
border-right: solid 3px black;
}
.textDescription {
float: left;
width: 70%;
border: solid 3px blue;

}
.titleDescription {
border: solid 3px brown;

}
.detailDescription {
border: solid 3px black;
padding: 10px;
} 
```

这是我的 JSFiddle：http: [//jsfiddle.net/5xhQk/](http://jsfiddle.net/5xhQk/)

也谢谢大家

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T00:11:40.477

你也可以使用 table 来获得你想要的，但如果你真的想使用 div，你需要在每个 div 中使用 float。像这样的东西：http: [//jsfiddle.net/5xhQk/1/](http://jsfiddle.net/5xhQk/1/)

```
#description{
  float: left;
  width: 100%;
}

.itemDescription{
  float: left;
  width: 100%;
  height: 72px;
}

.imageDescription{
  background: blue;
  float: left;
  width: 20%;
  height: 100%;
  border: 1px solid black;
}

.textDescription{
  float: left;
  width: 70%;
  height: 100%;
  border: 1px solid black;
  border-left: 0;
}

.titleDescription{
  float: left;
  width: 100%;
  border-bottom: 1px solid black;
}

.detailDescription{
  float: left;
  width: 100%;
} 
```

哦，我不明白为什么在你的图片中它是宽度 20% 和 70%，你打算用剩下的 10% 做什么？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T00:21:49.127

让我看看我是否明白了，你`imageDescription`想`textDescription`在`itemDescription`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T00:37:56.983

尝试类似的东西：

HTML：

```
<div class="itemDescription">
    <div class="imageDescription ">
        Your image
    </div>
    <div class="cl">&nbsp;</div>
    <div class="textDescription">
        some header
        some paragraph
    </div>
</div> 
```

CSS：

```
.cl{
clear:both;
}
.itemDescription {

    width: something;

}

.imageDescription {

    float: left;
    width: something;
}

.textDescription {
    float: right;
    width: something;
} 
```

# dependency-injection - Autofac 容器独立性和关系类型

> ID：14299164
> 
> 赞同：2
> 
> 时间：2013-01-12T23:46:28.910
> 
> 标签：dependency-injection, ioc-container, autofac

我们目前使用 Autofac 作为我们选择的 IoC 容器。我们的可重用程序集中的所有应用程序代码都必须尽可能保持干净，因此我们不希望在我们的核心应用程序中直接依赖 Autofac。唯一允许使用 Autofac 的地方是在组合根 / 引导程序中，组件被注册和连接的地方。应用程序依靠依赖注入来创建所需的对象图。

由于我们保持核心应用程序容器不可知，这意味着我们不能`Owned`在我们的核心应用程序中使用 Autofac 关系类型，例如 。

我想创建一个工厂来返回实现`IDisposable`. 由于 Autofac 跟踪一次性对象，我相信我必须使用生命周期范围来创建定义的工作单元，一旦超出范围，组件将在其中被释放。

根据 Autofac 文档，这可以通过依赖 来实现`Func<Owned<T>>`，但是，如上所述，我不能依赖，`Owned`因为它是 Autofac 类型。在[此](http://code.google.com/p/autofac/wiki/RelationshipTypes)页面的底部，它说

> Autofac 中的自定义关系类型不会强迫您将应用程序更紧密地绑定到 Autofac。它们为您提供了一个容器配置的编程模型，该模型与您编写其他组件的方式一致（而不是必须了解许多特定的容器扩展点和 API，它们也可能会集中您的配置。）
> 
> 例如，您仍然可以在核心模型中创建自定义 ITaskFactory，但根据需要提供 AutofacTaskFactory 实现`Func<Owned<T>>`。

我认为我需要实现的正是这种实现`ITaskFactory`，但我找不到任何示例。

如果有人能提供这样的例子，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T17:00:23.507

可能最好的“现实世界”示例是 Autofac MVC 集成机制。虽然它不会`Func<Owned<T>>`在幕后使用，但它确实向您展示了如何实现非 Autofac 特定的机制来与 Autofac 进行幕后对话。

在 MVC 的情况下，`System.Web.Mvc.IDependencyResolver`是接口，`Autofac.Integration.Mvc.AutofacDependencyResolver`是实现。`System.Web.Mvc.DependencyResolver.Current`当 ASP.NET MVC 请求一个服务时，它会从`IDependencyResolver`. 在应用程序启动时，该单例被设置为 Autofac 实现。

同样的原则也适用于您的定制工厂。虽然`IDependencyResolver`不是特定于它返回的类型（它只是`GetService<T>()`），但您可以轻松地编写一个特定于类型的工厂接口。

# javascript - 使用 Greasemonkey 脚本将来自其他站点的 javascript 添加到页面

> ID：14299175
> 
> 赞同：3
> 
> 时间：2013-01-12T23:47:50.613
> 
> 标签：javascript, greasemonkey

是否可以使用 Greasemonkey 脚本将 JS 脚本从其他站点添加到页面，以便它们运行？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-13T00:06:00.597

您可以简单地创建一个脚本元素并将其添加到文档中

```
// ==UserScript==
// @name       My Fancy New Userscript
// @description  enter something useful
// @match      http://*/*
// ==/UserScript==

(function () {
    var scriptElement = document.createElement( "script" );
    scriptElement.type = "text/javascript";
    scriptElement.src = "url to your script";
    document.body.appendChild( scriptElement );
})(); 
```

如果您只是想让脚本运行，那么这就足够了。如果它是一个像 jQuery 这样的库，你想在你的用户脚本中使用它会变得很棘手。我知道有两种方法：

*   一种是使用greasemonkey的[require](http://wiki.greasespot.net/Metadata_Block#.40require)标签。
*   另一个需要像上面显示的那样创建相同的脚本元素，但是您需要等待它加载，因此`scriptElement.onload = function () {}`需要，然后您必须使用它`unsafeWindow`来访问库中的变量。

如果这是一个纯greasemonkey 脚本，我推荐第一种方法，因为只有你的脚本是从站点封装的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T23:51:56.140

是的，您可以这样做，例如：

```
let script = document.createElement('script');
script.src = "http://example.com/somescript.js";
document.body.appendChild(script);  // execute the script
document.body.removeChild(script); 
```

# php - 组合两个单独的数组

> ID：14299176
> 
> 赞同：0
> 
> 时间：2013-01-12T23:47:59.303
> 
> 标签：php, arrays, forms, foreach

我的 PHP 邮件表单中有两个单独的数组，它们是不同的复选框集：*webdetails*和*graphicsdetails*。只会填写一组（除非选择了以前的单选按钮，否则另一组将被隐藏。）我想知道如何在我的 PHP 中正确引用它们。

这是我以前发布的一个，但不是两个：

```
foreach($_POST['webdetails'] as $value1) {
    $webdetails_msg .= "$value1\n";
} 
```

如何在其中添加图形细节？复制代码段给我***警告：为 foreach() 提供的参数无效***

我不知道比这更多的PHP，因此将不胜感激。

--

这是我遇到错误的PHP：

```
<?php
/* Set mail headers */
$myemail  = "my.email@gmail.com";
$subject    = "New Request";

$webdetails         = $_POST['webdetails'];
$graphicdetails     = $_POST['graphicdetails'];

foreach($_POST['webdetails'] as $value1) {
    $webdetails_msg .= "$value1\n";
}
foreach($_POST['graphicdetails'] as $value2) {
    $graphicdetails_msg .= "$value2\n";
}

/* Let's prepare the message for the e-mail */
$message = "
Details:
$webdetails_msg
$graphicdetails_msg
";

/* Send the message using mail() function */
mail($myemail, $subject, $message);

<?php exit(); } ?> 
```

网页详细信息的 HTML：

```
<input type="checkbox" name="webdetails[ ]" id="design" value="Design" />
<input type="checkbox" name="webdetails[ ]" id="development" value="Development" />
<input type="checkbox" name="webdetails[ ]" id="web-updates" value="Web Updates" />
<input type="checkbox" name="webdetails[ ]" id="forum-template" value="Forum Template (Full)" />
<input type="checkbox" name="webdetails[ ]" id="forum-graphics" value="Forum Graphics" />
<input type="checkbox" name="webdetails[ ]" id="web-other" value="Other" /> 
```

用于图形细节的 HTML：

```
<input type="checkbox" name="graphicdetails[ ]" id="graphic-logo" value="Logo Design" />
<input type="checkbox" name="graphicdetails[ ]" id="graphic-social" value="Social Media Graphics" />
<input type="checkbox" name="graphicdetails[ ]" id="graphic-other" value="Other" /> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-12T23:58:39.447

它看起来不错，所以我猜是这样的：

复选框如果没有被选中就不会被发布，你需要检查有没有

```
if (isset($_POST['graphicdetails'])){
    foreach($_POST['graphicdetails'] as $value1) {
        $webdetails_msg .= "$value1\n";
    }
} 
```

但无论如何

```
if (isset($_POST['graphicdetails'])){
    $webdetails_msg .= implode("\n", $_POST['graphicdetails'])."\n";
} // you don't need the curly braces for 1 line but SO has a small code width 
```

少写

# java - 避免使用注释重新编译

> ID：14299181
> 
> 赞同：-2
> 
> 时间：2013-01-12T23:48:37.853
> 
> 标签：java, compilation, annotations

可以在运行时更改注释而无需重新编译代码吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T03:31:18.803

注释根本无法在运行时更改，更不用说不需要重新编译了。你的问题毫无意义。

# database - 数据库中的高级用户信息

> ID：14299185
> 
> 赞同：0
> 
> 时间：2013-01-12T23:49:09.977
> 
> 标签：database, database-design, data-binding

我正在`Account`我的项目数据库中创建一个表。每个帐户都有很多属性：

*   登录
*   电子邮件
*   密码
*   生日
*   国家
*   头像网址
*   城市
*   等等

它们中的大多数都是可以为空的。我的问题是，**我应该如何在数据库中设计这个？**

它应该是一张包含所有这些属性的表吗？或者也许我应该创建两个表，比如`AccountSet`和`AccountInfoSet`，我将在其中存储所有那些“高级”用户的设置？最后但并非最不重要的一点是：如果这应该是两个表，那么这些表之间应该有什么样的关系？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T04:24:12.423

如果这是一个关系数据库，那么我绝对*不会*将这些属性作为字段存储在 Account 表中。一些原因：

1.  一旦您的应用程序投入生产（或者可能已经存在），架构维护将成为一场噩梦。您绝对会添加更多属性，并且必须在生产中不断触摸该表将是痛苦的。

2.  您很可能会得到孤立的字段。我已经多次看到这种情况，您将引入一个属性然后停止使用它，但它已融入您的架构中，您可能太害怕而无法删除它。

3.  理想情况下，您希望避免在表中包含此类稀疏数据（大量字段包含大量空值）。

我的建议是做你已经在考虑的事情，那就是为 Accounts 引入一个属性表。您将其称为 AccountInfoSet。

该表应如下所示：

AccountId int、属性 nvarchar(50)、值 nvarchar(50)

（当然，您可以根据需要设置数据类型和大小。）

然后，您将加入 AccountInfoSet 表，并可能以“高级”属性为轴 - 使用查询将行转换为列。

在 .NET 中，您还可以编写一个存储过程，通过一次调用返回两个查询并查看 DataSet 对象中的表。

或者你可以只打两个单独的电话。一个用于帐户，一个用于属性。

获取信息的方法有很多，但如果您使用的是关系数据库，请确保不要只向 Account 添加字段。

# android - 按下小部件ListView项目时Android开始活动

> ID：14299187
> 
> 赞同：14
> 
> 时间：2013-01-12T23:49:19.073
> 
> 标签：android, listview, android-intent, widget, click

我正在开发一个 ListView 小部件，我希望用户能够在单击 ListView 时启动一个活动。我还没有找到任何关于这方面的教程，所以我想知道是否有人可以指出我正确的方向或者分享一些代码。无论单击哪个 ListItem，我都想启动相同的活动，所以这不是问题。

感谢所有帮助！

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-02-11T12:12:03.680

看看[这里](http://developer.android.com/guide/topics/appwidgets/index.html#implementing_collections)并滚动到副标题**为单个项目添加行为**。

您需要确保`setPendingIntentTemplate()`从您的`AppWidgetProvider` *和* `setOnClickFillInIntent()`您的`RemoteViewsService.RemoteViewsFactory`实现中调用。

例如：

```
public class Widget extends AppWidgetProvider {

    // ...

    public void onUpdate(Context context, AppWidgetManager appWidgetManager, int[] appWidgetIds) {

        for(int i = 0; i < appWidgetIds.length; i++){

            RemoteViews widget = new RemoteViews(context.getPackageName(), R.layout.widget);

            Intent startActivityIntent = new Intent(context, myActivity.class);
            PendingIntent startActivityPendingIntent = PendingIntent.getActivity(context, 0, startActivityIntent, PendingIntent.FLAG_UPDATE_CURRENT);
            widget.setPendingIntentTemplate(R.id.list_view, startActivityPendingIntent);

            appWidgetManager.updateAppWidget(appWidgetIds[i], widget);

            // ...
    }
}

public class WidgetAdapter implements RemoteViewsService.RemoteViewsFactory {

    // ...

    @Override
    public RemoteViews getViewAt(int position) {

    RemoteViews widgetRow = new RemoteViews(context.getPackageName(), R.layout.widget_row);

        Intent fillInIntent = new Intent();
        fillInIntent.putExtra(Widget.EXTRA_LIST_VIEW_ROW_NUMBER, position);
        widgetRow.setOnClickFillInIntent(R.id.list_view_row, fillInIntent);

        // ...

        return widgetRow;
    }
} 
```

[在SDK](http://developer.android.com/tools/samples/index.html)示例中的 StackWidget 示例中有一个更有说服力的示例，尽管我发现它有点难以找到（请参阅[此处](https://stackoverflow.com/questions/12071802/stackview-widget-sample-source-code)获取说明）。它创建了一个显示 Toast 消息的意图，但它使用相同的代码。

* * *

## 回答 #2

> 赞同：-10
> 
> 时间：2013-01-12T23:58:16.457

要启动任何 Activity，您需要创建一个 Intent，然后在该 Intent 上调用 startActivity。检查 Intent 和 startActivity，我相信你可以自己做。

# php - php的UML建模工具

> ID：14299188
> 
> 赞同：2
> 
> 时间：2013-01-12T23:49:31.240
> 
> 标签：php, user-interface, uml, draw, modeling

我的问题是当你创建大型 php 应用程序时你会使用什么。到目前为止，我还没有找到一个像样的 UML 建模工具，它具有以下特性：

*   漂亮的图形用户界面
*   通过单击添加属性和方法（不像使用原始文本和新行进行大编辑）
*   生成php类
*   拖放类

对于建模数据库，我使用 MySQL 工作台，它真的是我需要做的事情。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T09:37:11.613

你可以试试 UML Lab (http://uml-lab.com)（注意：我在 Yatta Solutions 工作时有偏见；））。该工具支持 Java 和 PHP，并内置了对往返工程的支持。它还支持使用 MySQL 数据库的 PHP 代码。

有几个教程可用；例如，您可以从[http://www.uml-lab.com/en/uml-lab/tutorials/modellierung-und-codegenerierung/](http://www.uml-lab.com/en/uml-lab/tutorials/modellierung-und-codegenerierung/)开始。该工具还能够导入现有的 PHP 源代码（逆向工程）。

UML Lab 集成在 Eclipse 中，因此您可以安装 Eclipse PDT 以对生成的 PHP 源文件进行语法突出显示和代码完成。

这是一个商业工具，但有 30 天的试用期和免费的学术版。如果您有任何问题，请随时在论坛、错误跟踪器或邮件中提问。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-27T17:36:30.123

[GenMyModel](https://www.genmymodel.com "GenMyModel")与您的描述完美匹配，您现在可以按照本[教程](http://blog.genmymodel.com/build-your-own-php-generator-from-uml-using-acceleo-part-1.html)自定义您自己的 PHP 生成器。

# java - 备份Java？

> ID：14299190
> 
> 赞同：0
> 
> 时间：2013-01-12T23:50:06.727
> 
> 标签：java, backup

我目前正在使用Java，并且正在寻找一个程序，该程序可以在每次编译时保存我正在执行的操作的新版本。如果它不运行我不介意，我可以进去并编辑类名以使其与之后的 .java 名称匹配。由于我是一个初学者，我总是被过度扩张自己所困扰，然后无可挽回地破坏了我正在从事的项目。我只是在寻找回到安全状态的方法。

我确信他们是为此而设计的程序，但因为我不知道他们的集体名词，所以几乎不可能找到一个。

非常感谢所有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T23:56:49.233

您正在寻找的是[修订控制](http://en.wikipedia.org/wiki/Revision_control)。这与您正在处理的语言无关，因为 VCS 所关心的只是软件在特定时间快照处的状态。

一些建议：

*   [颠覆](http://subversion.tigris.org)
*   [吉特](http://git-scm.com)
*   [水银](http://mercurial.selenic.com)

[IntelliJ IDEA](http://jetbrains.com/idea)还带有内置的本地修订系统，允许您访问特定文件的历史记录。最好还是使用 Git 或 Subversion。

您还可以在一些网站上托管您的项目以更好地保护您的项目，例如[Github](http://github.com)或[Google Code](http://code.google.com)。Github 使用...Git，但 Google Code 将允许您使用其他一些，例如 Subversion 和 Mercurial。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T23:53:47.913

使用[Dropbox](https://www.dropbox.com/)文件夹。如果您使用 Eclipse，只需将整个文件夹放在 Dropbox 文件夹中，您就可以使用备份的 IDE。

额外的好处：从任何地方访问您的项目。

您也可以使用[GitHub](https://github.com/)，但是除非您为他们的“计划”之一付费，否则您的源代码将向社区开放。

另外，考虑使用[Bitbucket](https://bitbucket.org/)，它也不为人所知，但它是免费的。（感谢 A--C 替代 GitHub）

# jquery - 鼠标悬停显示 div 上的图像映射

> ID：14299194
> 
> 赞同：0
> 
> 时间：2013-01-12T23:50:24.263
> 
> 标签：jquery, imagemap, onmouseover

所以我试图在一张图片上创建多个图像映射，然后根据你悬停在它上面的图像，它将从图片下方的 div 中提取特定信息，并将其填充到悬停的图像旁边。

```
<div class="runner_div">
  <img src="http://cooleycollective.com/test/slrc/wp-content/uploads/2013/01/Em_full.jpg" width="680" height="705" usemap="#runner_wear" /></a></p>
<map name="runner_wear">
  <area shape="poly" coords="264,18,237,33,243,72,276,83,328,79,311,29," href="#hat" alt="hat"  />
  <area shape="rect" coords="259,69,331,99" href="#" alt="glasses" />

  </map>
</div>

<div class="gear" id=hat>
<h2>Type of hat</h2>
  <p>I love this hat.I wore it when I was running from a bear in the zoo.</p>
</div>
<div class="gear" id="glasses">
  <p>These glasses were hand picked by a Sherpa from Kentucy!</p>
</div> 
```

我希望 div 保持在下方，以免被隐藏，而且当我将鼠标悬停在它引用的图像上时，它还具有可悬停的功能。我不确定是否需要为此使用 jQuery，甚至不确定如何创建该代码。

我觉得代码会做类似的事情：这个imgmap的鼠标悬停然后显示这个imagemap引用的div。我不知道这在代码语言中会是什么样子。谢谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T00:49:25.870

我假设你想要弹出效果。

[请查看我使用您的标记为您准备的演示](http://jsfiddle.net/LwQxR/)

这是工作的jQuery

```
var $popup = $('.popup');
$('area').on({
  mouseover : function(e){
    var $this = $(this),
        $obj = $('#'+$this.prop('alt'));

    $popup.text($obj.text()).css({
      top: e.pageY + 25,
      left: e.pageX - ($popup.width()/2),
    }).show();
  },
  mouseout: function(){
    var $this = $(this),
        $obj = $('#'+$this.prop('alt'));    

    $popup.hide(0).empty();
  }
}); 
```

# sql - Rails - 复杂的 SQL 查询

> ID：14299196
> 
> 赞同：1
> 
> 时间：2013-01-12T23:50:43.237
> 
> 标签：sql, ruby-on-rails, ruby-on-rails-3

我需要有关执行以下操作的查询的帮助：

1.  从最新的记录开始，向下到较旧的记录。
2.  它需要按 created_at 时间排序。
3.  如果在 created_at 时间数据库中有新记录，则检索它们但不要获取我从步骤 1 中获得的记录。
4.  我只想一次只获得 16 条记录。这个数字以后可能会改变。
5.  不要检索我之前发送的记录。

也只是为了让您知道，这是通过 $.ajax 启动的。

这样做的原因是因为我正在将新旧记录实时发送给客户。想想像用户开始访问网站并从新记录开始获取当前记录。然后用户可以去获取较旧的记录，但在同一请求下，它也检索全新的记录。一次只有 16 条记录。

我说得有道理吗？

这是我目前拥有的代码：

```
RssEntry.includes(:RssItem).where("rss_items.rss_id in (?) AND (rss_entries.id < ? OR rss_entries.created_at > ?)", rssids, lid, time).order("rss_entries.id DESC").limit(16)

lid = last lowest id from those records
rssids = ids from where to get the records
time = last time it did the records call 
```

上面的代码只是开始。我现在需要帮助以确保它符合我的上述要求。

**更新 1**

好的，所以我设法做我想做的事，但在 2 个 sql 查询中。我真的认为不可能在一个 sql 查询中做我想做的事。

任何帮助是极大的赞赏。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T01:13:04.760

首先，使用范围来获得你想要的：

```
class RssEntry < ActiveRecord::Base
  scope :with_items, includes(:RssItem)
  scope :newer_first, order("rss_entries.created_at DESC")

  def self.in(args)
    where(id: args)
  end

  def self.since(time)
    where('rss_entries.created_at > ?', time)
  end
end 
```

然后

```
RssEntry.with_items.in(rssids).since(time).offset(lid).limit(16).newer_first 
```

它应该按预期工作。

# javascript - 如何将 js 传单与 Backbone js 集成？

> ID：14299198
> 
> 赞同：1
> 
> 时间：2013-01-12T23:51:13.907
> 
> 标签：javascript, backbone.js, openstreetmap, leaflet

我正在尝试开发一个基于 Backbone JS 的应用程序。我想嵌入一个基于传单 JS 的 OpenStreetMap 地图，但我找不到任何教程。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-23T01:50:56.983

我发现上面的答案错误地渲染了地图。

Leaflet 期望在初始化地图时包含元素已经位于 DOM 中。这就是为什么使用`setTimeout`“作品”。到`setTimeout`触发时，视图已附加到页面，因此 Leaflet 可以正确初始化。

我相信将附加步骤和渲染步骤分开会更干净。通过在呈现之前将视图附加到页面，您可以确保 Leaflet 将正确初始化而无需使用`setTimeout`.

这是一个基于上述示例的示例：

```
var MapView = Backbone.View.extend({

  render: function () {
    this.map = L.map(this.el).setView([55.75, 37.58], 10);

    L.tileLayer('http://{s}.tile.cloudmade.com/4e5f745e28654b7eb26aab577eed79ee/997/256/{z}/{x}/{y}.png', {
      attribution: 'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, <a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery © <a href="http://cloudmade.com">CloudMade</a>[…]',
      maxZoom: 18
    }).addTo(map);

    return this;
  }

});

$('body').append(MapView.el);
MapView.render(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-13T16:12:24.443

I've created a jsfiddle to show how you can use Leaflet inside a Backbone.View: [http://jsfiddle.net/theotheo/CJcK6/](http://jsfiddle.net/theotheo/CJcK6/)

```
// bare template
<script type='template' id='map-template'>
   <div id="map"></div>
</script>

// simple view
var MapView = Backbone.View.extend({
  template: _.template($('#map-template').html()),
  render: function () {
    this.$el.html(this.template());

    var map = L.map(this.$('#map')[0]).setView([55.75, 37.58], 10);
    L.tileLayer('http://{s}.tile.cloudmade.com/4e5f745e28654b7eb26aab577eed79ee/997/256/{z}/{x}/{y}.png', {
      attribution: 'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, <a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery © <a href="http://cloudmade.com">CloudMade</a>[…]',
      maxZoom: 18
    }).addTo(map);

    return this;
  }
}); 
```

Feel free to ask.

**Update**:

Example with jQuery Mobile: [http://jsfiddle.net/theotheo/mh6mA/](http://jsfiddle.net/theotheo/mh6mA/)

# javascript - jQuery 周历在 Firefox 中正确显示，但在 Chrome/Safari 中不正确（仅在 iOS/OSX 设备上）

> ID：14299199
> 
> 赞同：2
> 
> 时间：2013-01-12T23:51:31.947
> 
> 标签：javascript, jquery, css, calendar, browser

**问题仅存在于 MAC 设备上。**

我正在使用[jQuery weekcalendar 插件](https://github.com/themouette/jquery-week-calendar)来显示带有约会的基于网络的日历。我在 Chrome 和 Safari（可能还有其他）中显示它时遇到问题，但它在 Firefox 中正确显示。

Firefox *（即使没有启用滚动也有滚动条）*： ![在此处输入图像描述](../Images/b553f9182eee118c1e129d735daf12cc.png)

Chrome *（请注意，Chrome 在不需要时不会显示滚动条。如果用户开始滚动日历，则滚动条会添加到绿页内容中）*： ![在此处输入图像描述](../Images/3a4225bdd2607c070c09c54b84a9f071.png)

我不知道我应该发布什么代码。请看一下我的[日历](http://www.slinder.ch/admin/admin/calendar/calendar.html)的页面源代码。

任何提示表示赞赏。谢谢。

* * *

**编辑**：我刚刚发现它仅不适用于带有 Safari 和 Chrome 的 Mac 设备（iPhone、iPad、Macbook Pro）。问题是在 mac 上滚动条没有显示，而在 Windows 上滚动条直接显示在日历中并且它是静态的。在 mac 上，当页面不移动时，滚动条会消失。知道如何解决吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-13T06:33:12.903

您使用的是哪个版本的 chrome 和 safari？它在 chrome 和 safari 中为我正确显示。如果您在代码中使用模板的概念，请尝试删除浏览器缓存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T17:07:06.930

可以通过使用自定义滚动条在 webkit 浏览器上为每个人强制使用滚动条*。在您的 CSS 上，添加以下内容：

```
::-webkit-scrollbar {
-webkit-appearance: none;
width: 8px;
}
::-webkit-scrollbar-thumb {
border-radius: 4px;
background-color: rgba(0,0,0,0.5);
-webkit-box-shadow: 0 0 1px rgba(255,255,255,.5);
} 
```

更多自定义选项：
[http ://davidwalsh.name/custom-scrollbars](http://davidwalsh.name/custom-scrollbars)

--
*如果您只需要在您的机器上本地查看，请按照以下步骤操作：http:
[//osxdaily.com/2011/08/03/show-scroll-bars-mac-os-x-lion/](http://osxdaily.com/2011/08/03/show-scroll-bars-mac-os-x-lion/)

# node.js - 为什么 MongoDB $set 不更新文档？

> ID：14299201
> 
> 赞同：0
> 
> 时间：2013-01-12T23:51:40.147
> 
> 标签：node.js, mongodb

```
db.collection('users', function(err, users)
{
    if (!err)
    {
        users.update({company:cursor[i].name}, {$set:{active:false}}, function() {});
    }
}); 
```

`cursor[i].name`有一个字符串值，当我显示`console.log()`它时它显示得很好。

文档未更新。我在 MongoHQ 中使用远程数据库并使用本机 mongodb 驱动程序运行 Node.js 服务器。如果我在连接到同一个数据库时在 shell 上运行查询，它工作正常。

**编辑：**我使用了一个 int 而不是`false`它工作得很好。我可以在 mongodb 中插入布尔值吗？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T12:25:48.460

用 1.2.9 的驱动测试了它，它工作正常。

```
exports.shouldUpdateCorrectlyWithBoolean = function (test) {
  var db = new Db(MONGODB, new Server("127.0.0.1", 27017,
    {auto_reconnect: false, poolSize: 1}), {w: 1, native_parser: false});

  db.open(function (err, db) {
    db.collection('update_with_boolean').insert({company: 'a'}, function(err, result) {
      test.equal(null, err);

      db.collection('update_with_boolean').update({company: 'a'}, {$set: {active:false}}, function(err, result) {
        test.equal(null, err);
        test.equal(1, result);

        db.collection('update_with_boolean').findOne(function(err, item) {
          test.equal(null, err);
          test.equal(false, item.active);

          db.close();
          test.done();
        });
      });
    })
  });
} 
```

# c# - 异步等待线程完成

> ID：14299209
> 
> 赞同：4
> 
> 时间：2013-01-12T23:52:39.837
> 
> 标签：c#, multithreading

好吧，我有一个从 pc 截取屏幕截图的函数，但不幸的是它阻塞了主 UI，所以我决定对其进行异步 [线程调用]；但是，在返回位图之前，我发现等待线程结果的麻烦。

这是我的代码：

```
/// <summary>
/// Asynchronously uses the snapshot method to get a shot from the screen.
/// </summary>
/// <returns> A snapshot from the screen.</returns>
private Bitmap SnapshotAsync()
{
    Bitmap image = null;
    new Thread(() => image = Snapshot()).Start();

    while (image == null)
    {
        new Thread(() => Thread.Sleep(500)).Start(); //Here i create new thread to wait but i don't think this is a good way at all.
    }
    return image;
}

/// <summary>
/// Takes a screen shots from the computer.
/// </summary>
/// <returns> A snapshot from the screen.</returns>
private Bitmap Snapshot()
{
    var sx = Screen.PrimaryScreen.Bounds.Width;
    var sy = Screen.PrimaryScreen.Bounds.Height;
    var shot = new Bitmap(sx, sy, PixelFormat.Format32bppArgb);
    var gfx = Graphics.FromImage(shot);
    gfx.CopyFromScreen(0, 0, 0, 0, new Size(sx, sy));
    return shot;
} 
```

尽管上面的方法可以按我的意愿异步工作，但我相信它可以改进。特别是我执行数百个线程以等待结果的方式，我确信这种方式不好。

所以我真的需要任何人看看代码并告诉我如何改进它。

[注意我使用的是 .NET 3.5]

并提前感谢。

在 Eve 和 SiLo 的帮助下解决的问题是最好的 2 个答案

> *   1：

```
>     private void TakeScreenshot_Click(object sender, EventArgs e)
>     {
>       TakeScreenshotAsync(OnScreenshotTaken);
>     }
>     
>     private static void OnScreenshotTaken(Bitmap screenshot)
>     {
>       using (screenshot)
>         screenshot.Save("screenshot.png", ImageFormat.Png);
>     }
>     
>     private static void TakeScreenshotAsync(Action<Bitmap> callback)
>     {
>       var screenRect = Screen.PrimaryScreen.Bounds;
>       TakeScreenshotAsync(screenRect, callback);
>     }
>     
>     private static void TakeScreenshotAsync(Rectangle bounds, Action<Bitmap> callback)
>     {
>       var screenshot = new Bitmap(bounds.Width, bounds.Height,
>                                   PixelFormat.Format32bppArgb);
>     
>       ThreadPool.QueueUserWorkItem((state) =>
>       {
>         using (var g = Graphics.FromImage(screenshot))
>           g.CopyFromScreen(bounds.X, bounds.Y, 0, 0, bounds.Size);
>     
>         if (callback != null)
>           callback(screenshot);
>       });
>     } 
```

> *   2：

```
>     void SnapshotAsync(Action<Bitmap> callback)
>     {
>         new Thread(Snapshot) {IsBackground = true}.Start(callback);
>     } 
```

```
>     void Snapshot(object callback)
>     {
>         var action = callback as Action<Bitmap>;
>         var sx = Screen.PrimaryScreen.Bounds.Width;
>         var sy = Screen.PrimaryScreen.Bounds.Height;
>         var shot = new Bitmap(sx, sy, PixelFormat.Format32bppArgb);
>         var gfx = Graphics.FromImage(shot);
>         gfx.CopyFromScreen(0, 0, 0, 0, new Size(sx, sy));
>         action(shot);
>     } 
```

> 用法，例如，通过一个按钮的点击：
> 
> ```
> void button1_Click(object sender, EventArgs e)
> {
>     SnapshotAsync(bitmap => MessageBox.Show("Copy successful!"));
> } 
> ```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T00:11:13.160

`async`/`await`关键字完全符合您的要求，非常优雅。

这是我将您的方法转换为正确模式的方法：

```
private static async Task<Bitmap> TakeScreenshotAsync()
{
  var screenRect = Screen.PrimaryScreen.Bounds;
  return await TakeScreenshotAsync(screenRect);
}

private static async Task<Bitmap> TakeScreenshotAsync(Rectangle bounds)
{
  var screenShot = new Bitmap(bounds.Width, bounds.Height, 
                              PixelFormat.Format32bppArgb);

  // This executes on a ThreadPool thread asynchronously!
  await Task.Run(() =>
  {
    using (var g = Graphics.FromImage(screenShot))
      g.CopyFromScreen(bounds.X, bounds.Y, 0, 0, bounds.Size);

  });

  return screenShot;
} 
```

然后你会做这样的事情：

```
private async void TakeScreenshot_Click(object sender, EventArgs e)
{
  var button = sender as Button;
  if(button == null) return;

  button.Enabled = false;
  button.Text = "Screenshoting...";

  var bitmap = await TakeScreenshotAsync();
  bitmap.Save("screenshot.png", ImageFormat.Png);

  button.Text = "Take Screenshot";
  button.Enabled = true;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-13T00:12:30.960

您可以为此使用基于事件的异步模式：

```
void SnapshotAsync(Action<Bitmap> callback)
{
    new Thread(Snapshot) {IsBackground = true}.Start(callback);
}

void Snapshot(object callback)
{
    var action = callback as Action<Bitmap>;
    var sx = Screen.PrimaryScreen.Bounds.Width;
    var sy = Screen.PrimaryScreen.Bounds.Height;
    var shot = new Bitmap(sx, sy, PixelFormat.Format32bppArgb);
    var gfx = Graphics.FromImage(shot);
    gfx.CopyFromScreen(0, 0, 0, 0, new Size(sx, sy));
    action(shot);
} 
```

用法，例如，通过一个按钮的点击：

```
void button1_Click(object sender, EventArgs e)
{
    SnapshotAsync(bitmap => MessageBox.Show("Copy successful!"));
} 
```

正如作者所要求的，它不会阻塞原始线程。如果您必须通过回调在 UI 上进行操作，请小心，请记住使用`Invoke`和它的等价物。

**编辑：**阅读 SiLo 的评论，了解一些可以应用于上述代码的良好实践和优化。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-13T00:26:21.230

我刚刚看到您关于使用 3.5 而不是 4.5 的编辑。这太糟糕了，但绝对还是有可能的。我已经创建了第二个答案，因此使用`async`/的人`await`可以使用第一个作为示例。

现在对于您的解决方案，实际上并没有太大的不同：

```
private void TakeScreenshot_Click(object sender, EventArgs e)
{
  TakeScreenshotAsync(OnScreenshotTaken);
}

private static void OnScreenshotTaken(Bitmap screenshot)
{
  using (screenshot)
    screenshot.Save("screenshot.png", ImageFormat.Png);
}

private static void TakeScreenshotAsync(Action<Bitmap> callback)
{
  var screenRect = Screen.PrimaryScreen.Bounds;
  TakeScreenshotAsync(screenRect, callback);
}

private static void TakeScreenshotAsync(Rectangle bounds, Action<Bitmap> callback)
{
  var screenshot = new Bitmap(bounds.Width, bounds.Height,
                              PixelFormat.Format32bppArgb);

  ThreadPool.QueueUserWorkItem((state) =>
  {
    using (var g = Graphics.FromImage(screenshot))
      g.CopyFromScreen(bounds.X, bounds.Y, 0, 0, bounds.Size);

    if (callback != null)
      callback(screenshot);
  });
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-13T00:01:32.367

抱歉，但是从逻辑上讲，您在这里尝试的方法不太聪明。

*   你想截图。
*   你不希望 UI 线程阻塞，所以你去异步。

祝贺。到目前为止，这是有道理的。

现在是您不想告诉任何人您尝试过的部分：

*   现在您想在 UI 线程中等待异步操作完成。

回到开始 - 你阻塞了 UI 线程。什么都没有实现。从逻辑上讲，您基本上会在与开始时完全相同的地方结束。

好的，解决方案：

*   首先，摆脱线程，使用任务。更高效。
*   其次，要意识到在 UI 线程中等待是没有意义的。停用 UI 元素，然后在处理结束时重新打开它们。

将此作为状态机问题处理（UI 处于“工作”或“等待命令”状态），因此您不会阻塞。这是处理该问题的唯一方法 - 因为最后如果您等待执行完成，整个异步操作将毫无用处。

你不能启动一个方法，然后等待处理完成阻塞线程——如果你曾经尝试过，那么整个异步操作就是一个无用的提议。

# php - 有人可以解释 SSL 如何在电子商务网站上帮助我吗？

> ID：14299212
> 
> 赞同：0
> 
> 时间：2013-01-12T23:53:13.910
> 
> 标签：php, security, ssl

我正在制作一个小型电子商务网站，用户可以在其中通过购物卡购买商品。这些物品只是一些印刷品，价格范围在 50 美元到 300 美元之间。

许多人建议使用 SSL。我知道它使用安全套接字加密浏览器和服务器之间的数据传输，但我以前从未使用过它。

它究竟如何帮助我保护我的网站？它会自动阻止我网站上的任何 SQL 注入或 XSS 攻击的可能性吗？

附言。在做这个话题之前我已经搜索过了。像我这样的初学者的简短回复或指南将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T23:58:25.830

> [...]我的网站上有一个 SQL 注入或 XSS 漏洞。它会自动阻止此类攻击吗？

对此的回答是“不”。

SSL 表示“安全*套接字*层”，它尽最大努力确保：通过尽可能防止窃听来确保网络级别的通信安全。SSL 不了解 HTTP(S)。

尽管针对 SSL 本身的任何攻击超出了此问题的范围，但要记住的主要事项是：

*   它保护与服务器的任何通信，无论客户端是否恶意；
*   一旦建立连接，它就无法控制客户端对服务器“做什么”。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-12T23:54:44.403

它可以防止人们窃听您的客人连接。这样，当您输入登录信息或信用卡信息时，连接中的人就无法轻松读取它。

# java - Jersey 到 json，返回扩展超类型的实例

> ID：14299217
> 
> 赞同：0
> 
> 时间：2013-01-12T23:54:21.490
> 
> 标签：java, json, tomcat, jersey

我遇到了以下问题，我正在创建一个使用球衣的 Web 应用程序，并且我想将对象列表作为 json 返回。这些对象是不同的类，它们都从一个类 Bet 扩展而来。但是，我没有取回在 Bet 的子类中创建的字段。

例如：

```
class Bet {
    String string;
}

class A extends Bet {
    int i;
} 
```

当我返回包含 A 的一些对象的 Bet 列表时，json 仅包含 Bet 中的字符串，并且不显示类 A 中的 Integer。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T00:01:57.940

我假设您正在使用杰克逊。使用 JsonTypeInfo 注释您的列表属性 - 这将导致额外的类型信息包含在您的 JSON 中，这反过来又允许在您取回数据时进行适当的反序列化：

```
@JsonTypeInfo(use=Id.CLASS, include=As.PROPERTY, property="class")
private List<Bet> bets; 
```

# javascript - 如何在使用 JQuery Mobile 进行 javascript 编辑后刷新/保留 HTML 格式

> ID：14299223
> 
> 赞同：0
> 
> 时间：2013-01-12T23:56:51.840
> 
> 标签：javascript, html, jquery-mobile

我正在尝试设置支持多种语言的能力，方法是运行一个javascript函数来用不同的语言替换html。该脚本似乎运行正确，但这样做我失去了 JQUery Mobile 附带的格式

我正在使用以下表格进行替换

```
for (var i = 1, e; e = document.getElementById("input1_" + i); ++i)
  e.innerHTML = input[2, 1]; 
```

我有格式 input1_1、input1_2 ... 等的 id 来替换

我有一个小提琴来说明一个工作示例 - 请参阅[http://jsfiddle.net/eKXPU/4/](http://jsfiddle.net/eKXPU/4/)

如果您尝试使用 Fiddle，您会看到当您单击俄语时，“属性”会正确更改，但会丢失格式。单击俄语等效项仍然可以打开可折叠内容，但它似乎只是一个格式问题

任何帮助表示赞赏 - 我希望它就像刷新 JQuery CSS 的调用一样简单，但不知道该语法是什么。

谢谢

编辑：尝试添加

```
$('#home').trigger('pagecreate'); 
```

在脚本之后，在[How do I refresh CSS for a DIV loaded with external content in JQuery Mobile 中](https://stackoverflow.com/questions/10231122/how-do-i-refresh-the-css-for-a-div-loaded-with-external-content-in-jquery-mobile)关闭回复，但这也不起作用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T00:46:20.477

因为您使用动态更改 html 的 jQuery Mobile。蜜蜂处理后，您的 html 如下所示：

```
<h3 id="input1_1" class="ui-collapsible-heading ui-collapsible-heading-collapsed">
    <a href="#" class="ui-collapsible-heading-toggle ui-btn ui-btn-up-c ui-fullsize ui-btn-icon-left ui-corner-top ui-corner-bottom ui-btn-up-null" data-corners="false" data-shadow="false" data-iconshadow="true" data-wrapperels="span" data-icon="plus" data-iconpos="left" data-theme="null" data-mini="false">
        <span class="ui-btn-inner ui-corner-top ui-corner-bottom">
            <span class="ui-btn-text">Properties
                <span class="ui-collapsible-heading-status"> click to expand contents</span>
            </span>
            <span class="ui-icon ui-icon-plus ui-icon-shadow">&nbsp;</span>
        </span>
    </a>
</h3> 
```

如您所见，现在不可能只访问文本。我的解决方案是将文本包装在另一个没有其他含义的跨度[中](http://jsfiddle.net/eKXPU/3/)。

# javascript - 如何在 d3.js 中缩放 GIS 数据？

> ID：14299226
> 
> 赞同：0
> 
> 时间：2013-01-12T23:57:20.713
> 
> 标签：javascript, d3.js, gis

以此为例，我如何缩放图形以使其放大更多[。](http://bl.ocks.org/4060606)我问是因为我只想可视化德克萨斯州的数据，所以我想更改缩放比例以使其更大。

是否可以使用内置的 d3.js 函数进行缩放，或者是否必须修改 JSON 数据中存在的转换值（缩放和/或转换）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T16:33:07.517

d3.geo.path() 使用 d3.geo.albersUsa() 投影，除非您定义一个新投影。据我所知，d3.geo.albersUsa 不提供任何更改中心的选项，尽管您可以更改比例。为此，您需要明确定义投影并将其应用于地理路径，如下所示：

```
projection = d3.geo.albersUsa().scale(1500);  
path = d3.geo.path().projection(projection); 
```

但是你可以使用 d3.geo.albers，它提供了一个 center() 函数，就像大多数 D3 投影一样：

```
projection = d3.geo.albers().scale(2000).center([0,30]);
path = d3.geo.path().projection(projection); 
```

这应该会给你一张以德克萨斯为中心的美国阿尔伯斯投影地图。

# sql - 大数据集上的sql语句

> ID：14299228
> 
> 赞同：0
> 
> 时间：2013-01-12T23:57:37.717
> 
> 标签：sql, sql-server, sql-server-2008

我有一个存储过程，它使用一些逻辑之间带回大块数据。我声明中的 PostFamilyTags 表有大约 150 万行。下面的 sql 语句运行很慢。

```
SELECT TOP(100)*  FROM
    (SELECT ROW_NUMBER() 
        OVER(ORDER BY p.date  DESC) as NUM,    
        m.postfamilymediaID, 
        m.postfamilyID, 
        p.blogID,
        p.userID, 
        p.BlogPostID, 
        m.postfamilymediatypeID as Type, 
        p.Title, 
        m.Address, 
        m.AddressEncoded, 
        m.ThumbNailAddress, 
        p.Date, 
        p.Summary, 
        p.Url, 
        m.ThumbNailIndex, 
        m.ThumbNailHeight, 
        m.ThumbNailWidth, 
        m.ThumbNailHeightAlt, 
        m.ThumbNailWidthAlt, 
        m.ItemName, 
        m.id3Title, 
        m.id3SubTitle, 
        m.id3ContributingArtists, 
        m.id3AlbumArtist, 
        m.id3Album, 
        m.id3Year, 
        m.id3Genre, 
        m.id3Length, 
        m.IsPublic      
FROM         
        PostFamilyMedia as m
        inner join 
        PostFamily as p on m.postfamilyID = p.postfamilyID 
        inner join 
        PostFamilyTags as pt on p.postfamilyID = pt.postfamilyID 
        inner join --Tags
        Tags as t on pt.tagID = t.tagID 
        Where t.TagLevel = 1 and t.Tag = 'Electronic' 
) AS a  WHERE NUM >= (100 + 1)  AND NUM <= (100 + 100) 
```

但是当我去掉中间逻辑时，它的效果很好。

```
SELECT TOP(100)
        m.postfamilymediaID, 
        m.postfamilyID, 
        p.blogID,
        p.userID, 
        p.BlogPostID, 
        m.postfamilymediatypeID as Type, 
        p.Title, 
        m.Address, 
        m.AddressEncoded, 
        m.ThumbNailAddress, 
        p.Date, 
        p.Summary, 
        p.Url, 
        m.ThumbNailIndex, 
        m.ThumbNailHeight, 
        m.ThumbNailWidth, 
        m.ThumbNailHeightAlt, 
        m.ThumbNailWidthAlt, 
        m.ItemName, 
        m.id3Title, 
        m.id3SubTitle, 
        m.id3ContributingArtists, 
        m.id3AlbumArtist, 
        m.id3Album, 
        m.id3Year, 
        m.id3Genre, 
        m.id3Length, 
        m.IsPublic      
FROM         
        PostFamilyMedia as m
        inner join 
        PostFamily as p on m.postfamilyID = p.postfamilyID 
        inner join 
        PostFamilyTags as pt on p.postfamilyID = pt.postfamilyID 
        inner join --Tags
        Tags as t on pt.tagID = t.tagID 
        Where t.TagLevel = 1 and t.Tag = 'Electronic' 
```

谁能帮我让我的第一个 sql 语句运行得更快？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T02:10:38.463

由于您没有从任一标签表中选择任何列，因此您可以采用不同的方式编写此代码：

```
Select Top(100)
  *
From (
  Select
    Row_Number() Over (Order By p.date Desc) as Num,
    m.postfamilymediaID,
    m.postfamilyID,
    m.postfamilymediatypeID as Type, 
    p.Title, 
    p.Date -- and the rest of the fields
  From
    PostFamilyMedia As m
      Inner Join 
    PostFamily As p On m.postfamilyID = p.postfamilyID 
  Where
    Exists (
      Select 
        'x'
      From 
        Tags As t 
          Inner Join
        PostFamilyTags As pt 
          On pt.tagID = t.tagID 
      Where
        t.TagLevel = 1 and
        t.Tag = 'Electronic' And
        p.postfamilyID = pt.postfamilyID
      )
  ) As a
Where
  Num >= (100 + 1) And Num <= (100 + 100); 
```

在[http://sqlfiddle.com/#!3/e073d/1](http://sqlfiddle.com/#!3/e073d/1)的一些非常基本的测试中，以这种方式编写它将在日期列上使用覆盖索引，而您现在拥有它的方式却没有。这是否适用于更大的容量（以及它是否能提高性能）需要测试。

另外，我认为`PostFamilyTags (PostFamilyID, TagID)`是独一无二的。这种查询对您定义唯一索引的顺序很敏感。找出哪个最好的最简单方法是创建两者并查看优化器选择的内容。它看起来`TagID, PostFamilyID`最适合小批量。

如果`Tags (TagLevel, Tag)`是唯一的，您可能会在单独的查询中读取唯一的 TagID，然后从主查询中删除标签。由于标签相对于其他表可能很小，我不认为这会产生太大影响。

```
Declare @TagID int
Select
  @TagID = TagID
From
  Tags
Where
  TagLevel = 1 And
  Tag = 'Electronic'

Select Top(100)
  *
From (
  Select
    Row_Number() Over (Order By p.date Desc) as Num,
    m.postfamilymediaID,
    m.postfamilyID,
    m.postfamilymediatypeID as Type, 
    p.Title, 
    p.Date -- and the rest of the fields...
  From
    PostFamilyMedia As m
      Inner Join 
    PostFamily As p On m.postfamilyID = p.postfamilyID 
  Where
    Exists (
      Select 
        'x'
      From 
        PostFamilyTags As pt 
      Where
        p.postfamilyID = pt.postfamilyID And
        pt.TagID = @TagID
      )
  ) As a
Where
  Num >= (100 + 1) And Num <= (100 + 100); 
```

当您`PostFamilyMedia`为每个匹配选择所有匹配项时，您可以通过将第一个表聚集在而不是其主键`PostFamily`上来加快速度。`PostFamilyID, PostFamilyMediaID`包含第二列是为了使其独一无二。SQL Server 会将隐藏的唯一标识符值添加到非唯一聚集索引中。权衡是，如果您的应用程序的另一部分选择单独的记录，它会稍微慢一些。您可以使用另一个覆盖索引来加快速度，但代价是插入和更新速度变慢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T00:16:30.297

问题可能是您认为“快”与“慢”的区别。当查询可能返回数百万行时，通常将第一行的时间用作查询的长度。但是，您需要考虑最后一行的时间。

通过添加`row_number`函数，SQL 需要在返回任何行之前生成整个结果集。它看起来更慢，但在测量整个结果集的时间时并没有真正慢（只是因为`row_number()`）。

您可以通过`row_number()`在子查询中执行以下操作来加快速度：

```
from (select row_number() order by pdate) . . .
      from PostFamily p
     ) 
```

然后在`on`子句中包含条件。

明智地使用索引可能会有所帮助。你在表的索引中有日期吗？但是，我不确定这会有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T05:29:23.683

直接回答您的问题；我使第一个查询更快的方法是索引 table.column(order)：`**PostFamily.date DESC**`

我这么说的原因是您似乎需要对数据进行分页（基于 [Num]）。正如人们指出的那样，该`ROW_NUMBER()`操作需要读取所有符合条件的行。但是，它们不仅需要阅读，还需要**排序**。排序非常昂贵，尤其是在大型数据集上。我希望我所描述的索引会对此有所帮助。

为了解释这两个查询的区别，我可以提供一个类比。给定以下列表：

```
Mike
Susan
Andrew
Felicity
George
Laura
Ben
Robert
Julia
Jim
Kath 
```

1.  给我前三个名字
2.  按字母倒序给我前 3 个名字

这两项任务中哪一项会花费您更多的工作？

# iphone - 使用 Core Data 存储重复日历事件的对象类型

> ID：14299229
> 
> 赞同：1
> 
> 时间：2013-01-12T23:57:42.743
> 
> 标签：iphone, core-data

我正在创建一个基于提醒的应用程序，例如 iPhone 附带的简单闹钟。我正在使用 Core Data 并有一个具有 NSDate 属性的警报实体，用于用户安排警报应该响起的时间。我还希望能够安排像闹钟这样的重复事件。我想知道这样做的好方法是什么？我知道如果事件在 NSCalendarUnit 之后的某些事件上重复，您可以设置重复间隔。但是只有工作日、每隔一天或周一、周三、周五等没有重复间隔。

到目前为止，我唯一的解决方案是创建另一个具有 Sun-Sat 字符串表示形式的简单实体。每个警报实体都有这些 DaysOfTheWeekEntities 的 NSSet。然后，当我想为警报安排 UILocalNotification 时，我会在具有原始创建日期的数据库中查找该警报，从 DaysOfTheWeek 属性计算下个月的下一个重复警报。

我不确定是否有更好的方法来做到这一点。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T10:48:36.870

一种“智能”方案是`cron`在 unix 系统上使用该实用程序的方案。

来自`man crontab`：

> 时间和日期字段是：
> 
> ```
>  field      allowed values
>     -----      --------------
>     minute         0-59
>     hour       0-23
>     day of month   1-31
>     month      1-12 (or names, see below)
>     day of week    0-7 (0 or 7 is Sun, or use names)
> 
>    A field may be an asterisk (*), which always stands for "first-last".
> 
>    Ranges of numbers are allowed.  Ranges are two numbers separated with a
>    hyphen.    The specified range is inclusive.  For example,  8-11  for  an
>    "hours" entry specifies execution at hours 8, 9, 10 and 11.
> 
>    Lists are allowed.  A list is a set of numbers (or ranges) separated by
>    commas.    Examples: "1,2,5,9", "0-4,8-12".
> 
>    Step values can be used in conjunction with ranges.  Following a    range
>    with  "<number>"    specifies  skips  of  the  number's value through the
>    range.  For example, "0-23/2" can be used in the hours field to specify
>    command    execution every other hour (the alternative in the V7 standard
>    is "0,2,4,6,8,10,12,14,16,18,20,22").  Steps are also  permitted    after
>    an asterisk, so if you want to say "every two hours", just use "*/2". 
> ```

# java - 如何在 Java 中关闭 Jpanel 程序

> ID：14299230
> 
> 赞同：1
> 
> 时间：2013-01-12T23:57:51.787
> 
> 标签：java, swing, jpanel

我正在制作一个 Java 游戏，我需要一些关于如何做某事的建议。

目前我正在使用 2 个不同的 .java 文件来制作游戏。我有一个扩展 JFrame 的主程序，我调用了另一个扩展 JPanel 的 .java 文件。

游戏目前可以运行，但我想为游戏制作另一种模式，我认为如果我为它制作另一个文件会更好。

这是主文件的所有代码。我删除了所有无用的不需要的东西：

```
import java.awt.*;
import javax.swing.*;

public class ProgramMain extends JFrame  implements KeyListener
{
    private Program mode1;
    private Program2 mode2;

    public ProgramMain ()
    {
        setResizable (false);
        mode1 = new Program ();
        getContentPane ().add (mode1, BorderLayout.CENTER);
        if (mode1.change == true)
        {
            this.remove (mode1);
            board = new Program2 ();
            this.getContentPane ().add (mode2);            
        }
    }

  public void actionPerformed (ActionEvent event)
  {
  }

    public static void main (String[] args)
    {
        GameMain frame = new GameMain ();
        frame.setDefaultCloseOperation (JFrame.EXIT_ON_CLOSE);
        frame.pack ();
        frame.setVisible (true);
    }
} 
```

有没有一种方法可以让我重新启动 ProgramMain () 方法，以便它进行另一次检查，所以如果这次 if 语句变为真，它会更改屏幕并打开 Program2.java 文件。

这是我的主要问题。我不确定如何在 .java 程序之间切换。如果我希望我的主程序 (ProgramMain) 读取另一个程序/.java 文件，我需要做什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T05:13:53.863

对于切换，您可以在需要切换的框架中执行操作。

```
ActionListener al = new ActionListener(){
    public void actionPerformed(ActionEvent ae) {
        if (board1) {
            getContentPane().add(gameBoard, BorderLayout.CENTER);
        } else {
            getContentPane().add(gameBoard2, BorderLayout.CENTER);
        }
    }
};
buttonSwitch.addActionListener (al); 
```

# javascript - 试图将 javascript 语句放在数组中

> ID：14299236
> 
> 赞同：-2
> 
> 时间：2013-01-12T23:58:28.623
> 
> 标签：javascript

我的代码中有这行`document.getElementById('slot2').src ="snail.gif";`代码，它可以将 img 元素更改为适当的 gif。

但是，我也有一个名为 slot 的数组，其中包含三个元素，每个元素是`document.getElementById('slotN')`or 1 2 和 3 来代替 N。

当我`slots[2].src ="snail.gif";`在函数中使用它时，它什么也做不了。

我知道这与将语句的字符串转换为语句有关，但尝试使用 eval() 似乎也不起作用。

任何意见，将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T00:01:06.437

我认为您的问题可能与数组是 0 索引的事实有关。`slots[2]`实际上是数组中的**第三个元素。**如果你只有两个元素，它们将是`slots[0]`and `slots[1]`。尝试设置 src`slots[2]`将不起作用，因为它不存在。

您可以制作一组图像：

```
myImages = ["img1.gif", "another.gif"] 
```

然后像下面这样引用 slotN：

```
document.getElementById("slot" + n).src = myImages[n]; 
```

确保您的“slotN”元素从 0（或加 1）开始。

# highlight - PySide：为 QGraphicsTextItem 对象添加背景颜色

> ID：14299239
> 
> 赞同：1
> 
> 时间：2013-01-12T23:58:39.837
> 
> 标签：highlight, pyside, qgraphicstextitem

有没有办法为对象**添加背景颜色`QGraphicsTextItem`**？

我创建了一个`QGraphicsScene`, 并且需要在其中显示文本。我创建了一个`QGraphicsTextItem`来完成这项工作。但是，它的背景不是很清晰，所以我希望突出显示它，或者设置背景颜色以使其更明显。我在文档中没有找到任何这样做的东西。

如果有更好的选择，我想避免这样做。感谢您的回答！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T20:27:18.753

你有几个选择。

最简单的方法是设置具有所需样式的 HTML：

```
htmlItem = QtGui.QGraphicsTextItem()
htmlItem.setHtml('<div style="background:#ff8800;">html item</p>') 
```

另一种方法是子类化`QGraphicsTextItem`并使用方法进行自定义背景`paint`。

```
class MyTextItem(QtGui.QGraphicsTextItem):
    def __init__(self, text, background, parent=None):
        super(MyTextItem, self).__init__(parent)
        self.setPlainText(text)
        self.background = background

    def paint(self, painter, option, widget):
        # paint the background
        painter.fillRect(option.rect, QtGui.QColor(self.background))

        # paint the normal TextItem with the default 'paint' method
        super(MyTextItem, self).paint(painter, option, widget) 
```

这是一个演示两者的基本示例：

```
import sys
from PySide import QtGui, QtCore

class MyTextItem(QtGui.QGraphicsTextItem):
    def __init__(self, text, background, parent=None):
        super(MyTextItem, self).__init__(parent)
        self.setPlainText(text)
        self.background = background

    def paint(self, painter, option, widget):
        # paint the background
        painter.fillRect(option.rect, QtGui.QColor(self.background))

        # paint the normal TextItem with the default 'paint' method
        super(MyTextItem, self).paint(painter, option, widget)

if __name__ == '__main__':
    app = QtGui.QApplication(sys.argv)

    w = QtGui.QGraphicsView()
    s = QtGui.QGraphicsScene()

    htmlItem = QtGui.QGraphicsTextItem()
    htmlItem.setHtml('<div style="background:#ff8800;">html item</p>')

    myItem = MyTextItem('my item', '#0088ff')

    s.addItem(htmlItem)
    myItem.setPos(0, 30)
    s.addItem(myItem)
    w.setScene(s)
    w.show()

    sys.exit(app.exec_()) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T03:36:16.007

试试这个：

```
item = QtGui.QGraphicsTextItem()
item.setFormatTextColor("#value") 
```

# java - 有问题的 JLabel

> ID：14299240
> 
> 赞同：0
> 
> 时间：2013-01-12T23:58:50.073
> 
> 标签：java, swing, jlabel

我想用java做一个问题。这是我的代码：

```
import java.awt.*;
import java.awt.Event.*;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.*;

public class Chestionar extends JFrame {

public Chestionar() {
    super("Chestionar");
    final int x, y, z;
    x = y = z = 0;
    String ch1;

    JPanel jp = new JPanel();
    JLabel jl = new JLabel("Name:");
    JTextField jtf = new JTextField(10);

    ch1 = jtf.getText();

    jp.add(jl);
    jp.add(jtf);

    add(jp);

    JPanel jp1 = new JPanel();
    JLabel jl1 = new JLabel();
    String s = "Welcome";
    jl1.setText(s);

    jp1.add(jl1);
    add(jp1);

    //first question
    final JPanel jp2 = new JPanel();
    JLabel jl2 = new JLabel("What is called as the roof of the world? 1.Nepal 2.Tibet etc");  
    final JComboBox jcb = new JComboBox();
        for(int i=0; i<5; i++){
            jcb.addItem(i);
        }

        ActionListener alege = new ActionListener() {

        @Override
        public void actionPerformed(ActionEvent e) {
            if(jcb.getSelectedItem().toString().equals("2")){

                JLabel bine = new JLabel("Right");

                jp2.add(bine);

            } else {

                JLabel gresit = new JLabel("Wrong");

                jp2.add(gresit);

            }

            }
        };

        jcb.addActionListener(alege);
        jp2.setLayout(new FlowLayout());
        jp2.add(jl2);
        jp2.add(jcb);

    add(jp2);
    setVisible(true);
    setLayout(new GridLayout(4, 1));
    setSize(600, 600);
}

public static void main(String arg[]) {
    Chestionar ch = new Chestionar();
}
} 
```

我想让 JLabel 显示为“正确”或“错误”，这取决于`JComboBox`. 我不知道为什么，如果没有出现从`JComboBox`特定项目中选择的项目`JLabel`，只有当我重新调整主框架的大小时。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-13T00:03:04.827

每次为`JLabel`您的. 在您调整（或+ ）面板的大小之前，标签不会出现。`JPanel` `jp2``ActionEvent``JComboBox``revalidate``repaint`

最好添加一个`JLabel`并通过调用来更新它`setText`。这种方法不需要调用`repaint`：

```
Integer selectedItem = (Integer) jcb.getSelectedItem();
switch (selectedItem) {
   case 2: // currently using 2 for correct answers...
      answerStatusLabel.setText("Right");
      break;

   default:
      answerStatusLabel.setText("Wrong");
      break;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T00:07:08.143

JLabel 必须刷新。要么按照 raven1981 的建议执行 jp2.repaint()，要么按照 Reimeus 的建议调用 setText。

# c - 为什么 fflush(stdin) 不起作用？

> ID：14299242
> 
> 赞同：1
> 
> 时间：2013-01-12T23:59:03.567
> 
> 标签：c

> **可能重复：**
> [使用 fflush(stdin)](https://stackoverflow.com/questions/2979209/using-fflushstdin)

我的代码是：

```
scanf("%d", &_choice);
fflush(stdin);
gets(input); 
```

我`fflush(stdin);`用来删除.`'\n'`之后留下的字符`scanf`。

但是，我发现它不起作用，并`gets`自动获取`'\n'`字符并继续。

我通过使用`getchar()`而不是解决了它，`fflush`但我仍然无法弄清楚为什么`fflush`不起作用......

**编辑：**我现在了解`fflush`仅用于输出流。但是有没有`stdin`从垃圾中“清理”的命令？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-13T00:00:18.963

因为`fflush`是用于输出流。

无论如何，`fflush`不​​是为了“删除`\n`字符”......

# iphone - 实时 GKMatch 断开连接问题

> ID：14299248
> 
> 赞同：1
> 
> 时间：2013-01-13T00:00:17.337
> 
> 标签：iphone, ios, xcode, game-center

我使用 GameCenter 和实时服务器-客户端网络策略创建了一个纸牌游戏。在沙盒中进行测试时，游戏运行完美（建立连接、选择最佳主机、发送/接收数据），有时游戏甚至可以毫无问题地完成。然而，大多数时候，在两台设备上我都会收到一个 match:player:didChangeState: 回调，通知我对方用户已断开连接。它经常令人沮丧地发生，并且似乎与不活动或超时没有任何关系。我的想法是我可能正在处理 GameCenter 服务器上的正常网络延迟，因为在极少数情况下玩家似乎重新连接并再次发送数据。还有其他人使用 GKMatch 和 Real Time GameCenter 处理这些问题吗？我正在运行 iOS 6.1 并连接到同一个 wifi 网络的 iPhone 5 和 iPhone 4 上测试该应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T11:22:19.660

对于 MAX player=2，我遇到了同样的问题。对我来说 GKMatch 的代表

```
- (void)match:(GKMatch *)match player:(NSString *)playerID didChangeState:(GKPlayerConnectionState)state; 
```

即使用户在游戏中处于活动状态，也将“状态”返回为“GKPlayerStateDisconnected”。对我有用的解决方案如下：在我的 NetworkManager 类中，我将当前匹配引用为 gkMatch。因此，每当我再次将“状态”设为“GKPlayerStateDisconnected”时，我都会检查它是否真的与远程播放器断开连接。为此，我使用了“gkMatch”数据，如下所示： ps：如果会话实际上没有断开，它包含字符串为“已连接”。

```
NSString *gkMatchString = [NSString stringWithFormat:@"%@",[NetworkManager sharedManager].gkMatch];

        if ([gkMatchString rangeOfString:@"connected"].location == NSNotFound) 
          {
            NSLog(@"Session is actually closed.");
          }else{
            NSLog(@"Session is NOT yet closed.");
          } 
```

它对我有用，所以如果它对任何人有帮助，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T16:27:05.237

虽然我没有找到断开连接的确切解决方案，但我用以下方法解决了我的问题。此外，为了防止在断开连接期间发送的消息丢失：我实现了一个“响应”处理程序，用于检测消息是否被对手实际接收（因为当对手没有收到消息时，可靠数据发送模式不会出错由于连接问题）。

当游戏开始时，我确定一个用户是主机（选择BestHostPlayerWithCompletionHandler:^），当我检测到断开连接时，主机玩家重新邀请非服务器玩家回到游戏中。无论游戏是通过邀请还是“立即玩”开始的，这都有效。它解决了我的“ShouldReconnect”问题，该问题仅适用于 1v1 和邀请匹配。当非主机玩家接受邀请时，我以编程方式完成匹配以防止 MatchMakerViewController 出现在屏幕上。重新连接后，比赛将毫无问题地继续进行。

```
- (void)reinvitePlayer {
    GKMatchRequest *request = [[GKMatchRequest alloc] init];
    request.minPlayers = 2;
    request.maxPlayers = 2;
    request.playersToInvite = @[_opponent.playerID];
    request.inviteMessage = @"Reconnect?";
    request.inviteeResponseHandler = ^(NSString *playerID, GKInviteeResponse response)
    {
        DLog(@"Player response = %i.",response);
        // [self updateUIForPlayer: playerID accepted: (response == GKInviteeResponseAccepted)];
    };
    [[GKMatchmaker sharedMatchmaker] addPlayersToMatch:_match matchRequest:request completionHandler:^(NSError *error) {
        if (error != nil) {
            DLog(@"Unable to add player to match.");
        } else {
            DLog(@"Successfully reconnected");
            [[GKMatchmaker sharedMatchmaker] finishMatchmakingForMatch:_match];
        }
    }];
} 
```

# python - 从 Django 的自定义上传处理程序中获取文件上传的最终目的地

> ID：14299251
> 
> 赞同：0
> 
> 时间：2013-01-13T00:00:33.033
> 
> 标签：python, django, thumbnails

我目前通过挂钩 Filefield 所在模型的保存方法来为图像上传生成缩略图，但是由于多种原因，这真的很糟糕。但它确实有效，不像我之前对自定义上传处理程序的实验......

这让我觉得这是创建和更新缩略图的合适时机，但我试图找出上传文件最终将保存在哪里（因此我可以将缩略图保存到基于该路径的路径）。我可以很容易地获得临时文件夹路径，但这没用，我需要知道上传最终将上传到哪个文件夹，这可以从这里开始吗？

```
class Thumbnailer(TemporaryFileUploadHandler):
    def file_complete(self, file_size):
        self.file.seek(0)
        if not self.content_type is None and 'image' in self.content_type:
            newfile = StringIO()
            img = Image.open( self.file )
            thumb_size = 400,300
            img.thumbnail( thumb_size, Image.ANTIALIAS )
            img.save( os.path.join("THIS PATH IS WHAT I NEED", "thumbs", self.file_name, 'JPEG', quality=80 )
    return super(Thumbnailer, self).file_complete(file_size) 
```

ps：请不要通过推荐插件和混合插件来回答 - 我知道并忽略了所有这些，至少对于这个项目..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T03:44:34.367

文件上传处理程序不知道上传文件将存储在哪里，因此如果您真的必须坚持使用自定义上传处理程序，您将不得不对该路径进行硬编码。

否则，您可以：

*   自定义视图以获取 tumbnal（在第一次请求时生成缩略图，就像 Sorl 所做的那样）
*   将该路径存储在设置中
*   自定义文件字段

# c++ - 我的代码内存操作中的错误

> ID：14299252
> 
> 赞同：-2
> 
> 时间：2013-01-13T00:00:34.797
> 
> 标签：c++, memory-management

我不确定我是否可以在这里发布这些类型的问题，请让我知道您的想法，如有必要，我可以删除帖子。

我正在尝试一些 C 风格的代码，但我无法找到我的错误。任何人都可以看到错误吗？

注意：我知道内存泄漏很少（我稍后会修复）

```
#include <cstdlib>
#include <iostream>
#include <string.h>

using namespace std;

size_t returnSize(const char* s)
{
       string string(s);
       return string.size();
};

size_t returnSize(const int& i)
{
       return sizeof(i);
};

size_t returnSize(const char& c)
{
    return sizeof(char);   
};

template<typename T>
string Serialize(const T& t)
{
    T* pt = new T(t);
    char CasttoChar[returnSize(t)];
    for (int i =0 ;i<returnSize(t);i++)
    {
        CasttoChar[i] = (reinterpret_cast<const char*>(pt)[i]);
    }

    char* pX = (char*)malloc(sizeof(char) * (returnSize(t) + 1));

    // I save size in byte 0 
    pX[0] = (char)returnSize(t);

    //I save value in subsequent bytes.
    for (int i = 1 ; i<=returnSize(t) ; i++)
    { 
        pX[i] = CasttoChar[i];                         
    }

    string returnString(pX);
    free(pX);

    return returnString;     
};
template<typename T>
T DeSerialize(const string& s)
{
     const char * cstr = s.c_str();

     int sizeofData = (int)cstr[0];

    char* cp = (char*)malloc(sizeof(char) * sizeofData);
    for (int i =0 ;i<sizeofData;i++)
    { 
        cp[i] = cstr[i];                          
    }

    T* result= reinterpret_cast<T*>(cp);

    return *result;

}
int main(int argc, char *argv[])
{
    int x = 10;
    string s = Serialize(x);
    cout << DeSerialize<int>(s);
  /*    
    I need to see: 
    10 as output
    now I see 4
  */    
    system("PAUSE");
    return EXIT_SUCCESS;
} 
```

所以基本上我序列化数字 10，当我反序列化它时，我得到 4。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T00:06:33.003

您正在复制错误的字节：

```
for (int i =0 ;i<sizeofData;i++)
{ 
    cp[i] = cstr[i];                          
} 
```

由于 cstr[0] 是长度，它应该是：

```
for (int i =0 ;i<sizeofData;i++)
{ 
    cp[i] = cstr[i+1];                          
} 
```

[另外，您需要确保您的琴弦永远不会超过 128 的大小！]

哦，更进一步：将 a 传递给`char*`a`std::string`假定您的字符串是 C 风格的字符串。因此，如果您的字符串中有一个零字节，它将不起作用。拥有一个只有长度和动态分配的字符数组的数据结构可能会更好。

我也相信您会从类型中复制错误的字节`std::string`，因为您只是将字符串的地址转换为 char *，这是“object std::string”，而不是实际的字符串内容 - 您需要“c_str( ）“ 为了那个原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T00:07:28.790

错误来源之一：

```
string s = Serialize(x); 
```

应该

```
string s = Serialize<int>(x); 
```

# silverlight - 实体框架数据库优先和 RIA 服务导航属性

> ID：14299255
> 
> 赞同：0
> 
> 时间：2013-01-13T00:00:46.687
> 
> 标签：silverlight, entity-framework, wcf-ria-services

我继承了 Silverlight 和 RIA 服务项目，它使用 EF4、数据库优先 DAL。

过去，当我使用 RIA 服务（我唯一一次使用它）时，它使用的是 NHibernate，因此我们必须使用适当的 [Association] 和 [Include] 属性标记所有实体。这意味着我们的导航属性在 Silverlight 客户端应用程序中可用。

当时，我的印象是，如果我们使用实体框架而不是 NHibernate，生成的 EF 模型类将使用不完全 [Association] 和 [Include] 但等效的属性进行标记。

看来情况并非如此，我的模型的导航属性在 Silverlight 客户端中不可用。我是否需要使用元数据类并将 [Association] 属性手动添加到所有需要它们的类中？

谢谢，

本

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T13:46:59.800

我的导航属性不存在于客户端模型中，因为我正在使用的实体有一个元数据类，但它只包含一个属性。

导航属性未在元数据类中指定，因此在客户端上不可用。

这个故事的寓意是，你不能做“部分”元数据类。

# ruby-on-rails - Rails，有一个国家，有多个出口国家？

> ID：14299259
> 
> 赞同：0
> 
> 时间：2013-01-13T00:01:41.380
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我有一个**列表**模型和一个**国家**模型。每个列表都有一个国家（作为其地址详细信息的一部分），但每个列表也可以有多个 ExportCountries（这只是列表所有者出口到的国家/地区）。

`A listing has_one country`

`A Country has_many listings`

`A listing has_and_belongs_to_many ExportCountries`

`An ExportCountry has_and_belongs_to_many Listings`

如果我有两个单独的模型，我可能会这样做：

```
class Listing < ActiveRecord::Base
  belongs_to :country
  has_and_belongs_to_many :export_countries  
end

class Country < ActiveRecord::Base
  has_many: listings
end

class ExportCountry < ActiveRecord::Base
  has_and_belongs_to_many :listings
end 
```

但是我怎么能只用一个 Country 模型来做到这一点 - 因为否则 ExportCountry 将拥有完全相同的记录，这些记录不是很干燥，而且看起来不像 Rails。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T18:16:59.883

您想要的是两个独立的关联，它们具有与最终结果相同的类。您只需要在关联中指定它们，以便它可以正确解释它们，如下所示：

```
class Country < ActiveRecord::Base
  has_many :address_listings, class_name: "Listing", :foreign_key => "address_country_id"
  has_and_belongs_to_many :export_listings, class_name: "Listing", :join_table => :export_countries_listings
end

class Listing < ActiveRecord::Base
  belongs_to :address_country, class_name: "Country"
  has_and_belongs_to_many :export_countries, class_name: "Country", :join_table => :export_countries_listings
end 
```

address_country_id 应该是 Listings 表中的一列。

以及出口国家的连接表

```
create_table :export_countries_listings, :id => false do |t|
  t.integer :country_id
  t.integer :listing_id
end 
```

这将为地址 Country 设置一个引用，并为 export_countries 设置多个引用。

# javascript - 使用缓存将 JsonData 从服务器获取到另一个函数

> ID：14299267
> 
> 赞同：0
> 
> 时间：2013-01-13T00:02:33.437
> 
> 标签：javascript, jquery, asp.net-mvc, json

我正在尝试使用一个下拉插件插件，该插件将 JSON 数据用于选择的选项值。 [http://designwithpc.com/Plugins/ddSlick](http://designwithpc.com/Plugins/ddSlick)

```
$('#myDropdown').ddslick({
    data:ddData,
    width:300,
    selectText: "Select your preferred social network",
    imagePosition:"right",
    onSelected: function(selectedData){
        //callback function: do something with selectedData;
    }   
}); 
```

这里 ddData 是包含下拉菜单数据的 JSON 变量。我正在尝试使用 jQuery.getJSON() 从服务器中提取数据，我遇到了两个问题。

1.  **如何缓存数据？**
2.  **如何从服务器获取 jsondata 并直接输入到上面的这个函数中？**

通过查看 jQuery.getJSON() 的示例，它执行回调以使用内部数据。所以我不确定如何直接通过结果。

我正在寻找类似下面的东西，但它不起作用。

```
$('#myDropdown').ddslick({
    data:$.getJSON('ajax/test.json'),
    width:300,
    selectText: "Select your preferred social network",
    imagePosition:"right",
    onSelected: function(selectedData){
        //callback function: do something with selectedData;
    }   
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T00:26:37.943

如果要将数据对象传递给 ddslick 参数对象，则必须在`getJSON`回调函数中工作，因为您可以看到[jQuery doc API](http://api.jquery.com/jQuery.getJSON/)

```
$.getJSON('ajax/test.json', function(data) {
  var window.myCachedData = data;
});

$('#myDropdown').ddslick({
    data: windows.myCachedData || {},
    width:300,
    selectText: "Select your preferred social network",
    imagePosition:"right",
    onSelected: function(selectedData){
        //callback function: do something with selectedData;
    }   
}); 
```

# syntax-highlighting - 语法高亮的标准颜色

> ID：14299278
> 
> 赞同：5
> 
> 时间：2013-01-13T00:04:02.390
> 
> 标签：syntax-highlighting, color-scheme

我正在定制我的 vim 语法突出显示（请参阅[此处](https://github.com/johndgiese/dotvim/blob/master/colors/betterblack.vim)了解我目前所拥有的内容），我想知道：**是否有任何语法颜色标准？** 例如，字符串总是红色，注释总是橙色吗？如果有人知道这样的标准，甚至对特定的语法组有建议，那就太好了！十六进制代码会更好！

# java - 如何去除底部多余的空间

> ID：14299286
> 
> 赞同：2
> 
> 时间：2013-01-13T00:05:32.123
> 
> 标签：java, swing, jbutton, grid-layout, flowlayout

我正在创建一个简单的 Java Swing 应用程序。构建设置是 3 行 1 列的网格布局。在顶行内部是另一个具有两列的网格布局，在每一列内部，另一个网格布局将其分成 2 行。中间一排也是如此。底行只是一个流布局。

![在此处输入图像描述](../Images/de98d3d3f11ee1bf13bb037dfea41b7c.png)

黑色 = 3 行，蓝色 = 将行拆分为 2 列，红色 = 将两列拆分为 2 行。这是输出的实际图片：

![在此处输入图像描述](../Images/588d5a3c62db19af9bb7221d366b8504.png)

```
JPanel contentPane = new JPanel(new GridLayout(3,1));
JPanel botPane = new JPanel(new FlowLayout(FlowLayout.RIGHT)); 
```

我的问题是，如何使按钮的底行没有巨大的间隙，而是在按钮的底部结束？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-13T00:37:11.537

使用[`BoxLayout`](http://docs.oracle.com/javase/tutorial/uiswing/layout/box.html), 而不是`GridLayout`, 作为封闭面板。可以在[此处](http://docs.oracle.com/javase/tutorial/uiswing/layout/box.html#eg)和[此处](https://stackoverflow.com/a/3175280/230513)找到示例。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-13T01:22:31.470

将 contentPane 从 (3,1) 更改为 (2,1)

将 contentPane 添加到 BorderLayout.CENTER 的框架

将 botPane 添加到 BorderLayout.SOUTH 的框架

然后 frame.pack()

# c# - 通过c#编辑资源字典样式

> ID：14299287
> 
> 赞同：0
> 
> 时间：2013-01-13T00:05:34.630
> 
> 标签：c#, windows-8, styles, microsoft-metro

我正在设计一个具有多个级别的 Windows 8 应用程序。每个级别都有许多按钮，每个按钮的样式为“myStyle”。

```
<Style x:Key="myStyle" TargetType="Button">
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="Button">
                <Ellipse StrokeThickness="4" Width="55" Height="55" Stroke="Aquamarine">
                        <Ellipse.Fill>
                            <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
                                <GradientStop Color="GreenYellow"/>
                                <GradientStop Color="#FF1E46FB" Offset=".5"/>
                                <GradientStop Color="GreenYellow" Offset="1"/>
                            </LinearGradientBrush>
                        </Ellipse.Fill>
                    </Ellipse>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

我想要做的是操纵c#中的代码来改变每个级别中所有按钮的笔触颜色。即 Level1 按钮有一个红色的笔划，Level2 按钮有一个绿色的笔划等...目前我默认将笔划设置为 Aquamarine。

我想知道是否有人可以就如何做到这一点给我任何建议。非常感激任何的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T01:16:22.957

使用您的建议 Jim 解决了我的问题。在 myStyle 中将模板绑定应用到我的椭圆笔划：

```
<Style x:Key="myStyle" TargetType="Button">
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Grid>
                            <Ellipse Stroke="{TemplateBinding Foreground}" RenderTransformOrigin="0.5,0.5" StrokeThickness="3" Width="55" Height="55" Margin="2.5">
                                <Ellipse.Fill>
                                    <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
                                        <GradientStop Color="White"/>
                                        <GradientStop Color="White" Offset="1"/>
                                        <GradientStop Color="#FF9FA4A4" Offset="0.5"/>
                                    </LinearGradientBrush>
                                </Ellipse.Fill>
                            </Ellipse>
                        </Grid>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style> 
```

然后使用 foreach 循环在关卡加载时设置我所有按钮（钉）的前景。

```
foreach (Control p in Globals.allPegList)
        {
            p.Foreground = new SolidColorBrush(Globals.color1);
        } 
```

谢谢您的帮助！

ps: Globals 只是一个命名空间，我在其中声明了一些全局变量。color1 是一个颜色变量。allPegList 是我在每个级别中的所有按钮（钉）的列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T04:00:27.290

鉴于评论，我认为这应该适合你。在您的模板中，将其用于椭圆，而不是您现在拥有的 - 其他一切都相同：

```
<Ellipse StrokeThickness="4" Width="55" Height="55" Stroke="{TemplateBinding BorderBrush}"> 
```

然后，您可以在将按钮包含在 UI 中时单独为按钮分配颜色，例如：

```
 <Button x:Name="b1" Style="{StaticResource myStyle}" BorderBrush="Red">Level 1 Button</Button>
    <Button x:Name="b2" Style="{StaticResource myStyle}" BorderBrush="Green">Level 2 Button</Button> 
```

或者，您可以对 Ellipse 进行相同的更改，并在主要样式的基础上添加其他样式，例如：

```
 <Style x:Key="Level1" BasedOn="{StaticResource myStyle}" TargetType="Button">
        <Setter Property="BorderBrush" Value="Red" />
    </Style>

    <Style x:Key="Level2" BasedOn="{StaticResource myStyle}" TargetType="Button">
        <Setter Property="BorderBrush" Value="Green" />
    </Style> 
```

然后你的按钮看起来像：

```
 <Button x:Name="b1" Style="{StaticResource Level1}">Level 1 Button</Button>
   <Button x:Name="b2" Style="{StaticResource Level2}">Level 2 Button</Button> 
```

# android - 在 Nexus 4 上进行计算成本高昂的数组处理时出现周期性性能峰值的原因是什么？

> ID：14299288
> 
> 赞同：4
> 
> 时间：2013-01-13T00:05:45.047
> 
> 标签：android, multithreading, performance, pixel-shader, nexus-4

我是线程新手（不要因为我在下面的实现而杀了我：），我需要在单独的线程上进行多次像素模糊传递（见下文）。这不是盒子模糊的最有效实现（它来自[Gaussian Filter 而不使用 ConvolveOp](https://stackoverflow.com/questions/10150739/gaussian-filter-without-using-convolveop)），但性能峰值不会出现在 Nexus 7 平板电脑上，但它们确实会出现在 Nexus 4 手机上。

我已经发布了我的测试样本（在 Android 4.2 上运行 - 见下文）。

我不认为这是由 GC 破坏内存引起的（它与尖峰不符）。

我认为这可能与缓存位置或硬件内存抖动有关 - 但我不确定。

什么会导致尖峰？有时它们是突然发作的——例如 50% 的峰值。有时它们起效缓慢 - 例如峰值单调增加/减少，峰值如下 -> 5%、10%、20%、10%、5%。

在进行繁重的数组处理时，如何阻止它们发生？

这不会发生在我也测试过的 Nexus 7 平板电脑上（见下面的结果）

附带问题：正确睡眠和重新启动线程的最佳方法是什么（线程新手）？

* * *

## MainActivity.java

* * *

```
package com.example.test;

import android.os.Bundle;
import android.app.Activity;

public class MainActivity extends Activity {

    private MainThread thread;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        thread = new MainThread();

        thread.setRunning(true);
        thread.start();

        setContentView(R.layout.activity_main);
    }

    @Override
    protected void onResume() {

        super.onResume();
        thread.setRunning(true);

    }

    @Override
    protected void onPause() {

        super.onPause();
        thread.setRunning(false);

    }

} 
```

* * *

## 主线程.java

* * *

```
package com.example.test;

import android.util.Log;

public class MainThread extends Thread {

    int[] pixels;
    int kernel_rows = 2;
    int kernel_cols = 2;
    int width = 512;
    int height = 512;

    @Override
    public void run() {

        while (running) {

            long start = System.currentTimeMillis();

            for (int row = kernel_rows / 2; row < height - kernel_rows / 2; row++) {
                for (int col = kernel_cols / 2; col < width - kernel_cols / 2; col++) {

                    float pixel = 0;

                    // iterate over each pixel in the kernel
                    for (int row_offset = 0; row_offset < kernel_rows; row_offset++) {
                        for (int col_offset = 0; col_offset < kernel_cols; col_offset++) {

                            // subtract by half the kernel size to center the
                            // kernel
                            // on the pixel in question
                            final int row_index = row + row_offset
                                    - kernel_rows / 2;
                            final int col_index = col + col_offset
                                    - kernel_cols / 2;

                            pixel += pixels[row_index * width + col_index] * 1.0f / 4.0f;

                        }
                    }

                    pixels[row * width + col] = (int) pixel;

                }

            }

            long stop = System.currentTimeMillis();

            long delta = stop - start;

            Log.d("DELTA", Long.toString(delta));

        }

    }

    private boolean running;

    public void setRunning(boolean running) {

        this.pixels = new int[512 * 512];
        this.running = running;

    }

} 
```

* * *

## 日志

* * *

**Nexus 4 手机（毫秒）：**

```
01-13 10:56:05.663: D/DELTA(13507): 76
01-13 10:56:05.773: D/DELTA(13507): 107
01-13 10:56:05.843: D/DELTA(13507): 77
01-13 10:56:05.923: D/DELTA(13507): 75
01-13 10:56:06.053: D/DELTA(13507): 127
01-13 10:56:06.133: D/DELTA(13507): 78
01-13 10:56:06.213: D/DELTA(13507): 81
01-13 10:56:06.293: D/DELTA(13507): 80
01-13 10:56:06.353: D/DELTA(13507): 77
01-13 10:56:06.433: D/DELTA(13507): 79
01-13 10:56:06.513: D/DELTA(13507): 79
01-13 10:56:06.624: D/DELTA(13507): 106
01-13 10:56:06.694: D/DELTA(13507): 76 
```

**Nexus 7 平板电脑（毫秒）：**

```
01-13 11:01:03.283: D/DELTA(3909): 84
01-13 11:01:03.373: D/DELTA(3909): 85
01-13 11:01:03.453: D/DELTA(3909): 85
01-13 11:01:03.543: D/DELTA(3909): 84
01-13 11:01:03.623: D/DELTA(3909): 85
01-13 11:01:03.703: D/DELTA(3909): 84
01-13 11:01:03.793: D/DELTA(3909): 85
01-13 11:01:03.873: D/DELTA(3909): 84
01-13 11:01:03.963: D/DELTA(3909): 85
01-13 11:01:04.043: D/DELTA(3909): 84 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T02:46:35.967

我认为我可能在一定程度上减轻了对 Nexus 4 的这种影响。计算一致性仍然存在一些可变性，但它是可以忍受的——我认为——在线程启动/关闭之外看不到太多巨大的峰值。我已经使用 Android NDK 和 c p_threads 来生成一个本机线程，该线程主要由 Java 单独处理（或者我被告知），直到前台应用程序被更改或关闭。

这是代码：

* * *

## MainActivity.java

* * *

```
package com.example.test;

import android.os.Bundle;
import android.app.Activity;

public class MainActivity extends Activity {

    static {

        System.loadLibrary("native");

    }

    private native void init();

    @Override
    protected void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);

        // Initializes and spawns native thread
        init();

        setContentView(R.layout.activity_main);

    }

} 
```

* * *

## 本机.c

* * *

（应该放在Android项目根目录下的jni文件夹中）

```
#include <time.h>
#include <pthread.h>
#include <jni.h>
#include <android/log.h>

#define APPNAME "DELTA"

int* pixels;
int kernel_rows = 2;
int kernel_cols = 2;
int width = 60;
int height = 39;

int running = 1;

// from android samples
/* return current time in milliseconds */
static double now_ms(void) {

    struct timespec res;
    clock_gettime(CLOCK_REALTIME, &res);
    return 1000.0 * res.tv_sec + (double) res.tv_nsec / 1e6;

}

// initialize thread/begin it
jint Java_com_example_testa_MainActivity_init(JNIEnv* env, jobject javaThis) {

    int i1 = 1;

    pthread_t thread;
    void *run();

    pthread_create(&thread, NULL, run, &i1);
    pthread_join(thread, NULL);

    return 0;

}

// thread function
void *run(int *x) {

    // init pixels within thread
    pixels = (int*) malloc(sizeof(int) * width * height);

    // loop until stopped - java won't interfere
    // unless closed/switch application (or so I'm told)
    while (running) {

        double start = now_ms();

        int row, col, row_offset, col_offset;

        for (row = kernel_rows / 2; row < height - kernel_rows / 2; row++) {

            for (col = kernel_cols / 2; col < width - kernel_cols / 2; col++) {

                float pixel = 0;

                // iterate over each pixel in the kernel
                for (row_offset = 0; row_offset < kernel_rows; row_offset++) {
                    for (col_offset = 0; col_offset < kernel_cols;
                            col_offset++) {

                        // subtract by half the kernel size to center the
                        // kernel
                        // on the pixel in question

                        int row_index = row + row_offset - kernel_rows / 2;
                        int col_index = col + col_offset - kernel_cols / 2;

                        pixel += pixels[row_index * width + col_index] * 1.0f
                                / 4.0f;

                    }

                }

                pixels[row * width + col] = (int) pixel;

            }

        }

        double end = now_ms();

        double delta = end - start;

        __android_log_print(ANDROID_LOG_VERBOSE, APPNAME, "%f", delta);

    }

    pthread_exit(0);

} 
```

* * *

## 安卓.mk

* * *

（应该放在Android项目根目录下的jni文件夹中）

```
LOCAL_PATH := $(call my-dir)
MY_PATH := $(LOCAL_PATH)
include $(call all-subdir-makefiles)

include $(CLEAR_VARS)

LOCAL_PATH := $(MY_PATH)

LOCAL_MODULE    := native
LOCAL_LDLIBS := -llog
LOCAL_SRC_FILES := native.c

include $(BUILD_SHARED_LIBRARY) 
```

* * *

## 概括

* * *

**将代码成本降低了约 20-30%，并将可变性降低了一个数量级。**

该代码是通过`ndk-build`在根文件夹（可在此处找到：http: [//developer.android.com/tools/sdk/ndk/index.html](http://developer.android.com/tools/sdk/ndk/index.html)）中执行 Android 提供的 NDK 库中的命令来编译的。

* * *

## 结果

* * *

**连结 4 (毫秒):**

```
01-14 13:41:21.132: V/DELTA(23679): 56.554199
01-14 13:41:21.192: V/DELTA(23679): 58.568604
01-14 13:41:21.252: V/DELTA(23679): 59.484131
01-14 13:41:21.302: V/DELTA(23679): 56.768066
01-14 13:41:21.362: V/DELTA(23679): 54.692383
01-14 13:41:21.412: V/DELTA(23679): 51.823730
01-14 13:41:21.472: V/DELTA(23679): 55.668945
01-14 13:41:21.522: V/DELTA(23679): 56.920654
01-14 13:41:21.582: V/DELTA(23679): 56.371094
01-14 13:41:21.642: V/DELTA(23679): 58.507568
01-14 13:41:21.702: V/DELTA(23679): 59.697754
01-14 13:41:21.752: V/DELTA(23679): 53.990723
01-14 13:41:21.812: V/DELTA(23679): 55.669189 
```

**连结 7 (毫秒):**

```
01-14 13:41:25.685: V/DELTA(2916): 65.867920
01-14 13:41:25.745: V/DELTA(2916): 65.986816
01-14 13:41:25.815: V/DELTA(2916): 66.685059
01-14 13:41:25.885: V/DELTA(2916): 67.033936
01-14 13:41:25.945: V/DELTA(2916): 65.703857
01-14 13:41:26.015: V/DELTA(2916): 66.653076
01-14 13:41:26.085: V/DELTA(2916): 66.922119
01-14 13:41:26.145: V/DELTA(2916): 67.030029
01-14 13:41:26.215: V/DELTA(2916): 67.014893
01-14 13:41:26.285: V/DELTA(2916): 67.034912
01-14 13:41:26.345: V/DELTA(2916): 67.089844
01-14 13:41:26.415: V/DELTA(2916): 65.860107
01-14 13:41:26.485: V/DELTA(2916): 65.642090
01-14 13:41:26.545: V/DELTA(2916): 65.574951
01-14 13:41:26.615: V/DELTA(2916): 65.991943 
```

# jquery - 通过 javascript 动态生成 Google +1 徽章

> ID：14299290
> 
> 赞同：1
> 
> 时间：2013-01-13T00:06:04.703
> 
> 标签：jquery

我需要通过 jquery append 方法生成 div，然后将带有点赞数的 google +1 徽章添加到这个 div 中。在我找到的每个来源中，这个 div 已经在 html 中生成，但我需要通过 jquery 动态生成它。

我试过这段代码（liveReady是jquery插件，它结合了文档准备方法和jquery.live方法，.g-plusone是div，它是通过jquery append创建的。）。但是函数 $.getScript 以错误结尾（未捕获的类型错误：无法读取未定义的属性“重定向”）

```
$('#lbExif').append('<div class="g-plusone"></div>');    
$.liveReady('.g-plusone',function addG(){
        $(".g-plusone").html("<g:plusone width=\"55\" height=\"20\" href=\"http://blog.2k1y.com\"></g:plusone>");
        $.getScript("https://apis.google.com/js/plusone.js");
    }); 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T00:13:41.040

以下代码将使用 javascript 异步动态生成按钮，而无需等待页面完成加载：

```
<script type="text/javascript">
  (function() {
    var po = document.createElement('script');
    po.type = 'text/javascript';
    po.async = true;

    po.src = 'https://apis.google.com/js/plusone.js';
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(po, s);
  })();
</script> 
```

只需使用您选择的库（即：jQuery）随时执行它

如果要设置脚本标记参数，请使用以下语法：

```
 window.___gcfg = {
    lang: 'zh-CN',
    parsetags: 'onload'
  }; 
```

以下 URL 中包含一个完整示例：

[https://developers.google.com/+/plugins/+1button/#example-async-load](https://developers.google.com/+/plugins/+1button/#example-async-load)

# c# - 更新词参考：Microsoft.Office.Interop.Word

> ID：14299292
> 
> 赞同：1
> 
> 时间：2013-01-13T00:06:12.700
> 
> 标签：c#, reference, ms-word, bookmarks

**你好，**

我正在使用 Microsoft.Office.Interop.Word 库将文本自动填充到 Word 模板表单 (.dotx) 中。

当我用文本填写表格时，我使用这样的 MS Word 书签：

```
object oBookMark = "Bookmark-To-Find";
doc.FormFields.get_Item(ref oBookMark).Result = Value-To-Insert; 
```

这没有任何问题，**问题是当我向书签添加 MS Word 引用时。**

参考就在那里，所以我不需要在同一个文档中填写相同的信息 100 次。

创建文档时需要手动更新 MS Word 参考。有没有什么办法解决这一问题？

**问题：** 我可以使用 c# 代码更新所有引用吗？有没有更好的方法来做这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T12:30:44.673

您需要更新文档中的所有字段：

```
doc.Fields.Update(); 
```

`doc.Fields`您还可以仅通过调用集合中各个字段的 Update() 方法来更新特定字段。

# intervals - 贝叶斯区间显着性检验

> ID：14299295
> 
> 赞同：0
> 
> 时间：2013-01-13T00:06:58.607
> 
> 标签：intervals, bayesian

据我所知，如果一个参数的置信区间覆盖 0，那么这个参数在这个水平上被认为是统计上不显着的。我想知道这是否是贝叶斯区间的情况。换句话说，如果一个参数的贝叶斯区间覆盖了0，那么这个参数可以说是统计上不显着的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T12:52:47.910

在贝叶斯框架中，您谈论的是后验概率而不是重要性。因此，如果一个参数的等尾区间以正值为中心但仍覆盖 0，那么您可以说该参数实际上不是正值的概率超过 2.5%。

# playframework - 在网络文件系统上使用 Play 框架自动重新加载

> ID：14299300
> 
> 赞同：3
> 
> 时间：2013-01-13T00:07:34.157
> 
> 标签：playframework, playframework-2.0, playframework-2.1

我在 VirtualBox VM 上运行 Play 框架应用程序，项目源代码位于与主机系统共享的目录中。框架的自动重新加载功能不起作用。

这（可能）是由于 JNotify 无法检测到源文件的更改引起的，因为文件系统不是本地的。NFS 和 vboxsf 都存在同样的问题。

有没有办法解决？

Play 框架具有内置的回退机制，用于检测 JNotify 不可用的系统上的更改。是否可以以某种方式强制选择回退机制？（性能损失是可以接受的。）

还有其他解决方案吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T20:03:16.467

我在这里遇到了同样的情况。在 Play/SBT 控制台中切换到`~run`（而不是`run`），绕过了 JNotify（根据 Josh Suereth 的说法），似乎为我解决了这个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T22:49:43.350

回答我自己的问题：似乎没有一种直接的方法可以实现这一点，而且看起来这种功能在不久的将来不会在网络文件系统中可用。

破解 Play 框架的 sbt 插件并使 PlayReloader trait 表现得好像 JNotify 不可用是相当简单的，但至少可以说这是一个肮脏的破解。

最好的解决方案似乎是将 Play 应用程序从 VM 中移出并在主机上运行，​​即使完全自动配置的开发环境的一些好处丢失了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-08-04T17:23:27.313

根据 James Roper 的说法，如果您使用的是 play 2.3.2 或更高版本，您可以将以下内容添加到您的 build.sbt 中：

```
PlayKeys.playWatchService := play.sbtplugin.run.PlayWatchService.sbt(pollInterval.value) 
```

这是James Roper 对此问题的完整回应[的链接](https://github.com/playframework/playframework/issues/3246)。

# c# - 无法在设计视图中看到背景图像

> ID：14299301
> 
> 赞同：1
> 
> 时间：2013-01-13T00:07:58.807
> 
> 标签：c#, visual-studio-2010

我正在 Visual Studio C# 中工作一个学校项目。我在设计视图中为每个页面添加背景图像；但在运行时我看不到这些图像。谁能帮帮我？

# c# - image_Tap(int x, int y) - 可以在 Windows Phone 应用程序中使用吗？

> ID：14299303
> 
> 赞同：0
> 
> 时间：2013-01-13T00:08:22.207
> 
> 标签：c#, windows-phone-7, methods

我有大约 100 张图片。是否可以在每个图像中使用不同的`image_Tap(int x,int y)`方法`x`？`y`我想使用`image_Tap(0,0)`for `image1`，`image_Tap(0,1)`for`image2`等...我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T02:21:52.980

我找到了更好的方法来做到这一点。我称我的图像为：`image00, image01, ... image98, image99`. 所有这些图像只有一种`image_Tap`方法。在这种方法中，我可以从这个字符串`string name = ((Image)sender).Name;`中获取我的`x`和。`y`

# c# - 有没有办法限制允许继承我的 C# 类的类型？

> ID：14299304
> 
> 赞同：0
> 
> 时间：2013-01-13T00:08:59.000
> 
> 标签：c#, wpf, inheritance

为了我个人的熏陶——有什么办法吗？我正在实现一个`Imageable`类，该类提供一个`ToWmf()`将 WPF 对象输出到矢量图形的函数。但这仅对 WPF 类型有意义`Visual`，因此成像操作的组件之一需要一个带有 type 的参数`Visual`，我打算将其设置为`this`。

我找到了各种 C# 参数约束的示例，但没有找到约束继承类类型的示例。目前我正在使用一个静态`ImagingUtil.ToWmf()`类，但这只是一个完全没有答案还是有其他方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T00:20:39.243

这个问题意味着`Imageable`对象也将同时是 a `Visual`（否则你将如何传递`this`给需要 a 的东西`Visual`？）。

这是不可能的，除非这两种类型中的一种继承自另一种，并且由于`Visual`不受您的控制，因此`Imageable`必须是`Visual`. 在这种情况下，完全没有问题。

您很可能想要做的是定义一个`IImageable`接口，然后实现一个扩展方法，如下所示：

```
public static void ToWmf<T>(this T imageable) where T : Visual, IImageable
{
    // ....
} 
```

这样，任何（并且只有一个）用户定义的类派生自`Visual`并同时实现`IImageable`都可以由`ToWmf`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T00:13:07.033

您可以对泛型使用约束。有关详细信息，请参阅此处的[MSDN 文章。](http://msdn.microsoft.com/en-us/library/d5x73970.aspx)

```
public interface IImageable<T> where T : Visual
{
    MyReturnType ToWmf();
}

public class MyImageable : IImageable<XXX> // does not work if XXX is not a Visual / inherited from Visual
{
   //implements MyReturnType ToWmf();
} 
```

然后只需注入 IImageable 作为参数。

# mysql - MySQL Select and Order DateTime Ascending but have expired TIMEs at the bottom of the Query

> ID：14299312
> 
> 赞同：0
> 
> 时间：2013-01-13T00:09:57.590
> 
> 标签：mysql, database

我需要弄清楚如何让查询顺序中的所有日期时间升序，但将过期的日期时间放在未过期的日期时间下方。

```
"select * from users where date > now()" 
```

# xcode - 使用 UITableView 自动滚动

> ID：14299315
> 
> 赞同：0
> 
> 时间：2013-01-13T00:10:52.153
> 
> 标签：xcode, ipad, uitableview

我正在制作一个 ipad 应用程序。在应用程序中，我有一个 UITableView，其中包含用户可以输入的自定义单元格。唯一的问题是，当您按下下方的单元格之一时，键盘会出现并挡住单元格，因此您看不到它。我希望这样当您按下键盘上方的单元格时， UITableView 向上滚动并一遍又一遍地显示 1 个单元格，以便您可以看到您正在输入的内容。谢谢。

图片：http: [//i.stack.imgur.com/Kn4CT.png](http://i.stack.imgur.com/Kn4CT.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T00:29:56.467

假设您正在输入 uitextfield，请实现 textfield 委托方法。

显示键盘时计算键盘高度。

编辑：

这就是我解决问题的方法：

用唯一的数字标记每个提交的文本（保留一个 baseConstantInteger，确保您的标签绝对唯一）。

baseConstant 可以是任何东西，让我们假设`baseConstantInteger = 500;`

对于`cellForRowAtIndexPath`方法中的每个单元格，在您的自定义单元格中设置

```
textField.tag = baseConstantInteger+indexPath.row 
```

接着

```
- (void)textFieldDidBeginEditing:(UITextField *)textField
{   
    int clickedRow = textField.tag - baseConstantInteger;
    [self.theTableView scrollToRowAtIndexPath:(indexPath based on clickedRow) atScrollPosition:UITableViewScrollPositionMiddle animated:NO];
    [UIView animateWithDuration:0.4
                     animations:^{
                         theTableView.frame = CGRectMake(theTableView.frame.origin, theTableView.contentSize.width, theTableView.frame.size.height-keyBoardHeight);
                     }
     ];
} 
```

返回时（与 didEndEditing 类似）

```
- (BOOL)textFieldShouldReturn:(UITextField *)textField {
    [UIView animateWithDuration:0.2
                     animations:^{
                         theTableView.frame = CGRectMake(theTableView.frame.origin, theTableView.contentSize.width, theTableView.frame.size.height+keyBoardHeight);
                     }
     ];
    [textField resignFirstResponder];
    return NO/YES;
} 
```

ps：baseConstantInteger 只是为了保证您的标签安全。这并不是绝对需要的。

# regex - sublimetext 中的正则表达式以查找特定的 html 元素

> ID：14299326
> 
> 赞同：0
> 
> 时间：2013-01-13T00:12:26.257
> 
> 标签：regex, replace, sublimetext

我想在 sublimetext 中使用正则表达式来查找`&nbsp;`in`<td class="danish">&nbsp;</td>`

谁能帮我解决这个问题？

我之前在其他地方使用过以下内容：(?<=danish/).+(?=.swf)，但是标签括号给我带来了问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-13T00:38:37.903

在[正则表达式的 Sublime Text 非官方文档中，](http://www.boost.org/doc/libs/1_47_0/libs/regex/doc/html/boost_regex/syntax/perl_syntax.html)它表明

> Sublime Text对正则表达式使用[**Boost 语法。**](http://www.boost.org/doc/libs/1_47_0/libs/regex/doc/html/boost_regex/syntax/perl_syntax.html)

因此，如果您确定您的`<td>`节点除了您提供的数据之外没有任何数据，您可以像下面的正则表达式一样使用积极的前瞻和后瞻。

```
(?<=\<td class="danish">).*?(&nbsp;)+.*?(?=<\/td>) 
```

# jquery-mobile - jQuery Mobile 对我的希伯来语 URL 进行编码

> ID：14299327
> 
> 赞同：0
> 
> 时间：2013-01-13T00:12:30.180
> 
> 标签：jquery-mobile, unicode, encode, hebrew

我有一个用希伯来语编写的网站，其中包含一些带有希伯来语单词的 URL，并且我正在使用带有 RTL 插件的 jQuery Mobile。

我有一个问题：jQuery 插件坚持将我的希伯来语 URL 编码为：%E2%D5%D2%EA-%EA%E4%D5%D7%D9%DD。

这造成了很多问题，因为我的 CMS 无法弄清楚它们，然后我无法使用像回到历史这样的技术。因此有没有办法对这些 URL 进行解码，或者甚至更好，让 jQuery 默认不对它们进行编码？

谢谢你。

# php - PDO 语句失败

> ID：14299330
> 
> 赞同：-2
> 
> 时间：2013-01-13T00:12:59.760
> 
> 标签：php, mysql, pdo

我试图让这个语句起作用，但我猜它一定有一个错误，因为它根本不会产生任何结果或错误。有更多经验和新鲜眼光的人可以看一下我是否有问题。代码如下：

```
$conn = new PDO('mysql:host=localhost;dbname=timecard', 'username', 'password');
    $conn->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
    $stmt = $conn->prepare('UPDATE `timeRecords` SET `jobDescription`= :jobDescription, `equipType`= :equipType, `unitNumber`= :unitNumber, `unitHours`= :unitHours) 
                            WHERE `employeeID`= :employeeID AND `date`= :dateToday');

    $stmt->execute(array(':employeeID' => $_SESSION['employeeID'], ':dateToday' => $dateToday, ':jobDescription' => $jobDescription,
                         ':equipType' => $equipType, ':unitNumber' => $unitNumber, ':unitHours' => $unitHours)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T00:24:48.527

`)`在原始代码中发现错误我在找到之前留下了一个错误，`WHERE`这要归功于使用以下`try/catch block`更新和工作代码的建议：

```
try{
$conn = new PDO('mysql:host=localhost;dbname=timecard', 'username', 'password');
$conn->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
$stmt = $conn->prepare('UPDATE `timeRecords` SET `jobDescription`= :jobDescription, `equipType`= :equipType, `unitNumber`= :unitNumber, `unitHours`= :unitHours 
                        WHERE `employeeID`= :employeeID AND `date`= :dateToday');

$stmt->execute(array(':employeeID' => $_SESSION['employeeID'], ':dateToday' => $dateToday, ':jobDescription' => $jobDescription,
                     ':equipType' => $equipType, ':unitNumber' => $unitNumber, ':unitHours' => $unitHours));
} catch(PDOException $e){
    echo'ERROR: ' . $e->getMessage();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T00:49:14.187

很高兴您找到了解决方案`try`。

我是否还可以补充一点，在编码您的网站时添加标准错误报告非常有帮助。在编写脚本时，将其添加到顶部：

```
<?php
error_reporting(E_ALL);
ini_set('display_errors', 'On');
?> 
```

并在使页面生效之前将其删除。这使我免于数百个错误。

您甚至可以更进一步，为您的 IP 地址打开错误报告（假设您的 IP 是静态的）。保留 IP 允许/限制通常是一种不好的做法，因此您应该在完成编辑后将其删除。

```
//Change to match your IP address
if($_SERVER['REMOTE_ADDR']=="123.456.78.9"){
error_reporting(E_ALL);
ini_set('display_errors', 'On');
} 
```

# android - Android 编程：如何在每次按下屏幕上的按钮时在屏幕上添加一个文本视图？

> ID：14299331
> 
> 赞同：0
> 
> 时间：2013-01-13T00:13:04.843
> 
> 标签：android, button, textview

我是 android 编程新手，想知道是否有人可以帮我解决这个问题：每次按下屏幕上的按钮时，如何在屏幕上添加一个 textView？

该按钮已从 XML 生成。但是，textview 需要在运行时生成。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T00:33:52.733

您可以通过执行这样的过程在运行时生成任何视图。

```
LinearLayout ll = (LinearLayout) LayoutInflater.from(this).inflate(R.layout.common_list)
TextView tv = new TextView(this);
tv.setLayoutParams(new LinearLayout.LayoutParams(LayoutParams.FILL_PARENT,LayoutParams.WRAP_CONTENT));
tv.setText("sample text");
ll.addView(tv);

setContentView(ll); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T07:20:43.517

这对我有用：

```
ViewGroup layout = (ViewGroup) findViewById(R.id.your_layout_id);
TextView tv = new TextView(this);
tv.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));
tv.setText("Added tv");
layout.addView(tv); 
```

# android - 苦苦挣扎于“缺少样式。是否为此布局选择了正确的主题？” 问题

> ID：14299333
> 
> 赞同：5
> 
> 时间：2013-01-13T00:13:15.217
> 
> 标签：android, eclipse, adt, android-sdk-tools

![我非常不喜欢的问题。](../Images/d909ad70fe7f07dddb4ead0e0e6a43f5.png)所以我今天大部分时间都在尝试解决这个问题......我选择的任何设备/分辨率/任何东西都显示不正确，并且看起来样式没有加载......

> ***缺少样式。是否为此布局选择了正确的主题？***
> 
> *使用布局上方的主题组合框选择不同的布局，或修复主题样式引用。找不到当前主题的主题资源*

我试过：

*   重新下载并重新安装 ADT
*   与eclipse插件相同
*   几乎尝试了下拉列表中的所有选项组合 - 没有一个有效
*   尝试重新添加项目（从磁盘，从远程存储库）
*   在 AndroidManifest.xml 和项目属性中更改目标
*   清洁、建造、运行，任何我想到的或我可以在 stackoverflow 上找到的东西
*   重新启动我的电脑（是的，3 次），然后 Eclipse
*   在其他项目上运行它，**有时它在那里工作正常**！

我正在运行：

*   基本操作系统（基于 Ubuntu）-Linux maurycy-EOS **3.2.0-35-generic** #55-Ubuntu SMP Wed Dec 5 17:42:16 UTC 2012 **x86_64** x86_64 x86_64 GNU/Linux
*   日食**4.2.1**
*   Android SDK Tools **21.1 rc1**（是的，它是一个预览版，但它也不适用于**21.0.1**）
*   Android SDK 平台工具**16.0.1**
*   java版本“ **1.7.0_09** ”；OpenJDK 运行环境（IcedTea7 2.3.3）（7u9-2.3.3-0ubuntu1~12.04.1）；OpenJDK 64 位服务器 VM（内部版本 23.2-b09，混合模式）

**如果有人有类似的问题，有任何线索可能导致这种情况，或者可以以任何可能的方式提供帮助，我很高兴收到您的来信！**

看起来我的机器上没有安装任何样式：|

如果你认为我的代码有问题，这里是：http: [//goo.gl/bbVdc](http://goo.gl/bbVdc)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T10:00:58.090

原来我的问题出在我的代码中。我的问题是我一直将**问号**单独设置为字符串的内容。而且，正如我被告知的那样，问号也是开始主题引用的字符。

换句话说，我的问题是由[android bug](http://code.google.com/p/android/issues/detail?id=39612)引起的。

## 编辑：

值得注意的是，从那时起，此错误已得到修复，因此如果您仍然遇到此问题，请尝试**更新您的 adt**。

# solr - Solr 给出了太多不相关的结果

> ID：14299338
> 
> 赞同：1
> 
> 时间：2013-01-13T00:13:49.250
> 
> 标签：solr, faceted-search

我有一个标签系统，标签是这样的：

```
italian kitchen
chinese kitchen
japanese kitchen
russian kitchen
vegeterian kitchen 
```

当我查询意大利厨房时，我没有得到意大利厨房。我总是得到俄语和日语以及其他不相关的结果。在 Solr 架构中，我的标签字段的类型是字符串。我不知道为什么会这样。你能和我分享你的想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-13T00:38:42.897

“字符串”的字段类型意味着您的字段没有被标记化。所以每个字段都有一个标记——传入的整个字符串。所以除非整个字段上有一个精确的短语查询匹配，否则没有结果会比其他任何结果更相关，

您可能希望在默认模式中使用“文本”类型，这会将字段分解为标记。IE 而不是“Italian kitchen”，您将在该字段中同时索引“Italian”和“kitchen”术语。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T15:21:18.530

您真的想通读[有关标记器的部分](http://wiki.apache.org/solr/AnalyzersTokenizersTokenFilters)，至少前两节。然后，如果您在 Solr 4 中，请转到管理界面并尝试您的核心部分下的分析屏幕。这使您可以将文本与您的类型（猫）一起输入，然后查看它实际分解为什么。

现在，在我看来，您希望“Italian Kitchen”成为一个侧面类别并且可以搜索。这是一个双重挑战，因为构面值来自生成的标记，因此您确实希望将其作为字符串。在这种情况下，我的建议是将**cat**字段保留为字符串字段，并将 copyField 复制到具有标记化类型的**cat_text中（查看示例的架构）并使用 eDismax 搜索包括****cat_text**在内的多个字段。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T17:35:35.877

确保你这样做：

q=your_field:"意大利厨房"

并不是

q=your_field:意大利厨房

# wordpress - SUSY 与 WordPress

> ID：14299341
> 
> 赞同：1
> 
> 时间：2013-01-13T00:14:07.913
> 
> 标签：wordpress, web, susy-compass

我已经使用 SUSY 开发了几个静态站点并掌握了它。目前，我有一个 SUSY 网站正在开发中，它将被带到一个自定义的 WordPress 主题中。这里是否还有其他人以这种方式开发（我敢肯定有），如果是这样，您在转换过程中是否遇到过任何不寻常的事情或我需要留意的事情？我只是想在开始之前尽量减少潜在的减速带。谢谢！

杰森

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T05:51:59.377

虽然我从未将使用 Susy 构建的 CSS 从静态站点转换为 Wordpress，但我已经使用 Susy 构建了一个 Wordpress 主题。当我在本地开发时，它可以正常运行，没有任何问题。你有什么具体的担心吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T05:59:03.553

从公共汽车站快速思考——</p>

我已经将 susy 与基本的 Wordpress 主题一起使用。没有内在的冲突，但许多 Wordpress 主题具有复杂的 CSS 结构和复杂的继承，很容易欺骗你。

人们搞砸 susy 布局的#1 方法是无意中添加边距、填充或边框。

只要你避免这种情况并小心避免预定义的样式，你应该没问题。

此外，文档中没有强调的一些通用指针：

*   'gem unpack susy' 并研究 gem 的内容！大多数 mixin 都非常易于阅读，我很困惑为什么有些开发人员不这样做。
*   susy mixins 应该只应用于几个关键的布局元素
*   大量添加背景颜色（不是边框）以调试布局

干杯——克里斯·布劳

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T10:53:20.643

Susy 与 Wordpress 配合得很好，我已经完成了几个自定义主题，而且一切都非常顺利。

我必须密切关注的是 Wordpress：

- 她在 DIVS 中生成 DIV 的能力，因为，恕我直言，没有充分的理由，

- 并让我的眼睛紧盯着 Codex，这样我就可以知道何时可以将自己的类添加到元素中，从而使我的 scss 保持可读性和一致性。

wp_nav_menu() 是这两种行为的一个很好的例子。

# wordpress - Wordpress 列出该类别的作者

> ID：14299343
> 
> 赞同：-1
> 
> 时间：2013-01-13T00:14:10.507
> 
> 标签：wordpress, wordpress-theming

如何列出某个类别的作者？

例如：

```
CAT NAME: INTERNET     AUTHOR: JOHN, DOE, ALEX
CAT NAME: TECH         AUTHOR: JOHN
CAT NAME: CODE         AUTHOR: ALEX 
```

知道如何在 Wordpress 中执行此操作吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T03:55:44.800

您可以使用以下代码：

```
<?php
$cat_arr = get_categories(); // Get the list of Categories
foreach ($cat_arr as $cat_obj) {
    $term_id = $cat_obj->term_id;

    // Print the Name
    ?>
    <br>
    CAT NAME: <?php echo $cat_obj->name ?>, AUTHOR: 
    <?php
    // Get all Posts of that Category
    $posts = get_posts(array('category'=>$term_id));

    $authors_arr = array();
    foreach ($posts as $post_obj) {
        $author_id = $post_obj->post_author;

            // In depends on where you put this code, the include of the file is required
        if (!function_exists('get_userdata')) {
            include '<your WP folder>/wp-includes/pluggable.php';
        }

        $user_obj = get_userdata($author_id);
            // Only Add the author is isn't already added, to avoid printed twice
        if (!in_array($user_obj->user_login, $authors_arr)) {
            $authors_arr[] = $user_obj->user_login; // Instead of user_login you can use any Database field of the "Users" table
        }
    }
    echo implode(', ', $authors_arr) . '<br>';
}
?> 
```

但是，如果您想为“当前”类别（不是所有类别）执行此操作，您可以使用以下代码：

```
 $cat_obj = get_the_category(); // This is what you put in your comment to get Current Category

    $term_id = $cat_obj->term_id;

    // Print the Name
    ?>
    <br>
    CAT NAME: <?php echo $cat_obj->name ?>, AUTHOR: 
    <?php
    // Get all Posts of that Category
    $posts = get_posts(array('category'=>$term_id));

    $authors_arr = array();
    foreach ($posts as $post_obj) {
        $author_id = $post_obj->post_author;

            // In depends on where you put this code, the include of the file is required
        if (!function_exists('get_userdata')) {
            include '<your WP folder>/wp-includes/pluggable.php';
        }

        $user_obj = get_userdata($author_id);
            // Only Add the author is isn't already added, to avoid printed twice
        if (!in_array($user_obj->user_login, $authors_arr)) {
            $authors_arr[] = $user_obj->user_login; // Instead of user_login you can use any Database field of the "Users" table
        }
    }
    echo implode(', ', $authors_arr) . '<br>'; 
```

# javascript - 如何动态添加文本

> ID：14299344
> 
> 赞同：-1
> 
> 时间：2013-01-13T00:14:26.033
> 
> 标签：javascript, text

我只是想知道是否有办法动态添加文本？您可以像这样添加图像：

```
var img1 = new Image(); // DOM 0
img1.src = 'image1.png';
img1.alt = 'alt';
document.body.appendChild(img1); 
```

你会做--V-- 吗？

```
var Txt = new Text(); 
```

谢谢！

*编辑*：我将如何移动此文本？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T00:20:13.673

我不太明白你是什么意思，要附加一个文本元素，你只需要创建一个文本节点

```
document.createTextNode("whatever you want to write") 
```

然后将它附加到你想要的 body 或 wathever div 上。

**编辑**

Esailija 已经给了你正确的答案。

# php - 不同的用户对 MySQL 有不同的权限。我从中受益吗？

> ID：14299346
> 
> 赞同：1
> 
> 时间：2013-01-13T00:15:00.620
> 
> 标签：php, mysql

谈到 SQL 注入。

现在，我为我的网站执行以下操作。

1.  使用 mysql_real_escape_string() 清理查询中的（任何）参数。
2.  整数数据进入 intval()。
3.  向拥有 ALL PREVILIGIES 的用户查询。

**问题 1：**它是否单独防止 SQL 注入？

另外，我正在考虑做以下事情。

我不想对所有预审用户使用查询，而是想为每个任务创建一个用户，例如更新、删除、选择、删除等。

进行查询时，我可以选择要使用的用户

$database->selectUser('SELECT')->runQuery('query');

**问题 2：** 这对我的安全性有帮助吗？值得这样做吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-13T01:02:45.733

问题 1：一般来说，mysql_real_escape_string 会停止针对您的基本 SQL 注入，但也有例外。看到[这个问题](https://stackoverflow.com/questions/5741187/sql-injection-that-gets-around-mysql-real-escape-string)。

您真的应该将所有代码切换到 Mysqli 或 PDO。

问题 2：这确实无助于您的安全。假设您开始看到数据库中发生了奇怪的事情，并且您认为自己被黑客入侵了……但是它是哪个用户？如果您认为密码已被破解，则必须检查并更改所有密码。

除此之外，您基本上必须为每个帐户定义一个新连接......

创建一个主帐户并给它一个非常好的密码。如果开始发生奇怪的事情，您只需更改一个密码。

# seam - RestEasy，JBoss Seam 神秘异常

> ID：14299349
> 
> 赞同：1
> 
> 时间：2013-01-13T00:15:54.803
> 
> 标签：seam, jax-rs, resteasy

我在 JBoss Seam 应用程序中使用 RestEasy，但我得到了一个奇怪的异常，它的信息量不是很大。我的 Seam 2.2.2.GA 应用程序中有以下 jar：

*   jaxrs-api-2.2.0.GA.jar
*   resteasy-jaxrs-2.2.0.GA.jar
*   jboss-seam-resteasy-2.2.0.GA.jar

我已经设置了我的资源的路径，如下所示：

```
@Path("/chartSvc")
@Stateless
@Name("chartAction")
@Scope(ScopeType.CONVERSATION)
public class ChartAction implements Serializable, ChartActionLocal{

public ChartAction() {}

@GET
@Path("/populateChart")
@Produces("text/plain")
public String populateChart() {
String chartData = generateDummyChartData();
return chartData;
} 
```

现在，当我尝试在 /seam/resource/svc/chartSvc/populateChart 访问我的 URL 时，我得到了这个异常：

```
javax.servlet.ServletException: Servlet execution threw an exception
    org.jboss.seam.servlet.SeamFilter$FilterChainImpl.doFilter(SeamFilter.java:83)
    org.jboss.seam.web.RewriteFilter.doFilter(RewriteFilter.java:63)
    org.jboss.seam.servlet.SeamFilter$FilterChainImpl.doFilter(SeamFilter.java:69)
    org.jboss.seam.web.IdentityFilter.doFilter(IdentityFilter.java:40)
    org.jboss.seam.servlet.SeamFilter$FilterChainImpl.doFilter(SeamFilter.java:69)
    org.jboss.seam.web.MultipartFilter.doFilter(MultipartFilter.java:90)
    org.jboss.seam.servlet.SeamFilter$FilterChainImpl.doFilter(SeamFilter.java:69)
    org.jboss.seam.web.ExceptionFilter.doFilter(ExceptionFilter.java:64)
    org.jboss.seam.servlet.SeamFilter$FilterChainImpl.doFilter(SeamFilter.java:69)
    org.jboss.seam.web.RedirectFilter.doFilter(RedirectFilter.java:45)
    org.jboss.seam.servlet.SeamFilter$FilterChainImpl.doFilter(SeamFilter.java:69)
    org.ajax4jsf.webapp.BaseXMLFilter.doXmlFilter(BaseXMLFilter.java:178)
    org.ajax4jsf.webapp.BaseFilter.handleRequest(BaseFilter.java:290)
    org.ajax4jsf.webapp.BaseFilter.processUploadsAndHandleRequest(BaseFilter.java:368)
    org.ajax4jsf.webapp.BaseFilter.doFilter(BaseFilter.java:495)
    org.jboss.seam.web.Ajax4jsfFilter.doFilter(Ajax4jsfFilter.java:56)
    org.jboss.seam.servlet.SeamFilter$FilterChainImpl.doFilter(SeamFilter.java:69)
    org.jboss.seam.web.LoggingFilter.doFilter(LoggingFilter.java:60)
    org.jboss.seam.servlet.SeamFilter$FilterChainImpl.doFilter(SeamFilter.java:69)
    org.jboss.seam.servlet.SeamFilter.doFilter(SeamFilter.java:158)
root cause

java.lang.NoSuchMethodError: org.jboss.resteasy.specimpl.PathSegmentImpl.parseSegments(Ljava/lang/String;)Ljava/util/List;
    org.jboss.seam.resteasy.ResteasyResourceAdapter.extractUriInfo(ResteasyResourceAdapter.java:198)
    org.jboss.seam.resteasy.ResteasyResourceAdapter$1.process(ResteasyResourceAdapter.java:128)
    org.jboss.seam.servlet.ContextualHttpServletRequest.run(ContextualHttpServletRequest.java:53)
    org.jboss.seam.resteasy.ResteasyResourceAdapter.getResource(ResteasyResourceAdapter.java:121)
    org.jboss.seam.servlet.SeamResourceServlet.service(SeamResourceServlet.java:80)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    org.jboss.seam.servlet.SeamFilter$FilterChainImpl.doFilter(SeamFilter.java:83)
    org.jboss.seam.web.RewriteFilter.doFilter(RewriteFilter.java:63)
    org.jboss.seam.servlet.SeamFilter$FilterChainImpl.doFilter(SeamFilter.java:69)
    org.jboss.seam.web.IdentityFilter.doFilter(IdentityFilter.java:40)
    org.jboss.seam.servlet.SeamFilter$FilterChainImpl.doFilter(SeamFilter.java:69)
    org.jboss.seam.web.MultipartFilter.doFilter(MultipartFilter.java:90)
    org.jboss.seam.servlet.SeamFilter$FilterChainImpl.doFilter(SeamFilter.java:69)
    org.jboss.seam.web.ExceptionFilter.doFilter(ExceptionFilter.java:64)
    org.jboss.seam.servlet.SeamFilter$FilterChainImpl.doFilter(SeamFilter.java:69)
    org.jboss.seam.web.RedirectFilter.doFilter(RedirectFilter.java:45)
    org.jboss.seam.servlet.SeamFilter$FilterChainImpl.doFilter(SeamFilter.java:69)
    org.ajax4jsf.webapp.BaseXMLFilter.doXmlFilter(BaseXMLFilter.java:178)
    org.ajax4jsf.webapp.BaseFilter.handleRequest(BaseFilter.java:290)
    org.ajax4jsf.webapp.BaseFilter.processUploadsAndHandleRequest(BaseFilter.java:368)
    org.ajax4jsf.webapp.BaseFilter.doFilter(BaseFilter.java:495)
    org.jboss.seam.web.Ajax4jsfFilter.doFilter(Ajax4jsfFilter.java:56)
    org.jboss.seam.servlet.SeamFilter$FilterChainImpl.doFilter(SeamFilter.java:69)
    org.jboss.seam.web.LoggingFilter.doFilter(LoggingFilter.java:60)
    org.jboss.seam.servlet.SeamFilter$FilterChainImpl.doFilter(SeamFilter.java:69)
    org.jboss.seam.servlet.SeamFilter.doFilter(SeamFilter.java:158) 
```

我的资源从未被触及，这表明这可能与我的设置有关，但我不知道从哪里开始调试，因为我确信我拥有所有正确版本的库。谁能帮我开始调试这个？这是我的第一个接缝应用程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T11:15:40.297

这个问题原来是 rest easy-jaxrs.jar 和 jboss-seam-resteasy.jar 之间的版本不兼容。jboss-seam-resteasy.jar 是 2.2.0.GA，其余的 easy-jaxrs.jar 也是如此。但是，您需要 resteasy-jaxrs.jar-1.1-RC2.jar 才能使用 jboss-seam-resteasy-2.2.0.GA.jar。更换罐子解决了我的问题。

# javascript - Javascript 表单验证，if 语句太多？

> ID：14299352
> 
> 赞同：2
> 
> 时间：2013-01-13T00:16:18.927
> 
> 标签：javascript, html, forms, validation

我有一个包含五个元素的表单，`firstName`, `lastName`, `username`,`password`和`passwordConfirmation`

```
var errors = [];
var errorsText = [];

function generateError(messageText, elementIdentifier) {
var messageText = messageText;
var elementIdentifier = elementIdentifier;
errors.push(elementIdentifier);
errorsText.push(messageText);
return false;
}

function validateRegistrationForm(firstName, lastName, username, password, passwordConfirmation) {
formReset();
//alert("validateRegistrationForm() has been called");

var firstName = firstName;
//alert("First Name = \'" + firstName + "\'");
var lastName = lastName;
//alert("Last Name = \'" + lastName + "\'");
var username = username;
//alert("Username = \'" + username + "\'");
var password = password;
//alert("Password = \'" + password + "\'");
var passwordConfirmation = passwordConfirmation;
//alert("Password Confirmation = \'" + passwordConfirmation + "\'");

if ( ( firstName == null ) || ( firstName == "" ) ) {
    //alert("//firstname hasn't been filled out");

    generateError("You must provide a First Name", "firstName");
} 

if ( ( lastName == null ) || ( lastName == "" ) ) {
    //lastname hasn't been filled out
    generateError("You must provide a Last Name", "lastName");
}

if ( ( username == null ) || ( username == "" ) ) {
    //username hasn't been filled out
    generateError("You must enter a Username", "username");
}

if ( ( password == null ) || ( password == "" ) ) {
    //password hasn't been filled out
    generateError("You haven\'t entered a password", "password");
}

if ( ( passwordConfirmation == null ) || ( passwordConfirmation == "" ) ) {
    //passwordconfirmation hasn't been filled out
    generateError("You haven\'t confirmed your password", "passwordConfirmation");
}

validatePassword(password, passwordConfirmation);

} 
```

有没有更好的方法来处理所有的`if statements`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-13T00:25:08.057

考虑创建字段名称和错误消息的映射：

```
var errorMessages = {
  firstName:"You must provide a First Name",
  lastName: "You must provide a Last Name",
  username: "You must enter a Username",
  password: "You haven't entered a password",
  passwordConfirmation: "You haven\'t confirmed your password"
}; 
```

也许还有一个用于有条件地抛出错误的小辅助函数：

```
var assertIsFilled = function(name, value) {
  if(!value) {
    generateError(errorMessages[name], name);
  }
}); 
```

这将很好地清理您的验证功能：

```
function validateRegistrationForm(firstName, lastName, username, password, passwordConfirmation) {
  formReset();
  assertIsFilled("firstName", firstName);
  assertIsFilled("lastName", lastName);
  assertIsFilled("username", username);
  assertIsFilled("password", password);
  assertIsFilled("passwordConfirmation", passwordConfirmation);

  validatePassword(password, passwordConfirmation);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T00:32:08.440

这看起来像你可以使用[逻辑或](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Logical_Operators#Logical_OR_%28.7C.7C%29)短路的东西

```
function validateRegistrationForm(firstName, lastName, username, password, passwordConfirmation) {
    formReset();
    firstName || generateError("You must provide a First Name", "firstName");
    lastName || generateError("You must provide a Last Name", "lastName");
    username || generateError("You must enter a Username", "username");
    password || generateError("You haven\'t entered a password", "password");
    passwordConfirmation || generateError("You haven\'t confirmed your password", "passwordConfirmation");
    validatePassword(password, passwordConfirmation);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T00:19:37.767

无需同时检查`null`和`empty string`，您只需检查该值是否为真。

```
if (firstName) { 
 // value is truthy 
} 
```

或者更确切地说，您可以使用以下内容，

```
if (!firstName) {
 // value is non-truthy
 generateError("You must provide a First Name", "firstName");
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-13T00:25:14.093

你能做这样的事情吗？：

```
jQuery(":input").bind("blur change",function(){
     if(jQuery(this).val()===null || jQuery(this).val()===""){
     generateError();
    }
}) 
```

您还可以过滤掉不需要以这种方式验证的输入。

原始 JS 版本：

```
var inputs = document.getElementsByTagName('input');

for (var i=0, len=inputs.length; i<len; i++){
    if (inputs[i].type == 'text'){      
        inputs[i].onclick = function(){ 
              if(this.value===null || this.value===""){
                generateError();
              }       

        }
//same for onBlur
    }
} 
```

# java - 在字符串中查找指定的表达式

> ID：14299355
> 
> 赞同：0
> 
> 时间：2013-01-13T00:17:00.983
> 
> 标签：java, android, regex, algorithm

我正在寻找在一个字符串中找到三个子字符串的解决方案。

我的字符串看起来像：

> 约翰史密斯电话。555222333 邮件。john@gmail.com

我想从这个字符串中获取电话号码、电子邮件和姓名。查找电子邮件和电话号码是微不足道的，但我不知道如何获取姓名和姓氏。

编辑。此字符串中的单词顺序并不总是相同的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T17:11:11.137

```
1\. Retrieve telephone number. Remove it and string 'tel.' from the original string.

2\. Retrieve email. Remove it and string 'mail.' from the original string.

3\. Trim the remaining and you get the name. 
```

这就是解决方案。但是为了样式的一致性，最好放一个字符串'name'。在名字之前。像这样

```
"name. John Smith tel. 555222333 mail. john@gmail.com" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T02:02:25.930

输入字符串可以围绕电话进行拆分。和邮件。例如：

```
String("John Smith tel. 555222333 mail. john@gmail.com").split("mail\\.\\B"); 
```

在这里，\B 确保不会在 mail.com 处拆分字符串。然后尝试下面的正则表达式来获取名称：

```
[[[A-Za-z]+][\\s+]]+ 
```

这将搜索至少一个或多个 (+) 名称部分的存在。这里，名称部分（即名字、姓氏或中间名）可以以大写或小写字符开头并包含。希望这对你有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T00:19:32.330

电话前的词。可以视为姓氏，之前的一切都可以视为名字。就像是：

```
String names = myString.substring(0, myString.indexOf("tel."));
String name = names.subString(0, names.indexOf(" "));
String surname = names.subString(names.indexOf(" "), names.size()-1); 
```

# c# - 编写网络浏览器文本框？

> ID：14299360
> 
> 赞同：-1
> 
> 时间：2013-01-13T00:17:24.207
> 
> 标签：c#, visual-studio-2010, windows-phone-7

在发送到网络浏览器之前，文本框会在用户输入的内容中添加“http://”（例如“google.com”变为“http://google.com”），但如果用户输入“http: //" 在他们的网站之前你会得到一个错误。

这是我的代码：

```
 private void bargo_Click(object sender, RoutedEventArgs e)
    {
        Uri targetUri = new Uri(System.String.Format("http://{0}", bar.Text));
        web.Navigate(targetUri);

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T01:27:47.807

您可以测试 bar.text 是否已经以 http:// 开头，如下所示：

```
 private void bargo_Click(object sender, RoutedEventArgs e)
    {
        string url = bar.Text;
        if (!url.StartsWith("http://"))
        {
            url = "http://" + url;
        }
        web.Navigate(new Uri(url);
    } 
```

如果您的用户输入“https://”或“ftp://”（或 gopher://、irc://、ircs://、ftp://、news://、nntp://、worldwind ://, telnet://, svn://, git://, mms:// 和 mailto:) 这个方法仍然会添加“http://”并且失败。

更好的解决方案是将字符串传递给 web.Navigate() 而不是 uri。当您传入一个字符串时，WebBrowser 控件会像浏览器一样自动添加 http://。

```
 private void bargo_Click(object sender, RoutedEventArgs e)
    {
        web.Navigate(bar.Text);
    } 
```

**编辑：**对于 Windows Phone 7

```
 private void bargo_Click(object sender, RoutedEventArgs e)
    {
        web.NavigateToString(bar.Text);
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T01:39:15.603

```
var culture = System.Globalization.CultureInfo.InvariantCulture.CompareInfo;
if (culture .IsPrefix(textbox.Text, "http://") == false)
    textbox.Text = "http://" + textbox.Text;
var regex = new Regex(@"^(http|https|ftp)\://[a-zA-Z0-9\-\.]+\.[a-zA-Z]{2,3}(:[a-zA-Z0-9]*)?/?([a-zA-Z0-9\-\._\?\,\'/\\\+&amp;%\$#\=~])*$");
if (regex.IsMatch(textbox.Text))
{
   //Your logic here
} 
```

# php - PHP从同一个类的构造函数中注册自动加载函数

> ID：14299361
> 
> 赞同：-1
> 
> 时间：2013-01-13T00:17:32.470
> 
> 标签：php, autoload

不知道为什么这不起作用..尝试了许多不同的语法来调用注册“autoLoad”函数与 spl_autoload_register，我不断收到错误，找不到函数。

```
class ClassLoader {

//Directories
private $dir_path        = '';
private $directories     = ['config/',
                            'core/',
                            'helpers/',
                            'modules/',
                            'classes/'];

//Add your file naming formats here
private $fileNameFormats = ['%s.php',
                            '%s.class.php',
                            'class.%s.php',
                            '%s.inc.php'];

public function __construct($paths) {
    $this->dir_path = $paths['root']. '/';
    $loader = $this->{autoLoader()};
    spl_autoload_register($loader);
}

function autoLoader($className) {

    foreach($this->directories as $directory) {
        foreach($this->fileNameFormats as $fileNameFormat) {
            $path = $this->dir_path . $directory.sprintf($fileNameFormat, $className);
            try {
                if (!include($path)) {
                    throw new Exception ('<b>Error - Missing class:</b>' . $path);
                }
            }
            catch (Exception $e) {
                echo
                    '<p><b>EXCEPTION</b><br />Message: '
                    . $e->getMessage()
                    . '<br />File: '
                    . $e->getFile()
                    . '<br />Line: '
                    . $e->getLine()
                    . '</p>';
            }
        }
    }
}
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-13T00:18:31.737

根据[有关回调的文档](http://php.net/manual/en/language.types.callable.php)，要将类函数引用为回调，您需要一个数组，其中第一个元素是类名或表示类实例的对象，以及您想要的函数字符串那个班级的电话。

所以，你应该使用：

```
spl_autoload_register( array( $this, 'autoLoader')); 
```

# actionscript-3 - 定义 mx.core:BitmapAsset 找不到。（使用 ant 和 FlashDevelop）

> ID：14299363
> 
> 赞同：0
> 
> 时间：2013-01-13T00:17:42.780
> 
> 标签：actionscript-3, flash

我看到了这个问题：

[找不到 mx.core::BitmapAsset](https://stackoverflow.com/questions/2889171/mx-corebitmapasset-could-not-be-found)

答案没有帮助。我正在用 ant 和 FlashDevelop 编译代码并收到错误：Definition mx.core:BitmapAsset

如果我在没有 ant 的情况下在 FlashDevelop 中正常编译，它可以正常工作（没有错误）。我尝试按照他们在答案和其他网站中的建议进行操作，但没有成功。

即：

我将此 xml 字段更改为 true：

`<static-link-runtime-shared-libraries>true</static-link-runtime-shared-libraries>`

并尝试从 framework.swc 导入 BitmapAsset

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T00:34:07.687

要么链接到 flex 库 swc，要么创建自己的 mx.core.BitmapAsset 来实现[BitmapAsset](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/mx/core/BitmapAsset.html)实现的所有接口。

# firebase - authClient.login 问题

> ID：14299364
> 
> 赞同：1
> 
> 时间：2013-01-13T00:18:15.543
> 
> 标签：firebase

我遇到了与此问题中讨论的类似问题： [authClient.login 返回错误与“未经授权的请求来源”](https://stackoverflow.com/questions/14276815/authclient-login-returning-error-with-unauthorized-request-origin?rq=1)

我在 firebase 网站上找不到任何直接解决此问题的内容，因此我对“未经授权的请求来源”有 2 个问题：

1.) 如果我通过自己的计算机测试我的程序（例如，它只是我计算机上的一个文件），我到底应该添加什么到 Auth 面板？我尝试遵循上面链接中提供的建议，但没有运气。

2.) 我的最终计划是使用 firebase 及其登录系统创建一个应用程序。当用户尝试登录时，这会成为问题吗？是否需要允许任何用户登录系统？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-13T01:10:38.663

随着 Firebase 简单登录的发布，其中包含许多基于 OAuth 的身份验证方法（Facebook、Twitter、GitHub 等），我们包含了“授权来源”的想法。如果没有此限制，恶意网站可能会伪装成您的应用程序并尝试代表您访问用户的 Facebook、Twitter 等数据。

通过将这些请求的域限制为您控制并已验证的域，我们可以保护您的用户数据。配置应用程序域后，您的用户将能够从您定义的域无缝且安全地登录。

要修复此错误，请登录 Firebase Forge（通过在浏览器中输入您的 Firebase URL），然后导航到左侧的“身份验证”面板。

*   对于本地测试，您需要在您的机器上至少运行一个准系统网络服务器，而不是通过`file://`. 在本地计算机上运行准系统服务器的最简单方法是到`cd`文件目录并运行`python -m SimpleHTTPServer`，这将允许您通过`http://127.0.0.1:8000/...`.
*   对于您的用户，配置您将用于托管应用程序的域。这可以是任意数量的特定子域（例如`a.b.www.domain.com`）或用作通配符的高级域（`domain.com`将允许来自 的请求`*.domain.com`）。

您可以在此处配置多个应用程序域或 IP，以逗号分隔。

有关简单登录的应用程序配置的其他文档，请参阅[https://www.firebase.com/docs/security/simple-login-overview.html](https://www.firebase.com/docs/security/simple-login-overview.html)。

我希望这会有所帮助！如果您还有其他问题，请随时直接 ping 我。

# android - android源码中sqlite的源码在哪里

> ID：14299366
> 
> 赞同：1
> 
> 时间：2013-01-13T00:18:35.583
> 
> 标签：android, sqlite, android-ndk, android-sqlite

全部。

我想研究android中的sqlite。

现在，我有android的整个源项目，并且在/external/sqlite中找到了sqlite的lib文件夹。

但是，据我所知，sqlite 使用自己的 lib 和后端运行，pager.Anyway，我无法在 android 源项目中找到 sqlite 的所有源文件，如 pager.c。

任何人都可以帮我一把吗？thx

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T10:57:58.740

该文件`sqlite3.c`是所有其他源文件的组合。

# python - 在 Python 中表示二维网格的最有效方法

> ID：14299368
> 
> 赞同：1
> 
> 时间：2013-01-13T00:18:38.490
> 
> 标签：python, graph

我是 Python 新手，一直在尝试解决一些编程问题以更好地掌握这门语言。到目前为止，我已经在[https://www.python.org/doc/essays/graphs/](https://www.python.org/doc/essays/graphs/)阅读了 Guido 的文章。这有助于我了解如何使用图表。但是，竞争性编程问题大多具有二维网格：

```
U..X
..X.
X..X
..X. 
```

我如何在 Python 中表示它们？列表列表是一个很好的表示吗？有没有更好或更“Pythonic”的方法？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T00:27:54.187

列表列表通常适用于网格的大多数用途，但如果您有兴趣使用二维数组做更高级的事情，您可能想要研究[NumPy](http://www.numpy.org/)。NumPy 是用 C 实现的，效率很高；它的功能比您要寻找的要多得多，但无论如何都值得一看。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T00:28:15.630

在 Python 中，嵌套列表通常是要走的路——它允许轻松访问“网格”上的一个点，前提是索引是已知的—— `grid[y][x]`。

以网格形式打印它们也很简单：

```
for i in grid:
    print i 
```

# python - 用于选择内部文本的正则表达式

> ID：14299380
> 
> 赞同：-2
> 
> 时间：2013-01-13T00:21:04.453
> 
> 标签：python, regex

> **可能重复：**
> [正则表达式匹配打开的标签，XHTML 自包含标签除外](https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags)

从标签中仅提取文本的最佳正则表达式是什么？如果我有例如这种 html 标记

```
<tr class="classo">
<td>text1</td>
<td class="dot">text2 </td>
<td>text3</td>
<td class="dot"> text4</td>
<td class="dot">text4</td>
</tr> 
```

td 标签的数量不固定，其中一些会有类属性，但我只对从 td 标签内部获取文本感兴趣

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T00:25:59.683

与其花时间在正则表达式上，不如使用为任务设计的东西。我喜欢[BeautifulSoup](http://www.crummy.com/software/BeautifulSoup/)：

```
>>> s = """
... <tr class="classo">
... <td>text1</td>
... <td class="dot">text2 </td>
... <td>text3</td>
... <td class="dot"> text4</td>
... <td class="dot">text4</td>
... </tr>
... """
>>> 
>>> from bs4 import BeautifulSoup
>>> soup = BeautifulSoup(s)
>>> soup.find_all("td")
[<td>text1</td>, <td class="dot">text2 </td>, <td>text3</td>, <td class="dot"> text4</td>, <td class="dot">text4</td>]
>>> [tag.text for tag in soup.find_all("td")]
[u'text1', u'text2 ', u'text3', u' text4', u'text4'] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T00:28:56.533

正则表达式`<td.*?>(.*?)<\/td>`会正确执行。

但我可以推荐你使用[HTMLParser 模块](http://docs.python.org/2/library/htmlparser.html)或[BeautifulSoup](http://www.crummy.com/software/BeautifulSoup/bs4/doc/)

花时间给你写了另一个使用 HTMLParser 的例子：

```
from HTMLParser import HTMLParser

class TDExtractor(HTMLParser):

  def handle_starttag(self, tag, attrs):
      if tag == 'td':
          self.recording = True

  def handle_endtag(self, tag):
      if tag == 'td':
          self.recording = False

  def handle_data(self, data):
      if self.recording:
          self.data.append(data)

  def reset(self):
      HTMLParser.reset(self)
      self.data = []
      self.recording = False 
```

在行动中：

```
> tdextractor = TDExtractor()
> tdextractor.feed(some_htmldata)
> print(tdextractor.data) # will print a list with all the td data. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-13T00:33:03.373

正则表达式不是为解析 HTML 而设计的。HTML 不是正则语言，不能用正则表达式轻松解析。

很多人喜欢`BeautifulSoup`，但它很[慢](http://blog.dispatched.ch/2010/08/16/beautifulsoup-vs-lxml-performance/)（[另一个来源](http://blog.ianbicking.org/2008/03/30/python-html-parser-performance/)）并且不如`lxml`，它甚至可以`BeautifulSoup`根据需要用作解析器。

这是一个使用`lxml`.

```
>>> import lxml.html
>>> html = lxml.html.fromstring("""
... <tr class="classo">
... <td>text1</td>
... <td class="dot">text2 </td>
... <td>text3</td>
... <td class="dot"> text4</td>
... <td class="dot">text4</td>
... </tr>""")
>>> print [e.text for e in html.xpath("td")]
['text1', 'text2 ', 'text3', ' text4', 'text4'] 
```

# c# - 在本地获取 Chrome 和 Firefox 版本，C#

> ID：14299382
> 
> 赞同：15
> 
> 时间：2013-01-13T00:21:31.133
> 
> 标签：c#, .net, google-chrome, firefox, registry

我只是使用常规 C# 而不是 ASP.NET。我想知道我是否可以获得 Chrome 和 Firefox 的版本。我知道对于 IE，您可以通过注册表获取版本。据我所知，Chrome 和 Firefox 不会将该信息存储在注册表中。

提前致谢。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-13T03:21:10.630

如果您知道应用程序的完整路径，则可以使用[System.Diagnostics.FileVersionInfo](http://msdn.microsoft.com/en-us/library/system.diagnostics.fileversioninfo.aspx)类来获取版本号。

这是一个简单的控制台应用程序，它从注册表中读取 Chrome 和 Firefox 的安装路径，并输出它们的版本号：

```
using System;
using System.Diagnostics;
using Microsoft.Win32;

class Program
{
    static void Main(string[] args)
    {
        object path;
        path = Registry.GetValue(@"HKEY_CURRENT_USER\Software\Microsoft\Windows\CurrentVersion\App Paths\chrome.exe", "", null);
        if (path != null)
            Console.WriteLine("Chrome: " + FileVersionInfo.GetVersionInfo(path.ToString()).FileVersion);

        path = Registry.GetValue(@"HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\App Paths\firefox.exe", "", null);
        if (path != null)
            Console.WriteLine("Firefox: " + FileVersionInfo.GetVersionInfo(path.ToString()).FileVersion);
    }
} 
```

样本输出：

```
Chrome: 24.0.1312.52
Firefox: 16.0.2 
```

# iphone - uinavigationcontroller 后退按钮字体更改不太正确

> ID：14299387
> 
> 赞同：2
> 
> 时间：2013-01-13T00:22:19.190
> 
> 标签：iphone, ios, ipad, uinavigationcontroller

我在我的代码中执行以下操作来更改后退按钮的字体：

```
[[UIBarButtonItem appearance] setTitleTextAttributes:[NSDictionary dictionaryWithObjectsAndKeys:[UIColor whiteColor],UITextAttributeTextColor,[UIFont fontWithName:@"Freshman" size:13.0f],UITextAttributeFont, nil] forState:UIControlStateNormal]; 
```

但是“Back”这个词笨拙地朝向后退按钮的顶部，没有像往常一样居中以适应它。我说的是它以顶部和底部为中心，而不是从右到左。我怎样才能解决这个问题？似乎我只能使用 UITextAttributeShadow 更改 Shadow 和 ShadowOffset，所以我不知道如何使它看起来居中。

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-13T00:37:05.040

尝试这样的事情：

```
[[UIBarButtonItem appearance] setBackButtonTitlePositionAdjustment:UIOffsetMake(0, 10) forBarMetrics:UIBarMetricsDefault]; 
```

请查看[**参考**](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIBarButtonItem_Class/Reference/Reference.html)文档

# asp.net - 如何让我的模型和数据库重新同步 Asp.net MVC

> ID：14299388
> 
> 赞同：0
> 
> 时间：2013-01-13T00:22:19.837
> 
> 标签：asp.net, asp.net-mvc, entity-framework, ef-database-first

我使用数据库优先方法在 Asp.Net MVC 中创建了一个应用程序。我使用 edmx 文件生成了我的模型。但是我对我的上下文类进行了更改。每次我运行我的

应用程序我收到以下错误：

“支持 'ArticleContext' 上下文的模型在创建数据库后发生了变化。考虑使用 Code First 迁移来更新数据库”

我应该遵循错误给我的建议吗？即使我使用了“数据库优先”方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T01:03:53.830

那要看。数据库优先方法不仅意味着您首先拥有数据库，然后您决定创建模型。这也意味着（在大多数情况下）数据库结构将真正决定您的模型类的外观。最安全的方法是在 DB 端进行更改，并通过简单地从 EDMX 刷新代码来将它们提升到您的模型中。如果您确实需要对模型类进行一些更改，请通过实现部分类或 ViewModel 来完成。

# internet-explorer - Selenium WebDriver DragAndDrop for IE9

> ID：14299392
> 
> 赞同：-1
> 
> 时间：2013-01-13T00:23:21.427
> 
> 标签：internet-explorer, drag-and-drop, webdriver

我正在寻找一种解决方法来将 div 拖放到 IE 中的另一个上。

本机调用

(new Actions(TestSetup.webDriver)).dragAndDrop(sourceElement,destinationElement).perform();

适用于 Chrome 和 Firefox，但在 IE 中失败。

任何指针都会有所帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-25T11:22:02.277

不确定这是否已解决，但您可能需要执行单独的鼠标单击和移动操作，而无需从 Selenium 拖放。从理论上讲，它应该是同一件事，但可能存在这样一种情况，即当您持有一个元素并且硒没有找到另一个元素时，一个元素处于焦点并被拖动。

我建议获取两个元素并保存位置，然后单击并按住一个元素，然后将其移动到另一个元素的位置，然后在该位置释放鼠标。这应该绕过任何特定于浏览器的问题，并且只关注鼠标和逐个像素的窗口。

如果这仍然不起作用，请为硒错误和网页提供更具体的详细信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-08-10T19:14:37.393

初始化 IE 驱动程序时，将`RequireWindowFocus`选项设置为 true。

这就是它在 C# 中的实现方式：

```
var ieOptions = new InternetExplorerOptions
{
    RequireWindowFocus = true
}
var driver = new InternetExplorerDriver(ieOptions); 
```

如果使用远程 Selenium 服务器：

```
DesiredCapabilities capabilities = DesiredCapabilities.InternetExplorer();
capabilities.SetCapability("requireWindowFocus", true);
var driver = new RemoteWebDriver(Constants.RemoteSeleniumServer, capabilities); 
```

根据文档：

> 在 IE 驱动程序中引入了“requireWindowFocus”功能。当与“nativeEvents”功能结合使用时，驱动程序将在执行鼠标或键盘事件之前尝试将当前 IE 窗口置于前台。
> 
> 此外，当 requireWindowFocus 功能设置为 true 时，高级用户交互现在将使用 Windows SendInput() API 来执行交互。要启用此行为，请在创建 IE 驱动程序实例时将 requiresWindowFocus 功能的值设置为“true”。此新功能的默认值为“false”。此功能目前被认为是非常实验性的；使用风险自负。

# haskell - 提取发布请求时的类型错误

> ID：14299399
> 
> 赞同：0
> 
> 时间：2013-01-13T00:25:27.000
> 
> 标签：haskell, post, typeerror, haskell-wai

[我正在尝试使用此问题](https://stackoverflow.com/questions/8174525/parsing-post-body-using-wai-and-warp)中的代码提取基本的发布请求（除了我正在使用`lbsBackEnd`而不是不再存在的`lbsSink`）。

```
{-# LANGUAGE OverloadedStrings #-}
import Network.Wai.Handler.Warp (run)
import qualified Data.ByteString.Char8 as C
import Network.Wai.Parse (parseRequestBody, lbsBackEnd)
import Network.Wai(Response(..))
import Network.HTTP.Types(status200)
import Blaze.ByteString.Builder

main = run 3000 app

app req = do
  (params, _) <- parseRequestBody lbsBackEnd req
  let r = C.concat $ map (\(x,y) -> C.concat [x,y]) params
  return $ ResponseBuilder 
      status200
      [("Content-Type", "text/plain")]
      $ fromByteString r 
```

该问题中的评论表明这应该可行，但我收到类型错误

```
Couldn't match expected type `C.ByteString'
            with actual type `bytestring-0.9.2.1:Data.ByteString.Internal.ByteString'
Expected type: [(C.ByteString, C.ByteString)]
  Actual type: [Network.Wai.Parse.Param]
In the second argument of `map', namely `params'
In the second argument of `($)', namely 
```

这有点奇怪，因为[Network.Wai.Parse](http://hackage.haskell.org/packages/archive/wai-extra/0.4.2/doc/html/Network-Wai-Parse.html#t:Param)文档说这`Param`是 的类型同义词`(ByteString, ByteString)`，据我所知，这*应该*有效。

关于我做错了什么的任何提示？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T01:08:40.923

您的[wai-extra](http://hackage.haskell.org/package/wai-extra)是使用 构建的`bytestring-0.9.2.1`，但您安装了更新的`bytestring`软件包。除非 GHC 被指示使用带有`-package`标志的旧版本或隐藏新版本，否则它会选择每个软件包的最新安装版本。

包版本是它定义的类型的一部分，因此`ByteString`of`bytestring-0.9.2.1`与`ByteString`of `bytestring-0.10.0.0`（或您的最新版本）不同。

你可以

*   使用标志编译程序`-package bytestring-0.9.2.1`（但可能是其他使用的软件包是针对不同`bytestring`版本构建的，那么这将不起作用）。
*   将程序构建为一个`Cabal`ized 包，然后`cabal-install`找出必要的`-package`标志并将它们提供给 GHC（如果它找到一致的构建计划）。
*   `wai-extra`针对较新版本重建（可能还有许多其他软件包） `bytestring`。
*   取消注册较新的`bytestring`版本（这可能需要使用旧版本重建一些包）。

# html - 下拉菜单不显示

> ID：14299403
> 
> 赞同：0
> 
> 时间：2013-01-13T00:26:00.430
> 
> 标签：html, css, drop-down-menu, menu

我无法显示此菜单的下拉部分 - 我确信这是一个简单的修复 - 我只是看不到它。菜单本身没有什么花哨的，没有子菜单——只需要简单的下拉选项。我已经查看了几个教程，它们都是不同的，所以如果我能在调整我已经完成的工作方面获得帮助，这将是最好的方案。提前感谢您的帮助！

```
#headernav {
    float: right;
    width: 555px;
    padding: 0px;
    text-align:center;
    margin:0;
    list-style-type:none;

}

#headernav li {
    float:left;
}

#headernav li a {
    display: block;
    text-decoration: none;
    width:6em;
    height:35px;
    text-decoration:none;
    color:#161616;
    background:url(../images/linkbg2.png);
    background-repeat:no-repeat;
    padding:0.2em 0.6em;
    padding-top:20px;
    margin-left:3px;
    font-size:14px;
    letter-spacing:1px;
    font-weight:500;
}

#headernav li a:hover {
    text-decoration: none;
    height:35px;
    color: #161616;
    position: relative;
    width: 6em;
    text-align: center;
    padding:0.2em 0.6em;
    display: inline;
    float:left;
    padding-top:20px;
    margin-left:3px;
    cursor:pointer;
}

#headernav li ul {
    display:none;
}

#headernav li hover:ul {
    display:block;
    position:absolute;
    width:150px;
    background:#03C;
    list-style:none;
}

#headernav ul li {
  float: none;
}

#headernav ul li a {
  display: block;
  border-top: 1px solid #666;
} 
```

HTML：

```
<ul id="headernav">
<li><a href="donate.html">Donate</a></li>
<li><a href="answers.html">Answers</a></li>
<li><a style="width:8.5em;" href="news.html">News & Events</a></li>

<li><a href="about.html">About Us</a>
<ul>
      <li><a href="mission.html">Mission</a></li>
</ul>
</li>

<li><a href="contact.html">Contact</a></li>
</ul> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T01:01:08.950

我想你是想写

```
#headernav li:hover ul { 
```

代替`#headernav li hover:ul {`

此外，您可能应该`top: 60px;`在此类中添加类似的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T01:35:36.417

添加箭头的一种非常简单的方法是：

```
#headernav li {
    float:left;
    position:relative;   <-- add this
} 
```

然后将此类添加到您的CSS

```
#headernav li a.hasdropdown:after {
  content: " ";
  width: 0px;
  height: 0px;
  border-style: solid;
  border-width: 7px 6px 0 6px;
  border-color: #000000 transparent transparent transparent;
  position:absolute;
  left: 90px;
  top: 24px;  
} 
```

将“hasdropdown”类添加到应显示箭头的每个 Anchor-Tag：

```
<li><a href="about.html" class="hasdropdown">About Us</a> 
```

希望这个对你有帮助。

# javascript - 一键下载网页

> ID：14299404
> 
> 赞同：0
> 
> 时间：2013-01-13T00:26:04.640
> 
> 标签：javascript

我需要手动下载数百个网页。不幸的是，我无法自动执行该过程，因为我事先不知道网页的网址。我现在要做的是在浏览器中打开页面，右键单击鼠标，选择`save as`，在我的计算机上选择一个目录，然后将网页保存为 html 文件。

这是太多的工作，因为我需要重复数百次。如果我打开页面时弹出一个浮动按钮，那就太好了。当我单击该按钮时，该页面将保存到我计算机上的默认文件夹中。我可能会将此功能实现为 Chrome 扩展。

我想这个功能可以用简单的 Javascript 代码轻松实现。不幸的是，我对 Javascript 一点经验都没有。这可能需要我相当长的一段时间，而对于有经验的 Web 开发人员来说，这只是轻而易举的事。任何人帮助建议我需要实现这一目标的核心代码行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T00:35:25.030

此任务不适合 Javascript，因为它无法轻松地将文件保存到硬盘驱动器，此外您可能会遇到跨域问题。我建议使用简单的服务器端语言，如 Go、PHP 或 Python，因为您可以设置一个脚本来为您轻松完成此操作。

# java - Android：卡在自定义适配器中更新 textView

> ID：14299405
> 
> 赞同：0
> 
> 时间：2013-01-13T00:26:15.327
> 
> 标签：java, android, android-listview, custom-adapter

我是 Android（和 Java）编程的新手，并且已经设法让自定义适配器工作，但我坚持如何更新其中的 textViews。下面你会看到我的 score_save 函数和我想要的代码，但我不确定如何一次将它应用到我的适配器的所有行。

```
public class MainActivity extends Activity {

private ListView listView1;
private int currentPlayer;
private int currentScore;
ArrayList<Integer> allScoreChange = new ArrayList<Integer>();
ArrayList<Integer> allScore = new ArrayList<Integer>();

Button button_add, button_add_big, button_sub, button_sub_big,
        button_add_num, button_save;

TextView name;
TextView score;
TextView scoreChange;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    Score score_data[] = new Score[] { new Score("NameA"),
            new Score("NameB"), new Score("NameC"), new Score("NameD"),
            new Score("NameE") };

    //sets score lists to 0
    for (int i = 0; i < 5; i++) {
        allScoreChange.add(0);
        allScore.add(0);
    }

    ScoreAdapter adapter = new ScoreAdapter(this,
            R.layout.listview_item_row, score_data);

    listView1 = (ListView) findViewById(R.id.listView1);

    listView1.setAdapter(adapter);
    listView1.setOnItemClickListener(new OnItemClickListener() {
        @Override
        public void onItemClick(AdapterView<?> parent, View view,
                int position, long id) {

            currentScore = allScoreChange.get(position);
            // Gets fields from current row
            score = (TextView) view.findViewById(R.id.txtScore);
            scoreChange = (TextView) view.findViewById(R.id.txtScoreChange);

            currentPlayer = position;

        }

    });
    button_save.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {
            score_save();
        }
    });

}

    public void score_save() {

    // this needs to go through all rows of listview
    currentPlayer = 0;

    // update array with new score
    allScore.set(currentPlayer, allScore.get(currentPlayer)
            + allScoreChange.get(currentPlayer));

    // display new score
    score.setText(allScore.get(currentPlayer));

    // reset score change to zero
    allScoreChange.set(currentPlayer, 0);

    // display score change as blank
    scoreChange.setText("");

    }

} 
```

这是该行的 XML，我想使用 allScoreChange 和 allScore ArrayLists 中的值更新 txtScoreChange 和 txtScore。我删掉了定义这些列表的代码，以防你想知道。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="horizontal"
android:padding="10dp" >

<TextView
    android:id="@+id/txtTitle"
    android:layout_width="0dp"
    android:layout_height="wrap_content"
    android:layout_centerVertical="true"
    android:layout_marginBottom="5dp"
    android:layout_marginTop="5dp"
    android:layout_weight="70"
    android:text="Name"
    android:textColor="#000000"
    android:textSize="22sp"
    android:textStyle="bold" />

<TextView
    android:id="@+id/txtScoreChange"
    android:layout_width="0dp"
    android:layout_height="wrap_content"
    android:layout_centerVertical="true"
    android:layout_marginBottom="5dp"
    android:layout_marginRight="5dp"
    android:layout_marginTop="5dp"
    android:layout_weight="15"
    android:textColor="#ff0000"
    android:textSize="22sp"
    android:gravity="right" />

<TextView
    android:id="@+id/txtScore"
    android:layout_width="0dp"
    android:layout_height="wrap_content"
    android:layout_centerVertical="true"
    android:layout_marginBottom="5dp"
    android:layout_marginRight="5dp"
    android:layout_marginTop="5dp"
    android:layout_weight="15"
    android:text="1"
    android:textColor="#666666"
    android:textSize="22sp"
    android:gravity="right" /> 
```

这是我的适配器：

```
public class ScoreAdapter extends ArrayAdapter<Score>{

    Context context; 
    int layoutResourceId;    
    Score data[] = null;

    public ScoreAdapter(Context context, int layoutResourceId, Score[] data) {
        super(context, layoutResourceId, data);
        this.layoutResourceId = layoutResourceId;
        this.context = context;
        this.data = data;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        View row = convertView;
        ScoreHolder holder = null;

        if(row == null)
        {
            LayoutInflater inflater = ((Activity)context).getLayoutInflater();
            row = inflater.inflate(layoutResourceId, parent, false);

            holder = new ScoreHolder();
            holder.txtScore = (TextView)row.findViewById(R.id.txtScore);
            holder.txtScoreChange = (TextView)row.findViewById(R.id.txtScoreChange);
            holder.txtName = (TextView)row.findViewById(R.id.txtName);

            row.setTag(holder);
        }
        else
        {
            holder = (ScoreHolder)row.getTag();
        }

        Score scoreData = data[position];
        holder.txtName.setText(scoreData.name);
        holder.txtScore.setText(scoreData.score);

        return row;
    }

    static class ScoreHolder
    {
        TextView txtScore;
        TextView txtName;
        TextView txtScoreChange;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T01:12:35.953

调用 adapter.notifyDataSetChanged()。这将导致它重新填充列表视图，在所有可见视图上调用 adapter.getView。让 getView() 为其行设置正确的值。

# c++ - 在 C++ 中使用模板将函数作为参数传递？

> ID：14299406
> 
> 赞同：1
> 
> 时间：2013-01-13T00:26:18.450
> 
> 标签：c++, function, templates, parameters, containers

我在下面写的函数是计算处理一个函数需要多长时间。

```
// return type for func(pointer to func)(parameters for func), container eg.vector
clock_t timeFuction(double(*f)(vector<double>), vector<double> v)
{
    auto start = clock();
    f(v);
    return clock() - start;
} 
```

这是我想在我的 timeFunction 中测试的函数。

```
template<typename T>
double standardDeviation(T v)
{
    auto tempMean = mean(v); //declared else where
    double sq_sum = inner_product(v.begin(), v.end(), v.begin(), 0.0);
    double stdev = sqrt(sq_sum / v.size() - tempMean * tempMean);
    return stdev;
} 
```

standardDiviation 是用模板制作的，因此它可以接受任何 c++ 容器，我想对 timeFunction 做同样的事情，所以我尝试了以下方法。

```
template<typename T>
clock_t timeFuction(double(*f)(T), T v)
{
    auto start = clock();
    f(v);
    return clock() - start;
} 
```

但这给了我错误，例如不能使用函数模板“double standardDivation(T)”并且无法推断“重载函数”的模板参数

这就是我在main中调用函数的方式。

```
int main()
{
    static vector<double> v;
    for( double i=0; i<100000; ++i )
        v.push_back( i );

    cout << standardDeviation(v) << endl; // this works fine
    cout << timeFuction(standardDeviation,v) << endl; //this does not work

} 
```

我如何修复 timeFunction 使其适用于任何 C++ 容器。任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T00:47:00.553

我试图在 GCC 4.7.1 上编译这段代码。它编译并且工作正常。你用的是什么编译器？如果它不能推导出模板参数，则尝试明确指定它，即使用：

```
cout << timeFuction(standardDeviation< vector<double> >,v) << endl; 
```

此外，在提问时，您应该尝试删除所有不必要的代码。

```
#include <iostream>
#include <vector>

using namespace std;

template<typename T>
double standardDeviation(T v)
{
    return 5;
}

template<typename T>
int timeFuction(double(*f)(T), T v)
{
   // auto start = clock();
    f(v);
    return 0;//clock() - start;
}

int main()
{
    static vector<double> v;
    for( double i=0; i<100000; ++i )
        v.push_back( i );

    cout << standardDeviation(v) << endl; // this works fine
    cout << timeFuction(standardDeviation,v) << endl; // this also work

    return 0;
} 
```

# .net - .NET for Windows Store 中的 FileStream 在哪里？

> ID：14299410
> 
> 赞同：13
> 
> 时间：2013-01-13T00:26:45.987
> 
> 标签：.net, windows-store-apps

我正在创建一个 Windows 应用商店应用程序。我需要创建一个 FileStream 以便为专有文件格式编写一些复杂的数据。我将 System.IO 添加到我的用途中，但没有可用的 FileStream。

我正在调查更多内容，“.NET for Windows Store 应用程序概述”指南谈到了IsolatedStorage，这个库目前甚至不使用它。经过一番阅读，我认为真正的替代品可能是来自 nacemspace 的 FileRandomAccessStream：Windows.Storage.Streams

在 Windows 应用商店应用程序中使用 FileStream的**真正等价物是什么？**

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-13T01:20:10.033

实际上，沙盒在您可以读取/写入的位置方面有很多限制。以下是一些典型的位置：

如果您尝试从**应用程序的安装文件夹**加载资源，您可以使用以下内容：

*   `StorageFolder installFolder = Windows.ApplicationModel.Package.Current.InstalledLocation`

*   `StorageFile file = await StorageFile.GetFileFromApplicationUriAsync("ms-appx:///file.txt");`

（这是一个*只读*文件夹，因此您无法编辑或创建新文件。）

如果您尝试将数据文件写入**应用程序的数据文件夹**，您可以使用以下内容：

*   `StorageFolder localFolder = ApplicationData.Current.LocalFolder;`

*   `StorageFile file = await StorageFile.GetFileFromApplicationUriAsync("ms-appdata:///local/file.txt");`

（此文件夹是*可读写的*。您还可以通过将**本地**更改为其他两个文件夹之一来访问**漫游**或**临时文件夹。）**

 **还有一些其他文件夹，例如`DownloadsFolder`，尽管您只能访问应用程序下载的文件。

或者，您可以随时向用户请求使用`FileOpenPicker`和的权限`FileSavePicker`。选择器**不允许**访问`InstalledLocation`路径，但允许您访问`Documents`、`Pictures`和`Downloads`（即使您的应用程序没有下载该文件）。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-13T00:29:49.643

由于沙盒环境中运行的 Windows 应用商店应用程序已被替换为`StorageFile`. 有关文档，请参见此处：-

[http://msdn.microsoft.com/en-us/library/windows/apps/windows.storage.storagefile.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/windows.storage.storagefile.aspx)**

# jquery - 打开另一个视图响应 ajax 请求 cakephp

> ID：14299411
> 
> 赞同：0
> 
> 时间：2013-01-13T00:26:51.797
> 
> 标签：jquery, ajax, cakephp

我正在发送 ajax 请求以将一些表单数据发布到 cakephp 控制器中，然后将用户移动到另一个页面以上传一些图像。这是我所做的：

1-在 feedbacks/add controller/action 的 add.ctp 视图中，我添加了 javascript 代码。我使用了 jquery ajax 并发送了表单数据

2-在反馈控制器的添加操作中，我编写了以下代码：

```
public function add() {

        if ($this->RequestHandler->isAjax()) {

//commenting the next 3 lines has no effect
$this->layout = 'ajax'; // Or $this->RequestHandler->ajaxLayout, Only use for HTML
                $this->autoLayout = false;
                $this->autoRender = false;

            $response = array('success' => false);

            $data = $this->request->input(); // MY QUESTION IS WITH THIS LINE
           // var_dump($data);

            $this->render('/Uploads/add');
            // exit();
        } else {...} 
```

现在我可以在 firebug 中看到响应为 html，但浏览器不会重定向。

谁能告诉我这里的问题是什么？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T11:59:57.727

通常，当您使用这种表单提交时，您希望使用 JSON。这是我们使用 jQuery 的标准使用实现。

尝试开发一个好的 JSON 响应，[http://book.cakephp.org/2.0/en/views/json-and-xml-views.html](http://book.cakephp.org/2.0/en/views/json-and-xml-views.html)

在 jQuery 中等待成功发生：

```
jQuery.ajax({
    url:baseUrl + '/Uploads/add',
    type:'POST',
    data: dataInModel,
    success: function(data) {
        alert('you got success!');
        console.log(data);
        //example reloading uploads:
        $('#uploads').load(baseUrl + '/Uploads/index');
    }
}); 
```

在您的成功职能中，您可以随心所欲。因此，例如，您可以进行重新加载、重定向等操作。但这并不是真正的 ajax。如果您添加了上传，例如，如果您仅使用上传重新加载列表，它将是 ajax。这是我在上面的代码示例中添加的原始示例。

# c# - Html Agility Pack 来自多个页面的相同 html 源

> ID：14299412
> 
> 赞同：1
> 
> 时间：2013-01-13T00:26:52.490
> 
> 标签：c#, html, html-agility-pack

**任务**

我应该创建一个从 Amazon.com 网页中提取项目名称的应用程序。

**行动**

我想我会使用 Html Agility Pack 来完成这项工作，我想我已经有了一个解决方案，但是有一个错误一直存在。

**结果**

假设我试图从 n 个不同的站点中提取 html 源代码，该应用程序始终使用站点 1 - n 的第一个站点的源代码，我不知道为什么。当且仅当我重新启动计算机时，我才能从不同的网站提取 html。

**代码**

```
 private void extractHTML()
    {
        //retreive URL
        string address = txtURL.Text;
        string itemId = "result_0";

        //create document
        HtmlWeb webGet = new HtmlAgilityPack.HtmlWeb();
        HtmlAgilityPack.HtmlDocument document = webGet.Load(address);

        //look for name of result
        HtmlNode node = document.GetElementbyId(itemId);            
        if(node != null)
        {
            IEnumerable<HtmlNode> allH3 = node.Descendants("h3");

            foreach (HtmlNode h3 in allH3)
            {
                if (h3.ChildNodes[1].InnerHtml == null)
                {
                    continue;
                }
                else
                {
                    lblId.Text = itemId;

                    //dig down to lowest subnode to get correct InnerHtml
                    HtmlNode subNode = h3.ChildNodes[1];
                    if (subNode.ChildNodes.Count > 0)
                    {
                        lblName.Text = subNode.ChildNodes[subNode.ChildNodes.Count - 1].InnerHtml;
                        break;
                    }
                    else
                    {
                        lblName.Text = h3.ChildNodes[1].InnerHtml;                            
                        break;
                    }
                }
            }
        }            
    } 
```

非常感谢您的帮助！提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T16:52:09.157

如果，如评论中所述，您将诸如[http://www.amazon.com/s/ref=nb_sb_ss_i_0_5?url=search-alias%3Daps&field-keywords=radio&sprefix=radio%2Caps%2C182](http://www.amazon.com/s/ref=nb_sb_ss_i_0_5?url=search-alias%3Daps&field-keywords=radio&sprefix=radio%2Caps%2C182)之类的页面定位到尝试获取所有项目名称，然后是以下代码：

```
HtmlDocument doc = new HtmlDocument();
doc.Load(myHtmlFile);

foreach (HtmlNode node in doc.DocumentNode.SelectNodes("//span[@class='lrg bold']"))
{
    Console.WriteLine(node.InnerHtml);
} 
```

将输出：

```
Sony ICF-S10MK2 Pocket AM/FM Radio, Silver
Ambient Weather WR-111A Emergency Solar Hand Crank AM/FM/NOAA Digital Radio, Flashlight, Cell Phone Charger with NOAA Certified Weather Alert &amp; Cables
Sony ICF38 Portable AM/FM Radio (Black)
Coby CX39 World Band AM/FM/Shortwave Radio with Digital Display, Silver
Radio
Sony ICF-C318 Clock Radio with Dual Alarm (Black)
Sony Icf38 Portable Am Fm Radio Led Tuning Indicator Lg Spkr
TuneIn Radio
Sangean WR-2 Digital AM/FM Tabletop Radio, Walnut
SANGEAN WR-11 AM/FM Table Top Radio
Crosley Solo Radio CR221 Black
Sony ICF-C218 Automatic Time Set Clock Radio (Black)
Coby CXCD251BLK Portable CD Player with AM/FM Radio, Black
Sony ICFC414 Clock Radio
Radio
Panasonic RF-P50 Pocket AM/FM Radio, Silver 
```

XPATH 表达式将只获取所有将 CLASS 属性设置为“lrg bold”的 SPAN 元素。为了找到它，我只是查看了 HTML 的保存版本，并确定了项目名称的良好判别式。

我建议你学习一点 XPATH，因为它非常强大。一个很好的教程在这里：[XPATH 教程](http://www.w3schools.com/xpath/default.asp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T17:33:39.643

您是否考虑过使用亚马逊产品 API 而不是屏幕抓取？这里有很多示例[http://aws.amazon.com/code/Product-Advertising-API](http://aws.amazon.com/code/Product-Advertising-API)

# php - 如何找到 Phalcon 使用的所有视图？

> ID：14299417
> 
> 赞同：0
> 
> 时间：2013-01-13T00:27:59.440
> 
> 标签：php, phalcon

在呈现请求后，如何找到 phalcon 用于单个请求的所有视图？我想知道动作视图、控制器布局和主布局。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T02:56:12.913

您可以将侦听器附加到视图组件：

```
<?php

//Setting up the view component
$di->set('view', function() {

    // Create an event manager
    $eventsManager = new Phalcon\Events\Manager();

    // Attach a listener for type 'view'
    $eventsManager->attach('view', function($event, $view) {
        if ($event->getType() == 'beforeRenderView') {
            echo $view->getActiveRenderPath(), PHP_EOL;
        }
    });

    $view = new \Phalcon\Mvc\View();
    $view->setViewsDir('../app/views/');

    // Bind the eventsManager to the view component
    $view->setEventsManager($eventsManager);    

    return $view;

}, true); 
```

更多信息在这里：[http ://docs.phalconphp.com/en/latest/reference/views.html#view-events](http://docs.phalconphp.com/en/latest/reference/views.html#view-events)

# installation - 如何在freebsd上启用GMP？

> ID：14299421
> 
> 赞同：3
> 
> 时间：2013-01-13T00:28:23.510
> 
> 标签：installation, swi-prolog

我安装了 swi-prolog 如下：

```
$./configure --prefix=/home/***/swi-prolog/ --enable-gmp
$gmake && gmake check && gmake install

however, it still reports no GMP syupport:

?- random(33).
Warning: This version of SWI-Prolog is not compiled with GMP support.
Warning: Floating point random operations are not supported.
ERROR: is/2: Arithmetic: `random_float/0' is not a functionenter code here

$find /usr/local/lib -name "libgmp*"                                  
/usr/local/lib/libgmp.so.10
/usr/local/lib/libgmp.so
/usr/local/lib/libgmp.la
/usr/local/lib/libgmpxx.so.6
/usr/local/lib/libgmpxx.so
/usr/local/lib/libgmpxx.la
/usr/local/lib/libgmp.a
/usr/local/lib/libgmpxx.a 
```

我正在使用 FreeBSD 并且 swi-prolog 是稳定版本[http://www.swi-prolog.org/download/stable/src/pl-6.2.6.tar.gz](http://www.swi-prolog.org/download/stable/src/pl-6.2.6.tar.gz)。

任何建议表示赞赏！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-03T00:54:52.397

它通过设置 CFLAGS 和 LDFLAGS 来修复：

```
$echo $LDFLAGS                                       
-L/usr/local/lib
$echo $CFLAGS                                       
-I/usr/local/include
$./configure --prefix=/home/sw2wolf/swi-prolog/ --enable-gmp
$gmake && gmake install

$ldd ~/swi-prolog/lib/swipl-6.3.8/bin/i386-freebsd9.0/swipl                                                                                 
**libgmp.so.10** => /usr/local/lib/libgmp.so.10 (0x2815b000)
libexecinfo.so.1 => /usr/local/lib/libexecinfo.so.1 (0x281b9000)
librt.so.1 => /usr/lib/librt.so.1 (0x281c4000)
libreadline.so.6 => /usr/local/lib/libreadline.so.6 (0x281ca000)
libncursesw.so.5.9 => /usr/local/lib/libncursesw.so.5.9 (0x281ff000)
libm.so.5 => /lib/libm.so.5 (0x28229000)
libthr.so.3 => /lib/libthr.so.3 (0x28243000)
libc.so.7 => /lib/libc.so.7 (0x28264000)
libncurses.so.8 => /lib/libncurses.so.8 (0x28383000)
libtinfow.so.5.9 => /usr/local/lib/libtinfow.so.5.9 (0x283c3000) 
```

问候！

# c++ - 带指针的字符串数组

> ID：14299428
> 
> 赞同：-4
> 
> 时间：2013-01-13T00:29:29.907
> 
> 标签：c++, pointers

在以下代码中：

```
int main()
{
   char names[2][11] = {"Manchester","Party"};
   char (*jk)[11];
   jk = names;                    // LINE 1
   char gaming[10] = {"Jetking"};
   char (*po)[10];
   po = &gaming;                  // LINE 2
   cout<<"PO is "<<*po; 
```

第 2 行要求我将 & 放在游戏前面，而第 1 行不需要。当我不放 & 时，它为第 2 行给出的错误是，“错误：无法将 'char [10]' 转换为 'char (*)[10]' in assignment”？我不太明白这部分。由于“char (*po)[10];” 可以解释为指向 10 个字符的数组的指针。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T00:44:14.170

`char gaming[10]`是一个字符数组。当您编写 时`po = gaming`，游戏将转换为指向此分配的 char 的指针。`po`但是，它是一个指向字符*数组的指针。*

因此，最后，编译器会告诉您它不能将 a 转换`pointer to char`为 a `pointer to an array of chars`。就这样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T00:47:11.953

在任务中

```
jk = names; 
```

`names`type的数组`char[2][11]`被转换为指向其第一个元素的指针，因此它衰减为 a `char (*)[11]`。

`gaming``char*`, 但是在大多数情况下被转换为 a ，这与具有 ,`char*`的类型不兼容，因此赋值无效。如果你取的地址，你得到的正是所需的。`po``char (*)[10]``gaming``char (*)[10]`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-13T00:47:14.890

```
char (*po)[10]; 
```

`char`是一个指向 10项数组的指针。

数组表达式不会衰减为指向自身作为数组的指针。它衰减（当它衰减时）指向第一项的指针。因此，需要应用地址运算符，以及您收到的关于无法将数组表达式转换为指向数组的指针的错误消息。

# ruby-on-rails - 引导模态混淆轨道的简单链接

> ID：14299429
> 
> 赞同：0
> 
> 时间：2013-01-13T00:29:45.783
> 
> 标签：ruby-on-rails, twitter-bootstrap-rails

我不明白我的语法有什么问题，也许我需要另一双眼睛，这应该会导致用户单击 twitter 图像以弹出一个引导模式，但我收到了这个错误-

```
wrong number of arguments (3 for 2) 
```

`link_to`与`image_tag`- _

```
<li><%= link_to image_tag "/assets/twitter.png", "#myModal", :data => { :toggle =>"modal" } %></li> 
```

用于 html 的模态

```
<div id="myModal" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-header">
    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
    <h3 id="myModalLabel">Hey!</h3>
  </div>
  <div class="modal-body">
    <p>6 modals?</p>
  </div>
  <div class="modal-footer">
    <button class="btn" data-dismiss="modal" aria-hidden="true">Close</button>
  </div>
</div> 
```

我在这里俯瞰什么？感谢您的关注和查看。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T01:33:59.527

您需要在`image_tag`参数周围加上括号，如下所示：

```
<li><%= link_to image_tag("/assets/twitter.png"), "#myModal", :data => { :toggle =>"modal" } %></li> 
```

如果没有括号，Ruby 认为您将所有参数传递给`image_tag`，就像这样：

```
<li><%= link_to image_tag("/assets/twitter.png", "#myModal", :data => { :toggle =>"modal" }) %></li> 
```

有些人认为将所有参数包装在括号中以避免这种情况是一种很好的风格，而另一些人则更喜欢尽可能少的括号的更干净的外观。

# objective-c - 将 inmobi SDK 添加到我的 iOS 项目的问题

> ID：14299434
> 
> 赞同：0
> 
> 时间：2013-01-13T00:29:53.510
> 
> 标签：objective-c, xcode, admob

我正在使用 adMob 中介作为我的横幅提供程序，而且效果很好。现在我想将 inmobi 添加到中介中并按照说明进行操作，但是在尝试构建到我的 iPhone 时出现这些错误？

```
Undefined symbols for architecture armv7:
  "_SecPolicyCreateBasicX509", referenced from:
      _getIMPublicKeyWithCert in libInMobiCommons-3.6.5.a(IMCommonUtilPrivate.o)
  "_SecTrustCreateWithCertificates", referenced from:
      _getIMPublicKeyWithCert in libInMobiCommons-3.6.5.a(IMCommonUtilPrivate.o)
  "_SecTrustCopyPublicKey", referenced from:
      _getIMPublicKeyWithCert in libInMobiCommons-3.6.5.a(IMCommonUtilPrivate.o)
  "_SecKeyGetBlockSize", referenced from:
      -[IMCommonUtil EncodeRSA:publicKey:] in libInMobiCommons-3.6.5.a(IMCommonUtilPrivate.o)
  "_SecCertificateCreateWithData", referenced from:
      _getIMPublicKeyWithCert in libInMobiCommons-3.6.5.a(IMCommonUtilPrivate.o)
  "_SecKeyEncrypt", referenced from:
      -[IMCommonUtil EncodeRSA:publicKey:] in libInMobiCommons-3.6.5.a(IMCommonUtilPrivate.o)
  "_SecTrustEvaluate", referenced from:
      _getIMPublicKeyWithCert in libInMobiCommons-3.6.5.a(IMCommonUtilPrivate.o)
ld: symbol(s) not found for architecture armv7
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

我已将 libAdapterInMobi.a 添加到“链接框架和库”中，并将 SDK 添加到名为 inMobi 的文件夹中。我不知道我做错了什么，所以如果有人能告诉我或指导我，我会是活着的最快乐的人！;-)

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T23:01:17.470

您是否添加了[http://developer.inmobi.com/wiki/index.php?title=IOS](http://developer.inmobi.com/wiki/index.php?title=IOS)中列出的所有正确框架。

看起来您可能没有`Security`专门链接框架？

# android - MyLocation 按钮隐藏在透明操作栏后面，如何重新定位？

> ID：14299435
> 
> 赞同：11
> 
> 时间：2013-01-13T00:29:54.397
> 
> 标签：android, google-maps, google-maps-android-api-2

我在我的应用程序中添加了一个地图片段（API v2），地图覆盖了整个屏幕，顶部有一个半透明的操作栏。该活动使用**android:windowActionBarOverlay**设置为 true 的主题。

我还在地图上启用了“MyLocationButton”，但由于地图覆盖了屏幕的整个高度，所以按钮被操作栏覆盖。

![在此处输入图像描述](../Images/8731777a296e1e771fc470807b8177bd.png)

如何让地图片段在操作栏下方或屏幕底部绘制位置按钮？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-01T08:28:40.983

无需创建自己的按钮，只需根据操作栏大小移动内置按钮。
这段代码对我有用，按钮就是按钮应该在的位置（就像在谷歌地图中一样）：

```
// Gets the my location button
View myLocationButton = getSherlockActivity().findViewById(R.id.MainContainer).findViewById(2); 

// Checks if we found the my location button        
if (myLocationButton != null){
        int actionBarHeight = 0;
        TypedValue tv = new TypedValue();

           // Checks if the os version has actionbar in it or not
           if(Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB){
              if (getSherlockActivity().getTheme().resolveAttribute(android.R.attr.actionBarSize, tv, true))
                actionBarHeight = TypedValue.complexToDimensionPixelSize(tv.data,getResources().getDisplayMetrics());
           }
           // Before the action bar was added to the api
           else if(getSherlockActivity().getTheme().resolveAttribute(com.actionbarsherlock.R.attr.actionBarSize, tv, true)){
                actionBarHeight = TypedValue.complexToDimensionPixelSize(tv.data,getResources().getDisplayMetrics());
           }

        // Sets the margin of the button
        ViewGroup.MarginLayoutParams marginParams = new ViewGroup.MarginLayoutParams(myLocationButton.getLayoutParams());
        marginParams.setMargins(0, actionBarHeight + 20, 20, 0);
        RelativeLayout.LayoutParams layoutParams = new RelativeLayout.LayoutParams(marginParams);
        layoutParams.addRule(RelativeLayout.ALIGN_PARENT_RIGHT, RelativeLayout.TRUE);
        myLocationButton.setLayoutParams(layoutParams);
} 
```

只需将这段代码放在onActivityCreated中（如果你将它放在onCreateOptionsMenu中，它将不支持3.0之前的版本 - 因为生命周期不同。
另外，“R.id.MainContainer”是地图的容器片段。

我正在使用 ActionBar Sherlock，但它也适用于常规操作栏，只需进行一些修改..

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-12-05T21:14:48.920

您可以使用最近添加的[GoogleMap.setPadding()](https://developers.google.com/android/reference/com/google/android/gms/maps/GoogleMap#setPadding(int,%20int,%20int,%20int))方法完成此操作：

```
map.setPadding(leftPadding, topPadding, rightPadding, bottomPadding); 
```

从 API 文档：

> 此方法允许您在地图上定义可见区域，通过在地图的四个边缘中的每一个上设置填充来向地图发出信号，表明边缘周围的地图部分可能会被遮挡。地图功能将适应填充。例如，缩放控件、指南针、版权声明和 Google 徽标将被移动以适应定义的区域，相机移动将相对于可见区域的中心等。

另请参阅有关[填充如何在 GoogleMap 中工作的描述](https://developers.google.com/maps/documentation/android-sdk/map#map_padding)。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-06-18T01:25:15.153

下面（尤其是在 中`fixMapControlLocations`）我用 ActionBarSherlock 解决了这个问题。

我遇到的问题是在窄屏幕上，并且拆分操作栏的偏移量取决于旋转。通过夏洛克的`isNarrow`检查让我知道它是否狭窄。

另一个关键变化是我正在设置 myLocation 的父视图的填充。这会获取内部的所有控件，并且基于 hierarchyviewer 是谷歌地图的操作方式。Google 归属标志位于 Surface 对象中树的下一个父级上。看起来不太容易移动，所以我可能最终会失去底部操作栏的透明度效果以保持合规性。

```
protected void onCreate(Bundle savedInstanceState) {
    getWindow().requestFeature(Window.FEATURE_ACTION_BAR_OVERLAY);
    super.onCreate(savedInstanceState);
    setContentView(R.layout.map);
    setUpMapIfNeeded();

    getSupportActionBar().setBackgroundDrawable(d);
    getSupportActionBar().setSplitBackgroundDrawable(d);
}

private void setUpMapIfNeeded() {
    // Do a null check to confirm that we have not already instantiated the
    // map.
    if (map == null) {
        // Try to obtain the map from the SupportMapFragment.
        map = ((SupportMapFragment) getSupportFragmentManager()
                .findFragmentById(R.id.map)).getExtendedMap();

        // Check if we were successful in obtaining the map.
        if (map != null) {
            setUpMap();
        }
    }
}

private void setUpMap() {
    fixMapControlLocations();
    .....
}

private void fixMapControlLocations() {
    SupportMapFragment mapFragment = (SupportMapFragment) getSupportFragmentManager()
            .findFragmentById(R.id.map);
    int actionBarHeight = 0;
    TypedValue tv = new TypedValue();
    if (getTheme().resolveAttribute(android.R.attr.actionBarSize, tv, true))
    {
        actionBarHeight = TypedValue.complexToDimensionPixelSize(tv.data,getResources().getDisplayMetrics());
    }

    View myLocationParent = ((View)mapFragment.getView().findViewById(1).getParent());
    View myLocationParentParent = ((View)myLocationParent.getParent());
    myLocationParentParent.setPadding(0, actionBarHeight, 0, isNarrow()?actionBarHeight:0);
}

public boolean isNarrow() {
    return ResourcesCompat.getResources_getBoolean(getApplicationContext(),
            R.bool.abs__split_action_bar_is_narrow);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-17T10:24:49.760

这已作为增强功能提交（如果您还没有，请加注星标）[http://code.google.com/p/gmaps-api-issues/issues/detail?id=4670](http://code.google.com/p/gmaps-api-issues/issues/detail?id=4670)

作为一种临时解决方法，我在操作栏下方添加了自己的查找位置按钮（我的地图片段位于相对布局中，所以我只是做了 alignParentRight 并设置了适当的边距顶部）。

然后在我的 onClickHandler 中我这样做了：

```
public void onClickHandler(View target) {
   switch (target.getId()) {
      case R.id.my_fml_btn:         
         mMap.setMyLocationEnabled(true);
         View fmlBtn = mMapWrapper.findViewById(2); //mMapWrapper is my RelativeLayout
         if (fmlBtn != null) fmlBtn.setVisibility(View.INVISIBLE);
         break;
   }
} 
```

我使用 hierarchyviewer 来查找由 maps api 添加的按钮的 id。它恰好是添加到地图的第二个视图（并设置为不可见）。

您当然可以摆弄 LayoutParams 来偏移此按钮而不是隐藏它，但此按钮仅在您将 MyLocationEnabled 设置为 true 后才会出现！（在我的用例中，我更喜欢让用户在启动 gps 之前做出决定）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-13T00:41:20.507

确保您使用`?android:attr/actionBarSize`（或者`?attr/actionBarSize`如果您正在使用 ActionBarSherlock）正确偏移片段的内容。

根据您尝试实现的效果，将此值应用为边距或填充。我猜是因为半透明的 ActionBar，你会想尝试填充，以便仍然让地图出现在它后面（并保持透明效果）。我只是不能 100% 确定填充是否真的会将“定位我”按钮向下移动......如果不是，那么可能应用边距是您唯一的其他选择。

有关此属性的示例和更多详细信息，请参见[此处。](http://developer.android.com/guide/topics/ui/actionbar.html#GeneralStyles)

# opencv - 将c ++与c版本混合后的opencv链接错误

> ID：14299437
> 
> 赞同：0
> 
> 时间：2013-01-13T00:30:05.030
> 
> 标签：opencv, eclipse-cdt, windows-7-x64

我正在使用 Eclipse CDT（Indigo Service Release 2）在 Windows 7 64 位机器上使用 opencv 2.4.0。我按照 opencv 下载站点上描述的步骤从源代码（使用 cmake/visual studio express 10）编译了 opencv。

当我使用 opencv C 函数（在我的 C++ 代码中）时，一切都运行良好。当我尝试使用 cv::Mat 时，它给了我一个链接错误（例如：未定义的对 `cv::Mat::Mat(_IplImage const*, bool)' 的引用）。

*   我需要链接哪些库才能使 opencv C++ 函数与纯 C 函数一起工作？我已经与 opencv_core240 和其他我需要的链接，它适用于 opencv C 函数。

*   我注意到 2 个版本的 ocv 库，一个带有后缀“d”，即 opencv_core240 和 opencv_core240d。2有什么区别？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T02:03:42.663

```
#include <iostream>
#include <opencv2/core/core.hpp>
#include <opencv2/highgui/highgui.hpp>
#include <opencv2/imgproc/imgproc.hpp>

using namespace cv;
using namespace std;

int main()
{
    IplImage *image = cvLoadImage("C:\\any_picture.jpg");
    Mat m = Mat(image);
    imshow("test",m);
    waitKey();
    return 0;
} 
```

1.  通过链接调试文件（如 opencv_core240d.lib、opencv_highgui240d.lib、opencv_imgproc240d.lib）尝试上述代码
2.  将bin文件夹的路径添加到环境变量中
3.  尝试获取最新的opencv ie 2.4.3

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T22:30:06.957

找到了解决办法。当使用带有 mingw 工具链的 eclipse 时，您也应该使用 mingw 编译 opencv。从命令行编译opencv对我有用。

1.  [遵循 opencv InstallGuide](http://opencv.willowgarage.com/wiki/InstallGuide)中的“从命令行使用 GCC 编译”部分
2.  除了 mingw32-make、make -j 之外，还要执行“make install”。这将在您构建 opencv 二进制文件的文件夹中创建一个安装目录。opencv 库将被放置在 install/lib
3.  install/lib 中的 lib 文件将具有“.dll.a”扩展名，例如“libopencv_core243.dll.a”。要链接到项目中的这些 lib 文件，请转到 Properties->C/C++ General->Paths and Symbols->Libraries。然后添加不带前缀“lib”和后缀“.dll.a”的库名称。所以要链接到“libopencv_core243.dll.a”只需使用“opencv_core243”

# github - 如何修改嵌入式 Gist 的大小？

> ID：14299442
> 
> 赞同：0
> 
> 时间：2013-01-13T00:31:18.573
> 
> 标签：github, gist

可能吗？事实上，它目前在我的网页上看起来相当大，我想把它缩小。

如果它有所作为，我将使用与 Gist 一起显示的标准嵌入代码。就我而言，那是`<script src="https://gist.github.com/4090046.js"></script>`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T10:16:45.823

除非你：

*   更改该 GitHub js 脚本的来源（并将其存储在您的网站上）
*   [想要使用诸如packer](http://dean.edwards.name/packer/)之类的服务进行任何其他类型的修改（例如自己缩小 GitHub Javascript，并调用该缩小版），

您将无法从 GitHub 本身获得更短的 js 脚本。

# c - 如何使用写入函数格式化字符串？

> ID：14299443
> 
> 赞同：1
> 
> 时间：2013-01-13T00:31:22.117
> 
> 标签：c, unix

在我的 C 程序中，我正在使用命令终端打印一个字符串，`printf("%d %s %s\n", node->id, node->date, node->input);`但我现在需要使用 write 函数`write(STDOUT_FILENO, cmdline, strlen(cmdline));`......

如何像使用 printf 一样格式化字符串？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-13T00:32:32.443

使用[`sprintf`/`snprintf`](http://en.cppreference.com/w/c/io/fprintf)将字符串格式化为字符缓冲区，然后`write`使用它。

# r - R：根据另一列操作一个数据框列的值

> ID：14299445
> 
> 赞同：3
> 
> 时间：2013-01-13T00:31:47.030
> 
> 标签：r, dataframe, multiple-columns

假设您有银行账户信息：

```
a=data.frame(Transaction=c(1,2,6,3,8,3,5.25,6.99,2,5),type=c("CREDIT","DEBIT","DEBIT","DEBIT","DEBIT","CREDIT","CREDIT","CREDIT","DEBIT","CREDIT")) 
```

行包括第一列中的美元金额以及该金额是否已被提取或添加到帐户中。我想根据第二行来操纵第一行，如果它是贷方则保持正数，但如果它是借方则否定它。到目前为止，我想出的最好的是：

```
a$Transaction[a$type=="DEBIT"]=-a$Transaction 
```

我正在寻找一个简单的非循环解决方案，因为我相信 R 中存在这样的解决方案。谢谢，伙计们！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-13T00:44:14.480

我更喜欢逐步执行此操作，并创建一个索引向量：

```
R> ind <- a[,"type"] == "CREDIT"
R> ind
 [1]  TRUE FALSE FALSE FALSE FALSE  TRUE  TRUE  TRUE FALSE  TRUE
R> a[ind, "Transaction"] <- - a[ind, "Transaction"]
R> a
   Transaction   type
1        -1.00 CREDIT
2         2.00  DEBIT
3         6.00  DEBIT
4         3.00  DEBIT
5         8.00  DEBIT
6        -3.00 CREDIT
7        -5.25 CREDIT
8        -6.99 CREDIT
9         2.00  DEBIT
10       -5.00 CREDIT
R> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-13T00:43:12.470

```
a[a$type=="DEBIT",]$Transaction <- -a[a$type=="DEBIT",]$Transaction 
```

是你要找的。您需要逗号来指定您正在使用数据框的行这一事实。

# python - 在python中按多个条件排序

> ID：14299448
> 
> 赞同：8
> 
> 时间：2013-01-13T00:32:17.283
> 
> 标签：python, sorting

我是编程新手，现在我正在用 python 写一个排行榜。我想按第一分对我的联赛进行排序，如果有两支球队得分相同，我想按净胜球数对它们进行排序，如果它们的净胜球数相同，我想按名字排序。

第一个条件非常简单，通过以下方式起作用：

```
table.sort(reverse=True, key=Team.getPoints) 
```

如何插入以下两个条件？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-13T00:39:39.490

让`key`函数返回一个元组，其中项目按优先级降序排列：

```
table.sort(reverse=True, key=lambda team: (Team.getPoints(team),
                                           Team.getGoalDifference(team),
                                           Team.getName(team)) 
```

或者，您可以记住算法 101 中的一个事实，并利用该事实`.sort()`是一个**稳定**的排序，因此如果它们比较相等，则不会改变列表中项目的相对顺序。这意味着您可以按优先级升序排序 3 次：

```
table.sort(reverse=True, key=Team.getName)
table.sort(reverse=True, key=Team.getGoalDifference)
table.sort(reverse=True, key=Team.getPoints) 
```

这会更慢，但允许您轻松指定是否应该完成每个步骤`reverse`。这可以在不使用多次排序传递的情况下完成`cmp_to_key()`，但是比较器函数将是不平凡的，例如：

```
def team_cmp(t1, t2):
    for key_func, reverse in [(Team.getName, True),
                              (Team.getGoalDifference, True),
                              (Team.getPoints, True)]:
        result = cmp(key_func(t1), key_func(t2))
        if reverse: result = -result;
        if result: return result
    return 0

table.sort(functools.cmp_to_key(team_cmp)) 
```

（免责声明：以上内容是从内存中编写的，未经测试。）重点是“没有多次通过”，这并不一定意味着“更快”。比较器函数 and 的开销可能很大`cmp_to_key()`，这两者都是在 Python 中实现的（与`list.sort()`and相反，它应该是 C 核心的一部分）。`operator.itemgetter()`

顺便说一句，您不需要创建虚拟函数来传递给`key`参数。您可以使用以下方法直接访问该属性：

```
table.sort(key=lambda t: t.points) 
```

或[`attrgetter`](http://docs.python.org/2/library/operator.html#operator.attrgetter)运算符包装器：

```
table.sort(key=attrgetter('points')) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-13T00:35:15.243

首先按名称对列表进行排序，然后再按分数差异排序。Python`sort`是稳定的，这意味着它将保留比较相等的元素的顺序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T00:43:04.213

Python 排序算法是[Timsort](http://en.wikipedia.org/wiki/Timsort)，正如 ACEfanatic02 指出的那样，它是[稳定](http://en.wikipedia.org/wiki/Stable_sorting#Stability)的，这意味着保持顺序。[这个链接](http://www.hatfulofhollow.com/posts/code/timsort/index.html)有一个很好的视觉解释它是如何工作的。

# sql - 优化 Sql 查询：过滤未索引的字段

> ID：14299449
> 
> 赞同：2
> 
> 时间：2013-01-13T00:32:20.860
> 
> 标签：sql, oracle, rdbms

我有一个`Orders`存储订单的表，其中包含以下字段：

```
Id          
Date        
Amount      
Cost
Currency 
```

我尝试了以下查询：

```
SELECT SUM(Amount)-SUM(NFC1)
FROM Orders
WHERE Date BETWEEN '20121101' AND '20121231'
      AND Currency = 'EUR' 
```

现在，根据 Oracle SQL Developer 的说法，使查询变慢的是`Currency = 'EUR'`过滤器，因为其他操作的成本要低得多。

我检查了索引，我有一个索引`Id`，还有另一个索引`Date`。在我看来，通过查询分析，DBMS 首先找到与所需日期匹配的记录，然后扫描整个表以查找具有`Currency='EUR'`. `Currency`是一个`VARCHAR`。

有什么方法可以优化查询吗？我的意思是，有没有办法避免全扫描？

从一般的角度来看，是否可以阻止 DBMS 在已经按日期过滤的记录之后执行全表扫描，而是在已经按日期过滤的记录中查找匹配的记录`Currency`？

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T01:32:16.027

> 在我看来，通过查询分析，DBMS 首先找到与所需日期匹配的记录，然后扫描整个表以查找具有 Currency='EUR' 的记录。货币是 VARCHAR。

它不会扫描整个表。

相反，它从索引记录中获取行指针（如果表是 IOT，则为`rowid`'s 或`PRIMARY KEY`值），并在嵌套循环中查找表行中的货币。由于您使用的索引不包含`Currency`，因此需要以某种方式查找它以进行过滤。

要解决此问题，您需要在`(Currency, Date)`

如果创建另一个索引不是一个选项，您可以尝试创建一个`MATERIALIZED VIEW`并在其上创建一个索引。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T09:07:52.683

> 有什么方法可以优化查询吗？我的意思是，有没有办法避免全扫描？

全面扫描可能只是可用的最优化计划。通过完全扫描表，从表的大部分过滤数据通常会更快。数据库可以使用快速、顺序的磁盘读取。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T00:36:32.933

如果您经常使用这两个字段进行过滤，则在字段上构建索引`Currency`或复合索引`Date``Currency`

# asp.net-web-api - 向微风 js 公开域对象元数据并跟踪更改

> ID：14299451
> 
> 赞同：4
> 
> 时间：2013-01-13T00:32:40.203
> 
> 标签：asp.net-web-api, breeze

我想开始在现有应用程序中使用微风 js。此应用程序已经有现有服务，该服务公开从实体框架数据对象映射的域对象。

我想将这些域对象元数据公开，以便我可以使用它在客户端跟踪这些实体并保存更改。当这些更改从微风中保存时，我会计算出服务器端需要做什么才能将这些更改持久保存到我的数据对象中。

我查看了微风示例中提供的 EF 上下文提供程序，想知道创建一个新的上下文提供程序需要什么来包装我的域模型（而不是 DBContext）以公开其元数据并实现自定义保存逻辑？

有人已经这样做了吗？是否有微风管道？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T06:49:03.353

[在此处](http://www.breezejs.com/documentation/download)找到的示例 zip 中提供了一个 ToDo-NoEF 示例。它展示了如何与服务器上的任意 IQueryable 进行通信。这是你要找的吗？

# scala - 创建一个自定义 scala 集合，其中地图默认返回自定义集合？

> ID：14299454
> 
> 赞同：6
> 
> 时间：2013-01-13T00:32:59.180
> 
> 标签：scala, collections, type-inference, scala-collections, scala-2.10

该特征`TraversableLike[+A, +Repr]`允许创建一个集合，其中*一些*函数将返回 a `Repr`，而其他函数继续返回`That`函数的类型参数。有没有办法定义一个`CustomCollection[A]`where 函数，如`map`,`++`和其他函数将默认`That`，就`Repr`好像没有以其他方式推断一样？

这是一个代码片段，希望能描述我想要的内容：

```
case class CustomCollection[A](list: List[A]) extends TraversableLike[A, CustomCollection[A]] {
  protected[this] def newBuilder = new CustomCollectionBuilder[A]
  def foreach[U](f: (A) => U) {list foreach f}
  def seq = list
}

class CustomCollectionBuilder[A] extends mutable.Builder[A, CustomCollection[A]] {
  private val list = new mutable.ListBuffer[A]()
  def += (elem: A): this.type = {
    list += elem
    this
  }
  def clear() {list.clear()}
  def result(): CustomCollection[A] = CustomCollection(list.result())
}

object CustomCollection extends App {
  val customCollection = CustomCollection(List(1, 2, 3))
  println(customCollection filter {x => x == 1}) // CustomCollection(1)
  println(customCollection map {x => x + 1}) // non-empty iterator
} 
```

我希望最后一行是`CustomCollection(2, 3, 4)`.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-13T01:14:45.190

您需要设置一个提供精炼`CanBuildFrom`实例的伴随对象：

```
import collection.TraversableLike
import collection.generic.{CanBuildFrom, GenericCompanion, GenericTraversableTemplate,
  TraversableFactory}
import collection.mutable.{Builder, ListBuffer}

object CustomCollection extends TraversableFactory[CustomCollection] {
  def newBuilder[A] = new CustomCollectionBuilder[A]
  implicit def canBuildFrom[A]: CanBuildFrom[Coll, A, CustomCollection[A]] = 
    new CanBuildFrom[Coll, A, CustomCollection[A]] {
       def apply(): Builder[A, CustomCollection[A]] = new CustomCollectionBuilder()
       def apply(from: Coll): Builder[A, CustomCollection[A]] = apply()
    }
}
case class CustomCollection[A](list: List[A]) extends Traversable[A]
with TraversableLike[A, CustomCollection[A]]
with GenericTraversableTemplate[A, CustomCollection] {
  override def companion: GenericCompanion[CustomCollection] = CustomCollection
  def foreach[U](f: A => U) { list foreach f }
  override def seq = list
}

class CustomCollectionBuilder[A] extends Builder[A, CustomCollection[A]] {
  private val list = new ListBuffer[A]()
  def += (elem: A): this.type = {
    list += elem
    this
  }
  def clear() {list.clear()}
  def result(): CustomCollection[A] = CustomCollection(list.result())
}

val customCollection = CustomCollection(List(1, 2, 3))
val f = customCollection filter {x => x == 1} // CustomCollection[Int]
val m = customCollection map {x => x + 1}     // CustomCollection[Int] 
```

# c# - NHibernate - 保存新实体后查询错过查询缓存

> ID：14299456
> 
> 赞同：6
> 
> 时间：2013-01-13T00:33:06.437
> 
> 标签：c#, nhibernate, fluent-nhibernate, linq-to-nhibernate

我有 NHibernate （带有[NHibernate.Linq](http://nuget.org/packages/NHibernate.Linq)和[Fluent NHibernate](http://www.fluentnhibernate.org/)）设置了查询缓存。一切正常，直到我做一个`session.Save(new Widget())`（即 SQL `INSERT`）。在那之后，该类型`Widget`的所有查询都会错过查询缓存。其他实体类型的查询被缓存得很好。

```
using (ISession session = MySessionFactory.OpenSession())
{
    using (var transaction = session.BeginTransaction())
    {
        // this INSERT screws things up
        var widget = new Widget {Name = "Foo"};
        session.Save(widget);

        var query = (from w in session.Query<Widget>().Cacheable()
                     where w.Name == "Bar"
                     select w);

        var fetched1 = query.FirstOrDefault();
        var fetched2 = query.FirstOrDefault(); // miss?!

        transaction.Commit();
    }
} 
```

如果我开始一个新`Transaction`的，问题仍然存在。如果我开始一个新`Session`的，问题就会消失。这似乎有点奇怪，因为我的理解是二级缓存每`SessionFactory`（不是`Session`）重置。

我认为这并不重要，但我正在使用`HashtableCacheProvider`，因为我现在只是在测试。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-13T07:10:30.323

您描述的行为是正确的*（[更多here](http://nhibernate.hibernatingrhinos.com/28/first-and-second-level-caching-in-nhibernate)）*。

> 在您提交事务之前，更新时间戳缓存不会更新！这是为了确保您不会从缓存中读取“未提交的值”。

`type`每当我们在 Cache 中获得的a 发生变化时- 缓存的数据都是陈旧的......直到提交完整的事务。

想象一下，你已经缓存了这个过滤器的结果：

```
 var query = (from w in session.Query<Widget>().Cacheable()
  where w.Name == "B*" // all names starting with B
  select w); 
```

稍后将添加新的 Widget：

```
var widget = new Widget {Name = "Brigitte"};
session.Save(widget);
// explicit Flush is not needed, 
// but then, until Commit(), query will never return Brigitte
session.Flush(); // to immediately execute INSERT 
```

如果查询仍然被缓存，Brigitte 将永远不会出现......

在 Transaction 中，使用 FirstOrDefault() 的查询会立即执行 - 写入操作可能会等待 Flush on Commit。

由于事务，所有包含的操作（插入、更新、选择）都无法从缓存中受益，因为只有事务作为批处理才有意义。所以在调用 commit 之前，不能使用缓存。

可以在此处找到许多详细且非常有用的信息：[NHibernate 中的一级和二级缓存](http://nhibernate.hibernatingrhinos.com/28/first-and-second-level-caching-in-nhibernate)

> 每当写入表时，时间戳缓存就会更新，但以一种棘手的方式：
> 
> *   当我们执行实际写入时，我们将一个未来某处的值写入缓存。所以现在所有命中缓存的查询都不会找到它，然后命中数据库获取新数据。由于我们处于交易中间，他们会等到我们完成交易。如果我们使用低隔离级别，并且另一个线程/机器尝试将旧结果放回缓存中，它不会保留，因为更新时间戳是未来的。
> *   当我们对事务执行提交时，我们用当前值更新时间戳缓存。

# php - 仅当满足 php 条件时才运行 javascript 函数

> ID：14299461
> 
> 赞同：0
> 
> 时间：2013-01-13T00:34:04.817
> 
> 标签：php, javascript, html

我希望 start_uploading 函数仅在满足所有条件并且文件正在上传时才启动，现在在提交表单时会弹出“正在加载”消息，但它不符合所有上传条件。

```
if(condtion){// don't start function} else

if(move_uploaded_file($_FILES['uploaded']['tmp_name'], $target)) {
  //now start function} else echo "error"; 
```

javascript

```
function start_Uploading(){
  document.getElementById('message').innerHTML = 'Loading... <br> Please Wait';
  return true;
} 
```

和 html

```
<form action="something.php" method="POST" enctype="multipart/form-data"
 onsubmit="start_Uploading();"> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T00:37:33.160

由于您正在检查 php 中的条件是否为真，因此我只会在满足条件时才回显 js 方法名称。

像这样：

```
<?php
  if(true) $onsubmit = "start_Uploading();"; // Put actual condition in parantheses
  else $onsubmit = "";
?> 
```

然后以您的形式：

```
<form action="something.php" method="POST" enctype="multipart/form-data"
onsubmit="<?php echo $onsubmit; ?>"> 
```

如果不满足条件，则不会提供方法名称，js 根本不知道提交时要查找什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T00:46:14.907

`move_uploaded_file()`正在将上传的文件从apache的临时目录复制到用户目录，所以当你提交文件时，在php端可以开始处理该文件之前它已经上传到临时目录。

因此，我建议您使用客户端 (javascript) 表单验证，或对 AJAX 文件上传和/或表单验证进行研究。PHP 是一种服务器端语言，在页面加载之前运行。不在页面内。（除非它是来自客户端的 AJAX 调用。）

# graphviz - Graphviz 中的奇怪行为（错误？）

> ID：14299463
> 
> 赞同：3
> 
> 时间：2013-01-13T00:34:13.217
> 
> 标签：graphviz

我正在尝试使用`dot`GraphViz 附带的程序（版本 2.28.0 (20121023.0419)）来转换以下 graphviz 文件：

```
digraph {
1 [
  shape=none
  ,label=<<TABLE BGCOLOR="lightblue2" BORDER="0" CELLBORDER="0" STYLE="rounded" ><TR><TD><FONT FACE="Helvetica" POINT-SIZE="20">Heading 1</FONT></TD></TR>
                 <TR><TD>Body 1<BR /></TD></TR></TABLE>>
  ];
3 [
  shape=none
  ,label=<<TABLE><TR><TD><FONT FACE="Helvetica" POINT-SIZE="16">Heading 2</FONT></TD></TR>
                 <TR><TD>Body 2<BR /></TD></TR></TABLE>>
  ,color=lightblue2];
2 [
  shape=none
  ,label=<<TABLE><TR><TD><FONT FACE="Helvetica" POINT-SIZE="16">Heading 3</FONT></TD></TR>
                 <TR><TD>Line 1<BR />Line 2<BR /></TD></TR></TABLE>>
  ,color=lightblue2];
} 
```

首先，我尝试运行以创建 PDF（在 Linux 和 Mac OS 上的结果相同）：

> dot -Tpdf -Gcharset=utf8 test.dot > output.pdf

![](../Images/3a32163b8fa77ed6c2870fee158087bf.png)

**问题：**

1.  不正确的字体渲染：标题 1 带有下划线，标题 3 是斜体，但它们都使用完全相同的字体指定。
2.  第一个节点周围的边框：我指定`BORDER="0"`但显然在使用 STYLE="rounded" 时边框仍然可见...

接下来我尝试创建一个 SVG 文件，它解决了字体渲染问题：

> 点 -Tsvg -Gcharset=utf8 test.dot > output.svg

![](../Images/827e3fc5a3c1cc023e5c4d66a94e9efc.png)

如您所见，文本溢出了节点的边界。即使我将 a 添加`FIXEDWIDTH="FALSE"`到表中，也会发生这种情况。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T14:17:38.260

白天好！我建议您尝试降级到 2.26.3 版本的 dot-graphviz。除了点程序忽略第一个表中的属性 STYLE 之外，我和你做了同样的事情并得到了正确的结果。所以它没有被四舍五入。

# arrays - AS3：如何从字符串中获取数组名称

> ID：14299467
> 
> 赞同：0
> 
> 时间：2013-01-13T00:34:46.377
> 
> 标签：arrays, string, actionscript-3, dynamic, multidimensional-array

我正在尝试将临时数组中的二维数组复制到永久数组中。问题是它试图复制到的数组是动态的。

我正在寻找一种方法来让字符串（新的数组名称）充当数组的实际名称，而不是数组任何部分的值。我环顾四周，这大致就是我得出的结论：

```
(this["dynamicArrayName"]) = tempArray; 
```

或者

```
(this[variableWithName]) = tempArray; 
```

（甚至不确定这是复制二维数组的最佳方法）。

但是，这不起作用:(。它出现了很多错误（不是语法）。如果有某种方法可以将字符串转换为数组/变量名称，那么了解它会很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T01:55:48.373

只需在第一个示例中删除括号即可。

```
function someFunc():void {
    var temp:Array = [1,2,3];
    this['someArr'] = temp;
}

trace(this['someArr']);
// will output "undefined"

someFunc();
trace(this['someArr']);
// will output "1,2,3" 
```

# php - 如何从复杂的xml中解析文本和图像

> ID：14299468
> 
> 赞同：0
> 
> 时间：2013-01-13T00:34:49.830
> 
> 标签：php, xml, simplexml

我希望你能帮助我。XML 文件如下所示：

```
<channel><item>
<description>
<div>  <a href="http://image.com">
<span>   
<img src="http://image.com" /> 
</span>
</a>
Lorem Ipsum is simply dummy text of the printing etc... 
</div>
</description>
</item></channel> 
```

我可以获取描述标签的内容，但是当我这样做时，我会得到其中有很多 css 的整个结构，我不想要那个。我真正需要的是仅解析 href 链接和 Lorem Ipsum 文本。我正在尝试使用简单的 XML，但找不到，看起来太复杂了。有任何想法吗？

**编辑：** 我用来解析 xml 的代码

```
$file = new SimpleXMLElement($mydata);
{

    foreach($file->channel->item as $post)
{

    echo $post->description; } } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T17:59:40.950

该 XML 看起来非常像 RSS 或 Atom 提要（或其中的摘录）。该`description`节点通常会被转义，或放置在标记为 的部分中`<![CDATA[ ... ]]>`，这表明其内容将被视为原始文本，即使它们包含`<`、`>`或`&`。

您的示例并未表明这一点，但如果您`echo`为您提供包括`img`标签等在内的全部内容，那么这就是正在发生的事情，并且您的问题类似于[Trying to Parse Only the Images from an RSS Feed](https://stackoverflow.com/questions/14246656/trying-to-parse-only-the-images-from-an-rss-feed) - 您需要抓取整个`description`内容，并将其解析为自己的文档。

如果由于某种原因 HTML 没有被转义，并且实际上作为一组子节点包含在 XML 中，则可以直接访问链接的 URL（假设结构始终一致）：

```
echo (string)$post->description->div->a['href']; 
```

至于文本，SimpleXML 将连接特定元素的所有文本内容（但不是来自其子元素），如果您使用`(string)`(`echo`自动转换为字符串“强制转换为字符串”，但我猜你会想做其他事情而不是`echo`最终使用它）。

在您的示例中，您想要的文本位于第一个（也是唯一一个）div 中，因此将显示它：

```
echo (string)$post->description->div; 
```

但是，您提到了“很多 CSS”，我想您为了简单起见已将其排除在示例之外，因此我不确定您的真实内容是否一致。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T01:52:29.007

那会很复杂。~~那里没有 XML，只有 html。一个区别是一个标签不能包含另一个标签和 XML 中的一些文本。这就是为什么~~我会使用 PHP 的[DOM](http://php.net/manual/de/book.dom.php)（我还没有使用过，但它类似于纯 JavaScript）。

这是我一起破解的（未经测试）：

```
// first create our document
$doc = new DOMDocument('1.0', 'utf-8');
$doc->loadHTML("your html here"); // there is also a loadHTMLFile

// this tries to get an a element which has a href and returns that href
function getAHref ( $doc ) {
    // now get all a elements to get the one with a href
    $aElements = $doc->getElementsByTagName( "a" );
    foreach ( $aElements as $a ) {
        // has this element a href? than return
        if ( $a->hasAttribute( "href" ) ) {
            return $a->getAttribute( "href" );
        }
    }
    // failed? return false
    return false;
}

// tires to get the text in the node
// in your example the text isn't wrapped in anything so this is going to be difficult
function getTextFromNode ( $doc ) {
    // get and loop all divs (assuming the text is always a child of a div)
    $divs = $doc->getElementsByTagName( "div" ); // do we know it's always in that div?
    foreach ( $divs as $div ) {
        // also loop all child nodes to get the text nodes
        foreach ( $div->childNodes as $child ) {
            // is this a text node?
            if ( $child->nodeType == XML_TEXT_NODE ) {
                // is there something in it (new lines count as text nodes)
                if ( trim( $child->nodeValue ) != "" ) {
                    // *pfew* got it
                    return $child->nodeValue;
                }
            }
        }
    }
    // failed? return false
    return false;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T20:35:25.387

这是回答问题的最终代码。

```
$xml = simplexml_load_file('myfile.xml');

$descriptions = $xml->xpath('//item/description');

foreach ( $descriptions as $description_node ) {

    $description_dom = new DOMDocument();
    $description_dom->loadHTML( (string)$description_node );

    $description_sxml = simplexml_import_dom( $description_dom );

    $imgs = $description_sxml->xpath('//img');
    $text = $description_sxml->xpath('//div');

    foreach($imgs as $image){

    echo (string)$image['src'];     
       }
    foreach($text as $t){

        echo (string)$t;
       }
    } 
```

这是 IMSoP 的代码，我添加了`$text = $description_sxml->xpath('//div');`以读取`<div>`.

在我的例子中，xml 中的一些帖子有多个`<div>`和`<span>`标签，所以要解析所有这些，我可能必须`->xpath`为 the`<span>`或`if... else`语句添加另一个，这样如果我没有任何内容`<div>`，则回显`<span>`内容。感谢您的回复。

# javascript - 使用 Backbone.js 或 Marionette.js 检测何时从页面中删除视图

> ID：14299470
> 
> 赞同：2
> 
> 时间：2013-01-13T00:35:03.997
> 
> 标签：javascript, backbone.js, marionette

将 Backbone.js 与 Marionette.js 一起使用（去 Derick Bailey！）。需要检测何时从页面中删除视图。具体来说，我正在用另一个视图覆盖它。

是否有一个事件我可以检测到我可以重载以检测何时发生这种情况？

谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-13T01:18:18.723

Marionette[`View.onClose`](https://github.com/marionettejs/backbone.marionette/blob/master/docs/marionette.view.md#view-close)为此提供了方法：

```
Backbone.Marionette.ItemView.extend({
  onClose: function(){
    // custom cleanup or closing code, here
  }
}); 
```

在 vanilla Backbone 中，您可以覆盖该`View.remove`方法：

```
Backbone.View.extend({
  remove: function(){
    // custom cleanup or closing code, here

    // call the base class remove method 
    Backbone.View.prototype.remove.apply(this, arguments);
  }
}); 
```

如果您只是破坏视图的 DOM 元素，这些方法都不起作用。如果这是您的情况，解决方案很简单：不要那样做。在渲染另一个视图之前显式删除前一个视图。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-13T01:17:45.690

区域显示功能将完成您​​正在寻找的大部分内容

[https://github.com/marionettejs/backbone.marionette/blob/master/docs/marionette.region.md#basic-use](https://github.com/marionettejs/backbone.marionette/blob/master/docs/marionette.region.md#basic-use)

并在页面后面查看 on show 事件

# sorting - g.Raphael 饼图对图表数据进行排序，而不是颜色、url

> ID：14299472
> 
> 赞同：2
> 
> 时间：2013-01-13T00:35:12.087
> 
> 标签：sorting, pie-chart, graphael

考虑：

```
value1 = 5;
v1_color = #ff0000;

value2 = 4;
v2_color = #00ff00;

value3 = 3;
v3_color = #0000ff;

var r = Raphael("holder");
pie = r.piechart(320,320,250,{value1,value2,value3},{colors: [v1_color, v2_color,v3_color]}); 
```

这将产生一个饼图，上面的切片是红色的，右下角的切片是绿色的，最后一个切片是蓝色的。但是，如果像这样更改值：

```
value1 = 4;
value2 = 3;
value3 = 5; 
```

图表看起来完全一样，但颜色不再代表正确的值。在[源代码](https://github.com/DmitryBaranovskiy/g.raphael/blob/master/g.pie.js)中，第 99-101 行显示了正在排序的值，但仅此而已。

我想要一种颜色对应于某个变量，无论它有多大，而不是让最大的变量获得选项中列出的第一个颜色。

在它绘制切片的代码部分（第 133 行）中，它指的是`opts.matchColors`，但我找不到任何关于在调用函数时如何设置它的文档。

任何想法如何实现这一目标？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-16T00:35:08.533

不幸的是 opts.matchColors 根本没有记录，因为它正是您所需要的。

opts.matchColors 强制它将颜色数组的顺序与值数组的顺序相匹配。当值按大小重新排序时，颜色将以其原始值应用于楔形。

matchColors 默认为 false，因此您需要在选项数组中显式设置它，如下所示：

```
var pie = r.piechart(320, 320, // 中心
                     250, // 半径
                     [
                         值1，
                         值2，
                         价值3
                     ],
                     {
                         颜色 ： [
                                            v1_color,
                                            v2_color,
                                            v3_color
                                        ],
                          匹配颜色：真
                     });

```

# android - 使用 RSS 数据更新列表

> ID：14299476
> 
> 赞同：0
> 
> 时间：2013-01-13T00:35:33.930
> 
> 标签：android, rss, android-listview, android-asynctask

我正在努力在 ListView 中显示一些 RSS 数据。我正在阅读异步任务类提供的 onProgressUpdate() 方法。

我想知道是否可以使用此方法在检索 XML 中的每个项目时更新列表视图？

我在这里重写了方法：

```
 @Override
    protected void onProgressUpdate(Integer... values) {
        adapter.notifyDataSetChanged();

    } 
```

我收到此错误：

**引起：android.view.ViewRootImpl$CalledFromWrongThreadException：只有创建视图层次结构的原始线程才能触摸它的视图。**

有什么想法我哪里出错了吗？

编辑：我刚刚读到一篇文章，说这个错误是由于试图从`doInBackground()`方法内部的后台线程中更新 UI 线程而产生的。就我而言，我`onProgressUpdate()`在`doInBackground()`方法中调用了。我试图在下载每个项目时添加列表填充的效果。

任何关于我如何实现这一目标的建议都会很棒！

日志猫：

```
01-13 00:41:09.195: E/AndroidRuntime(32239): FATAL EXCEPTION: AsyncTask #1
01-13 00:41:09.195: E/AndroidRuntime(32239): java.lang.RuntimeException: An error occured while executing doInBackground()
01-13 00:41:09.195: E/AndroidRuntime(32239):    at android.os.AsyncTask$3.done(AsyncTask.java:299)
01-13 00:41:09.195: E/AndroidRuntime(32239):    at java.util.concurrent.FutureTask.finishCompletion(FutureTask.java:352)
01-13 00:41:09.195: E/AndroidRuntime(32239):    at java.util.concurrent.FutureTask.setException(FutureTask.java:219)
01-13 00:41:09.195: E/AndroidRuntime(32239):    at java.util.concurrent.FutureTask.run(FutureTask.java:239)
01-13 00:41:09.195: E/AndroidRuntime(32239):    at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:230)
01-13 00:41:09.195: E/AndroidRuntime(32239):    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1080)
01-13 00:41:09.195: E/AndroidRuntime(32239):    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:573)
01-13 00:41:09.195: E/AndroidRuntime(32239):    at java.lang.Thread.run(Thread.java:856)
01-13 00:41:09.195: E/AndroidRuntime(32239): Caused by: android.view.ViewRootImpl$CalledFromWrongThreadException: Only the original thread that created a view hierarchy can touch its views.
01-13 00:41:09.195: E/AndroidRuntime(32239):    at android.view.ViewRootImpl.checkThread(ViewRootImpl.java:4746)
01-13 00:41:09.195: E/AndroidRuntime(32239):    at android.view.ViewRootImpl.requestLayout(ViewRootImpl.java:823)
01-13 00:41:09.195: E/AndroidRuntime(32239):    at android.view.View.requestLayout(View.java:15468)
01-13 00:41:09.195: E/AndroidRuntime(32239):    at android.view.View.requestLayout(View.java:15468)
01-13 00:41:09.195: E/AndroidRuntime(32239):    at android.view.View.requestLayout(View.java:15468)
01-13 00:41:09.195: E/AndroidRuntime(32239):    at android.view.View.requestLayout(View.java:15468)
01-13 00:41:09.195: E/AndroidRuntime(32239):    at android.widget.RelativeLayout.requestLayout(RelativeLayout.java:318)
01-13 00:41:09.195: E/AndroidRuntime(32239):    at android.view.View.requestLayout(View.java:15468)
01-13 00:41:09.195: E/AndroidRuntime(32239):    at android.widget.AbsListView.requestLayout(AbsListView.java:1819)
01-13 00:41:09.195: E/AndroidRuntime(32239):    at android.widget.AdapterView$AdapterDataSetObserver.onChanged(AdapterView.java:813)
01-13 00:41:09.195: E/AndroidRuntime(32239):    at android.widget.AbsListView$AdapterDataSetObserver.onChanged(AbsListView.java:5958)
01-13 00:41:09.195: E/AndroidRuntime(32239):    at android.database.DataSetObservable.notifyChanged(DataSetObservable.java:37)
01-13 00:41:09.195: E/AndroidRuntime(32239):    at android.widget.BaseAdapter.notifyDataSetChanged(BaseAdapter.java:50)
01-13 00:41:09.195: E/AndroidRuntime(32239):    at android.widget.ArrayAdapter.notifyDataSetChanged(ArrayAdapter.java:286)
01-13 00:41:09.195: E/AndroidRuntime(32239):    at com.example.simplerss.MainActivity$PostTask.onProgressUpdate(MainActivity.java:148)
01-13 00:41:09.195: E/AndroidRuntime(32239):    at com.example.simplerss.MainActivity$PostTask.doInBackground(MainActivity.java:123)
01-13 00:41:09.195: E/AndroidRuntime(32239):    at com.example.simplerss.MainActivity$PostTask.doInBackground(MainActivity.java:1)
01-13 00:41:09.195: E/AndroidRuntime(32239):    at android.os.AsyncTask$2.call(AsyncTask.java:287)
01-13 00:41:09.195: E/AndroidRuntime(32239):    at java.util.concurrent.FutureTask.run(FutureTask.java:234)
01-13 00:41:09.195: E/AndroidRuntime(32239):    ... 4 more 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T00:42:29.140

> 就我而言，我在 doInBackground() 方法中调用 onProgressUpdate()。

你必须打电话`publishProgress()`。如果您直接调用`onProgressUpdate()`，那仍然从后台线程运行，因此将失败。

您应该查看 AsyncTask[文档](http://developer.android.com/reference/android/os/AsyncTask.html)，它们提供了一个示例。

# magento - Magento 不翻译愿望清单产品名称和描述

> ID：14299477
> 
> 赞同：0
> 
> 时间：2013-01-13T00:35:57.990
> 
> 标签：magento, translation

我有一个正在使用两种语言设置的开发性 Magento 商店。除了侧边栏愿望清单和“我的帐户”愿望清单无论如何都显示西班牙语选项外，一切都很完美。一切都会切换，即“我的愿望清单”标题标题，甚至自动写入“请输入您的评论......”的电子邮件给朋友的框也会正确更改。但产品名称和描述是西班牙语。我在这里尝试过这个建议：[Wishlist don´t capture store views lenguage](http://www.magentocommerce.com/boards/viewthread/280274/)

有没有人知道如何解决这个问题或我可能设置不正确？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T21:05:06.267

我在 Magento 1.6.2CE 上也遇到了这个问题。- 在切换商店语言时，产品名称保持默认语言。

在文件 Wishlist\Model\Item.php arround line 319 上，您需要删除以下代码行：

```
public function getProduct()
{
    $product = $this->_getData('product'); // <-- remove this line 
```

$product 对象再次使用正确的商店过滤器重新加载。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T06:04:22.227

我不太了解这个场景，但根据你的标题，我想出了这个。有没有机会，您是否在 HTML 块上手动编码文本？

我遇到了这个问题，我所做的是找到调用文本的代码片段。在那里我用下面的代码改变了它，而不是直接使用文本本身。希望这是有道理的。

```
<?php $this->__('Customers'); ?> 
```

# graph - 核心情节与核心图形

> ID：14299479
> 
> 赞同：1
> 
> 时间：2013-01-13T00:36:09.570
> 
> 标签：graph, core-graphics, core-plot

我是ios开发新手。我必须绘制一些图表（条形图、饼图、散点图），我应该使用核心图还是可以使用核心图形来做到这一点。哪一个在性能、内存和速度上会更好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T03:24:00.913

Core Plot 可能使用 Core Graphics。从本质上讲，它可以完成没有它你会做的事情。

一般规则是先做最简单的事情，然后看看你有什么性能问题，*然后*优化。正如谚语所说，“过早的优化是万恶之源”——这意味着试图猜测什么会很慢（或者内存不足，或者其他什么）会导致比你解决的问题更多的问题。

所以，使用核心情节。如果发现导致性能问题，看能不能在Core Plot中解决；如果是这样，您应该将您的修复贡献回 Core Plot 项目，以便该库的所有用户都能获得相同的好处（如果他们处于您的情况，您可能会让他们这样做）。

当且仅当你发现 Core Plot 没有做你需要它做的事情并且无法扩展来做它，或者它破坏了你的表现并且以某种方式无法修复，那么，只有这样，你才应该写您自己的绘图代码，注意避免引起同样的问题。

# c# - 尝试使用 C# 从 Google 检索令牌的错误请求

> ID：14299481
> 
> 赞同：0
> 
> 时间：2013-01-13T00:36:16.183
> 
> 标签：c#, oauth

我正在尝试复制此处详述的过程；[https://developers.google.com/accounts/docs/OAuth2WebServer#handlingtheresponse](https://developers.google.com/accounts/docs/OAuth2WebServer#handlingtheresponse)

在 C# 中

```
 String authorizationCode = String.Empty;
        String consumerKey       = String.Empty;
        String consumerSecret    = String.Empty;
        String redirectUrl       = String.Empty;
        String grantType         = String.Empty;
        String requestContent = String.Empty;
        HttpWebRequest request = null;
        byte[] byteArray = null;
        Stream dataStream = null;
        WebResponse response = null;
        StreamReader reader = null;
        String serverResponse = String.Empty;

        byte[] authorizationResult = null;

        try
        {
            authorizationCode = HttpUtility.UrlEncode(context.Request.QueryString["code"]);
            consumerKey       = Properties.Settings.Default.GoogleConsumerKey;
            consumerSecret    = Properties.Settings.Default.GoogleConsumerSecret;
            redirectUrl       = Properties.Settings.Default.RedirectUrl;
            grantType = "authorization_code";

            request = (HttpWebRequest)WebRequest.Create("https://accounts.google.com/o/oauth2/token");
            request.Method = "POST";

            requestContent = String.Format("code={0}&client_id={1}&client_secret={2}&redirect_url={3}&grant_type={4}",authorizationCode,consumerKey,consumerSecret,redirectUrl,grantType);
            byteArray = Encoding.UTF8.GetBytes(requestContent);

            request.ContentType = "application/x-www-form-urlencoded";
            request.ContentLength = byteArray.Length;

            dataStream = request.GetRequestStream();
            dataStream.Write(byteArray, 0, byteArray.Length);
            dataStream.Close();

            response = request.GetResponse();
            dataStream = response.GetResponseStream();

            reader = new StreamReader(dataStream);
            serverResponse = HttpUtility.UrlDecode(reader.ReadToEnd());

            reader.Close();
            dataStream.Close();
            response.Close();

        }
        catch (System.Exception ex)
        {
            throw ex;
        }
        finally
        {

        } 
```

问题是在调用 GetResponse() 时我收到了错误的请求。

ConsumerKey & Secret 是我在注册应用程序时从 Google 获得的。授权码也来自谷歌。

任何想法我做错了什么？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-12T11:53:54.213

我有同样的问题：“使用”关键字为我解决了这个问题。点击链接：

[https://stackoverflow.com/a/1968543/1820776](https://stackoverflow.com/a/1968543/1820776)

# html - pre tag width:100% or max-width:100% overflow:auto 不灵活

> ID：14299495
> 
> 赞同：8
> 
> 时间：2013-01-13T00:38:47.610
> 
> 标签：html, css

这是一个示例的链接： [http ://whiterootmedia.com/database/dusty_arlia/the_img_tag_and_its_attributes.html](http://whiterootmedia.com/database/dusty_arlia/the_img_tag_and_its_attributes.html)

我的标签元素将包含长行代码。每当其容器更改为 width:auto（宽度低于 1200 像素）时，标签的宽度都不会缩小。我希望窗口继续缩小，并且元素的宽度有一个滚动条。

目前我有这个CSS：

> 预{溢出：自动；最大宽度：100%}

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-18T19:39:09.523

我将此 css 添加到我的`display:table;`容器中：

```
table-layout:fixed;
width: 100%; 
```

CSS`display:table`布局更难设置样式。如果您刚刚开始，只需使用 float 在容器中定位 div。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T12:34:44.967

您的 css 文件中有固定值，请查看`pre`when <的样式`1200px`

**article_two_column.css:101**

`@media only screen and (min-width: 336px) {`...

**article_two_column.css:103**

```
pre {
    max-width: 260px; 
} 
```

**article_two_column.css:87**

`@media only screen and (min-width: 728px) {`...

**article_two_column.css:89**

```
pre {
    max-width: 652px;
} 
```

将值设置为`%`，您将获得流畅的结果（请记住，您还可以设置小数，而不仅仅是 int）。

# java - 创建一个 Java 完成对象，以便消费者可以等待这些对象的逻辑组合

> ID：14299496
> 
> 赞同：1
> 
> 时间：2013-01-13T00:39:12.137
> 
> 标签：java, concurrency

我正在研究一个可编写脚本的对象模型，其中包括用于异步计算的完成对象，以便最终用户脚本可以等待完成对象的逻辑组合。问题是，如果我通过`wait()`and `notify()`/使用内置监视器对象，`notifyAll()`则[没有等待多个对象的机制](https://stackoverflow.com/questions/6265225/java-how-can-a-thread-wait-on-multiple-objects)；如果我使用[`CountDownLatch`](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/CountDownLatch.html)它还不清楚如何组合多个对象。

我想要这样的东西：

```
/** object representing the state of completion of an operation
  * which is initially false, then becomes true when the operation completes */
interface Completion
{
    /** returns whether the operation is complete */
    public boolean isDone();
    /** waits until the operation is complete */
    public void await() throws InterruptedException;
}

class SomeObject
{
    public Completion startLengthyOperation() { ... } 
}

class Completions
{
    public Completion or(Completion ...objects);
    public Completion and(Completion ...objects);
} 
```

以便脚本或最终应用程序可以执行此操作：

```
SomeObject obj1, obj2, obj3;
... /* assign obj1,2,3 */
Completion c1 = obj1.startLengthOperation();
Completion c2 = obj2.startLengthOperation();
Completion c3 = obj3.startLengthOperation();
Completion anyOf = Completions.or(c1,c2,c3);
Completion allOf = Completions.and(c1,c2,c3);
anyOf.await();  // wait for any of the 3 to be finished
... // do something
allOf.await();  // wait for all of the 3 to be finished
... // do something else 
```

如果我使用 using 来实现，这个`and()`案例很容易处理`CountDownLatch`——我只是以任何顺序等待所有这些。但是我该如何处理这个`or()`案子呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T00:43:59.503

听起来像[Guava 的`ListenableFuture`](http://docs.guava-libraries.googlecode.com/git-history/release/javadoc/com/google/common/util/concurrent/ListenableFuture.html)，或者至少像你应该适应一些想法。关键是能够为完成一个事情添加监听器。此时，实现相当简单：您只需创建一个`Completion`对象并向每个目标添加侦听器以将`Completion`其标记`or` `Completion`为完成。

# python - 蓝图中的烧瓶应用程序对象

> ID：14299497
> 
> 赞同：1
> 
> 时间：2013-01-13T00:39:14.503
> 
> 标签：python, global-variables, global, flask

我知道访问烧瓶应用程序 obj 的方法正在使用`current_app`，但是，每次运行该代码时，都会出现此错误：**NameError: global name 'current_app' is not defined**

我在这里做错了什么？

我的文件夹结构是这样的：

```
/project
   gateway.py
   settings.py
   /app
      views.py
      models.py 
```

我无法从views.py 或models.py 访问应用程序对象：S 总是得到同样的错误。

views.py 文件声明了一个在 gateway.py 文件中注册的蓝图。

我`current_app`在 views.py 文件中的视图函数中使用。

希望您能够帮助我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T06:07:40.510

确保你有

```
from flask import Flask, current_app 
```

在您的代码中并确保您正确调用它，因为在某些情况下它不会被调用。

# c# - DynamicMethod 可以访问它之外的变量吗？

> ID：14299499
> 
> 赞同：1
> 
> 时间：2013-01-13T00:40:10.920
> 
> 标签：c#, .net

动态方法能否像普通方法或代码一样工作，因为它可以访问通常可以访问变量的变量、调用方法和初始化变量（当然是在方法的范围内）？

我见过的唯一例子是它被传递了一些参数并返回一些值，并且没有改变它之外的任何变量。

我说的是 System.Reflection.Emit.DynamicMethod 类。我很难理解它，因为需要使用我还不太了解的 MSIL。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T01:04:51.800

是的。DynamicMethod 可以附加到一个类，在这种情况下，它可以访问类私有静态字段（如果 DynamicMethod 是实例方法，则可能访问类私有字段，但我不记得这是否是受支持的方案）。它还可以访问在其中创建 DynamicMethod 的程序集内部的程序集内部方法、属性和类型。

您使用动态方法的场景是什么？

我有一些关于动态编程的博客文章，包括一些关于在我的博客上使用 DynamicMethod 类的条目：[http](http://robpaveza.net/tag/dynamic-programming) ://robpaveza.net/tag/dynamic-programming 。具体来说，[这篇文章](http://robpaveza.net/improving-performance-with-dynamic-methods-part-1-the-problem-definition)讲的是如何计算文件修订证明，你可以在[这里](https://code.google.com/p/jinxbot/source/browse/trunk/development/projects/BNSharp/MBNCSUtil/Util/CheckRevisionCompiler.cs)看到结果实现（显然，我没有写过第 2 部分，但我链接的 BN# 中的实现是分析的结果）。

让我带您了解 Compile 方法：

1.  类型 parameterType = typeof(uint).MakeByRefType()

最后一个方法是取出uint参数；此行获取对 uint-ref 运行时类型的引用。如果我用普通的 C# 编写方法声明，它将如下所示：

```
public static void CheckRevision(out uint a, out uint b, out uint c, out uint s); 
```

38-40。foreach（公式中的字符串公式） CompileStandardFormula（生成器，公式）

正如我在我的博客文章中提到的那样，我所做的数学总是以以下形式提供：

```
A=A-S B=B-C C=C+A A=A+B 
```

其中 A、B 和 C 是状态变量，S 是输入（文件中的下一个 uint 值）。

CompileStandardFormula 函数发出 IL 计算所示四个操作中的一个单独操作的逻辑。回想一下，CLR 是一个基于堆栈的状态机，数学运算发生在堆栈上的值被弹出和结果被压入的情况下。因此，例如，对于 A=AS，将发出以下 IL：

```
ldarg.0  // push &A, which is a reference to the location that actually contains the value of A
ldarg.0  // push &A
ldind.u4 // dereference the top-most value on the stack, which puts the actual value of &A ready for operation
ldarg.3  // push &S
ldind.u4 // dereference &S
sub      // subtracts [stack-1] from [stack-2], which effectively is A-S
stind.u4 // remember the first ldarg.0? That's getting accessed now and the subtraction result is going there 
```

所以，在这一点上，应该很容易弄清楚：我的 DynamicMethod 编译了更新文件中单次传递的所有状态变量所需的数学运算。在发出所有 IL 之后，因为我们知道堆栈的状态上没有任何内容（无论如何，比方法进入时更多），我们可以抛出一个快速的“ret”指令，我们就完成了。

无论如何，希望这会有所帮助。

# uitableview - UITableView 与上面的透明度分组以显示其背后的内容？

> ID：14299503
> 
> 赞同：0
> 
> 时间：2013-01-13T00:40:43.300
> 
> 标签：uitableview, uiview, uiviewcontroller, uiscrollview, parallax

是否可以使分组的 UITableView 在其内容上方和下方透明。我不是在寻找视差类型的解决方案，但我有一个 UITableView 可以添加到我的视图控制器中。当下拉表视图时，我想显示视图控制器视图（表视图是我们的子视图）。

现在，当我添加与视图控制器视图具有相同框架的 UITableView 并将其添加为子视图时，当我在 UITableView 上向下拖动时，第一个单元格上方的标题与我的 UITableView 的背景颜色相同。相反，我希望它在用户向下拖动时越来越多地揭示其背后的内容。

这可能吗？如何？谢谢。

# android - 使用 Android 主题处理版本的常见做法

> ID：14299505
> 
> 赞同：0
> 
> 时间：2013-01-13T00:40:53.957
> 
> 标签：android, android-4.2-jelly-bean

据我了解，保留原生外观和感觉是 android 上的推荐做法，但我不禁注意到编译的默认组件在 Jellybean 上不会显示为 Holo。这是否意味着我们必须在版本 11 的文件夹 styles.xml 中指定 Holo 并在其他地方设置默认值？指定自定义主题来实现原生体验似乎违反直觉。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T00:51:00.887

在为多个平台版本编码时，您确实需要指定一个主题。

在 下`res/values/styles.xml`，你应该有类似的东西：

```
<resources>
    <style name="AppTheme" parent="@android:style/Theme.Black" />
</resources> 
```

然后在`res/values-v11/styles.xml`

```
<resources>  
    <style name="AppTheme" parent="@android:style/Theme.Holo" />
</resources> 
```

然后在您的 AndroidManifest.xml 中，您应该将主题指定为：

```
android:theme="@style/AppTheme" 
```

但是，如果您根本没有指定任何主题（所以没有`android:theme`属性），Android 应该会自动转到设备的默认主题。

# ruby-on-rails - 根据用户选择存储和验证不同的类型

> ID：14299507
> 
> 赞同：0
> 
> 时间：2013-01-13T00:41:00.170
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我有一个用户创建测验问题的应用程序。他们可以从各种答案类型中进行选择：是/否布尔值、真/假布尔值、整数、字符串等。

a) 我应该如何存储这些答案？在字符串类型的一列中？或者，还有更好的方法？

b) 当用户回答问题时，我将如何处理验证？不同的答案类型将需要不同的验证。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T01:08:28.330

我会建议两列，两者都是`Strings`. 做第一个`answer`，另一个`answer_type`。

然后，您可以创建自定义验证：

```
class MyValidator < ActiveModel::Validator
  def validate(record)
    if record.answer_type == 'String'
      # preform String validations on record.answer
    else if record.answer_type == 'Integer'
      # preform Integer validations on record.answer
    else if record.answer_type == 'Boolean'
      # preform Boolean validations on record.answer
  end
end 
```

# linux - 使用 sudo 权限在 pyCharm 中调试？

> ID：14299509
> 
> 赞同：24
> 
> 时间：2013-01-13T00:41:03.953
> 
> 标签：linux, pycharm

`pyCharm`我已经通过运行测试了需要 root 访问权限的代码，`sudo pycharm.sh`但这不是我推荐的方式。

我知道可以通过在 pyCharm 中将 python 解释器作为 sudo 运行来使用 sudo 权限进行调试，但我们该怎么做呢？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-13T17:16:04.630

创建一个执行“sudo python”并转发参数的 shell 脚本，并将该脚本配置为 PyCharm 中的 Python 解释器。

此 shell 脚本的名称应以`python`（来源：http: [//forum.jetbrains.com/message/PyCharm-424-3](http://forum.jetbrains.com/message/PyCharm-424-3)）开头。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2019-06-17T03:45:28.620

在 PyCharm 新版本中，它具有在根目录下运行 Python 解释器的配置，无需解决方法。见下图。选中复选框：使用此解释器通过 sudo 以 root 权限执行代码

[![在此处输入图像描述](../Images/b793065ea38f6874497827d4e779e7b7.png)](https://i.stack.imgur.com/J23MM.png)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2017-06-02T08:22:17.650

对于它的价值，我已经成功地运行了一个具有 sudo 特权（在 Ubuntu 16.04 上）的 python 脚本，如下所示：

1.  在脚本的第一行，像这样定义解释器：

    **`#!/usr/bin/sudo python`**

2.  使脚本可执行：

    **`chmod +x myscript.py`**

3.  直接运行脚本，*无需*自己指定`python`解释器：

    **`./myscript.py`**

4.  该脚本将要求输入 sudo 密码并以提升的权限继续运行。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2020-02-20T23:47:37.067

对于那些寻找更清洁的解决方案并且不介意每次都输入密码的人。

转到您的**运行配置**>**编辑配置**

在“执行”下，选中“**在输出控制台中模拟终端”**选项。

这将允许您在维护当前用户的同时调试 Python 脚本，并在需要时为脚本提供提升的 sudo 权限。如果您跨多个项目工作，它还可以更轻松地维护不同的虚拟环境。

[![在此处输入图像描述](../Images/2d178239f98119a4d2febc1259ccd75d.png)](https://i.stack.imgur.com/Lcm8T.png)

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2018-07-31T15:46:24.720

我在尝试在 Raspberry Pi 上调试蓝牙相关代码时遇到了同样的问题。我想，由于您正在设备上进行远程调试，因此该设备仅供开发使用。在这种情况下，在我不起眼的选择中，您应该允许 ssh root 登录，因此您可以将 PyCharm 配置为使用 root 用户，而无需 sudo。这就是我选择的解决方案。

以下说明适用于 Raspberry Pi，但任何 Linux 发行版的过程都相同：

首先，将您的公钥添加到`authorized_keys`：

```
cat ~/.ssh/id_rsa.pub | ssh pi@raspberrypi "mkdir -p ~/.ssh && cat >> 
~/.ssh/authorized_keys" 
```

然后登录树莓派：

```
ssh pi@raspberrypi 
```

拥有控制台后，将密钥复制到`root`目录中：

```
sudo mkdir /root/.ssh
sudo cp authorized_keys /root/.ssh/ 
```

最后编辑`sshd_config`添加`PermitRootLogin without-password`：

```
sudo vim /etc/ssh/sshd_config 
```

使用您喜欢的编辑器。

现在您可以以 root 身份在 Raspberry Pi 中进行 ssh：

```
ssh root@raspberrypi 
```

根据 BlueZ 的要求，使用`root`instead 或`pi`user，您可以使用 root 权限远程运行您的代码。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2017-06-19T21:15:05.153

我遇到了另一种解决这个问题的方法，所以我想分享它（这个答案更像是其他答案的替代品）。

这里值得一提的是，该解决方案通过在 root 模式下仅运行某个 Python 脚本（在 pPyCharm IDE 中）而不是整个 PyCharm 应用程序来“解决”问题。

**1）禁用**运行Python需要密码：

这将通过编辑***/etc/sudoers.d/python***文件来实现。我们需要做的是在该文件中添加一个条目，如下所示：

用户主机 = (root) NOPASSWD: full_path_to_python，例如：

```
guya ubuntu = (root) NOPASSWD: /usr/bin/python 
```

笔记：

`user`可以通过命令检测：`whoami`

`host`可以通过命令检测：`hostname`

**2）创建**一个“sudo脚本”：这个脚本的目的是赋予Python以root用户身份运行的权限。

创建一个名为 python-sudo.sh 的脚本，并将以下内容添加到其中：

```
#!/bin/bash
sudo /usr/bin/python "$@" 
```

再次注意，路径是上一阶段的 Python 路径。此外，此路径是系统上 Python2 的路径。

不要忘记使用以下命令为此脚本授予执行权限： `chmod`

```
chmod +x python-sudo.sh 
```

**3) 使用**脚本`python-sudo.sh`作为 PyCharm 解释器：

在 PyCharm 中转到：`File --> Settings --> Project interpreter`

在右上角单击“设置”图标，然后单击“添加本地”。

在浏览器选项中选择`python-sudo.sh`我们之前创建的脚本。这将使 PyCharm 有权以 root 身份运行 Python 脚本。

**4) 调试**测试：剩下要做的就是在 PyCharm IDE 中调试特定的 Python 脚本。这可以通过右键单击要调试的脚本轻松完成 --> 点击`Debug sample_script_to_debug.py`

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2017-12-26T21:18:28.880

`/usr/bin/python3`我通过在家中复制解决了这个问题，然后设置`cap_net_bind_service`功能：

```
cp /usr/bin/python3 ~/python35-setcap
sudo setcap 'cap_net_bind_service=+ep' ~/python35-setcap 
```

然后`~/python35-setcap`在 pycharm 中用作 python 解释器。

这样，您可以绑定较低的端口，但不是任何 python 3 程序都可以做到，pycharm 仍然可以杀死您的脚本。如果您想要更高的安全性，您还可以限制自己的执行权限。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2017-06-02T08:34:33.073

终端：

```
sudo ./Pycharm 
```

这样你就可以以超级用户身份启动 PyCharm

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2019-11-29T03:28:33.603

我按照[此处](https://esmithy.net/2015/05/05/rundebug-as-root-in-pycharm/)的说明操作并成功。但是有一个问题是使用 sudo 时 PYTHONPATH 无效。所以当你编辑

```
sudo visudo -f /etc/sudoers.d/python 
```

补充一点：

```
user host = (root) NOPASSWD:SETENV: /home/yizhao/anaconda3/bin/python 
```

你的脚本也应该是：

```
#! /bin/bash
sudo PYTHONPATH=$PYTHONPATH /home/name/anaconda3/bin/python "$@" 
```

# android - Android - 使用多维字符串数组

> ID：14299511
> 
> 赞同：2
> 
> 时间：2013-01-13T00:41:40.543
> 
> 标签：android, string, multidimensional-array, matrix

我在使用多维字符串数组时遇到了麻烦，希望能有任何清晰的说明。

我将在下面发布一个示例代码，我编写该代码只是为了了解多维字符串数组的工作原理。我在评论中写下了我期望发生的事情以及我期望的结果，但事实并非如此。我的问题几乎是为什么它不像我想的那样工作，它应该创建矩阵 [1][2][3]

[4][5][6]

还有一个额外的问题，如果我已经设置了 2x3 矩阵，我如何重新分配特定元素中的值，例如 [1][1]，或者我是否必须调用该行并将其分配给一个变量。整个示例代码是为了让我学习如何在多维字符串数组中分配元素，然后重新分配它们。这些字符串数组列表，我不知道提前的维度和值的变化，我需要使用 .add 方法并最终使用 .set。

提前感谢您的任何帮助，令人惊叹的社区似乎在 Stack Overflow

```
TextView displayanswer;
String text0, text1, text2, text3, text4, text5, text6;
ArrayList<String> column = new ArrayList<String>();
ArrayList<ArrayList<String>> row = new ArrayList<ArrayList<String>>();

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.test1);
    displayanswer = (TextView) findViewById(R.id.textView1);

    //Creates Matrix in column variable of [1][2][3]
    column.add("1");
    column.add("2");
    column.add("3");  

    row.add(column);  //Creates Matrix in row variable of [1][2][3]
    row.add(column);  //Creates 2 dimension matrix of  [1][2][3]
                     //                                [1][2][3]

    column.set(0, "4"); //column variable Matrix becomes  [4][2][3]
    column.set(1, "5"); //column variable Matrix becomes  [4][5][3]
    column.set(2, "6"); //column variable Matrix becomes  [4][5][6]
    row.set(1,column);  //2 dimensional matrix becomes  [1][2][3]
                                                                  //[4][5][6]

           column = row.get(0); //get first row of 2 row matrix, should be[1][2][3]

    //Assigning first row elements to text strings
    text0 = column.get(0); text1 = column.get(1); text2 = column.get(2);

    column = row.get(1); //gets second row of 2 row matrix, should be [4][5][6]

    //Assigning second row elements to text strings
    text3 = column.get(0); text4 = column.get(1); text5 = column.get(2);

    //should give me 123456 but instead I get 456456???
    displayanswer.setText(""+text0 +text1 +text2 +text3 +text4 +text5);

} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T01:07:21.533

我猜你是在假设当你向列表中添加一些东西时，它会创建数据的副本。然而，事实并非如此。该列表将包含对您正在添加的数据的引用，而不是实际内容本身的（副本）。

因此，即使下面的评论是正确的，因为您要添加两次“列”对象...

```
row.add(column);  //Creates Matrix in row variable of [1][2][3]
row.add(column);  //Creates 2 dimension matrix of  [1][2][3] 
```

...两个列表条目将引用同一个对象。然后，通过尝试更改一列的值，您实际上是在更改引用的对象，因此您正在更改两个条目。这就是你最终得到“456456”的原因。

这实际上会影响两列，因为前两个位置引用了同一个对象：

```
column.set(0, "4"); //column variable Matrix becomes  [4][2][3]
column.set(1, "5"); //column variable Matrix becomes  [4][5][3]
column.set(2, "6"); //column variable Matrix becomes  [4][5][6] 
```

以下是不正确的：

```
row.set(1,column);  //2 dimensional matrix becomes  [1][2][3]
                                                              //[4][5][6] 
```

两个条目都发生了变化（因为它们都引用同一个对象），因此您最终得到：

```
[4][5][6]
[4][5][6] 
```

要“修复”这个问题，请确保在添加第二列之前创建一个新的“列”对象。或者，如果您希望继续修改同一个对象，请确保将数据的副本添加到列表中。例如：

```
//Creates Matrix in column variable of [1][2][3]
column.add("1");
column.add("2");
column.add("3");

row.add(new ArrayList<String>(column));
row.add(new ArrayList<String>(column)); 
```

之后，您可以安全地更改`column`而不影响列表的内容。您还可以直接操作列表内容，因为我们将数据副本添加为行，因此每个条目都指向不同的对象。希望这是有道理的。

`Matrix`附带说明：如果您打算做更复杂的事情，我可能会考虑创建一个实际的课程。列表对于表示矩阵并不是特别理想。或者，您周围可能有大量矩阵实现可以学习或借鉴。只是一个想法。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T01:18:11.063

看看你做了什么：

```
column.add("1");
column.add("2");
column.add("3"); 
```

和

```
column.set(0, "4"); //column variable Matrix becomes  [4][2][3]
column.set(1, "5"); //column variable Matrix becomes  [4][5][3]
column.set(2, "6"); //column variable Matrix becomes  [4][5][6] 
```

这就是您看到 456 的原因，因为您正在用 4、5 和 6 覆盖索引 0、1 和 2

我为您制作了一个测试脚本，以便您更好地理解它：

```
import java.util.ArrayList;

public class Initialize {

static ArrayList<String> column = new ArrayList<String>();
static ArrayList<String> newColumn  = null;
static ArrayList<ArrayList<String>> row = new ArrayList<ArrayList<String>>();

public static void main(String[] str){

    // Stuffing the column ArrayList for later use
    for( int i = 1; i <= 6; i++ ){
        column.add( Integer.toString(i) );
        if( i == 6 ){
            row.add( column );
            break;
        }
    }

    for( int rowsCounter = 0; rowsCounter < row.size(); rowsCounter++ ){
        //this is where you can print the row content
        System.out.println( "Row index: " + rowsCounter );

        //passing the row content to a new ArrayList so that we can print the elements for the next loop
        if( newColumn == null ){
            newColumn = new ArrayList<String>();
        }
        newColumn = row.get(rowsCounter);

        for( int colsCounter = 0; colsCounter < column.size(); colsCounter++ ){
            //this is where you can print the column content
            System.out.println( "Column index: " + colsCounter + " | value: " + column.get(colsCounter) );
        }

    }
} 
```

}

如果您仍然不明白，请尝试重复它，如果您遇到困难，请寻求帮助！祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-01T02:08:05.167

在 MH 的回答的帮助下，我想出了一个简单的例子：

（我遇到的最大问题与 OP 相同：带有内部数组列表的数组列表仅创建引用，而不是副本！我下面的示例创建了一个副本）

```
//Create list objects
ArrayList<String> innerArray = new ArrayList<String>();     //Columns with data
ArrayList<ArrayList<String>> outterArray = new ArrayList<ArrayList<String>>();  //Rows with columns

//Populate row 1
innerArray.add("Row1: Column1");                        //column1
innerArray.add("Row1: Column2");                        //column2
innerArray.add("Row1: Column3");                        //column3
outterArray.add(new ArrayList<String>(innerArray));     //add contents to main array
innerArray.clear();                                     //clear contents since we added it to main array and want it empty for next row

//Populate row 2
innerArray.add("Row2: Column1");                        //column1
innerArray.add("Row2: Column2");                        //column2
innerArray.add("Row2: Column3");                        //column3
outterArray.add(new ArrayList<String>(innerArray));                                 //add contents to main array
innerArray.clear();                                     //clear contents since we added it to main array and want it empty for next row

//Display all data from array
int index=0;
for(ArrayList<String> row : outterArray){
    Log.w(TAG,"(Row"+index+") " + row.get(0) + " | "+row.get(1)+ " | "+row.get(2));
    index++;
} 
```

# javascript - 在javascript中加入多个回调/线程？

> ID：14299513
> 
> 赞同：9
> 
> 时间：2013-01-13T00:41:55.520
> 
> 标签：javascript, callback

我正在寻找一个 Thread.Join() 类型的东西。假设我在 javascript 中触发了 4 个事件。我想执行代码，但只有在完成所有 4 个回调之后。我怎么做？我能想到的唯一方法是通过 global var 检查是否有 4 个回调正在处理中，在这种情况下我会忽略或抛出异常。但否则在每个回调中执行类似 globalVar++ 的操作，并在每个回调结束时调用 IsItDone() 来检查 globalVar 是否为 == 4。

但是..我有点不喜欢它，特别是因为我需要使用全局变量。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-13T00:57:14.200

您可以自己串起一个队列并包装回调，但这有点毛茸茸。幸运的是，有大量的图书馆可以提供帮助。我不喜欢 counter 方法，因为有时很难知道*哪些*回调尚未触发。

我是“延迟”风格的粉丝。比如这个库：[https ://github.com/heavylifters/deferred-js](https://github.com/heavylifters/deferred-js)

或者对于完全不同的 API，请参阅 Step.js [https://github.com/creationix/step](https://github.com/creationix/step)

或者在这里查看封装此问题的其他微型库：http: [//microjs.com/#defer](http://microjs.com/#defer)

* * *

或者只是通过调用设置一些外部状态，然后`done`在每个回调中调用一个共享函数来自己做。

```
var complete = {
  first: false,
  second: false
};

doFirstAsync(function() {
  complete.first = true;
  allDone();
});

doSecondAsync(function() {
  complete.second = true;
  allDone();
});

var allDone = function() {
  if (complete.first && complete.second) {
    alert("done with all async!");
  }
}; 
```

上面的大多数库都基于类似的方法为您执行此操作。但只是抽象和概括。这种概括是事情可能变得棘手的地方，因为你到处都有回调函数数组。这是有趣的函数式编程，但它在概念上可能会变得复杂。

如果您要重新执行此操作，请使用具有您喜欢的 API 的库。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-13T01:10:33.547

如果您不介意将 jQuery 添加到您的站点，您可以使用它的[“延迟对象”](http://api.jquery.com/category/deferred-object/)功能。

每个异步函数（包括 jQuery 的内置 AJAX 函数）都可以返回一个“承诺”，以便稍后返回一些东西。

为了实现您的要求，您可以致电：

```
$.when(p1, p2, p3, p4).done(function() {
    // this will be called only when
    // all of p1 - p4 have been "resolved"
}); 
```

`p`如果您更喜欢使用包含这些承诺的数组，请改为`$.when`这样调用：

```
$.when.apply($, p).done(function() {
    ...
}); 
```

# jquery - 如何用 xhr 做与 load() 相同的事情？

> ID：14299514
> 
> 赞同：0
> 
> 时间：2013-01-13T00:42:23.897
> 
> 标签：jquery, ajax, load, xmlhttprequest, abort

我有这个代码`load`：

```
 $('#single-photo-zoom').load(href+' #content', function() {
        alert("ok");
    }); 
```

我想用，`$.ajax`但不知道怎么加载`#content``#single-photo-zoom`

```
 xhr = $.ajax({
        url: href,
        success: function(data) {
             // ???
        }
    }); 
```

我想使用`$.ajax`，因为我希望有可能中止加载。功能是不可能的`load`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T00:44:38.993

如果您知道负载的作用，那就太容易了。

```
xhr = $.ajax({
    url: href,
    success: function(data) {
         $('#single-photo-zoom').html(data);
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T00:46:44.193

首先将数据转换为 jQuery 对象，然后可以从该对象中检索您想要的内容并插入到适当的元素中：

```
success:function(data){
    var $content=$(data).find('#content');
    $('#single-photo-zoom').html( $content);
} 
```

编辑：

假设这`#content`是在另一个父母喜欢`body`或另一个`div`。如果不是整页并且`#content`处于根级别，则使用`filter()`而不是`find()`

# javascript - jQuery 源码中正则表达式的说明

> ID：14299524
> 
> 赞同：2
> 
> 时间：2013-01-13T00:44:06.093
> 
> 标签：javascript, jquery, regex

以下行在 jQuery 源代码中：

```
// Used for matching numbers
core_pnum = /[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source, 
```

我对两个非捕获组中的最后一个垂直条感到困惑，

```
(?:\d*\.|) 
```

和

```
(?:[eE][\-+]?\d+|) 
```

正则表达式 /(a|b)/ 匹配 a 或 b，所以我想知道 /(a|b|)/ 匹配什么，它似乎“匹配所有内容”，换句话说

```
reg1 = /(a|b)/;
reg1.test('c'); // false
reg2 = /(a|b|)/;
reg2.test('c'); // true 
```

到底是怎么回事？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T00:47:27.523

`(a|b|)`它是意思`a`或`b`“无”，“c”包含“无”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T00:54:08.577

```
[\-+]?                # a plus or a minus sign (optional)
(?:                   # a non-capturing group
    \d*\.             # 0 or more decimals and a dot [cond-A1]
    |                 # or
                      # nothing [cond-A2]
)
\d+                   # 1 or more decimals [decimal]
(?:                   # a non-capturing group
    [eE][\-+]?\d+     # (e or E) + optional(minus or plus) + 1 or more decimals [cond-B1]
    |                 # or
                      # nothing  [cond-B2]
) 
```

以下是一些示例（我跳过了第一个可选的加号/减号）。

*   **.3**将是`[cond-A1][decimal][cond-B2]`
*   **1.3**也将是`[cond-A1][decimal][cond-B2]`
*   **3**将是`[cond-A2][decimal][cond-B2]`
*   **9.0122222900391E-5**将是`[cond-A1][decimal][cond-B1]`
*   **6.0221418E23-5**也将是`[cond-A1][decimal][cond-B1]`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-13T01:02:21.947

我将尝试将其分解为块：

*   `[\-+]?`: 这匹配一个加号、一个减号或都不匹配。
*   `(?:\d*\.|)`：这组（`?:`使其成为非捕获组）任意数量的数字后跟一个点*或*根本没有。
*   `\d+`: 这匹配一个或多个连续数字。
*   `(?:[eE][\-+]?\d+|)`：这组小写或大写的“e”，可能后跟一个加号或减号，所有后面都是数字。或者什么都没有。

`(a|)`先找`a`。如果`a`不存在，则不匹配。这是一种令人困惑的写作方式`(a)?`。

这个正则表达式有点令人困惑。我会这样重写它：

```
/[+-]?\d*\.?\d+(?:e[+-]?\d+)?/i 
```

# c++ - C2133：未知大小

> ID：14299529
> 
> 赞同：0
> 
> 时间：2013-01-13T00:44:30.890
> 
> 标签：c++, compiler-errors

主班

```
#include "List.h"
#include "Worker.h"
#include <iostream>
#include <string>

using namespace std;
void initWorkerList(List<Worker>);

int main() {
    List<Worker> WorkerList; // Error highlighted here
    initWorkerList(WorkerList);

    string username, password;
    cout << "Please enter your username: " << endl;
    getline(cin, username);
    cout << "Please enter your password: " << endl;
    getline(cin, password);

    Worker w;
    bool success = w.login(username,password, WorkerList);
    if(success) {
             // code

    } else {
        cout << "Invalid username and/or password. \nPlease try again!";
    }

    system("pause");
    return 0; }

void initWorkerList(List<Worker> WorkerList) {
    Worker w1 = Worker("Ben Ang", "Ben123", "pass123", 'M');
    WorkerList.add(w1);
    Worker w2 = Worker("Grace Eng", "Gr4ce", "loveGrace", 'W');
    WorkerList.add(w2);
    Worker w3 = Worker("Rebecca Xuan", "Xuanz", "Rebecca Xuan", 'W');
    WorkerList.add(w3); } 
```

工人阶级

```
#include <string>
#include "List.h"
using namespace std;
class Worker { private:
    string name;
    string username;
    string password;
    char position; public:
    Worker();
    Worker(string, string, string, char);
    string getName();
    string getUserName();
    string getPassword();
    char getPosition();
    bool login(string, string, List<Worker>); };

Worker::Worker() {   }

Worker::Worker(string n, string un, string pw, char p) {
    name = n;
    username = un;
    password = pw;
    position = p; }

string Worker::getName() {
    return name; }

string Worker::getUserName() {
    return username; }

string Worker::getPassword() {
    return password; }

char Worker::getPosition() {
    return position; }

bool login(string username, string password, List<Worker> WorkerList) {
    string u, pw;
    for(int i =0; i<WorkerList.length(); i++) {
        Worker w = WorkerList.get(i);
        u = w.getUserName();
        pw = w.getPassword();
        if(username == u && password == pw) {
            return true;
        }
    }
    return false; } 
```

列表类

```
#include <iostream>
using namespace std;

const int MAX_SIZE = 20;

template <typename ItemType> class List { private:
    ItemType itemList[MAX_SIZE];
    int size; public: 
    List();
    void add(ItemType);
    void del(int index);
    bool isEmpty();
    ItemType get(int);
    int length(); };

template<typename ItemType> List<ItemType>::List() {
    size = 0; }

template<typename ItemType> void List<ItemType>::add(ItemType item) {
    if(size < MAX_SIZE) {
        itemList[size] = item;
        size++; 
    } 
    else {
        cout << "List is full.\n";
    } }

template<typename ItemType> void List<ItemType>::del(int index) {
    if(!isEmpty()) {
        if(index > 0 && index < size) {
            for(int i = index + 1; i <= size; i++) {
                itemList[i-2] = itemList[i-1];
            }
            size--;
        }
    } else {
        cout << "List is empty.\n";
    } }

template<typename ItemType> bool List<ItemType>::isEmpty() {
    return size == 0; }

template<typename ItemType> ItemType List<ItemType>::get(int index) {
    if(index > 0 && index <= size) 
        return itemList[index-1]; }

template<typename ItemType>
int List<ItemType>::length() {
    return size;
} 
```

我有很多错误，但我认为这也是其他错误的原因。

错误 11 错误 C2133：'WorkerList'：未知大小

错误在主要部分中找到。我也不知道为什么。以前，它仍然可以工作，但这很奇怪......那么它有什么问题呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T01:55:46.690

```
ItemType itemList[MAX_SIZE]; 
```

我认为有你的问题。考虑将其替换为动态分配的数组，或替换`const int MAX_SIZE = 20;`为`#define`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-13T02:00:23.937

当我向标头添加多个包含保护时，我从 g++（Mac OS X 10.7.5 上的 G++ 4.7.1）得到的唯一编译警告是：

```
$ g++ -O3 -g -I/Users/jleffler/inc -std=c++11 -Wall -Wextra -c so14299529.cpp
In file included from Worker.h:6:0,
                 from so14299529.cpp:2:
List.h: In member function ‘ItemType List<ItemType>::get(int) [with ItemType = Worker]’:
List.h:49:35: warning: control reaches end of non-void function [-Wreturn-type]
$ 
```

如果没有标头保护，我会收到很多错误，例如：

```
In file included from Worker.h:6:0,
                 from so14299529.cpp:2:
List.h:7:11: error: redefinition of ‘const int MAX_SIZE’
In file included from so14299529.cpp:1:0:
List.h:7:11: error: ‘const int MAX_SIZE’ previously defined here
In file included from Worker.h:6:0,
                 from so14299529.cpp:2:
List.h:9:36: error: redefinition of ‘class List<ItemType>’
In file included from so14299529.cpp:1:0:
List.h:9:36: error: previous definition of ‘class List<ItemType>’
In file included from Worker.h:6:0,
                 from so14299529.cpp:2:
List.h:20:29: error: redefinition of ‘List<ItemType>::List()’
In file included from so14299529.cpp:1:0:
List.h:20:29: error: ‘List<ItemType>::List()’ previously declared here
In file included from Worker.h:6:0,
                 from so14299529.cpp:2:
List.h:23:34: error: redefinition of ‘void List<ItemType>::add(ItemType)’
In file included from so14299529.cpp:1:0:
List.h:23:34: error: ‘void List<ItemType>::add(ItemType)’ previously declared here
In file included from Worker.h:6:0,
                 from so14299529.cpp:2:
List.h:32:34: error: redefinition of ‘void List<ItemType>::del(int)’
In file included from so14299529.cpp:1:0:
List.h:32:34: error: ‘void List<ItemType>::del(int)’ previously declared here
In file included from Worker.h:6:0,
                 from so14299529.cpp:2:
List.h:44:34: error: redefinition of ‘bool List<ItemType>::isEmpty()’
In file included from so14299529.cpp:1:0:
List.h:44:34: error: ‘bool List<ItemType>::isEmpty()’ previously declared here
In file included from Worker.h:6:0,
                 from so14299529.cpp:2:
List.h:47:38: error: redefinition of ‘ItemType List<ItemType>::get(int)’
In file included from so14299529.cpp:1:0:
List.h:47:38: error: ‘ItemType List<ItemType>::get(int)’ previously declared here
In file included from Worker.h:6:0,
                 from so14299529.cpp:2:
List.h:52:5: error: redefinition of ‘int List<ItemType>::length()’
In file included from so14299529.cpp:1:0:
List.h:52:5: error: ‘int List<ItemType>::length()’ previously declared here
List.h: In member function ‘ItemType List<ItemType>::get(int) [with ItemType = Worker]’:
List.h:49:35: warning: control reaches end of non-void function [-Wreturn-type] 
```

标头保护是一种简单、可靠的技术，可确保不包含多次标头，因为这通常会导致类似所示的问题。

因此，IMO，适当的解决方法是在每个标题的顶部添加几行，在底部添加一行，如下所示。

### 列表.h

```
#ifndef LIST_H_INCLUDED
#define LIST_H_INCLUDED

... Original content of header ...

#endif /* LIST_H_INCLUDED */ 
```

### 工人.h

```
#ifndef WORKER_H_INCLUDED
#define WORKER_H_INCLUDED

... Original content of header ...

#endif /* WORKER_H_INCLUDED */ 
```

您可以在标题后卫之前发表评论，但没有别的；所有操作代码都应该在标头保护中。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-13T01:53:17.623

`login`Worker 类中的函数是一个独立的函数，你没有实现`Worker::login`，

改变

```
bool login(string username, string password, List<Worker> WorkerList) 
```

至

```
bool Worker::login(string username, string password, List<Worker> WorkerList) 
```

此外，您还有多个`#include List.h"`会产生一些错误，表示 中的多个定义标识符`List.h`，惯用的方法是在标头中提供包含保护：

例如：

```
#ifndef LIST_H
#define LIST_H

#include <iostream>
using namespace std;

#define MAX_SIZE 20

// .... other source code

template<typename ItemType>
int List<ItemType>::length() {
    return size;
}

#endif 
```

# java - Java - 模拟 3 个线程之间的死锁并设置优先级

> ID：14299535
> 
> 赞同：0
> 
> 时间：2013-01-13T00:46:26.420
> 
> 标签：java, process, deadlock

我有以下 3 个线程：

```
// These are the two resource objects we'll try to get locks for
final Object resource1 = "resource1";
final Object resource2 = "resource2";
final Object resource3 = "resource3";
// Here's the first thread.  It tries to lock resource1 then resource2
Thread t1 = new Thread() {
  public void run() {

    // Lock resource 1
    synchronized(resource1) {
      System.out.println("Thread 1: locked resource 1");

      // Pause for a bit, simulating some file I/O or something.
      // Basically, we just want to give the other thread a chance to
      // run.  Threads and deadlock are asynchronous things, but we're
      // trying to force deadlock to happen here...
      try { Thread.sleep(50); } catch (InterruptedException e) {}

      // Now wait 'till we can get a lock on resource 2
      synchronized(resource2) {
        System.out.println("Thread 1: locked resource 2");
      }
    }
  }
};

// Here's the second thread.  It tries to lock resource2 then resource1
Thread t2 = new Thread() {
  public void run() {

    // This thread locks resource 2 right away
     synchronized(resource2) {
      System.out.println("Thread 2: locked resource 2");

      // Then it pauses, for the same reason as the first thread does
      try { Thread.sleep(50); } catch (InterruptedException e) {}

      // Then it tries to lock resource1\.  But Thread 1 locked
      // resource1, and won't release it till it gets a lock on
      // resource2\.  This thread holds the lock on resource2, and won't
      // release it 'till it gets resource1\. 
      synchronized(resource1) {
        System.out.println("Thread 2: locked resource 1");
      }
    }
  }
};

// t3 tries to lock resource3 then resource2
Thread t3 = new Thread() {
  public void run() {
      for(int i=1; i<=5;i++)
        System.out.println("t3 "+i);
    synchronized (resource3) {
      System.out.println("Thread 3: locked resource 3");

      try {
        Thread.sleep(50);
      } catch (InterruptedException e) {
      }

      synchronized (resource2) {
        System.out.println("Thread 3: locked resource 2");
      }
    }
  }
}; 
```

现在我想做的是模拟死锁，我猜程序停止导致死锁。

问题出现后，我添加了一个 for 循环，在`synchronized`函数之前的每个线程中打印一些文本。但是当我为每个线程设置优先级时，`setPriority`我没有看到线程根据它们的优先级完成工作。

例如，我在第一个线程之前的每个线程中都有这些 forloops `synchronized`：

```
for(int i=1; i<=5;i++)
   System.out.println("t2 "+i); 
```

依此类推，t2 代表线程 2。我要做的就是确保优先级正常工作。我还没有尝试在非死锁程序中根据线程的优先级运行线程。

操作系统或 CPU 可能是导致此类问题的原因？

最后，我的最后一个问题是，我能否在资源、打印和执行时间方面显示优先效果？

谢谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T00:59:24.513

大多数通用操作系统上的线程优先级不是绝对的（例如，准备运行的最高优先级线程总是获得 CPU），而是一个调度算法的输入，该算法计算一个量子 - 或允许线程运行之前的时间长度将控制权交给另一个人。

因此，即使您确实设置了优先级，也无法确定您的线程将运行的顺序。您可以放心地假设最高优先级的线程可能比优先级较低的线程获得更大的 CPU 时间份额。但是，由于您的程序正在执行重复的 IO（哪些阻塞）然后休眠，因此线程很可能无论如何都无法接近它们的量子，并且在 50 毫秒的休眠结束时都同样有资格运行。

一类操作系统——实时操作系统（RTOS）——确实实现了优先级驱动的抢占式线程行为（而不是时间片），并且可以产生高度可预测的线程顺序。

# java - 如何检查数组的所有元素是否不等于某个值？（例如不为空）

> ID：14299538
> 
> 赞同：0
> 
> 时间：2013-01-13T00:46:46.620
> 
> 标签：java, arrays

前阵。

```
 String[] player = {"Empty","Empty","Empty","Empty"} 
```

输入后的数组。

```
String[] player = {"Tom","Bob","Alex","Kid"} 
```

我记得有一种方法可以检查数组的所有元素。

```
if(!player[0].equals("Empty") && !player[1].equals("Empty") && !player[2].equals("Empty") && !player[3].equals("Empty"))
{
   System.out.println("No more space");
} 
```

我的问题。有没有办法选择数组的所有元素？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T00:52:09.630

你的意思是这样的：

```
boolean hasEmpty = false;

for (int i = 0; i < player.length(); i ++)
{
     if(player[i].equals("Empty")){
         hasEmpty = true;
         break;
     }
}

if(hasEmpty) System.out.println("No more space"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T01:17:33.030

我知道这可能不是一个选项，但[在 Java 8 中你可以这样做](http://cr.openjdk.java.net/~briangoetz/lambda/collections-overview.html)：

```
boolean nonEmpty = Arrays.asList(player).anyMatch(x -> x.equals("Empty")) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T00:49:44.157

*您可以隐式*迭代数组：

```
if(!Arrays.asList(player).contains("Empty"))
   System.out.println("No more space."); 
```

*或显式*迭代数组：

```
for(String p : player)
{
    if(!p.equals("Empty"))
       continue;
    else
    {
       System.out.println("No more space.");
       break;
    }
} 
```

# php - 使用 PHP 的 simpleXML 将值应用于具有属性的新 XML 元素

> ID：14299546
> 
> 赞同：0
> 
> 时间：2013-01-13T00:47:49.417
> 
> 标签：php, simplexml, addchild

这是一个创建注释元素的函数（在处理注释的类中）

```
function add($id,$message){
    $newcomment = $this->source->addChild('comment');
    $newcomment->addAttribute('user',$id);
    $newcomment->addAttribute('timestamp',time());

    $newcomment = $message; // <--------- fail

    $this->source->asXML($this->save);
    return(true);
} 
```

所有这些都有效，但我显然不知道我在用我指向的线做什么。但我基本上想将消息放在评论元素中，如下所示：

```
<comments>
  <comment id="12345678" timestamp="1355812061">
    Hey friend, what's up?
  </comment>
  <comment id="87654321" timestamp="1355813155">
    Nothing much, just have this problem with simpleXML
  </comment>
</comments> 
```

但是我所拥有的只是没有设置消息。

所以我的问题是，这可能吗？如果可以，我该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T00:50:57.583

使用第二个参数将新创建的子元素的值设置为[`addChild()`](http://php.net/simplexmlelement)，如下所示：

```
$newcomment = $this->source->addChild('comment', $message); 
```

然后你可以摆脱你指向的线。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T01:05:37.980

> 所以我的问题是，这可能吗？如果可以，我该怎么办？

是的，这是可能的。您可以使用数组样式的语法直接写入元素：

```
$newcomment[0] = $message; 
```

* * *

SimpleXML 不允许将文本内容写入普通变量，但它允许写入具有数组样式访问 ( `$node[$n] = 'string'`) 或属性样式访问 ( `$node->child = 'string'`) 的元素。

要写入变量中包含的元素，请使用`0`带有数组语法的索引，如上所示。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T00:50:54.743

只需`addChild()`在创建评论字段时添加第二个参数：

```
$newcomment = $this->source->addChild('comment', $message); 
```

# ruby-on-rails - Heroku Rails 3 App Deployment 未初始化常量 Mail::TestMailer (NameError)

> ID：14299549
> 
> 赞同：0
> 
> 时间：2013-01-13T00:48:09.113
> 
> 标签：ruby-on-rails, ruby-on-rails-3, heroku, actionmailer

我第一次尝试将我的 rails 3 应用程序部署到 heroku，但它一直在抛出我`uninitialized constant Mail::TestMailer (NameError)`，这是日志文件

```
2013-01-13T00:35:41+00:00 app[web.1]: => Booting WEBrick
2013-01-13T00:35:41+00:00 app[web.1]: => Rails 3.2.11 application starting in production on http://0.0.0.0:11346
2013-01-13T00:35:41+00:00 app[web.1]: => Ctrl-C to shutdown server
2013-01-13T00:35:41+00:00 app[web.1]: Exiting
2013-01-13T00:35:41+00:00 app[web.1]: /app/vendor/bundle/ruby/1.9.1/gems/actionmailer-3.2.11/lib/action_mailer/delivery_methods.rb:43:in `<module:ClassMethods>': uninitialized constant Mail::TestMailer (NameError)
2013-01-13T00:35:41+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/actionmailer-3.2.11/lib/action_mailer/delivery_methods.rb:41:in `<module:DeliveryMethods>'
2013-01-13T00:35:41+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/actionmailer-3.2.11/lib/action_mailer/delivery_methods.rb:6:in `<module:ActionMailer>'
2013-01-13T00:35:41+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.11/lib/rails/application/railties.rb:8:in `each'
2013-01-13T00:35:41+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.11/lib/rails/application/railties.rb:8:in `all'
2013-01-13T00:35:41+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.11/lib/rails/engine.rb:434:in `eager_load!'
2013-01-13T00:35:41+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.11/lib/rails/application/finisher.rb:53:in `block in <module:Finisher>'
2013-01-13T00:35:41+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.11/lib/rails/initializable.rb:30:in `instance_exec'
2013-01-13T00:35:41+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.11/lib/rails/initializable.rb:30:in `run'
2013-01-13T00:35:41+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.11/lib/rails/initializable.rb:55:in `block in run_initializers'
2013-01-13T00:35:41+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.11/lib/rails/initializable.rb:54:in `each'
2013-01-13T00:35:41+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.11/lib/rails/initializable.rb:54:in `run_initializers'
2013-01-13T00:35:41+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.11/lib/rails/application.rb:136:in `initialize!'
2013-01-13T00:35:41+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.11/lib/rails/railtie/configurable.rb:30:in `method_missing'
2013-01-13T00:35:41+00:00 app[web.1]:   from /app/config/environment.rb:5:in `<top (required)>'
2013-01-13T00:35:41+00:00 app[web.1]:   from /app/config.ru:3:in `block in <main>'
2013-01-13T00:35:41+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.11/lib/rails/commands/server.rb:46:in `app'
2013-01-13T00:35:41+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.3/lib/rack/server.rb:304:in `wrapped_app'
2013-01-13T00:35:41+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.3/lib/rack/server.rb:254:in `start'
2013-01-13T00:35:41+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/devise-2.1.2/app/mailers/devise/mailer.rb:1:in `<top (required)>'
2013-01-13T00:35:41+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.11/lib/rails/engine.rb:439:in `block (2 levels) in eager_load!'
2013-01-13T00:35:41+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.11/lib/rails/engine.rb:438:in `each'
2013-01-13T00:35:41+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.11/lib/rails/engine.rb:438:in `block in eager_load!'
2013-01-13T00:35:41+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/actionmailer-3.2.11/lib/action_mailer/base.rb:326:in `<module:ActionMailer>'
2013-01-13T00:35:41+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/actionmailer-3.2.11/lib/action_mailer/delivery_methods.rb:3:in `<top (required)>'
2013-01-13T00:35:41+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.11/lib/rails/commands/server.rb:70:in `start'
2013-01-13T00:35:41+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.11/lib/rails/commands.rb:55:in `block in <top (required)>'
2013-01-13T00:35:41+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.11/lib/rails/commands.rb:50:in `tap'
2013-01-13T00:35:41+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.11/lib/rails/commands.rb:50:in `<top (required)>'
2013-01-13T00:35:41+00:00 app[web.1]:   from script/rails:6:in `require'
2013-01-13T00:35:41+00:00 app[web.1]:   from script/rails:6:in `<main>'
2013-01-13T00:35:41+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/actionmailer-3.2.11/lib/action_mailer/base.rb:327:in `<class:Base>'
2013-01-13T00:35:41+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.3/lib/rack/builder.rb:40:in `eval'
2013-01-13T00:35:41+00:00 app[web.1]:   from /app/config.ru:in `<main>'
2013-01-13T00:35:41+00:00 app[web.1]:   from /app/config.ru:in `new'
2013-01-13T00:35:41+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.3/lib/rack/builder.rb:51:in `instance_eval'
2013-01-13T00:35:41+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.3/lib/rack/builder.rb:51:in `initialize'
2013-01-13T00:35:41+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.3/lib/rack/builder.rb:40:in `parse_file'
2013-01-13T00:35:41+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.3/lib/rack/server.rb:200:in `app'
2013-01-13T00:35:41+00:00 app[web.1]: => Call with -d to detach
2013-01-13T00:35:41+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/actionmailer-3.2.11/lib/action_mailer/base.rb:11:in `<top (required)>'
2013-01-13T00:35:41+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.11/lib/rails/engine.rb:436:in `eager_load!'
2013-01-13T00:35:41+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.11/lib/rails/engine.rb:436:in `each'
2013-01-13T00:35:42+00:00 heroku[web.1]: Process exited with status 1
2013-01-13T00:35:42+00:00 heroku[web.1]: State changed from starting to crashed 
```

我的 Gemfile 看起来像这样

```
source 'https://rubygems.org'

gem 'rails', '3.2.11'

# Bundle edge Rails instead:
# gem 'rails', :git => 'git://github.com/rails/rails.git'

gem "paperclip", "~> 3.0"
gem 'json'
#json parsing from web
gem 'yajl-ruby'
# gem 'rqrcode' #table qrcodes
gem 'rqrcode-rails3' #imageqrcodes
gem 'mini_magick'

gem 'devise'
gem 'simple_form'
gem 'jquery-rails'
gem 'jquery-mobile-rails'
# gem 'activeadmin'
# gem 'nested_form', :git => 'git://github.com/ryanb/nested_form.git'
gem 'cancan'
# gem "select2-rails"
gem 'friendly_id', :git => "git://github.com/norman/friendly_id.git"

# Gems used only for assets and not required
# in production environments by default.
group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'

  # See https://github.com/sstephenson/execjs#readme for more supported runtimes
  # gem 'therubyracer', :platform => :ruby

  gem 'uglifier', '>= 1.0.3'
  gem 'twitter-bootstrap-rails'
  # gem 'less-rails'
  # gem 'execjs', '1.4.0'
  # gem 'therubyracer', '0.10.2'
end

group :development, :test do
  gem 'mysql2'
end

group :production do
  gem 'pg'
end 
```

由于我使用设计来处理用户注册，所以我认为设计会尝试发送确认电子邮件。但是在我`production.rb`像这样为 action_mailer 添加了一些配置之后

```
 config.action_mailer.raise_delivery_errors = false
  config.action_mailer.perform_deliveries = true
  config.action_mailer.delivery_method = :smtp
  config.action_mailer.smtp_settings = {
    address:              'smtp.gmail.com',
    port:                 587,
    tls:                  true,
    domain:               'gmail.com',
    user_name:            'secret@email.com',
    password:             'secret',
    authentication:       'plain',
    enable_starttls_auto: true  
  } 
```

它仍然没有给我错误

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T03:01:48.537

重命名 Mail 模型时，请务必重命名文件 app/models/mail.rb 并添加迁移以重命名 mails 表以匹配新模型。

# eclipse - 刚签出的程序，由于结帐冲突，我不会让我更新

> ID：14299553
> 
> 赞同：0
> 
> 时间：2013-01-13T00:49:03.283
> 
> 标签：eclipse, git

所以我的项目中有两个开发人员，我和另一个人。另一个人正在做大部分的编码，我想用 Github 来存储我们的代码。这导致为 Eclipse 安装 Egit。我们都在 Windows 上工作。

他能够提交并推送到远程存储库没有问题。我可以看到项目名称中的小向下箭头已经进行了更改（在我完成获取之后）。

我无法进行合并。我收到结帐冲突：您的本地更改为等等等等。

我没有碰过代码。有谁知道我如何从 Eclipse 插件中进行合并力？

我也不讨厌以下问题的答案：

提交、推送到上游、从上游获取、获取、推送、合并和同步工作区有什么区别。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T01:15:48.003

如果您没有编辑代码并且在立即提取时遇到合并冲突，这很可能是因为您已经对 IDE 自动修改的文件进行了版本控制。这可能包括本地的、特定于用户的配置文件，它们实际上不是源代码的一部分。

> 提交、推送到上游、从上游获取、获取、推送、合并和同步工作区有什么区别。

您可能想先熟悉 git 本身。除了“同步工作空间”之外，所有这些都是 git 命令，您可以在[网站](http://git-scm.com/documentation)上找到它们的文档。

# wcf - 使用 DataContract 对象调用 RESTful WCF 操作

> ID：14299558
> 
> 赞同：1
> 
> 时间：2013-01-13T00:50:08.690
> 
> 标签：wcf, datacontract

我的 ServiceContract 中有以下 OperationContract：

```
[WebInvoke(Method="POST", UriTemplate="books")]
[OperationContract]
void AddBookToInventory(BookTitle aBook); 
```

BookTitle 是一个 DataContract 对象：

```
[DataContract(Namespace="http://someurl.com/books")]
public class BookTitle
{
    string title = "";
    string author = "";
    string isbn = "";
    decimal price = 0.00m;

    [DataMember]
    public string Title
    {
        get { return title; }
        set { title = value; }
    }

    [DataMember]
    public string Author
    {
        get { return author; }
        set { author = value; }
    }

    [DataMember]
    public string Isbn
    {
        get { return isbn; }
        set { isbn = value; }
    }

    [DataMember]
    public decimal Price
    {
        get { return price; }
        set { price = value; }
    }

} 
```

如何在 c# 或 vb 中使用来自 .NET 客户端的 XML 调用 AddBookToInventory 操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T00:54:06.790

您必须将`POST` [webrequest](http://msdn.microsoft.com/en-us/library/system.net.webrequest.aspx)写入url [http://yourServiceName.svc/books](http://yourServiceName.svc/books)

# wordpress - Wordpress 在子目录中安装，登录会给出目录名称

> ID：14299559
> 
> 赞同：0
> 
> 时间：2013-01-13T00:50:27.830
> 
> 标签：wordpress, installation, duplicates, subdirectory

我想让我的下一个 wordpress 包在子目录中运行有两个原因。

*   它更干净
*   它应该为我的安装增加一定程度的安全性

（http://codex.wordpress.org/Giving_WordPress_Its_Own_Directory）

Wordpress Codex 对这个主题非常有帮助，我在第一次尝试时就运行了它，但我仍然有一些问题：

1.  由于登录现在使用 url 的子目录，登录链接给出了 wordpress 的安装位置。我不打算为此安装使用前端登录解决方案。
2.  只要我不在任何链接中使用子目录名称，这不会导致任何重复的内容问题是否正确？现在似乎可以使用两个 url 访问所有页面。（mysite.net/ 和 mysite.net/subdir/）

# powershell - 在 Powershell 中使用 C# 单例类

> ID：14299564
> 
> 赞同：1
> 
> 时间：2013-01-13T00:51:13.263
> 
> 标签：powershell, singleton

我刚刚学会了将 C# 代码包含到 Powershell 中并使用 Add-Type 来编译和加载它。但是，当我实现一个单例类时，我找不到关于如何使用它的参考。

如果是普通类，我们可以使用New-Object。我们如何处理必须通过 Instance() 访问的单例？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T00:57:18.007

典型的单例提供了访问单例实例的静态方法。因此，您将使用 PowerShell 的静态方法调用语法，例如：

```
$singleton = [MyNamespace.MySingletonClass]::Instance
$singleton.SomeInstanceMethod() 
```

# java - 用搜索替换表格内容

> ID：14299565
> 
> 赞同：1
> 
> 时间：2013-01-13T00:51:14.290
> 
> 标签：java, sql, swing, user-interface, jtable

这是一个处理表格过程的类`filtering`

//类 DbUtils

```
public class DbUtils {
    public static TableModel resultSetToTableModel(ResultSet rs) {

        try {
        ResultSetMetaData metaData = rs.getMetaData();
        int numberOfColumns = metaData.getColumnCount();
        Vector columnNames = new Vector();

        for (int column=0; column < numberOfColumns; column++) {
            columnNames.addElement(metaData.getColumnLabel(column + 1));              
        }
        Vector rows = new Vector(); 
        while(rs.next()) {
        Vector newRow = new Vector(); 
        for (int i =1; i <= numberOfColumns; i++) {
        newRow.addElement(rs.getObject(i));
        }
        rows.addElement(newRow);
        } 
        return new DefaultTableModel(rows,columnNames);

       }  catch (Exception e) {
          e.printStackTrace();      
         return null; 
    }

} 
```

}

我有一个更新类 Job_GUI 中的作业表的方法，传入的参数是`sql statements`从中`table_job`填充的。传入什么 sql 语句取决于在`JTabbedPane`考虑`index`值的情况下选择哪个。这就是我的问题所在。

//类Job_GUI

```
 public void UpdateJobTable(String sql) {
    try {

    pst = conn.prepareStatement(sql); 
    rs = pst.executeQuery();

    table_job.setModel(DbUtils.resultSetToTableModel(rs));
    table_job.getColumnModel().getColumn(0).setPreferredWidth(50);
        table_job.getColumnModel().getColumn(1).setPreferredWidth(140);
        table_job.getColumnModel().getColumn(2).setPreferredWidth(170);
        table_job.getColumnModel().getColumn(3).setPreferredWidth(80);
        table_job.getColumnModel().getColumn(4).setPreferredWidth(120);

}
    catch (Exception e ) {

        JOptionPane.showMessageDialog(null, e);
    } 

    finally {

         try {

          pst.close();
          rs.close();
        } catch (Exception e) {

        }
    }
} 

private void JobTabbedPaneStateChanged(javax.swing.event.ChangeEvent evt) {                                           
    JTabbedPane sourceTabbedPane = (JTabbedPane) evt.getSource();
    int index = sourceTabbedPane.getSelectedIndex();
    if (index == 0) {

       jobTableInit(); 

    }
    else if (index == 1) {
        fillCombo();

    }

    else if(index==2) {
        try {
            sql = "SELECT Job.jobID as 'Job ID', Employer.name as'Company', Job.title as 'Role', Job.description as 'Description', Job.type as 'Type', Job.benefits as 'Benefits', Job.closing as 'Closing Date' FROM Job INNER JOIN Employer ON Job.employerID=Employer.employerID ORDER BY Employer.name";
            pst = conn.prepareStatement(sql);
            rs = pst.executeQuery();
            TableModel model = DbUtils.resultSetToTableModel(rs);
            table_job.setModel(model);
            final TableRowSorter<TableModel> sorter = new TableRowSorter<TableModel>(model);
            table_job.setRowSorter(sorter);
            JScrollPane pane = new JScrollPane(table_job);
            searchJob.addActionListener(new ActionListener(){
                public void actionPerformed(ActionEvent e) {
                String text = keyword.getText(); 
                if (text.length() == 0) {
                sorter.setRowFilter(null);
                 } else {
                  sorter.setRowFilter(RowFilter.regexFilter(text));

                  }
                 }             
             });

        }

        catch (Exception e) {
           e.printStackTrace();                
        }

    } 
```

当我处于`index 2`模式时，`table_job`内容被擦除，即返回索引 0，表变为空，而最初它充满了数据。当我在索引 2 时，我不想`table_job`为空，而是仍然继续显示数据，除非在`keyword`中输入a，否则`JTextField`调整`table_job`为搜索匹配项。但 table_job 没有显示任何内容。我在索引 2 的 if 块中的代码片段中做错了什么，也许我在其他地方错了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T02:38:44.793

作为参考，这个完整的[示例](https://stackoverflow.com/a/8260663/230513)说明了如何使用`setModel()`来更改`TableModel` *整体*。更新是自动的。还可以考虑使用 的方法`DefaultTableModel`来更改模型。

![图片](../Images/a9c77f702837b51c2d43978609f68f5d.png)

# jquery-ui - 如何使用自定义助手或任何其他方法使可拖动项目的样式与目标匹配？

> ID：14299566
> 
> 赞同：0
> 
> 时间：2013-01-13T00:51:39.653
> 
> 标签：jquery-ui, draggable, jquery-ui-sortable, helper

使用[此处的示例](http://jqueryui.com/draggable/#sortable)作为起点，我着手自定义我的可拖动和可排序数据。在链接的示例中，我们在可拖动对象中有简单的文本。我用选择标签替换了它。

将选择元素拖入可排序时，我想在将其移动到可排序列表时仅使用所选选项的值。为此，我使用了自定义助手，但不幸的是，一旦我放下它，它就会再次变成一个选择元素。

```
$("#draggable").draggable({
   connectToSortable: "#sortable",
   opacity: 0.8,
   cursor: "move",
   helper: function () {
       return $("<div>" + $(this).text() + "</div>");
   },
   distance: 20
}); 
```

我怎样才能解决这个问题？感谢您的关注。[JSFiddle 在这里](http://jsfiddle.net/parikramatic/7KEGs/)：

PS：从 droppable 中删除所有类也没有帮助，并且在组内排序时也会影响，所以这是错误的方法

```
$("#sortable").droppable({
   drop: function (event, ui) {
       alert('dropped');
       $(ui.draggable).removeClass();
   },
   activeClass: "ui-state-hover",
   hoverClass: "ui-state-active"
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T10:31:08.300

有点复杂的解决方案，但这里有：

首先我修改了可拖动的自定义辅助函数。我找到了我正在寻找的类，并且只克隆了第一个实例 (li)，但向其中添加了所有列表框的文本。这是由于 fcbkcomplete 的设计。无论如何，现在我们只剩下一个列表项和我需要的文本。我将 ui-state-default 类添加到克隆中，到这里就完成了

```
 $("#draggable").draggable({
                distance: 10,
                cursor: "move",
                helper: function (e, ui) {
                    var newListItem = $(this).find('.bit-box').first().clone().removeClass().addClass("ui-state-default");
                    var fullCommand = "";
                    $(this).find('.bit-box').each(function( index ) {
                        fullCommand += $(this).text() + " ";
                    });

                    newListItem.text(fullCommand);
                    return (newListItem);
                },
                revert : true
                }); 
```

在 droppable 中，我仍然最终处理了 drop 事件，但这次使用的是 ui.helper.clone 而不是 ui.draggable。

```
 $("#container").droppable({
                accept: '.product',
                drop: function (event, ui) {
                    var x = ui.helper.clone();
                    x.removeClass().attr('style', '');
                    x.addClass("ui-state-default");
                    x.appendTo('#container');
                    ui.helper.remove();
                }
            }); 
```

我仍然需要修复 wrt css 的一些错误，但这现在完全符合预期:)

# xaml - 我是否需要重新验证我的 Bing 地图凭据？

> ID：14299569
> 
> 赞同：0
> 
> 时间：2013-01-13T00:51:53.200
> 
> 标签：xaml, winrt-xaml, windows-store-apps, bing-maps

必应地图凭据是否超时？

我的 Bing 地图凭据，像这样提供（但此处显示的是虚假值）：

```
<maps:Map x:Name="bingMap" Grid.Column="1" Grid.Row="1" Grid.RowSpan="2" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" LandmarkTapped="BingMap_OnLandmarkTapped" Credentials="jkdfsjkfadjkdfsajkdfsasdfaasdf" /> 
```

...直到今天一直运行良好，现在当我运行我的应用程序时，我在主页上的地图上收到了这条消息：

“*指定的凭据无效。您可以注册...（bla bla bla）* ”

因此，是否需要每隔一段时间“重新注册”必应地图凭据，或者...？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T11:50:09.870

凭据在特定时期内有效，具体取决于您使用的许可证（密钥）类型。有几种类型的许可证，如试用（90 天后到期）、Windows 应用商店应用程序密钥类型......

此外，请记住，对于您可以在 Bing 地图平台上进行的交易数量和可以执行的请求数量，您有相关的限制，这些限制适用于不同的许可证密钥。

有关更多信息，请查看 MSDN 文档：http: [//msdn.microsoft.com/en-us/library/ff428642.aspx](http://msdn.microsoft.com/en-us/library/ff428642.aspx)

如果您需要更新您的密钥，您应该连接到 Bing 地图开发人员门户：[http](http://bingmapsportal.com) ://bingmapsportal.com ，您应该可以在其中更新适当类型的密钥。您也可以通过以下表格联系 Microsoft：http: [//www.microsoft.com/maps/contact.aspx](http://www.microsoft.com/maps/contact.aspx)

# css - 从 SVG 中删除“填充”？

> ID：14299571
> 
> 赞同：17
> 
> 时间：2013-01-13T00:52:59.517
> 
> 标签：css, html, svg

我有一个画圆的 SVG 图形。当我给它一个`background-color`CSS 时，我希望它只显示在角落，因为 CSS 元素永远不会是圆形的（是的，是的，`border-radius`...） - 所以我将一个带有透明背景的圆形图形放在一个带有背景色的矩形框中.
但相反，它看起来像这样：
![在此处输入图像描述](../Images/1f5b080a8c8c16103e11fa10ba0f67d3.png)

有什么办法可以删除左右两侧的“填充”？有关系`ViewBox`吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2017-04-10T11:33:57.100

有两种可能会导致这种情况，具体取决于您的 SVG 是如何绘制的。

**1.）您在 SVG 中的路径/圆圈可能从未与左侧对齐的位置开始。**

想象它像一个从点 0,0 开始的网格，它的宽度为 64，高度为 32，你已经告诉圆以 32,16 为中心，半径为 16。这将留下 16 个填充点左右各32个圆点。

```
<p>No padding with coordinate</p>
<svg  style="border: 1px solid red;"
      height="50px"
      viewBox="0 0 32 32" 
      xmlns="http://www.w3.org/2000/svg">
  <circle cx="16" cy="16" r="16"/>
</svg>
<p>Example above but starting at a coordinate that causes whitespace</p>
<svg  style="border: 1px solid red;"
      viewBox="0 0 64 32" 
      height="50px"
      xmlns="http://www.w3.org/2000/svg">
  <circle cx="32" cy="16" r="16"/>
</svg>
```

删除它的方法是重新定位路径，或者尝试更改视图框，使其从不同的坐标开始。更改 ViewBox 的坐标并不是一个理想的解决方法，因为从非归零坐标开始变得不合逻辑，您必须记住在向视图框中添加更多形状时考虑到这一点。

```
<p>Changing the viewbox to start at a different coordinate</p>
<svg  style="border: 1px solid red;"
      height="50px"
      viewBox="50 50 100 100" 
      xmlns="http://www.w3.org/2000/svg">
    <circle cx="100" cy="100" r="50"/>
</svg>
<p>Changing the 'path' so that it doesn't leave padding</p>
<svg  style="border: 1px solid red;"
      height="50px"
      viewBox="0 0 100 100" 
      xmlns="http://www.w3.org/2000/svg">
    <circle cx="50" cy="50" r="50"/>
</svg>
```

**2.) 您的 SVG 已被告知要统一缩放。**

第二个选项意味着当 SVG 放大时，在 SVG 中绘制的所有路径将在其尺寸维度上保持相同的比例。

想象一下，你有一个圆圈，你的 SVG 被设计成可以整齐地适合孩子，没有填充。现在我们已经将这个 SVG 框在 X 轴上缩放了 2*，在 Y 轴上缩放了 1.5*，圆将尝试在 X 方向上增长 2*，但是因为它必须保持它的比率并且它不能增长2* 在 Y 方向上只会增长 1.5*。对于 X 方向上剩下的 0.5*，它只会添加空白。

```
<p>Unscaled</p>
<svg  style="border: 1px solid red"
      height="100px"
      width="100px"
      viewBox="0 0 32 32" 
      xmlns="http://www.w3.org/2000/svg">
  <circle cx="16" cy="16" r="16"/>
</svg>
<p>Above circle scaled at an uneven ratio</p>
<svg  style="border: 1px solid red"
      height="50px"
      width="100px"
      viewBox="0 0 32 32" 
      xmlns="http://www.w3.org/2000/svg">
  <circle cx="16" cy="16" r="16"/>
</svg>
```

正如@heycam 上面所说，要更改此设置，您可以设置 SVG 元素以允许关闭此比例缩放。这是使用属性“preserveAspectRatio”并将其设置为“none”来完成的。

```
<svg  style="border: 1px solid red"
      height="50px"
      width="100px"
      viewBox="0 0 32 32" 
      preserveAspectRatio="none"
      xmlns="http://www.w3.org/2000/svg">
    <circle cx="16" cy="16" r="16"/>
</svg>
```

希望这有助于您对 SVG 的一些理解，因为它们是一个非常有用的工具！

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-01-13T02:04:15.600

如果您希望 SVG 伸展到整个盒子，请放在`preserveAspectRatio="none"`根`<svg>`元素上。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-07-27T10:55:55.007

今天我遇到了类似的情况，我使用[boxy-svg.com](https://boxy-svg.com/app/)在线工具从**.svg**文件中删除填充。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-06-20T09:32:26.660

设置 viewBox 尺寸后，将 preserveAspectRatio 设置为 xMinYMin。

文档链接：[https ://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/preserveAspectRatio](https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/preserveAspectRatio)

使用 d3，

```
const width = 600, height = 400;
const svg = d3.select(".svg-element");
svg.attr("viewBox", [0, 0, width, height]);
svg.attr("preserveAspectRatio", "xMinYMin"); 
```

# java - gson JsonDeserializer 导致 NoClassDefFoundError

> ID：14299573
> 
> 赞同：0
> 
> 时间：2013-01-13T00:53:21.940
> 
> 标签：java, android, deserialization, gson, noclassdeffounderror

我不确定还有什么要说的。我试过删除和添加类，但这似乎没有帮助。我以前没有遇到过这个问题，所以我真的不知道该怎么办。

其他 gson 对象工作正常。这只是反序列化器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T00:58:12.390

[JsonDeserializer](http://google-gson.googlecode.com/svn/trunk/gson/docs/javadocs/com/google/gson/JsonDeserializer.html)可以在 com.google.gson.JsonDeserializer 中找到，并且[Gson](http://gson.googlecode.com) jar 应该在您的类路径中。

# javascript - 如何在javascript中定义一个函数，使用jQuery时，不破坏其他js代码

> ID：14299574
> 
> 赞同：0
> 
> 时间：2013-01-13T00:53:29.920
> 
> 标签：javascript, jquery

我有一些适用于 WordPress 主题的 jQuery 代码。当我尝试添加自己的函数（不是 jQuery 插件，但它可能是）时，它会破坏插件[Every Calendar +1](http://andrewbevitt.com/code/everycalplus1/)中的 javascript 。日历不呈现。

我自己的功能是

```
var get_px_int = function(px_string) {
            px_string.replace('/[a-zA-Z]/', '');
            px_string = parseInt(px_string);
            return px_string;
        } 
```

我正在尝试以这种方式使用它

```
$('#branding').css({
  "min-height" : $("#header-slideshow li").height()
                 + get_px_int($("#header-slideshow").css('margin-top'))
                 + get_px_int($("#header-slideshow li").css('font-size'))*5
}); 
```

我需要基于元素的其他高度的最小高度，但 height() 返回“px”，我需要删除文本并将其转换为整数，以便在等式中使用以计算最小高度。所有这些都按应有的方式工作。但只是函数的声明，甚至没有调用它，破坏了插件 javascript。我知道我需要以类似于原型或类之类的方式实例化函数。我已经尝试将函数作为插件，作为对象，我的所有代码都包含在（ foo = function() {} ）中；富（）；我的想法不多了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T01:16:29.613

`.replace(...)`是不必要的，因为`partInt()`会丢弃尾随的非数字字符，并且不应该有前导的非数字字符。

尝试 ：

```
var get_px_int = function(px_string) {
    return parseInt(px_string || 0) || 0;
}; 
```

因此，

*   如果`px_string`未定义（这是假的），`parseInt()`将返回零。
*   如果`parseInt()`返回`NaN`（这是假的），该函数将返回零。

您可以轻松地将默认值更改为您喜欢的任何值。

# jquery - 让 AngularJS + JQuery Isotope + 动态内容一起玩得很好

> ID：14299575
> 
> 赞同：3
> 
> 时间：2013-01-13T00:53:43.730
> 
> 标签：jquery, websocket, angularjs, dynamic-data, jquery-isotope

在我的页面中，AngularJS 的 html 模板像往常一样绑定到控制器的变量。我正在使用 WebSockets，当我收到一个新项目时，我会更新范围的值并调用 angular 的 $apply。这工作正常，AngularJS 正确更新视图呈现添加/删除的任何新项目...

棘手的部分是将[Isotope](http://isotope.metafizzy.co/)插件加入其中。由于内容是动态添加项目到同位素（[http://isotope.metafizzy.co/docs/adding-items.html](http://isotope.metafizzy.co/docs/adding-items.html)）并不简单，原因如下：

*   在更新控制器的数据并调用 apply angular 时，会创建所需的附加元素。
*   同位素要求您知道要添加的每个项目。
*   我认为 AngularJS 没有办法告诉控制器创建了什么 html 项。

有没有人让这3件一起工作？有没有办法创建 HTML 以便将其传递给 Isotope？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-13T04:22:44.127

我假设您正在使用 ng-repeat 生成视图/HTML。

您可以尝试以下方法：创建一个指令并将其附加到 ng-repeat(s) 所在的相同元素。设置指令`priority`，使其最后运行（或在其他指令之后）。让指令的链接函数监视您因 Web 套接字信息而更新的相同 $scope 属性（或者我想您可以在每次更改时在范围上创建某种计数器 - 观察该计数器指令）。当指令/监视检测到更改时，提取新的 HTML（通过链接函数的`element`属性）并将其发送给 isotope。

您可能需要在控制器中设置监视回调可以访问的一些范围属性，以确定添加/删除了哪些项目。

```
link: function(scope, element, attrs, someController) {
    scope.$watch(..., function(newValue) {
       // extract HTML with Angular or jQuery
       var children = element.children();
       for(i=scope.first_new_item; i<= scope.last_new_item; i++) {
           $('#isotope_container').isotope('insert'), children[i]);
       }
       // handle removed items similarly ??
    } 
```

contents() 可能比 children() 工作得更好，或者使用 jQuery 选择器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-04T20:47:50.760

在这条路上遇到了一些麻烦，很高兴找到这个，马克的解决方案是正确的。

如果您的同位素元素的高度是动态的并且取决于图像，则imagesLoaded[库会很有帮助。](https://github.com/desandro/imagesloaded)

# qt - 在 addMapping 之后转到 QDataWidgetMapper 元素 - 错误？

> ID：14299580
> 
> 赞同：1
> 
> 时间：2013-01-13T00:54:24.413
> 
> 标签：qt

我在初始化 QDataWidgetMapper 时遇到了一些奇怪的问题。

如果我这样做它可以工作，但小部件之间没有同步：

```
dataMapper->setModel(model);
dataMapper->toFirst();
dataMapper->addMapping(ui.uiName, 0); 
```

文档没有告诉我去任何元素（我通过调用 toFirst() 来做到这一点）

如果我在映射到 Widget 之后尝试转到第一个元素，它会因索引超出范围错误而崩溃：

```
dataMapper->setModel(model);
dataMapper->addMapping(ui.uiName, 0);
dataMapper->toFirst(); 
```

就像我这样绕过它，它的工作原理是如何假定的：

```
dataMapper->setModel(model);
dataMapper->toFirst();
dataMapper->addMapping(ui.uiName, 0);
dataMapper->toFirst(); 
```

有人可以告诉我为什么在我的情况下这是必要的吗？我自己的模型实现中可能存在错误，还是这样做很常见？但如果它很常见，为什么在文档或任何示例中没有提到它？

问候

# iphone - 在彼此下方添加多个 UILabel，每个标签都有可变行

> ID：14299582
> 
> 赞同：2
> 
> 时间：2013-01-13T00:54:40.417
> 
> 标签：iphone, ios, objective-c, xcode

我有一个视图，我想要一组标签，但标签的数量和每个标签的文本长度各不相同。

```
UILabel *label = [[UILabel alloc] initWithFrame:CGRectMake(10, 100, 300, 50)];
label.text = @"Varying text length here";
label.numberOfLines = 0;
[label sizeToFit];
[[self view] addSubview:label]; 
```

当标签可能有 1-4 行之间时，以编程方式在该标签下方以 25 的设定距离添加另一个标签的最简单方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-13T01:17:03.460

试试这个：

```
CGFloat offset = 25.0f;

CGRect frame1 = CGRectMake(10, 100, 30, 50);

UILabel *label = [[UILabel alloc] initWithFrame:frame1];
label.text = @"Varying text length here";
label.numberOfLines = 0;
[label sizeToFit];
[[self view] addSubview:label];

CGRect frame2 = CGRectMake(10,
                           label.frame.origin.y + label.frame.size.height + offset,
                           300,
                           50);

UILabel *label2 = [[UILabel alloc] initWithFrame:frame2];
label2.text = @"Varying text length here";
label2.numberOfLines = 0;
[label2 sizeToFit];
[[self view] addSubview:label2]; 
```

根据前一个标签的帧+ 25设置下一个标签的帧

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T01:08:12.360

看看[UICollectionViewFlowLayout](https://developer.apple.com/library/ios/#documentation/UIKit/Reference/UICollectionViewFlowLayout_class/Reference/Reference.html#//apple_ref/occ/cl/UICollectionViewFlowLayout)。它处理元素网格，这正是您想要的。

更改此属性的值：

```
@property (nonatomic) CGSize itemSize; 
```

指定每个项目的大小（在您的情况下为 300,50）。还有这个：

```
@property (nonatomic) CGFloat minimumLineSpacing; 
```

处理物品之间的间隙。

# asp.net-mvc-4 - 为 SimpleMembership 设置密码规范

> ID：14299584
> 
> 赞同：1
> 
> 时间：2013-01-13T00:54:54.547
> 
> 标签：asp.net-mvc-4, simplemembership

查看 MVC4 模板，我很难找到的一件事是在哪里指定（如果可以的话）密码要求。主要是我想删除非字母字符的要求。

这是可以做的`SimpleMembership`吗？

编辑：

（您可以申请哪些规格`SimpleMembership`？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T07:05:00.363

在查看了[SimpleMembershipProvider](http://aspnetwebstack.codeplex.com/SourceControl/changeset/view/9306b6dba83a0c18e01716f8065aaf6524307a75#src/WebMatrix.WebData/SimpleMembershipProvider.cs) ...我已经能够确定它当前的实现方式让您完全靠自己来管理密码要求。

```
 public override int MinRequiredPasswordLength
        {
            get { return InitializeCalled ? 0 : PreviousProvider.MinRequiredPasswordLength; }
        }

        public override int MinRequiredNonAlphanumericCharacters
        {
            get { return InitializeCalled ? 0 : PreviousProvider.MinRequiredNonAlphanumericCharacters; }
        } 
```

如您所见，默认情况下它返回 0，除非您配置了另一个[MembershipProvider](http://msdn.microsoft.com/en-AU/library/system.web.security.membershipprovider.aspx)，例如[SqlMembershipProvider](http://msdn.microsoft.com/en-AU/library/system.web.security.sqlmembershipprovider.aspx) ...我认为这有点违背了使用[SimpleMembershipProvider](http://msdn.microsoft.com/en-us/library/webmatrix.webdata.simplemembershipprovider%28v=vs.111%29.aspx)的目的...至少在我看来。

这促使我考虑[Brock Allen 的建议](http://brockallen.com/2012/09/02/think-twice-about-using-membershipprovider-and-simplemembership/)，并考虑使用可以[使用 nuget 安装的](http://nuget.org/packages/BrockAllen.MembershipReboot/)[MembershipReboot](https://github.com/brockallen/BrockAllen.MembershipReboot)。他的 github 页面有一个很棒的示例 mvc 站点，展示了如何使用他的库。我以前没用过……目前正在尝试……但从我目前所见和阅读的情况来看，它看起来很棒……让我想知道为什么更多的人还没有决定在 SimpleMembershipProvider 上使用它。

# javascript - 使用jquery动态添加复选框

> ID：14299588
> 
> 赞同：0
> 
> 时间：2013-01-13T00:56:15.247
> 
> 标签：javascript, jquery

我正在使用[这个](https://github.com/mbrevoort/jquery-facebook-multi-friend-selector/blob/master/jquery.facebook.multifriend.select.js)jQuery 插件来生成自定义 facebook 朋友选择器。下面是生成每个朋友 div 的代码（第 86 行）。[链接](https://github.com/mbrevoort/jquery-facebook-multi-friend-selector/blob/master/jquery.facebook.multifriend.select.css)到 css

```
$.each(sortedFriendData, function(i, friend) {
                    selectedClass = (friend.id in preselected_friends_graph) ? "selected" : "";
                    buffer.push("<div class='jfmfs-friend " + selectedClass + " ' id='" + friend.id  +"'><img/><div class='friend-name'>" + friend.name + "</div></div>");
            });
            friend_container.append(buffer.join(""));

            uninitializedImagefriendElements = $(".jfmfs-friend", elem);            
            uninitializedImagefriendElements.bind('inview', function (event, visible) {
                if( $(this).attr('src') === undefined) {
                    $("img", $(this)).attr("src", "//graph.facebook.com/" + this.id + "/picture");
                }
                $(this).unbind('inview');
            }); 
```

在这里，我尝试在每个图像前面添加复选框。在这将有一个复选框，图像和名称在一行中。我尝试添加这样的复选框

```
buffer.push("<div class='jfmfs-friend " + selectedClass + " ' id='" + friend.id  +"'><input type='checkbox'/><img/><div class='friend-name'>" + friend.name + "</div></div>"); 
```

并`display:inline-block`为 div css 添加。

无论我做什么，形象总是第一位的。即使之前添加元素`<img/>.`请帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T18:37:05.527

拆除`float:left`财产起到了作用。

# r - 如何将图例添加到 ecdf 图？

> ID：14299597
> 
> 赞同：0
> 
> 时间：2013-01-13T00:58:17.167
> 
> 标签：r

我正在生成一个 ecdf 图并想为其添加一个图例，但出现以下错误：

```
plot(xlim=c(0,100), ylim=c(0,1), main=NULL, xaxs="i", yaxs="i", 
     ecdf(PrecentageVector1),  col="red", do.p = FALSE, pch=19, 
     lwd=3,  legend("bottomleft",c("A","B","C")), panel.first = grid()) 

Error in strwidth(legend, units = "user", cex = cex, font = text.font) :  
invalid graphics state 
```

可能是什么问题呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-13T01:14:01.097

`?legend`是一个单独的函数，它不是`plot`调用的一部分。正如@timriffe 所说，您需要执行以下操作：

```
PrecentageVector1 <- c(10,20,30)
plot(xlim=c(0,100), ylim=c(0,1), main=NULL, xaxs="i", yaxs="i", 
     ecdf(PrecentageVector1),  col="red", do.p = FALSE, pch=19, 
     lwd=3, panel.first = grid()) 
legend("bottomleft",c("A","B","C")) 
```

# css - 使搜索框中心

> ID：14299598
> 
> 赞同：2
> 
> 时间：2013-01-13T00:58:29.147
> 
> 标签：css, html, centering

这应该是一个相对容易的问题。虽然我还没有找到解决方案，因为我是初学者。我想做的就是将我的搜索框居中。html如下：

[**jsFiddle**](http://jsfiddle.net/QUCqn/)

```
 <div class="colums">
    <li class="share"> <a target="_blank" href="#"></a>

    </li>
    <div id='search-box'>
      <form action='/search' id='search-form' method='get' target='_top'>
        <input onwebkitspeechchange="voiceInputOver(this.value)" x-webkit-speechname='q'
        placeholder='Search Contrabang...' type='text' />
      </form>
    </div>
  </div>
  <div class="colums">
    <div class="cntratop">
      <ul>
        <li class="live"> <a target="_blank" href="#">+Contrabang</a>

        </li>
        <li><a target="_blank" href="#">Blog</a>

        </li>
        <li><a target="_blank" href="#">Events</a>

        </li>
        <li><a target="_blank" href="#">About</a>

        </li>
        <li><a target="_blank" href="#">Contact</a>

        </li>
      </ul>
    </div>
  </div>
  <div class="columa">
    <div id="text-display"> <span>Your Daily Dose of Contrabang</span>
    </div>
  </div> 
```

CSS如下：

```
.columa {
  background:transparent;
  width: 960px;
  height: 500px;
  margin-left: auto;
  margin-right: auto;
  text-align: center;
  padding: 0px;
}
.colums {
  background:transparent;
  width: 960px;
  margin-left: auto;
  margin-right: auto;
  text-align: center;
  padding: 0px;
}
.cntratop {
  font-family: sans-serif;
  font-size: 14px;
}
.cntratop ul {
  list-style:none;
  margin-top:12px;
  background:;
  width:760px;
  padding:0px 0px 0px 0px;
  margin-left: auto;
  margin-right: auto;
}
.cntratop li {
  display:inline-block;
}
.cntratop li:first-child {
  margin-left:0px;
}
/*navbar text*/
 .cntratop a {
  display:inline;
  margin-left: -9px;
  padding:15px;
  text-decoration:none;
  color:#999;
  cursor:pointer;
}
.cntratop a:hover,
/*
.cntratopli.live*/
 a {
  font-weight:bold;
  color:#E94F78;
}
#search-box {
  list-style-type: none;
  display: inline;
  margin-left: 0px;
  margin-right:0px;
}
#search-form {
  width:0px;
  background-color: transparent;
  position: relative;
  margin-top: -23px;
}
#search-box input[type="text"] {
  width: 760px;
  font-family:Georgia;
  font-style: italic;
  font-size: 90.0%;
  padding: 3px 2 2px 10px;
  color: #999;
  outline: none;
}
#search-text {
  font-size: 13px;
  font-family:Georgia;
  font-style: italic;
  border-width: 0;
  background: transparent;
}
#search-button {
  position: absolute;
  top: 0;
  right: 0;
  height: 32px;
  width: 80px;
  font-size: 13px;
  color: #fff;
  text-align: center;
  line-height: 0px;
  border-width: 0;
  background-color: #3d3d3d;
  cursor: pointer;
}
#text-display {
  background-color:#E94F78;
}
#text-display {
  top:;
  position: relative;
  display:inline-block;
  padding:5px 10px;
  font-family: sans-serif;
  font-weight:bold;
  font-size:50px;
  color: white;
  text-align: center;
  line-height: 1.2em;
  margin:50px;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T01:19:50.210

```
#search-form {
  /* width:0px; */
  background-color: transparent;
  position: relative;
  margin-top: -23px;
} 
```

删除`width:0px`from`#search-form`应该可以解决此问题。您班级中的`text-align:center`样式`.colums`似乎可以控制搜索输入的对齐方式。

希望有帮助:)

# php - MySQL SUM 查询问题 php

> ID：14299600
> 
> 赞同：0
> 
> 时间：2013-01-13T00:58:34.157
> 
> 标签：php, mysql, sum

我在 PHP 中运行以下查询：

```
$ticketTotal = mysql_query("SELECT SUM(`tickets_issued`) FROM `tb_att_registered_attendants` WHERE `confirmation_code`!='000000'"); 
```

但是当我返回时`$ticketTotal`，我得到`Resource id #33`了，当我转储变量时，我得到了`resource(33) of type (mysql result)`。当我在 phpMyAdmin 中运行完全相同的查询时，我得到了正确的结果。我似乎在谷歌上找不到太多东西。到底是怎么回事？

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T01:00:06.613

`$ticketTotal`不保存您的查询结果。您仍然必须实际获取它们。

```
while ($row = mysql_fetch_assoc($ticketTotal))
{
    print_r($row);
} 
```

[请不要`mysql_*`在新代码中使用函数](https://stackoverflow.com/questions/12859942)。它们不再被维护[并被正式弃用](https://wiki.php.net/rfc/mysql_deprecation)。看到[红框](http://uk.php.net/manual/en/function.mysql-connect.php)了吗？改为了解[*准备好的语句*](https://en.wikipedia.org/wiki/Prepared_statement)，并使用[PDO](http://php.net/pdo)或[MySQLi](http://php.net/mysqli) -[本文](http://php.net/manual/en/mysqlinfo.api.choosing.php)将帮助您决定使用哪个。如果您选择 PDO，[这里有一个很好的教程](http://wiki.hashphp.org/PDO_Tutorial_for_MySQL_Developers)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-12T01:32:52.060

您可以使用此解决方案：

```
$Row = mysql_fetch_array($ticketTotal);
$sum = $Row['SUM(tickets_issued)']; 
```

我已经为我的代码测试了它并且它工作正常。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T07:24:41.160

如果您不使用 PHP5.5.0，那么您可以使用以下方式，因为 mysql_result 自 PHP5.5.0 起已弃用

```
$result = mysql_query("SELECT SUM(`tickets_issued`) FROM `tb_att_registered_attendants` WHERE `confirmation_code`!='000000'");
$ticketTotal = mysql_result($result,0); 
```

# css - 如何将锚标签水平居中css

> ID：14299602
> 
> 赞同：4
> 
> 时间：2013-01-13T00:59:40.923
> 
> 标签：css, anchor, center, alignment

我正在尝试为我的网站创建一个纯 html 和 css facebook 图标。我认为我大部分都做得相当好。但是，当我添加到 HTML 的链接时，HTML 中的文本“f”不再在 div 中水平居中。

HTML

```
<div class="facebook" alt="facebook"><a href="#">f</a></div> 
```

CSS

```
.facebook {
    font-family:"Lucida Grande", "Lucida Sans Unicode", "Lucida Sans", Geneva, Verdana, sans-serif; 
    height: 40px; 
    width: 40px;
    border-radius: 50%;
    background: #1f3060;
    background-position: center;
    font-size:22px;
    text-shadow: 1px 1px #000000;
    transition-duration: 0.2s;
    -moz-transition-duration: 0.2s;
    -webkit-transition-duration: 0.2s;
    -o-transition-duration: 0.2s;
    transition-timing-function: ease-in;
    -moz-transition-timing-function: ease-in;
    -webkit-transition-timing-function: ease-in;
    -o-transition-timing-function: ease-in;
    -webkit-transform:rotate(-360deg);
    -moz-transform:rotate(-360deg);
    -o-transform:rotate(-360deg);
    transform:rotate(-360deg);
}

.facebook a {
    color: white;
    vertical-align: bottom;
    text-align: center;
    line-height: 40px;
    padding-right: 20px;
    text-decoration: none;
}

.facebook:hover {
    background: #3a5998;
    transition-duration: 0.5s;
    -moz-transition-duration: 0.5s;
    -webkit-transition-duration: 0.5s;
    -o-transition-duration: 0.5s;
    transition-timing-function: ease-in;
    -moz-transition-timing-function: ease-in;
    -webkit-transition-timing-function: ease-in;
    -o-transition-timing-function: ease-in;
    -webkit-transform:rotate(0deg);
    -moz-transform:rotate(0deg);
    -o-transform:rotate(0deg);
    transform:rotate(0deg);
} 
```

这是一个指向我创建的[jsfiddle](http://jsfiddle.net/M2Dx8/17/)的链接，其中包含我的问题。

（没有我的网站的其余部分，这有我的问题，因为我知道那不是问题。我已经检查过了）

如果您对如何解决此问题有任何想法，我将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-13T03:02:44.053

使用这些属性`.facebook`

```
display:block;
text-align:center; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-13T01:08:08.333

取出`facebook a`元素上的 padding-right`text-align: center;`并向容器添加 a`.facebook`应该注意使文本居中。

[http://jsfiddle.net/M2Dx8/16/](http://jsfiddle.net/M2Dx8/16/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-13T01:08:07.460

您可以尝试从 .facebook中添加`display: block;`和删除a。`padding`这将使“f”居中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-13T01:07:21.063

尝试添加 **text-align:center;** 到 CSS 中的**.facebook**部分，它必须解决您的问题。

# loops - 如何处理数字逻辑模拟器中的循环？

> ID：14299603
> 
> 赞同：7
> 
> 时间：2013-01-13T00:59:44.490
> 
> 标签：loops, circuit, digital-logic

我正在开发一个数字逻辑模拟器，以便稍后在其中构建我自己的 CPU（所以这是一个长期项目）。一切都适用于没有环路的电路，例如全梯。然后是像 SR 锁存器这样的电路，其中一个门的输入连接到另一个门的输出。所以我处于一个循环中，因为两个门都需要另一个门的输出来计算它们自己的输出。
解决这个问题的最佳方法是什么？我以某种方式实现了它，即（当检测到循环时）它将返回它的最后一个输出。或者，当这是第一次运行时（因此没有先前的输出），我将返回零（低）。所以我只是假设一开始所有的输出都是低/零。到目前为止它有效，但我确信这不是解决问题的好方法。

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-13T01:17:05.667

在许多情况下，简单地将每个门建模为具有单位传播延迟是一种很好的方法。一个稍微复杂的替代方案是让大多数组件的“模拟步骤”例程检查模拟时间是否提前了“整步”，如果是，则仅更新其输出；一些组件可以省略该检查，而是要求在其他组件有机会更新后在模拟步骤中再次运行它们。这将允许某些组件假装具有零传播延迟，前提是它们没有嵌套太深（模拟应该限制在它决定组件不会之前尝试运行每个组件的评估状态例程的次数）达到稳定状态）。

根据具体模拟的内容，我建议您的组件除了“高”和“低”之外还有多个输出状态。即使添加“不确定”状态也会有所帮助，当组件的输入以可能影响其输出的方式发生变化时，输出将在最小传播时间后变为“不确定”，并在最大传播时间后呈现合法值在输入变为有效之后的传播时间。请注意，随着信号通过更多级别的逻辑，它们“不确定”的时间将会增加。有意义地模拟任何事物的唯一方法是拥有一个假定为稳定的时钟，并确保时钟周期足够长，以使事物在它们之间完全稳定。

以这种方式模拟事物的优点是，虽然模拟会在许多实际可行的电路上“失败”（产生“不确定”值），但这种模拟产生确定性结果的事实表明，构建的真实电路同样的方式也会这样做。不幸的是，对于依赖边沿触发锁存器的电路，最常见的仿真结果将是“不确定的”，即使对于实际工作机会为 100% 的电路也是如此。为了缓解这个问题，人们经常想要“诅咒”几个门，以免拉长“不确定”区间。这样做是一种“作弊”，并且会产生电路可能在模拟中工作但在现实中失败的可能性。尽管如此，如果小心地应用这些作弊，

# php - MySQL IF THEN ELSE 语句

> ID：14299605
> 
> 赞同：2
> 
> 时间：2013-01-13T01:00:06.057
> 
> 标签：php, mysql, pdo

我很难理解有关使用 IF 语句的 MySQL 文档，我希望有人可以为我简化它。我什至不知道是否最好使用 MySQL IF 语句来完成我想要完成的工作，或者是否有更好的方法使用 PHP 来完成。我正在尝试创建一个在线考勤卡系统，目前仅用于学习/实验。我有三个按钮“打卡”“更新”和“打卡”。“打卡”非常简单，我所做的就是在表格中添加“员工 ID”和“时间”以及“日期”。“更新”功能就是我现在所在的位置。所以我想做的是：

1.  将几个 PHP 变量添加到表中的指定列。
2.  将当前时间添加到“超时”列。
3.  将当前时间添加到具有相同“员工 ID”的新行中的“时间”列中。

所以我想做的声明是这样的：

```
IF "timeOut" is NULL
WHERE "employeeID" AND "currentDate"
THEN 
UPDATE "timeRecords" SET "jobDescription", "timeOut"
WHERE "employeeID" AND "currentDate"
THEN
INSERT "timeIn", "employeeID", "currentDate" 
```

有没有办法在 MySQL 中写这个？如果是这样，有人可以给我一个工作 MySQL 语句的示例，该文档没有提供足够的内容让我理解它。也许有更好的方法来完成我缺少的这个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T01:13:17.093

你真的不应该在你的 SQL 中使用 if/then 语句。“控制结构”适用于 C、PHP 或 Java 等语言 -SQL 是关于“集合”的。

在这种特殊情况下，请查看 mysql 的“替换”语句。它可能是您的场景的*理想选择*（“如果是新的，则插入；否则更新”）：

*   [http://dev.mysql.com/doc/refman/5.0/en/replace.html](http://dev.mysql.com/doc/refman/5.0/en/replace.html)

*   [http://www.mysqltutorial.org/mysql-replace.aspx](http://www.mysqltutorial.org/mysql-replace.aspx)

    替换成 table_name(column_name1,column_name2,…) VALUES(value1,value2,…)

# java - 如何在 onAction 方法中从 TextField 获取文本？

> ID：14299607
> 
> 赞同：3
> 
> 时间：2013-01-13T01:00:15.353
> 
> 标签：java, javafx-2

当我尝试从`TextField`我的一种`Button`操作方法中获取文本时，我得到了 NullPointerException。这是我的文本字段定义：

```
TextField textField = new TextField();
textField.setPromptText("Some text");
GridPane.setMargin(textField, new Insets(50, 50, 10, 50));
gridPane.add(textField, 0, 0); 
```

这是我的按钮及其 on 操作方法：

```
Button button = new Button("Button");       
GridPane.setMargin(button , new Insets(0, 50, 0, 50));
gridPane.add(button , 0, 1);
button.setOnAction(new EventHandler<ActionEvent>() {

    @Override
    public void handle(ActionEvent event) {
        String text = textField.getText();                              
    }
}); 
```

我进入`NullPointerExcpetion`这一行：`String text = textField.getText();`。如何在 onAction 方法中从 textField 获取文本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T01:11:59.370

一种可能性是您`TextField`在方法或构造函数中隐藏了您的。鉴于尚未将局部变量声明为 ，这似乎是一种可能性`final`。如果您`EventHandler`使用的是名为 的类成员变量`textField`，则替换

```
TextField textField = new TextField(); 
```

和

```
textField = new TextField(); 
```

# android - NotificationManager 启动空 Activity

> ID：14299608
> 
> 赞同：1
> 
> 时间：2013-01-13T01:00:38.460
> 
> 标签：android, notifications, alarmmanager, notificationmanager

我创建了一个通过 AlarmManager 启动的简单状态通知。一切正常（通知的内容、标题、点击时启动的活动等）。不幸的是，当通知被调用（即，AlarmManager 关闭）时，会启动并显示一个空活动。该活动只是在状态栏中包含我的应用程序的名称及其图标。实际活动本身是空白的。同样，当通知关闭并首次出现在状态栏中时会发生这种情况。当我再次点击通知时，它会转到正确的待处理活动。这是我的代码：

这是将 AlarmManager 设置为调用通知的代码：

```
//Use AlarmManager to trigger the notification/alarm.
AlarmManager alarmManager = (AlarmManager) getSystemService(ALARM_SERVICE); 

//PendingIntent to launch activity when the alarm triggers.                    
Intent intent = new Intent("com.YouForgotWhat.FlightGear.DisplayNotification");

PendingIntent displayIntent = PendingIntent.getActivity(getBaseContext(), 0, intent, 0);   

//Set an alarm to go off at 30 minutes before fuel runs out.
alarmManager.set(AlarmManager.RTC_WAKEUP, endTimeInMillis - (30*60*1000), displayIntent); 
```

这是通知本身的实际代码（它在另一个活动中）：

公共类 DisplayNotification 扩展 SherlockActivity { 私有上下文上下文 = this;

```
public void onCreate(Bundle paramBundle) {
    super.onCreate(paramBundle);

    NotificationManager mNotificationManager = (NotificationManager) getSystemService(Context.NOTIFICATION_SERVICE);
    NotificationCompat.Builder mBuilder = new NotificationCompat.Builder(this);

    mBuilder.setContentTitle("Your fuel may be running low.")
            .setContentText("There are 30 mins left on your timer. Check your fuel gauges.")
            .setSmallIcon(R.drawable.ic_launcher);

    Intent intent = new Intent(this, FuelTimer.class);

    PendingIntent in = PendingIntent.getActivity(getApplicationContext(), 0, intent, 0);
    mBuilder.setContentIntent(in);

    mNotificationManager.notify(0, mBuilder.build());

}

} 
```

我该怎么做才能解决这个问题？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T01:18:30.583

您正在启动一个 Activity 来发出通知，首先您会看到一个空的 Activity 是有道理的——这正是您刚刚启动的。请改用广播接收器。

所以当它收到：

```
public class Receiver extends BroadcastReceiver{
  @Override
  public void onReceive(Context context, Intent intent)
  {
    NotificationManager mNotificationManager = (NotificationManager) getSystemService(Context.NOTIFICATION_SERVICE);
    NotificationCompat.Builder mBuilder = new NotificationCompat.Builder(context);

    mBuilder.setContentTitle("Your fuel may be running low.")
      .setContentText("There are 30 mins left on your timer. Check your fuel gauges.")
      .setSmallIcon(R.drawable.ic_launcher);

    Intent intent = new Intent(context, FuelTimer.class);

    PendingIntent in = PendingIntent.getActivity(context, 0, intent, 0);
    mBuilder.setContentIntent(in);

    mNotificationManager.notify(0, mBuilder.build());

   } 
} 
```

您必须将 Receiver 添加到清单中：

```
<receiver android:name="com.YouForgotWhat.FlightGear.Receiver" >
            <intent-filter>
                <action android:name="com.YouForgotWhat.FlightGear.DisplayNotification" />
            </intent-filter>
 </receiver> 
```

最后，更改您的代码以启动接收器，就像

```
//PendingIntent to launch activity when the alarm triggers.                    
Intent intent = new Intent("com.YouForgotWhat.FlightGear.DisplayNotification");

PendingIntent displayIntent = PendingIntent.getBroadcast(getBaseContext(), 0, intent, 0); 
```

# c - 我从 k & r 第 1.6 章中的程序示例中得到错误的输出

> ID：14299614
> 
> 赞同：2
> 
> 时间：2013-01-13T01:01:38.997
> 
> 标签：c

我知道在同一个例子上还有另一个问题，但针对不同的问题。

这是代码示例：

```
#include <stdio.h>
/* count digits, white space, others */
main()
{
    int c, i, nwhite, nother;
    int ndigit[10];
    nwhite = nother = 0;

    for (i = 0; i < 10; ++i)
        ndigit[i] = 0;

    while ((c = getchar()) != EOF)
        if (c >= '0' && c <= '9')
            ++ndigit[c-'0'];
        else if (c == ' ' || c == '\n' || c == '\t')
            ++nwhite;
        else
            ++nother;

    printf("digits =");

    for (i = 0; i < 10; ++i)
        printf(" %d", ndigit[i]);

    printf(", white space = %d, other = %d\n", nwhite, nother);
} 
```

在我运行 is 并使用 执行程序后![Ctrl + D](../Images/d643fbac80006cc310627edb2a61ae04.png)，我得到：digits = 0 0 0 0 0 0 0 0 0 0, white space = 0, other = 0。来自 Xcode...

但是在书中他们说“这个程序本身的输出是：digits = 9 3 0 0 0 0 0 0 0 1, white space = 123, other = 345”

你能告诉我发生了什么事吗..tnx。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T01:12:20.200

从书中；

> 这个程序本身的输出是
> digits = 9 3 0 0 0 0 0 0 0 1, white space = 123, other = 345

尝试使用自己的源作为输入；

```
> gcc test.c
> ./a.out < test.c

digits = 9 3 0 0 0 0 0 0 0 1, white space = 125, other = 345 
```

关闭，但我怀疑来自 StackOverflow 的剪切粘贴可能会导致 2 个额外的空格:)

# android - 将文本文件导入我的项目会出错

> ID：14299615
> 
> 赞同：0
> 
> 时间：2013-01-13T01:02:05.313
> 
> 标签：android

**为什么当我将文本文件导入我的项目时，它会显示错误？**

我需要文本文件从中读取一些信息并将其显示在 ListView 上。这是我正在谈论的内容的屏幕截图。

![在此处输入图像描述](../Images/38e225bc579ce1388bf5dd6a88b24e1d.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T01:09:52.640

此目录中的所有数据文件必须是 XML 格式。

您可以在此处放置多种数据。有关详细信息，请参阅[http://developer.android.com/guide/topics/resources/more-resources.html](http://developer.android.com/guide/topics/resources/more-resources.html)。

例如：

res/values/strings.xml

```
<string name="prefs">Version</string> 
```

将在 Java 代码中引用为

```
String version = context.getResources().getString(R.id.prefs); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T01:10:49.540

您不能使用纺织品来填充 ListView，您应该在 strings.xml 上设置它，添加字符串名称和他的值。@String 可以作为资源存储和检索。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T01:35:50.823

要打开原始资源，您需要使用[`openRawResource()`.](http://developer.android.com/reference/android/content/res/Resources.html#openRawResource%28int%29)

例如，如果您在 中`Activity`，您可以将原始文本文件打开为：

```
InputStream input = getResources().openRawResource(R.raw.textfile); 
```

这将返回一个[InputStream](http://developer.android.com/reference/java/io/InputStream.html)，它允许您从文件中读取。

[这个](https://stackoverflow.com/questions/4087674/android-read-text-raw-resource-file)SO question 为基本阅读原始文本文件提供了一个很好的代码示例。

# php - 无法使用 PHP 从 MySQL 中删除记录

> ID：14299619
> 
> 赞同：3
> 
> 时间：2013-01-13T01:02:32.620
> 
> 标签：php, mysql

我正在编写一个程序，它将通过 URL 接收值，然后将一个条目添加到 MySQL 数据库中，将其删除，或者如果其他人已经预订了该插槽，那么它不会让您删除它。

添加和删​​除函数如下：

```
function addBooking($id, $desk, $member, $date){
    global $dbconn;
    $query = $dbconn -> prepare("INSERT INTO booked (booking_id, desk_id, member_id, date_booked) VALUES (?,?,?,?)");
    $query -> bind_param("iiis", $id, $desk, $member, $date);
    $query->execute();
    print '<div class="yours" title="Your Booking">Your Booking</div>';
    $query -> close();
}

function delBooking($id, $desk){
    global $dbconn;
    $query = $dbconn -> prepare("DELETE FROM booked WHERE booking_id = ? AND desk_id = ?");
    $query -> bind_param("ii", $id, $desk);
    $query->execute();
    print '<div class="free" title="Click To Book">Not Booked</div>';
    $query -> close();
} 
```

调用它们的代码是这样的：

```
$query = $dbconn -> prepare("SELECT firstname, lastname, booked.member_id, date_booked FROM members, booked WHERE (members.member_id = booked.member_id) AND booking_id = ? AND desk_id=?");
    $query -> bind_param("ss", $booking_id, $desk_id);
    if($query->execute() == true) {
        $query -> bind_result($fname, $lname, $memid, $dbooked);
        $query -> fetch();
        if($fname){
            if ($memid == $member_id)
            {
                delBooking($booking_id,$desk_id);
            }
            else
            {
                print '<div class="taken" title="Booked by <strong>'.$fname.' '.$lname.'</strong><br>On '.$dbooked.'">Booked</div>';
            }
        }else{
            addBooking($booking_id,$desk_id,$member_id,$date);
        }
    } 
```

它会增加预订罚款，并且还会告诉您是否其他人已经预订罚款，但如果您在自己的预订上再次运行它，它将给您错误：

```
Fatal error: Call to a member function bind_param() on a non-object in /var/www/new/functions/functions.php on line 80 
```

我不确定为什么。这不是我的删除语句或任何东西，因为我可以将 addBooking 函数重命名为 delBooking 所以它是相同的工作代码，它仍然给我完全相同的错误：/

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T02:01:36.790

使用 mysqli 时，您不能同时在单个连接上激活多个准备好的语句。通过激活，我的意思是通过调用它的 execute() 至少一次将其发送到服务器。您可以准备尽可能多的未使用语句，但一次只能执行一个。完成后，您需要在执行另一个语句之前关闭该语句。在调用 delBooking() 之前，关闭前面的语句：

```
$query->fetch();
$query->close();
if($memid == $member_id){
    delBooking(....); 
```

# applescript - 如何获取 iphoto 相册的名称

> ID：14299624
> 
> 赞同：1
> 
> 时间：2013-01-13T01:03:24.817
> 
> 标签：applescript, iphoto

我正在尝试使用 applescript/iphoto 获取专辑的名称。到目前为止，我有这个

```
tell application "iPhoto"
activate
set theEvents to get every album
repeat with aEvent in theEvents
    log name of aEvent
end repeat
end tell 
```

但是当它打印名称时，我得到了这个：

```
(*name of album id 6.442450942E+9*)
(*name of album id 6.442450941E+9*)
(*name of album id 6.44245094E+9*) 
```

不是我想要的。我对applescript很陌生，所以我怀疑一些基本的东西出了问题，但我在网上看到的几个例子似乎做了这样的事情。任何帮助表示赞赏。

**更新**

可能已经找到答案了。我已经看到提示，与专辑名称不同，无法使用 applescript 直接访问事件名称（对我来说似乎很愚蠢，但这就是我目前发现的）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T04:00:39.907

试试这个：

```
tell application "iPhoto"
activate
set theEvents to get every album
repeat with aEvent in theEvents
    log (get name of aEvent)
end repeat
end tell 
```

该`log`命令不会隐式取消引用您传递的对象说明符。添加`get`命令可以做到这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T16:36:24.550

答案 #1 已被接受，但我想将其发布给未来的读者。

```
 tell application "iPhoto" to set theEvents to get name of every album

    #You can then use the theEvents list.

    #Example - log  items of theEvents 
    log theEvents
--> {"Events", "Faces", "Places", "Photos", "Last 12 Months", "Last Import", "Flagged","Trash", "My Photo Stream", "Holiday 2008", "Holiday Sep 2008"}

    #Example -  work though the items of theEvents with a repeat loop

    repeat with i from 1 to number of items in theEvents
        set this_item to item i of theEvents
        if this_item contains "Holiday" then
            log this_item
-->(*Holiday 2008*)
-->(*Holiday Sep 2008*)
        end if
    end repeat 
```

# html - 如何更改 CSS 过渡的起点？

> ID：14299625
> 
> 赞同：12
> 
> 时间：2013-01-13T01:03:44.283
> 
> 标签：html, css, css-transitions, transitions

假设我有一个`<div>`我想从小尺寸扩展到更大尺寸的产品（请参阅[this](http://jsfiddle.net/7ZUeu/38/)）。

默认情况下，a 上的宽度和高度 CSS3 过渡`<div>`将从左上角开始，一直到右下角。但是，我希望`<div>`从右上角扩展到左下角。

**这是我的问题：有什么办法可以使`<div>`从右上角到左下角的宽度和高度过渡？**

这是一张图片来澄清我的问题。基本上，我希望我`<div>`像右边的框一样展开，而不是像左边的框所示的默认方式。 ![问题描述：我希望我的 <code><div></code> 从右上角扩展到左下角，如下所示，而不是从左上角到右下角。](../Images/2ac2d4053e3895cf573a576721303dcf.png)

**这是另一张图片：** ![在此处输入图像描述](../Images/dc9bfddf9d1ebd56fb05b043aa14b1ac.png)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-15T13:25:43.947

因为你想让事情“转移”，所以你并没有真正看到它从右到左增长的事实，但[我认为这实现了你想要的](http://jsfiddle.net/7ZUeu/30/)（它调整了一些其他边距，并添加了一个相对转移）：

```
 div {
        width:100px; 
        height:100px; 
        float:left;
        margin:5px;
        position: relative;
        right: 0;
        box-shadow: 2px 2px 10px rgba(0,0,0,0.5);
        background-color:rgba(25,25,25,0.7);
        transition: all 0.5s ease;
        -webkit-transition: all 0.5s ease;
        -o-transition: all 0.5s ease;
        -moz-transition: all 0.5s ease;
    }
  div:hover {
        width:200px;
        height:200px;
        margin:10px 115px 0px -105px;
        right: -110px;
    } 
```

请注意，仅仅因为浮动的性质和项目的移动，您会在许多元素中得到一些奇怪的行为。[在缩小尺寸时使用这个小提琴](http://jsfiddle.net/7ZUeu/31/)，以便至少有两行 div。

**边距说明**

右边距将`115px`以下元素推到上面（您想要的“移位”），为元素扩展腾出空间。它是元素的宽度，加上元素的`5px`边距，再加上较大尺寸的元素将其边距增加到`10px`. 正是*在*这个空间中`right`发生了转变。扩展本身的方向通过 发生`-105px`，这就是导致元素向左扩展的原因（如您最初想要的那样）。

更新你的新照片：[看看这个小提琴](http://jsfiddle.net/7ZUeu/61/)。仍然有一些小错误，但基于一组三个 div 的功能很好（有一个额外的非语义`span`使我的功能工作）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-13T01:18:40.750

您可以将`div:hover`边距更改为类似的东西`margin:10px 10px 0px -100px;`并获得所需的效果。但是，您需要调整 div 和悬停的边距（如果您不能使用 float:right）。[http://jsfiddle.net/7ZUeu/14/](http://jsfiddle.net/7ZUeu/14/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-15T16:45:37.900

等待有问题的评论中要求的更多细节。

现在我理解这样的任务[http://jsfiddle.net/7ZUeu/34/](http://jsfiddle.net/7ZUeu/34/)

```
<div class="wrapper">
  <div class="box"></div>
  <div class="box"></div>
  <div class="box"></div>
</div>

.wrapper {
  float:left;
}

.box {
  width:100px; 
  height:100px; 
  float:right;
  background:url(http://placekitten.com/200/200/) no-repeat 100% 0;
  -webkit-transition: all .5s ease;
     -moz-transition: all .5s ease;
      -ms-transition: all .5s ease;
       -o-transition: all .5s ease;
          transition: all .5s ease;
}
.box:hover {
  width:200px;
  height:200px;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-16T04:32:05.037

这是不完整的，但也许如果你将它们包装在另一个固定的 div 中。同样，这有点丑陋，但也许它的方向是正确的。（借用 ScottS 的小提琴）。

```
div.one,.two,.three {
  display: inline-block;
  float: left;
  width:100px; 
  height:100px; 
  margin:3px;
  position: relative;
  right: 0;
  box-shadow: 2px 2px 10px rgba(0,0,0,0.5);
  background-color:rgba(25,25,25,0.7);
  transition: all 0.5s ease;
  -webkit-transition: all 0.5s ease;
  -o-transition: all 0.5s ease;
  -moz-transition: all 0.5s ease;
}

div.one:hover,div.two:hover {
  width:200px;
  height:200px;
  margin:3px 113px 0px -100px;
  right: -110px;
  float:right;
}

div.three:hover {
  width:200px;
  height:200px;
  margin:3px 113px 0px -100px;
  right: -110px;
}

div.fixed {
  width: 330px;
  height: 220px;
  background: whitesmoke;
} 
```

我还拆分了 div，因为您似乎只能在给定方向上将其中两个圈起来......

[http://jsfiddle.net/YAGmC/1/](http://jsfiddle.net/YAGmC/1/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-08-06T09:36:03.820

尝试这个：

```
.right{
width:100px; 
height:100px; 
float:right;
background-color:#000000;
}

.right:hover{
margin-left:-300px;
width:300px;
transition:0.3s
} 
```

# regex - tcl 期望美元符号锚匹配最后一个字符不起作用

> ID：14299630
> 
> 赞同：2
> 
> 时间：2013-01-13T01:05:05.463
> 
> 标签：regex, tcl, expect

在 TCL Expect 中，我是否需要转义`$`才能将其用作锚点？例如，`t`如果它出现在最后一个位置，则匹配应该是：

期望 t$

但这不起作用，我怀疑是因为 TCL 正在解释`$`. 我尝试了以下所有方法均未成功

```
expect -re {t$}
expect t\$
expect t\\$ 
```

......但没有运气。帮助

当我在这里时，您如何匹配任何响应并捕获整个响应，即我怀疑类似以下内容

```
expect ^*$ 
```

但我`$`的坏了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T17:35:33.173

正如 acheong87 所指出的，expect 脚本在响应中包含换行符。要查看这一点，请使用 glen jackman 提示并将 exp_internal 1 添加到脚本的顶部。因此，如果字符“t”在最后一个位置，则匹配字符“t”是：

```
expect -re {t\n$} 
```

捕获任何响应和整个响应的一种方法是

```
expect -re {^.*.\n$} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-25T17:37:57.333

在大多数情况下，您不必这样做，但请继续阅读。Expect 基本上是一个带有一些扩展的 TCL shell。TCL 使用美元符号 ($) 来执行变量替换*当且仅当*它在 TCL dodekalogue (http://wiki.tcl.tk/10259) 中描述的 3 个上下文之一中找到。简而言之，它们是 $name、${name} 和 $name(name) 形式。当 TCL 解释器处理您的脚本时，它*不会*替换美元符号，而是在不满足上述条件时将其保留在其文字形式中，例如

```
expect "abc\r\n$" 
```

除非您使用大括号语法，否则不能使用以双引号开头或包含双引号的任何内容作为变量名。然而，无论如何通过反斜杠转义美元符号是明智的。
我要注意的是，在我的旧版本 Expect (5.25.0) 中，正则表达式处理器不执行反斜杠转义替换，因此如果您使用这样的版本，则不能使用大括号来转义换行符。在 Expect(TCL) 完成替换并且正则表达式匹配开始后，必须有一个文字换行符，这是通过让 Expect 替换 来实现的`\n`。

因为Expect 的正则表达式不是面向行而是面向缓冲区的`^`，`$`分别表示缓冲区的开始和缓冲区的结束。
取决于终端的缓冲模式，Expect 可能只会逐行获取生成的进程的输出（就像在我的和大多数情况下一样）~~，尽管没有换行符~~。
这保证（编辑：不是真的保证，见结尾）缓冲​​区的当前结束总是与生成进程的输出中的行结束一致。
另一个问题是（至少我的 UNIX 版本）Expect 与换行符不匹配`\n`，而只匹配`\r\n`!
即，它似乎将这两个字符放在它获取的每个输入块的末尾（编辑：实际上，替换了正常的换行符）。

因此，要匹配缓冲区末尾的字符 't'，首先您必须确保在 't' 之后有一个终止换行符，并且生成的进程正在等待或以其他方式保证 Expect 的缓冲区不会被更多填充输入。
在 Expect 方面，正确的命令是：

```
expect -re "t\r\n\$" {...} 
```

请注意，美元符号之前的反斜杠并不是真正需要的，我只是把它放在那里以支持这样做的好习惯。

编辑：当然，换行符确实被传递给 Expect，这与我最初写的相反，它似乎用“\r\n”代替。
我还想补充一点，我知道有一种情况是生成的进程的缓冲区被刷新，即当进程终止时。因此，实际上并不能保证新行的结尾是缓冲区的当前结尾，但在大多数情况下确实如此。
如果您尝试等待程序中的模式早于 Expect 脚本结束，您将获得该模式，结尾处没有任何换行符！
在这种情况下，您可以简单地匹配文本末尾的裸字符“t”

```
expect -re "t$" {...} 
```

# jquery-ui - jQuery Navigation 更改类，但返回必要的类

> ID：14299633
> 
> 赞同：0
> 
> 时间：2013-01-13T01:06:12.563
> 
> 标签：jquery-ui, jquery

所以我正在尝试在我的新网站重新设计中制作一个有趣的交互式导航。总体思路如前所述。我想模仿一个 URL 栏，就像当您将鼠标悬停在导航上的不同按钮上时，它会更改栏中的 URL。

这是网站： [http ://droddle.com/2013/](http://droddle.com/2013/)

如您所见，当有人访问主页（即博客）时，我希望 URL 栏显示为“Droddle.com/blog”。当您将鼠标悬停在博客图标上时，我希望 Droddle.com 部分变为灰色，而 /blog 部分变为白色。我将所有图像都放在一个精灵表中。

因此，总体主题是您所在的任何页面，默认情况下，我希望相应的 URL 显示 url 的图像，其中 Droddle.com 为白色，/whatever 为灰色。每当您将鼠标悬停在导航链接上时，我希望 url 栏显示相应的 url 图形，其中 droddle.com 为灰色，/whatever 为白色。但是当你将鼠标移出导航按钮时，我希望一切都恢复到原来的状态，以便它可以再次显示当前页面。

如果您需要更多说明，请告诉我

这是我的代码：

jQuery

```
$(document).ready(function(){

    $('a.navlink.blog').hover(function () {
        $('div.url_text').addClass('blog').addClass('up');
    }, function () {
        $('div.url_text').removeClass('up').addClass('blog');
    });

}); 
```

HTML

```
 <div class="url_bar">
        <div class="url_text blog down"></div>
    </div> 
```

CSS

```
div.url_bar {
    width: 347px;
    height: 47px;
    margin: 60px 0 0 0;
    padding: 0;
    background: url(images/url_bar.png) no-repeat center center;
    float: left;
}

    div.url_text.blog {
        width: 175px;
        height: 24px;
        margin: 14px 0 0 15px;
        padding: 0;
        background: url(images/url_bar_text.png) no-repeat;
    }

    div.url_text.blog.down {
        background-position: -16px -14px;
    }

    div.url_text.blog.up {
        background-position: -273px -14px;
    }

    div.url_text.about {
        width: 190px;
        height: 24px;
        margin: 14px 0 0 15px;
        padding: 0;
        background: url(images/url_bar_text.png) no-repeat;
    }

    div.url_text.about.down {
        background-position: -16px -49px;
    }

    div.url_text.about.up {
        background-position: -273px -49px;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T01:24:49.980

如果你想要这样的东西：http: [//jsfiddle.net/yQ85p/](http://jsfiddle.net/yQ85p/)

这是给你的代码：

```
var defaultLogoClass = "";

$(document).ready(function(){

        defaultLogoClass = $('div.url_text').attr('class');

        $('a.navlink.blog').hover(function () {
            $('div.url_text').attr("class",'url_text blog up');
        }, function () {
            resetLogo();
        });

  $('a.navlink.about').hover(function () {
            $('div.url_text').attr("class",'url_text about up');
        }, function () {
            resetLogo();
        });

    });

function resetLogo(){
  $('div.url_text').attr("class",defaultLogoClass);
} 
```

我这样做是为了博客和关于链接，所以你可以复制粘贴其他的。

# c# - LuaInterface - 一个返回 LuaTable 值的函数

> ID：14299634
> 
> 赞同：3
> 
> 时间：2013-01-13T01:06:30.787
> 
> 标签：c#, lua, luainterface

有谁知道如何编写一个返回 LuaTable 值的 C# 函数（例如`{1 = "example1", 2 = 234, "foo" = "Foo Example"}`？我测试过的所有类型都返回`LuaUserData`不可配对/可配对的值。提前致谢。

--update-- 在我看来，最接近 luaTable 的类型是 ListDictionary：

```
 [LuaFunc(Name = "table", Desc = "returns test LuaTable", Params = new string[] { })]
    public System.Collections.Specialized.ListDictionary table()
    {
        var k = new System.Collections.Specialized.ListDictionary(){
            {"1",1},
            {2,"2"}
        };

        return k;
    } 
```

但它仍然在 Lua 中被识别为 LuaUserData 并且不能配对/配对

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T13:59:33.023

这个问题有两种可能的解决方案。

首先是让 Lua 返回表：

```
LuaTable lt = (LuaTable) lua.DoString("return {1 = "example1", 2 = 234, "foo" = "Foo Example"}")[0]; 
```

第二种可能性是创建一个新表

```
LuaTable lt = lua.NewTable("ThisTable")
lt["1"] = "example1"
lt["2"] = 234
lt["foo"] = "Foo Example" 
```

您可以通过 Lua 访问第二个表

```
ThisTable[1] = ThisTable["foo"] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-04T01:33:23.703

JCH2k 是对的。NewTable 没有返回类型！

使用 JCH2k 逻辑，我能够使这个函数将 ac# Point 转换为 LuaTable。

```
public LuaTable ConvertPointToTable(Point point)
{
return (LuaTable)lua.DoString("return {" + point.X + ", " + point.Y + "}")[0];
} 
```

在 Lua 中使用一次返回。

```
local x = val[1]
local y = val[2] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-28T11:44:00.437

user1829325 提供了很好的方法，尽管它们不经过修改就无法编译。
lua.DoString 返回一个数组， lua.NewTable 不返回任何内容。

但这使我得到了以下解决方案，该解决方案运行完美，所以无论如何+1！

```
public LuaTable CreateTable()
{
    return (LuaTable)lua.DoString("return {}")[0];
} 
```

返回应该从 Lua 调用的表的 AC# 函数可能如下所示：

```
LuaTable newtable = CreateTable();
table["lala"] = 5;
return table; 
```

我还编写了一个 marshall 函数，它使用上面的函数将 Dictionary 转换为 LuaTable：

```
private LuaTable MarshalDictionaryToTable<A,B>(Dictionary<A, B> dict)
{
    LuaTable table = runner.CreateTable();
    foreach (KeyValuePair<A, B> kv in dict)
        table[kv.Key] = kv.Value;
    return table;
} 
```

# haskell - Haskell 中存在与普遍量化的类型

> ID：14299638
> 
> 赞同：61
> 
> 时间：2013-01-13T01:07:04.713
> 
> 标签：haskell, polymorphism, existential-type

这些之间究竟有什么区别？我想我理解存在类型是如何工作的，它们就像在 OO 中有一个基类，没有办法进行向下转换。通用类型有何不同？

* * *

## 回答 #1

> 赞同：105
> 
> 时间：2013-01-13T02:10:52.080

这里的术语“普遍”和“存在”来自[谓词逻辑](http://en.wikipedia.org/wiki/Predicate_logic)中名称相似的量词。

[全称量化](http://en.wikipedia.org/wiki/Universal_quantification)通常写成∀，你可以读作“for all”，大致意思是它听起来的样子：在类似于“∀x....”的逻辑语句中，用什么代替“...”对于所有可能的“x”都是正确的，您可以从正在量化的任何一组事物中进行选择。

[存在量化](http://en.wikipedia.org/wiki/Existential_quantification)通常写成∃，你可以读作“存在”，这意味着在类似于“∃x....”的逻辑语句中，任何代替“...”的东西对于某些未指定的东西都是正确的“x”取自被量化的一组事物。

在 Haskell 中，被量化的东西是类型（至少忽略某些语言扩展），我们的逻辑语句也是类型，我们认为“可以实现”而不是“真实”。

所以，一个普遍量化的类型`forall a. a -> a`意味着，对于任何可能的类型“a”，我们可以实现一个类型为 的函数`a -> a`。事实上，我们可以：

```
id :: forall a. a -> a
id x = x 
```

由于`a`是普遍量化的，我们对此一无所知，因此无法以任何方式检查论点。^(该类型(1))`id`的唯一可能功能也是如此。

在 Haskell 中，通用量化是“默认值”——签名中的任何类型变量都被隐式地通用量化，这就是为什么类型`id`通常写为 just `a -> a`。这也称为[参数多态](http://en.wikipedia.org/wiki/Parametric_polymorphism)，在 Haskell 中通常称为“多态”，而在其他一些语言（例如 C#）中称为“泛型”。

像这样的*存在*量化类型`exists a. a -> a`意味着，对于*某些特定*类型“a”，我们可以实现类型为 的函数`a -> a`。任何功能都可以，所以我会选择一个：

```
func :: exists a. a -> a
func True = False
func False = True 
```

...这当然是布尔值的“非”函数。但问题是我们不能这样*使用*它，因为我们所知道的类型“a”就是它存在。*关于它可能是哪种*类型的任何信息都已被丢弃，这意味着我们不能应用于`func`任何值。

这不是很有用。

那么我们*可以*做`func`什么呢？好吧，我们知道它是一个输入和输出类型相同的函数，所以我们可以用它自己来组合它，例如。本质上，你可以对存在类型的东西做的唯一事情是你可以基于类型的非存在部分做的事情。类似地，给定一些类型，`exists a. [a]`我们可以找到它的长度，或者将它连接到自身，或者删除一些元素，或者我们可以对任何列表做的任何其他事情。

最后一点让我们回到了全称量词，以及 Haskell ^((2))没有直接存在类型的原因（我的`exists`上面完全是虚构的，唉）：因为存在量化类型的事物只能用于具有普遍量化的类型，我们可以把类型`exists a. a`写成`forall r. (forall a. a -> r) -> r`——换句话说，对于所有结果类型`r`，给定一个函数，对于所有类型，都`a`接受一个类型的参数`a`并返回一个类型的值`r`，我们可以得到一个类型的结果`r`。

如果你不清楚为什么它们几乎是等价的，请注意，整体类型不是普遍量化的——`a`而是，它需要一个本身被普遍量化的参数，`a`然后它可以与它选择的任何特定类型一起使用。

* * *

顺便说一句，虽然 Haskell 并没有真正意义上的子类型化概念，但我们可以将量词视为表达子类型化的一种形式，其层次结构从普遍到具体再到存在。某种类型的东西`forall a. a`可以转换为任何其他类型，因此它可以被视为一切事物的子类型；另一方面，任何类型都可以转换为 type `exists a. a`，使其成为所有内容的父类型。当然，前者是不可能的（`forall a. a`除了错误之外没有类型的值），而后者是无用的（你不能对 type 做任何事情`exists a. a`），但这个类比至少在纸面上是有效的。:]

请注意，存在类型和普遍量化参数之间的等价性与函数输入的[方差](http://en.wikipedia.org/wiki/Covariance_and_contravariance_%28computer_science%29)翻转的原因相同。

* * *

因此，基本思想大致是，普遍量化的类型描述了对任何类型都适用的事物，而存在类型描述了适用于特定但未知类型的事物。

* * *

**1：**嗯，不完全——只有当我们忽略导致错误的函数时，例如`notId x = undefined`，包括永不终止的函数，例如`loopForever x = loopForever x`.

**2：**嗯，GHC。没有扩展，Haskell 只有隐含的全称量词，根本没有谈论存在类型的真正方式。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2019-10-03T22:09:42.023

Bartosz Milewski 在他的书中提供了一些关于为什么 Haskell 不需要存在量词的很好的见解：

> 在伪 Haskell 中：
> 
> ```
> (exists x. p x x) -> c ≅ forall x. p x x -> c 
> ```
> 
> 它告诉我们，采用存在类型的函数等价于多态函数。这是完全合理的，因为这样的函数必须准备好处理可能以存在类型编码的任何一种类型。同样的原则告诉我们，接受 sum 类型的函数必须实现为 case 语句，并带有一个处理程序元组，每个处理程序对应于 sum 中的每个类型。在这里，sum 类型被一个 coend 代替，一个处理程序族成为一个 end 或多态函数。

因此，Haskell 中存在量化类型的示例是

```
data Sum = forall a. Constructor a    (i.e. forall a. (Constructor_a:: a -> Sum) ≅ Constructor:: (exists a. a) -> Sum) 
```

这可以被认为是一个 sum `data Sum = int | char | bool | ...`。相比之下，Haskell 中的一个普遍量化类型的例子是

```
data Product = Constructor (forall a. a) 
```

这可以作为一个产品`data Product = int char bool ...`。

# iphone - iPhone AES Rijndael 128 解密

> ID：14299641
> 
> 赞同：2
> 
> 时间：2013-01-13T01:08:02.357
> 
> 标签：iphone, aes, decode, encryption

我有个问题：

我加密数据，并在 base64 中对其进行编码..之后，我将其发送到我的页面 php 并解码和解密数据。好的！

现在，如果我在 php 中加密和编码数据并将其发送到我的应用程序，我的应用程序会解码数据并解密数据，但结果是字符串长度的一半。看看这个：

明文：**xLxE9sY8vkBTGDpvz0DkLkejLSjuVhBq**

来自服务器的 CHIPER ：**jp6gtdy/tf8mnQoeZCQjPuauq089eJvmns0DP4kvDzw=**

在我的应用程序中解密 CHIPER 服务器：**xLxE9sY8vkBTGDpv** <--- 它是一半！！！！

但是如果我在我的应用程序中加密明文，结果会有所不同：

来自 APP 的 CHIPER： **jp6gtdy/tf8mnQoeZCQjPuauq089eJvmns0DP4kvDzzjd4QC2afnXreH/VpUo/Mw**

来自服务器的 CHIPER ：**jp6gtdy/tf8mnQoeZCQjPuauq089eJvmns0DP4kvDzw=**

和解密是好的：

解密芯片应用程序：**xLxE9sY8vkBTGDpvz0DkLkejLSjuVhBq**

现在，我使用了一个带有 2 chyper 文本的在线工具……结果是一样的！！明文！！！尝试！！！(http://www.tools4noobs.com/online_tools/decrypt/) !?!?!?!

我在我的应用程序中的功能是这样的：

```
+ (NSData*)decryptData:(NSData*)data key:(NSData*)key iv:(NSData*)iv;
{
    NSData* result = nil;

    // setup key
    unsigned char cKey[FBENCRYPT_KEY_SIZE];
    bzero(cKey, sizeof(cKey));
    [key getBytes:cKey length:FBENCRYPT_KEY_SIZE];

    // setup iv
    char cIv[FBENCRYPT_BLOCK_SIZE];
    bzero(cIv, FBENCRYPT_BLOCK_SIZE);
    if (iv) {
        [iv getBytes:cIv length:FBENCRYPT_BLOCK_SIZE];
    }

    // setup output buffer
    size_t bufferSize = [data length] + FBENCRYPT_BLOCK_SIZE;
    void *buffer = malloc(bufferSize);

    // do decrypt
    size_t decryptedSize = 0;
    CCCryptorStatus cryptStatus = CCCrypt(kCCDecrypt,
                                          FBENCRYPT_ALGORITHM,
                                          kCCOptionPKCS7Padding,
                                          cKey,
                                          FBENCRYPT_KEY_SIZE,
                                          cIv,
                                          [data bytes],
                                          [data length],
                                          buffer,
                                          bufferSize,
                                          &decryptedSize);

    if (cryptStatus == kCCSuccess) {
        result = [NSData dataWithBytesNoCopy:buffer length:decryptedSize];
    } else {
        free(buffer);
        NSLog(@"[ERROR] failed to decrypt| CCCryptoStatus: %d", cryptStatus);
    }

    return result;
} 
```

该函数先解码后解密：

```
 + (NSString*)decryptBase64String:(NSString*)encryptedBase64String keyString:(NSString*)keyString
    {
        NSData* encryptedData = [NSData dataFromBase64String:encryptedBase64String];
        NSData* data = [self decryptData:encryptedData
                                     key:[keyString dataUsingEncoding:NSUTF8StringEncoding]
                                      iv:nil];
        if (data) {
            return [[[NSString alloc] initWithData:data
                                          encoding:NSUTF8StringEncoding] autorelease];
        } else {
            return nil;
        }
    } 
```

解码功能：

```
+ (NSData *)dataFromBase64String:(NSString *)aString
{
    NSData *data = [aString dataUsingEncoding:NSASCIIStringEncoding];
    size_t outputLength;
    void *outputBuffer = NewBase64Decode([data bytes], [data length], &outputLength);
    NSData *result = [NSData dataWithBytes:outputBuffer length:outputLength];
    free(outputBuffer);
    return result;
}

void *NewBase64Decode(
    const char *inputBuffer,
    size_t length,
    size_t *outputLength)
{
    if (length == -1)
    {
        length = strlen(inputBuffer);
    }

    size_t outputBufferSize =
        ((length+BASE64_UNIT_SIZE-1) / BASE64_UNIT_SIZE) * BINARY_UNIT_SIZE;
    unsigned char *outputBuffer = (unsigned char *)malloc(outputBufferSize);

    size_t i = 0;
    size_t j = 0;
    while (i < length)
    {
        //
        // Accumulate 4 valid characters (ignore everything else)
        //
        unsigned char accumulated[BASE64_UNIT_SIZE];
        size_t accumulateIndex = 0;
        while (i < length)
        {
            unsigned char decode = base64DecodeLookup[inputBuffer[i++]];
            if (decode != xx)
            {
                accumulated[accumulateIndex] = decode;
                accumulateIndex++;

                if (accumulateIndex == BASE64_UNIT_SIZE)
                {
                    break;
                }
            }
        }

        //
        // Store the 6 bits from each of the 4 characters as 3 bytes
        //
        // (Uses improved bounds checking suggested by Alexandre Colucci)
        //
        if(accumulateIndex >= 2)  
            outputBuffer[j] = (accumulated[0] << 2) | (accumulated[1] >> 4);  
        if(accumulateIndex >= 3)  
            outputBuffer[j + 1] = (accumulated[1] << 4) | (accumulated[2] >> 2);  
        if(accumulateIndex >= 4)  
            outputBuffer[j + 2] = (accumulated[2] << 6) | accumulated[3];
        j += accumulateIndex - 1;
    }

    if (outputLength)
    {
        *outputLength = j;
    }
    return outputBuffer;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T02:03:16.213

字符串长度为 32 个字节，大小为两个块。Base64 的长度也是 32 字节，因此没有添加填充，没有填充空间，因此没有 PKCS7 填充，删除 kCCOptionPKCS7Padding 选项。

# haskell - 在 Haskell 中使用 forM 打印迭代次数

> ID：14299645
> 
> 赞同：0
> 
> 时间：2013-01-13T01:08:16.807
> 
> 标签：haskell

我想知道如何打印完成的迭代次数。我考虑过在内部使用另一个 lambda 函数，例如`(\a succ)`失败。

这是我的代码

```
showit = forM list (\a -> putStr "number:"++HEREWHAT??++" is "++" a" 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-13T01:15:26.180

使用 枚举列表的项目`zipWithM`：

```
display = zipWithM (\i a -> putStr "number:" ++ show i ++ " is " ++ a) [1,2..] board 
```

（如果你想从零开始计数，或者用 [0,1..] 枚举）。

# haskell - lambda中的haskell嵌套let

> ID：14299647
> 
> 赞同：0
> 
> 时间：2013-01-13T01:08:29.940
> 
> 标签：haskell, syntax-error, let

我必须错过一些东西，但我不明白为什么这个人为的例子不起作用：

```
test1 :: Int
test1 = let g = \s -> s + s
            f = \u -> let h = \t -> t + t
                          h' = \v -> v + v
                      in  g (h (h' u))
        in f 1 
```

ghci > 输入“h”时解析错误

但是，这个等效的部分是好的：

```
test2 :: Int
test2 = let g = \s -> s + s
            f = \u -> let h = \t -> t + t; h' = \v -> v + v
                      in  g (h (h' u))
        in f 1 
```

我相信这是我的语法问题，但我在 test1 中看不到任何错误。谢谢。

编辑：感谢您指出找到问题的正确方法。原来与 vim-haskellConceal 插件有关。我将代码复制粘贴到另一个编辑器中，然后切换回 vim 并注意到嵌套的 let-in 块中有不同的缩进。删除该插件后一切正常。

编辑：我应该停止指责这个插件，因为我简要阅读了它的代码，没有发现任何不合适的地方。也许vim7.3中的“隐藏”功能是根本原因。但我宁愿去我温暖舒适的床...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T01:12:07.457

它确实有效。我刚刚运行了该代码并得到了

```
~ % ghci Hello.hs 
GHCi, version 7.4.1: http://www.haskell.org/ghc/  :? for help
Loading package ghc-prim ... linking ... done.
Loading package integer-gmp ... linking ... done.
Loading package base ... linking ... done.
[1 of 1] Compiling Main             ( Hello.hs, interpreted )
Ok, modules loaded: Main.
*Main> test1 
8
*Main> 
```

换句话说，请确保您`\t`的代码中没有任何制表符 ( )！

# c# - 联合 SQL 注入

> ID：14299649
> 
> 赞同：0
> 
> 时间：2013-01-13T01:08:36.910
> 
> 标签：c#, sql-server, sql-injection

我正在尝试使用`UNION`查询演示 SQL 注入，但我没有得到结果。

这是 C# 代码，数据库是 SQL Server 2008 R2：

```
 SqlConnection conn = new SqlConnection(cString);
        conn.Open();

        string sql = "select * from Users where UserName='" + userName 
                   + "' and Password='" + password + "'";
        SqlCommand cmd = conn.CreateCommand();
        cmd.CommandText = sql;

        SqlDataReader reader = cmd.ExecuteReader();

        StringBuilder sb = new StringBuilder(1024);

        while (reader.Read())
        {
            for (int i = 0; i < reader.FieldCount; i++)
            {
                sb.Append(" " + reader.GetName(i));
                sb.Append(": ");
                sb.Append(reader[i]);
            }
            sb.Append("<br />");
        }
        dataLabel.Text = sb.ToString(); 
```

我有一个用户名和密码文本框，输入被传递给这个方法。
我尝试了以下但没有结果：

```
'UNION SELECT * FROM products -- 
```

`Users`表和表具有相同的`Products`列类型 ( `int, nvarchar, nvarchar`)。

有人可以帮忙吗？我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T02:04:39.587

如果您要传入`' UNION SELECT * FROM Products`参数`password`，那么您的查询将如下所示（假设您将`foo`或任何其他有效或无效的用户名放入`username`）：

```
SELECT * from Users 
  where UserName='foo' and Password='' 
UNION 
SELECT * FROM Products --' 
```

除非您有一行`Users`与 where 子句匹配（即使您使用有效的用户名，恶意用户可能只能猜到，但仍然有一个肯定不匹配的空白密码），您为什么期望任何从表中返回的行`Users`？

如果您将此值传递给用户名，您最终会得到：

```
SELECT * from Users 
  where UserName='' 
UNION 
SELECT * FROM Products -- and Password='foo' 
```

同样，除非您的用户名带有空白用户名，否则您为什么会期望任何行？

无论如何，那里有很多很棒的材料来描述 SQL 注入。为什么要重新发明轮子？为什么不只强制执行参数化查询，并让他们阅读现有材料以了解原因的详细信息？这里只是一些很好的资源：

[http://en.wikipedia.org/wiki/SQL_injection](http://en.wikipedia.org/wiki/SQL_injection)

[http://www.unixwiz.net/techtips/sql-injection.html](http://www.unixwiz.net/techtips/sql-injection.html)

[http://msdn.microsoft.com/en-us/library/ms161953(v=sql.105).aspx](http://msdn.microsoft.com/en-us/library/ms161953(v=sql.105).aspx)

[http://weblogs.sqlteam.com/mladenp/archive/2011/02/16/sql-server-sql-injection-from-start-to-end.aspx](http://weblogs.sqlteam.com/mladenp/archive/2011/02/16/sql-server-sql-injection-from-start-to-end.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-13T02:29:08.587

我同意 Aaron 的观点：利用现有资源而不是重新发明轮子。但是，我也明白，展示您自己的应用程序的脆弱性可能非常强大。因此，要使您的查询工作，您需要将以下内容传递给用户名和密码：

`' OR 1=1;--`

这与查询中密码和用户名的顺序无关。它将返回所有用户的记录。您不需要在其中添加产品表。

# c++ - QTabWidget 选项卡在垂直方向，但文本在水平方向

> ID：14299651
> 
> 赞同：13
> 
> 时间：2013-01-13T01:08:54.747
> 
> 标签：c++, qt, cross-platform, sidebar, qtabwidget

我正在尝试在 C++ Qt 中使用这样的侧边栏制作一个应用程序：

![Finder的侧边栏](../Images/4c2f8a6099fc23d5b51cc3bb66d52501.png)

但是当使 QTabWidget 的方向为 West 时，它会使文本垂直。如何让文本在左侧，但水平对齐？Ps：我不需要图标。提前致谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-13T01:34:37.073

您可以使用[QListWidget](http://doc.qt.digia.com/qt/qlistwidget.html)显示“选项卡”（使用一些模块使其看起来像您想要的那样）和[QStackedWidget](http://doc.qt.digia.com/qt/qstackedwidget.html)来处理页面之间的切换，就像普通选项卡小部件一样。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-23T09:06:25.313

[在 assembla 上为](https://www.assembla.com/code/extendedtabwidget/subversion/nodes)[WTFPL](http://www.wtfpl.net/)实现做一些“广告” 任何贡献都将不胜感激。

![示例1](../Images/b1dc84e7c427e2cee82f7b33b0211cea.png) ![示例2](../Images/de8dc47ae2d1a3b5eb974e97dac67670.png) ![例子3](../Images/ea2fafd3a2da1923d55cf989c3a54274.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-09T13:06:18.507

使用QProxyStyle，这个函数对文字旋转180，你可以旋转90。</p>

```
void MyProxyStyle::drawItemText( QPainter* painter,
                                 const QRect&,
                                 int alignment,
                                 const QPalette& palette,
                                 bool enabled,
                                 const QString& text,
                                 QPalette::ColorRole textRole ) const
{
    painter->save();
    painter->translate(160,50);
    painter->rotate(-180);

    QCommonStyle::drawItemText( painter,
                                rectangle,
                                alignment,
                                palette,
                                enabled,
                                text,
                                textRole );

    painter->restore();
} 
```

# excel - Excel VBA排序不起作用worksheet.range参考的正确语法是什么

> ID：14299652
> 
> 赞同：1
> 
> 时间：2013-01-13T01:09:01.797
> 
> 标签：excel, vba

使用下面的代码，我得到一个错误：

**`Run-time error '1004' Method 'Range' of object'_Worksheet failed.`**

```
 Dim destLastCol As Integer 'last column in range
   Dim destLastRow As Integer  'last row in range 
   Dim wsCrewDetail As Worksheet '

   Set wsCrewDetail = Worksheets("CrewDetail_M")
   destLastCol =  integer assigned previously
   destLastRow =  integer assigned previously

   With wsCrewDetail.Range(Cells(4, 1), Cells(destLastRow, destLastCol)) <== error here
    .Sort Key1:=.Cells(4, 2), Order1:=xlAscending, _
     key2:=.Cells(4, 1), Order2:=xlAscending, _
     key3:=.Cells(4, 3), order3:=xlAscending, Header:=xlYes
   End With 
```

我已经搜索并查看了许多示例，尝试了许多设置`Range`参考的变体，但没有任何效果。

请问什么是正确的参考语法？

编辑添加 destLastRow = 先前分配的整数并编辑以显示 destLastCol

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-13T02:25:13.083

好吧，您没有`destLastRow`在此行中输入行号
`With wsCrewDetail.Range(Cells(4, 1), Cells(destLastRow, destLastCol))`

另外，不要使用`Integer`变量，使用`Long`. 它们效率更高，也可以满足大量需求。

**建议**

*   使用较短的变量（例如`ws`Worksheet）可以更轻松地键入和阅读代码
*   使用`Long`而不是`Integer`
*   我通常会设置一个工作范围（`rng1`）而不是使用从工作表开始的更长的对象
*   虚拟`destLastRow`和`destLastCol`值

**示例代码**

```
 Dim destLastCol As Long 'last column in range
   Dim destLastRow As Long  'last row in range
   Dim ws As Worksheet
   Dim rng1 As Range

   Set ws = Worksheets("CrewDetail_M")
   destLastCol = 6
   destLastRow = 10

   Set rng1 = ws.Range(ws.Cells(4, 1), ws.Cells(destLastRow, destLastCol))
   With rng1
    .Sort Key1:=.Cells(4, 2), Order1:=xlAscending, _
     key2:=.Cells(4, 1), Order2:=xlAscending, _
     key3:=.Cells(4, 3), order3:=xlAscending, Header:=xlYes
   End With 
```

# asp.net-mvc-4 - 避免 ASP MVC4 中的代码重复

> ID：14299653
> 
> 赞同：0
> 
> 时间：2013-01-13T01:09:18.373
> 
> 标签：asp.net-mvc-4, code-duplication

我有三个新闻框的视图：NewsOfTheDay、NewsOfTheWeek、NewsOfTheMonth。在我的模型中，我具有相同的三个属性。现在我的代码如下所示：

```
@{var news=Model.NewsOfTheDay;}
<div class="newsbox">
    <h2>@(news.Title)</h2>
    <p>@(news.Text)</p>
<div>

<!--other html code-->

@{var news=Model.NewsOfTheWeek;}
<div class="newsbox">
    <h2>@(news.Title)</h2>
    <p>@(news.Text)</p>
<div> 
```

所以，如你所见，我在这里重复 html 代码，有更多重复，为了清楚起见已删除。现在，我可以用部分视图（Html.Action）做一些魔术，但是我必须拆分我的模型。

有没有与此等价的东西：`@RenderBox("NewsItem",Model.NewsOfTheWeek)`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T01:16:55.740

我可能会选择部分视图，但您也可以使用自定义 HtmlHelper 方法。关键是让每个属性实际上是相同的类型（或实现相同的接口），因为模型的类型需要相同。您可以对模型类型使用动态，但这似乎有点过头了，因为它们似乎确实具有相同的属性。

```
 @Html.Partial("_NewsItem",Model.NewsOfTheWeek) 
```

_NewsItem.cshtml 在哪里

```
@model NewsItem

<div class="newsbox">
    <h2>@Model.Title</h2>
    <p>@Model.Text</p>
<div> 
```

你的 NewsItem 类是

```
public class NewsItem
{
    public string Title { get; set; }
    public string Text { get; set; }
} 
```

# javascript - 关于Javascript提升的问题

> ID：14299659
> 
> 赞同：7
> 
> 时间：2013-01-13T01:10:35.570
> 
> 标签：javascript

在阅读有关 Javascript 提升的信息时，我尝试了以下方法。我不确定为什么第一个和第二个输出不同。提前致谢。（我什至不确定这与吊装有关。）

```
var me = 1;
function findme(){
   if(me){
    console.log( me );//output 1
    }
  console.log( me ); //output 1
}
findme(); 
```

但是，以下输出未定义。

```
var me = 1;
function findme(){
 if(me){
    var me = 100;
    console.log(me); 
    }
  console.log(me); 
}
findme();
// undefined 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-13T01:19:22.707

变量*声明*被提升到每个函数的顶部，但值*分配*保持在原处。所以第二个例子是这样运行的：

```
var me = 1;
function findme () {
    var me;  // (typeof me === 'undefined') evaluates to true
    if (me) { // evaluates to false, doesn't get executed
        me = 100;
        console.log(me); 
    }
    console.log(me); 
}
findme(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-13T01:17:52.070

在第二个示例中的块中对局部变量的声明`if`被提升到整个函数。

因此，`me`在函数中总是指局部变量，而不是全局变量。

但是，变量的*值*没有被提升，所以它总是`undefined`并且`if`永远不会输入。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-13T01:22:31.153

提升 a`var`不会提升分配，只是提升声明。所以它被这样解析：

```
function findme(){
  var me;
  if(me){
    me = 100;
    console.log(me); 
  }
  console.log(me); 
} 
```

当`if`语句运行时，`me`被标记为函数的局部变量，但是是`undefined`（没有值）。`undefined`是假的，所以你的条件永远不会是真的。

这就是为什么习惯上总是在函数的顶部声明局部变量的原因，因为不管你喜欢与否，这就是它们的去处。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-11T20:20:44.113

我觉得这个问题的真正答案通常被“提升机”这个词抽象出来。这是真正发生的事情。

每次在 JavaScript 中运行函数时，都会为该函数创建一个新的执行上下文，并将其推送到执行堆栈中。所以在你的第二个例子中，你有以下代码：

```
 var me = 1;
 function findme(){
    if(me){
       var me = 100;
       console.log(me); 
    }
    console.log(me); 
 }
 findme();
 // undefined 
```

在这段代码执行的最开始（假设这是整个 JavaScript），首先发生的是 JavaScript 引擎创建一个全局执行上下文。在创建过程中，它为该上下文中的所有函数和变量分配内存。函数按照您想象的方式分配和初始化，但变量只是首先分配（未正确初始化）。

因此，在此示例中创建全局执行上下文之后，函数 findme() 将被完整地分配到内存中，但变量“me”将被分配一个未定义的初始值。在创建全局执行上下文之后，然后运行代码。它发现 var me = 1; 并将“me”变量从 undefined 更新为 1。它实际上并没有对函数定义做任何事情，但是，它找到了“findme();”的函数调用。

此时，我们进入 findme() 函数。真的，同样的事情再次发生。为这个函数创建一个执行上下文，它被推到全局执行堆栈上，这成为运行代码。如果你理解我讨论的第一部分，我想你会意识到“console.log(me);” 在“if”语句未定义之后调用。为什么？因为在创建 findme() 函数执行上下文时，它最初创建了“me”变量，因为它在其上下文中看到了“var me = 100;” 陈述。但是，就全局执行堆栈而言，“if”语句不会获得专用的执行上下文。因此，当“console.log(me);” 在 if 之外运行 me 变量 IS 在函数的总体上下文中定义。

如果您遵循了所有这些，您现在了解了 JavaScript 引擎如何工作的主要部分。

# input - 如何解决 Windows 8 游戏的触摸输入延迟？

> ID：14299663
> 
> 赞同：4
> 
> 时间：2013-01-13T01:11:11.433
> 
> 标签：input, windows-8, touch, lag

我目前正在使用带有纯 XAML（无 DirectX）的 C++ 为 Windows 8 开发游戏。在某些时候，我开始注意到触摸输入发生时的延迟（例如点击。）鼠标单击（或其他鼠标事件）不会导致同样的滞后问题。我还注意到触摸手指越多，延迟就越多。

此问题似乎仅特定于 XAML 应用程序，无论是 C++ 还是 C#。我尝试了示例 Direct3D 项目，一切似乎都很好。

我创建了一个干净的 C++ XAML 应用程序，除了 1 个 Ellipse 控件之外几乎什么都没有，该控件有一个 Storyboard 以在页面周围对其进行动画处理，然后尝试通过将 IsRightTapEnabled/IsHoldingEnabled/IsDoubleTapEnabled/ManipulationMode/IsTapEnabled/IsHitTestVisible 设置为 False 来禁用根控件上的所有输入。但是在触发触摸输入时仍然会出现延迟。

因此，从这一点来看，我确信在基本层面上肯定有问题。该应用程序几乎什么都不做，并且仍然存在滞后。

Windows 8 上的 Hydro Thunder 和 Jetpack Joyride 等游戏也存在触摸输入延迟问题（请参阅[http://wrtapps.com/2012/12/windows-rt-games-suffering-from-touch-screen-input-滞后/](http://wrtapps.com/2012/12/windows-rt-games-suffering-from-touch-screen-input-lag/)）。不知何故，他们已经设法修复它。

我相信一定有办法解决这个问题（Halfbrick 的人已经这样做了。）这几乎就像 Windows 8 上的触摸比平时消耗更多的 CPU。但我不知道如何防止这种情况。我也找不到任何其他关于此问题的博客文章。现在我没有线索了:(

对此问题的任何建议将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T17:14:34.140

我在我的 directX C++ 应用程序（使用简单的 XAML 页面）中遇到了非常类似的错误，并将问题跟踪到发生触摸时显示的视觉反馈。

与您的程序一样，鼠标输入根本不会影响性能。

我通过禁用视觉触摸反馈解决了这个问题：

您必须获取当前视图 的[PointerVisualizationSettings并将](http://msdn.microsoft.com/de-de/library/windows/apps/windows.ui.input.pointervisualizationsettings.getforcurrentview)[ContactFeedbackEnabled](http://msdn.microsoft.com/de-de/library/windows/apps/windows.ui.input.pointervisualizationsettings.iscontactfeedbackenabled.aspx)属性设置为 false。

这样做可以消除触摸时的任何性能下降。也许你只是想试一试。

# php - 使用 window.open 的 OAuth 服务器端授权不在 Opera 中运行 URL

> ID：14299664
> 
> 赞同：2
> 
> 时间：2013-01-13T01:11:14.900
> 
> 标签：php, redirect, header, popup, opera

我正在尝试通过 facebook 进行服务器端授权。有了这个，我希望授权发生在弹出窗口（window.open）中。当一个窗口打开时触发条件`if (empty ($ code)) {..........}.`在这个条件里面形成 URL 地址并重定向到这个地址。除 Opera (v. 12.01) 之外的所有浏览器中一切正常。Opera 不会重定向。它发生在这里：

```
header("HTTP/1.1 301 Moved Permanently"); 
header("Location: ".$dialog_url."");
exit(); 
```

同时Opera中的url地址显示但不执行。请帮助解决 Opera 中的重定向问题。
所有源代码如下所示。

**索引.php**

```
<!DOCTYPE HTML>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<script type="text/javascript" src="jquery-1.8.3.min.js"></script>
<script type="text/javascript">
$(document).ready(function(){
    $('#login_facebook').live('click',function(){
        path='facebook.php';
        window.open (path,'login','width=800,height=400,resizable=yes,scrollbars=no,toolbar=no,menubar=no,location=no,directories=no,status=yes');
        return false;
    });
});
</script>
</head>

<body>
<table>
    <tr><td><a id="login_facebook" href="#">Facebook login</a></td></tr>
</table>
</body>
</html> 
```

**脸书.php**

```
<?php
session_start();
$app_id = "14619918......";
$app_secret = "171a7caaffeeab.....";
$my_url = "...........facebook.php";
$code = $_GET["code"];
if(empty($code)) {
    $_SESSION['state'] = md5(uniqid(rand(), TRUE)); // CSRF protection
    $dialog_url = "https://www.facebook.com/dialog/oauth?client_id=". $app_id . "&redirect_uri=" . urlencode($my_url) . "&state=". $_SESSION['state'] . "&scope=user_birthday,read_stream&display=popup";
    header("HTTP/1.1 301 Moved Permanently"); 
    header("Location: ".$dialog_url."");
    exit();
}
if($_SESSION['state'] && ($_SESSION['state'] === $_REQUEST['state'])) {
     $token_url = "https://graph.facebook.com/oauth/access_token?client_id=" . $app_id . "&redirect_uri=" . urlencode($my_url). "&client_secret=" . $app_secret . "&code=" . $code;
     $response = file_get_contents($token_url);
     $params = null;
     parse_str($response, $params);
     $_SESSION['access_token'] = $params['access_token'];
     $graph_url = "https://graph.facebook.com/me?access_token=". $params['access_token'];
     $user = json_decode(file_get_contents($graph_url));
     echo("Hello " . $user->name);
   }
   else {echo("The state does not match. You may be a victim of CSRF.");}
?> 
```

# asp.net-mvc - 更新实体不更新导航属性 - 实体框架

> ID：14299677
> 
> 赞同：2
> 
> 时间：2013-01-13T01:13:20.700
> 
> 标签：asp.net-mvc, entity-framework, entity-framework-4

我正在尝试使用 Entity Framework 更新关系，但没有成功。

我有一个名为 Houses 的实体，这些 House 在一条街上。

街道可以有很多房子。

我用它来更新房屋的价值

```
 [HttpPost]
    public ActionResult Edit(Houses house)
    {
        if (ModelState.IsValid)
        {
            house.Color = "Yellow";
            house.Street.Id = 2; //It does not update, why?

            db.HousesSet.Attach(house);

            db.ObjectStateManager.ChangeObjectState(house, EntityState.Modified);

            db.SaveChanges();

            return RedirectToAction("Index");
        }
        return View(house);
    } 
```

并且房屋价值被编辑，除了导航属性，我没有成功改变与街道的关系，我想改变房屋街道。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T01:20:56.680

尝试从街道对象添加它。

```
[HttpPost]
public ActionResult Edit(Houses house)
{
    if(ModelState.IsValid)
    {
        var street = db.Street.Include("Houses").Where(c => c.Id == house.Street.Id).FirstOrDefault;
        street.Houses.Add(new House{ houseSfuffGoesHere});
        db.SaveChanges();
    }
    //whatever else you wanted to do
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T01:23:08.800

Id 属性是否设置为由映射中的数据库生成？

如果您使用属性 DatabaseGeneratedOption.Identity 标记了该属性，它将不会被保存。

或者，如果您尝试更改实际的街道对象，那么您应该加载所需的街道对象并将该属性分配为填充：

```
public ActionResult Edit(Houses house)
{
    if (ModelState.IsValid)
    {

        var street = db.StreetsSet.First(2);
        house.Color = "Yellow";

        house.Street = street;

        db.HousesSet.Attach(house);

        db.ObjectStateManager.ChangeObjectState(house, EntityState.Modified);

        db.SaveChanges();

        return RedirectToAction("Index");
    }
    return View(apartamentos);
} 
```

# android - Android 备份 API

> ID：14299678
> 
> 赞同：8
> 
> 时间：2013-01-13T01:13:30.020
> 
> 标签：android, cloud, sync

谁能解释一下**Android** Backup API 的用途是什么？

我已经阅读了开发人员文档中的[Using the Backup API](http://developer.android.com/training/cloudsync/backupapi.html) and [Data Backup](http://developer.android.com/guide/topics/data/backup.html)，但我仍然不清楚。

何时备份和恢复数据？

特别是在这些情况下：

1.  用户在设备 1 上安装我的应用程序，备份数据，然后用户在设备 2 上安装我的应用程序。来自设备 1 的用户数据是否会自动放在设备 2 上？如果是这样，在安装应用程序或启动应用程序时会发生这种情况吗？

2.  我的应用程序安装在 2 台设备上。当在设备 1 上进行更改时，是否会在设备 2 上自动进行？如果没有，是否至少可以在设备 2 上进行更改？

在一个文档中，它说

> 备份服务不是为与其他客户端同步应用程序数据或保存您希望在正常应用程序生命周期中访问的数据而设计的。您无法按需读取或写入备份数据，也无法通过 Backup Manager 提供的 API 以外的任何方式访问它。

但在另一个方面，

> Android 框架可帮助您构建丰富的支持云的应用程序，将其数据同步到远程 Web 服务，确保您的所有设备始终保持同步

这对我来说似乎很矛盾。

更具体地说，我想跨设备持续同步单个数据库文件（小于 20 KB）。备份 API 可以做到这一点吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T01:25:08.147

**编辑：**所以回答你的问题 - 不，这不是同步数据的可靠方法。

> 当用户购买新设备或重置其现有设备时，他们可能会期望当 Google Play 在初始设置期间将您的应用恢复到他们的设备时，与该应用关联的先前数据也会恢复。默认情况下，这不会发生，并且用户在您的应用中的所有成就或设置都会丢失。

正如我所看到的，您的应用程序正在将数据存储到云中。您将文件推送到备份服务器并使用 API 密钥（每个用户的谷歌帐户唯一）允许您将备份下载到其他设备，但只能在安装应用程序期间或通过手动请求进行访问。该文档指出：

> 备份服务不是为与其他客户端同步应用程序数据或保存您希望在应用程序生命周期中随机访问的数据而设计的。

据我了解（我自己没有实现），您不能将其用作云同步实时数据的可靠方法。

清单可能会启动数据处理并确定是否应推送备份。

> 在**未来**的某个时候，备份管理器会调用你的备份代理的 onBackup() 方法

恢复备份不是手动的：

> 通常，您不必手动请求恢复，因为它会在您的应用程序安装在设备上时自动发生。但是，如果需要触发手动恢复，只需调用 requestRestore() 方法即可。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-01-08T21:02:06.800

叹息，文档不应该在任何地方说“同步”。我应该提交一些补丁来解决这个问题。:) 此机制并非旨在提供两个设备之间的数据交换。

Android 中备份基础架构的主要目标是为您的用户在设置新设备时提供良好的体验，例如当他们购买平板电脑以配合手机使用时，或者当设备掉落和损坏并且他们设置时一个替代品。这个想法是新设置的设备处于熟悉的状态，所有相同的应用程序及其数据完好无损，适用时相同的壁纸图像等。

同步管理器工具的用途是在设备之间实时保持数据同步。

# mysql - MySQL：SELECT IF() 语句中的 SELECT

> ID：14299683
> 
> 赞同：3
> 
> 时间：2013-01-13T01:14:39.667
> 
> 标签：mysql, sql, select

我可以有这样的东西吗？

```
SELECT IF((SELECT COUNT(id) FROM table WHERE id = 1) = 0, 1, <nothing_to_happen>) AS Available 
```

我的目标是选择这个：

```
+---------+
|Available|
+---------+
|1        |
+---------+ 
```

仅当没有从此查询中选择行时：

```
SELECT id FROM table WHERE id = 1 
```

如果表中存在 id = 1 的行，我希望我的查询返回零行！那可能吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-13T01:16:19.470

```
SELECT  1
FROM    dual
WHERE   NOT EXISTS
        (
        SELECT  NULL
        FROM    mytable
        WHERE   id = 1
        ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T09:05:42.617

询问：

```
SELECT CASE
           WHEN COUNT(id) = 0 THEN 1
           ELSE 0
       END AS Available
FROM `TABLE`
WHERE id = 1 
```

# iphone - SEGV_ACCERR 和 NSOperation 上的某个应用程序崩溃 [self.managedObjectContext save:&error]

> ID：14299685
> 
> 赞同：0
> 
> 时间：2013-01-13T01:14:55.990
> 
> 标签：iphone, core-data, nsmanagedobjectcontext, nsoperation

我有一个我无法理解如何处理的问题，因为它不符合逻辑。

我有一些`NSOperation`同时运行的 s。例如，

```
- (void)main
{
    @autoreleasepool
    {        
        AppDelegate *appController = (AppDelegate *)[[UIApplication sharedApplication] delegate];

        self.managedObjectContext = [[NSManagedObjectContext alloc] init];
        [self.managedObjectContext setUndoManager:nil];
        [self.managedObjectContext setPersistentStoreCoordinator: [appController persistentStoreCoordinator]];

        NSNotificationCenter *nc = [NSNotificationCenter defaultCenter]; 
        [nc addObserver:self
               selector:@selector(mergeChanges:) 
                   name:NSManagedObjectContextDidSaveNotification
                 object:self.managedObjectContext];
        NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
        NSEntityDescription *entity = [NSEntityDescription 
                                       entityForName:@"Entity" inManagedObjectContext:self.managedObjectContext];
        [fetchRequest setEntity:entity];

        [fetchRequest setPredicate:[NSPredicate predicateWithFormat:@"%K != %@",@"number1",[NSNumber numberWithInt:2]]];

        NSError *error;
        NSArray *fetchedObjects = [self.managedObjectContext executeFetchRequest:fetchRequest error:&error];

        for (NSManagedObject *obj in fetchedObjects) {

            //Do Something with managed object then save        
            NSError *error = nil;
            //[episode release];
            if (![self.managedObjectContext save:&error]) {
                // Replace this implementation with code to handle the error appropriately.
                // abort() causes the application to generate a crash log and terminate.
                // You should not use this function in a shipping application, although it may be useful
                // during development. If it is not possible to recover from the error, display an alert
                // panel that instructs the user to quit the application by pressing the Home button.
                //
                NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
                abort();
            }
        }
    }
}

- (void)mergeChanges:(NSNotification *)notification
{
    AppDelegate *appController = (AppDelegate *)[[UIApplication sharedApplication] delegate];
    NSManagedObjectContext *mainContext = [appController managedObjectContext];

    // Merge changes into the main context on the main thread
    [mainContext performSelectorOnMainThread:@selector(mergeChangesFromContextDidSaveNotification:) 
                              withObject:notification
                           waitUntilDone:YES];  
} 
```

这是我的典型`NSOperation`，它同时工作并在核心数据中更新我的对象，有时没有解释应用程序崩溃，我在这一行收到该错误：

```
if (![self.managedObjectContext save:&error]) 
```

在我的崩溃报告中，我的问题是，有没有办法防止应用程序崩溃并修复错误？我可以`@syncronized`在表演时使用 a`save`吗？这是由于不同的线程和不同的对象造成的吗？我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T12:00:05.203

移动用于合并应用程序委托中的更改的代码。

因此，在`application:didFinishLaunchingWithOptions:`注册通知内。

```
NSNotificationCenter *nc = [NSNotificationCenter defaultCenter]; 
[nc addObserver:self
       selector:@selector(mergeChanges:) 
           name:NSManagedObjectContextDidSaveNotification
         object:nil]; // set nil here 
```

然后，始终在应用程序委托中创建您的`mergesChanges:`方法。在这里，您需要确保通知在主线程上运行，并且您收到通知的上下文与主线程不同。

```
- (void)mergeChanges:(NSNotification *)notification
{
    if ([notification object] == [self managedObjectContext])
        return;

    if (![NSThread isMainThread]) {
        [self performSelectorOnMainThread:@selector(mergeChanges:) withObject:notification waitUntilDone:YES];
        return;
    }

    NSManagedObjectContext *mainContext = [self managedObjectContext];

    // Merge changes into the main context on the main thread
    [mainContext performSelectorOnMainThread:@selector(mergeChangesFromContextDidSaveNotification:) 
                              withObject:notification
                           waitUntilDone:YES];  
} 
```

PS在这里，您使用的是非并发`NSOperation`的，如果插入到 a`NSOperationQueue`中，它将以并发方式运行（队列，通过 GCD 将为您管理）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T04:29:08.523

这不是并发操作。而且您的`mergeChanges`通知可能永远不会被调用，因为一旦 main 方法完成，操作就会被释放（这可能会在`NSManagedObjectContextDidSaveNotification`选择器执行之前）。

如果你想要一个在你完成之前一直存在的并发操作，你需要重写`start`方法和`isConcurrent`方法。您可能会收到此错误，因为您的`NSError`or 选择器在完成之前超出了范围。我建议阅读这篇文章以了解并发与非并发操作的工作原理：

有关更多详细信息，请查看Dave Dribin 揭秘的[并发操作。](http://www.dribin.org/dave/blog/archives/2009/05/05/concurrent_operations/)

# android - Android In-App Billing V3 如何重置 android.test.refunded SKU

> ID：14299692
> 
> 赞同：2
> 
> 时间：2013-01-13T01:16:00.183
> 
> 标签：android, testing, in-app-billing

我使用 Trivial Drive 示例代码的应用内计费 v3 工作正常，除了集成到我自己的应用程序中，并运行了所有静态测试，这些测试也运行良好。但是，一个静态测试 SKU，“android.text.refunded”，在运行该测试后，现在不会消失。我试过用 mHelper.consumeAsync(purchase, mConsumeFinishedListener) 来消费它，就像所有其他人一样，它不会被消费，并且在圣诞节像岳母一样不断回来......

有没有办法在开发者控制台中重置它？不确定这是否会消失。冰！

# jquery - 使用 focusout 事件的带有弹出菜单的跨浏览器按钮

> ID：14299696
> 
> 赞同：1
> 
> 时间：2013-01-13T01:16:55.300
> 
> 标签：jquery, drop-down-menu, popupmenu

我正在尝试为带有下拉菜单的按钮创建一个简单的跨浏览器插件。当用户单击此类按钮时，下方会出现一个带有各种选项的菜单，用户随后可以从中选择一个选项或将其关闭。

我已经创建了一个[简单的 JSFiddle](http://jsfiddle.net/zMdxw/7)，其中包含三个这样的按钮来举例说明我想要实现的目标。我的 JSFiddle 代码执行了一些我已从下面的代码中排除的额外事件日志记录，但运行 JSFiddle 很明显我正在记录事件发生时。

### 这是我的 HTML：

我实现代码的方式需要下拉菜单可聚焦，因此`tabindex`容器上的属性。

```
<div class="dropdown">
  <a href="#" class="dropdown-toggle">Open sesame</a>
  <ul class="dropdown-menu" tabindex="0">
    <li><a href="#">Some option</a></li>
    <li><a href="#">Option with longer text</a></li>
  </ul>
</div> 
```

### 我的脚本：

```
// menu opening and closing
$(".dropdown-toggle").mousedown(function(evt) {
  evt.preventDefault();
  var c = $(this).closest(".dropdown").toggleClass("open");
  c.hasClass("open") && c.find(".dropdown-menu")[0].focus();
});

// menu closing when clicking anywhere
$(".dropdown-menu").focusout(function(evt) {
  evt.stopPropagation();
  $(this).closest(".dropdown").removeClass("open");
}) 
```

菜单的显示由 CSS 完成。如您所见，我几乎没有在容器上设置 CSS 类，并且当`open`在容器上设置类时，CSS 提供了自动可见性。

## 预期行为

这是正确的方法，因为它应该起作用：

1.  用户单击按钮并出现菜单
2.  单击同一按钮应关闭菜单
3.  点击菜单选项应该触发点击甚至选项（并可选择保持菜单打开）
4.  如果打开，单击其他任何地方都应该关闭菜单。

## 浏览器问题

不同的浏览器似乎以不同且过度的方式触发事件。事件传播（冒泡）及其顺序阻止了上层步骤按预期执行。Chrome 似乎不会触发过多的事件。

**Chrome**
Chrome 似乎按预期工作。所有四个步骤都按应有的方式执行。单击菜单中的链接时，不会*触发*焦点输出作为焦点容器（菜单本身）中的链接。

**Firefox 和 IE9**
似乎步骤 #1、#2 和 #4 按预期工作，但 #3 失败，因为在检测和执行菜单选项*单击之前，* *focusout*首先触发并关闭菜单。

**IE8 和 IE7**
任何拥有它们的人都可以为我测试并告诉我上面的哪些步骤有效，哪些失败。我没有测试过，但也很想知道。

## 问题

此脚本的主要问题是*focusout*事件过早且过于频繁地触发。我不能使用*模糊*事件，因为它不会从菜单选项传播到菜单本身。

> **重要**- 将点击处理程序绑定到`document`- 我知道我可以将*点击*事件绑定到我的`document`，但我不能使用这种通常的方法，因为：
> **1.**这将非常不可靠，因为我的表单上的一些其他控件可能会停止点击传播，因此菜单不会'在单击此类控件时不会关闭。
> **2.**我的应用程序在一个 中运行`iframe`，因此在它之外单击，也会使菜单保持打开状态。

有人想以跨浏览器的方式玩这些事件吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T01:41:22.977

可以在文档上使用点击处理程序来替换`focusout`代码。不完全确定你想要的行为，但试试这个：

```
$(document).click(function(e){
  var $tgt=$(e.target)
  if( !$tgt.closest('.container').length){
   log('non menu el clicked')

  }else{
    /* close other open menus when a new one clicked*/
    $tgt.closest('.container').siblings().removeClass('open')
  }

}) 
```

演示[http://jsfiddle.net/zMdxw/5/](http://jsfiddle.net/zMdxw/5/)

这可以改进为仅在菜单打开时添加文档单击处理程序，并在所有菜单关闭时将其删除

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T15:59:22.260

## 跨浏览器解决方案

[我想出的解决方案](http://jsfiddle.net/zMdxw/9/)是跨浏览器，适用于 Chrome、Firefox 和 IE7+。它需要处理一个额外的事件，那就是`mousedown`下拉菜单。单击下拉菜单上的选项通常会`focusout`在 IE 和 FF 中触发一个事件，即使用户在同一个焦点元素内单击也是如此。这就是为什么我们将 next 设置`focusout`为忽略而不关闭菜单。

Chrome 不会触发`focusout`菜单选项点击，因此我们还必须通过在足够短的时间后手动重新启用关闭来处理这个问题。我将它设置为 100 毫秒，但它可以更短，因为它只需要延迟到`focusout`执行下一个处理程序。看来10ms也够了。如果事件处理程序在开始执行之前都被浏览器排队，则可能更少。在这种情况下，值 0 就足够了。但为了安全起见，我将其设置为 100 毫秒。

这是执行预期的代码：

```
// toggle dropdown menu display
$(".dropdown-toggle").mousedown(function(evt) {
  evt.preventDefault();
  log("Menu toggle");

  var dd = $(this).parent().toggleClass("open");

  // only focus it when visible
  dd.hasClass("open") && dd.children(".dropdown-menu")[0].focus();
});

// dropdown closing on focusout    
$(".dropdown-menu").focusout(function(evt) {
  log("Menu focus out");
  var m = $(this);

  // check that closing is not cancelled this time
  m.data("cancel-close") === true && m.removeData("cancel-close").length || m.parent().removeClass("open");
});

// cancel dropdown closing when user clicks a menu option
$(".dropdown-menu").mousedown(function(evt) {
  log("Cancel next focusout");
  var m = $(this);

  // cancel next focusout event
  m.data("cancel-close", true);

  // reenable closing for browsers that don't focusout ie. Chrome
  window.setTimeout((function(context) {
    return function() {
      log("Focusout is reenabled.");
      context.removeData("cancel-close");
    };
  })(m), 100);
}); 
```

# bioinformatics - 我在哪里可以找到有关基本 RNAseq 数据分析的说明？

> ID：14299705
> 
> 赞同：0
> 
> 时间：2013-01-13T01:18:04.667
> 
> 标签：bioinformatics

我正在尝试学习 RNAseq 分析的基本工作流程：从将读取与基因组对齐，通过评估读取对齐质量，到通过计数读取来测量基因表达水平。

我找到了多个理论上描述每个步骤的资源（我查看了论文、网站等），但我找不到有关如何执行此操作的实用说明：使用哪些编程包、如何评估对齐、等等

是否有任何在线资源可以清楚地解释它是如何完成的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T06:35:18.383

这个线程有一些很好的资源： [http ://biostars.org/p/45081/](http://biostars.org/p/45081/)

# python - 如果将十六进制值写入文件 Python，如何将列表写入

> ID：14299708
> 
> 赞同：0
> 
> 时间：2013-01-13T01:18:20.673
> 
> 标签：python, python-3.x

我编写了一个简单的 python 模块，它读取文件并将读取的数据转换为十六进制值列表。然后我将每个值增加 1。我想知道如何将这个十六进制值列表写入新文件。

使用 python 3.x

代码：

```
inFilePath = input("Input File: ")
inFile = open(inFilePath, "rb")
data = inFile.read()
hexVals = []
for byte in data:
    hexVals.append(hex(byte))
print("File Read")
print("Original Data: " + str(hexVals))
for x in range(hexVals.__len__()):
    hexVals[x] = hex(int(hexVals[x], 16) + 1)
print("Altered Data: " + str(hexVals))
outFilePath = input("Output File: ")
outFile = open(outFilePath, "wb")
outFile.write(???) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T01:32:32.143

您将字节存储为十六进制字符串。您可以这样做，但它已经将结果作为整数提供给您。只需将其保留为整数，尽管您可能希望将其转换为列表。将其转换为列表后，您可以通过`bytes`一种相当简单的方式将其转换回列表。例如：

```
with open('input', 'rb') as f:
    data = f.read()
data = list(data)
data = [byte + 1 for byte in data]
data = bytes(data)
# If this is all you're going to do, you could just do this:
# data = bytes((byte + 1) % 256 for byte in data)
with open('output', 'wb') as f:
    f.write(data) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T01:32:40.417

您快到了！这会奏效。

```
outFile.write('\n'.join(hexVals))
outFile.close() 
```

不要忘记关闭输入文件，或者使用`with`icktoofay 建议的语法。

# javascript - 将递增数字添加到 JSON 对象字符串以使其唯一

> ID：14299710
> 
> 赞同：4
> 
> 时间：2013-01-13T01:18:23.440
> 
> 标签：javascript, regex, json, string, object

我有一个 JSON 对象作为字符串传递给我，但其字符串形式的对象包含重复的属性。我需要临时向属性添加递增数字以避免重复 JSON 属性的问题。完成对象的编辑后，我会将对象 JSON.Stringify 回字符串并删除数字。

这是我传递的字符串：

```
{
    "View":{
        "Image":{
            "BackgroundImage":"Image.png",
             "Position":[0,0],
             "Width":320,
             "Height":480
        },
        "Button":{
            "BackgroundImage":"ButtonTop.png",
             "Position":[61,83],
             "Width":217,
             "Height":58
        },
        "Button":{
            "BackgroundImage":"ButtonBottom.png",
             "Position":[61,214],
             "Width":205,
             "Height":73
        },
        "TextField":{
            "BackgroundImage":"TextFieldLogin.png",
             "Position":[102,336],
             "Width":189,
             "Height":31
        },
        "Label":{
            "Position":[137,100],
             "Width":72,
             "Height":20,
             "Text":"Hi Steve",
             "FontSize":18,
             "Color":[0,0,0,1]
        },
        "Label":{
            "Position":[43,342],
             "Width":54,
             "Height":20,
             "Text":"Login:",
             "FontSize":18,
             "Color":[0,0,0,1]
        },
        "Label":{
            "Position":[115,234],
             "Width":54,
             "Height":20,
             "Text":"Button",
             "FontSize":18,
             "Color":[0,0,0,1]
        }
    }
} 
```

这是我希望输出的方式：

```
{
    "View_1":{
        "Image_1":{
            "BackgroundImage":"Image.png",
             "Position":[0,0],
             "Width":320,
             "Height":480
        },
        "Button_1":{
            "BackgroundImage":"ButtonTop.png",
             "Position":[61,83],
             "Width":217,
             "Height":58
        },
        "Button_2":{
            "BackgroundImage":"ButtonBottom.png",
             "Position":[61,214],
             "Width":205,
             "Height":73
        },
        "TextField_1":{
            "BackgroundImage":"TextFieldLogin.png",
             "Position":[102,336],
             "Width":189,
             "Height":31
        },
        "Label_1":{
            "Position":[137,100],
             "Width":72,
             "Height":20,
             "Text":"Hi Steve",
             "FontSize":18,
             "Color":[0,0,0,1]
        },
        "Label_2":{
            "Position":[43,342],
             "Width":54,
             "Height":20,
             "Text":"Login:",
             "FontSize":18,
             "Color":[0,0,0,1]
        },
        "Label_3":{
            "Position":[115,234],
             "Width":54,
             "Height":20,
             "Text":"Button",
             "FontSize":18,
             "Color":[0,0,0,1]
        }
    }
} 
```

如何使用 javascript .replace() 按需添加编号，然后按需删除编号？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T02:05:40.117

这个怎么样？我同意这里的其他声音，建议提供此“JSON”的人负责提供有效的语法，但除非有这种可能性，否则这可能会让您入门：

```
function formatJSON(input) {
  return input.replace(/"([^"]+?)":{(.+)}/g, function(string, key, value) {
    var dict = {};
    return '"' + key + '":{' + value.replace(/"([^"]+?)":{(.+?)}/g, function(string, key, value) {
      dict[key] = dict[key] == undefined ? 1 : ++dict[key];
      return '"' + key + '_' + dict[key] + '":{' + formatJSON(value) + '}';
    }) + '}';
  });
}; 
```

JSFiddle：http: [//jsfiddle.net/WYkAT/](http://jsfiddle.net/WYkAT/)

请注意，这将无法重命名更复杂、更深的 JSON 字符串上的所有键。它可以很容易地修改为更具递归性并且对您的特定情况不太具体，但可能会导致一些性能下降。如果您需要一个成熟的解决方案，我会考虑修改现有的 JSON.parse polyfill。这里有两个（JSON2 和 JSON3）：

1.  [https://github.com/douglascrockford/JSON-js](https://github.com/douglascrockford/JSON-js)
2.  [https://github.com/bestiejs/json3](https://github.com/bestiejs/json3)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T01:38:33.860

# macos - 什么是“分段错误：11”？（Mac os x GCC 程序集运行时错误）

> ID：14299711
> 
> 赞同：-1
> 
> 时间：2013-01-13T01:18:24.730
> 
> 标签：macos, gcc, assembly, runtime-error, x86-64

此代码在终端中使用 GCC 可以很好地组装：

```
.globl _sub
_sub:
    push %rbp
    mov %rbp,%rsp
    mov $0xBEEF,%eax
    pop %rbp
    ret

.globl _main

_main:
    push %rbp
    mov %rbp,%rsp
    call _sub
    mov $0,%eax
    pop %rbp
    ret 
```

但是当我运行 a.out 文件时，我得到了这个错误：

```
Segmentation fault: 11 
```

如果我在 GDB 中运行它，这是我得到的错误：

```
Program received signal EXC_BAD_ACCESS, Could not access memory.
Reason: KERN_INVALID_ADDRESS at address: 0x0000000000000001
0x0000000000000001 in ?? () 
```

关于为什么会发生这种情况的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T01:24:00.060

`mov %rbp, %rsp`破坏堆栈指针。你可能想要`mov %rsp, %rbp`。

由于历史原因，一些汇编器认为操作数是从左到右的，而另一些则认为它们是从右到左的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T01:24:13.107

你得到分段错误，因为你写了`rbp`to的值`rsp`，尽管你应该做相反的事情：

```
push %rbp
mov %rbp,%rsp 
```

这可以很容易地解决：

```
push %rbp
mov %rsp,%rbp 
```

# objective-c - 为子视图创建视图控制器的推荐方法是什么？

> ID：14299717
> 
> 赞同：2
> 
> 时间：2013-01-13T01:19:36.150
> 
> 标签：objective-c, ios5, uiviewcontroller, subview

我读过 UIViewController 真的应该管理视图层次结构的根视图，并且作为一般做法，虽然您可以将它用于导航控制器或拆分视图控制器，但您自己不应该使用视图它作为另一个视图的子视图公开，该视图也由 UICiewController 管理，创建嵌套的 ViewController 层次结构。

简而言之，您不应该为子视图使用 UIViewController。

或者至少它最初是这样的。

但是，我隐约记得这在后来的 SDK 中发生了变化，现在得到了支持，但我不记得（或找不到）是否有新的类似 UIViewController 的类或子类用于此目的，或者 Apple 是否为此增强了标准 UIViewController角色。

我们的用例是一个 UICollectionView 子类，它不是全屏的，而是另一个视图的一小部分。在同一个屏幕上甚至可能有多个实例。由于 UICollectionViewController 已经符合 UICollectionViewDelegate 和 UICollectionViewDataSource，我们认为我们只是开始使用它。这是正确的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T02:54:15.213

您是否考虑过使用容器视图？它们本身就像视图控制器。这是较新 Xcode 版本中的新增功能。您可以将集合视图直接放入其中。

# android - 在安卓模拟器上看不到apk

> ID：14299724
> 
> 赞同：1
> 
> 时间：2013-01-13T01:20:37.537
> 
> 标签：android, android-emulator, haxe

我正在使用 Haxe NME 和 Android 2.2（SDK 8，haxe nme 支持的版本）开发游戏。我已经能够使用adb上传文件，我在DDMS资源管理器中看到它，SD模拟器的数据计数器看到占用空间。现在的问题是，当我转到应用程序-> 管理应用程序-> 在 sdcard 上时，我看不到任何能够安装和测试它的项目。

我尝试了我的 APK 和 astro 管理器 apk，一切都一样，什么也没有出现。我选中了“第三方应用程序”选项，并且我在 Windows 7 上。

任何人都可以给我一个提示，我需要做什么才能在模拟器中查看 apk 并安装它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T01:28:47.417

要实际安装应用程序，您需要执行`adb install`.

假设您在其中，`C:\`并且您的 apk 文件也在`C:\`

```
adb install myApk.apk 
```

当您只是推送一个 apk 时，它不会安装它，因此需要`adb install`.

# html - 使用悬停移动 div

> ID：14299726
> 
> 赞同：3
> 
> 时间：2013-01-13T01:21:12.487
> 
> 标签：html, css

我需要这个代码的小帮助。我正在尝试创建一个菜单。我已经在[jsFiddle中证明了这一点](http://jsfiddle.net/qkGR4/)

我的问题是按钮（它不是真正的按钮）在我将鼠标悬停在它上面时一直在移动，可以使用什么方法将其保持在原位？

这是我的一些代码

```
 <div id="start_bar">
        <div id ="start_button">
    Test

            <div id="nav">
            Hello World
            </div>

        </div>
    </div> 
```

和CSS

```
 #start_button{
height:48px;
width:48px;
background-image:url('images/start.png');
color:white;
}
#start_button:hover  {
height:48px;
width:48px;
background-image:url('images/start.png');
margin-top: -18px;
}

#nav {
    display: none;
}
#start_button:hover > #nav {
display: block;
width: 70px;
height: 150px;
margin-top: -150px;
background-color: grey;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T01:25:32.850

摆脱你的`:hover`伪选择器：

```
#start_button:hover {
  margin-top: -18px;  /* This causes it to shift up */
} 
```

没有它，它工作得很好：http: [//jsfiddle.net/qkGR4/3/](http://jsfiddle.net/qkGR4/3/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-13T01:25:56.523

删除`margin-top`属性`#start_button:hover`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-13T02:09:42.113

与其使用`margin-top: -Xpx;`将菜单移动到位，不如使其绝对定位`left: 0; bottom: 100%;`。这将起作用，您不必为菜单或菜单栏输入像素高度。

**[演示](http://jsfiddle.net/qkGR4/6/)**

通常，您希望避免为元素设置高度。元素的高度应尽可能由内容决定。或者，在这种情况下，`position: absolute; bottom: 100%;`使元素上升到相对坐标系高度的 100%……`position: absolute;`也将元素从文档流中释放出来。然后菜单可以根据需要自由地“变高”。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-13T01:29:27.083

`margin-top`删除属性`#start_button:hover`并增加`#start_button:hover > #nav`高度：

```
#start_button:hover  {
    height:48px;
    width:48px;
    background-image:url('images/start.png');
}
#start_button:hover > #nav {
    display: block;
    width: 70px;
    height: 131px;
    margin-top: -150px;
    background-color: grey;
} 
```

[http://jsfiddle.net/qkGR4/5/](http://jsfiddle.net/qkGR4/5/)

# ruby-on-rails - 用于消息系统的 Rails DB 结构

> ID：14299727
> 
> 赞同：1
> 
> 时间：2013-01-13T01:21:13.950
> 
> 标签：ruby-on-rails, database, orm, rails-activerecord

我正在rails 3上开发一个消息系统。我的数据库结构大致如下：

```
users:  
  id  
  name  

messages:  
  id  
  body

users_messages:  
  user_id  
  message_id  
  direction  
  is_read  
  created_at 
```

我想我必须使用 *has_many :through* 关联才能使用关系模型：

```
class User < ActiveRecord::Base
  has_many :user_messages
  has_many :messages, :through => :user_messages
end

class UserMessages < ActiveRecord::Base
  belongs_to :users
  belongs_to :messages
end

class Messages < ActiveRecord::Base
  has_many :user_messages
  has_many :users, :through => :user_messages
end 
```

我可以通过呼叫`user.messages`和检测方向的传入/传出来获取所有用户的消息。我只是不太明白我如何建立一种能够做到的关系：

 ````
 message.sender  
  message.recipient
  user.messages.first.recipient ... 
````  `以及每条消息在 user_messages 表中至少需要 2 行：

```
 user_id_sender , message_id, outgoing ....
  user_id_recipient, message_id, incoming .... 
```

也许我的数据库结构是错误的？一些机构可以提出更有效的设计吗？

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T01:45:40.797

db schema:

```
messages:
  id
  sender_id
  recipient_id
  body 
```

app/model/message.rb:

```
class Messages < ActiveRecord::Base
  has_many :users, :through => :user_messages
  belongs_to :sender, :class_name => 'User', :foreign_key => 'sender_id'
  belongs_to :recipient, :class_name => 'User', :foreign_key => 'recipient_id'
end 
```

by doing so, you can do:

```
message.sender  
message.recipient
user.messages.first.recipient 
````

# ios - 确定是否正在显示模态视图控制器

> ID：14299735
> 
> 赞同：1
> 
> 时间：2013-01-13T01:22:54.043
> 
> 标签：ios, uiviewcontroller, modalviewcontroller, viewcontroller

无论如何确定当前是否正在显示模态视图控制器？目前正在查看？

我有一个问题，viewDidAppear 被调用了两次，只需要调用一次，为了解决我想看看一个模态视图控制器是否在屏幕上，如果它运行一点代码，否则什么都没有。

如果我可以在导航堆栈上的当前视图控制器内进行编码，并查看当前是否有模态视图控制器在其之上，那将会很有用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T01:42:07.163

如果 " `viewDidAppear`" 被调用两次，可能是您两次实例化（创建）您的视图。

在“”中设置断点`viewDidAppear`并查看回溯以查看您的新视图控制器是通过编程方式（在代码中）创建还是在您的 XIB 或 Storyboard 中实例化。

你只需要创建一次，如果你只创建一次，“ `viewDidAppear`”只会被调用一次。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T01:46:46.723

检查模态 viewController 的健康状况的正确位置是在呈现 viewController。呈现的 viewController 应该知道它呈现的 viewController 是否仍然存在，或者已经被解除（它负责这两个任务）。presentingViewController 有一个属性，`presentedViewController`它携带你需要的引用。

如果模态 VC 已被掩盖，例如通过其自身推送另一个 viewController，您将能够从它的 navController.viewControllers 数组属性中确定：再次，最佳参考源返回到呈现的 viewController。

如果你不能从它呈现的 viewController 中获得对模态 viewController 的引用，那么你的设计可能有问题，你需要重新考虑。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T02:02:47.817

如果你想让某些东西`viewDidAppear`执行一次，有很多方法可以做到，但这里有一个。首先，定义类属性：

```
@property (nonatomic) BOOL alreadyRun; 
```

然后在 中`viewDidAppear`，检查该属性：

```
- (void)viewDidAppear:(BOOL)animated
{
    [super viewDidAppear:animated];

    if (!self.alreadyRun)
    {
        self.alreadyRun = YES;

        // do whatever you need to have done once per instance of this VC
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-17T15:10:20.223

我认为您可以使用 PresendedViewController 属性。早期版本是modalViewController。

# javascript - Javascript。棘手：所有数组值是否一致？（即：a = [a,a,a,a]）对于任何大小的数组

> ID：14299737
> 
> 赞同：3
> 
> 时间：2013-01-13T01:23:26.083
> 
> 标签：javascript, math, iteration

这是相当概念性的，我希望有人可以提供帮助。我有一个脚本，当您在其中插入坐标（x，y，从 0 -> 800）时，它将返回 3 个单独范围内的预绘制坐标列表。

即：我输入200,200。我收到以下各项的列表：半径为 25、半径为 60、半径为 150 内的地块。

如果您对上下文感到好奇/请使用代码：

```
 display(coords[n][1] + ", " + coords[n][2]);

    if(n==0){

    for(var i=0; i < data.length; i++) {
        var xs = 0;
        var xy = 0;
        xs = xPlot - data[i][0];
        ys = yPlot - data[i][1];
        xs = xs * xs;
        ys = ys * ys;

        distance = Math.sqrt(xs + ys);

        if (distance <= 25){
            display2(data[i][0] + ", " + data[i][1] + " - " + alliance);
        }
        else if(distance <= 60){
            display3(data[i][0] + ", " + data[i][1] + " - " + alliance);
        }
        else if(distance <= 150){
            display4(data[i][0] + ", " + data[i][1] + " - " + alliance);
        }
    } 
```

很容易。

现在，当我输入另一组坐标时，会创建另一个多维数组，我想检查两个（嗯，6 个）圆内的相交点。

我想过使用数组进行检查。如果输入了 2 个坐标，并且在两个内（绿色）圆内都找到了一个点，则 a = [g,g]。如果在一个内部找到一个点，但在另一个的中间（蓝色），设置 a = [g,b] 你明白了。红色是外圈。

当输入 3 个坐标时，事情变得更加棘手。假设一个点在两个内线和一个中线之内。那么 a = [g,g,b]。3 个列表的目的是将返回的值按从最佳到最差的组进行组织。因此，在具有 4 个输入的示例中，列表将按以下方式组织：

清单 1 / 清单 2 / 清单 3
gggg / gggb / bbbr
------- / ggbb / bbrr
------- / gbbb / brrr
------- / bbbb / rrrr

我将如何以可扩展的方式构建检查我的数组，所以如果我有 5 个输入，我就能够将我的结果放在适当的列中？

到目前为止，我已经开始这样做了：

```
else if(n>0){

    for(var i=0; i < data.length; i++) {
        for(var j=0; j < coords.length; j++) {
            var xs = 0;
            var ys = 0;
            xs = coords[j][1] - data[i][0];
            ys = coords[j][2] - data[i][1];
            xs = xs * xs;
            ys = ys * ys;
            distance = Math.sqrt(xs + ys);

            if (distance <= 25){
                a[j] = [,[g]];
                }
            else if (distance <= 60){
                a[j] = [,[b]];
                }
            else if (distance <= 150){
                a[j] = [,[r]];
                }
        }
        if($.inArray('g', a) && (!($.inArray('b', a)))){
            display2(data[i][0] + ", " + data[i][1] + " - " + alliance); 
```

}

如果 a 包含 g 但不包含 b，则最后一行会执行吗？（jquery）我在正确的轨道上吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T01:46:42.980

与其将出现的次数作为数组中的一个项目放在一个圆圈内，不如计算一个长度与圆圈数相同的数组中出现的次数。即代替`[g,g,g,g,b,b,r,r,r,r,r,r,r]`，使用`[4,2,7]`。这样，您在添加项目时不必保持数组排序，您只需递增正确的项目。

这也使得根据相关性对结果进行排序变得容易。您可以通过将数组视为一个数字来为数组创建一个数值，其底数与数据坐标的数量相同。IE：

```
var n = arr[0] * data.length * data.length + arr[1] * data.length + arr[2]; 
```

对于 10 个数据坐标，该数组`[4,2,7]`将获得值 427，从而可以轻松地将其与`[3,5,0]`将获得值 350 的数组进行比较。

您可以将数组计算为：

```
for(var i=0; i < coords.length; i++) {
  var arr = [0, 0, 0];
  for(var j=0; j < data.length; j++) {
    var xs = coords[i][1] - data[j][0];
    var ys = coords[i][2] - data[j][1];
    distance = Math.sqrt(xs * xs + ys * ys);
    if (distance <= 25) {
      arr[0]++;
    } else if (distance <= 60) {
      arr[1]++;
    } else if (distance <= 150) {
      arr[2]++;
    }
  }
  coords[i].arr = arr;
  coords[i].value = arr[0] * data.length * data.length + arr[1] * data.length + arr[2];
} 
```

现在您可以对值的坐标进行排序：

```
coords.sort(function(a, b){
  return a.value - b.value;
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T03:22:58.330

这是我想出的解决方案。它完全符合我的需要，同时显示在适当位置找到的坐标。

[http://pastehtml.com/view/cowibn4bs.html](http://pastehtml.com/view/cowibn4bs.html)看看我的劳动成果。

```
if(n==0){

    for(var i=0; i < data.length; i++) {
        var xs = 0;
        var xy = 0;
        xs = xPlot - data[i][0];
        ys = yPlot - data[i][1];
        xs = xs * xs;
        ys = ys * ys;

        distance = Math.sqrt(xs + ys);

        if (distance <= 25){
            display2(data[i][0] + ", " + data[i][1] + " - " + alliance);
        }
        else if(distance <= 60){
            display3(data[i][0] + ", " + data[i][1] + " - " + alliance);
        }
        else if(distance <= 150){
            display4(data[i][0] + ", " + data[i][1] + " - " + alliance);
        }
    }
    }

    else if(n>0){

    $('#msgs2').html('');
    $('#msgs3').html('');
    $('#msgs4').html('');

    for(var i=0; i < data.length; i++) {
        a = [];
        for(var j=0; j < coords.length; j++) {
            var xs = 0;
            var ys = 0;
            xs = coords[j][1] - data[i][0];
            ys = coords[j][2] - data[i][1];
            xs = xs * xs;
            ys = ys * ys;
            distance = Math.sqrt(xs + ys);

            if (distance <= 25){
                a[j] = 'g';
                }
            else if (distance <= 60){
                a[j] = 'b';
                }
            else if (distance <= 150){
                a[j] = 'r';
                }
            else{
                a[j] = 0;
            }

        }
        if($.inArray(0, a) > -1){
        }
        else if($.inArray("g", a) > -1 && $.inArray("b", a) === -1){
            if($.inArray("r", a) === -1){
                display2(data[i][0] + ", " + data[i][1] + " - " + alliance);
            }
        }
        else if($.inArray("b", a) > -1 && $.inArray("r", a) === -1){
            display3(data[i][0] + ", " + data[i][1] + " - " + alliance);
        }
        else if($.inArray("r", a) > -1){
            display4(data[i][0] + ", " + data[i][1] + " - " + alliance);
        }
    }               

    }
    n++; 
```

# for-loop - 为什么 xcopy 制作子目录但将文件放入.?

> ID：14299739
> 
> 赞同：0
> 
> 时间：2013-01-13T01:23:30.153
> 
> 标签：for-loop, batch-file, directory-structure, xcopy

我有以下代码：

```
@echo off
cd %temp%
rd /s /q svnbackup >nul 2>&1
md svnbackup\uncomitted_db-pc
cd svnbackup\uncomitted_db-pc
type NUL>files.txt
for /F "tokens=1*" %%T in ('svn status C:\SVN-EDGE') do ( echo %%U>>files.txt && xcopy "%%U" . /E /S /I /F /H /K /X /Y /R ) 
```

我得到以下输出`files.txt`：

```
C:\SVN-EDGE\SomeClient\BUTCHERED.docx 
C:\SVN-EDGE\SomeClient\Development notes.txt 
C:\SVN-EDGE\SomeClient\Received\~$formation for prospective clients.docx 
C:\SVN-EDGE\SomeClient\Sales\Estimates.xlsx 
C:\SVN-EDGE\SomeClient\Sales\Specification.docx 
C:\SVN-EDGE\SomeClient\Sales\~$Estimates.xlsx 
C:\SVN-EDGE\SomeClient\Sales\~$ecification.docx 
C:\SVN-EDGE\SomeClient\removed.docx 
C:\SVN-EDGE\SomeClient\site spec1.docx 
C:\SVN-EDGE\SomeClient\~$TCHERED.docx 
C:\SVN-EDGE\SomeClient\~$emoved.docx 
C:\SVN-EDGE\SomeClient\~$te spec1.docx 
```

但问题是，xcopy 在里面创建`Received`and`Development`文件夹，然后将相关文件放在无论如何`%temp%\svnbackup\uncomitted_db-pc`的顶层。`%temp%\svnbackup\uncomitted_db-pc`

任何时候都不会创建`SVN-EDGE`或`SomeClient`创建文件夹。如何确保创建了这些文件夹，并将上面单独列出的输入 xcopy 的文件放入正确的子目录中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T02:37:54.450

XCOPY 的行为应如此。它不会复制源路径中明确指定的文件夹层次结构。它只复制从通配符方面找到的文件夹，您的命令没有这些文件夹 - 您每次都在 XCOPYing 特定文件。

尚未经过全面测试，但我相信您可以将 FOR 语句替换为以下内容，并且一切都应该按照您的意愿工作。

```
for /F "tokens=1*" %%T in ('svn status C:\SVN-EDGE') do (
  echo %%U>>files.txt
  xcopy "%%U" ".\%%~pU" /F /H /K /X /Y /R
) 
```

# javascript - 网页中的 HTML 内容由 CDATA 标签自动封装

> ID：14299740
> 
> 赞同：0
> 
> 时间：2013-01-13T01:23:33.807
> 
> 标签：javascript, html

我有一段 Javascript 代码可以在我的网站上显示广告。当我在办公室打开网页时。广告不显示。当我检查网页的来源时。它被 CDATA 标签自动覆盖。

是不是因为一些广告拦截器。如何避免这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T01:29:38.587

CDATA 标记不是您的广告未展示的原因。根据 XHTML 标准，建议将您的 Javascript 放在 CDATA 标记中。

[http://javascript.about.com/library/blxhtml.htm](http://javascript.about.com/library/blxhtml.htm)

因此，您的广告未展示的原因一定是其他原因。有没有我们可以看到的代码来找到问题？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T01:27:46.510

> 当我在办公室打开网页时。

是不是只发生在@你的办公室，也许办公室代理正在阻止他们

# java - 设置 JPanel 或 JOptionPane 的大小

> ID：14299741
> 
> 赞同：3
> 
> 时间：2013-01-13T01:23:50.387
> 
> 标签：java, swing, joptionpane

所以我想以某种方式设置我的 JOptionPane 的大小 - 如果不设置它，它对于我的目的来说太大了，而且看起来不太好。这是我的代码：

```
 JScrollPane scrollpane = new JScrollPane(); 
   String categories[] = { "1\. Problem One Problem One Problem One Problem One Problem One Problem One Problem One Problem One Problem One", "2\. Problem Two", "3\. Extended Family", "4\. Extended Family", "5\. Extended Family"};
   JList list = new JList(categories);
   errorListCellRenderer cellRenderer = new errorListCellRenderer();
   list.setCellRenderer(cellRenderer);
   scrollpane = new JScrollPane(list);
   JPanel panel = new JPanel(); 
   panel.add(scrollpane);
   JOptionPane.showMessageDialog(null, panel, "Error List",  
                                          JOptionPane.PLAIN_MESSAGE); 
```

当我这样设置JPanel的大小时：

```
panel.setPreferredSize(new Dimension(500, 200)); 
```

滚动条消失，因此并未显示所有内容。

有任何想法吗？爪哇n00b...

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2014-10-09T21:29:15.307

如果您只想更改 JOptionPane 窗口的大小，可以使用 UIManager 来实现。像这样：

```
UIManager.put("OptionPane.minimumSize",new Dimension(500,500)); 
JOptionPane.showMessageDialog(null, "Hi " ); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-13T05:10:03.953

给滚动窗格一个preferredSize，然后直接将它添加到optionPane

```
String categories[] = { "1\. Problem One Problem One Problem One Problem One Problem One Problem One Problem One Problem One Problem One",
                       "2\. Problem Two", "3\. Extended Family", "4\. Extended Family", "5\. Extended Family"};
JList list = new JList(categories);
JScrollPane scrollpane = new JScrollPane(list);
scrollpane.setPreferredSize(new Dimension(300,125));//<-----any size you want
JOptionPane.showMessageDialog(null, scrollpane, "Error List",JOptionPane.PLAIN_MESSAGE); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-13T01:34:05.477

请进行以下更改并查看；

1.  不要将 JScrollPane 放在另一个面板中。直接在 showMessageDialog() 中传递 JScrollPane。

2.  也使用 scrollPane.getViewport().add(list);

编辑：我刚刚尝试了以下操作，随着项目的增加，滚动条对我来说是可见的。

```
 JScrollPane scrollpane = new JScrollPane(); 
       String categories[] = { "1\. Problem One Problem One Problem One Problem One Problem One Problem One Problem One Problem One Problem One", "2\. Problem Two", "3\. Extended Family", "4\. Extended Family", "5\. Extended Family"
               ,"6\. Extended Family","7\. Extended Family","8\. Extended Family","9\. Extended Family"};
       JList list = new JList(categories);

       scrollpane = new JScrollPane(list);

       JPanel panel = new JPanel(); 
       panel.add(scrollpane);

       scrollpane.getViewport().add(list);
       JOptionPane.showMessageDialog(null, scrollpane, "Error List",  
                                              JOptionPane.PLAIN_MESSAGE); 
```

附上截图；

![在此处输入图像描述](../Images/63554dd51f619ec443a2b9d0a594307b.png)

# ruby-on-rails - 将哈希保存到 sqlite3 ruby

> ID：14299745
> 
> 赞同：0
> 
> 时间：2013-01-13T01:24:28.570
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, sqlite

我有这个小的 ruby​​ 脚本，它收集数据，然后将它们保存在哈希中，然后将它们存储在 sqlite db 中。

哈希看起来像这样：

```
@track = {:name => "Chris Brown", :song => "Sweet Love", :time => "3:20", :album => "Fortune" } 
```

我有一种方法可以将此哈希保存到 sqlite 数据库中：

```
def add_db
 db  = SQLite3::Database.new("playlist.sqlite")
 sql = "INSERT INTO tracks (name, song, time, album)" +
           "VALUES(#{@track[:name]}, #{@track[:song]},#{@track[:time]}, #{@track[:album]})"
 db.execute(sql)
 db.close
end 
```

但我得到这个错误：`initialize': near "Playlist": syntax error (SQLite3::SQLException)`

这是将哈希值保存到 sqlite3 的正确方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T02:49:16.180

您的问题是您没有引用您要插入的任何内容，因此 SQLite 最终会看到如下内容：

```
insert into tracks (name, song, time, album) values (Playlist, ...) 
```

这不是有效的 SQL。您应该使用占位符：

```
db.execute(
    'insert into tracks (name, song, time, album) values (?, ?, ?, ?)',
    @track[:name], @track[:song], @track[:time], @track[:album]
) 
```

您也可以使用 ActiveRecord，但对于简单的数据导入脚本来说，这太重了。

# ios - 我应该如何为我的应用程序构建 Amazon Web Services？

> ID：14299751
> 
> 赞同：3
> 
> 时间：2013-01-13T01:25:33.797
> 
> 标签：ios, amazon-web-services, amazon-s3, amazon-ec2

我正在计划一个即将开发的社交网络应用程序。我已经有使用许多 AWS 服务的经验，这些服务包括：SES、SimpleDB、DynamoDB、CloudFront 和 S3。我愿意随时学习更多。

基本上在应用程序中，您有状态更新。每个用户都有一个帐户，可以上传自己的状态更新，例如，评论状态更新等。用户可以查看最近“x”小时内最喜欢的状态更新，还可以在整个数据库中搜索状态更新通过搜索用户名或搜索状态更新关键字——例如用户在创建时指定的 YouTube 标签。

这是我当前的架构：

*   使用 DynamoDB 在 S3 上托管每个带有属性的状态更新**键**，并使用范围查询来比较喜欢、时间戳、
*   使用 SimpleDB 托管 S3 的所有帐户密钥和其他密钥以及要查询的属性
*   使用 Amazon S3 托管所有账户数据和状态更新数据
*   使用 CloudFront 在全球分发 S3 存储桶内容

因此，当用户想要查看最后一天最喜欢的状态更新时，它会查询 DynamoDB 以在 24 小时的时间戳内找到最喜欢的状态更新。如果用户想要**搜索**状态更新的标签，DynamoDB 将拥有标签属性并对其进行查询。但是 DynamoDB 可以查询字符串吗？查看字符串是否匹配？我不这么认为......我不想扫描 DynamoDB 并根据它们的格式单独匹配键。命名约定可以包括里面的属性，例如状态更新的键名可以是：

> 最大：UploadedQuote：ijfi93nSNDiI：numberOfLikes="3499"

或类似的东西

这是因为扫描限制为 10 MB，我认为对于平均活跃用户群可能无法解决，我不想发送多个请求并使应用程序膨胀。如果用户想要查看某人的帐户，它会在 SimpleDB 上找到密钥并将其加载到 S3 上。

显然，特定用户的状态更新必须组织到他们的帐户对象中，但我需要一个单独的对象来保存所有状态更新（DynamoDB）——否则我怎样才能让用户在整个数据库中搜索状态更新？

我认为最难的部分是按喜欢和标签排序，我需要以某种方式拥有像 DynamoDB 这样的数据库，快速且可扩展，但能够像 SimpleDB 一样查询。不过，我**只想**使用 AWS。我知道这是可能的，因为我知道一个名为 PanoPerfect 的应用程序使用 AWS，它们具有与我计划类似的功能。我想知道他们的架构是如何运行的。Instagram 也是如此！

显然，在 SimpleDB 上托管所有状态更新更有意义，因为您可以正确查询它们，我什至不确定 DynamoDB 上的查询是否按我的计划工作，但如果我托管每一个状态更新，它将溢出 SimpleDB 并使其膨胀。不过 DynamoDB 可能很昂贵。

有更好的架构吗？我应该使用 CloudSearch 而不是这个 DynamoDB 进程进行搜索吗？CloudSearch 在 iOS 上可用吗？EC2呢？这是如何运作的？在这个规划阶段，我很不确定如何使用 AWS 构建我的应用程序。

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-07T03:08:50.073

听起来您决心使用 Amazon 的 NoSQL 数据库之一。如果它不起作用，请不要使用它。

我的建议是尽可能构建最简单的东西，并专注于首先获得用户。Twitter、Facebook、Ebay 和所有其他前 1000 名网站都是从常规数据库开始的，并且在它们流行时担心扩展。

如果您真的担心扩展，请查看 CouchDB、Cassandra 或 Riak。它们具有简单的缩放语义。（与 MongoDB 或 MySQL 不同，您必须进行复杂的手动分片。）

> DynamoDB 可以查询字符串吗？查看字符串是否匹配？

您只能查询主索引或二级索引。您可以将标签投影到二级索引中。但是他们只能查询完全匹配的标签。

> CloudSearch 在 iOS 上可用吗？EC2呢？

是的。像所有服务一样，它是一个 Web API。

> 这是如何运作的？

对于 Stack Overflow 来说，这并不是一个真正的问题

# ruby-on-rails - 获取rails错误中has_many的值（无方法错误）

> ID：14299753
> 
> 赞同：0
> 
> 时间：2013-01-13T01:25:39.637
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1, ruby-on-rails-3.2

当我执行命令以显示用户列时有很多评论时出现此错误：

```
 <% post.comments.each do |comment|   %>
        <div id="comments" >
          <%= comment.user.email if comment.user.email != nil %>
               <%= comment.comment %>
        </div>
NoMethodError in Posts#index

Showing /Users/overallduka/Blog1/app/views/posts/index.html.erb where line #50 raised:

undefined method `email' for nil:NilClass
Extracted source (around line #50): 
```

评论模型有belongs_to user，用户模型有has_many评论，这是正确的，但我没有确定问题，我检查并且我所有的评论都有user_id，请提供一些解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T01:50:53.487

`comments`问题是您的`post`对象上的至少一个具有关联的`nil`值`user`。您正在检查它`email`不是 nil，但您没有检查`user`它本身是否为 nil（这是触发 的原因`NoMethodError`）。

作为开始，我会改变这一行：

```
<%= comment.user.email if comment.user.email != nil %> 
```

至：

```
<%= comment.user && comment.user.email %> 
```

这是 ruby​​ 中的一种方便模式，它首先检查`comment.user`已定义，如果已定义，则返回第二个参数，即`comment.user.email`. 如果`comment.user`未定义（或`nil`，或`false`），则不评估第二个参数，并且返回值为 nil（因此，如果未定义用户，则`comment.user.email`永远不会评估，因此您不会收到错误）。

# php - 使用 php 在 html 中总结

> ID：14299754
> 
> 赞同：-3
> 
> 时间：2013-01-13T01:25:52.817
> 
> 标签：php, html, mysql

为什么我不能总结这个代码只显示总收入的最后一个收入：如何正确总结？

```
<table border="1">
    <tr>
       <th>Date</th>
      <th>Route</th>
      <th>Destination</th>
      <th>Van No.</th>
      <th>Waybill No.</th>
      <th>Charge Invoice</th>
      <th>Revenue</th>
      <th>Strip/Stuff</th>

    </tr>

  <?php do { ?>
    <tr>

      <td><?php echo $row_PK['delivery_details_date']; ?></td>
      <td><?php echo $row_PK['delivery_details_route']; ?></td>
      <td><?php echo $row_PK['delivery_details_destination']; ?></td>
      <td><?php echo $row_PK['delivery_details_van_no']; ?></td>
      <td><?php echo $row_PK['delivery_details_waybill_no']; ?></td>
      <td><?php echo $row_PK['delivery_details_charge_invoice']; ?></td>
      <td><?php echo $row_PK['delivery_details_revenue']; ?></td>
      <td><?php echo $row_PK['delivery_details_strip_stuff']; ?></td>

     <?php $revenue = $row_PK['delivery_details_revenue'];
      $sum += $revenue;?>

        </tr>  
          <?php } while ($row_PK = mysql_fetch_assoc($PK));?>

      </table>

TOTAL: <?php echo $revenue; ?> <br/> 
```

TOTAL 只显示最后记录的收入它没有添加所有这些为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T01:31:15.120

乍一看，我注意到一个错误是您在末尾回显了您的 $revenue 变量，这只是最后加载的数据...尝试回显 $sum 如果这是一些意外的结果，我们可以查看 for 循环的结构。但变量交换可能是唯一的问题。

同样对于您的while循环的结构，我觉得将条件放在顶部更安全......这可能有效，但是每当我查看while循环时，条件位于顶部，因此最好尝试遵循常见的惯例。例如

```
<?php
while ($row_PK = mysql_fetch_assoc($PK)) {
?>
//your code
<?php
 $revenue = $row_PK['delivery_details_revenue'];
      $sum += $revenue;
}
echo $sum;
?> 
```

# active-directory - 通过单向信任为 Active Directory 自定义身份验证提供程序

> ID：14299756
> 
> 赞同：0
> 
> 时间：2013-01-13T01:26:18.537
> 
> 标签：active-directory, windows-authentication, trust

我们正在为托管在我们的 DMZ 服务器上的网站编写自定义身份验证提供程序。该网站建立在名为 Kentico 的 CMS 之上，该 CMS 在 .NET 4.0 框架上运行。Kentico 托管服务器位于 DMZ Active Directory 林中。还有另一个内部 Active Directory 林，DMZ AD 与内部 AD 具有单向信任（DMZ 信任内部 AD，内部 AD 不信任 DMZ）。

我们可以毫无问题地验证 DMZ AD 用户。但我们还需要能够对内部 AD 用户进行身份验证。防火墙设置阻止了对内部 AD 域控制器的直接访问，因此我们需要通过信任向 DMZ AD DC 发送身份验证请求。

尝试对内部 AD 用户进行身份验证时 - 身份验证提供程序向 DMZ DC 发送的 LDAP 查询失败并显示“未找到用户”。

想知道是否有人以前处理过这个问题以及它是如何解决的。预先感谢您的回复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T18:45:51.363

我发现对处于单向信任另一侧的用户进行身份验证的一种可靠方法是使用 advapi32.dll 库中的 LogonUserEx 函数。我确定 LOGON32_LOGON_INTERACTIVE 登录类型有效，而 LOGON32_LOGON_BATCH 无效。LogonUserEx 接受域和用户名作为单独的参数或带有空域参数的用户名的 UPN。

现在 Kentico 有点奇怪，因为他们有两个开箱即用的身份验证提供程序，一个用于针对 Kentico DB 进行身份验证，另一个用于使用 System.Web.Security 包中的 ActiveDirectoryMembershipProvider 登录到 AD。该提供商似乎无法在单向信任的另一端登录任何人。现在 Kentico 不允许您使用自定义提供程序来代替，而是要求通过事件处理程序进行任何自定义身份验证。

Kentico 文档在如何制作自定义事件处理程序方面有点薄弱。这是他们为 Kentico 7 提供的链接（与 Kentico 6 大致相同） - [http://bit.ly/13DXrFA](http://bit.ly/13DXrFA)。关于制作自定义事件处理程序的唯一其他实用信息适用于 Kentico 6，但它应该适用于 Kentico 7，可以在此处找到 - [http://bit.ly/13DXLEc](http://bit.ly/13DXLEc)。正如您从该链接中看到的那样，目标事件是 SecurityEvents.Authenticate.Execute。

希望有帮助。

# ruby-on-rails - rake db：迁移错误（未找到函数“inotify_init”）

> ID：14299757
> 
> 赞同：2
> 
> 时间：2013-01-13T01:26:27.637
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3.2, rake, dbmigrate

![在此处输入图像描述](../Images/3c25fddd335795f61ad3b07af8c8c952.png)

我刚刚在我的旧 mac 书上设置了我的 rails 环境并遇到了这个错误。我已经安装了 FFI 和 rb-inotify。我也再次运行了 bundle install 。我看过

[https://github.com/ffi/ffi/issues/66](https://github.com/ffi/ffi/issues/66)

和

[https://groups.google.com/forum/?fromgroups=#!topic/ruby-ffi/gj3_k34o80k](https://groups.google.com/forum/?fromgroups=#!topic/ruby-ffi/gj3_k34o80k)

这两者都表明这是一个特定于 linux 的 API。这些链接中的第二个有一个建议，说我应该删除那个 gem 和依赖它的东西，但我对删除似乎依赖它的 FFI 犹豫不决。

您建议采取什么行动？非常感谢您对此事的任何建议。

编辑：我正在运行 rails 3.2.7（今晚更新到 3.2.11）。

编辑2：我发现了这个：[Rubygems：如何添加特定于平台的依赖项？](https://stackoverflow.com/questions/4596606/rubygems-how-do-i-add-platform-specific-dependency). 这有帮助吗？

编辑3：你认为它可能与rbenv有关吗？

编辑 4：我将开发 gem 从 rb-inotify 更改为 rb-fsevent，运行 bundle install 然后执行 db:migrate。

![在此处输入图像描述](../Images/9732d4fa6ba918e3ed6a8adb5da16c7e.png)

它继续运行迁移。

嗯...我问我的团队成员使用 macs 已经尝试执行 rake db:migrate，因为我们的 Linux 开发人员将 rb-inotify 添加到我们的 gem 集中。

此链接可能对以这种方式出现的人有所帮助：https: [//supportbee.com/devblog/2012/07/18/using-platform-dependent-gems-rb-inotify-and-rb-fsevent/](https://supportbee.com/devblog/2012/07/18/using-platform-dependent-gems-rb-inotify-and-rb-fsevent/)

编辑5：我一直在看[守卫宝石](https://github.com/guard/guard)，特别是这部分：

![在此处输入图像描述](../Images/cff036762becf3cb26888109d2b06432.png)

我添加了这个，它将执行 rake db:migrate，但我仍然得到一个非常类似于以下内容的错误列表：

```
Could not open library 'libgtk-x11-2.0': dlopen(libgtk-x11-2.0, 13): image not found. 
```

我想我正在走向一个完整的解决方案！

编辑 7：查看这个 stackoverflow 问题，了解由于 libnotify gem 导致的剩余错误：[升级到 Rails 3.1 后未找到图像错误，如何修复？](https://stackoverflow.com/questions/9040502/image-not-found-errors-after-upgrade-to-rails-3-1-how-to-fix). 它建议这样做：

```
gem 'libnotify' if /linux/ =~ RUBY_PLATFORM
gem 'growl' if /darwin/ =~ RUBY_PLATFORM 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-13T03:19:32.070

本质上，我团队中的某个人添加了一些特定于 Linux 的安装。要修复它，请执行以下操作：

对于 rb-inotify 的东西，这样做：

```
group :development do
  gem 'rb-inotify', :require => false
  gem 'rb-fsevent', :require => false
  gem 'rb-fchange', :require => false
end 
```

如果您有 libnotify，请执行以下操作：

```
gem 'libnotify' if /linux/ =~ RUBY_PLATFORM
gem 'growl' if /darwin/ =~ RUBY_PLATFORM 
```

为我工作，快乐编码！

# arrays - 删除任何哈希级别的数组元素重复项？

> ID：14299758
> 
> 赞同：1
> 
> 时间：2013-01-13T01:26:50.703
> 
> 标签：arrays, perl, hash, duplicates

具有复杂的多级散列，其中一些值是数组而其他不是，如何在此类散列的任何级别删除数组元素重复项？

只是简单的哈希示例（实际上它更复杂）：

```
$VAR1 = {
  'alpha' => {
    'code' => [
      {
        'x' => 1,
        'y' => 2
      },
      {
        'x' => 1,
        'y' => 2
      }
    ],
    'data' => {
      'domestic' => [
        {
          'a' => 0,
          'b' => 5
        },
        {
          'a' => 0,
          'b' => 5
        }
      ]
    }
  }
} 
```

哈希包含不同级别的数组，其中一些具有 uniq 元素，其中一些包含重复元素。有时这样的数组元素本身就是复杂的散列。

**在任何级别删除任何大小的重复项**的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T02:23:51.080

我不喜欢没有对象化的深层对象，幸运的是，Moose 内置了强制功能，因此您几乎可以像魔术一样对象化深层对象。

我有点过火了，但我决定继续并把它记下来作为自己的练习，尽管我认为我可以“扮演”一些项目并获得更好的结果，或者强制强制 Alpha::Keyed to无论如何，从必填字段构建结果类。

我不完全喜欢我编码的方式，但我不想在上面花费大量时间，但它适用于您上面的对象。您必须做很多工作才能使其在更复杂的对象上运行，并且您需要将代码分解为单独的类：

阿尔法下午：

```
package Alpha;

use Moose;
use Moose::Util::TypeConstraints;

subtype 'AlphaCodes',
    as 'Alpha::Codes';

subtype 'AlphaData',
    as 'Alpha::Data';

coerce 'AlphaCodes',
    from 'ArrayRef[HashRef]',
    via { Alpha::Codes->new( data => $_ ) };

coerce 'AlphaData',
    from 'HashRef',
    via { Alpha::Data->new($_) };

has 'code' => (
    is => 'ro',
    isa => 'AlphaCodes',
    required => 1,
    coerce => 1);

has 'data' => (
    is => 'ro',
    isa => 'AlphaData',
    required => 1,
    coerce => 1);

package Alpha::Codes;

use Moose;
use Moose::Util::TypeConstraints;

extends 'Alpha::KeyedList';

subtype 'ArrayRefOfCodes',
    as 'ArrayRef[Alpha::Code]';

coerce 'ArrayRefOfCodes',
    from 'ArrayRef[HashRef]',
    via { [ map { Alpha::Code->new($_) } @$_ ] };

has 'data' => (
    is => 'ro',
    isa => 'ArrayRefOfCodes',
    required => 1,
    coerce => 1);

package Alpha::KeyedList;

use Moose;
use Moose::Util::TypeConstraints;

sub unique_list {
    my $self = shift;
    my %seen = ();
    my @retval = ();
    foreach my $item ( @{$self->data} ) {
        unless ( $seen{$item->key} ) {
            push(@retval,$item);
            $seen{$item->key} = 1;
        }
    }
    return @retval;
}

package Alpha::Data;

use Moose;
use Moose::Util::TypeConstraints;

subtype 'AlphaDataDomestics',
    as 'Alpha::Data::Domestics';

coerce 'AlphaDataDomestics',
    from 'ArrayRef[HashRef]',
    via { Alpha::Data::Domestics->new(data => $_) };

has 'domestic' => (
    is => 'ro',
    isa => 'AlphaDataDomestics',
    required => 1,
    coerce => 1 );

package Alpha::Data::Domestics;

use Moose;
use Moose::Util::TypeConstraints;

extends 'Alpha::KeyedList';

subtype 'ArrayRefOfDomestics',
    as 'ArrayRef[Alpha::Data::Domestic]';

coerce 'ArrayRefOfDomestics',
    from 'ArrayRef[HashRef]',
    via { [ map { Alpha::Data::Domestic->new($_) } @$_ ] };

has 'data' => (
    is => 'ro',
    isa => 'ArrayRefOfDomestics',
    required => 1,
    coerce => 1);

package Alpha::Data::Domestic;

use Moose;

extends 'Alpha::Keyed';

has 'a' => ( is => 'ro' , isa => 'Str' , required => 1 );
has 'b' => ( is => 'ro' , isa => 'Str' , required => 1 );

sub build_key {
    my $self=  shift;
    return $self->a . '__' . $self->b;
}

package Alpha::Code;

use Moose;

extends 'Alpha::Keyed';

has 'x' => ( is => 'ro' , isa => 'Str' , required => 1 );
has 'y' => ( is => 'ro' , isa => 'Str' , required => 1 );

sub build_key {
    my $self=  shift;
    return $self->x . '__' . $self->y;
}

package Alpha::Keyed;

use Moose;

has 'key' => ( is => 'ro'
    , isa => 'Str'
    , builder => 'build_key'
    , lazy => 1 );

package main;

my $VAR1 = {
  'alpha' => {
    'code' => [
      {
        'x' => 1,
        'y' => 2
      },
      {
        'x' => 1,
        'y' => 2
      }
    ],
    'data' => {
      'domestic' => [
        {
          'a' => 0,
          'b' => 5
        },
        {
          'a' => 0,
          'b' => 5
        },
        {
          'a' => 1,
          'b' => 2
        },
      ]
    }
  }
};

my $alpha = Alpha->new($VAR1->{alpha});

use Data::Dumper;
warn Dumper([ $alpha->code->unique_list ]);
warn Dumper([ $alpha->data->domestic->unique_list ]);

1; 
```

现在运行：

```
$VAR1 = [
      bless( {
               'y' => 2,
               'x' => 1,
               'key' => '1__2'
             }, 'Alpha::Code' )
    ];
$VAR1 = [
      bless( {
               'a' => 0,
               'b' => 5,
               'key' => '0__5'
             }, 'Alpha::Data::Domestic' ),
      bless( {
               'a' => 1,
               'b' => 2,
               'key' => '1__2'
             }, 'Alpha::Data::Domestic' )
    ]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T06:20:34.313

此代码使用该[`Data::Compare`](https://metacpan.org/module/Data%3a%3aCompare)模块，似乎可以满足您的需要。

`Compare`它递归地遍历数据结构，并使用模块中的函数检查它到达的每个数组是否存在重复项。发现重复项时将其删除。

```
use strict;
use warnings;

use Data::Compare 'Compare';

my %data = (
  alpha => {
    code => [{ x => 1, y => 2 }, { x => 1, y => 2 }],
    data => { domestic => [{ a => 0, b => 5 }, { a => 0, b => 5 }] },
  },
);

process_node(\%data);

use Data::Dump;
dd \%data;

sub process_node {

  my ($data) = @_;

  if (ref $data eq 'HASH') {
    process_node($_) for values %$data;
  }
  elsif (ref $data eq 'ARRAY') {

    my $i = 0;
    while ($i < @$data-1) {
      my $j = $i + 1;
      while ($j < @$data) {
        if (Compare(@{$data}[$i,$j])) {
          splice @$data, $j, 1;
        }
        else {
          $j++;
        }
      }
      $i++;
    }

    process_node($_) for @$data;
  }
} 
```

**输出**

```
{
  alpha => {
    code => [{ x => 1, y => 2 }],
    data => { domestic => [{ a => 0, b => 5 }] },
  },
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T01:36:22.790

I would see the answer to the question here: [How can I compare arrays in Perl?](https://stackoverflow.com/questions/2591747/how-can-i-compare-arrays-in-perl)

Using that you should be able to iterate through all levels of your hash and compare the arrays in the array level. You would of course need to do it for each possible pairing of arrays.

If you could better assign keys to your arrays so that it some how identified them then you wouldn't need to worry about this as each key needs to be unique.

# syntax - 如何从任务列表中隐藏独立 exe？

> ID：14299760
> 
> 赞同：0
> 
> 时间：2013-01-13T01:27:46.043
> 
> 标签：syntax, vb6, hide, exe

我希望收到您的来信，这是一种不好的做法并同意；）

喜欢这样做的唯一原因是不要以锁定文件结束，如果用户从任务管理器中杀死我的进程会发生什么。或者，如果您有更好的想法，**请不要急于投票**！作为编程新手，我没有更好的主意。如果您建议我以不同的形式重新提出我的问题，可能会这样做，但现在我很乐意按原样回答我的问题。

我尝试的是使用**App.TaskVisible**属性并将其设置为`False`，并在我的`Sub Main`程序中执行此操作，但这不起作用。

请记住，这对 VB6 有点新（提前感谢您的理解！），我第一次尝试该属性，所以我承认我做错了。它看起来使用起来非常简单自然`App.TaskVisible`，我很乐意告诉我如何正确使用它。

我拥有的是一个没有表单或任何界面的标准 EXE 应用程序，只需在后台执行文件 i/o 操作，也没有弹出任何对话框（如果很重要），它会将错误（如果有）记录到文件中，所以没有任何用户交互。该应用程序将从命令提示符或通过批处理文件独立运行。

我搜索了很多关于此属性的信息，但我发现的唯一一个示例在`Form_Load`事件中使用了此属性，并且没有废话，根本无法工作。

我还寻找任何说明该财产是否折旧的信息，但一无所获。还寻求任何未记录的限制，但也一无所获。

当然，最终目标是最重要的，但我会很高兴并按此顺序感谢您的建议：

1.  充其量，使用 App.TaskVisible 属性。
2.  任何替代方法。
3.  在最坏的情况下，告诉我这根本不可能。

如果（喜欢与否）答案是＃3，我将询问如何防止锁定文件，但这将是一个单独的主题。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T01:37:58.237

在 Windows 9x（95 到 ME）中，您曾经能够从 Ctrl+Alt+Del 任务列表中隐藏应用程序，但是在基于 NT 的 Windows 版本（包括自 Windows 2000 以来的所有 Windows 版本）中这是不可能的。

如果您担心如果您的程序在 I/O 操作过程中被终止，磁盘上的文件最终可能会损坏，您可能需要使用某种形式的事务数据库。SQLite 擅长事务（它[符合 ACID](http://en.wikipedia.org/wiki/ACID)）。

# ios - iAd 错误：广告资源不可用

> ID：14299764
> 
> 赞同：0
> 
> 时间：2013-01-13T01:28:05.967
> 
> 标签：ios, objective-c, xcode, iad

我正处于应用程序的最后阶段，我一直在我的 iPhone（4S，iOS 6.0）和 iPad（3，iOS 5.1.1）上测试我的广告应用程序。

我的应用程序是一个 iPhone 应用程序（即它在 iPad 上作为 iPhone 应用程序运行），我使用相同的 XCode 项目在两个设备上运行我的应用程序。

奇怪的是，在我的 iPhone 上我看到了 iAd 测试广告，而在 iPad（也连接到我的 Wifi）上我没有。我在控制台中看到以下错误：

```
{ ADInternalErrorCode = 3; NSLocalizedFailureReason = "Ad inventory unavailable"; } 
```

该网站上的一些人提到了同样的问题，人们通常将其归因于正常行为，理由是当时可能根本没有广告可投放到 iAd 横幅。

这很好，但它不能解释为什么它可以在我的 iPhone 而不是 iPad 上运行；它们都使用相同的互联网连接。

有没有人对此有任何理论/解决方案？

提前致谢，

安迪

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T01:42:06.397

Apple is probably serving a different selection of ads to iPhone and iPad users. Either that, or there's something else about your profiles on the two devices that's causing the iPhone to receive some ads that the iPad doesn't. (Some ads may be targeted to specific market segments, based on any number of factors.)

# javascript - 带有两个锚点的线 kineticjs

> ID：14299766
> 
> 赞同：3
> 
> 时间：2013-01-13T01:28:35.807
> 
> 标签：javascript, html5-canvas, kineticjs

这是我目前的状态：http: [//jsfiddle.net/andrewgable/Xr6mc/](http://jsfiddle.net/andrewgable/Xr6mc/)

```
 <!DOCTYPE HTML>
<html>
  <head>
    <style>
      body {
        margin: 0px;
        padding: 0px;
      }

    </style>
  </head>
  <body>
    <div id="container"></div>
    <script src="http://www.html5canvastutorials.com/libraries/kinetic-v4.3.0-beta2.js"></script>
    <script>
      var stage = new Kinetic.Stage({
        container: 'container',
        width: 578,
        height: 200
      });

      var lineLayer = new Kinetic.Layer();
      var flowerLayer = new Kinetic.Layer();
      var centerLayer = new Kinetic.Layer();

      var flower = new Kinetic.Group({
        x: stage.getWidth() / 2,
        y: stage.getHeight() / 2
      });

      // build stem
      var stem = new Kinetic.Line({
        strokeWidth: 10,
        stroke: 'green',
        points: [{
          x: flower.getX(),
          y: flower.getY()
        }, {
          x: stage.getWidth() / 2,
          y: stage.getHeight() + 10
        }]
      });

      // build center
      var center = new Kinetic.Circle({
        x: 0,
        y: 0,
        radius: 6,
        fill: 'black',
        draggable: true,
        x: stage.getWidth() / 2,
        y: stage.getHeight() / 2
      });

      center.on('mouseover', function() {
        this.setFill('orange');
        flowerLayer.draw();
        document.body.style.cursor = 'pointer';
      });

      center.on('mouseout', function() {
        this.setFill('black');
        flowerLayer.draw();
        document.body.style.cursor = 'default';
      });

      stage.on('mouseup', function() {
        document.body.style.cursor = 'default';
      });

      lineLayer.add(stem);
      flowerLayer.add(flower);
      centerLayer.add(center);
      stage.add(lineLayer);
      stage.add(flowerLayer);
      stage.add(centerLayer);

      // keep step and flower position in sync with center
      center.on('dragstart', (function() {
        center.getLayer().afterDraw(function() {
          stem.attrs.points[0] = center.getPosition();
          flower.setPosition(center.getPosition());
          lineLayer.draw();
          flowerLayer.draw();
        });
      }));

    </script>
  </body>
</html> 
```

只是试图使这条线可拖动（简单，将其设置为拖动）。

我希望这条线有两个锚点，都可以向任何方向拖动。

正如你所看到的，我只需要做一个“锚”点。

如果没有锚点移动，我无法弄清楚使这成为可能的逻辑..

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T22:38:58.107

看看[http://jsfiddle.net/bxGMw/](http://jsfiddle.net/bxGMw/)

同样的逻辑可以从这个页面直接复制到你想要的。您可以只使用 buildAnchors 函数为形状创建锚点，并使用更新函数 redraw();

```
function buildAnchor(layer, x, y) {
            var anchor = new Kinetic.Circle({
                x: x,
                y: y,
                radius: 8,
                stroke: '#666',
                fill: '#ddd',
                strokeWidth: 2,
                draggable: true
            });

            // add hover styling
            anchor.on('mouseover', function() {
                document.body.style.cursor = 'pointer';
                this.setStrokeWidth(4);
                layer.draw();
            });
            anchor.on('mouseout', function() {
                document.body.style.cursor = 'default';
                this.setStrokeWidth(2);
                layer.draw();
            });

            layer.add(anchor);
            return anchor;
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T00:42:21.757

将此代码放在最后并删除代码`group1`

```
stem.on('dragmove', (function () {
  //  stem.getLayer().afterDraw(function () {
  center.setPosition([stem.getPosition().x + stem.getPoints()[0].x, stem.getPosition().y + stem.getPoints()[0].y]);
  c2.setPosition([stem.getPosition().x + stem.getPoints()[1].x, stem.getPosition().y + stem.getPoints()[1].y]);
  flower.setPosition(center.getPosition());
  lineLayer.draw();
  centerLayer.draw();
  flowerLayer.draw();
  //  });
}));

var c2 = new Kinetic.Circle({
  x: 100,
  y: 100,
  radius: 6,
  fill: 'blue',
  draggable: true,
});
centerLayer.add(c2);
c2.on('dragstart', (function () {
  c2.getLayer().afterDraw(function () {
    stem.attrs.points[1].x = c2.getX()-stem.getX();
    stem.attrs.points[1].y = c2.getY()-stem.getY();
    lineLayer.draw();
    flowerLayer.draw();
  });
})); 
```

也改变：

```
center.on('dragstart', (function () {
  center.getLayer().afterDraw(function () {
   stem.attrs.points[0].x = center.getX()-stem.getX();
   stem.attrs.points[0].y = center.getY()-stem.getY();    
   flower.setPosition(center.getPosition());
   lineLayer.draw();
   flowerLayer.draw();
  });
})); 
```

# laravel - Laravel 4：分析器在哪里？

> ID：14299769
> 
> 赞同：22
> 
> 时间：2013-01-13T01:28:55.933
> 
> 标签：laravel, laravel-4

我曾经能够使用`profiler`.`/application/config/application.php`

它不再存在。我该如何启用它？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-12-11T15:37:10.643

可能是截至 2013 年 12 月**最完整的分析器**包：

**Laravel 调试栏**：[https ://github.com/barryvdh/laravel-debugbar](https://github.com/barryvdh/laravel-debugbar)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-13T01:32:12.357

它已经不存在了，尽管我听说 DayleRees 可能会再次尝试实现它。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-01-28T15:11:33.493

这是一个基于旧分析器的分析器： [https ://packagist.org/packages/loic-sharma/profiler](https://packagist.org/packages/loic-sharma/profiler)

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-07-22T10:42:20.800

除了 Barry 对 ioic-sharma/profiler 的建议之外，还有一个由 juy 编写的替代方案，它还有一些（在我看来，在使用两者之后）可供作曲家安装的有用功能[https://github.com/juy/profiler](https://github.com/juy/profiler)

编辑：2014 年 1 月 19 日：看到我上面提到的替代方案现在处于永久放弃状态，我会推荐 barryvdh 的调试栏，如下所示： [https](https://github.com/barryvdh/laravel-debugbar) ://github.com/barryvdh/laravel-debugbar它是一个我们在办公室使用在生产中。

# mod-rewrite - 重写子目录中的图像

> ID：14299775
> 
> 赞同：0
> 
> 时间：2013-01-13T01:29:47.290
> 
> 标签：mod-rewrite, rewrite

我一直在查看许多示例，但无法理解这一点，可能是不可能的。我继承了一个 Wordpress 网站的烂摊子。

我有这个目录结构，Wordpress：

```
/wp-content/uploads/
/wp-content/uploads/2011
/wp-content/uploads/2012
/wp-content/uploads/Organised
/wp-content/uploads/Organised/0-9
/wp-content/uploads/Organised/A
/wp-content/uploads/Organised/B
/wp-content/uploads/Organised/ and so on ... to Z 
```

文件夹中基本上有超过 93,000 个文件`/wp-content/uploads/`，还有一些在 2011 和 2012 文件夹中。我需要移动 93,000 个文件，因此决定制作“Organised”文件夹，其中包含反映潜在文件的第一个字母/数量的文件夹。

虽然这不是问题，但通过移动它们，我需要确保外部请求仍然可以基于旧 URL 访问这些文件。

所以：

```
/wp-content/uploads/APicture.jpg 
```

将重写为：

```
/wp-content/uploads/Organised/A/APicture.jpg 
```

同时仍然允许访问实际的 URL，例如：

```
/wp-content/uploads/2012/AnotherPicture.jpg 
```

我认为像这样的重写 URL 会起作用，但它不起作用，我尝试了很多变体，也许它不能像这样工作？

```
RewriteRule ^/wp-content/uploads/([^/]+)(\.png|\.jpg|\.bmp|\.gif)$ /wp-content/Organised/T/$1$2 
```

**注意：**为了测试，我检查了一个 URL `/wp-content/uploads/taylor-swift-harry-styles.jpg`，这就是为什么我对生成的重写 URL 进行硬编码，但我意识到它需要更改以匹配首字母。

感谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T12:08:39.457

根据 Faa 的评论，我修改了我的代码并将其放在这里以提高可读性。

```
#   !!!
#   !!! Requires directories to be present: a-z; A-Z; 0-9
#   !!!

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} !wp-content/uploads/_Organised   [NC]
RewriteCond %{REQUEST_URI} wp-content/uploads/([A-Za-z0-9])([^/]+)\.([^/]+)$/? [NC]
RewriteRule .* wp-content/uploads/_Organised/%1/%1%2.%3 [L]

#   !!!
#   !!! Matches "Other" characters/files that were not caught above
#   !!!

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} !wp-content/uploads/_Organised   [NC]
RewriteCond %{REQUEST_URI} wp-content/uploads/(.*)$/? [NC]
RewriteRule .* wp-content/uploads/_Organised/_Misc/%1 [L] 
```

我认为它有效，似乎有效，但我是否与正则表达式合作？我需要确保只有文件`/wp-content/uploads/`匹配并且没有更深。

这就是我放置 -f 和 -d 标志的原因，这是过度杀戮吗？直到我把它们放进去之前，第二条规则存在一个问题，它会捕获子目录中的文件。($) 符号在这里也有保证吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T09:13:34.847

你可以试试这个：

```
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_URI} !wp-content/Organised   [NC]
RewriteCond %{REQUEST_URI} wp-content/uploads/(\w)([^/]+)\.(png|jpg|bmp|gif)/? [NC]
RewriteRule .*   wp-content/Organised/%1/%1%2.%3    [L] 
```

它将重定向这样的 URL：

`http://example.com/wp-content/uploads/Taylor-swift-harry-styles.jpg`

但不像这个：

`http://example.com/wp-content/uploads/2012/Taylor-swift-harry-styles.jpg`

至：

`http://example.com/wp-content/Organised/T/Taylor-swift-harry-styles.jpg`

其中目录`T`是文件名的第一个字符。它可以是单个数字或单个字母。

不过，它会保留字母大小写。例如，如果字母为小写，则映射目录将是`t`并且**必须存在**。当字母为大写时也会发生同样的情况。

# javascript - 使用 for() 克隆 JavaScript

> ID：14299777
> 
> 赞同：0
> 
> 时间：2013-01-13T01:29:58.350
> 
> 标签：javascript, jquery, for-loop, cloning

例子是这个，这不起作用。我的错误是什么？

```
var i=1;
for(i; i <=165; i++){
    jQuery(".tekAlan"+i).click(function() {   
    jQuery(".tekAlan"+i).addClass("tekAlanSecildi");    
    });
} 
```

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-13T01:32:18.487

您是通过`i`引用而不是值传递，所以`i`不是指您认为循环运行后的数字。看看[这个简单的例子](http://jsfiddle.net/hXmdG/2/)，看看我的意思。

在这种情况下，您可能只使用属性选择器和`this`：

```
jQuery('[class^="tekAlan"]').click(function() {   
    jQuery(this).addClass("tekAlanSecildi");    
}); 
```

如果要修复当前代码，则必须使用匿名函数进行[遮蔽：](http://en.wikipedia.org/wiki/Variable_shadowing) `i`

```
for(var i = 1; i <= 165; i++){
    (function(i) {
        jQuery(".tekAlan" + i).click(function() {   
            jQuery(".tekAlan" + i).addClass("tekAlanSecildi");    
        });
    })(i);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T01:42:33.413

Although this is not very clear, you could try something like this

1) add a class to all of your elements

2)

```
$('.someclass').click(function(){

    $(this).addClass('someotherclass');

}) 
```

you dont need a for loop.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T01:33:00.880

我猜您只想将类添加到单击的项目中。但是，它总是将类添加到最后一个。那是因为 i 是在 for 结束**后**访问的，所以它总是包含 165。这样做可以解决您的问题：

```
var i=1;
for(i; i <=165; i++){
    jQuery(".tekAlan"+i).click(function() {   
        jQuery(this).addClass("tekAlanSecildi");    
    });
} 
```

`jQuery(this)`是受事件影响的元素的引用（在本例中为`click`）

# javascript - 将滚动列表约束到容器 div

> ID：14299778
> 
> 赞同：0
> 
> 时间：2013-01-13T01:30:18.193
> 
> 标签：javascript

我正在尝试将我的选项卡列表限制为容器 div (#tabs)。

[http://jsbin.com/uzopun/1/](http://jsbin.com/uzopun/1/)

任何让我开始的想法。

谢谢。

# android - 以编程方式在 TextView 旁边添加按钮

> ID：14299781
> 
> 赞同：0
> 
> 时间：2013-01-13T01:30:49.627
> 
> 标签：android, listview, textview

我有一个国家 TextViews 的 ListView，并且在单击其中一个 TextViews 上的短按后我做了一个 OptionsMenu 项，它将删除按下的 textview。我想知道是否有办法做到这一点，当我按下“删除国家”项目时，每个 TextView 旁边都会出现一个按钮，就像在 iphone 示例中一样 ![删除](../Images/de2226310627dfca48aa21393982b2c9.png)

ListView 是由适配器创建的。我不需要完整的答案，只需要如何完成的概念（从选项菜单中选择删除国家/地区后，删除每个 TextView 旁边创建的按钮）。

```
public class CountryAdapter extends BaseAdapter {

private Context mContext;
protected Vector<Country> mVector;
protected SQLiteDatabase mDb;

public void setmContext(Context mContext){
    this.mContext = mContext;
}

public CountryAdapter(Context mContext){
    this.mContext = mContext;

    mVector = new Vector<Country>();

    CountryOpenHelper helper = new CountryOpenHelper(mContext);
    mDb = helper.getWritableDatabase();

    Cursor cursor = mDb.rawQuery("SELECT * FROM COUNTRIES", null);

    if(cursor.getCount() > 0){

        cursor.moveToFirst();
    }
    do {
        Country country = new Country();
        country.setmCountryIndex(cursor.getInt(0));
        country.setmCountryName(cursor.getString(2));
        country.setmCountryTextSize(cursor.getInt(1));
        country.setmCountryColor(cursor.getInt(3));
        mVector.add(country);

    } while (cursor.moveToNext());

}

public Vector<Country> getmVector() {
    return mVector;
}

@Override
public int getCount() {
    // TODO Auto-generated method stub
    return mVector.size();
}

@Override
public Object getItem(int position) {
    // TODO Auto-generated method stub
    return null;
}

@Override
public long getItemId(int position) {
    // TODO Auto-generated method stub
    return 0;
}

@Override
public View getView(int position, View convertView, ViewGroup parent) {
    TextView tv;
    if(convertView == null){
        tv = new TextView(mContext);
    }else{
        tv = (TextView) convertView;
    }

    tv.setText(mVector.get(position).getmCountryName());
    tv.setTextColor(mVector.get(position).getmCountryColor());
    tv.setTextSize(mVector.get(position).getmCountryTextSize());

    return tv;
}
public void ChangeColor(int newcolor, String name) {

    mDb.execSQL("update COUNTRIES set color = " + newcolor + " where name = '" + name + "' " );

}
public void addCountry(int mId, String myCountry, int myColorNum){
    mDb.execSQL("insert into countries values(" + mId + " , ' " + myCountry+"' , "+ myColorNum + ")");
}

public void delete(int position) {
    int mDeletedId = mVector.get(position).getmCountryIndex();
    mVector.remove(position);
    mDb.execSQL("DELETE FROM countries WHERE id ="+mDeletedId);

}

public void ChangeTextSize(int textSize, int mIndex) {
    System.out.println(textSize);
    System.out.println(mIndex);
    mDb.execSQL("update COUNTRIES set font = " + textSize + " where id =" + mIndex);

} 
```

}

我希望当我从 optionMenu“删除国家/地区”单击时，它将以编程方式在每个 TextView 旁边添加删除按钮（或其他东西），并且所有这些按钮都将应用相同的方法（删除）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T05:19:53.740

与其尝试以编程方式添加按钮并弄得一团糟，不如试试这个。

我假设您为 ListView 使用自定义数组适配器。将按钮添加到行并将其与文本视图的右侧对齐。

`android:visibility="gone"`在定义行布局的 xml 文件中使删除按钮不可见。

```
textView1.setOnLongClickListener(new OnLongClickListener() { 
    @Override
    public boolean onLongClick(View v) {
        deleteButton.setVisibility(true);
 deleteButton.setOnClickListener(new OnClickListener() { 
    @Override
    public boolean onClick(View v) {
        //delete the row here
    }
});
    }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-21T00:32:32.567

1.  在 XML 文件中创建按钮：

    ```
    <?xml version="1.0" encoding="utf-8"?>
    <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >
    <Button
        android:id="@+id/row_category_button"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Add"
        android:layout_centerVertical="true"
        android:layout_marginRight="10dp"
        android:layout_alignLeft="@+id/row_category_name"
        android:textColor="@color/black"
        android:layout_alignParentRight="true"
        android:layout_alignParentTop="true" />
    </RelativeLayout> 
    ```

2.  在 Adapter 类中创建一个 View holder 和 Add 按钮：

    ```
    ViewHolder holder ;

    if(view ==null){
            view = inflater.inflate(R.layout.___, null);
            holder = new ViewHolder();
            holder.tv = (TextView) view.findViewById(R.id.____);
            holder.img =(ImageView) view.findViewById(R.id.______); 
            holder.btn =(Button) view.findViewById(R.id.button); 
            view.setTag(holder);
        }

    class ViewHolder{
        TextView tv;
        ImageView img;
        Button btn;
    } 
    ```

# ios - 如果我在 iOS 开发中添加了新设备，是否必须从头开始？

> ID：14299782
> 
> 赞同：0
> 
> 时间：2013-01-13T01:30:57.147
> 
> 标签：ios, air, flash-builder

我已经按照本[教程学习](http://help.adobe.com/en_US/flashbuilder/using/WSe4e4b720da9dedb5-2e7310a1136ab7c1811-7fee.html#community)过一次，并且能够在我的 iPhone 上进行测试和调试。现在我连接了另一个我想测试的 iOS 设备。我知道我必须在 Apple Provisioning Portal 添加新设备的 UUID。我继续并成功添加它。既然我已经这样做了，我是否必须从第 1 步重新开始，还是可以跳过几个步骤？

我正在使用 Flash Builder 4.7。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T01:38:12.067

Since the first step requiring your new UDID is step 7, you can skip to there.

The critical step being;

> c. Enter a profile name, select the iOS developer certificate, the App ID, and the UDIDs on which you want to install the application.

# javascript - Javascript - 计算重复的 JSON 值并将计数与关联键一起排序？

> ID：14299783
> 
> 赞同：2
> 
> 时间：2013-01-13T01:31:01.170
> 
> 标签：javascript, json, object, loops, associative-array

> **可能重复：**
> [按属性值对 JavaScript 对象进行排序](https://stackoverflow.com/questions/1069666/sorting-javascript-object-by-property-value)

我想在我的 JSON 中获得一些价值的最佳结果。用这个例子更容易解释：

```
var jsonData = {
  bom: [
        {
            "Component":"Some Thing",
            "Version":"Version ABC",
            "License":"License ABC",
        },
        {
            "Component":"Another Thing",
            "Version":"Version XYZ",
            "License":"License ABC",
        }, 
        etc ....
       ]
} 
```

所以我的目标是确定“License ABC”或其他有 X 次出现，然后我希望能够对这些 key:val 对进行排序以插入到 DOM 中，因为“最流行的 X 许可证是：

*   许可证 ABC - 100
*   许可证 XYZ - 70
*   许可证 123 - 25

现在我有这个：

```
var countResults = function() {
    var fileLicenses = [];

    for ( var i = 0, arrLen = jsonData.files.length; i < arrLen; ++i ) {
        fileLicenses.push(jsonData.files[i]["License"]);
    }

    keyCount = {};
    for(i = 0; i < fileLicenses.length; ++i) {
        if(!keyCount[fileLicenses[i]]) {
            keyCount[fileLicenses[i]] = 0;
        }

        ++keyCount[fileLicenses[i]];
    }

    console.log( keyCount );
}(); 
```

这让我得到了我想要的大部分东西，一个带有键的对象：值

```
{
    thisKey : 78,
    thatKey :125,
    another key : 200,
    another key : 272,
    another key : 45,
    etc ...
} 
```

但我不知道该怎么做。我只需要对右列的数字进行排序，并让相关的键随行。想法？谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-13T01:53:50.077

您不能按对象的值对对象进行排序。您可以做的是将其转换为对象数组并对其进行排序。就像是：

```
var rank = function(items, prop) {

  //declare a key->count table
  var results = {}

  //loop through all the items we were given to rank
  for(var i=0;len=items.length;i<len;i++) {

    //get the requested property value (example: License)
    var value = items[i][prop];

    //increment counter for this value (starting at 1)
    var count = (results[value] || 0) + 1;
    results[value] = count;
  }

  var ranked = []

  //loop through all the keys in the results object
  for(var key in results) {

    //here we check that the results object *actually* has
    //the key. because of prototypal inheritance in javascript there's
    //a chance that someone has modified the Object class prototype
    //with some extra properties. We don't want to include them in the
    //ranking, so we check the object has it's *own* property.
    if(results.hasOwnProperty(key)) {

      //add an object that looks like {value:"License ABC", count: 2} 
      //to the output array
      ranked.push({value:key, count:results[key]}); 
    }
  }

  //sort by count descending
  return ranked.sort(function(a, b) { return b.count - a.count; });
} 
```

用法：

```
var sorted = rank(jsonData.bom, "License");
var first = sorted[0].value; 
```

/代码未测试

# oracle - oracle 在 toad 中使用 ref_cursor 调用 sp

> ID：14299784
> 
> 赞同：0
> 
> 时间：2013-01-13T01:31:01.967
> 
> 标签：oracle, toad

请问哪里出错了？

规格：

```
CREATE OR REPLACE PACKAGE CTI_MATRIX.AMD AS
  TYPE REF_CURSOR IS REF CURSOR;
  PROCEDURE AMD_NEEDMSG (v_CRN IN VARCHAR2, return_recordset OUT REF_CURSOR);
END AMD; 
```

身体：

```
CREATE OR REPLACE PACKAGE BODY CTI_MATRIX.AMD AS
PROCEDURE AMD_NEEDMSG (v_CRN IN VARCHAR2, return_recordset OUT REF_CURSOR)
IS
BEGIN
    -- 
END AMD_NEEDMSG;
END AMD; 
```

来自 TOAD 的失败块：

```
DECLARE 
RETURN_RECORDSET AMD.REF_CURSOR;
BEGIN 
    RETURN_RECORDSET := NULL;
    CTI_MATRIX.AMD.AMD_NEEDMSG ( '123456789', RETURN_RECORDSET );
END; 
```

错误：PLS-00382 表达式类型错误，第 5 行

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T08:42:19.003

您以谁的身份登录？

作为：

```
DECLARE 
RETURN_RECORDSET AMD.REF_CURSOR;
BEGIN 
    RETURN_RECORDSET := NULL;
    CTI_MATRIX.AMD.AMD_NEEDMSG ( '123456789', RETURN_RECORDSET );
END; 
```

是正确的语法，但我看到您在包调用（CTI_MATRIX）上为所有者添加前缀，但不在`RETURN_RECORDSET AMD.REF_CURSOR;`. 如果您以另一个用户的身份调用它，并且该用户也拥有该软件包的副本，`AMD`那么您会收到此错误消息。

也无需分配`NULL`给第 4 行的记录集。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T08:54:33.970

在过程中，第二个参数的类型是“REF_CURSOR”，而在测试 pl/sql 块中，它是“AMD.REF_CURSOR”。检查这两种类型是否相同，我想它们不是。或者更改测试 pl/sql 块，以便像这样定义变量：

```
RETURN_RECORDSET CTI_MATRIX.AMD.REF_CURSOR; 
```

# python - 如何启用自定义组到 django 管理面板

> ID：14299785
> 
> 赞同：0
> 
> 时间：2013-01-13T01:31:12.687
> 
> 标签：python, django, model, panel, admin

我的问题很简单，我在 models.py 中创建了一个自定义用户模型（称为 Staff）

我想知道如何启用这个名为 Staff 的用户模型来使用 django 管理面板换句话说，我如何将 Staff 添加到在管理面板中创建的组中？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T01:43:19.257

There's a `is_staff` flag for users. For your `Staff` class, just have

```
class Staff(User):
    is_staff = True
    ---Everything else---

```

Reference source [django documentation](https://docs.djangoproject.com/en/dev/ref/contrib/auth/#django.contrib.auth.models.User)

If you want to add staff permissions to users, simply click on the `staff` checkbox in the Admin interface.

# cocos2d-iphone - Box2d 径向重力限制 coco2d

> ID：14299787
> 
> 赞同：-1
> 
> 时间：2013-01-13T01:31:52.483
> 
> 标签：cocos2d-iphone, box2d, box2d-iphone, gravity

我一直在使用以下代码进行调整以创建径向重力，

[http://www.vellios.com/2010/06/06/box2d-and-radial-gravity-code/](http://www.vellios.com/2010/06/06/box2d-and-radial-gravity-code/)

现在它工作正常，但我想要它，例如，如果我当前的精灵在精灵的一定距离内，这个代码才会被触发，

我需要一些指南，我没有给世界重力，所以现在我的精灵是漂浮的，但我想像下面这样，

一个精灵在一个项目路径上移动到 X，因为我已经关闭了重力，所以没有重力适用于此。如果这个我们称之为 D 的物体在这条路径上的某个限制范围内，那么径向重力代码就会生效，否则它会继续沿着它的投影路径前进。

有谁知道如何修改此代码来做到这一点，我一直在处理这个问题已经很久了，我似乎无法接近创建一个范围并将此代码应用于它。

```
 // Import the interfaces  
    #import "HelloWorldLayer.h"

    // Needed to obtain the Navigation Controller
    #import "AppDelegate.h"

    #import "PhysicsSprite.h"

    enum {
kTagParentNode = 1,
    };

    CGPoint location;
    CGPoint nodePosition;

    #pragma mark - HelloWorldLayer

    @interface HelloWorldLayer()
    -(void) initPhysics;
    -(void) addNewSpriteAtPosition:(CGPoint)p;
    -(void) createMenu;
    @end

    @implementation HelloWorldLayer

    +(CCScene *) scene
    {
// 'scene' is an autorelease object.
CCScene *scene = [CCScene node];

// 'layer' is an autorelease object.
HelloWorldLayer *layer = [HelloWorldLayer node];

// add layer as a child to scene
[scene addChild: layer];

// return the scene
return scene;
    }

    -(id) init
    {
if( (self=[super init])) {

    // enable events

    self.isTouchEnabled = YES;
    self.isAccelerometerEnabled = YES;
    CGSize s = [CCDirector sharedDirector].winSize;

    // init physics
    [self initPhysics];

    // create reset button
    [self createMenu];

    //Set up sprite

    #if 1
    // Use batch node. Faster
    CCSpriteBatchNode *parent = [CCSpriteBatchNode batchNodeWithFile:@"blocks.png"                      capacity:100];
    spriteTexture_ = [parent texture];
    #else
    // doesn't use batch node. Slower
    spriteTexture_ = [[CCTextureCache sharedTextureCache] addImage:@"blocks.png"];
    CCNode *parent = [CCNode node];
    #endif
    [self addChild:parent z:0 tag:kTagParentNode];

    [self addNewSpriteAtPosition:ccp(s.width/2 - 150, s.height/2)];

    [self scheduleUpdate];
}
return self;
            }

    -(void) dealloc
    {
delete world;
world = NULL;

delete m_debugDraw;
m_debugDraw = NULL;

[super dealloc];
    }   

    -(void) createMenu
    {
// Default font size will be 22 points.
[CCMenuItemFont setFontSize:22];

// Reset Button
CCMenuItemLabel *reset = [CCMenuItemFont itemWithString:@"Reset" block:^(id sender){
    [[CCDirector sharedDirector] replaceScene: [HelloWorldLayer scene]];
}];

CCMenu *menu = [CCMenu menuWithItems:reset, nil];

[menu alignItemsVertically];

CGSize size = [[CCDirector sharedDirector] winSize];
[menu setPosition:ccp( size.width/2, size.height/2)];

[self addChild: menu z:-1]; 
    }

    -(void) initPhysics
    {

CGSize s = [[CCDirector sharedDirector] winSize];

b2Vec2 gravity;
gravity.Set(0.0f, 0.0f);
world = new b2World(gravity);

// Do we want to let bodies sleep?
world->SetAllowSleeping(true);

world->SetContinuousPhysics(true);

m_debugDraw = new GLESDebugDraw( PTM_RATIO );
world->SetDebugDraw(m_debugDraw);

uint32 flags = 0;
flags += b2Draw::e_shapeBit;
//      flags += b2Draw::e_jointBit;
//      flags += b2Draw::e_aabbBit;
//      flags += b2Draw::e_pairBit;
//      flags += b2Draw::e_centerOfMassBit;
m_debugDraw->SetFlags(flags);       

// Define the ground body.
b2BodyDef groundBodyDef;
groundBodyDef.position.Set(0, 0); // bottom-left corner

// Call the body factory which allocates memory for the ground body
// from a pool and creates the ground box shape (also from a pool).
// The body is also added to the world.
b2Body* groundBody = world->CreateBody(&groundBodyDef);

// Define the ground box shape.
b2EdgeShape groundBox;      

// bottom

groundBox.Set(b2Vec2(0,0), b2Vec2(s.width/PTM_RATIO,0));
groundBody->CreateFixture(&groundBox,0);

// top
groundBox.Set(b2Vec2(0,s.height/PTM_RATIO),            b2Vec2(s.width/PTM_RATIO,s.height/PTM_RATIO));
groundBody->CreateFixture(&groundBox,0);

// left
groundBox.Set(b2Vec2(0,s.height/PTM_RATIO), b2Vec2(0,0));
groundBody->CreateFixture(&groundBox,0);

// right
groundBox.Set(b2Vec2(s.width/PTM_RATIO,s.height/PTM_RATIO), b2Vec2(s.width/PTM_RATIO,0));
groundBody->CreateFixture(&groundBox,0);

b2CircleShape shape;
shape.m_radius = 0.5f;
shape.m_p.Set(8.0f, 5.0f);
b2FixtureDef fd;
fd.shape = &shape;
planet = groundBody->CreateFixture(&fd);

    }

    -(void) draw
    {
//
// IMPORTANT:
// This is only for debug purposes
// It is recommend to disable it
//
[super draw];

ccGLEnableVertexAttribs( kCCVertexAttribFlag_Position );

kmGLPushMatrix();

world->DrawDebugData(); 

kmGLPopMatrix();
    }

    -(void) addNewSpriteAtPosition:(CGPoint)p
    {
CCLOG(@"Add sprite %0.2f x %02.f",p.x,p.y);
CCNode *parent = [self getChildByTag:kTagParentNode];

//We have a 64x64 sprite sheet with 4 different 32x32 images.  The following code is
//just randomly picking one of the images
int idx = (CCRANDOM_0_1() > .5 ? 0:1);
int idy = (CCRANDOM_0_1() > .5 ? 0:1);
PhysicsSprite *sprite = [PhysicsSprite spriteWithTexture:spriteTexture_ rect:CGRectMake(16 * idx,16 * idy,16,16)];
[parent addChild:sprite];

sprite.position = ccp( p.x, p.y);

// Define the dynamic body.
//Set up a 1m squared box in the physics world
b2BodyDef bodyDef;
bodyDef.type = b2_dynamicBody;
bodyDef.position.Set(p.x/PTM_RATIO, p.y/PTM_RATIO);
b2Body *body = world->CreateBody(&bodyDef);

// Define another box shape for our dynamic body.
b2PolygonShape dynamicBox;
dynamicBox.SetAsBox(.3f, .3f);//These are mid points for our 1m box

// Define the dynamic body fixture.
b2FixtureDef fixtureDef;
fixtureDef.shape = &dynamicBox; 
fixtureDef.density = 2.0f;
fixtureDef.friction = 0.3f;
body->CreateFixture(&fixtureDef);

[sprite setPhysicsBody:body];

        b2Vec2 currentPosition = body->GetPosition();
        b2Vec2 desiredPosition;
        desiredPosition.Set(467.0f/PTM_RATIO, 169.0f/PTM_RATIO);

        b2Vec2 necessaryMovement = desiredPosition - currentPosition;
        float necessaryDistance = necessaryMovement.Length();
        necessaryMovement.Normalize();
        float forceMagnitude = b2Min(150.0f, necessaryDistance *PTM_RATIO /2);
        b2Vec2 force = forceMagnitude * necessaryMovement;
        body->ApplyForce( force, body->GetWorldCenter() );

    }

    -(void) update: (ccTime) dt
    {
//It is recommended that a fixed time step is used with Box2D for stability
//of the simulation, however, we are using a variable time step here.
//You need to make an informed choice, the following URL is useful
//http://gafferongames.com/game-physics/fix-your-timestep/

int32 velocityIterations = 8;
int32 positionIterations = 1;

// Instruct the world to perform a single step of simulation. It is
// generally best to keep the time step and iterations fixed.
world->Step(dt, velocityIterations, positionIterations);

for (b2Body* b = world->GetBodyList(); b; b = b->GetNext())
{
    b2Body* ground = planet->GetBody();
    b2CircleShape* circle = (b2CircleShape*)planet->GetShape();
    // Get position of our "Planet"
    b2Vec2 center = ground->GetWorldPoint(circle->m_p);
    // Get position of our current body in the iteration
    b2Vec2 position = b->GetPosition();
    // Get the distance between the two objects.
    b2Vec2 d = center - position;
    // The further away the objects are, the weaker the gravitational force is
    float force = 0.0f / d.LengthSquared(); // 150 can be changed to adjust the amount of force
    d.Normalize();
    b2Vec2 F = force * d;
    // Finally apply a force on the body in the direction of the "Planet"
    b->ApplyForce(F, position);

    if (b->GetUserData() != NULL) {
        CCSprite *myActor = (CCSprite*)b->GetUserData();
        myActor.position = CGPointMake( b->GetPosition().x * PTM_RATIO, b->GetPosition().y * PTM_RATIO);
        myActor.rotation = -1 * CC_RADIANS_TO_DEGREES(b->GetAngle());
    }   
}

    }

    - (void)ccTouchesEnded:(NSSet *)touches withEvent:(UIEvent *)event
    {
//Add a new body/atlas sprite at the touched location
for( UITouch *touch in touches ) {
    location = [touch locationInView: [touch view]];

    location = [[CCDirector sharedDirector] convertToGL: location];

    nodePosition = [self convertToNodeSpace: location];

    [self addNewSpriteAtPosition: location];
}
    }

    @end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T03:46:58.633

你没有对你的身体施加任何力量。

```
float force = 0.0f / d.LengthSquared(); 
```

无论 d 的值如何，它总是为零。

这是线性重力井的简单公式。这当然不是重力的真正运作方式，但它可能足以满足您的需求。

如果要在某个最大距离 maxDistance 处施加零力，在零距离处施加最大力 maxForce，则力的大小很简单：

```
Force = maxForce * (maxDistance - d)/maxDistance; 
```

因此，当 d = maxDistance 时，力为 0，而当 d = 0 时，力 = maxForce。

就像我说的，这不是真正的重力是如何工作的，因为实际上重力与距离的平方成正比，所以如果这对您不起作用，您可能需要进行实验。

# json - 您如何在 Ember Data 中实现关联？

> ID：14299797
> 
> 赞同：1
> 
> 时间：2013-01-13T01:32:43.963
> 
> 标签：json, ember.js, ember-data, tastypie

我正试图围绕 Ember Data（版本 11）展开思考，但对如何实现记录之间的关联感到困惑。问题的本质是，当我打电话时，`find`我得到了关联字段的 DS.Model 实例数组，但除了“id”属性之外，它们没有填充任何数据。导致问题，如果我检查`Page.get('pictures').toArray()[0].get('text')`，例如，我得到空值。

环境：

后端，Django + Django REST

模型：

```
class Page( models.Model ):
    text = models.CharField( max_length=30, null=True, blank=True ) 
    picture = models.ManyToManyField( 'Picture', related_name='pictures', null=True, blank=True )

class Picture( models.Model ):
    caption = models.CharField( max_length=30, null=True, blank=True ) 
    page = models.ForeignKey( Page, related_name='page' , null=True, blank=True ) 
```

适配器中的`find`功能非常标准：

```
 find: function(store, type, id) {
        var json = {}
        , root = this.rootForType(type);

        this.ajax(this.buildURL(root, id), "GET", {
            success: function(pre_json) {
                json[root] = pre_json;

                console.log( json )
                Ember.run(this, function(){
                    this.didFindRecord(store, type, json, id);
                });
            }
        });

    }, 
```

所以我猜在序列化程序的某个地方我应该描述应该如何实现关联？但是我该怎么做呢？我尝试使用此处找到的序列化程序： [https](https://github.com/escalant3/ember-data-tastypie-adapter) ://github.com/escalant3/ember-data-tastypie-adapter ，但似乎无法使其工作。

# c# - byte[] 到 BitmapImage 的转换失败

> ID：14299802
> 
> 赞同：2
> 
> 时间：2013-01-13T01:33:15.343
> 
> 标签：c#, wpf, image, bitmapimage

我有个问题。我想转换`BitmapImage`成`byte[]`数组并返回。

我写了这些方法：

```
public static byte[] ToByteArray(this BitmapImage bitmapImage)
{
    byte[] bytes;
    using (MemoryStream ms = new MemoryStream())
    {
        bitmapImage.BeginInit();
        bitmapImage.CacheOption = BitmapCacheOption.OnLoad;
        bitmapImage.StreamSource.CopyTo(ms);
        bitmapImage.EndInit();
        bytes = ms.ToArray();
    }
    return bytes;
}

public static BitmapImage ToBitmapImage(this byte[] bytes, int width, int height)
{
    BitmapImage bitmapImage = new BitmapImage();
    using (MemoryStream ms = new MemoryStream(bytes))
    {
        ms.Position = 0;
        bitmapImage.BeginInit();
        bitmapImage.CacheOption = BitmapCacheOption.OnLoad;
        bitmapImage.StreamSource = ms;
        bitmapImage.EndInit(); // HERE'S AN EXCEPTION!!!
    }
    return bitmapImage;
} 
```

第一个工作正常，但是当我尝试从转换为时，`byte[]`我`BitmapImage`得到了`NotSupportedException`……为什么？如何更正第二种方法的代码？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-13T10:18:23.793

`ToByteArray`你的方法有两个问题。

首先它调用`BeginInit`和`EndInit`一个已经初始化的 BitmapImage 实例。这是不允许的，请参阅[BeginInit中的](http://msdn.microsoft.com/en-us/library/system.windows.media.imaging.bitmapimage.begininit.aspx)*例外*列表。

其次，无法在从 Uri 而不是 Stream 创建的 BitmapImage 上调用该方法。那么`StreamSource`属性将是`null`。

我建议实现如下所示的方法。此实现适用于任何 BitmapSource，而不仅仅是 BitmapImages。您可以通过选择适当的[BitmapEncoder](http://msdn.microsoft.com/en-us/library/system.windows.media.imaging.bitmapencoder.aspx)来控制图像格式，例如，`JpegBitmapEncoder`而不是`PngBitmapEncoder`.

```
public static byte[] ToByteArray(this BitmapSource bitmap)
{
    var encoder = new PngBitmapEncoder(); // or any other encoder
    encoder.Frames.Add(BitmapFrame.Create(bitmap));

    using (var ms = new MemoryStream())
    {
        encoder.Save(ms);
        return ms.ToArray();
    }
} 
```

此方法返回的图像缓冲区`ToByteArray`始终可以通过您的`ToBitmapImage`方法转换回 BitmapImage。

请注意，您的`ToBitmapImage`方法的宽度和高度参数当前未使用。

* * *

更新

解码方法的替代实现如下所示，尽管它不返回 BitmapImage，而仅返回基类 BitmapSource 的实例。但是，您可以将返回类型更改为[BitmapFrame](http://msdn.microsoft.com/en-us/library/system.windows.media.imaging.bitmapframe.aspx)。

```
public static BitmapSource ToBitmapImage(this byte[] bytes)
{
    using (var stream = new MemoryStream(bytes))
    {
        var decoder = BitmapDecoder.Create(stream, BitmapCreateOptions.None, BitmapCacheOption.OnLoad);
        return decoder.Frames[0];
    }
} 
```

# macos - 我在哪里可以找到 OSX 支持的所有表情符号的列表

> ID：14299803
> 
> 赞同：1
> 
> 时间：2013-01-13T01:33:22.980
> 
> 标签：macos, cocoa, unicode, emoji

我可以调用任何 Cocoa API 来获取 Emoji 及其名称吗？是否有在线参考，其中包含 plist 中名称中的所有表情符号？是否有可用于列出 Emoji 的 Cocoa 库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T01:43:10.373

Take a look at the following project.

It has some classes where all emoji are classified by type.

Here is the URL:

[https://github.com/limejelly/Emoji](https://github.com/limejelly/Emoji)

# python - SyntaxError：变量名中的无效语法[i]

> ID：14299806
> 
> 赞同：1
> 
> 时间：2013-01-13T01:34:01.243
> 
> 标签：python, syntax

环境：Windows 7 Python2.7 Eclipse SDK 3.7.2

尝试遵循[http://www.youtube.com/watch?v=Z-HpXbhVuGo](http://www.youtube.com/watch?v=Z-HpXbhVuGo)中的教程 我收到一条错误消息：

============================== 错误==================== ========= Traceback（最近一次调用最后一次）：文件“C:\eclipse\plugins\org.python.pydev_2.7.1.2012100913\pysrc\pydev_runfiles.py”，第 432 行，在**get_module_from_str mod = __import** (modname) 文件“C:\Users\lenovo\workspace\assignment3\fileiotest.py”，第 17 行 print(bestStudent[i] + ' 得分 ' + i) ^ SyntaxError: invalid syntax ERROR: Module: fileiotest could not被导入（文件：C:/Users/lenovo/workspace/assignment3/fileiotest.py）。

..................................................... ……………………………………………………………………………………………………………………………………

```
#-*- coding: utf8 -*-
from __future__ import print_function

bestStudent = {}
f = open ("C:/Users/lenovo/workspace/assignment3/studentgrades.txt")
for line in f:
    name, grade = line.split()
    bestStudent[grade] = name

f.close()

bestStudentStr= "" 

for i in sorted(bestStudent.keys(), reverse=True):
    print bestStudent[i] + 'scored a ' + i
bestStudentStr += bestStudent[i] + ‘ scored a ‘ + i + ‘\n’

bestStudentStr = ‘\nThe Best Students Ranked\n\n’ + bestStudentStr

print(bestStudentStr)

outToFile = open(‘studentrank.txt’, mode=’w', encoding='utf-8′)
outToFile.write(bestStudentStr)

outToFile.close()

print(‘Finished update’) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T01:57:44.373

非ASCII字符被替换：

```
from __future__ import print_function

bestStudent = {}
f = open ("C:/Users/lenovo/workspace/assignment3/studentgrades.txt")
for line in f:
    name, grade = line.split()
    bestStudent[grade] = name

f.close()

bestStudentStr= "" 

for i in sorted(bestStudent.keys(), reverse=True):
    print bestStudent[i] + "scored a " + i
bestStudentStr += bestStudent[i] + " scored a " + i + "\n"

bestStudentStr = "\nThe Best Students Ranked\n\n" + bestStudentStr

print(bestStudentStr)

outToFile = open("studentrank.txt", mode="w", encoding="utf-8")
outToFile.write(bestStudentStr)

outToFile.close()

print("Finished update") 
```

当您从 pdf、doc 等文件复制源代码时会发生这种情况。最好的解决方案是在不支持 unicode 的文本编辑器中复制/粘贴，然后您会看到`?`标记有什么问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T01:53:14.210

# ember.js - 如何通过在 ember 中按下后退按钮从插座中删除视图？

> ID：14299811
> 
> 赞同：3
> 
> 时间：2013-01-13T01:35:30.530
> 
> 标签：ember.js, ember-old-router

使用当前版本的 ember 路由器，您可以像这样定义路由处理程序：

```
App.HomeRoute = Ember.Route.extend({
  renderTemplate: function() {
    this.render('home', {into: "application", outlet: "body"});
  }
}); 
```

较旧的版本将允许您断开视图与出口状态的出口断开连接，如下所示：

```
exit: function(router){
  router.get('applicationController').disconnectOutlet('chatroom');
} 
```

但是，从路由器 v2 开始，disconnectOutlet 方法不再起作用（我假设是因为它与 connectOutlet(s) 方法混为一谈。

那么你现在如何断开视图呢？您是否应该将空白模板渲染到插座中？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-13T02:08:14.637

这实际上应该“正常工作”。

在退出路线时，[Ember 撕下视图](https://github.com/emberjs/ember.js/blob/master/packages/ember-routing/lib/system/route.js#L7-L9)。但是，`exit`它不再是一个公共钩子，并且因为您没有调用`super`，所以您对如何拆除视图的错误猜测正在破坏内置行为！

如果您删除`exit`呼叫，一切都应该按您的预期工作。

# php - PDO 通过 MSSQL_* 函数连接到 MSSQL

> ID：14299813
> 
> 赞同：9
> 
> 时间：2013-01-13T01:35:40.540
> 
> 标签：php, database, sybase

有一个范围`mssql_*`不在折旧过程中。

它们的工作方式与`mysql_*`函数相同；他们需要我手动转义，请在下面找到手册的链接：

[http://uk1.php.net/manual/en/book.mssql.php](http://uk1.php.net/manual/en/book.mssql.php)

MSSQL_* 函数是其中的一部分，`php5-mssql`但现在已移入`php5-sybase`

此外，为您的数据库构造使用 PDO 是可用的，但是是**实验性的** [http://php.net/manual/en/ref.pdo-dblib.php](http://php.net/manual/en/ref.pdo-dblib.php)

但我的总体问题是，从 PDO/MySQLI 被推为主要数据库通信解决方案这一事实来看，我是否应该停止使用这些功能`mssql_*`

或者是否有可能：

PDO 连接：

```
$dsn = 'mssql:host=localhost;dbname=testdb';
$user = 'dbuser';
$password = 'dbpass';

try {
    $dbh = new PDO($dsn, $user, $password);
} catch (PDOException $e) {
    echo 'Connection failed: ' . $e->getMessage();
} 
```

但是如果这个过程仍然被列为实验性的，如果开发人员使用`Microsoft SQL Server`他们的数据库，等到这个扩展*对于 MSSQL 服务器是稳定的*

所以归根结底，PDO 扩展或 MSSQL_* 函数，即使它们没有折旧。如果是这样，为什么？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-30T17:30:44.003

## 我自己的意见

我已经使用`PDO`连接到`MSSQL`数据库一年多了，到目前为止我没有发现任何问题。

事实上，我`mssql_*`在迁移到 之前研究了使用这些函数`PDO`，并得出结论，它们是一种不太可靠，更不用说连接到`MSSQL`数据库的不安全方式。

## 逻辑上

从逻辑的角度来看，`PDO`这也是更好的选择，因为它只需对代码进行一些调整即可`MSSQL`从`MySQL`.

我为 PDO 类编写了一个包装类，它使连接这些数据库变得非常容易。

以此为例：

```
<?php

// +------------------------------------------------------------------------+
// | class.mssql.php                                                        |
// +------------------------------------------------------------------------+
// | Copyright (c) Company Ltd 2013\. All rights reserved.                   |
// | Version       1.0                                                      |
// | Last modified 30/01/2013                                               |
// | Email         email@company.co.uk                                      |
// | Web           http://www.company.co.uk                                 |
// +------------------------------------------------------------------------+

// Make sure the SQL class is included
require_once("class.sql.php");

/*
 * Class mssql
 *
 * @version   1.0
 * @author    Ben Carey <email@company.co.uk>
 * @copyright Company Ltd
 *
*/

class mssql extends sql{

    /**
     * Initialize the object and set/reset all variables
     *
     * This function is called when the object is constructed
     *
     * @access private
     */
    function __construct(&$memcache){

        // Call the sql construct
        parent::__construct($memcache);

        // Global MsSQL defaults
        $this->query_escaper_left               = "[";
        $this->query_escaper_right          = "]";
        $this->connection_engine                = "sqlsrv";
        $this->connection_parameter_host        = "server";
        $this->connection_parameter_database    = "Database";
        $this->select_db_function               = "db_name()";
    }
}

?> 
```

任何唯一的东西都`MSSQL`在这个扩展中定义，然后传递给父类`class.sql.php`。PDO 的美妙之处在于，`class.sql.php`无需以任何方式更改文件中的代码即可与任何数据库（或迄今为止我尝试过的所有数据库）一起使用。

因此，这里只需要为每种数据库类型做一个小扩展，它就可以工作。

而对于本机`mssql_*`函数，如果您出于任何特定原因决定更改数据库，则必须重写所有内容。更不用说，鉴于`mysql_*`现在不推荐使用这些功能，无论如何您都必须为 MySQL 使用 PDO。

## 我的 PDO 测试

我一直在使用`INPUT PARAMETERS`, `OUTPUT PARAMETERS`, `INOUT PARAMETERS`, 在包含 100,000,000 多条记录的数据库上运行复杂的存储过程。这些工作绝对完美无缺，并将继续这样做！

## 参考

不使用这些`mssql_*`函数的另一个原因是 PHP 5.3 或更高版本的 Windows 不再支持它们：

**[看这里](http://uk1.php.net/manual/en/intro.mssql.php)**

SyBase 扩展与函数属于同一类别`mssql_*`。它们是程序性的，不切实际的，根本不便携！

## 功能性

乍一看，我注意到这些扩展中没有一个具有与该功能等效的`mysql_real_escape_string()`功能。而在 PDO 中，不需要这样做

## 结论

不用说，我是一个道德的 PDO 支持者（这只是在使用它 1 年后才出现的！）。这并不是说我不会在`mssql_*`功能上听取其他人的意见，只是很难说服我，而且我认为大多数人，这些功能甚至可以与 PDO 竞争。

总而言之，在我看来，PDO 是前进的方向，原因如下：

1.  它非常便携，可以用最少的代码轻松切换到不同的数据库
2.  它是安全的，不需要像`mysql_real_escape_string()`
3.  它正在迅速成为开发人员的常态
4.  如果您没有面向对象编程的经验，那么这是一个很好的介绍
5.  它预装了大多数 PHP 包
6.  它可以轻松执行复杂的查询，包括存储过程
7.  **在使用 MySQL 数据库对旧的已弃用`mysql_*`函数进行基准测试后，事实证明它在很多情况下（即使不是所有情况）都更快。**-**[看这里](https://stackoverflow.com/questions/9770560/is-the-pdo-library-faster-than-the-native-mysql-functions)**

不久前我问了一个类似的问题，得出了同样的结论：

**[看这里](https://stackoverflow.com/questions/9716476/php-mssql-pdo-or-api)**

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-13T01:44:51.923

This could spark up a good debate. I guess the only way to test the stability of the PDO functions towards Microsoft SQL Servers, is to setup your own local testing zone and push the PDO Class to its abilities.

As you said, php5-sybase contains MSSQL Functions and are not in the deprecation process.

I guess it's down to what the developer feels comfortable with.

If you're happy with MSSQL_* Functions, then go ahead and use them, but there could be a possibility they will end up getting deprecated from PHP altogether in the near future -- it's happening with MySQL Functions.

Although, if you're looking for a change and new challenges, with added security from SQL Injection, then go ahead and try out the PDO compatibility with MSSQL Servers.

It's entirely down to you.

From my preference & and guess many other developers preference, I would say go for the PDO functions. I assume it would work as normal.

```
<?php
$dsn = 'mssql:host=localhost;dbname=testdb';
$user = 'dbuser';
$password = 'dbpass';

try {
    $dbh = new PDO($dsn, $user, $password);
} catch (PDOException $e) {
    echo 'Connection failed: ' . $e->getMessage();
}

$Query = $dbh->prepare("SELECT * FROM Tbl WHERE `ID` = :id");
$Query ->bindParam(':id', $ID, PDO::PARAM_INT);
$Query->execute();

// etc..
?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-02-14T06:54:39.637

PDO 绝对是要走的路，对于 linux 用户，我强烈建议使用 sybase 连接器和 dblib DSN。

对于使用 PHP7 的 ubuntu 用户，它将是：

```
sudo apt-get install php-sybase freetds-common libsybdb5 
```

对于连接：

```
$db = new PDO("dblib: host=$hostname:$port; dbname=$dbname", $dbuser, $dbpassword); 
```

你应该很高兴。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-26T22:50:55.207

考虑到安全性，PDO 是显而易见的选择。PDO 代码是可移植的——可以调整它以将信息发送到多个数据库，而无需更改函数调用，只需更改几个参数。

MSSQL 类不像 PDO 那样可移植。

PDO 对准备好的语句有很好的支持，而 MSSQL 则没有。PDO 充当抽象层，很像 Java 中的 JDBC，并且是可移植的。PDO 支持事务，更适合处理错误

希望答案是显而易见的！

# mysql - MySQL试图避免日期时间顺序上的联合

> ID：14299817
> 
> 赞同：0
> 
> 时间：2013-01-13T01:36:13.917
> 
> 标签：mysql, sql, database

我的查询当前使用两个选择语句之间的联合。我试图避免联合。我想获取不大于现在升序的所有时间的日期时间，并将过期时间放在查询的底部。目前它是这样设置的：

```
(select * 
from 
  users 
where date > now() 
goup by users) 
union 
(select * 
 from users 
 where date < now() 
 group by users order by desc) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T01:54:20.000

> 我想获取不大于现在升序的所有时间的日期时间，并在查询底部显示过期时间

这听起来就像您想要查询升序日期。显然，该查询看起来像：

```
SELECT * FROM users ORDER BY date 
```

如果您想区分升序日期列表和过期日期列表，我建议您只使用两个不同的查询，例如：

```
-- ascending list of date not greater than now()
SELECT * FROM users WHERE date <= now() ORDER BY date

-- list of expired dates
SELECT * FROM users WHERE date > now() ORDER BY date desc 
```

如果我理解你的问题是错误的，请告诉我。

# javascript - 在 d3 中将星期几显示为刻度

> ID：14299818
> 
> 赞同：1
> 
> 时间：2013-01-13T01:36:19.170
> 
> 标签：javascript, d3.js

我有一个数据集，它根据特定数字输出星期几（0-6），我绘制数字（y 轴）与星期几（x 轴）。如何让 d3 将 0-6 值映射到星期几（周日至周六）？

数据（第一行）：

```
airline,dayoftheweek,cost
Transavia,1,195 
```

![在此处输入图像描述](../Images/df113a4dc28f433c3080575d4c387917.png)

我试过了

```
var xAxis = d3.svg.axis()
        .scale(x)
        .ticks(6)
        .tickSubdivide(true)
        .tickSize(6, 3, 0)
        .tickFormat(d3.time.format("%A"))
        .orient("bottom"); 
```

但由于第一个值是 0，它似乎认为它对应于 1970-01-01，显然是星期四，并且不显示其他任何内容。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-13T02:53:07.777

结果很简单：

```
var week = ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"]; 
```

使用刻度格式：

```
.tickFormat(function(d, i){
    return week[d]
}) 
```

# c# - ListBox - 我需要删除一个项目，但它不断重复它们

> ID：14299820
> 
> 赞同：0
> 
> 时间：2013-01-13T01:36:39.273
> 
> 标签：c#, listbox

我正在使用 C#。我的问题是关于一个不想听的讨厌的列表框。

代码：

```
 void client_UserAvailable(object sender, IMAvailEventArgs e)
    {
        this.BeginInvoke(new MethodInvoker(delegate
        {
            if (listBoxContacts.Items != null)
            {
                string available = "";
                if (e.IsAvailable)
                    available = "Online";
                else
                    available = "Offline";

                if (listBoxContacts.Items.Count <= 0 || !listBoxContacts.Items.Contains(e.UserName))
                    listBoxContacts.Items.Add(e.UserName + " " + available);
                else
                {
                    for (int i = 0; i < listBoxContacts.Items.Count; i++)
                    {
                        string _user = (string)listBoxContacts.Items[i];
                        _user.Replace(_user, e.UserName + " " + available);
                    }
                }
            }
        }));
    } 
```

运行该事件后，如果 ListBox 的项目计数小于或等于 0 或 ListBox.Items 不包含用户名，它将将用户名添加到列表中。如果它包含用户名或计数更大，它将在 for 循环中更新用户状态。

但是，当尝试替换该值时，它只是复制它。我还尝试在 '_user.Replace(_user, e.UserName + " " + available);' 下面添加一个 'Remove(_user)'，但它只是重复。

我可以通过在我的计时器内添加一个“ListBox.Items.Clear”来解决这个问题，该计时器以 5 秒的间隔更新 ListBox：

```
 private void timer_Tick(object sender, EventArgs e)
    {
        if (isOnline)
        {
            if (listBoxContacts.Items != null)
            {
                foreach (string user in friends)
                {
                    listBoxContacts.Items.Clear();
                    client.IsAvailable(user);
                    if (infoWindow != null)
                    {
                        infoWindow.Close();
                        infoWindow = null;
                    }
                }
            }
        }
    } 
```

但是，ListBox 项目闪烁。我不想让它眨眼，所以我正在寻找替代品。我搜索了很多相关的问题，但没有一个是成功的。帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T02:05:00.387

根据评论，第一个问题似乎是这个子句：

```
!listBoxContacts.Items.Contains(e.UserName) 
```

如果现有项目始终是用户名 +（空格）+可用性，则该子句将始终返回 false，因此始终触发添加新条目。您应该将该子句更改为：

```
(!listBoxContacts.Items.Contains(e.UserName + " Online" ) && !listBoxContacts.Items.Contains(e.UserName + " Offline")) 
```

下一个问题是循环 - 看起来您最终会尝试更新列表中每个人的状态，而不仅仅是与事件相关的特定用户。

最后，您不会替换列表框中的现有值。

您可能需要执行以下操作：

```
string currentItem = listBoxContacts.Items[i];
if(currentItem.Contains(e.UserName))
{
    listBoxContacts.Items[i] = e.UserName + " " + available;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T02:01:40.523

问题是在你使用[`String.Replace`](http://msdn.microsoft.com/en-us/library/system.string.replace%28v=vs.110%29.aspx)的方法返回一个字符串它不会改变原始字符串。

从上面的链接：

> 返回一个新字符串，其中当前字符串中出现的所有指定 Unicode 字符或字符串都替换为另一个指定的 Unicode 字符或字符串。

所以我会做类似的事情：

```
listBoxContacts.Items[i] = _user.Replace(_user, e.UserName + " " + available); 
```

* * *

您将不得不在`for`语句中检查用户名，否则您将在列表中重复用户名

像这样的东西：

```
for (int i = 0; i < listBoxContacts.Items.Count; i++)
{
    if (((string)listBoxContacts.Items[i]).Contains(e.UserName))
    {
        listBoxContacts.Items[i] =  e.UserName + " " + available;
        break;
    }

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-13T02:02:29.713

replace 方法不会更改 _user，因为字符串是不可变的，您应该使用

```
_user = _user.Replace(_user, e.UserName + " " + available); 
```

# html - 悬停不同链接时的图像变化

> ID：14299823
> 
> 赞同：1
> 
> 时间：2013-01-13T01:37:31.490
> 
> 标签：html, css, mousehover, onhover

我发现了这一点：[将鼠标悬停在文本链接上以更改图像](https://stackoverflow.com/questions/5590878/hover-on-text-link-to-change-image)，它解释了如何使用 jQuery 执行此操作。

没有jQuery或javascript有什么办法吗？

这可以只用 html/css 来完成吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T01:45:54.370

使用 CSS：

```
.myClass {
background-image:url(image1.jpg);
}

.myClass:hover {
background-image:url(image2.jpg);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T02:55:49.533

即使你可以用 CSS 做到这一点，它也会非常混乱。为什么不改用 jQuery 或 Javascript？

在 jQuery 中，尝试使用[.hover()](http://api.jquery.com/hover/)鼠标事件。

你可能会从这样的事情开始（伪代码）：

```
$(".linkclass").hover(
  function () {
    $(.imageclass).css('background-image','image.jpg');
  },
  function () {
    $(.imageclass).css('background-image','image2.jpg');
  }
); 
```

# java - How to extract part of a string?

> ID：14299825
> 
> 赞同：0
> 
> 时间：2013-01-13T01:37:34.027
> 
> 标签：java, string

> **Possible Duplicate:**
> [How to get file name without the extension?](https://stackoverflow.com/questions/924394/how-to-get-file-name-without-the-extension)

I have a list of xml files and I'm trying to return just the file name without the extension. For example, if I have:

```
String filename = "hello.xml"; 
```

How would I return just "hello" with the fact the file names vary?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T01:41:53.810

```
String filenameSansExt = filename.replaceAll("\\.[^.]*", ""); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T01:50:54.937

使用`substring()`比使用`replaceAll()`正则表达式或任何其他正则表达式更有效。

两个答案都不太令人满意：

*   正则表达式太慢，但正确
*   `lastIndexOf()``'.'`不存在时会抛出异常（索引`-1`）

正确答案必须检查索引`lastIndexOf()`。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-13T01:47:58.987

您可以在 java 中对字符串使用 substring 函数。您将从 0（字符串的开头）开始并在第 4 个到最后一个字符（“。”）之前结束

```
String filename = "hello.xml";
String filename2 = filename.substring(0, filename.length() - 4); 
```

# .net - MongoDB内嵌文档删除

> ID：14299833
> 
> 赞同：2
> 
> 时间：2013-01-13T01:39:54.077
> 
> 标签：.net, vb.net, mongodb, mongodb-.net-driver, mongodb-query

我一直在 MongoDB 上做实验。收集如下（[样本](http://docs.mongodb.org/manual/tutorial/model-embedded-one-to-many-relationships-between-documents/)）。项目[这个](https://github.com/bbilginn/Mongodb.Net)，在[这个](https://github.com/bbilginn/Mongodb.Net/blob/master/Mongodb-Net/Mongodb-Net/Models/Manager.vb)类的第95`DeleteAlbum`行有这个功能。

```
{
    "_id": {
        "$oid": "50e34afce4b0bc114fea2a7e"
    },
    "Ad": "Tarkan", //Artist
    "Albums": [
        {
            "_id": {
                "$oid": "50e34afce4b0bc114fea2a4e"
            },
            "Isim": "DUDU", //Name
            "Yil": 2005, //Year
            "Resim": "http://www.gercekpop.com/wp-content/uploads/2003/12/tarkan-dudu.jpg" //Image
        },
        {
            "_id": {
                "$oid": "50e34afce4b0bc114fea2a3e"
            },
            "Isim": "Kuzu Kuzu",
            "Yil": 2008,
            "Resim": "http://o.scdn.co/300/bf6423177c32224f25dc742f3ffe5450e441d68d"
        }
    ]
} 
```

函数中的第 75 行`Add`方法`CreateAlbum`正在工作。

```
 Artist.Albums.Add(Album)
 Return Collection.Save(Artist, SafeMode.True).Ok 
```

但`Remove`方法`DeleteAlbum`不起作用。

```
Artist.Albums.Remove(album)
Return Collection.Save(sanatci, SafeMode.True).Ok 
```

删除嵌入文档的方法应该是什么？感谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-19T01:44:38.890

以下是如何从`Albums`包含它的第一个文档的数组中删除一个元素`_id`（在 C# 中）：

```
var query = Query.EQ("Albums._id", new ObjectId("50e34afce4b0bc114fea2a4e"));
var update = Update.Pull("Albums", new BsonDocument(){
    { "_id", new ObjectId("50e34afce4b0bc114fea2a4e") }
});
collection.Update(query, update); 
```

我不精通 VB，但是您的`DeleteAlbum`方法应该更改为：

```
Public Function DeleteAlbum(Artist As Sanatci, album As Album) As Boolean
    Try
        Return Collection.Update(
            Query.EQ("Albums._id", album._id),
            Update.Pull("Albums", Query.EQ("_id", album._id)), SafeMode.True
        ).Ok
    Catch ex As MongoCommandException
        Dim msgLog As String = ex.Message
        Return False
    End Try
End Function 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T04:07:12.033

Mongo 不像 Linq-to-SQL 或实体框架。而不是调用 Artist.Albums.Remove(album) 然后尝试将对象的新状态保存到集合中，您需要调用集合的 .Remove() 函数。

本文展示了如何在 C# 中执行此操作：

[如何使用 MongoDB 的官方 C# 驱动程序按“ID”删除一个“文档”？](https://stackoverflow.com/questions/8867032/how-to-remove-one-document-by-id-using-the-official-csharp-driver-for-mongo)

# angularjs - 如何使用 angularjs 检查表单有效性？

> ID：14299834
> 
> 赞同：82
> 
> 时间：2013-01-13T01:40:09.373
> 
> 标签：angularjs

我对 angularjs 很陌生。假设我的应用程序有一个表单。使用检查器，我注意到如果 angularjs 认为表单无效，它会在表单中添加一个 ng-invalid 类。迷人的。

所以似乎为了检查表单是否有效，我需要用 Jquery 选择器污染我的代码？！在不使用表单控制器的情况下，指示表单有效性的 angularjs 方法是什么？

* * *

## 回答 #1

> 赞同：150
> 
> 时间：2013-01-13T02:25:04.930

当您`<form>`在 ngApp 中放置标签时，AngularJS 会自动添加表单控制器（实际上有一个指令，称为`form`添加必要行为）。name 属性的值将绑定在您的范围内；所以类似的东西`<form name="yourformname">...</form>`会满足：

> 表单是 FormController 的一个实例。可以选择使用 name 属性将表单实例发布到范围中。

因此，要检查表单有效性，您可以检查`$scope.yourformname.$valid`范围属性的值。

您可以在[开发人员指南部分](http://docs.angularjs.org/guide/forms)获取有关表单的更多信息。

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2014-10-01T10:18:53.990

例子

```
<div ng-controller="ExampleController">
  <form name="myform">
   Name: <input type="text" ng-model="user.name" /><br>
   Email: <input type="email" ng-model="user.email" /><br>
  </form>
</div>

<script>
  angular.module('formExample', [])
    .controller('ExampleController', ['$scope', function($scope) {

     //if form is not valid then return the form.
     if(!$scope.myform.$valid) {
       return;
     }
  }]);
</script> 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2015-09-26T18:20:50.390

你也可以使用`myform.$invalid`

例如

```
if($scope.myform.$invalid){return;} 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2015-05-05T17:04:04.253

**形式**

*   模块 ng 中的指令 实例化 FormController 的指令。

如果指定了 name 属性，则表单控制器以该名称发布到当前范围。

**别名：ngForm**

在 Angular 中，表单可以嵌套。这意味着当所有子表单都有效时，外部表单也有效。但是，浏览器不允许嵌套元素，因此 Angular 提供了 ngForm 指令，该指令的行为相同但可以嵌套。这允许您拥有嵌套的表单，这在使用 ngRepeat 指令动态生成的表单中使用 Angular 验证指令时非常有用。由于您无法使用插值动态生成输入元素的名称属性，因此您必须将每组重复输入包装在 ngForm 指令中，并将它们嵌套在外部表单元素中。

**CSS 类**

**如果表单有效，则设置**ng- valid。****

 ****如果表单无效，则设置**ng- invalid。****

 ****如果表单是原始的，则设置**ng- pristine。****

 ****如果表单脏，则设置**ng- dirty。****

 ****如果表单已提交，则设置**ng- submitted。****

 **请记住，ngAnimate 在添加和删除时可以检测到这些类中的每一个。

**提交表单并阻止默认操作**

由于表单在客户端 Angular 应用程序中的作用不同于传统的往返应用程序，因此浏览器最好不要将表单提交转换为将数据发送到服务器的完整页面重新加载。相反，应该触发一些 javascript 逻辑来以特定于应用程序的方式处理表单提交。

出于这个原因，Angular 会阻止默认操作（向服务器提交表单），除非元素具有指定的操作属性。

您可以使用以下两种方法之一来指定提交表单时应调用的 javascript 方法：

**表单元素上的ngSubmit**指令

**第一个按钮或提交类型的输入字段上的ngClick**指令 (input[type=submit])

要防止处理程序重复执行，请仅使用 ngSubmit 或 ngClick 指令之一。

这是因为 HTML 规范中的以下表单提交规则：

如果表单只有一个输入字段，则在此字段中按 enter 会触发表单提交 (ngSubmit) 如果表单有 2+ 个输入字段且没有按钮，或者`input[type=submit]`如果表单有一个或多个输入字段并且然后按 enter 不会触发提交并且一个或多个按钮或`input[type=submit]`然后在任何输入字段中按 Enter 将触发第一个按钮或`input[type=submit]`(ngClick) 上的单击处理程序和封闭表单 (ngSubmit) 上的提交处理程序。

提交封闭表单后，任何未决的 ngModelOptions 更改都将立即发生。请注意，ngClick 事件将在模型更新之前发生。

使用 ngSubmit 可以访问更新的模型。

**应用程序.js**：

```
angular.module('formExample', [])
  .controller('FormController', ['$scope', function($scope) {
    $scope.userType = 'guest';
  }]); 
```

**表格**：

```
<form name="myForm" ng-controller="FormController" class="my-form">
  userType: <input name="input" ng-model="userType" required>
  <span class="error" ng-show="myForm.input.$error.required">Required!</span>
  userType = {{userType}}
  myForm.input.$valid = {{myForm.input.$valid}}
  myForm.input.$error = {{myForm.input.$error}}
  myForm.$valid = {{myForm.$valid}}
  myForm.$error.required = {{!!myForm.$error.required}}
 </form> 
```

来源：[AngularJS：API：表单](https://docs.angularjs.org/api/ng/directive/form)**********

# ios - 如何将常量值添加到用户输入字符串

> ID：14299835
> 
> 赞同：-1
> 
> 时间：2013-01-13T01:40:53.400
> 
> 标签：ios, objective-c, cocoa-touch

我试图发送警报`if` UITextfield 中用户输入的值超过输入值的 1.67 倍。

```
- (void)textFieldDidEndEditing:(UITextField *)textField

float x = ([_continuityRingFinalR2.text floatValue]);
float y = (1.67);

if ([_continuityRingFinalR2.text > x * y] )//errors here {

    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Warning" message:@"My message here" delegate:nil cancelButtonTitle: @"Ok" otherButtonTitles: nil];

    [alert show];
} 
```

我想说如果 _continuityRingCircuitR2.text 是用户输入显示警报的 1.67 倍。我想我快到了，但只是不断出错`([_continuityRingFinalR2.text x * y] )`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T01:48:21.787

您的错误可能是因为“ `continuityRingFinalR2`”是编译器正在查找某个数值时的标签。

尝试使用这个：

```
if ([[_continuityRingFinalR2.text floatValue] > x * y] ) { 
```

（这个答案假设标签内的值确实是一个数字）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T01:51:18.893

你在处理两个不同的输入吗？从所写的内容来看，当您采用浮点值 x 并看到

```
if (x > x * y) 
```

这永远不会成立，因为您设置了 y = 1.67（或任何其他大于或等于 1 的值）。

您是要比较不同的文本字段吗？

此外，如另一个答案中所述，您还需要使用字段的浮点值而不是文本。

# .htaccess - 具有 htaccess 冲突问题的 SEO URL

> ID：14299836
> 
> 赞同：1
> 
> 时间：2013-01-13T01:40:54.503
> 
> 标签：.htaccess

我的.htaccess 有一个小故障。我用谷歌搜索并尝试了一些没有任何结果的东西，所以我不得不求助于**SOF**。

考虑遵循 htaccess 规则；

```
# CATEGORY LISTING
ReWriteRule ^listing/category/(.*)/(.*)/(.*)/(.*) ?module=listing&type=category&get=$1&c_id=$2&c_name=$3&page=$4 [L]

ReWriteRule ^listing/category/(.*)/(.*)/(.*) ?module=listing&type=category&get=$1&c_id=$2&c_name=$3 [L]

# CATEGORY FILTER
ReWriteRule ^listing/category/(.*)/(.*)/(.*) ?module=listing&type=category&orderType=$1&order=$2&page=$3 [L]

ReWriteRule ^listing/category(.*)/(.*) ?module=listing&type=category&orderType=$1&order=$2 [L]

ReWriteRule ^listing/category/(.*) ?module=listing&type=category&page=$1 [L]

ReWriteRule ^listing/category ?module=listing&type=category [L] 
```

这里的问题是 2 条规则相互冲突；

本规则；

```
ReWriteRule ^listing/category/(.*)/(.*)/(.*) ?module=listing&type=category&get=$1&c_id=$2&c_name=$3 [L] 
```

与本规则冲突；

```
ReWriteRule ^listing/category/(.*)/(.*)/(.*) ?module=listing&type=category&orderType=$1&order=$2&page=$3 [L] 
```

有没有办法解决这个冲突？

感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T03:29:21.577

> 有没有办法解决这个冲突？

为了解决这个问题，您需要使`get`查询字符串和`order`查询字符串的 URI 互斥。您对它们都有完全相同的正则表达式，因此**永远不会**应用第二个正则表达式，因为与第二个匹配的任何内容都将由第一个处理。

例如，您可以使其中一个看起来像：`/order/category/(.*)/(.*)/(.*)`而另一个`/listing/category/(.*)/(.*)/(.*)`. 这两个 URI 是互斥的，永远不会冲突。

此外，您应该将所有内容更改`(.*)`为`([^/]*)`，因为`(.*)`它不贪心并且会吞噬额外的路径。

# ios - How can I load UIProgressView status?

> ID：14299837
> 
> 赞同：1
> 
> 时间：2013-01-13T01:41:06.363
> 
> 标签：ios, xcode, cocoa-touch, uiprogressview

I would like to load the progressview's status, when I start my app again. I have an int, which I save every time. the progressview is full if the int = 18.

I used this code:

```
IBOutlet UIProgressView *progress1;

-(void)progress1{
    [progress1  setProgress:progress1.progress+0.055];

} 
```

in viewdidappear/viewdidload:

```
[progress1 setProgress:0.0]; 
```

so if I answered 9/18 , and my progress bar is at half, and I close my app, next time when I start again, it still at half, not 0.0

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T01:58:53.080

在您的按钮按下方法中添加：

```
NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
[defaults setFloat:[progress1 progress] forKey:@"progress"];
[defaults synchronize]; 
```

在你的`viewDidLoad`：

```
[progress1 setProgress:[[NSUserDefaults standardUserDefaults] floatForKey:@"progress"]; 
```

# c# - Individually synchronize two thread queues and block for execution?

> ID：14299843
> 
> 赞同：0
> 
> 时间：2013-01-13T01:42:21.400
> 
> 标签：c#, .net, multithreading, queue, blocking

I'm working on an app which spawns multiple threads on user-customizable intervals in order to retrieve data from {insert any kind of service here}. My app uses CMD scripts (i.e. makes Windows spawn conhost) and sometimes mapping network drives, then they sleep for a customized interval and repeat. Let's call them Counters.

So far so good, but there are some procedures that can't be ran asynchronously (mapping drives, for instance), so I must make some kind of queues for *some* specific threads so the program works alright.

So far I've been able to implement it using this producer/consumer queue blog post found here -> [http://moazzam-khan.com/blog/?p=418](http://moazzam-khan.com/blog/?p=418). This works in the CMD counters so the app doesn't spawn like 7821678321 conhosts and blocks the PC, I'm queueing them. Anyways, that's not what I'm having problems with.

Problems arise when I need to map network drives to run some commands and unmap it, then let the next thread execute. Let me illustrate the problem more clearly:

**Thread Type A**: Only need to be queued (only A-types), no need to wait for B-type threads to execute or finish their execution. This is done actually with the code found in the tutorial.

**Thread Type B**: Other B-type threads need to wait for the current B-type thread to finish its execution.

I was thinking in using the same tutorial for the B-type threads, but I realized I can't use it because the other threads keep invoking themselves until it's unblocked, and invoking themselves would remap the drive and it won't work (argh, I can see if the drive is mapped but *not* where does it map to... I could, but it's unneccesary code I want to avoid writing).

I did my homework and went through google and even made a small app to try my excercise by using the lock keyword in C#, without success, even though the function blocks other threads, they keep calling the blocking function and I don't want that :(

There's lots of tutorials out there but none are concise and to-the-point enough to allow me to understand them. I've found a few questions here in SO but they're mostly java-related, and I'm working in C# 4.0.

Well, here's the code I wrote. If you run it you'll notice the other threads will call the blocking function. I don't want the function to be called until the first thread which called it finishes. Either that, or make some kind of queue but also avoid the queue to fill itself due to the time other threads took in doing their process.

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading;

namespace ThreadTest
{
    public class BlockObj
    {
        Object lockObj = new Object();

        public void DoBlock(int id)
        {
            lock (lockObj)
            {
                Console.WriteLine("Counter " + id + " locking object created, wait 5 sec");
                Thread.Sleep(5000);
                Console.WriteLine("Stuff done, keep going");
            }
        }
    }

    class Program
    {
        static Random r = new Random(DateTime.Now.Second);
        static BlockObj oo = new BlockObj();

        public static void Counter(object id)
        {
            int i = (int)id;
            while (true)
            {
                Thread.Sleep(1000 * r.Next(1, 10));
                Console.WriteLine("Counter " + i + " call blocking stuff...");
                oo.DoBlock(i);
                Console.WriteLine("Counter " + i + " finish work");
            }
        }

        public static void Main(string[] args)
        {
            for (int i = 0; i < 5; i++)
            {
                Thread t = new Thread(new ParameterizedThreadStart(Counter));
                t.Start(i);
            }
        }
    }
} 
```

Actually, I'd like to see some proof-of-concept code of an app that would spawn two thread queues, and the threads in those queues would wait for the current thread to finish executing before running the next one. However, each queue would have their own blocking. Thread Queue 1 shouldn't block Thread Queue 2 executions and visceversa.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T16:04:59.117

好的，我只是用自己的代码解决了它，尝试了一些东西直到它起作用:)。

对于那些想要一个同步的简单队列的人，这里是：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading;
using System.Collections;
using System.Runtime.Remoting.Messaging;

namespace TheadingPool1
{
    // http://www.c-sharpcorner.com/UploadFile/mgold/QueueInThread11222005232529PM/QueueInThread.aspx

    public class ThreadQueue
    {
        private Queue _qOrder = new Queue();
        private Queue _qSync;
        private Thread _qThread;
        private ManualResetEvent _eWait = new ManualResetEvent(false);

        private int _wait;

        public ThreadQueue(int w)
        {
            _wait = w;
            _qSync = Queue.Synchronized(_qOrder);
        }

        public void Start()
        {
            _qThread = new Thread(new ThreadStart(Process));
            _qThread.IsBackground = true;
            _qThread.Start();
        }

        public void Process()
        {
            Random x = new Random(DateTime.Now.Second);
            object item;
            while (true)
            {
                item = null;
                lock (_qSync.SyncRoot)
                {
                    if (_qSync.Count > 0)
                    {
                        item = (object)_qSync.Dequeue();
                    }
                    else
                    {
                        _eWait.Reset();
                    }
                }
                if (item != null)
                {
                    Console.WriteLine("[" + _wait + "] [" + item.ToString() + "] :D");
                    Thread.Sleep(_wait * x.Next(1, 5));
                }
                else
                {
                    _eWait.WaitOne();
                }
            }
        }

        public void Enqueue(object obj)
        {
            _qSync.Enqueue(obj);
            _eWait.Set();
        }
    }

    public class Program
    {
        private static ThreadQueue _q1 = new ThreadQueue(10);
        private static ThreadQueue _q2 = new ThreadQueue(50);

        public static void Main(string[] args)
        {
            _q1.Start();
            _q2.Start();

            for (int i = 0; i < 50; i++)
                _q1.Enqueue(i);

            for (int i = 0; i < 50; i++)
                _q2.Enqueue(i);

            while (true)
            {
                Thread.Sleep(100);
            }
        }
    }
} 
```

# c# - how to save/load database in a c# winform application?

> ID：14299844
> 
> 赞同：2
> 
> 时间：2013-01-13T01:42:22.490
> 
> 标签：c#, database, winforms, load, save

I've created an application (using c# winforms) in which I'm managing item sheets such books, music and movie dvds, games, etc. Those sheets contain basic information such title, synopsis, author, etc. There are even images (full-size + thumbnail).

So now I'm entering the stage of development where I need to save all the changes and load them again when I re-open the application. It's the first time I'm doing this kind of operation so I'm unsure of the best ways to do this.

So how do we save/load a database in a C# winform application? Are there best or faster methods than others?

Any link to tutorials would be greatly appreciated, I haven't found any valuable ones on my own, or the ones I've found dealt with Web applications.

Thank you!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T01:44:55.463

entity framework is probably your easiest choice. here is a tutorial:

[http://weblogs.asp.net/scottgu/archive/2010/07/16/code-first-development-with-entity-framework-4.aspx](http://weblogs.asp.net/scottgu/archive/2010/07/16/code-first-development-with-entity-framework-4.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T01:45:05.180

Microsoft [Entity Framework](http://msdn.microsoft.com/en-us/data/ef.aspx) is the way to go.

I'd suggest to pay close attention to **CodeFirst** feature of EF because you have an application but don't have a DB yet. Here is [Tutorial: Code First with EF 4.1](http://codefirst.codeplex.com)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T01:47:11.293

您可以在 Windows 窗体应用程序中使用“SQL 精简版”（我称之为本地 SQL）。因此，您无需连接到其他 DBMS 即可轻松加载/保存数据库。 [http://www.microsoft.com/sql/editions/compact/default.mspx](http://www.microsoft.com/sql/editions/compact/default.mspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-17T17:27:30.527

## 将数据库数据加载到 Winforms 应用程序中

如果您不希望使用实体框架（例如在性能关键的情况下），则直接使用 [ADO.Net](http://msdn.microsoft.com/en-us/library/kb9s9ks0%28v=vs.100%29.aspx)和[System.Data.SqlClient](http://msdn.microsoft.com/en-us/library/8t72t3k4%28v=vs.100%29.aspx) 是另一种方法。此方法假定您使用的是[Microsoft SQL Server](http://go.microsoft.com/fwlink/?linkid=119221)：

该方法可以这样调用：`GetSqlData("Select * from myTable")`.

```
public static DataTable GetSqlData(string sql)
{
    // get Connectionstring from app.config 
    string connStr = System.Configuration.ConfigurationManager.AppSettings["YourConnection"];
    using (SqlConnection myConnection = new SqlConnection(connStr))
    {
        myConnection.Open();
        DataTable dt = new DataTable();
        using (var command = new SqlCommand())
        {
            command.Connection = myConnection;
            command.CommandText = sql;
            SqlDataReader reader = command.ExecuteReader(CommandBehavior.CloseConnection);                                        
            dt.Load(reader);
        }
        return dt;
    }            
}// End of GetSqlData 
```

### 关于教程

由于来自微软的名为 windowsclient.net 的伟大网站（包含大量用户输入和官方视频）已经消失（[1、2](http://social.msdn.microsoft.com/Forums/en-US/winformsdatacontrols/thread/23ebc4fc-3976-41cc-bcf9-2152dfed1446) [）](http://social.msdn.microsoft.com/Forums/en-US/winforms/thread/d0c85c04-9c54-4328-a3a0-a5c13a4477d1/)，您可以通过谷歌搜索[beth massi forms over data 视频系列](http://blogs.msdn.com/b/bethmassi/archive/2007/08/01/forms-over-data-video-series-two-more-videos-released.aspx)或只是[form over data](http://archive.msdn.microsoft.com/vbvideosdata/Release/ProjectReleases.aspx?ReleaseId=16)，您会发现剩下的来自 windowsclient.net 网站。

# android - 带有进度对话框的异步任务

> ID：14299846
> 
> 赞同：0
> 
> 时间：2013-01-13T01:43:07.427
> 
> 标签：android, android-asynctask, progressdialog

我正在使用 Asynctask 来执行一个耗时的方法，`doStuff()`其中包括分配全局数据结构。调试器确认`doStuff()`已调用，但在 Asynctask 结束时绘制新视图时，访问全局数据结构时出现空指针异常。这是代码：

```
public class MyTask extends AsyncTask<Void, Void, Void> {
    protected ProgressDialog dialog;

    public MyTask (Context context) {
        dialog = new ProgressDialog(context);
    }

    @Override
    protected void onPreExecute() { 
       super.onPreExecute();
       dialog.setMessage("Foo");
       dialog.show();    
    }

    @Override
    protected Void doInBackground(Void... params) {
        doStuff();
        return null;
    }

    @Override
    protected void onPostExecute(Void result) {
        super.onPostExecute(result);
        dialog.dismiss();
    }
} 
```

我使用`new MyTask(this).execute();`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T04:15:19.840

`AsyncTask`是一个真正方便的后台线程和处理程序包装器。您正在后台任务完成之前执行代码。要知道后台任务何时完成，您需要输入要执行的代码或以其他方式指示您的主要活动`onPostExecute`（它将在 UI/主线程上运行）任务完成。[有关更多详细信息，请参阅进程和线程指南](http://developer.android.com/guide/components/processes-and-threads.html)的使用 AsyncTask 部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T01:54:30.547

您必须在使用 AsyncTask 的 Activity 中声明 ProgressDialog

# java - Splitting a string by space before delimiter, while keeping it

> ID：14299857
> 
> 赞同：0
> 
> 时间：2013-01-13T01:45:11.620
> 
> 标签：java, split

Okay, so I have searched throughout google and this site and have not found a solution that works how I want for this problem. I have a string, for example "javaRegexConfusion" where I want to split by capital letters, while also maintaining them. The problem here is, if I were to split directly by capital letters, one way would leave me without the letters at all, and another I know of would split them into its own object on the array. The result in the string above I want is an array consisting of "java", "Regex", and "Confusion". I am completely unsure of how to go about it. I am sure the solution is extremely simple, however I do not know how to phrase what I am looking for, hence the confusing title.

## EDIT: Found the answer in a totally off topic quest. I am not really familiar with the regexs accepted, and would never have figured out

While I like AlexWien's answer, I prefer this method. Instead of iterating through and then splitting wherever capitals were, the writer of the other answer split right before anything capital.

```
String[] output = input.split("(?=(?!^)[A-Z])"); 
```

I really like this method and will most likely use this from now on (too bad that I will never remember `"(?=(?!^)[A-Z])")` without looking at it)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T01:49:57.783

只需逐个字符地遍历字符串，如果找到一个字符，`isUpperCase()`则复制到结果字符串数组。存储当前位置，然后继续..

利用

```
Character.isUpperCase(s.charAt(pos)) 
```

# html - Nav wont align to the right

> ID：14299862
> 
> 赞同：0
> 
> 时间：2013-01-13T01:45:52.663
> 
> 标签：html, css, twitter-bootstrap

Please help my .nav wont text-align: right; properly

![enter image description here](../Images/bc81746a87d22e14b4ea9cf79a3f6aa3.png)

```
<div class="logo">
<h2><i class="icon-reorder"></i> Frosty</h2>
</div>
<div class="nav">
<a href="#">Home</a>
</div>

div.logo, div.nav { display: inline-block; }
div.nav a { text-align: right; } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T01:48:50.123

使用`float: right`而不是`text-align: right`.

您也可以将它向右移动，将 a`position: relative`放到上面的容器中（在您的情况下`main-container`）并放入`position: absolute; right: 0px; bottom: 0px`课堂`nav`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T01:55:22.203

首先，您仅将锚标记设置为`text-align: right`. 如果您希望将整个导航发送到右侧，您需要将 CSS 应用于`div.nav`而不是`div.nav a`.

如果你想使用，你需要设置一个宽度，`text-align: right`但我建议使用`float: right`，但这取决于你。浮动将使您的元素“浮动”，因此项目可以出现在其下方。有关浮动的更多信息，请[点击此处](http://www.w3schools.com/cssref/pr_class_float.asp)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T01:50:06.317

尝试这个：

从 div.nav 中删除 text-align

并将其添加到 div.nav

```
text-align:right; 
```

也许一个标签环绕着文本并且不能对齐它尽管父 di 在这种情况下导航是 100% 宽度

# python - Python looping through a list

> ID：14299864
> 
> 赞同：0
> 
> 时间：2013-01-13T01:45:55.380
> 
> 标签：python

This may be trivial for some but I have trouble looking through 2d array(?) in Python.

```
orderList = [ ('apples', 2.0), ('pears', 3.0), ('limes', 4.0) ] 
```

How do I loop through this list? I've tried this but obviously it's not working.

```
for item in orderList:
        print item; 
```

**If you can direct me to a tutorial or website that has this information, I will be content.

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-13T01:49:44.940

您可以使用元组解包来遍历所有内容：

```
for fruit, quantity in orderList:
    print 'I have', quantity, fruit + 'es' 
```

您也可以从`for`循环内部执行此操作：

```
for fruit_info in orderList:
    fruit, quantity = fruit_info

    print 'I have', quantity, fruit + 'es' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T08:56:52.467

有几种方法可以遍历列表。

最常见的是每个循环

```
for fruit in orderList:
    print fruit 
```

更有效的变体是使用生成器，还值得注意的是生成器是可迭代的序列。

```
def generator(fruits):
    for fruit in fruits:
        yield fruit

generate = generator(orderList)
firstFruit = generate.next()
// Doing complex calculations before continuing the iteration
answer = 21 + 21
secondFruit = generate.next() 
```

更优雅的方法是使用高阶函数“map”。Map 也可以返回一个值。如果您想将每种水果的价格或数量提高 5%，您只需创建一个简单的函数。

```
def display(fruit):
    print fruit  // map takes in a function as an argument and applies it to each element of the sequence.

map( display, orderList )

// You could also use a generator
map( display, generate ) 
```

我能想到的最后一种方法是使用压缩。压缩是一种内置的迭代形式，现在可以在大多数标准库数据结构中使用。如果您想使用序列创建新列表，这很有用。我很懒，所以我只是重用 display 来演示语法。

```
[ display(fruit) for fruit in orderList ]
[ display(fruit) for fruit in generate ] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T02:04:33.063

您的代码可以正常工作

```
orderList = [ ('apples', 2.0), ('pears', 3.0), ('limes', 4.0) ]
for item in orderList:
    print item;           #you don't need `;` but it is not a problem to leave it
>>>
('apples', 2.0)
('pears', 3.0)
('limes', 4.0) 
```

# websocket - Jetty 9 Websockets重复来自断开连接的客户端的超时异常

> ID：14299873
> 
> 赞同：0
> 
> 时间：2013-01-13T01:48:06.390
> 
> 标签：websocket, jetty

在开发 Web 应用程序时，我遇到了一个似乎是 Jetty 的 WebSocket 连接管理的错误。我想知道是否有人不幸遇到了这个问题，如果是这样，他们是如何解决或避免这个问题的。

我遇到的问题分为三个部分：

1.  Jetty 无法识别客户端 WebSocket 已关闭（我没有收到 onClose 事件，并且 WebSocketConnection.isConnected() 返回 true）。请注意，我每秒 ping 一次客户端，但只有第一次 ping 失败：第一次 ping 之后的其他 ping 不返回结果（失败或成功）。

2.  从客户端实际关闭时开始的所有消息都会累积起来，直到连接断开后 5 分钟才会失败，将所有未决消息转储到控制台并使用 java.nio.channels.InterruptedByTimeoutException

3.  这些（失败的）未决消息不会被清除。所有发送到断开连接的客户端的消息，对于 Jetty 服务器曾经获得的每个 WebSocket 连接，每 5 分钟转储一次 InterruptedByTimeoutException。

在短期内，我的服务器仍然可以接受新的连接，我的应用程序仍然可以继续前进。但是，正如您可以想象的那样，一旦建立了足够多的这些消息，报告所有超时的线程就会占用执行时间，并且不会接受新的连接，HTTP、WebSocket 或其他方式。

我主要使用 Jetty 9.0.0.M2 对此进行了测试，但 9.0.0.M3 似乎也有同样的问题。对于那些感兴趣的人，这是我重现的具体步骤：

1.  打开一个网页，该网页创建到您的 Jetty 9 服务器的 WebSocket 连接。（指出我的 WebSocket 是从 WebWorker 中打开的可能相关，也可能不相关）。
2.  一旦 Jetty 从 Jetty 识别连接，开始每秒 ping 客户端并记录结果。
3.  关闭您的客户端 WebSocket 页面正在运行的选项卡或浏览器。
4.  仅观察一次 ping 失败。进一步的 ping 不会记录成功或失败。另请注意，您没有收到 onClose 事件。
5.  等待 5 分钟，然后观察您的 Jetty 控制台爆炸，但对于每条从未完成的 ping 或消息，都会出现以下异常：

2013-01-12 19:39:52.747:WARN:oejwci.FrameBytes:Timer-3: org.eclipse.jetty.util.thread.TimerScheduler$SimpleTask.run(TimerScheduler) 失败（空）java.nio.channels.InterruptedByTimeoutException .java:88) 在 java.util.TimerThread.mainLoop(Unknown Source) 在 java.util.TimerThread.run(Unknown Source)

# c# - C# 数据绑定标签不会刷新

> ID：14299875
> 
> 赞同：0
> 
> 时间：2013-01-13T01:48:40.297
> 
> 标签：c#, data-binding, refresh, auto-update

我正在将对象值数据绑定到标签，它不会刷新。

```
lblTime.DataBindings.Add(new Binding("Text", AppSettings.Instance.SelectedAuction, "EndDate", false, DataSourceUpdateMode.OnPropertyChanged)); 
```

绑定有效并使用消息框，我知道值正在改变。我正确使用了 INotifyChanged 但它不起作用。改变个人价值观是有效的，比如：

```
AppSettings.Instance.SelectedAuction.EndDate = ((Auction)lbAuctions.SelectedItem).EndDate; 
```

但我想替换整个对象，它不会更新：

```
AppSettings.Instance.SelectedAuction = (Auction)lbAuctions.SelectedItem; 
```

为什么是这样？我可以刷新单个值，但不能刷新对象本身...

```
public Auction SelectedAuction
    {
        get { return this.selectedAuction; }
        set
        {
            this.CheckPropertyChanged<Auction>
            ("SelectedAuction", ref this.selectedAuction, ref value);
        }
    } 
```

在替换对象本身或我需要参考的其他东西时是否有另一种方法可以使用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T03:01:05.233

设置的数据绑定是在调用时`lblTime`在对象引用上设置的。数据绑定订阅该对象上的事件。改变你的并不会改变这一点。数据绑定仍然订阅原始对象。（这也意味着你有内存，因为数据绑定引用了原始的，该实例不会被垃圾收集）`AppSettings.Instance.SelectedAuction``AddBinding``PropertyChanged``SelectedAuction``Instance``CurrentAuction`

您需要设置数据绑定，以便它可以列出`Instance`对象上的事件。您必须将绑定设置为`"CurrentAuction.EndDate"`. 这不会直接起作用（* 请参见下面的注释），但是有一个辅助对象[BindingSource](http://msdn.microsoft.com/en-us/library/system.windows.forms.bindingsource.aspx)可以放在中间支持该绑定。下面是一个例子：

```
BindingSource bs = new BindingSource();
bs.DataSource = AppSettings.Instance;
lblTime.DataBindings.Add("Text", bs, "CurrentAuction.EndDate", false, 
      DataSourceUpdateMode.OnPropertyChanged); 
```

注意：它可以`BindingSource`在 3.5 中不使用，但在 4.0 中不可用，请参阅[数据绑定支持 Windows 窗体中的嵌套属性吗？](https://stackoverflow.com/questions/8894103/does-data-binding-support-nested-properties-in-windows-forms)

# sockets - 线程套接字服务器私有消息

> ID：14299876
> 
> 赞同：1
> 
> 时间：2013-01-13T01:48:40.717
> 
> 标签：sockets, pthreads, mutex

我最近一直在研究线程套接字服务器。不幸的是，我还没有找到用户可以私信或私信另一个的代码。由于每个都是通过一个线程连接的，我一直在寻找一种方法来修改线程的变量而没有任何乐趣。我是否必须创建一个全局变量来保存每个线程解析的所有消息（使用互斥锁）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T03:16:48.357

是的，您需要某种受互斥体保护的共享数据结构。

它不需要是全局的，但所有连接处理线程都需要对它的引用。全局可以实现这一点，但是在主线程中分配的数据结构也是如此，对它的引用在创建时传递给每个线程。

假设您的线程被写入阻塞它们正在读取的套接字，那么当有新的（内部）消息给它们时，棘手的部分将是唤醒它们。解决这个问题的最简单方法可能是`pipe()`为每个线程创建一个，并让线程阻塞在`select()`它们正在处理的套接字和它们的管道上。然后，您可以通过管道向他们发送私人消息，共享数据结构只会查找连接的用户并找到他们管道的文件描述符。

# javascript - 使用特定的 JavaScript 版本 (< 1.8.5)

> ID：14299877
> 
> 赞同：2
> 
> 时间：2013-01-13T01:48:47.013
> 
> 标签：javascript, firefox, ecmascript-5

我正在尝试使用 Firefox 中的旧 JavaScript 版本测试 undefined 的可写属性（为 undefined 赋值），但由于某种原因，用于指定版本的代码不起作用。

（更具体地说，低于 1.8.5 的版本，所以我认为应该是 <= 1.8.2。）

我试图测试 undefined 的可写属性（为 undefined 赋值）。

--> [https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/undefined](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/undefined)

[我尝试了在Mozilla 开发者网络](https://developer.mozilla.org/en-US/docs/JavaScript/New_in_JavaScript/1.8)上找到的这种方法：

```
<script type="application/javascript;version=1.7"> 
```

但它不起作用。我也试过：

```
<script language="javascript" type="application/javascript;version=1.7"> 
```

还有这个 ：

```
<script language="javascript1.7" type="application/javascript"> 
```

但他们都没有工作。

我测试的代码如下：

```
undefined = true;
var k;
console.log(k); 
```

我也尝试用 替换`undefined`，`window.undefined`并不是说真的有区别。

所以我的问题有两个：

*   如何在 Firefox 中进行这项工作？

*   是否有跨浏览器的方式来实现这一点？

提前致谢 ！

编辑：我正在使用 Firefox 19。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T01:51:24.167

`language="javascript1.7"`指定*最低*版本，而不是实际版本。

您将需要使用旧版本的浏览器（具有您想要的版本）来测试它。

（旁注：IE 的兼容性视图中有足够多的错误，你能想象一个浏览器必须单独实现每个版本的 JS 吗？）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-13T01:51:51.083

浏览器没有当前和所有以前版本的 Javascript，它们只有一个版本的 Javascript。

仅当浏览器中的 Javascript 引擎版本较低时，为脚本指定版本才会使浏览器跳过该脚本。

# django - Django annotate 正在生成不正确的 GROUP BY 语句

> ID：14299879
> 
> 赞同：0
> 
> 时间：2013-01-13T01:49:03.637
> 
> 标签：django

我正在使用 Django。我有三种不同的模型，具有这种父子布局：

申请人->申请->审核

一个申请人可以有多个申请，可以有多个审查。

我正在尝试编写一个包含名字、姓氏、应用程序 ID 以及与一个人相关联的评论数量的查询，这些评论可能没有到几个。我有以下查询语句：

`list = MUSApplicant.objects.values( 'applicant', 'id', 'applicant__first_name', 'applicant__last_name', 'review').filter(department=department).annotate(acount=Count('review'))`

这给了我这个 SQL：

```
 SELECT apply_application.applicant_id, 
    apply_application.id, 
    apply_applicant.first_name, 
    apply_applicant.last_name, 
    apply_review.id, 
    COUNT(apply_review.id) AS acount 
    FROM apply_application 
    INNER JOIN apply_applicant 
    ON (apply_application.applicant_id = apply_applicant.id) 
    LEFT OUTER JOIN apply_review 
    ON (apply_application.id = apply_review.applicant_id) 
    WHERE apply_application.department = 'departmentname'
    GROUP BY apply_application.applicant_id, apply_application.id, apply_applicant.first_name, apply_applicant.last_name, apply_review.id 
```

这非常接近，但结果不正确——我最终得到了太多没有正确分组的行。我只希望它按 apply_review.id 分组，而不是其他所有内容。我怎样才能防止它在我的 GROUP BY 语句中添加所有这些额外的东西？

我无休止地盯着文档无济于事。有时很难将您的确切数据模型与那里的几个示例相匹配，以便学习任何东西。

编辑：这是模型：

```
class Review(models.Model):
    reviewer_eid = models.CharField(max_length=20)
    applicant = models.ForeignKey('Application')
    overall_score = models.FloatField()
    category1 = models.FloatField()
    category2 = models.FloatField()
    category3 = models.FloatField()
    comments = models.TextField() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T02:24:04.410

我想到了。我需要`Count('review__applicant')`而不是`Count('review')`. 我发现那些额外的 GROUP BY 语句真的没有效果，因为它们也在 SELECT 子句中。

# assembly - 如何设置LDT？

> ID：14299893
> 
> 赞同：1
> 
> 时间：2013-01-13T01:52:12.857
> 
> 标签：assembly, x86, memory-segmentation

我一直在开发 32 位操作系统，我希望允许程序将段与内核分开。

为此，我需要创建 SS，并且 DS 寄存器实际上指向程序堆栈和 .data 部分。

根据我的研究，我相信这是通过建立一个本地描述符表来完成的。

我假设这与 GDT 非常相似，并且 LDT 是通过 lldt 加载的。

但是，一旦设置了细分，我就不知道如何使用它。谁能解释一下？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T02:14:25.203

不，无需设置单独的 LDT 来设置用户空间 SS/CS/DS 段描述符。

可以做到这一点，只需在中断处理程序中[保存寄存器状态并](https://github.com/EarlGray/COSEC/blob/master/arch/intr.S)[在 GDT 中使用任务选择器的条目](https://github.com/EarlGray/COSEC/blob/master/core/tasks.c)（CPU 需要查找进程的内核空间 SS 以从用户空间进入中断）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T14:09:58.897

好吧，你找不到比英特尔手册更好的教程了。真的，找到英特尔 80386 编程手册（386 手册比新的更短，而且写得更好；它有你需要的主要点）。或英特尔网站的 IA32 编程手册。它包含您正在搜索的*所有信息。*

# python - TypeError: Argument must be rect style object - Pygame (Python

> ID：14299894
> 
> 赞同：-4
> 
> 时间：2013-01-13T01:52:20.703
> 
> 标签：python, list, pygame, rect

> **可能重复：**
> [Pygame (Python) - TypeError: Argument must be rect style object](https://stackoverflow.com/questions/14305083/pygame-python-typeerror-argument-must-be-rect-style-object)

我正在尝试在 Pygame（使用 Python）中制作一个破砖游戏，但我遇到了一个错误。

（这是必要的随机文本，因此我可以发布所有这些代码）

代码：

```
import pygame, sys, time, random
from pygame.locals import *
pygame.init()
fpsclock = pygame.time.Clock()

WINDOWWIDTH = 450
WINDOWHEIGHT = 650
mainwindow = pygame.display.set_mode((WINDOWWIDTH, WINDOWHEIGHT), 0, 32)
pygame.display.set_caption('Luzion - Brick Breaker')

paddle = pygame.image.load('Brick Breaker - Paddle.png')
paddlerect = paddle.get_rect()
paddlerect.topleft = (190, 575)

ball = pygame.image.load ('ball.png')
ballrect = ball.get_rect()
ballrect.topleft = (195, 565)

cooltext = pygame.image.load('cooltext1.png')
cooltextrect = cooltext.get_rect()
cooltextrect.topleft = (0, 0)

BLACK = (0, 0, 0)
WHITE = (255, 255, 255)
RED = (255, 0, 0)
GREEN = (0, 128, 0)
BLUE = (0, 0, 255)
LIME = (0, 255, 0)
TEXTCOLOR = WHITE

font = pygame.font.SysFont(None, 48)

def displaytext(text, font, surface, x, y):
    text = font.render(text, 1, TEXTCOLOR)
    textrect = text.get_rect()
    textrect.topleft = (x, y)
    surface.blit(text, textrect)

def waitforplayer():
    while True:
        for event in pygame.event.get():
            if event.type == QUIT:
                pygame.quit()
                sys.exit()
            if event.type == KEYDOWN:
                if event.key == K_ESCAPE:
                    pygame.quit()
                    sys.exit()
                return

rb = pygame.image.load('redblock.png')
rb2 = rb1 = rb
level1blocks = [rb, rb1, rb2]
rbrect = rb.get_rect().topleft = (0, 0)
rb1rect = rb1.get_rect().topleft = (40, 0)
rb2rect = rb2.get_rect().topleft = (80, 0)
level1rects = [rbrect, rb1rect, rb2rect]

moveleft = False
moveright = False
SPEED = 7

bmoveup = bmovedown = bmoveleft = bmoveright = False
BALLSPEED = 8

mainwindow.blit(cooltext, cooltextrect)
pygame.display.update()
time.sleep(1)

displaytext('Level 1', font, mainwindow, 150, 100)
pygame.display.update()
time.sleep(1)

displaytext('Press any key to begin...', font, mainwindow, 22, 200)
pygame.display.update()
waitforplayer()

while True:
    number = 1
    for event in pygame.event.get():
        if event.type == QUIT:
            pygame.quit()
            sys.exit()
        if event.type == KEYDOWN:
            if event.key == ord('a') or event.key == K_LEFT:
                moveleft = True
                moveright = False
            if event.key == ord('d') or event.key == K_RIGHT:
                moveleft = False
                moveright = True
            if event.key == ord('g'):
                bmoveup = True
                if number == 1:
                    bmoveleft = True
                else:
                    bmoveright = True
        if event.type == KEYUP:
            if event.key == ord('a') or event.key == K_LEFT:
                moveleft = False
            if event.key == ord('d') or event.key == K_RIGHT:
                moveright = False

    if moveleft and paddlerect.left > 0:
        paddlerect.left -= SPEED
    if moveright and paddlerect.right < WINDOWWIDTH:
        paddlerect.right += SPEED

    if bmovedown and ballrect.bottom < WINDOWHEIGHT:
        ballrect.top += BALLSPEED
    if bmoveup and ballrect.top > 0:
        ballrect.top -= BALLSPEED
    if bmoveleft and ballrect.left > 0:
        ballrect.left -= BALLSPEED
    if bmoveright and ballrect.right < WINDOWWIDTH:
        ballrect.right += BALLSPEED

    if ballrect.top <= 0:
        bmovedown = not bmovedown
        bmoveup = not bmoveup
    if ballrect.left <= 0:
        bmoveleft = not bmoveleft
        bmoveright = not bmoveright
    if ballrect.right >= WINDOWWIDTH:
        bmoveleft = not bmoveleft
        bmoveright = not bmoveright
    if ballrect.bottom >= WINDOWHEIGHT:
        bmovedown = not bmovedown
        bmoveup = not bmoveup

    mainwindow.fill(WHITE)
    mainwindow.blit(paddle, paddlerect)
    mainwindow.blit(ball, ballrect)

    for b in range(len(level1blocks)):
        mainwindow.blit(level1blocks[b], level1rects[b])

    for i in level1rects[:]:
        if ballrect.colliderect(i):
            level1blocks.remove(i)
            level1rects.remove(i)
            bmovedown = not bmovedown
            bmoveup = not bmoveup
            bmoveleft = not bmoveleft
            bmoveright = not bmoveright

    if ballrect.colliderect(paddlerect):
        bmovedown = not bmovedown
        bmoveup = not bmoveup
        bmoveleft = not bmoveleft
        bmoveright = not bmoveright

    pygame.display.update()
    fpsclock.tick(35) 
```

错误：

```
Traceback (most recent call last):
  File "C:/Python32/brick breaker", line 140, in <module>
    if ballrect.colliderect(i):
TypeError: Argument must be rect style object 
```

我不知道如何解决这个错误，请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T18:34:00.180

您`level1rects`当前是元组列表，而不是 rects，因为：

```
rbrect = rb.get_rect().topleft = (0, 0)
rb1rect = rb1.get_rect().topleft = (40, 0)
rb2rect = rb2.get_rect().topleft = (80, 0)
level1rects = [rbrect, rb1rect, rb2rect] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T01:58:29.257

问题是 pygame 期望数组`level1rects`中的所有内容都是矩形，在这种情况下，您必须在该数组中有一些不是的东西。

# binding - javafx bindBidirectional 绑定不适用于舞台大小和复选框选择的属性

> ID：14299896
> 
> 赞同：1
> 
> 时间：2013-01-13T01:52:52.250
> 
> 标签：binding, javafx-2, javafx

我试图完成简单的任务，如果选中复选框，则舞台可以调整大小，如果未选中复选框，则无法调整大小。

代码 ：

```
 checkBox.selectedProperty().bindBidirectional(stage.resizableProperty()); 
```

上面的代码没有按预期工作！，我可以使用下面的代码得到预期的结果

```
 checkBox.selectedProperty().addListener(new ChangeListener() {
         @Override
         public void changed(ObservableValue ov, Object t, Object t1) {
            stage.setResizable(checkBox.selectedProperty().getValue());
           }
      }); 
```

但想知道为什么 bindBidirectional 代码不起作用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T08:59:02.330

This is a bug in the Stage class that is fixed in JavaFX 8.0 (which is available in the current Java 8.0 EAP release).

Note that the resizableProperty is actually correctly set when binded bidirectional, the set value has only no effect.

My testing:

```
import javafx.application.Application;
import javafx.beans.value.ChangeListener;
import javafx.beans.value.ObservableValue;
import javafx.event.ActionEvent;
import javafx.event.EventHandler;
import javafx.scene.Scene;
import javafx.scene.control.Button;
import javafx.scene.control.CheckBox;
import javafx.scene.layout.VBox;
import javafx.stage.Stage;

public class StageResizableTest extends Application{

  public static void main(String[] args) {
    launch(args);
  }

  @Override
  public void start(final Stage stage) throws Exception {
    Button button = new Button("resize");

    button.setOnAction(new EventHandler<ActionEvent>() {
      @Override
      public void handle(ActionEvent actionEvent) {
        stage.setResizable(true);
      }
    });

    Button button2 = new Button("not resize");

    button2.setOnAction(new EventHandler<ActionEvent>() {
      @Override
      public void handle(ActionEvent actionEvent) {
        stage.setResizable(false);
      }
    });

    CheckBox checkBox = new CheckBox("Resizable");

    checkBox.selectedProperty().bindBidirectional(stage.resizableProperty());

    checkBox.selectedProperty().addListener(new ChangeListener<Boolean>() {
      @Override
      public void changed(ObservableValue<? extends Boolean> observableValue, Boolean aBoolean, Boolean aBoolean2) {
        System.out.println("checkbox changed from "+aBoolean+" to "+aBoolean2);
      }
    });

    stage.resizableProperty().addListener(new ChangeListener<Boolean>() {
      @Override
      public void changed(ObservableValue<? extends Boolean> observableValue, Boolean aBoolean, Boolean aBoolean2) {
        System.out.println("stage resizable changed from "+aBoolean+" to "+aBoolean2);
      }
    });

    Button button3 = new Button("request stage resizable");

    button3.setOnAction(new EventHandler<ActionEvent>() {
      @Override
      public void handle(ActionEvent actionEvent) {
        System.out.println(stage.resizableProperty().get());
      }
    });

    VBox box = new VBox();

    box.getChildren().addAll(checkBox, button, button2, button3);

    Scene scene = new Scene(box, 500, 500);

    stage.setScene(scene);

    stage.show();
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-04T19:50:24.473

是的，我也注意到了这一点......不幸的是，绑定属性使得在你的事件处理程序中完成的簿记变得不必要（并且可能有更少的错误！）到目前为止，我发现编写你自己的事件处理程序，如上面的例子似乎是现在唯一要做的事情。现在我自己发现了这一点——并在这里得到了验证——这让我有点困扰，关于这个主题的书籍没有提到这个错误。例如，我首先通过一个取自**Pro JavaFX 2: A Definitive Guide to Rich Clients with Java Technology**的示例来玩弄这个概念。第 2 章的第一个例子涉及到这个绑定，甚至做了一个特别的说明：

> **提示**：绑定的属性不能显式设置。在代码片段之前的代码中，可调整大小的属性是在下一行绑定属性*之前使用 setResizable() 方法设置的。*

您可能会认为，经过麻烦告诉我们这一点，作者也会知道这个错误。谢天谢地，这样的地方有助于保持我们的理智；-)

# javafx-2 - JavaFX 任务：updateMessage() 写入哪里？

> ID：14299897
> 
> 赞同：6
> 
> 时间：2013-01-13T01:53:00.127
> 
> 标签：javafx-2

一个任务通过调用 updateProgress() 来设置它的进度，并让一个 GUI 小部件（如 ProgressIndicator）将它的 progressProperty 绑定到任务的 progressProperty。但是，这里的文章在示例 5 中也提到了调用 updateMessage，但示例不完整。

[http://docs.oracle.com/javafx/2/threads/jfxpub-threads.htm](http://docs.oracle.com/javafx/2/threads/jfxpub-threads.htm)

我不清楚消息的显示位置/方式，因为 ProgressIndicator 和 ProgressBar 中没有消息属性可以将其绑定到。我看到 Task 从 Worker 类继承消息属性。[http://docs.oracle.com/javafx/2/api/javafx/concurrent/Task.html](http://docs.oracle.com/javafx/2/api/javafx/concurrent/Task.html)

但是 GUI 将如何获取它并执行绑定，因为 Task 仅对 Service 可见？

我找不到这方面的工作示例。在 Ensemble 示例中，Service 示例有一个 ProgressIndicator，但同样没有更新任何消息。 [http://download.oracle.com/otndocs/products/javafx/2.2/samples/Ensemble/index.html](http://download.oracle.com/otndocs/products/javafx/2.2/samples/Ensemble/index.html)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-13T05:00:32.333

我可以使用 myController.service.messageProperty() 来访问 Task 的 messageProperty。

```
 myTextArea.textProperty().bind(myController.myService.messageProperty()); 
```

请注意，这会覆盖而不是附加到 TextArea。

要进行追加，必须改为将 ChangeListener 绑定到消息属性。

# jquery - Rails jQuery dataTables页面上的多个表不起作用

> ID：14299898
> 
> 赞同：0
> 
> 时间：2013-01-13T01:53:01.657
> 
> 标签：jquery, ruby-on-rails, datatables

我已阅读有关在页面上使用多个表的 dataTable 的文档。所以，它应该工作。

我正在将 Bootstrap 与选项卡中的每个表一起使用。每个表都显示一些 dataTable 控件。

第一个表格显示了 xls 和 pdf 的表格工具。但是，第 2、第 3、第 n 个选项卡显示所有 tabletools 输出（xls、pdf、复制、cdv、打印等）。除了打印之外，没有任何输出类型有效。

这是我的 jQuery：

```
$(document).ready(function () {

$('.dataTable').dataTable({
    "sDom": 'CT<"clear">lfrtip',
    "oTableTools": {
        "aButtons": [
            {
                "sExtends": "xls",
                "sButtonText": "Excel",
                "mColumns": "visible"
            },
            {
                "sExtends": "pdf",
                "sPdfOrientation": "landscape",
                "sPdfMessage": "Endeavor",
                "mColumns": "visible"
            }
        ],
        "sSwfPath": "/swf/copy_cvs_xls_pdf.swf"
    },
    "oColVis": {
        "buttonText": "Show/Hide",
        "aiExclude": [ 0 ],
        "bRestore": true,
        "sAlign": "left"
    },
    "bStateSave": true,
    "fnStateSave": function (oSettings, oData) {
        localStorage.setItem( 'DataTables_'+window.location.pathname, JSON.stringify(oData) );
    },
    "fnStateLoad": function (oSettings) {
        return JSON.parse( localStorage.getItem('DataTables_'+window.location.pathname) );
    }
}); 
```

这是前 2 个表格的 html 表格元素：

```
<table class="display dataTable table table-striped table-bordered" id="dataTable1" style="" aria-describedby="dataTable1_info">
<table class="display dataTable table table-striped table-bordered" id="dataTable2" style="" aria-describedby="dataTable2_info"> 
```

任何帮助，将不胜感激！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T02:22:42.830

问题是由于隐藏元素没有尺寸。如果您对数据表使用自动大小，那么当它检查 parent 的尺寸时，隐藏的选项卡 parent 没有宽度，因此您会看到渲染中的不规则性

你可以尝试几件事：

1.  在 css 和数据表选项中设置宽度或
2.  仅在选择标签并可见时初始化表。（标签`shown`事件）
3.  将选项卡内容元素 css 调整为不隐藏但放置在屏幕外，以便它们仍然具有尺寸

最后一个使用 jQueryUI 选项卡很容易做到，并且是解决渲染宽度依赖小部件（如谷歌地图）的常见做法。我不确定引导程序如何管理选项卡内容元素显示

# java - 我需要帮助在 java 中使用 Jbutton ActionListener 在屏幕上移动图像图标

> ID：14299902
> 
> 赞同：1
> 
> 时间：2013-01-13T01:53:17.647
> 
> 标签：java, swing, imageicon

我正在做一个类似于 Unblockme 游戏的程序，您必须在其中移动积木并将红色积木移到另一侧才能进入下一关。现在我加载程序，单击一级，然后我可以选择 Redblock 的单选按钮，当我尝试单击右移 Jbutton 时，我在动作侦听器中将其编程为移动，但我没有尝试过像 3 天，我仍然卡住。谢谢，我将包括加载和绘制图像图标的加载图片类，并且我的标签框具有动作侦听器和其他所有内容。我发布的第一个类是 labelframe，然后是加载图片类。

```
 import javax.imageio.ImageIO;
    import javax.swing.*;
    import java.awt.image.BufferedImage;
    import java.awt.*;
    import java.awt.event.*;
    import java.io.*;

    public  class LabelFrame extends JFrame{

public LabelFrame( ) 
{
    super("The Structures Game");

    setSize(475,400);
    setLocation(350,200);
    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    setVisible(true);

    JMenuBar menubar = new JMenuBar();
    setJMenuBar(menubar);

    JMenu Change = new JMenu("Pick a Level");
    menubar.add(Change);
        JMenu Move = new JMenu("Move keys");
    menubar.add(Move);

    JMenu Options = new JMenu("Options");
    menubar.add(Options);

    JMenu About = new JMenu("About");
    menubar.add(About);

    JMenu Select = new JMenu("Select");
    menubar.add(Select);

    final JMenuItem black = new JMenuItem("Black BackGround");
    Options.add(black);

    final JMenuItem blue = new JMenuItem("Blue BackGround");
    Options.add(blue);

    final JMenuItem yellow = new JMenuItem("Yellow BackGround");
    Options.add(yellow);

    final JMenuItem green = new JMenuItem("Green BackGround");
    Options.add(green);

    final JMenuItem white = new JMenuItem("White BackGround");
    Options.add(white);

    JMenuItem info = new JMenuItem("infomation");
    About.add(info);

    JMenuItem Level1 = new JMenuItem("Level 1");
    Change.add(Level1);

    JMenuItem Level2 = new JMenuItem("Level 2");
    Change.add(Level2);

    JMenuItem Level3 = new JMenuItem("Level 3");
    Change.add(Level3);

    JMenuItem Level4 = new JMenuItem("Level 4");
    Change.add(Level4);

    JMenuItem Level5 = new JMenuItem("Level 5");
    Change.add(Level5);
    final JRadioButton redBlock = new JRadioButton("redblock");
    final JRadioButton blockverticala = new JRadioButton("2blockvertical");
    final JRadioButton blockverticalb = new JRadioButton("4blockvertical");
    final JRadioButton blockhorizontal = new JRadioButton("2blcokhorizontal");

    final JButton moveleft = new JButton("Left");
    final JButton moveright = new JButton("Right");
    final JButton moveup = new JButton("Up");
    final JButton movedown = new JButton("Down");

    Select.add(redBlock);
    Select.add(blockverticala);
    Select.add(blockverticalb);
    Select.add(blockhorizontal);
    Move.add(moveleft);
    Move.add(moveright);
    Move.add(moveup);
    Move.add(movedown);

    Level1.addActionListener(new ActionListener()
    {   
        public void actionPerformed(ActionEvent event)
        {
            final LoadingPictures levelpics = new LoadingPictures(1);

            add(levelpics);
            repaint();

            if(redBlock.isSelected())
            {
                moveright.addActionListener(new ActionListener()
                {   
                    public void actionPerformed(ActionEvent right)
                    {
                        //if(right.getSource() = moveright)
                        LoadingPictures.top+=50;

                        levelpics.repaint();
                    }});
            }

            else if(blockverticala.isSelected())
            {
                moveright.addActionListener(new ActionListener()
                {   
                    public void actionPerformed(ActionEvent right)
                    {

                    }});
            }

            else if(blockverticalb.isSelected())
            {
                moveright.addActionListener(new ActionListener()
                {   
                    public void actionPerformed(ActionEvent right)
                    {

                    }});
            }
            if(blockhorizontal.isSelected())
            {
                moveright.addActionListener(new ActionListener()
                {   
                    public void actionPerformed(ActionEvent right)
                    {

                    }});
            }

            black.addActionListener(new ActionListener()
            {
                public void actionPerformed(ActionEvent event)
                {
                    levelpics.setBackground(Color.black);

                }});
            blue.addActionListener(new ActionListener()
            {
                public void actionPerformed(ActionEvent event)
                {
                    levelpics.setBackground(Color.blue);

                }});
            yellow.addActionListener(new ActionListener()
            {
                public void actionPerformed(ActionEvent event)
                {
                    levelpics.setBackground(Color.yellow);

                }});
            green.addActionListener(new ActionListener()
            {
                public void actionPerformed(ActionEvent event)
                {
                    levelpics.setBackground(Color.green);

                }});
            white.addActionListener(new ActionListener()
            {
                public void actionPerformed(ActionEvent event)
                {
                    levelpics.setBackground(Color.white);

                }});

            }

    });

    info.addActionListener(new ActionListener(){
        public void actionPerformed(ActionEvent event)
        {   
            JOptionPane.showMessageDialog(null,"•This is our Final project for computer programming 3 \n" +
                                            "•Created by Jon Eagle and Nick Bonaventure\n•Based off of the " +
                                            "game by KIRA GAmes called UnBlock Me");
                        }});

} 
```

}

```
 import java.awt.BorderLayout;
    import java.awt.Graphics;

    import javax.swing.ImageIcon;
    import javax.swing.JPanel;

    public class LoadingPictures extends JPanel{

ImageIcon block = new ImageIcon ("2block.jpg");
ImageIcon block4vertical = new ImageIcon("4block.jpg");
ImageIcon redblock = new ImageIcon("redblockhorizontal.jpg");

static int top = 0;
static int topleft = 200;
private int j;
public LoadingPictures(int i)
{
    super();
    j = i;

}
public void paintComponent(Graphics g)
{
    super.paintComponent(g);
    if (j == 1)
    {

        g.drawImage(block4vertical.getImage(),300,200,this);
        g.drawImage(block.getImage(),200,200,this);
        g.drawImage(redblock.getImage(),top,topleft,this);
    }
}

    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-13T02:27:10.493

除了垃圾神示例，您还可以查看

*   [Java弹跳球](https://stackoverflow.com/questions/13022754/java-bouncing-ball/13022788#13022788)
*   [如何让线条动画更流畅？](https://stackoverflow.com/questions/13540534/how-to-make-line-animation-smoother/13547895#13547895)

虽然有点离题，但动画是一个复杂的话题。有许多非常好的基于 Swing 的开源动画库，您可以使用这些库来让您的生活更轻松......

*   [时序框架](http://java.net/projects/timingframework)
*   [三叉戟](http://kenai.com/projects/trident/pages/Home)

两者都非常出色，并且基于相似的理论，但做的事情不同。您必须确定它们是否适合您的需求。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-13T02:20:00.417

此[示例](https://stackoverflow.com/a/5797965/230513)使用按钮或键盘移动一行。你可以打电话`drawImage()`来`paintComponent()`代替`drawLine()`。必要的步骤是`repaint()`在每次改变位置后调用。

# html - 在元素点击时向下滚动 1000 像素

> ID：14299910
> 
> 赞同：1
> 
> 时间：2013-01-13T01:55:31.433
> 
> 标签：html, scroll, click

我有`div id="menuitem1"`，当有人点击该 div 时，我希望页面向下滚动`1000px`页面。

我知道这对谷歌来说很容易，但出于某种原因，即使在阅读了文章并尝试了各种事情之后，我也无法弄清楚。我是这个东西的新手，所以请理解这一点。谢谢！

```
<script type="text/javascript">
$("#menuitem1").click(function(){
$(window).scrollTo( {top:'1000px'}, 800 );
});
</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T02:02:29.473

你需要的 javascript 函数看起来会链接这个：

```
function pageScroll() {
        window.scrollBy(0,1000); // horizontal and vertical scroll increments
} 
```

对于 html 按钮，好吧，只是：

```
<input type="button" onClick="pageScroll()" value="Scroll Page"> 
```

祝你好运

# ios - TICoreDataSync 连接到 Web 服务器后端？

> ID：14299913
> 
> 赞同：5
> 
> 时间：2013-01-13T01:55:53.943
> 
> 标签：ios, core-data, sync, icloud, ticoredatasync

我一直在寻找 iCloud 的替代方案来进行核心数据同步，一个有希望的选择是[TICoreDataSync](http://timisted.github.com/TICoreDataSync)（[代码可以在这里找到](https://github.com/nothirst/TICoreDataSync)）。有没有将其修改为在自己的网络服务器上工作的示例，而不是将同步文件上传到 Dropbox？设置 TICoreDataSync 的最佳方式是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T00:12:28.757

您应该查看描述预期内容的[远程文件层次结构页面。](http://timisted.github.com/TICoreDataSync/remote-file-hierarchy.html)它似乎期望一个“哑”文件系统，它只需要对指定位置的读/写访问。它与仅存储二进制文件的 Dropbox 一起使用这一事实进一步证明了这一点。这种类型的服务可以以许多不同的方式实现，除了定义的层次结构之外，它们不依赖于 TICoreDataSync。您只需要一个允许对定义的路径进行标准读/写访问的服务器。要问的重要问题是如何将 TICoreDataSync 指向特定端点？答案似乎是通过初始化[TICDSFileManagerBasedApplicationSyncManager](http://timisted.github.com/TICoreDataSync/reference/html/Classes/TICDSFileManagerBasedApplicationSyncManager.html)并设置`applicationContainingDirectoryLocation`财产。从这里的文档中模糊不清的一件事是它没有说明这是否必须是本地目录的 URL。理论上它是一个 NSURL 并且可以设置为一个 HTTP URL 假设 HTTP 服务器正确处理 I/O 方法。

这是我开始在您自己的服务器上存储信息的地方。根据您的问题标签，您似乎正在构建一个 iOS 应用程序，不幸的是，他们的文档只讨论了将 DropboxSDK 与 iOS 应用程序和相应的`TICDSDropboxSDKBasedApplicationSyncManager`类一起使用。如果您正在构建 Mac 应用程序，服务器组件可能对您的应用程序是透明的。您可以写入从服务器挂载的本地目录，无论是 WebDav、SMB、SSH 等...并使用`TICDSFileManagerBasedApplicationSyncManager`该类。

综上所述，您可能对其他一些方法感兴趣。如果您对本土解决方案感兴趣，可以查看我编写的这些教程。

[如何将核心数据与 Web 服务同步 - 第 1 部分](http://www.raywenderlich.com/15916/how-to-synchronize-core-data-with-a-web-service-part-1) [如何将核心数据与 Web 服务同步 - 第 2 部分](http://www.raywenderlich.com/how-to-synchronize-core-data-with-a-web-service-part-2)

为了使教程生产中的应用程序有价值，还有很多工作要做，但它可能是有见地的。

另一个选项是[AFIncrementalStore](https://github.com/AFNetworking/AFIncrementalStore)，它提供 CoreData 和您的 Web 服务后端之间的无缝通信。

无论如何，像这样同步数据是一项相当大的任务，因此请准备好花费大量时间进行开发以使其正确！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T01:48:14.627

你看过[AFIncrementalStore](https://devcenter.heroku.com/articles/ios-core-data-buildpack-app)吗？这个[Heroku 介绍视频](http://mobile.heroku.com)讲述了设置 iOS 应用程序是多么容易，并且托管对于低于生产级别的数据访问和存储是免费的。可能是值得研究的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-15T04:03:47.000

Chris 是正确的，因为 TICoreDataSync 只需要一个您可以访问的普通分层文件系统。虽然我们没有在其他服务（iCloud 功能分支除外）上使用 TICDS 的任何其他示例，但您希望首先查看 subclassing `TICDSApplicationSyncManager`、`TICDSDocumentSyncManager`和位于`Generic Operations`组中的 NSOperations。您可以在项目 wiki 上的更新文档中阅读更多相关信息：[https ://github.com/nothirst/TICoreDataSync/wiki/Extending-the-Framework](https://github.com/nothirst/TICoreDataSync/wiki/Extending-the-Framework)

更具体地说，假设您想通过 Amazon S3 实例进行同步。您将创建`TICDSAmazonS3ApplicationSyncManager`和`TICDSAmazonS3DocumentSyncManager`类。然后，在注册同步管理器时，您将使用这些特定的子类。需要记住的重要一点是，这些特定于服务的子类只需要实现框架的通信层，所有同步逻辑都在超类中处理。此外，通信点定义明确。

我们最近在项目 wiki 上发布了框架的 1.0.2 版以及更新的文档、示例应用程序和教程。检查一下，如果遇到任何问题，请在项目的[问题](https://github.com/nothirst/TICoreDataSync/issues)页面上打开一个问题

# javascript - 制作一个简单的 javascript 图片库

> ID：14299917
> 
> 赞同：1
> 
> 时间：2013-01-13T01:57:10.010
> 
> 标签：javascript, image-gallery

我正在尝试制作一个非常简单的图片库。大部分设计已经完成（使用 JQuery）......但现在我正在尝试思考改变图像所需的逻辑。对于这一部分，我想我会使用 javaScript 而不是 Jquery 来保持简单。我对 javaScript 语法不太熟悉，但这是我开始的尝试。这是创建图库的可行方法吗？我知道将图像作为背景并不是一个好主意，但出于测试目的，我不想裁剪图像——因此将图像设置为背景会修剪图像以适应。

我还试图考虑如何最初将 ImageCnt 设置为零......当页面加载时，可以使用 onload 函数将 ImageCnt 设置为 0 吗？可以将 var 传递给 next() 吗？如果是这样，我可以将当​​前 ImageCnt 从 onClick 传递给函数。

PS。我省略了很多代码以使其易于阅读，但如果有必要，我可以提供更多代码。

谢谢！这是我的代码：

# Javascript

```
<script>
  function next()
  {
    var myImage= new Array(); 
    myImage[0]="penguins.jpg";       
    myImage[1]="desert.jpg";
    myImage[2]="jellyfish.jpg";
    myImage[3]="flower.jpg"; 

    ImageCnt++;

    document.getElementById("whiteBox").style.background = 'url(myImage[ImageCnt])';
  }
</script> 
```

# html

```
<a href="#" onclick="next()"><img src="next.png"/></a> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-02-24T00:32:52.380

这是我从[http://extremestudio.ro/](http://extremestudio.ro/create-a-html-photo-gallery-valid-for-all-browsers/)获得的简单内联非 jQuery 图像库的最佳示例：

```
<!DOCTYPE html PUBLIC>
<html>
  <head>
    <title>
      Simple and Effective Photo Gallery with HTML and JavaScript
    </title>

    <style type="text/css">
      body {
        background: #222;
        margin-top: 20px;
      }

      h3 {
        color: #eee;
        font-family: Verdana;
      }

      .thumbnails img {
        height: 80px;
        border: 4px solid #555;
        padding: 1px;
        margin: 0 10px 10px 0;
      }

      .thumbnails img:hover {
        border: 4px solid #00ccff;
        cursor:pointer;
      }

      .preview img {
        border: 4px solid #444;
        padding: 1px;
        width: 400px;
      }
    </style>
  </head>

  <body>
    <div class="gallery" align="center">
      <h3>Simple and Effective Photo Gallery with HTML and JavaScript</h3><br/>

      <div class="thumbnails">
        <img onmouseover="preview.src=img1.src" id="img1" src="http://bit.ly/2rz3hy" alt="Image Not Loaded"/>
        <img onmouseover="preview.src=img2.src" id="img2" src="http://bit.ly/1ug1e6" alt="Image Not Loaded"/>
        <img onmouseover="preview.src=img3.src" id="img3" src="http://bit.ly/1yIAYc" alt="Image Not Loaded"/>
        <img onmouseover="preview.src=img4.src" id="img4" src="http://bit.ly/2LHyDW" alt="Image Not Loaded"/>
        <img onmouseover="preview.src=img5.src" id="img5" src="http://bit.ly/2wyHSR" alt="Image Not Loaded"/>
        <img onmouseover="preview.src=img6.src" id="img6" src="http://bit.ly/yRo1i" alt="Image Not Loaded"/>
      </div><br/>

      <div class="preview" align="center">
        <img id="preview" src="http://bit.ly/2rz3hy" alt="No Image Loaded"/>
      </div><br/>
    </div>
  </body>
</html> 
```

唯一的 javascript 嵌入在标签中，但可以很容易地移动到脚本标签中以获得更大的灵活性。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-13T02:04:35.380

最重要的是，您需要通过连接（“+”运算符）其不同部分来构建背景属性，如下所示；否则，如果将其设为静态字符串，它将不会被数组中的值替换。

还使用全局范围来声明和初始化您的图像数组和计数器：

```
<script>
var myImage= new Array(); 
myImage[0]="penguins.jpg";       
myImage[1]="desert.jpg";
myImage[2]="jellyfish.jpg";
myImage[3]="flower.jpg"; 

var ImageCnt = 0;

function next(){
    ImageCnt++;
    document.getElementById("whiteBox").style.background = 'url(' + myImage[ImageCnt] + ')';
  }
</script> 
```

最后，从 onclick 返回 false 否则您将重新加载页面：

```
<a href="#" onclick="next();return false;"><img src="next.png"/></a> 
```

# java - 如何禁用android的状态栏向下滚动动画？

> ID：14299924
> 
> 赞同：0
> 
> 时间：2013-01-13T01:59:37.697
> 
> 标签：java, android, uistatusbar

即使在三星 Galaxy Note 2 中，当您拉下滚动条时，也需要一些时间才能显示出来，如果拉得不够多，它会回到顶部（再次隐藏）。

那么我们如何禁用这个不必要的动画（考虑到它不会打开一半）？

我们是否必须使用 java 中的一些技巧来制作程序，或者是否已经有一个应用程序可以做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T17:42:37.383

我找到了这个问题的解决方案，在代码 setContextView(...) 之前粘贴下一个代码

```
ColorDrawable colorDrawable = new ColorDrawable( Color.TRANSPARENT );
getWindow().setBackgroundDrawable( colorDrawable ); 
```

这对我来说可以！

# java - Java 客户端-服务器：函数 getInetAdress 未返回所需的客户端 IP 地址

> ID：14299927
> 
> 赞同：-1
> 
> 时间：2013-01-13T02:00:43.240
> 
> 标签：java, client-server, ip-address

我有这个简单的服务器代码：

```
public class Server {

 public static void main(String[] args) {

    try {
        ServerSocket sSocket = null;
        int serverPort = 57293;
        try {

            sSocket = new ServerSocket(serverPort);
            Socket userSocket = sSocket.accept();
            System.out.println(userSocket.getInetAddress().toString());

        } catch (IOException listenEX) {
            System.out.println("Could not listen on port: " + serverPort);
        }

        sSocket.close();
    } catch (IOException ex) {
        System.out.println(ex.getMessage());
      }
    }

 } 
```

服务器侦听端口`57293`和 IP`0.0.0.0`

它只是等待一个连接，然后打印客户端的 IP 地址。这是客户端代码：

```
 public class Client {

public static void main(String[] args) throws IOException {

    Socket serverSocket = new Socket("192.168.217.1", 57293); 
    DataInputStream in = new DataInputStream(serverSocket.getInputStream());
    DataOutputStream out = new DataOutputStream(serverSocket.getOutputStream());

    }
 } 
```

现在作为客户端内的服务器IP，我输入计算机的本地IP。如果我这样做，服务器将打印相同的 IP 作为结果，即`/192.168.217.1`

否则，如果在客户的代码中我更改了行

`Socket serverSocket = new Socket("192.168.217.1", 57293);` 到 `Socket serverSocket = new Socket("127.0.0.1", 57293);`

我刚刚更改了服务器 IP，服务器会将`127.0.0.1`IP 打印为客户端的 IP 地址。

我不明白这里发生了什么。似乎服务器没有打印客户端的 IP 地址，而是打印自身的地址。

我怎样才能避免这种情况发生？`192.168.217.1`如果客户端也在本地运行，我希望服务器打印

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T02:55:54.347

127.0.0.1 是环回地址。它仅在该主机内部可见。客户端可以连接到它的唯一方法是自己使用它。所以源地址和目标地址是一样的。

我不明白为什么这对你来说是个问题。127.0.0.1 始终表示本地主机，无论主机的外部 IP 是什么。你得到的结果没有错。这是一个完全有效的 IP 地址，它可以正确识别客户端。

# c - 常规文件上的 Kqueue

> ID：14299928
> 
> 赞同：6
> 
> 时间：2013-01-13T02:01:29.877
> 
> 标签：c, macos, sockets, operating-system, kqueue

kqueue（在 OS X 上）对读/写常规文件有用吗？我知道 epoll对 Linux 上的常规文件*没有*用，所以我想知道 kqueue 是否也是如此。

编辑：我不是说读/写文件，显然 read() 和 write() 是为了那个。我的意思是，“kqueue 对于检测文件何时可读/可写真的有用吗？”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T02:24:47.473

内核队列是[“允许您拦截内核级事件以接收有关套接字、进程、文件系统和系统其他方面的更改的通知”的机制。](http://developer.apple.com/library/mac/documentation/MacOSX/Conceptual/OSX_Technology_Overview/SystemTechnology/SystemTechnology.html#//apple_ref/doc/uid/TP40001067-CH207-SW30)

我过去曾使用它们来检测文件（或热文件夹中）[何时发生操作。](https://developer.apple.com/library/mac/#documentation/Darwin/Conceptual/FSEvents_ProgGuide/KernelQueues/KernelQueues.html)不过，我不相信它们可以用于“读取”和“写入”文件。如果您愿意，您也可以使用 MacOS 原生函数或常规 UN*X 风格的“ `fopen`”、“ `fwrite`”和“ `fread`”调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T05:24:42.067

是的，kqueue 可用于监视文件的可读性。从手册页：

```
 EVFILT_READ      Takes a file descriptor as the identifier, and returns
                  whenever there is data available to read.  The behavior
                  of the filter is slightly different depending on the
                  descriptor type.

 [...]

                  Vnodes
                      Returns when the file pointer is not at the end of
                      file.  data contains the offset from current posi-
                      tion to end of file, and may be negative. 
```

（在这种情况下，“vnodes”是常规文件。）

由于常规文件始终是可写的，因此应用`EVFILT_WRITE`到它们是没有意义的。

# html - HTML的背景和页脚问题

> ID：14299936
> 
> 赞同：1
> 
> 时间：2013-01-13T02:02:48.980
> 
> 标签：html, background, footer

我对html有非常基本的了解。非常基本。

我正在整理我的博客网站以替换我的 google-sites 网站。这只是一个投资组合网站，所以重要的是外观。

[http://toddingtontoons.blogspot.com](http://toddingtontoons.blogspot.com)

我的问题是页脚。本质上，无论分辨率如何，我都希望页脚和背景对齐。

后台代码如下。

```
background: url(https://sites.google.com/site/toddsetter/TODDINGTONTOONSTOP.png) repeat-x, 
url(https://sites.google.com/site/toddsetter/TODDINGTONTOONSBOTTOM.png) repeat;
background-position:center; 
```

页脚只是博客页脚模板中的居中 img。它最终将具有回家和其他地方的链接。

此时页脚与 bg 完美对齐，直到屏幕小于 1280 宽度。

我尝试了一些我不理解的荒谬的东西，并且不断遇到问题。有人可以建议他们如何解决这个问题吗？

我一直在尝试改变页脚以采取不同的方式，并且还试图在屏幕宽于 1280 时使 bg 仅居中。我只想让背景紧贴博客的主体。

任何投入将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T03:09:15.890

[**jsFiddle DEMO**](http://jsfiddle.net/9WxWb/show/) *（删除`/show/`URL 以访问 jsFiddle 编辑页面。）*

当您查看您网站的 HTML 页面时，您有一个单独的**导航部分**和一个单独的**内容部分**。

**页脚**的问题来自位于**内容部分**内的那个部分。

重新定位**页脚**，使其位于该部分之外并相应地重新配置您的 CSS。

基本上，它归结为布局问题。

**当前的：**

```
<body>
  <nav></nav>
   <content>
     <footer></footer>
   </content>
</body> 
```

**推荐的：**

```
<body>
  <nav></nav>
  <section></section>
  <footer></footer>
</body> 
```

首先是在您的网页中[**修复这些错误。**](http://validator.w3.org/check?uri=http%3A%2F%2Ftoddingtontoons.blogspot.com%2F&charset=%28detect+automatically%29&doctype=Inline&group=0)

然后，将、、和部分中的相关**背景图像**用作。`body``nav``section``footer``background-images`

有关详细的评论和提示，请查看上述演示中的 jsFiddle CSS 面板。

**旁注：**`<!-- -->`在您当前的标记中，您在 CSS 脚本标记中具有 HTML 注释语法（即）。相反，您需要使用 CSS 注释语法（即`/* */`）。另一种选择是***在脚本标签之外***使用 HTML 注释语法。

# java - Android：如何检查所有内容何时加载？

> ID：14299942
> 
> 赞同：0
> 
> 时间：2013-01-13T02:03:50.667
> 
> 标签：java, android

我在极早的 android 加载阶段不断收到 Nullpointer 异常：

```
Launching instrumentation android.test.InstrumentationTestRunner on 3031C2FF986F00EC
 [2013-01-13 02:53:30 - Login] Test run failed: Instrumentation run failed due to 'java.lang.NullPointerException' 
```

这是因为我插入了一些触发此错误的 OrmLiteSqliteOpenHelper（我猜也可能是 SqliteOpenHelper）子类方法中的一段代码。似乎这个代码在加载过程中被调用得太早，以至于发生了这种情况。不幸的是，程序在加载过程的早期就没有断点停止。

我已经在其他代码位置广泛并成功地测试了代码。

那么我怎么知道什么时候所有的东西都加载到了android中，我可以在没有错误的情况下运行这段代码呢？

仅供参考：它是一段从服务器获取数据库内容并将其保存到本地 sqllite 数据库的代码，以便在我启动程序时数据库始终处于相同的状态（由服务器决定）。

好的，我会尝试编辑并发布一些代码

```
public class DatabaseTests extends ActivityInstrumentationTestCase2<UebersichtEinsaetze> {
    private DatabaseHelperBase helper;
    private UebersichtEinsaetze mainActivity;

    public DatabaseTests() {
        super("de.innosoft.android", UebersichtEinsaetze.class);
    }

    // throws exception -.-
    protected void setUp() throws Exception {
        super.setUp(); 
```

它与单元测试文件一起停在那里。不知道它从那里去哪里，但我知道它到达了（因为它在 UebersichtEinsaetze 的某个地方调用了该函数，并且超出了它与 SimpleCursorFactory 一起使用的地方）：

```
public <T extends Entity<T, I>, I> RuntimeExceptionDao<T, I> getRTE(Class<T> clazz) {
    RuntimeExceptionDao<T, I> rte = super.getRTE(clazz);
            initTestdata();
    return rte;
} 
```

initTestdata 是：

```
 if (!init)
            {
                new HttpBase(new HttpGet(), "setup", "InitTestdata").evaluate();
                if (!isTestdataUpToData())
                {
                    this.dropTables();
                    this.createTables();
                    try {
                        Map<Class<?>, List<Object>> m = ControllerMethod.GETALL.testServer();
                        for (EntityRef<?> entityRef : Entity.entities) {
                            List<Object> l = m.get(entityRef.getClazz());
                            if (entityRef.getSizeOfTestTable() != l.size())
                                throw new Exception("Testdata inconsistency");
                            for (Object entity : l) {
                                Object dao = this.getClass().getMethod("getRTE", Class.class).invoke(this, entityRef.getClazz());
                                dao.getClass().getMethod("create", Object.class).invoke(dao, entity);
                            }
                        }
                    } catch (Exception e) {
                        ExceptionHandler.handle(e);
                    }
                }
                init = true;
            }
        } 
```

这就是发生异常的地方。如果我删除此代码块并将某个目录粘贴到单元测试中（例如），它就可以工作。但我不想那样做。

日志猫：

```
 01-13 03:32:18.594: I/dalvikvm(24888): Turning on JNI app bug workarounds for target SDK version 8...
01-13 03:32:18.707: D/dalvikvm(24888): GC_CONCURRENT freed 146K, 13% free 2657K/3044K, paused 3ms+8ms, total 33ms
01-13 03:32:18.765: I/ActivityThread(24888): Pub de.innosoft.android: de.innosoft.android.test
01-13 03:32:18.816: D/dalvikvm(24888): GC_CONCURRENT freed 164K, 13% free 2983K/3396K, paused 3ms+3ms, total 37ms
01-13 03:32:18.886: D/dalvikvm(24888): GC_CONCURRENT freed 228K, 14% free 3222K/3720K, paused 3ms+2ms, total 23ms
01-13 03:32:18.886: D/dalvikvm(24888): WAIT_FOR_CONCURRENT_GC blocked 13ms
01-13 03:32:18.914: D/dalvikvm(24888): GC_FOR_ALLOC freed 245K, 16% free 3317K/3912K, paused 16ms, total 16ms
01-13 03:32:18.937: D/dalvikvm(24888): GC_FOR_ALLOC freed 241K, 15% free 3411K/4008K, paused 16ms, total 16ms
01-13 03:32:19.011: D/dalvikvm(24888): GC_CONCURRENT freed 241K, 12% free 3631K/4112K, paused 2ms+3ms, total 38ms
01-13 03:32:19.140: D/dalvikvm(24888): GC_CONCURRENT freed 96K, 8% free 4031K/4340K, paused 3ms+3ms, total 49ms
01-13 03:32:19.265: D/dalvikvm(24888): GC_CONCURRENT freed 324K, 12% free 4259K/4824K, paused 2ms+4ms, total 51ms
01-13 03:32:19.422: D/dalvikvm(24888): GC_CONCURRENT freed 505K, 15% free 4387K/5132K, paused 2ms+4ms, total 55ms
01-13 03:32:19.484: W/dalvikvm(24888): Exception Ljava/lang/NullPointerException; thrown while initializing Lde/innosoft/android/data/Consts;
01-13 03:32:19.484: D/AndroidRuntime(24888): Shutting down VM
01-13 03:32:19.484: W/dalvikvm(24888): threadid=1: thread exiting with uncaught exception (group=0x40db5930)
01-13 03:32:19.492: E/AndroidRuntime(24888): FATAL EXCEPTION: main
01-13 03:32:19.492: E/AndroidRuntime(24888): java.lang.ExceptionInInitializerError
01-13 03:32:19.492: E/AndroidRuntime(24888):    at de.innosoft.android.data.HttpBase.<init>(HttpBase.java:76)
01-13 03:32:19.492: E/AndroidRuntime(24888):    at de.innosoft.android.data.DatabaseHelperTestdata.initTestdata(DatabaseHelperTestdata.java:46)
01-13 03:32:19.492: E/AndroidRuntime(24888):    at de.innosoft.android.data.DatabaseHelperTestdata.getRTE(DatabaseHelperTestdata.java:75)
01-13 03:32:19.492: E/AndroidRuntime(24888):    at de.innosoft.android.test.onCreate(test.java:66)
01-13 03:32:19.492: E/AndroidRuntime(24888):    at android.content.ContentProvider.attachInfo(ContentProvider.java:1058)
01-13 03:32:19.492: E/AndroidRuntime(24888):    at android.app.ActivityThread.installProvider(ActivityThread.java:4969)
01-13 03:32:19.492: E/AndroidRuntime(24888):    at android.app.ActivityThread.installContentProviders(ActivityThread.java:4582)
01-13 03:32:19.492: E/AndroidRuntime(24888):    at android.app.ActivityThread.handleBindApplication(ActivityThread.java:4524)
01-13 03:32:19.492: E/AndroidRuntime(24888):    at android.app.ActivityThread.access$1300(ActivityThread.java:150)
01-13 03:32:19.492: E/AndroidRuntime(24888):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1304)
01-13 03:32:19.492: E/AndroidRuntime(24888):    at android.os.Handler.dispatchMessage(Handler.java:99)
01-13 03:32:19.492: E/AndroidRuntime(24888):    at android.os.Looper.loop(Looper.java:137)
01-13 03:32:19.492: E/AndroidRuntime(24888):    at android.app.ActivityThread.main(ActivityThread.java:5191)
01-13 03:32:19.492: E/AndroidRuntime(24888):    at java.lang.reflect.Method.invokeNative(Native Method)
01-13 03:32:19.492: E/AndroidRuntime(24888):    at java.lang.reflect.Method.invoke(Method.java:511)
01-13 03:32:19.492: E/AndroidRuntime(24888):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:795)
01-13 03:32:19.492: E/AndroidRuntime(24888):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:562)
01-13 03:32:19.492: E/AndroidRuntime(24888):    at dalvik.system.NativeStart.main(Native Method)
01-13 03:32:19.492: E/AndroidRuntime(24888): Caused by: java.lang.NullPointerException
01-13 03:32:19.492: E/AndroidRuntime(24888):    at de.innosoft.android.data.Consts.<clinit>(Consts.java:36)
01-13 03:32:19.492: E/AndroidRuntime(24888):    ... 18 more 
```

# python - 我如何最好地存储每天收集的网络爬取数据以查找更改

> ID：14299943
> 
> 赞同：2
> 
> 时间：2013-01-13T02:03:57.530
> 
> 标签：python, web-crawler

我每天都在爬取一个网站，以确定库存产品的变化。

我如何最好地存储这些数据以便在以前的日期之间进行比较？

数据如下所示：

```
{'name': productname, 'url': "URL to product", "status": "In stock or not", "variants": ['3', '7', '9']} 
```

大约有1000种产品。

我需要每天存储一次所有这些数据，这样我就可以检索它并与以前的日期进行比较，以记录产品是否缺货/缺货。我还需要查看是否已删除/添加了变体。

我不知道应该如何构建它。我应该使用数据库、几个 CSV 文件、文本文件吗？

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T02:23:44.910

这不是一个特别大的数据量，所以`pickle`应该足够了（而且最简单），除非你特别关心性能（你不是在嵌入式系统上运行 python，是吗？）。

要查看是否有任何更改，您需要做的就是保留之前抓取的数据，因此您只需要存储 1000 个产品。当您检测到更改时，您可以将其记录到文件中，例如，如果您计划进行**多次**爬网或让系统**长时间**运行，则可以将其记录到数据库中。

请注意，这种方法只会保存您选择的变量的更改。如果您后来决定想要某个其他变量的变更日志，您将无法计算它。

`status`此外，如果它只能采用两个值，则将值转换为布尔值可能是值得的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T08:43:45.437

在这种情况下，我发现最好将数据存储在文本文件中，以便您可以读取文件以检查数据并在必要时手动编辑。将其存储在数据库中将是矫枉过正。

您可以将其存储在单个 CSV 文件中，其中包含名称、url、状态和变体作为字段。在每次运行期间，您都可以读取 CSV 文件、查找更改并更新文件。在调试过程之前，您还可以保存文件的先前版本，以便在发生更改时查看更改。

# android - android中的Z索引？

> ID：14299944
> 
> 赞同：9
> 
> 时间：2013-01-13T02:04:01.377
> 
> 标签：android, xml, listview, layout, slidingdrawer

我在一个 xml 中有多个元素 .. listview、slidingdrawer、edittext 和按钮......我想滑动抽屉顺序总是在另一个元素前面......但我不能......

这是我的xml

```
<com.ltvie.chat.MultiDirectionSlidingDrawer
    xmlns:my="http://schemas.android.com/apk/res/com.ltvie.chat"
    android:id="@+id/drawer"
    my:direction="topToBottom"
    android:layout_width="fill_parent"
    android:layout_height="match_parent"
    my:handle="@+id/handle"
    my:content="@+id/content"
    >
   <include
        android:id="@id/content"
        layout="@layout/pen_content"
        android:gravity="top"           
        />
     <ImageView
        android:id="@id/handle"
        android:layout_width="wrap_content"
        android:layout_height="5dp"
        android:src="@drawable/sliding_drawer_handle_bottom" />          
</com.ltvie.chat.MultiDirectionSlidingDrawer>

<ListView android:id="@+id/listView1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:stackFromBottom="true"
    android:transcriptMode="alwaysScroll"
    android:layout_above="@+id/InnerRelativeLayout"
    android:layout_alignParentTop="true" 
/>  
 <RelativeLayout 
    android:id="@+id/InnerRelativeLayout"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true" >
    <Button 
        android:text="kirim" 
        android:id="@+id/button_send"
        android:layout_alignParentRight="true" 
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:onClick="tambahItems"          
        >

    </Button>           
</RelativeLayout> 
```

我的图片中 mycode 的结果如下：D

![在此处输入图像描述](../Images/1dfb5d4c5453d81de5997d27dcee585a.png)

我想知道怎么解决？？

看待，

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-01-13T02:14:48.683

您的 xml 不包含您的外部布局，但我认为它是一个相对布局。在 a`RelativeLayout`中，元素的 z 级别由它们添加到容器中的顺序决定。稍后添加的视图将位于顶部。尝试将滑动抽屉移动到外部容器的底部。像这样 -

```
<ListView android:id="@+id/listView1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:stackFromBottom="true"
    android:transcriptMode="alwaysScroll"
    android:layout_above="@+id/InnerRelativeLayout"
    android:layout_alignParentTop="true" 
/>  
 <RelativeLayout 
    android:id="@+id/InnerRelativeLayout"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true" >
    <Button 
        android:text="kirim" 
        android:id="@+id/button_send"
        android:layout_alignParentRight="true" 
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:onClick="tambahItems"          
        >

    </Button>           
</RelativeLayout> 

<com.ltvie.chat.MultiDirectionSlidingDrawer
    xmlns:my="http://schemas.android.com/apk/res/com.ltvie.chat"
    android:id="@+id/drawer"
    my:direction="topToBottom"
    android:layout_width="fill_parent"
    android:layout_height="match_parent"
    my:handle="@+id/handle"
    my:content="@+id/content"
    >
   <include
        android:id="@id/content"
        layout="@layout/pen_content"
        android:gravity="top"           
        />
     <ImageView
        android:id="@id/handle"
        android:layout_width="wrap_content"
        android:layout_height="5dp"
        android:src="@drawable/sliding_drawer_handle_bottom" />          
</com.ltvie.chat.MultiDirectionSlidingDrawer> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2021-03-18T01:48:29.317

您可以根据需要为 Z 添加翻译（1dp，2pd，...），例如：

```
<ImageView
    android:id="@+id/imageView0"
    android:layout_width="110dp"
    android:layout_height="110dp"
    android:layout_marginTop="25dp"
    android:contentDescription="@string/desc"
    android:translationZ="1dp"
    app:srcCompat="@drawable/ic_icon" /> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2021-07-29T12:27:20.153

如果不是相对布局，可以使用 [your_variable].bringToFront()。

这对我行得通！（而且我正在使用约束布局）

# laravel - 如何在 Eloquent ORM 中按多对多关系的数据透视表的字段进行排序

> ID：14299945
> 
> 赞同：32
> 
> 时间：2013-01-13T02:04:08.970
> 
> 标签：laravel, eloquent

我已经使用 Eloquent ORM 一段时间了，我很了解它，但是我不能做以下事情，虽然**在 Fluent 中很容易做到**。

我有一个多对多歌曲的用户，中间表是 song_user （应该是这样）。从播放次数来看，我想获得用户的热门歌曲。当然，播放计数存储在中间表中。

我可以用 Fluent 做到这一点：

```
$songs = DB::table('songs')
    ->join('song_user', 'songs.id', '=', 'song_user.song_id')
    ->where('song_user.user_id', '=', $user->id)
    ->orderBy("song_user.play_count", "desc")
    ->get(); 
```

简单的。但我想在 Eloquent 中做到这一点，这当然**行不通：**

```
$songs = Song::
    with(array("song_user" => function($query) use ($user) {
        $query->where("user_id", "=", $user->id)->orderBy("play_count", "desc");
    })) 
```

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2013-06-12T12:35:52.277

Not sure if you plan to move to Laravel 4, but here's an Eloquent example for sorting by a pivot tables fields:

```
public function songs() {
  return $this
    ->belongsToMany('Song')
    ->withPivot('play_count')
    ->orderBy('pivot_play_count', 'desc');
} 
```

`withPivot` is like the eloquent `with` and will add the `play_count` field from the pivot table to the other keys it already includes. All the pivot table fields are prefixed with `pivot` in the results, so you can reference them directly in the `orderBy`.

I've no idea what it would look like in Laravel 3, but perhaps this will help point you in the right direction.

Cheers!

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-15T20:11:16.257

我刚刚在用户指南中找到了一些东西，显然您需要该[`with()`](http://laravel.com/api/class-Laravel.Database.Eloquent.Relationships.Has_Many_And_Belongs_To.html#_with)方法。

从[用户指南](http://laravel.com/docs/database/eloquent#many-to-many)：

> 默认情况下，只会返回数据透视表中的某些字段（两个 id 字段和时间戳）。如果您的数据透视表包含其他列，您也可以使用 with() 方法获取它们：
> 
> ```
> class User extends Eloquent {
>   public function roles()
>   {
>     return $this->has_many_and_belongs_to('Role', 'user_roles')->with('column');
>   }
> } 
> ```

因此，您可以在定义您的关系时使用与此类似的内容：

```
$this->has_many_and_belongs_to('User')->with('playcount'); 
```

## 例子

我只是用它来确保它有效......

```
class Song extends Eloquent {
    function users()
    {
        return $this->has_many_and_belongs_to('User')->with('playcount');
    }
}

class User extends Eloquent {
    function songs()
    {
        return $this->has_many_and_belongs_to('Song')->with('playcount');
    }
}

// My test method
class TestOrm extends PHPUnit_Framework_TestCase {
    public function testSomethingIsTrue()
    {
        foreach(User::find(3)->songs()->order_by('playcount')->get() as $song)
            echo $song->name, ': ', $song->pivot->playcount, "\n";
        echo "\n";
        foreach(User::find(3)->songs()->order_by('playcount','desc')->get() as $song)
            echo $song->name, ': ', $song->pivot->playcount, "\n";
    }
} 
```

## 输出

```
Jingle Bells: 5
Mary had a little lamb: 10
Soft Kitty: 20
The Catalyst: 100

The Catalyst: 100
Soft Kitty: 20
Mary had a little lamb: 10
Jingle Bells: 5 
```

**注意**：不使用`order_by()`结果按`ascending`顺序排列并非巧合`playcount`。我通过测试确认了这一点（因为我还不知道如何在单元测试中显示查询），但您可能不应该依赖这种行为。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-13T07:28:54.330

任何在 Fluent 中可用的方法也应该在 Eloquent 中可用。也许这就是你要找的？

```
$songs = Song->join('song_user', 'songs.id', '=', 'song_user.song_id')
->where('song_user.user_id', '=', $user->id)
->orderBy("song_user.play_count", "desc")
->get(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-30T15:09:54.190

我一直在做这个（在几个版本上），只是像你一样使用关系方法。我经常在数据透视表中使用“订单”列，然后执行类似的操作。

```
$article->tags()->order_by( 'order')->get(); 
```

如果连接表中有名为“order”的列，这可能会不明确。如果是这样，您需要指定 ->order_by( 'article_tag.order' )。是的，您需要使用 ->with() 在结果集中获取该列。就风格而言，我会将 with() 排除在关系方法之外，而只返回普通关系对象。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-09-26T14:34:36.460

在您的 Eloquent 模型中，如果您包含表名，则可以链接 orderBy 列：

```
return $this->belongsToMany('App\Post')->withTimestamps()->orderByDesc('posts.created_at'); 
```

# c# - 选择查询 sql C# 如何将结果输出到 DataGrid

> ID：14299949
> 
> 赞同：0
> 
> 时间：2013-01-13T02:04:33.457
> 
> 标签：c#, sql, datagridview

如何将优化查询的结果输出到名为“customerDataGridView”的数据网格视图？

```
string strCon = Properties.Settings.Default.PID2dbConnectionString;

using (OleDbConnection conn = new OleDbConnection(strCon)) {
   conn.Open();
   string strSql = "SELECT  * FROM customer WHERE City =Belfast";
   OleDbDataAdapter adapter = new OleDbDataAdapter(new OleDbCommand(strSql, conn));
} 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T02:18:35.240

为 ASP.Net 尝试这样的事情：

```
DataSet ds = new DataSet();
OleDbDataAdapter oledbAdapter = New OleDbDataAdapter(strSql, connection);
oledbAdapter.Fill(ds);
customerDataGridView.DataSource = ds.Tables(0);
customerDataGridView.DataBind(); 
```

或者对于 WinForms 是这样的：

```
DataSet ds = new DataSet();
OleDbDataAdapter oledbAdapter = New OleDbDataAdapter(strSql, connection);
oledbAdapter.Fill(ds);
customerDataGridView.DataSource = ds.Tables(0); 
```

祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T02:38:47.777

尝试这个

```
DataSet ds = new DataSet();
OleDbDataAdapter oda = New OleDbDataAdapter(strSql, conn);
oda.Fill(ds);
customerDataGridView.DataSource = ds.Tables(0); 
```

对于你不需要的 winform 控制`DataBind()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T02:19:47.103

在您的代码之后尝试以下操作：

```
DataTable table = new DataTable();
adapter.Fill(table);
customerDataGridView.AutoGenerateColumns = True
customerDataGridView.Datasource = table; 
```

# c# - 从字符串转换日期和/或时间时转换失败

> ID：14299950
> 
> 赞同：1
> 
> 时间：2013-01-13T02:04:33.867
> 
> 标签：c#, asp.net, sql, datetime, type-conversion

我正在尝试将 a 存储`datetime`到 SQL 数据库中。我`datetime2(0)`为此使用变量。

但我总是得到这个例外：

> 从字符串转换日期和/或时间时转换失败

这是我产生错误的代码：

```
protected void InsertDB(string title, string desc, string cat, string path)
{
    string now = DateTime.Now.ToString("dd-MM-yyyy h:mm:ss tt");
    title = title.Length == 0 ? "Untitled" : title;
    cat = cat.Length == 0 ? "Uncategorized" : cat;
    string cs = ConfigurationManager.ConnectionStrings["DBCS"].ConnectionString;
    using (SqlConnection con = new SqlConnection(cs))
    {
        try
        {                    
            SqlCommand cmd = new SqlCommand(@"INSERT INTO gallery (img_title, img_desc, img_cat, img_date, img_path)
                                            VALUES (@title, @desc, @cat, @date, @path)", con);
            con.Open();
            cmd.Parameters.AddWithValue("@title", title.Trim());
            cmd.Parameters.AddWithValue("@desc", desc.Trim());
            cmd.Parameters.AddWithValue("@cat", cat.Trim());
            cmd.Parameters.AddWithValue("@date", now.Trim());
            cmd.Parameters.AddWithValue("@path", path.Trim());
            int result = cmd.ExecuteNonQuery();
            if (result == 1)
            {
                msg_lbl.Visible = true;
                msg_lbl.Text = "New Image is uploaded.";
                title_txt.Text = "";
                desc_txt.Text = "";
                cat_txt.Text = "";                        
            }
            else
            {
                msg_lbl.Visible = true;
                msg_lbl.Text = "Error occured.";
            }
        }
        catch (SqlException ex)
        {
            msg_lbl.Visible = true;
            msg_lbl.Text = ex.Message; //I get this exception here
        }
        catch (Exception ex)
        {
            msg_lbl.Visible = true;
            msg_lbl.Text = ex.Message;
        }

    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T02:13:53.877

错误一定是在sql查询中传递变量“now”时。如果该列`Img_date`是日期时间字段，那么您必须将值作为日期时间而不是字符串传递。尝试将值分配给`Datetime.Now`参数`@date`：

```
cmd.Parameters.AddWithValue("@date", DateTime.Now); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T02:10:07.863

使用`DateTime2`列时，您需要专门设置参数类型 - 默认为`DateTime`with `AddWithValue`。

尝试这个：

```
SqlParameter parm = cmd.Parameters.Add("@date", SqlDbType.DateTime2);
parm.Value = DateTime.Now; 
```

根据 MSDN：

> @date 参数可以映射到服务器上的日期、日期时间或日期时间2 数据类型。使用新的日期时间数据类型时，必须将参数的 SqlDbType 属性显式设置为实例的数据类型。使用 Variant 或隐式提供参数值可能会导致与 datetime 和 smalldatetime 数据类型的向后兼容性问题。

[http://msdn.microsoft.com/en-us/library/bb675168.aspx](http://msdn.microsoft.com/en-us/library/bb675168.aspx)

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T02:10:16.623

您收到该错误是因为 tsql 不接受 'tt' 格式说明符。

# unity3d - Unity3d 对象在暂停时仍可移动

> ID：14299954
> 
> 赞同：1
> 
> 时间：2013-01-13T02:04:50.237
> 
> 标签：unity3d

我有一个简单的乒乓球游戏，当我通过按退出键暂停游戏时，用户仍然可以左右移动球拍。该游戏是一款涉及触摸的手机游戏。当游戏暂停时，我将如何确保桨板不可移动？

如果这有帮助，这是我的桨的代码：

```
private var ray : Ray;
private var hit : RaycastHit;

function Start () {

}

function Update () {
    if(Input.GetMouseButton(0)){
        ray = Camera.main.ScreenPointToRay(Input.mousePosition);
        if(Physics.Raycast(ray, hit)){
            transform.position.x = hit.point.x;
        }
    }
} 
```

这是我的暂停脚本：

```
var gamePaused : boolean = false;
var back : Texture2D;
var GUIskin:GUISkin;
var ClickSound:AudioClip;

function Start(){
    Time.timeScale=1;
    gamePaused = false;
    gameObject.GetComponent(PauseMenu).enabled = false;
}

function OnGUI(){
    GUI.skin = GUIskin;

    GUI.Box (Rect (Screen.width - 550,Screen.height - 700,400,200), back);
    if(GUI.Button(new Rect(Screen.width - 510,Screen.height - 615,120,80), "Main                      Menu")) {
        Application.LoadLevel("Menu");
        audio.PlayOneShot(ClickSound);
    }
    if(GUI.Button(new Rect(Screen.width - 310,Screen.height - 615,120,80), "Quit")) {
        audio.PlayOneShot(ClickSound);
        Application.Quit();
    }
} 
```

这也是我的暂停控制器：

```
private var gamePaused : boolean = false;

function Update () {
    if(Input.GetKeyDown(KeyCode.Escape)){
        if(gamePaused){
            Time.timeScale=1;
            gamePaused = false;
            gameObject.GetComponent(PauseMenu).enabled = false;
        }
        else{
            Time.timeScale = 0;
            gamePaused = true;
            gameObject.GetComponent(PauseMenu).enabled = true;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T12:50:13.510

永远不会告诉您的 paddle 脚本检查您的暂停状态。

在您的更新代码中，您需要在此处添加对某些暂停状态的检查：

```
function Update () {
    if(!gamePaused){
        if(Input.GetMouseButton(0)){
            ray = Camera.main.ScreenPointToRay(Input.mousePosition);
            if(Physics.Raycast(ray, hit)){
                transform.position.x = hit.point.x;
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T11:06:43.530

只需在您的球拍更新功能中检查游戏是否暂停，如果是，请在不移动球拍的情况下退出该功能。例如：

```
if(Time.timeScale == 0) return; 
```

# android - 我设置了 uses-feature android:required="false" 但 Google play 一直坚持这些功能

> ID：14299956
> 
> 赞同：16
> 
> 时间：2013-01-13T02:05:35.100
> 
> 标签：android, android-manifest, uses-feature

我已经对我的应用程序进行了编码，使其具有一些它喜欢的功能，但在其他方面不需要，因为我希望我的应用程序可用于所有设备。在我的清单中，我设置了：

```
<uses-feature android:name="android.hardware.screen.PORTRAIT" android:required="false" />
<uses-feature android:name="android.hardware.telephony" android:required="false" />
<uses-feature android:name="android.hardware.LOCATION" android:required="false" />
<uses-feature android:name="android.hardware.location.GPS" android:required="false" />
<uses-feature android:name="android.hardware.MICROPHONE" android:required="false" /> 
```

当我上传我的 apk 文件时，Google Play 仍然坚持需要肖像、位置、GPS 和麦克风功能。不再需要电话。有什么想法吗？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-01-13T02:06:49.983

仔细想想，答案很明显，因为电话是小写的。出于某种原因，即使大写在我的使用权限声明中有效，这也需要小写。这是有效的代码：

```
<uses-feature android:name="android.hardware.screen.portrait" android:required="false" />
<uses-feature android:name="android.hardware.telephony" android:required="false" />
<uses-feature android:name="android.hardware.location" android:required="false" />
<uses-feature android:name="android.hardware.location.gps" android:required="false" />
<uses-feature android:name="android.hardware.microphone" android:required="false" /> 
```

希望这对其他人有帮助！

# html - 如果子 div 不适合父 div 宽度，则在子 div 中自动换行

> ID：14299957
> 
> 赞同：0
> 
> 时间：2013-01-13T02:05:38.633
> 
> 标签：html, css

```
<div class='jfmfs-friend' id='123'>
  <input type='checkbox'/>
  <img src='id.jpg'/>
  <div class='friend-name'>Himanshu Yadav</div>
</div> 
```

我想将文本包装在`friend-name`div 中。我试过了

```
div.friend-name  {
    margin-left: 10px;
    white-space: pre-wrap;
} 
```

这是父 div css：

```
.jfmfs-friend {                
    cursor:pointer;
    display:inline-block;
    float:left;
    height:56px;
    margin:3px;
    padding:4px;
    width:176px;
    border: 1px solid #FFFFFF;
    -moz-border-radius: 5px; 
    -webkit-border-radius: 5px;
    -webkit-user-select:none;
    -moz-user-select:none;

}

.jfmfs-friend div {
    color:#111111;
    font-size:11px;
    overflow:hidden;
    display:inline-block;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T03:19:53.663

因此，我将您的所有代码添加到以下 jsbin.com 示例中，以说明为什么它不适用于给出的示例。我添加了一个将执行自动换行的案例。你可以在这里查看：http: [//jsbin.com/osopid/1](http://jsbin.com/osopid/1)和这里的代码[http://jsbin.com/osopid/2/edit](http://jsbin.com/osopid/2/edit)

```
 <div class='jfmfs-friend' id='123'>
  <input type='checkbox' click='width()'/>
  <img src='id.jpg'/>
    <!-- 78px demonstrates no wrapping of the following div  -->  
    <div id='restrictedWidth' class='friend-name'>Himanshu Yadav</div>
    <div id='dbg'></div>
  </div>

  <div class='jfmfs-friend' id='123'>
  <input type='checkbox' click='width()'/>
  <img src='id.jpg'/>
    <!-- 164px demonstrates wrapping of the following div -->
    <div id='restrictedWidth2' class='friend-name'>Himanshu Yadav with more text proving that word wrap is working</div>
    <div id='dbg2'></div>
  </div> 
```

注意添加的自动换行：

```
.jfmfs-friend {                
    cursor:pointer;
    display:inline-block;
    float:left;
    height:56px;
    margin:3px;
    padding:4px;
    width:176px;
    border: 1px solid #FFFFFF;
    -moz-border-radius: 5px; 
    -webkit-border-radius: 5px;
    -webkit-user-select:none;
    -moz-user-select:none;

}

.jfmfs-friend div {
    color:#111111;
    font-size:11px;
    overflow:hidden;
    display:inline-block;
}

div.friend-name  {
    margin-left: 10px;
    white-space: pre-wrap;
    word-wrap: normal;
    border: 1px solid #000000;
} 
```

添加了一些 jquery 来打印宽度，以便我们可以检查项目何时应该换行：

```
$('#dbg').html('<div>'+$('#restrictedWidth').css('width')+'</div>');

$('#dbg2').html('<div>'+$('#restrictedWidth2').css('width')+'</div>'); 
```

我用chrome测试了这一切，你用的是什么浏览器？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T02:11:04.050

试试这个，虽然你可能想重新考虑高度：

```
div.friend-name  {
    margin-left: 10px;
    white-space: pre-wrap;
    word-wrap: normal;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T02:07:53.197

查看[`word-wrap`](http://www.css3.info/preview/word-wrap/)CSS3 中引入的属性。通过使用该`break-word`值，应该在容器内自动换行文本。

# java - 将两个简单的 JLabel 添加到 jframe

> ID：14299959
> 
> 赞同：1
> 
> 时间：2013-01-13T02:05:53.040
> 
> 标签：java, swing, jframe, jlabel, layout-manager

我到处搜索，有大量的文档，但都是令人困惑的，一半的测试代码不起作用，所以我问。制作 jlabel 的最简单方法是什么，设置它的位置（使用整数或维度），并将其添加到 JFrame

```
package com.notelek.notify;

import java.awt.Dimension;
import java.awt.Graphics;
import java.awt.GraphicsDevice;
import java.awt.GraphicsEnvironment;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;

public class Gui {

    public static void main(String[] args){

    }

    public static void notify(String line1, String line2, String imagepath, int style){
        GraphicsDevice gd = GraphicsEnvironment.getLocalGraphicsEnvironment().getDefaultScreenDevice();
        int width = gd.getDisplayMode().getWidth();
        int swidth = width - 320;

        JFrame notification = new JFrame();
        notification.setSize(new Dimension(320,64));
        notification.setLocation(swidth, 0);
        notification.setUndecorated(true);
        notification.setVisible(true);

        JPanel main = new JPanel();

        JLabel notifyline1 = new JLabel();
        notifyline1.setText("test");
        notifyline1.setLocation(0, 0);
        main.add(notification);
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T02:13:39.207

您需要将您`JLabel`的添加到可见容器中，否则它无法显示在屏幕上。

我还猜想您实际上打算将您的添加`JPanel`到您的`JFrame`而不是反之，例如：

```
...
main.add(notifyline1);
...    
notification.add(main);
... 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-13T02:18:07.170

我认为您的意思是`notification.add(main);`顺序很重要：

```
import java.awt.*;
import javax.swing.*;

public class Gui {

    public static void main(String[] args){
        notify("", "", "", 0);
    }

    public static void notify(String line1, String line2, String imagepath, int style){
        JFrame notification = new JFrame();
        JPanel main = new JPanel();
        JLabel notifyline1 = new JLabel();
        notifyline1.setText("test");
        main.add(notifyline1);
        notification.add(main);
        notification.setSize(new Dimension(320,64));
        notification.setLocationRelativeTo(null);
        notification.setUndecorated(true);
        notification.setVisible(true);
    }
} 
```

# jquery - JQuery DOM - 旧 id 仍然引用的元素

> ID：14299961
> 
> 赞同：1
> 
> 时间：2013-01-13T02:06:36.760
> 
> 标签：jquery, dom

我正在使用此功能更改模式按钮的 id

```
$('#editRevision a').click(function()
{   
    //clear the uploadify queue
    $('#file_upload').uploadifive('clearQueue');

    //change the id of the footer next button to pagesOrdered
    $('#next').attr('id' , 'pagesOrdered');
}); 
```

只是为了检查 '.on('click',function()) 是否正常工作，我使用以下

```
//Pages ordered click
$('#pagesOrdered').on('click',function()
{
     alert('Testing');
}); 
```

我的警报没有触发，但是如果我将其更改`#pagesOrdered`为`#next`它会触发。我需要做什么才能从 DOM 中释放 #next。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T02:11:10.797

`$('#pagesOrdered')`调用代码时不存在。您可以在更改`id`或委托`on()`给更高级别的 DOM 树后添加点击处理程序并`#pagesOrdered`用作选择器

第一种方法：

```
$('#editRevision a').click(function(){   
    //clear the uploadify queue
    $('#file_upload').uploadifive('clearQueue');

    //change the id of the footer next button to pagesOrdered
    $('#next').attr('id' , 'pagesOrdered');
    //Pages ordered click
    $('#pagesOrdered').on('click',function(){
     alert('Testing');
     });
}); 
```

第二种方法：

```
 $(document).on('click','#pagesOrdered',function(){
     alert('Testing');
 }); 
```

您还应该`#next`在更改之前取消绑定附加到的事件`id`。更改`id`不会删除它们。可能是一种更简单的方法来处理您正在做的事情而无需更改`id`，例如切换类和在处理程序中运行类特定代码

# javascript - JavaScript - 在浏览器选项卡切换上，clearInterval 和 window.onfocus/blur 不会清除间隔被调用两次

> ID：14299963
> 
> 赞同：0
> 
> 时间：2013-01-13T02:06:56.543
> 
> 标签：javascript, focus, clearinterval

我有一个简单的脚本，可以淡入淡出一些图像。在我切换到另一个选项卡然后切换回来之前，它工作得非常好。切换回来后似乎运行动画的间隔，没有被清除并且功能继续运行。

真实代码：

```
var img0 = document.getElementById("image0");
var img1 = document.getElementById("image1");
var img2 = document.getElementById("image2");

var imgs = [img0,img1,img2];

var intervalFading;
var intervalAnimate;

var imgThis = 0;
var imgNext = 1;

var fadeIn = 0;
var fadeOut = 1;

var start;

function animateFading() {
    fadeIn+=0.1;
    fadeOut-=0.1;
    imgs[imgThis].style.opacity = fadeOut;
    imgs[imgNext].style.opacity = fadeIn;

if (fadeIn >= 1) {
    clearInterval(intervalAnimate);

    if (imgNext < 2) {
        imgNext++;
    } else {
        imgNext = 0;
    }

    if (imgThis < 2) {
        imgThis++;
    } else {
        imgThis = 0;
    }

    fadeIn = 0;
    fadeOut = 1;
}

}

function fading() {
intervalAnimate = setInterval(animateFading,50);
}

function startFading() {
start = setInterval(fading, 3000);
}

window.addEventListener('load', startFading); 
```

所以我想出了以下解决方案：

```
function startFading() {
start = setInterval(fading, 3000);
}

function stopFading() {

    console.log("stop");
    clearInterval(start);
}

window.addEventListener('focus', startFading);    
window.addEventListener('blur', stopFading); 
```

这解决了问题。但仅适用于 FF。在 FF 中，脚本运行得非常完美。在 Chrome 中 window.onfocus 被调用了两次！为什么两次？

请帮助以不同的方式解决第一个问题或使用 Chrome 解决第二个问题。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T03:18:16.833

这似乎是一个已知的铬错误：

[http://code.google.com/p/chromium/issues/detail?id=117307](http://code.google.com/p/chromium/issues/detail?id=117307)

可能的解决方案是：

1.  如果您使用的是 jQuery，您可以尝试使用`$.on('focus', startFading)`
2.  您可以设置一个布尔值并确保 startFading 不会被多次调用：

例子：

```
var startedFading = false;

function startFading() {
    if (!startedFading) {
        startedFading = true;
        start = setInterval(fading, 3000);
    }
}

function stopFading() {
    startedFading = false;
    console.log("stop");
    clearInterval(start);
} 
```

# android - 从网格中的项目中检索图像 uri

> ID：14299964
> 
> 赞同：0
> 
> 时间：2013-01-13T02:07:05.060
> 
> 标签：android, gridview, uri, android-imageview, aviary

我正在尝试从 gridview 中的每个选定项目中读取这些 uri，然后将它们存储在 Uri 数组中并从那里读取它们。

这是我的代码：

```
for (int i = 0; i < imagegrid.getChildCount(); i++) {
                Uri uri = (Uri) imageAdapter.getItem(i);
                View view = imagegrid.getChildAt(i);
                CheckBox checkBox = (CheckBox) view.findViewById(R.id.itemCheckBox);
                // ImageView iv = (ImageView) view.findViewById(R.id.image);

                if (checkBox.isChecked())
                {
                    editImagesUri[count] = uri;
                }
            } 
```

在我运行之前，我没有错误，但是当我这样做时，我得到“Integer cannot be cast to Uri”。我正在使用的这种方法有什么替代品吗？我将不胜感激任何帮助。

提前谢谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T02:49:58.600

您的 getItem 函数没有返回 URI，而是返回一个 int。要么将其更改为返回 URI，要么在某处有一个 int->URI 映射。

# android - Android 地图和地点位置

> ID：14299967
> 
> 赞同：0
> 
> 时间：2013-01-13T02:07:20.607
> 
> 标签：android, maps, location

我正在构建一个具有地图功能的应用程序，并在整个互联网上进行搜索，试图找到解决我的问题的方法。

问题是，我不知道哪种实施方法最适合我。

我想做两件事，我相信新程序员也在考虑这个：

1）我想制作一个地图视图，上面有用户的位置，并且有我在列表中提供的位置的精确点。

2) 我想找到离该人最近的商店（基于纬度/经度列表）。

这可能吗？我不需要为我编码的整个实现。我只需要一个起点。

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T02:53:35.837

绝对有可能。你需要三样东西：

1）地图视图。你需要注册一个谷歌地图 ID，他们有一些教程可以在你做的地方实现一个。Maps API 具有显示您的位置和在地图上放置图钉的功能。

2）您需要获取自己的位置进行计算。这是对 LocationManager 和 Location 类的简单使用。

3）您需要获取商店的经纬度列表。在启动时，您解析列表，将它们添加到地图叠加层，您可以使用 Location 类的距离函数找到您与它们之间的距离。

# notepad++ - Notepad++中如何删除当前行并添加新行？

> ID：14299971
> 
> 赞同：76
> 
> 时间：2013-01-13T02:09:24.327
> 
> 标签：notepad++, hotkeys

Notepad++中如何删除当前行并添加新行？

这两个操作很常见，但我在 Notepad++ 中找不到任何关键设置。任何插件都可以完成这项工作吗？

[![](../Images/e581195e398f4ddbc273fef87a0c7fe2.png)](https://i.stack.imgur.com/1XZqw.png)

* * *

## 回答 #1

> 赞同：145
> 
> 时间：2013-01-13T02:17:27.843

`Ctrl`+`L`应该能够剪切当前行，`Ctrl`+ `Shift`+`L`应该能够删除当前行。

您可以在 中查看和更改热键`Settings > Shortcut Mapper... > Scintilla Commands`。寻找`SCI_LINEDELETE`和`SCI_LINECUT`。

我的 Notepad++ 版本是 6.1.1。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2016-08-11T10:56:32.483

`Ctrl`+`L`将**切断**线路。

`Ctrl`++将**删除**该行（即不将其复制到剪贴板）`Shift`。`L`

 **以上归功于@BobStein-VisiBone 和@RyanGoldstein。

*请注意，这不仅适用于 Notepad++，还适用于更多应用程序！*

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-10-10T06:33:12.347

问题 #1 `Ctrl`+`L`或`Ctrl`+ `Alt`+`L`已回答

问题 #2 `Enter`，将添加一个新的空行并将光标与上一个对齐

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-13T12:38:23.980

如果要删除行，可以使用带有扩展选项的查找替换功能，例如

1.  单击 Ctrl+F 然后转到替换选项卡
2.  检查其中的扩展选项
3.  在查找类型任何东西
4.  在替换你可以输入'\n'（插入空行）'\t'（删除空行）**

# php - 从另一个类 php 调用

> ID：14299974
> 
> 赞同：0
> 
> 时间：2013-01-13T02:09:46.553
> 
> 标签：php

这是代码：

```
<?php 
   class class1{ 
      public function fun1
      { 
         function fun2
         { 
             echo 'Hello';
         } 
      } 
   } 
   class class2{ 
      //calling fun2 
   } 
?> 
```

我可以在**class2中调用函数****fun2**吗？如何调用。

 *** * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T02:19:25.813

是的，只要订单保持正确。

```
class test1
{
    public function doSomething()
    {
        function doSomethingElse()
        {
            echo "doSomethingElse called\n";
        }
    }
}

class test2
{
    public function doSomething()
    {
        doSomethingElse();
    }
}

$t1 = new test1();
$t1->doSomething();

$t2 = new test2();
$t2->doSomething(); // "doSomethingElse called\n";
doSomethingElse(); // "doSomethingElse called\n"; 
```

通过调用`$t1->doSomething();`，加载嵌套`doSomethingElse()`函数。如果您没有`$t1->doSomething();`先调用，那么在尝试调用嵌套函数时会收到错误消息，因为它还不存在。

// 简化答案，[请参阅手册以获取有关如何/为什么可能的更多详细信息](http://php.net/manual/en/functions.user-defined.php)。**

# python - 如何使用lxml通过文本查找元素？

> ID：14299978
> 
> 赞同：34
> 
> 时间：2013-01-13T02:10:24.583
> 
> 标签：python, html, lxml

假设我们有以下 html：

```
<html>
    <body>
        <a href="/1234.html">TEXT A</a>
        <a href="/3243.html">TEXT B</a>
        <a href="/7445.html">TEXT C</a>
    <body>
</html> 
```

如何让它找到包含“TEXT A”的元素“a”？

到目前为止，我有：

```
root = lxml.html.document_fromstring(the_html_above)
e = root.find('.//a') 
```

我试过了：

```
e = root.find('.//a[@text="TEXT A"]') 
```

但这不起作用，因为“a”标签没有属性“text”。

有什么方法可以以与我尝试过的方式类似的方式解决这个问题吗？

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2013-01-13T02:14:37.760

你很亲密。使用`text()=`而不是`@text`（表示属性）。

```
e = root.xpath('.//a[text()="TEXT A"]') 
```

或者，如果您只知道文本包含“TEXT A”，

```
e = root.xpath('.//a[contains(text(),"TEXT A")]') 
```

或者，如果您只知道文本以“TEXT A”开头，

```
e = root.xpath('.//a[starts-with(text(),"TEXT A")]') 
```

有关可用字符串函数的更多信息，请参阅[文档](http://www.w3.org/TR/xpath/#section-String-Functions)。

* * *

例如，

```
import lxml.html as LH

text = '''\
<html>
    <body>
        <a href="/1234.html">TEXT A</a>
        <a href="/3243.html">TEXT B</a>
        <a href="/7445.html">TEXT C</a>
    <body>
</html>'''

root = LH.fromstring(text)
e = root.xpath('.//a[text()="TEXT A"]')
print(e) 
```

产量

```
[<Element a at 0xb746d2cc>] 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-07-20T17:21:53.873

另一种对我来说看起来更直接的方式：

```
results = []
root = lxml.hmtl.fromstring(the_html_above)
for tag in root.iter():
    if "TEXT A" in tag.text
        results.append(tag) 
```

# php - 仅在 wordpress 页面上显示类别中的最新帖子

> ID：14299980
> 
> 赞同：0
> 
> 时间：2013-01-13T02:10:29.283
> 
> 标签：php, wordpress

我对 PHP 不是很熟悉，所以我真的很挣扎。我有一个名为本月学生的类别，ID 为 5。我想在我的 wordpress 网站上有一个页面，仅显示该类别的最新帖子。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T02:14:54.763

编辑用于显示类别的模板，每页仅列出一篇文章。默认情况下，它显示`x`最新的帖子；如果`x`是一个，它只显示一个最近的帖子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T03:01:23.730

我最终做了不同的事情。我找到了这个页面：[http ://codex.wordpress.org/Template_Hierarchy](http://codex.wordpress.org/Template_Hierarchy)

在页面上它说： category-{slug}.php - 如果类别的 slug 是新闻，WordPress 会寻找 category-news.php

这将让我使用该页面显示月份类别的学生中的任何帖子。我只是将该页面编程为仅显示最新的。至于导航问题，我结束了使用“ [Page Links To](http://txfx.net/wordpress-plugins/page-links-to/ "页面链接到") ”插件。不过，感谢您的提示，他们向我发送了正确的方向！

# php - 通过ajax将php变量转换为javascript

> ID：14299988
> 
> 赞同：0
> 
> 时间：2013-01-13T02:12:15.333
> 
> 标签：php, javascript, ajax

好的，我想通过 ajax 将 PHP 变量转换为 javascript 变量。

我有一些 php 代码使这个变量看起来像这样：（我不会放整个代码，因为它的工作所以只有与这个主题相关的代码。我有 new_m 变量，它是 ARRAY，我想传递它）

```
shuffle($new_m); 
echo json_encode($new_m); 
```

然后我有一个 js 文件，它应该捕获那个回声，它看起来像这样：

```
function getXMLHttp() 
{
  var xmlHttp

  try
  {
    //Firefox, Opera 8.0+, Safari
    xmlHttp = new XMLHttpRequest();
  }
  catch(e)
  {
    //Internet Explorer
    try
    {
      xmlHttp = new ActiveXObject("Msxml2.XMLHTTP");
    }
    catch(e)
    {
      try
      {
        xmlHttp = new ActiveXObject("Microsoft.XMLHTTP");
      }
      catch(e)
      {
        alert("Your browser does not support AJAX!")
        return false;
      }
    }
  }
  return xmlHttp;
}

function MakeRequest() 
{
  var xmlHttp = getXMLHttp();

  xmlHttp.onreadystatechange = function()
  {
    if(xmlHttp.readyState == 4)
    {
      var myvar = new Array();
    var myvar=JSON.parse(xmlHttp.responseText);

return myvar;

    }

  }
   xmlHttp.open("GET", "showimage.php", true);
  xmlHttp.send(null);
} 
```

当此代码不在此处的单独页面上并且 myvar 何时在函数内部使用时，它可以工作（因为我已在另一个页面上成功使用了此代码）。所以我认为我的问题是没有返回正确的变量或没有以正确的方式返回它。

最后一段代码是应该使用这个 myvar 的部分，它看起来像：

```
<script type="text/javascript" src="js/shuffle.js"></script>
<title>undf</title>
</head>
<body onload="MakeRequest()">

<script type="text/javascript">
alert(myvar);
var pos = 0;
var imgs = myvar;
</script> 
```

什么也没有发生。我在这个 ajax 和 javascript 方面还是新手。感谢您提前提供帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T02:16:04.903

你的问题是，当`alert( myvar);`执行时，对服务器的请求还没有发生，并且变量是未定义的（更不用说我认为变量超出了范围，所以你无法访问它）。

您应该设置 JS，以便在窗口加载时执行请求以检索数据然后读取它：

```
<script type="text/javascript">
window.onload = function() {
    var myvar = MakeRequest();
    alert( myvar);
}
</script> 
```

然后，您可以摆脱标签`onload`内的内容。`<body>`

请注意，我不完全确定您`MakeRequest()`是否正确地从函数返回值，因为`return`它在 xmlhttp 回调中而不是在函数中。您应该对此进行调查并验证。

# javascript - Backbone.Collection 通过 id 获取模型

> ID：14299992
> 
> 赞同：14
> 
> 时间：2013-01-13T02:12:58.177
> 
> 标签：javascript, backbone.js

我有一个从服务器获取模型的集合。

这行得通，现在我想通过它的 id 来抓取一个模型，`MyCollection.at(0)`我得到：

```
child
_changes: Array[0]
_changing: false
_currentAttributes: Object
_events: Object
_hasComputed: true
_pending: false
_previousAttributes: Object
attributes: Object
_id: "50ef7a63b2a53d17fe000001"
author_name: "author name"
bookmark: ""
info: "bookmark description"
__proto__: Object
changed: Object
cid: "c26"
collection: child
view: child
__proto__: Surrogate 
```

如果我尝试通过其 id 获取模型，我会得到：

```
MyCollection.get("50ef7a63b2a53d17fe000001")
=> undefined

MyColleciton.get({_id:"50ef7a63b2a53d17fe000001"})
=> undefined

MyCollection.get({'_id':"50ef7a63b2a53d17fe000001"})
=> undefined 
```

我不明白 - 文档清楚地说，`.get()`如果该集合中存在具有给定 id 的模型，该方法将返回模型。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-13T02:36:06.733

你设置[`Model.idAttribute`](http://backbonejs.org/#Model-idAttribute)模型了吗？

```
var Model = Backbone.Model.extend({
    idAttribute:"_id"
}); 
```

默认情况下，Backbone 期望 id 属性被称为 id。设置 后，Backbone 会标准化 id的`idAttribute`处理，以便`model.id`始终可用，即使 id 属性被称为其他东西。原始 id 属性在模型的`attributes`哈希中可用，因此可以通过`get`methd. 所以：

```
model.id === model.get('_id') // -> true 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-13T02:16:20.740

您可以使用`cid`模型的 (client-side ID) 属性作为 的参数`MyCollection.get()`，保证从创建开始就存在。该文档似乎认为这会起作用，请参阅[http://backbonejs.org/#Collection-get](http://backbonejs.org/#Collection-get)。

# gmp - 简单的 GMP/MPIR 问题

> ID：14299993
> 
> 赞同：0
> 
> 时间：2013-01-13T02:12:59.070
> 
> 标签：gmp

我正在尝试使用 VS 2010 的 GMP/MPIR，我不明白为什么输入 10 10 的输出为 0.999999999999999999909e101。

我希望所有数字都能显示，因为我在 mpf_out_str 调用中为 n_digits 输入了 1000，使用 0 相同的结果。为什么是 9 和 909e101？

另外，您将如何输入大量数字， gmp_scanf 似乎无法处理 100 位数字。

```
#include <mpirxx.h>

main()
{

  mpf_t tt, t2;

  mpf_init(tt);
  mpf_init(t2);

  gmp_scanf("%Fe\n", tt);
  gmp_scanf("%Fe\n", t2);

  for (int i = 0; i < 100; i++)
      mpf_mul(tt, tt, t2);

  mpf_out_str(stdout, 10, 1000, tt);

  mpf_clear(tt);
  mpf_clear(t2);

  getc(stdin); 

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T07:56:31.640

您需要指定 mpf_t 的精度。请参见 mpf_init2() 和 mpf_set_default_prec()。

# android - 带有 Swype 键盘输入问题的 Android EditText

> ID：14299994
> 
> 赞同：1
> 
> 时间：2013-01-13T02:13:01.000
> 
> 标签：android, android-edittext, swipe

我有一个用户在尝试输入我的应用程序时遇到问题。她使用的设备是运行 Gingerbread 的摩托罗拉 Electrify，她正在手机上使用 Swype 键盘。当她尝试将文本添加到现有项目时，它只是过度输入，除非她使用 Swyping 手势来构建单词。

为了清楚起见，我没有任何编码的听众会导致这种情况。我已经用她手机上的其他键盘（多点触控）进行了测试，一切似乎都很好。

我们看到的一个例子：按 A，A 出现在屏幕上，然后按 n，它取代了 A。

这是编辑文本的布局：

```
<EditText
    android:id="@+id/editor_text"
    android:layout_width="fill_parent"
    android:layout_height="0dip"
    android:layout_marginLeft="10dp"
    android:layout_marginRight="10dp"
    android:layout_weight="0.72"
    android:gravity="top"
    android:inputType="textMultiLine|textCapSentences|textAutoCorrect"
    android:singleLine="false" >
</EditText> 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-13T02:46:02.310

因此，直到今年 5 月，我一直是 Swype 的首席 Android 开发人员。所以我会好好照顾我的老朋友，并提供一些免费的技术支持。她使用的是什么版本的 Swype？她是否在将自己的文本插入编辑文本或从编辑框中失去焦点时做了什么有趣的事情？如果她关闭预测文本，它还会发生吗？

她提到的问题听起来像是我在一些 EditText 的自定义实现中看到的问题，它们没有正确实现 getExtractedText 并且我们的预测文本解决方案预计能够从编辑器中检索先前键入的文本（以解决各种错误还有其他应用程序）。但是，如果您使用的是股票 EditText，则不应该是这种情况。让我知道上面的答案，我会看看我能从多年的记忆中拖出什么。

# php - php连接解析错误问题帮助新手

> ID：14299999
> 
> 赞同：0
> 
> 时间：2013-01-13T02:13:55.000
> 
> 标签：php

请帮我解决这个问题。我正在尝试回显 7 或 8 种输入类型。输入类型必须具有来自我的数据库的 2 个值。
数组被称为：$adressX[] 和 $adressY。并在网页加载时自动加载。
因此，当数字为 0 时，我想创建一个输入类型，其值为：($adressX[0],$adressY[0])。我不断收到解析错误，这是我在 php/javascript 上的第一个项目。请帮我。
我的代码是这样的。

```
<?php  

for ($number=0;$number<=$array_no-1 ;$number++)
{

 echo '<input type="text" id="inputtype"."$number"
                                 value="".$adressX['.$number'],".$adressY['.$number']">';

};
                    ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T02:16:46.247

你搞砸了你的报价和句号。试试这个：

```
<?php  
for ($number = 0; $number <= $array_no-1; $number++) {
   echo '<input type="text" id="inputtype' . $number . '" value="' . $adressX[$number] . ',' . $adressY[$number].'" />';
}
?> 
```

您应该阅读 PHP 如何处理引号和连接，但这里有一些示例可以帮助您入门。

如果你想用单引号开始字符串，你也必须用单引号结束/连接字符串。像这样：

```
$var = 'yay';
$string = 'The value of the variable is ' . $var;
$string2 = 'The value of the variable is ' . $var . '!'; // Add another string after variable 
```

同样，如果以双引号开头，则必须以双引号结束/连接，如下所示：

```
$var = "yay";
$string = "The value of the variable is " . $var;
$string2 = "The value of the variable is " . $var . "!";
$string3 = "The value of the variable is $var!"; 
```

注意最后一个例子，`$string3`。使用双引号时，*可以*将变量放在引号内，PHP 仍然会解析它们；但是，我不宽恕这一点，我总是连接，所以当使用带有语法突出显示的 IDE 时，变量的位置很明显。

这是一个将相同类型的引号放在您开始/结束字符串的字符串中的示例。为此，您必须使用斜杠 () 告诉 PHP 这些应该被解析为常规引号而不是分隔符。

```
$string = 'You\'re using escaped quotes now!'; // notice the \ in front of the ' in you're 
```

最后，这是一个 PHP 中的 HTML 字符串示例。我通常用单引号开始这些字符串，这样我就可以对 HTML 使用传统的双引号分隔符。

```
$html = '<div class="someClass">Hello world!</div>'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T02:21:31.543

```
 <?php  
 for ($number=0;$number<=$array_no-1 ;$number++) {
     echo '<input type="text" id="inputtype'.$number'" value="'.$adressX[$number].','.$adressY[$number].'">';
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T02:48:35.300

使用 PHP 的`echo`and`print`语句通常是新的 PHP 程序员用来获取屏幕输出的地方。但是，在处理 HTML 标记的输出时，转义引号和语法问题可能会迅速蔓延。相反，尝试使用[`sprintf`](http://php.net/manual/en/function.sprintf.php)来格式化这些更复杂的标记元素。这是一个例子。

```
for ( $number = 0; $number <= $array_no - 1; $number++ )
{
    echo sprintf( '<input type="text" id="inputtype%u" value="%s,%s"/>', $number, $addressX[ $number ], $addressY[ $number ] );
} 
```

要知道的基本事情是，本质上`sprintf`是一种复杂的搜索和替换格式化方法。第一个参数是一个带有占位符的字符串，以下所有参数都是将在该字符串中用于替换占位符的变量。输入字符串后面的参数数量必须与字符串中占位符的数量相匹配。

您会注意到`%s`，`%u`在我的示例中使用的输入字符串中。这些意味着格式为`%s`字符串或`%u`整数。格式化东西还有很多方法，但是，作为新手，这些是您可能会发现自己使用最多的方法。

**这怎么容易？**

这更容易，因为您可以使用带有双引号的格式正确的 HTML 片段，只需添加占位符。`' . $variable . '`从视觉上看，我发现它比散布在代码中的大量位更容易阅读。

此外，`sprintf`随着您在 PHP 阶梯上的提升，它将成为您经常使用的东西。是时候学习它了。