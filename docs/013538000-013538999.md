# StackOverflow 问答 13538000-13538999

# ruby-on-rails - 带引导程序的 Datatable TableTools 不起作用

> ID：13538005
> 
> 赞同：1
> 
> 时间：2012-11-24T03:35:10.870
> 
> 标签：ruby-on-rails, twitter-bootstrap, datatables, jquery-datatables, tabletools

让数据表工作。现在尝试应用额外的 Tabletools（这样我就可以将表格导出到 csv）。

我可以看到导出到 csv。我错过了什么吗？我已申请（如建议）

```
$(document).ready( function () {
$('#example').dataTable( {
    "sDom": "<'row-fluid'<'span6'T><'span6'f>r>t<'row-fluid'<'span6'i><'span6'p>>",
    "oTableTools": {
        "aButtons": [
            "copy",
            "print",
            {
                "sExtends":    "collection",
                "sButtonText": 'Save <span class="caret" />',
                "aButtons":    [ "csv", "xls", "pdf" ]
            }
        ]
    }
    } );
} ); 
```

我正在使用“jquery-datatables-rails”gem，它说它支持表格工具。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T19:31:54.107

我猜你的问题是你错过了闪存对象。

如果是1.91。将此添加到您的`dataTable{(`代码中（您必须意识到路径取决于您的设置，所以这只是一个示例）

```
sSwfPath: "DataTables-1.9.1/extras/TableTools/media/swf/copy_csv_xls_pdf.swf", 
```

# ios - iOS AVAudioPlayer 在手指平移 MKMapView 时不播放

> ID：13538007
> 
> 赞同：1
> 
> 时间：2012-11-24T03:35:15.067
> 
> 标签：ios, audio, mkmapview, avaudioplayer

我在我的应用程序中使用 AVAudioPlayer 加载了基本的哔声。

如果我的手指没有平移我的 MKMapView，它可以很好地播放哔声。

我的哔声设置为每 2 秒播放一次。

当我开始平移地图视图并且手指没有离开屏幕时，哔声停止播放。

我记得 NSUrlConnection 在滚动表格视图时也不会触发，我认为这可能是同一个问题，但我无法弄清楚如何将我的音频播放器添加到正确的运行循环中。

我这样设置我的播放器：

```
-(void)setupBeep
{
    NSURL *url = [NSURL fileURLWithPath:[NSString stringWithFormat:@"%@/beep.mp3", [[NSBundle mainBundle] resourcePath]]];

    NSError *error;
    audioPlayer = [[AVAudioPlayer alloc] initWithContentsOfURL:url error:&error];
    audioPlayer.numberOfLoops = 0;

    if(error)
    {
        NSLog(@"Error opening sound file: %@", [error localizedDescription]);
    }
} 
```

我正在播放这样的声音：

```
// plays a beeping sound
-(void)beep
{
    [audioPlayer play];
} 
```

以前有人遇到过这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T04:00:49.433

你是如何安排你的`-beep`方法被调用的？

我怀疑你`NSTimer`在默认输入模式下添加了一个主运行循环。您没有听到任何声音的原因是在`MKMapView`跟踪您的手指时，运行循环不在`NSDefaultRunLoopMode`- 它在`UITrackingRunLoopMode`.

尝试在 中进行调度`NSRunLoopCommonModes`，其中包括默认模式和跟踪模式：

```
NSTimer *timer = [NSTimer timerWithTimeInterval:interval target:self selector:@selector(beep) userInfo:nil repeats:YES];
[[NSRunLoop mainRunLoop] addTimer:timer forMode:NSRunLoopCommonModes]; 
```

另外，请注意`NSTimer`保留其目标。重复计时器会自动重新安排自己的时间，因此您需要调用其`-invalidate`方法将其从循环中移除并允许释放目标。

**编辑：**查看 Apple 的[线程编程指南：运行循环](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Multithreading/RunLoopManagement/RunLoopManagement.html)以获得更详细的解释。

# python - 序列作为python中YAML映射的键

> ID：13538015
> 
> 赞同：0
> 
> 时间：2012-11-24T03:37:23.603
> 
> 标签：python, yaml, sequence

通过阅读 YAML 文件，我想获得以下 python 字典：

```
mydict = {('x','x'): 4} 
```

或者：

```
mydict = {['x','x']: 4} 
```

基本上，我想要一个元组或列表作为字典中的键。这是我尝试过的 YAML：

```
mydict:
   !!python/tuple [e,e]: 4 # valid, but python-specific
   !!python/list [b,b]: 4 # error: "found unhashable key"
   [c,c]: 4 # error: "found unhashable key"
   !!seq [d,d]: 4 # error: "found unhashable key" 
```

我正在使用 PyYAML，因此 YAML 代码必须是 YAML1.1 语法，或者您可以向我推荐一种将此类数据存储在文本文件中的更好方法。我想过`json.load`，但 JSON 不接受数组作为映射键。

谢谢 =)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-29T11:18:25.383

我还通过使用 Eclipse/PyDev 下的调试器对此进行了研究，并研究了返回的 YAML 对象的结构。我发现通过将 YAML 对象改造成使用 python 元组而不是列表，我可以在不使用特定于 python 的类型的情况下绕过关于不可哈希键的特定错误，但这只是一种解决方案的错觉。PyYAML 中字典的键必须是 MappingNode。尽管这可以实现为一个 Python 值元组，但在内部它仍然被视为一个集合（即受到唯一化和重新排序）。这意味着不同的元组（例如 (a,a,b)、(a,b,a)、(b,a) 等）可能最终被视为同一个键，这不是您想要的。

对于信息，这就是我所做的。当遇到类似这样的 YAML 序列时，我定义了一个 Python 类来使用元组而不是列表构造一个新的 MappingNode：

```
class Key(yaml.YAMLObject):

  yaml_tag = "tag:example.com:2013:Key"
  @classmethod
  def from_yaml(cls, loader, node):
    if isinstance(node, yaml.SequenceNode):
      new_values = []
      for v in node.value:
        new_values.append( (v, yaml.ScalarNode(tag=u'tag:yaml.org,2002:null'), value=u'')) )
      node = yaml.MappingNode(tag=node.tag, value=tuple(new_values))
    return loader.construct_yaml_object(node,cls) 
```

然后，我在我的 YAML 数据中将此类用于序列键的键，如下所示：

```
!<tag:example.com:2013:Key> [a, b]: 3 
```

或者：

```
%TAG !mytags! tag:example.com:2013:
---
......
  !mytags!Key [a, b]: 3 
```

但是，正如我所解释的，这并不能以您期望的方式保留序列。就个人而言，我不会在任何实际应用程序中使用此代码/方法。

对我来说，使用集合而不是序列似乎更安全，尽管这并不是你所问的。这使用来自[Language-Independent Types for YAML Version 1.1的](http://yaml.org/type/)[集合类型](http://yaml.org/type/set.html)。我对上面的序列类型使用了类似的方法，但是由于 PyYAML 使用 Python 列表作为 MappingType 的键，我只需要将其更改为如下所示的元组：

```
class Key(yaml.YAMLObject):

  yaml_tag = "tag:example.com:2013:Key"
  @classmethod
  def from_yaml(cls, loader, node):
    if isinstance(node, yaml.MappingNode):
      node.value = tuple(node.value)
    return loader.construct_yaml_object(node, cls) 
```

并使用集合作为 YAML 数据中的键，如下所示：

```
!mytags!Key {a, b}: 3 
```

在我看来，所有这些都像是 PyYAML 的一个限制：理论上，我认为 YAML 本身没有任何东西不允许将序列用作您想要的键。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T03:41:17.837

在 Python 中无法使用列表作为哈希键。它是可变的。你必须使用一个元组。

# php - 在浏览器上点击返回按钮时拒绝访问数据（视频）

> ID：13538020
> 
> 赞同：0
> 
> 时间：2012-11-24T03:39:40.720
> 
> 标签：php, mysql

我正在为一些学生做一个测验（php 和 mysql），测验是基于他们必须观看的视频..

顺序是这样的..
1) 他们为每个用户输入一个唯一的网页
2) 访问带有视频的页面供用户观看...
3) 在页面底部有一个按钮“回答测验”
4)当他们单击按钮时，他们会被发送到带有测验的页面

这就是问题发生的地方，我想阻止用户再次观看视频，但是当他们点击后退按钮时，他们又可以观看视频了

我在 mysql db 的视频表中阻止了视频，但视频被缓存或其他东西，所以这不是阻止用户在点击后退按钮时再次观看视频的方法...... 关于如何实现这一目标的任何想法？

任何帮助表示赞赏......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T15:31:01.810

从您的最新评论中检查，我假设您有一个表格，`expired_quizzes`其中至少包含三列，`quiz_id`和`quiz_filename`布尔值`is_active`。我也会将表格标准化为 a `userid`，因此如果用户 A 观看它并参加测验，用户 B 仍然可以看到视频（不过，与朋友作弊更容易）。如果没有看到任何代码或结构，很难确切地知道发生了什么，但请尝试检查以下几项：

如果您根据搜索查找测验，并且网页使用变量 `$_GET`，则无论何时访问该网页，它都会加载测验。所以考虑：

`http//www.yourwebpage.com/?quizfilename=viewablequiz.mp4`

根据您的 PHP 指令，它将始终加载`viewablequiz.mp4`. 有两个建议可以防止它。

*   不要加载`$_GET['quizfilename']`。而是`$_GET['quizid']`使用其他搜索参数从查询中加载和调用文件名，例如：

    'SELECT * FROM expired_quizzes WHERE quiz_id='{$_GET['quizid']}' AND is_active=1 LIMIT 1;'

然后，返回`row['filename']`您的 PHP 代码，或者如果没有找到结果（没有未过期的测验），则处理对用户的响应。

*   通过 AJAX 加载视频。如上所述在 PHP 端使用类似的查询，但由于它需要在加载后进行查找，因此刷新屏幕不会加载任何内容。

为了防止作弊，您可能还应该有另一个表来记录每次观看视频的时间，并带有时间戳和用户 ID。它可以通过同时查看谁在测试和查看来帮助检测作弊企图。

当然，始终要防止 SQL 注入，不要将用户输入直接放入 SQL 语句中。

要进行更详细的分析，您应该在问题中只发布相关的 PHP、HTML 和 SQL。

# ember.js - 在 Ember.CollectionView 渲染结束时运行 jquery

> ID：13538021
> 
> 赞同：2
> 
> 时间：2012-11-24T03:39:54.423
> 
> 标签：ember.js

我有一个**ContainerView**，其中包含一个**CollectionView**。在此**CollectionView**在屏幕上呈现后，我*需要执行一个 jquery 函数*，该函数本质上是查看呈现模板的内容并执行一些显示修改。

**如果我在CollectionView的****didInsertElement**中执行该 jquery，它可以工作，但它会为**CollectionView**中的每个元素执行，因为我真的只需要在最后完成一次。我该如何指定？

 ****[http://jsfiddle.net/JFqNr/](http://jsfiddle.net/JFqNr/)（注意不会在 jsfiddle 上呈现或出于某种原因，只是为了向您展示结构）

```
App = Ember.Application.create();

App.FooContainerView = Ember.ContainerView.extend({
    childViews: ['elementList'],    

    elementList: Ember.CollectionView.extend({
        content: function() {
            return [
                { Title: "Dashboard", ID: "dashboard" },
                { Title: "Invoices", ID: "invoices" },
                { Title: "Expenses", ID: "expenses" },
                { Title: "People", ID: "people" },
                { Title: "Reports", ID: "reports" },
                { Title: "Settings", ID: "settings" }
            ];
        }.property(),        
       template: Ember.Handlebars.compile( '{{view.content.title}}' ),

       didInsertElement: function() {
             // perform jquery function            
       }
    }),

   didInsertElement: function() {
         // does not work if perforemed here
   }    
});

App.initialize();
​ 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-24T07:50:07.567

执行此操作的功能最近才添加到 master 分支，因此您需要编译自己的 Ember 版本。
您现在可以安排到一个`afterRender`队列中，以便在渲染所有单个视图之后运行。

```
App.FooContainerView = Ember.ContainerView.extend({
  // Existing code
  didInsertElement: function() {
    Ember.run.scheduleOnce('afterRender', this, function(){
      // perform jQuery function here;
    });
 } 
```

有关代码详细信息，请参阅[https://github.com/emberjs/ember.js/pull/1528](https://github.com/emberjs/ember.js/pull/1528)。****

# strip - 是否有任何在线 2D 正交条形包装算法的免费实现？

> ID：13538026
> 
> 赞同：1
> 
> 时间：2012-11-24T03:41:35.263
> 
> 标签：strip, packing

我赶紧补充一下，这里的“在线”是指一种一次处理一个对象的算法，并且在放置它们之前不分析整个集合。

我有很多来自网络漫画的不同尺寸的图像，我打算在一卷纸上打印，所以它们需要很好地包装。然而，所谓的“离线”算法倾向于将所有大块打包到一端，而所有块都打包到另一端，这不是我想要的。

# actionscript-3 - 我正在寻找用于 actionscript3 的正弦波音频发生器

> ID：13538027
> 
> 赞同：1
> 
> 时间：2012-11-24T03:41:48.313
> 
> 标签：actionscript-3, audio, generator, trigonometry

我一直在寻找 actionscript3 的正弦波发生器。我找到了 SION（[https://sites.google.com/site/sioncenter/](https://sites.google.com/site/sioncenter/)），但它似乎不接受以赫兹为单位的频率作为输入，它只接受音符（a、b、c 等）。

我需要正弦波发生器以赫兹为单位接受频率，因此它可以产生可听范围内的任何频率。

我在哪里可以找到类似的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T02:34:49.510

找到了我正在寻找的东西。关于如何使用 Sound 对象在 AS3 中编写简单的正弦波发生器的教程：

[http://www.bit-101.com/blog/?p=2669](http://www.bit-101.com/blog/?p=2669)

# c# - 在这种情况下我应该使用什么？

> ID：13538028
> 
> 赞同：-1
> 
> 时间：2012-11-24T03:41:57.857
> 
> 标签：c#, timer, arraylist

我需要通过两个数组列表（对于那些回答我之前的问题的，我已经解决了），一个（“dir”）保存了文本，将用作指令，另一个（“时间” ) 中有数字，将用于计时器的间隔（“Timer.Interval”）。我需要做的是让“Dir”的每个位置连续完成，直到计时器滴答（Timer.Tick），然后转到下一个位置。据我所知：

```
int i = 0;
for ( i = 0; i > -1; i++)                
{
    Console.WriteLine(cls.dir[i]);
    Console.WriteLine(cls.time[i]);
    if (cls.dir[i] == "one")
    {
         timerSeconds.Interval = Convert.ToInt32(cls.time[i]) * 1000;
         Label1.Text = "Hello StackOverflow";
    }
} 
```

在这种情况下，为了更容易理解我所做的示例，它应该做的是在 Label1 中显示不同的文本作为符号，只要 Arraylist 对每个块说的时间。我知道这是不完整的，你会如何结束它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T03:57:42.627

听起来您想“等待”一定的毫秒数。

如果是这样，最好的方法是使用“睡眠”：

```
 if (cls.dir[i] == "one")
   {
        int interval = Convert.ToInt32(cls.time[i]) * 1000;
        Label1.Text = "Hello StackOverflow";
        System.Threading.Thread.Sleep(interval);
   }
   Label1.Text = "Time to wake up"; 
```

# javascript - 运行 phantomjs casperjs 时手动输入

> ID：13538030
> 
> 赞同：5
> 
> 时间：2012-11-24T03:42:46.063
> 
> 标签：javascript, automated-tests, web-scraping, phantomjs, casperjs

在进行下一步之前，是否可以让脚本（phantomjs 或 casperjs）停止**手动输入**（键盘输入）？

例如，脚本将填写一个表单并将整个屏幕导出为 .png，然后等待用户输入填写最后一个字段，然后单击提交。验证码是所需的障碍之一。我不想处理验证码破解器/求解器或类似的东西，因为每次运行只有一次。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T03:56:35.153

我从来没有这样做过，但是，我知道您编写的在浏览器/幻象中执行的脚本可以向某个本地网络服务器发送 ajax 请求。有你的对外交流。

```
->screenshot 
->send to local server
->someones open web browser polls the server for new data entry jobs
->human submits one
->server receives submission
->server routes the response back to that initial ajax request
->that ajax request that got sent from phantomjs finally receives a response. 
```

这个工作流程可以使用来自 phantom/casper 的任何类型的外部通信来完成（我只是不熟悉它们）。我确定 ajax 可以工作，所以我以它为例。

# java - 以 5 秒的间隔将甘特图 x 轴更改为秒 - jFreeChart

> ID：13538031
> 
> 赞同：1
> 
> 时间：2012-11-24T03:42:51.160
> 
> 标签：java, jfreechart

我想将此图表的 x 轴值更改为以 5 秒为间隔的秒数。这里以小时为单位的公共 x 轴。我想将其更改为秒。我想将此图表用于不同的场景。我试过“new Second()”对象但很困惑。任何人都可以帮我解决这个问题。

```
public class XYTaskDatasetDemo2 extends ApplicationFrame {

/**
 * Constructs the demo application.
 *
 * @param title  the frame title.
 */
public XYTaskDatasetDemo2(String title) {
    super(title);
    JPanel chartPanel = createDemoPanel();
  //        chartPanel.setPreferredSize(new java.awt.Dimension(500, 300));
    setContentPane(chartPanel);
}

/**
 * Creates a subplot.
 *
 * @param dataset  the dataset.
 *
 * @return A subplot.
 */
private static XYPlot createSubplot1(XYDataset dataset) {
    XYLineAndShapeRenderer renderer = new XYLineAndShapeRenderer();
    renderer.setUseFillPaint(true);
    renderer.setBaseFillPaint(Color.white);
    renderer.setBaseShape(new Ellipse2D.Double(-4.0, -4.0, 8.0, 8.0));
    renderer.setAutoPopulateSeriesShape(false);
    NumberAxis yAxis = new NumberAxis("Y");
    yAxis.setLowerMargin(0.1);
    yAxis.setUpperMargin(0.1);
    XYPlot plot = new XYPlot(dataset, new DateAxis("Time"), yAxis,
            renderer);
    return plot;
}

/**
 * Creates a subplot.
 *
 * @param dataset  the dataset.
 *
 * @return A subplot.
 */
private static XYPlot createSubplot2(IntervalXYDataset dataset) {
    DateAxis xAxis = new DateAxis("Date/Time");
    SymbolAxis yAxis = new SymbolAxis("Resources", new String[] {"Team A",
            "Team B", "Team C", "Team D", "Team E"});
    yAxis.setGridBandsVisible(false);
    XYBarRenderer renderer = new XYBarRenderer();
    renderer.setUseYInterval(true);
    XYPlot plot = new XYPlot(dataset, xAxis, yAxis, renderer);
    return plot;
}

/**
 * Creates a demo chart.
 *
 * @return A demo chart.
 */
private static JFreeChart createChart() {
    CombinedDomainXYPlot plot = new CombinedDomainXYPlot(
            new DateAxis("Date/Time"));
    plot.setDomainPannable(true);
    plot.add(createSubplot1(createDataset1()));
    plot.add(createSubplot2(createDataset2()));
    JFreeChart chart = new JFreeChart("XYTaskDatasetDemo2", plot);
    chart.setBackgroundPaint(Color.white);
    ChartUtilities.applyCurrentTheme(chart);
    return chart;
}

/**
 * Creates a panel for the demo.
 *
 * @return A panel.
 */
public static JPanel createDemoPanel() {
    return new ChartPanel(createChart());
}

/**
 * Creates a dataset for the demo.  Normally a dataset wouldn't be hard
 * coded like this - it would be read from a file or a database or some
 * other source.
 *
 * @return A dataset.
 */
private static XYDataset createDataset1() {
    TimeSeriesCollection dataset = new TimeSeriesCollection();
    TimeSeries s1 = new TimeSeries("Time Series 1");
    s1.add(new Hour(0, new Day()), 20214.5);
    s1.add(new Hour(4, new Day()), 73346.5);
    s1.add(new Hour(8, new Day()), 54643.6);
    s1.add(new Hour(12, new Day()), 92683.8);
    s1.add(new Hour(16, new Day()), 110235.4);
    s1.add(new Hour(20, new Day()), 120742.5);
    s1.add(new Hour(24, new Day()), 90654.5);
    dataset.addSeries(s1);
    return dataset;
}

/**
 * Creates a dataset for the demo.  Normally a dataset wouldn't be hard
 * coded like this - it would be read from a file or a database or some
 * other source.
 *
 * @return A dataset.
 */
private static IntervalXYDataset createDataset2() {
    XYTaskDataset dataset = new XYTaskDataset(createTasks());
    dataset.setTransposed(true);
    dataset.setSeriesWidth(0.6);
    return dataset;
}

/**
 * Creates a task series collection.
 *
 * @return A task series collection.
 */
private static TaskSeriesCollection createTasks() {
    TaskSeriesCollection dataset = new TaskSeriesCollection();
    TaskSeries s1 = new TaskSeries("Team A");
    s1.add(new Task("T1a", new Hour(11, new Day())));
    s1.add(new Task("T1b", new Hour(14, new Day())));
    s1.add(new Task("T1c", new Hour(16, new Day())));
    TaskSeries s2 = new TaskSeries("Team B");
    s2.add(new Task("T2a", new Hour(13, new Day())));
    s2.add(new Task("T2b", new Hour(19, new Day())));
    s2.add(new Task("T2c", new Hour(21, new Day())));
    TaskSeries s3 = new TaskSeries("Team C");
    s3.add(new Task("T3a", new Hour(13, new Day())));
    s3.add(new Task("T3b", new Hour(19, new Day())));
    s3.add(new Task("T3c", new Hour(21, new Day())));
    TaskSeries s4 = new TaskSeries("Team D");
    s4.add(new Task("T4a", new Day()));
    TaskSeries s5 = new TaskSeries("Team E");
    s5.add(new Task("T5a", new Day()));
    dataset.add(s1);
    dataset.add(s2);
    dataset.add(s3);
    dataset.add(s4);
    dataset.add(s5);
    return dataset;
}

/**
 * Starting point for the demonstration application.
 *
 * @param args  ignored.
 */
public static void main(String[] args) {
    XYTaskDatasetDemo2 demo = new XYTaskDatasetDemo2(
            "JFreeChart : XYTaskDatasetDemo2.java");
    demo.pack();
    RefineryUtilities.centerFrameOnScreen(demo);
    demo.setVisible(true);
}

 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T09:03:22.333

您可以通过以下方式更改 createChart 方法来更改水平轴：

```
private static JFreeChart createChart() {
    CombinedDomainXYPlot plot = new CombinedDomainXYPlot(new DateAxis("Date/Time"));
    plot.setDomainPannable(true);
    plot.add(createSubplot1(createDataset1()));
    plot.add(createSubplot2(createDataset2()));

    // Get the horizontal Axis for the plot
    DateAxis axis = (DateAxis) plot.getDomainAxis();
    // Change the unit tick to 5 hours
    axis.setTickUnit(new DateTickUnit(DateTickUnitType.HOUR, 5));
    // Change the date format used to display tick values
    axis.setDateFormatOverride(new SimpleDateFormat("hh:mm"));

    JFreeChart chart = new JFreeChart("XYTaskDatasetDemo2", plot);

    chart.setBackgroundPaint(Color.white);
    ChartUtilities.applyCurrentTheme(chart);
    return chart;
} 
```

在此示例中，我在水平轴上定义了一个 5 小时刻度，因为它适合您的示例数据。如果您想要 5 秒的间隔，请使用：

```
 axis.setTickUnit(new DateTickUnit(DateTickUnitType.SECOND, 5)); 
```

# windows - Windows 在特殊文件夹中错误地按文件名复制文件

> ID：13538035
> 
> 赞同：0
> 
> 时间：2012-11-24T03:44:18.733
> 
> 标签：windows, windows-7, desktop, relative-path

如果我将文件从[特殊文件夹复制](https://en.wikipedia.org/wiki/Special_folder)到剪贴板，更改特殊文件夹指向的位置，然后尝试将文件粘贴到这个新位置，Windows 会抱怨 a `Item Not Found error`，似乎试图仅通过文件名复制文件。

我更改特殊文件夹位置的方法是使用这行 C++ 代码：

```
SHSetKnownFolderPath(FOLDERID_Desktop, 0, NULL, new_location); 
```

并刷新立即查看效果：

```
SHChangeNotify(0x8000000, 0x1000, NULL, NULL); 
```

**重现步骤**

1.  桌面指向`C:\Users\BoppreH\Desktop`

2.  `music 1.mp3`从桌面复制文件( `C:\Users\BoppreH\Desktop\music 1.mp3`)

3.  将桌面特殊文件夹的位置更改为`D:\music`

4.  桌面现在显示来自`D:\music`

5.  尝试粘贴`music 1.mp3`到桌面

它失败了`Item Not Found`，抱怨它找不到文件`D:\music\music 1.mp3`，当文件仍然愉快地坐在`C:\Users\BoppreH\Desktop\music 1.mp3`。如果我将文件粘贴到不是桌面的任何其他文件夹中，它工作正常。

我知道这是一个*Doctor 的案例，当我这样做时会很痛*，并且不断改变桌面的位置是非常不寻常的行为，但这是我已经爱上的一个功能，这个 bug 经常咬我。

这个问题有一些解决方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T03:55:30.783

使用某种类型的`folder watcher`控件来检测特殊文件夹位置何时更改，并检查剪贴板中是否存在引用旧位置的任何文件路径并更新它们。

或者在复制文件之前更改特价商品的位置。

# php - 使用带有 jquery mobile 的单选按钮显示/隐藏 div

> ID：13538037
> 
> 赞同：0
> 
> 时间：2012-11-24T03:44:35.690
> 
> 标签：php, jquery, html, mysql

好的，这是我的问题，以及我所有的“脏”代码。这不是我的生产代码，只是试图让它在此刻工作。

基本上我需要的是，当用户选择 Not Ok 单选按钮时，它会显示该唯一集的 textarea，当我选择 Not Ok 时，它现在不执行此操作，它会为所有条目提供 textarea，现在大约 13 集目前从 mysql 数据库动态生成的问题。我有一种感觉，它必须用唯一的 id 做一些事情，这些 id 要么现在在我的代码中的错误位置，要么根本不存在。非常感谢任何帮助。

```
<div data-role="collapsible" data-theme="b" data-content-theme="c">
<h3>Vehicle Check Information</h3>
<?php
$query = mysql_query("SELECT * FROM vehicle_q");
while($row = mysql_fetch_array($query)) {
    $q_title = $row['title'];
    $q_id = $row['id'];
?>

<div data-role="fieldcontain" style="border:0;">
<fieldset data-role="controlgroup">
<legend><?php echo $q_title; ?>:</legend>

<input type="radio" name="help[]" id="checkbox-1a" value="Ok" />
<label for="checkbox-1a">Ok</label>
<input type="radio" name="help[]" id="checkbox-2a" value="Not Ok" />
<label for="checkbox-2a">Not Ok</label>

</fieldset>

<div id="hidden_text-<?php echo $q_id; ?>" style="display:none;">

<script>
$(document).ready(function(){
$(":radio:eq(1)").click(function(){
$("#hidden_text-<?php echo $q_id; ?>").show(500);
});
$(":radio:eq(0)").click(function(){
$("#hidden_text-<?php echo $q_id; ?>").hide(500);
});
});
</script>

<fieldset data-role="fieldcontain">
<label for="<?php echo $q_title; ?>_t">Explain the Deficiency(If any):</label>
<textarea name="text_a[]" id="<?php echo $q_title; ?>_t"></textarea>
</fieldset>
</div>
</div>
<input type="hidden" name="q_title1[]" value="<?php echo $q_title; ?>" />

<?php
}
?>

</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T04:04:45.517

我发现根据单选值显示隐藏元素的最简单方法是根据`onchange`元素的 id（您已经拥有）提供事件。在您的情况下，由于您只有两个基于相同名称的收音机，因此最简单的方法是使用简单的 if/else 语句。就像是：

```
<script type="text/javascript">
$(function(){
    $('#checkbox-1a').change(function(){
        if($(this).attr('checked')){
            $('#hidden-text-<?php echo $q_id;?>').hide(500);
        }else{
            $('#hidden-text-<?php echo $q_id;?>').show(500);
        }
    });
});
</script> 
```

我们声明何时`#checkbox-1a`更改：如果元素被选中（选择），那么做一些事情（在你的情况下隐藏一些东西），否则做其他事情（在你的情况下显示一些东西）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T04:19:23.127

其他 2 个答案是解决问题的方法。作为一个方面，这可能是它发生的原因。当您使用 -

```
$(":radio:eq(1)").click(function()
$(":radio:eq(0)").click(function() 
```

您正在使用单击侦听器，它仅检查是否在您的页面上单击了具有该索引位置的“任何”单选按钮。因此，任何具有索引位置的按钮`1`都会`$(":radio:eq(1)").click(function()`执行每次操作。

编辑 -

您可能想要更改您的单选按钮`id`s，因为 (1) 当您在每个循环中重复它们时，它们不会是唯一的`while()`，并且 (2) 您可以使用它来检查是否单击了该特定单选按钮。

尝试将其更改为 -

```
...
<input type="radio" name="help[]" id="checkbox-1a-<?php echo $q_id; ?>" value="Ok" />
<label for="checkbox-1a">Ok</label>
<input type="radio" name="help[]" id="checkbox-2a-<?php echo $q_id; ?>" value="Not Ok" />
<label for="checkbox-2a">Not Ok</label>

</fieldset>

<div id="hidden_text-<?php echo $q_id; ?>" style="display:none;">

<script>
$(document).ready(function(){
$("#checkbox-2a-<?php echo $q_id; ?>").click(function(){
$("#hidden_text-<?php echo $q_id; ?>").show(500);
});
$("#checkbox-1a-<?php echo $q_id; ?>").click(function(){
$("#hidden_text-<?php echo $q_id; ?>").hide(500);
});
});
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T04:07:37.903

尝试类似：

```
<div data-role="collapsible" data-theme="b" data-content-theme="c">
    <h3>Vehicle Check Information</h3>
    <?php
    $query = mysql_query("SELECT id,title FROM vehicle_q");
    while($row = mysql_fetch_array($query)) {
        $q_title = $row['title'];
        $q_id = $row['id'];
    ?>
    <div data-role="fieldcontain" style="border:0;" class="groupings">
        <fieldset data-role="controlgroup">
            <legend><?=$q_title?>:</legend>
            <input type="radio" name="help[]" id="checkbox-<?=$q_id?>-1a" value="Ok" />
            <label for="checkbox-<?=$q_id?>-1a">Ok</label>
            <input type="radio" name="help[]" id="checkbox-<?=$q_id?>-2a" value="Not Ok" />
            <label for="checkbox-<?=$q_id?>-2a">Not Ok</label>
        </fieldset>
        <div id="hidden_text-<?=$q_id?>" class="hiddenText" style="display:none;">
            <fieldset data-role="fieldcontain">
                <label for="<?=$q_title?>_t">Explain the Deficiency(If any):</label>
                <textarea name="text_<?=$q_id?>_a[]" id="<?=$q_title?>_t"></textarea>
            </fieldset>
        </div>
    </div>
    <input type="hidden" name="q_title1[]" value="<?php echo $q_title; ?>" />
    <?php
    }
    ?>
</div>
<script>
    $(document).ready(function(){
        $(".groupings input:radio").click(function(){
            if (this.value == "Ok") {
                $(this).parent().next('.hiddenText').show(500);
            } else {
                $(this).parent().next('.hiddenText').hide(500);
            }
        });
    });
</script> 
```

这是未经测试的，但脚本只需要声明一次，它将应用于与单选按钮相关的其余部分。

# jquery - 如何从数组中使用 jQuery 鼠标悬停？

> ID：13538043
> 
> 赞同：2
> 
> 时间：2012-11-24T03:45:11.370
> 
> 标签：jquery

我有一个示例代码：

```
<a href=""></a>
<textarea></textarea>
<object></object>
<img src="" />
<div id="content"></div> 
```

我用过这个：

```
jQuery("a").mouseover(function() {
    alert();
 });
 jQuery("textarea").mouseover(function() {
    alert();
 });
 jQuery("object").mouseover(function() {
    alert();
 }); 
 jQuery("img").mouseover(function() {
    alert();
 });
 jQuery("#content").mouseover(function() {
    alert();
 }); 
```

我可以用这个吗？

```
var object = ["a","textarea","object","img", "content"]; 
jQuery.each(object, function() {
   jQuery(this).mouseover(function(){
      alert();
   });  
}); 
```

如何从数组中使用 jQuery mouseover 的想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T03:49:43.353

在`.each()`循环的上下文中，`this`将是数组中的当前元素，即一个字符串，除了每个字符串将被包装在一个对象中（如[文档页](http://api.jquery.com/jquery.each/)中所述），因此您需要使用： [`$.each()`](http://api.jquery.com/jquery.each/)`this.toString()`

```
jQuery(this.toString()).mouseover(function(){ 
```

...然后它将具有与 相同的效果`jQuery("a")`，`jQuery("textarea")`依此类推。只要每个字符串都是有效的选择器，它就会起作用。或者，更好的是，利用 jQuery 传递给您的函数的参数：

```
jQuery.each(object, function(i, val) {
   jQuery(val).mouseover(function(){ 
```

数组中的最后一个元素是一个`id`，所以它需要一个`#`：

```
var object = ["a","textarea","object","img", "#content"];
// add # here --------------------------------^ 
```

然后在 mouseover 处理程序的上下文中，`this`是事件发生的元素，所以只需使用`jQuery(this)`而不是`jQuery("#" + this)`. 把所有这些放在一起：

```
jQuery.each(object, function(i, val) {
   jQuery(val).mouseover(function(){
       jQuery(this).css(...);           
   });  
});​ 
```

演示：http: [//jsfiddle.net/GBtFY/](http://jsfiddle.net/GBtFY/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T03:49:03.733

当您访问时，`this`您不会预先添加`#`.

至于数组，我只会使用 CSS 选择器：

```
$('a, textarea, object, img, #content').mouseover(function(){
  $(this).css(...);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T04:02:53.213

如果我是你，我会给那些需要鼠标悬停功能的元素一个共同的属性。像类名或数据值属性。
例如：

```
<a href="" data-hover="true"></a>
<textarea data-hover="true" ></textarea>
<object data-hover="true" ></object>
<img data-hover="true" src="" />
<div data-hover="true" id="content"></div>

<script type="text/javascript">
$(document).ready(function(){
    $('[data-hover]').bind('mouseover', function(){
        alert('Completed');
    });
});
</script> 
```

# html - 章鱼索引页

> ID：13538047
> 
> 赞同：4
> 
> 时间：2012-11-24T03:46:04.193
> 
> 标签：html, blogs, octopress

我创建了一个 Octopress 博客。我的博客页面一个接一个地包含我的所有帖子，我想更改它。
我看到了这些页面：[http://linuxmoz.com/](http://linuxmoz.com/)，[http://codingpraxis.com/](http://codingpraxis.com/)它们包含每个帖子的一段和“阅读”按钮。我在其他博客上看到了这种索引页面的特定模板。
如何创建此索引页面？另外，有什么地方可以找到不同页面的“模板”（比如关于或联系我）？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-25T15:38:15.043

**1** . 只需`<!-- more -->`在您的帖子中使用，Octopress 就会自动生成“Read On”按钮。
**2** . 在 Octopress 中添加“关于”页面需要 2 个步骤：
*1.创建“关于”页面*

```
rake new_page["about"] 
```

*2.添加链接*
编辑文件“source/_includes/custom/navigation.html”，编辑下面的第3行：

```
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
  <li><a href="/about">About</a></li>
</ul> 
```

在“rake generate”之后，“source/about/index.markdown”会生成“public/about/index.html”，也就是将内容显示给浏览器的文件。
[更多信息](http://gangmax.me/blog/2012/05/04/add-about-page-in-octopress/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-18T02:43:41.143

您不必创建额外的索引页面。在您的帖子中插入评论将阻止此标记下方的帖子内容显示在博客帖子的索引页面上，“继续→”按钮链接到完整帖子。

# objective-c - 如果 CoreLocation 必须不断检索用户的位置，节省电池的提示？

> ID：13538051
> 
> 赞同：2
> 
> 时间：2012-11-24T03:47:06.117
> 
> 标签：objective-c, ios, gps, core-location

应用程序将选择一个随机的纬度和经度来创建一个用户必须找到的点。

用户与该点的距离将使用“冷热计”显示，该计将根据距离改变颜色。该仪表必须不断更新，这需要我不断检索用户的位置。我还需要使用`kCLLocationAccuracyBest`. 但是，这听起来会消耗大量电池。

我可以做些什么来节省电池吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T03:51:14.197

来自官方文档

> 收集位置数据是一项耗电量大的操作。它涉及启动车载无线电并查询可用的手机信号塔、Wi-Fi 热点或 GPS 卫星，这可能需要几秒钟的时间。让标准定位服务长时间运行会耗尽设备的电池电量。（显着变化的定位服务通过仅监控蜂窝塔的变化来极大地减少电池消耗，但该服务仅适用于具有蜂窝无线电的设备。）对于大多数应用程序而言，建立初始定位然后仅定期获取更新通常就足够了之后。如果您确定需要定期更新位置，则应尽可能使用重大变化位置服务；除此以外，

[http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/LocationAwarenessPG/CoreLocation/CoreLocation.html](http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/LocationAwarenessPG/CoreLocation/CoreLocation.html)

PS：在同一个链接上，页面底部还有一个部分还有其他提示：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T03:25:04.517

我的 iphone 应用程序在 iphone4 上每秒钟运行 8 小时的录制修复。显示器需要更多功率。不用担心。测量您可以录制多长时间。然后索赔，而不是之前。

# mysql - 替换触发器激活DELETE触发器，但不是INSERT - mySQL

> ID：13538058
> 
> 赞同：0
> 
> 时间：2012-11-24T03:49:02.313
> 
> 标签：mysql, triggers

我在使用 mySQL 触发器时遇到了一些问题。

我有这个工作：

```
CREATE TRIGGER `insert_trigger` AFTER INSERT ON `table`
FOR EACH ROW
BEGIN
IF (SELECT COUNT(*) FROM `table` WHERE userID = NEW.userID AND IP = new.IP) = 0 THEN
    IF (SELECT COUNT(*) FROM `table` WHERE userID = NEW.userID) = 0 THEN
        INSERT INTO `table2` VALUES(NEW.userID, (SELECT (COUNT(*)+1) FROM `table` WHERE userID = NEW.userID) ); 
    ELSE 
        UPDATE `table2` SET views = views+1 WHERE table.userID = NEW.userID;
    END IF;
END IF;
END//
DELIMITER ; 
```

这适用于`INSERT`声明。

但是，我正在使用`REPLACE`它似乎只调用我的`DELETE`触发器

```
CREATE TRIGGER `delete_trigger` BEFORE DELETE ON `table`
FOR EACH ROW
BEGIN
    IF (SELECT views FROM `table2` WHERE userID = OLD.userID) > 1 THEN
        UPDATE `table2` SET views = views-1 WHEREuserID = OLD.userID;
    END IF;
END//
DELIMITER ; 
```

当同时使用`REPLACE`和`DELETE`时，`INSERT`应该调用触发器。

我知道 mySQL 不支持多个触发器。

当另一个表有`INSERT`,`DELETE`并且`REPLACE`发生事件时，获得相同结果（添加/减去视图）的可能解决方案是什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T03:22:35.453

问题在于我自己的触发器。

`REPLACE`调用 Delete 和 Insert 但这个 IF 语句

```
IF (SELECT COUNT(*) FROM `table` WHERE userID = NEW.userID AND IP = new.IP) = 0 THEN 
```

正在阻止插入。

# jquery - jQuery 包装 div

> ID：13538063
> 
> 赞同：-2
> 
> 时间：2012-11-24T03:49:39.983
> 
> 标签：jquery

我正在尝试在下面示例的“这里是一些文本”区域周围添加一个 div

我正在考虑通过找到`nav`直到`menucontainer`并将其包装在一个`div`. 但这行不通。

### HTML

```
<nav id="mainNav">
    here is some text
    <div id="menucontainer"> test</div>
</nav> 
```

### jQuery

```
jQuery(document).ready(function() {
    jQuery("#mainNav").nextUntil("div#menucontainer").wrapAll( jQuery("<div></div>").addClass("newDiv") );     
}); 
```

新的 div 并没有被附加，我不知道为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T04:07:15.437

**Javascript**

```
$(document).ready(function() {

    $("#mainNav").wrapInner($("<div class='newDiv' />"));

    var menucontainer = $("#menucontainer").remove();

    $("#mainNav").append(menucontainer);

}); 
```

[**演示**](http://jsfiddle.net/fcm4E/)

# python - Glade + PyGTK 更改按钮字体大小

> ID：13538069
> 
> 赞同：1
> 
> 时间：2012-11-24T03:50:08.740
> 
> 标签：python, pygtk

我正在使用 Unity 工具（PyGTK + Python）开发 Ubuntu 应用程序。我可以毫无问题地更改标签字体大小，但我找不到相同的按钮。如何更改按钮字体大小？

这样做的目的是，我正在开发一个屏幕键盘，所以数字文本需要更大，以便更容易看到。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T12:41:26.020

该按钮包含一个标签，您可以使用该标签`get_child()`和相关功能进行访问。您可以使用普通方法更改标签的字体大小。

# android - 在 Android Facebook sdk 3.0 中使用 proguard 时出错

> ID：13538070
> 
> 赞同：17
> 
> 时间：2012-11-24T03:50:26.913
> 
> 标签：android, facebook, proguard, facebook-android-sdk

**警告：**我删除了很多“旧文本”以保持问题更清晰。如果需要，只需检查历史记录。

我`proguard`用来缩小和混淆使用[facebook sdk 3.0](https://developers.facebook.com/android/)的应用程序（我正在使用[sdk-version-3.0.2.b 标签](https://github.com/facebook/facebook-android-sdk/tree/sdk-version-3.0.2.b)）。我没有使用 JAR 文件。相反，我在我的工作区中导入了 sdk，正如[文档](https://developers.facebook.com/docs/getting-started/facebook-sdk-for-android/3.0/)中所教导的那样。

在执行的某个时刻，应用程序会加载一个[PlacePickerFragment](https://developers.facebook.com/docs/reference/android/3.0/PlacePickerFragment)以让用户选择他所在的位置。为了编写代码，我完全按照[Scrumptious 教程](https://developers.facebook.com/docs/tutorials/androidsdk/3.0/scrumptious/show-nearby-places/)进行操作。**当我在不使用一切的情况下生成调试 apk 时，`proguard`一切都按预期工作。**但是，当我使用 生成签名的 apk`proguard`时，它会在 PlacePickerFragment 使用以下跟踪加载附近的地方时崩溃：

```
E/AndroidRuntime(27472): FATAL EXCEPTION: main
E/AndroidRuntime(27472): com.facebook.FacebookGraphObjectException: can't infer generic type of: interface com.facebook.model.GraphObjectList
E/AndroidRuntime(27472):    at com.facebook.model.GraphObject$Factory.coerceValueToExpectedType(Unknown Source)
E/AndroidRuntime(27472):    at com.facebook.model.GraphObject$Factory$GraphObjectProxy.proxyGraphObjectGettersAndSetters(Unknown Source)
E/AndroidRuntime(27472):    at com.facebook.model.GraphObject$Factory$GraphObjectProxy.invoke(Unknown Source)
E/AndroidRuntime(27472):    at com.facebook.widget.$Proxy2.getData(Native Method)
E/AndroidRuntime(27472):    at com.facebook.widget.GraphObjectPagingLoader.addResults(Unknown Source)
E/AndroidRuntime(27472):    at com.facebook.widget.GraphObjectPagingLoader.requestCompleted(Unknown Source)
E/AndroidRuntime(27472):    at com.facebook.widget.GraphObjectPagingLoader.access$1(Unknown Source)
E/AndroidRuntime(27472):    at com.facebook.widget.GraphObjectPagingLoader$2.onCompleted(Unknown Source)
E/AndroidRuntime(27472):    at com.facebook.Request$4.run(Unknown Source)
E/AndroidRuntime(27472):    at android.os.Handler.handleCallback(Handler.java:587)
E/AndroidRuntime(27472):    at android.os.Handler.dispatchMessage(Handler.java:92)
E/AndroidRuntime(27472):    at android.os.Looper.loop(Looper.java:130)
E/AndroidRuntime(27472):    at android.app.ActivityThread.main(ActivityThread.java:3687)
E/AndroidRuntime(27472):    at java.lang.reflect.Method.invokeNative(Native Method)
E/AndroidRuntime(27472):    at java.lang.reflect.Method.invoke(Method.java:507)
E/AndroidRuntime(27472):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:867)
E/AndroidRuntime(27472):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:625)
E/AndroidRuntime(27472):    at dalvik.system.NativeStart.main(Native Method) 
```

为了避免这个错误，我保持所有 facebook 类不变，但没有工作。我当前的`proguard-project.txt`文件：

```
-keep class com.facebook.** {
   *;
} 
```

我当前的`projet.properties`文件（摘录）：

```
proguard.config=${sdk.dir}/tools/proguard/proguard-android.txt:proguard-project.txt 
```

如您所见，我的`proguard`配置是[此文件](https://gist.github.com/4148345)的“特化” 。

**如果我放入`-dontobfuscate`文件`proguard-project.txt`中，它将起作用。**但我不明白的是，`keep class com.facebook.**`应该已经防止与 facebook 相关的类被混淆。这表明问题与 facebook 类没有直接关系。

抛出的[代码摘录](https://github.com/facebook/facebook-android-sdk/blob/sdk-version-3.0.2.b/facebook/src/com/facebook/model/GraphObject.java#L278)`com.facebook.FacebookGraphObjectException`是：

```
static <U> U coerceValueToExpectedType(Object value, Class<U> expectedType, 
        ParameterizedType expectedTypeAsParameterizedType) {

    // [...]

    } else if (Iterable.class.equals(expectedType) || Collection.class.equals(expectedType)
        || List.class.equals(expectedType) || GraphObjectList.class.equals(expectedType)) {
        if (expectedTypeAsParameterizedType == null) {
            throw new FacebookGraphObjectException("can't infer generic type of: " + expectedType.toString());
        }
    // [...]
} 
```

显然，`expectedTypeAsParameterizedType`是`null`在发布版本中。但是在两个版本（调试和发布）`expectedType`中都是一个`com.facebook.model.GraphObjectList`接口。不幸的是，我对 Java 反射概念几乎一无所知。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-11-26T19:10:46.527

这将解决您的问题，我希望：

最终获胜者是 .....

```
-keepattributes Signature 
```

从 Proguard 主页：

> 在 JDK 5.0 及更高版本中编译时，需要“Signature”属性才能访问泛型类型。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-04-22T06:39:03.743

如果你想保护 Facebook，下面的配置对我有用

```
#modify for Facebook
-keepattributes Signature
-keep class com.facebook.model.** { *; }

-keepnames class * implements java.io.Serializable
-keepclassmembers class * implements java.io.Serializable {
    static final long serialVersionUID;
    private static final java.io.ObjectStreamField[] serialPersistentFields;
    !static !transient <fields>;
    private void writeObject(java.io.ObjectOutputStream);
    private void readObject(java.io.ObjectInputStream);
    java.lang.Object writeReplace();
    java.lang.Object readResolve();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T03:57:54.263

这可能有效（未经测试）

```
-keep class com.facebook.** { *; } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-24T03:58:24.910

尝试

```
-keep class com.facebook.** {
   *;
} 
```

原因是，在指定私有、公共、受保护时，您仍然会打开对混淆的默认（包私有）访问。

# image-processing - 关于高斯差的几个问题

> ID：13538076
> 
> 赞同：0
> 
> 时间：2012-11-24T03:51:30.173
> 
> 标签：image-processing, signal-processing

我将这个公式用于DoG（[链接](https://latex.codecogs.com/gif.latex?%5Cfrac%7B1%7D%7B%5Csigma%7D%20%28%5Cfrac%7Bx%5E2%7D%7B2%5Csigma%5E2%7D-1.0%29%20e%5E%7B%5Cfrac%7B-x%5E2%7D%7B2%5Csigma%5E2%7D%7D)）：

![其他](../Images/424e9ee4c6cdf304f318478d74b85e09.png)

这个公式和差的两个高斯函数有什么关系？

有人可以告诉我如何在 Matlab 中对一维信号应用 DoG 吗？我的输入可以被认为是一维实值函数，我应用上面的公式来检测斑点。结果是有意义的，只是我不知道为什么我在相对平坦的区域中得到许多局部最小值（即，该区域中各点的函数值几乎保持不变）。由于我没有足够的信号处理/图像处理背景，我想看看用DoG滤波器卷积后的恒定信号是什么样子的。

谢谢

# django - 为什么将 Django 模板存储在其关联的应用程序中是不明智的？

> ID：13538079
> 
> 赞同：4
> 
> 时间：2012-11-24T03:52:18.630
> 
> 标签：django, templates, django-templates, project-organization

根据[这个问题](https://stackoverflow.com/questions/1740436/what-is-the-best-location-to-put-templates-in-django-project)的成功答案以及我在互联网上阅读的所有其他内容[，](https://docs.djangoproject.com/en/1.4/intro/tutorial03/#write-views-that-actually-do-something)您很可能会将 Django 模板放在`mySubAppX`外部的文件夹中`mySubAppX`- 最常见`myProject/templates/mySubAppX`的是，模板是实际`mySubAppX`目录的同级目录，其中应用程序已存储。

为什么？尤其是当您将子应用程序模块化时，为什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-24T05:58:10.110

这不是规则，取决于。应用程序内部解决方案也有[支持者](https://stackoverflow.com/a/1747960/165603)。

在集中模板方式中`templates/app/template_name`，定位模板速度很快，模板名称可以像`app/item.html`; 您也可以轻松地管理/移动整个目录到某个地方，例如内存磁盘。

另一方面，应用程序内部的方式，`app/templates/app_template_name`或者`app/templates/app/template_name`，更适合打包的应用程序。对于编辑，我的同事发现应用程序内的解决方案无论如何在Eclipse中开发更方便。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-24T12:55:02.197

如前所述`okm`，这不是规则。Django 总是先在`TEMPLATE_DIRS`目录中查找模板，然后返回到应用程序/包目录查找模板。这就是为什么建议将应用程序模板放在它们的位置，以便可以快速找到它们。

您仍然可以将模板放在`mySubAppX`.

```
project/apps/mySubAppX/templates 
```

为了使其高效，您可以将此路径添加到您`TEMPLATE_DIRS`的设置中，以便 Django 首先查找那里以找到模板。

```
TEMPLATE_DIRS = (
    'project/apps/mySubAppX/templates',
    #other apps template directories
) 
```

# microcontroller - 为什么要在 AVR 编程中校准振荡器

> ID：13538080
> 
> 赞同：3
> 
> 时间：2012-11-24T03:52:29.363
> 
> 标签：microcontroller, avr, atmel, atmega, avr-studio5

我是 AVR 编程的新手。我在网上找到了一个示例代码；用于与 PC 进行简单的 USART 通信。我对此有点怀疑。

主循环是这样开始的；

```
void main(){
  OSCCAL_calibration(); 
  USARTinit();
  //start communicating with PC
} 
```

我无法理解使用`OSCCAL_calibration();`函数校准振荡器的原因。

* * *

**功能**

**`OSCCAL_calibration()`功能**

```
void OSCCAL_calibration(void){
    unsigned char calibrate = 0;
    int temp;
    unsigned char tempL;
    CLKPR = (1<<CLKPCE);
    CLKPR = (1<<CLKPS1) | (1<<CLKPS0);
    TIMSK2 = 0;
    ASSR = (1<<AS2);
    OCR2A = 200;
    TIMSK0 = 0;
    TCCR1B = (1<<CS10);
    TCCR2A = (1<<CS20);
    while((ASSR & 0x01) | (ASSR & 0x04));
    for(int i = 0; i < 10; i++)
    _delay_loop_2(30000);
    while(!calibrate){
        cli();
        TIFR1 = 0xFF;
        TIFR2 = 0xFF;
        TCNT1H = 0;
        TCNT1L = 0;
        TCNT2 = 0;
        while ( ! (TIFR2 && (1<<OCF2A)) );
        TCCR1B = 0; // stop timer1
        sei();
        if ( (TIFR1 && (1<<TOV1)) ){
            temp = 0xFFFF;
        }else{
            tempL = TCNT1L;
            temp = TCNT1H;
            temp = (temp << 8);
            temp += tempL;
        }
        if (temp > 6250){
            OSCCAL--;
        } else if (temp < 6120){
            OSCCAL++;
        }else
        calibrate = 1;
        TCCR1B = (1<<CS10);
    }
} 
```

**`USARTinit()`功能**

```
void USARTinit(){
    CLKPR = (1<<CLKPCE);
    CLKPR = (1<<CLKPS1);
    UBRR0H = 0;
    UBRR0L = 12;
    UCSR0A = (1<<U2X0);
    UCSR0B = (1<<RXEN0)|(1<<TXEN0)|(0<<RXCIE0)|(0<<UDRIE0);
    UCSR0C = (0<<UMSEL00)|(0<<UPM00)|(0<<USBS0)|(3<<UCSZ00)|(0<<UCPOL0);
} 
```

* * *

我正在使用`Atmel Studio 6`和测试它`atmega2560`（实际上是用我的 Arduino Mega）。经过一些改变，我可以让它工作。但它仍然可以在没有校准功能的情况下工作..

我将逐项列出我的问题，如下所示。

> 1.  您在校准振荡器时真正做了什么？
> 2.  这是必须的吗？
> 3.  PIC微控制器中是否有类似的功能？（我在 PIC 编程方面*有点*经验。但从来不知道这样的事情）

也有一点疑问；

> 为什么`USARTinit()`在设置波特率之前在函数中设置时钟预标量？你不能在没有预标量的情况下设置波特率（这意味着预标量 = 1）

是为了省电还是什么？但我尝试使用 pre-scalar=1，它似乎不起作用（仍在尝试）。是的，我已经正确计算了波特率（使用数据表中的给定方程）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T04:06:28.880

我对这个特殊的硬件一无所知，但谷歌很快就显示了[这个数据表](http://www.atmel.com/Images/doc2555.pdf)

去引用：

> 目前的大多数 AVR 微控制器都提供了从内部 RC 振荡器运行的可能性。在大多数 AVR 中，内部 RC 振荡器频率可以校准到器件数据表中指定频率的 +/-1% 以内。与使用外部振荡器相比，此功能提供了极大的灵活性并显着节省了成本。在 Atmel 工厂执行的校准是在固定的工作电压和温度（25°C，通常为 5V）下进行的。由于内部 RC 振荡器的频率受工作电压和温度的影响，因此可能需要执行与特定应用环境相匹配的二次校准。可以执行此二次校准以获得比标准校准提供的更高的精度，

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T15:39:23.030

如果您在微控制器之外进行任何与时序相关的通信（串行、将 spi 推到极限等）或保持时间或其他任何事情，那么您需要一个更准确的时钟。

这实际上与功率无关，也许，如果时钟有点慢，那么你会使用更多的功率，如果有点快，那么你会节省一点功率。

许多但并非所有微控制器都提供内部 R/C 振荡器，因此您不需要外部振荡器（额外组件，额外成本）。这不是一个家族与另一个家族（avr、msp430、pic 等）的对比，一个家族中的某些芯片具有内部振荡器，有些则没有。我以前使用的 PIC 需要一个外部的，今天不知道这个家庭的细节。校准的方式也因家庭而异。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T22:04:11.233

校准的需要取决于您的实际硬件：

1.  如果您的微控制器使用 Xtal 生成其时钟，则您无需校准任何东西，只需根据您的 Xtal 振荡频率选择好的分频器。

2.  如果您只使用 RC 振荡器，那么由于它可能具有更重要的值容差，您可能需要校准频率，尤其是在使用较高波特率（如 19200 或更高）时。

您必须根据振荡器频率设置预分频器，有关详细信息，请参阅数据表。

# c# - 如何在任意数量的 LinkBut tons 上使用 if 语句，以便每次回发并显示不同的记录？

> ID：13538081
> 
> 赞同：1
> 
> 时间：2012-11-24T03:53:02.983
> 
> 标签：c#, asp.net, sql, sql-server, sql-server-2008

在我的数据库中，我制作了一个带有列的表

```
ProductId                int            Unchecked
[Sports Name]            nvarchar(50)   Checked
Category                 nvarchar(50)   Checked
Brand                    nvarchar(50)   Checked
Image                    text           Checked
MRP                      varchar(50)    Checked
[Our Price]              varchar(50)    Checked
[You Save]               varchar(50)    Checked
[Shipping Charges]       varchar(50)    Checked
[Expected Delivery]      varchar(50)    Checked 
```

在前面，我创建了许多链接按钮，例如羽毛球、网球、乒乓球等。还有一个下拉列表来选择所需的设备，例如羽毛球的球拍和羽毛球，板球的球棒和球等等。下拉列表以选择其品牌。

现在我希望他们仅在一个页面中显示客户在点击和选择事件中选择的产品，而不是通过为每个类别创建页面一些类似的东西（编码不准确，它只是我想要的样本）

```
if(badminton.click==true)
{
  cmd.text= seclect * from products where [Sports Name == Badminton] And Category==setectedcategory and so on 
} 
else if(tennis.click==true
{
}
...........so on 
```

或仅在一个语句中，就像

```
cmd.text= select * from products where [Sports Name]==LinkButton.click And all like this 
```

现在请帮助我，如果你明白我想要什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T08:41:40.280

您的数据库存在一些问题，我必须指出：

*   不要在列名中使用空格，例如`[Our Price]`, `[Expected Delivery]`。可以，但建议不要这样做。您的标识符应符合[**常规标识符的默认规则**](http://msdn.microsoft.com/en-us/library/aa223962%28v=sql.80%29.aspx)。

*   对于货币或货币价值，使用^(**1**)它[有很多好处](http://sqlcat.com/sqlcat/b/technicalnotes/archive/2008/09/25/the-many-benefits-of-money-data-type.aspx)，甚至在某些情况下。不是你在桌子上做的那样。[**`MONEY, SMALLMONEY`**](http://msdn.microsoft.com/en-us/library/ms179882%28v=sql.100%29.aspx)**`DECIMAL``NVARCHAR``Products`**

***   使用[**日期和时间数据类型**](http://msdn.microsoft.com/en-us/library/ff848733.aspx)，而不是`NVARCHAR`像在`[Expected Delivery]`. 还有最重要的一个：

    *   您的数据库没有以这种方式[***标准化。***](http://en.wikipedia.org/wiki/Database_normalization)`Cateogries`您应该为和创建单独的`Sports`表`Brands`。** 

 **例如：

```
CREATE TABLE Equipments
(
  EquipmentId   INT NOT NULL IDENTITY(1, 1) 
                CONSTRAINT PK_EquipmentId PRIMARY KEY,
  EquipmentName NVARCHAR(50) NOT NULL
); 

CREATE TABLE Sports
(
   SportId   INT NOT NULL IDENTITY(1,1) 
             CONSTRAINT PK_SportId PRIMARY KEY,
   SportName NVARCHAR(50)
);

CREATE TABLE SportsEquipments 
(
   Id          INT NOT NULL IDENTITY(1, 1)<sup>2</sup> 
               CONSTRAINT PK_SportsEquipmentId PRIMARY KEY,
   SportId     INT NOT NULL 
               CONSTRAINT FK_SportId_Sports FOREIGN KEY 
               REFERENCES Sports(SportId),
   EquipmentId INT NOT NULL 
               CONSTRAINT FK_EquipmentId_Equipments FOREIGN KEY 
               REFERENCES Equipments(EquipmentId)
);

CREATE TABLE Categories
(
   CategoryId   INT NOT NULL IDENTITY(1, 1) 
                CONSTRAINT PK_CategoryId PRIMARY KEY,
   CategoryName NVARCHAR(50)
);

CREATE TABLE Brands
(
   BrandId   INT NOT NULL IDENTITY(1, 1) 
             CONSTRAINT PK_BrandId PRIMARY KEY,
   BrandName NVARCHAR(50)
);

CREATE TABLE Products
(
  ProductId        INT NOT NULL IDENTITY(1, 1) 
                   CONSTRAINT PK_ProductID PRIMARY KEY,
  SportId          INT NOT NULL 
                   CONSTRAINT FK_SportId_Products 
                   FOREIGN KEY REFERENCES Sports(SportId),
  CategoryId       INT NOT NULL 
                   CONSTRAINT FK_CategoryId_Categories 
                   FOREIGN KEY REFERENCES Categories(CategoryId),
  BrandId          INT NOT NULL 
                   CONSTRAINT FK_BrandId_Brands 
                   FOREIGN KEY REFERENCES Brands(BrandId),
  "Image"          TEXT,
  MRP              NVARCHAR(50),
  OurPrice         MONEY,
  YouSave          MONEY,
  ShippingCharges  MONEY,
  ExpectedDeliveryDate DATETIME
); 
```

![在此处输入图像描述](../Images/bf84756cc80291bea0cad5ac3a899bc1.png)

## 我怎样才能以这种方式插入表格？

稍后插入`Products`表格时，在insert from中，应该将运动、类别和品牌的列表显示为[**`DropDownList`**](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.dropdownlist.aspx)s。但是，在这个下拉列表中，您只显示实体的名称。您仅`CategoryName`在类别下拉列表、`BrandName`品牌下拉列表等中显示。您可以使用下拉列表的以下两个属性来执行此操作：

*   [`DataValueField`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.listcontrol.datavaluefield.aspx)到`Id`.
*   [`DataTextField`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.listcontrol.datatextfield.aspx)到`Name`.

就像是：

```
dropdown.DataSource = dataset;
dropdown.DataValueField  = "CategoryId";
dropdown.DataTextField = "CategoryName";
dropdown.DataBind();
//the same for other entities 
```

然后你应该只从下拉列表中插入选定的 id，你的`INSERT`语句看起来像：

```
INSERT INTO Products (SportId, CategoryId, BrandId, ... )
VALUES
(1, 2, 3, ...); 
```

## 但是我该如何选择和搜索？

在搜索表单中也是如此，您应该将这些实体显示为下拉列表，然后搜索具有下拉列表选择的 id 的产品：

```
SELECT ProductId, Name, ...
FROM Products
Where CategoryId = @SelectedCategoryId
 AND SportId = @selectedSportId
... 
```

与您当前的问题相同，您可以从这些实体、类别列表和运动列表以及其他实体动态创建链接按钮。这可以使用[**`GridView`**](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.aspx)控件完成，然后创建数据源并将其绑定到此网格视图。使用`<ItemTemplate>`as`<asp:LinkButton>`并将其绑定到查询选择的列名。如果你用谷歌搜索，你会发现很多线程解释了如何做到这一点。例如 ：

*   [**根据数据库结果动态添加链接按钮。**](http://forums.asp.net/t/1828315.aspx/1)

希望这就是你要找的。

* * *

*   ^(**1：**^([**在某些情况下，您可能不应该使用它。**](https://stackoverflow.com/questions/582797/should-you-choose-the-money-or-decimalx-y-datatypes-in-sql-server)))

*   ^(**2：**^(在 中`SportsEquipments`，我使用了`Id`作为主键，这样你的任何装备都可以被很多运动引用。如果您想让每个运动的设备独一无二，请`(SportId, EquipmentId)`改为使用复合键。))**

# objective-c - 弹出框大小无法更改，并且看起来高度错误

> ID：13538082
> 
> 赞同：0
> 
> 时间：2012-11-24T03:53:19.090
> 
> 标签：objective-c, ios, ipad, uipopovercontroller

我正在使用`iPad`应用程序。我试图`UIPopOverController`通过单击按钮来显示。但是当我使用以下代码执行此操作时，**它看起来弹出的高度错误。**

这是我的代码。

```
self.contentSizeForViewInPopover = CGSizeMake(320, 500);
SignatureViewController *signatureViewController = [[SignatureViewController alloc]initWithNibName:@"SignatureViewController" bundle:nil];
signatureViewController.delegate = self;
signatureViewController.title = @"Draw Signature";

UINavigationController *navController = [[UINavigationController alloc]initWithRootViewController:signatureViewController];

UIPopoverController *popover = [[UIPopoverController alloc] initWithContentViewController:navController];

UIBarButtonItem *doneButton = [[UIBarButtonItem alloc]initWithBarButtonSystemItem:UIBarButtonSystemItemDone target:self action:@selector(doneButtonPressed:)];
[signatureViewController.navigationItem setRightBarButtonItem:doneButton];

[popover presentPopoverFromRect:signatureImageView.frame inView:self.view permittedArrowDirections:UIPopoverArrowDirectionDown animated:YES];
self.popOverController = popover; 
```

我的弹出框看起来像这样。

![在此处输入图像描述](../Images/a58ac9cda83bf226cfa7b385fe989750.png)

它也显示在导航栏上。我在代码中做错了什么？任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T04:51:04.207

你可以在这里检查几件事：

*   `self.contentSizeForViewInPopover = CGSizeMake(320, 500);`确实应该在您的`signatureViewController`定义中（例如 viewDidLoad）
*   尝试更改`UIPopoverArrowDirectionDown`为`UIPopoverArrowDirectionAny`. 考虑到位置和向下箭头的要求，可能没有足够的空间来显示该弹出框

# javascript - 如何在javascript类中制作数组？

> ID：13538086
> 
> 赞同：1
> 
> 时间：2012-11-24T03:54:27.160
> 
> 标签：javascript, jquery, html

最近我在学习制作javascript类，我看到其他人这样制作类

```
var item = {
     'a':{'b':1000,'c':2000,'d':3000} , //how to make a variable become an array?
     myfunction : function(){
         console.log(item.a.b); //and output item.a[1]?
     }
 };
 item.myfunction(); 
```

但是可以将变量设为`a`数组吗？并输出一个这样的变量`item.a[1]`？我试过了

`var a=new Array('1000','2000','3000')` 但是错误，我需要正确的语法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T03:58:20.550

```
var item = {
    'a': [1000, 2000, 3000],
    myfunction: function () {
        console.log(this.a[1]);
    }
}; 
```

但这不是一个类，也没有“变量 a”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T03:58:10.537

```
'a':[1000,2000,3000]

console.log(item.a[0]); // 1000
console.log(item.a[2]); // 3000 
```

阅读更多：[http ://www.elated.com/articles/javascript-array-basics/](http://www.elated.com/articles/javascript-array-basics/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T07:39:22.693

您有两种方法，具体取决于您是将“a”转换为数组还是只想将“a”转换为数组。

第一种方法是通过函数运行它

```
function toArray(object) {
    var array = new array();
    for (key in object) {
        if (object.hasOwnProperty(key)) {
            array.push(object);  // This is alternative for indexed array
            array[key] = object; // This is for an associative array
        }
    }
    return array;
} 
```

也许让你的“类”调用这个函数并将返回值分配给“a”

```
var item = {
    'a':{'b':1000,'c':2000,'d':3000} , //how to make a variable become an array?
    myfunction : function(){
        this.a = toArray(this.a);
        console.log(this.a[1]) // If you do indexed
        console.log(this.a.b); // If you do associative
    }
};

item.myfunction(); 
```

@ahren 解释了第二种方法，它只是通过 [...] 值而不是 {...} 将“a”定义为数组

你也可以查看我自己提出的关于 JavaScript 中 OOP 的问题，从 TJ 那里得到了关于私有方法的很好的回复。

[JavaScript OOP 陷阱](https://stackoverflow.com/questions/13527363/javascript-oop-pitfalls)

不知道这是否是您想要的，但应该可以。

# opengl - 具有数组输入的顶点着色器

> ID：13538091
> 
> 赞同：5
> 
> 时间：2012-11-24T03:55:07.977
> 
> 标签：opengl, glsl, shader, vbo, vertex-shader

给定一个看起来像的顶点着色器

```
#version 400 compatibility

const int max_valence = 6;

in int valence;
in vec3 patch_data[1 + 2 * max_valence];

... 
```

将数据映射到正确的顶点属性的正确方法是什么？我正在尝试使用 VBO，但我不知道如何传递这么大的值。`glVertexAttribPointer`最多需要一个大小为 4 的向量。将顶点属性放入着色器的正确方法是什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-24T04:44:53.783

[顶点属性数组](http://www.opengl.org/wiki/Vertex_Shader#Multiple_attributes)在 OpenGL 中是合法的。但是，数组的每个成员都占用一个*单独*的属性索引。它们是连续分配的，从您给出的任何属性索引开始`patch_data`。由于您使用的是 GLSL 4.00，因此您还应该使用`layout(location = #)`.

所以如果你这样做：

```
layout(location = 1) in vec3 patch_data[1 + 2 * max_valence]; 
```

然后`patch_data`将覆盖从 1 到 的半开范围内的所有属性索引`1 + (1 + 2 * max_valence)`。

从 OpenGL 方面来看，每个数组条目都是一个*单独的属性*。因此，您需要[`glVertexAttribPointer`](http://www.opengl.org/wiki/GLAPI/glVertexAttribPointer)为每个单独的数组索引单独调用。

因此，如果您在内存中的数组数据看起来像一个由 13 个 vec3 组成的数组，紧密地打包在一起，那么您需要这样做：

```
for(int attrib = 0; attrib < 1 + (2 * max_valence); ++attrib)
{
  glVertexAttribPointer(attrib + 1, //Attribute index starts at 1.
    3, //Each attribute is a vec3.
    GL_FLOAT, //Change as appropriate to the data you're passing.
    GL_FALSE, //Change as appropriate to the data you're passing.
    sizeof(float) * 3 * (1 + (2 * max_valence)), //Assuming that these array attributes aren't interleaved with anything else.
    reinterpret_cast<void*>(baseOffset + (attrib * 3 * sizeof(float))) //Where baseOffset is the start of the array data in the buffer object.
  );
} 
```

# java - 不能从静态上下文引用非静态方法 toString()

> ID：13538097
> 
> 赞同：5
> 
> 时间：2012-11-24T03:55:55.387
> 
> 标签：java

不需要任何代码，只需要某种指导。想保持我的学术诚信；）

我不断收到那个烦人的错误。我需要为每个 Room 实例调用 toString 方法。有什么建议么？如果可能的话，我希望在 2 小时内得到答复。

```
public class Hotel
{
    //constant
    public static final int NUM_ROOMS = 20;

    //variables
    public Room[] theRoom;
    public String name;
    public int totalDays;
    public double totalRate;
    public int singleCount;
    public int doubleCount;
    public int roomsRented;
    public int NOT_FOUND;

    public Hotel(String newName) {
        name = newName;
        Room[] Rooms = new Room[NUM_ROOMS];
    }

    public double getTotalRentalSales() {
        return totalRate + roomsRented;
    }

    public double getAvgDays() {
        return roomsRented/totalDays;
    }

    public double getAvgRate() {
        return totalRate/roomsRented;
    }

    public int getSingleCount() {
        return singleCount;
    }

    public int getDoubleCount() {
        return doubleCount;
    }

    public String printRentalList() {
        System.out.println("Room Information: " + Room.toString());
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-24T03:57:35.760

您不应该尝试调用`toString()`Room 类，而是调用 Room*对象*。在该方法中，使用 for 循环遍历房间数组并打印通过调用`toString()`数组中保存的每个 Room 对象返回的字符串，因为这是您的方法应该执行的操作。

例如

```
System.out.println("All Foos held here include: ");

// using a "for-each" loop, assuming an array called fooArray that holds Foo objects
for (Foo foo: fooArray) {
   System.out.println(foo);
} 
```

您显然必须更改代码的类型和变量名称。

编辑 2：虽然您将不得不使用标准 for 循环，而不是 for-each 循环，因为您不会循环整个数组，而是会在达到 roomsRented 计数时退出。

```
System.out.println("All Foos held here include: ");

// using standard for loop, assuming an array called fooArray that holds Foo objects
for (int i = 0; i < someMaxNumber; i++) {
   System.out.println(fooArray[i]);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T04:01:42.733

由于错误已经说明，请勿在静态上下文中调用实例方法。

房间是一个类，而不是一个对象。toString 是一个实例方法。所以 Room.toString() 在这种情况下编译器会寻找一个静态方法 toString。但是 toString 是一个实例方法，所以它会导致问题。

永远记住实例方法是用类的对象调用的，而不是类本身。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T04:02:33.540

您可能正在做的是调用`toString()`课堂房间，而不是它的实例。例如，不要写：

```
Room.toString() 
```

写：

```
Room r = new Room()
r.toString() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-07-03T04:31:02.707

看下面的代码，你可以用静态变量编译toString，不需要新对象，它只是在运行时抛出异常

```
demo>cat Test.java 
class Water {
  public String toString() {return "whatever";}
}

public class Test { 
  static Water water;
  public static void main(String...args) {
    System.out.println(water.toString());
  }
}

demo>javac Test.java 
demo>java Test
Exception in thread "main" java.lang.NullPointerException
    at Test.main(Test.java:8) 
```

# java - 错误：无法找到或加载主类。PowerShell/Java

> ID：13538101
> 
> 赞同：0
> 
> 时间：2012-11-24T03:56:35.527
> 
> 标签：java, powershell, netbeans, terminal

我刚开始Java。我最初使用 NetBeans 进行编码并且它可以工作。但是我的老师坚持我们使用文本编辑器并通过 Powershell 运行它。我收到此代码的“无法找到或加载主类”错误。

```
public class a10{
    public static void main(String[] args){
        System.out.println("Hello World");
    }
} 
```

当我在 Netbeans 上运行它时，没有错误，但我无法在 Powershell 上运行它。有人可以告诉我出了什么问题以及我将如何解决它

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T04:03:51.480

我希望你正在使用

`javac a10.java`然后运行它`java a10`---是这样吗

查看此[帖子](https://stackoverflow.com/questions/3748671/how-to-compile-java-sources)以获取更多信息

# jsf - 将 Java EE 服务器从 GlassFish 更改为 Tomcat

> ID：13538103
> 
> 赞同：1
> 
> 时间：2012-11-24T03:56:44.153
> 
> 标签：jsf, tomcat, netbeans, glassfish

我使用带有 JSF、JPA 和 Primefaces 的 Netbeans 开发了一个应用程序，并且在 GlassFish 服务器中运行良好。我想部署在Tomcat服务器中。我通过属性更改了服务器，但无法清理并成功构建项目。如何正确更改服务器？

细节 ：

网豆 7.3

玻璃鱼 3.1

雄猫 7

我用 Netbeans 打开了这个项目。右键单击该项目并选择 GlassFish 作为服务器。右键单击并选择清理并构建。它是成功的。右键单击并选择运行。Web 应用程序开始完美运行。

然后我停止了 GlassFish 并通过 Netbeans 服务器窗口启动了 Tomcat。

右键单击并选择项目属性。将服务器更改为 Tomcat。右键单击并选择 Clean and Build 并出现此错误。也没有创建 Dist 文件夹。

下面列出了堆栈跟踪。

```
An annotation processor threw an uncaught exception.
Consult the following stack trace for details.
java.lang.RuntimeException: com.sun.tools.javac.code.Symbol$CompletionFailure: class file for javax.faces.event.AjaxBehaviorEvent not found
at     org.eclipse.persistence.internal.jpa.modelgen.CanonicalModelProcessor.process(CanonicalModelProcessor.java:407)
at com.sun.tools.javac.processing.JavacProcessingEnvironment.callProcessor(JavacProcessingEnvironment.java:793)
at com.sun.tools.javac.processing.JavacProcessingEnvironment.discoverAndRunProcs(JavacProcessingEnvironment.java:722)
at com.sun.tools.javac.processing.JavacProcessingEnvironment.access$1700(JavacProcessingEnvironment.java:97)
at com.sun.tools.javac.processing.JavacProcessingEnvironment$Round.run(JavacProcessingEnvironment.java:1029)
at com.sun.tools.javac.processing.JavacProcessingEnvironment.doProcessing(JavacProcessingEnvironment.java:1163)
at com.sun.tools.javac.main.JavaCompiler.processAnnotations(JavaCompiler.java:1108)
at com.sun.tools.javac.main.JavaCompiler.compile(JavaCompiler.java:824)
at com.sun.tools.javac.main.Main.compile(Main.java:439)
at com.sun.tools.javac.main.Main.compile(Main.java:353)
at com.sun.tools.javac.main.Main.compile(Main.java:342)
at com.sun.tools.javac.main.Main.compile(Main.java:333)
at com.sun.tools.javac.Main.compile(Main.java:76)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:601)
at org.apache.tools.ant.taskdefs.compilers.Javac13.execute(Javac13.java:56)
at org.apache.tools.ant.taskdefs.Javac.compile(Javac.java:1153)
at org.apache.tools.ant.taskdefs.Javac.execute(Javac.java:930)
at org.netbeans.modules.java.source.ant.JavacTask.execute(JavacTask.java:145)
at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:291)
at sun.reflect.GeneratedMethodAccessor89.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:601)
at org.apache.tools.ant.dispatch.DispatchUtils.execute(DispatchUtils.java:106)
at org.apache.tools.ant.Task.perform(Task.java:348)
at org.apache.tools.ant.taskdefs.Sequential.execute(Sequential.java:68)
at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:291)
at sun.reflect.GeneratedMethodAccessor89.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:601)
at org.apache.tools.ant.dispatch.DispatchUtils.execute(DispatchUtils.java:106)
at org.apache.tools.ant.Task.perform(Task.java:348)
at org.apache.tools.ant.taskdefs.MacroInstance.execute(MacroInstance.java:398)
at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:291)
at sun.reflect.GeneratedMethodAccessor89.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:601)
at org.apache.tools.ant.dispatch.DispatchUtils.execute(DispatchUtils.java:106)
at org.apache.tools.ant.Task.perform(Task.java:348)
at org.apache.tools.ant.Target.execute(Target.java:392)
at org.apache.tools.ant.Target.performTasks(Target.java:413)
at org.apache.tools.ant.Project.executeSortedTargets(Project.java:1399)
at org.apache.tools.ant.Project.executeTarget(Project.java:1368)
at org.apache.tools.ant.helper.DefaultExecutor.executeTargets(DefaultExecutor.java:41)
at org.apache.tools.ant.Project.executeTargets(Project.java:1251)
at org.apache.tools.ant.module.bridge.impl.BridgeImpl.run(BridgeImpl.java:283)
at org.apache.tools.ant.module.run.TargetExecutor.run(TargetExecutor.java:541)
at org.netbeans.core.execution.RunClassThread.run(RunClassThread.java:153)
Caused by: com.sun.tools.javac.code.Symbol$CompletionFailure: class file for javax.faces.event.AjaxBehaviorEvent not found
C:\Users\Buddhika\Documents\ho\HealthOffice\nbproject\build-impl.xml:887: The following error occurred while executing this line:
C:\Users\Buddhika\Documents\ho\HealthOffice\nbproject\build-impl.xml:309: Compile failed; see the compiler error output for details.
BUILD FAILED (total time: 2 seconds) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-24T04:16:15.127

Glassfish 是一个成熟的 Java EE Web 应用程序服务器，并与其他已捆绑的 JSF 一起提供。Tomcat 是一个准系统 JSP/Servlet 容器，不附带 Java EE 捆绑的任何其他内容。将 JSF Web 应用程序部署到 Tomcat 时，开发人员需要在 Web 应用程序`/WEB-INF/lib`或 Tomcat`/lib`自身中提供 JSF 库。

这个异常试图告诉您它找不到特定于 JSF 的类来编译您的代码，这表明您没有这样做。[下载](http://javaserverfaces.java.net)JSF 2.x 并将`javax.faces.jar`文件放入 webapp`/WEB-INF/lib`或 Tomcat 中`/lib`，您应该已准备就绪。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T04:07:49.447

问：但是项目无法清理和构建成功。

A：您的错误消息表明*运行时*错误，不是吗？

问：究竟是什么失败了？雄猫？试图编译你的 .war？只是想在你的 IDE 中打开它？

问：如果是编译器，那么你是如何编译的？从你的IDE？来自 ANT 脚本？还有什么？

问：您使用的是 IDE 吗？什么类型（例如 Netbeans）和什么版本？

问：什么平台？

还：

查看此链接是否适用：

*   [使用 Tomcat 7 和 JDK 将自己弹射到 JSF 2.0 开发中](http://www.theserverside.com/discussions/thread.tss?thread_id=61864)

# rspec - 安装 RVM 并更新 ruby 后，RSpec 停止工作

> ID：13538106
> 
> 赞同：0
> 
> 时间：2012-11-24T03:57:04.157
> 
> 标签：rspec, rvm, rspec-rails

我正试图让 rspec 重新开始工作。当我去测试任何东西时，我得到以下信息：

```
stacyrandel$ bundle exec rspec spec/requests/static_pages_spec.rb
/Users/stacyrandel/.rvm/gems/ruby-1.9.3-p327/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:251:in `require': /Users/stacyrandel/rails_projects/callred/app/models/user.rb:21: syntax error, unexpected ':', expecting keyword_end (SyntaxError)
    uniqueness: { case_sensitive: false }
               ^
    from /Users/stacyrandel/.rvm/gems/ruby-1.9.3-p327/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:251:in `block in require'
    from /Users/stacyrandel/.rvm/gems/ruby-1.9.3-p327/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:236:in `load_dependency'
    from /Users/stacyrandel/.rvm/gems/ruby-1.9.3-p327/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:251:in `require'
    from /Users/stacyrandel/.rvm/gems/ruby-1.9.3-p327/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:359:in `require_or_load'
    from /Users/stacyrandel/.rvm/gems/ruby-1.9.3-p327/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:502:in `load_missing_constant'
    from /Users/stacyrandel/.rvm/gems/ruby-1.9.3-p327/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:192:in `block in const_missing'
    from /Users/stacyrandel/.rvm/gems/ruby-1.9.3-p327/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:190:in `each'
    from /Users/stacyrandel/.rvm/gems/ruby-1.9.3-p327/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:190:in `const_missing'
    from /Users/stacyrandel/.rvm/gems/ruby-1.9.3-p327/gems/activesupport-3.2.8/lib/active_support/inflector/methods.rb:230:in `block in constantize'
    from /Users/stacyrandel/.rvm/gems/ruby-1.9.3-p327/gems/activesupport-3.2.8/lib/active_support/inflector/methods.rb:229:in `each'
    from /Users/stacyrandel/.rvm/gems/ruby-1.9.3-p327/gems/activesupport-3.2.8/lib/active_support/inflector/methods.rb:229:in `constantize'
    from /Users/stacyrandel/.rvm/gems/ruby-1.9.3-p327/gems/activesupport-3.2.8/lib/active_support/inflector/methods.rb:260:in `safe_constantize'
    from /Users/stacyrandel/.rvm/gems/ruby-1.9.3-p327/gems/activesupport-3.2.8/lib/active_support/core_ext/string/inflections.rb:66:in `safe_constantize'
    from /Users/stacyrandel/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-3.2.8/lib/action_controller/metal/params_wrapper.rb:152:in `_default_wrap_model'
    from /Users/stacyrandel/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-3.2.8/lib/action_controller/metal/params_wrapper.rb:169:in `_set_wrapper_defaults'
    from /Users/stacyrandel/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-3.2.8/lib/action_controller/metal/params_wrapper.rb:133:in `inherited'
    from /Users/stacyrandel/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-3.2.8/lib/abstract_controller/railties/routes_helpers.rb:7:in `block (2 levels) in with'
    from /Users/stacyrandel/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-3.2.8/lib/action_controller/railties/paths.rb:7:in `block (2 levels) in with'
    from /Users/stacyrandel/rails_projects/callred/app/controllers/users_controller.rb:1:in `<top (required)>'
    from /Users/stacyrandel/.rvm/gems/ruby-1.9.3-p327/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:251:in `require'
    from /Users/stacyrandel/.rvm/gems/ruby-1.9.3-p327/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:251:in `block in require'
    from /Users/stacyrandel/.rvm/gems/ruby-1.9.3-p327/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:236:in `load_dependency'
    from /Users/stacyrandel/.rvm/gems/ruby-1.9.3-p327/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:251:in `require'
    from /Users/stacyrandel/.rvm/gems/ruby-1.9.3-p327/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:359:in `require_or_load'
    from /Users/stacyrandel/.rvm/gems/ruby-1.9.3-p327/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:313:in `depend_on'
    from /Users/stacyrandel/.rvm/gems/ruby-1.9.3-p327/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:225:in `require_dependency'
    from /Users/stacyrandel/.rvm/gems/ruby-1.9.3-p327/gems/railties-3.2.8/lib/rails/engine.rb:439:in `block (2 levels) in eager_load!'
    from /Users/stacyrandel/.rvm/gems/ruby-1.9.3-p327/gems/railties-3.2.8/lib/rails/engine.rb:438:in `each'
    from /Users/stacyrandel/.rvm/gems/ruby-1.9.3-p327/gems/railties-3.2.8/lib/rails/engine.rb:438:in `block in eager_load!'
    from /Users/stacyrandel/.rvm/gems/ruby-1.9.3-p327/gems/railties-3.2.8/lib/rails/engine.rb:436:in `each'
    from /Users/stacyrandel/.rvm/gems/ruby-1.9.3-p327/gems/railties-3.2.8/lib/rails/engine.rb:436:in `eager_load!'
    from /Users/stacyrandel/.rvm/gems/ruby-1.9.3-p327/gems/railties-3.2.8/lib/rails/application/finisher.rb:53:in `block in <module:Finisher>'
    from /Users/stacyrandel/.rvm/gems/ruby-1.9.3-p327/gems/railties-3.2.8/lib/rails/initializable.rb:30:in `instance_exec'
    from /Users/stacyrandel/.rvm/gems/ruby-1.9.3-p327/gems/railties-3.2.8/lib/rails/initializable.rb:30:in `run'
    from /Users/stacyrandel/.rvm/gems/ruby-1.9.3-p327/gems/railties-3.2.8/lib/rails/initializable.rb:55:in `block in run_initializers'
    from /Users/stacyrandel/.rvm/gems/ruby-1.9.3-p327/gems/railties-3.2.8/lib/rails/initializable.rb:54:in `each'
    from /Users/stacyrandel/.rvm/gems/ruby-1.9.3-p327/gems/railties-3.2.8/lib/rails/initializable.rb:54:in `run_initializers'
    from /Users/stacyrandel/.rvm/gems/ruby-1.9.3-p327/gems/railties-3.2.8/lib/rails/application.rb:136:in `initialize!'
    from /Users/stacyrandel/.rvm/gems/ruby-1.9.3-p327/gems/railties-3.2.8/lib/rails/railtie/configurable.rb:30:in `method_missing'
    from /Users/stacyrandel/rails_projects/callred/config/environment.rb:5:in `<top (required)>'
    from /Users/stacyrandel/rails_projects/callred/spec/spec_helper.rb:3:in `require'
    from /Users/stacyrandel/rails_projects/callred/spec/spec_helper.rb:3:in `<top (required)>'
    from /Users/stacyrandel/rails_projects/callred/spec/requests/static_pages_spec.rb:1:in `require'
    from /Users/stacyrandel/rails_projects/callred/spec/requests/static_pages_spec.rb:1:in `<top (required)>'
    from /Users/stacyrandel/.rvm/gems/ruby-1.9.3-p327/gems/rspec-core-2.8.0/lib/rspec/core/configuration.rb:698:in `load'
    from /Users/stacyrandel/.rvm/gems/ruby-1.9.3-p327/gems/rspec-core-2.8.0/lib/rspec/core/configuration.rb:698:in `block in load_spec_files'
    from /Users/stacyrandel/.rvm/gems/ruby-1.9.3-p327/gems/rspec-core-2.8.0/lib/rspec/core/configuration.rb:698:in `map'
    from /Users/stacyrandel/.rvm/gems/ruby-1.9.3-p327/gems/rspec-core-2.8.0/lib/rspec/core/configuration.rb:698:in `load_spec_files'
    from /Users/stacyrandel/.rvm/gems/ruby-1.9.3-p327/gems/rspec-core-2.8.0/lib/rspec/core/command_line.rb:22:in `run'
    from /Users/stacyrandel/.rvm/gems/ruby-1.9.3-p327/gems/rspec-core-2.8.0/lib/rspec/core/runner.rb:80:in `run_in_process'
    from /Users/stacyrandel/.rvm/gems/ruby-1.9.3-p327/gems/rspec-core-2.8.0/lib/rspec/core/runner.rb:69:in `run'
    from /Users/stacyrandel/.rvm/gems/ruby-1.9.3-p327/gems/rspec-core-2.8.0/lib/rspec/core/runner.rb:10:in `block in autorun' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T06:30:44.140

我认为堆栈跟踪中的重要行是这一行：

```
/Users/stacyrandel/rails_projects/callred/app/models/user.rb:21: syntax error, unexpected ':', expecting keyword_end (SyntaxError)
    uniqueness: { case_sensitive: false } 
```

这表示您的代码中存在语法错误。这可能是因为出于某种原因，您使用 Ruby 1.8.x 来运行使用 1.9.3 哈希语法的代码。或者它可能是别的东西。您可以从该文件中发布其他行吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T12:28:52.140

查看您的源文件`/Users/stacyrandel/rails_projects/callred/app/models/user.rb`行`21`，确保`uniqueness`根据本教程在适当的上下文中使用它：http: [//guides.rubyonrails.org/active_record_validations_callbacks.html#uniqueness](http://guides.rubyonrails.org/active_record_validations_callbacks.html#uniqueness)

正如@dpassage 在另一个答案中指出的那样，ruby 版本之间存在差异：

1.  红宝石 1.8.7：

    ```
    validates :email, :uniqueness => true 
    ```

2.  红宝石 1.9+：

    ```
    validates :email, uniqueness: true 
    ```

但是您的堆栈跟踪显示使用了 ruby​​ 1.9.3，所以应该没问题。

# emacs - js-mode 的 emacs 中 Ck 的 Defadvice

> ID：13538107
> 
> 赞同：4
> 
> 时间：2012-11-24T03:57:06.280
> 
> 标签：emacs, elisp, paredit

我想用`C-k`js-mode 来杀死一个块或杀死当前行的其余部分。

在我搜索谷歌一段时间后，我认为这`defadvice`将是答案，但我对 elisp 并不熟悉。所以我希望有人可以帮我写它:)

我提到的功能有点像`paredit-mode`，但我不想启用`paredit-mode`，`js-mode`因为我的要求会简单得多。当我写 js 时，有时我想杀死下面的块，比如：

```
function test() {
    if () {
    } else {
    }
} 
```

如果光标现在介于`function`and之间`test`，那么我使用`C-k`I can kill the entire block

```
 test() {
    if () {
    } else {
    }
} 
```

只剩下一个字`function`。这里的 'block' 仅仅意味着 '{}' 之间的东西。

如果当前行后面没有块，`C-k`则应表现为其原始行为，应为`(kill-line &optional ARG)`，默认情况下杀死行的其余部分。

如果你熟悉它`paredit-mode`，你会发现它只是一个非常简单的版本！

我希望你能明白我的意思，因为我的英语很烂。任何帮助将不胜感激 ！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-24T14:37:24.310

我建议不要为此使用建议，因为您可以重新绑定`C-k`。`js-mode-map`例如

```
(defun my-kill-line-or-block (&optional arg)
  "Kill line or whole block if line ends with a block opener."
  (interactive "P")
  (if (looking-at ".*\\({[^{}\n]*$\\)")
      (kill-region (point)
                   (progn (goto-char (match-beginning 1))
                          (forward-sexp 1)
                          (point)))
    (kill-line arg)))

(define-key js-mode-map [?\C-k] 'my-kill-line-or-block) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T06:14:25.783

```
(defadvice kill-visual-line (around cus-kill activate)
  (unless (let ((mark-point (point)))
            (if (search-forward "{" (line-end-position) t)
                (kill-region mark-point (scan-sexps (- (point) 1) 1))))
    ad-do-it)) 
```

就我而言，**Ck**绑定到*kill-visual-line*。如果您确保**Ck**绑定到*kill-line （使用***Ch k Ck**检查它），则在该函数中将*kill-visual-line*更改为*kill-line*。

PS：功能未经过全面测试。如果 {} 不平衡，则 scan-sexps 会发出警告信号。你可以忽略它。

# xml - xquery --- 使用与当前节点不同的值到达下一个节点

> ID：13538108
> 
> 赞同：1
> 
> 时间：2012-11-24T03:57:13.483
> 
> 标签：xml, xpath, xquery

这是我正在使用的 xml，我正在尝试我遇到的第一个不同 pd 值的 id 号。

```
<result>
  <pd>a</pd>
  <id>1</id>
  <pd>a</pd>
  <id>2</id>

  <pd>b</pd>
  <id>8</id>

  <pd>c</pd>
  <id>9</id>
  <pd>c</pd>
  <id>4</id>

  <pd>d</pd>
  <id>7</id>
</result> 
```

所以我期待的结果是：

```
 <pd>a</pd>
 <id>1</id>

 <pd>b</pd>
 <id>8</id>

 <pd>c</pd>
 <id>9</id>

 <pd>d</pd>
 <id>7</id> 
```

我使用 following-sibling::*[2] 到达下一个 pd 并将其与当前节点进行比较，但它只给了我 b，而不是 c 和 d。你们中的任何人都可以给我一个关于如何遍历整个 xml 以获得所需输出的提示吗？谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T05:53:59.277

可能有更优雅的解决方案，但我采取的策略是收集 pd 元素中的所有不同值，然后遍历*所有*pd 元素并获取 pd 元素中的值与不同值的当前迭代。

```
for $distinct-pd in fn:distinct-values($xml//pd)
  for $pd in $xml//pd[./text() eq $distinct-pd][1]
    return ($pd, $pd/following-sibling::*[1]) 
```

对于您的代码，这会产生

```
<pd>a</pd>
<id>1</id>
<pd>b</pd>
<id>8</id>
<pd>c</pd>
<id>9</id>
<pd>d</pd>
<id>7</id> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T18:42:19.497

**另一种实现相同目标的方法——对于不是很长的序列来说已经足够好了：**

```
/*/pd[not(. = preceding-sibling::pd)]
               /(.|following-sibling::id[1]) 
```

**当根据提供的 XML 文档评估此 XPath 2.0 表达式（和 XQuery）时：**

```
<result>
  <pd>a</pd>
  <id>1</id>
  <pd>a</pd>
  <id>2</id>

  <pd>b</pd>
  <id>8</id>

  <pd>c</pd>
  <id>9</id>
  <pd>c</pd>
  <id>4</id>

  <pd>d</pd>
  <id>7</id>
</result> 
```

**产生了想要的正确结果**：

```
<pd>a</pd>
<id>1</id>
<pd>b</pd>
<id>8</id>
<pd>c</pd>
<id>9</id>
<pd>d</pd>
<id>7</id> 
```

# ios - iOS 6 中的 UIPickerView 选择行崩溃

> ID：13538118
> 
> 赞同：3
> 
> 时间：2012-11-24T03:58:45.700
> 
> 标签：ios, ios6, uipickerview, upgrade

我的应用程序完美地在 iOS 5.x 中构建和运行，但是当我在 iOS 6 中调用`selectRow:inComponent:animated:`方法时它崩溃了。`UIPickerView`

代码 ：

```
[_pickerview selectRow:1 inComponent:0 animated:NO]; 
```

当我用谷歌搜索它时，我知道这个方法在 iOS6 中不起作用，但我想知道其他方法来做到这一点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-25T06:55:29.580

您的崩溃日志显示您使用了`-1`in 代码，其中应该是 {0, 1} 范围内的数字。但是在您粘贴的代码中，您确实使用了`1`. 所以你需要检查你的`xxx`参数`yyy`

```
pickerView.selectRow(xxx, inComponent: yyy, animated: false) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-26T09:31:37.030

以上答案是正确的，但是如果数组的值与选择器值不同，则会出现此错误。

这是我以这种方式初始化的代码： `amPmArray = [[NSMutableArray alloc] initWithObjects:@"AM",@"PM", nil];`

我在选择器中设置值：`[picker selectRow:[amPmArray indexOfObject:currentTimeAMPMString] inComponent:5 animated:NO];`

我总是在 currentTimeAMPMString 中得到小写值，比如'am，pm'，而我的数组不包含这种类型的项目，所以这就是我遇到崩溃错误的原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-16T10:11:49.323

经过 3 天的查找，我发现您是否使用选取器与 textField 关联。Plz 无需为 textField 分配任何文本。使用以下文本的原因意味着分配的测试应该存在于数组中。

[self->pickerView selectRow:[self->dataArray indexOfObject:self->textField.text] inComponent:0 animated:NO];

使用这个。

[self->pickerView selectRow:[self->dataArray objectAtIndex:row] inComponent:0 animated:NO];

# asp.net-mvc - MetadataType 和 DataAnnotations 不起作用

> ID：13538121
> 
> 赞同：3
> 
> 时间：2012-11-24T03:59:09.600
> 
> 标签：asp.net-mvc, data-annotations, poco, metadatatype

我已经盯着这个很久了，看不到问题所在。

我使用 EF4 和 POCO 生成器生成了一些 POCO 类。

我正在尝试使用 MetadataType 属性来创建可以在我的视图（asp.net MVC）中使用的“伙伴”类并利用数据注释。

因此，我有一个名为 Contact 的域实体 (POCO)。那是在命名空间 BreakAwayEntities 中名为 BreakAwayEntities 的项目中。

我在 View 的项目 (WebUI) 中创建了一个公共部分类。它是这个：

```
namespace BreakAwayEntities
{
    [MetadataType(typeof(ContactMetadataSource))]
    public partial class Contact
    {
        internal sealed class ContactMetadataSource
        {
            [HiddenInput(DisplayValue = false)]
            public int ContactID { get; set; }

            [Display(Name = "First Name")]
            public string FirstName { get; set; }

            [Display(Name = "Last Name")]
            public string LastName { get; set; }

            public string Title { get; set; }
        }        
    }
} 
```

但是，我收到以下错误消息：

> 错误 10 无法将类型“System.Collections.Generic.List [c:\Program Files (x86)\Reference Assemblies\Microsoft\Framework.NETFramework\v4.0\mscorlib.dll]”隐式转换为“System.Collections.Generic。列表 [c:\Program Files (x86)\Reference Assemblies\Microsoft\Framework.NETFramework\v4.0\mscorlib.dll]' F:\Code\Sandpit\GetAwayBreaks\WebUI\Controllers\CustomerController.cs 29 38 WebUI

由于某种原因，接线不起作用。部分类的命名空间是相同的，但它们在不同的项目中。那应该没关系吧？在视图中使用的 Contact 类不会显示单个属性。它应该暴露 POCO 的所有属性，由 MetadataType 增强。

如果我错过了一个程序集，我不会得到任何关于它可能是什么的提示。

我错过了什么？我需要在 Global.asax 中注册一些东西吗？谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-24T04:10:26.823

部分类只能存在于一个项目中。

[http://msdn.microsoft.com/en-us/library/wa80x488(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/wa80x488(v=vs.100).aspx)

进一步来说，

> 所有属于同一类型的部分类型定义必须在同一程序集和同一模块（.exe 或 .dll 文件）中定义。部分定义不能跨越多个模块。

# python - SHA512 Python 为相同的字符串产生不同的结果

> ID：13538122
> 
> 赞同：1
> 
> 时间：2012-11-24T03:59:20.657
> 
> 标签：python, sha512

我有一个要附加字符串“文本”的 ID 列表。我想检查是否有任何 id（在附加了“text”字符串之后）等于字符串“text_compare”。

奇怪的是，在散列发生之前的字符串是相等的，但是在散列发生之后，散列似乎没有产生相同的结果。下面是我的代码。您可以在 Python 命令行上对其进行测试。

```
import hashlib
h = hashlib.sha512()

text = 'beruk makye'
text_compare = '3beruk makye'
text_compare_hash = h.update(text_compare)
text_compare_hash = h.hexdigest()

ids = [1,2,3]
texts = []
bool_text = []
bool_text_hash = []

for id in ids:
    texts.append(str(id) + text)

for t in texts:
    if t == text_compare:
        bool_text.append(True)
    else:
        bool_text.append(False)

for t in texts:
    h.update(t)
    t_hash = str(h.hexdigest())
    if t_hash == text_compare_hash:
        bool_text_hash.append(True)
    else:
        bool_text_hash.append(False)

print ids
# [1, 2, 3]
print texts
# ['1beruk makye', '2beruk makye', '3beruk makye']
print bool_text
# [False, False, True]
print bool_text_hash
# [False, False, False] 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-24T04:09:25.083

您的问题是您正在重新使用相同的哈希对象，所以您只是不断添加它。每次你应该实例化一个新的 sha512() 对象。下面的代码可以正常工作。

```
import hashlib
h = hashlib.sha512()

text = 'beruk makye'
text_compare = '3beruk makye'
text_compare_hash = h.update(text_compare)
text_compare_hash = h.hexdigest()

ids = [1,2,3]
texts = []
bool_text = []
bool_text_hash = []

for id in ids:
    texts.append(str(id) + text)

for i in texts:
    hash = hashlib.sha512(i).hexdigest()
    print i, hash, hash == text_compare_hash 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T04:09:45.200

这里的问题`h`是已经创建了，然后你通过调用方法向它*添加字符串。*`update()`

要解决这个问题，你可以例如。重新初始化`h`为新的 sha512 哈希：

```
# ...
for t in texts:
    h = hashlib.sha512()  # <--- here
    h.update(t)
    t_hash = str(h.hexdigest())
    if t_hash == text_compare_hash:
        bool_text_hash.append(True)
    else:
        bool_text_hash.append(False)
# ... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T04:19:48.370

您缺少这一行： h = hashlib.sha512()

就在 h.update(t) 之前

如果您检查 python 文档 (http://docs.python.org/2/library/hashlib.html)，它解释说 update 将返回到目前为止给 hashlib 的所有字符串的摘要。因此，在您的情况下，您要散列的字符串是：

loop1: '1beruk makye'

loop2: '1beruk makye2beruk makye'

loop3: '1beruk makye2beruk makye3beruk makye'

# php - $_POST 没有收到所有值

> ID：13538127
> 
> 赞同：4
> 
> 时间：2012-11-24T04:01:05.763
> 
> 标签：php, html, mysql, post

我的 $_POST 正在接收用户名和密码，但没有收到我拥有的任何其他条款。这些名称都与我的表中的名称相匹配，我一定遗漏了一些东西。首先是我的带有表单数据的 HTML 文件，其次是应该将值存储在我的 user_info 表中的 php 文件。

```
<HTML>
<link rel="stylesheet" href="testcss.css" type="text/css">
<body>

<div id="header">
<h1>Register</h1>
</div>

<div id="formtext">
    <form name="register" action="register.php" method="post">
    First Name: <input type:"text" name"firstName"><br>
    Last Name: <input type"text" name"lastName"><br>
    Email: <input type:"text" name"email"><br>
    Desired Username: <input type="text" name="username"><br>
    Password: <input type="text" name="password"><br>
    <input type="submit" name="Submit">
</div>

</body>
</HTML> 
```

这是php文件...

```
<?php
mysql_connect('localhost', 'root', 'root') or die(mysql_error());
mysql_select_db("myDatabase") or die(mysql_error());

$firstName = $_POST["firstName"];
$lastName = $_POST["lastName"];
$email = $_POST["email"];
$username = $_POST["username"];
$password = $_POST["password"];

mysql_query("INSERT INTO user_info(firstName, lastName, email, username, password) VALUES ('$firstName', '$lastName', '$email', '$username', '$password')");

header( 'Location: loaclhost:8888/userHome.html' ) ;

?> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-24T04:03:25.943

您的 HTML 属性格式不正确。

所有属性都应采用格式`attribute="value"`

两个工作的格式正确，而其他的则没有。

例如，`<input type:"text" name"email">`是错误的。它应该是`<input type="text" name="email" />`

它们应该是这样的：

```
 First Name: <input type="text" name="firstName"><br>
    Last Name: <input type="text" name="lastName"><br>
    Email: <input type="text" name="email"><br>
    Desired Username: <input type="text" name="username"><br>
    Password: <input type="text" name="password"><br>
    <input type="submit" name="Submit"> 
```

如果您还没有使用，我建议您使用具有语法突出显示或自动完成功能的代码编辑器。Notepad++、Netbeans 或 Visual Studio 都可以为您的代码着色并更容易发现错误。

您的 PHP 中可能还有一个错误：`header( 'Location: loaclhost:8888/userHome.html' ) ;`-我有一种感觉，您可能打算在那里键入“localhost”；-)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-24T04:03:21.573

您的标记有几个错误：

```
<input type:"text" name="" />
<input type"text" name="" /> 
```

应该

```
<input type="text" name="" /> 
```

# java - 通过构建路径配置依赖项 - 这些操作有什么作用？

> ID：13538134
> 
> 赞同：1
> 
> 时间：2012-11-24T04:02:18.707
> 
> 标签：java, eclipse

eclipse中的两个java项目P1和P2。P2 取决于 P1。我执行以下操作 -

P2 > 构建路径 > 配置构建路径 > 添加 P1 > 确定。

我看到创建了依赖项。但 ！！！幕后发生了什么？无论发生什么，我该如何手动完成？我在哪里可以了解它？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T04:24:39.390

在文件 .classpath 中查看项目 P2，您应该会在文件中的某处看到类似以下行的内容：

```
 <classpathentry combineaccessrules="false" kind="src" path="/P1"/> 
```

这意味着您已将项目 P1 中的类添加到项目 P2 的构建和执行类路径中。这一行是实现配置更改的“幕后发生的事情”。无论确切的行是什么，如果您手动将其添加到 .classpath 文件中，那么您已经手动创建了依赖项。

顺便说一句，在某些导航视图中，“点资源”（如 .classpath 文件）会从视图中过滤掉。视图的工具栏中有一个黑色的向下三角形。如果单击该三角形，您将看到一个名为“过滤器...”的菜单项。如果单击此项目，则可以取消选中“点资源文件”以删除过滤器并在导航视图中查看这些文件。

# selenium - 无法使用 Selenium IE 驱动程序进行自动亚马逊搜索

> ID：13538135
> 
> 赞同：0
> 
> 时间：2012-11-24T04:02:23.277
> 
> 标签：selenium, internet-explorer-8, selenium-webdriver

当我尝试在 amazon.com 上执行自动搜索时，即使元素存在，它也会抛出异常“未找到元素”。我正在尝试通过其 ID 访问搜索文本框。

以下是对它的一些观察：

*   [亚马逊搜索页面](http://www.amazon.com/)具有搜索组件的正确 ID 但 Selenium 仍然无法找到该元素，抛出异常“未找到元素”。
*   如果您在加载亚马逊网站后延迟一些，然后尝试定位元素，抛出异常'Window Not Found'。
*   当我尝试使用 Selenium 驱动程序获取页面源时，它也无法获取正确的源。我得到了在 IE 打开后立即显示的 html 页面的源代码。

我怀疑亚马逊加载了一些 javascript 来阻止自动访问，我不确定。

任何解决此问题的建议将不胜感激。

如果有人以前遇到过此类问题，请分享您的经验。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T05:57:06.873

为我工作..

```
InternetExplorerDriver d1 = new InternetExplorerDriver();
d1.get("http://www.amazon.com/");
d1.findElementById("twotabsearchtextbox").sendKeys("cheese");
d1.quit; 
```

这将打开 IE 8 窗口并在搜索框中输入 cheese。注意：我使用的是 webdriver 2.25，并从[这里](http://code.google.com/p/selenium/downloads/detail?name=IEDriverServer_x64_2.26.2.zip&can=2&q=)下载了最新的 IEDriver 。

希望您已将 IE 设置中的所有安全区域的保护模式设置为启用或相同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T19:40:27.540

```
 InternetExplorerDriver driver = new InternetExplorerDriver();
 driver.get("http://www.amazon.com/");
 driver.findElement (By.id("twotabsearchtextbox").sendKeys("state");
 or
 driver.findElement (By.xpath("//input[@id='twotabsearchtextbox']").sendKeys("state");
 or
 driver.findElement (By.xpath("//input[@name='field-keywords']").sendKeys("state"); 
 driver.quit; 
```

# couchdb - 列出设计文档中创建的所有视图

> ID：13538138
> 
> 赞同：0
> 
> 时间：2012-11-24T04:02:34.600
> 
> 标签：couchdb, couchdb-futon

couchdb 可以列出设计文档中创建的所有视图吗？如果是这样，查询是什么？蒲团以某种方式做到了，但我似乎无法从那里的代码中弄清楚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T04:49:34.597

只需检索您喜欢的设计文档并枚举所有`views`字段键。蒲团的工作方式有点不同，因为它显示了[所有设计文档中的](https://github.com/apache/couchdb/blob/master/share/www/script/futon.browse.js#L404)[所有视图](https://github.com/apache/couchdb/blob/master/share/www/database.html#L91)，但原理是相同的。请注意，设计文档并不是某种魔法——它们与其他文档相同，只是与 CouchDB 就字段结构和处理工作流程达成了一些内部协议。

# javascript - 扩展 Backbone.View 时的奇怪行为

> ID：13538140
> 
> 赞同：2
> 
> 时间：2012-11-24T04:02:56.317
> 
> 标签：javascript, object, backbone.js

好的，我最近遇到了这个问题，我不太明白为什么会这样。有人可以解释为什么`this._views`会“异花授粉”吗？代码如下：

```
var layout = Backbone.View.extend({
    _views: [],
    addToViews: function(view) {
        this._views.push(view);
    },
    renderViews: function() {
        console.log(this._views);
    }
});

var view1 = new layout();
view1.addToViews('some view');
view1.renderViews(); //outputs array(1)['some view']

var view2 = new layout();
view2.renderViews(); //outputs array(1)['some view'] **incorrect!** 
```

[jsfiddle](http://jsfiddle.net/Ed4BH/1/)

这工作正常：

```
var layout = Backbone.View.extend({
    //_views: [],
    addToViews: function(view) {
        this._views = this._views || [];
        this._views.push(view);
    },
    renderViews: function() {
        console.log(this._views);
    }
});

var view1 = new layout();
view1.addToViews('some view');
view1.renderViews(); //outputs array(1)['some view']
var view2 = new layout();
view2.renderViews(); //outputs undefined **correct**​ 
```

[小提琴我蝙蝠侠](http://jsfiddle.net/KAVSC/2/)

普通的香草 js 实现似乎也可以正常工作

```
var layout = function() {
    var _views = [];
    return {
        addToViews: function(view) {
           _views.push(view);
        },
        renderViews: function() {
            console.log(_views);
        }
    }
};

var view1 = new layout();
view1.addToViews('some view');
view1.renderViews(); //outputs array(1)['some view']

var view2 = new layout();
view2.renderViews(); //outputs array(0)[] 
```

[你知道我们摆弄js](http://jsfiddle.net/sHNfz/1/)

那么为什么`this._views`当我们创建一个全新的实例时保存状态呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-24T04:08:11.960

当您扩展`View`（或任何其他 Backbone 类）时，您正在扩展该类的原型。原型在类的所有实例之间共享。这意味着您设置为原型属性的任何对象都将在所有实例之间共享，*而不是*每个实例唯一。因此，使用对象或数组的属性扩展 Backbone 类将在所有实例之间创建对该对象的共享引用。

有关此问题的更多详细信息，请参阅[此相关答案](https://stackoverflow.com/questions/6325864/oop-javascript-isolate-object-within-class/6326478#6326478)，因为它会影响使用原型继承的任何类。

# javascript - JS 替换 Word 后的反斜杠

> ID：13538141
> 
> 赞同：0
> 
> 时间：2012-11-24T04:03:19.567
> 
> 标签：javascript, regex

如何在单词**content**之后的给定字符串中替换双反斜杠“\\” ，只有一个反斜杠 \？

```
var a = "blah blah \\ \\ content:\"whiskey \\\\"; 
```

使其显示为：

```
var a = "blah blah \\ \\ content:\"whiskey \\"; 
```

我尝试了以下但没有成功。

```
 a.replace(/content:*\\\\\"/g, "\\")); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T04:31:25.480

与其试图用正则表达式解决整个问题，我只是打破“内容”上的字符串并在右半边进行替换。

```
function fn(x) { 
    var i = x.indexOf("content");
    return x.substr(0,i) + x.substr(i).replace(/\\\\/g, "\\");
}

// this evaluates true
fn("blah blah \\ \\ \\\\ content:\"whiskey \\\\\\\\ \\\\") ==
   "blah blah \\ \\ \\\\ content:\"whiskey \\\\ \\" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T04:09:45.717

```
a.replace(/(content:.*)\\\\/g, "$1\\"); 
```

特别是问题，您`"`的正则表达式中有一个，您需要`.*`匹配任何内容，并且您需要在第一部分周围放置一个组，以便稍后检索它。

不幸的是，由于 javascript 的匹配方式，您确实需要多次运行它，直到它完成所有替换。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T04:38:32.230

尝试使用这个，没有替换方法！

```
a.split('\\\\').join('\\'); 
```

结果应该是：

```
blah blah \ \ content:"whiskey \ 
```

# php - PHP合并两个数组，改进代码

> ID：13538145
> 
> 赞同：0
> 
> 时间：2012-11-24T04:03:42.390
> 
> 标签：php

我有以下经过测试的代码，经过几次尝试后，我可以从两个合并的数组中过滤出唯一的结果。我之前尝试使用 array_diff、array_diff_key、array_diff_assoc 无济于事，直到我解决了以下问题。

*   第二个需要首先使用 array_filter 排除空值（如 0），否则空值（“red”=>“0”）也会打印在合并结果中，这是不期望的。
*   array_unique 从合并中删除重复项。

所以以下内容按预期工作，但我想知道代码是否有任何改进，看起来有点像绕圈子。我的意思是我不确定代码是否正确完成：

```
$array1 = array("a" => "green", "b" => "purple", "blue" => "0");
$array2 = array("a" => "0", "b" => "purple", "blue" => "blue", "red" => "0");

$merge  = array_unique(array_merge($array1, array_values(array_filter($array2)))); 
```

非常感谢任何改进。谢谢

更新：对不起，我在要求的后期发展，后来我意识到我也应该考虑用array2替换第一个array1，即使当两者都存在对时返回NULL。我最好回到我的客厅。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T05:52:07.030

我知道你到底想要什么，但根据你的代码结果，我猜这个或类似的东西对你有用。

`$merge = $array1 + array_filter($array2);`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T04:28:35.093

您的代码也是从 array1 写入空值

无需使用 array_unique，因为 array_merge 会自动删除合并重复值

> $array1 = array("a" => "green", "b" => "purple", "blue" => "0");
> $array2 = array("a" => "0", "b" => "purple", "blue" => "blue", "red" => "0");
> $merge = array_merge($array1, array_filter($array2));

# jquery - 这个效果是如何实现的？HTML/CSS/jQuery

> ID：13538147
> 
> 赞同：-3
> 
> 时间：2012-11-24T04:04:21.433
> 
> 标签：jquery, html, css, animation

如果你在这里访问这个网站：http: [//alexdunphy.github.com/refineslide/#installation](http://alexdunphy.github.com/refineslide/#installation)

然后单击菜单按钮“安装”、“调整”、“常见问题”、“关于”等...您会注意到每个页面之间有一个很好的过渡，而无需重新加载整个页面。

我刚开始Web开发，我想尝试实现类似的效果。

以下是我对他如何做到这一点的猜测：

1.  具有该内容的 iFrame，按钮会触发要加载的每个 iFrame。每个 iFrame 的顶层`<div>`都有一些`-webkit-`或`-moz-`动画。

2.  整个内容都在一个 div 中，每个按钮只是简单地将前一个 div 淡出并使用一些 CSS 动画淡入下一个 div。

我会尝试这两个，除非你们知道它是如何完成的。

在 1 和 2 中，哪个更有吸引力？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T04:11:14.037

它使用一个名为 target 的伪选择器，链接将 #pagename 附加到 url，并从那里发生适当的动画。

HTML 可能类似于：

```
<p id='pagename'>This is some text</p> 
```

链接如下所示：

```
<a href='#pagename'>This link goes to pagename</a> 
```

然后在 CSS 中，你可以定义：

```
#pagename:target {
    font-weight: bold;
} 
```

当您单击链接时，这将使#pagename 内的文本变为粗体。从这里您可以将其扩展为包含动画，例如将所有 div 的透明度设为 0 并将位置向左：50px；

然后每当一个 div 被定位时，你将不透明度设置为 1，将左侧设置为 0px

编辑：这是我创建的一个快速示例，它模拟了您想要的确切效果：http: [//jcolicchio.latestdot.net/test_target.html#page1](http://jcolicchio.latestdot.net/test_target.html#page1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T04:07:37.060

他们很可能正在使用 JQuery 进行转换。

[http://jquery.com/](http://jquery.com/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T04:25:39.920

如果你用 firebug 检查网页，你会发现[这个](http://alexdunphy.github.com/refineslide/assets/js/footer.js)jQuery 文件里面包含了所有的魔法（或者至少是其中的一部分）。

没有看到所有的细节，但我想你可以用纯 jQuery 和 CSS 来实现这个效果。

祝你好运！

# ruby-on-rails - 在 Factory Girl 中创建嵌套属性失败？

> ID：13538148
> 
> 赞同：0
> 
> 时间：2012-11-24T04:04:24.853
> 
> 标签：ruby-on-rails, factory-bot

我在 a和模型`many-to-many`之间有关联：`Post``Category`

**分类.rb：**

```
class Categorization < ActiveRecord::Base
  attr_accessible :category_id, :post_id, :position

  belongs_to :post
  belongs_to :category
end 
```

**类别.rb：**

```
class Category < ActiveRecord::Base
  attr_accessible :name

  has_many :categorizations
  has_many :posts, :through => :categorizations  

  validates :name, presence: true, length: { maximum: 14 }
end 
```

**post.rb:**

```
class Post < ActiveRecord::Base
  attr_accessible :title, :content, :category_ids

  has_many :categorizations
  has_many :categories, :through => :categorizations  

  accepts_nested_attributes_for :categorizations, allow_destroy: true

end 
```

*这有效：*

**post_spec.rb：**

```
describe Post do

  let(:user) { FactoryGirl.create(:user) }
  let(:category) { FactoryGirl.create(:category) }
  before { @post = user.posts.build(title: "Lorem ipsum",
                                    content: "Lorem ipsum dolor sit amet",
                                    category_ids: category) } 
```

*我的问题在这里：*

**工厂.rb：**

```
 factory :post do
    title "Lorem"
    content "Lorem ipsum"
    category_ids category
    user
  end

  factory :category do
    name "Lorem"
  end 
```

**回复规格.rb：**

```
describe Reply do

  let(:post) { FactoryGirl.create(:post) }
  let(:reply) { post.replies.build(content: "Lorem ipsum dolor sit amet") } 
```

当我运行测试时，`reply_spec.rb`我收到此错误：

```
> undefined method `category=' for #<Post:0x9e07564> 
```

*这是我认为不起作用的部分：*

**工厂.rb：**

```
 category_ids category 
```

我是否以错误的方式定义嵌套属性？什么是合适的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T10:58:22.060

这篇文章使用 after_build 钩子创建关联：[Populating an association with children in factory_girl](https://stackoverflow.com/questions/2937326/populating-an-association-with-children-in-factory-girl)

就我个人而言，我喜欢不要让工厂过于复杂（使它们在 imo 中过于具体），而是根据需要在测试中实例化任何必要的关联。

工厂.rb：

```
factory :post do
  title "Lorem"
  content "Lorem ipsum"
  user
end

factory :category do
  name "Lorem"
end 
```

post_spec.rb：

```
...
let(:post) {FactoryGirl.create(:post, :category => FactoryGirl.create(:category))} 
```

（编辑——因为 post 对象与分类相关联，而不是直接与分类相关联）

```
let(:post) {FactoryGirl.create(:post)}
let(:categorization) {FactoryGirl.create(:categorization, 
                                  :post=> post, 
                                  :category=> FactoryGirl.create(:category))} 
```

# r - 从函数调用时，addSMA 未在图形上绘制

> ID：13538151
> 
> 赞同：6
> 
> 时间：2012-11-24T04:04:55.757
> 
> 标签：r, quantmod

我是 R 的新手并且被困在这里。我正在尝试用价格、sma 和 ema 绘制图表。

当我从命令行调用图表时，它绘制得很好，包括价格、sma 和 ema：

```
tickers = c("BIIB","ISRG","AIG","FITB","GE","JNY","VIAB","WFM","WMB")

x= 1

print(paste("Preparing ADX graph for :",paste(tickers[x])))
tmp <- read.csv(paste(tickers[x],".csv", sep=""),as.is=TRUE, header=TRUE, row.names=NULL) 
tmp$Date<-as.Date(tmp$Date)
ydat = xts(tmp[,-1],tmp$Date) 
names(ydat) <- c("Open","High","Low","Close","Volume","Adjusted")

# convert it into montly price
ydat.monthly <- to.monthly(ydat)

jpegname <- paste(tickers[x], "MonthlyMovingAverage.jpeg", sep="") 
jpeg( filename=jpegname,height=600, width=1600) 

lineChart(ydat.monthly["1998/"], TA=NULL, name=paste(tickers[x],"Monthly & 10 Month Moving Average"))
addSMA(10)
addEMA(10)

dev.off() 
```

但投入功能为：

```
MovingMonthlyAverageGraph <- function(tickers)
{

    source("code.r")
    load.packages('quantmod')   

    for (x in 1:(length(tickers)) ) 
    { 
       print(paste("Preparing ADX graph for :",paste(tickers[x])))
       tmp <- read.csv(paste(tickers[x],".csv", sep=""),as.is=TRUE, header=TRUE, row.names=NULL) 
       tmp$Date<-as.Date(tmp$Date)
       ydat = xts(tmp[,-1],tmp$Date) 
       names(ydat) <- c("Open","High","Low","Close","Volume","Adjusted")

       # convert it into montly price
       ydat.monthly <- to.monthly(ydat)

       jpegname <- paste(tickers[x], "MonthlyMovingAverage.jpeg", sep="") 
       jpeg( filename=jpegname,height=600, width=1600) 

       lineChart(ydat.monthly["1998/"], TA=NULL, name=paste(tickers[x],"Monthly & 10 Month Moving Average"))
       addSMA(10)
       addEMA(10)

       dev.off()
    }
} 
```

并称为：

```
tickers = c("BIIB","ISRG","AIG","FITB","GE","JNY","VIAB","WFM","WMB")
MovingMonthlyAverageGraph(tickers) 
```

只绘制价格，但忽略 sma 和 ema 线。

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-24T04:53:57.080

环绕`plot`您的 add* 调用。

```
plot(addSMA(10))
plot(addEMA(10)) 
```

我认为您也可以在`lineChart`通话中添加这些内容。（未经测试）

```
lineChart(ydat.monthly["1998/"], TA="addSMA(10);addEMA(10)", name=paste(tickers[x],"Monthly & 10 Month Moving Average")) 
```

# batch-file - 设置 /p 命令不起作用

> ID：13538153
> 
> 赞同：2
> 
> 时间：2012-11-24T04:05:13.157
> 
> 标签：batch-file

突然间，我的 set /p 命令似乎没有响应。我已经写了

```
@echo off
set /p pass=
echo %pass%
pause 
```

当我执行上述代码时，控制台会显示，`ECHO is OFF` 而不需要用户输入任何内容。我最近`SETLOCAL ENABLEDELAYEDEXPANSION`在其他一些程序中使用过，所以与它有什么关系

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T15:46:26.807

我已经复制粘贴了您的代码，它对我有用（有和没有`set ENABLEDELAYEDEXPANSION`）。您没有说明您使用的是哪个版本的 Windows。尝试将设置行更改为：

```
set /p pass="" 
```

或者：

```
set /p pass="Enter your password:" 
```

如果它仍然不适合您，请检查您是否可以从文本文件中设置变量：

```
set /p pass=<filename.txt 
```

# python-2.7 - WSGI 中间件和应用工厂

> ID：13538154
> 
> 赞同：1
> 
> 时间：2012-11-24T04:05:32.727
> 
> 标签：python-2.7, flask, mod-wsgi, wsgi, middleware

我正在尝试在我的服务器上为 python 设置中间件，以便服务器上的 apache2 可以看到蓝图的子目录，并在**example.com/myapplicationsubfolder/routedblueprintfunction之类的 URL 下提供服务**

我/users/ 文件夹中的**__init__.py**如下所示：

```
class WebFactionMiddleware(object):
    def __init__(self, app):
        self.app = app
    def __call__(self, environ, start_response):
        environ['SCRIPT_NAME'] = '/myapplicationsubfolder'
        return self.app(environ, start_response)

from index import application
application.wsgi_app = WebFactionMiddleware(application.wsgi_app) 
```

在我制作了我的应用程序工厂后，我不能再使用它了：

```
from app import app
app.wsgi_app = WebFactionMiddleware(app.wsgi_app) 
```

我正在尝试从 index.py 获取烧瓶应用程序

**Index.py**是这样的：

```
from app import create_app
application = create_app()
application.run() 
```

**app.py**像这样：

```
def configure_errors(app):
  @app.errorhandler(500)
  def internal_server_error(error):
      return render_template('500.html'), 500

def create_app():
    app = Flask(__name__)
    app.config.from_object('config')

    from users.views import b_users
    db.init_app(app)
    app.register_blueprint(b_users)
    configure_errors(app)

    return app 
```

如果有人有一个大型蓝图应用程序实现源代码的链接，该源代码使用 WSGI 中间件作为 python Flask 网站的子目录，那将有很大帮助。

我遇到了一些严重的循环导入问题或子目录 init.py 问题。

```
[Sat Nov 24 05:32:59 2012] [error] [client 127.0.0.1] Traceback (most recent call last):
[Sat Nov 24 05:32:59 2012] [error] [client 127.0.0.1]   File "/home/somefolder/webapps/applicationsubfolder/htdocs/index.py", line 8, in <module>
[Sat Nov 24 05:32:59 2012] [error] [client 127.0.0.1]     from app import create_app
[Sat Nov 24 05:32:59 2012] [error] [client 127.0.0.1]   File "/home/somefolder/webapps/applicationsubfolder/htdocs/app.py", line 5, in <module>
[Sat Nov 24 05:32:59 2012] [error] [client 127.0.0.1]     from users.views import b_users
[Sat Nov 24 05:32:59 2012] [error] [client 127.0.0.1]   File "/home/somefolder/webapps/applicationsubfolder/htdocs/users/__init__.py", line 9, in <module>
[Sat Nov 24 05:32:59 2012] [error] [client 127.0.0.1]     from index import application
[Sat Nov 24 05:32:59 2012] [error] [client 127.0.0.1]   File "/home/somefolder/webapps/applicationsubfolder/htdocs/index.py", line 8, in <module>
[Sat Nov 24 05:32:59 2012] [error] [client 127.0.0.1]     from app import create_app
[Sat Nov 24 05:32:59 2012] [error] [client 127.0.0.1] ImportError: cannot import name create_app 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T20:20:13.163

我不完全确定您的要求。不过让我试试。

1.  如果要在视图函数 url 之前添加蓝图文件夹名称，请执行以下操作：

    app.register_blueprint(b_users, url_prefix='/folder_name')

    网址将是`localhost/folder_name/url`

2.  将其移入 create_app 方法。

    ```
    app.wsgi_app = WebFactionMiddleware(app.wsgi_app) 
    ```

# c++ - 想使用向量指针来操作对象成员的值

> ID：13538155
> 
> 赞同：-1
> 
> 时间：2012-11-24T04:05:33.883
> 
> 标签：c++

我想在调用 Heap 构造函数时创建对象 A (aArray) 的向量并操作 aArray.a 的值。目前，aArray.a 的值保持不变。我怎样才能正确地做到这一点？

谢谢您的帮助！

```
#include <vector>
#include <iostream>

struct A
{
  A(int av):a(av){}

    int a;
};

struct Heap
{

  Heap(std::vector<A> *hVal)
  {
      for (int i=0; i<hVal->size(); ++i) 
      {
        hVec.push_back(hVal->at(i));
      }
      std::cout << std::endl;

      for(int i=0; i<hVec.size(); ++i)
      {
        hVec[i].a*=2;
        std::cout << "hVec[i].a*=2  is " << hVec[i].a << "\n"; 
      }
  }

  std::vector<A> hVec;
};

int main()
{
  A a0(2), a1(4), a2(8);  
  std::vector<A> aArray;  
  aArray.push_back(a0);
  aArray.push_back(a1);
  aArray.push_back(a2); 

  Heap h(&aArray);

  for(int i=0; i<aArray.size(); ++i)
  {
    std::cout << "aArray[i].a = " << aArray[i].a << "\n";
  }

  return 0;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T04:11:04.723

您的`Heap`构造函数复制`*hVal`到`hVec`，然后修改`hVec`. 如果您希望它`aArray`在 main中更新，请`*hVal`改为修改（例如通过`hVal->at(i).a *= 2;`）。

*更新：*

```
struct Heap {
    Heap(std::vector<A> *p) : ptr(p) {}

    void multiply_by(int n) {
        for (int i = 0; i < ptr->size(); i++) {
            (*ptr)[i] *= n;
        }
    }

    std::vector<A> *ptr;
};

...

Heap h(&aArray);
h.multiply_by(2); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T04:10:29.357

使用指针而不是向量。使用时，`std::vector<A> hVec;`您实际上是在创建一个独立的矢量对象。改为使用`std::vector<A> * hVec;`。

# javascript - dojo 1.4 阻止 window.confirm 的是/否对话框替换

> ID：13538161
> 
> 赞同：1
> 
> 时间：2012-11-24T04:06:46.097
> 
> 标签：javascript, dojo, dialog, blocking

我被困在dojo 1.4中。
需要一个同步（阻塞）对话框替换 window.confirm()。
为什么：我希望按钮是 YES/NO 而不是 OK/CANCEL。
此对话框将从应用程序的多个部分调用——因此需要适当的清理。是否有具有此功能的 dojo 库？
我更喜欢所有动态代码，因此我可以在 .js 文件或 html/jsp 文件中包含这个新对话框，但可以使用的东西值得赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T11:16:25.643

你不能让它同步，但你可以阻止表单提交`event.preventDefault()`或`onsubmit="return false;"`@FakeRainBrigand 提到的。

这是一个工作示例：http: [//jsfiddle.net/phusick/73PuE/](http://jsfiddle.net/phusick/73PuE/)。

![在此处输入图像描述](../Images/5a3016a8ba7f969c6a4f003ed79d6d35.png)

它使用[了我在上面评论中提到的确认对话框](https://stackoverflow.com/questions/10401512/dojo-dialog-with-confirmation-button/10405938#10405938)。它是用 Dojo 1.8 编写的，但它应该或多或少与 1.4 相同，只需使用`dojo.connet`代替`dojo/on`：

```
var form1 = dom.byId("form1");

on(form1, "submit", function(event) {
    event.preventDefault();
    var form = event.target;
    MessageBox.confirm({ message: "Submit form?" }).then(function() {
        // submit the form upon a click on `Yes`
        form.submit();
    });        
}); 
```

你可以**在普通的 JavaScript**中实现同样的效果：

```
function confirmHandler(event) {
    event.preventDefault();

    var form = event.target;
    // ask for a confirmation and if confirmed invoke:
    // form.submit();
} 
```

在表单上注册处理程序：

```
<form onsubmit="confirmHandler(event);"> 
```

# javascript - 是否可以让 JQuery 按键响应更快？

> ID：13538168
> 
> 赞同：1
> 
> 时间：2012-11-24T04:07:59.057
> 
> 标签：javascript, jquery, html, canvas

我正在使用 JQuery 和 HTML5 画布标签编写一个简单的页面，在其中我通过按“w”向上移动一个形状，“s”向下，“a”向左，“d”向右。我已经完成了所有工作，但我希望形状在敲击键时开始以恒定速度移动。现在有某种保持期，然后运动开始。我怎样才能让运动立即发生？

这是我的代码的重要部分：

```
<script src="jquery.js"></script>
<script src="JQuery.print.js"></script>    
<body>
<canvas id="myCanvas" width="500" height="200" style="border:1px solid #d3d3d3;">
Your browser does not support the HTML5 canvas tag.</canvas>
<br><br>
start navigating<input type="text" id = "enter"/>
<div id = "soul2">
coords should pop up here
</div>
<div id = "soul3">
key should pop up here
</div>

<script>

var c=document.getElementById("myCanvas");
var ctx=c.getContext("2d");
//keypress movements
var xtriggered = 0;
var keys = {};
var north = -10;
var east = 10;
var flipednorth = 0;

$(document).ready(function(e){
  $("input").keydown(function(){
    keys[event.which] = true;
    if (event.which == 13) {
         event.preventDefault();
      }
    //press w for north
    if (event.which == 87) {
         north++;
         flipednorth--;
      }
    //press s for south
    if (event.which == 83) {
         north--;
         flipednorth++;
      }
    //press d for east
     if (event.which == 68) {
         east++;
      }
    //press a for west
    if (event.which == 65) {
         east--;
      }
     var  msg = 'x: ' + flipednorth*5 + ' y: ' + east*5;
     ctx.beginPath();
     ctx.arc(east*6,flipednorth*6,40,0,2*Math.PI);
     ctx.stroke();
     $('#soul2').html(msg);
    $('#soul3').html(event.which );
     $("input").css("background-color","#FFFFCC");
  });

  $("input").keyup(function(){
    delete keys[event.which];
    $("input").css("background-color","#D6D6FF");
  });
});

</script> 
```

如果我不应该发布这么长的代码，请告诉我。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-24T04:51:12.373

您缺少的是“游戏循环”。

在决定是否以及何时在画布上移动形状时，不是直接对键按下或向上做出反应，而是需要使用键事件来跟踪在任何给定时刻哪些键被按下，然后从`setTimeout()`-基于循环运行独立于关键事件。

您已经开始使用`keys`变量跟踪给定键是否随时关闭：

```
// in keydown
keys[event.which] = true;
// in keyup
delete keys[event.which]; 
```

...除了`event`未定义的-您需要将其作为事件处理程序的参数，而且您的任何代码都没有真正检查`keys`.

这是我正在谈论的简化版本：

```
$(document).ready(function(e){
  var keys = {};

  $("input").keydown(function(event){
    keys[event.which] = true;
  }).keyup(function(event){
    delete keys[event.which];
  });

  function gameLoop() {
    // w for north
    if (keys[87]) {
       north++;
       flipednorth--;
    }
    //press s for south
    if (keys[83]) {
       north--;
       flipednorth++;
    }
    // etc. for other keys

    // code to move objects and repaint canvas goes here

    setTimeout(gameLoop, 20);
  }
  gameLoop();
}); 
```

演示：http: [//jsfiddle.net/ktHdD/1/](http://jsfiddle.net/ktHdD/1/)

该`gameLoop()`函数将运行 20 毫秒左右（您可以根据需要改变它，但这对于相当流畅的动画来说已经足够快了）。每次运行时，它都会检查是否有任何键被按下，如果是，则调整相关的位置变量并重新绘制。如果您有其他自动移动的对象（例如，在游戏中可能有坏人），您也会在`gameLoop()`函数中更新它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T04:28:33.623

这不是 jQuery。您会在记事本中发现完全相同的延迟。

你需要做的是这个

```
var keydown=false;
$(document).on('keydown', function(e){
    if (!keydown) 
    {
        keydown=e.which;
        console.log('start moving and keep moving');
    }
}).on('keyup', function(){
    console.log("stop moving");
    keydown=false;
});​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T04:29:42.410

我相信您所看到的是密钥的重复率。这是在用户的操作系统中设置的 - 而不是浏览器。基本上，除了要求用户更改它之外，您无能为力。

[http://windows.microsoft.com/en-US/windows-xp/help/adjust-the-character-repeat-rate](http://windows.microsoft.com/en-US/windows-xp/help/adjust-the-character-repeat-rate)

**编辑**

这不是您问题的答案，但我将把它留在这里，因为重复率仍然是问题。请注意，@nnnnnn 表明存在可行的解决方法。

# .htaccess - 使用 .htaccess 将图像的直接链接重定向到 php 页面

> ID：13538171
> 
> 赞同：2
> 
> 时间：2012-11-24T04:09:04.783
> 
> 标签：.htaccess, redirect

我有一个列出许多照片链接的页面。单击链接将带您到 page.php 页面，以查看带有水印和其他一些东西（由 php 添加）的图像本身。我想要的是，如果人们直接转到大图像（本身没有水印），他们将被重定向到 page.php 页面，以便应用水印。

常规 html 文件上的链接示例

```
<a href="/page.php?i=image1" target="new">Link to Image 1</a> 
```

page.php 的一部分

```
<?php $file = $_GET['i']; ?>
<img src="/img/<?php echo $file ?>.png" /> 
```

我在这个论坛中找到了下面的 .htaccess 这行代码。但是，虽然重定向有效，但图像不会显示在 page.php 和其他 html 文件上。我猜图像链接也受到了重定向的影响并且被破坏了。你能帮忙吗？谢谢！

```
RewriteRule ^img/(.*)\.png$ /page.php?i=$1 [NC,L] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T07:42:00.103

问题是您的 img 标签喜欢重写 URL。所以，你应该允许空的推荐，这就是第一行的作用：

```
RewriteCond %{HTTP_REFERER} ^$
RewriteRule ^img/(.*)\.png$ /page.php?i=$1 [NC,L] 
```

# python - Django：模板语言比较总是返回 false

> ID：13538173
> 
> 赞同：0
> 
> 时间：2012-11-24T04:09:33.100
> 
> 标签：python, django

在我正在处理的项目中，我需要默认情况下将`select`标签放在特定位置`option`。我试图做到这一点，如果我将变量设置为某个数字，则在页面加载时将选择相应的选项。出于某种原因，我用来判断选项是否与变量相同的代码总是返回 false。

视图.py

```
@login_required
def display_work(request, id, chapter = 1):
    info = dict()
    work = Work.objects.get(id = id)
    chapters = Chapter.objects.filter(work = id).order_by("order_number")
    info['title'] = work.title
    info['summery'] = work.summery
    info['current_chapter'] = chapter # the number the options are compared to
    print chapter
    info['id'] = id
    num_chapters = 0
    chapter_list = []
    for c in chapters:
        temp = (c.title, c.order_number) # where the numbering for the options is set (see template code)
        chapter_list.append(temp)
        num_chapters += 1
    info['total_chapter'] = num_chapters
    content = chapters[int(chapter)-1].content
    return render_to_response("SubMain/display_work.html", {'STATIC_URL':STATIC_URL, "info":info, "chapters": chapter_list, "content": content}) 
```

模板：模板遍历一个列表，检查它创建的选项是否是当前章节。如果是这样，它应该“选择”它。

```
{% for t, o in chapters %}
<option value="/work/{{ info.id }}/{{ o }}" {% if o == info.current_chapter %} selected="selected" {% endif %}>Chapter {{ o }}: {{ t }}</option>
{% endfor %} 
```

然而，每当我运行代码时，都没有选择任何内容（if 标记中有什么）。通过我所做的调试，我已经确认`o`是 2 并且`info.current_chapter`也是 2。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T05:52:36.453

在模板中尝试使用单个“=”操作而不是“==”。

```
<option value="/work/{{ info.id }}/{{ o }}" {% if o = info.current_chapter %} selected="selected" {% endif %}>Chapter {{ o }}: {{ t }}</option> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T07:42:34.183

尝试[`ifequal`](https://docs.djangoproject.com/en/dev/ref/templates/builtins/?from=olddocs#ifequal)

```
 {% for t, o in chapters %}
    <option value="/work/{{ info.id }}/{{ o }}" {% ifequal o info.current_chapter %} selected="selected" {% endifequal %}>Chapter {{ o }}: {{ t }}</option>
    {% endfor %} 
```

# android - Android以编程方式更改默认浏览器的主页

> ID：13538178
> 
> 赞同：3
> 
> 时间：2012-11-24T04:10:24.007
> 
> 标签：android, android-intent, sharedpreferences, android-browser

我正在尝试使用以下代码将我的页面设置为浏览器主页，但它不起作用：

```
Context browserContext = createPackageContext("com.android.browser", Context.CONTEXT_IGNORE_SECURITY);

SharedPreferences sp = browserContext.getSharedPreferences("com.android.browser_preferences",Context.MODE_PRIVATE);                 
SharedPreferences.Editor edidor = sp.edit();
edidor.putString("homepage", "http://www.mypage.com");
edidor.commit(); 
```

我收到这个警告： `///data/data/com.android.browser/shared_prefs/com.android.browser_preferences.xml without permission`。

由于两个应用程序进程 ID 不同，我无法访问 Browser 应用程序的 SharedPreferences。

所以：

1.  我如何完成这项任务？
2.  是否有其他方法可以尝试，例如 javascript 或网页加载？
3.  我可以`setHomepage`以编程方式打开默认浏览器的对话框吗？

* * *

## 回答 #1

> 赞同：-3
> 
> 时间：2012-11-26T08:05:54.613

在您的 android 清单文件中添加 android.permission.ACCESS_BROWSER 此权限后尝试

# php - 如何使用 PHP 在字符串中查找数字？

> ID：13538181
> 
> 赞同：1
> 
> 时间：2012-11-24T04:10:53.283
> 
> 标签：php

> **可能重复：**
> [从字符串中提取数字](https://stackoverflow.com/questions/6278296/extract-numbers-from-a-string)

如何使用 PHP 在字符串中查找数字？例如 ：

```
<?
    $a="Cl4";
?> 
```

我有一个像这样的字符串 'Cl4' 。我想如果字符串中有像 '4' 这样的数字给我这个数字，但如果字符串中没有数字给我 1 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T04:17:21.430

```
<?php

    function get_number($input) {
        $input = preg_replace('/[^0-9]/', '', $input);

        return $input == '' ? '1' : $input;
    }

    echo get_number('Cl4');

?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T04:43:29.497

这是一个**简单**的函数，它将从您的字符串中提取数字，如果找不到数字，它将返回 1

```
<?php

function parse_number($string) {
    preg_match("/[0-9]/",$string,$matches);
    return isset($matches[0]) ? $matches[0] : 1;
}

$str = 'CI4';
echo parse_number($str);//Output : 4

$str = 'ABCD';
echo parse_number($str); //Output : 1
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T04:15:42.553

```
$str = 'CI4';
preg_match("/(\d)/",$str,$matches);
echo isset($matches[0]) ? $matches[0] : 1;

$str = 'CIA';
preg_match("/(\d)/",$str,$matches);
echo isset($matches[0]) ? $matches[0] : 1; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-24T04:27:03.323

```
$input = "str3ng";
$number = (preg_match("/(\d)/", $input, $matches) ? $matches[0]) : 1; // 3

$input = "str1ng2";
$number = (preg_match_all("/(\d)/", $input, $matches) ? implode($matches) : 1; // 12 
```

# android - 无效不更新屏幕

> ID：13538186
> 
> 赞同：1
> 
> 时间：2012-11-24T04:11:53.350
> 
> 标签：android

我有一个允许用户在屏幕上拖动形状的应用程序。我使用自定义表面视图进行拖动。每次表面视图获得 OnTouchEvent 时，它都会改变图形图像的位置并调用 OnDraw 来更新屏幕。

所以在触摸事件发生之前不会绘制位图图像。我试图使服装表面视图无效，但根据调试器，永远不会调用 OnDraw。

所以现在我的屏幕是空白的，直到有人触摸屏幕

// 代码

```
public class cPlay extends  cBase  implements OnClickListener {
    /** Called when the activity is first created. */
    // sound
    private SoundPool soundPool;
    private int soundID;
    boolean loaded = false;  

    @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
      //      setContentView(R.layout.play);

            int w=getWindowManager().getDefaultDisplay().getWidth();
            int h=getWindowManager().getDefaultDisplay().getHeight();

            BallView ballView=new BallView(this,w,h);
            setContentView(ballView);

            // Does not update screen??????
            ballView.invalidate();
                 ....
...
....} // end of class

public class BallView  extends SurfaceView implements SurfaceHolder.Callback {
    private Bitmap bitmap ;
    private int x=20,y=20;int width,height;
    cShapeParent MyShapes;   
    cTarget MyTargetShapes;
    Context context;
    int counter=0;   

    // sound
    private SoundPool soundPool;
    private int soundID;
    boolean loaded = false;

    public BallView(Context InContext,int w,int h) {
        super(InContext);

        context=InContext;
        int counter=0;
        int Page=0;
        width=w;
        height=h;
        getHolder().addCallback(this);
        setFocusable(true);
        MyShapes=new cShapeParent(context,w,h);
        MyTargetShapes= new cTarget(context,w,h);
        MyShapes.SetTargets(  MyTargetShapes );
        // load in bitmaps

    }

    @Override
    protected void onDraw(Canvas canvas) {
        super.onDraw(canvas);

        bitmap =BitmapFactory.decodeResource(getResources(), R.drawable.ball_green);
        canvas.drawColor(Color.BLUE);//To make background 
  //      canvas.drawBitmap(bitmap,x-(bitmap.getWidth()/2),y-(bitmap.getHeight()/2),null);

        // See if we shoyld drag it
        for(int i=MyShapes.Amount-1; i>=0; i--)
        {
          if (MyShapes.Intersect(i,x,y))        
          {
             // see if we can drag it
              if ( MyShapes.getDragFlag(i)==false)
                 break;

              // yes drag this image
              MyShapes.SetCenter(i, x, y);

              // if the target was found
              // make it so we can no loner drag it
              if (MyShapes.CheckTarget(i))
              {
                  MyShapes.SetDrag(i,false);
                  MyShapes.SetToTarget(i);
                  if (++counter>2)
                      DisplayNextScreen();
              }
              break;
          } 
        }     

        // Draw target shapes
        // NOTE: draw these first so they are on the bottom
        for(int i=0; i<MyShapes.Amount;i++)
        {
            int x=MyTargetShapes.GetX(i);
            int y=MyTargetShapes.GetY(i);
            int w=MyTargetShapes.GetW(i);
            int h=MyTargetShapes.GetH(i);

            Rect br=new Rect( x, y,w+x,  h+y);
            Bitmap m= MyTargetShapes.MyImages[i];
            canvas.drawBitmap(m, null, br, null);
        }      

        // Draw shapes that can be dragged
        for(int i=0; i<MyShapes.Amount;i++)
        {
            int x=MyShapes.GetX(i);
            int y=MyShapes.GetY(i);
            int w=MyShapes.GetW(i);
            int h=MyShapes.GetH(i);
            Rect br=new Rect( x, y, x+w,y+h);
            Bitmap m= MyShapes.MyImages[i];
            canvas.drawBitmap(m, null, br, null);
        }

    }

    @Override
    public boolean onTouchEvent(MotionEvent event) {
        x=(int)event.getX();
        y=(int)event.getY();

        if(x<25)
            x=25;
        if(x> width)   
            x=width;
        if(y <25)
            y=25;
        if(y > height)
            y=height;

        updateBall();

        return true;
    }

    @Override
    public void surfaceChanged(SurfaceHolder holder, int format, int width,int height) {
        // TODO Auto-generated method stub
    }

    @Override
    public void surfaceCreated(SurfaceHolder holder) {
        // TODO Auto-generated method stub
    }

    @Override
    public void surfaceDestroyed(SurfaceHolder holder) {
        // TODO Auto-generated method stub
    }

    private void updateBall() {
        Canvas canvas = null;
        try {
            canvas = getHolder().lockCanvas(null);
            synchronized (getHolder()) {
                this.onDraw(canvas);
            }
        }
        finally {
            if (canvas != null) {
                getHolder().unlockCanvasAndPost(canvas);
            }
        }
    }   

  void  DisplayNextScreen()
    {
           /////////////////////////////////////
        // call up dialog
        final Dialog dialog = new Dialog(context);
        dialog.setContentView(R.layout.custom);
        dialog.setTitle("Title...");

        // set the custom dialog components - text, image and button
        TextView text = (TextView) dialog.findViewById(R.id.text);
        text.setText("Android custom dialog example!");
        ImageView image = (ImageView) dialog.findViewById(R.id.image);
        image.setImageResource(R.drawable.ic_launcher);

        Button dialogButton = (Button) dialog.findViewById(R.id.dialogButtonOK);
        // if button is clicked, close the custom dialog

        dialogButton.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                dialog.dismiss();
                MyTargetShapes.SetUp(1);
                MyShapes.SetUp(1);
                MyShapes.SetTargets(  MyTargetShapes );
                counter =0;
            }
        });

        dialog.show();
    } // end methed

  void StartSound(int soundID )
  {
       AudioManager audioManager = (AudioManager) context.getSystemService("audio");
        float actualVolume = (float) audioManager
                .getStreamVolume(AudioManager.STREAM_MUSIC);
        float maxVolume = (float) audioManager
                .getStreamMaxVolume(AudioManager.STREAM_MUSIC);
        float volume = actualVolume / maxVolume;
        // Is the sound loaded already?

            soundPool.play(soundID, volume, volume, 1, 0, 1f);
        //  Log.e("Test", "Playe");

  } 

} // end class 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T04:30:12.690

您可以尝试将`invalidate();`调用添加到`BallView(Context InContext,int w,int h)`构造函数的末尾，而不是从不同的类调用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T09:24:00.920

我在我的应用程序中遇到了类似的问题。invalidate() 不会重绘形状。所以我找到的解决方案是将形状提取到在 UI 上显示组件的类中，然后通过从 UI 类访问它来从主要活动中更新组件。

SurfaceView 类：

@Override public void onDraw(Canvas canvas) {

```
 Log.d("check","="+color);
    Log.e("check","after set:"+buf);
    Log.i("new view ", " on draw ");
    paint.setStyle(Paint.Style.STROKE);
    paint.setStrokeWidth(5);
    paint.setColor(Color.WHITE);

    path = new Path();
    path.moveTo(0, 30);                             /*For Borders*/
    path.lineTo(30, 0);
    path.lineTo(-30, 0);
    path.close();
    path.offset(20, -5);
    canvas.drawPath(path, paint); 
```

界面类：

public void show(查看锚点，int color) { preShow();

```
 int xPos, yPos, arrowPos;

    mDidAction = false;
    }

    showArrow(((onTop) ? R.id.arrow_down : R.id.arrow_up), arrowPos,color);

    setAnimationStyle(screenWidth, anchorRect.centerX(), onTop);
    mWindow.showAtLocation(anchor, Gravity.NO_GRAVITY, xPos, yPos);

} 
```

R.id.arrow_down 是使用 NewView 类绘制的形状。

在事件的主要活动中调用如下函数：

```
 btn1 = (Button) this.findViewById(R.id.btn1);
    btn1.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {

            Log.d("In","View");
            quickAction.show(v,Color.BLUE);

        }
    }); 
```

这将根据需要更新视图。希望这可以帮助

# matlab - 如何在matlab图中为多条线指定颜色？

> ID：13538187
> 
> 赞同：0
> 
> 时间：2012-11-24T04:12:17.967
> 
> 标签：matlab, plot

我正在使用以下 matlab 绘图来绘制多个点

```
plot(ydep, xvar, '.', 'Markersize', 3); 
```

这里 ydep 和 xvar 是 1024x300 的矩阵，因此将有 300 条虚线以随机颜色绘制。我的问题是如何为参数中的 300 行中的每一行指定颜色？我尝试使用循环来绘制每条“线”，但这很慢

```
for n=1:300
  plot(ydep(:, n), xvar(:, n), '.', 'Markersize', 3, 'color', linecolors(n, :));
  hold on;
end 
```

其中 linecolors 定义了每条线的颜色。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T16:14:21.817

如评论中所述，解决方案是设置`ColorOrder`. 然后，您可以将其绘制为具有 matlabs 常规高性能的矩阵。

这是一个如何设置的示例`ColorOrder`

[http://www.mathworks.com/matlabcentral/answers/19815-explicitly-specifying-line-colors-when-plotting-a-matrix](http://www.mathworks.com/matlabcentral/answers/19815-explicitly-specifying-line-colors-when-plotting-a-matrix)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-04T17:49:09.710

我认为有一种比弄乱 ColorOrder 更方便的方法。该方法的概念是获取绘制线的句柄，然后使用`set`命令。Matlab 提供了可以缩放到数据集大小的颜色图，这在这里非常方便。

我将修改您的示例如下：

```
h = plot(ydep, xvar, '.', 'Markersize', 3);
set(h,{'color'},num2cell(cool(length(h)),2)); 
```

这将获得第一行代码中所有虚线的句柄。然后我使用颜色`cool`图并将其缩放到与 h 中的元素数相同的数字。但是，颜色图（提供常规矩阵）不能`set`直接在命令的参数中使用。指定多个属性值的一种方法是使用元胞数组，这就是本示例所做的。

所有功劳归功于 Kelly Kearney 在[Matlab Answers](https://www.mathworks.com/matlabcentral/answers/19815-explicitly-specifying-line-colors-when-plotting-a-matrix)上的回答。

# php - 如何在某个日期显示下一个变量

> ID：13538190
> 
> 赞同：1
> 
> 时间：2012-11-24T04:12:33.573
> 
> 标签：php, arrays, function, variables, date

我正在学习 PHP，想知道是否可以使用 for 语句来运行自动化函数。我了解变量和数组是如何工作的，但我就是想不通。

假设我有一个篮球赛程，我想在最近一场比赛的日期之后显示下一场比赛的日期；因此，如果在 3 号、4 号有一场比赛，我希望下一场比赛显示下一场比赛是在 5 日，即下一场比赛的日期。我可以在数组中创建游戏，但我似乎不知道如何在正确的日子调用正确的游戏。

一些方向会有所帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T18:04:20.510

这可以使用时间戳**轻松**完成，时间戳是从 1970 年 1 月开始的很长的秒数，因此如果您可以将日期转换为时间戳，您可以轻松地将其与其他日期时间戳进行比较。PHP 有一个函数 strtotime() 用于将任何字符串日期转换为其适当的时间戳数字，这是一个示例

```
<?php
$schedule = array( strtotime('25 Nov 2012'),strtotime('2 Dec 2012'), strtotime('5 Dec 2012')); 
print_r($schedule);//will print timestamp numbers
$today  = time();// current timestamp

echo '<br>Next Game dates are :';
foreach($schedule as $date) {
  if($date > $today) {
     echo date('d M Y', $date);
     break;
  }
}
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T04:43:24.720

我想说关键是您如何存储游戏的日期。我可能会做这样的事情：

```
$gamedays=array(1353734304, 1353725704);//these are timestamps of the game days
$time=time();
asort($time);
foreach($gamedays as $day){
    if($time>$day){
        $nextgame=next($gamedays);
    }
} 
```

$nextgame 现在将是下一场比赛的时间戳。

# dom - 为什么 document.evaluate('.', document.body, null, XPathResult.ANY_TYPE, null).singleNodeValue 会抛出异常？

> ID：13538197
> 
> 赞同：1
> 
> 时间：2012-11-24T04:14:24.610
> 
> 标签：dom, xpath, document.evaluate

如果我告诉 XPath 求值器我想要一个`XPathResult.FIRST_ORDERED_NODE_TYPE`(8) 或`ANY_UNORDERED_NODE_TYPE`(9)，我得到了该`body`元素，正如预期的那样——但所有其他结果类型都会产生一个`The expression cannot be converted to return the specified type.`异常（在 Firefox 中；WebKit 和 Opera 似乎不那么慷慨，只满足于而是命名它`TYPE_ERR: DOM XPath Exception 52`。

到底是怎么回事？并且，为了清楚起见重新表述问题：为什么选择上下文节点是一个类型错误，而不是清楚地推断为单节点结果，这从 XPath 表达式本身（`"."`，的同义词`"self::node()"`）显而易见，至少对我自己来说是一个人？

（作为参考，触发错误的不是`.singleNodeValue`具体访问——所有 XPathResult 的属性都表示同样的错误。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T10:45:38.823

那么有一个规范[http://www.w3.org/TR/DOM-Level-3-XPath/xpath.html#XPathResult-singleNodeValue](http://www.w3.org/TR/DOM-Level-3-XPath/xpath.html#XPathResult-singleNodeValue)清楚地说明`singleNodeValue`如果 resultType 不是 ANY_UNORDERED_NODE_TYPE 或FIRST_ORDERED_NODE_TYPE。”。实现遵循该规范。

# css - css3背景滑块，白页闪烁

> ID：13538198
> 
> 赞同：1
> 
> 时间：2012-11-24T04:14:30.263
> 
> 标签：css, background, slider

我目前使用 codrops 的 css3 背景滑块：

[http://tympanus.net/codrops/2012/01/02/fullscreen-background-image-slideshow-with-css3/](http://tympanus.net/codrops/2012/01/02/fullscreen-background-image-slideshow-with-css3/)

这是我放的网站：

[http://www.josturdycelebrant.com](http://www.josturdycelebrant.com)

问题是，客户端不希望页面在第一个滑块图像加载之前闪烁白色或任何其他颜色。他们只是希望图像在那里。除了将背景设置为滑块中的第一个图像之外，我到处寻找并似乎找不到答案。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T03:12:27.590

你确定这是个好主意吗？

经常使用淡入效果不仅是因为它在渲染中的柔和和“自然”的感觉，还因为它允许浏览器有一定的时间来**完全**加载图像，否则用户会体验到难看的“级联”效果的加载图像。我们可以非常肯定地说，用于背景的高分辨率图像就是这种情况，如您的示例所示。

无论如何，如果您（或您的客户）仍然想尝试一下，这里有一种方法来完成它。

您只需要声明为第一张图片优化的自定义动画。就像是：

```
@-webkit-keyframes firstImageAnimation { 
     0% { opacity: 1; }
    17% { opacity: 1; }
    25% { opacity: 0; }
   100% { opacity: 0; } }  /* complete with all other vendor prefixes */ 
```

然后将其分配给您要首先出现的 .jpg：

```
.cb-slideshow li:nth-child(1) span { 
   background-image:url(path-to-first-image);
   -webkit-animation: firstImageAnimation 36s linear infinite 0s;
      -moz-animation: firstImageAnimation 36s linear infinite 0s;
       -ms-animation: firstImageAnimation 36s linear infinite 0s;
        -o-animation: firstImageAnimation 36s linear infinite 0s;
           animation: firstImageAnimation 36s linear infinite 0s; 

} 
```

*（这将覆盖原始动画，仍然分配给所有其他背景图像）。*

这样，第一张图片会在加载页面后立即弹出。不幸的是，过了一会儿你会注意到这会破坏幻灯片，因为在最后一张图像消失后，第一张图像会突然出现。

**一个简单的解决方法是为幻灯片中的第一个**和**最后一个**分配相同的图像，后者默认返回与除第一个之外的任何其他图像相同的动画。所以在这种情况下，它只是这样的：

```
.cb-slideshow li:nth-child(6) span { 
    background-image: url(path-to-first-image);
    -webkit-animation-delay: 30s;
       -moz-animation-delay: 30s;
        -ms-animation-delay: 30s;
         -o-animation-delay: 30s;
            animation-delay: 30s; 
```

}

这将转换为从集合中的最后一个图像到第一个图像的无缝过渡。

# c++ - 当运行到很长的循环时，得到 Segmentation Fault:11 或内存分配错误

> ID：13538201
> 
> 赞同：0
> 
> 时间：2012-11-24T04:15:31.243
> 
> 标签：c++, memory

代码如下，麻烦的部分是`getTop()`函数：函数中有一个while循环`calculate()`，而且输入文件很大，当我尝试用2000行输入文件的小版本来处理时，程序从来没有出错。但是当我尝试一个130,000行输入文件的大版本时，我基本上得到了两种错误。

```
#include "UserUserSim.h"
UserUserSim::UserUserSim(string &query_url):
    _query_url(query_url)
{

}

void UserUserSim::calculate(ostream &out){
    ifstream infile(_query_url.c_str());
    string line;
    int movie_id;
    int user_id;
    MovieList* ml;
    while(infile>>line){
        if (line[line.length()-1]==':'){
            movie_id=atoi(line.c_str());
            ml=MovieDictionary::getInstance().getMovie(movie_id);
            ml->sortList();
            out<<line<<endl;
        }
        else{
            user_id=atoi(line.c_str());
            if (_map.find(user_id)==_map.end())
                getTop(user_id);
            float score=getScore(user_id,ml);
            out<<score<<endl;
        }
    }
}
float UserUserSim::getScore(int &user_id, MovieList* ml){
    vector<USim>* p=_map[user_id];
    vector<UserScore>::iterator it=ml->begin();
    vector<USim>::iterator sim_it=p->begin();
    float score=0;
    float score2=0;
    int total_num=0;
    float total_weight=0;
    int it_user_id;
    int sim_it_user_id;
    while( it != ml->end() && sim_it != p->end()){
        it_user_id=(*it).user_id;
        sim_it_user_id=(*sim_it).user_id;
        //cout<<it_user_id<<"  sdfsd "<<sim_it_user_id<<endl;
        if (it_user_id>sim_it_user_id)
            sim_it++;
        else if (it_user_id<sim_it_user_id)
            it++;
        else{ // when the user id matches
            score+=(*it).rating*(*sim_it).score;
            score2+=(*it).rating;
            total_num++;
            total_weight+=(*sim_it).score;
            sim_it++;
            it++;
        }
    }
    if (total_weight!=0)
        score=score/total_weight;
    else
        score=3.37827;//score2/total_num;
    return score;
}
typedef pair<int, float> mapPair;
bool compareSim(USim p1, USim p2){
    return p1.score>p2.score;
}
bool compareID(USim p1, USim p2){
    return p1.user_id<p2.user_id;
}
void UserUserSim::getTop(int user_id){
    vector<USim>* p=new vector<USim>;
    _map.insert(pair<int,vector<USim>*>(user_id,p));

    UserList* ul=UserDictionary::getInstance().getUser(user_id);
    vector<MovieScore>::iterator it;
    vector<UserScore>::iterator it_movie; // the iterator for the movielist
    vector<USim> score_list;
    vector<USim>::iterator it_s1;
    vector<USim>::iterator it_s2;
    for (it=ul->begin();it!=ul->end();++it){
        vector<USim> new_score_list;
        int movie_id=(*it).movie_id;
        it_s1=score_list.begin();
        MovieList* ml=MovieDictionary::getInstance().getMovie(movie_id);
        for(it_movie=ml->begin();it_movie!=ml->end();it_movie++){
            int user_id=(*it_movie).user_id;
            int rating=(*it_movie).rating;
            while( it_s1!=score_list.end() && user_id>(*it_s1).user_id){
                new_score_list.push_back((*it_s1));
                it_s1++;
            }
            USim us;
            us.user_id=user_id;     
            if (it_s1!=score_list.end() && user_id==(*it_s1).user_id){
                us.score=(*it_s1).score+rating*(*it).rating;// old allocated score+ new score
                it_s1++;
            }else{
                us.score=rating*(*it).rating;
            }
            new_score_list.push_back(us);// the vector's user rating x the rating of the movie,user
        }
        //copy the new_score_list into the score_list:
        score_list.clear();
        for (it_s2=new_score_list.begin();it_s2!=new_score_list.end();++it_s2)
            score_list.push_back(*it_s2);
    }
    int k=10;
    partial_sort(score_list.begin(),score_list.begin()+k,score_list.end(),compareSim);
    vector<USim>::iterator v_it;
    //store these users into the user_sim vector
    for (v_it=score_list.begin();v_it<score_list.begin()+k;++v_it){
        USim us=(*v_it);
        p->push_back(us);
    }
    sort(p->begin(),p->end(),compareID);
} 
```

这是错误我：

```
recommend(71304) malloc: *** error for object 0x7f96d3ec8618: incorrect checksum for freed object - object was probably modified after being freed.
    *** set a breakpoint in malloc_error_break to debug
    Abort trap: 6 
```

或错误二：

```
Segmentation Fault:11 
```

每次发生错误时，我都会检查断点，它们都是不同的，大约从第 50,000 行到第 100,000 行。所以我想这是一个内存问题。而且我还在运行代码之前输入了ulimit，错误仍然发生。真的希望有人告诉我错误在哪里，或者至少教我如何调试内存问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T04:52:00.723

在`UserUserSim::calculate`你有的方法

```
MovieList* ml; 
```

并且您从不初始化它，也许当您调用该`UserUserSim::getScore`方法时，您传递了一个可能导致分段错误的空指针。

# mysql - 何时将大表（磁盘大小，#cols）拆分为较小的表以提高性能？

> ID：13538202
> 
> 赞同：0
> 
> 时间：2012-11-24T04:15:35.967
> 
> 标签：mysql, performance, schema, innodb

有一个 14GB 的 myISAM，大约 15 行，很快就会成为 innodb 表。它的读/写方式也相当划分。它基本上是作为处理大量数据的“猎枪”表开始的。在尽职调查中，我发现该表分为 2-3 个基本字段段，其中一个理论段被我们的大部分应用程序查询使用，另一段表/字段用于其他查询等。Ea。场景当然有适当的索引。

将这个大表拆分为 3 个表，减少表大小/实体索引可能会提高性能，这是一件简单的家务事，还是更重要的最佳实践？特别是考虑到在边缘情况下可能加入其中的 1 或 2 个。

很好奇解决这个问题的任何输入/策略，当然它真的有帮助吗？

谢谢，

C

# python - 如何在python中将一些列表中的所有数字加在一起

> ID：13538205
> 
> 赞同：0
> 
> 时间：2012-11-24T04:15:56.930
> 
> 标签：python, list

x=[1,2,5] y=[2,3,9] 我怎样才能得到结果 22？

我的代码有类型错误。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-24T04:17:01.633

我认为您想要内置`sum`功能。

```
>>> x = [1,2,5]
>>> y = [2,3,9]
>>> sum(x+y)
22 
```

这与以下内容相同：

```
sum(x) + sum(y) 
```

或者如果你喜欢 itertools：

```
sum(itertools.chain(x,y)) 
```

后两者效率更高。

* * *

`sum`接受一个迭代并总结它的所有元素。在处理列表`+`连接时，因此：

```
x+y 
```

给你清单：

```
[1,2,5,2,3,9] 
```

这是可迭代的，因此是`sum`.

* * *

如果你有一大堆列表，你可以让它变得更有趣：

```
>>> lists = [x,y]
>>> sum(sum(lst) for lst in lists)
22 
```

最后一种形式很好，因为它可以微不足道地扩展到任意数量的列表 - 只需继续将它们附加到`lists`列表中，直到您准备好求和，然后将 1-liner 放入其中，然后就完成了。

当然，我想我们也可以用 itertools 做同样的事情：

```
sum(itertools.chain.from_iterable(lists)) 
```

如您所见，您有很多选择可以玩（并从中学习！:)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T06:09:03.077

```
>>> list1 = [1,2,5]

>>> list2 = [2,3,9]

>>> zip_list = [(x + y) for x, y in zip(list1, list2)]

>> zip_list

[3, 5, 14]

>>> sum(zip_list)

22 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T05:39:25.880

```
 sm=0
    for v in x+y:
         sm=sm+v 
```

# jquery - 如何将 XHTML 一个 rel attr 传递给 jQuery 函数

> ID：13538206
> 
> 赞同：0
> 
> 时间：2012-11-24T04:16:00.597
> 
> 标签：jquery, function, xhtml, rel

我有一个包含需要传递给 jQuery 函数的“rel”属性的 URL。

这是网址：

```
<a href="http://www.facebook.com/<?php echo $fblikeId; ?>" rel="<?php echo $fblikeId; ?>" ></a> 
```

在 jQuery 函数中，我需要检索“rel”标签的值。

这是jQuery函数：

```
jQuery(function($) {    
    $('#fblikes').advancedsocialstatus({
        'displayId':'fblikes',
        'service':'facebook',
        'countof':'likes',
        'userid': $(this).attr('rel'),
        'callback':'formatCount'
    });
}); 
```

上述函数的' `userid`'参数需要取回“ `rel`”标签的值。然后，上面的这个函数将所有数据传递给一个运行良好的更高级别的 jQuery 函数。

检索链接的“rel”属性的最佳方法是什么？已尝试使用“ `$(this).attr('rel')`”但不起作用。

上述函数有多个节点。IE 可能有多个调用

```
jQuery(function($) { 
    $('#fblikes').advancedsocialstatus({
        'displayId':'fblikes',
        'service':'facebook',
        'countof':'likes',
        'userid':$(this).attr('rel'),
        'callback':'formatCount'
    });
    $('#fbtalks').advancedsocialstatus({
        'service':'facebook',
        'countof':'talks',
        'userid':'$(this).attr('rel')',
        'callback':'formatCount'
    });

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T04:24:28.783

不能`$(this)`在插件函数的选项对象中任意使用。但是，您已经知道该元素，因此不需要`this`; 只需使用相同的选择器。

```
var $fblikes=$('#fblikes');

$fblikes.advancedsocialstatus({
        'displayId':'fblikes',
        'service':'facebook',
        'countof':'likes',
        'userid': $fblikes.attr('rel'),
        'callback':'formatCount'
}); 
```

此代码假定这`$('#fblikes')`是针对`<a>`显示的标签，但`ID`该 html中没有

# signalr - sharepoint 2013 信号器

> ID：13538209
> 
> 赞同：3
> 
> 时间：2012-11-24T04:16:27.387
> 
> 标签：signalr, sharepoint-2013

以下程序基于以下帖子给出的想法：

[http://spmatt.wordpress.com/2012/04/12/harnessing-signalr-in-sharepoint/](http://spmatt.wordpress.com/2012/04/12/harnessing-signalr-in-sharepoint/)

由于 Sharepoint 2013 基于 .NET 4，因此无需进一步配置即可使用 SignlaR

图书馆。我尝试使用 Microsoft.AspNet.SignalR.Core 1.0 版。添加的项目和项目

已编辑的事件类已绑定到项目列表。所以每当我创建一个新的项目项目时，它都会

如上述帖子中所述，自动触发 Web 部件中的 JavaScript。

项目添加事件代码定义如下：

```
public override void ItemAdded(SPItemEventProperties properties)
{
...
var connectionManager = GlobalHost.ConnectionManager;
var srContext = connectionManager.GetHubContext("messagehub");
srContext.Clients.Add.addMessage();
...
} 
```

messagehub 类定义如下：

```
public class messagehub : Hub { 
    public void Send(string message)
    {
        // Call the addMessage method on all clients
        Clients.All.addMessage(message);
    } 
} 
```

messagehub 保存在同一个包中。当我在项目列表中添加新项目时，

itemadd 事件将被触发。错误出现在 GetHubContext 声明中

该messagehub无法解决。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-17T15:08:36.777

我在 codeplex [http://spsignalr.codeplex.com](http://spsignalr.codeplex.com)上创建了一个解决方案 + 源代码- EventReceiver 也有一个工作示例。

# c++ - 指向数组访问的指针的段错误

> ID：13538215
> 
> 赞同：0
> 
> 时间：2012-11-24T04:17:49.073
> 
> 标签：c++, arrays, pointers, pixels

我正在为 freeimage 编写一个小包装器，用于图像加载和像素抓取等。我有一个`PImage`处理所有加载和显示的类，其中包含一个`PixelColorBuffer`类。我使用`PixelColorBuffer`for 一种方便的方法`unsigned char`从 s 中获取 s`texturebuffer`并将它们转换为另一个名为的类`color`（我将其排除在外，因为它工作正常）。我还希望能够使用此类设置像素`PixelColorBuffer`，这就是它具有`colortobuffer`和`buffertocolor`. 我`PixelColorBuffer`用指向位置的指针进行实​​例化`unsigned char array`（注意：它保存图片的 rgba 值）。但是，这似乎可行，但是当我调用`get(10, 10)`已加载并显示的图像时，我得到以下信息：

```
(GNU Debugger)
Program received signal SIGSEGV, Segmentation fault.
0x00007ffff7bc66d9 in cprocessing::PixelColorBuffer::buffertocolor (this=<optimized out>, n=<error reading variable: Unhandled dwarf expression opcode 0x0>) at pixelcolorbuffer.cpp:17
17      c.rgba[0]=(*b)[(n*4)+0]; 
```

和类被编译成 a`PImage`并正确链接。我假设我在设置指针时做错了，这是我第一次处理指向指针的指针......但我一生都无法弄清楚我做错了什么。这是所有相关代码。`PixelColorBuffer``.so`

```
///MAIN_PROGRAM.CPP
PImage t;
t.loadImage("image.png"); //loads image (works)
image(t, mouseX, mouseY); //draws image (works)
color c = t.get(10, 10); //SEGFAULT

///PIMAGE.HPP
class PImage {
public:
    GLubyte * texturebuffer; //holds rgba bytes here
    PixelColorBuffer * pixels;

    PImage();
    color get(int x, int y);
};

///PIMAGE.CPP
PImage::PImage() {
    this->pixels = new PixelColorBuffer((unsigned char *) texturebuffer);
}

void PImage::loadImage(const char * src) {
    //...snip...freeimage loading / opengl code ...
    char * tempbuffer = (char*)FreeImage_GetBits(imagen);
    texturebuffer = new GLubyte[4*w*h];

    //FreeImage loads in BGR format, so we swap some bytes
    for(int j= 0; j<w*h; j++){
        texturebuffer[j*4+0]= tempbuffer[j*4+2];
        texturebuffer[j*4+1]= tempbuffer[j*4+1];
        texturebuffer[j*4+2]= tempbuffer[j*4+0];
        texturebuffer[j*4+3]= tempbuffer[j*4+3];
    }
    //...snip...freeimage loading / opengl code ...
}

color PImage::get(int x, int y) {
    return pixels->buffertocolor((y*w)+x);
}

///PIXELCOLORBUFFER.HPP
class PixelColorBuffer {    
public:
    unsigned char ** b;

    PixelColorBuffer(unsigned char * b);

    /**Converts a pixel from the buffer into the color
    * @param n pixel ((y*width)+x)
    * @return color*/
    color buffertocolor(int n);

    /**Converts a pixel from the buffer into the color
    * @param n pixel ((y*width)+x)
    * @param c color to put into buffer*/
    void colortobuffer(int n, const color& c);
};

///PIXELCOLORBUFFER.CPP
PixelColorBuffer::PixelColorBuffer(unsigned char * b) {
    this->b = &b;
}

color PixelColorBuffer::buffertocolor(int n) {
    color c(0, styles[styles.size()-1].maxA);
    c.rgba[0]=(*b)[(n*4)+0];
    c.rgba[1]=(*b)[(n*4)+1];
    c.rgba[2]=(*b)[(n*4)+2];
    c.rgba[3]=(*b)[(n*4)+3];
    return c;
}

void PixelColorBuffer::colortobuffer(int n, const color& c) {
    (*b)[(n*4)+0] = c.rgba[0];
    (*b)[(n*4)+1] = c.rgba[1];
    (*b)[(n*4)+2] = c.rgba[2];
    (*b)[(n*4)+3] = c.rgba[3];
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-24T04:32:06.260

这可能不是全部，而是两个明显的问题：

```
PImage::PImage() {
    this->pixels = new PixelColorBuffer((unsigned char *) texturebuffer);
} 
```

此行无效，因为`texturebuffer`那里未初始化。（从未初始化的变量中读取会导致未定义的行为）。

```
PixelColorBuffer::PixelColorBuffer(unsigned char * b) {
    this->b = &b;
} 
```

这条线指向`this->b`，`b`它是 中的局部变量（参数）`PixelColorBuffer::PixelColorBuffer`。构造函数返回后，`this->b`是一个无效的指针。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-24T04:32:26.200

`this->b = &b;`-- 您正在将 b 初始化为指向堆栈值的指针。

将参数更改为 a`unsigned char*&`以解决代码中的这个直接问题。要解决长期问题，请停止使用指针。（这会在其他地方导致错误，但它会修复此处未定义的行为！）

`(unsigned char *)`不要在 C++ 代码中使用 C 样式转换。使用 C++ 风格的演员表，它们既不那么危险，又能说出你打算做什么。

`unsigned char ** b`为什么你有一个指向无符号字符缓冲区指针的指针？为什么你在不知道它有多长的情况下拿着一个缓冲区闲逛？

`texturebuffer = new GLubyte[4*w*h];`在 C++ 中，使用某种所有权类来包装分配是一个好主意，这样您就知道哪个指针“拥有”数据，并负责清理它。

`this->pixels = new PixelColorBuffer((unsigned char *) texturebuffer);`你有什么理由`PixelColorBuffer`需要动态分配吗？为什么不在`PixelColorBuffer`你的类/结构中有一个实际的，而不是把它放在免费商店的开销和混乱？

首先，教一个`PixelColorBuffer`如何是空的。其次，不要动态分配它。第三，如果你编写一个分配内存的非平凡构造函数，你必须编写一个析构函数、一个复制构造函数和`operator=`. 您可以选择禁用复制构造函数，`operator=`而不是编写它们。（谷歌“三个 C++ 规则”）

然后每当你更新你的`texturebuffer`，告诉`PixelColorBuffer`指向一个新的像素源。这消除了对`char**`in的需要`PixelColorBuffer`。

Ideally, store your `texturebuffer` in a managed buffer, like a `std::vector` instead of using `new` -- why manage memory when someone else can do it? This does away with a need to write a destructor (but you still need to disable `=` and copy construction).

# opengl - 法线贴图、高光贴图和环境贴图

> ID：13538216
> 
> 赞同：3
> 
> 时间：2012-11-24T04:18:17.500
> 
> 标签：opengl, glsl

我一直在使用[http://www.opengl-tutorial.org/](http://www.opengl-tutorial.org/)并且我下面的着色器来自他的教程，主要是我更改了变量名称并删除了标签 v 坐标反转，因为我使用的是 dds 图像。我确实也用环境纹理中的值替换了 vec3。

顶点着色器

```
#version 330 core

// Input vertex data, different for all executions of this shader.
layout(location = 0) in vec3 modelVertex;
layout(location = 1) in vec2 uv;
layout(location = 2) in vec3 modelNormal;
layout(location = 3) in vec3 modelVertexTangent;
layout(location = 4) in vec3 modelVertexBitangent;

// Output data will be interpolated for each fragment.
out vec2 texcoord;
out vec3 worldPosition;
out vec3 cameraEyeDirection;
out vec3 cameraLightDirection;
out vec3 lightDirectionTangent;
out vec3 eyeDirectionTangent;

// Values that stay constant for the whole mesh.
uniform mat4 MVP;
uniform mat4 V;
uniform mat4 M;
uniform mat3 MVR;
uniform vec3 worldLightPosition;

void main()
{
    // Output position of the vertex, in clip space : MVP * position
    gl_Position =  MVP * vec4(modelVertex,1);

    // Position of the vertex, in worldspace : M * position
    worldPosition = (M * vec4(modelVertex,1)).xyz;

    // Vector that goes from the vertex to the camera, in camera space.
    // In camera space, the camera is at the origin (0,0,0).
    vec3 cameraVertexPosition = (V * M * vec4(modelVertex,1)).xyz;
    cameraEyeDirection = vec3(0,0,0) - cameraVertexPosition;

    // Vector that goes from the vertex to the light, in camera space. M is ommited because it's identity.
    vec3 cameraLightPosition = ( V * vec4(worldLightPosition,1)).xyz;
    cameraLightDirection = worldLightPosition + cameraEyeDirection;

    // UV of the vertex. No special space for this one.
    texcoord = uv;

    // model to camera = ModelView
    vec3 cameraVertexTangent = MVR * normalize(modelVertexTangent);
    vec3 cameraVertexBitangent = MVR * normalize(modelVertexBitangent);
    vec3 cameraVertexNormal = MVR * normalize(modelNormal);

    // You can use dot products instead of building this matrix and transposing it. See References for details.
    mat3 tbn = transpose(mat3(cameraVertexTangent,cameraVertexBitangent,cameraVertexNormal)); 

    lightDirectionTangent = tbn * cameraLightDirection;
    eyeDirectionTangent =  tbn * cameraEyeDirection;
} 
```

片段着色器

```
#version 330 core

// Interpolated values from the vertex shaders
in vec2 texcoord;
in vec3 worldPosition;
in vec3 cameraEyeDirection;
in vec3 cameraLightDirection;

in vec3 lightDirectionTangent;
in vec3 eyeDirectionTangent;

// Ouput data
out vec3 color;

// Values that stay constant for the whole mesh.
uniform sampler2D diffuseTextureSampler;
uniform sampler2D normalTextureSampler;
uniform sampler2D specularTextureSampler;
uniform sampler2D ambientTextureSampler;
uniform mat4 V;
uniform mat4 M;
uniform mat3 MVR;
uniform vec3 worldLightPosition;

uniform float LightPower;
uniform vec3 LightColor;

void main()
{
    // Light emission properties
    // You probably want to put them as uniforms

    // Material properties 
    vec3 MaterialDiffuseColor = texture2D(diffuseTextureSampler, texcoord).rgb;
    vec3 MaterialAmbientColor = texture2D(ambientTextureSampler, texcoord).rgb * MaterialDiffuseColor;
    vec3 MaterialSpecularColor = texture2D(specularTextureSampler, texcoord).rgb * 0.3;

    // Local normal, in tangent space.
    vec3 tangentTextureNormal = normalize(texture2D(normalTextureSampler, texcoord).rgb*2.0 - 1.0);

    // Distance to the light
    float distanceBetween = length(worldLightPosition - worldPosition);

    // Normal of the computed fragment, in camera space
    vec3 n = tangentTextureNormal;

    // Direction of the light (from the fragment to the light)
    vec3 l = normalize(lightDirectionTangent);

    // Cosine of the angle between the normal and the light direction, 
    // clamped above 0
    //  - light is at the vertical of the triangle -> 1
    //  - light is perpendicular to the triangle -> 0
    //  - light is behind the triangle -> 0
    float cosTheta = clamp(dot(n,l),0,1);

    // Eye vector (towards the camera)
    vec3 E = normalize(eyeDirectionTangent);

    // Direction in which the triangle reflects the light
    vec3 R = reflect(-l,n);

    // Cosine of the angle between the Eye vector and the Reflect vector,
    // clamped to 0
    //  - Looking into the reflection -> 1
    //  - Looking elsewhere -> < 1
    float cosAlpha = clamp(dot(E,R),0,1);

    color = MaterialAmbientColor +  // Ambient : simulates indirect lighting
        MaterialDiffuseColor * LightColor * LightPower * cosTheta / (distanceBetween*distanceBetween) + // Diffuse : "color" of the object      
        MaterialSpecularColor * LightColor * LightPower * pow(cosAlpha,5) / (distanceBetween*distanceBetween);  //Specular

} 
```

所以我已经测试过，这不是加载着色器或生成我的模型所具有的值的问题，我正在关注这些部分的“T”教程。

该模型看起来带有漫反射纹理，并且在整个模型中更暗，而不是像预期的那样每个顶点，我根本看不到法线或镜面贴图。我添加了一个灯光位置作为着色器参数，我通过在 Maya 中加载我的模型并为我的灯光选择一个点来选择坐标。

所有纹理都是从 maya/mudbox 生成的库存纹理，我唯一做的就是转换为 dds DXT3 并翻转纹理。

我猜我的着色器中缺少一些东西。

# c++ - 简单的战舰游戏建议

> ID：13538217
> 
> 赞同：1
> 
> 时间：2012-11-24T04:18:43.563
> 
> 标签：c++

对于我的班级，我需要制作一个非常基本的 Battleship 游戏。但是，我是编程新手，遇到了一些问题。首先，让我解释一下我对这个程序的想法。我想为每个玩家的游戏板保留两个单独的二维数组。我有一个放置每艘船的功能，我将制作其他功能，将这些功能整合到一个“转弯”功能中。游戏板以 O 开始，每个船的位置都会用船的第一个字母替换 O。命中将被指定为 X。一旦放置了船只，当棋盘只剩下 X 和 O 时，将确定获胜者。我现在遇到的主要问题是我的二维数组。我想将它们放在一个结构中，但我遇到了一些我不知道如何处理的错误。一世' m 在 '.' 之前得到一个“预期的非限定 ID”。令牌”在board.firstboard =线。我得到的另一个错误是说我缺少一个 } 但如果我添加一个，它会说这是一个额外的。这与之前的错误有关吗？谢谢你的帮助！另外，我不确定我是否正确提供了我的代码，所以如果我没有提供，请告诉我，我会更正它！

```
 struct board
{
    static char firstBoard[10][10] ;
    static char secondBoard[10][10] ;
} ;

void initializeBoard()
{

    board.firstBoard =
    {
        {'O', 'O', 'O', 'O', 'O', 'O', 'O', 'O', 'O', 'O'},
        {'O', 'O', 'O', 'O', 'O', 'O', 'O', 'O', 'O', 'O'},
        {'O', 'O', 'O', 'O', 'O', 'O', 'O', 'O', 'O', 'O'},
        {'O', 'O', 'O', 'O', 'O', 'O', 'O', 'O', 'O', 'O'},
        {'O', 'O', 'O', 'O', 'O', 'O', 'O', 'O', 'O', 'O'},
        {'O', 'O', 'O', 'O', 'O', 'O', 'O', 'O', 'O', 'O'},
        {'O', 'O', 'O', 'O', 'O', 'O', 'O', 'O', 'O', 'O'},
        {'O', 'O', 'O', 'O', 'O', 'O', 'O', 'O', 'O', 'O'},
        {'O', 'O', 'O', 'O', 'O', 'O', 'O', 'O', 'O', 'O'},
        {'O', 'O', 'O', 'O', 'O', 'O', 'O', 'O', 'O', 'O'},
    } ;

    board.secondBoard =
    {
        {'O', 'O', 'O', 'O', 'O', 'O', 'O', 'O', 'O', 'O'},
        {'O', 'O', 'O', 'O', 'O', 'O', 'O', 'O', 'O', 'O'},
        {'O', 'O', 'O', 'O', 'O', 'O', 'O', 'O', 'O', 'O'},
        {'O', 'O', 'O', 'O', 'O', 'O', 'O', 'O', 'O', 'O'},
        {'O', 'O', 'O', 'O', 'O', 'O', 'O', 'O', 'O', 'O'},
        {'O', 'O', 'O', 'O', 'O', 'O', 'O', 'O', 'O', 'O'},
        {'O', 'O', 'O', 'O', 'O', 'O', 'O', 'O', 'O', 'O'},
        {'O', 'O', 'O', 'O', 'O', 'O', 'O', 'O', 'O', 'O'},
        {'O', 'O', 'O', 'O', 'O', 'O', 'O', 'O', 'O', 'O'},
        {'O', 'O', 'O', 'O', 'O', 'O', 'O', 'O', 'O', 'O'},
    } ;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T04:25:58.487

1.  使数组`static`成员将它们变成全局变量。你不想要那个。如果它们是`static`，那么所有`board`对象将共享相同的两个数组。

2.  您不能通过分配`{ ...data... }`给它们来设置数组。这种方式只能*初始化*数组，对象只能初始化一次。您不能以这种方式从函数内部初始化全局变量。

这是一个建议的版本：

```
#include <cstring>

struct board
{
    static const int WIDTH = 10, HEIGHT = 10;

    board()
    {
        std::memset(firstBoard, 'O', sizeof(firstBoard));
        std::memset(secondBoard, 'O', sizeof(secondBoard));
    }

    char firstBoard[WIDTH][HEIGHT];
    char secondBoard[WIDTH][HEIGHT];
}; 
```

这些变化是：

1.  数组现在是`board`结构的字段，而不是全局（`static`成员）。

2.  初始化已移至`board`结构的构造函数。您不需要显式调用它。

3.  数组初始化已替换为`std::memset`. 这很好用，因为数组元素类型是`char`. 如果它们不是`char`，您可能需要执行其他操作来初始化它们。

4.  为数组宽度和高度定义常量。

# php - 有人能告诉我为什么这个脚本返回 NULL 而不是给我结果吗？

> ID：13538219
> 
> 赞同：1
> 
> 时间：2012-11-24T04:19:07.560
> 
> 标签：php, html

```
$mysqli = mysqli_connect("localhost", "root", "pass", "test");

function check_login($mail,$pwd){   
    global  $mysqli;    
    if($stmt=  $mysqli->prepare('SELECT COUNT(*) FROM `users` WHERE mail = ? AND pwd = MD5(?)')){
        $stmt->bind_param("ss", $mail, $pwd);       
        $stmt->execute();
        $stmt->bind_result($count);
        $stmt->close();
        var_dump($count);
    }
    return ($count > 0 ? true : false);
}

check_login('test@gmail.com','pass'); 
```

我通过在stackoverflow上看到一些脚本来编写这个脚本。我尝试运行它，发现脚本执行后$count为NULL。

我想知道为什么这对我不起作用。我试图在 Mysql 上运行相同的命令，它向我展示了结果。

有人帮我解决它..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T04:32:26.360

[`mysqli::bind_result`](http://php.net/mysqli_stmt_bind_result)需要在调用之后`->execute`和调用之前`->fetch`调用。fetch() 不是可选的，因为（绑定结果）变量引用只是手动提取结果行的替代方法。

所以在你的代码中：

```
 $stmt->execute();
    $stmt->bind_result($count);
    $stmt->fetch();  // result array thrown away 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T04:32:50.953

首先，您不应该只是复制和粘贴代码，尤其是那些需要弄乱数据库的代码；了解代码试图实现的目标，然后编写你的代码。
二、更换

```
 'SELECT COUNT(*) FROM `users` WHERE mail = ? AND pwd = MD5(?)' 

```

和

```
 'SELECT COUNT(*) FROM `users` WHERE mail =? AND pwd =?' 

```

代码可能没有运行，因为您的密码以明文形式存储在数据库中。
让我们知道这是否有效。

# git - 如何保护实时服务器上的 git 存储库

> ID：13538226
> 
> 赞同：1
> 
> 时间：2012-11-24T04:20:00.397
> 
> 标签：git

阅读互联网上的所有教程和文章。作为一个简单的工作流程，我了解到我们可以在我们的实时服务器上创建一个**裸**`push`存储库，并从本地存储库等对其进行更新。

我的问题和担忧是，由于实时服务器也将是一个 Git 存储库并且它会有`.git`文件夹，这不是安全问题吗？如何防止访问它？

**更新**

假设我在服务器上的活动文件夹是/www，我可以从浏览器[http://myserver.com](http://myserver.com)访问它，所以我也可以访问[http://myserver.com/.git/HEAD](http://myserver.com/.git/HEAD) ??? 如何预防？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-24T05:36:04.837

您可能需要考虑分离存储库和工作树。

例如，在 Web 服务器所服务的文件夹之外的某个位置，运行`git init --bare`. 然后`config`将此目录中的文件替换为以下内容（其中`/path/to/web/root`应放置文件的路径）。

```
[core]
    repositoryformatversion = 0
    filemode = true
    bare = false
    worktree = /path/to/web/root
[receive]
    denycurrentbranch = ignore 
```

最后添加`hooks/post-receive`以下内容并将其标记为可执行

```
#!/bin/sh
git checkout -f 
```

现在，每当您推送到存储库时，文件都会被签出到正确的位置，您永远不必担心存储库被意外提供。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T04:28:12.800

Git 不关心访问您的 .git 文件夹的安全性 - 这是您的责任和操作系统强制访问它们。

基本上，如果您可以 ssh 进入您的服务器并访问 .git 文件夹 - 您可以做任何您想做的事情，git 也是如此。

处理用户、密码、ssh 密钥管理等很方便的方法就是安装[Gerrit](http://code.google.com/p/gerrit/)。Gerrit 是用 Java 实现的 Git 服务器，但它也恰好是很棒的代码审查引擎。代码审查部分非常有用，但是如果您不想使用，则不必使用它。您可以稍后使用代码审查，但提供 git 服务器、web ui 和用户/密钥管理、控制对不同 git 存储库的访问权限的 UI 非常好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-11-21T14:29:26.670

喜欢公认的答案，这是使用 git hooks 的好例子。

我是如何解决这个问题的（我很久以前也发过一个问题，网站是否应该是存储库）是，经过思考，我决定创建git发布，zip-em-up，并解压缩成“live”文件夹。

当然，使用帮助脚本和 git 别名。

我有几个脚本，例如 rgitpropup（它将分支从地面合并到 master，并推送到 origin）和 rgitrelease，它创建 GPG 签名版本，使用 dir 前缀作为参数，并将其压缩。

我给 propup 脚本加上了别名（当别名脚本时，你在它们前面加上“！”，顺便说一句。）

我想用钩子你也可以管理安装/解压缩到“live”目录......

编辑：`archive`是一个 git 命令，它内置了对压缩为存档格式的支持。通常它与命令结合使用，该`tag`命令具有对 pgp/gpg 签名的内置支持（gpg 通常是在 git 中进行数字签名的方式，不要与签名混淆）

# java - 默认关闭时 TabPane 中的 Tab 消耗

> ID：13538227
> 
> 赞同：7
> 
> 时间：2012-11-24T04:20:06.903
> 
> 标签：java, tabs, event-handling, javafx-2, javafx

我创建了一个程序，其中**TabPane**包含多个**Tabs**。当有人试图关闭任何选项卡时，我想执行我自己的代码：当用户单击任何选项卡的默认关闭按钮时，它会要求确认。如果用户说“是”，则选项卡将关闭，否则将保持打开状态。

我怎样才能做到这一点？

我正在做类似下面的事情。但选项卡仍在关闭。我将如何使用该选项卡？

```
Tab tab = new Tab();
TabPane tabPane=new TabPane();
tabPane.getTabs().add(tab);

tab.setOnClosed(new EventHandler<Event>() {
            @Override
            public void handle(Event t) {
                 t.consume();
            }
        }); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-22T19:46:15.853

Java 8的`Tab`实现有一个`onCloseRequest`属性可以防止标签关闭：

```
/* The installed event handler can prevent tab closing 
   by consuming the received event. */
public void setOnCloseRequest(EventHandler<Event> value) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-05T04:57:23.203

我正在采取自己的方式，如下所示。
我创建了一个超链接并将其设置为该选项卡的图形，它对我来说工作正常。

```
Hyperlink hlink = new Hyperlink();
Image image = new Image(MyClass.class.getResourceAsStream("/images/close.png"));
hlink.setGraphic(new ImageView(image));
hlink.setFocusTraversable(false);
Tab tab = new Tab();
tab.setGraphic(hlink);
hlink.setOnAction(new EventHandler<ActionEvent>() {
        @Override
        public void handle(ActionEvent e) {
              //Do somthing
         }
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-24T14:45:18.440

这是一个潜在的解决方案。如果您将自己的“提示用户”逻辑添加到下面的代码中，它应该可以满足您的需求。

```
package com.test;

import java.util.Set;

import javafx.application.Application;
import javafx.event.EventHandler;
import javafx.scene.Node;
import javafx.scene.Scene;
import javafx.scene.control.Tab;
import javafx.scene.control.TabPane;
import javafx.scene.input.MouseEvent;
import javafx.scene.layout.BorderPane;
import javafx.scene.paint.Color;
import javafx.stage.Stage;

public class JavaFXApp extends Application {

    public static void main(String[] args) {
        launch(args);
    }

    @Override
    public void start(Stage primaryStage) {
        primaryStage.setTitle("http://stackoverflow.com/questions/13538227/tab-consuming-in-tabpane-on-default-closing");
        BorderPane rootPane = new BorderPane();
        Scene scene = new Scene(rootPane, 640, 360, Color.WHITE);

        TabPane tabPane = new TabPane();

        Tab tab1 = new Tab();
        tab1.setText("Tab 1");
        tabPane.getTabs().add(tab1);

        Tab tab2 = new Tab();
        tab2.setText("Tab 2");
        tabPane.getTabs().add(tab2);

        rootPane.setCenter(tabPane);
        rootPane.prefHeightProperty().bind(scene.heightProperty());
        rootPane.prefWidthProperty().bind(scene.widthProperty());
        primaryStage.setScene(scene);
        primaryStage.show();

        Set<Node> nodes = tabPane.lookupAll(".tab-close-button");

        for (final Node node : nodes) {
            node.setUserData(node.getOnMouseReleased());

            node.setOnMouseReleased(new EventHandler<MouseEvent>() {
                @Override
                public void handle(MouseEvent arg0) {
                    boolean removeTab = false; // prompt the user

                    if (removeTab) {
                        ((EventHandler<MouseEvent>) node.getUserData()).handle(arg0);
                    }
                }
            });
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-22T00:38:01.387

改为，`onMousePressed`而不是`setOnMouseReleased`，

并且关闭触发器`onMousePressed`代替`OnMouseReleased`.

# visual-studio-2010 - VS2010中多个URL，一个网站

> ID：13538233
> 
> 赞同：3
> 
> 时间：2012-11-24T04:21:29.907
> 
> 标签：visual-studio-2010, iis, ssl

我的生产网站上有一个错误。人们从一个域进来，设置了一个 cookie，但后来（结帐时），代码重定向到 SSL 后面的主 URL，cookie 丢失了。我有一个修复策略（URL 字符串），但我需要设置我的开发机器，以便它使用 2 个 URL 来重新创建要验证的条件。

有谁知道我如何配置 Casini 和 IIS express 来加载我的项目，或者使用 IIS express 配置多个 URL？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T11:02:39.463

您可以将多个 URL 分配给您的应用程序，修改 IISExpress\config 中的 applicationhost.config 文件。您必须小心，使用 IIS 正在使用的配置文件（因为 Visual Studio 可能为 IIS 使用不同的配置文件，我的它在用户/文档中）。找到文件后，转到 <sites> 部分并找到您的应用程序。然后转到 <bindings> 部分并添加您想要的所有 url。希望这对你有用。

# c# - 如何测试 AD 用户是否是本地组的成员

> ID：13538234
> 
> 赞同：1
> 
> 时间：2012-11-24T04:21:32.960
> 
> 标签：c#, active-directory, active-directory-group

IT 部门创建新 AD 组的审批流程非常繁琐，因此我的任务是寻找使用本地组来控制访问的方法。

在 Windows Server 2008 R2 上，我创建了一个本地组，并添加了几个其他 AD 组以及一些 AD 用户帐户作为成员。

我需要编写一些 C# 代码来确定特定的 AD 用户是否属于特定的本地组，其中本地组包含 AD 组和 AD 用户的混合。AD 组在某些情况下可能包含嵌套的 AD 组。

**更新**

当域用户帐户直接是本地组的成员时，下面的代码有效，但当本地组包含域用户所属的域组时，它不起作用。

```
public static void Test()
{
    // returns true, domain user account user623 is in domain group ...
    bool b1 = UserIsInDomainGroup("user623", "apc.app.cartopac.surfaceland");

    // returns true - user623 is directly in local.groupa
    bool b2 = UserIsInlocalGroup("user623", "local.groupa");

    // returns false, even though apc.app.cartopac.surfaceland is in local.groupb
    bool b3 = UserIsInlocalGroup("user623", "local.groupb");
}

public static bool UserIsInDomainGroup(string userName, string grpName)
{
    var domainContext = new PrincipalContext(ContextType.Domain, "contoso");
    var user = UserPrincipal.FindByIdentity(domainContext, userName);
    return user.IsMemberOf(domainContext, IdentityType.Name, grpName);
}

public static bool UserIsInlocalGroup(string userName, string localgrpName)
{
    var machineContext = new PrincipalContext(ContextType.Machine);
    var grpPrincipal = GroupPrincipal.FindByIdentity(machineContext, IdentityType.Name, localgrpName);
    var domainContext = new PrincipalContext(ContextType.Domain, "contoso");
    var user = UserPrincipal.FindByIdentity(domainContext, userName);
    return user.IsMemberOf(grpPrincipal);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T08:36:26.600

您的示例工作正常假设您将 UserPrincipalName 而不是 sAMAccountName 传递给该方法，并且该 contoso 仅在示例中隐藏..

编辑：

试试[这个](https://stackoverflow.com/a/4366162/1027551)。它检查用户是否是成员，即使通过组嵌套：

```
bool b1 = IsInGroup("sAMAccountName", "LOCALGROUPNAME");

    static bool IsInGroup(string user, string group)
    {
      using (WindowsIdentity identity = new WindowsIdentity(user))
      {
        WindowsPrincipal principal = new WindowsPrincipal(identity);
        return principal.IsInRole(group);
      }
    } 
```

# c# - 在 Windows 8 应用程序中下载图像后设置图像的高度？

> ID：13538241
> 
> 赞同：0
> 
> 时间：2012-11-24T04:23:17.363
> 
> 标签：c#, windows-8, microsoft-metro, winrt-xaml

我正在尝试在 Windows 8 应用程序中动态设置 Image 元素的高度。为此，我需要知道源图像的高度。通常这可以通过调用 BitmapImage.PixelHeight 或 BitmapImage.DecodePixelHeight 来访问，但由于图像尚未下载，它返回 0。我可以像这样设置回调：

```
image = new BitmapImage(new Uri(link.Url));
System.Diagnostics.Debug.WriteLine("height :" + image.PixelHeight) // returns 0
instance.Source = image;
instance.Height = image.PixelHeight // what I'd like to do, but cant.
image.DownloadProgress += image_DownloadProgress;

static void image_DownloadProgress(object sender, DownloadProgressEventArgs e)
{
    BitmapImage i = (BitmapImage)sender;

    // returns the actual height I need
    System.Diagnostics.Debug.WriteLine("post-download height: " + i.PixelHeight); 
} 
```

我在那个回调中得到了我需要的正确像素高度。问题是我需要将它传递给要添加该图像的用户控件的实例。有没有一种方法可以a.）将实例传递给回调的参数，以便我可以在那里修改它，或者b.）以某种方式在没有回调的情况下异步获取高度？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T05:28:19.473

我最终解决此类问题的方法是创建一个自定义用户控件来显示图像，它会在加载图像时自行调整大小。

这是我的xml：

```
<UserControl
    x:Name="userControl"
    x:Class="BoardsForWindows.Controls.BBPostImage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:BoardsForWindows.Controls"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d"
    d:DesignHeight="300"
    d:DesignWidth="400">

    <StackPanel Orientation="Vertical">
        <Image x:Name="imageViewer" HorizontalAlignment="Stretch" VerticalAlignment="Stretch"/>
    </StackPanel> 
</UserControl> 
```

这是我的 .xaml.cs（使用已删除的语句）：

```
namespace BoardsForWindows.Controls
{
    public sealed partial class BBPostImage : UserControl
    {
        private BitmapImage bitmapImage;

        public string Source
        {
            get { return (string)GetValue(SourceProperty); }
            set { SetValue(SourceProperty, value); }
        }

        // Using a DependencyProperty as the backing store for Source.  This enables animation, styling, binding, etc...
        public static readonly DependencyProperty SourceProperty =
            DependencyProperty.Register("Source", typeof(string), typeof(BBPostImage), new PropertyMetadata(null, SourceChanged));

        public BBPostImage()
        {
            this.InitializeComponent();
        }

        public static void SourceChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)
        {
            BBPostImage image = d as BBPostImage;
            if (image == null)
            {
                return;
            }

            string url = (e.NewValue ?? string.Empty).ToString();
            Uri uri = null;
            if (String.IsNullOrEmpty(url) || !Uri.TryCreate(url, UriKind.Absolute, out uri))
            {
                image.imageViewer.Width = 200;
                image.imageViewer.Height = 40;
                image.imageViewer.Source = null;
                return;
            }

            image.bitmapImage = new BitmapImage();
            image.bitmapImage.ImageFailed += image.bitmapImage_ImageFailed;
            image.bitmapImage.ImageOpened += image.bitmapImage_ImageOpened;
            image.bitmapImage.UriSource = uri;

            image.imageViewer.Source = null;
            image.imageViewer.Source = image.bitmapImage;
        }

        void bitmapImage_ImageOpened(object sender, RoutedEventArgs e)
        {
            Width = bitmapImage.PixelWidth;
            Height = bitmapImage.PixelHeight;
        }

        void bitmapImage_ImageFailed(object sender, ExceptionRoutedEventArgs e)
        {
            // TODO
        }
    }
} 
```

# c - 非套接字或错误文件描述符上的套接字操作

> ID：13538243
> 
> 赞同：0
> 
> 时间：2012-11-24T04:23:25.103
> 
> 标签：c, sockets

我正在编写一个 pthread 服务器，它接收来自客户端的请求并将它们发送回一堆 .ppm 文件。一切似乎都很顺利，但有时当我只连接了 1 个客户端时，当尝试从文件描述符（文件）中读取时，它会显示错误的文件描述符。这没有意义，因为我的 int fd 不是 -1，而且该文件肯定存在。其他时候，我收到此“非套接字上的套接字操作”错误。这很奇怪，因为其他时候，它不会给我这个错误并且一切正常。

当尝试连接多个客户端时，由于某种原因，它只会正确发送给一个客户端，然后另一个客户端会收到错误的文件描述符或“非套接字”错误，即使两个线程都在处理相同的消息并执行相同的例程。有人知道为什么吗？这是给我该错误的代码：

```
 while(mqueue.head != mqueue.tail && count < dis_m){
        printf("Sending to client %s: %s\n", pointer->id, pointer->message);
        int fd;
        fd = open(pointer->message,  O_RDONLY);

        char buf[58368];
        int bytesRead;
        printf("This is fd %d\n", fd);
        bytesRead=read(fd,buf,58368);

        send(pointer->socket,buf,bytesRead,0);

        perror("Error:\n");
        fflush(stdout);
        close(fd);

        mqueue.mcount--;
        mqueue.head = mqueue.head->next;
        free(pointer->message);
        free(pointer);
        pointer = mqueue.head;
        count++;

    }

    printf("Sending %s\n", pointer->message);
    int fd;
    fd = open(pointer->message,  O_RDONLY);
    printf("This is fd %d\n", fd);
    printf("I am hhere2\n");
    char buf[58368];
    int bytesRead;

    bytesRead=read(fd,buf,58368);

    send(pointer->socket,buf,bytesRead,0);

    perror("Error:\n");
    close(fd);
    mqueue.mcount--;

    if(mqueue.head != mqueue.tail){
        mqueue.head = mqueue.head->next;
    }
    else{

        mqueue.head->next = malloc(sizeof(struct message));
        mqueue.head = mqueue.head->next;
        mqueue.head->next = malloc(sizeof(struct message));
        mqueue.tail = mqueue.head->next;
        mqueue.head->message = NULL;
    }

    free(pointer->message);
    free(pointer);

    pthread_mutex_unlock(&numm);
    pthread_mutex_unlock(&circ);
    pthread_mutex_unlock(&slots); 
```

两个线程的消息是相同的，格式为 ./path/imageXX.ppm，其中 XX 是应该发送给客户端的数字。每个图像的文件大小为 58368 字节。

有时，此代码在读取时挂起，并停止执行。我也不知道这会是什么，因为文件描述符返回为有效。

先谢谢了。

编辑：

这是一些示例输出：

```
Sending to client a: ./support/images/sw90.ppm
This is fd 4
Error:
: Socket operation on non-socket
Sending to client a: ./support/images/sw91.ppm
This is fd 4
Error:
: Socket operation on non-socket
Sending ./support/images/sw92.ppm
This is fd 4
I am hhere2
Error:
: Socket operation on non-socket
My dispatcher has defeated evil 
```

带有 2 个客户端的示例（首先为客户端 b 提供服务）发送到客户端 b：./support/images/sw87.ppm 这是 fd 6 错误：：成功发送到客户端 b：./support/images/sw88.ppm 这是 fd 6 错误：：成功发送到客户端 b：./support/images/sw89.ppm 这是 fd 6 错误：：成功

```
This is fd 6
Error:
: Bad file descriptor
Sending to client a: ./support/images/sw85.ppm
This is fd 6
Error: 
```

如您所见，在这种情况下首先服务的人可以打开文件，但不能打开第二个人。

编辑2：

完整的代码。对不起，它很长而且格式很糟糕。

```
 #include <netinet/in.h>
        #include <netinet/in.h>
        #include <netdb.h>
        #include <arpa/inet.h>
        #include <sys/types.h>
        #include <sys/socket.h>
        #include <errno.h>
        #include <stdio.h>
        #include <unistd.h>
        #include <pthread.h>
        #include <stdlib.h>
        #include <string.h>
        #include <sys/types.h>
        #include <sys/stat.h>
        #include <fcntl.h>
        #include "ring.h"

        /*
        Version 1

        Here is what is implemented so far:

        The threads are created from the arguments specified (number of threads that is)
        The server will lock and update variables based on how many clients are in the system                    and such.

        The socket that is opened when a new client connects, must be passed to the threads.  To             do this, we need some sort of global array.  I did
        this by specifying an int client and main_pool_busy, and two pointers poolsockets and     nonpoolsockets.  

        My thinking on this was that when a new client enters the system, the server thread     increments the variable client.  When a thread is finished with this client (after it sends         it the data), the thread will decrement client and close the socket.  HTTP servers act this     way sometimes (they terminate the socket as soon as one transmission is sent). *Note down at     bottom  

    After the server portion increments the client counter, we must open up a new socket (denoted by new_sd) and get this value to the appropriate thread.
    To do this, I created global array poolsockets, which will hold all the socket descriptors for our pooled threads.  The server portion gets the new socket descriptor, and places the value in the first spot of the array that has a 0\.  We only place a value in this array IF:

        1\. The variable main_pool_busy < worknum (If we have more clients in the system than in our pool, it doesn't mean we should always create a new thread.

    At the end of this, the server signals on the condition variable clientin that a new client has arrived.  

    In our pooled thread, we then must walk this array and check the array until we hit our first non-zero value. This is the socket we will give to that thread.  The thread then changes the array to have a zero here.  

    What if our all threads in our pool our busy?

    If this is the case, then we will know it because our threads in this pool will increment main_pool_busy by one when they are working on a request and decrement it when they are done.  If main_pool_busy >= worknum, then we must dynamically create a new thread.  Then, we must realloc the size of our 
    nonpoolsockets array by 1 int.  We then add the new socket descriptor to our pool.  

    Here's what we need to figure out:

    NOTE* Each worker should generate 100 messages which specify the worker thread ID, client socket descriptor and a copy of the client message. Additionally, each message should include a message number, starting from 0 and incrementing for each subsequent message sent to the same client.

    I don't know how to keep track of how many messages were to the same client.  Maybe we shouldn't close the socket descriptor, but rather keep an array of structs for each socket that includes how many messages they have been sent.  Then, the server adds the struct, the threads remove it, then the threads add it back once they've serviced one request (unless the count is 100).  

    -------------------------------------------------------------
    CHANGES

    Version 1

----------
NONE: this is the first version.  
*/

#define MAXSLOTS 30
#define dis_m 15 //problems with dis_m ==1

//Function prototypes
void inc_clients();
void init_mutex_stuff(pthread_t*, pthread_t*);
void *threadpool(void *);
void server(int);
void add_to_socket_pool(int);
void inc_busy();
void dec_busy();
void *dispatcher();
void create_message(long, int, int, char *, char *);
void init_ring();
void add_to_ring(char *, char *, int, int, int);
int socket_from_string(char *);
void add_to_head(char *);
void add_to_tail(char *);
struct message * reorder(struct message *, struct message *, int);
int get_threadid(char *);
void delete_socket_messages(int);
struct message * merge(struct message *, struct message *, int);
int get_request(char *, char *, char*);
/////////////////////

//Global mutexes and condition variables
pthread_mutex_t startservice;
pthread_mutex_t numclients;
pthread_mutex_t pool_sockets;
pthread_mutex_t nonpool_sockets;
pthread_mutex_t m_pool_busy;
pthread_mutex_t slots;
pthread_mutex_t numm;
pthread_mutex_t circ;

pthread_cond_t clientin;
pthread_cond_t m;
///////////////////////////////////////

//Global variables
int clients;
int main_pool_busy;
int * poolsockets, nonpoolsockets;
int worknum;
struct ring mqueue;
///////////////////////////////////////

int main(int argc, char ** argv){

    //error handling if not enough arguments to program 
    if(argc != 3){
        printf("Not enough arguments to server: ./server portnum NumThreadsinPool\n");
        _exit(-1);
    }
    //Convert arguments from strings to integer values

    int port = atoi(argv[1]);
    worknum = atoi(argv[2]);

    //Start server portion  
    server(port);

}
///////////////////////////////////////////////////////////////////////////////////////////////
//The listen server thread/////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////////////////////
void server(int port){

  int sd, new_sd;
  struct sockaddr_in name, cli_name;
  int sock_opt_val = 1;
  int cli_len;

  pthread_t threads[worknum]; //create our pthread id array
  pthread_t dis[1]; //create our dispatcher array (necessary to create thread)

  init_mutex_stuff(threads, dis); //initialize mutexes and stuff

//Server setup /////////////////////////////////////////////////////// 
  if ((sd = socket (AF_INET, SOCK_STREAM, 0)) < 0) {
    perror("(servConn): socket() error");
    _exit (-1);
  }

  if (setsockopt (sd, SOL_SOCKET, SO_REUSEADDR, (char *) &sock_opt_val,
          sizeof(sock_opt_val)) < 0) {
    perror ("(servConn): Failed to set SO_REUSEADDR on INET socket");
    _exit (-1);
  }

  name.sin_family = AF_INET;
  name.sin_port = htons (port);
  name.sin_addr.s_addr = htonl(INADDR_ANY);

  if (bind (sd, (struct sockaddr *)&name, sizeof(name)) < 0) {
    perror ("(servConn): bind() error");
    _exit (-1);
  }

  listen (sd, 5);
//End of server Setup //////////////////////////////////////////////////

  for (;;) {

      cli_len = sizeof (cli_name);
      new_sd = accept (sd, (struct sockaddr *) &cli_name, &cli_len);
      printf ("Assigning new socket descriptor:  %d\n", new_sd);
      inc_clients(); //New client has come in, increment clients
      add_to_socket_pool(new_sd); //Add client to the pool of sockets

      if (new_sd < 0) {
    perror ("(servConn): accept() error");
    _exit (-1);
      }

  }

    pthread_exit(NULL); //Quit
}

//Adds the new socket to the array designated for pthreads in the pool
void add_to_socket_pool(int socket){

    pthread_mutex_lock(&m_pool_busy); //Lock so that we can check main_pool_busy
    int i;

    //If not all our main pool is busy, then allocate to one of them
    if(main_pool_busy < worknum){
        pthread_mutex_unlock(&m_pool_busy); //unlock busy, we no longer need to hold it
        pthread_mutex_lock(&pool_sockets); //Lock the socket pool array so that we can edit it without worry
        for(i = 0; i < worknum; i++){ //Find a poolsocket that is -1; then we should put the real socket there.  This value will be changed back to -1 when the thread grabs the sockfd
            if(poolsockets[i] == -1){
                poolsockets[i] = socket;
                pthread_mutex_unlock(&pool_sockets); //unlock our pool array, we don't need it anymore
                inc_busy(); //Incrememnt busy (locks the mutex itself)
                pthread_cond_signal(&clientin); //Signal first thread waiting on a client that a client needs to be serviced
                break;
            } 
        }

    }
    else{  //Dynamic thread creation goes here
    pthread_mutex_unlock(&m_pool_busy);
    }
}

//Increments the client number.  If client number goes over worknum, we must dynamically create new pthreads
void inc_clients(){

      pthread_mutex_lock(&numclients);
      clients++;
      pthread_mutex_unlock(&numclients);

}
//Increments busy
void inc_busy(){

    pthread_mutex_lock(&m_pool_busy);
    main_pool_busy++;
    pthread_mutex_unlock(&m_pool_busy); 

}

//Initialize all of our mutexes at the beginning and create our pthreads
  void init_mutex_stuff(pthread_t * threads, pthread_t * dis){

  pthread_mutex_init(&startservice, NULL);
  pthread_mutex_init(&numclients, NULL);
  pthread_mutex_init(&pool_sockets, NULL);
  pthread_mutex_init(&nonpool_sockets, NULL);
  pthread_mutex_init(&m_pool_busy, NULL);
  pthread_mutex_init(&circ, NULL);

   pthread_cond_init (&clientin, NULL);

   main_pool_busy = 0;

   poolsockets = malloc(sizeof(int)*worknum);

   int threadreturn;  //error checking variables

   long i = 0; //Loop and create pthreads 

   for(i; i < worknum; i++){
    threadreturn = pthread_create(&threads[i], NULL, threadpool, (void *) i);
        poolsockets[i] = -1; 
    if(threadreturn){
        perror("Thread pool created unsuccessfully");
        _exit(-1);
    }
  }
    pthread_create(&dis[0], NULL, dispatcher, NULL);

}

//////////////////////////////////////////////////////////////////////////////////////////
/////////Main pool routines
/////////////////////////////////////////////////////////////////////////////////////////

void dec_busy(){

    pthread_mutex_lock(&m_pool_busy);
    main_pool_busy--;
    pthread_mutex_unlock(&m_pool_busy); 

}

void dec_clients(){
      pthread_mutex_lock(&numclients);
      clients--;
      pthread_mutex_unlock(&numclients);

}

//This is what our threadpool pthreads will be running.
void *threadpool(void * threadid){

    long id = (long) threadid; //Id of this thread
    int i;
    int socket;
    int counter = 0;

    //Try and gain access to the next client that comes in and wait until server signals that a client as arrived

    while(1){   
        pthread_mutex_lock(&startservice); //lock start service (required for cond wait)
        pthread_cond_wait(&clientin, &startservice); //wait for signal from server that client exists
        pthread_mutex_unlock(&startservice); //unlock mutex.

        pthread_mutex_lock(&pool_sockets); //Lock the pool socket so we can get the socket fd unhindered/interrupted

    for(i = 0; i < worknum; i++){
        if(poolsockets[i] != -1){
            socket = poolsockets[i];
            poolsockets[i] = -1;
            pthread_mutex_unlock(&pool_sockets);
        }
    }
    printf("Thread #%d is past getting the socket\n", id);

    int incoming = 1;

    while(counter < 100 && incoming != 0){

        char buffer[512];
        bzero(buffer,512);
        int startcounter = 0;

        incoming = read(socket, buffer, 512);

        if(buffer[0] != 0){
            //client ID:priority:request:arguments
            char id[100];
            long prior;
            char request[100];
            char arg1[100];
            char message[100];
            char arg2[100];
            char * point;
            point = strtok(buffer, ":");
            strcpy(id, point);
            point = strtok(NULL, ":");
            prior = atoi(point);
            point = strtok(NULL, ":");
            strcpy(request, point);
            point = strtok(NULL, ":");
            strcpy(arg1, point);
            point = strtok(NULL, ":");
            if(point != NULL){
                strcpy(arg2, point);
            }

            int fd;
            if(strcmp(request, "start_movie") == 0){
                int count = 1;
                while(count <= 100){

                char temp[10];
                snprintf(temp, 50, "%d\0", count);

                strcpy(message, "./support/images/");

                strcat(message, arg1);

                strcat(message, temp);
                strcat(message, ".ppm");
                printf("This is message %s to %s\n", message, id);
                count++;
                add_to_ring(message, id, prior, counter, socket); //Adds our created message to the ring

                counter++;
                }
                printf("I'm out of the loop\n");
            }
            else if(strcmp(request, "seek_movie") == 0){
                int count = atoi(arg2);
                while(count <= 100){

                char temp[10];
                snprintf(temp, 10, "%d\0", count);

                strcpy(message, "./support/images/");

                strcat(message, arg1);

                strcat(message, temp);
                strcat(message, ".ppm");
                printf("This is message %s\n", message);
                count++;
                }

            }

            //create_message(id, socket, counter, buffer, message); //Creates our message from the input from the client. Stores it in buffer

        }
        else{
            delete_socket_messages(socket);
            break;
        }
    }   

        counter = 0; 
        close(socket);//Zero out counter again
    }
    dec_clients(); //client serviced, decrement clients
    dec_busy(); //thread finished, decrement busy
}

//Creates a message

void create_message(long threadid, int socket, int counter, char * buffer, char * message){

    snprintf(message, strlen(buffer)+15, "%d:%d:%d:%s", threadid, socket, counter, buffer);

}
//Gets the socket from the message string (maybe I should just pass in the socket to another method)
int socket_from_string(char * message){
    char * substr1 = strstr(message, ":");
    char * substr2 = substr1;
    substr2++;
    int occurance = strcspn(substr2, ":");
    char sock[10]; 
    strncpy(sock, substr2, occurance);
    return atoi(sock);

}
//Adds message to our ring buffer's head
void add_to_head(char * message){
    printf("Adding to head of ring\n");
    mqueue.head->message = malloc(strlen(message)+1); //Allocate space for message
    strcpy(mqueue.head->message, message); //copy bytes into allocated space

}
//Adds our message to our ring buffer's tail
void add_to_tail(char * message){
    printf("Adding to tail of ring\n");
    mqueue.tail->message = malloc(strlen(message)+1); //allocate space for message
    strcpy(mqueue.tail->message, message); //copy bytes into allocated space
    mqueue.tail->next = malloc(sizeof(struct message)); //allocate space for the next message struct
}
//Adds a message to our ring
void add_to_ring(char * message, char * id, int prior, int mnum, int socket){
    //printf("This is message %s:" , message);

    pthread_mutex_lock(&circ); //Lock the ring buffer   
    pthread_mutex_lock(&numm); //Lock the message count (will need this to make sure we can't fill the buffer over the max slots)

    if(mqueue.head->message == NULL){
        add_to_head(message); //Adds it to head
        mqueue.head->socket = socket; //Set message socket
        mqueue.head->priority = prior; //Set its priority (thread id)
        mqueue.head->mnum = mnum; //Set its message number (used for sorting)
        mqueue.head->id = malloc(sizeof(id));
        strcpy(mqueue.head->id, id);
    }
    else if(mqueue.tail->message == NULL){ //This is the problem for dis_m 1 I'm pretty sure
        add_to_tail(message);
        mqueue.tail->socket = socket;
        mqueue.tail->priority = prior;
        mqueue.tail->mnum = mnum;
        mqueue.tail->id = malloc(sizeof(id));
        strcpy(mqueue.tail->id, id);
    }
    else{
        mqueue.tail->next = malloc(sizeof(struct message));
        mqueue.tail = mqueue.tail->next;
        add_to_tail(message);
        mqueue.tail->socket = socket;
        mqueue.tail->priority = prior;
        mqueue.tail->mnum = mnum;
        mqueue.tail->id = malloc(sizeof(id));
        strcpy(mqueue.tail->id, id);

    }

    mqueue.mcount++;
    pthread_mutex_unlock(&circ);

    if(mqueue.mcount >= dis_m){
        pthread_mutex_unlock(&numm);
        pthread_cond_signal(&m);
    }
    else{
        pthread_mutex_unlock(&numm);
    }

    printf("out of add to ring\n");
    fflush(stdout);
}

//////////////////////////////////
//Dispatcher routines
/////////////////////////////////

void *dispatcher(){

    init_ring();

    while(1){
        pthread_mutex_lock(&slots);
        pthread_cond_wait(&m, &slots);

        pthread_mutex_lock(&numm);
        pthread_mutex_lock(&circ);

        printf("Dispatcher to the rescue!\n");

        mqueue.head = reorder(mqueue.head, mqueue.tail, mqueue.mcount);
        //printf("This is the head %s\n", mqueue.head->message);
        //printf("This is the tail %s\n", mqueue.head->message);
        fflush(stdout);
        struct message * pointer = mqueue.head;
        int count = 0;

        while(mqueue.head != mqueue.tail && count < dis_m){
            printf("Sending to client %s: %s\n", pointer->id, pointer->message);
            int fd;
            fd = open(pointer->message,  O_RDONLY);

            char buf[58368];
            int bytesRead;
            printf("This is fd %d\n", fd);
            bytesRead=read(fd,buf,58368);

            send(pointer->socket,buf,bytesRead,0);

            perror("Error:\n");
            fflush(stdout);
            close(fd);

            mqueue.mcount--;
            mqueue.head = mqueue.head->next;
            free(pointer->message);
            free(pointer);
            pointer = mqueue.head;
            count++;

        }

        printf("Sending %s\n", pointer->message);
        int fd;
        fd = open(pointer->message,  O_RDONLY);
        printf("This is fd %d\n", fd);
        printf("I am hhere2\n");
        char buf[58368];
        int bytesRead;

        bytesRead=read(fd,buf,58368);

        send(pointer->socket,buf,bytesRead,0);

        perror("Error:\n");
        close(fd);
        mqueue.mcount--;

        if(mqueue.head != mqueue.tail){
            mqueue.head = mqueue.head->next;
        }
        else{

            mqueue.head->next = malloc(sizeof(struct message));
            mqueue.head = mqueue.head->next;
            mqueue.head->next = malloc(sizeof(struct message));
            mqueue.tail = mqueue.head->next;
            mqueue.head->message = NULL;
        }

        free(pointer->message);
        free(pointer);

        pthread_mutex_unlock(&numm);
        pthread_mutex_unlock(&circ);
        pthread_mutex_unlock(&slots);
        printf("My dispatcher has defeated evil\n");

    }

}

void init_ring(){

    mqueue.head = malloc(sizeof(struct message));
    mqueue.head->next = malloc(sizeof(struct message));
    mqueue.tail = mqueue.head->next;
    mqueue.mcount = 0;
}

struct message * reorder(struct message * begin, struct message * end, int num){
    //printf("I am reordering for size %d\n", num);
    fflush(stdout);
    int i;
    if(num == 1){
        //printf("Begin: %s\n", begin->message);
        begin->next = NULL;
        return begin;
    }
    else{
        struct message * left = begin;
        struct message * right;
        int middle = num/2;

        for(i = 1; i < middle; i++){
            left = left->next;
        }
        right = left -> next;
        left -> next = NULL;

        //printf("Begin: %s\nLeft: %s\nright: %s\nend:%s\n", begin->message, left->message, right->message, end->message);
        left = reorder(begin, left, middle);
        if(num%2 != 0){
        right = reorder(right, end, middle+1);
        }
        else{
            right = reorder(right, end, middle);
        }
        return merge(left, right, num);

    }

}

struct message * merge(struct message * left, struct message * right, int num){
    //printf("I am merginging! left: %s %d, right: %s %dnum: %d\n", left->message,left->priority, right->message, right->priority, num);
    struct message * start, * point;
    int lenL= 0;
    int lenR = 0;
    int flagL = 0;
    int flagR = 0;
    int count = 0;
    int middle1 = num/2;
    int middle2;
    if(num%2 != 0){
        middle2 = middle1+1;
    }
    else{
        middle2 = middle1;
    }

    while(lenL < middle1 && lenR < middle2){
        count++;
        //printf("In here for count %d\n", count);

        if(lenL == 0 && lenR == 0){

            if(left->priority < right->priority){

                start = left; //Set the start point
                point = left; //set our enum;

                left = left->next; //move the left pointer
                point->next = NULL; //Set the next node to NULL
                lenL++;
            }
            else if(left->priority > right->priority){
                start = right;
                point = right;
                right = right->next;
                point->next = NULL;
                lenR++;
            }
            else{
                if(left->mnum < right->mnum){
                    ////printf("This is where we are\n");
                    start = left; //Set the start point
                    point = left; //set our enum;
                    left = left->next; //move the left pointer
                    point->next = NULL; //Set the next node to NULL
                    lenL++;

                }
                else{
                    start = right;
                    point = right;
                    right = right->next;
                    point->next = NULL;
                    lenR++;
                }

            }

        }
        else{
            if(left->priority < right->priority){

                point->next = left;
                left = left->next; //move the left pointer
                point = point->next;
                point->next = NULL; //Set the next node to NULL
                lenL++;
            }
            else if(left->priority > right->priority){
                point->next = right;
                right = right->next;
                point = point->next;
                point->next = NULL;
                lenR++;
            }
            else{
                if(left->mnum < right->mnum){
                    point->next = left; //set our enum;
                    left = left->next;
                    point = point->next;//move the left pointer
                    point->next = NULL; //Set the next node to NULL
                    lenL++;

                }
                else{
                    point->next = right;
                    right = right->next;
                    point = point->next;
                    point->next = NULL;
                    lenR++;
                }

            }

        }

        if(lenL == middle1){
            flagL = 1;
            break;
        }
        if(lenR == middle2){
            flagR = 1;
            break;
        }

    }

    if(flagL == 1){
        point->next = right;
        point = point->next;
        for(lenR; lenR< middle2-1; lenR++){
            point = point->next;
        }
        point->next = NULL;
        mqueue.tail = point;
    }
    else{
        point->next = left;
        point = point->next;
            for(lenL; lenL< middle1-1; lenL++){
                point = point->next;
            }
            point->next = NULL;
            mqueue.tail = point;
        }
        //printf("This is the start %s\n", start->message);
        //printf("This is mqueue.tail %s\n", mqueue.tail->message);
        return start;

    }   

    void delete_socket_messages(int a){

    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T05:00:45.157

`perror()`除非您刚刚收到错误指示，否则不要打电话。例如：

```
 int fd;
    fd = open(pointer->message,  O_RDONLY); 
```

使用前应检查`fd`；打印它只是临时替代品。

```
 char buf[58368];
    int bytesRead;
    printf("This is fd %d\n", fd);
    bytesRead=read(fd,buf,58368); 
```

至少你已经从 中获取了值`read()`，但是你应该在使用它之前检查它。

```
 send(pointer->socket,buf,bytesRead,0); 
```

您需要检查是否`send()`成功。您可能还想打印 的值`pointer->socket`，只是为了看看它的值是多少。它应该是一个文件描述符（小的正整数）。

```
 perror("Error:\n"); 
```

除非您知道失败，*否则*您不想打电话。该变量永远不会被系统库设置为 0；它可以包含任何值。如果必须调用它，请在调用之前设置。`perror()``send()``errno``errno = 0;``send()`

但是，`errno`即使没有出现任何问题，您也可能会出错。例如，在 Solaris 上，您可以`ENOTTY`在`errno`成功写入文件后进入（因为文件不是 a`tty`并且如果引用 a 的文件描述符`tty`不成功，则该操作会做一些有用的操作，但整体操作成功） .

* * *

您可能还会注意到：

```
//Function prototypes
void inc_clients(); 
```

不是函数原型；它只是一个函数声明，即有一个被调用的函数`inc_clients()`不返回任何值，并且采用未指定（但固定）数量的未知和未指定类型的参数。它不能是可变参数函数；您必须在这些范围内拥有适当的原型（因此，出于所有实际目的，`<stdio.h>`如果您使用`printf()`or`scanf()`或他们的亲属，则必须包括在内）。

```
//Function prototypes
void inc_clients(void); 
```

那是一个原型；这表示该函数不接受任何参数并且不返回任何值（因此必须严格调用它以产生副作用）。

请注意，C++ 在这方面与 C 不同；您的原始声明 no`(void)`等同于带有 . 的声明`(void)`。

# asp.net - 在 ASP.NET 中将 Querystring 值转换为 XML 标记的最佳方法是什么

> ID：13538244
> 
> 赞同：1
> 
> 时间：2012-11-24T04:23:59.937
> 
> 标签：asp.net, xml

我有一个查询字符串值。查询字符串是“a=1&b=2&c=3”我想把它转换成<Qurystring><a>1<b>2</b><c>3</c>”</Querystring>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T04:56:05.617

**详细信息：**这是您问题的解决方案。如果能解决您的问题请打勾

```
protected void Page_Load(object sender, EventArgs e)
{
    CreateXML();
}

public void CreateXML()
{
    // Get query strings
    string a = Request.QueryString["a"];
    string b = Request.QueryString["b"];
    string c = Request.QueryString["c"];

    if (a != null && b != null && c != null)
    {
        string directoryPath = Server.MapPath("~/XMLFiles/");

        string fileName = "QueryString.xml";

        if (!Directory.Exists(directoryPath))
        {
            Directory.CreateDirectory(directoryPath);
        }

        //Start writer
        XmlTextWriter writer = new XmlTextWriter(directoryPath + fileName, System.Text.Encoding.UTF8);

        //Start XM DOcument
        writer.WriteStartDocument(true);
        writer.Formatting = Formatting.Indented;
        writer.Indentation = 2;

        //ROOT Element
        writer.WriteStartElement("Querystring");

        //call create nodes method
        createNode(a, b, c, writer);
        writer.WriteEndElement();
        //End XML Document
        writer.WriteEndDocument();
        //Close writer
        writer.Close();
    }
}

private void createNode(string a, string b, string c,  XmlTextWriter writer)
{
    //a
    writer.WriteStartElement("a");
    writer.WriteString(a);
    writer.WriteEndElement();

    //b
    writer.WriteStartElement("b");
    writer.WriteString(b);
    writer.WriteEndElement();

    //c
    writer.WriteStartElement("c");
    writer.WriteString(c);
    writer.WriteEndElement();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T05:27:55.480

我使用 XDocument 得到了答案。

XDocument doc = XDocument.Load(Server.MapPath("xmlFile.xml"));

XElement xmlTree = new XElement("Parent");

```
 foreach (String key in Request.Form)
            {
                xmlTree.Add( new XElement(key, Request.Form[key]));

            }
            xmlTree.Save("xmlFile.xml"); 
```

# android - 是否可以在同一个系统中同时安装android和mono for android？

> ID：13538252
> 
> 赞同：2
> 
> 时间：2012-11-24T04:25:47.897
> 
> 标签：android, xamarin.android

我已经在我的窗口 7 的系统中安装了 android sdk 和 eclipse IDE，并且想在我的系统中安装用于 android 开发的 mono。但是在安装了用于 android 开发的 mono 之后，我在 eclipse 中的 android 应用程序没有运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T23:06:52.160

是的 - 两者都应该运行良好。

Mono for android 位于 android sdk 之上，但不修改它。

去年我一直都跑得很好。

无论您的 Eclipse 安装有什么问题，您都可以通过发布您所看到的错误的具体细节来解决。

# java - 在 Java 中是否可以使用自定义类从 java.lang 中隐藏类？

> ID：13538253
> 
> 赞同：1
> 
> 时间：2012-11-24T04:25:52.697
> 
> 标签：java

在 Java 中是否可以使用自定义类从平台隐藏类？例如创建自定义 java.lang.String 或自定义 java.lang.StringBuffer？我之所以问，是因为我最近发现 C# /nostdlib 中有一个选项允许您重新定义整个 System 命名空间，我想知道 Java 是否有类似的东西。

请注意，C# 的 /nostdlib 是一个编译器选项，而不是在运行时考虑的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T04:40:38.313

您可以修改标准库或替换您自己的标准库以供个人使用，但 Oracle 不支持这一点，并且不允许您将修改后的版本分发给其他人。有各种命令行和配置选项可以告诉 JVM 在哪里寻找类。替换引导类更难，但它是可能的。

请注意，完全从头开始创建自己的版本会很困难，因为有几个类（至少）`Object`与`Class`JVM 实现紧密相关。为简单起见，您可能希望保持所有使用本机代码的类相同。

请注意，这与类 Shadowing 不同，后者是一个纯粹的编译时概念，发生在多个标识符冲突时，通常是由于导入（`java.lang.*`隐式导入，您对此无能为力）。这些冲突通常通过静默使用其中一种可能性或根据情况引发编译错误来解决（有关详细信息，请参阅 JLS）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T05:37:05.787

为了替换 java.lang 类或其他一些“系统”类，您必须修改引导类路径。如果您从命令行运行 Java，这很容易完成，但如果您在某种“环境”中运行它，则可能不允许您进行更改。

此外，许多 java.lang 等类都有本地方法实现，您必须提供自己的替代方法或以某种方式安排重用现有实现。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-24T09:48:01.820

您可以将自己的类用于库类。开始时你可以定义一个`-bootclasspath`来定义你自己的类库。

这不是一件容易的事，因为某些类与正在运行的 VM 紧密绑定，例如 class `String`。对于这种情况，您必须查看 JLS。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-24T08:20:42.023

Sun/Oracle 不允许 JSE/JDK 的许可这样做。然而，我最近了解到，[Groovy](http://groovy.codehaus.org/)可以做一些令人惊奇的事情，比如添加方法或覆盖 java.lang.* 包的方法。

Groovy 基于 Java/JVM，因此您可以轻松地将它们组合到一个应用程序中。

# c - 铸造结构如何工作？

> ID：13538257
> 
> 赞同：1
> 
> 时间：2012-11-24T04:26:19.360
> 
> 标签：c, casting, struct

我现在了解套接字，我看到有两个 struct Sockaddr 和 sockaddrin。

该指南说要在结构中包含 8 个字符的 char 以将一个结构与另一个结构进行比较我不明白它的工作如何你能解释我吗？

它就像将int转换为char [2]？

它如何与结构一起工作？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T05:00:30.217

SOCKADDR 是一个通用结构，它包含一个 ADDRESS_FAMILY 字段，然后在该字段之后包含 14 个字节（类型为 char）。根据 sin_family 字段（ADDRESS_FAMILY）的值，后面的 14 个字节会有不同的解释。

当 sin_family 值等于 AF_INET 时，那么 SOCKADDR 结构实际上是一个 SOCKADDR_IN 结构，这只是意味着这 14 个字节真的应该解释为：

sin_port 2 个字节 sin_addr 4 个字节 8 个未使用但必须存在的填充字节以使其与 SOCKADDR 结构的大小相同。

因此，如果您有一个指向 SOCKADDR 的指针，并且您检查了 sin_family 字段并且它等于 AF_INET，那么您可以将指针转换为指向 SOCKADDR_IN 的指针并以这种方式访问​​这些字段。

# process - 进程/informix 的 CPU 使用率高

> ID：13538258
> 
> 赞同：1
> 
> 时间：2012-11-24T04:26:22.017
> 
> 标签：process, load, cpu, informix

我在生产环境中遇到了我的流程问题，我也能够在我的开发环境中模拟这个问题。

该进程有 5 个线程，其中线程 3 和 4 是高度活跃的。`Thread 4`是对消息进行排队的生产者，`Thread 3`也是对消息进行出队的消费者。两个线程都是数据库密集型的。

**问题**

当进程运行时，`top`输出显示此进程和 oninit(Informix) 的 cpu 使用率很高。Cpu 负载始终高于 4，这是危险的。这台机器只有 1 个 CPU 和 2 个虚拟 CPU。

所有数据库查询都以`committed read`隔离级别运行

**分析**

1.  `ps -eLo pid,ppid,lwp,nlwp,osz,rss,ruser,pcpu,stime,etime,args | grep <processname>`

此输出显示线程 3 和 4 的 CPU 使用率很高

1.  `onstat -g act -r 2`

此输出显示频繁的线程 3 和 4 查询。

考虑到以上所有事实，有什么办法可以减少 oninit & process 的 cpu 使用率和 cpu 负载

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T05:27:45.023

从表面上看，系统运行良好。您有两个数据库密集型线程，数据服务器可以很好地提供这些线程。两个线程显然都没有被挂断；数据服务器能够跟上工作量。如果您没有看到等待 I/O 或重要的分页活动等。如果您降低线程 3 和 4 的活动级别，您应该也会看到`oninit`不那么忙。

如果您担心数据库活动的数量，则需要查看线程对服务器要求的 SQL。是否准备好声明？统计数据是最新的吗？你能简化查询吗？您可以组合查询（在许多情况下与简化相反）？线程每秒请求多少个查询？

您确定 CPU 平均负载为 4 是个问题吗？我的 Mac（2.3 GHz Intel Core i7，16 GiB RAM）正在运行 8 个 BOINC 后台进程和几个 DBMS 和一个 Web 浏览器等，平均负载大致在 4 到 10 之间变化。它的表现非常好（但它与您的机器不同）。

# android - Java代码中的硬编码字符串与@string - Android

> ID：13538260
> 
> 赞同：22
> 
> 时间：2012-11-24T04:26:58.590
> 
> 标签：android, string, hardcode

我只是想知道`@string`在实际Java代码中使用而不是硬编码字符串的好处/开销是什么......例如：

```
// To get the string resource:
getActivity.setTitle(getString(R.string.my_string)); 
```

这是操作栏标题、动态创建的按钮文本等的最佳实践吗……还是我应该这样做：

```
// Hardcoded string
getActivity.setTitle("My String"); 
```

我知道第一种方式会有更多的开销。只是不确定最佳实践是什么。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-11-24T04:33:24.220

如果您不知道拥有该`@string`系统的实际意义，请阅读[本地化](http://developer.android.com/guide/topics/resources/localization.html)文档。它使您可以轻松地在应用程序中找到文本，然后再将其翻译。

**编辑** 感谢 Hippo 解决这个问题。

无论使用何种方法（Strings.xml 与编程方式），使用相同值的多个字符串似乎都没有任何相关的开销。根据 Oracle “所有文字字符串和字符串值的常量表达式都是实习的”，这意味着如果您再次使用该对象，则该对象将被重用而不是重新创建。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-11-24T04:57:06.510

将字符串硬编码到布局文件/代码中并不是一个好习惯。您应该将它们添加到字符串资源文件中，然后从您的布局中引用它们。

**原因：**

*   这允许您通过编辑您的 strings.xml 文件同时更新所有布局中相同单词的每次出现。
*   它对于支持多种语言也非常有用，因为单独的 strings.xml 文件可用于每种支持的语言。

正如[文档](http://developer.android.com/guide/topics/resources/localization.html)所说：

> 假设您的应用程序的默认语言是英语。还假设您希望将应用程序中的所有文本本地化为法语，并将应用程序中的大部分文本（除应用程序标题之外的所有内容）本地化为日语。在这种情况下，您可以创建三个备用 strings.xml 文件，每个文件都存储在特定于语言环境的资源目录中

我认为这些理由足以推荐去@String

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-24T04:33:23.630

这样，您就有了一个固定的位置来更改项目中的所有字符串。假设您在代码的 10 个不同位置使用了相同的字符串。如果你决定改变它怎么办？无需搜索它在项目中的所有使用位置，您只需更改一次，更改就会反映在项目中的任何地方。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-24T04:43:21.197

那么 strings.xml 必须被解析，不是吗？然后我认为硬编码对性能来说是最好的，尽管在运行时可能不明显。人们确实选择使用它，以便将所有字符串集中在一个位置，以防有翻译应用程序的计划。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-24T04:46:36.953

在 strings.xml 文件中设置字符串有很多好处；简而言之，它允许您在多个位置使用相同的字符串，如果您以后需要修改字符串，这很好。它还允许您以不同的语言显示相同的文本；对字符串进行硬编码并不能为您提供所有这些选项。
顺便说一句，您不需要将每个文本都放在 strings.XML 文件中；只有那些可能在应用程序中的多个地方使用的那些。
在 strings.xml 文件中放置字符串的一般规则如下：

*   它会在多个地方使用吗？
*   它会以多种语言使用吗？
*   它是动态的还是静态的？

我敢肯定还有其他原因，但这些是我知道的。

希望这会有所帮助。

# php - JS 文件在 Wordpress 中调用了两次

> ID：13538261
> 
> 赞同：1
> 
> 时间：2012-11-24T04:27:00.843
> 
> 标签：php, javascript, wordpress

我试图通过减少 WP 网站上的 JS 文件数量来减少请求数量。我成功地将大约 7 个 javascript 文件合并为一个 ( `site.js`)。现在，我正在使用一个有自己的 JS 文件 ( `pluginA.js`) 的插件，我想`pluginA.js`在该 site.js 中包含 ()。但是，如果我只是将 pluginA JS 内容复制到 site.js，然后将 location 更改为`/files/site.js`，则 firebug 的 NET 选项卡显示 site.js 被请求/调用了两次。我想这是由于`wp_enqueue_script`.

我怎样才能让它不调用 site.js 第二次，而只是查看已经加载的 site.js？也许有替代方案`wp_enqueue_script`？

插件的php文件：

```
add_action( 'wp_enqueue_scripts', 'testplugin_scripts');
    function testplugin_scripts() {
        /*global $testplugin_version; */
            $default_selector = 'li:has(ul) > a';
            $default_selector_leaf = 'li li li:not(:has(ul)) > a';
       wp_enqueue_scripts('test-plugin', site_url('/files/site.js', __FILE__), array('jquery'), $testplugin_version);
            $params = array(
                    'selector' => apply_filters('testplugin_selector', $default_selector),
                    'selector_leaf' => apply_filters('testplugin_selector_leaf', $default_selector_leaf)
            );
            wp_localize_script('test-plugin', 'testplugin_params', $params);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T04:43:05.570

如果将其单独包含或将其包含在您的 site.js 文件中之间的加载时间差异很小，那么我将不理会 plugin.js。唯一的原因是，如果您继续添加到您的 site.js，然后下载新版本的插件，您可能会遇到困难。作为补偿，我会使用 JS 压缩器，它可以显着减小 site.js 的大小，因此可能比简单地减少 HTTP 请求的数量提供更大的好处。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T05:01:26.740

解决方案（有点hacky）：不包含`site.js`，因此脚本只会被调用一次（来自插件）

# ios - 如何使用quartz2d/coregraphics绘制圆角三角形

> ID：13538262
> 
> 赞同：7
> 
> 时间：2012-11-24T04:27:01.743
> 
> 标签：ios, core-graphics

Aight 所以我想画一个像这样的三角形：

![圆角三角形](../Images/39e71dd8a6929ca34d6875ffe4a52c87.png)

目前我正在使用 CAShapeLayer 的组合并使用 UIBezierPath 创建路径（代码如下），然后将其应用为另一层的掩码（self.layer，因为我在 UIView 子类中，而不是设置 layerclass我这样做是为了保留初始层）

无论如何，代码：

```
_bezierPath = [[UIBezierPath bezierPath] retain];
#define COS30 0.86602540378
#define SIN30 0.5
[_bezierPath moveToPoint:(CGPoint){self.frame.size.width/2.f-r*SIN30,r*COS30}];
[_bezierPath addArcWithCenter:(CGPoint){self.frame.size.width/2.f,r*COS30*2.f} radius:r startAngle:2*M_PI/3.f endAngle:M_PI/3.f clockwise:YES];
[_bezierPath addLineToPoint:(CGPoint){self.frame.size.width-r*SIN30,self.frame.size.height-r*COS30}];
[_bezierPath addArcWithCenter:(CGPoint){self.frame.size.width-r*SIN30-r,self.frame.size.height-r*COS30} radius:r startAngle:0.f endAngle:-M_PI/3.f clockwise:YES];
[_bezierPath addLineToPoint:(CGPoint){r*SIN30,self.frame.size.height-r*COS30}];
[_bezierPath addArcWithCenter:(CGPoint){r*SIN30+r,self.frame.size.height-r*COS30} radius:r startAngle:4*M_PI/3.f endAngle:M_PI clockwise:YES];
[_bezierPath closePath];
CAShapeLayer *s = [CAShapeLayer layer];
s.frame = self.bounds;
s.path = _bezierPath.CGPath;
self.layer.mask = s;
self.layer.backgroundColor = [SLInsetButton backgroundColorForVariant:SLInsetButtonColorForSLGamePieceColor(_color)].CGColor; 
```

不幸的是结果不是我想要的，而是角落变成了小旋钮（好像它转动太多了）

提前致谢

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-20T09:49:38.607

一位才华横溢的朋友（如果你遇到他，John Heaton，他非常棒）让我想起了核心图形部署的 lineCap 和 lineJoin 属性。

某处：

```
#define border (10.f) 
```

在您的界面中：

```
@property (nonatomic, strong) UIBezierPath *bezierPath; 
```

在你的初始化中，创建一个像这样的短路径：

```
CGFloat inset = border / 2.f;
UIBezierPath *bezierPath = [UIBezierPath bezierPath];
[bezierPath moveToPoint:(CGPoint){ self.frame.size.width/2.f, inset }];
[bezierPath addLineToPoint:(CGPoint){ self.frame.size.width - inset, self.frame.size.height - inset }];
[bezierPath addLineToPoint:(CGPoint){ a, self.frame.size.height - a }];
[bezierPath closePath];

self.bezierPath = bezierPath; 
```

然后在您的`drawRect:`方法中执行以下操作：

```
CGContextRef c = UIGraphicsGetCurrentContext(), context = c;
CGColorRef col = [UIColor redColor].CGColor;
CGColorRef bcol = [UIColor redColor].CGColor;
CGContextSetFillColorWithColor(c, col);
CGContextSetStrokeColorWithColor(c, bcol);
CGContextSetLineWidth(c, border);
CGContextSetLineJoin(c, kCGLineJoinRound);
CGContextSetLineCap(c, kCGLineCapRound);
CGContextAddPath(c, self.bezierPath.CGPath);
CGContextStrokePath(c);
CGContextAddPath(c, self.bezierPath.CGPath);
CGContextFillPath(c); 
```

这将适当地为您提供三角形上的圆角，还可以选择具有边框或轮廓

# python - Python: copy of a variable

> ID：13538266
> 
> 赞同：13
> 
> 时间：2012-11-24T04:27:28.583
> 
> 标签：python, variables, copy

Is there a way in to make copy of a variable so that when the value changes of variable 'a' it copies itself to variable 'b'?

Example

```
a='hello'

b=a     #.copy()  or a function that will make a copy

a='bye'

# Is there a way to make 
# 'b' equal 'a' without 
# doing 'b=a'

print a
print b 
```

I am having a problem using the Tkinter library where I have checkbutton that has been stored in a list and I'm trying to get the variable that it holds.

But it takes around **5 lines of code** to reach the variable.

### Is there a way of holding a copy of the variable that changes when the checkbutton variable changes?

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-24T04:35:42.417

You're exploring how Python deals with references. Assignment is simply binding a reference to an object on the right hand side. So, this is somewhat trivial:

```
a = 'foo'
b = a
print b is a  #True -- They *are the same object* 
```

However, as soon as you do:

```
b = 'bar'
b is a  #False -- they're not longer the same object because you assigned a new object to b 
```

Now this becomes really interesting with objects which are *mutable*:

```
a = [1]
b = a
b[0] = 'foo'
print a  #What?? 'a' changed? 
```

In this case, `a` changes because `b` and `a` are referencing the same object. When we make a change to `b` (which we can do since it is mutable), that same change is seen at `a` because they're the same object.

So, to answer your question, you can't do it directly, but you can do it indirectly if you used a mutable type (like a list) to store the actual data that you're carrying around.

* * *

This is something that is very important to understand when working with Python code, and it's not the way a lot of languages work, so it pays to really think about/research this until you truly understand it.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-24T04:39:05.303

In short, with simple value assignments, you cannot do this. As you saw:

```
a=4
b=a
a=5

>>> print b
4 
```

However, with mutable objects like lists, you *can* do this. As such:

```
a=[1]
b=a
a.append(2)

>>> print a
[1,2]
>>> print b
[1,2] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-24T04:55:01.130

Depending on what you want to do, you might want to check the [weakref module](http://docs.python.org/2/library/weakref.html).

This allows you to have a primary object and then several copies that will become `None` as soon as the primary object is gone.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-24T04:32:39.910

You are asking if it is possible to create a reference to a variable and hold in another variable. No, this is not possible. See e.g. [Create a reference to a variable (similar to PHP's "=&")?](https://stackoverflow.com/questions/3301805/create-a-reference-to-a-variable-similar-to-phps)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-08-20T17:21:53.967

There is an ugly way to create an independent copy of a simple variable via a temporary list:

```
a = 6; 
b = [a][0] 
```

# c++ - 从函数返回常量字符指针

> ID：13538268
> 
> 赞同：2
> 
> 时间：2012-11-24T04:28:08.707
> 
> 标签：c++, pointers, constants, const-pointer

做

```
const char * const getName () const
{ 
   return name ;
} 
```

意味着`getName()`返回一个指向常量字符的常量指针？由于该函数是常量，因此它不会修改其任何参数。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-24T04:29:58.680

这意味着`getName()`返回一个指向常量字符的常量指针，并且它不会修改函数体内的任何非可变类成员。
请注意，声明为[可变](http://msdn.microsoft.com/en-us/library/4h2h0ktk%28v=vs.80%29.aspx)的类成员仍然可以在此函数中修改。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-24T04:55:50.383

你的例子，

```
const char * const getName() const { return name; } 
```

最有可能返回一个常量指针，该指针指向一个以空字符结尾的常量**字符串**（即此类字符串中的第一个字符）。从技术上讲，它只是一个指向`char`. 但是这样的指针被 eg 视为指向以空字符结尾的字符串的指针`cout`。

由于声明了方法，`const`它不能直接修改普通的非`mutable`成员，但它可以修改指针成员指向的数据。这意味着从技术上讲，它*可以*修改被视为调用它的对象的一部分的东西，如果这些东西被声明`mutable`或被指针指向。然而，一个方法的共同*约定*`const`是，即使它做了一些内部更改，例如更新缓存，它也不会改变对象的外部可见状态，即从外部看来，它似乎没有改变对象。

对于 C++，

*   优先使用字符串类，例如`std::string`，特别是为了避免动态分配内存的生命周期管理问题。

*   不要使用`get`前缀，因为在 C++ 中它们只会增加更多的阅读量（例如，你会写`getSin(x)*getCos(x)`吗？）。更一般地，命名事物，使*调用*代码读起来像英文散文！:-) 您可以将其视为设计一种小语言。

*   作为一般规则，不要`const`在返回值的顶层添加，因为这会阻止移动优化。

此外，通常使用成员命名约定，例如`name_`（注意下划线在*末尾*，而不是在*前面*，以避免与 C 命名约定冲突）或`myName`.

因此，在 C++ 中，该函数的普通函数将被编码为

```
string name() const { return name_; } 
```

假设它`string`在这个定义所在的非全局命名空间中不合格（这是我的偏好）。

# android - 自动完成文本视图

> ID：13538272
> 
> 赞同：2
> 
> 时间：2012-11-24T04:28:37.840
> 
> 标签：android, autocomplete

我使用了运行良好但有一些问题的 autocompletetextview：

1）当建议列表出现时，我必须隐藏虚拟键盘。

2）建议列表显示与输入字母匹配的所有建议，例如如果我输入字母A，它会显示所有城市名称包含并以字母A开头。但我必须只显示那些从B开始的城市，因为城市列表太大（30000 +)。提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-24T04:43:02.957

> 1）当建议列表出现时，我必须隐藏虚拟键盘。

不建议这样做。你为什么假设用户只输入一个字符然后选择。鉴于您的名单是 30000+ 并假设我想进入波士顿。你认为它会帮助用户只输入 B 并且必须滚动以 B 开头的 500 个城市然后选择波士顿，或者输入说 Bos 并且列表归结为 2-3 并且用户选择它。一旦用户选择列表中的项目，您绝对可以关闭虚拟 IME。有关详细信息，请参阅 imeActions。

> 2）建议列表显示与输入字母匹配的所有建议，例如如果我输入字母A，它会显示所有城市名称包含并以字母A开头。但我必须只显示那些从B开始的城市，因为城市列表太大（30000 +)。提前致谢。

这是预期的行为。如果您只需要开始，还有另一个称为 FastScroll ListView 的选项，它根据第一个字符对列表进行排序。

# java - 进度条未触发的属性更改事件

> ID：13538275
> 
> 赞同：1
> 
> 时间：2012-11-24T04:29:07.367
> 
> 标签：java, swing, exception, swingworker, jprogressbar

我正在使用 JProgressBar 来显示从 DataBase 加载的数据的进度。我正在使用 SwingWorker 类使用[教程](http://docs.oracle.com/javase/tutorial/uiswing/components/progress.html)在后台线程中加载数据！

我的应用程序 ProgressBar 的属性更改事件未触发。

请指导我我做错了什么？？？。

下面是我尝试使用的代码的 SSCCE 如下。

```
public final class JProgressBarApplication {

    //private static org.jdesktop.swingx.JXDatePicker dpDate;
    javax.swing.JPanel pnlDate;
    JLabel label;
    JProgressBar pb;
    boolean taskDone=false;
    LongRunProcess lrpTask;

    public static void main(String... aArgs) {
        JProgressBarApplicationapp = new JProgressBarApplication();
        app.buildAndDisplayGui();
    }

    // PRIVATE //
    private void buildAndDisplayGui() {

        JFrame frame = new JFrame("Test Frame");
        buildContent(frame);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.pack();
        frame.setVisible(true);
    }

    private static final class showDialog implements ActionListener {

        /**
        * Defining the dialog's owner JFrame is highly recommended.
        */
        showDialog(JFrame aFrame) {    
            Date serverDate = null;
            fFrame = aFrame;    

        }

        public void GetData() {    
        // Code To Get Data From DB    
        }

        public void actionPerformed(ActionEvent aEvent) {

            JOptionPane.showMessageDialog(fFrame, "This is a dialog");
        }
        private JFrame fFrame;
    }

    private void buildContent(JFrame aFrame) {

        JPanel panel = new JPanel();

        panel.add(new JLabel("Hello"));

        JButton ok = new JButton("OK");
        ok.addActionListener(new MinimalSwingApplication.showDialog(aFrame));
        panel.add(ok);

        pb = new JProgressBar(0, 20);
        pb.setValue(0);
        pb.setStringPainted(true);
        aFrame.addWindowListener(new java.awt.event.WindowAdapter() {

            public void windowOpened(java.awt.event.WindowEvent evt) {
                formWindowOpened(evt);
            }
        });
        pb.addPropertyChangeListener(new java.beans.PropertyChangeListener() {
            public void propertyChange(java.beans.PropertyChangeEvent evt) {
                pbPropertyChange(evt);
            }
        });         

        aFrame.getContentPane().add(panel);
        aFrame.getContentPane().add(pb);
        aFrame.getContentPane().add(label);
    }

    private void formWindowOpened(java.awt.event.WindowEvent evt) {

        // TODO add your handling code here:
        lrpTask = new LongRunProcess(this, "1", 0);
        taskDone =false;
        lrpTask.execute();
        lrpTask.addPropertyChangeListener(pb.getPropertyChangeListeners()[0]);
    }

    private void pbPropertyChange(java.beans.PropertyChangeEvent evt) {
        // TODO add your handling code here:
        if (!taskDone) {
            if (lrpTask !=null) {
                int progress = lrpTask.getProgress();
                pb.setValue(progress);
                String str = "<html>" + "<font color=\"#FF0000\">" + "<b>" + 
                String.format( "Completed %d%% of task.\n", progress) + "</b>" + "</font>" + "</html>";
                if (lrpTask.getProgress()==100) {
                    done() ;
                }
            }
        }
    }

    public void done() {
        //Tell progress listener to stop updating progress bar.
        taskDone = true;
        Toolkit.getDefaultToolkit().beep();
        pb.setValue(pb.getMinimum());
        String str = "<html>" + "<font color=\"#FF0000\">" + "<b>" + " Form Loading completed." + "</b>" + "</font>" + "</html>";
        label.setText(str);
    }      
}

class LongRunProcess extends SwingWorker {
    /**
     * @throws Exception
     */
    MinimalSwingApplication frm;
    String mID=null;
    int rowNo=0 ;
    LongRunProcess(MinimalSwingApplication jframe,String mID_,int rowNo_) {
        frm =jframe;
        mID=mID_;
        rowNo=rowNo_ ;
    }
    @Override
    protected Object doInBackground() throws Exception {
        Integer result = 0;               

        try {                        
            frm.GetData();                       
        } catch (Exception e) {
            e.printStackTrace();
        }

        return result;
    }
} 
```

**编辑：@mKorbel 回答**

我使用以下功能

```
 private void getLongRunningTask(String id_ ,int row_){
  final String id=id_;
  final int row=row_;
    Thread process=  new Thread(new Runnable() {
      @Override
        public void run() {
      GetData(id,row);
      }
  });
  process.start(); 
```

}

而不是使用 SwingWorker 对象之前。

```
 lrpTask = new LongRunProcess(this, "1", 0);
  taskDone =false;
  lrpTask.execute(); 
```

获取以下异常

```
 debug:
    /JewelleryERPApplication/build/classes/java.lang.ArrayIndexOutOfBoundsException: 8 >= 8
at java.util.Vector.elementAt(Vector.java:470)
at javax.swing.table.DefaultTableColumnModel.getColumn(DefaultTableColumnModel.java:294)
at Utilities.Utility.ChangeJTableColumnSize(Utility.java:304)
at jewelleryerpapplication.GUI.Gold.RcvGoodsFromFiler.RefreshReplicateDetailJTable(RcvGoodsFromFiler.java:2850)
at jewelleryerpapplication.GUI.Gold.RcvGoodsFromFiler.GetDetailData(RcvGoodsFromFiler.java:496)
at jewelleryerpapplication.GUI.Gold.RcvGoodsFromFiler.GetData(RcvGoodsFromFiler.java:638)
at jewelleryerpapplication.GUI.Gold.RcvGoodsFromFiler$13.run(RcvGoodsFromFiler.java:3323)
at java.lang.Thread.run(Thread.java:722)
    Exception in thread "AWT-EventQueue-0" java.lang.ArrayIndexOutOfBoundsException: 0 >= 0
at java.util.Vector.elementAt(Vector.java:470)
at javax.swing.table.DefaultTableColumnModel.getColumn(DefaultTableColumnModel.java:294)
at sun.swing.SwingUtilities2.convertColumnIndexToModel(SwingUtilities2.java:1841)
at javax.swing.JTable.convertColumnIndexToModel(JTable.java:2585)
at javax.swing.JTable.getColumnClass(JTable.java:2701)
at javax.swing.plaf.synth.SynthTableUI$SynthTableCellRenderer.getTableCellRendererComponent(SynthTableUI.java:790)
at javax.swing.JTable.prepareRenderer(JTable.java:5735)
at javax.swing.plaf.synth.SynthTableUI.paintCell(SynthTableUI.java:684)
at javax.swing.plaf.synth.SynthTableUI.paintCells(SynthTableUI.java:581)
at javax.swing.plaf.synth.SynthTableUI.paint(SynthTableUI.java:365)
at javax.swing.plaf.synth.SynthTableUI.update(SynthTableUI.java:276)
at javax.swing.JComponent.paintComponent(JComponent.java:778)
at javax.swing.JComponent.paint(JComponent.java:1054)
at javax.swing.JComponent.paintToOffscreen(JComponent.java:5221)
at                        javax.swing.BufferStrategyPaintManager.paint(BufferStrategyPaintManager.java:295)
at javax.swing.RepaintManager.paint(RepaintManager.java:1206)
at javax.swing.JComponent._paintImmediately(JComponent.java:5169)
at javax.swing.JComponent.paintImmediately(JComponent.java:4980)
at javax.swing.RepaintManager.paintDirtyRegions(RepaintManager.java:770)
at javax.swing.RepaintManager.paintDirtyRegions(RepaintManager.java:728)
at javax.swing.RepaintManager.prePaintDirtyRegions(RepaintManager.java:677)
at javax.swing.RepaintManager.access$700(RepaintManager.java:59)
at javax.swing.RepaintManager$ProcessingRunnable.run(RepaintManager.java:1621)
at java.awt.event.InvocationEvent.dispatch(InvocationEvent.java:251)
at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:705)
at java.awt.EventQueue.access$000(EventQueue.java:101)
at java.awt.EventQueue$3.run(EventQueue.java:666)
at java.awt.EventQueue$3.run(EventQueue.java:664)
at java.security.AccessController.doPrivileged(Native Method)
at   java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
at java.awt.EventQueue.dispatchEvent(EventQueue.java:675)
at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:211)
at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:128)
at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:117)
at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:113)
at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:105)
at java.awt.EventDispatchThread.run(EventDispatchThread.java:90)
    Exception in thread "AWT-EventQueue-0" java.lang.ArrayIndexOutOfBoundsException: 14 >= 0
at java.util.Vector.elementAt(Vector.java:470)
at javax.swing.table.DefaultTableColumnModel.getColumn(DefaultTableColumnModel.java:294)
at javax.swing.plaf.basic.BasicTableHeaderUI.paint(BasicTableHeaderUI.java:648)
at javax.swing.plaf.synth.SynthTableHeaderUI.paint(SynthTableHeaderUI.java:173)
at javax.swing.plaf.synth.SynthTableHeaderUI.update(SynthTableHeaderUI.java:144)
at javax.swing.JComponent.paintComponent(JComponent.java:778)
at javax.swing.JComponent.paint(JComponent.java:1054)
at javax.swing.JComponent.paintToOffscreen(JComponent.java:5221)
at  javax.swing.BufferStrategyPaintManager.paint(BufferStrategyPaintManager.java:295)
at javax.swing.RepaintManager.paint(RepaintManager.java:1206)
at javax.swing.JComponent._paintImmediately(JComponent.java:5169)
at javax.swing.JComponent.paintImmediately(JComponent.java:4980)
at javax.swing.RepaintManager.paintDirtyRegions(RepaintManager.java:770)
at javax.swing.RepaintManager.paintDirtyRegions(RepaintManager.java:728)
at javax.swing.RepaintManager.prePaintDirtyRegions(RepaintManager.java:677)
at javax.swing.RepaintManager.access$700(RepaintManager.java:59)
at javax.swing.RepaintManager$ProcessingRunnable.run(RepaintManager.java:1621)
at java.awt.event.InvocationEvent.dispatch(InvocationEvent.java:251)
at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:705)
at java.awt.EventQueue.access$000(EventQueue.java:101)
at java.awt.EventQueue$3.run(EventQueue.java:666)
at java.awt.EventQueue$3.run(EventQueue.java:664)
at java.security.AccessController.doPrivileged(Native Method)
at  java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
at java.awt.EventQueue.dispatchEvent(EventQueue.java:675)
at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:211)
at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:128)
at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:117)
at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:113)
at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:105)
at java.awt.EventDispatchThread.run(EventDispatchThread.java:90)
    Exception in thread "Thread-44" java.lang.ArrayIndexOutOfBoundsException: 0 >= 0
at java.util.Vector.removeElementAt(Vector.java:554)
at javax.swing.table.DefaultTableColumnModel.removeColumn(DefaultTableColumnModel.java:151)
at javax.swing.JTable.createDefaultColumnsFromModel(JTable.java:1286)
at javax.swing.JTable.tableChanged(JTable.java:4389)
at javax.swing.JTable.setModel(JTable.java:3691)
at  jewelleryerpapplication.GUI.Gold.RcvGoodsFromFiler.GetDetailData(RcvGoodsFromFiler.java:582)
at jewelleryerpapplication.GUI.Gold.RcvGoodsFromFiler.GetData(RcvGoodsFromFiler.java:642)
at jewelleryerpapplication.GUI.Gold.RcvGoodsFromFiler$13.run(RcvGoodsFromFiler.java:3323)
at java.lang.Thread.run(Thread.java:722)
    java.lang.IllegalArgumentException: Identifier not found
at javax.swing.table.DefaultTableColumnModel.getColumnIndex(DefaultTableColumnModel.java:282)
at javax.swing.JTable.getColumn(JTable.java:2564)
at Utilities.Utility.AddingExtraColumnsAndComboForViews(Utility.java:2513)
at Utilities.Utility.RefreshReplicatedDataAndHeader(Utility.java:2307)
at  jewelleryerpapplication.GUI.Gold.RcvGoodsFromFiler.RefreshReplicateDetailJTable(RcvGoodsFromFiler.java:2804)
at jewelleryerpapplication.GUI.Gold.RcvGoodsFromFiler.GetDetailData(RcvGoodsFromFiler.java:496)
at jewelleryerpapplication.GUI.Gold.RcvGoodsFromFiler.GetData(RcvGoodsFromFiler.java:638)
at jewelleryerpapplication.GUI.Gold.RcvGoodsFromFiler$13.run(RcvGoodsFromFiler.java:3323)
at java.lang.Thread.run(Thread.java:722)
    Exception in thread "Thread-49" java.lang.NumberFormatException: For input string: "E2856D+RWN"
at java.lang.NumberFormatException.forInputString(NumberFormatException.java:65)
at java.lang.Integer.parseInt(Integer.java:492)
at java.lang.Integer.parseInt(Integer.java:527)
at  jewelleryerpapplication.GUI.Gold.RcvGoodsFromFiler.CalcWeight(RcvGoodsFromFiler.java:774)
at jewelleryerpapplication.GUI.Gold.RcvGoodsFromFiler.GetData(RcvGoodsFromFiler.java:652)
at jewelleryerpapplication.GUI.Gold.RcvGoodsFromFiler$13.run(RcvGoodsFromFiler.java:3323)
at java.lang.Thread.run(Thread.java:722)
    Exception in thread "AWT-EventQueue-0" java.lang.ArrayIndexOutOfBoundsException: 7 >= 1
at java.util.Vector.elementAt(Vector.java:470)
at javax.swing.table.DefaultTableColumnModel.getColumn(DefaultTableColumnModel.java:294)
at javax.swing.plaf.synth.SynthTableUI.paintCells(SynthTableUI.java:577)
at javax.swing.plaf.synth.SynthTableUI.paint(SynthTableUI.java:365)
at javax.swing.plaf.synth.SynthTableUI.update(SynthTableUI.java:276)
at javax.swing.JComponent.paintComponent(JComponent.java:778)
at javax.swing.JComponent.paint(JComponent.java:1054)
at javax.swing.JComponent.paintChildren(JComponent.java:887)
at javax.swing.JComponent.paint(JComponent.java:1063)
at javax.swing.JViewport.paint(JViewport.java:725)
at javax.swing.JComponent.paintChildren(JComponent.java:887)
at javax.swing.JComponent.paint(JComponent.java:1063)
at javax.swing.JComponent.paintChildren(JComponent.java:887)
at javax.swing.JComponent.paint(JComponent.java:1063)
at javax.swing.JComponent.paintToOffscreen(JComponent.java:5221)
at javax.swing.BufferStrategyPaintManager.paint(BufferStrategyPaintManager.java:295)
at javax.swing.RepaintManager.paint(RepaintManager.java:1206)
at javax.swing.JComponent._paintImmediately(JComponent.java:5169)
at javax.swing.JComponent.paintImmediately(JComponent.java:4980)
at javax.swing.RepaintManager.paintDirtyRegions(RepaintManager.java:770)
at javax.swing.RepaintManager.paintDirtyRegions(RepaintManager.java:728)
at javax.swing.RepaintManager.prePaintDirtyRegions(RepaintManager.java:677)
at javax.swing.RepaintManager.access$700(RepaintManager.java:59)
at javax.swing.RepaintManager$ProcessingRunnable.run(RepaintManager.java:1621)
at java.awt.event.InvocationEvent.dispatch(InvocationEvent.java:251)
at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:705)
at java.awt.EventQueue.access$000(EventQueue.java:101)
at java.awt.EventQueue$3.run(EventQueue.java:666)
at java.awt.EventQueue$3.run(EventQueue.java:664)
at java.security.AccessController.doPrivileged(Native Method)
at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
at java.awt.EventQueue.dispatchEvent(EventQueue.java:675)
at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:211)
at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:128)
at  java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:117)
at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:113)
at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:105)
at java.awt.EventDispatchThread.run(EventDispatchThread.java:90)
    Exception in thread "Thread-50" java.lang.NumberFormatException: For input string: "E2856D+RWN"
at java.lang.NumberFormatException.forInputString(NumberFormatException.java:65)
at java.lang.Integer.parseInt(Integer.java:492)
at java.lang.Integer.parseInt(Integer.java:527)
at jewelleryerpapplication.GUI.Gold.RcvGoodsFromFiler.CalcWeight(RcvGoodsFromFiler.java:774)
at jewelleryerpapplication.GUI.Gold.RcvGoodsFromFiler.GetData(RcvGoodsFromFiler.java:652)
at jewelleryerpapplication.GUI.Gold.RcvGoodsFromFiler$13.run(RcvGoodsFromFiler.java:3323)
at java.lang.Thread.run(Thread.java:722)
    Exception in thread "AWT-EventQueue-0" java.lang.ArrayIndexOutOfBoundsException: 8 >= 4
at java.util.Vector.elementAt(Vector.java:470)
at javax.swing.table.DefaultTableColumnModel.getColumn(DefaultTableColumnModel.java:294)
at javax.swing.plaf.synth.SynthTableUI.paintCells(SynthTableUI.java:577)
at javax.swing.plaf.synth.SynthTableUI.paint(SynthTableUI.java:365)
at javax.swing.plaf.synth.SynthTableUI.update(SynthTableUI.java:276)
at javax.swing.JComponent.paintComponent(JComponent.java:778)
at javax.swing.JComponent.paint(JComponent.java:1054)
at javax.swing.JComponent.paintToOffscreen(JComponent.java:5221)
at  javax.swing.BufferStrategyPaintManager.paint(BufferStrategyPaintManager.java:295)
at javax.swing.RepaintManager.paint(RepaintManager.java:1206)
at javax.swing.JComponent._paintImmediately(JComponent.java:5169)
at javax.swing.JComponent.paintImmediately(JComponent.java:4980)
at javax.swing.RepaintManager.paintDirtyRegions(RepaintManager.java:770)
at javax.swing.RepaintManager.paintDirtyRegions(RepaintManager.java:728)
at javax.swing.RepaintManager.prePaintDirtyRegions(RepaintManager.java:677)
at javax.swing.RepaintManager.access$700(RepaintManager.java:59)
at javax.swing.RepaintManager$ProcessingRunnable.run(RepaintManager.java:1621)
at java.awt.event.InvocationEvent.dispatch(InvocationEvent.java:251)
at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:705)
at java.awt.EventQueue.access$000(EventQueue.java:101)
at java.awt.EventQueue$3.run(EventQueue.java:666)
at java.awt.EventQueue$3.run(EventQueue.java:664)
at java.security.AccessController.doPrivileged(Native Method)
at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
at java.awt.EventQueue.dispatchEvent(EventQueue.java:675)
at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:211)
at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:128)
at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:117)
at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:113)
at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:105)
at java.awt.EventDispatchThread.run(EventDispatchThread.java:90)
    Exception in thread "Thread-56" java.lang.ArrayIndexOutOfBoundsException: 0 >= 0
at java.util.Vector.removeElementAt(Vector.java:554)
at javax.swing.table.DefaultTableColumnModel.removeColumn(DefaultTableColumnModel.java:151)
at javax.swing.JTable.createDefaultColumnsFromModel(JTable.java:1286)
at javax.swing.JTable.tableChanged(JTable.java:4389)
at javax.swing.JTable.setModel(JTable.java:3691)
at jewelleryerpapplication.GUI.Gold.RcvGoodsFromFiler.GetDetailData(RcvGoodsFromFiler.java:582)
at jewelleryerpapplication.GUI.Gold.RcvGoodsFromFiler.GetData(RcvGoodsFromFiler.java:642)
at jewelleryerpapplication.GUI.Gold.RcvGoodsFromFiler$13.run(RcvGoodsFromFiler.java:3323)
at java.lang.Thread.run(Thread.java:722) 
```

**编辑代码生成异常**

**示例异常1**

```
 .ArrayIndexOutOfBoundsException: 0 >= 0
at java.util.Vector.removeElementAt(Vector.java:554)
at javax.swing.table.DefaultTableColumnModel.removeColumn(DefaultTableColumnModel.java:151)
at javax.swing.JTable.createDefaultColumnsFromModel(JTable.java:1286)
at javax.swing.JTable.tableChanged(JTable.java:4389)
at javax.swing.JTable.setModel(JTable.java:3691)
at jewelleryerpapplication.GUI.Gold.RcvGoodsFromFiler.GetDetailData(RcvGoodsFromFiler.java:493)
at jewelleryerpapplication.GUI.Gold.RcvGoodsFromFiler.GetData(RcvGoodsFromFiler.java:638)
at jewelleryerpapplication.GUI.Gold.RcvGoodsFromFiler$13.run(RcvGoodsFromFiler.java:3380) 
```

**发生异常的代码**

```
 DefaultTableModel dtm = new DefaultTableModel(data_RcvGoodsFromFilerDt, header_RcvGoodsFromFilerDt);

     tblDetailInfo.setModel(dtm); 
```

**示例异常 2**

```
 Exception in thread "Thread-6" java.lang.NumberFormatException: For input string: "12.950"
at java.lang.NumberFormatException.forInputString(NumberFormatException.java:65)
at java.lang.Integer.parseInt(Integer.java:492)
at java.lang.Integer.parseInt(Integer.java:527)
at jewelleryerpapplication.GUI.Gold.RcvGoodsFromFiler.CalcWeight(RcvGoodsFromFiler.java:774) 
```

**发生异常的代码**

```
 qt += Integer.parseInt( tblDetailInfo.getValueAt(r, 8).toString() );

    Some Exceptions occured at unknown Code Point

    at java.awt.EventQueue.access$000(EventQueue.java:101)
at java.awt.EventQueue$3.run(EventQueue.java:666)
at java.awt.EventQueue$3.run(EventQueue.java:664) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T10:26:01.730

*   您可以实施`Runnable`；它避免`Future`和泛型，但很容易出错。

*   这个答案[比较`SwingWorker`了`Runnable`类似的动作](https://stackoverflow.com/a/10774277/714968)；`SwingWorker`有优势，但需要更好的知识`Java Essential Classes`。

*   `SwingWorker`是正确的方式并且被指定用于单个长时间运行的线程；对于多线程，`SwingWorker`从`Executor`.

*   [关于的例子`SwingWorker`](https://stackoverflow.com/questions/6113944/how-cancel-the-execution-of-a-swingworker/6114890#6114890)。

*   [关于和的`get()`异常的示例`SwingWorker``PropertyChangeListener`](https://stackoverflow.com/questions/7053865/cant-get-arrayindexoutofboundsexception-from-future-and-swingworker-if-threa)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-24T13:28:45.553

@mKorbel[引用](https://stackoverflow.com/a/13540314/230513)了许多有启发性的示例，但关键是`setProgress()`从工人的`doInBackground()`. `SwingWorker`处理所需的同步。在这个相关的[问答](https://stackoverflow.com/q/10773552/230513)中，几个有用的答案扩展了这个主题，包括对这个[例子](https://stackoverflow.com/a/4637725/230513)的引用。

# actionscript-3 - 在 Flash AS3 中单击特定符号时如何从舞台上移除特定符号？

> ID：13538280
> 
> 赞同：1
> 
> 时间：2012-11-24T04:30:29.990
> 
> 标签：actionscript-3, flash, adobe

我在舞台上随机 x 和 y 添加了一些影片剪辑（一个简单的苹果图像）实例。现在我试图点击每一个来删除它们。

这是我所拥有的：

```
public function Apples() {

        for(var count:int=1; count<=10; count++){
            var apple = new Apple();
            apple.x = Math.random() * stage.stageWidth;
            apple.y = Math.random() * stage.stageHeight;    
            apple.name = count;
            stage.addChild(apple);
            }

stage.addEventListener(MouseEvent.CLICK, onClick);

        function onClick(e:MouseEvent):void{
            stage.removeChild(e.target);
            }
} 
```

如果我尝试编译，我会收到以下错误：

```
1118: Implicit coercion of a value with static type Object to a possibly unrelated  type flash.display:DisplayObject. 
```

我也试过用 e.target.name 代替 e.target。在这种情况下，程序会运行，但只要我点击苹果，就会在输出日志中收到以下错误：

```
TypeError: Error #1034: Type Coercion failed: cannot convert "9" to flash.display.DisplayObject.
at MethodInfo-4() 
```

那么有什么方法可以删除我点击的特定对象吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T05:18:51.993

在您的 onClick 事件处理程序中尝试类似：

```
var displayObject:DisplayObject = (DisplayObject) (e.target);
displayObject.parent.removeChild(displayObject); 
```

您可能还想确保使用弱引用将事件处理程序添加到显示对象，如果它意味着在单击时完全消失/删除。

# asp.net - 如何将对象复制到formview并保存到objectdatasource

> ID：13538281
> 
> 赞同：0
> 
> 时间：2012-11-24T04:30:31.563
> 
> 标签：asp.net, vb.net, objectdatasource

我有一个向导页面，需要从 gridview 复制一个对象，然后编辑一些属性以保存到一个新对象。

我的表单视图喜欢

```
 <asp:FormView ID="FormView1" runat="server" DataSourceID="ObjectDataSource2" EnableViewState="False" DataKeyNames="key" DefaultMode="ReadOnly">
   <ItemTemplate>
     ...
   </ItemTemplate>
</asp:FormView>
<asp:ObjectDataSource ID="ObjectDataSource2" runat="server" OldValuesParameterFormatString="{0}"
        InsertMethod="Insert" SelectMethod="GetById" TypeName="xxx.xxx"
        DataObjectTypeName="xxx.xxxx"> 
```

**我必须使用 DataObjectTypeName**

```
Protected Sub step3Save_Click(sender As Object, e As EventArgs) Handles step3Save.Click
     objectDatasource2.Insert()
End Sub 
```

调用 objectDatasource2.Insert() 时，抛出异常表示数据源没有值。是否有任何解决方案可以将 Object 作为 ObjectDatasource 的参数插入？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T22:24:24.680

我会将按钮控件的 CommandName 设置为“Insert”，而不是在事件处理程序子例程中指定 objectDatasource2.Insert()。在此处查看此链接：[http](http://www.ezzylearning.com/tutorial.aspx?tid=9878983) ://www.ezzylearning.com/tutorial.aspx?tid=9878983 。

# save - 在工作区中保存正确的变量名

> ID：13538282
> 
> 赞同：1
> 
> 时间：2012-11-24T04:30:49.583
> 
> 标签：save, matlab-load

我在matlab中有一个函数。

```
function [MEAN STD]=result(data)
MEAN=[mean(data)];
STD=std(data);
Training_data=[MEAN STD]
savefilename=sprintf('%s',inputname(1))
save(savefilename,'Training_data')
end 
```

我设置数据的文件名=ET1_A_l1(imported to workspace alrdy)(ET1_A_l1=[1;2;1;3;1;4] 求所选数据(ET1_A_l1)的均值和标准差，并将统计特征保存为.mat形式如下图所示：

```
>>[MEAN STD]=result(ET1_A_l1) 
```

结果，保存文件的名称是 ET1_A_l1.mat，我将 ET1_A_l1.mat 导入工作区，它显示了“Training_data”，如图 1 所示。

![图1](../Images/f663da1e2b1afb3419f5c1813f7c3383.png) ,

在工作区中将变量名称（Training_data）更改为 ET1_A_l1 有什么好主意吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T08:34:59.320

要在加载后更改变量名称（而不是字段名称），请尝试以下操作：

```
clear all; close all;

fname = 'ET1_A_l1';
Training_data=[0.5 .1]; % test data

savefilename=sprintf('%s', [fname '.mat']);
save(savefilename,'Training_data');

clear Training_data;

% important line
eval([fname '=importdata(''' savefilename ''');']); 
```

**编辑**直接更改字段名称：

```
function [MEAN STD]=result(data)
    MEAN = mean(data);
    STD = std(data);
    varname = inputname(1);
    eval([varname '=[MEAN STD];']);
    savefilename = sprintf('%s',varname);
    save(savefilename, varname);
end

>> ET1_A_l1=[1;2;1;3;1;4];
>> >> [m s] = result(ET1_A_l1)

m =
     2
s =
    1.2649

>> clear all;
>> in = load('ET1_A_l1');

>> fieldnames(in)
ans = 
    'ET1_A_l1' 
```

![在此处输入图像描述](../Images/1c1cd55a94a95a9ae0504feedec19d95.png)

# android - 通过蓝牙控制安卓手机

> ID：13538286
> 
> 赞同：-1
> 
> 时间：2012-11-24T04:31:40.003
> 
> 标签：android, bluetooth

我有一个三星蓝牙设备。使用该设备，我可以将它与我的 Android 手机配对，并且可以从我的三星蓝牙设备上收听在 Android 设备上播放的音乐。我没有在我的安卓设备上安装任何软件。

现在我的问题是三星蓝牙设备如何控制安卓音乐播放器和来电？

请记住，我没有在 Android 设备上安装任何软件。

仅供参考：我可以将三星蓝牙设备连接到任何手机，如诺基亚、iPhone、Android 等，但我想了解 Android。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T04:54:23.470

同意，您没有安装任何播放音乐的应用程序。后台实际发生的是您的设备通过蓝牙 API 连接。

音乐在安卓手机（或任何其他手机）中播放，只有声音信号会传输到您的蓝牙设备，稍后由您的蓝牙设备（基于蓝牙的免提电话或耳机）播放。

此外，当您单击设备中的“下一步”、“上一个”、音量 + 或 - 按钮时，会通过蓝牙向您的手机发送信号，在手机中执行相同的操作。

# php - 为什么我不能用 PHP 将 CSS 样式表写入文件？

> ID：13538289
> 
> 赞同：3
> 
> 时间：2012-11-24T04:32:12.360
> 
> 标签：php, css, fwrite

```
<?php
    $cdata = $_GET['cdata'];
    $cfile = "./output/$ip/output.css";
    $cout = fopen($cfile, 'w') or die("1");
    fwrite($cout, $cdata) or die("Could not write to " . $cfile);
    echo("Wrote CSS to " . $cfile . " successfully.<br />");
    fclose($cout);
?> 
```

当我在我的网络服务器上执行此操作时，它告诉我它是成功的（或者我可能没有发现错误），但它写入了我想要的部分内容。这是我告诉它写的内容（通过 url 作为传递`$_GET['cdata']`）：

```
body{background: #000; color: #FFF;} 
```

这就是我从文件中得到的

```
body{background: 
```

请注意，末尾有一个空格，所以我假设井号 (#) 引起了问题，但不知道为什么或如何解决它。

这不是我的全部代码，只是一个片段，我认为错误所在。我希望这是足够的信息，如果没有，请询​​问，我会尝试在那里扔任何其他东西。提前致谢。

**解决方案**

因为我使用 jQuery 的 $.post() 方法来发送数据，所以我需要做的就是用 encodeURIComponent() 包装正在发送的数据，这似乎已经成功了。感谢@xbonez 为我指明了正确的方向。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-24T04:39:57.977

您需要对您的 url 属性进行编码，url 中的 # 被视为散列而不被发送到服务器。例如

```
 var args = 'cdata='+encodeURIComponent('body{background: #000; color: #FFF;}'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T04:39:25.877

获取请求是从 url 获取值。您可能希望将它们 base64 编码到 url 或使用 Post 变量。例如：隐藏的输入表单类型。

# typescript - 对象索引签名是否等同于数组类型？

> ID：13538296
> 
> 赞同：8
> 
> 时间：2012-11-24T04:32:46.477
> 
> 标签：typescript

规范的第 3.5.4 节指出：“ElementType [] 形式的数组类型等效于具有索引签名 [index: number]: ElementType 的对象类型”，但情况似乎并非如此，例如

```
var a: {[index: number]: string;};
var b: string[];
a = ['1','2'];  // ERROR: Cannot convert 'string[]' to '{ [index: number]: string; }'
b = ['1','2'];  // OK 
```

我在这里想念什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T22:04:47.297

是的，这是编译器中的一个已知错误。它将在未来的版本中修复。最好的解决方法是强制转换（在任务的两侧 -`a = <string[]>['1', '2']`可能看起来不那么奇怪）。

# jquery - 载波文件上传

> ID：13538297
> 
> 赞同：0
> 
> 时间：2012-11-24T04:32:46.967
> 
> 标签：jquery, ruby-on-rails, ruby, ruby-on-rails-3, carrierwave

我正在尝试 railcasts.com Jquery File Upload 提出的多个文件上传。我已经进行了测试，但是似乎每次我刷新服务器时，什么都看不到，在下面的浏览器中我得到了这个

*   谷歌：空白图标
*   火狐：文本“/资产/

我的文件夹中似乎没有上传任何内容。我希望我的图片成为上传者的地方是 public/upload/:imageid

这是我的代码上传器

```
class AimageUploader < CarrierWave::Uploader::Base

  include CarrierWave::RMagick
  include Sprockets::Helpers::RailsHelper
  include Sprockets::Helpers::IsolatedHelper
  storage :file
  def store_dir
    "uploads/#{model.id}"
  end
  version :thumb do
    process :resize_to_fill => [200, 200]
  end
  def extension_white_list
    %w(jpg jpeg gif png)
  end   
end 
```

看法

```
<div><%= image_tag(ad.aimage_url(:thumb)) %></div> 
```

我错过了一步吗？

模型

```
# == Schema Information
#
# Table name: ads
#
#  id               :integer          not null, primary key
#  name             :string(255)
#  aimage           :string(255)
#  created_at       :datetime         not null
#  updated_at       :datetime         not null
#  advertisement_id :integer
#

class Ad < ActiveRecord::Base
  attr_accessible :aimage, :advertisement_id, :name
  mount_uploader :aimage, AimageUploader
end 
```

查看 index.html.erb

```
<% @ads.each do |ad| %>
  <div><%= ad.name %></div>
  <%= image_tag(ad.aimage_url(:thumb)) if ad.aimage? %>
  <div>
    <%= link_to 'Show', ad %>
    <%= link_to 'Edit', edit_ad_path(ad) %>
    <%= link_to 'Destroy', ad, method: :delete, data: { confirm: 'Are you sure?' } %>
  </div>
<% end %>
<br />

<%= form_for Ad.new do |f| %>
  <div><%= f.label :aimage, "Upload advertisement:" %></div>
  <div><%= f.file_field :aimage, multiple: true, name: "advertisement[aimage]" %></div>
<% end %> 
```

控制器

```
class AdsController < ApplicationController
  def index
    @ads = Ad.all
  end
  def show
    @ad = Ad.find(params[:id])
  end
  def new
    @ad = Ad.new
  end
  def edit
    @ad = Ad.find(params[:id])
  end
  def create
    @ad = Ad.create(params[:ad])
    if @ad.save
      flash[:notice] = "Successfully created advertisement."
      redirect_to root_url
    else
      render :action => 'new'
    end
  end
  def destroy
    @ad = Ad.find(params[:id])
    @ad.destroy
  end
end 
```

Javascript ads.js.coffee

```
jQuery ->
  $('#new_ad').fileupload() 
```

在我看来一切都很好！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T12:29:55.117

您的上传器是否安装到您的模型上？如果没有，试试这个

```
mount_uploader :image, AimageUploader 
```

并且，在您看来，设置多个选项

```
<%= f.file_field :image, multiple: true, name: "model_name[image]" %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T06:18:43.610

我建议你用[回形针](https://github.com/thoughtbot/paperclip)

创建一个名为 Image 的模型，如下所示：

```
class Image < ActiveRecord::Base
  has_attached_file :file
end 
```

假设用户模型将有多个图像：

```
class User < ActiveRecord::Base
  has_many :images
end 
```

你可以有单独的 image_controller 来处理你的文件上传

# alloy - 为什么没有找到该谓词的实例？

> ID：13538300
> 
> 赞同：1
> 
> 时间：2012-11-24T04:33:12.030
> 
> 标签：alloy

我有一个非常令人费解的问题。我似乎找不到这个谓词的实例。下面是代码。

```
module keyless
open util/ordering[state] as trace

abstract sig ownerpostype{}

//owner is out and far away from the car
//this set should be mapped to person
one sig far extends ownerpostype{} //{(far)}
one sig near extends ownerpostype{} //{(near)}
one sig insidecar extends ownerpostype{} //{(insidecar)}

//engine status
abstract sig enginetype{}
one sig on extends enginetype{} //engine is on
one sig off extends enginetype{}

//car door status
abstract sig dooroptype{}
one sig unlock extends dooroptype{}
one sig lock extends dooroptype{}
one sig opened extends dooroptype{}

//car status
abstract sig motortype{}
one sig moving extends motortype{}
one sig still extends motortype{}

//key fob position
abstract sig keypostype{}
one sig incar extends keypostype{} //key fob in car
one sig faralone extends keypostype{}
one sig pocket extends keypostype{}

sig state{
  owner: ownerpostype,  //(s, far) or (s,near) or (s, insideCar)
  //engine: enginetype,  
  door: dooroptype,
  //motor: motortype,
  //key: keypostype
}

//initial state
pred init (s: state){
  //engine intially off
  s.door in lock and s.owner in far
}

//operations on the owners position
pred towards (s, s' : state){
 s.owner in far and s'.owner in near and s.door = s'.door
}

//operations on key position
pred getin (s, s' : state){
 s.owner in near 
 s.door in opened
 s'.door = s.door
 s'.owner in insidecar
}

//operations on door status
pred unlockopen (s, s' : state){
  s.owner in near and s.door in lock
  s'.door in opened 
  s'.owner = s.owner
}

pred close (s, s' : state){
  s.door in opened and s'.door in unlock
  s'.owner = s.owner
}

fact {
  first.init
  all t : state - last | let t' = t.next |
     towards[t, t'] or getin[t, t'] or unlockopen[t, t'] 
}

run getin 
```

为什么 getin 没有实例？我已经跟踪了代码，基本的跟踪应该是这样的：init -> 朝向 -> unlockopen -> getin。

这些前面的谓词中的每一个都应该满足后续谓词中的约束。那么，为什么我可以获得除 getin 之外的其余谓词的实例？

非常感谢对此的一些指导。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-25T03:41:25.607

默认范围是 3。您无法执行 3 个具有 3 个状态的操作——您需要 4 个！

以下是有关调试不一致的一些一般提示：

1.  如果您的命令没有实例，请松开它，看看会发生什么。在这种情况下，您可以更改`run getin`为`run {}`.

2.  单击“核心”链接以查看未饱和核心。在这种情况下，它显示了所有的动作谓词，表明问题不仅仅是 getin 本身。

3.  尝试扩大范围。但是请注意，当您使用它时`util/ordering`有点棘手，因为它使有序类型的范围精确（因此，例如，如果您有一个签名动作并且正在订购一个签名状态，如果您为 State 和一个较小的操作，您可能没有足够的操作来填充跟踪）。

# wordpress - Orbit wordpress 插件项目符号显示为缩略图导航

> ID：13538304
> 
> 赞同：0
> 
> 时间：2012-11-24T04:33:53.760
> 
> 标签：wordpress, navigation, orbit

我正在使用轨道滑块（带有 wp 基础）并尝试显示项目符号导航。我真的想将子弹显示为缩略图，但现在它们不会以任何方式显示。我在 wordpress 仪表板的 Orbit 首选项中选择了项目符号，我在我的 js 文件和 css 中使用以下代码。感谢一些帮助。

```
$(window).load(function() { 
    $('#featured').orbit({
        bullets: true,
        bulletThumbs: true,
        bulletThumbLocation: '../thumbs/'
    }); 
});

.orbit-bullets li.has-thumb {
    width: 99px;
    height: 88px; 
    border: 2px solid red;
    padding-right: 10px;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-10T13:49:26.467

滑块显示的每个图像都应具有“data-thumb”属性，如下所示：

```
<img src="IMAGE_NAME.jpg" data-thumb="THUMBNAIL_NAME.jpg" /> 
```

希望这有帮助。

# sql - 如何在 Access 2010 中提示用户输入 SQL 查询的参数

> ID：13538305
> 
> 赞同：1
> 
> 时间：2012-11-24T04:34:30.820
> 
> 标签：sql, database, ms-access, ms-access-2010

```
SELECT Transactions.TransactionNumber
FROM Transactions
WHERE (((Transactions.Date)>=#11/23/12#)) AND (((Transactions.Date)<=#11/23/12#)); 
```

上面的代码返回指定日期之间发生的所有交易。但我希望每次执行查询时由用户定义这些日期。

我尝试使用 [] 运算符让用户在 WHERE 中定义条件，如下所示：

```
WHERE (((Transactions.Date)>=[Input a Date])) AND (((Transactions.Date)<=[Input a Date])); 
```

但 microsoft Access 会引发语法错误消息。当我像这样包含 # （日期运算符）时也会发生同样的情况

```
WHERE (((Transactions.Date)>=#[Input a Date]#)) AND (((Transactions.Date)<=#[Input a Date]#)); 
```

是否有另一种方法来管理我不知道的日期或在查询中向用户询问日期的问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T04:45:27.797

请查看此链接以了解[查询中的用户输入条件](http://office.microsoft.com/en-sg/access-help/use-parameters-in-queries-and-reports-HA010096314.aspx#_Toc267474485)

您可以使用查询生成器为您完成此部分，然后在 SQL 编辑器上完全工作。

在这种情况下，您让系统帮助您执行它接受用户输入的格式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T21:38:25.917

看起来括号是语法错误的原因。下面试试。

WHERE (((Date)>=[Input a Date1])) AND (((Date)<=[Input a Date2]));

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-04T08:31:32.803

发现 thi post 谷歌搜索类似的问题：在 [param1] 和 [param2] 之间使用时查询返回错误的值，而 params 应该是日期类型。Access 不知道也不识别输入参数广告日期，但将它们视为文本。我也尝试编写 sql 语句来强制识别（以及转换，因为我们使用 dd/mm/yyyy 格式）但没有成功。我解决了在查询设计视图中设置参数日期类型的问题，并且不需要格式化函数或在 sql 语句中包含 # 符号

# net-snmp - Net-snmp 重新加载以奇怪的方式工作

> ID：13538307
> 
> 赞同：1
> 
> 时间：2012-11-24T04:34:51.450
> 
> 标签：net-snmp

我在`/etc/snmpd.conf`路径中放置了 snmp v3 配置、createUser 指令和 rwuser 指令，并且在运行 snmpd 时，我指定它使用`-c`选项从该路径读取配置。（`snmpd -c /etc/snmpd.conf`）

问题是当我放置 createUser 指令并发送“killall SIGHUP snmpd”时，我可以使用新放置的用户访问，但即使在我从配置文件中删除用户并发送信号后，我仍然可以访问用户。但是，如果我重新启动系统，用户将被删除并且工作正常。

添加用户工作正常，但删除不能。任何帮助将不胜感激。

我知道我应该将 createUser 指令放在`/var/net-snmp/snmpd.conf`. 但是如果我重新启动系统放置的条目将不存在。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T17:41:25.343

诀窍是将`createUser`指令放在代理未运行`/var/net-snmp/snmpd.conf`时。`snmp`因为每次snmp代理启动和停止时都会修改这个文件。所以基本上首先停止`snmp`代理（kill or service snmpd stop），`/var/net-snmp/snmpd.conf`使用`createUser`指令更新然后启动`snmp`代理。

要删除用户，请先停止`snmp`代理，然后从中删除条目`/var/net-snmp/snmpd.conf`并启动代理。

# jquery - jQuery插件触发事件/函数取决于单击的按钮

> ID：13538308
> 
> 赞同：1
> 
> 时间：2012-11-24T04:35:01.747
> 
> 标签：jquery, plugins

我正在尝试创建一个简单的 jQuery 插件供自己使用（是的，我知道已经有一个带有 jQ​​uery 的官方插件来做这种事情，但我更喜欢我自己的）。我已经把它基本上编码好了，唯一我不知道该怎么做的问题是检测点击了哪个按钮，并基于该调用通过插件提供的相应功能。最好的方法是什么？

所以这是我到目前为止的代码：

```
(function($){
$.fn.extend({

    confirmDialog: function(options) {

        var defaults = {
           titleText: "Confirmation",
           bodyText: "Are you sure you want to delete this?",
           confirmButtonText: "Delete",
           confirmAction: function(){},
           cancelAction: function(){},
        };

        var options = $.extend(defaults, options);

        return this.each(function() {

    $('<div class="confirmation-box-wrapper"><div class="confirmation-box"><div class="confirmation-title">'+options.titleText+'</div><div class="confirmation-message">'+options.bodyText+'</div><div class="options"><a class="buttons cancel">Cancel</a><a class="buttons confirmation">'+options.confirmButtonText+'</a></div></div></div>').appendTo('body');  

        });
    }
});
})(jQuery); 
```

所以我期望的用法是这样的：

```
 $(".elementToDelete").confirmDialog({
      confirmAction: function(){ alert("Deleted"); },
      cancelAction: function(){ alert("Cancelled"); }

  }) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T04:53:17.663

您需要绑定该扩展中的按钮。[http://jsfiddle.net/4mjBb/](http://jsfiddle.net/4mjBb/)

```
var wrapper=$('<div class="confirmation-box-wrapper"... ...')appendTo('body'); 

wrapper.find('.confirmation').on('click', function(){
    if (typeof options.confirmAction=='function') options.confirmAction();

});
wrapper.find('.cancel').on('click', function(){
    if (typeof options.cancelAction=='function') options.cancelAction();
}); 
```

# google-chrome-devtools - Javascript 调试：如何在实际事件处理程序代码上设置断点？

> ID：13538316
> 
> 赞同：2
> 
> 时间：2012-11-24T04:37:49.827
> 
> 标签：google-chrome-devtools, jquery, javascript-debugger

有什么方法可以让 Chrome 调试器在运行到不同的 Javascript 文件时中断？

因为我正在调试一个遗留的 web 应用程序，大量的 js 文件，这个功能将帮助我找到与 jquery.click() 方法绑定的事件处理程序。

* * *

修改：或者简单地说，如何快速找到jquery的实际事件处理程序代码？

# python - 避免 __getattribute__ 中的无限循环

> ID：13538324
> 
> 赞同：29
> 
> 时间：2012-11-24T04:39:05.567
> 
> 标签：python, python-3.x

该方法`__getattribute__`需要仔细编写以避免无限循环。例如：

```
class A:
    def __init__(self):
        self.x = 100

    def __getattribute__(self, x):
        return self.x

>>> a = A()
>>> a.x    # infinite looop
RuntimeError: maximum recursion depth exceeded while calling a Python object

class B:
    def __init__(self):
        self.x = 100

    def __getattribute__(self, x):
        return self.__dict__[x]

>>> b = B()
>>> b.x    # infinite looop
RuntimeError: maximum recursion depth exceeded while calling a Python object 
```

因此我们需要这样写方法：

```
class C:
    def __init__(self):
        self.x = 100

    def __getattribute__(self, x):
        # 1\. error
        # AttributeError: type object 'object' has no attribute '__getattr__'
        # return object.__getattr__(self, x)

        # 2\. works
        return object.__getattribute__(self, x)

        # 3\. works too
        # return super().__getattribute__(x) 
```

我的问题是为什么`object.__getattribute__`方法有效？从哪里`object`得到`__getattribute__`方法？如果`object`没有任何`__getattribute__`，那么我们只是在类上调用相同的方法，`C`但通过超类。为什么，那么通过超类调用方法不会导致无限循环？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-11-24T05:03:58.630

您似乎认为您的实现`__getattribute__`只是一个钩子，如果您提供它，Python 将调用它，否则解释器将直接执行其正常的魔法。

这是不正确的。当python在实例上查找属性时，`__getattribute__`是所有属性访问的主要入口，并`object`提供默认实现。因此，您的实现将*覆盖*原始实现，如果您的实现没有提供返回属性的替代方法，它将失败。您*不能*在该方法中使用属性访问，因为对实例 ( ) 的所有属性访问都`self`再次通过`type(self).__getattribute__(self, attr)`.

解决这个问题的最好方法是再次调用被覆盖的原始文件。这就是`super(C, self).__getattribute__(attr)`进来的地方；您正在要求类解析顺序中的下一个类为您处理属性访问。

或者，您可以直接调用未绑定的`object.__getattribute__()`方法。此方法的 C 实现是属性访问的最后一站（它可以直接访问，`__dict__`因此不受相同的限制）。

请注意，它`super()`返回一个代理对象，它将查找接下来在方法解析有序基类中可以找到的任何方法。如果不存在这样的方法，它将因属性错误而失败。它*永远不会*调用原始方法。因此`Foo.bar()`，查找`super(Foo, self).bar`要么是基类实现，要么是属性错误，而*不是* `Foo.bar`本身。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-11-24T04:45:02.123

当你这样做时：

```
 return object.__getattribute__(self, x) 
```

您正在调用一个特定的函数——在对象类中定义的函数，而不是在 A 中定义的函数，因此没有递归。

当你这样做时：

```
 return self.x 
```

你让python选择调用哪个函数，它从A调用那个函数，你有一个无限递归。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-11-04T10:03:54.137

像这样写（**C**继承自**object**）：

```
class C(object):
   def __init__(self):
       self.x = 100

   def __getattribute__(self, x):
       return object.__getattribute__(self, x) 
```

现在你明白了为什么 object.__getattribute__(self, x) 有效——你正在调用父对象。

# .htaccess - 在 htaccess 中使用屏蔽的 url 重定向

> ID：13538326
> 
> 赞同：3
> 
> 时间：2012-11-24T04:39:06.847
> 
> 标签：.htaccess, mod-rewrite, redirect

我正在尝试像这样从一个网址重定向到另一个网址。我正在使用 cpanel htaccess

当用户转到时`www.domain1.com/sdomain`，它应该重定向到`www.mydomain.com/sdomain`但在地址栏中它应该显示为`www.domain1.com/sdomain`。

我不知道如何使用 .htaccess 进行此屏蔽和重定向。

有人请帮我做这件事。

提前致谢

# java - 如何在处理主要活动之前从另一种方法中获取价值？

> ID：13538328
> 
> 赞同：0
> 
> 时间：2012-11-24T04:39:33.947
> 
> 标签：java, android, xml, methods, settext

我希望将电话号码加载到字符串 xx"...这怎么可能？如何在方法之间共享数据？？我已尝试将方法公开，但这无济于事...。我知道活动从主要活动...那么如何从另一种方法获取数据然后处理主要活动？

```
public class MsgcontactActivity extends Activity {

    private static final int CONTACT_PICKER_RESULT = 1001;
    public void doLaunchContactPicker(View view) 
    {  
        Intent contactPickerIntent = new Intent(Intent.ACTION_PICK,Contacts.CONTENT_URI);  
        startActivityForResult(contactPickerIntent, CONTACT_PICKER_RESULT);  
    }

    EditText phoneTxt;
    TextView tv;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        tv=(TextView) findViewById(R.id.textView1);
        String xx=phoneTxt.getText().toString();
        Toast.makeText(getApplicationContext(), xx,Toast.LENGTH_LONG ).show();
    }

    @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    {  
         String phone="";
         Cursor contacts=null;
         try
         {
            if (resultCode == RESULT_OK) 
            {  
                switch (requestCode) 
                {  
                    case CONTACT_PICKER_RESULT:  
                        Uri result = data.getData();
                        String id = result.getLastPathSegment(); 
                        contacts=getContentResolver().query(Phone.CONTENT_URI, null, Phone.CONTACT_ID + "=?", new String[] { id },  null);
                        int phoneIdx = contacts.getColumnIndex(Phone.DATA); 
                        if (contacts.moveToFirst()) 
                        {
                           phone = contacts.getString(phoneIdx);  
                           EditText phoneTxt=(EditText)findViewById(R.id.phoneno);
                           phoneTxt.setText(phone);
                        } 
                        else 
                        {  
                           Toast.makeText(this, "error", 100).show();
                        }  
                        break;  
                    }
                }
                else 
                {
                    Toast.makeText(this, "Warning: activity result not ok",50).show();
                }  
            }
            catch (Exception e) 
            {  
                Toast.makeText(this, e.getMessage(), 50).show();  
            } 
            finally 
            {  
                if (contacts != null) 
                {  
                    contacts.close();  
                }
            }
        }
    }   
} 
```

XML 代码：-

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/relativeLayout3"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" >

    <EditText  
        android:layout_height="wrap_content"  
        android:id="@+id/phoneno"  
        android:inputType="text|phone"  
        android:layout_width="wrap_content"  
        android:layout_toLeftOf="@+id/Contacts"  
        android:layout_alignParentLeft="true"/>
    <Button  
        android:layout_width="wrap_content"  
        android:layout_height="wrap_content"  
        android:id="@+id/Contacts"  
        android:text="Contacts"  
        android:layout_alignParentRight="true" 
        android:onClick="doLaunchContactPicker"/>
    <TextView 
        android:text="TextView" 
        android:layout_width="wrap_content" 
        android:id="@+id/textView1" 
        android:layout_height="wrap_content" 
        android:layout_below="@+id/phoneno" 
        android:layout_alignParentLeft="true"/>

</RelativeLayout> 
```

**下次尝试**

```
public class MsgcontactActivity extends Activity {

private static final int CONTACT_PICKER_RESULT = 1001;
public void doLaunchContactPicker(View view) 
    {  
        Intent contactPickerIntent = new Intent(Intent.ACTION_PICK,Contacts.CONTENT_URI);  
        startActivityForResult(contactPickerIntent, CONTACT_PICKER_RESULT);  

    }

EditText phoneTxt;
        Button b;
TextView tv;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
                b=(Button) findViewById(R.id.button1);
        tv=(TextView) findViewById(R.id.textView1);
        b.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                doLaunchContactPicker(v);

            }
        });

        String xx=phoneTxt.getText().toString();
        tv.setText(xx);
}

    @Override
    public void onActivityResult(int requestCode, int resultCode,
            Intent data) {
        {  
             String phone="";
             Cursor contacts=null;
             try
             {
                if (resultCode == RESULT_OK) 
                {  
                    switch (requestCode) 
                    {  
                    case CONTACT_PICKER_RESULT:  

                     Uri result = data.getData();

                     String id = result.getLastPathSegment(); 

                     contacts=getContentResolver().query(Phone.CONTENT_URI, null, Phone.CONTACT_ID + "=?", new String[] { id },  null);

                     int phoneIdx = contacts.getColumnIndex(Phone.DATA); 
                     if (contacts.moveToFirst()) 
                     {

                           phone = contacts.getString(phoneIdx);  

                           EditText phoneTxt=(EditText)findViewById(R.id.editText1);

                           phoneTxt.setText(phone);     

                        } 
                     else 
                     {  
                      Toast.makeText(this, "error", 100).show();
                        }  
                     break;  
                    }  

                } 
                else 
                {  

                    Toast.makeText(this, "Warning: activity result not ok",50).show();  

                }  
            }
             catch (Exception e) 
             {  
                Toast.makeText(this, e.getMessage(), 50).show();  
                } 
             finally 
             {  
                if (contacts != null) 
                {  
                    contacts.close();  
                }
             }
    }
    }

} 
```

HTML 代码

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/relativeLayout3"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" >
<EditText android:layout_width="wrap_content" android:layout_height="wrap_content" android:id="@+id/editText1" android:layout_alignParentTop="true" android:layout_alignParentLeft="true">
    <requestFocus></requestFocus>
</EditText>
<Button android:id="@+id/button1" android:layout_width="wrap_content" android:text="Button" android:layout_height="wrap_content" android:layout_alignParentTop="true" android:layout_toRightOf="@+id/editText1" android:layout_marginLeft="33dp"></Button>
<TextView android:text="TextView" android:layout_width="wrap_content" android:id="@+id/textView1" android:layout_height="wrap_content" android:layout_alignParentBottom="true" android:layout_centerHorizontal="true"></TextView>
 </RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T04:57:44.730

尝试`doLaunchContactPicker`从`onCreate`, 之后调用您的方法`setContentView`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T05:28:42.097

`doLaunchContactPicker()`在 onCreate()方法之后调用此方法`setContentView(R.layout.main);`，如果您不在方法中使用视图，`doLaunchContactPicker()`则不要在方法`View`中作为参数传递并在`Button btn=(Button) findViewById(R.id.Contacts);`之后添加此行`setContentView(R.layout.main);`

# java - 打印数组对象时使用 printf 格式化

> ID：13538333
> 
> 赞同：1
> 
> 时间：2012-11-24T04:40:56.083
> 
> 标签：java, string, printing

我想知道您是否可以执行以下操作：

```
System.out.printf("%10.2f", car[i]); 
```

考虑到我已经重新定义了`toString()`方法。

```
public void toString() {
    return this.getPrice + "" + this.getBrandName;
} 
```

否则你如何格式化你打印的价格？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T04:48:08.620

由于`toString()`返回 a ，您可以使用（[参见 this](http://ideone.com/7isknn)）而不是（[参见 this](http://ideone.com/Czly59)`String` ）格式化打印的对象。`%s``%f`

您可以将价格作为浮点数获取，并将格式化的数字与品牌一起打印：

```
class Car {
    public String toString() {
        return "I'm a car";
    }
    public double getPrice() {
        return 20000.223214;
    }
    public String getBrandName() {
        return "Brand";
    }
}
class Main {
    public static void main(String[] args) {
        Car c = new Car();
        System.out.printf("%10.2f %s", c.getPrice(), c.getBrandName());
    }
} 
```

输出

```
 20000.22 Brand 
```

（如果更容易，请以美分表示价格。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T05:13:12.773

请改用[String.format()](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/String.html#format%28java.lang.String,%20java.lang.Object...%29)。

```
public void toString() {
    return String.format("%10.2f", this.getPrice) + "" + this.getBrandName;
} 
```

# javascript - 这两个是相同的，还是一个比另一个更好/更安全？

> ID：13538334
> 
> 赞同：1
> 
> 时间：2012-11-24T04:41:40.333
> 
> 标签：javascript, null, ternary-operator, logical-operators

恐怕对`match`用户输入字符串的 a 进行细化会导致错误，因为使用设置`match`了`g`标志且与字符串不匹配的正则表达式会返回`null`，这是不可细化的。

所以我剩下以下两个选项，据我所知，它们是相同的。但我只是想确保我正确理解它。

```
 var tldMatcher = /[^.]+\.?$/g
      , tld = str.match(tldMatcher) ? str.match(tldMatcher)[0] : null; 
```

...和...

```
 var tldMatcher = /[^.]+\.?$/g
      , tld = str.match(tldMatcher) && str.match(tldMatcher)[0]; 
```

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T04:54:08.970

就个人而言，我总是在使用with`|| []`时使用。那是：`.match``g`

```
var matches = str.match(/regex/g) || []; 
```

这确保`matches`将始终是一个字符串数组（但可能为空）。在您的情况下，可以这样做：

```
var tldMatcher = /[^.]+\.?$/g
  , tld = (str.match(tldMatcher) || [])[0]; 
```

# android - 索引越界异常。大批

> ID：13538335
> 
> 赞同：2
> 
> 时间：2012-11-24T04:41:43.023
> 
> 标签：android, arrays

我正在尝试将数组中的项目添加到列表视图中，但我总是遇到异常。

下面是我如何添加项目的代码：

```
items.add(new SectionItem("President"));
                for(int a = 0; a <= presList.size(); a++)
                {
                    String name = presList.get(a);
                    String companyName = presList.get(a + 1);
                    Log.d("company name:", companyName);
                    items.add(new EntryItem(name,companyName));
                } 
```

日志输出：

```
11-24 04:36:44.981: I/System.out(719): [潘国驹博士, 世界科技出版公司(董事主席)]
11-24 04:36:44.990: D/company name:(719): 世界科技出版公司(董事主席)
11-24 04:36:44.990: D/AndroidRuntime(719): Shutting down VM
11-24 04:36:44.990: W/dalvikvm(719): threadid=1: thread exiting with uncaught exception (group=0x409c01f8)
11-24 04:36:45.010: E/AndroidRuntime(719): FATAL EXCEPTION: main
11-24 04:36:45.010: E/AndroidRuntime(719): java.lang.IndexOutOfBoundsException: Invalid index 2, size is 2
11-24 04:36:45.010: E/AndroidRuntime(719):  at java.util.ArrayList.throwIndexOutOfBoundsException(ArrayList.java:251)
11-24 04:36:45.010: E/AndroidRuntime(719):  at java.util.ArrayList.get(ArrayList.java:304)
11-24 04:36:45.010: E/AndroidRuntime(719):  at com.scba.organization.CouncilList$LoadAllMembers$1.run(CouncilList.java:192)
11-24 04:36:45.010: E/AndroidRuntime(719):  at android.app.Activity.runOnUiThread(Activity.java:4170)
11-24 04:36:45.010: E/AndroidRuntime(719):  at com.scba.organization.CouncilList$LoadAllMembers.onPostExecute(CouncilList.java:184)
11-24 04:36:45.010: E/AndroidRuntime(719):  at com.scba.organization.CouncilList$LoadAllMembers.onPostExecute(CouncilList.java:1)
11-24 04:36:45.010: E/AndroidRuntime(719):  at android.os.AsyncTask.finish(AsyncTask.java:602)
11-24 04:36:45.010: E/AndroidRuntime(719):  at android.os.AsyncTask.access$600(AsyncTask.java:156)
11-24 04:36:45.010: E/AndroidRuntime(719):  at android.os.AsyncTask$InternalHandler.handleMessage(AsyncTask.java:615)
11-24 04:36:45.010: E/AndroidRuntime(719):  at android.os.Handler.dispatchMessage(Handler.java:99)
11-24 04:36:45.010: E/AndroidRuntime(719):  at android.os.Looper.loop(Looper.java:137)
11-24 04:36:45.010: E/AndroidRuntime(719):  at android.app.ActivityThread.main(ActivityThread.java:4424)
11-24 04:36:45.010: E/AndroidRuntime(719):  at java.lang.reflect.Method.invokeNative(Native Method)
11-24 04:36:45.010: E/AndroidRuntime(719):  at java.lang.reflect.Method.invoke(Method.java:511)
11-24 04:36:45.010: E/AndroidRuntime(719):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
11-24 04:36:45.010: E/AndroidRuntime(719):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
11-24 04:36:45.010: E/AndroidRuntime(719):  at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-24T04:43:31.613

采用

```
for(int a = 0; a <= presList.size()-1; a++) 
```

或者

```
for(int a = 0; a < presList.size(); a++) 
```

代替

```
for(int a = 0; a <= presList.size(); a++) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-24T04:43:14.393

它应该是

```
for(int a = 0; a < presList.size(); a++)
{
        String name = presList.get(a);
        String companyName = presList.get(a);
        Log.d("company name:", companyName);
        items.add(new EntryItem(name,companyName));
} 
```

假设我们有`ArrayList`5 个项目

所以访问的元素`ArrayList`从索引 0 到 4 开始

# php - 如何使用javascript捕获缓存清除事件？

> ID：13538337
> 
> 赞同：1
> 
> 时间：2012-11-24T04:41:49.150
> 
> 标签：php, javascript, sockets, browser-cache

我正在开发一个基于套接字的聊天项目。我将所有在线用户的姓名存储在数据库中，以便检查重复的用户名。如果我们正在聊天并且我们直接关闭浏览器，我的应用程序很容易使用户离线，但问题是当我们当时直接清除缓存时，不会调用从数据库中删除用户的 AJAX 调用。因此，即使我们已经清除了缓存并离线，我们也会在线显示给前面的用户，这意味着该条目仍然存在于数据库中，因为没有触发 AJAX 调用并且我们已经直接清除了缓存。

因此，任何对如何使用 javascript 捕获缓存清除事件有一些想法的人，请告诉我。

我在这个问题上做了很多谷歌搜索，但没有找到。

任何建议都会被受理。

提前谢谢......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T04:46:20.607

您要求的内容是不可能的（无法检测用户何时从 JavaScript 中清除浏览器缓存）。

您是否考虑过每隔一段时间在两个用户之间发送一个不可见的“ping”（选择一个阈值，例如 1 分钟），并且对于两个用户，如果他们没有收到一个 ping（阈值 + 较小的阈值），将考虑另一个用户离线（或更强有力地发送另一个“我还在这里”ping 的请求）。

# php - 使用 php 表单 shopify webhook 的 xml 解析器

> ID：13538338
> 
> 赞同：1
> 
> 时间：2012-11-24T04:42:10.070
> 
> 标签：php, xml, parsing, shopify

我在创建订单时使用 webhook 更新我的 MS sql 服务器，以下是我从 shopify webhook 获得的 xml

```
<?xml version="1.0" encoding="UTF-8"?>
<order>
  <buyer-accepts-marketing type="boolean">true</buyer-accepts-marketing>
  <closed-at type="datetime" nil="true"></closed-at>
  <currency>USD</currency>
  <email>jon@doe.ca</email>
  <financial-status>voided</financial-status>
  <fulfillment-status>pending</fulfillment-status>
  <gateway>bogus</gateway>
  <id type="integer">123456</id>
  <name>#9999</name>
  <note nil="true"></note>
  <number type="integer">234</number>
  <subtotal-price type="decimal">229.94</subtotal-price>
  <taxes-included type="boolean">false</taxes-included>
  <total-discounts type="decimal">0.0</total-discounts>
  <total-line-items-price type="decimal">229.94</total-line-items-price>
  <total-price type="decimal">239.94</total-price>
  <total-price-usd type="decimal" nil="true"></total-price-usd>
  <total-tax type="decimal">0.0</total-tax>
  <total-weight type="integer">0</total-weight>
  <updated-at type="datetime">2012-11-23T12:34:25-05:00</updated-at>
  <created-at type="datetime">2012-11-23T12:34:25-05:00</created-at>
  <token nil="true"></token>
  <landing-site nil="true"></landing-site>
  <referring-site nil="true"></referring-site>
  <cancelled-at type="datetime">2012-11-23T12:34:25-05:00</cancelled-at>
  <cancel-reason>customer</cancel-reason>
  <cart-token nil="true"></cart-token>
  <browser-ip nil="true"></browser-ip>
  <landing-site-ref nil="true"></landing-site-ref>
  <order-number type="integer">1234</order-number>
  <discount-codes type="array"/>
  <note-attributes type="array">
  </note-attributes>
  <processing-method nil="true"></processing-method>
  <line-items type="array">
    <line-item>
      <requires-shipping type="boolean">true</requires-shipping>
      <fulfillment-service>manual</fulfillment-service>
      <grams type="integer">5000</grams>
      <price type="decimal">199.99</price>
      <quantity type="integer">1</quantity>
      <sku>SKU2006-001</sku>
      <title>Sledgehammer</title>
      <product-id type="integer" nil="true"></product-id>
      <variant-id type="integer" nil="true"></variant-id>
      <vendor nil="true"></vendor>
      <variant-title nil="true"></variant-title>
      <fulfillment-status nil="true"></fulfillment-status>
      <name>Sledgehammer</name>
      <variant-inventory-management nil="true"></variant-inventory-management>
      <properties type="array">
      </properties>
    </line-item>
    <line-item>
      <requires-shipping type="boolean">true</requires-shipping>
      <fulfillment-service>manual</fulfillment-service>
      <grams type="integer">500</grams>
      <price type="decimal">29.95</price>
      <quantity type="integer">1</quantity>
      <sku>SKU2006-020</sku>
      <title>Wire Cutter</title>
      <product-id type="integer" nil="true"></product-id>
      <variant-id type="integer" nil="true"></variant-id>
      <vendor nil="true"></vendor>
      <variant-title nil="true"></variant-title>
      <fulfillment-status nil="true"></fulfillment-status>
      <name>Wire Cutter</name>
      <variant-inventory-management nil="true"></variant-inventory-management>
      <properties type="array">
      </properties>
    </line-item>
  </line-items>
  <shipping-lines type="array">
    <shipping-line>
      <title>Generic Shipping</title>
      <code nil="true"></code>
      <price type="decimal">10.0</price>
      <source>shopify</source>
    </shipping-line>
  </shipping-lines>
  <tax-lines type="array"/>
  <billing-address>
    <first-name>Bob</first-name>
    <last-name>Biller</last-name>
    <address1>123 Billing Street</address1>
    <address2 nil="true"></address2>
    <city>Billtown</city>
    <company>My Company</company>
    <country>United States</country>
    <phone>555-555-BILL</phone>
    <province>Kentucky</province>
    <zip>K2P0B0</zip>
    <latitude type="decimal" nil="true"></latitude>
    <longitude type="decimal" nil="true"></longitude>
    <name>Bob Biller</name>
    <country-code>US</country-code>
    <province-code>KY</province-code>
  </billing-address>
  <shipping-address>
    <first-name>Steve</first-name>
    <last-name>Shipper</last-name>
    <address1>123 Shipping Street</address1>
    <address2 nil="true"></address2>
    <city>Shippington</city>
    <company>Shipping Company</company>
    <country>United States</country>
    <phone>555-555-SHIP</phone>
    <province>Kentucky</province>
    <zip>K2P0S0</zip>
    <latitude type="decimal" nil="true"></latitude>
    <longitude type="decimal" nil="true"></longitude>
    <name>Steve Shipper</name>
    <country-code>US</country-code>
    <province-code>KY</province-code>
  </shipping-address>
  <fulfillments type="array"/>
  <customer>
    <email>john@test.com</email>
    <accepts-marketing type="boolean" nil="true"></accepts-marketing>
    <first-name>John</first-name>
    <last-name>Smith</last-name>
    <orders-count type="integer">0</orders-count>
    <total-spent type="decimal">0.0</total-spent>
    <note nil="true"></note>
    <created-at type="datetime" nil="true"></created-at>
    <updated-at type="datetime" nil="true"></updated-at>
    <state>disabled</state>
    <last-order-id type="integer" nil="true"></last-order-id>
    <tags></tags>
    <last-order-name nil="true"></last-order-name>
  </customer>
</order> 
```

下面是我用来获取数据的 php 脚本（XML 解析器）

```
$xmlString = file_get_contents('php://input');
$dom = new DomDocument();
$dom->loadXML($xmlString);
$itemList = $dom->getElementsByTagName('line-item');

foreach($itemList as $item) {

$qty='';
$sku='';

foreach($item->childNodes as $child) {

        if ($child->localName == 'quantity') {
      $qty = $child->textContent;
    }
    if ($child->localName == 'sku') {
      $sku = $child->textContent;
    }
} 
```

如您所见，我可以使用“line-item”中的数据，例如“quantity”、“sku”节点，但是我如何使用“order”中的数据，我的意思是“total-price”节点

很抱歉让你感到困惑，如果我这样做了

非常感谢您提前...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T05:13:24.253

乍一看您的代码..您可以通过以下方式访问总价格节点

```
$order = $dom->getElementsByTagName('order');

foreach($order as $get){

    foreach($get->childNodes as $child) {
        if ($child->localName == 'total-price') {
        var_dump($child->textContent); // this will get your total-price :)
        }
    } 
```

顺便说一句.. 如果你从你的订单节点开始会更好.. :) 我希望我回答了你的问题。我在本地测试它，所以它应该可以工作。

更新：

比我上面的帖子容易得多。

```
$order = $dom->getElementsByTagName('order');

foreach($order as $get){
    $total = $get->getElementsByTagName( "total-price" );
    var_dump($total->item(0)->nodeValue);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T05:15:50.730

这是您需要制作两个文件的问题的步骤。

1) itune API 的包装文件，例如“tune.php”

2）文件形式检索结果“get_result_from_api.php”

**第 1 步：获取 API 网址**

确保您的 itune api 正常工作

例如

在这里输入代码

```
$authentic_api = $this->endpointurl . '?api_key=' . $this->api_key . '&method=' . 'aj.jobs.search' . '&keywords=' . $this->keywords . '&location=' . $this->location. '&perpage=' . $this->perpage ;

echo $authentic_api;

OUTPUT:

http://www.authenticjobs.com/api/?api_key=3fb9a030d223ac8bb06eb07fea846182&method=aj.jobs.search&keywords=&location=&perpage=100 
```

在新选项卡中检查您的输出 api，并确保它以 XML 格式或 HTML 格式显示结果

第 2 步：将 api 结果存储为 XML 或 HTML 格式，反之亦然。

例如

```
$xmlstr = @file_get_contents( $authentic_api );

if( !$xmlstr == null )

$xml = new SimpleXMLElement( $xmlstr );

if( empty($xml) || $xml == null )

return null;

$this->aj_results = $xml;

return $xml; 
```

第 3 步：解析您的 xml 或 html 结果解析结果以获取所选数据。并将其存储在数组中并将值返回到“get_result_from_api.php”

第 4 步：使用 foreach 循环打印出来，您需要打印出从包装类中获得的结果。

```
**e.g for your xml results**

foreach($results as $result)
      {
        echo 'Currency : '.$result['currency'].'<br />';
        echo 'Email : '.$result['email'].'<br />';
        echo 'financial-status : '.$result['financial-status'].'<br />'; 
        //And all the other elements by it's tag name..
      } 
```

希望这些东西可以帮助你。

因为“希望是美好的事物，可能是最好的事物，美好的事物永远不会消亡！”

# cakephp - Cakephp-创建多选表单域

> ID：13538341
> 
> 赞同：6
> 
> 时间：2012-11-24T04:42:56.300
> 
> 标签：cakephp, cakephp-2.0, helpers

我需要使用 cakephp 中的表单助手创建一个多选表单字段。该字段中的值将从具有 HABTM 的表填充到当前模型。

实现这一点的最佳方法是什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-24T17:10:12.360

在您的 ctp 文件中：

```
echo $this->Form->input('Category', array(
    'multiple' => 'multiple',
    'type' => 'select',
)); 
```

在你的行动中：

```
$cats = $this->Category->find('all');
foreach ($cats as $category) {
    $categories[$category['Category']['id']] = $category['Category']['title'];
}
$this->set(compact('categories')); 
```

# azure - Azure 网站试用设置为“有限”状态

> ID：13538365
> 
> 赞同：8
> 
> 时间：2012-11-24T04:46:52.693
> 
> 标签：azure

我们注册了 windows azure 90 天免费试用，并创建了 4 个网站、2 个虚拟服务器和 2 个 SQL 数据库。他们已经运行了大约一个月，并且一直做得很好。

今晚，我接到一个用户的电话，说他们都没有起床。所以我去仪表板找到：

![azure 网站试用受限状态](../Images/1ebd333639e430231466c6a76494ffdf.png)

没有关于“受限”状态的工具提示，我在试用描述中找不到任何地方说明它们为什么会受到限制。有任何想法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-24T04:52:38.243

我有同样的问题。任何地方都没有文档，但我发现了这个。希望这是原因。我也在美国西部：

[https://www.windowsazure.com/en-us/support/service-dashboard/](https://www.windowsazure.com/en-us/support/service-dashboard/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T04:53:13.203

现在好像有几个人在[问](https://stackoverflow.com/questions/13538361/why-does-my-azure-website-status-become-limited)这个问题。可能是停电了

# autohotkey - AHK - 更改 GUI 图片

> ID：13538366
> 
> 赞同：2
> 
> 时间：2012-11-24T04:47:33.010
> 
> 标签：autohotkey

我有一个带有 AutoHotkey 的 GUI 窗口，但我不知道如何更改图片。我查看了 GuiControl 但文档确实缺乏（尤其是示例）。到目前为止我的代码：

```
Gui,Add,Picture,w300 h-1,first.png
Gui,Add,Button,x60 w80 h30, Start
Gui,Show
Return

GuiClose:
ExitApp
Return

ButtonStart:
;How can I change the picture?
return 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T10:26:47.707

您需要为控件设置关联变量。

```
Gui,Add,Picture,w300 h-1 vMyPicture, first.png
Gui,Add,Button,x60 w80 h30, Start
Gui,Show
Return

GuiClose:
ExitApp
Return

ButtonStart:
    GuiControl,, MyPicture, second.png
return 
```

# objective-c - UIViews 和 iPhone 5

> ID：13538369
> 
> 赞同：0
> 
> 时间：2012-11-24T04:49:16.903
> 
> 标签：objective-c, ios, ios6

> **可能重复：**
> [iOS6 iPhone 5 屏幕底部没有可点击的内容](https://stackoverflow.com/questions/12533058/ios6-iphone-5-nothing-clickable-at-bottom-of-screen)

我对 UIViews 有一个尴尬的问题，我正在升级一个应用程序以适应 iPhone 5 的屏幕尺寸，所以我正在扩展 Views 的高度以使其适合。在视图的底部有一个按钮，当我扩展视图以适应 iPhone 5 时，该按钮从不响应用户交互，就像有另一个透明视图覆盖并阻止用户交互一样。

其他人看到 UI 调整大小会发生这种情况吗？

# ruby - 连接数组中的元素

> ID：13538371
> 
> 赞同：0
> 
> 时间：2012-11-24T04:49:46.823
> 
> 标签：ruby, string

我在 Ruby 中有一个数组，比如`["dog", "cat", bat"]`. 如何将它们加入一个字符串，其中单词用空格分隔，例如`"dog cat bat"`？我知道迭代元素并一个接一个地加入它们很容易，但是有没有单行的方式？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-24T04:51:01.630

```
a = ["dog", "cat", "bat"]
a.join(" ") #=> "dog cat bat" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-24T08:40:35.333

可爱的捷径：

```
["dog", "cat", "bat"] * ' '
#=> "dog cat bat" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T05:20:50.250

[“狗”、“猫”、“蝙蝠”].join ' '

# c# - 通过单击按钮创建对象实例

> ID：13538372
> 
> 赞同：0
> 
> 时间：2012-11-24T04:50:35.857
> 
> 标签：c#, instance-variables, buttonclick

我目前正在创建一个非常简单的银行账户程序：用户输入账户持有人姓名、帐号和期初余额，然后按“继续”按钮通过存款和取款来使用该账户。`BankAccount`我编写了一个包含所需数据成员和方法的单独类。我已将创建 BankAccount 对象的代码放在`Continue`按钮单击事件中

```
BankAccount currentAccount = new BankAccount(acctName, acctNum, beginningBalance); 
```

但这似乎使其仅适用于该方法，并且`currentAccount`在我为“记录交易”（存款和取款）按钮编程单击事件时无法识别。

为了在单击“继续”按钮并在“记录交易”按钮单击事件中识别它时创建 BankAccount 对象，应该如何以及在哪里进行编码？如果需要任何澄清，或者您是否需要查看我的部分或全部代码，请告诉我。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-24T04:54:14.507

您需要在单击处理程序之外声明 BankAccount 对象以使其保持在范围内。如果这是您需要做的，您可以在点击处理程序中实例化它

*下面的代码没有经过测试编译。这只是为了让您了解所需的内容。确切的实现和方法签名将根据您使用的是 Winforms 还是 WPF 而有所不同*

```
BankAccount account = null;

public void Continue_onClickHandler(EventArgs e) {
  account = new BankAccount();
}

public void RecordTransaction_onClickHandler(EventArgs e) {
  if (account == null) {
     throw new Exception("BankAccount has not been instantiated");
  }

  // do whatever you need to do with account here
} 
```

# api - 通过 Gmail SMTP API 发送预定的电子邮件

> ID：13538387
> 
> 赞同：3
> 
> 时间：2012-11-24T04:52:55.043
> 
> 标签：api, smtp, gmail, schedule

有没有办法通过gmail api发送预定的，比如三天后的电子邮件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T05:06:53.277

不，很确定（还）没有这样的 API 调用。我建议将电子邮件创建为草稿并设置某种计划任务以便稍后发送。

如果您使用的是 Google App 引擎，则可以使用[cron service](https://developers.google.com/appengine/docs/python/config/cron)。

# objective-c - iOS 6 地图上的状态/建筑叠加层

> ID：13538388
> 
> 赞同：1
> 
> 时间：2012-11-24T04:53:05.083
> 
> 标签：objective-c, ios

我有一个应用程序，需要将叠加层添加到地图视图上的州和各个建筑物。我看过很多通过 WWDC 之类的演示，但我很难找出如何实际实现它。我不确定在哪里或如何获取数据，然后如何将其放入叠加层。我所知道的是，我必须以某种方式使用 MKPolygon，但仅此而已。

有人可以指导我怎么做吗？

# mysql - Mysql2::Error：“有子句”中的未知列“ctr”

> ID：13538397
> 
> 赞同：2
> 
> 时间：2012-11-24T04:54:13.517
> 
> 标签：mysql, ruby-on-rails, ruby-on-rails-3.2, rails-activerecord

**我收到类似的错误**

```
Mysql2::Error: Unknown column 'ctr' in 'having clause': SELECT COUNT(*) AS count_all, artists.id AS artists_id FROM `artists` INNER JOIN `photos` ON `photos`.`photoable_id` = `artists`.`id` AND `photos`.`photoable_type` = 'Artist' WHERE (admin_approved = 1) GROUP BY artists.id HAVING ctr >= 2 
```

**我的艺术家模型**我写范围

```
scope :approved, where("admin_approved = ?", true)
scope :completed_profile, joins(:photos).select("artists.*,count(photos.id) as ctr").group("artists.id").having("ctr >= 2") 
```

**在我的控制器中我写**

```
 def artists_completed_profile
     @artists = Artist.approved.completed_profile.page(params[:page]).per(10)
     @total_artists = @artists.size
  end 
```

**注意：** 当我在控制台中尝试时，我没有收到任何错误，但是当我在模型或控制器中写入时，我会收到此错误。

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-24T05:10:40.513

您的分页中的某些内容`.count`很可能在尝试计算匹配总数以及总页数时执行。这`.count`将忽略`.select`您的范围的一部分，这就是您看到的原因：

```
SELECT COUNT(*) AS count_all, artists.id AS artists_id ... 
```

被发送到 MySQL。您的`ctr`别名由您定义，`.select`因此`.count`'s SQL 失败。您应该能够通过不在`ctr`HAVING 中使用来解决此问题，只需使用 raw `count(photos.id)`：

```
scope :completed_profile, ...having("count(photos.id) >= 2") 
```

# javascript - 在页面中搜索链接（js）

> ID：13538403
> 
> 赞同：0
> 
> 时间：2012-11-24T04:55:10.547
> 
> 标签：javascript, jquery, json, dom

我知道这个问题可能比这里通常问的更开放，但我想知道从网页收集所有链接然后将这些值放入 javascript 对象的最佳方法是什么。请原谅我，因为我不精通 javascript。

那些无疑会激怒我的人应该知道我已经“完成了我的功课”。

[在家工作](http://www.java2s.com/Tutorial/JavaScript/0280__Document/Getalllinksonapage.htm)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T04:57:53.820

```
var links = document.getElementsByTagName('a'); 
```

...返回链接元素。或者，如果您想要实际的网址，请添加以下内容：

```
links = Array.prototype.map.call(links, function(el) {return el.href;}); 
```

# ember.js - ember-data fixtureAdapter 与嵌入式 hasMany

> ID：13538409
> 
> 赞同：1
> 
> 时间：2012-11-24T04:56:51.333
> 
> 标签：ember.js, ember-data

我已经为此工作了几个小时，摆弄了许多不同的组合以使其正常工作。

```
LO.List = DS.Model.extend({
  name: DS.attr('string'),
  listItems: DS.hasMany('LO.ListItem', { embedded: true })
});

var lists = LO.store.findAll(LO.List),
    firstList = lists.objectAt(0),
    listItems = firstList.get('listItems'),
    firstListItemId = listItems.objectAt(0).get('id');

console.log(firstListItemId) // [object Object] 
```

[http://jsfiddle.net/pjmorse/65eRS/](http://jsfiddle.net/65eRS/21/)

似乎“嵌入式”选项根本不起作用（我似乎也无法在源代码中找到它的任何记录，但文档仍然说要使用它）。我无法找到在此处使用的正确选项（或者它是否可以正常工作）。任何人都知道我在哪里可以找到这个工作？

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T13:55:53.980

Ember-data（版本 8）确实支持加载嵌入的相关对象。问题是您必须通过调用其“映射”函数来配置适配器的序列化程序以加载嵌入式数据。例如，这可以在序列化程序的“init”中完成，如下所示：

```
LO.Serializer = DS.Serializer.extend({
    init: function(){
      this._super();
      this.map(LO.List, {
        listItems: {
          embedded: 'load'
        }
      });
    }
}); 
```

你可以在[这里](http://jsfiddle.net/olmeca/2f7FX/1/)找到你的小提琴的工作改编。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T12:47:19.097

Ember 异步返回数据，而不是您的代码建议的同步返回数据。这意味着变量“lists”只有在从持久层获取数据时才会更新。

解决方案：绑定。这可以通过多种方式发挥作用，具体取决于您想要做什么；例如，您可以将变量“list”绑定到流入视图的控制器变量。如果您需要进一步说明，请告诉我。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-24T14:39:09.860

Ember-data 已删除对嵌入数据的支持。我几乎可以肯定这是暂时的，并且会说它应该作为适配器问题被带回库中。

同时，随意使用我写的这个相当丑陋[的 hasManyEmbedded shim](https://gist.github.com/4139842)作为只读嵌入式关联的权宜之计。

```
listItems: DS.hasManyEmbedded('LO.ListItem') 
```

这[是使用此 shim 的小提琴的叉子](http://jsfiddle.net/dgeb/RFWHC/)。

# c# - 创建带有可变日期范围的图表 - 数据来自访问，最小和最大日期是从 dame 数据源的下拉列表中选择的

> ID：13538415
> 
> 赞同：1
> 
> 时间：2012-11-24T04:58:19.013
> 
> 标签：c#, datetime, data-binding, charts, type-conversion

我似乎在创建股票图表时遇到了问题。

我在访问 1 只股票中有一个简单的数据集，其中包含价格数据（双倍）和每天列为日期/时间的数据。

因此，当我将数据源加载到 C# 中时，数据会顺利进入我的图表。但我不想看到所有数据（从 1980 年至今），我只想看到图表上显示的数据默认为 1 年前 - 现在，然后我希望能够更改显示的数据范围。

我放入了 2 个日期/时间选择器，1 个用于开始，1 个用于结束范围。

但是当我声明选择的日期并将它们设置为变量名称时，然后将图表 x 轴最小值和最大值设置为这些各自的值，我遇到了“类型不是双重”的问题。即使图表轴设置为日期/时间...

谁能帮我一把？

# objective-c - 加载 Quartz.framework Objective-C 后出现奇怪的错误

> ID：13538417
> 
> 赞同：2
> 
> 时间：2012-11-24T04:58:24.960
> 
> 标签：objective-c, duplicates, state, quartz-graphics, appkit

为了将 PDF 文档加载到 PDFView 中，我将 Quartz.framework 添加到我的项目中。

从那时起，虽然我到目前为止还没有使用过它，但我收到了奇怪的错误消息： **多个名为“状态”的方法发现结果、参数类型或属性不匹配**

我正在使用来自 AppKit.framework/NSCell的**state**方法来检查复选框是打开还是关闭，如下所示：

```
BOOL replaceCheckBoxFlag = ([sender state] == NSOnState); 
```

作为 Quartz.framework 一部分的 ImageCaptureCore.framework 也拥有一个方法**state**。Xcode 怎么可能会感到困惑？

我能做些什么？有什么提示吗？

罗纳德

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-24T05:03:06.040

发生这种情况是因为`sender`被声明为 type `id`，这意味着编译器知道它是一个 Objective-C 对象，但它不知道它属于哪个类。因此，它查看了所有类定义并找到了两个匹配项，但它不知道要使用哪一个。

解决方案是强制转换或使用正确类型的新变量：

```
BOOL replaceCheckBoxFlag = ([(NSCell *)sender state] == NSOnState); 
```

或者

```
NSCell *cell = sender;
BOOL replaceCheckBoxFlag = ([cell state] == NSOnState); 
```

# python - 在嵌套字典中将值从字符串转换为整数

> ID：13538419
> 
> 赞同：-1
> 
> 时间：2012-11-24T04:59:10.637
> 
> 标签：python, string, dictionary, python-3.x, integer

我想将字典中的数字更改为 int 值，以便稍后在我的程序中使用。到目前为止我有

```
import time
import math
x = 400
y = 300
def read_next_object(file):    
        obj = {}               
        for line in file:      
                if not line.strip(): continue
                line = line.strip()                        
                key, val = line.split(": ")                
                if key in obj and key == "Object": 
                        yield obj                       
                        obj = {}                              
                obj[key] = val

        yield obj              

planets = {}                   
with open( "smallsolar.txt", 'r') as f:
        for obj in read_next_object(f): 
                planets[obj["Object"]] = obj    

print(planets)                

scale=250/int(max([planets[x]["Orbital Radius"] for x in planets if "Orbital Radius" in planets[x]]))
print(scale) 
```

输出是

```
{'Sun': {'Object': 'Sun', 'Satellites': 'Mercury,Venus,Earth,Mars,Jupiter,Saturn,Uranus,Neptune,Ceres,Pluto,Haumea,Makemake,Eris', 'Orbital Radius': '0', 'RootObject': 'Sun', 'Radius': '20890260'}, 'Moon': {'Object': 'Moon', 'Orbital Radius': '18128500', 'Period': '27.321582', 'Radius': '1737000.10'}, 'Earth': {'Object': 'Earth', 'Satellites': 'Moon', 'Orbital Radius': '77098290', 'Period': '365.256363004', 'Radius': '6371000.0'}}
3.2426140709476178e-06 
```

我希望能够将 dict 中的数字转换为 ints 以供进一步使用。非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T07:26:43.727

以克里斯的回答为基础，

```
>>> myDict = {'Sun': {'Object': 'Sun', 'Satellites': 'Mercury,Venus,Earth,Mars,Jupiter,Saturn,Uranus,Neptune,Ceres,Pluto,Haumea,Makemake,Eris', 'Orbital Radius': '0', 'RootObject': 'Sun', 'Radius': '20890260'}, 'Moon': {'Object': 'Moon', 'Orbital Radius': '18128500', 'Period': '27.321582', 'Radius': '1737000.10'}, 'Earth': {'Object': 'Earth', 'Satellites': 'Moon', 'Orbital Radius': '77098290', 'Period': '365.256363004', 'Radius': '6371000.0'}}
>>> for body in myDict:
...      myDict[body]['Radius'] = float(myDict[body]['Radius'])
...      myDict[body]['Orbital Radius'] = float(myDict[body]['Orbital Radius'])
>>> myDict
13: {'Earth': {'Object': 'Earth',
           'Orbital Radius': 77098290.0,
           'Period': '365.256363004',
           'Radius': 6371000.0,
           'Satellites': 'Moon'},
 'Moon': {'Object': 'Moon',
          'Orbital Radius': 18128500.0,
          'Period': '27.321582',
          'Radius': 1737000.1},
 'Sun': {'Object': 'Sun',
         'Orbital Radius': 0.0,
         'Radius': 20890260.0,
         'RootObject': 'Sun',
         'Satellites': 'Mercury,Venus,Earth,Mars,Jupiter,Saturn,Uranus,Neptune,Ceres,Pluto,Haumea,Makemake,Eris'}} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T05:00:52.463

你可以施放它们。对于某些值`x`，您可以使用 将其转换为整数`int(x)`。

我还注意到您的某些值是浮点值。如果您希望将它们保留为浮点值（带小数），您可以使用`float(x)`.

# php - 设置cron作业php

> ID：13538434
> 
> 赞同：3
> 
> 时间：2012-11-24T05:04:11.407
> 
> 标签：php, codeigniter, cron

我如何以编程方式设置 cron 作业，

我们为我们的项目制作了一个安装程序，在安装时我需要使用 PHP 以编程方式设置一个 cron 作业。

请注意，该项目可以在 LINUX/WINDOWS 上运行，

我怎样才能做到这一点？还是有比 CRON JOB 更好的选择。

我正在使用 Codeigniter（始终欢迎基于原生 php 的解决方案，但如果通过 CI 将非常有帮助）

**cron 工作包括**

1.  检查特定表并删除无效数据
2.  将值从 mailServer 插入 DB
3.  检查某些文件的可用性。

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-24T05:09:44.337

这是一篇**很好的文章**，用于从 PHP 管理您的 Cron 作业

[http://net.tutsplus.com/tutorials/php/managing-cron-jobs-with-php-2/](http://net.tutsplus.com/tutorials/php/managing-cron-jobs-with-php-2/)

此示例包含有关如何从 PHP 编写 Cron 作业的完整描述，该作业可通过带有完整源代码的界面进行管理。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-24T06:09:21.560

Cron 是一个用于 linux 的作业调度程序。它不能在 Windows 上工作（除非你开始喜欢 Cygwin 和 etecetera）。如果您必须在系统范围内支持它，跨各种未知系统并且全部使用 PHP（无法按原样安排事情），您可以求助于以下三种使用的解决方案中的任何一种：

**来自地面控制的电话**
*（最好的资源，具体时间，最优雅的解决方案）*

1.  让你自己的机器运行 cron 和 ssh'ing 其他机器来运行命令
2.  让您自己的机器运行 cron 并访问*“秘密 url”的*ro 运行命令
3.  有一个外部服务，比如[SetCronJob](https://www.setcronjob.com/)调用你的*“秘密网址”*

**Random Job Runner**
*（最容易实现，资源适中）*

如果您需要做一些不会直接影响用户在您网站上的行为方式的事情，并且它对时间不敏感（只需要做），您可以求助于以统计概率运行它。

```
// this will run on average once every 100 page views
if(rand(1, 100)==1) runJobQueue(); 
```

**最坏**
*的情况（资源更难）*

如果您的工作必须经常完成，因为它会直接影响用户并且它必须满足一些时间安排，您可以保存查询并使用上次运行时间戳更新数据库，并继续检查该工作是否必须重新执行跑

```
// if has passed 1 hour since last update... re-update it
$result = mysql_query("SELECT `timestamp` FROM job_times WHERE whatever...")
if(mysql_result($result, 2) >= ( now() - 3600)) {
    runJobQueue() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T10:28:35.663

cron 作业可用于 linux，Windows 中的替代方案是调度任务。 [http://support.microsoft.com/kb/308569](http://support.microsoft.com/kb/308569)

# mysql - 事务中的 MySQL 回滚

> ID：13538436
> 
> 赞同：1
> 
> 时间：2012-11-24T05:04:28.723
> 
> 标签：mysql, stored-procedures, error-handling, transactions

我已经定义了一个这样的函数 -

```
...
DECLARE EXIT HANDLER FOR SQLEXCEPTION ROLLBACK; 
DECLARE EXIT HANDLER FOR SQLWARNING ROLLBACK SET error_key = 1 AND error_message = 'Failed -- Rollback.';
BEGIN
     SELECT 'Insert Failed.';
     CALL log_error(error_key,  error_message);
 END ; 

START TRANSACTION;

     DECLARE EXIT HANDLER FOR 1062 SET error_key = 02 AND error_message = 'Insert Failed';
     BEGIN
        SELECT 'Attempt to create a duplicate entry in the follow table.';
        CALL log_error(error_key,  error_message);
      END; 
      INSERT INTO `user_table` (...) VALUES (...);

      /* Call the trigger to update the profile table */
      CALL updateAnotherTable(@result1);
      CALL updateAnotherTable1(@result2);

IF @retsult1=0 OR @retsult2=0 THEN
  ROLLBACK;
ELSE
  COMMIT;
END IF; 
... 
```

我收到以下错误 -

```
 You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'DECLARE EXIT HANDLER FOR SQLEXCEPTION ROLLBACK; DECLARE EXIT HANDLER FOR SQL 
```

**编辑**

我更新了我的proc我仍然收到错误..

```
 DECLARE exit handler for sqlexception sqlwarning 
 BEGIN        
       SET error_key = 901;
       SET error_message = 'Insert Failed.';
       CALL log_error(error_key,  error_message);
       ROLLBACK;
 END; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T05:20:31.187

在处理程序中使用复合语句时，您需要将它们嵌入到 BEGIN ... END 块中：

```
DECLARE EXIT HANDLER FOR 1062
BEGIN
    SET error_key = 02;
    SET error_message = 'Insert Failed';
END 
```

有关详细信息，请参阅 MySQL 手册的[DECLARE HANDLER](http://dev.mysql.com/doc/refman/5.0/en/declare-handler.html)部分。

# javascript - 具有单选按钮功能的复选框

> ID：13538439
> 
> 赞同：2
> 
> 时间：2012-11-24T05:05:41.857
> 
> 标签：javascript, jquery, html

```
<style>
    .chb
    {
        width: 30px;
    }
</style>

<script type="text/javascript" src="jquery-1.5.2.js"></script>
<script>
    $(".chb").each(function() {
        $(this).change(function() {
            $(".chb").attr('checked',false);
            $(this).attr('checked',true);
        });
    });
</script>

<form action="demo_form.asp">
    <input type="checkbox" name="vehicle" value="Bike" class ="chb"> I have a bike<br>
    <input type="checkbox" name="vehicle" value="Car" checked="checked" class="chb"> I have a car <br>
</form> 
```

上面的代码包含两个具有单选按钮功能的复选框。这工作正常。但是如何在不使用 jquery 的情况下使用 javascript 来做到这一点。如何实现这一点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-24T05:34:50.237

如果您只关心功能并且有很多复选框，这是一个简单的解决方案。

```
<script>
    function func(checkBox) {
        var inputs = document.getElementsByTagName("input");
        for(var j = 0; j < inputs.length; j++) {
          if(inputs[j].type == "checkbox" && (inputs[j].className == "chb")){
             inputs[j].checked = false;
          }     
        }
        checkBox.checked = true;
    }
</script> 
```

现在将`onclick`事件添加到您的所有复选框，如下所示。

```
<input type="checkbox" name="vehicle" value="Bike" class ="chb" onclick="func(this);"> I have a bike<br>
<input type="checkbox" name="vehicle" value="Car" checked="checked" class="chb" onclick="func(this);"> I have a car <br> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-24T05:38:36.460

我假设您只需要对具有类名的输入使用此功能`chb`。否则将需要更多的循环。

与此处提到的其他解决方案不同，我的代码不需要添加`onclick`到每个复选框：

```
<!DOCTYPE html>
<html lang="en-CA">
<head>
    <meta charset="utf-8">
    <title> My page </title>
    <script>
    function doCrazyCheckRadioThing(v) {
        var checkboxes, i;

        for(i=0, checkboxes = document.getElementsByClassName('chb'); i<checkboxes.length; i+=1) {
            checkboxes[i].checked = (checkboxes[i].value === v);
        }
    }

    function init() {
        var checkboxes, i;

        for(i=0, checkboxes = document.getElementsByClassName('chb'); i<checkboxes.length; i+=1) {
            checkboxes[i].addEventListener('change', function() {
                doCrazyCheckRadioThing(this.value);
            }, false);
        }
    }

    document.addEventListener('DOMContentLoaded', init, false); 
    </script>
<body>
    <form action="demo_form.asp">
        <input type="checkbox" name="vehicle" id='bike' value="Bike" class="chb"> I have a bike<br>
        <input type="checkbox" name="vehicle" id='car' value="Car" checked="checked" class="chb"> I have a car <br>
    </form> 
```

我必须再次强调这是一种**非常非语义**的 HTML 编码方式来执行此操作。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-24T05:43:37.750

也许，你也可以吃蛋糕。如果这只是关于外观并且您愿意考虑 CSS 解决方案，您可以在代码中添加单选按钮，并使其看起来像复选框。

```
input[type="radio"] {
    -webkit-appearance: checkbox;
    -moz-appearance: checkbox;
}​ 
```

不需要 javascript 或 jQuery。但是，我还没有测试过它对跨浏览器的友好程度。绝对适用于 Chrome 和 Firefox。绝对不适用于 IE

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-24T05:29:35.820

**详细信息：**可能不是最优雅的代码，但它可以解决问题，并为您提供有关如何根据您的目的自定义它的想法

```
<input type="checkbox" name="chkFirst" onclick="CheckboxCheck('first')" />
<input type="checkbox" name="chkSecond" onclick="CheckboxCheck('second')" />

<script>
    function CheckboxCheck(checkbox)
    {
        var firstCheckbox = document.getElementById('chkFirst');
        var secondCheckbox = document.getElementById('chkSecond');

        if (checkbox == "first")
        {
            if (secondCheckbox.checked && firstCheckbox.checked == true)
            {
                secondCheckbox.checked = false;
            }
        }
        else
        {
            if (firstCheckbox.checked && secondCheckbox.checked == true)
            {
                firstCheckbox.checked = false;
            }
        }
    }
</script> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-03-12T21:15:44.197

好吧，@prageeth 代码运行良好，除了优化之外，所有的优化都是只检索第一行代码中的复选框，这样您就不必检查循环内的两件事，我想这会节省一些性能时间。

我什至找到了一种更好的方法，甚至不必在循环内使用任何条件。此答案已编辑..

```
<script>
    function func(checkBox) {
        var inputs = document.querySelectorAll("[type=checkbox], [class=chb]");
        for(var j = 0; j < inputs.length; j++) {
             inputs[j].checked = false;
        }
        checkBox.checked = true;
    }
</script> 
```

# python - python字符串和变量

> ID：13538440
> 
> 赞同：0
> 
> 时间：2012-11-24T05:05:42.670
> 
> 标签：python, string, variables

Python中还有其他方法可以将字符串更改为变量吗？例如，我有一些变量名为 button1、button2、button3 等，我想在循环中对它们进行操作。如果我不想使用 eval，还有什么合适的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T05:06:47.893

There's`globals`和`locals`which 返回您当前命名空间的字典映射。

例如：

```
a = 1
print globals()['a']  #1 
```

`globals`如果变量是在模块级别定义的，`locals`则应使用该变量，应将其用于其他所有内容。在您的情况下，我认为这`locals()['button1']`可以解决问题。

* * *

话虽如此，首先将按钮放在字典中可能是一个更好的主意。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T05:12:56.350

这不是你问的，而是有什么问题：

```
 for btn in (button1, button2, button3):
      do_something(btn) 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-24T05:17:13.227

[`globals()`](http://docs.python.org/2/library/functions.html#globals)and函数返回可用于直接操作全局和局部变量的[`locals()`](http://docs.python.org/2/library/functions.html#locals)字典：

```
# sets the global variable foo (in the scope of the module) to 1
# equivalent to
#   foo = 1
# outside a functions
globals()['foo'] = 1

# gets the local variable bar (in the scope of the current function)
# equivalent to
#   print bar
# inside a function
print locals()['bar'] 
```

当您在`locals()`函数外部使用时，它相当于使用`globals()`.

如果要操作对象的属性，可以使用[`getattr(obj, name)`](http://docs.python.org/2/library/functions.html#getattr)and[`setattr(obj, name, value)`](http://docs.python.org/2/library/functions.html#setattr)代替：

```
# equivalent to
#   print foo.x
print getattr(foo, 'x')

# equivalent to
#   foo.x = 45
setattr(foo, 'x', 45) 
```

* * *

**编辑**：正如[DSM](https://stackoverflow.com/users/487339/dsm)指出的那样， using`locals()`不能可靠地用于在函数中设置变量值。无论如何，将所有按钮都包含在单独的字典中也会更聪明。

# php - 静态页面的 cakePHP URL 重写规则

> ID：13538442
> 
> 赞同：1
> 
> 时间：2012-11-24T05:05:54.307
> 
> 标签：php, .htaccess, cakephp

我正在使用 cakePHP。如何为以下条件编写重写规则。

```
http://www.example.com/pages/about_us 
```

到

```
http://www.example.com/about 
```

与contact_us 和其他页面类似。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T09:06:57.900

应用程序/配置/routes.php

Router::connect('/about', array('controller' => 'pages', 'action' => 'display', 'about_us'));

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T05:10:54.333

您可以像这样使用 301 重定向：

```
Redirect 301 /about_us http://www.example.com/about 
```

# java - 在数组中间插入字符

> ID：13538444
> 
> 赞同：0
> 
> 时间：2012-11-24T05:06:34.997
> 
> 标签：java, arrays

我有一个名为*encoded*的 char 数组，它有一系列 char 值。我想在数组中间插入 3 个字符，并通过将剩余的字符推到下一个空格来保留它们。这可能吗？

我使用的部分代码也只是插入并替换了接下来的两个字符。

```
 encoded = new char[20];
    encoded = encodeArray.toCharArray();
    for (int x = 0; x < encoded.length; x++) {
        if (encoded[x] == a) {
            encoded[x] = amp;
        } if (encoded[x] == und) {
            for (int y = 0; y < 3; y++) { 
                encoded[x+y] = tilde;
            }
        }
    } 
```

任何方向将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-24T05:19:56.257

几点。

首先，Java 的数组是一种比较低级的数据结构。它们不支持插入等。它们不会动态增长。

在您的情况下，您可以手动将字符移动`n`，但仅当原始数组具有额外`n`的容量插槽时，这才是无损的。

要操作字符数组，请查看[`java.lang.StringBuilder`](http://docs.oracle.com/javase/6/docs/api/java/lang/StringBuilder.html)

最后，由于我们在谈论 Java，因此某些 Unicode*代码点*需要两个 Java `char`。在操作字符序列时使用更高级别操作的众多原因之一。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T05:15:05.613

您应该将剩余的字符向右推 3 个位置（**如果溢出，那么您将从 end 松开 3 个字符**），如下所示：

```
 if (encoded[x] == und) {
        //move the chars 3 places right first
        for (int z = encoded.length-4; z > x; z--) { 
            encoded[z+3] = encoded[z];
        }
        //then fill the 3 places as you want
        for (int y = 0; y < 3 && x+y < encoded.length; y++) { 
            encoded[x+y] = tilde;
        }
    } 
```

如果您想增加 char 数组的长度`3`（以零售所有旧字符），那么您需要重新定义大小为 as 的 char 数组`encoded.length+3`并使用复制元素`System.arraycopy(Object src,int srcPos, Object dest, int destPos, int length)`，然后在其间插入三个字符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T05:14:17.867

使用 String 而不是 charArray 将允许您使用[replaceAll](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#replaceAll%28java.lang.String,%20java.lang.String%29)。

# java - Spring 3.2 和 Hibernate 4 - 由于 SessionFactory 为空而出现 NullPointerException

> ID：13538447
> 
> 赞同：1
> 
> 时间：2012-11-24T05:06:48.893
> 
> 标签：java, spring, hibernate

我正在尝试将我非常小的应用程序转换为 Spring 3.2 和 Hibernate 4，但我无法让它在会话中正常运行。本段下方的一些信息，但最终 sessionFactory 每次到达 DAO 时总是为空，我不知道为什么。

**将控制台与 Hibernate 3 进行比较，Hibernate 3 在启动时显示：**
2012 年 11 月 23 日晚上 10:51:52 org.springframework.orm.hibernate3.LocalSessionFactoryBean buildSessionFactory INFO: Building new Hibernate SessionFactory

**堆栈跟踪：**
java.lang.NullPointerException dao.CSSDAOImpl.selectAllCSS(CSSDAOImpl.java:21)

**休眠-cfg.xml**

```
 <?xml version="1.0" encoding="UTF-8"?>

<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:tx="http://www.springframework.org/schema/tx"
    xsi:schemaLocation="
http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.0.xsd
http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-2.0.xsd">

    <bean id="myDataSource"
        class="org.springframework.jdbc.datasource.DriverManagerDataSource">
        <property name="driverClassName" value="org.apache.derby.jdbc.EmbeddedDriver"></property>
        <property name="url" value="jdbc:derby:C:\Users\Steven\MyDB"></property>
    </bean>

    <bean id="sessionFactory"
        class="org.springframework.orm.hibernate4.LocalSessionFactoryBean">
        <property name="packagesToScan" value="net.form" />
        <property name="dataSource" ref="myDataSource"></property>
        <property name="hibernateProperties">
            <props>
                <prop key="hibernate.dialect">org.hibernate.dialect.DerbyTenSevenDialect
                </prop>
                <prop key="hibernate.show_sql">true</prop>
            </props>
        </property>
        <property name="annotatedClasses">
            <list>
                <value>net.form.StyleChooser</value>
            </list>
        </property>
    </bean>

    <bean id="transactionManager"
        class="org.springframework.orm.hibernate4.HibernateTransactionManager">
        <property name="sessionFactory" ref="sessionFactory" />
    </bean>

    <tx:annotation-driven transaction-manager="transactionManager" />

    <bean id="CSSDAO" class="dao.CSSDAOImpl">
        <property name="sessionFactory" ref="sessionFactory" />
    </bean>

</beans> 
```

**道：**

```
package dao;

import java.util.List;

import org.hibernate.Session;
import org.hibernate.SessionFactory;
import org.hibernate.Transaction;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.transaction.annotation.Transactional;

import net.form.StyleChooser;

public class CSSDAOImpl implements CSSDAO {

    private SessionFactory sessionFactory;

    @Autowired
    public void setSessionFactory(SessionFactory sessionFactory) {
        this.sessionFactory = sessionFactory;
    }

    @Transactional
    public List selectAllCSS() {
        Session session = sessionFactory.openSession();
        Transaction tx = session.beginTransaction();
        List l = session.createCriteria(StyleChooser.class).list();
        session.flush();
        tx.commit();
        return l;
    }

    @Transactional
    public StyleChooser selectCSSById(Integer ID) {
        Session session = sessionFactory.openSession();
        Transaction tx = session.beginTransaction();
        StyleChooser sc = (StyleChooser) session.get(StyleChooser.class, ID);
        session.flush();
        tx.commit();        
        return sc;
    }

    @Transactional
    public Integer insertCSS(StyleChooser insertCSS) {
        Session session = sessionFactory.openSession();
        Transaction tx = session.beginTransaction();
        Integer id = (Integer) session.save(insertCSS);
        session.flush();
        tx.commit();
        return id;
    }

    @Transactional
    public void deleteCSS(Integer CSSId) {
        Session session = sessionFactory.openSession();
        Transaction tx = session.beginTransaction();
        StyleChooser sc = (StyleChooser) session.get(StyleChooser.class, CSSId);
        session.delete(sc);
        session.flush();
        tx.commit();
    }

    @Transactional
    public void updateCSS(StyleChooser cssWithNewValues) {
        Session session = sessionFactory.openSession();
        Transaction tx = session.beginTransaction();
        session.update(cssWithNewValues);
        session.flush();
        tx.commit();        
    }
} 
```

访问 DAO...

```
package net.controllers;

import java.util.List;
import javax.servlet.http.HttpServletRequest;
import net.form.StyleChooser;
import org.springframework.beans.factory.BeanFactory;
import org.springframework.beans.factory.xml.XmlBeanFactory;
import org.springframework.core.io.FileSystemResource;
import org.springframework.core.io.Resource;
import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestMethod;
import org.springframework.web.servlet.ModelAndView;
import org.springframework.web.servlet.mvc.multiaction.MultiActionController;
import dao.CSSDAOImpl;

@Controller
@RequestMapping("/stylechoosertable.html")
public class IndexController extends MultiActionController {

    Resource resource = new FileSystemResource(
            "C:/Users/Steven/Desktop/Programming/workspace/CSSGeneratorHibernate4/WebContent/WEB-INF/hibernate.cfg.xml");
    BeanFactory beanFactory = new XmlBeanFactory(resource);
    CSSDAOImpl dao = (CSSDAOImpl) beanFactory.getBean("CSSDAO");

    @RequestMapping(method = RequestMethod.GET)
    public ModelAndView showIndex(HttpServletRequest request) throws Exception {
        List<StyleChooser> styleChooser = dao.selectAllCSS();
        return new ModelAndView("stylechoosertable", "styleChooser", styleChooser);
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-24T07:14:28.017

在您的 Spring 配置文件中进行以下更改：

```
<bean id="CSSDAO" class="dao.CSSDAOImpl">
    <property name="sessionFactory" ref="sessionFactory" />
</bean> 
```

现在，在 CSSDAOImpl 中删除所有静态修饰符：

```
private SessionFactory sessionFactory;

public void setSessionFactory(SessionFactory sessionFactory) {
    this.sessionFactory = sessionFactory;
} 
```

那应该修复NPE！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T17:34:43.163

为了保持干净整洁，您应该在所有方法中使用@Transactional-Annotation，而不是手动打开会话，而是始终使用 sessionFactory.getCurrentSession()。...

我想您无论如何都想这样做，因为您使用 tx: annotation-driven 并且已经导入了注释。

除了 Muel 的回答，您还可以在 setSessionFactory() 方法上使用 @Autowired-Annotation。

# javascript - 我可以将函数返回的数据传递给 jquery on() 事件吗？

> ID：13538450
> 
> 赞同：0
> 
> 时间：2012-11-24T05:07:28.127
> 
> 标签：javascript, jquery, events

这是我的代码

```
var addproduct = {
    init:function(){
        var footer = $("<div class='footer'></div>");
        var confirmButton = $("<button class='dbtn'>confirm</button>").on('click',this.confirm);
        var cancelButton = $("<button class='dbtn'>cancel</button>").on('click',this.cancel);
        d.append(footer.append(confirmButton,cancelButton));

        $('body').append(d)
    },

    getData:function(){
        var data={};
        d.find('#basic_info :input').each(function(){
            data[$(this).attr('name')] = $(this).val()
        });
        console.log(data);
        return data;
    },

    confirm:function(e){

        console.log(e.data);
    },

    cancel:function(){
        alert(2);
    }

} 
```

当我单击确认按钮时，我想在“d”中提交表单，所以我想使用“getData”函数来获取所有表单数据，

这就是我所做的

```
var confirmButton = $("<button class='dbtn'>confirm</button>").on('click',this.getData,this.confirm);

//output: function() 
```

所以我猜传递给处理程序的数据不能是一个函数吗？？？

然后我像这样更改确认功能

```
confirm:function(){

     var data = this.getData()
     console.log(data);
    },

 this will not work too , because the 'this' keyword is not the addproduct object,but the confirm button '<button>confirm</button>'; 
```

那么如何将getData函数的返回数据传递给confirm函数？？？？？？

为什么'this'不是addproduct对象？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T05:16:35.213

尝试

```
var confirmButton = $("<button class='dbtn'>confirm</button>")
                     .on('click',this.getData(),this.confirm); 
```

`getData`返回要传递给事件处理程序的数据对象，因此您必须实际调用该函数。然后你应该可以看到这里的数据

```
confirm:function(e){

    console.log(e.data);
}, 
```

# javascript - Javascript window.close() 和 window.stop() 逻辑还是技术？

> ID：13538452
> 
> 赞同：0
> 
> 时间：2012-11-24T05:07:30.327
> 
> 标签：javascript, html

也许我的问题很简单，但我是 HTML 和 JavaScript 的新手。

我想学习**window.close()**和**window.stop()**，

所以我在一个简单的 HTML 页面中尝试了它。但是有一个问题，我在标签中使用我的**函数**。并且**window.stop()**不会停止操作。如果确认对话框不正确，我想停止重定向。我该如何解决这个问题？

文件：

```
<html>
<head>
    <title> My page </title>    
    <script src="my_javascript_file.js"></script>   
</head>
<body>

    <a href = "http://www.google.com" onclick="whereAreYouGoing()">Go</a>

</body>
</html> 
```

**my_javascript_file.js：**

```
function whereAreYouGoing(){

    var exit = confirm("Are You Want to Sure to Leave?");

    if(exit){
        window.close();
    }

    else
        window.stop();

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T05:15:44.887

那不是[`window.stop()`](https://developer.mozilla.org/en-US/docs/DOM/window.stop)目的。

由于您使用的是内联`onclick`处理程序，您可以通过返回来阻止默认的锚导航`false`：

```
<a href = "http://www.google.com" onclick="return whereAreYouGoing()">Go</a>

function whereAreYouGoing(){
    var exit = confirm("Are You Want to Sure to Leave?");
    if(exit){
       window.close();
    } else {
       return false;
    }
} 
```

虽然`window.close()`会尝试关闭当前窗口 - 在大多数浏览器中，除非首先通过 JavaScript 打开当前窗口，否则这将不起作用。如果它确实有效，那么它显然不会导航到指定的 URL。

如果用户单击确定，则简单地允许默认导航（在您的示例中为 google.com）更有意义：

```
function whereAreYouGoing(){
    return confirm("Are You Want to Sure to Leave?");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T05:16:50.323

试着放

```
 window.onbeforeunload = whereAreYouGoing; 

```

在 javascript 代码的开头。
onbeforeunload 总是在窗口关闭之前运行；因此，如果您将函数连接到它，它将在关闭窗口之前调用该函数。
尽管这会在关闭窗口之前向用户显示对话框，但所有浏览器都为用户提供了覆盖该功能的机会；这意味着如果用户想要关闭窗口，浏览器将关闭窗口，即使您的函数试图阻止这种情况发生。

希望这可以帮助。

# c# - 从公共类 C# 返回变量

> ID：13538454
> 
> 赞同：-3
> 
> 时间：2012-11-24T05:08:28.887
> 
> 标签：c#, c#-4.0

我有以下代码

```
public class IDFMeasure 
{ 
    ,,,,,,,,,,
    ........

    public float [][] GetIDFMeasure(string[] documents)
    {
        _docs = documents;
        _numDocs = documents.Length;
        MyInit();
        return _termWeight;
    }
} 
```

我想在主程序中调用这个类。我该怎么做？我对班级类型感到困惑..有什么帮助吗？非常感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T05:10:33.990

你不叫班级。您实例化一个类并调用它的方法。你可以这样做：

```
public void main() {
   IDFMeasure measure = new IDFMeasure();  // instantiate class
   float[][] vals = measure.GetIDFMeasure(documents); // now call method on that class
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-24T05:10:57.747

创建类的对象，然后调用该方法。

```
IDFMeasure obj = new IDFMeasure ();
float [][] arr = obj.GetIDFMeasure(new string[]{"1"}); 
```

如果您只需要调用方法并且不再需要对象，那么您可以创建匿名对象并在其上调用方法。

```
float [][] arr = new IDFMeasure().GetIDFMeasure(new string[]{"1"}); 
```

# algorithm - 分治算法与动态规划的区别

> ID：13538459
> 
> 赞同：196
> 
> 时间：2012-11-24T05:10:06.190
> 
> 标签：algorithm, dynamic-programming, divide-and-conquer

分而治之算法和动态规划算法有什么区别？这两个术语有何不同？我不明白它们之间的区别。

请举一个简单的例子来解释两者之间的任何区别以及它们看起来相似的原因。

* * *

## 回答 #1

> 赞同：197
> 
> 时间：2012-11-24T05:55:16.343

**分而治之**

分而治之的工作方式是将问题划分为子问题，递归地征服每个子问题并将这些解决方案组合起来。

**动态规划**

动态规划是一种解决具有重叠子问题的问题的技术。每个子问题只解决一次，每个子问题的结果存储在一个表中（通常实现为数组或哈希表）以供将来参考。这些子解决方案可用于获得原始解决方案，并且存储子问题解决方案的技术称为记忆。

你可能会想到`DP = recursion + re-use`

理解差异的经典示例是查看这两种方法来获得第 n 个斐波那契数。检查麻省理工学院的此[材料](http://courses.csail.mit.edu/6.006/spring08/notes/lecture19.pdf)。

* * *

**分而治之的方法** ![分而治之的方法](../Images/1b02ea0576a9d2d08eee71ad57a814fa.png)

**动态规划方法** ![在此处输入图像描述](../Images/ccf62b976843c9af58924f38788d8e53.png)

* * *

## 回答 #2

> 赞同：60
> 
> 时间：2018-06-15T09:42:23.753

## 动态规划和分而治之的相似性

正如我现在所看到的，我可以说**动态编程是分而治之范式的扩展**。

我不会将它们视为完全不同的东西。因为**它们都通过递归地将问题分解**为相同或相关类型的两个或多个子问题来工作，直到这些子问题变得足够简单可以直接解决。然后将子问题的解决方案组合起来以给出原始问题的解决方案。

那么为什么我们仍然有不同的范例名称以及为什么我将动态编程称为扩展。**这是因为只有当问题具有一定的限制或先决条件**时，才可以将动态规划方法应用于问题。之后，动态规划通过**记忆**或**制表**技术扩展了分而治之的方法。

让我们一步一步来……</p>

## 动态规划先决条件/限制

正如我们刚刚发现的那样，为了使动态规划适用，分而治之问题必须具有两个关键属性：

*   **最优子结构** ——最优解可以从其子问题的最优解构造

*   **重叠的子问题** ——问题可以分解成多次重复使用的子问题，或者问题的递归算法一遍又一遍地解决相同的子问题，而不是总是产生新的子问题

一旦满足这两个条件，我们可以说这个分而治之的问题可以使用动态规划方法来解决。

## 分而治之的动态规划扩展

动态编程方法通过两种技术（**记忆**和**制表**）扩展了分而治之的方法，这两种技术的目的都是为了存储和重用可以显着提高性能的子问题解决方案。例如，斐波那契函数的朴素递归实现的时间复杂度是`O(2^n)`DP 解决方案只用`O(n)`时间做同样的事情。

**记忆化（自上而下的缓存填充）**是指缓存和重用先前计算结果的技术。因此，memoized`fib`函数看起来像这样：

```
memFib(n) {
    if (mem[n] is undefined)
        if (n < 2) result = n
        else result = memFib(n-2) + memFib(n-1)

        mem[n] = result
    return mem[n]
} 
```

**制表（自下而上的缓存填充）**类似，但侧重于填充缓存的条目。计算缓存中的值最容易迭代完成。的表格版本`fib`如下所示：

```
tabFib(n) {
    mem[0] = 0
    mem[1] = 1
    for i = 2...n
        mem[i] = mem[i-2] + mem[i-1]
    return mem[n]
} 
```

[您可以在此处](https://programming.guide/dynamic-programming-vs-memoization-vs-tabulation.html)阅读有关记忆和制表比较的更多信息。

您应该在这里掌握的主要思想是，由于我们的分而治之问题具有重叠的子问题，子问题解决方案的缓存成为可能，因此记忆/制表步入了现场。

## 那么DP和DC到底有什么区别

由于我们现在熟悉 DP 先决条件及其方法，我们准备将上面提到的所有内容放在一张图片中。

![动态规划与分而治之](../Images/c1cf1d92d49f6e7eec9096fef3b800e7.png)

如果您想查看代码示例，您可以在[此处查看更详细的说明，](https://trekhleb.dev/blog/2018/dynamic-programming-vs-divide-and-conquer/)其中您会找到两个算法示例：二分搜索和最小编辑距离（Levenshtein 距离），它们说明了 DP 和 DC 之间的区别。

* * *

## 回答 #3

> 赞同：29
> 
> 时间：2013-03-26T12:39:59.737

分而治之和动态规划之间的另一个区别可能是：

分而治之：

1.  在子问题上做更多的工作，因此需要更多的时间。
2.  在分而治之中，子问题是相互独立的。

动态规划：

1.  仅解决子问题一次，然后将其存储在表中。
2.  在动态规划中，子问题不是独立的。

* * *

## 回答 #4

> 赞同：18
> 
> 时间：2012-11-24T05:45:55.287

有时在递归编程时，您多次调用具有相同参数的函数，这是不必要的。

著名的斐波那契数列示例：

```
 index: 1,2,3,4,5,6...
Fibonacci number: 1,1,2,3,5,8...

function F(n) {
    if (n < 3)
        return 1
    else
        return F(n-1) + F(n-2)
} 
```

让我们运行 F(5)：

```
F(5) = F(4) + F(3)
     = {F(3)+F(2)} + {F(2)+F(1)}
     = {[F(2)+F(1)]+1} + {1+1}
     = 1+1+1+1+1 
```

所以我们称： 1 次 F(4) 2 次 F(3) 3 次 F(2) 2 次 F(1)

动态编程方法：如果多次调用具有相同参数的函数，则将结果保存到变量中，以便下次直接访问。迭代方式：

```
if (n==1 || n==2)
    return 1
else
    f1=1, f2=1
    for i=3 to n
         f = f1 + f2
         f1 = f2
         f2 = f 
```

让我们再次调用 F(5)：

```
fibo1 = 1
fibo2 = 1 
fibo3 = (fibo1 + fibo2) = 1 + 1 = 2
fibo4 = (fibo2 + fibo3) = 1 + 2 = 3
fibo5 = (fibo3 + fibo4) = 2 + 3 = 5 
```

如您所见，每当您需要多次调用时，您只需访问相应的变量即可获取值，而不是重新计算它。

顺便说一句，动态编程并不意味着将递归代码转换为迭代代码。如果需要递归代码，还可以将子结果保存到变量中。在这种情况下，该技术称为记忆化。对于我们的示例，它看起来像这样：

```
// declare and initialize a dictionary
var dict = new Dictionary<int,int>();
for i=1 to n
    dict[i] = -1

function F(n) {
    if (n < 3)
        return 1
    else
    {
        if (dict[n] == -1)
            dict[n] = F(n-1) + F(n-2)

        return dict[n]                
    }
} 
```

所以与分治的关系是 D&D 算法依赖于递归。它们的某些版本具有这种“具有相同参数问题的多个函数调用”。搜索“矩阵链乘法”和“最长公共子序列”以获得需要 DP 来改进 D&D 算法的 T(n) 的示例。

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2012-11-24T05:21:02.527

我假设您已经阅读过 Wikipedia 和其他学术资源，所以我不会回收任何这些信息。我还必须警告说，我无论如何都不是计算机科学专家，但我会分享我对这些主题的理解的两分钱......

## 动态规划

将问题分解为离散的子问题。斐波那契数列的递归算法是动态规划的一个例子，因为它通过首先求解 fib(n-1) 来求解 fib(n)。为了解决原来的问题，它解决了一个*不同*的问题。

## 分而治之

这些算法通常会解决问题的相似部分，然后在最后将它们放在一起。合并排序是分而治之的经典例子。这个例子和斐波那契例子的主要区别在于，在归并排序中，分割可以（理论上）是任意的，无论你如何分割它，你仍然在归并和排序。无论您如何划分数组，都必须完成相同数量的*工作来对数组进行归并排序。*求解 fib(52)比求解 fib(2)需要*更多的步骤。*

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2012-11-24T05:21:48.863

我认为`Divide & Conquer`这是一种递归方法和`Dynamic Programming`表格填充。

例如，`Merge Sort`是一种`Divide & Conquer`算法，在每一步中，您将数组分成两半，递归调用`Merge Sort`两半然后合并它们。

`Knapsack`是一种`Dynamic Programming`算法，因为您正在填写代表整个背包子问题的最佳解决方案的表格。表中的每个条目对应于在给定项目 1-j 的情况下，您可以在一袋重量 w 中携带的最大值。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2019-12-22T06:42:35.910

**分而治**之在每个递归级别涉及三个步骤：

1.  **将**问题分解为子问题。
2.  **通过递归解决子问题来**征服子问题。****
***   **将子问题的解决方案**合并到原始问题的解决方案中。**

    *   这是一种**自上而下的**方法。

    *   它在子问题上做了更多的工作，因此花费了更多的时间。
    *   例如。斐波那契数列的第 n 项可以以 O(2^n) 时间复杂度计算。**** 

 ******动态规划**包括以下四个步骤：

1.**表征**最优解的结构。
2.**递归定义**最优解的值。
3.**计算**最优解的值。
4.**根据计算信息****构造**最优解。

 ***   这是一种**自下而上的**方法。
*   由于我们使用之前计算的值，而不是再次计算，因此比分治法消耗更少的时间。
*   例如。斐波那契数列的第 n 项可以以 O(n) 时间复杂度计算。

***为了更容易理解，让我们将分而治之视为一种蛮力解决方案，并将其优化视为动态规划。***

**NB**具有重叠子问题的分治算法只能使用 dp 进行优化。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2020-07-24T18:57:41.787

*   **分而治之**
    *   他们闯入了不重叠的子问题
    *   示例：阶乘数，即 fact(n) = n*fact(n-1)

```
fact(5) = 5* fact(4) = 5 * (4 * fact(3))= 5 * 4 * (3 *fact(2))= 5 * 4 * 3 * 2 * (fact(1)) 
```

正如我们在上面看到的，没有事实（x）被重复，所以阶乘没有重叠问题。

*   **动态规划**
    *   他们分解成重叠的子问题
    *   示例：斐波那契数，即 fib(n) = fib(n-1) + fib(n-2)

```
fib(5) = fib(4) + fib(3) = (fib(3)+fib(2)) + (fib(2)+fib(1)) 
```

正如我们在上面看到的，fib(4) 和 fib(3) 都使用 fib(2)。同样，如此多的 fib(x) 被重复。这就是斐波那契有重叠子问题的原因。

*   由于 DP 中子问题的重复，我们可以将这些结果保存在一个表中，从而节省计算量。这被称为**记忆**

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-09-22T04:05:32.067

**分而治之**

*   在这个问题中解决以下三个步骤： **1\. Divide** - 划分为子问题的数量 **2\. Conquer** - 通过递归解决子问题来征服 **3\. Combine** - 组合子问题的解决方案以获得原始问题的解决方案
*   递归方法
*   自上而下技术
*   **示例：**合并排序

**动态规划**

*   在此问题通过以下步骤解决： **1.**定义最优解的结构 **2.**反复定义最优解的值。 **3.**以自下而上的方式 获得最优解的值**4.**从获得的值中得到最终的最优解
*   非递归
*   自下而上技术
*   **示例：** Strassen 的矩阵乘法******

# javascript - 在overlayImage中应用过滤器的方法在哪里？

> ID：13538460
> 
> 赞同：2
> 
> 时间：2012-11-24T05:10:21.810
> 
> 标签：javascript, canvas, fabricjs

我想在overlayImage 中应用过滤器。唯一的方法是在渲染后在整个画布中应用过滤器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T13:35:58.127

对此没有内置支持，但“破解”相当容易。

```
var overlayImageUrl = '...';

// load overlay image first
fabric.Image.fromURL(overlayImageUrl, function(oImg) {

  // add and apply filter to overlay image 
  oImg.filters.push(new fabric.Image.filters.Grayscale());
  oImg.applyFilters();

  // set <img> element of fabric.Image instance 
  // and assign it directly to canvas' "overlayImage"
  canvas.overlayImage = oImg.getElement();

  // render canvas for overlayImage to appear
  canvas.renderAll();
}); 
```

# facebook - Facebook QR Code Like 通过 iPhone 应用程序

> ID：13538466
> 
> 赞同：3
> 
> 时间：2012-11-24T05:12:52.927
> 
> 标签：facebook, facebook-graph-api, facebook-like, qr-code

我正在尝试创建一个 QR 码，如果在安装了 Facebook 应用程序的手机上扫描它，Facebook 应用程序将直接转到保存在 QR 码中的类似页面。我已经尝试过[这个网站](http://www.insidefacebook.com/2011/10/21/facebook-url-scheme-pages/)所说的，它没有工作。它打开了 Facebook 应用程序，但没有转到该页面。

我正在尝试重定向到[这个 Facebook 页面](https://www.facebook.com/ViralGliders)。

如果有人能给我指点，我将不胜感激。我不是程序员，也不是技术人员，所以我的知识有限。但是，我愿意学习。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T10:08:50.777

您可以做的事情是使用允许您添加“喜欢”按钮的登录页面服务。免费的：[www.likify.net](http://www.likify.net)。

我不确定您是否可以直接在 Facebook 应用程序中打开 Facebook 网址。据我所知，只有 App Store 和 iTunes 才能在 iPhone 上做到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T10:24:05.243

当我尝试通过浏览器访问 facebook.com/ViralGliders 时，它只会将我带到 facebook 主页。也许这是一个不正确的 URL，或者您有一些权限问题..？

# c# - 创建逆序数组

> ID：13538469
> 
> 赞同：0
> 
> 时间：2012-11-24T05:13:08.017
> 
> 标签：c#

我目前正在尝试创建一个数组并以倒序或降序显示它。它当前显示一个数字列表，但有时它不遵循正确的降序。我相信问题出在两个 for 循环之间的 if 语句中，每次我将 1-101 之间的随机数与数组中的第一个数字进行比较时。与其那样做，我怎样才能将数组中的数字相互比较？或者有什么建议可以证明我的逆序数组生成器？

**代码**

```
namespace reverseArray
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }
        long operations = 0;
        int size;
        int max;
        int[] createArray;
        int[] sortArray;
        int[] copyArray;

public void ReverseOrder()
        {
            size = Convert.ToInt32(textBoxSize.Text);
            max = Convert.ToInt32(textBoxMax.Text);
            createArray = new int[size];
            copyArray = new int[size];
            sortArray = new int[size];

            createArray[size - 1] = 1;

            for (int i = size - 1; i > 0; i--)
            {
                createArray[i - 1] = createArray[i] + r.Next(1, max);
            }

            for (int i = size - 1; i > 0; i--)
            {
                if (r.Next(1, 101) < createArray[0])
                {
                    for (int x = size - 1; x > 0; x--)
                    {
                        createArray[x] = r.Next(1, createArray[0]);
                    }
                }
            }

        }

private void buttonCreateArray_Click(object sender, EventArgs e)
        {

ReverseOrder();

}

}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T05:26:37.337

无需实现自己的算法来对数组进行排序或反转。

使用[Array.Sort](http://msdn.microsoft.com/en-us/library/6tf1f0bc.aspx)和/或[Array.Reverse](http://msdn.microsoft.com/en-us/library/d3877932.aspx)。

要按降序排序，首先排序然后反转数组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T05:31:32.627

利用`LINQ`

```
using System.Linq;

namespace reverseArray
{
        public partial class Form1 : Form
        {
            public Form1()
            {
                InitializeComponent();
            }
            long operations = 0;
            int size;
            int max;
            int[] createArray;
            int[] orderedArray;
            int[] orderedByDescendingArray;    

            public int[] CreateArray(int size, int max)
            {
                var result = new int[size];
                Random r = new Random();
                for(int i; i<size; i++)
                {
                   result[i] = r.Next(max);
                }
                return result;
            }

            private void buttonCreateArray_Click(object sender, EventArgs e)
            {
                size = Convert.ToInt32(textBoxSize.Text);
                max = Convert.ToInt32(textBoxMax.Text);

                createArray = CreateArray(size, max);
                orderedArray = array.OrderBy(a => a);
                orderedByDescendingArray = array.OrderByDescending(a => a);        
           }
      }
} 
```

//PS 代码可能包含错误，因为我是直接在这里输入的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T05:49:17.810

无需使用逻辑来创建逆序数组。在 C# 中有默认方法来反转它。所以使用它，你可以得到输出..

```
 string fullOrder= Console.ReadLine();
        char[] charArray= fullOrder.ToCharArray();
        Array.Reverse(charArray);
        Console.WriteLine(charArray);
        Console.ReadLine(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-24T05:28:06.760

Consder 使用内置方法进行排序，如[Array.Sort](http://msdn.microsoft.com/en-us/library/system.array.sort%28v=vs.100%29.aspx)和[Enumerable.OrderBy](http://msdn.microsoft.com/en-us/library/bb534966.aspx)。他们有变体，需要comaprer 来自定义排序。

# android - Android 启用蓝牙耳机麦克风

> ID：13538475
> 
> 赞同：4
> 
> 时间：2012-11-24T05:13:27.740
> 
> 标签：android

我正在制作一个可以播放音乐并可以切换到通话模式的应用程序。在通话模式下，用户将对着麦克风讲话，这些讲话将实时回放给扬声器（使用 AudioTrack）。

我已经通过 RecognitionListener 使用有线耳机完成了这个功能

喜欢这个[链接](https://stackoverflow.com/questions/6372080/voice-recognition-as-a-background-service)，但我在函数 onBufferReceived(byte[] buffer) 上为 AudioTrack 添加了一些代码

但在蓝牙耳机上，我只能使用 AudioManager 播放音乐。当我调用语音识别意图时，它可以工作，但会检测到麦克风的注释。我认为这是因为蓝牙耳机麦克风仅在通话期间启用。

有没有办法在蓝牙耳机上做到这一点？

# php - 使用 PHP 回显 div 标签内的内容

> ID：13538478
> 
> 赞同：1
> 
> 时间：2012-11-24T05:13:43.570
> 
> 标签：php, html, html-parsing

我不知道要研究什么或从哪里开始。

我想做的是使用 PHP 读取 HTML 页面并提取包含在 div 中的原始文本

div是这个

```
 <div class="thingy">
  test
 </div> 
```

执行 php 时，我希望它回显

```
Test 
```

是否有一个简单的片段，或者有人可以发布一个小脚本？

编辑：带有 Div 的 html 页面在另一个网页上。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-24T05:18:02.200

您要做的是解析 HTML。使用 PHP 附带的 DOM 模块来执行此操作：http: [//php.net/manual/en/book.dom.php](http://php.net/manual/en/book.dom.php)

您不想尝试使用正则表达式来执行此操作。

如果要从文档中删除所有 HTML 标记，请使用 PHP`strip_tags()`函数：[http ://us3.php.net/strip_tags](http://us3.php.net/strip_tags)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-24T05:17:44.050

虽然这可以使用正则表达式来完成，但我建议使用 DOM 解析器。我的推荐去[SimpleHTML Dom Parser](http://simplehtmldom.sourceforge.net/)。使用它，这就是你将如何做你想做的事

```
$string = "<div class=\"thingy\">test</div>";
$html = str_get_html($string); // create the DOM object
$div = $html->find('div[class=thingy]', 0); // find the first div with a class of 'thingy'
echo $div->plaintext(); // echo the text contents 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T05:22:05.390

如果你想解析你的 html，你可以像这样使用它

```
<?php
 $str = '<div class="thingy">test</div>';
 echo strip_tags($str);//OUTPUT : test
?> 
```

由于您的 html 在其他网页上，因此开始输出缓冲，将该文件包含在您的主 php 脚本中，对其进行所有操作以获取内容。

# c++ - SQlite 查询 - 如何检索多列数据？

> ID：13538480
> 
> 赞同：4
> 
> 时间：2012-11-24T05:13:53.040
> 
> 标签：c++, xcode, sqlite

我很难在网上找到一个关于使用 xcode 和 cocos2dx 从 SQlite DB 获取多个值的工作示例。这是我的sql查询：

```
char sql_query[100];
sprintf(sql_query, "SELECT * FROM SQList WHERE ColumnD BETWEEN %d AND %d ORDER BY RANDOM() LIMIT 1", MinColumnD, MaxColumnD); 
```

它本身的查询似乎有效，主要问题是如何将我从“select *”收集的值获取到另一个 int 或 char 参数中以便我可以使用它？

我发现一些示例提到了使用对结构的回调或提到使用 sqlite3_prepare_v2 和 step 方法。

不过，我无法找到这两种方法的示例，请帮忙！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-24T10:53:01.557

使用时`sqlite3_exec`，你必须转换字符串中的所有值，并且你必须使用回调的`void *`指针或一些全局变量来返回数据：

```
struct MyData {
    string A;
    int B, C;
};

int exec_callback(void *ptr, int argc, char *argv[], char *names[])
{
    vector<MyData> *list = reinterpret_cast<vector<MyData> *>(ptr);
    MyData d;
    d.A = argv[0] ? argv[0] : "";
    d.B = atoi(argv[1]);
    d.C = atoi(argv[2]);
    list->push_back(d);
    return 0;
}

void query_with_exec()
{
    vector<MyData> list;

    char *errmsg = NULL;
    sqlite3_exec(db, "SELECT a, b, c FROM SQList /* WHERE ... */",
                 exec_callback, &list, &errmsg);
    if (errmsg) {
        printf("error: %s!\n", errmsg);
        return;
    }

    // use list ...
} 
```

使用时`sqlite3_prepare*`，您必须`sqlite3_step`循环调用，直到它不再返回`SQLITE_ROW`（当您期望只有一条记录时，您只能调用一次）：

```
void query_with_step()
{
    vector<MyData> list;
    sqlite3_stmt *stmt;

    int rc = sqlite3_prepare_v2(db, "SELECT a, b, c FROM SQList /* WHERE ... */",
                                -1, &stmt, NULL);
    if (rc != SQLITE_OK) {
        printf("error: %s!\n", sqlite3_errmsg(db));
        return;
    }

    for (;;) {
        rc = sqlite3_step(stmt);
        if (rc == SQLITE_DONE)
            break;
        if (rc != SQLITE_ROW) {
            printf("error: %s!\n", sqlite3_errmsg(db));
            break;
        }

        MyData d;
        const char *text = (const char *)sqlite3_column_text(stmt, 0);
        d.A = text ? text : "";
        d.B = sqlite3_column_int(stmt, 1);
        d.C = sqlite3_column_int(stmt, 2);
        list.push_back(d);
    }

    sqlite3_finalize(stmt);

    // use list ...    
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-24T05:44:19.460

使用“SELECT”查询获取值并将您的 char 和 int 值存储在一个数组中。创建一个 NSMUtableArray 并存储您将从 SELECT 查询中获得的值。以下代码将帮助您

```
-(int)find_putts_count:(int)holeno{
  sqlite3 *database;
 NSString *databasePath;
 NSMUtableArray *arr_tracking_details = [[NSMUtableArray alloc] init];
 int putts = -1;
NSArray *documentPaths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDir = [documentPaths objectAtIndex:0];
databasePath = [documentsDir stringByAppendingPathComponent:@"GolfElite.sqlite"];
if(sqlite3_open([databasePath UTF8String], &database) == SQLITE_OK)
{
    // Setup the SQL Statement and compile it for faster access
    NSString *sqlStatement = nil;
            sqlStatement = [NSString stringWithFormat:@"select Putts from Holes WHERE HoleNo == %d and ShotNo == %d and PlayerId == '%@'",holeno,1,[arr_players_id objectAtIndex:scorecard_player_no]];
    sqlite3_stmt *compiledStatement;
    if(sqlite3_prepare_v2(database, [sqlStatement UTF8String], -1, &compiledStatement, NULL) == SQLITE_OK) 
    {
        if(sqlite3_step(compiledStatement) == SQLITE_ROW)   
        {
            [arr_tracking_details addObject:[NSString stringWithUTF8String:(char *)sqlite3_column_text(compiledStatement, 3)]];
             [arr_tracking_details addObject:[NSString stringWithUTF8String:(char *)sqlite3_column_text(compiledStatement,6)]];
            [arr_tracking_details addObject:[NSString stringWithFormat:@"%d",(int)sqlite3_column_int(compiledStatement, 4)]];

            putts = (int)sqlite3_column_int(compiledStatement, 0);
        }
    }
    sqlite3_finalize(compiledStatement);
}
sqlite3_close(database);
return putts;
} 
```

# openlaszlo - scrolledittext openlaszlo中的滚动条问题

> ID：13538481
> 
> 赞同：2
> 
> 时间：2012-11-24T05:14:05.243
> 
> 标签：openlaszlo, lzx

我在我的应用程序中使用了 scrolledittext 类，该类在 OL swf 运行时中运行良好，但在 DHTML 运行时中却没有。当我输入滚动编辑文本时，我看不到激活的滚动条。

我正在使用以下代码

```
<canvas>
<include href="incubator/scrolledittext.lzx" /> 
<include href="lz/vscrollbar.lzx"/>
<include href="incubator/newvscrollbar.lzx"/>
<include href="incubator/newvscrollbar_resources.lzx"/>

           <button name="text">
           <handler name="onclick">
            canvas.sp.inp.onfocus.sendEvent();

           </handler>
           </button>
  <scrolledittext name="sp" x="50" y="50" 
                                 height="300" 
                                 width="400" 
                                 focusable="true"
                >    
           </scrolledittext>    
</canvas> 
```

我是否遗漏了什么或者这是 DHTML 运行时中的错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T15:58:14.297

看起来像一个已知的错误，已经提交：

[http://jira.openlaszlo.org/jira/browse/LPP-10260](http://jira.openlaszlo.org/jira/browse/LPP-10260)或[http://jira.openlaszlo.org/jira/browse/LPP-10217](http://jira.openlaszlo.org/jira/browse/LPP-10217)

[http://jira.openlaszlo.org/jira/browse/LPP-10303](http://jira.openlaszlo.org/jira/browse/LPP-10303)，您提交的 JIRA 发布的可能是 LPP-10260 或 LPP-10217 的副本。

# twitter - 如何显示推特搜索解析？

> ID：13538486
> 
> 赞同：1
> 
> 时间：2012-11-24T05:15:23.747
> 
> 标签：twitter

我对 Stackoverflow 的第一个问题。如何在我的网页中显示/读取 Twitter 搜索解析数据？

下面是我正在使用的代码。我可以在 console.log() 中看到 15 个对象，但我不知道如何在网页视图中显示它。

我的编码如下：

$

```
.ajax({  
    url : "http://search.twitter.com/search.json?q=gaga&callback=?", 
    dataType : "json",  
    timeout:1000,  
    success : function(data)  
    {
        console.log(data.results);
        //console.log(data.results);
        //$('#twitter').html(data);// parse data here  

    },  
    error : function()  
    {  
            alert("Failure!");  
    },  
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T05:21:53.457

看看这是否有帮助[http://jsfiddle.net/2cxfN/](http://jsfiddle.net/2cxfN/)

```
$.ajax({  
    url : "http://search.twitter.com/search.json?q=gaga&callback=?", 
    dataType : "json",  
    timeout:1000,  
    success : function(data)  
    {
        console.log(data.results);
        //console.log(data.results);
        //$('#twitter').html(data);// parse data here  
        $.each(data.results, function(i,o){
            console.log(o);
            $('<img/>', {src:o.profile_image_url}).appendTo('body');
            $('<div/>').text(o.from_user).appendTo('body');
        });

    },  
    error : function()  
    {  
            alert("Failure!");  
    },  
});​ 
```

啊，我看到您有一个 id 为 twitter 的 div - 您可以使用 data.results 中每个对象中的变量将 HTML 解析为您想要的内容，我将其提取为 o，然后 appendTo('#twitter') ;

# android - 如何以编程方式在 android 上执行 *.sql 脚本？

> ID：13538493
> 
> 赞同：3
> 
> 时间：2012-11-24T05:16:08.303
> 
> 标签：android, sqlite

如何以编程方式在 android 上执行 *.sql 脚本？该脚本位于 /assert 文件夹中。我的手机没有root。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-24T05:33:09.837

```
InputStream is = getResources().getAssets().open("SQLScript.sql");
String sql= convertStreamToString(is);

public static String convertStreamToString(InputStream is)
            throws IOException {
            Writer writer = new StringWriter();
        char[] buffer = new char[2048];
        try {
            Reader reader = new BufferedReader(new InputStreamReader(is,
                    "UTF-8"));
            int n;
            while ((n = reader.read(buffer)) != -1) {
                writer.write(buffer, 0, n);
            }
        } finally {
            is.close();
        }
        String text = writer.toString();
        return text;
}

SQLiteDatabase db;
db = openOrCreateDatabase("MyDatabase.db", SQLiteDatabase.CREATE_IF_NECESSARY, null );
db.execSQL(sql); 
```

# javascript - 用于在 JSON 对象中编码冗余字段名称并在 javascript 中对其进行解码的框架？

> ID：13538501
> 
> 赞同：0
> 
> 时间：2012-11-24T05:17:14.357
> 
> 标签：javascript, jquery, json

我正在从 Web 服务检索以下 json 对象数组数据。如您所见，所有对象都重复了 Id、ProjectId、Owner 字段（我知道它的 JSON 约定）。但我在想是否有任何库/框架可以最大限度地减少这种情况？就像当 json 序列化时，将字段名称序列化为 unicode char 并再次在 javascript 中将其反序列化为可读的字段名称。

```
[
{
"Id":0,
"ProjectId":"PJ4604",  
"Owner":"SURENJ1", 
},
{
"Id":1,
"ProjectId":"PJ4604",  
"Owner":"SURENJ1",
},
{
"Id":2,
"ProjectId":"PJ4604", 
"Owner":"SURENJ1"
}] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T06:01:49.407

执行此操作的常用方法是使用[HTTP 压缩](http://en.wikipedia.org/wiki/HTTP_compression)。启用后，服务器和浏览器将透明地压缩和解压缩数据。您不需要任何特定于 JSON 的内容。

启用它的细节将取决于您的 HTTP 服务器（以及可能用于生成 JSON 的任何服务器端语言）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T05:23:05.153

jQuery 的扩展功能类似于您所要求的：[http ://api.jquery.com/jQuery.extend/](http://api.jquery.com/jQuery.extend/)

本质上，它只会继续用第二个对象的值覆盖第一个对象，因此任何重复的字段都将被覆盖并合并到一个只有您唯一字段的对象中。

# mysql - 存储和编辑非常长的文本我的 php MySQL 的问题

> ID：13538515
> 
> 赞同：1
> 
> 时间：2012-11-24T05:20:16.890
> 
> 标签：mysql, longtext

我需要将一个非常大的文本存储并更新到 MySQL 数据库中。我通过表单 textarea 输入。但如果文本太大，MySQL 查询似乎无法执行。有没有通过 PHP-MySQL 存储长文本的有效方法？我使用 LONGTEXT 作为字段类型。

我应该通过 LONGBLOB 存储它吗？如果是，那么如何通过 PHP 检索文本并显示以进行编辑？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T10:19:55.590

这里很少有事情会出错。

在发布表单数据时，您需要使用 POST 而不是 GET。

如果在将数据插入数据库之前成功发布了转义文本：

mysql_real_escape_string($some_text)

LONGTEXT 适用于较长的文本。除非您使用二进制数据（如图片等），否则您不需要 LONGBLOB

最坏的情况是使用一些 ORM 来做同样的事情。你需要一些时间来配置它以与你的 PHP 和 MySQL 一起工作，但从长远来看它会节省很多时间。一个很好的例子是[Propel](http://propelorm.org/)。

# php - PHP / SimpleXML - 根据属性名称获取属性值

> ID：13538516
> 
> 赞同：2
> 
> 时间：2012-11-24T05:20:29.510
> 
> 标签：php, xml, simplexml

我像这样使用 SimpleXMLElement：

```
$visitor_body = wp_remote_retrieve_body( $url );
$visitor_data = new SimpleXMLElement( $visitor_body ); 
```

我有以下 XML 结构响应：

```
<resultSet>
  <aggregates>
     <metric name="visitDuration" value="488" label="Avg. Visit Duration"/>
     <metric name="uniqueVisitors" value="8" label="Unique Visitors"/>
     <metric name="visits" value="14" label="Visits"/>
     <metric name="pageViews" value="35" label="Page Views"/>
     <metric name="bounceRate" value="0.5" label="Bounce Rate"/>
     <metric name="pagesPerVisit" value="2.5" label="Pages Per Visit"/>
  </aggregates> 
```

我需要以我可以在不同地方使用的方式获得`visitDuration` `uniqueVisitors` `visits`等等的价值。例如，在一个变量中，例如：

```
echo $visitDuration;
echo $uniqueVisitors; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T05:24:34.737

[http://php.net/manual/en/book.simplexml.php](http://php.net/manual/en/book.simplexml.php) - 这个页面是你需要研究的地方。

或者这个怎​​么样？

[http://simplehtmldom.sourceforge.net/](http://simplehtmldom.sourceforge.net/)

```
* A HTML DOM parser written in PHP5+ let you manipulate HTML in a very easy way!
* Require PHP 5+.
* Supports invalid HTML.
* Find tags on an HTML page with selectors just like jQuery.
* Extract contents from HTML in a single line.

// Find all visitDuration
foreach($html->find('visitDuration') as $element)
       echo $element->value. '<br>'; // returns 488

// Find all bounceRate
foreach($html->find('bounceRate') as $element)
       echo $element->value. '<br>'; // returns 0.5 
```

# javascript - 有没有一种简单的方法可以使用 google chrome 开发人员工具从缓存中清除 javascript？

> ID：13538521
> 
> 赞同：0
> 
> 时间：2012-11-24T05:21:17.410
> 
> 标签：javascript, google-chrome

我尝试了一些东西，例如 ctrl F5,F6 和 shift F5,F6。还单击设置，然后单击历史记录，然后选择清除缓存。最终它似乎工作但似乎我必须选择该脚本并且涉及很多步骤。

有没有一种简单的方法可以从缓存中清除脚本或所有脚本？

# php - 使用带有端口号和 https 的 php 获取整页 URL

> ID：13538526
> 
> 赞同：3
> 
> 时间：2012-11-24T05:22:08.777
> 
> 标签：php

我正在寻找将返回页面的完整页面 url 的 php 函数（甚至用 htaccess 重写）。

函数返回例如：

```
https://google.com:8000/yourfolder/yourpage.html 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-24T05:22:08.777

```
<?php
function fullpageurl() {
    $pageURL = 'http';
    if ($_SERVER["HTTPS"] == "on") {$pageURL .= "s";}
    $pageURL .= "://";
    if ($_SERVER["SERVER_PORT"] != "80") {
        $pageURL .= $_SERVER["SERVER_NAME"].":".$_SERVER["SERVER_PORT"].$_SERVER["REQUEST_URI"];
    } else {
        $pageURL .= $_SERVER["SERVER_NAME"].$_SERVER["REQUEST_URI"];
    }
    return $pageURL;
}
?> 
```

**解释**

用于`$_SERVER["HTTPS"]`检查 SSL 是否存在`ON`或`OFF`
用于检查访问 的`$_SERVER["SERVER_PORT"]`网站的端口号，用于获取网站主机。 用于获取当前页面。
`$_SERVER["SERVER_NAME"]`
`$_SERVER["REQUEST_URI"]`

# jquery - 带有 MS WebAPI 的 Knockout.js foreach

> ID：13538528
> 
> 赞同：0
> 
> 时间：2012-11-24T05:22:19.773
> 
> 标签：jquery, knockout.js, asp.net-web-api

在两个不同的 DIV 中定义两个 FOREACH，如下所示

```
<div style="background-color:black; color:white; overflow:scroll; height:350px;width:300px">
<ol data-bind="foreach: price_quantity">
<li data-bind="text: quantity + ' &&& ' + price"></li>
</ol>
</div>
<div style="background-color:black; color:white; overflow:scroll; height:350px;width:300px">
<ul data-bind="foreach: papers" style="list-style-type:none">
<li>
<div data-bind="text: paperName"></div>
<ul data-bind="foreach : _colors" >
<li>
<div data-bind="style:{'background-color' : colorName}" style="height:25px;width:25px;border:1px solid white"></div>

</li>
</ul>
</li>
</ul>
</div> 
```

并且在 $(document).ready 上，我正在进行如下两个 AJAX 调用，以使用 LIST 填充上面的两个 div

```
<script type="text/javascript">
$(document).ready(function () { 

   var sku = "abcd";               
   $.ajax({
       url: "/api/values?clientSKU=" + sku,
       dataType: "json",
       asyc: true,
       type: "get",
       success: function (msg) {
                var skuandprice = $.parseJSON(msg);          
                ko.applyBindings(new ViewPriceObjectOnWeb(skuandprice));
       },
       error: function (jqXHR, textStatus, errorThrown) {
               alert(textStatus + '  ' + errorThrown);
       }
   });
   var appid= "123";     
   $.ajax({
       url: "/api/Default1?app_id=" + appid,
       dataType: "json",
       asyc: false,
       type: "get",
       success: function (msg) {
                var paperandcolors = $.parseJSON(msg);                       
                ko.applyBindings(new PaperModal(paperandcolors));
       },
       error: function (jqXHR, textStatus, errorThrown) {
                alert(textStatus + '  ' + errorThrown);
       }
   }); 
```

});

```
function ViewPriceObjectOnWeb(d) {
this.price_quantity = ko.observableArray(d);
}

function PaperModal(paperArr) {
this.papers = ko.observableArray(paperArr);
} 
```

如果我通过评论一个或其他 DIV 来运行它们而不进行相应的调用，它工作正常。

当页面加载同时包含 DIVS 和它们的 LISTS 时，它会给出错误

无法解析绑定。消息：ReferenceError：“price_quantity”未定义；绑定值：foreach：price_quantity

为什么这行不通？非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T05:38:18.363

当您多次应用绑定时，您需要指定将引用哪个 DOM 元素。在您的情况下，您需要执行以下操作：

```
ko.applyBindings(new ViewPriceObjectOnWeb(skuandprice), document.getElementById("divQuantity")); 
```

HTML是：

```
<div id="divQuantity" style="background-color:black; color:white; overflow:scroll; height:350px;width:300px">
<ol data-bind="foreach: price_quantity"> 
```

与第二个绑定相同。

但实际上我建议将绑定与更新模型分开。这意味着您将在加载任何数据之前在某处单独调用此绑定代码。当你加载数据时，你只需要更新模型：

```
var ViewPriceObjectOnWeb = function()
{
var self = this;
self.price_quantity = ko.observableArray(0);
};
...
var priceObject = new ViewPriceObjectOnWeb();
ko.applyBindings(priceObject, document.getElementById("divQuantity"));
...
$.ajax({
       url: "/api/values?clientSKU=" + sku,
       dataType: "json",
       asyc: true,
       type: "get",
       success: function (msg) {
                priceObject.price_quantity = $.parseJSON(msg);          
       },
       error: function (jqXHR, textStatus, errorThrown) {
               alert(textStatus + '  ' + errorThrown);
       }
   }); 
```

knockoutjs 非常聪明，因此它会在模型​​更新后立即更新 DOM 元素。

# c# - 标识符中带有特殊字符的 RestSharp JsonDeserializer

> ID：13538529
> 
> 赞同：3
> 
> 时间：2012-11-24T05:22:21.647
> 
> 标签：c#, json, rest, restsharp

我有一些来自 Last.fm 的 JSON，如下所示：

```
{
   "toptags":{
      "@attr":{
         "artist":"Whatever",
         "album":"Whatever"
      }
   }
} 
```

有没有一种特殊的方法来设置 RestSharp 让它识别**@attr**？@（AT 符号）给我带来了问题，因为我无法创建一个与之匹配的标识符。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-14T13:19:18.400

通过查看 RestSharp 源，可以使其能够进行数据合同反序列化，这似乎需要更改 RestSharp 源。

`//#define SIMPLE_JSON_DATACONTRACT`在 SimpleJson.cs 中搜索

然后您还需要创建数据合约（请参阅下面的**“@attr”**）：

```
[DataContract]
public class SomeJson
{
    [DataMember(Name = "toptags")]
    public Tags TopTags { get; set; }
}

[DataContract]
public class Tags
{
    [DataMember(Name = "@attr")]
    public Attr Attr { get; set; }
}

[DataContract]
public class Attr
{
    [DataMember(Name = "artist")]
    public string Artist { get; set; }

    [DataMember(Name = "album")]
    public string Album { get; set; }
} 
```

没有尝试使用 RestSharp，但它适用于这段代码，RestSharp 使用 DataContractJsonSerializer，可能你必须设置

```
SimpleJson.CurrentJsonSerializerStrategy =   
                    SimpleJson.DataContractJsonSerializerStrategy 
```

我的测试：

```
var json = "{ \"toptags\":{ \"@attr\":{ \"artist\":\"Whatever\", \"album\":\"Whatever\" }}}";

var serializer = new  DataContractJsonSerializer(typeof(SomeJson));
var result = (SomeJson)serializer.ReadObject(
                               new MemoryStream(Encoding.ASCII.GetBytes(json))); 
```

# login - 密码错误时在 yii 登录功能中

> ID：13538530
> 
> 赞同：-1
> 
> 时间：2012-11-24T05:22:31.990
> 
> 标签：login, yii

在 yii 中，我正在创建登录功能。当用户输入正确的用户名但密码错误时，我想在数据库中为这个正确的用户名创建 serach，并希望将该用户名的 id 放入 loginattempt 表并向他显示错误的密码消息。所以可以请人帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T05:52:16.907

在 userIdentity.php 中将数据保存在表中。

```
 public function authenticate() {

    $user = User::model()->findByAttributes(array('username' => $this->username));

    if ($user === null) {
        $this->errorCode = self::ERROR_USERNAME_INVALID;
    } 

    elseif($user->password !== crypt($this->password, $salt))
    {    // save $user->id in attempt table here . 
            $this->errorCode = self::ERROR_PASSWORD_INVALID;

    }else{
     //set id 
  } 
```

并在文件中，其中验证函数称为 setError。

```
$this->_identity = new UserIdentity($this->username, $this->password);
        if (!$this->_identity->authenticate())
            if ($this->_identity->errorCode === UserIdentity::ERROR_USERNAME_INVALID) {
                $this->addError('password', 'Incorrect email Id');
            }elseif($this->_identity->errorCode === UserIdentity::ERROR_PASSWORD_INVALID){
                $this->addError('password', 'Incorrect Password');
            } 
```

# c# - C#无法启动系统EXE进程

> ID：13538531
> 
> 赞同：4
> 
> 时间：2012-11-24T05:22:40.580
> 
> 标签：c#, windows, process

我有这个代码：

```
 Process myProcess = new Process();

 myProcess.StartInfo.UseShellExecute = true;
 myProcess.StartInfo.FileName = "rdpclip.exe";
 myProcess.Start(); 
```

启动位于 system32 中的 exe 文件

我总是得到一个错误，找不到系统文件。在 Windows 2008 服务器中。

即使我设置了 StartupInfo.FileName="c:\\windows\\system32\\rdpclip.exe" 它仍然找不到文件！？

如果我将文件放在其他文件夹中，它可以工作，但在 System32 中它不会启动。我只需要杀死这个进程并重新开始，但我从没想过在C#中做这么简单的事情会如此痛苦？！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-24T06:33:56.847

此错误具有误导性，因为它通常意味着您没有对该文件夹的权限。尝试构建您的程序，然后右键单击生成的 .exe 并单击“以管理员身份运行”。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-22T14:14:02.027

试试这个（你需要导入 System.Runtime.InteropServices）：

```
[DllImport("kernel32.dll", SetLastError = true)]
public static extern bool Wow64DisableWow64FsRedirection(ref IntPtr ptr);

[DllImport("kernel32.dll", SetLastError = true)]
public static extern bool Wow64RevertWow64FsRedirection(IntPtr ptr);

IntPtr ptr = IntPtr.Zero;
if(Wow64DisableWow64FsRedirection(ref ptr))
{
    Process myProcess = new Process();
    myProcess.StartInfo.UseShellExecute = true;
    myProcess.StartInfo.FileName = "rdpclip.exe";
    myProcess.Start();
    Process.Start(myProcess);
    Wow64RevertWow64FsRedirection(ptr);    
} 
```

# makefile - 通过两步依赖计算了解 Makefile

> ID：13538532
> 
> 赞同：1
> 
> 时间：2012-11-24T05:22:42.333
> 
> 标签：makefile, build-automation, gnu, gnu-make, building

我想构建一些 C++ 代码。我已经有一个神奇的 Makefile 可以自动计算依赖关系，但我想将目标文件保存在单独的目录中。所以结构看起来像：

*   生成文件
*   来源/a/
*   来源/b/
*   来源/c/
*   对象/

我能够运行使用 obj/ 前缀将源转换为对象的 Makefile，但是当我想反向移植依赖计算时事情变得一团糟。

问题是几乎所有 Makefile 示例都是一步完成的，从 .cpp ( `%.d: %.cpp`) 创建 .d。我花了一些时间试图理解 Makefile 并通过反复试验来修复它。最后我有一个工作脚本：

```
DIRS := a b c
SOURCES := $(foreach dir,$(DIRS),$(wildcard source/$(dir)/*.cpp))
OBJECTS := $(patsubst %.cpp,obj/%.o,$(SOURCES))

obj/%.d: %.cpp
    @mkdir -p $(@D)
    @$(CXX) -E $(CXXFLAGS) -MM -MP -MF $@ -MQ $(@:.d=.o) -MQ $@ $<

obj/%.o: %.cpp obj/%.d
    @$(CXX) $(CXXFLAGS) -o $@ -c $<

project: $(OBJECTS)
    ...

-include $(OBJECTS:.o=.d) 
```

但我仍然不确定为什么我需要为 cpp->d 和 cpp&d -> o 设置单独的步骤（或者也许我理解 - 但我不知道为什么大多数示例不需要这个）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T18:28:41.477

假设源文件是`foo.cpp`and `bar.cpp`，并且标头是`foo.h`and `bar.h`，例如`foo.cpp`包含`foo.h`and `bar.h`，并且`bar.cpp`包含`bar.h`。

您可以拥有一个根本不涉及依赖文件的简单生成文件：

```
project: $(OBJECTS)
    ...

%.o: %.cpp
    ... 
```

现在，如果您修改`foo.cpp`， Make 将重建`foo.o`（和`project`）。如果您修改`bar.cpp`，Make 将重建`bar.o`（和`project`）。如果你修改了一个标题，Make 将什么也不做，因为 Make 不知道对象以任何方式依赖于标题。

您可以为依赖文件添加规则：

```
project: $(OBJECTS)
    ...

%.o: %.cpp
    ...

%.d:
    ...

-include *.d 
```

现在 Make 将构建和使用依赖文件——如果你记得告诉它的话。如果你这样做，Make 会知道当你修改`foo.h`它时必须重新构建`foo.o`，而当你修改`bar.h`它时必须重新构建`foo.o`和`bar.o`.

记住重建依赖文件是一件痛苦的事。让Make来做会更好。什么时候必须`foo.d`重建？好吧，当`foo.cpp`被修改时，当然：

```
project: $(OBJECTS)
    ...

%.o: %.cpp
    ...

%.d: %.cpp
    ...

-include *.d 
```

但`foo.d`也必须在`foo.o`(ie`foo.h`或`bar.h`) 的任何其他先决条件已被修改时重建。我没有拼出规则中的命令（而且我无法理解`%.d`规则中的命令），但是一个简单的规则将构建一个`foo.d`如下所示的命令：

```
foo.o: foo.cpp foo.h bar.h 
```

可以编写一个生成`foo.d`如下所示的命令：

```
foo.o: foo.cpp foo.h bar.h

foo.d: foo.cpp foo.h bar.h 
```

还有更复杂的方法，但这对于今天来说已经足够了。

至于*为什么*许多示例 makefile 共享某个次优特性，这是因为人们在没有严格检查或理解每个特性的情况下复制彼此的 makefile。

# php - 如何使用php将其脚本格式的变量存储为字符串

> ID：13538534
> 
> 赞同：1
> 
> 时间：2012-11-24T05:22:59.800
> 
> 标签：php

我想使用文本区域表单将此脚本存储为下面的变量，但是当我这样做并回显变量时，浏览器会解释代码。我不想要这个，我只想将脚本“按原样”存储在一个变量中，这样我就可以使用该变量进行进一步的操作。任何想法如何使用 php 中的文本区域表单来完成此操作？

```
<a href="https://rads.stackoverflow.com/amzn/click/com/B008EYEYBA" rel="nofollow noreferrer"><img border="0" src="http://ws.assoc-amazon.com/widgets/q?_encoding=UTF8&ASIN=B008EYEYBA&Format=_SL110_&ID=AsinImage&MarketPlace=US&ServiceVersion=20070822&WS=1&tag=mytwitterpage-20" ></a><img src="http://www.assoc-amazon.com/e/ir?t=mytwitterpage-20&l=as2&o=1&a=B008EYEYBA" width="1" height="1" border="0" alt="" style="border:none !important; margin:0px !important;" /> 
```

顺便说一句，当用户将上面的脚本放在文本区域中时，下面是我想要的确切 php 变量。

```
$str = "<a href="https://rads.stackoverflow.com/amzn/click/com/B008EYEYBA" rel="nofollow noreferrer"><img border="0" src="http://ws.assoc-amazon.com/widgets/q?_encoding=UTF8&ASIN=B008EYEYBA&Format=_SL110_&ID=AsinImage&MarketPlace=US&ServiceVersion=20070822&WS=1&tag=mytwitterpage-20" ></a><img src="http://www.assoc-amazon.com/e/ir?t=mytwitterpage-20&l=as2&o=1&a=B008EYEYBA" width="1" height="1" border="0" alt="" style="border:none !important; margin:0px !important;" />"; 
```

任何帮助是极大的赞赏。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T05:26:37.307

像这样使用

```
<?php
$str = '<a href="http://rads.stackoverflow.com/amzn/click/B008EYEYBA"><img border="0" src="http://ws.assoc-amazon.com/widgets/q?_encoding=UTF8&ASIN=B008EYEYBA&Format=_SL110_&ID=AsinImage&MarketPlace=US&ServiceVersion=20070822&WS=1&tag=mytwitterpage-20" ></a><img src="http://www.assoc-amazon.com/e/ir?t=mytwitterpage-20&l=as2&o=1&a=B008EYEYBA" width="1" height="1" border="0" alt="" style="border:none !important; margin:0px !important;" />' ;
echo htmlentities($str);
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T05:26:28.787

如果您需要以 HTML 格式输出您的值，则需要将您的`<`and`>`替换为`&lt;`and `&gt;`。最好是为此使用`htmlspecialchars()`功能。

此外，您被正确告知您的字符串中包含未转义的引号（将引号内的引号替换为`\"`）。

# python - Python：分裂和分裂

> ID：13538536
> 
> 赞同：0
> 
> 时间：2012-11-24T05:23:36.523
> 
> 标签：python, arrays, string, code-separation

我需要一些帮助; 我正在尝试用 python 编写一种命令提示符

我需要将文本文件拆分为行，然后将它们拆分为字符串

例子 ：

分裂

```
command1 var1 var2;
command2 (blah, bleh);
command3 blah (b bleh);
command4 var1(blah b(bleh * var2)); 
```

进入 ：

```
line1=['command1','var1','var2']

line2=['command2']
line2_sub1=['blah','bleh']

line3=['blah']
line3_sub1=['b','bleh']

line4=['command4']
line4_sub1=['blah','b']
line4_sub2=['bleh','var2']
line4_sub2_operand=['*'] 
```

那有可能吗？如果是这样，有人可以解释如何或给我一段代码来做到这一点吗？

非常感谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T07:20:03.267

有人指出，您的语言似乎没有推理。我所能做的就是将您指向[pyparsing](http://pyparsing.wikispaces.com/)，如果我要解决与此类似的问题，我会使用它，这里是[python 语言的 pyparsing 示例](http://pyparsing.wikispaces.com/file/view/pythonGrammarParser.py/30100174/pythonGrammarParser.py)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T07:16:53.767

您所说的是编写一种简单的编程语言。如果你知道自己在做什么，这并不是特别困难，但这是大多数人上一整学期的课程来学习的东西。您拥有多种不同类型的词法单元以及看起来不平凡的递归语法这一事实意味着您将需要一个扫描器和一个解析器。如果您真的想自学这样做，那么[这](http://en.wikipedia.org/wiki/Syntax_%28programming_languages%29)可能不是一个糟糕的起点。

如果您简化语法，使每个命令只有固定数量的参数，那么您可能可以不使用[正则表达式](http://docs.python.org/2/library/re.html)来表示各个命令的语法。

试一试。只是不要指望它会在一夜之间自行解决。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T08:12:53.643

就像其他人所说的那样，您的语言设计令人困惑，您可能需要对其进行简化。但我会给你你正在寻找的东西，让你用困难的方式弄清楚。

标准的 python 文件对象（由 open() 返回）是行的迭代器，python 字符串类的 split() 方法将字符串拆分为子字符串列表。因此，您可能希望从以下内容开始：

```
for line in command_file
    words = line.split(' ') 
```

[http://docs.python.org/3/library/string.html](http://docs.python.org/3/library/string.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-24T08:39:51.623

您可以使用此代码逐行读取文件并用单词之间的空格将其拆分。

```
a= True
f = open(filename)
while a:
    nextline=f.readline()
    wordlist= nextline.split("")
    print(wordlist)
    if nextline=="\n":
        a= False 
```

# iphone - 如何在 iphone 的特定窗口块中的 UIImageView 中显示图像

> ID：13538538
> 
> 赞同：0
> 
> 时间：2012-11-24T05:24:21.130
> 
> 标签：iphone, ios

我有一个窗口，我想在该窗口的特定块中显示图像。图像是从本地 XML 文件中检索的。我解析了 XML 文件并在日志中得到了图像值，但我不知道如何将它放在那个特定的块中。粘贴下图以供参考。

![UIImageView](../Images/abbdbcdd74193e8691c061a16955a8d4.png)

箭头标记表示在此 UIImageView 中我需要获取图像。另外，我怀疑我是否需要在情节提要中提及 UIIMageView 的任何名称。建议我一个想法。

**已编辑**

我的解析器代码：

```
NSString *path = [[[NSBundle mainBundle] resourcePath] stringByAppendingPathComponent:@"Sample.xml"];
NSData *data = [[NSData alloc] initWithContentsOfFile:path];
 NSXMLParser *xmlParser = [[NSXMLParser alloc] initWithData:data];
[xmlParser setDelegate:theParser] 
```

在此之后，我使用此代码获取图像：

```
UIImage *image = [UIImage imageWithContentsOfFile:@"/Users/administrator/Desktop/imageApp/resources/Main_pic1.png"]; 
```

在此之后，我不知道如何继续。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T06:09:31.157

Yes, you have to create `IBOutlet` in .h file

like `IBOutlet UIImageView *imgview;` and connect imgview with your `UIImageview` from xib.

After that you can set image to image view.

```
NSURL *URL = [NSURL URLWithString:[your url which u get form local xml]];
NSData *imageData = [NSData dataWithContentsOfURL:URL];
UIImage *image = [UIImage imageWithData:imageData];

imgview.image=image; 
```

Ttry this, It may help you.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T06:40:53.637

您可以通过以下方式直接将 url 图像传递给 Uiimageview：

```
YourImageView.image = [UIImage imageWithContentsOfURL:YourUrl]; 
```

可以通过 NSData 来做同样的事情，但这是个坏主意。相反，应该使用 NSURLConnection 异步下载图像，并且只有在完全下载后才能将其转换为 UIImage 并分配给图像视图。

然后将所有网址保存在**NSMutableArry *UrlArray**中

```
int x = 0;
int y = 10;

for (int i = 0; i< [UrlArray]; i++)
{
    UIImageView *imageView = [[[UIImageView alloc]initWithFrame:CGRectMake(3+x,y, 80,
    80)]autorelease];
    imageView.backgroundColor = [UIColor blueColor];
    if (x >= 300)
    {
        x = 0;

        y = y+imageView.frame.size.height+3;
        imageView.frame = CGRectMake(x+3 , y, 80, 80);

    }

     CIImage *beginImage = [CIImage imageWithContentsOfURL:[UrlArray ObjectAtIndex:i]];
    imageView.image = [UIImage imageWithCIImage:beginImage];
    x = x+imageView.frame.size.width+5;
    [self.view addSubview:imageView];

} 
```

我猜会做的工作；

# php - 如何在 ubuntu 12.04 + 虚拟主机 + mod_rewrite 中安装 ZF2

> ID：13538543
> 
> 赞同：0
> 
> 时间：2012-11-24T05:25:10.147
> 
> 标签：php, mod-rewrite, ubuntu, zend-framework2

[我从https://github.com/ZF-Commons/ZfcUser](https://github.com/ZF-Commons/ZfcUser)安装了 zf2 框架应用程序和一些模块，如 zfcuser 和 zfcBase， 最后我在本地成功安装了它，最后我运行了 192.168.3.12/myproject/user 但我找到了 404始终未找到错误我必须运行 192.168.3.12/myproject/public/user 所以我发现有很多人正在告诉我要制作虚拟主机我无法让我使用虚拟主机运行 zf2 安装

请让我知道正确的解决方案。我只想在虚拟主机的帮助下安装 zf2。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T05:50:16.240

对不起，迟到的答案我前段时间已经完成了，您可以通过以下方式完成。

1.  在 /var/www 目录中安装 zf2 假设项目名称是 site1。

2.  使用此命令启用 mod_rewrite **sudo a2enmod rewrite**

3.  配置虚拟主机和主机文件**（记住这是必须做的）**

    **a** . 复制 /etc/apache2/sites-available/default 中的当前默认设置，并将其命名为与您的新站点相同的名称。

    ```
    eg. cp /etc/apache2/sites-available/default /etc/apache2/sites-available/site1 
    ```

    **湾。**使用您喜欢的文本编辑器编辑每个站点的新配置文件。在 ServerAdmin 行的正下方添加行 ServerName server1 并更改 DocumentRoot 和 Directory 以指向您的新站点。这应该是这样的：

    ```
    /etc/apache2/sites-available/site1 
    ```

    **C。**

    ```
    <VirtualHost *:80>
      ServerAdmin webmaster@localhost
      ServerName test.zf2.com
      DocumentRoot /var/www/site1/public
      <Directory />
        Options FollowSymLinks
        AllowOverride All
     </Directory>
     <Directory /var/www/site1/public/>
        Options -Indexes FollowSymLinks MultiViews
        AllowOverride All
        Order allow,deny
        allow from all
     </Directory>

     ErrorLog ${APACHE_LOG_DIR}/error.log

     # Possible values include: debug, info, notice, warn, error, crit,
     # alert, emerg.
     LogLevel warn
     CustomLog ${APACHE_LOG_DIR}/access.log combined
    </VirtualHost> 
    ```

    **d。** 运行这个命令

    ```
    sudo a2ensite site1 
    ```

    **e.** 重启阿帕奇

    ```
     sudo /etc/init.d/apache2 reload 
    ```

4.Edit主机文件设置你的新主机名和IP地址。

跑

```
sudo nano /etc/hosts 
```

设置此数据

```
YOUR_IP_ADDRESS    test.zf2.com 
```

就是这样！！！！希望这可以帮助...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T17:02:30.023

确保在您的 Apache 配置中，您网站的根目录指向“Your_Skeleton_App_Path/ **public** ”。重写规则仅针对公用文件夹设置

骨架目录的根文件夹不包含任何 index.php 文件（因此出现 404 错误）

（我希望我可以仅将这个答案作为评论，但我还不能评论）

# c++ - 在通过构造函数传递变量的对象中创建对象

> ID：13538547
> 
> 赞同：1
> 
> 时间：2012-11-24T05:25:52.980
> 
> 标签：c++, oop

整天去谷歌旅行，我一直在为此头疼。我有一个主对象，需要在其构造函数中创建其他几个对象，主对象在其构造函数中获取变量，这些变量将传递给它创建的对象。

```
class WorldManager{
  public:
  WorldManager(int x, int y, int z){
    //do stuff
  }
}

class GameManager{
  public:
  WorldManager world;
  GameManager(int x, int y, int z){
    world(x,y,z);
  }
} 
```

我收到错误

```
error: no matching function for call to `GAMEMANAGER::GraphicsManager(HWND__*&, int&, int&)' 
```

它一直有效，直到我在世界级的构造函数中要求 args

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T05:31:10.850

我认为你想要：

```
class GameManager{
public:
    WorldManager world;
    GameManager(int x, int y, int z) : world(x, y, z) { }
}; 
```

奇怪的冒号被称为初始化列表，它构建了成员对象和父类以及一堆其他的东西。

* * *

如果您有多个要构建的对象，请将它们添加到列表中：

```
class GameManager{
public:
    WorldManager world1, world2;
    GameManager(int x, int y, int z) : world1(x, y, z), world2(x, y, z) { }
}; 
```

# java - Google Now 更改命令

> ID：13538548
> 
> 赞同：1
> 
> 时间：2012-11-24T05:26:13.713
> 
> 标签：java, android, android-4.2-jelly-bean, google-now

我想为谷歌现在开发一个应用程序，谷歌现在监听麦克风的命令，当麦克风收到命令时，在它现在去谷歌之前，我想通过代码更改命令。

例如。“明天钦奈的温度是多少”？

我想将此命令更改为“今天钦奈的温度是多少”，然后将此命令传递给 Google Now。

我想知道如何做到这一点

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T05:31:28.490

目前这是不可能的。[您可以在此处](http://support.google.com/nexus/bin/answer.py?hl=en&answer=2842392&topic=2818311&ctx=topic)查看当前可用的语音命令列表。

# java-me - 修改 j2me midlet

> ID：13538550
> 
> 赞同：1
> 
> 时间：2012-11-24T05:26:37.167
> 
> 标签：java-me, midp

我想更改开源应用程序中的一些字符串（测试目的）。所以我使用 jad 反编译器反编译了我的应用程序。

原始类文件[http://dl.dropbox.com/u/32657135/YourTube.class](http://dl.dropbox.com/u/32657135/YourTube.class)

发出命令`Jad.exe Yourtube.jar.java`

得到 jad 作为输出[http://dl.dropbox.com/u/32657135/YourTube.jad.java](http://dl.dropbox.com/u/32657135/YourTube.jad.java)

**无需修改再次编译代码**

cmd中的命令`javac Yourtube.jar.java`

**错误**

```
YourTube.jad.java:57: error: ';' expected
        JVM INSTR monitorenter ;
                 ^
YourTube.jad.java:57: error: not a statement
        JVM INSTR monitorenter ;
                  ^
YourTube.jad.java:59: error: not a statement
        this;
        ^
YourTube.jad.java:66: error: ';' expected
        JVM INSTR monitorenter ;
                 ^
YourTube.jad.java:66: error: not a statement
        JVM INSTR monitorenter ;
                  ^
YourTube.jad.java:68: error: not a statement
        this;
        ^
6 errors 
```

我想知道，为什么我在重新编译时收到此错误。我做错了什么吗？

# java - 来自整数的解析器字符串

> ID：13538553
> 
> 赞同：-2
> 
> 时间：2012-11-24T05:26:59.537
> 
> 标签：java, android, parsing, integer

> 这是我转换为整数的代码

```
 String pricevalue=i.getStringExtra("info");
        int start = pricevalue.indexOf("price:");
       int index=pricevalue.indexOf("$");

       price=pricevalue.subSequence(index,pricevalue.length()-1).toString();

 int p1=Integer.parseInt(price.toString());//error is here 
```

> 我的日志猫错误

```
11-24 10:51:32.002: E/AndroidRuntime(549): FATAL EXCEPTION: main
11-24 10:51:32.002: E/AndroidRuntime(549): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.orderplacemnet/com.example.orderplacemnet.YourTotalBill}: java.lang.NumberFormatException: unable to parse '$34.00' as integer
11-24 10:51:32.002: E/AndroidRuntime(549):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
11-24 10:51:32.002: E/AndroidRuntime(549):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
11-24 10:51:32.002: E/AndroidRuntime(549):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
11-24 10:51:32.002: E/AndroidRuntime(549):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
11-24 10:51:32.002: E/AndroidRuntime(549):  at android.os.Handler.dispatchMessage(Handler.java:99)
11-24 10:51:32.002: E/AndroidRuntime(549):  at android.os.Looper.loop(Looper.java:123)
11-24 10:51:32.002: E/AndroidRuntime(549):  at android.app.ActivityThread.main(ActivityThread.java:4627)
11-24 10:51:32.002: E/AndroidRuntime(549):  at java.lang.reflect.Method.invokeNative(Native Method)
11-24 10:51:32.002: E/AndroidRuntime(549):  at java.lang.reflect.Method.invoke(Method.java:521)
11-24 10:51:32.002: E/AndroidRuntime(549):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
11-24 10:51:32.002: E/AndroidRuntime(549):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
11-24 10:51:32.002: E/AndroidRuntime(549):  at dalvik.system.NativeStart.main(Native Method)
11-24 10:51:32.002: E/AndroidRuntime(549): Caused by: java.lang.NumberFormatException: unable to parse '$34.00' as integer
11-24 10:51:32.002: E/AndroidRuntime(549):  at java.lang.Integer.parse(Integer.java:433)
11-24 10:51:32.002: E/AndroidRuntime(549):  at java.lang.Integer.parseInt(Integer.java:422)
11-24 10:51:32.002: E/AndroidRuntime(549):  at java.lang.Integer.parseInt(Integer.java:382)
11-24 10:51:32.002: E/AndroidRuntime(549):  at com.example.orderplacemnet.YourTotalBill.onCreate(YourTotalBill.java:51)
11-24 10:51:32.002: E/AndroidRuntime(549):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
11-24 10:51:32.002: E/AndroidRuntime(549):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
11-24 10:51:32.002: E/AndroidRuntime(549):  ... 11 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T05:43:22.550

写

```
price=pricevalue.subSequence(index+1,pricevalue.length()-1);
Double p1=Double.parseDouble(price); 
```

代替

```
price=pricevalue.subSequence(index,pricevalue.length()-1).toString();
int p1=Integer.parseInt(price.toString()); 
```

也许它会解决你的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T05:41:37.107

我改变了代码现在试试

```
String pricevalue=i.getStringExtra("info");
int start = pricevalue.indexOf("price:");
int index=pricevalue.indexOf("$");
price=pricevalue.subSequence(index,pricevalue.length()-1).toString();
int p1=Integer.parseInt(price.replaceAll("[\\D]", "")) 
```

# iphone - 我不再在项目中的文本文件仍然显示在手机上

> ID：13538554
> 
> 赞同：0
> 
> 时间：2012-11-24T05:27:05.790
> 
> 标签：iphone, ios, xcode

我的文档目录中有旧文件，但不知道为什么。

在模拟器上它按预期工作。我可以更新文件没问题。我只是删除应用程序。从跳板和重建。我可以轻松验证文件是否正确。

但是，在 iPhone 上运行时，会显示旧版本的文件。当然，我总是删除该应用程序。如果我去项目并删除文件并在构建阶段验证它们不包括在内，它们仍然会出现在 iPhone 上。

我已经重新启动了mac和手机，没有任何变化。

我什至在管理器下找到了如何从 iPhone 下载文件并且它们确实显示了旧文件，但我不确定它们是如何到达那里的，因为我不认为我要求复制它们......

谢谢任何建议！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T01:59:10.003

找到编译输出后，我看到 xcode 正在从名为“DerivedData”的目录中复制，然后我发现了有关可能问题/错误的帖子。

[这是修复的链接](https://stackoverflow.com/questions/5714372/how-to-empty-caches-and-clean-all-targets-xcode-4)

# java - 为什么 HotSpots 编译日志时间与 ManagementFactory.getRuntimeMXBean().getUptime() 不同？

> ID：13538555
> 
> 赞同：7
> 
> 时间：2012-11-24T05:27:06.110
> 
> 标签：java, jvm, benchmarking, jvm-hotspot

当我使用参数启动 JVM 时

```
-XX:+PrintCompilation 
```

输出是这样的：

```
 60    1             java.lang.String::hashCode (55 bytes)
 74    2             sun.nio.cs.UTF_8$Encoder::encode (361 bytes) 
```

第一列是以毫秒为单位的时间戳，当打印日志时，我想将此时间戳与返回的值进行比较`ManagementFactory.getRuntimeMXBean().getUptime()`：

```
long jvmUpTime = ManagementFactory.getRuntimeMXBean().getUptime(); 
```

或者

```
long jvmStartTime = ManagementFactory.getRuntimeMXBean().getStartTime(); 
```

但我的结果是这样的：

```
[62:log from Java code]
103    5             benchmark.AbstractBenchmarkST::benchmark (82 bytes)
[62:log from Java code] 
```

似乎它们之间有大约40毫秒的差异，这使得两个时间戳无法比拟。任何想法如何处理这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-09T14:41:09.153

**简答**

HotSpots JIT 编译日志的第一列中打印的时间（使用“-XX:+PrintCompilation”参数启动 JVM 时）的持续时间恒定大于 ManagementFactory.getRuntimeMXBean().getUptime() 返回的时间（假设 getUptime 在编译日志被打印的同时被调用）。

这对于在 Windows 7 下运行的 JDK 7 来说至少是正确的，并且可以通过使用“-XX:+PrintCompilation”执行以下代码来轻松验证：

```
public static void main(String[] args) {
    System.out.println("JVM uptime: " + ManagementFactory.getRuntimeMXBean().getUptime());
} 
```

结果应如下所示：

> ```
>  77    1             java.lang.String::hashCode (55 bytes)
>  79    2             java.lang.String::indexOf (70 bytes)
>  80    3             java.lang.String::charAt (29 bytes)
>  82    4             java.lang.String::lastIndexOf (52 bytes)
>  82    5             java.lang.String::equals (81 bytes)
>  82    6             java.lang.AbstractStringBuilder::ensureCapacityInternal (16 bytes)
>  82    7             java.lang.String::indexOf (166 bytes)
>  85    8     n       java.lang.System::arraycopy (native)   (static) 
> ```
> 
> JVM 正常运行时间：43

即使在打印 JIT 编译之后调用了 ManagementFactory.getRuntimeMXBean().getUptime()，返回的时间似乎指向更早的调用。

> 似乎它们有大约 40 毫秒的差异，这种差异使它无法比拟。任何想法如何处理这个？

由于时间差是恒定的，并且在整个运行 JVM 期间不应该改变，所以只要考虑时间差，人们仍然应该能够比较时间。

**长答案**

“-XX:+PrintCompilation” JVM 参数几乎没有文档记录，只能猜测，第一列表示相对于 JVM 启动的时间戳。如果看一下 HotSpot 编译器的源代码，就会很清楚，PrintCompilation 打印的时间和 ManagementFactory.getRuntimeMXBean().getStartTime() 返回的时间引用了两个完全不同的时间戳，它们都在期间初始化JVM的启动。

在调用[CompileTask::print_compilation_impl](https://bitbucket.org/jaroslav/hotspot/src/0f80645e9c266c2bddad6fd94423b7ae20534b09/src/share/vm/compiler/compileBroker.cpp?at=default#cl-382)期间会打印编译日志：

```
void CompileTask::print_compilation_impl(outputStream* st, Method* method, int compile_id, int comp_level,
                                        bool is_osr_method, int osr_bci, bool is_blocking,
                                        const char* msg, bool short_form) {
    if (!short_form) {
        st->print("%7d ", (int) st->time_stamp().milliseconds());  // print timestamp
    }
    st->print("%4d ", compile_id);    // print compilation number
    [...]
} 
```

st->time_stamp() 在 ostream.cpp 中实现，它指的是一个[TimeStamp](https://bitbucket.org/jaroslav/hotspot/src/0f80645e9c266c2bddad6fd94423b7ae20534b09/src/share/vm/runtime/timer.cpp)，它使用 os::elapsed_counter() 返回的时间进行初始化：

[ostream.cpp](https://bitbucket.org/jaroslav/hotspot/src/0f80645e9c266c2bddad6fd94423b7ae20534b09/src/share/vm/utilities/ostream.cpp?at=default#cl-197)：

```
 void outputStream::stamp() {
     if (! _stamp.is_updated()) {
         _stamp.update(); // start at 0 on first call to stamp()
     }
     [...]
 } 
```

[计时器.cpp](https://bitbucket.org/jaroslav/hotspot/src/0f80645e9c266c2bddad6fd94423b7ae20534b09/src/share/vm/runtime/timer.cpp#cl-86)：

```
 void TimeStamp::update() {
     update_to(os::elapsed_counter());
 } 
```

os::elapsed_counter() 在[JVM 启动](https://bitbucket.org/jaroslav/hotspot/src/0f80645e9c266c2bddad6fd94423b7ae20534b09/src/share/vm/runtime/thread.cpp?at=default#cl-3284)期间依次通过调用 os::init() 来初始化：

```
jint Threads::create_vm(JavaVMInitArgs* args, bool* canTryAgain) {
    [...]
    os::init();
    [...]
} 
```

另一方面，Java 方法 ManagementFactory.getRuntimeMXBean().getStartTime() 指的是[VMManagementImpl.java](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/sun/management/VMManagementImpl.java#178)中的本机方法：

```
public native long getStartupTime(); 
```

它在[VMManagementImpl.c](https://github.com/openjdk-mirror/jdk7u-jdk/blob/master/src/share/native/sun/management/VMManagementImpl.c#L192)中实现，并从 JmmInterface 常量 JMM_JVM_INIT_DONE_TIME_MS 返回时间：

[管理.cpp](https://bitbucket.org/jaroslav/hotspot/src/0f80645e9c266c2bddad6fd94423b7ae20534b09/src/share/vm/services/management.cpp?at=default#cl-1010)：

```
 case JMM_JVM_INIT_DONE_TIME_MS:
       return Management::vm_init_done_time(); 
```

在 os::init() 被调用后的一段时间内，它在 JVM 启动期间被初始化：

```
jint Threads::create_vm(JavaVMInitArgs* args, bool* canTryAgain) {
    [...]
    os::init();
    [...]
    // record VM initialization completion time
    Management::record_vm_init_completed();
    [...]
} 
```

因此，JIT 编译日志打印的时间与 ManagementFactory.getRuntimeMXBean().getStartTime() 返回的时间不同。

# android - PhoneGap 上传错误：FILE_NOT_FOUND_ERR（代码=1）

> ID：13538557
> 
> 赞同：0
> 
> 时间：2012-11-24T05:27:33.593
> 
> 标签：android, cordova, upload, file-not-found

上传文件时出现错误。

因此，我使用“fileSystem.root”获取文件列表，并将所选文件名放入变量“selected_file”。

这是代码：

```
//assume ROOT = fileSystem.root and selected_file = c360_debug.txt

var options = new FileUploadOptions();
options.params = $("#myform").serialize();

ROOT.getFile(selected_file, null, function (fileEntry) {
    fileEntry.file(
        function (properties) {
            options.fileKey="newfile";
            options.fileName = properties.name;
            options.mimeType = properties.type;
            var ft = new FileTransfer();
            ft.upload(
                fileEntry.fullPath,
                "http://abc.php",
                function (r) {
                    //do something
                }, onTransferError, options);
        }, onFileError);
} , getRootFailed); 
```

每次我上传文件时，都会出现“FILE_NOT_FOUND_ERR”错误。怎么会 ？？？该文件存在，我可以选择该文件，因为它是由“fileSystem.root”检索的。我试过 {create: true}、{create: true、exclusive: false} 和 {create: true, Exclusive: true}，但没有任何效果。

这是我的 LogCat：

```
11-23 23:35:53.289: D/FileTransfer(9540): upload file:///mnt/sdcard/c360_debug.txt to http://abc.php
11-23 23:35:53.289: D/FileTransfer(9540): fileKey: newfile
11-23 23:35:53.289: D/FileTransfer(9540): fileName: c360_debug.txt
11-23 23:35:53.289: D/FileTransfer(9540): mimeType: text/plain
11-23 23:35:53.296: D/FileTransfer(9540): params: {}
11-23 23:35:53.296: D/FileTransfer(9540): trustEveryone: false
11-23 23:35:53.296: D/FileTransfer(9540): chunkedMode: true
11-23 23:35:53.296: D/FileTransfer(9540): headers: null
11-23 23:35:53.296: D/FileTransfer(9540): objectId: 2
11-23 23:35:53.296: D/FileTransfer(9540): String Length: 125
11-23 23:35:53.296: D/FileTransfer(9540): Content Length: 1518
11-23 23:35:56.937: E/FileTransfer(9540): {"target":"http:\/\/abc.php","source":"file:\/\/\/mnt\/sdcard\/c360_debug.txt","http_status":404,"code":1}
11-23 23:35:56.937: E/FileTransfer(9540): java.io.FileNotFoundException: http://abc.php
11-23 23:35:56.937: E/FileTransfer(9540):     at org.apache.harmony.luni.internal.net.www.protocol.http.HttpURLConnectionImpl.getInputStream(HttpURLConnectionImpl.java:521)
11-23 23:35:56.937: E/FileTransfer(9540):     at org.apache.cordova.FileTransfer.getInputStream(FileTransfer.java:480)
11-23 23:35:56.937: E/FileTransfer(9540):     at org.apache.cordova.FileTransfer.access$400(FileTransfer.java:62)
11-23 23:35:56.937: E/FileTransfer(9540):     at org.apache.cordova.FileTransfer$1.run(FileTransfer.java:402)
11-23 23:35:56.937: E/FileTransfer(9540):     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1088)
11-23 23:35:56.937: E/FileTransfer(9540):     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:581)
11-23 23:35:56.937: E/FileTransfer(9540):     at java.lang.Thread.run(Thread.java:1019) 
```

那么，知道有什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T19:15:53.753

我刚刚解决了这个问题。它是由[Moodle](http://moodle.org)的 php 函数引起的：

```
error("Course module is incorrect"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-16T11:41:36.287

你只需要做一点改变：**不使用 fileEntry.fullPath 而是使用 fileEntry.toURI()**

```
var options = new FileUploadOptions();
options.params = $("#myform").serialize();

ROOT.getFile(selected_file, null, function (fileEntry) {
    fileEntry.file(
        function (properties) {
            options.fileKey="newfile";
            options.fileName = properties.name;
            options.mimeType = properties.type;
            var ft = new FileTransfer();
            ft.upload(
                fileEntry.toURI(),
                "http://abc.php",
                function (r) {
                    //do something
                }, onTransferError, options);
        }, onFileError);
} , getRootFailed); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T04:05:56.380

您没有正确读取错误。找到了文件 /mnt/sdcard/c360_debug.txt，但是抛出文件未找到异常的是[http://abc.php](http://abc.php)，它显然不存在。我希望您不要尝试在您的设备上运行 php 文件。

# asp.net - 如何禁用按钮 asp.net

> ID：13538565
> 
> 赞同：23
> 
> 时间：2012-11-24T05:28:58.880
> 
> 标签：asp.net

如何在 asp.net 中禁用或启用按钮？我想在单击后禁用按钮以防止双击。单击它后，我试图禁用我的登录按钮。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-11-24T05:31:53.410

您必须在客户端禁用它，以便用户无法再次单击它。

```
<asp:button id="btn" runat="server" OnClientClick="this.disabled=true;"...... 
```

在服务器端 asp.net 代码上禁用。

```
btn.Enabled = false; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-24T05:37:35.803

您可以使用客户端 onclick 事件来执行此操作：

```
yourButton.Attributes.Add("onclick", "this.disabled=true;"); 
```

**或者**

你可以用javascript来做到这一点。在您的表单标签中，

```
onsubmit="javascript:this.getElementById("submitButton").disabled='true';" 
```

**或者**

在文件后面的代码中，您可以这样做

```
button1.enabled = false 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-24T06:22:18.383

编写一个检查用户名和密码的 java 脚本函数。
如果它们不是空白，则禁用该按钮。
但是，如果您禁用该按钮并且有回发。在回发之后它仍然会被启用。
所以想法是

1.  创建一个java脚本函数。
2.  验证用户名和密码
3.  如果它们有效
4.  禁用按钮（javascript）。
5.  添加 ClientIdMode="Static"`<asp:button>`以防止 .NET 破坏名称。

- 编辑

```
<asp:button id="btn" runat="server" ClientIdMode="Static" OnClientClick="return btn_disable" ... 
```

你的java脚本代码

```
function btn_disable
{
   //check for user name and password
   // if filled
   document.getElementById("btn").disabled=true;

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-01-06T14:22:59.983

**仅前端：**

```
<button id="loginbtnID" onclick="DisableBtn()">Log in</button>

<script type="text/javascript">
  function DisableBtn() {
    document.getElementById("loginbtnID").disabled = true;
  }
</script> 
```

* * *

**前端和代码背后：**

（虽然这会重新加载整个页面..检查[这个](https://stackoverflow.com/questions/21325211/how-to-avoid-page-refresh-after-button-click-event-in-asp-net#:%7E:text=Page%20got%20refreshed%20when%20a,do%20the%20trick%20for%20you.)以防止重新加载）

禁用按钮.aspx：

```
<button id="loginbtnID" runat="server" onclick="DisableBtn()" OnClick="codeBehindFunction">Log in</button> 
```

禁用按钮.aspx.cs：

```
protected void codeBehindFunction(object sender, EventArgs e)
{
  loginbtnID.Disabled = false;
} 
```

# vb.net - 当 vb.net 表单失去焦点时会触发哪个事件？

> ID：13538566
> 
> 赞同：0
> 
> 时间：2012-11-24T05:29:14.250
> 
> 标签：vb.net, vb.net-2010

当 VB.NET 窗体失去焦点时会触发哪个事件？我正在使用氪星导航器。

```
Me.kryNavi.Pages.Add(kryPage)
With pform
    .TopLevel = False
    .Parent = kryPage
    .Dock = DockStyle.Fill
    .BringToFront()
    .Show()
    .Activate()
End With 
```

我正在使用上面的代码来显示一个表单。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T05:42:44.377

您正在寻找[Form.Deactivate](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.deactivate%28v=vs.80%29.aspx)事件。它“在表单失去焦点并且不再是活动表单时发生”。

# dynamic - Groovy 如何以动态方式工作？

> ID：13538571
> 
> 赞同：2
> 
> 时间：2012-11-24T05:31:11.630
> 
> 标签：dynamic, compiler-construction, groovy, static

我为静态类型语言构建了一个小型编译器。在了解了静态语言的工作原理之后，我无法深入了解像 groovy 这样的动态语言。

在构建我的编译器时，我知道一旦我生成了机器级代码，就无法更改它！（即它的`run-time`）。

但是 Groovy 是如何做这些神奇的事情的，比如在如下语句中推断类型：

```
def a = "string"
a.size() 
```

就我而言，groovy 必须在运行 line 之前找到 type `a`is of 。似乎它是在编译时这样做的（在构建 AST 时）！但是这种语言被称为动态的。`string``a.size()`

我很困惑，请帮我弄清楚。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T13:56:54.877

Groovy 不是简单地“调用”一个方法，而是通过元对象协议调度它。方法调用**作为消息发送**给对象，对象可以响应也可以不响应。使用动态类型时，对象类型无关紧要，只要它响应该消息即可。这称为[鸭子打字](https://en.wikipedia.org/wiki/Duck_typing)。

当您反编译 Groovy 代码时，您可以看到它（虽然不容易）。您可以`groovyc`使用其他工具进行编译和反编译。我推荐[jd-gui](http://java.decompiler.free.fr/?q=jdgui)。由于 Groovy 的方法缓存，您不会看到该方法被显式调用（这样做是为了实现 Groovy 的简洁性能）。

对于一个简单的脚本，如：

```
def a = "abcdefg"
println a.substring(2) 
```

这将是生成的代码：

```
CallSite[] arrayOfCallSite = $getCallSiteArray(); Object a = "abcdefg";
return arrayOfCallSite[1].callCurrent(
    this, arrayOfCallSite[2].call(a, Integer.valueOf(2))); return null; 
```

并且方法调用被“调度”到对象，而不是直接调用。这是一个类似于 Smalltalks 和 Ruby 方法分派的概念。正是由于这种机制，您可以拦截 Groovy 对象上的方法和属性访问。

从 Groovy 2 开始，Groovy 代码可以静态编译，因此就像您的编译器一样。

# azure - 此控制器不会出现在 Azure 上的 Web Api 中

> ID：13538573
> 
> 赞同：0
> 
> 时间：2012-11-24T05:31:27.730
> 
> 标签：azure, asp.net-mvc-4, asp.net-web-api, azure-web-roles

```
namespace StorageRoleMVC4.Controllers
{
    public class SearchController : ApiController
    {
        public Dictionary<string, string> Get([FromUri] string searchString, [FromUri] string searchObject)
        {
            var searchHelper = new SearchStorageHelper();
            var objectList = searchHelper.Retrieve(searchString, searchObject);

            return objectList;
        }
    }
} 
```

此控制器是否有任何内容使其在部署后无法访问（到 Azure Web 角色）？当我尝试访问它时，我只是收到一个 404 错误。它在本地模拟器上运行良好。

最近 2 次我部署了我的项目，我的 Web 服务中的所有控制器在几个小时内都返回了 404 错误，直到项目似乎自行修复。我不知道为什么，但它可能是相关的。

更新我发布后，Web 角色 VM 上的事件日志中有一条警告：属于站点 '1273337584' 的应用程序 '/' 设置了无效的 AppPoolId 'ea7a2e15-9390-49e1-a16b-67ff1cdb7dcb'。因此，该应用程序将被忽略。

这是我网站的 ID，但 AppPoolId 不正确。更改应用程序池会将 404 变为 502。

此外，发布后，万维网发布服务将关闭。当我打开它并进行 IIS 重置时，重置后它再次关闭。

当我重新启动 Web 角色 VM 时，大多数控制器再次工作，并且万维网发布服务已打开。但是，这个 SearchController 仍然不起作用。或者自从这个问题开始发生以来我创建的任何其他新控制器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T18:58:47.657

好吧，经过大量不成功的故障排除后，我只是回滚到早期版本的代码，发现在我部署它时它没有读取 Web 服务。所以我从那个版本重新开始并重新构建了增量。

这涉及删除一些 web.config 条目并删除一些库，创建一些类并在 global.asax 中引用它们（我认为这就是它所在的位置）以覆盖 te Authorize 属性...

如果有人有更好的答案，我会将答案切换到您发布的内容。

# xml - XML 模式唯一约束

> ID：13538578
> 
> 赞同：0
> 
> 时间：2012-11-24T05:32:22.360
> 
> 标签：xml, schema

我有一个如下所示的输入 XML 架构，我希望我的架构执行以下 2 件事，因为我不确定如何编写以下 2 个约束。

1.  当一个元素“建立”存在时，另一个元素“planToEstablish”不能出现。反之，如果元素“planToEstablish”存在，则“建立”元素一定不存在。两个元素也可能不存在。
2.  Farm 元素需要同时通过“farmOwnerName”和“produce”属性进行验证。例如，如果farmOwnerName="Jerry"produce="apple"，那么我们不能允许存储具有相同farmOwnerName="Jerry"produce="apple" 的另一个农场。但是我们仍然可以存储其他农场元素，只要“produce”或“farmOwnerName”不同。示例farmOwnerName="Jerry"produce="orange"仍然可以存储。

下面是输入 XML 文件。

```
<Country>
 <farm farmOwnerName="Jerry" produce="apple">
   <established>1974</established>
   <totalWorker>30</totalWorker>
 </farm>
 <farm farmOwnerName="Ronald" produce="apple">
   <totalWorker>15</totalWorker>
 </farm>
 <farm farmOwnerName="Richard" produce="lemon">
   <planToEstablish>1970</planToEstablish>
   <totalWorker>20</totalWorker>
 </farm>
</Country> 
```

下面是我现在拥有的 XML 模式代码。

```
<?xml version="1.0" encoding="UTF-8"?>
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema" >
<xs:element name="established" type="xs:integer"/>
<xs:element name="planToEstablish" type="xs:integer"/>
<xs:element name="totalWorker" type="xs:integer"/>

<xs:element name="Country">

<xs:complexType name="farm">
<xs:sequence maxOccurs="unbounded">
    <xs:element ref="established" use="optional"/>
    <xs:element ref="planToEstablish" use="optional"/>
    <xs:element ref="totalWorker"/>
</xs:sequence>
<xs:attribute name="farmOwnerName"  use="required"/>
<xs:attribute name="produce"  use="required"/>
<xs:attribute name="quality"  use="optional">
    <xs:simpleType>
        <xs:restriction base="xs:token">
            <xs:enumeration value="best"/>
            <xs:enumeration value="normal"/>
            <xs:enumeration value="low"/>
        </xs:restriction>
    </xs:simpleType>
</xs:attribute>
</xs:complexType>
</xs:element>
</xs:schema> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T09:19:36.120

您的第一个约束是通过以下选择实现的：

```
<xs:choice minOccurs="0">
    <xs:element ref="established" use="optional"/>
    <xs:element ref="planToEstablish" use="optional"/>
</xs:choice> 
```

第二个约束是通过对 Country 元素的 xs:unique 约束实现的，其中选择器设置为“Farm”，字段为 @farmOwnerName 和 @produce。

# java - 使用 Hibernate 保存在 Servlet 中处理的数据时遇到错误

> ID：13538579
> 
> 赞同：0
> 
> 时间：2012-11-24T05:32:49.150
> 
> 标签：java, hibernate, jsp, servlets

大家好，正在通过构建一个简单的 Web 应用程序表单来练习休眠和 servlet。如果我不使用休眠来保存数据而只使用 JSP 和 servlet，该程序可以正常工作。现在，如果我添加我的 Hibernate 代码，它会产生这个错误。

```
 SEVERE: Servlet.service() for servlet [com.ApplicationForm.ApplicationForm] in context with path [/ApplicationForm] threw exception [Servlet execution threw an exception] with root cause
    java.lang.ClassNotFoundException: org.hibernate.HibernateException
        at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1714)
        at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1559)
        at com.ApplicationForm.AppFormServletHelper.doPost(AppFormServletHelper.java:54)
        at com.ApplicationForm.ApplicationForm.doPost(ApplicationForm.java:24)
//More errors messages here 
```

错误消息始终指向包含我的 Hibernate 实例类 AppFormServletHelper 的此类。（下面的完整代码）

```
public class AppFormServletHelper extends ApplicationFormServletBase {

    private static AppDetails applicant = new AppDetails();
    private static SaveApplicantData list = new SaveApplicantData();

    public AppFormServletHelper(HttpServlet servlet, HttpServletRequest request, HttpServletResponse response){
        super(servlet, request, response);

    }

    public void doPost() throws ServletException, IOException{
        int userID=0;
        String stringUserID, firstName, lastName, address, mobile, landLine;
        String sex, university;

        stringUserID = request.getParameter((Integer.toString(userID)));
        firstName = request.getParameter("firstName");
        lastName = request.getParameter("lastName");
        address = request.getParameter("address");
        mobile = request.getParameter("mobile");
        landLine = request.getParameter("landLine");
        sex = request.getParameter("sex");
        university = request.getParameter("university");
        //more request.getParameter lines here

        recordApplicantDetails(userID, firstName, lastName, address, mobile, landLine, sex);
        recordApplicantEducation(university, uniDateGrad, hsGrad, hsDateGrad, elem, elemDateGrad);
        recordApplicantEmployment(companyN, jobRole, jobResp);

        //Save data using hibernate
**##Error pointing to this line**
        **HibernateSaveData save = new HibernateSaveData();
        save.beginHibernateTransaction(applicant);**

        list.addApplicantData(applicant);
        list.setApplicantData(applicant, list);

        request.setAttribute("AppDetails", applicant);

        RequestDispatcher dispatch = request.getRequestDispatcher("/WEB-INF/UserDetails.jsp");
        dispatch.forward(request, response);

    }
//Implementation of recordApplicantDetails method
//Implementation of recordApplicantEducation method
//Implementation of recordApplicantEmployment method

} 
```

这是 ApplicationFormServletBase 类

```
@WebServlet("/appFormServlet")
public class ApplicationForm extends HttpServlet {

    protected void doPost(HttpServletRequest req, HttpServletResponse resp)
            throws ServletException, IOException {

        AppFormServletHelper controllerHelper = new AppFormServletHelper(this,req, resp);
        controllerHelper.doPost();
    } 
```

这是我的 HibernateSaveData 类

```
public class HibernateSaveData {

    private Session session; 

    public void beginHibernateTransaction(AppDetails details){
        session = new HibernateFactoryUtil().getSessionFactory().openSession();
        try{
            session.beginTransaction();
            session.save(details);
            session.getTransaction().commit();

        }
        catch (HibernateException e){
            if (session.getTransaction()!=null){
                session.getTransaction().rollback();    
            }
            System.out.println("Hibernate exception occured: "+ e);
        }
        finally {
            session.close();
        }   
    }   
} 
```

此外，我已经配置了我的 hibernate.cfg.xml 并且我正在为 servlet 使用 @WebServlet 注释，所以我没有配置任何 xml 映射。我没有发布所有代码，但如果它有助于解决这个问题，我会发布它们。谁能帮我这个？提前致谢。

# 更新

这就是我设置文件夹的方式 ![在此处输入图像描述](../Images/922e6fd4272f834f8f3be3818d677572.png)

这是我的 hibernate.cfg.xml

```
<?xml version='1.0' encoding='utf-8'?>
<!DOCTYPE hibernate-configuration PUBLIC
        "-//Hibernate/Hibernate Configuration DTD 3.0//EN"
        "http://www.hibernate.org/dtd/hibernate-configuration-3.0.dtd">

<hibernate-configuration>

    <session-factory>

        <!-- Database connection settings -->
        <property name="connection.driver_class">org.postgresql.Driver</property>
        <property name="connection.url">jdbc:postgresql://localhost:5432/ApplicationForm</property>
        <property name="connection.username">postgres</property>
        <property name="connection.password">password</property>

        <!-- JDBC connection pool (use the built-in) -->
        <property name="connection.pool_size">1</property>

        <!-- SQL dialect -->
        <property name="dialect">org.hibernate.dialect.PostgreSQLDialect</property>

        <!-- Disable the second-level cache  -->
        <property name="cache.provider_class">org.hibernate.cache.NoCacheProvider</property>

        <!-- Echo all executed SQL to stdout -->
        <property name="show_sql">true</property>

        <!-- Drop and re-create the database schema on startup -->
        <property name="hbm2ddl.auto">create</property>

        <!-- Names the annotated entity class -->
        <mapping class="com.ApplicationForm.StoreData.AppDetails"/>

    </session-factory>

</hibernate-configuration> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T06:10:52.323

> Build your project and try to re-compile your classes and check if error still exists

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T09:09:38.020

确保您在 WEB-INF/lib 文件夹中有文件 hibernate3.jar。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T07:22:34.060

问题似乎是部署时 Hibernate（在本例中为 HibernateException）不在您的类路径中。由于我假设您使用的是 IDE（例如 Eclipse）并且在 IDE 中您没有遇到任何编译错误，因此故障很可能出现在您的构建/部署过程中。

您必须告诉我们您的构建/部署方式（您是否使用 maven？您是否通过 eclipse 打包战争并将其上传到服务器？Hibernate 库位于何处，类路径是否知道它？等等。 .) 为了深入了解它。

# javascript - 如何在 Android WebView 中渲染时更改默认 HTML 样式

> ID：13538581
> 
> 赞同：0
> 
> 时间：2012-11-24T05:33:07.807
> 
> 标签：javascript, android, webview, epub

我正在 Android 中开发 ePub 阅读器。我正在尝试更改 HTML 中的对齐方式和文本颜色。它适用于某些 ePub 书籍，但不适用于其他书籍，因为这些书籍包含 CSS 中定义的样式。我尝试使用以下代码在 Javascript 中覆盖这些样式：

```
document.getElementsByTagName('body')[0].style.textAlign ='justify' !important;" 
```

它在 Android WebView 中不起作用，但在 iPhone 中起作用。我在这里做错了什么？还有其他方法可以覆盖样式吗？请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T06:08:57.070

You could over-ride the shouldInterceptRequest method in a subclass of WebViewClient. You can use that to intercept CSS load requests and substitute your own CSS data instead. If you don't always want to completely replace the ePub's CSS, you could use a css parser (like perhaps [http://cssparser.sourceforge.net/](http://cssparser.sourceforge.net/)) to parse and then modify the supplied CSS with the changes you want.

# python-2.7 - 卸载 python.org 版本的 python2.7 以支持默认 OS X python2.7

> ID：13538586
> 
> 赞同：13
> 
> 时间：2012-11-24T05:33:39.513
> 
> 标签：python-2.7, osx-mountain-lion

我正在运行 OS X 10.8.2，并且我相信默认情况下它带有 Python 2.7.3。我之前从 python.org 安装了 Python 2.7.2，并且想废弃它以基本上将我系统的默认 python 重置为预安装的。原因是每当我启动任何 *.py 文件 IDLE 时都拒绝打开（即使指定了我安装的 Python2.7.2 IDLE）并且我想让事情保持最新。

虽然我从未使用过它，但我确实安装了 MacPorts，并且我看到它对我的 Python 路径做了很多事情——特别是将我的 Python 2.7 路径更改为“/Library/Frameworks/Python.framework/Versions/2.7/bin :${PATH}"，所以我不知道这是否有区别。

有人可以在这里推荐一个行动方案吗？如果需要，我很乐意提供更多信息。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-02-28T12:26:37.213

构成 python.org python 安装的三件事需要删除。这些步骤对我有用：

1.  删除实际的 Python 安装：

    ```
    rm -rf /Library/Frameworks/Python.framework 
    ```

2.  通过删除以下文件夹来删除 Python.org 额外的应用程序`/Applications/Python 2.7`：

    ```
    rm -rf /Applications/Python\ 2.7 
    ```

3.  从您的`/usr/local/bin`目录中删除指向 python 可执行文件的符号链接：

    ```
    find /usr/local/bin -type l -and -lname "/Library/Frameworks/Python.framework*" -delete 
    ```

4.  从 bash 启动脚本中删除或注释掉这些行（或者`~/.profile`或`~/.bash_profile`）：

    ```
    # Setting PATH for Python 2.7
    # The orginal version is saved in .profile.pysave
    PATH="/Library/Frameworks/Python.framework/Versions/2.7/bin:${PATH}"
    export PATH 
    ```

其中一些步骤可能需要超级用户权限，例如`sudo`. 完成此操作后，您应该只拥有原始 Mac。

*基于[http://docs.python.org/2/using/mac.html上的文档](http://docs.python.org/2/using/mac.html)*

# ios - 在 UITableView 多个部分上一次只选择一行。（UITableViewCellAccessory复选标记）

> ID：13538590
> 
> 赞同：-1
> 
> 时间：2012-11-24T05:34:57.927
> 
> 标签：ios, uitableview

我的英语很差..对不起TT

在 UITableView 多个部分上一次只选择一行。（UITableViewCellAccessory复选标记）

我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T05:37:39.580

尝试使用[适用于 iOS 的示例项目 CRMultiRowSelect](http://www.cocoacontrols.com/controls/crmultirowselect)可能对您有所帮助。

# python - django模型get_or_create完整性错误

> ID：13538591
> 
> 赞同：0
> 
> 时间：2012-11-24T05:34:59.910
> 
> 标签：python, django, django-models

我有一个模型如下：

```
class Vote(models.Model):

    vote_type = models.BooleanField()
    voted_by =  models.ForeignKey(User, related_name='voted_by')
    voted_for = models.OneToOneField(User, related_name='voted_for')
    article = models.ForeignKey(Article, null=True, blank=True)
    dtobject  = models.DateTimeField(auto_now_add=True) 
```

我想确保用户只能为一个对象投票一次。因此，在我看来，我会执行以下操作：

```
 v = Vote.objects.get_or_create(
        vote_type = vtype.get(field_name),
        voted_by_id = request.user.id,
        voted_for_id = mobj.shared_by_id,
        shared_object_id = oid
        ) 
```

它第一次运行良好，但是当已有投票时，我得到一个完整性错误，原因很明显。鉴于上述模型和观点，确保对象未被投票的好方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T15:39:38.220

get_or_create 中的参数分为两部分：第一部分是必须存在的唯一实例的完全匹配，其他变量数据必须在名为“defaults”的参数中找到

请参阅文档[https://docs.djangoproject.com/en/dev/ref/models/querysets/#get-or-create](https://docs.djangoproject.com/en/dev/ref/models/querysets/#get-or-create)：

```
obj, created = Person.objects.get_or_create(first_name='John', 
    last_name='Lennon', defaults={'birthday': date(1940, 10, 9)}) 
```

不确定您在这里的唯一密钥是什么，我猜它是 voted_by 和 voted_for，所以我们有：

```
vote, created = Vote.objects.get_or_create(
    voted_by = request.user,
    vote_type = vtype.get(field_name),
    defaults = dict(
        voted_for_id = mobj.shared_by_id,
        shared_object_id = oid
      )
    ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T07:24:44.870

`get_or_create`返回一个元组。

```
vote, created = Vote.objects.get_or_create(
    vote_type = vtype.get(field_name),
    voted_by = request.user,
    voted_for_id = mobj.shared_by_id,
    shared_object_id = oid
    ) 
```

在哪里或者说它是否从数据库中创建或检索`created`。`True``False`

# ruby-on-rails - 在 Mountain Lion 上使用 Homebrew 和 Rails 安装 postgresql

> ID：13538593
> 
> 赞同：6
> 
> 时间：2012-11-24T05:35:31.290
> 
> 标签：ruby-on-rails, macos, postgresql, homebrew

在我的计算机上安装 Postgresql 时遇到了很多麻烦。

我有一个部署到 Heroku 的 Rails 应用程序，并想在我的本地计算机上使用 Postgresql。在我下载 Postgres.app 但从未真正使用过它并且最近卸载它之前认为它可能会导致一些问题。

我安装 Postgres，每次运行 rake db:create:all 时，都会出现以下错误：

```
could not connect to server: No such file or directory
Is the server running locally and accepting
connections on Unix domain socket "/var/pgsql_socket/.s.PGSQL.5432"? 
```

我已经用谷歌搜索并尝试了很多东西，但无法弄清楚，我想我可能最终不得不寻求一些个人帮助。

运行 which psql 我得到：

```
/usr/local/bin/psql 
```

我已经尝试卸载 Postgres，卸载 pg 并重新安装它，但没有任何效果。

这里有什么见解吗？谢谢你。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-24T06:01:55.717

如果您使用自制软件安装它，您是否安装了启动守护程序以便服务器启动？

看着`brew info postgresql`

你需要初始化数据库

`initdb /usr/local/var/postgres -E utf8`

然后启动服务器

`pg_ctl -D /usr/local/var/postgres -l /usr/local/var/postgres/server.log start`

然后你应该能够创建你的数据库，并在本地使用它。如果您要使用它，您应该按照 brew 中列出的说明自动启动和停止它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T05:48:16.453

尝试这个

```
psql -U rails -d myapp_development -h localhost 
```

或者

```
psql -U rails -d myapp_development -h 127.0.0.1 
```

**如需更多帮助，请参阅：** [无法连接到本地 PostgreSQL](https://stackoverflow.com/questions/8465508/can-not-connect-to-local-postgresql)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T05:50:04.910

我有完全相同的问题，试试这个。

```
sudo sysctl -w kern.sysv.shmall=65536
sudo sysctl -w kern.sysv.shmmax=16777216 
```

更多细节[在这里](http://willbryant.net/software/mac_os_x/postgres_initdb_fatal_shared_memory_error_on_leopard)。

# cakephp-2.0 - cakephp2.0 Appcontroller函数调用

> ID：13538594
> 
> 赞同：0
> 
> 时间：2012-11-24T05:35:56.487
> 
> 标签：cakephp-2.0

我在 cakephp appcontrollet.php 文件中创建了一个函数。从该 id 中检索该记录的详细信息 该函数在下面提到

```
function getDetail($id = null)  // to check that user is valid or not 
  {
    $data = $this->ModelName->find('first',array('conditions'=>array('ModelName.is_active'=>'Y','ModelName.is_deleted'=>'N','ModelName.primaryKey'=>$id)));
    if($data !=array())
    {
      // return true;
      return $data;
    } else {
      $data = array();
      return $data;
      //return false;
    }
  } 
```

现在我想从任何控制器调用此函数以获取记录的详细信息，就像我将从用户控制器、管理员控制器、市场控制器等调用此函数一样，它将返回相关数据

我的问题是 appcontroller 应该如何知道请求来自哪个控制器以及用户的哪个模型？

谁能帮我解决这个问题

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T09:55:48.203

将此函数放入 AppModel 并从具有相关模型的每个控制器调用它。然后该函数如下所示：

```
class AppModel extends Model
{
  public function getDetail($id = null) {
    $data = $this->find('all', array(
      'conditions' => array($this->name.'.id' => $id)
    ));

// ... 
```

根据您对模型的调用，它将自动使用正确的模型。这样的调用可能如下所示：

```
class UsersController extends AppController
{
  public $uses = array('User', 'Market');

  public function index()
  {
    // Fetch data from markets database
    $this->Market->getDetail($id);
    // Fetch data from users database
    $this->User->getDetail($id);

// ... 
```

在这种情况下，模型 Market 将用于从数据库中获取详细信息。

# r - 如何将 t.test 的结果写入文件？

> ID：13538597
> 
> 赞同：0
> 
> 时间：2012-11-24T05:36:58.830
> 
> 标签：r

如何将结果写入`t.test`文件？

```
> x  
[1] 12.2 10.8 12.0 11.8 11.9 12.4 11.3 12.2 12.0 12.3  
> t.test(x)

One Sample t-test  

data:  x   
t = 76.2395, df = 9, p-value = 5.814e-14  
alternative hypothesis: true mean is not equal to 0   
95 percent confidence interval:  
 11.5372 12.2428   
sample estimates:  
mean of x   
11.89   

> write(t.test(x),file="test")    
Error in cat(list(...), file, sep, fill, labels, append) : 
argument 1 (type 'list') cannot be handled by 'cat' 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-24T05:57:44.570

```
> sink("out.txt")
> x  <- scan()
1:  12.2 10.8 12.0 11.8 11.9 12.4 11.3 12.2 12.0 12.3 
11: 
Read 10 items
> t.test(x)
> sink()
> readLines("out.txt")
 [1] ""                                                    
 [2] "\tOne Sample t-test"                                 
 [3] ""                                                    
 [4] "data:  x "                                           
 [5] "t = 76.2395, df = 9, p-value = 5.814e-14"            
 [6] "alternative hypothesis: true mean is not equal to 0 "
 [7] "95 percent confidence interval:"                     
 [8] " 11.5372 12.2428 "                                   
 [9] "sample estimates:"                                   
[10] "mean of x "                                          
[11] "    11.89 "                                          
[12] "" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-11-15T21:17:49.613

这个`broom`包是在这个帖子之后发布的。它使处理模型输出变得非常好。特别是，该函数`tidy()`会将模型输出转换为数据帧以供进一步处理。

```
x <- c(12.2, 10.8, 12.0, 11.8, 11.9, 12.4, 11.3, 12.2, 12.0, 12.3)
t_test <- t.test(x)

library(broom)
tidy_t_test <- broom::tidy(t_test)

tidy_t_test
#> # A tibble: 1 x 8
#>   estimate statistic  p.value parameter conf.low conf.high method
#>      <dbl>     <dbl>    <dbl>     <dbl>    <dbl>     <dbl> <chr> 
#> 1     11.9      76.2 5.81e-14         9     11.5      12.2 One S…
#> # … with 1 more variable: alternative <chr>

write.csv(tidy_t_test, "out.csv") 
```

# ubuntu - 制作 Cuda-5.0 SDK（Ubuntu 64）时出错，未定义对“dlsym”的引用

> ID：13538599
> 
> 赞同：0
> 
> 时间：2012-11-24T05:37:11.873
> 
> 标签：ubuntu, cuda, nvidia

```
The toolkit and items 1-6 of the NVIDIA_CUDA SDK have been installed and compiled , but when it gets to '6_Advanced/cdpLUDecomposition' the following error message appears. 
```

```
 /usr/local/cuda-5.0/bin/nvcc -m64 -Xcompiler -fopenmp -gencode arch=compute_35,code=sm_35  -o cdpLUDecomposition dlaswp.o dgetf2.o dgetrf.o cdp_lu.o cdp_lu_main.o -L/usr/local/cuda-5.0/lib64 -lcublas -lcublas_device -lcudadevrt -lgomp 
/usr/local/cuda-5.0/lib64/libcublas.so: error: undefined reference to 'dlsym'
/usr/local/cuda-5.0/lib64/libcublas.so: error: undefined reference to 'dlopen'
/usr/local/cuda-5.0/lib64/libcublas.so: error: undefined reference to 'dlclose'
collect2: ld returned 1 exit status
make[1]: *** [cdpLUDecomposition] Error 1 
```

我对 Ubuntu 和 Cuda 都是新手，但确实尝试在 make 之前添加 LD_FLAGS=-ldl 这没有帮助，并将 PATH 和 LD_LIBRARY_PATH 设置为 Nvidia 建议。此外，我更新了所有驱动程序，并能够从 SDK deviceQuery Program 获得有效结果。

任何帮助将不胜感激，因为我尝试过的所有其他方法都没有奏效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T11:55:26.237

添加`-ldl`应该足够了。进入示例目录（`cd 6_Advanced/cdpLUDecomposition`）并检查构建命令`make`。在我的机器上是

/usr/local/cuda-5.0/bin/nvcc -m64 -Xcompiler -fopenmp -gencode arch=compute_35,code=sm_35 -o cdpLUDecomposition dlaswp.o dgetf2.o dgetrf.o cdp_lu.o cdp_lu_main.o -L/usr/本地/cuda-5.0/lib64 -lcublas -lcublas_device -lcudadevrt -lgomp

你可以

*   运行构建命令手动附加`-ldl`，或
*   通过附加`-ldl`到正确的 LDFLAGS（第 89 行）来修复目录中的 Makefile，这对于下一次重建来说更干净、更安全

`ldd cdpLUDecomposition`然后显示它链接到 /lib/x86_64-linux-gnu/libdl.so.2。

# c - 不使用 Autotools 使用 GnuLib

> ID：13538601
> 
> 赞同：5
> 
> 时间：2012-11-24T05:37:32.607
> 
> 标签：c, windows

[**我的平台（ MinGW**](http://gnu.org/software/gnulib/manual/html_node/errno_002eh)）没有定义宏`ETIMEDOUT`等。在另一个问题中建议可以使用 GnuLib 解决此问题。[](http://gnu.org/software/gnulib/manual/html_node/errno_002eh)

 **我想这样做，但似乎任何希望使用 GnuLib 的项目也必须使用[**Autotools**](http://wiki.opencsw.org/adding-gnulib)。我的项目只有一个 Makefile。

我如何在不添加 Autotools 的情况下使用 GnuLib 来补充我的平台？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T03:07:04.477

你可以让它更容易，只需在你的头文件中添加以下内容，而不是像 gnulib..

```
 #ifndef ETIMTDOUT
#define ETIMEDOUT 10060
//if you have WSAETIMEDOUT defined, then you can just
//#define ETIMEOUT WSAETIMEDOUT 
#endif 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-11-19T14:40:33.863

*Paul Eggert*写[了一个补丁来使用 gnulib 而不使用 automake](http://lists.gnu.org/archive/html/bug-gnulib/2017-03/msg00028.html)。它自 2017-03-13 起在 master 分支上可用。只需调用`gnulib-tool`.`--gnu-make`**

# java - ServletException 还是 IOException？

> ID：13538605
> 
> 赞同：1
> 
> 时间：2012-11-24T05:37:47.723
> 
> 标签：java, exception, servlets, ioexception, servletexception

...我永远无法在这两者之间做出决定。我总是回到代码并在它们之间切换。

当你在编码时——比如说一个登录类——来自一个（扩展的）HttpServlet，它同时包含 ServletException 和 IOException，而你只想进一步抛出你的异常（例如 NoSuchAlgorithmException、NamingException）以在应用程序的页面中看到它稍后，您将其抛出哪一个：ServletException 或 IOException？

*PS：我不会尝试捕获所有可能的 NoSuchAlgorithmException、NamingException 等，因为我可能会错过一个我以前从未见过的真正原因并以错误的方式对待它或向用户告知错误的事情。*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T05:40:57.633

这些都不是，只是继承自或从as继承的`RuntimeException`另一个异常。`RuntimeException``IllegalArgumentException`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T05:45:31.927

`IOException`有自己的意义。`IOException`仅当 IO 操作出现问题时才应抛出An ，例如从文件或 URL 读取/写入数据。如果必须在两者之间做出选择，我会选择`ServletExcetion`。

但是如果有空间来定义更好的异常处理，那么我想创建自己的自定义异常类，例如`MySystemException`扩展`RuntimeException`和包装相关异常`MySystemException`并抛出它。

# python - 如何从需求中安装许多带有 pip 的软件包

> ID：13538607
> 
> 赞同：0
> 
> 时间：2012-11-24T05:38:06.320
> 
> 标签：python, django, pip

如果我安装这样的软件包：

`pip install selenium`

然后我可以看到包裹`yolk -l`

如果我用 安装包`pip install -r requirements.txt`，在没有安装所有消息和克隆包之后，不会出现在`yolk -l`

包裹去哪儿了？

输出非常巨大：

```
hon.org/simple/django-redis/), version: 1.3
    Found link http://pypi.python.org/packages/source/d/django-redis/django-redis-2.0c3.tar.gz#md5=ff8d49ef793fb6319d72f9d228999bee (from http://pypi.python.org/simple/django-redis/), version: 2.0c3
    Found link http://pypi.python.org/packages/source/d/django-redis/django-redis-2.2.2.tar.gz#md5=3c013c79ec63c439d5b46fb3b2f86ebe (from http://pypi.python.org/simple/django-redis/), version: 2.2.2
    Skipping link https://github.com/niwibe/django-redis (from http://pypi.python.org/simple/django-redis/); not a file
  Analyzing links from page https://github.com/niwibe/django-redis
    Skipping link https://github.com/niwibe/apple-touch-icon-114.png (from https://github.com/niwibe/django-redis); unknown archive format: .png
    Skipping link https://github.com/niwibe/apple-touch-icon-144.png (from https://github.com/niwibe/django-redis); unknown archive format: .png
    Skipping link https://github.com/niwibe/django-redis/tree/4807b5d3370e227d0e44aa955ea4779b72545eb0 (from https://github.com/niwibe/django-redis); not a file
    Skipping link https://github.com/niwibe/django-redis/commits/master.atom (from https://github.com/niwibe/django-redis); unknown archive format: .atom
    Skipping link https://github.com/login?return_to=%2Fniwibe%2Fdjango-redis (from https://github.com/niwibe/django-redis); not a file
    Skipping link https://github.com/niwibe/django-redis/stargazers (from https://github.com/niwibe/django-redis); not a file
    Skipping link https://github.com/niwibe/django-redis/network (from https://github.com/niwibe/django-redis); not a file
    Skipping link https://github.com/niwibe (from https://github.com/niwibe/django-redis); not a file
    Skipping link https://github.com/niwibe/django-redis/pulls (from https://github.com/niwibe/django-redis); not a file
    Skipping link https://github.com/niwibe/django-redis/issues (from https://github.com/niwibe/django-redis); not a file
    Skipping link https://github.com/niwibe/django-redis/graphs (from https://github.com/niwibe/django-redis); not a file
    Skipping link https://github.com/niwibe/django-redis#readme (from https://github.com/niwibe/django-redis); not a file
    Could not parse version from link: https://github.com/niwibe/django-redis/archive/master.zip (from https://github.com/niwibe/django-redis)
    Skipping link https://github.com/niwibe/django-redis/archive/master.zip (from https://github.com/niwibe/django-redis); wrong project name (not django-redis)
    Skipping link https://github.com/niwibe/django-redis.git (from https://github.com/niwibe/django-redis); unknown archive format: .git
    Skipping link https://github.com/niwibe/git@github.com:niwibe/django-redis.git (from https://github.com/niwibe/django-redis); unknown archive format: .git
    Skipping link git://github.com/niwibe/django-redis.git (from https://github.com/niwibe/django-redis); unknown archive format: .git
    Skipping link https://github.com/niwibe/django-redis/tags (from https://github.com/niwibe/django-redis); not a file
    Skipping link https://github.com/niwibe/django-redis/downloads (from https://github.com/niwibe/django-redis); not a file
    Skipping link https://github.com/niwibe/django-redis/tree/devel (from https://github.com/niwibe/django-redis); not a file
    Skipping link https://github.com/niwibe/django-redis/tree/feature/master-slave (from https://github.com/niwibe/django-redis); not a file
    Skipping link https://github.com/niwibe/django-redis/tree/feature/redis-client (from https://github.com/niwibe/django-redis); not a file
    Skipping link https://github.com/niwibe/django-redis/tree/feature/simple-autofailover (from https://github.com/niwibe/django-redis); not a file
    Skipping link https://github.com/niwibe/django-redis/tree/master (from https://github.com/niwibe/django-redis); not a file 
```

* * *

```
python.org/simple/django-nose/), version 0.0.2 doesn't match ==1.1
  Ignoring link http://pypi.python.org/packages/source/d/django-nose/django-nose-1.0.tar.gz#md5=9f27926c42c58ea93973db236f22cd72 (from http://pypi.python.org/simple/django-nose/), version 1.0 doesn't match ==1.1
  Ignoring link http://pypi.python.org/packages/source/d/django-nose/django-nose-0.0.1.tar.gz#md5=461c6f49ca91d17a18939874653ae42c (from http://pypi.python.org/simple/django-nose/), version 0.0.1 doesn't match ==1.1
  Ignoring link http://pypi.python.org/packages/source/d/django-nose/django-nose-0.0.3.tar.gz#md5=ba2a5565752468d2016e5d61f93997d8 (from http://pypi.python.org/simple/django-nose/), version 0.0.3 doesn't match ==1.1
  Ignoring link http://pypi.python.org/packages/source/d/django-nose/django-nose-0.1.tar.gz#md5=174e5a7f00bf159b0592dd7a2e98fc71 (from http://pypi.python.org/simple/django-nose/), version 0.1 doesn't match ==1.1
  Ignoring link http://pypi.python.org/packages/source/d/django-nose/django-nose-0.1.2.tar.gz#md5=a8c7ad89adb0c7cddb974241ae746d8a (from http://pypi.python.org/simple/django-nose/), version 0.1.2 doesn't match ==1.1
  Ignoring link http://pypi.python.org/packages/source/d/django-nose/django-nose-0.1.3.tar.gz#md5=5b4f54f7e0e251b169d86ad6ee6b9b10 (from http://pypi.python.org/simple/django-nose/), version 0.1.3 doesn't match ==1.1
  Downloading django-nose-1.1.tar.gz

  Downloading from URL http://pypi.python.org/packages/source/d/django-nose/django-nose-1.1.tar.gz#md5=606ab8a582f1d2037b048b7c4e246e85 (from http://pypi.python.org/simple/django-nose/)
  Running setup.py egg_info for package django-nose

    running egg_info
    creating pip-egg-info/django_nose.egg-info
    writing requirements to pip-egg-info/django_nose.egg-info/requires.txt
    writing pip-egg-info/django_nose.egg-info/PKG-INFO
    writing top-level names to pip-egg-info/django_nose.egg-info/top_level.txt
    writing dependency_links to pip-egg-info/django_nose.egg-info/dependency_links.txt
    writing manifest file 'pip-egg-info/django_nose.egg-info/SOURCES.txt'
    warning: manifest_maker: standard file '-c' not found

    reading manifest file 'pip-egg-info/django_nose.egg-info/SOURCES.txt'
    reading manifest template 'MANIFEST.in'
    warning: no previously-included files matching '*.py[co]' found under directory 'django_nose'

    warning: no previously-included files matching '*.py[co]' found under directory 'testapp'

    writing manifest file 'pip-egg-info/django_nose.egg-info/SOURCES.txt'
  Source in /tmp/pip-build/django-nose has version 1.1, which satisfies requirement django-nose==1.1 (from -r requirements.txt (line 4))
Downloading/unpacking Pillow==1.7.7 (from -r requirements.txt (line 5))

  Getting page http://pypi.python.org/simple/Pillow
  URLs to search for versions for Pillow==1.7.7 (from -r requirements.txt (line 5)):
  * http://pypi.python.org/simple/Pillow/1.7.7 
```

* * *

```
http://pypi.python.org/simple/django-extra-views/), version 0.5.1 doesn't match ==0.2.5
  Downloading django-extra-views-0.2.5.tar.gz

  Downloading from URL http://pypi.python.org/packages/source/d/django-extra-views/django-extra-views-0.2.5.tar.gz#md5=a8308e656871279ff6461f1aba45ecf1 (from http://pypi.python.org/simple/django-extra-views/)
  Running setup.py egg_info for package django-extra-views

    running egg_info
    creating pip-egg-info/django_extra_views.egg-info
    writing requirements to pip-egg-info/django_extra_views.egg-info/requires.txt
    writing pip-egg-info/django_extra_views.egg-info/PKG-INFO
    writing top-level names to pip-egg-info/django_extra_views.egg-info/top_level.txt
    writing dependency_links to pip-egg-info/django_extra_views.egg-info/dependency_links.txt
    writing manifest file 'pip-egg-info/django_extra_views.egg-info/SOURCES.txt'
    warning: manifest_maker: standard file '-c' not found

    reading manifest file 'pip-egg-info/django_extra_views.egg-info/SOURCES.txt'
    reading manifest template 'MANIFEST.in'
    writing manifest file 'pip-egg-info/django_extra_views.egg-info/SOURCES.txt'
  Source in /tmp/pip-build/django-extra-views has version 0.2.5, which satisfies requirement django-extra-views==0.2.5 (from -r requirements.txt (line 1))
Downloading/unpacking pyPdf==1.13 (from -r requirements.txt (line 2))

  Getting page http://pypi.python.org/simple/pyPdf
  URLs to search for versions for pyPdf==1.13 (from -r requirements.txt (line 2)):
  * http://pypi.python.org/simple/pyPdf/1.13
  * http://pypi.python.org/simple/pyPdf/
  Getting page http://pypi.python.org/simple/pyPdf/1.13
  Getting page http://pybrary.net/pyPdf/
  Could not fetch URL http://pypi.python.org/simple/pyPdf/1.13: HTTP Error 404: Not Found (pyPdf/1.13)
  Will skip URL http://pypi.python.org/simple/pyPdf/1.13 when looking for download links for pyPdf==1.13 (from -r requirements.txt (line 2)) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T15:49:29.750

尝试安装软件包`pip install -r requirements.txt`并首先运行`pip freeze`。包应该出现在那里。如果没有，他们没有正确安装。如果它们出现在冻结输出中，那么运行`yolk -l`应该会得到相同的结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T02:23:14.847

`requirements.txt`在您的文件中安装过程中，看起来很少有软件包有错误。如果其中一个失败，那么将不会安装任何内容。

它也发生在我身上。只需从文件中删除该包，一切都会好的

# bash - 这些 shell 脚本字符（ || : ）有什么用吗？

> ID：13538611
> 
> 赞同：2
> 
> 时间：2012-11-24T05:38:54.383
> 
> 标签：bash, shell, unix, sh

我有一个小 shell 脚本，可以在指定目录中运行任何可执行文件，同时传递两个参数：

```
#!/bin/sh

cd '/foo'
for s in bar/*;
do [ -x $s ] && $s "$1" "$2" || : ;
done 
```

该`|| :`位是否有任何用途？我希望异步启动可执行文件，所以我将其更改`;`为 a `&`，但是有什么理由我不应该这样做：

```
#!/bin/sh

cd '/foo'
for s in bar/*;
do [ -x $s ] && $s "$1" "$2" &
done 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-24T06:00:00.133

`|| :`（通常拼写为`|| true`）表示您不在乎命令是否成功。它强制返回成功状态 ( `$?`)。

最好在 shell`-e`选项下运行 shell 脚本，这样错误就不会被忽视。此选项可以在 shebang 行 ( `#!/bin/sh -e`) 或脚本本身 ( `set -e`) 上激活。它会导致错误中止脚本的执行。

由于在这种情况下您没有在 下运行`-e`，因此`|| :`不会有所不同，因为如果命令失败，shell 无论如何都会忽略结果代码。此外，在这种情况下，您正在后台运行命令，因此检查返回码甚至没有意义。

一般来说，包括`|| true`即使你没有运行`-e`也有好处，原因有两个：

*   为了使其兼容，`-e`以防万一它被更改为在`-e`.
*   作为阅读 shell 脚本的人的文档，您意识到此命令可能会失败并且这种失败是明确的。

# java - Java String Date 每分钟在本地更新

> ID：13538612
> 
> 赞同：0
> 
> 时间：2012-11-24T05:39:15.693
> 
> 标签：java, date, time

我已要求 Web 服务返回 X 市的当前时间。然后将其作为字符串返回。例如：2012-11-24 19:30

然后我想让它在本地运行，这意味着我需要至少每分钟更新一次。显然，我不希望用户总是向 Web 服务发出请求以获取每分钟的实时时间。

任何好的，有效的和有效的想法如何实施？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T06:12:14.027

正如@Max 所建议的那样，使用时区偏移量是您真正想要做的，但是要回答您的字面问题，您可以尝试以下操作：

```
Date remoteDate = new SimpleDateFormat("yyyy-MM-dd hh:mm").parse(string);
long offset = new Date().getTime() - remoteDate.getTime(); 
```

现在每当想要获取当前遥控器时`Date`：

```
Date currentRemoteDate = new Date(new Date().getTime() + offset); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T05:53:59.193

使用[java websocket](https://github.com/TooTallNate/Java-WebSocket)。每分钟，时间将发布到 websocket 连接，连接将通知客户端更新时间。检查客户端服务器示例，您可以了解 websocket 的工作原理。

（为此，您需要支持 html5 的网络浏览器）

# mongodb - 关于 mongodb 的默认 db 路径？

> ID：13538614
> 
> 赞同：0
> 
> 时间：2012-11-24T05:39:25.100
> 
> 标签：mongodb

环境：

*   3.4.9-gentoo
*   mongodb (OpenRC) 0.9.8.4 (Gentoo Linux)

如果我使用`mongod`daemon 启动 mongodb，默认的 db 路径是`/data/db`

但是如果我使用`/etc/init.d/mongodb`脚本启动 mongodb，`/etc/conf.d/mongdb`写入默认的 db 路径是`/var/lib/mongodb`，

我很困惑为什么db路径不一样？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-24T06:26:50.250

如果您在没有配置文件的情况下启动 MongoDB，则默认的[dbpath](http://docs.mongodb.org/manual/reference/configuration-options/#dbpath)`/data/db`是.

您的 init 脚本 ( ) 使用(aka ) 选项和要使用的配置文件的路径( `/etc/init.d/mongodb`) 启动 mongodb 。`--config``-f``/etc/conf.d/mongodb`

如果您查看`/etc/config.mongodb`配置文件的内容，您应该会看到覆盖默认目录路径的设置`dbpath`。`/var/lib/mongodb`在这种情况下，您的 MongoDB 安装包的维护者已决定这`/var/lib`是最适合数据文件的默认目录。通常这样做是为了与您的发行版中其他软件包使用的默认位置更加一致；MongoDB 数据文件可以存在于文件系统的任何位置。

`mongo`您还可以使用以下命令检查 shell中的配置文件覆盖的任何设置：

```
 getCommandLineOpts() 
```

输出将类似于：

```
{
    "argv" : [
        "mongod",
        "--dbpath",
        "/var/lib/mongodb"
    ],
    "parsed" : {
        "dbpath" : "/var/lib/mongodb"
    },
    "ok" : 1
} 
```

# c - printk 是行缓冲的吗？

> ID：13538618
> 
> 赞同：3
> 
> 时间：2012-11-24T05:40:06.930
> 
> 标签：c, linux, linux-kernel, printk

在 Linux 应用程序级别上，所有 printf 消息都转到`stdout`并且所有 err 消息都转到`stderr`。在哪里

stderr 通常是无缓冲的，并且

stdout 是行缓冲的

因此，`kernel space`当我们使用`printk()` 有或无`KERN_ERR`以及其他级别的指定宏时，如何缓冲这些消息？

`dmesg`有什么单独的机制吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-24T06:00:10.623

所做`printk()`的只是简单地将更多字节添加到内存中的环形缓冲区（如果到达缓冲区末尾则回绕）。因此，说它是否是行缓冲是没有意义的——这只是不适用。

此外，虽然在用户空间`stdout`中，`stderr`这是有道理的，但在内核和 for 中情况并非如此`printk()`：它不会写入，`stdout`因为内核中没有这样的东西。

诚然，有些东西负责将该环形缓冲区的内容实际传递给用户——无论是在串行控制台上打印还是使用 检索它`dmesg`，这通常会寻找 LF 字符来分隔行。

# string - 您如何从用户读取的输入中忽略大写

> ID：13538620
> 
> 赞同：0
> 
> 时间：2012-11-24T03:28:41.013
> 
> 标签：string

```
String a = keyboard.nextLine().ignoreUpperCase() 
```

这是一条有效的线路吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T06:09:28.257

这取决于你的意图。您共享的代码不清楚您打算如何处理从键盘读取的行。

就像已经建议您可以在 Java 中一样：

```
String a = keyboard.nextLine().toLowerCase(); 
```

或者

```
String a = keyboard.nextLine().toUpperCase(); 
```

这里的目的是你得到的所有行都是大写或小写的。好的，如果您想平等对待从键盘读取的所有字符串，无论大小写如何。

如果您的真正意图是匹配字符串而不考虑大小写，那么代码读起来会更好：

```
String a = "Hello World";
a.equalsIgnoreCase("hello world"); 
```

现在，您的代码的未来维护者将了解您正在尝试做什么，而不是试图猜测您为什么要转换为小写/大写。

# java - Android视图不能被其他线程触及？

> ID：13538621
> 
> 赞同：2
> 
> 时间：2012-11-24T05:40:22.790
> 
> 标签：java, android, multithreading, ui-thread

我是 Android 的新手，正在为自己创建一个迷你 FTP 下载管理器。我正在使用多线程，每个线程处理一次下载或上传。在 MainActivity.java 中，我在视图中使用了两个微调器。一个列出服务器上的文件（可以下载），另一个列出我手机文件夹中的文件（可以上传）。我想在上传新文件时更新第一个（下载）微调器，并在下载新文件时更新第二个（上传）微调器。但是，只有在相应的线程完成工作时，我才能弄清楚如何更新微调器。我在 MainActivity.java 中创建了更新微调器的方法，并尝试在线程的 run() 结束时调用它们，以便在线程完成下载/上传后更新它们。但是，我在 LogCat 中收到错误消息

android.view.ViewRoot$CalledFromWrongThreadException ：只有创建视图层次结构的原始线程才能接触其视图。

更新上传微调器的方法是：

```
void upScrollUpdate() {
    spinup=(Spinner)findViewById(R.id.uploadspin);
    spinup.setEnabled(false);
    String[] upload={"No Files"};
    File sdDir=Environment.getExternalStorageDirectory();
    File dir=new File (sdDir.getAbsolutePath() + "/aFTP");
    File[] fArray=dir.listFiles();
    if(fArray.length>0) {
        upload=new String[fArray.length];
    }
    for(int i=0;i<fArray.length;i++) {
        upload[i]=fArray[i].getName();
    }
    ArrayAdapter<String> saaUpload=new ArrayAdapter<String>(this,android.R.layout.simple_spinner_dropdown_item,upload);
    spinup.setAdapter(saaUpload);
    if(spinup.getSelectedItem().toString().equalsIgnoreCase("No Files")) {
        uploadButton.setEnabled(false);
    }
    spinup.setEnabled(true);
} 
```

为什么不能从另一个线程调用这个方法，还有什么别的方法，我只是想更新微调器，但我花了一整天的时间在这唯一的事情上......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T05:58:11.217

对于任何将更新 UI 的代码，将其放在此块中：

[**有关runOnUiThread**](http://developer.android.com/reference/android/app/Activity.html#runOnUiThread%28java.lang.Runnable%29)的更多信息，请参阅此链接[](http://developer.android.com/reference/android/app/Activity.html#runOnUiThread%28java.lang.Runnable%29)

 **```
runOnUiThread(new Runnable() {
     public void run() {

         // RUN THE CODE WHICH IS GIVING THAT EXCEPTION HERE

    }
}); 
```

也可以这样做：

```
Runnable run = new Runnable() {

    @Override
    public void run() {

        // RUN THE CODE WHICH IS GIVING THAT EXCEPTION HERE

    }
}; YourActivity.this.runOnUiThread(run); 
```

或者，您可以使用[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)。您可以在方法中进行处理`doInBackground()`，然后`Spinners`在`onPostExecute()`方法中更新`AsyncTask`

编辑：查看这些教程以帮助您开始使用 AsyncTask：

1.  [http://www.vogella.com/articles/AndroidPerformance/article.html#asynctask](http://www.vogella.com/articles/AndroidPerformance/article.html#asynctask)
2.  [http://androidresearch.wordpress.com/2012/03/17/understanding-asynctask-once-and-forever/](http://androidresearch.wordpress.com/2012/03/17/understanding-asynctask-once-and-forever/)
3.  [http://android10.org/index.php/articlesother/239-android-application-and-asynctask-basics](http://android10.org/index.php/articlesother/239-android-application-and-asynctask-basics)
4.  [http://mobileorchard.com/android-app-developmentthreading-part-2-async-tasks/](http://mobileorchard.com/android-app-developmentthreading-part-2-async-tasks/)
5.  [http://thenewboston.org/watch.php?cat=6&number=101](http://thenewboston.org/watch.php?cat=6&number=101)

thenewboston.org 的第 5 个链接在 YouTube 上有大约 200 个奇怪的视频教程：[http ://www.youtube.com/course?list=EC2F07DBCDCC01493A&feature=plcp](http://www.youtube.com/course?list=EC2F07DBCDCC01493A&feature=plcp)

编辑 2：在此处检查此链接中的*编辑：* [https ://stackoverflow.com/a/13265776/450534](https://stackoverflow.com/a/13265776/450534)

它位于答案的底部。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T05:48:09.390

与视图有关的任何事情都应该在 UI 线程上完成。您可以使用 activityInstance.runOnUIThread() 来处理这种从不同线程更新视图的场景。

参考：[Android：RunOnUiThread vs AsyncTask](https://stackoverflow.com/questions/9296539/android-runonuithread-vs-asynctask)**

# r - 在函数中返回不同的数据帧 - R

> ID：13538628
> 
> 赞同：14
> 
> 时间：2012-11-24T05:41:43.547
> 
> 标签：r, function, dataframe

是否可以从一个函数返回 4 个不同的数据帧？

设想：

我正在尝试读取文件、解析它并返回文件的某些部分。

我的函数看起来像这样：

```
parseFile <- function(file){

     carFile <- read.table(file, header=TRUE, sep="\t")

     carNames <- carFile[1,]
     carYear  <- colnames(carFile)

     return(list(carFile,carNames,carYear))
} 
```

我不想使用 list(carFile,carNames,carYear)。有没有办法在不先将它们返回列表的情况下返回 3 个数据帧？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-11-24T08:29:03.253

R 不支持多个返回值。你想做这样的事情：

```
foo = function(x,y){return(x+y,x-y)}
plus,minus = foo(10,4) 
```

是的？好吧，你不能。您会收到一个错误，即 R 无法返回多个值。

您已经找到了解决方案 - 将它们放在一个列表中，然后从列表中获取数据框。这是有效的——没有数据帧从一个内存块到另一个内存块的转换或复制。

这也是合乎逻辑的，函数的返回在概念上应该是一个具有某种含义的单个实体，该实体被转移到调用它的任何函数。如果您命名列表的返回值，也可以更好地传达此含义。

您可以使用一种技术在调用环境中创建多个对象，但是当您这样做时，小猫就会死去。

请注意，您的示例`carYear`中不是数据框 - 它是列名的字符向量。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-01-07T17:05:42.493

如果你真的想要，在 R 中还有其他方法可以做到这一点。

```
assign('carFile',carFile,envir=parent.frame()) 
```

如果你使用它，那么 carFile 将在调用环境中创建。正如 Spacedman 所指出的，您只能从您的函数中返回一件事，而干净的解决方案是选择列表。

另外，我个人的看法是，如果你发现自己处于这种情况，你觉得你需要用一个函数返回多个数据帧，或者做一些以前没有人做过的事情，你真的应该重新审视你的方法。在大多数情况下，您可能会找到带有附加功能或推荐（即列表）的更清洁的解决方案。

换句话说

```
envir=parent.frame() 
```

将完成这项工作，但正如 SpacedMan 提到的

> 当你这样做时，小猫会死

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-06-18T09:17:45.840

该`zeallot`包以类似于 Python 可以从函数中解包变量的方式完成您所需要的工作。下面的可重现示例。

```
parseFile <- function(){

  carMPG <- mtcars$mpg
  carName <- rownames(mtcars)
  carCYL <- mtcars$cyl

  return(list(carMPG,carName,carCYL))
}

library(zeallot)
c(myFile, myName, myYear) %<-% parseFile() 
```

# c++ - 如何在 C++ 中做比率和大于和小于

> ID：13538631
> 
> 赞同：0
> 
> 时间：2012-11-24T05:42:37.730
> 
> 标签：c++

我从“使用 C++ 编程和原理”编写这个程序，我需要编写一个程序，它需要太多的整数并找到和、差、大于和小于值以及比率。

出于某种原因，我不能得到大于和小于工作。它实际上并不执行该功能。它只是简单地打印数字，即：4 将小于 2。

我的第二个问题是我如何编写一个可以为我计算比率的方程？

```
#include <iostream>
#include <string>
#include <vector>
#include <algorithm>
#include <cmath>
using namespace std;
inline void keep_window_open() {char ch;cin>>ch;}
int main()
{
    int a;
    int b;
    cout<<"Enter two values.\n";
    cin>>a; cin>>b;
    if (a > b);cout<< a << " Is greater than " << b << "\n";
    if(a < b);cout<< a << " Is less than " << b << "\n";
    cout<<a << " plus " << b << " is " << a+b << "\n"; 
    cout<<a << " minus " << b << " is " << a-b << "\n";
    keep_window_open();
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T05:55:35.000

首先，您需要删除 if (a>b) 和 if (a < b) 之后的分号。

要进行比率，我建议找到 a 和 b 之间的最大公因数，然后执行以下行：

`cout<<"Ratio of "<<a<<" and "<<b<<" is "<<(a/gcd)<<":"<<(b/gcd);`

其中 gcd 是 a 和 b 的最大公因数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T10:29:52.610

我认为下面的代码片段回答了你所有的问题。

```
#include<iostream.h>

void main()
  {
  float a,b;
  cout<<"Enter 2 numbers";
  cin>>a>>b;

  cout<<"Plus = "<<(a+b)<<"\n";
  cout<<"Minus = "<<(a-b)<<"\n";
  cout<<"Greater = "<<((a>b)?a:b)<<"\n";
  cout<<"Smaller = "<<((a<b)?a:b)<<"\n";
  cout<<"Ratio = 1:"<<(1/(((a<b)?a:b)/((a>b)?a:b)));
  } 
```

# ruby-on-rails - 通过发出请求来验证 URL

> ID：13538632
> 
> 赞同：1
> 
> 时间：2012-11-24T05:42:41.643
> 
> 标签：ruby-on-rails, validation, url, request

在 Rails 控制器中，我想`url`通过向它发出请求并检查响应不是 50X 来验证用户输入的 URL（例如，它在一个变量中）。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T05:56:43.310

您可以使用模块从控制器发送请求，`Net::Http`如下所示

```
uri = URI('http://festivalsherpa.com')
response = Net::HTTP.get_response(uri) 
```

* * *

```
response.to_hash["status"] will return you proper response code 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T06:46:37.373

## 还有一种方法

您可以以更有意义的方式进行操作，例如：

```
uri = URI.parse(your_url)
connection = Net::HTTP.new(uri.host)
request = Net::HTTP::Get.new(uri.request_uri) # For post req, you can replace 'Get' by  'Post'
response = connection.request(request) 
```

您可以看到返回的内容：

```
p response.body 
```

如果返回的响应是 JSON，那么你可以这样做

```
JSON.parse(response.body)  #It will give you hash object 
```

您可以检查响应代码/状态

```
 p response.code 
```

如果要处理状态码，那么可以通过case语句来处理

```
case response.code
 when "200"
     <some code>
 when "500"
     <some code>
 end 
```

等等..

# windows-phone-7 - 无法删除特定文件

> ID：13538635
> 
> 赞同：0
> 
> 时间：2012-11-24T05:43:35.653
> 
> 标签：windows-phone-7, isolatedstorage

我正在开发画廊查看器应用程序。应用程序将从独立存储中获取图像文件并显示在图像控件中。大多数东西已经设置好并且工作正常。

现在图像存储在充当相册的文件夹中，用户可以删除整个相册。我测试了许多带有各种图像的文件夹，并且删除工作正常。但是我看到当有一个名为“XXXX.jpg”的特定图像文件时，它不会被删除。尽管文件夹中的所有图像都显示在图像控件中。该文件不会被删除，并且会引发异常“ArgumentUnhandledException”。我在重命名文件后尝试过，但地球没有移动。

此外，出于测试目的，我正在使用“Windows Phone 设备管理器”传输文件夹（其中包含图像）。我知道使用它不是官方的，但它使测试变得容易。同样奇怪的是，“Windows Phone 设备管理器”也无法删除该特定文件，尽管我使用“Windows Phone 设备管理器”将该文件转储到应用程序的隔离存储中。所以我认为那个文件有问题。

我怎样才能删除文件。如果我不能，我怎么能事先知道某些文件不能正确处理，不应该转储到隔离存储中。[这是那个文件](http://www.wikiupload.com/V7BBR707BXU6XRQ)。文件在 zip 文件中。我认为文件是必需的，而不仅仅是将图像上传到图像托管站点。请看一下。也尽量不要查看图像文件的内容，那只是随机文件不工作，我想知道为什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T04:10:11.080

我发现该文件被标记为只读，并且在尝试删除时引起了问题。删除只读解决了这个问题。

# java - 为什么最终字段变量不能在 Java 中分配给空白？

> ID：13538637
> 
> 赞同：2
> 
> 时间：2012-11-24T05:43:43.820
> 
> 标签：java, eclipse

像其他变量一样，我想将最终字段类型变量分配给空白，但初始化被 Java 阻塞。它的逻辑是什么？也许我想使用我的变量的默认值？对于 int = 0，string = null boolean = false 等...

```
public class Hello {

static final int myNumber; /* it is giving "The blank final field myNumber 
                                may not have been initialized" error in Eclipse */
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-24T05:46:48.613

在 Java 中，将`final`关键字与`static`变量一起使用后，必须在声明点定义值。你必须赋予它一些价值并坚持下去。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-24T05:47:33.170

最终变量只能通过初始化程序或赋值语句初始化一次。它不需要在声明时初始化：这称为“空白最终”变量。

更改您的代码

```
public class Hello {

final int myNumber; 
 public Hello(int num){
 this.myNumber = num;
}

} 
```

对于静态最终变量，使用静态块进行初始化

```
static{
        myNumber = 0;
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-24T05:58:42.030

来自[Java 规范](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.3.1.2)：“如果声明它的类的静态初始化程序（第 8.7 节）未明确分配（第 16.8 节）空白最终（第 4.12.4 节）类变量，则这是编译时错误。 "

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-24T05:49:47.347

当您将“final”修饰符与变量一起使用时，您必须对其进行初始化，因为这是您唯一允许在其上使用赋值运算符（如果将其留空，则可以初始化一次）（“=”） . 就像 parker.sikand 说的那样，如果你之后尝试为它分配一个值，你会得到一个错误。

另外，重要的一点是 final STRICTLY 意味着您不能使用赋值运算符。如果“最终”对象是可变对象，那么该对象的内容当然可以更改，而无需使用赋值运算符。

编辑：我相信最终变量必须保证在程序的某个点被初始化，这就是为什么你通常在声明时初始化它

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-09-21T22:19:52.143

Eclipse 2019-09 现在为此提出了一个快速修复：

> ## 初始化 ' `final`' 字段
> 
> 现在提供了一个 Java 快速修复来初始化`final`类构造函数中未初始化的字段。

[![https://www.eclipse.org/eclipse/news/4.13/images/finalquickfix1.png](../Images/251b0b5edf409be671b42d89c7c409c3.png)](https://i.stack.imgur.com/k4Wzu.png)

> 该修复会将 a 初始化`String`为空字符串，将数字基类型初始化为 0，对于类字段，如果可用，则使用其默认构造函数初始化它们，如果不存在默认构造函数，则使用 null 初始化它们。

[![https://www.eclipse.org/eclipse/news/4.13/images/finalquickfix2.png](../Images/e43332f97b652b60be610db8586ffb1d.png)](https://i.stack.imgur.com/JJdTP.png)

# r - 通过 R5 类中的字符变量调用方法

> ID：13538638
> 
> 赞同：1
> 
> 时间：2012-11-24T05:43:44.787
> 
> 标签：r

我想知道如何通过使用方法名称的字符变量来调用 R5 类对象的方法。假设我有一个 R5 类对象**Object.R5**并且它有一个名为**myMethod**的方法。我们调用该方法的通常方式是输入：

**Object.R5$myMethod()**

但是，如果我设置一个变量

**方法名<-'我的方法'**

我想知道如何使用**method.name**调用该方法？我试过了：

**do.call(paste("Object.R5$", method.name, "()", sep=""))**

但这会提示一条错误消息，说*'what' must be a string or a function*。我知道答案一定是微不足道的，但我是 R5 班的新手，所以......任何人都知道答案，请帮忙。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-24T06:11:19.813

```
get(method_name, envir=Object.R5) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T06:21:55.980

```
eval(parse(text=paste0('Object.R5$',method.name,'()'))) 
```

# jquery - jQuery 延迟停止其他 jQuery 函数

> ID：13538641
> 
> 赞同：1
> 
> 时间：2012-11-24T05:45:03.163
> 
> 标签：jquery, html, fadeout, jmenu

基本上我在返回页面时遇到了淡出 div 的问题。

当立即淡出时，div 内的元素会捕捉到页面底部，然后淡出。这是代码：

```
$(document).ready(function(){ $("#back").click(function () {
           $("#kimg, #kp, #kp2, #kp3, #jprofile,#rprofile,#sprofile,#jcontent,#back,#kcontent,#rcontent,#scontent").fadeOut('slow', function () {
               $("#jcontent,#back,#kcontent,#rcontent,#scontent").fadeOut('slow', function () {
                   $("#jmain,#jmenu,#kmain,#kmenu,#rmain,#rmenu,#smain,#smenu").fadeIn('slow', function () {
                   });
               });
           });
       });
   }); 
```

我想我可以通过添加延迟来解决这个问题，以便 div 内的对象淡出，然后是 div，

```
$(document).ready(function(){ $("#back").click(function () {
           $("#kimg, #kp, #kp2, #kp3, #jprofile,#rprofile,#sprofile,#jcontent,#back,#kcontent,#rcontent,#scontent").fadeOut('slow', function () {
               $("#jcontent,#back,#kcontent,#rcontent,#scontent").delay(500)fadeOut('slow', function () {
                   $("#jmain,#jmenu,#kmain,#kmenu,#rmain,#rmenu,#smain,#smenu").delay(600).fadeIn('slow', function () {
                   });
               });
           });
       });
   }); 
```

但是，在这样做之后，淡入淡出可以很好地返回上一页，但是当您尝试单击另一个页面时，它不会加载大约 10 秒，当它最终出现 div 时，然后上一页的图像推送通过，然后应该在下面的对象出现。

要立即查看当前形式的站点，您可以访问 [jkrsproductions.com](http://www.jkrsproductions.com)。最好的 div 错误示例可以通过转到“我们的人员”页面然后点击后退按钮来找到。

先感谢您。

-S

编辑：感谢您的回答，我们修复了所有淡出问题，但是返回页面并尝试单击另一个页面时的 10 秒延迟仍然存在。这是修改后的代码；感谢Barmar，我们在意识到不需要它之后取出了中间部分：

```
$("#back").click(function () {
           $("#kimg, #kp, #kp2, #kp3, #jprofile,#rprofile,#sprofile,#jcontent,#back,#kcontent,#rcontent,#scontent").fadeOut('slow', function () {
                   $("#jmain,#jmenu,#kmain,#kmenu,#rmain,#rmenu,#smain,#smenu").delay(700).fadeIn('slow', function () {
                   });

           });
       }); 
```

# javascript - Chrome 和 Firefox 中的状态为零

> ID：13538642
> 
> 赞同：0
> 
> 时间：2012-11-24T05:45:03.643
> 
> 标签：javascript, rest, xmlhttprequest

我必须使用 Javascript 调用 Rest Services。我的代码是：

```
function CreateXMLHttpRequest() {
  if (typeof XMLHttpRequest != "undefined") {
    return new XMLHttpRequest();
  } else if (typeof ActiveXObject != "undefined") {
    return new ActiveXObject("Microsoft.XMLHTTP");
  } else {
    throw new Error("XMLHttpRequestnot supported");
  }
}
function CallWebService() {
  objXMLHttpRequest = CreateXMLHttpRequest();
  objXMLHttpRequest.open("POST", "http://www.rest.net/services/abc.svc/json/GetXml", true);
  objXMLHttpRequest.setRequestHeader("Content-Type", "application/xml;charset=UTF-8");
  var packet = '<?xml version="1.0" encoding="utf-8" ?><CompanyRequest xmlns="http://schemas.datacontract.org/2004/07/abc.DomainModel" xmlns:i="http://www.w3.org/2001/XMLSchema-instance"><CompanyName>company</CompanyName></CompanyRequest>';
  objXMLHttpRequest.onreadystatechange = function () {
    if (objXMLHttpRequest.readyState == 4&&objXMLHttpRequest.status==200) {
      alert(objXMLHttpRequest.responseText);
    }
  }
  objXMLHttpRequest.send(packet);
} 
```

IE 中的状态为 200，我能够得到响应。但在 Firefox 和 Chrome 中，状态为 0。我该如何克服这个问题？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T05:49:40.437

您在[http://www.rest.net](http://www.rest.net)上请求文档，我假设您在不同的域中。在这种情况下，您是[同源策略](http://en.wikipedia.org/wiki/Same_origin_policy)的受害者，您的呼叫被阻止。

[如果您已将http://www.rest.net](http://www.rest.net)设置为受信任域，它可能在 IE 中工作。

# python - 使用 list[:] 和 User input short small Integers 。代码的结果不能确定

> ID：13538650
> 
> 赞同：-1
> 
> 时间：2012-11-24T05:46:39.047
> 
> 标签：python, python-3.x, python-2.7

```
def fun(m):
    i=0

    for _ in range(0,len(m)):
    　　m[_]=m[_]//2
  　return m

list=[1,3,6] #User input long value or small value
x=fun(list[:])
print(x) 
```

我的问题是：如果代码成为用户输入的列表值，代码的结果是不确定的？

因为你可以看到 [Python：两个对象是一样的](https://stackoverflow.com/questions/12689312/python-two-objects-are-the-same/12689400#12689400)

```
>>> a = 4534534
>>> b = a
>>> a is b
True
>>> b = 4534534
>>> a is b
False
>>> a = 1
>>> b = a
>>> a is b
True
>>> b = 1
>>> a is b
True 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T06:03:05.160

我不确定我是否正确阅读了您的问题。对此感到抱歉。但是您的代码在 Python 中显示出一些令人惊讶的东西。这是相当预期的：

```
>>> a = 4534534
>>> b = 4534534
>>> a is b
False 
```

Python 创建了两个独立的对象。这就是 Python 通常的工作方式。

```
>>> a = 1
>>> b = 1
>>> a is b
True 
```

什么？好吧，作为一种优化，Python 共享池中的小整数，因此它们将具有相同的 id。

这就是你想问的吗？

如果你写：

```
m = list[:] 
```

制作 list 的浅表副本并将其分配给 m。列表的对象 ID 将不同，而内容的对象 ID 将相同。您的列表包含整数，它们是不可变的，因此原始列表中的值不能通过引用列表的副本来更改。但是，当列表包含可变值（例如对象、字典或什至其他列表）时，对列表中共享可变项的修改将反映在原始列表中。

// 运算符使结果向下舍入到最接近的整数。但是类型是保持不变的，所以如果参数之一是浮点数，结果将是浮点数。

## 这取决于你的定义是什么

```
a[0] is b[0] 
```

`is`当对象相同时返回 True，这意味着 id（认为指针）相同。当对象不同时返回 False。当 id 不同时，这些*值*可能相同也可能不同。如果您想测试值是否相同（这更常见），请使用 ==。

祝你好运，我希望这会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T06:03:28.887

我想您是在问是否可以保证`list`（您的变量）在您运行时不会被更改`fun(list[:])`。

由于`int`是 python 中的不可变类型，因此您是完全安全的。Cpython 使用的小整数（范围从 -5 到 256）的实习在这里不会改变任何东西——即使你使用的代码`m[_] //= 2`仍然可以，因为它隐式地创建了一个对整数的新引用并将其存储在你**复制**的清单（不是原件）。

作为旁注`list`是变量的坏名称。您正在隐藏内置列表类型。

# visual-studio - 更改输出路径时 Razor Intellesense 中断

> ID：13538651
> 
> 赞同：0
> 
> 时间：2012-11-24T05:46:41.427
> 
> 标签：visual-studio, razor

我正在制作一个插件框架并帮助开发，我正在将每个插件的输出路径更改为 shell 项目。但是，这样做会破坏该特定项目中任何 .cshtml 文件中的 razor intellesense。

有没有办法解决这个错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T23:55:35.563

我将输出路径设置回默认值 (\bin)

并设置构建后事件

```
xcopy "$(ProjectDir)\bin" "$(SolutionDir)Frontline_UPF\Modules\$(ProjectName)" /i /s /y /q 
```

我不能使用 $(TargetDir) 因为它在末尾添加了一个 \ 并且阻止了 xcopy 工作。

# sql - 这个嵌套左连接的 linq 等价物是什么？

> ID：13538652
> 
> 赞同：0
> 
> 时间：2012-11-24T05:46:47.177
> 
> 标签：sql, linq

下面嵌套左连接的 linq 等效项是什么？

```
SELECT y.YazilimciId, y.AdSoyad, u.UygulamaId, y.KullaniciAdi, y.IsTel, y.CepTel, y.Eposta, k.KurumAdi
FROM Yazilimcilar y,
     UygulamaYazilimci uy,
     Uygulamalar u
        left outer join
            (
                UygulamaKurum uk
                    left outer join  Kurumlar k on uk.KurumId = k.KurumId
            ) on u.UygulamaId = uk.UygulamaId

WHERE y.YazilimciId = uy.YazilimciId
AND   uy.UygulamaId = u.UygulamaId
AND   u.UygulamaId = '19EA3A29-40FF-45FF-B289-03885FDC9BFC' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T06:24:04.430

为什么需要嵌套连接？实际上，我以前从未见过这样的语法，而且我不确定它是否会起作用，无论如何，在 MS SQL Server 上不会。您可以将查询编写为

```
SELECT y.YazilimciId, y.AdSoyad, u.UygulamaId, y.KullaniciAdi, y.IsTel, y.CepTel, y.Eposta, k.KurumAdi
FROM Yazilimcilar y,
     UygulamaYazilimci uy,
     Uygulamalar u
    left outer join UygulamaKurum uk on u.UygulamaId = uk.UygulamaId
    left outer join Kurumlar k on uk.KurumId = k.KurumId
WHERE y.YazilimciId = uy.YazilimciId
AND   uy.UygulamaId = u.UygulamaId
AND   u.UygulamaId = '19EA3A29-40FF-45FF-B289-03885FDC9BFC' 
```

我还可以建议用正确的连接语法重写所有连接

```
SELECT y.YazilimciId, y.AdSoyad, u.UygulamaId, y.KullaniciAdi, y.IsTel, y.CepTel, y.Eposta, k.KurumAdi
FROM Uygulamalar u
    inner join UygulamaYazilimci uy on uy.UygulamaId = u.UygulamaId
    inner join Yazilimcilar y on y.YazilimciId = uy.YazilimciId
    left outer join UygulamaKurum uk on u.UygulamaId = uk.UygulamaId
    left outer join Kurumlar k on uk.KurumId = k.KurumId
WHERE u.UygulamaId = '19EA3A29-40FF-45FF-B289-03885FDC9BFC' 
```

现在您可以轻松编写 LINQ :)

# objective-c - 如何获取保存在其他视图中的数据？

> ID：13538655
> 
> 赞同：0
> 
> 时间：2012-11-24T05:47:20.983
> 
> 标签：objective-c, iphone, xcode, load, nsuserdefaults

我已经为此苦苦挣扎了一段时间。我有一个标签栏应用程序。在`SecondView`我定义 number2 并将其保存到`NSUserDefaults`我希望它在下次打开应用程序时被程序记住。在`FirstView`我想做一些计算（并显示答案），其中包括之前保存的 number2。我无法让它工作。在代码中，我只留下了到目前为止有效的东西。任何帮助将不胜感激。

第一视图控制器.h

```
#import <UIKit/UIKit.h>
#import "SecondViewController.h"

@interface FirstViewController : UIViewController {
IBOutlet UILabel *labelAnswer;
}
-(IBAction)buttonCalc;
@property(nonatomic, retain) UILabel *labelAnswer;

@end 
```

第一视图控制器.m

```
#import "FirstViewController.h"
#import "SecondViewController.h"

@interface FirstViewController ()

@end

@implementation FirstViewController

@synthesize labelAnswer;

-(IBAction)buttonCalc {
    float number1 = 2;

//what should I put here (or somewhere else) to get number2 saved in second view?

    float answer = number1;// + number2
    labelAnswer.text = [[NSString alloc] initWithFormat:@"%f", answer];
} 
```

SecondViewController.h

```
#import <UIKit/UIKit.h>

@interface SecondViewController : UIViewController {
    IBOutlet UITextField *textNumber2;
    NSUserDefaults *defaults;
}

-(IBAction)buttonSave;
@property(nonatomic, retain) UITextField *textNumber2;
@end 
```

第二视图控制器.m

```
#import "SecondViewController.h"

@interface SecondViewController ()

@end

@implementation SecondViewController

@synthesize textNumber2;

-(IBAction)buttonSave {
    //saving my data
    NSString *saveNumber2 = textNumber2.text;
    defaults = [NSUserDefaults standardUserDefaults];
    [defaults setObject:saveNumber2 forKey:@"savedNumber2"];
    [defaults synchronize];
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    //loading my data
    defaults = [NSUserDefaults standardUserDefaults];
    NSString *loadNumber2 = [defaults objectForKey:@"savedNumber2"];
    [textNumber2 setText:loadNumber2];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T06:02:29.350

用户这个，它可以帮助你

```
-(IBAction)buttonCalc {
    float number1 = 2;

//what should I put here (or somewhere else) to get number2 saved in second view?

   NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
   NSString *loadNumber2 = [defaults objectForKey:@"savedNumber2"]; 
  NSInteger number2=[loadNumber2 integerValue];
   float answer = number1 + number2;
    labelAnswer.text = [[NSString alloc] initWithFormat:@"%f", answer];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T05:59:32.310

您尝试在您的方法中使用以下代码，希望对您有所帮助...

```
-(IBAction)buttonCalc {
    float number1 = 2;
NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
    NSString *strNumber2 = [defaults objectForKey:@"savedNumber2"];

    float number2 = [strNumber2 floatValue];

//what should I put here (or somewhere else) to get number2 saved in second view?

    float answer = number1 + number2; 
    labelAnswer.text = [[NSString alloc] initWithFormat:@"%f", answer];
} 
```

# iphone - iPhone：如何将“yyyyMMddThhmmss”格式字符串转换为 NSDate？

> ID：13538658
> 
> 赞同：1
> 
> 时间：2012-11-24T05:47:29.420
> 
> 标签：iphone, ios, nsdate, nsdateformatter

我有一个像 " `20121124T103000`" 这样的字符串，我想将它转换为`NSDate`.

我尝试使用 dateFormatter 日期格式“ `yyyyMMddThhmmss`”转换它，但它给出的输出`2001-01-01 00:00:00 +0000`不正确。

我们可以将此字符串转换为的方式是什么`NSDate`？

这是我的代码：

```
NSDateFormatter *dateFormat = [[NSDateFormatter alloc] init];
[dateFormat setDateFormat:@"yyyyMMddThhmmss"];
NSLog(@"%@",[dateFormat dateFromString:@"20121124T103000"]); 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-24T05:55:38.590

您的原始代码非常接近；代替：

```
@"yyyyMMddThhmmss" 
```

你应该使用：

```
@"yyyyMMdd'T'hhmmss" 
```

唯一的区别是字符串中“T”周围的单引号对 - 您只需要让应用程序知道“T”是格式的一部分，而不是实际日期。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T05:53:58.070

试试下面的代码。

```
NSString *dateStr = @"20121124T103000";
    NSDateFormatter *dtF = [[NSDateFormatter alloc] init];
    [dtF setDateFormat:@"yyyyMMdd'T'hhmmss"];
    NSDate *d = [dtF dateFromString:dateStr];
    NSDateFormatter *dateFormat = [[NSDateFormatter alloc] init];
    [dateFormat setDateFormat:@"yyyyMMdd'T'hhmmss"];
    NSString *st = [dateFormat stringFromDate:d];   
NSLog(@"%@",st]); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-24T06:08:48.787

这样做，

```
NSString *dateStr = @"20121124T103000";
NSDateFormatter *dateFormat = [[NSDateFormatter alloc] init];
[dateFormat setDateFormat:@"yyyyMMdd'T'hhmmss"];
NSDate *d = [dateFormat dateFromString:dateStr];
NSString *st = [dateFormat stringFromDate:d];   
NSLog(@"%@",st); 
```

# xml - 在 vb6 中读取大型 xml 文件

> ID：13538661
> 
> 赞同：1
> 
> 时间：2012-11-24T05:48:03.150
> 
> 标签：xml, vb6, xml-parsing

我正在尝试加载 0f 250MB 的 XML 文件。但它无法加载文件。请指导我。

我展示了我正在使用的代码。

```
frmArvindKMM.CD.Filter = "Text File(*.xml)|*.xml|All File |*.*"
frmArvindKMM.CD.ShowOpen

If frmArvindKMM.CD.FileName = "" Then
MsgBox "Import Failed", vbCritical + vbOKOnly, "AMN & Co."
Exit Sub
End If

Set xmlDoc = New DOMDocument30
If frmArvindKMM.CD.FileName = "" Then
    MsgBox "Failed to import"
Exit Sub

ElseIf xmlDoc.Load(frmArvindKMM.CD.FileName) Then
       xmlDoc.async = False
Else
    MsgBox "Failed to import"
    Exit Sub
End If 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T07:08:15.627

您可以使用**SAX 解析器**，它允许您**动态**加载 XML 文件。

请参阅以下链接 [http://support.microsoft.com/default.aspx?scid=kb;en-us;266228](http://support.microsoft.com/default.aspx?scid=kb;en-us;266228)

# extjs - 向用户显示不同的字体

> ID：13538666
> 
> 赞同：1
> 
> 时间：2012-11-24T05:48:27.087
> 
> 标签：extjs, extjs4, extjs4.1

我正在使用 Extjs 4.1.0，我想向用户展示不同的字体，可能是组合框/选项的形式，就像我们在**Wordpad**或**MS Word**等编辑器中看到的那样。

有没有什么方法可以实现。我不想使用“HTML 编辑器”，因为我不会提供编辑器，而只会显示一个设置页面来显示所有选项，例如 - 字体、字体大小、字体颜色。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T11:46:52.787

您可以为组合提供自定义模板。例如：

```
var combo = Ext.create('Ext.form.ComboBox', {
    store: store,
    renderTo: 'combo',
    tpl: Ext.create('Ext.XTemplate',
        '<tpl for=".">',
            '<div class="x-boundlist-item" style="font-family: \'{name}\'">{name}</div>',
        '</tpl>'
    )
}); 
```

工作样本：http: [//jsfiddle.net/k2JbL/5/](http://jsfiddle.net/k2JbL/5/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T13:30:57.077

您可以为字段标签嵌入 html 标签

fieldLabel：组合框名称

# ios - 如何重新显示 IsLoaded 的 ViewController

> ID：13538667
> 
> 赞同：1
> 
> 时间：2012-11-24T05:48:50.727
> 
> 标签：ios, xamarin.ios

我了解如何通过 Push 显示 ViewController。

但是，如何重新显示已推送且仍在加载但在屏幕上不可见的视图。

我试过了

BaseView.PresentViewController(CurrentViewController,true,null);

但是，我得到了这个错误：Objective-C 异常抛出。名称：NSInvalidArgumentException 原因：应用程序试图以模态方式呈现活动控制器

如果视图控制器是新的，我可以使用 Push 并且它可以工作 BaseView.NavigationController.PushViewController(CurrentViewController,true);

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T06:11:43.603

Did you try the following method?

```
[self.navigationController popToViewController:viewControllerLoadedAlready animated:YES] 
```

# java - 停止线程并再次开始在黑莓中给出 IllegalThreadStateException

> ID：13538668
> 
> 赞同：11
> 
> 时间：2012-11-24T05:48:57.767
> 
> 标签：java, multithreading, blackberry, java-me

使用以下代码时出现异常：我`IllegalThreadStateException`已经启动了这个线程一次（通过使用`thread.start()`）并再次尝试在另一个地方启动它，所以使用了以下代码：

```
thread.interrupt();
thread.start(); 
```

而是`thread.start()`投掷`IllegalThreadStateException`。

我应该用什么来解决它？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-24T05:59:13.197

`Thread`对象只能启动一次。如果您需要停止/中断 a `Thread`，然后想再次启动它，您应该创建一个新实例并调用`start()`它：

```
thread.interrupt();  // if you need to make sure thread's run() method stops ASAP
thread = new MyThreadSubclass();
thread.start(); 
```

[来自 API 文档](http://www.blackberry.com/developers/docs/5.0.0api/java/lang/Thread.html#start%28%29)

> **IllegalThreadStateException** - 如果线程已经启动。

我知道你不能再打电话不是 100% 清楚`start()`，即使你以前打电话`interrupt()`，但这就是它的工作方式。

如果您查看[标准 Java 的 API 文档](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Thread.html#start%28%29)，这个问题就更清楚了。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-25T14:47:59.757

除了内特的回答。

AnkitRox 在他的评论中说：

> 谢谢内特。我也在尝试你的方法。但是当时出现的问题是，它为新实例启动了一个新线程，并且之前的线程也在工作。

所以看起来问题是*“即使我调用了中断，线程仍在运行”*。考虑这个示例（它很丑，但足以展示主要思想）：

```
final Thread t = new Thread(new Runnable() {
    public void run() {
        while (true) {
            for (int i = 0; i < 100000000; i++); // simulate some action
            System.out.println("hi, interrupted = " 
                    + Thread.currentThread().isInterrupted());
        }
    }
});
t.start();
new Timer(true).schedule(
    new TimerTask() {
        public void run() {
            t.interrupt();
        }
    },
    1000 // 1 second delay
); 
```

`interrupt()`请注意，即使在调用之后，线程也会继续运行。产生的输出是：

```
hi, interrupted = false
hi, interrupted = true
hi, interrupted = true
hi, interrupted = true
...
hi, interrupted = true 
```

实际上，除非强制关闭，否则程序永远不会停止。那么做什么`interrupt()`呢？它只是将**中断标志**设置为`true`。`interrupt()`被叫后开始`Thread.currentThread().isInterrupted()`返回`false`。就这样。

另一种情况是，如果`interrupt()`线程在调用 throw 的方法之一时被阻塞`InterruptedException`，则该方法将返回 throwing `InterruptedException`。如果线程的代码只是“吃掉”那个异常，那么线程仍然会继续运行，考虑一个示例：

```
final Thread t = new Thread(new Runnable() {
    public void run() {
        while (true) {
            System.out.println("hi, interrupted = " 
                    + Thread.currentThread().isInterrupted());
            try {
                Thread.sleep(5000);
            } catch (InterruptedException e) {
                System.out.println("got InterruptedException");
            }
        }
    }
});
t.start();
new Timer(true).schedule(
    new TimerTask() {
        public void run() {
            t.interrupt();
        }
    },
    1000 // 1 second delay
); 
```

`interrupt()`请注意，即使在调用之后，线程也会继续运行。产生的输出是：

```
hi, interrupted = false
got InterruptedException
hi, interrupted = false
hi, interrupted = false
...
hi, interrupted = false 
```

注意，这一次`interrupted = false`即使在`interrupt()`被调用之后。这是因为无论何时`InterruptedException`被捕获，**中断标志**都会重置为`false`。

在 Java 中，停止线程是**协作**机制。这意味着如果没有线程本身的合作，它就无法完成。这是上述示例的固定版本：

```
final Thread t = new Thread(new Runnable() {
    public void run() {
        while (!Thread.currentThread().isInterrupted()) {
            System.out.println("hi, interrupted = " 
                    + Thread.currentThread().isInterrupted());
            try {
                Thread.sleep(5000);
            } catch (InterruptedException e) {
                System.out.println("we've been interrupted");
                // restore the interrupted flag
                Thread.currentThread().interrupt();
            }
        }
    }
});
t.start();
new Timer(true).schedule(
    new TimerTask() {
        public void run() {
            t.interrupt();
        }
    },
    1000 // 1 second delay
); 
```

所以正确的做法应该是定期检查**中断标志**。如果检测到中断状态，则尽快返回。另一个常见的选项是根本不使用`Thread.interrupt()`，而是使用[一些自定义布尔值](http://www.java2s.com/Code/Java/Threads/Thesafewaytostopathread.htm)。

# hql - Wavemaker 服务变量 HQL 更新外键列

> ID：13538669
> 
> 赞同：3
> 
> 时间：2012-11-24T05:49:06.733
> 
> 标签：hql, wavemaker

我有两个表员工，部门具有一对多关系，因此员工中的列名“depRefID”引用“部门”表的主键。

我有一个 dojogrid，它通过服务变量和一个列出部门名称的选择菜单从员工表中获取数据。

我在选择菜单上设置了一个 onchange 函数，理想情况下，它将循环雇员表中的每个选定行并将其外键更改为通过选择小部件选择的外键。

我正在尝试使用单独的服务变量来使用和更新查询来更新“员工”表。

如何在 HQl 中引用或访问外键“depRefID”，因为直接引用它会引发异常。

# android - 长按时取消选择/清除所选文本以进行复制过程

> ID：13538670
> 
> 赞同：1
> 
> 时间：2012-11-24T05:49:13.977
> 
> 标签：android, webview, android-viewpager

```
**UPDATE** 
```

在我的路上实施后，我可以取消文本控制，但在姜饼版本中。在这个果冻中，没有使用任何键码组合，我也尝试过这个例子，但新版本手动调度 keyevent 没有更多的运气。

我在viewpager中有webview，现在用户可以在长按webview时从webview复制文本，但问题是当用户长按webview并且光标显示在所选文本区域的视图上并且它们向右/向左移动然后viewpager也移动。为了克服这个问题，我在长按时禁用了 viewpager 分页更改事件，它可以工作。

现在要启用此功能并清除/取消选择 webview 上的高亮文本以取消复制文本过程，我没有找到任何解决方案。

在这里查看图片

![在此处输入图像描述](../Images/7a27e92a840bc67ae9c3c24128333aea.png)

**已编辑**

有谁知道如何以编程方式取消这个过程，就像我们点击右/完成按钮一样？

这是长按 webview 时文本上的代码开始选择

```
public void SelectText(View v) {
    try {
        KeyEvent shiftPressEvent = new KeyEvent(0, 0, KeyEvent.ACTION_DOWN,
                KeyEvent.KEYCODE_SHIFT_LEFT, 0, 0);
        shiftPressEvent.dispatch(v);
    } catch (Exception e) {
        throw new AssertionError(e);
    }
} 
```

现在如何以编程方式取消/关闭此选择并清除亮化文本。

我已经用上面的代码尝试了与 ACTION_UP 相同的代码，但没有运气有人试过知道这一点吗？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T11:19:17.660

取消

我有这样做

```
public void SelectText(View v) {
    try {
        KeyEvent shiftPressEvent = new KeyEvent(0, 0, KeyEvent.ACTION_DOWN,
                KeyEvent.KEYCODE_ESCAPE, 0, 0);
        shiftPressEvent.dispatch(v);
    } catch (Exception e) {
        throw new AssertionError(e);
    }
} 
```

这适用于姜饼版本但不适用于 4.0 版本我不知道为什么这不起作用但也尝试找到方法

谢谢

# c# - 检查 li 点击值

> ID：13538672
> 
> 赞同：-1
> 
> 时间：2012-11-24T05:49:20.340
> 
> 标签：c#, asp.net, c#-4.0, listitem

我正在使用两个带有链接的列表项。现在我想检查从客户端单击了哪个链接。这是我的代码：

```
 <ul id="navtabs">
            <li id="basic" runat="server" class="cat-item cat-item-6 current-cat"><a href="#">new</a></li>
            <li id="new" runat="server" class="cat-item cat-item-8"><a href="#">old</a></li>
        </ul> 
```

我想检查单击的项目是基本的还是新的

```
if(this.basic.clicked ==true)
{
   do something
}
else
{
  do something
} 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T06:02:29.310

如果您要起诉 Web 表单，那么，

1.  被起诉的控制必须是服务器控制
2.  如果它是一个链接 put runat="server" 和控件的 id
3.  创建每个链接的点击事件。

但是这些链接的目的是什么尚不清楚。
您想对点击采取什么行动必须明确。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T06:42:23.153

我有一个窍门。您可以借助 jQuery、一个隐藏字段和一个隐藏的 asp 按钮来完成此操作。

```
 <asp:Button ID="Button1" runat="server" OnClick="Button1_Click" Text="Hidden Button" />
    <asp:HiddenField ID="hdnLIClicked" runat="server" /> 
```

现在 jQuery 部分，在准备好的事件中

```
 $().ready(function() {
        $("#Button1").hide();//hiding the button through jQuery

        $("#basic").click(function(){
            $("#hdnLIClicked").val("basic");
            $("#Button1").click();
        });
        $("#new").click(function(){
            $("#hdnLIClicked").val("new");
            $("#Button1").click();
        });
    }); 
```

或者，如果有更多列表项，您可以为所有列表项指定一个通用类，就像您已经为两个列表项设置了一个通用类。即“猫项”。

```
 $().ready(function() {
        $("#Button1").hide();//hiding the button through jQuery

        $(".cat-item").click(function(){
            $("#hdnLIClicked").val($(this).attr("id"));
            $("#Button1").click();//this will fire the hidden button event on server side.
        });
    }); 
```

您将在隐藏字段中单击哪个“li”。

在后端，像这样处理按钮单击事件。

```
 protected void Button1_Click(object sender, EventArgs e)
    {
        if (hdnLIClicked.Value == "basic")
        {
            //handle your logic for basic here...
        }
        else if (hdnLIClicked.Value == "new")
        {
            //handle your logic for new here...
        }
    } 
```

通过 jQuery 隐藏按钮，不要设置其属性*Visible="false"*，否则按钮不会在客户端呈现。

享受 ;）...

# ios - 增加或减少 NSString 中的整数

> ID：13538674
> 
> 赞同：0
> 
> 时间：2012-11-24T05:49:31.067
> 
> 标签：ios, xcode, nsstring, nsinteger

我的应用程序是一个简单的博客应用程序。我解析一个 XML，并从解析的部分构建自定义 HTML 代码，然后将该 HTML 加载到 webview 中。不是每个人都有相同的视觉质量，所以我尝试添加简单的按钮来增加或减少字体大小。目前，HTML 可能如下所示：

> font size=5 标题.../font font size = 3 正文.../font

我想做的是取任何列出的数字，并增加或减少1。

关于我如何只取这两个数字（不想增加可能在文章正文中的其他数字）并逐渐增加或减少的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T06:18:43.323

我建议将您从 XML 中解析出来的 HTML 填充到一个“ `NSMutableString`”对象中，然后在可变字符串对象中寻找与模式“ `font size=`”匹配的所有子字符串的范围。

找到这些范围后，您应该能够获取字体大小，然后`NSInteger`通过类似的方式将它们放入“”`[NSString integerValue]`中，然后您可以递增并放回可变字符串对象。显然，还有一些额外的细节我并没有考虑太多，比如如何用“ `9`”替换可变字符串中的“ `10`”，或者区分“”字体大小和“ `10`”字体大小之间的区别`100`。但至少这对你来说应该是一个好的开始。

# cursor - 记录光标移动

> ID：13538676
> 
> 赞同：1
> 
> 时间：2012-11-24T05:49:40.887
> 
> 标签：cursor, desktop-recording

这更像是一个概念/实现问题，而不是特定的语言问题。

有人对光标移动记录有任何见解吗？
获取光标的当前位置非常容易，但是您将如何记录光标所跟随的路径呢？
（到可以以图形方式绘制的详细程度，而不会对所采用的路径产生歧义）

我想您可以在一小段时间后重复记录光标的当前位置，将其全部记录下来以列出按时间顺序访问的坐标，但我不确定记录应该多频繁（或可行）；每 10 毫秒？
我什至没有遇到过如此短的睡眠时间达到必要精度的方法！

我还担心 CPU 使用率高时睡眠和录音的性能；当用户使用鼠标与密集型软件交互时。

我什至不完全确定光标真正移动的位置。如果我将光标扫过屏幕，计算机（内部某处）是否承认我越过了所有这些像素，或者我的鼠标真的告诉它“我在那里，现在我在这里，现在我在那里”。

我也寻求一种区分快速和慢速运动的方法，但现在，我只能观察访问坐标图上的绘图间距。

有人对此有任何见解吗？任何潜在的陷阱；我的担忧合法吗？我在这件事上走错了吗？

（可以观察到，我真的需要一些指导）

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T06:06:34.090

在同一个应用程序中记录鼠标移动要容易得多 - 只需在每条`WM_MOUSEMOVE`消息上记录一些内容。您将收到定期更新鼠标指针位置的消息。您不会收到`WM_MOUSEMOVE`鼠标经过的每个像素的消息，但它会根据您移动鼠标的速度和系统的繁忙程度而跳跃。

在其他一些应用程序中记录鼠标移动将稍微复杂一些。如果你已经编写了logger和被记录的应用程序，那么你可以`WM_MOUSEMOVE`在被记录的应用程序中处理，并发送相应的消息到你的logger应用程序。您选择的 IPC；一个简单的`SendMessage()`可能就足够了。

*在整个系统*中记录鼠标移动是一个完全不同的问题。您可能必须在更接近驱动程序级别的地方进行连接。

我只是想到了另一种方法[——CBT（基于计算机的训练）钩子](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644977%28v=vs.85%29.aspx)旨在提供跨应用程序的准确信息。我从来没有使用过这些，所以你必须做更多的调查。

# php - PHP preg_match 单词改变顺序

> ID：13538677
> 
> 赞同：0
> 
> 时间：2012-11-24T05:49:44.377
> 
> 标签：php, preg-match

假设我有一个`array ("things and stuff", "the stuff");`我正在迭代以将每个元素与另一个数组的每个元素进行比较 - 假设第二个数组是`("stuff the blah", "stuff and things to do");`

我想要`preg_match`任何通常相关的东西——我需要它来匹配单词相同的元素，即使它们的位置已经改变——本质上我想在这种情况下`"the stuff"`匹配。`"stuff the..."`

解决这个问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T06:48:36.940

您可以简单地拆分第一个数组的字符串以与第二个数组上的所有字符串值进行比较，这里是示例：

```
$array1 = array("things and stuff", "the stuff");
$array2 = array("stuff the blah", "stuff and things to do");

$result = array();

foreach($array1 as $val1){

    $words1 = explode(" ", $val1);

    $result[$val1] = 'not found';

    foreach($array2 as $val2){

        $words2 = explode(" ", $val2);
        $intersect = array_intersect($words1, $words2);
        $diff = array_diff($words1, $intersect);

        if(empty($diff))
            $result[$val1] = 'found';
    }
}

var_dump($result); 
```

参考：

*   [爆炸](http://php.net/manual/en/function.explode.php)
*   [array_ 相交](http://www.php.net/manual/en/function.array-intersect.php)
*   [数组差异](http://www.php.net/manual/en/function.array-diff.php)

# unicode - 动态生成 Ge'ez unicode

> ID：13538685
> 
> 赞同：10
> 
> 时间：2012-11-24T05:51:01.313
> 
> 标签：unicode, utf-8

![在此处输入图像描述](../Images/543e8a16ce2589a9bb48beb3b4f7770f.png)

你好。如果你看上面的图片，你会看到一组看起来很奇怪的字符以及一些拉丁字符。奇怪的是厄立特里亚字符。他们是我们在我国使用的字符。所以，直截了当地说，我希望创建最简单的软件，甚至可能是一个批处理文件（如果可能的话），以帮助我使这些字符适用于网络，并使 PC 理解并在运行时显示它们打字。就像使用阿拉伯语、印度教、中文...字符一样。我认为，由于“创建语言”的问题通常很少见，或者因为我可能不知道要使用的正确术语，所以当我在互联网上搜索任何教程甚至是自由职业者或任何东西时，我得到的只是......没有什么。所以，我希望，如果有人能给我一个分步指南，

谢谢。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-11-25T00:07:03.750

您的问题是“如何创建语言”，因此我将描述新语言（或更准确地说，书写系统）需要到位的所有部分。您专门询问厄立特里亚字母表，所以我将提供现代系统如何支持它的具体示例，并尝试为您提供您所缺少的部分的指针。答案很长，并提供了很多链接来支持这两种解释。

要使用像[Ge'ez](http://en.wikipedia.org/wiki/Ge%27ez_script)（也称为 Ethiopic，用于在埃塞俄比亚写阿姆哈拉语和在厄立特里亚写提格里尼亚语的脚本）这样的脚本，您需要做一些事情。第一种是对字符进行编码的方法；代表每个字符的一组数字，计算机可以使用这些数字来表示文本。幸运的是，[Unicode](http://en.wikipedia.org/wiki/Unicode)已经普及，并且 Unicode 被设计成一个包含世界上所有语言的通用字符集。[Unicode 3.0 在U+1200-U+137F 范围内](http://www.unicode.org/charts/PDF/U1200.pdf)引入了埃塞俄比亚语，之后的版本在[U+1380-U+1394](http://www.unicode.org/charts/PDF/U1380.pdf)、[U+2D80-U+2DDF](http://www.unicode.org/charts/PDF/U2D80.pdf)和[U+AB00-U+AB2F范围内添加了更多晦涩字符的补充](http://www.unicode.org/charts/PDF/UAB00.pdf). 如果您想支持 Unicode 尚不支持的语言，您要么需要使用[私人使用区域](http://en.wikipedia.org/wiki/Private_Use_%28Unicode%29)并定义您自己的字符到代码点的映射，要么[提交将](http://www.unicode.org/pending/proposals.html)您的脚本添加到 Unicode 的提案；例如，参见[Ethiopic](ftp://ftp.ethiopic.org/pub/info/uni-proposal.txt)的提案。

现在，Unicode 只是一个[字符集](http://www.unicode.org/glossary/#character_set)；字符和数字之间的抽象映射。要将这些字符作为字节序列实际传输，请使用[字符编码](http://www.unicode.org/glossary/#character_encoding_form)。有很多编码；其中一些，如[ASCII](http://en.wikipedia.org/wiki/ASCII)和[ISO-8859-1](http://en.wikipedia.org/wiki/ISO/IEC_8859-1)仅涵盖完整 Unicode 字符集的一个子集，而另一些，如[UTF-8](http://en.wikipedia.org/wiki/UTF-8)和[UTF-16](http://en.wikipedia.org/wiki/UTF-16)，覆盖全系列。对于 Web 上的文档，推荐使用 UTF-8 字符编码；如果你能提供帮助，你永远不应该使用其他任何东西。在 UTF-8 中，可以直接在文档中写 Ge'ez，例如：ኤርትራ。需要注意的一件事是，某些程序（尤其是在 Windows 上）会为您提供“Unicode”作为编码，当它们表示 UTF-16 时；您要确保选择 UTF-8，因为它更高效且与更广泛的软件兼容。

如果您使用的编码不涵盖 Unicode 的全部范围，或者您没有输入这些字符的好方法，并且您正在编写 HTML 或 XML，则可以使用[数字字符引用](http://en.wikipedia.org/wiki/Numeric_character_reference)来代替。为此，您需要编写要在`&#`和之间引用的字符的 Unicode 代码点`;`。您可以用十进制写数字，也可以用前缀 . 的十六进制写数字`x`。例如，ሀ 可以写成`&#x1200;`或`&#4608;`（末尾的分号很重要；它在评论中不适合你，因为你错过了它）。

既然您已经有了一个字符集和一种对其进行编码的方法，那么您需要一种显示它的方法。有些脚本更容易在其他脚本中显示。对于所有脚本，您需要一个[字体](http://en.wikipedia.org/wiki/Computer_font)；定义每个字符外观的文件。字体包含一组字形或每个字符的图形。一些文字，如[拉丁字母](http://en.wikipedia.org/wiki/Latin_alphabet)（用于英语和大多数欧洲语言的字母）相对简单；每个字符都是一个单独的字形，它们的绘制方式并不取决于之前或之后出现的字符（尽管[变音符号](http://en.wikipedia.org/wiki/Diacritic)和[连字](http://en.wikipedia.org/wiki/Typographic_ligature)可以使它变得更复杂一些）。其他，如[阿拉伯语](http://en.wikipedia.org/wiki/Arabic_alphabet)和[印度语脚本](http://en.wikipedia.org/wiki/Brahmic_scripts)用草书书写，其中字母相互连接，因此它们的绘制方式可能取决于它们附近的字符。这些语言需要特殊的渲染支持，如Windows上的[Uniscribe](http://msdn.microsoft.com/en-us/library/windows/desktop/dd374091%28v=vs.85%29.aspx)或[DirectWrite 、Linux 上的](http://msdn.microsoft.com/en-us/library/windows/desktop/dd368038%28v=vs.85%29.aspx)[Pango ，或](http://www.pango.org/)[Apple Advanced Typography](https://developer.apple.com/fonts/TTRefMan/RM06/Chap6AATIntro.html)或[Graphite](http://scripts.sil.org/cms/scripts/page.php?site_id=projects&item_id=graphite_home)等高级字体技术。

幸运的是，Ge'ez 是一个相当简单的书写系统，不需要任何专门的渲染支持或高级字体系统。每个字符都是一个单独的字形，不需要任何重新排序。因此，与大多数计算机上已经可用的渲染系统一起显示的普通[OpenType字体就可以完成这项工作。](http://en.wikipedia.org/wiki/OpenType)但是您仍然需要字体才能显示字符。要创建自己的字体，您可以使用[FontForge](http://fontforge.org/)（免费/开源工具）、[Fontographer](http://www.fontlab.com/font-editor/fontographer/)、[FontLab Studio](http://www.fontlab.com/font-editor/fontlab-studio/)或其他类似软件。

对于 Ethiopic，您无需创建自己的。有[许多可用的字体](http://www.wazu.jp/gallery/Fonts_Ethiopic.html)包括埃塞俄比亚字符，但我推荐的是来自[SIL （夏季语言学研究所）的](http://www.sil.org/)[Abyssinica SIL](http://scripts.sil.org/cms/scripts/page.php?site_id=nrsi&item_id=AbyssinicaSIL)，它为少数民族语言和书写系统做了很多出色的工作。他们的字体在[免费许可](http://scripts.sil.org/OFL)下可用，允许您使用字体、重新分发字体和修改字体，因此他们的字体非常灵活，可以在各种情况下使用。Windows 附带[Nyala](http://www.microsoft.com/typography/fonts/font.aspx?FMID=1623)，其中包括埃塞俄比亚字符，自 Windows Vista 和[Ebrima](https://www.microsoft.com/typography/fonts/font.aspx?FMID=2114)，在 Windows 8 中增加了对埃塞俄比亚字符的支持；因此，使用 Windows Vista 或更高版本的用户应该已经能够查看埃塞俄比亚字符了。从 10.6 开始，Mac OS X 随[Kefa](http://support.apple.com/kb/HT5154)一起提供。

获得字体后，您将能够查看埃塞俄比亚字符。但是阅读您文档的其他人可能没有这些字体（如果他们使用的是旧版本的 Windows 或 Mac OS X，如果他们没有安装 Windows 附带的所有字体等），在这种情况下字符可能会在他们的机器上显示为方框或问号。您可以为这些人提供可再分发的字体，例如 Abyssinica SIL，或者他们可以购买包含埃塞俄比亚字符的字体，但这可能会带来不便。对于处理文字处理器文档或纯文本，这可能是您能做的最好的事情；他们需要在计算机上安装字体才能显示文本。如果您在计算机上创建 PDF，它应该嵌入显示文本所需的字体，

在网页上，您可以使用[网页字体](http://www.w3.org/TR/css3-fonts/#font-resources)链接到样式表中的字体，从而允许用户的网页浏览器为该网页加载该字体。Web 字体一直支持[到 IE 6](http://caniuse.com/#feat=fontface)以及大多数其他 Web 浏览器的最新版本，因此它们实际上得到了相当广泛的支持。不同的 Web 浏览器支持不同的字体文件格式（[EOT](http://en.wikipedia.org/wiki/Embedded_OpenType)、[TTF](http://en.wikipedia.org/wiki/TrueType)、[OpenType](http://en.wikipedia.org/wiki/OpenType)、[SVG](http://www.w3.org/TR/SVG/fonts.html)和[WOFF](http://en.wikipedia.org/wiki/Web_Open_Font_Format)），并且 CSS 的语法略有不同（旧版本的 IE 基于旧草案），因此制作起来可能有点棘手与所有浏览器兼容的页面。幸运的是，人们已经自动化了这个过程。一些网络字体可从以下网站在线获得[Google Web Fonts](http://www.google.com/webfonts)或[FontSquirrel](http://www.fontsquirrel.com/fontface)，但遗憾的是，我找不到已经托管的任何埃塞俄比亚字体。但是，您可以[将字体上传到 FontSquirrel](http://www.fontsquirrel.com/fontface/generator)，它会将其转换为所有主要格式，并提供适用于所有现代浏览器的示例 CSS。请注意，您应该只对允许 Web 嵌入的字体执行此操作；并非所有字体都可以。由于 Abyssinica SIL 在 Open Font License 下可用，您可以使用它，我已经通过 FontSquirrel 为您运行它；您可以[查看它是如何工作](http://ephemera.continuation.org/stackoverflow/webfontkit-20121124-164442/abyssinicasil-r-demo.html)的（查看 Glyphs & Languages 选项卡），或[下载该工具包](http://ephemera.continuation.org/stackoverflow/webfontkit-20121124-164442.zip)。要使用它，只需将字体文件 ( `.ttf`, `.eot`, `.svg`, 和`.woff`) 在您的服务器上与您的 CSS 位于同一目录中，并在您的 CSS 中包含以下内容：

```
@font-face {
    font-family: 'abyssinica_silregular';
    src: url('abyssinicasil-r.eot');
    src: url('abyssinicasil-r.eot?#iefix') format('embedded-opentype'),
         url('abyssinicasil-r.woff') format('woff'),
         url('abyssinicasil-r.ttf') format('truetype'),
         url('abyssinicasil-r.svg#abyssinica_silregular') format('svg');
    font-weight: normal;
    font-style: normal;
} 
```

既然您知道如何对埃塞俄比亚语进行编码、查看埃塞俄比亚语字符以及共享包含埃塞俄比亚语字符的文档，那么您可能希望将它们键入到文档中。如果您使用的是 HTML，则只需键入上述数字字符引用即可。在其他文档中，您可以从所有字符的图表中复制并粘贴字符，例如 Wikipedia 页面。但这会变得相当麻烦。根据您的系统和设置，您还可以使用[Unicode Hex Input](https://superuser.com/questions/13086/how-do-you-type-unicode-characters-using-hexadecimal-codes)输入任意 Unicode 字符，但这也很麻烦。

要完全支持在您的计算机上键入脚本，您需要一个[键盘布局](http://en.wikipedia.org/wiki/Keyboard_layout)或[输入法](http://en.wikipedia.org/wiki/Input_method)。一些脚本可以用简单的键盘布局输入，它说明了哪些键对应于哪些字符。如果脚本中的字符多于键盘上的键，则可以使用 Shift 和 Alt（或 Mac 上的 Option）来映射到更多字符。[死键](http://en.wikipedia.org/wiki/Dead_key)也可用于扩展您键入的字符范围；死键是产生单个字形的两个或多个击键序列；例如，在 Mac OS X 上，要键入“á”，您可以键入`Option-E` `A`. 要在 Windows 上创建键盘布局，您可以使用[Microsoft Keyboard Layout Creator](http://msdn.microsoft.com/en-us/goglobal/bb964665)。Mac OS X 使用[XML 格式](http://developer.apple.com/library/mac/#technotes/tn2056/_index.html)用于键盘布局，因此您可以直接创建一个，或者使用SIL 的[Ukelele](http://scripts.sil.org/cms/scripts/page.php?site_id=nrsi&id=ukelele)更轻松地创建一个。在使用 X11 的系统（如 Linux）上，您可以[创建自己的 XKB 布局](http://hektor.umcs.lublin.pl/%7Emikosmul/computing/articles/custom-keyboard-layouts-xkb.html)。

如果您需要的字符多于修饰符和死键所能支持的字符，例如输入中文或日文，那么您需要一个成熟的输入法。输入法允许您运行任意代码以将某人输入的内容映射到它生成的文本中；例如，在日语输入法中，您可以键入您正在书写的内容的语音表示，它会显示与该表示匹配的可能字符的下拉列表，允许您选择合适的字符。Windows 提供了[Input Method Manager](http://msdn.microsoft.com/en-us/library/windows/desktop/dd318641%28v=vs.85%29.aspx)用于编写输入法，Mac OS X 提供[Input Method Kit](http://developer.apple.com/library/mac/#documentation/Cocoa/Reference/InputMethodKitFrameworkRef/_index.html)，X11 提供了几种方法，例如[SCIM](http://www.scim-im.org/)和[iBus](https://code.google.com/p/ibus/)。

埃塞俄比亚语的[标准输入法](http://keyboards.ethiopic.org/specification/)广泛使用了死键。看起来目前最流行的 Ethiopic 输入法是[Keyman](http://www.tavultesoft.com/ethiopic/)，这是一种适用于 Mac 和 Windows 的商业输入法，此外还有一个免费的变体[KMFL](http://kmfl.sourceforge.net/)，适用于 Linux。SIL 有此输入法的[键盘下载](http://scripts.sil.org/cms/scripts/page.php?item_id=AbyssinicaSIL_Download)；他们还有一个用于 Mac OS X 的键盘布局，它使用死键来实现相同的目的。Mac OS X 有更广泛的死键支持，所以它不需要输入法来支持这种形式的输入，而在 Windows 上你需要使用像 Keyman 这样的输入法才能以这种方式输入。Google 有一个免费的 Windows 输入法，[Google Input Tools for Windows](http://www.google.com/inputtools/windows/index.html)，支持阿姆哈拉语，并允许您[自定义其输入方案](http://www.google.com/inputtools/windows/canonical.html)；您可以尝试调整他们对提格里尼亚语的阿姆哈拉语支持。

如果您只需要在网站上支持输入，您可以在 JavaScript 中做到这一点，方法是用 JavaScript 编写一个输入法，将某人输入的内容音译为埃塞俄比亚语。我不知道有任何现有的框架可以做到这一点；但是，我发现在 JavaScript 中实现了[韩语](http://www.sayjack.com/type/korean/)和[日语输入法。](http://jime.sourceforge.jp/javascriptime/)你可以看看这些是如何实现的。进一步看，我发现制作 Keyman 的 Tavultesoft 也有[KeymanWeb](http://www.tavultesoft.com/keymanweb/)，这是一种基于 JavaScript 的输入法，您可以购买并嵌入到您的网站中。MediaWiki 还有一个输入法扩展[Narayam](http://www.mediawiki.org/wiki/Extension:Narayam)，其中包括用于基于 MediaWiki 的站点（例如 Wikipedia）的基于 JavaScript 的输入法，其中包括实验性的阿姆哈拉语输入法。还有一个[W3C IME API 草案](http://www.w3.org/TR/ime-api/)，它有助于在 Web 应用程序和本机 IME 以及基于 JavaScript 的 IME 之间提供接口。鉴于它仍然是一个草案，我不知道它是否在任何地方都得到支持。

通过以上所有内容（字符集、编码、字体、渲染支持和输入法），您将能够在脚本中创建、共享和查看文档。如果这就是您所需要的，那就太好了；以上将允许您使用给定脚本中的文档。但是为了在您的计算机上全面支持一种语言，而不仅仅是它的脚本或书写系统，您还需要两个部分：一个[locale](http://en.wikipedia.org/wiki/Locale)，以及您的软件要针对您的语言进行本地化（翻译和改编）。

语言环境指定程序应如何操作给定脚本、语言、文化和/或编码中的文本。程序执行许多常见的文本处理操作：显示数字、显示日期和时间、排序字符串或名称等。这些应该如何工作可能会因使用程序的人的语言、脚本和文化而异；例如，在瑞典语中，“ü”与“y”一起排序，而在英语和德语中，它与“u”一起排序。差异可能不基于语言：墨西哥和西班牙都使用西班牙语，但在墨西哥，数字显示`.`为小数点分隔符（1½ 写为“1.5”），而在西班牙`,`用作小数分隔符（1½ 写为“1,5”）。语言环境指定了所有这些规则。由于语言环境可能因语言、文化和有时其他因素而异，因此通常使用语言和国家/地区来指定语言环境，也可以使用其他信息。

命名区域设置最广泛使用的标准是[RFC 4646 (BCP 47)](https://www.rfc-editor.org/rfc/rfc4646)。语言环境通常指定为“ *ln* - *CC* ”，语言代码为*ln*，国家代码为*CC*：美国英语为 en-US，英国英语为 en-UK，法国法语为 fr-FR。如果需要指定更多信息，可以包括在内。例如，[塞尔维亚语](http://en.wikipedia.org/wiki/Serbian_language)可以用 Latin 或[Cyrillic](http://en.wikipedia.org/wiki/Cyrillic_script)书写，因此塞尔维亚语中的塞尔维亚语可以是 sr-Latn-CS 或 sr-Cyrl-CS。厄立特里亚的提格里尼亚语写成ti-ER。

有多种不同的格式可用于定义特定语言环境所具有的规则。Windows 使用 NLP 文件，这是一种可以使用[Microsoft Locale Builder](http://msdn.microsoft.com/en-us/magazine/cc163506.aspx)创建的自定义格式。可以使用[localedef](http://pubs.opengroup.org/onlinepubs/009695399/basedefs/xbd_chap07.html)创建 POSIX (Unix/Linux) 语言环境。如今，许多系统正在转向[Unicode 通用语言环境数据注册表](http://cldr.unicode.org/)，它指定了语言环境数据的标准化格式以及世界上许多语言的语言环境综合数据库。[ICU](http://site.icu-project.org/)是一个用于 C 和 Java 的库（并被许多其他环境使用），用于根据 Unicode 规则和语言环境数据处理 Unicode 文本；他们有一个很好的[浏览器](http://demo.icu-project.org/icu-bin/locexp)对于来自 CLDR 的数据和他们自己的语言环境数据。例如，看看他们对[ti-ER](http://demo.icu-project.org/icu-bin/locexp?d_=en&_=ti_ER)的条目。

最后，为了完全支持一种语言，您需要将软件本身翻译成该语言。当然，有很多软件，每个软件都包含许多需要翻译的字符串。有些软件不是为翻译而设计的；它还没有被[国际化](http://en.wikipedia.org/wiki/Internationalization_and_localization)。有些软件只能由创建它的人翻译；字符串内置在程序中，第三方无法轻易修改。但是可以将某些软件本地化，将其翻译成您的语言和文化。如果该软件已经针对其他几种语言和文化进行了本地化，则它可能足够灵活以支持一种新语言，并且如果它使用易于修改本地化信息的格式，则可以由第三方进行修改。

例如，Mac OS X 上的应用程序将其本地化数据存储在应用程序包内的单独文件中。有一个名为 AppleGlot 的工具（您需要注册[Mac 开发者计划](https://developer.apple.com/)并前往下载区域找到它），它可以帮助您提取数据，提供包含所有需要翻译的字符串的文件，并允许您一旦拥有，就可以再次将其与应用程序结合起来。对于开源软件，例如 Linux 上可用的许多软件，您可以与开发人员合作提供翻译。一些软件使用[gettext](http://www.gnu.org/software/gettext/manual/gettext.html)作为翻译字符串，它使用 PO 文件格式，您可以使用[poedit](http://www.poedit.net/)进行编辑。有些使用 Qt，您可以使用[Qt Linguist](http://doc.qt.digia.com/qt/linguist-manual.html). 或者为了处理多种格式，您可以使用诸如[Swordfish](http://www.maxprograms.com/products/swordfish.html)或[Transifex](https://www.transifex.com/)之类的商业产品。

当然，没有人能做到以上所有；在现代计算机系统上建立对新语言的支持需要许多人的共同努力。这一切都旨在成为对给定语言的语言支持的所有组件的高级导览，其参考资料将帮助您跟进您想要处理的任何方面，并展示已经完成的工作适用于 Tigrinya 和 Ge'ez 脚本。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-24T07:56:15.680

如今，在网页上使用埃塞俄比亚字符主要是字体问题。（您可能也无法方便地输入它们，但这取决于您的创作环境使用例如 Windows 7 的人至少有一种包含它们的字体，但旧计算机通常缺少此类字体。以下字体包含它们（可能还有其他字体） ：

[Code 2000](http://en.wikipedia.org/wiki/Code2000)，是免费软件，作者已经消失，所以状态模糊

[Unifont](http://unifoundry.com/unifont.html) , 免费的位图字体

[FreeSerif](http://www.gnu.org/software/freefont/)，一种免费字体

[Nyala](http://en.wikipedia.org/wiki/Nyala_%28typeface%29) , 随 Windows 的某些版本一起分发

[SunExt-A](http://www.alanwood.net/downloads/index.html) , 免费字体

[Fixedsys Excelsior](http://www.fixedsysexcelsior.com/)，我想是一种免费的位图字体（尚未测试）

我可能会使用 FreeSerif 作为可下载字体，使用`@font-face`.

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-24T06:05:04.150

如果它们是 Unicode 字符，它们应该可以像任何其他语言的字符一样显示。我用谷歌搜索并找到了这个，希望它们与您所询问的相同：

የ ዩ ዪ ያ ዬ ይ ዮ</p>

ዸ ዺ ዻ ዼ ዽ ዾ</p>

看？在网络浏览器或其他程序上显示它们不需要额外的工作。

* * *

这些是来自 Unicode Ethiopic 集 (U+1200..U+137C) 的字符，以 UTF-8 编码：

第 1 行：

*   የ = 0xE1 0x8B 0xA8 = U+12E8 = ETHIOPIC 音节 YA
*   ዩ = 0xE1 0x8B 0xA9 = U+12E9 = 埃塞俄比亚语音节 YU
*   ዪ = 0xE1 0x8B 0xAA = U+12EA = 埃塞俄比亚语音节 YI
*   ያ = 0xE1 0x8B 0xAB = U+12EB = 埃塞俄比亚语音节 YAA
*   ዬ = 0xE1 0x8B 0xAC = U+12EC = ETHIOPIC SYLLABLE YEE
*   ይ = 0xE1 0x8B 0xAD = U+12ED = ETHIOPIC 音节 YE
*   ዮ = 0xE1 0x8B 0xAE = U+12EE = 埃塞俄比亚语音节 YO

第 2 行：

*   ዸ = 0xE1 0x8B 0xB8 = U+12F8 = 埃塞俄比亚语音节 DDA
*   ዺ = 0xE1 0x8B 0xBA = U+12FA = 埃塞俄比亚语音节 DDI
*   ዻ = 0xE1 0x8B 0xBB = U+12FB = ETHIOPIC SYLLABLE DDAA
*   ዼ = 0xE1 0x8B 0xBC = U+12FC = ETHIOPIC SYLLABLE DDEE
*   ዽ = 0xE1 0x8B 0xBD = U+12FD = ETHIOPIC SYLLABLE DDE
*   ዾ = 0xE1 0x8B 0xBE = U+12FE = ETHIOPIC SYLLABLE DDO

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-09-16T08:27:04.257

刚刚遇到同样的问题，但有一个简单的解决方案：谷歌现在提供多种语言的网络字体，还有埃塞俄比亚语： [http ://www.google.com/fonts/earlyaccess](http://www.google.com/fonts/earlyaccess)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-05-01T09:11:54.757

要在 Web 表单中编写阿姆哈拉语或 Tigrigna，您可以简单地在[https://addons.mozilla.org/en-US/firefox/addon/any-key/](https://addons.mozilla.org/en-US/firefox/addon/any-key/)上使用 Any Key firefox add并且还有 chrome ！

但是要使用 javascript 创建一个编辑器，您可以在这里看到一个站点[http://www.lexilogos.com/keyboard/amharic.htm](http://www.lexilogos.com/keyboard/amharic.htm)并尝试弄清楚他们是如何实现它的！

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-06-22T12:24:29.533

你可能想看看 [http://senamirmir.org/](http://senamirmir.org/)

除非我错了，否则它已经完成了您想做的事情。如果你不喜欢他们的字体 SIL Abyssinica 也应该没问题（但它只包含一种书写风格）。

布局状态因系统而异，要针对 *nix 之类的系统，您需要在 [http://www.freedesktop.org/wiki/Software/XKeyboardConfig/中合并布局](http://www.freedesktop.org/wiki/Software/XKeyboardConfig/)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-05-27T14:35:50.680

@Samaya，现在您可能已经得到了您正在寻找的答案。但让我放弃我的想法。根据您最初的问题，我认为您正在尝试开发一个小软件，可以选择作为实用程序（作为一项功能）并用于显示 Geez 字母，而无需安装单独的 Geez 应用程序。为此，我认为，实用程序应用程序的开发方式应使其可以被选为操作系统中的功能（语言功能）（例如 Windows 中的阿姆哈拉语）。但是，您随后的评论似乎更侧重于在网络上显示 Geez 字符。正如许多人所建议的那样，我们已经拥有该功能。但是如果你还想为它开发一个应用程序，我建议您使用 unicode（例如 U1260-በ）数组和您从键盘选择的匹配转录数组（例如 be - በ）。然后，您的应用程序将在输入键盘键时使用转录数组并将它们与 unicode 匹配以在 Geez 中显示正确的字母表。不确定我是否完全理解您在寻找什么，但我自己和同事做了一个项目，其中包括针对特定应用程序的此类工作。顺便问一下，您是否必须安装 Geez 软件才能查看基于 Tigrigna/Geez 成绩单的网站？如果是这样，请检查您的浏览器版本。正在寻找，但我自己和同事做了一个项目，其中包括针对特定应用程序的此类工作。顺便问一下，您是否必须安装 Geez 软件才能查看基于 Tigrigna/Geez 成绩单的网站？如果是这样，请检查您的浏览器版本。正在寻找，但我自己和同事做了一个项目，其中包括针对特定应用程序的此类工作。顺便问一下，您是否必须安装 Geez 软件才能查看基于 Tigrigna/Geez 成绩单的网站？如果是这样，请检查您的浏览器版本。

# android - Android 从 A 的线程调用活动 B 的方法

> ID：13538686
> 
> 赞同：0
> 
> 时间：2012-11-24T05:51:01.843
> 
> 标签：android, multithreading, user-interface, android-activity

我有一个主活动 A，我在其中创建了一个后台线程来从数据库加载数据。加载完成后，我想更新可能已经显示在子活动 B 中的列表（如果用户同时导航到 B）。如果用户还没有导航到 B，这不是问题。

但是一旦 A 中的线程完成，如何更新 B 的列表呢？

B 是 A 的孩子。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T06:18:05.150

首先将列表设置为空。您可以将用户带到活动B。存储列表数据的内容并使用静态列表填充列表，当后台线程不完整时该列表为空。一旦从 db 加载完成，调用列表适配器的 notifydatasetchanged() 方法。

实现后台线程的一种简单方法是异步任务。您可以通过覆盖相应的方法来定义异步任务的不同阶段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T11:32:46.207

谢谢伊姆兰，

我通过在一个单独的类中创建一个 IntentService 来处理它（内部类不工作），然后从 A 启动它。工作完成后，我从 B 的广播接收器正在侦听的 IntentService 发射一个广播。它最终会更新列表。

这是代码：

在 A 类中，只需在 for ex OnCreate() 中启动 IntentService：

```
Intent contactIntent = new Intent(this, ContactLoaderService.class);
        startService(contactIntent); 
```

创建 IntentService 像（在一个单独的类中）：

```
public class ContactLoaderService extends IntentService {
    public ContactLoaderService() {
        super("ContactLoaderService");
    }

    @Override
    protected void onHandleIntent(Intent arg0)
    {
        populateContacts();

        Intent broadcastIntent = new Intent();
        broadcastIntent.setAction(ContactsResponseReceiver.ACTION_RESP);
        broadcastIntent.addCategory(Intent.CATEGORY_DEFAULT);
        sendBroadcast(broadcastIntent);
    }
} 
```

在 BI 类中创建一个内部类，它只更新列表，如：

```
public class ContactsResponseReceiver extends BroadcastReceiver {
    public static final String ACTION_RESP = "com.a.b.c.ContactsLoaded";

    @Override
    public void onReceive(Context context, Intent intent) {
        mCurrentAdapter.notifyDataSetChanged();
    }
} 
```

在 B 中，不要忘记注册接收者。在 B 的 onCreate() 方法中：

```
IntentFilter filter = new IntentFilter(ContactsResponseReceiver.ACTION_RESP);
filter.addCategory(Intent.CATEGORY_DEFAULT);
receiver = new ContactsResponseReceiver();
registerReceiver(receiver, filter); 
```

以及 AndroidManifest.xml 中通常的服务标签

```
<service android:name="com.a.b.c.ContactLoaderService"> </service> 
```

# ios6 - 根据条件从同一个按钮调用两个不同的控制器

> ID：13538688
> 
> 赞同：1
> 
> 时间：2012-11-24T05:51:15.347
> 
> 标签：ios6, storyboard, segue, controllers

在 iOS6 之前我有以下代码工作，但我找不到使用 iOS6、故事板和 Xcode 4.5 的简单方法

```
-(IBAction) ButtonPressed:(id)sender{

    if(condition == 1]) {

        FirstController *firstController = [[FirstController alloc]initWithNibName:nil bundle:nil];
        firstController.delegate = self;
        firstController.modalTransitionStyle = UIModalTransitionStyleFlipHorizontal;
        [self presentViewController:firstController animated:NO completion:nil];
        [firstController release];
    }

    SecondController *secondController = [[SecondController alloc]initWithNibName:nil bundle:nil];
        secondController.delegate = self;
        secondController.modalTransitionStyle = UIModalTransitionStyleFlipHorizontal;
        [self presentViewController:secondController animated:NO completion:nil];
        [secondController release];

} 
```

这曾经工作得很好。如果我将代码保留在 iOS6 中，则所有控制器都不会正确显示。尝试将控制器导航转换到情节提要也无济于事，因为看起来我只能使用一个动作来触发使用从 ButtonPressed 到其中一个或另一个的模态 segue 的转换。在第二个控制器的viewdiload中嵌入第一个控制器有其自身的问题。如果它在 viewdidload 上，将无法像其他人所经历的那样正常工作。如果我把它放在 viewdidappear 上，第二个控制器将首先出现，创建一个令人不快的 UI。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T04:42:06.050

一个视图控制器一次只能呈现一个视图控制器。需要一种不同的方法。例如，您可以使用导航视图控制器来完成您希望完成的任务。如果用户已登录，则将上传视图控制器设置为导航视图控制器的根视图控制器。如果用户未登录，则将根视图控制器设置为登录视图控制器。当用户登录时，登录视图控制器将在其委托中通知用户已登录，然后您可以将上传视图控制器推送到导航堆栈中。

```
- (IBAction)buttonPressed:(id)sender{

    UINavigationController* nvc;

    if(condition == 1) {
        FirstController *firstController = [[FirstController alloc]initWithNibName:nil bundle:nil];
        firstController.delegate = self;
        firstController.modalTransitionStyle = UIModalTransitionStyleFlipHorizontal;
        nvc = [[UINavigationController alloc] initWithRootViewController:firstController];
        [firstController release];
    }
    else {
        SecondController *secondController = [[SecondController alloc]initWithNibName:nil bundle:nil];
        secondController.delegate = self;
        secondController.modalTransitionStyle = UIModalTransitionStyleFlipHorizontal;
        nvc = [[UINavigationController alloc] initWithRootViewController:secondController];
        [secondController release];
    }

    [self presentViewController:nvc animated:YES completion:nil];

    [nvc release];
}

//Login view controller delegate method
- (void)loginViewControllerDidLoginSuccessfully:(FirstController*)loginViewController{
    SecondController *secondController = [[SecondController alloc]initWithNibName:nil bundle:nil];
    secondController.delegate = self;
    secondController.modalTransitionStyle = UIModalTransitionStyleFlipHorizontal;
    [secondController.navigationItem setHidesBackButton:YES];
    [loginViewController.navigationController pushViewController:secondController animated:YES];
    [secondController release];
} 
```

# objective-c - 如何使用 .PHP 地址从 Web 服务器请求并获取 XML 格式的响应 - Objective C

> ID：13538690
> 
> 赞同：0
> 
> 时间：2012-11-24T05:51:51.523
> 
> 标签：objective-c, ios, ios5, xcode4.2

基本上，我在这里需要做的是通过注册我已经完成的设备 (iPAD) 从 Web 服务器下载 XML 文件。

所以，我想这样做：

1.  我请求服务器给我文件，'....getfile.php?key'
2.  如果文件已准备好导出，我们会收到“OK”的确认
3.  发送请求“..downloadfile.php”
4.  获得包含文件大小和其他信息的响应。
5.  发送请求并下载文件-'DownloadFile.php'。
6.  发送响应下载完成并获取完成。

我该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T09:10:18.460

与 Web 服务器交互时，您应该研究[URL 加载系统编程指南](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/URLLoadingSystem/URLLoadingSystem.html#//apple_ref/doc/uid/10000165i)[`NSURLConnection`](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSURLConnection_Class/Reference/Reference.html)中讨论的内容。如果您想简化编码工作，可以使用[RestKit](http://restkit.org)、[AFNetworking](https://github.com/AFNetworking/AFNetworking)或类似的框架。

在我看来，您似乎描述了与服务器的两种类型的交互。首先，您有一个对 XML 响应的请求，以及对该响应的解析。这相对容易。您只需创建一个[`NSXMLParser`](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSXMLParser_Class/Reference/Reference.html)using [`initWithContentsOfURL`](https://developer.apple.com/library/ios/documentation/Cocoa/Reference/Foundation/Classes/NSXMLParser_Class/Reference/Reference.html#//apple_ref/occ/instm/NSXMLParser/initWithContentsOfURL%3a). 解析 XML 的 iOS 应用程序最流行的演示是 RSS 阅读器，如果您在 Google 上搜索“iOS RSS 教程”，您将获得很多精彩的点击。另请参阅我的示例[新闻解析器](https://github.com/robertmryan/yahoo-news)作为示例。您也可以在 Google 上搜索“NSXMLParser 教程”，但点击次数似乎不那么引人注目。

其次，您有一个下载文件的请求。如果文件非常小（例如，以 kb 为单位，而不是 mb 或 gb），这很容易。您只需将[`dataWithContentsOfURL`](https://developer.apple.com/library/ios/documentation/Cocoa/Reference/Foundation/Classes/NSData_Class/Reference/Reference.html#//apple_ref/occ/clm/NSData/dataWithContentsOfURL%3a)其加载到 a`NSData`中，然后执行 a[`writeToFile`](https://developer.apple.com/library/ios/documentation/Cocoa/Reference/Foundation/Classes/NSData_Class/Reference/Reference.html#//apple_ref/occ/instm/NSData/writeToFile%3aatomically%3a)将其保存到文件中。就这两行代码。

但是，如果文件更大，它会变得更复杂，因为您可能不想将文件保存在内存中，并且您可能想要一些下载进度通知。我不确定上述第三方库是否这样做。我有一个[`NSURLConnection`下载示例](https://github.com/robertmryan/download-manager)，或者您可以谷歌搜索“NSURLConnection 下载教程”。

# sql - sql查询计算重复项

> ID：13538692
> 
> 赞同：5
> 
> 时间：2012-11-24T05:52:15.150
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我的结果是：

```
Code    Declaration 
123     a1 - 2nos
123     a2 - 230nos
123     a3 - 5nos
123     a1 - 100nos
123     a3 - 6nos 
```

是否可以对重复项求和，我需要像这样显示输出：

```
Code    Declaration
123     a1 - 102nos
123     a2 - 230nos
123     a3 - 11nos 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-24T13:12:44.273

我是根据您发布的[上一个问题来回答这个问题的。](https://stackoverflow.com/questions/13527537/sql-query-to-split-column-data-into-rows)这是一个 CTE 版本，它将拆分数据并将它们汇总到声明中：

```
;with cte (code, DeclarationItem, Declaration) as
(
  select Code,
    cast(left(Declaration, charindex(',',Declaration+',')-1) as varchar(50)) DeclarationItem,
         stuff(Declaration, 1, charindex(',',Declaration+','), '') Declaration
  from yourtable
  union all
  select code,
    cast(left(Declaration, charindex(',',Declaration+',')-1) as varchar(50)) DeclarationItem,
    stuff(Declaration, 1, charindex(',',Declaration+','), '') Declaration
  from cte
  where Declaration > ''
),
s2 as
(
  select code, 
    ltrim(rtrim(left(declarationitem, charindex('-', declarationitem)-1))) col1
    , reverse(left(reverse(declarationitem), charindex('-', reverse(declarationitem))-1)) col2
  from cte
),
fnl as
(
  select code, col1,
    left(col2, patindex('%[Aa-Zz]%', col2)-1) value,
    substring(col2, patindex('%[Aa-Zz]%', col2), len(col2)) str
  from s2
) 
select code, col1 +' - '+ cast(sum(cast(value as int)) as varchar(50)) + str as declarationitem
from fnl
group by code, col1, str 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/82d50/42)

结果是：

```
| CODE | DECLARATIONITEM |
--------------------------
|  123 | 123 a1 - 102nos |
|  123 | 123 a2 - 230nos |
|  123 |  123 a3 - 11nos | 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-25T02:58:23.687

```
Declare @t Table([Code] int, [Declaration] varchar(max))    
Insert Into @t VALUES (123,'a1 - 2nos'),(123,'a2 - 230nos'),(123,'a3 - 5nos'),(123,'a1 - 100nos'),(123,'a3 - 6nos')

;With Cte As(
Select 
    Code
    ,Substring([Declaration],0,PatIndex('%-%',[Declaration])) Part1 
    ,Cast(Substring(LTRIM(RTRIM(Substring([Declaration],PatIndex('%-%',[Declaration])+1,Len([Declaration])))),0,PatIndex('%nos%',LTRIM(RTRIM(Substring([Declaration],PatIndex('%-%',[Declaration])+1,Len([Declaration])))))) As Int) Part2
From @t)
Select Code,Part1 + '-' +  Cast(Sum(Part2) AS Varchar(10)) + 'nos' As Declaration
From Cte
Group By Code,Part1 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-25T12:36:38.807

```
SELECT Code, SUBSTRING(Declaration, 0, CHARINDEX('-', Declaration) + 2) + 
             CAST(SUM(SUBSTRING(Declaration,
                                CHARINDEX('-', Declaration) + 2, 
                                PATINDEX('%[Aa-Zz]%', SUBSTRING(Declaration, 
                                                                CHARINDEX('-', Declaration) + 2,
                                                                LEN(Declaration)
                                                                )
                                         ) - 1
                                ) + 0) AS varchar(max)) + 
             REVERSE(SUBSTRING(REVERSE(Declaration), 0, PATINDEX('%[0-9]%', REVERSE(Declaration)))) AS Decalration
FROM your_table
GROUP BY Code, 
         SUBSTRING(Declaration, 0, CHARINDEX('-', Declaration) + 2),
         REVERSE(SUBSTRING(REVERSE(Declaration), 0, PATINDEX('%[0-9]%', REVERSE(Declaration)))) 
```

[**SQLFiddle**](http://sqlfiddle.com/#!3/6ede4/1/0)上的演示[](http://sqlfiddle.com/#!3/6ede4/1/0)

# objective-c - 单击按钮时如何传递对象

> ID：13538696
> 
> 赞同：0
> 
> 时间：2012-11-24T05:52:42.583
> 
> 标签：objective-c, ios, xcode

我有一个带有按钮的自定义表格视图单元格。单击按钮时，我需要传递 tablview 的 NSIndexPath 对象。我能做的是将标签分配给按钮，使用发件人接收标签..但我想传递 NSIndexPath 对象...下面是代码。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
 {
   static NSString *CellIdentifier = @"shortCodeCell";
   IPadTableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
   if (cell == nil)
   {
        NSArray *topLevelObjects = [[NSBundle mainBundle] loadNibNamed:@"KeywordsCell"     owner:nil options:nil];

        for (id currentObject in topLevelObjects)
        {   
            if ([currentObject isKindOfClass:[IPadTableViewCell class]])
            {
                cell = (IPadTableViewCell  *)currentObject;
            }
        }
    }
    // Delete
    [cell.btnDelete addTarget:self action:@selector(onDelete:) forControlEvents:UIControlEventTouchUpInside];

    cell.btnDelete.tag=indexPath.row;

    return cell;
}

-(void)onDelete:(id)sender
{   
     UIButton *btn=(UIButton *)sender;
     NSLog(@"BtnIndexpath to be deleted:%d",btn.tag);
     dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_LOW, 0), ^{
     int errorCode = 0;
     kd = [items objectAtIndex:btn.tag];
     BOOL isDeleteKeyword= [ServerAPI deleteKeywordWithId:kd.keywordId :&errorCode];
     dispatch_async (dispatch_get_main_queue (),
                    ^{
                        if (isDeleteKeyword) {
                            [items removeObjectAtIndex:btn.tag];
                            //[tblKeywords deleteRowsAtIndexPaths:[NSArray arrayWithObject:btnIndexPath] withRowAnimation:YES];
                            [self.tblKeywords reloadData];
                        }
                        else return;
                    });
    });
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T06:04:26.237

您可以在“cellForRowAtIndexPath”中设置以下内容

```
cell.tag = indexPath.section; 
cell.btnDelete.tag=indexPath.row; 
```

在“onDelete”中，您可以根据分配的标签创建 indexPath。

```
NSIndexPath *indexPath = [NSIndexPath indexPathForRow:[sender tag] inSection:[[sender superview] tag]] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T06:13:43.317

```
// I assume your UITableView called tableView
// Using this way you don't need to use tag
-(void)onDelete:(id)sender
{
    UITableViewCell *cell = (UITableViewCell *)[sender superview];
    NSIndexPath *indexPath = [self.tableView indexPathForCell:cell];
} 
```

# java - 地图对?? 用于存储姓名和分数

> ID：13538697
> 
> 赞同：2
> 
> 时间：2012-11-24T05:52:44.303
> 
> 标签：java, list, collections, hashmap

我使用 hashmap 来存储数据。问题是我刚刚注意到 hashmap 不能有多个相同的键。我还应该使用什么来存储数据看起来像这样的数据：

*   名称1 100.0
*   名称2 99.8
*   名称3 121.5
*   ...

我想做的另一件事是在我调用那个键时显示某个人的数据。那么，有没有办法存储与一个键相关的多个值？还是我应该使用其他类型的存储？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T05:54:28.060

如果您将值存储在另一个数据结构（例如链表或每个键索引处的树）中，则哈希图可能具有重复键。然后你只需要决定如何处理碰撞。

**编辑：**

哈希映射

```
["firstKey"] => LinkedList of (3,4,5)
["secondKey"] => null
["thirdKey"] => LinkedList of (3) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T06:09:01.430

The Google guava library contain some collection type that allow for more that one element per key. The `Multimap` is the first one that come to mind.

[http://docs.guava-libraries.googlecode.com/git-history/release/javadoc/com/google/common/collect/Multimap.html](http://docs.guava-libraries.googlecode.com/git-history/release/javadoc/com/google/common/collect/Multimap.html)

Guava in general contain a lot of very convenient utilities, I think its worth checking out.

If you can't use an external library, you can simply (Like Matthew Cox said) mix a map and a List with `Map<K, List<V>>`. But that is a bit more inconvenient to work with since you have to initialise a list for every key.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-24T05:57:01.223

要扩展 Matthew Coxes 的答案，您可以扩展 Hashtable 类，以便它自动为您管理列表，并让您看起来拥有多个键。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-24T08:14:48.127

我宁愿使用我自己的数据模型并将其存储在列表中，或者如果您想要快速访问，则映射，例如

```
public class Player {
    private String name;
    private List<Float> scores;
} 
```

优点：

*   你可以很容易地看到，这个结构想要表达什么
*   您可以轻松扩展它（例如为玩家添加别名，或计算玩家 1 的平均得分）

# php - 允许 alpha_numeric 和符号 preg_match PHP

> ID：13538699
> 
> 赞同：0
> 
> 时间：2012-11-24T05:52:54.653
> 
> 标签：php, regex, preg-match

我有以下功能

```
public function alpha_custom($str) {
   return (! preg_match("/^([-a-z0-9_-])+$/i", $str)) ? FALSE : TRUE;
} 
```

因此，如果字符串包含除字母数字字符、下划线或破折号以外的任何内容，那么它将返回 false。

现在我想添加以下内容：

1.  `SPACE`
2.  `&`
3.  `(`和`)`
4.  `.`（时期 ）

请帮我。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T06:00:16.277

`return (preg_match('/[^a-z_\(\)\.\&\ \-0-9]/i', $str)) ? FALSE : TRUE;`

**编辑** 我用它来检查它对我有用

```
function alpha_custom($str)
{
   return (preg_match('/[^a-z_\(\)\.\&\ \-0-9]/i', $str)) ? 'FALSE' : 'TRUE';
}

echo alpha_custom('ravi._ &'); 
```

# javascript - 如何从模型弹出窗口中打开弹出窗口？

> ID：13538701
> 
> 赞同：0
> 
> 时间：2012-11-24T05:53:13.617
> 
> 标签：javascript, jquery

```
window.open 
```

当我从模型弹出窗口中调用它时，上述方法不起作用。是否有任何替代方法可以在模型弹出窗口中打开弹出窗口？预先感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T06:46:19.310

您只需再次调用您的模型弹出窗口，它就会起作用，如果您设置当前弹出窗口类型，它会将您当前的弹出窗口视为父窗口`iframe`。它不适用于ajax

# c# - 将数据保存到多个表中

> ID：13538702
> 
> 赞同：1
> 
> 时间：2012-11-24T05:53:28.703
> 
> 标签：c#, nhibernate-mapping, one-to-many

我有 2 个与 nhibernate 一起使用的数据库表和类结构，如下所示。

D B

![在此处输入图像描述](../Images/2c6f1de27ac390375e4231906da83af0.png)

C# poco 类如下。

**客户类**

```
public class Customer
{
    public virtual int CustomerID { get; set; }
    public virtual string CustomerName { get; set; }
    public virtual string Title { get; set; }
    public virtual string FirstName { get; set; }
    public virtual string LastName { get; set; }
    public virtual string Mobile { get; set; }
    public virtual string Phone { get; set; }
    public virtual string Email { get; set; }

    public virtual Address BillingAddress { get; set; }
    public virtual Address ShippingAddress { get; set; }
} 
```

**地址类**

```
public class Address
{
    public virtual int AddressID { get; set; }
    public virtual string AddressLine { get; set; }
    public virtual string City { get; set; }
    public virtual string State { get; set; }
    public virtual int ZIP { get; set; }
    public virtual string Fax { get; set; }
    public virtual string Country { get; set; }
} 
```

**映射文件**

客户.hbm.xml

```
 <class name="Customer" table="Customers">
    <id name="CustomerID">
      <generator class="native" />
    </id>
    <property name="CustomerName" length="100" />
    <property name="Title" length="10" />
    <property name="FirstName" length="60" />
    <property name="LastName" length="60" />
    <property name="Mobile" length="15" />
    <property name="Phone" length="15" />
    <property name="Email" length="100" />
    <many-to-one name="BillingAddress" class="Address" />
    <many-to-one name="ShippingAddress" class="Address" />
  </class> 
```

地址.hbm.xml

```
 <class name="Address" table="Addresses">
    <id name="AddressID">
      <generator class="native" />
    </id>
    <property name="AddressLine" length="255" />
    <property name="City" length="30" />
    <property name="State" length="30" />
    <property name="ZIP" />
    <property name="Fax" length="15" />
    <property name="country" length="50" />
  </class> 
```

我正在使用 nhibernate 会话创建数据库表。表创建良好。使用上述结构，如果我想保存指定了 2 个地址类型的客户，如何将 1 个客户保存到客户表和 2 个地址到地址表？请参阅以下示例代码。

```
Address b_address = new Address();
Address s_address = new Address();
Customer customer = new Customer();

b_address.addressLine = "No.23, New Road";
b_address.City = "Newyork";
// more data

s_address.addressLine = "No.54, Old Road";
// more data

customer.CustomerName = "David";
// more customer data
customer.BillingAddress = b_address;
customer.ShippingAddress = s_address;

//saving the session.
session.save(customer) 
```

上面的代码只将数据插入到客户表中。我如何将这个插入数据同时插入到客户和地址表中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T06:10:03.483

我们需要`casacde`发挥设置。只需以这种方式更改多对一映射：

```
<many-to-one name="BillingAddress" class="Address" cascade="all"  />
<many-to-one name="ShippingAddress" class="Address" cascade="all"  /> 
```

这将允许 NHibernate 持久化新的`Address`es 并更新现有的，同时只调用`Customer`要保存/更新的实例。

# html - Crisp SVG 图形跨浏览器

> ID：13538709
> 
> 赞同：3
> 
> 时间：2012-11-24T05:54:07.690
> 
> 标签：html, svg, cross-browser

我一直在尝试找到一套可靠的规则来编写清晰的跨浏览器 SVG 图形。通过反复试验，我想出了：http: [//jsfiddle.net/WyYw6/2/](http://jsfiddle.net/WyYw6/2/)

```
<p>C &nbsp;FF  &nbsp;IE  &nbsp;S</p>
<!-- x in Chrome -->
<svg width="15" height="15" overflow="hidden"><defs></defs><g><path d="M 4 4 L 11 11 M    11 4 L 4 11 Z" stroke="#000" stroke-width="1" fill="none" shape-rendering="crispEdges"></path></g></svg>

<!-- x in Firefox -->
<svg width="15" height="15" viewBox="-0.5 -0.5 15 15" overflow="hidden"><defs></defs><g><path d="M 4 4 L 11 11 M 11 4 L 4 11 Z" stroke="#000" stroke-width="1" fill="none" shape-rendering="crispEdges"></path></g></svg>

<!-- x in IE 9+ -->
<svg width="15" height="15" viewBox="0.5 0.5 15 15" overflow="hidden"><defs></defs><g><path d="M 4 4 L 11 11 M 11 4 L 4 11 Z" stroke="#000" stroke-width=".5" fill="none"></path></g></svg>

<!-- x in Desktop Safari -->
<svg width="15" height="15" overflow="hidden" viewBox="0.5 0.5 15 15"><defs></defs><g><path d="M 4 4 L 11 11 M 11 4 L 4 11 Z" stroke="#000" stroke-width="1" fill="none" shape-rendering="crispEdges"></path></g></svg>

<br>
<!-- square in Chrome -->
<svg width="15" height="15" overflow="hidden"><defs></defs><g><path d="M 1 1 M 11 1 L 11 11 L 1 11 L 1 1 Z" stroke="#000" stroke-width="1" fill="none"  shape-rendering="crispEdges"></path></g></svg>

<!-- square in Firefox -->
<svg width="15" height="15" overflow="hidden"  viewBox="-0.5 -0.5 15 15"><defs></defs><g><path d="M 1 1 M 11 1 L 11 11 L 1 11 L 1 1 Z" stroke="#000" stroke-width="1" fill="none"  shape-rendering="crispEdges"></path></g></svg>

<!-- square in IE9+ -->
<svg width="15" height="15" overflow="hidden"  viewBox="-0.5 0 15 15"><defs></defs><g><path d="M 1 1 M 11 1 L 11 11 L 1 11 L 1 1 Z" stroke="#000" stroke-width="1" fill="none"></path></g></svg>

<!-- square in Safari -->
<svg width="15" height="15" overflow="hidden"><defs></defs><g><path d="M 1 1 M 11 1 L 11 11 L 1 11 L 1 1 Z" stroke="#000" stroke-width="1" fill="none"  shape-rendering="crispEdges"></path></g></svg> 
```

我想整合它，以便我可以使用单个 SVG 描述来创建一个可以跨浏览器工作的形状。我最喜欢它在 Chrome 中的显示方式。如果无法做到这一点，我希望遵循一套一致的规则来在浏览器中制作清晰的 SVG 形状。我还想在 IE 中获得更好的结果——我使线宽更小。在 Safari 中，我无法弄清楚如何获得清晰的 x。

# php - 字符串组合匹配

> ID：13538710
> 
> 赞同：4
> 
> 时间：2012-11-24T05:54:19.373
> 
> 标签：php, string

假设一个字符串：

`$str = 'a_b_c';`

我想匹配上面所有可能的组合`a, b, c`。例如：

`b_a_c`, `c_a_b`, `a_c_b`..etc 将`true`与上述比较时给出`$str`。

**笔记：**

`$str`可能是随机的。例如：`a_b`等`k_l_m_n`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-24T06:01:09.053

我会将您的字符串拆分为一个数组，然后将其与要匹配的元素数组进行比较。

```
$originalList = explode('_', 'a_b_c');
$matchList = array('a', 'b', 'c');
$diff = array_diff($matchList, $originalList);
if (!empty($diff)) {
    // At least one of the elements in $matchList is not in $originalList
} 
```

谨防重复元素和不重复元素，具体取决于数据的输入方式。

文档：

*   [`array_diff()`](http://php.net/manual/en/function.array-diff.php)
*   [`explode()`](http://php.net/manual/en/function.explode.php)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-24T06:03:04.913

没有内置的方法可以快速做到这一点。您的任务可以通过许多不同的方式完成，它们的一般程度会有所不同。你没有提到空值或检查字符串的格式，所以这样的事情可能适合你的目的：

```
function all_combos($str,$vals) {
  $s=explode("_",$str);
  foreach($s as $c) {
    if(!in_array($s,$vals)) return false;
  }
  return true;
} 
```

打电话喜欢`all_combos("b_c_a",array("a","b","c"));`

# php - 将数组合并到另一个数组中

> ID：13538713
> 
> 赞同：-4
> 
> 时间：2012-11-24T05:54:53.373
> 
> 标签：php, arrays

我需要将一个关联数组合并到另一个关联数组中。我知道 php 的 array_merge 但它返回一个新数组。那不是我想要的。

例如

```
$ar1 = array('one'=>1, 'two'=>2, 'three'=>3);
$ar2 = array('four'=>4, 'five'=>5); 
```

我想知道是否有一个 php 函数可以用来将 $ar2 合并到 $ar1 中。结果应该是，

```
$ar1 = array('one'=>1, 'two'=>2, 'three'=>3, 'four'=>4, 'five'=>5); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T06:00:35.840

```
$ar1 = array('one'=>1, 'two'=>2, 'three'=>3);
$ar2 = array('four'=>4, 'five'=>5); 
```

利用`array_merge`

```
$array3 = array_merge($ar1,$ar2); 
```

它将合并 2 个数组并将其存储在`$array3`. 你也可以使用`$ar1`。

工作示例[http://codepad.viper-7.com/KzCHIB](http://codepad.viper-7.com/KzCHIB)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T06:04:43.700

```
$ar1 = array('one'=>1, 'two'=>2, 'three'=>3);
$ar2 = array('four'=>4, 'five'=>5);

$ar1 = array_merge($ar1, $ar2);

print_r($ar1); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T06:25:05.067

最**简单**的方法是将 array_merge 的输出分配给您的第一个数组。 **这是你想要的吗**

```
<?php
$ar1 = array('one'=>1, 'two'=>2, 'three'=>3);
$ar2 = array('four'=>4, 'five'=>5);

$ar1 = array_merge($ar1,$ar2);

print_r($ar1);
?> 
```

# java - Primefaces dataExporter 未以 pdf 格式导出

> ID：13538718
> 
> 赞同：2
> 
> 时间：2012-11-24T05:55:53.827
> 
> 标签：java, pdf, xhtml, primefaces, data-export

嗨，我喜欢以 pdf 格式导出整个页面，例如打印，打印工作正常但 pdf 不工作，，

kinldy 告诉我哪里错了

```
 <h:form>
               <h:commandLink>
                    <p:graphicImage value="/Images/pdf.png" />
                    <p:dataExporter type="pdf" target="export" fileName="test"/>                
                </h:commandLink>  
                <h:commandLink>  
                     <p:graphicImage value="/Images/print.png" />
                     <p:printer target="export" />  
                 </h:commandLink> 
                <h:panelGroup id="export">
_________________________
_________________________
_________________________
_________________________
_________________________
</h:panelGroup>
</h:form> 
```

我收到错误

```
 javax.servlet.ServletException: com/lowagie/text/Phrase
 java.lang.NoClassDefFoundError: com/lowagie/text/Phrase
java.lang.ClassNotFoundException: com.lowagie.text.Phrase 
```

谢谢

# android - 在android中扫描不同的内存类型

> ID：13538719
> 
> 赞同：1
> 
> 时间：2012-11-24T05:56:04.407
> 
> 标签：android, android-sdcard, android-mediascanner, android-memory

我有一些可能对其他人有用的问题。在 android 4.0 以后，

1）如何检查是否有外接sd卡支持？

2）如何在内部和外部内存中强制运行Mediascan？

3) 如何只扫描 sd 卡或内存？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T06:10:47.833

我建议阅读developer.android.com 上的[存储选项](http://developer.android.com/guide/topics/data/data-storage.html)。

检查外部存储器是否可用（取自 developer.android.com）：

```
boolean mExternalStorageAvailable = false;
boolean mExternalStorageWriteable = false;
String state = Environment.getExternalStorageState();

if (Environment.MEDIA_MOUNTED.equals(state)) {
    // We can read and write the media
    mExternalStorageAvailable = mExternalStorageWriteable = true;
} else if (Environment.MEDIA_MOUNTED_READ_ONLY.equals(state)) {
    // We can only read the media
    mExternalStorageAvailable = true;
    mExternalStorageWriteable = false;
} else {
    // Something else is wrong. It may be one of many other states, but all we need
    //  to know is we can neither read nor write
    mExternalStorageAvailable = mExternalStorageWriteable = false;
} 
```

要阅读内部文件，请[在此处](http://developer.android.com/reference/android/content/Context.html#fileList%28%29)`context.fileList();`查看更多信息。

**编辑**

我不确定你想要什么 2 和 3。你可以将 mediascan 用于许多事情，但仅将它用于使用它听起来没有效率。为此，我推荐@Singularity 建议。这里有一篇[关于使用 mediascan for pdfs](https://stackoverflow.com/q/10384080/969325)的帖子。

# java-me - 将 .java 转换为 .class

> ID：13538720
> 
> 赞同：-1
> 
> 时间：2012-11-24T05:56:23.610
> 
> 标签：java-me

> **可能重复：**
> [修改 j2me midlet](https://stackoverflow.com/questions/13538550/modifiying-j2me-midlet)

我正在尝试将此文件转换为 .class

但是得到很多错误。 [http://dl.dropbox.com/u/32657135/YourTube.jad.java](http://dl.dropbox.com/u/32657135/YourTube.jad.java)

它适用于 j2me 平台

命令使用 javac YourTube.jad.java

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T06:05:09.817

您是否有权使用此代码？

错误似乎来自于由错误的反编译器引起的问题 - 除非您有非常具体的原因要使用 Java 反编译器，否则我不得不猜测您无权访问此代码开始和。

# android - 多重通知和意图问题

> ID：13538721
> 
> 赞同：0
> 
> 时间：2012-11-24T05:56:25.700
> 
> 标签：android, android-intent, notifications, alarmmanager, statusbar

我正在开发一个应用程序，用户可以在其中安排培训日期和时间。用户可以在使用应用程序时安排多个培训日期和时间。例如，用户将安排两次培训，TR1 和 TR2。当 TR1 日期和时间匹配时，将向用户发送通知，单击该通知，用户将被引导至培训活动。TR2 在到达培训的日期和时间时也会发生同样的情况。

为了安排通知，我使用的是**AlarmManager**。我面临的问题是，如果我安排多次培训，我只会收到最后一次培训的通知。

生成**通知**的**活动**：

 **```
public class SettingsActivity extends Activity {
    //objects for use
    DateFormat fmtDateAndTime=DateFormat.getDateTimeInstance();
      TextView dateAndTimeLabel;
      Calendar dateAndTime=Calendar.getInstance();
      ImageView confirm;
      String dateTime;

      EditText duration;

      //Alarm manager object for notification
      AlarmManager am;

      //notification date and time
      int hour;
      int minute;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_settings_portrait);
        duration=(EditText)findViewById(R.id.duration_editText);
        dateAndTimeLabel=(TextView)findViewById(R.id.timeTxt);

        updateLabel();
        updateNotification();
        am = (AlarmManager) getSystemService(Context.ALARM_SERVICE);

     // On Click Confirm

            confirm=(ImageView)findViewById(R.id.confirm_imageView);
            confirm.setOnClickListener(new OnClickListener() {

                public void onClick(View v) {
                    getDateTime();

                   setOneTimeAlarm();
                }
            });

      }
      //date picker
      public void chooseDate(View v) {
        new DatePickerDialog(SettingsActivity.this, d,
                              dateAndTime.get(Calendar.YEAR),
                              dateAndTime.get(Calendar.MONTH),
                              dateAndTime.get(Calendar.DAY_OF_MONTH))
          .show();
      }
      //time picker
      public void chooseTime(View v) {
        new TimePickerDialog(SettingsActivity.this, t,
                              dateAndTime.get(Calendar.HOUR_OF_DAY),
                              dateAndTime.get(Calendar.MINUTE),
                              true)
          .show();
      }

      private void updateLabel() {
        dateAndTimeLabel.setText(fmtDateAndTime
                                  .format(dateAndTime.getTime()));
      }

      DatePickerDialog.OnDateSetListener d=new DatePickerDialog.OnDateSetListener() {
        public void onDateSet(DatePicker view, int year, int monthOfYear,
                              int dayOfMonth) {
          dateAndTime.set(Calendar.YEAR, year);
          dateAndTime.set(Calendar.MONTH, monthOfYear);
          dateAndTime.set(Calendar.DAY_OF_MONTH, dayOfMonth);
          updateLabel();
          updateNotification();
        }
      };

      TimePickerDialog.OnTimeSetListener t=new TimePickerDialog.OnTimeSetListener() {
        public void onTimeSet(TimePicker view, int hourOfDay,
                              int minute) {
          dateAndTime.set(Calendar.HOUR_OF_DAY, hourOfDay);
          dateAndTime.set(Calendar.MINUTE, minute);
          updateLabel();
          updateNotification();

        }
      };  

   // Notification Function
//      private void Notification(String notificationTitle, String notificationMessage)
//      {
//          NotificationManager notificationManager = (NotificationManager)getSystemService(NOTIFICATION_SERVICE);
//          Notification notification = new Notification(R.drawable.ic_launcher, "Training Scheduled!", System.currentTimeMillis());
//          //on click notification goto dinnerden activity
//          Intent notificationIntent = new Intent(this, SettingsActivity.class);
//          PendingIntent pendingIntent = PendingIntent.getActivity(this, 0, notificationIntent, 0);
//   
//          notification.setLatestEventInfo(SettingsActivity.this, notificationTitle, notificationMessage, pendingIntent);
//          notificationManager.notify(10001, notification);
//      }
      //getting date time from textview
      void getDateTime()
      {
         dateTime= dateAndTimeLabel.getText().toString()+" Duration HRS: "+duration.getText().toString();

         makeAToast(dateTime);
         //Notification("Training Scheduled at:",dateTime);

      }

      void updateNotification()
      {
          hour= dateAndTime.get(Calendar.HOUR_OF_DAY);
          minute=dateAndTime.get(Calendar.MINUTE);
      }

      public void setOneTimeAlarm() {

        // the time set
         Calendar calendar = Calendar.getInstance();
//          hour= dateAndTime.get(Calendar.HOUR_OF_DAY);
//          minute=dateAndTime.get(Calendar.MINUTE);
        // int hour= dateAndTime.get(Calendar.HOUR_OF_DAY);
        // int minute=dateAndTime.get(Calendar.MINUTE);
         // noon tomorrow
         //calendar.add(Calendar.DAY_OF_YEAR, 1);
         calendar.set(Calendar.HOUR_OF_DAY, hour);
         calendar.set(Calendar.MINUTE, minute);
         calendar.set(Calendar.SECOND, 0);

      Intent intent = new Intent(this, TimeAlarm.class);
      PendingIntent pendingIntent = PendingIntent.getBroadcast(this, 0,
        intent, PendingIntent.FLAG_ONE_SHOT);
      am.set(AlarmManager.RTC_WAKEUP,
       calendar.getTimeInMillis(), pendingIntent);
     }

     public void setRepeatingAlarm() {
      Intent intent = new Intent(this, TimeAlarm.class);
      PendingIntent pendingIntent = PendingIntent.getBroadcast(this, 0,
        intent, PendingIntent.FLAG_CANCEL_CURRENT);
      am.setRepeating(AlarmManager.RTC_WAKEUP, System.currentTimeMillis(),
        (5 * 1000), pendingIntent);
     }

      public void makeAToast(String str) {

        Toast toast = Toast.makeText(this,str, Toast.LENGTH_LONG);
        toast.setGravity(Gravity.BOTTOM, 0, 0);
        toast.setDuration(1000000);
        toast.show();
    }
} 
```

创建**通知**的**类**：

 **```
public class TimeAlarm extends BroadcastReceiver {

     NotificationManager nm;

     @Override
     public void onReceive(Context context, Intent intent) {
      nm = (NotificationManager) context
        .getSystemService(Context.NOTIFICATION_SERVICE);
      CharSequence from = "Scheduled Training";
      CharSequence message = "Please attend the scheduled training";
     // Intent welcomeIntent = new Intent(context, CustomAlarm.class);
      PendingIntent contentIntent = PendingIntent.getActivity(context, 0,
        new Intent(), 0);
      Notification notif = new Notification(R.drawable.ic_launcher,
        "Crazy About Android...", System.currentTimeMillis());
      notif.setLatestEventInfo(context, from, message, contentIntent);
      nm.notify(1, notif);
     }
    } 
```

**活动**的**布局**：_

 **```
<?xml version="1.0" encoding="utf-8"?>
    <ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:orientation="vertical" >

        <RelativeLayout
            android:layout_width="match_parent"
            android:layout_height="488dp" >

            <ImageView
                android:id="@+id/confirm_imageView"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignParentBottom="true"
                android:layout_centerHorizontal="true"
                android:src="@drawable/schedule_button" />

            <TextView
                android:id="@+id/timeTxt"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_alignParentLeft="true"
                android:layout_marginTop="41dp"
                android:text="@string/time_show" />

            <Button
                android:id="@+id/timeBtn"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_alignParentLeft="true"
                android:layout_below="@+id/timeTxt"
                android:layout_marginTop="34dp"
                android:onClick="chooseTime"
                android:text="@string/time" />

            <Button
                android:id="@+id/dateBtn"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_alignParentLeft="true"
                android:layout_below="@+id/timeBtn"
                android:layout_marginTop="38dp"
                android:onClick="chooseDate"
                android:text="@string/date" />

            <EditText
                android:id="@+id/duration_editText"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignParentRight="true"
                android:layout_below="@+id/dateBtn"
                android:layout_marginTop="36dp"
                android:ems="10"
                android:hint="@string/duration_hint"
                android:inputType="number" />

            <TextView
                android:id="@+id/duration_textView"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignBaseline="@+id/duration_editText"
                android:layout_alignBottom="@+id/duration_editText"
                android:layout_alignParentLeft="true"
                android:text="@string/duration"
                android:textAppearance="?android:attr/textAppearanceMedium" />

        </RelativeLayout>

    </LinearLayout>
    </ScrollView> 
```

**manifest.xml**的一部分：

```
<application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <receiver android:name="com.project.nuroq.android.app.TimeAlarm" /> 
```

我想在特定时间（已实施）和日期（尚未实施）触发通知，这现在没有发生。最后一个只会被解雇！

我哪里错了？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T08:11:54.307

您必须为每个通知使用不同的 ID。如果像您一样，所有人都将使用相同的 ID 值，那么根据[notify() 文档](http://developer.android.com/reference/android/app/NotificationManager.html#notify%28int,%20android.app.Notification%29)，前一个将被新的替换：

> 发布要在状态栏中显示的通知。如果您的应用程序已经发布了具有相同 id 的通知并且尚未取消，则它将被更新的信息替换。******

# magento - 如何在前端显示多个 megento 商店？

> ID：13538722
> 
> 赞同：0
> 
> 时间：2012-11-24T05:56:40.410
> 
> 标签：magento

我有 2 家商店，分别称为“零售”和“批发”。在添加产品时，我必须选择商店（它可以是商店，也可以是没有商店或任何一家），并且我必须为不同的商店添加价格。如果选择这两家商店，`how can I add different price for sores ?`

如何在产品中选择痛点？

添加商店时，我们选择类别，我可以在此处管理商店，但我将如何显示同一产品的不同价格？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T11:11:18.123

Magento 具有三个级别的范围（下面按优先级升序列出）：

*   全局（又名默认配置）
*   网站
*   商店（又名商店视图）

还有两个范围上下文：系统配置和实体。

请注意，并非所有 sysconfig 选项或实体数据都可以在每个级别设置。产品定价就是这样一个基准。在系统配置 > 目录中，产品价格可以配置为全局范围或网站范围，但*不能*配置商店范围。要实现类似商店范围的行为，请将定价配置为具有网站范围，将每个商店分配到自己的网站，并在网站级别设置价格。

# r - 加速 R 中的双嵌套 sapply + lmer 函数

> ID：13538725
> 
> 赞同：0
> 
> 时间：2012-11-24T05:56:59.123
> 
> 标签：r

我正在使用 lmer 进行混合建模，并想探索随机化数据的效果。下面的代码在速度方面可以改进吗？就目前而言，我目前的规格需要几天时间来运行我的实际数据......从我能够找到的情况来看，sapply 是要走的路。我希望我错了。

```
library(lme4)

##Generate real data
        real.data=data.frame(cat1=factor(rep(c("A","B","C","D"),500)),cat2=factor(rep(c("E","F","G","H"),500)), matrix(runif(12000),ncol=6))

##Apply lmer model for each data columm and extract variance estimates with VarCorr for 1000 randomizations of the real.data frame.

random=sapply(1:1000,function(z){print(z)

##Generate a randomized data set by sampling first two factor columns

    sample=data.frame(cat1=factor(sample(real.data$cat1)),cat2=factor(sample(real.data$cat2)), real.data[,3:8])

sapply(3:dim(sample)[2],function(y){print(y)

##Apply REML to each column of data, with 'cat1' and 'cat2' as random effects, including cat1:cat2 interaction

model=lmer(sample[,y]~(1|cat1)+(1|cat2)+(1|cat1:cat2), data=sample)

##Extract the estimates of the random effect terms
                c(as.numeric(VarCorr(model)$cat1),as.numeric(VarCorr(model)$cat2),as.numeric(VarCorr(model)$'cat1:cat2'))
})
}) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T15:02:09.147

`sapply`等等不会为您节省太多时间，它们只是更清洁（有时）。另一方面，一旦你打乱了你的因子列，你可以用它`refit`来重新拟合模型以适应不同的响应数据（即列），从而节省一些时间。

我在`plyr`下面的几件事上使用了这个包。

我不清楚你为什么`sample`要打乱你拟合不同响应变量的顺序，所以我把那部分省略了......

预赛：

```
library(lme4)
library(plyr)
set.seed(101)
##Generate real data
real.data=data.frame(cat1=factor(rep(c("A","B","C","D"),500)),
cat2 <- factor(rep(c("E","F","G","H"),500)), matrix(runif(12000),ncol=6)) 
```

这是随机化因子列并将模型拟合到基于每列 3 到 8 的响应的函数...

```
sfun <- function() {
###Generate a randomized data set by sampling first two factor columns
    sampledat <- transform(real.data,
                           cat1=factor(sample(cat1)),
                           cat2=factor(sample(cat2)))
    ## fit first column
    m1 <- lmer(X1 ~ (1|cat1)+(1|cat2)+(1|cat1:cat2), data=sampledat)
    ## refit using every other column
    m_rest <- apply(real.data[,-(1:3)],2,
                     refit,object=m1)
    ## note this is 'laply' (from plyr), not 'lapply'
    laply(c(list(m1),m_rest),function(m) unlist(VarCorr(m)))
} 
```

现在`raply`用来重复。结果是一个具有维度（# sims）*（# 响应列）*（# 方差分量）的 3D 数组。

```
nsim <- 50
sres <- raply(nsim,sfun(),.progress="text") 
```

这在我的笔记本电脑上花了大约 45 秒，所以大约需要 15 分钟来完成 1000 次重复......

# sql-server-2008-r2 - 将存储的程序结果保存为文件

> ID：13538727
> 
> 赞同：0
> 
> 时间：2012-11-24T05:57:25.007
> 
> 标签：sql-server-2008-r2, silverlight-5.0

我有一个**存储过程**，在 proc 中 **打印**某些结果，例如

```
Print '-- Start Transection--'
Print 'Transection No = ' + @TransectionId     
...
...
Print 'Transection Success'
Print '-- End Transection--' 
```

从 UI 调用时是否可以将打印结果保存在文件中。之后我们必须将该文件邮寄给用户并要求下载该文件

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T06:04:41.243

PRINT 用于记录和调试目的，不应用于向调用者返回任何内容。

这里有一个建议：不要打印，而是写入日志表并返回一个 loggingID。然后，从您的应用程序中查询此表并写入文件。

示例：创建两个表

```
CREATE TABLE Logging
(
    LoggingID int IDENTITY(1,1) PRIMARY KEY,
    Created datetime    
)

CREATE TABLE LoggingDetail
(
    LoggingDetailID int IDENTITY(1,1) PRIMARY KEY,
    LoggingID int FOREIGN KEY REFERENCES Logging,
    LoggingText varchar(500)
) 
```

在事务开始时，创建一个新的 loggingID：

```
INSERT INTO Logging (Created) VALUES (GETUTCDATE())
DECLARE @loggingID INT = @@IDENTITY 
```

而不是打印日志消息，而是执行类似的操作

```
INSERT INTO LoggingDetail (LoggingID, LoggingText) VALUES (@loggingID,
'-- Start Transection--') 
```

在存储过程结束时，将@loggingID 返回给调用者。您现在可以从 LoggingDetail 表中检索日志消息并将它们写入文件：

```
SELECT LoggingText FROM LoggingDetail WHERE LoggingID=<loggingID> ORDER BY LoggingDetailID 
```

将 INSERT 封装在单独的存储过程中可能是个好主意。然后这些存储过程可以写入日志表*并*打印日志消息。

# wcf - 自托管 WCF 服务，当我尝试遇到一个错误时可以解决问题

> ID：13538731
> 
> 赞同：1
> 
> 时间：2012-11-24T05:57:48.417
> 
> 标签：wcf, wcf-data-services, wcf-binding, wcf-security, wcf-client

***你能根据我的程序类提供app.config文件吗？

如果可能，请提供 app.config 代码，我明白了你的意思，但对于你所说的，我不知道该怎么做***

此代码不起作用，因为它在到达时导致错误`host.open()`。请帮我解决问题

```
public class Program
{
    static void Main(string[] args)
    {
        // Base address
        Uri baseServiceAddress = new Uri("http://localhost:8090/Welcome");

        using (var host = new ServiceHost(typeof(WCFSelfHostedService), baseServiceAddress))
        {
            // Enable MetaData publishing.
            ServiceMetadataBehavior serviceMetaDataBehaviour = new ServiceMetadataBehavior();
            serviceMetaDataBehaviour.HttpGetEnabled = true;
            serviceMetaDataBehaviour.MetadataExporter.PolicyVersion = PolicyVersion.Policy15;
            host.Description.Behaviors.Add(serviceMetaDataBehaviour);

            // Open the ServiceHost to start listening for messages. No endpoint are explicitly defined, runtime creates default endpoint.
            host.Open();

            Console.WriteLine("The service is ready at {0} and host at {1}", baseServiceAddress, DateTime.Now.ToString());
            Console.WriteLine("The service and client is running in the same process.");

            WCFSelfHostedService selfHostService = new WCFSelfHostedService();

            Console.Write("Enter your name. : ");
            Console.WriteLine(selfHostService.WelComeMessage(Console.ReadLine()));
            Console.WriteLine("Host is running... Press <Enter> key to stop the service.");
            Console.ReadLine();

            //Close the service.
            host.Close();
        }
    }
} 
```

当我运行此代码时，我收到此错误：

> *System.ServiceModel.dll 中出现“System.InvalidOperationException”类型的未处理异常*
> 
> *附加信息：服务 'WCFSelfHostedService.WCFSelfHostedService' 的应用程序（非基础设施）端点为零。这可能是因为没有为您的应用程序找到配置文件，或者因为在配置文件中找不到与服务名称匹配的服务元素，或者因为在服务元素中没有定义端点。*

我`app.config`的是：

```
<?xml version="1.0" encoding="utf-8" ?> 
<configuration> 
   <system.serviceModel> 
      <client> 
         <endpoint 
             address ="localhost:8090/Welcome"; 
             binding ="wsHttpBinding" 
             contract ="MyCalculatorService.ISimpleCalculator"> 
         </endpoint> 
      </client> 
   </system.serviceModel> 
</configuration> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T09:44:54.273

错误很明显：服务没有定义**应用程序端点**。

要么您有一个未向我们展示的配置文件（如果是这样：请务必**展示**！），它将配置服务端点 - 或者您需要在代码中设置至少一个服务端点。

`app.config`因此，要么为发生自托管的应用程序创建一个文件，然后向其中添加如下内容：

```
<system.serviceModel>
    <services>
        <service name="YourNamespace.WCFSelfHostService" >
           <endpoint name="Default"
               address="http://yourServerName:8088/SomePlace/ServiceName"
               binding="basicHttpBinding"
               contract="YourNamespace.IWCFSelfHostService" />
        </service> 
    </services>
</system.serviceModel> 
```

或者然后更改您的代码以在代码中设置至少一个服务端点 -**在**您调用之前`host.Open()`：

```
// Base address
Uri baseServiceAddress = new Uri("http://localhost:8090/Welcome");

using (var host = new ServiceHost(typeof(WCFSelfHostedService), baseServiceAddress))
{
   // Enable MetaData publishing.
   ServiceMetadataBehavior serviceMetaDataBehaviour = new ServiceMetadataBehavior();
   serviceMetaDataBehaviour.HttpGetEnabled = true;
   serviceMetaDataBehaviour.MetadataExporter.PolicyVersion = PolicyVersion.Policy15;
   host.Description.Behaviors.Add(serviceMetaDataBehaviour);

   // Define AT LEAST one service endpoint
   host.AddServiceEndpoint(typeof(IWCFSelfHostService), new BasicHttpBinding(), baseServiceAddress);

   // Open the ServiceHost to start listening for messages. No endpoint are explicitly defined, runtime creates default endpoint.
   host.Open();

   Console.WriteLine("The service is ready at {0} and host at {1}", baseServiceAddress, DateTime.Now.ToString());
   Console.WriteLine("The service and client is running in the same process.");

   WCFSelfHostedService selfHostService = new WCFSelfHostedService();

   Console.Write("Enter your name. : ");
   Console.WriteLine(selfHostService.WelComeMessage(Console.ReadLine()));
   Console.WriteLine("Host is running... Press <Enter> key to stop the service.");

   Console.ReadLine();

   // Close the service.
   host.Close();
} 
```

**更新：**`app.config`您向我们展示的正在定义一个客户**端**- 一个正在调用服务的程序。但是，您需要的`app.config`是定义事物的**SERVICE**方面 - 请参阅我的示例。您需要**`<services>`**在配置中定义一个或多个，这反过来又会公开至少一个客户端可以连接的应用程序**端点。**

WCF 始终由**服务**（在服务器上）和一个（或多个）调用该服务**的客户端组成。**[有关 WCF 体系结构的非常基本的介绍，请参阅这篇文章](http://web.archive.org/web/20070516074603/http://en.csharp-online.net/WCF_Essentials%E2%80%94WCF_Architecture)。该服务在该部分的配置文件中进行配置`<services>/<service>`，而您的客户端需要在该`<client>`部分中定义它们的东西。

# c - c中的10k x 10k矩阵malloc好奇心

> ID：13538740
> 
> 赞同：1
> 
> 时间：2012-11-24T05:58:50.397
> 
> 标签：c, matrix, malloc

> **可能重复：**
> [如何对大量浮点数求和？](https://stackoverflow.com/questions/2148149/how-to-sum-a-large-number-of-float-number)

我有一个矩阵“x”，它是 10,000 个元素乘以 10,000 个元素。

在第一种情况下，我声明矩阵如下：

```
int n = 10000;
unsigned int size_M = n*n;
unsigned int mem_size_M = sizeof(int)*size_M;
int* x = (int*)malloc(mem_size_M); 
```

步骤（1）初始化矩阵：

```
for(i=0;i<n;i++)
    for(j=0;j<n;j++)
        x[i*n+j] = 1; 
```

步骤 (2) 对矩阵的元素求和并打印总和：

```
for(i=0i<n;i++)
    for(j=0j<n;j++)          
        sum +=x[i*n+j];

printf("sum: %d \n", sum); 
```

正如我所料，上面的代码会打印出“sum: 100000000”。

但是，如果我像这样声明矩阵：

```
int n = 10000;
float size_M = n * n;
float mem_size_M = sizeof(float) * size_M;
float* x = (float*)malloc(mem_size_M); 
```

再次执行步骤 1 和 2，不会打印出正确答案，而是打印出“16777216”。为什么是这样？

答案：要获得适当的答案，请进行类型转换...

```
sum +=(int)x[i*n+j]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T08:21:58.000

这是因为浮点类型的精度限制。您不能只添加 1.0 来浮动值 > 16777216 (2^24)，但您可以添加 2.0 或 0.1：

```
#include <stdio.h>

int main(void)
{
    float f = 16777220;
    printf("f = %f\n", f + 1);
    printf("f = %f\n", f + 2);
    printf("f = %f\n", f + 0.1);
    return 0;
} 
```

[IEEE-754](http://en.wikipedia.org/wiki/IEEE_floating_point)标准浮点数有 4 个字节，由一个符号位、一个 8 位余数 127 二进制指数和一个23*位尾数*组成。准确解释它为什么会发生有点复杂，但我可以说这是操作错误达到最大值时的极端情况。

# c# - 基成员初始化部分 C#？

> ID：13538742
> 
> 赞同：2
> 
> 时间：2012-11-24T05:59:07.207
> 
> 标签：c#, object, initialization, initialization-list

C# 中是否存在基本成员初始化部分？我尝试搜索和搜索，但不断提出有关初始化[List 类](http://msdn.microsoft.com/en-us/library/6sh2ey19.aspx)的问题。我所指的初始化列表类似于[此处的示例。](http://www.learncpp.com/cpp-tutorial/101-constructor-initialization-lists/)

这样做的一个原因是初始化一个类中的常量。我基本上是想弄清楚我是否可以执行以下操作：

```
public class A{
    private const string _name;
    public A(string name): _name(name){
         //stuff
    }
} 
```

同样，我试图在 C# 中执行此操作，而不是 C++。有什么想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-24T06:05:46.257

您可以使用在构造函数中初始化的私有只读字段来执行此操作，因此：

```
public class A 
{
    private readonly string _name;

    public A (string name)
    {
        _name = name;
    }
} 
```

一个`readonly`字段只能内联或在构造函数中初始化，然后是常量。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-24T06:12:45.087

No, C# does not support member initialization before constructor body the same way as C++ does. You can either initialize fields when they are declared or using normal assignament inside contructor body.

The only 2 methods can be used at that position - call to contructor of base class and call to another contructor in the same class. You can check C# specification (i.e. [http://www.ecma-international.org/publications/files/ECMA-ST/Ecma-334.pdf](http://www.ecma-international.org/publications/files/ECMA-ST/Ecma-334.pdf), section 17.10 Instance constructors) for details:

```
constructor-declaration:
    attributesopt constructor-modifiersopt constructor-declarator constructor-body

constructor-declarator:
   identifier ( formal-parameter-listopt ) constructor-initializer
constructor-initializer:
  : base ( argument-listopt )
  : this ( argument-listopt ) 
```

# svn - 如何在浏览器中显示最后一次 svn 提交的用户名？

> ID：13538743
> 
> 赞同：0
> 
> 时间：2012-11-24T05:59:07.603
> 
> 标签：svn

从最近几天开始，我一直在研究[SVN](http://subversion.tigris.org/)，现在我已经成功地为我的本地网络设置了 SVN 服务器。当我们在浏览器中打开任何存储库时，页面顶部会显示最后一个修订号。所以我想做的是。

如何在浏览器上显示上次提交的名称？我能够使用命令找到该名称，但有什么方法可以显示该浏览器的用户名？

任何建议和意见将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T06:17:48.400

您可以安装单独的 SVN 浏览器，例如[WebSVN](http://www.websvn.info/features/)或[ViewVC](http://www.viewvc.org/)。

此外，您还可以获得历史记录和差异等功能。

# php - 为什么我看不到 XML 格式的结果？

> ID：13538747
> 
> 赞同：1
> 
> 时间：2012-11-24T05:59:52.920
> 
> 标签：php, rest, curl, yahoo-api

[我正在尝试使用雅虎的内容分析，从这里](http://developer.yahoo.com/search/content/V2/contentAnalysis.html)看起来真的很容易使用

但是每当我执行我的代码时，我都会得到以下输出：

```
Italian sculptors the Virgin Mary painters http://en.wikipedia.com/wiki/Painting http://en.wikipedia.com/wiki/Adobe_Photoshop http://en.wikipedia.com/wiki/Still_life http://en.wikipedia.com/wiki/Avant-garde http://en.wikipedia.com/wiki/In_the_Sky http://en.wikipedia.com/wiki/Potato 1 
```

我想要的是看到一个带有 XML 标记的 XML 文档，就像单击[此](http://query.yahooapis.com/v1/public/yql?q=select%20%2a%20from%20contentanalysis.analyze%20where%20text=%27Italian%20sculptors%20and%20painters%20of%20the%20renaissance%20favored%20the%20Virgin%20Mary%20for%20inspiration%27;)链接时它的显示方式一样

此外，我看到的输出的源代码（来自浏览器..右键单击>查看源代码）是：

```
<?xml version="1.0" encoding="UTF-8"?>
<query xmlns:yahoo="http://www.yahooapis.com/v1/base.rng" yahoo:count="1" yahoo:created="2012-11-24T05:54:55Z" yahoo:lang="en-US"><results><entities xmlns="urn:yahoo:cap">
    <entity score="0.784327">
      <text end="16" endchar="16" start="0" startchar="0">Italian sculptors</text>
    </entity>
    <entity score="0.78097">
      <text end="72" endchar="72" start="58" startchar="58">the Virgin Mary</text>
    </entity>
    <entity score="0.509566">
      <text end="29" endchar="29" start="22" startchar="22">painters</text>
      <wiki_url>http://en.wikipedia.com/wiki/Painting</wiki_url>
      <related_entities>
        <wikipedia>
          <wiki_url>http://en.wikipedia.com/wiki/Adobe_Photoshop</wiki_url>
          <wiki_url>http://en.wikipedia.com/wiki/Still_life</wiki_url>
          <wiki_url>http://en.wikipedia.com/wiki/Avant-garde</wiki_url>
          <wiki_url>http://en.wikipedia.com/wiki/In_the_Sky</wiki_url>
          <wiki_url>http://en.wikipedia.com/wiki/Potato</wiki_url>
        </wikipedia>
      </related_entities>
    </entity>
  </entities></results></query><!-- total: 191 -->
<!-- engine6.yql.ac4.yahoo.com -->
1 
```

以下是我的代码：

```
<?php
$c = curl_init();
curl_setopt($c, CURLOPT_URL, 'http://query.yahooapis.com/v1/public/yql');
curl_setopt($c, CURLOPT_POST, true);
curl_setopt($c, CURLOPT_POSTFIELDS, "q=select * from contentanalysis.analyze where text='Italian sculptors and painters of the renaissance favored the Virgin Mary for inspiration';");
curl_setopt($c,CURLOPT_HEADER,0);
$op=curl_exec ($c);
curl_close ($c); 
echo $op;
?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-24T06:06:45.060

这就是当发送的标头是`Content-type: text/html`. 您链接到的演示示例显示了格式化的 XML，它使用了一些特殊的格式来使其看起来像这样。您需要将标题设置为 text/xml 之类`header('Content-type: text/xml');`的，然后输出应显示格式。

```
header('Content-type: text/xml');
echo $op; 
```

您还可以像这样输出您的内容：

```
echo '<pre>';
echo htmlentities($op);
echo '</pre>'; 
```

* * *

上面解释了为什么 XML 在浏览器中显示为未格式化并演示了如何解决该问题。OP 的主要问题是由于输出末尾的杂散字符串，他的 XML 格式不正确。以下处理：

```
$r = 'http://query.yahooapis.com/v1/public/yql';
$p = "q=select * from contentanalysis.analyze where text='Italian sculptors and painters of the renaissance favored the Virgin Mary for inspiration'"; 

$c = curl_init($r);
curl_setopt($c, CURLOPT_POST, true);
curl_setopt($c, CURLOPT_POSTFIELDS, $p);
curl_setopt($c, CURLOPT_HEADER, true);
curl_setopt($c, CURLOPT_RETURNTRANSFER, true);
$op = curl_exec ($c);
curl_close ($c); 

if (!($xml = strstr($op, '<?xml'))) {
    $xml = null;
}

header('Content-type: text/xml');
echo $xml; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T06:05:35.413

如果您在浏览器中看到该结果。你应该只是查看源代码。这将显示包括标签在内的所有内容。由于 brousr 不会显示标签，只会显示内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T06:08:19.750

您尚未使用该`header`方法指定`Content-Type`HTTP 标头。因此，PHP 正在输出其默认的 Content-Type`text/html`并且浏览器将 XML 标记视为无效 HTML。

为您的数据输出正确的内容类型。

```
header("Content-Type: application/xml"); 
```

# image-processing - 使用 OpenCV 裁剪黑色边缘

> ID：13538748
> 
> 赞同：48
> 
> 时间：2012-11-24T05:59:53.823
> 
> 标签：image-processing, opencv

我认为这应该是一个很简单的问题，但是我找不到解决方案或搜索的有效关键字。

我只有这张图。

![原始图像](../Images/1f093f5918901e270cac5fdee5a5a899.png)

黑色边缘没用，所以我想剪掉它们，只留下 Windows 图标（和蓝色背景）。

我不想计算 Windows 图标的坐标和大小。GIMP 和 Photoshop 具有某种自动裁剪功能。OpenCV没有吗？

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2012-11-24T07:17:51.337

我不确定你所有的图像是否都是这样的。但是对于这张图片，下面是一个简单的 python-opencv 代码来裁剪它。

首先导入库：

```
import cv2
import numpy as np 
```

读取图像，将其转换为灰度，并将阈值设为 1 的二值图像。

```
img = cv2.imread('sofwin.png')
gray = cv2.cvtColor(img,cv2.COLOR_BGR2GRAY)
_,thresh = cv2.threshold(gray,1,255,cv2.THRESH_BINARY) 
```

现在在其中找到轮廓。将只有一个对象，因此请为其找到边界矩形。

```
contours,hierarchy = cv2.findContours(thresh,cv2.RETR_EXTERNAL,cv2.CHAIN_APPROX_SIMPLE)
cnt = contours[0]
x,y,w,h = cv2.boundingRect(cnt) 
```

现在裁剪图像，并将其保存到另一个文件中。

```
crop = img[y:y+h,x:x+w]
cv2.imwrite('sofwinres.png',crop) 
```

下面是结果：

![在此处输入图像描述](../Images/aae9503badef44a580543a904db3bd4b.png)

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2015-05-29T22:59:45.490

```
import numpy as np

def autocrop(image, threshold=0):
    """Crops any edges below or equal to threshold

    Crops blank image to 1x1.

    Returns cropped image.

    """
    if len(image.shape) == 3:
        flatImage = np.max(image, 2)
    else:
        flatImage = image
    assert len(flatImage.shape) == 2

    rows = np.where(np.max(flatImage, 0) > threshold)[0]
    if rows.size:
        cols = np.where(np.max(flatImage, 1) > threshold)[0]
        image = image[cols[0]: cols[-1] + 1, rows[0]: rows[-1] + 1]
    else:
        image = image[:1, :1]

    return image 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2019-12-06T06:55:57.273

我认为这个答案更简洁：

```
def crop(image):
    y_nonzero, x_nonzero, _ = np.nonzero(image)
    return image[np.min(y_nonzero):np.max(y_nonzero), np.min(x_nonzero):np.max(x_nonzero)] 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2017-01-16T06:44:00.660

好的，为了完整起见，我实现了上面的每个建议，添加了递归算法的迭代版本（一旦更正）并进行了一组性能测试。

TLDR：对于一般情况，递归可能是最好的（但请使用下面的那个——OP 有几个错误），而自动裁剪最适合您期望几乎为空的图像。

一般发现： 1\. 上面的递归算法有几个非 1 错误。修正版如下。2\. cv2.findContours 函数对非矩形图像有问题，实际上在各种场景中甚至会修剪掉一些图像。我添加了一个使用 cv2.CHAIN_APPROX_NONE 的版本来查看它是否有帮助（它没有帮助）。3\. autocrop 实现非常适合稀疏图像，但对于密集图像则很差，这是递归/迭代算法的逆算法。

```
import numpy as np
import cv2

def trim_recursive(frame):
  if frame.shape[0] == 0:
    return np.zeros((0,0,3))

  # crop top
  if not np.sum(frame[0]):
    return trim_recursive(frame[1:])
  # crop bottom
  elif not np.sum(frame[-1]):
    return trim_recursive(frame[:-1])
  # crop left
  elif not np.sum(frame[:, 0]):
    return trim_recursive(frame[:, 1:])
    # crop right
  elif not np.sum(frame[:, -1]):
    return trim_recursive(frame[:, :-1])
  return frame

def trim_contours(frame):
  gray = cv2.cvtColor(frame,cv2.COLOR_BGR2GRAY)
  _,thresh = cv2.threshold(gray,1,255,cv2.THRESH_BINARY)
  _, contours, hierarchy = cv2.findContours(thresh, cv2.RETR_EXTERNAL, cv2.CHAIN_APPROX_SIMPLE)
  if len(contours) == 0:
    return np.zeros((0,0,3))
  cnt = contours[0]
  x, y, w, h = cv2.boundingRect(cnt)
  crop = frame[y:y + h, x:x + w]
  return crop

def trim_contours_exact(frame):
  gray = cv2.cvtColor(frame,cv2.COLOR_BGR2GRAY)
  _,thresh = cv2.threshold(gray,1,255,cv2.THRESH_BINARY)
  _, contours, hierarchy = cv2.findContours(thresh, cv2.RETR_EXTERNAL, cv2.CHAIN_APPROX_NONE)
  if len(contours) == 0:
    return np.zeros((0,0,3))
  cnt = contours[0]
  x, y, w, h = cv2.boundingRect(cnt)
  crop = frame[y:y + h, x:x + w]
  return crop

def trim_iterative(frame):
  for start_y in range(1, frame.shape[0]):
    if np.sum(frame[:start_y]) > 0:
      start_y -= 1
      break
  if start_y == frame.shape[0]:
    if len(frame.shape) == 2:
      return np.zeros((0,0))
    else:
      return np.zeros((0,0,0))
  for trim_bottom in range(1, frame.shape[0]):
    if np.sum(frame[-trim_bottom:]) > 0:
      break

  for start_x in range(1, frame.shape[1]):
    if np.sum(frame[:, :start_x]) > 0:
      start_x -= 1
      break
  for trim_right in range(1, frame.shape[1]):
    if np.sum(frame[:, -trim_right:]) > 0:
      break

  end_y = frame.shape[0] - trim_bottom + 1
  end_x = frame.shape[1] - trim_right + 1

  # print('iterative cropping x:{}, w:{}, y:{}, h:{}'.format(start_x, end_x - start_x, start_y, end_y - start_y))
  return frame[start_y:end_y, start_x:end_x]

def autocrop(image, threshold=0):
  """Crops any edges below or equal to threshold

  Crops blank image to 1x1.

  Returns cropped image.

  """
  if len(image.shape) == 3:
    flatImage = np.max(image, 2)
  else:
    flatImage = image
  assert len(flatImage.shape) == 2

  rows = np.where(np.max(flatImage, 0) > threshold)[0]
  if rows.size:
    cols = np.where(np.max(flatImage, 1) > threshold)[0]
    image = image[cols[0]: cols[-1] + 1, rows[0]: rows[-1] + 1]
  else:
    image = image[:1, :1]

  return image 
```

然后为了测试它，我做了这个简单的函数：

```
import datetime
import numpy as np
import random

ITERATIONS = 10000

def test_image(img):
  orig_shape = img.shape
  print ('original shape: {}'.format(orig_shape))
  start_time = datetime.datetime.now()
  for i in range(ITERATIONS):
    recursive_img = trim_recursive(img)
  print ('recursive shape: {}, took {} seconds'.format(recursive_img.shape, (datetime.datetime.now()-start_time).total_seconds()))
  start_time = datetime.datetime.now()
  for i in range(ITERATIONS):
    contour_img = trim_contours(img)
  print ('contour shape: {}, took {} seconds'.format(contour_img.shape, (datetime.datetime.now()-start_time).total_seconds()))
  start_time = datetime.datetime.now()
  for i in range(ITERATIONS):
    exact_contour_img = trim_contours(img)
  print ('exact contour shape: {}, took {} seconds'.format(exact_contour_img.shape, (datetime.datetime.now()-start_time).total_seconds()))
  start_time = datetime.datetime.now()
  for i in range(ITERATIONS):
    iterative_img = trim_iterative(img)
  print ('iterative shape: {}, took {} seconds'.format(iterative_img.shape, (datetime.datetime.now()-start_time).total_seconds()))
  start_time = datetime.datetime.now()
  for i in range(ITERATIONS):
    auto_img = autocrop(img)
  print ('autocrop shape: {}, took {} seconds'.format(auto_img.shape, (datetime.datetime.now()-start_time).total_seconds()))

def main():
  orig_shape = (10,10,3)

  print('Empty image--should be 0x0x3')
  zero_img = np.zeros(orig_shape, dtype='uint8')
  test_image(zero_img)

  print('Small image--should be 1x1x3')
  small_img = np.zeros(orig_shape, dtype='uint8')
  small_img[3,3] = 1
  test_image(small_img)

  print('Medium image--should be 3x7x3')
  med_img = np.zeros(orig_shape, dtype='uint8')
  med_img[5:8, 2:9] = 1
  test_image(med_img)

  print('Random image--should be full image: 100x100')
  lg_img = np.zeros((100,100,3), dtype='uint8')
  for y in range (100):
    for x in range(100):
      lg_img[y,x, 0] = random.randint(0,255)
      lg_img[y, x, 1] = random.randint(0, 255)
      lg_img[y, x, 2] = random.randint(0, 255)
  test_image(lg_img)

main() 
```

……结果……

```
Empty image--should be 0x0x3
original shape: (10, 10, 3)
recursive shape: (0, 0, 3), took 0.295851 seconds
contour shape: (0, 0, 3), took 0.048656 seconds
exact contour shape: (0, 0, 3), took 0.046273 seconds
iterative shape: (0, 0, 3), took 1.742498 seconds
autocrop shape: (1, 1, 3), took 0.093347 seconds
Small image--should be 1x1x3
original shape: (10, 10, 3)
recursive shape: (1, 1, 3), took 1.342977 seconds
contour shape: (0, 0, 3), took 0.048919 seconds
exact contour shape: (0, 0, 3), took 0.04683 seconds
iterative shape: (1, 1, 3), took 1.084258 seconds
autocrop shape: (1, 1, 3), took 0.140886 seconds
Medium image--should be 3x7x3
original shape: (10, 10, 3)
recursive shape: (3, 7, 3), took 0.610821 seconds
contour shape: (0, 0, 3), took 0.047263 seconds
exact contour shape: (0, 0, 3), took 0.046342 seconds
iterative shape: (3, 7, 3), took 0.696778 seconds
autocrop shape: (3, 7, 3), took 0.14493 seconds
Random image--should be full image: 100x100
original shape: (100, 100, 3)
recursive shape: (100, 100, 3), took 0.131619 seconds
contour shape: (98, 98, 3), took 0.285515 seconds
exact contour shape: (98, 98, 3), took 0.288365 seconds
iterative shape: (100, 100, 3), took 0.251708 seconds
autocrop shape: (100, 100, 3), took 1.280476 seconds 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-09-12T22:35:03.777

一个漂亮的小递归函数怎么样？

```
import cv2
import numpy as np
def trim(frame):
    #crop top
    if not np.sum(frame[0]):
        return trim(frame[1:])
    #crop bottom
    elif not np.sum(frame[-1]):
        return trim(frame[:-2])
    #crop left
    elif not np.sum(frame[:,0]):
        return trim(frame[:,1:]) 
    #crop right
    elif not np.sum(frame[:,-1]):
        return trim(frame[:,:-2])    
    return frame 
```

加载图像并设置阈值以确保黑暗区域为黑色：

```
img = cv2.imread("path_to_image.png")   
thold = (img>120)*img 
```

然后调用递归函数

```
trimmedImage = trim(thold) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-04-16T13:57:34.180

**Python 3.6 版**

* * *

**裁剪图像并插入“CropedImages”文件夹**

```
import cv2
import os

arr = os.listdir('./OriginalImages')

for itr in arr:
    img = cv2.imread(itr)
    gray = cv2.cvtColor(img,cv2.COLOR_BGR2GRAY)
    _,thresh = cv2.threshold(gray, 120, 255, cv2.THRESH_BINARY)
    _, contours, _ = cv2.findContours(thresh,cv2.RETR_TREE,cv2.CHAIN_APPROX_SIMPLE)
    cnt = contours[0]
    x,y,w,h = cv2.boundingRect(cnt)
    crop = img[y:y+h,x:x+w]
    cv2.imwrite('CropedImages/'+itr,crop) 
```

**在第 9 行将数字 120 更改为 other 并尝试您的图像，它会起作用**

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-04-13T01:55:56.097

万一它对任何人有帮助，我使用了@wordsforthewise 的这个调整来[替代](https://stackoverflow.com/a/42123638)基于 PIL 的解决方案：

```
bw = cv2.cvtColor(img, cv2.COLOR_BGR2GRAY)
rows, cols = bw.shape

non_empty_columns = np.where(bw.max(axis=0) > 0)[0]
non_empty_rows = np.where(bw.max(axis=1) > 0)[0]
cropBox = (min(non_empty_rows) * (1 - padding),
            min(max(non_empty_rows) * (1 + padding), rows),
            min(non_empty_columns) * (1 - padding),
            min(max(non_empty_columns) * (1 + padding), cols))

return img[cropBox[0]:cropBox[1]+1, cropBox[2]:cropBox[3]+1 , :] 
```

（这是一个调整，因为原始代码希望裁剪掉白色背景而不是黑色背景。）

# magento - Magento 供应商扩展运费计算问题

> ID：13538751
> 
> 赞同：0
> 
> 时间：2012-11-24T06:00:14.580
> 
> 标签：magento, extend, shipping

我在 Magento 1.7.0.2 上安装了供应商直销扩展。每个供应商都添加了自己的产品，并提到他是只在国内发货还是在国际上发货。

现在，假设买家将来自不同供应商的产品添加到他的购物车中，有些是国内的，有些是国际的。我想为任何国家免费提供国内服务，但为任何国家收取固定金额的国际费用。

我对如何做到这一点有一点想法......我将比较供应商的商店位置和客户的发货地点，如果两者匹配，那么该产品的发货显然是国内的。否则，这将是每个产品的固定运费。

任何人都对这有多困难以及可能需要多少工时有一个公平的想法？谢谢

# json - 调用 JSON 网络服务 & 使用 html

> ID：13538753
> 
> 赞同：0
> 
> 时间：2012-11-24T06:00:32.793
> 
> 标签：json, web-services

我最近一直在使用 XML，但现在我正在练习一些 JSON。

我想要做的是制作一个按钮和文本框 - 这样用户就可以输入一个邮政编码，它会得到该邮政编码的信息......

使用来自 geonames.org 的 JSON

试图弄清楚这一点让我感到沮丧，当我使用 XML 制作自己的文件时，我发现这很容易，但现在我正在尝试使用实际的网站和 JSON。

请告诉我如何做到这一点！将不胜感激！谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T06:16:40.033

首先，HTML 无法处理来自服务器的 json 响应。您可以将 json 格式的 get 或 post 发送到服务器并返回 json 响应，但您需要 HTML 以外的其他内容来处理该 JSON 消息。浏览器可以格式化和显示 XML，但不能显示 JSON（它们只是将其显示为字符串）。在浏览器中执行此操作的最简单方法是使用 JavaScript。为此，我建议使用 jquery 库。

[http://jquery.com](http://jquery.com)

这是我最近用来处理返回的 JSON 字符串的一些 jquery 的示例。

```
$(document).ready(function() {

    $(".img a").on("click", function(event) {
        event.preventDefault();
        var item;
        if ((item= $(this).attr( 'href' ))=="saved") return false;
        $(this).html("<div style='line-height:4em '>Saved</div>");
        $(this).attr("href","saved");
        var action ="add";

        jqxhr = $.post("webservice.php", { action: action, color: item }, function(data) {
            var result=data.result;
            if (result=="saved") {
                self.html("<div>Saved</div>");
                self.attr("href","saved");
            }           
        }, "json")
        .error(function() {         
            alert("error: unable to contact web service"); 
        });
    });
}); 
```

此请求返回的 JSON 字符串为 { result: saved }。如您所见，您可以将关联的数组作为数据对象的一部分进行访问。在我的例子中，data.result 为我提供了来自 json 字符串的结果值。

**请注意**，我的示例是使用锚标记传递要在 web 服务调用中发送的值。在您的情况下，您将需要使用表格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T06:45:55.803

如果您使用的是[jeoquery](http://tompi.github.com/jeoquery)，那么只需查看[UI 示例](http://tompi.github.com/jeoquery/ui.html)的 html 源代码。它显示了相同的自动完成框，您可能试图实现不编写自定义代码来解析返回的 JSON。下面的代码应该适合你：

```
<input class="input-large" id="city" type="text"/>

$("#city").jeoCityAutoComplete(); 
```

# php - 使用 api 在 facebook 上标记帖子中的人

> ID：13538761
> 
> 赞同：1
> 
> 时间：2012-11-24T06:01:50.810
> 
> 标签：php, facebook, facebook-graph-api, sdk

在 facebook api 墙贴中标记人仍然不可用吗？

我一直在寻找答案好几个小时。

我发现了大量关于不可能做到这一点的信息，但也许这些信息已经过时了......

有人试过吗？也许有某种解决方案？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-24T06:35:38.820

如果您使用下面的代码在 FB 墙上发帖，您将可以选择在那里标记朋友。就像附图中一样，![在此处输入图像描述](../Images/afc0b6d325a32c2a0b06c7b671de9e39.png)

```
[FBNativeDialogs
             presentShareDialogModallyFrom:self
             initialText:@"Hello World!"
             image:[UIImage imageWithData:[NSData dataWithContentsOfURL:[NSURL URLWithString:stringImageURL]]]
             url:[NSURL URLWithString:stringURL]
             handler:^(FBNativeDialogResult result, NSError *error) {
             }] 
```

# python - Python 一次运行两个代码

> ID：13538767
> 
> 赞同：0
> 
> 时间：2012-11-24T06:02:54.387
> 
> 标签：python, multithreading, multiprocessing

不确定标题是否有意义，但是是否有一种简单的方法可以同时运行 2 条“行”？（因为不知道怎么写，所以用引号）

无论如何，我现在要做的是用 Skype4Py 制作一个 Skype 机器人。正如下面的脚本所暗示的，我正在制作一个可以做事的脚本。但我面临一个问题。脚本的一部分检测命令垃圾邮件，但我想制作某种类型的计时器，一段时间后将用户从其垃圾邮件检查数据库中删除。（这有意义吗？）。换句话说，假设垃圾邮件容忍度是垃圾邮件 6 次。在用户输入命令（例如！帮助）可能 5 次后，停止，比如说 3 分钟，再执行 5 次，他不会被禁止使用命令。

目前使用此代码，如果用户在任何时间（例如下午 4:00 执行 3 个命令，下午 4:03 执行 2 个命令），该用户将被禁止，但我不希望那样工作。

```
#IMPORTS
import hashlib
import os
import random
import re
import string
import sys
sys.path.append('lib')
import time
import urllib
import Skype4Py
import urllib2

#CONFIG
admin = '...'
adflyKey = '...'
adflyUID = '...'
nick = ''

#SETUP
accessList = []
bannedList = []
safeuserList = []
vwordList = []
bcheck = []
quoteList = []
commandList = []
lock = False
msgcount = 1

#ADF.LY GENERATOR
def adfLY(url):
    global adflyKey
    global adflyUID
    try:
        location = 'http://api.adf.ly/api.php?key=' + adflyKey + '&uid=' + adflyUID + '&advert_type=int&domain=adf.ly&url=' + url
        link = urllib.urlopen(location).read()
        return link
    except:
        return url
#RANDOM STRING
def getRandom(length):
    length = int(length)
    charSet = string.ascii_lowercase + string.ascii_uppercase + string.digits + string.punctuation
    randomChar = ''.join(random.sample(charSet,length))
    return randomChar

#GET URL TITLE
def getTitle(url, maxRead = 10000):
    try:
        url = url.lower()
        url = url.replace('cmyip', 'google', 1);
        website = urllib2.urlopen(url)
        title = re.compile('<title>(.+?)</title>')
        buffer = ''
        while True:
            data = website.read(100)
            if not data:
                return 'Unknown'
            buffer += data
            match = title.search(buffer)
            if match:
                return ' '.join(line.strip() for line in match.group(1).strip().split('\n'))
            elif len(buffer) >= maxRead:
                return 'Unknown'
    except:
        return 'Unknown'

#IS URL UP
def isUP(url):
    try:
        results = getTitle('http://downforeveryoneorjustme.com/' + url)
        results = results.replace('Is Up -> Check if your website is up or down?', ' is UP.', 1);
        results = results.replace('Is Down -> Check if your website is up or down?', ' is DOWN.', 1);
        results = results.replace(' -> Huh? Error... - Check if your website is up or down?', ' is INVALID.', 1);
        return results
    except:
        return url + ' is UNKNOWN.'

#MD5 HASH
def md5(word):
    md5 = hashlib.md5(word)
    return md5.hexdigest()

#UPDATE ACCESS/BANNED LIST
def updateList(list):
    global accessList
    global bannedList
    global vwordList
    global commandList
    if list == 'access':
        accessFile = open('database/access.txt', 'w')
        for name in accessList:
            accessFile.write(name + '\n')
        accessList.sort()
        accessFile.close
    elif list == 'banned':
        bannedFile = open('database/banned.txt', 'w')
        for name in bannedList:
            bannedFile.write(name + '\n')
        bannedList.sort()
        bannedFile.close
    elif list == 'vword':
        vwordFile = open('database/vword.txt', 'w')
        for word in vwordList:
            vwordFile.write(word + '\n')
        vwordList.sort()
        vwordFile.close
    elif list == 'safeuser':
        safeuserFile = open('database/safeuser.txt', 'w')
        for word in safeuserFile:
            safeuserFile.write(word + '\n')
        safeuserFile.sort()
        safeuserFile.close
#SKYPE4PY API
def OnAttach(status):
    if status == Skype4Py.apiAttachAvailable:
        skype.Attach()
        return
    if status == Skype4Py.apiAttachSuccess:
        print('API connected to the Skype process!')
        print '------------------------------------------------------------------------------'
        return
    statusAPI = skype.Convert.AttachmentStatusToText(status)
    print 'API '+ statusAPI.lower() + '...'

#deny calls
#AllowedCallTargets = set (['echo123', 'echo223']);
#
#class receive_set:
#    def __init__(self):
#        pass
#    def OnCall(self, call, status):
#        print "status is ", status, " Peer is: ", call.PartnerHandle, " Show name is ", call.PartnerDisplayName
#        print "length of active calls are ",len(self.skype.ActiveCalls)
#        inprogress = False
#        if (status == Skype4Py.clsRinging) and (call.Type == Skype4Py.cltIncomingP2P or call.Type == Skype4Py.cltIncomingPSTN):
#            for curr in self.skype.ActiveCalls:
#                print "Call status is ", curr.Type, " status is ", curr.Status
#                if curr.Status == Skype4Py.clsInProgress :
#                    inprogress = True
#            if not inprogress:
#                call.Answer()
#        if (status == Skype4Py.clsInProgress):
#            print "Call's video send status is ",call.VideoSendStatus, " Recv status is ", call.VideoReceiveStatus, " Video Status is ",call.VideoStatus
##            cmd  = self.skype.Command("ALTER CALL <id> START_VIDEO_SEND")
##            self.skype.SendCommand(cmd)
#
##        if (status == "ROUTING") and (not call.PartnerHandle in AllowedCallTargets):
#            call.Finish()
#            print 'Terminating call'
#
#    def OnCallVideoReceiveStatusChanged(self, status):
#        pass
#
#    def OnCallVideoSendStatusChanged(self, status):
#        pass
#
#    def OnCallVideoStatusChanged(self, status):
#        pass
#
#    def OnAttach(self, status):
#        print 'API attachment status:'+self.skype.Convert.AttachmentStatusToText(status)
#        if status == Skype4Py.apiAttachAvailable:
#            self.skype.Attach()
#            
#    def start(self):
#        self.skype = Skype4Py.Skype()
#        self.skype.OnAttachmentStatus = self.OnAttach
#        self.skype.OnCallStatus = self.OnCall
#
#
#    def Attach(self):
#        self.skype.Attach()
#
#    def Callout(self, callee):
#        self.skype.PlaceCall(callee)
#
#
#if __name__ == "__main__":
#    rec = receive_set()
#    rec.start()
#    rec.Attach()
#
#    while 1:
#        time.sleep(1)

#COMMANDS
def OnMessageStatus(Message, Status):
    global admin
    global nick
    global lock
    global accessList
    global bannedList
    global safewordList
    global commandList
    global bcheck
    global vwordList
    global quoteList
    global msgcount
    try:
        msg = Message.Body
        chat = Message.Chat
        send = chat.SendMessage
        senderDisplay = Message.FromDisplayName
        senderHandle = Message.FromHandle
        message = ''
        if lock == True:
            if Status == 'SENT' or (Status == 'RECEIVED' and senderHandle in accessList):
                if msg == '!unlock':
                    lock = False
                    send(nick + ' Unlocked!');

        if lock == False:
            if Status == 'RECEIVED' and senderHandle not in bannedList:
                msgcount = msgcount + 1

                if msgcount == 30:
                    option = random.randint(1, 3)
                    time.sleep(3)
                    if option == 1:
                        send('Type "!info" or "!help" for common information and help.');
                    elif option == 2:
                        send(nick);
                    elif option == 3:
                        send('');
                    msgcount = 1

                messageTemp = msg.split()
                n = 0
                did_it_work = False
                if msg.startswith('!'):
                    for x in commandList:
                        if messageTemp[0] == x:
                            did_it_work = True
                    if did_it_work == True:
                        print('[NOTICE] '+ senderDisplay +' ('+senderHandle+') issued command: '+"'"+msg+"'")
                        if senderHandle not in safeuserList:
                            for x in bcheck:
                                if x == senderHandle:
                                    n += 1
                            if n == 9: #<--- ###Trigger word is 1 above the number### aka the 10th command is the trigger.
                                send(nick + senderDisplay + ', you are now banned from using commands due to flooding!');
                                bannedList.append(senderHandle)
                                updateList('banned')
                                while n < 0:
                                    bcheck.remove(senderHandle)
                                    n -= 1
                            else:
                                bcheck.append(senderHandle)
                                n = 0
            else:
                n = 0

                if msg.lower().startswith(admin):
                    print '\a'

            if Status == 'SENT' or (Status == 'RECEIVED' and senderHandle not in bannedList):

###           #     if msg in vwordList :
###              #      send.can;
###                 #   print 'A'

                if msg == '!help':
                    helpFile = open('help.txt','r')
                    for line in helpFile.readlines():
                        message = message + nick + line
                    send(message);

                if msg == '!info':
                    infoFile = open('info.txt','r')
                    for line in infoFile.readlines():
                        message = message + nick + line
                    send(message);

                if msg.startswith('!isup '):
                    url = msg.replace('!isup ', '', 1);
                    send(nick + isUP(url));

                if msg.startswith('!md5 '):
                    word = msg.replace('!md5 ', '', 1);
                    send(nick + 'MD5 Hash : ' + md5(word));

                if msg.startswith('!os '):
                    if senderHandle in safeuserList:
                        command = msg.replace('!os ', '', 1);
                        os.system(command);

                if msg.startswith('!topic '):
                    topic = msg.replace('!topic ', '', 1);
                   # Message.Body = 'Changing topic name to...'
                    send("[NOTICE] Changing topic by user's request");
                    send('/topic ' + topic);

            if Status == 'SENT' or (Status == 'RECEIVED' and senderHandle in accessList):
                if msg.startswith('!access '):
                    if msg.startswith('!access add '):
                        name = msg.replace('!access add ', '', 1);
                        if name in accessList:
                            send(nick + 'User [' + name + '] already has access!');
                        elif name not in accessList:
                            accessList.append(nick)
                            accessList.sort()
                            updateList('access')
                            send(nick + 'User [' + name + '] has gained access!');
                    elif msg.startswith('!access list'):
                        name = msg.replace('!access list ', '', 1);
                        for name in accessList:
                            message = message + nick + name + '\n'
                        send(message);
                    elif msg.startswith('!access remove '):
                        name = msg.replace('!access remove ', '', 1);
                        if name in accessList:
                            accessList.remove(name)
                            accessList.sort()
                            updateList('access')
                            send(nick + 'User [' + name + '] has lost access!');
                    elif nick not in accessList:
                        send(nick + 'User [' + name + '] has no access!');

                if msg.startswith('!vword '):
                    if msg.startswith('!vword add '):
                        name = msg.replace('!vword add ', '', 1);
                        if name in vwordList:
                            send('Word Already Stored!');
                        elif name not in vwordList:
                            vwordList.append(nick)
                            vwordList.sort()
                            updateList('vword')
                            send('Word Stored');
                    elif msg.startswith('!vword list'):
                        name = msg.replace('!vword list ', '', 1);
                        send('Please refer to the vword.txt');

                if msg.startswith('!ban '):
                    if msg.startswith('!ban add '):
                        name = msg.replace('!ban add ', '', 1);
                        if name in bannedList:
                            send(nick + 'User [' + name + '] is already banned!');
                        elif name not in bannedList:
                            bannedList.append(nick)
                            bannedList.sort()
                            updateList('banned')
                            send(nick + 'User [' + name + '] has been banned!');
                    elif msg.startswith('!ban list'):
                        name = msg.replace('!ban list ', '', 1);
                        for name in bannedList:
                            message = message + nick + name + '\n'
                        send(message);
                    elif msg.startswith('!ban remove '):
                        name = msg.replace('!ban remove ', '', 1);
                        if name in bannedList:
                            bannedList.remove(name)
                            bannedList.sort()
                            updateList('banned')
                            send(nick + 'User [' + name + '] has been unbanned!');
                        elif nick not in bannedList:
                            send(nick + 'User [' + name + '] is not banned!');

          #      if msg.contains('youtube.com/watch?v='):
             #       for friend in skype.Friends:
                #        if not friend.OnlineStatus == Skype4Py.olsOffline:
                   #         try:
                      #          skype.CreateChatWith(friend.Handle).SendMessage(nick + '[GLOBAL MESSAGE]\r\n' + nick + message)
                         #   except:
                            #    print '[ERROR] ' + str(sys.exc_info()[1])

                if msg.startswith('!global '):
                    message = msg.replace('!global ', '', 1);
                    for friend in skype.Friends:
                        if not friend.OnlineStatus == Skype4Py.olsOffline:
                            try:
                                skype.CreateChatWith(friend.Handle).SendMessage(nick + '[GLOBAL MESSAGE]\r\n' + nick + message)
                            except:
                                print '[ERROR] ' + str(sys.exc_info()[1])
                if msg == '!lock':
                    lock = True
                    send(nick);

#                if msg == '!party':
#                    send('/topic PARTY HARD!');
#                    for friend in skype.Friends:
#                        if not friend.OnlineStatus == Skype4Py.olsOffline:
#                            try:
#                                send('/add ' + friend.Handle);
#                            except:
#                                print '[ERROR] ' + str(sys.exc_info()[1])

                if msg == '!restart':
                    os.system('python restart.py');
                    sys.exit();
    except:
        send(nick + '[ERROR] ' + str(sys.exc_info()[1]));

#START INSTANCE
import os
if os.name == 'nt':
    os.system('cls')
else:
    os.system('clear')
print '******************************************************************************'
infoFile = open('info.txt','r')
for line in infoFile.readlines():
    print '- ' + line.replace('\n', '')
print 'Checking for Skype4Py API...'
try:
    import Skype4Py
    skype = Skype4Py.Skype();
    skype.OnAttachmentStatus = OnAttach
    skype.OnMessageStatus = OnMessageStatus
    skype.FriendlyName = ''
    print 'Skype4Py API found!'
except:
    print 'Failed to locate Skype4Py API! Quitting...'
    print '******************************************************************************'
    sys.exit() 
print 'Checking for Skype process...'
if skype.Client.IsRunning:
    print 'Skype process found!'
elif not skype.Client.IsRunning:
    print 'Skype process not found!'
    try:
        print 'Starting Skype process...'
        skype.Client.Start()
    except:
        print 'Failed to start Skype process! Quitting...'
        print '******************************************************************************'
        sys.exit() 
print 'Connecting API to Skype...'
try:
    skype.Attach();
except:
    print 'Failed to connect API to Skype! Quitting...'
    print '******************************************************************************'
    sys.exit()
print 'Loading access list...'
accessFile = open('database/access.txt','r')
for line in accessFile.readlines():
    name = line.replace('\n', '');
    accessList.append(name)
    accessList.sort()
accessFile.close()
print 'Access list contains ' + str(len(accessList)) + ' names!'
print 'Loading banned list...'
bannedFile = open('database/banned.txt','r')
for line in bannedFile.readlines():
    name = line.replace('\n', '');
    bannedList.append(name)
    bannedList.sort()
bannedFile.close()
print 'Banned list contains ' + str(len(bannedList)) + ' names!'
print 'Loading VWORD list...'
vwordFile = open('database/vword.txt','r')
for line in vwordFile.readlines():
    name = line.replace('\n', '');
    vwordList.append(name)
    vwordList.sort()
vwordFile.close()
print 'VWORD list contains ' + str(len(vwordList)) + ' words!'
print 'Loading quote list...'
quoteFile = open('database/quote.txt','r')
for line in quoteFile.readlines():
    quote = line.replace('\n', '');
    quoteList.append(quote)
    quoteList.sort()
quoteFile.close()
print 'Quote list contains ' + str(len(quoteList)) + ' quotes!'
print 'Loading safe user list...'
safeuserFile = open('database/safeuser.txt','r')
for line in safeuserFile.readlines():
    safeuser = line.replace('\n', '');
    safeuserList.append(safeuser)
    safeuserList.sort()
safeuserFile.close()
print 'SafeUser list contains ' + str(len(safeuserList)) + ' names!'
print 'Loading command list...'
commandFile = open('database/commands.txt','r')
for line in commandFile.readlines():
    command = line.replace('\n', '');
    commandList.append(command)
    commandList.sort()
commandFile.close()
print 'Command list contains ' + str(len(commandList)) + ' commands!'
print '******************************************************************************'
#ENDLESS LOOP
while True:
    raw_input(''); 
```

我打算放一些这样的代码：（已经导入了时间）

```
timer=180
while timer >0:
    time.sleep(1)
    timer -=1 
```

但我不知道放在哪里，或者如何

任何类型的帮助将不胜感激。谢谢！

**编辑：将最后一行更改为：**

```
timer=16
while timer >0:
    time.sleep(1)
    timer -=1
    if timer == 12:
        ccheck = bcheck
        ccheck.reverse()
        dcheck = len(ccheck)
        while dcheck !=0:
            for x in ccheck:
                if x == ccheck[0]:
                    bcheck.remove(x)
            ccheck = []
#raw_input(''); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T06:07:35.790

[http://docs.python.org/2/library/os.html](http://docs.python.org/2/library/os.html)

[os.fork](http://docs.python.org/2/library/os.html#os.fork)可能有用

```
pid = os.fork()
if pid == 0:
    print("I am the child!")
else:
    print("I am the parent!") 
```

子进程和父进程应该同时运行，因为它们现在是 2 个不同的进程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T06:12:41.587

当您检查是否应该禁止用户时，您可以检查最后一次发布的时间，如果超过一定时间则重置计数。您会比我更了解如何在您的代码中执行此操作。你不应该*需要*任何并发来做你想做的事。

# asp.net - 字符串无效日期时间

> ID：13538770
> 
> 赞同：1
> 
> 时间：2012-11-24T06:03:20.073
> 
> 标签：asp.net, asp.net-3.5

我正在将此代码编写为文本更改事件，但它显示字符串无效的错误。

```
 DateTime ts=Convert.ToDateTime(Joiningdate.Text);
   DateTime dt1=ts.AddMonths(6);
    txtcd.Text = dt1.ToShortDateString(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T06:05:17.263

DataTime 格式与将字符串转换为 DateTime 对象所需的格式不匹配。您可以使用[**DateTime.ParseExact()**](http://msdn.microsoft.com/en-us/library/1k1skd40.aspx)为您提供日期格式。

假设您的文本框格式为 dd/MM/YY

```
DateTime ts= DateTime.ParseExact(Joiningdate.Text, "dd/MM/yy", CultureInfo.InvariantCulture);
DateTime dt1=ts.AddMonths(6);
txtcd.Text = dt1.ToShortDateString(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T06:06:04.260

问题在于您的格式，`Joiningdate.Text`
您必须说明您的日期时间是什么格式。

如果您的日期时间是格式使用

```
DateTime ts= DateTime.ParseExact(Joiningdate.Text, "ddMMyyyy", 
                              CultureInfo.InvariantCulture);
DateTime dt1=ts.AddMonths(6); 
```

然后你可以转换回你想要的任何格式

```
ts.ToString("yyyyMMdd"); 
```

你可以通过这个链接

[将 DateTime 转换为字符串格式("yyyyMMdd")](https://stackoverflow.com/questions/3477735/convert-datetime-to-string-formatyyyymmdd)

# regex - 如何使用 sed 用逗号替换空格？

> ID：13538772
> 
> 赞同：31
> 
> 时间：2012-11-24T06:03:40.107
> 
> 标签：regex, unix, vim, replace, sed

我想用逗号分隔符替换每个字段之间的空格。有人可以告诉我该怎么做。我尝试了以下命令，但它不起作用。谢谢。

```
My command:
:%s//,/

53 51097 310780 1
56 260 1925 1
68 51282 278770 1
77 46903 281485 1
82 475 2600 1
84 433 3395 1
96 212 1545 1
163 373819 1006375 1
204 36917 117195 1 
```

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2012-11-24T06:07:42.343

如果您在谈论`sed`，则此方法有效：

```
sed -e "s/ /,/g" < a.txt 
```

在`vim`中，使用相同的正则表达式替换：

```
s/ /,/g 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-11-24T06:10:43.917

在里面`vim`，你想在正常（命令）模式下输入：

```
:%s/ /,/g 
```

在终端提示符下，您可以使用`sed`对文件执行此操作：

```
sed -i 's/\ /,/g' input_file 
```

**注意：**该`-i`选项`sed`表示“就地编辑”，因为它将修改输入文件。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-01-08T00:15:39.980

我知道这不是您要问的，但是，用换行符替换逗号，这很好用：

```
tr , '\n' < file 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-10-23T19:54:34.957

尝试以下命令，它应该适合您。

```
sed "s/\s/,/g" orignalFive.csv > editedFinal.csv 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-08-18T05:26:36.117

如果你想在终端上输出，那么，

```
$sed 's/ /,/g' filename.txt 
```

但是如果你想编辑文件本身，*即*如果你想用文件中的逗号替换空格，那么，

```
$sed -i 's/ /,/g' filename.txt 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2018-12-17T09:05:08.360

如果您的数据包含任意序列的空白字符（制表符、空格），并且您想用一个逗号替换每个序列，请使用以下命令：

```
sed 's/[\t ]+/,/g' input_file 
```

或者

```
sed -r 's/[[:blank:]]+/,/g' input_file 
```

如果要替换空格字符序列，其中包括其他字符，例如回车符和退格符等，请使用以下内容：

```
sed -r 's/[[:space:]]+/,/g' input_file 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-05-21T19:26:27.437

我刚刚确认：

```
cat file.txt | sed "s/\s/,/g" 
```

在 Cygwin 终端（mintty 2.9.0）中成功地用逗号替换空格。其他样本都不适合我。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2018-12-21T06:51:52.247

在 Linux 上使用下面的测试（它将用逗号替换空格）

```
 sed 's/\s/,/g' /tmp/test.txt | head 
```

稍后您可以使用以下命令将输出放入文件中：

```
sed 's/\s/,/g' /tmp/test.txt > /tmp/test_final.txt 
```

PS：test是你要使用的文件

# python - 给定一个值列表和一个键列表，如何从这两个列表中制作字典？

> ID：13538775
> 
> 赞同：1
> 
> 时间：2012-11-24T06:04:21.870
> 
> 标签：python

> **可能重复：**
> [如何将两个列表转换为字典（一个列表是键，另一个是值）？](https://stackoverflow.com/questions/13537595/how-to-convert-two-lists-into-a-dictionary-one-list-is-the-keys-and-the-other-i)

如果我有一个整数列表：

```
L=[1,2,3,4] 
```

我有一个元组列表：

```
K=[('a','b'),('c','d'),('e','f'),('g','i')] 
```

如何制作一个字典列表，其中键是 K 中的项目，值是 L 中的整数，其中每个整数对应于 K 中的项目

```
d={('a','b'):1,('c','d'):2,('e','f'):3,('g','i'):4} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-24T06:05:30.970

用于[`zip()`](http://docs.python.org/2/library/functions.html#zip)将两个可迭代对象组合成对，然后将其传递给`dict`构造函数：

```
d = dict(zip(K, L)) 
```

快速演示（考虑`dict`不保留订单）：

```
>>> L=[1,2,3,4]
>>> K=[('a','b'),('c','d'),('e','f'),('g','i')]
>>> dict(zip(K, L))
{('e', 'f'): 3, ('a', 'b'): 1, ('c', 'd'): 2, ('g', 'i'): 4} 
```

使用 for 循环并且没有`zip()`：

```
d={}
for i, key in enumerate(K):
    d[key] = L[i] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T06:07:14.133

你应该能够做到这一点`zip`：

```
zipped = zip(K, L)
d = dict(zipped) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T08:06:05.013

如果您需要使用 for 循环（这是您的作业吗？），您可以从以下开始：

```
d = {}
for i in xrange(len(K)): 
```

你应该自己弄清楚最后一行。

循环索引是一种您可以在其他语言中使用的技术，并且有时（很少）在 python 中是必需的。一般来说，你应该使用python的高级语言特性来让你的代码更容易阅读和调试。

# java - 将基类类型转换为继承类以调用函数（JAVA）

> ID：13538779
> 
> 赞同：0
> 
> 时间：2012-11-24T06:04:57.033
> 
> 标签：java

我有一个基类 Component，并且我有 ComponentA、ComponentB 等类继承自此类。我将组件存储在 HashMap 中，其中包含组件名称的键和组件的值。但是，如果我获得 ComponentA 的值并对其执行功能，它会将其视为 Component 类。是否可以将 Component 类型转换为 ComponentA 以执行 ComponentA 的方法，或者我是否需要研究另一种存储组件的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T06:12:28.933

You have an object of type component?

Component c = //some component

The type cast is simple, it's just

ComponentA a = (ComponentA)c

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T06:13:24.613

使用 @Override 注释确保您实际上覆盖了基类的方法：

```
public class Component {
    ...

    public void doSomething() {
        ...
    }
}

public class ComponentA extends Component {
    ...

    @Override
    public void doSomething() {
        ...
    }
} 
```

PS你不应该需要做任何演员。多态性的一个好处是它允许您通过公共基类使用不同类的对象。当您需要基类没有概念的派生类中的功能时，可以使用强制转换。对通过基类公开的功能使用强制转换只会破坏这种好处。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-24T06:13:59.707

如果您存储`ComponentA`在地图中，`Component`那么您的对象仍然是`ComponentA`. 在这种情况下，您可以进行类型转换，但我建议将实例类型检查为打击：

```
 Component element = map.get(componentKey);
        if(element instanceOf ComponentA){
           ComponentA elementA = (ComponentA)element;
           //use the elementA
           elementA.doSomething();
        }else if (element instanceOf ComponentB){
           ComponentB elementB = (ComponentB)element;
           //use the elementB
           elementB.doSomething();
        } 
```

此外，如果您覆盖所需的方法 from `Component`to`ComponentA`那么您不需要进行类型转换。正如我之前提到的，您的元素仍然是类型`ComponentA`，因此`ComponentA`将调用 in 的覆盖方法。

例如

```
 public class Component{
     public void printClass(){
         System.out.println("This is class Component");
     }
  }

  public class ComponentA{
     @Override
     public void printClass(){
        System.out.println("This is class ComponentA");
   }
  }

    Map<String, Component> map= new HashMap<String,Component>();
    Component component = new ComponentA();
    map.put("comp", component);
    Component component1 = map.get("comp");
    component1.printClass(); //<-- prints "This is class ComponentA" 
```

# c# - AppDomain 探测问题

> ID：13538792
> 
> 赞同：1
> 
> 时间：2012-11-24T06:07:19.257
> 
> 标签：c#, .net, appdomain

我正在尝试使用以下代码将位于用户定义位置的强命名程序集加载到 AppDomain 中：

```
 AppDomainSetup ads1 = new AppDomainSetup();
    if (ads1.PrivateBinPath != null)
    {
        ads1.PrivateBinPath += ads1.PrivateBinPath.Length == 0 ? "" : Path.PathSeparator.ToString();
    }
    ads1.PrivateBinPath += @"c:\work\abc1";
    sandbox1 = AppDomain.CreateDomain("sandbox1", null, ads1);
    Object o1 = sandbox1.CreateInstanceFromAndUnwrap(@"abc, Version=1.0.0.0, Culture=neutral, PublicKeyToken=f10808f3df0adc34", "Abc.Def"); 
```

当我运行时，我收到此错误：

```
Unhandled Exception: System.IO.FileNotFoundException: Could not load file or assembly 'file:///C:\Users\gel\Documents\Visual Studio 2012\Projects\ConsoleApplicat
ion1\ConsoleApplication1\bin\Debug\abc, Version=1.0.0.0, Culture=neutral, PublicKeyToken=f10808f3df0adc34' or one of its dependencies. The system cannot find the fil
e specified.
   at System.Reflection.RuntimeAssembly._nLoad(AssemblyName fileName, String codeBase, Evidence assemblySecurity, RuntimeAssembly locationHint, StackCrawlMark& stack
Mark, IntPtr pPrivHostBinder, Boolean throwOnFileNotFound, Boolean forIntrospection, Boolean suppressSecurityChecks)
   at System.Reflection.RuntimeAssembly.InternalLoadAssemblyName(AssemblyName assemblyRef, Evidence assemblySecurity, RuntimeAssembly reqAssembly, StackCrawlMark& st
ackMark, IntPtr pPrivHostBinder, Boolean throwOnFileNotFound, Boolean forIntrospection, Boolean suppressSecurityChecks)
   at System.Reflection.RuntimeAssembly.InternalLoadAssemblyName(AssemblyName assemblyRef, Evidence assemblySecurity, RuntimeAssembly reqAssembly, StackCrawlMark& st
ackMark, Boolean throwOnFileNotFound, Boolean forIntrospection, Boolean suppressSecurityChecks)
   at System.Reflection.RuntimeAssembly.InternalLoadFrom(String assemblyFile, Evidence securityEvidence, Byte[] hashValue, AssemblyHashAlgorithm hashAlgorithm, Boole
an forIntrospection, Boolean suppressSecurityChecks, StackCrawlMark& stackMark)
   at System.Reflection.Assembly.LoadFrom(String assemblyFile, Evidence securityEvidence)
   at System.Activator.CreateInstanceFromInternal(String assemblyFile, String typeName, Boolean ignoreCase, BindingFlags bindingAttr, Binder binder, Object[] args, C
ultureInfo culture, Object[] activationAttributes, Evidence securityInfo)
   at System.AppDomain.CreateInstanceFrom(String assemblyFile, String typeName)
   at System.AppDomain.CreateInstanceFromAndUnwrap(String assemblyName, String typeName)
   at System.AppDomain.CreateInstanceFromAndUnwrap(String assemblyName, String typeName)
   at ConsoleApplication1.Program.Main(String[] args) in c:\Users\gel\Documents\Visual Studio 2012\Projects\ConsoleApplication1\ConsoleApplication1\Program.cs:li
ne 69 
```

就好像 AppDomain 根本没有在 PrivateBinPath 中查找。我做错了什么？我在资源管理器窗口中进行了双重检查，我可以在 PrivateBinPath 中指定的位置看到程序集。如果我只执行 Assembly.LoadFile 并指定正确的路径，它就可以正常工作，但这会破坏尝试将其加载到另一个 AppDomain 的目的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T08:37:54.637

我已经修改了您的代码，并且效果很好。查看您需要完成的更改。

```
 AppDomainSetup ads1 = new AppDomainSetup();
        if (ads1.PrivateBinPath != null)
        {
            ads1.PrivateBinPath += ads1.PrivateBinPath.Length == 0 ? "" : Path.PathSeparator.ToString();
        }
        ads1.PrivateBinPath += @"D:\ConsoleApplication1\ClassLibrary1\bin\debug";
        AppDomain sandbox1 = AppDomain.CreateDomain("sandbox1", null, ads1);
        Object o1 = sandbox1.CreateInstanceFromAndUnwrap(@"ClassLibrary1.dll", "ClassLibrary1.Class1"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T06:33:39.337

我相信它无法将该程序集加载到您当前的 AppDomain 中，而不是加载到新的 AppDomain 中（它可能加载到那里）。

这种行为有时称为“将类型泄漏到另一个域”，是由于尝试直接使用创建的对象而引起的。要解决这个问题，需要在另一个 AppDomain 中完全创建类（即通过运行一些处理创建的自定义代码），而不是只公开两个域都知道的接口/类。查看[可卸载插件](http://www.codeproject.com/Articles/73096/Unloadable-plugins)了解详情。

本文采用的一小部分代码 - 在其他 AppDomain 中创建 RemoteLoader 类，`CreateInstanceFromAndUnwrap`并使用该对象在新 AppDomain 中加载/管理其他类型。

```
public class RemoteLoader : MarshalByRefObject
{ 
    public void Load(string assemblyName, string typeName)
    {
        object instance = Activator.CreateInstance(assemblyName, typeName);
        //Do something with instance, or return shared interface of it.
    }
} 
```

旁注：除非您出于教育目的考虑使用现有的插件框架，如[MEF](http://msdn.microsoft.com/en-us/library/dd460648.aspx)。

# jmonkeyengine - How to resolve junit library in jMonkeyEngine3 project

> ID：13538806
> 
> 赞同：4
> 
> 时间：2012-11-24T06:09:08.397
> 
> 标签：jmonkeyengine

I am new to JMonkeyEngine. I have downloaded and installed jMonkeyEngine3 SDK, and trying to make the Hello Sample Application but it always shows a dialog that says:

> JUnit library has not been downloaded

I have tried using Resolve Reference Problems and using Ant Library Manager but here I am not getting any single option for the JUnit library, please tell me how can I resolve this problem, thanks in advance..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T22:10:50.770

我遇到了同样的问题，只需右键单击项目->属性->库->编译测试并删除那里的junit库...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T08:51:35.273

转到帮助>检查最新更新，添加junit插件

# moq - 使用 Moq 时仍需要虚拟方法吗？

> ID：13538809
> 
> 赞同：2
> 
> 时间：2012-11-24T06:09:22.637
> 
> 标签：moq, virtual-functions

我们正在使用 Moq，我想知道`virtual`方法的当前角色是什么——在下面 2008 年的帖子中，很明显你必须将你的方法标记为虚拟才能使 Moq 工作（或从接口继承。）

[起订量讨论](https://groups.google.com/forum/?fromgroups=#!topic/moqdisc/LgLjZ9AX8nQ)

但是，在.Net 4.5 中仍然是这种情况，您需要`virutal`在要模拟的类中使用方法吗？当您围绕静态方法创建包装器类时，这是否也适用 - 包装器类要么继承自接口，要么需要标记有问题的方法`virtual`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T13:27:25.463

这在 .NET 4 或 4.5 中没有改变。正如您提供的链接所解释的那样，Moq 使用 Castle Windsor[动态代理](http://www.castleproject.org/projects/dynamicproxy/)生成从您希望模拟的类型派生的类型。因此，继承的标准规则适用。Moq 生成的派生类型只能拦截对任何普通派生类可以覆盖的方法的调用。

# python - Find contents of a USB drive on Windows in Python

> ID：13538811
> 
> 赞同：1
> 
> 时间：2012-11-24T06:09:36.337
> 
> 标签：python, windows, filesystems

I'm trying to get Python to get files from a USB drive on Windows (from a tablet, actually) and send them through the network. Windows does not offer me a drive letter for the USB device. The device just has a name. There is no option to mount it. diskpart does not see it and mountvol always tell me that "The parameter is incorrect."

The device appears inside of "Computer" under "Portable Devices". I can see the files. They're there, there is no doubt. How can I get Python to grab them? I can't even get to them from the command line. If I try to drag a folder from the drive to a command shell, the mouse pointer turns into a "forbidden" sign. I am given no option to mount or map the device in the Windows GUI.

What can I do?

# vb.net - How to update value in combo box using combo box text?

> ID：13538816
> 
> 赞同：1
> 
> 时间：2012-11-24T06:10:28.503
> 
> 标签：vb.net, combobox, textbox

I have a very simple question that i can't seem to find the answer, i have looked up and down in google, msdn with no luck...

it's really simple yet i can't seem to wrap my mind around it.

here goes:

If i'm using simple Drop down style combo box(the one that looks like a listbox with textbox attached on top of the cbobx control) when i want to update one of the value in it, once i start typing in the textbox the selection inside the combo box is gone. Thus i can't update the value inside the combo box.

i know i can use a regular text box to do this, but i'd really like to make this work or i would really loose sleep over this.

Thanks in advance for all your help.

Ray

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T07:27:06.020

在组合框中编辑选择似乎不是很直观，但以下应该可以解决问题：

```
 Private cbindex As Integer

 Private Sub ComboBox1_SelectedIndexChanged(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles ComboBox1.SelectedIndexChanged
    cbindex = ComboBox1.SelectedIndex
 End Sub

 Private Sub ComboBox1_LostFocus(ByVal sender As Object, ByVal e As System.EventArgs) Handles ComboBox1.LostFocus
    ComboBox1.Items(cbindex) = ComboBox1.Text
 End Sub 
```

# html - Firefox 不支持背景图像转换？

> ID：13538819
> 
> 赞同：0
> 
> 时间：2012-11-24T06:10:45.337
> 
> 标签：html, css, browser

```
-webkit-transition:background-image 0.6s ease-in;       
   -moz-transition:background-image 0.6s ease-in;
     -o-transition:background-image 0.6s ease-in;
        transition:background-image 0.6s ease-in; 
```

在上面的代码中，我已经尝试过 safri、firefox 和 chrome，只有 firefox 不起作用。我在网上查了一下，有人说firefox不支持这个，但我只是想确定一下，有没有其他方法可以在firefox中完成，否则我必须为firefox创建一个javascript控制的动画。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T06:47:51.280

根据 MDN，`background-image`尚不支持转换。但是，如果您想要滑动，您可以回退到使用图像精灵和动画`left`属性，或者图像层和动画`opacity`属性。

# android - 如何确保我的 Android 应用在英特尔手机上运行？

> ID：13538822
> 
> 赞同：3
> 
> 时间：2012-11-24T06:10:50.923
> 
> 标签：android, java-native-interface, intel

Android 手机[Intel AZ210](http://en.wikipedia.org/wiki/Intel_AZ210)有一个 Intel CPU，显然[30% 的 Google Play 应用程序无法在其上运行](http://crave.cnet.co.uk/mobiles/orange-san-diego-intel-phone-wont-run-third-of-android-apps-50008120/)。

我应该采取哪些步骤来确保我的应用程序在此类 Intel 驱动的设备上运行良好？
我想我应该首先避免使用 JNI？

注意：我没有这样的手机来进行测试。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-24T06:16:30.497

如果您的应用程序在[Android-x86](http://www.android-x86.org/)上运行，这将是一个非常明确的指标，它将在 Intel CPU 上运行。您可以简单地使用 VirtualBox 或其他 VM 主机安装它。

# java - How can I print out empty disk regions in Java, C++, C?

> ID：13538828
> 
> 赞同：3
> 
> 时间：2012-11-24T06:11:42.597
> 
> 标签：java, c++, c, io, filesystems

I would like to know my HDD's free areas. For example if my hard disk is divided into 100 million parts, can I see which parts of the disk are free, within a given range?

For example, if there are 100 million cells, and I want to know which cells are free between 99th million cell and 100th million cell - can I print the addresses in Java, C++, C etc?

# javascript - Convert PDF to a Base64-encoded string in Javascript

> ID：13538832
> 
> 赞同：29
> 
> 时间：2012-11-24T06:12:21.983
> 
> 标签：javascript, html, pdf, canvas, base64

I need to encode a PDF file to Base64 with Javascript. I can create Base64-encoded jpeg or png images in Javascript, but I could not find any way or sample code to create a Base64-encoded string from a PDF file.

Is it there any solution using a HTML5 canvas?

Thanks.

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2016-06-08T10:01:51.257

尝试这个 ：-

```
<input id="inputFile" type="file" onchange="convertToBase64();" />

<script type="text/javascript">
    function convertToBase64() {
        //Read File
        var selectedFile = document.getElementById("inputFile").files;
        //Check File is not Empty
        if (selectedFile.length > 0) {
            // Select the very first file from list
            var fileToLoad = selectedFile[0];
            // FileReader function for read the file.
            var fileReader = new FileReader();
            var base64;
            // Onload of file read the file content
            fileReader.onload = function(fileLoadedEvent) {
                base64 = fileLoadedEvent.target.result;
                // Print data in console
                console.log(base64);
            };
            // Convert data to base64
            fileReader.readAsDataURL(fileToLoad);
        }
    }
</script> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-24T06:19:26.400

以下是一个人的做法：

*   [http://blogs.adobe.com/formfeed/2009/08/base64_encode_a_pdf_attachment.html](http://blogs.adobe.com/formfeed/2009/08/base64_encode_a_pdf_attachment.html)

这是一个链接，它建议了其他几种可能的解决方案：

*   [客户端 Javascript 中的 Base64 编码和解码](https://stackoverflow.com/questions/2820249/base64-encoding-and-decoding-in-client-side-javascript)

# ssis - 无法使用 BIDS 安装 SSIS

> ID：13538839
> 
> 赞同：0
> 
> 时间：2012-11-24T06:13:03.350
> 
> 标签：ssis

刚才我已经开始使用 BIDS 学习 SSIS。我的机器上没有安装 BIDS，我无法做到这一点。你能给我任何参考网站或 PDF，我可以从中获得有关 SSIS 的所有控制流和数据流的详细信息吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T23:00:25.533

SSIS 的明显参考站点是[MSDN 上的 SSIS 站点](http://msdn.microsoft.com/en-us/sqlserver/cc511477)。

在任何人都可以帮助解决 BIDS 安装问题之前，您必须提供更多详细信息。

# php - php特殊符号

> ID：13538845
> 
> 赞同：-1
> 
> 时间：2012-11-24T06:14:24.863
> 
> 标签：php, reference, variable-assignment

> **可能重复：**
> [参考 - 这个符号在 PHP 中是什么意思？](https://stackoverflow.com/questions/3737139/reference-what-does-this-symbol-mean-in-php)

我正在使用[本教程](http://anantgarg.com/2009/03/13/write-your-own-php-mvc-framework-part-1/)学习 PHP MVC 。在那里我发现了以下用于对象初始化的特殊符号

```
$this->$model =&amp; new $model; 
```

我知道 & 用于在 HTML 中表示 & 符号（&）。这里是什么意思？。下面给出了符号所在的类。还有那个教程呢？它是一个好的吗？如果不是可以有人给我推荐一个更好的吗？

```
<?php
class Controller {

    protected $_model;
    protected $_controller;
    protected $_action;
    protected $_template;

    function __construct($model, $controller, $action) {

        $this->_controller = $controller;
        $this->_action = $action;
        $this->_model = $model;

        $this->$model =&amp; new $model;
        $this->_template =&amp; new Template($controller,$action);

    }

    function set($name,$value) {
        $this->_template->set($name,$value);
    }

    function __destruct() {
            $this->_template->render();
    } 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T06:22:13.587

`&`在这种情况下，用于通过引用分配的对象，但不推荐使用。在 PHP 5 中，对象被默认分配为引用，所以这里不需要使用它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-24T06:18:56.993

[`&amp; translates to &`](http://www.w3schools.com/tags/ref_entities.asp)所以这将是通过引用分配。（由 DCoders 评论）。
您所看到的实际上应该是：

```
$this->$model =& new $model; 
```

[=& in `php`与通过引用传递某些东西有关。](http://php.net/manual/en/language.references.pass.php)

虽然有些人会争辩说在 PHP5 上不需要它（我同意）**，但它并不完全相同，**并且知道它可能会有所帮助......

> （来自手册）
> 
> 经常提到的 PHP 5 OOP 的关键点之一是“对象默认通过引用传递”。这并不完全正确。
> 
> [**本节通过一些例子来纠正这种普遍的想法。**](http://php.net/manual/en/language.oop5.references.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T06:24:42.913

在 PHP 中

```
$a = &$b 
```

表示通过引用传递值。在 PHP 5 的版本中，所有对象都默认通过引用传递。所以你可以跳过 & 符号

```
$a = new b(); 
```

# c++ - 编写 C++“脚本”

> ID：13538850
> 
> 赞同：1
> 
> 时间：2012-11-24T06:15:35.677
> 
> 标签：c++, design-patterns, coding-style, main

我是用于研究的大型 C++ 库的独立开发人员（我是博士生）。假设该库有一堆实现酷算法的类：`Algorithm1`、`Algorithm2`等。然后我编写了一堆 C 风格的函数，它们是独立的“脚本​​”，使用该库来测试最近添加的功能或运行产生情节的模拟，然后我将其包含在非常出色的（我否认）期刊出版物中。库的设计遵循良好的软件工程原则（据我所知和能力），但链接库的“脚本”`main.cpp`不遵循任何原则，除了：“完成工作”。

我现在在一个文件中拥有超过 300 个这样的“脚本”（超过 20,000 行代码）。我对此没有任何问题，我仍然非常高效，这确实是最终目标。但我想知道这种方法是否有我刚刚学会忍受的主要弱点。

```
// File: main.cpp

#include <cool_library/algorithm1.h>
#include <cool_library/algorithm2.h> 
...
#include <cool_library/algorithmn.h> 

void script1() {
    // do stuff that uses some of the cool library's algorithms and data structures
    // but none of the other scriptX() functions
}

void script2() {
    // do stuff that uses some of the included algorithms and data structures
}

... 

// Main function where I comment in the *one* script I want to run.
int main() {
    // script1();
    // script2();
    // script3();
    ...
    script271();

    return 0;               
} 
```

编辑 1：我在这个过程中有几个目标：

*   最小化启动新脚本函数所需的时间。
*   让所有旧脚本功能触手可及，以供搜索。因此，我可以将这些脚本的一部分复制并粘贴到一个新脚本中。请记住，这*不*应该是供他人使用的好设计。
*   我不关心脚本文件的编译时间，因为它可以在一秒钟内编译，因为它现在有 20,000 行代码。

顺便说一句，我使用 Emacs 作为我的“IDE”，在 Linux 中，使用 Autoconf/Automake/Libtool 进程来构建库和脚本。

编辑 2：根据建议，我开始怀疑在这种情况下提高生产力的部分方法是否不是重构代码，而是自定义/扩展 IDE 的功能（在我的例子中是 Emacs）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T06:24:12.227

如果我是你，我会将那个巨大的文件分成 300 个较小的文件：每个文件只有一个`scriptNN()`并`main()`调用它。

现在，当您编译它时，您将拥有 300 个小型`scriptNN`可执行文件（尽管您可能需要为此创建合适`Makefile`的可执行文件）。

这有什么好处 - 现在您可以将这些脚本可执行文件用作构建块，以便由其他脚本（如 bash、python、perl 等）放置或调用。

**编辑**说明此设计如何实现您的目标。

*   *是时候开始新的脚本功能*了——只需复制一个现有文件并稍微调整一下。

*   *让所有旧的脚本功能在我的指尖都可以搜索*- emacs 可以在您拥有的所有其他脚本文件中进行多文件搜索。

*   *我不关心脚本文件的编译时间*——那没关系。但是您将立即获得所有这些，而无需编辑一个大文件`main()`并重新编译。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-24T06:19:45.790

您的示例可能是[脚本语言](http://en.wikipedia.org/wiki/Scripting_language)的一个很好的用例。更具体地说，您可以将所有`script*` C++ 函数粘到某个解释器上，例如[Lua](http://www.lua.org)、[Python](http://www.python.org/)、[Ocaml](http://caml.inria.fr/ocaml/)、[Guile](http://www.gnu.org/software/guile/)等......并让您的测试用例用脚本语言编写。

所有脚本语言都使您能够粘合您的 C（因此也是 C++）函数。对于 Lua，请参阅其[Lua API](http://www.lua.org/manual/5.2/manual.html#4)章节。对于 Python，请参阅其[扩展和嵌入 Python](http://docs.python.org/3/extending/)部分。对于 Ocaml，请参阅将[C 与 OCaml 接口](http://caml.inria.fr/pub/docs/manual-ocaml/manual033.html)部分。对于 Guile，请参阅[《C 语言编程》](http://www.gnu.org/software/guile/manual/html_node/Programming-in-C.html)一章。

您可能希望将解释器嵌入到您的`main`函数中，或者您可以使用新`C++`函数扩展现有的解释器（因此使用`main`解释器提供的一些）。

请注意，使用某些脚本语言可能会对您的库和软件的设计和架构产生深远影响

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-24T06:19:03.833

如果您对它感到满意，并且它对您有用，那就坚持下去。你说你是唯一的开发者，那就随心所欲。我总是花太多时间为我的项目考虑这样的事情：P。我学会了只关注重要和富有成效的事情。理论上的东西只在理论上起作用......

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-24T07:32:08.807

所有建议的答案都很好，您甚至可以将它们组合起来。只需添加我的 5 美分：您的执行流程完全符合[策略](http://en.wikipedia.org/wiki/Strategy_pattern)和[命令](http://en.wikipedia.org/wiki/Command_pattern)设计模式。您可能想看看他们的利益，但这是利益与投资的问题。

# uitableview - UItableview 单元格（再次）混淆了

> ID：13538862
> 
> 赞同：1
> 
> 时间：2012-11-24T06:18:21.530
> 
> 标签：uitableview, cell

基本上我有这个 UItableview，它在生成时由 2 个单元组成：一个带有分数，如果你触摸另一个，它会插入另一行分数。所有这一切都很好，但是当我滚动并且第一个单元格离开屏幕时，当它回来时它会在它上面添加另一个单元格（它叠加它）！我想我做错了什么`dequeueReusableCellWithIdentifier`，`addSubview`但我无法弄清楚它是什么......

这是我的代码：

```
(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    int feedIndex = [indexPath indexAtPosition:[indexPath length] - 1];
    static NSString *CellIdentifier1 = @"Cell1";
    static NSString *CellIdentifier2 = @"Cell2";

    if (feedIndex == 0)// configures the first cell

    {

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier1 forIndexPath:indexPath];

        if (cell == nil) {
            cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleValue1 reuseIdentifier:CellIdentifier1];

    textField1 = [[UITextField alloc] initWithFrame:CGRectMake(0, (44 - 15) / 2.0, 80, 15)];
    textField1.font = [UIFont boldSystemFontOfSize:15];
        textField1.tag = i+1;// to keep track of the cells that are created by the user
        i++;
    textField1.textAlignment = UITextAlignmentCenter;
        [textField1 addTarget:self//to get rid of the keyboard
                        action:@selector(saisieReturn:)
              forControlEvents:UIControlEventEditingDidEndOnExit];
    textField1.text = @"00";
            [cell.contentView addSubview:textField1];

    textField2 = [[UITextField alloc] initWithFrame:CGRectMake(80, (44 - 15) / 2.0, 80, 15)];
    textField2.font = [UIFont boldSystemFontOfSize:15];
                textField2.tag = i+1;
        i++;
    textField2.textAlignment = UITextAlignmentCenter;
        [textField2 addTarget:self
                      action:@selector(saisieReturn:)
            forControlEvents:UIControlEventEditingDidEndOnExit];
        textField2.text = @"00";
    [cell.contentView addSubview:textField2];

    textField3 = [[UITextField alloc] initWithFrame:CGRectMake(160, (44 - 15) / 2.0, 80, 15)];
    textField3.font = [UIFont boldSystemFontOfSize:15];
                textField3.tag = i+1;
        i++;
    textField3.textAlignment = UITextAlignmentCenter;
        [textField3 addTarget:self
                      action:@selector(saisieReturn:)
            forControlEvents:UIControlEventEditingDidEndOnExit];
        textField3.text = @"00";
        [cell.contentView addSubview:textField3];

    textField4 = [[UITextField alloc] initWithFrame:CGRectMake(240, (44 - 15) / 2.0, 80, 15)];
    textField4.font = [UIFont boldSystemFontOfSize:15];
                textField4.tag = i+1;
        i++;
    textField4.textAlignment = UITextAlignmentCenter;
        [textField4 addTarget:self
                      action:@selector(saisieReturn:)
            forControlEvents:UIControlEventEditingDidEndOnExit];
        textField4.text = @"00";
        [cell.contentView addSubview:textField4];
        }
            return cell;

    }

    else if (feedIndex == nbrow -1) //configures the second cell
    {

        UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier2 forIndexPath:indexPath];
        if(cell == nil) {
            cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier2];
        }
        cell.textLabel.text = @"Add score";

        return cell;
    }

    else // configures all of the other cells that are created by the user when he clicks and the second cell
    {

        UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier1 forIndexPath:indexPath];

        textField1 = [[UITextField alloc] initWithFrame:CGRectMake(0, (44 - 15) / 2.0, 80, 15)];
        textField1.font = [UIFont boldSystemFontOfSize:15];
        textField1.tag = i+1;
        i++;
        textField1.textAlignment = UITextAlignmentCenter;
        [textField1 addTarget:self//to get rid of the keyboard
                       action:@selector(saisieReturn:)
             forControlEvents:UIControlEventEditingDidEndOnExit];
        textField1.text = @"00";
        [cell.contentView addSubview:textField1];

        textField2 = [[UITextField alloc] initWithFrame:CGRectMake(80, (44 - 15) / 2.0, 80, 15)];
        textField2.font = [UIFont boldSystemFontOfSize:15];
        textField2.tag = i+1;
        i++;
        textField2.textAlignment = UITextAlignmentCenter;
        [textField2 addTarget:self
                       action:@selector(saisieReturn:)
             forControlEvents:UIControlEventEditingDidEndOnExit];
        textField2.text = @"00";
        [cell.contentView addSubview:textField2];

        textField3 = [[UITextField alloc] initWithFrame:CGRectMake(160, (44 - 15) / 2.0, 80, 15)];
        textField3.font = [UIFont boldSystemFontOfSize:15];
        textField3.tag = i+1;
        i++;
        textField3.textAlignment = UITextAlignmentCenter;
        [textField3 addTarget:self
                       action:@selector(saisieReturn:)
             forControlEvents:UIControlEventEditingDidEndOnExit];
        textField3.text = @"00";
        [cell.contentView addSubview:textField3];

        textField4 = [[UITextField alloc] initWithFrame:CGRectMake(240, (44 - 15) / 2.0, 80, 15)];
        textField4.font = [UIFont boldSystemFontOfSize:15];
        textField4.tag = i+1;
        i++;
        textField4.textAlignment = UITextAlignmentCenter;
        [textField4 addTarget:self
                       action:@selector(saisieReturn:)
             forControlEvents:UIControlEventEditingDidEndOnExit];
        textField4.text = @"00";
        [cell.contentView addSubview:textField4];

        return cell;            
    }} 
```

我是 iOS 开发新手，我在编写第一个应用程序时遇到了第一个问题！我一直在寻找整个互联网，但即使我找到了有类似问题的线程，我也无法解决我的问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-24T06:30:35.370

UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier1 forIndexPath:indexPath];

```
textField1 = [[UITextField alloc] initWithFrame:CGRectMake(0, (44 - 15) / 2.0, 80, 15)];
textField1.font = [UIFont boldSystemFontOfSize:15];
textField1.tag = i+1;
i++;
textField1.textAlignment = UITextAlignmentCenter;
[textField1 addTarget:self//to get rid of the keyboard
               action:@selector(saisieReturn:)
     forControlEvents:UIControlEventEditingDidEndOnExit];
textField1.text = @"00";
[cell.contentView addSubview:textField1];

textField2 = [[UITextField alloc] initWithFrame:CGRectMake(80, (44 - 15) / 2.0, 80, 15)];
textField2.font = [UIFont boldSystemFontOfSize:15];
textField2.tag = i+1;
i++;
textField2.textAlignment = UITextAlignmentCenter;
[textField2 addTarget:self
               action:@selector(saisieReturn:)
     forControlEvents:UIControlEventEditingDidEndOnExit];
textField2.text = @"00";
[cell.contentView addSubview:textField2];

textField3 = [[UITextField alloc] initWithFrame:CGRectMake(160, (44 - 15) / 2.0, 80, 15)];
textField3.font = [UIFont boldSystemFontOfSize:15];
textField3.tag = i+1;
i++;
textField3.textAlignment = UITextAlignmentCenter;
[textField3 addTarget:self
               action:@selector(saisieReturn:)
     forControlEvents:UIControlEventEditingDidEndOnExit];
textField3.text = @"00";
[cell.contentView addSubview:textField3];

textField4 = [[UITextField alloc] initWithFrame:CGRectMake(240, (44 - 15) / 2.0, 80, 15)];
textField4.font = [UIFont boldSystemFontOfSize:15];
textField4.tag = i+1;
i++;
textField4.textAlignment = UITextAlignmentCenter;
[textField4 addTarget:self
               action:@selector(saisieReturn:)
     forControlEvents:UIControlEventEditingDidEndOnExit];
textField4.text = @"00";
[cell.contentView addSubview:textField4];

return cell; 
```

# emacs - .emacs.d 目录和 .emacs 文件的独立 emacs 安装和位置

> ID：13538867
> 
> 赞同：0
> 
> 时间：2012-11-24T06:18:56.830
> 
> 标签：emacs, dot-emacs

我在我的 Windows 7 计算机上安装了多个 emacs，每个配置都略有不同。比方说`installation1`and `installation2`，哪里`installation1`是主要的 emacs，哪里`installation2`是附属的。

我想维护两组`.emacs`文件和`.emacs.d.`目录，`installation1`以便在默认`HOME`或`%appdata%`目录（`C-x C-f` `~/.emacs` `RET`）中查找它，但`installation2`根本无法`.emacs`在这些目录中找到文件。也就是说，我`installation2`不想查看目录或文件的`HOME`or`%appdata%`位置。理想情况下，这将通过重新定义 的扩展来实现。`.emacs.d``.emacs``~``installation2`

我想我可以拥有一个`(add-to-list 'load-path "C:/installation2-location/.emacs.d/lisp/")`并将其保存到与 emacs 可执行`.emacs`文件位于同一目录中的文件中`installation2`，但我不确定这是一个强大的解决方案。

欢迎提出建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T18:19:10.070

那么您可以使用系统类型变量。来自 Emacs 帮助

> system-type 是在“C 源代码”中定义的变量。它的价值是达尔文
> 
> 文档：该值是表示您正在使用的操作系统类型的符号。特殊值： `gnu' compiled for a GNU Hurd system.`为 GNU/Linux 系统编译的 gnu/linux'。
> `gnu/kfreebsd' compiled for a GNU system with a FreeBSD kernel.` darwin' 为 Darwin (GNU-Darwin, Mac OS X, ...) 编译。
> `ms-dos' compiled as an MS-DOS application.`windows-nt'
> 编译为本机 W32 应用程序。`cygwin' 使用 Cygwin 库编译。其他任何东西（在 Emacs 24.1 中，可能的有：aix、berkeley-unix、hpux、irix、usg-unix-v）表示某种 Unix 系统。

或者使用 system-name 来确定区分相同的机器。

最后，您可以创建一个函数来在安装 1 中加载您想要的内容，另一个在安装 2 中加载您想要的内容。但是我看不出有什么正当理由可以解释为什么要在同一台机器上维护不同的 emacs.d。

# macos - mac10.8 NPAPI插件未在opera上加载

> ID：13538874
> 
> 赞同：0
> 
> 时间：2012-11-24T06:19:41.743
> 
> 标签：macos, opera, npapi

我用 Xcode4.5 在 mac10.8 上写了一个 web 插件，它可以在 safari，firefox 上运行，但它不能在 opera 上运行，问题是 opera 无法加载我的插件，简单的问题是它不能执行
函数“NP_GetEntryPoints”和“NP_Initialize”，我不知道如何解决问题。有人可以帮助我，非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T15:44:57.303

如果您正在构建 64 位并且 Opera 可能不支持 64 位插件（但 Firefox 和 Safari 都支持），我不会感到惊讶。

确保你正在构建它 32 位，看看它是否有效。

# jquery - 用户名输入代码中不允许有空格

> ID：13538876
> 
> 赞同：0
> 
> 时间：2012-11-24T06:19:52.557
> 
> 标签：jquery

> **可能重复：**
> [使用 jQuery 查看输入是否有空格](https://stackoverflow.com/questions/13257007/see-if-input-has-spaces-with-jquery)

我有这个没有空格的代码。好吧，至少我认为注册时用户名中没有空格……现在看看它是针对每个键的！有人可以帮我把它变成空格吗？

```
(function($){
    $(function(){
        $('#username_reg').keyup(function(){
            str = $(this).val(),
            str = str.replace(/\s/g,''),
            $(this).val(str),
            alert('No space are allowed in usernames');
        });
    });
})(jQuery); 
```

我刚才也试过这段代码，没有用：/

```
$("input#username_reg").on("keydown", function (e) {
    return e.which !== 32;
 });​ 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-24T06:39:23.213

我相信下面的代码会做你想做的事：

```
jQuery(function($){
    $('#username_reg').keyup(function(e){
        if (e.which === 32) {
            alert('No space are allowed in usernames');
            var str = $(this).val();
            str = str.replace(/\s/g,'');
            $(this).val(str);            
        }
    }).blur(function() {
        var str = $(this).val();
        str = str.replace(/\s/g,'');
        $(this).val(str);            
    });
}); 
```

也就是说，在 keyup 上，如果键是空格，则显示带有消息的警报并删除空格。而且，在模糊删除字段中可能存在的任何空格 - 因为用户可以在不使用键盘的情况下复制/粘贴或拖放。

演示：http: [//jsfiddle.net/wP8mP/](http://jsfiddle.net/wP8mP/)

`event.preventDefault()`编辑：如果这是我的代码，我可能会完全删除警报 - 我只是通过调用按键来防止输入空格*，*并且在复制/粘贴的情况下仍然删除模糊的空格。

```
$('#username_reg').keydown(function(e){
    if (e.which === 32) {
        e.preventDefault();      
    }
}).blur(function() {
    // for variety's sake here's another way to remove the spaces:
    $(this).val(function(i,oldVal){ return oldVal.replace(/\s/g,''); });         
}); 
```

演示：http: [//jsfiddle.net/wP8mP/1/](http://jsfiddle.net/wP8mP/1/)

# javascript - 这个高阶函数叫什么？

> ID：13538880
> 
> 赞同：3
> 
> 时间：2012-11-24T06:20:37.117
> 
> 标签：javascript, coding-style, functional-programming, naming-conventions

我怀疑如何调用转换函数的高阶函数，以便它使用数组而不是参数列表。用语言解释起来很复杂，所以在 JavaScript 中有一个例子：

```
sum = function(a,b){ return a+b; };
foo = function(fn){
    return function(arr){
        return fn.apply(fn,arr);
    };
};
different_sum = foo(sum);
log(sum(2,3)); //5
log(different_sum([2,3])); //5 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T06:28:55.243

Scala 函数有一个类似的方法，它接受一个 n 元函数并返回一个将 n 元组作为唯一参数的一元函数。他们调用 method `tupled`，您可以在[文档`Function5`](http://www.scala-lang.org/api/current/scala/Function5.html)中看到它（或任何其他大于 1 的函数）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T06:27:24.097

在经典的*Javascript: The Good Parts*中，这被称为*应用调用模式*，是 Javascript 中的四种调用模式之一。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-24T06:41:36.410

似乎没有任何普遍使用的术语。

Javascript[`bind`方法](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/bind)包装了这样的函数调用，没有使用特殊术语。

Prototype[`bind`方法](http://prototypejs.org/doc/latest/language/Function/prototype/bind/)也是如此，那里也没有术语。

jQuery[`proxy`方法](http://api.jquery.com/jQuery.proxy/)的作用相同，也没有术语。

解释中使用了术语“包装”，但这当然是一个更广泛的术语。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-24T07:23:50.047

因为您似乎在问“为了便于阅读，我应该怎样称呼这个函数？” 验证“这是什么类型/分类的功能？”，我会投入两分钱：

```
remixInputMethod() 
```

实际上，这只是重新连接函数用户与程序交互的方式的问题。我想像这样的东西在你想要与它交互的程序中会很有用，方法是传入不同于你希望用户与之交互的方式的输入。

```
this.sum = function(a,b){ return a+b; };
remixInputMethod = function(fn){
    return function(arr){
        return fn.apply(fn,arr);
    };
};
var _sum = remixInputMethod(this.sum);

// Throughout your program, do some more advanced, funky stuff
var sums = (function buildListOfSums(num){
    var arr = [], output = 0;
    while(num--){
        arr.push(num);
    }

    while(arr.length > 2){
        output += _sum([arr[arr.length - 1], arr[arr.length - 2]]);
        arr.pop(arr[arr.length - 1]);
        arr.pop(arr[arr.length - 2]);
    }
    return output;
}(20));
console.log(sums);

// But for the user, lets say, who downloaded your API on Github and is using it to
// build their first webpage for their uncle
// who thinks they are smarter than bill gates
sum(1,2); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-24T06:37:51.320

我将其称为[可变参数函数](http://en.wikipedia.org/wiki/Variadic_function)。如果您不熟悉，可变参数函数采用参数列表并允许程序员将它们作为数组进行交互。

由于 Javascript 不支持可变参数函数，`fn.apply(context, args)`因此是实现它的方法。我不认为实际的实现很重要。

可变参数函数出现在几种不同的语言中，我最喜欢的包括：

*   C- var_args
*   D
*   去

D网站有一个相当不错的介绍：[http](http://dlang.org/function.html) ://dlang.org/function.html （搜索variadic）

**编辑：**

您的示例与可变参数函数完全相反。它不是采用 n 个参数并将它们作为数组进行交互，而是将一组参数作为单独的参数与它们进行交互。

我仍然认为这实际上与可变参数函数相同，因为它接受可变数量的参数，但它只是改变了您与这些参数交互的方式。

可能有一个更好的术语，但也许我们可以称它为`inverse variadic function`?

# css - css 部分标题在区域外具有悬停状态

> ID：13538881
> 
> 赞同：0
> 
> 时间：2012-11-24T06:20:47.860
> 
> 标签：css, html, hover

我有一个包含一个包含 h1 的锚标记的部分，h1 有一个背景图像，当我将鼠标悬停在 h1 背景图像上时，位置会发生变化以模仿翻转，但是，翻转在 h1 右侧的右侧也是活动的它尝试向右悬停，我试图摆脱边距和填充无济于事。

这是现场[直播](http://anderskitson.ca/update)

**html**

```
<!DOCTYPE html>
<html>
<head>
    <title>Portfolio of Anders Kitson</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <!--[if lt IE 9]>
    <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link rel="stylesheet" href="css/normalize.css">
    <link rel="stylesheet" href="css/styles.css">
    <script type="text/javascript" src="//use.typekit.net/lfr7txf.js"></script>
    <script type="text/javascript">try{Typekit.load();}catch(e){}</script>
</head>
<body>
<div id="container">
<header>
<h1>ASK</h1>
<h2>Anders Samuel Kitson, front end web developer.</h2>
</header>
<section id="siteThumbs"><!--not sure if this is appropriate use of the section tag-->
<a href="#"><h1>Springmethod.com</h1></a>
</section>
</div>
</body>
</html> 
```

**css**

```
/*variables*/
/*shared styles*/
#container {
  width: 960px;
  max-width: 90%;
  border: solid 0px #000;
  margin: auto; }

header h1 {
  background: url("../images/ask.gif");
  width: 97px;
  height: 96px;
  text-indent: -9000px; }
header h2 {
  font-family: "brandon-grotesque",sans-serif;
  font-weight: 300;
  font-size: 2.5em; }

#siteThumbs h1 {
  background: url("../images/springmethod.jpg");
  width: 321px;
  height: 241px;
  text-indent: -9000px;
  padding: 0;
  margin: 0; }

#siteThumbs a:hover h1 {
  background: url("../images/springmethod.jpg") 0 -241px no-repeat; }

/*media queries*/
/* Smartphones (portrait and landscape) */
@media only screen and (min-width: 0px) and (max-width: 767px) {
  header h2 {
    font-size: 1.5em; } } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T06:31:01.873

`h1`您可以在 a 内嵌套`div`，设置`div`' 的宽度以达到所需的效果。

```
<a href="#">
    <div style="width: 100px">
        <h1>Springmethod.com</h1>
    </div>
</a> 
```

# opengl - VBO中普通数据的OpenGL排列

> ID：13538882
> 
> 赞同：2
> 
> 时间：2012-11-24T06:21:00.753
> 
> 标签：opengl, vbo

在阅读简单 VBO 程序的示例时​​，我注意到正常数据与顶点数据之间似乎存在关联。但是从法线的定义来看，我会认为法线数据应该与人脸数据相关联。

从下面的代码段中，我可以注意到每个 MyVertex 的法线数据是相同的，因此“三角形面”的法线是有意义的。但我不确定如何存储较大对象的正常数据，其中几个面可能共享与存储在 GL_ELEMENT_ARRAY_BUFFER 中的相同顶点。

问题：OpenGL 在概念上如何处理普通数据？还是我对法线在某处应该如何工作做出了错误的假设？

（以下代码来自[http://www.opengl.org/wiki/VBO__-_just_examples](http://www.opengl.org/wiki/VBO_-_just_examples)）

```
struct MyVertex
  {
    float x, y, z;        //Vertex
    float nx, ny, nz;     //Normal
    float s0, t0;         //Texcoord0
  };

  MyVertex pvertex[3];
  //VERTEX 0
  pvertex[0].x = 0.0;
  pvertex[0].y = 0.0;
  pvertex[0].z = 0.0;
  pvertex[0].nx = 0.0;
  pvertex[0].ny = 0.0;
  pvertex[0].nz = 1.0;
  pvertex[0].s0 = 0.0;
  pvertex[0].t0 = 0.0;
  //VERTEX 1 
```

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T09:10:35.390

在 OpenGL 中，法线是矢量属性，就像位置或纹理坐标一样。

拥有每个面的法线似乎是合理的，但在实践中是行不通的。

原因：一个三角形在物理上是平坦的，但通常是曲面的近似值。*使三角形顶点之间的法线向量不同，您可以在它们之间进行插值，以获得曲面任意*点的近似法线向量。

将顶点法线视为平滑表面某些特定点的法线样本。

（当然，当渲染具有硬边的表面时，例如立方体，上述方法并没有真正的帮助，而且许多要求您拥有仅与法线不同的重复顶点。）

# php - 如何正确引用本地主机上 PHP、CSS 等的子目录（在 xampp 中）中的文件？

> ID：13538884
> 
> 赞同：3
> 
> 时间：2012-11-24T06:21:25.107
> 
> 标签：php, css, directory, xampp, localhost

我在 win7 上运行 XAMPP 以使用 PHP/MySQL/AJAX 测试相当简单的站点，并且遇到了无法正确引用文件的问题。

我知道那`C:\xampp\htdocs`是“等价于” `http://localhost/`，并且我在`C:\xampp\htdocs\lorem_ipsum`（即`http://localhost/lorem_ipsum/`）中有一个项目子目录。其中还有一些文件夹（一个用于 php 脚本，一个用于 css 样式表等）。

我在引用这些子目录中的文件时遇到问题。

例如，在 lorem_ipsum/index.php 我使用以下行：

```
require_once 'http://localhost/lorem_ipsum/php/login.php' 
```

这会产生错误：

```
Warning: require_once(): http:// wrapper is disabled in the server configuration by allow_url_include=0 in C:\xampp\htdocs\lorem_ipsum\index.php on line 13

Warning: require_once(http://localhost/lorem_ipsum/php/login.php): failed to open stream: no suitable wrapper could be found in C:\xampp\htdocs\lorem_ipsum\index.php on line 13

Fatal error: require_once(): Failed opening required 'http://localhost/lorem_ipsum/php/login.php' (include_path='.;C:\xampp\php\PEAR') in C:\xampp\htdocs\lorem_ipsum\index.php on line 13 
```

通过谷歌搜索，我发现这是某种“文件共享/安全”问题，但我完全不知道这意味着什么或如何解决它（我仍然是一个初学者）。

例如，当我使用以下 CSS 时：

```
background-image:url('http://localhost/lorem_ipsum/images/bg.png') 
```

背景是白色的，而不是“bg.png”。如果我使用`'./images/bg.png'`.

我尝试了各种不同的方法来引用文件，但都没有奏效。我还尝试关闭任何防火墙，但也没有用。

我最终的问题是：为什么所有的问题都与文件引用有关？

次要问题：PHP 和 CSS 错误是否相关，还是我把它们都搞砸了？我怎样才能阻止这种情况发生？apache/php 中是否有需要更改的设置，或者我只是编码错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T06:29:28.590

在 PHP 中，您应该从指定的 Document_Root 引用文件（在您的情况下为 C:\xampp\htdocs）。所以试试

```
require_once "/lorem_ipsum/phplogin.php"; 
```

如果文件托管正确，css 中的 url*应该可以工作。*但您也可以尝试使用相对路径，例如：

```
background-image:url('/lorem_ipsum/images/bg.png'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T06:54:08.533

给 require_once 命令定义变量，因为 HTTP:// 协议在 PHP ini 上的很多服务器上是不允许的，以减少一些冲突和麻烦。

```
<pre>
&lt;?
require_once(dirname(__FILE__) . "php/login.php")

//next script here..... 

?&gt;
</pre> 
```

或者你可能想要 make include 命令：

```
<pre>
&lt;?
include "php/login.php";

//do something here..

?&gt;
</pre> 
```

参考：[http](http://www.php.net/manual/en/function.require-once.php) ://www.php.net/manual/en/function.require-once.php / [http://www.php.net/manual/en/function.include.php](http://www.php.net/manual/en/function.include.php)

对于 css 是：

```
 <pre>
background-image:url('images/bg.png')
</pre> 
```

# iphone - 如何在折线地图视图中创建箭头？

> ID：13538892
> 
> 赞同：2
> 
> 时间：2012-11-24T06:23:16.490
> 
> 标签：iphone, ios

我想使用折线中的箭头显示当前位置。

# android - 如何解决错误转换为 Dalvik 格式失败？

> ID：13538902
> 
> 赞同：1
> 
> 时间：2012-11-24T06:24:17.170
> 
> 标签：android

> **可能重复：**
> [外部 JAR 上的“转换为 Dalvik 格式失败，错误 1”](https://stackoverflow.com/questions/2680827/conversion-to-dalvik-format-failed-with-error-1-on-external-jar)

当我运行我的应用程序时，这将在控制台中显示此错误。

> 无法执行 dex：无效的 LOC 标头（错误的签名）
> 
> 转换为 Dalvik 格式失败：无法执行 dex：无效 LOC 标头（错误签名）

任何人都可以帮我解决这个错误吗？为什么会发生此错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T06:40:13.247

这很可能是您的库的问题。

转到 Eclipse，然后右键单击您的项目，转到属性，android 构建路径，然后是库。在您的库列表中删除除您的 android XXX 文件之外的所有内容

你也可以尝试做项目 --> clean

# android - 使用JNI对图像实现水彩效果

> ID：13538905
> 
> 赞同：3
> 
> 时间：2012-11-24T06:24:28.753
> 
> 标签：android, image-processing, java-native-interface

我在 android 中为图像上的水彩效果实现了一些代码，但速度很慢（需要 2 分钟以上）现在我尝试在 JNI 中实现这个以提高击球速度，听到的是我的 java 代码

inPixels 是 Bitmap 的像素。

```
 protected int[] filterPixels( int width, int height, int[] inPixels ) 
    {
        int levels = 256;
        int index = 0;

        int[] rHistogram = new int[levels];
        int[] gHistogram = new int[levels];
        int[] bHistogram = new int[levels];
        int[] rTotal = new int[levels];
        int[] gTotal = new int[levels];
        int[] bTotal = new int[levels];
        int[] outPixels = new int[width * height];

        for (int y = 0; y < height; y++) 
        {
            for (int x = 0; x < width; x++) 
            {
                for (int i = 0; i < levels; i++)
                    rHistogram[i] = gHistogram[i] = bHistogram[i] = rTotal[i] = gTotal[i] = bTotal[i] = 0;

                for (int row = -range; row <= range; row++) 
                {
                    int iy = y+row;
                    int ioffset;
                    if (0 <= iy && iy < height) 
                    {
                        ioffset = iy*width;
                        for (int col = -range; col <= range; col++) 
                        {
                            int ix = x+col;
                            if (0 <= ix && ix < width) {
                                int rgb = inPixels[ioffset+ix];
                                int r = (rgb >> 16) & 0xff;
                                int g = (rgb >> 8) & 0xff;
                                int b = rgb & 0xff;
                                int ri = r*levels/256;
                                int gi = g*levels/256;
                                int bi = b*levels/256;
                                rTotal[ri] += r;
                                gTotal[gi] += g;
                                bTotal[bi] += b;
                                rHistogram[ri]++;
                                gHistogram[gi]++;
                                bHistogram[bi]++;
                            }
                        }
                    }
                }

                int r = 0, g = 0, b = 0;
                for (int i = 1; i < levels; i++) 
                {
                    if (rHistogram[i] > rHistogram[r])
                        r = i;
                    if (gHistogram[i] > gHistogram[g])
                        g = i;
                    if (bHistogram[i] > bHistogram[b])
                        b = i;
                }
                r = rTotal[r] / rHistogram[r];
                g = gTotal[g] / gHistogram[g];
                b = bTotal[b] / bHistogram[b];
                outPixels[index] = (inPixels[index] & 0xff000000) | ( r << 16 ) | ( g << 8 ) | b;
                index++;
            }
        }

        return outPixels;
    } 
```

**输出图像** ![在此处输入图像描述](../Images/d9b1473b6560dd3b2e126b1bdc6dd81d.png)

我尝试将此`java`代码转换为`c`代码，但我不知道出了什么问题，请听一下代码`C`

```
 void filterPixels( int width, int height, int inPixels[] )
    {

        int levels = 256;
        int index = 0;

        int rHistogram [levels];
        int gHistogram [levels];
        int bHistogram [levels];
        int rTotal   [levels];
        int gTotal [levels];
        int bTotal [levels];
        int outPixels [width * height];

        //Loop Variables
        int y ;
        int x ;
        int i ;
        int row ;
        int col ;
        int j ;

        int range = 5 ;

        for ( y = 0; y < height; y++)
        {
            for ( x = 0; x < width; x++)
            {
                for ( i = 0; i < levels; i++)
                    rHistogram[i] = gHistogram[i] = bHistogram[i] = rTotal[i] = gTotal[i] = bTotal[i] = 0;

                for ( row = -range; row <= range; row++)
                {
                    int iy = y+row;
                    int ioffset;
                    if (0 <= iy && iy < height)
                    {
                        ioffset = iy*width;
                        for ( col = -range; col <= range; col++)
                        {
                            int ix = x+col;
                            if (0 <= ix && ix < width) {
                                int rgb = inPixels[ioffset+ix];
                                int r = (rgb >> 16) & 0xff;
                                int g = (rgb >> 8) & 0xff;
                                int b = rgb & 0xff;
                                int ri = r*levels/256;
                                int gi = g*levels/256;
                                int bi = b*levels/256;
                                rTotal[ri] += r;
                                gTotal[gi] += g;
                                bTotal[bi] += b;
                                rHistogram[ri]++;
                                gHistogram[gi]++;
                                bHistogram[bi]++;
                            }
                        }
                    }
                }

                int r = 0, g = 0, b = 0;
                for ( j = 1; j < levels; j++)
                {
                    if (rHistogram[j] > rHistogram[r])
                        r = j;
                    if (gHistogram[j] > gHistogram[g])
                        g = j;
                    if (bHistogram[j] > bHistogram[b])
                        b = j;
                }
                r = rTotal[r] / rHistogram[r];
                g = gTotal[g] / gHistogram[g];
                b = bTotal[b] / bHistogram[b];
                outPixels[index] = (inPixels[index] & 0xff000000) | ( r << 16 ) | ( g << 8 ) | b;
                index++;
            }
        }
    } 
```

`java`我检查代码和代码的像素值`c`是否相同（对于相同的图像）

从我的 android 活动调用本机函数的代码。

```
int[] pix = new int[oraginal.getWidth() * oraginal.getHeight()];

                Bitmap bitmap = oraginal.copy(oraginal.getConfig(), true);
                bitmap.getPixels(pix, 0, bitmap.getWidth(), 0, 0,bitmap.getWidth(), bitmap.getHeight());
                filterPixelsJNI(bitmap.getWidth(), bitmap.getHeight(), pix);

                 bitmap.setPixels(pix, 0, bitmap.getWidth(), 0, 0,bitmap.getWidth(), bitmap.getHeight());
                 myView.setImageBitmap(bitmap); 
```

这是我第一次尝试 JNI，所以请帮助我。

**更新**

```
public native void filterPixelsJNI( int width, int height, int inPixels[] ); 
```

**JNI**

```
 JNIEXPORT void JNICALL Java_com_testndk_HelloWorldActivity_filterPixelsJNI (JNIEnv * env, jobject obj , jint width,jint height,jint inPixels[]){

     filterPixels( width, height, inPixels);
 } 
```

filterPixels 方法是从 c 代码调用的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T10:59:21.080

您的 JNI 代码存在几个问题。算法部分可能是正确的，但您没有正确处理 Java 数组到 C 数组的转换。

首先， 的最后一个参数`Java_com_testndk_HelloWorldActivity_filterPixelsJNI`应该是 type `jintArray`，而不是`jint []`。这就是将 Java 数组传递给 C 代码的方式。

一旦你得到这个数组，你就不能直接处理它，你必须把它转换成一个 C 数组：

```
JNIEXPORT void JNICALL Java_com_testndk_HelloWorldActivity_filterPixelsJNI (JNIEnv * env, jobject obj , jint width, jint height, jintArray inPixels) {

    int *c_inPixels = (*env)->GetIntArrayElements(env, inPixels, NULL);
    filterPixels( width, height, c_inPixels);
    // passing 0 as the last argument should copy native array to Java array
    (*env)->ReleaseIntArrayElements(env, inPixels, c_inPixels, 0);
} 
```

我建议您查看 JNI 文档，其中解释了如何处理数组：[http ://docs.oracle.com/javase/1.5.0/docs/guide/jni/spec/functions.html](http://docs.oracle.com/javase/1.5.0/docs/guide/jni/spec/functions.html)

请注意，现在有更简单的方法可以使用 android NDK 处理 Java 位图对象。有关详细信息，请在此处查看[我的另一个答案](https://stackoverflow.com/a/13526213/1417179)。

# php - 基于 PHP 网页的爬虫

> ID：13538907
> 
> 赞同：0
> 
> 时间：2012-11-24T06:24:42.273
> 
> 标签：php, html, scrape

我想做的是使用 PHP 来抓取我输入参数的网址的网站。

我想要整个原始源代码..但这还不是全部..

我希望它然后保存到一个 html 页面中，并保存到 php 脚本的本地服务器上。

有一个简单的片段吗？或者有人可以轻松地为我编写代码吗？

例如

我想抓取[http://google.com](http://google.com)

例如，mysite.com/scrape.php?url=http://google.com

我希望它将谷歌的首页保存到[http://mysite.com/scraped/google.com.html](http://mysite.com/scraped/google.com.html)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T06:29:27.023

这是一个脚本，它将指定 url 的内容保存到一个名为 的文件中`scraped.html`：

```
if (isset($_GET['url'])):
   $contents = file_get_contents($_GET['url']);
   file_put_contents('scraped.html', $contents);
endif; 
```

要在调用中使用 url，`file_get_contents()`您必须[`allow_url_fopen`](http://php.net/manual/en/filesystem.configuration.php#ini.allow-url-fopen)在`php.ini`文件中启用。

当然，这只会保存请求的 url 的实际来源，而不会保存任何其他资源，例如图像、脚本和样式表。

# javascript - 缓存文件直到下一页加载

> ID：13538910
> 
> 赞同：1
> 
> 时间：2012-11-24T06:25:43.973
> 
> 标签：javascript, html, browser-cache, cache-control

有没有办法在下一页加载之前缓存文件？

我看到`expires`and `max-age`，但它们需要一个时间增量，我不知道。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T17:09:37.153

一种选择是使用 JavaScript 为所有外部文件添加时间戳。

例如，如果您需要加载`http://path/myIcon.png`：

*   `var path="http://path/myIcon.png"+"?_ts="+new Date().toString();`
*   对所有 myIcon.png 图像使用上述路径（缓存）
*   在下一页加载时，时间戳将被更新，并且由于 url 已更改，浏览器将重新加载图像

# ruby - Ruby - 当我打印出字符串时如何保留 \n

> ID：13538914
> 
> 赞同：8
> 
> 时间：2012-11-24T06:26:26.457
> 
> 标签：ruby

`\n`当我用红宝石打印字符串时，我想保留，

就像现在，如果我使用`puts`or `print`，`\n`将以换行符结束：

```
pry(main)> print "abc\nabc"
abc
abc 
```

有没有办法让 ruby​​ 像这样打印出来：`abc\nabc`？

**更新**

对不起，也许我没有说得更清楚。我正在调试我的正则表达式，所以当我输出一个字符串时，如果 a`\n`显示为 a `\n`，而不是换行符，我会更容易检查。所以@slivu 的答案正是我想要的。多谢你们。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-24T06:34:29.430

我建议使用`p`而不是`puts`/ `print`：

```
p "abc\nabc"
=> "abc\nabc" 
```

事实上，`pry`你不需要使用它们中的任何一个，只需输入你的字符串并输入：

```
str = "abc\nabc"
=> "abc\nabc"
str
=> "abc\nabc" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-24T06:29:57.013

因为 \n 是一个特殊关键字，你必须通过在特殊关键字之前添加一个反斜杠来对其进行*转义*（因此，反斜杠也必须转义），如下所示`abs\\nabc`：如果您想打印`\\n`，则必须将其替换为`abs\\\\n`，依此类推（两个反斜杠以显示反斜杠）。

您也可以只使用单引号而不是双引号，这样特殊关键字就不会被解释。恕我直言，这是不好的做法，但是如果它使您的代码看起来更好，我想这是值得的 :)

以下是一些您可以逃脱的方法示例（有点像 TL；DR 版本）：

```
puts 'abc\nabc' # Single quotes ignore special keywords
puts "abc\\nabc" # Escaping a special keyword (preferred technique, IMHO)
p "abc\nabc" # The "p" command does not interpret special keywords 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-24T06:31:31.770

在 Ruby 中，不会插入单引号文字中的字符串，例如 'abc\nabc'。

```
1.9.3p194 :001 > print 'abc\nabc'
abc\nabc => nil 
```

vs 带双引号

```
1.9.3p194 :002 > print "abc\nabc"
abc
abc => nil 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-24T09:37:01.287

你也可以这样做

```
puts 'abc\nabc' 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-24T06:30:39.190

使用 %q 创建一个字符串，例如：

```
 str = %q{abc\nklm}
  puts str #=> 'abc\nklm' 
```

或者

```
 puts %q{abc\nklm} 
```

或使用转义字符

```
 puts "abc\\nklm" 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-04-09T05:58:59.433

要打印字符串：`abc\nabc` 编码字符串必须是：`abc\\nabc`不会生成换行符。

# asp.net-mvc-4 - 在 MVC 中的 onchange 之后值存储在哪里？

> ID：13538915
> 
> 赞同：0
> 
> 时间：2012-11-24T06:26:45.157
> 
> 标签：asp.net-mvc-4, html-select

我想做一个下拉列表，当我单击提交按钮时，它会回发选定的值。

我不知道我是否做得对，但到目前为止我已经四处搜索并想出了这个。

我只是想知道我是否做对了，以及一旦它回发它会将值存储在哪里。

```
@using (Html.BeginForm())
{
    @Html.DisplayName("Name:")<br />
    @Html.TextBox("NAME")<br />

    @Html.DisplayName("Password:")<br />
    @Html.TextBox("PASS")<br />

    @Html.DisplayName("Team Name:")<br />
    @Html.DropDownListFor(x => x.Teams, new SelectList(Model.Teams, "value", "TeamNAME"), new {onchange = "submit()"})

    <input type="submit" value="ADD" />
} 
```

想在这里取值

```
[HttpPost]
        public ActionResult Index()
        {

            //GET VALUE OF THE SELECTED TEAM HERE
            return RedirectToAction("Index");
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T06:41:32.110

它看起来非常接近——唯一的一点是，您应该一致地使用模型绑定的 HTML 帮助器方法，或者不使用。也就是说，使用`TextBoxFor`and `DropDownListFor`， or `TextBox`and `DropDownList`，但不要混用和匹配。

如果您使用模型绑定的，那么您应该能够简单地将模型类型作为参数添加到您的回发操作中：

```
public ActionResult Index(MyModel postback) 
```

对于未绑定的，您可以使用它们的名称单独添加参数：

```
public ActionResult Index(string NAME, string PASS, string TEAM) 
```

（假设您将更改为`@Html.DropDownList("TEAM", new SelectList(Model.Teams, "value", "TeamNAME"), new {onchange = "submit()"})`）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T06:41:30.047

**详细信息：**以下假设您正在使用一个名为 Team 的模型，并且您正在视图中使用该模型。（代码未测试）

**看法**

```
@Html.DropDownListFor("Teams", String.Empty) 
```

**控制器**

```
[HttpGet]
public ActionResult Index()
{
    ViewBag.Teams = new SelectList(db.Team, "TeamId", "TeamNAME");
    return View();
}

[HttpPost]
public ActionResult Index(Team team)
{
    // Here is your selected Team id
    //team.TeamId

    return View();
} 
```

查看本教程以获取有关使用 DropDownList 的更多信息

[MVC 4 教程](http://www.asp.net/mvc/tutorials/mvc-4/getting-started-with-aspnet-mvc4/examining-the-edit-methods-and-edit-view)

# windows - 如何在 wp7 中的 SOAP 请求中传递参数

> ID：13538920
> 
> 赞同：0
> 
> 时间：2012-11-24T06:27:30.673
> 
> 标签：windows, windows-phone-7

我已经完成了 wp7 中的简单 SOAP 解析，并在我的应用程序中添加了 SOAP 服务的引用。

但我不明白如何在soap请求中传递参数？

我的 SOAP 服务是这样的

```
http://www.manarws.org/ws/manarService.asmx?op=fnGetSubCertificate 
```

证书 ID 为：8

我已经搜索了过去 5 天，但没有任何方法可以做到这一点。

请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T09:06:40.313

为您的项目添加服务参考后，正如我在上一篇 SO 帖子中解释的那样：

您可以像这样发出 Web 请求并传递参数。

```
manarServiceSoapClient client = new manarServiceSoapClient();
client.fnGetSubCertificateCompleted += client_fnGetSubCertificateCompleted;
client.fnGetSubCertificateAsync("8"); 
```

并在 Completed 处理程序中获得响应

```
void client_fnGetSubCertificateCompleted(object sender, fnGetSubCertificateCompletedEventArgs e)
    {
        var resp = e.Result;
    } 
```

我得到了这样的回应

```
[{"ArTitle":"مركز السمع والكلام ","EnTitle":"Hearing & Speech Center ","PhotosCatsId ...
//Removed the rest 
```

# java - 在 HashMaps 中具有自定义比较器的 TreeMaps

> ID：13538921
> 
> 赞同：4
> 
> 时间：2012-11-24T06:28:15.077
> 
> 标签：java, hashmap, comparator, treemap

我对 Java 很陌生，尤其是我在下面讨论的主题，但是我花了很多时间试图解决这个问题并阅读之前在这个网站上给出的答案，但我并没有真正找到任何东西直接点，所以我认为这可能值得一问。

我的问题实际上是双重的。我要解决的实际问题涉及构建一个订单簿程序，我想使用价格时间优先级进行排序。最终目标是构建一个结构，看起来像我编写`HasMap<ticker, TreeMap<Priority,Order>>`的`Priority`一个类，它首先基于价格然后按时间实现比较器。这样做让我想到了我在这里提出的问题（我正在处理的实际设置并不真正相关，但我想说明我为什么要看这个）。

假设我想`TreeMap`用 keys`K`和 values构建一个`V`。那么当然`TreeMap`需要知道如何比较`K`. 我的问题：如果`K`已经实现了一个比较器，并定义了比较方法，会`TreeMap`读吗？还是我还需要在构造函数中指定比较器？在这个问题上，我最喜欢的一点是使用 . 在类中编写一个比较器类`TreeMap`，如下所示：[Java: SortedMap, TreeMap, Comparable? 如何使用？](https://stackoverflow.com/questions/1440006/java-sortedmap-treemap-comparable-how-to-use)

现在，到目前为止，我实际上已经将比较器传递给了构造函数，并且它似乎构建得很好。但是当我尝试将其传递给 时`HashMap`，我得到一个错误。代码如下：

```
protected Comparator<Priority> priorityCompare;

protected TreeMap<Priority, Order> _buy = new TreeMap<Priority, Order>((Comparator<? super Priority>) priorityCompare);

protected HashMap<String, TreeMap<Priority, Order>> _buyBook;
protected HashMap<String, TreeMap<Priority,Order>> _sellBook; 
```

问题是我真的希望`TreeMap`s 内部的`HashMap`s 使用 this `Comparator`，但是当我这样做时 Java 会生气。所以我的第二个问题是：如果你想使用这样的结构 (HashMap(-,TreeMap))，并且你希望 TreeMap 使用自定义比较器，你会怎么做呢？

**编辑：**我在上面提到了这一点，但没有显示我在说什么。对于那个很抱歉。我实际上想要的情况是这样的：

```
protected HashMap<String, TreeMap<Priority, Order>((Comparator<? super Priority>) priorityCompare)> _buyBook;
protected HashMap<String, TreeMap<Priority,Order>((Comparator<? super Priority>) priorityCompare)> _sellBook; 
```

这样一来，TreeMaps 就知道我希望他们如何在类 Priority 上使用 Comparator。但是，这样做时，它给了我一个语法错误（并且只是告诉我删除这些标记）。我还尝试将 _buy （如我最初的代码框中所写）作为值传递，但这不起作用，我一完成就立即意识到这是愚蠢的。无论如何，我如何让 TreeMap 知道我希望它如何在上面的 HashMap 内部比较 K 中的键的问题确实是我遇到的更大的问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T06:34:53.443

如果您`TreeMap`实现的关键`equals()`,`hashCode()`和`Comparable<Key>`, 那么`TreeMap`将使用关键类的`compareTo()`方法。

编辑：

至于您的代码，在 Eclipse 中使用 Java7 进行编译时没有错误。我什至能够做到这一点，不需要演员：

```
protected Comparator<Priority> priorityCompare;
protected TreeMap<Priority, Order> _buy = new TreeMap<Priority, Order>(priorityCompare); 
```

编辑2：

您的代码目前不是有效的 Java。考虑：

```
protected Map<String, Map<Priority, Order>> _buyBook = 
    new HashMap<String,Map<Priority,Order>>();
public void init() 
{
    _buyBook.put("key1", _buy);
    // or
    _buyBook.put("key1", new TreeMap<Priority, Order>(priorityCompare));
} 
```

您的 _buyBook 声明实例化了`HashMap`唯一的。您必须将它们的实例创建`TreeMap<Priority, Order>`到. 在实例化每个包含的 s之前，您无法设置比较器。`put()``HashMap``TreeMap`

# iphone - 同时具有不同速度的动画

> ID：13538931
> 
> 赞同：1
> 
> 时间：2012-11-24T06:30:15.137
> 
> 标签：iphone, ios, ipad, animation

我想以三种不同的速度执行三个标签的动画。标签1 `with a duration of`1.0 秒。标签`with a duration of`2 2.5 秒。标签3 `with a duration of`5.0 秒。

我尝试了“setAnimationDuration”方法，但它不起作用。谁能告诉我，我在哪里做错了？

编辑：完整场景：我有一个滚动视图。当我从右向左滑动时，背景图像会随着滚动视图的每一页都有不同的背景图像而变化。随着滚动，标签也开始动画，似乎它们是从下一页开始，在完全滚动时，它们会停止到它们的特定位置。我正在根据 currentoffset 执行动画。

代码：

```
- (void) scrollviewDidScroll:(UIScrollView *)scrollView{
    if(currentOffset > 1024)
        {
          [UIView beginAnimation: nil context:nil];
          [UIView setAnimationDuration: 1.0];
          label1.frame = CGRectMake(2048-currentoffset+ 100, Y, Width, Height);
          [UIView commitAnimation];
        }
    if(currentOffset > 1024)
        {
          [UIView beginAnimation: nil context:nil];
          [UIView setAnimationDuration: 2.5];
          label2.frame = CGRectMake(2048-currentoffset+ 100, Y+20, Width, Height);
          [UIView commitAnimation];
        }
    if(currentOffset > 1024)
        {
          [UIView beginAnimation: nil context:nil];
          [UIView setAnimationDuration: 5.0];
          label3.frame = CGRectMake(2048-currentoffset+ 100, Y+20, Width, Height);
          [UIView commitAnimation];
        }
      } 
```

问题是 setAnimationDuration 不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T07:54:15.653

试试这个代码。

```
[UIView animateWithDuration:1.0
                      delay:1.0
                    options:UIViewAnimationOptionTransitionNone
                 animations:^{
                      label3.frame = CGRectMake(2048-currentoffset+ 100, Y+20, Width, Height);
                 }
                 completion:^(BOOL completed) {

                 }
]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T07:17:13.120

尝试以每秒调用一次的方法调用您发布的代码，如下所示：

```
NSTimer *t = [[NSTimer alloc] initWithFireDate:nil interval:1.0 target:self selector:@selector(yourmethod) userInfo:nil repeats:YES]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T17:18:06.043

尝试这个：

```
- (void)scrollviewDidScroll:(UIScrollView *)scrollView {
    if(currentOffset > 1024) {

        [UIView animateWithDuration:1 animations:^{
            label1.frame = CGRectMake(2048-currentoffset+ 100, Y, Width, Height);
        }];

        [UIView animateWithDuration:2.5 animations:^{
            label2.frame = CGRectMake(2048-currentoffset+ 100, Y+20, Width, Height);
        }];

        [UIView animateWithDuration:5 animations:^{
            label3.frame = CGRectMake(2048-currentoffset+ 100, Y+20, Width, Height);
        }];
    }
} 
```

# codeigniter - Codeigniter - 每个控制器的挂钩

> ID：13538933
> 
> 赞同：1
> 
> 时间：2012-11-24T06:30:29.343
> 
> 标签：codeigniter

我在我的 CI 应用程序“专门的 pre_controller 钩子”中使用钩子。
但问题是每次向任何其他控制器发出请求时都会激活钩子，即使是我不希望在其中激活钩子的控制器。可以只为一个控制器启用钩子吗？就像 playframework 中的 @Before 注释一样。
提前致谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-24T08:33:16.063

你为什么不把这个逻辑放在你的控制器的构造函数中呢？

如果您有多个希望共享此功能的控制器，只需在`CI_Controller`其中扩展一个新类`application/core/MY_Controller.php`并将功能放入其中，然后在控制器中让它们扩展该类而不是默认的 CI_Controller（您可以在其中添加多个类`MY_Controller.php`）！

您放入覆盖类中的任何内容都将在`MY_Controller.php`控制器其余部分的代码之前执行，模拟`pre_controller`钩子。

只要记住也要调用父构造函数：

```
function __construct(){
   parent::__construct();
} 
```

有关扩展核心的更多信息，请参阅手册：[https ://www.codeigniter.com/user_guide/general/core_classes.html](https://www.codeigniter.com/user_guide/general/core_classes.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-24T02:11:31.960

您还可以将代码放入库中，以便在需要时使用。我最终使用了我的解决方案，因为我可以将身份验证逻辑与模块分开。它也使更新变得更容易。

# iphone - Google plus 请求 URI 问题

> ID：13538934
> 
> 赞同：5
> 
> 时间：2012-11-24T06:30:33.223
> 
> 标签：iphone, google-plus

在我的应用程序中，我使用 google plus 来分享内容。在这里，当我按下登录按钮时，它需要电子邮件/密码，然后在按下登录后出现以下错误。

![在此处输入图像描述](../Images/97720b73be8645417ef27088059024e3.png)

我已经使用以下步骤创建了应用程序

![在此处输入图像描述](../Images/6713bdd67cba1147de0906ce0aba6ba4.png)

如何获得正确的解决方案并在 G+ 墙上分享内容？

我正在使用以下重定向网址，这些网址在我的 G+ 应用程序中

```
signInButton_.scope = [NSArray arrayWithObjects:@"urn:ietf:wg:oauth:2.0:oob",@"http://localhost", nil]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T03:37:02.070

该[`scope`属性](https://developers.google.com/+/mobile/ios/api/interface_g_p_p_sign_in_button#a30f0c6d798e83adf53d134a19d8a6c79)不是重定向 URI 的列表，而是该属性是 OAuth 范围的列表，其中列出了您将要求用户授予的权限。您应请求登录的基本范围是`https://www.googleapis.com/auth/plus.me`获取用户的公开 Google+ 身份。

您将列出访问其他服务的其他范围，例如您列出的 Google 日历`https://www.googleapis.com/auth/calendar.readonly`。查找您感兴趣的相应 Google REST API 文档，以查看该服务所需的范围。

通过[使用您的 bundle ID 设置带有 URL 方案的 URL 类型](https://developers.google.com/+/mobile/ios/getting-started#add_a_url_type)，您的应用程序将自己注册为该方案的处理程序（bundle ID）。共享后，Google+ 会尝试使用您在控制台项目中注册的捆绑包 ID 将您的用户发送回您的应用程序。[有关 URL 方案的更多信息](http://mobiledevelopertips.com/cocoa/launching-your-own-application-via-a-custom-url-scheme.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T11:54:40.790

经过长时间的搜索，我得到了这个问题的解决方案。解决方案是我们需要**将 Bundel Identifier 设置为与应用程序中相同**。如果您设置不同的标识符，则会引发此类问题。

另外请为登录设置以下范围

```
 signInButton_.scope = [NSArray arrayWithObjects:
                       @"https://www.googleapis.com/auth/plus.me",
                       nil]; 
```

如果您想在登录和分享后返回您的应用程序，请**从信息中设置 URLScheme**

![在此处输入图像描述](../Images/9dbcaccc1558cd196a8e9d22d2f2ac5f.png)

# haskell - 覆盖条件失败

> ID：13538937
> 
> 赞同：2
> 
> 时间：2012-11-24T06:30:39.677
> 
> 标签：haskell

我有一段非常简单的代码如下：

```
{-# LANGUAGE
    MultiParamTypeClasses,
    FunctionalDependencies,
    FlexibleInstances,
    FlexibleContexts
#-}

class Graph g n e | g -> n e where
    nodes           :: g -> [n]                             
    edge            :: g -> (n,n) -> Maybe e                

instance Graph g Int e where
    nodes g = []
    edge g (n1,n2) = Nothing 
```

我收到与功能依赖项之一的覆盖条件失败相关的错误。我是否需要添加 -XUndecidableInstances 才能允许这样做？或者我该如何解决这个问题？谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T18:40:20.737

您的问题不是`Int`but `e`。覆盖条件记录在[GHC 的手册](http://www.haskell.org/ghc/docs/7.0.1/html/users_guide/type-class-extensions.html)Sect 中。*7.6.3.2。放宽了实例上下文的规则*并说：

> 覆盖条件。对于类的每个函数依赖项 tvs [left] -> tvs [right]，S(tvs [right] ) 中的每个类型变量都必须出现在 S(tvs [left] ) 中，其中 S 是将类声明中的每个类型变量映射到对应的替换输入实例声明。

在实践中是什么意思？在您的情况下，您的功能依赖项表示`g -> n e`，这意味着对于每个实例，由`n`和表示`e`的类型对于由 表示的类型是唯一的`g`。现在假设您正在定义一个实例

```
instance Graph SomeTypeG SomeTypeN SomeTypeE where
    ... 
```

覆盖条件表示任何类型变量出现在`SomeTypeE`或`SomeTypeN`必须出现在`SomeTypeG`. 如果不满足怎么办？假设一个类型变量`a`出现在`SomeTypeE`但没有出现在`SomeTypeG`. 然后，对于 fixed `SomeTypeG`，我们将通过用不同的类型替换`a`.

在你的情况下

```
instance Graph g Int e where
    ... 
```

`e`是这样一个类型变量，所以通过覆盖条件它必须出现在 中`g`，这是不正确的。因为它没有出现在那里，所以您的定义将暗示它`Graph g Int Int`是一个实例，`Graph g Int (Maybe Char)`是另一个实例等，这与要求恰好有一个的功能依赖相矛盾。

如果你定义了类似的东西

```
instance Graph g Int Char where 
```

那么就可以了，因为`Int`and中没有类型变量`Char`。另一个有效实例可能是

```
instance Graph (g2 e) Int e where 
```

现在哪里`g2`有样了`* -> *`。在这种情况下，`e`出现在 中`g2 e`，它满足覆盖条件，并且确实`e`总是由 唯一确定`g2 e`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T16:35:16.347

您的功能依赖表明您选择的类型 g 分别决定了您的节点和元素类型 n 和 e。那么，说所有图形类型 g（对 g 一无所知）确定节点类型为 Int 是否有意义？

# c - 使用 C 函数 fopen 时调用函数或程序

> ID：13538940
> 
> 赞同：1
> 
> 时间：2012-11-24T06:31:17.100
> 
> 标签：c, file, virtual, fopen

我在 C 中有一种情况，我想在调用 fopen 时调用 c 函数。这意味着我想拥有某种“虚拟文件”。当我在这个“虚拟文件”上使用 fopen 时，我想调用一个函数来生成文件中的数据。

这可能吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T06:33:17.323

没有直接的方法来调用*函数*来产生输出。但是，您可以使用 调用另一个进程`popen()`，这可能足以满足您的需要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T06:35:48.467

在不可能的标准C中，AFAIK，

如果您使用带有 GNU [Glibc](http://www.gnu.org/software/libc/)的系统（例如 GNU/Linux），您可以拥有[自定义流](http://www.gnu.org/software/libc/manual/html_node/Custom-Streams.html)，尤其是 thru `fopencookie`。

请注意，标准 C++ 库还提供（它自己的变体）流，您可以拥有自己的。

在 GNU/Linux 上，内核还允许您使用[FUSE](http://fuse.sourceforge.net/)[在用户空间中提供文件系统](http://en.wikipedia.org/wiki/Filesystem_in_Userspace)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-24T06:42:35.727

> 这意味着我想拥有某种“虚拟文件”。当我在这个“虚拟文件”上使用 fopen 时，我想调用一个函数来生成文件中的数据。

为此，您需要编写自己的文件系统。幸运的是，其他人已经完成了困难的部分：看看[FUSE](http://fuse.sourceforge.net)。例如，您*可以*编写一个文件系统，其中“文件”实际上是 RSS 提要。然后，您可以使用标准文件调用从这些提要中读取数据。

现在，您是否*应该*采用这种方法是一个不同的问题。如果您可以控制读取文件的代码，那么让它调用适当的数据提供函数可能比需要安装自定义文件系统更容易。

# python - Python 不检测 gst-plugins-bad 中的 soundtouch 元素（bpmdetect 和 pitch）

> ID：13538944
> 
> 赞同：4
> 
> 时间：2012-11-24T06:31:38.173
> 
> 标签：python, gstreamer, pitch, audio-processing, soundtouch

我已经安装了`gstreamer`,`gst-plugins-bad`及其 python 绑定。

以下代码从给定目录中选择一首歌曲并播放它。

```
import pygst
pygst.require("0.10")
import gst
import pygtk
import gtk
import os

class Main:
    def __init__(self):
        self.pipeline = gst.Pipeline("mypipeline")

        self.musicFiles = os.listdir("musicFiles")

        self.currentSong = self.musicFiles[0]

        self.findFile = gst.element_factory_make("filesrc", "file")
        self.findFile.set_property("location", "musicFiles/" + self.currentSong)
        self.pipeline.add(self.findFile)

        self.mad = gst.element_factory_make("mad", "mad")
        self.pipeline.add(self.mad)

        self.findFile.link(self.mad)

        self.audioconvert = gst.element_factory_make("audioconvert", "convert")
        self.pipeline.add(self.audioconvert)

        self.mad.link(self.audioconvert)

        self.audioresample = gst.element_factory_make("audioresample", "resample")
        self.pipeline.add(self.audioresample)

        self.audioconvert.link(self.audioresample)

        self.getbpm = gst.element_factory_make("bpmdetect", "bpm")
        self.pipeline.add(self.getbpm)

        self.audioresample.link(self.getbpm)

        self.sink = gst.element_factory_make("playsink", "sink")
        self.pipeline.add(self.sink)

        self.audioresample.link(self.sink)

        self.pipeline.set_state(gst.STATE_PLAYING)

start=Main()
gtk.main() 
```

但是，当我尝试创建`bpmdetect`元素时，会出现以下错误：

```
Traceback (most recent call last):
  File "/Users/shubhitsingh/Desktop/Stuff/COLLEGE/US/Carnegie Mellon/Fall '12/15-112/Term Project/Practice/gstreamertutorial-1.py", line 49, in <module>
    start=Main()
  File "/Users/shubhitsingh/Desktop/Stuff/COLLEGE/US/Carnegie Mellon/Fall '12/15-112/Term Project/Practice/gstreamertutorial-1.py", line 37, in __init__
    self.getbpm = gst.element_factory_make("bpmdetect", "bpm")
ElementNotFoundError: bpmdetect 
```

`gst-plugins-bad`可以毫无问题地创建其他元素。`soundtouch`它只是(`bpmdetect`和)下的两个元素`pitch`无法创建。帮助？

# svg - 在 KineticJS 中加载 SVG

> ID：13538945
> 
> 赞同：4
> 
> 时间：2012-11-24T06:31:56.440
> 
> 标签：svg, kineticjs

我正在尝试加载 SVG 文件并想使用 KineticJS (KJS) 在画布上显示它，所以想知道是否可以在使用 KJS 的画布中显示任何具有随机形状和路径的 SVG 文件？

现在通过不同软件导出的 SVG 也有很大的不同，例如通过 Adob​​e Illustrator 导出的 SVG 中具有填充、描边、描边宽度等。作为它们各自标签的属性，而通过 Inkscape 导出的 SVG 具有所有这些即填充、描边、描边宽度等。作为它们各自标签的“样式”属性的字符串值。

因此，我即将编写自己的 SVG 解析器，专门针对 AI 导出的 SVG 格式，然后使用它通过 KJS 在画布上重绘 SVG。但在此之前，我只想检查：

1.  有没有可用的工具，可以将所有原始（线、矩形、圆等）标签转换为路径标签？即，而不是矩形和椭圆标记，它们被转换为它们的等效路径标记。
2.  除了 KJS，还有其他方法可以将 SVG 加载到画布上吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-21T15:19:28.333

不幸的是，您不能将`drawImage`SVG 转换为 Canvas（[测试](http://codepen.io/ArtemGr/pen/zjJlw)）。

但是您可以使用[canvg](http://code.google.com/p/canvg/)以自定义 KineticJS 形状（[测试](http://codepen.io/ArtemGr/pen/KoELC)）绘制 SVG：

```
var drawSvg = new Kinetic.Shape ({
  x: 10, y: 10,
  drawFunc: function (canvas) {
    canvas.getContext().drawSvg (svgSource, 0, 0, 25, 25)
  }
}); layer.add (drawSvg) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-09T01:41:17.447

实际上，可以将一个 SVG 的 drawImage() 绘制到 Canvas 中（ArtemGr 的代码对我来说在 FF 和 Chrome 中工作）。

但是在 Chrome 中，您会遇到 Origin Policy 错误（在[https://bugs.webkit.org/show_bug.cgi?id=17352](https://bugs.webkit.org/show_bug.cgi?id=17352)中报告了一个错误）。

我尝试将canvg与动力学一起使用，但我发现了2个问题：

1.  启用 Kinetic 的监听时**非常**慢；
2.  如果您需要缩放图像，它的渲染质量很差；

我发现的一个解决方案是使用 fabricjs 的 SVG 渲染，这被证明是非常优越的。代码如下所示：

```
var fabricSvg;
// uses the fabric SVG engine
fabric.loadSVGFromUrl(svgSource, function(objects, opts) {
  if (objects.length > 1) 
    fabricSvg = new fabric.PathGroup(objects, opts);
  else
    fabricSvg = objects;

  fabricSvg.originX = 'left';
  fabricSvg.originY = 'top';

  var drawSvg = new Kinetic.Shape({
    x: 10, y: 10,
    drawFunc: function(canvas) {
      // use fabric SVG engine with Kinetic canvas context
      fabricSvg.render(canvas.getContext());
    }
  });
  layer.add(drawSvg);
}); 
```

这样我们就可以使用 Kinetic 动画引擎，它比 Fabric 的性能更好，以及 Fabric 的 SVG 渲染模块。

# php - 从电子邮件消息中过滤零值（通过 FORm 生成）

> ID：13538946
> 
> 赞同：0
> 
> 时间：2012-11-24T06:32:40.513
> 
> 标签：php, forms, email, message

```
/*user is filing up form values that includes name , phone , product quantity...etc   */<BR/>
/*After clicking button  */
$mailto = randomuseremail@xxx.com
/* *//
$value1=$_GET['value1'];
$value2=$_GET['value2'];
$value3=$_GET['value3'];
.
.
.
$value20=$_GET['value20'];

$message = <<< EOD
< br> value 1 is:  $value1;
< br> value 2 is: $value2;
< br> value 3 is:  $value3;
.
.
.
< br> value 20 is - $value20;
... EOD ;
$success = mail($mailto, $message , $body, $headers); 
```

用户收到此电子邮件

```
You orderd: 
value 1 is:  1
value 2 is:  0
value 3 is:  0
...
value 20 is: 0 
```

而不是显示如何过滤/不显示 EOD 中的 0 或“”值（或有更好的方法）这是所需的电子邮件输出：

```
You orderd:
value 1 is:  1 /*or any other non zero | "" value   */ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T07:02:07.167

```
$message = '';
for ($i = 1; $i <= 20; $i++) {
  if ($_GET['value'.$i] != 0) {
    $message .= "<br> value $i is: " . $_GET['value'.$i]
  }
} 
```

# javascript - 有没有办法将当前位置标记添加到 gmaps4rails？

> ID：13538950
> 
> 赞同：0
> 
> 时间：2012-11-24T06:33:28.937
> 
> 标签：javascript, ruby-on-rails, google-maps, haml, gmaps4rails

我试图弄清楚如何将当前位置标记添加到 gmaps4rails 地图以及`map_points`使用`@map_points = @user.places.to_gmaps4rails`. 我看到了以下帖子：

[如何在 gmaps4rails 中使用标记显示用户的位置？](https://stackoverflow.com/questions/8405048/how-do-i-display-the-users-location-with-a-marker-in-gmaps4rails)

并尝试在那里实现 javascript，但它似乎不起作用。我将此代码添加到我的 javascript 部分，但由于某种原因，回调似乎没有触发：

```
= gmaps("map_options" => {"detect_location" => true, "center_on_user" => true, "auto_zoom" => false, "zoom" => 12, "auto_adjust" => true, "markers" => {"data" => @map_points}})

:javascript
  Gmaps.map.callback = function() {
    Gmaps.map.addMarkers({Lat: Gmaps.map.userLocation.lat(), Lng: Gmaps.map.userLocation.lng(), rich_marker: null, marker_picture:""});
    } 
```

编辑：这就是我现在所拥有的，但由于某种原因`addListenerOnce`没有触发：

```
- content_for :scripts do
  :javascript
    Gmaps.map.callback = function() {
      google.maps.event.addListenerOnce(Gmaps.map.getMapObject(),'idle', function(){
        navigator.geolocation.getCurrentPosition(add_map_marker,displayError);
      });

    };

    function add_map_marker(position){
      var lat = position.coords.latitude;
      var lng = position.coords.longitude;
      Gmaps.map.addMarkers([{
        "lng": lng,
        "lat": lat,
        "picture": "http://googlemaps.googlermania.com/google_maps_api_v3/en/Google_Maps_Marker.png",
        "width": "37",
        "height": "34"
      }]);
    }

    function displayError(error){
      alert('There is an error displaying location');
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T20:23:22.003

你应该使用[这里](https://github.com/apneadiving/Google-Maps-for-Rails/blob/1.x/app/assets/javascripts/gmaps4rails/gmaps4rails.base.js.coffee#L314)`addMarkers`定义的。

您应该传递一个 json 标记数组作为参数，由 a`to_gmaps4rails`或相同格式产生。

* * *

编辑：

```
:javascript
  Gmaps.map.callback = function() {
    Gmaps.map.addMarkers([
      {"description": "", "title": "", "sidebar": "", "lng": "", "lat": "", "picture": "", "width": "", "height": ""}
    ]);
  } 
```

如果地图尚不存在，请看[这里](https://github.com/apneadiving/Google-Maps-for-Rails/wiki/Ensure-your-map-is-loaded-in-callback)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T11:12:10.753

您到底在哪里添加了该代码？因为我认为无需重新加载，例如：

```
Gmaps.loadMaps(); 
```

无论如何它都行不通...要解决该问题，我想您必须描述整个路径。你究竟是如何加载所有内容的？如果是标准方式，您需要重新加载地图。

我还建议仔细研究（gmaps4rails 源）

```
Gmaps4rails::JsBuilder.create_js 
```

方法，如果这是您的默认行为，请尝试使用此自定义注入来开发自己的方法以进行回调（大约第 34 行）。

其他方法是调用一些 ajax 并使用 ujs 做：

```
 $('#map').html('<%= escape_javascript( gmaps({:last_map => false}) ) %>');
  Gmaps.map = new Gmaps4RailsGoogle();
  Gmaps.load_map = function() {
    Gmaps.map.map_options.maxZoom = 15;
    Gmaps.map.initialize();
    Gmaps.map.markers = <%=raw @json %>;
    Gmaps.map.create_markers();
    Gmaps.map.adjustMapToBounds();
    Gmaps.map.callback();
  };
  Gmaps.loadMaps(); 
```

# javascript - 使用 RaphaelJS 与两个动画同步时间

> ID：13538951
> 
> 赞同：2
> 
> 时间：2012-11-24T06:33:35.153
> 
> 标签：javascript, path, drawing, raphael, graphael

使用 RaphaelJS，我改编了几个脚本来创建两个我想要组合的动画：

1.  **首先，绘制虚线坐标[http://jsfiddle.net/jbirthler/CvhKx/2/](http://jsfiddle.net/jbirthler/CvhKx/2/)**

    ```
    var canvas = Raphael('canvas_container', 322, 273);
    var set = canvas.set(canvas.circle(110, 265, 7), canvas.circle(110, 7, 7), canvas.circle(7, 151, 7)).attr({
        stroke: "none",
        fill: "#666" });

    var pathstr = "M 109 255 l 0 -245 l -103 141 l 265 0";
    var path = dashline(canvas, pathstr, 4000, {
        stroke: '#828282',
        'stroke-dasharray': "--",
        'stroke-linecap': "butt",
        'stroke-width': 1,
        'fill-opacity': 0 }, 1000);

    function dashline(canvas, pathstr, duration, attr) {

        var guide_path = canvas.path(pathstr).attr({
            stroke: "none",
            fill: "none"
        });
        var path = canvas.path(guide_path.getSubpath(0, 1)).attr(attr);
        var total_length = guide_path.getTotalLength(guide_path);
        var start_time = new Date().getTime();
        var interval_length = 20;

        var interval_id = setInterval(function() {
            var elapsed_time = new Date().getTime() - start_time;
            var this_length = elapsed_time / duration * total_length;
            var subpathstr = guide_path.getSubpath(0, this_length);
            attr.path = subpathstr;
            path.animate(attr, interval_length);
        }, interval_length);
        return path;
    }​;​ 
    ```

    **[并且，在到达坐标http://jsfiddle.net/jbirthler/KqjHh/1/](http://jsfiddle.net/jbirthler/KqjHh/1/)时，在路径上缓和动画圈**

    ```
    var canvas = Raphael("holder", 322, 273);
    var set = canvas.set(canvas.circle(110, 265, 7),canvas.circle(110, 7, 7), canvas.circle(7, 151, 7)).attr({stroke:"none", fill: "#666"});
    var c = canvas.circle(110, 265, 10).attr({stroke: "#ddd", "stroke-width": 4});
    var fade = function (id) {
        return function () {
            set[id].attr({fill: "#fff", r: 12}).animate({fill: "#77bf00", r: 8}, 500);
        };
    };

    var run = animateCirc();

    function animateCirc() {
        var easex = ">",
            easey = ">";
        c.stop().animate({
            "0%":  {cy: 265, easing: easey, callback: fade(0)},
            "40%": {cy: 7, easing: easey, callback: fade(1)},
            "60%": {cy: 151, easing: easey, callback: fade(2)},
            "100%": {cy: 151, easing: easey, callback: fade(3)}
        }, 3000).animate({
            "0%":  {cx: 110, easing: easex},
            "40%": {cx: 110, easing: easex},
            "60%": {cx: 7, easing: easex},
            "100%": {cx: 300, easing: easex}
        }, 3000);
        return run;                
    };​ 
    ```

当虚线路径到达它们的坐标时，我想让圆圈动画。如果我能获得使用缓动的虚线路径，那将是一个加号，但大多数情况下，我只是希望将两者合二为一。

我能够比编写自己的脚本更好地阅读 javascript，但是如果有人对如何分解虚线脚本和代码所采取的步骤有任何见解，那对我来说将是非常有益的。

我关于堆栈溢出的第一篇文章（是的，是时候了）希望我足够具体！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T14:47:18.190

我自己从未使用过 Raphael，但这是我找到的解决方案：

您的第一个动画在 4（4000 毫秒）秒内运行，您可以在此块中看到：

```
var path = dashline(canvas, pathstr, 4000, {
    stroke: '#828282',
    'stroke-dasharray': "--",
    'stroke-linecap': "butt",
    'stroke-width': 1,
    'fill-opacity': 0
}, 1000); 
```

下一步是确定渲染圆圈的块，在这里你给它 3 秒的时间来运行，这可以通过将最后一个参数更改为 4000 来解决。接下来，你会注意到百分比。这些应该涉及转换计算，以将毫秒 (4000) 转换为每个动画点的百分比。

我观察了动画点，但结束代码看起来像这样：

```
function animateCirc() {
    var easex = ">",
        easey = ">";
    c.stop().animate({
        "0%":  {cy: 265, easing: easey, callback: fade(0)},
        "35%": {cy: 7, easing: easey, callback: fade(1)},
        "60%": {cy: 151, easing: easey, callback: fade(2)},
        "100%": {cy: 151, easing: easey, callback: fade(3)}
    }, 4000).animate({
        "0%":  {cx: 110, easing: easex},
        "35%": {cx: 110, easing: easex},
        "60%": {cx: 7, easing: easex},
        "100%": {cx: 300, easing: easex}
    }, 4000);
    return run;                
}; 
```

[您可以在此处](http://jsfiddle.net/jJCFL/)查看更新的（但不是 100% 同步的）版本。

```
var canvas = Raphael('canvas_container', 322, 273);
var set = canvas.set(canvas.circle(110, 265, 7), canvas.circle(110, 7, 7), canvas.circle(7, 151, 7)).attr({
    stroke: "none",
    fill: "#666"
});

var c = canvas.circle(110, 265, 10).attr({stroke: "#999", "stroke-width": 0});
var fade = function (id) {
    return function () {
        set[id].attr({fill: "#fff", r: 12}).animate({fill: "#77bf00", r: 8}, 500);
    };
};

var pathstr = "M 109 255 l 0 -245 l -103 141 l 265 0";
var path = dashline(canvas, pathstr, 4000, {
    stroke: '#828282',
    'stroke-dasharray': "--",
    'stroke-linecap': "butt",
    'stroke-width': 1,
    'fill-opacity': 0
}, 1000);

function dashline(canvas, pathstr, duration, attr) {
    var guide_path = canvas.path(pathstr).attr({
        stroke: "none",
        fill: "none"
    });
    var path = canvas.path(guide_path.getSubpath(0, 1)).attr(attr);
    var total_length = guide_path.getTotalLength(guide_path);
    var start_time = new Date().getTime();
    var interval_length = 20;

    var interval_id = setInterval(function() {
        var elapsed_time = new Date().getTime() - start_time;
        var this_length = elapsed_time / duration * total_length;
        var subpathstr = guide_path.getSubpath(0, this_length);
        attr.path = subpathstr;
        path.animate(attr, interval_length);

    }, interval_length);
    return path;
}
var run = animateCirc();

function animateCirc() {
    var easex = ">",
        easey = ">";
    c.stop().animate({
        "0%":  {cy: 265, easing: easey, callback: fade(0)},
        "35%": {cy: 7, easing: easey, callback: fade(1)},
        "60%": {cy: 151, easing: easey, callback: fade(2)},
        "100%": {cy: 151, easing: easey, callback: fade(3)}
    }, 4000).animate({
        "0%":  {cx: 110, easing: easex},
        "35%": {cx: 110, easing: easex},
        "60%": {cx: 7, easing: easex},
        "100%": {cx: 300, easing: easex}
    }, 4000);
    return run;                
}; 
```

请注意，您实际上可以使用 Raphael、Easel、Kinetic 或任何类型的 Canvas/SVG 渲染工具。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T15:04:20.850

@adamRenny[的回答](https://stackoverflow.com/a/13542303/796627)很简洁，很简单的修改（他打败了我，他提交的时候我还在写我的答案）。但它似乎不涉及真正的排队。必须手动计算时间以完全同步动画。但是，我在下面的回答将**彻底**改变代码。可能需要也可能不需要。

首先要做的是将虚线路径分成几条线（在你的情况下分成3个单独的线段）并在队列中为它们设置动画。可能可以将单个（组合）路径排队，但我还没有尝试过。

为了简化这个过程，我提取了所有路径坐标，因为它们也被圆圈使用。这样我们就可以循环绘制所有元素。

```
var canvas = Raphael('canvas_container', 322, 273),
    // here are the coordinates
    points = [ [110,265], [110,7], [7,151], [300,151] ],
    mCircle = canvas.circle(points[0][0],points[0][1],10).attr({stroke: "#999", "stroke-width": 4}),
    path = [],
    circles = [];

// draw the dots and (starting point of) lines
// note the lines are of 0 length so it's invisible, we only mark its starting point
for (var i = 0; i < points.length - 1; i++) {
    circles[i] = canvas.circle(points[i][0],points[i][1],7).attr({stroke: "none", fill: "#666"});
    path[i] = canvas.path('M'+points[i][0]+' '+points[i][1]).attr({
        stroke: '#828282',
        'stroke-dasharray': "--",
        'stroke-linecap': "butt",
        'stroke-width': 1,
        'fill-opacity': 0
    }); 
```

请注意，循环计数是`points.length - 1`因为最后一个坐标仅由移动圆使用，我们此时不在那里绘制任何东西。

然后我创建一个*工厂*函数来生成每组动画

```
// function to generate each set of animation
var fn = function(index) {
    var cPath = path[index], cCircle = circles[index],
        x1 = points[index][0], 
        x2 = points[index+1][0], 
        y1 = points[index][1], 
        y2 = points[index+1][1];

    return function(cb) {
        cPath.animate({path:'M'+x1+' '+y1+' L'+x2+' '+y2},500,'easeOut');
        mCircle.animate({cx:x2,cy:y2},500,'easeOut');
        cCircle.attr({fill: "#fff", r: 12}).animate({fill: "#77bf00", r: 8}, 500, cb);
    };
}; 
```

**最难**的部分来了。管理动画队列。您实际上可以使用其他库，例如 jQuery Deferred。然而，经过数小时的绝望，我决定编写自己的（非常简单的）队列系统。

```
// my custom Queue class
var Queue = function() {
    this.actionCount = 0;
    this.actions = [];

    var self = this;
    self._cb = function() {
        if (++self.actionCount != self.actions.length) self.run();
    };
};
Queue.prototype.run = function() {
    this.actions[this.actionCount](this._cb);
};
Queue.prototype.add = function(fn) {
    this.actions.push(fn);
}; 
```

在循环中，我们可以将每组生成的动画注册到队列中。并在循环完成后运行队列

```
for (var i = 0; i < points.length - 1; i++) {
    circles[i] = canvas.circle(points[i][0],points[i][1],7).attr({stroke: "none", fill: "#666"});
    path[i] = canvas.path(/*...*/);

    queue.add(fn(i));
}
queue.run(); 
```

这是[jsFiddle](http://jsfiddle.net/UYbp7/)

注意事项

*   虚线路径动画被缓和：p
*   添加更多动画点就像将它们添加到`points`数组中一样简单，其余部分自动完成 - [jsFiddle](http://jsfiddle.net/UYbp7/1/)
*   您应该能够从`fn`函数调整动画
*   队列类非常简单，没有任何检查和未经测试的生产。我创建它的唯一目的是回答这个线程。适用标准预防措施
*   这是我第一次接触拉斐尔，欢迎指正
*   该循环没有通过 JSLint，因为我调用了一个创建另一个函数的*工厂*函数。这在循环中似乎是一件坏事
*   因为我在回答之前创建了 jsFiddle，所以这里的代码比 jsFiddle 更好地注释

# javascript - 通过js与IE进行分行

> ID：13538960
> 
> 赞同：3
> 
> 时间：2012-11-24T06:35:01.940
> 
> 标签：javascript, internet-explorer

我一直在修改一个名为 lines 的数组，这些是函数完成之前的最后几行。用户必须将所选文本复制到剪贴板才能将其带到另一个程序。

```
 document.penta.IOField.value="";
    for (i=0; i < lines.length; i++) 
    {
    document.penta.IOField.value+= lines[i];
        if ((i + 1) < lines.length)
        {
        document.penta.IOField.value+= "\n"; 
        }

    document.penta.IOField.select(); 
```

如果将剪贴板粘贴到记事本中，使用Internet Explorer时数据不会分成行，但我用FireFox没有问题。

此外，在“如何使用”按钮下，在 Firefox 中打开的窗口刚刚足够大，而在 IE 中，有很多未使用的空间。我想知道为什么会这样。

该页面是 Spacer.htm，几行任何文本和任何选项都应该有助于测试它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T13:02:10.050

我可以使用以下方法解决此问题：

```
 <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
    "http://www.w3.org/TR/html4/loose.dtd"> 
```

# ruby-on-rails-3 - 在 Rails 中显示 URL 错误

> ID：13538961
> 
> 赞同：0
> 
> 时间：2012-11-24T06:35:02.817
> 
> 标签：ruby-on-rails-3

我正在使用 解析 Rails 控制器中的 URL `URI.parse`，即

```
URI.parse(user_URL) 
```

当用户输入诸如`%`之类的内容时，网页会引发错误

```
bad URI(is not URI?): % 
```

并显示错误页面。

相反，我希望它转到我的页面，上面写着“您的 URL % 无效”。可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T06:47:50.047

对于 URL 无效的情况，只需将`parse`调用包装在`begin`/`end`块中即可：`rescue`

```
begin
  URI.parse(user_URL)
  ... do some stuff ...
rescue URI::InvalidURIError
  redirect_to :invalid_url_page, :url => user_URL
end 
```

然后在您的`invalid_url_page`控制器操作（或任何您称之为该操作的操作）中，您可以使用`params[:url]`. 在与该操作关联的视图中，您可以使用以下命令显示消息“您的 URL % 无效”：

```
Your URL <%= params[:url] %> is not valid. 
```

# php - uploadify & PHP - 上传取消 & 页面刷新问题

> ID：13538962
> 
> 赞同：0
> 
> 时间：2012-11-24T06:35:14.503
> 
> 标签：php, mysql, uploadify

我已经在我现有的编程中集成了 uploadify 模块，现在一切正常。

现在，我想做两件事。

1 - 当我在文件上传过程中单击取消按钮时，文件上传过程立即取消，文件不会上传到服务器上，但文件名存储在数据库中。那么如何防止脚本在我取消上传时不将数据存储在数据库中？请帮助解决这个问题。

2 - 文件上传完成后是否可以刷新整个网页？也请帮忙。

非常感谢， KRA

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T09:36:02.143

尝试这个

```
$targetFolder = $UPLOAD_PATH; // Relative to the root
$verifyToken = md5('unique_salt' . $_POST['timestamp']);
if (!empty($_FILES) && $_POST['token'] == $verifyToken) {
$tempFile = $_FILES['Filedata']['tmp_name'];
$targetPath = $targetFolder;
$targetFileName = $int_pkid.".".$targetFileExt;;
$targetFile = rtrim($targetPath,'/') . '/' . $targetFileName;

// Validate the file type
$fileTypes = array('pdf','doc','docx'); // File extensions
$fileParts = pathinfo($_FILES['Filedata']['name']);

if (in_array($fileParts['extension'],$fileTypes)) {
    move_uploaded_file($tempFile,$targetFile);
    echo '1';

            //Will Enter this Block only when the upload is success
            //This should fix one of you
            $str_query_insert="INSERT INTO  tr_file_data (pkid,title,filename)";
            $str_query_insert.=" VALUES(".$int_pkid.",'".${str_title}."','".${targetFileName}."')";
            ExecuteQuery($str_query_insert);

            //To Reload, there are no straight legal ways, but can do with a twist
            //Method 1:
            Header('Location: '.$_SERVER['PHP_SELF']);
            Exit(); //optional
            //Method 2:
            echo '<script>parent.window.location.reload(true);</script>';

} else {
    echo 'Invalid file type.';
}
}

// To apply directly to uploadify
$(function() {
    $("#file_upload").uploadify({
        'swf'              : '/uploadify/uploadify.swf',
        'uploader'         : '/uploadify/uploadify.php',
        'onUploadComplete' : function(file) {
            alert('The file ' + file.name + ' finished proce`enter code here`ssing.');

                //Will Enter this Block only when the upload is success
                //This should fix one of you
                $str_query_insert="INSERT INTO  tr_file_data (pkid,title,filename)";
                $str_query_insert.=" VALUES(".$int_pkid.",'".${str_title}."','".${targetFileName}."')";
                ExecuteQuery($str_query_insert);

                //To Reload, there are no straight legal ways, but can do with a twist
                //Method 1:
                Header('Location: '.$_SERVER['PHP_SELF']);
                Exit(); //optional
                //Method 2:
                echo '<script>parent.window.location.reload(true);</script>';

        }
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T06:53:34.843

您可以为此使用uploadify 的OnUploadComplete 事件。您可以在上传完成后保存上传文件的文件名。因此，如果您在两者之间取消上传，则它不会存储在数据库中。

```
$(function() {
    $("#file_upload").uploadify({
        'swf'              : '/uploadify/uploadify.swf',
        'uploader'         : '/uploadify/uploadify.php',
        'onUploadComplete' : function(file) {
            alert('The file ' + file.name + ' finished processing.');
        }
    });
}); 
```

此外，您可以在上述函数中使用 location.reload(true) 来在上传完成后刷新页面

# objective-c - 引用计数设置为零时是否释放内存？

> ID：13538963
> 
> 赞同：1
> 
> 时间：2012-11-24T06:35:18.327
> 
> 标签：objective-c, memory-management, reference, count

我发现将`[object_name retain]`对象引用计数增加 1 并将`[object_name release]`对象引用计数减少 1。`[pool drain]`将释放应用于它引用的所有对象。

现在我很困惑。当一个对象没有引用时会发生什么？ `release`并且`drain`只是减少引用计数，所以内存实际上是在零引用计数时释放的，还是我仍然有一个引用计数为零的对象？

我还发现如果在这里

`[pool drain]`// 使我的 Object str3 引用计数为零

`NSLog(@"%li",[str3 length]);`// 它有效，对象可能还没有被销毁！

//这里的其他代码

但

`[pool drain]`

//这里的其他代码

`NSLog(@"%li",[str3 length]);`// 不工作，可能它现在被销毁了！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-24T06:39:28.297

当没有对 then 的强引用时（即当 release 将它们的保留计数降低到 0 时），对象将被释放。

但是请记住，该`-retainCount`方法是无用的，您不应该调用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T06:38:57.763

我认为该对象将在零保留计数后被销毁，并且不能再使用。请参阅[此处](https://developer.apple.com/library/mac/#documentation/General/Conceptual/DevPedia-CocoaCore/MemoryManagement.html)了解更多信息。

# javascript - 从 ajax 内容动态创建新选项卡

> ID：13538966
> 
> 赞同：0
> 
> 时间：2012-11-24T06:35:35.247
> 
> 标签：javascript, css, zurb-foundation

我是基金会的新手，我认为在很大程度上它很棒。

我只是有一个关于基础选项卡的问题，并且我已经阅读了主要讨论标记结构以获得效果的文档。

但是，我有一种情况，我必须在我的应用程序中创建新的动态选项卡，其中将使用 ajax 加载数据，并且这些选项卡及其选项卡式内容将即时创建。

我假设如果您动态创建新的选项卡元素，则必须运行一些方法来为新选项卡创建事件处理程序。

我只是想知道是否有任何功能可以更新选项卡对象，以便选项卡的事件将传播到新创建的项目？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T23:36:03.723

您是否尝试过通过 js/ajax 添加选项卡？选项卡的事件处理程序附加到文档，而不是选项卡本身。它通过jQuery的事件委托来完成tab改变事件。所以这意味着单击选项卡将冒泡到文档元素并触发更改。这甚至适用于动态添加的选项卡。

所以简短的回答是：不要担心事件处理。即使在页面加载后添加的选项卡也可以使用。

# php - 有没有办法使用 PHP 关闭电脑

> ID：13538970
> 
> 赞同：4
> 
> 时间：2012-11-24T06:35:49.873
> 
> 标签：php, windows, browser

我有一个想法，我在 localhost 上运行了一个 php 本地网页

我想为 3 个按钮使用 GUI：**关机**、**睡眠**和**重启**

PHP 是否允许我进行这些操作？是否准备好在 PHP 中编写类、方法？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-24T06:42:51.557

如果您的 Apache/PHP 配置设置为允许使用`system`，那么您可以使用它。

对于 *nix 系统：

```
system('shutdown now');    // shutdown
// or
system('reboot');          // reboot
system('shutdown -r now'); // also reboot :) 
```

对于 Windows：

```
system('shutdown -t -s 0'); // shutdown
// or
system('shutdown -r -t 0'); // reboot 
```

[更多信息在这里。](https://superuser.com/a/188741/109474)

就 *nix 上的睡眠/待机而言，它变化很大。

* * *

**注意**：您也可以使用`shell_exec()`或`exec()`。

* * *

编辑：

根据 user1597430 的评论，在 *nix 系统中，您可以传递`-h`(halt) 选项，该选项基本上会关闭并*停止*CPU，但不会断开主电源。

```
system('shutdown -h now'); // shutdown and halt
system('shutdown -P now'); // shutdown and power off 
```

服务器故障[在这里有一些很好的答案](https://serverfault.com/a/191541)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-24T06:40:55.067

几乎所有语言都必须进行系统调用。

```
shutdown -s -t 0 
```

这或多或少是灵丹妙药。例如，Java 可以这样称呼它：

```
public static void main(String arg[]) throws IOException{
    Runtime rt = Runtime.getRuntime();
    Process proc = rt.exec("shutdown -s -t 0");
    System.exit(0);
} 
```

PHP会是这样的

```
<?php
exec ('shutdown -s -t 0');
?> 
```

但问题是 PHP 是一种解释性语言，由一个网络服务器编译，该服务器发出信号由最终用户运行，因此这种行为可能很混乱。就像用电锯修剪指甲...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T06:39:29.927

您可以从 php 调用 shell 脚本，该脚本将关闭、睡眠并重新启动您的计算机，它可以在基于 linux 的机器上完成，但不确定是否可以在 Windows pc 上

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-10-17T16:33:42.727

您可以在 Windows 上使用 PHP 执行 .bat 文件。

```
<?php echo exec('reboot.bat'); ?> 
```

.bat 文件的内容：

关机示例：

```
C:\Windows\system32\shutdown.exe -s -c "关闭计算机。"
```

重启示例：

```
C:\Windows\system32\shutdown.exe -r -c“正在重新启动以获取最新更新。”
```

待机模式

```
rundll32.exe powrprof.dll,SetSuspendState
```

# mysql - 带有事务的存储过程给了我错误

> ID：13538972
> 
> 赞同：0
> 
> 时间：2012-11-24T06:36:24.233
> 
> 标签：mysql, sql, stored-procedures, error-handling

有人可以告诉我为什么以下存储过程给我一个错误 -

```
CREATE PROCEDURE test(emailA varchar(50))
BEGIN
DECLARE a  INT;
 DECLARE f_id BIGINT;

DECLARE exit handler for sqlexception sqlwarning 
BEGIN    
  SET a = 1;
END; 

DECLARE EXIT HANDLER FOR 1072
BEGIN       
     CALL log_error(1072,'test');
END;   

SELECT id  INTO f_id FROM user WHERE email = emailA;

END// 
```

错误

您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在 'sqlwarning BEGIN SET a = 1; 附近使用正确的语法；结尾; 在第 6 行声明退出处理程序 F'

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T06:54:25.107

我认为您需要添加逗号

```
DECLARE exit HANDLER FOR SQLEXCEPTION, SQLWARNING 
```

*   [**DECLARE ... HANDLER**语法](http://dev.mysql.com/doc/refman/5.0/en/declare-handler.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T08:39:48.063

如果还没有解决..

希望这有效

DECLARE sqlexception 的退出处理程序 SET a = 1, sqlwarning CALL log_error(1072,'test');

# javascript - 在 Dreamweaver 中打开时文件损坏

> ID：13538980
> 
> 赞同：1
> 
> 时间：2012-11-24T06:39:04.880
> 
> 标签：javascript, html, file, dreamweaver

我遇到了由其他人完成的 Web 项目的问题。我的任务是修改一些页面（比如商店中的价格，没什么复杂的），但是当我在 Dreamweaver 中加载项目时，一些页面已损坏。这些页面在浏览器中以及在基本 txt 编辑器中打开源代码时看起来都很好。有谁知道这是什么原因造成的？

我认为这并不重要，但这些文件包含 HTML 和 javascript。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T04:00:06.970

除了用于创建站点的程序之外，在任何程序中编辑站点设计都是有风险的。切换到不同品牌的编辑器可能会导致源代码损坏。我不确定最初用于创建代码的确切内容，但这可能是问题所在

我建议导入到您的新编辑器并发布到测试文件夹以确保没有损坏。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T04:24:27.677

你说..

> 这些页面在浏览器中以及在基本 txt 编辑器中打开源代码时看起来都很好

大多数情况下，这种类型的问题是由于文件格式（我的意思是文件标准）引起的。因此，最好在 txt 编辑器中打开它并复制您的代码并在 Dreamweaver 中创建具有适当扩展名的新文件并将您的代码粘贴到其中。

# android - 解析 JSON 并将对象显示到列表视图上

> ID：13538981
> 
> 赞同：0
> 
> 时间：2012-11-24T06:39:14.420
> 
> 标签：android, json

我正在做一个名为电话簿的 android 应用程序。我正在使用 php 脚本从服务器中提取联系方式。联系方式包含姓名、电话号码、电子邮件地址。我想在列表视图中显示它。我已经尝试过，但我能够在不同的行中显示各个人的姓名、ph.no 和 email.id。我怎样才能在同一行显示它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T09:13:25.350

您可以使用自定义 ArrayAdapter 自定义 Android ListView 项。

你可以这样做，

```
/* In main activity */
ListView myListView = (ListView)findViewById(R.id.myListView);
final ArrayList<Phonebook> todoItems = new ArrayList<Phonebook>();
final YourAdapter x= new YourAdapter(this,R.layout.your_listviewlayout,todoItems);
myListView.setAdapter(x);

Phonebook phnbk= new Phonebook();
// enter code for set values to Phonebook class variables
/* Inserting the values to array */
todoItems.add(phnbk);

/* Customized array adaptor class */
private class YourAdapter extends ArrayAdapter<Phonebook> 
{
    private ArrayList<Phonebook> items;
    public YourAdapter (Context context, int textViewResourceId, ArrayList<Phonebook> items) 
    {
        super(context, textViewResourceId, items);
        this.items = items;
    }
    @Override
    public View getView(int position, View convertView, ViewGroup parent) 
    {
        View v = convertView;
        if (v == null) 
        {
            LayoutInflater vi = (LayoutInflater)getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            v = vi.inflate(R.layout.your_listviewlayout, null);
        } 
        Phonebook o = items.get(position);
        if (o != null) 
        {
            //insert values to each text view in your list view layout
            tv1.setText(o.name);
            tv2.setText(o.phnnum);
                        tv3.setText(o.email);                   
        }
        return v;
    }
}

/* Phonebook class */
public class Phonebook{    
    public String name;
    public String phnnum;
    public String email;
    public Phonebook(){
        super();
    }

    public Phonebook(String name, String phnnum, String email) {
        super();
        this.name = name;
        this.phnnum = phnnum;
        this.email = email;
    }
} 
```

# ocaml - 在 Ocaml 中缩写构造函数名称

> ID：13538985
> 
> 赞同：5
> 
> 时间：2012-11-24T06:39:28.177
> 
> 标签：ocaml, abbreviation

我有两个模块。一个定义了一个变体类型：

```
module A = struct
  type foo = Bar of material | Baz | Boo

  (* other stuff *)
end 
```

我希望能够`foo`在另一个模块中使用 's 变体作为构造函数和左侧

```
module B = struct
  type foo = A.foo  (* I can abbreviate A.foo by assigning it a local alias *)

  let f (x : foo) = match x with
    | Bar m       -> Bar (g m)  (* Any way to abbreviate Bar and friends? *)
    | Baz   | Boo -> x
end 
```

但是根据[“引用命名对象”](http://askra.de/software/ocaml-doc/3.12/full-grammar.html#constr)，我必须在变体名称前面加上一个*模块路径*：

```
 let f (x : foo) = match x with
    | A.Bar m         -> A.Bar (g m)
    | A.Baz   | A.Boo -> x 
```

有什么方法可以跳过避免使用缺少`open`ing 的模块路径并从中提取所有其他内容`A`？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-24T10:52:26.573

您可以在本地打开A：

```
let f (x : foo) = A.(match x with
  | Bar m       -> Bar (g m)
  | Baz   | Boo -> x) 
```

或者

```
let f (x : foo) =
  let open A in
  match x with
  | Bar m       -> Bar (g m)
  | Baz   | Boo -> x) 
```

您可以`Bar`在子模块中定义，以便暴露更少的东西：

```
module A = struct
  module BasicDataAndOps = struct
    type foo = Bar of material | Baz | Boo
  end
  open BasicDataAndOps
  (* other stuff *)
end

module B = struct
  open A.BasicDataAndOps
  ... 
```

为了在模式之外使用，您可以在 B 中定义一个“智能构造函数”：

```
let bar m = A.Bar m 
```

ETA：我忘记了重述类型定义的可能性，如 Ashish Argwal 的回答中所述：`type foo = A.foo = Bar of material | Baz | Boo`. 鉴于您的示例中已经有类型缩写，这是最好的答案。

有一些关于[基于类型的标签消歧的](http://gallium.inria.fr/~scherer/gagallium/resolving-field-names/)工作可能会有所帮助，但它可能不会被语言所接受。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-24T23:25:01.677

除了 lukstafi 给出的答案之外，您还可以在定义时重新声明构造函数`B.foo`。

```
module A = struct
  type foo = Bar | Baz
end

module B = struct
  type foo = A.foo = Bar | Baz

let f (x : foo) = match x with
  | Bar -> "bar"
  | Baz -> "baz"

end 
```

# doctrine-orm - ZF2 从一个地方管理表单和实体

> ID：13538987
> 
> 赞同：1
> 
> 时间：2012-11-24T06:39:30.830
> 
> 标签：doctrine-orm, crud, zend-framework2

我想知道人们如何在 ZF2 中实现基本的 CRUD。

我已经使用 Doctrine ORM 玩了一两个星期，我最好的解决方案是实现一个实体类，然后实现一个表单类来匹配实体。

ZF2 是否没有一种类似于 RoR 的好方法来从一个地方管理所有这些？例如，如果我向我的实体添加一个新字段，我也不想在表单类中添加一个新字段。我什至不想有一个简单表单的表单类。

我也尝试过注释，它们有些工作，但是当您的表单字段是相关实体时，它们似乎在获取对象管理器方面存在问题。我发现了一个关于这个的github问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T13:23:12.710

注释将是您获得解决方案的唯一途径`one-for-all`。

就我个人而言，我将我的代码分开了很多，以遵循 SoC 原则（关注点分离）。我的实体有一个班级。我还有另一堂课。另一个提供 InputFilters 和 Validators 的类，我还使用 Factory 类来实例化具有依赖关系的东西（例如 Doctrine Form Elements 的 EntityManager）。

我猜最终归结为个人喜好。我认为我的方法比使用注释更简洁。注释也有点慢，因为它们需要解析文件（同样，在实体构建器旁边），所以应该考虑缓存。

# html - 防止 url 字符串将 & 编码为 &

> ID：13538988
> 
> 赞同：2
> 
> 时间：2012-11-24T06:39:46.020
> 
> 标签：html, cakephp

我正在为我的 Web 应用程序使用 cakephp ajax 分页。

在这个应用程序中，我也实现了搜索过滤器。当用户过滤记录时，我使用 GET 方法提交搜索表单，在控制器中我获取过滤器变量并将它们附加到分页器助手中，如下所示。

```
$this->paginator->options(array(
    'url' => array_merge($this->passedArgs, array('?'=> $query_string)), 
    'update' => '#tlist', 
    'evalScripts' => true)
); 
```

我的问题是，在我的分页链接中，我的所有 & 都被转换为 & 见下文并查看粗体部分。

`<a href="/sites/tutor/users/ajaxtutor/page:2?gender%5B0%5D=1`&`gender%5B1%5D=2" id="link-1795722171" />;`

当我点击链接时，我会得到如下查询字符串：

```
[gender] => Array
        (
            [0] => 1
        )
[amp;gender] => Array
        (
            [1] => 2
        ) 
```

如何`amp;`从查询字符串中删除此额外内容。

任何人都可以帮助如何应对这种情况。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T07:01:12.823

The `&` *should* be converted to `&amp;`. Having a `&` by itself in HTML code is incorrect.

This is what the link should look like in the HTML source:

```
<a href="/sites/tutor/users/ajaxtutor/page:2?gender%5B0%5D=1&amp;gender%5B1%5D=2" id="link-1795722171">2 </a> 
```

So, if you have problems receiving the data, it's not because of the `&amp;` in the code.

请注意，查询字符串中的键是`gender[0]`and `gender[1]`。HTML 协议在查询字符串中没有数组的概念，因此这是传递给服务器的确切名称，但是 PHP 将解析这些值并从中创建一个数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T05:29:44.360

正如 guffa 所说，从`&` to的转换是正确的，`&amp;`因为它是 html 标准。

问题是 cakephp 选择了分页链接的 href 部分，其中包含`&amp;`代替`&`并将其放入 ajax url 部分。请参见下面的示例：

*   分页链接：
*   `<a href='somedomain.com?&amp;a=1&amp;b=2>1</a>`
*   生成的ajax代码：
*   ```
    $("#link-1478709635").bind("click", function (event) {
        $.ajax({
            url: "somedomain.com?&amp;a=1&amp;b=2"
        });
        return false; 
    ```

*   当我们点击链接时，它将`&amp;`取代`&`它。

*   作为一种解决方案，我使用 Post 方法代替 GET 方法，在分页器选项中使用分页链接将我的数据发回，如下所示： `'data'=>http_build_query($this->request->data),`

# node.js - 在nodejs中同步接受命令行输入的最佳方法？

> ID：13538990
> 
> 赞同：4
> 
> 时间：2012-11-24T06:40:10.200
> 
> 标签：node.js

在 nodejs 中同步接受一系列命令行输入的最佳方法是什么？

就像程序会打印一样

```
Enter Value for variable one 
```

然后用户输入值，之后命令行应该要求第二个输入，例如

```
Enter Value for variable two 
```

等等

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-08-15T02:05:33.057

最简单的方法是，恕我直言，向用户显示“问题”并等待他的回答。这些问题可能总是相同的（例如“>>”之类的提示），也可能不同（例如，如果您想询问一些变量）。

要显示这些问题，您可以使用[stdio](https://www.npmjs.com/package/stdio)。它是一个简化标准输入/输出管理的模块，其主要功能之一正是您想要的：

```
var stdio = require('stdio');
stdio.question('What is your name?', function (err, name) {
    stdio.question('Are you male or female?', ['male', 'female'], function (err, sex) {
        console.log('Your name is "%s". You are "%s"', name, sex);
    });
}); 
```

如果您运行之前的代码，您将看到如下内容：

```
What is your name?: John
Are you male or female? [male/female]: female
Your name is "john". You are "female" 
```

`stdio`如果您指定一组可能的答案，则包括对重试的支持。否则用户将能够编写他们想要的任何内容。

PD：我是`stdio`创造者。:-)

[![新PM](../Images/05bbadb5eda34ce124f06a4fb23d481a.png)](https://nodei.co/npm/stdio/)
[（来源：[nodei.co](https://nodei.co/npm/stdio.png)）]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T06:47:37.067

根据您的具体需求，您可以创建自己的 REPL。

[http://nodejs.org/api/repl.html](http://nodejs.org/api/repl.html)

只需`repl.start()`使用 for 的选项调用`prompt`，并使用您自己的自定义`eval`和`writer`回调。

```
repl.start({
    prompt: 'Enter value: ',
    eval: function (cmd, context, filename, callback) {
         // Do something
        callback(/* return value goes here */); 
    },
    writer: function (data) {
        // echo out data to the console here
    }
}); 
```

# asp.net-4.0 - 还原取消按钮的单击事件的更改

> ID：13538992
> 
> 赞同：2
> 
> 时间：2012-11-24T06:40:19.957
> 
> 标签：asp.net-4.0

我有一个用户控件（UserInformation.ascx），其中包含几个控件，如文本框、raddatepicker、列表框等。如果用户进行任何更改然后单击取消，我需要显示初始值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T08:18:29.793

如何通过 AJAX 检索原始页面并更新所有原始值？

```
<script>
  $("#myCancelButton").on("click", function () {
    $.get({
      url: document.location.href,
      success: function(result) {
        $("input", $(result)).each(function(index, el) {
          var originalElement = $("#" + $(el).attr("id"));
          $(el).val(originalElement.val());
        });
    });
    return false;
  });
</script> 
```

# unix - 从单行文本中获取模式的所有实例，编辑，管道输出到行分隔的文本文件

> ID：13538994
> 
> 赞同：0
> 
> 时间：2012-11-24T06:40:31.230
> 
> 标签：unix, sed, grep

我有一个文本块（单行），它是由标签和一堆其他垃圾分隔的 URL 列表。我想解析与“http.*">RSS”匹配的 URL 的整个块，编辑该模式的所有实例（以删除 glob 之后的所有内容），并将整个内容作为 line- 输出到文件中分开的条目。

我想我可以用 GREP 做到这一点（然后用 SED 编辑和添加新行），但是 GREP 抓取匹配的行，而不是匹配的*模式。*我应该使用不同的命令吗？我还尝试使用 SED 在模式之前添加一个换行符 (\n)，无论它发生在哪里，但这也不起作用。

编辑：这是我正在使用的数据的示例：

```
OUT</a> (<a href="https://evilcakes.wordpress.com/rss">RSS</a>)</li><li><a href="http://eater.com/" title="">Eater National</a> (<a href="http://feeds.feedburner.com/EaterNational">RSS</a>)</li><li><a href="http://www.foodtechconnect.com" title="">Food+Tech Connect</a> (<a href="http://feeds.feedburner.com/foodtechconnect">RSS</a>)</li><li><a href="http://www.innatthecrossroads.com" title="">Inn at the Crossroads</a> (<a href="http://innatthecrossroads.com/feed/">RSS</a>)</li><li><a href="http://www.seriouseats.com/" title="">Serious Eats</a> (<a href="http://feeds.seriouseats.com/seriouseatsfeaturesvideos">RSS</a>)</li><li><a href="http://www.thatsnerdalicious.com" title="">That's Nerdalicious!</a> (<a href="http://www.thatsnerdalicious.com/feed/">RSS</a>)</li><li><a href="http://thedrunkenmoogle.com/" title="">The Drunken Moogle</a> (<a href="http://www.thedrunkenmoogle.com/rss">RSS</a>)</li></ul></li><li><h2 class="entry-title">Comics</h2><ul class="opmlGroup"><li><a 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T07:15:29.300

这可能对您有用（GNU sed）：

```
sed '/https\?:[^"]*/!d;s//\n&\n/;s/^[^\n]*\n//;P;D' file 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-24T07:04:47.397

这是一种使用方法`GNU grep`：

```
grep -oP 'http[^"]*(?=">RSS)' file 
```

结果：

```
https://evilcakes.wordpress.com/rss
http://feeds.feedburner.com/EaterNational
http://feeds.feedburner.com/foodtechconnect
http://innatthecrossroads.com/feed/
http://feeds.seriouseats.com/seriouseatsfeaturesvideos
http://www.thatsnerdalicious.com/feed/
http://www.thedrunkenmoogle.com/rss 
```

选项：

```
-o, --only-matching
    Print only the matched (non-empty) parts of a matching line, with each such 
    part on a separate output line.
-P, --perl-regexp
    Interpret PATTERN as a Perl regular expression. This is highly experimental
    and grep -P may warn of unimplemented features. 
```

此外，您可能想阅读[环视断言](http://www.regular-expressions.info/lookaround.html)。HTH。

***编辑：***

这是另一种使用方式`awk`：

```
awk -F\" '{ for(i=1;i<NF;i++) if ($(i+1) ~ /RSS/) print $i }' file 
```

结果：

```
https://evilcakes.wordpress.com/rss
http://feeds.feedburner.com/EaterNational
http://feeds.feedburner.com/foodtechconnect
http://innatthecrossroads.com/feed/
http://feeds.seriouseats.com/seriouseatsfeaturesvideos
http://www.thatsnerdalicious.com/feed/
http://www.thedrunkenmoogle.com/rss 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-24T07:10:26.980

我将您的示例数据放在 urls.dat 中。

```
cat urls.dat | awk '{n=split($0,a,"\""); for (i=1;i<=n;i++) if ( match( a[i], "^http" ) ) print a[i]; }' 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-24T20:42:10.123

这是一种适用于 GNU 和 BSD grep 的方法：

```
<infile grep -Eo 'https?://[^"]+">RSS*' | grep -Eo '^[^"]+' 
```

输出：

```
https://evilcakes.wordpress.com/rss
http://feeds.feedburner.com/EaterNational
http://feeds.feedburner.com/foodtechconnect
http://innatthecrossroads.com/feed/
http://feeds.seriouseats.com/seriouseatsfeaturesvideos
http://www.thatsnerdalicious.com/feed/
http://www.thedrunkenmoogle.com/rss 
```

# javascript - 在幻灯片播放期间访问视频剪辑时间标记

> ID：13538995
> 
> 赞同：1
> 
> 时间：2012-11-24T06:40:34.560
> 
> 标签：javascript, jquery

可以使用脚本在播放期间访问时间标记，以便可以将图像滚动到它旁边以制作幻灯片吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T09:03:19.727

虽然可以做到这一点，但您不会拥有完全的跨浏览器兼容性（对于一些旧版本的 IE 和一些移动浏览器）。

通过使用 HTML5 标签，您可以在您的页面上播放视频并通过 javascript 访问其时间标记位置。

HTML：

```
<video id="vidElem" width="640" height="480">
  <source src="movie.webm" type="video/webm" />
  <source src="movie.mp4" type="video/mp4">
  <source src="movie.ogg" type="video/ogg">
  Your browser does not support the video tag.
</video> 
```

JS：

```
var $video = document.getElementById('vidElem');
$video.addEventListener("canplay", _InitSync, false);

function _InitSync() {
  $video.addEventListener("timeupdate", _SyncSlides, false);
}
function _SyncSlides() {
  $curTime = $video.currentTime;
} 
```

老实说，我没有亲自测试过这段代码，但所有这些都应该是有效的。最后，您将拥有一个带有视频当前时间标记的变量，该变量将随着视频播放而更新。此外，我什至不确定“_InitSync()”函数是否是必要的步骤，但为了安全起见，我或多或少地添加了它。基本上，这将等待视频元素准备好，然后一旦准备好，它将添加一个事件，每次视频更改它的时间标记时都会触发。在最后一个函数中，您只需添加一些代码，这些代码将根据 $curTime 的值更改您的幻灯片。

让我知道这是否解决了您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T07:31:08.557

假设您指的是本机 HTML5 视频播放器，则使用该属性读取或设置当前时间-[在这里](http://www.w3schools.com/tags/av_prop_currenttime.asp)`currentTime`阅读它和网络上的其他几个参考站点。

# android - 可搜索的列表视图

> ID：13538999
> 
> 赞同：2
> 
> 时间：2012-11-24T06:40:57.020
> 
> 标签：android, android-listview, android-edittext, listactivity, simpleadapter

在这里，我正在创建显示歌曲列表的 ListView。在列表项上单击我正在传递歌曲的位置来播放它。意味着我有functionlke playSong（Int Index）。这确实有效。但是当我执行搜索时，它会显示可搜索的项目，然后在该项目上单击它我并没有得到它的真实位置。

例子 ：

清单向我显示了以下项目：1) 与你同在 2) 你能在我这里吗 3) 顺其自然

但是现在当我搜索“你能在我这里吗”时，它会显示“你能在我这里吗”的列表。当我点击这个项目时，它需要 0 索引并播放“与你同在”的歌曲。

那么我的代码中缺少什么？请给我建议。

这是我的代码：

```
ArrayList<HashMap<String, String>> songsListData = new ArrayList<HashMap<String, String>>();
        Cursor cursor = managedQuery(MediaStore.Audio.Media.EXTERNAL_CONTENT_URI,null , null, null,MediaStore.Audio.Media.TITLE );          
          if (cursor == null) 
          {
              //Query Failed , Handle error.
          }
          else if (!cursor.moveToFirst()) 
          {
             //No media on the device.
          }
          else
          {

              int titleColumn = cursor.getColumnIndex(android.provider.MediaStore.Audio.Media.TITLE);
              int idColumn = cursor.getColumnIndexOrThrow(android.provider.MediaStore.Audio.Media.DATA);
              int artistcolumn = cursor.getColumnIndex(android.provider.MediaStore.Audio.Media.ARTIST);
              int durationcolumn =cursor.getColumnIndex(android.provider.MediaStore.Audio.Media.DURATION);

              for(int i=0;i<cursor.getCount();i++)
              {
                    String thisTitle = cursor.getString(titleColumn);
                    String path = cursor.getString(idColumn);
                    String artist = cursor.getString(artistcolumn);
                    Long duration = cursor.getLong(durationcolumn);
                    Utilities objUtilities = new Utilities();
                    String timeDuration = objUtilities.milliSecondsToTimer(duration);

                   HashMap<String, String> song = new HashMap<String, String>();
                   song.put("songTitle",thisTitle);
                   song.put("songPath", path);
                   song.put("artist", artist);
                   song.put("duration",timeDuration);

                   // Adding each song to SongList
                   songsList.add(song);
                   cursor.moveToNext();
              }
          }

        // looping through playlist
        for (int i = 0; i < songsList.size(); i++) {
            // creating new HashMap
            HashMap<String, String> song = songsList.get(i);

            // adding HashList to ArrayList
            songsListData.add(song);
        }

        // Adding menuItems to ListView
        String[] from = {"songTitle", "artist" , "duration"};
        int[] to={R.id.songTitle,R.id.songArtist, R.id.duration};
         adapter = new SimpleAdapter(this, songsListData,
                R.layout.playlist_item, from, to);

        setListAdapter(adapter);

        // selecting single ListView item
        ListView lv = getListView();

        // listening to single listitem click
        lv.setOnItemClickListener(new OnItemClickListener() {

            public void onItemClick(AdapterView<?> parent, View view,
                    int position, long id) {
                // getting listitem index
                int songIndex = position;

                // Starting new intent
                Intent in = new Intent(getApplicationContext(),
                        AndroidBuildingMusicPlayerActivity.class);

                // Sending songIndex to PlayerActivity
                in.putExtra("songIndex", songIndex);                
                startActivity(in);  

            }
        });

        inputSearch = (EditText) findViewById(R.id.inputSearch);
        inputSearch.addTextChangedListener(new TextWatcher() {

            public void onTextChanged(CharSequence cs, int arg1, int arg2, int arg3) {
                // When user changed the Text
            ((SimpleAdapter)getListAdapter()).getFilter().filter(cs);   

            }

            public void beforeTextChanged(CharSequence arg0, int arg1, int arg2,
                    int arg3) {
                // TODO Auto-generated method stub

            }

            public void afterTextChanged(Editable arg0) {
                // TODO Auto-generated method stub                          
            }
        });

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T07:15:14.943

您可以做的是覆盖`getItemId`适配器的方法以返回“真实”歌曲索引。然后，您将从回调的`id`参数中检索此索引。`onItemClick`

尝试这个：

```
 adapter = new SimpleAdapter(this, songsListData, R.layout.playlist_item, from, to) {
        public long getItemId(int position) { 
            return songsListData.indexOf(getItem(position));
        }
    }; 
```

并确保您`songsListData`的声明是最终的（以便您可以从适配器内部访问它）：

```
final ArrayList<HashMap<String, String>> songsListData = new ArrayList<HashMap<String, String>>(); 
```

然后在您的`onItemClick`方法中使用`id`，而不是`position`：

```
 public void onItemClick(AdapterView<?> parent, View view,
                int position, long id) {
            // getting listitem index
            int songIndex = id;
            ... 
```